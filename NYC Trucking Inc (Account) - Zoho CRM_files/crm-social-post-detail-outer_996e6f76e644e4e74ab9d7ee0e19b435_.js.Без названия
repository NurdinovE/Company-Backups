Lyte.Component.register("crm-social-post-detail-outer",{_template:'<template tag-name="crm-social-post-detail-outer"> <template is="if" value="{{related_list}}"><template case="true"> <div class="socViewConvoHeader aligncenter pR"> <span class="backtoIcon dN vaM socialBackToColumn left5 pA" data-zcqa="social_tab_back_to_message" onclick="{{action(\'backToMessages\')}}"></span> <span class="socViewConvoHName dIB vaM maxW70per ellipsistext crm-heading-font-size">{{user.name}}</span> </div> <crm-social-post-detail id="{{id}}" account="{{account}}" user="{{user}}" network="{{network}}" perm="{{perm}}" attachments="{{attachments}}" retweets="{{retweets}}" likes="{{likes}}" comments="{{comments}}" message="{{message}}" created_at="{{created_at}}" link="{{link}}" place_type="{{place_type}}" brand="{{brand}}" type="{{type}}"></crm-social-post-detail> <template is="if" value="{{if_lt_len(perm,3)}}"><template case="true"> <div id="socReplyBox" class="socViewConvoReply socColListsReply p20 postResponse br8"> <template is="if" value="{{ifEquals(network,\'twitter\')}}"><template case="true"><div class="mL48 mB7 crmNotFoundColor crm-small-font-size">{{getI18n("crm.social.reply.to")}} <span class="crmLinkColor">{{if(reply_text,reply_text,\'\')}}</span></div></template></template> <span class="socReplyImg pR dIB soc{{network}}SmallIcon"> <img src="{{account.info.picture}}" class="socUserReplyImage dIB vaT" alt="Image"> </span> <div class="socReplyTextBox dIB vaT bg_white pR"> <lyte-input class="socReplyTemplateInput w100_per socialCommonText" lt-prop-class="socReplyTemplateInputText" lt-prop-type="textarea" lt-prop-appearance="box" lt-prop-rows="6" lt-prop-cols="80" lt-prop-direction="horizontal" lt-prop-text-area-resize="{&quot;vertical&quot;:false,&quot;horizontal&quot;:false}" lt-prop-id="resp_box" lt-prop-maxlength="10000" data-zcqa="twitter_reply_inputbox" on-value-change="{{method(\'processText\',id,place_type,network)}}" lt-prop-value="{{lbind(replyToTweet)}}" lt-prop-placeholder="{{getI18n(\'crm.nsocial.write.comment\')}}" reply="{{reply_text}}" u_name="{{screen_name}}" text_id="{{id}}_{{place_type}}" on-focus="{{method(\'showTwitterLimit\',\'focus\')}}" on-blur="{{method(\'showTwitterLimit\',\'blur\')}}"> </lyte-input> <template is="if" value="{{image}}"><template case="true"> <div class="socReplyAttImg mT10 pR dN socialCommonPreviewDiv"> <div class="socReplyAttImgs fL"> <img id="soc_comment_img" src="{{getCrmImageUrl(\'spacer.gif\')}}" class="socialCommonPreview w100 h100" alt="Image"> </div> <div class="cBoth"></div> <span data-zcqa="twitter_reply_post_remove_image" class="zcrm_svgIcons socRepImgClose pA cP" onclick="{{action(\'removeImage\',this,id,place_type)}}"></span> </div> </template></template> </div> <div class="clearFix mT8"> <template is="if" value="{{image}}"><template case="true"> <span class="socialImg socAttachIcon mL48 vaM"> <input type="file" id="commentimage" class="socialCommonAttach pA" accept="image/*" onchange="{{action(\'onImageSelected\',event,this,id,place_type,network)}}" data-zcqa="tw_attach_image"> </span> </template></template> <template is="if" value="{{ifEquals(network,\'twitter\')}}"><template case="true"><span id="twitter_limit" limit_id="{{id}}_{{place_type}}" class="socReplyCount crmBaseColor op5 crm-extra-small-font-size mL5 dIB vaM vH">280</span></template></template> <span class="crmLinkColor crm-small-font-size lh127 ttUppercase fR cP eventNone op5" data-zcqa="social_tab_reply_post" button_id="{{id}}_{{place_type}}" onclick="{{action(\'replyToPostFromDetail\',this,reply_to_comment)}}">{{success_text}}</span> <span class="ttUppercase crm-small-font-size crmNotFoundColor cP fR mR8" data-zcqa="social_tab_cancel" onclick="{{action(\'convoClose\',\'socViewConvPopup\')}}">{{getI18n("Cancel")}}</span> </div> </div> </template></template> </template><template case="false"> <lyte-modal lt-prop-height="auto" lt-prop-max-height="80%" lt-prop-width="45%" id="socDetailModal" lt-prop-wrapper-class="socDetailModal" lt-prop-show="{{lbind(renderPostDetails)}}" on-close="{{method(\'convoClose\')}}" lt-prop-transition="{&quot;animation&quot;:&quot;fadeIn&quot;}" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;center&quot;}" lt-prop-close-on-escape="false" lt-prop-allow-multiple="true"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="p0"> <div class="socViewConvoHeader aligncenter pR"> <span class="backtoIcon dN vaM socialBackToColumn left5 pA" data-zcqa="social_tab_back_to_message" onclick="{{action(\'backToMessages\')}}"></span> <span class="socViewConvoHName dIB vaM maxW70per ellipsistext crm-heading-font-size">{{user.name}}</span> </div> </lyte-modal-header> <lyte-modal-content class="p0 socAttachInModal" onscroll="{{action(\'scrollShadow\',this,\'socViewConvoHeader\')}}"> <crm-social-post-detail id="{{id}}" account="{{account}}" user="{{user}}" network="{{network}}" perm="{{perm}}" attachments="{{attachments}}" retweets="{{retweets}}" likes="{{likes}}" comments="{{comments}}" message="{{message}}" created_at="{{created_at}}" link="{{link}}" place_type="{{place_type}}" brand="{{brand}}" type="{{type}}"></crm-social-post-detail> </lyte-modal-content> <template is="if" value="{{if_lt_len(perm,3)}}"><template case="true"> <lyte-modal-footer class="left p0"> <div id="socReplyBox" class="socViewConvoReply socColListsReply p20 postResponse br8"> <template is="if" value="{{ifEquals(network,\'twitter\')}}"><template case="true"><div class="mL48 mB7 crmNotFoundColor crm-small-font-size">{{getI18n("crm.social.reply.to")}} <span class="crmLinkColor">{{if(reply_text,reply_text,\'\')}}</span></div></template></template> <span class="socReplyImg pR dIB soc{{network}}SmallIcon"> <img src="{{account.info.picture}}" class="socUserReplyImage dIB vaT" alt="Image"> </span> <div class="socReplyTextBox dIB vaT bg_white pR"> <lyte-input class="socReplyTemplateInput w100_per socialCommonText" lt-prop-class="socReplyTemplateInputText" lt-prop-type="textarea" lt-prop-appearance="box" lt-prop-rows="6" lt-prop-cols="80" lt-prop-direction="horizontal" lt-prop-text-area-resize="{&quot;vertical&quot;:false,&quot;horizontal&quot;:false}" lt-prop-id="resp_box" lt-prop-maxlength="10000" data-zcqa="twitter_reply_inputbox" on-value-change="{{method(\'processText\',id,place_type,network,replyToTweet)}}" lt-prop-value="{{lbind(replyToTweet)}}" lt-prop-placeholder="{{getI18n(\'crm.nsocial.write.comment\')}}" reply="{{reply_text}}" u_name="{{screen_name}}" text_id="{{id}}_{{place_type}}" on-focus="{{method(\'showTwitterLimit\',\'focus\')}}" on-blur="{{method(\'showTwitterLimit\',\'blur\')}}"> </lyte-input> <template is="if" value="{{image}}"><template case="true"> <div class="socReplyAttImg mT10 pR dN socialCommonPreviewDiv"> <div class="socReplyAttImgs fL"> <img id="soc_comment_img" src="{{getCrmImageUrl(\'spacer.gif\')}}" class="socialCommonPreview w100 h100" alt="Image"> </div> <div class="cBoth"></div> <span data-zcqa="twitter_reply_post_remove_image" class="zcrm_svgIcons socRepImgClose pA cP" onclick="{{action(\'removeImage\',this,id,place_type)}}"></span> </div> </template></template> </div> <div class="clearFix mT8"> <template is="if" value="{{image}}"><template case="true"> <span class="socialImg socAttachIcon mL48 vaM"> <input type="file" id="commentimage" class="socialCommonAttach pA" accept="image/*" onchange="{{action(\'onImageSelected\',event,this,id,place_type,network)}}" data-zcqa="tw_attach_image"> </span> </template></template> <template is="if" value="{{ifEquals(network,\'twitter\')}}"><template case="true"><span id="twitter_limit" limit_id="{{id}}_{{place_type}}" class="socReplyCount crmBaseColor op5 crm-extra-small-font-size mL5 dIB vaM vH">280</span></template></template> <span class="crmLinkColor crm-small-font-size lh127 ttUppercase fR cP eventNone op5" data-zcqa="social_tab_reply_post" button_id="{{id}}_{{place_type}}" onclick="{{action(\'replyToPostFromDetail\',this,reply_to_comment)}}">{{success_text}}</span> <span class="ttUppercase crm-small-font-size crmNotFoundColor cP fR mR8" data-zcqa="social_tab_cancel" onclick="{{action(\'convoClose\',\'socViewConvPopup\')}}">{{getI18n("Cancel")}}</span> </div> </div> </lyte-modal-footer> </template></template> </template> </lyte-modal> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]},{type:"text",position:[0,2,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,5,1]},{type:"componentDynamic",position:[1,5,1]},{type:"attr",position:[1,5,3]},{type:"if",position:[1,5,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,5]}]}},default:{}},{type:"attr",position:[1,7,1]},{type:"if",position:[1,7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,7,3]},{type:"if",position:[1,7,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,7,5]},{type:"text",position:[1,7,5,0]},{type:"attr",position:[1,7,7]},{type:"text",position:[1,7,7,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,3,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]},{type:"text",position:[0,2,0]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,1,3,1]},{type:"attr",position:[1,1,5,1]},{type:"componentDynamic",position:[1,1,5,1]},{type:"attr",position:[1,1,5,3]},{type:"if",position:[1,1,5,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,5]}]}},default:{}},{type:"attr",position:[1,1,7,1]},{type:"if",position:[1,1,7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,7,3]},{type:"if",position:[1,1,7,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,1,7,5]},{type:"text",position:[1,1,7,5,0]},{type:"attr",position:[1,1,7,7]},{type:"text",position:[1,1,7,7,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["user","network","perm","reply_text","account","id","type","attachments","retweets","likes","comments","screen_name","image","success_text","template_name","message","created_at","link","file","renderPostDetails","replyToTweet","related_list"],data:function(){return{user:Lyte.attr("object"),network:Lyte.attr("string"),perm:Lyte.attr("number"),reply_text:Lyte.attr("string"),account:Lyte.attr("object"),id:Lyte.attr("string"),type:Lyte.attr("string"),attachments:Lyte.attr("array"),retweets:Lyte.attr("object"),likes:Lyte.attr("object"),comments:Lyte.attr("object"),screen_name:Lyte.attr("string"),image:Lyte.attr("boolean",{default:!1}),success_text:Lyte.attr("string"),template_name:Lyte.attr("string"),message:Lyte.attr("string"),created_at:Lyte.attr("object"),link:Lyte.attr("string"),file:Lyte.attr("object"),renderPostDetails:Lyte.attr("boolean",{default:!1}),replyToTweet:Lyte.attr("string"),related_list:Lyte.attr("boolean",{default:!1})}},actions:{scrollShadow:function(t,e){this.applyShadow(t,e)},backToMessages:function(){this.backToMessages()},writeComment:function(){event.stopPropagation(),sE(event)},replyToPostFromDetail:function(t){var e=$L(t),o=(e.closest(".socOuterContainer").find(".socViewConvoParent.parentPost"),this.data.id),a=this.data.network,s=e.attr("button_id"),i=this.data.brand.id;i||(i=$L(".selectedBrand").attr("value"));var p=this.data.replyToTweet;e.addClass("op5 eventNone").removeClass("cP").prop("disabled",!0).css("opacity","0.5");var l=this.data.file,c=this.data.account.id;this.postComment(p,l,o,i,a,s,void 0,void 0,c)},removeImage:function(t,e,o){event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation()),o=e+"_"+o,delete this.data.file,this.removeImage(t,o,"twitter"===this.data.network)},processTextPaste:function(t,e,o){t=t+"_"+e,"twitter"===o?this.processTextPaste(t,!0):this.processTextPaste(t,!1)},showTwitterLimit:function(t){var e=$L(".socReplyCount");"focus"===t?e.removeClass("vH"):e.addClass("vH")},onImageSelected:function(t,e,o,a,s){t.stopPropagation();a=o+"_"+a;var i=this.onImageSelected(t,e,a,s);this.setData({file:i}),this.updateModalHeightAfterImageUpload("socDetailModal")},convoClose:function(){this.convoClose()},onClick:function(t){this.stopEvent(t)}},methods:{showTwitterLimit:function(t,e,o){this.twitterCountVisibility(t,e,o)},processText:function(t,e,o){t=t+"_"+e;var a=this.data.replyToTweet;"twitter"===o?this.processText(t,!0,a):this.processText(t,!1,a)},convoClose:function(){this.convoClose()}},convoClose:function(){this.setData("renderPostDetails",!1);var t=$L("#socViewConvPopup");t&&t[0]&&t[0].remove();var e=$L("crm-social-post-detail-outer");e&&e.length&&e[0].remove()}},{mixins:["crm-social-tab","crm-social-tab_actions","crm-social-integration","crm-stop-event"]});
