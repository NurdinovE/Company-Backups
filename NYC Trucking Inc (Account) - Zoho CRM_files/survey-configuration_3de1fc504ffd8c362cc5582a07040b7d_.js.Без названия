store.registerModel("survey",{email:Lyte.attr("string",{primaryKey:!0}),status:Lyte.attr("string"),portal:Lyte.attr("object"),modules:Lyte.attr("array"),selected_modules:Lyte.attr("array"),users:Lyte.attr("array")},{actions:{delete_per:{},create_portal:{},get_config:{},available_users_count:{},users:{},modules:{},enableSurvey:{},disableSurvey:{},portal_status:{},get_related_records:{},gdpr_check:{},search:{},encrypt:{},get_surveys:{},get_related_lists:{},search_relrecords:{},survey:{},fields:{},modules:{}}}),store.registerAdapter("survey",{namespace:"crm/v4/settings/integrations",buildURL:function(e,r,t,s,a,i,c){return"delete_per"===i?a=a.replace("/actions/delete_per",""):"modules"===i?a=a.replace("crm/v4/settings/integrations/survey/actions/","crm/v2.2/settings/"):"survey"===i?a=a.replace("/actions/survey",""):"enableSurvey"===i?a=a.replace("enableSurvey","enable"):"disableSurvey"===i?a=a.replace("disableSurvey","enable"):"create_portal"===i?a=a.replace("/actions/create_portal","/portal"):"get_config"===i?a=a.replace("/actions/get_config","/configuration"):"get_surveys"===i?a=a.replace("crm/v4/settings/integrations/survey/actions/get_surveys","crm/v4/__survey_departments/"+c.departmentid+"/__surveys"):"get_related_records"===i?a=a.replace("crm/v4/settings/integrations/survey/actions/get_related_records","crm/v2/"+c.module+"/"+c.entityId+"/"+c.relModule):"gdpr_check"===i?a=a.replace("crm/v4/settings/integrations/survey/actions/gdpr_check",c):"get_related_lists"===i?a=a.replace("crm/v4/settings/integrations/survey/actions/get_related_lists","crm/v3/settings/related_lists"):"search_relrecords"===i?a=a.replace("crm/v4/settings/integrations/survey/actions/search_relrecords","crm/v2/Vendors"):"modules"===i?a=a.replace("crm/v4/settings/integrations/survey/actions/search_relrecords","crm/v3/settings/modules"):"search"===i?(a=a.replace("crm/v4/settings/integrations/survey/actions/search",c.url),c.url.includes("search")?t.criteria=c.criteria:t.search_value=c.searchKey,t.page=c.page,t.per_page=c.per_page,t.module=c.module,void 0!==c.include_inner_details&&(t.include_inner_details=c.include_inner_details),a):"encrypt"===i?(c,a=a.replace("crm/v4/settings/integrations/survey/actions/encrypt","crm/v2.2/__internal/encrypted_values")):"fields"===i?(a=a.replace("crm/v4/settings/integrations/survey/actions/fields","crm/v2.1/settings/fields"),t.module=c,a):"updateRecord"===r?a=a.slice(0,a.lastIndexOf("/")):("createRecord"===r||"findAll"===r&&void 0!==c&&void 0!==c.isSurveyPopup&&!0===c.isSurveyPopup&&(a=a.replace("crm/v4/settings/integrations/survey",c.url),void 0!==c.include_inner_details&&(t.include_inner_details=c.include_inner_details,t.module=c.module),void 0!==c.noperpage&&c.noperpage&&delete t.per_page),a)},methodForRequest:function(e,r,t,s,a){if("PATCH"===e&&"updateRecord"===r&&(e="PUT"),"action"===r)switch(a){case"delete_per":case"disableSurvey":return"DELETE";case"create_portal":case"enableSurvey":return"POST";case"get_config":case"available_users_count":case"users":case"modules":case"portal_status":case"get_survey_departments":case"get_surveys":case"get_related_records":case"gdpr_check":case"search":case"get_related_lists":case"search_relrecords":case"survey":case"fields":return"GET"}return e},parseResponse:function(e,r,t,s,a,i,c){return void 0!==c&&void 0!==c.url&&(c.url.includes("surveys")?s=s.__surveys:c.url.includes("departments")?s=s.__survey_departments:c.url.includes("search")&&(s=s.data)),s}}),store.registerSerializer("survey",{serialize:function(e,r,t,s,a,i,c){return"create_portal"===c&&((r={}).portal=s),"createRecord"!==e&&"updateRecord"!==e||delete r.survey_configuration,r},normalizeResponse:function(e,r,t,s,a){if(204===a)return[];if("integFieldLayoutAllowed"===t.code)return t;if("createRecord"===r||"updateRecord"===r&&200===a){var i={};i.email=t.survey.details.integrated_email,t.survey=i}if("findAll"===r){if(t.survey)return t;if(t.__surveys)return t.__surveys;if(t.__survey_departments)return t.__survey_departments;if(t.data)return t.data;t.survey=t.configuration}return t},payloadKey:function(){return"survey"}});
