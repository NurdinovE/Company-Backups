Lyte.Component.register("crux-tag",{_template:'<template tag-name="crux-tag"> <lyte-dropdown lt-prop-disabled="{{cxPropDisabled}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-body="{{cxPropAriaBody}}" lt-prop-aria-button="{{cxPropAriaButton}}" lt-prop-aria-box="{{cxPropAriaBox}}" onmousedown="{{action(\'onMouseDown\',this,event)}}" onclick="{{action(\'onFocus\',this)}}" class="cxBoxDropdown {{if(cxPropTags.length,\'cxTagTagsPresent\',\'cxTagNoTagsPresent lyteDropNoOptSelected\')}}" lt-prop-selected="{{lbind(selectedList)}}" lt-prop-yield="true" on-before-add="{{method(\'beforeAddToList\')}}" on-add="{{method(\'addToList\')}}" on-before-remove="{{method(\'beforeRemoveFromList\')}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-type="multisearch" on-before-show="{{method(\'onBeforeOpenDropBox\')}}" on-hide="{{method(\'hideDropBox\')}}" on-before-hide="{{method(\'onBeforeHide\')}}" on-show="{{method(\'onOpenDropBox\')}}" lt-prop-boundary="{{cxPropBoundary}}" on-before-scroll-close="{{method(\'dropdownScrollClose\')}}" lt-prop-scope="{{cxPropScope}}" lt-prop-disable-item-tooltip="true"> <template is="registerYield" yield-name="yield"> <lyte-drop-button> <div class="lyteMultiselect {{if(cxPropRequestForTags.enable,\'cxTagButtonHeight\',\'\')}}"> <ul class="lyteMultipleSelect {{if(cxPropRequestForTags.enable,\'cxTagSelectedListWrapper\',\'\')}}"> <div id="cxSelectedLoader" class="cxFlexCenter cxTagDropButtonInitialLoaderWrap" style="{{if(loadingStateObj.initialSelectedLoader,\'\',\'display: none\')}}"> <span class="cxTagSearchLoader"></span> </div> <div id="cxSelectedTagListContainer" class="{{if(cxPropRequestForTags.enable,\'cxTagSelectedList\',\'cxSelectedTagListWrap\')}}" onscroll="{{action(\'selectedTagsScroll\',event)}}" style="{{if(loadingStateObj.initialSelectedLoader,\'visibility: hidden;\',\'\')}}"> <div class="cxFlexCenter" style="{{if(loadingStateObj.scrollSelectedLoader,\'\',\'display: none\')}}"> <span class="cxTagSearchLoader"></span> </div> <template is="for" items="{{cxPropTags}}" item="selitem" index="indeval"> <li onanimationend="{{action(\'animationEnd\',indeval)}}" id="{{concat(\'tag_\',selitem[cxPropSystemValue])}}" data-value="{{selitem[cxPropSystemValue]}}" class="{{concat(tagAnimationArr[indeval].class,\' \',if(selitem.class,selitem.class,\'\'),\' \',if(cxPropBinaryColor,selitem.binaryColor,\' \'))}}" style="{{tagAnimationArr[indeval].style}}"> <lyte-text class="lyteDropdownVisible" lt-prop-value="{{selitem[cxPropDisplayValue]}}"> </lyte-text> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-input lt-prop-disabled="{{cxPropInputDisabled}}" on-blur="{{method(\'onBlur\')}}" lt-prop-update-delay="{{unDef}}" lt-prop-value="{{lbind(cxPropInputValue)}}" data-zcqa="searchTags" class="cxTagSearch" lt-prop-type="text" lt-prop-placeholder="{{cxPropInputPlaceholder}}" onkeydown="{{action(\'onKeyDown\',this,event)}}" oninput="{{action(\'onInput\',event,this)}}" on-focus="{{method(\'onInputFocus\',this)}}"></lyte-input> </li> </div> </ul> </div> </lyte-drop-button> <lyte-drop-box class="cxDropbox cxTagDropBox {{cxPropBoxClass}}"> <lyte-drop-body onscroll="{{action(\'tagOptionsScroll\',event)}}"> <div class="cxTagDropboxInitialLoaderWrap" style="{{if(loadingStateObj.initialOptionLoader,\'\',\'display: none\')}}"> <span class="cxTagSearchLoader"></span> </div> <lyte-drop-item id="newTagId" data-zcqa="newTag" class="cxNewTagItem cxAlignItemCenter {{if(newTag,\'\',\'lyteSearchHidden\')}}" data-value="{{newTagMsg}}" lt-prop-title="{{newTagMsgTooltip}}" style="{{if(loadingStateObj.initialOptionLoader,\'display: none\',\'display: flex\')}}"> <template is="if" value="{{cxPropColorTags}}"><template case="true"> <crux-color-palette cx-prop-wrapper-class="tagsColorPalettePopover" cx-palette-open="{{lbind(paletteOpen)}}" cx-prop-id="{{cxPropId}}" on-before-color-palette-hide="{{method(\'colorPaletteHide\')}}" cx-prop-show-text="{{cxPropShowText}}" cx-prop-add-custom-colors-to-palette="{{cxPropAddCustomColorsToPalette}}" cx-prop-default-colors="{{cxPropDefaultColors}}"></crux-color-palette> </template></template> <span class=" mR5 cxPropNewTagOptionMsg ">{{cxPropNewTagOptionMsg}}</span> <span class="cxNewTagLabel dIB cxVam"> <lyte-text lt-prop-value="{{newTagMsg}}"> </lyte-text> </span> </lyte-drop-item> <div class="cxDropdownNoResult" style="{{if(duplicateSelected,if(loadingStateObj.initialOptionLoader,\'display: none\',\'display: block\'),\'display: none\')}}">{{duplicateSelectedMessage}}</div> <template is="if" value="{{cxPropAllowDropdown}}"><template case="true"> <div style="{{if(loadingStateObj.initialOptionLoader,\'display: none\',\'display: block\')}}"> <template is="for" items="{{cxPropTagOptions}}" item="item" index="indval"> <lyte-drop-item id="{{concat(\'tagItem_\',item[cxPropSystemValue])}}" class="tagOptionsItems {{tagOptionsMirror[indval].class}}" data-zcqa="tag_{{item[cxPropSystemValue]}}" data-value="{{item[cxPropSystemValue]}}"> <span class="cxTagDropItemChild {{if(cruxOr(ifEquals(item.color_code,\'noFill\'),negate(item.color_code)),\'cxTagNoFillCol\',\'\')}}" style="background: {{if(cruxOr(ifEquals(item.color_code,\'noFill\'),negate(item.color_code)),\'white\',concat(item.color_code,\' !important;\'))}}; color : {{cruxGetPicklistFontColor(item.color_code)}}"> <lyte-text lt-prop-tooltip-class="cxTagDropboxTooltip" class="pR" lt-prop-value="{{item[cxPropDisplayValue]}}"> </lyte-text> </span> </lyte-drop-item> </template> </div> <div class="cxDropdownNoResult" style="{{if(noValue,if(loadingStateObj.initialOptionLoader,\'display: none\',\'display: block\'),\'display: none\')}}">{{cxPropNoMoreTagOptionsMsg}}</div> </template></template> <div class="cxFlexCenter" style="{{if(loadingStateObj.scrollOptionLoader,\'\',\'display: none\')}}"> <div class="cxTagSearchLoader"></div> </div> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1],attr:{style:{name:"style",helperInfo:{name:"if",args:["loadingStateObj.initialSelectedLoader","''","'display: none'"]}}}},{type:"attr",position:[1,1,1,3],attr:{style:{name:"style",helperInfo:{name:"if",args:["loadingStateObj.initialSelectedLoader","'visibility: hidden;'","''"]}}}},{type:"attr",position:[1,1,1,3,1],attr:{style:{name:"style",helperInfo:{name:"if",args:["loadingStateObj.scrollSelectedLoader","''","'display: none'"]}}}},{type:"attr",position:[1,1,1,3,3]},{type:"for",position:[1,1,1,3,3],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"tagAnimationArr[indeval].style"}}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,5,1]},{type:"componentDynamic",position:[1,1,1,3,5,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1],attr:{style:{name:"style",helperInfo:{name:"if",args:["loadingStateObj.initialOptionLoader","''","'display: none'"]}}}},{type:"attr",position:[3,1,3],attr:{style:{name:"style",helperInfo:{name:"if",args:["loadingStateObj.initialOptionLoader","'display: none'","'display: flex'"]}}}},{type:"attr",position:[3,1,3,1]},{type:"if",position:[3,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[3,1,3,3,0]},{type:"attr",position:[3,1,3,5,1]},{type:"componentDynamic",position:[3,1,3,5,1]},{type:"componentDynamic",position:[3,1,3]},{type:"attr",position:[3,1,5],attr:{style:{name:"style",helperInfo:{name:"if",args:["duplicateSelected",{type:"helper",value:{name:"if",args:["loadingStateObj.initialOptionLoader","'display: none'","'display: block'"]}},"'display: none'"]}}}},{type:"text",position:[3,1,5,0]},{type:"attr",position:[3,1,7]},{type:"if",position:[3,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["loadingStateObj.initialOptionLoader","'display: none'","'display: block'"]}}}},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background: '",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"cruxOr",args:[{type:"helper",value:{name:"ifEquals",args:["item.color_code","'noFill'"]}},{type:"helper",value:{name:"negate",args:["item.color_code"]}}]}},"'white'",{type:"helper",value:{name:"concat",args:["item.color_code","' !important;'"]}}]}},"'; color : '",{type:"helper",value:{name:"cruxGetPicklistFontColor",args:["item.color_code"]}}]}}}},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"if",args:["noValue",{type:"helper",value:{name:"if",args:["loadingStateObj.initialOptionLoader","'display: none'","'display: block'"]}},"'display: none'"]}}}},{type:"text",position:[3,0]}]}},default:{}},{type:"attr",position:[3,1,9],attr:{style:{name:"style",helperInfo:{name:"if",args:["loadingStateObj.scrollOptionLoader","''","'display: none'"]}}}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropTagOptions","cxPropTags","cxPropAllowDropdown","cxPropCommaSeperation","cxPropPreventKeyList","cxPropCreteTagKey","cxPropNoMoreTagOptionsMsg","cxPropNewTagOptionMsg","cxPropInputPlaceholder","cxPropMaxOptionsLimit","cxPropMaxTagLimit","cxPropCreateOnAdd","cxPropAllowNewTagCreations","cxPropInputValue","cxPropMaxTagLength","cxPropBoxClass","cxPropInputDisabled","cxPropId","cxPropBoundary","cxPropScope","cxPropDoubleBackSpace","cxPropColorTags","cxPropClass","cxPropDisabled","cxPropTagModelDetails","cxPropBinaryColor","cxPropDisplayValue","cxPropSystemValue","cxPropColorCodeKey","cxPropUpdateNewTagDetails","cxPropRequestForTags","cxPropNewlySelectedTags","cxPropNewlyUnSelectedTags","cxPropSelectedColor","cxPropShowText","cxPropAddCustomColorsToPalette","cxPropWrapperClass","cxPropDefaultColors","duplicateSelectedMessage","loadingStateObj","selectedList","noValue","newTag","duplicateSelected","newTagMsg","onFocus","tagAnimationArr","paletteOpen","selectedTagsInstance","tagOptionsInstance","tagOptionsMirror","cxPropCreateTagOnBlur","cxPropAria"],data:function(){return{cxPropTagOptions:Lyte.attr("array",{default:[]}),cxPropTags:Lyte.attr("array",{default:[]}),cxPropAllowDropdown:Lyte.attr("boolean",{default:!0}),cxPropCommaSeperation:Lyte.attr("boolean",{default:!1}),cxPropPreventKeyList:Lyte.attr("array",{default:[]}),cxPropCreteTagKey:Lyte.attr("array",{default:[",",13,9]}),cxPropNoMoreTagOptionsMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.template.listview.search.no.results")}),cxPropNewTagOptionMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.tag.new")}),cxPropInputPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.enter.tag")}),cxPropMaxOptionsLimit:Lyte.attr("number",{default:0}),cxPropMaxTagLimit:Lyte.attr("number",{default:0}),cxPropCreateOnAdd:Lyte.attr("boolean",{default:!0}),cxPropAllowNewTagCreations:Lyte.attr("boolean",{default:!0}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropMaxTagLength:Lyte.attr("number",{default:25}),cxPropBoxClass:Lyte.attr("string",{default:""}),cxPropInputDisabled:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string"),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropScope:Lyte.attr("string"),cxPropDoubleBackSpace:Lyte.attr("boolean",{default:!0}),cxPropColorTags:Lyte.attr("boolean",{default:!0}),cxPropClass:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropTagModelDetails:Lyte.attr("object",{default:{}}),cxPropBinaryColor:Lyte.attr("object",{default:{enable:!1,existingTagClass:"",newTagClass:""}}),cxPropDisplayValue:Lyte.attr("string",{default:"name"}),cxPropSystemValue:Lyte.attr("string",{default:"name"}),cxPropColorCodeKey:Lyte.attr("string",{default:"color_code"}),cxPropUpdateNewTagDetails:Lyte.attr("boolean",{default:"true"}),cxPropRequestForTags:Lyte.attr("object",{default:{enable:!1,reverseOrder:!0,lazyLoadDetails:{selected:{batchSize:20,perPage:200,excludeList:[]},unselected:{batchSize:20,perPage:200,excludeList:[]}}}}),cxPropNewlySelectedTags:Lyte.attr("array",{default:[]}),cxPropNewlyUnSelectedTags:Lyte.attr("array",{default:[]}),cxPropSelectedColor:Lyte.attr("string",{default:""}),cxPropShowText:Lyte.attr("boolean",{default:!1}),cxPropAddCustomColorsToPalette:Lyte.attr("boolean",{default:!1}),cxPropWrapperClass:Lyte.attr("string",{default:""}),cxPropDefaultColors:Lyte.attr("array",{default:["#F17574","#F48435","#E7A826","#FEDA62","#A8C026","#63C57E","#1DB9B4","#57B1FD","#879BFC","#D297EE","#FD87BD","#969696","#658BA8","#B88562","#A35164"]}),duplicateSelectedMessage:Lyte.attr("string",{default:""}),loadingStateObj:Lyte.attr("object",{default:{initialSelectedLoader:!1,scrollSelectedLoader:!1,initialOptionLoader:!1,scrollOptionLoader:!1}}),selectedList:Lyte.attr("string"),noValue:Lyte.attr("boolean",{default:!1}),newTag:Lyte.attr("boolean",{default:!1}),duplicateSelected:Lyte.attr("boolean",{default:!1}),newTagMsg:Lyte.attr("string"),onFocus:Lyte.attr("boolean",{default:!1}),tagAnimationArr:Lyte.attr("array",{default:[]}),paletteOpen:Lyte.attr("boolean",{default:!1}),selectedTagsInstance:Lyte.attr("object",{default:{}}),tagOptionsInstance:Lyte.attr("object",{default:{}}),tagOptionsMirror:Lyte.attr("array",{default:[]}),cxPropCreateTagOnBlur:Lyte.attr("boolean"),cxPropAria:Lyte.attr("boolean",{default:!1})}},inputDisabled:function(){var t=this.$node.querySelector(".lyteDummyEventContainer");this.data.cxPropInputDisabled?t.onblur=function(){this.setData("onFocus",!1)}.bind(this):t.onblur=null}.observes("cxPropInputDisabled").on("didConnect"),resetNoResultDiv:function(){this.data.cxPropTagOptions.length>0&&this.setData("noValue",!1)}.observes("cxPropTagOptions"),tagOptionsMirrorObs:function(t){if(t){if("change"===t.type){s=this.setOptionsDetails(this.data.cxPropTagOptions);this.setData("tagOptionsMirror",s)}else if("array"===t.type){var e,a;if(t.removedItems&&t.removedItems.length){a=t.removedItems.length;for(var o=0;o<a;o++)Lyte.arrayUtils(this.data.tagOptionsMirror,"removeAt",t.index+o,1)}if(t.insertedItems&&t.insertedItems.length){e=t.insertedItems;s=this.setOptionsDetails(e);Lyte.arrayUtils(this.getData("tagOptionsMirror"),"insertAt",t.index,s)}}}else{var s=this.setOptionsDetails(this.data.cxPropTagOptions);this.setData("tagOptionsMirror",s)}}.observes("cxPropTagOptions.[]").on("didConnect"),resetTagAnimationArr:function(t){var e=this.data.cxPropBinaryColor;if(e.enable&&!this.internalSelectedUpdate&&this.setBinaryClass(e),t){var a=this.data.cxPropTags;if(this.preventTagsObserver)this.preventTagsObserver=!1;else if("change"==t.type){for(var o=t.newValue,s=o.length,r=[],i=[],l=0;l<s;l++)Lyte.arrayUtils(r,"push",{doAnimation:!1,highlightTag:!1,color_code:"",class:"",style:""}),r[l]=this.calculateTagClass(r[l],l),i.push(o[l][this.data.cxPropSystemValue]);this.setData("selectedList",JSON.stringify(i)),this.setData("tagAnimationArr",r)}else if("array"==t.type){var n;if(t.removedItems&&t.removedItems.length){n=t.removedItems.length;for(l=0;l<n;l++)Lyte.arrayUtils(this.data.tagAnimationArr,"removeAt",t.index+l,1),this.removeLatestSelected(t.removedItems[l][this.data.cxPropSystemValue])}if(t.insertedItems&&t.insertedItems.length){n=t.insertedItems.length;for(l=0;l<n;l++){var c={};t.index==a.length-1?(c={doAnimation:!1,highlightTag:!1,color_code:"",class:"",style:""},c=this.calculateTagClass(c,t.index),Lyte.arrayUtils(this.getData("tagAnimationArr"),"push",c)):(c={doAnimation:!1,highlightTag:!1,color_code:"",class:"",style:""},c=this.calculateTagClass(c,t.index+l),Lyte.arrayUtils(this.getData("tagAnimationArr"),"insertAt",t.index+l,c)),this.addToSelectedList(t.insertedItems[l][this.data.cxPropSystemValue])}}}}else this.checkIfSelectedIsToBeSet(!1)}.observes("cxPropTags.[]").on("didConnect"),focusObserver:function(t){t.newValue?this.$node.querySelector("lyte-drop-button").classList.add("cxDropButtonFocused"):this.$node.querySelector("lyte-drop-button").classList.remove("cxDropButtonFocused")}.observes("onFocus"),newTagMsgObserver:function(){var t=this.bodyDrop&&this.bodyDrop.querySelector("#newTagId");t&&(t.offsetWidth<t.scrollWidth?this.setData("newTagMsgTooltip",this.data.newTagMsg):this.setData("newTagMsgTooltip",""))}.observes("newTagMsg"),
//!!Check This Below Function
newTag:function(t){if(this.getData("cxPropAllowDropdown")){var e=this.$node.querySelector("lyte-dropdown");if(!(e.component.childComp?e.component.childComp:this.$node.querySelector("lyte-dropdown lyte-drop-box")).classList.contains("lyteDropdownHidden"))if(t.newValue)$L(".lyteDropdownSelection",this.bodyDrop).removeClass("lyteDropdownSelection"),$L(".cxNewTagItem",this.bodyDrop).addClass("lyteDropdownSelection");else if(!$L(".lyteDropdownSelection",this.bodyDrop).length){var a=$L("lyte-drop-item",this.bodyDrop);"newTagId"===a[0].id?a[1]&&a[1].classList.add("lyteDropdownSelection"):a[0].classList.add("lyteDropdownSelection")}}}.observes("newTag"),init:function(){this.data.cxPropCreateTagOnBlur||!1===this.data.cxPropCreateTagOnBlur||(this.data.cxPropAllowDropdown?this.setData("cxPropCreateTagOnBlur",!1):this.setData("cxPropCreateTagOnBlur",!0)),this.data.cxPropRequestForTags.enable&&(this.checkForIncompleteLazyLoadData(),this.tagOptionsInstance=$L.cruxLazyLoad({lzCustomData:{type:"options"},lzProperties:{customRequest:!0,triggerSearchLength:1,searchRequestDetails:{parseResponseKey:"tags"},primaryKey:this.data.cxPropSystemValue,perPage:this.data.cxPropRequestForTags.lazyLoadDetails.unselected.perPage,batchSize:this.data.cxPropRequestForTags.lazyLoadDetails.unselected.batchSize,excludeList:this.data.cxPropRequestForTags.lazyLoadDetails.unselected.excludeList},lzMethods:{onCustomRequest:this.optionsCustomRequestFunc.bind(this),onLoadingStateUpdate:this.loadingStateUpdateFunc.bind(this),onNewBatch:this.optionsNextBatchFunc.bind(this),onRequestResolved:this.optionsAfterRequestFunc.bind(this),onBeforeRequestTriggered:this.optionsBeforeRequestFunc.bind(this),onInvalidResponse:this.optionsInvalidResponseFunc.bind(this),beforeSearchRequestTriggered:this.optionsBeforeSearchRequestFunc.bind(this),cancelResponse:this.optionsCancelResponse.bind(this)}}),this.selectedTagsInstance=$L.cruxLazyLoad({lzCustomData:{type:"selected"},lzProperties:{customRequest:!0,reverseLazyLoadScroll:!0,primaryKey:this.data.cxPropSystemValue,perPage:this.data.cxPropRequestForTags.lazyLoadDetails.selected.perPage,batchSize:this.data.cxPropRequestForTags.lazyLoadDetails.selected.batchSize,excludeList:this.data.cxPropRequestForTags.lazyLoadDetails.selected.excludeList},lzMethods:{updateQueryParams:this.selectedQueryParams.bind(this),onLoadingStateUpdate:this.loadingStateUpdateFunc.bind(this),onNewBatch:this.selectedNextBatchFunc.bind(this),onCustomRequest:this.selectedCustomRequestFunc.bind(this),onInvalidResponse:this.selectedInvalidResponseFunc.bind(this)}}),this.openCount=0,this.openingReq=!0,this.selectedTagsInstance.constructNextBatch(),this.isInitialOptionsReqPending=!1)},optionsCancelResponse:function(t,e,a){var o=!1;return(!a&&t.properties.searchValue||a&&!t.properties.searchValue)&&(o=!0),o},didDestroy:function(){delete this.bodyDrop},didConnect:function(){if(this.setDataToScope(),this.$node.checkList=function(t){this.callFromOut=!0;var e=this.checkCharacter(t);return this.callFromOut=!1,e}.bind(this),this.$node.toggle=function(t){this.setFromExternalDeveloper=!0,this.toggleComp(t),setTimeout(function(){this.setFromExternalDeveloper=!1}.bind(this),10)}.bind(this),this.$node.focus=function(){this.setData("onFocus",!1),this.setData("onFocus",!0),this.$node.querySelector(".cxTagSearch").focus()}.bind(this),this.$node.blur=function(){this.setData("onFocus",!1),this.$node.querySelector(".cxTagSearch").blur()}.bind(this),this.$node.resetSearch=function(){this.resetSearch()}.bind(this),
//!!Check This Below Function
this.$node.resetPosition=function(){this.$node.querySelector("lyte-dropdown").resetPosition(),this.data.paletteOpen&&this.bodyDrop.querySelector("crux-color-palette").alignColorPalette()}.bind(this),
//!!Check this below Code Block
this.$node.addNewTag=function(){this.data.cxPropInputValue&&this.addNewTag(this.data.cxPropInputValue,"out")}.bind(this),!this.data.cxPropRequestForTags.enable){var t=this.getData("cxPropTags"),e=0;if(t)e=t.length;for(var a=0;a<e;a++){var o={doAnimation:!1,highlightTag:!1,color_code:"",class:"",style:""};this.data.cxPropColorTags&&t[a].color_code&&(o.color_code=t[a].color_code),o=this.calculateTagClass(o,a),Lyte.arrayUtils(this.getData("tagAnimationArr"),"push",o)}}this.data.cxPropRequestForTags.enable&&$L("#cxSelectedTagListContainer",this.$node).scroll({showOn:"hover",nested:!0})},setOptionsDetails:function(t){var e=t.length,a=[];if(e)for(var o=0;o<e;o++){var s="cxTagDropItem",r={};if(this.data.cxPropNewlySelectedTags.length)for(var i=this.data.cxPropNewlySelectedTags,l=i.length,n=0;n<l;n++)i[n][this.data.cxPropSystemValue]===t[o][this.data.cxPropSystemValue]&&(s+=" lyteDropdownActive");r.class=s,r.id=t[o][this.data.cxPropSystemValue],a.push(r)}return a},updateOptionActiveClass:function(t,e){if("add"===t)for(var a=(o=this.data.tagOptionsMirror).length-1;a>=0;a--){if(o[a].id===e)(s=o[a]).class.includes("lyteDropdownActive")||(s.class=s.class+" lyteDropdownActive"),Lyte.arrayUtils(this.getData("tagOptionsMirror"),"replaceAt",a,s)}else{var o;for(a=(o=this.data.tagOptionsMirror).length-1;a>=0;a--){var s;if(o[a].id===e)(s=o[a]).class.includes("lyteDropdownActive")&&(s.class=s.class.split(" lyteDropdownActive"),s.class=s.class[0].concat(s.class[1])),Lyte.arrayUtils(this.getData("tagOptionsMirror"),"replaceAt",a,s)}}},checkForIncompleteLazyLoadData:function(){var t=!1,e=this.data.cxPropRequestForTags;this.data.cxPropRequestForTags.reverseOrder||!1===this.data.cxPropRequestForTags.reverseOrder||(t=!0,e.reverseOrder=!0),this.data.cxPropRequestForTags.lazyLoadDetails?(this.data.cxPropRequestForTags.lazyLoadDetails.selected?(this.data.cxPropRequestForTags.lazyLoadDetails.selected.batchSize||(t=!0,e.lazyLoadDetails.selected.batchSize=20),this.data.cxPropRequestForTags.lazyLoadDetails.selected.perPage||(t=!0,e.lazyLoadDetails.selected.perPage=200),this.data.cxPropRequestForTags.lazyLoadDetails.selected.excludeList||(t=!0,e.lazyLoadDetails.selected.excludeList=[])):(t=!0,e.lazyLoadDetails.selected={batchSize:20,perPage:200,excludeList:[]}),this.data.cxPropRequestForTags.lazyLoadDetails.unselected?(this.data.cxPropRequestForTags.lazyLoadDetails.unselected.batchSize||(t=!0,e.lazyLoadDetails.unselected.batchSize=20),this.data.cxPropRequestForTags.lazyLoadDetails.unselected.perPage||(t=!0,e.lazyLoadDetails.unselected.perPage=200),this.data.cxPropRequestForTags.lazyLoadDetails.unselected.excludeList||(t=!0,e.lazyLoadDetails.unselected.excludeList=[])):(t=!0,e.lazyLoadDetails.unselected={batchSize:20,perPage:200,excludeList:[]})):(t=!0,e.lazyLoadDetails={selected:{batchSize:20,perPage:200,excludeList:[]},unselected:{batchSize:20,perPage:200,excludeList:[]}}),t&&this.setData("cxPropRequestForTags",e)},setBinaryClass:function(t){var e=this.getData("cxPropTags"),a=this.getData("cxPropTagOptions");if(e)for(var o=e.length,s=a.length,r=0;r<o;r++){for(var i=!1,l=0;l<s;l++)a[l][this.data.cxPropDisplayValue].toLowerCase()===e[r][this.data.cxPropDisplayValue].toLowerCase()&&(i=!0);i?Lyte.objectUtils(e[r],"add","binaryColor",t.existingTagClass):Lyte.objectUtils(e[r],"add","binaryColor",t.newTagClass)}},checkIfSelectedIsToBeSet:function(t){if(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag){var e,a,o=this.getData("selectedList").slice();if(0==(o=JSON.parse(o)).length&&0!=this.data.cxPropTags.length)for(e=0;e<this.data.cxPropTags.length;e++)this.addToSelectedList(this.getData("cxPropTags")[e][this.data.cxPropSystemValue]);else if(o.length!=this.data.cxPropTags.length)for(e=0;e<this.data.cxPropTags.length;e++){var s=!0;for(a=0;a<o.length;a++)this.data.cxPropTags[e][this.data.cxPropSystemValue]==o[a]&&(s=!1);s&&this.addToSelectedList(this.getData("cxPropTags")[e][this.data.cxPropSystemValue])}t&&(this.data.cxPropRequestForTags.enable||this.checkListCount(),this.getData("cxPropInputValue")&&this.getData("cxPropCreateOnAdd")&&this.processSearch({keyCode:null},this.getData("cxPropInputValue")))}},setDataToScope:function(){this.newTagCount=0,this.allowSearch=!0,this.callFromOut=!1,this.onErrorReturn=!1,this.valuesToRemove=[],this.preventTagsObserver=!1,this.preventBlurFromDrop=!1,this.onTagRemovalHighlight=!1,this.preventInput=!1,this.preventOnAdd=!1,this.preventBlurOnError=!1,this.internalSelectedUpdate=!1,this.selectedTagList=[],this.minOptionSize=10,this.previousSearchReqValue="",this.selectedReqMade=!1,this.selectedDataAvailable=!1,this.reqForTagMatchObj={},this.forceOrdinaryReq=!1,this.preventFutherTagReq=!1,this.preventCheckFornextResponse=!1},getTagColorIndex:function(t,e){if(!this.data.colorObject)e={Col1:"#F17574",Col2:"#F48435",Col3:"#E7A826",Col4:"#A8C026",Col5:"#63C57E",Col6:"#1DB9B4",Col7:"#57B1FD",Col8:"#879BFC",Col9:"#D297EE",Col10:"#FD87BD",Col11:"#969696",Col12:"#658BA8",Col13:"#B88562"};var a=Object.keys(e).filter((function(a){return e[a]==t}));return a.length?a[0]:"Col0"},getPicklistFontColor:function(t){if(t&&""!==t&&0===t.indexOf("#")&&(t=t.substring(1),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3<175))return"white";return"black"},calculateTagClass:function(t,e){var a,o,s,r="cxAddedTags ";t.doAnimation&&(r=r.concat("cxExistingTag ")),t.highlightTag&&(r=r.concat("cxTagHighlight ")),"noFill"!==this.data.cxPropTags[e][this.data.cxPropColorCodeKey]&&this.data.cxPropTags[e][this.data.cxPropColorCodeKey]?(a="",o=this.data.cxPropTags[e][this.data.cxPropColorCodeKey]+" !important;"):(a="cxTagCol0 cxTagNoFillCol",o="white");var i=this.getPicklistFontColor(this.data.cxPropTags[e][this.data.cxPropColorCodeKey]);return"white"===i&&(a+=" cxTagDarkBg"),s=i,t.color_code=this.data.cxPropTags[e][this.data.cxPropColorCodeKey],r=r.concat(a+" "),t.class=r,t.style="background: "+o+"; color: "+s,t},addNewTag:function(t,e){var a,o=null,s=!1;this.getData("cxPropCommaSeperation")&&-1!=t.indexOf(",")?(s=!0,a=t.split(",")):a=[t];var r=!0,i=a.length,l=0;for(i<=0&&(r=!1),this.valuesToRemove=[];r;){if(a[l]&&""!=a[l])if(this.checkCharacter(a[l])){var n=this._isPresent(a[l]);if("newTag"==n.message){
//!!Check if the if condition at below line is required
if("keyDown"===e&&(this.data.paletteOpen&&this.bodyDrop.querySelector("crux-color-palette").closePalette(),this.getData("cxPropAllowDropdown")||this.toggleComp("close")),a[l].length>0){var c=!1;"DropDown"===e&&(c=!0),this.addToSelectedTags(event,a[l],c,s)?this.addToSelectedList(a[l]):"DropDown"!==e||this.onErrorReturn?(r=!1,o="NTE"):this.externalError?(r=!1,o="NTEE"):this.valuesToRemove.push(a[l])}this.bodyDrop&&"DropDown"!==e&&this.bodyDrop.querySelector("#newTagId").classList.remove("lyteDropdownActive")}else if("existingTag"==n.message){if("DropDown"!==e&&(this.preventBlurOnError=!0),this.getMethods("onError")&&this.executeMethod("onError",a[l],{errorCode:4,reason:"Already existing tag"},this.$node.querySelector("lyte-dropdown"),this.$node.querySelector("lyte-dropdown lyte-drop-box"),this.$node.querySelector("lyte-input"),this.$node),"DropDown"!==e&&(this.preventBlurOnError=!1),!this.getData("cxPropColorTags")&&(this.data.cxPropRequestForTags.enable&&-1!=n.pos||!this.data.cxPropRequestForTags.enable)){var p=this.getData("tagAnimationArr")[n.pos];p.doAnimation=!0,p=this.calculateTagClass(p,n.pos),Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",n.pos,p)}}else"dropOption"==n.message&&(this.addToSelectedTags(event,a[l],!0,s)?(
//!!Check if below if condition is required
("DropDown"!==e||"DropDown"===e&&s)&&this.addToSelectedList(this.getData("cxPropTagOptions")[n.pos][this.data.cxPropSystemValue]),this.data.cxPropRequestForTags.enable&&"DropDown"===e&&-1===n.pos&&this.addToSelectedList(n.value[this.data.cxPropSystemValue])):"DropDown"!==e||this.onErrorReturn?(r=!1,o="DOE"):this.externalError?(r=!1,o="DOEE"):this.valuesToRemove.push(a[l]))}else r=!1,o="CE";if(r){for(l+=1;""==a[l];)l+=1;l>=i&&(r=!1)}}
//!!Check This Below code
if(o||(o="succ"),this.bodyDrop&&("Blur"===e||"out"===e)&&this.bodyDrop.querySelector("crux-color-palette")){var d;if(this.data.cxPropSelectedColor)d=this.data.cxPropSelectedColor;else for(d=this.bodyDrop.querySelector("crux-color-palette").cxProp("defaultColors")[Math.floor(13*Math.random())];d==this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor");)d=this.bodyDrop.querySelector("crux-color-palette").cxProp("defaultColors")[Math.floor(13*Math.random())];this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor",d)}return o},handleAddNewTag:function(t,e){if(!t||""===t||""==t.trim())return!1;var a=this.addNewTag(t,e);if("CE"===a||"NTE"===a||"DOE"===a){if("CE"===a)return this.setData("cxPropInputValue",t),!1;if(("NTE"===a||"DOE"===a)&&this.onErrorReturn)return this.onErrorReturn=!1,this.setData("cxPropInputValue",t),!1}else{if("succ"===a){if(this.data.cxPropRequestForTags.enable){this.preventOpenScroll=!0;var o=$L("#cxSelectedTagListContainer",this.$node)[0];o.scrollTop=o.scrollHeight}return!0}if(("DOEE"===a||"NTEE"===a)&&this.externalError)return this.externalError=!1,!1}},toggleComp:function(t){var e=this.$node.querySelector("lyte-dropdown"),a=e.component.childComp?e.component.childComp:this.$node.querySelector("lyte-dropdown lyte-drop-box");"open"==t?a.classList.contains("lyteDropdownHidden")&&(this.getData("cxPropInputValue")&&this.processSearch({keyCode:null},this.getData("cxPropInputValue")),a.classList.contains("lyteDropdownHidden")&&e.toggle()):"close"==t&&a.classList.contains("lyteDropdownHidden")||e.toggle()},processSearch:function(t,e){/^\s+$/.test(e)&&32==t.keyCode||(e=e.trim(),this.data.cxPropRequestForTags.enable?(this.allowSearch=!0,(this.forceOrdinaryReq||!this.forceOrdinaryReq&&this.previousSearchReqValue!==e)&&(this.forceOrdinaryReq?(this.forceOrdinaryReq=!1,this.tagOptionsInstance.resetSearch()):(this.previousSearchReqValue=e,this.dynamicSearch(e)))):this.localSearch(t,e))},localSearch:function(t,e){for(var a=[],o=[],s=(this.bodyDrop?this.bodyDrop:this.$node.querySelector("lyte-dropdown lyte-drop-box")).querySelectorAll("lyte-drop-item:not(.cxNewTagItem)"),r=[],i=0;i<s.length;i++)r.push(s[i].textContent);for(i=0;i<s.length;i++)-1!=r[i].toLowerCase().indexOf(e.toLowerCase())?(s[i].classList.remove("lyteSearchHidden"),s[i].classList.contains("lyteDropdownActive")||o.push(s[i])):(s[i].classList.add("lyteSearchHidden"),a.push(s[i]));0==a.length&&this.setData("noValue",!1),this.showNoResult(t,e,o)},dynamicSearch:function(t){this.tagOptionsInstance.properties.searchValue=this.data.cxPropInputValue;var e=this.bodyDrop?this.bodyDrop.querySelector("lyte-drop-body"):void 0;this.localSearchResponse=this.unselectedLocalSearch(t),this.tagOptionsInstance.performSearch(e)},checkInList:function(t,e,a){for(var o,s=(o=a||("added"===e?this.data.cxPropNewlySelectedTags:this.data.cxPropNewlyUnSelectedTags)).length,r=!1,i=0;i<s;i++)if(o[i][this.data.cxPropSystemValue]===t[this.data.cxPropSystemValue]){r=!0;break}return r?{found:!0,pos:i,value:o[i]}:{found:!1,pos:-1,value:void 0}},unselectedLocalSearch:function(t){var e=this.data.cxPropNewlyUnSelectedTags,a=e.length,o=[];if(t)for(var s=0;s<a;s++)-1!=e[s][this.data.cxPropSystemValue].toLowerCase().indexOf(t.toLowerCase())&&o.push(e[s]);return o},resetSearch:function(){this.getData("cxPropInputValue").length>0&&(this.allowSearch=!1,this.setData("newTag",!1),this.setData("duplicateSelected",!1),this.setData("newTagMsg",""),this.setData("cxPropInputValue",""),this.data.cxPropRequestForTags.enable&&(this.tagOptionsInstance.properties.searchValue="",this.previousSearchReqValue="",this.forceOrdinaryReq=!0),this.processSearch({},""))},showNoResult:function(t,e,a){if(this.allowSearch)if(""!=e.trim()){var o=this._isPresent(e);"newTag"==o.message&&this.getData("cxPropAllowNewTagCreations")?(this.setData("newTagMsg",e),this.setData("newTag",!0),this.setData("noValue",!1),this.setData("duplicateSelected",!1),this.setData("duplicateSelectedMessage","")):(this.setData("duplicateSelected",!1),this.setData("duplicateSelectedMessage",""),this.setData("newTagMsg",""),this.setData("newTag",!1),
//!!Check This Below code
this.data.paletteOpen&&this.bodyDrop.querySelector("crux-color-palette").closePalette(),
//!!Check This Below code
this.data.cxPropAllowDropdown||this.toggleComp("close"),this.getData("newTag")||"existingTag"!=o.message?a.length||this.getData("newTag")?this.setData("noValue",!1):this.setData("noValue",!0):(this.setData("duplicateSelectedMessage",_cruxUtils.getI18n("crux.existing.tag",e)),this.setData("duplicateSelected",!0),this.setData("noValue",!1)))}else this.setData("newTagMsg",""),this.setData("newTag",!1),this.setData("duplicateSelected",!1),this.setData("duplicateSelectedMessage",""),
//!!Check This Below code
this.data.paletteOpen&&this.bodyDrop.querySelector("crux-color-palette").closePalette(),
//!!Check This Below code
this.data.cxPropAllowDropdown||this.toggleComp("close"),this.getData("newTag")||this.bodyDrop&&(this.bodyDrop.querySelectorAll(".tagOptionsItems.lyteDropdownActive").length==this.getData("cxPropTagOptions").length?this.setData("noValue",!0):this.setData("noValue",!1));else this.bodyDrop&&(this.allowSearch=!0,this.bodyDrop.querySelectorAll(".tagOptionsItems.lyteDropdownActive").length==this.getData("cxPropTagOptions").length&&""==e?this.setData("noValue",!0):this.setData("noValue",!1));if(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag){var s=this.$node.querySelector("lyte-dropdown");(s.component.childComp?s.component.childComp:this.$node.querySelector("lyte-dropdown lyte-drop-box")).classList.contains("lyteDropdownHidden")||this.getData("newTag")&&(t&&t.keyCode&&13!==t.keyCode&&(t.keyCode>40||t.keyCode<37)||!t||!t.keyCode||0===Object.keys(t).length)&&($L(".lyteDropdownSelection",this.bodyDrop).removeClass("lyteDropdownSelection"),$L(".cxNewTagItem",this.bodyDrop).addClass("lyteDropdownSelection"))}},addToSelectedList:function(t){var e=this.getData("selectedList").slice();(e=JSON.parse(e)).push(t),e=JSON.stringify(e),this.setData("selectedList",e),this.checkListCount()},removeLatestSelected:function(t){var e=this.getData("selectedList").slice(),a=(e=JSON.parse(e)).length;if(t)for(var o=0;o<a;o++)t===e[o]&&Lyte.arrayUtils(e,"removeAt",o,1);else a>0&&Lyte.arrayUtils(e,"removeAt",a-1,1);e=JSON.stringify(e),this.setData("selectedList",e)},removeLatestTag:function(t,e){if(this.onTagRemovalHighlight)return this.onTagRemovalHighlight=!1,!1;for(var a,o=!0,s=this.getData("cxPropTags"),r=s.length,i=0;i<r;i++)s[i][this.data.cxPropSystemValue]==t&&(a=i);if(this.getMethods("onBeforeRemoveTag")&&(o=this.executeMethod("onBeforeRemoveTag",t,a)),1==o||null==o||null==o){!this.data.cxPropRequestForTags.enable&&this.selectedTagList&&this.selectedTagList.lenght&&this.selectedTagList[a]&&this.selectedTagList[a].isNewTag?this.newTagCount=this.newTagCount-1:this.checkListCount();var l=this.getData("tagAnimationArr");if(this.preventTagsObserver=!0,l[a].doAnimation){var n=this.getData("tagAnimationArr")[a];n.doAnimation=!1,n=this.calculateTagClass(n,a),Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",a,n)}var c=s[a];Lyte.arrayUtils(this.getData("tagAnimationArr"),"removeAt",a,1),this.internalSelectedUpdate=!0,Lyte.arrayUtils(s,"removeAt",a,1),this.internalSelectedUpdate=!1,this.$node.querySelector("lyte-dropdown").resetPosition();var p=this.getData("tagAnimationArr");p.length>0&&p[p.length-1].highlightTag&&(p[p.length-1].highlightTag=!1,Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",p.length-1,this.calculateTagClass(p[p.length-1],p.length-1)));for(var d=this.selectedTagList.length,h=!1,g=0;g<d;g++)this.selectedTagList[g][this.data.cxPropSystemValue].toLowerCase()===c[this.data.cxPropSystemValue].toLowerCase()&&(h=!0,Lyte.arrayUtils(this.selectedTagList,"removeAt",g,1),d-=1);var u=this.checkInList(c,"added");return u.found&&Lyte.arrayUtils(this.data.cxPropNewlySelectedTags,"removeAt",u.pos,1),this.data.cxPropRequestForTags.enable&&!h&&(u.found||Lyte.arrayUtils(this.data.cxPropNewlyUnSelectedTags,"push",c),Lyte.arrayUtils(this.data.cxPropTagOptions,"push",c),this.showNoResult(void 0,this.tagOptionsInstance.properties.searchValue,[])),this.getMethods("onRemoveTag")&&(o=this.executeMethod("onRemoveTag",t,a)),this.data.cxPropRequestForTags.enable&&this.checkNoResultDivStatus(t),!0}return!1},checkNoResultDivStatus:function(t){for(var e=this.data.cxPropTagOptions,a=this.data.cxPropTagOptions.length,o=0;o<a;o++)if(e[o][this.data.cxPropSystemValue]===t){this.setData("noValue",!1);break}},_isPresent:function(t){var e=this.getData("cxPropTags"),a=this.getData("cxPropTagOptions"),o=0,s=!1,r={message:"newTag",pos:0},i=e.length,l=a.length;for(o=0;o<i;o++)if(e[o][this.data.cxPropDisplayValue].toUpperCase().trim()==t.toUpperCase().trim())return s=!0,r.message="existingTag",r.pos=o,r;for(o=0;o<l;o++)if(a[o][this.data.cxPropDisplayValue].toUpperCase()==t.toUpperCase())return s=!0,r.message="dropOption",r.pos=o,r;if(this.data.cxPropRequestForTags.enable&&!s){if(this.reqForTagMatchObj.selectedMatch&&this.reqForTagMatchObj.selectedMatch[this.data.cxPropSystemValue]===this.tagOptionsInstance.properties.searchValue)return r.message="existingTag",r.pos=-1,r.value=this.reqForTagMatchObj.selectedMatch,r;if(this.reqForTagMatchObj.unselectedMatch&&this.reqForTagMatchObj.unselectedMatch[this.data.cxPropSystemValue]===this.tagOptionsInstance.properties.searchValue)return r.message="dropOption",r.pos=-1,r.value=this.reqForTagMatchObj.unselectedMatch,r}return r},validation:function(t){for(var e=!0,a=this.getData("cxPropPreventKeyList"),o=0;o<a.length;o++)if(-1!=t.indexOf(a[o])){e=!1;break}return e?!this.getMethods("onValidation")||this.executeMethod("onValidation",t,this.$node):(this.preventBlurOnError=!0,this.getMethods("onError")&&this.executeMethod("onError",t,{errorCode:1,reason:"Contains Invalid Key"},this.$node.querySelector("lyte-dropdown"),this.$node.querySelector("lyte-dropdown lyte-drop-box"),this.$node.querySelector("lyte-input"),this.$node),this.preventBlurOnError=!1,!1)},checkCharacter:function(t){var e;return this.callFromOut&&!this.getData("cxPropCreateOnAdd")||!this.callFromOut&&this.getData("cxPropCreateOnAdd")?e=this.validation(t):this.callFromOut||this.getData("cxPropCreateOnAdd")||(e=!0),1==e||null==e||null==e},addToSelectedTags:function(t,e,a,o){var s,r=!0;this.getMethods("onBeforeAddTag")&&(s=null!=a&&1==a,r=this.executeMethod("onBeforeAddTag",e,this.$node,s));if(1==r||null==r||null==r){var i=this.getData("cxPropBinaryColor"),l=!1,n=this.getData("cxPropTagOptions"),c=this.getData("cxPropTags"),p=n.length;if(!(0==this.getData("cxPropMaxTagLimit")||c.length<this.getData("cxPropMaxTagLimit")))return this.preventBlurOnError=!0,this.getMethods("onError")&&(r=this.executeMethod("onError",e,{errorCode:3,reason:"Max Tag Creation Limit Reached"},this.$node.querySelector("lyte-dropdown"),this.$node.querySelector("lyte-dropdown lyte-drop-box"),this.$node.querySelector("lyte-input"),this.$node)),this.preventBlurOnError=!1,this.onErrorReturn=!0,!1;for(var d=0;d<p;d++)if(n[d][this.data.cxPropDisplayValue].toUpperCase().trim()==e.toUpperCase().trim()){l=!0;break}if(l){if(this.preventTagsObserver=!0,i.enable&&(a?Lyte.objectUtils(n[d],"add","binaryColor",i.existingTagClass):Lyte.objectUtils(n[d],"add","binaryColor",i.newTagClass)),this.internalSelectedUpdate=!0,Lyte.arrayUtils(c,"push",n[d]),this.internalSelectedUpdate=!1,this.resetSearch(),(g=this.getData("tagAnimationArr")).length>0&&g[g.length-1].highlightTag&&(g[g.length-1].highlightTag=!1,Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",g.length-1,this.calculateTagClass(g[g.length-1],g.length-1))),this.data.cxPropRequestForTags.enable)if(this.data.cxPropInputValue){if(-1!=n[d][this.data.cxPropSystemValue].toLowerCase().indexOf(this.data.cxPropInputValue.toLowerCase()))(u=this.checkInList(n[d],"removed")).found?(Lyte.arrayUtils(this.data.cxPropNewlyUnSelectedTags,"removeAt",u.pos,1),u=this.checkInList(n[d],"removed",this.data.cxPropTagOptions),Lyte.arrayUtils(this.data.cxPropTagOptions,"removeAt",u.pos,1),this.showNoResult(void 0,this.tagOptionsInstance.properties.searchValue,[])):Lyte.arrayUtils(this.data.cxPropNewlySelectedTags,"push",n[d])}else(u=this.checkInList(n[d],"removed")).found?(Lyte.arrayUtils(this.data.cxPropNewlyUnSelectedTags,"removeAt",u.pos,1),u=this.checkInList(n[d],"removed",this.data.cxPropTagOptions),Lyte.arrayUtils(this.data.cxPropTagOptions,"removeAt",u.pos,1),this.showNoResult(void 0,this.tagOptionsInstance.properties.searchValue,[])):Lyte.arrayUtils(this.data.cxPropNewlySelectedTags,"push",n[d]);this.getMethods("onAddTag")&&(r=this.executeMethod("onAddTag",e,this.$node))}else{if(this.getData("cxPropMaxOptionsLimit")>0&&n.length+this.newTagCount>=this.getData("cxPropMaxOptionsLimit"))return this.preventBlurOnError=!0,this.getMethods("onError")&&(r=this.executeMethod("onError",e,{errorCode:2,reason:"Max Tag Option Creation Limit Reached"},this.$node.querySelector("lyte-dropdown"),this.$node.querySelector("lyte-dropdown lyte-drop-box"),this.$node.querySelector("lyte-input"),this.$node)),this.preventBlurOnError=!1,this.onErrorReturn=!0,!1;
//!!Check This Below code
var h,g,u;if(this.preventTagsObserver=!0,this.newTagCount=this.newTagCount+1,this.data.cxPropColorTags){var y={name:e};if(this.data.cxPropUpdateNewTagDetails&&(y.isNewTag=!0),y[this.data.cxPropColorCodeKey]=this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor"),Lyte.arrayUtils(c,"push",y),h=y,y.isNewTag=!0,Lyte.arrayUtils(this.selectedTagList,"push",y),!o){var x;if(this.data.cxPropSelectedColor)x=this.data.cxPropSelectedColor;else for(x=this.bodyDrop.querySelector("crux-color-palette").cxProp("defaultColors")[Math.floor(13*Math.random())];x==this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor");)x=this.bodyDrop.querySelector("crux-color-palette").cxProp("defaultColors")[Math.floor(13*Math.random())];this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor",x)}}else{var P={name:e};this.data.cxPropUpdateNewTagDetails&&(P.isNewTag=!0),i.enable&&(a?Lyte.objectUtils(P,"add","binaryColor",i.existingTagClass):Lyte.objectUtils(P,"add","binaryColor",i.newTagClass)),h=P,this.internalSelectedUpdate=!0,Lyte.arrayUtils(c,"push",P),P.isNewTag=!0,Lyte.arrayUtils(this.selectedTagList,"push",P),this.internalSelectedUpdate=!1}if(this.resetSearch(),(g=this.getData("tagAnimationArr")).length>0&&g[g.length-1].highlightTag&&(g[g.length-1].highlightTag=!1,Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",g.length-1,this.calculateTagClass(g[g.length-1],g.length-1))),this.data.cxPropRequestForTags.enable)if(this.data.cxPropInputValue){if(-1!=n[d][this.data.cxPropSystemValue].toLowerCase().indexOf(this.data.cxPropInputValue.toLowerCase()))(u=this.checkInList(h,"removed")).found?(Lyte.arrayUtils(this.data.cxPropNewlyUnSelectedTags,"removeAt",u.pos,1),u=this.checkInList(n[d],"removed",this.data.cxPropTagOptions),Lyte.arrayUtils(this.data.cxPropTagOptions,"removeAt",u.pos,1),this.showNoResult(void 0,this.tagOptionsInstance.properties.searchValue,[])):Lyte.arrayUtils(this.data.cxPropNewlySelectedTags,"push",h)}else(u=this.checkInList(h,"removed")).found?(Lyte.arrayUtils(this.data.cxPropNewlyUnSelectedTags,"removeAt",u.pos,1),u=this.checkInList(n[d],"removed",this.data.cxPropTagOptions),Lyte.arrayUtils(this.data.cxPropTagOptions,"removeAt",u.pos,1),this.showNoResult(void 0,this.tagOptionsInstance.properties.searchValue,[])):Lyte.arrayUtils(this.data.cxPropNewlySelectedTags,"push",h);this.getMethods("onAddTag")&&(r=this.executeMethod("onAddTag",e,this.$node))}this.checkListCount(),
//!!Check This Below code
this.data.cxPropAllowDropdown||this.toggleComp("close");var T={doAnimation:!1,highlightTag:!1,color_code:"",class:"",style:""};return T=this.calculateTagClass(T,g.length),Lyte.arrayUtils(this.getData("tagAnimationArr"),"push",T),!0}return this.externalError=!0,!1},checkListCount:function(){if(!this.data.cxPropRequestForTags.enable){var t=this.getData("cxPropTagOptions");if(this.bodyDrop)this.bodyDrop.querySelectorAll(".tagOptionsItems.lyteDropdownActive").length>=t.length?this.getData("newTag")?this.setData("noValue",!1):this.setData("noValue",!0):this.setData("noValue",!1)}},checkForNextRequest:function(){this.bodyDrop.querySelectorAll(".tagOptionsItems:not(.lyteDropdownActive)").length<this.minOptionSize&&!this.tagOptionsInstance.properties.allRecordsFetchedAndConsumed&&this.tagOptionsInstance.constructNextBatch()},
//!!Check Not required
actions:{onMouseDown:function(t,e){if(this.getData("onFocus")){var a=$L(e.target).closest("lyte-close-icon,li",this.$node).get(0);if(a){var o=!1;"LI"==a.tagName&&(o=a.classList.contains("lyteMultiselectInput")),o||(this.preventBlurFromDrop=!0)}}},animationEnd:function(t){var e=this.getData("tagAnimationArr")[t];e.doAnimation=!1,e=this.calculateTagClass(e,t),Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",t,e)},onFocus:function(t){this.setData("onFocus",!0),this.getData("cxPropInputDisabled")||t.querySelector(".cxTagSearch").focus()},onInput:function(t,e){if(this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.data.cxPropInputValue),e.ltProp("value").length>0)if(0!==this.data.cxPropMaxTagLength&&e.ltProp("value").length>this.getData("cxPropMaxTagLength")){var a=e.ltProp("value");this.preventInput=!0,this.preventBlurOnError=!0,this.getMethods("onError")&&this.executeMethod("onError",a,{errorCode:5,reason:"Max length of the tag has been reached"},this.$node.querySelector("lyte-dropdown"),this.$node.querySelector("lyte-dropdown lyte-drop-box"),this.$node.querySelector("lyte-input"),this.$node),this.preventBlurOnError=!1;var o=e.querySelector("input").selectionStart;this.setData("cxPropInputValue",a.slice(0,o-(a.length-this.getData("cxPropMaxTagLength")))+a.slice(o)),this.processSearch(t,this.getData("cxPropInputValue")),
//!!Check This Below code
(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag)&&this.toggleComp("open")}else this.processSearch(t,this.getData("cxPropInputValue")),
//!!Check This Below code
(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag)&&this.toggleComp("open");else
//!!Check This Below code
this.processSearch(t,this.getData("cxPropInputValue")),(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag)&&this.toggleComp("open")},onKeyDown:function(t,e){if(8!==e.keyCode)(a=this.getData("tagAnimationArr")).length>0&&a[a.length-1].highlightTag&&(a[a.length-1].highlightTag=!1,Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",a.length-1,this.calculateTagClass(a[a.length-1],a.length-1)));else if(this.getData("cxPropDoubleBackSpace")){var a,o=this.getData("cxPropTags");if(0==this.getData("cxPropInputValue").length&&0!=o.length)return(a=this.getData("tagAnimationArr"))[a.length-1].highlightTag?void 0:(a[a.length-1].highlightTag=!0,Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",a.length-1,this.calculateTagClass(a[a.length-1],a.length-1)),void(this.onTagRemovalHighlight=!0))}if(this.getData("cxPropAllowNewTagCreations")){var s,r=t.ltProp("value");if(32==e.keyCode&&r.length<1)return void e.preventDefault();if(8==e.keyCode&&!this.data.cxPropRequestForTags.enable){o=this.getData("cxPropTags");if(1==this.getData("cxPropInputValue").length)
//!!Check lines [thisline +1] ,[thisline +3] and [thisline +5] if required or not
this.setData("newTag",!1),this.setData("newTagMsg",""),this.bodyDrop.querySelectorAll(".tagOptionsItems.lyteDropdownActive").length==this.getData("cxPropTagOptions").length?this.setData("noValue",!0):this.setData("noValue",!1)}if(0!==this.data.cxPropMaxTagLength&&this.getData("cxPropInputValue").length>this.getData("cxPropMaxTagLength")&&8!=e.keyCode)return this.preventBlurOnError=!0,this.getMethods("onError")&&this.executeMethod("onError",this.getData("cxPropInputValue"),{errorCode:5,reason:"Max length of the tag has been reached"},this.$node.querySelector("lyte-dropdown"),this.$node.querySelector("lyte-dropdown lyte-drop-box"),this.$node.querySelector("lyte-input"),this.$node),this.preventBlurOnError=!1,void e.preventDefault();var i=this.getData("cxPropPreventKeyList"),l=this.getData("cxPropCreteTagKey");if((this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag)&&13==e.keyCode&&!this.getData("noValue")){var n=this.$node.querySelector("lyte-dropdown"),c=n.component.childComp?n.component.childComp:this.$node.querySelector("lyte-dropdown lyte-drop-box"),p=$L(".lyteDropdownSelection",this.bodyDrop);if(!c.classList.contains("lyteDropdownHidden")&&p.length>0)return}for(var d=0;d<l.length;d++){var h=l[d];if("string"==typeof l[d]?s=e.key:"number"==typeof l[d]&&(s=e.keyCode),s===h)return this.handleAddNewTag(r,"keyDown",e),void("Tab"!==e.key&&"Enter"!==e.key&&e.preventDefault())}for(d=0;d<i.length;d++){var g=i[d];if("string"==typeof i[d]?s=e.key:"number"==typeof i[d]&&(s=e.keyCode),s===g)return void e.preventDefault()}}},selectedTagsScroll:function(t){this.data.cxPropRequestForTags.enable&&(this.preventOpenScroll?this.preventOpenScroll=!1:this.selectedTagsInstance.performScroll(t))},tagOptionsScroll:function(t){this.data.cxPropRequestForTags.enable&&this.tagOptionsInstance.performScroll(t)}},keyDownEvent:function(){this.$node.querySelector("lyte-dropdown")&&this.$node.cxProp("aria")&&this.bindEventForAria()}.observes("cxPropAria").on("didConnect"),methods:{onInputFocus:function(t){t&&t.classList.contains("lyteInputFocus")&&!this.data.onFocus&&(this.setData("onFocus",!0),this.$node.querySelector("lyte-drop-button").classList.add("cxDropButtonFocused"))},
//!!Check the below three function
dropdownScrollClose:function(){if(this.data.paletteOpen)try{this.bodyDrop.querySelector("crux-color-palette").closePalette()}catch(t){return}},colorPaletteHide:function(t,e){this.getMethods("onColorTagPaletteHide")&&this.executeMethod("onColorTagPaletteHide",t,e)},onBeforeHide:function(t){return!(this.data.paletteOpen&&!this.setFromExternalDeveloper)&&((!t||!t.target.classList.contains("cxPaletteCircle")&&!t.target.classList.contains("cxPalettePopoverContent"))&&void(this.data.cxPropColorTags&&this.bodyDrop.querySelector("crux-color-palette").closePalette()))},onBlur:function(t){if(this.setData("onFocus",!1),this.data.tagAnimationArr.length){Lyte.arrayUtils(this.data.tagAnimationArr,"replaceAt",this.data.tagAnimationArr.length-1,this.calculateTagClass({doAnimation:!1,highlightTag:!1,color_code:"",class:"",style:""},this.data.tagAnimationArr.length-1))}if(this.preventBlurFromDrop)this.preventBlurFromDrop=!1;else if(!this.preventBlurOnError&&!this.getData("cxPropAllowDropdown")&&(!this.data.cxPropColorTags||!this.data.newTag)&&this.data.cxPropCreateTagOnBlur){if(0!==this.data.cxPropMaxTagLength&&this.getData("cxPropInputValue").length>this.getData("cxPropMaxTagLength"))return this.preventBlurOnError=!0,this.getMethods("onError")&&this.executeMethod("onError",this.getData("cxPropInputValue"),{errorCode:5,reason:"Max length of the tag has been reached"},this.$node.querySelector("lyte-dropdown"),this.$node.querySelector("lyte-dropdown lyte-drop-box"),this.$node.querySelector("lyte-input"),this.$node),this.preventBlurOnError=!1,void t.preventDefault();var e=this.getData("cxPropInputValue");this.handleAddNewTag(e,"Blur",t)}},beforeAddToList:function(t,e,a,o,s){if(this.valuesToRemove=[],this.data.paletteOpen&&"newTagId"==s.id)return!1;if(this.data.cxPropColorTags&&this.bodyDrop.querySelector("crux-color-palette").closePalette(),this.setData("onFocus",!0),this.preventOnAdd)return this.preventOnAdd=!1,!1;this.data.cxPropRequestForTags.enable&&this.tagOptionsInstance.properties.isSearchReq&&(this.preventCheckFornextResponse=!0);var r=this.handleAddNewTag(e,"DropDown",t);return r||(this.preventCheckFornextResponse=!1),r},addToList:function(t,e,a,o,s){for(var r=JSON.parse(a),i=r.length,l=this.valuesToRemove,n=l.length,c=0;c<i;c++)if(""!=r[c]){if(n>0)for(var p=0;p<n;p++)if(r[c]!=l[p]);else{d=!0;c==r.length-1&&(d=!1),Lyte.arrayUtils(r,"removeAt",c,1),i=r.length,d&&c--}}else{var d=!0;c==r.length-1&&(d=!1),Lyte.arrayUtils(r,"removeAt",c,1),i=r.length,d&&c--}this.setData("selectedList",r),this.updateOptionActiveClass("add",e),this.valuesToRemove=[];var h=this.bodyDrop.querySelectorAll(".tagOptionsItems.lyteDropdownActive");this.data.cxPropRequestForTags.enable?h.length===this.data.cxPropTagOptions.length&&!0===this.tagOptionsInstance.properties.allRecordsFetched?this.setData("noValue",!0):this.setData("noValue",!1):h.length==this.getData("cxPropTagOptions").length?this.setData("noValue",!0):this.setData("noValue",!1),this.bodyDrop.querySelector("#newTagId").classList.remove("lyteDropdownActive"),this.data.cxPropRequestForTags.enable&&(this.preventCheckFornextResponse?this.preventCheckFornextResponse=!1:this.checkForNextRequest())},beforeRemoveFromList:function(t,e,a,o,s,r){this.setData("onFocus",!0);this.onTagRemovalHighlight;return this.removeLatestTag(e,s)},removeFromList:function(t,e,a,o,s,r){if(this.data.cxPropRequestForTags.enable){for(var i=this.data.cxPropNewlyUnSelectedTags,l=i.length,n=!1,c=0;c<l;c++)if(e===i[c][this.data.cxPropSystemValue]){n=!0;break}if(!n){l=(i=this.data.cxPropTagOptions).length;for(c=0;c<l;c++)if(e===i[c][this.data.cxPropSystemValue]){Lyte.arrayUtils(this.getData("cxPropTagOptions"),"removeAt",c,1);break}}}else this.processSearch({},this.getData("cxPropInputValue"));if(this.updateOptionActiveClass("remove",e),this.checkListCount(),this.data.paletteOpen)try{this.bodyDrop.querySelector("crux-color-palette").alignColorPalette()}catch(t){return}},onBeforeOpenDropBox:function(t,e){return this.data.openCount||(this.openCount=this.openCount+1),!(this.data.cxPropRequestForTags.enable&&(!this.data.cxPropRequestForTags.enable||this.preventDropFromOpening))&&(this.bodyDrop=this.$node.querySelector("lyte-dropdown").component.childComp,!!(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag)&&void 0)},onOpenDropBox:function(t){if(this.data.cxPropColorTags&&"noFill"===this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor")&&(this.data.cxPropSelectedColor?this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor",this.data.cxPropSelectedColor):this.bodyDrop.querySelector("crux-color-palette").cxProp("selectedColor",this.bodyDrop.querySelector("crux-color-palette").cxProp("defaultColors")[Math.floor(13*Math.random())])),this.checkIfSelectedIsToBeSet(!0),this.getMethods("onOpen"))return this.executeMethod("onOpen",t,this.$node);if(this.data.cxPropRequestForTags.enable&&!this.selectedReqMade&&!this.selectedDataAvailable&&!this.data.cxPropSelected){this.selectedReqMade=!0;var e=this.tagOptionsInstance.constructNextBatch();e&&e.then&&Promise.resolve(e).then(function(t){this.selectedReqMade=!1,this.selectedDataAvailable=!0}.bind(this))}},hideDropBox:function(){if(this.getMethods("onClose"))return this.executeMethod("onClose",event,this.$node)}},optionQueryParams:function(t,e){return this.getMethods("setReqQueryParams")?this.executeMethod("setReqQueryParams","options",t,e):void 0},optionsNextBatchFunc:function(t,e){for(var a=e.length,o=JSON.parse(this.data.selectedList),s=o.length,r=[],i=0;i<a;i++)for(var l=0;l<s;l++)if(o[l]===e[i][this.data.cxPropSystemValue]){r.push(e[i]);break}var n=e;if(Lyte.arrayUtils(this.getData("cxPropTagOptions"),"push",e),this.localSearchResponse&&this.localSearchResponse.length&&(n=n.concat(this.localSearchResponse),Lyte.arrayUtils(this.getData("cxPropTagOptions"),"push",this.localSearchResponse),this.localSearchResponse=[]),!this.data.cxPropInputValue&&this.data.cxPropNewlyUnSelectedTags.length){if(1===this.openCount){var c=this.data.cxPropTagOptions,p=c.length,d=this.data.cxPropTagOptions.slice(),h=this.data.cxPropNewlyUnSelectedTags,g=h.length;for(l=0;l<p;l++)for(i=0;i<g;i++)if(c[l][this.data.cxPropSystemValue]===h[i][this.data.cxPropSystemValue]){Lyte.arrayUtils(d,"removeAt",l,1);break}this.setData("cxPropTagOptions",d)}n=n.concat(this.data.cxPropNewlyUnSelectedTags),Lyte.arrayUtils(this.getData("cxPropTagOptions"),"push",this.data.cxPropNewlyUnSelectedTags)}this.showNoResult(void 0,t.properties.searchValue,e),(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag)&&this.toggleComp("open"),e.length>=0&&(this.data.cxPropTagOptions.length||this.setData("noValue",!1)),this.checkForNextRequest()},loadingStateUpdateFunc:function(t){var e,a="";switch(t.properties.currentLoadingStage){case"initial":"options"===t.userCustomData.type?a="initialOptionLoader":(a="initialSelectedLoader",this.preventDropFromOpening=!0),e=1;break;case"scroll":a="options"===t.userCustomData.type?"scrollOptionLoader":"scrollSelectedLoader",e=1;break;case"search":"options"===t.userCustomData.type&&(a="initialOptionLoader"),e=1;break;case"":if(!this.openingReq){this.preventDropFromOpening=!1;var o=JSON.parse(JSON.stringify(this.data.loadingStateObj));"options"===t.userCustomData.type?(o.initialOptionLoader=!1,o.scrollOptionLoader=!1):(o.initialSelectedLoader=!1,o.scrollSelectedLoader=!1),this.setData("loadingStateObj",o),e=0}}e&&Lyte.objectUtils(this.data.loadingStateObj,"add",a,!0)},optionsAfterRequestFunc:function(t,e){e&&(this.reqForTagMatchObj={selectedMatch:e.selectedMatch,unselectedMatch:e.unselectedMatch}),1===t.properties.pageNo&&this.isInitialOptionsReqPending&&!t.properties.isSearchReq&&(this.isInitialOptionsReqPending=!1)},optionsBeforeRequestFunc:function(t){this.reqForTagMatchObj={};var e=!1;return t.properties.isSearchReq||1!==t.properties.pageNo||(this.isInitialOptionsReqPending?this.isInitialOptionsReqPending&&(e=!0):(this.isInitialOptionsReqPending=!0,e=!1)),e},optionsInvalidResponseFunc:function(t,e){if(1===t.properties.pageNo&&this.isInitialOptionsReqPending&&!t.properties.isSearchReq&&(this.isInitialOptionsReqPending=!1),(!e||e&&e.tags&&!e.tags.length)&&this.localSearchResponse&&this.localSearchResponse.length&&(Lyte.arrayUtils(this.getData("cxPropTagOptions"),"push",this.localSearchResponse),this.showNoResult(void 0,t.properties.searchValue,this.localSearchResponse),this.localSearchResponse=[]),!this.data.cxPropInputValue&&this.data.cxPropNewlyUnSelectedTags.length){if(1===this.openCount){for(var a=this.data.cxPropTagOptions,o=a.length,s=this.data.cxPropTagOptions.slice(),r=this.data.cxPropNewlyUnSelectedTags,i=r.length,l=0;l<o;l++)for(var n=0;n<i;n++)if(a[l][this.data.cxPropSystemValue]===r[n][this.data.cxPropSystemValue]){Lyte.arrayUtils(s,"removeAt",l,1);break}this.setData("cxPropTagOptions",s)}Lyte.arrayUtils(this.getData("cxPropTagOptions"),"push",this.data.cxPropNewlyUnSelectedTags)}this.data.cxPropTagOptions.length||this.showNoResult(void 0,t.properties.searchValue,[]),(this.getData("cxPropAllowDropdown")||this.data.cxPropColorTags&&this.data.newTag)&&this.toggleComp("open")},optionsCustomRequestFunc:function(t,e){if(this.getMethods("onCustomRequest"))return this.executeMethod("onCustomRequest","options",e,{isSearch:t.properties.isSearchReq,searchValue:t.properties.searchValue})},optionsBeforeSearchRequestFunc:function(t,e){this.setData("cxPropTagOptions",[]),"clearSearch"===e&&(this.setData("duplicateSelected",!1),this.setData("duplicateSelectedMessage",""),this.setData("newTag",!1)),"rejected"===e&&(this.data.duplicateSelected&&this.showNoResult(void 0,t.properties.searchValue,[]),this.data.newTag&&this.showNoResult(void 0,t.properties.searchValue,[]))},selectedQueryParams:function(t,e){return this.getMethods("setReqQueryParams")?this.executeMethod("setReqQueryParams","selected",t,e):void 0},selectedNextBatchFunc:function(t,e){var a=this.data.tagAnimationArr;a.length>0&&a[a.length-1].highlightTag&&(a[a.length-1].highlightTag=!1,Lyte.arrayUtils(this.getData("tagAnimationArr"),"replaceAt",a.length-1,this.calculateTagClass(a[a.length-1],a.length-1)));var o,s,r=$L("#cxSelectedTagListContainer",this.$node)[0],i=r.scrollHeight;(this.data.cxPropRequestForTags.reverseOrder||(e=e.reverse()),this.setData("cxPropTags",e.concat(this.getData("cxPropTags"))),this.openingReq)?r.scrollHeight<=r.offsetHeight+5?this.selectedTagsInstance.properties.allRecordsFetched?(this.openingReq=!1,(s=JSON.parse(JSON.stringify(this.data.loadingStateObj))).initialSelectedLoader=!1,s.scrollSelectedLoader=!1,this.setData("loadingStateObj",s)):this.selectedTagsInstance.constructNextBatch():(this.preventOpenScroll=!0,r.scrollTop=r.scrollHeight,this.openingReq=!1,(s=JSON.parse(JSON.stringify(this.data.loadingStateObj))).initialSelectedLoader=!1,s.scrollSelectedLoader=!1,this.setData("loadingStateObj",s)):(this.preventOpenScroll=!0,o=r.scrollHeight,r.scrollTop=o-i)},selectedCustomRequestFunc:function(t,e){if(this.getMethods("onCustomRequest"))return this.executeMethod("onCustomRequest","selected",e,{isSearch:t.properties.isSearchReq,searchValue:t.properties.searchValue})},selectedInvalidResponseFunc:function(t,e){if(this.openingReq){this.openingReq=!1;var a=JSON.parse(JSON.stringify(this.data.loadingStateObj));a.initialSelectedLoader=!1,a.scrollSelectedLoader=!1,this.setData("loadingStateObj",a)}}},{mixins:["crux-aria-dropdown-mixin"]});
