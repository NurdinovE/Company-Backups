Lyte.Component.register("crm-menu",{_template:'<template tag-name="crm-menu" class="newMenuTable" use-strict="false" tabindex="-1"> <lyte-tooltip class="dN" lt-prop-aria="{{isAccessibilityConfigSupported}}" lt-prop-tooltip-config=" { &quot;appearance&quot; : &quot;callout&quot; } "></lyte-tooltip> <template is="if" value="{{accessibilityConfiguration}}"><template case="true"> <lyte-skip-to lt-prop-data="{{skiptoMain}}"></lyte-skip-to> </template></template> <div class="crmMenuLeft"> <template is="if" value="{{expHandlers(expHandlers(clientPortalName,\'===\',&quot;&quot;),\'||\',expHandlers(clientPortalName,\'!\'))}}"><template case="true"> <div class="dTableCell vaM crmLogoCont"> <link-to lt-prop-tabindex="0" lt-prop-route="crm.tab.module.begin" lt-prop-dp="[&quot;Home&quot;]" data-zcqa="crmLogo_HomeTab" lt-prop-class="flexAlignCenter"> <img class="{{logoClass}} mR8" src="{{brandLogoUrl}}" alt="logo"><span class="crmLogoText accessibility-route-elem">{{productName}}</span> </link-to> </div> <template is="if" value="{{expHandlers(showTabGroup,\'&amp;&amp;\',loadTabGroup)}}"><template case="true"> <crm-tab-group></crm-tab-group> </template></template></template><template case="false"><template is="if" value="{{expHandlers(companyName,\'!==\',&quot;&quot;)}}"><template case="true"> <div class="w45 h45 dTableCell vaM p0 aligncenter"> <img id="clientOrgLogo" class="customPortallogo" src="{{companyLogo}}" title="{{companyName}}" style="width: 100%; height:100%;" alt="{{companyName}}"> </div> </template></template></template></template> </div> <div class="crmMenuRight newTopbandTheme"> <template is="if" value="{{expHandlers(expHandlers(clientPortalName,\'===\',&quot;&quot;),\'||\',expHandlers(clientPortalName,\'!\'))}}"><template case="true"> <template is="if" value="{{showEdition}}"><template case="true"> <div class="lyteItem currentEditionInfo" id="currentEditionInfo" style="display: {{if(showSearchInput,\'none\',\'\')}}"> <div class="crmMenuEditionSty pR pR16 alignRight"> <template is="if" value="{{isfreeedition}}"><template case="true"> <span class="crm-small-font-size crmMenuEditionTxt txtEllipsis dB aligncenter focusIconBox"> {{editionName}} </span> </template><template case="false"> <span class="crm-small-font-size crmMenuEditionTxt txtEllipsis dB focusIconBox"> {{unescape(getI18n("crm.edition.label.trial",editionName))}} </span> </template></template> <template is="if" value="{{expHandlers(expHandlers(onlineStoreAvlbl,\'==\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(issandboxacc,\'!\'))}}"><template case="true"> <div class="aligncenter"> <span tabindex="0" id="manageSubscriptionUrlTab" class="editionUpgrade ttUppercase crm-small-font-size crm-font-bold cP focusIconBox" aria-label="{{if(isfreeedition,editionName,getI18n(&quot;crm.edition.label.trial&quot;,editionName))}} {{getI18n(&quot;crm.store.upgrade&quot;)}}" rel="noopener" data-zcqa="subscription" onkeydown="{{action(\'manageSubscriptionUrl\',event)}}" onclick="{{action(\'manageSubscriptionUrl\')}}"><span id="upgradeBtn">{{getI18n(\'crm.store.upgrade\')}}</span></span> </div> </template></template> </div> </div> </template></template> <div class="lyteMenuSettings pR"> <crm-create-menu></crm-create-menu> <template is="if" value="{{issandboxacc}}"><template case="true"> <div class="sandboxRibbon pR p5 mR20 crm-small-font-size focusIconBox"> <img class="ribbonSandboxImg" src="{{getCrmImageUrl(\'sandbox-icon_lightmode.png\')}}" alt="_" data-image-mode="true"> <div class="sandboxRibbonName pL30 pR30"> <lyte-text lt-prop-value="{{sandboxName}}"> </lyte-text> </div> <div class="sBRibSqu"></div> </div> </template></template> <template is="if" value="{{expHandlers(showSearchInput,\'!\')}}"><template case="true"> <span tabindex="0" lt-prop-title="{{getI18n(&quot;crm.globalsearch.search.title&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" aria-label="{{getI18n(&quot;crm.globalsearch.search.title&quot;)}}" class="dIB lyteItem focusIconBox crmMenuRightActionIcon" id="topbandSearchIcon" data-zcqa="searchTpBnd" onkeydown="{{action(\'showSearchInput\',true,event)}}" onclick="{{action(\'showSearchInput\',true,event)}}"> <span class="zcicncss-searchTopbar zcicn-cssIcons zcicn_white_mask"></span> </span> </template></template> <template is="if" value="{{and(expHandlers(issandboxacc,\'!\'),or(ntcEnabledUser,feedsEnabled))}}"><template case="true"> <div tabindex="0" lt-prop-title="{{getI18n(&quot;crm.settings.notifications&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" aria-label="{{getI18n(&quot;crm.settings.notifications&quot;)}}" class="lyteItem cP pR focusIconBox crmMenuRightActionIcon" id="feeds_notification_container" onkeydown="{{action(\'linkTransition\',event,\'signal\')}}" onclick="{{action(\'linkTransition\',event,\'signal\')}}"> <span data-zcqa="feeds_notificationTpBnd" class="zcicncss-notifyTopbar zcicn-cssIcons zcicn_white_mask"></span> <span id="feeds_notification" class="lyteMenuNotificationCount" style="display: none"></span> </div> </template></template> <a tabindex="0" lt-prop-title="{{getI18n(&quot;crm.calendar.title&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" aria-label="{{getI18n(&quot;crm.calendar.title&quot;)}}" class="lyteItem focusIconBox crmMenuRightActionIcon" data-zcqa="calendarTpBand" id="sCalenDar" onkeydown="{{action(\'showCalendar\',event)}}" onclick="{{action(\'showCalendar\')}}"> <span class="zcicncss-calendarTopbar zcicn-cssIcons zcicn_white_mask"></span> </a> <template is="if" value="{{showMailMagnet}}"><template case="true"> <div id="rmnIconDiv" class="lyteItem pR focusIconBox crmMenuRightActionIcon" tabindex="0" lt-prop-title="{{getI18n(&quot;crm.label.mails&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" aria-label="{{getI18n(&quot;crm.label.mails&quot;)}}" data-zcqa="MailMagnet_showRecentMails" onkeydown="{{action(\'linkTransition\',event,\'mail\')}}" onclick="showRecentMails(event);"> <span class="zcicncss-mailTopbar zcicn-cssIcons zcicn_white_mask mT2"></span> <span class="updateImg {{if(newMailCount,\'\',\'dN\')}} aiCenter" id="newMailCount">{{newMailCount}}</span> <input type="hidden" name="unreadMailIds" id="unreadMailIds"> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(issandboxacc,\'!\'),\'&amp;&amp;\',expHandlers(showMarketPlace,\'===\',&quot;True&quot;)),\'&amp;&amp;\',expHandlers(isSupportUser,\'!\'))}}"><template case="true"> <link-to onclick="{{action(\'tab_marketPlaceClientTracking\')}}" lt-prop-title="{{getI18n(&quot;crm.setup.label.extensions.marketplace&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" aria-label="{{getI18n(&quot;crm.setup.label.extensions.marketplace&quot;)}}" lt-prop-id="tab_marketplace" data-zcqa="tab_marketplace" lt-prop-route="crm.settings.section.extensions.all-extensions" lt-prop-custom=""> <a tabindex="0" class="lyteItem focusIconBox crmMenuRightActionIcon"><span class="zcicncss-marketplaceTopbar zcicn-cssIcons zcicn_white_mask"></span></a> </link-to> </template></template> <link-to aria-label="{{getI18n(&quot;crm.topmenu.setup&quot;)}}" lt-prop-title="{{getI18n(&quot;crm.topmenu.setup&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" lt-prop-id="tab_Setup" data-zcqa="tab_Setup" lt-prop-class=" lyteTabSettingIconM sel" lt-prop-route="crm.settings.index" lt-prop-custom=""> <a tabindex="0" class="lyteItem focusIconBox crmMenuRightActionIcon"><span class="zcicncss-settingsTopbar zcicn-cssIcons zcicn_white_mask"></span></a> </link-to> <template is="if" value="{{showProfilePic}}"><template case="true"> <crm-profile-menu class="crmProfileMenu dIB" show-chat-non-admin="{{showChatNonAdmin}}"></crm-profile-menu> </template><template case="false"> <div id="dropclk" class="dIB cP mR5" data-zcqa="profilePicture"> <img tabindex="0" class="dIB prfImg vaT mT2 borderNone focusIconBox" lt-prop-title="{{getI18n(&quot;crm.label.profile&quot;)}}" aria-label="{{getI18n(&quot;crm.label.profile&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" src="{{getCrmImageUrl(\'nophoto.png\')}}"> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(issandboxacc,\'!\'),\'&amp;&amp;\',expHandlers(isZohoOneuser,\'!\'))}}"><template case="true"> <div class="dIB vaM crmZappsHamburger" id="crmZappsHamburger"></div> </template></template> <template is="if" value="{{isZohoOneuser}}"><template case="true"> <div id="crmZohoOneLauncher" class="pR dN"></div> </template></template> </template><template case="false"> <div class="lyteMenuSettings"> <template is="if" value="{{showProfilePic}}"><template case="true"> <crm-profile-menu class="crmProfileMenu dIB" client-portal-logout-url="{{clientPortalLogoutUrl}}"></crm-profile-menu> </template><template case="false"> <div id="dropclk" class="dIB cP mR5" data-zcqa="profilePicture"> <img tabindex="0" aria-label="{{getI18n(&quot;crm.label.profile&quot;)}}" lt-prop-title="{{getI18n(&quot;crm.label.profile&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" class="dIB prfImg vaT mT2 borderNone focusIconBox" src="{{getCrmImageUrl(\'nophoto.png\')}}"> </div> </template></template> </div> </template></template> </div> <template is="if" value="{{showSearchInput}}"><template case="true"> <div class="searchTopbandOpen pA"> <form name="searchForm" class="dIB searchTopbandForm mR0 pR" onsubmit="ajaxGSearch(\'gsearchTextBox\');return false;"> <div> <input tabindex="0" placeholder="{{getI18n(\'crm.globalsearch.search.title\')}}" class="topbandSearchInpt" maxlength="250" id="gsearchTextBox" data-zcqa="gsearchTextBox" name="searchword" onclick="checkOldGSearchResults(this);" onkeydown="{{action(\'showSearchInput\',false,event,true)}}"> <input type="hidden" name="searchCategory" id="searchCategory" value="AllEntities"> <input type="hidden" class="pL5" name="sModule" value="AllEntities"> <div class="adSearchCloses" onclick="{{action(\'stopEvent\')}}"> <span tabindex="1" id="adSearchCloseBtn" data-zcqa="adSearchCloseBtn" onkeydown="{{action(\'showSearchInput\',false,event)}}" onclick="{{action(&quot;showSearchInput&quot;,false,event)}}" class="fL cP focusIconBox"> <span class="dIF pL2 pR2"><crmutil-icon icon-name="close-9" icon-class=" zcicn9 vaT"></crmutil-icon></span> </span> </div> <span class="searchLoadingIcon"><img class="w16 h16" src="{{getCrmImageUrl(\'gsearchspinner_lightmode.gif\')}}" alt="image" data-image-mode="true"></span> <span id="topbandSearchIcon" class="icon-search-menu focusIconBox" data-zcqa="searchTpBnd"> <crmutil-icon icon-name="search" icon-class="zcicn-search-topband color555"></crmutil-icon> </span> </div> </form> </div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5,1]},{type:"if",position:[5,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,2,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[7,1]},{type:"if",position:[7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'display: '",{type:"helper",value:{name:"if",args:["showSearchInput","'none'","''"]}}]}}}},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,7]},{type:"if",position:[3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,9]},{type:"attr",position:[3,11]},{type:"if",position:[3,11],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[3,13]},{type:"if",position:[3,13],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,15]},{type:"componentDynamic",position:[3,15]},{type:"attr",position:[3,17]},{type:"if",position:[3,17],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[7]},{type:"if",position:[7],cases:{true:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[9]},{type:"if",position:[9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,7]},{type:"attr",position:[1,1,1,7,1]},{type:"componentDynamic",position:[1,1,1,7,1,1,0]},{type:"attr",position:[1,1,1,9,0]},{type:"componentDynamic",position:[1,1,1,11,1]}]}},default:{}}],_observedAttributes:["isfreeedition","editionName","ntcEnabledUser","clientPortalName","companyName","companyLogo","searchInputValue","showTabGroup","loadTabGroup","showEdition","selected","showSearchInput","showProfilePic","onlineStoreAvlbl","feedsEnabled","isdevelopment","issandboxacc","sandboxName","showMailMagnet","newMailCount","clientPortalLogoutUrl","showChatNonAdmin","zappsHamburgerResponse","isZohoOneuser","crmNamespace","crmLogoUrl","showMarketPlace","isSupportUser","accessibilityConfiguration","isAccessibilityConfigSupported","skiptoMain"],init:function(){},didConnect:function(){if(Lyte.injectResources([networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("globalsearch")],ResourceConstants.CRM)],void 0,void 0),this.setData("isZohoOneuser",isZohoOneUser),this.setData("productName",Crm.productName),this.setData("brandLogoUrl",Crm.Logo.Brand_logo),Crm.isRebrandingEnabled?this.setData("logoClass","rebrandedLogoIcon"):this.setData("logoClass","crmLogoIcon"),!this.getData("issandboxacc")&&!this.getData("clientPortalName")&&!this.getData("isZohoOneuser")){var e=this;$(document).ready((function(){var t,a=RebrandLinkUtil.getProperty("DeploymentLocation");switch(a){case"EU":t=".eu";break;case"CN":case"China":t=".com.cn";break;case"IN":t=".in";break;case"AU":t=".com.au";break;case"JP":t=".jp";break;case"CA":t=".ca";break;default:t=".com"}var o,i=!0,n="https://mail.",s=RebrandLinkUtil.getProperty("IS_LOCAL_ZOHO"),r=RebrandLinkUtil.getProperty("ISDEVELOPMENT");if("true"===s?o="localzoho":"true"===r?i=!1:o="CA"===a?"zohocloud":"zoho",i){n=n+o+t+"/biz/getHamburgerMenu.do?version=stable";$L.ajax({url:n,type:"GET",xhrFields:{withCredentials:!0},success:function(t){e.zappsHamburgerMenuCallback(t)}})}}))}if(this.getData("issandboxacc")&&(this.setData("sandboxName",Crm.userDetails.sandboxName),$(".crmMenuEditionSty").addClass("crmMenuEditionSandboxSty")),void 0!==Crm.Logo){var t=Crm.Logo.Logo_url,a=this.getData("crmLogoUrl");void 0!==Crm.Logo.Service&&"ZohoCRM"===Crm.Logo.Service&&(t=Crm.Logo.Logo_url_white,Lyte.objectUtils(a,"add","heightRestriction",!1)),Lyte.objectUtils(a,"add","Logo_url_white",t)}document.addEventListener("keydown",(function(e){var t=$L("#tabGroupDummy")[0],a=$L("#crmTopMenuLyteDrop")[0],o=$L("#orgDropdown")[0];t&&t.ltProp("isOpen")?38!==e.keyCode&&40!==e.keyCode||"newTabGrpDiv"!==e.target.id&&"lastDiv"!==e.target.id||e.stopImmediatePropagation():a&&a.ltProp("isOpen")?38!==e.keyCode&&40!==e.keyCode||"srch"===e.target.id||e.stopImmediatePropagation():o&&o.ltProp("isOpen")&&(38!==e.keyCode&&40!==e.keyCode||"manageOrgs"!==e.target.id||e.stopImmediatePropagation())}),!0)},data:function(){return{isfreeedition:Lyte.attr("boolean",{default:!1}),editionName:Lyte.attr("string",{default:""}),ntcEnabledUser:Lyte.attr("boolean",{default:!1}),clientPortalName:Lyte.attr("string",{default:""}),companyName:Lyte.attr("string",{default:""}),companyLogo:Lyte.attr("string",{default:""}),searchInputValue:Lyte.attr("string",{default:""}),showTabGroup:Lyte.attr("boolean",{default:RebrandLinkUtil.getProperty("TABGROUP")&&featuresAvailable.Tab_Groups}),loadTabGroup:Lyte.attr("boolean",{default:!1}),showEdition:Lyte.attr("boolean",{default:""}),selected:Lyte.attr("object",{default:{}}),showSearchInput:Lyte.attr("boolean",{default:!1}),showProfilePic:Lyte.attr("boolean",{default:!1}),onlineStoreAvlbl:Lyte.attr("string",{default:""}),feedsEnabled:Lyte.attr("boolean",{default:!1}),isdevelopment:Lyte.attr("boolean",{default:!1}),issandboxacc:Lyte.attr("boolean",{default:!1}),sandboxName:Lyte.attr("string",{default:""}),showMailMagnet:Lyte.attr("boolean",{default:!1}),newMailCount:Lyte.attr("string",{default:""}),clientPortalLogoutUrl:Lyte.attr("string",{default:""}),showChatNonAdmin:Lyte.attr("boolean",{default:!0}),zappsHamburgerResponse:Lyte.attr("object",{default:{}}),isZohoOneuser:Lyte.attr("boolean",{default:!1}),crmNamespace:Lyte.attr("string",{default:app.crmNamespace}),crmLogoUrl:Lyte.attr("object",{default:{heightRestriction:!0}}),showMarketPlace:Lyte.attr("string",{default:RebrandLinkUtil.getProperty("MarketPlace")}),isSupportUser:Lyte.attr("boolean",{default:"SupportProfileInternal"===Crm.userDetails.PROFILE_NAME||Crm.userDetails.isSupportAccessExitSessionEnabled}),accessibilityConfiguration:Lyte.attr("boolean",{default:Crm.userDetails.isAccessibilityConfigSupported}),isAccessibilityConfigSupported:Lyte.attr("boolean",{default:Crm.userDetails.isAccessibilityConfigSupported&&!featuresAvailable.NEXTGENUI_ENABLED}),skiptoMain:Lyte.attr("array",{default:[{message:I18n.getMsg("crm.skip.content"),container:".crm-main-wrapper"}]})}},actions:{showCalendar:function(e){e&&"keydown"===e.type&&13!==e.keyCode&&32!==e.keyCode&&40!==e.keyCode||(renderingUtils.stopEvent(e),document.getElementById("leftPanelCalendarP").ltProp({show:!0,wrapperClass:"popCal crmTopMenuCalender"}),Crm.client_tracking("Calendar",{view:"small-calendar"}),hideMenu(e))},linkTransition:function(e,t){if(e)if(13===e.keyCode||"click"===e.type)switch(t){case"setup":Lyte.Router.transitionTo("crm.settings.index");break;case"extensions":Lyte.Router.transitionTo("crm.settings.section.extensions.all-extensions");break;case"signal":e.stopPropagation(),sE(e),crmNTCGlobal.renderGlobalNotification();break;case"mail":showRecentMails(e)}else 9!==e.keyCode&&27!==e.keyCode||"signal"!==t||crmNTCGlobal.closeGlobalNotifications()},showSearchInput:function(e,t,a){if(Crm.userDetails.isNewGlobalSearch){if("keydown"===t.type)return;Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-global-search.js"],ResourceConstants.CRMClient),void 0,(function(){String('{"comparator":"equals","field":{"api_name":"source"},"value":"search"}'),document.querySelector(".gsLeastChar")&&$(".gsLeastChar").hide(),$("#show").append($L('<div class="newGlobalSearchWrap">').innerHTML=Lyte.Component.render("crm-global-search-popup")),document.getElementById("primaryGsearch").ltProp({show:!0,wrapperClass:"primaryGsearch"});var e=setTimeout((function(){$(".searchInputBox").focus(),clearTimeout(e)}),300)}))}else{if(a)return void(t&&9===t.keyCode&&t.shiftKey&&"gsearchTextBox"===t.target.id&&this.closeSearchInput());if(t&&e){if("keydown"===t.type)if(13===t.keyCode||32===t.keyCode)this.getData("showSearchInput")||t.preventDefault();else{if(40!==t.keyCode)return;t.preventDefault();var o=$L("#searchResultUlWrap").find(".ui-menu-item")[0];o&&o.focus()}t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}if(e){var i=$L("#mainMenuTabDiv").offset().top,n=$(".lyteMenuSettings"),s=n.offset(),r=n.width();this.setData("showSearchInput",!0);var l=s.left,p=$(".searchTopbandOpen .topbandSearchInpt").width(),c=$(".primarySearchList"),d=$(".searchTopbandOpen"),m=d.height(),u=($L("#mainMenuTabDiv").height()-m)/2,y=u+i,f=i+u+m+1;if(l=Crm.userDetails.RTL_ENABLED?l+r-78:l-p+22,0===c.length){var g="<div class='primarySearchList' style='left:"+l+"px;top:"+f+"px;'><div id='searchResultUlWrap'></div><div onclick='openZohoSearchPage' class='alignRight pR12 pT10'><a id='openZohoSearchLink' class='openZohoSearchLink crm-small-font-size focusIconBox p3' onmousedown='openZohoSearchPage(event)' onkeydown='tabForSearch(event)' href='javascript:;'>"+I18n.getMsg("crm.title.gsearch.search.across.mini",Crm.brandName)+"<crmutil-icon icon-name='expand-sm' icon-class='zcicn14 zcicn-expand-sm zcicn_4a8de9 mT3 mL5 vaT'></crmutil-icon></a></div></div>";$("body").append(g)}else c.css({left:l,top:f}).show();d.css({top:y+"px",left:l+"px"}),Crm.userDetails.ISPAID_USER&&($("#gsearchTextBox").autocomplete({position:{my:"right top",at:"right bottom"},source:function(e,t){callGSearchForAC("gsearchTextBox",t)},minLength:1,delay:200,select:function(){return!1},search:function(e){$L("crm-menu")[0].component.setData("searchInputValue",e.target.value)},appendTo:"#searchResultUlWrap",open:function(){var e=$(this),t=e.offset().top+e.outerHeight()+1,a=e.offset().left;$(".searchLoadingIcon").hide(),e.removeClass("ui-corner-all").addClass("ui-corner-top"),e.autocomplete("widget").css({"z-index":"15"}).addClass("globalSearchList globalSearchSmall"),$(".primarySearchList").css({top:t,display:"block",left:a})},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all"),$(".primarySearchList").hide()}}).data("ui-autocomplete")._renderItem=function(e,t){return renderGSearchACUI(e,t),$()}),$("#gsearchTextBox").select().focus()}else if(t)if(9===t.keyCode){if(!t.shiftKey){t.preventDefault();var h=$L("#openZohoSearchLink")[0];h?h.focus():this.closeSearchInput()}}else 13!==t.keyCode&&"click"!==t.type||this.closeSearchInput();this.getData("showSearchInput")||$("#gsearchTextBox").val("")}},manageSubscriptionUrl:function(e){e&&13!==e.keyCode||(Crm.client_tracking("Upgrade Option Click - Menu Bar"),Crm.trackSpotLightAction("Subscription Accessed",{Place:"Trial Remaining Msg"}),networkUtils.openUrl(Crm.userDetails.manageSubscriptionUrl,"_blank"))},tab_marketPlaceClientTracking:function(){Crm.client_tracking("Market Place Top Band Icon Click")}},allZohoAppOnShow:function(){var e,t;e=$L(".crmZappsHamburger")[0].getBoundingClientRect(),t=e.top+e.height+10+"px",document.querySelector("#tabLayer").style.position="static",$("body").css("overflow","hidden"),setTimeout((function(){$L(".zHAppMask .zHApps").css("top",t)}),0)},allZohoAppOnRemove:function(){document.querySelector("#tabLayer").style.position="relative",$("body").css("overflow","auto")},zappsHamburgerMenuCallback:function(e){this.setData("zappsHamburgerResponse",e);var t,a=csrfToken,o=csrfParamName,i=document.querySelector("#crmZappsHamburger"),n=document.querySelector("#tabLayer"),s=e[1];t=Object.assign(s,{publicPath:s.publicPath,zohoHomeDomain:s.zohoHomeDomain,zIconParent:i,hamburgerMenuParent:n,suite:!1,allApps:!0,appId:"crm",arrow:"topRight",isOneZohoBundle:!1,zOneJS:s.zOneJS,direction:"ltr",zOneConfig:{icon:{},csrfName:o,getCsrfValue:function(){return a}},onShow:this.allZohoAppOnShow,onRemove:this.allZohoAppOnRemove}),Crm.userDetails.RTL_ENABLED&&(t.arrow="topLeft",t.left="0px",t.direction="rtl"),this.appendFunc(t),window.zmwpHMConfig=t},appendFunc:function(e){var t=document.createElement("script");t.setAttribute("src",e.initialJS),t.setAttribute("charset","utf-8");var a=document.querySelector("#mainMenuTabDiv");a&&a.appendChild(t)},closeSearchInput:function(){var e=$("#gsearchTextBox");void 0!==e.data("ui-autocomplete")&&(e.autocomplete("destroy"),e.removeData("autocomplete")),$(".primarySearchList").hide(),this.setData("showSearchInput",!1),$(".searchLoadingIcon").hide(),$L("#topbandSearchIcon").focus()}},{mixins:["crm-stop-event"]}),Lyte.Component.register("crm-tab",{_template:'<template tag-name="crm-tab"> <div class="lyteItemDummyHolder"> <template is="for" items="{{dummy}}" item="singleval" indexval="index"> <div class="lyteItemDummy" id="dummy_{{singleval.module_name}}"> <span>{{singleval.plural_label}}</span> </div> </template> </div> <div class="lyteMenuItems"> <template is="for" items="{{visibleTabs}}" item="singleval" indexval="index"> <div class="{{if(isModuleSelected(selected.module_name,singleval.module_name),\'lyteMenuActive\',\'\')}} lyteItem" data-value="{{singleval.module_name}}" data-zcqa="tab_{{singleval.module_name}}" onclick="{{action(\'tabSelected\',this,singleval)}}" onkeydown="{{action(\'tabNavigate\',event,this,singleval.module_name,index)}}"> <a id="Visible_{{singleval.module_name}}" class="focusVisibleModule" tabindex="0" href="{{if(expHandlers(isCCEnabled,\'&amp;&amp;\',expHandlers(singleval.module_name,\'===\',\'Orchestration\')),concat(crmNamespace,\'/tab/\',\'Commandcenter\'),concat(crmNamespace,\'/tab/\',singleval.module_name))}}"> <span class="accessibility-route-elem">{{singleval.plural_label}} </span> </a> </div> </template> <template is="if" value="{{expHandlers(expHandlers(hiddenTabs.length,\'>\',0),\'||\',expHandlers(cvPermission,\'==\',&quot;true&quot;))}}"><template case="true"> <lyte-dropdown lt-prop-tabindex="0" lt-prop-aria="{{isAccessibilityConfigSupported}}" lt-prop-aria-button="{&quot;aria-label&quot;:&quot;{{getI18n(&quot;crm.canvas.gallary.othermodules&quot;)}}&quot;}" lt-prop-allow-focusable-elements="{{if(expHandlers(hiddenTabs.length,\'>\',0),&quot;true&quot;,&quot;false&quot;)}}" lt-prop-active-element="{{if(expHandlers(hiddenTabs.length,\'>\',0),&quot;#srch&quot;,&quot;&quot;)}}" lt-prop-title="{{getI18n(&quot;crm.canvas.gallary.othermodules&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" id="crmTopMenuLyteDrop" class="crmTopMenuLyteDrop" on-before-show="{{method(\'setDropdownHeight\')}}" on-show="{{method(\'dropdownOpen\')}}" on-hide="{{method(\'dropdownClose\')}}" on-before-hide="{{method(\'beforeDropdownClose\')}}" on-option-selected="{{method(\'dropdownoptionselected\')}}" on-key-navigation="{{method(\'keyNavigation\')}}" lt-prop-freeze="false"> <template is="registerYield" yield-name="yield"> <lyte-drop-button data-zcqa="crm_other_modules"> <template is="if" value="{{expHandlers(showOrchestrationNameChangePopup,\'&amp;&amp;\',isOrchestrationModuleAvailable)}}"><template case="true"> <span class="lyteDot orchPopDotTopband" data-zcqa="tab_menu_more"> <span class="orchPopDot3"> <span class="orchPopDot2"> <span class="orchPopDot1"></span> </span> </span> </span> </template><template case="false"> <span data-zcqa="tab_menu_more"> <crmutil-icon icon-name="more-hr" icon-class="zcicn-more-hr vaM pL13 pR13 pB13 pT15 iconWhite"></crmutil-icon> </span> </template></template> </lyte-drop-button> <lyte-drop-box class="crmMenuDropdown"> <template is="if" value="{{expHandlers(hiddenTabs.length,\'>\',0)}}"><template case="true"> <lyte-drop-header> <div class="MenuSearch crmTabSearchMenu" id="search_wrapper" onclick="{{action(\'viewSrch\')}}" onhover="{{action(\'removeDropdownSelection\',event)}}"> <lyte-search lt-prop-aria="{{isAccessibilityConfigSupported}}" lt-prop-aria-attributes="{&quot;aria-label&quot;:{{getI18n(&quot;crm.api.search.modules&quot;)}}}" id="tabMenuSearch" lt-prop-id="srch" class="crmTabSearch dB" lt-prop-class="crmTabSearchInp" lt-prop-tab-index="1" lt-prop-placeholder="{{getI18n(\'crm.api.search.modules\')}}" lt-prop-autofocus="autofocus" lt-prop-query-selector="{&quot;scope&quot;:&quot;.tab_more_body&quot;,&quot;search&quot;:&quot;.tab_more_body_item,.cpq_tab_label&quot;, &quot;related&quot; : &quot;.tab_more_drop_group&quot;, &quot;label&quot; : &quot;.cpq_tab_label&quot;}" lt-prop-label-search="true" on-search="{{method(\'onSearch\')}}"></lyte-search> </div> </lyte-drop-header> </template></template> <lyte-drop-body aria-label="{{singleval.plural_label}}" voice-attribute-label="scroll - {{getI18n(\'crm.canvas.gallary.othermodules\')}}" class="tab_more_body p0 noTickLyteDropdown" onmouseleave="{{action(\'removeDropdownSelection\',event)}}"> <div class="pR noresultstyle" style="display:none;" id="menuNoResult">{{getI18n(\'crm.no.module.found\')}}</div> <template is="for" items="{{hiddenTabs}}" item="singleval" indexval="index"> <lyte-drop-item id="modId{{singleval.module_name}}" aria-label="{{singleval.plural_label}}" class="tab_more_body_item" data-value="{{singleval.module_name}}" data-zcqa="tab_{{singleval.module_name}}" onmouseover="{{action(\'removeFocusAndSelection\',event)}}"> <template is="if" value="{{expHandlers(expHandlers(singleval.child_module,\'!\'),\'||\',expHandlers(singleval.module_name,\'!=\',&quot;ZohoCPQ&quot;))}}"><template case="true"> <a tabindex="-1" href="{{if(expHandlers(isCCEnabled,\'&amp;&amp;\',expHandlers(singleval.module_name,\'===\',\'Orchestration\')),concat(crmNamespace,\'/tab/\',\'Commandcenter\'),concat(crmNamespace,\'/tab/\',singleval.module_name))}}"><span>{{singleval.plural_label}}</span> <template is="if" value="{{expHandlers(singleval.module_name,\'===\',\'Voice of the Customer\')}}"><template case="true"> <template is="if" value="{{vocTrialTagEnabled}}"><template case="true"> <span class="dIB vaM" lt-prop-title="{{concat(getI18n(\'crm.label.new\'),\' - \',getI18n(\'crm.label.trial\'))}}"><crm-ui-loaders interaction-name="crmNewReleaseLoader"></crm-ui-loaders></span> </template><template case="false"> <sup class="pR top4"><crmutil-icon icon-name="earlyaccess" icon-class="zcicn-earlyaccess"></crmutil-icon></sup> </template></template> </template></template> </a> </template></template> </lyte-drop-item> <template is="if" value="{{expHandlers(singleval.child_module,\'&amp;&amp;\',expHandlers(singleval.module_name,\'==\',&quot;ZohoCPQ&quot;))}}"><template case="true"> <lyte-drop-group class="tab_more_drop_group zCpqModule_list"> <lyte-drop-label class="cpq_tab_label"> {{singleval.plural_label}} </lyte-drop-label> <template is="for" items="{{singleval.child_module}}" item="singleval" index="index"> <template is="if" value="{{expHandlers(singleval.visible,\'&amp;&amp;\',singleval.viewable)}}"><template case="true"> <lyte-drop-item class="tab_more_body_item" data-value="{{singleval.module_name}}" data-zcqa="tab_{{singleval.module_name}}" onmouseover="{{action(\'removeFocusAndSelection\',event)}}"> <a href="{{concat(crmNamespace,\'/tab/\',singleval.module_name)}}"><span>{{singleval.plural_label}}</span></a> </lyte-drop-item> </template></template> </template> </lyte-drop-group> </template></template> </template> </lyte-drop-body> <template is="if" value="{{ifEquals(cvPermission,&quot;true&quot;)}}"><template case="true"> <lyte-drop-footer class="crmTabCreateBtn" onhover="{{action(\'removeDropdownSelection\',event)}}"> <div class="createModLink alignLeft"> <link-to data-zcqa="newModule" aria-label="{{getI18n(\'crm.label.create.new.module\')}}" lt-prop-route="crm.settings.section.modules.index-modules.create-module" lt-prop-class="dIB vaM focusCreate" onclick="{{action(\'toggleMenu\')}}" lt-prop-custom=""> <a id="newModule" tabindex="1"><span> <i class="ico-plus-small-blue3 svgIcons dIB vaM" style="transform: scale(0.8)"></i> {{getI18n(\'crm.label.create.new.module\')}} </span></a> </link-to> </div> <template is="if" value="{{promotabs}}"><template case="true"> <div class="featurePromoList alignLeft"> <span class="promHead">{{getI18n("crm.zapps.suggested")}}</span> <ul class="ul_reset"> <template is="for" items="{{promotabs}}" item="promotab" indexval="index"> <li class="promLi dropFooterList" id="promo_{{promotab.serviceName}}"> <link-to lt-prop-route="{{promotab.lytePath}}" lt-prop-dp="{{promotab.lyteDP}}" lt-prop-td="{&quot;from&quot;:&quot;promotab&quot;}" onkeydown="{{action(\'toggleMenu\',event,promotab.serviceName)}}" onclick="{{action(\'toggleMenu\',event,promotab.serviceName)}}" lt-prop-custom=""> <span class="promoTxtLabel dIB"> <a id="promo_{{index}}" tabindex="1" class="promLink dIB vaM">{{promotab.label}} <span class="promoTxtRed dIB vaT mT3">{{promotab.note}}</span></a> </span> </link-to> <a id="promoClose_{{index}}" tabindex="1" class="fR cP promoCloseHover op5_hover1" onkeydown="{{action(\'removePromoTab\',event,promotab.serviceName)}}" onclick="{{action(\'removePromoTab\',event,promotab.serviceName)}}"> <span class="dIB ico-close-small2 svgIcons promoClose"></span> </a> <div class="cBoth"></div> </li> </template> </ul> </div> </template></template> </lyte-drop-footer> </template></template> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> <lyte-event-listener event-name="windowResize" on-fire="{{action(\'handleResize\')}}"> </lyte-event-listener></template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]}]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"text",position:[3,3,1,0]},{type:"attr",position:[3,3,3]},{type:"for",position:[3,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,0]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,1,0,3]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"text",position:[1,1,1,1,0]},{type:"text",position:[1,1,1,1,2,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]}]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"componentDynamic",position:[5]}],_observedAttributes:["cvPermission","searchValue","activeDescendant","visibleDescendant","dummy","visibleTabs","hiddenTabs","tabModules","promotabs","selected","dontObs","crmNamespace","winWidth","previouslySelectedModule","isOrchestrationModuleAvailable","isOrchLabelHovered","isCCEnabled","vocPromoSelected","vocPromoByDefault","isAccessibilityConfigSupported","vocTrialTagEnabled","defaultTabGroupChanged"],data:function(){return{cvPermission:Lyte.attr("string",{default:cvPermission}),searchValue:Lyte.attr("string",{default:""}),activeDescendant:Lyte.attr("string",{default:""}),visibleDescendant:Lyte.attr("string",{default:""}),dummy:Lyte.attr("array",{default:[]}),visibleTabs:Lyte.attr("array",{default:[]}),hiddenTabs:Lyte.attr("array",{default:[]}),tabModules:Lyte.attr("array",{default:[]}),promotabs:Lyte.attr("array",{default:Crm.PROMO_TABS}),selected:Lyte.attr("object",{default:{}}),dontObs:Lyte.attr("boolean",{default:!1}),crmNamespace:Lyte.attr("string",{default:app.crmNamespace}),winWidth:Lyte.attr("number",{default:app.windowRect.innerWidth}),previouslySelectedModule:Lyte.attr("string",{default:""}),isOrchestrationModuleAvailable:Lyte.attr("boolean",{default:!1}),isOrchLabelHovered:Lyte.attr("boolean",{default:!1}),isCCEnabled:Lyte.attr("boolean",{default:Crm.userDetails.CC_SERVICE_ENABLED}),vocPromoSelected:Lyte.attr("boolean",{default:!1}),vocPromoByDefault:Lyte.attr("boolean",{default:!1}),isAccessibilityConfigSupported:Lyte.attr("boolean",{default:Crm.userDetails.isAccessibilityConfigSupported&&!featuresAvailable.NEXTGENUI_ENABLED}),vocTrialTagEnabled:Lyte.attr("boolean",{default:!1}),defaultTabGroupChanged:Lyte.attr("boolean")}},skip_in_tab:["Entity Scores"],init:function(){let e=Lyte.registeredMixins.orchestration.fetchOrchestrationChildModules().length>0||Lyte.registeredMixins.orchestration.fetchPathfinderChildModules().length>0||moduleRecordMapping.Orchestration&&moduleRecordMapping.Orchestration.cc_enabled,t=crmTab&&crmTab.showVocPromoTab&&(!Crm.userDetails.SERVICES_PROMO_VISIBILITY&&validationUtils.isEmpty(crmTab.requiredPromoTabs)&&!crmTab.needPseudoProjectsTab||!Crm.isHeadless&&"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus());this.setData({isOrchestrationModuleAvailable:e,vocPromoByDefault:t,vocTrialTagEnabled:crmTab.isVocTrialTagEnabled})},didConnect:function(){if(this.getData("defaultTabGroupChanged")){var e=$L("crm-tab-group")[0];if(e=e?e.component:null){var t=store.peekAll("tab_group").filterBy({default:!0})[0];e.executeMethod("changeTabGroup",null,t.id)}this.setData("defaultTabGroupChanged",!1)}this.constructDummy(),$(".dummy_Topband").hide();var a=this.getData("selected")?this.getData("selected").module_name:void 0;this.setData("previouslySelectedModule",a),!Crm.isHeadless&&"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()&&a&&crmplusImplTriggerActions("selectEntity",["module",featuresAvailable.NEXTGENUI_ENABLED?"modules":a]);var o=$L("#crmTopMenuLyteDrop").find(".lyteDummyEventContainer")[0];o&&o.addEventListener("keydown",this.searchFocus)},didDestroy:function(){var e=$L("#crmTopMenuLyteDrop").find(".lyteDummyEventContainer")[0];e&&e.removeEventListener("keydown",this.searchFocus)},searchFocus:function(e){if(e&&9===e.keyCode){var t=$L("crm-menu")[0];t&&t.component&&t.component.getData("showSearchInput")&&!e.shiftKey&&(e.preventDefault(),$L("#gsearchTextBox").focus())}},itemsObserver:function(e){"change"==e.type&&"selected"==e.item&&0==Object.keys(e.newValue).length&&0==Object.keys(e.oldValue).length||this.getData("dontObs")||this.constructDummy()}.observes("tabModules.[]","selected"),constructDummy:function(){var e=moduleRecordMapping.Emails,t=!1,a=moduleRecordMapping.ZohoCPQ,o=!1;e&&e.visible&&crmTab.isZMailEnabled&&(t=!0),!a||!a.visible||Crm.userDetails&&Crm.userDetails.LITE&&Crm.userDetails.LITE.IS_LITE_USER||(o=!0),Lyte.arrayUtils(this.getData("dummy"),"removeAt",0,this.getData("dummy").length);for(var i=this.getData("tabModules").length,n=0;n<i;n++){var s=this.getData("tabModules")[n];if(this.skip_in_tab.indexOf(s.module_name)<0&&(s.visible&&"Emails"!==s.module_name||"Emails"==s.module_name&&t&&s.visible)&&!(2&s.visibility||4&s.visibility)&&(!o||void 0===s.parent_module||s.parent_module.module_name!==a.module_name)&&(!s.private_profile||"Requesters"!==s.private_profile.name)){var r={};r.plural_label=s.plural_label,r.module_name=s.module_name,r.visible=s.visible,r.visibility=s.visibility,r.viewable=s.viewable,r.sequence_number=s.sequence_number,r.child_module=s.child_module,"ZohoCPQ"!==r.module_name?Lyte.arrayUtils(this.getData("dummy"),"push",r):"ZohoCPQ"===r.module_name&&this.showCPQModules(r)&&(r.child_module=r.child_module.sortBy("sequence_number"),Lyte.arrayUtils(this.getData("dummy"),"push",r))}}$L.fastdom.measure(function(){this.resizeMenu()}.bind(this))},showCPQModules:function(e){var t=!1;return e.child_module&&"ZohoCPQ"===e.module_name&&e.child_module.forEach((function(e){e.visible&&e.viewable&&(t=!0)})),t},resizeMenu:function(){if("none"!==document.querySelector("#mainMenuTabDiv").style.display&&"none"!==document.querySelector("#tabLayer").style.display){var e=document.querySelector(".lyteMenuSettings").offsetWidth+400,t=document.querySelector(".crmLogoCont"),a=document.querySelector("crm-tab-group"),o=t?t.offsetWidth:0,i=a?a.offsetWidth:0,n=app.windowRect.innerWidth-(e>600?e:600)-o-i;n=n<0?0:n;var s=this.$node.querySelectorAll(".lyteItemDummy"),r=0,l=0,p=s.length,c=crmTab&&crmTab.showVocPromoTab&&!this.getData("vocPromoByDefault")&&this.getData("vocPromoSelected");for(n=c?n-180:n;l<p&&!((r+=s[l].getBoundingClientRect().width)>n);l++);var d=this.getData("dummy").slice(0);d.length;if(this.getData("visibleTabs").length>0&&Lyte.arrayUtils(this.getData("visibleTabs"),"removeAt",0,this.getData("visibleTabs").length),this.getData("hiddenTabs").length>0&&Lyte.arrayUtils(this.getData("hiddenTabs"),"removeAt",0,this.getData("hiddenTabs").length),c&&(n+=180,l++,d.splice(l-1,0,this.methods.getPromoTabDummyData("Voice of the Customer","crm.tab.voc"))),"undefined"!=typeof crmTab){if(crmTab.requiredPromoTabs&&Crm.userDetails.SERVICES_PROMO_VISIBILITY&&l-Object.keys(crmTab.requiredPromoTabs).length>=0)for(var m in crmTab.requiredPromoTabs)n+=80,l++,d.splice(l-1,0,this.methods.getPromoTabDummyData(m,crmTab.requiredPromoTabs[m]));crmTab.needPseudoProjectsTab&&0!=l&&(n+=80,l++,d.splice(l-1,Crm.userDetails.SERVICES_PROMO_VISIBILITY?crmTab.requiredPromoTabs.length:0,this.methods.getDummyTabData()))}crmTab&&crmTab.showVocPromoTab&&this.getData("vocPromoByDefault")&&0!=l&&(n+=180,l++,d.splice(l-1,0,this.methods.getPromoTabDummyData("Voice of the Customer","crm.tab.voc")));var u=d.slice(l||1),y=u.length;Lyte.arrayUtils(this.getData("visibleTabs"),"concat",d.slice(0,l||1)),Lyte.arrayUtils(this.getData("hiddenTabs"),"concat",u.sortBy("sequence_number")),crmTab&&crmTab.showVocPromoTab&&!this.getData("vocPromoByDefault")&&!this.getData("vocPromoSelected")&&Lyte.arrayUtils(this.getData("hiddenTabs"),"insertAt",0,this.methods.getPromoTabDummyData("Voice of the Customer","crm.tab.voc"));var f=this.getData("selected");this.getData("hiddenTabs").length>0&&(n+=51),0==l&&(n+=$L("#dummy_"+f.module_name).width()),this.$node.style.maxWidth=n+"px";var g=$L(".searchSetupInput");if(g.length>0&&g.find("lyte-dropdown")[0].resetPosition(),f&&f.module_name){var h={};(f.module_name.startsWith("Orchestration")||f.module_name.startsWith("PathFinder"))&&(h.module_name=f.module_name,f.module_name="Orchestration",h.valueReplaced=!1);for(var b=0;b<y;b++)if(u[b].module_name===f.module_name){h&&"Orchestration"===f.module_name&&(f.module_name=h.module_name,h.valueReplaced=!0),this.setSelectedFromDropdown(f.module_name);break}h&&!h.valueReplaced&&"Orchestration"===f.module_name&&(f.module_name=h.module_name)}}},setSelectedFromDropdown:function(e){var t,a,o=this.getData("tabModules"),i=o.length,n=this.getData("visibleTabs"),s=n[n.length-1].module_name,r={};if(e&&(e.startsWith("Orchestration")||e.startsWith("PathFinder"))&&(r.module_name=e,e="Orchestration"),crmTab&&crmTab.showVocPromoTab&&"Voice of the Customer"===e)return this.setData("vocPromoSelected",!0),void this.constructDummy();this.setData("vocPromoSelected",!1);for(var l=0;l<i;l++)if(o[l].module_name==e){"Orchestration"===e&&(e=r.module_name),t=l;break}for(var p=0;p<i;p++)if(s==o[p].module_name){a=p;break}if("undefined"!=typeof crmTab&&crmTab.requiredPromoTabs&&Crm.userDetails.SERVICES_PROMO_VISIBILITY&&null==a){var c=Object.keys(crmTab.requiredPromoTabs).length;0!=c&&(a=n.length-c-1)}if("undefined"!=typeof crmTab&&crmTab.needPseudoProjectsTab&&n.length>=2&&(a=a?a-1:n.length-2),this.getData("vocPromoByDefault")&&n.length>=2&&(a=a?a-1:n.length-2),this.setData("selected",o[t]),this.setData("dontObs",!0),t!=a){var d=Lyte.arrayUtils(this.getData("tabModules"),"removeAt",t,1);this.setData("dontObs",!1),Lyte.arrayUtils(this.getData("tabModules"),"insertAt",a,d)}},changeMenu:function(e){var t=document.querySelector("crm-tab").component;t.changeTab(t,e,!1)},methods:{onSearch:function(e){0==e.length?$L("#menuNoResult").show():$L("#menuNoResult").hide()},setDropdownHeight:function(){var e=$("#wmstoolbar").outerHeight();e=e||26;var t;$("#tabLayer");t=35*$(".featurePromoList .promLi,.promHead").length;var a=renderingUtils.windowHeight-(e+renderingUtils.tabLayerTop()+renderingUtils.tabLayerOuterHeight()+t+125),o=parseInt(a/30);$("lyte-drop-body.tab_more_body").css("max-height",30*o)},dropdownOpen:function(e,t){if(this.getData("hiddenTabs").length>0){this.setData("searchValue","");var a=this.getData("hiddenTabs");a[0]&&this.setData("activeDescendant","modId"+a[0].module_name),setTimeout((function(){$L("#srch").focus()}),10)}var o=$L(".orchDropItem",t.childComp);o[0]&&(o.addClass("orchPopOrigin"),Crm.userDetails.isOrchestrationNameChangePopupViewed||($L("span",o).addClass("orchPopDot"),$(".orchPopDot",o).append("<span class='orchPopDot3'><span class='orchPopDot2'><span class='orchPopDot1'></span></span></span>")),o[0].addEventListener("mouseenter",(function(){Crm.userDetails.isOrchestrationNameChangePopupViewed||$L("#orchRenameNotifyPopupTab")[0].ltProp("show",!0)})),o[0].addEventListener("mouseleave",function(){$L("#orchRenameNotifyPopupTab")[0].ltProp("show",!1),this.setData("isOrchLabelHovered",!0)}.bind(this)))},dropdownClose:function(e,t){var a=$L(".orchDropItem",t.childComp);if(a[0]&&(Crm.userDetails.isOrchestrationNameChangePopupViewed||$(".orchPopDot3",".orchPopDot").remove(),a.removeClass("orchPopOrigin"),$L("span",a).removeClass("orchPopDot"),this.getData("isOrchLabelHovered")&&!Crm.userDetails.isOrchestrationNameChangePopupViewed)){Crm.userDetails.isOrchestrationNameChangePopupViewed=!0,this.setData("isOrchLabelHovered",!1);var o=Crm.getCrmBasePath()+"/SetupAction.do?action=closeOrchestrationNameChangePopup",i={};i[csrfParamName]=csrfToken,(new crmRequestPool).doAjax(o,(function(e){"object"!=typeof e&&(e=JSON.parse(e))}),i)}},beforeDropdownClose:function(e){if(e&&e.type&&9===e.keyCode){if("true"===this.getData("cvPermission")&&(e.shiftKey&&"newModule"===e.target.id||"srch"===e.target.id&&!e.shiftKey))return"srch"!==e.target.id||e.shiftKey||$L(".tab_more_body").find(".lyteDropdownSelection").removeClass("lyteDropdownSelection"),!(!e.shiftKey||"newModule"!==e.target.id||this.getData("hiddenTabs.length"))&&(e.preventDefault(),!0);if("srch"===e.target.id&&e.shiftKey)return $L("#crmTopMenuLyteDrop").find(".lyteDummyEventContainer").focus(),e.preventDefault(),!0;if(e.target.classList.contains("lyteDummyEventContainer")&&"true"===this.getData("cvPermission")&&!this.getData("hiddenTabs.length"))return $L("#newModule").focus(),e.preventDefault(),!1;var t=this.getData("promotabs")?this.getData("promotabs"):[];if("newModule"===e.target.id&&t.length)return $L("#promo_0").focus(),e.preventDefault(),!1;if(t.length)return"promoClose_"+(t.length-1).toString()===e.target.id&&!e.shiftKey;var a=$L("crm-menu")[0];return a&&a.component&&a.component.getData("showSearchInput")&&!e.shiftKey&&(e.preventDefault(),$L("#gsearchTextBox").focus()),!0}return!0},keyNavigation:function(e,t){this.setData("activeDescendant",t.id)},dropdownoptionselected:function(e,t){if(1==e.ctrlKey||1==e.metaKey||2==e.which)return!1;e.stopPropagation(),e.preventDefault(),this.setSelectedFromDropdown(t),this.changeMenu(t)},getDummyTabData:function(e){var t={};return"Marketplace"==e?(t={module_name:"Marketplace",visible:!0,visibility:1,route:"crm.tab.marketplace"}).plural_label=I18n.getMsg("crm.setup.label.extensions.marketplace"):t={plural_label:"Projects",module_name:"Projects",visible:!0,visibility:1,route:"crm.tab.projects"},t},getPromoTabDummyData:function(e,t){var a={visible:!0,visibility:1};a.plural_label=I18n.getMsg(e),a.module_name=e,a.route=t;var o=[e];return a.dp=o,a}},actions:{viewSrch:function(){viewSrch()},removeFocusAndSelection:function(e){$("#srch").blur(),$(".tab_more_body_item.lyteDropdownSelection").removeClass("lyteDropdownSelection");for(var t=e.target;"LYTE-DROP-ITEM"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;"HTML"!=t.tagName&&$(t).addClass("lyteDropdownSelection")},removeDropdownSelection:function(){$(".tab_more_body_item.lyteDropdownSelection").removeClass("lyteDropdownSelection")},toggleMenu:function(e,t){e&&"keydown"===e.type&&13!==e.keyCode||($("crm-tab").find("lyte-dropdown")[0].toggle(),t&&Crm.trackSpotLightAction("Promo tab click",{app:t}))},tabSelected:function(e,t){if(1==event.ctrlKey||1==event.metaKey||2==event.which)return!1;var a=this.$node.querySelector(".lyteMenuActive");a&&a.classList.remove("lyteMenuActive"),e.classList.add("lyteMenuActive");var o=!1;this.getData("tabModules").forEach(function(e){e.module_name===t.module_name&&(o=!0,this.setData("selected",e))}.bind(this)),o||this.setData("selected",{}),event.preventDefault(),this.changeMenu(t.module_name)},removePromoTab:function(e,t){if(!e||"keydown"!==e.type||13===e.keyCode){if(t){Crm.trackSpotLightAction("Promo tab remove",{app:t});var a=[],o=Crm.userDetails.CUSTOMIZE_INFO;o&&o.hide_promo&&(a=o.hide_promo),a.push(t),updateCustomization("hide_promo",JSON.stringify(a),(function(){var e=$(".featurePromoList");e.find("#promo_"+t).remove(),e.find(".promLi").length<1&&(Crm.PROMO_TABS=void 0,$(".createModLink").length<1&&$("tab_more_body_item").length<1?($(".crmMenuDropdown").remove(),crmTab.reloadTabMenu()):e.remove())}))}return!1}},handleResize:function(){var e=this.getData("winWidth")-app.windowRect.innerWidth;if(this.setData("winWidth",app.windowRect.innerWidth),0!=e){var t=this.getData("tabModules").sortBy("sequence_number");this.setData("tabModules",t),this.resizeMenu()}},tabNavigate:function(e,t,a,o){var i=this.getData("visibleTabs");if((Crm.userDetails.RTL_ENABLED&&39===e.keyCode||!Crm.userDetails.RTL_ENABLED&&37===e.keyCode)&&i.first().module_name!==a){a=i[o-1].module_name;$L("#Visible_"+a).focus(),this.setData("visibleDescendant","Visible_"+a)}else if((Crm.userDetails.RTL_ENABLED&&37===e.keyCode||!Crm.userDetails.RTL_ENABLED&&39===e.keyCode)&&i.last().module_name!==a){a=i[o+1].module_name;$L("#Visible_"+a).focus(),this.setData("visibleDescendant","Visible_"+a)}else"End"===e.code?$L("#Visible_"+i.last().module_name).focus():"Home"===e.code&&$L("#Visible_"+i.first().module_name).focus()}}},{mixins:["crm-menu-utils"]}),Lyte.Component.registerHelper("isModuleSelected",(function(e,t){return"Meetings"===e&&(e="Events"),"Deals"===e&&(e="Potentials"),!(!e||"Orchestration"!==t||!e.startsWith("Orchestration")&&!e.startsWith("PathFinder"))||e===t})),Lyte.Component.register("crm-tab-group",{_template:'<template tag-name="crm-tab-group"> <div id="showMenu" class="showHeaderMenu"> <lyte-dropdown lt-prop-tabindex="0" data-zcqa="showHideTabGroupMenu" class="crmTabGroupDropdown" lt-prop-yield="true" lt-prop-icon-class="dropdown" lt-prop-max-count="0" lt-prop-freeze="false" on-show="{{method(\'onTabOpen\')}}" on-before-show="{{method(\'openTabGroup\')}}" on-option-selected="{{method(\'changeTabGroup\')}}" id="tabGroupDummy" on-before-hide="{{method(\'beforeDropdownClose\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="crmWhiteColor"> <span class="tagGroupDropBtn">{{tabGroupsSelectedItemName}}</span> <div class="zcicn-arrow-solid-down-sm-mask zcicn-cssIcons zcicn_white_mask pA right20 top15"></div> </lyte-drop-button> <lyte-drop-box class="crmBoxDropbox tabgroup_Dropbox"> <lyte-drop-header class="crm-font-semibold lytePosFix tabgroup_DropboxHead">{{getI18n("crm.label.tabGroup")}}</lyte-drop-header> <lyte-drop-body class="tabgroup_dropBody"> <template is="for" items="{{tabGroupsName}}" item="item" index="index"><template is="if" value="{{expHandlers(item.visible,\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(item.id,\'===\',&quot;0&quot;),\'&amp;&amp;\',showAllTabs),\'||\',expHandlers(item.id,\'!==\',&quot;0&quot;)))}}"><template case="true"> <lyte-drop-item class="tabGroupDropItem" data-value="{{item.id}}" id="tabgroup_{{item.id}}" data-zcqa="tabgroup_{{item.id}}"> {{item.name}} </lyte-drop-item> </template></template></template> </lyte-drop-body> <template is="if" value="{{expHandlers(expHandlers(showTabGroupManagement,\'&amp;&amp;\',checkPermission(&quot;Crm_Implied_Customize_Zoho_CRM&quot;)),\'&amp;&amp;\',expHandlers(isFreeEdition,\'===\',false))}}"><template case="true"> <lyte-drop-footer class="lyteTabHead"> <div id="newTabGrpDiv" tabindex="1" data-zcqa="createNewTabGroup" class="dropFooterList alignLeft outLine_none" onkeydown="{{action(\'showPopup\',event,concat(getCrmBasePath(),\'/CustomizeTabGroup.do?action=createTabGroup&amp;isFrom=create\'))}}" onclick="{{action(\'showPopup\',event,concat(getCrmBasePath(),\'/CustomizeTabGroup.do?action=createTabGroup&amp;isFrom=create\'))}}"> <span>{{getI18n("crm.button.new")}} {{getI18n("crm.tabGroup")}}</span> </div> <div id="lastDiv" tabindex="1" data-zcqa="manageTabGroup" class="dropFooterList alignLeft outLine_none" onkeydown="{{action(\'showPopup\',event,concat(getCrmBasePath(),\'/CustomizeTabGroup.do?action=tabGroupList&amp;isFrom=popup\'))}}" onclick="{{action(\'showPopup\',event,concat(getCrmBasePath(),\'/CustomizeTabGroup.do?action=tabGroupList&amp;isFrom=popup\'))}}"> <span>{{getI18n(\'crm.link.manage\')}} {{getI18n("crm.label.tabGroup")}}</span> </div> </lyte-drop-footer> </template></template> </lyte-drop-box> </template> </lyte-dropdown> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,0]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]},{type:"text",position:[1,1,1,2]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,0]},{type:"text",position:[1,3,1,2]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1,1]}],_observedAttributes:["tabGroupsName","isTabClicked","isFreeEdition","tabGroupsSelectedItem","tabGroupsSelectedItemName","showTabGroupManagement","showAllTabs"],data:function(){return{tabGroupsName:Lyte.attr("array",{default:store.peekAll("tab_group")}),isTabClicked:Lyte.attr("boolean",{default:!1}),isFreeEdition:Lyte.attr("boolean",{default:!1}),tabGroupsSelectedItem:Lyte.attr("string",{default:""}),tabGroupsSelectedItemName:Lyte.attr("string",{default:""}),showTabGroupManagement:Lyte.attr("boolean",{default:!0}),showAllTabs:Lyte.attr("boolean",{default:!0})}},init:function(){if(!Crm.userDetails.IS_ADMIN&&tabInfo.showAllTabsOnlyToAdmin){store.peekAll("tab_group").filter((e=>"0"!==e.id)).length>0&&this.setData("showAllTabs",!1)}},didConnect:function(){var e=store.peekAll("tab_group").filterBy({default:!0});this.setData("tabGroupsSelectedItemName",e[0].name),this.setData("tabGroupsSelectedItem",e[0].id)},didDestroy:function(){var e=this.$node.querySelector("#tabGroupDummy").querySelector(".lyteDummyEventContainer");e&&e.removeEventListener("keydown",this.tabFocus)},tabFocus:function(e){var t=$L("#tabGroupDummy")[0];t&&t.component&&t.component.data.ltPropIsOpen&&e&&9===e.keyCode&&(e.preventDefault(),$L(".tabgroup_dropBody").find(".lyteDropdownSelection").removeClass("lyteDropdownSelection"),$L("#newTabGrpDiv").focus())},actions:{showPopup:function(e,t){var a=this.$node.querySelector("#tabGroupDummy"),o=a.querySelector(".lyteDummyEventContainer");e&&"keydown"===e.type&&13!==e.keyCode?e.shiftKey&&9===e.keyCode&&"newTabGrpDiv"===e.target.id&&(e.preventDefault(),o&&o.focus()):(o.removeEventListener("keydown",this.tabFocus),a.toggle(),document.activeElement.classList.contains("lyteDummyEventContainer")&&$L(document.activeElement).blur(),mR(t,(function(e){if(-1!=e.toString().indexOf("TABGROUPLIMITEXCEED")){var t=e.split(":")[1];alert(I18n.getMsg("crm.tabgroup.length.exceeded",t))}else{$("#topBandPopup").html(e),$('[name=CustomizeTabGroupForm] [data-zcqa="btn_tab_cancel"]').attr("onclick","hideAnimatePopup('topBandPopup');"),showAnimatePopup("topBandPopup"),thirdPartyUtils.bindSelect2($(".newSelect").find("select")),setTimeout((function(){getObj("tabGroupName")?getObj("tabGroupName").focus():$L("#tabGroupListContent").find(".primaryflatbtn").focus()}),500)}})))}},methods:{openTabGroup:function(e,t){this.setData("isTabClicked",!0),t.$node.setData("ltPropSelected",this.getData("tabGroupsSelectedItem"));var a=Crm.userDetails.LICENSE_TYPE;"N"!=a&&"L"!=a&&"F"!=a&&"X"!=a||this.setData("isFreeEdition",!0)},onTabOpen:function(){var e=this.$node.querySelector("#tabGroupDummy").querySelector(".lyteDummyEventContainer");e&&e.addEventListener("keydown",this.tabFocus)},changeTabGroup:function(e,t){store.peekAll("tab_group").filterBy({default:!0})[0].$.set("default",!1);var a=store.peekRecord("tab_group",t);a.$.set("default",!0),this.setData("tabGroupsSelectedItemName",a.name),this.setData("tabGroupsSelectedItem",a.id);var o=store.peekRecord("user",Crm.userDetails.USER_ID);if(o.$.set("default_tab_group",t),"718534139"==Crm.userDetails.ZUID){var i=new Error(Crm.userDetails.ZUID+" user save triggered in TabGroup");murphy.error(i),o.$.save().then((function(){var e=new Error(Crm.userDetails.ZUID+" user save success in TabGroup");murphy.error(e)}),(function(){var e=new Error(Crm.userDetails.ZUID+" user save failed in TabGroup");murphy.error(e)}))}else o.$.save();document.getElementsByTagName("crm-tab")[0].setData("tabModules",a.modules.sortBy("sequence_number"))},resetTabGroupManagement:function(){this.setData("showTabGroupManagement",!1),this.setData("showTabGroupManagement",!0)},beforeDropdownClose:function(e){var t=this.$node.querySelector("#tabGroupDummy").querySelector(".lyteDummyEventContainer");if(e){if("keydown"===e.type&&9===e.keyCode||"click"===e.type){if("click"===e.type||e.shiftKey&&e.target.classList.contains("lyteDummyEventContainer"))return t&&t.removeEventListener("keydown",this.tabFocus),!0;if(!e.shiftKey&&"lastDiv"===e.target.id)return $L(t).focus(),e.preventDefault(),!1;if(e.shiftKey&&"newTabGrpDiv"===e.target.id)return $L(t).focus(),$L(".tabgroup_dropBody").find('[selected="true"]').addClass("lyteDropdownSelection"),!1}if(e.type&&("Tab"===e.key||9===e.keyCode))return!1}t&&t.removeEventListener("keydown",this.tabFocus)}}}),Lyte.Component.register("crm-create-menu",{_template:'<template tag-name="crm-create-menu"> <template is="if" value="{{showUtilIcon}}"><template case="true"> <span tabindex="0" aria-label="{{getI18n(\'crm.setup.editor.createmenu\')}}" lt-prop-title="{{getI18n(\'crm.setup.editor.createmenu\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" class="lyteItem cP focusIconBox" id="createIcon" data-zcqa="createNewTpBnd" onkeydown="{{action(\'showCreateMenu\',this,event)}}"> <span class="zcicncss-createModuleTopbar zcicn-cssIcons zcicn_white_mask"></span> </span> </template></template> <lyte-menu lt-prop-yield="true" class="dN" lt-prop-show="{{lbind(showMenu)}}" lt-prop-aria="{{isAccessibilityConfigSupported}}" lt-prop-callout="true" lt-prop-event="click" lt-prop-query="#createIcon" lt-prop-freeze="false" on-before-open="{{method(\'beforeShowSubMenu\')}}" on-before-close="{{method(\'beforeCloseMenu\')}}" on-open="{{method(\'showHideSubMenu\')}}" on-menu-click="{{method(\'menuClick\')}}" lt-prop-set-css="true" id="createNew" lt-prop-wrapper-class="crmMenuQuickLink create-menu-nextGen" on-close="{{method(\'onMenuClose\')}}" lt-prop-offset="{&quot;bottom&quot;:20}" lt-prop-position="{{if(isNextGenUIEnabled,&quot;upRight&quot;,&quot;down&quot;)}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="leftMenuCreateSubMenu"> <lyte-menu-group> <template is="for" items="{{modules}}" item="module" index="index"><template is="if" value="{{expHandlers(expHandlers(expHandlers(module.quick_create,\'&amp;&amp;\',expHandlers(module.module_name,\'!==\',&quot;Activities&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(module.visibility,\'&amp;\',2),\'||\',expHandlers(module.visibility,\'&amp;\',4)),\'!\')),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(expHandlers(module.access_type,\'===\',\'team_based\'),\'&amp;&amp;\',module.private_profile),\'&amp;&amp;\',expHandlers(module.private_profile.name,\'===\',\'Requesters\')),\'!\'))}}"><template case="true"> <template is="if" value="{{expHandlers(module.module_name,\'===\',\'Calls\')}}"><template case="true"> <lyte-menu-item tabindex="0" id="submenu_{{module.module_name}}" aria-haspopup="listbox" aria-controls="#manualCallListPopover" data-zcqa1="{{module[\'singular_label\']}}" data-zcqa="dash_submenu_{{module.module_name}}" data-value="{{module[\'module_name\']}}"> <span class="mR9">+</span> {{module[\'singular_label\']}} </lyte-menu-item> </template><template case="false"><template is="if" value="{{expHandlers(module.module_name,\'===\',&quot;CustomModule5009&quot;)}}"><template case="true"> <lyte-menu-item id="submenu_{{module.module_name}}" data-zcqa1="{{module[\'singular_label\']}}" data-zcqa="dash_submenu_{{module.module_name}}" data-value="{{module[\'module_name\']}}"> <span class="mR9">+</span> {{subscriptionModule}} </lyte-menu-item> </template><template case="false"> <lyte-menu-item id="submenu_{{module.module_name}}" data-zcqa1="{{module[\'singular_label\']}}" data-zcqa="dash_submenu_{{module.module_name}}" data-value="{{module[\'module_name\']}}"> <span class="mR9">+</span> {{module[\'singular_label\']}} </lyte-menu-item> </template></template></template></template> </template></template></template> </lyte-menu-group> <template is="if" value="{{expHandlers(zbmodule.length,\'>\',0)}}"><template case="true"> <lyte-menu-group> <lyte-menu-header class="m0 cbCreateView pL10 crm-base-font-size crmLabelColor"> {{getModuleLabel("Zoho Finance")}} </lyte-menu-header> <template is="for" items="{{zbmodule}}" item="module" index="index"> <lyte-menu-item id="submenu_{{module.module_name}}" data-zcqa1="{{module[\'singular_label\']}}" data-zcqa="dash_submenu_{{module.module_name}}" data-value="{{module[\'module_name\']}}"> <span class="mR9">+</span> {{module[\'singular_label\']}} </lyte-menu-item> </template> </lyte-menu-group> </template></template><template is="if" value="{{expHandlers(zemodule.length,\'>\',0)}}"><template case="true"> <lyte-menu-group> <lyte-menu-header class="m0 cbCreateView pL10 crm-base-font-size crmLabelColor"> {{getModuleLabel("Zoho Expense")}} </lyte-menu-header> <template is="for" items="{{zemodule}}" item="module" index="index"> <lyte-menu-item id="submenu_{{module.module_name}}" data-zcqa1="{{module[\'singular_label\']}}" data-zcqa="dash_submenu_{{module.module_name}}" data-value="{{module[\'module_name\']}}"> <span class="mR9">+</span> {{module[\'singular_label\']}} </lyte-menu-item> </template> </lyte-menu-group> </template></template> </lyte-menu-body> </template> </lyte-menu> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,4]},{type:"if",position:[1,4],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["modules","zemodule","zbmodule","showMenu","showUtilIcon","isNextGenUIEnabled","isTeamspaceEnabled","isAccessibilityConfigSupported","quickCreateEnabled"],data:function(){return{modules:Lyte.attr("array",{default:[]}),zemodule:Lyte.attr("array",{default:[]}),zbmodule:Lyte.attr("array",{default:[]}),showMenu:Lyte.attr("boolean",{default:!1}),showUtilIcon:Lyte.attr("boolean",{default:!0}),isNextGenUIEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof featuresAvailable&&!!featuresAvailable.NEXTGENUI_ENABLED}),isTeamspaceEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof featuresAvailable&&!!featuresAvailable.TEAMSPACE_ENABLED}),isAccessibilityConfigSupported:Lyte.attr("boolean",{default:Crm.userDetails.isAccessibilityConfigSupported&&!featuresAvailable.NEXTGENUI_ENABLED}),quickCreateEnabled:Lyte.attr("boolean",{default:!0})}},init:function(){},methods:{beforeShowSubMenu:function(){if(!this.getData("quickCreateEnabled"))return!1;if(Crm.userDetails.isStorageLimitReached)return Crm.showStorageExceedPopup(),!1;store.peekRecord("user",Crm.userDetails.USER_ID).profile.id;var e=[];if(this.getData("isNextGenUIEnabled")&&this.getData("isTeamspaceEnabled")){var t=$L("crm-left-menu-teamspace")[0];t&&(e=t.component.getData("tabModules"))}else e=store.peekAll("module");var a=[],o=[],i=[];for(var n=0;n<e.length;n++)if(this.getData("isNextGenUIEnabled")&&this.getData("isTeamspaceEnabled"))if(moduleRecordMapping["Zoho Books"]&&e[n].api_name===moduleRecordMapping["Zoho Books"].api_name||moduleRecordMapping["Zoho Expense"]&&e[n].api_name===moduleRecordMapping["Zoho Expense"].api_name)for(var s=e[n].child_module?e[n].child_module:[],r=s.length,l=0;l<r;l++){var p=s[l];moduleRecordMapping["Zoho Books"]&&e[n].api_name===moduleRecordMapping["Zoho Books"].api_name&&crmTab.isZBCustomModule(p.api_name)?a.push(p):crmTab.isZExpenseSubModule(p.api_name)&&o.push(p)}else i.push(e[n]);else{if("CustomModule5010"===e[n].module_name)continue;if(crmTab.isZBCustomModule(e[n].api_name))a.push(e[n]);else if(crmTab.isZExpenseSubModule(e[n].api_name))o.push(e[n]);else{if("CustomModule5009"===e[n].module_name){var c=e[n].singular_label;this.setData("subscriptionModule",c)}i.push(e[n])}}this.setData("zbmodule",a),this.setData("zemodule",o),this.setData("modules",i)},menuClick:function(e,t,a,o,i){var n=moduleRecordMapping[e];if(Crm.client_tracking("Global Create Button Click",{Module:n.module_name}),"Events"===n.module_name)Events.globalCreate(t,"quickcreate");else if("Calls"===n.module_name)qCreateCall.createQCForm(t,"quickcreate");else if("Tasks"===n.module_name&&Lyte.Component.registeredHelpers.isActivitySplitNotDone()){if(Lyte.Component.registeredHelpers.getUserDetail("TaskPopup"))crmRelatedList.relTaskCreate(a);else Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:["Activities"],queryParams:{sub_module:n.module_name}}).data={refreshPage:!0},this.setData("showMenu",!1)}else if("Appointments"===n.module_name)Events.globalCreate(t,"listview","Appointments");else if("Tasks"===n.module_name&&Lyte.Component.registeredHelpers.getUserDetail("TaskPopup")){var s=networkUtils.returnDependencyFiles(["crm-lyte-editor-pannel.js","crm-richtext-resources.js","lyte-colorpicker.js"],ResourceConstants.CRMClient);s=(s=s.concat(networkUtils.returnDependencyFiles(["crm-richtext-resources-less.css","lyte-ui-editor.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT))).concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("richtext")],ResourceConstants.CRM)),Lyte.resolvePromises({filesResolved:Lyte.injectResources(s)}).then((function(){crmRelatedList.relTaskCreate(a)}))}else{Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:[n.module_name],queryParams:{sub_module:n.module_name}}).data={refreshPage:!0},this.setData("showMenu",!1)}"Calls"===n.module_name&&(this.preventClose=!0),t.clientX||(this.hideClickMenu=!0);var r=!!i.element.firstElementChild.getAttribute("lt-prop-route");if(featuresAvailable.NEXTGENUI_ENABLED&&r){var l=document.querySelector("crm-left-menu").component;"modules"!==l.getData("selectedMenu")&&($L(".ts-lftmnu-modules").empty(),l.executeMethod("showModules"))}},showHideSubMenu:function(){var e=arguments[0].component.menuBody.getBoundingClientRect().height,t=$("#wmstoolbar").outerHeight();if(e>=window.height-t&&(arguments[0].component.menuBody.style.height=e-t-10+"px"),Activities.RemainderHideOnly(),$("#conditionalFieldRightSection").length&&(Crm.userDetails.RTL_ENABLED?$("#conditionalFieldRightSection").css("left","-650px"):$("#conditionalFieldRightSection").css("right","-650px")),$("#validationRuleRightSection").length&&$("#validationRuleRightSection").hide(),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation()),featuresAvailable.NEXTGENUI_ENABLED){var a=document.querySelector("crm-left-menu").component;a.actions.updateNavActiveClassForBottomMenu("leftPaneCreateMenus",!0),a.executeMethod("closeBottomMenu")}},beforeCloseMenu:function(){return!this.preventClose||(delete this.preventClose,!1)},onMenuClose:function(){featuresAvailable.NEXTGENUI_ENABLED&&document.querySelector("crm-left-menu").component.actions.updateNavActiveClassForBottomMenu("leftPaneCreateMenus",!1)}},actions:{showCreateMenu:function(e,t){t&&(13!==t.keyCode&&40!==t.keyCode||this.hideClickMenu?9===t.keyCode&&(delete this.preventClose,this.setData("showMenu",!1)):(this.setData("showMenu",!0),t.preventDefault())),(e=this.$node.querySelector(".lyteMenuSelected"))&&e.classList.remove("lyteMenuSelected"),delete this.hideClickMenu}},didConnect:function(){var e=$(window),t=$(".lyteMenuSettings #createNew"),a=$L("#wmstoolbar"),o=a&&a.length>0?a.outerHeight():0,i=renderingUtils.tabLayerOuterHeight(),n=renderingUtils.windowHeight;Crm.userDetails.RTL_ENABLED?($("#createsubmenu").css("left",t.offset().left-0),$("#createsubmenu .SocialArrow").css({left:"52px",right:"auto"})):($("#createsubmenu").css("right",e.width()+e.scrollLeft()-(t.offset().left+t.outerWidth())-16.5),$("#createsubmenu .SocialArrow").css({left:"auto",right:"15px"})),$("#createsubmenu .boxShadowMask").css("max-height",n-(i+20+o)-70),$("#createsubmenu .boxShadowMask").addClass("oH pR"),getObj("createsubmenu").style.display="block",thirdPartyUtils.bindPerfectScroll("#createsubmenu .boxShadowMask",{wheelSpeed:1,preventOnEnd:!0,preventHorizontal:!1})}}),Lyte.Component.registerHelper("isActivitySplitNotDone",(function(){return!Crm.isActivitySplitDone})),Lyte.Component.register("crm-profile-menu",{_template:'<template tag-name="crm-profile-menu"> <div lt-prop-title="{{if(isNextGenUIEnabled,&quot;&quot;,getI18n(&quot;crm.profilemenu.profile&quot;))}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" aria-label="{{getI18n(&quot;crm.profilemenu.profile&quot;)}}" id="dropclk" class="dIB cP lyteItem pR focusIconBox" data-zcqa="profilePicture" onclick="{{action(\'openProfilePage\',event)}}" tabindex="{{if(isNextGenUIEnabled,expHandlers(1,\'-\'),0)}}"> <template is="if" value="{{showBlink}}"><template case="true"> <span class="upgradearrow"></span> </template></template> <template is="if" value="{{expHandlers(getUserDetail(\'CLIENT_ACCOUNT\'),\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(ifEquals(zuid,&quot;&quot;),\'!\')}}"><template case="true"> <img id="topdivuserphoto_{{getUserDetail(\'USER_ID\')}}" src="{{srcUrl}}" class="dIB prfImg vaT"> </template><template case="false"> <img class="dIB prfImg vaT mT2 borderNone" src="{{getCrmImageUrl(\'nophoto.png\')}}"> </template></template> </template><template case="false"> <img id="topdivuserphoto_{{getUserDetail(\'USER_ID\')}}" src="{{clientImageSrcURL}}" class="dIB prfImg"> </template></template> <span id="acntIcn" class="acnt-dropIcon dN"></span> </div> <template is="if" value="{{switchNewUILoader}}"><template case="true"> <div class="flexAlignCenter flexDC jcCenter w100_per h100_per pFixed switch-newui-loader"> <img class="switch-newui-loader-gif mB40" src="{{getCrmImageUrl(\'CRM_Logo_Dark_sml.gif\')}}" alt="photo"> <span class="flexAlignCenter jcCenter crmWhiteColor aiCenter dIB crm-small-font-size">{{getI18n(\'crm.new.ui.navigate.info\')}}</span> </div> </template></template> <template is="if" value="{{getUserDetail(\'CLIENT_ACCOUNT\')}}"><template case="true"> <lyte-menu lt-prop-yield="true" lt-prop-aria="{{isAccessibilityConfigSupported}}" lt-prop-id="profileMenuId" lt-prop-show="{{lbind(showPortalmenu)}}" lt-prop-query-class="settinsDropDown" lt-prop-event="click" lt-prop-query="#dropclk" on-before-open="{{method(\'showHideProfile\')}}" on-before-close="{{method(\'beforeCloseProfileMenu\')}}" on-menu-click="{{method(\'portalMenu\')}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="{{if(getUserDetail(\'CLIENT_ACCOUNT\'),\'borderNone\',\'\')}}"> <lyte-menu-item data-value="preferences"> <lyte-menu-label>{{getI18n(\'custmr.prtl.portal.user.preferences\')}}</lyte-menu-label> </lyte-menu-item> <lyte-menu-item data-zcqa="signOut" data-value="logout"> <lyte-menu-label>{{getI18n(\'custmr.prtl.usr.logout\')}}</lyte-menu-label> </lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> </template></template> <lyte-modal id="profilePagePop" lt-prop-width="401px" t-prop-close-on-escape=" {{if(expHandlers(expHandlers(showMultiOrgs,\'||\',showResources),\'||\',showUserIdPop),\'false\',\'true\')}}" lt-prop-overlay-close="true" lt-prop-height="100%" lt-prop-allow-multiple="{{allowMultipleProp}}" lt-prop-max-height="100%" lt-prop-re-render-modal="true" lt-prop-transition="{{profileMenuTransition}}" lt-prop-offset="{{profileMenuOffset}}" lt-prop-wrapper-class="crm-profile-popup crmBoxModal {{if(isNextGenUIEnabled,\'crm-profile-leftpopup\',\'\')}} {{if(switchNewUILoader,\'profileSwitchNewUI\',\'\')}}" lt-prop-show="{{lbind(showProfilePage)}}" on-before-close="{{method(&quot;closeProfilePop&quot;)}}" on-show="{{method(&quot;showProfilePage&quot;)}}" on-before-show="{{method(&quot;beforeShowProfilePage&quot;)}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="p0 headerProfileDiv"> <template is="if" value="{{expHandlers(isNextGenUIOnboardingEnabled,\'&amp;&amp;\',expHandlers(isNextGenUIEnabledForOrg,\'!\'))}}"><template case="true"> <lyte-button class="switch-version" data-zcqa="{{if(isNextGenUIEnabled,\'newui_onboarding_switcholdui\',\'newui_onboarding_switchnewui\')}}" lt-prop-class="switch-version-btn" onclick="{{action(\'enableOrDisableNewUI\')}}"> <template is="registerYield" yield-name="text"> <template is="if" value="{{isNextGenUIEnabled}}"><template case="true"> <span class="crm-base-font-size">{{getI18n(\'crm.left.menu.switch.old.version\')}}</span> <crmutil-icon icon-name="multi-star" icon-class="zcicn-multi-star iconWhite "></crmutil-icon> </template><template case="false"> <span>{{getI18n(\'crm.left.menu.switch.new.version\')}}</span> <crmutil-icon icon-name="multi-star" icon-class="zcicn-multi-star zcicn_ffb978 "></crmutil-icon> </template></template> </template> </lyte-button> </template></template> <div class="profile_acct_bg {{if(isNextGenUIOnboardingEnabled,\'\',\'noSwitchVersionBtn\')}}"> <div class="{{if(isNextGenUIEnabled,\'dF account-img aiCenter\',\'dB pB25 pT35 aligncenter\')}} mAuto"> <template is="if" value="{{expHandlers(getUserDetail(\'CLIENT_ACCOUNT\'),\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(ifEquals(zuid,&quot;&quot;),\'!\')}}"><template case="true"> <img id="profilepageuserphoto_{{getUserDetail(\'USER_ID\')}}" alt="Profile Pic" src="{{srcUrl}}" class="vaT aligncenter profile_pic"> </template><template case="false"> <img class="vaT aligncenter profile_pic mT2" src="{{getCrmImageUrl(\'nophoto.png\')}}" alt="Profile Pic"> </template></template></template></template> <div class="account-info {{if(isNextGenUIEnabled,\'dF flexDC\',\'\')}}"> <div> <link-to id="personalSettings" class="cP crm-font-bold dIB mB3 {{if(isNextGenUIEnabled,\'mT0\',\'mT15\')}} profile_username" lt-prop-class="profile_username focusMenuContent" data-zcqa="general_accountInfo" lt-prop-route="crm.settings.section.personal-settings" onclick="{{action(\'personalSettings\',event)}}" onkeydown="{{action(\'personalSettings\',event)}}"> <span>{{displayName}}</span> </link-to> </div> <div class="{{if(isNextGenUIEnabled,\'dIF\',\'\')}}"> <span tabindex="0" class="{{if(isNextGenUIEnabled,\'dIF aiCenter lh24\',\'dIB pB5\')}} profile_userid crm-font-regular focusMenuContent" onkeydown="{{action(\'openInfoUserId\',event)}}"> <span> {{concat(getI18n(\'User Id\'),":")}} {{zuid}} </span> <i role="alertdialog" aria-menu="true" class="dIB cP infoUserId {{if(isNextGenUIEnabled,\'mL5\',\'mT4\')}}" data-zcqa="profilePicture_userId" id="infoUserId" lyte-hovercard="true"><crmutil-icon onmouseenter="{{action(\'openInfoUserId\',event)}}" onmouseleave="{{action(\'openInfoUserId\',event)}}" icon-name="help" icon-class="zcicn-help iconWhite vaT" class="dIB vaT"></crmutil-icon></i> </span> </div> <div> <template is="if" value="{{showOrgChange}}"><template case="true"> <lyte-dropdown lt-prop-tabindex="0" id="orgDropdown" lt-prop-id="profile_organization" data-zcqa="profilePicture_orgName" lt-prop-class="focusOrgContent" lt-prop-selected="{{undefinedVal}}" lt-prop-aria="{{isAccessibilityConfigSupported}}" lt-prop-yield="true" lt-prop-is-open="{{lbind(showMultiOrgs)}}" lt-prop-freeze="false" on-before-hide="{{method(\'closeMultiOrgPop\')}}" on-show="{{method(\'onShowMultiOrg\')}}" before-select="{{method(\'orgMenuClick\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="{{if(isNextGenUIEnabled,\'alignLeft\',\'\')}}"> <span class="profile_organization dIF {{if(showMultiOrgs,\'activePopover\',\' \'))}} {{if(showOrgChange,\'cP\',\' \')}}"> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(isSandboxAcc,\'===\',&quot;true&quot;)}}"><template case="true"> <span class="overTxt_flow vaM crm-font-regular org_Text" id="sandboxNameLabel">{{concat(getI18n(\'crm.sandbox.rule.name\'),":")}}</span> </template></template> <span class="overTxt_flow vaM crm-font-regular lh18 org_Text" id="orgNameDisplay">{{orgNameOrSandboxName}}</span> </template><template case="false"> <span class="overTxt_flow crm-font-regular lh18 org_Text dIF aiCenter" id="orgNameDisplay"> <template is="if" value="{{expHandlers(isSandboxAcc,\'===\',&quot;true&quot;)}}"><template case="true"> <span class="mR3" id="sandboxNameLabel">{{concat(getI18n(\'crm.sandbox.rule.name\'),":")}}</span> </template></template> <lyte-text class="crm-font-regular lh18 org_Text" lt-prop-value="{{orgNameOrSandboxName}}" lt-prop-tooltip-config="{ &quot;position&quot; : &quot;bottom&quot; }"> </lyte-text> </span> </template></template> <i class="mT1 mL5 w10"><span class="arrowSolid dIB"></span></i> </span> </lyte-drop-button> <lyte-drop-box id="profile_organization_popover" class="manage_orgpopover {{if(isNextGenUIEnabled,\'manage_orgpopover_nextgen\',\'\')}}" data-zcqa="orgProfileMenu"> <lyte-drop-body id="profile_organization_ddbody"> <template is="for" items="{{organizations}}" item="org" index="index"> <lyte-drop-item class="toClip aiCenter cP pL30 pR10 pT7 pB7 org_options pR {{if(isCurrentOrg(org.id),\'selectedOrgItem\',\'\')}}" id="Org{{index}}" data-zcqa="orgProfileMenu_org_{{org.id}}" data-value="{{index}}"> <div class="aiCenter dIF"> <span class="crm-font-bold aligncenter mR10 vaM dIB org_logo_img green_bg">{{getOrgCode(org.name,org.id)}}</span> <span class="dIF profile_org_cont"> <span class="crm-font-bold org_logo_txt vaM"><lyte-text lt-prop-value="{{getOrgName(org.name,org.id)}}" lt-prop-tooltip-config="{ &quot;position&quot; : &quot;bottom&quot; }"> </lyte-text></span> <span class="crm-small-font-size crmLabelColor mT2 vaM">{{getI18n(\'crm.profile.orgid\')}}<span class="profile_org_id">{{org.id}}</span> <span class="dIB mL8 vH profile_copy_wrap"> <crmutil-icon icon-name="copy-clip" icon-class="zcicn-copy-clip" lt-prop-title="{{getI18n(\'crm.profile.menu.copyorgidtooltip\')}}" class="op6 profile_org_copy" onclick="{{action(\'copyOrgId\',org.id)}}" data-zcqa="copy_orgid_{{org.id}}"></crmutil-icon> </span> </span> </span> </div> <span class="svgIcons dIB vaM {{if(isCurrentOrg(org.id),\'\',\'vH\')}} pA ico-tick-small currentOrg_tick" data-zcqa="profilePicture_currentOrg"></span> </lyte-drop-item> </template> </lyte-drop-body> <lyte-drop-footer class="alignLeft profile_org_footer pT10 pR25 pL25 pB10"> <template is="if" value="{{showManageOrgs}}"><template case="true"> <span id="manageOrgs" tabindex="0" class="crmLinkColor cP dIB manage_link vaM" data-zcqa="orgProfileMenu_manage" onkeydown="{{action(\'orgManage\',event)}}" onclick="{{action(\'orgManage\',event)}}">{{getI18n(\'crm.link.manageorganization\')}}</span> </template></template> <template is="if" value="{{expHandlers(invitationCount,\'>\',1)}}"><template case="true"> <span class="dIB pR10 crmNotFoundColor pR invitation_txt vaM" data-zcqa="orgProfileMenu_invitation">{{invitationCount}} {{getI18n(\'crm.profile.pic.pendInv.multiple\')}}</span> </template><template case="false"><template is="if" value="{{expHandlers(invitationCount,\'==\',1)}}"><template case="true"> <span class="dIB pR10 crmNotFoundColor pR invitation_txt vaM" data-zcqa="orgProfileMenu_invitation">{{invitationCount}} {{getI18n(\'crm.profile.pic.pendInv.one\')}}</span> </template></template></template></template> </lyte-drop-footer> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <span class="profile_organization dIF {{if(showMultiOrgs,\'activePopover\',\' \')}} {{if(showOrgChange,\'cP\',\' \')}}" data-zcqa="profilePicture_orgName"> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(isSandboxAcc,\'===\',&quot;true&quot;)}}"><template case="true"> <span class="overTxt_flow vaM crm-font-regular org_Text" id="sandboxNameLabel">{{concat(getI18n(\'crm.sandbox.rule.name\'),":")}}</span> </template></template> <span class="overTxt_flow vaM crm-font-regular lh18 org_Text" id="orgNameDisplay">{{orgNameOrSandboxName}}</span> </template><template case="false"> <span class="overTxt_flow crm-font-regular lh18 org_Text dIF aiCenter" id="orgNameDisplay"> <template is="if" value="{{expHandlers(isSandboxAcc,\'===\',&quot;true&quot;)}}"><template case="true"> <span class="mR3" id="sandboxNameLabel">{{concat(getI18n(\'crm.sandbox.rule.name\'),":")}}</span> </template></template> <lyte-text class="crm-font-regular lh18 org_Text" lt-prop-value="{{orgNameOrSandboxName}}" lt-prop-tooltip-config="{ &quot;position&quot; : &quot;bottom&quot; }"> </lyte-text> </span> </template></template> </span> </template></template> </div> </div> </div> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'!\')}}"><template case="true"> <div class="clearfix"> <lyte-button lt-prop-id="profile_menu_myacc" class="profile-btn w50_per fL myzohoacct_btn mR0" data-zcqa="profilePicture_myAccount" lt-prop-class="button_cl focusMenuContent" onclick="{{action(\'myAccount\',event)}}"> <template is="registerYield" yield-name="text"> <span>{{getI18n("crm.label.my.account")}}</span> </template> </lyte-button> <lyte-button class="profile-btn w50_per fL mR0" data-zcqa="profilePicture_signOut" lt-prop-class="button_cl focusMenuContent" onclick="{{action(\'logout\')}}"> <template is="registerYield" yield-name="text"> <span>{{getI18n("crm.topmenu.logout")}}</span> </template> </lyte-button> </div> </template></template> </div> <template is="if" value="{{isNextGenUIEnabled}}"><template case="true"> <div class="subscription-upgrade mAuto br12 pA dF flexDC {{if(isNextGenUIOnboardingEnabled,\'\',\'noSwitchVersionBtn\')}}"> <template is="if" value="{{expHandlers(expHandlers(notPbxVendor,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isPaidLicense,\'||\',expHandlers(isFreeEdtionWithAddon,\'===\',&quot;true&quot;)))}}"><template case="true"> <div class="dIF mT6 lh18 trail-btn-std p6 pT7 br8 mB5 wbBreakWord"> <crmutil-icon class="trail-plan-std mR4 h18 aiCenter" icon-name="tick-rounded" icon-class="zcicn-tick-rounded zcicn16"></crmutil-icon> <span class="crm-small-font-size paidSubsTxt crm-font-regular" data-zcqa="profilePicture_licenseName">{{getI18n("crm.left.menu.profile.paid.subscription",actualLicName)}}</span> </div> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(isTrialEnable,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <div class="dIF mT6 lh18 trail-btn-{{trialIconStyle}} p6 pT7 br8 mB5 wbBreakWord"> <span class="dIB zcicncss-clock zcicn-cssIcons expiry-icon mR6 {{if(ifEquals(expiryDays,\'1\'),\'zcicn_darkRed_mask\',\'zcicn_grey_mask\')}}"></span> <span class="crm-small-font-size paidSubsTxt crm-font-regular">{{getI18n(\'crm.left.menu.your.trail.plan\')}} <span class="crm-font-bold">{{getI18n(\'crm.left.menu.profile.trial.expiry.msg\',expiryDays)}}</span></span> </div> </template></template> </template></template> <div class="dF spaceBetween maxW100per"> <div class="crm-font-regular cDefault dF flexDC flexOne maxW100per"> <div class="dIF aiCenter spaceBetween m8 mT5 mB8"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(isTrialEnable,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <span class="crm-base-font-size crmLabelColor dIB mR5 maxW50per flexOne p5 pR0 pL0">{{getI18n(\'crm.left.menu.current.trail.plan\')}}</span> </template><template case="false"> <span class="crm-base-font-size crmLabelColor dIB mR5 maxW50per flexOne p5 pR0 pL0">{{getI18n(\'crm.left.menu.current.plan\')}}</span> </template></template> <template is="if" value="{{expHandlers(expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isTryOtherEditionNeeded,\'&amp;&amp;\',expHandlers(isMultipleTrialProvisionDisabled,\'===\',&quot;null&quot;)),\'&amp;&amp;\',expHandlers(isAdminProfileUser,\'===\',true)),\'&amp;&amp;\',expHandlers(notPbxVendor,\'===\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(isTrialEnable,\'===\',&quot;false&quot;),\'||\',expHandlers(expHandlers(isFreeEdition,\'===\',true),\'&amp;&amp;\',expHandlers(trialCount,\'<=\',1))))}}"><template case="true"> <span class="maxW50per dIF flexOne jcFlextEnd"> <span class="cP crmLabelColor crm-base-font-size tryother-edition" data-zcqa="profilePicture_tryOtherEdition" onclick="{{action(\'tryOtherEdition\')}}"> {{getI18n("crm.evaluate4")}} </span> </span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(isAdminProfileUser,\'===\',true),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(isPaidUser,\'===\',true),\'||\',expHandlers(trialCount,\'>\',1)),\'||\',expHandlers(firstTimeTrialFromSetup,\'===\',&quot;true&quot;)))}}"><template case="true"> <span class="maxW50per dIF flexOne jcFlextEnd"> <span class="cP crmLabelColor crm-base-font-size tryother-edition" data-zcqa="profilePicture_switchBack" onclick="{{action(\'switchBack\')}}"> {{getI18n("crm.trial.switch.back",actualLicName)}} </span> </span> </template></template></template></template> </template></template> </div> <div class="dF spaceBetween aiCenter m8 mT0"> <div class="dIF aiCenter lh18 flexOne"> <span class="trail-banner-{{trialIconStyle}} profile-edition-icon flexAlignCenter jcCenter br50per mR6"> <crmutil-icon class="trail-plan-{{trialIconStyle}} prfedition-icnclr" icon-name="{{trialIcon}}" icon-class="zcicn-{{trialIcon}} zcicn16"></crmutil-icon> </span> <div class="dIF flexDC wbBreakWord mR5"> <span class="crm-subheading-font-size crm-font-semibold">{{editionName}} {{getI18n(\'crm.label.edition\')}}</span> </div> </div> <template is="if" value="{{expHandlers(expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(isPaidUser,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(licenseType,\'!==\',&quot;N&quot;),\'||\',expHandlers(licenseType,\'!==\',&quot;L&quot;)),\'||\',expHandlers(licenseType,\'!==\',&quot;F&quot;)))}}"><template case="true"> <div class="flexAlignCenter jcFlextEnd"> <lyte-button lt-prop-type="button" lt-prop-class="outlineprimary" lt-prop-size="small"> <template is="registerYield" yield-name="text"> <span id="manageSubscriptionProfileTab" rel="noopener" data-zcqa="profilePicture_upgrade" onclick="{{action(\'manageSubscriptionUrl\')}}">{{getI18n(\'crm.store.upgrade.caps\')}}</span> </template> </lyte-button> </div> </template></template></template></template> <template is="if" value="{{expHandlers(expHandlers(isAdminProfileUser,\'===\',true),\'&amp;&amp;\',expHandlers(rebrandProperty(\'OnlineStoreAvailable\'),\'===\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(zorgHasPermission,\'===\',&quot;true&quot;),\'||\',expHandlers(zohoBundleOrgHasPermission,\'===\',&quot;true&quot;)),\'||\',expHandlers(expHandlers(notPbxVendor,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(expHandlers(isFreeEdition,\'===\',false),\'||\',expHandlers(isFreeEdtionWithAddon,\'===\',&quot;true&quot;))))}}"><template case="true"> <div class="flexAlignCenter jcFlextEnd flexOne"> <lyte-button lt-prop-type="button" lt-prop-class="outlineprimary" data-zcqa="profilePicture_manageSub" onclick="{{action(\'manageSubcription\')}}"> <template is="registerYield" yield-name="text"> <span class="crm-base-font-size subscription-manage crmLinkColor cP">{{getI18n(\'crm.yourplan\')}}</span> </template> </lyte-button> </div> </template></template></template></template> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(notPbxVendor,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isPaidLicense,\'||\',expHandlers(isFreeEdtionWithAddon,\'===\',&quot;true&quot;))),\'&amp;&amp;\',expHandlers(isTrialEnable,\'===\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <div class="dIF mT6 lh18 trail-btn-{{trialIconStyle}} p6 pT7 br8 mB5 wbBreakWord"> <span class="dIB zcicncss-clock zcicn-cssIcons expiry-icon mR6 {{if(ifEquals(expiryDays,\'1\'),\'zcicn_darkRed_mask\',\'zcicn_grey_mask\')}}"></span> <span class="crm-small-font-size crmLabelColor crm-font-regular">{{getI18n(\'crm.left.menu.your.trail.plan\')}} <span class="crm-font-bold">{{getI18n(\'crm.left.menu.profile.trial.expiry.msg\',expiryDays)}}</span></span> </div> </template></template> </div> </div> </div> </template></template> </lyte-modal-header> <lyte-modal-content class="p0 profile_body_bg pR contentProfileDiv" voice-attribute-label="scroll - profile content"> <div class="{{if(isNextGenUIEnabled,\'pL20 pR20 lftprof-mnu-content\',\'pL30 pR30\')}}"> <div class="{{if(expHandlers(isNextGenUIEnabled,\'!\'),\'profile_subscription pT25 clearfix\',\'\')}}"> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'!\')}}"><template case="true"> <div class="clearfix profile_subscription_header"> <span class="crm-font-bold {{if(isNextGenUIEnabled,\'\',\'ttUppercase\')}} vaM profile_subscription_header_txt pR">{{getI18n("crm.subscription.zoho")}}</span> <template is="if" value="{{expHandlers(expHandlers(notPbxVendor,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isPaidLicense,\'||\',expHandlers(isFreeEdtionWithAddon,\'===\',&quot;true&quot;)))}}"><template case="true"> <span class="ttUppercase vaM subscription_text crm-small-font-size mL8" data-zcqa="profilePicture_licenseName">{{actualLicName}}</span> </template></template> </div> <div class="cBoth pT15"> <template is="if" value="{{expHandlers(expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(isAdminProfileUser,\'===\',true),\'&amp;&amp;\',expHandlers(rebrandProperty(\'OnlineStoreAvailable\'),\'===\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(zorgHasPermission,\'===\',&quot;true&quot;),\'||\',expHandlers(zohoBundleOrgHasPermission,\'===\',&quot;true&quot;)),\'||\',expHandlers(expHandlers(notPbxVendor,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(expHandlers(isFreeEdition,\'===\',false),\'||\',expHandlers(isFreeEdtionWithAddon,\'===\',&quot;true&quot;))))}}"><template case="true"> <div class="dB"> <span tabindex="0" role="link" aria-label="{{getI18n(&quot;crm.permission.manage.subscription&quot;)}}" class="dIB mB15 cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_manageSub" onkeydown="{{action(\'manageSubcription\',event)}}" onclick="{{action(\'manageSubcription\',event)}}"> <span>{{getI18n("crm.permission.manage.subscription")}}</span> </span> </div> </template></template> </template></template><template is="if" value="{{expHandlers(isTrialEnable,\'===\',&quot;true&quot;)}}"><template case="true"> <div class="dB clearAfterB"> <span class="dIB mB15 profile_body_txt fL crmUpgrade_maxWidStyle" data-zcqa="profilePicture_trialInfo"> <template is="if" value="{{expHandlers(isJiveSignup,\'===\',&quot;true&quot;)}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(isZohoOneUser,\'===\',&quot;true&quot;),\'||\',expHandlers(isCrmPlusUser,\'===\',&quot;true&quot;))}}"><template case="true"><template is="if" value="{{zorgResult}}"><template case="true"> {{unescape(getI18n("crm.subscription.info.new",editionName,zorgResult))}} </template><template case="false"><template is="if" value="{{zohoBundleOrgResult}}"><template case="true"> {{unescape(getI18n("crm.subscription.info.new",editionName,zohoBundleOrgResult))}} </template></template></template></template></template><template case="false"> {{unescape(getI18n("crm.subscription.info.new",editionName,elseResult))}} </template></template></template><template case="false"><template is="if" value="{{expHandlers(expHandlers(isZohoOneUser,\'===\',&quot;true&quot;),\'||\',expHandlers(isCrmPlusUser,\'===\',&quot;true&quot;))}}"><template case="true"><template is="if" value="{{zorgResult}}"><template case="true"> {{unescape(getI18n("crm.trial.info.new",editionName,zorgResult))}} </template><template case="false"><template is="if" value="{{zohoBundleOrgResult}}"><template case="true"> {{unescape(getI18n("crm.trial.info.new",editionName,zohoBundleOrgResult))}} </template></template></template></template></template><template case="false"> {{unescape(getI18n("crm.trial.info.new",editionName,elseResult))}} </template></template></template></template> </span> <template is="if" value="{{expHandlers(expHandlers(isPaidUser,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(licType,\'!==\',&quot;N&quot;),\'||\',expHandlers(licType,\'!==\',&quot;L&quot;)),\'||\',expHandlers(licType,\'!==\',&quot;F&quot;)))}}"><template case="true"> <span tabindex="0" role="link" aria-label="{{getI18n(\'crm.store.upgrade.caps\')}}" id="manageSubscriptionProfileTab" class="crmLinkColor cP tdUnderline crm-small-font-size crm-font-bold mL5 fL lh20 focusMenuContent" rel="noopener" data-zcqa="profilePicture_upgrade" onkeydown="{{action(\'manageSubscriptionUrl\',event)}}" onclick="{{action(\'manageSubscriptionUrl\')}}"> <span>{{getI18n(\'crm.store.upgrade.caps\')}}</span> </span> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(isAdminProfileUser,\'===\',true),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(isPaidUser,\'===\',true),\'||\',expHandlers(trialCount,\'>\',1)),\'||\',expHandlers(firstTimeTrialFromSetup,\'===\',&quot;true&quot;)))}}"><template case="true"> <div class="dB"> <span tabindex="0" class="dIB mB15 cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_switchBack" onkeydown="{{action(\'switchBack\',event)}}" onclick="{{action(\'switchBack\')}}"> <span>{{getI18n("crm.trial.switch.back",actualLicName)}}</span> </span> </div> </template></template> </template></template> <template is="if" value="{{expHandlers(expHandlers(isPaidUser,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(licType,\'===\',&quot;N&quot;),\'||\',expHandlers(licType,\'===\',&quot;L&quot;)),\'||\',expHandlers(licType,\'===\',&quot;F&quot;)))}}"><template case="true"> <div class="clearAfterB"> <span class="dIB mB15 profile_body_txt crmUpgrade_maxWidStyle fL" data-zcqa="profilePicture_trialInfo"> {{unescape(getI18n("crm.login.free.edition"))}} </span> <span tabindex="0" role="link" aria-label="{{getI18n(\'crm.store.upgrade.caps\')}}" id="manageSubscriptionProfileTab" class="crmLinkColor cP tdUnderline crm-small-font-size crm-font-bold mL5 fL lh20 focusMenuContent" rel="noopener" data-zcqa="profilePicture_upgrade" onkeydown="{{action(\'manageSubscriptionUrl\',event)}}" onclick="{{action(\'manageSubscriptionUrl\')}}"> <span>{{getI18n(\'crm.store.upgrade.caps\')}}</span> </span> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isTryOtherEditionNeeded,\'&amp;&amp;\',expHandlers(isMultipleTrialProvisionDisabled,\'===\',&quot;null&quot;)),\'&amp;&amp;\',expHandlers(isAdminProfileUser,\'===\',true)),\'&amp;&amp;\',expHandlers(notPbxVendor,\'===\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'===\',&quot;false&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(isTrialEnable,\'===\',&quot;false&quot;),\'||\',expHandlers(expHandlers(isFreeEdition,\'===\',true),\'&amp;&amp;\',expHandlers(trialCount,\'<=\',1))))}}"><template case="true"> <div class="dB"> <span tabindex="0" aria-modal="true" aria-label="{{getI18n(&quot;crm.evaluate4&quot;)}}" class="dIB mB15 cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_tryOtherEdition" onkeydown="{{action(\'tryOtherEdition\',event)}}" onclick="{{action(\'tryOtherEdition\')}}"> <span>{{getI18n("crm.evaluate4")}}</span> </span> </div> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(isTrialEnable,\'===\',&quot;true&quot;)}}"><template case="true"> <span>{{unescape(getI18n("crm.edition.label.trial",editionName))}}</span> </template></template></template></template> </div> </template></template> <template is="if" value="{{cardPopup}}"><template case="true"><template is="if" value="{{isOnboardInprogress}}"><template case="true"> <div class="p1 pR br8 cob_profileCrd {{if(isNextGenUIEnabled,\'mT15 mB24\',\'\')}}"> <div class="dF cob_profileWrapper bg_white boxBB"> <span class="cob_closeIcon cP vH br20 dF right0 pA" onclick="{{action(\'showConfirmPopup\')}}" data-zcqa="closeOnboarding"> <crmutil-icon icon-name="close-9" icon-class="zcicn-close-9 iconWhite zcicn8"></crmutil-icon> </span> <template is="if" value="{{startTour}}"><template case="true"> <div class="dF cob_startTourBtn w100_per h100_per"> <div> <h1 class="crm-font-bold crm-subheading-font-size crmHeadingColor fg1 m0">{{getI18n("onboardingpagerevamp.quicksetupstart")}}</h1> <div onclick="{{action(\'showLandingPage\')}}" class="cob_goToLanding mT6" data-zcqa="goToLandingPage"> <a href="javascript:;" class="cob_landingPageWay crm-small-font-size cP">{{getI18n("onboardingpagerevamp.landingpage")}}</a> </div> </div> <span class="cob_startTourIcon dIB cP" onclick="{{action(\'openQuicksetupPopup\')}}" data-zcqa="clickStartOption"></span> </div> </template></template><template is="if" value="{{tourCompletePercent}}"><template case="true"> <div class="dF cob_startTourBtn w100_per h100_per"> <div> <h1 class="crm-font-bold crm-subheading-font-size crmHeadingColor m0 mR3">{{getI18n("onboardingpagerevamp.resumemessage")}}</h1> <div onclick="{{action(\'showLandingPage\')}}" class="cob_goToLanding mT6" data-zcqa="goToLandingPage"> <a href="javascript:;" class="cob_landingPageWay crm-small-font-size cP">{{getI18n("onboardingpagerevamp.landingpage")}}</a> </div> </div> <span class="cob_startTourIcon dIB cP" onclick="{{action(\'openQuicksetupPopup\')}}" data-zcqa="clickResumeOption"></span> </div> </template></template> </div> </div> </template><template case="false"> <div class="p1 pR br8 cob_profileCrd {{if(isNextGenUIEnabled,\'mT15 mB24\',\'\')}}"> <div class="dF cob_profileWrapper bg_white boxBB"> <span class="cob_closeIcon cP vH br20 dF right0 pA" onclick="{{action(\'quickSetupCompleted\')}}" data-zcqa="closeOnboarding"> <crmutil-icon icon-name="close-9" icon-class="zcicn-close-9 iconWhite zcicn8"></crmutil-icon> </span> <div class="dF cob_startTourBtn w100_per h100_per"> <div> <h1 class="crm-font-bold crm-subheading-font-size crmHeadingColor m0 mR3">{{getI18n("onboardingpagerevamp.setupcompleted")}}</h1> <div onclick="{{action(\'showLandingPage\')}}" class="cob_goToLanding mT6" data-zcqa="goToLandingPage"> <a href="javascript:;" class="cob_landingPageWay crm-small-font-size cP">{{getI18n("onboardingpagerevamp.landingpage")}}</a> </div> </div> </div> </div> </div> </template></template></template></template> <lyte-alert lt-prop-wrapper-class="sampleAlert" lt-prop-yield="true" class="cob_confirmAlert" lt-prop-show-close-button="false" lt-prop-top="0px"> <template is="registerYield" yield-name="alert"> <lyte-alert-header class="crm-medium-large-font-size aiCenter crm-font-bold pT10 cob_closeAlertHead"> {{getI18n("onboardingpagerevamp.pendingquicksetup")}} </lyte-alert-header> <lyte-alert-content class="crm-base-font-size aiCenter pB0 pT10 cob_closeAlertDescript"> {{getI18n("onboardingpagerevamp.closemessage1")}} <span class="crm-font-bold crmBaseColor">{{getI18n("onboardingpagerevamp.close")}}</span> {{getI18n("onboardingpagerevamp.closemessage2")}} </lyte-alert-content> <lyte-alert-footer class="pB10 aligncenter"> <lyte-button lt-prop-appearance="failure" class="crm-subheading-font-size" onclick="{{action(\'quickSetupClosed\')}}" data-zcqa="closeQuickSetup"> <template is="registerYield" yield-name="text"> {{getI18n("onboardingpagerevamp.yesproceed")}} </template> </lyte-button> <lyte-button class="crm-subheading-font-size" onclick="{{action(\'closeConfirmAlert\')}}" data-zcqa="cancelClosingQuickSetup"> <template is="registerYield" yield-name="text"> {{getI18n("onboardingpagerevamp.cancel")}} </template> </lyte-button> </lyte-alert-footer> </template> </lyte-alert> </div> <template is="if" value="{{isNextGenUIEnabled}}"><template case="true"> <div class="crm-font-regular flexAlignCenter leftmenu-feedback br8 mB24"> <div class="flexAlignCenter flexOne cDefault mR6"> <div class="dF flexDC"> <span class="crm-base-font-size crm-font-bold wbBreakWord">{{getI18n("crm.topmenu.feedbck")}} {{getI18n("crm.label.on")}} {{getI18n("crm.new.ui.everyone")}}</span> </div> </div> <span class="feedback-writeic dIF aiCenter jcCenter br50per cP" onclick="{{action(\'openFeedback\')}}"> <span class="zcicncss-feedback zcicn-cssIcons zcicn_white_mask"></span> </span> </div> </template></template> <template is="if" value="{{isNextGenUIEnabled}}"><template case="true"> <div class="mB24 pT16 pB16 pL11 pR11 crmAppearanceSection br12"> <div class="crm-font-bold crmHeadingColor crm-subheading-font-size lh24">{{getI18n("crm.colormode")}}</div> <div class="flexAlignCenter colorModeSwitch mT16 p4 br28 mB20"> <div class="dIF aiCenter jcCenter colorModes br28 cP defaultMode activeMode flexOne" data-zcqa="mode_default" onclick="{{action(\'colorModeAction\',\'default\')}}"> <span class="zcicncss-lightmode zcicn-cssIcons colorModesIcon"></span> <span class="crm-small-font-size mL6">{{getI18n("crm.colormode.default")}}</span> </div> <div class="dIF aiCenter jcCenter colorModes br28 cP mL10 mR10 darkMode flexOne" data-zcqa="mode_dark" onclick="{{action(\'colorModeAction\',\'dark\')}}"> <span class="zcicncss-darkmode zcicn-cssIcons colorModesIcon"></span> <span class="crm-small-font-size mL6">{{getI18n("crm.colormode.dark")}}</span> </div> <div class="dIF aiCenter jcCenter colorModes br28 cP autoMode flexOne" data-zcqa="mode_system_setting" onclick="{{action(\'colorModeAction\',\'system_setting\')}}"> <span class="zcicncss-systemdefault zcicn-cssIcons colorModesIcon"></span> <span class="crm-small-font-size mL6">{{getI18n("crm.colormode.systemdefault")}}</span> <crmutil-icon class="mL4" icon-name="info-solid" icon-class="zcicn-info-solid zcicn_black " lt-prop-title="{{getI18n(\'crm.colormode.systemdefault.info\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></crmutil-icon> </div> </div> <div id="ThemesContainerNextGen" class="pR mT20 mB20"> <crm-left-menu-theme></crm-left-menu-theme> </div> </div> </template></template> <template is="if" value="{{showNeedHelp}}"><template case="true"> <div class="profile_needhelp {{if(isNextGenUIEnabled,\'mB20\',\'pT25\')}} clearfix"> <div class="clearfix profile_help_header {{if(isNextGenUIEnabled,\'dF aiCenter\',\'\')}}"> <span class="crm-font-bold {{if(isNextGenUIEnabled,\'crmHeadingColor flexOne\',\'ttUppercase\')}} fL profile_help_header_text"> {{getI18n("crm.profile.pic.need.help")}} </span> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isNextGenUIEnabled,\'!\'),\'&amp;&amp;\',isPaidUser),\'&amp;&amp;\',expHandlers(isAdminProfileUser,\'==\',true)),\'&amp;&amp;\',expHandlers(isStarterEdition,\'!\')),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{ifEquals(supportPlan,\'Premium\')}}"><template case="true"> <span tabindex="0" aria-modal="true" aria-label="{{getI18n(&quot;crm.profile.pic.priority.assistance.enterprise.support.try&quot;)}}" class="cP priority_assist fR mL10 mT1 focusMenuContent" data-zcqa="profilePicture_priority" onkeydown="{{action(\'openPriorityAssistanPopup\',event)}}" onclick="{{action(\'openPriorityAssistanPopup\')}}"> <span>{{getI18n("crm.profile.pic.priority.assistance.enterprise.support.try")}}</span> </span> </template><template case="false"><template is="if" value="{{ifEquals(supportPlan,\'Classic\')}}"><template case="true"> <span tabindex="0" aria-modal="true" aria-label="{{getI18n(&quot;crm.profile.pic.priority.assistance&quot;)}}" class="cP priority_assist fR mL10 mT1 focusMenuContent" data-zcqa="profilePicture_priority" onkeydown="{{action(\'openPriorityAssistanPopup\',event)}}" onclick="{{action(\'openPriorityAssistanPopup\')}}"> <span>{{getI18n("crm.profile.pic.priority.assistance")}}</span> </span> </template><template case="false"><template is="if" value="{{ifEquals(supportPlan,\'Enterprise\')}}"><template case="true"> <span tabindex="0" aria-modal="true" aria-label="{{getI18n(&quot;crm.profile.pic.priority.assistance.enterprise.support&quot;)}}" class="cP priority_assist fR mL10 mT1 focusMenuContent" data-zcqa="profilePicture_priority" onkeydown="{{action(\'openPriorityAssistanPopup\',event)}}" onclick="{{action(\'openPriorityAssistanPopup\')}}"> <span>{{getI18n("crm.profile.pic.priority.assistance.enterprise.support")}}</span> </span> </template></template></template></template></template></template></template></template> </div> <div class="clearfix {{if(isNextGenUIEnabled,\'pT4\',\'pT15\')}}"> <template is="if" value="{{expHandlers(isLiveChatAvailable,\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(expHandlers(isPaidUser,\'===\',true),\'&amp;&amp;\',showChatNonAdmin),\'||\',expHandlers(expHandlers(deployment,\'===\',&quot;China&quot;),\'&amp;&amp;\',expHandlers(isTrialEnable,\'===\',&quot;true&quot;))),\'||\',isLiveChatSupportedForTrail))}}"><template case="true"> <div class="w49_per dIB {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span tabindex="0" class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_chatWithUs" aria-label="{{getI18n(&quot;crm.setupicon.chatwithus&quot;)}}" onkeydown="{{action(\'liveChat\',event)}}" onclick="{{action(\'liveChat\')}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"> <crmutil-icon aria-label="{{getI18n(&quot;crm.setupicon.chatwithus&quot;)}}" icon-name="chat-curved" icon-class="zcicn-chat-curved zcicn14 dIB vaM mR5"></crmutil-icon> {{getI18n("crm.setupicon.chatwithus")}} </span> </span> </div> </template></template> <template is="if" value="{{expHandlers(isAdminProfileUser,\'&amp;&amp;\',isPaidUser)}}"><template case="true"> <div class="w49_per dIB {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span tabindex="0" aria-label="{{getI18n(&quot;crm.profile.pic.talktous&quot;)}}" class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_talkWithUs" onkeydown="{{action(\'openTalkusPopup\',event)}}" onclick="{{action(\'openTalkusPopup\')}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"> <i class="dIB vaM mR6"> <crmutil-icon icon-name="support-avatar" icon-class="zcicn-support-avatar zcicn16 crmBaseIcon dIB"> </crmutil-icon> </i> {{getI18n("crm.profile.pic.talktous")}} </span> </span> </div> </template></template> <div class="w49_per dIB {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span tabindex="0" aria-label="{{getI18n(&quot;crm.profile.pic.writetous&quot;)}}" class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_writeToUs" onkeydown="{{action(\'openWriteToUsPop\',event)}}" onclick="{{action(\'openWriteToUsPop\')}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"> <crmutil-icon icon-name="mail-envolope" icon-class="zcicn-mail-envolope zcicn-mail-envolope-colored crmBaseIcon dIB vaT mR8 mT4"></crmutil-icon> {{getI18n("crm.profile.pic.writetous")}} </span> </span> </div> <div class="w49_per dIB {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span tabindex="0" aria-label="{{getI18n(&quot;crm.profile.pic.community&quot;)}}" role="link" class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_community" onkeydown="{{action(\'community\',event)}}" onclick="{{action(\'community\')}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"> <crmutil-icon icon-name="users-group" icon-class="zcicn-users-group zcicn-users-group-colored crmBaseIcon dIB vaM mR5 "></crmutil-icon> {{getI18n("crm.profile.pic.community")}} </span> </span> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(deployment,\'===\',&quot;US&quot;),\'||\',expHandlers(deployment,\'===\',&quot;EU&quot;)),\'||\',expHandlers(deployment,\'===\',&quot;JP&quot;)),\'||\',expHandlers(deployment,\'===\',&quot;IN&quot;))}}"><template case="true"><template is="if" value="{{indexOf(usrLocStr,\'ja\',\'>\',expHandlers(1,\'-\'))}}"><template case="true"> <div class="w49_per dIB resources_tab {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt"> <span tabindex="0" class="focusMenuContent" aria-haspopup="menu" aria-label="{{getI18n(&quot;crm.profile.pic.resources&quot;)}}" onkeydown="{{action(\'resources\',event,\'CRM_HELPLINK_JP\',false,\'Resources_JP\')}}" onclick="{{action(\'resources\',event,\'CRM_HELPLINK_JP\',false,\'Resources_JP\')}}" data-zcqa="profilePicture_resourcesJP"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"><crmutil-icon icon-name="monitor-avatar" icon-class="zcicn-monitor-avatar crmBaseIcon dIB mR8 pR" class="dIB"></crmutil-icon> {{getI18n("crm.profile.pic.resources")}} <i class="svgIcons crm-svgicons dIB ico-arrow-down-small vaM"></i></span> </span> </span> </div> </template><template case="false"> <div class="w49_per dIB resources_tab {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span tabindex="0" aria-haspopup="menu" aria-label="{{getI18n(&quot;crm.profile.pic.resources&quot;)}}" class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt focusMenuContent" id="resources" onkeydown="{{action(\'showResourcesMenu\',event)}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"> <crmutil-icon icon-name="monitor-avatar" icon-class="zcicn-monitor-avatar crmBaseIcon dIB mR8 pR" class="dIB"></crmutil-icon> {{getI18n("crm.profile.pic.resources")}} <crmutil-icon icon-name="arrow-left-line" icon-class="zcicn-arrow-right-line crmBaseIcon dIB mL5 vaM" class="dIB"></crmutil-icon> </span> </span> </div> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(deployment,\'==\',&quot;China&quot;)}}"><template case="true"> <div class="w49_per dIB resources_tab {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt"> <span tabindex="0" class="focusMenuContent" aria-haspopup="menu" aria-label="{{getI18n(&quot;crm.profile.pic.resources&quot;)}}" data-zcqa="profilePicture_resourcesCN" onkeydown="{{action(\'resources\',event,\'CRM_HELPLINK_CN\',false,\'Resources_CN\')}}" onclick="{{action(\'resources\',event,\'CRM_HELPLINK_CN\',false,\'Resources_CN\')}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"><crmutil-icon icon-name="monitor-avatar" icon-class="zcicn-monitor-avatar crmBaseIcon dIB mR8 pR" class="dIB"></crmutil-icon> {{getI18n("crm.profile.pic.resources")}} <i class="svgIcons dIB ico-arrow-down-small vaM"></i> </span> </span> </span> </div> </template></template></template></template> <template is="if" value="{{showDemo}}"><template case="true"> <div class="w49_per dIB {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span tabindex="0" role="link" aria-label="{{getI18n(&quot;crm.profile.pic.request.for.demo&quot;)}}" class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_needDemo" onkeydown="{{action(\'openNeedDemo\',event)}}" onclick="{{action(\'openNeedDemo\',event)}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"><crmutil-icon icon-name="demo" icon-class="zcicn-demo crmBaseIcon dIB vaM mR5 pR"></crmutil-icon> {{getI18n("crm.profile.pic.request.for.demo")}}</span> </span> </div> </template></template> <template is="if" value="{{expHandlers(deployment,\'!==\',&quot;China&quot;)}}"><template case="true"> <div class="w49_per dIB {{if(isNextGenUIEnabled,\'mT8\',\'mB15 ned_help_cnt\')}}"> <span tabindex="0" role="link" aria-label="{{getI18n(&quot;crm.profile.pic.starttour&quot;)}}" class="{{if(isNextGenUIEnabled,\'dIF aiCenter br6\',\'\')}} cP profile_body_txt focusMenuContent" data-zcqa="profilePicture_startTour" onkeydown="{{action(\'startTour\',event)}}" onclick="{{action(\'startTour\',event)}}"> <span class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'\')}}"><i class="{{if(isNextGenUIEnabled,\'dIF aiCenter\',\'dIB vaM \')}} mR6"> <crmutil-icon icon-name="takeAtour-colored" icon-class="zcicn-takeAtour-colored crmBaseIcon "></crmutil-icon> </i> {{getI18n("crm.profile.pic.starttour")}}</span> </span> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isNextGenUIEnabled,\'&amp;&amp;\',isPaidUser),\'&amp;&amp;\',expHandlers(isAdminProfileUser,\'==\',true)),\'&amp;&amp;\',expHandlers(isStarterEdition,\'!\')),\'&amp;&amp;\',expHandlers(isZohoOneUser,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isCrmPlusUser,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxAcc,\'!==\',&quot;true&quot;)),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <template is="if" value="{{ifEquals(supportPlan,\'Premium\')}}"><template case="true"> <span tabindex="0" aria-modal="true" aria-label="{{getI18n(&quot;crm.profile.pic.priority.assistance.enterprise.support.try&quot;)}}" class="flexAlignCenter jcCenter br8 cP priority_assist mT10 focusMenuContent" data-zcqa="profilePicture_priority" onkeydown="{{action(\'openPriorityAssistanPopup\',event)}}" onclick="{{action(\'openPriorityAssistanPopup\')}}"> {{getI18n("crm.profile.pic.priority.assistance.enterprise.support.try")}} </span> </template><template case="false"><template is="if" value="{{ifEquals(supportPlan,\'Classic\')}}"><template case="true"> <span tabindex="0" aria-modal="true" aria-label="{{getI18n(&quot;crm.profile.pic.priority.assistance&quot;)}}" class="flexAlignCenter jcCenter br8 cP priority_assist mT10 focusMenuContent" data-zcqa="profilePicture_priority" onkeydown="{{action(\'openPriorityAssistanPopup\',event)}}" onclick="{{action(\'openPriorityAssistanPopup\')}}"> {{getI18n("crm.profile.pic.priority.assistance")}} </span> </template><template case="false"><template is="if" value="{{ifEquals(supportPlan,\'Enterprise\')}}"><template case="true"> <span tabindex="0" aria-modal="true" aria-label="{{getI18n(&quot;crm.profile.pic.priority.assistance.enterprise.support&quot;)}}" class="flexAlignCenter jcCenter br8 cP priority_assist mT10 focusMenuContent" data-zcqa="profilePicture_priority" onkeydown="{{action(\'openPriorityAssistanPopup\',event)}}" onclick="{{action(\'openPriorityAssistanPopup\')}}"> {{getI18n("crm.profile.pic.priority.assistance.enterprise.support")}} </span> </template></template></template></template></template></template></template></template> </div> </template></template> <template is="if" value="{{showNewsRoom}}"><template case="true"> <div class="profile_newsroom clearfix {{if(isNextGenUIEnabled,\'mB24\',\'pT25\')}}"> <div class="clearfix profile_newsroom_header"> <span class="profile_newsroom_header_text crm-font-bold {{if(isNextGenUIEnabled,\'crmHeadingColor ttLowercase\',\'ttUppercase\')}} vaM dB">{{getI18n("crm.profile.pic.news.room")}}</span> </div> <template is="if" value="{{expHandlers(deployment,\'===\',&quot;China&quot;)}}"><template case="true"> <div class="{{if(isNextGenUIEnabled,\'dF pT15\',\'cBoth pT20 pL10 pR10\')}}"> <span tabindex="0" class="{{if(isNextGenUIEnabled,\'dIF aiCenter lh24\',\'dIB\')}} mB25 cP profile_body_txt fL focusMenuContent" role="link" aria-label="{{getI18n(&quot;crm.top.watsnew&quot;)}}" onkeydown="{{action(\'resources\',event,whatsNewCN,true,\'whatsNewCN\')}}" onclick="{{action(\'resources\',event,whatsNewCN,true,\'whatsNewCN\')}}" data-zcqa="profilePicture_whatsNewCN"> <span> <template is="if" value="{{isNextGenUIEnabled}}"><template case="true"> <crmutil-icon class="mB8" icon-name="nxtGenGift-colored" icon-class="zcicn-nxtGenGift-colored"></crmutil-icon> </template><template case="false"> <crmutil-icon icon-name="gift" icon-class="zcicn-gift crmBaseIcon dIB mR5 pR vaT"></crmutil-icon> </template></template> {{getI18n("crm.top.watsnew")}} </span> </span> </div> </template><template case="false"> <div class="{{if(isNextGenUIEnabled,\'dF\',\'clearfix\')}} pT15"> <span tabindex="0" class="{{if(isNextGenUIEnabled,\'dF flexOne profile-news-room\',\'dIB mB25 w49_per profile_body_txt fL\')}} cP focusMenuContent" aria-label="{{getI18n(&quot;crm.top.watsnew&quot;)}}" role="link" onkeydown="{{action(\'resources\',event,whatsNew,true,\'whatsNew\')}}" onclick="{{action(\'resources\',event,whatsNew,true,\'whatsNew\')}}" data-zcqa="profilePicture_whatsNew"> <span class="{{if(isNextGenUIEnabled,\'flexAlignCenter crm-font-semibold\',\'\')}}"> <template is="if" value="{{isNextGenUIEnabled}}"><template case="true"> <crmutil-icon class="mR8" icon-name="nxtGenGift-colored" icon-class="zcicn-nxtGenGift-colored"></crmutil-icon> </template><template case="false"> <crmutil-icon icon-name="gift" icon-class="zcicn-gift crmBaseIcon dIB mR5 pR vaT"></crmutil-icon> </template></template> {{getI18n("crm.top.watsnew")}} </span> </span> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(pTopReferral.currentDc,\'===\',&quot;US&quot;),\'||\',expHandlers(pTopReferral.currentDc,\'===\',&quot;AU&quot;)),\'||\',expHandlers(pTopReferral.currentDc,\'===\',&quot;IN&quot;)),\'||\',expHandlers(pTopReferral.currentDc,\'===\',&quot;EU&quot;)),\'&amp;&amp;\',expHandlers(pTopReferral.isSandbox,\'!\'))}}"><template case="true"> <span class="{{if(isNextGenUIEnabled,\'flexOne profile-earn-refer\',\'dIB mB25 w49_per profile_body_txt fL\')}} cP "> <span tabindex="0" aria-modal="true" class="{{if(isNextGenUIEnabled,\'flexAlignCenter\',\'dIB\')}} lyteItem p2p-color-black focusMenuContent" id="topbandp2pIcon" data-zcqa="p2pTpBnd" onkeydown="{{action(\'showReferralPopupMenu\',event)}}" onclick="{{action(\'showReferralPopupMenu\',event)}}"> <span class="{{if(isNextGenUIEnabled,\'flexAlignCenter crm-font-semibold\',\'\')}}"> <template is="if" value="{{isNextGenUIEnabled}}"><template case="true"> <crmutil-icon class="mR8" icon-name="nxtGenRefer-colored" icon-class="zcicn-nxtGenRefer-colored "></crmutil-icon> </template><template case="false"> <crmutil-icon icon-name="refer" icon-class="zcicn-refer crmBaseIcon dIB mR2 vaT"></crmutil-icon> </template></template> {{getI18n(\'crm.p2preferral.button\')}}</span> </span> <template is="if" value="{{pTopReferral.showReferralPanel}}"><template case="true"> <crm-p2p-referral show-referral-panel="{{lbind(pTopReferral.showReferralPanel)}}"></crm-p2p-referral> </template></template> </span> </template></template> </div> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'&amp;&amp;\',expHandlers(showAndroid,\'||\',showIOS))}}"><template case="true"> <div class="dF flexDC mB28"> <span class="mB10 crm-subheading-font-size crm-font-bold">{{getI18n("crm.menu.mobile.app")}}</span> <div class="flexAlignCenter"> <div class="flexAlignCenter pT6 pB6 pL6 pR12 mR8 br_border3 br6 pf_icWrap cP" onclick="{{action(\'onMobileAppBadgeClicked\',event,crmMobileAppURL,\'CRM\')}}"> <div class="br6 pf_crmIcon mR8 flexAlignCenter jcCenter"> <crmutil-icon icon-name="zohocrm" icon-class="zcicn-zohocrm zcicn_white "></crmutil-icon> </div> <span class="crm-small-font-size crm-font-semibold">{{getI18n(\'crm.social.crm\')}}</span> </div> <div class="flexAlignCenter pT6 pB6 pL6 pR12 br_border3 br6 pf_icWrap cP" onclick="{{action(\'onMobileAppBadgeClicked\',event,crmAnalyticsMobileAppURL,\'CRM_ANALYTICS\')}}"> <div class="br6 pf_anaIcon mR8 flexAlignCenter jcCenter"> <crmutil-icon icon-name="zohoanalyticslogo" icon-class="zcicn-zohoanalyticslogo zcicn_white "></crmutil-icon> </div> <span class="crm-small-font-size crm-font-semibold">{{getI18n(\'crm.template.component.analytics.heading\')}}</span> </div> </div> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(isSandboxAcc,\'===\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSandboxDevAcc,\'!==\',&quot;true&quot;))}}"><template case="true"> <lyte-button lt-prop-type="button" class="sanBox_btn dF aiCenter jcCenter mB30 mT30" lt-prop-class="button_cl" lt-prop-appearance="primary" data-zcqa="profilePicture_returnPrd" onclick="{{action(\'returnToProductionAccount\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.profile.pic.switch.production")}} </template> </lyte-button> </template></template> </lyte-modal-content> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'||\',expHandlers(showAndroid,\'||\',showIOS))}}"><template case="true"> <lyte-modal-footer class="{{if(isNextGenUIEnabled,\'crm-leftprofile-popupfooter\',\'crm-profile-popupfooter\')}} footerProfileDiv"> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'!\')}}"><template case="true"> <span class="crm-font-bold ttUppercase mR10 mobile_txt">{{getI18n("Mobile")}}</span> <template is="if" value="{{showIOS}}"><template case="true"> <span tabindex="0" role="link" aria-label="{{getI18n(\'crm.mobile.download.appstore\')}}" lt-prop-title="{{getI18n(&quot;crm.mobile.download.appstore&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" class="svgIcons appstore dIB vaM mR10 cP focusMenuContent" onkeydown="{{action(\'resources\',event,iosUrl,true,\'IOS_APP\')}}" onclick="{{action(\'resources\',event,iosUrl,true,\'IOS_APP\')}}"></span></template></template> <template is="if" value="{{expHandlers(expHandlers(deployment,\'==\',&quot;China&quot;),\'&amp;&amp;\',showAndroid)}}"><template case="true"> <span tabindex="0" role="link" aria-label="{{getI18n(\'crm.install.android.app\')}}" lt-prop-title="{{getI18n(&quot;crm.install.android.app&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" class="svgIcons appstorechina dIB vaM cP focusMenuContent" onkeydown="{{action(\'resources\',event,androidUrl,true,\'CHINA_ANDROID_APP\')}}" onclick="{{action(\'resources\',event,androidUrl,true,\'CHINA_ANDROID_APP\')}}"></span> </template><template case="false"><template is="if" value="{{showAndroid}}"><template case="true"> <span tabindex="0" role="link" aria-label="{{getI18n(\'crm.install.android.app\')}}" lt-prop-title="{{getI18n(&quot;crm.install.android.app&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" class="svgIcons playstore dIB vaM cP focusMenuContent" onkeydown="{{action(\'resources\',event,androidUrl,true,\'ANDROID_APP\')}}" onclick="{{action(\'resources\',event,androidUrl,true,\'ANDROID_APP\')}}"></span> </template></template></template></template> </template><template case="false"> <div class="dF aiCenter"> <div class="myzohoacct_btn mR5"> <span class="cP dF aiCenter p6 pT9 pB9 left-myaccount-btn br6 crm-small-font-size" data-zcqa="profilePicture_myAccount" onclick="{{action(\'myAccount\')}}"> <crmutil-icon class="mR6" icon-name="expand-sm" icon-class="zcicn-expand-sm zcicn-expand-blue-filled-colored zcicn16"></crmutil-icon> <span class="crmLabelColor">{{getI18n("crm.label.my.account")}}</span> </span> </div> <div class="profile-btn flexOne"> <span class="cP aiCenter dIF jcFlextEnd p6 pT9 pB9 left-signout-btn br6 crm-small-font-size" onclick="{{action(\'logout\')}}"> <crmutil-icon class="mR6" icon-name="logout-colored" icon-class="zcicn-logout-colored zcicn16 "></crmutil-icon> <span class="crmLabelColor" data-zcqa="profilePicture_signOut">{{getI18n("crm.topmenu.logout")}}</span> </span> </div> </div> </template></template> </lyte-modal-footer> </template></template> <lyte-hovercard id="infoUserIdHover" lt-prop-show="{{showUserIdPop}}" lt-prop-auto-show="true" lt-prop-popover-wrapper-class="infoUserIdHovercard" lt-prop-origin-elem="i#infoUserId" lt-prop-keep-alive="true"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="infoUserIdPopcontent"> <p class="mB10 infoUserIdPoptxt">{{getI18n("crm.profile.pic.userid.tooltip.top")}}</p> <p class="infoUserIdPoptxt">{{getI18n("crm.profile.pic.userid.tooltip.bottom.new")}}</p> </lyte-hovercard-content> </template> </lyte-hovercard> </template> </lyte-modal> <lyte-menu lt-prop-yield="true" lt-prop-aria="{{isAccessibilityConfigSupported}}" lt-prop-show="{{lbind(showResources)}}" lt-prop-event="click" lt-prop-query="#resources" lt-prop-tab-index="0" lt-prop-width="auto" lt-prop-wrapper-class="resources_menu" lt-prop-height="auto" lt-prop-query-class="lyteMenuSelected" lt-prop-freeze="false" on-menu-click="{{method(\'resourceClick\')}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="resources_menu-body"> <lyte-menu-item class="resource_items" data-value="Resources Videos"> <span data-zcqa="profilePicture_videos"> {{getI18n("crm.profile.pic.resources.videos")}} </span> </lyte-menu-item> <lyte-menu-item class="resource_items" data-value="Resources Documentation"> <span data-zcqa="profilePicture_doc">{{getI18n("crm.profile.pic.resources.helpguide")}}</span> </lyte-menu-item> <lyte-menu-item class="resource_items" data-value="Resources Training"> <span data-zcqa="profilePicture_training">{{getI18n("crm.profile.pic.resources.training")}}</span> </lyte-menu-item> <lyte-menu-item class="resource_items" data-value="Resources More"> <span data-zcqa="profilePicture_more">{{getI18n("crm.menu.more")}}</span> </lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> <lyte-modal lt-prop-width="360px" lt-prop-allow-containment="true" lt-prop-draggable="{{lbind(draggableModal)}}" lt-prop-allow-multiple="true" lt-prop-transition="{{popupTransition}}" lt-prop-offset="{&quot;right&quot;:&quot;15&quot;,&quot;top&quot;:&quot;65&quot;}" lt-prop-freeze="false" lt-prop-wrapper-class="cob_quickSetupPopup" lt-prop-show="{{lbind(showQuickSetupPopup)}}" on-before-show="{{method(&quot;onBeforeshowquickSetupPopup&quot;)}}" on-show="{{method(&quot;onshowquickSetupPopup&quot;)}}" on-before-close="{{method(&quot;closeProfilePop&quot;)}}" lt-prop-overlay-close="false" class="cob_quickSetupMaxModal borderNone" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="cob_crmSetupHeader p0 br8 oH"> <div class="dF cob_completePopup cob_maxPopHead boxBB w100_per {{if(setupPopupMax,\'\',\'modalRadius\')}}"> <div class="dF aiCenter w100_per h100_per cob_setupTxtWrap"> <div class="dF cob_setupTxtInnerWrap"> <div class="mB5"> <h1 class="crm-font-bold crm-subheading-font-size fg1 m0 crmBaseColor">{{getI18n("onboardingpagerevamp.setupcrm")}}</h1> </div> <div class="mB6"> <p class="crm-small-font-size crmLabelColor lh20 crm-font-regular">{{getI18n("onboardingpagerevamp.message1","CRM")}}</p> </div> <div onclick="{{action(\'showLandingPage\')}}" class="cob_goToLanding f0" data-zcqa="goToLandingPage"> <a href="javascript:;" class="cob_landingPageWay crm-small-font-size cP crm-font-regular">{{getI18n("onboardingpagerevamp.landingpage")}}</a> </div> </div> </div> </div> </lyte-modal-header> <div class="pA top15 right15 zi10"> <template is="if" value="{{showMinimizePop}}"><template case="true"> <span class="zcrm_svgIcons cob_profileminimize h16 w12 vaBottom mR15 cP dIB" onclick="{{action(\'showquickSetupPopupMinimize\')}}" data-zcqa="minimizeRightPanel"></span> </template><template case="false"><template is="if" value="{{showMaximizePop}}"><template case="true"> <span class="zcrm_svgIcons cob_profilemaximize w12 vaM mR15 dIB cP" onclick="{{action(\'showQuickSetupMaxPopup\')}}" data-zcqa="maximizeRightPanel"></span> </template></template></template></template> <span class="zcrm_svgIcons cob_profileClose h10 w10 dIB cP" onclick="{{action(\'closeQuickSetupMaxPopup\',this)}}" data-zcqa="closeRightPanel"></span> </div> <template is="if" value="{{setupPopupMax}}"><template case="true"> <lyte-modal-content class="cob_popup_content h100_per"> <template is="for" items="{{featureList}}" item="item" index="index"> <div id="lock" class="cob_quickSetupSteps bg_white cP br6 bg_white mB8 {{if(features[item].isSelected,\'cob_quickSetupSelectedSteps\')}}" onclick="{{action(\'selectClientTracking\',item,\'features\')}}" data-zcqa="{{features[item].datazcqa}}"> <div class="pL15 pR15 pT16 pB16 dF aiCenter"> <span class="zcrm_svgIcons {{features[item].featureIcon}} mR20"></span> <div class="fg1"> <h5 class="m0 crm-subheading-font-size crmBaseColor {{if(features[item].isSelected,\'crm-font-bold\')}}">{{features[item].featureName}}</h5> </div> <template is="if" value="{{expHandlers(features[item].featureStatus,\'===\',&quot;completed&quot;)}}"><template case="true"> <span class="cob_completeIcon"> <crmutil-icon icon-name="tick-filled-rounded" icon-class="zcicn-tick-filled-rounded zcicn_57b67a "></crmutil-icon> </span> </template><template case="false"> <span class="zcrm_svgIcons"></span> </template></template> </div> </div> </template> <template is="for" items="{{featureListWithoutCompletionStatus}}" item="item" index="index"> <div class="cob_quickSetupSteps bg_white cP bg_white mB12 {{if(featuresWithoutCompletionStatus[item].isSelected,\'cob_quickSetupSelectedSteps\')}}" onclick="{{action(\'selectClientTracking\',item,\'featuresWithoutCompletionStatus\')}}" data-zcqa="{{featuresWithoutCompletionStatus[item].datazcqa}}"> <div class="pL15 pR15 pT16 pB16 dF aiCenter"> <span class="zcrm_svgIcons {{featuresWithoutCompletionStatus[item].featureIcon}} mR20"></span> <div class="fg1"> <h5 class="m0 crm-subheading-font-size crmBaseColor {{if(featuresWithoutCompletionStatus[item].isSelected,\'crm-font-bold\')}}">{{featuresWithoutCompletionStatus[item].featureName}}</h5> </div> </div> </div> </template> </lyte-modal-content> </template></template> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,1,0]},{type:"componentDynamic",position:[1,3,1]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[3]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,3]},{type:"attr",position:[1,3,1,3,1,1]},{type:"text",position:[1,3,1,3,1,1,1,0]},{type:"componentDynamic",position:[1,3,1,3,1,1]},{type:"attr",position:[1,3,1,3,3]},{type:"attr",position:[1,3,1,3,3,1]},{type:"text",position:[1,3,1,3,3,1,1,1]},{type:"text",position:[1,3,1,3,3,1,1,3]},{type:"attr",position:[1,3,1,3,3,1,3]},{type:"attr",position:[1,3,1,3,3,1,3,0]},{type:"componentDynamic",position:[1,3,1,3,3,1,3,0]},{type:"attr",position:[1,3,1,3,5,1]},{type:"if",position:[1,3,1,3,5,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3,1,0]},{type:"componentDynamic",position:[1,1,3,1,0]},{type:"text",position:[1,1,3,3,0]},{type:"text",position:[1,1,3,3,2,0]},{type:"attr",position:[1,1,3,3,4,1]},{type:"componentDynamic",position:[1,1,3,3,4,1]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,3,3]},{type:"if",position:[3,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1,3]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"text",position:[1,3,2,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,1,1]},{type:"if",position:[1,3,1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1,1,3]},{type:"if",position:[1,3,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,3,1,1]},{type:"attr",position:[1,3,1,3,1,1,1]},{type:"componentDynamic",position:[1,3,1,3,1,1,1]},{type:"text",position:[1,3,1,3,1,3,1,0]},{type:"text",position:[1,3,1,3,1,3,1,2]},{type:"attr",position:[1,3,1,3,3]},{type:"if",position:[1,3,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,3,5]},{type:"if",position:[1,3,1,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,5]},{type:"if",position:[1,3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"text",position:[1,3,2,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"attr",position:[3,1,1,1]},{type:"if",position:[3,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,0]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,1,3]},{type:"if",position:[3,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,1,0]},{type:"attr",position:[1,3]}]}},default:{}},{type:"attr",position:[1,1,4]},{type:"if",position:[1,1,4],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,1,0]},{type:"attr",position:[1,3]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"text",position:[1,1,3,1,1,0]},{type:"attr",position:[1,1,3,1,3]},{type:"text",position:[1,1,3,1,3,1,0]}]}},default:{}}]}},default:{}},{type:"registerYield",position:[3,1,1,5,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1]},{type:"text",position:[3,3,0]},{type:"text",position:[3,5]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,1]},{type:"attr",position:[5,3]},{type:"registerYield",position:[5,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,3]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[3,1,1,5]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,1,0]},{type:"text",position:[1,1,1,1,2]},{type:"text",position:[1,1,1,1,4]},{type:"attr",position:[1,3]}]}},default:{}},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,3,0]},{type:"attr",position:[1,3,3]},{type:"text",position:[1,3,3,3,0]},{type:"attr",position:[1,3,5]},{type:"text",position:[1,3,5,3,0]},{type:"attr",position:[1,3,5,5]},{type:"componentDynamic",position:[1,3,5,5]},{type:"componentDynamic",position:[1,5,1]}]}},default:{}},{type:"attr",position:[3,1,7]},{type:"if",position:[3,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"text",position:[1,1,1,3]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1,1,1]},{type:"text",position:[1,1,1,3]}]}},default:{}},{type:"attr",position:[1,3,5]},{type:"attr",position:[1,3,5,1]},{type:"attr",position:[1,3,5,1,1]},{type:"componentDynamic",position:[1,3,5,1,1,1]},{type:"text",position:[1,3,5,1,1,3]},{type:"attr",position:[1,3,7]},{type:"attr",position:[1,3,7,1]},{type:"attr",position:[1,3,7,1,1]},{type:"componentDynamic",position:[1,3,7,1,1,1]},{type:"text",position:[1,3,7,1,1,3]},{type:"attr",position:[1,3,9]},{type:"if",position:[1,3,9],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1,0]},{type:"text",position:[1,1,1,1,2]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"text",position:[1,1,1,3]},{type:"componentDynamic",position:[1,1,1,5]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1,0]},{type:"text",position:[1,1,1,1,2]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,11]},{type:"if",position:[1,3,11],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1,0]},{type:"text",position:[1,1,1,2]}]}},default:{}},{type:"attr",position:[1,3,13]},{type:"if",position:[1,3,13],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1,1,0,1]},{type:"text",position:[1,1,1,2]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,9]},{type:"if",position:[3,1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[1,1,1,3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[1,1,1,3]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[1,1,1,3]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,11]},{type:"if",position:[3,1,11],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1,1,1]},{type:"text",position:[1,3,1,3,0]},{type:"attr",position:[1,3,3]},{type:"componentDynamic",position:[1,3,3,1,1]},{type:"text",position:[1,3,3,3,0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"text",position:[1,1,1,3,0]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1,1]},{type:"text",position:[1,3,1,3,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[7]}]},{type:"componentDynamic",position:[7]},{type:"attr",position:[9]},{type:"registerYield",position:[9,1],dynamicNodes:[{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,1,0]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1,0]},{type:"componentDynamic",position:[1,5]},{type:"text",position:[1,7,1,0]},{type:"componentDynamic",position:[1,7]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[9]},{type:"attr",position:[11]},{type:"registerYield",position:[11,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1,1,1,0]},{type:"text",position:[1,1,1,1,3,1,0]},{type:"attr",position:[1,1,1,1,5]},{type:"text",position:[1,1,1,1,5,1,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,3,1]},{type:"text",position:[1,1,3,1,0]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,3,1]},{type:"text",position:[1,1,3,1,0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[11]}],_observedAttributes:["actualLicName","isTrialEnable","zohoBundleOrgHasPermission","zohoBundleOrgPaymentLink","zohoBundleOrgResult","zorgHasPermission","zorgPaymentLink","zorgResult","isFreeEdition","isFreeEdtionWithAddon","isZohoOneUser","isCrmPlusUser","elseResult","isJiveSignup","editionName","isPaidUser","trialCount","usersCount","firstTimeTrialFromSetup","notPbxVendor","isMultipleTrialProvisionDisabled","usrLocStr","zuid","contactsPhotoURL","isSandboxAcc","isSandboxDevAcc","isAdminProfileUser","isPremiumSupportEnabled","showPremiumSupportTalkToUs","licType","deployment","showTalkToExperts","clientImageSrcURL","countryCode","isProfClicked","showProfilePic","orgNameOrSandboxName","showOrgChange","orgAPIDataLoaded","organizations","invitationCount","is_user_confirmed","phoneNumber","showBlink","licenseType","profileNature","showChatNonAdmin","manageSubUrl","showNeedHelp","showNewsRoom","isTryOtherEditionNeeded","showAndroid","showIOS","androidUrl","iosUrl","showProfilePage","isPaidLicense","actualLicName","subject","message","showMessageBox","messageBoxType","messageBoxContent","communityLink","startTourLink","myAccountLink","whatsNew","whatsNewCN","countryArray","countryDetails","currentCountry","supportPlan","paymentMode","showDemo","disableMailSent","showMultiOrgs","showManageOrgs","activateMultiOrg","showUserIdPop","allowMultipleProp","pTopReferral","isStarterEdition","fromKeyboard","showResources","showPortalmenu","displayName","showQuickSetupPopup","showQuickSetupPopupAnimateflag","showQuickSetupPopupAnimation","popupTransition","fadeInTransition","quickSetup","quicksetupPipeline","quicksetupUsers","quicksetupConfEmail","quicksetupMarketing","quicksetupReports","quicksetupImport","tourCompleted","cardPopup","profileProgress","isLiveChatSupportedForTrail","clientPortalLogoutUrl","startTour","tourCompletePercent","tourCompletedPercentage","closeModal","zoomAnimationBoolean","slideAnimationBoolean","showMinimizePop","showMaximizePop","draggableModal","setupPopupMax","isOnboardInprogress","previousSelectedOption","previousSelectedMenuListName","featureList","featureListWithoutCompletionStatus","features","featuresWithoutCompletionStatus","srcUrl","undefinedVal","profileMenuTransition","profileMenuOffset","isNextGenUIEnabled","isNextGenUIOnboardingEnabled","isNextGenUIEnabledForOrg","switchNewUILoader","showNewUIOnboardingPopup","isAdminUser","expiryDays","trialIcon","trialIconStyle","selectedColorMode","dataTabIndex","privateModules","isAccessibilityConfigSupported","crmRtlEnabled","crmMobileAppURL","crmMobileAppCNURL","crmAnalyticsMobileAppURL","crmAnalyticsMobileAppCNURL"],data:function(){return{actualLicName:Lyte.attr("string",{default:Crm.userDetails.LICENSE_TYPE_ACTUAL_NAME_I18N}),isTrialEnable:Lyte.attr("string",{default:isTrialEnable}),zohoBundleOrgHasPermission:Lyte.attr("string",{default:"undefined"!=typeof zohoBundleOrgHasPermission?zohoBundleOrgHasPermission:void 0}),zohoBundleOrgPaymentLink:Lyte.attr("string",{default:"undefined"!=typeof zohoBundleOrgPaymentLink?zohoBundleOrgPaymentLink:void 0}),zohoBundleOrgResult:Lyte.attr("string",{default:"undefined"!=typeof zohoBundleOrgResult?zohoBundleOrgResult:void 0}),zorgHasPermission:Lyte.attr("string",{default:"undefined"!=typeof zorgHasPermission?zorgHasPermission:void 0}),zorgPaymentLink:Lyte.attr("string",{default:"undefined"!=typeof zorgPaymentLink?zorgPaymentLink:void 0}),zorgResult:Lyte.attr("string",{default:"undefined"!=typeof zorgResult?zorgResult:void 0}),isFreeEdition:Lyte.attr("boolean",{default:!1}),isFreeEdtionWithAddon:Lyte.attr("string",{default:isFreeEdtionWithAddon}),isZohoOneUser:Lyte.attr("string",{default:isZohoOneUser}),isCrmPlusUser:Lyte.attr("string",{default:isCrmPlusUser}),elseResult:Lyte.attr("string",{default:elseResult}),isJiveSignup:Lyte.attr("string",{default:isJiveSignup}),editionName:Lyte.attr("string",{default:Crm.userDetails.TRAIL_TYPE}),isPaidUser:Lyte.attr("boolean",{default:Crm.userDetails.ISPAID_USER}),trialCount:Lyte.attr("number",{default:Number(trialCount)}),usersCount:Lyte.attr("number",{default:Number(usersCount)}),firstTimeTrialFromSetup:Lyte.attr("string",{default:firstTimeTrialFromSetup}),notPbxVendor:Lyte.attr("string",{default:notPbxVendor}),isMultipleTrialProvisionDisabled:Lyte.attr("string",{default:isMultipleTrialProvisionDisabled}),usrLocStr:Lyte.attr("string",{default:Crm.userDetails.COUNTRY_LOCALE}),zuid:Lyte.attr("string",{default:Crm.userDetails.ZUID}),contactsPhotoURL:Lyte.attr("string",{default:crmConstants.contactsPhotoURL}),isSandboxAcc:Lyte.attr("string",{default:isSandboxAcc}),isSandboxDevAcc:Lyte.attr("string",{default:isSandboxDevAcc}),isAdminProfileUser:Lyte.attr("boolean",{default:!1}),isPremiumSupportEnabled:Lyte.attr("boolean",{default:!1}),showPremiumSupportTalkToUs:Lyte.attr("boolean",{default:!1}),licType:Lyte.attr("string",{default:Crm.userDetails.LICENSE_TYPE}),deployment:Lyte.attr("string",{default:Crm.userDetails.DEPLOYMENT}),showTalkToExperts:Lyte.attr("boolean",{default:"true"===showTalkToExperts}),clientImageSrcURL:Lyte.attr("string",{default:clientImageUrl}),countryCode:Lyte.attr("array",{default:[{value:"AU",name:"Australia"},{value:"FR",name:"France"},{value:"DE",name:"Germany"},{value:"IN",name:"India"},{value:"IT",name:"Italy"},{value:"NL",name:"Netherlands"},{value:"ES",name:"Spain"},{value:"SE",name:"Sweden"},{value:"UK",name:"United Kingdom"},{value:"US",name:"United States"}]}),isProfClicked:Lyte.attr("boolean",{default:!1}),showProfilePic:Lyte.attr("boolean",{default:!1}),orgNameOrSandboxName:Lyte.attr("string",{default:commonUtils.getOrgNameOrSandboxName()}),showOrgChange:Lyte.attr("boolean",{default:!1}),orgAPIDataLoaded:Lyte.attr("boolean",{default:!1}),organizations:Lyte.attr("array",{default:[]}),invitationCount:Lyte.attr("number",{default:0}),is_user_confirmed:Lyte.attr("boolean"),phoneNumber:Lyte.attr("string",{default:"+1 844 316 5541"}),showBlink:Lyte.attr("boolean",{default:!1}),licenseType:Lyte.attr("string"),profileNature:Lyte.attr("string"),showChatNonAdmin:Lyte.attr("boolean",{default:!0}),manageSubUrl:Lyte.attr("string",{default:Crm.userDetails.manageSubscriptionUrl}),showNeedHelp:Lyte.attr("boolean",{default:Crm.userDetails.profilePage.showNeedHelp}),showNewsRoom:Lyte.attr("boolean",{default:Crm.userDetails.profilePage.showNewsRoom}),isTryOtherEditionNeeded:Lyte.attr("boolean",{default:Crm.userDetails.profilePage.tryOtherEditionNeeded}),showAndroid:Lyte.attr("boolean",{default:void 0!==Crm.userDetails.profilePage.android}),showIOS:Lyte.attr("boolean",{default:void 0!==Crm.userDetails.profilePage.ios}),androidUrl:Lyte.attr("string",{default:Crm.userDetails.profilePage.android}),iosUrl:Lyte.attr("string",{default:Crm.userDetails.profilePage.ios}),showProfilePage:Lyte.attr("boolean",{default:!1}),isPaidLicense:Lyte.attr("boolean",{default:!1}),actualLicName:Lyte.attr("string",{default:Crm.userDetails.LICENSE_TYPE_ACTUAL_NAME_I18N}),subject:Lyte.attr("string"),message:Lyte.attr("string"),showMessageBox:Lyte.attr("boolean",{default:!1}),messageBoxType:Lyte.attr("string"),messageBoxContent:Lyte.attr("string"),communityLink:Lyte.attr("string",{default:RebrandLinkUtil.getProperty("CRM_RESOURCES_COMMUNITY")}),startTourLink:Lyte.attr("string",{default:RebrandLinkUtil.getProperty("CRM_RESOURCES_STARTTOUR")}),myAccountLink:Lyte.attr("string",{default:document.location.protocol+"//"+Crm.userDetails.ACCOUNTS_URL}),whatsNew:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoURL")+"/crm/whats-new/release-notes.html"}),whatsNewCN:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoChinaURL")+"/crm/whats-new/release-notes.html"}),countryArray:Lyte.attr("array",{default:["IN","US","GB","AU","DE","SE","IT","NL","ES","FR","CN"]}),countryDetails:Lyte.attr("array"),currentCountry:Lyte.attr("string"),supportPlan:Lyte.attr("string",{default:Crm.userDetails.SUPPORT_PLAN}),paymentMode:Lyte.attr("string",{default:Crm.userDetails.profileNature}),showDemo:Lyte.attr("boolean",{default:!1}),disableMailSent:Lyte.attr("boolean",{default:!0}),showMultiOrgs:Lyte.attr("boolean",{default:!1}),showManageOrgs:Lyte.attr("boolean",{default:!0}),activateMultiOrg:Lyte.attr("boolean",{default:!1}),showUserIdPop:Lyte.attr("boolean",{default:!1}),allowMultipleProp:Lyte.attr("boolean",{default:!1}),pTopReferral:Lyte.attr("object",{default:{}}),isStarterEdition:Lyte.attr("boolean",{default:!1}),fromKeyboard:Lyte.attr("boolean",{default:!1}),showResources:Lyte.attr("boolean",{default:!1}),showPortalmenu:Lyte.attr("boolean",{default:!1}),displayName:Lyte.attr("string",{default:Crm.userDetails.DISPLAY_NAME}),showQuickSetupPopup:Lyte.attr("boolean",{default:!1}),showQuickSetupPopupAnimateflag:Lyte.attr("boolean",{default:!0}),showQuickSetupPopupAnimation:Lyte.attr("boolean",{default:!1}),popupTransition:Lyte.attr("object",{default:{animation:"zoom",duration:"0.5",originElement:".prfImg"}}),fadeInTransition:Lyte.attr("object",{default:{animation:"fadeIn",duration:"0.5"}}),quickSetup:Lyte.attr("boolean",{default:!0}),quicksetupPipeline:Lyte.attr("boolean",{default:!0}),quicksetupUsers:Lyte.attr("boolean",{default:!1}),quicksetupConfEmail:Lyte.attr("boolean",{default:!1}),quicksetupMarketing:Lyte.attr("boolean",{default:!1}),quicksetupReports:Lyte.attr("boolean",{default:!1}),quicksetupImport:Lyte.attr("boolean",{default:!1}),tourCompleted:Lyte.attr("boolean",{default:!1}),cardPopup:Lyte.attr("boolean",{default:!1}),profileProgress:Lyte.attr("boolean",{default:!1}),isLiveChatSupportedForTrail:Lyte.attr("boolean",{default:!1}),clientPortalLogoutUrl:Lyte.attr("string"),startTour:Lyte.attr("boolean",{default:!1}),tourCompletePercent:Lyte.attr("boolean",{default:!1}),tourCompletedPercentage:Lyte.attr("number",{default:0}),closeModal:Lyte.attr("boolean",{default:!1}),zoomAnimationBoolean:Lyte.attr("boolean",{default:!1}),slideAnimationBoolean:Lyte.attr("boolean",{default:!1}),showMinimizePop:Lyte.attr("boolean",{default:!0}),showMaximizePop:Lyte.attr("boolean",{default:!1}),draggableModal:Lyte.attr("boolean",{default:!1}),setupPopupMax:Lyte.attr("boolean",{default:!0}),isOnboardInprogress:Lyte.attr("boolean",{default:!1}),previousSelectedOption:Lyte.attr("string",{default:"teamInvite"}),previousSelectedMenuListName:Lyte.attr("string",{default:"features"}),featureList:Lyte.attr("array",{default:["teamInvite","deals","mailBox","migrateData"]}),featureListWithoutCompletionStatus:Lyte.attr("array",{default:["appsAndExtension"]}),features:Lyte.attr("object",{default:{teamInvite:{featureRoute:"crm.settings.section.users",featureIcon:"cob_qckSetupInviteIco",highlgtFeatureIcon:"cob_qckSetupHlInviteIco",featureName:I18n.getMsg("onboardingpagerevamp.teaminvite"),datazcqa:"rightPanelTeamInviteOption",featureStatus:"Not Completed",isSelected:!1,selectedClass:"cob_qckSetupHlInviteIco"},deals:{featureRoute:"crm.settings.section.pipelines",featureIcon:"cob_qckSetupDealIco",highlgtFeatureIcon:"cob_qckSetHlupDealIco",featureName:I18n.getMsg("onboardingpagerevamp.deal"),datazcqa:"rightPaneldealsOption",featureStatus:"Not Completed",isSelected:!1,selectedClass:"cob_qckSetHlupDealIco"},mailBox:{featureRoute:"crm.settings.section.email-configuration.email-settings",featureIcon:"cob_qckSetupMailIco",highlgtFeatureIcon:"cob_qckSetupHlMailIco",featureName:I18n.getMsg("onboardingpagerevamp.mailbox"),datazcqa:"rightPanelmailBoxOption",featureStatus:"Not Completed",queryParam:'{"action":"mailSelect"}',isSelected:!1,selectedClass:"cob_qckSetupHlMailIco"},migrateData:{featureRoute:"crm.settings.section.data-migration",featureIcon:"cob_qckSetupMigrateIco",highlgtFeatureIcon:"cob_qckSetupHlMigrateIco",featureName:I18n.getMsg("onboardingpagerevamp.migration"),datazcqa:"rightPanelMigrateDataOption",featureStatus:"Not Completed",isSelected:!1,selectedClass:"cob_qckSetupHlMigrateIco"}}}),featuresWithoutCompletionStatus:Lyte.attr("object",{default:{appsAndExtension:{featureRoute:"crm.settings.section.extensions.zoho-extensions.zoho-apps",featureIcon:"cob_qckSetupAppsIco",highlgtFeatureIcon:"cob_qckSetupHlAppsIco",datazcqa:"rightPanelAppsandExtensionOption",featureName:I18n.getMsg("onboardingpagerevamp.appsandextension"),isSelected:!1,selectedClass:"cob_qckSetupHlAppsIco"}}}),srcUrl:Lyte.attr("string",{default:appendTimeToImgSrc(crmConstants.contactsPhotoURL+"/file?ID="+Crm.userDetails.ZUID+"&fs=thumb")}),undefinedVal:Lyte.attr("string",{default:""}),profileMenuTransition:Lyte.attr("string",{default:featuresAvailable.NEXTGENUI_ENABLED?'{"animation":"slideFromLeft","duration":"0.3"}':'{"animation":"slideFromRight","duration":"0.5"}'}),profileMenuOffset:Lyte.attr("string",{default:featuresAvailable.NEXTGENUI_ENABLED?Crm.userDetails.RTL_ENABLED?'{"left":"64px","top":"0"}':'{"left":"0","top":"0"}':'{"right":"0","top":"0"}'}),isNextGenUIEnabled:Lyte.attr("boolean",{default:!!featuresAvailable.NEXTGENUI_ENABLED}),isNextGenUIOnboardingEnabled:Lyte.attr("boolean",{default:!!featuresAvailable.NEXTGENUI_ONBOARDING}),isNextGenUIEnabledForOrg:Lyte.attr("boolean",{default:!!featuresAvailable.NEXTGENUI_ENABLED_FOR_ORG}),switchNewUILoader:Lyte.attr("boolean",{default:!1}),showNewUIOnboardingPopup:Lyte.attr("boolean",{default:!1}),isAdminUser:Lyte.attr("boolean",{default:Crm.userDetails.IS_ADMIN||Crm.userDetails.IS_ADMIN_ROLE}),expiryDays:Lyte.attr("string",{default:""}),trialIcon:Lyte.attr("string"),trialIconStyle:Lyte.attr("string"),selectedColorMode:Lyte.attr("string"),dataTabIndex:Lyte.attr("string"),privateModules:Lyte.attr("array",{default:[]}),isAccessibilityConfigSupported:Lyte.attr("boolean",{default:Crm.userDetails.isAccessibilityConfigSupported&&!featuresAvailable.NEXTGENUI_ENABLED}),crmRtlEnabled:Lyte.attr("boolean",{default:Crm.userDetails.RTL_ENABLED}),crmMobileAppURL:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoURL")+"/crm/mobile-app.html?src=mble-hub"}),crmMobileAppCNURL:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoChinaURL")+"/crm/mobile-app.html?src=mble-hub"}),crmAnalyticsMobileAppURL:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoURL")+"/crm/mobile/analytics-mobile.html"}),crmAnalyticsMobileAppCNURL:Lyte.attr("string",{default:"https://"+RebrandLinkUtil.getProperty("ZohoChinaURL")+"/crm/mobile/analytics-mobile.html"})}},init:function(){"Administrator"===Crm.userDetails.PROFILE_NAME&&this.setData("isAdminProfileUser",!0);var e=Crm.userDetails.LICENSE_TYPE_ACTUAL;if(this.setData("licenseType",e),"N"===e||"L"===e||"F"===e?this.setData("isFreeEdition",!0):this.setData("isPaidLicense",!0),"Administrator"===Crm.userDetails.PROFILE_NAME&&this.setData("isAdminProfileUser",!0),"X"===Crm.userDetails.LICENSE_TYPE_ACTUAL&&this.setData("isStarterEdition",!0),"true"===RebrandLinkUtil.getProperty("PS_ENABLED")&&null!==ps_details&&ps_details.isPremium){this.setData("isPremiumSupportEnabled",!0),this.setData("ps_details",ps_details),this.setData("supportPlan","Premium");var t=Crm.userDetails.COUNTRY_LOCALE.substr(3);["IN","US","GB","AU","SE","IT","NL","ES","FR","SG"].contains(t)&&this.setData("showPremiumSupportTalkToUs",!0)}if("true"===RebrandLinkUtil.getProperty("LiveChat")&&"true"===RebrandLinkUtil.getProperty("ISLIVECHATENABLED")&&("China"!==Crm.userDetails.DEPLOYMENT&&featuresAvailable.Live_Chat||"China"===Crm.userDetails.DEPLOYMENT&&(Crm.userDetails.ISPAID_USER||"true"===isTrialEnable))&&this.setData("isLiveChatAvailable",!0),Crm.userDetails&&Crm.userDetails.DEPLOYMENT){var a=this.getData("pTopReferral");Lyte.objectUtils(a,"add","currentDc",Crm.userDetails.DEPLOYMENT),Lyte.objectUtils(a,"add","isSandbox",Crm.userDetails.isSandbox)}if(Crm.userDetails&&Crm.userDetails.isTrialEnabled&&!Crm.userDetails.ISPAID_USER)if(salesIq_userInfo&&["ae","ke","za","ng","eg","sa"].includes(salesIq_userInfo.country))this.setData("isLiveChatSupportedForTrail",!0);else if(Crm.userDetails.EDITION_NAME&&Crm.userDetails.DEPLOYMENT){var o=Crm.userDetails.EDITION_NAME,i=Crm.userDetails.DEPLOYMENT;"AU"!==i&&"IN"!==i&&"US"!==i||"Professional"!=o&&"Old Enterprise"!=o&&"Enterprise"!=o&&"Ultimate"!=o||this.setData("isLiveChatSupportedForTrail",!0)}if(void 0!==Crm.userDetails.PROFILE_POPUP&&"completed"!==Crm.userDetails.PROFILE_POPUP)if(this.setData("isCrmplusOrZohoOneUser","true"===window.isCrmPlusUser||"true"===window.isZohoOneUser),this.getData("isCrmplusOrZohoOneUser"))Crm.userDetails.RIGHT_PANEL_POPUP=void 0;else{if("S"===Crm.userDetails.LICENSE_TYPE){let e=this.getData("featureList"),t=e.indexOf("mailBox");-1!==t&&e.splice(t,1)}"inprogress"===Crm.userDetails.PROFILE_POPUP&&"Home"===Lyte.Router.getRouteInstance().transition.info.dynamicParams[0]?Crm.userDetails.RIGHT_PANEL_POPUP="closed":(this.setData("cardPopup",!0),"opened"===Crm.userDetails.RIGHT_PANEL_POPUP&&"visible"!==$(".cob_quickSetupPopup").css("visibility")?(this.setData("showQuickSetupPopup",!0),this.actions.showQuickSetupPopup()):"minimised"===Crm.userDetails.RIGHT_PANEL_POPUP&&"visible"!==$(".cob_quickSetupPopup").css("visibility")&&(this.setData("showQuickSetupPopup",!0),this.actions.showquickSetupPopupMinimize())),this.actions.updateData()}var n=this.getData("isNextGenUIEnabled");if(this.getData("isNextGenUIOnboardingEnabled")&&!n){var s=!0,r=!1;if("undefined"!=typeof newui_onboarding){var l=newui_onboarding.hasOwnProperty("show_onboarding_popup")?newui_onboarding.show_onboarding_popup:null,p=newui_onboarding.hasOwnProperty("last_closed_time")?newui_onboarding.last_closed_time:null,c=newui_onboarding.hasOwnProperty("rescheduled_date")?newui_onboarding.rescheduled_date:null;if(s=null!==l?l:s,null!==p&&null!==c){var d=Date.now();p<c&&d>=c&&(s=!0,r=!0)}}this.executeMethod("ShowOrHideNewUIOnboardingPopup",s,r,!1)}},didConnect:function(){murphy.loadRecAfterInitialPageLoad&&murphyVstLoadFunction(!0),Lyte.injectResources(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("p2preferral")],ResourceConstants.CRM),void 0);var e=this,t="star-line",a="prof";switch(Crm.userDetails.LICENSE_TYPE){case"A":case"E":t="enterprise",a="entp";break;case"U":t="ultimate",a="ulti";break;case"P":case"R":t="star-line",a="prof";break;case"S":t="tick-rounded",a="std";break;case"F":case"N":case"L":t="tick-rounded",a="free";break;case"D":t="tick-rounded",a="dev"}if(e.setData("trialIcon",t),e.setData("trialIconStyle",a),e.data.isNextGenUIEnabled){var o=Crm.nextGenInfo,i=o&&o.mode?o.mode:"default";e.setData("selectedColorMode",i);window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{"system_setting"===this.getData("selectedColorMode")&&this.executeMethod("colorModeMethod","system_setting")}))}},showProfilePageObserver:function(){this.getData("showProfilePage")||featuresAvailable.NEXTGENUI_ENABLED&&document.querySelector("crm-left-menu").component.actions.updateNavActiveClassForBottomMenu("leftPaneProfile",!1)}.observes("showProfilePage"),showNewUIOnboardingPopupObserver:function(){var e=this.$node.component,t=$L("crm-nextgenui-onboarding-popup")[0];t&&t.component&&t.component.setData("showNewUIOnboardingPopup",e.getData("showNewUIOnboardingPopup"))}.observes("showNewUIOnboardingPopup").on("init"),selectColorMode:function(){var e=$L(".defaultMode"),t=$L(".darkMode"),a=$L(".autoMode");switch(this.getData("selectedColorMode")){case"default":t&&t.length>0&&t.removeClass("activeMode"),a&&a.length>0&&a.removeClass("activeMode"),e&&e.length>0&&e.addClass("activeMode");break;case"dark":e&&e.length>0&&e.removeClass("activeMode"),a&&a.length>0&&a.removeClass("activeMode"),t&&t.length>0&&t.addClass("activeMode");break;case"system_setting":t&&t.length>0&&t.removeClass("activeMode"),e&&e.length>0&&e.removeClass("activeMode"),a&&a.length>0&&a.addClass("activeMode")}},methods:{showHideProfile:function(){if(0===$("iframe#logoutSurvey").length){var e="";Crm.userDetails.LOCALE&&(e=Crm.userDetails.LOCALE.substr(0,2)),["es","fr","de","nl","bg","da","it","pl","pt","tr","el","sv","uk"].contains(e)?$("<iframe>").attr({id:"logoutSurvey",src:"https://survey.zohopublic.eu/zs/yMB8Wy?lang="+e,width:"1280",height:"720",frameborder:"0",style:"height:auto;width:900px;min-height:610px;max-height:610px"}).prependTo("#logoutSurveyPop"):$("<iframe>").attr({id:"logoutSurvey",src:"https://survey.zohopublic.eu/zs/yMB8Wy",width:"1280",height:"720",frameborder:"0",style:"height:auto;width:900px;min-height:610px;max-height:610px"}).prependTo("#logoutSurveyPop")}this.setData("actualLicName",Crm.userDetails.LICENSE_TYPE_ACTUAL_NAME_I18N),this.setData("editionName",Crm.userDetails.TRAIL_TYPE),this.setData("isPaidUser",Crm.userDetails.ISPAID_USER),this.setData("usrLocStr",Crm.userDetails.COUNTRY_LOCALE),this.setData("zuid",Crm.userDetails.ZUID),this.setData("contactsPhotoURL",crmConstants.contactsPhotoURL),this.setData("srcUrl",appendTimeToImgSrc(crmConstants.contactsPhotoURL+"/file?ID="+Crm.userDetails.ZUID+"&fs=thumb")),this.setData("licType",Crm.userDetails.LICENSE_TYPE),this.setData("deployment",Crm.userDetails.DEPLOYMENT),this.setData("isProfClicked",!0),Crm.menu.setupDropDown(event,this),slidelt("frmSetupClick"),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation()),$("#editionTrialDiv").hide()},beforeCloseProfileMenu:function(e,t){for(var a=t.target;a&&"mySelectIDDrop"!==a.id&&"mySelectIDSearch"!==a.id;)a=a.parentElement;if(a&&a.id&&("mySelectIDDrop"===a.id||"mySelectIDSearch"===a.id))return!1},showProfilePage:function(){$L("crm-profile-menu-talktous").length>0&&document.querySelector("crm-profile-menu-talktous").component.$node.remove(),Crm.userDetails.RTL_ENABLED&&this.setData("profileProgress",!0);var e=document.querySelector("#personalSettings");e&&e.focus();var t=document.querySelector("crm-profile-menu").component;t.getData("isNextGenUIEnabled")&&t.setData("expiryDays",t.executeMethod("getExpiryDays"))},beforeShowProfilePage:function(){isSandboxAcc&&"true"===isSandboxAcc&&$L("#automationBuild").addClass("eventNone"),setTimeout((function(){var e=$L(".crm-profile-popup .lyteModal");e.length>0&&(e[0].style.transitionDuration="unset",e[0].style.transform="none")}),10)},showNoResult:function(e){this.setData("showNoResult",0===e.length)},closeProfilePop:function(){if(this.setData("showProfilePage",!1),this.setData("activateMultiOrg",!1),this.data.showUserIdPop&&this.setData("showUserIdPop",!1),document.querySelector("crm-profile-menu").component.getData("isNextGenUIEnabled")){var e=document.querySelector("crm-left-menu").component;e.executeMethod("addActiveClassForTopMenu",e)}isSandboxAcc&&"true"===isSandboxAcc&&$L("#automationBuild").removeClass("eventNone")},closeMultiOrgPop:function(e){if(e&&9===e.keyCode){if(e.target&&"manageOrgs"===e.target.id)return e.shiftKey?($L("#orgDropdown").find(".lyteDummyEventContainer").focus(),this.setData("activateMultiOrg",!1),this.setData("allowMultipleProp",!1)):$L("#profile_menu_myacc").focus(),e.preventDefault(),!e.shiftKey;if(e.target&&e.target.classList.contains("lyteDummyEventContainer"))return e.shiftKey?(this.setData("activateMultiOrg",!1),this.setData("allowMultipleProp",!1),!0):($L("#profile_organization_popover").find(".lyteDropdownSelection").removeClass("lyteDropdownSelection"),$L("#manageOrgs").focus(),e.preventDefault(),!1)}return this.setData("activateMultiOrg",!1),this.setData("allowMultipleProp",!1),$L("#profile_menu_myacc").focus(),!0},onShowMultiOrg:function(){this.data.organizations.forEach((function(e,t){e.name.length>21&&$L("#Org"+t).attr({"lt-prop-title":e.name,"lt-prop-tooltip-config":'{"position" : "top", "appearance" : "callout","showdelay" : 1000, "margin" : 10}'})}));var e=$L("#profile_organization_ddbody");e&&e[0]&&e.scrollTo(e.find(".selectedOrgItem"),{duration:0}),$L(".org_options.selectedOrgItem")[0].scrollIntoView();var t=$L("#profile_organization_popover")[0],a=$L("#orgDropdown")[0].offsetWidth/2;featuresAvailable.NEXTGENUI_ENABLED?t.offsetWidth>=294?t.style.transform="translateX(-87px)":t.style.transform="translateX(calc(-50% + "+a+"px))":$L(".manage_orgpopover").hasClass("lyteDropboxLeftAlignToButton")?t.style.transform="translateX(calc(50% + -"+a+"px))":t.style.transform="translateX(calc(-50% + "+a+"px))"},getExpiryDays:function(){var e=document.querySelector("crm-profile-menu").component,t="";return"true"===e.getData("isZohoOneUser")||"true"===e.getData("isCrmPlusUser")?e.getData("zorgResult")?t=e.getData("zorgResult"):e.getData("zohoBundleOrgResult")&&(t=e.getData("zohoBundleOrgResult")):t=e.getData("elseResult"),t},onBeforeshowquickSetupPopup:function(){var e=$L(".cob_quickSetupMaxModal")[0];e.setData({ltPropOffset:{top:"65px",right:"15px"},ltPropTransition:{animation:"slideFromRight",duration:"0.5"}}),Crm.userDetails.RTL_ENABLED&&e.setData({ltPropOffset:{top:"65px",left:"15px"},ltPropTransition:{animation:"slideFromLeft",duration:"0.5"}})},onshowquickSetupPopup:function(){this.setData({showQuickSetupPopupAnimateflag:!1,showQuickSetupPopupAnimation:!1})},orgMenuClick:function(e,t,a,o,i){if(e.target.classList.contains("zcicn-copy-clip"))return!1;var n=this.getData("organizations")[i];return Lyte.Component.registeredHelpers.isCurrentOrg(n.id)||networkUtils.openUrl(n.web_url,"_blank",""),this.setData("activateMultiOrg",!1),this.setData("allowMultipleProp",!1),$L("#profile_menu_myacc").focus(),!1},resourceClick:function(e,t){switch(this.setData("showResources",!1),e){case"Resources Videos":this.resourcesFunc(t,"CRM_RESOURCES_VIDEOLINK",!1,"Resources Videos");break;case"Resources Documentation":this.resourcesFunc(t,"index_help_url",!1,"Resources Documentation");break;case"Resources Training":this.resourcesFunc(t,"CRM_RESOURCES_TRAINING",!1,"Resources Training");break;case"Resources More":this.resourcesFunc(t,"CRM_HELPLINK",!1,"Resources More")}t.clientX||(this.hideResource=!0)},portalMenu:function(e){switch(e){case"preferences":CPMF.getClientPortalUserLocaleInfo(),this.setData("isProfClicked",!1),this.setData("showPortalmenu",!1),this.pref=!0;break;case"logout":this.logoutFunc(),this.setData("showPortalmenu",!1)}},ShowOrHideNewUIOnboardingPopup:function(e,t,a){var o=this.$node.component;a&&Crm.client_tracking("NextGenUI Onboarding - Close Icon Clicked"),setTimeout((function(){o.setData("showNewUIOnboardingPopup",e)}),e?0:300);var i=$L(".switch-newui-background");if(t){var n={show_onboarding_popup:e};o.persistLeftPanelConfiguration(n)}!e&&i&&i.length>0&&i.addClass("switchNewUIAnim")},enableOrDisableNewUIMethod:function(e){var t=(e=e||this.$node.component).getData("isNextGenUIEnabled"),a=$L("#tabLayer");t||a&&a.length>0&&a.addClass("tabLayerIndexUnset"),commonUtils.showHideLoadingDiv(!0);var o={enabled:!t},i=o.enabled?"New UI Enable Clicked":"New UI Disable Clicked";Crm.client_tracking("NextGenUI Onboarding - "+i),t||(o.show_onboarding_popup=!1),e.persistLeftPanelConfiguration(o,(function(t){t?Utils.windowLocationReload():(a.removeClass("tabLayerIndexUnset"),e.setData("switchNewUILoader",!1),_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropMessage:I18n.getMsg("crm.new.ui.navigate.error.info")}}),e.executeMethod("ShowOrHideNewUIOnboardingPopup",!1,!0,!1),commonUtils.showHideLoadingDiv(!1))}))},colorModeMethod:function(e){var t=$L("crm-profile-menu")[0].component,a=$L("crm-left-menu-theme")[0];a=a?a.component:a,t.data.selectedColorMode!==e&&t.persistColorCode(e),t.setData("selectedColorMode",e),t.selectColorMode();var o=a?a.getData("theme"):a;Crm.nextGenInfo.mode=e,t.applyColorMode(e,o||"default")}},actions:{colorModeAction:function(e){var t=$L("crm-profile-menu")[0].component,a=$L("crm-left-menu-theme")[0];a=a?a.component:null,t.executeMethod("colorModeMethod",e);var o="Mode :"+t.NEXTGENUI_MODE_MAP[e]+" Selected";Crm.client_tracking("NextGen UI "+o);var i=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;if("default"===e||"system_setting"===e&&!1===i&&a){var n=a.getData("theme");o="Sub-Mode :"+t.NEXTGENUI_SUB_MODE_MAP[n]+" Selected",Crm.client_tracking("NextGen UI "+o),o="Mode :"+t.NEXTGENUI_MODE_MAP[e]+"-"+t.NEXTGENUI_SUB_MODE_MAP[n]+" Selected",Crm.client_tracking("NextGen UI "+o)}},openQuicksetupPopup:function(){this.actions.updateData(),Crm.client_tracking("Onboarding Popup Button Click"),this.actions.showQuickSetupPopup();var e=$L(".cob_quickSetupMaxModal")[0];!0===e.ltProp("show")&&e.resetPosition()},updateData:function(){var e=$L("crm-profile-menu")[0].component;if(e.getData("isCrmplusOrZohoOneUser")){let e=$L("crm-getting-start");e.length>0&&e[0].component.actions.populateData()}else store.findAll("dummy",null,!1,!1,{url:"crm/v4/org/actions/onboarding_status",method:"GET"}).then((function(t){e.setData({"features.teamInvite.featureStatus":"not_completed"===t.org[0].feature_status.team_invite?"Yet to Complete":"completed","features.mailBox.featureStatus":"not_completed"===t.org[0].feature_status.mailbox?"Yet to Complete":"completed","features.deals.featureStatus":"not_completed"===t.org[0].feature_status.deals_stage_configuration?"Yet to Complete":"completed","features.migrateData.featureStatus":"not_completed"===t.org[0].feature_status.migration?"Yet to Complete":"completed"}),e.actions.updateCompletionPercentage()}))},closeQuickSetupMaxPopup:function(e){Crm.client_tracking("Onboarding Quick Setup Popup Closed");var t=$L(".cob_quickSetupMaxModal")[0];this.setData({popupTransition:{animation:"zoom",duration:"0.7",originElement:"#dropclk"}});var a=$L(e).closest(".lyteModal")[0].getBoundingClientRect(),o=a.top+"px",i=window.innerWidth-a.right+"px";if(t.setData("ltPropOffset",{top:o,right:i}),t.reflectTransitionChange(),setTimeout((function(){t.setData("ltPropShow",!1)}),100),void 0!==Crm.userDetails.PROFILE_POPUP&&"completed"!==Crm.userDetails.PROFILE_POPUP){store.createRecord("dummy"),store.create("dummy",void 0,{url:"crm/v4/org/actions/onboarding_status",method:"PUT",payLoad:{org:[{popup_state:"closed"}]}}).then((function(){Crm.userDetails.RIGHT_PANEL_POPUP="closed"}))}},showReferralPopupMenu:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){this.setData("allowMultipleProp",!0);var t=[];t=(t=t.concat(networkUtils.returnDependencyFiles(["crm-p2pReferral-page.js"],ResourceConstants.CRMClient))).concat(networkUtils.returnDependencyFiles(["crm-p2pReferral-page.css"],ResourceConstants.CRMClient)),Crm.userDetails.RTL_ENABLED&&(t=t.concat(networkUtils.returnDependencyFiles(["crm-p2pReferral-page-rtl.css"],ResourceConstants.CRMClient))),Crm.client_tracking("Refer and Earn profile Click"),Lyte.injectResources(t,void 0,function(){setTimeout(function(){this.setData("pTopReferral.showReferralPanel",!0)}.bind(this),50)}.bind(this))}},showResourcesMenu:function(e){e&&"keydown"===e.type&&!this.hideResource&&(13===e.keyCode||40===e.keyCode?this.setData("showResources",!0):9===e.keyCode&&this.setData("showResources",!1)),delete this.hideResource},orgManage:function(e){!e||"click"!==e.type&&13!==e.keyCode||(this.setData("showProfilePage",!1),Crm.openOrganizationsPageInNewTab("org_profile_menu"),$L("#orgDropdown")[0].close())},openProfilePage:function(e){var t=document.querySelector("crm-profile-menu").component,a=t.getData("isNextGenUIEnabled"),o=t.getData("isNextGenUIOnboardingEnabled");if(a&&setTimeout((function(){var e=$L(".subscription-upgrade"),t=$L(".lftprof-mnu-content"),a=$L(".profile_acct_bg"),i=a&&a.length>0?a.outerHeight():234,n=e&&e.length>0?e.outerHeight():158;o&&i>234?(i-=234,e.css({top:180+i+"px"})):!o&&i>201&&(i-=201,e.css({top:150+i+"px"})),n-=35,t.css({"margin-top":n+"px"})}),100),!e||"keydown"!==e.type||13===e.keyCode||Crm.userDetails.CLIENT_ACCOUNT&&40===e.keyCode)if(CScriptLib&&_cscript._is_preview_frame)crmui.showMsgBand("error",I18n.getMsg("dxeditorpreview.settings.notsupported"),4e3);else{try{var i=$L("#etComposePanel");i.length>0&&"100%"!==i[0].style.top&&EmailCompose.etMinimiseCompose()}catch(e){murphy.error(e)}if(Crm.userDetails.CLIENT_ACCOUNT)e&&"keydown"===e.type&&(this.pref?delete this.pref:(t.setData("showPortalmenu",!0),t.setData("isProfClicked",!0)));else if(t.setData("orgNameOrSandboxName",commonUtils.getOrgNameOrSandboxName()),t.setData("displayName",Crm.userDetails.DISPLAY_NAME),t.setData("showProfilePage",!0),t.fetchOrgDetailsAndShowOrgChange(),!Lyte.Component.registeredComponents["crm-profile-menu-talktous"]){var n=networkUtils.returnDependencyFiles(["crm-profile-menu-components.js","lyte-fileupload.js"],ResourceConstants.CRMClient),s=networkUtils.returnDependencyFiles(["crm-profile-menu-components.css"],ResourceConstants.CRMClient),r=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("ProfileMenuComponents")],ResourceConstants.CRM),l=n.concat(s).concat(r);Lyte.injectResources(l,void 0,void 0)}if(t.data.orgNameOrSandboxName.length>29&&$L("#orgNameDisplay").attr({"lt-prop-title":t.data.orgNameOrSandboxName,"lt-prop-tooltip-config":'{"appearance":"callout","position":"bottom"}',"lt-prop-tooltip-style":"background : var(--bg_313949);color:#fff;font-size: var(--crm-small-font-size);border-radius:3px;padding: 5px 13px;"}),void 0!==Crm.userDetails.PROFILE_POPUP&&"completed"!==Crm.userDetails.PROFILE_POPUP){n=networkUtils.returnDependencyFiles(["lyte-progressbar.js"],ResourceConstants.CRMClient);Lyte.injectResources(n,void 0,void 0)}a&&t.selectColorMode()}},openTalkusPopup:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){if(this.data.isPremiumSupportEnabled&&this.data.isAdminProfileUser&&!this.data.showPremiumSupportTalkToUs)this.setData("showProfilePage",!1),PremiumChat.invokePremiumChat(ps_details.PSE_Mail_Id,Crm.userDetails.DISPLAY_NAME,ps_details.emailId,"Call",ps_details.weekend_restriction);else if(0===$L("crm-profile-menu-talktous").length)Lyte.Component.render("crm-profile-menu-talktous",{},"body");else{var t=document.querySelector("crm-profile-menu-talktous").component;t.setData("showTalkToUs",!0),t.setData("dontClose",!0)}Crm.client_tracking("Profile Revamp - Talk With Us Click")}},openPriorityAssistanPopup:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){if(Lyte.Component.registeredComponents["crm-profile-menu-assitance"])Lyte.Component.render("crm-profile-menu-assitance",{},"body");else{var t=networkUtils.returnDependencyFiles(["crm-profile-menu-assistance.js"],ResourceConstants.CRMClient),a=networkUtils.returnDependencyFiles(["crm-profile-menu-assistance.css"],ResourceConstants.CRMClient),o=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("ProfilePriorityAssitance")],ResourceConstants.CRM),i=t.concat(a).concat(o);Lyte.injectResources(i,void 0,(function(){0===$L("crm-profile-menu-assitance").length&&Lyte.Component.render("crm-profile-menu-assitance",{},"body")}))}Crm.client_tracking("Profile Revamp - Priority Assitance Click")}},openWriteToUsPop:function(e){var t;if(!e||"keydown"!==e.type||13===e.keyCode){if(this.setData("showProfilePage",!1),"object"==typeof window.murphy.recording&&window.murphy.recording.isInitialised()){if(!0!==(t=$L("crm-profile-menu-writetous")[0].component).getData("isMurphyVideoAttached")){var a=I18n.getMsg("murphy.alerts.sessionExists");return void _cruxUtils.showCustomMessage({params:{ltPropMessage:a,ltPropType:"error"}})}window.murphy.recording.removeRecorder()}0===$L("crm-profile-menu-writetous").length?Lyte.Component.render("crm-profile-menu-writetous",{},"body"):(void 0===t&&(t=$L("crm-profile-menu-writetous")[0].component),t.setData({showWriteToUs:!0,dontClose:!0}),t.executeMethod("showMurphyRecordButton")),Crm.client_tracking("Profile Revamp - Write to Us Click")}},logout:function(){this.logoutFunc()},myAccount:function(){this.setData("showProfilePage",!1);var e=document.location.protocol+"//"+Crm.userDetails.ACCOUNTS_URL;networkUtils.openUrl(e,"_blank","")},manageSubcription:function(e,t){if(!e||"keydown"!==e.type||13===e.keyCode){var a,o=document.querySelector("crm-profile-menu").component;if(!("enterprise"===t&&o.data.usersCount<25))a="true"===o.data.zorgHasPermission?o.data.zorgPaymentLink:"true"===o.data.zohoBundleOrgHasPermission?o.data.zohoBundleOrgPaymentLink:o.data.manageSubUrl,void 0===t||"enterprise"!==t&&"premium"!==t?o.setData("showProfilePage",!1):document.querySelector("crm-profile-menu-assitance").component.setData("showAssistance",!1),networkUtils.openUrl(a,"_blank","")}},manageSubscriptionUrl:function(e){e&&"keydown"===e.type&&13!==e.keyCode||(Crm.client_tracking("Upgrade Option Click - Profile Menu"),Crm.trackSpotLightAction("Subscription Accessed",{Place:"Trial Remaining Msg"}),networkUtils.openUrl(Crm.userDetails.manageSubscriptionUrl,"_blank"))},switchBack:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){this.setData("showProfilePage",!1);var t=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("trialcancelpopup")],ResourceConstants.CRM),a=networkUtils.returnDependencyFiles(["crm-trial-cancel-popup.js"],ResourceConstants.CRMClient);Lyte.injectResources(t.concat(a),void 0,(function(){Lyte.Component.render("crm-trial-cancel-popup",{showModal:!0},"body")}))}},tryOtherEdition:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){if("ZohoCRM"===Crm.serviceName&&this.setData("showProfilePage",!1),Crm.userDetails.IS_ADMIN){if(trialCount>=3)return void _cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getMsg("crm.trial.edition.limit.reached.alert"),ltPropButtons:[{type:"accept",appearance:"default",text:I18n.getMsg("crm.button.ok"),cxPropZcqa:"trialCountAlertBtn"}]}});e:{let e=Crm.userDetails.trialReviewValue;if(e&&-1!==e.indexOf("reviewLink")){let t=JSON.parse(e);if(!("trialEnabled"in t)){this.showReviewPopup(t.edition,!0,!0);break e}}$L("#basic").addClass("toe_blurFilter op5"),renderingUtils.freezeBackground();var t=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("tryothereditionspopup"),networkUtils.getI18nJSUrl("trialcancelpopup")],ResourceConstants.CRM),a=networkUtils.returnDependencyFiles(["crm-try-other-edition.js"],ResourceConstants.CRMClient);a=a.concat(networkUtils.returnDependencyFiles(["crm-trial-cancel-popup.js"],ResourceConstants.CRMClient));var o=networkUtils.returnDependencyFiles(["crm-try-other-edition.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT);commonUtils.showHideLoadingDiv(!0),Lyte.injectResources(t.concat(a).concat(o),void 0,(function(){commonUtils.showHideLoadingDiv(),Lyte.Component.render("crm-try-other-edition",null,"body")}))}}else renderingUtils.displayPermissionDenied();Crm.trackSpotLightAction("Try Other Edition Click")}},liveChat:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){this.setData("showProfilePage",!1),FeedbackChat.setVisitorInfo("profileMenu");var t=0;try{$zoho&&$zoho.salesiq&&Crm.widgetCode&&$zoho.salesiq.widgetcode!==Crm.widgetCode&&(t=1e3,$zoho.salesiq.widgetcode=Crm.widgetCode,$zoho.salesiq.reset())}catch(e){murphy.error(e)}var a=this;setTimeout((function(){if(a.data.isPremiumSupportEnabled&&a.data.isAdminProfileUser)PremiumChat.invokePremiumChat(ps_details.PSE_Mail_Id,Crm.userDetails.DISPLAY_NAME,ps_details.emailId,"Chat",ps_details.weekend_restriction);else{let t=!1;"Classic"!=a.data.supportPlan&&"Enterprise"!=a.data.supportPlan||!Crm.timingCheckNeeded||(t=!0),$zoho&&$zoho.salesiq&&$zoho.salesiq.visitor&&$zoho.salesiq.visitor.ongoingchat()&&(t=!1),FeedbackChat.loadChat(t,a.data.isAdminProfileUser),hideMenu(e),Crm.trackSpotLightAction("LiveChat Click")}Crm.client_tracking("Profile Revamp - Chat With Us Click")}),t)}},community:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){this.setData("showProfilePage",!1),Crm.client_tracking("Profile Revamp - Community Click");var t=this.data.communityLink;networkUtils.openUrl(t,"_blank","")}},startTour:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){this.setData("showProfilePage",!1),Crm.client_tracking("Profile Revamp - Take a tour Click");var t=this.data.startTourLink;networkUtils.openUrl(t,"_blank","")}},resources:function(e,t,a,o){this.resourcesFunc(e,t,a,o)},onMobileAppBadgeClicked:function(e,t,a){var o=this;"China"===o.getData("deployment")&&(t="CRM"===a?o.getData("crmMobileAppCNURL"):o.getData("crmAnalyticsMobileAppCNURL")),o.resourcesFunc(e,t,!0,a+" Mobile App Badge")},returnToProductionAccount:function(){var e="https://"+RebrandLinkUtil.getProperty("CRMURL")+Crm.userDetails.parentBasePath+"/";Utils.windowLocationHref(e)},openInfoUserId:function(e){var t=this.getData("showUserIdPop");e&&"keydown"===e.type?(13===e.keyCode?(this.setData("fromKeyboard",!0),this.setData("allowMultipleProp",!0),this.setData("showUserIdPop",!t)):9===e.keyCode&&(this.setData("allowMultipleProp",!1),this.setData("showUserIdPop",!1)),e.stopPropagation()):e&&"mouseenter"===e.type?this.setData("allowMultipleProp",!0):e&&"mouseleave"===e.type&&(e.stopPropagation(),this.setData("allowMultipleProp",!1))},personalSettings:function(e){e&&("keydown"===e.type&&13===e.keyCode||"click"===e.type)&&this.setData("showProfilePage",!1)},openOrgPage:function(){this.setData("showProfilePage",!1),Crm.openOrganizationsPageInNewTab("org_profile_menu")},openNeedDemo:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){this.setData("showProfilePage",!1),Crm.client_tracking("Profile Revamp - Need Demo Click");var t=window.location.origin+Crm.getCrmBasePath()+"/demoform";networkUtils.openUrl(t,"_blank","")}},enableOrDisableNewUI:function(){this.executeMethod("enableOrDisableNewUIMethod",this)},openFeedback:function(){networkUtils.openUrl("https://www.zoho.com/crm/ea/crm4e-feedback.html")},showQuickSetupMaxPopup:function(){let e=$L("crm-profile-menu")[0].component;e.actions.updateData(),Crm.client_tracking("Onboarding Quick Setup Popup Maximized Click"),this.setData({showMinimizePop:!0,showMaximizePop:!1,draggableModal:!1,setupPopupMax:!0}),$L(".cob_quickSetupPopup .lyteModal").removeClass("hideModalCont"),$L(".cob_maxPopHead").removeClass("modalRadius");var t=$L(".cob_quickSetupMaxModal")[0];if(t.resetPosition(),t.alignModal(),void 0!==Crm.userDetails.PROFILE_POPUP&&"completed"!==Crm.userDetails.PROFILE_POPUP){store.createRecord("dummy"),store.create("dummy",void 0,{url:"crm/v4/org/actions/onboarding_status",method:"PUT",payLoad:{org:[{popup_state:"opened"}]}}).then((function(){Crm.userDetails.RIGHT_PANEL_POPUP="opened"})),Crm.userDetails.RIGHT_PANEL_POPUP="opened",e.actions.highlightChange()}},showQuickSetupPopup:function(){var e=$L("crm-profile-menu")[0].component,t=$L(".cob_quickSetupMaxModal")[0];if(void 0!==t&&(t.setData({ltPropTransition:{animation:"slideFromRight",duration:"0.5"}}),setTimeout((function(){t.setData("ltPropShow",!0)}),100)),e.setData("showProfilePage",!1),e.setData({showMinimizePop:!0,showMaximizePop:!1,draggableModal:!1,setupPopupMax:!0}),$L(".cob_quickSetupPopup .lyteModal").removeClass("hideModalCont"),$L(".cob_maxPopHead").removeClass("modalRadius"),Crm.userDetails.PROFILE_POPUP){store.createRecord("dummy"),store.create("dummy",void 0,{url:"crm/v4/org/actions/onboarding_status",method:"PUT",payLoad:{org:[{popup_state:"opened"}]}}).then((function(){Crm.userDetails.RIGHT_PANEL_POPUP="opened",e.actions.highlightChange()}))}},showquickSetupPopupMinimize:function(){if(Crm.client_tracking("Onboarding Quick Setup Minimised"),$L("crm-profile-menu")[0].component.setData({showMinimizePop:!1,showMaximizePop:!0,draggableModal:!0,setupPopupMax:!1}),void 0!==Crm.userDetails.PROFILE_POPUP&&"completed"!==Crm.userDetails.PROFILE_POPUP){store.createRecord("dummy"),store.create("dummy",void 0,{url:"crm/v4/org/actions/onboarding_status",method:"PUT",payLoad:{org:[{popup_state:"minimised"}]}}).then((function(){Crm.userDetails.RIGHT_PANEL_POPUP="minimised"}))}},showLandingPage:function(){$L(".cob_quickSetupMaxModal")[0].setData({ltPropTransition:{animation:"fadeIn",duration:"0.5"}}),store.createRecord("dummy"),store.create("dummy",void 0,{url:"crm/v4/org/actions/onboarding_status",method:"PUT",payLoad:{org:[{onboarded_status:"inprogress",popup_state:"closed"}]}}).then((function(){Crm.userDetails.PROFILE_POPUP="inprogress",Crm.userDetails.RIGHT_PANEL_POPUP="closed",$L("crm-profile-menu")[0].component.setData({showProfilePage:!1}),Crm.client_tracking("Onboarding Go to Landing Page"),"crm.tab.module.begin"===Lyte.Router.getRouteInstance().transition.info.route&&"Home"===Lyte.Router.getRouteInstance().transition.info.dynamicParams[0]?Lyte.Router.getRouteInstance().refresh():Lyte.Router.transitionTo("crm.tab.module.begin","Home")}))},highlightChange:function(){let e=$L("crm-profile-menu")[0].component,t=e.getData("previousSelectedOption"),a=e.getData("previousSelectedMenuListName");if("opened"===Crm.userDetails.RIGHT_PANEL_POPUP){let l=Lyte.Router.getRouteInstance().transition.info.route;var o,i,n=!1,s=e.getData("featureList"),r=s.length;for(let t=0;t<r;t++){if("mailBox"===s[t]&&l.includes("crm.settings.section.email-configuration")){n=!0,o=s[t],i="features";break}if(l.includes(e.getData("features."+s[t]+".featureRoute"))){n=!0,o=s[t],i="features";break}}if(!n){r=(s=e.getData("featureListWithoutCompletionStatus")).length;for(let t=0;t<r;t++)if(l.includes(e.getData("featuresWithoutCompletionStatus."+s[t]+".featureRoute"))){n=!0,o=s[t],i="featuresWithoutCompletionStatus";break}}e.setData(a+"."+t+".isSelected",!1),n&&(e.setData(i+"."+o+".isSelected",!0),e.setData({previousSelectedOption:o,previousSelectedMenuListName:i}))}},selectClientTracking:function(e,t){switch(e){case"teamInvite":Crm.client_tracking("Onboarding Team Invite button");break;case"deals":Crm.client_tracking("Onboarding Deals button");break;case"mailBox":Crm.client_tracking("Onboarding Configure Mail button");break;case"migrateData":Crm.client_tracking("Onboarding Migrate Data button");break;case"appsAndExtension":Crm.client_tracking("Onboarding AppsExtension Explore button")}"features"===t?"mailBox"===e?Lyte.Router.transitionTo("crm.settings.section.email-configuration.email-settings",{action:"mailSelect"}):Lyte.Router.transitionTo(this.getData("features."+e+".featureRoute")):Lyte.Router.transitionTo(this.getData("featuresWithoutCompletionStatus."+e+".featureRoute"))},showConfirmPopup:function(){Crm.client_tracking("Onboarding Close Button Click"),document.querySelector(".cob_confirmAlert").ltProp("show",!0)},closeConfirmAlert:function(){document.querySelector(".cob_confirmAlert").ltProp("show",!1)},quickSetupCompleted:function(){Crm.client_tracking("Onboarding Quick Setup Completed"),this.actions.closeQuickSetup()},quickSetupClosed:function(){Crm.client_tracking("Onboarding Quick Setup Closed"),this.actions.closeQuickSetup()},closeQuickSetup:function(){document.querySelector(".cob_confirmAlert").ltProp("show",!1),$L("crm-profile-menu")[0].component.setData({showQuickSetupPopup:!1,cardPopup:!1}),$L(".cob_profileWrapper").addClass("dN");store.createRecord("dummy"),store.create("dummy",void 0,{url:"crm/v4/org/actions/onboarding_status",method:"PUT",payLoad:{org:[{onboarded_status:"completed"}]}}).then((function(){Crm.userDetails.PROFILE_POPUP=void 0,Crm.userDetails.RIGHT_PANEL_POPUP=void 0,"crm.tab.module.begin"===Lyte.Router.getRouteInstance().transition.info.route&&"Home"===Lyte.Router.getRouteInstance().transition.info.dynamicParams[0]&&Lyte.Router.getRouteInstance().refresh()}))},showOnboardingSetupPopupFromHomePage:function(){void 0!==Crm.userDetails.PROFILE_POPUP&&!0===Crm.userDetails.isFromFeatureMenu&&($L("crm-profile-menu")[0].component.actions.showQuickSetupPopup(),Crm.userDetails.isFromFeatureMenu=!1)},popupUpdateData:function(){let e=$L("crm-profile-menu")[0];void 0===Crm.userDetails.PROFILE_POPUP||"opened"!==Crm.userDetails.RIGHT_PANEL_POPUP&&!e.component.getData("isCrmplusOrZohoOneUser")||e.component.actions.updateData()},updateCompletionPercentage:function(){if(null==$L("crm-profile-menu")[0])return;let e=$L("crm-profile-menu")[0].component,t=25;"S"===Crm.userDetails.LICENSE_TYPE&&(t=33);let a=0;e.getData("featureList").forEach((function(o){"completed"===e.getData("features")[o].featureStatus&&(a+=t)})),0===a?e.setData({isOnboardInprogress:!0,tourCompletePercent:!1,startTour:!0}):a<99?e.setData({isOnboardInprogress:!0,tourCompletePercent:!0,tourCompletedPercentage:a,startTour:!1}):e.setData({isOnboardInprogress:!1})},featureMarkCompletion:function(e){if(void 0!==Crm.userDetails.PROFILE_POPUP){let t=$L("crm-profile-menu")[0].component;if(t.getData("isCrmplusOrZohoOneUser")){let t=$L("crm-getting-start");t.length>0&&t[0].component.getData("featureList").includes(e)&&(t[0].component.setData("features."+e+".featureCompletedStatus",!0),t[0].component.actions.featureCompletionProgress())}else t.setData("features."+e+".featureStatus","completed"),t.actions.updateCompletionPercentage()}},showRightPanelorCrmplusWidget:function(){if(void 0!==Crm.userDetails.PROFILE_POPUP)if("true"===window.isCrmPlusUser||"true"===window.isZohoOneUser){let e="#getStarted";if(!0===Crm.userDetails.isFromFeatureMenuCrmplusorZohoOne&&0===$L(e).length){const t=document.createElement("div");t.setAttribute("id","getStarted"),t.setAttribute("style","right:110px;top:50px;border:1px solid var(--br_d7e2ed)"),Crm.userDetails.RTL_ENABLED&&t.setAttribute("style","left:110px;top:50px;border:1px solid var(--br_d7e2ed)"),t.className="br10 hAuto pA bg_white gs-widgetBg w340 zi10",document.getElementById("show").appendChild(t);let a=$L(e);a.html("<crm-getting-start></crm-getting-start>"),a.draggable({containment:"body",hasContainment:!0,cancel:".gs-downIconWrap, .gs-shrinkIcon, .gs_closeIcon"})}}else $L("crm-profile-menu")[0].component.actions.showOnboardingSetupPopupFromHomePage()},copyOrgId:function(e){navigator.clipboard.writeText(e),_cruxUtils.showCustomMessage({params:{ltPropType:"success",ltPropMessage:I18n.getMsg("crm.profile.copyorgidmessage")}})}},resourcesFunc:function(e,t,a,o){if(!e||"keydown"!==e.type||13===e.keyCode){var i;if(i=void 0===a||!1===a?RebrandLinkUtil.getProperty(t):t,void 0!==o){o="Profile Revamp - "+o+" Click";Crm.client_tracking(o)}this.setData("showProfilePage",!1),""!==i&&networkUtils.openUrl(i,"_blank","")}},logoutFunc:function(){if(this.setData("showProfilePage",!1),Crm.userDetails.DEPLOYMENT.includes("EU")&&$("iframe#logoutSurvey").length>0){var e=$("#timerSeconds");e.text(60),renderingUtils.freezeBackground();crmui.showPopup({id:"logoutSurveyPop",escToClose:!1,freezeLayer:!0});var t=Number(e.text()),a=setInterval((function(){t>0?(e.text(t),t--):(clearInterval(a),logoutCall(crmConstants.logoutURL),Crm.trackSpotLightAction("Sign Out"))}),1e3)}else void 0!==this.getData("clientPortalLogoutUrl")?(logoutCall(this.getData("clientPortalLogoutUrl")),Crm.trackSpotLightAction("Sign Out")):(logoutCall(crmConstants.logoutURL),Crm.trackSpotLightAction("Sign Out"))},fetchOrgDetailsAndShowOrgChange:function(){var e=this;if(!e.getData("orgAPIDataLoaded")){if(e.setData("orgAPIDataLoaded",!0),void 0===Crm.userDetails.orgEnvType)return!1;store.findAll("organization",{include:"info",from:"crm_org_profile"}).then((function(t){var a=store.peekAll("organization");e.setData("organizations",a);var o=t.$.meta.multi_org_enabled||void 0!==isSandboxAcc&&isSandboxAcc;if(e.setData("is_user_confirmed",t.$.meta.confirmed_user),e.setData("invitationCount",t.$.meta.invitation_count),1===a.length&&0===e.getData("invitationCount")){const a=t.$.meta.admin_of_any_crm||["zohotest.com","zohocorp.com"].includes($("<div></div>").html(Crm.userDetails.EMAIL).text().split("@")[1]),i=e.getData("is_user_confirmed");(!i&&!a||!i&&a||i&&!a)&&(o=!1)}e.setData("showOrgChange",o),o&&e.setData("undefinedVal",void 0)}))}},persistLeftPanelConfiguration:function(e,t){networkUtils.lyteInitiateRequest("/crm/v5/__internal/settings/left_panel_configuration","PUT",{params:JSON.stringify({left_panel_configuration:e}),skip_load_tab:!0}).then((function(){t&&t(!0)}),(function(){t&&t(!1)}))}},{mixins:["crm-license-mixin","crm-left-menu-util"]}),Lyte.Component.register("crm-calendar-menu",{_template:'<template tag-name="crm-calendar-menu"> <lyte-popover lt-prop-origin-elem="#sCalenDar" id="leftPanelCalendarP" lt-prop-duration="0" lt-prop-show-close-button="false" lt-prop-freeze="false" lt-prop-wrapper-class="popCal" on-close="{{method(\'closePopover\')}}" on-show="{{method(\'manipulateStyle\')}}" on-before-show="{{method(\'showCalendarMenu\')}}" lt-prop-scrollable="false" lt-prop-content-padding="0"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <lyte-calendar class="crmMenuCalendar" lt-prop-yield="true" lt-prop-format="YYYY-MM-DD" lt-prop-activate-navigation="{{activateNavigation}}" on-navigate="{{method(\'monthOrYearNavigate\')}}" on-date-selected="{{method(\'changeToDate\')}}" id="lyteCalendar" lt-prop-start-week-day="{{startWeekDay}}" lt-prop-header-type="dropdown"> <template is="registerYield" yield-name="footer"> <div id="calBtns" class="fR"> <p id="calBtns1" class="alignRight"> <a href="javascript:;" class="pL2 pR2" id="cal_dayView" onclick="{{action(\'showDateView\',\'dayview\')}}">{{getI18n(\'crm.report.day\')}}</a> <a href="javascript:;" class="mL6 pL2 pR2" id="cal_weekView" onclick="{{action(\'showDateView\',\'weekview\')}}">{{getI18n(\'crm.report.week\')}}</a> <a href="javascript:;" class="mL6 pL2 pR2" id="cal_monthView" onclick="{{action(\'showDateView\',\'monthview\')}}">{{getI18n(\'crm.report.month\')}}</a> </p> </div> </template> </lyte-calendar> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,1,5]},{type:"text",position:[1,1,5,0]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["activateNavigation","startWeekDay"],data:function(){return{activateNavigation:Lyte.attr("boolean",{default:!1}),startWeekDay:Lyte.attr("number",{default:Crm.calPreferences.WEEKSTARTSON})}},actions:{showDateView:function(e){var t=new Date,a=t.getDate(),o=t.getMonth()+1,i=t.getFullYear()+"-"+o+"-"+a;crmCalendar.goToView(i,e),document.getElementById("leftPanelCalendarP").ltProp("show",!1);Crm.trackSpotLightAction({dayview:"Calendar Page - Day Click",weekview:"Calendar Page - Week Click",monthview:"Calendar Page - Month Click"}[e])}},methods:{showCalendarMenu:function(){Crm.trackSpotLightAction("Calendar Top End - Icon Click"),this.executeMethod("createDatePicker",new Date)},monthOrYearNavigate:function(){this.executeMethod("createDatePicker",Utils.getUtcDateObj(arguments[2]))},createDatePicker:function(e){var t=new Date(e.getFullYear(),e.getMonth(),1),a=crmCalendar.calcTDWidth("monthview"),o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),i=$("#topdivbg"),n=Math.ceil((renderingUtils.windowHeight-(i.length?i.height():0)-100)/100)+2;$.ajax({url:Crm.getCrmBasePath()+"/events/CalendarView.do",type:"POST",data:"type=monthview&secAction=dotsForSmallCal&obtaineddate="+o+"&tdWidthParam="+a+"&userFetchCnt="+n,success:function(e){for(var t=document.querySelectorAll(".lyteCalCdate"),a=[],o=0;o<t.length;o++)a.push(t[o].getAttribute("data-date"));var i=e.split(":");for(o=0;o<i.length;o++)if(i[o]){var n=i[o].split("-"),s=n[0],r=n[1],l=n[2];if(1===r.length||1===l.length){1===r.length&&(r="0"+r),1===l.length&&(l="0"+l);var p=s+"-"+r+"-"+l;if(a.includes(p))document.querySelector("div[data-date='"+p+"']").classList.add("lyteCalEvent")}else{if(a.includes(i[o]))document.querySelector("div[data-date='"+i[o]+"']").classList.add("lyteCalEvent")}}}})},changeToDate:function(){arguments[1]&&crmCalendar.goToView(arguments[1],"dayview"),document.getElementById("leftPanelCalendarP").ltProp("show",!1)},closePopover:function(e){if(document.getElementById("leftPanelCalendarP").ltProp("show",!1),"keydown"===e.type&&$L("#sCalenDar").focus(),featuresAvailable.NEXTGENUI_ENABLED){var t=$L("#calendarCont"),a=!!(t&&t.length>0);document.querySelector("crm-left-menu").component.actions.updateNavActiveClassForBottomMenu("leftPaneCalendar",a)}},manipulateStyle:function(){if("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()){var e=crmCalendar.crmCalposition.left;$(document.querySelector(".popCal").querySelector(".lytePopover")).addClass("top0"),document.querySelector(".popCal").querySelector(".lytePopover").style.left=e-document.querySelector(".popCal").querySelector(".lytePopover").getBoundingClientRect().width/2+"px"}this.setData("activateNavigation",!0)}},showCalendar:function(e){Activities.RemainderHideOnly(),$(".dICal").length&&$(".dICal").removeClass("dICal"),document.getElementById("iskanbanview")&&"true"===document.getElementById("iskanbanview").value||$(e.target).parents(".diUserSettingContainerData").is(":visible")||hideMenu(),$("#conditionalFieldRightSection").length&&void 0!==e&&27!==e.which&&void 0!==e.which&&$("#conditionalFieldRightSection").css("right","-650px"),$("#validationRuleRightSection").length&&void 0!==e&&27!==e.which&&void 0!==e.which&&$("#validationRuleRightSection").hide(),$(".crmTrendDashBoard").length&&Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-zianotification-mixin.js"],ResourceConstants.CRMClient),void 0,(function(){Lyte.registeredMixins["crm-zianotification-helper"].calendarDropAppend()}))},init:function(){this.setData("monthNames",crmCalendar.monthName.map((function(e){return e.html})))}}),store.registerModel("immessage",{conversation_status:Lyte.attr("string"),sender:Lyte.attr("object"),channel:Lyte.attr("object"),id:Lyte.attr("string",{primaryKey:!0}),created_time:Lyte.attr("string"),modified_time:Lyte.attr("string"),message_time:Lyte.attr("string"),semodule:Lyte.attr("string"),content:Lyte.attr("string"),service:Lyte.attr("string"),mobile:Lyte.attr("string"),type:Lyte.attr("string"),replied_by:Lyte.attr("object"),hasAttachments:Lyte.attr("boolean",{default:!1})},{actions:{deleteConversation:{endPoint:"deleteConversation"},threads:{endPoint:"__threads"},send:{endPoint:"send"},attachments:{endPoint:"__attachments"},sendAttachment:{endPoint:"sendAttachment"},setReminder:{endPoint:"setReminder"},readMore:{endPoint:"readMore"},resend:{endPoint:"resend"},downloadAll:{endPoint:"downloadAll"}}}),store.registerAdapter("immessage",{namespace:"crm/v2.2/messages__s",buildURL:function(e,t,a,o,i,n,s){switch(i=i.replace("/immessage",""),n){case"threads":i=i.replace("actions/__threads","__threads");break;case"readMore":i=i.replace("actions/readMore",s.id+"/__threads/"+s.messageId);break;case"resend":i=i.replace("actions/resend",s.id+"/__threads/"+s.messageId);break;case"send":i=i.replace("actions/send","__threads");break;case"attachments":i=i.replace("actions/__attachments","__attachments");break;case"sendAttachment":i=i.replace("actions/sendAttachment","__attachments");break;case"deleteConversation":i=i.replace("actions/deleteConversation",s.id);break;case"setReminder":i=i.replace("actions/setReminder",s.id+"/__threads/"+s.messageId+"/actions/remind");break;case"downloadAll":i=(i=i.replace("crm/v2.2/messages__s","crm/v2.2/__internal/messages__s")).replace("actions/downloadAll",s.id+"/__attachments/actions/downloadAll")}return i},methodForRequest:function(e){return"PATCH"===e?"PUT":e},reloadAll:function(e){return!(e.length>0)},reloadRecord:function(e){return!e||!e.config_params},parseResponse:function(e,t,a,o){return 202===a.status&&Lyte.Router.getRouteInstance().refresh(),o}}),store.registerSerializer("immessage",{payloadKey:function(){return"data"},normalizeResponse:function(e,t,a,o,i){204===i&&(a.data=[]);var n={data:[]};return a&&a.data?(n.data=this.modifyMessages(a.data),n.info=a.info,o&&n?(n.data=n.data[0],n):n):a}},{mixins:["crm-msg-common"]}),Lyte.Component.register("crm-msg-push-notify",{_template:'<template tag-name="crm-msg-push-notify"> <template is="if" value="{{expHandlers(messages.length,\'==\',1)}}"><template case="true"> <div class="push-notify"> <div class="pushMessage"> <div class="senderImage"><img src="{{getImageFile(messages[0].module,messages[0].entityId,messages[0].photoId)}}" class="avatar_48 vaM" alt="Image"></div> <div class="fL mL10 w80_per"> <span class="crmBaseColor crm-base-font-size notifyMsg dIB vaM">{{messages[0].name}}</span> <span class="greyBadge crmBaseColor mL5 crm-font-bold notifyMsg dIB vaM">{{getSingularLabel(messages[0].module)}}</span> <p class="mT5 crmBaseColor crm-small-font-size notifyMsg"> {{content}} </p> </div> <div class="cBoth"></div> </div> <div class="pushN_action"> <div class="pushN_reply"> <span class="replyTxt dB cP" data-zcqa="bm_push_reply" onclick="{{action(\'loadDetail\',messages[0].id)}}">{{getI18n("crm.button.reply")}}</span> </div> <div class="pushN_remainder"> <div class="remainderTxt cP pR" id="pushN_remainder" data-zcqa="bm_push_later" onclick="{{action(\'showReminderOptions\',false)}}">{{getI18n("crm.livedesk.pot.later")}}<span class="ico-arrow-down-solid-small svgIcons dIB op5 reminDownIco"></span></div> </div> </div> <div class="cBoth"></div> </div> </template><template case="false"><template is="if" value="{{expHandlers(messages.length,\'>\',1)}}"><template case="true"> <div class="push-notify"> <div class="pushMessage fL"> <div class="fL mL10"> {{getI18n("crm.bm.push.notify.multiple",messages.length)}} </div> <div class="cBoth"></div> </div> <div class="pushN_action fR"> <span class="cP dIB p10" data-zcqa="bm_push_loadview" onclick="{{action(\'loadView\')}}">{{getI18n("crm.label.view")}}</span> </div> <div class="cBoth"></div> </div> </template></template></template></template> <template is="if" value="{{expHandlers(reminder_messages.length,\'==\',1)}}"><template case="true"> <div class="push-notify" style="{{lbind(remainder_top)}}"> <div class="pushMessage"> <div class="senderImage"><img src="{{getImageFile(reminder_messages[0].module,reminder_messages[0].entityId,reminder_messages[0].photoId)}}" class="avatar_48 vaM" alt="Image"></div> <div class="fL mL10 w80_per"> <span class="crmBaseColor crm-base-font-size notifyMsg dIB vaM">{{reminder_messages[0].name}}</span> <span class="greyBadge crmBaseColor mL5 crm-font-bold notifyMsg dIB vaM">{{getSingularLabel(reminder_messages[0].module)}}</span> <div class="received_notify crmParagraphColor mT5 crm-small-font-size">{{getDisplayDateTime(reminder_messages[0].message_time)}}</div> <p class="mT5 crmBaseColor crm-small-font-size notifyMsg"> {{content}} </p> </div> <div class="cBoth"></div> </div> <div class="pushN_action"> <div class="pushN_reply"> <span class="replyTxt dB cP" data-zcqa="bm_push_remind_reply" onclick="{{action(\'loadDetail\',messages[0].id)}}">{{getI18n("crm.button.reply")}}</span> </div> <div class="pushN_remainder"> <div class="remainderTxt cP pR" data-zcqa="bm_push_remind_later" id="pushN_remainder" onclick="{{action(\'showReminderOptions\',true)}}">{{getI18n("crm.livedesk.pot.later")}}<span class="ico-arrow-down-solid-small svgIcons dIB op5 reminDownIco"></span></div> </div> </div> <div class="cBoth"></div> </div> </template><template case="false"><template is="if" value="{{expHandlers(reminder_messages.length,\'>\',1)}}"><template case="true"> <div class="push-notify" style="{{lbind(remainder_top)}}"> <div class="pushMessage fL"> <div class="fL mL10"> {{getI18n("crm.bm.push.notify.multiple.reminder",reminder_messages.length)}} </div> <div class="cBoth"></div> </div> <div class="pushN_action fR"> <span class="cP dIB p10" data-zcqa="bm_push_remind_loadView" onclick="{{action(\'loadView\')}}">{{getI18n("crm.label.view")}}</span> </div> <div class="cBoth"></div> </div> </template></template></template></template> <lyte-popover id="imremainderPopup" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-close-on-body-click="true" lt-prop-show="{{lbind(showReminderOptions)}}" lt-prop-type="box" lt-prop-origin-elem="#pushN_remainder" lt-prop-content-padding="0px" lt-prop-wrapper-class="pushnotifyPopover" lt-prop-boundary="{&quot;right&quot;:&quot;0&quot;}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <ul class="m0 p0 crm-base-font-size cP"> <li class="pushnotifyPopover_li" data-zcqa="bm_push_5" onclick="{{action(\'selectTimeInterval\',5)}}">{{getI18n("crm.bm.push.notify.reminder.options.minutes",5)}}</li> <li class="pushnotifyPopover_li" data-zcqa="bm_push_15" onclick="{{action(\'selectTimeInterval\',15)}}">{{getI18n("crm.bm.push.notify.reminder.options.minutes",15)}}</li> <li class="pushnotifyPopover_li" data-zcqa="bm_push_60" onclick="{{action(\'selectTimeInterval\',60)}}">{{getI18n("crm.bm.push.notify.reminder.options.hours",1)}}</li> <li class="pushnotifyPopover_li" data-zcqa="bm_push_120" onclick="{{action(\'selectTimeInterval\',120)}}">{{getI18n("crm.bm.push.notify.reminder.options.hours",2)}}</li> </ul> <div class="bottomBtn_bm" onclick="{{action(\'hideNotification\')}}" data-zcqa="bm_push_ignore"> {{getI18n("crm.bm.push.notify.ignore")}} </div> </lyte-popover-content> </template> </lyte-popover> <lyte-event-listener event-name="crmMsgNewMsg" on-fire="{{action(\'loadData\')}}"> </lyte-event-listener></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1,0]},{type:"text",position:[1,1,3,1,0]},{type:"text",position:[1,1,3,3,0]},{type:"text",position:[1,1,3,5,1]},{type:"attr",position:[1,3,1,1]},{type:"text",position:[1,3,1,1,0]},{type:"attr",position:[1,3,3,1]},{type:"text",position:[1,3,3,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,1]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"remainder_top",isLbind:!0}}},{type:"attr",position:[1,1,1,0]},{type:"text",position:[1,1,3,1,0]},{type:"text",position:[1,1,3,3,0]},{type:"text",position:[1,1,3,5,0]},{type:"text",position:[1,1,3,7,1]},{type:"attr",position:[1,3,1,1]},{type:"text",position:[1,3,1,1,0]},{type:"attr",position:[1,3,3,1]},{type:"text",position:[1,3,3,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"remainder_top",isLbind:!0}}},{type:"text",position:[1,1,1,1]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,1,0]},{type:"attr",position:[1,1,3]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,1,5]},{type:"text",position:[1,1,5,0]},{type:"attr",position:[1,1,7]},{type:"text",position:[1,1,7,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[5]},{type:"attr",position:[7]},{type:"componentDynamic",position:[7]}],_observedAttributes:["id","name","module","content","message_time","conversationId","notificationId","entityId","photoId","showThis","messages","reminder_messages","msg_data","showReminderOptions","isReminder","remainder_top","removeAll","total_count","total_reminder_count"],data:function(){return{id:Lyte.attr("string"),name:Lyte.attr("string"),module:Lyte.attr("string"),content:Lyte.attr("string"),message_time:Lyte.attr("string"),conversationId:Lyte.attr("string"),notificationId:Lyte.attr("string"),entityId:Lyte.attr("string"),photoId:Lyte.attr("string"),showThis:Lyte.attr("boolean",{default:!0}),messages:Lyte.attr("array"),reminder_messages:Lyte.attr("array"),msg_data:Lyte.attr("object"),showReminderOptions:Lyte.attr("boolean",{default:!1}),isReminder:Lyte.attr("boolean",{default:!1}),remainder_top:Lyte.attr("string"),removeAll:Lyte.attr("boolean",{default:!1}),total_count:Lyte.attr("number",{default:0}),total_reminder_count:Lyte.attr("number",{default:0})}},actions:{loadView:function(){if(this.getData("notificationId")&&crmNTCGlobal){var e="/crm/v2/signals/notifications/actions/read/"+this.getData("notificationId"),t=new crmRequestPool,a={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};t.initiate({action:e,headers:a,data:"",type:"PUT",success:function(){crmNTCGlobal.signals_count=crmNTCGlobal.signals_count-1,crmNTCGlobal.live_global_notifications_count=crmNTCGlobal.live_global_notifications_count-1,crmNTCGlobal.updateNotificationCount()},error:void 0})}Lyte.Router.transitionTo({route:"crm.tab.messages.custom-view.list",dynamicParams:[moduleRecordMapping.Messages.cvid]}).data={fromNotification:!0},this.setData("removeAll",!0),this.setData("showThis",!1)},loadDetail:function(){Lyte.Router.transitionTo({route:"crm.tab.messages.view",dynamicParams:[this.getData("conversationId")]}),this.setData("removeAll",!0),this.setData("showThis",!1)},showReminderOptions:function(e){this.setData("showReminderOptions",!0),this.setData("isReminder",e)},hideNotification:function(){this.setData("removeAll",!0)},selectTimeInterval:function(e){store.triggerAction("immessage","setReminder",{id:this.getData("conversationId")+"",messageId:this.getData("id")+""},{},"POST",{remind_after:{period:"minutes",unit:e}}).then((function(){renderingUtils.showMsgBox(I18n.getMsg("crm.bm.reminder.success"),"success")}),(function(){renderingUtils.showMsgBox(I18n.getMsg("crm.bm.reminder.failed"),"error")})),this.setData("showReminderOptions",!1),this.setData("removeAll",!0),this.setData("showThis",!1)},loadData:function(e){var t="new_message"===e.type&&e.data&&"in"===e.data.direction&&0===$L("#msg_"+e.data.id).length;if((t=t||"im_push_notification"===e.type)&&e.message_owner===Crm.userDetails.USER_ID&&Lyte.Router.getRouteInstance().getDynamicParam()!==e.conversation_id){Crm.trackSpotLightAction("Business Messages - Tab - Push notification received",{reminder:e.reminder});var a=[],o=!1;e.reminder?(a=this.getData("reminder_messages"),o=!0):a=this.getData("messages");var i={id:e.data.id,name:e.data.author.name,entityId:e.entity.id,photoId:e.entity.photoId,module:e.entity.module,content:e.data.content,conversationId:e.conversation_id,message_time:e.data.message_time};this.setData("total_count",this.getData("total_count")+1),this.setData("id",e.data.id),this.setData("name",e.data.author.name),this.setData("entityId",e.entity.id),this.setData("photoId",e.entity.photoId),this.setData("module",e.entity.module),e.data.attachments?this.setData("content",e.data.attachments[0].name):this.setData("content",e.data.content),this.setData("conversationId",e.conversation_id),this.setData("notificationId",e.notificationId),a?Lyte.arrayUtils(a,"push",i):((a=[]).push(i),e.reminder?this.setData("reminder_messages",a):this.setData("messages",a)),a.length>1&&this.setData("showReminderOptions",!1),setTimeout(this.removeNotifications,5e3,this,o);var n=this.getData("messages");n&&n.length>0?n.length>1?this.setData("remainder_top","top:100px"):1===n.length&&this.setData("remainder_top","top:130px"):this.setData("remainder_top","")}}},removeAllNotifications:function(){if(this.getData("removeAll")){var e=this.getData("isReminder")?"reminder_messages":"messages",t=this.getData(e);this.setData("showReminderOptions",!1),t&&1===t.length?Lyte.arrayUtils(t,"shift"):this.setData(e,[]),this.setData("removeAll",!1),WindowsCommunicator.notifyOtherTabs("imNotificationMessage",(new Date).getTime())}}.observes("removeAll"),removeNotifications:function(e,t){var a=t?"reminder_messages":"messages",o=t?"total_reminder_count":"total_count";try{var i=e.getData(a),n=e.getData(o);n--,e.setData(o,n),i&&(1===i.length?e.getData("showReminderOptions")||Lyte.arrayUtils(i,"shift"):n<=0&&e.setData(a,[]))}catch(e){return}},emptyMessages:function(){this.getData("messages")&&this.getData("messages").length<=0&&this.getData("reminder_messages")&&this.getData("reminder_messages").length<=0&&this.setData("showThis",!1)}.observes("messages.[]","reminder_messages.[]"),observeReminder:function(){this.getData("showReminderOptions")||(this.getData("messages")&&this.getData("messages").length<=1&&this.setData("removeAll",!0),this.getData("reminder_messages")&&this.getData("reminder_messages").length<=1&&this.setData("removeAll",!0))}.observes("showReminderOptions")},{mixins:["crm-msg-common"]});var crmInteraction={};document.addEventListener("lytetabopen",(function(e){var t=e.target;crmInteraction.addLyteTabInteraction(t)})),document.addEventListener("checkboxchange",(function(e){var t=e.target,a=t.querySelector(".on-btn");null!==a&&a.addEventListener("animationend",(function(){t.classList.remove("lyteCboxChecked"),t.classList.remove("lyteCboxUnchecked")}))})),document.addEventListener("beforeshow",(function(e){var t=e.target,a=e.target.tagName;if("LYTE-HOVERCARD"===a&&"click"===e.detail.originalEvent.type)$L(t)[0].ltProp("popoverWrapperClass","crmHovercardWithCallout");else if("LYTE-DRODPOWN"===a){var o=$L(t).hasClass("crmSmallDropdown"),i=$L(t).closest(".crmSmallDropdown").length;if(o||i>0)t.getDropBox().classList.add("crmSmallDropbox")}})),document.addEventListener("lyteAlertOpened",(function(e){var t=e.target,a=$L(t.closest(".alertWrapper"));0===t.offsetTop&&a?a.addClass("crmAlertRemoveBdrRadius"):a.removeClass("crmAlertRemoveBdrRadius")})),document.addEventListener("lyteAlertBeforeOpened",(function(e){var t=e.target,a=$L(t.closest(".alertWrapper")),o=$L(t).find(".lyteStatusIcon").length,i=a.hasClass("cxAlertWrapper");o>0&&i?a.addClass("crmHasAlertStatusIcon"):a.removeClass("crmHasAlertStatusIcon");var n=e.target._callee;"0"===n.ltProp("top")||"0px"===n.ltProp("top")?a.addClass("crmAlertRemoveBdrRadius"):a.removeClass("crmAlertRemoveBdrRadius")})),document.addEventListener("lyteModalOpened",(function(e){var t=e.target;$L(t).find("lyte-modal-content").length>0&&$L(t).find("lyte-modal-header").length>0&&$L(t).find("lyte-modal-footer").length>0&&crmInteraction.modalShadow(t)})),crmInteraction.modalShadow=function(e){var t=$L(e).find("lyte-modal-content"),a=t.scrollTop(),o=$L(e).find("lyte-modal-footer");parseInt(a+t.innerHeight())+10<t[0].scrollHeight?o.addClass("box-sh"):o.removeClass("box-sh"),t.off("scroll"),t.on("scroll",(function(){var t=$L(e).find("lyte-modal-content"),a=t.scrollTop(),o=$L(e).find("lyte-modal-footer"),i=$L(e).find("lyte-modal-header");parseInt(a+t.innerHeight())+10>=t[0].scrollHeight?o.removeClass("box-sh"):o.addClass("box-sh"),0===a?i.removeClass("box-sh"):i.addClass("box-sh")}))},document.addEventListener("lyteModalClosed",(function(){var e=event.target;$L(e).find("lyte-modal-content").off("scroll")})),crmInteraction.addLyteTabInteraction=function(e){if(e.classList.contains("lyteOuterTab")||e.classList.contains("lyteInnerTab")){var t=e.querySelector(".lyteTabActive"),a=t.clientWidth,o=t.offsetLeft,i=t.closest("lyte-tab-head"),n=i.querySelector("#lyteOuterActiveTab");if(null===n){var s=document.createElement("span"),r="";e.classList.contains("lyteOuterTab")?r="lyteOuterActiveTab":e.classList.contains("lyteInnerTab")&&(r="lyteInnerActiveTab"),s.setAttribute("class",r),s.setAttribute("id","lyteOuterActiveTab"),i.append(s),n=s}n.style.cssText="width:"+a+"px; left: "+o+"px"}},crmInteraction.bindScrollShadow=function(e){var t=null;"string"==typeof e?t=$("#"+e):"object"==typeof e&&(t=e),t.off("scroll"),t.on("scroll",(function(e){var t=$(e.target),a=t.scrollTop();parseInt(a+t.innerHeight())+10>=t[0].scrollHeight?t.removeClass("box-sh-footer"):t.addClass("box-sh-footer"),0===a?t.removeClass("box-sh-header"):t.addClass("box-sh-header")}))},_lyteUiUtils.registerDefaultValues({"lyte-tooltip":{tooltipConfig:{showdelay:500},keepAlive:!0}});
