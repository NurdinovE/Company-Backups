Lyte.Component.register("crux-form-component",{_template:'<template tag-name="crux-form-component"> <lyte-yield yield-name="cruxFormComponent" class="cruxFormComponent"></lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["widthData","labelElmArr","labelElmTextArr","labelElmIconArr","cxPropLabelWidth"],data:function(){return{widthData:Lyte.attr("array",{default:[]}),labelElmArr:Lyte.attr("array",{default:[]}),labelElmTextArr:Lyte.attr("array",{default:[]}),labelElmIconArr:Lyte.attr("array",{default:[]}),cxPropLabelWidth:Lyte.attr("string",{default:""})}},didConnect:function(){this.updateFormLabelWidth()},createSpanElement:function(){var t=getComputedStyle(document.querySelector(":root")),e=document.createElement("canvas").getContext("2d");return e.font="1.4rem "+t.getPropertyValue("--crux-primary-font"),e},removeSpanElement:function(t){t.canvas.remove()},updateFormLabelWidth:function(){var t=this.$node,e=this;if(e.data.cxPropLabelWidth){const n=parseInt(e.data.cxPropLabelWidth);(r=$L(t).find(".crmFormComponentRow, .cruxFormComponentRow")).find(".lyteLabel,.cxElementLabel").css({width:n+"px","max-width":"initial"});var a=n+395;$L(t).css({minWidth:a+"px",display:"block"})}else{if(!!!t.closest("crux-parent-form-component")){var r=$L(t).find(".crmFormComponentRow, .cruxFormComponentRow");this.setData({widthData:[]});var n=this.getData("widthData"),l=this.createSpanElement();if(0===n.length){var o=[],i=[],m=[];r.each((function(t,e){var a=$L(e).find(".lyteLabel, .cxElementLabel");if(0!==a.length){o.push(a);var r=0;a.find(".cxInfoIcon").length>0&&(r=20),i.push(r),m.push(a.text())}})),this.setData("labelElmArr",o),this.setData("labelElmIconArr",i),this.setData("labelElmTextArr",m),r.each((function(t,a){var r=Math.ceil(l.measureText(m[t]).width)+18+i[t];r&&(n[n.length]=r,e.setData("widthData",n))}))}if(n.length>0){var c=Math.max.apply(null,n);c>200&&(c=200),$(r).find(">.lyteLabel,>.cxElementLabel").css({width:c+"px"});a=c+395;$L(t).css({minWidth:a+"px",display:"block"}),this.getMethods("onFormShow")&&this.executeMethod("onFormShow",this,`${c}px`)}this.removeSpanElement(l)}}},labelWidthObserver:function(){this.updateFormLabelWidth()}.observes("cxPropLabelWidth")});
