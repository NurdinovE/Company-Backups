Lyte.Mixin.register("crm-chatbot-helper",{constructChatbotDiv:function(t,e){crmui.fromCloseOther||crmui.closeOtherWMSBars("askzia");var a=0,s=$L("#diNotificationDiv")[0].style.display;"none"!==s&&""!==s&&(Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-zianotification-mixin.js"],ResourceConstants.CRMClient),void 0,(function(){Lyte.registeredMixins["crm-zianotification-helper"].hideDiNotification()})),a=300),setTimeout((()=>{var a=this,s=!1;Crm.client_tracking("Chatbot - Ask Zia Click"),Crm.trackSpotLightAction("Chatbot - Ask Zia Click");var r=$("#chatbotDiv");r.on("keydown",(function(t){13===t.keyCode&&t.target.value.length!==t.target.value.split(" ").length-1&&(askZia.remove_support_when_no_input_from_user(),askZia.message=t.target.value)}));renderingUtils.windowOuterHeight,$("#mainMenuTabDiv").outerHeight(),$("#wmstoolbar").outerHeight();networkUtils.loadFeatureScripts(["zcrm_chatbot_Zia.js",networkUtils.getI18nJSUrl("AskZia"),networkUtils.getI18nJSUrl("Chatbot")],(function(){if("visible"!==r[0].style.visibility){if(Crm.client_tracking("Chatbot - Ask Zia Click"),Crm.trackSpotLightAction("Chatbot - Ask Zia Click"),$(".askZiaIcon").addClass("blinkEl"),0===$("#ziaChatbotDiv").length){ziaskills.setLoadingScreen=function(t){var e=$L("#askZiaCont")[0];e&&e.classList.contains("zia-active-rm")&&$L(".askziaRoutineIcon").addClass("pointlabl"),e&&e.classList.remove("zia-active-rm"),$L(t).addClass("askziaInsideLoader")};var i=void 0===Crm.userDetails.ziaZgid?"-1":Crm.userDetails.ziaZgid,d=(a.getZiaSkillsJson(),"");Crm.userDetails.isAskZiaQuerySuggEnabled&&(d="zia-attr-placeholder='"+I18n.getMsg("crm.chatbot.query.suggestion.placeholder")+"'"),r.html("<div id='ziaChatbotDiv'><zia-chat-bot skill-name='zohocrm' show-help='true' "+d+"' show-history='true' show-help='true' portal-id='"+i+"' chat-mode='popup' show-typing-suggestions='true' zia-attr-new-options='true'></zia-chat-bot><div id='entityDetail' class='entityDetail'></div></div><script type='text/javascript'>ziaskills.init(ziaJson);<\/script>"),r.css({position:"fixed",visibility:"visible",bottom:"26px"});var c="crm-ui-loaders.css";Crm.userDetails.RTL_ENABLED&&(c="crm-ui-loaders-rtl.css"),Lyte.injectResources([networkUtils.returnDependencyFiles(["crm-pathway-summary-popup.js","crm-routine-message.js","crux-criteria-component.js","crux-criteria-conditions.js","crm-chatbot-components.js","crm-chatbot-query-suggestion.js","chatbotConfig.js"],ResourceConstants.CRMClient),networkUtils.returnDependencyFiles(["crm-pathway-summary-popup.css","crm-routine-message.css","crm-chatbot-query-suggestion.css",c],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT),networkUtils.returnDependencyFiles(["zohocrm_chart.js","highcharts.js"],ResourceConstants.CRM)],(function(t){"error"!==t.type&&($("#ziaChatbotDiv").append("<crm-pathway-summary-popup></crm-pathway-summary-popup>"),$("#chatbotDiv").addClass("hideLoader"))}),(function(a){a&&a.length>0&&t&&!s&&void 0!==ziaskills&&(s=!0,ziaskills.sendMessage(e))}))}r.outerHeight();var l=$L("#askZiaCont")[0];l&&l.classList.contains("zia-active-rm")&&$L(".askziaRoutineIcon").addClass("pointlabl"),l&&l.classList.remove("zia-active-rm"),askZia.fromFooter(),crmui.WMSBarOpened(r[0]),setTimeout((()=>{t&&!s&&void 0!==ziaskills&&(s=!0,ziaskills.sendMessage(e))}),500)}else t?setTimeout((()=>{ziaskills.sendMessage(e)}),300):($L("zia-chat-bot")[0].component.setData("ziaAttrCloseCustomSuggestions",!0),$(".askZiaIcon").removeClass("blinkEl"),r.css("visibility","hidden"),askZia.toFooter(),askZia.exportChangesClose())}))}),a)},getZiaSkillsJson:function(){var t="";void 0===Crm.userDetails.CUSTOMIZE_INFO.routineMessageSeen&&(t="<div class='routineIcNewlabel'>New</div>");var e="EN";if("es_ES"===Crm.userDetails.RELEVANT_LOCALE)e="ES";else e="EN";var a=networkUtils.getCdnUrl()+"/crm/CRMClient/",s=this.getFingerPrintfiles(a);return ziaJson={zia_url:RebrandLinkUtil.getProperty("ZIA_PLATFORM_URL"),static_urls:{js_static_url:a,css_static_url:a,img_static_url:a},fingerprint_json:s,language:e,header_icons:[{iconElement:"<div class='cP askziaRoutineIcon dIB pR' data-zcqa='rmIcon'><crmutil-icon icon-name='message-refresh' icon-class='zcicn-message-refresh iconWhite'></crmutil-icon>"+t+"</div>",onClick:function(t){var e=$L(t);ziaskills.setLoadingScreen=function(t){t.addClass("askziaInsideLoader")},ziaskills.setLoadingScreen(e);var a="",s=$L(".askziaRoutineIcon");-1!==s[0].classList.value.indexOf("pointlabl")&&(a=networkUtils.lyteInitiateRequest(Crm.getCrmBasePath()+"/crminotification.do","POST",{params:{action:"updateRoutineMessage",crmcsrfparam:csrfToken}}),commonUtils.showHideLoadingDiv(!1)),s[0].classList.remove("pointlabl");for(var r=$L(".custom_content_wrapper_inner"),i=r.length,d=0;d<i;d++)r[d].remove();var c=store.findAll("dummy",null,!1,!1,{url:"/crm/v7/__zia_notifications?type=routine_msg"}),l=store.findAll("chatbot-routinemsg");Lyte.resolvePromises([c,l,a]).then((function(a){void 0===Crm.userDetails.CUSTOMIZE_INFO.routineMessageSeen?updateCustomization("routineMessageSeen",!0,(function(){Crm.client_tracking("AskZia RM Icon clicked New");var t=$L(".routineIcNewlabel");t&&t[0]&&t[0].remove()})):Crm.client_tracking("AskZia RM Icon clicked");var s=void 0!==a[0].__zia_notifications?a[0].__zia_notifications:[],r=s.length;t=$(t);var i=$L(".askZiaSetRoutineLink");void 0!==i[0]&&i[0].remove();var d=$L("#routineicond");void 0!==d[0]&&d[0].remove(),r>0?(t.append('<div class="custom_content_wrapper_inner" data-zcqa="rmResultContainer"></div>'),s.forEach((function(t,e){var a=new CrmDate(t.notification_time),s=a.getDateInPattern("MMM dd, yyyy")+" "+a.getTimeInUserPattern();$(".custom_content_wrapper_inner").append("<div id=routineResult"+e+'_parent class="botSentContainer w100_per cBoth showUserSent pB15" data-zcqa="rmResult_'+e+'"> <div class="zia_icons_bg" lt-prop-title="Asked by routine message"> <span class="zia_icons_zia_whitebg_small"></span></div></div></div>'),$("#routineResult"+e+"_parent").append("<div id=routineResult"+e+' class="botSentText botResultsDiv"></div>');var r=$("#routineResult"+e),i={crm_data_fetcher:JSON.parse(t.summary)},d=i.crm_data_fetcher.details&&i.crm_data_fetcher.details.summary&&void 0!==i.crm_data_fetcher.details.summary.message?i.crm_data_fetcher.details.summary.message:void 0!==i.crm_data_fetcher.message?i.crm_data_fetcher.message:null;void 0===i.crm_data_fetcher.details.data&&(i.crm_data_fetcher.details.data={}),i.crm_data_fetcher.details.data.title=d,i.crm_data_fetcher&&i.crm_data_fetcher.details&&i.crm_data_fetcher.details.data&&(i.crm_data_fetcher.details.data.source="routineMsg"),this.ziaRenderResultWithTitle(i,r,null,!0,!1,null,null,d),r.append('<div class="dateTimeDiv">'+s+"</div>")})),t.append('<div class="pA crmLinkColor cP crm-base-font-size askZiaSetRoutineLink zindex-1" onclick="askZia.openRoutineMessage(this)" data-zcqa="rmAddOrEdit">Add/Edit routine message</div>')):(t.append('<div id="routineicond" data-zcqa="rmGetStartedParent"></div>'),Lyte.Component.render("crm-routinemsg-getstarted",{routineConfigs:a[1]},"#routineicond")),e.removeClass("askziaInsideLoader")}))}}]},ziaJson},getFingerPrintfiles:function(t){var e={};return["@zia/ziaSkillsSdk/assets/js/zia-skills-sdk-core.js","@zia/ziaSkillsSdk/assets/js/i18n/zia_en_US_sdk.js","@zia/ziaSkillsSdk/zia-chat-bot.js","@zia/ziaSkillsSdk/assets/js/i18n.js","@zia/ziaSkillsSdk/assets/css/icons.css","@zia/ziaSkillsSdk/assets/css/icons.svg","@zia/ziaSkillsSdk/assets/css/chatBot.css","@zia/ziaSkillsSdk/assets/css/zia-columns.css","@zia/ziaSkillsSdk/assets/images/PreloaderCirclePrimary3.gif","@zia/ziaSkillsSdk/assets/images/PreloaderCircle2.gif","@zia/ziaSkillsSdk/assets/images/PreloaderGray.gif"].forEach((function(a){var s=networkUtils.returnDependencyFiles([a],ResourceConstants.CRMClient,ResourceConstants.ADDONS)[0];e["addons/"+a]=s.replace(t,"")})),e},ziaRenderResult:function(t,e,a,s,r,i,d){this.ziaRenderResultWithTitle(t,e,a,s,r,i,d,null)},ziaRenderResultWithTitle:function(t,e,a,s,r,i,d,c){var l;if(d&&(l=$L(d).parents("crm-intelligence-config-result")[0].component),t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&(t.crm_data_fetcher.details.data.showSetRoutineMsg=!0,(t.crm_data_fetcher.details&&t.crm_data_fetcher.details.di_data&&("search"===t.crm_data_fetcher.details.di_data.query_type||"help"===t.crm_data_fetcher.details.di_data.query_type)||t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&("suggestions"===t.crm_data_fetcher.details.data.output_format||"help_content"===t.crm_data_fetcher.details.data.output_format))&&(t.crm_data_fetcher.details.data.showSetRoutineMsg=!1)),t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&"suggestions"===t.crm_data_fetcher.details.data.output_format)Crm.client_tracking("AskZia - Result",{type:"Suggestions"}),e.html('<div style="padding:8px 13px;border-bottom:1px solid #eaeaea;">'+I18n.getMsg("crm.chatbot.di.suggestions")+"</div>"),askZia.showSuggestions(t.crm_data_fetcher.details.data.input_sentence,t.crm_data_fetcher.details.data.suggestions,e);else if(t&&(t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&"no_content"===t.crm_data_fetcher.details.data.output_format||t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&0===Object.keys(t.crm_data_fetcher.details.data).length)){if(Crm.client_tracking("AskZia - Result",{type:"No content"}),c){var n=renderingUtils.createHTML({name:"div"}),o=renderingUtils.createHTML({name:"div",attr:{class:"crm-font-bold crmBaseColor alignLeft mB10"},text:c}),m=renderingUtils.createHTML({name:"div",attr:{class:"crm-font-regular crmLabelColor alignLeft mB5"},text:I18n.getMsg("crm.chatbot.di.no.result")});n.append(o),n.append(m)}else{var _=t.crm_data_fetcher.details.data.isFromGS?"pR20 pL20":"paddingNeeded";n=renderingUtils.createHTML({name:"div",attr:{class:"crm-font-regular crmLabelColor alignLeft "+_},text:I18n.getMsg("crm.chatbot.di.no.result")})}e.html(n).hide().slideDown(200)}else if(t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&t.crm_data_fetcher.details.data.rows&&0!==t.crm_data_fetcher.details.data.rows.length){Crm.client_tracking("AskZia - Result",{type:"Records List"});var h=t.crm_data_fetcher.details.data,u=h.rows;if(t.crm_data_fetcher.details.data.isFromGS)for(var f=t.crm_data_fetcher.details.data.rows,p=f.length,g=0;g<p;g++)if(f[g].action&&f[g].action.click){var v=f[g].action.click;f[g].id=v.split("'")[1],f[g].moduleName=v.split("'")[3]}var y=t.crm_data_fetcher.details.display_type;y=0===y.indexOf("chart")?"pie":y.replace(" chart",""),t.crm_data_fetcher.details&&t.crm_data_fetcher.details.summary&&(t.crm_data_fetcher.details.summary.showSetRoutineMsg=t.crm_data_fetcher.details.data.showSetRoutineMsg);var C=JSON.stringify(t.crm_data_fetcher.details.summary);if(e.attr("summary",C),t.crm_data_fetcher.details.data.rows.length>=11&&!t.crm_data_fetcher.details.data.groupby_used?(t.crm_data_fetcher.details.data.rows.pop(),t.crm_data_fetcher.details.data.showmore=!0,t.crm_data_fetcher.details.data.start_index=i?i+10:11,null!==t.crm_data_fetcher.details.context.query&&(t.crm_data_fetcher.details.data.queryObj={},t.crm_data_fetcher.details.data.queryObj=t.crm_data_fetcher.details.context)):t.crm_data_fetcher.details.data.showmore=!1,"false"===t.crm_data_fetcher.details.data.groupby_used?t.crm_data_fetcher.details.data.groupby_used=!1:"true"===t.crm_data_fetcher.details.data.groupby_used&&(t.crm_data_fetcher.details.data.groupby_used=!0),t.crm_data_fetcher.details.data.groupby_used){Crm.client_tracking("AskZia - Result",{type:"Records List - Group by used"});var k,b=h.columns[0].display_value,S=h.columns[1].display_value,L=u.length,z=[];u.forEach((function(t){z.push(t.values[1].display_value)})),k=z.every(((t,e,a)=>t===a[0]))?{name:"div",attr:{class:"botChooseOptionDiv botChooseOptionDivWid"},child:[{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'bar');sE(event);"},child:[{name:"div",attr:{class:"vertical-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'line');sE(event);"},child:[{name:"div",attr:{class:"line-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer disablechatbtn",onclick:"askZia.replaceChart($(this),'table');sE(event);"},child:[{name:"div",attr:{class:"table-view"},content:"T"}]}]}:{name:"div",attr:{class:"botChooseOptionDiv"},child:[{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'bar');sE(event);"},child:[{name:"div",attr:{class:"vertical-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'pie');sE(event);"},child:[{name:"div",attr:{class:"pie-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'funnel');sE(event);"},child:[{name:"div",attr:{class:"funnel-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer",onclick:"askZia.replaceChart($(this),'line');sE(event);"},child:[{name:"div",attr:{class:"line-chart"}}]},{name:"div",attr:{class:"fL chatboticcontainer disablechatbtn",onclick:"askZia.replaceChart($(this),'table');sE(event);"},child:[{name:"div",attr:{class:"table-view"},content:"T"}]}]};var R=L<=1?"":renderingUtils.createHTML(k);if(d){var w=d.closest(".botSentText"),x=JSON.parse(w.getAttribute("data-chartjson"));for(L=t.crm_data_fetcher.details.data.rows.length,g=0;g<L;g++)x.rows.push(t.crm_data_fetcher.details.data.rows[g]);x.showmore=t.crm_data_fetcher.details.data.showmore,w.setAttribute("data-chartjson",JSON.stringify(x))}else e.attr("data-chartjson",JSON.stringify(t.crm_data_fetcher.details.data));e.attr({"data-xaxis":b,"data-message":t.crm_data_fetcher.details.data.text,"data-yaxis":S,chartType:y,chartName:t.crm_data_fetcher.details.name}).addClass("cP")}if(t.crm_data_fetcher.details.data.groupby_used&&t.crm_data_fetcher.details.display_type.includes("chart"))Crm.client_tracking("AskZia - Result",{type:"Dashboard Component"}),e.attr({onclick:"askZia.showChartinPop(this)"}).html(renderingUtils.createHTML({name:"div",attr:{class:"fR w100_per cP pT30 pB30 pL20 pR20 chartDivCont",style:"max-width:calc(430px - 110px);box-sizing:border-box;background-color:var(--bg_white)",id:"chartDivCont"}})).append(R),e.find(".chartDivCont").html(renderingUtils.createHTML({name:"div",attr:{class:"fR  cP chartDiv",style:"width:calc(430px - 150px)",id:"chartDiv"}})),askZia.createChart(t.crm_data_fetcher.details.data,e.find(".chartDiv"),y,b,S,t.crm_data_fetcher.details.name),e.addClass("noPaddingBotText");else{if(e.attr("onclick","sE()"),"false"===t.crm_data_fetcher.details.data.aggregation_used?t.crm_data_fetcher.details.data.aggregation_used=!1:"true"===t.crm_data_fetcher.details.data.aggregation_used&&(t.crm_data_fetcher.details.data.aggregation_used=!0),(!t.crm_data_fetcher.details.data.groupby_used&&t.crm_data_fetcher.details.data.aggregation_used||!i)&&(t.crm_data_fetcher.details.data.pathway=!!C,t.crm_data_fetcher.details.data.showSetRoutineMsg=t.crm_data_fetcher.details.data.pathway,t.crm_data_fetcher.details.data.context=t.crm_data_fetcher.details.context,(O=document.createElement("crm-intelligence-config-result")).setData({result:t.crm_data_fetcher.details.data})),!t.crm_data_fetcher.details.data.groupby_used&&t.crm_data_fetcher.details.data.aggregation_used){t.crm_data_fetcher.details.output_sentence&&null===c?(e.html(renderingUtils.createHTML({name:"div",attr:{class:"headLineHint",id:"chatBotDiv"},text:I18n.getMsg("crm.chatbot.di.showing.results",t.crm_data_fetcher.details.output_sentence)})),e.append(O)):c?(e.append(renderingUtils.createHTML({name:"div",attr:{class:"crm-font-bold crmBaseColor alignLeft mB10"},text:c})),e.html(O)):e.html(O),e.find(".chatbotTableParentDiv").addClass("kbiborder mT10 dIB mR15 mL15");var D=e.find(".IntelligenceConfigResultTable");D.removeClass("newtable w100_per"),D.find("td").addClass("ellipsisText alignLeft crm-font-bold crm-medium-large-font-size"),D.find("th").addClass("alignLeft crm-font-regular pB5 crmHeadingColor crm-font-bold crm-subheading-font-size")}else{i?l.methods.appendMoreData(t.crm_data_fetcher.details.data,l,d):(t.crm_data_fetcher.details.data.pathway=!!C,t.crm_data_fetcher.details.data.showSetRoutineMsg=t.crm_data_fetcher.details.data.pathway,t.crm_data_fetcher.details.output_sentence&&null===c?(e.append(renderingUtils.createHTML({name:"div",attr:{class:"headLineHint",id:"chatBotDiv"},text:I18n.getMsg("crm.chatbot.di.showing.results",t.crm_data_fetcher.details.output_sentence)})),e.append(O)):c?(e.append(renderingUtils.createHTML({name:"div",attr:{class:"crm-font-bold crmBaseColor alignLeft mB10"},text:c})),e.html(O)):e.html(O)),e.append(R).hide().slideDown(200).addClass("noPaddingBotText");var M=e.find(".IntelligenceConfigResultTable").find("th"),U=100/M.length;M.css({width:U})}e.addClass("cDefault").removeClass("cP")}}else if(t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&t.crm_data_fetcher.details.data.result&&0!==t.crm_data_fetcher.details.data.result.length&&"gsearch"===t.crm_data_fetcher.details.data.type){Crm.client_tracking("AskZia - Result",{type:"Global search"});var I=document.createElement("crm-search-result");t.crm_data_fetcher.details.data.result.message=t.crm_data_fetcher.details.message,I.setData({result:t.crm_data_fetcher.details.data.result}),e.attr("data-chartjson",JSON.stringify(t.crm_data_fetcher.details.data.result)).html(I).hide().addClass("noPaddingBotText cDefault");var T=renderingUtils.createHTML({name:"div",attr:{class:"aligncenter mB10 mT10 chatbotSecLoad crmLinkColor cP",onclick:"askZia.loadDetailContent(this)"}});e.find(".chatbotsearchResultContainer").append(T),e.find(".chatbotSecLoad").text("View detail"),e.slideDown(200)}else if(t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&t.crm_data_fetcher.details.data.result&&0!==t.crm_data_fetcher.details.data.result.length&&"module_gsearch"===t.crm_data_fetcher.details.data.type){Crm.client_tracking("AskZia - Result",{type:"Module global search"}),(I=document.createElement("crm-search-result")).setData({result:t.crm_data_fetcher.details.data.result}),e.html(I).addClass("noPaddingBotText cDefault")}else if(t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&"pre_defined"===t.crm_data_fetcher.details.data.type){if(Crm.client_tracking("AskZia - Result",{type:"Predefined"}),t.crm_data_fetcher.details.data.other_modules){var Z=t.crm_data_fetcher.details.data.result.moduleData,A=!1;if(Z)Object.values(Z).forEach((function(t){t.length>5&&!A&&(A=!0)}));t.crm_data_fetcher.details.data.result.showViewDetail=A,t.crm_data_fetcher.details.data.result.flag=1;var E="#"+e[0].id;I=Lyte.Component.render("crm-search-result",{result:t.crm_data_fetcher.details.data.result,otherModules:t.crm_data_fetcher.details.data.result,isSingleReport:t.crm_data_fetcher.details.data.single_report,message:t.crm_data_fetcher.details.message},E);e.addClass("noPaddingBotText cDefault"),e.find(".individualRenderList").css({display:"block"})}else{var O,N=$(".dbImg").length+1;t.crm_data_fetcher.details.data.id=N,c&&(t.crm_data_fetcher.details.data.name="",e.append(renderingUtils.createHTML({name:"div",attr:{class:"crm-font-bold crmBaseColor alignLeft mB10"},text:c}))),(O=document.createElement("crm-intelligence-config-result")).setData({result:t.crm_data_fetcher.details.data}),e.html(O),networkUtils.loadFeatureScripts(["zohocrm_analytics.js",networkUtils.getI18nJSUrl("dashboard")],(function(){CrmAnalytics.initChart();var e=t.crm_data_fetcher.details.data.component_type;e=t.crm_data_fetcher.details.data.component_props&&t.crm_data_fetcher.details.data.component_props.visualization_props.type?e+"_"+t.crm_data_fetcher.details.data.component_props.visualization_props.type:e;var a="dbImg_"+N;$("#"+a).append('<div class="dashboardContent dash_chart" id="chartdiv_'+a+'" style="height:calc(100% - 23px);"><div class="h100_per pR w100_per"><span class="absCenter"></span></div></div>'),CrmAnalytics.setMinMaxDimensions(e,a),CrmAnalytics.renderComponent(t.crm_data_fetcher.details.data,a)}),"undefined"!=typeof CrmAnalytics);var j=document.querySelectorAll("#chartdiv_dbImg_"+N);$(j[1]).remove();var P=$(j[0]);P.css({"margin-top":"20px"}),"kpi"===t.crm_data_fetcher.details.data.component_type?P.css({height:"auto"}):P.css({height:"210px"});var B=P.find(".d3container")[0];void 0!==B&&(B.__data__.userdata.tooltip.enabled=!1,B.__data__.redraw())}e.hide().slideDown(200)}else if(t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&"report"===t.crm_data_fetcher.details.data.type){Crm.client_tracking("AskZia - Result",{type:"Reports"});var H=t.crm_data_fetcher.details.data,q=renderingUtils.createHTML({name:"div",attr:{class:"fR crm-base-font-size crm-font-regular crmBaseColor paddingNeeded"}}),F=renderingUtils.createHTML({name:"img",attr:{src:H.url,style:"height:100px;width:100px",alt:I18n.getMsg("crm.chatbot.di.no.data")}}),J=renderingUtils.createHTML({name:"a",attr:{href:H.crmUrl},text:"open report page"});q.append(F),q.append(J),e.append(q)}else if(t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&"all_modules"===t.crm_data_fetcher.details.data.type){var W=0;Object.keys(t.crm_data_fetcher.details.data).forEach((function(a){var s=t.crm_data_fetcher.details.data[a];if(s instanceof Object){if(s.type="all_modules",s.moduleName=crmTab.getDisplayName("Potentials"),W)l.methods.appendMoreData(s,l,d);else{var r=document.createElement("crm-intelligence-config-result");r.setData({result:s}),e.html(r)}W++}}))}else if(t&&t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&"help_content"===t.crm_data_fetcher.details.data.output_format)Crm.client_tracking("AskZia - Result",{type:"Help"}),help_handling(t,e);else{if(!(t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.data&&"message_from_DI"===t.crm_data_fetcher.details.data.output_format)){if(void 0===askZia.firstMessage||!0===r){r||(askZia.firstMessage=askZia.message);var G=t.notify?"aligncenter":t.fromZiaNotification?"":"fR",V=I18n.getMsg("crm.chatbot.di.no.result");t.crm_data_fetcher&&t.crm_data_fetcher.details&&t.crm_data_fetcher.details.context&&null!==t.crm_data_fetcher.details.context.query&&(V=I18n.getMsg("crm.chatbot.di.search.no.result")),Crm.client_tracking("AskZia - Result",{type:"No content"});n=renderingUtils.createHTML({name:"div",attr:{class:"paddingNeeded crm-base-font-size crm-font-regular crmBaseColor"+G},text:V});e.html(n).hide().slideDown(200)}else askZia.secondMessage=askZia.message,e.append(askZia.createSupportOptionElement());return}Crm.client_tracking("AskZia - Result",{type:"No content"});var n=renderingUtils.createHTML({name:"div",attr:{class:"crm-base-font-size crm-font-regular crmBaseColor paddingNeeded fR"},text:t.crm_data_fetcher.details.data.message});e.html(n).hide().slideDown(200)}r||void 0!==askZia&&(askZia.firstMessage=void 0)},resetOverlayPopup:function(t){var e=$L("crm-global-search-popup")[0];e&&e.setData("gsOverlayPopup",t);var a=$L("crm-routinemsg-setroutinemsgpopup")[0];a&&a.setData("rmOverlayClose",t);var s=$L("#askZiaExploreGSResult")[0];s&&s.setData("gsExploreOverlayPopup",t)},setc:function(){return{date:[{system:"less_than",display:_cruxUtils.getI18n("is before")},{system:"greater_than",display:_cruxUtils.getI18n("is after")},{system:"greater_equal",display:">="},{system:"less_equal",display:"<="},{display:_cruxUtils.getI18n("Tomorrow"),system:"${TOMORROW}"},{system:"${TOMORROWPLUS}",display:_cruxUtils.getI18n("Tomorrow Onwards")},{system:"${YESTERDAYMINUS}",display:_cruxUtils.getI18n("Till Yesterday")},{system:"${THISMONTH}",display:_cruxUtils.getI18n("Current Month")},{system:"${NEXTMONTH}",display:_cruxUtils.getI18n("Next Month")},{system:"${THISWEEK}",display:_cruxUtils.getI18n("Current Week")},{system:"${NEXTWEEK}",display:_cruxUtils.getI18n("Next Week")},{system:"Age in Days",display:_cruxUtils.getI18n("Age in Days")},{system:"equal",display:_cruxUtils.getI18n("is")},{system:"${Current Time}",display:_cruxUtils.getI18n("Current Time")},{system:"not_equal",display:_cruxUtils.getI18n("isn't")}],cs:[{system:"${Calls.Call Status.Scheduled}",display:_cruxUtils.getI18n("Scheduled")},{system:"${Calls.Call Status.Attended Dialled}",display:_cruxUtils.getI18n("Attended Dialled")},{system:"${Calls.Call Status.Unattended Dialled}",display:_cruxUtils.getI18n("Unattended Dialled")},{system:"${Calls.Call Status.Overdue}",display:_cruxUtils.getI18n("Overdue")},{system:"${Calls.Call Status.Cancelled}",display:_cruxUtils.getI18n("Cancelled")},{system:"${Calls.Call Status.Received}",display:_cruxUtils.getI18n("Received")},{system:"${Calls.Call Status.Missed}",display:_cruxUtils.getI18n("Missed")},{system:"${Calls.Call Status.Scheduled Attended}",display:_cruxUtils.getI18n("Scheduled Attended")},{system:"${Calls.Call Status.Scheduled Attended Delay}",display:_cruxUtils.getI18n("Scheduled Attended Delay")},{system:"${Calls.Call Status.Scheduled Unattended}",display:_cruxUtils.getI18n("Scheduled Unattended")},{system:"${Calls.Call Status.Scheduled Unattended Delay}",display:_cruxUtils.getI18n("Scheduled Unattended Delay")}]}}});
