Lyte.Component.register("crm-social-convo-inner-new",{_template:'<template tag-name="crm-social-convo-inner-new"> <template is="if" value="{{expHandlers(cursor,\'&amp;&amp;\',expHandlers(cursor,\'!=\',\'\'))}}"><template case="true"> <div class="showMoreNew cP pT10 pB15 aligncenter" data-zcqa="social_tab_message_detail" onclick="{{action(\'getMessageDetail\',this,brand.id,network,thread_id,cursor,entity.id,place_type)}}"> <span class="crm-small-font-size crmLinkColor"> {{getI18n("crm.nsocial.tab.view.more.convo")}} </span> </div> </template></template> <template is="if" value="{{expHandlers(data,\'&amp;&amp;\',data[0])}}"><template case="true"> <template is="for" items="{{data}}" item="item" index="index"> <template is="if" value="{{item.showRight}}"><template case="true"> <div class="socMsgShowOnRight mT15"> <span class="socMsgPhoto pR soc{{item.network}}SmallIcon"> <img src="{{if(item.sender.image,item.sender.image,item.sender.picture)}}" alt="Image" class="socMsgPhotoImg"> </span> <div class="socMsgTextOuter fR pR w90_per"> <template is="if" value="{{item.message}}"><template case="true"><pre class="socPreTag"><span class="mR10 crmNotFoundColor crm-extra-small-font-size vH socConvoTime mB3">{{parseDate(item.created_at)}}</span><span class="socMsgText">{{unescape(item.message)}}</span></pre></template></template> <template is="if" value="{{item.attachments[0].image}}"><template case="true"> <template is="if" value="{{expHandlers(item.message,\'!\')}}"><template case="true"><span class="mR10 crmNotFoundColor crm-extra-small-font-size vH socConvoTime mB3">{{parseDate(item.created_at)}}</span></template></template> <div class="socFbMessageImg {{if(item.message,\'\',\'socMsgText\')}}"> <img src="{{item.attachments[0].image.src}}" onerror="{{action(\'onError\',this,item.attachments[0].image.alt)}}" class="contentimage socIntegImage" alt="Image"> </div> </template></template> </div> <div class="cBoth"></div> </div> </template><template case="false"> <div class="socMsgShowOnLeft mT15"> <span class="socMsgPhoto pR soc{{item.network}}SmallIcon"> <img src="{{if(item.sender.image,item.sender.image,item.sender.picture)}}" alt="Image" class="socMsgPhotoImg"> </span> <div class="socMsgTextOuter fL pR w90_per"> <template is="if" value="{{item.message}}"><template case="true"><pre class="socPreTag"><span class="socMsgText">{{unescape(item.message)}}</span><span class="mL10 crmNotFoundColor crm-extra-small-font-size vH socConvoTime mB3">{{parseDate(item.created_at)}}</span></pre></template></template> <template is="if" value="{{item.attachments[0].image}}"><template case="true"> <div class="socFbMessageImg {{if(item.message,\'\',\'socMsgText\')}}"> <img src="{{item.attachments[0].image.src}}" onerror="{{action(\'onError\',this,item.attachments[0].image.alt)}}" class="contentimage socIntegImage" alt="Image"> </div> <template is="if" value="{{expHandlers(item.message,\'!\')}}"><template case="true"><span class="mL10 crmNotFoundColor crm-extra-small-font-size vH socConvoTime mB3">{{parseDate(item.created_at)}}</span></template></template> </template></template> </div> <div class="cBoth"></div> </div> </template></template> </template> </template><template case="false"> <template is="if" value="{{expHandlers(next_page,\'!\')}}"><template case="true"> <div id="dmNoContent" class="mT20 mB20 aligncenter"> <div class="noDmmsg socialImg socialImgsvg"></div> <template is="if" value="{{personal}}"><template case="true"> <div class="noConv mT5 mB8">{{getI18n("crm.social.integ.personal.dm.message1")}}</div> </template><template case="false"> <div class="noConv mT5 mB8">{{getI18n("crm.nsocial.no.message")}}</div> <div class="dmStart">{{getI18n("crm.nsocial.start.message")}}</div> </template></template> </div> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0,0]},{type:"text",position:[0,1,0]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0,0]},{type:"text",position:[0,1,0]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["network","entity","cursor","brand","thread_id","data","next_page","personal"],data:function(){return{network:Lyte.attr("string"),entity:Lyte.attr("object"),cursor:Lyte.attr("string"),brand:Lyte.attr("object"),thread_id:Lyte.attr("string"),data:Lyte.attr("array"),next_page:Lyte.attr("boolean"),personal:Lyte.attr("boolean")}},actions:{getMessageDetail:function(e,t,a,s,o,i,n){if(!this.checkReauthStatus(t,a)){if(void 0!==e)(e=$L(e)).html(""),e.append(renderingUtils.createHTML({name:"img",attr:{src:networkUtils.getImageUrl("loading.gif",ResourceConstants.CRM)}}));t||(t=$L(".selectedBrand").attr("value"));var c={brand_id:t,network:a},l={};o&&(l.cursor={c_cursor:o});var r={brand_id:t,thread_id:s,network:a,cursor:o,place_type:n,entity_id:i},p=this;app.store.makeRequest("findRecord","crm_social_message",s,l,void 0,void 0,c).then((function(e){p.renderMessageDetails(r,e)}))}},onError:function(e,t){e.onerror=null,e.src=t}},renderMessageDetails:function(e,t){var a=renderingUtils.tabLayerTop()+renderingUtils.tabLayerOuterHeight();(t=this.processMessageDataForRender(t.crm_social_message?t.crm_social_message:t={crm_social_message:t})).network=e.network,t.thread_id=e.thread_id,t.place_type=e.place_type,t.brand={id:e.brand_id};var s=document.createElement("crm-social-convo-inner-new"),o=document.createElement("crm-social-convo-outer-new"),i=$L(".message_"+e.entity_id+"_"+e.place_type);if(e.cursor){var n=$L(".socViewMsgParent");n&&0===n.length&&(n=$L(".socMsgDetailView"));var c=n[0].scrollHeight+42,l=i,r=l.find(".showMoreNew");r[0]&&r[0].remove(),t.next_page=!0,s.setData(t),l[0].prepend(s),n.scrollTop(n[0].scrollHeight-c)}else{switch(s.setData(t),o.setData(t),t.place_type){case"rightpanel_popup":i.html(),i.append(s);break;case"related_list":var p=$L("#socIntDetView");p.html(),o.setData("related_list",!0),p.append(o),p.addClass("socOuterContainer"),$L(".socialBackToColumn").removeClass("dN");break;case"sales_signals":$L("#signalPopupViewContent").find("#loadMsg").hide(),$L("#signalPopupInnerDiv").html(o).addClass("socOuterContainer"),this.setHeightForConvoPopup("Msg"),$L(".socViewConvoClose").hide();break;default:var m=$L(".socViewConvoInner");m.html(o),commonUtils.showHideLoadingDiv(!1),m.css("top",a),this.setHeightForConvoPopup("Msg")}var d="rightpanel_popup"===t.place_type?"socMsgDetailView":"socViewMsgParent",g=$L("."+d),y=g.find("> div").last();if("socViewMsgParent"===d&&(y=g.find("div").last()),y.length>0){var u=y.position().top+y.outerHeight();g.scrollTop(u)}thirdPartyUtils.titleForEllipsis(".socViewMsgName")}}},{mixins:["crm-social-tab","crm-social-tab_actions","crm-social-integration"]}),Lyte.Component.register("crm-social-convo-outer-new",{_template:'<template tag-name="crm-social-convo-outer-new"> <template is="if" value="{{expHandlers(related_list,\'||\',sales_signal)}}"><template case="true"> <div class="socViewMsgHeader aligncenter pR"> <span class="backtoIcon socialBackToColumn pA {{if(ifEquals(sales_signal,\'true\'),\'dN\',\'\')}}" data-zcqa="social_tab_convo_back_to_msg" onclick="{{action(\'backToMessages\')}}"></span> <div class="socMsgPhoto dIB vaM mR10 pR soc{{network}}SmallIcon"> <img src="{{entity.image}}" class="socMsgPhotoImg dIB vaM" alt="Image"> </div> <div class="alignLeft dIB vaM maxW70per"> <div class="socViewMsgName ellipsistext crm-base-font-size crmBaseColor">{{entity.name}}</div> <template is="if" value="{{entity.screen_name}}"><template case="true"><span class="dIB crm-small-font-size crmNotFoundColor mT3">{{entity.screen_name}}</span></template></template> </div> </div> <div class="socViewMsgParent p20 message_{{entity.id}}_{{place_type}} {{if(if_lt_len(perm,3),\'\',\'socViewMsgParentNoReply\')}}" id="socDirMsgContent" onscroll="{{action(\'scrollShadow\',this,\'socViewMsgHeader\')}}"> <crm-social-convo-inner-new network="{{network}}" entity="{{entity}}" cursor="{{cursor}}" brand="{{brand}}" thread_id="{{thread_id}}" data="{{data}}" next_page="{{next_page}}" personal="{{personal}}" place_type="{{place_type}}"></crm-social-convo-inner-new> </div> <template is="if" value="{{if_lt_len(perm,3)}}"><template case="true"> <div class="socViewMsgReply flexAlignStart p20 w100_per boxBB"> <span class="socReplyImg pR dIB soc{{network}}SmallIcon"> <img src="{{account.info.picture}}" class="socUserReplyImage dIB vaT" alt="Image"> </span> <div class="socReplyTextBox bg_white pR"> <div class="flexAlignCenter spaceBetween"> <lyte-input lt-prop-id="socDetailViewMsg" class="socReplyTemplateInput w85_per" lt-prop-class="socReplyTemplateInputText" text_id="{{entity.id}}_{{place_type}}" lt-prop-type="textarea" lt-prop-text-area-resize="{&quot;vertical&quot;:false,&quot;horizontal&quot;:false}" lt-prop-direction="horizontal" lt-prop-appearance="box" lt-prop-maxlength="10000" autocomplete="off" data-zcqa="social_tab_message_text" onkeydown="{{action(\'processText\',entity.id,place_type,false)}}" on-value-change="{{method(\'processText\',entity.id,place_type,false)}}" lt-prop-value="{{lbind(message)}}" lt-prop-placeholder="{{getI18n(\'crm.social.integ.write.message\')}}"> </lyte-input> <span class="socialImgsvg socAttachIcon mR5 vaM dIB"> <input type="file" id="commentimage" class="socialCommonAttach pA" accept="image/*" onchange="{{action(\'onImageSelected\',event,this,place_type,network)}}" data-zcqa="attach_image_rel_list"> </span> <lyte-button id="{{entity.id}}_{{place_type}}" lt-prop-size="small" data-zcqa="social_tab_message_send" lt-prop-appearance="primary" onclick="{{action(\'postMessage\',this,brand.id,network,conversation_id,entity.id,place_type)}}" lt-prop-disabled="{{sendButton}}"> <template is="registerYield" yield-name="text"> <span class="socBtnLoadText" id="zso_update_brand_btn">{{getI18n("crm.button.send")}}</span> <span class="socBtnLoading dN"> <span class="socBtnLoadCircle mR3"></span><span class="socBtnLoadCircle mR3"></span><span class="socBtnLoadCircle"></span> </span> </template> </lyte-button> </div> <div class="socReplyAttImg mT10 pR dN socialCommonPreviewDiv"> <div class="socReplyAttImgs fL"> <img id="soc_comment_img" src="{{getCrmImageUrl(\'spacer.gif\')}}" class="socialCommonPreview w100 h100" alt="Image"> </div> <div class="cBoth"></div> <span data-zcqa="dm_remove_image_rel_list" class="zcrm_svgIcons socRepImgClose pA cP" onclick="{{action(\'removeImage\',this)}}"></span> </div> </div> </div> </template></template> </template><template case="false"> <lyte-modal lt-prop-wrapper-class="socAttachInModal" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;center&quot;}" lt-prop-width="700px" lt-prop-max-height="80%" lt-prop-show="{{lbind(renderMessageDetail)}}" on-close="{{method(\'closeMessagePopup\')}}" lt-prop-show-close-button="true" on-show="{{method(\'scrollConvoEnd\')}}" id="socConvoMessageModal"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="socConvoMsgHeader pR zi1 br_bottom_border4 aligncenter"> <div class="crm-font-regular pR"> <span class="dN backtoIcon vaM socialBackToColumn pA" data-zcqa="social_tab_convo_back_to_msg" onclick="{{action(\'backToMessages\')}}"></span> <div class="socMsgPhoto dIB vaM mR10 pR soc{{network}}SmallIcon"> <img src="{{entity.image}}" class="socMsgPhotoImg dIB vaM" alt="Image"> </div> <div class="alignLeft dIB vaM maxW70per"> <div class="socViewMsgName ellipsistext crm-base-font-size crmBaseColor crm-font-bold">{{entity.name}}</div> <template is="if" value="{{entity.screen_name}}"><template case="true"> <span class="dIB crm-small-font-size crmNotFoundColor mT3">{{entity.screen_name}}</span> </template></template> </div> </div> </lyte-modal-header> <lyte-modal-content id="socDirMsgModalContent" onscroll="{{action(\'scrollShadow\',this,\'socConvoMsgHeader\')}}"> <div class="socViewMsgParent message_{{entity.id}}_{{place_type}}" onscroll="{{action(\'scrollShadow\',this,\'socViewMsgHeader\')}}"> </div> </lyte-modal-content> <template is="if" value="{{if_lt_len(perm,3)}}"><template case="true"> <lyte-modal-footer class="p0"> <div class="socViewMsgReply p20"> <span class="socReplyImg pR dIB soc{{network}}SmallIcon"> <img src="{{account.info.picture}}" class="socUserReplyImage dIB vaT" alt="Image"> </span> <div class="socReplyTextBox dIB vaT bg_white"> <div class="flexAlignCenter spaceBetween"> <lyte-input lt-prop-id="socDirMsg" class="socReplyTemplateInput w85_per" lt-prop-class="socReplyTemplateInputText" text_id="{{entity.id}}_{{place_type}}" lt-prop-type="textarea" lt-prop-direction="horizontal" lt-prop-text-area-resize="{&quot;vertical&quot;:false,&quot;horizontal&quot;:false}" lt-prop-appearance="box" lt-prop-maxlength="10000" autocomplete="off" data-zcqa="social_tab_message_text" onkeydown="{{action(\'processText\',entity.id,place_type,false)}}" on-value-change="{{method(\'processText\',entity.id,place_type,false)}}" lt-prop-value="{{lbind(message)}}" lt-prop-placeholder="{{getI18n(\'crm.social.integ.write.message\')}}"> </lyte-input> <span class="socialImgsvg socAttachIcon mR5 vaM dIB"> <input type="file" id="commentimage" class="socialCommonAttach pA" accept="image/*" onchange="{{action(\'onImageSelected\',event,this,place_type,network)}}" data-zcqa="attach_image_soc_tab"> </span> <lyte-button id="{{entity.id}}_{{place_type}}" lt-prop-size="small" data-zcqa="social_tab_message_send" lt-prop-appearance="primary" onclick="{{action(\'postMessage\',this,brand.id,network,conversation_id,entity.id,place_type)}}" lt-prop-disabled="{{sendButton}}"> <template is="registerYield" yield-name="text"> <span class="socBtnLoadText" id="zso_update_brand_btn">{{getI18n("crm.button.send")}}</span> <span class="socBtnLoading dN"> <span class="socBtnLoadCircle mR3"></span><span class="socBtnLoadCircle mR3"></span><span class="socBtnLoadCircle"></span> </span> </template> </lyte-button> </div> <div class="socReplyAttImg mT10 pR dN socialCommonPreviewDiv"> <div class="socReplyAttImgs fL"> <img id="soc_comment_img" src="{{getCrmImageUrl(\'spacer.gif\')}}" class="socialCommonPreview w100 h100" alt="Image"> </div> <div class="cBoth"></div> <span data-zcqa="dm_remove_image_soc_tab" class="zcrm_svgIcons socRepImgClose pA cP" onclick="{{action(\'removeImage\',this,id,place_type)}}"></span> </div> </div> </div> </lyte-modal-footer> </template></template> </template> </lyte-modal> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,5,1,0]},{type:"attr",position:[1,5,3]},{type:"if",position:[1,5,3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,3,1,1]},{type:"componentDynamic",position:[1,3,1,1]},{type:"attr",position:[1,3,1,3,1]},{type:"attr",position:[1,3,1,5]},{type:"registerYield",position:[1,3,1,5,1],dynamicNodes:[{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1,3,1,5]},{type:"attr",position:[1,3,3,1,1]},{type:"attr",position:[1,3,3,5]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,1,3,1]},{type:"text",position:[1,1,5,1,0]},{type:"attr",position:[1,1,5,3]},{type:"if",position:[1,1,5,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,3,1,1]},{type:"componentDynamic",position:[1,1,3,1,1]},{type:"attr",position:[1,1,3,1,3,1]},{type:"attr",position:[1,1,3,1,5]},{type:"registerYield",position:[1,1,3,1,5,1],dynamicNodes:[{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1,1,3,1,5]},{type:"attr",position:[1,1,3,3,1,1]},{type:"attr",position:[1,1,3,3,5]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["network","entity","perm","account","conversation_id","cursor","brand","thread_id","data","next_page","personal","renderMessageDetail","related_list","sendButton","message","file","sales_signal"],data:function(){return{network:Lyte.attr("string"),entity:Lyte.attr("object"),perm:Lyte.attr("number"),account:Lyte.attr("object"),conversation_id:Lyte.attr("string"),cursor:Lyte.attr("string"),brand:Lyte.attr("object"),thread_id:Lyte.attr("string"),data:Lyte.attr("array"),next_page:Lyte.attr("boolean"),personal:Lyte.attr("boolean"),renderMessageDetail:Lyte.attr("boolean",{default:!1}),related_list:Lyte.attr("boolean",{default:!1}),sendButton:Lyte.attr("boolean",{default:!0}),message:Lyte.attr("string"),file:Lyte.attr("object"),sales_signal:Lyte.attr("boolean",{default:!1})}},actions:{postMessage:function(e,t,a,s,o,i){this.setData("sendButton",!0);var n=this.getData("file");this.postMessage(e,t,a,s||o,o,i,this.data.message,n),this.data.message="",delete this.data.file},onImageSelected:function(e,t,a,s){e.stopPropagation(),this.stopEvent(e);var o=$L("crm-social-convo-outer-new")[0].component.methods,i=o.processImage(e,t,a,s);i&&this.setData({file:i}),o.processText()},removeImage:function(e){this.stopEvent(event),delete this.data.file,Lyte.registeredMixins["crm-social-tab_actions"].removeImage(e),this.processText()},backToMessages:function(){this.backToMessages()},viewConvoClose:function(e){this.setData("renderMessageDetail",!1)},scrollShadow:function(e,t){this.applyShadow(e,t)},processTextPaste:function(e,t,a){var s=this.data.message;s.length>0&&this.setData("disabledBut",!1),0===s.length&&this.setData("disabledBut",!0)},showProfileInfo:function(e){var t=Lyte.registeredMixins["crm-social-integration"],a=$L(e.currentTarget);t.showSocialProfilePanel(a,"user_search")},getFilterSearchResultsByInput:function(e,t,a){var s=Lyte.registeredMixins["crm-social-tab"];e&&"keyword_search"===t&&s.getFilterFeedsCommon(void 0,void 0,t,a,e,void 0,void 0,void 0,"rightpanel_popup")},processText:function(){this.processTextConvo()}},methods:{processText:function(){$L("crm-social-convo-outer-new")[0].component.processTextConvo()},closeMessagePopup:function(){var e=$L("crm-social-convo-outer-new");e&&e.length>0&&e[0].remove()},processImage:function(e,t,a,s){var o=(e=e||window.event).target.files[0],i=$L(t),n=[];if(s)n[s]=!0;else for(var c=s||$L(".socPopPostImg").find(".networkActive"),l=c.length,r=0;r<l;r++){n[s=c[r].getAttribute("network")]=!0}if(o.size>5242880&&n.twitter||o.size>26214400&&n.facebook||!n.twitter&&!n.facebook)return i.val(""),renderingUtils.showCustomAlert(I18n.getMsg("crm.nsocial.tab.image.maximum"),void 0,!0),!1;if("related_list"==a){var p=Lyte.registeredMixins["crm-social-integration"].changeFileName(o),m=$L(t).closest(".socViewMsgReply").find(".socialCommonPreviewDiv");m.removeClass("dN");var d=new FileReader,g=m.find(".socialCommonPreview");return d.onload=function(e){g.attr("src",e.target.result)},d.readAsDataURL(p),p}p=Lyte.registeredMixins["crm-social-integration"].changeFileName(o);var y=i.closest(".socAttachInModal"),u=i.closest(".postResponse"),v=y&&y.length>0?y.find(".socReplyAttImg"):u.find(".socReplyAttImg");g=y&&y.length>0?y.find(".socialCommonPreview"):u.find(".socialCommonPreview");return v.removeClass("dN"),g.attr("title",o.name),(d=new FileReader).onload=function(e){g.attr("src",e.target.result);var t=$L("#socConvoMessageModal");t.length>0&&t[0].calculateOffset()},d.readAsDataURL(p),p},scrollConvoEnd:function(){var e=document.getElementById("socDirMsgModalContent").scrollHeight;setTimeout((function(){$L("#socDirMsgModalContent").scrollTop(e)}),500)}},processTextConvo:function(){var e=this.data.message;return e&&e.length>0&&this.setData("sendButton",!1),e&&0!==e.length||this.setData("sendButton",!0),this.data.file&&this.setData("sendButton",!1),!0}},{mixins:["crm-social-tab","crm-social-tab_actions","crm-social-integration"]});
