Lyte.Component.register("motivator-notification-card",{_template:'<template tag-name="motivator-notification-card" onclick="{{action(\'readCardThenOpenAbt\',event,\'read\')}}"> <template is="if" value="{{expHandlers(fromSource,\'===\',&quot;motivator&quot;)}}"><template case="true"> <div class="gs_nc_del_icon right-8 pA cP dN {{if(isDeleteClicked,\'dNImp\',\'\')}} {{if(ifEquals(fromSource,\'crm\'),\'gsDltIcon\',\'\')}}" onclick="{{action(\'deleteCard\',event,this,\'delete\')}}" id="{{recordId}}"></div> </template></template> <template is="if" value="{{moreMsgCount}}"><template case="true"> <span class="gs_nc_more_txt pA cP f11 {{if(ifEquals(fromSource,\'crm\'),\'\',\'dN\')}}">{{getI18n(\'gs.noty.more\',moreMsgCount)}}</span> </template></template> <template is="if" value="{{expHandlers(expHandlers(notification.message_info.type,\'==\',&quot;completed&quot;),\'&amp;&amp;\',expHandlers(notification.feature,\'==\',&quot;game&quot;))}}"><template case="true"> <div class="pB20"> <div class="dF gs_nc_tlte_bg "> <div class="dF flexDC fg1"> <div class="dF aIC "> <div class="fg1"> <span class="gs_nc_gmWinner_banner mB5 dIF aIC fShrink f12 motivator_font_semiBold">{{getI18n(\'gs.winners\')}}</span> </div> <span class=" f13 gs_nc_txtColor {{if(ifNotEquals(fromSource,\'crm\'),\'\',\'dN\')}}">{{motivatorNotificationTimeFormat(notification.notified_time,recordIndex)}}</span> <template is="if" value="{{expHandlers(notification.read,\'==\',false)}}"><template case="true"> <div class="gs_nc_rd_dot mL15 fShrink {{if(ifNotEquals(fromSource,\'crm\'),\'\',\'dN\')}} fShrink"></div> </template><template case="false"> <div class="gs_nc_rd_dot mL15 vh {{if(ifNotEquals(fromSource,\'crm\'),\'\',\'dN\')}} fShrink"></div> </template></template> </div> <div class="dF aIC"> <template is="if" value="{{expHandlers(fromSource,\'===\',&quot;crm&quot;)}}"><template case="true"> <lyte-text class=" f15 gs_np_title_gmWinner semibold" lt-prop-value="{{notification.message_info.resource.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </template><template case="false"> <lyte-text class=" f15 gs_nc_title_gmWinner motivator_font_semiBold" lt-prop-value="{{notification.resource.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </template></template> <template is="if" value="{{expHandlers(fromSource,\'===\',&quot;motivator&quot;)}}"><template case="true"> <div class="gs_star_icon fShrink gs_iconsprite gs_fav mL10 cP fg1 {{if(notification.favourite,\'gs_star_icon_filled\',\'gs_favStar\')}} fShrink" onclick="{{action(\'markAsFavourite\',this,event)}}" lt-prop-title="{{if(notification.favourite,\'\',getI18n(\'gs.markasfav\'))}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></div> </template></template> </div> <p class="f13 mT7 gs_nc_txtColor">{{unescape(generateMessage(notification))}}</p> </div> </div> <template is="for" items="{{notification.message_info.related_info}}" item="participant" index="index"> <div class="pL20 pR20 dF aIC pT20"> <template is="if" value="{{expHandlers(notification.message_info.related_info[0].type,\'===\',&quot;user&quot;)}}"><template case="true"> <img src="{{getUserImageUrl(participant.resource.id)}}" class="gs_userIcon gs_user_team_Icon{{expHandlers(index,\'+\',1)}} cP mR15" data-zcqa="gsUserProfileImg_{{participant.resource.id}}" id="gs_profileimg_{{participant.resource.id}}" alt="user"> </template><template case="false"><template is="if" value="{{expHandlers(notification.message_info.related_info[0].type,\'===\',&quot;team&quot;)}}"><template case="true"> <template is="if" value="{{hasTeamLogo(participant.resource.id)}}"><template case="true"> <img alt="teamlogo" class="gs_teamIcon mR15 gs_user_team_Icon{{expHandlers(index,\'+\',1)}}" src="{{getTeamLogoUrl(participant.resource.id)}}" data-zcqa="gsteamlogo"> </template><template case="false"> <span class="gs_teamIcon mR15 gs_userIcon gs_user_team_Icon{{expHandlers(index,\'+\',1)}}" data-zcqa="gs_game_card_parti_name">{{getTeamIconText(participant.resource.name)}}</span> </template></template> </template></template></template></template> <div class="dF flexDC fg1"> <div class="dF"> <lyte-text class=" f14 mW230" lt-prop-value="{{participant.resource.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </div> <div class="dF mT3"> <p class=" f13 alignCenter "><span class="motivator_font_semiBold">{{participant.details.game_points}}</span> <span class="f13">{{getI18n(\'gs.points\')}}</span></p> </div> </div> <span class="gs_badge_sprite gs_trophy{{expHandlers(index,\'+\',1)}} gs_nc_trophy_icon fShrink"></span> </div> </template> </div> </template><template case="false"> <div class="dF {{if(ifEquals(fromSource,\'crm\'),\'gs_nc_pdng\',\'\')}}"> <template is="if" value="{{expHandlers(notification.feature,\'==\',&quot;game&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(notification.message_info.type,\'==\',&quot;level_up&quot;),\'&amp;&amp;\',expHandlers(expHandlers(notification.message_info.position.from,\'<=\',5),\'!\')),\'&amp;&amp;\',expHandlers(expHandlers(notification.message_info.position.to,\'<=\',5),\'!\'))}}"><template case="true"> <div class="gs_nc_arrow_up_icon bR50p fShrink"></div> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(notification.message_info.type,\'==\',&quot;level_down&quot;),\'&amp;&amp;\',expHandlers(expHandlers(notification.message_info.position.from,\'<=\',5),\'!\')),\'&amp;&amp;\',expHandlers(expHandlers(notification.message_info.position.to,\'<=\',5),\'!\'))}}"><template case="true"> <div class="gs_nc_arrow_down_icon bR50p fShrink"></div> </template><template case="false"><template is="if" value="{{expHandlers(notification.message_info.type,\'==\',&quot;deleted&quot;)}}"><template case="true"> <div class="gs_nc_rmv_icon bR50p fShrink"></div> </template><template case="false"> <div class="gs_nc_icon_bg_blue bR50p fShrink gs_games_image"></div> </template></template></template></template></template></template> </template><template case="false"><template is="if" value="{{expHandlers(notification.feature,\'==\',&quot;target&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(notification.message_info.type,\'==\',&quot;completed&quot;)}}"><template case="true"> <span class="gs_badge_sprite {{getBadgeNameMap(notification.message_info.related_info[0].resource.name)}} gs_badge_align fShrink"></span> </template><template case="false"><template is="if" value="{{expHandlers(notification.message_info.type,\'==\',&quot;deleted&quot;)}}"><template case="true"> <div class="gs_nc_rmv_icon bR50p fShrink"></div> </template><template case="false"> <div class="gs_nc_icon_bg_oragne bR50p fShrink"></div> </template></template></template></template> </template><template case="false"><template is="if" value="{{expHandlers(notification.feature,\'===\',&quot;kpi&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(notification.message_info.type,\'===\',&quot;deleted&quot;)}}"><template case="true"> <div class="gs_nc_rmv_icon bR50p pR fShrink"></div> </template><template case="false"> <div class="gs_nc_icon_bg_blue bR50p pR gs_kpi_image fShrink"></div> </template></template> </template></template></template></template></template></template> <div class="fg1 mL15"> <div class="dF aIC pB5 "> <template is="if" value="{{expHandlers(expHandlers(notification.message_info.position.from,\'<=\',5),\'||\',expHandlers(notification.message_info.position.to,\'<=\',5))}}"><template case="true"> <div class="dF fg1 aIC"> <template is="if" value="{{expHandlers(fromSource,\'===\',&quot;crm&quot;)}}"><template case="true"> <lyte-text class=" f15 pT10 gs_np_title_gmWinner semibold" lt-prop-value="{{notification.message_info.resource.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </template><template case="false"> <lyte-text class=" f15 pT10 maxW150 motivator_font_semiBold" lt-prop-value="{{notification.resource.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </template></template> <template is="if" value="{{expHandlers(fromSource,\'===\',&quot;motivator&quot;)}}"><template case="true"> <div class="gs_star_icon gs_iconsprite gs_fav mL10 mT10 cP fg1 {{if(notification.favourite,\'gs_star_icon_filled\',\'gs_favStar\')}}" onclick="{{action(\'markAsFavourite\',this,event)}}" lt-prop-title="{{if(notification.favourite,\'\',getI18n(\'gs.markasfav\'))}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></div> </template></template> </div> </template><template case="false"> <div class="fg1 dF"> <template is="if" value="{{expHandlers(fromSource,\'===\',&quot;crm&quot;)}}"><template case="true"> <lyte-text class=" f15 gs_np_title_gmWinner semibold" lt-prop-value="{{notification.message_info.resource.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </template><template case="false"> <lyte-text class=" f15 maxW150 motivator_font_semiBold" lt-prop-value="{{notification.resource.name}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </template></template> <template is="if" value="{{expHandlers(fromSource,\'===\',&quot;motivator&quot;)}}"><template case="true"> <div class="gs_star_icon gs_iconsprite gs_fav mL10 cP fg1 {{if(notification.favourite,\'gs_star_icon_filled \',\'gs_favStar \')}}" onclick="{{action(\'markAsFavourite\',this,event)}}" lt-prop-title="{{if(notification.favourite,\'\',getI18n(\'gs.markasfav\'))}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></div> </template></template> </div> </template></template> <span class=" f13 gs_nc_txtColor {{if(ifNotEquals(fromSource,\'crm\'),\'\',\'dN\')}}">{{motivatorNotificationTimeFormat(notification.notified_time,recordIndex)}}</span> <template is="if" value="{{expHandlers(notification.read,\'===\',false)}}"><template case="true"> <div class="gs_nc_rd_dot mL15 {{if(ifNotEquals(fromSource,\'crm\'),\'\',\'dN\')}} fShrink"></div> </template><template case="false"> <div class="gs_nc_rd_dot mL15 vh {{if(ifNotEquals(fromSource,\'crm\'),\'\',\'dN\')}} fShrink"></div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(notification.message_info.type,\'==\',&quot;level_up&quot;),\'||\',expHandlers(notification.message_info.type,\'==\',&quot;level_down&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(notification.message_info.position.from,\'<=\',5),\'||\',expHandlers(notification.message_info.position.to,\'<=\',5)))}}"><template case="true"> <span class="dN"></span> </template><template case="false"> <p class="f13 gs_nc_txtColor">{{unescape(generateMessage(notification))}}</p> </template></template> <template is="if" value="{{expHandlers(expHandlers(notification.message_info.type,\'==\',&quot;created&quot;),\'&amp;&amp;\',expHandlers(notification.feature,\'==\',&quot;game&quot;))}}"><template case="true"> <div class="dF mT7 pR fg1 "> <template is="if" value="{{expHandlers(expHandlers(notification.message_info.type,\'==\',&quot;created&quot;),\'&amp;&amp;\',expHandlers(notification.feature,\'==\',&quot;game&quot;))}}"><template case="true"> <span class="gs_nc_stIn dF aIC f13">{{getI18n(\'gs.startdate\')}} : {{motivatorDateTimeFormatter(notification.message_info.game_start_time)}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(notification.message_info.type,\'==\',&quot;ends_in&quot;),\'&amp;&amp;\',expHandlers(notification.feature,\'==\',&quot;game&quot;))}}"><template case="true"> <span class="gs_nc_endIn dF aIC dIB redText f13">{{getI18n(\'gs.enddate\')}} : {{motivatorDateTimeFormatter(notification.message_info.game_end_time)}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(notification.feature,\'==\',&quot;target&quot;),\'&amp;&amp;\',expHandlers(notification.message_info.type,\'==\',&quot;level_down&quot;))}}"><template case="true"> <div class="dF aIC "> <span class="gs_nc_endIn gs_offtrack f13 ">Offtrack</span> <span class="gs_nc_duration_cal_icon mL10 mT6"></span> <span class="f13 mL10 mT5">{{notification.message_info.target_duration}}</span> </div> </template></template></template></template></template></template> <template is="if" value="{{expHandlers(expHandlers(notification.feature,\'==\',&quot;target&quot;),\'&amp;&amp;\',expHandlers(notification.message_info.type,\'==\',&quot;level_down&quot;))}}"><template case="true"> <span class="gs_nc_progressbar pA"> <lyte-progressbar lt-prop="{&quot;type&quot;:&quot;circle&quot;,&quot;progressProperty&quot; : {&quot;value&quot; : &quot;30&quot;, &quot;duration&quot; : &quot;0s&quot;}}" lt-prop-type="bar" lt-prop-radius="22"></lyte-progressbar> </span> </template></template> </div> </template></template> </div> </div> <template is="if" value="{{expHandlers(notification.feature,\'==\',&quot;game&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(notification.message_info.type,\'==\',&quot;level_up&quot;)}}"><template case="true"> <div class="{{if(ifNotEquals(fromSource,\'crm\'),\'\',\'gs_nc_lvlcard\')}}"> <template is="if" value="{{expHandlers(expHandlers(notification.message_info.position.from,\'<=\',5),\'||\',expHandlers(notification.message_info.position.to,\'<=\',5))}}"><template case="true"> <div class=" dF {{if(ifEquals(fromSource,\'motivator\'),\'pT20\',\'\')}}"> <div class="aIC dF flexDC gs_nc_rank_dn_cont mR10"> <div class="gs_nc_rankDn_cupIcon mB10"></div> <div class="gs_nc_rankDn_text mB5 f13 ">{{getI18n(\'gs.rank\')}}</div> <div class="gs_nc_rankDn_rank f18 ">{{notification.message_info.position.from}}</div> </div> <div class="dF flexDC jCC fg1"> <div class="gs_nc_rank_cont gs_rank_border mT25 pR mB30 {{if(ifEquals(fromSource,\'crm\'),\'gs_crm_rankCont\',\'\')}}"> <div class="gs_nc_rank_crl gs_nc_rank_crl_up left40per dIB pR mB10 bR50p"></div> </div> <lyte-text class="aligncenter w140 f13 mL10 " lt-prop-value="{{notification.message_info.done_by.name}} " lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </div> <div class="gs_nc_rank_up_arrow_bg aIC dF flexDC gs_nc_rank_dn_cont mL10"> <div class="gs_nc_rankUp_cupIcon mB10"></div> <div class="gs_nc_rankUp_text mB5 f13 alignCenter">{{getI18n(\'gs.rank\')}}</div> <div class="gs_nc_rankUp_rank f18 alignCenter">{{notification.message_info.position.to}}</div> </div> </div> </template></template> </div> </template><template case="false"><template is="if" value="{{expHandlers(notification.message_info.type,\'==\',&quot;level_down&quot;)}}"><template case="true"> <div class="{{if(ifNotEquals(fromSource,\'crm\'),\'\',\'gs_nc_lvlcard\')}}"> <template is="if" value="{{expHandlers(expHandlers(notification.message_info.position.from,\'<=\',5),\'||\',expHandlers(notification.message_info.position.to,\'<=\',5))}}"><template case="true"> <div class=" dF {{if(ifEquals(fromSource,\'motivator\'),\'pT20\',\'\')}}"> <div class="aIC dF flexDC gs_nc_rank_up_arrow_bg mR10"> <div class="gs_nc_rankUp_cupIcon mB10"></div> <div class="gs_nc_rankUp_text mB5 f13 ">{{getI18n(\'gs.rank\')}}</div> <div class="gs_nc_rankUp_rank f18 ">{{notification.message_info.position.from}}</div> </div> <div class="dF flexDC jCC fg1"> <div class="gs_nc_rank_cont gs_rank_border mT25 pR mB30 {{if(ifEquals(fromSource,\'crm\'),\'gs_crm_rankContDn\',\'gs_nc_rank_cont_dn\')}}"> <div class="gs_nc_rank_crl gs_nc_rank_crl_dn left40per dIB pR mB10 bR50p"></div> </div> <lyte-text class="aligncenter w140 f13 mL10" lt-prop-value="{{notification.message_info.done_by.name}} " lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></lyte-text> </div> <div class="aIC dF flexDC gs_nc_rank_dn_cont mL10 pR"> <div class="gs_nc_rankDn_cupIcon mB10"></div> <div class="gs_nc_rankDn_text mB5 f13">{{getI18n(\'gs.rank\')}}</div> <div class="gs_nc_rankDn_rank f18">{{notification.message_info.position.to}}</div> </div> </div> </template></template> </div> </template></template></template></template> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,1,1,1,0]},{type:"attr",position:[1,1,1,1,3]},{type:"text",position:[1,1,1,1,3,0]},{type:"attr",position:[1,1,1,1,5]},{type:"if",position:[1,1,1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,1,1,3,1]},{type:"if",position:[1,1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,1,1,3,3]},{type:"if",position:[1,1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"text",position:[1,1,1,5,0]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,1]},{type:"componentDynamic",position:[1,3,1,1]},{type:"text",position:[1,3,3,1,0,0]},{type:"text",position:[1,3,3,1,2,0]},{type:"attr",position:[1,5]}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,3]},{type:"text",position:[1,3,1,3,0]},{type:"attr",position:[1,3,1,5]},{type:"if",position:[1,3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,5]},{type:"if",position:[1,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,5,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,3,0]},{type:"text",position:[1,1,5,0]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,3]},{type:"componentDynamic",position:[1,3,3]},{type:"text",position:[1,5,3,0]},{type:"text",position:[1,5,5,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,3,0]},{type:"text",position:[1,1,5,0]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,3]},{type:"componentDynamic",position:[1,3,3]},{type:"text",position:[1,5,3,0]},{type:"text",position:[1,5,5,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["recordId","recordIndex","notification","fromSource","isDeleteClicked"],data:function(){return{recordId:Lyte.attr("string"),recordIndex:Lyte.attr("number"),notification:Lyte.attr("object"),fromSource:Lyte.attr("string",{default:"motivator"}),isDeleteClicked:Lyte.attr("boolean")}},actions:{deleteCard:function(t){this.setData("isDeleteClicked",!0);var e=$L("motivator-notification-panel")[0],o=this.getData("recordIndex"),a=this.getData("recordId"),i=e.getData("selectedNotyId");store.peekRecord("motivator_notifications",a).$.destroyRecord().then((function(){a===i&&$L("motivator-notification-panel")[0].component.closeAllAbtModal(),$L("#gs_notification_card_"+a).slideUp(350,"easeIn",(function(){Lyte.arrayUtils(e.getData("notifications"),"removeAt",o,1)}))})),t.stopPropagation()},markAsFavourite:function(t,e){var o=$L("motivator-notification-panel")[0],a=this.getData("recordIndex"),i=store.peekRecord("motivator_notifications",this.getData("recordId")),s=!i.$.get("favourite");i.$.set("favourite",s),i.$.save().then((function(){Lyte.objectUtils(o.getData("notifications")[a],"add","favourite",s)}),(function(){i.$.rollBack()})),$L(t).toggleClass("gs_favStar gs_star_icon_filled"),e&&e.stopPropagation()},readCardThenOpenAbt:function(t){if("crm"!==this.getData("fromSource")){if(!t.target.classList.contains("gs_star_icon")&&!t.target.classList.contains("gs_nc_del_icon")){var e=$L("motivator-notification-panel"),o=e[0],a=this.getData("recordIndex"),i=$L("motivator-notification-card");i.each((function(){$L(this).removeClass("gs_notifi_card_slct_brdr")}));var s=i[a];if($L(s).addClass("gs_notifi_card_slct_brdr"),(n=store.peekRecord("motivator_notifications",this.getData("recordId")))&&!n.$.get("read")&&(n.$.set("read",!0),n.$.save().then((function(){Lyte.objectUtils(o.getData("notifications")[a],"add","read",!0)}),(function(){n.$.rollBack()}))),n){var n,p=(o=e[0]).component,r=this;switch((n=this.getData("notification")).feature){case"target":if(o.getData("showAboutTargetModal")&&e.find("gamescope-about-target")[0].setData({showAboutKPIModal:!1}),o.setData("showAboutKPIModal",!1),o.setData("showAboutGameModal",!1),"deleted"===n.message_info.type)return void o.component.closeAllAbtModal();if(commonUtils.showHideLoadingDiv(!0),"completed"===n.message_info.type)o.component.closeAllAbtModal(),setTimeout((function(){store.unloadRecord("target",n.resource.id),store.findRecord("target",n.resource.id).then((function(){store.peekRecord("target",n.resource.id)&&store.peekRecord("target",n.resource.id)&&store.peekRecord("target",n.resource.id).set_for.some((t=>t.id===n.message_info.done_by.id))?(o.setData("showNotificationsModal",!1),Lyte.Router.getRouteInstance().transitionTo({route:"crm.gamification.targets.dashboard",dynamicParams:[n.resource.id],queryParams:{userId:n.message_info.done_by.id}})):(commonUtils.showHideLoadingDiv(!1),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.target")),show:!0,type:"error"}))}),(function(){commonUtils.showHideLoadingDiv(!1),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.target")),show:!0,type:"error"})}))}),500);else{store.unloadRecord("target",n.resource.id);var l=store.findRecord("target",n.resource.id),c=store.findAll("game_badge");Lyte.resolvePromises({target:l,badge:c}).then((function(){commonUtils.showHideLoadingDiv(!1),store.peekRecord("target",n.resource.id)?(o.setData("selectedNotyId",r.getData("recordId")),p.showAboutTargetModal(store.peekRecord("target",n.resource.id),o)):(o.component.closeAllAbtModal(),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.target")),show:!0,type:"error"}))}),(function(){commonUtils.showHideLoadingDiv(!1),o.component.closeAllAbtModal(),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.target")),show:!0,type:"error"})}))}break;case"kpi":if(o.setData("showAboutTargetModal",!1),o.setData("showAboutGameModal",!1),"deleted"===n.message_info.type)return void o.component.closeAllAbtModal();o.setData("selectedNotyId",r.getData("recordId")),p.showAboutKPIModal(n.resource.id,o,"notification");break;case"game":if(o.getData("showAboutGameModal")&&e.find("gamescope-about-game")[0].setData({showAboutKPIModal:!1,showAllKPIs:!1,showParticipantsModal:!1,showAboutTeamModal:!1}),o.setData("showAboutKPIModal",!1),o.setData("showAboutTargetModal",!1),"deleted"===n.message_info.type)return void o.component.closeAllAbtModal();var d;if(n.message_info.related_info&&"team"===n.message_info.related_info[0].type?d={selectedTeam:n.message_info.related_info[0].resource.id}:n.message_info.related_info&&(d={selectedUser:n.message_info.related_info[0].resource.id}),commonUtils.showHideLoadingDiv(!0),"completed"===n.message_info.type||"level_up"===n.message_info.type||"level_down"===n.message_info.type)o.component.closeAllAbtModal(),setTimeout((function(){store.unloadRecord("game",n.resource.id),store.findRecord("game",n.resource.id).then((function(t){store.peekRecord("game",n.resource.id)?("group"===t.type?t.participants.some((t=>t.members.some((t=>t.id===Crm.userDetails.USER_ID))))&&(d={selectedUser:Crm.userDetails.USER_ID}):"user"===t.type&&t.participants.some((t=>t.id===Crm.userDetails.USER_ID))&&(d={selectedUser:Crm.userDetails.USER_ID}),Crm.getUserDetailsMap(void 0,(function(){o.setData("showNotificationsModal",!1),Lyte.Router.getRouteInstance().transitionTo({route:"crm.gamification.game.point-summary",dynamicParams:[n.resource.id],queryParams:d})}))):(commonUtils.showHideLoadingDiv(!1),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.game")),show:!0,type:"error"}))}),(function(){commonUtils.showHideLoadingDiv(!1),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.game")),show:!0,type:"error"})}))}),500);else store.unloadRecord("game",n.resource.id),store.findRecord("game",n.resource.id).then((function(){commonUtils.showHideLoadingDiv(!1),store.peekRecord("game",n.resource.id)?(o.setData("selectedNotyId",r.getData("recordId")),p.showAboutGameModal(store.peekRecord("game",n.resource.id),o)):(o.component.closeAllAbtModal(),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.game")),show:!0,type:"error"}))}),(function(){commonUtils.showHideLoadingDiv(!1),o.component.closeAllAbtModal(),$L("#gs_messagebox")[0].ltProp({message:I18n.getMsg("gs.record.deleted",I18n.getMsg("gs.game")),show:!0,type:"error"})}))}}}}else networkUtils.openUrl(Crm.getCrmBasePath()+"/gamification/home?notification=true")}}});
