store.registerModel("note",{id:Lyte.attr("string",{primaryKey:!0}),Parent_Id:Lyte.attr("object"),$se_module:Lyte.attr("string"),Note_Title:Lyte.attr("string"),Note_Content:Lyte.attr("string"),$attachments:Lyte.attr("array"),$is_shared_to_client:Lyte.attr("boolean")},{actions:{zia_summary:{}}}),store.registerAdapter("note",{namespace:"crm/v2.2",buildURL:function(e,t,r,a,i,d,n){var o=e[0].toUpperCase()+e.substr(1)+"s";if(i=i.replace(e,o),"findAll"===t)n&&n.module&&n.entityId&&(i=i.replace(o,""),i+=n.module+"/"+n.entityId+"/"+o);else if("deleteRecord"===t)i=i.slice(0,i.lastIndexOf(o)),i=(i+=a.$se_module+"/"+a.Parent_Id.id+"/"+o)+"?ids="+n.noteId;else if("updateRecord"===t&&n.removeAttachment)i+="/Attachments?ids="+n.ids;else if("createRecord"===t)i=i.replace(o,""),i+=a.$se_module+"/"+a.Parent_Id.id+"/"+o;else if("updateRecord"===t){let e=store.peekRecord("note",a.id);e&&e.id&&(i=i.substring(0,i.indexOf(o)),i+=e.$se_module+"/"+e.Parent_Id.id+"/"+o)}else"findRecord"===t&&n&&n.module&&n.entityId&&(i=i.replace(o,n.module+"/"+n.entityId+"/"+o));return n&&n.apiVersion&&(i=i.replace("v2",n.apiVersion)),"false"===window.isSandboxAcc&&window.isCanvasSandboxDiff&&(i=i.replace("/crm/","/crm/v2/sandbox/diff/")),"true"===window.isSandboxAcc&&window.isCanvasProdDiff&&(i=i.replace("/crm/","/crm/v2/production/diff/")),"zia_summary"===d&&(i=i.replace("crm/v2.2","crm/v7/"+n.module+"/"+n.entityId),"null"!==n.filters&&(i+="?filters="+n.filters)),i},methodForRequest:function(e,t,r,a){return a&&"zia_summary"===a.action&&(e="GET"),"PATCH"===e&&(e="PUT"),"updateRecord"===t&&a.removeAttachment&&(e="DELETE"),e}}),store.registerSerializer("note",{normalizeResponse:function(e,t,r){return r[e]=r.data,"createRecord"!==t&&"updateRecord"!==t||(r.data=r.data[0].details),r},serialize:function(e,t,r,a){return a&&"zia_summary"===a.action?null:(r.entity&&delete r.entity,t.data=[r],t)},serializeKey:function(){return"data"},payloadKey:function(){return"data"}});
