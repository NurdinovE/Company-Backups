Lyte.Component.register("crm-profile-menu-talktous",{_template:'<template tag-name="crm-profile-menu-talktous"> <lyte-modal id="talktousDetails" lt-prop-allow-multiple="false" data-zcqa="profilePicture_talkWithUs_pop" lt-prop-show="{{lbind(showTalkToUs)}}" on-before-close="{{method(&quot;closeTalkusPopup&quot;)}}" lt-prop-width="400px" lt-prop-show-close-button="{{if(isNextGenUIEnabled,true,false)}}" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromBottom&quot;,&quot;duration&quot;:&quot;0.3&quot;}" lt-prop-freeze="true" lt-prop-offset="{&quot;right&quot;:&quot;0&quot;,&quot;bottom&quot;:&quot;28px&quot;}" lt-prop-wrapper-class="crm-talktous-popup {{if(isNextGenUIEnabled,&quot;lftmnu-talktous-popup&quot;,&quot;&quot;)}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="talktous_header {{if(isNextGenUIEnabled,\'pL25\',\'\')}}"> <template is="if" value="{{expHandlers(isNextGenUIEnabled,\'!\')}}"><template case="true"> <span class="svgIcons mR5 vaM ico-lineArrow-left dIB cP" tabindex="0" onkeydown="{{action(\'closeTalkusPopup\',event)}}" onclick="{{action(\'closeTalkusPopup\')}}"></span> </template></template> <span class="crm-font-bold vaM talktous_header_txt">{{getI18n("crm.profile.pic.talktous.weekdays")}}</span> </lyte-modal-header> <lyte-modal-content class="talktous_content"> <div class="pT10"> <ul class="calluscountry clearFix m0"> <template is="for" items="{{countryDetails}}" item="item" index="index"> <li tabindex="0" class="calluscountry_li {{replaceSpace(item.country)}}" data-zcqa="profilePicture_talkWithUs_country{{index}}" title="{{getI18n(item.country)}}" onkeydown="{{action(\'itemNavigate\',event,this)}}"><span class="count_icon dIB"> </span>{{getI18n(item.country)}}: {{item.no}}</li> </template> </ul> </div> </lyte-modal-content> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1,1]},{type:"for",position:[3,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"text",position:[1,3]}]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["currentCountry","countryDetails","currentCountry","showTalkToUs","isPremiumSupportEnabled","isAdminProfileUser","dontClose","isNextGenUIEnabled"],data:function(){return{currentCountry:Lyte.attr("string"),countryDetails:Lyte.attr("array"),currentCountry:Lyte.attr("string"),showTalkToUs:Lyte.attr("boolean",{default:!1}),isPremiumSupportEnabled:Lyte.attr("boolean",{default:!1}),isAdminProfileUser:Lyte.attr("boolean",{default:!1}),dontClose:Lyte.attr("boolean",{default:!0}),isNextGenUIEnabled:Lyte.attr("boolean",{default:!!featuresAvailable.NEXTGENUI_ENABLED})}},init:function(){("true"===RebrandLinkUtil.getProperty("PS_ENABLED")&&null!==ps_details&&ps_details.isPremium||window.isPremiumSupportEnabled)&&this.setData("isPremiumSupportEnabled",!0),"Administrator"===Crm.userDetails.PROFILE_NAME&&this.setData("isAdminProfileUser",!0);var e=this.getData("isPremiumSupportEnabled"),t=this.getData("isAdminProfileUser"),o=Crm.userDetails.COUNTRY_LOCALE.substr(3),i=["IN","US","GB","AU","DE","SE","IT","NL","ES","FR","CN","AE","EG","BH","QA","SA","NG","KE","ZA","Africa","SG"];e&&t&&(i=["IN","US","GB","AU","SE","IT","NL","ES","FR","SG"]),this.setData("currentCountry",o);var a=i;i.contains(o)&&(i.removeLastOccurenceOfElement(o),i.splice(0,0,o)),i=a;var s=[],r={IN:{country:"India",no:"+91-44-6965 6060 / +91-44-6965 6070"},US:{country:"USA",no:"+1(888) 900 9646"},GB:{country:"UK",no:"+44 (20) 35647890"},AU:{country:"Australia",no:"+61-2-80662898"},DE:{country:"Germany",no:"+49 8000229966"},SE:{country:"Sweden",no:"+46 201408150"},IT:{country:"Italy",no:"+39 (0) 287103737"},NL:{country:"Netherlands",no:"+31 707007083"},ES:{country:"Spain",no:"+34 918368598"},FR:{country:"France",no:"+33 805542462"},CN:{country:"China",no:"+86-4006263710"},AE:{country:"UAE",no:"+971-80004444424"},BH:{country:"Bahrain",no:"+973 1650 1904"},QA:{country:"Qatar",no:"3001 ZOHO(9646)"},SA:{country:"KSA",no:"800 8443 100"},NG:{country:"Nigeria",no:"7080601544"},KE:{country:"Kenya",no:"800601167"},ZA:{country:"South Africa",no:"800221023"},Africa:{country:"Rest of Africa",no:"+27 214268086"},EG:{country:"Egypt",no:"08000060336"},SG:{country:"Singapore",no:"+8001014255"}},n={IN:{country:"India",no:"1800 103 2277"},US:{country:"USA",no:"+18337371231"},GB:{country:"UK",no:"448000261988"},AU:{country:"Australia",no:"+611800822745"},SE:{country:"Sweden",no:"+46201203166"},IT:{country:"Italy",no:"+39800776806"},NL:{country:"Netherlands",no:"318000234360"},ES:{country:"Spain",no:"+34800000060"},FR:{country:"France",no:"+33805988180"},SG:{country:"Singapore",no:"658001014617"}};e&&t?i.forEach((function(e){s.push(n[e])})):i.forEach((function(e){s.push(r[e])})),this.setData("countryDetails",s),this.setData("countryArray",i)},actions:{closeTalkusPopup:function(e){this.closePopup(e)},itemNavigate:function(e,t){if(e&&"keydown"===e.type)switch(e.keyCode){case 40:var o=$L(t).next("li")[0];o&&o.focus();break;case 38:var i=$L(t).prev("li")[0];i&&i.focus();break;case 37:this.setData("showTalkToUs",!1)}}},methods:{closeTalkusPopup:function(){return this.closePopup()}},didConnect:function(){this.setData("showTalkToUs",!0)},closePopup:function(e){if(!e||"keydown"!==e.type||8===e.keyCode||13===e.keyCode||37===e.keyCode)return this.data.dontClose?(setTimeout(function(){this.setData("dontClose",!1),document.querySelector("crm-profile-menu").component.setData("showProfilePage",!0)}.bind(this),5),!1):void 0}}),Lyte.Component.registerHelper("replaceSpace",(function(e){return e.replaceAll(" ","").toLowerCase()})),Lyte.Component.register("crm-profile-menu-writetous",{_template:'<template tag-name="crm-profile-menu-writetous"> <lyte-modal lt-prop-width="401px" lt-prop-height="calc(100vh - 28px)" class="ri-writeToUs_modal" lt-prop-close-on-escape="false" lt-prop-wrapper-class="ri-writetousPopup {{if(isNextGenUIEnabled,&quot;lftmnu-writetous-popup&quot;,&quot;&quot;)}} {{if(enablePopupTranslate,&quot;modalTranslate&quot;,&quot;&quot;)}} {{if(disablePopupTranslate,&quot;modalInnerSlide&quot;,&quot;&quot;)}} {{if(nextgenTranslate,&quot;nextGenTranslate&quot;,&quot;&quot;)}} {{if(disableNextgenTranslate,&quot;nextGenInnerSlide&quot;,&quot;&quot;)}} {{if(rtlTranslate,&quot;rtlModalTranslate&quot;,&quot;&quot;)}} {{if(disableRtlTranslate,&quot;rtlInnerSlide&quot;,&quot;&quot;)}}" lt-prop-allow-multiple="true" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromRight&quot;, &quot;duration&quot;:&quot;0.3&quot;}" lt-prop-offset="{&quot;right&quot;:&quot;0&quot;,&quot;top&quot;:&quot;0&quot;}" lt-prop-show="{{lbind(showWriteToUs)}}" lt-prop-show-close-button="false" on-before-show="{{method(&quot;beforeShowWritetous&quot;)}}" on-before-close="{{method(&quot;beforeCloseWritetous&quot;)}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="ri-requestHead pL25 pR25 pT20 pB20"> <span class="zcicncss-arrow-back zcicn-cssIcons zcicn_white_mask dIB mR20 cP" data-zcqa="profilePicture_write_close" onclick="{{action(\'closeWriteToUsPopAction\')}}"></span> <span class="crmWhiteColor crm-large-font-size crm-font-semibold">{{getI18n("crm.profile.pic.writetous")}}</span> </lyte-modal-header> <lyte-modal-content class="ri-contentWrapper p0"> <div class="br5 ri-inviteCard boxBB left20 zi22 dF aiCenter p15"> <div class="h48 w75 dF aiCenter jcCenter bg_white br50per mR20"> <span class="dIB h25 w22 ri-imagesBg ri-reportImg"></span> </div> <div> <span class="crmBaseColor dIB mB6 crm-subheading-font-size">{{getI18n("crm.label.hello")}} <span class="crm-font-bold crm-subheading-font-size">{{displayName}}</span> </span> <p class="crm-base-font-size lh20 crmLabelColor crm-font-regular">{{getI18n("crm.profile.pic.writetous.message")}} </p> </div> </div> <div class="pL15 pR15 pT20"> <div class="mB30"> <span class="crm-base-font-size crmLabelColor mB15 dIB">{{getI18n("crm.events.subject")}}</span> <crux-text-component data-zcqa="profilePicture_write_subject" cx-prop-mandatory="true" cx-prop-from="create" cx-prop-appearance="box" cx-prop-maxlength="500" cx-prop-value="{{lbind(subject)}}" on-value-change="{{method(&quot;resizeWritetoUs&quot;)}}" cx-prop-placeholder="{{getI18n(&quot;crm.profile.pic.writetous.subject.placeholder&quot;)}}"></crux-text-component> </div> <div class="mB30"> <span class="crm-base-font-size crmLabelColor mB15 dIB">{{getI18n("crm.label.description")}}</span> <crux-text-area-component data-zcqa="profilePicture_write_message" on-value-change="{{method(&quot;resizeWritetoUs&quot;)}}" class="ri-descriptInput {{if(textareaSize,&quot;ri-shrinkTextareaSize&quot;,&quot;&quot;)}}" cx-prop-maxlength="65535" cx-prop-appearance="box" cx-prop-value="{{lbind(message)}}" cx-prop-from="create" cx-prop-placeholder="{{getI18n(&quot;crm.profile.pic.writetous.message2&quot;)}}"></crux-text-area-component> </div> <div> <div class="mB15"> <span class="crm-base-font-size crmLabelColor dIB">{{getI18n("Attachments")}} <span class="crmLabelColor crm-font-semibold"></span></span> </div> <div class="ri-attachWrap br5 p10 mB10 flexAlignCenter"> <div class=" cP ri-attachment p5 br6 dIB aligncenter"> <lyte-fileupload class="crmFileupload" lt-prop-yield="true" lt-prop-auto-upload="false" data-zcqa="profilePicture_write_attach" lt-prop-appearance="Btn" lt-prop-minimum-file-size="0.0001" lt-prop-multiple="true" lt-prop-tabindex="0" on-add="{{method(\'fileSizeCheck\')}}" on-remove="{{method(\'resizeWritetoUs\')}}" lt-prop-accept="image/.*,application/.*,audio/.*,message/.*,multipart/.*,text/.*,video/.*,sql" on-reject="{{method(\'fileReject\')}}"> <template is="registerYield" yield-name="file"> <lyte-file-select-area class="dF aiCenter jcCenter"> <span class="zcicncss-monitor zcicn-cssIcons zcicncss14 zcicn_blue_mask mR10"></span> <span class="crm-base-font-size ri-attachTxt crmLinkColor">{{getI18n("Browse")}}</span> </lyte-file-select-area> </template> </lyte-fileupload> </div> <div class="mR10 cP ri-attachment p5 br6 dN aligncenter"> <span class="zcicncss-capture zcicn-cssIcons mR10 dIB vaT"></span> <span class="crmBaseColor crm-base-font-size ri-attachTxt">Capture</span> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(showMurphyRecordButn,\'&amp;&amp;\',isMurphyRecEnabled),\'&amp;&amp;\',isMurphyInstalled),\'&amp;&amp;\',isMurphyRecSupported)}}"><template case="true"> <div class="dF mL10"> <span class="dIB mAuto w3 crm-medium-large-font-size ri-attachDot mR10 br20"></span> </div> <div data-zcqa="profilePicture_write_record" onclick="{{action(\'downloadVideoRecorderFiles\',\'manualInit\')}}" class="cP ri-attachment p5 br6 dF aiCenter jcCenter" tabindex="0" role="button" lt-prop-aria-keydown="true"> <span class="zcicncss-record zcicn-cssIcons zcicn_blue_mask mR10"></span> <span class="crmLinkColor crm-base-font-size ri-attachTxt">{{getI18n("crm.profile.pic.writetous.record")}}</span> </div> </template></template> </div> <div class="mB10"> <div class="dF aiCenter ri-uploadedFileWrap br6 hAuto noBg crmFileupload" onmouseover="{{action(\'showEditDeleteIcons\')}}" onmouseleave="{{action(\'showUploadFileSize\')}}"> <div class="lyteFileUpdList w100_per"> <template is="for" items="{{queueList}}" item="item" index="index"> <div class="lyteFileUpdListFile writeTousAttach br6 mB10 bg_white {{item.status}}"> <div class="lyteFileUpdTypePreview mR15"> <template is="if" value="{{item.src}}"><template case="true"> <img alt="srcImage" class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName wtu_updFileName" lt-prop-value="{{item.name}}"> </lyte-text> <template is="if" value="{{checkComparison(item.size,999999,&quot;<&quot;)}}"><template case="true"> <span class=" lyteFileUpdFileSize crmLabelColor"> {{lyteUiFileSize(item.size,\'KB\',2)}} </span> </template><template case="false"> <span class="lyteFileUpdFileSize crmLabelColor"> {{lyteUiFileSize(item.size,\'MB\',2)}} </span> </template></template> <template is="if" value="{{expHandlers(expHandlers(ltPropUploadMultiple,\'!\'),\'||\',expHandlers(expHandlers(expHandlers(item.status,\'!\'),\'||\',expHandlers(item.status,\'==\',&quot;error&quot;)),\'||\',expHandlers(item.status,\'==\',&quot;success&quot;)))}}"><template case="true"> <div class="w30 h30 dF aiCenter jcCenter br50per attachDeleteIconWrap vH"> <span onclick="{{action(\'deleteUpdFile\',event,item.id)}}" data-value="{{item.id}}" class="zcicncss-deleteMd zcicn-cssIcons zcicn_red_mask {{item.status}} cP attachmentDeleteIcon vH"></span> </div> </template></template> </div> </template> <template is="if" value="{{expHandlers(showMurphyRecordButn,\'!\')}}"><template case="true"> <div lt-prop-title="{{getI18n(\'murphy.titles.preview.video\')}}" class="br8 cP bg_white dIB pR w100_per boxBB" onclick="{{action(\'showVideoPreview\',\'preview\')}}"> <div class="writeTousAttach lyteFileUpdListFile murphyVideoUpdContainer dF aiCenter flexDR"> <div class="attachVideoWrap dF flexDR aiCenter"> <span class="lyteFileUpdTypeIcon video"></span> </div> <lyte-text lt-prop-value="{{lbind(murphyVideoName)}}" class="mL15 wtu_updFileName"></lyte-text> <template is="if" value="{{checkComparison(murphyVideoSize,999999,&quot;<&quot;)}}"><template case="true"> <span class="lyteFileUpdFileSize crmLabelColor mL6"> {{lyteUiFileSize(murphyVideoSize,\'KB\',2)}} </span> </template><template case="false"> <span class="lyteFileUpdFileSize crmLabelColor mL6"> {{lyteUiFileSize(murphyVideoSize,\'MB\',2)}} </span> </template></template> <div> <div class="w30 h30 dF aiCenter jcCenter br50per attachDeleteIconWrap vH"> <span onclick="{{action(\'deleteMurphyRecordedVideo\',event)}}" class="zcicncss-deleteMd zcicn-cssIcons zcicn_red_mask cP attachmentDeleteIcon vH"></span> </div> </div> </div> </div> </template></template> </div> </div> </div> </div> </div> </lyte-modal-content> <lyte-modal-footer class="pFixed bottom_0 ri-footerWrap w100_per bg_white dF jcFlextEnd p15 br0"> <lyte-button data-zcqa="profilePicture_write_disable" tabindex="{{if(disableMailSent,\'\',\'\')}}" onclick="{{action(\'closeWriteToUsPopAction\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("Cancel")}} </template> </lyte-button> <lyte-button data-zcqa="profilePicture_write_send" tabindex="{{if(disableMailSent,\'\',\'\')}}" lt-prop-appearance="primary" lt-prop-disabled="{{disableMailSent}}" onclick="{{action(\'sendMail\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.button.submit")}} </template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> <lyte-modal lt-prop-show="{{showSuccessPopup}}" on-before-show="{{method(&quot;showSubmitPopup&quot;)}}" class="ri-submitPopup" lt-prop-height="523px" lt-prop-width="400px" lt-prop-offset="{&quot;right&quot;:&quot;0&quot;,&quot;bottom&quot;:&quot;28px&quot;}" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromBottom&quot;,&quot;duration&quot;:&quot;0.3&quot;}" lt-prop-wrapper-class="ri-commentPopup" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="dF flexReverse cP"> <div class="w30 h30 dF aiCenter jcCenter br50per submissionSuccessCloseIconWrap noBg"> <span onclick="{{action(&quot;closeSubmitAndWritetousPop&quot;)}}"> ×</span> </div> </lyte-modal-header> <lyte-modal-content class="p0 h100_per"> <div class="dF flexDC aiCenter pR jcCenter h100_per oH"> <span class="dIB ri-imagesBg ri-submitReqWrap pA w100_per bottom0"></span> <span class="ri-imagesBg ri-submitImg w190 dIB mB30"></span> <p class="crm-subheading-font-size lineHgt22 w190 crm-font-semibold mB15 aligncenter crmBaseColor"> {{getI18n("crm.profile.pic.writetous.success.message1")}} </p> <p class="crm-base-font-size lineHgt22 w260 mB20 crmLabelColor aligncenter">{{getI18n("crm.profile.pic.writetous.success.message2")}}</p> <lyte-button data-zcqa="profilePicture_write_new" lt-prop-appearance="primary" onclick="{{action(\'closeSubmitted\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.profile.pic.writetous.write.new")}} </template> </lyte-button> </div> </lyte-modal-content> </template> </lyte-modal> <lyte-modal lt-prop-show-close-button="false" lt-prop-show="{{lbind(showMurphyVideoPreview)}}" lt-prop-transition="{&quot;animation&quot;:&quot;fadeIn&quot;,&quot;duration&quot;:&quot;0.4&quot;}" lt-prop-offset="{&quot;top&quot;:&quot;0&quot;,&quot;left&quot;:&quot;center&quot;}" lt-prop-width="827px" lt-prop-height="647px" lt-prop-close-on-escape="false"> <template is="registerYield" yield-name="modal"> <lyte-modal-content> <div class="dF aiCenter mB20 ri-uploadedFileName"> <template is="if" value="{{uploadedFile}}"><template case="true"> <div class="pL10 pT9 pB9"> <lyte-text lt-prop-value="{{lbind(murphyVideoName)}}" class="crmBaseColor crm-large-font-size mR10 dB crm-font-semibold videoRenameContainer"></lyte-text> </div> <div class="dF aiCenter mR10"> <div data-zcqa="murphy_recorder_video_rename" class="w30 h30 dF aiCenter jcCenter br50per ri-editIconHover cP vH" onclick="{{action(\'editFileName\')}}"> <span class="zcicncss-editFilled zcicn-cssIcons zcicncss13 dIB"></span> </div> </div> </template><template case="false"><template is="if" value="{{editUploadFileName}}"><template case="true"> <div class="flexAlignCenter"> <crux-text-component cx-prop-autofocus="true" cx-prop-value="{{murphyVideoName}}" class="ri-editNameInput dIB w300" cx-prop-prop-close-icon="true" cx-prop-appearance="box" cx-prop-from="create" cx-prop-field-key="field_label" cx-prop-width="240px" lt-prop-height="44px"></crux-text-component> <div class="flexAlignCenter mL10"> <span data-zcqa="murphy_recorder_save_edited_name" class="cP" onclick="{{action(\'saveEditedFileName\')}}"> <crmutil-icon icon-name="tick-filled-rounded" icon-class="zcicn-tick-filled-rounded zcicn_green"></crmutil-icon> </span> <span data-zcqa="murphy_recorder_close_rename" class="zcicncss-closefilled zcicn-cssIcons zcicn_darkRed_mask mL10 ri-cancelEditIcon cP" onclick="{{action(\'dontSaveEditedFileName\')}}"></span> </div> </div> </template></template></template></template> </div> <video id="murphyVideo" controlslist="nodownload" controls="" class="ri-murphyVideo dB br10 boxBB w100_per"></video> </lyte-modal-content> <lyte-modal-footer class="right"> <template is="if" value="{{showMurphyPreviewCancelBut}}"><template case="true"> <lyte-button data-zcqa="murphy_recorder_preview_cancel" onclick="{{action(\'unhideWriteToUsPopAction\',\'deleteMurphyVideo\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("Cancel")}} </template> </lyte-button> </template></template> <template is="if" value="{{showMurphyPreviewDoneBut}}"><template case="true"> <lyte-button data-zcqa="murphy_recorder_preview_done" lt-prop-appearance="primary" onclick="{{action(\'unhideWriteToUsPopAction\')}}" lt-prop-disabled="{{disableWhileEdit}}"> <template is="registerYield" yield-name="text"> {{previewPopupDoneButName}} </template> </lyte-button> </template></template> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,3,1,0]},{type:"text",position:[3,1,3,1,2,0]},{type:"text",position:[3,1,3,3,0]},{type:"text",position:[3,3,1,1,0]},{type:"attr",position:[3,3,1,3]},{type:"componentDynamic",position:[3,3,1,3]},{type:"text",position:[3,3,3,1,0]},{type:"attr",position:[3,3,3,3]},{type:"componentDynamic",position:[3,3,3,3]},{type:"text",position:[3,3,5,1,1,0]},{type:"attr",position:[3,3,5,3,1,1]},{type:"registerYield",position:[3,3,5,3,1,1,1],dynamicNodes:[{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3,5,3,1,1]},{type:"attr",position:[3,3,5,3,5]},{type:"if",position:[3,3,5,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[3]},{type:"text",position:[3,3,0]}]}},default:{}},{type:"attr",position:[3,3,5,5,1]},{type:"attr",position:[3,3,5,5,1,1,1]},{type:"for",position:[3,3,5,5,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]},{type:"attr",position:[3,3,5,5,1,1,3]},{type:"if",position:[3,3,5,5,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,3]},{type:"componentDynamic",position:[1,1,3]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,7,1,1]}]}},default:{}},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,1]},{type:"attr",position:[5,3]},{type:"registerYield",position:[5,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,3]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,5,1]},{type:"text",position:[3,1,7,0]},{type:"attr",position:[3,1,9]},{type:"registerYield",position:[3,1,9,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[3,1,9]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1,1]},{type:"attr",position:[1,3,3]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[5]}],_observedAttributes:["subject","message","messageBoxType","messageBoxContent","disableMailSent","showWriteToUs","dontClose","showSuccessPopup","uploadedFile","editUploadFileName","uploadedImgSize","editDeleteImg","queueList","displayName","browserName","showMurphyRecordButn","isMurphyRecEnabled","isMurphyInstalled","isMurphyRecSupported","showMurphyVideoRenamePopUp","murphyVideoName","showMurphyVideoPreview","showMurphyPreviewCancelBut","showMurphyPreviewDoneBut","previewPopupCancelButName","previewPopupDoneButName","murphyVideoSize","isMurphyVideoAttached","isNextGenUIEnabled","enablePopupTranslate","disablePopupTranslate","nextgenTranslate","disableNextgenTranslate","rtlTranslate","disableRtlTranslate","textareaSize","disableWhileEdit"],actions:{},data:function(){return{subject:Lyte.attr("string",{default:""}),message:Lyte.attr("string",{default:""}),messageBoxType:Lyte.attr("string"),messageBoxContent:Lyte.attr("string"),disableMailSent:Lyte.attr("boolean",{default:!0}),showWriteToUs:Lyte.attr("boolean",{default:!1}),dontClose:Lyte.attr("boolean",{default:!0}),showSuccessPopup:Lyte.attr("boolean",{default:!1}),uploadedFile:Lyte.attr("boolean",{default:!0}),editUploadFileName:Lyte.attr("boolean",{default:!1}),uploadedImgSize:Lyte.attr("boolean",{default:!0}),editDeleteImg:Lyte.attr("boolean",{default:!1}),queueList:Lyte.attr("array"),displayName:Lyte.attr("string",{default:Crm.userDetails.DISPLAY_NAME}),browserName:Lyte.attr("string",{default:$L.userAgent.browser.toLowerCase()}),showMurphyRecordButn:Lyte.attr("boolean",{default:!0}),isMurphyRecEnabled:Lyte.attr("boolean",{default:crmConstants.enableMurphyVST}),isMurphyInstalled:Lyte.attr("boolean",{default:murphy.isMurphyInstalled()}),isMurphyRecSupported:Lyte.attr("boolean",{default:murphy.recording.isMurphyRecSupported()}),showMurphyVideoRenamePopUp:Lyte.attr("boolean",{default:!1}),murphyVideoName:Lyte.attr("string",{default:""}),showMurphyVideoPreview:Lyte.attr("boolean",{default:!1}),showMurphyPreviewCancelBut:Lyte.attr("boolean",{default:!1}),showMurphyPreviewDoneBut:Lyte.attr("boolean",{default:!1}),previewPopupCancelButName:Lyte.attr("string",{default:"Cancel"}),previewPopupDoneButName:Lyte.attr("string",{default:I18n.getMsg("crm.button.attach")}),murphyVideoSize:Lyte.attr("string",{default:""}),isMurphyVideoAttached:Lyte.attr("boolean",{default:!1}),isNextGenUIEnabled:Lyte.attr("boolean",{default:!!featuresAvailable.NEXTGENUI_ENABLED}),enablePopupTranslate:Lyte.attr("boolean",{default:!1}),disablePopupTranslate:Lyte.attr("boolean",{default:!1}),nextgenTranslate:Lyte.attr("boolean",{default:!1}),disableNextgenTranslate:Lyte.attr("boolean",{default:!1}),rtlTranslate:Lyte.attr("boolean",{default:!1}),disableRtlTranslate:Lyte.attr("boolean",{default:!1}),textareaSize:Lyte.attr("boolean",{default:!1}),disableWhileEdit:Lyte.attr("boolean",{default:!1})}},actions:{closeSubmitAndWritetousPop:function(){this.setData({showWriteToUs:!1,showSuccessPopup:!1}),$L("crm-profile-menu")[0].component.setData("showProfilePage",!0)},deleteUpdFile:function(e,t){var o=$L(".ri-writetousPopup").find("lyte-fileupload")[0].component.data.queueList,i=$L("lyte-fileupload");t=e.target.getAttribute("data-value");for(var a=o.length,s=0;s<a;s++)if(o[s].id===t){i[0].removeUpload(t);break}this.executeMethod("resizeWritetoUs")},closeSubmitted:function(){this.setData({showSuccessPopup:!1,showWriteToUs:!0})},editFileName:function(){var e=$L(".videoRenameContainer")[0].ltProp("value");this.setData({uploadedFile:!1,editUploadFileName:!0,disableWhileEdit:!0}),$L(".ri-editNameInput")[0].cxProp("value",e),document.querySelector(".ri-editNameInput").focus()},saveEditedFileName:function(){var e=$L(".ri-editNameInput")[0].cxProp("value");if(window.murphy.recording.fileNameCheck(e))this.setData({uploadedFile:!0,editUploadFileName:!1,murphyVideoName:e}),$L(".videoRenameContainer")[0].ltProp("value",e),this.setData({disableWhileEdit:!1});else{if(""===e)return void _cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("crm.function.file.name.empty"),ltPropType:"error"}});var t=I18n.getMsg("murphy.alerts.fileName.constraint");_cruxUtils.showCustomMessage({params:{ltPropMessage:t,ltPropType:"error"}})}},dontSaveEditedFileName:function(){this.setData({uploadedFile:!0,editUploadFileName:!1,disableWhileEdit:!1})},showEditDeleteIcons:function(){this.setData({uploadedImgSize:!1,editDeleteImg:!0})},showUploadFileSize:function(){this.setData({editDeleteImg:!1,uploadedImgSize:!0})},deleteMurphyRecordedVideo:function(e){window.murphy.recording.destroyRecorder();var t=$L("crm-profile-menu-writetous")[0].component;t.executeMethod("showMurphyRecordButton"),t.setData("isMurphyVideoAttached",!1),e&&e.stopImmediatePropagation(),Crm.client_tracking("Write to Us - MurphyRecorder destroyed")},sendMail:function(){window.murphy.recording.isInstalled()&&0!==window.murphy.recording.getTimeEllapsed()&&void 0!==window.murphy.recording.getTimeEllapsed()?window.murphy.recording.sendRecording(this.data.subject,this.data.message,null,this.data.murphyVideoName):this.executeMethod("sendMail")},closeWriteToUsPopAction:function(){Crm.client_tracking("Profile Revamp - Write to Us Disable Click"),this.executeMethod("closeWriteToUsPop")},downloadVideoRecorderFiles:function(e){var t;t=(t=Crm.userDetails.RTL_ENABLED?networkUtils.returnDependencyFiles(["zmurphy_recorder_rtl.js"],ResourceConstants.CRM):networkUtils.returnDependencyFiles(["zmurphy_recorder.js"],ResourceConstants.CRM)).concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("MurphyRecorder")],ResourceConstants.CRM));var o=async function(){"sessionExists"===window.murphy.recording.initiateScreenRecording({showDemo:!0,customizeTracking:{stripXhrResponse:!0},customButtonNames:{sendButtonName:I18n.getMsg("crm.label.stop"),startRecordingText:I18n.getMsg("murphy.status.begin"),recordingText:I18n.getMsg("murphy.status.recording"),pausedText:I18n.getMsg("crm.label.paused")},customTitles:{switchToPageInteract:I18n.getMsg("murphy.titles.pageInteract"),switchToDraw:I18n.getMsg("murphy.titles.draw"),highlightTools:I18n.getMsg("murphy.titles.highlight"),rectangle:I18n.getMsg("murphy.titles.rectangle"),ellipse:I18n.getMsg("murphy.titles.ellipse"),arrowLineTools:I18n.getMsg("murphy.titles.arrowLines"),line:I18n.getMsg("murphy.titles.lines"),arrow:I18n.getMsg("murphy.titles.arrows"),doubleArrow:I18n.getMsg("murphy.titles.doubleArrow"),startMask:I18n.getMsg("murphy.titles.mask"),endMask:I18n.getMsg("murphy.titles.unmask"),text:I18n.getMsg("crm.label.text"),clickToMask:I18n.getMsg("murphy.titles.mask.message"),clickToUnmask:I18n.getMsg("murphy.titles.unmask.message"),maskTourMsg:I18n.getMsg("murphy.titles.mask.tour.message"),clearDrawn:I18n.getMsg("murphy.titles.clear.elements"),deleteElement:I18n.getMsg("murphy.titles.delete.element"),strokeColor:I18n.getMsg("murphy.titles.stroke"),fillColor:I18n.getMsg("murphy.titles.fill"),textColor:I18n.getMsg("murphy.titles.text.color"),resume:I18n.getMsg("crm.button.resume"),pause:I18n.getMsg("crm.button.pause"),cancel:I18n.getMsg("Cancel"),discard:I18n.getMsg("murphy.discard")},recorderHooks:{afterInit:this.methods.sendMailContentToMurphyAfterRecInitialisation,beforeDestroy:this.methods.beforeDestroyMurphyRecHook,beforeSend:this.actions.showVideoPreview,afterSend:this.methods.murphyVideoUploadStatusCallback,showLoading:commonUtils.showHideLoadingDiv,hideLoading:commonUtils.showHideLoadingDiv,showAlertMessage:this.methods.alertMessageFromRecorder,afterRecordingStarted:this.methods.recordStartHook,recInitInOtherOrgs:this.methods.recInitInOtherOrgs},disclaimerContent:{header:[I18n.getMsg("murphy.info.header.message1")],content:[I18n.getMsg("murphy.info.content.message1"),I18n.getMsg("murphy.info.content.message2"),I18n.getMsg("murphy.info.content.message3"),I18n.getMsg("murphy.info.content.message4")],footer:[I18n.getMsg("murphy.info.footer.message1"),I18n.getMsg("murphy.info.footer.message2")]},customAlertMessages:{fileNameConstraint:I18n.getMsg("murphy.alerts.fileName.constraint"),enableVideoPermission:I18n.getMsg("murphy.alerts.enable.video.permission"),videoSizeExceeded:I18n.getMsg("murphy.alerts.recordingSizeExceeded"),videoSizeConstraint:I18n.getMsg("murphy.alerts.recordingSizeConstraint"),videoAccessDenied:I18n.getMsg("murphy.alerts.videoAccessDenied")}})&&"manualInit"===e&&_cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("murphy.alerts.sessionExists"),ltPropType:"error"}}),this.setData("murphyVideoName","")}.bind(this);Lyte.injectResources(t,void 0,o),Crm.client_tracking("Write to Us - Record Click")},showVideoPreview:function(e){var t=$L("crm-profile-menu-writetous")[0].component;t.setData("showMurphyVideoPreview",!0),""===t.getData("murphyVideoName")&&t.executeMethod("getDefaultVideoName");var o=window.murphy.recording.getRecordUrl(),i=document.getElementById("murphyVideo");i.src=o,setTimeout((function(){i.ontimeupdate=function(){i.currentTime=0,i.ontimeupdate=null,i.play(),i.playbackRate=1},i.currentTime=Number.MAX_SAFE_INTEGER}),0),t.setData({previewPopupCancelButName:"Cancel",previewPopupDoneButName:I18n.getMsg("crm.button.attach"),showMurphyPreviewCancelBut:!0,showMurphyPreviewDoneBut:!0}),"preview"===e?t.setData({showMurphyPreviewCancelBut:!1,previewPopupDoneButName:I18n.getMsg("Done")}):(Crm.client_tracking("Write to Us - MurphyRecorder Stopped"),t.setData({uploadedFile:!1,editUploadFileName:!0}))},unhideWriteToUsPopAction:function(e){if(this.actions.dontSaveEditedFileName.call(this),"deleteMurphyVideo"===e)return this.executeMethod("deleteMurphyRecordedVideo"),this.executeMethod("unhideWriteToUsPop",e),void this.setData("showMurphyVideoPreview",!1);if(window.murphy.recording.fileNameCheck(this.getData("murphyVideoName")))this.executeMethod("unhideWriteToUsPop","showVideoUpdList"),this.setData({showMurphyVideoPreview:!1,isMurphyVideoAttached:!0});else{if(""===editInput)return void _cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("crm.function.file.name.empty"),ltPropType:"error"}});var t=I18n.getMsg("murphy.alerts.fileName.constraint");_cruxUtils.showCustomMessage({params:{ltPropMessage:t,ltPropType:"error"}})}}},methods:{beforeShowWritetous:function(){$L(".ri-descriptInput")[0].reset(),this.setData({textareaSize:!0}),Crm.userDetails.RTL_ENABLED||!0!==featuresAvailable.NEXTGENUI_ENABLED?Crm.userDetails.RTL_ENABLED&&!0==!featuresAvailable.NEXTGENUI_ENABLED?($L(".ri-writeToUs_modal")[0].setData({ltPropTransition:{animation:"slideFromLeft",duration:"0.3"}},{ltPropOffset:{top:"0px",left:"-341px"}}),this.setData({rtlTranslate:!0,disableRtlTranslate:!1})):Crm.userDetails.RTL_ENABLED&&!0===featuresAvailable.NEXTGENUI_ENABLED&&($L(".ri-writeToUs_modal")[0].setData({ltPropTransition:{animation:"slideFromRight",duration:"0.3"}},{ltPropOffset:{top:"0px",right:"461px"}}),this.setData({nextgenTranslate:!0,disableNextgenTranslate:!1})):($L(".ri-writeToUs_modal")[0].setData({ltPropTransition:{animation:"slideFromLeft",duration:"0.3"}},{ltPropOffset:{top:"0px",left:"-341px"}}),this.setData({enablePopupTranslate:!0,disablePopupTranslate:!1}))},beforeCloseWritetous:function(){Crm.userDetails.RTL_ENABLED||!0!==featuresAvailable.NEXTGENUI_ENABLED?Crm.userDetails.RTL_ENABLED&&!0==!featuresAvailable.NEXTGENUI_ENABLED?this.setData({rtlTranslate:!1,disableRtlTranslate:!0}):Crm.userDetails.RTL_ENABLED&&!0===featuresAvailable.NEXTGENUI_ENABLED&&this.setData({nextgenTranslate:!1,disableNextgenTranslate:!0}):this.setData({enablePopupTranslate:!1,disablePopupTranslate:!0})},showSubmitPopup:function(){Crm.userDetails.RTL_ENABLED||!0!==featuresAvailable.NEXTGENUI_ENABLED?Crm.userDetails.RTL_ENABLED&&!0===featuresAvailable.NEXTGENUI_ENABLED&&$L(".ri-submitPopup")[0].setData({ltPropOffset:{bottom:"0px",right:"60px"}}):$L(".ri-submitPopup")[0].setData({ltPropOffset:{bottom:"0px",left:"60px"}})},sendMailContentToMurphyAfterRecInitialisation:async function(){var e=$L("crm-profile-menu-writetous")[0].component,t={subject:e.data.subject,message:e.data.message,files:$L("lyte-fileupload")[0].ltProp("files")};await window.murphy.recording.uploadedDataHandler(t),e.executeMethod("hideWriteToUsPop")},submitReportIssue:function(){this.setData({showSuccessPopup:!0})},deleteMurphyRecordedVideo:function(e){window.murphy.recording.destroyRecorder(),this.executeMethod("showMurphyRecordButton"),this.setData({isMurphyVideoAttached:!1}),e&&e.stopImmediatePropagation()},recInitInOtherOrgs:function(){window.murphy.recording.removeRecorder(),$L("crm-profile-menu-writetous")[0].component.executeMethod("deleteMurphyRecordedVideo")},getDefaultVideoName:function(){var e="";const t=new CrmDate;var o,i,a,s=Utils.getTimeStringWithAmPm();o=s.hrs,i=s.mins,a=s.meridiem.toUpperCase(),e=(e="Recording-"+t.getDateInPattern("DD-MM-YYYY")+"-"+o+":"+i+" "+a).trim(),window.murphy.recording.fileNameCheck(e)?this.setData("murphyVideoName",e):this.setData("murphyVideoName","recordedVideo")},onAdd:function(){var e=$L(".ri-writetousPopup").find("lyte-fileupload")[0].component.data.queueList;this.setData("queueList",e)},alertMessageFromRecorder:function(e,t){_cruxUtils.showCustomMessage({params:{ltPropMessage:e,ltPropType:t,ltPropDuration:"3000"}})},recordStartHook:function(){Crm.client_tracking("Write to Us - MurphyRecording started")},fileSizeCheck:function(){var e=$L("lyte-fileupload")[0],t=e.ltProp("files"),o=0,i=0,a=!1;if(t.forEach((function(e){(o+=e.size)>1e7?a=!0:i+=1})),a){for(var s=t.length,r=e.component.data.queueList,n=i;n<s;n++){var l=r[n].id;e.removeUpload(l)}var p=I18n.getMsg("crm.profile.pic.writetous.attachment.limit");_cruxUtils.showCustomMessage({params:{ltPropMessage:p,ltPropType:"error"}})}this.executeMethod("onAdd")},resizeWritetoUs:function(){this.executeMethod("sendMailEnable")},sendMailEnable:function(){var e=this.data.subject;/^\s*$/.test(e)?this.setData("disableMailSent",!0):this.setData("disableMailSent",!1)},murphyVideoUploadStatusCallback:function(e){var t=$L("crm-profile-menu-writetous")[0].component;e.status.includes("success")?t.executeMethod("sendMail",e.videoId):_cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("Failed"),ltPropType:"error"}})},sendMail:function(e){var t=this,o=$L("lyte-fileupload")[0].ltProp("files"),i=new FormData;if(i.append("subject",t.data.subject),e){var a=t.data.message,s=murphy.sendUserInfo(),r="https://"+s.appDomain+"/murphy/"+s.appKey+"/tab/remotesessions?id="+e+";";a=t.data.message+" Video Id:"+r,i.append("message",a)}else i.append("message",t.data.message);for(var n=o.length,l=0;l<n;l++){var p=o[l].name;i.append("file",o[l],encodeURIComponent(p))}var c=Crm.getCrmBasePath()+"/CustomerOnBoarding.do?action=sendSupportMail";Crm.client_tracking("Profile Revamp - Write to Us Send Click"),commonUtils.showHideLoadingDiv("show"),$L.ajax({url:c,type:"POST",data:i,enctype:"multipart/form-data",processData:!1,contentType:!1,headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},success:function(){t.setData({subject:"",message:""}),t.setData("message",""),$L("lyte-fileupload")[0].removeUpload(),commonUtils.showHideLoadingDiv(),t.actions.deleteMurphyRecordedVideo(),t.executeMethod("submitReportIssue")},error:function(){commonUtils.showHideLoadingDiv(),_cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("Failed"),ltPropType:"error"}})}})},destroyMurphyRecorder:function(){window.murphy.recording.destroyRecorder(),this.setData({isMurphyVideoAttached:!1}),Crm.client_tracking("Write to Us - MurphyRecorder destroyed")},closeWriteToUsPop:function(){if(this.executeMethod("destroyMurphyRecorder"),this.data.dontClose)return setTimeout(function(){this.setData("dontClose",!1),$L("lyte-fileupload")[0].removeUpload(),this.setData({subject:"",message:"",showWriteToUs:!1}),Crm.client_tracking("Profile Revamp - Write to Us Close"),$L("crm-profile-menu")[0].component.setData("showProfilePage",!0)}.bind(this),5),!1;this.setData("showWriteToUs",!1)},hideWriteToUsPop:function(){$L("crm-profile-menu-writetous")[0].component.setData({subject:"",message:"",showWriteToUs:!1,dontClose:!1}),$L("lyte-fileupload")[0].removeUpload()},beforeDestroyMurphyRecHook:function(e){$L("crm-profile-menu-writetous")[0].component.executeMethod("unhideWriteToUsPop"),e(),Crm.client_tracking("Write to Us - MurphyRecorder destroyed")},unhideWriteToUsPop:async function(e){var t=this;t.setData({showWriteToUs:!0,dontClose:!0});var o=await window.murphy.recording.getUploadedFiles();o&&(o.subject&&t.setData("subject",o.subject),o.message&&t.setData("message",o.message));var i=o.files;if(i){var a=$L("lyte-fileupload")[0];a.removeUpload();for(var s=i.length,r=0;r<s;r++)a.addFiles(i[r])}if(window.murphy.recording.deleteWritetousUploadedFiles(),"deleteMurphyVideo"!==e){if("showVideoUpdList"===e){t.executeMethod("hideMurphyRecordButton");var n=window.murphy.recording.getVideoSize();t.setData("murphyVideoSize",n)}}else t.executeMethod("destroyMurphyRecorder")},hideMurphyRecordButton:function(){this.setData("showMurphyRecordButn",!1),this.setData("disableMailSent",!1),this.executeMethod("sendMailEnable")},showMurphyRecordButton:function(){this.setData("showMurphyRecordButn",!0),this.executeMethod("sendMailEnable")},fileReject:function(e,t){if(t&&"Invalid_Type"==t.type){var o=I18n.getMsg("crm.attach.error.fileformat");_cruxUtils.showCustomMessage({params:{ltPropMessage:o,ltPropType:"error"}})}else if(t&&"Lower_Size"==t.size){o=I18n.getMsg("crm.attach.empty.file.error");_cruxUtils.showCustomMessage({params:{ltPropMessage:o,ltPropType:"error"}})}}},didConnect:function(){this.setData("showWriteToUs",!0)}}),Lyte.Component.register("crm-chat-outoftime-error",{_template:'<template tag-name="crm-chat-outoftime-error" id="chatOutOfTimePopup" show="{{show}}"> <lyte-modal id="chatOutOfTimeModal" lt-prop-wrapper-class="chatOutOfTimeModal" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;center&quot;}" lt-prop-show-close-button="false" lt-prop-width="575px" allowmultiple="true" lt-prop-show="{{lbind(show)}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-content class="pT0"> <p class="pT20 crm-medium-large-font-size"> <template is="if" value="{{isTrialEnable}}"><template case="true"> {{getI18n(\'crm.chat.support.outoftime.notavailmessage\')}} <a href="mailto:{{support_mail}}" class="chatOutOfTimeEmail">{{support_mail_trial}}</a> </template><template case="false"><template is="if" value="{{isAdminProfileUser}}"><template case="true"> {{getI18n(\'crm.chat.support.outoftime.help\')}} <span tabindex="0" onkeydown="{{action(\'openPriorityAssistanPopup\',event)}}" onclick="{{action(\'openPriorityAssistanPopup\')}}" class="crmLinkColor cP chatOutOfTimeEmail">{{getI18n(\'crm.chat.support.outoftime.support.plans\')}}</span> {{getI18n(\'crm.label.lowercase.and\')}} <span tabindex="0" onkeydown="{{action(\'manageSubcription\',,event)}}" onclick="{{action(\'manageSubcription\')}}" class="crmLinkColor cP chatOutOfTimeEmail">{{getI18n(\'crm.chat.support.outoftime.upgrade\')}}</span> {{getI18n(\'crm.label.lowercase.to\')}} {{getI18n(\'crm.label.premium.support\')}} {{getI18n(\'crm.label.lowercase.or\')}} {{getI18n(\'crm.chat.support.outoftime.drop.email\')}} <a href="mailto:{{support_mail}}" class="chatOutOfTimeEmail">{{support_mail}}</a> </template><template case="false"> {{getI18n(\'crm.chat.support.outoftime.help.nonadmin\',\'\')}} <a href="mailto:{{support_mail}}" class="chatOutOfTimeEmail">{{support_mail}}</a> </template></template></template></template> </p> </lyte-modal-content> <lyte-modal-footer> <lyte-button data-zcqa="chat-outoftime-error-ok" lt-prop-appearance="primary" onclick="{{action(\'closePopup\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.button.ok\')}}</template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]},{type:"attr",position:[3]},{type:"text",position:[3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]},{type:"attr",position:[3]},{type:"text",position:[3,0]},{type:"text",position:[5]},{type:"attr",position:[7]},{type:"text",position:[7,0]},{type:"text",position:[9]},{type:"text",position:[11]},{type:"text",position:[13]},{type:"text",position:[15]},{type:"attr",position:[17]},{type:"text",position:[17,0]}]},false:{dynamicNodes:[{type:"text",position:[1]},{type:"attr",position:[3]},{type:"text",position:[3,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"registerYield",position:[3,1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["show","isAdminProfileUser","support_mail","support_mail_trial","supportPlan","paymentMode","isTrialEnable"],data:function(){return{show:Lyte.attr("boolean",{default:!1}),isAdminProfileUser:Lyte.attr("boolean",{default:!1}),support_mail:Lyte.attr("string",{default:RebrandLinkUtil.getProperty("SUPPORTMAILID")}),support_mail_trial:Lyte.attr("string",{default:RebrandLinkUtil.getProperty("EVALUATION_REPLY_TO")}),supportPlan:Lyte.attr("string",{default:Crm.userDetails.SUPPORT_PLAN}),paymentMode:Lyte.attr("string",{default:Crm.userDetails.profileNature}),isTrialEnable:Lyte.attr("boolean",{default:Crm.userDetails.isTrialEnabled})}},actions:{manageSubcription:function(e,t){if(!t||"keydown"!==t.type||13===t.keyCode){var o="Profile Revamp - Priority Assitance "+e+" Upgrade Click";Crm.client_tracking(o),document.querySelector("crm-profile-menu").component.actions.manageSubcription(e)}},openPriorityAssistanPopup:function(e){if(!e||"keydown"!==e.type||13===e.keyCode){if(Lyte.Component.registeredComponents["crm-profile-menu-assitance"])Lyte.Component.render("crm-profile-menu-assitance",{source:"chat-outoftime"},"body");else{var t=networkUtils.returnDependencyFiles(["crm-profile-menu-assistance.js"],ResourceConstants.CRMClient),o=networkUtils.returnDependencyFiles(["crm-profile-menu-assistance.css"],ResourceConstants.CRMClient),i=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("ProfilePriorityAssitance")],ResourceConstants.CRM),a=t.concat(o).concat(i);Lyte.injectResources(a,void 0,(function(){0===$L("crm-profile-menu-assitance").length&&Lyte.Component.render("crm-profile-menu-assitance",{source:"chat-outoftime"},"body")}))}Crm.client_tracking("Crm Chat OutOfTime - Priority Assitance Click")}},closePopup:function(){this.setData("show",!1)}}});
