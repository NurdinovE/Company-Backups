Lyte.Component.register("crm-related-list-view-header",{_template:'<template tag-name="crm-related-list-view-header"> <lyte-event-listener event-name="relatedList" on-fire="{{action(\'handleRefresh\')}}"> <template is="if" value="{{canvas}}"><template case="true"> <div class="rl_Header {{campaignRelatedListClass}}"> <div class="dF maxW450 flexWW"> <div class="relListHeader mR10 dF aiCenter"> <template is="if" value="{{expHandlers(relatedList.type,\'!=\',\'default\')}}"><template case="true"> <template is="if" value="{{editCustomRelList}}"><template case="true"> <span class="labelValTwo oI pR dF w100_per"> <crux-text-component class="dIB w390" cx-prop-from="create" id="customRel" cx-prop-maxlength="50" cx-prop-autofocus="true" cx-prop-clear-error-message="false" cx-prop-value="{{rlEditLabel}}" cx-prop-appearance="box"></crux-text-component> <span class="flexAlignCenter mL5"> <span class="zcicncss-tick-filled-rounded zcicn-cssIcons zcicn_blue_mask cP mR8" onclick="{{action(\'saveCustomRL\')}}"></span> <span class="cP" onclick="{{action(\'cancelCustomRL\')}}"><crmutil-icon icon-name="close-rounded" icon-class="zcicn-close-rounded zcicn_grey"></crmutil-icon></span> </span> </span> </template><template case="false"> <span name="{{relatedList.display_label}}_{{relatedList.id}}" id="{{relatedList.display_label}}_{{relatedList.id}}" class="w100_per pR dF aiCenter" data-zcqa="Related_List_Name_{{relatedList.display_label}}"> <lyte-text class="relListHead dIB" lt-prop-value="{{relatedList.display_label}}"></lyte-text> <template is="if" value="{{expHandlers(isClientAccount,\'!\')}}"><template case="true"> <span class="icon-hover-effects icon-hover-lg icon-hover-gray-bg-nb pR vH newHHover" onclick="{{action(\'editCustomRL\')}}"> <span class="zcicncss-editFilled zcicn-cssIcons zcicncss13 zi2"></span> </span> </template></template> </span> </template></template> </template><template case="false"> <span name="{{relatedList.display_label}}_{{relatedList.id}}" id="{{relatedList.display_label}}_{{relatedList.id}}" class="relListHead dIB mT4" data-zcqa="Related_List_Name_{{relatedList.display_label}}"> <template is="if" value="{{relatedListLabel}}"><template case="true"><lyte-text lt-prop-value="{{relatedListLabel}}"></lyte-text></template><template case="false"><lyte-text lt-prop-value="{{relatedList.display_label}}"></lyte-text></template></template> </span> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(module,\'===\',\'Tasks\'),\'||\',expHandlers(module,\'===\',\'Events\')),\'&amp;&amp;\',expHandlers(relatedList.api_name,\'===\',\'Attachments\')),\'&amp;&amp;\',expHandlers(relatedListCount,\'!==\',undefined))}}"><template case="true"> <span class="relListHead ellipticText dIB">({{relatedListCount}})</span> </template></template> </template></template><template is="if" value="{{expHandlers(expHandlers(isClientAccount,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(relatedList.api_name,\'==\',\'Reporting_Contacts\'),\'||\',expHandlers(expHandlers(expHandlers(relatedList.api_name,\'==\',\'Contacts\'),\'&amp;&amp;\',expHandlers(module,\'==\',&quot;Accounts&quot;)),\'&amp;&amp;\',expHandlers(relatedList.type,\'==\',\'default\'))))}}"><template case="true"> <lyte-button lt-prop-appearance="primary" lt-prop-class="outlineprimary ghostoutlineblue mR0 mL10" id="contactTreePopup" lt-prop-size="small" onclick="{{action(\'loadContactsHierarchyView\')}}" class="{{if(expHandlers(showNoRecords,\'||\',disableHierachyBtn),\'disabledArow\',\'\')}}"><template is="registerYield" yield-name="text">{{getI18n("crm.contact.HierarchyView")}}</template></lyte-button> <div id="contactTreePopupId" class="newPopup ppTop is-scroll" style="display : none;"> <h2 class="mB0 pp-header crm-font-bold">{{relatedList.display_label}} {{getI18n("crm.contact.hierarchy.view.Role_Hierarchy")}}</h2> <span class="dIB closeBtnHierar"></span> <div class="pp-content"> <div class="timelineCntn"> <span class="cmpnyLogo dIB"></span> <span class="dIB pB10" id="treeAccName"></span> <ul class="hierarcyTimeline" id="userstree"></ul> </div> </div> <div class="pp-footer"></div> </div> </template></template> </div> <div class="aiCenter dF mR10"> <template is="if" value="{{expHandlers(selectedIds.length,\'>\',0)}}"><template case="true"> <template is="if" value="{{expHandlers(customButtons.length,\'>\',0)}}"><template case="true"> <div id="customBtn" class="clearFix listViewCB mT3"> <crm-custom-button module="{{module}}" from="relatedList" btnid="relatedList" custom-buttons="{{customButtons}}"></crm-custom-button> </div> </template></template> <span class="crm-small-font-size crmBaseColor flexAlignCenter mT2 tOE"><span class="pR5 crm-font-bold crm-base-font-size">{{selectedIds.length}}</span> {{getI18n(\'crm.label.selected.records\')}}</span> </template></template> </div> </div> <div class="mlAuto dF aiCenter Rll_calcidth"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(showActions,\'&amp;&amp;\',expHandlers(isConnectedRecordChildRl,\'!\')),\'&amp;&amp;\',expHandlers(parentRecNotInReview,\'||\',expHandlers(expHandlers(parentRecNotInReview,\'!\'),\'&amp;&amp;\',expHandlers(relatedList.api_name,\'===\',&quot;Attachments&quot;)))),\'&amp;&amp;\',parentRecApproved),\'&amp;&amp;\',expHandlers(expHandlers(showNoRecords,\'!\'),\'||\',expHandlers(relatedList.api_name,\'===\',&quot;Attachments&quot;))),\'&amp;&amp;\',expHandlers(expHandlers(selectedIds.length,\'===\',0),\'||\',expHandlers(expHandlers(selectedIds.length,\'!==\',0),\'&amp;&amp;\',expHandlers(module,\'===\',\'Campaigns\'))))}}"><template case="true"> <div class="zcanvas_rl_hide dIFlex"> <crm-related-list-actions module="{{module}}" related-records="{{tableData}}" related-list="{{relatedList}}" record="{{record}}"></crm-related-list-actions> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(module,\'==\',\'Leads\'),\'||\',expHandlers(module,\'==\',\'Contacts\')),\'&amp;&amp;\',expHandlers(relatedModule,\'==\',\'Campaigns\')),\'||\',expHandlers(expHandlers(module,\'===\',\'Campaigns\'),\'&amp;&amp;\',expHandlers(expHandlers(relatedModule,\'==\',\'Leads\'),\'||\',expHandlers(relatedModule,\'==\',\'Contacts\')))),\'&amp;&amp;\',expHandlers(relatedList.type,\'===\',\'default\')),\'&amp;&amp;\',expHandlers(showNoRecords,\'!\'))}}"><template case="true"> <span class="icon-hover-effects filter-icon icon-hover-gray-bg-nb mR4 pR" data-zcqa="filterIcon_{{relatedList.display_label}}" onclick="{{action(\'showCampaignFilter\')}}" lt-prop-aria-keydown="true" role="button" tabindex="0" aria-controls="filters_{{relatedList.id}}" lt-prop-title="{{getI18n(\'crm.accessibility.filter.campaign\')}}" aria-label="{{getI18n(\'crm.accessibility.filter.campaign\')}}"> <span class="zi2 {{if(campaignFilter,\'zcicncss-filterclose\',\'zcicncss-filter zcicn-cssIcons\')}}"></span> </span> </template></template> <template is="if" value="{{ifContains(relatedModule,\'Visits\')}}"><template case="true"> <crm-salesiq-portals-dropdown class="pR mR8 dIB" entity-id="{{record.id}}" module="{{module}}" rid="{{relatedList.id}}" selected-portal-name="{{lbind(portalName)}}" is-canvas="true"></crm-salesiq-portals-dropdown> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(relatedList.customize_fields,\'&amp;&amp;\',expHandlers(showNoRecords,\'!\')),\'&amp;&amp;\',expHandlers(relatedList.personality_name,\'!==\',&quot;VISITACTIONSPERSONALITY&quot;)),\'&amp;&amp;\',expHandlers(isConnectedRecordChildRl,\'!\'))}}"><template case="true"> <div class="icon-hover-effects column-add-icon icon-hover-gray-bg-nb mR4 pR" data-zcqa="customizeColumnList_{{relatedList.id}}" id="customizeList{{relatedList.id}}" value="relate" onclick="{{action(\'showColumnList\')}}" tabindex="0" role="button" aria-haspopup="listbox" lt-prop-aria-keydown="true" lt-prop-title="{{getI18n(\'crm.accessibility.customize.popup\')}}" aria-label="{{getI18n(\'crm.accessibility.customize.popup\')}}"><span class="zcicncss-column-add zcicn-cssIcons zcicn_black_mask scale9 zi2"></span></div> </template><template case="false"><template is="if" value="{{isConnectedRecordChildRl}}"><template case="true"> <div class="icon-hover-effects column-add-icon icon-hover-gray-bg-nb mR4 pR" data-zcqa="customizeColumnList_{{relatedList.id}}" id="customizeList{{relatedList.id}}" value="relate" onclick="{{action(\'showColumnList\')}}"><span class="zcicncss-column-add zcicn-cssIcons zcicn_black_mask scale9 zi2"></span></div> </template></template></template></template> <template is="switch" value="{{relatedList.api_name}}"><template case="Contact_Roles"> <input type="hidden" name="Potential_accountId" id="Potential_accountId"> <input type="hidden" id="callingAction" value="-1"> </template><template case="Attachments"> <input type="hidden" name="moduleForIFrame" id="moduleForIFrame" value="{{module}}"> <input type="hidden" name="anchorId" id="anchorId" value="{{relatedList.id}}"> <input type="hidden" name="fileCheckVariable" id="fileCheckVariable" value="RelatedList"> <input type="hidden" name="ID_ATTACHMENTSPERSONALITY" value="{{relatedList.id}}"> </template><template case="Related_List"> <div class="dIFlex" id="relPersAction_{{relatedList.id}}" style="width:70px !important;"></div> </template></template> <input type="hidden" name="ID_{{relatedList.display_label}}" value="{{relatedList.id}}"> </div> </div> </template></template> <div id="{{relatedList.id}}" class="{{if(ifEquals(relatedModule,&quot;Attachments&quot;),if(fromDetailLyte,&quot;attachmentRL&quot;,&quot;attachmentRL m20&quot;),&quot;&quot;)}}"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(selectedIds.length,\'>\',0),\'&amp;&amp;\',isChrono),\'&amp;&amp;\',expHandlers(canvas,\'!\'))}}"><template case="true"> <div class="dIF aiCenter mB7"> <div class="clearFix listViewCB"> <crm-custom-button module="{{module}}" from="relatedList" btnid="relatedList" custom-buttons="{{customButtons}}"></crm-custom-button> </div> <span class="mL5"><span class="crm-font-bold">{{selectedIds.length}}</span> {{getI18n(\'crm.label.selected.records\')}}</span> </div> </template></template> <template is="if" value="{{showLoading}}"><template case="true"> <div class="rl_NoRec {{if(fromDetailLyte,\'\',\'aligncenter\')}}"> <div class="pR30 fontsmooth dvfontSnone">{{getI18n(\'crm.admin.loading\')}}</div> </div> </template><template case="false"><template is="if" value="{{inaccessible}}"><template case="true"> <div class="p20 permission_deniedTxt">{{unescape(getI18n(\'crm.canvas.component.permission.denied\'))}}</div> </template><template case="false"><template is="if" value="{{showNoRecords}}"><template case="true"> <div class="rl_NoRec {{if(fromDetailLyte,\'\',\'aligncenter\')}}"> <div id="norec_{{relatedList.id}}"> <template is="if" value="{{expHandlers(relatedList.api_name,\'==\',&quot;Attachments&quot;)}}"><template case="true"> <div class="dvNoRecordsText pR10 w100_per">{{getI18n("crm.event.attachment.empty.msg")}}</div> </template><template case="false"> <div class="dvNoRecordsText pR10">{{getI18n("crm.new.label.no.records")}}</div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(showActions,\'&amp;&amp;\',expHandlers(isConnectedRecordChildRl,\'!\')),\'&amp;&amp;\',expHandlers(relatedList.api_name,\'!==\',&quot;Attachments&quot;)),\'&amp;&amp;\',expHandlers(isChrono,\'!\')),\'&amp;&amp;\',parentRecNotInReview),\'&amp;&amp;\',parentRecApproved)}}"><template case="true"> <div class="zcanvas_rl_hide dIFlex"> <crm-related-list-actions no-records-hide-edit="true" module="{{module}}" related-records="{{tableData}}" related-list="{{relatedList}}" record="{{record}}"></crm-related-list-actions> </div> </template></template> </div> </div> </template><template case="false"> <template is="if" value="{{recordGet}}"><template case="true"> <crux-table-component cx-prop-textarea-properties="{{textAreaProperties}}" cx-prop-aria="{{isAccessibilityConfigSupported}}" cx-prop-table-class="{{relatedList.module.api_name}} {{if(fromDetailLyte,\'noBorderTable mB15\',\'\')}} crmRelatedListTable crmTableBottomBorder crmNoCapitalizeTableHeader" cx-prop-show-loading="{{showTableLoading}}" cx-prop-header="{{customfields}}" cx-prop-label-selector="field_label" cx-prop-content="{{tableData}}" cx-prop-clip-mode="{{fullPageLyteRender}}" cx-prop-tooltip="true" cx-prop-sort-columns="true" cx-prop-body-id="lvTred" cx-prop-column-cell-class="sortRelated minW100" cx-prop-field-type-mapping="{{fieldMapping}}" on-sort="{{action(\'showSortDropdown\')}}" cx-prop-sorted-column="{{sort_by}}" cx-prop-sorted-order="{{sort_order}}" on-mouse-over="{{action(\'showIcons\')}}" on-mouse-out="{{action(\'hideIcons\')}}" cx-prop-field-id-vs-route-mapping="{{routeMapping}}" cx-prop-field-type-mapping-selector="api_name" cx-prop-no-records-message="{{getI18n(\'crm.new.label.no.records\')}}" cx-prop-table-id="listviewtable" cx-prop-yield-for-prefix="{{if(expHandlers(prefixYields.length,\'>\',0),true,false)}}" cx-prop-prefix-yields="{{prefixYields}}" cx-prop-height="{{height}}" data-zcqa="relatedListTable" class="nohover" cx-prop-row-zcqa="detailView" cx-prop-module="{{relatedModule}}" cx-prop-add-search="false" cx-prop-enable-body-scroll="false" apply-filter="{{method(\'campaignFilter\')}}" clear-filter="{{method(\'campaignFilterClear\')}}" cx-prop-filter-component="crux-lookupfilter-component" cx-prop-show-filter="{{campaignFilter}}" cx-prop-filter-show-clear="true" set-lookup-filter-conditions="{{method(\'filterConditions\')}}"> <template is="yield" yield-name="body-lookup"> <template is="if" value="{{ifEquals(relatedModule,&quot;Attachments&quot;)}}"><template case="true"> <span id="attach_{{recordObj.id}}" class="crmLinkColor cP {{if(ifEquals(recordObj.extn,\'png\'),\'realtedListImageFileName\',\'\')}}" onclick="{{action(\'attachNameClick\',recordObj)}}" data-zcqa="relatedList_{{recordObj.File_Name}}_Attachments" data-lytecbox-title="{{recordObj.File_Name}}" data-lytecbox-dlink="{{recordObj.$previewUrl}}" lt-prop-with-credentails="true" data-lytecbox-href="{{recordObj.$previewUrl}}" data-sel-image="{{recordObj.id}}"> <template is="if" value="{{expHandlers(expHandlers(recordObj.extn,\'===\',&quot;link&quot;),\'&amp;&amp;\',checkLinkFromWorkDrive(recordObj.$link_url))}}"><template case="true"> <span class="svgIcons ico-teamDrive dIB vam attachIconAlign"></span> </template><template case="false"><template is="if" value="{{ifEquals(recordObj.extn,\'svg\')}}"><template case="true"> <span class="{{if(ifEquals(recordObj.$internal_type,\'workdrive_link\'),\'svgIcons ico-teamDrive\',concat(\'png\',\'-icon\',if(ifEquals(recordObj.extn,\'link\'),\'Atc\',\'\')))}} dIB vam attachIconAlign"></span> </template><template case="false"> <span class="{{if(ifEquals(recordObj.$internal_type,\'workdrive_link\'),\'svgIcons ico-teamDrive\',concat(recordObj.extn,\'-icon\',if(ifEquals(recordObj.extn,\'link\'),\'Atc\',\'\')))}} dIB vam attachIconAlign"></span> </template></template></template></template> <span class="dIB elipse_toE maxW70per {{if(fromDetailLyte,\'vaT\',\'vaM\')}} " lt-prop-title="{{recordObj.File_Name}}" lt-prop-tooltip-class="alignleft mw50per wordBreak" lt-prop-tooltip-config="{&quot;showdelay&quot;:1000,&quot;maxdisplaytime&quot; : 100000000}">{{recordObj.File_Name}}</span> <template is="if" value="{{expHandlers(expHandlers(recordObj.extn,\'==\',\'mp3\'),\'&amp;&amp;\',expHandlers(isWDEnabled,\'!\'))}}"><template case="true"> <span class="cP vH icon_play notPlaying dIB mL10 {{if(ifEquals(playingMp3,recordObj.id),\'icon_pause\',\'\')}}" onclick="{{action(\'playMp3\',recordObj.id)}}" lt-prop-title="{{getI18n(\'crm.button.play\')}}" lt-prop-tooltip-config="{&quot;showdelay&quot;:1000}" id="play_{{recordObj.id}}" data-zcqa="{{recordObj.id}}_playAudio"></span> <audio class="dN" id="audio_{{recordObj.id}}" src="{{recordObj.$previewUrl}}"></audio> </template></template> </span> <template is="if" value="{{fromDetailLyte}}"><template case="true"> <span class="vH cP dIB mL5 vaT" id="attachLinks_{{recordObj.id}}" lt-prop-title="{{getI18n(\'crm.label.More\')}}"> <crmutil-icon class="zcicn-more-brrounded mT_2" icon-name="more-hr-md" icon-class="zcicn-more-hr-md zcicn_636f86 "></crmutil-icon></span> </template><template case="false"> <span class="vH rl_dropIcon vaM" id="attachLinks_{{recordObj.id}}" lt-prop-title="{{getI18n(\'crm.label.More\')}}"></span> </template></template> <lyte-menu on-before-open="{{method(\'menuOnBeforeOpen\')}}" on-open="{{method(\'attachLinksOpen\')}}" on-close="{{method(\'onAttachMenuClose\',recordObj.id)}}" lt-prop-wrapper-class="attachLinksMenu" lt-prop-yield="true" lt-prop-query="#attachLinks_{{recordObj.id}}" lt-prop-freeze="false" id="attachLinksMenu_{{recordObj.id}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body id="callMoreOption" class="callMoreOptionLyteNew cscript-attachment-menubody" data-zcqa="callMoreOption"> <template is="if" value="{{expHandlers(isSandBox,\'||\',expHandlers(isWDEnabled,\'!\'))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(recordObj.extn,\'==\',\'link\'),\'||\',expHandlers(recordObj.extn,\'==\',\'png\')),\'||\',recordObj.$previewUrl),\'&amp;&amp;\',expHandlers(recordObj.extn,\'!=\',\'mp3\')),\'&amp;&amp;\',expHandlers(recordObj.extn,\'!=\',\'movie\')),\'&amp;&amp;\',expHandlers(recordObj.extn,\'!=\',\'file\')),\'&amp;&amp;\',expHandlers(recordObj.extn,\'!=\',\'zip\')),\'&amp;&amp;\',expHandlers(recordObj.extn,\'!=\',\'svg\'))}}"><template case="true"> <lyte-menu-item id="viewAttach_{{recordObj.id}}" onclick="{{action(\'attachLinkClick\',\'viewAttach\',recordObj)}}" data-zcqa="lnk_view_Attachments" class="crm-font-regular {{if(ifEquals(recordObj.extn,\'png\'),\'realtedListImage\',\'\')}}" data-lytecbox-title="{{recordObj.File_Name}}" data-lytecbox-dlink="{{recordObj.$previewUrl}}" data-lytecbox-href="{{recordObj.$previewUrl}}" data-sel-image="{{recordObj.id}}">{{getI18n(\'View\')}}</lyte-menu-item> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(record.extn,\'!=\',\'mp3\'),\'&amp;&amp;\',expHandlers(record.extn,\'!=\',\'movie\')),\'&amp;&amp;\',expHandlers(record.extn,\'!=\',\'zip\'))}}"><template case="true"> <lyte-menu-item id="viewAttach_{{recordObj.id}}" onclick="{{action(\'attachLinkClick\',\'viewAttach\',recordObj)}}" data-zcqa="lnk_view_Attachments" class="crm-font-regular {{if(ifEquals(recordObj.extn,\'png\'),\'realtedListImage\',\'\')}}" data-lytecbox-title="{{recordObj.File_Name}}" data-lytecbox-dlink="{{recordObj.$previewUrl}}" data-lytecbox-href="{{recordObj.$previewUrl}}" data-sel-image="{{recordObj.id}}">{{getI18n(\'View\')}}</lyte-menu-item> </template></template> </template></template> <template is="if" value="{{expHandlers(expHandlers(recordObj.extn,\'==\',\'link\'),\'&amp;&amp;\',expHandlers(recordObj.$internal_type,\'!=\',\'workdrive_link\'))}}"><template case="true"> <lyte-menu-item id="editAttach" onclick="{{action(\'attachLinkClick\',\'editLinkAttach\',recordObj)}}" data-zcqa="lnk_edit_Attachments" class="crm-font-regular">{{getI18n(\'Edit\')}}</lyte-menu-item> </template></template> <template is="if" value="{{expHandlers(recordObj.extn,\'!=\',\'link\')}}"><template case="true"> <lyte-menu-item id="downloadAttach" onclick="{{action(\'attachLinkClick\',\'downloadAttach\',recordObj)}}" data-zcqa="lnk_download_Attachments" class="crm-font-regular">{{getI18n(\'crm.view.attachment.download\')}}</lyte-menu-item> </template></template> <lyte-menu-item id="deleteAttach" onclick="{{action(\'attachLinkClick\',\'deleteAttach\',recordObj)}}" data-zcqa="lnk_delete_Attachments" class="crm-font-regular crm-rl-write-action">{{getI18n(\'Delete\')}}</lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> </template><template case="false"><template is="if" value="{{ifEquals(relatedList.api_name,&quot;Invited_Events&quot;)}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-transition-data="{&quot;cvid&quot; : &quot;{{moduleInfo.cvid}}&quot;, &quot;fromActivityListView&quot; : true, &quot;recordNum&quot;: &quot;{{recordObj.recnum}}&quot;}" cx-prop-value="{{recordObj[fieldObj.api_name]}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{relatedModule}}&quot;, &quot;{{recordObj.id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-query-params="{{if(ifEquals(relatedModule,\'Activities\'),concat(\'{&quot;sub_module&quot;:&quot;\',recordObj.Activity_Type,\'&quot;}\'))}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name]}}" cx-prop-id="listView_{{recordObj.id}}"></crux-lookup-component> {{unescape(getColorCodeForEvents("true",recordObj))}} <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(recordObj.$review,\'!\'),\'||\',expHandlers(recordObj.$review,\'==\',&quot;Approved&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(recordObj.$approval_state,\'===\',\'approved\'),\'||\',expHandlers(recordObj.$approval_state,\'===\',\'review_process_pending\')),\'||\',expHandlers(recordObj.$approval_state,\'===\',\'review_process_rejected\')),\'||\',expHandlers(recordObj.$approval_state,\'===\',\'merge_pending\')),\'||\',recordObj.$approval.resubmit)),\'&amp;&amp;\',expHandlers(recordObj.$stop_processing,\'!\')),\'||\',expHandlers(recordObj.$approval,\'!\'))}}"><template case="true"> <span class="dIB vH cP mL5 vaT" id="attachLinks_{{recordObj.id}}" lt-prop-title="{{getI18n(\'crm.label.More\')}}" data-zcqa="RL_OptionsIcon"><crmutil-icon class="zcicn-more-brrounded" icon-name="more-hr-md" icon-class="zcicn-more-hr-md zcicn_636f86 "></crmutil-icon></span> <lyte-menu on-before-open="{{method(\'menuOnBeforeOpen\')}}" on-open="{{method(\'attachLinksOpen\')}}" on-close="{{method(\'onAttachMenuClose\',recordObj.id)}}" lt-prop-wrapper-class="attachLinksMenu" lt-prop-yield="true" lt-prop-query="#attachLinks_{{recordObj.id}}" lt-prop-freeze="false" id="attachLinksMenu_{{recordObj.id}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body id="callMoreOption" class="callMoreOptionLyteNew" data-zcqa="callMoreOption"> <lyte-menu-item id="editEvent" onclick="{{action(\'invitedEventsDrop\',\'edit\',recordObj)}}" data-zcqa="relatedListEdit_Events" class="crm-font-regular">{{getI18n(\'Edit\')}}</lyte-menu-item> <lyte-menu-item id="deleteEvent" onclick="{{action(\'invitedEventsDrop\',\'delete\',recordObj)}}" data-zcqa="lnk_delete_Events" class="crm-font-regular">{{getI18n(\'Delete\')}}</lyte-menu-item> <lyte-menu-item id="disassociateEvent" onclick="{{action(\'invitedEventsDrop\',\'disassociate\',recordObj)}}" data-zcqa="lnk_remove_entity" class="crm-font-regular">{{getI18n(\'crm.label.event.remove.participant\',getValue(record,displayField[module][0]))}}</lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> </template><template case="false"> <span class="dIB vH cP mL5 vaT" id="attachLinks_{{recordObj.id}}" lt-prop-title="{{getI18n(\'crm.approvalProcess.label.waitingForApproval\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;right&quot;}"><crmutil-icon class="zcicn-more-brrounded" icon-name="more-hr-md" icon-class="zcicn-more-hr-md zcicn_636f86 "></crmutil-icon></span> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(relatedList.type,\'==\',\'multiselectlookup\'),\'&amp;&amp;\',expHandlers(fieldObj.api_name,\'==\',\'Name\'))}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{recordObj[fieldObj.api_name]}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{relatedList.linkingmodule}}&quot;, &quot;{{recordObj.id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name]}}" cx-prop-id="listView_{{recordObj.id}}"></crux-lookup-component> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(moduleInfo.module_name,\'&amp;&amp;\',contains(displayField[moduleInfo.module_name],fieldObj.api_name)),\'&amp;&amp;\',ifNotEquals(relatedList.api_name,&quot;Competitors&quot;))}}"><template case="true"><template is="if" value="{{expHandlers(relatedModule,\'!=\',&quot;Activities&quot;)}}"><template case="true"><template is="if" value="{{isVisitorOnline(moduleInfo.module_name,record.id)}}"><template case="true"> <span id="online-entity-{{recordObj.id}}-lview&quot;+&quot;" class="online-entity vaT"></span> </template></template> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="true" cx-prop-value="{{recordObj[fieldObj.api_name]}}" cx-prop-route-name="{{getRouteNameByModule(relatedModule)}}" cx-prop-dynamic-params="[&quot;{{relatedModule}}&quot;, &quot;{{recordObj.id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-query-params="{{if(ifEquals(relatedModule,\'Activities\'),concat(\'{&quot;sub_module&quot;:&quot;\',recordObj.Activity_Type,\'&quot;}\'))}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name]}}" cx-prop-id="listView_{{recordObj.id}}"></crux-lookup-component> </template><template case="false"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="true" cx-prop-value="{{recordObj[fieldObj.api_name]}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{relatedModule}}&quot;, &quot;{{recordObj.id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-query-params="{{if(ifEquals(relatedModule,\'Activities\'),concat(\'{&quot;sub_module&quot;:&quot;\',recordObj.Activity_Type,\'&quot;}\'))}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name]}}" cx-prop-id="listView_{{recordObj.id}}"></crux-lookup-component> </template></template> <template is="if" value="{{recordObj.Recurring_Activity}}"><template case="true"> <crmutil-icon class="mT1" icon-name="repeat" icon-class="zcicn-repeat crmBaseIcon mL5"></crmutil-icon> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.lookup.module.api_name,\'==\',&quot;se_module&quot;)}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{if(fullPageLyteRender,recordObj[fieldObj.api_name],recordObj[fieldObj.api_name].name)}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{if(ifEquals(getModuleNameByApiName(recordObj.$se_module),&quot;Deals&quot;),&quot;Potentials&quot;,getModuleNameByApiName(recordObj.$se_module))}}&quot;, &quot;{{recordObj[fieldObj.api_name].id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-icon-class="{{concat(getModuleNameForIcon(recordObj.$se_module),\'Small\')}}" onmouseover="{{action(\'showHideRelatedFields\',recordObj,fieldObj)}}" onmouseout="{{action(\'showHideRelatedFields\')}}" cx-prop-show-bc="{{fullPageLyteRender}}" cx-prop-module="{{if(ifEquals(getModuleNameByApiName(recordObj.$se_module),&quot;Deals&quot;),&quot;Potentials&quot;,getModuleNameByApiName(recordObj.$se_module))}}" cx-prop-field="{{fieldObj}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name].name}}"></crux-lookup-component> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.column_name,\'==\',&quot;CONTACTID&quot;)}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{if(fullPageLyteRender,recordObj[fieldObj.api_name],recordObj[fieldObj.api_name].name)}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;Contacts&quot;, &quot;{{recordObj[fieldObj.api_name].id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" onmouseover="{{action(\'showHideRelatedFields\',recordObj,fieldObj)}}" onmouseout="{{action(\'showHideRelatedFields\')}}" cx-prop-show-bc="{{fullPageLyteRender}}" cx-prop-module="Contacts" cx-prop-field="{{fieldObj}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name].name}}"></crux-lookup-component> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.api_name,\'==\',&quot;Appointments_Booking_Form_Name__s&quot;)}}"><template case="true"> <crux-lookup-component cx-prop-zcqa="{{recordObj[fieldObj.api_name].name}}" cx-prop-value="{{recordObj[fieldObj.api_name].name}}" cx-prop-module="CalendarBookings" cx-prop-route-name="crm.settings.section.calendar-booking.view-calendar-booking" cx-prop-query-params="{&quot;module&quot; : &quot;Appointments__s&quot;, &quot;type&quot;: &quot;team&quot;}" cx-prop-dynamic-params="[&quot;{{recordObj[fieldObj.api_name].id}}&quot;]"> </crux-lookup-component> </template><template case="false"><template is="if" value="{{recordObj[fieldObj.api_name].id}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{if(fullPageLyteRender,recordObj[fieldObj.api_name],recordObj[fieldObj.api_name].name)}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{getModuleNameByApiName(fieldObj.lookup.module.api_name)}}&quot;, &quot;{{recordObj[fieldObj.api_name].id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-icon-class="{{if(ifEquals(fieldObj.api_name,\'What_Id\'),concat(getModuleNameForIcon(recordObj.$se_module),\'Small\'))}}" onmouseover="{{action(\'showHideRelatedFields\',recordObj,fieldObj)}}" onmouseout="{{action(\'showHideRelatedFields\')}}" cx-prop-show-bc="{{fullPageLyteRender}}" cx-prop-module="{{getModuleNameByApiName(fieldObj.lookup.module.api_name)}}" cx-prop-field="{{fieldObj}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name].name}}"></crux-lookup-component> </template><template case="false"><template is="if" value="{{ifEquals(relatedList.api_name,&quot;Competitors&quot;)}}"><template case="true"> <span class="link1" onclick="{{action(\'showCompetitorPopup\',recordObj)}}">{{recordObj.Competitor_Name}}</span> </template><template case="false"><template is="if" value="{{expHandlers(relatedList.api_name,\'==\',\'Stage_History\')}}"><template case="true"> <span class="stageHistory vaT">{{recordObj.stage}}</span> </template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template> <template is="if" value="{{expHandlers(ifEquals(relatedModule,&quot;Activities&quot;),\'&amp;&amp;\',recordObj.$in_project_sync)}}"><template case="true"> <i class="task_syncIcon vaM mL2 mB2" lt-prop-title="{{concat(getI18n(&quot;crm.schedules.prefix.in&quot;),getI18n(&quot;crm.integ.sync.message&quot;,&quot;crm.project.integration.title&quot;))}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;followcursor&quot;, &quot;appearance&quot; : &quot;box&quot;}"></i> </template></template> <template is="if" value="{{expHandlers(ifEquals(relatedModule,&quot;Activities&quot;),\'||\',expHandlers(ifEquals(relatedModule,&quot;Events&quot;),\'&amp;&amp;\',recordObj[fieldObj.api_name]))}}"><template case="true"> {{unescape(getColorCodeForEvents("true",recordObj))}} </template></template> </template> <template is="yield" yield-name="body-member-info"> <template is="if" value="{{ifEquals(fieldObj.data_type,\'datetime\')}}"><template case="true"> <crux-date-time-component cx-prop-value="{{getNestedObjValue(recordObj,fieldObj.api_name)}}" cx-prop-datetime-in-user-pattern="false"></crux-date-time-component> </template><template case="false"><template is="if" value="{{ifEquals(fieldObj.api_name,\'$member_info.Response\')}}"><template case="true"> <template is="if" value="{{recordObj.$member_info.Response}}"><template case="true"> <span class="crmLinkColor cP crm-base-font-size" data-zcqa="viewResponse" onclick="{{action(\'viewResponse\',this)}}" data-params="{&quot;hideSummary&quot; : &quot;true&quot;,&quot;action&quot; : &quot;viewResponse&quot;, &quot;uniqueid&quot;:&quot;{{uniqueCampaignSurveyID}}&quot;, &quot;responseid&quot;:&quot;{{recordObj.$member_info.Response}}&quot; , &quot;zcrmemail&quot;:&quot;{{encodeURIComponent(recordObj.$member_info.Received_By)}}&quot;}">{{getI18n(\'crm.zsurvey.label.view.response\')}}</span> </template></template> </template><template case="false"> {{getNestedObjValue(recordObj,fieldObj.api_name)}} </template></template></template></template> </template> <template is="yield" yield-name="body-participant-status"> {{unescape(getInvitedEventStatus(recordObj,record))}} </template> <template is="yield" yield-name="body-list-price"> <template is="if" value="{{cruxContains(toString(recordObj.list_price),\'.\')}}"><template case="true"> {{fixedDecimal(recordObj.list_price,1)}} </template><template case="false"> {{recordObj.list_price}} </template></template> </template> <template is="yield" yield-name="body-event-date"> {{getInvitedEventDate(recordObj)}} </template> <template is="yield" yield-name="body-terriority"> {{getTerritorityValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList))}} </template> <template is="yield" yield-name="body-cadences"> <lyte-text class="vaM srRuleName crmLinkColor cP" lt-prop-value="{{getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'name\')}}" onclick="Lyte.registeredMixins[\'crm-related-list-utils\'].OpenSeriesPop(\'{{recordObj.id}}\', \'{{recordObj.End_Date__s}}\')" lt-prop-tooltip-config="{ &quot;position&quot; : &quot;bottom&quot; }"> </lyte-text> </template> <template is="yield" yield-name="body-contact-role"> {{getContactRole(recordObj.Contact_Role,roleValues)}} </template> <template is="yield" yield-name="body-multiselect-lookup"> <template is="if" value="{{expHandlers(moduleInfo.module_name,\'&amp;&amp;\',showLookup(fieldObj.api_name,displayField[moduleInfo.module_name],relatedList))}}"><template case="true"><template is="if" value="{{expHandlers(relatedModule,\'!=\',&quot;Activities&quot;)}}"><template case="true"><template is="if" value="{{isVisitorOnline(moduleInfo.module_name,record.id)}}"><template case="true"> <span id="online-entity-{{recordObj.id}}-lview&quot;+&quot;" class="online-entity vaT"></span> </template></template> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="true" cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{relatedModule}}&quot;, &quot;{{getMultiSelectRecord(recordObj,&quot;id&quot;,relatedList)}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-query-params="{{if(ifEquals(relatedModule,\'Activities\'),concat(\'{&quot;sub_module&quot;:&quot;\',recordObj.Activity_Type,\'&quot;}\'))}}" cx-prop-zcqa="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" cx-prop-id="listView_{{if(recordObj.connectedRecord,recordObj.connectedRecord.id,recordObj.id)}}"></crux-lookup-component> </template><template case="false"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="true" cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{relatedModule}}&quot;, &quot;{{getMultiSelectRecord(recordObj,&quot;id&quot;,relatedList)}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-query-params="{{if(ifEquals(relatedModule,\'Activities\'),concat(\'{&quot;sub_module&quot;:&quot;\',recordObj.Activity_Type,\'&quot;}\'))}}" cx-prop-zcqa="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" cx-prop-id="listView_{{recordObj.id}}"></crux-lookup-component> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.column_name,\'==\',&quot;SEID&quot;)}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{if(fullPageLyteRender,getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'name\'))}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{if(ifEquals(getMultiSelectRecord(recordObj,&quot;$se_module&quot;,relatedList),&quot;Deals&quot;),&quot;Potentials&quot;,getMultiSelectRecord(recordObj,&quot;$se_module&quot;,relatedList))}}&quot;, &quot;{{recordObj[fieldObj.api_name].id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-icon-class="{{concat(getModuleNameForIcon(recordObj.$se_module),\'Small\')}}" onmouseover="{{action(\'showHideRelatedFields\',recordObj,fieldObj)}}" onmouseout="{{action(\'showHideRelatedFields\')}}" cx-prop-show-bc="{{fullPageLyteRender}}" cx-prop-module="{{if(ifEquals(getMultiSelectRecord(recordObj,&quot;$se_module&quot;,relatedList),&quot;Deals&quot;),&quot;Potentials&quot;,getMultiSelectRecord(recordObj,&quot;$se_module&quot;,relatedList))}}" cx-prop-field="{{fieldObj}}" cx-prop-zcqa="{{getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'name\')}}"></crux-lookup-component> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.column_name,\'==\',&quot;CONTACTID&quot;)}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{if(fullPageLyteRender,getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'name\'))}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;Contacts&quot;, &quot;{{getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),&quot;id&quot;)}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" onmouseover="{{action(\'showHideRelatedFields\',recordObj,fieldObj)}}" onmouseout="{{action(\'showHideRelatedFields\')}}" cx-prop-show-bc="{{fullPageLyteRender}}" cx-prop-module="Contacts" cx-prop-field="{{fieldObj}}" cx-prop-zcqa="{{getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'name\')}}"></crux-lookup-component> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.api_name,\'==\',&quot;Appointments_Booking_Form_Name__s&quot;)}}"><template case="true"> <crux-lookup-component cx-prop-zcqa="{{recordObj[fieldObj.api_name].name}}" cx-prop-value="{{recordObj[fieldObj.api_name].name}}" cx-prop-module="CalendarBookings" cx-prop-route-name="crm.settings.section.calendar-booking.view-calendar-booking" cx-prop-query-params="{&quot;module&quot; : &quot;Appointments__s&quot;, &quot;type&quot;: &quot;team&quot;}" cx-prop-dynamic-params="[&quot;{{recordObj[fieldObj.api_name].id}}&quot;]"> </crux-lookup-component> </template><template case="false"><template is="if" value="{{getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'id\')}}"><template case="true"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{if(fullPageLyteRender,getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'name\'))}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{fieldObj.lookup.module.api_name}}&quot;, &quot;{{getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),&quot;id&quot;)}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-icon-class="{{if(ifEquals(fieldObj.api_name,\'What_Id\'),concat(getModuleNameForIcon(recordObj.$se_module),\'Small\'))}}" onmouseover="{{action(\'showHideRelatedFields\',recordObj,fieldObj)}}" onmouseout="{{action(\'showHideRelatedFields\')}}" cx-prop-show-bc="{{fullPageLyteRender}}" cx-prop-module="{{fieldObj.lookup.module.api_name}}" cx-prop-field="{{fieldObj}}" cx-prop-zcqa="{{getValue(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'name\')}}"></crux-lookup-component> </template></template></template></template></template></template></template></template></template></template> </template> <template is="yield" yield-name="body-picklist"> <crux-picklist-component cx-prop-from="view" cx-prop-value="{{recordObj[fieldObj.api_name]}}" cx-prop-field="{{fieldObj}}" cx-prop-is-color-code-enabled="false"> </crux-picklist-component> </template> <template is="yield" yield-name="body-multiselect"> <template is="if" value="{{expHandlers(expHandlers(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;number&quot;)),\'||\',expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;text&quot;),\'&amp;&amp;\',expHandlers(getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList),\'==\',false)))}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;text&quot;),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;multi-picklist&quot;))}}"><template case="true"> {{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}} </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;picklist&quot;)}}"><template case="true"> <crux-picklist-component cx-prop-from="view" cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" cx-prop-field="{{fieldObj}}" cx-prop-is-color-code-enabled="{{fieldObj.enable_colour_code}}"> </crux-picklist-component> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;phone&quot;)}}"><template case="true"> <crux-phone-component cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" cx-prop-field="{{fieldObj}}" cx-prop-call-allowed="{{if(getMultiSelectRecord(recordObj,\'Data_Processing_Basis_Details\',relatedList),getMultiSelectRecord(recordObj,\'Data_Processing_Basis_Details\',relatedList),true)}}" cx-prop-entity-id="{{recordObj.id}}" cx-prop-module="{{relatedModule}}"></crux-phone-component> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;number&quot;),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;picklist&quot;))}}"><template case="true"> <template is="component" component-name="crux-{{fieldObj.cxTypeMapping}}-component" cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" cx-prop-field="{{fieldObj}}" cx-prop-iso-code="{{getMultiSelectRecord(recordObj,\'Currency\',relatedList)}}" cx-prop-exchange-rate="{{if(getMultiSelectRecord(recordObj,\'ExchangeRate\',relatedList),getMultiSelectRecord(recordObj,\'ExchangeRate\',relatedList),getMultiSelectRecord(recordObj,\'Exchange_Rate\',relatedList))}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;allday&quot;)}}"><template case="true"> <template is="if" value="{{recordObj.All_day}}"><template case="true"> <crux-date-component cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}"></crux-date-component> </template><template case="false"> <crux-date-time-component cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}"></crux-date-time-component> </template></template> </template><template case="false"> <template is="component" component-name="crux-{{fieldObj.cxTypeMapping}}-component" cx-prop-value="{{getMultiSelectRecord(recordObj,fieldObj.api_name,relatedList)}}" data-zcqa="{{if(ifEquals(cxTypeMapping,\'lookup\'),cxPropRowZcqa)}}"></template> </template></template></template></template></template></template></template></template></template></template></template></template> </template> <template is="yield" yield-name="body-multi_module_lookup"> <crux-lookup-component class="cxLookupLyteTextRL" cx-prop-tooltip-show="false" cx-prop-value="{{if(fullPageLyteRender,recordObj[fieldObj.api_name],recordObj[fieldObj.api_name].name)}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{getModuleNameByApiName(recordObj[fieldObj.api_name].module.api_name)}}&quot;, &quot;{{recordObj[fieldObj.api_name].id}}&quot;]" onclick="{{action(\'stopPropagation\',event)}}" cx-prop-icon-class="{{if(ifEquals(fieldObj.api_name,\'What_Id\'),concat(getModuleNameForIcon(recordObj.$se_module),\'Small\'))}}" onmouseover="{{action(\'showHideRelatedFields\',recordObj,fieldObj)}}" onmouseout="{{action(\'showHideRelatedFields\')}}" cx-prop-show-bc="{{fullPageLyteRender}}" cx-prop-module="{{recordObj[fieldObj.api_name].module.api_name}}" cx-prop-field="{{fieldObj}}" cx-prop-zcqa="{{recordObj[fieldObj.api_name].name}}"></crux-lookup-component> </template> <template is="yield" yield-name="body-crm_tags"> {{unescape(getFormattedValue(fieldObj,fieldObj.api_name,relatedModule,recordObj,true,null,true,true))}} </template> <template is="yield" yield-name="header-prefix-1" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{expHandlers(relatedList.personality_name,\'===\',&quot;SERIESPERSONALITY&quot;)}}"><template case="true"> <lyte-checkbox data-zcqa="allChkBox" lt-prop-class="{{if(pageSelectedRecords(seriesRecordIds,tableData,seriesRecordIds.length,relatedList),\'customCheckBoxChecked\',\'customCheckBox\')}}" lt-prop-type="default" class="pR mL10" lt-prop-disabled="{{ltpropDisableAdded(recordObj)}}" on-changed="{{method(&quot;onCadencesCheckBoxChanged&quot;,recordObj,&quot;page&quot;)}}" lt-prop-id="{{recordObj.id}}" id="seriesChkbox_{{recordObj.id}}"></lyte-checkbox> </template></template> </template> <template is="yield" yield-name="header-prefix-2" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{expHandlers(expHandlers(isClientAccount,\'!\'),\'||\',expHandlers(expHandlers(isClientAccount,\'&amp;&amp;\',expHandlers(module,\'===\',&quot;Campaigns&quot;)),\'&amp;&amp;\',expHandlers(expHandlers(relatedList.api_name,\'===\',&quot;Leads&quot;),\'||\',expHandlers(relatedList.api_name,\'===\',&quot;Contacts&quot;))))}}"><template case="true"> <lyte-checkbox id="selectCheckbox" data-zcqa="relatedList_selectAllEntity" lt-prop-id="selectAllEntity" lt-prop-class="{{if(pageSelectedRecords(selectedIds,tableData,selectedIds.length),\'customCheckBoxChecked\',\'customCheckBox\')}}" on-changed="{{method(&quot;onPageCheckBoxChanged&quot;)}}"></lyte-checkbox> </template></template> </template> <template is="yield" yield-name="body-prefix-1" cx-prop-style="width:18px" data-zcqa="dummy" class="RelatedlistFirstTdChild"> <div class="dF pR"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(relatedList.api_name,\'!=\',\'Lead_Source_History\'),\'&amp;&amp;\',expHandlers(relatedList.api_name,\'!=\',\'Attachments\')),\'&amp;&amp;\',expHandlers(relatedList.api_name,\'!=\',\'Stage_History\')),\'&amp;&amp;\',expHandlers(relatedList.personality_name,\'!==\',&quot;SERIESPERSONALITY&quot;)),\'&amp;&amp;\',expHandlers(isConnectedRecordChildRl,\'!\'))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(module,\'!=\',&quot;Visits&quot;),\'&amp;&amp;\',isRecordApproved(recordObj,relatedList)),\'||\',expHandlers(relatedList.api_name,\'===\',\'Contact_Roles\'))}}"><template case="true"> <div id="icons_{{recordObj.id}}" class="vH dIB pR h18 w60"> <crm-edit-delete-icons parent-rec-approved="{{parentRecApproved}}" record="{{recordObj}}" module="{{relatedModule}}" from-module="{{module}}" cvid="{{moduleInfo.cvid}}" from-record="{{record}}" related-list="{{relatedList}}"> </crm-edit-delete-icons></div> </template><template case="false"><template is="if" value="{{expHandlers(relatedList.api_name,\'!==\',&quot;Actions_Performed&quot;)}}"><template case="true"> <span class="zcicncss-lock zcicn-cssIcons zcicn_black_mask zi2 mT1" lt-prop-title="{{getI18n(\'crm.approvalProcess.label.waitingForApproval\')}}" alt="{{getI18n(\'crm.approvalProcess.label.waitingForApproval\')}}"></span> </template></template></template></template> </template></template> <template is="if" value="{{expHandlers(relatedList.personality_name,\'===\',&quot;SERIESPERSONALITY&quot;)}}"><template case="true"> <lyte-checkbox data-zcqa="srChkBoxRl_{{getValue(getMultiSelectRecord(recordObj,\'Cadencesid__s\',relatedList),\'name\')}}" lt-prop-class="{{if(expHandlers(ltpropDisableAdded(recordObj),\'!\'),if(contains(seriesRecordIds,recordObj.Cadencesid__s.id,seriesRecordIds.length),\'customCheckBoxChecked\',\'customCheckBox\'),\'\')}}" lt-prop-type="default" class="pR mL10" lt-prop-disabled="{{ltpropDisableAdded(recordObj)}}" on-changed="{{method(&quot;onCadencesCheckBoxChanged&quot;,recordObj,&quot;singleRec&quot;)}}" lt-prop-id="{{recordObj.id}}" id="seriesChkbox_{{recordObj.id}}"></lyte-checkbox> </template></template> </div> </template> <template is="yield" yield-name="body-prefix-2" cx-prop-style="width:18px" data-zcqa="dummy"> <lyte-checkbox data-id="selectEntity" id="selectEntity_{{recordObj.id}}" lt-prop-class="{{if(contains(selectedIds,recordObj.id,selectedIds.length),\'customCheckBoxChecked\',\'customCheckBox\')}}" data-zcqa="selectEntity" on-changed="{{method(&quot;onRecordCheckBoxChanged&quot;)}}" onclick="{{action(&quot;stopPropagation&quot;,event)}}" lt-prop-id="{{recordObj.id}}" data-recnum="{{recordObj.recnum}}"></lyte-checkbox> </template> </crux-table-component> <template is="if" value="{{showCountDiv}}"><template case="true"> <span class="pL20 pT0 dIB boxBB crmBaseColor mB15">{{getI18n(\'crm.label.totalcount\')}} : {{showCountValue}}</span> </template></template> <template is="if" value="{{showNavig}}"><template case="true"> <div class="rl_navigator"> <lyte-navigator lt-prop-yield="true" class="mlAuto fR" on-next="{{method(\'navigNext\')}}" on-previous="{{method(\'navigPrevious\')}}" lt-prop-value="{{startIndex}}" lt-prop-records="{{relatedListData.length}}" lt-prop-perpage="{{relatedListCountPerPage}}"> <template is="registerYield" yield-name="navigatorYield"> <div class="lyteSingleBack lyteIconSingleBack" data-zcqa="{{relatedList.id}}_rellist_navig_prev"></div> <div class="lyteNavigatorMidPoint"> {{startRecord}} <span class="lyteNavigatorText">-</span> {{endRecord}} </div> <div class="lyteSingleFront lyteIconSingleFront" data-zcqa="{{relatedList.id}}_rellist_navig_next"></div> </template> </lyte-navigator> </div> </template></template></template></template> </template></template></template></template></template></template> </div> </lyte-event-listener></template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,3]},{type:"componentDynamic",position:[1,3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,2]},{type:"if",position:[1,1,1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,0],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,0]},{type:"text",position:[3,1,2]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"text",position:[3,0,0]},{type:"text",position:[3,2]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,3,5]},{type:"if",position:[1,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3,7]},{type:"if",position:[1,3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,9]},{type:"switch",position:[1,3,9],cases:{Contact_Roles:{dynamicNodes:[]},Attachments:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[7]}]},Related_List:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3,11]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,3,0,0]},{type:"text",position:[1,3,2]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,7]},{type:"text",position:[1,7,0]},{type:"componentDynamic",position:[1,7]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[5]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"text",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,0]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,0]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[2]},{type:"componentDynamic",position:[2]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]},{type:"registerYield",position:[1,5],dynamicNodes:[{type:"text",position:[1]}]},{type:"registerYield",position:[1,7],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,9],dynamicNodes:[{type:"text",position:[1]}]},{type:"registerYield",position:[1,11],dynamicNodes:[{type:"text",position:[1]}]},{type:"registerYield",position:[1,13],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,15],dynamicNodes:[{type:"text",position:[1]}]},{type:"registerYield",position:[1,17],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[2]},{type:"componentDynamic",position:[2]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"registerYield",position:[1,19],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,21],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"registerYield",position:[1,23],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,25],dynamicNodes:[{type:"text",position:[1]}]},{type:"registerYield",position:[1,27],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,29],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,31],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,33],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[3,1]},{type:"text",position:[3,5]},{type:"attr",position:[5]}]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}],_observedAttributes:["showLoading","showNoRecords","module","moduleInfo","recordGet","record","entityId","relatedListId","relatedList","relatedModule","fieldUiType","relatedListFields","relatedListData","relatedModuleFields","fieldMapping","routeMapping","fromCanvas","displayField","customfields","uiTypeLookup","showNavig","startIndex","moreRecords","pageNo","tableData","attachLinkMenuOpen","selectedIds","customButtons","editCustomRelList","prefixYields","isClientAccount","mxnFieldRecordId","campaignFilter","showCountDiv","showCountValue","layoutId","pageRequested","portalName","roleValues","relatedListCount","inaccessible","showActions","playingMp3","eventsFlag","isSandBox","isWDEnabled","showTableLoading","uniqueCampaignSurveyID","relatedListCountPerPage","canvas","viewName","leftRelId","isChrono","parent_relation_name","isNavig","isCountApiEnabled","relatedListCountPerPage","rlcount","relatedListLabel","parentRecApproved","parentRecNotInReview","campaignRelatedListClass","seriesRecordIds","isAccessibilityConfigSupported","isInitialLoadinCanvas","fullPageLyteRender","fromDetailLyte","showHideLoading","disableHierachyBtn","isConnectedRecordChildRl"],data:function(){return{showLoading:Lyte.attr("boolean",{default:!0}),showNoRecords:Lyte.attr("boolean",{default:!0}),module:Lyte.attr("string"),moduleInfo:Lyte.attr("object"),recordGet:Lyte.attr("boolean",{default:!1}),record:Lyte.attr("object",{hideAttr:!0}),entityId:Lyte.attr("string"),relatedListId:Lyte.attr("string"),relatedList:Lyte.attr("object",{hideAttr:!0}),relatedModule:Lyte.attr("string"),fieldUiType:Lyte.attr("object"),relatedListFields:Lyte.attr("array"),relatedListData:Lyte.attr("array",{default:[]}),relatedModuleFields:Lyte.attr("array"),fieldMapping:Lyte.attr("object"),routeMapping:Lyte.attr("object"),fromCanvas:Lyte.attr("boolean",{default:!1}),displayField:Lyte.attr("object",{default:crmConstants.moduleDisplayField}),customfields:Lyte.attr("array"),uiTypeLookup:Lyte.attr("object",{default:{4:!0,5:!0,6:!0,7:!0,9:!0,10:!0,12:!0,13:!0,15:!0,16:!0,42:!0,43:!0,44:!0,62:!0,133:!0,444:!0,135:!0}}),showNavig:Lyte.attr("boolean",{default:!1}),startIndex:Lyte.attr("number",{default:0}),moreRecords:Lyte.attr("boolean",{default:!0}),pageNo:Lyte.attr("number",{default:1}),tableData:Lyte.attr("array",{default:[]}),attachLinkMenuOpen:Lyte.attr("boolean",{default:!1}),selectedIds:Lyte.attr("array",{default:[]}),customButtons:Lyte.attr("array",{default:[]}),editCustomRelList:Lyte.attr("boolean",{default:!1}),prefixYields:Lyte.attr("array",{default:[]}),isClientAccount:Lyte.attr("boolean"),mxnFieldRecordId:Lyte.attr("string"),campaignFilter:Lyte.attr("boolean",{default:!1}),showCountDiv:Lyte.attr("boolean",{default:!1}),showCountValue:Lyte.attr("number"),layoutId:Lyte.attr("string"),pageRequested:Lyte.attr("array",{default:[]}),portalName:Lyte.attr("string",{default:"All Portals"}),roleValues:Lyte.attr("array",{default:[]}),relatedListCount:Lyte.attr("string"),inaccessible:Lyte.attr("boolean"),showActions:Lyte.attr("boolean",{default:!0}),playingMp3:Lyte.attr("string"),eventsFlag:Lyte.attr("boolean",{default:!0}),isSandBox:Lyte.attr("boolean",{default:Crm.userDetails.isSandbox}),isWDEnabled:Lyte.attr("boolean",{default:Crm.userDetails.isWorkdriveConfigured}),showTableLoading:Lyte.attr("boolean",{default:!1}),uniqueCampaignSurveyID:Lyte.attr("string",{default:"undefined"!=typeof returnJson&&returnJson.Campaigns?returnJson.Campaigns.surveyUniqueId:""}),relatedListCountPerPage:Lyte.attr("string",{default:"10"}),canvas:Lyte.attr("boolean",{default:!0}),viewName:Lyte.attr("string"),leftRelId:Lyte.attr("string"),isChrono:Lyte.attr("boolean",{default:!1}),parent_relation_name:Lyte.attr("string"),isNavig:Lyte.attr("boolean",{default:!1}),isCountApiEnabled:Lyte.attr("boolean",{default:Crm.userDetails.isDVLyteRLCountQueryEnabled}),relatedListCountPerPage:Lyte.attr("string",{default:"10"}),rlcount:Lyte.attr("string"),relatedListLabel:Lyte.attr("string"),parentRecApproved:Lyte.attr("boolean",{default:!1}),parentRecNotInReview:Lyte.attr("boolean",{default:!0}),campaignRelatedListClass:Lyte.attr("string",{default:""}),seriesRecordIds:Lyte.attr("array",{default:[]}),isAccessibilityConfigSupported:Lyte.attr("boolean",{default:Crm.userDetails.isAccessibilityConfigSupported&&!featuresAvailable.NEXTGENUI_ENABLED}),isInitialLoadinCanvas:Lyte.attr("object",{default:{}}),fullPageLyteRender:Lyte.attr("boolean",{default:!1}),fromDetailLyte:Lyte.attr("boolean",{default:Crm.userDetails.isRelatedListLyteEnabled}),showHideLoading:Lyte.attr("boolean",{default:!0}),disableHierachyBtn:Lyte.attr("boolean",{default:!1}),isConnectedRecordChildRl:Lyte.attr("boolean",{default:!1})}},didConnect:function(){this.$node.refreshChildRL=function(){this.getAllChildRecords()}.bind(this),this.$node.saveChildColumnList=function(e){this.saveColumnList(e)}.bind(this)},setCampaignSurveyUniqueId:function(){var e=this;if("Campaigns"===e.getData("module"))if("Zoho Survey"===(e.getData("record").$layout_id.name||"")&&Crm.renderDVLyteFlow(e.getData("module"))){var t=(e.getData("record").Native__Survey__Extn__Survey_URL||"").split("?")[0].split("/").slice(-1)[0]||"";e.setData("uniqueCampaignSurveyID",t)}else e.setData("uniqueCampaignSurveyID",returnJson&&returnJson.Campaigns&&returnJson.Campaigns.surveyUniqueId||"")}.on("init"),eventsFlag:!0,innerDetailParam:"fields.ui_type,fields.lookup,fields.formula,fields.rollup_summary,fields.field_label,fields.pick_list_values,fields.separator,fields.decimal_place",observeLayoutId:function(){this.populateRelatedRecordsNeededData()}.observes("layoutId").on("init"),populateRelatedRecordsNeededData:function(){this.setData("textAreaProperties",{lineClamp:3}),this.data.relatedList||this.setData("relatedList",store.peekRecord("related_list",this.getData("relatedListId"))),Crm.renderDVLyteFlow(this.data.module)&&this.setData("fullPageLyteRender",!0),this.setData("pageRequested",[]),this.validateRelatedListCountPerPage(),this.setData("showLoading",!0),clientPortalName?this.setData("isClientAccount",!0):this.setData("isClientAccount",!1);var e=Object.assign({},crmConstants.defaultUiTypeToCruxMapping);Object.assign(e,{20:"user",127:"lookup"}),this.setData("fieldUiType",e);var t=this.getData("relatedList").api_name;if(this.setData("relatedListId",this.getData("relatedList.id")),this.getData("relatedList").module?"multiselectlookup"==this.getData("relatedList").type&&this.getData("relatedList").connectedmodule?this.setData("relatedModule",this.getData("relatedList").connectedmodule):this.setData("relatedModule",idModuleMapping[this.getData("relatedList").module.id]?idModuleMapping[this.getData("relatedList").module.id]:this.getData("relatedList").module.api_name):"Stage_History"==t&&this.setData("relatedModule","Dealhistory"),"Deals"==this.data.relatedModule&&this.setData("relatedModule","Potentials"),"Attachments"==this.data.relatedModule){var a=moduleRecordMapping[this.getData("module")].access_type;this.setData("showActions","team_based"===a?Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Create_Attachments_"+this.data.module):Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Create_Attachments"))}Lyte.Router.getRouteInstance&&"canvas"===Lyte.Router.getRouteInstance().routeName&&this.setData("showActions",!1);var i=this;"Lead_Source_History"===this.getData("relatedList").api_name||"Visits_Zoho_Livedesk"===this.getData("relatedList").api_name||"Attachments"===this.getData("relatedList").api_name||"Stage_History"===this.getData("relatedList").api_name||"Invited_Events"===this.getData("relatedList").api_name||this.getData("relatedList").personality_name&&this.getData("relatedList").personality_name.startsWith("HISTORYPERSONALITY")||Lyte.arrayUtils(this.getData("prefixYields"),"push",{fixed:"enable",class:"editDeleteIcons"}),this.getData("relatedList").personality_name&&this.getData("relatedList").personality_name.startsWith("HISTORYPERSONALITY")&&(this.innerDetailParam=this.innerDetailParam+",fields.refer_from_field"),this.setData("moduleInfo",moduleRecordMapping[i.data.relatedModule]?store.peekRecord("module",moduleRecordMapping[i.data.relatedModule].id):void 0);var o=this.getData("record");if(o&&"detail"===Lyte.Router.getRouteInstance().routeName&&"multiselectlookup"===this.getData("relatedList.type")&&!this.getData("isChrono")?((o.$review&&"Approved"!==o.$review||!("approved"===o.$approval_state||"review_process_pending"===o.$approval_state||"review_process_rejected"===o.$approval_state||"merge_pending"===o.$approval_state||o.$approval&&o.$approval.resubmit))&&o.$approval||this.setData("parentRecApproved",!0),o.$review&&"Approved"!==o.$review&&this.setData("parentRecNotInReview",!1)):o&&this.setData({parentRecApproved:!0,parentRecNotInReview:!o.$review||"Approved"===o.$review}),store.peekRecord("related_list",i.data.relatedList.id)[this.data.layoutId]&&store.peekRecord("related_list",i.data.relatedList.id)[this.data.layoutId].fields&&store.peekRecord("related_list",i.data.relatedList.id)[this.data.layoutId].fields.length>0){var s=store.peekRecord("related_list",i.data.relatedList.id),l=s[this.data.layoutId];i.setData("relatedList",s),i.setData("relatedListFields",l.fields),i.sorted=!1,l.sort_by&&(i.sorted=!0,i.setData("sort_by",l.sort_by.api_name),i.setData("sort_order",l.sort_order)),i.sorted||"Calls_History"!==i.data.relatedList.api_name&&"Calls"!==i.data.relatedList.api_name?i.sorted||"Tasks"!==i.data.relatedList.api_name?i.sorted||"Tasks_History"!==i.data.relatedList.api_name?i.sorted||"Events_History"!==i.data.relatedList.api_name&&"Events"!==i.data.relatedList.api_name||(i.sorted=!0,i.setData("sort_by","Start_DateTime"),i.setData("sort_order","Events"===i.data.relatedList.api_name?"asc":"desc")):(i.sorted=!0,i.setData("sort_by","Closed_Time"),i.setData("sort_order","desc")):(i.sorted=!0,i.setData("sort_by","Due_Date"),i.setData("sort_order","asc")):(i.sorted=!0,i.setData("sort_by","Call_Start_Time"),i.setData("sort_order","Calls"===i.data.relatedList.api_name?"asc":"desc")),i.constructFields(),i.setData("recordGet",!0),i.fireRequest(i)}else if(i.getData("relatedList.nodata")&&"detail"===Lyte.Router.getRouteInstance().routeName){var r=store.peekRecord("related_list",i.data.relatedList.id)[this.data.layoutId];r&&r.nodata&&(r.nodata=!1),i.setData({"relatedList.nodata":!1,showLoading:!1,showNoRecords:!0}),"TabView"===i.data.viewName&&i.listenerForTabViewNoDataAvailable(),Crm.userDetails.isRelatedListLyteEnabled&&i.$lg&&i.$lg.relatedList&&i.$lg.relatedList.scrollAfterLoad===i.data.relatedListId&&setTimeout((function(){i.$lg.relatedList.scrollAfterLoad===i.data.relatedListId&&(i.data.fullPageLyteRender?i.smoothScrollToSpecificRL(i.data.relatedListId):detailView.scrollToRelatedList(i.$lg.relatedList.scrollAfterLoad),i.$lg.relatedList.scrollAfterLoad="")}),1e3)}else i.getRelatedListMeta();"Contact_Roles"==this.data.relatedList.api_name&&app.store.makeRequest("findAll","field",{module:"DealContactRole"}).then((function(e){i.data&&i.setData("roleValues",e.filter((function(e){return"Role"==e.api_name}))[0].pick_list_values)})),Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-custom-button.js"],ResourceConstants.CRMClient)).then(function(){const e=Lyte.registeredMixins["crm-custom-button-mixin"];"Competitors"!==t&&"Stage_History"!==t&&e.checkCustomButtonSupportedForModule(this.getData("module"))&&app.store.makeRequest("findAll","custom_button",{module:moduleRecordMapping[this.getData("module")].api_name,fields:"id,name,description,profiles,layouts,action,sequence_number,position,user_types,details"},!0,void 0,{isV6Api:!0}).then((function(t){i.data&&(t=e.filterButtonData(t,{position:e.custom_button_position.RELATED_LIST,moduleName:i.getData("module"),relatedListApiName:i.getData("relatedList").api_name,layoutId:i.getData("layoutId")}),i.setData("customButtons",t),(i.getData("customButtons")&&i.getData("customButtons").length>0||"Campaigns"===i.data.module&&("Leads"===i.data.relatedList.api_name||"Contacts"===i.data.relatedList.api_name))&&Lyte.arrayUtils(i.getData("prefixYields"),"push",{fixed:"enable",width:"10px",class:"checkBoxBody"}))}))}.bind(this)),moduleRecordMapping[this.getData("relatedModule")]&&featuresAvailable.Related_List_Customization&&Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM&&!crmTab.isZBCustomModule(moduleRecordMapping[this.getData("relatedModule")].module_name)&&!crmTab.isZECustomModule(moduleRecordMapping[this.getData("relatedModule")].module_name)&&!crmTab.isZSCustomModule(moduleRecordMapping[this.getData("relatedModule")].module_name)?this.setData("showColumnList",!0):this.setData("showColumnList",!1),this.refreshId="#fetch_"+this.data.relatedList.id},recordObserve:function(){this.data.recordGet&&!this.requestFired&&"canvas"===Lyte.Router.getRouteInstance().routeName&&(this.resetDetails(),this.fireRequest(this))}.observes("record").on("didConnect"),resetDetails:function(){this.setData("pageNo",1),this.setData("relatedListData",[]),this.setData("startIndex",0),this.setData("pageRequested",[]),this.setData("showCountDiv",!1),this.setData("campaignFilter",!1),document.querySelectorAll(this.refreshId).forEach((function(e){e.classList.remove("eventNone")})),this.campaignFilter=void 0,Crm.userDetails.isRelatedListLyteEnabled&&(this.$lg.relatedList.filters=!1)},fireRequest:function(e,t,a,i){if(e.getData("record")&&e.getData("record").id){var o;o=e.sorted&&"unsort"!=e.getData("sort_order")?{relatedId:e.getData("record").id,relationId:e.getData("relatedList").id,per_page:parseInt(e.getData("relatedListCountPerPage"))+1,page:e.getData("pageNo"),sort_order:e.getData("sort_order"),sort_by:e.getData("sort_by")}:{relatedId:e.getData("record").id,relationId:e.getData("relatedList").id,per_page:parseInt(e.getData("relatedListCountPerPage"))+1,page:e.getData("pageNo")};var s=e.getData("availableInfo");s&&s.next_page_token&&(o.token=s.next_page_token),o.approved="both",o.approval_state="approved,approval_process_pending,approval_process_rejected",o.home_converted_currency=!0,o.formatted_currency=!0,this.deleteRLCount(),this.setData("attachLinkMenuOpen",!1);var l={};if(e.campaignFilter&&(o.filters=this.campaignFilter,a=!0),"Visits"==e.data.relatedModule&&"All Portals"!=e.data.portalName&&(o.filters={},o.filters.field={},o.filters.field.api_name="Portal_Name",o.filters.comparator="equal",o.filters.value=e.data.portalName),"Stage_History"==e.data.relatedList.api_name&&(o.sort_by="Modified_Time"),this.data.customfields&&"multiselectlookup"==this.data.relatedList.type){o.sort_by&&o.sort_order||(o.sort_by="id",o.sort_order="desc"),o.fields=this.data.relatedListFields.map((e=>e.api_name)).join(","),o.fields+=",id";var r=store.peekRecord("field",this.data.relatedList.mxnfield),n=r&&r.multiselectlookup&&r.multiselectlookup.connectedlookup_apiname?r.multiselectlookup.connectedlookup_apiname:"";e.setData("mxnFieldRecordId",n),n&&(o.fields+=","+n,o.fields+=","+n+".$approval,"+n+".$approval_state,"+n+".$approved,"+n+".$review_process,"+n+".$review,"+n+".$stop_processing,"+n+".$locked_for_me,"+n+".$editable")}e.requestFired=!0;var d="Visits"==e.data.relatedModule?"Visits":moduleApiMapping[e.getData("module")]?moduleApiMapping[e.getData("module")]:e.getData("module"),p=e.getData("isChrono")?"v5":"v2.2";["Tasks","Calls","Events","Appointments"].indexOf(this.data.relatedList.module.api_name)>-1&&(p="v3");var c="crm/"+p+"/"+d+"/bulk";l.method="POST","Competitors"===e.getData("relatedList").api_name?(c=(c=c.replace("bulk",""))+o.relatedId+"/Competitors",l.method="GET",delete o.relationId,delete o.relatedId):"picklist_tracker"===e.getData("relatedList").api_name&&(c=(c=c.replace("bulk",""))+o.relatedId+"/"+e.getData("relatedList").api_name,l.method="GET",delete o.relationId,delete o.relatedId),l.url=c,e.getData("showHideLoading")&&commonUtils.showHideLoadingDiv(!0),app.store.makeRequest("findAll","dummy",o,void 0,!1,l).then((function(o){if(Crm.userDetails.isRelatedListLyteEnabled){e.setData("disableHierachyBtn",!1);var s=$L("crm-detail-view-common")[0];s&&s.component&&s.component.setData("sortInprogress",!1)}if(e.data){if(e.requestFired=!1,e.setData("showTableLoading",!1),e.setData("availableInfo",o.info),Lyte.arrayUtils(e.data.pageRequested,"push",e.getData("pageNo")),o="Competitors"===e.getData("relatedList").api_name?o.data:o.dummy.data,a&&1==e.getData("pageNo")&&(null==o||0==o.length?(e.setData("relatedListData",[]),e.setData("tableData",[]),e.setData("showCountDiv",!1)):e.setData("showCountDiv",!0)),!Crm.renderDVLyteFlow(e.getData("module"))){let t={};t.count=o?o.length:0,t.page=e.getData("pageNo"),t.more_records=!(1===e.getData("pageNo")&&o&&o.length<=10),t.id=e.data.relatedList.id,Lyte.triggerEvent("relatedListCountDetail",t)}if(e.getData("isChrono")&&"TabView"===e.data.viewName&&o&&o.length&&Crm.userDetails.isRelatedListLyteEnabled){var l={data:[]},r={data:[]},n={},d={};d.module=e.getData("relatedModule"),d.module="Appointments__s"===d.module?"Appointments":d.module,d.zcqa="customize_"+d.module,d.personality=e.getData("relatedList.personality_name"),d.label="Events"===e.getData("relatedModule")?"Meetings":d.module,d.parentid=e.getData("relatedList.id"),d.relatedList=e.getData("relatedList"),-1===e.getData("relatedList.personality_name").indexOf("HISTORY")?(l.parentid="Activities",n[d.module]=d):(r.parentid="Activities_History",n[d.module+"_History"]=d),Lyte.Component.registeredHelpers.constructCustomizePopup(l,r,n)}if(null==o||0==o.length){if(e.setData("showLoading",!1),!0===e.getData("fromCanvas")&&Crm.userDetails.isRLCountSupportedForCanvas){var p=e.getData("isInitialLoadinCanvas"),c=e.getData("relatedList").id;p[c]=void 0!==p[c]&&p[c],e.setData("isInitialLoadinCanvas",p)}null==t?(a||e.setData("showNoRecords",!0),e.getData("isChrono")||"TabView"===e.data.viewName?populateRLCount&&!e.data.canvas&&e.data.viewName&&"TabView"===e.data.viewName&&e.listenerForTabViewNoDataAvailable():(Lyte.triggerEvent("relatedListCount",{id:e.data.relatedList.id,api_name:e.data.relatedList.api_name,count:0,format:"table",more_records:!1,page:1,module:e.data.relatedModule,rlcount:e.data.rlcount}),populateRLCount&&!Crm.userDetails.isRelatedListLyteEnabled&&populateRLCount(e.data.relatedList.id))):e.setRelatedListData(!0,!0)}else if("multiselectlookup"!=e.getData("relatedList").type){e.setData("showLoading",!1),e.setData("showNoRecords",!1),null==t&&e.setData("showNavig",o.length>e.getData("relatedListCountPerPage"));var m=o.length;if("Attachments"==e.getData("relatedList").api_name){e.idVsURL={};for(var u=0;u<m;u++){"Document"==o[u].$type&&o[u].$docs_file_size&&(o[u].Size=o[u].$docs_file_size);var y=o[u].Size/1024;y>1e3?(y/=1024,y=parseFloat(y).toFixed(2)+" "+I18n.getMsg("MB")):y=0!=y?parseFloat(y).toFixed(2)+" "+I18n.getMsg("KB"):"-",o[u].Size=y,"Link URL"==o[u].$type&&(o[u].extn="link")}}if("picklist_tracker"==e.getData("relatedList").action){var f=e.data.moduleInfo.parent_module.fields.filter((function(e){return e.history_tracking&&"picklist"===e.data_type}));let t=e.data.relatedList.fields.filter((function(e){return!!e.refer_from_field&&e.refer_from_field.refer_from_field}));f=f.length?f[0]:void 0;for(u=0;u<m;u++)!f||void 0!==o[u][f.api_name]&&null!==o[u][f.api_name]||(o[u][f.api_name]=I18n.getMsg("crm.picklist.tracker.noneValue")),void 0!==o[u].Moved_To__s&&null!==o[u].Moved_To__s||0===u||(o[u].Moved_To__s=I18n.getMsg("crm.picklist.tracker.noneValue")),t&&t.length&&t.forEach((function(e){!e.refer_from_field||!e.refer_from_field.refer_from_field||e.refer_from_field.refer_from_field.api_name!==f.api_name||void 0!==o[u][e.api_name]&&null!==o[u][e.api_name]||0===u&&"Moved_To__s"===e.api_name||(o[u][e.api_name]=I18n.getMsg("crm.picklist.tracker.noneValue"))}))}e.pushRecordToModule(o)}else{e.setData("showLoading",!1),(m=o.length)&&e.setData("showNoRecords",!1),null==t&&e.setData("showNavig",o.length>e.getData("relatedListCountPerPage"));var g=[];if(!e.data.relatedList.mxnfield){var h=store.peekAll("field").filterBy({data_type:"multiselectlookup"}).filter((function(t){return t.multiselectlookup.api_name===e.data.relatedList.api_name}))[0];e.data.relatedList.mxnfield=h.id}for(u=0;u<m;u++)g.push(o[u][store.peekRecord("field",e.data.relatedList.mxnfield).multiselectlookup.connectedlookup_apiname].id);e.pushRecordToModule(o)}i&&e.refreshHeader(),Crm.userDetails.isRelatedListLyteEnabled&&e.$lg&&e.$lg.relatedList&&e.$lg.relatedList.scrollAfterLoad===e.data.relatedListId&&setTimeout((function(){e.$lg.relatedList.scrollAfterLoad===e.data.relatedListId&&(e.data.fullPageLyteRender?e.smoothScrollToSpecificRL(e.data.relatedListId):detailView.scrollToRelatedList(e.$lg.relatedList.scrollAfterLoad),e.$lg.relatedList.scrollAfterLoad="")}),500)}}),(function(t){var a=JSON.parse(t.responseText);if(-1!=a.message.indexOf("converted"))renderingUtils.showCustomAlert(I18n.getMsg("crm.convert.lead.converted.error.popup"),I18n.getMsg("crm.convert.lead.converted.heading"),!1,(function(){crmHistory.refreshCurrentPage()}),void 0,I18n.getMsg("workflow.webHook.RefreshURLPreview"));else{var i=Lyte.Router.getRouteInstance();if(Crm.userDetails.isRelatedListLyteEnabled){if("detail"===i.routeName&&"INVITEDEVENTSPERSONALITY"===e.getData("relatedList.personality_name"))return e.setData({showNoRecords:!0,showLoading:!1}),void Lyte.triggerEvent("relatedListCount",{id:e.data.relatedList.id,count:0,more_records:!1,module:e.data.relatedModule,page:1});if(400===t.status&&"the related id given seems to be invalid"===a.message){var o=-1;e.data.tableData&&e.data.tableData.length&&(e.data.tableData.forEach((function(t,a){t.id===e.data.entityId&&(o=a)})),e.data.fullPageLyteRender&&-1!==o?e.renderPermissionDenied(e.data.entityId,e.data.module):(Lyte.arrayUtils(e.data.tableData,"removeAt",o,1),e.data.tableData.length||e.setData({showLoading:!1,showNoRecords:!0}),Lyte.triggerEvent("relatedListCount",{id:e.data.relatedList.id,count:e.data.tableData.length,more_records:e.getData("relatedListData").length>e.getData("relatedListCountPerPage")*e.data.pageNo,module:e.data.relatedModule,page:e.data.pageNo})))}else e.permissionDenyMsg(e)}else"detail"==i.routeName?renderingUtils.displayPermissionDenied(void 0,(function(){var e=$L("lyte-alert","crux-permission-denied-alert");e&&e[0].setMethods({onAccept:function(){i.refresh()}})})):e.permissionDenyMsg(e)}})),commonUtils.showHideLoadingDiv(!1)}else e.setData("showLoading",!1),e.setData("showNoRecords",!0)},deleteRLCount:function(){let e=this.getData("rlIdVsCount");this.getData("isCountApiEnabled")&&e&&Object.values(e).length&&Lyte.objectUtils(e,"delete",this.getData("relatedListId"))},validateRelatedListCountPerPage:function(){var e=this.getData("relatedListCountPerPage");"undefined"!==e&&void 0!==e||this.setData("relatedListCountPerPage","10")},permissionDenyMsg:function(e){e.setData("showLoading",!1),e.setData("showNoRecords",!1),e.setData("inaccessible",!0);var t=e.getData("relatedListId"),a=store.peekRecord("related_list",t).actions;$("#fetch_"+t).remove(),$("#customizeList"+t).remove(),$("#RL_dataCount_"+t).remove(),a.forEach((function(e){var a=$L(document.querySelectorAll("#zcDetail_"+e.label+"_"+t));if(a)for(var i=a.length,o=0;o<i;o++)a[o].component.setData("ltPropDisabled",!0)}));var i=$L("#id_"+t);i[0]&&i[0].component&&i[0].remove()},didDestroy:function(){null!==document.getElementById("attachmentpreview")&&$L("crm-image-preview#attachmentpreview")[0].remove();null!==document.getElementById("zd-file-preview")&&(new WorkDrive).hideResourcePreview();Lyte.objectUtils(this.getData("relatedList"),"delete","nodata")},actions:{viewResponse:function(e){ZSurvey.viewResponse(e)},stopPropagation:function(e){e.stopPropagation(),e.cancelBubble=!0},showColumnList:function(){var e=this;commonUtils.showHideLoadingDiv(!0),"multiselectlookup"==this.data.relatedList.type&&moduleRecordMapping[this.data.relatedList.linkingmodule]&&moduleRecordMapping[this.data.relatedList.linkingmodule].visibility%2!=0?moduleRecordMapping[this.getData("relatedModule")].fields&&moduleRecordMapping[this.getData("relatedModule")].fields.legnth&&moduleRecordMapping[this.data.relatedList.linkingmodule].fields&&moduleRecordMapping[this.data.relatedList.linkingmodule].fields.length?this.openColumnList():moduleRecordMapping[this.getData("relatedModule")].fields&&moduleRecordMapping[this.getData("relatedModule")].fields.legnth?store.findRecord("module",moduleRecordMapping[this.data.relatedList.linkingmodule].id).then((function(){e.openColumnList()})):moduleRecordMapping[this.data.relatedList.linkingmodule].fields&&moduleRecordMapping[this.data.relatedList.linkingmodule].fields.legnth?store.findRecord("module",moduleRecordMapping[this.getData("relatedModule")].id).then((function(){e.openColumnList()})):Lyte.resolvePromises([store.findRecord("module",moduleRecordMapping[this.getData("relatedModule")].id),store.findRecord("module",moduleRecordMapping[this.data.relatedList.linkingmodule].id)]).then((function(){e.openColumnList()})):store.peekRecord("module",moduleRecordMapping[this.getData("relatedModule")].id).fields&&0!==store.peekRecord("module",moduleRecordMapping[this.getData("relatedModule")].id).fields.length&&!this.data.fetchFieldsForColumnList?"Events"===store.peekRecord("module",moduleRecordMapping[this.getData("relatedModule")].id).module_name&&this.eventsFlag?store.findRecord("module",moduleRecordMapping[this.getData("relatedModule")].id).then((function(){e.eventsFlag=!1,e.openColumnList()})):this.openColumnList():(this.data.fetchFieldsForColumnList&&this.setData("fetchFieldsForColumnList",!1),store.findRecord("module",moduleRecordMapping[this.getData("relatedModule")].id).then((function(){e.openColumnList()})))},editCustomRL:function(){this.setData({editCustomRelList:!0,rlEditLabel:this.getData("relatedList.display_label")}),setTimeout(function(){var e=this.$node.querySelector("#customRel");e.focus(),$L(e).keyup(function(e){13===e.keyCode&&this.saveCustomRLName()}.bind(this))}.bind(this),10)},saveCustomRL:function(){this.saveCustomRLName()},cancelCustomRL:function(){var e=this.getData("relatedList"),t=store.peekRecord("related_list",e.id);t.$.isDirty()&&t.$.rollBack(),this.setData("editCustomRelList",!1)},handleRefresh:function(e){if(!e.isChrono||this.getData("parent_relation_name")===e.parent_relation_name){var t=!1;if(e.callActivity)t=!0;else if(e.res){var a="object"==typeof e.res?e.res:JSON.parse(e.res);a&&a[this.data.module]&&a[this.data.module][this.data.relatedListId]&&(t=!0)}else e.module?(this.getData("relatedModule")==e.module||"Activites"==this.data.relatedModule&&"Events"==e.module||"Meetings"===this.getData("relatedModule")&&"Events"===e.module)&&(t=!0):e.isChrono&&"TabView"===this.data.viewName?(this.setData("isChrono",!0),t=!0):(e.refresh||e&&e.id&&this.getData("relatedList").id==e.id)&&(t=!0);"unassign"==e.type&&-1!==this.data.selectedIds.indexOf(e.record_id)&&Lyte.arrayUtils(this.data.selectedIds,"removeAt",this.data.selectedIds.indexOf(e.record_id)),e.refreshTemplate&&(this.refreshColumnList=!0,this.setData("selectedIds",[])),t&&!this.requestFired&&(this.setData("seriesRecordIds",[]),this.setData("pageNo",1),this.setData("relatedListData",[]),this.data.campaignFilter&&this.setData({tableData:[],showTableLoading:!0}),this.resetDetails(),document.querySelectorAll(this.refreshId).forEach((function(e){e.classList.remove("eventNone")})),this.campaignFilter=void 0,Crm.userDetails.isRelatedListLyteEnabled&&(this.$lg.relatedList.filters=!1),e.recordHighLightProp&&this.setData("recordHighLightProp",e.recordHighLightProp),this.getData("recordGet")?(Crm.userDetails.isRelatedListLyteEnabled&&this.setData("disableHierachyBtn",!0),this.fireRequest(this,void 0,void 0,e.refreshTemplate)):(this.deleteRLCount(),this.getRelatedListMeta())),"detail"===Lyte.Router.getRouteInstance().routeName&&Crm.userDetails.isRelatedListLyteEnabled&&(t&&this.data.relatedList&&this.data.relatedList.linkingmodule?this.updateMXNlookupFieldValue(this.data.entityId,this.data.module,this.data.relatedList):"Campaigns"!==this.data.module||"Leads"!==this.data.relatedList.api_name&&"Contacts"!==this.data.relatedList.api_name||(this.setData("selectedIds",[]),this.handleCampaignsActions()),!t||"Campaigns"!==this.data.module||"Potentials"!==this.data.relatedModule&&"Leads"!==this.data.relatedModule&&"Contacts"!==this.data.relatedModule||(Crm.renderDVLyteFlow(this.data.module)?this.loadRelatedRecords(this,this.data.module,this.data.entityId,this.data.relatedModule):detailView.loadRelatedDetails(this.data.module,this.data.entityId,this.data.relatedModule)),this.getData("fullPageLyteRender")?(Lyte.triggerEvent("refreshTimelineInteractions"),Lyte.triggerEvent("detail_view_data_listener_"+this.getData("unique_listener_id"),{isrecordEdited:!0})):refreshFollowDiv())}},attachLinkClick:function(e,t){switch(e){case"viewAttach":this.viewAttachments(t,"realtedListImage");break;case"editLinkAttach":("team_based"===moduleRecordMapping[this.getData("module")].access_type?Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Create_Attachments_"+this.data.module):Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Create_Attachments"))?this.editLinkAttachments(t):_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.delete.error"),ltPropSecondaryMessage:I18n.getMsg("crm.security.error"),ltPropButtons:[{type:"accept",text:I18n.getMsg("crm.button.ok"),appearance:"primary"}],ltPropButtonPosition:"right"},show:function(e){e.childComp.querySelector(".alertPrimaryMsg").style="color:#E20000"}});break;case"downloadAttach":this.downloadAttachments(t);break;case"deleteAttach":if("team_based"===moduleRecordMapping[this.getData("module")].access_type?Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Delete_Attachments_"+this.data.module):Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Delete_Attachments")){var a=2;"workdrive"===t.source&&(a=4),this.recordDeletePopup(t,a,"Attachments",this.data.module,this.data.record,this.data.relatedList),this.getData("fullPageLyteRender")?(Lyte.triggerEvent("refreshTimelineInteractions"),Lyte.triggerEvent("detail_view_data_listener_"+this.getData("unique_listener_id"),{isrecordEdited:!0})):refreshFollowDiv()}else _cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.delete.error"),ltPropSecondaryMessage:I18n.getMsg("crm.security.error"),ltPropButtons:[{type:"accept",text:I18n.getMsg("crm.button.ok"),appearance:"primary"}],ltPropButtonPosition:"right"},show:function(e){e.childComp.querySelector(".alertPrimaryMsg").style="color:#E20000"}})}},attachNameClick:function(e){Crm.userDetails.isSandbox||!Crm.userDetails.isWorkdriveConfigured?"link"!=e.extn&&"png"!=e.extn&&!e.$previewUrl||"mp3"==e.extn||"movie"==e.extn||"file"==e.extn||"zip"==e.extn||"svg"==e.extn?this.downloadAttachments(e):this.viewAttachments(e,"realtedListImageFileName"):"mp3"!==e.extn&&"zip"!==e.extn?this.viewAttachments(e,"realtedListImageFileName"):this.downloadAttachments(e)},invitedEventsDrop:function(e,t){switch(e){case"edit":Crm.editEntity(event,void 0,{module:"Events",id:t.id,reqFrom:"detailView",from:"relatedlist_new"}),event.preventDefault();break;case"delete":this.recordDeletePopup(t,2,"Events");break;case"disassociate":$L("crm-detail-view-common")[0].component.removeParticipant(this.getData("record")[crmConstants.moduleDisplayField[this.getData("module")][0]],t,this.data.record)}},showHideRelatedFields:function(e,t){if(!Crm.renderDVLyteFlow(this.data.module)){if("mouseout"===event.type||!e||!t)return crmui.hideTooltip(),!0;var a,i={},o=$(event.target),s=t.api_name.split(".");if(s.length>1&&(e=e[s[0]]),t.lookup.module&&"se_module"==t.lookup.module.api_name)a=(a=Object.keys(moduleApiMapping).filter((function(t){return moduleApiMapping[t]==e.$se_module}))).length?a[0]:e.$se_module;else if(e[t.api_name]&&e[t.api_name].module||s.length>1&&e[s[1]]&&e[s[1]].module)if(e[t.api_name]&&e[t.api_name].module.api_name||s.length>1&&e[s[1]].module.api_name){var l=s.length>1?e[s[1]].module.api_name:e[t.api_name].module.api_name;a=(a=Object.keys(moduleApiMapping).filter((function(e){return moduleApiMapping[e]==l}))).length?a[0]:l}else a=s.length>1?e[s[1]].module:e[t.api_name].module;else a=(a=Object.keys(moduleApiMapping).filter((function(e){return moduleApiMapping[e]==t.lookup.module.api_name}))).length?a[0]:t.lookup.module.api_name;i.module=a,i.id=s.length>1?e[s[1]].id:e[t.api_name].id,crmLookupBusinessCard.showingSide="showOnRight",renderingUtils.windowWidth-o[0].getBoundingClientRect().right<425&&(crmLookupBusinessCard.showingSide="showOnLeft"),i&&i.module&&i.id&&setTimeout((function(){o.is(":hover")&&crmLookupBusinessCard.getRecordJSon(i.module,i.id,o)}),250)}},showIcons:function(e){var t=this.$node.querySelector("#icons_"+e);if(t&&t.classList.remove("vH"),("Attachments"==this.getData("relatedModule")||"Invited_Events"==this.data.relatedList.api_name)&&!this.getData("attachLinkMenuOpen")){this.$node.querySelector("#attachLinks_"+e).classList.remove("vH");var a=this.$node.querySelector("#play_"+e);a&&a.classList.remove("vH")}},hideIcons:function(e){var t=this.$node.querySelector("#icons_"+e);if(t){var a=t.querySelector("lyte-menu");a&&a.ltProp("show")||t.classList.add("vH")}if("Attachments"==this.getData("relatedModule")||"Invited_Events"==this.data.relatedList.api_name){var i=this.$node.querySelector("#attachLinksMenu_"+e);i&&i.ltProp("show")||this.$node.querySelector("#attachLinks_"+e).classList.add("vH");var o=this.$node.querySelector("#play_"+e);o&&!o.classList.contains("icon_pause")&&o.classList.add("vH")}},showSortDropdown:function(e){this.data.sort_by==e.api_name?"asc"==this.data.sort_order?this.setData("sortDetails",["desc","unsort"]):"desc"==this.data.sort_order?this.setData("sortDetails",["asc","unsort"]):this.setData("sortDetails",["asc","desc"]):this.setData("sortDetails",["asc","desc"]),$L("crm-detail-view-common")[0].component.showSortDropdown(this)},showCampaignFilter:function(){this.setData("campaignFilter",!this.data.campaignFilter),this.data.campaignFilter?document.querySelectorAll(this.refreshId).forEach((function(e){e.classList.add("eventNone")})):(document.querySelectorAll(this.refreshId).forEach((function(e){e.classList.remove("eventNone")})),this.setData("pageRequested",[]),this.setData("pageNo",1),this.setData("pageRequested",[]),this.setData("relatedListData",[]),this.campaignFilter&&(this.campaignFilter=void 0,this.fireRequest(this)),this.campaignFilter=void 0,Crm.userDetails.isRelatedListLyteEnabled&&(this.$lg.relatedList.filters=!1),this.setData("startIndex",0),this.setData("showCountDiv",!1))},onBodyRowClick:function(){return!0},loadContactsHierarchyView:function(){"canvas"===Lyte.Router.getRouteInstance().routeName&&$L(".canvasPopupDivNonReplace")[0].append($L("#contactTreePopupId")[0]),Crm.userDetails.isRelatedListLyteEnabled?this.getContactTreeData(this.getData("record").id,this.getData("module")):crmRelatedList.getContactTreeData(this.getData("record").id,this.getData("module"))},showCompetitorPopup:function(e){commonUtils.openCustomLookup(Crm.getCrmBasePath()+"/potentials/ViewCompetitor.do?id="+e.id+"&module=Potentials&returnAnchor=competitorspersonality_"+this.data.relatedList.id,void 0,"topBandPopup")},onButtonClick:function(e){commonUtils.showHideLoadingDiv(!0);var t=this,a=store.peekRecord("custom_button",e);if(!this.requestButtonSend){this.requestButtonSend=!0;var i=this.data.selectedIds;"multiselectlookup"==this.data.relatedList.type&&(i=[],this.data.selectedIds.forEach(function(e){var t=store.peekRecord("field",this.data.relatedList.mxnfield).multiselectlookup.connectedlookup_apiname;i.push(this.data.relatedListData.cruxFilterBy({id:e})[0][t].id)}.bind(this))),store.triggerAction(moduleRecordMapping[this.data.module].id,"custom_buttons",{button_id:e,type:"POST"},{ids:this.data.record.id},void 0,{related_list_ids:i.join(",")}).then((function(i){commonUtils.showHideLoadingDiv(),t.requestButtonSend=!1,t.executeCustomButtons(i.details,e,t.data.record.id,a.position,moduleRecordMapping[t.data.module].id,void 0,void 0,{related_list_ids:t.data.selectedIds.join(",")})}),(function(e){commonUtils.showHideLoadingDiv(),CustomButtonJSObjectInit.showButtonErrorMsg(JSON.parse(e.response).code),t.requestButtonSend=!1}))}event.stopPropagation(),event.preventDefault()},playMp3:function(e){event.preventDefault(),event.stopPropagation();var t=this.$node.querySelector("#audio_"+e),a=this.$node.querySelector("#play_"+e);if(this.data.playingMp3)if(e==this.data.playingMp3)t.pause(),a.setAttribute("lt-prop-title",I18n.getMsg("crm.button.play")),this.setData("playingMp3",void 0);else{this.$node.querySelector("#audio_"+this.data.playingMp3).pause();var i=this.$node.querySelector("#play_"+this.data.playingMp3);i.classList.add("vH"),i.setAttribute("lt-prop-title",I18n.getMsg("crm.button.play")),a.setAttribute("lt-prop-title",I18n.getMsg("crm.button.pause")),t.play(),this.setData("playingMp3",e)}else t.play(),a.setAttribute("lt-prop-title",I18n.getMsg("crm.button.pause")),this.setData("playingMp3",e)}},methods:{navigNext:function(){this.getData("isChrono")&&this.setData("isNavig",!0),this.setData("pageNo",this.getData("pageNo")+1),this.data.pageRequested.contains(this.data.pageNo)?this.setRelatedListData(!0,!1):this.fireRequest(this,!0)},onRecordCheckBoxChanged:function(e){this.getData("fromCanvas")&&(CustomButtonJSObjectInit.canvas_rlid=this.getData("relatedListId")),e.nextElementSibling.classList.contains("customCheckBox")?Lyte.arrayUtils(this.getData("selectedIds"),"push",e.id):Lyte.arrayUtils(this.getData("selectedIds"),"removeAt",this.getData("selectedIds").indexOf(e.id));var t=this;"Campaigns"!==t.data.module||"Leads"!==t.data.relatedList.api_name&&"Contacts"!==t.data.relatedList.api_name||t.handleCampaignsActions(e.checked)},onCadencesCheckBoxChanged:function(e,t,a,i,o){if(o.isTrusted&&a.id&&"singleRec"===t){var s=e.Cadencesid__s.id,l=this.getData("seriesRecordIds").indexOf(s);l>=0?Lyte.arrayUtils(this.getData("seriesRecordIds"),"removeAt",l):Lyte.arrayUtils(this.getData("seriesRecordIds"),"push",s)}else if(o.isTrusted&&a&&"page"===t){var r=this;a.checked?this.getData("tableData").forEach((function(e){-1!=r.getData("seriesRecordIds").indexOf(e.Cadencesid__s.id)||Lyte.Component.registeredHelpers.ltpropDisableAdded(e)||Lyte.arrayUtils(r.getData("seriesRecordIds"),"push",e.Cadencesid__s.id)})):this.getData("tableData").forEach((function(e){r.getData("seriesRecordIds").indexOf(e.Cadencesid__s.id)>-1&&!Lyte.Component.registeredHelpers.ltpropDisableAdded(e)&&Lyte.arrayUtils(r.getData("seriesRecordIds"),"removeAt",r.getData("seriesRecordIds").indexOf(e.Cadencesid__s.id))}))}Lyte.registeredMixins["crm-related-list-utils"].seriesSelectedids=this.getData("seriesRecordIds"),Crm.userDetails.isRelatedListLyteEnabled||(crmRelatedList.seriesSelectedids=this.getData("seriesRecordIds")),this.getData("seriesRecordIds").length?($L(".seriesShowOnCheckAction").show(),$L(".seriesHideOnCheckAction").hide()):($L(".seriesShowOnCheckAction").hide(),$L(".seriesHideOnCheckAction").show())},onPageCheckBoxChanged:function(e){this.getData("fromCanvas")&&(CustomButtonJSObjectInit.canvas_rlid=this.getData("relatedListId"));var t=this;e.nextElementSibling.classList.contains("customCheckBox")?this.getData("tableData").forEach((function(e){-1==t.getData("selectedIds").indexOf(e.id)&&Lyte.arrayUtils(t.getData("selectedIds"),"push",e.id)})):this.getData("tableData").forEach((function(e){t.getData("selectedIds").indexOf(e.id)>-1&&Lyte.arrayUtils(t.getData("selectedIds"),"removeAt",t.getData("selectedIds").indexOf(e.id))})),"Campaigns"!==t.data.module||"Leads"!==t.data.relatedList.api_name&&"Contacts"!==t.data.relatedList.api_name||t.handleCampaignsActions(e.checked)},attachLinksOpen:function(e,t,a){this.setData("attachLinkMenuOpen",!0);var i=$L(".cscript-attachment-menubody");a&&$L(a).closest(".canvas-cscript-readonly").length?i.addClass("canvas-cscript-readonly-menu"):i.removeClass("canvas-cscript-readonly-menu")},onAttachMenuClose:function(e){this.setData("attachLinkMenuOpen",!1),$L("#attachLinks_"+e,this.$node)[0].classList.add("vH")},menuOnBeforeOpen:function(e){$L.fastdom.measure((function(){var t=$L("#DetailViewInnerTabs"),a=$L("#wmstoolbar"),i={top:0,bottom:0};t.length&&(i.top=t[0].getBoundingClientRect().bottom),a.length&&(i.bottom=a[0].getBoundingClientRect().top),$L.fastdom.mutate((function(){e.ltProp("boundary",i)}))}))},navigPrevious:function(){this.getData("isChrono")&&this.setData("isNavig",!0),this.setData("attachLinkMenuOpen",!1),this.setData("pageNo",this.getData("pageNo")-1),this.setData("moreRecords",!1),this.setRelatedListData(!0,!1)},campaignFilter:function(e,t,a){if(a){var i=e.getFilterQuery();if(0==Object.keys(i))return void _cruxUtils.showCustomMessage({params:{ltPropTransition:'{"animation" : "slideFromTop"}',ltPropMessage:I18n.getMsg("crm.label.empty.value"),ltPropType:"error",ltPropOffset:{top:"50px"}}});this.setData("pageNo",1),this.setData("pageRequested",[]),this.setData("relatedListData",[]),this.setData("startIndex",0),this.campaignFilter=JSON.stringify(i),this.campaignFilter&&Crm.userDetails.isRelatedListLyteEnabled&&(this.$lg.relatedList.filters=!0),this.requestFired||(this.setData({tableData:[],showTableLoading:!0}),this.fireRequest(this,!0,i)),this.setFilterCount()}},campaignFilterClear:function(){this.setData("pageRequested",[]),this.setData("pageNo",1),this.setData("pageRequested",[]),this.setData("relatedListData",[]),this.setData("startIndex",0),!this.requestFired&&this.campaignFilter&&(this.setData({tableData:[],showTableLoading:!0}),this.campaignFilter=void 0,this.fireRequest(this)),this.campaignFilter=void 0,Crm.userDetails.isRelatedListLyteEnabled&&(this.$lg.relatedList.filters=!1),this.setData("showCountDiv",!1)},filterConditions:function(e){var t=[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],a=[{name:_cruxUtils.getI18n("contains"),api_val:"contains"},{name:_cruxUtils.getI18n("doesn't contain"),api_val:"not_contains"}],i=[{name:I18n.getMsg("On"),api_val:"equal"},{name:I18n.getMsg("Before"),api_val:"less_than"},{name:I18n.getMsg("After"),api_val:"greater_than"}];return e&&(e.setData({cxPropPlaceHolder:{text:I18n.getMsg("crm.label.filter.typehere"),number:I18n.getMsg("crm.label.filter.typehere"),email:I18n.getMsg("crm.label.filter.typehere"),lookup:I18n.getMsg("crm.label.filter.typehere"),number:I18n.getMsg("crm.label.filter.typehere"),phone:I18n.getMsg("crm.label.filter.typehere"),"text-area":I18n.getMsg("crm.label.filter.typehere"),website:I18n.getMsg("crm.label.filter.typehere"),user:I18n.getMsg("crm.label.none"),picklist:I18n.getMsg("crm.select"),layout:I18n.getMsg("crm.select")},cxPropFormulaUitypes:{118:{date:"24",datetime:"333",decimal:"38",currency:"36",double:"38",integer:"32",longinteger:"52"},116:{date:"24",datetime:"333",decimal:"38",currency:"36",double:"38",string:"1",boolean:"301"}}}),e.setData("cxPropDisableFilter",!0)),{52:t,32:t,38:t,40:t,39:t,36:t,0:a,786:i,200:i,24:i,202:i,333:i,14:i,35:a,208:t,209:t,221:t,100:a,34:t}}},getRelatedListMeta:function(){var e=this,t=e.getData("rlIdVsCount");if(e.getData("isCountApiEnabled")&&t&&0===t[e.data.relatedList.id])return e.setData({showNoRecords:!0,showLoading:!1}),void("TabView"===e.data.viewName&&e.listenerForTabViewNoDataAvailable());var a=this.getData("record");"detail"===Lyte.Router.getRouteInstance().routeName&&"multiselectlookup"===this.getData("relatedList.type")?void 0===a.$approval?this.setData("parentRecApproved",!0):!1===a.$approved&&!1===a.$approval.resubmit||!a.$approval.resubmit&&"approved"!==a.$approval_state&&"review_process_pending"!==a.$approval_state&&"review_process_rejected"!==a.$approval_state&&"merge_pending"!==a.$approval_state&&!a.$review||"Rejected"===a.$review||this.setData("parentRecApproved",!0):this.setData("parentRecApproved",!0),app.store.makeRequest("findRecord","related_list",e.data.relatedList.id,{module:moduleApiMapping[e.data.module],layout_id:this.data.layoutId,include_inner_details:this.innerDetailParam}).then((function(t){if(e.data){if(void 0===t||0===t.length)return e.setData("showLoading",!1),void e.setData("showNoRecords",!0);e.setData("relatedList",t[0]),e.setData("relatedListFields",t[0].fields),e.sorted=!1,t[0].sort_by?(e.sorted=!0,e.setData("sort_by",t[0].sort_by.api_name),e.setData("sort_order",t[0].sort_order)):"picklist_tracker"!==t[0].action||!t[0].customize_sort||t[0].sort_order||t[0].sort_by?"INVITEDEVENTSPERSONALITY"!==t[0].personality_name||!t[0].customize_sort||t[0].sort_order||t[0].sort_by||(e.sorted=!0,e.setData("sort_by","Start_DateTime"),e.setData("sort_order","asc")):(e.sorted=!0,e.setData("sort_by","Modified_Time"),e.setData("sort_order","desc")),e.sorted||"Calls_History"!==t[0].api_name&&"Calls"!==t[0].api_name?e.sorted||"Tasks"!==t[0].api_name?e.sorted||"Tasks_History"!==t[0].api_name?e.sorted||"Events_History"!==t[0].api_name&&"Events"!==t[0].api_name||(e.sorted=!0,e.setData("sort_by","Start_DateTime"),e.setData("sort_order","Events"===t[0].api_name?"asc":"desc")):(e.sorted=!0,e.setData("sort_by","Closed_Time"),e.setData("sort_order","desc")):(e.sorted=!0,e.setData("sort_by","Due_Date"),e.setData("sort_order","asc")):(e.sorted=!0,e.setData("sort_by","Call_Start_Time"),e.setData("sort_order","Calls"===t[0].api_name?"asc":"desc")),e.constructFields(),e.setData("recordGet",!0),e.fireRequest(e)}}))},setFilterCount:function(){var e=this,t={relatedId:this.getData("record").id,relationId:this.getData("relatedList").id,filters:this.campaignFilter};store.triggerAction(moduleRecordMapping[this.getData("module")].id,"count",t).then((function(t){e.setData("showCountValue",t.count)}))},sortRecord:function(e){var t=$L("crm-related-list-view-header .lyteMenuSelected")[0].parentElement.id,a=this.data.relatedListFields.filter((function(e){return e.id==t}))[0].api_name;this.sorted=!0,"unsort"===e&&(this.sorted=!1),this.setData("sort_order",e),this.setData("sort_by",a),this.setData("pageNo",1),this.setData("pageRequested",[]),this.setData("relatedListData",[]),this.setData("startIndex",0),this.campaignFilter||(this.setData("campaignFilter",!1),this.setData("showCountDiv",!1)),this.fireRequest(this),setTimeout(function(){var i=this.data.relatedList;"unsort"==e?(this.setData("sort_order",void 0),this.setData("sort_by",void 0),i.$.triggerAction("unsort",{type:"PUT"},{module:moduleApiMapping[this.data.module],layout_id:this.data.layoutId},void 0,{related_list:{sort_order:e,sort_by:{id:t,api_name:a}}})):i.$.triggerAction("customize_sort",{type:"PUT"},{module:moduleApiMapping[this.data.module],layout_id:this.data.layoutId},void 0,{related_list:{sort_order:e,sort_by:{id:t,api_name:a}}})}.bind(this),0)},pushRecordToModule:function(e){e&&e.length&&"Competitors"!=this.getData("relatedList").api_name&&("multiselectlookup"===this.getData("relatedList.type")&&this.getData("mxnFieldRecordId")&&e.forEach(function(e){var t=e[this.getData("mxnFieldRecordId")];e[this.getData("mxnFieldRecordId")]=store.pushPayload(moduleRecordMapping[this.getData("relatedList.connectedmodule")].id,t)}.bind(this)),Lyte.arrayUtils(this.data.relatedListData,"push",store.pushPayload(moduleRecordMapping[this.getData("relatedModule")].id,e))),"Competitors"==this.getData("relatedList").api_name&&Lyte.arrayUtils(this.data.relatedListData,"push",e),this.setRelatedListData(!0,!0)},setRelatedListData:function(e,t){var a=this.getData("relatedListCountPerPage");if(a=parseInt(a),this.setData("startIndex",(this.data.pageNo-1)*a),this.getData("relatedListData").length){let e=this.getData("relatedListData").slice(this.getData("startIndex"),this.getData("startIndex")+a),t=this.data.recordHighLightProp;if(t){let a=t.recordIds;a&&a.length&&e.forEach((e=>{a.includes(e.id)&&Lyte.objectUtils(e,"add","cxPropClass",t.class)}))}if(this.setData("tableData",e),t){let a=t.duration,i=t.recordIds;setTimeout((function(){i&&i.length&&(e.forEach((e=>{i.includes(e.id)&&Lyte.objectUtils(e,"delete","cxPropClass")})),this.setData("recordHighLightProp",{})),this.setData("tableData",e)}),a||1e4)}}if(e){var i=this.getData("isInitialLoadinCanvas"),o=this.data.relatedList.id;if(i[o]=void 0===i[o]||i[o],this.data.fromCanvas&&Crm.userDetails.isRLCountSupportedForCanvas&&!1===i[o]){var s,l=this.getData("relatedList"),r=[];r.push(o),"Tasks"===l.api_name?s="Tasks_History":"Events"===l.api_name?s="Events_History":"Calls"===l.api_name&&(s="Calls_History");var n=Lyte.registeredMixins["crm-detailcanvas-utils"].relListIdsinView;if(s){var d=store.peekAll("related_list").filter((function(e){return e.api_name===s}));n.contains(d[0].id)&&r.push(d[0].id)}Lyte.registeredMixins["crm-detailcanvas-utils"].triggerRLCountAPI(moduleApiMapping[this.data.module],this.data.record.id,r),$L(document.querySelectorAll("#fetch_"+this.data.relatedList.id)).removeClass("ref_loading peNone").addClass("ref_complete")}else if(this.getData("isChrono")||"TabView"===this.data.viewName){if(this.getData("isChrono")&&"TabView"===this.data.viewName&&!this.getData("canvas")){let e=this.data.relatedModule;"Events"===e&&(e="Meetings"),Lyte.triggerEvent("relatedListCount",{id:this.data.relatedList.id,api_name:this.data.relatedList.api_name,count:this.getData("relatedListData").length,more_records:this.getData("relatedListData").length>10*this.data.pageNo,page:this.data.pageNo,parent_relation_name:this.data.parent_relation_name,info:this.getData("availableInfo"),isNavig:this.getData("isNavig"),relMod:e,tableCount:this.getData("tableData").length,module:this.data.relatedModule,rlcount:this.data.rlcount})}}else Lyte.triggerEvent("relatedListCount",{id:this.data.relatedList.id,api_name:this.data.relatedList.api_name,count:Math.min(a*this.data.pageNo,this.getData("relatedListData").length),format:"table",more_records:this.getData("relatedListData").length>this.getData("relatedListCountPerPage")*this.data.pageNo,page:this.data.pageNo,module:this.data.relatedModule,rlcount:this.data.rlcount}),populateRLCount&&t&&!Crm.userDetails.isRelatedListLyteEnabled&&(this.getData("relatedListData").length>this.getData("relatedListCountPerPage")*this.data.pageNo?this.setData("relatedListCount",this.data.pageNo*this.getData("relatedListCountPerPage")+"+"):this.setData("relatedListCount",this.getData("relatedListData").length),populateRLCount(this.data.relatedList.id))}if(this.data.isConnectedRecordChildRl&&Array.isArray(this.data.relatedList.parent_related_lists)){var p=this.data.relatedList.parent_related_lists[0].api_name,c=store.peekAll("related_list").filter((function(e){return e.api_name===p}))[0].id;$L(document.querySelectorAll("#fetch_"+c)).removeClass("ref_loading peNone").addClass("ref_complete")}i[o]=!1,this.setData("isInitialLoadinCanvas",i),"Attachments"==this.data.relatedList.api_name&&this.getData("tableData").length>0&&null==this.getData("tableData")[0].thumbnailUrl&&this.resolveThumbnailRequest()},listenerForTabViewNoDataAvailable:function(){let e=this,t=e.data.relatedModule;"Events"===t&&(t="Meetings"),Lyte.triggerEvent("relatedListCount",{id:e.data.relatedList.id,api_name:e.data.relatedList.api_name,count:0,more_records:!1,page:1,action:"new",info:e.getData("availableInfo"),parent_relation_name:e.data.parent_relation_name,relMod:t,tableCount:0,module:e.data.relatedModule,rlcount:e.data.rlcount})},constructFields:function(){if("Price_Books"==this.data.relatedList.api_name&&Lyte.arrayUtils(this.getData("relatedListFields"),"push",{field_label:I18n.getMsg("List Price"),api_name:"list_price",ui_type:36}),Crm.userDetails.isRelatedListLyteEnabled)if("Campaigns"!==this.data.module||"Leads"!==this.data.relatedModule&&"Contacts"!==this.data.relatedModule||"default"!==this.getData("relatedList.type")){if(("Leads"===this.data.module||"Contacts"===this.data.module)&&"Campaigns"===this.data.relatedModule){var e=moduleRecordMapping.Campaigns.layouts,t=e?e.filter((function(e){return e.created_for})):[],a=(r=store.peekAll("field"),store.peekAll("field").filterBy({api_name:"Service_Status"}));if(t.length&&a.length){n=Object.assign(a[0].$.toJSON(),{api_name:"$member_info.Service_Status",yieldName:"member-info"});Lyte.arrayUtils(this.getData("relatedListFields"),"push",n)}}}else{var i,o,s=this.data.record.Layout?this.data.record.Layout.id:moduleRecordMapping.Campaigns.layouts[0].id,l=moduleRecordMapping.Campaigns.layouts.filterBy({id:s}),r=store.peekAll("field");if(i=(i=this.getData("relatedListFields").filter((function(e,t){if("Member_Status"===e.api_name)return o=t,!0}))).length?Object.assign(i[0],{api_name:"$member_info.Member_Status",yieldName:"member-info"}):{},l&&l[0]&&l[0].created_for){var n=Object.assign(r.filterBy({api_name:"Service_Status"})[0].$.toJSON(),{api_name:"$member_info.Service_Status",yieldName:"member-info"});if("backstage"===l[0].created_for){var d=Object.assign(r.filterBy({api_name:"Backstage_Role"})[0].$.toJSON(),{api_name:"$member_info.Backstage_Role",yieldName:"member-info"}),p=Object.assign(r.filterBy({api_name:"Backstage_No_of_Tickets"})[0].$.toJSON(),{api_name:"$member_info.Backstage_No_of_Tickets",yieldName:"member-info"});Lyte.arrayUtils(this.getData("relatedListFields"),"removeAt",o,1),Lyte.arrayUtils(this.getData("relatedListFields"),"insertAt",1,[d,p,i,n])}else if("survey"===l[0].created_for){var c=Object.assign(r.filterBy({api_name:"Received_By"})[0].$.toJSON(),{api_name:"$member_info.Received_By",yieldName:"member-info"}),m=Object.assign(r.filterBy({api_name:"Sent_On"})[0].$.toJSON(),{api_name:"$member_info.Sent_On",yieldName:"member-info"}),u=Object.assign(r.filterBy({api_name:"Responded_Date"})[0].$.toJSON(),{api_name:"$member_info.Responded_Date",yieldName:"member-info"}),y=Object.assign(r.filterBy({api_name:"Response"})[0].$.toJSON(),{api_name:"$member_info.Response",yieldName:"member-info"});Lyte.arrayUtils(this.getData("relatedListFields"),"removeAt",o,1),Lyte.arrayUtils(this.getData("relatedListFields"),"insertAt",1,[c,m,u,i,n,y])}else"campaign"!==l[0].created_for&&"webinar"!==l[0].created_for||(Lyte.arrayUtils(this.getData("relatedListFields"),"removeAt",o,1),Lyte.arrayUtils(this.getData("relatedListFields"),"push",[i,n]))}}var f=this.getData("fieldUiType"),g=this.getData("relatedListFields"),h=this.getData("moduleInfo"),_={};h&&(h.module_name.indexOf("CustomModule")>-1||h.module_name.indexOf("LinkingModule")>-1)&&(this.getData("displayField")[h.module_name]=["Name"]);var L=this.getData("displayField")[this.data.relatedModule]?this.getData("displayField")[this.data.relatedModule]:[],v=g.length,b=[],D=L.length,x=[];"Campaigns"!==this.data.relatedModule&&("Campaigns"!==this.data.module||"Leads"!==this.data.relatedModule&&"Contacts"!==this.data.relatedModule)||store.peekAll("campaign_status").forEach((function(e){x.push({actual_value:e.name,display_value:e.name,id:e.id})}));for(var R=0;R<v;R++)if("EntityCadencesid__s"!==g[R].api_name){if(("Appointments_Rescheduled_History__s"!==this.data.relatedList.module.api_name||"Name"!==g[R].api_name)&&"Prediction_Score"!==g[R].api_name&&"Deal_Id"!==g[R].api_name&&"Chat_Attachment"!==g[R].api_name){if(("Campaigns"==this.data.relatedModule||"Campaigns"===this.data.module&&("Leads"===this.data.relatedModule||"Contacts"===this.data.relatedModule))&&2==g[R].ui_type){var C=store.peekRecord("field",g[R].id);if(C)g[R].pick_list_values=C.pick_list_values;else{var O=this;g[R].pick_list_values="Member_Status"===g[R].api_name||"$member_info.Member_Status"===g[R].api_name?x:store.findRecord("field",g[R].id,{module:this.data.relatedModule}).then((function(e){return"Campaigns"!==O.data.module||"Leads"!==O.data.relatedModule&&"Contacts"!==O.data.relatedModule||O.setData("fetchFieldsForColumnList",!0),g.filter((function(t){return t.id===e[0].id}))[0].pick_list_values=e[0].pick_list_values,e[0].pick_list_values}))}}"Full_Name"!==g[R].api_name&&"Full_Name"!==g[R].api_name.split(".")[1]||(g[R].field_label=I18n.getMsg("custommodule.crmfield.fl.name",h?h.singular_label:"")),"multiselectlookup"==this.data.relatedList.type&&(g[R].api_name.split(".").length>1&&(g[R].yieldName="multiselect"),"Name"==g[R].api_name&&(g[R].yieldName="lookup"));for(var q=0;q<D;q++)(L[q]==g[R].api_name||this.getData("uiTypeLookup")[g[R].ui_type]||L[q]==g[R].api_name.split(".")[1])&&(g[R].api_name.split(".").length>1?g[R].yieldName="multiselect-lookup":g[R].yieldName="lookup");g[R].lookup&&Object.keys(g[R].lookup).length&&(g[R].data_type="lookup"),116==g[R].ui_type&&g[R].formula_return_type&&(g[R].formula={return_type:g[R].formula_return_type}),132==g[R].ui_type&&(g[R].yieldName="multi_module_lookup"),2!==g[R].ui_type&&"2"!==g[R].ui_type||!h||"Activities"!==h.api_name&&"Events"!==h.api_name||(g[R].yieldName="picklist"),999==g[R].ui_type&&(g[R].yieldName="terriority"),209==g[R].ui_type&&Crm.userDetails.isRelatedListLyteEnabled&&(g[R].yieldName="crm_tags"),"SERIESPERSONALITY"===this.getData("relatedList").personality_name&&"Cadencesid__s"===g[R].api_name&&(g[R].yieldName="cadences"),"Start_DateTime"==g[R].api_name&&"Invited_Events"==this.data.relatedList.api_name&&(g[R].yieldName="event-date"),"Invited_Events"==this.data.relatedList.api_name&&"Status"==g[R].api_name&&(g[R].yieldName="participant-status"),h&&"Campaigns"==h.api_name&&"Member_Status"==g[R].api_name&&(g[R].yieldName="member-info",g[R].api_name="$member_info.Member_Status",1==g[R].ui_type&&(g[R].ui_type="2",g[R].pick_list_values=x)),"Contact_Roles"==this.data.relatedList.api_name&&"Role"==g[R].api_name&&(g[R].yieldName="contact-role"),g[R].cxPropClass=this.getClassForLVData(g[R]),(!this.data.relatedList.customize_sort||96===g[R].ui_type||"Appointment_For"===g[R].api_name||g[R].ui_type===CrmFieldConstants.TEXTAREA||g[R].ui_type===CrmFieldConstants.TERRITORY||g[R].ui_type===CrmFieldConstants.LAYOUT||g[R].ui_type===CrmFieldConstants.TEXTAREA1||g[R].ui_type===CrmFieldConstants.TEXT||g[R].ui_type===CrmFieldConstants.TAGS||g[R].ui_type===CrmFieldConstants.WIZARD||g[R].crypt||"Visits"===this.getData("module")&&"SEID"===g[R].column_name||"Invited_Events"===this.data.relatedList.api_name&&"Status"===g[R].api_name)&&(g[R].cxPropClass="cursorDefault"),g[R].sortable=!(g[R]&&(3===g[R].ui_type||999===g[R].ui_type||208===g[R].ui_type||110===g[R].ui_type||1e3===g[R].ui_type||209===g[R].ui_type)||"Visits"===this.getData("module")&&"SEID"===g[R].column_name||"Dealhistory"===this.getData("relatedModule")),g[R].cxPropZcqaSelector="Detail_"+this.data.relatedList.api_name+"_"+g[R].id,_[g[R].api_name]=f[g[R].ui_type],g[R].sortable=!(3===g[R].ui_type||999===g[R].ui_type||208===g[R].ui_type||110===g[R].ui_type||1e3===g[R].ui_type||209===g[R].ui_type),b.push(g[R])}}else"SERIESPERSONALITY"===this.getData("relatedList").personality_name&&"EntityCadencesid__s"===g[R].api_name&&(g[R].yieldName="checkboxcads");this.setData("fieldMapping",_),this.setData("customfields",b)},getClassForLVData:function(e){var t=e.ui_type;return"SMOWNERID"===e.column_name||"SMCREATORID"===e.column_name||"MODIFIEDBY"===e.column_name?"lv_data_textfield lv_data_username":36==t||77==t||116==t&&"currency"==e.data_type?"lv_data_currency alignRight":25==t?"lv_data_email":127==t||1==t||4==t||133==t||9==t||5==t||13==t?"lv_data_textfield":33==t||6==t||7==t||35==t||124==t||200==t?"lv_data_phone":32===t||38===t||52===t||333===t||786===t||14===t||24===t?"lv_data_number":3==t||110===t?"lv_data_desc":"lv_data_textfield"},viewAttachments:function(e,t){var a=this;if("workdrive"===e.$internal_type){const t=e;var i=e.$wd_resource_id,o=RebrandLinkUtil.getProperty("TD_JS_STATIC_URL");Lyte.removeFromCache([o]),Lyte.injectResources([o],void 0,(function(){var e=moduleRecordMapping[t.$se_module].id,a={WDDomainURL:httpprotocol+RebrandLinkUtil.getProperty("teamdriveURL"),resourceId:i,showToolBar:!0};a.module=e,a.entityId=t.Parent_Id.id,(new WorkDrive).validateResourceAndPreview(a)}))}else if("png"===e.extn){var s={currentId:e.id,selector:t,downloadImage:!0,fileName:!0,zoom:!0},l=[],r=this.constructDownloadAcclUrl(e);a.data.tableData.forEach((function(e){"png"==e.extn&&l.push({downloadUrl:Crm.userDetails.DOWNLOAD_SERVER_FLOW?r:e.$download_url,original_src:Crm.userDetails.DOWNLOAD_SERVER_FLOW?r:e.$previewUrl,fileId:e.$file_id,filename:e.File_Name,src:e.thumbnailUrl,uploadid:e.id,extn:"."+e.File_Name.substring(e.File_Name.lastIndexOf(".")+1,e.File_Name.length)})})),Lyte.Component.render("crm-image-preview",{imageData:l,isEditable:"false",previewConfiguration:s,id:"attachmentpreview"},"body"),Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-image-preview.js","crm-image-preview.css"],ResourceConstants.CRMClient),void 0,(function(){var i=$L("crm-image-preview#attachmentpreview")[0];i.setMethods({onClose:function(){i.remove()}});"realtedListImageFileName"==t?a.$node.querySelector("#attach_"+e.id):document.querySelector("#viewAttach_"+e.id);$L(i).find(".imagePreviewTest")[0].ltProp("withCredentials",!0),commonUtils.showHideLoadingDiv(!1)}))}else e.$previewUrl?"workdrive_link"==e.$internal_type?open(e.$previewUrl):!Crm.userDetails.DOWNLOAD_SERVER_FLOW||"html"!==e.extn&&"txt"!==e.extn?openSheetForExport(e.$previewUrl,"pdf"==e.extn&&"pdfViewPlugin"):networkUtils.openUrl(e.$previewUrl):open(e.$link_url)},editLinkAttachments:function(e){var t=networkUtils.returnDependencyFiles(["editlinkurl.js"],ResourceConstants.CRMClient),a=networkUtils.returnDependencyFiles(["mailmerge.css"],ResourceConstants.CRMClient),i=t.concat(a);Lyte.injectResources(i,void 0,(function(){Lyte.Component.render("crm-linkattachment",{linkUrl:e.$link_url,filename:e.File_Name,module:e.$se_module,record:e.Parent_Id.id,header:I18n.getMsg("crm.customlink.editlink"),method:"edit",isEdit:!0,attachmentId:e.id},"#show"),document.getElementById("showLinkUrlPop").ltProp("show",!0)}))},downloadAttachments:function(e){var t=e.$download_url;if("workdrive"===e.$internal_type){var a=moduleRecordMapping[e.$se_module].id,i={entity_id:e.Parent_Id.id,module:a};t=1===t.split("?").length?t+"?x-cli-msg="+$ESAPI.encoder().encodeForURL(JSON.stringify(i)):t+"&x-cli-msg="+$ESAPI.encoder().encodeForURL(JSON.stringify(i))}var o=document.createElement("a");o.style="display: none",this.$node.appendChild(o),Crm.userDetails.DOWNLOAD_SERVER_FLOW?o.href=this.constructDownloadAcclUrl(e):o.href=e.$download_url,this.getData("isWDEnabled")&&(o.href=t),o.download=e.File_Name,this.openUrlInNewTab(o),o.remove()},resolveThumbnailRequest:function(){var e=this;return this.data.tableData.forEach((function(t){"png"==t.extn&&(e.idVsURL[t.id]||(e.idVsURL[t.id]=e.constructSizeMinimizedImage(t.$previewUrl)))})),Lyte.resolvePromises(e.idVsURL)},openColumnList:function(){if(commonUtils.showHideLoadingDiv(),$L("crm-detail-view-common")[0].component.openColumnList(this,this.refreshColumnList),!this.isNotActivitySubPersonality(this.data.relatedList.personality_name,"Services"===Lyte.Router.getRouteInstance().parent.parent.getDynamicParam()||void 0)){var e=0;$L("crux-column-list")[0].component.getSelectedFields().each((function(t){!0===t.mandatory&&(e+=1)})),Crm.userDetails.isRelatedListLyteEnabled?this.mandFields[this.data.relatedList.personality_name]=e:crmRelatedList.mandFields[this.data.relatedList.personality_name]=e}delete this.refreshColumnList},saveColumnList:function(e,t){var a,i=this.data.relatedList,o=1;i.fields.forEach((function(t){a=!1,e.forEach((function(e){t.id==e.id&&(a=!0)})),("Campaigns"==i.api_name&&"$member_info.Member_Status"==t.api_name||"Price_Books"==i.api_name&&"list_price"==t.api_name)&&(a=!0),a||e.push({id:t.id,api_name:t.api_name,_delete:null})})),e.forEach((function(e){e._delete||(e.sequence_number=o++)})),i.$.set("fields",e);var s=this;commonUtils.showHideLoadingDiv(!0),i.$.save(void 0,{module:moduleApiMapping[this.data.module],layout_id:this.data.layoutId}).then((function(){s.setData("pageNo",1),s.setData("relatedListData",[]),s.setData("startIndex",0),s.setData("pageRequested",[]),s.setData("showCountDiv",!1),s.setData("campaignFilter",!1),document.querySelectorAll(s.refreshId).forEach((function(e){e.classList.remove("eventNone")})),s.campaignFilter=void 0,s.setData("relatedListFields",e),s.refreshHeader(),s.fireRequest(s,void 0,void 0,!1),t&&t.hidePopover()}),(function(){i.$.rollBack(),renderingUtils.displayPermissionDenied()}))},getColumnListData:function(e){if("multiselectlookup"==this.data.relatedList.type){var t=moduleRecordMapping[this.data.relatedList.linkingmodule],a=Lyte.deepCopyObject(moduleRecordMapping[this.data.relatedModule].fields),i=store.peekRecord("field",this.data.relatedList.mxnfield).multiselectlookup,o=i.connectedlookup_apiname;if(a=a.filter((function(e){return(0!==e.show_type||"FULLNAME"===e.column_name||"PROCESSINGBASIS"===e.column_name||"SE_STATUS"===e.column_name)&&17!==e.show_type&&e.api_name!==i.connectedfield_apiname&&e.api_name!==o&&(e.api_name=o+"."+e.api_name,!0)})),1===moduleRecordMapping[this.data.relatedList.linkingmodule].visibility&&moduleRecordMapping[this.data.relatedList.linkingmodule].visible){var s=Lyte.deepCopyObject(t.fields);return s=s.filter((function(e){return e.api_name!==i.connectedfield_apiname&&e.api_name!==o&&(e.field_label=e.field_label+" ("+t.plural_label+")","Name"==e.api_name&&(e.mandatory=!0),!0)})),a.concat(s)}return a}if("picklist_tracker"==this.data.relatedList.action){var l=this.data.moduleInfo.parent_module.fields.filter((function(e){return e.history_tracking})),r=[];return l=l.length?l[0]:void 0,e.forEach(function(e){"Appointments_Rescheduled_History__s"===this.data.relatedList.module.api_name&&"Name"===e.api_name||(("NAME"===e.column_name||l&&l.history_tracking&&l.history_tracking.duration_configured_field&&e.api_name===l.history_tracking.duration_configured_field.api_name)&&(e.mandatory=!0),"LINKINGMXN1"!=e.column_name&&"POTENTIALID"!=e.column_name&&"LASTACTIVITYTIME"!=e.column_name&&r.push(e))}.bind(this)),r}for(var n=e.length,d=[],p=0;p<n;p++)"BEST_TIME"===e[p].column_name||"Visits"===this.data.relatedModule&&"SEID"===e[p].column_name||d.push(e[p]);return d},refreshHeader:function(){var e=this;app.store.makeRequest("findRecord","related_list",e.data.relatedList.id,{module:moduleApiMapping[e.data.module],layout_id:e.data.layoutId,include_inner_details:this.innerDetailParam}).then((function(t){e.setData("relatedListFields",t[0].fields),e.sorted=!1,t[0].sort_by&&(e.sorted=!0,e.setData("sort_by",t[0].sort_by.api_name),e.setData("sort_order",t[0].sort_order)),e.constructFields()}))},constructDownloadAcclUrl:function(e){var t=RebrandLinkUtil.getProperty("DOWNLOADSERVERURL"),a=RebrandLinkUtil.getProperty("DOCSDOWNLOADSERVERSERVICEKEY");return RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+t+"/v2/"+a+"/"+crmZgid+"/attachments/"+e.id+"/download"},handleCampaignsActions:function(){var e=this.$node.querySelectorAll(".campaignHideOnCheckActions"),t=this.$node.querySelectorAll(".campaignShowOnCheckActions"),a=this.data.selectedIds;a&&a.length?(e.length&&e.forEach((function(e){$L(e).hide()})),t.length&&t.forEach((function(e){var t=$L(e);t.show(),t.removeClass("dNImp")})),this.setData("campaignRelatedListClass","campaignsRlActionClass"),this.$node.querySelector("crm-related-list-actions").setData("selectedIds",this.data.selectedIds)):(e.length&&e.forEach((function(e){$L(e).show()})),t.length&&t.forEach((function(e){$L(e).hide()})),this.setData("campaignRelatedListClass",""))},saveCustomRLName:function(){var e=this.$node.querySelector("#customRel"),t=this,a=e.component.getValue(),i=this.getData("relatedList"),o=store.peekRecord("related_list",i.id);e.component.validate()&&a?(o.$.set("display_label",a),o.$.save(void 0,{module:moduleApiMapping[t.data.module],layout_id:this.data.layoutId}).then((function(){t.getData("fullPageLyteRender")?Lyte.triggerEvent("updateLeftPanel",{displayLabel:a,id:o.id}):$L("#newleft_"+o.id).find("a").text(a);t.setData("relatedList.display_label",a),e.component.setData("cxPropErrorMessage",""),t.setData("editCustomRelList",!1)}),(function(t){o.$.rollBack();var a=JSON.parse(t.response);if(a&&a.related_lists&&a.related_lists.length&&a.related_lists[0]){var i="";"DUPLICATE_DATA"===a.related_lists[0].code?i=I18n.getMsg("crm.mb.relatedlist.label.dplk"):"NOT_ALLOWED"===a.related_lists[0].code?i=I18n.getMsg("crm.mb.relatedlist.label.sykw"):"INVALID_DATA"===a.related_lists[0].code&&a.related_lists[0].message.includes("Special characters")&&(i=I18n.getMsg("crm.mb.field.common.splc")),i=i||a.related_lists[0].message,e.component.setData({cxPropErrorMessage:i,cxPropErrorZcqaSuffix:"_name_Error",cxPropField:{api_name:o.api_name}})}}))):a||e.component.setData({cxPropErrorMessage:I18n.getMsg("crm.mb.field.common.empt"),cxPropErrorZcqaSuffix:"_name_Error",cxPropField:{api_name:o.api_name}})},getAllChildRecords:function(){this.setData("relatedListData",[]),this.getRelatedListMeta()},openUrlInNewTab:function(e){networkUtils.openUrl(e.href,"_blank")}},{mixins:["crm-detail-view-utils","crm-view-utils","crm-image-mixin","crm-related-list-utils","crm-detailview-common-utils"]}),Lyte.Component.registerHelper("pageSelectedRecords",(function(e,t,a,i){var o=t.length;if(0===o)return!1;for(var s=0;s<o;s++){if(-1===e.indexOf(t[s].id)&&!i)return!1;if(i&&"SERIESPERSONALITY"===i.personality_name&&-1===e.indexOf(t[s].Cadencesid__s.id)&&!Lyte.Component.registeredHelpers.ltpropDisableAdded(t[s])||!a)return!1}return!0})),Lyte.Component.registerHelper("getMultiSelectRecord",(function(e,t,a){var i=t.split(".");return i.length>1?e[i[0]]?e[i[0]][i[1]]:void 0:a.mxnfield?e[store.peekRecord("field",a.mxnfield).multiselectlookup.connectedlookup_apiname]?e[store.peekRecord("field",a.mxnfield).multiselectlookup.connectedlookup_apiname][t]:void 0:e[t]})),Lyte.Component.registerHelper("showLookup",(function(e,t,a){return!!t&&("multiselectlookup"==a.type?!(!e.split(".")[1]||!t.contains(e.split(".")[1])):t.contains(e))})),Lyte.Component.registerHelper("getContactRole",(function(e,t){if(e&&t&&t.length){var a=t.filter((function(t){return t.id==e}));if(a.length)return a[0].display_value}return""})),Lyte.Component.registerHelper("getInvitedEventStatus",(function(e,t){var a;if(e.$send_notification)switch(e.Participants.filter((function(e){return e.participant==t.id}))[0].status){case"yes":a='<em class="greenDisc vaM mR5 mT0"></em>'+I18n.getMsg("crm.event.participants.accepted");break;case"no":a='<em class="redDisc vaM mR5 mT0"></em>'+I18n.getMsg("crm.label.event.invitation.decline");break;case"maybe":a='<em class="orangeDisc vaM mR5 mT0"></em>'+I18n.getMsg("crm.label.event.invitation.may.be");break;case"not_known":a='<em class="noreplyDisc vaM mR5 mT0"></em>'+I18n.getMsg("crm.label.event.invitation.sent")}else a='<em class="noreplyDisc vaM mR5 mT0"></em>'+I18n.getMsg("crm.label.event.invitation.not.sent");return a})),Lyte.Component.registerHelper("isRecordApproved",(function(e,t){return t&&"multiselectlookup"===t.type&&(e=e[store.peekRecord("field",t.mxnfield).multiselectlookup.connectedlookup_apiname]),!(!e||void 0!==e.$approval)||!(!e||!1===e.$approved&&!1===e.$approval.resubmit||!e.$approval.resubmit&&"approved"!==e.$approval_state&&"review_process_pending"!==e.$approval_state&&"review_process_rejected"!==e.$approval_state&&"merge_pending"!==e.$approval_state&&!e.$review||"Rejected"===e.$review)})),Lyte.Component.registerHelper("getInvitedEventDate",(function(e){var t=e.Start_DateTime;if((p=e.End_DateTime)&&p.match("T")){p=p.replace(/[+-]\d{2}:\d{2}/,"");var a=new Date(p),i=(p=p.split("T"))[1]?p[1].split(":"):"";i&&(a.setHours(i[0]),a.setMinutes(i[1]));var o=Utils.getDateTimeInUserFormat(a,!0),s=o.slice(0,3);p=o.replace(s,I18n.getMsg(s))}var l=Crm.userDetails.DATE_PATTERN.toUpperCase(),r=Crm.userDetails.TIME_FORMAT;if((t.indexOf("AM")>1||t.indexOf("PM")>1||Crm.userDetails.isRelatedListLyteEnabled)&&(r=r.replace("a","A")),l+=" "+r,Crm.userDetails.isRelatedListLyteEnabled){t=$L.moment(t,l,{i18n:!0}).getDObj(),p=$L.moment(p,l,{i18n:!0}).getDObj();["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].forEach((function(e){_lyteUiUtils.updateI18n(e,I18n.getMsg(e))}))}else t=$L.moment(t,l).getDObj(),p=$L.moment(p,l).getDObj();var n=Crm.userDetails.DATE_PATTERN.toUpperCase();if(t.getFullYear()==p.getFullYear()){if(t.getMonth()==p.getMonth()&&t.getDate()==p.getDate()){if(t.getFullYear()!=(new Date).getFullYear()){var d=Utils.convertDateToGivenPattern("DD, M dd yy",t);return(t=(d=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(d,"dddd, MMM DD YYYY").i18N(n):d)+" "+Utils.getTimeInUserFormat(t,!0))+" - "+(p=Utils.getTimeInUserFormat(p,!0))}var p;d=Utils.convertDateToGivenPattern("DD, M dd",t);return(t=(d=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(d,"dddd, MMM DD").i18N(n):d)+" "+Utils.getTimeInUserFormat(t,!0))+" - "+(p=Utils.getTimeInUserFormat(p,!0))}if(t.getFullYear()!=(new Date).getFullYear()){d=Utils.convertDateToGivenPattern("DD, M dd yy",t);t=(d=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(d,"dddd, MMM DD YYYY").i18N(n):d)+" "+Utils.getTimeInUserFormat(t,!0);var c=Utils.convertDateToGivenPattern("DD, M dd yy",p);return p=(c=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(c,"dddd, MMM DD YYYY").i18N(n):c)+" "+Utils.getTimeInUserFormat(p,!0),t+" "+I18n.getMsg("crm.label.until")+" "+p}d=Utils.convertDateToGivenPattern("DD, M dd",t);t=(d=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(d,"dddd, MMM DD").i18N(n):d)+" "+Utils.getTimeInUserFormat(t,!0);c=Utils.convertDateToGivenPattern("DD, M dd",p);return p=(c=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(c,"dddd, MMM DD").i18N(n):c)+" "+Utils.getTimeInUserFormat(p,!0),t+" "+I18n.getMsg("crm.label.until")+" "+p}d=Utils.convertDateToGivenPattern("DD, M dd yy",t);t=(d=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(d,"dddd, MMM DD YYYY").i18N(n):d)+" "+Utils.getTimeInUserFormat(t,!0);c=Utils.convertDateToGivenPattern("DD, M dd yy",p);return p=(c=Crm.userDetails.isRelatedListLyteEnabled?$L.moment(c,"dddd, MMM DD YYYY").i18N(n):c)+" "+Utils.getTimeInUserFormat(p,!0),t+" "+I18n.getMsg("crm.label.until")+" "+p})),Lyte.Component.registerHelper("showEdit",(function(){return"team_based"!==moduleRecordMapping[this.getData("module")].access_type&&void 0!==Crm.userDetails.permissions.Crm_Implied_Create_Attachments&&!0===Crm.userDetails.permissions.Crm_Implied_Create_Attachments||void 0===Crm.userDetails.permissions["Crm_Implied_Create_Attachments_"+this.getData("module")]&&!0===Crm.userDetails.permissions["Crm_Implied_Create_Attachments_"+this.getData("module")]?"":"dN"})),Lyte.Component.registerHelper("ltpropDisableAdded",(function(e){return!(!e||null===e.End_Date__s&&null===e.Unenrolled_Date__s)||!Crm.userDetails.permissions.Crm_Implied_Manage_UnEnroll_Series})),Lyte.Component.registerHelper("getNestedObjValue",(function(e,t){var a=t.split("."),i=e;return a.forEach((function(e){i&&(i=i[e])})),i})),Lyte.Component.registerHelper("checkLinkFromWorkDrive",(function(e){let t=networkUtils.getDomainNameFromUrl(e),a=t?t.split("."):[];const i=["zoho","zohocloud","localzoho","localzohopublic"],o="workdrive";return!(3!==a.length||a[0]!==o||!i.includes(a[1])||!["com","eu","in","us","jp","ca","sa"].includes(a[2]))||(4===a.length&&a[0]===o&&"csez"===a[1]&&"zohocorpin"===a[2]&&"com"===a[3]||!(4!==a.length||a[0]!==o||!i.includes(a[1])||"com"!==a[2]||!["au","cn"].includes(a[3])))}));
