Lyte.Component.register("crux-dropdown",{_template:'<template tag-name="crux-dropdown" onclick="{{action(\'renderDropDown\',event)}}"> <template is="if" value="{{showFieldsDropdown}}"><template case="true"> <lyte-dropdown id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-body="{{cxPropAriaBody}}" lt-prop-aria-button="{{cxPropAriaButton}}" lt-prop-aria-box="{{cxPropAriaBox}}" class="cxBoxDropdown {{cxPropClass}} {{if(cxPropIsDropdownIconNode,\'cxDropdownIconNodePresent\',\'\')}}" lt-prop-disable-item-tooltip="{{cxPropDisableItemTooltip}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{cxPropTitle}}" lt-prop-focus="{{dropdownFocus}}" lt-prop-scope="{{cxPropScope}}" lt-prop-max-count="{{cxPropMaxCount}}" lt-prop-tooltip="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-freeze="{{cxPropFreeze}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-type="{{cxPropType}}" lt-prop-remove-multiple="{{cxPropRemoveMultiple}}" lt-prop-tabindex="{{cxPropTabindex}}" lt-prop-icon-class="{{cxPropIconClass}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-disabled-list="{{cxPropDisabledList}}" lt-prop-selected="{{cxPropSelected}}" lt-prop-display-value="{{cxPropDisplayValue}}" lt-prop-options="{{cxPropOptions}}" lt-prop-selected-list="{{\'cxPropSelectedList\'}}" lt-prop-user-value="{{cxPropUserValue}}" lt-prop-system-value="{{cxPropSystemValue}}" on-option-selected="{{method(\'optionSelect\')}}" on-show="{{method(\'dropBoxOpen\')}}" on-before-add="{{method(\'beforeAddDropItem\')}}" on-add="{{method(\'addDropItem\')}}" on-hide="{{method(\'hideDropbox\')}}" on-before-hide="{{method(\'beforeHideDropbox\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-remove="{{method(\'beforeRemoveDropItem\')}}" on-change="{{method(\'onOptionChange\')}}" on-remove="{{method(\'removeDropItem\')}}" on-scroll="{{method(\'scrollDropBox\')}}" lt-prop-box-button-width="{{cxPropBoxButtonWidth}}" lt-prop-position="{{cxPropPosition}}" before-select="{{method(\'onBeforeSelect\')}}" lt-prop-prevent-parent-scroll="{{cxPropPreventParentScroll}}" lt-prop-no-result=""> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="DropButtons {{if(cxPropIsDropdownIconNode,\'ltDropdownIconNodePresent, \')}} {{cxPropButtonClass}}" data-zcqa="{{cxPropZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'||\',expHandlers(cxPropType,\'==\',\'multi\'))}}"><template case="true"><template is="if" value="{{expHandlers(cxPropSelected,\'||\',cxPropDisplayValue)}}"><template case="true"> <span class="cxSelectWrapper"> <lyte-text class="lyteDropdownLabel lyteMarginRight" lt-prop-value="{{selectValue}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}"> </lyte-text> <template is="if" value="{{cruxAnd(selectedOption,selectedOption[cxPropIconValue])}}"><template case="true"><span class="cxDBYeildClass {{selectedOption[cxPropIconValue]}}"></span></template></template> </span> </template><template case="false"> <span class="lyteDropPlaceholderNormal"><lyte-text lt-prop-value="{{cxPropPlaceholder}}"></lyte-text></span> </template></template> <template is="if" value="{{cruxAnd(cxPropShowRemoveIcon,cxPropSelected,expHandlers(cxPropDisabled,\'!\'))}}"><template case="true"><div class="cxBoxCloseIcon" onclick="{{action(\'clearSelection\')}}" data-zcqa="cxClearSelectionZcqa"></div></template></template> <lyte-icon class="{{if(cxPropIsDropdownIconNode,cxPropIconClass,\'dropdown\')}}"></lyte-icon> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'multisearch\'),\'||\',expHandlers(cxPropSelected,\'&amp;&amp;\',expHandlers(cxPropSelected,\'!==\',\'[]\')))}}"><template case="true"> <ul class="lyteMultipleSelect"> <template is="for" items="{{displayValue}}" item="item" index="index"> <li data-value="{{item[cxPropSystemValue]}}" class="{{item.class}}"> <lyte-text class="lyteDropdownVisible" lt-prop-value="{{item[cxPropUserValue]}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}"> </lyte-text> <template is="if" value="{{item[cxPropIconValue]}}"><template case="true"><span class="{{item[cxPropIconValue]}}"></span></template></template> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'multisearch\')}}"><template case="true"> <li class="lyteMultiselectInput cxlyteMultiselectInput"> <lyte-input class=" " lt-prop-class="lyteInput" lt-prop-placeholder="{{cxPropSearchplaceholder}}" on-value-change="{{method(\'onOptionSearch\')}}"></lyte-input> </li> </template></template> </ul> </template></template> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'multiple\'),\'&amp;&amp;\',expHandlers(expHandlers(cxPropForcePlaceholder,\'||\',expHandlers(cxPropSelected,\'!\')),\'||\',expHandlers(cxPropSelected,\'==\',\'[]\')))}}"><template case="true"> <span class="lyteDropPlaceholderNormal"><lyte-text lt-prop-value="{{cxPropPlaceholder}}"></lyte-text></span> </template></template> </template></template> </lyte-drop-button> <lyte-drop-box class="cxDropbox {{cxPropBoxClass}} {{if(expHandlers(cxPropShowInfoIconOnHover,\'!\'),\'cxShowDropdownInfoIcon\')}}" data-zcqa="dropbox_{{cxPropZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(optGroup,\'===\',true),\'&amp;&amp;\',expHandlers(optArr.length,\'>\',cxPropMaxsearch)),\'||\',expHandlers(expHandlers(expHandlers(cxPropOptions.length,\'>=\',cxPropMaxsearch),\'&amp;&amp;\',expHandlers(cxPropType,\'!=\',\'multisearch\')),\'&amp;&amp;\',expHandlers(optGroup,\'!==\',true)))}}"><template case="true"> <lyte-input data-zcqa="search_{{cxPropZcqa}}" lt-prop-focus="true" lt-prop-type="search" class="" lt-prop-placeholder="{{cxPropSearchplaceholder}}" on-value-change="{{method(\'onOptionSearch\')}}" lt-prop-close-icon="true" on-clear="{{method(\'setScroll\')}}" lt-prop-maxlength="{{cxPropSearchMaxLength}}"></lyte-input> </template></template> <lyte-drop-body class="dropBody"> <template is="for" items="{{localData}}" item="value" index="index"> <template is="if" value="{{expHandlers(cxPropCheckKey(value),\'&amp;&amp;\',expHandlers(expHandlers(optGroup,\'!\'),\'||\',expHandlers(optGroup,\'&amp;&amp;\',value.render)))}}"><template case="true"> <lyte-drop-item class="{{value.cxPropClass}} {{if(expHandlers(cxPropIsDisabledValue(value[cxPropSystemValue]),\'===\',true),\'lyteDropdown-disabled\',\'\')}} {{if(expHandlers(value[cxPropSystemValue],\'==\',selectionValue),\'lyteDropdownSelection\',\'\')}}" data-zcqa="{{if(value[cxPropOptionZcqa],value[cxPropOptionZcqa],value[cxPropSystemValue])}}" data-value="{{value[cxPropSystemValue]}}" lt-prop-title="{{value[cxPropTooltipValue]}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" onmouseenter="{{action(\'dropItemHover\',true,this,value)}}" onmouseleave="{{action(\'dropItemHover\',false,this,value)}}"> <div class="cxDropItemWrapper"> <div class="cxDropItemYield"> <lyte-text lt-prop-yield="true" lt-prop-value="{{if(cruxOr(value.cxPropDisableTooltip,cruxAnd(cxPropIsDisabledValue(value[cxPropSystemValue]),value[cxPropDisabledTooltipValue])),\'\',if(value[cxPropTooltipValue],value[cxPropTooltipValue],value[cxPropUserValue]))}}"> <template is="registerYield" yield-name="lyte-text"> {{value[cxPropUserValue]}} </template> </lyte-text> <template is="if" value="{{cruxAnd(cxPropIconValue,value[cxPropIconValue])}}"><template case="true"><span class="cxDBYeildClass {{value[cxPropIconValue]}}"></span></template></template> </div> <template is="if" value="{{cruxOr(value[cxPropInfoValue],value.cxPropInfoTooltip)}}"><template case="true"><span id="{{if(cxPropId,concat(cxPropId,\'_\',value[cxPropSystemValue]),value[cxPropSystemValue])}}" class="cxSprite cxInfoIcon" lt-prop-title="{{if(value[cxPropInfoValue],value[cxPropInfoValue],\'\')}}" lt-prop-tooltip-class="{{cxPropInfoTooltipClass}}" onmouseenter="{{action(\'infoShow\',this,value[cxPropSystemValue],true,this,value[cxPropSystemValue])}}" onmouseleave="{{action(\'infoShow\',this,value[cxPropSystemValue],false,this,value[cxPropSystemValue])}}"></span></template></template> </div> </lyte-drop-item> </template><template case="false"><template is="if" value="{{expHandlers(optGroup,\'&amp;&amp;\',expHandlers(cxPropCheckKey(value),\'!\'))}}"><template case="true"> <template is="forIn" object="{{value}}" value="optArray" key="key"> <lyte-drop-group label="{{key}}"> <template is="for" items="{{optArray}}" item="optValue" index="index"> <lyte-drop-item class="{{optValue.cxPropClass}} {{if(expHandlers(cxPropIsDisabledValue(optValue[cxPropSystemValue]),\'===\',true),\'lyteDropdown-disabled\',\'\')}} {{if(expHandlers(optValue[cxPropSystemValue],\'==\',selectionValue),\'lyteDropdownSelection\',\'\')}}" data-zcqa="{{if(optValue[cxPropOptionZcqa],optValue[cxPropOptionZcqa],optValue[cxPropSystemValue])}}" data-value="{{optValue[cxPropSystemValue]}}" lt-prop-title="{{value[cxPropTooltipValue]}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" onmouseenter="{{action(\'dropItemHover\',true,this,optValue)}}" onmouseleave="{{action(\'dropItemHover\',false,this,optValue)}}"> <div class="cxDropItemWrapper"> <div class="cxDropItemYield"> <lyte-text lt-prop-yield="true" lt-prop-value="{{if(cruxOr(optValue.cxPropDisableTooltip,cruxAnd(cxPropIsDisabledValue(optValue[cxPropSystemValue]),optValue[cxPropDisabledTooltipValue])),\'\',if(optValue[cxPropTooltipValue],optValue[cxPropTooltipValue],optValue[cxPropUserValue]))}}"> <template is="registerYield" yield-name="lyte-text"> {{optValue[cxPropUserValue]}} </template> </lyte-text> <template is="if" value="{{cruxAnd(cxPropIconValue,value[cxPropIconValue])}}"><template case="true"><span class="cxDBYeildClass {{value[cxPropIconValue]}}"></span></template></template> </div> <template is="if" value="{{cruxOr(value[cxPropInfoValue],value.cxPropInfoTooltip)}}"><template case="true"><span id="{{if(cxPropId,concat(cxPropId,\'_\',value[cxPropSystemValue]),value[cxPropSystemValue])}}" class="cxSprite cxInfoIcon" lt-prop-title="{{if(value[cxPropInfoValue],value[cxPropInfoValue],\'\')}}" lt-prop-tooltip-class="{{cxPropInfoTooltipClass}}" onmouseenter="{{action(\'infoShow\',this,value[cxPropSystemValue],true)}}" onmouseleave="{{action(\'infoShow\',this,value[cxPropSystemValue],false)}}"></span></template></template> </div> </lyte-drop-item> </template> </lyte-drop-group> </template> </template></template></template></template> </template> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxFlexCenter"> <span class="cxElementsLoaderBg"></span> </div> </template><template case="false"><template is="if" value="{{noResult}}"><template case="true"> <div class="cxDropdownNoResult"> <template is="if" value="{{searchPerformed}}"><template case="true"> {{cxPropSearchNoResultMessage}} </template><template case="false"> {{cxPropNoResultMessage}} </template></template> </div> </template></template></template></template> </lyte-drop-body> <template is="if" value="{{cxPropFooterYield}}"><template case="true"><lyte-drop-footer> <lyte-yield yield-name="footer"></lyte-yield> </lyte-drop-footer></template></template> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{cruxAnd(cxPropDisabledList,cxPropDisabledList.length)}}"><template case="true"><lyte-hovercard lt-prop-origin-elem="{{disabledHcDetails.originElem}}" lt-prop-show="{{disabledHcDetails.show}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content> <template is="if" value="{{disabledHcDetails.hasTooltip}}"><template case="true"><div>{{disabledHcDetails.option[cxPropUserValue]}}</div></template></template> <template is="if" value="{{disabledHcDetails.hasTooltip}}"><template case="true"><div>alert message</div></template></template> <div>{{disabledHcDetails.option[cxPropDisabledTooltipValue]}}</div> </lyte-hovercard-content> </template> </lyte-hovercard></template></template> </template><template case="false"> <div class="cxFakeDummyEventContainer" tabindex="{{if(expHandlers(cxPropDisabled,\'!\'),cxPropTabindex,expHandlers(1,\'-\'))}}" onclick="{{action(\'renderDropDown\',event)}}" onkeydown="{{action(\'renderDropDown\',event)}}" onfocus="{{action(\'renderDropDown\',event)}}" onmouseover="{{action(\'renderDropDown\',event)}}" lt-prop-title="{{cxPropTitle}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" data-tabindex="{{cxPropDataTabindex}}"> <div id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" class="cxFakeDropButton {{cxPropButtonClass}}" data-zcqa="{{cxPropZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'||\',expHandlers(cxPropType,\'==\',\'multi\'))}}"><template case="true"><template is="if" value="{{expHandlers(cxPropSelected,\'||\',cxPropDisplayValue)}}"><template case="true"> <span class="cxSelectWrapper"> <lyte-text class="cxFakeDropdownLabel" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-value="{{selectValue}}"> </lyte-text> <template is="if" value="{{cruxAnd(selectedOption,selectedOption[cxPropIconValue])}}"><template case="true"><span class="cxDBYeildClass {{selectedOption[cxPropIconValue]}}"></span></template></template> </span> </template><template case="false"> <div class="cxFakeDropPlaceholderNormal">{{cxPropPlaceholder}}</div> </template></template> <template is="if" value="{{cruxAnd(cxPropShowRemoveIcon,cxPropSelected,expHandlers(cxPropDisabled,\'!\'))}}"><template case="true"><div class="cxBoxCloseIcon" onclick="{{action(\'clearSelection\')}}" data-zcqa="cxClearSelectionZcqa"></div></template></template> <lyte-icon class="{{if(cxPropIsDropdownIconNode,cxPropIconClass,\'dropdown\')}}"></lyte-icon> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'multisearch\'),\'||\',expHandlers(cxPropSelected,\'&amp;&amp;\',expHandlers(cxPropSelected,\'!==\',\'[]\')))}}"><template case="true"> <ul class="cxFakeMultipleSelect"> <template is="for" items="{{displayValue}}" item="item" index="index"> <li class="cxFakeMultipleSelectLi {{item.class}}"> <lyte-text class="cxFakeDropdownVisible" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-value="{{item[cxPropUserValue]}}"> </lyte-text> <template is="if" value="{{item[cxPropIconValue]}}"><template case="true"><span class="{{item[cxPropIconValue]}}"></span></template></template> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'multisearch\')}}"><template case="true"> <li class="cxFakeMultipleSelectLi cxFakeMultipleSelectInput"> <input placeholder="{{cxPropSearchplaceholder}}"> </li> </template></template> </ul> </template></template> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'multiple\'),\'&amp;&amp;\',expHandlers(expHandlers(cxPropForcePlaceholder,\'||\',expHandlers(cxPropSelected,\'!\')),\'||\',expHandlers(cxPropSelected,\'==\',\'[]\')))}}"><template case="true"> <div class="cxFakeDropPlaceholderNormal">{{cxPropPlaceholder}}</div> </template></template> </template></template> </div> </div> </template></template> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" data-zcqa="{{cruxConcat(cxPropErrorZcqaPrefix,cxPropErrorZcqa,cxPropErrorZcqaSuffix)}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[4]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1,5]}]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"for",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"registerYield",position:[1,1,1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"if",position:[1,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"forIn",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"registerYield",position:[1,1,1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"if",position:[1,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}}]},{type:"attr",position:[3,3,3]},{type:"if",position:[3,3,3],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0,1]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"text",position:[1,5,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[4]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1,5]}]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["cxPropErrorOnHovercard","cxPropId","cxPropOptions","localData","cxPropLimit","cxPropSearchplaceholder","cxPropPlaceholder","noResult","cxPropType","cxPropMaxsearch","cxPropTrimSearch","cxPropUserValue","cxPropSystemValue","cxPropTooltipValue","cxPropRemoveMultiple","cxPropTabindex","cxPropIconClass","cxPropDisabled","cxPropSelected","cxPropDisabledList","cxPropDisplayValue","cxPropClass","displayValue","selectValue","initialValue","cxPropZcqa","showFieldsDropdown","cxPropMandatory","optArr","optGroup","cxPropBoxButtonWidth","cxPropNoResultMessage","cxPropSearchNoResultMessage","searchPerformed","cxPropErrorMessage","isError","isNoOptSelected","cxPropErrorZcqaPrefix","cxPropPosition","cxPropErrorZcqa","cxPropErrorZcqaSuffix","cxPropOptionZcqa","cxPropFreeze","cxPropPreventParentScroll","preventSelectedObs","cxPropTooltip","cxPropTitle","cxPropTooltipConfig","cxPropTooltipClass","cxPropSearchMaxLength","dropClassList","cxPropBoxClass","cxPropMaxCount","showLoading","selectionValue","cxPropErrorYield","cxPropErrorClass","cxPropErrorSpanClass","cxPropScope","cxPropClearErrorMessage","dropdownFocus","cxPropSelectedList","cxPropHasMoreOptions","cxPropDisableItemTooltip","cxPropIsDropdownIconNode","cxPropFooterYield","cxPropId","cxPropAria","cxPropAriaButton","cxPropAriaBox","cxPropAriaBody","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropExternalSearch","cxPropInfoValue","cxPropShowInfoIconOnHover","cxPropInfoTooltipClass","cxPropForcePlaceholder","cxPropIconValue","selectedOption","cxPropAriaErrorProperties","cxPropShowRemoveIcon","cxPropButtonClass","cxPropDisabledTooltipValue","disabledHcDetails"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:""}),cxPropOptions:Lyte.attr("array",{default:[]}),localData:Lyte.attr("array",{default:[]}),cxPropLimit:Lyte.attr("number",{default:50}),cxPropSearchplaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.globalsearch.search.title")}),cxPropPlaceholder:Lyte.attr("string"),noResult:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"single"}),cxPropMaxsearch:Lyte.attr("number",{default:10}),cxPropTrimSearch:Lyte.attr("boolean",{default:!0}),cxPropUserValue:Lyte.attr("string",{default:"name"}),cxPropSystemValue:Lyte.attr("string",{default:"value"}),cxPropTooltipValue:Lyte.attr("string"),cxPropRemoveMultiple:Lyte.attr("boolean",{default:!1}),cxPropTabindex:Lyte.attr("number",{default:0}),cxPropIconClass:Lyte.attr("string",{default:""}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropSelected:Lyte.attr("string"),cxPropDisabledList:Lyte.attr("array",{default:[]}),cxPropDisplayValue:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),displayValue:Lyte.attr("array",{default:[]}),selectValue:Lyte.attr("string"),initialValue:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),showFieldsDropdown:Lyte.attr("boolean",{default:!1}),cxPropMandatory:Lyte.attr("boolean",{default:!1}),optArr:Lyte.attr("array",{default:[]}),optGroup:Lyte.attr("boolean",{default:!1}),cxPropBoxButtonWidth:Lyte.attr("string",{default:"min-button"}),cxPropNoResultMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.no.results.match")}),cxPropSearchNoResultMessage:Lyte.attr("string"),searchPerformed:Lyte.attr("boolean",{default:!1}),cxPropErrorMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.orchestration.error.selectvalue")}),isError:Lyte.attr("boolean",{default:!1}),isNoOptSelected:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string"),cxPropPosition:Lyte.attr("string",{default:"down"}),cxPropErrorZcqa:Lyte.attr("string"),cxPropErrorZcqaSuffix:Lyte.attr("string"),cxPropOptionZcqa:Lyte.attr("string"),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropPreventParentScroll:Lyte.attr("boolean",{default:!1}),preventSelectedObs:Lyte.attr("boolean",{default:!1}),cxPropTooltip:Lyte.attr("object",{default:{position:"bottom",appearance:"box",margin:5,keeptooltip:!0}}),cxPropTitle:Lyte.attr("string"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropSearchMaxLength:Lyte.attr("number",{default:50}),dropClassList:Lyte.attr("string",{default:""}),cxPropBoxClass:Lyte.attr("string",{default:""}),cxPropMaxCount:Lyte.attr("number"),showLoading:Lyte.attr("boolean",{default:!1}),selectionValue:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean"),cxPropErrorClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropScope:Lyte.attr("string"),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!1}),dropdownFocus:Lyte.attr("boolean",{default:!1}),cxPropSelectedList:Lyte.attr("array",{default:[]}),cxPropHasMoreOptions:Lyte.attr("boolean",{default:!1}),cxPropDisableItemTooltip:Lyte.attr("boolean",{default:!1}),cxPropIsDropdownIconNode:Lyte.attr("boolean",{default:!1}),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaButton:Lyte.attr("object",{default:{}}),cxPropAriaBox:Lyte.attr("object",{default:{}}),cxPropAriaBody:Lyte.attr("object",{default:{}}),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropExternalSearch:Lyte.attr("boolean",{default:!1}),cxPropInfoValue:Lyte.attr("string"),cxPropShowInfoIconOnHover:Lyte.attr("boolean",{default:!0}),cxPropInfoTooltipClass:Lyte.attr("string",{default:"HEYY"}),cxPropForcePlaceholder:Lyte.attr("boolean",{default:!1}),cxPropIconValue:Lyte.attr("string"),selectedOption:Lyte.attr("object"),cxPropAriaErrorProperties:Lyte.attr("object"),cxPropShowRemoveIcon:Lyte.attr("boolean"),cxPropButtonClass:Lyte.attr("string"),cxPropDisabledTooltipValue:Lyte.attr("string"),disabledHcDetails:Lyte.attr("object")}},focus:function(){this.$node.querySelector("lyte-dropdown")?this.$node.querySelector("lyte-dropdown").querySelector(".lyteDummyEventContainer").focus():this.$node.querySelector(".cxFakeDummyEventContainer").focus()},formatOptionsForOpt:function(e){var t=this.getData("cxPropUserValue"),o=[];if("multi"==this.getData("cxPropType"))for(var a=0;a<e.length;a++)if(null!=e[a][t])e[a].render=!0,o.push(e[a]);else{var r=Object.keys(e[a])[0];o.push(e[a]);for(var i=0;i<e[a][r].length;i++)o.push(e[a][r][i])}else for(a=0;a<e.length;a++){r=Object.keys(e[a])[0];o.push(e[a]);for(i=0;i<e[a][r].length;i++)o.push(e[a][r][i])}return o},optTotalCount:function(e,t){var o=this.formatOptionsForOpt(e);if(this.setData("optGroup",!0),"search"!=t){var a=this.getData("cxPropLimit");t=this.getData("cxPropType");if(this.setData("optArr",o),o.length<a)this.calculateDropItems(0,o.length);else if(this.data.cxPropSelected&&"single"==t){var r=o.cruxFindIndexOfObject(this.data.cxPropSystemValue,this.data.cxPropSelected);r>a?this.calculateDropItems(r-25,a,!0):this.calculateDropItems(0,a)}else this.calculateDropItems(0,a)}else this.setData("localData",o),this.setData("currentPos",this.getData("localData").length)},scrollBox:function(e,t){if(this.ignoreScroll)this.ignoreScroll=!1;else{var o=e.target,a=this.getData("optGroup");clearTimeout(this.timeout1),this.timeout1=setTimeout(function(){var e;if(e="multisearch"!=this.getData("cxPropType")?t.childComp.querySelector("lyte-input"):t.$node.querySelector("lyte-input"),o.scrollHeight-10<=Math.ceil(o.offsetHeight)+Math.ceil(o.scrollTop)){var r=!(!e||!e.getData("ltPropValue"));(!r||this.getData("cxPropHasMoreOptions")&&!this.getData("showLoading"))&&(1==a?this.renderScroll("opt",r):this.renderScroll("single",r))}}.bind(this),10)}},renderScroll:function(e,t){var o,a=this.getData("localData").length;if(o="opt"!=e?this.getData("cxPropOptions").length:this.getData("optArr").length,t||a==o){if(this.getData("cxPropHasMoreOptions")&&this.callbackResolved&&this.getMethods("onScrollFetchMoreOptions")){this.data.searchPerformed?++this.searchParam.page:++this.scrollParam.page;var r=Object.assign({},this.data.searchPerformed?this.searchParam:this.scrollParam),i=this.executeMethod("onScrollFetchMoreOptions",r);this.callbackResolved=!1,this.setData("showLoading",!0);var s=this;l=this.getData("cxPropLimit");i instanceof Promise&&i.then((function(r){r&&r.length>0&&(s.preventOptionsObs=!0,t?Lyte.arrayUtils(s.getData("localData"),"push",r):(Lyte.arrayUtils(s.getData("cxPropOptions"),"push",r),"opt"!=e?o=s.getData("cxPropOptions").length:(Lyte.arrayUtils(s.getData("optArr"),"push",s.formatOptionsForOpt(r)),o=s.getData("optArr").length),s.preventOptionsObs=!1,p=o-a<l?o-a:l,s.calculateDropItems(a,p)))})).catch((function(){s.previousHasMoreOptions=this.getData("cxPropHasMoreOptions"),s.getData("cxPropHasMoreOptions",!1)})).finally((function(){s.setData("showLoading",!1),s.callbackResolved=!0}))}}else{var p,l=this.getData("cxPropLimit");p=o-a<l?o-a:l,this.calculateDropItems(a,p)}},resetValues:function(){var e,t=this.getData("cxPropSelected"),o=this.getData("cxPropDisplayValue"),a=this.getData("cxPropDisabledList"),r=this.getData("cxPropType");this.setData("preventSelectedObs",!0),t&&(this.setData("preventSelectedObs",!0),("multiple"===r||"multisearch"===r)&&this.getData("cxPropSelectedList")&&this.getData("cxPropSelectedList").length>0&&(e=Array.from(this.getData("cxPropSelectedList")),this.setData("cxPropSelectedList",e)),this.setData("cxPropSelected",""),this.setData("cxPropSelected",t),this.setData("preventSelectedObs",!1),this.preventDisplayObs=!0,this.setData("cxPropDisplayValue",""),this.setData("cxPropDisplayValue",o),this.preventDisplayObs=!1),this.$node.querySelector("lyte-dropdown")&&(this.$node.querySelector("lyte-dropdown").component.setData("ltPropDisabledList",[]),this.$node.querySelector("lyte-dropdown").component.setData("ltPropDisabledList",a)),this.setData("preventSelectedObs",!1)},calculateDropItems:function(e,t,o,a){var r=this.getData("cxPropSelected"),i=this.getData("optGroup"),s=this.getData("cxPropLimit"),p=(this.getData("cxPropSystemValue"),this.getData("cxPropType")),l=[],n=0;t=e+t,null!=r&&r.match(/]/)?(r=JSON.parse(r)).constructor==Object&&(r=r[0]):r=[];if(!0!==i){var c=this.getData("cxPropOptions");if("single"===p||"multi"===p){!0;for(var d=e;d<t&&void 0!==c[d];d++)n<s&&l.push(c[d]),n++}else if(!1,0!=e||this.checkIfSelectedEmpty())for(d=e;d<t&&void 0!==c[d];d++)l.push(c[d]),n++;else{var u=0,d=0,x=this.getData("cxPropSystemValue");for(r=Array.isArray(JSON.parse(this.getData("cxPropSelected")))?JSON.parse(this.getData("cxPropSelected")):[];!(u>=10&&n==s)&&d<c.length&&void 0!==c[d];)l.push(c[d]),r.includes(c[d][x])||++u,n++,++d;t=n}}else for(var m=this.getData("optArr"),y=e;y<t;y++)null!=m[y]&&n<s&&("string"!=typeof m[y]?n++:t++,l.push(m[y]));0!=e&&!o||a?a?(this.setData("topPosition",e),Lyte.arrayUtils(this.data.localData,"unshift",l)):(Lyte.arrayUtils(this.getData("localData"),"push",l),this.setData("currentPos",t)):(this.setData("topPosition",e),this.setData("localData",l),this.setData("currentPos",t)),this.resetValues()},checkSelectedValue:function(e,t,o,a,r,i,s,p){if(this.setData("preventSelectedObs",!0),"single"==s||"multi"===s||this.getData("optGroup"))if(p)if("single"!==s&&"multi"!==s){for(m=JSON.parse(r),d=[],u=[],y=0;y<m.length;y++)for(h=0;h<e.length;h++){var l=e[h][Object.keys(e[h])[0]],n=l.cruxFindIndexOfObject(o,m[y]);if(-1!==n){u.push(l[n]),d.push(l[n][o]);break}}this.setData("cxPropSelected",""),this.setData("cxPropSelected",d),this.setData("cxPropSelectedList",u),this.setData("preventSelectedObs",!1),this.setData("displayValue",u)}else for(y=0;y<e.length;y++){c=Object.keys(e[y])[0];for(h=0;h<e[y][c].length;h++){if(void 0!==e[y][c][h][o]){if(e[y][c][h][o]==r){this.setData("cxPropSelected",""),this.setData("cxPropSelected",e[y][c][h][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",e[y][c][h][t]),this.setData("selectedOption",e[y][c][h]);break}}else if(e[y][o]===r){this.setData("cxPropSelected",""),this.setData("cxPropSelected",e[y][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",e[y][t]),this.setData("selectedOption",e[y]);break}}}else if("single"===s){for(y=0;y<e.length;y++)if(e[y][o]==r){this.setData("cxPropSelected",""),this.setData("selectValue",e[y][t]),this.setData("selectedOption",e[y]),this.setData("cxPropSelected",e[y][o]),this.setData("preventSelectedObs",!1);break}}else for(y=0;y<e.length;y++){if(void 0!==e[y][o]&&e[y][o]==r){this.setData("cxPropSelected",""),this.setData("selectValue",e[y][t]),this.setData("selectedOption",e[y]),this.setData("cxPropSelected",e[y][o]),this.setData("preventSelectedObs",!1);break}if(void 0===e[y][o]){var c=Object.keys(e[y])[0];for(h=0;h<e[y][c].length;h++)if(e[y][c][h][o]==r){this.setData("cxPropSelected",""),this.setData("selectValue",e[y][c][h][t]),this.setData("selectedOption",e[y][c][h]),this.setData("cxPropSelected",e[y][c][h][o]),this.setData("preventSelectedObs",!1);break}}}else{var d=[],u=[],x=(this.getData("cxPropHasMoreOptions"),this.getData("cxPropSelectedList"));if(x&&x.forEach((function(e){u.push(e),d.push(e[o])})),r)for(var m=JSON.parse(r),y=0;y<m.length;y++)for(var h=0;h<e.length;h++)if(m[y]==e[h][o]&&!d.includes(e[h][o])){u.push(e[h]),d.push(e[h][o]);break}this.setData("cxPropSelectedList",u),this.setData("cxPropSelected",""),this.setData("cxPropSelected",d),this.setData("preventSelectedObs",!1),this.setData("displayValue",Array.from(u))}},setSelectedData:function(){var e=this.getData("cxPropOptions"),t=this.getData("cxPropUserValue"),o=this.getData("cxPropSystemValue"),a=this.getData("cxPropDisplayValue"),r=this.getData("cxPropSelected"),i=this.getData("cxPropSelectedList"),s=this.getData("cxPropPlaceholder"),p=this.getData("cxPropType"),l=this.getData("optGroup");if(this.setData("preventSelectedObs",!0),(null!=r&&""!=r&&"{}"!=r||i&&i.length>0)&&!a)try{var n=JSON.parse(r);n.constructor==Object?(this.setData("selectValue",n[t]),this.setData("selectedOption",n),this.setData("cxPropSelected",n[o]),this.setData("preventSelectedObs",!1)):this.checkSelectedValue(e,t,o,a,r,s,p,l)}catch(i){this.checkSelectedValue(e,t,o,a,r,s,p,l)}else if(null!=s&&""!=s||null!=a&&""!=a||"single"!=p&&"multi"!=p)"undefined"!==a&&""!==a&&void 0!==a&&(this.setData("selectValue",a),this.setData("selectedOption",void 0));else{var c;if(null!=e&&"undefined"!=e&&0!==e.length)c=l&&"multi"===p&&e[0][t]||!l?e[0]:e[0][Object.keys(e[0])[0]][0],this.setData("selectValue",c[t]),this.setData("selectedOption",c),this.setData("cxPropSelected",c[o]),this.setData("preventSelectedObs",!1)}this.setData("preventSelectedObs",!1)},resetPosition:function(){this.getData("showFieldsDropdown")&&this.$node.querySelector("lyte-dropdown").resetPosition()},open:function(){this.getData("cxPropDisabled")||this.getData("showFieldsDropdown")||(this.populateDropItems(),this.setData("showFieldsDropdown",!0),this.addClassForDropdown()),this.$node.querySelector("lyte-dropdown").open()},toggle:function(){this.getData("cxPropDisabled")||this.getData("showFieldsDropdown")||(this.populateDropItems(),this.setData("showFieldsDropdown",!0),this.addClassForDropdown()),this.$node.querySelector("lyte-dropdown").toggle()},close:function(){this.getData("showFieldsDropdown")&&this.$node.querySelector("lyte-dropdown").close()},didDestroy:function(){this.lyteDropBody=null},init:function(){this.previousHasMoreOptions=this.getData("cxPropHasMoreOptions"),this.previousHasMoreOptions&&(this.searchParam={page:1},this.scrollParam={page:1}),this.preventOptionsObs=!1,this.callbackResolved=!0,this.getData("cxPropDisableItemTooltip")||this.getData("cxPropTooltipValue")||this.setData("cxPropTooltipValue",this.getData("cxPropUserValue")),this.getData("cxPropSearchNoResultMessage")||this.setData("cxPropSearchNoResultMessage",this.getData("cxPropNoResultMessage")),this.$node.focus=function(){return this.component.focus()};var e=this.getData("cxPropOptions");this.getData("cxPropType");e&&e.length>0&&this.checkIfOptGroup(e)&&this.setData("optGroup",!0),this.setSelectedData(),this.getData("cxPropMandatory")&&this.setData("dropClassList","mandatoryField")},checkIfOptGroup:function(e){if("multi"===this.getData("cxPropType"))return!0;if(e&&e[0]){let t=Object.keys(e[0]);return 1===t.length&&Array.isArray(e[0][t[0]])}},populateDropItems:function(){var e=this.getData("cxPropOptions"),t=this.getData("cxPropLimit");if(e&&e.length>0)if(this.getData("optGroup"))this.optTotalCount(e,"init");else if(e.length>t)if(this.data.cxPropSelected&&"single"==this.data.cxPropType){var o=e.cruxFindIndexOfObject(this.data.cxPropSystemValue,this.data.cxPropSelected);o>t?this.calculateDropItems(o-25,t,!0):this.calculateDropItems(0,t)}else this.calculateDropItems(0,t);else this.calculateDropItems(0,e.length);else this.setData("noResult",!0)},modifyDropdownClass:function(e,t){if(t){var o=this.getData("showFieldsDropdown")?$L("lyte-dropdown",this.$node):$L(".cxFakeDummyEventContainer",this.$node);e?o.addClass(t):o.removeClass(t)}},errorObserver:function(e){this.modifyDropdownClass(e.newValue,"cxErrorBox")}.observes("isError"),disabledObserver:function(e){e?this.modifyDropdownClass(e.newValue,"cxDropdownDisabled"):this.getData("cxPropDisabled")&&this.modifyDropdownClass(!0,"cxDropdownDisabled")}.observes("cxPropDisabled").on("didConnect"),didConnect:function(){this.addClassForDropdown()},classObserver:function(e){var t="";switch(e.item){case"cxPropClass":e.oldValue&&this.modifyDropdownClass(!1,e.oldValue),t=e.newValue;break;case"cxPropMandatory":t="mandatoryField";break;case"cxPropDisabled":t="cxDropdownDisabled";break;case"isError":t="cxErrorBox"}this.modifyDropdownClass("cxPropClass"===e.item||e.newValue,t)}.observes("cxPropClass","cxPropMandatory","cxPropDisabled","isError"),errorMessageObserver:function(){""!==this.getData("cxPropErrorMessage")?this.setData("isError",!0):this.setData("isError",!1)}.observes("cxPropErrorMessage"),validate:function(){return this.getData("cxPropMandatory")&&this.checkIfSelectedEmpty()?(this.setData("isError",!0),!1):(this.setData("isError",!1),!0)},arrObserver:function(){if(!this.preventOptionsObs){this.setData("preventSelectedObs",!0);var e=this.getData("cxPropType"),t=this.getData("cxPropOptions"),o=this.getData("cxPropSystemValue"),a=[],r=this.getData("cxPropSelected"),i=this.getData("cxPropLimit");if(null!=t){if(this.getData("showFieldsDropdown"))if(t.length<i?this.calculateDropItems(0,t.length):this.calculateDropItems(0,i),this.getData("cxPropOptions").length>0&&0!==this.getData("localData").length){this.setData("noResult",!1);t=this.getData("cxPropOptions");if(this.checkIfOptGroup(t)){if(this.setData("optGroup",!0),this.optTotalCount(t,"init"),r)for(var s=0;s<t.length;s++)if(null!=t[s][o])0===a.length&&(a=$L.search(t[s],o,r));else for(var p in t[s])if(0===a.length){a=$L.search(t[s][p],o,r)}}else if("single"===e){a=$L.search(t,o,r,"equals");i=this.getData("cxPropLimit");if(a.length>0&&!this.getData("cxPropDisplayValue")&&(this.setData("selectValue",a[0][this.getData("cxPropUserValue")]),this.setData("selectedOption",a[0])),t.length>i)if(this.data.cxPropSelected)(s=t.cruxFindIndexOfObject(this.data.cxPropSystemValue,this.data.cxPropSelected))>i?this.calculateDropItems(s-25,i,!0):this.calculateDropItems(0,i)}if(a.length<1&&!this.getData("cxPropPlaceholder")&&!this.getData("cxPropDisplayValue")&&"single"===e)if(void 0!==t[0][o])this.setData("cxPropSelected",t[0][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",t[0][this.getData("cxPropUserValue")]),this.setData("selectedOption",t[0]);else{p=Object.keys(t[0]);this.setData("cxPropSelected",t[0][p][0][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",t[0][p][0][this.getData("cxPropUserValue")]),this.setData("selectedOption",t[0][p][0])}else a.length>0&&!this.getData("cxPropPlaceholder")&&!this.getData("cxPropDisplayValue")&&(this.setData("cxPropSelected",a[0][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",a[0][this.getData("cxPropUserValue")]),this.setData("selectedOption",a[0]))}else this.setData("noResult",!0);else if(this.getData("cxPropOptions").length>0){this.setData("noResult",!1);t=this.getData("cxPropOptions");if(this.checkIfOptGroup(t)){if(this.setData("optGroup",!0),r)for(s=0;s<t.length;s++)if(null!=t[s][o])0===a.length&&(a=$L.search(t[s],o,r));else for(var p in t[s])if(0===a.length){a=$L.search(t[s][p],o,r)}}else if("single"===e){a=$L.search(t,o,r,"equals");i=this.getData("cxPropLimit");a.length>0&&!this.getData("cxPropDisplayValue")&&(this.setData("selectValue",a[0][this.getData("cxPropUserValue")]),this.setData("selectedOption",a[0]))}if(a.length<1&&!this.getData("cxPropPlaceholder")&&!this.getData("cxPropDisplayValue")&&"single"===e)if(t[0][o])this.setData("cxPropSelected",t[0][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",t[0][this.getData("cxPropUserValue")]),this.setData("selectedOption",t[0]);else{p=Object.keys(t[0]);this.setData("cxPropSelected",t[0][p][0][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",t[0][p][0][this.getData("cxPropUserValue")]),this.setData("selectedOption",t[0][p][0])}else a.length>0&&!this.getData("cxPropPlaceholder")&&!this.getData("cxPropDisplayValue")&&(this.setData("cxPropSelected",a[0][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",a[0][this.getData("cxPropUserValue")]),this.setData("selectedOption",a[0]))}this.setData("preventSelectedObs",!1)}else this.setData("noResult",!0)}}.observes("cxPropOptions.[]"),displayObserver:function(){if(!this.preventDisplayObs){var e=this.getData("cxPropType");"single"!=e&&"multi"!=e||(this.setData("selectValue",this.getData("cxPropDisplayValue")),this.setData("selectedOption",void 0))}}.observes("cxPropDisplayValue"),checkNoResult:function(){var e=this.getData("cxPropType");if("multiple"===e||"multisearch"===e){let e=this.$node.querySelector("lyte-dropdown");e&&e.component.childComp&&!e.component.childComp.querySelector("lyte-drop-item:not(.lyteDropdownActive)")?this.setData("noResult",!0):this.setData("noResult",!1)}},selectedListObserver:function(){if(("multiple"===this.getData("cxPropType")||"multisearch"===this.getData("cxPropType"))&&!this.getData("preventSelectedObs")){var e=this.getData("cxPropSelectedList"),t=[],o=[];if(e){var a=this.getData("cxPropSystemValue");e.forEach((function(e){o.push(e),t.push(e[a])}))}this.setData("preventSelectedObs",!0),this.setData("cxPropSelected",t),this.setData("preventSelectedObs",!1),this.setData("displayValue",o),this.getData("showFieldsDropdown")?this.checkNoResult():this.modifyDropdownClass(this.checkIfSelectedEmpty(),"cxFakeDropNoOptSelected")}}.observes("cxPropSelectedList.[]"),selectObserver:function(e){if(!this.getData("preventSelectedObs")&&e){if(""!=e.newValue&&null!=e.newValue){this.setData("preventSelectedObs",!0);var t=this.getData("cxPropOptions"),o=this.getData("cxPropSystemValue"),a=this.getData("cxPropUserValue");if(this.getData("cxPropOptions").length>0&&"multiple"!==this.getData("cxPropType"))if("single"!==this.getData("cxPropType"))this.setData("cxPropSelectedList",[]),this.setSelectedData();else if(this.getData("optGroup")){var r;for(s=0;s<t.length;s++){r=Object.keys(t[s])[0];for(var i=0;i<t[s][r].length;i++){if(t[s][r][i][o]){if(t[s][r][i][o]==e.newValue){this.setData("cxPropSelected",t[s][r][i][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",t[s][r][i][a]),this.setData("selectedOption",t[s][r][i]);break}}else if(t[s][o]===e.newValue){this.setData("cxPropSelected",t[s][o]),this.setData("preventSelectedObs",!1),this.setData("selectValue",t[s][a]),this.setData("selectedOption",t[s]);break}}}}else if(""!==e.newValue)for(var s=0;s<t.length;s++)t[s][o]==e.newValue&&(this.setData("selectValue",t[s][a]),this.setData("selectedValueIndex",s),this.setData("selectedOption",t[s]),this.setData("preventSelectedObs",!1));else this.getData("cxPropPlaceholder")?(this.setData("selectValue",""),this.setData("selectedOption",void 0)):(this.setData("selectValue",t[0][a]),this.setData("selectedOption",t[0]),this.setData("selectedValueIndex",0));else this.setData("cxPropSelectedList",[]),this.checkSelectedValue(t,a,o,this.getData("display_value"),this.getData("cxPropSelected"),this.getData("cxPropPlaceHolder"),this.getData("cxPropType"),this.getData("optGroup"))}else"multiple"===this.getData("cxPropType")||"multisearch"===this.getData("cxPropType")?(this.setData("displayValue",[]),this.setData("preventSelectedObs",!0),this.setData("cxPropSelectedList",[]),this.setData("preventSelectedObs",!1)):(this.setData("selectValue",""),this.setData("selectedOption",void 0));this.getData("showFieldsDropdown")?this.checkNoResult():this.modifyDropdownClass(this.checkIfSelectedEmpty(),"cxFakeDropNoOptSelected"),"multiple"!=this.getData("cxPropType")&&"multisearch"===this.getData("cxPropType")||this.checkDropItemsCount()}else e||this.checkIfSelectedEmpty()}.observes("cxPropSelected").on("didConnect"),checkDropItemsCount:function(){this.lyteDropBody&&this.lyteDropBody.scrollHeight==this.lyteDropBody.clientHeight&&this.renderScroll(this.getData("optGroup")?"opt":"single")},checkIfSelectedEmpty:function(){var e=this.getData("cxPropSelected");try{e="single"!==this.getData("cxPropType")?JSON.parse(e):e}catch(t){e=""}return!e||"--None--"===e||0===e.length},addClassForDropdown:function(){var e=(this.getData("cxPropClass")?this.getData("cxPropClass"):"")+(this.getData("cxPropMandatory")?" mandatoryField":"")+(this.getData("isError")?" cxErrorBox":"")+("multiple"===this.getData("cxPropType")||"multisearch"===this.getData("cxPropType")?"  cxDropdownMultiSelect":"");this.getData("showFieldsDropdown")||(e+=(this.getData("cxPropDisabled")?" cxDropdownDisabled":"")+(this.checkIfSelectedEmpty()?" cxFakeDropNoOptSelected":"")),this.modifyDropdownClass(!0,e);var t=this.$node.querySelector("lyte-dropdown");t&&$L(t).addClass(this.getData("cxPropClass")+" "+this.getData("dropClassList"))},getSelectionOption:function(e){if(e&&e.length>0){var t;if("single"===this.getData("cxPropType")||"multi"===this.getData("cxPropType"))t=e[0];else{var o=this.getData("cxPropSelected")?JSON.parse(this.getData("cxPropSelected")):[];t=e.find(function(e){return!o.includes(e[this.getData("cxPropSystemValue")])}.bind(this))}return t}},keyDownEvent:function(){this.getData("showFieldsDropdown")&&this.$node.cxProp("aria")&&this.bindEventForAria()}.observes("showFieldsDropdown","cxPropAria"),scrollItemIntoView:function(e){var t=this.getData("cxPropType");if("single"===t||"multi"===t){var o=this.getData("cxPropSelected"),a=e.childComp&&e.childComp.querySelector(`[data-zcqa="${o}"]`);a&&(a=a.previousElementSibling?a.previousElementSibling:a,e.childComp.querySelector("lyte-drop-body").scrollTop=a.offsetTop)}},actions:{dropItemHover:function(e,t,o){if(e){if(t.classList.contains("lyteDropdown-disabled")){let e=t.querySelector("lyte-text").scrollWidth>t.querySelector("lyte-text").offsetWidth,a={originElem:`#${t.id} lyte-text`,show:!0,option:o,hasTooltip:e};this.setData("disabledHcDetails",a)}this.getMethods("onDropItemHover")&&this.executeMethod("onDropItemHover",t,o)}else t.classList.contains("lyteDropdown-disabled")&&this.setData("disabledHcDetails",{show:!1}),this.getMethods("onDropItemLeave")&&this.executeMethod("onDropItemLeave",t,o)},infoShow:function(e,t,o){o&&this.getMethods("onShowInfo")?this.executeMethod("onShowInfo",e,t):this.getMethods("onHideInfo")&&this.executeMethod("onHideInfo",e,t)},clearSelection:function(){this.setData("cxPropSelected",""),event.stopPropagation(),this.getMethods("onClear")&&this.executeMethod("onClear")},renderDropDown:function(e){if(!this.getData("cxPropDisabled")&&!this.getData("showFieldsDropdown")){var t=this.getData("cxPropType");"focus"!==e.type&&"mouseover"!==e.type||"multiple"!==t&&"multisearch"!==t?"click"!==e.type&&"keydown"!==e.type||("keydown"!==e.type||32!==e.keyCode&&40!==e.keyCode?"click"===e.type&&(this.populateDropItems(),this.setData("dropdownFocus",!0),this.setData("showFieldsDropdown",!0),this.addClassForDropdown(),this.open()):(this.populateDropItems(),this.setData("dropdownFocus",!0),this.setData("showFieldsDropdown",!0),this.addClassForDropdown(),this.open(),e.preventDefault())):(this.populateDropItems(),this.setData("showFieldsDropdown",!0),this.addClassForDropdown(),"focus"===e.type&&(this.setData("dropdownFocus",!0),"multisearch"===t&&this.open()))}}},methods:{setScroll:function(e,t){$L(t.parentElement.querySelector("lyte-drop-body")).scrollTop(0)},dropBoxOpen:function(e,t){var o=this;this.lyteDropBody||(this.lyteDropBody=t.childComp.querySelector("lyte-drop-body")),setTimeout((function(){"multiple"!=o.getData("cxPropType")&&"multisearch"!=o.getData("cxPropType")||o.checkDropItemsCount()}),100);var a=t.childComp.querySelector("lyte-input")?t.childComp.querySelector("lyte-input"):t.$node.querySelector("lyte-input");if(a&&a.focus(),("multiple"==o.getData("cxPropType")||"multisearch"==o.getData("cxPropType")&&!this.$node.querySelector("lyte-input").ltProp("value"))&&o.checkDropItemsCount(),"single"==this.data.cxPropType){var r=this.lyteDropBody,i=r.querySelector(".lyteDropdownSelection");if(i){var s=r.scrollTop,p=i.offsetTop,l=r.offsetHeight;p<=s?r.scrollTop=p-l/2:p>=s+l&&(r.scrollTop=p+i.offsetHeight-l/2)}this.data.topPosition&&(this.renderUp=setInterval(function(){var e=this.data.topPosition>50?this.data.topPosition-50:0,t=this.data.topPosition>50?50:this.data.topPosition;this.calculateDropItems(e,t,void 0,!0),0===e&&(this.setData("topPosition",void 0),clearInterval(this.renderUp))}.bind(this),10))}0===t.childComp.querySelectorAll("lyte-drop-item").length||0===t.childComp.querySelectorAll("lyte-drop-item:not(.lyteDropdownActive)").length&&t.childComp.querySelectorAll("lyte-drop-item:not(.lyteSearchHidden)").length?this.setData("noResult",!0):this.setData("noResult",!1),this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},optionSelect:function(e,t,o,a){this.setData("selectValue",a.innerText),this.setData("selectedOption",this.data.localData.find((e=>e[this.getData("cxPropSystemValue")]==t))),this.setData("preventSelectedObs",!0),this.setData("cxPropSelected",t),this.setData("preventSelectedObs",!1),this.getMethods("onOptionSelect")&&this.executeMethod("onOptionSelect",e,t,o,a)},onOptionChange:function(e,t,o,a){if(this.getData("cxPropClearErrorMessage")&&this.getData("isError")&&this.setData("isError",!1),this.setData("preventSelectedObs",!0),this.setData("cxPropSelected",t),this.setData("preventSelectedObs",!1),this.getMethods("onChange"))return this.executeMethod("onChange",e,t,o,a)},onBeforeSelect:function(e,t,o,a,r){if(this.getMethods("beforeSelect"))return this.executeMethod("beforeSelect",e,t,o,a,r)},hideDropbox:function(e,t){this.setData("preventSelectedObs",!1);var o=t.$node.querySelector("lyte-input");(o=o||(t.childComp?t.childComp.querySelector("lyte-input"):void 0))&&o.ltProp("value",""),this.getMethods("onHide")&&this.executeMethod("onHide",e,t),this.getData("noResult")&&this.setData("noResult",!1)},beforeHideDropbox:function(e,t){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",e,t);clearInterval(this.renderUp)},addDropItem:function(e,t,o,a,r){var i,s,p=this.getData("cxPropType"),l=this.getData("optGroup")?this.getData("optArr"):this.getData("localData"),n=this.getData("cxPropSystemValue"),c=this.getData("cxPropSelectedList");if("multisearch"==p?i=this.$node.querySelector(".lyteInput"):"multiple"==p&&(i=a.childComp.querySelector("lyte-input")),i&&(s=i.ltProp("value"),i.focus(),i.ltProp("value","")),this.getData("cxPropSelected")&&this.getData("cxPropSelected").length>0)var d=JSON.parse(this.getData("cxPropSelected"));else d=[];for(var u=this.getData("displayValue"),x=0;x<l.length;x++)if(t==l[x][n]){u.push(l[x]),d.includes(t)||d.push(l[x][n]);break}var m=r.closest("lyte-drop-body");(0===m.querySelectorAll("lyte-drop-item:not(.lyteSearchHidden)").length||0===m.querySelectorAll("lyte-drop-item:not(.lyteDropdownActive)").length?this.setData("noResult",!0):this.setData("noResult",!1),this.setData("preventSelectedObs",!0),c)&&(c.find((function(e){return e[n]===t}))||Lyte.arrayUtils(c,"push",u[u.length-1]));this.setData("cxPropSelected",JSON.stringify(d)),s||this.checkDropItemsCount(),this.setData("preventSelectedObs",!1),this.setData("displayValue",[]),this.setData("displayValue",u),this.getMethods("onAdd")&&this.executeMethod("onAdd",e,t,o,a,r)},beforeAddDropItem:function(e,t,o,a,r){if(this.getMethods("onBeforeAdd"))return this.executeMethod("onBeforeAdd",e,t,o,a,r)},removeDropItem:function(e,t,o,a,r,i){this.getData("optGroup")?this.getData("optArr"):this.getData("cxPropOptions");if(this.getData("cxPropSelected")&&this.getData("cxPropSelected").length>0){var s=this.getData("cxPropSelectedList");if(this.getData("cxPropRemoveMultiple")){l=this.getData("displayValue");for(var p=0;p<t.length;++p)for(n=0;n<l.length;++n)t[p]===l[n][this.getData("cxPropSystemValue")]&&(Lyte.arrayUtils(l,"removeAt",n),s.splice(n,1))}else for(var l=this.getData("displayValue"),n=0;n<l.length;++n)t===l[n][this.getData("cxPropSystemValue")]&&(Lyte.arrayUtils(l,"removeAt",n),s.splice(n,1));this.setData("preventSelectedObs",!0),this.setData("cxPropSelected",o),this.setData("cxPropSelectedList",s),this.setData("preventSelectedObs",!1)}else this.setData("displayValue",[]),this.setData("preventSelectedObs",!0),this.setData("cxPropSelected",""),this.setData("cxPropSelectedList",[]),this.setData("preventSelectedObs",!1);(this.$node.querySelector("lyte-dropdown")&&this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-input")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-input").ltProp("value",""),"multisearch"===this.getData("cxPropType"))?this.$node.querySelector("lyte-input").ltProp("value")||this.checkNoResult():this.checkNoResult();this.$node.querySelector("lyte-dropdown")&&this.$node.querySelector("lyte-dropdown").open(),this.$node.querySelector("lyte-dropdown")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-input")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-input").ltProp("value",""),this.getMethods("onRemove")&&this.executeMethod("onRemove",e,t,o,a,r,i),a.$node.resetPosition()},beforeRemoveDropItem:function(e,t,o,a,r,i){if(this.getMethods("onBeforeRemove"))return this.executeMethod("onBeforeRemove",e,t,o,a,r,i)},scrollDropBox:function(e,t){this.scrollBox(e,t)},beforeShow:function(e,t){var o=this.getData("cxPropType"),a=this.getData("cxPropOptions");if(("single"===o||"multi"===o)&&a&&a.length<1&&this.setData("noResult",!0),this.getMethods("onBeforeShow")){var r=this.executeMethod("onBeforeShow",e,t);if(!r||!r.then)return r;this.setData("showLoading",!0),r.then((()=>{this.setData("showLoading",!1),this.ignoreScroll=!0,this.scrollItemIntoView(t),this.ignoreScroll=!1,this.data.topPosition?this.lazyRender=setInterval(function(){var e=this.data.topPosition>50?this.data.topPosition-50:0,o=this.data.topPosition>50?50:this.data.topPosition;this.calculateDropItems(e,o,void 0,!0),0===e&&(this.setData("topPosition",void 0),clearInterval(this.lazyRender),t.$node.resetSelected&&t.$node.resetSelected())}.bind(this),10):t.$node.resetSelected&&t.$node.resetSelected()}))}},onOptionSearch:function(e,t){var o=e.newValue,a=this.getData("cxPropOptions"),r=this.getData("cxPropUserValue"),i=this.getData("cxPropType"),s=this.getData("cxPropLimit"),p=[],l=[];if(o.length>0)if(this.setData("searchPerformed",!0),this.getData("cxPropHasMoreOptions")||this.getData("cxPropExternalSearch"))if(this.getData("cxPropHasMoreOptions")&&(this.searchParam.searchValue=o),this.setData("localData",[]),this.getMethods("onSearch")){var n=this.executeMethod("onSearch",o);if(n instanceof Promise){var c=this;this.setData("showLoading",!0),n.then((function(e){if(e&&e.length>0){if(c.getData("optGroup")&&(e=c.formatOptionsForOpt(e)),c.setData("noResult",!1),c.setData("localData",e),c.getData("localData").length>0){var t=c.getSelectionOption(c.getData("localData"));t?c.setData("selectionValue",t[c.getData("cxPropSystemValue")]):c.setData("noResult",!0),c.resetValues()}}else c.setData("noResult",!0)})).catch((function(){c.setData("noResult",!0)})).finally((function(){c.setData("showLoading",!1)}))}else if(n&&n.length>0){if(this.setData("noResult",!1),this.setData("localData",n),this.getData("localData").length>0){var d=this.getSelectionOption(this.getData("localData"));d?this.setData("selectionValue",d[this.getData("cxPropSystemValue")]):this.setData("noResult",!0),this.resetValues()}}else this.setData("noResult",!0)}else this.setData("noResult",!0);else{if(void 0!==a[0][r]&&o.length>0&&"multi"!=i)l=$L.search(a,r,o,"includes",{caseSensitive:!1,trim:this.getData("cxPropTrimSearch"),allowEmptyValue:!0}),this.setData("localData",l);else if(o.length>0)a.forEach(function(e){if(null!=e[r]){var t=$L.search(e,r,o,"includes",{caseSensitive:!1,trim:this.getData("cxPropTrimSearch"),allowEmptyValue:!0});t.length>0&&p.push(t[0])}else for(var a in e){var i={};i[a]=$L.search(e[a],r,o,"includes",{caseSensitive:!1,trim:this.getData("cxPropTrimSearch"),allowEmptyValue:!0}),i[a].length>0&&p.push(i)}}.bind(this)),this.optTotalCount(p,"search");else if(0==o.length){var u=this.getData("optGroup");s=this.getData("cxPropLimit");1!=u?a.length>s?this.calculateDropItems(0,s):this.calculateDropItems(0,a.length):this.optTotalCount(a,"empty")}0!=o.length&&0==p.length&&0===l.length?this.setData("noResult",!0):this.setData("noResult",!1),this.getData("localData").length>0&&(-1==this.getData("localData")[0].id&&this.getData("localData")[1]?this.setData("selectionValue",this.getData("localData")[1][this.getData("cxPropSystemValue")]):-1!==this.getData("localData")[0].id&&this.setData("selectionValue",this.getData("localData")[0][this.getData("cxPropSystemValue")]));var x=this.getData("localData");this.setData("localData",[]),this.setData("localData",x),this.resetValues(),"multiple"!=i&&"multisearch"!=i||(this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-drop-item:not([selected=true])")?this.setData("noResult",!1):this.setData("noResult",!0))}else{if(this.getData("cxPropHasMoreOptions")&&(this.searchParam={page:1}),this.setData("cxPropHasMoreOptions",this.previousHasMoreOptions),this.setData("searchPerformed",!1),this.data.localData.length&&this.setData("selectionValue",""),this.getData("optGroup"))this.optTotalCount(a,"search"),this.setSelectedData();else if(a.length>s)if(this.data.cxPropSelected&&"single"==this.data.cxPropType){var m=a.cruxFindIndexOfObject(this.data.cxPropSystemValue,this.data.cxPropSelected);m>s?this.calculateDropItems(m-25,s,!0):this.calculateDropItems(0,s)}else this.calculateDropItems(0,s);else this.calculateDropItems(0,this.getData("currentPos")),"multiple"!=i&&"multisearch"!=i||this.checkDropItemsCount();this.getData("localData").length>0&&(-1==this.getData("localData")[0].id&&this.getData("localData")[1]?this.setData("selectionValue",this.getData("localData")[1][this.getData("cxPropSystemValue")]):-1!==this.getData("localData")[0].id&&this.setData("selectionValue",this.getData("localData")[0][this.getData("cxPropSystemValue")])),this.resetValues(),this.$node.querySelector("lyte-dropdown")&&this.$node.querySelector("lyte-dropdown").component.childComp&&0==this.$node.querySelector("lyte-dropdown").component.childComp.querySelectorAll("lyte-drop-item:not(.lyteDropdownActive)").length?this.setData("noResult",!0):this.setData("noResult",!1),this.setData("currentPos",this.getData("cxPropLimit"))}}},mandatoryType:function(){var e,t=this.$node;e=this.getData("showFieldsDropdown")?$L("lyte-dropdown",t):$L(".cxFakeDummyEventContainer",t);var o=$L(e,t),a=t.querySelector(".cxMandatoryType");"red_accent_line"!=this.data.cxPropMandatoryType?(a&&(a.style.color="red"),t.querySelector(".cxMandatoryOptEnabled")||o.addClass("cxMandatoryOptEnabled")):t.querySelector(".cxMandatoryOptEnabled")&&o.removeClass("cxMandatoryOptEnabled")}.observes("cxPropMandatoryType").on("didConnect"),setAriaForFakeDummy:function(){this.data.showFieldsDropdown||_lyteUiUtils.setAttribute(this.$node.querySelector(".cxFakeDummyEventContainer"),this.getData("cxPropAriaButton")||{},{})}.observes("cxPropAriaButton").on("didConnect")},{mixins:["crux-aria-dropdown-mixin"]}),Lyte.Component.registerHelper("cxPropArrayValue",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("cxPropCheckKey",(function(e){return e.hasOwnProperty(this.getData("cxPropUserValue"))})),Lyte.Component.registerHelper("cxPropKeyValue",(function(e){if("object"!=typeof e)return!0})),Lyte.Component.registerHelper("cxPropIsDisabledValue",(function(e){return this.getData("cxPropDisabledList").includes(e)})),Lyte.Component.register("crux-mentions-body",{_template:'<template tag-name="crux-mentions-body"> <ul class="mentionBody {{dropdownClass}}"> <template is="for" items="{{mentions}}" item="mention" index="index"> <lyte-mentions-item class="cruxMentionsLi" onclick="{{action(\'addMention\',event,mention)}}"> <template is="if" value="{{expHandlers(mention.$setype,\'===\',&quot;Users&quot;)}}"><template case="true"> <div class="mentionsLiImage"> <template is="if" value="{{expHandlers(mention.image_link,\'!\')}}"><template case="true"> <span class="mentionsNoPhoto"></span> </template><template case="false"> <img src="{{mention.image_link}}" class="mentionsUserImage"> </template></template> </div> <div class="cruxMentionItem"> <div class="cxMentionsPrimaryDetail">{{mention.full_name}}</div> <div class="cxMentionsSecondaryDetail">{{mention.email}}</div> </div> </template><template case="false"><template is="if" value="{{expHandlers(mention.$setype,\'===\',&quot;Groups&quot;)}}"><template case="true"> <div class="mentionsLiImage groupsLi"> <span class="mentionsGroupIcon"></span> </div> <span><span class="mentionsLiName">{{mention.name}} - </span><span class="mentionsLiLabel">{{cruxGetI18n(\'crm.security.group\')}}</span></span> </template><template case="false"><template is="if" value="{{expHandlers(mention.$setype,\'===\',&quot;Roles&quot;)}}"><template case="true"> <div class="mentionsLiImage rolesLi"> <span class="mentionsRoleIcon"></span> </div> <span><span class="mentionsLiName">{{mention.name}} - </span><span class="mentionsLiLabel">{{cruxGetI18n(\'crm.security.role\')}}</span></span> </template></template></template></template></template></template> </lyte-mentions-item> </template> </ul> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"text",position:[3,1,0]},{type:"text",position:[3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[3,0,0]},{type:"text",position:[3,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[3,0,0]},{type:"text",position:[3,1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}],_observedAttributes:["mentions","textboxSelector","triggerChar","mentionText","mentionedMentions","textareaWidth","features","replWord","lyteDom","dropdownClass"],data:function(){return{mentions:Lyte.attr("array",{default:[]}),textboxSelector:Lyte.attr("string",{default:""}),triggerChar:Lyte.attr("string",{default:""}),mentionText:Lyte.attr("string",{default:""}),mentionedMentions:Lyte.attr("array",{default:[]}),textareaWidth:Lyte.attr("number",{default:0}),features:Lyte.attr("object",{default:{}}),replWord:Lyte.attr("string",{default:"crm"}),lyteDom:Lyte.attr("object",{}),dropdownClass:Lyte.attr("string",{default:""})}},didConnect:function(){this._textarea=this.$node.parentElement._textarea;var e=this._textarea.getBoundingClientRect().width;this.setData("textareaWidth",e)},didDestroy:function(){$L(this._textarea).mentionsInput("destroy")},actions:{addMention:function(e,t){e&&(e.preventDefault(),e.stopPropagation());var o="";"Users"===t.$setype?o=t.full_name:("Groups"===t.$setype||"Roles"===t.$setype)&&(o=t.name);var a=this._textarea.value,r=this.getData("mentionText").replace(/[*+?^${}()|[\]\\]/g,"$&"),i=(this.getData("triggerChar"),this._textarea.selectionEnd),s=this._textarea.selectionEnd-r.length,p=" "!==a.slice(i,i+1)?" ":"",l=a.slice(0,s)+a.slice(s,i).replace(r,o+p)+a.slice(i);l&&(this._textarea.value=l);var n,c,d=this.getData("mentionedMentions");n=s-1,c=o.length+n+1,"Users"===t.$setype&&(t.name=t.full_name),t.cxPosition={start:n,end:c},t.position={start:n,end:c};for(var u=d.length,x=r.length+1-p.length,m=0;m<u;m++)d[m].cxPosition.start>n&&(d[m].cxPosition.start-=x,d[m].cxPosition.end-=x);d.push(t),d=d.sort((function(e,t){return e.cxPosition.start-t.cxPosition.start})),this._textarea._mIData.lyteMICollection=d,this.setData("mentionedMentions",d),cruxMentionUtil.mentionedMentions=d,this._textarea._addedMentions=!0,this._textarea.focus(),this._textarea.selectionEnd=s+o.length+p.length,window.cruxMentionUtil.getTextContent({target:this._textarea,type:"input"},t),this.$node.closest(".lyteMIDropdown").classList.remove("lyteMIDisplayBlock"),this._textarea._lyteDisableParentScrollListeners(this._textarea);var y=this.getData("lyteDom");y.mIManager&&(y.mIManager.inputBuffer=[])}}}),$L&&($L.prototype.cruxMention=function(e,t){if(this.length){var o,a,r=this[0],i=e||{};if("TEXTAREA"===r.nodeName||"LYTE-INPUT"===r.nodeName?a=this:"CRUX-TEXT-AREA-COMPONENT"===r.nodeName&&(a=$L("lyte-input",r)),o=(o=a[0].querySelector("textarea"))||a[0],!0===i.destroy&&window.cruxMentionUtil){if(o.removeEventListener("input",window.cruxMentionUtil.getTextContent),o&&o._mIData){var s=o._mIData.lyteMIList.querySelector("#cruxMention");s?s.remove():this.mentionsInput("destroy")}delete window.cruxMentionUtil}else if("setMessage"===e){var p=t.collection,l=t.message,n=window.cruxMentionUtil.triggerChar,c=cruxMentionUtil.productName,d=l.matchAll(c+"[[aA-zZ]*#[0-9]+#[0-9]+]"+c),u=Array.from(d),x=[];for(let e=0;e<u.length;e++){var m=u[e],y=m[0].split("#")[1],h=p.find((function(e){return e.id===y}));"Users"===h.$setype&&(h.name=h.full_name),x[e]=h,l=l.replace(m[0],n+n+"["+h.name+":"+h.id+"]")}cruxMentionUtil.mentionedMentions=x,a.mentionsInput("setMessage",{message:l,collection:x});var P="textarea"===a[0].nodeName?a:a.find("textarea"),f=new Event("input");P[0].dispatchEvent(f)}else{var g={textboxSelector:"",searchModules:["users","groups","roles"],minChars:2,triggerChar:"@",componentName:"crux-mentions-body",cxPropCacheQuery:!0,existingMentions:[],queryParam:{},productName:"crm",requestInterval:0,maxMentionNameLength:101,preventParentScroll:!1},v=i.textboxSelector?i.textboxSelector:g.textboxSelector,b=i.searchModules?i.searchModules:g.searchModules,D=isNaN(i.minChars)?g.minChars:i.minChars,L=i.triggerChar?i.triggerChar:g.triggerChar,C=i.componentName?i.componentName:g.componentName,w=i.cxPropCacheQuery?i.cxPropCacheQuery:g.cxPropCacheQuery,I=i.existingMentions?i.existingMentions:g.existingMentions,M=i.queryParam?i.queryParam:g.queryParam,S=i.productName?i.productName:g.productName,E=i.requestInterval?i.requestInterval:g.requestInterval,F=i.maxMentionNameLength?i.maxMentionNameLength:g.maxMentionNameLength,T=i.preventParentScroll?i.preventParentScroll:g.preventParentScroll,V=i.dropdownClass?i.dropdownClass:"",q=I.length;if(q){for(var _,N,k,O=o.value,A=0;A<q;A++)"Users"===I[A].$setype&&(I[A].name=I[A].full_name),k=I[A].name,N=(_=O.indexOf("@"+k))+k.length+1,I[A].cxPosition={start:_,end:N},I[A].position={start:_,end:N};I=I.sort((function(e,t){return e.cxPosition.start-t.cxPosition.start}))}window.cruxMentionUtil={},cruxMentionUtil.cxOldNotes=o.value,cruxMentionUtil.triggerChar=L,cruxMentionUtil.mentionedMentions=I,cruxMentionUtil.productName=S,window.cruxMentionUtil.getPosition=function(e,t){for(var o,a=e.length,r=0;r<a;r++)if(e[r]!==t[r]){o=r;break}return o},window.cruxMentionUtil.setPosition=function(e,t,o,a){var r=cruxMentionUtil.mentionedMentions,i=r?r.length:0;if(i&&(!t||t&&i>1))for(var s=0;s<i;s++){var p=r[s],l=p.cxPosition;t&&t.id===r[s].id||(l.start>=e&&a.substring(l.start+o,l.end+o)!==cruxMentionUtil.triggerChar+p.name?(cruxMentionUtil.mentionedMentions.splice(s,1),s--,i--):p.cxPosition.start>=e&&(p.cxPosition.start+=o,p.cxPosition.end+=o))}},window.cruxMentionUtil.getTextContent=function(e,t){if("input"===e.type){var o,a,r=e.target,s=cruxMentionUtil.mentionedMentions||[],p=r.value;if(t)a=(o={start:t.cxPosition.start,end:t.cxPosition.end}).end-o.start,o=o.start;else{var l=cruxMentionUtil.cxOldNotes,n=l.length,c=p.length;o=n<c?cruxMentionUtil.getPosition(p,l):cruxMentionUtil.getPosition(l,p),a=c-n}if(cruxMentionUtil.setPosition(o,t,a,p),cruxMentionUtil.cxOldNotes=r.value,cruxMentionUtil.mentionedMentions=s,I=s,i.cxPropContent&&i.cxPropContent.constructor===Function){r&&(r._mIData.lyteMICollection=cruxMentionUtil.mentionedMentions);var d=cruxMentionUtil.formatMentions(r.value,s);i.cxPropContent(d)}}},cruxMentionUtil.formatMentions=function(e,t){var o,a=cruxMentionUtil.productName,r=0;return t.forEach((function(t){"Users"===t.$setype?(o=a+"[user#"+t.id+"#"+t.zuid+"]"+a,e=e.slice(0,t.cxPosition.start+r)+o+e.slice(t.cxPosition.end+r),r+=o.length-t.full_name.length-1):"Roles"===t.$setype?(o=a+"[role#"+t.id+"#"+t.id+"]"+a,e=e.slice(0,t.cxPosition.start+r)+o+e.slice(t.cxPosition.end+r),r+=o.length-t.name.length-1):"Groups"===t.$setype&&(o=a+"[group#"+t.id+"#"+t.id+"]"+a,e=e.slice(0,t.cxPosition.start+r)+o+e.slice(t.cxPosition.end+r),r+=o.length-t.name.length-1)})),e},"TEXTAREA"===r.nodeName?r.addEventListener("input",window.cruxMentionUtil.getTextContent):"LYTE-INPUT"!==r.nodeName&&"CRUX-TEXT-AREA-COMPONENT"!==r.nodeName||r.querySelector("textarea").addEventListener("input",window.cruxMentionUtil.getTextContent);var R=this;a.mentionsInput({minChars:D,triggerChar:L,dropbody:!1,interval:E,preventParentScroll:T,onHide:function(e,t){e.classList.remove("lyteMIDisplayBlock"),e.classList.remove("cx_cruxMentionDropdown")},onDataRequest:function(e){if(e.length>F||e.split("  ").length>1)return[];if(i.customRequest&&i.customRequest.constructor===Function)return i.customRequest(e);var t={searchword:e,meta_resources:b.join(),display_field:!0,page:1,per_page:200};for(var o in M)t[o]=M[o];return store.findAll("global-search",t,w)},displayMentions:function(e,t){var o,a=e?e.length:0;if(!(t===R.mIManager.currentDataQuery&&e&&a>0))return!1;for(var s=[],p=[],l=[],n=0;n<a;n++)"Users"===e[n].$setype?s.push(e[n]):"Roles"===e[n].$setype?p.push(e[n]):"Groups"===e[n].$setype&&l.push(e[n]);e=s.concat(p).concat(l),"TEXTAREA"===r.nodeName?o=r:"LYTE-INPUT"!==r.nodeName&&"CRUX-TEXT-AREA-COMPONENT"!==r.nodeName||(o=r.querySelector("textarea"));var c=o._mIData.lyteMIList,d=$L(C,c)[0];if(r&&!d){o._mIData.lyteMIList.classList.add("cx_cruxMentionDropdown");var u=I.length;if(u>0)var x=e.filter((function(e){for(var t=!1,o=0;o<u;o++){if(I[o].full_name&&I[o].full_name===e.full_name){t=!0;break}if(I[o].name&&I[o].name===e.name){t=!0;break}}return!t}));if(!(e&&e.length||x&&x.length))return!1;(d=Lyte.Component.render(C,{lyteDom:R,mentions:u>0?x:e,textboxSelector:v,triggerChar:L,mentionText:t,features:i,dropdownClass:V},".cx_cruxMentionDropdown")).setData("mentionedMentions",I),d.setAttribute("id","cruxMention")}else if(r){d.setData("mentionedMentions",I);var m=d.getData("mentionedMentions"),y=m.length;if(x=e.filter((function(e){for(var t=!1,o=0;o<y;o++){if(m[o].full_name&&m[o].full_name===e.full_name){t=!0;break}if(m[o].name&&m[o].name===e.name){t=!0;break}}return!t})),!(x.length>0))return R.mIManager.inputBuffer=[],!1;d.setData({mentions:x,textboxSelector:v,triggerChar:L,mentionText:t}),d.querySelector(".mentionBody").setAttribute("style","display: block"),c.classList.add("lyteMIDisplayBlock")}}})}}else console.warn("Textarea element is doesn't exist.Please check.")}),Lyte.Mixin.register("crux-element-validation",{isValidDate:function(e,t){if(!e)return!1;if(t=(t=(t=t||this.getData("cxPropDatePattern")).toUpperCase()).replace(/'/g,""),e=e.replace(/'/g,""),this.data.cxPropMinDate||this.data.cxPropMaxDate){var o,a,r=$L.moment(e,t).getDObj(),i=!1;if(this.data.cxPropMinDate&&(o=$L.moment(this.data.cxPropMinDate,t).getDObj(),r&&o&&r<o&&(i=!0)),this.data.cxPropMaxDate&&(a=$L.moment(this.data.cxPropMaxDate,t).getDObj(),r&&a&&r>a&&(i=!0)),i)return!1}try{return $L.moment(e,t,{i18n:!0}).validate()}catch(e){return!1}},isEmoji:function(e){return!!/([\uD800-\uDBFF][\uDC00-\uDFFF])/i.test(e)},SplitWord:function(e){e=e.split(",");for(var t,o,a=[],r=0;r<e.length;r++)-1!=(o=e[r].indexOf("\\"))&&e[r].length-2==o?(t=e[r].slice(0,e[r].length-2)+","+e[r+1],Lyte.arrayUtils(a,"push",t),r+=1):""!=e[r]&&Lyte.arrayUtils(a,"push",e[r]);return 1==a.length?a[0]:a},dateValidate:function(e){var t=this.isValidDate(e.value.trim(),this.getData("cxPropDatePattern"));if(!t){var o=this.getData("cxPropField"),a=(o.errorFieldLabel?o.errorFieldLabel:o.field_label).replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,"."),r=_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(a));this.showAlert(r,e),e.setAttribute("autocomplete","off")}return t},patternValidate:function(e){!this.isValidDate(e.value,this.getData("cxPropDatePattern"))&&this.$node.querySelector("lyte-input").calendarDiv&&this.$node.querySelector("lyte-input").calendarDiv.querySelector("lyte-calendar").revertToToday()},showAlertMsg:function(e){var t=this;_cruxUtils.showCustomAlert({params:{cxPropYield:!0,cxPropHeading:e,cxPropButtonPosition:"center",cxPropButtons:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary",cxPropZcqa:"button_primary"}],id:"cruxElementAlert"},close:function(){t&&t.$node.querySelector("lyte-input")?t.$node.querySelector("lyte-input").focus():t&&t.$node.querySelector("lyte-number")&&t.$node.querySelector("lyte-number").focus()}.bind(this)})},showAlert:function(e,t){if(this.getMethods("onError")){if(!this.executeMethod("onError",e,this))return!1}t&&t.focus(),this.showAlertMsg(e)},showMsgBox:function(e,t,o){if(this.getMethods("onError")){if(!this.executeMethod("onError",e,this))return!1}var a=document.getElementById("lyteMsgBox");o||(o={}),o.ltPropType=t,o.ltPropMessage=e,o.id="lyteMsgBox",a&&a.ltProp("show",!1),(a=Lyte.Component.render("lyte-messagebox",o,"body")).setMethods("onClose",(function(e){document.body.removeChild(e.$node)})),a.ltProp("show",!0)},getDateInUserDatePattern:function(e,t,o,a){var r;t=(t=t||this.getData("cxPropDatePattern")).toUpperCase(),1!=o&&(r=o);var i=$L.moment(e,r);return i.validate()||1==o?a?i.i18N(t):i.format(t):e},getTimeInUserFormat:function(e,t){var o=e.getHours(),a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r="";if("12"==(t=t||this.getData("cxPropTimeFormatInput"))){var i="PM";o>12?r=(o-=12)<10?"0"+o:o:0==o?(r="12",i="AM"):(r=o,o<10&&(r="0"+r),12!=o&&(i="AM")),r+=":"+a+" "+_cruxUtils.getI18n(i)}else o<10&&o.toString().length<2&&(o="0"+o),r=o+":"+a;return r},getDateObject:function(e,t,o){o=(o=o?o.toUpperCase():this.getData("cxPropDatePattern").toUpperCase()).replace(/'/g,"");var a=$L.moment(e,o,{i18n:!0}).getDObj();if(!a)return"";if(t){var r=t.match(/(\d{1,2}):(\d{1,2})/),i=(t=t.replace(_cruxUtils.getI18n("AM"),"AM").replace(_cruxUtils.getI18n("PM"),"PM")).match(/([A,P]M)/);if(t=t.split(":"),i){var s=this.convertTimeTo24HoursFormat(parseInt(r[0]),i[1]);a.setHours(s)}else a.setHours(t[0]);a.setMinutes(t[1].split(" ")[0])}return a},convertTimeTo24HoursFormat:function(e,t){return"am"==(t=t.toLowerCase())?0==e?12:12==e?0:e:"pm"==t?12==e?e:e+12:t==_cruxUtils.getI18n("AM")||_cruxUtils.getI18n("am")==t?0==e?12:12==e?0:e:t==_cruxUtils.getI18n("PM")||_cruxUtils.getI18n("pm")==t?12==e?e:e+12:void 0},isValidInteger:function(e){if(""==e)return!0;return!(isNaN(e)||-1!=e.indexOf(".")||!/^-?\d+(,(\d)+)*$/.test(e))},isValidDecimal:function(e){if(""==e)return!0;var t=/^-?(\d+)?(\.){0,1}(\d+)*$/.exec(e);return!!t&&(null!=t[1]||null!=t[3])},decimalLengthCheck:function(e,t){if(""==e)return!0;var o=/^-?(\d+)?(\.){0,1}(\d+)*$/.exec(e);if(!o)return!1;var a=o[3];return t=t||this.getData("cxPropField"),!(a&&a.length>t.decimal_place)},convertCurrencyValue:function(e,t,o,a,r,i,s,p,l,n,c,d,u){if("undefined"!=typeof Crm&&"undefined"!=typeof currencyUtils&&currencyUtils.returnValueInDefaultCurrency)return currencyUtils.returnValueInDefaultCurrency(e,t,o,i,void 0,u,l||0==l?l:this.data.cxPropDisplayCurrency,d?currencyUtils.ROUNDINGOPTION[d.toUpperCase()]:void 0);var x=["INR","BDT","MMK","PKR"];if(l=0!=l,!e&&"undefined"!=typeof Crm&&!Crm.userDetails.IS_MULTI_CURRENCY_ENABLED&&this.data&&x.indexOf(r||this.data.cxPropDefaultCurrencyIsoCode)>-1){var m=Crm.userDetails.DECIMAL_SEPARATOR.replace("_","-");return c=c||this.getData("cxPropDefaultOrgCurrency"),(l?c+" ":"")+currencyUtils.formatCurrencyValue(parseFloat(t),m,void 0,void 0,o)}var y=null!=n?parseFloat(t):this.getNumberWithCommas(parseFloat(t),",",".");o=o||0==o?o:this.getData("cxPropDefaultRoundOff");var h=parseFloat(t),P=(parseInt(h+"")+"").length;a=a||this.getData("cxPropCurrencyDetails"),r=r||this.getData("cxPropCurrencyCode");var f=t,g=Crm.userDetails.defaultRoundOff?Crm.userDetails.defaultRoundOff:2;if(void 0!==n)f=n;else{var v=(t+"").length,b=v==P?0:v-P-1;if(b>o||b<g&&b<o){var D=b>o?o:g;f=Number(parseFloat(t)).toFixed(D)}}if(a[r]&&e){o=parseInt(a[r].decimals);var L,C=parseInt(a[e].decimals);L=s?t*s:i?t/parseFloat(i)+"":t/parseFloat(a[e].er)+"";var w,I=a[e].format.split("|"),M=a[r].format.split("|");if(w="undefined"!=typeof Crm&&x.indexOf(e)>-1?currencyUtils.formatCurrencyValue(t,"en-IN",I[0],I[1],a[e].decimals):null!=n?n:this.getNumberWithCommas(parseFloat(t).toFixed(C),I[0],I[1]),y=l?a[e].symbol+" ":"",e==r||0==w)y+=w;else if(p)y="undefined"!=typeof Crm&&x.indexOf(r)>-1?y+w+" ("+a[r].symbol+" "+currencyUtils.formatCurrencyValue(p,"en-IN",M[0],M[1],a[r].decimals)+")":y+w+" ("+a[r].symbol+" "+this.getNumberWithCommas(p,M[0],M[1])+")";else if("undefined"!=typeof Crm&&x.indexOf(r)>-1)y=y+w+" ("+a[r].symbol+" "+currencyUtils.formatCurrencyValue(L,"en-IN",M[0],M[1],a[r].decimals)+")";else{var S=parseFloat(L).toPrecision((parseInt(L)+"").length+o);y=y+w+" ("+a[r].symbol+" "+this.getNumberWithCommas(parseFloat(S).toFixed(o),M[0],M[1])+")"}}else if(c){I=c&&"object"==typeof c&&c.format?c.format.split("|"):[",","."];y=l?c+" ":"",y+=this.getNumberWithCommas(f,I[0],I[1],null!=n)}else if(a&&r&&a[r]){I=a[r].format.split("|");y=l?a[r].symbol+" ":"",y+=this.getNumberWithCommas(f,I[0],I[1],null!=n)}return y},getNumberWithCommas:function(e,t,o,a){if(a)return e.toString();t=t||",",o=o||".";var r=e.toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),r.join(o)},isValidPhoneNo:function(e,t){var o=e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[\u202c]/g,"")).replace(/[,](?!.)/,"")).replace(/\s{2,}/g," ")).replace(/\s-/g,"-")).replace(/-\s/g,"-")).replace(/\s[.]/g,"[.]")).replace(/\s;/g,";")).replace(/;\s/g,";")).replace(/\s,/g,",")).replace(/,\s/g,",")).replace(/\s#/g,"#")).replace(/#\s/g,"#")).replace(/\(\s/g,"(")).replace(/\s\)/g,")");t=(o=o.replace(/\)(?![\s;,\-\/])/g,") ")).length;if(""==o)return!1;for(var a=o[0],r=1;r<t;r++)"("==o[r]&&" "!=o[r-1]?a=a+" "+o[r]:a+=o[r];if(a=(a=a.replace(/^\s+/,"")).replace(/\s+$/,""),/^([\+]?)(?![\.-])((?=([\.\/-]?[ ]?[\da-zA-Z]+))\3+|([ ]?\((?![\.-])(?=[ \.-]?[\da-zA-Z]+)([ \.-]?[\da-zA-Z]+)+\)(?!\.)([ -][\da-zA-Z]+)?)+)+((([,]+)?[;]?([\*#]+)?[\da-zA-Z]+)+)?[#;]?$/.test(e=a)){var i=!0;if(this.data&&this.data.cxPropEnableCountryCode)if(e.startsWith("+"))try{i=ZlibPhoneNumber.isValidNumber(e)}catch(e){i=!1,murphy.error(e)}else{var s=e.replace(/[^0-9A-Za-z]/g,"");i=s.length<=12&&s.length>=1}return i}return!1},isValidTwitter:function(e){if(""==e)return!0;if(e.trim().length<=50&&e.trim().length>0){return/^[a-zA-Z0-9_]*$/.test(e)}return!1},isValidWebUrl:function(e){if(""==e)return!0;return new RegExp('^(http:\\/\\/www.|https:\\/\\/www.|ftp:\\/\\/www.|www.|http:\\/\\/|https:\\/\\/|ftp:\\/\\/|){1}[^\0-"-\'*-,.-/:-?[-^`{}- ]+(\\.[^\0-"$-,.-/<>@[-^`{}- ]+)+([/?].*)*$').test(e)},getNumberValueForView:function(e,t,o,a,r,i,s,p,l,n,c,d,u,x,m,y){if("currency"==t||39==a||36==a||77==a||143==a||144==a||145==a){if(r=r||this.getData("cxPropCurrencyDetails"),o&&r){for(var h in r)if(r[h].symbol==o){o=h;break}}else o=void 0;e=this.convertCurrencyValue(o,e,i,r,s,p,l,n,c,d,x,m,y)}else 40===a&&e&&e.indexOf("e")>-1?e=parseFloat(e).toFixed(9):38!=a&&34!=a&&40!=a&&"double"==t&&e%1==0&&(e=e/1+".0");return u&&"undefined"!=typeof Search&&Search.formatNumber?Search.formatNumber(e):e.toString()},validateNumberField:function(e,t,o,a,r){if(!e||""==e.trim())return this.validateMandatory(!0);var i,s=(e.match(new RegExp(/\d/g))?e.match(new RegExp(/\d/g)):"").length;return o&&s>o?(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR04,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.length.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),!1):a&&e>a?(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.custom.field.less.than.equalto",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label),a)),!1):r&&e<r?(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.custom.field.greater.than.equalto",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label),r)),!1):"integer"==t.data_type||"bigint"==t.data_type?((i=this.isValidInteger(e))||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label)))),i):((i=this.isValidDecimal(e))?(i=this.decimalLengthCheck(e,t))||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR03,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.decimal.check2",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label),t.decimal_place))):this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),i)},validatePhoneNumber:function(e,t){if(!t||""==t.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.data&&!this.data.cxPropPreventFocusOnError&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);var o=this.validateLength(t);return!!o&&((o=this.isValidPhoneNo(t))?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),this.data&&!this.data.cxPropPreventFocusOnError&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o)},errorCodes:{ERR01:"value_empty",ERR02:"value_invalid",ERR03:"decimal_check",ERR04:"maxlength_check",ERR05:"maxdate_check",ERR06:"mindate_check"},validateLength:function(e,t){return!((t=t||this.data.cxPropMaxlength)&&e.length>t)||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR04,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.length.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.getData("cxPropField").field_label))),this.data&&!this.data.cxPropPreventFocusOnError&&this.$node&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1)},validateText:function(e,t,o,a){return this.validateMandatory(!t||""==t.trim(),void 0,e,a)?!(t&&!this.validateLength(t,o))&&(this.setData("cxPropErrorMessage",""),!0):(this.data&&!this.data.cxPropPreventFocusOnError&&!this.inFocus&&this.$node&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1)},phoneClick:function(e,t,o,a){event.preventDefault(),"undefined"!=typeof ctiApiNotifier&&ctiApiNotifier.click2Call(e,Crm.userDetails.ZGID,Crm.userDetails.USER_ID,t,"",o,a),event.stopPropagation()},stopPropagation:function(){return event.stopPropagation(),!1},toPrecision:function(e,t){var o=(e=e.toString()).split("."),a=o[0],r=a.length;o.length<2&&(o[1]="");for(var i=r,s=0;i<t;i++,s++)0==s&&(a+="."),o[1][s]?a+=o[1][s]:a+="0";return a},getDateObjectFromString:function(e,t,o,a,r){if(!e)return new Date;if(!e.getMonth){if(!t)e.indexOf(":")>-1&&(o=o||Crm.userDetails.TIME_FORMAT,(e.indexOf("AM")>1||e.indexOf("PM")>1)&&(o=o.replace("a","A")),t+=" "+o);var i=$L.moment(e.trim(),t.toUpperCase().trim(),{i18n:r}),s=i.validate(),p=i.getDObj();return p||(p=new Date),s||a?p:e}return e},getDateTimeInUserFormat:function(e,t,o,a){var r=this.getDateInUserDatePattern(e);return r+=" "+this.getTimeInUserFormat(e,t,a)},showHideInfoTooltip:function(e){var t;e?((t=$L(e)).addClass("cxCurrentHovercard"),t.next()[0].ltProp("show",!0)):(t=this.$node.querySelector(".cxCurrentHovercard"),$L(t).removeClass("cxCurrentHovercard"))},validateMandatory:function(e,t,o,a){return o=o||this.data.cxPropField,a=a||this.data.cxPropLayout,!(1==this.data.cxPropMandatory||0==this.data.cxPropMandatory?this.data.cxPropMandatory:a&&o[a]?o[a].required:o.required)||!e||(void 0!==t?t():this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR01,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.empty.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.getData("cxPropField").field_label))),!1)},setFocusUtil:function(){this.$node.focus=function(){var e=this.$node.querySelector("lyte-checkbox"),t=e||this.$node.querySelector("input");if(!(t=t||this.$node.querySelector("textarea"))||this.$node.querySelector("lyte-dropdown")&&"CRUX-PHONE-COMPONENT"===!this.$node.tagName){(t=this.$node.querySelector("lyte-dropdown"))&&t.open();var o=t?t.querySelector("input"):"";o&&(o.selectionStart=o.value.length),o&&o.focus()}else!e&&t&&(t.selectionStart=t.value.length),t&&t.focus()}.bind(this)},observeMandatoryMixin:function(e,t){var o=this.$node.querySelector(e);o&&"create"==this.getData("cxPropFrom")&&(t=t||"mandatoryField",(1==this.data.cxPropMandatory||0==this.data.cxPropMandatory?this.data.cxPropMandatory:this.data.cxPropLayout?this.data.cxPropField[this.data.cxPropLayout].required:this.data.cxPropField.required)?o.classList.add(t):o.classList.remove(t))},setSelectUtil:function(){this.$node.select=function(){var e=this.$node.querySelector("lyte-input");e&&e.select()}.bind(this)},observeAndSetTooltip:function(){void 0!==this.data.cxPropTooltip?this.setData("tooltip",this.data.cxPropTooltip):this.data.cxPropDisabled?this.setData("tooltip",_cruxUtils.getI18n("crm.lable.read.only")):this.setData("tooltip","")},actions:{focusOnViewElement:function(){this.setData("lyteViewPort",!1),this.$node.focus()},showHideInfoTooltip:function(e){this.showHideInfoTooltip(e)}},methods:{showHideInfoTooltip:function(){this.showHideInfoTooltip()}},observeMandatoryMixin2:function(){var e=1==this.data.cxPropMandatory||0==this.data.cxPropMandatory?this.data.cxPropMandatory:this.data.cxPropLayout?this.data.cxPropField[this.data.cxPropLayout].required:this.data.cxPropField.required;this.setData("mandatory",e)},observeError:function(e,t){"create"==this.data.cxPropFrom&&this.$node.querySelector(e)&&(this.data.isError?this.$node.querySelector(e).classList.add(t):this.$node.querySelector(e).classList.remove(t))},observeClass:function(e,t){if("create"==this.data.cxPropFrom){var o=$L(e,this.$node);if(!o.length)return;t&&t.oldValue&&o.removeClass(t.oldValue),this.data.cxPropClass&&o.addClass(this.data.cxPropClass)}},observeRender:function(){!this.data.lyteViewPort&&this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)},observeMandatoryTypeMixin:function(e){if(this.data.cxPropMandatoryType&&"red_accent_line"!==this.data.cxPropMandatoryType){var t=this.$node.querySelector(".cxMandatoryType");t&&(t.style.color="red"),this.$node.querySelector(".cxMandatoryOptEnabled")||$L(e,this.$node).addClass("cxMandatoryOptEnabled")}else this.$node.querySelector(".cxMandatoryOptEnabled")&&$L(e,this.$node).removeClass("cxMandatoryOptEnabled")},convertLtPropJson:function(e){var t,o={},a={};if(e=e||this.data.cxPropElementProps){for(var r in e){o=e[r]?e[r]:{};var i={};for(var s in o)i[(t=(t=s.replace("ltProp","")).replace("cxProp","")).charAt(0).toLowerCase()+t.slice(1)]=o[s];a[r]=JSON.stringify(i)}this.setData("childCompProps",a)}},observeTabindexMixin:function(){"0"===this.data.cxPropTabindex&&void 0!==this.data.cxPropTabIndex||void 0===this.data.cxPropTabindex?"0"===this.data.cxPropTabIndex&&void 0!==this.data.cxPropTabindex||void 0===this.data.cxPropTabIndex||this.setData("cxPropTabindex",this.data.cxPropTabIndex):this.setData("cxPropTabIndex",this.data.cxPropTabindex)},observeAndSetAriaMixin:function(){if("view"==this.data.cxPropFrom){var e=this.$node.firstElementChild;this.observeTabindexMixin(),e.firstElementChild&&(e=e.firstElementChild),e.tabIndex!=this.data.cxPropTabindex&&(e.tabIndex=this.data.cxPropTabindex);var t=this.data.cxPropAriaAttributes;for(let o in t)$L(e).attr(o,t[o])}}}),Lyte.Component.register("crux-boolean-component",{_template:'<template tag-name="crux-boolean-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropDisplayText}}"><template case="true">{{cxPropValue}}</template><template case="false"><template is="if" value="{{cxPropValue}}"><template case="true"><span id="{{cxPropId}}" class="criteria-yes"></span></template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template></template></template><template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template></template><template case="criteria"></template><template case="filter"> <lyte-dropdown lt-prop-disabled="{{cxPropDisabled}}" on-option-selected="{{method(\'onOptionSelected\')}}" lt-prop-yield="true" lt-prop-tabindex="1" lt-prop-selected="{{value}}" class="{{cruxSetClass(\'ifEquals\',cxPropAppearance,\'flat\',\'cxFlatDropdown\',\'cxBoxDropdown\',cxPropClass)}}" lt-prop-placeholder="{{selectedLabel}}" lt-prop-aria-button="{{cxPropAriaButton}}" on-show="{{method(\'onDropdownOpen\')}}" on-hide="{{method(\'onDropdownClose\')}}"> <template is="yield" yield-name="yield"> <lyte-drop-button data-zcqa="{{cxPropZcqa}}"> <span class="lyteMarginRight">{{selectedLabel}}</span><lyte-icon class="dropdown"></lyte-icon> </lyte-drop-button> <lyte-drop-box class="cxDropbox"> <lyte-drop-body> <template is="for" items="{{cxPropConditions}}" item="item" index="index"> <lyte-drop-item data-value="{{item.value}}" class="{{cruxSetClass(\'criteria-option\',\'ifEquals\',value,item.value,\'criteria-option-selected\',\'\',\'ifEquals\',cxPropFrom,\'criteria\',\'criteria-option-from\',\'\')}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',item.label)}}">{{item.label}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template><template case="create"><template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template><template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showHideInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'showHideInfoTooltip\')}}"> <template is="yield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent">{{cxPropInfoTooltip}}</lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="{{cruxSetClass(\'cxElementValue\',\'if\',cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-checkbox lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-checked="{{lbind(cxPropValue)}}" lt-prop-type="{{cxPropType}}" lt-prop-disabled="{{cxPropDisabled}}" on-changed="{{method(\'onChange\')}}" onclick="{{action(\'onClicked\')}}" class="{{cxPropClass}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tooltip-class="{{cruxSetClass(\'cxElementsTooltip\',cxPropTooltipClass)}}" lt-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-checkbox="{{cxPropAriaCheckbox}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-read-only="{{cxPropReadonly}}" on-before-checked="{{method(\'beforeChecked\')}}" on-before-unchecked="{{method(\'beforeUnchecked\')}}"></lyte-checkbox> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <span class="{{cruxSetClass(\'cxFieldWarningMsg\',cxPropWarningIconClass)}}">{{unescape(cxPropWarningMessage)}}</span> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="yield" yield-name="errorYield"> <lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield> </template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,2]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,6]},{type:"if",position:[1,6],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"componentDynamic",position:[2,1]},{type:"attr",position:[2,3]},{type:"if",position:[2,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[2,5]},{type:"if",position:[2,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropAppearance","cxPropClass","cxPropDisabled","cxPropEmptyValue","cxPropFrom","cxPropId","cxPropInputClass","cxPropLayout","cxPropMandatory","cxPropName","cxPropReadonly","cxPropType","cxPropViewInfoTooltip","cxPropZcqa","lyteUnbound","cxPropTabIndex","cxPropTabindex","lyteViewPort","cxPropValue","cxPropAria","cxPropClearErrorMessage","cxPropErrorClass","cxPropErrorMessage","cxPropErrorSpanClass","cxPropErrorYield","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropConditions","cxPropNoneSelected","cxPropButtonTextInsideElement","cxPropMandatory","cxPropAriaButton","cxPropAriaCheckbox","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropButtonYield","cxPropField","cxPropFieldKey","cxPropInfoTooltip","cxPropLabelClass","cxPropShowWarning","cxPropWarningIconClass","cxPropWarningMessage","cxPropTooltip","cxPropTooltipClass","cxPropTooltipConfig","isError","selectedLabel","tooltip","cxPropPreventFocusOnError","cxPropDisplayText","cxPropAriaErrorProperties"],data:function(){return{cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropClass:Lyte.attr("string",{default:""}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropId:Lyte.attr("string",{default:""}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropLayout:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropName:Lyte.attr("string",{default:""}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"default"}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropZcqa:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("boolean"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorClass:Lyte.attr("string"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropConditions:Lyte.attr("array",{default:[{value:"1",label:_cruxUtils.getI18n("crm.label.selected")},{value:"0",label:_cruxUtils.getI18n("crm.label.notSelected")}]}),cxPropNoneSelected:Lyte.attr("boolean",{default:!1}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropAriaButton:Lyte.attr("object"),cxPropAriaCheckbox:Lyte.attr("object"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropWarningMessage:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropTooltipClass:Lyte.attr("string",{default:"cxtooltip"}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),isError:Lyte.attr("boolean",{default:!1}),selectedLabel:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.select")}),tooltip:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropDisplayText:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object")}},actions:{onClicked:function(){this.getMethods("onClicked")&&this.executeMethod("onClicked")}},methods:{onOptionSelected:function(e,t){this.setData("value",t),this.prevent=!0,this.setData("cxPropValue","1"==t),this.setSelectedLabel(),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},onChange:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&(this.setData("cxPropValue",this.$node.querySelector("lyte-checkbox").ltProp("checked")),this.executeMethod("onValueChange",this.data.cxPropValue))},beforeChecked:function(){return!this.data.cxPropReadonly&&(this.getMethods("onBeforeChecked")?this.executeMethod("onBeforeChecked",this.data.cxPropValue):void 0)},beforeUnchecked:function(){return!this.data.cxPropReadonly&&(this.getMethods("onBeforeUnchecked")?this.executeMethod("onBeforeUnchecked",this.data.cxPropValue):void 0)},onDropdownOpen:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},onDropdownClose:function(e,t){this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)}},init:function(){var e=this.data.cxPropFrom;"criteria"!=e&&"filter"!=e||this.data.cxPropNoneSelected?"create"==e&&(Lyte.arrayUtils(this.data.cxPropConditions,"unshift",[{value:"-1",label:_cruxUtils.getI18n("crm.select")}]),this.data.value="-1",this.observeAndSetTooltip()):(null==this.data.cxPropValue?(this.data.value="1",this.data.cxPropValue=!0):this.data.value=this.data.cxPropValue?"1":"0",this.setSelectedLabel()),-1==["primary","switch","slider"].indexOf(this.data.cxPropType)&&this.setData("cxPropType","default")},getValue:function(){return"-1"==this.data.value&&"create"!=this.data.cxPropFrom?-1:!!this.data.cxPropValue&&this.data.cxPropValue},validate:function(){if("create"==this.data.cxPropFrom){var e=this.validateMandatory(!this.data.cxPropValue);return e&&this.setData("cxPropErrorMessage",""),e}return!0},resetData:function(){this.setData("cxPropValue",!1)},setSelectedLabelObs:function(){this.prevent||(this.setData("value",1==this.data.cxPropValue?"1":"0"),delete this.prevent,this.setSelectedLabel())}.observes("cxPropValue"),setSelectedLabel:function(){for(var e=this.data.value,t=this.data.cxPropConditions,o=0;o<t.length;o++)if(t[o].value==e){this.setData("selectedLabel",t[o].label);break}},observeErrorMessage:function(){this.setData("isError",""!=this.data.cxPropErrorMessage)}.observes("cxPropErrorMessage"),observeMandatory:function(){this.observeMandatoryMixin("lyte-checkbox"),"create"===this.data.cxPropFrom&&this.setFocusUtil()}.observes("cxPropField.required","cxPropMandatory","cxPropFrom").on("didConnect"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-checkbox")&&(this.getData("isError")?this.$node.querySelector("lyte-checkbox").classList.add("cxErrorBox"):this.$node.querySelector("lyte-checkbox").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-checkbox")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-date-component",{_template:'<template tag-name="crux-date-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <span id="{{cxPropId}}" class="cxElementViewValue"> <template is="if" value="{{cxPropValue}}"><template case="true">{{cxPropValue}} <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> </span> </template><template case="criteria"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-boundary="{{cxPropBoundary}}" class="{{cxPropClass}} cxFlex {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-type="date" lt-prop-id="searchValue" lt-prop-calendar-class="cxCriteriaCalendar" lt-prop-placeholder="{{cxPropDatePattern}}" lt-prop-format="{{format}}" on-navigate="{{method(\'navigation\')}}" lt-prop-bind-to-body="false" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-current-date="{{cxPropValue}}" lt-prop-iso="{{lbind(cxPropIso)}}" on-date-change="{{method(\'onDateChange1\')}}" data-zcqa="{{cxPropZcqa}}" lt-prop-min-date="{{cxPropMinDate}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" lt-prop-appearance="{{cxPropAppearance}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-auto-update="false" lt-prop-calendar-properties="{&quot;i18n&quot; : true,&quot;disableNavigation&quot; : true}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-prevent-keys="{{cxPropPreventKeys}}" lt-prop-yield="{{cxPropYield}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}"> <template is="if" value="{{cxPropYield}}"><template case="true"> <template is="yield" yield-name="footer"><lyte-yield yield-name="footer"></lyte-yield></template> </template></template> </lyte-input> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template><template case="filter"> <lyte-input class="lyteInputBox cxBoxInput {{cxPropClass}}" lt-prop-appearance="box" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-calendar-class="smartFilterCal" lt-prop-bind-to-body="false" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-type="date" lt-prop-id="searchValue" on-navigate="{{method(\'navigation\')}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-format="{{format}}" lt-prop-class="cxFilterDateClass {{cxPropInputClass}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-current-date="{{value}}" lt-prop-iso="{{lbind(cxPropIso)}}" data-zcqa="{{cxPropZcqa}}" on-date-change="{{method(\'onDateChange1\')}}" cx-prop-login-user-required="true" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-auto-update="true" onkeyup="{{action(\'onKeyUpCloseCalendar\')}}" lt-prop-prevent-keys="{{cxPropPreventKeys}}" lt-prop-calendar-properties="{{cxPropCalendarProperties}}" lt-prop-callback-delay="{{defaultUndefined}}"></lyte-input> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template><template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-title="{{tooltip}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-type="date" on-navigate="{{method(\'navigation\')}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-format="{{format}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-current-date="{{cxPropValue}}" lt-prop-iso="{{lbind(cxPropIso)}}" data-zcqa="{{cxPropZcqa}}" on-date-change="{{method(\'onDateChange1\')}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" class="cxW100Per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-min-date="{{cxPropMinDate}}" lt-prop-calendar-class="{{cxPropCalendarClaYouss}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" lt-prop-dropdown-freeze="{{cxPropFreeze}}" lt-prop-scope="{{cxPropScope}}" lt-prop-dropdown-properties="{{cxPropDropdownProperties}}" lt-prop-max-date="{{cxPropMaxDate}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" on-before-open="{{method(\'beforeOpen\')}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-bind-to-body="false" lt-prop-calendar-properties="{{cxPropCalendarProperties}}" onkeyup="{{action(\'removeErrorMessage\')}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-prevent-keys="{{cxPropPreventKeys}}" lt-prop-yield="{{cxPropYield}}" lt-prop-prevent-selection="{{cxPropPreventSelection}}"> <template is="if" value="{{cxPropYield}}"><template case="true"> <template is="yield" yield-name="footer"><lyte-yield yield-name="footer"></lyte-yield></template> </template></template> </lyte-input> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0]},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[0]}]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,6]},{type:"if",position:[1,6],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[0]}]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,7]},{type:"if",position:[3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","cxPropAutofocus","lyteViewPort","cxPropValue","cxPropFrom","cxPropDatePattern","cxPropStartWeekDay","format","cxPropField","cxPropFieldKey","cxPropEmptyValue","cxPropZcqa","cxPropYield","cxPropDisabled","cxPropReadonly","cxPropClass","cxPropPlaceholder","isError","cxPropAppearance","cxPropErrorMessage","cxPropIgnoreEmptyValue","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropBoundary","cxPropErrorYield","cxPropMinDate","lyteUnbound","cxPropTabIndex","cxPropTabindex","cxPropDirection","cxPropLabelClass","cxPropTooltip","value","cxPropCalendarClass","cxPropInfoTooltip","cxPropAutocomplete","cxPropDateInUserPattern","cxPropFreeze","cxPropScope","cxPropMaxDate","cxPropDropdownProperties","cxPropAria","cxPropAriaAttributes","cxPropTooltipConfig","cxPropTooltipClass","cxPropHeaderType","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropCalendarProperties","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropPreventKeys","cxPropLayout","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropDisableInvalidDate","cxPropButtonTextInsideElement","cxPropMandatory","defaultUndefined","cxPropCallbackDelay","cxPropUpdateDelay","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropEnableLbind","cxPropPreventFocusOnError","cxPropPreventSelection","tooltip","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropButtonYield","cxPropIso","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDatePattern:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.DATE_PATTERN:"dd/mm/yyyy"}),cxPropStartWeekDay:Lyte.attr("number",{default:"undefined"!=typeof Crm&&Crm.calPreferences&&null!=Crm.calPreferences.WEEKSTARTSON?Crm.calPreferences.WEEKSTARTSON:1}),format:Lyte.attr("string"),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string"),cxPropYield:Lyte.attr("boolean",{default:!1}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropMinDate:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string"),value:Lyte.attr("string"),cxPropCalendarClass:Lyte.attr("string"),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropDateInUserPattern:Lyte.attr("boolean"),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropScope:Lyte.attr("string"),cxPropMaxDate:Lyte.attr("string"),cxPropDropdownProperties:Lyte.attr("object",{default:{preventScroll:"body"}}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropHeaderType:Lyte.attr("string",{default:"dropdown"}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropCalendarProperties:Lyte.attr("object",{default:{}}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropPreventKeys:Lyte.attr("boolean",{default:!1}),cxPropLayout:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropDisableInvalidDate:Lyte.attr("boolean",{default:!0}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),defaultUndefined:Lyte.attr("string"),cxPropCallbackDelay:Lyte.attr("number"),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropEnableLbind:Lyte.attr("boolean",{default:!1}),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropPreventSelection:Lyte.attr("boolean",{default:!1}),tooltip:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropIso:Lyte.attr("string"),cxPropAriaErrorProperties:Lyte.attr("object")}},getValue:function(e){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue;var t=this.$node.querySelector("input").value;if("criteria"==this.getData("cxPropFrom")){if(""==t.trim()||!t.trim())return"";var o=this.getDateObject(t.trim());if(o){for(var a=o.getFullYear()+"-";a.length<5;)a="0"+a;return a+=(o.getMonth()+1<10?"0":"")+(o.getMonth()+1)+"-",a+=(o.getDate()<10?"0":"")+o.getDate()}return""}return e&&e.iso?this.getData("cxPropIso"):this.data.cxPropCalendarProperties&&this.data.cxPropCalendarProperties.i18n?this.data.cxPropDateInUserPattern?$L.moment(t,this.data.cxPropDatePattern.toUpperCase(),{i18n:!0}).i18N(this.data.cxPropDatePattern.toUpperCase()):$L.moment(t,this.data.cxPropDatePattern.toUpperCase(),{i18n:!0}).format(this.data.cxPropDatePattern.toUpperCase()):t},validate:function(){var e=this.$node.querySelector("input"),t=e?e.value:void 0;t&&""==t.trim()&&(t="");var o=this.getData("cxPropField");if("create"==this.getData("cxPropFrom")){var a=!0;return t?(a=this.isValidDate(t))||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(o.field_label)))):a=this.validateMandatory(!0),1==a?this.setData("cxPropErrorMessage",""):(this.focusFromHere=!0,!this.data.cxPropPreventFocusOnError&&this.$node.focus(),delete this.focusFromHere),a}return!(""!=t||!this.getData("cxPropIgnoreEmptyValue"))||this.dateValidate(e)},resetData:function(){this.$node.querySelector("lyte-input").ltProp("currentDate","")},actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)},onKeyUpCloseCalendar:function(){event&&13==event.keyCode&&this.input.blur()},removeErrorMessage:function(){this.data.cxPropClearErrorMessage&&13!==event.keyCode&&this.setData("cxPropErrorMessage","")}},init:function(){if(_lyteUiUtils.updateI18n&&!_cruxUtils.isI18nUpdated&&"undefined"!=typeof I18n){["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","June","July","August","September","October","November","December"].forEach((function(e){_lyteUiUtils.updateI18n(e,_cruxUtils.getI18n(e))})),_cruxUtils.isI18nUpdated=!0}if(this.setData("cxPropDatePattern",this.getData("cxPropDatePattern").replace(/'/g,"")),this.data.format=this.getData("cxPropDatePattern").toUpperCase(),this.getData("cxPropPlaceholder")||this.setData("cxPropPlaceholder",this.getData("format")),"view"==this.data.cxPropFrom){var e=this.data.cxPropValue;e&&-1!=e.indexOf(":")&&(this.data.cxPropValue=e.substring(0,e.split(":")[0].lastIndexOf(" ")))}else if("criteria"===this.data.cxPropFrom){var t=this.data.cxPropCalendarProperties;t&&(t.i18n||Lyte.objectUtils(this.data.cxPropCalendarProperties,"add","i18n",!0),t.disabledNavigation||Lyte.objectUtils(this.data.cxPropCalendarProperties,"add","disableNavigation",!0))}else"create"===this.data.cxPropFrom&&this.setFocusUtil();this.$node.focus=this.focus.bind(this)},observeValue:function(){if(this._prevent)delete this._prevent;else if("view"!=this.data.cxPropFrom){if(this.data.cxPropValue&&this.data.cxPropValue.trim()){this._prevent=!0;var e=this.data.cxPropValue;e=e.replace(/[+-]\d{2}:\d{2}/,"");var t=/^(.*)T/.exec(e);t&&(e=t[1]),this.data.cxPropDateInUserPattern?this.setData("cxPropValue",this.getDateInUserDatePattern(this.getDateObjectFromString(e,this.data.cxPropDatePattern,void 0,this.data.cxPropDisableInvalidDate,{i18n:!0}),void 0,!!this.data.cxPropDisableInvalidDate||this.data.cxPropDatePattern,this.data.cxPropCalendarProperties&&this.data.cxPropCalendarProperties.i18n)):this.setData("cxPropValue",this.getDateInUserDatePattern(this.getDateObjectFromString(e,"YYYY-MM-DD",void 0,this.data.cxPropDisableInvalidDate),void 0,!!this.data.cxPropDisableInvalidDate||"YYYY-MM-DD",this.data.cxPropCalendarProperties&&this.data.cxPropCalendarProperties.i18n)),this._prevent=!1}"filter"==this.getData("cxPropFrom")&&this.setData("value",this.getData("cxPropValue"))}else"view"===this.data.cxPropFrom&&this.data.cxPropValue&&(!1===this.data.cxPropDateInUserPattern?(this.setData("cxPropValue",this.getDateInUserDatePattern(this.getDateObjectFromString(this.data.cxPropValue,"YYYY-MM-DD"),void 0,void 0,this.data.cxPropCalendarProperties&&this.data.cxPropCalendarProperties.i18n)),this.data.cxPropDateInUserPattern=!0):-1!==this.data.cxPropValue.indexOf(":")&&(this.data.cxPropValue=this.data.cxPropValue.substring(0,this.data.cxPropValue.split(":")[0].lastIndexOf(" "))))}.observes("cxPropValue","cxPropFrom").on("init"),methods:{onDateChange1:function(e){var t=this.$node.querySelector("input").value;t.indexOf("'")>-1&&(this.$node.querySelector("input").value=t.replace(/'/g,"")),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onDateChange")&&this.executeMethod("onDateChange",arguments[0],arguments[1],arguments[2]),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),"criteria"!=this.data.cxPropFrom&&(this.isValidDate(this.$node.querySelector("input").value,this.data.cxPropDatePattern)&&this.data.cxPropValue!=this.getValue()||!this.data.cxPropDisableInvalidDate)&&(this._prevent=!0,this.setData("cxPropValue",e.newValue))},navigation:function(){arguments[0]&&arguments[0].target&&arguments[0].target.parentElement.classList.contains("lyteCalCurrentDate")&&(this.setData("selectedDate",this.getDateInUserDatePattern(new Date)),this.input.blur(),arguments[3].$node.querySelector(".lyteCalToday").click())},onCalendarOpenComp:function(){this.getMethods("onCalendarOpen")&&this.executeMethod("onCalendarOpen")},hideInfoTooltip:function(){this.showHideInfoTooltip()},cruxOnBeforeCalendarClose:function(e,t,o){if(this.getMethods("onBeforeCalendarClose")&&0==this.executeMethod("onBeforeCalendarClose",e,t,o))return!1},cruxOnCalendarClose:function(e,t){this.patternValidate(this.$node.querySelector("input")),this.input.calendarDiv&&this.input.calendarDiv.querySelector("lyte-calendar").revertToSelected(),this.getMethods("onCalendarClose")&&this.executeMethod("onCalendarClose",e,t)},beforeOpen:function(){if(this.focusFromHere)return delete this.focusFromHere,!1;this.getMethods("onBeforeCalendarOpen")&&this.executeMethod("onBeforeCalendarOpen")}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeMandatory:function(){this.observeMandatoryMixin("lyte-input")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeIsError:function(){this.input&&"create"==this.getData("cxPropFrom")&&(1==this.data.isError?this.input.classList.add("cruxErrorField","cxErrorBox"):this.input.classList.remove("cruxErrorField","cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),focus:function(){this.input&&(this.input.ltProp("focusAtEnd",!0),this.input.ltProp("focus",!0),delete this.focusFromHere)},observeValue2:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage","")}.observes("cxPropValue"),observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect"),setInput:function(){this.input=this.$node.querySelector("lyte-input")}.observes("lyteViewPort","cxPropFrom").on("didConnect"),observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-time-component",{_template:'<template tag-name="crux-time-component"> <template is="if" value="{{expHandlers(cxPropFrom,\'===\',&quot;criteria&quot;)}}"><template case="true"> <lyte-input lt-prop-end-time="{{cxPropEndTime}}" lt-prop-start-time="{{calendarStartTime}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" class="{{cxPropClass}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-type="time" lt-prop-default-time="{{cxPropValue}}" lt-prop-autofocus="true" lt-prop-focus="true" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-time-format="{{timeFormat}}" data-zcqa="{{cxPropzcqa}}" cx-prop-time-format="{{cxPropTimeFormat}}" on-time-change="{{method(\'onTimeChange\')}}" lt-prop-dropdown="{{cxPropDropdown}}" lt-prop-hour-interval="{{cxPropHourInterval}}" lt-prop-minute-interval="{{cxPropMinuteInterval}}" lt-prop-wheel="{{cxPropWheel}}" lt-prop-dropdown-disabled="{{cxPropDropdowndisabled}}" lt-prop-dropdown-show="{{cxPropDropdownShow}}" lt-prop-dropdown-callout="{{cxPropDropdownCallout}}" lt-prop-dropdown-freeze="{{cxPropDropdownFreeze}}" lt-prop-dropdown-id="{{cxPropDropdownId}}" lt-prop-dropdown-class="{{cxPropDropdownClass}}" lt-prop-validate-on-blur="{{cxPropValidateOnBlur}}" lt-prop-convert-to-nearest="{{cxPropConvertToNearest}}" lt-prop-dropdown-properties="{{cxPropDropdownProperties}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-input-wrapper-class="{{cxPropInputWrapperClass}}"></lyte-input> </template><template case="false"><template is="if" value="{{expHandlers(cxPropFrom,\'===\',&quot;create&quot;)}}"><template case="true"> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-end-time="{{cxPropEndTime}}" lt-prop-start-time="{{calendarStartTime}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" class="{{cxPropClass}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-type="time" lt-prop-default-time="{{cxPropValue}}" lt-prop-autofocus="true" lt-prop-focus="true" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-time-format="{{timeFormat}}" data-zcqa="{{cxPropzcqa}}" on-time-change="{{method(\'onTimeChange\')}}" lt-prop-dropdown="{{cxPropDropdown}}" lt-prop-hour-interval="{{cxPropHourInterval}}" lt-prop-minute-interval="{{cxPropMinuteInterval}}" lt-prop-wheel="{{cxPropWheel}}" lt-prop-dropdown-disabled="{{cxPropDropdowndisabled}}" lt-prop-dropdown-show="{{cxPropDropdownShow}}" lt-prop-dropdown-callout="{{cxPropDropdownCallout}}" lt-prop-dropdown-freeze="{{cxPropDropdownFreeze}}" lt-prop-dropdown-id="{{cxPropDropdownId}}" lt-prop-dropdown-class="{{cxPropDropdownClass}}" lt-prop-validate-on-blur="{{cxPropValidateOnBlur}}" lt-prop-convert-to-nearest="{{cxPropConvertToNearest}}" lt-prop-dropdown-properties="{{cxPropDropdownProperties}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-input-wrapper-class="{{cxPropInputWrapperClass}}"></lyte-input> </template></template></template></template> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropFrom","cxPropValue","cxPropDisabled","cxPropReadonly","cxPropFocus","cxPropAppearance","cxPropTabIndex","cxPropTabindex","cxPropBoundary","cxPropTimeFormat","cxPropZcqa","timeFormat","cxPropHourInterval","cxPropMinuteInterval","cxPropDropdown","cxPropDropdowndisabled","cxPropDropdownShow","cxPropDropdownCallout","cxPropDropdownFreeze","cxPropClass","cxPropField","cxPropWheel","cxPropDropdownId","cxPropDropdownClass","cxPropValidateOnBlur","cxPropConvertToNearest","cxPropDropdownProperties","cxPropWrapperClass","cxPropInputClass","cxPropInputWrapperClass","cxPropId","convertedTimeFormat","cxPropEndTime","cxPropStartTime","calendarStartTime","cxPropUpdateDelay","cxPropCallbackDelay","cxPropAriaErrorProperties"],data:function(){return{cxPropFrom:Lyte.attr("string",{default:"criteria"}),cxPropValue:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropFocus:Lyte.attr("boolean",{default:!0}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropBoundary:Lyte.attr("object"),cxPropTimeFormat:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.TIME_FORMAT:"hh:mm a"}),cxPropZcqa:Lyte.attr("string"),timeFormat:Lyte.attr("number"),cxPropHourInterval:Lyte.attr("number",{default:1}),cxPropMinuteInterval:Lyte.attr("number",{default:30}),cxPropDropdown:Lyte.attr("boolean",{default:!0}),cxPropDropdowndisabled:Lyte.attr("boolean",{default:!1}),cxPropDropdownShow:Lyte.attr("boolean",{default:!1}),cxPropDropdownCallout:Lyte.attr("boolean",{default:!1}),cxPropDropdownFreeze:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropField:Lyte.attr("object",{default:{}}),cxPropWheel:Lyte.attr("boolean",{default:!1}),cxPropDropdownId:Lyte.attr("string",{default:""}),cxPropDropdownClass:Lyte.attr("string",{default:""}),cxPropValidateOnBlur:Lyte.attr("boolean",{default:!1}),cxPropConvertToNearest:Lyte.attr("boolean",{default:!1}),cxPropDropdownProperties:Lyte.attr("object",{default:{}}),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropInputWrapperClass:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{defult:""}),convertedTimeFormat:Lyte.attr("string",{default:""}),cxPropEndTime:Lyte.attr("string"),cxPropStartTime:Lyte.attr("string"),calendarStartTime:Lyte.attr("string"),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropAriaErrorProperties:Lyte.attr("object")}},actions:{},methods:{onTimeChange:function(e){this.setData("cxPropValue",e.newValue),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())}},getValue:function(){var e=this.$node.querySelector("input").value;return"hh:mm A"==this.data.convertedTimeFormat&&(e=$L.moment(e,"hh:mm A").format("HH:mm")),e},validate:function(){var e=this.$node.querySelectorAll("input");return this.timeValidate(e[0])},init:function(){this.setFocusUtil(),"hh:mm a"===this.data.cxPropTimeFormat?this.setData("timeFormat",12):this.setData("timeFormat",24);var e=this.data.timeFormat;if("criteria"===this.data.cxPropFrom&&null==this.data.cxPropValue)this.setData("cxPropValue","01:00"+("12"==e?" "+_cruxUtils.getI18n("AM"):""));else if("create"===this.data.cxPropFrom&&null==this.data.cxPropValue){const e=new Date;var t=e.getMinutes(),o=e.getHours()+":"+t;"hh:mm a"==this.data.cxPropTimeFormat&&(o=$L.moment(o,"HH:mm").format("hh:mm A")),this.setData("cxPropValue",o)}"view"!=this.getData("cxPropFrom")&&this.getData("cxPropStartTime")&&this.setData("calendarStartTime",this.getData("cxPropStartTime"))},observeValue:function(){this.getData("cxPropTimeFormat").indexOf("a")>-1?(this.setData("calendarStartTime","12:00 AM"),this.setData("convertedTimeFormat","hh:mm A")):(this.setData("calendarStartTime","00:00"),this.setData("convertedTimeFormat",this.data.cxPropTimeFormat));var e=$L.moment(this.data.cxPropValue,this.data.convertedTimeFormat,{i18n:!0}).validate();if(e||"hh:mm A"!==this.data.convertedTimeFormat||this.preventObserver||!this.data.cxPropValue){if(!e&&"HH:mm"===this.data.cxPropTimeFormat&&this.data.cxPropValue&&!this.preventObserver){t=$L.moment(this.getData("cxPropValue"),"hh:mm A").format("HH:mm");this.preventObserver=!0,null!=t?(this.setData("cxPropValue",t),this.previousValue=t):this.setData("cxPropValue",this.previousValue),this.preventObserver=!1}}else{var t=$L.moment(this.getData("cxPropValue"),"HH:mm").format("hh:mm A");this.preventObserver=!0,null!=t?(this.setData("cxPropValue",t),this.previousValue=t):this.setData("cxPropValue",this.previousValue),this.preventObserver=!1}e&&(this.previousValue=this.data.cxPropValue)}.observes("cxPropValue","cxPropTimeFormat").on("init"),timeValidate:function(e){var t=this.isValidTime(e.value.trim(),this.getData("convertedTimeFormat"));if(!t){var o=this.getData("cxPropField"),a=(o.errorFieldLabel?o.errorFieldLabel:o.field_label).replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,"."),r=_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(a));this.showAlert(r,e),e.setAttribute("autocomplete","off")}return t},isValidTime:function(e,t){if(!e)return!1;t=t||this.getData("convertedTimeFormat");try{return $L.moment(e,t,{i18n:!0}).validate()}catch(e){return!1}}},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-date-time-component",{_template:'<template tag-name="crux-date-time-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <span id="{{cxPropId}}" class="cxElementViewValue">{{displayValue}}</span> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template><template case="filter"></template><template case="criteria"> <div class="cxDateTimeWrapper"> <lyte-input lt-prop-type="datetime" lt-prop-appearance="{{cxPropAppearance}}" class="cxBoxInput w100per" lt-prop-bind-to-body="false" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-id="searchValue" lt-prop-placeholder="{{cxPropDatePattern}}" lt-prop-current-date="{{selectedDate}}" lt-prop-iso="{{lbind(cxPropIso)}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" on-navigate="{{method(\'navigation\')}}" lt-prop-yield="{{cxPropYield}}" on-date-change="{{method(\'onDateChange1\')}}" lt-prop-format="{{format}}" data-zcqa="{{cxPropZcqa}}" lt-prop-min-date="{{cxPropMinDate}}" lt-prop-minute-interval="{{cxPropMinuteInterval}}" lt-prop-dropdown="true" lt-prop-direction="{{cxPropDirection}}" lt-prop-time-format="{{cxPropTimeFormatInput}}" lt-prop-default-time="{{startTime}}" lt-prop-start-time="{{calendarStartTime}}" on-time-change="{{method(\'onTimeChange1\')}}" ondragstart="return false;" ondrop="return false;" lt-prop-show-interval="{{cxPropShowInterval}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" lt-prop-boundary="{{cxPropBoundary}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-calendar-properties="{&quot;i18n&quot; : true,&quot;disableNavigation&quot; : true}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-prevent-keys="{{cxPropPreventKeys}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-time-aria-attributes="{{cxPropTimeAriaAttributes}}"> <template is="if" value="{{cxPropYield}}"><template case="true"> <template is="yield" yield-name="footer"><lyte-yield yield-name="footer"></lyte-yield></template> </template></template> </lyte-input> </div> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <div> <lyte-input lt-prop-name="{{cxPropDateFieldName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-type="datetime" lt-prop-appearance="{{cxPropAppearance}}" class="cxBoxInput cxW100Per" on-navigate="{{method(\'navigation\')}}" lt-prop-current-date="{{selectedDate}}" lt-prop-iso="{{lbind(cxPropIso)}}" lt-prop-start-week-day="{{cxPropStartWeekDay}}" lt-prop-yield="{{cxPropYield}}" on-date-change="{{method(\'onDateChange1\')}}" data-zcqa="{{cxPropZcqa}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-calendar-class="{{cxPropCalendarClass}}" lt-prop-min-date="{{cxPropMinDate}}" lt-prop-minute-interval="{{cxPropMinuteInterval}}" lt-prop-dropdown="true" lt-prop-direction="{{cxPropDirection}}" lt-prop-time-format="{{cxPropTimeFormatInput}}" lt-prop-default-time="{{startTime}}" lt-prop-start-time="{{calendarStartTime}}" on-time-change="{{method(\'onTimeChange1\')}}" ondragstart="return false;" ondrop="return false;" lt-prop-end-time="{{cxPropEndTime}}" lt-prop-format="{{format}}" lt-prop-show-interval="{{cxPropShowInterval}}" on-before-open="{{method(\'onBeforeOpen\')}}" lt-prop-dropdown-disabled="{{cxPropDisabled}}" lt-prop-placeholder="{{cxPropPlaceholder}}" on-calendar-open="{{method(\'onCalendarOpenComp\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" lt-prop-dropdown-freeze="{{cxPropFreeze}}" lt-prop-scope="{{cxPropScope}}" lt-prop-dropdown-properties="{&quot;preventScroll&quot;:&quot;body&quot;}" lt-prop-max-date="{{cxPropMaxDate}}" on-before-calendar-close="{{method(\'cruxOnBeforeCalendarClose\')}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" on-calendar-close="{{method(\'cruxOnCalendarClose\')}}" lt-prop-common-placeholder="{{cxPropCommonPlaceholder}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-header-type="{{cxPropHeaderType}}" lt-prop-bind-to-body="false" lt-prop-show-today="{{cxPropShowToday}}" onkeyup="{{action(\'removeErrorMessage\')}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-time-class="{{cxPropInputTimeClass}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-prevent-keys="{{cxPropPreventKeys}}" lt-prop-time-placeholder="{{cxPropTimePlaceholder}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-calendar-properties="{{cxPropCalendarProperties}}" on-before-hide="{{method(\'beforeTimeClose\')}}" on-before-show="{{method(\'beforeTimeOpen\')}}" lt-prop-dropdown-class="{{cxPropBoxClass}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-prevent-selection="{{cxPropPreventSelection}}"> <template is="if" value="{{cxPropYield}}"><template case="true"> <template is="yield" yield-name="footer"><lyte-yield yield-name="footer"></lyte-yield></template> <template is="registerYield" yield-name="yield"><span>{{itemValue.time}}</span><template is="if" value="{{cxPropShowInterval}}"><template case="true"><span style="opacity: 0.5;float: right;margin-left: 5px;">{{itemValue.interval}}</span></template></template></template> </template></template> </lyte-input> <template is="if" value="{{expHandlers(cxPropIsDropdownIconNode,\'&amp;&amp;\',expHandlers(cxPropDisabled,\'!\'))}}"><template case="true"><lyte-icon class="{{cxPropDropdownIconNodeClass}}"></lyte-icon></template></template> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[0]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1,1]},{type:"attr",position:[3,1,1,1]},{type:"if",position:[3,1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"registerYield",position:[3],dynamicNodes:[{type:"text",position:[0,0]},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]}]}},default:{}},{type:"componentDynamic",position:[3,1,1]},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,1,7]},{type:"if",position:[3,1,7],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,1,9]},{type:"if",position:[3,1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","cxPropAutofocus","lyteViewPort","cxPropValue","cxPropFrom","cxPropField","cxPropFieldKey","cxPropDatePattern","cxPropTimeFormat","cxPropStartWeekDay","format","cxPropEmptyValue","selectedDate","startTime","cxPropYield","isError","cxPropTimeZone","cxPropAppearance","cxPropErrorMessage","calendarStartTime","cxPropDateFieldId","cxPropDateFieldName","cxPropTimeFieldId","cxPropTimeFieldName","cxPropClearErrorMessage","cxPropTimeFormatInput","cxPropId","cxPropName","cxPropDirection","cxPropLabelClass","cxPropEndTime","cxPropCalendarClass","cxPropMinDate","cxPropReadonly","cxPropStartTime","cxPropDefaultTime","cxPropDisabled","cxPropTabIndex","cxPropTabindex","cxPropZcqa","cxPropClass","cxPropShowInterval","lyteUnbound","cxPropWrapperClass","cxPropTooltip","cxPropPlaceholder","cxPropErrorYield","cxPropInfoTooltip","cxPropFreeze","cxPropScope","cxPropMaxDate","cxPropDropdownProperties","cxPropDatetimeInUserPattern","cxPropBoundary","cxPropAria","cxPropAriaAttributes","cxPropTimeAriaAttributes","cxPropCommonPlaceholder","cxPropTooltipConfig","cxPropTooltipClass","cxPropAutocomplete","cxPropHeaderType","displayValue","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropShowToday","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropPreventKeys","cxPropTimePlaceholder","cxPropReturnTimezone","cxPropLayout","cxPropInputTimeClass","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropButtonTextInsideElement","cxPropMandatory","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropEnableLbind","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropPreventFocusOnError","cxPropIsDropdownIconNode","cxPropDropdownIconNodeClass","cxPropCalendarProperties","tooltip","cxPropBoxClass","cxPropCallbackDelay","cxPropUpdateDelay","cxPropMinuteInterval","cxPropPreventSelection","cxPropButtonYield","cxPropIso","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropDatePattern:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.DATE_PATTERN:"dd/mm/yyyy"}),cxPropTimeFormat:Lyte.attr("string"),cxPropStartWeekDay:Lyte.attr("number",{default:"undefined"!=typeof Crm&&Crm.calPreferences&&null!=Crm.calPreferences.WEEKSTARTSON?Crm.calPreferences.WEEKSTARTSON:1}),format:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedDate:Lyte.attr("string"),startTime:Lyte.attr("string"),cxPropYield:Lyte.attr("boolean",{default:!1}),isError:Lyte.attr("boolean",{default:!1}),cxPropTimeZone:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.TIME_ZONE:"+05.30"}),cxPropAppearance:Lyte.attr("string",{default:"box"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),calendarStartTime:Lyte.attr("string"),cxPropDateFieldId:Lyte.attr("string",{default:""}),cxPropDateFieldName:Lyte.attr("string",{default:""}),cxPropTimeFieldId:Lyte.attr("string",{default:""}),cxPropTimeFieldName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropTimeFormatInput:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropEndTime:Lyte.attr("string"),cxPropCalendarClass:Lyte.attr("string"),cxPropMinDate:Lyte.attr("string",{default:""}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropStartTime:Lyte.attr("string"),cxPropDefaultTime:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropShowInterval:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropWrapperClass:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string"),cxPropPlaceholder:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropScope:Lyte.attr("string"),cxPropMaxDate:Lyte.attr("string"),cxPropDropdownProperties:Lyte.attr("object",{default:{preventScroll:"body"}}),cxPropDatetimeInUserPattern:Lyte.attr("boolean"),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropTimeAriaAttributes:Lyte.attr("object",{default:{}}),cxPropCommonPlaceholder:Lyte.attr("string"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropHeaderType:Lyte.attr("string",{default:"dropdown"}),displayValue:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropShowToday:Lyte.attr("boolean",{default:!0}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropPreventKeys:Lyte.attr("boolean",{default:!1}),cxPropTimePlaceholder:Lyte.attr("string"),cxPropReturnTimezone:Lyte.attr("boolean",{default:!1}),cxPropLayout:Lyte.attr("string"),cxPropInputTimeClass:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropEnableLbind:Lyte.attr("boolean",{default:!1}),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropIsDropdownIconNode:Lyte.attr("boolean",{default:!1}),cxPropDropdownIconNodeClass:Lyte.attr("string",{default:""}),cxPropCalendarProperties:Lyte.attr("object",{default:{}}),tooltip:Lyte.attr("string"),cxPropBoxClass:Lyte.attr("string",{default:""}),cxPropCallbackDelay:Lyte.attr("number"),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropMinuteInterval:Lyte.attr("number",{default:30}),cxPropPreventSelection:Lyte.attr("boolean",{default:!1}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropIso:Lyte.attr("string"),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){if(_lyteUiUtils.updateI18n&&!_cruxUtils.isI18nUpdated&&"undefined"!=typeof I18n){["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","June","July","August","September","October","November","December"].forEach((function(e){_lyteUiUtils.updateI18n(e,_cruxUtils.getI18n(e))})),_cruxUtils.isI18nUpdated=!0}this.setData("cxPropDatePattern",this.getData("cxPropDatePattern").replace(/'/g,"")),this.setData("format",this.getData("cxPropDatePattern").toUpperCase()),this.getData("cxPropPlaceholder")||this.setData("cxPropPlaceholder",this.getData("format")),this.preventDateSet=!1,"create"===this.data.cxPropFrom&&this.setFocusUtil()},getValue:function(e){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue;var t=this.$node.querySelectorAll("input");if(""!=t[0].value.trim()){if(e&&e.userFormat)return t[0].value+" "+t[1].value;var o,a;if(this.getData("cxPropIso")&&e&&e.iso)a=o=this.getData("cxPropIso").split("+")[0];else{function r(e){return e<10?"0"+e:e}for(var i=(o=this.getDateObject(t[0].value.trim(),t[1].value)).getFullYear().toString();i.length<4;)i="0"+i;a=i+"-"+r(o.getMonth()+1)+"-"+r(o.getDate())+"T"+r(o.getHours())+":"+r(o.getMinutes())+":"+r(o.getSeconds())}if(!o)return"";var s=this.getData("cxPropTimeZone");return("create"!=this.data.cxPropFrom||this.data.cxPropReturnTimezone)&&(a+=s.replace(".",":")),a}return""},validate:function(){var e=this.$node.querySelectorAll("input"),t=this.data.cxPropField;if("create"==this.data.cxPropFrom){if(null==e||0==e.length||!e[0].value||!e[0].value.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.data.cxPropPreventFocusOnError||(this.focusFromHere=!0,this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),!1);var o=this.isValidDate(e[0].value,void 0),a=$L.moment(e[1].value,this.data.cxPropTimeFormat.replace("a","A"),{i18n:!0}).validate();return o&&a?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.data.cxPropPreventFocusOnError||(this.focusFromHere=!0,this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o=!1),o}return this.dateValidate(e[0])},resetData:function(){this.$node.querySelectorAll("input")[0].value="",this.$node.querySelectorAll("input")[1].value=this.data.startTime},methods:{show:function(e,t,o){this.getMethods("onShow")&&this.executeMethod("onShow",e,t,o)},hide:function(e,t,o){this.getMethods("onHide")&&this.executeMethod("onHide",e,t,o)},onDateChange1:function(){this.$node.querySelector("input").value=this.$node.querySelector("input").value.replace(/'/g,""),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"date")},onTimeChange1:function(){this.$node.querySelector("input").value||this.preventDateSet||this.setData("selectedDate",this.getDateInUserDatePattern(new Date)),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"time")},navigation:function(){arguments[0]&&arguments[0].target&&arguments[0].target.parentElement.classList.contains("lyteCalCurrentDate")&&(this.setData("selectedDate",this.getDateInUserDatePattern(new Date)),this.$node.querySelector("lyte-input").blur(),arguments[3].$node.querySelector(".lyteCalToday").click())},onBeforeOpen:function(){if(this.focusFromHere)return delete this.focusFromHere,!1;this.getMethods("onBeforeCalendarOpen")&&this.executeMethod("onBeforeCalendarOpen")},onCalendarOpenComp:function(){this.getMethods("onCalendarOpen")&&this.executeMethod("onCalendarOpen")},hideInfoTooltip:function(){this.showHideInfoTooltip()},cruxOnBeforeCalendarClose:function(e,t){this.getMethods("onBeforeCalendarClose")&&this.executeMethod("onBeforeCalendarClose",e,t)},cruxOnCalendarClose:function(e,t){this.patternValidate(this.$node.querySelector("input")),this.$node.querySelector("lyte-input").calendarDiv&&this.$node.querySelector("lyte-input").calendarDiv.querySelector("lyte-calendar").revertToSelected(),this.getMethods("onCalendarClose")&&this.executeMethod("onCalendarClose",e,t)},beforeTimeClose:function(){this.getMethods("onBeforeHide")&&this.executeMethod("onBeforeHide")},beforeTimeOpen:function(){this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow")}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),obeserveCxPropValue:function(e){var t=this.getData("cxPropTimeFormat");t||(t="undefined"!=typeof Crm?Crm.userDetails.TIME_FORMAT:"HH:mm",this.setData("cxPropTimeFormat",t));var o="24";if(t.indexOf("a")>-1?(o="12",this.setData({cxPropTimeFormatInput:"12",calendarStartTime:"12:00 "+_cruxUtils.getI18n("AM")})):this.setData({cxPropTimeFormatInput:"24",calendarStartTime:"00:00"}),this.timeFormat=o,"view"!=this.getData("cxPropFrom")){if(this.getData("cxPropStartTime")&&this.setData("calendarStartTime",this.getData("cxPropStartTime")),this.getData("cxPropValue"))if(x=(x=this.getData("cxPropValue")).replace(/[+-]\d{2}:\d{2}/,""),this.data.cxPropDatetimeInUserPattern){var a=this.data.cxPropDatePattern.toUpperCase(),r=6;if("hh:mm a"==t&&(r+=3,t="hh:mm A"),(s=$L.moment(x,a.toUpperCase()+" "+t,{i18n:!0})).validate()){var i=this.getData("cxPropCalendarProperties");i&&i.i18n?this.setData("selectedDate",s.i18N(a.toUpperCase())):this.setData("selectedDate",s.format(a.toUpperCase())),this.setData("startTime",s.i18N(t))}else{var s=x.substring(0,x.length-r);this.setData("selectedDate",s),this.setData("startTime",x.substring(x.length-r+1))}}else{var p=x.split("-");s=new Date(p[0],p[1]-1,p[2].split("T")[0]);if(m=(x=x.split("T"))[1]?x[1].split(":"):""){if(e&&e.item&&"cxPropTimeZone"==e.item){var l=$L.moment(x[1],"HH:mm:ss");l.timezone(this.data.cxPropTimeZone),m=l.format("HH:mm").split(":")}s.setHours(m[0]),s.setMinutes(m[1])}this.setData("selectedDate",this.getDateInUserDatePattern(s,void 0,void 0,this.data.cxPropCalendarProperties&&this.data.cxPropCalendarProperties.i18n)),this.setData("startTime",this.getTimeInUserFormat(s))}else if(this.setData("selectedDate",""),this.getData("cxPropDefaultTime"))this.setData("startTime",this.getData("cxPropDefaultTime"));else if(!this.getData("cxPropStartTime"))if("create"!=this.data.cxPropFrom)this.setData("startTime","01:00"+("12"==o?" "+_cruxUtils.getI18n("AM"):""));else if(this.data.cxPropCommonPlaceholder||this.data.cxPropTimePlaceholder)this.setData("startTime","");else{var n,c=(m=new Date).getHours(),d=m.getMinutes().toString(),u=c>11?_cruxUtils.getI18n("PM"):_cruxUtils.getI18n("AM");1==d.length&&(d="0"+d),"12"==o?(12!=c&&1==(c=(c%12).toString()).length&&(c="0"+c),n=c+":00 "+u):(c<10&&(c="0"+c),n=c+":00"),this.preventDateSet=!0,this.setData("startTime",n),this.preventDateSet=!1}}else if(this.data.cxPropValue)if(0==this.data.cxPropDatetimeInUserPattern){var x,m;p=this.data.cxPropValue.split("-"),s=new Date(p[0],p[1]-1,p[2].split("T")[0]);(m=(x=this.data.cxPropValue.split("T"))[1]?x[1].split(":"):"")&&(s.setHours(m[0]),s.setMinutes(m[1])),this.setData("displayValue",this.getDateInUserDatePattern(s,void 0,void 0,this.data.cxPropCalendarProperties&&this.data.cxPropCalendarProperties.i18n)+" "+this.getTimeInUserFormat(s,this.data.timeFormat))}else this.setData("displayValue",this.data.cxPropValue);else this.getData("cxPropEmptyValue")?this.setData("displayValue",this.getData("cxPropEmptyValue")):this.setData("displayValue","")}.observes("cxPropValue","cxPropFrom","cxPropTimeFormat","cxPropTimeZone").on("init"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"),this.lyteInput=this.$node.querySelector("lyte-input"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-input")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),actions:{preventInvalidTime:function(){this.paste()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},removeErrorMessage:function(){this.data.cxPropClearErrorMessage&&13!==event.keyCode&&this.setData("cxPropErrorMessage","")}},observesdidConnect:function(){if("create"==this.getData("cxPropFrom")&&this.$node.querySelectorAll("input")[1]){var e=this;this.$node.querySelectorAll("input")[1].onpaste=function(){e.paste()}}this.$node.focus=this.focus.bind(this)}.observes("lyteViewPort").on("didConnect"),paste:function(){var e=event.clipboardData.getData("text"),t=(e=e.split(":"))[0],o=e[1],a=/^\d{1,2}$/,r="AM";if(!a.test(t)||!a.test(o)||""==t||t>23||""==o||o>59||null==t||null==o)event.preventDefault();else{var i=!1;12==this.timeFormat&&t>12&&(t-=12,i=!0,r="PM"),1==t.length&&(t="0"+t,i=!0),1==o.length&&(o="0"+o,i=!0),i&&(this.setData("startTime",24==this.timeFormat?t+":"+o:t+":"+o+" "+r),event.preventDefault())}},observeStartTime:function(){this.setData("calendarStartTime",this.getData("cxPropStartTime"))}.observes("cxPropStartTime"),focus:function(){var e=this.$node.querySelector("lyte-input");e&&(e.ltProp("focusAtEnd",!0),e.ltProp("focus",!0))},observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect"),didDestroy:function(){delete this.lyteInput},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-email-component",{_template:'<template tag-name="crux-email-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> <div>{{cxPropValue}}</div> <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropValue}}"><template case="true"><template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"><template is="if" value="{{cxPropViewClipLabel}}"><template case="true"> <a class="cxEmailViewLink cxElementViewValue cxElementViewClipLabel" href="mailto:{{cxPropValue}}" id="{{cxPropId}}" onclick="{{action(\'stopP\')}}"> <lyte-text lt-prop-value="{{cxPropValue}}"></lyte-text> </a> </template><template case="false"> <a class="cxEmailViewLink cxElementViewValue cxElementViewWrapLabel" href="mailto:{{cxPropValue}}" id="{{cxPropId}}" onclick="{{action(\'stopP\')}}">{{cxPropValue}}</a> </template></template><template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template></template></template></template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template></template><template case="create"><template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showHideInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHoverCard" on-hovercard-hide="{{method(\'showHideInfoTooltip\')}}"> {{cxPropInfoTooltip}} </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" class="cxW100Per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-placeholder="{{cxPropPlaceholder}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"> <span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span> </div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="yield" yield-name="errorYield"> <lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield> </template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1,0]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"text",position:[3,1]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"componentDynamic",position:[2,1]},{type:"attr",position:[2,3]},{type:"if",position:[2,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[2,5]},{type:"if",position:[2,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[2,7]},{type:"if",position:[2,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","cxPropAppearance","cxPropAutofocus","cxPropClass","cxPropDirection","cxPropDisabled","cxPropEmptyValue","cxPropEnableLbind","cxPropFrom","cxPropIconClass","cxPropId","cxPropInputClass","cxPropLayout","cxPropMandatory","cxPropMaskingProperties","cxPropMaxlength","cxPropName","cxPropPlaceholder","cxPropReadonly","cxPropTabIndex","cxPropTabindex","cxPropViewClipLabel","cxPropViewInfoTooltip","cxPropWrapperClass","cxPropZcqa","lyteUnbound","lyteViewPort","cxPropValue","cxPropAria","cxPropAriaAttributes","cxPropClearErrorMessage","cxPropErrorClass","cxPropErrorMessage","cxPropErrorSpanClass","cxPropErrorYield","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropPreventFocusOnError","cxPropField","cxPropFieldKey","cxPropInfoTooltip","cxPropLabelClass","cxPropShowWarning","cxPropWarningIconClass","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropWarningMessage","cxPropTooltip","cxPropTooltipClass","cxPropTooltipConfig","isError","selectedLabel","tooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropButtonYield","cxPropUpdateDelay","cxPropCallbackDelay","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropIconClass:Lyte.attr("string",{default:"cxEditIcon"}),cxPropId:Lyte.attr("string",{default:""}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropLayout:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropMaskingProperties:Lyte.attr("object"),cxPropMaxlength:Lyte.attr("number"),cxPropName:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropViewClipLabel:Lyte.attr("boolean",{default:!1}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropWrapperClass:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorClass:Lyte.attr("string"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropWarningMessage:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string",{default:""}),cxPropTooltipClass:Lyte.attr("string"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),isError:Lyte.attr("boolean",{default:!1}),selectedLabel:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.select")}),tooltip:Lyte.attr("string"),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropAriaErrorProperties:Lyte.attr("object")}},getValue:function(){return"string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue")},validate:function(){var e=this.getValue();if(!e)return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.data.cxPropPreventFocusOnError||this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);if(!this.validateLength(e))return!1;var t=!1;if("undefined"==typeof XRegExp){t=(o=/^[A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF_]([A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF!#$%&'*+-/=?^_`{|}~.]*)@(?=.{4,256}$)(([A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)(([-_]*[A-Za-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*)[.])+[A-Za-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,22}$/).test(e)}else{var o=/^[\p{L}\p{M}\p{N}_]([\p{L}\p{M}\p{N}!#$%&'*+-/=?^_`{|}~.]*)@(?=.{4,256}$)(([\p{L}\p{N}\p{M}]+)(([-_]*[\p{L}\p{M}\p{N}])*)[.])+[\p{L}\p{M}]{2,22}$/,a=new XRegExp(o.source,"i");t=XRegExp.test(e.trim(),a)}return t?this.setData("cxPropErrorMessage",""):this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),t},resetData:function(){this.$node.querySelector("lyte-input").ltProp("value","")},methods:{onChange:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))}},observeErrorMessage:function(){this.setData("isError",""!=this.data.cxPropErrorMessage)}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){this.observeError("lyte-input","cxErrorBox")}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-input"),"create"==this.data.cxPropFrom&&this.setFocusUtil()}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeClassFn:function(e){this.observeClass("lyte-input",e)}.observes("cxPropClass","lyteViewPort").on("didConnect"),observeRenderFn:function(e){this.observeRender()}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-layout-component",{_template:'<template tag-name="crux-layout-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue.name,cxPropMaskingProperties)}} </template><template case="false">{{cxPropValue.name}} <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> </template><template case="filter"></template><template case="criteria"></template><template case="create"> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-dropdown id="{{cxPropId}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-yield="true" lt-prop-type="{{cxPropType}}" lt-prop-tabindex="1" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-box="{{cxPropAriaBox}}" lt-prop-aria-body="{{cxPropAriaBody}}" lt-prop-active-element="{{concat(\'#\',cxPropId,\'search_layout\')}}" lt-prop-aria-button="{{cxPropAriaButton}}" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-disabled-list="{{disabledList}}" lt-prop-selected="{{selectedIds}}" on-option-selected="{{method(\'selectLayout\')}}" on-before-show="{{method(\'onBeforeLayoutDropdown\')}}" on-hide="{{method(\'closeDropdown\')}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}} {{cxPropClass}} {{if(cxPropIsDropdownIconNode,\'cxDropdownIconNodePresent\',\'\')}}" on-before-hide="{{method(\'beforeHide\')}}" lt-prop-display-value="{{displayValue}}" lt-prop-placeholder="{{placeholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-tooltip-config="{&quot;position&quot;: &quot;followcursor&quot;, &quot;appearance&quot;: &quot;box&quot;}" lt-prop-icon-class="{{if(cxPropShowDisabledIcon,cxPropDisabledIconClass,cxPropDropdownIconNodeClass)}}" lt-prop-icon-node-class="{{if(cxPropShowDisabledIcon,cxPropDisabledIconClass,cxPropDropdownIconNodeClass)}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-title="{{tooltip}}" lt-prop-prevent-parent-scroll="{{cxPropPreventParentScroll}}" on-show="{{method(\'onDropdownOpen\')}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{expHandlers(cxPropType,\'!=\',&quot;single&quot;)}}"><template case="true"> <lyte-drop-button data-zcqa="{{cxPropZcqa}}" class="{{if(cruxOr(cxPropDropdownIconNodeClass,cxPropShowDisabledIcon),\'ltDropdownIconNodePresent\',\'\')}}"> <ul class="lyteMultipleSelect"> <template is="for" items="{{value}}" item="layout" index="index"> <li data-value="{{layout.id}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'setToolTip\',this)}}">{{layout.name}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="cxW100Per" lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;.{{searchScope}}&quot;, &quot;target&quot;:&quot;.cruxlayoutList&quot;, &quot;search&quot;:&quot;.cruxlayoutList:not(.lyteDropdownActive)&quot;}" on-search="{{method(\'showNoResult\')}}" id="search_layout" lt-prop-placeholder="{{placeholder}}" onclick="{{action(\'searchBoxClicked\')}}" on-focus="{{method(\'onSearchBoxFocused\')}}" onkeydown="{{action(\'preventDefault\',this,event)}}" lt-prop-trim="true"></lyte-search> </li> </ul> <template is="if" value="{{expHandlers(cxPropIsDropdownIconNode,\'&amp;&amp;\',expHandlers(cxPropDisabled,\'!\'))}}"><template case="true"><lyte-icon class="{{cxPropDropdownIconNodeClass}}"></lyte-icon> </template><template case="false"><template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><lyte-icon class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></lyte-icon></template></template></template></template> </lyte-drop-button> </template></template> <lyte-drop-box class="cxDropbox {{cxPropBoxClass}}"> <lyte-drop-body class="{{searchScope}}"> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxLayoutLoaderWrap cxAlignCenter"> <span class="cxElementsLoaderBg cxLayoutLoaderIcon"></span> </div> </template><template case="false"><template is="for" items="{{layout}}" item="lay" index="index"><template is="if" value="{{negate(cruxContains(cxPropExcludeIds,lay.id))}}"><template case="true"><template is="if" value="{{expHandlers(modelReq,\'==\',\'wizard\')}}"><template case="true"> <lyte-drop-item class="picklist_values cruxlayoutList" data-value="{{lay.id}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',lay.name)}}" selected="{{if(cruxContains(selectedIds,lay.id),true,false)}}">{{lay.name}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item class="picklist_values cruxlayoutList" data-value="{{lay.id}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',lay.name)}}" selected="{{if(cruxContains(selectedIds,lay.id),true,false)}}">{{lay.name}}</lyte-drop-item> </template></template></template></template></template></template></template> <template is="if" value="{{expHandlers(layoutLength,\'!\')}}"><template case="true"> <div class="lyteDropdown-disabled cxDropdownNoResult">{{cruxGetI18n(\'crm.label.no.options.found\')}}</div> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropModule","layout","value","layoutLength","disabledList","cxPropEmptyValue","selectedIds","cxPropField","cxPropFieldKey","cxPropZcqa","placeholder","cxPropType","cxPropIgnoreEmptyValue","showLoading","moduleId","cxPropAppearance","cxPropBoundary","lyteUnbound","cxPropTabIndex","cxPropTabindex","cxPropId","modelReq","cxPropClass","searchScope","cxPropMaskingProperties","cxPropDontShowDisabledLayouts","displayValue","cxPropLayouts","cxPropPlaceholder","cxPropViewInfoTooltip","cxPropDisplayValue","cxPropIsDropdownIconNode","cxPropDropdownIconNodeClass","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropDisabled","cxPropAria","cxPropAriaButton","cxPropAriaBox","cxPropAriaBody","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropReadonly","cxPropTooltip","tooltip","cxPropCustomData","cxPropPreventParentScroll","cxPropExcludeIds","cxPropBoxClass","isError","cxPropErrorMessage","cxPropErrorYield","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropMandatory","cxPropDisableIntegLayout","cxPropAriaErrorProperties"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("object"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropModule:Lyte.attr("string"),layout:Lyte.attr("array"),value:Lyte.attr("array",{default:[]}),layoutLength:Lyte.attr("boolean",{default:!0}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedIds:Lyte.attr("array",{default:[]}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string"),placeholder:Lyte.attr("string",{default:_cruxUtils.getI18n("None")}),cxPropType:Lyte.attr("string",{default:"multisearch"}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),showLoading:Lyte.attr("boolean",{default:!0}),moduleId:Lyte.attr("string"),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropBoundary:Lyte.attr("object",{default:{}}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),modelReq:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),searchScope:Lyte.attr("string",{default:"parentscope_"}),cxPropMaskingProperties:Lyte.attr("object"),cxPropDontShowDisabledLayouts:Lyte.attr("boolean",{default:!1}),displayValue:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.select")}),cxPropLayouts:Lyte.attr("array"),cxPropPlaceholder:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropDisplayValue:Lyte.attr("string"),cxPropIsDropdownIconNode:Lyte.attr("boolean",{default:!1}),cxPropDropdownIconNodeClass:Lyte.attr("string",{default:"dropdown"}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaButton:Lyte.attr("object"),cxPropAriaBox:Lyte.attr("object",{default:{}}),cxPropAriaBody:Lyte.attr("object",{default:{}}),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropTooltip:Lyte.attr("string"),tooltip:Lyte.attr("string"),cxPropCustomData:Lyte.attr("object"),cxPropPreventParentScroll:Lyte.attr("boolean"),cxPropExcludeIds:Lyte.attr("array",{default:[]}),cxPropBoxClass:Lyte.attr("string",{default:""}),isError:Lyte.attr("boolean"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropDisableIntegLayout:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){var e=this.data.cxPropFrom;if("criteria"==e||"filter"==e||"create"==e){"undefined"!=typeof moduleRecordMapping?this.data.moduleId=moduleRecordMapping[this.data.cxPropModule].id:this.data.moduleId=this.data.cxPropModule,this.data.modelReq||(this.data.modelReq=this.data.cxPropField&&this.data.cxPropField.api_name.match("Layout")?"layout":"wizard");var t=this.data.searchScope;t+=this.data.modelReq,this.getData("cxPropId")&&(t=t+"_"+this.data.cxPropId),this.setData("searchScope",t),this.data.cxPropType||this.setData("cxPropType","multisearch"),this.data.cxPropDisplayValue&&this.setData("displayValue",this.data.cxPropDisplayValue),"create"===e&&this.setFocusUtil()}},methods:{addToList:function(e,t,o){Lyte.arrayUtils(this.data.value,"push",this.data.layout.filter((function(e){return e.id==t}))[0]),Lyte.arrayUtils(this.data.selectedIds,"push",t),$L("."+this.getData("searchScope")+" lyte-drop-item").length==JSON.parse(o).length&&this.setData("layoutLength",!1),this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),""!=this.$node.querySelector("lyte-search").ltProp("value")&&(this.adding=!0,this.$node.querySelector("lyte-search").setValue("")),this.preventClose=!0},removeFromList:function(e,t){for(var o=this.data.value,a=0;a<o.length;a++)if(o[a].id==t){Lyte.arrayUtils(this.data.value,"removeAt",a),Lyte.arrayUtils(this.data.selectedIds,"removeAt",a);break}0==this.data.value.length&&this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):_cruxUtils.getI18n("None")),this.setData("layoutLength",!0),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.dropdown&&this.dropdown.open()},showNoResult:function(e){this.data.showLoading||(this.closing?this.closing=!1:this.dropdown&&this.dropdown.component.childComp.classList.contains("lyteDropdownHidden")&&this.dropdown.toggle(),this.adding?this.adding=!1:(e=e.filter((e=>!e.classList.contains("lyteDropdownActive"))),this.setData("layoutLength",!(0==e.length))))},selectLayout:function(e,t,o,a){this.setData("value",[{id:t,name:a.innerText}]),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.setData("selectedIds",[t])},onBeforeLayoutDropdown:function(){if(this.data.cxPropReadonly)return!1;if(this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",arguments[0],arguments[1]),this.data.cxPropLayouts&&(this.setData("layout",this.data.cxPropLayouts),this.setData("showLoading",!1),"single"!=this.data.cxPropType?this.dropdown&&this.dropdown.setData("ltPropSelected",this.getData("selectedIds")):this.data.selectedIds.length>0&&this.dropdown&&this.dropdown.ltProp("selected",this.data.selectedIds[0])),null==this.data.layout){this.getData("moduleId");var e=this,t=this.data.cxPropModule&&moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule;store.findAll(this.data.modelReq,{module:t},!0,void 0,this.data.cxPropCustomData).then((function(t){"single"!=e.data.cxPropType||"create"==e.data.cxPropFrom||null!=t[0]&&"cruxLayoutSelect"==t[0].id||t.splice(0,0,{name:_cruxUtils.getI18n("crm.select"),id:"cruxLayoutSelect"});var o=[],a=!1,r=t.length,i="undefined"!=typeof Crm?store.peekRecord("user",Crm.userDetails.USER_ID):{};!i&&window.clientPortalName&&(i={profile:{id:Crm.userDetails.PROFILE_ID}});for(var s=0;s<r;s++){var p=t[s].profiles;"wizard"===e.data.modelReq&&window.clientPortalName&&(p=t[s].portal_user_types);var l=i.profile,n=t[s].module;n&&n.access_type&&"team_based"===n.access_type&&(l=n.private_profile),a=e.checkProfilePermission(p,l),"territory"==e.data.modelReq&&null==t[s].parent_id||a&&(!1===e.data.cxPropDontShowDisabledLayouts||!0===e.data.cxPropDontShowDisabledLayouts&&"inactive"!==t[s].status&&-1!==t[s].status)&&(!1===e.data.cxPropDisableIntegLayout||!0===e.data.cxPropDisableIntegLayout&&!t[s].created_for)&&(o.push(t[s]),a=!1)}e.setData("layout",o),(0===o.length||"single"!==e.data.cxPropType&&o.length===e.getData("value").length)&&e.setData("layoutLength",!1),e.setData("showLoading",!1),"single"!==e.data.cxPropType?e.dropdown&&e.dropdown.setData("ltPropSelected",e.getData("selectedIds")):e.data.selectedIds.length>0&&e.dropdown&&e.dropdown.ltProp("selected",e.data.selectedIds[0]),e.$node.querySelector("lyte-search input")&&e.$node.querySelector("lyte-search input").value&&e.$node.querySelector("lyte-search").setValue(e.$node.querySelector("lyte-search input").value)}),(function(t){e.setData({layout:[],layoutLength:!1,showLoading:!1})}))}else"single"!=this.data.cxPropType&&this.setData("layoutLength",!(this.data.layout.length==this.data.value.length))},closeDropdown:function(e,t){this.closing=!0,this.$node.querySelector("lyte-search")&&""!=this.$node.querySelector("lyte-search").ltProp("value")&&(this.$node.querySelector("lyte-search").setValue(""),this.dropdown&&this.dropdown.close()),this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)},beforeHide:function(e){if(this.preventClose&&(this.preventClose=!1,e&&"scroll"==e.type))return!1},onSearchBoxFocused:function(e,t){var o=this.dropdown;"criteria"==this.data.cxPropFrom&&o&&!o.ltProp("isOpen")&&o.open()},onDropdownOpen:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)}},checkProfilePermission:function(e,t){if(!e||!t)return!0;for(var o=0,a=e.length;o<a;o++)if(e[o].id==t.id)return!0;return!1},getValue:function(){for(var e=this.data.value,t=[],o=0;o<e.length;o++)t.push({id:e[o].id,name:e[o].name});return"single"==this.data.cxPropType?t[0]:t},validate:function(){return!(0==this.data.value.length&&!this.data.cxPropIgnoreEmptyValue)||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),!1)},observeValue:function(){if("view"!==this.data.cxPropFrom&&this.data.cxPropValue&&(this.data.cxPropValue.hasOwnProperty("layouts")||this.data.cxPropValue.hasOwnProperty("id")||this.data.cxPropValue.length)){var e=this.data.cxPropValue;e=e.layouts?e.layouts.hasOwnProperty("id")?[].concat(e.layouts):e.layouts:[e];for(var t=[],o=!0,a=0;a<e.length;a++)e[a].selected=!0,e[a].name||(o=!1),t.push(e[a].id);if(o){this.data.layoutLength;this.setData({value:e,selectedIds:t}),"single"==this.data.cxPropType&&this.setData("displayValue",e[0].name),this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"")}else{var r=this.data.cxPropModule&&"filter"===this.data.cxPropFrom&&moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule,i=this;store.findAll(this.data.modelReq,{module:r},!0,void 0,this.data.cxPropCustomData).then((function(o){for(var a=e.length,r=0;r<a;r++){var s=store.peekRecord(i.data.modelReq,e[r].id);s?e[r].name=s.name:(e.splice(r,1),t.splice(r,1),r--,a--)}i.data.layoutLength;i.setData({value:e,selectedIds:t}),i.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==i.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"")}),(function(){for(var o=e.length,a=0;a<o;a++)e[a].name||(e.splice(a,1),t.splice(a,1),o--,a--);i.data.layoutLength;i.setData({value:e,selectedIds:t}),i.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==i.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"")}))}}}.observes("cxPropValue").on("init"),actions:{searchBoxClicked:function(){if(this.dropdown&&1==this.dropdown.ltProp("isOpen"))return this.$node.querySelector("lyte-search").querySelector("input").value&&this.$node.querySelector("lyte-search").setValue(""),!1},preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},setToolTip:function(e){e.offsetWidth<e.scrollWidth?e.setAttribute("title",e.textContent):e.setAttribute("title","")}},didDestroy:function(){"view"!=this.data.cxPropFrom&&(delete this.dropdown,window.removeEventListener("resize",this.resetPositionBind))},setDropdown:function(){"view"!=this.data.cxPropFrom&&(this.dropdown=this.$node.querySelector("lyte-dropdown"),this.resetPositionBind=this.resetPosition.bind(this),window.addEventListener("resize",this.resetPositionBind))}.observes("lyteViewPort").on("didConnect"),resetPosition:function(){setTimeout(function(){this.dropdown.resetPosition()}.bind(this),200)},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observeTooltip:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),observeErrorMessage:function(){this.setData("isError",""!==this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){if("create"===this.getData("cxPropFrom")||"criteria"===this.data.cxPropFrom){var e=this.$node.querySelector("lyte-dropdown");e&&(this.getData("isError")?e.classList.add("cxErrorBox"):e.classList.remove("cxErrorBox"))}}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-dropdown")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),keyDownEvent:function(){this.$node.querySelector("lyte-dropdown")&&this.bindEventForAria()}.observes("cxPropAria").on("didConnect"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-dropdown")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation","crux-aria-dropdown-mixin"]}),Lyte.Mixin.register("crux-lookup-mixin",{lookupInit:function(e,t,o,a,r){var i=[this.executeMethod("fetchModuleData",t)];this.data.cxPropRelatedId&&(this.setData("headerOptions",[{id:this.data.cxPropRelatedId,name:_cruxUtils.getI18n("crm.related.contact.account",this.data.module.plural_label,this.data.cxPropRelatedName)},{id:"2",name:_cruxUtils.getI18n("crm.allcontact.show",this.data.module.plural_label)}]),this.setData("selectedHeaderValue",this.data.cxPropRelatedId),i.push(this.executeMethod("fetchModuleData",this.data.cxPropRelatedModuleId)));var s=this;Lyte.resolvePromises(i).then((function(t){if(e.$node){var i=t[0];e.setData("module",i),s.data.modId||s.setData("modId",i.id),e.setData("moduleName",i.module_name),e.setData("displayField",i.display_field.api_name),o?e.getRecs():e.beforeShowFunc(a,r,!0)}}))},constructSearchFilter:function(e,t,o,a){if(this.data.cxPropSearchFields&&this.data.cxPropSearchFields.length>0)return JSON.stringify(this.constructGroup(this.data.cxPropSearchFields,t));var r=o&&null!==o.crypt?"equals":a?"starts_with":"contains",i=a?"("+e+":"+r+":"+t.replace(/[(]/g,"\\(").replace(/[)]/g,"\\)")+")":{comparator:r,field:{api_name:e},value:t};if(("Products"===this.data.modulenameUicomp||"Products"===this.data.moduleName)&&this.data.module.fields){var s=this.data.module.fields.filterBy({api_name:"Product_Code"});s.length&&s[0].visible&&(i=a?"("+i+"or(Product_Code:starts_with:"+t.replace(/[(]/g,"\\(").replace(/[)]/g,"\\)")+"))":{group_operator:"or",group:[i,{comparator:"contains",field:{api_name:"Product_Code"},value:t}]})}if(this.data.header)for(var p=0;p<this.data.header.length;p++)if(this.data.header[p].api_name!=e)switch(this.data.header[p].cxTypeMapping){case"email":case"phone":i=a?"("+i+"or("+this.data.header[p].api_name+":starts_with:"+t.replace(/[(]/g,"\\(").replace(/[)]/g,"\\)")+"))":{group_operator:"or",group:[i,{comparator:"contains",field:{api_name:this.data.header[p].api_name},value:t}]}}return a?i:JSON.stringify(i)},constructGroup:function(e,t){return e.length>1?{group_operator:"or",group:[{comparator:"contains",field:{api_name:e[0]},value:t},this.constructGroup(e.splice(1),t)]}:{comparator:"contains",field:{api_name:e[0]},value:t}}}),Lyte.Component.register("crux-lookup-component",{_template:'<template tag-name="crux-lookup-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{showEmptyValue}}"><template case="true"> {{cxPropEmptyValue}} </template><template case="false"><template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true"><template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;multi_module_lookup&quot;)}}"><template case="true">{{cruxMaskValue(concat(lookupValue,\' - \',modulePluralLabel),cxPropMaskingProperties)}}</template><template case="false">{{cruxMaskValue(lookupValue,cxPropMaskingProperties)}}</template></template> </template><template case="false"> <div class="cxLookupCompViewWrap"> <link-to data-zcqa="{{cxPropZcqa}}" lt-prop-route="{{cxPropRouteName}}" lt-prop-dp="{{cxPropDynamicParams}}" lt-prop-qp="{{cxPropQueryParams}}" lt-prop-id="{{cxPropId}}" lt-prop-td="{{cxPropTransitionData}}" lt-prop-class="cxLink cxLookupViewWrapper" class="cxLookupCompLink" lt-prop-target="{{cxPropTarget}}" onmousemove="{{action(\'showLookupBC\',this,true)}}" onmouseleave="{{action(\'showLookupBC\',this)}}" onclick="{{action(\'onLinkClick\')}}"><template is="if" value="{{expHandlers(expHandlers(cxPropIconClass,\'&amp;&amp;\',lookupValue),\'&amp;&amp;\',expHandlers(cxPropHideIconForView,\'!\'))}}"><template case="true"><div class="cxLookupViewIcon {{cxPropIconClass}}"></div></template></template><lyte-text lt-prop-value="{{lookupValue}}" lt-prop-show="{{cxPropTooltipShow}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" class="cruxPreventClick"></lyte-text></link-to> <template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;multi_module_lookup&quot;)}}"><template case="true"><span class="cxLookupCompSeparator">-</span><lyte-text class="cxLookupCompMulModValue" lt-prop-value="{{modulePluralLabel}}"></lyte-text></template></template> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </div> </template></template> </template></template></template></template> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB vam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cruxAnd(cxPropDisabled,expHandlers(cxPropReadonly,\'!\')),\'cxElementDisabled\',\'\')}}"> <div class="cxLookupComponent cxBoxWithRightIcon {{cxPropWrapperClass}} {{if(cxPropDisplayIconOnLeft,\'cxBoxWithLeftIcon\',\'\')}}"> <div class="cxBoxLeftContent"> <template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;multi_module_lookup&quot;)}}"><template case="true"> <crux-dropdown data-zcqa="{{cxPropZcqa}}_module_dropdown" cx-prop-icon-class="{{cxPropDropdownIconClass}}" cx-prop-is-dropdown-icon-node="true" class="cxMultiModuleDropdown {{if(ifEquals(modId,moduleDisabledList[0]),\'cxDropdownLabelDisabled\',\'\')}}" cx-prop-options="{{multiModuleModules}}" cx-prop-user-value="plural_label" cx-prop-system-value="id" cx-prop-type="single" on-option-select="{{method(\'multiModuleSelect\')}}" cx-prop-disabled-list="{{moduleDisabledList}}" on-before-show="{{method(\'moduleDropdownBeforeShow\')}}" cx-prop-selected="{{modId}}" cx-prop-disabled="{{cxPropReadonly}}"></crux-dropdown> </template></template> <template is="if" value="{{cxPropAutocomplete}}"><template case="true"> <lyte-autocomplete lt-prop-dropdown-class="cxLookupDropbox cxDropbox" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-box="{{cxPropAriaBox}}" lt-prop-aria-body="{{cxPropAriaBody}}" lt-prop-aria-button="{{cxPropAriaButton}}" lt-prop-input="{&quot;class&quot; : &quot;cxLookupCompInputElem&quot;}" lt-prop-trim="true" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-prevent-inside-click="true" data-zcqa="{{cxPropZcqa}}" lt-prop-value="{{lookupSingle}}" on-select="{{method(\'autoComp\')}}" lt-prop-dropdown-height="250px" lt-prop-yield="true" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-highlight="false" lt-prop-min-length="{{cxPropMinLength}}" lt-prop-value-set="true" on-scroll="{{method(\'scrollRecord\')}}" lt-prop-autofocus="{{cxPropAutofocus}}" on-before-show="{{method(\'beforeShow\')}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-placeholder="{{cxPropPlaceholder}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" class="{{cxPropClass}} {{if(isError,\'cxErrorBox\')}} {{if(showLoading,\'cxLookupInputLoading\')}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-error-class="noErrClass" on-focus="{{method(\'autoFocus\')}}" lt-prop-external-search="true" on-ext-search="{{method(\'beforeSearch\')}}" on-blur="{{method(\'onBlurInput\')}}" after-render="{{method(\'afterRenderAutocomplete\')}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" on-hide="{{method(\'onHideDropdown\')}}" lt-prop-id="{{cxPropInputId}}" lt-prop-dropdown="{&quot;preventParentScroll&quot; : &quot;{{cxPropPreventParentScroll}}&quot; , boxButtonWidth : &quot;min-button&quot;}" onfocusout="{{action(\'onFocusInput\',true)}}" lt-prop-open-on-focus="{{cxPropOpenOnFocus}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="{{cxPropBoxClass}}"> <lyte-drop-body class="{{if(visible,\'cxVisibleLookup\')}}"> <template is="if" value="{{expHandlers(initComp,\'&amp;&amp;\',expHandlers(ften.length,\'>\',0))}}"><template case="true"><template is="for" items="{{ften}}" item="val" index="index"> <lyte-drop-item data-value="{{val.id}}" class="lookupSearchLi" data-zcqa="{{val[displayField]}}" onmouseenter="{{action(\'showHideIcon1\',true,val)}}" onmouseleave="{{action(\'showHideIcon1\',false,val)}}"> <lyte-autocomplete-label> <lyte-text class="cxLookupDropboxLabel" lt-prop-value="{{val[displayField]}}"></lyte-text> <template is="if" value="{{cxPropShowHideTooltip}}"><template case="true"> <span class="cxLookupInfoIcon {{if(val.cxPropShowIcon,\'cruxLookupPopover\')}}" onmouseenter="{{action(\'infoPop\',this,val,event)}}" onmouseleave="{{action(\'infoPop\',this,val,event)}}" style="{{if(val.cxPropShowIcon,\'visibility: visible;\',\'visibility: hidden\')}}"></span> </template></template> </lyte-autocomplete-label> </lyte-drop-item> </template></template><template case="false"><template is="if" value="{{expHandlers(initComp,\'&amp;&amp;\',expHandlers(expHandlers(ften,\'!\'),\'||\',expHandlers(ften.length,\'===\',0)))}}"><template case="true"> <template is="if" value="{{searchPerformed}}"><template case="true"> <div class="cxDropdownNoResult">{{cruxGetI18n(\'crm.template.listview.search.no.results\')}}</div> </template><template case="false"> <div class="cxDropdownNoResult">{{cruxGetI18n(\'crm.krp.no.records.found\',module.singular_label)}}</div> </template></template> </template></template></template></template> <template is="if" value="{{showDropdownLoading}}"><template case="true"><div class="cxloaderWrapper"> <span class="cxSpinloader"></span> </div></template></template> </lyte-drop-body> <template is="if" value="{{cxPropFooterYield}}"><template case="true"><lyte-drop-footer><lyte-yield yield-name="footer"></lyte-yield></lyte-drop-footer></template></template> </lyte-drop-box> </template> </lyte-autocomplete> </template><template case="false"><template is="if" value="{{cxPropDisabled}}"><template case="true"> <lyte-input class="cxLookupCompDisabledInput" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-value="{{lookupSingle}}" lt-prop-disabled="true"></lyte-input> </template><template case="false"> <lyte-input class="cxLookupCompReadonlyInput" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-value="{{lookupSingle}}" lt-prop-readonly="true" onclick="{{action(\'showLookup\',event)}}" lt-prop-id="{{cxPropInputId}}" on-blur="{{method(\'onBlurCallback\')}}"></lyte-input> </template></template></template></template> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxBoxSpinWrapper cxFlexCenter"> <span class="cxElementsLoaderBg" id="Crm_{{cxPropModule}}_{{cxPropField.column_name}}_loadimg"></span> </div> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(cxPropAutocomplete,\'&amp;&amp;\',expHandlers(cxPropDisabled,\'!\')),\'&amp;&amp;\',expHandlers(cxPropReadonly,\'!\')),\'&amp;&amp;\',expHandlers(cxPropShowCloseIcon,\'||\',expHandlers(expHandlers(cxPropShowCloseIcon,\'!\'),\'&amp;&amp;\',lookupSingle)))}}"><template case="true"> <div class="cxBoxCloseIconWrap cxFlexCenter"> <div id="Crm_lookup_img_Crm_{{cxPropModule}}_{{cxPropField.column_name}}" class="cxBoxCloseIcon cP {{cxPropClearIconClass}}" onclick="{{action(\'clearlookupField\')}}" data-zcqa="lookup_Crm_{{cxPropModule}}_{{cxPropField.column_name}}_close"></div> </div> </template></template></template></template> </div> <template is="if" value="{{expHandlers(cxPropShowDisabledIcon,\'!\')}}"><template case="true"> <div tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" class="cxLookupIcon cxBoxRightIcon cxFlexCenter cP {{cxPropRightIconClass}}" onclick="{{action(\'showLookup\',event)}}" data-zcqa="{{if(cxPropImgZcqa,cxPropImgZcqa,concat(\'lookup_\',cxPropZcqa))}}" onkeydown="{{action(\'showLookupOnKeyEvent\',event,this)}}"> <div class="{{cxPropIconClass}}" data-label="Crm_{{cxPropModule}}_{{cxPropField.column_name}}" id="Crm_{{cxPropModule}}_{{cxPropField.column_name}}_img" tabindex="{{cxPropField.tab_index}}" lt-prop-title="{{cxPropIconTooltip}}"></div> </div> </template></template> <template is="if" value="{{renderLookup}}"><template case="true"><template is="if" value="{{cxPropAdvanceSearchEnabled}}"><template case="true"> <crux-lookup-filter-modal cx-prop-field-of-lookup-val="{{cxPropFieldOfLookupVal}}" cx-prop-parent-module="{{cxPropParentModule}}" cx-prop-default-criteria="{{cxPropDefaultCriteria}}" module="{{lbind(module)}}" show="{{show}}" disp-init="{{dispInit}}" fetch-module-data="{{method(\'fetchModule\')}}" fetch-records="{{method(\'fetchRecordsData\')}}" mod-id="{{modId}}" display-field="{{lbind(displayField)}}" is-single="{{isSingle}}" record="{{lbind(record)}}" selected-single="{{selectedSingle.id}}" selected-single-record="{{lbind(selectedSingle)}}" lookup-single="{{lbind(lookupSingle)}}" module-name="{{lbind(moduleName)}}" on-value-change="{{method(\'triggerOnValueChange\')}}" cx-prop-value="{{cxPropValue}}" render-lookup="{{lbind(renderLookup)}}" fields-obj="{{moduledataUicomp}}" cx-prop-create-yield="{{cxPropCreateYield}}" temp-close="{{lbind(tempClose)}}" id-index="{{idIndex}}" cx-prop-related-id="{{cxPropRelatedId}}" cx-prop-related-module-id="{{cxPropRelatedModuleId}}" cx-prop-related-name="{{cxPropRelatedName}}" cx-prop-dont-show-related-dropdown="{{cxPropDontShowRelatedDropdown}}" cx-prop-field="{{moduledataUicomp}}" cx-prop-return-full-object-on-get="{{cxPropReturnFullObjectOnGet}}" cx-prop-default-fields="{{cxPropDefaultFields}}" related-record-data="{{cxPropRelatedRecordData}}" cx-prop-additional-params="{{cxPropAdditionalParams}}" on-close="{{method(\'modalClosed\')}}" cx-prop-all-fields-needed="{{cxPropAllFieldsNeeded}}" cx-prop-query-param="{{cxPropQueryParam}}" is-related-record-passed="{{if(cxPropRelatedRecordData.length,true,false)}}" before-request-change-data="{{method(\'changeDataMethod\')}}"> <template is="yield" yield-name="createYield"><lyte-yield yield-name="createYield"></lyte-yield></template> </crux-lookup-filter-modal> </template><template case="false"> <crux-lookup-modal fetch-records-on-enter="{{cxPropFetchRecordsOnEnter}}" module-data="{{moduleData}}" moduledata-uicomp="{{moduledataUicomp}}" api-name="{{apiName}}" query-param-object="{{lbind(queryParamObject)}}" related-field-comp="{{lbind(relatedFieldComp)}}" advanced-search="{{Crm.userDetails.isLookupAdvancedSearchEnabled}}" column-list="{{Crm.userDetails.isLookupAdvancedSearchEnabled}}" related-to="{{lbind(relatedTo)}}" record="{{lbind(record)}}" mod-id="{{modId}}" disp-init="{{dispInit}}" rendered-page="{{lbind(renderedPage)}}" selected-single="{{selectedSingle.id}}" selected-single-record="{{lbind(selectedSingle)}}" display-field="{{lbind(displayField)}}" is-single="{{isSingle}}" field-mapping="{{uiTypeMapping}}" lookup-single="{{lbind(lookupSingle)}}" module-name="{{lbind(moduleName)}}" module="{{lbind(module)}}" per-page="10" show="{{show}}" rep-record="{{lbind(repRecord)}}" fld-id="{{fldId}}" relations="{{lbind(relations)}}" fetch-module-data="{{method(\'fetchModule\')}}" cx-prop-value="{{cxPropValue}}" fetch-records="{{method(\'fetchRecordsData\')}}" cx-prop-field="{{moduledataUicomp}}" on-create-new="{{method(\'createNew\')}}" cx-prop-related-to="{{cxPropRelatedTo}}" on-value-change="{{method(\'triggerOnValueChange\')}}" cx-prop-create-yield="{{cxPropCreateYield}}" cx-prop-header="{{cxPropHeader}}" meta-more-records="{{cxPropMetaMoreRecords}}" cx-prop-fields="{{cxPropFields}}" cx-prop-related-id="{{cxPropRelatedId}}" cx-prop-related-module-id="{{cxPropRelatedModuleId}}" cx-prop-related-name="{{cxPropRelatedName}}" cx-prop-meta-more-records="{{cxPropMetaMoreRecords}}" cx-prop-dont-show-related-dropdown="{{cxPropDontShowRelatedDropdown}}" on-close="{{method(\'modalClosed\')}}" cx-prop-return-full-object-on-get="{{cxPropReturnFullObjectOnGet}}" cx-prop-disabled-list="{{cxPropDisabledList}}" cx-prop-query-param="{{cxPropQueryParam}}" cx-prop-search-fields="{{cxPropSearchFields}}"> <template is="yield" yield-name="createYield"><lyte-yield yield-name="createYield"></lyte-yield></template> </crux-lookup-modal> </template></template></template></template> </div> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-error-unescape-arguments="{{cxPropErrorUnescapeArguments}}" cx-prop-id="{{cxPropId}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}" cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template><template case="filter"></template><template case="criteria"> <div class="cxLookupMultiModuleWrap"> <template is="if" value="{{expHandlers(cxPropHideTextComponent,\'!\')}}"><template case="true"> <crux-text-component id="lookupTextComponent" cx-prop-from="criteria" on-value-change="{{method(\'changeValue\')}}" cx-prop-login-user="{{cxPropShowLoggedInUser}}" on-error="{{method(\'textError\')}}" cx-prop-value="{{lookupValue}}" cx-prop-appearance="{{cxPropAppearance}}" cx-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" cx-prop-field="{{cxPropField}}"></crux-text-component> </template></template> <template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;multi_module_lookup&quot;)}}"><template case="true"> <span class="pLR10">{{cruxGetI18n(\'crm.label.simply.in\')}}</span> <crux-dropdown class="cxMultiModuleCriteriaDropdown" cx-prop-options="{{multiModuleModules}}" cx-prop-user-value="plural_label" cx-prop-system-value="id" cx-prop-type="single" on-option-select="{{method(\'multiModuleSelect\')}}" cx-prop-disabled-list="{{moduleDisabledList}}" cx-prop-selected="{{modId}}"></crux-dropdown> </template></template> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-error-unescape-arguments="{{cxPropErrorUnescapeArguments}}" cx-prop-id="{{cxPropId}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}" cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,0]},{type:"if",position:[1,1,0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1,1]},{type:"if",position:[3,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1,1,3]},{type:"if",position:[3,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["val.cxPropShowIcon","'visibility: visible;'","'visibility: hidden'"]}}}}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0,0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,1,5]},{type:"if",position:[3,1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,1,1,7]},{type:"if",position:[3,1,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","lyteViewPort","cxPropDefaultCriteria","cxPropFieldOfLookupVal","cxPropParentModule","cxPropModule","cxPropValue","cxPropRouteName","cxPropZcqa","cxPropDynamicParams","cxPropQueryParams","cxPropTransitionData","cxPropIconClass","cxPropId","cxPropFrom","cxPropEmptyValue","lookupSingle","cxPropAutofocus","cxPropTabindex","cxPropTabIndex","cxPropDisabled","cxPropPlaceholder","cxPropReadonly","cxPropToggle","cxPropField","cxPropFieldKey","cxPropLabelClass","cxPropAdvanceSearchEnabled","lookupCreateRecord","initComp","ften","records","apiName","cxPropClass","cxPropMaxlength","displayField","modulenameUicomp","columnName","renderLookup","moduleData","moduledataUicomp","queryParamObject","relatedFieldComp","relatedTo","record","modId","dispInit","renderedPage","selectedSingle","isSingle","uiTypeMapping","moduleName","show","repRecord","fldId","relations","module","value","cxPropTarget","cxPropCreateYield","cxPropRelatedTo","lyteUnbound","cxPropAutocomplete","cxPropFetchRecordsOnEnter","cxPropAppearance","isError","cxPropErrorMessage","cxPropShowHideTooltip","cxPropClearErrorMessage","cxPropTooltip","cxPropImagePath","cxPropMetaMoreRecords","cxPropIconTooltip","showEmptyValue","cxPropErrorYield","cxPropHeader","cxPropFields","visible","cxPropInfoTooltip","cxPropImgZcqa","lookupValue","cxPropShowBc","lookupId","cxPropFooterYield","cxPropRecordImageSrc","cxPropAria","cxPropAriaButton","cxPropAriaBody","cxPropAriaBox","cxPropPopoverWrapperClass","cxPropMaskingProperties","tooltip","cxPropRelatedId","cxPropRelatedModuleId","cxPropRelatedName","cxPropRelatedRecordData","cxPropShowCloseIcon","cxPropTooltipConfig","cxPropTooltipClass","cxPropHideIconForView","cxPropDontShowRelatedDropdown","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","searchPerformed","cxPropErrorClass","cxPropInputId","showLoading","cxPropErrorSpanClass","cxPropClearIconClass","cxPropPreventParentScroll","cxPropRightIconClass","cxPropWrapperClass","cxPropLayout","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropReturnFullObjectOnGet","cxPropDefaultFields","cxPropDisplayIconOnLeft","cxPropMandatory","cxPropType","modulePluralLabel","multiModuleModules","moduleDisabledList","cxPropDisabledList","cxPropAllFieldsNeeded","cxPropTooltipShow","cxPropQueryParam","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropPreventFocusOnError","cxPropSearchFormat","cxPropSearchFields","cxPropCallAllowed","cxPropShowImageInBc","cxPropBcZcqa","cxPropMinLength","cxPropOpenOnFocus","cxPropBoxClass","cxPropTransition","cxPropOffset","cxPropCurrentModuleSingularLabel","cxPropInputValue","cxPropDetailRoute","cxPropFieldTypeMappingSelector","cxPropModalProperty","cxPropLookupProperties","cxPropModuleNameSelector","cxPropLookupUitypeComparator","cxPropFetchModuleData","cxPropFetchRecords","cxPropHoverCallback","cxPropShowAllFields","cxPropNoResultMessage","cxPropForcedFetchBc","cxPropPerpage","cxPropButtonYield","cxPropNoResultMessage","cxPropUpdateDelay","cxPropCallbackDelay","cxPropShowLookupPopupFields","cxPropAriaErrorProperties","cxPropDropdownIconClass"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropDefaultCriteria:Lyte.attr("array",{default:[]}),cxPropFieldOfLookupVal:Lyte.attr("array",{default:[]}),cxPropParentModule:Lyte.attr("string",{default:""}),cxPropModule:Lyte.attr("string"),cxPropValue:Lyte.attr("string"),cxPropRouteName:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropDynamicParams:Lyte.attr("string"),cxPropQueryParams:Lyte.attr("string"),cxPropTransitionData:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropEmptyValue:Lyte.attr("string",{default:""}),lookupSingle:Lyte.attr("string",{default:"",hideAttr:!0}),cxPropAutofocus:Lyte.attr("boolean"),cxPropTabindex:Lyte.attr("string"),cxPropTabIndex:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropPlaceholder:Lyte.attr("string"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropToggle:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{},hideAttr:!0}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropAdvanceSearchEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.isLookupAdvancedSearchEnabled}),lookupCreateRecord:Lyte.attr("object",{default:{}}),initComp:Lyte.attr("boolean",{default:!1}),ften:Lyte.attr("array",[]),records:Lyte.attr("array",{default:[]}),apiName:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropMaxlength:Lyte.attr("number",{default:120}),displayField:Lyte.attr("string",{default:"",hideAttr:!0}),modulenameUicomp:Lyte.attr("string"),columnName:Lyte.attr("string"),renderLookup:Lyte.attr("boolean",{default:!1}),moduleData:Lyte.attr("object"),moduledataUicomp:Lyte.attr("object"),queryParamObject:Lyte.attr("object",{default:{}}),relatedFieldComp:Lyte.attr("array",{default:[]}),relatedTo:Lyte.attr("object",{default:{}}),record:Lyte.attr("array",{default:[]}),modId:Lyte.attr("string",{default:""}),dispInit:Lyte.attr("boolean",{default:!1}),renderedPage:Lyte.attr("number",{default:1}),selectedSingle:Lyte.attr("object",{default:{}}),isSingle:Lyte.attr("boolean"),uiTypeMapping:Lyte.attr("object",{default:"undefined"!=typeof crmConstants&&crmConstants.defaultUiTypeToCruxMapping?crmConstants.defaultUiTypeToCruxMapping:{}}),moduleName:Lyte.attr("string",{default:""}),show:Lyte.attr("boolean",{default:!1}),repRecord:Lyte.attr("array",{default:[]}),fldId:Lyte.attr("string"),relations:Lyte.attr("array",{default:[]}),module:Lyte.attr("object",{default:{}}),value:Lyte.attr("object",{default:{}}),cxPropTarget:Lyte.attr("string",{default:"_self"}),cxPropCreateYield:Lyte.attr("boolean"),cxPropRelatedTo:Lyte.attr("object"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropAutocomplete:Lyte.attr("boolean",{default:!0}),cxPropFetchRecordsOnEnter:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"box"}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropShowHideTooltip:Lyte.attr("boolean",{default:!0}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropTooltip:Lyte.attr("string"),cxPropImagePath:Lyte.attr("string",{default:"/crm/CRMClient/images"}),cxPropMetaMoreRecords:Lyte.attr("string",{default:"more_records"}),cxPropIconTooltip:Lyte.attr("string"),showEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropHeader:Lyte.attr("string"),cxPropFields:Lyte.attr("array"),visible:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropImgZcqa:Lyte.attr("string"),lookupValue:Lyte.attr("string"),cxPropShowBc:Lyte.attr("boolean",{default:!1}),lookupId:Lyte.attr("string"),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropRecordImageSrc:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaButton:Lyte.attr("object",{default:{}}),cxPropAriaBody:Lyte.attr("object",{default:{}}),cxPropAriaBox:Lyte.attr("object",{default:{}}),cxPropPopoverWrapperClass:Lyte.attr("string",{default:""}),cxPropMaskingProperties:Lyte.attr("object"),tooltip:Lyte.attr("string"),cxPropRelatedId:Lyte.attr("string"),cxPropRelatedModuleId:Lyte.attr("string"),cxPropRelatedName:Lyte.attr("string"),cxPropRelatedRecordData:Lyte.attr("array",{default:[]}),cxPropShowCloseIcon:Lyte.attr("boolean",{default:!1}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "bottom"}'}),cxPropTooltipClass:Lyte.attr("string",{default:"cxTooltip"}),cxPropHideIconForView:Lyte.attr("boolean",{default:!1}),cxPropDontShowRelatedDropdown:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),searchPerformed:Lyte.attr("boolean",{default:!1}),cxPropErrorClass:Lyte.attr("string"),cxPropInputId:Lyte.attr("string",{default:"inputId"}),showLoading:Lyte.attr("boolean",{default:!1}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropClearIconClass:Lyte.attr("string"),cxPropPreventParentScroll:Lyte.attr("boolean",{default:!1}),cxPropRightIconClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropLayout:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropReturnFullObjectOnGet:Lyte.attr("boolean",{default:!1}),cxPropDefaultFields:Lyte.attr("object",{default:{}}),cxPropDisplayIconOnLeft:Lyte.attr("boolean",{default:!1}),cxPropMandatory:Lyte.attr("boolean"),cxPropType:Lyte.attr("string"),modulePluralLabel:Lyte.attr("string"),multiModuleModules:Lyte.attr("array",{default:[]}),moduleDisabledList:Lyte.attr("array",{default:[]}),cxPropDisabledList:Lyte.attr("array",{default:[]}),cxPropAllFieldsNeeded:Lyte.attr("boolean",{default:!1}),cxPropTooltipShow:Lyte.attr("boolean",{default:!0}),cxPropQueryParam:Lyte.attr("object"),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropSearchFormat:Lyte.attr("boolean",{default:!1}),cxPropSearchFields:Lyte.attr("array",{default:[]}),cxPropCallAllowed:Lyte.attr("boolean",{default:!0}),cxPropShowImageInBc:Lyte.attr("boolean",{default:!0}),cxPropBcZcqa:Lyte.attr("string",{default:"cxBcPopup"}),cxPropMinLength:Lyte.attr("number",{default:0}),cxPropOpenOnFocus:Lyte.attr("boolean",{default:!1}),cxPropBoxClass:Lyte.attr("string"),cxPropTransition:Lyte.attr("object",{default:{animation:"slideFromTop",duration:"0.5"}}),cxPropOffset:Lyte.attr("object",{default:{top:"0",left:"center"}}),cxPropCurrentModuleSingularLabel:Lyte.attr("string"),cxPropInputValue:Lyte.attr("string"),cxPropDetailRoute:Lyte.attr("string",{default:"crm.tab.module.entity.detail"}),cxPropFieldTypeMappingSelector:Lyte.attr("string",{default:"ui_type"}),cxPropModalProperty:Lyte.attr("object"),cxPropLookupProperties:Lyte.attr("object"),cxPropModuleNameSelector:Lyte.attr("string",{default:"module_name"}),cxPropLookupUitypeComparator:Lyte.attr("object"),cxPropFetchModuleData:Lyte.attr("boolean",{default:!1}),cxPropFetchRecords:Lyte.attr("boolean",{default:!1}),cxPropHoverCallback:Lyte.attr("boolean"),cxPropShowAllFields:Lyte.attr("boolean",{default:!1}),cxPropNoResultMessage:Lyte.attr("string"),cxPropForcedFetchBc:Lyte.attr("boolean",{default:!1}),cxPropPerpage:Lyte.attr("number",{default:10}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropNoResultMessage:Lyte.attr("string"),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropShowLookupPopupFields:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object"),cxPropDropdownIconClass:Lyte.attr("string",{default:"dropdown"})}},init:function(){this.lookupModalName=this.getData("cxPropAdvanceSearchEnabled")?"crux-lookup-filter-modal":"crux-lookup-modal",this._modalOpened=!1,"create"===this.data.cxPropFrom&&this.setFocusUtil()},lookupModalName:"",methods:{autoComp:function(e){this.selection=!0,this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage","");for(var t,o=this.getData("ften"),a=this.getData("displayField"),r=o.length,i=0;i<r;i++)if(o[i].id===e){if(this.setData("selectedSingle",o[i]),this.setData("ften",o[i]),t="Full_Name"===a?o[i].First_Name?o[i].First_Name+" "+o[i].Last_Name:o[i].Last_Name:o[i][a],this.setData("lookupSingle",t),this.setData("cxPropValue",{id:o[i].id,name:t}),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange"))if(this.data.cxPropReturnFullObjectOnGet){var s=o[i];s.name=s.name?s.name:t,this.executeMethod("onValueChange",s)}else this.executeMethod("onValueChange",this.data.cxPropValue);this.$node.querySelector(".cxLookupComponent").classList.add("cxBoxInputFocused");break}},beforeSearch:function(e,t,o){if(o.type){["Backspace","Meta"].indexOf(o.key)>-1&&this.search&&(this.search=!1);this.getData("record");if(""===e?(this.setData("selectedSingle",{}),this.setData("lookupSingle",""),this.setData("selectedSingleId",""),this.setData("cxPropValue",void 0),this.$node.querySelector("lyte-autocomplete").ltProp("selected",""),this.setData("cxPropShowCloseIcon",!1)):this.setData("cxPropShowCloseIcon",!0),this.search)this.setData("showLoading",!1);else{""!==e&&e===this.prevInputVal||(this.setData("showLoading",!0),this.onSearchFun(e,void 0,t.getData("ltPropSelected")))}this.prevInputVal=e}},scrollRecord:function(){if(!this.noMoreScroll){var e=this.getData("ften"),t=this.getData("queryParamObject"),o=event.target&&"LYTE-DROP-BODY"===event.target.tagName?event.target:null;t.page=Math.ceil(e.length/10),t.per_page=this.data.cxPropPerpage,this.scrollRequest(this,t,o,e,!1)}},beforeShow:function(e,t){var o;return this.getMethods("onBeforeDropdownOpen")&&(o=this.executeMethod("onBeforeDropdownOpen",e)),!this.data.cxPropReadonly&&0!=o&&(this.setData("visible",!0),this.setData("showLoading",!0),this.initFromField=!0,new Promise(function(o,a){this._initRes=o,this._initRej=a,this.lookupInit(this,this.getData("modId"),!1,e,t)}.bind(this)))},autoFocus:function(e,t){this.$node.querySelector(".cxLookupComponent").classList.add("cxBoxDropdownOpened"),this.$node.querySelector(".cxBoxWithRightIcon").classList.add("cxBoxInputFocused")},fetchModule:function(e){return this.executeMethod("fetchModuleData",e)},fetchRecordsData:function(e,t){var o=this;return this.executeMethod("fetchRecords",e,t).then((function(e){return e}),(function(e){return o.setData("renderLookup",!1),e}))},createNew:function(){this.executeMethod("onCreateNew")},triggerOnValueChange:function(e){e.name=e.name?e.name:e.displayName,this.setData("cxPropValue",e),this.data.cxPropReturnFullObjectOnGet&&this.setData("selectedSingle",e),this._modalOpened=!1,$(this.$node.querySelector("input")).effect("highlight",{},1e3),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e),this.$node.querySelector(".cxLookupComponent").classList.add("cxBoxInputFocused")},onBlurInput:function(e,t){return this.$node.querySelector(".cxLookupComponent").classList.remove("cxBoxDropdownOpened"),setTimeout(function(){this.selection&&this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage","");var e=this.$node.querySelector("lyte-autocomplete");e&&""===e.querySelector("input").value&&(this.setData("cxPropValue",void 0),this.setData({selectedSingle:{},lookupSingle:void 0})),this.selection=!1}.bind(this),100),this.getMethods("onBlur")&&this.executeMethod("onBlur",event,this.$node),!0},afterRenderAutocomplete:function(){this.$node.querySelector("lyte-input")&&"box"==this.getData("cxPropAppearance")&&this.$node.querySelector("lyte-input").classList.add("cxBoxInput")},hideInfoTooltip:function(){this.showHideInfoTooltip()},onHideDropdown:function(e,t){this.setData("visible",!1),this.getMethods("onHide")&&this.executeMethod("onHide",e,t),this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},modalClosed:function(){this._modalOpened=!1,this.$node.querySelector(".cxLookupIcon").focus()},multiModuleSelect:function(e,t){this.data.modId!=t&&(this.setData("module",moduleRecordMapping[idModuleMapping[t]]),this.setData("modId",t),this.setData("cxPropModule",this.data.module.module_name),"criteria"==this.data.cxPropFrom?this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()):(this.getMethods("onModuleSelect")&&this.executeMethod("onModuleSelect",this.data.module),this.clear()))},moduleDropdownBeforeShow:function(){return!this.data.showLoading},textError:function(e,t){this.getMethods("onError")&&this.executeMethod("onError",e,t)},changeValue:function(){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},changeDataMethod:function(e,t){this.getMethods("beforeRequestChangeData")&&this.executeMethod("beforeRequestChangeData",e,t,this.data.cxPropField)},onShowDropdown:function(e,t){this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},onDropdownOpen:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)}},actions:{onLinkClick:function(){if(this.getMethods("onLookupLinkClicked")&&0==this.executeMethod("onLookupLinkClicked",event,this,this.data.cxPropField))return event.stopPropagation(),event.preventDefault(),!1;"undefined"!=typeof cruxAssets&&cruxAssets.cxLookupElementLinkClicked&&cruxAssets.cxLookupElementLinkClicked(event)},infoPop:function(e,t,o){var a=document.getElementById("cruxLookupPopover");"mouseenter"==o.type?(this.entered=!0,a||(a=Lyte.Component.render("crux-lookup-popup",{id:"cruxLookupPopover",fieldMapping:this.getData("uiTypeMapping"),cxPropPopoverWrapperClass:this.data.cxPropPopoverWrapperClass,cxPropCallAllowed:this.data.cxPropCallAllowed},"body")),a.setData({module:this.getData("module"),data:t,show:!0})):(this.entered=!1,a.setData("show",!1))},clearlookupField:function(){this.setData("searchPerformed",!1),this.clear()},showLookup:function(e){this._modalOpened=!0,this.getData("cxPropDisabled")||this.data.cxPropReadonly||(this.getMethods("onShowLookup")?this.executeMethod("onShowLookup",e):this.showLookupFunc(this),e&&e.stopPropagation())},showLookupOnKeyEvent:function(e,t){" "===e.key&&(e.preventDefault(),t.click())},showHideIcon1:function(e,t){this.entered||Lyte.objectUtils(t,"add","cxPropShowIcon",e)},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},showLookupBC:function(e,t){var o=!0;if(this.getMethods("onBeforeShowBusinessCard")&&(o=this.executeMethod("onBeforeShowBusinessCard",this.data.lookupId,this.data.cxPropModule)),this.data.cxPropShowBc&&o){var a=document.querySelector("crux-lookup-view-popup");if(t){e.classList.add("cxLookupBc"),a?a.setData({field:this.data.cxPropField,entityId:this.data.lookupId,cxPropTypeMapping:this.data.uiTypeMapping,module:this.data.cxPropModule,cxPropShowImage:this.data.cxPropShowImageInBc,cxPropCallAllowed:this.data.cxPropCallAllowed,cxPropBcZcqa:this.data.cxPropBcZcqa,cxPropHoverCallback:null==this.data.cxPropHoverCallback||this.data.cxPropHoverCallback,lookupComp:e,cxPropForcedFetch:this.data.cxPropForcedFetchBc,cxPropRouteName:this.data.cxPropRouteName,cxPropDynamicParams:this.data.cxPropDynamicParams,cxPropQueryParams:this.data.cxPropQueryParams,cxPropTransitionData:this.data.cxPropTransitionData,cxPropTarget:this.data.cxPropTarget}):a=Lyte.Component.render("crux-lookup-view-popup",{field:this.data.cxPropField,entityId:this.data.lookupId,cxPropTypeMapping:this.data.uiTypeMapping,module:this.data.cxPropModule,cxPropShowImage:this.data.cxPropShowImageInBc,cxPropCallAllowed:this.data.cxPropCallAllowed,cxPropBcZcqa:this.data.cxPropBcZcqa,cxPropHoverCallback:null==this.data.cxPropHoverCallback||this.data.cxPropHoverCallback,lookupComp:e,cxPropForcedFetch:this.data.cxPropForcedFetchBc,cxPropRouteName:this.data.cxPropRouteName,cxPropDynamicParams:this.data.cxPropDynamicParams,cxPropQueryParams:this.data.cxPropQueryParams,cxPropTransitionData:this.data.cxPropTransitionData,cxPropTarget:this.data.cxPropTarget},".cxLookupBc");var r=this;this.getMethods("onLookupHoverFetchBcData")&&a.setMethods({onLookupHoverFetchBcDataPopup:function(e,t){return r.executeMethod("onLookupHoverFetchBcData",e,t)}}),this.getMethods("onLookupLinkClicked")&&a.setMethods({onLookupLinkClickedPopup:function(e,t,o){return r.executeMethod("onLookupLinkClicked",e,t,o)}}),this.data.cxPropRecordImageSrc&&a.setData("cxPropRecordImageSrc",this.data.cxPropRecordImageSrc),a.setData("show",!0)}else a&&a.setData("show",!1)}},stopPropagation:function(){this.stopPropagation()},onFocusInput:function(e){e&&this.$node.querySelector(".cxBoxWithRightIcon").classList.remove("cxBoxInputFocused")}},ftenToRecord:function(){this.initial||(this.setData("ften",this.getData("record")),this.initial=!0),this.getData("cxPropMetaMoreRecords")&&this.getData("record").$&&(0==this.getData("record").$[this.getData("cxPropMetaMoreRecords")]||this.getData("record").$.meta&&0==this.getData("record").$.meta[this.getData("cxPropMetaMoreRecords")])?this.noMoreScroll=!0:this.noMoreScroll=!1}.observes("record"),ftenTorepRecord:function(){this.noMoreScroll=!1}.observes("repRecord"),saveAndAssocRec:function(){this.$node.classList.remove("currentLookupModal"),this.saveNewRecord(this)}.observes("save","newCreatedid"),observeSelectedId:function(){var e=this.getData("moduledataUicomp"),t=this,o=this.getData("selectedSingleId"),a=this.getData("module"),r=this.getData("newLookupcreated");if(e.selectedId=o,e.lookupSingle=this.getData("lookupSingle"),this.setData("moduledataUicomp",e),r){var i=e.lookup.module.id;i&&(a.id||e.module.id===i?(a.id||e.module.id===i)&&(t.setData({module:e.module[0],moduleName:e.module[0].module_name,displayField:e.module[0].display_field.api_name}),t.setSelectedId(i,o)):store.findRecord("module",i).then((function(e){t.setData({module:e[0],moduleName:e[0].module_name,displayField:e[0].display_field.api_name}),t.setSelectedId(i,o)})))}}.observes("selectedSingleId"),singleValueSet:function(){var e=this.getData("moduledataUicomp");this.getData("relatedFieldComp");e.selectedId=this.getData("selectedSingle").id,e.lookupSingle=this.getData("lookupSingle"),this.setData("moduledataUicomp",e)}.observes("selectedSingle"),beforeShowFunc:function(e,t,o,a){var r=this,i=t.$node._callee.ltProp("value");if(!(i=void 0===i?i:i.trim())){var s={page:1,per_page:this.data.cxPropPerpage};if(this.data.cxPropQueryParam)for(var p in this.data.cxPropQueryParam)s[p]=this.data.cxPropQueryParam[p];return this.getMethods("beforeRequestChangeData")&&this.executeMethod("beforeRequestChangeData",s,void 0,this.data.cxPropField),this.executeMethod("fetchRecords",this.data.module.id,Object.assign({},s)).then((function(e){e=e&&e.length?e:[],r.setData({record:e,ften:e,queryParamObject:s}),r.setData("showLoading",!1),r._modalOpened||(r.setData("initComp",!0),r.$node.querySelector(":not(crux-dropdown) > lyte-dropdown").open(),r._initRes&&r._initRes(),a&&a())}),(function(e){r.initFromField=!1,r.setData("showLoading",!1),r._initRej&&r._initRej(),(403===e.status||e.responseText&&"NO_PERMISSION"===JSON.parse(e.responseText).code)&&_cruxUtils.showPermissionDeniedModal()}))}this.setData("initComp",!0),this.onSearchFun(i,a,t.data.ltPropSelected||this.data.value?this.data.value.id:"")},showLookupFunc:function(e,t){if(this.getMethods("onBeforeShowLookup")&&0==this.executeMethod("onBeforeShowLookup"))return!1;("undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),t||this.getData("renderLookup"))?(e.setData("show",!1),(e=t?e:this.$node.querySelector(this.lookupModalName).component).data.isSingle&&(e.records=[],e.lookupInit(e,e.getData("modId"),!0))):("lookup"===e.getData("moduledataUicomp").data_type?e.setData("isSingle",!0):e.setData("isSingle",!1),e.setData("renderLookup",!0),e.setData("dispInit",!0))},onSearchFun:function(e,t,o){var a=this.getData("displayField"),r={},i=this;if(e&&(r.filters=this.constructSearchFilter(a,e,this.data.module&&this.data.module.display_field?store.peekRecord("field",this.data.module.display_field.id):a?store.peekAll("field").filterBy({api_name:a})[0]:void 0,this.data.cxPropSearchFormat)),r.page=1,r.per_page=this.data.cxPropPerpage,this.data.cxPropQueryParam)for(var s in this.data.cxPropQueryParam)r[s]=this.data.cxPropQueryParam[s];a?(this.getMethods("beforeRequestChangeData")&&this.executeMethod("beforeRequestChangeData",r,void 0,this.data.cxPropField),this.executeMethod("fetchRecords",this.getData("modId"),Object.assign({},r)).then((function(a){i.setData("searchPerformed",!0);var s=i.$node.querySelector("input").value;(""===e||e&&""!==s)&&(i.setData({ften:a,queryParamObject:r}),i.getData("cxPropMetaMoreRecords")&&i.getData("record").$&&(0==i.getData("record").$[i.getData("cxPropMetaMoreRecords")]||i.getData("record").$.meta&&0==i.getData("record").$.meta[i.getData("cxPropMetaMoreRecords")])?i.noMoreScroll=!0:i.noMoreScroll=!1,a=a||[],t&&t(),i._initRes&&i._initRes(),i.setData("showLoading",!1),i._modalOpened||i.$node.querySelector(":not(crux-dropdown) > lyte-dropdown").open(),s!=e&&i.$node.querySelector("lyte-autocomplete").setValue(s),""==e&&i.setData("searchPerformed",!1),i.$node.querySelector("lyte-dropdown").component.childComp&&i.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+o+"']")&&i.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+o+"']").setAttribute("selected",!0))}),(function(e){i.setData("showLoading",!1),(403===e.status||e.responseText&&"NO_PERMISSION"===JSON.parse(e.responseText).code)&&_cruxUtils.showPermissionDeniedModal(),i._initRej&&i._initRej()}))):this.lookupInit(this,"multi_module_lookup"==this.data.cxPropType?this.data.modId:this.getData("moduledataUicomp").lookup.module.id,!1,void 0,this)},scrollRequest:function(e,t,o,a,r){if(!e.scrl&&o.scrollTop+o.offsetHeight>=o.scrollHeight-10){if(t.page+=1,t.per_page=this.data.cxPropPerpage,this.data.cxPropQueryParam)for(var i in this.data.cxPropQueryParam)t[i]=this.data.cxPropQueryParam[i];if(e.scrl=!0,r){var s=e.$node.querySelector("#modalElem").component.childComp.querySelector(".lookupFetchLoad");s&&(s.style.display="block")}var p=e.data.module.id;this.getMethods("beforeRequestChangeData")&&this.executeMethod("beforeRequestChangeData",t,void 0,this.data.cxPropField),this.setData("showDropdownLoading",!0),this.executeMethod("fetchRecords",p,Object.assign({},t)).then((function(o){if(e.setData("showDropdownLoading",!1),o){a=a.concat(o),e.setData("record",a),r?Lyte.arrayUtils(e.data.displayArray,"push",o):Lyte.arrayUtils(e.data.ften,"push",o),e.setData("queryParamObject",t),o={};var i=e.data.value?e.data.value.id:"";e.$node.querySelector("lyte-dropdown").component.childComp&&e.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+i+"']")&&e.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+i+"']").setAttribute("selected",!0)}else e.noMoreScroll=!0;setTimeout((function(){e.scrl=!1}),20),r&&s&&(s.style.display="none")}),(function(e){(403===e.status||e.responseText&&"NO_PERMISSION"===JSON.parse(e.responseText).code)&&(this.setData("showDropdownLoading",!1),_cruxUtils.showPermissionDeniedModal())}))}},didDestroy:function(){var e=document.getElementById("cruxLookupPopover");e&&e.remove()},getValue:function(){if("criteria"==this.data.cxPropFrom){var e=this.$node.querySelector("#lookupTextComponent").component.getValue();return"multi_module_lookup"==this.data.cxPropType&&(e=Object.assign({module:{api_name:this.data.module.api_name,id:this.data.modId}},{name:e})),e}var t=this.getData("cxPropValue"),o=this.getData("value");if("multi_module_lookup"==this.data.cxPropType&&t&&(t=Object.assign({module:{api_name:this.data.module.api_name,id:this.data.modId}},JSON.parse(t)),t=JSON.stringify(t)),o&&o.id){var a=this.$node.querySelector("lyte-input #"+this.data.cxPropInputId);return a&&a.value&&a.value.trim()==o.name?this.data.cxPropReturnFullObjectOnGet?this.data.selectedSingle:t:void 0}return t},validate:function(){if("criteria"==this.data.cxPropFrom)return this.$node.querySelector("#lookupTextComponent").component.validate();var e=this.validateMandatory(null==this.$node.querySelector("input")||0==this.$node.querySelector("input").length||""==this.$node.querySelector("input").value||""==this.$node.querySelector("input").value.trim());return e&&(e=this.validateMandatory(!this.getValue(),function(){this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.getData("cxPropField").field_label)))}.bind(this))),e||(this.setData("cxPropValue",this.getValue()),this.data.cxPropPreventFocusOnError||this.$node.querySelector("lyte-autocomplete")&&this.$node.querySelector("lyte-autocomplete").focus()),e},resetData:function(){var e=this.$node.querySelector("lyte-input");e&&e.ltProp("value",""),this.setData({cxPropValue:{},lookupSingle:""})},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeValue:function(){if("view"==this.getData("cxPropFrom"))if(e=this.data.cxPropValue){try{if("null"==e||"object"!=typeof JSON.parse(e))throw"number";e=JSON.parse(e),this.setData({lookupValue:e.name,lookupId:e.id}),"multi_module_lookup"==this.data.cxPropType&&this.setData("modulePluralLabel",moduleRecordMapping[idModuleMapping[e.module.id]].plural_label),this.setData("showEmptyValue",!1)}catch(t){this.setData("lookupValue",e)}"string"!=typeof e&&"object"!=typeof e&&(e=e.toString(),this.setData("lookupValue",e))}else this.setData({value:{},lookupSingle:"",lookupValue:"",lookupId:""}),this.getData("cxPropEmptyValue")&&this.setData("showEmptyValue",!0);if("create"===this.getData("cxPropFrom"))if(this.data.cxPropValue){try{var e;(e=JSON.parse(this.data.cxPropValue)).name&&(this.setData("value",e),this.setData("lookupSingle",e.name)),this.setData("selectedSingle",e)}catch(e){this.data.cxPropValue.name&&(this.setData("value",this.data.cxPropValue),this.setData("lookupSingle",this.data.value.name))}var t=$L("lyte-autocomplete",this.$node).find("input")[0];t&&(t.selectionStart=t.selectionEnd=this.data.lookupSingle.length)}else this.setData({value:"",lookupSingle:""});"criteria"==this.data.cxPropFrom&&"multi_module_lookup"==this.data.cxPropType&&((e=this.data.cxPropValue)&&(e=JSON.parse(e),this.setData({lookupValue:e.name,lookupId:e.id}),"multi_module_lookup"==this.data.cxPropType&&this.setData("modulePluralLabel",moduleRecordMapping[idModuleMapping[e.module.id]].plural_label)))}.observes("cxPropValue","cxPropFrom").on("init"),refresh:function(e){if("crux-lookup-filter-modal"!==this.lookupModalName){var t=this.$node.querySelector(this.lookupModalName);if(t){t=t.component;var o={page:1,per_page:this.data.cxPropPerpage};if(this.data.cxPropQueryParam)for(var a in this.data.cxPropQueryParam)o[a]=this.data.cxPropQueryParam[a];this.getMethods("beforeRequestChangeData")&&this.executeMethod("beforeRequestChangeData",o,void 0,this.data.cxPropField),this.executeMethod("fetchRecords",this.getData("module").id,Object.assign({},o)).then(function(a){a=a&&a.length?a:[],e&&e.cxPropValue&&(this.setData({cxPropValue:e.cxPropValue,value:JSON.parse(e.cxPropValue),lookupSingle:JSON.parse(e.cxPropValue).name}),t.setData({lookupSingle:JSON.parse(e.cxPropValue).name,selectedSingle:JSON.parse(e.cxPropValue).id})),t.setData({record:a,queryParamObject:o}),a.length<10?t.setNavigator(a.length):t.setNavigator(a.length,!0),t.rendHome()}.bind(this),function(e){(403===e.status||e.responseText&&"NO_PERMISSION"===JSON.parse(e.responseText).code)&&_cruxUtils.showPermissionDeniedModal()}.bind(this))}}else this.setData("renderLookup",!0)},observeMandatory:function(){this.observeMandatoryMixin(".cxLookupComponent")}.observes("cxPropField.required","cxPropMandatory","cxPropFrom"),observesdidConnect:function(){if("create"==this.getData("cxPropFrom")&&this.$node.classList.add("dB"),this.observeMandatoryMixin(".cxLookupComponent"),this.getData("cxPropToggle")){var e=this.$node.querySelector("lyte-autocomplete");e&&e.toggle()}}.observes("lyteViewPort").on("didConnect"),close:function(){this.$node.querySelector(this.lookupModalName).component.close()},observeIsError:function(){if("create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")){var e=$L(this.$node),t=(e.find("lyte-input"),e.find(".cxBoxWithRightIcon")),o=e.find("crux-error-message");this.getData("isError")?(t.addClass("cxErrorBoxWithRightIcon"),o.hasClass("cxErrorMsgMultiLines")&&t.addClass("cxErrorMsgMultiLinesBoxInside")):(t.removeClass("cxErrorBoxWithRightIcon"),t.removeClass("cxErrorMsgMultiLinesBoxInside"))}}.observes("isError").on("didConnect"),observeMultiModules:function(){if("multi_module_lookup"==this.data.cxPropType){var e=[];if(this.data.cxPropField.multi_module_lookup.modules.map((function(e){return e.id})).forEach((function(t){e.push(moduleRecordMapping[idModuleMapping[t]])})),this.data.cxPropValue){var t=JSON.parse(this.data.cxPropValue).module;if(t){var o=moduleRecordMapping[idModuleMapping[t.id]];this.setData("module",o),this.setData("modId",o.id),this.setData("cxPropModule",o.module_name),-1==e.cruxFindIndexOfObject("id",t.id)&&(e.unshift(o),this.setData("moduleDisabledList",[t.id]))}}else this.setData("module",e[0]),this.setData("modId",e[0].id),this.setData("cxPropModule",e[0].module_name);this.setData("multiModuleModules",e)}}.observes("cxPropField.multi_module_lookup","cxPropValue").on("init"),observeFrom:function(){if("create"==this.getData("cxPropFrom")){this.setData("modulenameUicomp",this.data.cxPropModule);var e,t=this.getData("cxPropField");if(this.setData({columnName:t.column_name,moduledataUicomp:t,apiName:t.api_name}),"lookup"==t.data_type&&(this.getData("cxPropModule")==t.lookup.module.api_name&&"undefined"!=typeof moduleRecordMapping&&this.setData("module",moduleRecordMapping[this.data.cxPropModule]),this.setData({modId:t.lookup.module.id,isSingle:!0})),"multi_module_lookup"==t.data_type)e=this.data.multiModuleModules.length?this.data.modId?this.data.modId:this.data.multiModuleModules[0].id:this.data.cxPropField.multi_module_lookup.modules.map((function(e){return e.id}))[0],this.setData({modId:e,isSingle:!0,module:moduleRecordMapping[idModuleMapping[e]]});this.$node.refresh=function(e){return this.component.refresh(e)},this.$node.close=function(){return this.component.close()},this.getData("cxPropDisabled")&&void 0===this.data.cxPropTooltip&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only")),this.$node.clear=function(){this.component.clear()},this.$node.showLookup=function(){this.component.showLookupFunc(this.component)},this.setFocusUtil()}}.observes("cxPropFrom","cxPropDisabled").on("init"),observeName:function(){var e=this.$node.querySelector("input");"create"===this.data.cxPropFrom&&e&&$L.fastdom.measure((()=>{var t=e.scrollWidth-1>e.offsetWidth;$L.fastdom.mutate((()=>{t?e.setAttribute("title",this.data.lookupSingle):e.setAttribute("title","")}))}))}.observes("lookupSingle").on("didConnect"),observeTooltip:function(){this.observeAndSetTooltip()}.observes("cxPropTooltip").on("init"),observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),ele:".cxLookupComponent",clear:function(){if(this.getMethods("onClear")&&0==this.executeMethod("onClear"))return!1;this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.setData("selectedSingle",{}),this.setData("lookupSingle",""),this.$node.querySelector("lyte-autocomplete").ltProp("value",""),this.setData("selectedSingleId",""),this.setData("cxPropValue",void 0),this.$node.querySelector("lyte-autocomplete").ltProp("selected","");var e=this.getData("lookupCreateRecord");this.setData("ften",this.getData("record")),e&&e.module&&(e.createNew=!1,this.setData("lookupCreateRecord",e)),this.$node.querySelector("lyte-autocomplete lyte-input").focus(),this.setData("cxPropShowCloseIcon",!1),this.data.value=void 0},mandatoryType:function(){this.observeMandatoryTypeMixin(".cxLookupComponent")}.observes("cxPropMandatoryType").on("didConnect"),keyEvent:function(){var e=this;if(this.$node&&(e=this.$node),e.querySelector(".cxLookupIcon")){var t=e.querySelector(".cxLookupIcon");function o(){"mousedown"!=event.type&&("keydown"!=event.type||" "!=event.key&&"Enter"!=event.key)||setTimeout((()=>{var e=t;e.parentElement&&(e=e.parentElement.querySelector("crux-lookup-modal lyte-modal")),e&&e.component.childComp.addEventListener("keydown",(function(){var e=this,a=e;this.$node?a=a.$node.querySelector("crux-table-component"):(e=this.component,a=a.querySelector("crux-table-component"))," "===event.key&&e.parent&&e.parent.tagName.includes("MODAL")&&(!0===e.parent.attributes.ltPropCloseOnEscape||"true"===e.parent.attributes.ltPropCloseOnEscape||!0===e.parent.component.data.ltPropCloseOnEscape)&&a&&(a.attributes.listener||a.querySelector("[listener]"))?e.parent.ltProp("closeOnEscape",!1):"Escape"==event.key&&setTimeout((()=>{e.parent.ltProp("closeOnEscape")&&t.focus(),!e.parent||!e.parent.tagName.includes("MODAL")||!1!==e.parent.attributes.ltPropCloseOnEscape&&"false"!==e.parent.attributes.ltPropCloseOnEscape&&!1!==e.parent.component.data.ltPropCloseOnEscape||a&&(a.attributes.listener||a.querySelector("[listener]"))||e.parent.ltProp("closeOnEscape",!0)}),50),t.removeEventListener("mousedown",o),t.removeEventListener("keydown",o)}))}),50)}-1!=t.tabIndex&&"-1"!=t.tabIndex||(t.tabIndex=0),t.addEventListener("mousedown",o),t.addEventListener("keydown",o)}}.on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-lookup-mixin","crux-element-validation"]}),Lyte.Component.register("crux-number-component",{_template:'<template tag-name="crux-number-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <template is="if" value="{{cxPropShowCalculator}}"><template case="true"> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} pR"> <div class="cxBoxWithRightIcon"> <div class="cxBoxLeftContent"> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-type="text" onpaste="{{action(\'onPaste\')}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-class="cxBoxNumberCompInput {{cxPropInputClass}}" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-maxlength="{{maxlength}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" onkeydown="{{action(\'checkLength\',this,event)}}" data-zcqa="{{cxPropZcqa}}" lt-prop-focus-at-end="{{cxPropFocusAtEnd}}" lt-prop-focus="{{cxPropFocus}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-label="{{if(cruxAnd(ifEquals(cxPropFrom,\'criteria\'),cxPropCurrencyCode,currencyTypeField),cxPropCurrencyCode,if(cruxAnd(ifEquals(cxPropFrom,\'create\'),currencySymbol),currencySymbol))}}" onfocus="{{action(\'onFocusInput\')}}" onfocusout="{{action(\'onFocusInput\',true)}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" onkeypress="{{action(\'checkLengthOnUp\')}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"> </lyte-input><template is="if" value="{{cxPropButtonTextInsideElement}}"><template case="true"><lyte-button onclick="{{action(\'buttonClick\')}}"><template is="yield" yield-name="text">{{cxPropButtonTextInsideElement}}</template></lyte-button></template></template> </div> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span> </template><template case="false"><template is="if" value="{{expHandlers(cxPropDisabled,\'!\')}}"><template case="true"> <div class="cxBoxRightIcon cxFlexCenter {{cxPropRightIconClass}}" onclick="{{action(\'showCalculatorInfo\',event)}}"> <div class="cxCalculatorIcon cP {{if(onFocus,\'cxPropFocus\',\'\')}} {{cxPropIconClass}}"></div> </div> </template></template></template></template> </div> <template is="if" value="{{expHandlers(expHandlers(cxPropField.display_format,\'==\',\'slider\'),\'&amp;&amp;\',cxPropIsDisplayFormatEnabled)}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropField.data_type,\'!=\',\'currency\')}}"><template case="true"> <lyte-slider lt-prop-digits="{{cxPropDigits}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-value="{{cxPropValue}}" lt-prop-yield="true" lt-prop-handler="{{cxPropHandler}}" on-select="{{method(\'onsliderselect\')}}" cx-prop-error-message="This is an error message" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-width="{{cxPropSliderWidth}}" lt-prop-min="{{cxPropSliderMinValue}}" lt-prop-max="{{cxPropSliderMaxValue}}" lt-prop-scale-unit="{{currencySymbol}}" lt-prop-scale-interval="{{splitValue}}" class="{{cxPropSliderClass}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{cxPropSliderYield}}"><template case="true"> <lyte-yield yield-name="lyteSliderYield " slider-values="{{nonCurrencySliderValues}}"></lyte-yield> </template><template case="false"> <div class="lyteScaleOption"> <template is="for" items="{{ltPropScaleStyle}}" index="indexVal"> <span class="lyteScaleLine" style="{{item}}"> <span></span> <span class="lyteScalLable">{{nonCurrencySliderValues[indexVal]}}</span> </span> </template> </div> </template></template> </template> </lyte-slider> </template><template case="false"> <lyte-slider lt-prop-digits="{{cxPropDigits}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-value="{{cxPropValue}}" lt-prop-yield="true" lt-prop-handler="{{cxPropHandler}}" on-select="{{method(\'onsliderselect\')}}" cx-prop-error-message="This is an error message" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-width="{{cxPropSliderWidth}}" lt-prop-min="{{cxPropSliderMinValue}}" lt-prop-max="{{cxPropSliderMaxValue}}" lt-prop-scale-unit="{{currencySymbol}}" lt-prop-scale-interval="{{splitValue}}" class="{{cxPropSliderClass}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{cxPropSliderYield}}"><template case="true"> <lyte-yield yield-name="lyteSliderYield " slider-values="{{sliderValues}}"></lyte-yield> </template><template case="false"> <div class="lyteScaleOption"> <template is="for" items="{{ltPropScaleStyle}}" index="indexVal"> <span class="lyteScaleLine" style="{{item}}"> <span></span> <span class="lyteScalLable">{{sliderValues[indexVal]}}</span> </span> </template> </div> </template></template> </template> </lyte-slider> </template></template> </template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> <lyte-beta-popover id="cxCalcultorResultPopover" lt-prop-origin-elem=".cxCalcultorResult" lt-prop-height="auto" lt-prop-duration="400" lt-prop-content-padding="" lt-prop-show="{{lbind(showResult.show)}}" lt-prop-type="box" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-close-on-escape="false" lt-prop-placement="bottomLeft" lt-prop-wrapper-class="cxNumberCalcPopup" on-close="{{method(\'popoverClosed1\')}}" lt-prop-scrollable="true" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-re-open="true" lt-prop-prevent-focus="true"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="cxNumResPopContent" data-zcqa="newCalcVal_Crm_{{cxPropModule}}_{{cxPropField.column_name}}"> = {{showResult.value}} </lyte-popover-content> </template> </lyte-beta-popover> <lyte-popover lt-prop-origin-elem=".cxCalculatorIcon.cxPropFocus" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-placement="bottomRight" lt-prop-content-padding="" lt-prop-wrapper-class="cxNumberCalcPopup cxNumInfoPop" lt-prop-scrollable="true" id="popovercalculator" on-close="{{method(\'popoverClosed\')}}" lt-prop-boundary="{{cxPropBoundary}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="cxNumInfoPopContent {{if(showResult.infoDetails,\'\',\'cxNumDefaultInfo\')}}" onclick="{{action(\'hidePopover\')}}"> <template is="if" value="{{showResult.infoDetails}}"><template case="true"> <div class="cxNumInfoExpr cP">{{showResult.infoDetails}}</div> </template><template case="false"> {{unescape(cruxGetI18n(\'crm.createfield.calcinfo.new\'))}} </template></template> </lyte-popover-content> </template> </lyte-popover> </template><template case="false"> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} pR"> <template is="if" value="{{expHandlers(cxPropType,\'!=\',&quot;number&quot;)}}"><template case="true"> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-type="{{cxPropType}}" onpaste="{{method(\'onPaste\')}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}} cxW100Per" lt-prop-class="{{cxPropInputClass}}" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-maxlength="{{maxlength}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" onkeydown="{{action(\'checkLength\',this,event)}}" data-zcqa="{{cxPropZcqa}}" lt-prop-focus-at-end="{{cxPropFocusAtEnd}}" lt-prop-focus="{{cxPropFocus}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-label="{{if(cruxAnd(ifEquals(cxPropFrom,\'criteria\'),cxPropCurrencyCode,currencyTypeField),cxPropCurrencyCode,if(cruxAnd(ifEquals(cxPropFrom,\'create\'),currencySymbol),currencySymbol))}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" onkeypress="{{action(\'checkLengthOnUp\')}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> </template><template case="false"> <lyte-number lt-prop-max="{{cxPropMaxvalue}}" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-type="{{cxPropType}}" lt-prop-min="{{cxPropMinvalue}}" onpaste="{{action(\'onPaste\')}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}} cxW100Per" lt-prop-class="{{cxPropInputClass}}" lt-prop-value="{{cxPropValue}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-maxlength="{{maxlength}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" onkeydown="{{action(\'checkLength\',this,event)}}" data-zcqa="{{cxPropZcqa}}" lt-prop-focus-at-end="{{cxPropFocusAtEnd}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-label="{{if(cruxAnd(ifEquals(cxPropFrom,\'criteria\'),cxPropCurrencyCode,currencyTypeField),cxPropCurrencyCode,if(cruxAnd(ifEquals(cxPropFrom,\'create\'),currencySymbol),currencySymbol))}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" onkeypress="{{action(\'checkLengthOnUp\')}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-restrict="{{cxPropRestrict}}" lt-prop-wheel="{{cxPropWheel}}" lt-prop-increment="{{cxPropIncrement}}" lt-prop-ignore-symbols="{{cxPropIgnoreSymbols}}" lt-prop-validate-on-empty="false" lt-prop-remove-at-cursor="{{cxPropRemoveAtCursor}}" lt-prop-controls="{{cxPropControls}}"></lyte-number> </template></template> <template is="if" value="{{cxPropButtonTextInsideElement}}"><template case="true"><lyte-button onclick="{{action(\'buttonClick\')}}"><template is="yield" yield-name="text">{{cxPropButtonTextInsideElement}}</template></lyte-button></template></template> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{expHandlers(expHandlers(cxPropField.display_format,\'==\',\'slider\'),\'&amp;&amp;\',cxPropIsDisplayFormatEnabled)}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropField.data_type,\'!=\',\'currency\')}}"><template case="true"> <lyte-slider lt-prop-digits="{{cxPropDigits}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-value="{{cxPropValue}}" lt-prop-yield="true" lt-prop-handler="{{cxPropHandler}}" on-select="{{method(\'onsliderselect\')}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-width="{{cxPropSliderWidth}}" lt-prop-min="{{cxPropSliderMinValue}}" lt-prop-max="{{cxPropSliderMaxValue}}" lt-prop-scale-unit="{{currencySymbol}}" lt-prop-scale-interval="{{splitValue}}" class="{{cxPropSliderClass}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{cxPropSliderYield}}"><template case="true"> <lyte-yield yield-name="lyteSliderYield " slider-values="{{nonCurrencySliderValues}}"></lyte-yield> </template><template case="false"> <div class="lyteScaleOption"> <template is="for" items="{{ltPropScaleStyle}}" index="indexVal"> <span class="lyteScaleLine" style="{{item}}"> <span></span> <span class="lyteScalLable">{{nonCurrencySliderValues[indexVal]}}</span> </span> </template> </div> </template></template> </template> </lyte-slider> </template><template case="false"> <lyte-slider lt-prop-digits="{{cxPropDigits}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-value="{{cxPropValue}}" lt-prop-yield="true" lt-prop-handler="{{cxPropHandler}}" on-select="{{method(\'onsliderselect\')}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-width="{{cxPropSliderWidth}}" lt-prop-min="{{cxPropSliderMinValue}}" lt-prop-max="{{cxPropSliderMaxValue}}" lt-prop-scale-unit="{{currencySymbol}}" lt-prop-scale-interval="{{splitValue}}" class="{{cxPropSliderClass}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{cxPropSliderYield}}"><template case="true"> <lyte-yield yield-name="lyteSliderYield " slider-values="{{sliderValues}}"></lyte-yield> </template><template case="false"> <div class="lyteScaleOption"> <template is="for" items="{{ltPropScaleStyle}}" index="indexVal"> <span class="lyteScaleLine" style="{{item}}"> <span></span> <span class="lyteScalLable">{{sliderValues[indexVal]}}</span> </span> </template> </div> </template></template> </template> </lyte-slider> </template></template> </template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> </template><template case="filter"></template><template case="criteria"> <lyte-number lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-increment="{{if(cxPropStep,true,false)}}" lt-prop-step="{{cxPropStep}}" lt-prop-name="{{cxPropName}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-wheel="false" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-validate-on-empty="false" on-before-paste="{{method(\'onPaste\')}}" lt-prop-value="{{cxPropValue}}" lt-prop-appearance="{{if(ifEquals(cxPropAppearance,\'box\'),\'box\',\'flat\')}}" class="{{if(ifEquals(cxPropAppearance,\'box\'),\'lyteInputBox cxBoxInput\',\'lyteInput cxFlatInput\')}} {{if(ifEquals(cxPropFrom,\'criteria\'),\'cxW100Per\')}}" data-zcqa="{{cxPropZcqa}}" lt-prop-direction="{{if(ifEquals(cxPropFrom,\'criteria\'),\'horizontal\')}}" lt-prop-placeholder="{{cxPropPlaceholder}}" on-value-change="{{method(\'onChange\')}}" lt-prop-maxlength="{{cxPropMaxlength}}" onkeydown="{{action(\'checkLength\',this,event)}}" lt-prop-max="{{cxPropMaxvalue}}" lt-prop-min="{{cxPropMinvalue}}" on-before-max-min-validation="{{method(\'onBeforeMaxMinValidation\')}}" lt-prop-label="{{if(cruxAnd(ifEquals(cxPropFrom,\'criteria\'),cxPropCurrencyCode,currencyTypeField),cxPropCurrencyCode,if(cruxAnd(ifEquals(cxPropFrom,\'filter\'),currencySymbol),currencySymbol))}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-remove-at-cursor="{{cxPropRemoveAtCursor}}"></lyte-number> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template><template case="view"> <div id="{{cxPropId}}" data-zcqa="{{cxPropZcqa}}" class="{{if(currencyTypeField,\'numberDivCurrencyView\',\'numberDivNumberView\')}}"> <template is="if" value="{{cxPropTooltip}}"><template case="true"> <lyte-text lt-prop-tooltip-class="{{if(cxPropTooltipProps.class,cxPropTooltipProps.class,\'\')}}" lt-prop-tooltip-config="{{if(cxPropTooltipProps.config,cxPropTooltipProps.config)}}" lt-prop-value="{{value}}"></lyte-text> </template><template case="false"> {{value}} </template></template> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,1,2]},{type:"if",position:[1,1,1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,0],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item"}}},{type:"text",position:[1,3,0]}]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item"}}},{type:"text",position:[1,3,0]}]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[5]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,0],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item"}}},{type:"text",position:[1,3,0]}]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item"}}},{type:"text",position:[1,3,0]}]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","cxPropFocusAtEnd","cxPropFocus","cxPropAutofocus","lyteViewPort","cxPropFrom","cxPropId","cxPropName","cxPropValue","cxPropEmptyValue","value","cxPropPlaceholder","cxPropDisabled","cxPropReadonly","cxPropMaxlength","cxPropMaxvalue","cxPropMinvalue","cxPropIsoCode","cxPropZcqa","cxPropClass","isError","cxPropIgnoreEmptyValue","cxPropCurrencyCode","currencySymbol","cxPropCurrencyDetails","cxPropDefaultRoundOff","cxPropDefaultOrgCurrency","cxPropAppearance","cxPropErrorMessage","viewClass","cxPropDecimalAllowed","currencyTypeField","cxPropField","cxPropFieldKey","cxPropClearErrorMessage","cxPropDirection","cxPropLabelClass","cxPropAllowNegativeValue","lyteUnbound","cxPropTabIndex","cxPropTabindex","cxPropTooltip","allowNegative","cxPropExchangeRate","cxPropErrorYield","cxPropExchangeRateFinance","cxPropHomeCurrency","cxPropDisplayCurrency","cxPropFormattedCurrency","cxPropShowCalculator","showResult","cxPropInfoTooltip","result","onFocus","cxPropTooltipProps","cxPropStep","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","maxlength","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropIconClass","cxPropRightIconClass","cxPropLayout","cxPropDefaultCurrencyIsoCode","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropType","cxPropButtonTextInsideElement","cxPropRestrict","cxPropMandatory","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropPreventFocusOnError","tooltip","cxPropHandler","cxPropIsDisplayFormatEnabled","cxPropSliderWidth","cxPropSliderClass","cxPropSliderYield","cxPropDigits","cxPropIncrement","cxPropWheel","cxPropUpdateDelay","cxPropCallbackDelay","cxPropIgnoreSymbols","cxPropBoundary","cxPropRemoveAtCursor","cxPropControls","cxPropButtonYield","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropFocusAtEnd:Lyte.attr("boolean",{default:!1}),cxPropFocus:Lyte.attr("boolean",{default:!1}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),value:Lyte.attr("string"),cxPropPlaceholder:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropMaxlength:Lyte.attr("number"),cxPropMaxvalue:Lyte.attr("number",{default:9e18}),cxPropMinvalue:Lyte.attr("number"),cxPropIsoCode:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),isError:Lyte.attr("boolean",{default:!1}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropCurrencyCode:Lyte.attr("string",{default:""}),currencySymbol:Lyte.attr("string",{default:""}),cxPropCurrencyDetails:Lyte.attr("object",{default:"undefined"!=typeof Crm?Crm.userDetails.CURRENCY_DETAILS:{}}),cxPropDefaultRoundOff:Lyte.attr("number",{default:"undefined"!=typeof Crm&&Crm.userDetails.defaultRoundOff?Crm.userDetails.defaultRoundOff:2}),cxPropDefaultOrgCurrency:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.defaultOrgCurrency:""}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),viewClass:Lyte.attr("string",{default:"numberDivNumberView"}),cxPropDecimalAllowed:Lyte.attr("boolean",{default:!0}),currencyTypeField:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"horizontal"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropAllowNegativeValue:Lyte.attr("boolean",{default:!0}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string"),allowNegative:Lyte.attr("boolean",{default:!0}),cxPropExchangeRate:Lyte.attr("number"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropExchangeRateFinance:Lyte.attr("number"),cxPropHomeCurrency:Lyte.attr("string"),cxPropDisplayCurrency:Lyte.attr("boolean",{default:!0}),cxPropFormattedCurrency:Lyte.attr("string"),cxPropShowCalculator:Lyte.attr("boolean",{default:!1}),showResult:Lyte.attr("object",{default:{show:!1}}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),result:Lyte.attr("string"),onFocus:Lyte.attr("boolean",{default:!1}),cxPropTooltipProps:Lyte.attr("object"),cxPropStep:Lyte.attr("number"),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),maxlength:Lyte.attr("number"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string"),cxPropRightIconClass:Lyte.attr("string"),cxPropLayout:Lyte.attr("string"),cxPropDefaultCurrencyIsoCode:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.defaultCurrencyISOCode:""}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string",{default:"text"}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropRestrict:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),tooltip:Lyte.attr("string"),cxPropHandler:Lyte.attr("string",{default:"lyteArrow"}),cxPropIsDisplayFormatEnabled:Lyte.attr("boolean",{default:!1}),cxPropSliderWidth:Lyte.attr("string",{default:"400px"}),cxPropSliderClass:Lyte.attr("string",{default:""}),cxPropSliderYield:Lyte.attr("boolean",{default:!1}),cxPropDigits:Lyte.attr("number",{default:1}),cxPropIncrement:Lyte.attr("boolean",{default:!1}),cxPropWheel:Lyte.attr("boolean",{default:!1}),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropIgnoreSymbols:Lyte.attr("boolean",{default:!1}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropRemoveAtCursor:Lyte.attr("boolean",{default:!0}),cxPropControls:Lyte.attr("boolean",{default:!1}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object")}},getValue:function(){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue;if(this.$node.querySelector("input")){var e=this.$node.querySelector("input").value.trim();return e&&"."==e[0]&&(e="0"+e),e}return""},validate:function(){var e=this.getValue(),t=this.getData("cxPropField");if(this.setData("cxPropErrorMessage",""),"create"==this.getData("cxPropFrom")){var o=this.validateNumberField(e,t,this.data.maxlength,this.data.cxPropMaxvalue,this.data.cxPropMinvalue);return 0!=o||this.data.cxPropPreventFocusOnError||(this.$node.querySelector("lyte-input")?this.$node.querySelector("lyte-input").focus():this.$node.querySelector("lyte-number")&&this.$node.querySelector("lyte-number").focus()),o}if(!(e&&!isNaN(parseInt(e))||this.data.cxPropIgnoreEmptyValue))return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.$node.querySelector("input").focus(),!1;if(!this.getData("cxPropAllowNegativeValue")&&(-1!=e.indexOf("-")||-1!=e.indexOf("+"))||!this.data.cxPropDecimalAllowed&&-1!=e.indexOf("."))return this.showAlert(_cruxUtils.getI18n("crm.mb.field.common.splc")),this.$node.querySelector("input").focus(),!1;if("autonumber"==t.data_type||"bigint"==t.data_type){var a="bigint"!=t.data_type||this.isValidInteger(e);if(e.indexOf(".")>-1||!a)return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.$node.querySelector("input").focus(),!1}else{if("integer"!=t.data_type)return(a=this.isValidDecimal(e))?(a=this.decimalLengthCheck(e))||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.decimal.check2",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label),t.decimal_place)),this.$node.querySelector("input").focus()):this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),a;if("criteria"==this.data.cxPropFrom||"filter"==this.data.cxPropFrom)return(a=this.isValidDecimal(e))&&(a=this.decimalLengthCheck(e,{decimal_place:void 0===this.data.cxPropField.decimal_place||"null"==this.data.cxPropField.decimal_place?2:this.data.cxPropField.decimal_place})),a||this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),a}return!0},resetData:function(){this.$node.querySelector("lyte-input")?this.$node.querySelector("lyte-input").ltProp("value",""):this.$node.querySelector("lyte-number")&&this.$node.querySelector("lyte-number").ltProp("value","")},init:function(){if(this.getData("cxPropMaxlength")||this.setData("cxPropMaxlength",19),""==this.data.cxPropCurrencyCode){var e="undefined"!=typeof Crm?Crm.userDetails.BASE_CURRENCY:"";"create"==this.data.cxPropFrom&&"undefined"!=typeof Crm&&void 0!==Crm.userDetails.PREFERRED_CURRENCY&&(e=Crm.userDetails.PREFERRED_CURRENCY),this.setData("cxPropCurrencyCode",e)}-1!==["filter","criteria"].indexOf(this.getData("cxPropFrom"))&&(("formula"==this.getData("cxPropField").data_type?-1!==["double","currency","bigint","integer"].indexOf(this.getData("cxPropField").formula.return_type):-1!==["double","currency","bigint","integer"].indexOf(this.getData("cxPropField").data_type))||this.data.cxPropField.history_tracking||this.data.cxPropField.allowNegativeValue||this.setData("cxPropAllowNegativeValue",!1))},methods:{onsliderselect:function(e,t){this.$node.querySelector("lyte-number")?this.$node.querySelector("lyte-number").setData("ltPropValue",e):this.$node.querySelector("lyte-input").setData("ltPropValue",e),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),this.$node)},onChange:function(e,t){var o;(this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),("criteria"===this.data.cxPropFrom||"filter"===this.data.cxPropFrom)&&e.newValue&&19===e.newValue.length&&parseInt(e.newValue)>=this.data.cxPropMaxvalue&&!this._errorAlertShown&&(this.showMsgBox(_cruxUtils.getI18n("sentiment.criteria.wrongcriteria","9000000000000000000"),"error"),this.$node.querySelector("lyte-number").ltProp("value","9000000000000000000"),this._errorAlertShown=!1),this.setData("cxPropValue",t.getData("ltPropValue")),this.$node.querySelector("lyte-slider"))&&(o=this.$node.querySelector("lyte-number")?this.$node.querySelector("lyte-number").getData("ltPropValue"):this.$node.querySelector("lyte-input").getData("ltPropValue"),this.$node.querySelector("lyte-slider").setData("ltPropValue",o));this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),this.$node)},onBeforeMaxMinValidation:function(e,t,o){return"max"===e&&(this.showMsgBox(_cruxUtils.getI18n("sentiment.criteria.wrongcriteria",this.data.cxPropMaxvalue),"error"),this._errorAlertShown=!0),o&&19==o.length&&parseInt(o)>=this.data.cxPropMaxvalue?"9000000000000000000":o},onPaste:function(e,t,o){return"criteria"!=this.getData("cxPropFrom")&&(0==this.data.cxPropAllowNegativeValue?o.replace("-",""):void 0)},popoverClosed:function(){this.setData("onFocus",!1)},popoverClosed1:function(){delete this.operationPerformed},hideInfoTooltip:function(){this.showHideInfoTooltip()}},actions:{checkLength:function(e,t){if(-1==[38,40,69,187].indexOf(t.keyCode)||this.getData("cxPropShowCalculator")||t.preventDefault(),this.getData("cxPropDecimalAllowed")||-1==[187,190,110].indexOf(t.keyCode)||t.preventDefault(),e&&e.querySelector("input")&&e.querySelector("input").value.indexOf(".")>-1&&-1!=[190,110].indexOf(t.keyCode))for(var o=e.querySelector("input").value.split(/[+\-*/,]+/),a=e.querySelector("input").selectionStart-1,r=0,i=0;r<o.length;r++)if(!((i+=o[r].length)<a)){o[r].indexOf(".")>-1&&t.preventDefault();break}this.getData("cxPropAllowNegativeValue")&&!(this.data.cxPropMinvalue>=0)||this.data.cxPropShowCalculator||173!=t.keyCode&&189!=t.keyCode||t.preventDefault()},showCalculatorInfo:function(){if(this.data.cxPropReadonly)return!1;var e=void 0;this.getData("showResult").formula&&(e=this.getData("showResult").formula.trim()+" = "+this.getData("showResult").value),Lyte.objectUtils(this.getData("showResult"),"add","infoDetails",e),this.setData("onFocus",!0),this.$node.querySelector("#popovercalculator").setData("ltPropShow",!0)},hidePopover:function(){this.getData("showResult").formula&&(this.$node.querySelector("input").value=this.getData("showResult").formula,this.$node.querySelector("input").focus()),this.setData("onFocus",!1),this.$node.querySelector("#popovercalculator").setData("ltPropShow",!1),this.operationPerformed=!0,Lyte.objectUtils(this.getData("showResult"),"add","show",!0),this.$node.querySelector("lyte-input").classList.remove("cxCalcultorResult")},onPaste:function(){return this.actions.checkLengthOnUp.call(this,event.clipboardData.getData("Text")),0==this.data.cxPropAllowNegativeValue&&(this.$node.querySelector("input").value=this.$node.querySelector("input").value.replace("-","")),!1},onFocusInput:function(e){e?this.$node.querySelector(".cxBoxWithRightIcon").classList.remove("cxBoxInputFocused"):this.$node.querySelector(".cxBoxWithRightIcon").classList.add("cxBoxInputFocused")},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},checkLengthOnUp:function(e){if(this.data.cxPropDecimalAllowed&&this.data.cxPropMaxlength&&"integer"!=this.data.cxPropField.data_type&&"number"!=this.data.cxPropType){var t,o=e||this.$node.querySelector("input").value;try{t=o.match(/[+\-*/,]+/g).length}catch(e){t=0}o.indexOf(".")>-1||event&&46==event.keyCode&&-1==o.indexOf(".")&&event.srcElement.selectionStart!=this.data.maxlength?this.setData("maxlength",this.data.cxPropMaxlength+1+t):this.setData("maxlength",this.data.cxPropMaxlength+t)}}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeCurrencyCode:function(){var e=this.getData("cxPropField");if(this.data.cxPropDisplayCurrency)if("currency"==e.data_type||39==e.ui_type||143==e.ui_type||144==e.ui_type||145==e.ui_type||36==e.ui_type||77==e.ui_type||"formula"==e.data_type&&"currency"==e.formula.return_type||e.rollup_summary&&"currency"==e.rollup_summary.return_type){this.setData("currencyTypeField",!0);var t=this.data.cxPropIsoCode;if(!t&&this.data.cxPropCurrencyCode&&(t=this.data.cxPropCurrencyCode),t){var o=this.getData("cxPropCurrencyDetails");for(var a in o)if(a==t){this.setData("currencySymbol",o[a].symbol);break}}else"undefined"!=typeof Crm&&Crm.userDetails&&Crm.userDetails.DEFAULT_ORG_CURRENCY?this.setData("currencySymbol",Crm.userDetails.DEFAULT_ORG_CURRENCY.symbol):"undefined"!=typeof Crm&&Crm.userDetails&&Crm.userDetails.defaultOrgCurrency&&this.setData("currencySymbol",Crm.userDetails.defaultOrgCurrency)}else this.setData({currencyTypeField:!1,currencySymbol:""})}.observes("cxPropCurrencyCode","cxPropIsoCode","cxPropField","cxPropField.data_type").on("init"),observeValue:function(){if("view"==this.getData("cxPropFrom"))if(!this.getData("cxPropValue")&&this.getData("cxPropEmptyValue"))this.setData("value",this.getData("cxPropEmptyValue"));else{var e=this.getData("cxPropValue");if(e&&"null"!=e&&"undefined"!=e){var t=this.getData("cxPropField"),o=t.data_type;("formula"==o||t.formula&&t.formula.return_type||t.dataparam&&t.dataparam.return_type||t.rollup_summary&&t.rollup_summary.return_type)&&(o=t.formula&&"currency"==t.formula.return_type||t.dataparam&&"currency"==t.dataparam.return_type||t.rollup_summary&&"currency"==t.rollup_summary.return_type?"currency":"number"),this.setData("value",this.getNumberValueForView(e,o,this.getData("cxPropIsoCode"),t.ui_type,this.getData("cxPropCurrencyDetails"),t&&null!=t.decimal_place?t.decimal_place:this.getData("cxPropDefaultRoundOff"),this.getData("cxPropCurrencyCode"),this.getData("cxPropExchangeRate"),this.getData("cxPropExchangeRateFinance"),this.getData("cxPropHomeCurrency"),this.getData("cxPropDisplayCurrency"),this.getData("cxPropFormattedCurrency"),t.separator,this.getData("cxPropDefaultOrgCurrency"),t.currency?t.currency.rounding_option:void 0,t.currency?t.currency.precision:void 0))}else this.setData("value","")}else this.operationPerformed||(this.data.showResult.value=this.data.cxPropValue);if("create"===this.data.cxPropFrom){if(this.setFocusUtil(),("slider"===this.data.cxPropField.display_format||this.data.cxPropField.range)&&("currency"===this.data.cxPropField.data_type?this.setData("cxPropShowCalculator",!0):"integer"===this.data.cxPropField.data_type&&this.setData("cxPropDigits",0)),"slider"===this.data.cxPropField.display_format){this.data.cxPropField.decimal_place&&this.setData("cxPropDigits",this.data.cxPropField.decimal_place);var a=this.data.cxPropField.display_format_properties.split,r=this.data.cxPropField.range.from,i=(this.data.cxPropField.range.to-r)/(a+1);this.setData("splitValue",i)}if(this.data.cxPropField.range){this.setData("cxPropMaxvalue",this.data.cxPropField.range.to),this.setData("cxPropMinvalue",this.data.cxPropField.range.from);var s=Number(Math.round(this.data.cxPropField.range.from+"e"+this.data.cxPropDigits)+"e-"+this.data.cxPropDigits).toString(),p=Number(Math.round(this.data.cxPropField.range.to+"e"+this.data.cxPropDigits)+"e-"+this.data.cxPropDigits).toString();this.setData("cxPropSliderMinValue",s),this.setData("cxPropSliderMaxValue",p)}}}.observes("cxPropValue","cxPropFormattedCurrency","cxPropFrom").on("init"),observeIsError:function(){if("create"==this.getData("cxPropFrom")&&(this.$node.querySelector("lyte-input")||this.$node.querySelector("lyte-number"))){var e=$L(this.$node);if(this.getData("cxPropShowCalculator")){var t=e.find(".cxBoxWithRightIcon");this.getData("isError")?t.addClass("cxErrorBoxWithRightIcon"):t.removeClass("cxErrorBoxWithRightIcon")}else{var o=e[0].querySelector("lyte-input")||e[0].querySelector("lyte-number");o=$L(o),this.getData("isError")?o.addClass("cxErrorBox"):o.removeClass("cxErrorBox")}}}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin(this.$node.querySelector("lyte-number")?"lyte-number":"lyte-input")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeCurrencyTypeField:function(){if(this.getData("currencyTypeField")&&this.data.currencySymbol&&"box"===this.getData("cxPropAppearance")&&("create"===this.getData("cxPropFrom")||"criteria"===this.getData("cxPropFrom")||"filter"===this.getData("cxPropFrom"))&&(this.data.cxPropCurrencyCode||!this.data.cxPropCurrencyCode&&"create"==this.data.cxPropFrom)){var e=$L(this.$node),t=e.find("lyte-input")||e.find("lyte-number");if(t.length>0)t.addClass("cxBoxInputInsideLabel");else{var o=e.find("lyte-number");o.length>0&&o.addClass("cxBoxInputInsideLabel")}}}.observes("currencyTypeField","lyteViewPort","cxPropFrom").on("didConnect"),obseredidConnect:function(){if("create"!=this.getData("cxPropFrom")||!this.getData("cxPropShowCalculator")||this.bindEvent||this.data.lyteViewPort)"view"===this.data.cxPropFrom&&delete this.bindEvent;else{var e=this;e.bindEvent=e.calculate.bind(e),["keyup","keypress","blur"].forEach((function(t){e.$node.querySelector("input")&&e.$node.querySelector("input").addEventListener(t,e.bindEvent)}))}var t="undefined"!=typeof Crm?Crm.userDetails.BASE_CURRENCY:"";if("create"==this.data.cxPropFrom&&"currency"==this.data.cxPropField.data_type&&("slider"==this.data.cxPropField.display_format||this.data.cxPropField.range)&&void 0!==typeof Crm&&Crm.userDetails.CURRENCY_DETAILS[this.data.cxPropIsoCode]){var o=Number(Crm.userDetails.CURRENCY_DETAILS[this.data.cxPropIsoCode].er),a=this.data.cxPropField.range.from.toFixed(this.data.cxPropDigits)*o,r=this.data.cxPropField.range.to.toFixed(this.data.cxPropDigits)*o;if("slider"==this.data.cxPropField.display_format){var i=(r-a)/(this.data.cxPropField.display_format_properties.split+1);this.setData("splitValue",i);var s=this.$node.querySelector("lyte-slider");s&&(s.ltProp("Min",a),s.ltProp("Max",r))}this.setData("cxPropMinvalue",a),this.setData("cxPropMaxvalue",r)}if("slider"==this.data.cxPropField.display_format&&this.data.cxPropField.range&&"create"==this.data.cxPropFrom){var p=this.$node.querySelector("lyte-slider")?this.$node.querySelector("lyte-slider").component.data.scaleVal:"";if("currency"==this.data.cxPropField.data_type){for(var l=[],n=0;n<p.length;n++)l[n]=this.convertCurrencyValue(this.data.cxPropIsoCode,(p[n].match(/[-+]?\d+(\.\d+)?/g)||[])[0],this.data.cxPropField.decimal_place,this.data.cxPropCurrencyDetails,t);this.setData("sliderValues",l)}if("currency"!==this.data.cxPropField.data_type&&"slider"==this.data.cxPropField.display_format){var c=p.map(function(e){return Number(Math.round(e+"e"+this.data.cxPropDigits)+"e-"+this.data.cxPropDigits).toString()}.bind(this));this.setData("nonCurrencySliderValues",c)}this.$node.querySelector("lyte-slider").ltProp("value",this.data.cxPropValue)}}.observes("lyteViewPort","cxPropFrom","cxPropIsoCode").on("didConnect"),calculate:function(e){var t=this.$node.querySelector("input");if(this.operationPerformed=!0,"keypress"==e.type){var o=e.which?e.which:e.keyCode;if(!([43,45,42,47,13,40,41,46,8,9].indexOf(o)>-1||o>=48&&o<=57))return e.preventDefault(),!1;if(13==o)return Lyte.objectUtils(this.getData("showResult"),"add","show",!1),this.$node.querySelector("lyte-input").classList.remove("cxCalcultorResult"),t.blur(),e.preventDefault(),!1}else if("keyup"==e.type){var a=t.value;if(-1==a.indexOf(",")&&""!=a&&!a.match(/[a-z]/i)){/^(\+|\*|\/)/.test(a)&&(a=a.substr(1));var r="";if(/^((?!([+\-*/.]{2,})).)*$/.test(a))if(1==this.checkBrackets(a))if(-1==a.indexOf("()"))if(this.checkCorrectInputEle(a))if(this.checkDotCorrectInput(a)){var i=a.length-1,s=this.data.cxPropField&&this.data.cxPropField.hasOwnProperty("decimal_place")?this.data.cxPropField.decimal_place:"undefined"!=typeof Crm&&Crm.userDetails.CURRENCY_DETAILS&&Crm.userDetails.CURRENCY_DETAILS[this.data.cxPropCurrencyCode]?Crm.userDetails.CURRENCY_DETAILS[this.data.cxPropCurrencyCode].decimals:2;(-1==["+","-","*","/","."].indexOf(a[i])||"."!=(a=a.slice(0,-1)))&&(a=this.clearLeadingZero(a),null!=(r=$L.evaluate?$L.evaluate(a):new Function("return "+a)())&&r%1!=0&&(r=Number(Math.round(r+"e"+s)+"e-"+s)))}}if(null!=r&&""!==r){1==/[+\-*/(]/.test(a)&&"+"!=a&&""!=a?(this.$node.querySelector("lyte-input").classList.add("cxCalcultorResult"),this.setData("showResult",{show:!0,value:r,formula:a})):(this.setData("showResult",{show:!1,formula:a,value:r}),this.$node.querySelector("lyte-input").classList.remove("cxCalcultorResult"))}else Lyte.objectUtils(this.getData("showResult"),"add","show",!1),Lyte.objectUtils(this.getData("showResult"),"add","formula",void 0),""==a&&Lyte.objectUtils(this.data.showResult,"add","value",""),this.$node.querySelector("lyte-input").classList.remove("cxCalcultorResult")}else if("blur"==e.type){void 0!==this.getData("showResult").value&&""!==this.getData("showResult").value&&void 0!==this.getData("showResult").formula&&this.setData("cxPropValue",this.getData("showResult").value);var p=this.$node.querySelector("#cxCalcultorResultPopover");p&&p.ltProp("show",!1),this.$node.querySelector("lyte-input").classList.remove("cxCalcultorResult"),delete this.operationPerformed}},didDestroy:function(){if("create"==this.getData("cxPropFrom")&&this.getData("cxPropShowCalculator")){var e=this;e.$node.querySelector("input")&&["keyup","keypress","blur"].forEach((function(t){e.$node.querySelector("input").removeEventListener(t,e.bindEvent)}))}},observeFrom:function(){this.getData("cxPropMaxlength")||("criteria"==this.getData("cxPropFrom")||"filter"==this.getData("cxPropFrom")?this.setData("cxPropMaxlength",19):this.setData("cxPropMaxlength",void 0)),this.data.cxPropDecimalAllowed||this.setData("cxPropRestrict","\\."),this.setData("showResult",{show:!1})}.observes("cxPropFrom").on("init"),observeMaxlength:function(){var e=this.data.cxPropMaxlength;this.data.cxPropValue&&this.data.cxPropValue.indexOf(".")>-1&&"number"!=this.data.cxPropType&&e++,this.setData("maxlength",e)}.observes("cxPropMaxlength").on("init"),observeClass:function(e){if("view"!=this.data.cxPropFrom){var t=$L("lyte-number",this.$node);if(t.length||(t=$L("lyte-input",this.$node)),!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect"),observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this.$node)}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled","cxPropTooltip").on("init"),clearLeadingZero:function(e){for(var t,o=/(?:^|[^+])\b[\d.]+/gm;null!==(t=o.exec(e));)-1==(t=t.toString()).indexOf(".")&&null!=t.match(/(^0{1,}(?!($|\.)))/g)&&(e=e.replace(t,t.replace(/(^0{1,}(?!($|\.)))/g,"")));return e},mandatoryType:function(){this.observeMandatoryTypeMixin(this.$node.querySelector("lyte-number")?"lyte-number":"lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),checkDotCorrectInput:function(e){for(var t=e.split(/[+\-*/,]+/),o=t.length,a=0;a<o;a++){if(t[a].split(".").length>2)return!1}return!0},checkCorrectInputEle:function(e){for(var t=e.split(""),o=["(",")"],a=0;a<t.length;a++){var r=t[a];if(-1!=o.indexOf(r)){var i=a+1,s=/\d/,p=a-1;if("("==r){if(null!=t[p]&&(s.test(t[p])||")"==t[p]||"."==t[p]))return!1;if(null!=t[i]){if(-1!=["/","*"].indexOf(t[i]))return!1}}else if(")"==r){if(null!=t[i]&&(s.test(t[i])||"."==t[i]||"("==t[p]))return!1;if(null!=t[p]){if(-1!=["+","-","*","/"].indexOf(t[p])||"."==t[p])return!1}}}}return!0},checkBrackets:function(e){var t=[];for(var o in e)if("("==e[o])t.push(e[o]);else if(")"==e[o]){if(!t.length)return!1;t.pop()}return!t.length},observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-phone-component",{_template:'<template tag-name="crux-phone-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{cxPropTabIndex}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(cxPropCallAllowed,\'==\',false),\'||\',cxPropField.private.restricted)}}"><template case="true"> <div class="phoneRtl"> <span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span> </div> </template><template case="false"><template is="if" value="{{outbound}}"><template case="true"> <div class="phoneRtl cxPhoneViewOutbound"> <span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span> <span class="cxCalliconOuter" onclick="{{action(\'onClick\')}}" onmouseenter="{{action(\'callHover\',true)}}" onmouseleave="{{action(\'callHover\',false)}}"> <span class="cxCallIcon"></span> <span id="calllabel1" class="cxPhoneViewCallLabel">{{cruxGetI18n(\'Call\')}}</span> </span> </div> </template><template case="false"><template is="if" value="{{zpbEnabled}}"><template case="true"> <div class="phoneRtl cxPhoneViewZPBEnabled"> <span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span> <span class="cxPhoneViewZPBEnabledIconWrap phoneRtlA"> <zpb-phone zpb-ctd-on-mouse-over="{{method(\'callHover\',true)}}" zpb-cdt-on-mouse-out="{{method(\'callHover\',false)}}" number="{{cxPropDisplayValue}}" module="{{cxPropModule}}" recordid="{{cxPropEntityId}}" callbackparamfn="asyncFn(crmCallsNew.getClick2CallPromise, \'{{cxPropEntityId}}\', \'{{cxPropModule}}\', \'{{cxPropEntityName}}\', \'\', \'{{cxPropValue}}\', \'{{cxPropField.column_name}}\')"></zpb-phone> </span> </div> </template><template case="false"> <div onmouseover="{{action(\'onMouseOver\')}}" onmouseout="{{action(\'onMouseOut\')}}" class="phoneRtl cxPhoneViewZPBNotEnabled"> <zpb-phone zpb-ctd-on-mouse-over="{{method(\'callHover\',true)}}" zpb-cdt-on-mouse-out="{{method(\'callHover\',false)}}" phoneno="{{cxPropValue}}" callbackparam="{&quot;module&quot;:&quot;{{module}}&quot;, &quot;searchid&quot;:&quot;{{entityId}}&quot;}"><span class="cxPhoneViewValue lvPhFld">{{cxPropDisplayValue}}</span></zpb-phone> <a class="pH2 phoneRtl vH cxPhoneSkypeCall" title="{{cxPropPhoneIconTooltip}}" href="skype:{{cxPropValue}}?call" onclick="sE();"></a> </div> </template></template></template></template></template></template> </template></template> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}" onfocusout="{{action(\'setFocusClass\',false)}}" onfocus="{{action(\'setFocusClass\',true)}}"> <div class="{{if(cxPropEnableCountryCode,concat(\'cxDropdownInputGroup \',cxPropWrapperClass),\'\')}}"> <template is="if" value="{{cxPropEnableCountryCode}}"><template case="true"> <crux-dropdown cx-prop-disabled="{{cxPropDisabled}}" on-option-select="{{method(\'onCCSelectChange\')}}" cx-prop-options="{{countryList}}" cx-prop-system-value="actual_value" cx-prop-user-value="display_value" cx-prop-display-value="{{selectedCode}}" on-show="{{method(\'onBeforeOpen\')}}" cx-prop-selected="{{selectedValue}}" on-hide="{{method(\'setFocusClass\',false)}}" cx-prop-icon-class="{{cxPropDropdownIconClass}}" on-before-show="{{method(\'beforeShow\')}}" cx-prop-class="{{cxPropDropdownClass}}" cx-prop-is-dropdown-icon-node="{{cxPropIsDropdownIconNode}}" cx-prop-prevent-parent-scroll="{{cxPropPreventParentScroll}}" on-before-hide="{{method(\'beforeHide\')}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" cx-prop-box-class="{{cxPropBoxClass}}" cx-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}"></crux-dropdown> </template></template> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" class="cxW100Per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" lt-prop-type="text" lt-prop-value="{{inputValue}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" onkeypress="{{action(\'onKeyPress\',event)}}" onkeyup="{{action(\'onKeyUp\',event)}}" onpaste="{{action(\'onInputValuePaste\',event)}}" on-focus="{{method(\'setFocusClass\',true)}}" on-blur="{{method(\'setFocusClass\',false)}}" lt-prop-wrapper-class="{{if(cxPropEnableCountryCode,\'\',cxPropWrapperClass)}}"></lyte-input><template is="if" value="{{cxPropButtonTextInsideElement}}"><template case="true"><lyte-button onclick="{{action(\'buttonClick\')}}"><template is="yield" yield-name="text">{{cxPropButtonTextInsideElement}}</template></lyte-button></template></template> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> </div> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"componentDynamic",position:[3,1,3]},{type:"attr",position:[3,1,4]},{type:"if",position:[3,1,4],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,0],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[3,1,6]},{type:"if",position:[3,1,6],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","cxPropAutofocus","lyteViewPort","cxPropValue","cxPropFrom","cxPropDisplayValue","outbound","cxPropField","cxPropCallAllowed","cxPropEmptyValue","cxPropPlaceholder","cxPropMaxlength","cxPropDisabled","cxPropReadonly","zpbEnabled","cxPropEntityId","cxPropEntityName","cxPropModule","isError","cxPropAppearance","cxPropErrorMessage","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropDirection","cxPropLabelClass","cxPropTabIndex","cxPropTabindex","cxPropZcqa","lyteUnbound","cxPropClass","cxPropTooltip","cxPropErrorYield","cxPropInfoTooltip","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropEnableCountryCode","cxPropUserLocale","countryISOCodeVsName","countryList","selectedCode","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropDropdownIconClass","cxPropLayout","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropPhoneIconTooltip","cxPropPhoneInUserFormat","cxPropButtonTextInsideElement","cxPropMandatory","cxPropShowWarning","cxPropWarningMessage","cxPropWarningIconClass","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropDropdownClass","cxPropIsDropdownIconNode","cxPropPreventFocusOnError","tooltip","selectedValue","cxPropPreventParentScroll","cxPropBoxClass","inputValue","cxPropButtonYield","cxPropUpdateDelay","cxPropCallbackDelay","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisplayValue:Lyte.attr("string"),outbound:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{},hideAttr:!0}),cxPropCallAllowed:Lyte.attr("boolean",{default:!0}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string"),cxPropMaxlength:Lyte.attr("number"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),zpbEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.ZPBENABLED}),cxPropEntityId:Lyte.attr("string"),cxPropEntityName:Lyte.attr("string"),cxPropModule:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropTabIndex:Lyte.attr("string",{default:"0"}),cxPropTabindex:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropEnableCountryCode:Lyte.attr("boolean",{default:!1}),cxPropUserLocale:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.COUNTRY_LOCALE:""}),countryISOCodeVsName:Lyte.attr("object",{default:"undefined"!=typeof Crm?Crm.userDetails.countryISOCodeVsName:{}}),countryList:Lyte.attr("array",{default:[]}),selectedCode:Lyte.attr("string"),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropDropdownIconClass:Lyte.attr("string",{default:"dropdown"}),cxPropLayout:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropPhoneIconTooltip:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.phoneNo.Link.Title")}),cxPropPhoneInUserFormat:Lyte.attr("boolean",{default:!0}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningMessage:Lyte.attr("string"),cxPropWarningIconClass:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropDropdownClass:Lyte.attr("string"),cxPropIsDropdownIconNode:Lyte.attr("boolean",{default:!1}),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),tooltip:Lyte.attr("string"),selectedValue:Lyte.attr("string"),cxPropPreventParentScroll:Lyte.attr("boolean"),cxPropBoxClass:Lyte.attr("string",{default:""}),inputValue:Lyte.attr("string"),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropAriaErrorProperties:Lyte.attr("object")}},actions:{callHover:function(e){this.callIconHover(e)},setFocusClass:function(e){this.setFocusClass(e)},onMouseOver:function(){var e=this.$node;e.querySelector("a")&&(e.querySelector("a").style.visibility="visible")},onMouseOut:function(){var e=this.$node;e.querySelector("a")&&(e.querySelector("a").style.visibility="hidden")},onClick:function(){this.phoneClick(this.getData("cxPropValue"),this.getData("cxPropEntityId"),this.getData("cxPropModule"),this.getData("cxPropEntityName"))},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},onKeyPress:function(e){if(this.data.cxPropEnableCountryCode&&this.isBlockedChar(e))return e.preventDefault(),!1},onKeyUp:function(e){if(this.data.cxPropEnableCountryCode){var t=$L(e.target);this.setData("inputValue",t.val()),this.autoPopCountryCode(this.$node,t)}},onInputValuePaste:function(e){this.data.cxPropEnableCountryCode&&setTimeout(function(){var t=$L(e.target);this.setData("inputValue",t.val()),this.removeBlockedChars(t),this.autoPopCountryCode(this.$node,t)}.bind(this))}},callIconHover:function(e){e?this.getMethods("onCallHover")&&this.executeMethod("onCallHover"):this.getMethods("onCallLeave")&&this.executeMethod("onCallLeave")},setFocusClass:function(e){this.data.cxPropEnableCountryCode&&(e?this.data.cxPropDisabled?this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxDropdownInputGroupDisabled"):this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxDropdownInputGroupFocused"):this.data.cxPropDisabled?this.$node.querySelector(".cxDropdownInputGroup").classList.remove("cxDropdownInputGroupDisabled"):this.$node.querySelector(".cxDropdownInputGroup").classList.remove("cxDropdownInputGroupFocused"))},getValue:function(){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue;var e=this.$node.querySelector("lyte-input").ltProp("value");if(e=e?e.trim():e,"create"==this.data.cxPropFrom&&this.data.cxPropEnableCountryCode&&e){var t=this.$node.querySelector("crux-dropdown").getData("cxPropDisplayValue");t&&"-None-"!==t&&t!==_cruxUtils.getI18n("None")&&"--"!==t&&(e=(t=t.includes("(")?t.split("(")[1].split(")")[0]:t).trim()+e)}return e||null},validate:function(){return this.validatePhoneNumber(this.getData("cxPropField"),this.getValue())},resetData:function(){this.$node.querySelector("lyte-input").ltProp("value","")},methods:{callHover:function(e){this.callIconHover(e)},onChange:function(e){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage","");var t=this.getValue();this.preventObserver=!0,this.setData("cxPropValue",t),this.preventObserver=!1,!this.data.cxPropEnableCountryCode&&e&&this.setData("inputValue",e.newValue),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",t)},zpbCallBackFn:function(){return'asyncFn(crmCallsNew.getClick2CallPromise,"'+this.getData("cxPropEntityId")+'","'+this.getData("cxPropModule")+'","'+this.getData("cxPropEntityName")+'","","'+this.data.cxPropValue+'","'+this.data.cxPropField.column_name+'")'},hideInfoTooltip:function(){this.showHideInfoTooltip()},onCCSelectChange:function(e,t,o,a){var r=a.getAttribute("data-value");this.setData("selectedValue",t),this.setData("selectedCode",""),"-None-"==r?this.setData("selectedCode",_cruxUtils.getI18n("None")):this.setData("selectedCode",r+"(+"+a.innerText.split(" +")[1]+")"),setTimeout(function(){this.$node.querySelector("input").focus()}.bind(this),0),this.preventObserver=!0,this.setData("cxPropValue",this.getValue()),this.preventObserver=!1,this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.data.cxPropValue)},onBeforeOpen:function(e,t){this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxDropdownInputGroupFocused");var o=this.$node.querySelector("crux-dropdown"),a=this.data.selectedCode;if(setTimeout((function(){o.cxProp("displayValue",a)})),this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("input").focus(),this.getMethods("onSearch")){var r=this;this.$node.querySelector("crux-dropdown").setMethods({onSearch:function(e){return r.executeMethod("onSearch",e,countryList)}})}this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},setFocusClass:function(e){this.setFocusClass(e)},beforeShow:function(e,t){if(this.data.cxPropReadonly)return!1;this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",e,t,this)},beforeHide:function(e,t){this.getMethods("onBeforeHide")&&this.executeMethod("onBeforeHide",e,t,this)}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.data.cxPropEnableCountryCode?this.$node.querySelector(".cxDropdownInputGroup").classList.add("cxGroupErrorBox"):this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.data.cxPropEnableCountryCode?this.$node.querySelector(".cxDropdownInputGroup").classList.remove("cxGroupErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin(this.data.cxPropEnableCountryCode?".cxDropdownInputGroup":"lyte-input",this.data.cxPropEnableCountryCode?"cxGroupMandatoryField":void 0)}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeValue:function(e){var t=this.getData("cxPropValue");if("view"===this.getData("cxPropFrom"))if(t){if(0==this.data.cxPropPhoneInUserFormat&&"en_US"==Crm.userDetails.COUNTRY_LOCALE&&t.match(/[0-9]/)){var o="(";10==t.length?o+=t.substring(0,3)+") "+t.substring(3,6)+"-"+t.substring(6,10):9==t.length?o+=t.substring(0,5)+")-"+t.substring(5,9):o=t,t=o}this.setData("cxPropDisplayValue",t),this.setData("outbound","undefined"!=typeof Crm&&Crm.userDetails.TELEPHONY_ENABLED)}else this.setData("inputValue",void 0);if(this.observeAndSetTooltip(),"create"==this.data.cxPropFrom){var a;if(this.data.cxPropEnableCountryCode&&!this.preventObserver)this.data.cxPropValue||this.data.cxPropDisabled||(e&&"change"==e.type&&"cxPropValue"==e.item?this.setData("inputValue",""):this.data.cxPropUserLocale&&(a=this.data.cxPropUserLocale.split("_")[1])),this.appendPhoneNoCountryCodeOptions(a),this.autoPopCountryCode(this.$node,$L(this.$node.querySelector("input")),this.data.cxPropValue);else this.preventObserver||this.setData("inputValue",this.data.cxPropValue);this.setFocusUtil()}}.observes("cxPropValue","cxPropFrom","cxPropDisabled").on("init"),autoPopCountryCode:function(e,t,o){var a=o||t.val().trim();if(a.startsWith("+")){var r=a.length,i=a,s=!1,p=this.getRegionCodeForNumber(a);p&&(s=this.selectCountryByPCC(e,p))&&(i=a.substring(("+"+ZlibPhoneNumber.getCountryCodeForRegion(p)).length,r));for(var l=2;r>=l&&!s;)i=a.substring(l,r),s=this.selectCountryByPCC(e,a.substring(0,l),a),4!=l||s||(i=a.substring(1,r),s=!0),l++;s&&this.setData("inputValue",i)}else o&&(this.setData("selectedValue","-None-"),this.setData("selectedCode",_cruxUtils.getI18n("None"))),this.setData("inputValue",a)},isBlockedChar:function(e){var t=String.fromCharCode(e.which),o=$L(e.target).val();return!("+"===t&&validationUtils.isEmpty(o)||e.metaKey||e.ctrlKey)&&(!(e.which>=65&&e.which<=90||e.which>=97&&e.which<=122)&&(-1==="0123456789().,-;".indexOf(t)&&32!==e.which&&13!==e.which))},removeBlockedChars:function(e){var t=e.val(),o=t.replace(/[^0-9A-Za-z().,-;]/g,"");t.startsWith("+")&&(o="+"+o),e.val(o)},getRegionCodeForNumber:function(e){try{return ZlibPhoneNumber.getRegionCodeForNumber(e)}catch(e){murphy.error(e)}return null},selectCountryByPCC:function(e,t,o){t=t||"";var a=e.querySelector("crux-dropdown");if(a&&a.getData("cxPropSelected")==t)return!0;var r=this.opList.indexOf(t);if(r>-1&&this.opList[r]==t){var i=this.getRegionCodeForNumber(o);if(i)this.setData("selectedValue",i),this.setData("selectedCode",i+"("+t+")");else for(var s in i=this.data.countryList[r+1].display_value.split(" +")[0],this.data.countryISOCodeVsName)if(this.data.countryISOCodeVsName[s]==i){this.setData("selectedValue",s),this.setData("selectedCode",s+"("+t+")");break}return!0}return!1},isValidPNumber:function(e){try{return ZlibPhoneNumber.isValidNumber(e)}catch(e){murphy.error(e)}return!1},getCCSortedByName:function(){var e=this.data.countryISOCodeVsName,t=[],o=ZlibPhoneNumber.getSupportedCountries();for(var a in e)e.hasOwnProperty(a)&&-1!==o.indexOf(a)&&t.push(e[a]);t=t.sort();var r=[];return Object.keys(e).forEach((function(a){var i=t.indexOf(e[a]);i>=0&&-1!==o.indexOf(a)&&(r[i]=a)})),r},appendPhoneNoCountryCodeOptions:function(e){for(var t,o,a=this.getCCSortedByName(),r=[{actual_value:"-None-",display_value:_cruxUtils.getI18n("None")}],i=a.length,s=[],p=0;p<i;p++){var l=a[p],n="+"+ZlibPhoneNumber.getCountryCodeForRegion(l),c=this.data.countryISOCodeVsName[l]+" "+n;s.push(n),r.push({actual_value:l,display_value:c}),l&&l===e&&(t=e+"("+n+")",o=l)}this.setData("countryList",r),t&&(this.setData("selectedValue",o),this.setData("selectedCode",t)),this.opList=s},getPlainPhoneNo:function(e){var t=e.length,o="";if(t<0)return o;if(!/^\d+(,(\d)+)*(\.\d{1,2})*$/.test(e))if(14===t){if(e.startsWith("(")&&e.indexOf("-")&&e.indexOf(")")&&e.indexOf(" ")){o=e;var a=e.indexOf(")"),r=e.indexOf(" "),i=e.indexOf("-");if(4===a&&5===r&&9===i)if(10===(e=(e=(e=(e=e.replace(" ","")).replace("(","")).replace(")","")).replace("-","")).length)return e.replace(" ","").replace("(","").replace(")","").replace("-","").length<10?o:e;return o}}else if(12===t){if(-1!==e.indexOf(" "))return e;if(e.startsWith("(")&&e.indexOf(")")&&e.indexOf("-")){o=e;var s=e.indexOf(")"),p=e.indexOf("-");if(6===s&&7===p)if(9===(e=(e=(e=e.replace("-","")).replace("(","")).replace(")","")).length)return e.replace("-","").replace("(","").replace(")","").length<9?o:e;return o}}return e},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect"),mandatoryType:function(){this.observeMandatoryTypeMixin(this.data.cxPropEnableCountryCode?".cxDropdownInputGroup":"lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),observeTabindex:function(){this.observeTabindexMixin()}.observes("cxPropTabindex","cxPropTabIndex").on("init"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-picklist-component",{_template:'<template tag-name="crux-picklist-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="filter"></template><template case="criteria"></template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} {{pkColorEnabledClass}}" onfocusout="{{action(\'setFocusClass\',this,false)}}" onfocus="{{action(\'setFocusClass\',this,true)}}"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="dIB activitesColor" id="selectColorComponent_{{cxPropField.id}}" data-zcqa="{{concat(cxPropField.field_label,\'_selectedColor\')}}" style="background:{{propDefaultColorCode}}"></span> </template></template> <lyte-dropdown id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{&quot;position&quot;: &quot;followcursor&quot;, &quot;appearance&quot;: &quot;box&quot;}" lt-prop-tooltip-class="cxElementsTooltip" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-disabled-list="[&quot;cruxDisabled&quot;]" lt-prop-yield="true" lt-prop-type="{{cxPropType}}" lt-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" on-add="{{method(\'addToList\',cxPropField)}}" on-remove="{{method(\'removeFromList\',cxPropField)}}" lt-prop-selected="{{cxPropValue}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-display-value="{{cxPropDisplayValue}}" on-option-selected="{{method(\'selectOption\')}}" lt-prop-placeholder="{{placeholder}}" lt-prop-search-delay="{{cxPropSearchDelay}}" on-before-show="{{method(\'openDropdown\')}}" on-hide="{{method(\'closeDropdown\')}}" lt-prop-readonly="{{cxPropReadonly}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}} {{cxPropClass}} {{if(cxPropIsDropdownIconNode,\'cxDropdownIconNodePresent\',\'\')}}" lt-prop-no-result="" on-show="{{method(\'onDropdownOpen\')}}" lt-prop-freeze="{{cxPropFreeze}}" on-before-hide="{{method(\'beforeHide\')}}" data-zcqa="{{cxPropDropdownZcqa}}" lt-prop-scope="{{cxPropScope}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-button="{{cxPropAriaButton}}" lt-prop-aria-box="{{cxPropAriaBox}}" lt-prop-aria-body="{{cxPropAriaBody}}" lt-prop-icon-class="{{if(cxPropShowDisabledIcon,cxPropDisabledIconClass,cxPropDropdownIconClass)}}" lt-prop-button-class="{{cxPropButtonClass}}" lt-prop-prevent-parent-scroll="{{cxPropPreventParentScroll}}" lt-prop-active-element="{{if(ifNotEquals(cxPropType,\'single\'),concat(\'#search_\',cxPropId,\'_\',cruxConvertStringToValidSelector(cxPropField.api_name)),concat(\'#searchsingle_\',cxPropId,\'_\',cxPropField.api_name))}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{expHandlers(cxPropType,\'!=\',&quot;single&quot;)}}"><template case="true"> <lyte-drop-button data-zcqa="{{if(cxPropDropdownZcqa,\'\',cxPropZcqa)}}" class="{{if(cruxOr(cxPropDropdownIconNodeClass,cxPropShowDisabledIcon),\'ltDropdownIconNodePresent\',\'\')}}"> <ul class="lyteMultipleSelect"> <template is="for" items="{{displayValue}}" item="item" index="index"> <li data-value="{{item}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'setToolTip\',this)}}">{{unescape(cruxReplaceSpace(cruxEncodeHTML(item)))}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="cxW100Per" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-search-delay="{{cxPropSearchDelay}}" lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;{{concat(&quot;.parentscope_&quot;,cxPropId,&quot;_&quot;,cruxConvertStringToValidSelector(cxPropField.api_name))}}&quot;, &quot;target&quot;:&quot;.picklist_values:not(.lyteDropdownActive)&quot;, &quot;search&quot;:&quot;lyte-drop-item.picklist_values:not(.lyteDropdownActive)&quot;}" lt-prop-maxlength="{{cxPropMaxlength}}" on-search="{{method(\'showNoResult\',cxPropField)}}" id="{{concat(&quot;search_&quot;,cxPropId,&quot;_&quot;,cruxConvertStringToValidSelector(cxPropField.api_name))}}" lt-prop-placeholder="{{if(displayValue.length,\'\',placeholder)}}" onclick="{{action(\'searchBoxClicked\')}}" on-focus="{{method(\'onSearchBoxFocused\')}}" onkeydown="{{action(\'preventDefault\',this,event)}}" lt-prop-trim="true" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}"></lyte-search> </li> </ul> <template is="if" value="{{expHandlers(cxPropIsDropdownIconNode,\'&amp;&amp;\',expHandlers(cxPropDisabled,\'!\'))}}"><template case="true"><lyte-icon class="{{cxPropDropdownIconNodeClass}}"></lyte-icon> </template><template case="false"><template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><lyte-icon class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></lyte-icon></template></template></template></template> </lyte-drop-button> </template><template case="false"><template is="if" value="{{cxPropPicklistButtonYield}}"><template case="true"> <lyte-drop-button> <lyte-yield yield-name="picklistButtonYield"></lyte-yield> </lyte-drop-button> </template></template></template></template> <lyte-drop-box class="cxDropbox {{if(cxPropIsColorCodeEnabled,\'colorEnabledPKDropBox\',\'\')}} {{cxPropBoxClass}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',&quot;single&quot;),\'&amp;&amp;\',showSearchBox)}}"><template case="true"> <lyte-drop-header> <lyte-search class="cxW100Per" lt-prop-query-selector="{&quot;scope&quot;:&quot;{{concat(&quot;.parentscope_&quot;,cxPropId,&quot;_&quot;,cruxConvertStringToValidSelector(cxPropField.api_name))}}&quot;, &quot;target&quot;:&quot;.picklist_values&quot;, &quot;search&quot;:&quot;lyte-drop-item.picklist_values&quot;}" lt-prop-maxlength="120" id="{{concat(\'searchsingle_\',cxPropId,\'_\',cxPropField.api_name)}}" on-search="{{method(\'singleSearch\')}}" lt-prop-trim="true" lt-prop-data-tabindex="{{cxPropDataTabindex}}"></lyte-search> </lyte-drop-header> </template></template> <lyte-drop-body id="{{cxPropField.api_name}}" class="{{concat(&quot;parentscope_&quot;,cxPropId,&quot;_&quot;,cruxConvertStringToValidSelector(cxPropField.api_name))}}"> <template is="if" value="{{showLoading}}"><template case="true"><div class="cxAlignCenter"><span class="cxElementsLoaderBg"></span></div> </template><template case="false"> <template is="for" items="{{pickListValues}}" item="item" index="indeval"> <template is="if" value="{{expHandlers(item.cxPropSelected,\'&amp;&amp;\',expHandlers(cxPropType,\'!==\',\'multisearch\'))}}"><template case="true"> <lyte-drop-item class="picklist_values {{if(item.extra,\'lyteDropdownSelection\',\'\')}} {{if(cruxAnd(ifEquals(cxPropIsColorCodeEnabled,\'true\'),ifEquals(item.actual_value,\'-None-\')),\'colorEnabledSelect2None\',\'\')}} {{if(item.cxDisableSelect,\'cxDropboxNoneItem\',\'\')}}" data-value="{{item[cxPropUserValue]}}" data-extra="{{item.extra}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',item[cxPropZcqaSelector])}}" selected="true"> <template is="if" value="{{cxPropPicklistYield}}"><template case="true"> <lyte-yield yield-name="picklistYield" item-obj="{{item}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="dIB activitesColor" style="background:{{item.colour_code}}" data-zcqa="{{concat(cxPropField.field_label,\'_option_\',item[cxPropZcqaSelector])}}"> </span> </template></template> {{item[cxPropUserValue]}} </template></template> </lyte-drop-item> </template><template case="false"> <lyte-drop-item class="picklist_values {{if(item.extra,\'lyteDropdownSelection\',\'\')}} {{if(cruxAnd(ifEquals(cxPropIsColorCodeEnabled,\'true\'),ifEquals(item.actual_value,\'-None-\')),\'colorEnabledSelect2None\',\'\')}} {{if(item.cxDisableSelect,\'cxDropboxNoneItem\',\'\')}}" data-value="{{item[cxPropUserValue]}}" data-extra="{{item.extra}}" data-zcqa="{{concat(cxPropField.field_label,\'_\',item[cxPropZcqaSelector])}}"> <template is="if" value="{{cxPropPicklistYield}}"><template case="true"> <lyte-yield yield-name="picklistYield" item-obj="{{item}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="dIB activitesColor" style="background:{{item.colour_code}}" data-zcqa="{{concat(cxPropField.field_label,\'_option_\',item[cxPropZcqaSelector])}}"> </span> </template></template> {{item[cxPropUserValue]}} </template></template> </lyte-drop-item> </template></template> </template> <template is="if" value="{{showNoOption}}"><template case="true"><div class="cxDropdownNoResult" data-value="cruxDisabled">{{cxPropNoResultMessage}}</div></template></template> </template></template> </lyte-drop-body> <template is="if" value="{{cxPropFooterYield}}"><template case="true"><lyte-drop-footer><lyte-yield yield-name="footer"></lyte-yield></lyte-drop-footer></template></template> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template><template case="view"> <template is="if" value="{{cxPropIsColorCodeEnabled}}"><template case="true"> <span class="{{pkColorEnabledClass}}" data-zcqa="{{concat(\'colorcodespan_\',cxPropField.field_label,\'_\',viewValue)}}" style="{{propColorStyleObj}}"><lyte-text lt-prop-value="{{viewValue}}" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600 }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-show="{{cxPropShowTooltip}}"></lyte-text></span> </template><template case="false"> <lyte-text lt-prop-value="{{viewValue}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-class="lvTooltipClass" lt-prop-show="{{cxPropShowTooltip}}"></lyte-text> </template></template> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background:'","propDefaultColorCode"]}}}}]}},default:{}},{type:"attr",position:[3,3]},{type:"registerYield",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background:'","item.colour_code"]}}}}]}},default:{}},{type:"text",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background:'","item.colour_code"]}}}}]}},default:{}},{type:"text",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0,0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,7]},{type:"if",position:[3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"propColorStyleObj"}}},{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","lyteViewPort","cxPropFrom","cxPropField","cxPropValue","displayValue","pickListValues","origLen","showNoOption","disabledList","cxPropEmptyValue","placeholder","cxPropDisabled","cxPropOpenDropdown","cxPropDisplayValue","cxPropType","cxPropZcqa","cxPropErrorMessage","cxPropDisableExtraValue","cxPropFieldKey","cxPropId","cxPropClearErrorMessage","cxPropDoNotSkipFirstValue","cxPropAppearance","cxPropBoundary","cxPropDirection","cxPropLabelClass","showSearchBox","cxPropIsColorCodeEnabled","propDefaultColorCode","propColorStyleObj","pkColorEnabledClass","cxPropId","cxPropPlaceholder","cxPropTabIndex","cxPropTabindex","cxPropClass","cxPropLayout","cxPropTooltip","cxPropPicklistYield","cxPropPicklistButtonYield","isError","cxPropErrorYield","cxPropUserValue","cxPropSystemValue","cxPropPicklistValues","cxPropInfoTooltip","cxPropZcqaSelector","cxPropFreeze","cxPropDropdownZcqa","cxPropScope","cxPropSearchDelay","cxPropAria","cxPropAriaButton","cxPropAriaBody","cxPropAriaBox","cxPropModule","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","viewValue","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","lyteUnbound","cxPropMaxlength","cxPropUpdateDelay","cxPropErrorClass","tooltip","cxPropErrorSpanClass","cxPropDropdownIconClass","cxPropMaxCount","cxPropReadonly","cxPropPreventParentScroll","cxPropBoxClass","cxPropShowUnused","cxPropLayout","cxPropFooterYield","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropNoneKeyword","cxPropButtonTextInsideElement","cxPropMandatory","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropShowSearch","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropIsDropdownIconNode","cxPropDropdownIconNodeClass","cxPropPreventFocusOnError","cxPropNoResultMessage","cxPropPrefixYield","cxPropIgnoreEmptyValue","cxPropShowTooltip","cxPropButtonYield","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropValue:Lyte.attr("string"),displayValue:Lyte.attr("array",{default:[]}),pickListValues:Lyte.attr("array"),origLen:Lyte.attr("number"),showNoOption:Lyte.attr("boolean",{default:!1}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),cxPropEmptyValue:Lyte.attr("string",{default:""}),placeholder:Lyte.attr("string",{default:_cruxUtils.getI18n("None")}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropOpenDropdown:Lyte.attr("boolean",{default:!1}),cxPropDisplayValue:Lyte.attr("string"),cxPropType:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropDisableExtraValue:Lyte.attr("boolean",{default:!1}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDoNotSkipFirstValue:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),showSearchBox:Lyte.attr("boolean",{default:!1}),cxPropIsColorCodeEnabled:Lyte.attr("boolean",{default:!1}),propDefaultColorCode:Lyte.attr("string",{default:""}),propColorStyleObj:Lyte.attr("string",{default:""}),pkColorEnabledClass:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string",{default:""}),cxPropTabIndex:Lyte.attr("string",{default:"0"}),cxPropTabindex:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropLayout:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string"),cxPropPicklistYield:Lyte.attr("boolean",{default:!1}),cxPropPicklistButtonYield:Lyte.attr("boolean",{default:!1}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropUserValue:Lyte.attr("string",{default:"display_value"}),cxPropSystemValue:Lyte.attr("string",{default:"actual_value"}),cxPropPicklistValues:Lyte.attr("array",{hideAttr:!0}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropZcqaSelector:Lyte.attr("string"),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropDropdownZcqa:Lyte.attr("string"),cxPropScope:Lyte.attr("string"),cxPropSearchDelay:Lyte.attr("number"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaButton:Lyte.attr("object",{default:{}}),cxPropAriaBody:Lyte.attr("object",{default:{}}),cxPropAriaBox:Lyte.attr("object",{default:{}}),cxPropModule:Lyte.attr("string"),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string"),cxPropTooltipClass:Lyte.attr("string"),viewValue:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropMaxlength:Lyte.attr("number",{default:120}),cxPropUpdateDelay:Lyte.attr("number"),cxPropErrorClass:Lyte.attr("string"),tooltip:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropDropdownIconClass:Lyte.attr("string",{default:"dropdown"}),cxPropMaxCount:Lyte.attr("number"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropPreventParentScroll:Lyte.attr("boolean",{default:!1}),cxPropBoxClass:Lyte.attr("string",{default:""}),cxPropShowUnused:Lyte.attr("boolean",{default:!1}),cxPropLayout:Lyte.attr("string"),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropNoneKeyword:Lyte.attr("string",{default:"-None-"}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropShowSearch:Lyte.attr("boolean"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropIsDropdownIconNode:Lyte.attr("boolean",{default:!1}),cxPropDropdownIconNodeClass:Lyte.attr("string",{default:""}),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropNoResultMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.no.options.found")}),cxPropPrefixYield:Lyte.attr("boolean",{default:!1}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropShowTooltip:Lyte.attr("boolean",{default:!0}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object")}},methods:{onDropdownOpen:function(e,t){this.getMethods("onShow")&&this.executeMethod("onShow",arguments[0],arguments[1]),this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("input")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("input").focus(),this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},showNoResult:function(e,t){this.closing;if(this.closing)this.closing=!1;else if(this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.classList.contains("lyteDropdownHidden")){if("input"==arguments[3].type)return;this.$node.querySelector("lyte-dropdown").toggle()}var o=arguments[2].querySelector("input").value;if(!(""==o.trim()&&(!this.adding&&this.getData("pickListValues")&&this.getData("pickListValues")[0]&&this.getData("pickListValues")[0].extra&&Lyte.arrayUtils(this.getData("pickListValues"),"shift"),this.adding=!1,this.setData("showNoOption",0==this.origLen),o.length>0))&&""!=o)if(0==this.getData("cxPropDisableExtraValue")){var a=o,r=o.toLowerCase().trim();if(r=r.replace(/\s+/g," "),1!=this.extraVals[r]){this.getData("pickListValues")&&this.getData("pickListValues")[0]&&this.getData("pickListValues")[0].extra&&Lyte.arrayUtils(this.getData("pickListValues"),"shift"),this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector(".lyteDropdownSelection")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector(".lyteDropdownSelection").classList.remove("lyteDropdownSelection");var i={extra:"true"};i[this.getData("cxPropUserValue")]=a.replace(/\s+/g," "),i[this.getData("cxPropSystemValue")]=a.replace(/\s+/g," "),Lyte.arrayUtils(this.getData("pickListValues"),"unshift",[i]),this.setData("showNoOption",!1)}else{this.getData("pickListValues")&&this.getData("pickListValues")[0]&&this.getData("pickListValues")[0].extra&&Lyte.arrayUtils(this.getData("pickListValues"),"shift");var s=t.some((function(e){return"true"!=e.getAttribute("selected")&&"true"!=e.getAttribute("data-extra")}));s?0!=t.length&&this.setData("showNoOption",!1):this.setData("showNoOption",!0)}}else 0==t.length?this.setData("showNoOption",!0):this.setData("showNoOption",!1)},addToList:function(e,t,o){var a=this.getData("pickListValues");if(this.isEmoji(o))return this.$node.querySelector("lyte-dropdown").toggle(),this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),!1;if(null!=this.data.cxPropMaxCount&&this.getData("displayValue").length>=this.data.cxPropMaxCount){var r=this.$node.querySelector("lyte-dropdown");return(s=JSON.parse(r.ltProp("selected"))).pop(),r.ltProp("selected",JSON.stringify(s)),r.toggle(),this.showAlert(_cruxUtils.getI18n("crm.alert.maximum.text.values.contains",this.data.cxPropMaxCount)),!1}if(this.getMethods("onBeforeAdd")){var i=t.srcElement?"true"==t.srcElement.getAttribute("data-extra"):!!t.target&&"true"==t.target.getAttribute("data-extra");if(0==this.executeMethod("onBeforeAdd",o,this.getValue(),i)){if(!i){var s;(s=JSON.parse(this.$node.querySelector("lyte-dropdown").ltProp("selected"))).pop();var p=this.$node.querySelector("lyte-dropdown");p.ltProp("selected",JSON.stringify(s)),p.component.childComp.querySelector(".lyteDropdownSelection").classList.remove("lyteDropdownSelection"),t.target.classList.add("lyteDropdownSelection")}return!1}}for(var l=!1,n=-1,c=0;c<a.length;c++){if(a[c][this.getData("cxPropUserValue")]==o){n>-1?Lyte.arrayUtils(this.getData("displayValue"),"insertAt",n+1,a[c][this.getData("cxPropUserValue")]):Lyte.arrayUtils(this.getData("displayValue"),"unshift",a[c][this.getData("cxPropUserValue")]),this.extraVals[o.toLowerCase()]=!0,"true"==a[c].extra?Lyte.arrayUtils(this.getData("pickListValues"),"shift"):(this.origLen=this.origLen-1,document.querySelector("[data-extra='true']")&&Lyte.arrayUtils(this.getData("pickListValues"),"shift")),this.setData("showNoOption",0==this.origLen),l=!0;break}this.data.displayValue.length&&this.data.displayValue.indexOf(a[c][this.getData("cxPropUserValue")])>-1&&(n=this.data.displayValue.indexOf(a[c][this.getData("cxPropUserValue")]))}l||(Lyte.arrayUtils(this.getData("displayValue"),"push",o),this.extraVals[o.toLowerCase()]=!0,this.setData("showNoOption",0==this.origLen)),this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"");var d="#search_";this.getData("cxPropId")&&(d+=this.getData("cxPropId")),d+="_"+Lyte.Component.registeredHelpers.cruxConvertStringToValidSelector(e.api_name),this.adding=!0,this.$node.querySelector(d).setValue(""),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),0!==this.getData("displayValue").length&&this.$node.querySelector("lyte-dropdown").classList.remove("lyteDropNoOptSelected"),this.preventClose=!0},removeFromList:function(e,t,o){for(var a=this.getData("displayValue"),r=!1,i=0;i<a.length;i++)if(a[i]==o){var s=Lyte.arrayUtils(this.getData("displayValue"),"removeAt",i),p="#search_";this.getData("cxPropId")&&(p+=this.getData("cxPropId")),p+="_"+Lyte.Component.registeredHelpers.cruxConvertStringToValidSelector(e.api_name),this.$node.querySelector(p).setValue("");for(var l=0;null!=this.getData("pickListValues")&&l<this.getData("pickListValues").length;l++)if(this.getData("pickListValues")[l][this.getData("cxPropUserValue")]==s[0]){"true"!=this.getData("pickListValues")[l].extra&&(this.origLen=this.origLen+1,r=!0);break}break}r||("create"===this.data.cxPropFrom?(this.extraVals[o]=!1,void 0!==this.data.pickListValues&&Lyte.arrayUtils(this.data.pickListValues,"push",{display_value:o,actual_value:o})):this.extraVals[o]=!1),0==a.length&&this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):""),this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),0==this.getData("displayValue").length&&this.$node.querySelector("lyte-dropdown").classList.add("lyteDropNoOptSelected"),this.setData("showNoOption",0==this.origLen),null==this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown lyte-drop-button").click()},selectOption:function(e,t,o,a){for(var r=0;r<this.data.pickListValues.length;r++)this.data.pickListValues[r][this.data.cxPropUserValue]==t?this.data.pickListValues[r].cxPropSelected=!0:this.data.pickListValues[r].cxPropSelected&&delete this.data.pickListValues[r].cxPropSelected;if(this.setData("cxPropValue",t),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onOptionSelected"))return this.executeMethod("onOptionSelected",e,t,o,a);this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},openDropdown:function(e,t){if(this.data.cxPropReadonly)return!1;var o;if(this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",e,t,this),o=this.getData("cxPropPicklistValues")?this.getData("cxPropPicklistValues"):137==this.data.cxPropField.ui_type?this.data.cxPropLayout?this.data.cxPropField[this.data.cxPropLayout].allowed_modules:this.data.cxPropField.allowed_modules:this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values,"create"===this.data.cxPropFrom&&Object.keys(this.extraVals).length>0)for(var a in this.extraVals)!1===this.extraVals[a]&&o.push({actual_value:a,display_value:a});if(null!=o&&0!=o.length||!this.data.cxPropModule)this.openDropdownFn();else if(this.data.cxPropField.id){this.setData("showLoading",!0);var r="undefined"!=typeof moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule;store.findRecord("field",this.data.cxPropField.id,{module:r},!0).then(function(e){this.setData("cxPropField",e[0]),this.openDropdownFn(),this.setData("showLoading",!1)}.bind(this))}else this.setData("showNoOption",!0)},closeDropdown:function(e,t){var o=this.$node.querySelector("lyte-search");this.closing=!0,(o=o||this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-search"))&&o.setValue(""),this.getMethods("onHide")&&this.executeMethod("onHide",e,t),this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)},singleSearch:function(e){this.setData("showNoOption",0==e.length)},beforeHide:function(e){if(this.preventClose&&(this.preventClose=!1,e&&"scroll"==e.type))return!1},hideInfoTooltip:function(){var e=this.$node.querySelector(".cxCurrentHovercard");$L(e).removeClass("cxCurrentHovercard")},onSearchBoxFocused:function(e,t){var o=this.$node.querySelector("lyte-dropdown");"criteria"!=this.data.cxPropFrom||o.ltProp("isOpen")||o.open()}},openDropdownFn:function(){if(null==this.getData("pickListValues")||0==this.getData("pickListValues").length){var e;this.getData("cxPropPicklistValues")?e=this.getData("cxPropPicklistValues"):137==this.data.cxPropField.ui_type?(e=this.data.cxPropLayout?this.data.cxPropField[this.data.cxPropLayout].allowed_modules:this.data.cxPropField.allowed_modules,this.setData("cxPropUserValue","plural_label")):e=this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values,1==this.data.cxPropShowSearch?this.setData("showSearchBox",!0):0==this.data.cxPropShowSearch?this.setData("showSearchBox",!1):e.length>=10&&this.setData("showSearchBox",!0),this.data.cxPropShowUnused||(e=e.filter((function(e){return"unused"!=e.type})));var t=e.map(function(e){return e[this.getData("cxPropUserValue")]}.bind(this)),o=t.slice(0),a=[],r=0,i=0,s=[],p=this.getData("displayValue");for(p=p.length?p:[this.data.cxPropNoneKeyword];r<t.length;r++)if(-1===t[r].indexOf(this.data.cxPropNoneKeyword)||"create"==this.getData("cxPropFrom")){var l=e[o.indexOf(t[r])];s.indexOf(l[this.data.cxPropUserValue])<0&&(p&&p.indexOf(l[this.getData("cxPropUserValue")])>-1?(i+=1,l.cxPropSelected=!0):delete l.cxPropSelected,this.extraVals[l[this.getData("cxPropUserValue")].toLowerCase()]=!0,a.push(l),s.push(l[this.data.cxPropUserValue]))}this.setData("pickListValues",a),this.origLen=a.length-i,i==a.length&&"single"!=this.getData("cxPropType")&&this.setData("showNoOption",!0)}},validate:function(){var e,t=this.getData("cxPropField"),o=this.getValue();if("create"==this.getData("cxPropFrom"))return!(!this.validateMandatory(!o||0===o.length||o===this.data.cxPropNoneKeyword)&&!this.data.cxPropIgnoreEmptyValue)&&(this.setData("cxPropErrorMessage",""),!0);if(!(this.data.cxPropIgnoreEmptyValue||o&&0!=o.length))return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),!1;var a=o.length;for(e=0;e<a;e++)if(o[e].replace(/^\s+/g,"").replace(/\s+$/g,"").indexOf("*")>-1)return this.showAlert(_cruxUtils.getI18n("crm.alert.character.not.allowed","*")),!1;return!0},getValue:function(e){var t=this.getData("displayValue");if("single"==this.getData("cxPropType")){if(e==this.getData("cxPropSystemValue"))if((s=(r=(o=this.data.cxPropPicklistValues?this.data.cxPropPicklistValues:this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values).map(function(e){return e[this.getData("cxPropUserValue")]}.bind(this))).indexOf(this.getData("cxPropValue")))>-1)return o[s][this.getData("cxPropSystemValue")];return this.getData("cxPropValue")}if(e==this.getData("cxPropSystemValue")){for(var o,a=[],r=(o=this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values).map(function(e){return e[this.getData("cxPropUserValue")]}.bind(this)),i=0;i<t.length;i++){var s;(s=r.indexOf(t[i]))>-1&&a.push(o[s][this.getData("cxPropSystemValue")])}return a}return t},resetData:function(){"multiple"==this.getData("cxPropType")||"multisearch"==this.getData("cxPropType")?(this.setData("displayValue",[]),this.$node.querySelector("lyte-dropdown").ltProp("selected",[])):this.setData("cxPropValue","")},setColorCodeDatas:function(){var e,t=this.getData("cxPropFrom");this.getData("cxPropPicklistValues")?e=this.getData("cxPropPicklistValues"):this.getData("cxPropLayout")?e=this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values&&(e=this.getData("cxPropField").pick_list_values);var o=this.getData("cxPropValue"),a=null,r=null;o&&((r=e.filter((function(e){return e.display_value==o||e.display_label==o}))).length<1&&this.data.cxPropField.pick_list_values&&(r=this.data.cxPropField.pick_list_values.filter((function(e){return e.display_value==o||e.display_label==o}))),a=r.length>=1?r[0].colour_code:"#ffffff",this.setData("propDefaultColorCode",a));if("view"==t)if(o&&o!==this.data.cxPropNoneKeyword){var i="";if(a&&""!==a&&0===a.indexOf("#")){var s="black",p=a.substring(1);(299*parseInt(p.substr(0,2),16)+587*parseInt(p.substr(2,2),16)+114*parseInt(p.substr(4,2),16))/1e3<175&&(s="white"),i="color:"+s+";"}i=i+"background-color:"+a+";","#ffffff"===a&&(i+=";border: 1px solid #C9C9C9"),this.setData("propColorStyleObj",i),this.setData("pkColorEnabledClass","colorAppliedPicklist")}else this.setData("propColorStyleObj",""),this.setData("pkColorEnabledClass","colorAppliedPicklist colorAppliedPKNone");else"create"==t&&(null==this.getData("cxPropValue")||""==this.getData("cxPropValue")||r&&r.length>=1&&r[0].actual_value==this.data.cxPropNoneKeyword?this.setData("pkColorEnabledClass","colorEnabledPicklist colorEnabledPKNone"):this.setData("pkColorEnabledClass","colorEnabledPicklist"))},observeField:function(e){if("view"!=this.getData("cxPropFrom")&&this.getData("cxPropValue")){var t=this.getData("cxPropValue");if("single"==this.getData("cxPropType"))this.setData("cxPropDisplayValue",t),this.setData("displayValue",[t]);else{-1==t.indexOf("[")?-1!=t.indexOf(";")?(t=t.split("; "),this.setData("cxPropValue",JSON.stringify(t))):(this.setData("cxPropValue",'["'+t+'"]'),t=[t]):t=JSON.parse(t);var o=t.length?[t[0]]:[],a=t.length?[t[0].toLowerCase().trim()]:[],r=0,i=[],s=[];if(this.data.pickListValues)s=this.data.pickListValues;else s=this.getData("cxPropLayout")?this.getData("cxPropField")[this.getData("cxPropLayout")].pick_list_values:this.getData("cxPropField").pick_list_values;s&&s.length&&(i=s.map(function(e){return e[this.data.cxPropUserValue].toLowerCase().trim()}.bind(this)));for(var p=0;p<t.length;p++){var l=i.indexOf(t[p].toLowerCase().trim());l>-1&&(r++,t[p]=s[l][this.data.cxPropUserValue],0==p&&(o[p]=t[p])),p>0&&-1==a.indexOf(t[p].toLowerCase().trim())&&(o.push(t[p]),a.push(t[p].toLowerCase().trim()))}this.setData("displayValue",o),i.length&&(this.origLen=i.length-r),this.setData("showNoOption",0==this.origLen),"create"==this.getData("cxPropFrom")||this.getData("cxPropPlaceholder")?0==o.length?this.setData("placeholder",this.getData("cxPropPlaceholder")?this.getData("cxPropPlaceholder"):_cruxUtils.getI18n("None")):this.setData("placeholder",""):this.setData("placeholder",_cruxUtils.getI18n("crm.label.filter.typehere"))}}if(null!=this.getData("cxPropValue")&&""!=this.getData("cxPropValue")||!e||"change"!=e.type||"cxPropValue"!=e.item||("single"!==this.data.cxPropType&&this.setData("placeholder",this.getData("cxPropPlaceholder")?this.getData("cxPropPlaceholder"):_cruxUtils.getI18n("None")),this.setData("cxPropDisplayValue",""),this.setData("displayValue",[]),this.setData("showNoOption",!1)),"view"==this.data.cxPropFrom)!this.data.cxPropValue||"single"!==this.data.cxPropType&&"[]"===this.data.cxPropValue?(this.data.cxPropEmptyValue||"single"===this.data.cxPropType)&&this.setData("viewValue",this.data.cxPropEmptyValue):this.data.cxPropMaskingProperties?this.setData("viewValue",Lyte.Component.registeredHelpers.cruxMaskValue(this.data.cxPropValue,this.data.cxPropMaskingProperties)):"single"!=this.data.cxPropType&&-1!=this.data.cxPropValue.indexOf("[")&&this.testParse(this.data.cxPropValue)?this.setData("viewValue",JSON.parse(this.data.cxPropValue).join("; ")):this.setData("viewValue",this.data.cxPropValue),this.data.cxPropTooltipConfig||this.setData("cxPropTooltipConfig",JSON.stringify({showdelay:600}));else if("create"===this.data.cxPropFrom){this.setFocusUtil();var n=this.$node.querySelector("lyte-dropdown");n&&("single"===this.data.cxPropType?this.data.cxPropValue||!this.data.pickListValues||this.data.cxPropPlaceholder?n.ltProp("selected",this.data.cxPropValue):n.ltProp("selected",this.data.pickListValues[0][this.data.cxPropUserValue]):this.data.cxPropValue||(this.setData("displayValue",[]),this.origLen=this.data.pickListValues?this.data.pickListValues.length:0)),this.setData("cxPropDisableExtraValue",!0)}!this.getData("cxPropIsColorCodeEnabled")||"create"!==this.data.cxPropFrom&&"view"!==this.data.cxPropFrom||this.setColorCodeDatas()}.observes("cxPropValue","cxPropMaskingProperties","cxPropFrom").on("init"),testParse:function(e){try{return JSON.parse(e),!0}catch(e){return!1}},init:function(){var e=this.getData("cxPropFrom");if("filter"==e&&null==this.getData("cxPropMaxCount")&&this.setData("cxPropMaxCount",50),"view"==e&&999==this.getData("cxPropField").ui_type){var t=JSON.parse(this.getData("cxPropValue"));this.data.cxPropValue=t.join(", ")}"create"!=this.data.cxPropFrom||this.getData("cxPropType")?this.getData("cxPropType")&&"multiple"!=this.getData("cxPropType")||this.setData("cxPropType","multisearch"):this.setData("cxPropType","single"),this.getData("cxPropPlaceholder")&&(this.data.placeholder=this.getData("cxPropPlaceholder")),"create"==e&&"single"==this.data.cxPropType&&!this.data.cxPropPlaceholder&&this.data.cxPropField.pick_list_values&&this.data.cxPropField.pick_list_values[0]&&this.data.cxPropField.pick_list_values[0].actual_value==this.data.cxPropNoneKeyword&&(this.data.placeholder=this.data.cxPropField.pick_list_values[0].display_value),this.getData("cxPropZcqaSelector")||this.setData("cxPropZcqaSelector",this.getData("cxPropUserValue")),this.extraVals={}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),actions:{setFocusClass:function(e,t){t?e.classList.add("cxInputFocused"):e.classList.remove("cxInputFocused")},searchBoxClicked:function(){if(this.getMethods("onSearchBoxClick")&&0==this.executeMethod("onSearchBoxClick",this.$node.querySelector("lyte-input")))return!1;if(1==this.$node.querySelector("lyte-dropdown").ltProp("isOpen"))return this.$node.querySelector("lyte-search").querySelector("input").value&&this.$node.querySelector("lyte-search").setValue(""),!1},preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},setToolTip:function(e){e.offsetWidth<e.scrollWidth?e.setAttribute("lt-prop-title",e.textContent):e.setAttribute("lt-prop-title","")},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},extraVals:{},observesdidConnect:function(){"view"!=this.getData("cxPropFrom")&&(this.$node.toggle=function(){this.querySelector("lyte-dropdown").toggle()})}.observes("lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-dropdown")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observePicklistValues:function(e){e.insertedItems&&!e.insertedItems[0].extra&&this.origLen++}.observes("pickListValues.[]"),observeZcqa:function(){"create"==this.getData("cxPropFrom")&&"single"==this.getData("cxPropType")&&this.$node.querySelector("lyte-drop-button")&&!this.getData("cxPropDropdownZcqa")&&this.$node.querySelector("lyte-drop-button").setAttribute("data-zcqa",this.getData("cxPropZcqa"))}.observes("cxPropZcqa","lyteViewPort").on("didConnect"),observePicklistValues_1:function(){this.setData("pickListValues",void 0),this.setData("showNoOption",!1)}.observes("cxPropPicklistValues","cxPropField.pick_list_values"),openDropdownObserver:function(){this.getData("cxPropOpenDropdown")&&setTimeout(function(){this.$node.querySelector("lyte-dropdown").open()}.bind(this),100)}.observes("cxPropOpenDropdown"),observeField_new:function(){this.$node.querySelector(".cxDropbox")&&this.$node.querySelector(".cxDropbox").classList.add("search"+this.getData("cxPropField").column_name),"create"!=this.data.cxPropFrom||"single"!=this.data.cxPropType||this.getData("cxPropValue")||this.getData("cxPropPlaceholder")||this.data.cxPropField.pick_list_values&&this.data.cxPropField.pick_list_values[0]&&this.data.cxPropField.pick_list_values[0].actual_value!=this.data.cxPropNoneKeyword&&(this.setData("cxPropDisplayValue",this.data.cxPropField.pick_list_values[0].display_value),this.setData("cxPropValue",this.data.cxPropField.pick_list_values[0].display_value))}.observes("cxPropField","lyteViewPort").on("didConnect"),observeField_new:function(){this.$node.querySelector("lyte-dropdown")&&(this.data.isError?this.$node.querySelector("lyte-dropdown").classList.add("cxErrorBox"):this.$node.querySelector("lyte-dropdown").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observePlaceholder:function(){this.setData("placeholder",this.getData("cxPropPlaceholder"))}.observes("cxPropPlaceholder"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),keyDownEvent:function(){this.$node.querySelector("lyte-dropdown")&&this.$node.cxProp("aria")&&this.bindEventForAria()}.observes("cxPropAria").on("didConnect"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-dropdown")}.observes("cxPropMandatoryType").on("didConnect"),observeColorCode:function(){!this.getData("cxPropIsColorCodeEnabled")||"create"!==this.data.cxPropFrom&&"view"!==this.data.cxPropFrom||this.setColorCodeDatas()}.observes("cxPropIsColorCodeEnabled"),observeTabindex:function(){this.observeTabindexMixin()}.observes("cxPropTabindex","cxPropTabIndex").on("init"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect"),observeType:function(){"create"!=this.data.cxPropFrom||this.getData("cxPropType")?this.getData("cxPropType")&&"multiple"!=this.getData("cxPropType")||this.setData("cxPropType","multisearch"):this.setData("cxPropType","single")}.observes("cxPropType").on("init")},{mixins:["crux-element-validation","crux-aria-dropdown-mixin"]}),Lyte.Component.registerHelper("cruxConvertStringToValidSelector",(function(e){return e?(e.cruxFindAllIndexOf("$").forEach((function(t){e=e.cruxReplaceIndex(t,"_")})),e.replace(new RegExp("->","g"),"_").replace(new RegExp("[/.]","g"),"_")):""})),Lyte.Component.register("crux-tag-component",{_template:'<template tag-name="crux-tag-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{expHandlers(cxPropValue,\'&amp;&amp;\',cxPropValue.length)}}"><template case="true"> <ul id="{{cxPropId}}" class="listview_taglists w230 m0 p0"> <template is="for" items="{{listValues}}" item="val" index="index"> <li style="background: {{if(ifEquals(val.color_code,\'noFill\'),\'transparent\',concat(val.color_code,\' !important;\'))}}; color : {{cruxGetPicklistFontColor(val.color_code)}}; display : {{if(val.hide,\'none;\',\'\')}}" lt-prop-title="{{if(val.showTooltip,val.name,if(cruxAnd(cxPropTooltip,ifNotEquals(cxPropTooltip,\'true\')),cxPropTooltip,\'\'))}}" lt-prop-tooltip-config="{{tooltipConfig}}" lt-prop-tooltip-class="{{if(cxPropTooltipClass,cxPropTooltipClass,\'lvTooltipClass\')}}" class="tagElementList cxAddedTags dIB {{concat(\'cxTag\',cruxGetTagColorIndex(val.color_code))}} {{if(cxPropTriggerTagClick,\'cP\',\'\')}} {{if(cruxOr(ifEquals(val.color_code,\'noFill\'),negate(val.color_code)),\'cxTagNoFillCol\',\'\')}}" onclick="{{action(\'tagsTransition\',val)}}"><span class="{{if(val.showTooltip,\'cruxTagTitle\',\'\')}} {{cxPropTagClass}}">{{val.name}}</span></li> </template> <template is="if" value="{{showMoreForMaxCount}}"><template case="true"> <li class="moreTagOption dIB cxVam p0 "> <span class="eventNone disable">{{cruxGetI18n(\'and\')}}</span> <span class="moreCount cP cxTagMoreCountUnderline crmUnderlineInteration" onclick="{{action(\'showMoreTags\')}}"> {{showMore}} {{cruxGetI18n(\'crm.label.More\')}}</span> </li> </template></template> </ul> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template><template case="false">{{cxPropEmptyValue}}</template></template></template><template case="filter"></template><template case="criteria"></template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}">{{cxPropField[cxPropFieldKey]}} <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent">{{unescape(cruxEncodeHTML(cxPropInfoTooltip))}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-dropdown id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-yield="true" lt-prop-type="multisearch" lt-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" on-add="{{method(\'addToList\')}}" on-remove="{{method(\'removeFromList\')}}" on-before-show="{{method(\'openDropdown\')}}" lt-prop-selected="{{lbind(selectedIds)}}" on-hide="{{method(\'closeDropdown\')}}" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}} {{cxPropClass}}" on-before-hide="{{method(\'beforeHide\')}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-button="{{cxPropAriaButton}}" lt-prop-aria-box="{{cxPropAriaBox}}" lt-prop-aria-body="{{cxPropAriaBody}}" lt-prop-tooltip-class="cxElementsTooltip" lt-prop-active-element="#search_Tag" on-show="{{method(\'onDropdownOpen\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button data-zcqa="{{cxPropZcqa}}"> <ul class="lyteMultipleSelect"> <template is="for" items="{{cxPropValue}}" item="tag" index="index"> <li data-value="{{tag.id}}" style="{{if(cruxAnd(cxPropColorTags,ifEquals(cxPropFrom,\'create\')),concat(\'background:\',tag.color_code,\'; color : \',tag.font_color),\'\')}}" class="{{if(cruxAnd(cxPropColorTags,ifEquals(cxPropFrom,\'create\')),\'cxAddedTags\',\'\')}} {{if(cruxOr(ifEquals(tag.color_code,\'noFill\'),negate(tag.color_code)),\'cxTagNoFillCol\',\'\')}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'setToolTip\',this)}}">{{tag.name}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="cxW100Per" lt-prop-type="text" lt-prop-query-selector="{&quot;scope&quot;:&quot;.parentscope_{{cxPropId}}_{{cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;)}}&quot;, &quot;target&quot;:&quot;.cruxTagList&quot;, &quot;search&quot;:&quot;lyte-drop-item:not(.cxDoNotSearch)&quot;}" on-search="{{method(\'showNoResult\')}}" id="search_Tag" lt-prop-placeholder="{{placeholder}}" on-focus="{{method(\'onSearchBoxFocused\')}}" onclick="{{action(\'searchBoxClicked\')}}" onkeydown="{{action(\'preventDefault\',this,event)}}" lt-prop-disabled="{{cxPropDisabled}}"></lyte-search> </li> </ul> </lyte-drop-button> <lyte-drop-box class="cxDropbox"> <lyte-drop-body class="parentscope_{{cxPropId}}_{{cruxReplace(cruxReplace(cxPropField.api_name,&quot;->&quot;,&quot;_&quot;),&quot;[/.]&quot;,&quot;_&quot;)}}"> <template is="if" value="{{newTagMsg}}"><template case="true"> <lyte-drop-item data-value="{{newTagMsg}}" id="cxNewTag" class="cxDoNotSearch cxFlex cxAlignItemCenter"> <template is="if" value="{{cxPropColorTags}}"><template case="true"> <crux-color-palette cx-prop-wrapper-class="tagsColorPalettePopover" cx-prop-id="{{cxPropId}}" on-before-color-palette-hide="{{method(\'colorPaletteHide\')}}" cx-prop-show-text="{{cxPropShowText}}" cx-prop-add-custom-colors-to-palette="{{cxPropAddCustomColorsToPalette}}" onclick="{{action(\'stopPropagation\')}}" on-select-color="{{method(\'onSelectColor\')}}" on-color-palette-open="{{method(\'onPaletteOpen\')}}"></crux-color-palette> </template></template> <span class="mR5 cxTagContent">{{cruxGetI18n(\'crm.label.tag.new\')}}</span> <span class="cxNewTagLabel dIB cxVam"><lyte-text lt-prop-value="{{newTagMsg}}"></lyte-text></span> </lyte-drop-item> </template></template> <template is="for" items="{{tags}}" item="tag" index="ind"> <lyte-drop-item class="picklist_values cruxTagList" data-value="{{tag.id}}" data-zcqa="{{concat(cxPropField[cxPropFieldKey],\'_\',tag.name)}}"> <span>{{tag.name}}</span> </lyte-drop-item> </template> <template is="if" value="{{expHandlers(tagsLength,\'!\')}}"><template case="true"> <div class="cxDropdownNoResult picklist_values lyteDropdown-disabled" style="padding : 6px 25px !important;"><template is="if" value="{{expHandlers(cxPropAllowNewTagCreations,\'&amp;&amp;\',expHandlers(existingTag,\'!=\',&quot;&quot;))}}"><template case="true">{{cruxGetI18n(\'crux.existing.tag\',existingTag)}}</template><template case="false">{{cruxGetI18n(\'crm.label.no.options.found\')}}</template></template></div> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background: '",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"ifEquals",args:["val.color_code","'noFill'"]}},"'transparent'",{type:"helper",value:{name:"concat",args:["val.color_code","' !important;'"]}}]}},"'; color : '",{type:"helper",value:{name:"cruxGetPicklistFontColor",args:["val.color_code"]}},"'; display : '",{type:"helper",value:{name:"if",args:["val.hide","'none;'","''"]}}]}}}},{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]}]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1]},{type:"text",position:[1,3,3]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},filter:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"registerYield",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:[{type:"helper",value:{name:"cruxAnd",args:["cxPropColorTags",{type:"helper",value:{name:"ifEquals",args:["cxPropFrom","'create'"]}}]}},{type:"helper",value:{name:"concat",args:["'background:'","tag.color_code","'; color : '","tag.font_color"]}},"''"]}}}},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5,0]},{type:"componentDynamic",position:[1,5,0]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"for",position:[3,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"if",position:[1,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","lyteViewPort","cxPropValue","cxPropFrom","cxPropModule","tags","value","tagsLength","disabledList","selectedIds","cxPropZcqa","placeholder","cxPropIgnoreEmptyValue","cxPropField","cxPropFieldKey","showMore","valueObj","listValues","cxPropAppearance","cxPropBoundary","cxPropId","lyteUnbound","cxPropClass","cxPropClipMode","cxPropWidth","cxPropTooltip","tooltipConfig","cxPropViewInfoTooltip","cxPropTriggerTagClick","cxPropMaxCount","showMoreForMaxCount","cxPropEmptyValue","cxPropAria","cxPropAriaButton","cxPropAriaBody","cxPropAriaBox","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropTooltipClass","cxPropFreezePopover","cxPropTagClass","cxPropAllowNewTagCreations","newTagMsg","cxPropColorTags","cxPropClearErrorMessage","cxPropErrorMessage","cxPropErrorYield","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropDisabled","cxPropErrorClass","cxPropErrorSpanClass","cxPropReadonly","cxPropAria","cxPropAriaAttributes","cxPropMandatory","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropPreventFocusOnError","cxPropTabIndex","cxPropTabindex","cxPropPlaceholder","cxPropRedirectUrl","cxPropRequestModel","cxPropCustomRequest","selectedColor","existingTag","cxPropForcedFetch","cxPropButtonYield","cxPropForcedFetch","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("array",{default:[]}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropModule:Lyte.attr("string"),tags:Lyte.attr("array"),value:Lyte.attr("array",{default:[]}),tagsLength:Lyte.attr("boolean",{default:!0}),disabledList:Lyte.attr("array",{default:["cruxDisabled"]}),selectedIds:Lyte.attr("array",{default:[]}),cxPropZcqa:Lyte.attr("string"),placeholder:Lyte.attr("string",{default:_cruxUtils.getI18n("None")}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),showMore:Lyte.attr("number",{default:0}),valueObj:Lyte.attr("array",{default:[]}),listValues:Lyte.attr("array",{default:[]}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropId:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropClipMode:Lyte.attr("boolean",{default:!1}),cxPropWidth:Lyte.attr("string",{default:"230px"}),cxPropTooltip:Lyte.attr("string"),tooltipConfig:Lyte.attr("object",{default:{appearance:"box"}}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropTriggerTagClick:Lyte.attr("boolean",{default:!1}),cxPropMaxCount:Lyte.attr("number",{default:0}),showMoreForMaxCount:Lyte.attr("boolean",{default:!0}),cxPropEmptyValue:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaButton:Lyte.attr("object",{default:{}}),cxPropAriaBody:Lyte.attr("object",{default:{}}),cxPropAriaBox:Lyte.attr("object",{default:{}}),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropTooltipClass:Lyte.attr("string"),cxPropFreezePopover:Lyte.attr("boolean",{default:!1}),cxPropTagClass:Lyte.attr("string"),cxPropAllowNewTagCreations:Lyte.attr("boolean"),newTagMsg:Lyte.attr("string",{default:""}),cxPropColorTags:Lyte.attr("boolean",{default:!0}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropErrorClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMandatory:Lyte.attr("boolean",{default:!1}),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string",{default:1}),cxPropTabindex:Lyte.attr("string",{default:1}),cxPropPlaceholder:Lyte.attr("string"),cxPropRedirectUrl:Lyte.attr("string"),cxPropRequestModel:Lyte.attr("string",{default:"tag"}),cxPropCustomRequest:Lyte.attr("boolean",{default:!1}),selectedColor:Lyte.attr("string"),existingTag:Lyte.attr("string"),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){this.data.placeholder=this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):"",this.$node.resize=this.resize.bind(this),this.preventToggle=!1,this.newlyAdded=[],this.selectedColor=void 0},methods:{addToList:function(e,t,o,a,r){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage","");var i=this.data.tags;if("cxNewTag"==r.id)this.newlyAdded.push(t),Lyte.arrayUtils(this.data.cxPropValue,"push",{id:t,name:t,cxNew:!0,color_code:this.data.selectedColor,font_color:this.getPicklistFontColor(this.data.selectedColor)}),this.setData("selectedColor",void 0);else{r=i.filter((function(e){return e.id==t}))[0];Lyte.arrayUtils(this.data.cxPropValue,"push",{id:r.id,name:r.name,color_code:r.color_code,font_color:this.getPicklistFontColor(r.color_code)})}(i.length==JSON.parse(o).length||this.$node.querySelector("lyte-dropdown").component.childComp.querySelectorAll(".lyteDropdownActive").length>1&&this.$node.querySelector("lyte-search").ltProp("value"))&&this.setData({tagsLength:!1,existingTag:""}),this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:"filter"==this.data.cxPropFrom?_cruxUtils.getI18n("crm.label.filter.typehere"):""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.$node.querySelector("lyte-search").setValue(""),this.preventClose=!0,this.selectedColor=void 0},removeFromList:function(e,t){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage","");for(var o,a=this.data.cxPropValue,r=0;r<a.length;r++)if(a[r].id==t){o=r;break}Lyte.arrayUtils(this.data.cxPropValue,"removeAt",o,1),this.newlyAdded.indexOf(t)>-1?this.newlyAdded.splice(this.newlyAdded.indexOf(t),1):this.setData("tagsLength",!0),0==a.length&&this.setData("placeholder",this.data.cxPropPlaceholder?this.data.cxPropPlaceholder:_cruxUtils.getI18n("None")),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},showNoResult:function(e,t,o,a){if(this.preventToggle?this.preventToggle=!1:(null==this.$node.querySelector("lyte-dropdown").component.childComp||this.$node.querySelector("lyte-dropdown").component.childComp.classList.contains("lyteDropdownHidden"))&&this.$node.querySelector("lyte-dropdown").toggle(),this.data.cxPropAllowNewTagCreations&&""!==a)if(-1===this.newlyAdded.indexOf(a)){if(this.setData("newTagMsg",a),!this.data.selectedColor){var r=this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("crux-color-palette").cxProp("defaultColors")[Math.floor(13*Math.random())];this.setData("selectedColor",r)}""!==a&&this.setData("tagsLength",!0)}else this.setData({tagsLength:!1,existingTag:a,newTagMsg:""});else{this.setData("newTagMsg","");for(var i=0;i<e.length;i++)if(!e[i].classList.contains("lyteDropdownActive"))return void this.setData("tagsLength",!0);this.setData({tagsLength:!1,existingTag:""})}},openDropdown:function(){if(this.selectedColor=void 0,this.data.cxPropReadonly)return!1;if(this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",arguments[0],arguments[1]),null==this.data.tags){if(this.requestFired)return!1;var e="undefined"!=typeof moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].api_name:this.data.cxPropModule;return this.requestFired=!0,this.data.cxPropCustomRequest&&this.getMethods("onCustomRequest")?this.executeMethod("onCustomRequest","tag",{module:e}).then(function(e){this.onSuccess(e)}.bind(this)):(this.data.cxPropRequestModel||(this.data.cxPropRequestModel="tag"),(this.data.cxPropForcedFetch||"criteria"===this.data.cxPropFrom)&&store.clearCachedQuery(this.data.cxPropRequestModel,{module:e,fromPage:"view"}),store.findAll(this.data.cxPropRequestModel,{module:e,fromPage:"view"},!0).then(function(t){this.onSuccess(store.peekAll("tag").filterBy({module_name:e}).sortBy("name"))}.bind(this))),!1}},closeDropdown:function(e,t){""!=this.$node.querySelector("lyte-search").ltProp("value")&&(this.preventToggle=!0,this.$node.querySelector("lyte-search").setValue(""),this.$node.querySelector("lyte-search").blur()),this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)},beforeHide:function(e){return!e.target.classList.contains("cxPaletteCircle")&&!e.target.classList.contains("cxPaletteMoreColorsBtn")&&((!this.preventClose||(this.preventClose=!1,!e||"scroll"!=e.type))&&void 0)},onSearchBoxFocused:function(e,t){var o=this.$node.querySelector("lyte-dropdown");"criteria"!=this.data.cxPropFrom||o.ltProp("isOpen")||o.open()},onSearchBoxBlured:function(e,t){var o=this.$node.querySelector("lyte-dropdown");"criteria"==this.data.cxPropFrom&&o.ltProp("isOpen")&&setTimeout((()=>{this.preventClose?this.preventClose=!1:o.close()}),300)},onSelectColor:function(e){this.setData("selectedColor",e)},onDropdownOpen:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)}},getValue:function(){return this.data.cxPropValue},validate:function(){return"create"==this.data.cxPropFrom?!!this.validateMandatory(!this.data.cxPropValue||0==this.data.cxPropValue.length)&&(this.setData("cxPropErrorMessage",""),!0):!!(null!=this.data.cxPropValue&&0!=this.data.cxPropValue.length||this.data.cxPropIgnoreEmptyValue)||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),!1)},actions:{searchBoxClicked:function(){if(1==this.$node.querySelector("lyte-dropdown").ltProp("isOpen"))return this.$node.querySelector("lyte-search").querySelector("input").value&&this.$node.querySelector("lyte-search").setValue(""),!1},showMoreTags:function(){this.data.cxPropClipMode?this.mouseOverFn():this.clickFn()},preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},setToolTip:function(e){e.offsetWidth<e.scrollWidth?e.setAttribute("title",e.textContent):e.setAttribute("title","")},hideMoreTags:function(){this.hideTags()},tagsTransition:function(e){this.tagsTransition(e)},stopPropagation:function(){return event.stopPropagation(),!1}},setSelected:function(){var e=this.getData("tags");if(null!=e){this.getData("cxPropValue")||this.setData("cxPropValue",[]);var t=this.getData("cxPropValue").map((function(e){return e.id}));this.setData("selectedIds",t),0!=e.length&&e.length!=t.length||this.setData({tagsLength:!1,existingTag:""}),this.$node.querySelector("lyte-dropdown").ltProp("selected",t)}},hideCount:0,findRowAndCallFixHeight:function(e){var t=document.querySelector("lyte-expresstable");if(t){for(;e&&"LYTE-EXPTABLE-TR"!=e.nodeName;)e=e.parentElement;e&&t.fixRowHeight(e)}},observeValue:function(e){if("view"==this.data.cxPropFrom&&this.data.cxPropValue&&this.data.cxPropValue.length)e&&"change"==e.type&&"cxPropClipMode"==e.item?this.setValueFn1({cxPropClipMode:this.data.cxPropClipMode}):this.setValueFn1();else if("create"==this.data.cxPropFrom&&this.data.cxPropValue&&this.data.cxPropValue.length)for(var t=0;t<this.data.cxPropValue.length;t++)this.data.cxPropValue[t].color_code&&(this.data.cxPropValue[t].font_color=this.getPicklistFontColor(this.data.cxPropValue[t].color_code))}.observes("cxPropValue","cxPropClipMode").on("init"),observeValue1:function(){if("view"==this.data.cxPropFrom&&this.getData("cxPropValue"))if(this.getData("cxPropValue")&&this.getData("cxPropClipMode")){document.documentMode||/Edge/.test(navigator.userAgent);var e=0,t=0,o=-1;document.createElement("canvas");this.windowOuterWidth=window.outerWidth;var a=this.getData("cxPropWidth");a=a.split("px")[0],a-=105;var r=document.createElement("li");r.classList.add("tagElementList","f13","dIB","cxAddedTags"),document.body.appendChild(r);for(var i=0;i<this.getData("cxPropValue").length;i++){r.innerText=this.getData("cxPropValue")[i].name;var s=r.offsetWidth;if((e+=s+15)>a){if(1==t||this.getData("cxPropClipMode")){o=i;break}e=s+17,t=1}}r.remove();var p=0;this.hiddenElem=o;for(i=o;i>-1&&i<this.getData("cxPropValue").length;i++)this.getData("cxPropValue")[i].hide=!0,p++;this.setData("listValues",this.getData("cxPropValue")),this.remainingValues=this.getData("cxPropValue").slice(o),p>0&&this.setData("showMore",p)}else this.getData("cxPropValue")&&!this.getData("cxPropClipMode")&&this.setData("listValues",this.getData("cxPropValue"))},hideTags:function(){var e=this;clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout((function(){var t=document.getElementById("cxTagPopover");t&&t.remove(),e.$node.querySelector("ul").classList.remove("cxPropOnFocusTag")}),100)},resize:function(e){this.setValueFn1(e)},resize1:function(e){var t=null!=e.cxPropClipMode?e.cxPropClipMode:this.getData("cxPropClipMode");if(this.getData("cxPropValue")&&t){document.documentMode||/Edge/.test(navigator.userAgent);var o=0,a=0,r=-1;document.createElement("canvas");this.windowOuterWidth=window.outerWidth;var i=(e=e||{}).cxPropWidth?e.cxPropWidth:"230px";this.setData("cxPropWidth",i),i=i.split("px")[0],i-=105,(d=document.createElement("li")).classList.add("tagElementList","f13","dIB","cxAddedTags"),document.body.appendChild(d);for(var s=0;s<this.getData("cxPropValue").length&&t;s++){d.innerText=this.getData("cxPropValue")[s].name;var p=d.offsetWidth;if((o+=p+15)>i){if(1==a||t){r=s;break}o=p+17,a=1}}d.remove();var l=r,n=this.$node.querySelectorAll("li");if(this.hiddenElem<r&&this.hiddenElem>0||r<0){l<0&&(l=this.getData("cxPropValue").length);for(s=this.hiddenElem;s<l&&this.hiddenElem>=0;s++)n[s].style.display=""}else for(s=r;s<this.getData("cxPropValue").length;s++)n[s].style.display="none";var c=this.$node.querySelector(".uline1");r<0?this.$node.querySelector(".moreTagOption")&&(this.$node.querySelector(".moreTagOption").style.display="none"):(this.$node.querySelector(".moreTagOption")&&(this.$node.querySelector(".moreTagOption").style.display=""),c&&(c.innerText=" "+(this.getData("cxPropValue").length-r)+" "+_cruxUtils.getI18n("crm.label.More"))),t?(this.remainingValues=this.getData("cxPropValue").slice(r),c&&(c.removeAttribute("click"),c.addEventListener("mouseover",this.mouseOverEvent),c.addEventListener("mouseleave",this.mouseLeaveEvent),c.removeEventListener("click",this.clickEvent))):c&&(c.removeAttribute("mouseover"),c.removeAttribute("mouseleave"),c.removeEventListener("mouseover",this.mouseOverEvent),c.removeEventListener("mouseleave",this.mouseLeaveEvent),c.addEventListener("click",this.clickEvent)),this.hiddenElem=r}else if(this.data.cxPropValue&&!t){var d=this.$node.querySelectorAll("li");for(s=0;s<d.length;s++)d[s].style.display="";var u=this.$node.querySelector(".moreTagOption");u&&(u.style.display="none")}},mouseOverFn:function(){if(this.getMethods("onBeforeShowMoreTags")&&0==this.executeMethod("onBeforeShowMoreTags"))return!1;var e=document.getElementById("cxTagPopover"),t=this.$node.querySelector("ul");t.classList.contains("cxPropOnFocusTag")||(clearTimeout(this.newTimer),document.querySelector(".cxPropOnFocusTag")&&document.querySelector(".cxPropOnFocusTag").classList.remove("cxPropOnFocusTag"),this.newTimer=setTimeout(function(){if(t.classList.add("cxPropOnFocusTag"),e)e.setData("remainingValues",this.remainingValues),e.querySelector("lyte-popover").setData("ltPropShow",!0);else{e=Lyte.Component.render("crux-tag-popover",{remainingValues:this.remainingValues,id:"cxTagPopover",cxPropFreezePopover:this.data.cxPropFreezePopover,tagsClickable:this.data.cxPropTriggerTagClick},"body");var o=this;e.setMethods({onTagClick:function(e){o.tagsTransition(e)}})}}.bind(this),20))},didConnect:function(){this.mouseOverEvent=this.mouseOverFn.bind(this),this.mouseLeaveEvent=this.hideTags.bind(this),this.clickEvent=this.clickFn.bind(this),"create"==this.data.cxPropFrom&&this.setFocusUtil()},clickFn:function(){for(var e=this.$node.querySelectorAll(".tagElementList"),t=this.hideCount;t<e.length;t++)e[t].style.display="";this.$node.querySelector(".moreTagOption").style.display="none",this.findRowAndCallFixHeight(this.$node),this.getMethods("onShowMoreTags")&&this.executeMethod("onShowMoreTags"),this.hiddenElem=this.getData("cxPropValue").length,event.stopPropagation()},setValueFn:function(e){var t=0,o=!1;e&&(o=!0,this.setData("cxPropClipMode",null!=e.cxPropClipMode?e.cxPropClipMode:this.data.cxPropClipMode),this.setData("cxPropWidth",e.cxPropWidth?e.cxPropWidth:this.data.cxPropWidth));var a,r,i=[];o?r=this.$node.querySelectorAll(".tagElementList"):((a=document.createElement("li")).classList.add("tagElementList","bR2","dIB","bdr1px","pL20"),document.body.appendChild(a));var s=0,p=!1,l=this.data.cxPropWidth;try{l=l.split("px")[0]}catch(e){l=230}this.data.cxPropClipMode&&1!=this.data.cxPropValue.length?l-=130:l-=60;for(var n=0,c=0;c<this.data.cxPropValue.length;c++){var d;if(p)this.data.cxPropValue[c].hide=!0,o&&(r[c].style.display="none"),t++,i.push(this.data.cxPropValue[c]);else delete this.data.cxPropValue[c].hide,delete this.data.cxPropValue[c].showTooltip,delete this.data.cxPropValue[c].showTooltipWidth,o?(r[c].style.display="",r[c].querySelector("span").style.width="",r[c].setAttribute("lt-prop-title",""),r[c].querySelector("span").classList.remove("cruxTagTitle"),d=r[c].offsetWidth,d+=21):(a.innerText=this.data.cxPropValue[c].name,d=a.offsetWidth+15),(s+=d)+20>l?(this.data.cxPropClipMode?p=!0:s=0,this.data.cxPropClipMode&&c>0&&c==this.data.cxPropValue.length-1&&(l+=60),this.data.cxPropValue[c].showTooltip=!0,l-n<d-20&&(this.data.cxPropValue[c].showTooltipWidth=l-n-7+"px"),o&&l-n<d-20&&(r[c].setAttribute("lt-prop-title",r[c].innerText),r[c].querySelector("span").style.width=l-n-7+"px",r[c].querySelector("span").classList.add("cruxTagTitle")),n=0):n+=d}o||a.remove(),this.setData("showMore",t),this.setData("listValues",this.data.cxPropValue),o&&(t>0?(this.$node.querySelector(".moreTagOption").style.display="",this.$node.querySelector(".uline1").innerText=" "+t+" "+_cruxUtils.getI18n("crm.label.More")):this.$node.querySelector(".moreTagOption").style.display="none"),this.remainingValues=i},setValueFn1:function(e){var t=!1;if(e)t=!0,this.setData("cxPropClipMode",null!=e.cxPropClipMode?e.cxPropClipMode:this.data.cxPropClipMode),this.setData("cxPropWidth",e.cxPropWidth?e.cxPropWidth:this.data.cxPropWidth);else if(this.data.cxPropMaxCount){var o=this.data.cxPropValue.slice(0);this.remainingValues=[];for(var a=this.data.cxPropMaxCount;a<o.length;a++)o[a].hide=!0,this.remainingValues.push(o[a]);this.setData("listValues",o),this.setData("showMore",this.data.cxPropValue.length-this.data.cxPropMaxCount),this.setData("showMoreForMaxCount",this.data.showMore>0)}else this.setData("listValues",this.data.cxPropValue);this.extraWidth=20,this.data.cxPropMaxCount||$L.fastdom.measure(function(){var e=this.$node?this.$node.querySelectorAll("li"):[];if(!t){this.widths=[];for(var o=0;o<e.length-1;o++)this.widths.push(e[o].offsetWidth+this.extraWidth)}var a=this.data.cxPropWidth;try{a=Number.parseInt(a.split("px")[0]),a-=25}catch(e){a=230}230!=a&&this.$node.querySelector("ul")&&this.$node.querySelector("ul").classList.remove("w230");var r=0,i=0;this.data.cxPropClipMode&&1!=this.data.cxPropValue.length?a-=85:a-=20,$L.fastdom.mutate(function(){for(var o=0,s=!1;o<this.widths.length;o++)if(a<=0||s)e[o].style.display="none";else if(r+=this.widths[o],this.data.cxPropClipMode&&o==this.widths.length-1&&0!=o&&(a+=72),r>a){var p=e[o].textContent[0]===e[o].textContent[0].toLowerCase()?20:24;if(a-i>=p+this.extraWidth){var l=this.widths[o]-this.extraWidth-7,n=a-i-this.extraWidth-7;e[o].style.display="",e[o].setAttribute("lt-prop-title",e[o].textContent),e[o].querySelector("span").style.width=(n>l?l:n)+"px",e[o].querySelector("span").classList.add("cruxTagTitle")}else 0==o&&(s=!0),o--;if(this.data.cxPropClipMode){o++;break}i=0,r=0}else e[o].style.display="",e[o].setAttribute("lt-prop-title",""),e[o].querySelector("span").style.width="",e[o].querySelector("span").classList.remove("cruxTagTitle"),i+=this.widths[o];for(var c=0,d=[],u=this.data.cxPropValue;o<e.length-1;o++)e[o].style.display="none",c++,null!=u[o]?d.push(u[o]):c--;0==c?this.$node.querySelector(".moreTagOption").style.display="none":(this.$node.querySelector(".moreTagOption").style.display="",this.$node.querySelector(".moreCount").innerText=" "+c+" "+_cruxUtils.getI18n("crm.label.More")),this.remainingValues=d,!t&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this)}.bind(this))}.bind(this))},tagsTransition:function(e){if(this.data.cxPropTriggerTagClick){var t,o,a=moduleRecordMapping?moduleRecordMapping[this.data.cxPropModule].custom_view.id:"";(o=this.data.cxPropRedirectUrl?Lyte.Router.getRoute(this.data.cxPropRedirectUrl):{route:"crm.tab.module.custom-view.list",dynamicParams:[this.data.cxPropModule,a]}).queryParams||(o.queryParams={}),o.queryParams||(o.queryParams={}),o.queryParams.filters=JSON.stringify({field:{id:"",api_name:"Tag"},comparator:"equal",value:[e]}),t=Lyte.Router.getURL(o),window.open(t,"_blank")}},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),didDestroy:function(){var e=document.querySelector("crux-tag-popover");e&&e.remove()},keyDownEvent:function(){this.$node.querySelector("lyte-dropdown")&&this.$node.cxProp("aria")&&this.bindEventForAria()}.observes("cxPropAria").on("didConnect"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-dropdown")}.observes("cxPropMandatoryType").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-dropdown")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),resetData:function(){this.setData("cxPropValue","")},onSuccess:function(e){this.requestFired=!1,this.setData("tags",e),this.data.tags.forEach(function(e){this.newlyAdded.push(e.name)}.bind(this)),this.setSelected(),this.$node.querySelector("lyte-dropdown").open()},getPicklistFontColor:function(e){return Lyte.Component.registeredHelpers.cruxGetPicklistFontColor(e)},observeErrorMessage:function(){this.setData("isError",""!==this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeField_new:function(){this.$node.querySelector("lyte-dropdown")&&(this.data.isError?this.$node.querySelector("lyte-dropdown").classList.add("cxErrorBox"):this.$node.querySelector("lyte-dropdown").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation","crux-aria-dropdown-mixin"]}),Lyte.Component.register("crux-text-area-component",{_template:'<template tag-name="crux-text-area-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <pre id="{{cxPropId}}" class="proxima cxTextareaViewMode {{if(cxPropLineClamp,\'cxLineClamp\')}}" style="{{if(cxPropLineClamp,concat(\'-webkit-line-clamp : \',cxPropLineClamp,\';\'),\'\')}} {{if(cxPropWidth,concat(\'width : \',cxPropWidth,\';\'),\'\')}} {{if(expHandlers(cxPropWidth,\'&amp;&amp;\',expHandlers(cxPropLineClamp,\'!\')),\'white-space : nowrap;overflow:hidden;\',\'\')}} {{if(cxPropHeight,concat(\'max-height:\',cxPropHeight,\'; overflow:hidden;\'))}}"><template is="for" items="{{displayArray}}" item="item" index="index"><template is="if" value="{{item.unescape}}"><template case="true">{{unescape(item.value)}}</template><template case="false"><template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(item,cxPropMaskingProperties)}}</template><template case="false">{{item}}</template></template></template></template></template><template is="if" value="{{showMore}}"><template case="true">... <a href="#" data-zcqa="cxTextAreaShowMoreText" onclick="{{action(\'toggleShow\',false)}}" class="cxTextareaShowMore">{{cxPropShowMore}}</a></template><template case="false"><template is="if" value="{{showLess}}"><template case="true"> <a href="#" onclick="{{action(\'toggleShow\',true)}}" class="cxTextareaShowMore" data-zcqa="cxTextAreaShowLessText">{{cxPropShowLess}}</a></template></template></template></template></pre> <template is="if" value="{{showMoreAfterPre}}"><template case="true"> <a href="#" onclick="{{action(\'toggleShow\',false)}}" class="cxTextareaShowMore" data-zcqa="cxTextAreaShowMoreText">{{cxPropShowMore}}<lyte-icon class="cxBlueDropdown"></lyte-icon></a> </template><template case="false"><template is="if" value="{{showLessAfterPre}}"><template case="true"> <a href="#" onclick="{{action(\'toggleShow\',true)}}" class="cxTextareaShowMore" data-zcqa="cxTextAreaShowLessText">{{cxPropShowLess}}<lyte-icon class="cxBlueDropdown up"></lyte-icon></a> </template><template case="false"><template is="if" value="{{showMoreButton}}"><template case="true"> <span onclick="{{action(\'toggleShow\')}}" class="cxTextAreaToggleShowBtn"></span> </template></template></template></template></template></template> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template> <template is="if" value="{{cruxAnd(cxPropValue,cxPropWidth,expHandlers(cxPropLineClamp,\'!\'))}}"><template case="true"><lyte-popover id="{{cxPropId}}_popover" lt-prop-origin-elem="#{{cxPropId}}" lt-prop-duration="400" lt-prop-wrapper-class="{{if(expHandlers(cxPropWidth,\'&amp;&amp;\',showMoreButton),\'cxTextareaHovercardPopover\')}} {{cxPropPopoverClass}}" lt-prop-content-padding="15px 30px" lt-prop-window-spacing="{&quot;top&quot;:&quot;30&quot;,&quot;left&quot;:&quot;30&quot;,&quot;bottom&quot;:&quot;30&quot;,&quot;right&quot;:&quot;30&quot;}" lt-prop-show="{{lbind(showPopover)}}" lt-prop-type="box" lt-prop-freeze="false" lt-prop-scrollable="true" lt-prop-offset="{{popoverOffset}}" on-before-show="{{method(\'setWidthOfPopover\')}}" lt-prop-width="{{popoverWidth}}" on-show="{{method(\'popoverShow\')}}" lt-prop-placement="bottomRight topLeft"> <template is="registerYield" yield-name="popover"> <lyte-popover-content style="width:{{cxPropPopoverWidth}} ;max-height:{{cxPropPopoverHeight}};"> <pre style="max-height: calc({{cxPropPopoverHeight}} - 30px);"><template is="for" items="{{displayArray}}" item="item" index="index"><template is="if" value="{{item.unescape}}"><template case="true">{{unescape(item.value)}}</template><template case="false">{{item}}</template></template></template></pre> </lyte-popover-content> </template> </lyte-popover></template></template> </template><template case="create"></template><template case="criteria"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" class="cxW100Per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}} cxTextarea" lt-prop-type="textarea" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-readonly="{{cxPropReadonly}}" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-text-area-resize="{{cxPropTextAreaResize}}" lt-prop-style="{{cxPropStyle}}" lt-prop-vertical="true" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" on-resize-end="{{method(\'onResizeEnd\')}}" onclick="{{action(\'onClickTextarea\')}}" onkeyup="{{action(\'onKeyup\')}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}" onfocus="{{action(\'focusCallback\',event,true)}}" style="max-height : {{cxPropResizeMaxHeight}}" onfocusout="{{action(\'focusCallback\',event,false)}}"></lyte-input> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["cxPropLineClamp",{type:"helper",value:{name:"concat",args:["'-webkit-line-clamp : '","cxPropLineClamp","';'"]}},"''"]}},"' '",{type:"helper",value:{name:"if",args:["cxPropWidth",{type:"helper",value:{name:"concat",args:["'width : '","cxPropWidth","';'"]}},"''"]}},"' '",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"expHandlers",args:["cxPropWidth","'&&'",{type:"helper",value:{name:"expHandlers",args:["cxPropLineClamp","'!'"]}}]}},"'white-space : nowrap;overflow:hidden;'","''"]}},"' '",{type:"helper",value:{name:"if",args:["cxPropHeight",{type:"helper",value:{name:"concat",args:["'max-height:'","cxPropHeight","'; overflow:hidden;'"]}}]}}]}}}},{type:"attr",position:[1,0]},{type:"for",position:[1,0],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1,2]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width:'","cxPropPopoverWidth","' ;max-height:'","cxPropPopoverHeight","';'"]}}}},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'max-height: calc('","cxPropPopoverHeight","' - 30px);'"]}}}},{type:"attr",position:[1,1,0]},{type:"for",position:[1,1,0],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[0]}]}},default:{}}]},create:{dynamicNodes:[],additional:{next:"criteria"}},criteria:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'max-height : '","cxPropResizeMaxHeight"]}}}},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,7]},{type:"if",position:[3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropMaskingProperties","cxPropErrorOnHovercard","cxPropAutofocus","lyteViewPort","cxPropValue","cxPropEmptyValue","cxPropFrom","cxPropDisabled","cxPropPlaceholder","cxPropClass","cxPropMaxlength","cxPropReadonly","cxPropZcqa","cxPropAppearance","cxPropErrorMessage","cxPropMaxcharacter","displayValue","showMore","showLess","cxPropField","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropMaxHeight","cxPropDirection","cxPropLabelClass","lyteUnbound","cxPropTabIndex","cxPropTabindex","cxPropTextAreaResize","cxPropStyle","cxPropTooltip","isError","cxPropErrorYield","cxPropInfoTooltip","cxPropExpandTextArea","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropTooltipConfig","cxPropTooltipClass","cxPropUpdateDelay","cxPropCallbackDelay","cxPropPreventCollapse","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropHighlightUrl","cxPropShowMore","cxPropShowLess","cxPropErrorClass","displayArray","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropHeight","cxPropLayout","cxPropResizeMaxHeight","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropLineClamp","showMoreAfterPre","showLessAfterPre","tooltip","cxPropMandatory","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropWidth","showMoreButton","showPopover","popoverOffset","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropPopoverHeight","cxPropPopoverWidth","popoverWidth","cxPropPopoverClass","cxPropPreventFocusOnError","cxPropShowMoreEnabled","cxPropShowLessEnabled","cxPropButtonYield","cxPropAriaErrorProperties"],data:function(){return{cxPropMaskingProperties:Lyte.attr("object"),cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropPlaceholder:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropMaxlength:Lyte.attr("number"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropZcqa:Lyte.attr("string"),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropMaxcharacter:Lyte.attr("number",{default:0}),displayValue:Lyte.attr("string"),showMore:Lyte.attr("boolean",{default:!1}),showLess:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:"cruxTextArea"}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropMaxHeight:Lyte.attr("string"),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropLabelClass:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropTextAreaResize:Lyte.attr("object",{default:{horizontal:!1,vertical:!0}}),cxPropStyle:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropExpandTextArea:Lyte.attr("boolean",{default:!0}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropPreventCollapse:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropHighlightUrl:Lyte.attr("boolean",{default:!1}),cxPropShowMore:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.wf.summary.label.ShowInstantActions")}),cxPropShowLess:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.wf.summary.label.HideInstantActions")}),cxPropErrorClass:Lyte.attr("string"),displayArray:Lyte.attr("array"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropHeight:Lyte.attr("string"),cxPropLayout:Lyte.attr("string"),cxPropResizeMaxHeight:Lyte.attr("string",{default:""}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropLineClamp:Lyte.attr("number"),showMoreAfterPre:Lyte.attr("boolean",{default:!1}),showLessAfterPre:Lyte.attr("boolean",{default:!1}),tooltip:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropWidth:Lyte.attr("string"),showMoreButton:Lyte.attr("boolean",{default:!1}),showPopover:Lyte.attr("boolean",{default:!1}),popoverOffset:Lyte.attr("object",{default:{}}),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropPopoverHeight:Lyte.attr("string"),cxPropPopoverWidth:Lyte.attr("string"),popoverWidth:Lyte.attr("string",{default:"400px"}),cxPropPopoverClass:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropShowMoreEnabled:Lyte.attr("boolean",{default:!1}),cxPropShowLessEnabled:Lyte.attr("boolean",{default:!1}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object")}},getValue:function(){return this.$node.querySelector("#cruxLoadingElem")?this.data.cxPropValue:this.$node.querySelector("textarea").value},validate:function(){this.getData("cxPropField");return this.getData("cxPropValue")&&this.data.cxPropValue.trim()||this.validateMandatory(!0)?!(this.getData("cxPropValue")&&!this.validateLength(this.getData("cxPropValue")))&&(this.setData("cxPropErrorMessage",""),!0):(this.data.cxPropPreventFocusOnError||this.$node.querySelector("lyte-input").focus(),!1)},resetData:function(){this.$node.querySelector("lyte-input").ltProp("value","")},methods:{onChange:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},hideInfoTooltip:function(){this.showHideInfoTooltip()},onResizeEnd:function(){this.resized=!0},setWidthOfPopover:function(){if(this.data.cxPropWidth){var e=this.$node.offsetWidth;e>=400?this.setData("popoverWidth",`${e}px`):this.setData("popoverWidth","402px")}},popoverShow:function(e){$L(e.childComp.querySelector(".cxTextareaHovercardPopover pre")).scroll({appendTo:"container"})}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),toggleClass:function(e){var t;e?(t=this.$node.querySelector("pre"))?t.classList.add("cxLineClamp"):this.$node.querySelector(".cxTextareaViewMode").style.overflow="hidden":((t=this.$node.querySelector(".cxLineClamp"))&&t.classList.remove("cxLineClamp"),this.$node.querySelector(".cxTextareaViewMode").style.overflow="")},actions:{toggleShow:function(e){if(this.data.showMoreButton){var t=this.$node.getBoundingClientRect();this.setData("popoverOffset",{top:t.top,left:t.left,width:t.width}),this.setData("showPopover",!0)}else this.data.showMoreAfterPre?(this.toggleClass(!1),this.$node.querySelector("pre").style["max-height"]="",this.setData("showMoreAfterPre",!1),this.setData("showLessAfterPre",!0),this.setData("cxPropShowMoreEnabled",!1),this.setData("cxPropShowLessEnabled",!0),this.getMethods("onShowMore")&&this.executeMethod("onShowMore",this)):this.data.showLessAfterPre?(this.toggleClass(!0),this.setData("showMoreAfterPre",!0),this.setData("showLessAfterPre",!1),this.setData("cxPropShowMoreEnabled",!0),this.setData("cxPropShowLessEnabled",!1),this.getMethods("onShowLess")&&this.executeMethod("onShowLess",this)):(this.setData({displayArray:e?this.splitText(this.data.cxPropValue.substring(0,this.data.cxPropMaxcharacter),this.data.cxPropValue):this.splitText(this.data.cxPropValue),showMore:e,showLess:!e}),e?(this.getMethods("onShowMore")?this.executeMethod("onShowMore",this):this.$node.querySelector("a").scrollIntoView(),this.setData("cxPropShowMoreEnabled",!1),this.setData("cxPropShowLessEnabled",!0)):(this.setData("cxPropShowMoreEnabled",!0),this.setData("cxPropShowLessEnabled",!1)));event.preventDefault(),event.stopPropagation()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},onClickTextarea:function(){this.increaseHeight()},onKeyup:function(){(event&&"Tab"!=event.key||!event)&&this.increaseHeight()},focusCallback:function(e,t){t&&this.getMethods("onFocus")?this.executeMethod("onFocus",e,this.$node):0==t&&this.getMethods("onFocusOut")&&this.executeMethod("onFocusOut",e,this.$node)}},expandTextarea:function(e,t){var o=this.getValue();if(!this.resized||!o){this.resized=!1;var a=document.createElement("span");a.innerText=o,document.body.appendChild(a);var r;0==a.offsetHeight&&e&&"focus"==e.type?r=54:0==a.offsetHeight&&e&&"focusout"==e.type?r=34:t||(r=a.offsetHeight/18*18+54);var i=this.getData("cxPropMaxHeight"),s=r>=i?i:r,p=this.$node.querySelector("textarea"),l=getComputedStyle(p),n=s+(parseInt(l.paddingTop)+parseInt(l.paddingBottom))+(parseInt(l.borderBottomWidth)+parseInt(l.borderTopWidth));e&&"focusout"==e.type?this.$node.classList.remove("cxBigTextarea"):this.$node.classList.add("cxBigTextarea"),setTimeout(function(){this.$node.querySelector("lyte-input").style.height=n+2+"px",p.style.height=n+"px"}.bind(this),60),document.body.removeChild(a)}},observeValue:function(){if("view"==this.getData("cxPropFrom")){if(this.setData("showLess",!1),this.getData("cxPropValue")){var e=this.getData("cxPropValue"),t=this.getData("cxPropMaxcharacter");0!=t&&e.length>t?(this.setData("displayArray",this.splitText(this.data.cxPropValue.substring(0,t),this.data.cxPropValue)),this.setData("showMore",!0),this.setData("cxPropShowMoreEnabled",!0),this.setData("cxPropShowLessEnabled",!1)):(this.setData("displayArray",this.splitText(this.data.cxPropValue)),this.setData("showMore",!1),this.setData("cxPropShowMoreEnabled",!1),this.setData("cxPropShowLessEnabled",!1))}else this.setData("showMore",!1),this.setData("cxPropShowMoreEnabled",!1),this.setData("cxPropShowLessEnabled",!1);this.checkLineClampProps()}}.observes("cxPropValue","cxPropFrom").on("init"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-input")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),init:function(){this.resized=!1,this.$node.reset=function(){this.resized=!1,this.data.cxPropValue?(delete this.transEnd,this.increaseHeight()):(this.$node.querySelector("textarea").style.height="",this.transEnd1||(this.transEnd1=function(){this.$node.querySelector("lyte-input").style.height="",this.$node.querySelector("textarea").removeEventListener("transitionend",this.transEnd1)}.bind(this)),this.$node.querySelector("textarea").addEventListener("transitionend",this.transEnd1))}.bind(this),this.$node.pageResized=function(){this.setData("cxPropPopoverHeight",Math.floor(window.innerHeight/2)-30+"px")},this.setFocusUtil(),this.getData("cxPropPopoverWidth")||this.setData("cxPropPopoverWidth",this.getData("cxPropWidth")),this.getData("cxPropPopoverHeight")||this.setData("cxPropPopoverHeight",Math.floor(window.innerHeight/2)-30+"px")},increaseHeight:function(e){if(!this.resized||e){var t=71;this.data.cxPropHeight&&(t=this.data.cxPropHeight.split("px")[0],t=parseInt(t)),this.$node.querySelector("textarea").style.height=t+"px",this.transEnd||(this.transEnd=function(){this.$node.querySelector("lyte-input").style.height=t+2+"px",this.$node.querySelector("textarea").removeEventListener("transitionend",this.transEnd)}.bind(this),this.$node.querySelector("textarea").addEventListener("transitionend",this.transEnd))}},checkLineClampProps:function(){if("create"==this.data.cxPropFrom||"criteria"==this.data.cxPropFrom)this.data.cxPropValue&&this.increaseHeight(),this.setFocusUtil();else if("view"==this.data.cxPropFrom)if((this.data.cxPropLineClamp||this.data.cxPropHeight)&&this.data.cxPropValue){this.setData("cxPropValue",this.data.cxPropValue.trim());var e,t,o=this.$node.querySelector("pre");o&&$L.fastdom.measure((()=>{e=o.scrollHeight,t=o.offsetHeight,$L.fastdom.mutate((()=>{if(e>t)this.toggleClass(!0),this.setData({showMoreAfterPre:!0,cxPropShowMoreEnabled:!0,showLessAfterPre:!1,cxPropShowLessEnabled:!1});else{var o=this.data.cxLineClamp?this.data.cxLineClamp:7;e===t&&e>18*o?this.setData("showLessAfterPre",!0):this.setData("showLessAfterPre",!1),this.toggleClass(!1),this.setData({cxPropShowLessEnabled:!1,showMoreAfterPre:!1,cxPropShowMoreEnabled:!1})}}))}))}else this.$node.querySelector("pre")&&this.data.cxPropWidth?this.handleTextareaHovercard():(this.setData("showMoreAfterPre",!1),this.setData("cxPropShowMoreEnabled",!1),this.setData("cxPropShowLessEnabled",!1));this.data.cxPropMaxHeight&&this.$node&&(this.$node.querySelector("textarea").style["max-height"]=this.data.cxPropMaxHeight)},observeFrom:function(){this.checkLineClampProps()}.observes("cxPropFrom","lyteViewPort","cxPropLineClamp").on("didConnect"),highlighUrlInText:function(e){if(!this.data.cxPropHighlightUrl)return e;if(e){return e.replace(/((https?|ftp)(:|&#x3a;)(\/\/|&#x2f;&#x2f;))((www\.){0,1}[a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)|www\.([a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)/g,(function(e){var t="";return-1===e.indexOf("http")&&-1===e.indexOf("ftp")&&(t="//"),'<a class="link" rel="noopener noreferrer" href="'+t+$ESAPI.encoder().encodeForHTMLAttribute(e)+'" target="_blank">'+$ESAPI.encoder().encodeForHTML(e)+"</a>"}))}return""},observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect"),getATag:function(e,t){var o="";return-1===e.indexOf("http")&&-1===e.indexOf("ftp")&&(o="//"),'<a class="link" rel="noopener noreferrer" href="'+o+$ESAPI.encoder().encodeForHTMLAttribute(t)+'" target="_blank">'+$ESAPI.encoder().encodeForHTML(e)+"</a>"},splitText:function(e,t){if(!this.data.cxPropHighlightUrl||!e)return[e];var o=/((https?|ftp)(:|&#x3a;)(\/\/|&#x2f;&#x2f;))((www\.){0,1}[a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)|www\.([a-zA-Z0-9-_]+(\.[a-z0-9]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)/g,a=e.match(o),r=(t=t||e).match(o);if(!a)return[e];var i=e.replace(o,"crux-text-area-component-url");i=i.split("crux-text-area-component-url");for(var s=1,p=0;s<i.length;s+=2,p++)i.splice(s,0,{unescape:!0,value:this.getATag(a[p],r[p])});return i},observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropTooltip","cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),handleTextareaHovercard:function(){var e=this.$node,t=e.querySelector("pre");e.classList.add("cxTextareaHoverCard"),this.textareaResizeObserver&&this.textareaResizeObserver.disconnect();var o=new ResizeObserver((function(){var o=e.getData("showMoreButton")?t.offsetWidth+25:t.offsetWidth;t.scrollWidth>o?(e.setData("showMoreButton",!0),e.classList.add("cxTextareaShowHoverCard")):(e.setData("showMoreButton",!1),e.classList.remove("cxTextareaShowHoverCard"))}));e.textareaResizeObserver=o,o.observe(t)},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),didDestroy:function(){this.textareaResizeObserver&&this.textareaResizeObserver.disconnect()},observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-text-component",{_template:'<template tag-name="crux-text-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <span class="cxElemCompViewWrap" onclick="{{action(\'viewClicked\',event)}}"> <template is="if" value="{{expHandlers(cxPropValue,\'!\')}}"><template case="true"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template><template case="false"><template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"><template is="if" value="{{cxPropTooltip}}"><template case="true"><lyte-text lt-prop-value="{{cxPropValue}}"></lyte-text></template><template case="false"><template is="if" value="{{cxPropUnescape}}"><template case="true">{{unescape(cxPropValue)}}</template><template case="false">{{cxPropValue}}</template></template></template></template><template is="if" value="{{cxPropViewYieldSuffix}}"><template case="true"><lyte-yield yield-name="viewYieldSuffix" prop-field="{{cxPropField}}" prop-value="{{cxPropValue}}"></lyte-yield></template></template><template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template></template></template></template></template> </span> </template><template case="criteria"></template><template case="filter"></template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{unescape(cruxEncodeHTML(cxPropInfoTooltip))}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} {{if(cxPropDisplayIcon,\'cxBoxWithRightIcon\',\'\')}} {{if(cxPropExpandWidthOnChange,\'cxTextCompExpandable\',\'\')}}"> <template is="if" value="{{cxPropPrefixYield}}"><template case="true"><lyte-yield yield-name="prefixYield" style="position: absolute; z-index:1; padding-top:10px; padding-left:5px;"></lyte-yield></template></template> <template is="if" value="{{cxPropAutocompleteOptions.enable}}"><template case="true"> <div class="cxLookupComponent cxBoxWithRightIcon {{cxPropWrapperClass}}"> <div class="cxBoxLeftContent"> <lyte-autocomplete id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-external-search="{{cxPropAutocompleteOptions.externalSearch}}" lt-prop-content="{{records}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-yield="{{cxPropAutocompleteOptions.yield}}" lt-prop-dropdown-height="250px" lt-prop-dropdown-class="cxLookupDropbox cxDropbox" lt-prop-min-length="{{cxPropAutocompleteOptions.minLength}}" on-ext-search="{{method(\'onExtSearchAutoComp\')}}" on-search="{{method(\'onSearchAutoComp\')}}" on-select="{{method(\'onSelectAutoComp\')}}" on-scroll="{{method(\'onScrollAutoComp\')}}" on-before-show="{{method(\'onBeforeOpenAutoComp\')}}" on-blur="{{method(\'onBlurAutoComp\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-maxlength="{{cxPropMaxlength}}" after-render="{{method(\'afterRenderAutocomplete\')}}" lt-prop-method="{{cxPropAutocompleteOptions.method}}" lt-prop-label="{{cxPropAutocompleteOptions.displayField}}" lt-prop-description="{{cxPropAutocompleteOptions.descriptionField}}" lt-prop-value="{{cxPropValue}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-disabled="{{cxPropDisabled}}" onfocus="{{action(\'onFocusInput\')}}" onfocusout="{{action(\'onFocusInput\',true)}}" onkeyup="{{action(\'clearSelection\')}}" lt-prop-open-on-focus="true" lt-prop-password-icon="{{cxPropPasswordIcon}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-dropdown="{&quot;forceCalculateWidth&quot; : true}" data-zcqa="{{cxPropZcqa}}" on-show="{{method(\'onDropdownOpen\')}}" on-hide="{{method(\'onDropdownClose\')}}"> <template is="yield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body class="cxVisibleLookup" style="{{if(ifEquals(records.length,0),\'display: none\',\'\')}}"> <template is="for" items="{{records}}" item="val" index="index"> <lyte-drop-item data-value="{{val[cxPropAutocompleteOptions.idField]}}" onmouseenter="{{action(\'showHideIcon1\',true,val)}}" onmouseleave="{{action(\'showHideIcon1\',false,val)}}"> <lyte-autocomplete-label> <lyte-text class="cxLookupDropboxLabel {{cxPropAutocompleteOptions.displayFieldClass}}" lt-prop-value="{{val[cxPropAutocompleteOptions.displayField]}}"></lyte-text> <template is="if" value="{{cxPropShowHideTooltip}}"><template case="true"> <span class="cxLookupInfoIcon {{if(val.cxPropShowIcon,\'cruxLookupPopover\')}}" onmouseenter="{{action(\'infoPop\',this,val,event)}}" onmouseleave="{{action(\'infoPop\',this,val,event)}}" style="{{if(val.cxPropShowIcon,\'visibility: visible;\',\'visibility: hidden\')}}"></span> </template></template> </lyte-autocomplete-label> <template is="if" value="{{cxPropAutocompleteOptions.descriptionField}}"><template case="true"><lyte-autocomplete-description> <span class="{{cxPropAutocompleteOptions.descriptionFieldClass}}">{{val[cxPropAutocompleteOptions.descriptionField]}}</span> </lyte-autocomplete-description></template></template> </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-autocomplete> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <div class="cxBoxSpinWrapper cxFlexCenter"> <span class="cxElementsLoaderBg" style="display: none;"></span> </div> </div> </div> </template><template case="false"> <lyte-input lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-update-delay="{{defaultUndefined}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" class="cxW100Per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-wrapper-style="{{cxPropWrapperStyle}}" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" data-zcqa="{{cxPropZcqa}}" on-value-change="{{method(\'inputValueChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-focus="{{cxPropFocus}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" onfocus="{{action(\'focusCallback\',event)}}" lt-prop-type="{{cxPropType}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" on-blur="{{method(\'onBlurCallback\')}}" onkeydown="{{action(\'checkRegex\')}}" lt-prop-close-icon="{{cxPropCloseIcon}}" lt-prop-width="{{if(cxPropExpandWidthOnChange,cxPropWidth,\'\')}}" onkeyup="{{action(\'expandOnValue\')}}" on-clear="{{method(\'onCloseIconClick\')}}" lt-prop-password-icon="{{cxPropPasswordIcon}}" lt-prop-focus-at-end="{{cxPropFocusAtEnd}}" lt-prop="{{checkElementsData(this,childCompProps)}}"></lyte-input> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> </template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> <template is="if" value="{{cxPropDisplayIcon}}"><template case="true"> <div class="cxBoxRightIcon cxFlexCenter {{cxPropRightIconClass}}" onclick="{{action(\'handleIconClick\')}}"> <div class="cP {{cxPropIconClass}}"></div> </div> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"if",args:[{type:"helper",value:{name:"ifEquals",args:["records.length",0]}},"'display: none'","''"]}}}},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["val.cxPropShowIcon","'visibility: visible;'","'visibility: hidden'"]}}}}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"text",position:[0,1,0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,7]},{type:"if",position:[3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,9]},{type:"if",position:[3,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropElementProps","childCompProps","cxPropErrorOnHovercard","cxPropFocus","cxPropAutofocus","lyteViewPort","cxPropValue","cxPropFrom","cxPropPlaceholder","cxPropField","cxPropMaxlength","cxPropDisabled","cxPropReadonly","cxPropWrapperStyle","cxPropClass","cxPropZcqa","cxPropIgnoreEmptyValue","cxPropAppearance","cxPropErrorMessage","cxPropDirection","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","isError","cxPropTabIndex","cxPropTabindex","lyteUnbound","cxPropLabelClass","cxPropEmptyValue","cxPropTooltip","defaultUndefined","cxPropErrorYield","cxPropInfoTooltip","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","records","cxPropAutocompleteOptions","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropLayout","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","tooltip","cxPropType","cxPropCallbackDelay","cxPropUpdateDelay","cxPropAutofocus","cxPropCloseIcon","cxPropButtonTextInsideElement","cxPropMandatory","cxPropDisplayIcon","cxPropRightIconClass","cxPropIconClass","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropShowHideTooltip","cxPropPreventFocusOnError","cxPropExpandWidthOnChange","cxPropWidth","cxPropMaxWords","cxPropMetaMoreRecords","cxPropUnescape","cxPropPasswordIcon","cxPropButtonYield","cxPropFocusAtEnd","cxPropFocusAtEnd","cxPropAriaErrorProperties"],data:function(){return{cxPropElementProps:Lyte.attr("object",{default:{}}),childCompProps:Lyte.attr("object",{default:{}}),cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropFocus:Lyte.attr("boolean",{default:!1}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropPlaceholder:Lyte.attr("string"),cxPropField:Lyte.attr("object",{default:{}}),cxPropMaxlength:Lyte.attr("number"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropWrapperStyle:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string"),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),isError:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string"),defaultUndefined:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),records:Lyte.attr("array"),cxPropAutocompleteOptions:Lyte.attr("object",{default:{},hideAttr:!0}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropLayout:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),tooltip:Lyte.attr("string"),cxPropType:Lyte.attr("string",{default:"text"}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),cxPropCloseIcon:Lyte.attr("boolean",{default:!1}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropDisplayIcon:Lyte.attr("boolean",{default:!1}),cxPropRightIconClass:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropShowHideTooltip:Lyte.attr("boolean",{default:!1}),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropExpandWidthOnChange:Lyte.attr("boolean",{default:!1}),cxPropWidth:Lyte.attr("string"),cxPropMaxWords:Lyte.attr("number",{default:50}),cxPropMetaMoreRecords:Lyte.attr("string",{default:"more_records"}),cxPropUnescape:Lyte.attr("boolean"),cxPropPasswordIcon:Lyte.attr("boolean",{default:!1}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropFocusAtEnd:Lyte.attr("boolean",{default:!1}),cxPropFocusAtEnd:Lyte.attr("boolean",{default:!1}),cxPropAriaErrorProperties:Lyte.attr("object")}},validate:function(){var e=this.getValue(),t=this.getData("cxPropField");return"create"==this.getData("cxPropFrom")?this.validateText(t,e):"filter"!=this.getData("cxPropFrom")||(e&&""!=e.trim()||this.getData("cxPropIgnoreEmptyValue"))&&!this.isEmoji(e)?"criteria"!==this.getData("cxPropFrom")||e&&""!==e.trim()||this.getData("cxPropIgnoreEmptyValue")?!(e&&e.replace(/^\s+/g,"").replace(/\s+$/g,"").indexOf("*")>-1)||(this.showAlert(_cruxUtils.getI18n("crm.alert.character.not.allowed","*")),this.$node.querySelector("input").focus(),!1):(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),!1):(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),this.$node.querySelector("input").focus(),!1)},getValue:function(e){if(("criteria"==this.getData("cxPropFrom")||"filter"==this.getData("cxPropFrom"))&&this.getData("cxPropValue"))return"string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue");if("create"==this.data.cxPropFrom&&this.data.cxPropAutocompleteOptions.enable&&this.$node.querySelector("lyte-autocomplete")){var t=this.$node.querySelector("lyte-autocomplete");return e?t.ltProp(e):t.ltProp("value")}return"string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue")},resetData:function(){this.$node.querySelector("lyte-input").ltProp("value","")},methods:{inputValueChange:function(e){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),e.newValue&&e.newValue.split(",").length>this.data.cxPropMaxWords&&(this.showAlert(_cruxUtils.getI18n("crm.alert.maximum.text.values.contains",this.data.cxPropMaxWords)),this.setData("cxPropValue",e.oldValue)),this.inFocus=!0,this.getMethods("onValueChange")&&this.executeMethod("onValueChange",null==this.data.cxPropCallbackDelay?e.newValue:this.getValue()),this.inFocus=!1},hideInfoTooltip:function(){this.showHideInfoTooltip()},onExtSearchAutoComp:function(e,t,o){this.pageIndex=1,this.searchText=e.trim(),this.scrollEnd=!1,this.onscroll=!1,this.makeRequest()},onSearchAutoComp:function(e){if(this.data.cxPropAutocompleteOptions.externalSearch)return!1;0==e.length&&this.$node.querySelector("lyte-autocomplete").toggle()},onSelectAutoComp:function(e,t,o){if(this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.data.cxPropAutocompleteOptions.yield){for(var a=0;a<this.data.records.length;a++)if(this.data.records[a][this.data.cxPropAutocompleteOptions.idField]==e){this.setData("cxPropValue",this.data.records[a][this.data.cxPropAutocompleteOptions.displayField]),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.data.records[a]);break}}else this.setData("cxPropValue",e.name),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e);this.$node.querySelector(".cxBoxWithRightIcon").classList.remove("cxBoxInputFocused")},onScrollAutoComp:function(e){if(!this.scrollEnd&&this.data.cxPropAutocompleteOptions.externalSearch){var t=e.target;t.scrollHeight<=Math.ceil(t.offsetHeight)+Math.ceil(t.scrollTop)&&(this.pageIndex++,this.onscroll=!0,this.makeRequest())}},onBeforeOpenAutoComp:function(){return!this.pageIndex&&this.data.cxPropAutocompleteOptions.externalSearch?(this.pageIndex=1,this.searchText=this.data.cxPropValue?this.data.cxPropValue:"",this.makeRequest()):void 0!==this.data.records&&0!==this.data.records.length&&void 0},onBlurAutoComp:function(){this.setData("cxPropValue",this.$node.querySelector("input").value),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.$node.querySelector("input").value),this.getMethods("onBlur")&&this.executeMethod("onBlur",event,element)},afterRenderAutocomplete:function(){if(this.$node.querySelector("lyte-input")){if("box"==this.getData("cxPropAppearance")&&this.$node.querySelector("lyte-input").classList.add("cxBoxInput"),!this.data.cxPropAutocompleteOptions.yield){if(this.data.cxPropAutocompleteOptions.content.length&&!this.data.cxPropAutocompleteOptions.content[0].name)for(var e=0;e<this.data.cxPropAutocompleteOptions.content.length;e++)this.data.cxPropAutocompleteOptions.content[e]={name:this.data.cxPropAutocompleteOptions.content[e]};this.setData("records",this.data.cxPropAutocompleteOptions.content)}this.data.cxPropAutocompleteOptions.method||Lyte.objectUtils(this.data.cxPropAutocompleteOptions,"add","method","contains")}},onBlurCallback:function(e,t){this.getMethods("onBlur")&&this.executeMethod("onBlur",e,t)},onCloseIconClick:function(e,t){this.getMethods("onClear")&&this.executeMethod("onClear",e,t)},onDropdownOpen:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},onDropdownClose:function(e,t){this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)}},actions:{viewClicked:function(e){this.getMethods("onValueClicked")&&this.executeMethod("onValueClicked",e,this)},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},infoPop:function(e,t,o){var a=document.getElementById("cruxLookupPopover");"mouseenter"==o.type?(this.entered=!0,a||(a=Lyte.Component.render("crux-lookup-popup",{id:"cruxLookupPopover",fieldMapping:this.data.cxPropAutocompleteOptions.fieldMapping},"body")),a.setData({module:moduleRecordMapping[this.data.cxPropAutocompleteOptions.module],data:t,show:!0})):(this.entered=!1,a.setData("show",!1))},showHideIcon1:function(e,t){this.entered||Lyte.objectUtils(t,"add","cxPropShowIcon",e)},focusCallback:function(e){this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},checkRegex:function(){var e=new RegExp(/^[a-zA-Z0-9_]*$/);"alphanumeric"!=this.cxPropType||e.test(event.key)||event.preventDefault()},handleIconClick:function(){this.getMethods("onRightIconClick")&&this.executeMethod("onRightIconClick")},onFocusInput:function(e){e?this.$node.querySelector(".cxBoxWithRightIcon").classList.remove("cxBoxInputFocused"):this.$node.querySelector(".cxBoxWithRightIcon").classList.add("cxBoxInputFocused")},clearSelection:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),!this.$node.querySelector("input").value&&this.$node.querySelector("lyte-dropdown")&&this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-drop-item[selected=true]")&&(this.setData("cxPropValue",""),this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-drop-item[selected=true]").removeAttribute("selected"),this.$node.querySelector("lyte-dropdown").close())},expandOnValue:function(){if(this.data.cxPropExpandWidthOnChange){var e,t=this.$node.querySelector("input"),o=t.scrollWidth,a=this.$node.offsetWidth;if(46===event.keyCode||8===event.keyCode){var r=((e=document.createElement("canvas").getContext("2d")).font="1rem LatoRegular",e.measureText(t.value).width);console.log(r,o,a);var i=r+28,s=this.data.cxPropWidth.split("px")[0];i>a?i=a:i<s&&(i=s-2),t.style.width=i+"px",this.$node.querySelector("lyte-input").style.width=i+2+"px"}else o>a&&(o=a),t.style.width=o+"px",this.$node.querySelector("lyte-input").style.width=o+2+"px"}}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){if("create"==this.getData("cxPropFrom")||"criteria"==this.data.cxPropFrom){var e=this.$node.querySelector("lyte-input");this.$node.querySelector(".cxBoxWithRightIcon")?this.data.isError?this.$node.querySelector(".cxBoxWithRightIcon").classList.add("cxErrorBoxWithRightIcon"):this.$node.querySelector(".cxBoxWithRightIcon").classList.remove("cxErrorBoxWithRightIcon"):e&&(this.getData("isError")?e.classList.add("cxErrorBox"):this.$node.querySelector("lyte-input")&&e.classList.remove("cxErrorBox"))}}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin(this.data.cxPropAutocompleteOptions.enable?".cxLookupComponent":"lyte-input"),"create"===this.data.cxPropFrom&&(this.setFocusUtil(),this.setSelectUtil())}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),init:function(){"create"!=this.data.cxPropFrom&&(this.data.cxPropAutocomplete="off"),this.cxPropType=void 0,"alphanumeric"==this.data.cxPropType&&(this.cxPropType=this.data.cxPropType,this.setData("cxPropType","text")),this.pageIndex=void 0,this.convertLtPropJson()},makeRequest:function(){var e=this.$node.querySelector(".cxElementsLoaderBg");return e.style.display="",this.executeMethod("fetchData",this.searchText,this.pageIndex,this.data.cxPropField).then(function(t){t&&0!=t.length||(this.scrollEnd=!0,this.onscroll||this.setData("records",[]),t=[]),this.onscroll?Lyte.arrayUtils(this.data.records,"push",t):this.setData("records",t),e.style.display="none",this.data.cxPropValue&&this.$node.querySelector("lyte-dropdown").component.childComp&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+this.data.cxPropValue+"']")&&this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("[data-value='"+this.data.cxPropValue+"']").setAttribute("selected",!0),this.data.cxPropMetaMoreRecords&&t.$&&!1===t.$[this.data.cxPropMetaMoreRecords]&&(this.scrollEnd=!0);var o=this.$node.querySelector("lyte-autocomplete").querySelector("lyte-dropdown");0===this.data.records.length?o.close():(o.open(),o.resetPosition())}.bind(this),(function(){e.style.display="none"}))},ele:"lyte-input",observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass);var o=t.find("input")[0];if(this.data.cxPropExpandWidthOnChange&&o.scrollWidth>o.offsetWidth){var a=o.scrollWidth;a>this.$node.offsetWidth&&(a=this.$node.offsetWidth-2),o.style.width=a+"px",t[0].style.width=a+2+"px"}}}.observes("cxPropClass","lyteViewPort").on("didConnect"),observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropTooltip","cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin(this.data.cxPropAutocompleteOptions.enable?".cxLookupComponent":"lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation","crux-filter-utils"]}),Lyte.Component.register("crux-role-component",{_template:'<template tag-name="crux-role-component"> <div class="{{if(ifEquals(cxPropRequestModel,\'role\'),\'cxBoxWithRightIcon cxBoxContainsDropdown\',\'\')}}"> <div class="{{if(ifEquals(cxPropRequestModel,\'role\'),\'cxBoxLeftContent\',\'\')}}"> <lyte-dropdown id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" on-before-show="{{method(\'onBeforeShow\')}}" on-show="{{method(\'roleDropBoxOnShow\')}}" on-hide="{{method(\'roleDropBoxOnHide\')}}" on-scroll="{{method(&quot;onBodyScroll&quot;)}}" lt-prop-yield="true" on-add="{{method(\'addToList\')}}" on-before-add="{{method(\'dropDownSelect\')}}" lt-prop-selected="{{dropdownSelected}}" on-remove="{{method(\'removeFromList\')}}" lt-prop-type="{{cxPropType}}" lt-prop-tabindex="14" class="{{if(ifEquals(cxPropAppearance,\'flat\'),\'cxFlatDropdown\',\'cxBoxDropdown\')}}" on-option-selected="{{method(\'roleSelected\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> <lyte-text data-zcqa="roleSelected_{{if(ifEquals(cxPropRequestModel,\'role\'),renderItems[0].display_label,renderItems[0].name)}}" class="lyteDropdownVisible" lt-prop-value="{{if(ifEquals(cxPropRequestModel,\'role\'),renderItems[0].display_label,renderItems[0].name)}}"></lyte-text> </template><template case="false"> <ul class="lyteMultipleSelect"> <template is="for" items="{{renderItems}}" item="selitem" index="indeval"> <li data-value="{{selitem.id}}" data-zcqa="roleSelected_{{if(ifEquals(cxPropRequestModel,\'role\'),selitem.display_label,selitem.name)}}"> <lyte-text class="lyteDropdownVisible" lt-prop-value="{{if(ifEquals(cxPropRequestModel,\'role\'),selitem.display_label,selitem.name)}}"></lyte-text> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-search class="cxW100Per" lt-prop-type="text" lt-prop-trim="true" lt-prop-query-selector="{&quot;scope&quot;:&quot;.cxRoleDropBody{{cxPropId}}&quot;, &quot;target&quot;:&quot;lyte-drop-item:not([selected=\\&quot;true\\&quot;])&quot;, &quot;search&quot;:&quot;lyte-drop-item:not([selected=\\&quot;true\\&quot;])&quot;}" on-search="{{method(\'showNoResult\')}}" data-zcqa="cxRoleSearch" onkeydown="{{action(\'preventDefault\',this,event)}}"></lyte-search> </li> </ul> </template></template> </lyte-drop-button> <lyte-drop-box class="cxDropbox"> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> <lyte-drop-header> <lyte-search class="cxW100Per" lt-prop-trim="true" lt-prop-query-selector="{&quot;scope&quot;:&quot;.cxRoleDropBody{{cxPropId}}&quot;, &quot;target&quot;:&quot;lyte-drop-item&quot;, &quot;search&quot;:&quot;lyte-drop-item&quot;}" on-search="{{method(\'showNoResult\')}}" data-zcqa="cxRoleSearch"></lyte-search> </lyte-drop-header> </template></template> <lyte-drop-body class="cxRoleDropBody{{cxPropId}}"> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxRoleLoaderWrap cxAlignCenter"> <span class="cxElementsLoaderBg cxRoleLoaderIcon"></span> </div> </template><template case="false"><template is="for" items="{{systemData}}" item="item" index="indeval"><template is="if" value="{{negate(cruxContains(cxPropExcludeIds,item.id))}}"><template case="true"> <template is="if" value="{{cruxContains(selectedIds,item.id)}}"><template case="true"> <lyte-drop-item data-value="{{item.id}}" selected="true" data-zcqa="cxRole_{{if(ifEquals(cxPropRequestModel,\'role\'),item.display_label,item.name)}}"> <lyte-text class="dIB cxVam" lt-prop-value="{{if(ifEquals(cxPropRequestModel,\'role\'),item.display_label,item.name)}}"></lyte-text> </lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{item.id}}" data-zcqa="cxRole_{{if(ifEquals(cxPropRequestModel,\'role\'),item.display_label,item.name)}}"> <lyte-text class="dIB cxVam" lt-prop-value="{{if(ifEquals(cxPropRequestModel,\'role\'),item.display_label,item.name)}}"></lyte-text> <template is="if" value="{{ifEquals(item.id,\'${CURRENTUSERROLE}\')}}"><template case="true"> <span class="cxInfoIcon cxVam mL5" lt-prop-title="{{cruxGetI18n(\'crux.logged.in.role.definition\')}}"></span> </template></template> </lyte-drop-item> </template></template> </template></template></template> <template is="if" value="{{expHandlers(noResult,\'||\',expHandlers(expHandlers(cxPropType,\'!=\',\'single\'),\'&amp;&amp;\',expHandlers(systemData.length,\'==\',cruxArithResult(renderItems.length,\'+\',cxPropExcludeIds.length))))}}"><template case="true"> <div class="cxDropdownNoResult">{{cruxGetI18n(\'crm.label.no.options.found\')}}</div> </template></template> </template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> <template is="if" value="{{expHandlers(expHandlers(cxPropRequestModel,\'==\',\'role\'),\'&amp;&amp;\',cxPropShowLookupIcon)}}"><template case="true"> <div class="cxBoxRightIcon cxFlexCenter" onclick="{{action(\'openRoleModal\')}}"> <span id="openRoleModal" data-zcqa="cxOpenRolePopup" class="cx_roleLookupIcon cx_roleIconPos"></span> </div> </template></template> </div> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> <template is="if" value="{{cxPropShowLookupIcon}}"><template case="true"> <lyte-modal lt-prop-offset="{&quot;top&quot;:&quot;0&quot;}" lt-prop-width="600px" lt-prop-wrapper-class="cxBoxModal cxRoleModalWrapper" on-close="{{method(\'onClose\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header>{{cruxGetI18n(\'crm.security.roles.list\')}}</lyte-modal-header> <lyte-modal-content> <p>{{cruxGetI18n(\'crm.security.roles.lookup.info\')}}</p> <lyte-tree class="cxRoleCompLyteTree" lt-prop-data="{{modalContent}}" lt-prop-open-class="open" lt-prop-close-class="close"> <template is="registerYield" yield-name="content"> <lyte-tree-content class="{{if(or(cruxContains(selectedIds,listValue.id,selectedIds.length),cruxContains(cxPropExcludeIds,listValue.id)),\'cD\',\'\')}}" lt-prop-title="{{if(cruxContains(selectedIds,listValue.id,selectedIds.length),cruxGetI18n(\'crm.role.already.selected\'),\'\')}}"> <lyte-tree-icon class="cP" lyte-custom-icon="true"> <div class="collapseBox"> <div class="arrow"></div> </div> </lyte-tree-icon> <p class="treeValue {{if(or(cruxContains(selectedIds,listValue.id,selectedIds.length),cruxContains(cxPropExcludeIds,listValue.id)),\'pEvents\',\'\')}}" data-zcqa="cxRole_{{if(ifEquals(cxPropRequestModel,\'role\'),listValue.display_label,listValue.name)}}" onclick="{{action(\'onSelectRole\',listValue.id)}}"><lyte-text lt-prop-value="{{if(ifEquals(cxPropRequestModel,\'role\'),listValue.display_label,listValue.name)}}"></lyte-text></p> </lyte-tree-content> </template> </lyte-tree> </lyte-modal-content> <lyte-modal-footer> <lyte-button onclick="{{action(\'closeModal\')}}" data-zcqa="cx_Role_Cancel"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.cancel\')}} </template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,0]},{type:"attr",position:[3,3]},{type:"registerYield",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,0]},{type:"componentDynamic",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,1]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","systemData","renderItems","cxPropValue","showLoading","noResult","cxPropId","cxPropAppearance","cxPropRequestModel","cxPropLoggedInUserRoleRequired","selectedIds","dropdownSelected","cxPropShowLookupIcon","cxPropExcludeIds","cxPropType","cxPropOptions","cxPropMaxCount","modalContent","cxPropQueryParam","cxPropCustomData","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),systemData:Lyte.attr("array",{default:[]}),renderItems:Lyte.attr("array",{default:[]}),cxPropValue:Lyte.attr("array"),showLoading:Lyte.attr("boolean",{default:!0}),noResult:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:""}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropRequestModel:Lyte.attr("string",{default:"role"}),cxPropLoggedInUserRoleRequired:Lyte.attr("boolean",{default:!1}),selectedIds:Lyte.attr("array",{default:[]}),dropdownSelected:Lyte.attr("string"),cxPropShowLookupIcon:Lyte.attr("boolean",{default:!0}),cxPropExcludeIds:Lyte.attr("array",{default:[]}),cxPropType:Lyte.attr("string",{default:"multisearch"}),cxPropOptions:Lyte.attr("array"),cxPropMaxCount:Lyte.attr("number"),modalContent:Lyte.attr("array"),cxPropQueryParam:Lyte.attr("object",{default:{}}),cxPropCustomData:Lyte.attr("object",{default:{}}),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){this.data.cxPropType||this.setData("cxPropType","multisearch"),this.data.cxPropOptions&&this.data.cxPropOptions.length>0&&(this.setData("dataFetched",!0),this.setData("systemData",this.data.cxPropOptions),this.setData("showLoading",!1))},methods:{roleDropBoxOnShow:function(e,t){$L(".cxBoxWithRightIcon",this.$node).addClass("cxBoxDropdownOpened"),this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},roleDropBoxOnHide:function(e,t){var o=this.$node.querySelector("lyte-search");(o=o||this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-search"))&&o.setValue(""),$L(".cxBoxWithRightIcon",this.$node).removeClass("cxBoxDropdownOpened"),this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)},dropDownSelect:function(){return!(this.data.cxPropMaxCount&&this.getData("renderItems").length>=this.data.cxPropMaxCount)||("role"==this.data.cxPropRequestModel?_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropDuration:3e3,ltPropMessage:_cruxUtils.getI18n("crux.comboBox.max.limit",this.data.cxPropMaxCount,_cruxUtils.getI18n("crm.workflow.alert.roles"))}}):"user_group"==this.data.cxPropRequestModel&&_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropDuration:3e3,ltPropMessage:_cruxUtils.getI18n("crux.comboBox.max.limit",this.data.cxPropMaxCount,_cruxUtils.getI18n("crm.security.groups"))}}),!1)},addToList:function(e,t,o){var a=this.$node.querySelector("lyte-search");a&&a.setValue("");for(var r=this.getData("systemData"),i=0;i<r.length;i++)if(r[i].id==t){Lyte.arrayUtils(this.getData("renderItems"),"push",r[i]),Lyte.arrayUtils(this.data.selectedIds,"push",r[i].id);break}this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.setData("dropdownSelected",JSON.stringify(this.data.selectedIds))},removeFromList:function(e,t,o){var a=this.$node.querySelector("lyte-search");a&&a.setValue("");for(var r=0;r<this.getData("renderItems").length;r++)this.getData("renderItems")[r].id==t&&(Lyte.arrayUtils(this.getData("renderItems"),"removeAt",r,1),Lyte.arrayUtils(this.data.selectedIds,"removeAt",r,1));this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.setData("dropdownSelected",JSON.stringify(this.data.selectedIds))},onBeforeShow:function(){return(!event.target.getAttribute||"openRoleModal"!=event.target.getAttribute("id"))&&(!this.getData("dataFetched")&&this.data.showLoading?(this.getDatas(),!1):void 0)},showNoResult:function(e,t,o,a){var r=e.length;if(this.data.cxPropLoggedInUserRoleRequired){var i=e.find((e=>"${CURRENTUSERROLE}"==e.getAttribute("data-value")));i&&a.length>0?(i.style.display="none",r-=1):i&&a.length<1&&(i.style.display="")}this.setData("noResult",""!=a&&0==r)},onClose:function(e){e.setData("ltPropBindToBody",!1)},roleSelected:function(e,t){"single"==this.data.cxPropType&&(this.setData("renderItems",[]),this.setData("selectedIds",[]));for(var o=this.getData("systemData"),a=0;a<o.length;a++)if(o[a].id==t){Lyte.arrayUtils(this.getData("renderItems"),"push",o[a]),Lyte.arrayUtils(this.data.selectedIds,"push",o[a].id);break}},onBodyScroll:function(){}},actions:{openRoleModal:function(){this.$node.querySelector("lyte-dropdown").close(),this.getData("dataFetched")?this.$node.querySelector("lyte-modal").ltProp("show",!0):this.getDatas(!0)},preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},onSelectRole:function(e){for(var t=0,o=0;o<this.getData("renderItems").length;o++)this.getData("renderItems")[o].id==e&&(t=1);"single"==this.data.cxPropType&&(this.setData("renderItems",[]),this.setData("selectedIds",[])),0==t&&(Lyte.arrayUtils(this.getData("renderItems"),"push",store.peekRecord(this.data.cxPropRequestModel,e)),Lyte.arrayUtils(this.data.selectedIds,"push",e)),this.$node.querySelector("lyte-modal").ltProp("show",!1),this.setData("dropdownSelected",JSON.stringify(this.data.selectedIds))},closeModal:function(){this.$node.querySelector("lyte-modal").ltProp("show",!1)}},getValue:function(){for(var e=[],t=0;t<this.getData("renderItems").length;t++)e.push({id:this.getData("renderItems")[t].id,name:this.getData("renderItems")[t].name});return e},validate:function(){return 0!=this.getData("renderItems").length||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),!1)},setValue:function(){this.setData("selectedIds",[]),this.setData("renderItems",[]);for(var e=0;e<this.data.cxPropValue.length;e++)this.data.cxPropValue[e].id&&(Lyte.arrayUtils(this.data.renderItems,"push",store.peekRecord(this.data.cxPropRequestModel,this.data.cxPropValue[e].id)?store.peekRecord(this.data.cxPropRequestModel,this.data.cxPropValue[e].id):"${CURRENTUSERROLE}"==this.data.cxPropValue[e].id?Object.assign(this.data.cxPropValue[e],{display_label:I18n.getMsg("current.logged.in.user.role")}):this.data.cxPropValue[e]),Lyte.arrayUtils(this.data.selectedIds,"push",this.data.cxPropValue[e].id))},getDatas:function(e){var t=this;store.findAll(this.data.cxPropRequestModel,this.data.cxPropQueryParam,!0,!0,this.data.cxPropCustomData).then((function(o){var a=Lyte.deepCopyObject(o);!t.getData("cxPropLoggedInUserRoleRequired")||a[0]&&"${CURRENTUSERROLE}"==a[0].id||Lyte.arrayUtils(a,"insertAt",0,{name:I18n.getMsg("current.logged.in.user.role"),display_label:I18n.getMsg("current.logged.in.user.role"),id:"${CURRENTUSERROLE}"}),t.setData("dataFetched",!0),t.setData("systemData",a),t.setData("showLoading",!1),e?t.$node.querySelector("lyte-modal").ltProp("show",!0):t.$node.querySelector("lyte-dropdown").open()}))},observesModel:function(){this.setData("dataFetched",!1),this.setData("systemData",[]),this.setData("showLoading",!0),this.setData("renderItems",[]),this.setData("selectedIds",[]),this.setData("dropdownSelected",void 0)}.observes("cxPropRequestModel"),observesValue:function(){var e=this;if(this.getData("cxPropValue"))if(this.getData("dataFetched"))this.setValue();else{if(this.data.cxPropValue.length)for(var t=0;t<this.data.cxPropValue.length;t++)if("${CURRENTUSERROLE}"==this.data.cxPropValue[t].name){this.data.cxPropValue[t]={name:I18n.getMsg("current.logged.in.user.role"),display_label:I18n.getMsg("current.logged.in.user.role"),id:"${CURRENTUSERROLE}"};break}Lyte.arrayUtils(this.data.renderItems,"push",this.data.cxPropValue),Lyte.arrayUtils(this.data.selectedIds,"push",this.data.cxPropValue.map((e=>e.id))),store.findAll(this.data.cxPropRequestModel,this.data.cxPropQueryParam,!0,!0,this.data.cxPropCustomData).then((function(t){var o=Lyte.deepCopyObject(t);!e.getData("cxPropLoggedInUserRoleRequired")||o[0]&&"${CURRENTUSERROLE}"==o[0].id||Lyte.arrayUtils(o,"insertAt",0,{name:I18n.getMsg("current.logged.in.user.role"),display_label:I18n.getMsg("current.logged.in.user.role"),id:"${CURRENTUSERROLE}"}),e.setData("dataFetched",!0),e.setData("systemData",o),e.setData("showLoading",!1),e.setValue()}))}}.observes("cxPropValue.[]","cxPropRequestModel").on("init"),observesSystemData:function(){this.data.dataFetched&&this.setData("modalContent",store.peekAll("role").filter((function(e){return!e.reporting_to})))}.observes("systemData.[]").on("init")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-twitter-component",{_template:'<template tag-name="crux-twitter-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"><template is="if" value="{{cxPropValue}}"><template case="true"><template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"> <a id="{{cxPropId}}" data-zcqa="dummy" class="cxLink" href="{{if(cxPropTwitterUrl,cxPropTwitterUrl,concat(cruxRebrandProperty(\'TW_URL\'),\'/\',cruxEncodeURL(cxPropValue)))}}" target="_blank" onclick="{{action(\'stopPropagation\')}}">{{cxPropValue}}</a> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template></template></template></template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template></template><template case="create"><template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showHideInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'showHideInfoTooltip\')}}"> <template is="yield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent">{{cxPropInfoTooltip}}</lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue cxTwitterInputWrapper {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" class="cxW100Per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput cxBoxInputInsideLabel\',\'cxFlatInput\')}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="horizontal" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" data-zcqa="{{cxPropZcqa}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-label="@" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-autofocus="{{cxPropAutofocus}}"></lyte-input> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"> <span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span> </div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="yield" yield-name="errorYield"> <lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield> </template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"componentDynamic",position:[2,1]},{type:"attr",position:[2,3]},{type:"if",position:[2,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[2,5]},{type:"if",position:[2,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[2,7]},{type:"if",position:[2,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","cxPropAppearance","cxProAutofocus","cxPropClass","cxPropDirection","cxPropDisabled","cxPropEmptyValue","cxPropEnableLbind","cxPropFrom","cxPropId","cxPropInputClass","cxPropLayout","cxPropMandatory","cxPropMaskingProperties","cxPropMaxlength","cxPropName","cxPropPlaceholder","cxPropReadonly","cxPropTabIndex","cxPropTabindex","cxPropViewInfoTooltip","cxPropWrapperClass","cxPropZcqa","lyteUnbound","lyteViewPort","cxPropValue","cxPropAria","cxPropAriaAttributes","cxPropClearErrorMessage","cxPropErrorClass","cxPropErrorMessage","cxPropErrorSpanClass","cxPropErrorYield","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropPreventFocusOnError","cxPropField","cxPropFieldKey","cxPropInfoTooltip","cxPropLabelClass","cxPropShowWarning","cxPropWarningIconClass","cxPropWarningMessage","cxPropTooltip","cxPropTooltipClass","cxPropTooltipConfig","isError","tooltip","cxPropTwitterUrl","cxPropAutocomplete","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropButtonTextInsideElement","cxPropMandatory","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropButtonYield","cxPropUpdateDelay","cxPropCallbackDelay","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxProAutofocus:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropId:Lyte.attr("string",{default:""}),cxPropInputClass:Lyte.attr("string"),cxPropLayout:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropMaskingProperties:Lyte.attr("object"),cxPropMaxlength:Lyte.attr("number"),cxPropName:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string"),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropWrapperClass:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),lyteUnbound:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorClass:Lyte.attr("string"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropWarningMessage:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string"),cxPropTooltipClass:Lyte.attr("string"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),isError:Lyte.attr("boolean",{default:!1}),tooltip:Lyte.attr("string"),cxPropTwitterUrl:Lyte.attr("string"),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropAriaErrorProperties:Lyte.attr("object")}},actions:{stopPropagation:function(){event.stopPropagation()}},getValue:function(){return this.data.cxPropValue},validate:function(){var e=this.data.cxPropValue;if(!e||!e.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(!this.data.cxPropPreventFocusOnError&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);if(e&&!this.validateLength(e))return!1;var t=this.isValidTwitter(e);return t?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(this.data.cxPropField.field_label))),!this.data.cxPropPreventFocusOnError&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),t},resetData:function(){this.$node.querySelector("lyte-input").ltProp("value","")},methods:{onChange:function(){this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.data.cxPropValue)}},observeErrorMessage:function(){this.setData("isError",""!=this.data.cxPropErrorMessage)}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){this.observeError("lyte-input","cxErrorBox")}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-input"),"create"==this.data.cxPropFrom&&this.setFocusUtil()}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeClassFn:function(e){this.observeClass("lyte-input",e)}.observes("cxPropClass","lyteViewPort").on("didConnect"),observeRenderFn:function(e){this.observeRender()}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-user-component",{_template:'<template tag-name="crux-user-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(name,cxPropMaskingProperties)}} </template><template case="false"> <span class="lv_data_user cxViewUserValue" onmouseover="{{action(\'showBCard\')}}" onmouseout="{{action(\'hideBCard\')}}"><lyte-text lt-prop-value="{{name}}"></lyte-text></span> <span class="cxViewUserTimestamp">{{formattedDateValue}}</span> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template></template> </template><template case="false">{{cxPropEmptyValue}}</template></template> </template><template case="criteria"></template><template case="filter"> <crux-user-dropdown id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" cx-prop-disabled="{{cxPropDisabled}}" cx-prop-class="{{cxPropClass}}" cx-prop-boundary="{{cxPropBoundary}}" cx-prop-type="{{cxPropType}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" cx-prop-searchable="true" cx-prop-selected-users="{{selectedUsers}}" cx-prop-no-user-label="{{if(ifEquals(cxPropType,\'multiple\'),if(cxPropPlaceholder,cxPropPlaceholder,cruxGetI18n(\'crm.label.select.user\')),\'\')}}" cx-prop-placeholder="{{if(ifEquals(cxPropType,\'single\'),if(cxPropPlaceholder,cxPropPlaceholder,cruxGetI18n(\'crm.label.select.user\')),\'\')}}" cx-prop-selected="{{selectedIds}}" cx-prop-zcqa="{{cxPropZcqa}}" on-user-hide="{{method(\'userHide\')}}" on-user-add="{{method(\'onChange\',\'add\')}}" on-user-remove="{{method(\'onChange\',\'remove\')}}" cx-prop-login-user-required="{{cxPropLoginUser}}" cx-prop-filter-options="{{userFilter}}" cx-prop-selected-user="{{selectedUser}}" on-user-selected="{{method(\'onChange\',\'select\')}}" cx-prop-filter-selected="{{cxPropFilterSelected}}" cx-prop-filterable="{{cxPropFilterable}}" cx-prop-filter-user-value="category" cx-prop-filter-system-value="id" cx-prop-appearance="{{cxPropAppearance}}" cx-prop-query-param="{{criteria}}" cx-prop-max-limit="{{cxPropMaxLimit}}" cx-prop-freeze="{{cxPropFreeze}}" on-user-before-show="{{method(\'beforeShowHandling\')}}" on-user-drop-limit-err="{{method(\'onUserDropLimitErr\')}}" cx-prop-dropdown-icon-class="{{cxPropDropdownIconClass}}" cx-prop-is-subordinate="{{cxPropIsSubordinate}}" cx-prop-prevent-parent-scroll="{{cxPropPreventParentScroll}}" cx-prop-skip-user-field-request="{{cxPropSkipUserFieldRequest}}" on-user-show="{{method(\'filterUserDropdownShow\')}}"></crux-user-dropdown> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxFieldLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}" style="{{if(cxPropWidth,concat(\'width: \',cxPropWidth),\'\')}}"> <div class="cxUserComponent {{if(cxPropHideLookupIcon,\'\',\'cxBoxWithRightIcon\')}} cxBoxContainsDropdown {{if(cxPropShowCloseIcon,\'cxUserCompWithClearIcon\')}} {{cxPropWrapperClass}}"> <div class="cxBoxLeftContent"> <crux-user-dropdown cx-prop-mandatory="{{cxPropMandatory}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" cx-prop-type="{{cxPropType}}" cx-prop-searchable="true" cx-prop-selected-users="{{selectedUsers}}" cx-prop-no-user-label="{{cxPropNoUserLabel}}" cx-prop-placeholder="{{cxPropPlaceholder}}" cx-prop-selected="{{selectedIds}}" cx-prop-zcqa="{{cxPropZcqa}}" on-user-add="{{method(\'addcruxuserMultiple\')}}" on-user-remove="{{method(\'removecruxuserMultiple\')}}" cx-prop-login-user-required="{{cxPropLoginUser}}" cx-prop-selected-user="{{selectedUser}}" on-user-selected="{{method(\'onChange\',\'select\')}}" cx-prop-disabled="{{cxPropDisabled}}" cx-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" cx-prop-criteria="{{userCriteria}}" cx-prop-search-criteria="{{cxPropUserSearchCriteria}}" cx-prop-filter-options="{{cxPropFilterOptions}}" cx-prop-filter-user-value="category" cx-prop-filter-system-value="id" cx-prop-filterable="{{cxPropFilterable}}" on-user-show="{{method(\'createUserDropdownShow\')}}" cx-prop-filter-selected="{{cxPropFilterSelected}}" class="{{cxPropClass}} {{if(isError,\'cxErrorBox\')}} {{if(expHandlers(cxPropValue,\'&amp;&amp;\',cxPropValue.name),\'cxUserCompValueSelected\')}}" cx-prop-exclude="{{cxPropExclude}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" cx-prop-max-limit="{{cxPropMaxLimit}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" cx-prop-query-param="{{criteria}}" cx-prop-freeze="{{cxPropFreeze}}" cx-prop-dropdown-icon-class="{{if(cxPropShowDisabledIcon,cxPropDisabledIconClass,cxPropDropdownIconClass)}}" on-user-before-show="{{method(\'beforeShow\')}}" cx-prop-is-subordinate="{{cxPropIsSubordinate}}" onfocus="{{action(\'setFocusClass\')}}" onfocusout="{{action(\'setFocusClass\',\'hide\')}}" cx-prop-scope="{{cxPropScope}}" on-user-hide="{{method(\'userHide\')}}" cx-prop-forced-fetch="{{cxPropForcedFetch}}" cx-prop-is-dropdown-icon-node="{{if(cxPropShowDisabledIcon,true,cxPropIsDropdownIconNode)}}" cx-prop-dropdown-icon-node-class="{{if(cxPropShowDisabledIcon,concat(\'cxElementsDisabledIcon \',cxPropDisabledIconClass),cxPropDropdownIconNodeClass)}}" cx-prop-box-class="{{cxPropBoxClass}}" cx-prop-skip-user-field-request="{{cxPropSkipUserFieldRequest}}"></crux-user-dropdown> <template is="if" value="{{expHandlers(cxPropHideLookupIcon,\'!\')}}"><template case="true"> <crux-user-lookup class="{{cxPropClass}}" style="display: none;" cx-prop-criteria="{{userCriteria}}" cx-prop-search-criteria="{{cxPropUserSearchCriteria}}" cx-prop-filterable="{{cxPropFilterable}}" cx-prop-filter-options="{{cxPropFilterOptions}}" on-assign="{{method(\'onLookupSelected\')}}" cx-prop-selected-id="{{selectedUserString}}" cx-prop-type="{{cxPropType}}" cx-prop-selected-ids="{{selectedUsersString}}" cx-prop-exclude="{{cxPropExclude}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" cx-prop-max-limit="{{cxPropMaxLimit}}" cx-prop-filter-system-value="{{cxPropFilterSystemValue}}" cx-prop-filter-user-value="{{cxPropFilterUserValue}}" cx-prop-query-params="{{criteria}}" on-custom-request="{{method(\'customRequest\')}}" cx-prop-custom-request="{{cxPropCustomRequest}}" on-body-before-show="{{method(\'beforeShow\')}}" cx-prop-is-subordinate="{{cxPropIsSubordinate}}" cx-prop-transition="{{cxPropTransition}}" cx-prop-offset="{{cxPropOffset}}" cx-prop-forced-fetch="{{cxPropForcedFetch}}" cx-prop-title="{{cxPropTitle}}" on-lookup-close="{{method(\'userLookupClose\')}}" cx-prop-selected-filter-option="{{cxPropFilterSelected}}"></crux-user-lookup> </template></template> <template is="if" value="{{expHandlers(expHandlers(cxPropValue,\'&amp;&amp;\',cxPropValue.name),\'&amp;&amp;\',cxPropShowCloseIcon)}}"><template case="true"> <div class="cxBoxCloseIconWrap cxFlexCenter"> <div class="cxBoxCloseIcon cP {{cxPropClearIconClass}}" onclick="{{action(\'clearSelection\')}}" data-zcqa="cxClearSelectionZcqa"></div> </div> </template></template> </div> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{expHandlers(cxPropShowLookupIcon,\'||\',expHandlers(cxPropHideLookupIcon,\'!\'))}}"><template case="true"> <div tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" class="cxBoxRightIcon cxFlexCenter {{cxPropRightIconClass}}" data-zcqa="{{if(cxPropImgZcqa,cxPropImgZcqa,concat(\'img_lookup_\',cxPropZcqa))}}" onclick="{{action(\'showcruxuserLookup\')}}" onkeydown="{{action(\'showLookupOnKeyEvent\',event,this)}}"> <div class="cxUserCompIcon {{if(cxPropDisabled,\'\',\'cP\')}} {{cxPropIconClass}}"></div> </div> </template></template> </div> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" cx-prop-error-yield="{{cxPropErrorYield}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"> <lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]},{type:"text",position:[3,0]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},criteria:{dynamicNodes:[],additional:{next:"filter"}},filter:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"if",args:["cxPropWidth",{type:"helper",value:{name:"concat",args:["'width: '","cxPropWidth"]}},"''"]}}}},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1,1]},{type:"componentDynamic",position:[3,1,1,1]},{type:"attr",position:[3,1,1,3]},{type:"if",position:[3,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1,1,5]},{type:"if",position:[3,1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,1,5]},{type:"if",position:[3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropIgnoreEmptyValue","cxPropErrorOnHovercard","lyteViewPort","cxPropValue","cxPropIdSelector","cxPropNameSelector","cxPropFrom","cxPropEmptyValue","selectedUsers","selectedIds","cxPropZcqa","cxPropLoginUser","cxPropType","cxPropContactServerUrl","cxPropErrorMessage","filterOptions","cxPropIsBusinessCard","userFilter","cxPropField","cxPropFieldKey","selectedUser","cxPropId","userCriteria","cxPropUserSearchCriteria","cxPropFilterOptions","cxPropClearErrorMessage","cxPropFilterable","cxPropLabelClass","cxPropBoundary","userCriteria","cxPropDisableOnHoverForView","selectedUserString","selectedUsersString","cxPropTabIndex","cxPropTabindex","lyteUnbound","cxPropClass","cxPropTooltip","isError","cxPropAppearance","cxPropErrorYield","cxPropInfoTooltip","cxPropPlaceholder","cxPropExclude","cxPropShowCloseIcon","cxPropImgZcqa","criteria","cxPropAria","cxPropAriaAttributes","cxPropMaxLimit","cxPropFilterable","cxPropFilterSystemValue","cxPropFilterUserValue","cxPropShowBusCard","cxPropNoUserLabel","cxPropMaskingProperties","cxPropOpenDropdown","cxPropTooltipConfig","cxPropTooltipClass","cxPropDisabled","cxPropShowTooltip","cxPropShowBusinessCard","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropQueryParam","cxPropFilterSelected","cxPropReturnFullObjectOnGet","cxPropCustomRequest","cxPropErrorClass","cxPropFreeze","cxPropErrorSpanClass","cxPropClearIconClass","cxPropIconClass","cxPropDropdownIconClass","cxPropReadonly","cxPropRightIconClass","cxPropWrapperClass","cxPropLayout","cxPropWidth","cxPropIsSubordinate","cxPropAutocomplete","cxPropViewInfoTooltip","cxPropScope","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropTransition","cxPropOffset","cxPropDateValue","formattedDateValue","cxPropTitle","cxPropMandatory","cxPropUserDetailViewPath","cxPropForcedFetch","cxPropUserRecord","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropIsDropdownIconNode","cxPropDropdownIconNodeClass","cxPropPreventFocusOnError","cxPropHideLookupIcon","tooltip","cxPropUserCriteria","cxPropPreventParentScroll","cxPropBoxClass","cxPropSkipUserFieldRequest","cxPropUserTimeZone","cxPropButtonYield","cxPropTimeFormat","cxPropAriaErrorProperties"],data:function(){return{cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("object"),cxPropIdSelector:Lyte.attr("string",{default:"id"}),cxPropNameSelector:Lyte.attr("string",{default:"name"}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropEmptyValue:Lyte.attr("string",{default:""}),selectedUsers:Lyte.attr("array",{default:[]}),selectedIds:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropLoginUser:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string"),cxPropContactServerUrl:Lyte.attr("string",{default:"undefined"!=typeof crmConstants?crmConstants.contactsPhotoURL:""}),cxPropErrorMessage:Lyte.attr("string",{default:""}),filterOptions:Lyte.attr("array",{default:[{id:"ActiveUsers",category:"Active"}]}),cxPropIsBusinessCard:Lyte.attr("boolean"),userFilter:Lyte.attr("array",{default:[{id:"AllUsers",category:_cruxUtils.getI18n("crm.globalsearch.option.all")},{id:"ActiveUsers",category:_cruxUtils.getI18n("webform.status.Active")},{id:"DeactiveUsers",category:_cruxUtils.getI18n("Inactive")},{id:"NotConfirmedUsers",category:_cruxUtils.getI18n("crm.user.component.unconfirmed")}]}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),selectedUser:Lyte.attr("object",{default:{}}),cxPropId:Lyte.attr("string",{default:""}),userCriteria:Lyte.attr("string"),cxPropUserSearchCriteria:Lyte.attr("string"),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropBoundary:Lyte.attr("object",{default:{}}),userCriteria:Lyte.attr("string",{default:""}),cxPropDisableOnHoverForView:Lyte.attr("boolean",{default:!1}),selectedUserString:Lyte.attr("string",{default:""}),selectedUsersString:Lyte.attr("array",{default:[]}),cxPropTabIndex:Lyte.attr("string",{default:"0"}),cxPropTabindex:Lyte.attr("string",{default:"0"}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.select.user")}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropShowCloseIcon:Lyte.attr("boolean",{default:!1}),cxPropImgZcqa:Lyte.attr("string"),criteria:Lyte.attr("object",{default:{}}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaxLimit:Lyte.attr("number",{default:500}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropFilterSystemValue:Lyte.attr("string",{default:"id"}),cxPropFilterUserValue:Lyte.attr("string",{default:"category"}),cxPropShowBusCard:Lyte.attr("boolean"),cxPropNoUserLabel:Lyte.attr("string"),cxPropMaskingProperties:Lyte.attr("object"),cxPropOpenDropdown:Lyte.attr("boolean",{default:!1}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropShowTooltip:Lyte.attr("boolean",{default:!0}),cxPropShowBusinessCard:Lyte.attr("boolean",{default:!0}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropQueryParam:Lyte.attr("object",{default:{}}),cxPropFilterSelected:Lyte.attr("string",{default:"ActiveUsers"}),cxPropReturnFullObjectOnGet:Lyte.attr("boolean",{default:!1}),cxPropCustomRequest:Lyte.attr("boolean",{default:!1}),cxPropErrorClass:Lyte.attr("string"),cxPropFreeze:Lyte.attr("boolean",{default:!1}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropClearIconClass:Lyte.attr("string"),cxPropIconClass:Lyte.attr("string",{default:"dropdown"}),cxPropDropdownIconClass:Lyte.attr("string",{default:"dropdown"}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropRightIconClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropLayout:Lyte.attr("string"),cxPropWidth:Lyte.attr("string"),cxPropIsSubordinate:Lyte.attr("boolean",{default:!1}),cxPropAutocomplete:Lyte.attr("boolean",{default:!0}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropScope:Lyte.attr("string",{default:""}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropTransition:Lyte.attr("object",{default:{animation:"slideFromTop",duration:"0.5"}}),cxPropOffset:Lyte.attr("object",{default:{top:"0px",left:"center"}}),cxPropDateValue:Lyte.attr("string"),formattedDateValue:Lyte.attr("string"),cxPropTitle:Lyte.attr("string",{default:""}),cxPropMandatory:Lyte.attr("boolean"),cxPropUserDetailViewPath:Lyte.attr("string",{default:"undefined"!=typeof Crm&&Crm.getCrmBasePath()&&-1!=Crm.getCrmBasePath().indexOf("crm")?Crm.getCrmBasePath()+"/settings/users/":""}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),cxPropUserRecord:Lyte.attr("object"),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropIsDropdownIconNode:Lyte.attr("boolean",{default:!1}),cxPropDropdownIconNodeClass:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropHideLookupIcon:Lyte.attr("boolean",{default:!1}),tooltip:Lyte.attr("string"),cxPropUserCriteria:Lyte.attr("string"),cxPropPreventParentScroll:Lyte.attr("boolean"),cxPropBoxClass:Lyte.attr("string",{default:""}),cxPropSkipUserFieldRequest:Lyte.attr("boolean",{default:!1}),cxPropUserTimeZone:Lyte.attr("string"),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropTimeFormat:Lyte.attr("string",{default:"undefined"!=typeof Crm?Crm.userDetails.TIME_FORMAT:"hh:mm a"}),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){"create"!=this.getData("cxPropFrom")&&"view"!=this.data.cxPropFrom&&(this.data.cxPropType||(this.data.cxPropType="multiple"),"filter"===this.getData("cxPropFrom")&&Lyte.arrayUtils(this.getData("userFilter"),"push",{id:"DeletedUsers",category:_cruxUtils.getI18n("DeletedUser")})),"create"==this.data.cxPropFrom&&this.setFocusUtil()},observeQueryParam:function(){var e=this.data.cxPropQueryParam||{};"create"!=this.getData("cxPropFrom")&&"view"!=this.data.cxPropFrom&&this.getData("cxPropField")&&20==this.getData("cxPropField").ui_type&&(e.include_lite_users=!0),this.setData("criteria",e)}.observes("cxPropQueryParam").on("init"),actions:{showBCard:function(){if(!this.multiUsers||this.data.cxPropShowBusCard){var e=this.getData("cxPropValue");if(e&&this.data.cxPropShowBusinessCard){var t=e[this.getData("cxPropIdSelector")],o=document.getElementById("popoverTooltip");o||((o=document.createElement("crux-user-tooltip")).setAttribute("id","popoverTooltip"),this.$node.append(o)),o.setData({userId:t,usermetaInfo:e,cxPropUserDetailViewPath:this.data.cxPropUserDetailViewPath}),o.component.show(this.$node.querySelector("span"),!this.getData("cxPropIsBusinessCard"))}}},hideBCard:function(){if(!this.multiUsers){var e=document.getElementById("popoverTooltip");e&&e.component.hide()}},showcruxuserLookup:function(){if(this.data.cxPropDisabled)return!1;var e=this.$node.querySelector("crux-user-lookup");e&&e.component.setData("cxPropShow",!0)},clearSelection:function(){this.setData("cxPropUserRecord",{}),this.setData("cxPropValue",{});var e=this.$node.querySelector("crux-user-dropdown");e.setData("cxPropSelected",""),this.$node.querySelector("lyte-dropdown").setData("ltPropDisplayValue",e.component.data.cxPropNoUserLabel),this.getMethods("onClear")&&this.executeMethod("onClear")},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},setFocusClass:function(e){"hide"==e?(this.removeFocus(),this.$node.querySelector(".cxBoxContainsDropdown").classList.remove("cxBoxDropdownFocused"),this.$node.querySelector(".cxBoxContainsDropdown").classList.remove("cxBoxInputFocused")):(this.$node.querySelector(".cxUserComponent").classList.add("cxBoxDropdownFocused"),this.$node.querySelector(".cxBoxContainsDropdown").classList.add("cxBoxInputFocused"))},showLookupOnKeyEvent:function(e,t){" "===e.key&&(e.preventDefault(),t.click())}},getValue:function(){if(this.$node.querySelector("#cruxLoadingElem"))return this.data.cxPropValue&&this.data.cxPropValue.users?this.data.cxPropValue.users:this.data.cxPropValue&&this.data.cxPropField&&this.data.cxPropValue[this.data.cxPropField.api_name]?this.data.cxPropValue[this.data.cxPropField.api_name]:this.data.cxPropValue;var e=this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers");return e&&e.length||"create"==this.data.cxPropFrom&&"multiple"==this.data.cxPropType?this.getValueToRet(e,!0):this.getValueToRet(this.$node.querySelector("crux-user-dropdown").cxProp("selectedUser"),!0)},resetData:function(){"multiple"==this.getData("cxPropType")||"multisearch"==this.getData("cxPropType")?this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers",[]):(this.$node.querySelector("lyte-dropdown").ltProp("selected",""),this.setData("cxPropValue",{}))},valueObserver:function(){if("view"!=this.getData("cxPropFrom")){if(this.getData("cxPropValue"))if(this.getData("cxPropValue").hasOwnProperty("name"))"${CURRENTUSER}"==this.getData("cxPropValue").name?this.setData("selectedUser",{id:"${CURRENTUSER}",full_name:_cruxUtils.getI18n("current.logged.in.user")}):this.setData("selectedUser",Object.assign({full_name:this.data.cxPropValue.name},this.getValueToRet(this.data.cxPropValue)));else if(this.getData("cxPropValue").users&&this.getData("cxPropValue").users.hasOwnProperty("name"))"${CURRENTUSER}"==this.getData("cxPropValue").users.name?this.setData("selectedUsers",[{id:"${CURRENTUSER}",full_name:_cruxUtils.getI18n("current.logged.in.user")}]):this.setData("selectedUsers",[{id:this.getData("cxPropValue").users.id,full_name:this.getData("cxPropValue").users.name}]);else if(this.getData("cxPropValue").users||this.data.cxPropField&&this.data.cxPropValue[this.data.cxPropField.api_name]){var e=[],t=!0,o=[];d=(d=store.peekRecord("field",this.data.cxPropField.id))||this.data.cxPropField;for(var a=this.data.cxPropValue.users?this.data.cxPropValue.users:this.data.cxPropValue[this.data.cxPropField.api_name],r=0;r<a.length;r++)d&&a[r][d.multiuserlookup?d.multiuserlookup.connectedlookup_apiname:d.api_name]?e.push({id:a[r][d.multiuserlookup?d.multiuserlookup.connectedlookup_apiname:d.api_name].id,full_name:a[r][d.multiuserlookup?d.multiuserlookup.connectedlookup_apiname:d.api_name].name}):a[r].name||"${CURRENTUSER}"==a[r].id||(t=!1,o.push(a[r].id)),"${CURRENTUSER}"==a[r].name||"${CURRENTUSER}"==a[r].id?e.push({id:"${CURRENTUSER}",full_name:_cruxUtils.getI18n("current.logged.in.user")}):a[r].name&&e.push({id:a[r].id,full_name:a[r].name});if(t)this.setData("selectedUsers",e);else{var i=this;store.findAll("user",{ids:o.join(",")}).then((function(){for(var t=0;t<_users.length;t++)if("${CURRENTUSER}"!=a[t].id){var o=store.peekRecord("user",a[t].id);e.push({id:o.id,full_name:o.full_name})}i.setData("selectedUsers",e)}),(function(){i.setData("selectedUsers",e)}))}}else if(this.data.cxPropValue.hasOwnProperty("id")){i=this;store.findRecord("user",this.data.cxPropValue.id).then((function(e){i.setData("selectedUser",e[0])}))}else this.setData("selectedUser",{});else this.setData("selectedUser",{});if("create"==this.data.cxPropFrom){if(null==this.getData("cxPropType")&&(this.data.cxPropType="single"),this.getData("cxPropField")&&(8==this.getData("cxPropField").ui_type||"ownerlookup"==this.data.cxPropField.data_type)){var s=this.getData("cxPropField").module[0]?this.getData("cxPropField").module[0].profiles:this.getData("cxPropField").module.profiles;if(s){var p=[],l=[];for(r=0;r<s.length;r++)p.push(s[r].id),l.push(s[r].name);var n={comparator:"in",field:"profile.id",value:p};this.data.cxPropUserCriteria?this.setData("userCriteria",JSON.stringify([n,JSON.parse(this.data.cxPropUserCriteria)])):this.setData("userCriteria",JSON.stringify([n])),this.data.cxPropUserSearchCriteria?this.setData("cxPropUserSearchCriteria","("+this.data.cxPropUserSearchCriteria+"and(profile:in:"+l.join()+"))"):this.setData("cxPropUserSearchCriteria","(profile:in:"+l.join()+")")}}this.data.cxPropUserCriteria&&!this.data.userCriteria&&this.setData("userCriteria",this.data.cxPropUserCriteria),this.observeAndSetTooltip(),"create"==this.data.cxPropFrom&&this.setFocusUtil()}}else{if(this.getData("cxPropValue"))if((e=this.getData("cxPropValue")).hasOwnProperty("id")||e.name&&"${CURRENTUSER}"==e.name){if("${CURRENTUSER}"==e.name)this.multiUsers=!0,this.setData("name",_cruxUtils.getI18n("current.logged.in.user"));else if(this.setData({name:e[this.getData("cxPropNameSelector")]}),this.data.cxPropDateValue){var c="ddd, D MMM YYYY ";c+=this.data.cxPropTimeFormat.replace("a","A"),this.setData("formattedDateValue",this.data.cxPropUserTimeZone?$L.moment(this.data.cxPropDateValue).timezone(this.data.cxPropUserTimeZone).i18N(c):$L.moment(this.data.cxPropDateValue).i18N(c))}}else{this.multiUsers=!0,e=e.users||this.data.cxPropField&&e[this.data.cxPropField.api_name]||[];var d,u=[];d=(d=store.peekRecord("field",this.data.cxPropField.id))||this.data.cxPropField;for(r=0;r<e.length;r++)u.push(e[r][d.multiuserlookup?d.multiuserlookup.connectedlookup_apiname:d.api_name][this.getData("cxPropNameSelector")]);this.setData("name",u.join(","))}}}.observes("cxPropValue","cxPropFrom","cPropDisabled").on("init"),validate:function(){var e=this.getData("cxPropField");return"create"==this.getData("cxPropFrom")?null==this.$node.querySelector("crux-user-dropdown")?!!this.validateMandatory(null==this.data.cxPropValue)&&(this.setData("cxPropErrorMessage",""),!0):("single"!=this.data.cxPropType||this.validateMandatory(0==this.$node.querySelector("crux-user-dropdown").length||0==Object.keys(this.$node.querySelector("crux-user-dropdown").cxProp("selectedUser")).length))&&("multiple"!=this.data.cxPropType||this.validateMandatory(0==this.$node.querySelector("crux-user-dropdown").length||0==Object.keys(this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers")).length))?(this.setData("cxPropErrorMessage",""),!0):(this.$node.scrollIntoView(),this.$node.querySelector("lyte-dropdown").open(),this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.empty.check",e.field_label)),!1):!(this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers")&&0==this.$node.querySelector("crux-user-dropdown").cxProp("selectedUsers").length&&"single"!=this.data.cxPropType&&!this.getData("cxPropIgnoreEmptyValue"))||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),!1)},methods:{onChange:function(e,t,o,a){var r;this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),"single"==this.getData("cxPropType")?(r=this.getValueToRet(o),this.setData("cxPropUserRecord",o)):r=this.getValueToRet(a),this.setData("cxPropValue",r),this.getMethods("onValueChange")&&("create"==this.getData("cxPropFrom")?this.executeMethod("onValueChange",r,e):this.executeMethod("onValueChange",r)),this.$node.querySelector(".cxUserComponent")&&this.$node.querySelector(".cxUserComponent").classList.add("cxBoxDropdownFocused")},filterUserDropdownShow:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},createUserDropdownShow:function(e,t){$L(t.$node).closest(".cxUserComponent").addClass("cxBoxDropdownOpened"),$L(t.$node).closest(".cxUserComponent").addClass("cxBoxDropdownFocused"),this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},onLookupSelected:function(e){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage","");var t=this.getData("cxPropField");if(null!=t&&445==t.ui_type||"single"!=this.getData("cxPropType"))this.setData("selectedUsers",e);else{var o=this.$node.querySelector("crux-user-lookup");o&&o.setData("cxPropSelectedId",e.id);var a=this.$node.querySelector("crux-user-dropdown");a&&a.setData("cxPropSelectedUser",e),this.setData("cxPropUserRecord",e)}this.setData("cxPropValue",this.getValue()),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"add"),this.$node.querySelector(".cxUserComponent").classList.add("cxBoxDropdownFocused")},addcruxuserMultiple:function(e,t,o){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.setData("selectedUsers",o),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"add")},removecruxuserMultiple:function(e,t,o){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.setData("selectedUsers",o),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue(),"remove")},hideInfoTooltip:function(){this.showHideInfoTooltip()},customRequest:function(e,t,o,a,r){if(this.getMethods("onCustomRequest"))return this.executeMethod("onCustomRequest",e,t,o,a,r,this.data.cxPropField)},beforeShowHandling:function(){this.getMethods("onBeforeShow")&&this.executeMethod("onBeforeShow",arguments[0],arguments[1],this)},onUserDropLimitErr:function(){this.getMethods("maxUserDropLimitErr")&&this.executeMethod("maxUserDropLimitErr")},beforeShow:function(){if(this.data.cxPropReadonly)return!1;if(!this.data.cxPropAutocomplete){var e=this.$node.querySelector("crux-user-lookup");if(e){var t=e.component;t.setData("cxPropShow",!0)}return!1}return this.getMethods("onBeforeShow")?this.executeMethod("onBeforeShow",arguments[0],arguments[1],this):void 0},hideUserDropdown:function(e,t){e&&"Tab"==e.key&&($L(t.$node).closest(".cxUserComponent").removeClass("cxBoxDropdownOpened"),$L(t.$node).closest(".cxUserComponent").removeClass("cxBoxDropdownFocused"))},userLookupClose:function(){this.$node.querySelector(".cxBoxRightIcon").focus(),this.getMethods("onUserLookupModalClose")&&this.executeMethod("onUserLookupModalClose")},userHide:function(e,t){this.$node.querySelector(".cxUserComponent")&&(this.$node.querySelector(".cxUserComponent").classList.remove("cxBoxDropdownOpened"),this.$node.querySelector(".cxUserComponent").classList.remove("cxBoxDropdownFocused")),this.getMethods("onHide")&&this.executeMethod("onHide"),this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)}},observeQueryParam:function(){var e=this.data.cxPropQueryParam||{};"create"!=this.getData("cxPropFrom")&&"view"!=this.data.cxPropFrom&&(this.data.cxPropType||(this.data.cxPropType="multiple"),this.getData("cxPropField")&&20==this.getData("cxPropField").ui_type&&(e.include_lite_users=!0),"filter"===this.getData("cxPropFrom")&&-1==this.data.userFilter.cruxFindIndexOfObject("id","DeletedUsers")&&Lyte.arrayUtils(this.getData("userFilter"),"push",{id:"DeletedUsers",category:_cruxUtils.getI18n("DeletedUser")})),this.setData("criteria",e)}.observes("cxPropQueryParam").on("init"),observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"));var e=$L(this.$node).find(".cxBoxContainsDropdown");this.getData("isError")?e.addClass("cxErrorBoxWithRightIcon"):e.removeClass("cxErrorBoxWithRightIcon")}.observes("cxPropErrorMessage"),getValueToRet:function(e,t){if(Array.isArray(e)){for(var o=[],a=0;a<e.length;a++)"${CURRENTUSER}"==e[a].id?o.push({name:e[a].id}):o.push({id:e[a].id,name:e[a].full_name});return o}return"${CURRENTUSER}"==e.id?{name:e.id}:e.id?this.data.cxPropReturnFullObjectOnGet?Object.assign(e,{name:e.full_name?e.full_name:e.name}):{id:e.id,name:e.full_name}:void 0},binduserLookup_multiple:function(e,t){var o=this.$node.querySelector("crux-user-dropdown");if(o){var a=o.component.getData("cxPropSelectedUsers"),r=[];if(a.forEach((function(e){r.push(e.id)})),"add"==t)r.push(e.id);else{var i=r.indexOf(e.id);Lyte.arrayUtils(r,"removeAt",i,1)}r&&this.setData("userRecordids",r)}},observeSelectedUser:function(){var e=this.getData("selectedUser");if(0==Object.keys(e).length)if(this.getData("selectedUsers")&&this.getData("selectedUsers").length>0){var t=this.getData("selectedUsers").map((function(e){return e.id}));this.setData("selectedUsersString",t)}else this.setData("selectedUserString",""),this.setData("selectedUsersString",[]);else this.setData("selectedUserString",e.id)}.observes("selectedUser","selectedUsers").on("init"),observeMandatory:function(){this.observeMandatoryMixin("lyte-dropdown")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),openDropdownObserver:function(){this.getData("cxPropOpenDropdown")&&setTimeout(function(){this.$node.querySelector("lyte-dropdown").open()}.bind(this),100)}.observes("cxPropOpenDropdown").on("didConnect"),didConnect:function(){if(this.removeFocusBind=this.removeFocus.bind(this),"create"==this.data.cxPropFrom&&window.addEventListener("click",this.removeFocusBind,!0),this.$node.querySelector("crux-user-dropdown")&&this.data.cxPropCustomRequest){var e=this;this.$node.querySelector("crux-user-dropdown").setMethods({onCustomUserRequest:function(t,o,a,r,i){return e.executeMethod("onCustomRequest",t,o,a,r,i,e.data.cxPropField)}})}if(this.$node.querySelector("crux-user-dropdown")&&this.data.cxPropCustomRequest){e=this;this.$node.querySelector("crux-user-dropdown").setMethods({onCustomUserRequest:function(t,o,a,r,i){return e.executeMethod("onCustomRequest",t,o,a,r,i,e.data.cxPropField)}})}},removeFocus:function(){var e=this.$node?this.$node.querySelector(".cxUserComponent"):null;e&&e.querySelector("lyte-dropdown")&&!e.querySelector("lyte-dropdown").getData("ltPropIsOpen")&&e.classList.remove("cxBoxDropdownFocused")},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),didDestroy:function(){"create"==this.data.cxPropFrom&&window.removeEventListener("click",this.removeFocusBind,!0)},mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-dropdown")}.observes("cxPropMandatoryType").on("didConnect"),observeTabindex:function(){this.observeTabindexMixin()}.observes("cxPropTabindex","cxPropTabIndex").on("init"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-user-tooltip",{_template:'<template tag-name="crux-user-tooltip"> <lyte-popover lt-prop-origin-elem="{{originElem}}" lt-prop-show-close-button="false" lt-prop-freeze="false" lt-prop-scrollable="false" lt-prop-wrapper-class="cxInfoPopover" lt-prop-type="{{toolTipType}}" on-before-show="{{method(\'showPopover\')}}" lt-prop-duration="0" lt-prop-show="{{show}}" lt-prop-max-width="500px" lt-prop-content-padding="15px 10px" lt-prop-placement="{{placement}}"> <template is="yield" yield-name="popover"> <lyte-popover-content class="cxUserbcpopup" onclick="{{action(\'popoverbodyclicked\')}}"> <div class="crm-font-regular"> <template is="if" value="{{ifEquals(userData.status,\'deleted\')}}"><template case="true"><div class="cxRedCol cxUserbcpopupContent ">{{cruxGetI18n(\'crm.user.deleted\')}}</div></template><template case="false"><template is="if" value="{{ifEquals(userData.status,\'closed\')}}"><template case="true"><div class="cxRedCol cxUserbcpopupContent ">{{cruxGetI18n(\'crm.account.closed\')}}</div></template></template></template></template> <div class="cxUpSpace"> <div class=" cxUpSizeWrap cxVat"><img class="cxUpSize cxVam" src="{{getCruxUsrImgUrlByZuid(userData.zuid)}}"></div> <div class="cxbcUserNameWrap cxVam"> <div class="{{if(clientUser,\'\',\'cxbcUserNamePointer\')}} cxbcUserName" data-zcqa="cxUserName" onclick="{{action(\'openUserPage\')}}">{{userData.full_name}}</div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(userData.type__s,\'==\',&quot;Client Portal User&quot;),\'&amp;&amp;\',expHandlers(userData.status,\'==\',&quot;disabled&quot;)),\'&amp;&amp;\',cxPropDisplayPortalInfo)}}"><template case="true"> <template is="if" value="{{userData.zuid}}"><template case="true"><span class="cxUserTooltipRedBadge">Disabled</span></template><template case="false"><span class="cxUserTooltipRedBadge">Deleted</span></template></template> </template></template> <template is="if" value="{{cruxAnd(userData.role,userData.profile,cruxOr(negate(portalUser,cruxAnd(portalUser,ifNotEquals(userData.type__s,\'Regular User\',cxPropDisplayPortalInfo)))))}}"><template case="true"><div class=" cxUpSpaceContent" data-zcqa="cxUserProf"> <span class="{{if(ifEquals(userData.type__s,\'Client Portal User\'),\'cxUserTooltipClientPortalUserLabel\',\'\')}}">{{userData.role.name}}</span>, {{userData.profile.name}} </div></template></template> </div> </div> <div class="cxUserbcInfo "> <template is="if" value="{{userData.email}}"><template case="true"><div class="cxUserbcInfoItem "> <div class="cxEmailIconWrap cxAlignCenter"><span class="cxEmailIcon"></span></div> <span class="cxUserbcInfoContent" data-zcqa="cxUserMail"> <a href="mailto:{{userData.email}}">{{userData.email}}</a> </span> </div></template></template> <template is="if" value="{{userData.phone}}"><template case="true"><div class="cxPhoneIconWrapParent "> <div class="cxPhoneIconWrap cxAlignCenter cxVam"><span class="cxPhoneIcon"></span></div> <span class="cxPhoneIconContent cxVam">{{userData.phone}}</span> </div></template></template> <template is="if" value="{{userData.mobile}}"><template case="true"> <div class="cxMobileIconWrapParent"> <div class="cxMobileIconWrap cxAlignCenter"> <span class="cxMobileIcon cxVam"></span> </div> <span class="cxPhoneIconContent cxVam">{{userData.mobile}}</span> </div> </template></template> </div> <template is="if" value="{{expHandlers(expHandlers(isChatEnabled,\'&amp;&amp;\',expHandlers(isCurrentUser,\'!\')),\'&amp;&amp;\',userData.zuid)}}"><template case="true"> <div class="cxDashBorder"></div> <div id="actionLayer"> <div class="cxBcActionIcons" lt-prop-title="{{cruxGetI18n(\'crm.start.chat\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;top&quot;}" onclick="{{action(\'chat\')}}" data-zcqa="cxUserChat"> <span class="cxBcChatIcon"></span> </div> <div class="cxBcActionIcons" lt-prop-title="{{cruxGetI18n(\'crm.start.call\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;top&quot;}" onclick="{{action(\'call\')}}" data-zcqa="cxUserAudioCall"> <span class="cxBcCallIcon"></span> </div> <div class="cxBcActionIcons" lt-prop-title="{{cruxGetI18n(\'crm.start.video.call\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;top&quot;}" onclick="{{action(\'videoCall\')}}" data-zcqa="cxUserVideoCall"> <span class="cxVideoCallIcon"></span> </div> </div> </template></template> </div> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,1,0]},{type:"attr",position:[1,1,3,3,1]},{type:"text",position:[1,1,3,3,1,0]},{type:"attr",position:[1,1,3,3,3]},{type:"if",position:[1,1,3,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,3,5]},{type:"if",position:[1,1,3,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"text",position:[0,1,0]},{type:"text",position:[0,3]}]}},default:{}},{type:"attr",position:[1,1,5,1]},{type:"if",position:[1,1,5,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0,3,1]},{type:"text",position:[0,3,1,0]}]}},default:{}},{type:"attr",position:[1,1,5,3]},{type:"if",position:[1,1,5,3],cases:{true:{dynamicNodes:[{type:"text",position:[0,3,0]}]}},default:{}},{type:"attr",position:[1,1,5,5]},{type:"if",position:[1,1,5,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}},{type:"attr",position:[1,1,7]},{type:"if",position:[1,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[3,1]},{type:"attr",position:[3,3]},{type:"attr",position:[3,5]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["originelemRef","userId","usermetaInfo","cxPropUserDetailViewPath","cxPropDisplayPortalInfo","originElem","toolTipType","show","userData","isCurrentUser","isChatEnabled","portalUser"],data:function(){return{originelemRef:Lyte.attr("string"),userId:Lyte.attr("string"),usermetaInfo:Lyte.attr("object",{default:{}}),cxPropUserDetailViewPath:Lyte.attr("string",{default:"undefined"!=typeof Crm&&Crm.getCrmBasePath()&&-1!=Crm.getCrmBasePath().indexOf("crm")?Crm.getCrmBasePath()+"/settings/users/":""}),cxPropDisplayPortalInfo:Lyte.attr("boolean",{default:!0}),originElem:Lyte.attr("string"),toolTipType:Lyte.attr("string"),show:Lyte.attr("boolean",{default:!1}),userData:Lyte.attr("object"),isCurrentUser:Lyte.attr("boolean",{default:!1}),isChatEnabled:Lyte.attr("boolean",{default:!1}),portalUser:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.CLIENT_ACCOUNT})}},methods:{showPopover:function(){var e=this.data.userId,t=store.peekRecord("user",e);if(null==t)return store.findRecord("user",e,{type__s:"Regular User,Client Portal User"},!1,!0,{tempApiVersion:"V7"}).then(function(t){!t||t&&!Object.keys(t).length?store.findRecord("user",e,{type__s:"Regular User,Client Portal User"},!1,!0).then(function(t){if(!t||t&&!Object.keys(t).length){var o=this.data.usermetaInfo;o&&o.name&&(o.full_name=o.name,delete o.name,o.id=e,store.pushPayload("user",o))}else t[0].client_user=!0;this.setData("show",!0)}.bind(this)):this.setData("show",!0)}.bind(this)),this.setData("show",!1),!1;this.setData({isChatEnabled:"undefined"!=typeof crmConstants&&crmConstants.isCliqEnabled,isCurrentUser:"undefined"!=typeof Crm&&e==Crm.userDetails.USER_ID,userData:t,clientUser:t.client_user})}},actions:{openUserPage:function(){this.data.clientuser||"undefined"!=typeof Crm&&Crm.userDetails.CLIENT_ACCOUNT||this.data.cxPropUserDetailViewPath&&window.open(this.data.cxPropUserDetailViewPath+this.data.userId,"_blank")},chat:function(){WebMessanger.chat(this.getData("userData").zuid)},call:function(){WebMessanger.startAudioCall(this.getData("userData").zuid)},videoCall:function(){WebMessanger.startVideoCall(this.getData("userData").zuid)},popoverbodyclicked:function(){!event.target.closest("#actionLayer")&&event.stopPropagation()}},show:function(e,t){if(clearTimeout(this.hideTimeout),!e.isSameNode(this.data.originelemRef)&&this.setData("show",!1),this.setOriginElem(e),this.setData("originElem",".userBcOrigin"),t){var o=e.getBoundingClientRect().x,a=window._lyteUiUtils&&window._lyteUiUtils.getRTL()?["right","left"]:["left","right"];t=a[0];(o-350<=0||o+e.offsetWidth+350<window.innerWidth)&&(t=a[1]),this.setData({placement:t,toolTipType:"callout"})}else this.setData({placement:void 0,toolTipType:"box"});this.hideTimeout=setTimeout(function(){if(this.setData("show",!0),!this.data.listenersAdded){var e=document.querySelector(".cxInfoPopover .lytePopover");e.addEventListener("mouseleave",this._leaveFunc),e.addEventListener("mouseenter",this._enterFunc),this.setData("listenersAdded",!0)}}.bind(this),300)},hide:function(){clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.removeOriginElem(),this.setData("show",!1)}.bind(this),300)},setOriginElem:function(e){this.removeOriginElem(),e.classList.add("userBcOrigin"),this.setData("originElemRef",e)},removeOriginElem:function(){for(var e=document.getElementsByClassName("userBcOrigin"),t=e.length,o=0;o<t;o++)e[0].classList.remove("userBcOrigin");this.setData("originElemRef",void 0)},_leaveFunc:function(){var e=document.getElementsByTagName("crux-user-tooltip")[0].component;e.setData("inPopover",!1),e.hide()},_enterFunc:function(){var e=document.getElementsByTagName("crux-user-tooltip")[0].component;clearTimeout(e.hideTimeout),e.setData("inPopover",!0),e.setData("show",!0)},didDestroy:function(){clearTimeout(this.hideTimeout)}}),Lyte.Component.registerHelper("getCruxUsrImgUrlByZuid",(function(e){return"undefined"!=typeof RebrandLinkUtil?"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb":""})),Lyte.Component.register("crux-file-size-component",{_template:'<template tag-name="crux-file-size-component"> <div class="cxBoxWithRightIcon cxFileSizeCompContainer"> <lyte-number class="cxBoxInput cxBoxLeftContent" lt-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-value="{{cxPropInputValue}}" on-value-change="{{method(\'onInputValueChange\')}}" on-focus="{{method(\'onFocusInput\')}}" on-blur="{{method(\'onBlurInput\')}}"></lyte-number> <lyte-dropdown class="cxBoxDropdown cxFileSizeDropdown" lt-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-user-value="name" lt-prop-system-value="value" lt-prop-options="{{cxPropOptions}}" lt-prop-selected="{{cxPropSelectedOption}}" on-option-selected="{{method(\'onOptionSelected\')}}" on-show="{{method(\'onShow\')}}" on-hide="{{method(\'onHide\')}}"></lyte-dropdown> </div> <template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropValue","cxPropInputValue","cxPropOptions","cxPropField","cxPropSelectedOption","cxPropErrorMessage","cxPropDecimalAllowed","cxPropTabIndex","cxPropTabindex","cxPropAriaErrorProperties"],data:function(){return{cxPropValue:Lyte.attr("number",{default:1e11}),cxPropInputValue:Lyte.attr("string"),cxPropOptions:Lyte.attr("array",{default:[{name:_cruxUtils.getI18n("bytes"),value:"0"},{name:_cruxUtils.getI18n("KB"),value:"1"},{name:_cruxUtils.getI18n("MB"),value:"2"}]}),cxPropField:Lyte.attr("object",{default:{}}),cxPropSelectedOption:Lyte.attr("string"),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropDecimalAllowed:Lyte.attr("boolean",{default:!0}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropAriaErrorProperties:Lyte.attr("object")}},getValue:function(){return this.$node.cxProp("value")},validate:function(){var e,t=this.getData("cxPropInputValue"),o=this.getData("cxPropField");if(this.setData("cxPropErrorMessage",""),!t||""===t)return this.setData("isError",!0),this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.custombutton.valid.weburl.check")),!1;if("create"===this.getData("cxPropFrom")){var a=this.validateNumberField(t,o,this.data.maxlength,this.data.cxPropMaxvalue,this.data.cxPropMinvalue),r=this.$node.querySelector("lyte-number"),i=this.$node.querySelector("lyte-input");return!1!==a||this.data.cxPropPreventFocusOnError||(i?i.focus():r&&r.focus()),a}if(!(t&&!isNaN(parseInt(t))||this.data.cxPropIgnoreEmptyValue))return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(o.field_label))),this.$node.querySelector("input").focus(),!1;if(!this.getData("cxPropAllowNegativeValue")&&(-1!==t.indexOf("-")||-1!==t.indexOf("+"))||!this.data.cxPropDecimalAllowed&&-1!==t.indexOf("."))return this.showAlert(_cruxUtils.getI18n("crm.mb.field.common.splc")),this.$node.querySelector("input").focus(),!1;if("autonumber"===o.data_type||"bigint"===o.data_type){if(e="bigint"!==o.data_type||this.isValidInteger(t),t.indexOf(".")>-1||!e)return this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(o.field_label))),this.$node.querySelector("input").focus(),!1}else{if("integer"!==o.data_type)return(e=this.isValidDecimal(t))?(e=this.decimalLengthCheck(t))||(this.showAlert(_cruxUtils.getI18n("crm.field.valid.decimal.check2",Lyte.Component.registeredHelpers.cruxEncodeHTML(o.field_label),o.decimal_place)),this.$node.querySelector("input").focus()):this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(o.field_label))),e;if("criteria"===this.data.cxPropFrom||"filter"===this.data.cxPropFrom)return(e=this.isValidDecimal(t))&&(e=this.decimalLengthCheck(t,{decimal_place:void 0===this.data.cxPropField.decimal_place||"null"===this.data.cxPropField.decimal_place?2:this.data.cxPropField.decimal_place})),e||this.showAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(o.field_label))),e}return!0},actions:{},methods:{onInputValueChange:function(e){var t=e.newValue;this.setData("cxPropInputValue",t),this.byteConversion(),this.validate()},onOptionSelected:function(e,t){this.setData("cxPropSelectedOption",t),this.byteConversion()},onShow:function(e,t){this.$node.querySelector(".cxFileSizeCompContainer").classList.add("cxBoxInputFocused"),this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},onFocusInput:function(){this.$node.querySelector(".cxFileSizeCompContainer").classList.add("cxBoxInputFocused")},onHide:function(e,t){this.$node.querySelector(".cxFileSizeCompContainer").classList.remove("cxBoxInputFocused"),this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)},onBlurInput:function(){this.$node.querySelector(".cxFileSizeCompContainer").classList.remove("cxBoxInputFocused")}},observeErrorMessage:function(){this.setData("isError",""!==this.data.cxPropErrorMessage)}.observes("cxPropErrorMessage"),observeMandatory:function(){this.observeMandatoryMixin("lyte-number")}.observes("cxPropField.required","cxPropMandatory","cxPropFrom").on("didConnect"),observeIsError:function(){this.getData("isError")?this.$node.querySelector(".cxFileSizeCompContainer").classList.add("cxErrorBoxWithRightIcon"):this.$node.querySelector(".cxFileSizeCompContainer").classList.remove("cxErrorBoxWithRightIcon")}.observes("isError","lyteViewPort").on("didConnect"),didConnect:function(){this.setData("cxPropInputValue",this.getData("cxPropValue"))},byteConversion:function(){var e,t,o,a=this.$node.cxProp("inputValue");for(e=a.includes(".")?parseFloat(a):parseInt(a),t=parseInt(this.$node.cxProp("selectedOption"));t>0;)e*=1024,t--;o=e,this.setData("cxPropValue",o)}},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-website-component",{_template:'<template tag-name="crux-website-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <template is="if" value="{{cxPropValue}}"><template case="true"> <template is="if" value="{{cxPropMaskingProperties}}"><template case="true">{{cruxMaskValue(cxPropValue,cxPropMaskingProperties)}} </template><template case="false"><a class="cxLink" href="{{href}}" target="_blank" onclick="{{action(\'stopPropagation\')}}">{{cxPropValue}}</a><template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template></template></template> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true">{{cxPropEmptyValue}}</template></template></template></template></template><template case="create"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}}"> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lyte-hovercard="{{if(cxPropErrorOnHovercard,\'true\',\'false\')}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-title="{{tooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-class="cxBorderBottom {{cxPropInputClass}}" class="cxW100Per {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxInput\',\'cxFlatInput\')}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" on-value-change="{{method(\'onChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}"></lyte-input> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{cxPropButtonYield}}"><template case="true"><lyte-yield class="cxElemButtonYield" yield-name="buttonYield"></lyte-yield></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" cx-prop-origin-elem="#{{cxPropId}}" cx-prop-error-on-hovercard="{{cxPropErrorOnHovercard}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3,7]},{type:"if",position:[3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropErrorOnHovercard","cxPropAutofocus","lyteViewPort","cxPropValue","cxPropEmptyValue","cxPropFrom","cxPropLabel","cxPropPlaceholder","cxPropDisabled","cxPropReadonly","isError","cxPropAppearance","cxPropErrorMessage","cxPropField","cxPropFieldKey","cxPropId","cxPropName","cxPropClearErrorMessage","cxPropDirection","cxPropTabIndex","cxPropTabindex","cxPropZcqa","cxPropClass","lyteUnbound","cxPropLabelClass","href","cxPropTooltip","cxPropMaxlength","cxPropErrorYield","cxPropInfoTooltip","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropMaskingProperties","cxPropTooltipConfig","cxPropTooltipClass","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropWrapperClass","cxPropInputClass","cxPropErrorSpanClass","cxPropLayout","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropButtonTextInsideElement","cxPropMandatory","cxPropWarningMessage","cxPropShowWarning","cxPropWarningIconClass","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropPreventFocusOnError","cxPropButtonYield","cxPropUpdateDelay","cxPropCallbackDelay","cxPropAriaErrorProperties"],data:function(){return{cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropLabel:Lyte.attr("string"),cxPropPlaceholder:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean"),cxPropReadonly:Lyte.attr("boolean"),isError:Lyte.attr("boolean",{default:!1}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropTabIndex:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropClass:Lyte.attr("string",{default:""}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropLabelClass:Lyte.attr("string",{default:""}),href:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string"),cxPropMaxlength:Lyte.attr("number"),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropMaskingProperties:Lyte.attr("object"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropLayout:Lyte.attr("string"),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropButtonTextInsideElement:Lyte.attr("string"),cxPropMandatory:Lyte.attr("boolean"),cxPropWarningMessage:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropButtonYield:Lyte.attr("boolean",{default:!1}),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropAriaErrorProperties:Lyte.attr("object")}},getValue:function(){return"string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue")},validate:function(){var e=this.getData("cxPropField"),t="string"==typeof this.data.cxPropValue?this.getData("cxPropValue").trim():this.getData("cxPropValue");if(!t||!t.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.data.cxPropPreventFocusOnError||this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);if(t&&!this.validateLength(t))return!1;var o=this.isValidWebUrl(t);return o?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(e.field_label))),!this.data.cxPropPreventFocusOnError&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o},resetData:function(){this.setData("cxPropValue","")},methods:{onChange:function(){this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))},hideInfoTooltip:function(){this.showHideInfoTooltip()}},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),actions:{stopPropagation:function(){event.stopPropagation()},showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin("lyte-input"),"create"===this.data.cxPropFrom&&this.setFocusUtil()}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeClass:function(e){if("create"==this.data.cxPropFrom){var t=$L("lyte-input",this.$node);if(!t.length)return;e&&e.oldValue&&t.removeClass(e.oldValue),this.data.cxPropClass&&t.addClass(this.data.cxPropClass)}}.observes("cxPropClass","lyteViewPort").on("didConnect"),observeValue:function(){var e="http",t=this.getData("cxPropValue");t&&""!==t&&0!=t.indexOf(e)&&0!=t.indexOf("https")?this.setData("href","http://"+t):t&&this.setData("href",t)}.observes("cxPropValue").on("init"),observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observeDisabled:function(){this.observeAndSetTooltip()}.observes("cxPropDisabled").on("init"),mandatoryType:function(){this.observeMandatoryTypeMixin("lyte-input")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-image-component",{_template:'<template tag-name="crux-image-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="create"></template><template case="edit"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <span class="cxFieldLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </span> </template></template> <div class="cxElementValue {{if(cxPropDisabled,\'cxElementDisabled\',\'\')}} {{cxPropWrapperClass}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-tooltip-class="cxElementsTooltip {{cxPropTooltipClass}}"> <div class="cxImageElemWrapper {{if(expHandlers(images.length,\'>\',0),\'cxWrapperElemWithImage\',\'\')}} {{if(cxPropMinified,\'cxSFImgElemWrapper\',\'\')}} {{if(cxPropReadonly,\'cxImgElemReadOnly\',\'\')}} {{cxPropChildWrapperClass}} {{mandatoryClass}}"> <template is="if" value="{{negate(cxPropMinified)}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(images.length,\'===\',1),\'&amp;&amp;\',expHandlers(expHandlers(images[0].cxValidationStatus,\'===\',\'waiting_for_approval\'),\'||\',expHandlers(images[0].cxValidationStatus,\'===\',\'processing\')))}}"><template case="true"> <span data-zcqa="{{if(ifEquals(images[0].cxValidationStatus,\'waiting_for_approval\'),\'openPreview_view_waiting_for_approval_0\',\'openPreview_view_processing_0\')}}" class="cxMultiImageListViewCont cxImgCompValidationCont {{if(ifEquals(images[0].cxValidationStatus,\'waiting_for_approval\'),\'cxImgCompValidationWaiting\',\'cxImgCompValidationProcessing\')}}" onclick="{{action(\'validationImageClick\',images[0])}}" lt-prop-title="{{cxPropValidationTooltip}}" lt-prop-tooltip-style="font-size: 1.2rem;" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;, &quot;margin&quot; : &quot;2px&quot;, &quot;maxdisplaytime&quot;:3000}"></span> </template><template case="false"><template is="if" value="{{expHandlers(images.length,\'>\',0)}}"><template case="true"> <div class="cxMultiImageList {{cxPropClass}}"> <template is="for" items="{{images}}" item="item" index="index"> <div class="cxMultiImageSelector_{{cxPropId}} cxMultiImageListViewCont {{item.cxPropClass}} imagePreviewSelector" lt-prop-title="{{item.name}}" lt-prop-tooltip-style="font-size: 1.2rem;" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;, &quot;margin&quot; : &quot;2px&quot;, &quot;maxdisplaytime&quot;:3000}" data-lytecbox-title="{{item.name}}" data-lytecbox-dlink="{{item[cxPropDownloadKey]}}" data-lytecbox-href="{{item[cxPropPreviewUrlKey]}}" data-sel-image="{{index}}"> <template is="if" value="{{if(item[cxPropSourceKey],true)}}"><template case="true"><div data-zcqa="cxImagePreview_{{index}}" onclick="{{action(\'hoverContentClick\',item,index)}}" class="cxImgHoverContWrapper"> <span class="cxImageContHoverCont"></span> <template is="if" value="{{negate(cxPropReadonly)}}"><template case="true"><span class="cxImgCompDeleteIcon" data-zcqa="fieldView_delete_{{index}}"></span></template></template> </div></template></template> <template is="if" value="{{item[cxPropSourceKey]}}"><template case="true"><img src="{{item[cxPropSourceKey]}}" class="cxListPreviewImage" data-zcqa="cxImage_{{cxPropId}}_{{index}}" alt="{{item[cxPropSourceKey]}}" data-image-mode="{{cxPropDataImageMode}}"></template><template case="false"><span class="cxImgCompLoader"></span></template></template> </div> </template> </div> </template></template></template></template> <template is="if" value="{{expHandlers(expHandlers(images.length,\'!\'),\'||\',images[0][cxPropSourceKey])}}"><template case="true"> <lyte-button class="cxMultiImgUploadBtn" lt-prop-size="small" lt-prop-class="{{cxPropButtonClass}}" lt-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-appearance="default" lt-prop-name="{{cxPropName}}" data-zcqa="{{cxPropZcqa}}" lt-prop-disabled="{{disableBtn}}" onclick="{{action(\'openUploadPopup\')}}" lt-prop-title="{{if(cxPropReadonly,cxPropTooltip,if(maximumCountReached,cruxGetI18n(\'crm.imageupload.allowed.field.length\',cxPropAllowedCount),\'\'))}}"> <template is="registerYield" yield-name="text"> {{cxPropPlaceholder}} </template> </lyte-button> </template></template> <template is="if" value="{{cxPropShowDisabledIcon}}"><template case="true"><span class="{{if(cxPropDisabledIconClass,concat(cxPropDisabledIconClass,\' cxElementsDisabledIcon\'),\'cxImgListLockIcon cxImgListLockIconDefault\')}}" lt-prop-title="{{cxPropTooltip}}"></span></template></template> </template><template case="false"> <div class="cxSFImgListCont {{if(ifNotEquals(images.length,0),\'cxSFImgListContExpand\',\'\')}}"> <template is="if" value="{{ifEquals(images.length,0)}}"><template case="true"> <div class="cxSFImgListPlaceholder" onclick="{{action(\'openUploadPopup\')}}">{{cxPropPlaceholder}}</div> </template><template case="false"><template is="if" value="{{cxPropExpandImageView}}"><template case="true"> <div class="cxMultiImageList {{cxPropClass}}"> <template is="for" items="{{images}}" item="item" index="index"> <div class="cxMultiImageSelector_{{cxPropId}} cxMultiImageListViewCont {{item.cxPropClass}} imagePreviewSelector" lt-prop-title="{{item.name}}" lt-prop-tooltip-style="font-size: 1.2rem;" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;, &quot;margin&quot; : &quot;2px&quot;, &quot;maxdisplaytime&quot;:3000}" data-lytecbox-title="{{item.name}}" data-lytecbox-dlink="{{item[cxPropDownloadKey]}}" data-lytecbox-href="{{item[cxPropPreviewUrlKey]}}" data-sel-image="{{index}}"> <template is="if" value="{{cruxAnd(negate(cxPropReadonly),item[cxPropSourceKey])}}"><template case="true"><div class="cxImgHoverContWrapper" data-zcqa="cxImagePreview_{{index}}" onclick="{{action(\'hoverContentClick\',item,index)}}"> <span class="cxImageContHoverCont"></span> <span class="cxImgCompDeleteIcon" data-zcqa="fieldView_delete_{{index}}"></span> </div></template></template> <template is="if" value="{{item[cxPropSourceKey]}}"><template case="true"><img src="{{item[cxPropSourceKey]}}" class="cxListPreviewImage" data-zcqa="cxImage_{{cxPropId}}_{{index}}" alt="{{item[cxPropSourceKey]}}" data-image-mode="{{cxPropDataImageMode}}"></template><template case="false"><span class="cxImgCompLoader"></span></template></template> </div> </template> </div> </template><template case="false"> <div onclick="{{action(\'expandView\')}}" lt-prop-title="click to view images" class="cxSFImgListCollapseView cxLink"><span class="cruxSprite cxGalleryImageIcon cxSFShowMoreImageIcon"></span>{{cruxGetI18n("crm.label.subform.row.show.all",images.length)}}</div> </template></template></template></template> </div> <div onclick="{{action(\'openUploadPopup\')}}" class="cxSFImgListUploadIconDiv" data-zcqa="{{cxPropZcqa}}"> <span class="{{if( cxPropReadonly , \'cxImgListLockIcon cxSFImgListLockIcon {{if(cxPropShowDisabledIcon, \'cxPropDisabledIconClass\', \'\')}}\',\'cxSFImgListUploadIcon\')}}"></span> </div> </template></template> </div> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </div> </template><template case="view"> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> <template is="if" value="{{expHandlers(images,\'&amp;&amp;\',images.length)}}"><template case="true"> <a onclick="{{action(\'showImageOptions\')}}" lt-prop-title="{{tooltip}}"> <div class="cxImageViewWrap {{cxPropClass}}"> <div class="cxImageViewOverlay cxFlexCenter"> <div class="cxImageCameraIcon"></div> </div> <template is="if" value="{{images[0].alphabet}}"><template case="true"> <div class="cxImageViewNoImage {{noImageClass}}"> {{images[0].alphabet}} </div> </template><template case="false"> <img src="{{images[0][cxPropSourceKey]}}" alt="{{images[0][cxPropSourceKey]}}" class="cxImageViewImgElem {{images[0].cxPropClass}} {{cxPropClass}}" data-zcqa="{{images[0][cxPropZcqaSelector]}}" data-image-mode="{{cxPropDataImageMode}}"> </template></template> </div> </a> <div style="padding: 0px;" class="cxSingleImgContainer_{{cxPropId}}" data-lytecbox-title="{{images[0].name}}" data-lytecbox-dlink="{{images[0][cxPropDownloadKey]}}" data-lytecbox-href="{{images[0][cxPropSourceKey]}}" data-sel-image="1"></div> <lyte-menu on-before-open="{{method(\'menuOnBeforeOpen\')}}" on-open="{{method(\'attachLinksOpen\')}}" on-close="{{method(\'onAttachMenuClose\')}}" lt-prop-wrapper-class="attachLinksMenu" lt-prop-yield="true" lt-prop-query=".cxSingleImgContainer_{{cxPropId}}" lt-prop-event="keyup" lt-prop-show="{{singleOptionShow}}" lt-prop-freeze="false" id="cxImgSingleOptions_{{cxPropId}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="cxImgOptionMenu" data-zcqa="cxImgOptionMenu"> <template is="for" items="{{cxPropMenuOptions}}" item="item" index="index"> <lyte-menu-item id="{{item.system}}Image" onclick="{{action(\'singleImageDrop\',item.system)}}" class="crm-font-regular">{{item.display}}</lyte-menu-item> </template> </lyte-menu-body> </template> </lyte-menu> </template><template case="false"> <img src="{{concat(imgLoc,\'/cx_user_profile.svg\')}}" class="{{cxPropClass}}" data-image-mode="{{cxPropDataImageMode}}"> </template></template> </template><template case="false"> <div class="cxImageElemWrapper cxImageElemViewWrapper {{if(expHandlers(images.length,\'>\',0),\'cxWrapperElemWithImage\',\'\')}} {{cxPropWrapperClass}} {{mandatoryClass}}"> <template is="if" value="{{expHandlers(cxPropMinified,\'&amp;&amp;\',expHandlers(images.length,\'===\',0))}}"><template case="true"> <span class="cxImgCompViewEmptyIcon"></span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(images.length,\'===\',1),\'&amp;&amp;\',expHandlers(expHandlers(images[0].cxValidationStatus,\'===\',\'waiting_for_approval\'),\'||\',expHandlers(images[0].cxValidationStatus,\'===\',\'processing\')))}}"><template case="true"> <span data-zcqa="{{if(ifEquals(images[0].cxValidationStatus,\'waiting_for_approval\'),\'openPreview_view_waiting_for_approval_0\',\'openPreview_view_processing_0\')}}" class="cxMultiImageListViewCont cxImgCompValidationCont {{if(ifEquals(images[0].cxValidationStatus,\'waiting_for_approval\'),\'cxImgCompValidationWaiting\',\'cxImgCompValidationProcessing\')}}" onclick="{{action(\'validationImageClick\',images[0])}}" lt-prop-title="{{cxPropValidationTooltip}}" lt-prop-tooltip-style="font-size: 1.2rem;" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;, &quot;margin&quot; : &quot;2px&quot;, &quot;maxdisplaytime&quot;:3000}"></span> </template><template case="false"><template is="if" value="{{expHandlers(images.length,\'>\',0)}}"><template case="true"> <template is="if" value="{{cruxOr(negate(cxPropMinified),cxPropExpandImageView)}}"><template case="true"> <div class="cxMultiImageList"> <template is="for" items="{{images}}" item="item" index="index"> <div class="cxMultiImageSelector_{{cxPropId}} cxMultiImageListViewCont {{item.cxPropClass}} imagePreviewSelector" lt-prop-title="{{item.name}}" lt-prop-tooltip-style="font-size: 1.2rem;" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;, &quot;margin&quot; : &quot;2px&quot;, &quot;maxdisplaytime&quot;:3000}" data-lytecbox-title="{{item.name}}" data-lytecbox-dlink="{{item[cxPropDownloadKey]}}" data-lytecbox-href="{{item[cxPropPreviewUrlKey]}}" data-sel-image="{{index}}"> <div class="cxImgHoverContWrapper" data-zcqa="cxImagePreview_{{index}}" onclick="{{action(\'hoverContentClick\',item,index)}}"> <span class="cxImageContHoverCont"></span> <span class="cxImgCompPreviewIcon"></span> </div> <template is="if" value="{{item[cxPropSourceKey]}}"><template case="true"><img src="{{item[cxPropSourceKey]}}" alt="{{item[cxPropSourceKey]}}" class="cxListPreviewImage {{item.cxPropClass}} {{cxPropClass}}" data-zcqa="cxImage_{{cxPropId}}_{{index}}" data-image-mode="{{cxPropDataImageMode}}"></template><template case="false"><span class="cxImgCompLoader"></span></template></template> </div> </template> </div> </template><template case="false"> <div lt-prop-title="click to view images" class="cxSFImgListCollapseView cxLink" onclick="{{action(\'expandView\')}}"><span class="cruxSprite cxGalleryImageIcon cxSFShowMoreImageIcon"></span>{{cruxGetI18n("crm.label.subform.row.show.all",images.length)}}</div> </template></template> </template><template case="false"> <span class="cxImgCompViewEmptyIcon"></span> </template></template></template></template></template></template> </div> <template is="if" value="{{cxPropViewInfoTooltip}}"><template case="true"> <crux-view-info-tooltip cx-prop-field="{{cxPropField}}" cx-prop-value="{{cxPropValue}}" cx-prop-id="{{cxPropId}}"> <template is="yield" yield-name="viewInfoTooltipYield"> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{propField}}" prop-value="{{propValue}}"></lyte-yield> </template> </crux-view-info-tooltip> </template></template> </template></template> </template></template> <template is="if" value="{{uploadImage}}"><template case="true"> <crux-image-upload cx-prop-ajax="{{cxPropAjax}}" cx-prop-modal-properties="{{cxPropModalProperties}}" cx-prop-size-selector="stream" cx-prop-progress-status-colours="{{cxPropProgressStatusColours}}" cx-prop-param-name="{{cxPropParamName}}" cx-prop-max-files-count="{{cxPropAllowedCount}}" cx-prop-allowed-single-file-size="{{cxPropAllowedSingleFileSize}}" cx-prop-allowed-total-size="{{cxPropAllowedTotalSize}}" cx-prop-id="{{cxPropId}}" cx-prop-source-key="{{cxPropSourceKey}}" cx-prop-preview-url-key="{{cxPropPreviewUrlKey}}" cx-prop-download-key="{{cxPropDownloadKey}}" cx-prop-file-type="image" cx-prop-min-size="{{cxPropMinSize}}" cx-prop-max-size="{{cxPropMaxSize}}" cx-prop-aspect-ratio="{{cxPropAspectRatio}}" on-cx-file-upload-success="{{method(\'imageUploadComplete\')}}" cx-prop-type="{{cxPropType}}" cx-prop-wrapper-class="{{cxPropModalWrapperClass}}" cx-prop-accepted-types="{{cxPropAcceptedTypes}}" cx-prop-title="{{fileUploadTitle}}" on-confirm="{{method(\'setImages\')}}" on-file-success="{{method(\'onFileSuccessFn\')}}" on-crop-success="{{method(\'onCropSuccessMethod\')}}" on-add="{{method(\'onAddFile\')}}" on-before-show="{{method(\'onBeforeShowModal\')}}" on-remove="{{method(\'onRemoveFile\')}}" on-close="{{method(\'onCloseModalFn\')}}"></crux-image-upload> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{create:{dynamicNodes:[],additional:{next:"edit"}},edit:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,3]},{type:"if",position:[0,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[]}},default:{}}]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,3]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[5]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropFrom","cxPropDisabled","cxPropClass","cxPropValue","cxPropId","cxPropName","images","imgLoc","cxPropField","cxPropFieldKey","cxPropShowWarning","cxPropWarningMessage","cxPropWarningIconClass","cxPropLabelClass","cxPropAllowedCount","cxPropAllowedTotalSize","cxPropAllowedSingleFileSize","cxPropPlaceholder","isError","cxPropErrorMessage","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorYield","cxPropErrorClass","cxPropErrorSpanClass","cxPropClearErrorMessage","cxPropZcqa","cxPropTooltip","cxPropTooltipConfig","cxPropTooltipClass","cxPropInfoTooltip","cxPropViewInfoTooltip","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropMandatory","maximumCountReached","cxPropZcqaSelector","cxPropDownloadKey","cxPropPreviewUrlKey","cxPropSourceKey","cxPropReadonly","cxPropType","singleOptionShow","showPreviewImage","uploadImage","fileUploadTitle","cxPropMenuOptions","tooltip","cxPropAspectRatio","cxPropMinSize","cxPropMaxSize","cxPropPreviewZcqa","cxPropAjax","cxPropParamName","cxPropValidationTooltip","cxPropWrapperClass","cxPropTabindex","cxPropTabIndex","cxPropMinified","cxPropExpandImageView","cxPropModalWrapperClass","mandatoryClass","cxPropModalProperties","cxPropButtonClass","cxPropChildWrapperClass","cxPropSizeSelector","cxPropAcceptedTypes","cxPropProgressStatusColours","cxPropDataImageMode","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropAriaErrorProperties"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:""}),cxPropValue:Lyte.attr("array",{default:[]}),cxPropId:Lyte.attr("string",{default:"cxImage1"}),cxPropName:Lyte.attr("string",{default:""}),images:Lyte.attr("array",{default:[]}),imgLoc:Lyte.attr("string",{default:"dist/components/images"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningMessage:Lyte.attr("string"),cxPropWarningIconClass:Lyte.attr("string"),cxPropLabelClass:Lyte.attr("string",{default:""}),cxPropAllowedCount:Lyte.attr("number",{default:10}),cxPropAllowedTotalSize:Lyte.attr("string",{default:"20MB"}),cxPropAllowedSingleFileSize:Lyte.attr("string"),cxPropPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.FileuploadField.addNewImage")}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropErrorClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropZcqa:Lyte.attr("string"),cxPropTooltip:Lyte.attr("string"),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropTooltipClass:Lyte.attr("string"),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropViewInfoTooltip:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropMandatory:Lyte.attr("boolean"),maximumCountReached:Lyte.attr("boolean",{default:!1}),cxPropZcqaSelector:Lyte.attr("string",{default:"cxPropZcqa"}),cxPropDownloadKey:Lyte.attr("string",{default:"download_url"}),cxPropPreviewUrlKey:Lyte.attr("string",{default:"preview_url"}),cxPropSourceKey:Lyte.attr("string",{default:"src"}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"single"}),singleOptionShow:Lyte.attr("boolean",{default:!1}),showPreviewImage:Lyte.attr("boolean",{default:!1}),uploadImage:Lyte.attr("boolean",{default:!1}),fileUploadTitle:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.attach.upload.image")}),cxPropMenuOptions:Lyte.attr("array",{default:[{system:"preview",display:_cruxUtils.getI18n("crm.recordImage.previewimage")},{system:"upload",display:_cruxUtils.getI18n("crm.FileuploadField.addNewImage")},{system:"remove",display:_cruxUtils.getI18n("crm.fileuploader.removefile")}]}),tooltip:Lyte.attr("string"),cxPropAspectRatio:Lyte.attr("string",{default:"1:1"}),cxPropMinSize:Lyte.attr("number",{default:"auto"}),cxPropMaxSize:Lyte.attr("number",{default:"auto"}),cxPropPreviewZcqa:Lyte.attr("string",{default:"openPreview_view"}),cxPropAjax:Lyte.attr("object",{default:{url:"/Fileupload"}}),cxPropParamName:Lyte.attr("string",{default:"file"}),cxPropValidationTooltip:Lyte.attr("string",{default:""}),cxPropWrapperClass:Lyte.attr("string",{default:""}),cxPropTabindex:Lyte.attr("string"),cxPropTabIndex:Lyte.attr("string"),cxPropMinified:Lyte.attr("boolean",{default:!1}),cxPropExpandImageView:Lyte.attr("boolean",{default:!1}),cxPropModalWrapperClass:Lyte.attr("string",{default:""}),mandatoryClass:Lyte.attr("string",{default:""}),cxPropModalProperties:Lyte.attr("object",{default:{}}),cxPropButtonClass:Lyte.attr("string",{default:""}),cxPropChildWrapperClass:Lyte.attr("string",{default:""}),cxPropSizeSelector:Lyte.attr("string",{default:"size"}),cxPropAcceptedTypes:Lyte.attr("string",{default:".png,.jpg,.jpeg,.bmp,.gif,.PNG,.JPG,.JPEG,.BMP,.GIF"}),cxPropProgressStatusColours:Lyte.attr("object",{default:{count:"#3fbd5f",size:"#338CF0",list:"#338CF0"}}),cxPropDataImageMode:Lyte.attr("boolean",{default:!1}),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){"undefined"!=typeof crmConstants&&(this.data.imgLoc=crmConstants.fp_imagesStaticPathForLyte),"single"==this.data.cxPropType&&(this.setData("fileUploadTitle",_cruxUtils.getI18n("crm.general.select.photo")),this.data.cxPropDisabled&&this.setData("tooltip",_cruxUtils.getI18n("crm.lable.read.only"))),this.setData("noImageClass","cxImageViewNoImage"+(Math.floor(9*Math.random())+1)),(this.data.cxPropReadonly||this.data.cxPropDisabled)&&this.setData("disableBtn",!0),this.data.cxPropDisabled&&this.setData("cxPropShowDisabledIcon",!0),"create"===this.data.cxPropFrom&&this.setFocusUtil()},observeCountReach:function(){this.data.maximumCountReached?this.setData("disableBtn",!0):this.setData("disableBtn",!1)}.observes("maximumCountReached"),convertToBytes:function(){this.bytesConversion()}.observes("cxPropAllowedTotalSize").on("didConnect"),descriptionChange:function(e,t){"view"===this.data.cxPropFrom&&(this.manualSwitch=!0),this.getMethods("onEdit")&&this.executeMethod("onEdit","description",e,t),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},nameChange:function(e,t){"view"===this.data.cxPropFrom&&(this.manualSwitch=!0),this.getMethods("onEdit")&&this.executeMethod("onEdit","name",e,t),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},onDeleteFromPreview:function(e){"view"===this.data.cxPropFrom&&(this.manualSwitch=!0),this.removeTheFile(e)},onCropSuccessFn:function(e,t,o){var a=this.data.images.find((function(e){return e.id===t.id}));if(Lyte.objectUtils(a,"add",this.data.cxPropSourceKey,o),"view"===this.data.cxPropFrom&&(this.manualSwitch=!0),this.getMethods("onCropSuccess"))var r=this.executeMethod("onCropSuccess",e,t);if(r)for(var i=Object.keys(r),s=0;s<i.length;s++)Lyte.objectUtils(a,"add",i[s],r[i[s]]);a.isCropped=!0,Lyte.objectUtils(a,"add",this.data.cxPropPreviewUrlKey,o),Lyte.objectUtils(a,"add",this.data.cxPropDownloadKey,o),Lyte.objectUtils(a,"add",this.data.cxPropSourceKey,o),this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue())},closePreviewFn:function(){this.getMethods("onPreviewClose")&&this.executeMethod("onPreviewClose",this.$node)},getValue:function(){for(var e=this.data.images,t=[],o=this.data.cxPropValue.map((function(e){return e.id})),a=($L.extend(!0,{},this.idMapping),0);a<e.length;a++){var r=o.findIndex((function(t){return t===e[a].id})),i={Sequence_Number:a+1};-1!==r?(i={id:e[a].id,Sequence_Number:a+1},e[a].isCropped&&(i.Encrypted_Id=e[a].encryptedUploadId),o.splice(r,1)):i.Encrypted_Id=e[a].encryptedUploadId,e[a].isDescChanged&&(i.Description=e[a].description),e[a].isNameChanged&&(i.File_Name=e[a].name),t.push(i)}if(o.length){var s=[];o.forEach((function(e){s.push({id:e,_delete:null})})),t=t.concat(s)}return t},validate:function(){var e=this.data.images,t=this.data.cxPropFrom,o=this.data.cxPropAllowedCount;if("create"===t||"edit"===t){if(!this.validateMandatory(!e||0==e.length))return this.$node.querySelector("lyte-button").focus(),!1;if(void 0!==o&&e&&e.length>o)return this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.imageupload.allowed.field.length",o)),!1;if(this.data.cxPropAllowedTotalSize){var a=this.data.images,r=this.data.cxPropSizeSelector;if(a&&a.length)if(a.reduce((function(e,t){return e+Number(t[r])}),0)>this.totalFilesSizeInBytes)return this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.ImageuploadField.size.limit",this.data.cxPropAllowedTotalSize)),!1}return this.setData("cxPropErrorMessage",""),!0}},methods:{hideInfoTooltip:function(){this.showHideInfoTooltip()},menuOnBeforeOpen:function(){return!0},attachLinksOpen:function(){return!0},onAttachMenuClose:function(){this.setData("singleOptionShow",!1)},previewCloseCallback:function(){this.setData("showPreviewImage",!1)},imageUploadComplete:function(e){if("single"==this.data.cxPropType){var t=Object.assign({},{id:e[0].id});t.name=e[0].name,t.file=e[0],t[this.data.cxPropSourceKey]=e[0].preview_url,t[this.data.cxPropDownloadKey]=e[0].preview_url,this.setData("images",[t])}this.getMethods("onImageUpload")&&this.executeMethod("onImageUpload",this.data.images,this)},setImages:function(e){var t=!1;this.data.images.length===e.length&&JSON.stringify(this.data.images)===JSON.stringify(e)||(t=!0),this.setData("images",e),this.setData("maximumCountReached",this.data.images.length>=this.data.cxPropAllowedCount),this.getMethods("onAttach")&&this.executeMethod("onAttach",e),t&&this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage",""),this.setData("cxPropExpandImageView",!0)},onFileSuccessFn:function(e,t){if(this.getMethods("onFileSuccess"))return this.executeMethod("onFileSuccess",e,t)},onCropSuccessMethod:function(e,t){if(this.getMethods("onCropSuccess"))return this.executeMethod("onCropSuccess",e,t)},onAddFile:function(e){this.getMethods("onAddInModal")&&this.executeMethod("onAddInModal",e,this.$node)},onRemoveFile:function(e){this.getMethods("onRemoveInModal")&&this.executeMethod("onRemoveInModal",e,this.$node)},onBeforeShowModal:function(){if(this.getMethods("onBeforeShowUploadModal"))return this.executeMethod("onBeforeShowUploadModal",this.$node)},onCloseModalFn:function(){this.$node.querySelector("[tabindex]").focus(),this.getMethods("onModalClose")&&this.executeMethod("onModalClose",this.$node),this.setData("uploadImage",!1)}},actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)},hoverContentClick:function(e){event.stopPropagation(),event.target.classList.contains("cxImgCompDeleteIcon")?this.removeTheFile(e):this.showThisImagePreview(e)},showImageOptions:function(){this.data.cxPropDisabled||(this.data.images[0].alphabet?this.openImageUploadModal():this.setData("singleOptionShow",!0))},singleImageDrop:function(e){if("preview"==e)this.showThisImagePreview();else if("upload"==e)this.openImageUploadModal();else{var t;this.getMethods("onRemoveImage")?(t=this.executeMethod("onRemoveImage",this.data.images[0]))&&this.setData("images",[{alphabet:t}]):console.warn("onRemoveImage method is not provided to the component. This is a mandatorym method.")}},openUploadPopup:function(){this.openImageUploadModal()},validationImageClick:function(e){if(this.getMethods("onValidationImageClick"))return this.executeMethod("onValidationImageClick",e)},expandView:function(){this.getMethods("onExpandImageView")&&this.executeMethod("onExpandImageView",this),this.setData("cxPropExpandImageView",!0)}},removeTheFile:function(e){var t=this.data.images,o=t.findIndex((function(t){return t.id===e.id}));if(-1!==o&&Lyte.arrayUtils(t,"removeAt",o,1),this.setData("maximumCountReached",this.data.images.length>=this.data.cxPropAllowedCount),this.getMethods("onRemove"))return this.executeMethod("onRemove",e);this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getValue()),this.getData("cxPropClearErrorMessage")&&this.setData("cxPropErrorMessage","")},showThisImagePreview:function(e){if(this.getMethods("onBeforeImagePreview"))var t=this.executeMethod("onBeforeImagePreview",this);if(!1!==t){var o=this.data,a=o.cxPropType,r="single"===a?".cxSingleImgContainer_":".cxMultiImageSelector_",i=!o.cxPropReadonly;this.constructDataAndShow(e.id,o.images,r+o.cxPropId,i,a)}},openImageUploadModal:function(){this.setData("uploadImage",!0),this.$node.querySelector("crux-image-upload").openFileUpload($L.extend(!0,[],this.data.images))},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),observesValue:function(e){var t=e||{};if(this.manualSwitch&&"cxPropFrom"===t.item)this.manualSwitch=!1;else{"cxPropValue"===t.item&&(this.manualSwitch=!1),this.data.cxPropValue=this.data.cxPropValue||[],this.idMapping={};for(var o=this.data.cxPropValue,a=0;a<o.length;a++)this.idMapping[o[a].id]=o[a];this.setData("images",$L.extend(!0,[],this.data.cxPropValue));var r=this.data.cxPropValue.length>=this.data.cxPropAllowedCount;this.setData("maximumCountReached",r),r&&this.setData("disableBtn",r)}}.observes("cxPropValue.[]","cxPropFrom").on("init"),observeImages:function(){if("view"!==this.data.cxPropFrom&&!this.data.cxPropReadonly){var e=this;setTimeout((function(){e.sortImages()}),0)}}.observes("images").on("didConnect"),sortImages:function(){var e=$L(".cxMultiImageList",this.$node),t=this;e[0]&&(e.sortable("destory"),e.sortable({containment:"body",items:".cxImageContHoverCont",cancel:".cxImgCompDeleteIcon",onDrop:function(e,o,a,r,i,s){var p=t.data.images,l=Lyte.arrayUtils(p,"removeAt",r,1)[0];Lyte.arrayUtils(p,"insertAt",i,l),t.sortImages(),s.classList.remove("cxImgPrevListOnDrag"),e.classList.remove("cxImgListVwSortableSelectElemOndrag"),t.getMethods("onDrop")&&t.executeMethod("onDrop",t)},onDragStart:function(e,t){e.classList.add("cxImgListVwSortableSelectElemOndrag"),t.classList.add("cxImgPrevListOnDrag")}}))},didDestroy:function(){$L(".cxMultiImageList").sortable("destory")},observeView:function(){this.setData("cxPropExpandImageView",!1)},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage").on("init"),observeIsError:function(){this.$node.querySelector(".cxImageElemWrapper")&&(this.data.isError?this.$node.querySelector(".cxImageElemWrapper").classList.add("cxErrorBox"):this.$node.querySelector(".cxImageElemWrapper").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeMandatory:function(){this.observeMandatoryMixin(".cxImageElemWrapper");var e=this.$node.querySelector(".cxImageElemWrapper");e&&(e.classList.contains("mandatoryField")?this.setData("mandatoryClass","mandatoryField"):this.setData("mandatoryClass",""))}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeZcqa:function(){"create"==this.getData("cxPropFrom")&&"multiple"==this.getData("cxPropType")&&this.$node.querySelector("lyte-button")&&this.$node.querySelector("lyte-button").setAttribute("data-zcqa",this.getData("cxPropZcqa"))}.observes("cxPropZcqa","lyteViewPort").on("didConnect"),observeDisabled:function(){void 0===this.data.cxPropTooltip&&this.data.cxPropReadonly&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only")),this.setData("disableBtn",this.data.cxPropReadonly)}.observes("cxPropReadonly").on("init"),mandatoryType:function(){"red_accent_line"!=this.data.cxPropMandatoryType?(this.$node.querySelector(".cxMandatoryType")&&(this.$node.querySelector(".cxMandatoryType").style.color="red"),this.$node.querySelector(".cxMandatoryOptEnabled")||this.setData("mandatoryClass",this.data.mandatoryClass+" cxMandatoryOptEnabled")):this.$node.querySelector(".cxMandatoryOptEnabled")&&$L(this.$node.querySelector(".mandatoryField")).removeClass("cxMandatoryOptEnabled")}.observes("cxPropMandatoryType").on("didConnect"),observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation","crux-image-preview-util"]}),Lyte.Component.register("crux-error-message",{_template:'<template tag-name="crux-error-message"> <template is="if" value="{{expHandlers(cxPropErrorOnHovercard,\'!\')}}"><template case="true"> <template is="if" value="{{cxPropErrorYield}}"><template case="true"><lyte-yield yield-name="errorYield" error-message="{{errorMessage}}" cx-field="{{cxPropField}}" data-zcqa="{{concat(cxPropErrorZcqaPrefix,cxPropField.api_name,cxPropErrorZcqaSuffix)}}"></lyte-yield></template><template case="false"><span id="{{cxPropId}}" class="cruxErrMsg cruxErrorMsgDesc {{cxPropErrorSpanClass}} {{if(cxPropAriaErrorProperties.ariaErrorIcon,\'cxHasWarnIcon\',\'\')}}" data-zcqa="{{concat(cxPropErrorZcqaPrefix,cxPropField.api_name,cxPropErrorZcqaSuffix)}}"><span class="{{if(cxPropAriaErrorProperties.ariaErrorIcon,\'cxWarnIcon\',\'\')}}"></span>{{unescape(errorMessage)}}</span></template></template> </template><template case="false"> <lyte-hovercard lt-prop-auto-show="true" id="cx_error_hovercard" lt-prop-popover-wrapper-class="cxErrorHoverCard" lt-prop-origin-elem="{{cxPropOriginElem}}" lt-prop-max-width="550px"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content> <template is="if" value="{{cxPropErrorYield}}"><template case="true"><lyte-yield yield-name="errorYield" error-message="{{errorMessage}}" cx-field="{{cxPropField}}" data-zcqa="{{concat(cxPropErrorZcqaPrefix,cxPropField.api_name,cxPropErrorZcqaSuffix)}}"></lyte-yield></template><template case="false"><span id="{{cxPropId}}" class="cxErrorHoverCardMsg {{cxPropErrorSpanClass}} {{if(cxPropAriaErrorProperties.ariaErrorIcon,\'cxHasWarnIcon\',\'\')}}" data-zcqa="{{concat(cxPropErrorZcqaPrefix,cxPropField.api_name,cxPropErrorZcqaSuffix)}}"><span class="{{if(cxPropAriaErrorProperties.ariaErrorIcon,\'cxWarnIcon\',\'\')}}"></span>{{unescape(errorMessage)}}</span></template></template> </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,0]},{type:"text",position:[0,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,0]},{type:"text",position:[0,1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["cxPropOriginElem","cxPropErrorOnHovercard","errorMessage","cxPropId","cxPropErrorYield","cxPropField","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorSpanClass","cxPropErrorIconClass","cxPropAriaErrorProperties"],data:function(){return{cxPropOriginElem:Lyte.attr("string"),cxPropErrorOnHovercard:Lyte.attr("boolean",{default:!1}),errorMessage:Lyte.attr("string"),cxPropId:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object"),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorSpanClass:Lyte.attr("string"),cxPropErrorIconClass:Lyte.attr("string"),cxPropAriaErrorProperties:Lyte.attr("object")}},observeMessage:function(){var e=this.$node,t=e.querySelector("span");t&&this.data.errorMessage&&!this.data.cxPropErrorYield&&t.scrollWidth>e.offsetWidth&&$L(e).addClass("cxErrorMsgMultiLines")}.observes("errorMessage").on("didConnect")}),Lyte.Component.register("crux-lookup-popup",{_template:'<template tag-name="crux-lookup-popup"> <lyte-popover lt-prop-wrapper-class="cxLookupPopoverWrapper {{cxPropPopoverWrapperClass}}" lt-prop-show-close-button="false" lt-prop-show="{{showPopover}}" lt-prop-freeze="false" lt-prop-type="callout" lt-prop-bind-to-body="true" lt-prop-content-padding="0px" lt-prop-origin-elem=".cxVisibleLookup .cruxLookupPopover" lt-prop-duration="{{undefinedValue}}" on-close="{{method(\'closePopver\')}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <div class="cxLookupHoverWrapper"> <lyte-table lt-prop-yield="true" lt-prop-width="100%" lt-prop-height="100%" lt-prop-border="false"> <template is="registerYield" yield-name="yield"> <lyte-table-structure class="cxDivTable"> <lyte-tbody> <template is="for" items="{{bcFields}}" item="field" index="index"> <lyte-tr> <lyte-td class="cxLookupPopTd cxLookupViewLabel">{{field.field_label}}</lyte-td> <lyte-td class="cxLookupPopTd cxLookupViewValue"> <template is="if" value="{{data[field.api_name]}}"><template case="true"> <template is="if" value="{{data[field.api_name].name}}"><template case="true"> {{data[field.api_name].name}} </template><template case="false"><template is="if" value="{{expHandlers(field.data_type,\'==\',&quot;autonumber&quot;)}}"><template case="true"> {{data[field.api_name]}} </template><template case="false"><template is="if" value="{{expHandlers(field.ui_type,\'==\',250)}}"><template case="true"> <crm-richtext-component cx-prop-value="{{data[field.api_name]}}" cx-prop-from="view" show-more-button="false"></crm-richtext-component> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(field.data_type,\'==\',&quot;textarea&quot;),\'||\',expHandlers(field.data_type,\'==\',&quot;text-area&quot;))}}"><template case="true"> <lyte-text lt-prop-value="{{data[field.api_name]}}" style="max-width: 300px;"></lyte-text> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(fieldMapping[field.ui_type],\'&amp;&amp;\',expHandlers(fieldMapping[field.ui_type],\'!=\',&quot;text&quot;)),\'&amp;&amp;\',expHandlers(fieldMapping[field.ui_type],\'!=\',&quot;email&quot;))}}"><template case="true"> <template is="component" component-name="crux-{{fieldMapping[field.ui_type]}}-component" cx-prop-value="{{data[field.api_name]}}" cx-prop-field="{{field}}" cx-prop-iso-code="{{data.Currency}}" cx-prop-exchange-rate="{{data.Exchange_Rate}}" cx-prop-home-currency="{{data.$home_converted_currency[field.api_name]}}" cx-prop-formatted-currency="{{data.$formatted_currency[field.api_name]}}" cx-prop-call-allowed="{{cxPropCallAllowed}}"></template> </template><template case="false"> {{data[field.api_name]}} </template></template></template></template></template></template></template></template></template></template> </template><template case="false">-</template></template> </lyte-td> </lyte-tr> </template> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> </div> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["show","showPopover","module","bcFields","fieldMapping","undefinedValue","cxPropPopoverWrapperClass","cxPropModuleDisplayField","cxPropCallAllowed"],data:function(){return{show:Lyte.attr("boolean",{default:!1}),showPopover:Lyte.attr("boolean"),module:Lyte.attr("object"),bcFields:Lyte.attr("array"),fieldMapping:Lyte.attr("object"),undefinedValue:Lyte.attr("number",{default:void 0}),cxPropPopoverWrapperClass:Lyte.attr("string",{default:""}),cxPropModuleDisplayField:Lyte.attr("object",{default:"undefined"!=typeof crmConstants?crmConstants.moduleDisplayField:{}}),cxPropCallAllowed:Lyte.attr("boolean",{default:!0})}},observeShow:function(){if(this.getData("show")){var e=this.getData("data").Layout?this.getData("data").Layout.id:moduleRecordMapping[this.getData("module").module_name].layouts?moduleRecordMapping[this.getData("module").module_name].layouts[0].id:void 0;(e?store.findRecord("layout",e,{module:this.getData("module").api_name,mode:"business_card"},!0):store.findAll("layout",{module:this.getData("module").api_name,mode:"business_card"},!0)).then((e=>{if(e[0]&&e[0].sections){var t=e[0].sections.find((e=>"Business Card"===e.api_name));if(t&&t.fields){for(var o=t.fields,a=[],r=1;r<o.length;r++){var i=o[r],s=this.getData("cxPropModuleDisplayField")[this.getData("module").module_name]?this.getData("cxPropModuleDisplayField")[this.getData("module").module_name]:["Name"];i&&"ISCALLBILLABLE"!==i.column_name&&!1!==i.visible&&!s.includes(i.api_name)&&a.push(i)}this.setData("bcFields",a),this.setData("showPopover",!0)}}}))}else this.setData("showPopover",!1)}.observes("show"),methods:{closePopver:function(){setTimeout(function(){this.$node.querySelector("lyte-popover").setData("ltPropBindToBody",!1)}.bind(this),1)}}}),Lyte.Component.register("crux-lookup-modal",{_template:'<template tag-name="crux-lookup-modal"> <lyte-modal id="modalElem" lt-prop-wrapper-class="cxLookupModal cxBoxModal {{cxPropWrapperClass}}" lt-prop-show="{{lbind(show)}}" lt-prop-offset="{&quot;top&quot; : &quot;0&quot;, &quot;left&quot; : &quot;center&quot;}" lt-prop="{&quot;allowMultiple&quot; : &quot;true&quot;, &quot;width&quot; : &quot;80%&quot;, &quot;left&quot; : &quot;5%&quot;}" on-before-close="{{method(\'closeModal\')}}" on-before-show="{{method(\'openModal\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="cxLookupModalHeader"> <template is="if" value="{{expHandlers(cxPropHeader,\'!\')}}"><template case="true">{{cruxGetI18n(\'crm.lookup.chooserecord\',module.singular_label)}}</template><template case="false">{{cxPropHeader}}</template></template> </lyte-modal-header> <lyte-modal-content class="cxLookupModalContent"> <div class="cxLookupModalbuttonLayer mT5 mB25"> <template is="if" value="{{cxPropRelatedId}}"><template case="true"> <template is="if" value="{{cxPropDontShowRelatedDropdown}}"><template case="true"> <div class="cxLookupModalRelIdName"><span>{{headerOptions[0].name}}</span></div> </template><template case="false"> <div class="cxLookupModalRelatedDDWrap"> <span>{{cruxGetI18n("crm.button.mass.show")}}</span> <lyte-dropdown lt-prop-options="{{headerOptions}}" lt-prop-user-value="name" lt-prop-system-value="id" lt-prop-selected="{{lbind(selectedHeaderValue)}}" on-option-selected="{{method(\'setHeaderOption\')}}" class="cxLookupModalRelIdDropdown" on-show="{{method(\'onDropdownOpen\')}}" on-hide="{{method(\'onDropdownClose\')}}"></lyte-dropdown></div> </template></template> </template></template> <lyte-input class="cxBoxInput cxLookupSearch cxBoxLeftPosSearch" lt-prop-id="filterbox" data-zcqa="lookupSearch" lt-prop-appearance="box" lt-prop-type="search" lt-prop-placeholder="{{cruxGetI18n(\'crm.globalsearch.search.title\')}}" onkeyup="{{action(\'searchSetValue\', event,, this)}}" after-render="{{method(\'associateSearchClick\')}}"></lyte-input> <lyte-yield yield-name="contentHeaderYield" class="cxMlAuto"></lyte-yield> <template is="if" value="{{cxPropCreateYield}}"><template case="true"> <lyte-yield yield-name="createYield" class="cxMlAuto"></lyte-yield> </template></template> </div> <template is="if" value="{{cxPropFilterComponent}}"><template case="true"><span class="cxFlexCenter advanceFilter cxLookupFilterViewAdvanceFilterIcon" data-zcqa="lookupAdvanceFilterIcon" lt-prop-title="{{if(cxPropShowFilter,cruxGetI18n(\'crm.button.clear.filter\'),cruxGetI18n(\'crm.button.show.filter\'))}}" onclick="{{action(\'filterAction\',this)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"></span></template></template> <crux-table-component cx-prop-hide-header-on-no-content="{{cxPropHideHeaderOnNoContent}}" class="modalCruxtable cxTable lyteOuterTable entityLookupTable" cx-prop-column-cell-class="lookupCriteriaLabelWrap1" cx-prop-header="{{header}}" cx-prop-row-zcqa="detailView" cx-prop-content="{{record}}" cx-prop-yield-for-prefix="true" cx-prop-sort-columns="true" cx-prop-no-records-message="{{if(cxPropNoRecordsMessage,cxPropNoRecordsMessage,cruxGetI18n(\'crm.module.empty.message\',module.plural_label))}}" on-sort="{{action(\'sort\')}}" cx-prop-sorted-column="{{sortedColumn}}" cx-prop-sorted-order="{{queryParamObject.sort_order}}" cx-prop-enable-body-scroll="false" cx-prop-field-type-mapping="{{fieldMapping}}" cx-prop-header-yield="{{headerYields}}" cx-prop-show-tooltip="false" cx-prop-no-content-class="noresultstyle" cx-prop-module="{{moduleName}}" cx-prop-selected-rows="{{cxPropDisabledList}}" cx-prop-filter-component="{{cxPropFilterComponent}}" cx-prop-show-filter="{{cxPropShowFilter}}" cx-prop-filter-button="{{cxPropFilterButton}}" cx-prop-comparator="{{cxPropComparator}}" cx-prop-selected-row-class="cxLookupDisableRow"> <template is="yield" yield-name="header-prefix-1"></template> <template is="yield" yield-name="body-prefix-1"> <lyte-radiobutton lt-prop-type="primary" lt-prop-name="record" lt-prop-value="{{recordObj.id}}" lt-prop-checked="{{ifEquals(recordObj.id,selectedSingle)}}" on-checked="{{method(\'selectSingle\',recordObj.id)}}" onclick="{{action(\'radioButtonClicked\',recordObj.id)}}"></lyte-radiobutton> </template> <template is="yield" yield-name="body-aTag"> <template is="if" value="{{recordObj[fieldObj.api_name]}}"><template case="true"> <link-to data-zcqa="{{recordObj[fieldObj.api_name]}}" lt-prop-class="link" lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp="[&quot;{{moduleName}}&quot;, &quot;{{recordObj.id}}&quot;]" onclick="{{action(&quot;selectSingle&quot;,recordObj.id,this,event)}}"><template is="if" value="{{recordObj[fieldObj.api_name].name}}"><template case="true">{{recordObj[fieldObj.api_name].name}}</template><template case="false">{{recordObj[fieldObj.api_name]}}</template></template></link-to> </template></template> </template> <template is="yield" yield-name="body-phone"> {{recordObj[fieldObj.api_name]}} </template> <template is="yield" yield-name="body-lookup">{{recordObj[fieldObj.api_name].name}}</template> </crux-table-component> </lyte-modal-content> <lyte-modal-footer class="cxLookupModalFooter" data-zcqa="mxnfooter"> <div class="cxLookupModalbuttonLayer"> <template is="if" value="{{expHandlers(lookupSingle,\'&amp;&amp;\',expHandlers(cxPropFooterYield,\'!\'))}}"><template case="true"> <div class="cxSelectedSingle"> {{cruxGetI18n("crm.record.selected",module.singular_label)}}: {{lookupSingle}} </div> </template></template> <template is="if" value="{{expHandlers(record.length,\'||\',cxPropShowNavigator)}}"><template case="true"> <div class="cxMlAuto" data-zcqa="mxnnavigationlookup"> <lyte-navigator id="navigator" lt-prop-more-records="true" lt-prop-show-only-icon="{{cxPropShowOnlyIcon}}" lt-prop-value="0" lt-prop-perpage="{{cxPropPerPage}}" on-next="{{method(\'rendNext\')}}" on-previous="{{method(\'rendPrev\')}}" lt-prop-middle-text="{{cxPropModalMiddleText}}"></lyte-navigator> </div> </template></template> </div> <template is="if" value="{{cxPropFooterButtonYield}}"><template case="true"> <lyte-yield yield-name="footerButtonYield"></lyte-yield> </template></template> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0,0]}]},false:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"componentDynamic",position:[3,1,3]},{type:"insertYield",position:[3,1,5]},{type:"attr",position:[3,1,7]},{type:"if",position:[3,1,7],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3,5]},{type:"registerYield",position:[3,5,1],dynamicNodes:[]},{type:"registerYield",position:[3,5,3],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[3,5,5],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"if",position:[1,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[3,5,7],dynamicNodes:[{type:"text",position:[1]}]},{type:"registerYield",position:[3,5,9],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3,5]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1,1]},{type:"if",position:[5,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}},{type:"attr",position:[5,1,3]},{type:"if",position:[5,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[5,3]},{type:"if",position:[5,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["module","header","sortedColumn","queryParamObject","selectedSingle","lookupSingle","modId","relations","moduleName","displayField","record","show","next","currentPage","cxPropPerPage","value","cxPropHideHeaderOnNoContent","cxPropCreateYield","fetchRecordsOnEnter","cxPropHeader","metaMoreRecords","cxPropFields","headerYields","cxPropRelatedId","headerOptions","selectedHeaderValue","cxPropRelatedModuleId","cxPropRelatedName","cxPropMetaMoreRecords","cxPropDontShowRelatedDropdown","fieldMapping","cxPropShowNavigator","cxPropReturnFullObjectOnGet","cxPropShowOnlyIcon","cxPropDisabledList","cxPropModalMiddleText","cxPropQueryParam","cxPropWrapperClass","cxPropNoRecordsMessage","cxPropSearchFields","cxPropFooterButtonYield","cxPropFilterComponent","cxPropShowFilter","cxPropComparator","cxPropFilterButton"],data:function(){return{module:Lyte.attr("object",{default:{}}),header:Lyte.attr("array",{default:[]}),sortedColumn:Lyte.attr("string"),queryParamObject:Lyte.attr("object",{default:{}}),selectedSingle:Lyte.attr("string",{default:""}),lookupSingle:Lyte.attr("string",{default:""}),modId:Lyte.attr("string",{default:""}),relations:Lyte.attr("array",{default:[]}),moduleName:Lyte.attr("string",{default:""}),displayField:Lyte.attr("string",{default:""}),record:Lyte.attr("array",{default:[]}),show:Lyte.attr("boolean",{default:!1}),next:Lyte.attr("array"),currentPage:Lyte.attr("number",{default:0}),cxPropPerPage:Lyte.attr("number",{default:10}),value:Lyte.attr("object"),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!0}),cxPropCreateYield:Lyte.attr("boolean",{default:!1}),fetchRecordsOnEnter:Lyte.attr("boolean",{default:!1}),cxPropHeader:Lyte.attr("string"),metaMoreRecords:Lyte.attr("string"),cxPropFields:Lyte.attr("array"),headerYields:Lyte.attr("object"),cxPropRelatedId:Lyte.attr("string"),headerOptions:Lyte.attr("array"),selectedHeaderValue:Lyte.attr("string"),cxPropRelatedModuleId:Lyte.attr("string"),cxPropRelatedName:Lyte.attr("string"),cxPropMetaMoreRecords:Lyte.attr("string"),cxPropDontShowRelatedDropdown:Lyte.attr("boolean",{default:!1}),fieldMapping:Lyte.attr("object",{default:{}}),cxPropShowNavigator:Lyte.attr("boolean",{default:!0}),cxPropReturnFullObjectOnGet:Lyte.attr("boolean",{default:!1}),cxPropShowOnlyIcon:Lyte.attr("boolean",{default:!0}),cxPropDisabledList:Lyte.attr("array",{default:[]}),cxPropModalMiddleText:Lyte.attr("string"),cxPropQueryParam:Lyte.attr("object"),cxPropWrapperClass:Lyte.attr("string"),cxPropNoRecordsMessage:Lyte.attr("string"),cxPropSearchFields:Lyte.attr("array",{default:[]}),cxPropFooterButtonYield:Lyte.attr("boolean",{default:!1}),cxPropFilterComponent:Lyte.attr("string"),cxPropShowFilter:Lyte.attr("boolean",{default:!1}),cxPropComparator:Lyte.attr("boolean",{default:!0}),cxPropFilterButton:Lyte.attr("boolean",{default:!1})}},init:function(){this.records=[],this.setData("next",[0,this.data.cxPropPerPage]),this.getMethods("fetchModuleData")?this.lookupInit(this,this.getData("modId"),!0):this.getRecs(),this.setData("headerYields",{prefix:[{fixed:"enable",class:"cxLookupWidthOnePerc"}]})},getRecs:function(){var e=this.getData("module"),t=e.fields,o=!1;if(e&&Object.keys(e).length){this.getData("cxPropFields")?(o=!0,t=this.getData("cxPropFields")):e.custom_view&&e.custom_view.fields&&(o=!0,t=e.custom_view.fields);for(var a=function(e,t){return e.filter((function(e){return e.id==t}))[0]},r=0;r<t.length;r++)if(o&&(t[r]=a(e.fields,t[r].id)),t[r]){if(t[r].id==e.display_field.id||"Full_Name"==e.display_field.api_name&&"LASTNAME"==t[r].column_name||"POTENTIAL_NAME"==t[r].column_name||"POTENTIALID"==t[r].column_name){if(t[r].yieldName="aTag",!o)break}else"lookup"==t[r].data_type?t[r].yieldName="lookup":"phone"==t[r].data_type&&(t[r].yieldName="phone");t[r].sortable||(t[r].cxPropClass="cursorDefault")}else t.splice(r,1),r--}else t=this.getData("cxPropFields");this.setData("header",t);var i=this,s={page:1,per_page:this.data.cxPropPerPage};if(this.data.selectedHeaderValue&&("2"!=this.data.selectedHeaderValue?(s.relatedId=this.data.selectedHeaderValue,s.relationId=this.getRelationId()):(delete s.relatedId,delete s.relationId)),this.data.cxPropQueryParam)for(var p in this.data.cxPropQueryParam)s[p]=this.data.cxPropQueryParam[p];this.executeMethod("fetchRecords",this.getData("modId"),s).then((function(e){e=e&&e.length?e:[],i.setData("record",e),i.setData("queryParamObject",Object.assign({},s)),i.$node&&i.$node._callee&&i.$node._callee.querySelector("lyte-dropdown")&&i.$node._callee.querySelector("lyte-dropdown").close(),i.setData("show",!0);var t=!(e.length<i.data.cxPropPerPage);i.data.cxPropMetaMoreRecords&&e.$&&(t=!(0==e.$[i.data.cxPropMetaMoreRecords]||e.$.meta&&0==e.$.meta[i.data.cxPropMetaMoreRecords])),i.setSelected(e),i.setNavigator(e.length,t,!0),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv()}),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),_cruxUtils.showPermissionDeniedModal()}))},methods:{openModal:function(){var e=this.$node.querySelector("#modalElem").component.childComp;if(e){var t=e.querySelector(".lyteModalClose");t&&(t.dataZcqa="lookup_closeIcon")}this.setData("sortedColumn","")},closeModal:function(){this.setData("queryParamObject",{}),this.getMethods("onClose")&&this.executeMethod("onClose")},selectSingle:function(e,t,o,a){"script"!=a&&this.selectTheSingle(e)},rendNext:function(e,t){this.rendPage("next",e,t)},rendPrev:function(e,t){this.rendPage("prev",e,t)},associateSearchClick:function(e){var t=e.querySelector(".searchIcon"),o=this;t.onclick=function(){var t=e.querySelector("input");o.actions.searchSetValue.call(o,void 0,void 0,void 0,t.value,!0)}},setHeaderOption:function(){this.records=[],this.rendPage("change")},onDropdownOpen:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},onDropdownClose:function(e,t){this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)}},actions:{searchSetValue:function(e,t,o,a,r){if(!(this.getData("fetchRecordsOnEnter")&&(!e||13!=e.keyCode)||e&&27==e.keyCode)||r){clearTimeout(this.searchTimeout);var i=this;this.searchTimeout=setTimeout((function(){var t=(a=(a=a||(e?e.target.value:""))?a.trim():a)?{comparator:"contains",field:{api_name:i.getData("displayField")},value:a}:{},o=i.getData("queryParamObject");if(t.comparator&&(o.filters=i.constructSearchFilter(i.getData("displayField"),a)),o.page=1,o.per_page=i.data.cxPropPerPage,o.sort_order||(delete o.sort_order,delete o.sort_by),i.data.cxPropQueryParam)for(var r in i.data.cxPropQueryParam)o[r]=i.data.cxPropQueryParam[r];i.setData("queryParamObject",o),i.data.selectedHeaderValue&&("2"!=i.data.selectedHeaderValue?(o.relatedId=i.data.selectedHeaderValue,o.relationId=i.getRelationId()):(delete o.relatedId,delete o.relationId));var s=i.getData("modId");a?i.executeMethod("fetchRecords",s,Object.assign({},o)).then((function(e){e=e||[],i.noMoreScroll=!1,i.setData("record",e);var t=!0;i.data.cxPropMetaMoreRecords&&e.$&&(t=!(0==e.$[i.data.cxPropMetaMoreRecords]||e.$.meta&&0==e.$.meta[i.data.cxPropMetaMoreRecords])),i.setSelected(e),i.setNavigator(e.length,t,!0),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),i.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value").trim()!=a&&i.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value",a)}),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),_cruxUtils.showPermissionDeniedModal()})):(delete o.filters,i.executeMethod("fetchRecords",s,Object.assign({},o)).then((function(e){e=e||[],i.setData("record",e);var t=!0;i.data.cxPropMetaMoreRecords&&e.$&&(t=!(0==e.$[i.data.cxPropMetaMoreRecords]||e.$.meta&&0==e.$.meta[i.data.cxPropMetaMoreRecords])),i.setSelected(e),i.setNavigator(e.length,t,!0),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),i.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value","")}),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),_cruxUtils.showPermissionDeniedModal()})))}),300)}},sort:function(e){if(e.sortable){var t=this.getData("record");if(3!=e.ui_type&&999!=e.ui_type&&208!=e.ui_type&&110!=e.ui_type&&1e3!=e.ui_type&&209!=e.ui_type||"Visits"==this.getData("module").module_name&&"SEID"==e.column_name&&t.length){var o=JSON.parse(JSON.stringify(this.getData("queryParamObject")));if(e.curSort=null==e.curSort||"desc"==e.curSort?"asc":"desc",o.sort_order=e.curSort,o.sort_by=e.api_name,o.page=1,o.per_page=this.data.cxPropPerPage,this.setData("queryParamObject",o),this.data.cxPropQueryParam)for(var a in this.data.cxPropQueryParam)o[a]=this.data.cxPropQueryParam[a];var r=this;this.records=[],this.data.selectedHeaderValue&&("2"!=this.data.selectedHeaderValue?(o.relatedId=this.data.selectedHeaderValue,o.relationId=this.getRelationId()):(delete o.relatedId,delete o.relationId)),this.executeMethod("fetchRecords",this.getData("modId"),Object.assign({},o)).then((function(t){t=t&&t.length?t:[],r.setData("record",t),r.noMoreScroll=!1,r.setSelected(t);var o=!(t.length<r.data.cxPropPerPage);r.data.cxPropMetaMoreRecords&&t.$&&(o=!(0==t.$[r.data.cxPropMetaMoreRecords]||t.$.meta&&0==t.$.meta[r.data.cxPropMetaMoreRecords])),r.setNavigator(t.length,o,!0),r.setData("sortedColumn",e.api_name),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv()}),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),_cruxUtils.showPermissionDeniedModal()}))}}},selectSingle:function(e,t,o){this.selectTheSingle(e),o&&o.preventDefault()},radioButtonClicked:function(e){this.getData("selectedSingle")!==e||this.data.cxPropFooterButtonYield||this.close()},filterAction:function(e){this.getData("cxPropShowFilter")?(this.rendPage("home"),this.setData("cxPropShowFilter",!1),$L(e).removeClass("lookupFilterOpen")):(this.setData("cxPropShowFilter",!0),$L("lyte-table",this.$node.querySelector("lyte-modal").component.childComp)[0].scrollTable(),$L(e).addClass("lookupFilterOpen"))}},setNavigator:function(e,t,o){var a=this.$node.querySelector("#modalElem").component.childComp,r=a?a.querySelector("#navigator"):"";if(r){if(r.ltProp("moreRecords",!!t),this.records&&this.records.length){var i=0;this.records.forEach((function(e){return i+=e&&e.length?e.length:0})),e=i||e}r.ltProp("records",t?"":e),o&&r.ltProp("value",0)}},rendHome:function(e){this.rendPage("home",e),this.next=!1;var t=this.$node.querySelector("#modalElem").component.childComp;t&&(t=t.querySelectorAll("#navigator")[0])&&t.ltProp("value",0)},setSelected:function(e){var t=this.getData("selectedSingle");if(t){this.bool=!0;for(var o=this.$node.querySelector("#modalElem").component.childComp,a=o?o.querySelectorAll("lyte-radiobutton"):[],r=0;r<a.length;r++){if(a[r].ltProp("value")==t){e=this.getData("record").filter((function(e){return e.id==t}))[0],a[r].ltProp("checked",!0);var i,s=this.getData("displayField");if(!e)return;i="Full_Name"==s?e.First_Name?e.First_Name+" "+e.Last_Name:e.Last_Name:e[s],this.setData("lookupSingle",i);break}1==a[r].ltProp("checked")&&a[r].ltProp("checked",!1)}this.bool=!1}},selectTheSingle:function(e){for(var t,o,a=this.getData("record"),r=this.getData("displayField"),i=0;i<a.length;i++)if(e==a[i].id){t="Full_Name"==r?a[i].First_Name?a[i].First_Name+" "+a[i].Last_Name:a[i].Last_Name:a[i][r],this.setData({lookupSingle:t,selectedSingle:e}),o=a[i];break}this.bool||(this.data.cxPropFooterButtonYield||this.close(),this.getMethods("onSelect")&&this.executeMethod("onSelect"),this.getMethods("onValueChange")&&(this.setData("cxPropValue",{id:this.getData("selectedSingle"),name:this.getData("lookupSingle")}),o.name=this.getData("lookupSingle"),this.executeMethod("onValueChange",this.data.cxPropReturnFullObjectOnGet?o:JSON.stringify(this.getData("cxPropValue")))))},close:function(){this.setData("show",!1)},setNext:function(e,t,o,a,r,i){"next"==e?(t[o+2]=a,o+=1):"prev"==e?o-=1:(t=[0,a],o=0),this.setData({next:t,currentPage:o,currPage:o}),r=r||0,i&&i.ltProp("value",r)},rendPage:function(e,t,o){var a,r=this.getData("next"),i=this.getData("currentPage"),s=this.getData("queryParamObject"),p=s.page?s.page:0;"home"==e||"change"==e?a=0:"prev"==e?(a=r[i-1],s.page=p-1):(a=r[i+1],s.page=p+1);for(var l=this.getData("record"),n=this.getData("cxPropPerPage"),c=[],d=0;a<l.length&&d<n&&l[a];a++,d++)c[d]=l[a];if("home"!=e){if(s.per_page=this.data.cxPropPerPage,!this.next){this.next=!0;var u=this;l=[];if(this.data.selectedHeaderValue&&("2"!=this.data.selectedHeaderValue?(s.relatedId=this.data.selectedHeaderValue,s.relationId=this.getRelationId()):(delete s.relatedId,delete s.relationId)),this.data.cxPropQueryParam)for(var x in this.data.cxPropQueryParam)s[x]=this.data.cxPropQueryParam[x];this.executeMethod("fetchRecords",this.getData("modId"),Object.assign({},s)).then((function(p){if(p&&(l=l.concat(p)),l.length){for(u.setData("queryParamObject",s),u.setData("record",l),u.setData("show",!0);a<l.length&&d<n;a++,d++)c[d]=l[a];u.setSelected(c);var x=!(l.length<u.data.cxPropPerPage);u.data.cxPropMetaMoreRecords&&p.$&&(x=!(0==p.$[u.data.cxPropMetaMoreRecords]||p.$.meta&&0==p.$.meta[u.data.cxPropMetaMoreRecords])),u.setNavigator(l.length,x),u.setNext(e,r,i,a,t,o)}else"change"!=e&&_cruxUtils.showCustomAlert({params:{ltPropContentAlign:"center",ltPropSecondaryMessage:I18n.getMsg("crm.label.no.more.records"),ltPropButtons:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary"}]}});u.next=!1,"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv()}),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(),_cruxUtils.showPermissionDeniedModal()}))}}else(c.length||!c.length&&"next"!=e)&&(this.setNext(e,r,i,a,t,o),this.setData("show",!0),this.setSelected(c))},observeShow:function(){1==this.getData("show")&&this.$node.querySelector("lyte-modal").component.actualModalDiv.querySelector("lyte-input").ltProp("value","")}.observes("show"),observeRecords:function(){var e=this.getData("queryParamObject").page?this.getData("queryParamObject").page:1;this.records[e]=this.getData("record")}.observes("record"),records:[],observeValue:function(){if(this.getData("cxPropValue"))try{this.setData("value",JSON.parse(this.getData("cxPropValue"))),this.setData("selectedSingle",this.getData("value").id),this.setData("lookupSingle",this.getData("value").name)}catch(e){this.setData("value",this.data.cxPropValue),this.setData("selectedSingle",this.data.value.id),this.setData("lookupSingle",this.data.value.name)}else this.setData("value",{}),this.setData("selectedSingle",""),this.setData("lookupSingle","")}.observes("cxPropValue").on("init"),observeAccountId:function(){if(this.data.cxPropRelatedId){idModuleMapping[this.data.cxPropRelatedModuleId];var e=[{id:this.data.cxPropRelatedId,name:_cruxUtils.getI18n("crm.related.contact.account",this.data.module.plural_label,this.data.cxPropRelatedName)},{id:"2",name:_cruxUtils.getI18n("crm.allcontact.show",this.data.module.plural_label)}];this.setData("headerOptions",e),this.setData("selectedHeaderValue",this.data.cxPropRelatedId),store.peekRecord("module",this.data.cxPropRelatedModuleId)||store.findRecord("module",this.data.cxPropRelatedModuleId)}}.observes("cxPropRelatedId").on("init"),getRelationId:function(){for(var e="",t=store.peekRecord("module",this.data.cxPropRelatedModuleId).related_lists,o=0;o<t.length;o++)if(t[o].api_name==this.data.module.api_name){e=t[o].id;break}return e}},{mixins:["crux-lookup-mixin","crux-aria-lookup-mixin"]}),Lyte.Component.register("crux-lookup-filter-modal",{_template:'<template tag-name="crux-lookup-filter-modal"> <lyte-modal id="modalElem" lt-prop-wrapper-class="cxLookupModal LookupModal cxBoxModal lookupListTable" lt-prop-show="{{lbind(show)}}" lt-prop-show-close-button="false" lt-prop-bind-to-body="{{ltPropBindToBody}}" lt-prop-offset="{&quot;top&quot; : &quot;0&quot;, &quot;left&quot; : &quot;center&quot;}" lt-prop="{&quot;allowMultiple&quot; : &quot;true&quot;, &quot;width&quot; : &quot;80%&quot;, &quot;left&quot; : &quot;5%&quot;}" on-before-close="{{method(&quot;closeModal&quot;)}}"> <template is="registerYield" yield-name="modal"> <div class="componentWrapper"> <crux-lookup-filter-view field-of-lookup-val="{{cxPropFieldOfLookupVal}}" parent-module="{{cxPropParentModule}}" default-criteria="{{cxPropDefaultCriteria}}" id="lookup_view_{{idIndex}}" module="{{lbind(module)}}" show="{{lbind(show)}}" disp-init="{{dispInit}}" on-data-loaded="{{method(\'onDataLoaded\')}}" mod-id="{{modId}}" is-single="{{isSingle}}" cx-prop-header="{{cxPropHeader}}" display-field="{{lbind(displayField)}}" record="{{lbind(record)}}" selected-single="{{selectedSingle.id}}" selected-single-record="{{lbind(selectedSingle)}}" lookup-single="{{lbind(lookupSingle)}}" module-name="{{lbind(moduleName)}}" on-value-change="{{method(\'onValueChange\')}}" cx-prop-value="{{cxPropValue}}" render-lookup="{{lbind(renderLookup)}}" fields-obj="{{fieldsObj}}" cx-prop-create-yield="{{cxPropCreateYield}}" temp-close="{{lbind(tempClose)}}" cx-prop-additional-params="{{cxPropAdditionalParams}}" disable-related-to="{{cxPropDontShowRelatedDropdown}}" related-record-data="{{relatedRecordData}}" cx-prop-field="{{cxPropField}}" cx-prop-return-full-object-on-get="{{cxPropReturnFullObjectOnGet}}" cx-prop-default-fields="{{cxPropDefaultFields}}" cx-prop-all-fields-needed="{{cxPropAllFieldsNeeded}}" cx-prop-query-param="{{cxPropQueryParam}}" is-related-record-passed="{{isRelatedRecordPassed}}" before-request-change-data="{{method(\'changeData\')}}"> <template is="yield" yield-name="createYield"><lyte-yield yield-name="createYield"></lyte-yield></template> </crux-lookup-filter-view> </div> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropDefaultCriteria","cxPropFieldOfLookupVal","cxPropParentModule","tempClose","fieldsObj","renderLookup","module","cxPropHeader","cxPropCreateYield","lookupSingle","sortedColumn","modId","show","cxPropHideHeaderOnNoContent","header","ltPropBindToBody","headerYields","relatedRecordData","cxPropDontShowRelatedDropdown","cxPropReturnFullObjectOnGet","cxPropDefaultFields","cxPropAllFieldsNeeded","cxPropQueryParam","isRelatedRecordPassed","cxPropField","cxPropShowAllFields"],data:function(){return{cxPropDefaultCriteria:Lyte.attr("array",{default:[]}),cxPropFieldOfLookupVal:Lyte.attr("array",{default:[]}),cxPropParentModule:Lyte.attr("string",{default:""}),tempClose:Lyte.attr("boolean",{default:!1}),fieldsObj:Lyte.attr("object",{default:{}}),renderLookup:Lyte.attr("boolean",{default:!1}),module:Lyte.attr("object",{default:{}}),cxPropHeader:Lyte.attr("string"),cxPropCreateYield:Lyte.attr("boolean",{default:!1}),lookupSingle:Lyte.attr("string",{default:""}),sortedColumn:Lyte.attr("string"),modId:Lyte.attr("string",{default:""}),show:Lyte.attr("boolean",{default:!1}),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!0}),header:Lyte.attr("array",{default:[]}),ltPropBindToBody:Lyte.attr("boolean",{default:!1}),headerYields:Lyte.attr("object"),relatedRecordData:Lyte.attr("array",{default:[]}),cxPropDontShowRelatedDropdown:Lyte.attr("boolean",{default:!1}),cxPropReturnFullObjectOnGet:Lyte.attr("boolean",{default:!1}),cxPropDefaultFields:Lyte.attr("object",{default:{}}),cxPropAllFieldsNeeded:Lyte.attr("boolean",{default:!1}),cxPropQueryParam:Lyte.attr("object"),isRelatedRecordPassed:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object"),cxPropShowAllFields:Lyte.attr("boolean",{default:!1})}},init:function(){this.setData("headerYields",{prefix:[{fixed:"enable",class:"cxLookupWidthOnePerc"}]}),this.setData("ltPropBindToBody",!0)},didConnect:function(){this.data.cxPropRelatedId&&this.data.relatedRecordData.length<1&&!this.data.isRelatedRecordPassed&&this.setRelatedDropDown(this.data.cxPropRelatedId,this.data.cxPropRelatedName,this.data.cxPropRelatedModuleId)},close:function(){this.setData("show",!1)},lookupInit:function(e,t,o,a,r){var i=this.$node.querySelector("crux-lookup-filter-view");i.lookupInit(i,elem.getData("modId"),!0,r)},openModalAfterQuickCreate:function(e){e.getRecs()},setRelatedDropDown(e,t,o){var a,r=[];switch(store.peekRecord("module",o).api_name){case"Accounts":a="Account_Name";break;case"Vendors":a="Vendor_Name";break;case"Contacts":a="Contact_Name"}r.push({apiName:a,id:e,name:_cruxUtils.getI18n("crm.related.contact.account",store.peekRecord("module",this.data.modId).plural_label,this.data.cxPropRelatedName)}),this.data.cxPropDontShowRelatedDropdown||r.push({id:"all",name:I18n.getMsg("crm.label.show")+" "+I18n.getMsg("crm.allcontact.show",store.peekRecord("module",this.data.modId).plural_label)}),this.setData("relatedRecordData",r)},methods:{onDataLoaded:function(){this.setData("show",!0)},closeModal:function(){this.setData({show:!1,renderLookup:!1}),this.getMethods("onClose")&&this.executeMethod("onClose")},changeData:function(e,t){this.getMethods("beforeRequestChangeData")&&this.executeMethod("beforeRequestChangeData",e,t,this.data.cxPropField)}}}),Lyte.Component.register("crux-lookup-filter-view",{_template:'<template tag-name="crux-lookup-filter-view"> <div class="cxLookupFilterViewHeading clearAfterB"> <h4 class="dIB m0"><template is="if" value="{{expHandlers(cxPropHeader,\'!\')}}"><template case="true">{{cruxGetI18n(\'crm.lookup.chooserecord\',module.singular_label)}}</template><template case="false">{{cxPropHeader}}</template></template></h4> <template is="if" value="{{customCloseNeeded}}"><template case="true"> <div class="fR" data-zcqa="lookup_closeIcon" onclick="{{action(\'closeModal\')}}"> <span class="newPopupCloseIcon ico-close-small2 cxNewPopupCloseIcon "></span> </div> </template></template> </div> <div class="cxAlignRight dF pL20 pR20 clearAfterB moduleRelatedDropdown"> <lyte-dropdown lt-prop-yield="true" lt-prop-selected="{{lbind(selectedRelatedRecordIndex)}}" data-zcqa="relatedRecord" lt-prop-disabled="{{disableRelatedTo}}" lt-prop-freeze="false" lt-prop-tabindex="1" class="dIB mR20 relatedDropdownLookup cxLookupFilterViewRelatedDropdown" on-option-selected="{{method(\'showRelatedRecords\')}}" lt-prop-aria-button="{{cxPropAriaButton}}" on-show="{{method(\'onDropdownOpen\')}}" on-hide="{{method(\'onDropdownClose\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{relatedRecordData}}" item="relatedRecord" index="relatedRecordIndex"> <lyte-drop-item data-zcqa="relatedRecord_{{relatedRecordIndex}}" data-value="{{relatedRecordIndex}}">{{relatedRecord.name}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <lyte-input class="lookupsearch dIB" lt-prop-id="filterbox" data-zcqa="lookupSearch" lt-prop-focus="true" lt-prop-appearance="box" lt-prop-type="search" lt-prop-value="{{lbind(searchBarAttr.searchValue)}}" lt-prop-placeholder="{{searchBarAttr.displayMsg}}" lt-prop-maxlength="200" lt-prop-autocomplete="off" on-value-change="{{method(\'searchBarSearch\')}}"></lyte-input> <template is="if" value="{{cxPropCreateYield}}"><template case="true"> <lyte-yield yield-name="createYield" class="cxMlAuto"></lyte-yield> </template></template> </div> <lyte-popover lt-prop-origin-elem="#coloumnSelectOrg" lt-prop-class="columnCustomizeWrap" lt-prop-wrapper-class="columnCustomizeWrap" lt-prop-animation="zoom" lt-prop-bind-to-body="false" lt-prop-show="{{showColList}}" lt-prop-header-padding="0px" lt-prop-content-padding="0px" lt-prop-footer-padding="0px" lt-prop-freeze="false" lt-prop-type="box" lt-prop-placement="bottomLeft" lt-prop-scrollable="false" lt-prop-show-close-button="false" lt-prop-close-on-body-click="true" on-close="{{method(&quot;closeColumnList&quot;)}}" on-show="{{method(&quot;setScrollableHeight&quot;)}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="lookupColumnCustomize"> <crux-column-list cx-prop-disable-sort-for-unselected-fields="true" cx-prop-selected-fields="{{header}}" class="lookupColumnCustComp" id="cruxColumnList" cx-prop-mandatory="mandatoryColumn" cx-prop-max-select-column="10" cx-prop-fields="{{availableFields}}" on-before-unchecked="{{method(\'uncheckColumn\')}}" on-search="{{method(\'OnColumnListSearch\')}}" cx-prop-zcqa-prefix="listView_" cx-prop-drag-zcqa-prefix="listViewDrag_"> </crux-column-list> </lyte-popover-content> <lyte-popover-footer class="lookupColumnCustButtons"> <div class="cxColumnListBtn"> <template is="if" value="{{showColListFooter}}"><template case="true"> <lyte-button data-zcqa="columnListSaveButton" lt-prop-appearance="primary" class="mR10" onclick="{{action(\'closeColumnList\',\'SAVE\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'Save\')}}</template> </lyte-button> <lyte-button data-zcqa="columnListCancelButton" lt-prop-class="mR0" onclick="{{action(\'closeColumnList\',\'CANCEL\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'Cancel\')}}</template> </lyte-button> </template></template> </div> </lyte-popover-footer> </template> </lyte-popover> <div class="cxAdvanceLookupFilterField lookupFieldList pR"> <lyte-menu lt-prop-yield="true" lt-prop-show="{{showSortableOptions}}" lt-prop-event="click" id="sortOrderMenu" on-menu-click="{{method(\'sortColumnsInLookup\')}}" on-close="{{method(\'sortColumnsClose\')}}" lt-prop-query=".sortableTarget"> <template is="registerYield" yield-name="yield"> <lyte-menu-body> {{log(availableSort)}} <template is="for" items="{{availableSort}}" item="item" index="index"> <lyte-menu-item class="pL10 lookupSortItem" data-zcqa="sort_column_{{index}}" data-value="{{item}}"> <lyte-menu-label> <span class="dIB svgIconsImg sort_{{toLowerCase(item)}} mR5"></span> {{item}} </lyte-menu-label> </lyte-menu-item> </template> </lyte-menu-body> </template> </lyte-menu> <span tabindex="0" class="cxFlexCenter advanceFilter cxLookupFilterViewAdvanceFilterIcon" data-zcqa="lookupAdvanceFilterIcon" lt-prop-title="{{if(showFilter,cruxGetI18n(\'crm.button.clear.filter\'),cruxGetI18n(\'crm.button.show.filter\'))}}" onclick="{{action(\'filterAction\',this)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"></span> <crux-table-component cx-prop-show-scroll-on="hover" cx-prop-zcqa-selector="field_label" cx-prop-module="{{moduleName}}" cx-prop-clip-mode="false" cx-prop-hide-header-on-no-content="false" class="lyteOuterTable dB entityLookupTable lyteFixedHeaderTable {{if(bigLookupTable,\'bigLookupTable\',\'\')}}" cx-prop-column-cell-class="lookupCriteriaLabelWrap1" cx-prop-header="{{header}}" cx-prop-show-business-card="false" cx-prop-row-zcqa="detailView" cx-prop-content="{{record}}" cx-prop-yield-for-prefix="true" cx-prop-sort-columns="true" cx-prop-table-class="lookupLyteTable" cx-prop-no-records-message="{{cruxGetI18n(\'crm.module.empty.message\',module.plural_label)}}" cx-prop-enable-body-scroll="false" cx-prop-show-tooltip="false" cx-prop-no-content-class="noresultstyle" cx-prop-field-type-mapping="{{uiTypeMapping}}" cx-prop-show-filter="{{showFilter}}" set-lookup-filter-conditions="{{method(\'setLookupFilterConditions\')}}" cx-prop-filter-component="crux-lookupfilter-component" apply-filter="{{method(\'applyFilter\')}}" clear-filter="{{method(\'clearFilter\')}}" header-fields="{{header}}" on-sort="{{action(\'sortColumn\')}}" cx-prop-sorted-column="{{sortedColumn}}" cx-prop-sorted-order="{{sortDetails.sort_order}}" cx-prop-selected-rows="{{cxPropDisabledList}}" cx-prop-selected-row-class="cxLookupDisableRow" cx-prop-lookup-properties="{{cxPropLookupProperties}}"> <template is="registerYield" yield-name="body-aTag"> <link-to data-zcqa="{{recordObj[fieldObj.api_name]}}" lt-prop-class="link" lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp="[&quot;{{moduleName}}&quot;, &quot;{{recordObj.id}}&quot;]" onclick="{{action(&quot;selectSingle&quot;,recordObj.id,this,event)}}"> {{recordObj[fieldObj.api_name]}} </link-to> </template> <template is="yield" yield-name="header-prefix-1" cx-prop-fixed="enable"> <div class="lookupCriteriaLabelCol {{if(clientAccount,\'cD\',\'\')}}"> <span tabindex="0" class="dIB coloumnSelect cP {{if(clientAccount,\'vH eventNone\',\'\')}}" data-zcqa="lookupColumnSelectIcon" id="coloumnSelectOrg" onclick="{{action(\'showColumnList\',event)}}" lt-prop-title="{{cruxGetI18n(\'crm.label.addColumn\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;followcursor&quot;}"></span> <div class="lookupCriteriaFilter cxLookFilterVwCriteriaFilter cxdN"></div> </div> </template> <template is="yield" yield-name="body-prefix-1"> <lyte-radiobutton lt-prop-type="primary" lt-prop-name="record" data-zcqa="radioButon_{{recordObj.id}}" lt-prop-value="{{recordObj.id}}" lt-prop-checked="{{ifEquals(recordObj.id,selectedSingle)}}" onclick="{{action(\'selectSingle\',recordObj.id)}}"></lyte-radiobutton> </template> <template is="yield" yield-name="body-lookup">{{recordObj[fieldObj.api_name].name}}</template> <template is="yield" yield-name="body-territory"> <template is="for" items="{{recordObj[fieldObj.api_name]}}" item="item" index="index"> {{item.Name}} </template> </template> </crux-table-component> </div> <div class="cxLookupModalbuttonLayer pT20 pR20 pL20 pR {{if(scrollableTable,\'moreRecordsTable\',\'\')}}"> <template is="if" value="{{expHandlers(lookupSingle,\'&amp;&amp;\',selectedSingle)}}"><template case="true"> <div class="cxSelectedSingle"> {{cruxGetI18n("crm.record.selected",module.singular_label)}}: {{lookupSingle}} </div> </template></template> <template is="if" value="{{record.length}}"><template case="true"> <div class="cxMlAuto lookupPageNavigation" data-zcqa="lookupNavigation"> <lyte-navigator id="navigator" lt-prop-more-records="{{hasMoreRecords}}" lt-prop-show-only-icon="true" lt-prop-value="{{navigatedRec}}" lt-prop-records="{{navigatorRecordLen}}" lt-prop-per-page="{{perPage}}" on-next="{{method(\'rendNext\')}}" on-previous="{{method(\'rendPrev\')}}"></lyte-navigator> </div> </template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1,0]},{type:"if",position:[1,1,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,1]},{type:"registerYield",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"registerYield",position:[5,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[5]},{type:"attr",position:[7,1]},{type:"registerYield",position:[7,1,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,3]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[7,1]},{type:"attr",position:[7,3]},{type:"attr",position:[7,5]},{type:"registerYield",position:[7,5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[7,5,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]},{type:"registerYield",position:[7,5,5],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[7,5,7],dynamicNodes:[{type:"text",position:[0]}]},{type:"registerYield",position:[7,5,9],dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"text",position:[1]}]}]},{type:"componentDynamic",position:[7,5]},{type:"attr",position:[9]},{type:"attr",position:[9,1]},{type:"if",position:[9,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}},{type:"attr",position:[9,3]},{type:"if",position:[9,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}],_observedAttributes:["cxPropDefaultFields","cxPropAllFieldsNeeded","cxPropField","cxPropFrom","showSortableOptions","requiredFieldsForApi","availableFields","availableSort","renderLookupView","searchDoMode","fieldOfLookupVal","currentSelectedRecord","defaultCriteria","searchBarCriteria","targetElement","relatedRecordCriteria","flushView","bigLookupTable","selectedRelatedRecordIndex","relatedRecordData","tempClose","fieldsObj","renderLookup","displayField","selectedSingle","sortDetails","criteria","searchBarAttr","showFilter","customCloseNeeded","scrollableTable","selectedFields","currentSelectedFields","module","moduleName","header","cxPropHeader","cxPropCreateYield","lookupSingle","record","sortedColumn","cxPropHideHeaderOnNoContent","modId","comparator","next","navigatedRec","currentPage","tableScrollHeight","perPage","navigatorRecordLen","value","hasMoreRecords","uiTypeMapping","lookupViewRestrictedColumns","lookupViewRestrictedModuleVsColumn","appointmentHiddenFields","tasksHiddenFields","servicesHiddenFields","formulaReturnTypeComparators","lookupUitypeComparator","lookupDatatypeComparator","cxPropReturnFullObjectOnGet","cxPropDisabledList","cxPropQueryParam","isRelatedRecordPassed","cxPropAriaButton","allowEncryptedFields","defaultCriteriaStr","cxPropShowAllFields","cxPropLookupProperties"],data:function(){return{cxPropDefaultFields:Lyte.attr("object",{default:{}}),cxPropAllFieldsNeeded:Lyte.attr("boolean",{default:!1}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFrom:Lyte.attr("string",{default:""}),showSortableOptions:Lyte.attr("boolean",{default:!1}),requiredFieldsForApi:Lyte.attr("array",{default:[]}),availableFields:Lyte.attr("array",{default:[]}),availableSort:Lyte.attr("array",{default:[]}),renderLookupView:Lyte.attr("boolean",{default:!1}),searchDoMode:Lyte.attr("boolean",{default:!1}),fieldOfLookupVal:Lyte.attr("array",{default:[]}),currentSelectedRecord:Lyte.attr("object",{default:{}}),defaultCriteria:Lyte.attr("array",{default:[]}),searchBarCriteria:Lyte.attr("string",{default:""}),targetElement:Lyte.attr("string",{default:""}),relatedRecordCriteria:Lyte.attr("string",{default:""}),flushView:Lyte.attr("boolean",{default:!1}),bigLookupTable:Lyte.attr("boolean",{default:!1}),selectedRelatedRecordIndex:Lyte.attr("number",{default:0}),relatedRecordData:Lyte.attr("array",{default:[]}),tempClose:Lyte.attr("boolean",{default:!1}),fieldsObj:Lyte.attr("object",{default:{}}),renderLookup:Lyte.attr("boolean",{default:!1}),displayField:Lyte.attr("string",{default:""}),selectedSingle:Lyte.attr("string",{default:""}),sortDetails:Lyte.attr("object",{default:{}}),criteria:Lyte.attr("string",{default:""}),searchBarAttr:Lyte.attr("object",{default:{}}),showFilter:Lyte.attr("boolean",{default:!1}),customCloseNeeded:Lyte.attr("boolean",{default:!0}),scrollableTable:Lyte.attr("boolean",{default:!1}),selectedFields:Lyte.attr("object",{default:{}}),currentSelectedFields:Lyte.attr("object",{default:{}}),module:Lyte.attr("object",{default:{}}),moduleName:Lyte.attr("string",{default:""}),header:Lyte.attr("array",{default:[]}),cxPropHeader:Lyte.attr("string"),cxPropCreateYield:Lyte.attr("boolean",{default:!1}),lookupSingle:Lyte.attr("string",{default:""}),record:Lyte.attr("array",{default:[]}),sortedColumn:Lyte.attr("string"),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!0}),modId:Lyte.attr("string",{default:""}),comparator:Lyte.attr("boolean",{default:!1}),next:Lyte.attr("array",{default:[0,10]}),navigatedRec:Lyte.attr("number",{default:0}),currentPage:Lyte.attr("number",{default:1}),tableScrollHeight:Lyte.attr("number",{default:200}),perPage:Lyte.attr("number",{default:10}),navigatorRecordLen:Lyte.attr("number",{default:0}),value:Lyte.attr("object"),hasMoreRecords:Lyte.attr("boolean",{default:!1}),uiTypeMapping:Lyte.attr("object",{default:"undefined"!=typeof crmConstants&&crmConstants.defaultUiTypeToCruxMapping?Lyte.deepCopyObject(crmConstants.defaultUiTypeToCruxMapping):{}}),lookupViewRestrictedColumns:Lyte.attr("array",{default:["CURRENCYISOCODE","SCORE","POSITIVE_SCORE","NEGATIVE_SCORE","TP_SCORE","TP_POSITIVE_SCORE","TP_NEGATIVE_SCORE","LEADSCORE"]}),lookupViewRestrictedModuleVsColumn:Lyte.attr("object",{default:{Leads:["QUALIFICATIONDURATION"],Products:["ACTIVE"]}}),appointmentHiddenFields:Lyte.attr("array",{default:["RESCHEDULEDFROM","REMINDER","ENDTIME"]}),tasksHiddenFields:Lyte.attr("array",{default:["REMINDAT","SENDNOTIFICATION"]}),servicesHiddenFields:Lyte.attr("array",{default:["AVAILABLE_DATES","AVAILABLE_DAYS","UNAVAILABLE_TILL","STARTING_DATE","CLOSING_DATE","JOBSHEETLAYOUT","APPOINTMENTFOR","SEID","APPOINTMENTLOCATION","APPOINTMENTID","APPOINTMENTADDRESS","APPOINTMENTDATEANDTIME","RESCHEDULEDFROM","SERVICEID","RESCHEDULEDTO","RESCHEDULEDREASON","RESCHEDULEDNOTE","CANCELLATIONREASON","CANCELLATIONNOTE","SERVICEAVAILABILITY","AVAILABLE_CUSTOM_TIMING","UNAVAILABLE_FROM","JOBSHEETSECTION"]}),formulaReturnTypeComparators:Lyte.attr("object",{default:{boolean:"equals",currency:"equals",double:"equals",text:"starts_with",datetime:"between",date:"equals"}}),lookupUitypeComparator:Lyte.attr("object",{default:{starts_with:[CrmField.UITYPES.SINGLE_LINE,CrmField.UITYPES.SKYPE_FIELD,CrmField.UITYPES.TEXT_FIELD,CrmField.UITYPES.TWITTER,CrmField.UITYPES.FIRST_NAME,CrmField.UITYPES.LAST_NAME,CrmField.UITYPES.TASK_SUBJECT,CrmField.UITYPES.MULTI_LINE_CF,CrmField.UITYPES.TEXT_AREA,CrmField.UITYPES.WEBSITE,CrmField.UITYPES.EMAIL,CrmField.UITYPES.ACCOUNT_NAME_LOOKUP,CrmField.UITYPES.CAMPAIGN_NAME_LOOKUP,CrmField.UITYPES.PRODUCT_NAME_LOOKUP,CrmField.UITYPES.CONTACT_LOOKUP,CrmField.UITYPES.VENDOR_NAME_LOOKUP,CrmField.UITYPES.POTENTIAL_ID,CrmField.UITYPES.SALESORDER_ID,CrmField.UITYPES.CONTACT_ID,CrmField.UITYPES.QUOTE_ID,CrmField.UITYPES.ROLE_NAME,CrmField.UITYPES.LOOK_UP_ENTITY,CrmField.UITYPES.MULTISELECT_LOOK_UP,CrmField.UITYPES.PHONE],equals:[CrmField.UITYPES.SERVICE_DURATION,CrmField.UITYPES.DATE,CrmField.UITYPES.DATE_LONG,CrmField.UITYPES.NUMERIC_FIELD,CrmField.UITYPES.LONG_INTEGER,CrmField.UITYPES.CURRENCY,CrmField.UITYPES.AGGREGATE_FIELD,CrmField.UITYPES.PERCENT,CrmField.UITYPES.DECIMAL,CrmField.UITYPES.BIG_DECIMAL,CrmField.UITYPES.RECORD_CURRENCY,98,CrmField.UITYPES.BOOLEAN_DEF,CrmField.UITYPES.BOOLEAN_DEF_NOT,CrmField.UITYPES.AUTONUMBER],in:[CrmField.UITYPES.PRODUCT_HANDLER,CrmField.UITYPES.GLOBAL_TAX,999,CrmField.UITYPES.STAGE,CrmField.UITYPES.USERLOOKUP,CrmField.UITYPES.TAGS,CrmField.UITYPES.MULTI_PICK_LIST,CrmField.UITYPES.PICK_LIST,CrmField.UITYPES.OWNER,CrmField.UITYPES.CREATED_BY,CrmField.UITYPES.WIZARD,CrmField.UITYPES.LAYOUT],between:[CrmField.UITYPES.DATE_TIME1,CrmField.UITYPES.CREATED_TIME,CrmField.UITYPES.DATETIME,CrmField.UITYPES.DATE_TIME2,CrmField.UITYPES.DATE_TIME_LONG]}}),lookupDatatypeComparator:Lyte.attr("object",{default:{starts_with:["text","textarea","phone","email","website","lookup"],equals:["boolean","currency","double","date","integer","bigint","autonumber","decimal","longinteger"],in:["ownerlookup","picklist","userlookup","multiuserlookup","multiselectpicklist"],between:["datetime"],formula:["formula"],rollup_summary:["rollup_summary"]}}),cxPropReturnFullObjectOnGet:Lyte.attr("boolean",{default:!1}),cxPropDisabledList:Lyte.attr("array",{default:[]}),cxPropQueryParam:Lyte.attr("object"),isRelatedRecordPassed:Lyte.attr("boolean",{default:!1}),cxPropAriaButton:Lyte.attr("object"),allowEncryptedFields:Lyte.attr("boolean",{default:!("object"!=typeof featuresAvailable||!featuresAvailable.ENCRYPT_SYSTEMDEFINED_FIELDS)}),defaultCriteriaStr:Lyte.attr("string"),cxPropShowAllFields:Lyte.attr("boolean",{default:!1}),cxPropLookupProperties:Lyte.attr("object",{default:{routeName:"crm.tab.module.entity.detail"}})}},init:function(){var e=Object.assign(this.data.uiTypeMapping,{999:"layout",96:"picklist",80:"number",21:"text",22:"text",25:"text"});this.setData("uiTypeMapping",e),this.lookupInit(this,this.getData("modId"),!0)},didConnect:function(){this.lookupTableHeightCalc()},methods:{OnColumnListSearch:function(e){this.setData("showColListFooter",!!e.length)},setScrollableHeight:function(){var e=renderingUtils.windowHeight/2;$L(".lookupColumnCustComp .lyteSortableParent").css("max-height",e),$L("crux-column-list .divTopBorder").scrollTop(0),$L("crux-column-list lyte-search")[0].setValue("")},associateSearchClick:function(e){var t=e.querySelector(".searchIcon"),o=this;t.onclick=function(){var t=e.querySelector("input");o.actions.searchSetValue.call(o,void 0,void 0,void 0,t.value,!0)}},fetchModuleData:function(e){return store.findRecord("module",e,{include:"custom_view,business_card_fields,lookup_field_properties"}).then((function(e){return"Contacts"!==e[0].api_name&&"Leads"!==e[0].api_name||(store.peekRecord("field",e[0].display_field.id).field_label="Contacts"===e[0].api_name?I18n.getMsg("Contact Name",e[0].singular_label):I18n.getMsg("Lead Name",e[0].singular_label)),e[0]}))},uncheckColumn:function(e){if(e.display_field||"aTag"===e.yieldName)return!1},setLookupFilterConditions:function(e){var t=this.getData("lookupDatatypeComparator"),o={picklist:I18n.getMsg("crm.select"),user:I18n.getMsg("crm.options.none"),80:_cruxUtils.getI18n("crm.label.type.minutes")};e.setData({cxPropNoValidation:!0,cxPropShowClear:!0,cxPropDisableFilter:!0,filterAtfirst:!1,cxPropComparator:!1,cxPropDatatypeComparator:t,cxPropPlaceHolder:o,cxPropCurrency:Crm.userDetails.BASE_CURRENCY}),e.setMethods("picklistAdd",this.pickListValidator)},clearFilter:function(){this.getData("criteria")&&!this.fromSearchBar&&(this.setData({criteria:"",currentPage:1,navigatedRec:0}),this.validateSearchValue()&&this.renderPage())},applyFilter:function(e){var t,o=e.$node.component.getFilterQuery();if(this.filterValueIds=[],o&&o.group_operator){var a=o.group?o.group.length:0;t=a?"(":"";for(var r=0;r<a;r++){if(l=store.peekRecord("field",o.group[r].field.id),o.group[r].field.api_name.includes(".")&&(o.group[r].field.api_name=l.api_name),[999,208,207,209].includes(l.ui_type)&&(o.group[r].comparator="in"),0===o.group[r].value.indexOf(".")&&(["double","integer","currency"].includes(l.data_type)||["double","integer","currency"].includes(l.formula.return_type)||l.rollup_summary&&["double","integer","decimal","currency"].includes(l.rollup_summary.return_type))&&(o.group[r].value="0"+o.group[r].value),!this.validateSearchValue(o.group[r].value,l.field_label,"formula"===l.data_type||"rollup_summary"===l.data_type?"formula"===l.data_type?l.formula.return_type:l.rollup_summary.return_type:l.data_type,l))return void(this.filterValueIds=[]);if("object"==typeof o.group[r].value&&"object"==typeof o.group[r].value[0]){var i=[];if(209===l.ui_type)for(var s of o.group[r].value)s.name&&i.push(s.name);else for(var s of o.group[r].value)s.id&&i.push(s.id)}else if(96===l.ui_type){i=[];for(var p of o.group[r].value)i.push(l.pick_list_values.find((e=>e.display_value==p)).id)}else("datetime"===l.data_type||"formula"===l.data_type&&"datetime"===l.formula.return_type||"rollup_summary"===l.data_type&&"datetime"===l.rollup_summary.return_type)&&!o.group[r].value.toString().includes("+")&&(o.group[r].value[0]+=Crm.userDetails.TIME_ZONE.replace(".",":"),o.group[r].value[1]+=Crm.userDetails.TIME_ZONE.replace(".",":"));i=(i=i&&i.length?i:o.group[r].value).toString().replace(/[(]/g,"\\(").replace(/[)]/g,"\\)"),this.data.allowEncryptedFields&&null!==l.crypt&&(o.group[r].comparator="equal"),t+="("+o.group[r].field.api_name+":"+("equal"===o.group[r].comparator?"equals":o.group[r].comparator)+":"+i+")",i="",t+=r<a-1?"and":")",this.filterValueIds.push(o.group[r].field.id)}}else if(o&&o.field){var l=store.peekRecord("field",o.field.id);if(o.field.api_name.includes(".")&&(o.field.api_name=l.api_name),[999,208,207,209].includes(l.ui_type)&&(o.comparator="in"),0===o.value.indexOf(".")&&(["double","integer","currency"].includes(l.data_type)||["double","integer","currency"].includes(l.formula.return_type)||l.rollup_summary&&["double","decimal","integer","currency"].includes(l.rollup_summary.return_type))&&(o.value="0"+o.value),!this.validateSearchValue(o.value,l.field_label,"formula"===l.data_type||"rollup_summary"===l.data_type?"formula"===l.data_type?l.formula.return_type:l.rollup_summary.return_type:l.data_type,l))return void(this.filterValueIds=[]);if("object"==typeof o.value&&"object"==typeof o.value[0]){i=[];if(209===l.ui_type)for(var s of o.value)s.name&&i.push(s.name);else for(var r of o.value)r.id&&i.push(r.id)}else if(96===l.ui_type){i=[];for(var p of o.value)i.push(l.pick_list_values.find((e=>e.display_value==p)).id)}else("datetime"===l.data_type||"formula"===l.data_type&&"datetime"===l.formula.return_type||"rollup_summary"===l.data_type&&"datetime"===l.rollup_summary.return_type)&&!o.value.toString().includes("+")&&(o.value[0]+=Crm.userDetails.TIME_ZONE.replace(".",":"),o.value[1]+=Crm.userDetails.TIME_ZONE.replace(".",":"));i=(i=i&&i.length?i:o.value).toString().replace(/[(]/g,"\\(").replace(/[)]/g,"\\)"),this.data.allowEncryptedFields&&null!==l.crypt&&(o.comparator="equal"),t="("+o.field.api_name+":"+("equal"===o.comparator?"equals":o.comparator)+":"+i+")",this.filterValueIds.push(o.field.id)}t&&t.length?(this.setData({criteria:t,currentPage:1,navigatedRec:0}),this.fetchFilteredRecords()):(this.setData({criteria:"",currentPage:1,navigatedRec:0}),this.renderPage())},rendNext:function(e){this.renderPage("next",e)},rendPrev:function(e){this.renderPage("prev",e)},searchBarSearch:function(){clearTimeout(this._timeout),this._timeout=setTimeout(function(){var e=this.data.searchBarAttr.searchValue?this.data.searchBarAttr.searchValue.trim():"";this.errorLabel=void 0;var t=this.data.header.find((e=>e.api_name===this.data.searchBarAttr.apiName)),o=t.field_label,a=this.data.allowEncryptedFields&&null!==t.crypt?":equals:":":starts_with:";if(!this.validateSearchValue(e,o))return this.errorLabel=o,!1;if(this.data.searchBarAttr&&e){e=e.replace(/[(]/g,"\\(").replace(/[)]/g,"\\)");var r="("+this.data.searchBarAttr.apiName+a+e+")";if(this.isProductCodeAvailable&&this.isProductCodeAvailable.api_name){let t=this.data.allowEncryptedFields&&null!==this.isProductCodeAvailable.crypt?":equals:":":starts_with:";r="("+r+"or("+this.isProductCodeAvailable.api_name+t+e+"))"}this.setData({searchBarCriteria:r,currentPage:1,navigatedRec:0}),this.fetchFilteredRecords()}else 0===e.length&&(this.setData({searchBarCriteria:"",currentPage:1,navigatedRec:0}),this.renderPage())}.bind(this),500)},sortColumnsInLookup:function(e){if(e===I18n.getMsg("crm.column.unsort"))this.setData({sortDetails:{},sortedColumn:"",currentPage:1,navigatedRec:0});else{var t=e===I18n.getMsg("crm.column.sort.desc")?"desc":"asc";this.setData("sortDetails",{sort_order:t,sort_by:this.currentSelectedSortColumn.api_name}),this.setData({sortedColumn:this.currentSelectedSortColumn.api_name,currentPage:1,navigatedRec:0})}delete this.currentSelectedSortColumn,this.renderPage()},sortColumnsClose:function(){$L(".sortableColumn").removeClass("sortableColumn"),this.setData({showSortableOptions:!1,availableSort:[]})},selectSingle:function(e,t){this.selectTheSingle(e,t)},showRelatedRecords:function(){this.showRelatedRecords()},closeColumnList:function(){this.saveColumn||$L("crux-column-list")[0].component.clearSelectedFields(),this.saveColumn=!1,this.closeColumnList()},onDropdownOpen:function(e,t){this.getMethods("onElementDropdownOpen")&&this.executeMethod("onElementDropdownOpen",this,e,t)},onDropdownClose:function(e,t){this.getMethods("onElementDropdownClose")&&this.executeMethod("onElementDropdownClose",this,e,t)}},actions:{showColumnList:function(){this.setData("showColList",!0)},closeColumnList:function(e){"SAVE"===e?(this.saveColumn=!0,this.putModuleData(this.getData("modId"))):"CANCEL"===e&&(this.saveColumn=!1),this.closeColumnList()},filterAction:function(e){this.getData("showFilter")?(this.setData({criteria:"",currentPage:1,navigatedRec:0}),this.renderPage(),this.setData("showFilter",!1),$L(e).removeClass("lookupFilterOpen")):(this.setData("showFilter",!0),this.$node.querySelector("lyte-table").scrollTable(),$L(e).addClass("lookupFilterOpen"))},sortColumn:function(e){if(this.currentSelectedSortColumn=e,e.sortable&&e.api_name){$L(".sortableTarget").removeClass("sortableTarget");var t=document.getElementById(e.id).children[0];$L(t).addClass("sortableTarget");var o=[I18n.getMsg("crm.column.sort.asc"),I18n.getMsg("crm.column.sort.desc")];if(e.api_name===this.getData("sortDetails").sort_by&&this.getData("sortDetails").sort_order){var a=[];a.push("asc"===this.getData("sortDetails").sort_order?I18n.getMsg("crm.column.sort.desc"):I18n.getMsg("crm.column.sort.asc")),a.push(I18n.getMsg("crm.column.unsort")),this.setData("availableSort",a)}else this.setData("availableSort",o);this.setData("showSortableOptions",!0)}},selectSingle:function(e,t,o){this.selectTheSingle(e,t),o&&o.preventDefault()},closeModal:function(){this.close()}},isBigLookupTable:function(){var e=this.getData("header").length;$(".lookupFieldList");e>6?this.setData("bigLookupTable",!0):this.setData("bigLookupTable",!1)},getRecs:function(){var e=Lyte.deepCopyObject(this.getData("module")),t=e.fields,o=t.length,a=this.data.relatedRecordData.length,r="",i=[],s=Lyte.deepCopyObject(this.data.defaultCriteria);if(a&&"Campaigns"!=e.api_name){i=[];for(var p=0;p<a;p++)this.data.relatedRecordData[p].apiName&&!i.includes(this.data.relatedRecordData[p].apiName)&&i.push(this.data.relatedRecordData[p].apiName)}if(this.getData("parentModule")){var l,n=store.peekRecord("module",moduleRecordMapping[this.data.parentModule].id,void 0,void 0,void 0,{getFields:!0});l=(n=n&&n.fields?n.fields:"").length;for(p=0;p<l;p++)n[p].association_details&&Lyte.arrayUtils(this.data.fieldOfLookupVal,"push",n[p].association_details)}for(p=0;p<o;p++){var c=!1;if(null!==t[p].crypt&&this.data.allowEncryptedFields&&"datetime"!==t[p].data_type&&(c=!0),!this.data.cxPropShowAllFields)if((17===t[p].show_type||0===t[p].show_type&&"FULLNAME"!==t[p].column_name||!t[p].filterable&&"DESCRIPTION"!==t[p].column_name&&"SHAREDTO"!==t[p].column_name&&"zohoshowtime__Total_Revenue"!==t[p].api_name||!t[p].searchable||t[p].virtual_field||null!==t[p].crypt&&!c||!t[p].visible||("Cases"===e.module_name||"Solutions"===e.module_name)&&"ADDCOMMENT"===t[p].column_name||"Tasks"===e.module_name&&this.data.tasksHiddenFields.indexOf(t[p].column_name)>-1||"Appointments"===e.module_name&&this.data.appointmentHiddenFields.indexOf(t[p].column_name)>-1||"Services"===e.module_name&&this.data.servicesHiddenFields.indexOf(t[p].column_name)>-1||e.module_name.startsWith("Orchestration")&&"SMOWNERID"===t[p].column_name||"DealHistory"===e.module_name&&"LASTACTIVITYTIME"===t[p].column_name)&&-1===[777,776].indexOf(t[p].ui_type)){t.splice(p,1),p--,o--;continue}if(!this.data.isRelatedRecordPassed&&"Services"===e.module_name&&a&&"Status"===t[p].api_name&&t[p].pick_list_values.length)for(var d=0;d<a;d++)switch(d){case 0:this.data.relatedRecordData[d].id="multi",this.data.relatedRecordData[d].criteria="(("+this.data.relatedRecordData[d].apiName+":equals:"+t[p].pick_list_values[0].id+")or("+this.data.relatedRecordData[d].apiName+":equals:"+t[p].pick_list_values[1].id+"))";break;case 1:this.data.relatedRecordData[d].id="all";break;case 2:this.data.relatedRecordData[d].id=t[p].pick_list_values[0].id;break;case 3:this.data.relatedRecordData[d].id=t[p].pick_list_values[1].id;break;case 4:this.data.relatedRecordData[d].id=t[p].pick_list_values[2].id}if(s&&s.length)for(var u of s)(u.api_name==t[p].api_name||u.parentCriteria||"id"==u.api_name)&&(r=r.length?r+"and":r,r+="("+u.api_name+":"+u.comparator+":"+u.value+")",s.splice(s.indexOf(u),1));if(a&&i.length){var x=i.indexOf(t[p].api_name);x>-1&&i.splice(x,1)}t[p].cxPropFilterZcqa="lookupFiltersInput_"+t[p].api_name}this.defaultCriteriaPattern=r||"";var m=function(e){var t=this.getData("lookupViewRestrictedColumns"),o=this.getData("moduleName"),a=this.getData("lookupViewRestrictedModuleVsColumn");let r=e.length;for(var i=0;i<r;i++)(t.contains(e[i].column_name)||o in a&&a[o].contains(e[i].column_name)||13===e[i].show_type&&["Segment_Label","Recency","Frequency","Monetary"].includes(e[i].api_name))&&(e.splice(i,1),i--,r--)}.bind(this);if(m(e.fields),this.setData("availableFields",e.fields),this.lookupFilterQueryHandling(),this.overRideFieldsForTable(),a&&i.length)for(p=0;p<a;p++)this.data.relatedRecordData[p].apiName&&i.includes(this.data.relatedRecordData[p].apiName)&&(Lyte.arrayUtils(this.getData("relatedRecordData"),"splice",p,1),p--,a--);1===a&&"all"===this.data.relatedRecordData[0].id&&(this.data.relatedRecordData="");var y=$(".relatedDropdownLookup");this.data.relatedRecordData.length?(this.setData("selectedRelatedRecordIndex","0"),y.attr("lt-prop-selected","1"),y.attr("lt-prop-selected","0"),this.showRelatedRecords(),y.show()):(y.hide(),this.renderPage())},renderPage:function(e,t){if(this.getData("criteria")||this.getData("relatedRecordCriteria")||this.getData("searchBarCriteria")||this.defaultCriteriaPattern||this.data.defaultCriteriaStr)this.fetchFilteredRecords(e,t);else{var o=this.getData("currentPage");"next"===e?o++:"prev"===e&&o--;var a={page:o,per_page:this.getData("perPage"),fields:this.getData("requiredFieldsForApi"),approved:"both",approval_state:"approved,approval_process_pending,approval_process_rejected"};Object.keys(this.getData("sortDetails")).length>1&&Object.assign(a,{sort_order:this.getData("sortDetails").sort_order,sort_by:this.getData("sortDetails").sort_by}),Object.keys(this.lookupFilterQueryDetails).length&&this.lookupFilterQueryDetails.query_id&&(a.query_id=this.lookupFilterQueryDetails.query_id),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),this.relatedListMode?this.fetchRelatedListRecords(moduleRecordMapping.Contacts.id,this.selectedRecord,this.getData("moduleName"),a).then(function(o){var a=o.data,r=!(!a||!o.meta.more_records)&&o.meta.more_records;this.updateNavigators(a,r,e,t)}.bind(this)):this.fetchRecords(this.getData("modId"),a).then(function(o){var a=o&&o.length;o=a?o:[];var r=!!a&&o.$.meta.more_records;this.updateNavigators(o,r,e,t),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1)}.bind(this),function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1),this.setData("renderLookup",!1),_cruxUtils.showPermissionDeniedModal()}.bind(this))}},putModuleData:function(e){var t=this.$node.querySelector("lyte-popover").component.childComp.querySelector("CRUX-COLUMN-LIST"),o=store.peekRecord("module",e),a=t.component.getSelectedFields(),r=o.lookup_field_properties.fields;this.data.currentSelectedFields=a;var i={},s=[],p={},l=function(e){for(var t=e.length,o=[],a=0;a<t;a++)p={sequence_number:a+1,api_name:e[a].api_name,id:e[a].id},o.push(p);return o};if(s=l(a),this.getData("selectedFields").length||(this.data.selectedFields=l(o.lookup_field_properties.fields)),JSON.stringify(s)!==JSON.stringify(this.getData("selectedFields"))){for(var n=r.length,c=function(e,t){return e.filter((function(e){return e.id===t}))[0]},d=0;d<n;d++)c(a,r[d].id)||(p={_delete:!0,api_name:r[d].api_name,id:r[d].id},s.push(p));if(this.fieldsToBeDeleted)for(d=0;d<this.fieldsToBeDeleted.length;d++)c(s,this.fieldsToBeDeleted[d].id)||s.push(this.fieldsToBeDeleted[d]);i.fields=s,o.$.set("lookup_field_properties",i),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),o.$.save().then(function(){this.data.selectedFields=o.lookup_field_properties.fields,this.data.selectedFields.splice(this.getData("currentSelectedFields").length),o.lookup_field_properties.fields=this.getData("currentSelectedFields"),this.fieldsToBeDeleted=[],this.overRideFieldsForTable(),this.getData("showFilter")&&(this.setData({showFilter:!1,criteria:"",currentPage:1,navigatedRec:0}),$L(".lookupFilterOpen").removeClass("lookupFilterOpen")),this.renderPage()}.bind(this),function(){t.component.clearSelectedFields();var e=t.component.getSelectedFields();o.lookup_field_properties.fields=e,this.data.selectedFields={},"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1),renderingUtils.displayPermissionDenied()}.bind(this))}},fetchRecords:function(e,t,o,a,r){if(this.data.cxPropAdditionalParams&&Object.keys(this.data.cxPropAdditionalParams).length&&(t=Object.assign(t,this.data.cxPropAdditionalParams)),this.data.cxPropQueryParam)for(var i in this.data.cxPropQueryParam)t[i]=this.data.cxPropQueryParam[i];return this.getMethods("beforeRequestChangeData")&&this.executeMethod("beforeRequestChangeData",t,r,this.data.cxPropField),new Promise((function(a,i){var s=store.model[e].fieldList,p={};for(var l in s)s[l].type&&Lyte.Transform.hasOwnProperty(s[l].type)&&Lyte.Transform[s[l].type].deserialize&&(p[l]=s[l]);store.findAll(e,t,o,!1,r).then((function(t){for(var o=t[e],r=0;r<o.length;r++)for(var i in p)o[r][i]&&(o[r][i]=Lyte.Transform[p[i].type].deserialize(o[r][i],i,e,"id"));o.info=t.info,o.meta=t.meta,o.$={meta:t.info},commonUtils.showHideLoadingDiv(!1),a(o)}),(function(e){var t=JSON.parse(e.response);"NO_PERMISSION"===t.code?renderingUtils.displayPermissionDenied():"INVALID_QUERY"!==t.code&&"INVALID_DATA"!==t.code||(commonUtils.showHideLoadingDiv(!1),crmui.showMsgBand("error",I18n.getMsg("crm.lookup.advance.error.msg"),5e3)),i()}))}))},fetchRelatedListRecords:function(e,t,o,a){return new Promise((function(r,i){store.triggerAction(e,"fetchrelatedList",{entityid:t,relapiname:o},a).then((function(t){t.data=t.data?t.data:[],t.data=t.data?store.pushPayload(e,t.data):[],r(t)}),(function(e){"NO_PERMISSION"===JSON.parse(e.response).code&&renderingUtils.displayPermissionDenied(),i()}))}))},fetchFilteredRecords:function(e,t){var o=this.getData("criteria"),a=this.getData("currentPage"),r={type:"Search",from:"Lookup"};"next"===e?a++:"prev"===e&&a--;var i={page:a,per_page:this.getData("perPage"),fields:this.getData("requiredFieldsForApi"),approved:"both",approval_state:"approved,approval_process_pending,approval_process_rejected"};o&&o.length&&(r.criteria=o),this.getData("relatedRecordCriteria")&&this.getData("relatedRecordCriteria").length&&(r.criteria=r.criteria?r.criteria+"and"+this.getData("relatedRecordCriteria"):this.getData("relatedRecordCriteria")),this.getData("searchBarCriteria")&&this.getData("searchBarCriteria").length&&(r.criteria=r.criteria?r.criteria+"and"+this.getData("searchBarCriteria"):this.getData("searchBarCriteria")),this.data.defaultCriteriaStr&&this.data.defaultCriteriaStr.length?r.criteria=r.criteria?r.criteria+"and"+this.data.defaultCriteriaStr:this.data.defaultCriteriaStr:this.getData("defaultCriteria")&&this.getData("defaultCriteria").length&&this.defaultCriteriaPattern&&(r.criteria=r.criteria?r.criteria+"and"+this.defaultCriteriaPattern:this.defaultCriteriaPattern),Object.keys(this.getData("sortDetails")).length>1&&Object.assign(i,{sort_order:this.getData("sortDetails").sort_order,sort_by:this.getData("sortDetails").sort_by}),Object.keys(this.lookupFilterQueryDetails).length&&this.lookupFilterQueryDetails.query_id&&(i.query_id=this.lookupFilterQueryDetails.query_id),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!0),this.relatedListMode?this.searchUsingDO(r.criteria,i,e,t):this.fetchRecords(this.getData("modId"),i,!1,void 0,r).then(function(o){var a=o&&o.length;o=a?o:[];var r=!!a&&o.$.meta.more_records;this.updateNavigators(o,r,e,t),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1)}.bind(this),(function(){"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1),_cruxUtils.showPermissionDeniedModal()}))},selectTheSingle:function(e){for(var t,o,a=this.getData("record"),r=this.getData("displayField"),i=a.length,s=0;s<i;s++)if(e===a[s].id){t="Full_Name"===r?a[s][r]?a[s][r]:a[s].First_Name?a[s].First_Name+" "+a[s].Last_Name:a[s].Last_Name:a[s][r],this.setData({lookupSingle:t,selectedSingle:e,currentSelectedRecord:a[s]}),this.data.currentSelectedRecord.displayName=t,o=a[s];break}this.bool||(this.setData("renderLookup",!1),this.close(),this.getMethods("onSelect")&&this.executeMethod("onSelect"),this.getMethods("onValueChange")&&(this.setData("cxPropValue",{id:this.getData("selectedSingle"),name:this.getData("lookupSingle")}),o.name=this.getData("lookupSingle"),this.executeMethod("onValueChange",this.data.cxPropReturnFullObjectOnGet?o:this.data.cxPropValue)))},close:function(){store.peekRecord("module",this.data.modId).lookup_field_properties=void 0,this.setData("show",!1)},updateNavigators:function(e,t,o,a){this.setData({record:e,hasMoreRecords:t}),"next"===o?(this.setData("currentPage",this.getData("currentPage")+1),this.setData("navigatedRec",a),this.setData("navigatorRecordLen",t?this.getData("navigatorRecordLen")+this.getData("perPage"):this.getData("navigatorRecordLen")+e.length-1)):"prev"===o&&(this.setData("currentPage",this.getData("currentPage")-1),this.setData("navigatedRec",a),this.setData("navigatorRecordLen",t?this.getData("currentPage")*this.getData("perPage")+1:this.getData("perPage")*(this.getData("currentPage")-1)+recs.length)),1!==this.getData("currentPage")||"false"!==t&&t?1===this.getData("currentPage")&&t&&this.setData("navigatorRecordLen",this.getData("perPage")+1):this.setData("navigatorRecordLen",e.length),this.getData("currentPage")>=100&&this.setData({hasMoreRecords:!1,navigatorRecordLen:e.length}),"undefined"!=typeof commonUtils&&commonUtils.showHideLoadingDiv&&commonUtils.showHideLoadingDiv(!1),this.executeMethod("onDataLoaded")},searchUsingDO:function(e,t,o,a){var r=this.getData("lookupUrlForCampaign"),i=e?"searchcriteria=":"",s=t.page,p=t.sort_order?"sort_"+t.sort_order:void 0,l=t.sort_by;r+="&luceneSearch=true&isFromFilterView=true",s&&(r+="&FROM_INDEX="+(s*this.data.perPage-9)+"&TO_INDEX="+s*this.data.perPage),p&&l&&(r+="&sortColumnString="+l+"&sortOrderString="+p),$L("#navigateBack, #navigateForward").addClass("pEvents"),i+=e?encodeURIComponent(e):"",i+=e?"&"+csrfParamName+"="+csrfToken:csrfParamName+"="+csrfToken;$.ajax({url:r,type:"POST",data:i,success:function(e){if("error"===e.status)crmui.showMsgBand("error",I18n.getMsg("crm.lookup.advance.error.msg"),5e3);else{e.body=e.body?e.body:[],e.body=e.body?store.pushPayload(this.data.modId,e.body):[],this.setData("record",e.body),this.setData("hasMoreRecords",!!e.hasMoreRecords&&e.hasMoreRecords),this.executeMethod("onDataLoaded");var t=e.body?e.body:[],r=!!e.hasMoreRecords&&e.hasMoreRecords;this.updateNavigators(t,r,o,a)}$L("#navigateBack, #navigateForward").removeClass("pEvents"),$L(".entityLookupTable .lyteTableScroll").resetScrollbar()}.bind(this),error:function(e){commonUtils.showHideLoadingDiv(!1),401===e.status&&(renderingUtils.displayPermissionDenied(),$("crm-entity-lookup")[0].component.setData("ltPropShow",!1)),$L("#navigateBack, #navigateForward").removeClass("pEvents")}})},validateSearchValue:function(e,t,o,a){if(this.errorLabel)return _cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getValueForFields("crm.field.valid.check",this.errorLabel),ltPropWrapperClass:"lookupErrorMsg"}}),!1;if("string"==typeof e&&/[\uD800-\uDBFF][\uDC00-\uDFFF]+$/gi.test(e)){if(0===(e=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/gi,"")).trim().length)return _cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getValueForFields("crm.field.valid.check",t),ltPropWrapperClass:"lookupErrorMsg"}}),!1}else"string"==typeof e&&e.length&&(e=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/gi,"").trim());return"date"===o&&!Utils.isValidDate("YYYY-MM-DD",e)||"datetime"===o&&!Utils.compareDateandTime(e[0],e[1])||"string"==typeof e&&/^[`~!@#$%^&*()\-_=+\\|\][{}'";:/?.,><]+$/.test(e)&&"date"!==o&&"datetime"!==o&&"picklist"!==o&&"double"!==o&&"currency"!==o?(_cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getValueForFields("crm.field.valid.check",t),ltPropWrapperClass:"lookupErrorMsg"}}),!1):(this.errorLabel=void 0,!0)},showRelatedRecords:function(){this.relatedListMode=!1;var e=this.getData("relatedRecordData")[this.data.selectedRelatedRecordIndex];if(this.setData({searchDoMode:!1,currentPage:1,navigatedRec:0}),"multi"===e.id&&e.criteria||e.criteria)this.setData("relatedRecordCriteria",e.criteria);else if(this.data.lookupUrlForCampaign&&this.getData("lookupUrlForCampaign").length&&"all"!==e.id)this.relatedListMode=!0,this.selectedRecord=e.id;else if(e.id&&"all"!==e.id){var t="("+e.apiName+":equals:"+e.id+")";this.setData("relatedRecordCriteria",t)}else this.getData("criteria")?this.setData({relatedRecordCriteria:""}):this.setData({relatedRecordCriteria:"",criteria:""});this.renderPage()},closeColumnList:function(){this.setData("showColList",!1),this.isBigLookupTable()},pickListValidator:function(e,t,o){return!(o.length>19)||(crmui.showMsgBand("error",_cruxUtils.getI18n("crm.las.error.picklist.maxlimit"),3e3),!1)},lookupTableHeightCalc:function(){var e=renderingUtils.windowHeight;$L(this.$node).find(".entityLookupTable").css("max-height",e/2)},overRideFieldsForTable:function(){var e,t=this.getData("module"),o=!1;this.getData("cxPropFields")?(o=!0,e=this.getData("cxPropFields")):t.lookup_field_properties&&t.lookup_field_properties.fields&&(o=!0,e=$L.extend(!0,[],t.lookup_field_properties.fields));var a=function(e,t){return e.filter((function(e){return e.id===t}))[0]};let r=e.length;this.fieldsToBeDeleted=[];for(var i=0;i<r;i++){if(o){var s=a(this.data.availableFields,e[i].id);s||this.fieldsToBeDeleted.push({_delete:!0,api_name:e[i].api_name,id:e[i].id}),e[i]=s}if(e[i]){if(e[i].yieldName&&delete e[i].yieldName,e[i].fixed&&delete e[i].fixed,e[i].id===t.display_field.id||"POTENTIAL_NAME"===e[i].column_name||"POTENTIALID"===e[i].column_name){if(e[i].yieldName="aTag",e[i].mandatoryColumn="true",e[i].id===t.display_field.id&&e[i].field_label){e[i].display_field=!0;var p={displayMsg:I18n.getMsg("crm.lookup.searchby.placeholder",e[i].field_label),apiName:e[i].api_name};if("Products"===this.data.module.api_name){for(var l of this.data.availableFields)if("Product_Code"===l.api_name&&(l.profiles&&l.profiles[0]&&"hidden"!==l.profiles[0].permission_type||l.visible)){this.isProductCodeAvailable=l;break}this.isProductCodeAvailable&&(p.displayMsg+=" / "+this.isProductCodeAvailable.field_label)}this.data.searchBarAttr.displayMsg!==p.displayMsg&&this.setData("searchBarAttr",p)}if(!o)break}"lookup"===e[i].data_type||"multi_module_lookup"===e[i].data_type?e[i].yieldName="lookup":999===e[i].ui_type?e[i].yieldName="territory":"integer"!==e[i].data_type&&"bigint"!==e[i].data_type||(e[i].cxPropDecimalAllowed=!1),e[i].sortable||(e[i].cxPropClass="cursorDefault"),this.getData("lookupUitypeComparator").in.includes(e[i].ui_type)?(e[i].freeze=!0,8!==e[i].ui_type&&221!==e[i].ui_type&&20!==e[i].ui_type&&55!==e[i].ui_type&&e[i].ui_type!==CrmField.UITYPES.LAYOUT&&e[i].ui_type!==CrmField.UITYPES.WIZARD&&(e[i].noOverride=!0),e[i].ui_type===CrmField.UITYPES.LAYOUT||e[i].ui_type===CrmField.UITYPES.WIZARD||999===e[i].ui_type?e[i].type="multisearch":e[i].type="multiple",999===e[i].ui_type&&(e[i].cxTypeMapping="layout",e[i].modelReq="territory"),e[i].filterClass="preventWheel",e[i].maxLimit="20",e[i].disableExtraValue=!0):this.getData("lookupUitypeComparator").starts_with.includes(e[i].ui_type)?e[i].maxLength=200:this.getData("lookupUitypeComparator").equals.includes(e[i].ui_type)&&(e[i].maxLength=20),209===e[i].ui_type&&(e[i].tagWidth="90px")}else e.splice(i,1),i--,r--}e[0].fixed="enable",this.setData("header",e)},rollBackFilterComponent:function(){var e=this.$node.querySelector("crux-lookupfilter-component");if(e&&this.getData("showFilter")&&this.filterValueIds){for(var t,o=(e=e.component).getBackupFilter(this.data.header),a=o.length,r=0;r<a;r++)this.filterValueIds.includes(o[r].id)||(o.splice(r,1),r--,a--,t=!0);t&&(e.setData("getBackfilter",o),this.fromSearchBar=!0,e.$node.querySelector(".cxLookupClearFilter").click(),this.fromSearchBar=!1,e.displayFilter())}},lookupFilterQueryHandling(){var e=this.data.cxPropField;this.lookupFilterQueryDetails={},e&&e.lookup&&e.lookup.query_details&&(this.lookupFilterQueryDetails=e.lookup.query_details)},observeValue:function(){if(this.getData("cxPropValue"))try{this.setData("value",JSON.parse(this.getData("cxPropValue"))),this.setData("selectedSingle",this.getData("value").id)}catch(e){this.setData("value",this.data.cxPropValue),this.setData("selectedSingle",this.data.value.id)}}.observes("cxPropValue").on("init"),observeFieldsForApi:function(){this.setData("requiredFieldsForApi",[]);var e=this.getData("header");for(var t of(this.getData("cxPropAllFieldsNeeded")&&(e=this.getData("module").fields),e))this.data.requiredFieldsForApi.push(t.api_name);var o=this.getData("cxPropDefaultFields")&&this.getData("cxPropDefaultFields").api_names?this.getData("cxPropDefaultFields").api_names:[],a=this.getData("cxPropDefaultFields")&&this.getData("cxPropDefaultFields").id?this.getData("cxPropDefaultFields").id:[];if(Object.keys(a))for(var r of a){var i=store.peekRecord("field",r);i&&i.api_name&&(o.includes(i.api_name)||o.push(i.api_name))}if(Object.keys(o))for(var s of o)this.data.requiredFieldsForApi.includes(s)||this.data.requiredFieldsForApi.push(s);var p=this.getData("lookupFieldId")?this.getData("lookupFieldId"):this.data.cxPropField&&this.data.cxPropField.id?this.data.cxPropField.id:"";if(p){for(var l of this.data.fieldOfLookupVal)l.lookup_field.id==p&&(this.data.requiredFieldsForApi.includes(l.related_field.api_name)||this.data.requiredFieldsForApi.push(l.related_field.api_name));this.data.requiredFieldsForApi.includes("Currency")||this.data.requiredFieldsForApi.push("Currency")}this.isBigLookupTable()}.observes("header"),flushDataofComponent:function(){delete this.relatedListMode,delete this.selectedRecord,this.setData({record:[],selectedRelatedRecordIndex:0,relatedRecordData:[],criteria:"",relatedRecordCriteria:"",searchBarCriteria:"",ltPropBindToBody:!1,selectedSingle:"",lookupUrlForCampaign:"",flushView:!1,fieldOfLookupVal:[],lookupSingle:""})}.observes("flushView")},{mixins:["crux-lookup-mixin","crux-aria-lookup-mixin"]}),Lyte.Component.register("crux-lookupfilter-component",{_template:'<template tag-name="crux-lookupfilter-component"> <template is="if" value="{{cxPropShowFilter}}"><template case="true"> <template is="for" items="{{cxPropDisplayFields}}" item="field" index="index"> <template is="if" value="{{checkNoFilter(field,cxPropOnlyFilterable)}}"><template case="true"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}} {{if(field.cxNoFilter,\'cxLookupFieldList\')}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <div class="{{if(field.customWidth,\'\',\'w150\')}} mT20"> </div> </lyte-th> </template><template case="false"><template is="if" value="{{expHandlers(field.yield,\'===\',true)}}"><template case="true"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <template is="if" value="{{expHandlers(expHandlers(field.yieldName,\'===\',\'filter\'),\'&amp;&amp;\',cxPropEndFilter)}}"><template case="true"> <lyte-button data-zcqa="{{applyZcqa}}" lt-prop-appearance="primary" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="{{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'true\',\'false\')}}" onclick="{{action(\'onClickApply\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropApplyText}} </template> </lyte-button> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <lyte-button data-zcqa="{{clearZcqa}}" lt-prop-class="{{cxPropClearClass}}" onclick="{{action(\'clearFilter\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropClearText}} </template> </lyte-button> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(filterAtfirst,\'&amp;&amp;\',expHandlers(index,\'===\',0))}}"><template case="true"> <div class="mT20 cxLookupFilterButtonWrap"> <lyte-button class="dIB cxVam {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'disabled\',\'\')}}" data-zcqa="" lt-prop-appearance="primary" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="true" onclick="{{action(\'onClickApply\',event)}}"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.apply.filter\')}} </template> </lyte-button> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <lyte-button class="dIB cxVam mL10 {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableClear,\'!\')),\'disabled\',\'\')}}" data-zcqa="" lt-prop-appearance="default" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="\'rue" onclick="{{action(\'clearFilter\',event)}}"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.title.clear.name\')}} </template> </lyte-button> </template></template> </div> </template></template> </template></template> </lyte-th> </template><template case="false"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{if(field.cxNoFilter,\'cxLookupFieldList\')}} {{field.cxPropClass}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <div class="cxLookupCriteriaFilter"> <template is="if" value="{{cxPropComparator}}"><template case="true"> <crux-dropdown id="cruxComparator{{index}}" cx-prop-class="{{if(field.customWidth,\'\',\'w150\')}} cxLookupFilterscomparator cxBoxDropdown" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,expHandlers(\'comparator_\',\'+\',field.cxPropFilterZcqa),expHandlers(\'comparator_\',\'+\',index))}}" cx-prop-tabindex="1" cx-prop-maxsearch="{{maxSearchComparator}}" cx-prop-options="{{cruxLookupFilterComparator(field,cxPropFormulaUitypes,cxPropContent)}}" cx-prop-user-value="name" cx-prop-system-value="api_val" on-option-select="{{method(\'queryBuild\',expHandlers(index,\'-\',firstIndex),this)}}" on-show="{{method(\'lookupFilterDropdownOpened\')}}" on-hide="{{method(\'lookupFilterDropdownClosed\')}}" cx-prop-placeholder="{{if(cxPropComparatorPlaceholder,cxPropComparatorPlaceholder,field.comparatorPlaceholder)}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,true)}}"> </crux-dropdown> </template></template> <div class="{{if(field.customWidth,\'\',\'w150\')}} cxCriteriaInputSection mT20"> <template is="if" value="{{reRender}}"><template case="true"> <template is="if" value="{{field.noOverride}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-allow-negative-value="{{if(ifEquals(field.cxPropAllowNegativeValue,false),false,true)}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" on-calendar-open="{{method(\'show\')}}" on-calendar-close="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" cx-prop-time-zone="" model-req="{{field.modelReq}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" on-before-add="{{method(\'onBeforeAdd\',field.cxTypeMapping)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" max-user-drop-limit-err="{{method(\'userCompMaxLimitErr\',field.maxLimit)}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'===\',\'lookup\'),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'text\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'email\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'twitter\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'phone\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'text-area\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'website\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'multi-picklist\')),\'||\',expHandlers(field.ui_type,\'===\',\'100\'))}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-text-component" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-appearance="box" cx-prop-direction="vertical" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-ignore-empty-value="true" cx-prop-type="single" onkeyup="{{action(&quot;filterSetValue&quot;,&quot;text&quot;,event)}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(field.cxTypeMapping,\'===\',\'tag\')}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-tag-component" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-appearance="box" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-ignore-empty-value="true" onkeyup="{{action(&quot;filterSetValue&quot;,event)}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'===\',\'date\'),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'date-time\')),\'&amp;&amp;\',cruxDateFilterComparator(filterQuery,index,firstIndex))}}"><template case="true"> <template is="component" id="cruxElem{{index}}Number" component-name="crux-number-component" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" model-req="{{field.modelReq}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" cxpropmaxlength="4" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> <template is="component" id="cruxElem{{index}}Time" component-name="crux-picklist-component" cx-prop-picklist-values="{{cxPropTimeOptions}}" cx-prop-user-value="name" cx-prop-system-value="api_val" cx-prop-value="{{cxPropTimeOptions[0].name}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="create" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"> <template is="component" id="cruxElem{{index}}" component-name="{{if(ifEquals(field.cxTypeMapping,\'date-time\'),\'crux-date-component\',expHandlers(expHandlers(\'crux-\',\'+\',field.cxTypeMapping),\'+\',\'-component\'))}}" cx-prop-allow-negative-value="{{if(ifEquals(field.cxPropAllowNegativeValue,false),false,true)}}" on-calendar-open="{{method(\'show\')}}" on-calendar-close="{{method(\'hide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" model-req="{{field.modelReq}}" cx-prop-time-zone="" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" on-before-add="{{method(\'onBeforeAdd\',field.cxTypeMapping)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" max-user-drop-limit-err="{{method(\'userCompMaxLimitErr\',field.maxLimit)}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> <template is="if" value="{{isBetweenCheck(isBetween,isBetweenArr,index,firstIndex)}}"><template case="true"> <p>and</p> <template is="component" id="cruxElem{{index}}" component-name="{{if(ifEquals(field.cxTypeMapping,\'date-time\'),\'crux-date-component\',expHandlers(expHandlers(\'crux-\',\'+\',field.cxTypeMapping),\'+\',\'-component\'))}}" cx-prop-allow-negative-value="{{if(ifEquals(field.cxPropAllowNegativeValue,false),false,true)}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" cx-prop-time-zone="" cx-prop-from="filter" cx-prop-field="{{field}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}" on-calendar-open="{{method(\'show\')}}" on-calendar-close="{{method(\'hide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}"></template> </template></template> </template></template> </template></template></template></template></template></template> </template></template> </div> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(filterAtfirst,\'!\'),\'&amp;&amp;\',expHandlers(index,\'===\',firstIndex)),\'&amp;&amp;\',expHandlers(cxPropEndFilter,\'!\'))}}"><template case="true"> <div class="cxLookupFilterButtonWrap"> <template is="if" value="{{cxPropFilterButton}}"><template case="true"> <lyte-button lt-prop-size="small" data-zcqa="{{applyZcqa}}" lt-prop-tab-index="0" lt-prop-appearance="primary" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="{{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'true\',\'false\')}}" onclick="{{action(\'onClickApply\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropApplyText}} </template> </lyte-button> </template><template case="false"> <a data-zcqa="{{applyZcqa}}" class="cxLookupApplyFilter cP dIB {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'disabled eventNone\',\'\')}} {{cxPropApplyClass}}" onclick="{{action(\'onClickApply\',event)}} ">{{cxPropApplyText}}</a> </template></template> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <template is="if" value="{{cxPropClearButton}}"><template case="true"> <lyte-button lt-prop-size="small" data-zcqa="{{clearZcqa}}" lt-prop-tab-index="0" lt-prop-class="{{cxPropClearClass}}" lt-prop-disabled="{{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableClear,\'!\')),\'lyte-true\',\'false\')}}" onclick="{{action(\'clearFilter\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropClearText}} </template> </lyte-button> </template><template case="false"> <a data-zcqa="{{clearZcqa}}" class="cxLookupClearFilter {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableClear,\'!\')),\'disabled eventNone\',\'\')}} {{cxPropClearClass}}" onclick="{{action(\'clearFilter\',event)}} ">{{cxPropClearText}}</a> </template></template> </template></template> </div> </template></template> </lyte-th> </template></template></template></template> </template></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]},{type:"attr",position:[3]},{type:"component",position:[3],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[3]},{type:"component",position:[3],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}]}},default:{}}],_observedAttributes:["module","cxPropModuleName","cxPropShowFilter","currentQuery","cxPropHeaderFields","cxPropDisplayFields","cxPropContent","cxPropNoValidation","cxPropEndFilter","cxPropFormulaUitypes","cxPropComparator","cxPropOnlyFilterable","cxPropDefaultComparator","cxPropDatatypeComparator","cxPropDatePattern","cxPropPlaceHolder","cxPropDisableFilter","cxPropApplyText","cxPropClearText","cxPropApplyClass","cxPropClearClass","cxPropComparatorPlaceholder","cxPropMaxFilter","cxPropUnselectComparator","cxPropDateComparaTors","cxPropTimeOptions","cxPropEncryptFldComparator","enableFilter","enableClear","filterQuery","cxPropShowClear","getBackfilter","firstIndex","reRender","isBetween","filterAtfirst","cxPropFilterButton","cxPropClearButton","clearZcqa","applyZcqa","head","maxSearchComparator","isBetweenArr","cxPropAria"],data:function(){return{module:Lyte.attr("object",{default:{}}),cxPropModuleName:Lyte.attr("string",{default:""}),cxPropShowFilter:Lyte.attr("boolean",{default:!1}),currentQuery:Lyte.attr("object",{default:{}}),cxPropHeaderFields:Lyte.attr("array",{default:[],hideAttr:!0}),cxPropDisplayFields:Lyte.attr("array",{default:[],hideAttr:!0}),cxPropContent:Lyte.attr("object",{default:{786:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],200:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],24:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],333:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],14:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],209:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],35:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],52:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],32:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],36:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],2:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],26:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],8:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],20:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],300:[{name:_cruxUtils.getI18n("is"),api_val:"equal"}],301:[{name:_cruxUtils.getI18n("is"),api_val:"equal"}],0:[{name:_cruxUtils.getI18n("starts with"),api_val:"starts_with"},{name:_cruxUtils.getI18n("contains"),api_val:"contains"},{name:_cruxUtils.getI18n("doesn't contain"),api_val:"not_contains"},{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}]}}),cxPropNoValidation:Lyte.attr("boolean",{default:!1}),cxPropEndFilter:Lyte.attr("boolean",{default:!1}),cxPropFormulaUitypes:Lyte.attr("object",{default:{}}),cxPropComparator:Lyte.attr("boolean",{default:!0}),cxPropOnlyFilterable:Lyte.attr("string",{default:""}),cxPropDefaultComparator:Lyte.attr("object",{default:{starts_with:[0]}}),cxPropDatatypeComparator:Lyte.attr("object",{default:{}}),cxPropDatePattern:Lyte.attr("string",{default:Crm.userDetails.DATE_PATTERN}),cxPropPlaceHolder:Lyte.attr("object",{default:{}}),cxPropDisableFilter:Lyte.attr("boolean",{default:!1}),cxPropApplyText:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.button.apply.filter")}),cxPropClearText:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.title.clear.name")}),cxPropApplyClass:Lyte.attr("string",{default:""}),cxPropClearClass:Lyte.attr("string",{default:""}),cxPropComparatorPlaceholder:Lyte.attr("string",{default:""}),cxPropMaxFilter:Lyte.attr("number",{default:-1}),cxPropUnselectComparator:Lyte.attr("boolean",{default:!1}),cxPropDateComparaTors:Lyte.attr("object",{default:{today:"${TODAY}",tomorrow:"${TOMORROW}",tommorow_onwards:"${TOMORROWPLUS}",yesterday:"${YESTERDAY}",this_week:"${THISWEEK}",this_month:"${THISMONTH}",last_week:"${LASTWEEK}",last_month:"${LASTMONTH}",this_year:"${THISYEAR}",current_fy:"${THISFY}",current_fq:"${THISFQ}",last_year:"${LASTYEAR}",previous_fy:"${PREVFY}",previous_fq:"${PREVFQ}",next_year:"${NEXTYEAR}",next_fy:"${NEXTFY}",next_fq:"${NEXTFQ}"}}),cxPropTimeOptions:Lyte.attr("array",{default:[{name:_cruxUtils.getI18n("days"),api_val:"DAYS"},{name:_cruxUtils.getI18n("weeks"),api_val:"WEEKS"},{name:_cruxUtils.getI18n("months"),api_val:"MONTHS"}]}),cxPropEncryptFldComparator:Lyte.attr("object",{default:{}}),enableFilter:Lyte.attr("boolean",{default:!1}),enableClear:Lyte.attr("boolean",{default:!1}),filterQuery:Lyte.attr("array",{default:[]}),cxPropShowClear:Lyte.attr("boolean",{default:!1}),getBackfilter:Lyte.attr("array",{default:[]}),firstIndex:Lyte.attr("number",{default:0}),reRender:Lyte.attr("boolean",{default:!0}),isBetween:Lyte.attr("boolean",{default:!1}),filterAtfirst:Lyte.attr("boolean",{default:!1}),cxPropFilterButton:Lyte.attr("boolean",{default:!1}),cxPropClearButton:Lyte.attr("boolean",{default:!1}),clearZcqa:Lyte.attr("string",{default:"clear_filter"}),applyZcqa:Lyte.attr("string",{default:"apply_filter"}),head:Lyte.attr("object",{default:"undefined"!=typeof crmConstants?crmConstants.moduleDisplayField:{Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"]}}),maxSearchComparator:Lyte.attr("string",{default:void 0}),isBetweenArr:Lyte.attr("array",{default:[]}),cxPropAria:Lyte.attr("boolean",{default:!1})}},showFilter:function(e){e.newValue?this.initialSetup():this.setData({isBetween:!1,isBetweenArr:[],addSearch:!1,filterQuery:[],currentQuery:[]})}.observes("cxPropShowFilter"),didConnect:function(){this.initialSetup()},initialSetup:function(){this.getMethods("setLookupFilterConditions")&&(a=this.executeMethod("setLookupFilterConditions",this),this.setData("cxPropContent",Object.assign(this.data.cxPropContent,a))),this.displayChanged()},displayChanged:function(){for(var e=this.getData("cxPropDisplayFields").slice(),t=this.getData("cxPropPlaceHolder"),o=this.getData("cxPropOnlyFilterable"),a=0,r=e.length;a<r;a++)if(e[a].id&&!e[a].yield&&(116!==e[a].ui_type||!e[a].formula||!e[a].formula.dynamic)&&!e[a].noFilter&&!e[a].cxNoFilter&&(!o.length||!1!==e[a][o])){this.setData({firstIndex:a,cxPropHeaderFields:e.slice(a)});break}for(a=0,r=(e=this.getData("cxPropHeaderFields")).length;a<r;a++){var i="object"==typeof e[a].filterProperties?e[a].filterProperties:{};t[e[a].ui_type]?i.placeholder=t[e[a].ui_type]:t[e[a].cxTypeMapping]&&(i.placeholder=t[e[a].cxTypeMapping]),e[a].cxPropType&&(i.type=e[a].cxPropType),e[a].maxLimit&&(i.maxLimit=e[a].maxLimit),e[a].maxLength&&(i.maxlength=e[a].maxLength),void 0!==e[a].disableExtraValue&&(i.disableExtraValue=e[a].disableExtraValue),void 0!==e[a].cxPropDecimalAllowed&&(i.decimalAllowed=e[a].cxPropDecimalAllowed),void 0!==e[a].freeze&&(i.freeze=e[a].freeze),e[a].maxValue&&(i.maxvalue=e[a].maxValue),"boolean"===e[a].cxTypeMapping&&(i.noneSelected=!0),e[a].userQueryParams&&(i.queryParam=e[a].userQueryParams),e[a].filterProperties=JSON.stringify(i)}this.setData("cxPropHeaderFields",e),this.displayFilter()},fieldChanged:function(){this.displayChanged()}.observes("cxPropDisplayFields"),onOpenFilter:function(){if(this.getData("cxPropShowFilter")){var e=$L(this.$node).parents("lyte-table");e&&e[0]&&e[0].scrollTable()}}.observes("cxPropShowFilter"),methods:{beforeShow:function(e,t){if(this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",e,t)},beforeHide:function(e,t){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",e,t)},show:function(e,t){this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},hide:function(e,t){this.getMethods("onHide")&&this.executeMethod("onHide",e,t)},queryBuild:function(e,t,o,a){var r,i=this.getData("firstIndex")+e,s=this.getData("cxPropHeaderFields"),p=this.getData("head"),l=JSON.parse(JSON.stringify(this.getData("filterQuery"))),n=this.getData("isBetweenArr").slice(),c=l[e]?l[e]:{},d=s[e].cxTypeMapping,u=this.getData("cxPropDatePattern"),x=s[e].noOverride,m=this.getData("cxPropDateComparaTors");if(x||("lookup"===d||"text"===d||"email"===d||"multi-picklist"===d||"twitter"===d||"phone"===d||"text-area"===d||"website"===d||"100"===s[e].ui_type?d="text":"date-time"===d&&(d="date")),"lookup"===s[e].data_type||"lookup"===s[e].cxTypeMapping){var y="object"==typeof s[e].lookup.module?s[e].lookup.module.api_name:s[e].lookup.module,h=p[y]&&p[y][0]?p[y][0]:"Name";r=s[e].api_name+"."+h}else r=s[e].api_name;"in_the_last"!==a&&"due_in"!==a&&(delete c.ageIn,l[e]=c,this.setData("filterQuery",l),Lyte.Component.registeredHelpers.cruxDateFilterComparator.bind(this,l,i,this.getData("firstIndex"))());var P=t.parentElement.querySelectorAll("crux-"+d+"-component");if("in_the_last"===a||"due_in"===a)c.ageIn=a,l[e]=c,this.setData("filterQuery",l),Lyte.Component.registeredHelpers.cruxDateFilterComparator.bind(this,l,i,this.getData("firstIndex"))(),$L("#cruxElem"+i+"Number")[0].cxProp("disabled",!1),$L("#cruxElem"+i+"Time")[0].cxProp("disabled",!1);else if("empty"===a||"notempty"===a||"blocked"===a||"notblocked"===a||m[a]){c.field={api_name:r,id:s[e].id},"blocked"===a||"notblocked"===a?(c.comparator="blocked"===a?"equal":"not_equal",c.value="${BLOCKED}"):"empty"===a||"notempty"===a?(c.comparator="equal",c.value="notempty"===a?"${NOTEMPTY}":"${EMPTY}"):(c.comparator="equal",c.value=m[a]),n[i]=!1,this.setData({isBetweenArr:n,cxPropHeaderFields:s}),c.empty=!0;for(var f=P.length,g=0;g<f;g++)P[g].cxProp("disabled",!0)}else if("between"===a||"not_between"===a){c.field={api_name:r,id:s[e].id},c.comparator=a,n[i]=!0;f=P.length;var v=[];("${EMPTY}"===c.value||"${NOTEMPTY}"===c.value||"${BLOCKED}"===c.value||Object.values(m).contains(c.value))&&(c.value="");for(g=0;g<f;g++){var b=P[g];if("datetime"===s[e].data_type||"date-time"===s[e].cxTypeMapping){var D=$L.moment(b.component.getValue(),u.toUpperCase()).validate();v[g]=D?x?this.getStartMinute(b.component.getValue(),u.toUpperCase()):this.getISODateTime(b.component.getValue(),u,"start"):b.component.getValue()}else if("date"===s[e].data_type||"date"===s[e].cxTypeMapping){D=$L.moment(b.component.getValue(),u.toUpperCase()).validate();v[g]=D?this.getDate(b.component.getValue()):b.component.getValue()}else v[g]=b.component.getValue();b.cxProp("disabled",!1)}c.value=v,this.setData({isBetweenArr:n,isBetween:!0,cxPropHeaderFields:s}),this.displayFilter(e)}else{var L;if(c.field={api_name:r,id:s[e].id},"datetime"===s[e].data_type||"date-time"===s[e].cxTypeMapping)if("equal"===a?(c.comparator="between",L=!0):"not_equal"===a?(c.comparator="not_between",L=!0):c.comparator=a,L&&c.value){var C="string"!=typeof(C=P[0].component.getValue())?C[0]:C,w=[];D=$L.moment(C,u.toUpperCase()).validate();w[0]=D?x?this.getStartMinute(C):this.getISODateTime(C,u,"start"):C,w[1]=D?x?this.getEndMinute(C,u.toUpperCase()):this.getISODateTime(C,u,"end"):C,c.value=w}else{var I=P[0].component.getValue();D=$L.moment(I,u.toUpperCase()).validate();c.value="greater_than"===a?Array.isArray(I)&&I.length?I[0]:D?x?this.getEndMinute(I,u.toUpperCase()):this.getISODateTime(I,u,"end"):I:"less_than"===a?Array.isArray(I)&&I.length?I[1]:D?x?this.getStartMinute(I,u.toUpperCase()):this.getISODateTime(I,u,"start"):I:"string"!=typeof I&&c.value?c.value[0]:D?x?this.getStartMinute(I,u.toUpperCase()):this.getISODateTime(I,u,"start"):I}else if("date"===s[e].data_type||"date"===s[e].cxTypeMapping){c.comparator=a;D=$L.moment(P[0].component.getValue(),u.toUpperCase()).validate();c.value=D?this.getDate(P[0].component.getValue()):P[0].component.getValue()}else c.comparator=a;("${EMPTY}"===c.value||"${NOTEMPTY}"===c.value||"${BLOCKED}"===c.value||Object.values(m).contains(c.value))&&(c.value=""),n[i]=!1,this.setData({isBetweenArr:n,cxPropHeaderFields:s}),c.value="date"===s[e].cxTypeMapping||"date-time"===s[e].cxTypeMapping?c.value:P[0].component.getValue();for(f=P.length,g=0;g<f;g++)P[g].cxProp("disabled",!1)}this.getData("cxPropUnselectComparator")&&"-1"===a?delete l[e]:l[e]=c,this.dispFilterApply=!1,this.setData("filterQuery",l);var M=this.getFilterQuery();this.setData("enableFilter",this.getData("cxPropDisableFilter")&&(M.comparator||M.group_operator)),this.setData("enableClear",this.getData("cxPropDisableFilter")&&(M.comparator||M.group_operator))},queryBuildComp:function(e,t,o,a){var r,i=this.getData("firstIndex")+e,s=JSON.parse(JSON.stringify(this.getData("filterQuery"))),p=s[e]?s[e]:{},l=this.getData("cxPropComparator"),n=(this.getData("cxPropContent"),this.getData("cxPropHeaderFields")),c=this.getData("isBetweenArr"),d=this.getData("cxPropDatePattern"),u=n[e].noOverride;if(!s[e]){var x={Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"]};if("lookup"===n[e].data_type||"lookup"===n[e].cxTypeMapping){var m=x[n[e].lookup.module.api_name]?x[n[e].lookup.module.api_name][0]:"Name";r=n[e].api_name+"."+m}else r=n[e].api_name;if(l)var y=this.getData("cxPropFormulaUitypes"),h=this.getData("cxPropContent"),P=Lyte.Component.registeredHelpers.cruxLookupFilterComparator.call(this,n[e],y,h)[0].api_val;p.field={api_name:r,id:n[e].id},"in_the_last"!==P&&"due_in"!==P||(p.ageIn=P,P="equal"),p.comparator=P}if(!l){var f=this.getData("cxPropDatatypeComparator"),g=Object.keys(f),v=g.length;if(v)for(var b=0;b<v;b++){var D="formula"===n[e].data_type?n[e].formula.return_type:"rollup_summary"===n[e].data_type?n[e].rollup_summary.return_type:n[e].data_type;if(f[g[b]].indexOf(D)>-1){P=g[b];break}}else{var L=this.getData("cxPropDefaultComparator");v=(g=Object.keys(L)).length;for(b=0;b<v;b++)if(L[g[b]].indexOf(n[e].ui_type)>-1){P=g[b];break}}p.comparator=P}var C=this.getData("cxPropDateComparaTors");if(p.ageIn){Object.values(C).contains(p.value);var w=$L("#cruxElem"+i+"Time")[0].component.getValue(),I=$L("#cruxElem"+i+"Number")[0].component.getValue();p.value="in_the_last"===p.ageIn?"${AGEIN":"${DUEIN",p.value=p.value+w.toUpperCase()+"}+"+I}else if(c[i]){var M=(t=this.$node.querySelectorAll(".cxCriteriaInputSection")[e]).firstElementChild.tagName,S=t.querySelectorAll(M),E=[];if("datetime"===n[e].data_type||"date-time"===n[e].cxTypeMapping){var F=$L.moment(S[1].component.getValue(),d.toUpperCase()).validate();E[1]=F?u?this.getEndMinute(S[1].component.getValue(),d.toUpperCase()):this.getISODateTime(S[1].component.getValue(),d,"end"):S[1].component.getValue(),F=$L.moment(S[0].component.getValue(),d.toUpperCase()).validate(),E[0]=F?u?this.getStartMinute(S[1].component.getValue(),d.toUpperCase()):this.getISODateTime(S[0].component.getValue(),d,"start"):S[0].component.getValue()}else if("date"===n[e].data_type||"date"===n[e].cxTypeMapping){F=$L.moment(S[1].component.getValue(),d.toUpperCase()).validate();E[1]=F?this.getDate(S[1].component.getValue()):S[1].component.getValue(),F=$L.moment(S[0].component.getValue(),d.toUpperCase()).validate(),E[0]=F?this.getDate(S[0].component.getValue()):S[0].component.getValue()}else E[1]=S[1].component.getValue(),E[0]=S[0].component.getValue();p.value=E}else if("date"===n[e].data_type||"date"===n[e].cxTypeMapping){F=$L.moment(t.component.getValue(),d.toUpperCase()).validate();p.value=F?this.getDate(t.component.getValue()):o||""}else if("datetime"===n[e].data_type||"date-time"===n[e].cxTypeMapping){if(F=$L.moment(t.component.getValue(),d.toUpperCase()).validate())if("equal"===p.comparator||"not_equal"===p.comparator||"between"===p.comparator||"not_between"===p.comparator)"equal"===p.comparator?p.comparator="between":"not_equal"===p.comparator&&(p.comparator="not_between"),(E=[])[0]=u?this.getStartMinute(o,d.toUpperCase()):this.getISODateTime(o,d,"start"),E[1]=u?this.getEndMinute(o,d.toUpperCase()):this.getISODateTime(o,d,"end"),p.value=E;else"less_than"===p.comparator?p.value=u?this.getStartMinute(o,d.toUpperCase()):this.getISODateTime(o,d,"start"):p.value=u?this.getEndMinute(o,d.toUpperCase()):this.getISODateTime(o,d,"end");else p.value=o}else"boolean"===n[e].data_type||"boolean"===n[e].cxTypeMapping?p.value=-1===o?void 0:o?"true":"false":p.value=o;s[e]=p,this.dispFilterApply=!1,this.setData("filterQuery",s);var T=this.getFilterQuery();this.setData("enableFilter",this.getData("cxPropDisableFilter")&&(T.comparator||T.group_operator)),this.setData("enableClear",this.getData("cxPropDisableFilter")&&(T.comparator||T.group_operator))},lookupFilterDropdownOpened:function(e,t){$L(t.childComp).addClass("cxDropbox"),this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},lookupFilterDropdownClosed:function(){this.getMethods("onHide")&&this.executeMethod("onHide")},onBeforeAdd:function(e,t,o){return"picklist"!==e&&"user"!==e||!this.getMethods("picklistAdd")||this.executeMethod("picklistAdd",e,t,o)},userCompMaxLimitErr:function(e){_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropMessage:_cruxUtils.getI18n("crux.comboBox.max.limit",e,_cruxUtils.getI18n("crm.label.users")),ltPropDuration:"2000",ltPropShow:!0}})}},actions:{filterSetValue:function(e,t){if(13===t.keyCode&&this.getMethods("applyFilter")){if("text"!==e&&"number"!==e&&"phone"!==e&&"date"!==e&&"twitter"!==e&&"phone"!==e&&"website"!==e&&"email"!==e&&"text-area"!==e)return;if(!this.getData("cxPropNoValidation"))var o=this.validate();this.getData("cxPropDisableFilter")&&(this.setData("enableFilter",!1),this.setData("enableClear",!1)),this.executeMethod("applyFilter",this,t,o)}},clearFilter:function(){this.clearFilter()},onClickApply:function(e,t){if(this.getMethods("applyFilter")){if(!this.getData("cxPropNoValidation"))var o=this.validate();this.getData("cxPropDisableFilter")&&this.setData("enableFilter",!1),this.executeMethod("applyFilter",this,t,o)}}},clearFilter:function(){this.getMethods("clearFilter")&&this.executeMethod("clearFilter",this,event),this.getData("cxPropDisableFilter")&&(this.setData("enableFilter",!1),this.setData("enableClear",!1));for(var e=this.getData("firstIndex"),t=this.getData("cxPropDisplayFields").length,o=0,a=this.getData("cxPropHeaderFields"),r=this.getData("cxPropContent"),i=this.getData("filterQuery");o<t;o++)if(i[o-e]){if(this.setData({isBetweenArr:[],isBetween:!1}),this.getData("cxPropComparator")){var s=this.$node.querySelector("#cruxComparator"+o),p=this.getData("cxPropFormulaUitypes"),l=(r=this.getData("cxPropContent"),Lyte.Component.registeredHelpers.cruxLookupFilterComparator.call(this,a[o],p,r)[0].api_val);s.cxProp("selected",l)}this.setData("reRender",!1),this.setData("reRender",!0)}this.displayFilter(),this.setData("filterQuery",[])},getFilterQuery:function(){var e=this.getData("filterQuery"),t=[],o={},a=0,r=this.getData("cxPropComparator");return e.forEach((function(e){if(e&&e.field&&(e.comparator||!r)&&e.value&&(e.value="string"==typeof e.value?e.value.trim(" "):e.value,Array.isArray(e.value)&&e.value.length&&""!==e.value[0]&&""!==e.value[1]||!Array.isArray(e.value)&&(e.value||e.empty||e.ageIn))){if("object"==typeof e.value)e.value=e.value&&e.value.id?e.value.id:e.value,null===e.value&&(e.value="");else if(e.ageIn&&!e.value[e.value.indexOf("+")+1])return void(e.value="");delete e.empty,t[a]=e,a++}})),t.length>=1?1===t.length?o=t[0]:(o.group_operator="AND",o.group=t):o={},this.setData("currentQuery",o),o},elemsValidate:function(){for(var e=this.getData("cxPropDisplayFields"),t=!0,o=e?e.length:0,a=this.getFilter(),r=this.getData("firstIndex"),i=0;i<o;i++)for(var s=this.$node.querySelectorAll("#cruxElem"+(i+r)+":not(template)"),p=s.length,l=0;l<p;l++){var n=s[l].component.getValue();if(n=Array.isArray(n)?n.length:n,a[i]&&n&&!(t=s[l].component.validate()))return t}return t},getFilter:function(){return this.getData("filterQuery").slice()},validate:function(){var e=this.betweenValidate();return!(!this.elemsValidate()||e&&!e.bool)},betweenValidate:function(){var e,t,o=this.getData("filterQuery"),a=this.getData("cxPropHeaderFields"),r={field:"",bool:!0},i=this,s=this.getData("firstIndex");return o.forEach((function(o,p){if(null!=o&&("between"===o.comparator||"not_between"===o.comparator)&&"string"!=typeof o.value){if("date-time"==a[p].cxTypeMapping||"date"==a[p].cxTypeMapping){if(e=new Date(o.value[0]),t=new Date(o.value[1]),null==e.toJSON()||null==t.toJSON())return!1}else if("number"==a[p].cxTypeMapping){if(e=Number(o.value[0]),t=Number(o.value[1]),NaN===e||NaN===t)return!1}else if(e=o.value[0],t=o.value[1],!e||!t){var l=_cruxUtils.getI18n("crm.field.valid.check",a[p].display_label);return!1}if(e>=t){r.field=a[p],r.bool=!1;var n=i.$node.querySelector("#cruxElem"+(p+s));if(n)var c=n.querySelector("input");if("datetime"==r.field.data_type||"date"==r.field.data_type)l=_cruxUtils.getI18n("crm.custom.field.less.than.equalto","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate")+"'","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.toDate")+"'");else l=_cruxUtils.getI18n("crm.custom.field.less.than.to1");return n&&n.component&&n.component.showAlert(l,c),!1}}})),r},displayFilter:function(e){var t=this.getData("firstIndex"),o=t+e,a=this.getData("cxPropDisplayFields"),r=this.getData("getBackfilter"),i=[],s=r.length,p=a.length,l=void 0!==o?o:0,n=(this.getData("cxPropHeaderFields"),[]);p=void 0!==e?o+1:p;for(var c=this.getData("cxPropComparator"),d=0;d<s;d++)i[d]=r[d].id;for(;l<p;l++){var u=this.getData("isBetweenArr").slice();o&&(u[o]=!0);var x=i.length?i.indexOf(a[l].id):-1;!r[x]||"between"!==r[x].comparator&&"not_between"!==currentItem||c||(u[l]=!0),this.setData("isBetweenArr",u);var m=this.$node.querySelector("#cruxComparator"+o);if(m&&m.classList.add("cxBoxDropdown"),-1!==x){var y=this.$node.querySelector("#cruxElem"+o);if(c)this.$node.querySelector("#cruxComparator"+x).ltProp("selected",r[x].comparator);for(var h=y.length,P=0;P<h;P++){var f=y[P];if("empty"===r[x].comparator||"notempty"===r[x].comparator||"blocked"===r[x].comparator||"notblocked"===r[x].comparator)y.cxProp("disabled",!0);else if("CRUX-USER-COMPONENT"===f.tagName){var g=r[x].value[P];f.component.setData("cxPropValue",{users:g})}else"CRUX-DATE-COMPONENT"===f.tagName?f.querySelector("lyte-input").ltProp("value",r[x].value[P]):"CRUX-PICKLIST-COMPONENT"===f.tagName?(f.cxProp("value",r[x].value[P]),f.cxProp("displayValue",r[x].value[P])):f.cxProp("value",r[x].value[P])}n[l-t]=r[x].filterQuery}}this.setData("filterQuery",n),this.setData("getBackfilter",[])},getBackupFilter:function(e){this.$node;for(var t=e.length,o=this.getData("filterQuery"),a=this.getData("cxPropComparator"),r=s.length,i=[],s=this.getData("cxPropDisplayFields"),p=[],l=this.getData("firstIndex"),n=this.getData("cxPropDateComparaTors"),c=0;c<t;c++)p[c]=e[c].id;c=0;for(var d=0;c<r;c++)if(o[c-l]&&-1!==p.indexOf(s[c].id)){var u=this.$node.querySelectorAll("#cruxElem"+c+":not(template)"),x=[],m=this.$node.querySelector("#cruxComparator"+c);u.forEach((function(e,t){"CRUX-DATE-COMPONENT"===e.tagName?x[t]=e.querySelector("lyte-input").ltProp("value"):x[t]=e.component.getValue()})),i[d]={filterQuery:o[c-l],value:x,id:s[c].id},"${NOTEMPTY}"===o[c].value?i[d].comparator="notempty":"${EMPTY}"===o[c].value?i[d].comparator="empty":"${BLOCKED}"===o[c].value||Object.values(n).contains(filter.value)?i[d].comparator="blocked":"between"===o[c].comparator||"not_between"===o[c-l].comparator?i[d].comparator=m&&a?m.ltProp("selected"):o[c-l].comparator:i[d].comparator=o[c-l].comparator,d++}return this.setData("getBackfilter",i),i},getDate:function(e){var t=this.getData("cxPropDatePattern"),o=this.convertUsrtoDefaultDatePattern(e,t);function a(e){return e<10?"0"+e:e}return o?o.getFullYear()+"-"+a(o.getMonth()+1)+"-"+a(o.getDate()):""},getStartMinute:function(e,t){var o=$L.moment(e,t).getDObj();return o.setSeconds("00"),$L.moment(o).format()},getEndMinute:function(e,t){var o=$L.moment(e,t).getDObj();return o.setSeconds("59"),$L.moment(o).format()},keyDownEvent:function(){this.$node.cxProp("aria")&&this.bindEventForAriaLookUpFilter()}.observes("cxPropShowFilter","cxPropContent","cxPropAria").on("didConnect")},{mixins:["crux-filter-utils","crux-element-validation","crux-aria-lookup-filter-mixin"]}),Lyte.Component.registerHelper("checkNoFilter",(function(e,t){return!!(e.noFilter||e.cxNoFilter||t.length&&!1===e[t])||!(116!==e.ui_type||!e.formula||!e.formula.dynamic)})),Lyte.Component.register("crux-grouper-radio-component",{_template:'<template tag-name="crux-grouper-radio-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem"></div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view">{{cxPropValue}}</template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropFieldLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(ifEquals(cxPropDirection,\'vertical\'),\'cxGrouperVertical\',\'cxGrouperHorizontal\')}}"> <template is="for" items="{{cxPropOptions}}" item="item" index="index"> <lyte-radiobutton lt-prop-type="{{cxPropType}}" id="{{cxPropId}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-class="{{cxPropClass}}" class="radio_button" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{&quot;position&quot;: &quot;followcursor&quot;, &quot;appearance&quot;: &quot;box&quot;}" lt-prop-tooltip-class="cxElementsTooltip" lt-prop-name="{{cxPropName}}" lt-prop-fire-on-init="{{cxPropFireOnInit}}" lt-prop-value="{{item[cxPropDisplayValue]}}" lt-prop-label="{{item[cxPropDisplayValue]}}" lt-prop-label-class="{{cxPropLabelClass}}" lt-prop-disabled="{{cxPropDisabled}}" data-zcqa="{{cxPropZcqa}}_{{item[cxPropDisplayValue]}}" on-changed="{{method(\'onRadioValueChanged\',item[cxPropDisplayValue])}}" on-before-checked="{{method(\'beforeCheckedRadio\',item[cxPropDisplayValue])}}" on-checked="{{method(\'onCheckedRadio\',item[cxPropDisplayValue])}}" on-before-unchecked="{{method(\'beforeUnchecked\',item[cxPropDisplayValue])}}" on-unchecked="{{method(\'onUncheckedRadio\',item[cxPropDisplayValue])}}" lt-prop-aria-radio="{{cxPropAriaRadio}}" lt-prop-aria="{{cxPropAria}}"></lyte-radiobutton> </template><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" class="{{cxPropErrorClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[0]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,2]},{type:"if",position:[3,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropField","cxPropOptions","cxPropDisabled","cxPropFieldKey","cxPropZcqa","cxPropId","cxPropName","cxPropType","cxPropErrorMessage","cxPropClass","cxPropLabelClass","cxPropFieldLabelClass","cxPropDisplayValue","selectedValue","isError","cxPropClearErrorMessage","cxPropErrorYield","cxPropEmptyValue","cxPropDirection","cxPropInfoTooltip","cxPropTooltip","selected","cxPropErrorClass","cxPropAria","cxPropAriaRadio","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropAriaErrorProperties"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropOptions:Lyte.attr("array"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string",{default:"default"}),cxPropErrorMessage:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropLabelClass:Lyte.attr("string"),cxPropFieldLabelClass:Lyte.attr("string",{default:""}),cxPropDisplayValue:Lyte.attr("string",{default:"display_label"}),selectedValue:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string"),cxPropDirection:Lyte.attr("string",{default:"horizontal"}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string"),selected:Lyte.attr("string"),cxPropErrorClass:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaRadio:Lyte.attr("object"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){var e=this.getData("cxPropFrom");"view"==e&&!this.getData("cxPropValue")&&this.getData("cxPropEmptyValue")?this.setData("cxPropValue",this.getData("cxPropEmptyValue")):"create"===e&&void 0===this.data.cxPropTooltip&&this.getData("cxPropDisabled")&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},getValue:function(){return this.getData("selected")},validate:function(){return!(!this.getData("selected")&&this.getData("cxPropField").required)||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR01,this):(this.getData("cxPropErrorMessage")||this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(_this.getData("cxPropField").field_label))),this.setData("isError",!0)),!1)},obsValue:function(){var e=this.getData("cxPropValue");if(e&&"create"===this.getData("cxPropFrom")){var t=this.$node.getElementsByClassName("radio_button");if(t[0])for(var o=0;o<t.length;o++){t[o].getAttribute("lt-prop-value")===e&&t[o].setAttribute("lt-prop-checked",!0)}}}.observes("cxPropValue","lyteViewPort").on("didConnect"),actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},methods:{onRadioValueChanged:function(e,t,o){this.getMethods("onChanged")&&this.executeMethod("onChanged",e,t,o)},beforeCheckedRadio:function(e,t,o){this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",e,t,o)},onCheckedRadio:function(e,t,o){this.setData("selected",e),this.getData("cxPropClearErrorMessage")&&this.setData("isError",!1),this.getMethods("onChecked")&&this.executeMethod("onChecked",e,t,o)},beforeUnchecked:function(e,t,o){this.getMethods("onBeforeUnchecked")&&this.executeMethod("onBeforeUnchecked",e,t,o)},onUncheckedRadio:function(e,t,o){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",e,t,o)},hideInfoTooltip:function(){this.showHideInfoTooltip()}},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),mandatoryType:function(){"red_accent_line"!=this.data.cxPropMandatoryType?(this.$node.querySelector(".cxMandatoryType")&&(this.$node.querySelector(".cxMandatoryType").style.color="red"),this.$node.querySelector(".cxMandatoryOptEnabled")||$L(this.$node.querySelector(".mandatoryField")).addClass("cxMandatoryOptEnabled")):this.$node.querySelector(".cxMandatoryOptEnabled")&&$L(this.$node.querySelector(".mandatoryField")).removeClass("cxMandatoryOptEnabled")}.observes("cxPropMandatoryType").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-grouper-checkbox-component",{_template:'<template tag-name="crux-grouper-checkbox-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem"></div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view">{{cxPropValue}}</template><template case="create"> <template is="if" value="{{expHandlers(expHandlers(cxPropFrom,\'===\',&quot;create&quot;),\'&amp;&amp;\',cxPropField[cxPropFieldKey])}}"><template case="true"> <div class="cxElementLabel {{cxPropFieldLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="dIB cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <div class="cxElementValue {{if(ifEquals(cxPropDirection,\'vertical\'),\'cxGrouperVertical\',\'cxGrouperHorizontal\')}}"> <template is="for" items="{{cxPropOptions}}" item="item" index="index"> <lyte-checkbox lt-prop-type="{{cxPropType}}" id="{{cxPropId}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-read-only="{{cxPropReadOnly}}" class="checkbox_input" lt-prop-class="{{cxPropClass}}" lt-prop-title="{{cxPropTooltip}}" lt-prop-tooltip-config="{&quot;position&quot;: &quot;followcursor&quot;, &quot;appearance&quot;: &quot;box&quot;}" lt-prop-tooltip-class="cxElementsTooltip" lt-prop-name="{{cxPropName}}" lt-prop-value="{{item[cxPropDisplayValue]}}" lt-prop-label="{{item[cxPropDisplayValue]}}" lt-prop-label-class="{{cxPropLabelClass}}" lt-prop-disabled="{{cxPropDisabled}}" data-zcqa="{{cxPropZcqa}}_{{item[cxPropDisplayValue]}}" on-changed="{{method(\'onCheckboxValueChanged\',item[cxPropDisplayValue])}}" on-before-checked="{{method(\'beforeCheckedCheckbox\',item[cxPropDisplayValue])}}" on-checked="{{method(\'onCheckedCheckbox\',item[cxPropDisplayValue])}}" on-before-unchecked="{{method(\'beforeUnchecked\',item[cxPropDisplayValue])}}" on-unchecked="{{method(\'onUncheckedCheckbox\',item[cxPropDisplayValue])}}" lt-prop-aria-checkbox="{{cxPropAriaCheckbox}}" lt-prop-aria="{{cxPropAria}}"></lyte-checkbox> </template><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" class="{{cxPropErrorClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"text",position:[0]}]},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3,2]},{type:"if",position:[3,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","cxPropValue","cxPropFrom","cxPropField","cxPropOptions","cxPropDisabled","cxPropFieldKey","cxPropZcqa","cxPropId","cxPropName","cxPropType","cxPropErrorMessage","cxPropClass","cxPropLabelClass","cxPropFieldLabelClass","cxPropDisplayValue","selectedValue","isError","cxPropClearErrorMessage","cxPropErrorYield","cxPropEmptyValue","cxPropDirection","cxPropInfoTooltip","cxPropTooltip","cxPropReadOnly","selected","cxPropErrorClass","cxPropAria","cxPropAriaCheckbox","cxPropDataTabindex","cxPropMandatoryOption","cxPropMandatoryType","cxPropErrorIconClass","cxPropAriaErrorProperties"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropValue:Lyte.attr("string"),cxPropFrom:Lyte.attr("string",{default:"view"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropOptions:Lyte.attr("array"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropFieldKey:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string",{default:"default"}),cxPropErrorMessage:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropLabelClass:Lyte.attr("string"),cxPropFieldLabelClass:Lyte.attr("string",{default:""}),cxPropDisplayValue:Lyte.attr("string",{default:"display_label"}),selectedValue:Lyte.attr("string"),isError:Lyte.attr("boolean",{default:!1}),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"horizontal"}),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropTooltip:Lyte.attr("string"),cxPropReadOnly:Lyte.attr("boolean",{default:!1}),selected:Lyte.attr("string"),cxPropErrorClass:Lyte.attr("string"),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaCheckbox:Lyte.attr("object"),cxPropDataTabindex:Lyte.attr("string"),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),cxPropErrorIconClass:Lyte.attr("string"),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){var e=this.getData("cxPropFrom");"view"==(e=this.getData("cxPropFrom"))&&!this.getData("cxPropValue")&&this.getData("cxPropEmptyValue")?this.setData("cxPropValue",this.getData("cxPropEmptyValue")):"create"===e&&void 0===this.data.cxPropTooltip&&(this.getData("cxPropDisabled")||this.getData("cxPropReadOnly"))&&this.setData("cxPropTooltip",_cruxUtils.getI18n("crm.lable.read.only"))},getValue:function(){return this.getData("selected")},validate:function(){return!(!this.getData("selected")&&this.getData("cxPropField").required)||(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR01,this):(this.getData("cxPropErrorMessage")||this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(_this.getData("cxPropField").field_label))),this.setData("isError",!0)),!1)},obsValue:function(){var e=this.getData("cxPropValue");if(e&&"create"===this.getData("cxPropFrom")){var t=this.$node.getElementsByClassName("checkbox_input");if(t[0])for(var o=0;o<t.length;o++){t[o].getAttribute("lt-prop-value")===e&&t[o].setAttribute("lt-prop-checked",!0)}}}.observes("cxPropValue","lyteViewPort").on("didConnect"),actions:{showInfoTooltip:function(e){this.showHideInfoTooltip(e)}},methods:{onCheckboxValueChanged:function(e,t,o){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,t,o)},beforeCheckedCheckbox:function(e,t,o){this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",e,t,o)},onCheckedCheckbox:function(e,t,o){this.setData("selected",e),this.getData("cxPropClearErrorMessage")&&this.setData("isError",!1),this.getMethods("onChecked")&&this.executeMethod("onChecked",e,t,o)},beforeUnchecked:function(e,t,o){this.getMethods("onBeforeUnchecked")&&this.executeMethod("onBeforeUnchecked",e,t,o)},onUncheckedCheckbox:function(e,t,o){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",e,t,o)},hideInfoTooltip:function(){this.showHideInfoTooltip()}},observeRender:function(e){this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),mandatoryType:function(){"red_accent_line"!=this.data.cxPropMandatoryType?(this.$node.querySelector(".cxMandatoryType")&&(this.$node.querySelector(".cxMandatoryType").style.color="red"),this.$node.querySelector(".cxMandatoryOptEnabled")||$L(this.$node.querySelector(".mandatoryField")).addClass("cxMandatoryOptEnabled")):this.$node.querySelector(".cxMandatoryOptEnabled")&&$L(this.$node.querySelector(".mandatoryField")).removeClass("cxMandatoryOptEnabled")}.observes("cxPropMandatoryType").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-tag-popover",{_template:'<template tag-name="crux-tag-popover"> <lyte-popover lt-prop-origin-elem=".cxPropOnFocusTag .moreTagOption" class="moreTagOptionPopover" lt-prop-freeze="{{cxPropFreezePopover}}" lt-prop-show-close-button="false" lt-prop-show="true" lt-prop-type="box" lt-prop-max-width="200" lt-prop-width="200" lt-prop-content-padding="15px 15px 5px" lt-prop-wrapper-class="nLvTagsMoreOptionhandle" lt-prop-duration="{{durationUndefined}}" on-close="{{method(\'closePopover\')}}" lt-prop-bind-to-body="true" lt-prop-dimmer="{{cxPropPopoverDimmer}}" lt-prop-close-on-scroll="true"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="tagPopoverLab" data-zcqa="cruxTagCompPopOver"> <div> <ul class="listview_taglists m0 dIB"> <template is="for" items="{{remainingValues}}" item="val" index="index"> <li class="pL0"> <span class="tagElementList dIB cxAddedTags {{concat(\'cxTag\',cruxGetTagColorIndex(val.color_code))}} {{if(tagsClickable,\'cP\',\'\')}}" style="background: {{if(ifEquals(val.color_code,\'noFill\'),\'transparent\',concat(val.color_code,\' !important;\'))}}; color : {{cruxGetPicklistFontColor(val.color_code)}}" onclick="{{action(\'tagsTransition\',val)}}">{{val.name}}</span> </li> </template> </ul> </div> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'background: '",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"ifEquals",args:["val.color_code","'noFill'"]}},"'transparent'",{type:"helper",value:{name:"concat",args:["val.color_code","' !important;'"]}}]}},"'; color : '",{type:"helper",value:{name:"cruxGetPicklistFontColor",args:["val.color_code"]}}]}}}},{type:"text",position:[1,1,0]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["durationUndefined","cxPropFreezePopover","cxPropPopoverDimmer","tagsClickable"],data:function(){return{durationUndefined:Lyte.attr("number",{default:void 0}),cxPropFreezePopover:Lyte.attr("boolean",{default:!1}),cxPropPopoverDimmer:Lyte.attr("object",{default:{color:"#000",opacity:"0"}}),tagsClickable:Lyte.attr("boolean",{default:!1})}},actions:{showMoreTags:function(){clearTimeout(this.getData("cxParent").hideTimeout)},hideMoreTags:function(){this.getData("cxParent").hideTags()},tagsTransition:function(e){this.getMethods("onTagClick")&&this.executeMethod("onTagClick",e)}},methods:{closePopover:function(){setTimeout((function(){document.querySelector(".cxPropOnFocusTag").classList.remove("cxPropOnFocusTag")}),10)}}}),Lyte.Component.register("crux-lookup-view-popup",{_template:'<template tag-name="crux-lookup-view-popup"> <lyte-popover lt-prop-show="{{showPopover}}" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-origin-elem=".cxLookupBc" lt-prop-position="right" lt-prop-duration="{{undefinedNumber}}" lt-prop-content-padding="15px" lt-prop-bind-to-body="false" lt-prop-max-height="70%" lt-prop-wrapper-class="cxBusinessCardPopover" on-show="{{method(\'popoverShow\')}}" lt-prop-max-width="500px" lt-prop-close-on-scroll="true"> <template is="yield" yield-name="popover"> <lyte-popover-content onmouseover="{{action(\'mouseOver\',true)}}" onmouseout="{{action(\'mouseOver\')}}"> <template is="if" value="{{expHandlers(record,\'!\')}}"><template case="true">{{error}} </template><template case="false"> <div data-zcqa="{{cxPropBcZcqa}}"> <div class="cxLookupViewTopSection"> <template is="if" value="{{expHandlers(cxPropShowImage,\'&amp;&amp;\',hasImage)}}"><template case="true"><template is="if" value="{{record.Record_Image}}"><template case="true"> <div class="cxLookupViewPopImgCont"> <img class="cxLookupViewPopRecImg" src="{{cxPropRecordImageSrc}}"> </div> </template><template case="false"> <div class="cxLookupViewPopImgCont cxLookupViewLetterCircle">{{cruxLookupGetFirstChar(record,fields[0].api_name)}}</div> </template></template></template></template> <div class="cxLookupViewTopContentWrap {{if(fields[1].businesscard_supported,\'cxLookupHasSingleRow\',\'\')}}"> <div class="cxLookupViewTopHeading"> <link-to lt-prop-class="cxLookupViewPopupHeadingLink" lt-prop-route="{{cxPropRouteName}}" lt-prop-dp="{{cxPropDynamicParams}}" lt-prop-qp="{{cxPropQueryParams}}" lt-prop-td="{{cxPropTransitionData}}" lt-prop-target="{{cxPropTarget}}" onclick="{{action(\'linkClicked\')}}">{{cruxGetValue(record,fields[0].api_name,fields[0].ui_type,true)}}</link-to> </div> <template is="if" value="{{expHandlers(fields[1].businesscard_supported,\'!\')}}"><template case="true"> <span class="cxLookupViewTopDesc"> <template is="component" cx-prop-empty-value="-" component-name="crux-{{fields[1].cxTypeMapping}}-component" cx-prop-value="{{cruxGetValue(record,fields[1].api_name)}}" cx-prop-datetime-in-user-pattern="false" cx-prop-date-in-user-pattern="false"></template><template is="if" value="{{expHandlers(fields[2].businesscard_supported,\'!\')}}"><template case="true"> - <template is="component" component-name="crux-{{fields[2].cxTypeMapping}}-component" cx-prop-value="{{cruxGetValue(record,fields[2].api_name)}}" cx-prop-datetime-in-user-pattern="false" cx-prop-date-in-user-pattern="false"></template></template></template> </span> </template></template> </div> </div> <div> <div class="cxDivTable cxLookupExtraDetailsTbl"> <template is="for" items="{{fields}}" item="field" index="index"><template is="if" value="{{expHandlers(index,\'!=\',0)}}"><template case="true"><template is="if" value="{{expHandlers(field.businesscard_supported,\'&amp;&amp;\',expHandlers(field.column_name,\'!=\',&quot;ISCALLBILLABLE&quot;))}}"><template case="true"> <div class="cxDivTr"> <div class="cxDivTd cxLookupViewLabel">{{field.field_label}}</div> <div class="cxDivTd cxLookupViewValue cxLookupVwPopupValue"> <span class="cxLookupViewValueWrap"> <template is="if" value="{{expHandlers(record[field.api_name],\'&amp;&amp;\',expHandlers(field.ui_type,\'==\',250))}}"><template case="true"> <crm-richtext-component cx-prop-value="{{record[field.api_name]}}" cx-prop-from="view" show-more-button="false"></crm-richtext-component> </template><template case="false"><template is="if" value="{{expHandlers(record[field.api_name],\'&amp;&amp;\',record[field.api_name].name)}}"><template case="true"> {{record[field.api_name].name}} </template><template case="false"> <template is="component" cx-prop-empty-value="-" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-field="{{field}}" cx-prop-value="{{cruxGetValue(record,field.api_name,field.ui_type)}}" cx-prop-datetime-in-user-pattern="false" cx-prop-date-in-user-pattern="false" cx-prop-call-allowed="{{cxPropCallAllowed}}"></template> </template></template></template></template> </span> </div> </div> </template></template></template></template></template> </div> </div> </div> </template></template> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,1,3,1,1]},{type:"text",position:[1,1,3,1,1,0]},{type:"componentDynamic",position:[1,1,3,1,1]},{type:"attr",position:[1,1,3,3]},{type:"if",position:[1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,1]},{type:"for",position:[1,3,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropBasePath","cxPropTypeMapping","cxPropRecordImageSrc","cxPropShowImage","cxPropBcZcqa","cxPropHoverCallback","cxPropFormulaMapping","cxPropForcedFetch","cxPropCallAllowed","hasImage","show","lookupComp","entityId","fields","record","module","showPopover","cxPropTypeMapping","cxPropRecordImageSrc","undefinedNumber","cxPropShowImage","cxPropShowLookupPopupFields","field"],data:function(){return{cxPropBasePath:Lyte.attr("string",{default:"undefined"!=typeof Crm&&Crm.getCrmBasePath?Crm.getCrmBasePath():""}),cxPropTypeMapping:Lyte.attr("object"),cxPropRecordImageSrc:Lyte.attr("string"),cxPropShowImage:Lyte.attr("boolean",{default:!0}),cxPropBcZcqa:Lyte.attr("string"),cxPropHoverCallback:Lyte.attr("boolean"),cxPropFormulaMapping:Lyte.attr("object",{default:{currency:"text",text:"text",longinteger:"number",boolean:"boolean",datetime:"date-time",date:"date",double:"number",decimal:"number",integer:"number"}}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),cxPropCallAllowed:Lyte.attr("boolean",{default:!1}),hasImage:Lyte.attr("boolean",{default:!1}),show:Lyte.attr("boolean",{default:!1}),lookupComp:Lyte.attr("object"),entityId:Lyte.attr("string"),fields:Lyte.attr("array"),record:Lyte.attr("object"),module:Lyte.attr("string"),showPopover:Lyte.attr("boolean",{default:!1}),cxPropTypeMapping:Lyte.attr("object"),cxPropRecordImageSrc:Lyte.attr("string"),undefinedNumber:Lyte.attr("number",{default:void 0}),cxPropShowImage:Lyte.attr("boolean",{default:!0}),cxPropShowLookupPopupFields:Lyte.attr("boolean",{deafult:!1}),field:Lyte.attr("object")}},didConnect:function(){this.updateListener=Lyte.addEventListener("cxRecordUpdated",function(e){e&&this.data.entityId===e.id&&(this.refreshData=!0)}.bind(this))},didDestroy:function(){Lyte.removeEventListener(this.updateListener)},observeShow:function(){1==this.data.show?(this.timeoutClose(!0),this.popoverTimeout=setTimeout((()=>{if(this.data.entityId!=this._id){var e;this.setData("hasImage",!1),this._id=this.data.entityId;"undefined"!=typeof moduleApiMapping&&moduleApiMapping;if(this.data.module){var t=this.data.module,o="undefined"!=typeof moduleRecordMapping?moduleRecordMapping:{};e=o[this.data.module]?o[this.data.module].id:o[t].id}else{let t="undefined"!=typeof idModuleMapping?idModuleMapping:{};e=this.data.field.lookup.module.id,this.setData("module",t[e])}this.moduleId=e,this.fetchBcData(e)}else this.getData("cxPropForcedFetch")||this.refreshData?(this.fetchBcData(this.moduleId),this.refreshData&&(this.refreshData=!1)):(this.setData("showPopover",!0),this.data.cxPropShowLookupPopupFields&&this.data.fields&&0==this.data.fields.length&&this.setData("showPopover",!1))}),100)):this.timeoutClose(!1)}.observes("show").on("init"),timeoutClose:function(e){clearTimeout(this.popoverTimeout);var t=this.data.lookupComp;e?this.previousOriginElem&&this.previousOriginElem!==t&&(this.setData("showPopover",!1),this.previousOriginElem.classList.contains("cxLookupBc")&&this.previousOriginElem.classList.remove("cxLookupBc")):this.popoverTimeout=setTimeout(function(){this.setData("showPopover",!1),this.previousOriginElem&&this.previousOriginElem.classList.contains("cxLookupBc")&&this.previousOriginElem.classList.remove("cxLookupBc")}.bind(this),200),this.previousOriginElem=t},methods:{popoverShow:function(){this.popoverCont?this.popoverCont.scrollTop=0:this.popoverCont=$L(".cxBusinessCardPopover lyte-popover-content")[0]}},actions:{mouseOver:function(e){clearTimeout(this.popoverTimeout);var t=this.data.lookupComp;e?clearTimeout(this.popoverTimeout):this.popoverTimeout=setTimeout(function(){this.setData("showPopover",!1),t&&t.classList.remove("cxLookupBc")}.bind(this),100)},linkClicked:function(){if(this.getMethods("onLookupLinkClickedPopup")&&!1===this.executeMethod("onLookupLinkClickedPopup",event,this,this.data.field))return event.stopPropagation(),event.preventDefault(),!1;"undefined"!=typeof cruxAssets&&cruxAssets.cxLookupElementLinkClicked&&cruxAssets.cxLookupElementLinkClicked(event)}},fetchBcData:function(e){!this.getMethods("onLookupHoverFetchBcDataPopup")||void 0!==this.data.cxPropHoverCallback&&!0!==this.data.cxPropHoverCallback?store.modelFor(e)?this.fetchRecordData(e):store.findRecord("module",e,{},!1,!0,{getFields:!0}).then(function(){this.fetchRecordData(e)}.bind(this)):this.executeMethod("onLookupHoverFetchBcDataPopup",e,this.data.entityId).then(function(e){var t=e||{};this.setPopoverData(t.record,t.bcFields)}.bind(this),function(){this._id=void 0}.bind(this))},fetchRecordData:function(e){var t=this;let o={approved:"both",apply_fields:"business_card",include:"fields"};this.data.cxPropShowLookupPopupFields&&(o.fields="Record_Image,Phone,Email"),this.refreshData&&!this.getData("cxPropForcedFetch")&&store.clearCachedQuery(e,t.data.entityId,o),store.findRecord(e,t.data.entityId,o,!this.getData("cxPropForcedFetch"),!1,{businessCard:!0}).then((function(o){var a=o[e][0];a&&a.id===t.data.entityId&&t.setPopoverData(a,o.fields)}),(function(){t.setData({record:void 0,fields:void 0}),t.setData("showPopover",!0)}))},setPopoverData:function(e,t){var o=t;if(o&&e){if(o.filter((e=>null!=e)).some((e=>e.businesscard_supported))){var a=this.data.cxPropFormulaMapping,r=this.data.cxPropTypeMapping;this.setData("record",e),o[0]&&"Record_Image"===o[0].api_name&&this.setData("hasImage",!0),(o=o.filter((e=>null!=e&&"Record_Image"!==e.api_name))).forEach((e=>{116===e.ui_type||117===e.ui_type?e.cxTypeMapping=a[e.formula.return_type]:118===e.ui_type?e.cxTypeMapping=a[e.rollup_summary.return_type]:"Solution_Number"===e.api_name||"Quote_Number"===e.api_name||"Invoice_Number"===e.api_name||"Case_Number"===e.api_name||"SO_Number"===e.api_name?e.cxTypeMapping="number":e.cxTypeMapping=r[e.ui_type]&&"lookup"!==r[e.ui_type]&&"currency"!==e.data_type?r[e.ui_type]:"text"})),this.setData("fields",o),!this.data.cxPropRecordImageSrc&&e.Record_Image&&this.setData("cxPropRecordImageSrc",this.data.cxPropBasePath+"/EntityImageAttach.do?action_module="+this.data.module+"&entityId="+e.id+"&actionName=readImage&fileId="+e.Record_Image)}else this.setData("error",_cruxUtils.getI18n("crux.no.bc.message")),this.setData({record:void 0,fields:void 0})}else this.setData("error",_cruxUtils.getI18n("crm.security.error")),this.setData({record:void 0,fields:void 0});this.setData("showPopover",this.data.show)}}),Lyte.Component.registerHelper("cruxLookupGetFirstChar",(function(e,t){var o=this.getData("module"),a=e[t];return a?("Leads"!=o&&"Contacts"!=o||(a.First_Name?a=a.First_Name:a.Last_Name&&(a=a.Last_Name)),a.name&&(a=a.name),a.charAt(0)):""})),Lyte.Component.registerHelper("cruxGetValue",(function(e,t,o,a){if(e&&t&&void 0!==e[t]){if(e[t].name)return e[t].name;if(96==o)return e[t].map((function(e){return e.value})).join("; ");if(80==o)return Lyte.Transform["time-in-hrs"].deserialize(e[t]);if(a&&("Leads"===this.getData("module")||"Contacts"===this.getData("module"))&&"undefined"!=typeof Crm){var r=store.peekRecord("user",Crm.userDetails.USER_ID);if(r)for(var i=r.name_format.split(","),s="",p=0;p<i.length;p++)e[t][i[p].replace(" ","_")]&&(s+=e[t][i[p].replace(" ","_")]+" ");return s}return e[t]}return""})),Lyte.Component.register("crux-view-info-tooltip",{_template:'<template tag-name="crux-view-info-tooltip"> <i class="cxInfoIcon cxViewInfoTooltipIcon" lyte-hovercard="true" id="{{cxPropId}}_{{cxPropField.api_name}}_icon"></i> <lyte-hovercard lt-prop-origin-elem="#{{cxPropId}}_{{cxPropField.api_name}}_icon" lt-prop-auto-show="true"> <template is="yield" yield-name="hoverCardYield"> <lyte-hovercard-content> <lyte-yield yield-name="viewInfoTooltipYield" prop-field="{{cxPropField}}" prop-value="{{cxPropValue}}"></lyte-yield> </lyte-hovercard-content> </template> </lyte-hovercard> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}],data:function(){return{}},actions:{},methods:{}}),Lyte.Component.register("crux-file-upload-component",{_template:'<template tag-name="crux-file-upload-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="view"> <div class="cxFileUploadContainer cxFileUploadViewContainer" data-zcqa="{{cxPropZcqa}}"> <template is="if" value="{{cxPropFiles[0]}}"><template case="true"><ul> <template id="" class="" items="{{cxPropFiles}}" item="value" index="index" is="for"> <li onclick="{{action(\'openPreview\',value)}} " class="cxFileList" data-zcqa="file_preview_{{index}}"> <span class="cxFileUploadDetail {{if(expHandlers(cxPropEllipsis,\'!\'),\'cxFileUpdCompWrappedNameDiv\',\'\')}}"> <span class="cxFileUploadTypeIconWrap cxFlexCenter"> <span class="cxFileUploadType cxFileUploadSprite cxFileUpCompIcon_allfile cxFileUploadIcon_{{value.fileType}}"></span> </span> <template is="if" value="{{minifiedSize}}"><template case="true"> <lyte-text lt-prop-yield="true" lt-prop-value="{{concat(value.cxFileName,value.cxExtn,\' - \',lyteUiFileSize(value.size,cxPropFileUnit,cxPropDigits))}}"> <template is="registerYield" yield-name="lyte-text"> {{value.cxFileName}}{{value.cxExtn}}<span class="cxFileUploadSize">&nbsp;-&nbsp;({{lyteUiFileSize(value.size,cxPropFileUnit,cxPropDigits)}})</span> </template> </lyte-text> </template><template case="false"> <template is="if" value="{{cxPropEllipsis}}"><template case="true"><div lt-prop-title="{{value.fileName}}" class="cxFlexCenter cxOH"> <lyte-text class="cxFileUploadName" lt-prop-show="false" lt-prop-value="{{value.cxFileName}}"></lyte-text> <span class="cxFileUploadExtn">{{value.cxExtn}}</span> </div></template><template case="false"><div class="cxFileUpdCompWrappedName">{{value.fileName}}<template is="if" value="{{value.size}}"><template case="true"><span class="cxFileUploadSize">&nbsp;-&nbsp;({{lyteUiFileSize(value.size,cxPropFileUnit,cxPropDigits)}})</span></template></template></div></template></template> <template is="if" value="{{if(expHandlers(value.size,\'&amp;&amp;\',cxPropEllipsis),true,false)}}"><template case="true"><span class="cxFileUploadSize">&nbsp;-&nbsp;({{lyteUiFileSize(value.size,cxPropFileUnit,cxPropDigits)}})</span></template></template> </template></template> <template is="if" value="{{value[cxPropDownloadUrlKey]}}"><template case="true"><a target="_blank" href="{{value[cxPropDownloadUrlKey]}}" class="cxFlex cxFileUpdCompActionIconWrap cxFileUpCompDownloadIconWrap cxFileDownloadButton cxDownload"> <span class="cxFileDownloadButtonIcon cxDownload" data-zcqa="file_download_{{index}}"></span> </a></template></template> </span> </li> </template> </ul></template><template case="false"><div class="viewEmptyValue">{{cxPropEmptyValue}}</div></template></template> </div> </template><template case="edit"></template><template case="create"> <div lt-prop-title="{{if(cxPropReadonly,tooltipMsg,\'\')}}" class="cxFileUploadCreateWrap {{if(cxPropReadonly,\'lyteInputReadonly cxFileUpCompReadOnly\',\'\')}} {{cxPropClass}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxElementLabel {{cxPropLabelClass}}"> <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'asterisk\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> {{cxPropField[cxPropFieldKey]}} <template is="if" value="{{expHandlers(cxPropMandatoryType,\'==\',\'required\')}}"><template case="true"> <span class="cxMandatoryType">{{cxPropMandatoryOption[cxPropMandatoryType]}}</span> </template></template> <template is="if" value="{{cxPropInfoTooltip}}"><template case="true"> <span class="cxVam cxInfoIcon" onmouseenter="{{action(\'showInfoTooltip\',this)}}"></span> <lyte-hovercard lt-prop-placement="topLeft" lt-prop-keep-alive="true" lt-prop-popover-wrapper-class="cxElementsHovercard" lt-prop-origin-elem=".cxCurrentHovercard" on-hovercard-hide="{{method(\'hideInfoTooltip\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="cxElementsHoverCardContent"> {{cxPropInfoTooltip}} </lyte-hovercard-content> </template> </lyte-hovercard> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(cxPropType,\'===\',\'single\')}}"><template case="true"> <div class="cxSFileUpCompElem {{if(isError,\'cxSFileUpCompErrorElem\',\'\')}}" onclick="{{action(\'localUploadElemClick\')}}"> <template is="if" value="{{cxPropFiles[0]}}"><template case="true"><div class="cxSFileUpCompNameWrapper"> <span class="cxSFileUploadTypeIconWrap cxFlexCenter"> <span class="cxFileUploadType cxFileUploadSprite cxFileUpCompIcon_allfile cxFileUploadIcon_{{cxPropFiles[0].fileType}}"></span> </span> <div class="cxSFileUpName"> <div lt-prop-title="{{cxPropFiles[0].fileName}}" class="cxFlexCenter cxSFileUpNameWithExtn"> <lyte-text class="cxFileUploadName" lt-prop-show="false" lt-prop-value="{{cxPropFiles[0].cxFileName}}"></lyte-text> <span class="cxFileUploadExtn">{{cxPropFiles[0].cxExtn}}</span> </div> <template is="if" value="{{if(cxPropFiles[0].size,true,false)}}"><template case="true"><span class="cxFileUploadSize">&nbsp;-&nbsp;({{lyteUiFileSize(cxPropFiles[0].size,cxPropFileUnit,cxPropDigits)}})</span></template></template> </div> <template is="if" value="{{cruxAnd(cxPropFiles[0],negate(cxPropDisabled),negate(cxPropReadonly))}}"><template case="true"><span class="cxRemoveFile cxSFileRemoveIconWrap" data-zcqa="file_remove"> <span class="cxRemoveFile cxSFileRemoveIcon"></span> </span></template></template> </div></template><template case="false"><div class="cxSFileUpPlaceholder cxOpenUpload" data-zcqa="{{cxPropZcqa}}">{{cxPropPlaceholder}}</div></template></template> <span class="cxSFileUploadIconWrap cxOpenUpload" data-zcqa="{{cxPropZcqa}}"> <span class="{{if(cxPropShowDisabledIcon,\'\',if(cxPropRightIconClass,cxPropRightIconClass,\'cxSFileUploadIcon\'))}} cxOpenUpload "></span> </span> </div> </template><template case="false"> <template is="if" value="{{ifEquals(cxPropOptionsType,\'local\')}}"><template case="true"> <div class="cxSFileUpCompElem {{cxPropButtonClass}} {{if(disableBtn,\'cxFileUpCompReadOnly\',\'\')}}" onclick="{{action(\'localUploadElemClick\')}}" lt-prop-title="{{if(tooltipMsg,tooltipMsg,\'\')}}"> <div class="cxSFileUpPlaceholder cxOpenUpload" data-zcqa="{{cxPropZcqa}}">{{cxPropPlaceholder}}</div> <span class="cxSFileUploadIconWrap cxOpenUpload cxFileUpCompIcon" data-zcqa="{{cxPropZcqa}}"> <span class=" {{if(cxPropShowDisabledIcon,\'\',if(cxPropRightIconClass,cxPropRightIconClass,\'cxSFileUploadIcon\'))}} cxOpenUpload "></span> </span> </div> </template><template case="false"> <lyte-button lt-prop-tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" class="cxFileUploadButton {{cxPropButtonClass}}" lt-prop-autofocus="{{cxPropAutofocus}}" id="{{cxPropId}}" lt-prop-name="{{cxPropName}}" lt-prop-aria-button="{{cxPropAria}}" data-zcqa="{{cxPropZcqa}}" lt-prop-class="{{cxPropInnerButtonClass}}" lt-prop-disabled="{{disableBtn}}" lt-prop-title="{{if(tooltipMsg,tooltipMsg,\'\')}}" lt-prop-appearance="secondary" onclick="{{action(\'fileUploadBtnClick\')}}"> <template is="registerYield" yield-name="text"> <span class="cxSelectButtonText cxFileUpCompPlaceholder">{{cxPropPlaceholder}}</span> <template is="if" value="{{negate(cxPropShowDisabledIcon)}}"><template case="true"><lyte-icon class="{{cxPropRightIconClass}}"></lyte-icon></template></template> </template> </lyte-button> </template></template> </template></template> <template is="if" value="{{cruxOr(ifEquals(cxPropOptionsType,\'local\'),ifEquals(cxPropType,\'single\'))}}"><template case="true"> <lyte-fileupload lt-prop-allow-replace="true" lt-prop-trigger-upload="{{lbind(cxPropTriggerUpload)}}" lt-prop-multiple="{{negate(ifEquals(cxPropType,\'single\'))}}" queue-list="{{lbind(fileList)}}" lt-prop="{{stringify(cxPropUploadProp)}}" on-before-remove="{{method(\'onBeforeRemoveFile\')}}" on-before-add="{{method(\'onBeforeAddFile\')}}" on-add="{{method(\'onAddFileFn\')}}" on-success="{{method(\'successFile\')}}" on-reject="{{method(\'onFileReject\')}}" after-render="{{method(\'afterRenderUpload\')}}" on-remove="{{method(\'onRemoveFile\')}}" on-failure="{{method(\'onFailureFile\')}}" on-request-success="{{method(\'onRequestSuccessFn\')}}" on-request-failure="{{method(\'onRequestFailureFn\')}}" on-file-success="{{method(\'onFileSuccessFn\')}}" on-file-failure="{{method(\'onFileFailureFn\')}}" on-progress="{{method(\'onProgressFn\')}}" on-before-send="{{method(\'onBeforeSendFn\')}}" on-send="{{method(\'onSendFn\')}}" on-before-open="{{method(\'onBeforeOpenFn\')}}" on-retry="{{method(\'onRetryFn\')}}" on-select="{{method(\'onSelectFn\')}}" on-validation-end="{{method(\'onValidationEndFn\')}}" style="display: none;"> </lyte-fileupload> </template></template> <template is="if" value="{{expHandlers(cxPropShowDisabledIcon,\'&amp;&amp;\',cxPropDisabled)}}"><template case="true"><span class="cxElementsDisabledIcon {{cxPropDisabledIconClass}}"></span></template></template> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template></template> <template is="if" value="{{expHandlers(cxPropType,\'===\',\'multiple\')}}"><template case="true"> <template is="if" value="{{ifEquals(cxPropOptionsType,\'menu\')}}"><template case="true"> <lyte-menu lt-prop-yield="true" lt-prop-event="click" lt-prop-class="cxFileMenuWrapper" lt-prop-wrapper-class="{{cxPropMenuWrapperClass}}" on-menu-click="{{method(\'onMenuItemClick\')}}" lt-prop-query="#{{cxPropId}}" lt-prop-freeze="false" on-before-open="{{method(\'onMenuBeforeOpen\')}}" on-open="{{method(\'onMenuOpen\')}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body> <template is="for" items="{{cxPropOptions}}" item="value" index="key"> <lyte-menu-item data-value="{{value.system_value}}" class="cxFileMenuItem" data-zcqa="upload_drive_{{value.system_value}}"> <lyte-menu-label> <template is="if" value="{{if(value.cxIconHTML,true,false)}}"><template case="true"><div class="cxFileUploadDriveLogos">{{unescape(value.cxIconHTML)}}</div></template><template case="false"><template is="if" value="{{if(value.cxIconUrl,true,false)}}"><template case="true"><img class="cxFileUploadDriveLogos" src="{{if(value.cxIconUrl,value.cxIconUrl)}}"></template><template case="false"><span class="cxFileUploadDriveLogos {{value.cx_icon_class}}"></span></template></template></template></template> {{value.display_value}} </lyte-menu-label> </lyte-menu-item> </template> </lyte-menu-body> </template> </lyte-menu> </template><template case="false"><template is="if" value="{{ifEquals(cxPropOptionsType,\'modal\')}}"><template case="true"> <crux-file-upload-modal cx-prop-show="{{lbind(showOptions)}}" on-remove-file-from-selected="{{method(\'onRemoveFileFromSelectedCB\')}}" fetch-content="{{method(\'fetchContentCB\')}}" on-upload="{{method(\'onUploadCB\')}}" cx-prop-options="{{cxPropOptions}}" cx-prop-file-unique-selector="{{cxPropFileUniqueSelector}}" cx-prop-file-limit="{{cxPropFileLimit}}" on-modal-close="{{method(\'onModalCloseCB\')}}" on-modal-show="{{method(\'onModalShowCB\')}}" before-close-modal="{{method(\'beforeCloseModalCB\')}}" before-show-modal="{{method(\'beforeShowModalCB\')}}"></crux-file-upload-modal> </template></template></template></template> <template is="if" value="{{if(cxPropFiles.length,true,false)}}"><template id="" case="true"> <div class="cxFileUploadContainer"> <ul> <template id="" class="" items="{{cxPropFiles}}" item="value" index="index" is="for"> <li onclick="{{action(\'openPreview\',value)}}" class="cxFileList" data-zcqa="file_preview_{{index}}"> <span class="cxFileUploadDetail"> <span class="cxFileUploadTypeIconWrap cxFlexCenter"> <span class="cxFileUploadType cxFileUploadSprite cxFileUpCompIcon_allfile cxFileUploadIcon_{{value.fileType}}"></span> </span> <template is="if" value="{{minifiedSize}}"><template case="true"> <lyte-text lt-prop-yield="true" lt-prop-value="{{concat(value.cxFileName,value.cxExtn,\' - \',lyteUiFileSize(value.size,cxPropFileUnit,cxPropDigits))}}"> <template is="registerYield" yield-name="lyte-text"> {{value.cxFileName}}{{value.cxExtn}}<span class="cxFileUploadSize">&nbsp;-&nbsp;({{lyteUiFileSize(value.size,cxPropFileUnit,cxPropDigits)}})</span> </template> </lyte-text> </template><template case="false"> <div lt-prop-title="{{value.fileName}}" class="cxFlexCenter cxOH"> <lyte-text class="cxFileUploadName" lt-prop-show="false" lt-prop-value="{{value.cxFileName}}"></lyte-text> <span class="cxFileUploadExtn">{{value.cxExtn}}</span> </div> <template is="if" value="{{if(value.size,true,false)}}"><template case="true"><span class="cxFileUploadSize">&nbsp;-&nbsp;({{lyteUiFileSize(value.size,cxPropFileUnit,cxPropDigits)}})</span></template></template> </template></template> <template is="if" value="{{value[cxPropDownloadUrlKey]}}"><template case="true"><a href="{{value[cxPropDownloadUrlKey]}}" target="_blank" data-zcqa="file_download_{{index}}" class="cxFlex cxFileUpdCompActionIconWrap cxFileUpCompDownloadIconWrap cxFileDownloadButton cxDownload"> <span class="cxFileDownloadButtonIcon cxDownload"></span> </a></template></template> </span> <template is="if" value="{{cruxAnd(negate(cxPropDisabled),negate(cxPropReadonly))}}"><template case="true"><span class="cxFileUploadStatus"> <span class="cxFileUpdCompActionIconWrap cxRemoveFile cxDIB cxVam" data-zcqa="file_remove_{{index}}" onclick="{{action(\'removeFile\',value)}}"> <span class="cxFileUploadRemoveIcon cxRemoveFile"></span> </span> <template is="if" value="{{value.cxNewFile}}"><template case="true"><span class="cxFileUploadTickIcon"></span></template></template> </span></template></template> </li> </template> </ul> </div> </template></template> </template></template> <template is="if" value="{{isError}}"><template id="" case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-field="{{cxPropField}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}" cx-field="{{cxPropField}}"></lyte-yield></template> </crux-error-message> </template></template> </div> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{view:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"for",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]},{type:"text",position:[2]},{type:"text",position:[4,1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"componentDynamic",position:[0,1]},{type:"text",position:[0,3,0]}]},false:{dynamicNodes:[{type:"text",position:[0,0]},{type:"attr",position:[0,2]},{type:"if",position:[0,2],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}}]},edit:{dynamicNodes:[],additional:{next:"create"}},create:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"text",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1,1]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"componentDynamic",position:[0,3,1,1]},{type:"text",position:[0,3,1,3,0]},{type:"attr",position:[0,3,3]},{type:"if",position:[0,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}},{type:"attr",position:[0,5]},{type:"if",position:[0,5],cases:{true:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]}},default:{}},{type:"attr",position:[1,11]},{type:"if",position:[1,11],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]}},default:{}},{type:"text",position:[1,1,3]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]},{type:"text",position:[2]},{type:"text",position:[4,1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"if",position:[0,3],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,13]},{type:"if",position:[1,13],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropAutofocus","cxPropFiles","cxPropValue","cxPropType","cxPropOptionsType","cxPropField","cxPropFrom","cxPropOptions","cxPropFileLimit","cxPropFileUniqueSelector","showOptions","disableBtn","tooltipMsg","cxPropId","cxPropFileUnit","cxPropDigits","isError","cxPropErrorMessage","cxPropErrorYield","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropErrorSpanClass","cxPropClass","cxPropZcqa","cxPropClearErrorMessage","cxPropDisabled","cxPropShowDisabledIcon","cxPropDisabledIconClass","cxPropReadonly","cxPropFieldKey","cxPropInfoTooltip","cxPropName","cxPropTabindex","cxPropTabIndex","lyteViewPort","cxPropPlaceholder","cxPropDownloadUrlKey","cxPropPreviewUrlKey","cxPropButtonClass","cxPropMandatory","cxPropShowWarning","cxPropWarningMessage","cxPropWarningIconClass","cxPropUploadProp","cxPropEmptyValue","cxPropRightIconClass","cxPropEllipsis","minifiedSize","cxPropInnerButtonClass","cxPropHideIconAfterUpload","cxPropMenuWrapperClass","cxPropTriggerUpload","cxPropMandatoryOption","cxPropMandatoryType","fileList","cxPropAriaErrorProperties"],data:function(){return{cxPropAutofocus:Lyte.attr("boolean",{default:!1}),cxPropFiles:Lyte.attr("array",{default:[]}),cxPropValue:Lyte.attr("array",{default:[]}),cxPropType:Lyte.attr("string",{default:"multiple"}),cxPropOptionsType:Lyte.attr("string",{default:"menu"}),cxPropField:Lyte.attr("object",{default:{}}),cxPropFrom:Lyte.attr("string",{default:"create"}),cxPropOptions:Lyte.attr("array",{default:[]}),cxPropFileLimit:Lyte.attr("number"),cxPropFileUniqueSelector:Lyte.attr("string",{default:"id"}),showOptions:Lyte.attr("boolean",{default:!1}),disableBtn:Lyte.attr("boolean",{default:!1}),tooltipMsg:Lyte.attr("string",{default:""}),cxPropId:Lyte.attr("string",{default:"cxFileUploadBtn"}),cxPropFileUnit:Lyte.attr("string",{default:""}),cxPropDigits:Lyte.attr("number",{default:0}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string"),cxPropErrorZcqaSuffix:Lyte.attr("string"),cxPropErrorClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropZcqa:Lyte.attr("string"),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!1}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropShowDisabledIcon:Lyte.attr("boolean",{default:!1}),cxPropDisabledIconClass:Lyte.attr("string",{default:""}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),cxPropFieldKey:Lyte.attr("string"),cxPropInfoTooltip:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropTabIndex:Lyte.attr("string"),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropPlaceholder:Lyte.attr("string",{default:"Choose File"}),cxPropDownloadUrlKey:Lyte.attr("string",{default:"download_Url"}),cxPropPreviewUrlKey:Lyte.attr("string",{default:"preview_Url"}),cxPropButtonClass:Lyte.attr("string",{default:""}),cxPropMandatory:Lyte.attr("boolean"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningMessage:Lyte.attr("string"),cxPropWarningIconClass:Lyte.attr("string"),cxPropUploadProp:Lyte.attr("object",{default:{}}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropRightIconClass:Lyte.attr("string"),cxPropEllipsis:Lyte.attr("boolean",{default:!0}),minifiedSize:Lyte.attr("boolean",{default:!1}),cxPropInnerButtonClass:Lyte.attr("string"),cxPropHideIconAfterUpload:Lyte.attr("boolean",{default:!1}),cxPropMenuWrapperClass:Lyte.attr("string"),cxPropTriggerUpload:Lyte.attr("boolean",{default:!1}),cxPropMandatoryOption:Lyte.attr("object",{default:{red_accent_line:"",asterisk:"*",required:"("+_cruxUtils.getI18n("crm.label.required")+")"}}),cxPropMandatoryType:Lyte.attr("string",{default:"red_accent_line"}),fileList:Lyte.attr("array",{default:[]}),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){var e=this.data.cxPropFileLimit,t=this.data.cxPropValue;this.readOnlyTooltip=_cruxUtils.getI18n("crm.lable.read.only"),this.limitReachTooltip=_cruxUtils.getI18n("crm.fileuploader.message.maxfilesexceeded",e),this.data.cxPropReadonly?this.setData("tooltipMsg",this.readOnlyTooltip):e&&t&&t.length>=e&&this.setData("tooltipMsg",this.limitReachTooltip),void 0!==this.data.cxPropRightIconClass||"multiple"!==this.data.cxPropType||this.data.cxPropShowDisabledIcon||(this.data.cxPropRightIconClass="menu"===this.data.cxPropOptionsType?"dropdown":""),"create"===this.data.cxPropFrom&&this.setFocusUtil()},didConnect:function(){"single"!==this.data.cxPropType&&"local"!==this.data.cxPropOptionsType||"view"===this.data.cxPropFrom||(this.fileUpload=$L("lyte-fileupload",this.$node)[0]),"multiple"===this.data.cxPropType&&(this.resizeFn(),this.resize=this.resizeFn.bind(this),window.addEventListener("resize",this.resize,!0))},didDestroy:function(){"single"===this.data.cxPropType&&"view"!==this.data.cxPropFrom&&delete this.fileUpload,"multiple"===this.data.cxPropType&&window.removeEventListener("resize",this.resize,!0)},resizeFn:function(){var e,t="view"==this.data.cxPropFrom?".cxFileList":".cxFileUploadButton",o=this;$L.fastdom.measure((()=>{(e=$L(t,o.$node)[0])&&(e.offsetWidth<=230?o.setData("minifiedSize",!0):o.setData("minifiedSize",!1))}))},getFiles:function(){return this.data.cxPropFiles},getValue:function(){var e=this.data.cxPropFiles;if("single"===this.data.cxPropType)return e[0];for(var t=e.length,o=[],a=0;a<t;a++)e[a].cxNewFile&&e[a].encryptedUploadId&&o.push({file_id:e[a].encryptedUploadId});return this.removedFiles&&this.removedFiles.length&&(o=this.removedFiles.concat(o)),o},setFiles:function(e){e=Array.isArray(e)?e:[e];if("single"===this.data.cxPropType){if(1!==e.length)return!1;var t=e[0],o=this.data.cxPropFiles;t.cxNewFile=!0,this.setBaseName(t),o.length?Lyte.arrayUtils(o,"replaceAt",0,t):Lyte.arrayUtils(o,"push",t)}else{var a=this.data.cxPropFileLimit;if(a&&this.data.cxPropFiles.length>=a)return;for(var r=0;r<e.length;r++){var i=this.data.cxPropFiles.length;if(e[r].cxNewFile=!0,this.setBaseName(e[r]),a&&i+1>=a){this.setData("disableBtn",!0),this.setData("tooltipMsg",this.limitReachTooltip),Lyte.arrayUtils(this.data.cxPropFiles,"push",e[r]);break}Lyte.arrayUtils(this.data.cxPropFiles,"push",e[r])}}},setBaseName:function(e){var t=e.fileName,o=t.lastIndexOf(".");-1!==o&&0!==o?(e.cxExtn=t.substring(o),e.cxFileName=t.substring(0,o)):e.cxFileName=t,e.fileType||(e.fileType=this.getFileType(e))},validate:function(){var e=!0,t=this.data.cxPropFileLimit,o=this.data.cxPropFiles,a=this.data.cxPropField;return 0===o.length?1==(e=this.validateMandatory(!0))?this.setData("cxPropErrorMessage",""):this.$node.focus():t&&o.length>t&&(this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.file.upload.maxlength.exceeds",Lyte.Component.registeredHelpers.cruxEncodeHTML(a.field_label))),e=!1),e},observeCxFiles:function(){var e=this.data.cxPropFileLimit,t=this.data.cxPropValue?this.data.cxPropValue:[],o=t.length;this.data.cxPropClearErrorMessage&&this.setData("cxPropErrorMessage",""),e&&o>=e&&this.setData({disableBtn:!0,tooltipMsg:this.limitReachTooltip}),this.initialCxValue=$L.extend(!0,[],t);for(var a=0;a<o;a++)this.setBaseName(t[a]);this.removedFiles=[],this.setData("cxPropFiles",$L.extend(!0,[],t))}.observes("cxPropValue","cxPropFrom").on("init"),observeReadOnly:function(){this.data.cxPropReadonly?this.setData("tooltipMsg",this.readOnlyTooltip):this.data.tooltipMsg!==this.limitReachTooltip&&this.setData("tooltipMsg","")}.observes("cxPropReadonly").on("didConnect"),observeMandatory:function(){var e="single"===this.data.cxPropType||"local"===this.data.cxPropOptionsType?".cxSFileUpCompElem":".cxFileUploadButton";this.observeMandatoryMixin(e)}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),mandatoryType:function(){var e="single"===this.data.cxPropType||"local"===this.data.cxPropOptionsType?".cxSFileUpCompElem":".cxFileUploadButton";this.observeMandatoryTypeMixin(e)}.observes("cxPropMandatoryType").on("didConnect"),observesdidConnect:function(){this.$node.focus=this.focus.bind(this),this.data.lyteViewPort||this.getMethods("onElementRendered")&&this.executeMethod("onElementRendered",this)}.observes("lyteViewPort").on("didConnect"),focus:function(){this.$node.querySelector("lyte-button")&&this.$node.querySelector("lyte-button").focus()},observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage")),$L(".cxFileUploadCreateWrap",this.$node)[0]&&(this.data.isError?$L(".cxFileUploadCreateWrap",this.$node)[0].classList.add("cxError"):$L(".cxFileUploadCreateWrap",this.$node)[0].classList.remove("cxError"))}.observes("cxPropErrorMessage","lyteViewPort").on("init"),downloadAttachment:function(e){var t=document.createElement("a");t.style="display: none",this.$node.appendChild(t),t.href=e[this.data.cxPropDownloadUrlKey],t.download=e.fileName,t.click(),t.remove()},actions:{fileUploadBtnClick:function(){"menu"!==this.data.cxPropOptionsType&&this.setData("showOptions",!0)},removeFile:function(e){if(this.getMethods("onBeforeRemoveFile")&&!1===this.executeMethod("onBeforeRemoveFile",e))return!1;var t=this.data.cxPropFiles,o=this.data.cxPropFileUniqueSelector,a=(this.data.cxPropValue,this.data.cxPropFileLimit),r=t.findIndex((function(t){return t[o]===e[o]}));if(-1!==r){if(Lyte.arrayUtils(t,"removeAt",r,1),this.initialCxValue.length){var i=this.initialCxValue.findIndex((function(t){return t[o]===e[o]}));-1!==i&&e.attachment_Id&&(this.removedFiles.push({_delete:null,attachment_id:e.attachment_Id}),this.initialCxValue.splice(i,1))}a&&t.length<a&&this.setData({disableBtn:!1,tooltipMsg:""}),this.getMethods("onRemoveFile")&&this.executeMethod("onRemoveFile",e,this)}},showInfoTooltip:function(e){this.showHideInfoTooltip(e)},openPreview:function(e){event.target.classList.contains("cxDownload")||event.target.classList.contains("cxRemoveFile")?event.stopPropagation():"link"!=e.fileType&&"png"!=e.fileType&&!e[this.data.cxPropPreviewUrlKey]||"mp3"==e.fileType||"movie"==e.fileType||"file"==e.fileType||"zip"==e.fileType?(this.downloadAttachment(e),event.stopPropagation()):this.getMethods("showPreview")&&this.executeMethod("showPreview",e)},localUploadElemClick:function(){var e=event.target.classList;if(e.contains("cxOpenUpload"))this.getMethods("showUploadModal")?this.executeMethod("showUploadModal",this):this.fileUpload.querySelector("lyte-file-select-area").click();else if(e.contains("cxRemoveFile")){var t=this.data.cxPropFiles[0];if(this.getMethods("onBeforeRemoveFile"))if(!1===this.executeMethod("onBeforeRemoveFile",t))return!1;t=Lyte.arrayUtils(this.data.cxPropFiles,"removeAt",0,1);if(this.getMethods("onRemoveFile"))return this.executeMethod("onRemoveFile",t,this)}}},methods:{onMenuItemClick:function(e){if(this.getMethods("onMenuClick")){var t=this.data.cxPropOptions.find((function(t){return t.system_value===e}));this.executeMethod("onMenuClick",t,this)}},hideInfoTooltip:function(){this.showHideInfoTooltip()},onRemoveFileFromSelectedCB:function(e,t){this.getMethods("onRemoveFileFromSelected")&&this.executeMethod("onRemoveFileFromSelected",e,t)},fetchContentCB:function(e){if(this.getMethods("fetchContent"))return this.executeMethod("fetchContent",e)},onUploadCB:function(e,t){if(this.getMethods("onUpload"))return this.executeMethod("onUpload",e,t)},onModalCloseCB:function(e){if(this.getMethods("onModalClose"))return this.executeMethod("onModalClose",e)},onModalShowCB:function(e){if(this.getMethods("onModalShow"))return this.executeMethod("onModalShow",e)},beforeCloseModalCB:function(e){if(this.getMethods("beforeCloseModal"))return this.executeMethod("beforeCloseModal",e)},beforeShowModalCB:function(e){if(this.getMethods("beforeShowModal"))return this.executeMethod("beforeShowModal",e)},onMenuBeforeOpen:function(){var e;if(this.getMethods("onBeforeOpenMenu")&&(e=this.executeMethod("onBeforeOpenMenu",this.$node)),this.data.disableBtn||this.data.cxPropReadonly||!1===e)return!1},onMenuOpen:function(e,t,o){this.getMethods("onOpenMenu")&&this.executeMethod("onOpenMenu",this.$node);let a=e.component.childComp.querySelector("lyte-menu-body"),r=o.clientWidth;this.initialWidth||(this.initialWidth=a.offsetWidth);var i=this.initialWidth>=r?this.initialWidth:r;$L(a).css({width:i+"px"})},onAddFileFn:function(e){var t=this.data.cxPropFiles;e.fileName=e.name,this.setBaseName(e);var o=$L.extend(!0,{},e);if("multiple"===this.data.cxPropType?(Lyte.arrayUtils(this.data.cxPropFiles,"push",o),this.data.cxPropFiles.length>=this.data.cxPropFileLimit&&this.setData("disableBtn",!0)):t[0]?Lyte.arrayUtils(this.data.cxPropFiles,"replaceAt",0,o):Lyte.arrayUtils(this.data.cxPropFiles,"push",o),this.getMethods("onAddFile"))return this.executeMethod("onAddFile",e,this)},afterRenderUpload:function(e){this.lyteFileUpload=e},onBeforeAddFile:function(e,t,o){if(this.getMethods("onBeforeAdd"))return this.executeMethod("onBeforeAdd",o,this.$node)},onBeforeRemoveFile:function(e,t){if(this.getMethods("onBeforeRemove"))return this.executeMethod("onBeforeRemove",e,t,this.$node)},onRemoveFile:function(e,t){if(this.getMethods("onRemove"))return this.executeMethod("onRemove",e,t,this.$node)},successFile:function(e,t,o){if(this.getMethods("onSuccess"))return this.executeMethod("onSuccess",e,this.$node,o)},onFailureFile:function(e,t,o){if(this.getMethods("onFailure"))return this.executeMethod("onFailure",e,this.$node,o)},onFileReject:function(e,t,o,a){this.getMethods("onReject")&&this.executeMethod("onReject",e,t,o,a)},onRequestSuccessFn:function(e,t){if(this.getMethods("onRequestSuccess"))return this.executeMethod("onRequestSuccess",e,t,this.$node)},onRequestFailureFn:function(e,t){if(this.getMethods("onRequestFailure"))return this.executeMethod("onRequestFailure",e,t,this.$node)},onFileSuccessFn:function(e,t){this.getMethods("onFileSuccess")&&this.executeMethod("onFileSuccess",e,t,this.$node)},onFileFailureFn:function(e,t){if(this.getMethods("onFileFailure"))return this.executeMethod("onFileFailure",e,t,this.$node)},onProgressFn:function(e,t,o){if(this.getMethods("onProgress"))return this.executeMethod("onProgress",e,t,o,this.$node)},onBeforeSendFn:function(e,t,o,a,r,i){if(this.getMethods("onBeforeSend"))return this.executeMethod("onBeforeSend",e,t,o,this.$node,r,i)},onSendFn:function(e,t,o,a,r,i){this.getMethods("onSend")&&this.executeMethod("onSend",e,t,o,this.$node,r,i)},onBeforeOpenFn:function(e,t){if(this.getMethods("onBeforeOpen"))return this.executeMethod("onBeforeOpen",e,t)},onRetryFn:function(e,t){if(this.getMethods("onRetry"))return this.executeMethod("onRetry",e,t,this.$node)},onSelectFn:function(e,t){if(this.getMethods("onSelect"))return this.executeMethod("onSelect",e,t)},onBeforeManualRetryFn:function(e){if(this.getMethods("onBeforeManualRetry"))return this.executeMethod("onBeforeManualRetry",e)},onValidationEndFn:function(){if(this.getMethods("onValidationEnd"))return this.executeMethod("onValidationEnd")}},getFileType(e){var t=e.fileName;extension=t.substring(t.lastIndexOf(".")+1).toLowerCase();return["jpeg","jpg","gif","png","webp","bmp","svg"].includes(extension)?"image":["pdf"].includes(extension)?"pdf":["zip","zipx","tar","gz","z","cab","rar","bz2","lzh","7z","img","iso"].includes(extension)?"zip":["avi","wmv","mp4","mpeg","mpg","mov","flv","mkv","webm"].includes(extension)?"video":["mp3","ogg","oga","wma","m4p","m4a","au","3gp"].includes(extension)?"audio":["doc","docx","odt","rtf"].includes(extension)?"docx":["odp","pps","pot","pptx","ppt"].includes(extension)?"ppt":["csv","xls","xlsx","ods","xlsm","sxc","tsv"].includes(extension)?"xls":["html","htm"].includes(extension)?"html":"allfile"},observeAndSetAria:function(){this.data.cxPropAria&&this.observeAndSetAriaMixin()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-element-validation"]}),Lyte.Component.registerHelper("checkHideIcon",(function(e,t){return!e||!t})),Lyte.Component.register("crux-alert",{_template:'<template tag-name="crux-alert"> <lyte-alert on-show="{{method(\'setOnShow\')}}" on-close="{{method(\'setOnClose\')}}" on-accept="{{method(\'setOnAccept\')}}" on-reject="{{method(\'setOnReject\')}}" lt-prop-show="{{lbind(cxPropShow)}}" lt-prop-type="{{cxPropType}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-allow-multiple="{{cxPropAllowMultiple}}" lt-prop-top="{{cxPropTop}}" lt-prop-buttons="{{cxPropButtons}}" lt-prop-button-position="{{cxPropButtonPosition}}" lt-prop-show-close-button="{{cxPropShowCloseButton}}" lt-prop-close-on-escape="{{cxPropCloseOnEscape}}" lt-prop-dimmer="{{cxPropDimmer}}" lt-prop-yield="true" lt-prop-animation="{{cxPropAnimation}}" lt-prop-content-align="{{cxPropContentAlign}}" lt-prop-aria="{{cxPropAria}}" lt-prop-prevent-focus="{{cxPropPreventFocus}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}"> <template is="registerYield" yield-name="alert"> <div data-zcqa="cxAlertContainerZcqa"> <template is="if" value="{{cxPropHeading}}"><template case="true"> <lyte-alert-header> <div class="alertContent"> <template is="if" value="{{cxPropType}}"><template case="true"> <div class="alertContentMiddle"> <span class="{{cxPropClass}}"></span> </div> </template></template> <div class="alertContentMiddle"> <span class="alertHeader" data-zcqa="{{cxPropHeadingMessageZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropHeadingMessageMarkdown,\'!\'))}}"><template case="true"> {{cxPropHeading}} </template><template case="false"> {{unescape(if(cxPropHeadingMessageMarkdown,markdown(cxPropHeading),cxPropHeading))}} </template></template> </span> </div> </div> </lyte-alert-header> </template></template> <template is="if" value="{{expHandlers(cxPropPrimaryMessage,\'||\',cxPropSecondaryMessage)}}"><template case="true"> <lyte-alert-content> <div class="alertContent"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'&amp;&amp;\',expHandlers(cxPropHeading,\'!\')),\'&amp;&amp;\',cxPropPrimaryMessage)}}"><template case="true"> <div class="alertContentMiddle"> <span class="{{cxPropClass}}"></span> </div> </template></template> <template is="if" value="{{cxPropPrimaryMessage}}"><template case="true"> <span class="alertPrimaryMsg" data-zcqa="{{cxPropPrimaryMessageZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropPrimaryMessageMarkdown,\'!\'))}}"><template case="true"> {{cxPropPrimaryMessage}} </template><template case="false"> {{unescape(if(cxPropPrimaryMessageMarkdown,markdown(cxPropPrimaryMessage),cxPropPrimaryMessage))}} </template></template> </span> </template></template> </div> <template is="if" value="{{cxPropSecondaryMessage}}"><template case="true"> <span class="alertSecondaryMsg" data-zcqa="{{cxPropSecondayMessageZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropSecondaryMessageMarkdown,\'!\'))}}"><template case="true"> {{cxPropSecondaryMessage}} </template><template case="false"> {{unescape(if(cxPropSecondaryMessageMarkdown,markdown(cxPropSecondaryMessage),cxPropSecondaryMessage))}} </template></template> </span> </template></template> </lyte-alert-content> </template></template> <lyte-alert-footer> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-yield yield-name="cx-alert-footer"></lyte-yield> </template><template case="false"> <div class="alertFooter {{cxPropButtonPosition}}"> <template is="for" items="{{cxPropButtons}}" item="item" index="index"> <lyte-button lt-prop-type="{{item.type}}" lt-prop-appearance="{{item.appearance}}" onclick="{{action(\'alertButtonClick\',item.type,item.text)}}"> <template is="registerYield" yield-name="text"> {{item.text}} </template> </lyte-button> </template> </div> </template></template> </lyte-alert-footer> </div> </template> </lyte-alert> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"attr",position:[1,1,3,1,1]},{type:"if",position:[1,1,3,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,5]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropShow","cxPropPrimaryMessage","cxPropHeading","cxPropSecondaryMessage","cxPropType","cxPropClass","cxPropWrapperClass","cxPropAllowMultiple","cxPropTop","cxPropButtons","cxPropButtonPosition","cxPropShowCloseButton","cxPropCloseOnEscape","cxPropDimmer","cxPropYield","cxPropAnimation","cxPropContentAlign","cxPropAria","cxPropPreventFocus","cxPropAriaAttributes","cxAlertHeader","cxAlertContent","cxPropHeadingMessageMarkdown","cxPropPrimaryMessageMarkdown","cxPropSecondaryMessageMarkdown","cxPropHeadingMessageZcqa","cxPropPrimaryMessageZcqa","cxPropSecondayMessageZcqa","cxPropFooterYield","cxPropUtilAlert"],data:function(){return{cxPropShow:Lyte.attr("boolean",{default:!1}),cxPropPrimaryMessage:Lyte.attr("string"),cxPropHeading:Lyte.attr("string"),cxPropSecondaryMessage:Lyte.attr("string"),cxPropType:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string",{default:"cxAlertWrapper"}),cxPropAllowMultiple:Lyte.attr("string",{default:!1}),cxPropTop:Lyte.attr("string",{default:"0px"}),cxPropButtons:Lyte.attr("array",{default:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary"}]}),cxPropButtonPosition:Lyte.attr("string",{default:"center"}),cxPropShowCloseButton:Lyte.attr("boolean",{default:!1}),cxPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),cxPropDimmer:Lyte.attr("object",{default:{color:"black",opacity:"0.4"}}),cxPropYield:Lyte.attr("boolean",{default:!1}),cxPropAnimation:Lyte.attr("string",{default:"slideDown"}),cxPropContentAlign:Lyte.attr("string",{default:"left"}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropPreventFocus:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:""}),cxAlertHeader:Lyte.attr("string"),cxAlertContent:Lyte.attr("string"),cxPropHeadingMessageMarkdown:Lyte.attr("boolean",{default:!1}),cxPropPrimaryMessageMarkdown:Lyte.attr("boolean",{default:!1}),cxPropSecondaryMessageMarkdown:Lyte.attr("boolean",{default:!1}),cxPropHeadingMessageZcqa:Lyte.attr("string",{default:"cxAlertHeadingMessageZcqa"}),cxPropPrimaryMessageZcqa:Lyte.attr("string",{default:"cxAlertPrimaryMessageZcqa"}),cxPropSecondayMessageZcqa:Lyte.attr("string",{default:"cxAlertSecondaryMessageZcqa"}),cxPropFooterYield:Lyte.attr("boolean",{default:"false"}),cxPropUtilAlert:Lyte.attr("boolean",{default:!1})}},init:function(){},didConnect:function(){},actions:{alertButtonClick:function(e,t){var o=!0,a=this.data.cxPropUtilAlert?this.$node.querySelector("lyte-alert"):this,r="on"+e.charAt(0).toUpperCase()+e.slice(1);this.getMethods(r)&&(o=null==(o=this.executeMethod(r,a,t))||o),o&&this.$node.cxProp("show",!1)}},methods:{setOnShow:function(e){e.childComp.querySelectorAll(".alertFooter lyte-button").forEach((function(t,o){if(e.getData("ltPropButtons")[o].cxPropZcqa)t.setAttribute("data-zcqa",e.getData("ltPropButtons")[o].cxPropZcqa);else if(e.getData("ltPropButtons")[o].type){var a=e.getData("ltPropButtons")[o].type;t.setAttribute("data-zcqa","cxAlert"+a.charAt(0).toUpperCase()+a.slice(1)+"ButtonZcqa")}else t.setAttribute("data-zcqa","cxAlertAcceptButtonZcqa")})),this.getMethods("onShow")&&this.executeMethod("onShow",e)},setOnClose:function(e){this.getMethods("onClose")&&this.executeMethod("onClose",e)},setOnAccept:function(e,t){this.getMethods("onAccept")&&this.executeMethod("onAccept",e,t)},setOnReject:function(e,t){this.getMethods("onReject")&&this.executeMethod("onReject",e,t)}},setIconClass:function(){if(this.getData().cxPropType){var e=this.getData().cxPropType.toLowerCase()+"AlertIcon lyteStatusIcon";this.setData("cxPropClass",e)}}.observes("cxPropType").on("init")}),Lyte.Component.register("crux-messagebox",{_template:'<template tag-name="crux-messagebox"> <lyte-messagebox on-close="{{method(\'setClose\')}}" on-show="{{method(\'setShow\')}}" lt-prop-message="{{cxPropMessage}} " lt-prop-show="{{lbind(cxPropShow)}}" lt-prop-type="{{cxPropType}} " lt-prop-class="{{cxPropClass}}" lt-prop-duration="{{cxPropDuration}}" lt-prop-offset="{{cxPropOffset}}" lt-prop-transition="{{cxPropTransition}}" lt-prop-yield="true" lt-prop-animation="{{cxPropAnimation}}" lt-prop-close-manually="{{cxPropCloseManually}}"> <template is="registerYield" yield-name="messageboxYield"> <span> <template is="if" value="{{expHandlers(expHandlers(cxPropYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropMarkdown,\'!\'))}}"><template case="true"> {{cxPropMessage}} </template><template case="false"> {{unescape(if(cxPropMarkdown,markdown(cxPropMessage),cxPropMessage))}} </template></template> </span> </template> </lyte-messagebox> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropShow","cxPropMessage","cxPropType","cxPropDuration","cxPropOffset","cxPropTransition","cxPropYield","cxPropClass","cxPropMarkdown","cxPropCloseManually"],data:function(){return{cxPropShow:Lyte.attr("boolean",{default:!1}),cxPropMessage:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string",{default:"success"}),cxPropDuration:Lyte.attr("string",{default:"2000"}),cxPropOffset:Lyte.attr("object"),cxPropTransition:Lyte.attr("string",{default:' {"animation" : "fadeIn" } '}),cxPropYield:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:"cxAlertWrapper"}),cxPropMarkdown:Lyte.attr("boolean",{default:!1}),cxPropCloseManually:Lyte.attr("boolean",{default:!1})}},init:function(){"cxAlertWrapper"!=this.$node.getData("cxPropClass")&&this.$node.setData("cxPropClass",this.$node.getData("cxPropClass")+" cxAlertWrapper")},actions:{},methods:{setShow:function(){var e=this.$node.querySelector("lyte-messagebox");this.getMethods("onShow")&&e&&this.executeMethod("onShow",e.component)},setClose:function(){var e=this.$node.querySelector("lyte-messagebox");this.getMethods("onClose")&&e&&this.executeMethod("onClose",e.component)}}}),Lyte.Component.register("crux-voicenote-component",{_template:'<template tag-name="crux-voicenote-component"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <div id="cruxLoadingElem" class="cxLoadOnViewElement" tabindex="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" onfocus="{{action(\'focusOnViewElement\')}}"> <template is="if" value="{{cxPropField[cxPropFieldKey]}}"><template case="true"> <div class="cxLoadOnViewLabel"> {{cxPropField[cxPropFieldKey]}} <div class="cxLoadOnViewLoader"></div> </div> </template></template> <div class="cxLoadOnViewValue"> {{cxPropValue}} <div class="cxLoadOnViewLoader"></div> </div> </div> <dummy-port-element></dummy-port-element></template><template case="false"> <template is="switch" value="{{cxPropFrom}}"><template case="create"> <div> <lyte-input lt-prop-update-delay="{{cxPropUpdateDelay}}" lt-prop-callback-delay="{{cxPropCallbackDelay}}" lt-prop-name="{{cxPropName}}" id="{{cxPropId}}" lt-prop-tooltip-config="{{cxPropTooltipConfig}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-type="text" lt-prop-value="{{lbind(cxPropValue)}}" lt-prop-maxlength="{{cxPropMaxlength}}" lt-prop-direction="{{cxPropDirection}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-disabled="{{cxPropInputDisabled}}" lt-prop-readonly="{{cxPropReadonly}}" on-value-change="{{method(\'onInputValueChange\')}}" lt-prop-appearance="{{cxPropAppearance}}" data-zcqa="{{cxPropZcqa}}" lt-prop-tab-index="{{if(cxPropTabIndex,cxPropTabIndex,cxPropTabindex)}}" lt-prop-autofocus="{{cxPropAutofocus}}" lt-prop-autocomplete="{{cxPropAutocomplete}}" lt-prop-auto-update="{{cxPropEnableLbind}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}" lt-prop-tooltip-class="{{cxPropTooltipClass}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-width="{{cxPropWidth}}" class="w100per"></lyte-input> </div> <template is="if" value="{{cxPropShowWarning}}"><template case="true"> <div class="cxFieldWarningMsg"><span class="cxPropWarningIconSpacing {{cxPropWarningIconClass}}"></span> <span class="cxPropWarningMsgTxt">{{unescape(cxPropWarningMessage)}}</span></div> </template><template case="false"><template is="if" value="{{isError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropErrorMessage}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropErrorMessage}}"></lyte-yield></template> </crux-error-message> </template></template></template></template> </template><template case="view"> <template is="if" value="{{expHandlers(expHandlers(cxPropValue,\'!=\',undefined),\'&amp;&amp;\',expHandlers(cxPropValue,\'!=\',&quot;&quot;))}}"><template case="true"> <lyte-voicenote lt-prop-prefetch-options="{{cxPropPrefetchOptions}}" lt-prop-preload="none" lt-prop-prefetch="{{cxPropPrefetch}}" lt-prop-vol-ctrl-enabled="{{cxPropVolCtrlEnabled}}" lt-prop-src="{{cxPropSrc}}" lt-prop-popover="{&quot;freeze&quot;:false,&quot;showCloseButton&quot;:false,&quot;wrapperClass&quot;:&quot;callsCustomVolumeSlider&quot;}" on-error="{{method(&quot;onVoiceNoteError&quot;)}}" on-prefetch-error="{{method(\'onVoiceNoteError\')}}" lt-prop-playback-rate="0" class="{{if(ifEquals(cxPropDisabled,true),\'cxVoiceNoteDisabled\')}}" on-prefetch-success="{{method(&quot;onVoiceNoteSuccess&quot;)}}" style="{{if(cxPropWidth,concat(\'width: \',cxPropWidth),\'\')}}"></lyte-voicenote> </template><template case="false"><template is="if" value="{{cxPropEmptyValue}}"><template case="true"> {{cxPropEmptyValue}} </template></template></template></template> <template is="if" value="{{isLoadingError}}"><template case="true"> <crux-error-message cx-prop-aria-error-properties="{{cxPropAriaErrorProperties}}" error-message="{{cxPropLoadingError}}" cx-prop-error-yield="{{cxPropErrorYield}}" cx-prop-error-zcqa-prefix="{{cxPropErrorZcqaPrefix}}" cx-prop-error-zcqa-suffix="{{cxPropErrorZcqaSuffix}}" class="{{cxPropErrorClass}}" cx-prop-error-span-class="{{cxPropErrorSpanClass}}"> <template is="registerYield" yield-name="errorYield"><lyte-yield yield-name="errorYield" error-message="{{cxPropLoadingError}}"></lyte-yield></template> </crux-error-message> </template></template> </template></template> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2]},{type:"attr",position:[2,1]},{type:"if",position:[2,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}},{type:"text",position:[2,3,1]},{type:"componentDynamic",position:[4]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{create:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"text",position:[1,2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},view:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["cxPropWidth",{type:"helper",value:{name:"concat",args:["'width: '","cxPropWidth"]}},"''"]}}}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropFrom","lyteViewPort","cxPropPrefetch","cxPropSrc","cxPropVolCtrlEnabled","cxPropValue","cxPropShowWarning","cxPropWarningIconClass","cxPropWarningMessage","isError","cxPropErrorMessage","cxPropErrorYield","cxPropErrorZcqaPrefix","cxPropErrorZcqaSuffix","cxPropErrorClass","cxPropErrorSpanClass","cxPropPrefetchOptions","cxPropPreventFocusOnError","cxPropId","cxPropName","cxPropTooltipConfig","cxPropInputClass","cxPropDirection","cxPropPlaceholder","cxPropDisabled","cxPropReadonly","cxPropClearErrorMessage","cxPropAppearance","cxPropZcqa","cxPropTabindex","cxPropTabIndex","cxPropAutofocus","cxPropAutocomplete","cxPropEnableLbind","cxPropAria","cxPropAriaAttributes","cxPropTooltipClass","cxPropWrapperClass","cxPropField","cxPropMandatory","cxPropWidth","cxPropInputDisabled","isLoadingError","cxPropLoadingError","cxPropEmptyValue","cxPropUpdateDelay","cxPropCallbackDelay","cxPropPlayButZcqa","cxPropVoiceCtrlZcqa","cxPropAriaErrorProperties"],data:function(){return{cxPropFrom:Lyte.attr("string",{default:"view"}),lyteViewPort:Lyte.attr("boolean",{default:!1}),cxPropPrefetch:Lyte.attr("boolean",{default:!1}),cxPropSrc:Lyte.attr("array"),cxPropVolCtrlEnabled:Lyte.attr("boolean",{default:!0}),cxPropValue:Lyte.attr("string"),cxPropShowWarning:Lyte.attr("boolean",{default:!1}),cxPropWarningIconClass:Lyte.attr("string",{default:""}),cxPropWarningMessage:Lyte.attr("string",{default:""}),isError:Lyte.attr("boolean",{default:!1}),cxPropErrorMessage:Lyte.attr("string",{default:""}),cxPropErrorYield:Lyte.attr("boolean",{default:!1}),cxPropErrorZcqaPrefix:Lyte.attr("string",{default:""}),cxPropErrorZcqaSuffix:Lyte.attr("string",{default:"Error"}),cxPropErrorClass:Lyte.attr("string"),cxPropErrorSpanClass:Lyte.attr("string"),cxPropPrefetchOptions:Lyte.attr("object"),cxPropPreventFocusOnError:Lyte.attr("boolean",{default:!1}),cxPropId:Lyte.attr("string",{default:""}),cxPropName:Lyte.attr("string",{default:""}),cxPropTooltipConfig:Lyte.attr("string",{default:'{"position": "followcursor", "appearance": "box"}'}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropDirection:Lyte.attr("string",{default:"vertical"}),cxPropPlaceholder:Lyte.attr("string"),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropReadonly:Lyte.attr("boolean"),cxPropClearErrorMessage:Lyte.attr("boolean",{default:!0}),cxPropAppearance:Lyte.attr("string",{default:"flat"}),cxPropZcqa:Lyte.attr("string"),cxPropTabindex:Lyte.attr("string"),cxPropTabIndex:Lyte.attr("string"),cxPropAutofocus:Lyte.attr("boolean",{default:!1}),cxPropAutocomplete:Lyte.attr("string",{default:"on"}),cxPropEnableLbind:Lyte.attr("boolean",{default:!0}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:{}}),cxPropTooltipClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string"),cxPropField:Lyte.attr("object"),cxPropMandatory:Lyte.attr("boolean",{default:!1}),cxPropWidth:Lyte.attr("string"),cxPropInputDisabled:Lyte.attr("boolean",{default:!1}),isLoadingError:Lyte.attr("boolean",{default:!1}),cxPropLoadingError:Lyte.attr("string",{default:""}),cxPropEmptyValue:Lyte.attr("string",{default:""}),cxPropUpdateDelay:Lyte.attr("number",{default:250}),cxPropCallbackDelay:Lyte.attr("number",{default:0}),cxPropPlayButZcqa:Lyte.attr("string",{default:""}),cxPropVoiceCtrlZcqa:Lyte.attr("string",{default:""}),cxPropAriaErrorProperties:Lyte.attr("object")}},init:function(){"create"===this.data.cxPropFrom&&this.setFocusUtil()},actions:{},methods:{onVoiceNoteError:function(e,t){this.getMethods("onPrefetchError")?this.executeMethod("onPrefetchError",e,t):this.setData("cxPropLoadingError",_cruxUtils.getI18n("crm.view.calls.recording.err.msg"))},onVoiceNoteSuccess:function(e,t){this.getMethods("onPrefetchSuccess")?this.executeMethod("onPrefetchSuccess",e,t):this.setData("cxPropLoadingError","")},onInputValueChange:function(){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",this.getData("cxPropValue"))}},getValue:function(){return this.data.cxPropValue},validate:function(){var e=this.data.cxPropValue,t=this.data.cxPropField;if(!e||!e.trim())return this.validateMandatory(!0)?(this.setData("cxPropErrorMessage",""),!0):(this.data.cxPropPreventFocusOnError||this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus(),!1);var o=this.isValidWebUrl(e);return o?this.setData("cxPropErrorMessage",""):(this.getMethods("onError")?this.executeMethod("onError",this.errorCodes.ERR02,this):this.setData("cxPropErrorMessage",_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(t.field_label))),!this.data.cxPropPreventFocusOnError&&this.$node.querySelector("lyte-input")&&this.$node.querySelector("lyte-input").focus()),o},observesView:function(){if("view"==this.data.cxPropFrom){var e=!1,t=[],o={},a=this.data.cxPropValue;if(a&&a.indexOf("api.twilio")>0)for(var r=a.split(","),i=r.length,s=0;s<i;s++)o.src=r[s],o.type="audio/mpeg",t[s]=o;else a&&("undefined"!=typeof pbdomain&&a.startsWith(pbdomain)&&(e=!0),0!==a.toLowerCase().indexOf("http")&&(a="http://"+a),o.src=a,o.type="audio/mpeg",t[0]=o);if(t){var p=Lyte.deepCopyObject(t);this.setData("cxPropSrc",p),this.setData("cxPropPrefetch",e),e&&this.setData("cxPropPrefetchOptions",{method:"GET",mode:"cors",credentials:"include"})}this.data.cxPropLoadingError?this.setData("cxPropDisabled",!0):(this.setData("cxPropLoadingError",""),this.setData("cxPropDisabled",!1))}else this.setFocusUtil()}.observes("cxPropFrom").on("init"),observeDidConnect:function(){var e=this.$node.querySelector(".lyteVoiceNotePausePlayIcon"),t=this.$node.querySelector(".lyteVoiceNoteVolumeControl");e&&t&&(e.setAttribute("data-zcqa",this.data.cxPropPlayButZcqa),t.setAttribute("data-zcqa",this.data.cxPropVoiceCtrlZcqa))}.observes("cxPropFrom","lyteViewPort").on("didConnect"),observeMandatory:function(){"create"==this.data.cxPropFrom&&this.observeMandatoryMixin("lyte-input")}.observes("cxPropField.required","lyteViewPort","cxPropMandatory","cxPropFrom").on("didConnect"),observeIsError:function(){"create"==this.getData("cxPropFrom")&&this.$node.querySelector("lyte-input")&&(this.getData("isError")?this.$node.querySelector("lyte-input").classList.add("cxErrorBox"):this.$node.querySelector("lyte-input").classList.remove("cxErrorBox"))}.observes("isError","lyteViewPort").on("didConnect"),observeErrorMessage:function(){this.setData("isError",""!=this.getData("cxPropErrorMessage"))}.observes("cxPropErrorMessage","lyteViewPort").on("init"),observeLoadingError:function(){this.setData("isLoadingError",""!=this.getData("cxPropLoadingError"))}.observes("cxPropLoadingError").on("init")},{mixins:["crux-element-validation"]}),Lyte.Component.register("crux-merge-field-body",{_template:'<template tag-name="crux-merge-field-body"> <lyte-beta-popover class="mergeFeildPopOver" lt-prop-wrapper-class="cxMergeFieldBodyPopover" lt-prop-placement="bottom" lt-prop-close-on-escape="{{cxPropCloseOnEscape}}" lt-prop-max-height="300px" lt-prop-width="{{cxPropWidth}}" lt-prop-scrollable="true" lt-prop-duration="50" lt-prop-prevent-focus="true" lt-prop-show-close-button="false" lt-prop-show="{{cxPropShow}}" lt-prop-freeze="false" lt-prop-close-on-body-click="{{cxPropCloseOnBodyClick}}" on-close="{{method(&quot;onClosePopOver&quot;)}}" on-show="{{method(\'onPopOverShow\')}}" lt-prop-offset="{{cxPropOffset}}" on-before-close="{{method(&quot;onBeforePopupClose&quot;)}}" lt-prop-type="{{cxPropType}}" lt-prop-auto-align="true"> <template is="registerYield" yield-name="popover"> <template is="if" value="{{expHandlers(cxPropShowDropdown,\'&amp;&amp;\',expHandlers(cxPropType,\'!=\',&quot;box&quot;))}}"><template case="true"> <crux-dropdown class="cxMegeFieldPopModuleDropdown" cx-prop-selected="{{cxPropSelected}}" on-show="{{method(\'onDropdownOpen\')}}" on-hide="{{method(\'onDropdownHide\')}}" cx-prop-user-value="{{cxPropUserValue}}" cx-prop-system-value="{{cxPropSystemValue}}" cx-prop-options="{{cxPropDropOptions}}" on-option-select="{{method(\'OnDropdownOptionSelected\')}}" on-before-show="{{method(\'onBeforeDropdownShow\')}}" cx-prop-zcqa="{{cxPropDropdownDataZcqa}}" cx-prop-maxsearch="{{cxPropMaxsearch}}"></crux-dropdown> </template></template> <lyte-popover-content class="cxMegeFieldPopContent"> <div class="focusDiv"> <template is="for" items="{{field}}" item="value" index="key"> <template is="if" value="{{cruxHasProperty(value,cxPropUserValue)}}"><template case="true"> <div class="cxMergeFieldPopFieldsLabel" onclick="{{action(\'popoverItemClick\',event,value)}}" onmouseover="{{action(\'mouseEvent\',\'over\',event)}}" onmouseout="{{action(\'mouseEvent\',\'out\',event)}}"> <template is="if" value="{{cxPropRenderHtmlInUserValue}}"><template case="true"> {{unescape(value[cxPropUserValue])}} </template><template case="false"> <template is="if" value="{{value.highlight_text}}"><template case="true"> <lyte-text lt-prop-yield="true" lt-prop-value="{{value[cxPropUserValue]}}"> <template is="registerYield" yield-name="lyte-text">{{unescape(value.highlight_text)}}</template> </lyte-text> </template><template case="false"> <lyte-text lt-prop-value="{{value[cxPropUserValue]}}"></lyte-text> </template></template> </template></template> </div> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(cxIsObject(value),\'===\',false),\'&amp;&amp;\',expHandlers(expHandlers(cxPropType,\'!=\',&quot;box&quot;),\'||\',cxPropOptSupport))}}"><template case="true"> <div class="cxMergeFieldPopSubHeading"><lyte-text lt-prop-value="{{captialize(value)}}"></lyte-text></div> </template></template> </template></template> </template> </div> </lyte-popover-content> </template> </lyte-beta-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1,1]},{type:"for",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropField","cxPropShow","cxPropShowDropdown","cxPropUserValue","cxPropSystemValue","cxPropDropOptions","cxPropCloseOnBodyClick","cxPropSelected","cxPropSectionKeyName","cxPropOffset","cxPropCloseOnEscape","cxPropType","cxPropWidth","cxPropReferenceId","cxPropOptSupport","cxPropRenderHtmlInUserValue","cxPropShowWithoutHash","cxPropIsMergeFieldSort","cxPropZcqa","cxPropMaxsearch","cxPropDropdownDataZcqa"],data:function(){return{cxPropField:Lyte.attr("array",{default:[]}),cxPropShow:Lyte.attr("boolean",{default:!1}),cxPropShowDropdown:Lyte.attr("boolean",{default:!1}),cxPropUserValue:Lyte.attr("string",{default:"field_label"}),cxPropSystemValue:Lyte.attr("string",{default:"system_value"}),cxPropDropOptions:Lyte.attr("array"),cxPropCloseOnBodyClick:Lyte.attr("boolean",{default:!0}),cxPropSelected:Lyte.attr("string"),cxPropSectionKeyName:Lyte.attr("string",{default:"name"}),cxPropOffset:Lyte.attr("object"),cxPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),cxPropType:Lyte.attr("string",{default:"callout"}),cxPropWidth:Lyte.attr("string",{default:"232px"}),cxPropReferenceId:Lyte.attr("string",{default:"module_ref_id"}),cxPropOptSupport:Lyte.attr("boolean",{default:!1}),cxPropRenderHtmlInUserValue:Lyte.attr("boolean",{default:!1}),cxPropShowWithoutHash:Lyte.attr("boolean",{default:!1}),cxPropIsMergeFieldSort:Lyte.attr("boolean",{default:!1}),cxPropZcqa:Lyte.attr("string",{default:""}),cxPropMaxsearch:Lyte.attr("number",{default:10}),cxPropDropdownDataZcqa:Lyte.attr("string",{default:""})}},init:function(){this.handleKeyDown=this.handleKeyDown.bind(this),document.addEventListener("keydown",this.handleKeyDown)},actions:{popoverItemClick:function(e,t){this.getMethods("onMergeFieldOptionClick")&&this.executeMethod("onMergeFieldOptionClick",e,t),this.setData("cxPropShow",!1)},mouseEvent:function(e,t){if(!this.stop_event)if("over"==e){var o=$L(".cxMergeFieldLabelActive",this.$node.querySelector(".mergeFeildPopOver").component.childComp);o[0]&&o[0].classList.contains("cxMergeFieldLabelActive")&&o[0].classList.remove("cxMergeFieldLabelActive"),$L(t.target).closest(".cxMergeFieldPopFieldsLabel")[0].classList.add("cxMergeFieldLabelActive")}else $L(t.target).closest(".cxMergeFieldPopFieldsLabel")[0].classList.remove("cxMergeFieldLabelActive")}},methods:{onBeforeDropdownShow:function(e){},onDropdownOpen:function(){$L(".cxMegeFieldPopModuleDropdown",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0].querySelector(".lyteDummyEventContainer").blur(),this.$node._element.focus(),$L(this.$node.querySelector(".mergeFeildPopOver").component.actualPopoverDiv).addClass("cxMergeFieldModuleDropdownVisible")},onDropdownHide:function(e){$L(this.$node.querySelector(".mergeFeildPopOver").component.actualPopoverDiv).removeClass("cxMergeFieldModuleDropdownVisible"),e.target.classList.contains("cxMergeFieldBodyPopover")||this.$node._element.focus()},onPopOverShow:function(){var e=$L(".cxMegeFieldPopModuleDropdown",this.$node.querySelector(".mergeFeildPopOver").component.childComp);e[0]&&e[0].querySelector(".cxFakeDummyEventContainer").blur(),this.updateDataZcqa(),this.setData("cxPropShow",!0),this.popoverOpend||this.setDivLabelForScroll()},onBeforePopupClose:function(){$L(".cxMegeFieldPopContent",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0].querySelectorAll(".cxMergeFieldPopFieldsLabel")[0].parentNode.parentNode.scrollTop=0},onClosePopOver:function(){this.setData({cxPropSelected:"",cxPropShowDropdown:!1,cxPropField:[]})},OnDropdownOptionSelected:function(e,t){var o=this;t=this.data.cxPropDropOptions.find((e=>e[o.data.cxPropSystemValue]===t));var a=this.data.cxPropField.filter(function(e){if(t[this.data.cxPropSystemValue]==e.module[this.data.cxPropSystemValue])return e}.bind(this));if(a[0].sections.length>1){for(var r=[],i=0;i<a[0].sections.length;i++)this.data.cxPropIsMergeFieldSort&&(a[0].sections[i].fields=this.sortMergeField(a[0].sections[i].fields)),r=[...r,a[0].sections[i][this.data.cxPropSectionKeyName],...a[0].sections[i].fields];this.setData("field",r)}else{var s=a[0].sections[0].fields;this.data.cxPropIsMergeFieldSort&&(s=this.sortMergeField(s)),this.setData("field",s)}var p=$L(".cxMegeFieldPopContent",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0].querySelectorAll(".cxMergeFieldPopFieldsLabel");p[0].classList.add("cxMergeFieldLabelActive"),p[0].parentNode.parentNode.scrollTop=0,this.updateDataZcqa()}},updateDataZcqa:function(){var e=$L(".cxMegeFieldPopModuleDropdown",this.$node.querySelector(".mergeFeildPopOver").component.childComp);e&&e[0]&&this.setData("cxPropDropdownDataZcqa",e[0].component.data.selectValue+"_"+this.getData("cxPropZcqa"))},setDivLabelForScroll:function(){for(var e=$L(".cxMegeFieldPopContent",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0].querySelectorAll(".cxMergeFieldPopFieldsLabel"),t=e.length,o=0;o<t;o++)e[o]&&e[o].classList.contains("cxMergeFieldLabelActive")&&e[o].classList.remove("cxMergeFieldLabelActive");e[0].classList.add("cxMergeFieldLabelActive"),e[0].parentNode.parentNode.scrollTop=0},observeField:function(){if(this.data.cxPropField.length){if(this.data.cxPropShowDropdown){var e=this.data.cxPropSelected,t=(e&&this.data.cxPropField.filter(function(t){if(e==t.module[this.data.cxPropSystemValue])return t.sections[0].fields}.bind(this)))[0].sections[0].fields;this.data.cxPropIsMergeFieldSort&&(t=this.sortMergeField(t)),this.setData("field",t)}else this.setField(this.data.cxPropField);var o=$L(".cxMegeFieldPopContent",this.$node.querySelector(".mergeFeildPopOver").component.childComp);o[0]&&o[0].querySelector(".cxMergeFieldPopFieldsLabel")&&(this.setDivLabelForScroll(),this.popoverOpend=!0)}}.observes("cxPropField").on("init"),observeZcqa:function(){this.updateDataZcqa()}.observes("cxPropZcqa","cxPropShowDropdown"),setField:function(e){for(var t=[],o=0;o<e.length;o++)if(null!=e[o][this.data.cxPropUserValue])t.push(e[o]);else{var a=Object.keys(e[o])[0];t.push(a),this.data.cxPropIsMergeFieldSort&&(e[o][a]=this.sortMergeField(e[o][a]));for(var r=0;r<e[o][a].length;r++){var i,s=this.$node.merge_field_text_content?this.$node.merge_field_text_content.toLowerCase():"",p=e[o][a][r][this.data.cxPropUserValue];if(s){var l=p.toLowerCase().indexOf(s),n=p.substring(l,l+s.length);i=p.replace(n,`<span class="cxMergeFieldTextBold">${n}</span>`)}var c=Lyte.deepCopyObject(e[o][a][r]);c.highlight_text=i,t.push(c)}}this.$node.merge_field_text_content="",this.setData("field",t)},sortMergeField:function(e){var t=this;return e.sort(((e,o)=>e[t.data.cxPropUserValue].localeCompare(o[t.data.cxPropUserValue])))},showMergeFieldPopup:function(e,t){this.setData({cxPropOffset:t,cxPropShow:!0,cxPropDropOptions:e.modules,cxPropSelected:e.modules[0][this.data.cxPropSystemValue],cxPropShowDropdown:!0,cxPropField:e.field_details}),this.$node.querySelector(".mergeFeildPopOver").component.setData("ltPropShow",!0)},handleKeyDown:function(e){if(this.$node&&"CRUX-MERGE-FIELD-BODY"==this.$node.tagName){var t=$L(".mergeFeildPopOver",this.$node);if(t[0]&&t[0].component.data.ltPropShow){if("box"!=this.data.cxPropType){var o=$L(".cxMergeFieldModuleDropdownVisible",this.$node.querySelector(".mergeFeildPopOver").component.childComp);if(o[0]&&o[0].classList.contains("cxMergeFieldModuleDropdownVisible"))return}var a=$L(".cxMegeFieldPopContent",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0].querySelectorAll(".cxMergeFieldPopFieldsLabel"),r=a[0].parentNode.parentNode,i=Array.from(a).findIndex((e=>e.classList.contains("cxMergeFieldLabelActive")));if("ArrowDown"===e.key){e.preventDefault();var s=i+1;if(0==s&&(r.scrollTop=0),a.length-1<s)return;0!=s&&a[s]&&(this.stop_event=!0,setTimeout((()=>{this.stop_event=!1}),10),this.scrollIntoView(a[s],"down",r,s)),a[i]&&a[i].classList.remove("cxMergeFieldLabelActive"),a[s].classList.add("cxMergeFieldLabelActive")}else if("ArrowUp"===e.key){e.preventDefault();var p=i-1;if(-1==p)return;-2==p&&(p=0,r.scrollTop=0),a[p]&&(this.stop_event=!0,setTimeout((()=>{this.stop_event=!1}),10),this.scrollIntoView(a[p],"up",r,p)),a[i]&&a[i].classList.remove("cxMergeFieldLabelActive"),a[p]&&a[p].classList.add("cxMergeFieldLabelActive")}if(13==e.keyCode){if(!a[i])return;e.preventDefault(),a[i].click()}}}},scrollIntoView:function(e,t,o,a){this.isInView(e,o)||this.moveIntoView(e,o,t,a)},moveIntoView:function(e,t,o,a){var r=t.scrollTop,i=e.offsetTop;"up"===o&&"box"!==this.data.cxPropType&&$L(".cxMegeFieldPopModuleDropdown",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0]&&(r-=5,i-=44),i<=r?this.moveDown(e,t,a):this.moveUp(e,t)},moveDown:function(e,t,o){var a=t;"box"!==this.data.cxPropType&&$L(".cxMegeFieldPopModuleDropdown",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0]?a.scrollTop=this.isFirstItem(e)?0:e.offsetTop-50:(a.scrollTop=this.isFirstItem(e)?0:e.offsetTop,0===o&&(a.scrollTop=0))},isFirstItem:function(e){var t=e.parentElement;return t&&t.firstElementChild===e},moveUp:function(e,t){var o=t;"box"!==this.data.cxPropType&&$L(".cxMegeFieldPopModuleDropdown",this.$node.querySelector(".mergeFeildPopOver").component.childComp)[0]?o.scrollTop=e.offsetTop-13-o.offsetHeight:o.scrollTop=e.offsetTop+e.offsetHeight-o.offsetHeight-10},isInView:function(e,t){var o=t,a=o.scrollTop,r=o.offsetHeight,i=e.offsetTop,s=e.offsetHeight;return"box"==this.data.cxPropType?i>=a&&i+s<=a+r:i-44>=a-5&&i-7<=a+r}}),Lyte.Component.registerHelper("cxIsObject",(function(e){return"object"==typeof e})),Lyte.Component.register("crux-schedular-notification-popup",{_template:'<template tag-name="crux-schedular-notification-popup" id="cruxSchedularPopup" class="cruxSchedularPopup_{{cxPropClass}}"> <lyte-modal lt-prop-allow-multiple="true" lt-prop-show="{{lbind(cxPropShow)}}" lt-prop-freeze="false" lt-prop-width="{{cxPropWidth}}" lt-prop-close-on-escape="false" lt-prop-show-close-button="false" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromBottom&quot;,&quot;duration&quot;:&quot;0.5&quot;}" lt-prop-offset="{&quot;right&quot;:&quot;0px&quot;,&quot;bottom&quot;:&quot;30px&quot;}" lt-prop-wrapper-class="cxSchedularModal cxSchedularModal_{{cxPropClass}}" on-show="{{method(&quot;onOpen&quot;)}}" on-close="{{method(&quot;closeNotification&quot;)}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header data-zcqa="{{cxPropClass}}_header"> <span> {{cxPropHeader}} </span> <div class="cxSchedularCloseWrap"> <template is="if" value="{{cxPropShowMinimizeIcon}}"><template case="true"><span data-zcqa="{{cxPropClass}}_minimize_icon" class="cxSchedularMinimize" onclick="{{action(\'closeModal\',\'minimize\')}}"></span></template></template> <template is="if" value="{{cxPropShowCloseIcon}}"><template case="true"><span data-zcqa="{{cxPropClass}}_close_icon" class="cxSchedularClose" onclick="{{action(\'closeModal\',\'close\')}}"></span></template></template> </div> </lyte-modal-header> <lyte-modal-content class="cxSchedularBody {{cxPropClass}}"> <template is="if" value="{{cxPropBodyYield}}"><template case="true"> <lyte-yield yield-name="schedularBodyYield"></lyte-yield> </template><template case="false"> <template is="for" items="{{cxPropMessage}}" item="item" index="ind"> <div class="cxSchedularNotification cxNotification_{{ind}} {{item.cxClass}}"> <template is="if" value="{{item.cxMessage}}"><template case="true"><div class="cxSchedularMsg"> <template is="if" value="{{expHandlers(item.cxIcon,\'||\',expHandlers(item.cxStatus,\'==\',\'success\'))}}"><template case="true"><span class="cxSchedularIcon {{item.cxIconClass}} {{if(ifEquals(item.cxStatus,\'success\'),\'cxSchedularSuccessIcon\',\'\')}}"></span></template></template> <div class="cxSchedularMsgDataWrap"> <template is="if" value="{{item.cxMessageYield}}"><template case="true"> {{unescape(item.cxMessage)}} </template><template case="false"> <span class="cxSchedularMsgText">{{item.cxMessage}}</span> </template></template> </div> <template is="if" value="{{item.cxCloseIconClass}}"><template case="true"><span onclick="{{action(\'removeMessage\',item,ind)}}" class="cxSchedularCardCloseIcon {{item.cxCloseIconClass}}"></span></template></template> </div></template></template> <template is="if" value="{{expHandlers(item.cxStatus,\'==\',\'progress\')}}"><template case="true"><div class="cxProgressBar"> <div class="cxProgressBarLoader"></div> </div></template></template> <template is="for" items="{{cxLink}}" item="link" index="index"> <span class="cxLink_{{index}}"> <link-to lt-prop-route="{{link.route}}" lt-prop-dp="{{link.dp}}" lt-prop-qp="{{link.qp}}" lt-prop-class=" {{link.class}}"> {{link.name}} </link-to> </span> </template> </div> </template> </template></template> </lyte-modal-content> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"if",position:[0,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[0,3,1]},{type:"if",position:[0,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[0,5]},{type:"if",position:[0,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,5]},{type:"for",position:[1,5],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1,1]}]}]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["cxPropLink","cxPropMessage","cxPropHeader","cxPropShow","cxPropTimeOut","cxPropBodyYield","cxPropWidth","cxPropClass","cxPropPreventCloseOnTimeout","cxPropShowMinimizeIcon","cxPropShowCloseIcon","modalTransition"],data:function(){return{cxPropLink:Lyte.attr("array",{default:[]}),cxPropMessage:Lyte.attr("array",{default:[]}),cxPropHeader:Lyte.attr("string",{default:""}),cxPropShow:Lyte.attr("boolean"),cxPropTimeOut:Lyte.attr("number",{default:5e3}),cxPropBodyYield:Lyte.attr("boolean",{default:!1}),cxPropWidth:Lyte.attr("string",{default:"400px"}),cxPropClass:Lyte.attr("string",{default:""}),cxPropPreventCloseOnTimeout:Lyte.attr("boolean",{default:!1}),cxPropShowMinimizeIcon:Lyte.attr("boolean",{default:!1}),cxPropShowCloseIcon:Lyte.attr("boolean",{default:!0}),modalTransition:Lyte.attr("object",{default:{animation:"slideFromBottom",duration:"0.6"}})}},actions:{removeMessage:function(e,t){Lyte.arrayUtils(this.getData("cxPropMessage"),"removeAt",t,1)},closeModal:function(e){this.closeFncalledFrom=e,this.setData("cxPropShow",!1)}},observeMessage:function(){let e=this.$node.querySelector("lyte-modal");e&&e.alignModal&&e.alignModal(),this.getData("cxPropMessage").length||(this.closeFncalledFrom="close",this.setData("cxPropShow",!1))}.observes("cxPropMessage.[]"),methods:{onOpen:function(){this.getMethods("onShow")&&this.executeMethod("onShow",this),this.data.cxPropPreventCloseOnTimeout||(clearTimeout(this.timeInverval),this.timeInverval=setTimeout(function(){this.closeFncalledFrom="timeout",this.setData("cxPropShow",!1)}.bind(this),this.data.cxPropTimeOut))},closeNotification:function(){this.getMethods("onClose")&&this.executeMethod("onClose",this,this.closeFncalledFrom),clearTimeout(this.timeInverval)}}}),Lyte.Component.register("crux-permission-denied-alert",{_template:'<template tag-name="crux-permission-denied-alert" class="crux-permission-denied-alert"> <lyte-alert data-zcqa="crm_error_page" lt-prop-focus-on-close="{{cxPropFocusOnClose}}" lt-prop-buttons="{{cxPropButtons}}" lt-prop-button-position="{{cxPropButtonPosition}}" lt-prop-show="{{lbind(cxPropShow)}}" lt-prop-top="{{cxPropTop}}" lt-prop-wrapper-class="cxPermissionDeniedAlert" lt-prop-yield="true" lt-prop-show-close-button="false" lt-prop-close-on-escape="{{cxPropCloseOnEscape}}" on-accept="{{method(&quot;onAcceptAlert&quot;)}}" on-reject="{{method(&quot;onRejectAlert&quot;)}}" on-show="{{method(&quot;onShowAlert&quot;)}}" on-close="{{method(&quot;onCloseAlert&quot;)}}"> <template is="registerYield" yield-name="alert"> <template is="if" value="{{cxPropIcon}}"><template case="true"> <lyte-alert-header class="cxPermDenyWithIcon"> <span class="cxPermissionDeniedIcon dIB cxVam"></span> <span class="cxPermissionDeniedText" data-zcqa="cxPermDeniedPopupTitle">{{unescape(cxPropTitle)}}</span> </lyte-alert-header> <lyte-alert-content class="cxPermDenyWithIcon" data-zcqa="cxPermDeniedPopupReason">{{unescape(cxPropReason)}}</lyte-alert-content> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-alert-footer> <lyte-yield yield-name="footerYield"></lyte-yield> </lyte-alert-footer> </template></template> </template><template case="false"> <lyte-alert-header> {{unescape(cxPropTitle)}} </lyte-alert-header> <lyte-alert-content> {{unescape(cxPropReason)}}</lyte-alert-content> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-alert-footer> <lyte-yield yield-name="footerYield"></lyte-yield> </lyte-alert-footer> </template></template> </template></template> </template> </lyte-alert> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,0]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropReason","cxPropTitle","cxPropShow","cxPropIcon","cxPropButtons","cxPropButtonPosition","cxPropTop","cxPropFooterYield","cxPropCloseOnEscape","cxPropFocusOnClose"],data:function(){return{cxPropReason:Lyte.attr("string"),cxPropTitle:Lyte.attr("string"),cxPropShow:Lyte.attr("boolean"),cxPropIcon:Lyte.attr("boolean",{default:!0}),cxPropButtons:Lyte.attr("array",{default:[{type:"accept",text:_cruxUtils.getI18n("crm.button.ok"),appearance:"default"}]}),cxPropButtonPosition:Lyte.attr("string",{default:"right"}),cxPropTop:Lyte.attr("string",{default:"0px"}),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),cxPropFocusOnClose:Lyte.attr("boolean",{default:!1})}},methods:{onAcceptAlert:function(){this.setData("cxPropShow",!1),this.getMethods("onAccept")&&this.executeMethod("onAccept")},onShowAlert:function(){var e=this.getData("cxPropReason"),t=this.getData("cxPropTitle");e?(e=e.trim().replace(/\s+/g," "),this.setData("cxPropReason",e)):this.setData("cxPropReason",_cruxUtils.getI18n("crm.security.error")),t?(t=t.trim().replace(/\s+/g," "),this.setData("cxPropTitle",t)):this.setData("cxPropTitle",_cruxUtils.getI18n("crm.label.creator.noPermission"));var o=$L(".cxPermissionDeniedAlert lyte-button")[0];o&&o.setAttribute("data-zcqa","crm_permission_error"),this.getMethods("onShow")&&this.executeMethod("onShow")},onCloseAlert:function(){this.getMethods("onClose")&&this.executeMethod("onClose")},onRejectAlert:function(){this.getMethods("onReject")&&this.executeMethod("onReject")}}});
