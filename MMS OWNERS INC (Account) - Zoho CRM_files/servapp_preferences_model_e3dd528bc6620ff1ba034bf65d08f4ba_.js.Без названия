store.registerModel("servapp_preferences",{services:Lyte.attr("object"),appointments:Lyte.attr("object"),calls:Lyte.attr("object")}),store.registerAdapter("servapp_preferences",{namespace:"crm/v8/settings",buildURL:function(e,r,p,s,n,c,t){if(("findAll"===r||"update"===r)&&t&&t.module&&("Services"===t.module||"Appointments"===t.module||"Calls"===t.module)){var l=("Services"===t.module?"service":"appointment")+"_preferences";l="Calls"===t.module?"call_preferences":l,n=n.replace(e,l)}return n},reloadAll:function(e,r,p){if(p&&p.module&&("Services"===p.module||"Appointments"===p.module||"Calls"===p.module)&&!p.reloadAll){var s=store.peekAll("servapp_preferences");if(s.length>0&&s[0][p.module.toLowerCase()])return!1}return!0},methodForRequest:function(e){return"PATCH"===e?"PUT":e}}),store.registerSerializer("servapp_preferences",{normalizeResponse:function(e,r,p){if("findAll"===r&&p&&(p.service_preferences||p.appointment_preferences||p.call_preferences)){p.servapp_preferences=[{}];var s=store.peekRecord("servapp_preferences","1");s&&(p.servapp_preferences[0]=s.$.toJSON()),p.service_preferences?(p.servapp_preferences[0].services=p.service_preferences,delete p.service_preferences):p.appointment_preferences?(p.servapp_preferences[0].appointments=p.appointment_preferences,delete p.appointment_preferences):p.call_preferences&&(p.servapp_preferences[0].calls=p.call_preferences,delete p.call_preferences),p.servapp_preferences[0].id=1}return p},serialize:function(e,r,p,s){return"update"===e&&s&&s.module&&("Services"===s.module?(r.service_preferences=[],r.service_preferences=r.servapp_preferences[0].services):"Appointments"===s.module?(r.appointment_preferences=[],r.appointment_preferences=r.servapp_preferences[0].appointments):"Calls"===s.module&&(r.call_preferences=[],r.call_preferences=r.servapp_preferences[0].calls),delete r.servapp_preferences),r},payloadKey:function(){return"servapp_preferences"}});
