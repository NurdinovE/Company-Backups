Lyte.Component.register("crm-activity-depreciation-banner",{_template:'<template tag-name="crm-activity-depreciation-banner"> <template is="if" value="{{showActBanner}}"><template case="true"> <lyte-modal id="attenModal" lt-prop-show-close-button="false" lt-prop-width="710px" lt-prop-max-height="85%" lt-prop-show="true" lt-prop-wrapper-class="attModWrapper" lt-prop-transition="{&quot;animation&quot;:&quot;fadeIn&quot;}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="aligncenter"> <span class="zcicncss-warning-triangle-lg zcicn-cssIcons zcicn_red_mask mR5 gs_iconsprite gs-triangle-lg"></span> {{getI18n(\'crm.users.attention\',\'Zoho CRM\')}} </lyte-modal-header> <lyte-modal-content> <div class="lh20">{{getI18n(\'activity.banner.title.info1\',dueDate,getModName(\'Activities\'),\'Zoho CRM\')}}</div> <div class="mT20 lh20">{{getI18n(\'activity.banner.title.info2\',\'Zoho CRM\',\'Zoho CRM\')}}</div> <div class="mT20 lh20">{{getI18n(\'activity.banner.title.info3\',dueDate,\'Zoho CRM\')}}</div> <div class="mT10"> <template is="for" items="{{modules}}" item="module" index="index"> <template is="if" value="{{expHandlers(module,\'!==\',&quot;Motivator&quot;)}}"><template case="true"> <div class="mT10">{{expHandlers(index,\'+\',1)}}). <link-to class="mR5 crmLinkColor cP" onclick="{{action(\'LoadRecords\',this,module)}}" data-zcqa="actbanner_{{module}}" lt-prop-route="crm.tab.module.activities-banner" lt-prop-dp="[&quot;{{getModIdForActBanner(&quot;module_name&quot;,module)}}&quot;]" lt-prop-target="_blank" lt-prop-rel="noopener noreferrer" lt-prop-custom=""> {{if(ifEquals(module,\'Home\'),getI18n(\'activity.banner.module.homepagecomponents\'),getModName(module))}}</link-to><span class="mR5"></span>{{getI18n(\'activity.banner.module.info\',getModName(\'Activities\'))}}</div> </template><template case="false"> <div class="mT10">{{expHandlers(index,\'+\',1)}}). <link-to class="mR5 crmLinkColor cP" data-zcqa="actbanner_{{module}}" lt-prop-route="crm.gamification.rules.list" lt-prop-qp="{&quot;source&quot;:&quot;Activities_depreciation&quot;}" lt-prop-target="_blank" lt-prop-rel="noopener noreferrer"> {{getI18n(\'activity.banner.motivator\')}}</link-to><span class="mR5"></span>{{getI18n(\'activity.banner.motivator.append\')}}</div> </template></template></template> </div> <div class="mT20 lh20"> <div class="mT20 lh20"> {{getI18n(\'activity.banner.usr.info.msg1\',dueDate)}} </div> <div class="mT20 lh20"> {{getI18n(\'activity.banner.usr.info.msg2\')}} <span class="mL5 crmLinkColor cP" onclick="{{action(\'learnMore\')}}" data-zcqa="actbanner_clickhere">{{getI18n(\'activity.banner.knowmore\')}}</span> </div> </div> </lyte-modal-content> <lyte-modal-footer class="center"> <lyte-button lt-prop-appearance="primary" data-zcqa="actbanner_okay" onclick="{{action(\'doAcknowledge\',\'acknowledged\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'activity.banner.ack.Okay\')}} </template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> </template></template> <lyte-hovercard id="ActvitySplitdeprePop" lt-prop-origin-elem="#{{popId}}" data-zcqa="actbanner_alert" lt-prop-show="false" lt-prop-placement="bottom" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-content-padding="14px 15px" lt-prop-scrollable="true"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="p15"> <template is="if" value="{{isFromDashComp}}"><template case="true"> <span class="dIB lh20"> {{getI18n(\'activity.banner.dashboard.message\',dueDate)}} <span class="crmLinkColor cP mL5" data-zcqa="actbanner_alert_clickhere" onclick="{{action(\'learnMore\')}}">{{getI18n(\'activity.banner.knowmore\')}}</span></span> </template><template case="false"> <span class="dIB lh20"> {{getI18n(\'activity.alert.report.ms1\',\'activity.banner.component\',getModName(\'Activities\'))}} {{getI18n(\'activity.banner.record.component.warn\',getModName(\'Activities\'),dueDate)}} {{getI18n(\'activity.alert.report.msg3\',\'activity.banner.component\',dueDate)}} <span class="crmLinkColor cP mL5" data-zcqa="actbanner_alert_clickhere" onclick="{{action(\'learnMore\')}}">{{getI18n(\'activity.banner.knowmore\')}}</span></span> </template></template> </lyte-hovercard-content> </template> </lyte-hovercard> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,0]},{type:"text",position:[3,3,0]},{type:"text",position:[3,5,0]},{type:"attr",position:[3,7,1]},{type:"for",position:[3,7,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[1,2]},{type:"text",position:[1,2,1]},{type:"componentDynamic",position:[1,2]},{type:"text",position:[1,4]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[1,2]},{type:"text",position:[1,2,1]},{type:"componentDynamic",position:[1,2]},{type:"text",position:[1,4]}]}},default:{}}]},{type:"text",position:[3,9,1,1]},{type:"text",position:[3,9,3,1]},{type:"attr",position:[3,9,3,3]},{type:"text",position:[3,9,3,3,0]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[5,1]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]},{type:"text",position:[1,5]},{type:"attr",position:[1,7]},{type:"text",position:[1,7,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["showActBanner","dueDate","popshow","popId","modules","helpLink","isFromAct","isFromDashComp","isGameRoute"],data:function(){return{showActBanner:Lyte.attr("boolean",{default:!1}),dueDate:Lyte.attr("string",{default:Crm.userDetails.activityDueDate}),popshow:Lyte.attr("boolean",{default:!1}),popId:Lyte.attr("string"),modules:Lyte.attr("array",{default:[]}),helpLink:Lyte.attr("string",{default:("zh_CN"===Crm.userDetails.RELEVANT_LOCALE||"zh_TW"===Crm.userDetails.RELEVANT_LOCALE?RebrandLinkUtil.getProperty("KB_CRM_CN_URL"):RebrandLinkUtil.getProperty("KB_CRM_URL"))+"sales-force-automation/activities/articles/deprecating-activities-module"}),isFromAct:Lyte.attr("string",{default:"false"}),isFromDashComp:Lyte.attr("boolean",{default:!1}),isGameRoute:Lyte.attr("boolean",{default:!!Lyte.Router.getRouteInstance().transition.target.includes("crm.gamification")})}},init:function(){(Lyte.Router.getRouteInstance().transition.target.includes("activities-banner")||this.getData("isGameRoute")||"crm.wildcard"===Lyte.Router.getRouteInstance().transition.target)&&this.setData("showActBanner",!1);var e=[],t=this;["Reports","Dashboards","Home","Motivator"].forEach((function(a){if("Motivator"===a&&!n&&t.getData("isGameRoute"))var n="true";("Motivator"!==a&&moduleRecordMapping[a]&&moduleRecordMapping[a].viewable||"true"!==n&&"Motivator"===a&&"true"===Crm.userDetails.isMotivatorEnabled)&&e.push(a)})),this.setData("modules",e)},actions:{LoadRecords:function(e,t){event.preventDefault();var a=e.getAttribute("lt-prop-route"),n=JSON.parse(e.getAttribute("lt-prop-dp"));let r=Lyte.Router.getURL.apply(null,[a].concat(t).concat(n));openNewTab(r,"activities-banner","post")},doAcknowledge:function(e){"false"===this.getData("isFromAct")&&store.findAll("dummy",{actionName:"acknowledgeUser",userAction:e},!1,!1,{url:Crm.getCrmBasePath()+"/ActivityReminder.do",method:"POST"}),this.setData("showActBanner",!1)},learnMore:function(){let e;e="ja_JP"===Crm.userDetails.RELEVANT_LOCALE?RebrandLinkUtil.getProperty("KB_CRM_JP_URL")+"sales-force-automation/activities/articles/活動-タブの廃止に関するよくある質問":("zh_CN"===Crm.userDetails.RELEVANT_LOCALE||"zh_TW"===Crm.userDetails.RELEVANT_LOCALE?RebrandLinkUtil.getProperty("KB_CRM_CN_URL"):RebrandLinkUtil.getProperty("KB_CRM_URL"))+"sales-force-automation/activities/articles/deprecating-activities-module",openHelp(e)}}},{mixins:["crm-open-help"]}),Lyte.Component.registerHelper("getI18n",(function(){var e=arguments.length;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],a=[],n=1;n<e;n++)a.push(arguments[n]);return I18n.getMsg(t,I18n.getMsg(a))})),Lyte.Component.registerHelper("getModIdForActBanner",(function(e,t){return"Motivator"===t?t:"module_name"===e?moduleRecordMapping[t].module_name:moduleRecordMapping[t].id})),Lyte.Component.registerHelper("getFieldsForRelation",(function(e){var t=null;switch(e){case"Tasks":case"Tasks_History":t=["$process_flow","$approved","$approval_state","$in_project_sync","$se_module","$colour_code","Locked__s"];break;case"Events":case"Events_History":case"Calls":case"Calls_History":case"Appointments_History__s":t=["$approved","$approval_state","$se_module","$colour_code"];break;case"Open_Appointments__s":t=["$approved","$approval_state","$se_module","$colour_code","Appointment_End_Time"]}return t})),Lyte.Component.registerHelper("isRelationVisible",(function(e,t){var a=store.peekAll("related_list");if(Crm.userDetails.isRelatedListLyteEnabled){var n={relationVisible:!1,createPermission:!1};if("Open_Appointments__s"===e||"Appointments_History__s"===e){var r;(r=store.peekAll("module").filter((e=>e.module_name===t&&e.related_lists))).length&&(a=r[0].related_lists)}for(var o in a)if(a[o].api_name===e)return n.relationVisible=a[o].visible,n.createPermission=a[o].record_operations.create,n;return n}for(var o in a)if(a[o].api_name===e)return!0;return!1})),Lyte.Component.registerHelper("formattedText",(function(e,t){return e.length<t?e:e.substring(0,t)+"..."})),Lyte.Component.registerHelper("getFormattedValue",(function(e,t,a,n,r,o,s,i){if("Appointments"===a&&"Duration"===t&&(n.Duration=Lyte.Transform["time-in-hrs"].deserialize(n.Duration)),i)var l=Lyte.registeredMixins["crm-canvas-core-construct-component"].constructCruxComponentForCanvas(e.id,a,n,!0,null,!0,!0,e);else l=Lyte.registeredMixins["crm-canvas-core-construct-component"].constructCruxComponentForCanvas(e[t].id,a,n,!0,null,!0,!0,e[t]);return Crm.userDetails.isRelatedListLyteEnabled&&(l=l||""),l})),Lyte.Component.registerHelper("validateField",(function(e){return!(!e||0===e.length||!1===e)})),Lyte.Component.registerHelper("getPluralLabel",(function(e){if("undefined"!=typeof moduleRecordMapping&&moduleRecordMapping[e])return moduleRecordMapping[e].plural_label;if(parent&&parent.Crm&&parent.Crm.userDetails.MODULE_LIST&&parent.Crm.userDetails.MODULE_LIST[e]){var t=parent.Crm.userDetails.MODULE_LIST[e],a=t.pluralLabel?t.pluralLabel:t.plural_label;if(a)return(0,Lyte.Component.registeredHelpers.getI18)(a)}return e})),Lyte.Component.registerHelper("getIconForAspComp",(function(e){return"Events"===e?"events":e.toLocaleLowerCase()})),Lyte.Component.registerHelper("getActivityActionLink",(function(e,t,a){var n=(t=t||this).getData("list_relation_id");if("Activities"===n){var r=t.getData("personality");n=store.peekAll("related_list").filterBy({personality_name:r})[0].id}switch(e){case"closeTask":return Crm.getCrmBasePath()+"/closeTask.do?action=CloseTask&taskid="+a+"&&module="+t.getData("rel_module")+"&id="+t.getData("entity_id")+"&nextStep=relatedlist&isajax=true#"+t.getData("personality")+"_"+n;case"deleteLink":return Crm.getCrmBasePath()+"/MassDelete.do?module="+t.getData("module")+"&id="+t.getData("activity_id")+"&actModule="+t.getData("rel_module")+"&actId="+t.getData("entity_id")+"&nextStep=relatedlist&isajax=true#"+t.getData("personality")+"_"+n;default:return""}})),Lyte.Component.registerHelper("getSubActivtyCount",(function(e,t){var a;a=e&&e.count?e.more_records?e.page*e.per_page+"+":(e.page-1)*e.per_page+e.count+"":"0";var n=this.getData("tabHeadCount");if((!this.getData("canvas")||this.getData("fromNewDetail"))&&t&&void 0!==n){var r=this.getData("module"),o=a;o.indexOf("+")>-1&&(o=o.substring(0,o.indexOf("+"))),o=Number(o),"Events"===r?r="Meetings":"Appointments"===r&&(r="Appointments__s"),n[r]=o,this.setData("tabHeadCount",n)}return a})),Lyte.Component.registerHelper("convertEventDateTime",(function(e,t,a,n,r){var o=Lyte.Component.registeredHelpers.convertTimeToUserDateFormatFromISO(e,n,r,!0);e=Utils.convertDateToUserPattern(o,r?r.toUpperCase():Crm.userDetails.DATE_PATTERN.toUpperCase());var s=Lyte.Component.registeredHelpers.convertTimeToUserDateFormatFromISO(t,n,r,!0);return t=Utils.convertDateToUserPattern(s,r?r.toUpperCase():Crm.userDetails.DATE_PATTERN.toUpperCase()),a?e===t?e+", "+I18n.getMsg("All Day"):e+" - "+t+", "+I18n.getMsg("All Day"):e===t?e+" "+Utils.getTimeInUserFormat(o,!0,!0)+" - "+Utils.getTimeInUserFormat(s,!0,!0):e+" "+Utils.getTimeInUserFormat(o,!0,!0)+" - "+t+" "+Utils.getTimeInUserFormat(s,!0,!0)})),Lyte.Component.registerHelper("convertTimeToUserDateFormatFromISO",(function(e,t,a,n){if(!e)return"";if(a=a?a.toUpperCase():a,t){var r=CrmDateUtils.getDateObjectFromString(e,"YYYY-MM-DD"),o=Crm.userDetails.DATE_PATTERN;return o||parent.Crm.userDetails.DATE_PATTERN&&(o=parent.Crm.userDetails.DATE_PATTERN),o&&(o=o.toUpperCase()),CrmDateUtils.convertDateToUserPattern(r,o)}var s=Utils.ISO8601toDateObject(e);if(n)return s;var i=Utils.convertDateToUserPattern(s,a);return i+=" "+Utils.getTimeInUserFormat(s,!0,!0)})),Lyte.Component.registerHelper("getSubject",(function(e,t){switch(e){case"Tasks":case"Calls":return t.Subject;case"Events":return t.Event_Title;case"Appointments":return t.Appointment_Name;default:return""}})),Lyte.Component.registerHelper("getPersonalityByRelation",(function(e){switch(e){case"Tasks":case"Calls":case"Events":return e.toUpperCase()+"PERSONALITY";case"Tasks_History":case"Events_History":case"Calls_History":return e.replace("_","").toUpperCase()+"PERSONALITY";case"Open_Appointments__s":return"APPOINTMENTSPERSONALITY";case"Appointments_History__s":return"APPOINTMENTSHISTORYPERSONALITY"}})),Lyte.Component.registerHelper("getModuleByRelation",(function(e){switch(e){case"Tasks":case"Tasks_History":return"Tasks";case"Calls":case"Calls_History":return"Calls";case"Events":case"Events_History":return"Events";case"Open_Appointments__s":case"Appointments_History__s":return"Appointments"}})),Lyte.Component.registerHelper("getSortColumn",(function(e){switch(e){case"Tasks":return"Due_Date";case"Tasks_History":return"Closed_Time";case"Calls":case"Calls_History":return"Call_Start_Time";case"Events":case"Events_History":return"Start_DateTime";case"Open_Appointments__s":case"Appointments_History__s":return"Appointment_Start_Time"}})),Lyte.Component.registerHelper("getPRClass",(function(e,t,a,n){return e?n&&a===n.length-1?"":"pR30":"pL10 pR10"})),Lyte.Component.registerHelper("getI18",(function(e){return"undefined"!=typeof I18n?I18n.getMsg(e):"undefined"!=typeof parent&&"undefined"!==parent.I18n?parent.I18n.getMsg(e):e})),Lyte.Component.registerHelper("getModuleNameForIconForAct",(function(e){return(e="Deals"===e?"Potentials":e)&&e.indexOf("_")>0&&(e=(e=e.split("_"))[0]+e[1]),e&&["Leads","Products","Accounts","Potentials","Contacts","Vendors","PriceBooks","Cases","Solutions","SalesOrders","Invoices","Quotes","PurchaseOrders","WeekEvent","Bundles"].contains(e)?e.slice(0,e.lastIndexOf("s")):"svgIcons CustomModule"})),Lyte.Component.registerHelper("constructFieldsForRel",(function(e,t){var a=[],n=[],r=e.getData("excludeFields"),o=e.getData("internalFields");t.forEach((function(e){if(a.push(e.api_name),o.size>0&&o.contains(e.api_name)&&o.splice(o.indexOf(e.api_name),1),!r.contains(e.api_name)){var t=CrmField.getDataType(parseInt(e.ui_type));e.data_type=t,n[e.api_name]=e}}));var s=e.getData("fieldsforrel")?e.getData("fieldsforrel"):{};s[Lyte.Component.registeredHelpers.getPersonalityByRelation(e.getData("relation_name"))]=n,e.setData("fields",e.getData("internalFields").concat(a)),e.setData("fieldsforrel",s)})),Lyte.Component.registerHelper("constructCustomizePopup",(function(e,t,a){var n=$L("crm-activity-rel-customize"),r=0===n.length?n:"openActivities"===n[0].component.data.btn_name?n[0]:n[1],o=0===n.length?n:"closedActivities"===n[0].component.data.btn_name?n[0]:n[1],s=["Tasks","Events","Calls","Appointments"],i=["Tasks_History","Events_History","Calls_History","Appointments_History"];e.parentid&&0!==n.length&&(e.btn_name="openActivities",r&&0!==r.getData().data&&r.getData().data&&r.getData().data.forEach((function(e){s.contains(e.module)&&!a[e.module]&&(a[e.module]=e)})),a.Tasks&&e.data.push(a.Tasks),a.Events&&e.data.push(a.Events),a.Calls&&e.data.push(a.Calls),a.Appointments&&e.data.push(a.Appointments),r.setData("data",e.data)),t.parentid&&n.length&&(t.btn_name="closedActivities",o&&0!==o.getData().data&&o.getData().data&&o.getData().data.forEach((function(e){i.contains(e.module+"_History")&&!a[e.module+"_History"]&&(a[e.module+"_History"]=e)})),a.Tasks_History&&t.data.push(a.Tasks_History),a.Events_History&&t.data.push(a.Events_History),a.Calls_History&&t.data.push(a.Calls_History),a.Appointments_History&&t.data.push(a.Appointments_History),o.setData("data",t.data))})),Lyte.Component.registerHelper("isActivitySplitComponent",(function(e){return!Lyte.registeredMixins["crm-related-list-utils"].isNotActivitySubPersonality(e,"Services"===Lyte.Router.getRouteInstance().parent.parent.getDynamicParam()||void 0)})),Lyte.Component.registerHelper("arrayJoin",(function(e,t){return e?e.join(t):void 0})),Lyte.Component.registerHelper("getModuleNameByApiNameAsp",(function(e){return Object.keys(moduleApiMapping).filter((t=>moduleApiMapping[t]===e))})),Lyte.Component.registerHelper("getPersonalityForChronological",(function(e,t){var a="Activities"===e?t:t+"_History";switch(a){case"Tasks":case"Calls":case"Events":return a.toUpperCase()+"PERSONALITY";case"Tasks_History":case"Events_History":case"Calls_History":return a.replace("_","").toUpperCase()+"PERSONALITY";case"Appointments":return"APPOINTMENTSPERSONALITY";case"Appointments_History":return"APPOINTMENTSHISTORYPERSONALITY"}})),Lyte.Component.registerHelper("isChronologicalEnabled",(function(){return Crm.userDetails.isChronologicalviewEnabled})),Lyte.Component.registerHelper("getIdPropForTabView",(function(e,t){var a=e;return"Events"===e&&(a="Meetings"),t?t+"_"+a:a})),Lyte.Component.registerHelper("getClassForFields",(function(e,t){var a="";return"Description"===e&&"asp"===t?a="dF flexDC":"Description"!==e&&"mL"===t&&(a="mL5"),a})),Lyte.Component.registerHelper("getChronologicalActivityActionLink",(function(e,t,a,n,r){t=t||this;var o=store.peekAll("related_list").filterBy({personality_name:r})[0].id;switch(e){case"closeTask":return Crm.getCrmBasePath()+"/closeTask.do?action=CloseTask&taskid="+a+"&module="+t.getData("rel_module")+"&id="+t.getData("entity_id")+"&nextStep=relatedlist&isajax=true#"+r+"_"+o;case"deleteLink":return Crm.getCrmBasePath()+"/MassDelete.do?module="+n.$module+"&id="+a+"&actModule="+t.getData("rel_module")+"&actId="+t.getData("entity_id")+"&nextStep=relatedlist&isajax=true#"+r+"_"+o;default:return""}})),Lyte.Component.registerHelper("getTabViewRelCount",(function(e,t){return"Appointments"===e&&(e="Appointments__s"),t[e]})),Lyte.Component.registerHelper("isNewCountFlow",(function(e,t){return e&&t})),Lyte.Component.registerHelper("getActIconName",(function(e){var t;switch(e){case"Meetings":t="events";break;case"Tasks":t="tasks";break;case"Calls":t="calls";break;case"Appointments":t="appointments"}return t})),Lyte.Component.registerHelper("getValueRemoveSubject",(function(e,t){if(e){let a=I18n.getMsg("crm.activities.call.defaultsubject.outgoingcall",""),n=e.replaceAll(a,"");return n.length===e.length&&(a=I18n.getMsg("crm.activities.call.defaultsubject.incomingattended",""),n=e.replaceAll(a,"")),t?a:n}return""})),Lyte.Component.registerHelper("getApparovedState",(function(e,t){return this.getData("canvas")&&!t.includes("APPOINTMENTS")?"approved"===e.$approval_state||"approval_process_rejected"===e.$approval_state:!!t.includes("APPOINTMENTS")||(!(!e.$approved&&"approved"!==e.$approval_state)||"approval_process_rejected"===e.$approval_state)})),Lyte.Component.registerHelper("getModName",(function(e){return moduleRecordMapping[e].plural_label})),Lyte.Component.registerHelper("getParsedDate",(function(e,t){const a={Jan:"january",Feb:"february",Mar:"march",Apr:"april",May:"may",Jun:"june",Jul:"july",Aug:"august",Sep:"september",Oct:"october",Nov:"november",Dec:"december"},n={month:"short",day:"numeric"},r=this.component.getDateBasedOnOffset(Date.now(),Crm.userDetails.tzOffset);let o=r.toLocaleDateString("en-US",n),s=$L.moment(r).toDate();s.setDate(r.getDate()+1),s=s.toLocaleDateString("en-US",n);let i=e;if("Overdue"!==e){i=i.split(" "),i=I18n.getMsg("crm.best.time.month.short."+a[i[0]])+" "+i[1]}return e===o?I18n.getMsg("Today")+", "+i:e===s?I18n.getMsg("Tomorrow")+", "+i:"Overdue"!==e?t?i:I18n.getMsg(Lyte.Component.registeredHelpers.getDayOfWeek.bind(this)(e))+", "+i:I18n.getMsg(i)})),Lyte.Component.registerHelper("getDayOfWeek",(function(e){const[t,a]=e.split(" "),n={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[t],r=this.component.getDateBasedOnOffset(Date.now(),Crm.userDetails.tzOffset),o=r.getFullYear(),s=r.getMonth();let i=o;11===n&&0===s&&(i=o-1);const l=$L.moment().toDate();l.setFullYear(i,n,a);return l.toLocaleDateString("en-US",{weekday:"long"})})),Lyte.Component.registerHelper("getDuration",(function(e){let t=e.Start_DateTime,a=e.End_DateTime;var n=($L.moment(a).toDate()-$L.moment(t).toDate())/1e3,r=Math.floor(n/3600),o=Math.floor(n%3600/60);let s="";return s=0===o&&1===r?I18n.getMsg("gs.duration")+" "+r+I18n.getMsg("gs.noty.hour"):0===o&&r>1?I18n.getMsg("gs.duration")+" "+r+I18n.getMsg("gs.noty.hours"):I18n.getMsg("gs.duration")+" "+r+":"+o+I18n.getMsg("gs.noty.hours"),s})),Lyte.Component.registerHelper("getParsedTime",(function(e,t){var a=Lyte.Component.registeredHelpers.getParsedDate.bind(this),n=Lyte.Component.registeredHelpers.convertTo24Hour.bind(this);return"Overdue"===e.header?"Tasks"===t?a(e.day,!0):e.day===e.pattern?a(e.day,!0)+I18n.getMsg(", ")+I18n.getMsg("All Day"):a(e.day,!0)+", "+n(e.pattern,Crm.userDetails.TIME_FORMAT):e.pattern.includes("AM")||e.pattern.includes("PM")?n(e.pattern,Crm.userDetails.TIME_FORMAT):a(e.pattern,!0)})),Lyte.Component.registerHelper("convertTo24Hour",(function(e,t){if("HH:mm"===t){let[t,a]=e.split(" "),[n,r]=t.split(":");n=parseInt(n,10),"PM"===a&&12!==n&&(n+=12),"AM"===a&&12===n&&(n=0),n=n.toString().padStart(2,"0"),r=r.padStart(2,"0"),e=`${n}:${r}`}else e.includes("AM")?e=e.replace("AM",I18n.getMsg("AM")):e.includes("PM")&&(e=e.replace("PM",I18n.getMsg("PM")));return e})),Lyte.Component.registerHelper("objContains",(function(e,t){return t.every((t=>e.hasOwnProperty(t)))})),Lyte.Component.registerHelper("getFormatedValue",(function(e,t,a,n){"Appointments"===a&&"Duration"===t&&(n.Duration=Lyte.Transform["time-in-hrs"].deserialize(n.Duration));let r=n.date;delete n.date;var o=Lyte.Component.registeredHelpers.getFormattedValue(e,t,a,n,!0,null,!0,e);return n.date=r,o||""})),Lyte.Component.registerHelper("getModuleForIcon",(function(e){var t=e.$se_module?e.$se_module:e.Appointment_For.module.api_name;if(!moduleRecordMapping[t]){let e="custommodule";if(this.component.data.customModuleMap[t])t=this.component.data.customModuleMap[t];else{let e=t;n=moduleApiMapping,r=t,t=Object.keys(n).find((e=>n[e]===r));var a=this.component.data.customModuleMap;a[e]=t,this.setData("customModuleMap",a)}t=t.toLowerCase().includes(e)?e:t}var n,r;return(t=(t="Deals"===t?"Potentials":t).replaceAll("_","")).toLowerCase()})),Lyte.Component.registerHelper("getElementBasedOnValue",(function(e,t,a,n,r,o,s,i){var l=Lyte.Component.registeredHelpers.encodeForHTMLAttribute(Lyte.Component.registeredHelpers.getSubject(a,n)+"_"+e.field_label+"_value"),p=Lyte.Component.registeredHelpers.getFormatedValue(e,t,a,n,r,o,s,i);if(p){const e=/data-zcqa='(.*?)'/;return p.replace(e,`data-zcqa='${l}'`)}return p})),Lyte.Component.registerHelper("isMoreContentAvailable",(function(e,t){let a=!1;if(e.$has_more){a=e.$has_more[t]}return a}));
