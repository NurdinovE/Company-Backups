Lyte.Mixin.register("crm-keyboard-shortcutsmixin",{keysMapping:{Cmd:"meta",Esc:"escape",Ctrl:"control"," ":"space",Option:"alt","+":"plus"},routeChange:!1,moduleData:{},triggeredFromShortcutMixin:!1,freezeBgCheck:function(e){var t=document.activeElement;return!(!this.freezeLayerCheck()||void 0!==Lyte.Service.getInjected("globalVoiceAssistance")&&Lyte.Service.getInjected("globalVoiceAssistance").fromVoiceComponent)||(!!this.isShortcutNotAllowedRoutes()||void(t!==$L("BODY")[0]?t.blur():e||$L("body").click()))},scrollToRL:function(e,t){this.openDVOverViewPage("dv_overview"),this.scrollToRelatedList(e,t)},openNotesEditor:function(){let e=$L("crux-note");return!(!e||!e[0])&&(e.find(".notesTextInputBoxWrap"),e[0].openNoteEditor(),!0)},addOpenActivities:function(e,t){if(!this.freezeBgCheck()){var i=$L("crm-activity-rel-actions")[0],n=$L("crm-activity-right-panel")[0],o=$L("crm-related-list-view")[0];if(n){if(f=n.component){var s=f.data.moduleList;if(s&&void 0!==s){if("addMeeting"===e)var r=Object.values(s).contains("Meeting");else if("addTask"===e)var a=Object.values(s).contains("Task");else if("addAppointment"===e)var c=Object.values(s).contains("Appointment");if(r){var l=n.component.data.rp_records;Events.globalCreate(t,"krp",this,void 0,void 0,void 0,void 0,void 0,void 0,l?l[0]:void 0)}else if(a){var d=f.data.entity_id,u=f.data.rel_module;Q.selectAction("NewTask",f,u,d,"krp")}else c&&(Events.appointmentParams={},Events.appointmentParams.relEntityId=f.data.entity_id,Events.appointmentParams.relModuleName=f.data.rel_module,Events.appointmentParams.relEntityName=f.data.entity_name,Events.globalCreate("Appointments","krp","Appointments"))}}}else if(i||o){if(i){if(f=i.component)if(h=f.data)var m=h.parentid}else if(o){var f,h;if(f=o.component)if(h=f.data){m=h.actLeftPaneId;var g=h.relatedList}if(g)var p=g.filter((e=>"ACTIVITYPERSONALITY"===e.personality_name))}if("addAppointment"===e){if(g){var v=g.filter((e=>"APPOINTMENTSPERSONALITY"===e.personality_name));if(p&&p.length)var L=p[0].actions.filter((e=>"Detail_createApppointment"===e.data_zcqa))}else{(L=i.component.data.data.filter((e=>"Detail_createApppointment"===e.zcqa)))&&0===L.length&&(L=i.component.data.data.filter((e=>"Detail_createApppointment"===e.data_zcqa)))}(L&&L.length||v&&v.length)&&this.executeRelatedListActions("newAppointment",f.getPersonalityModuleObj(m),f.data.module,f.data.record,t)}else(p&&p.length||i)&&("addMeeting"===e&&m?this.executeRelatedListActions("newEvent",f.getPersonalityModuleObj(m),f.data.module,f.data.record,t):"addTask"===e&&m&&this.executeRelatedListActions("newTask",f.getPersonalityModuleObj(m),f.data.module,f.data.record,t))}else if("addAppointment"===e){var y=$L("[data-zcqa='Detail_createApppointment']")[0];y&&y.click()}}},isShortcutNotAllowedRoutes:function(){var e=Lyte.Router.getRouteInstance().transition.info.route;if("crm.settings.section.functions.myFunctions"===e){if($L("#fullEditorView").is(":visible"))return!0}else{if($L(".cscriptEditor").is(":visible"))return!0;if("crm.settings.section.circuits.main.myCircuits"===e&&$L("crm-circuits-create-edit").is(":visible"))return!0}},freezeLayerCheck:function(){if(($L(".freezeLayer").is(":visible")||$L("#FreezeLayer").is(":visible")||0!==$L(".lyteAlertOpened").length||$L(".wiz-custombutton-modal .lyteModalOpened").length<0||$L(".lyteModalFromBottom").is(":visible")||$L(".lyteModalFromLeft").is(":visible")||0===$L(".wiz-fld-warn-Prop-cls .lyteModalFromRight").length&&$L(".lyteModalFromRight").is(":visible")||$L(".lyteModalFromTop").is(":visible")||$L(".lyteZoom").is(":visible")||$L(".lytePopoverVisible").is(":visible")||$L(".lyteDropdownDown").is(":visible")||$L(".lyteDropdownUp").is(":visible")||$L(".lytemenufreezelayer").is(":visible")||$L(".lyteMenuDown").is(":visible")||$L(".lyteMenuUp").is(":visible")||0!==$L(".lyteLoaderFreeze").length||$L(".freezeLayer1").is(":visible")||$L(".sticky_freeze_layer").is(":visible")||$L("#freezeBackGround").is(":visible")||$L(".cpqDashboardFreeze").is(":visible")||$L("#crmplus_freezer_layer").is(":visible")||$L(".orchbuilderfreezelayer").is(":visible")||$L(".pfStateCreatePopFreeze").is(":visible")||$L(".newPopup").is(":visible")||$L("#modalFreezePop").is(":visible")||$L("#z_freezeLayer").is(":visible")||$L(".alertFreezeLayer").is(":visible")||$L(".alertPopup").is(":visible")||$L(".showFreeze").is(":visible")||$L(".select2-results__options").is(":visible")||$L("#cboxOverlay").is(":visible")||$L(".cscript-freezelayer").is(":visible")||$L(".cs-loader-freeze-layer").is(":visible")||$L(".secondary-panel-active").is(":visible")||$L(".zHAppMask").is(":visible"))&&(void 0===Lyte.Service.getInjected("globalVoiceAssistance")||!Lyte.Service.getInjected("globalVoiceAssistance").fromVoiceComponent)||$L("#wms-overlay").is(":visible")||$L("#EmailComposeFreezelayer").is(":visible"))return!0},getAvailableTabs:function(){var e=store.peekAll("tab_group"),t=store.peekAll("module"),i=[],n=e.find((e=>"0"===e.id));return n&&n.modules?i=n.modules:t.length&&(i=t.filter((e=>e.show_as_tab&&e.viewable&&e.visible&&1===e.visibility))),i},routeHandling:function(){var e,t=Lyte.Router.getRouteInstance().transition.info.route;return["crm.settings.section.modules.module.canvas.create","crm.settings.section.modules.module.canvas.edit","crm.settings.section.modules.module.canvas.clone","crm.settings.canvas.edit","crm.settings.canvas.create","crm.settings.canvas.clone"].includes(t)?(Crm.isFromCanvasRoute=!0,Crm.isFromShortcut=!0,e=!0):e=!!["crm.settings.section.wizard.create-wizard","crm.settings.section.orchestration.edit-orchestration","crm.settings.section.wizard.view-wizard","crm.settings.section.path-finder.pathfinder-details.edit-pathfinder","crm.settings.section.modules.index-modules.create-module","crm.settings.section.modules.module.layouts.view-layout","crm.settings.section.modules.module.layouts.clone-layout","crm.settings.section.crm-templates","crm.settings.section.path-finder.pathfinder-details.view-touchpoints","crm.settings.section.path-finder.pathfinder-details.sankey","crm.settings.section.path-finder.pathfinder-details.report","crm.settings.section.path-finder.pathfinder-details.journey","crm.global-search","crm.settings.section.crm-cscript","crm.settings.section.webform.create-webform","crm.settings.section.webform.edit-webform","crm.settings.section.webform.clone-webform"].includes(t),e},contextual_help:function(){var e=Lyte.registeredMixins["crm-keyboard-shortcutsmixin"],t=$L(".lyteModalOpened"),i=$L(".showPpTop .functionMainPopCont"),n=$L("#nTshareFolder").is(":visible"),o=$L("#popupnew.showPpTop"),s=$L("#dashboardPopup"),r=$L("#wfDelugeConfDIV").is(":visible"),a=$L("#fieldPropertiesPopup"),c=$L("#fieldleftsummary.fieldLeftCount"),l=$L(".lyteModal"),d=$L(".lytePopoverVisible"),u=$L("#quickTourPop"),m=$L("#topBandPopup.zcrm-modal"),f=$L("#viewAsContainer"),h=$L(".notificationsPopup.open").is(":visible");if(0!==t.length||0!==d.length||0!==u.length||0!==i.length||0!==m.length||n||0!==o.length||r||0!==s.length||0!==a.length||f.is(":visible")||!e.freezeBgCheck()){if(0===t.length&&0===d.length||void 0!==Lyte.Service.getInjected("globalVoiceAssistance")&&Lyte.Service.getInjected("globalVoiceAssistance").fromVoiceComponent)if(h){var g=$L(".ntc-help");g.is(":visible")&&g[0].click()}else if(f&&f.is(":visible"))z=f.find("#context-helplink"),x=f.find("[icon-name='help-square']"),_=f.find("[data-zcqa='Contextual-HelpIcon']"),S=f.find("#frm-help-icon"),A=f.find(".contextHelpIcon"),M=f.find(".ico-help"),E=f.find(".analytics_helpIcon"),N=$L(".zc-ico-help");else if(s&&s.is(":visible")||u&&u.is(":visible")){M=$L(".showPpTop").find(".ico-help");var p=u.find(".AD_quickTourHelp")}else{if((z=$L("[id='context-helplink']"))&&z.length>1){var v,L=l.find("#context-helplink");z.each((function(e,t){t.checkVisibility()&&!L&&(v=t)}))}var y=$L("#frm-help-icon");if(o.is(":visible"))S=$L("#popupnew.showPpTop #frm-help-icon");else if(a.is(":visible"))S=a.find("#frm-help-icon");else if(y.is(":visible"))var b=y;x=$L("[icon-name='help-square']");var k=$L(".buiderPageHelplinkIcon").find("[icon-name='help-square']"),$=(_=$L("[data-zcqa='Contextual-HelpIcon']"),A=$L(".contextHelpIcon"),M=$L(".ico-help"),$L(".canvas-sidebar-hide-icon")),C=(N=$L(".zc-ico-help"),$L(".zcicncss-help ")),w=$L(".setupHelp"),R=$L(".webF_icon_help")}else{if(0!==t.length)var T=$L(".lyteModalFromTop");else if(0!==d.length)T=d;var z=T.find("#context-helplink"),x=T.find("[icon-name='help-square']"),_=T.find("[data-zcqa='Contextual-HelpIcon']"),S=T.find("#frm-help-icon"),A=T.find(".contextHelpIcon"),M=T.find(".ico-help"),E=T.find(".analytics_helpIcon"),N=$L(".zc-ico-help")}_&&_.is(":visible")&&!r&&!$L("#newRuleStep1.showPpTop").is(":visible")?A.length?A[0].click():_[0].click():A&&A.is(":visible")&&!r&&!$L("#newRuleStep1.showPpTop").is(":visible")?A[0].click():v?v.click():z&&(z.is(":visible")||$L("#convFlowRight #context-helplink").is(":visible"))&&!l?z[0].click():S&&S.is(":visible")?S[0].click():b&&b.is(":visible")?b[0].click():x&&x.is(":visible")&&0===c.length?x[0].click():k&&k.is(":visible")&&void 0!==c&&!c.is(":visible")?k[0].click():z&&l&&(z.is(":visible")||$L("#convFlowRight #context-helplink").is(":visible"))?z[0].click():M&&M.is(":visible")?M[0].click():E&&E.is(":visible")?E[0].click():p&&p.is(":visible")?p[0].click():$&&$.is(":visible")?$[0].click():N&&N.is(":visible")?N[0].click():C&&C.is(":visible")?C[0].click():w&&w.is(":visible")?w[0].click():R&&R.is(":visible")&&R[0].click()}},settingsOnClick:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck())if($L("#leftPaneSettings").is(":visible"))if(featuresAvailable.NEXTGENUI_ENABLED){var e=document.querySelector("crm-left-menu").component;Crm.isFromShortcut=!0,e.actions.openSelectedMenu("settings",!1,!0,!0)}else Lyte.Router.transitionTo("crm.settings.index");else{var t=$L(".lyteMenuSettings").is(":visible");("true"===isCrmPlusUser&&null===document.querySelector(".zcrmp-setupView")||t||"true"===isZohoOneUser)&&Lyte.Router.transitionTo("crm.settings.index")}},openNotifications:function(){var e=Lyte.registeredMixins["crm-keyboard-shortcutsmixin"];if(!e.freezeBgCheck())if(featuresAvailable.NEXTGENUI_ENABLED){if(t=$L("#leftPaneNotification"))t[0].getBoundingClientRect().top>-30&&(e.routeHandling()||crmNTCGlobal.renderGlobalNotification())}else{var t,i=(t=$L("#feeds_notification_container")).is(":visible"),n=$L("crm-menu")[0].component.data;if(!n.issandboxacc&&(n.feedsEnabled||n.ntcEnabledUser))if("true"===isCrmPlusUser&&null===document.querySelector(".zcrmp-setupView"))crmNTCGlobal.renderGlobalNotification();else if(i){t[0].getBoundingClientRect().top>-30&&(e.routeHandling()||crmNTCGlobal.renderGlobalNotification())}else"true"===isZohoOneUser&&crmNTCGlobal.renderGlobalNotification()}},openChatBox:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L(".wms_chatsicon");0!==e.length&&(e[0].click(),setTimeout((function(){$(".wms_menu_searchinput").val("")}),100))}},openShortcutModal:function(){var e=Lyte.registeredMixins["crm-keyboard-shortcutsmixin"],t=networkUtils.returnDependencyFiles(["crm-keyboard-shortcuts-modal.js"],ResourceConstants.CRMClient).concat(networkUtils.returnDependencyFiles(["crm-keyboard-shortcuts-modal.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT));Lyte.injectResources(t,void 0,(function(){var t=$L("crm-shortcuts-modal")[0],i=$L("crm-voice-assistance-shortcut");(!e.freezeBgCheck()||i&&i.length>0&&i[0].component.data.showModal)&&(t||(Lyte.Component.render("crm-shortcuts-modal",{},"body"),t=$L("crm-shortcuts-modal")[0]),t.setData("isShowShortcutKeyModal",!0),t.setData("showShortcutModal",!0))}))},closeOnPopup:function(){var e=Lyte.registeredMixins["crm-keyboard-shortcutsmixin"],t=$L(".notificationsPopup.open").is(":visible"),i=$L(".gSearchContainerNew").is(":visible");if(!e.freezeLayerCheck()||t||i){var n=$L(".searchTopbandOpen").is(":visible");if(t){var o=$L(".notificationSignalClose");o&&o[0].click()}else if(i){var s=$L('[data-zcqa="closeGlobalSearch"]');s&&s[0].click()}else if(n){var r=$L("#adSearchCloseBtn");r&&r[0].click()}}},nextRecordFocus:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck())if("list"===Lyte.Router.getRouteInstance().routeName){if((c=$L("lyte-exptable:not(.lyteExpTableFixedColTable) .listTableHover")).length)var e=c.eq(0).next("lyte-exptable-tr");else e=$L("lyte-exptable:not(.lyteExpTableFixedColTable) lyte-exptable-tr:not(#listviewHeaderRow):first-of-type");if(e.length){var t=e.closest(".lyteExpTableOrigTableInnerWrap"),i=e.offset(),n=t.scrollTop();t.offset().top+t.height()+n>=i.top&&e[0].scrollIntoView(!1),setTimeout((function(){$L("lyte-exptable:not(.lyteExpTableFixedColTable) .listTableHover").removeClass("listTableHover"),e.addClass("listTableHover")}),100)}}else if("canvas"===Lyte.Router.getRouteInstance().routeName){var o=$L("crm-list-view-canvas")[0];if(o)var s=o.getData("viewType");if("CardView"===s){var r=(a=$L(".recordRow .zc-page-component.highlights")).closest(".recordRow");if(0!==a.length)e=r.eq(0).next(".recordRow").find(".zc-page-component");else e=$L("#crm-list-view-canvas-comp .recordRow:first-of-type .ListViewCanvasComp .zc-page-component")}else if("CustomizedView"===s){if(0!==(a=$L(".recordRow.highlights")).length)e=a.eq(0).next(".recordRow");else e=$L("#crm-list-view-canvas-comp .recordRow:first-of-type")}else if("TableView"===s){var a;if(0!==(a=$L(".highlights")).length)e=a.eq(0).next("lyte-tr");else e=$L("#crm-list-view-canvas-comp lyte-tr:not(.zcdatatable-header):first-of-type")}else{var c;if(0!==(c=$L(".bg_crmSelectBg")).length)e=c.eq(0).next("tr");else e=$L("#listViewTable .topband_dv_row:first-of-type")}if(e.length){if("CardView"===s){t=e.closest(".crm-listview-data-container ");var l=e.offset().top-40}else if("CustomizedView"===s||"TableView"===s)t=e.closest(".crm-listview-data-container "),l=e.offset().top;else t=e.closest(".canvasview-container"),l=e.offset().top;n=t.scrollTop();t.offset().top+t.height()+n>=l&&e[0].scrollIntoView(!1)}setTimeout((function(){if("CardView"===s||"CustomizedView"===s||"TableView"===s){if("CardView"===s)var t=$L(".recordRow .zc-page-component.highlights");else if("CustomizedView"===s)t=$L(".recordRow.highlights");else if("TableView"===s)t=$L(".highlights");t.removeClass("highlights"),e.removeClass("highlights"),e.addClass("highlights")}else{$L(".bg_crmSelectBg").removeClass("bg_crmSelectBg"),e.removeClass("bg_white"),e.addClass("bg_crmSelectBg")}}),100)}},previousRecordFocus:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck())if("list"===Lyte.Router.getRouteInstance().routeName){if((s=$L(".listTableHover")).length)var e=s.prev("lyte-exptable-tr");else e=$L("#listViewTable lyte-exptable-tr:not(#listviewHeaderRow):first-of-type");e.length>0&&(e[0].scrollIntoView(!1),setTimeout((function(){$L(".listTableHover").removeClass("listTableHover"),e.addClass("listTableHover")}),100))}else if("canvas"===Lyte.Router.getRouteInstance().routeName){var t=$L("crm-list-view-canvas")[0];if(t)var i=t.getData("viewType");if("CardView"===i){var n=(o=$L(".recordRow .zc-page-component.highlights")).closest(".recordRow");if(0!==o.length)e=n.eq(0).prev(".recordRow").find(".zc-page-component");else e=$L("#crm-list-view-canvas-comp .recordRow:first-of-type .ListViewCanvasComp .zc-page-component")}else if("CustomizedView"===i){if(0!==(o=$L(".recordRow.highlights")).length)e=o.eq(0).prev(".recordRow");else e=$L("#crm-list-view-canvas-comp .recordRow:first-of-type")}else if("TableView"===i){var o;if(0!==(o=$L(".highlights")).length)e=o.eq(0).prev("lyte-tr");else e=$L("#crm-list-view-canvas-comp lyte-tr:not(.zcdatatable-header):first-of-type")}else{var s;if((s=$L(".bg_crmSelectBg")).length)e=s.prev("tr");else e=$L("#listViewTable .topband_dv_row:first-of-type")}e[0].scrollIntoView(!1),setTimeout((function(){if(e.length>0)if("CardView"===i||"CustomizedView"===i||"TableView"===i){if("CardView"===i)var t=$L(".recordRow .zc-page-component.highlights");else if("CustomizedView"===i)t=$L(".recordRow.highlights");else if("TableView"===i)t=$L(".highlights");t.removeClass("highlights"),e.removeClass("highlights"),e.addClass("highlights")}else{$L(".bg_crmSelectBg").removeClass("bg_crmSelectBg"),e.removeClass("bg_white"),e.addClass("bg_crmSelectBg")}}),100)}},goToSectionBelow:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e,t=$L("html").scrollTop(),i=Lyte.Router.getRouteInstance().transition.info.route;(e="Tasks"===Lyte.Router.getRouteInstance().transition.info.dynamicParams[0]&&["crm.tab.module.create","crm.tab.module.entity.edit","crm.tab.module.entity.clone"].includes(i)?$L(".editParentSection"):$L("crm-create-sections")).each((function(i){if(e.eq(i)[0].offsetHeight+e.eq(i)[0].offsetTop&&e.eq(i)[0].offsetTop>=t){var n=e.eq(i)[0].offsetTop+e.eq(i)[0].getBoundingClientRect().height-70;return window.scrollTo(0,n),!1}}))}},goToSectionAbove:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e,t=$L("html").scrollTop(),i=window.innerHeight+t,n=Lyte.Router.getRouteInstance().transition.info.route;(e="Tasks"===Lyte.Router.getRouteInstance().transition.info.dynamicParams[0]&&["crm.tab.module.create","crm.tab.module.entity.edit","crm.tab.module.entity.clone"].includes(n)?$L(".editParentSection"):$L("crm-create-sections")).each((function(n){if(e.eq(n)[0].offsetHeight+e.eq(n)[0].offsetTop<=i&&e.eq(n)[0].offsetTop>=t){0===n?n=0:n-=1;var o=e.eq(n)[0].offsetTop-e.eq(n)[0].getBoundingClientRect().height+70;return window.scrollTo(0,o),!1}}))}},selectRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){if("list"===Lyte.Router.getRouteInstance().routeName)var e=$L(".listTableHover");else if("canvas"===Lyte.Router.getRouteInstance().routeName){var t=$L("crm-list-view-canvas")[0];if(t)var i=t.getData("viewType");if("CardView"===i)e=$L(".recordRow .zc-page-component.highlights").closest(".recordRow");else if("CustomizedView"===i)e=$L(".recordRow.highlights");else if("TableView"===i)e=$L("lyte-tr.highlights");else e=$L(".bg_crmSelectBg")}0!==e.length?e.find('[data-zcqa="selectEntity"]').click():$L('[data-zcqa="selectEntity"]')[0].click()}},createRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L("#listviewButtonLayer");if(e)var t="visible"===e.css("visibility");if(!t){var i=$L('[data-zcqa="cv_createbtn"]'),n=$L(".blankPagecreateBtn"),o=$L(".blankpage_logcallBtn");0!==i.length?i[0].click():0!==n.length?n[0].click():0!==o.length&&(o[0].click(),setTimeout((function(){var e=$L("[data-zcqa=manual_complete_call]");0!==e.length&&e[0].click()}),700))}}},OpenRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){if("list"===Lyte.Router.getRouteInstance().routeName)var e=$L(".listTableHover");else if("canvas"===Lyte.Router.getRouteInstance().routeName){var t=$L("crm-list-view-canvas")[0];if(t)var i=t.getData("viewType");if("CardView"===i)e=$L(".recordRow .zc-page-component.highlights").closest(".recordRow");else if("CustomizedView"===i)e=$L(".recordRow");else if("TableView"===i)e=$L("lyte-tr.highlights");else e=$L(".bg_crmSelectBg")}e&&0!==e.length&&e[0].click()}},editList:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck())if("list"===Lyte.Router.getRouteInstance().routeName){var e=$L(".listTableHover");if(0!==e.length){var t=$L("crm-inner-list")[0];if(t.component.data.moduleActionsMenu.some((e=>"Edit"===e.value))){var i=e.attr("id");t.component.setData("entityId",i),t.component.executeMethod("onQuickActionsMenuOpen");var n=$L('[data-zcqa = "qAOptions_Edit"]').find("a"),o=$L("#editAppRecordbtn"),s=Lyte.Router.getRouteInstance().currentModel.module;0!==n.length&&"Appointments"!==s?n[0].click():"Appointments"===s&&0!==o.length&&o[0].click()}}}else if("canvas"===Lyte.Router.getRouteInstance().routeName){var r=$L("crm-list-view-canvas")[0];if(r)var a=r.getData("viewType");if("CardView"===a)0!==(c=$L(".recordRow .zc-page-component.highlights").closest(".recordRow").find(".listEditIcon")).length&&c[0].click();else if("CustomizedView"===a){0!==(c=$L(".recordRow.highlights").find(".listEditIcon")).length&&c[0].click()}else if("TableView"===a){0!==(c=$L("lyte-tr.highlights").find(".listEditIcon")).length&&c[0].click()}else{var c;0!==(c=$L(".bg_crmSelectBg")).length&&Lyte.Router.transitionTo("crm.tab.module.entity.edit",JSON.parse(c[0].dataset.params).module,c[0].id)}}},deleteList:function(){var e=Lyte.registeredMixins["crm-keyboard-shortcutsmixin"];if(!e.freezeBgCheck()){var t=Lyte.Router.getRouteInstance().routeName;if("list"===t)var i=$L(".listTableHover");else if("canvas"===t)i=$L(".bg_crmSelectBg");var n=$L(".listViewRowSelected"),o=$L('[data-zcqa="quickActionsMenu"]')[0],s=$L('[data-zcqa ="appMoreOptionList"]'),r=Lyte.Router.getRouteInstance().currentModel.module;if(0!==n.length||"canvas"===t){var a=$L("#selectCheckbox"),c=$L("#cvlistViewFilter .customCheckBoxChecked");if(0!==a.length)var l=a[0].ltProp("checked");else if(0!==c.length)l=!0;if(!l){if("list"===t)if(i.length){var d=i.find('[data-zcqa="selectEntity"]')[0];d.checked||(d.click(),n.push(i))}else i=n;else"canvas"===t&&(i.length||(i=$L("#canvasview-tablescroll .customCheckBoxChecked")));0!==i.length&&(n.length||i.find('[data-zcqa="selectEntity"]').click())}setTimeout((function(){var e=$L("crm-customview-buttons")[0];if(e){var t=e.component,i=t.data.dropActions.some((e=>"mass_delete"===e.name)),n=t.data.topActions.some((e=>"mass_delete"===e.name));if(i||n)Lyte.registeredMixins["crm-view-utils"].updateActions.bind(t)("mass_delete")}}),100)}else if("Appointments"!==r&&o){if(0!==i.length){var u=$L("crm-inner-list"),m=i.attr("id");u[0].component.setData("entityId",m),u[0].component.executeMethod("onQuickActionsMenuOpen"),(f=$L('[data-zcqa = "qAOptions_mass_delete"]'))&&f[0].click()}}else if("Appointments"===r&&s&&0!==i.length){var f;u=$L("crm-inner-list"),m=i.attr("id");u[0].component.setData("entityId",m),u[0].component.executeMethod("onCallsMenuOpen"),(f=$L("#deleteAppRecordbtn"))&&setTimeout((function(){e.triggeredFromShortcutMixin=!0,f[0].click()}),100)}}},toggelFilterPanel:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()&&"hidden"===$L("#listviewButtonLayer").css("visibility")){var e=$L(".newListviewFilterIcon");0!==e.length&&e[0].click()}},openCustomView:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()&&"hidden"===$L("#listviewButtonLayer").css("visibility")){var e=$L("crm-customview-dropdown #cxCV_DropButton");if(0!==e.length)e[0].click(),0!==$L("#CVSearchBox").length&&setTimeout((function(){$L("#CVSearchBox")[0].ltProp("value","")}),300)}},saveRecord:function(){var e=Lyte.registeredMixins["crm-keyboard-shortcutsmixin"];if(!e.freezeLayerCheck()&&!e.isShortcutNotAllowedRoutes()&&(document.activeElement.tabIndex<0||void 0!==Lyte.Service.getInjected("globalVoiceAssistance")&&Lyte.Service.getInjected("globalVoiceAssistance").fromVoiceComponent)){var t=$L('[data-zcqa="save"]');0!==t.length&&t[0].click()}},saveAndNewRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L('[data-zcqa="saveAndNew"]');0!==e.length&&e[0].click()}},cancelRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L('[data-zcqa="cancel"]');0!==e.length&&e[0].click()}},switchLayout:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){if(0===(e=$L("#layoutDetails")).length)var e=$L("#InteglayoutDetails");0!==e.length&&e.click()}},editRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L("#btn_edit"),t=$L('[data-zcqa = "edit"]'),i=$L("#editRecordbtn");0!==e.length?e[0].click():0!==t.length?t[0].click():0!==i.length&&i[0].click()}},backToListView:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L('[data-zcqa="backOneLevel"]');0!==e.length&&e[0].click()}},addNotes:function(){if(!this.freezeBgCheck()){var e=$L("#noteDetails");if(e&&"none"!==e.css("display")){var t=e.find("crm-notes");if(t&&t.length>0){var i=t[0].component.data.relid;this.scrollToRL(!0,i),this.openNotesEditor()||setTimeout(function(){this.openNotesEditor()}.bind(this),2e3)}else{var n=e[0].offsetTop,o=$L(".DetailViewInnerTabs"),s=$L("#dvinner");if(0!==o.length){var r=n-o[0].offsetHeight;$L("#dvinner").scrollTo(r,{duration:100})}else 0!==s.length&&$L("#dvinner").scrollTo(n,{duration:100});setTimeout((function(){Notes.initNote("open");var e=$L("#noteContentTxt");0!==e.length&&e[0].focus()}),200)}}}},call:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L('[data-zcqa = "Call"]'),t=$L(".zpbCallIconOuter"),i=$L("call-button .greenbtn"),n=$L("#zpbCallAllowedField");1===t.length?t[0].click():0!==i.length?i[0].click():0!==n.length?n[0].click():0!==e.length&&e.click()}},createLogCall:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L('[data-zcqa="emc_krp_label_create_new"]')[0],t=$L('[data-zcqa="manual_complete_call"]'),i=$L('[data-zcqa="emc_New_Calls"]');if(e)i[0].click(),t&&0!==t.length?($L("crm-manual-call-list")[0].setData("isCallTriggeredFromShortcut",!0),setTimeout((function(){t.click(),$L("crm-manual-call-list")[0].setData("isCallTriggeredFromShortcut",!1)}),100)):$L("crm-activity-right-panel").data("triggeredFromShortcut",!0);else{var n=$L("crm-activity-rel-actions");if(0!==n.length){var o=$L(".addnew-btn1");0!==o.length&&o[0].click()}var s=$L('[data-zcqa="Detail_createcall"]');s&&0!==s.length&&s[0].click(),0!==n.length&&n[0].setData("showPopover",!1),t&&t.length?($L("crm-manual-call-list")[0].setData("isCallTriggeredFromShortcut",!0),setTimeout((function(){$L('[data-zcqa="manual_complete_call"]').click(),$L("crm-manual-call-list")[0].setData("isCallTriggeredFromShortcut",!1)}),100)):n.data("triggeredFromShortcut",!0)}}},addTask:function(e){var t=Crm.userDetails.MODULE_LIST.Tasks;if(t){var i=t.profiles,n=Crm.userDetails.PROFILE_NAME;if(i&&i.length){var o=i.filter((e=>e.name===n));o&&o.length&&this.addOpenActivities("addTask",e)}}},addEvent:function(e){var t=Crm.userDetails.MODULE_LIST.Meetings;if(t){var i=t.profiles,n=Crm.userDetails.PROFILE_NAME;if(i&&i.length){var o=i.filter((e=>e.name===n));o&&o.length&&this.addOpenActivities("addMeeting",e)}}},addAppointment:function(e){var t=Crm.userDetails.MODULE_LIST.Appointments;if(t){var i=t.profiles,n=Crm.userDetails.PROFILE_NAME;if(i&&i.length){var o=i.filter((e=>e.name===n));o&&o.length&&this.addOpenActivities("addAppointment",e)}}},sendEmail:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L("#btn_send_mail"),t=$L('[data-zcqa = "send_mail_related_mod"]'),i=$L('[value = "Send Email"]'),n=$L("#sendEntityMailLink");if(0!==e.length)e[0].click();else if(0!==t.length){void 0===$L(".sb1")[0]?t[0].click():($L("#dv_moreBtn")[0].click(),t.addClass("lyteMenuSelection"),setTimeout((function(){$L("#sendMailSubMenu")[0].ltProp("show",!0)}),100))}else i&&0!==i.length?i[0].click():n&&0!==n.length&&n[0].click()}},goToNxtRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L("#detailNext");0!==e.length&&e[0].click()}},goToPreviousRecord:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L("#detailPrevious");0!==e.length&&e[0].click()}},selectAllRecords:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){if("list"===Lyte.Router.getRouteInstance().routeName)var e=$L("#selectCheckbox");else if("canvas"===Lyte.Router.getRouteInstance().routeName){var t=$L("crm-list-view-canvas")[0];if(t)var i=t.getData("viewType");if("CardView"===i||"CustomizedView"===i||"TableView"===i)e=$L("#selectCheckbox");else e=$L("#cvcheckAll")}0!==e.length&&e[0].click()}},goToPageBottom:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L(".dvScrollContainier"),t=$L("#dvinner");if(e.length){var i=e[0].offsetHeight;t.scrollTo(i,{duration:500})}else{var n=t[0].offsetHeight;t.scrollTo(n,{duration:500})}}},goToPageTop:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){var e=$L(".dvScrollContainier"),t=$L("#dvinner");e.length,t.scrollTo(0,{duration:500})}},toggleLeftMenu:function(){Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeLayerCheck()||$L(".crm-lftmnu-clpse").is(":visible")&&$L(".toggleLeftMenuCon").click()},getShortcutCallback:function(e,t,i){if("General"===e){if("Open Setup"===t)return this.settingsOnClick.bind({actionname:t,category:e,keys:i});if("Open Help"===t)return this.contextual_help.bind({actionname:t,category:e,keys:i});if("Open Notifications"===t)return this.openNotifications.bind({actionname:t,category:e,keys:i});if("Show/Hide Chat Box"===t)return this.openChatBox.bind({actionname:t,category:e,keys:i});if("View Shortcuts"===t)return this.openShortcutModal.bind({actionname:t,category:e,keys:i});if("Close Popup"===t)return this.closeOnPopup.bind({actionname:t,category:e,keys:i});if("Open Command Palette"===t)return()=>Lyte.registeredMixins["crm-cscript-global-mixin"].toggle_command_palette();if("Show/Hide Left Menu"===t)return this.toggleLeftMenu.bind({actionname:t,category:e,keys:i});if("Open Voice Assistance"===t)return openVoiceAssist.bind({actionname:t,category:e,keys:i})}else if("Records View"===e){if("Focus Next Record"===t)return this.nextRecordFocus.bind({actionname:t,category:e,keys:i});if("Focus Previous Record"===t)return this.previousRecordFocus.bind({actionname:t,category:e,keys:i});if("Open Record"===t)return this.OpenRecord.bind({actionname:t,category:e,keys:i});if("Edit Record"===t)return this.editList.bind({actionname:t,category:e,keys:i});if("Select Record"===t)return this.selectRecord.bind({actionname:t,category:e,keys:i});if("Delete Record"===t)return this.deleteList.bind({actionname:t,category:e,keys:i});if("Show/Hide Advanced Filter"===t)return this.toggelFilterPanel.bind({actionname:t,category:e,keys:i});if("Show Custom Views"===t)return this.openCustomView.bind({actionname:t,category:e,keys:i});if("Select All Records"===t)return this.selectAllRecords.bind({actionname:t,category:e,keys:i});if("Create Record"===t)return this.createRecord.bind({actionname:t,category:e,keys:i})}else if("Record's Create/Edit/Clone Page"===e){if("Move to Next Section"===t)return this.goToSectionBelow.bind({actionname:t,category:e,keys:i});if("Move to Previous Section"===t)return this.goToSectionAbove.bind({actionname:t,category:e,keys:i});if("Save"===t)return this.saveRecord.bind({actionname:t,category:e,keys:i});if("Save and New"===t)return this.saveAndNewRecord.bind({actionname:t,category:e,keys:i});if("Cancel"===t)return this.cancelRecord.bind({actionname:t,category:e,keys:i});if("Switch Layout"===t)return this.switchLayout.bind({actionname:t,category:e,keys:i})}else if("Record Details View"===e){if("Back to List View"===t)return this.backToListView.bind({actionname:t,category:e,keys:i});if("Edit Record"===t)return this.editRecord.bind({actionname:t,category:e,keys:i});if("Send Email"===t)return this.sendEmail.bind({actionname:t,category:e,keys:i});if("Call Now"===t)return this.call.bind({actionname:t,category:e,keys:i});if("Add Task"===t)return this.addTask.bind(this);if("Log a Call"===t)return this.createLogCall.bind({actionname:t,category:e,keys:i});if("Add Meeting"===t)return this.addEvent.bind(this);if("Add Note"===t)return this.addNotes.bind(this);if("Add Appointment"===t)return this.addAppointment.bind(this);if("Move to Next Record"===t)return this.goToNxtRecord.bind({actionname:t,category:e,keys:i});if("Move to Previous Record"===t)return this.goToPreviousRecord.bind({actionname:t,category:e,keys:i});if("Go to Page's Top"===t)return this.goToPageTop.bind({actionname:t,category:e,keys:i});if("Go to Page's Bottom"===t)return this.goToPageBottom.bind({actionname:t,category:e,keys:i})}else if("Commands"===e)return CScript.Accessibility.getCallback(t)},unbindShortcutsBeforeExit:function(e){var t,i=this;Crm.userDetails.isKeyboardShortcutsEnabled&&(store.peekAll("keyboard_shortcuts")&&0!==store.peekAll("keyboard_shortcuts").length?t=store.peekAll("keyboard_shortcuts"):store.findAll("keyboard_shortcuts").then((function(e){t=e})),void 0!==t&&t.forEach((function(t){t.category===e&&i.unbindShortcuts(t.category,t.components)})))},bindShortcutsAfterRender:function(e,t){var i,n=this;Crm.userDetails.isKeyboardShortcutsEnabled&&(store.peekAll("keyboard_shortcuts")&&0!==store.peekAll("keyboard_shortcuts").length?i=store.peekAll("keyboard_shortcuts"):store.findAll("keyboard_shortcuts").then((function(e){i=e})),void 0!==i&&i.forEach((function(i){i.category===e&&(t?i.components.forEach((function(e){"Create Record"===e.action&&n.bindShortcuts(i.category,[e])})):n.bindShortcuts(i.category,i.components))})))},bindShortcuts:function(e,t){var i=this,n=this.getAvailableTabs();"Switch Tabs"!==e?t.forEach((function(t){var n=i.getShortcutCallback(e,"Commands"===e?t.cscript_snippet.uuid:t.action,t.key_combination),o=[];if(t.key_combination.forEach((function(e){e=i.keyConversion(e);o.push(e)})),n){if(i.checkSameKeys(o))var s=o.join(" ");else s=o.join("+");if(!shortcut.hasRegisteredShortcut(s)){var r={useCode:!0,preventDefault:!0,wait:"Save and New"===t.action?200:300,validate:function(){Crm.client_tracking("Keyboard Shortcuts - Usage",{Category:e,Action:t.action});var n=t.action,o=t.key_combination;if("Save and New"===n&&i.isValidKey(o)){var s=document.activeElement;return"INPUT"!==s.tagName&&"TEXTAREA"!==s.tagName||(s.blur(),$L('[data-zcqa="saveAndNew"]')[0].click(),!1)}return!0}};"Control+KeyZ+KeyV"===s&&(r.excludeElements=[]),shortcut.registerCode(s,n,r)}}})):t.forEach((t=>{var o=[];t.key_combination.forEach((function(e){e=i.keyConversion(e);o.push(e)}));var s=t.api_name;void 0===t.api_name&&(s=t.module.api_name);var r=n.find((e=>e.api_name===s));if(void 0!==r){var a=o.join("+");shortcut.hasRegisteredShortcut(a)||shortcut.registerCode(a,(function(){if(!i.freezeBgCheck()){Crm.client_tracking("Keyboard Shortcuts - Usage",{Category:e,Action:s});var t=store.peekAll("tab_group");if(t.length>0)void 0===t.filter((e=>!0===e.default))[0].modules.find((e=>e.module_name===r.module_name))&&$L("crm-tab-group")[0].component.executeMethod("changeTabGroup",null,"0");if(i.routeHandling()){var n=$L("#cancel"),o=$L('[data-zcqa = "MPL_builder_backButton"]'),a=$L('[data-zcqa = "lyte_wizard_exit"]'),c=$L('[data-zcqa = "orchbackbtn"]'),l=$L('[data-zcqa = "discard_changes"]'),d=$L('[data-zcqa = "prevPageBtn"]'),u=$L('[data-zcqa = "pfbackbtn"]'),m=$L("#mplay_cancelBtn"),f=$L('[data-zcqa="snippetCancelEditor"]'),h=$L('[data-zcqa="formCreationCancelBtn"]');if(0!==n.length)n[0].click();else if(0!==o.length)o[0].click();else if(a.is(":visible")&&!l.is(":visible"))a[0].click();else if(0!==c.length)c[0].click();else if(0!==d.length)d[0].click();else if(0!==u.length)u[0].click();else if(0!==m.length)m[0].click();else if(0!==f.length)f[0].click();else if(0!==h.length)h[0].click();else if(featuresAvailable.NEXTGENUI_ENABLED&&Crm.isFromCanvasRoute){if($L("crm-left-menu")){var g=$L("#leftPaneModules");0!==g.length&&(Crm.canvasRoute=!0,g[0].click())}}}i.reDirectHandle(r)}}),{useCode:!0,preventDefault:!0,wait:300})}}))},reDirectHandle:function(e){var t=e,i=this;i.moduleData=t;var n,o=Lyte.Router.getRouteInstance().routeName;n="edit-pathfinder"===o||"create-webform"===o?1e3:!featuresAvailable.NEXTGENUI_ENABLED||"view-wizard"!==o&&"create-wizard"!==o?250:700,setTimeout((function(){var e=$L("#nTcancelPop"),t=$L("#templateAlertsPop"),n=$L("#stayonPageConfirmBox"),o=$L(".wizardAlertWrapCls"),s=$L("#pfmodalAction"),r=$L(".cScancelAlertWrapper"),a=$L(".pfTouchpointsWrap.pfredborder"),c=$L("crm-webform-builder")[0];if(c)var l=c.component.getData("cancelWarningShow");if(e&&e.is(":visible"))i.routeChange=!0;else{if(t&&t.is(":visible"))return!1;if(Events.isPageLayoutModified)i.routeChange=!0;else if(n&&n.is(":visible"))i.routeChange=!0;else if(0!==o.length&&o.is(":visible"))i.routeChange=!0;else if(0!==s.length&&s[0].component.data.ltPropShow)i.routeChange=!0;else{if(0!==a.length&&a.is(":visible"))return!1;if(0!==r.length)i.routeChange=!0;else if(l)i.routeChange=!0;else{if(!featuresAvailable.NEXTGENUI_ENABLED){var d=$L("crm-tab")[0],u=i.moduleData;d.setData("selected",moduleRecordMapping[u.module_name]);var m=Lyte.Router.getRouteInstance().routeName,f=$L('[data-zcqa = "lyte_wizard_exit"]'),h=$L('[data-zcqa = "discard_changes"]');return"view-wizard"!==m&&"create-wizard"!==m?(i.moduleData={},i.routeChange=!1,$("#tabLayer").css("display","block")):0===f.length||h.is(":visible")?i.routeChange=!0:($("#tabLayer").css("display","block"),i.moduleData={},i.routeChange=!1),d.component.changeMenu(u.module_name),void(isCrmPlusUser&&crmplusImplTriggerActions("selectEntity",["module",u.module_name]))}if($L("crm-left-menu")){var g=$L("#leftPaneModules");0!==g.length&&(Crm.canvasRoute||g[0].click(),Crm.canvasRoute=!1)}setTimeout((function(){var e=$L("crm-left-menu-modules")[0],t=i.moduleData;e.setData("selected",moduleRecordMapping[t.module_name]);var n=$L("#lm_module_"+t.module_name)[0],o=Lyte.Router.getRouteInstance().routeName,s=$L('[data-zcqa = "lyte_wizard_exit"]'),r=$L('[data-zcqa = "discard_changes"]');"view-wizard"!==o&&"create-wizard"!==o?(i.moduleData={},i.routeChange=!1,$L(".nextGenUILeftMenu").css("display","block")):0===s.length||r.is(":visible")?i.routeChange=!0:(i.moduleData={},i.routeChange=!1,$L(".nextGenUILeftMenu").css("display","block")),e.component.actions.onTabSelected.bind(e.component)(n,t)}),300)}}}}),n)},unbindShortcuts:function(e,t,i){var n=this;t.forEach((function(e){if("Open Voice Assistance"!==e.action||"fromVA"===i){var t=[];if(e.key_combination.forEach((function(e){e=n.keyConversion(e);t.push(e)})),n.checkSameKeys(t))var o=t.join(" ");else o=t.join("+");shortcut.unregisterCode(o)}}))},unbindShortcutKey:function(e){var t=this,i=[];if(e.forEach((function(e){e=t.keyConversion(e);i.push(e)})),t.checkSameKeys(i))var n=i.join(" ");else n=i.join("+");shortcut.unregisterCode(n)},keyConversion:function(e){var t=this.keysMapping;if(t[e])e=t[e];else e=e;return e},isValidKey:function(e){var t,i=["Meta","Control","Alt","Shift"];return e.forEach((function(n){"Shift"!==n&&"Meta"!==n&&"Control"!==n&&"Alt"!==n||e.forEach((function(e){t=!(!i.includes(e)&&(e.startsWith("Key")||e.startsWith("Digit")))}))})),t},deleteKeyboardShortcuts:async function(e,t){const i='{"keyboard_shortcuts":{"shortcuts":['+e+"]}}";await store.triggerAction("dummy","dummyAction",{url:"/crm/v5/settings/keyboard_shortcuts",method:"PUT",payLoad:i}),this.unbindShortcuts(void 0,t)},checkSameKeys:function(e){return e.every((function(e,t,i){return e===i[0]}))}}),Lyte.Component.registerHelper("getEncodedVal",(function(e,t){var i={ArrowDown:"&darr;",ArrowUp:"&uarr;",ArrowLeft:"&larr;",ArrowRight:"&rarr;",Meta:"Cmd",Control:"Ctrl",Escape:"Esc"};if(navigator.userAgent.includes("Mac")&&(i.Backspace="delete"),e.length>3)if(e.startsWith("Key"))e=e.replace("Key","").toUpperCase();else if(e.startsWith("Digit"))e=e.replace("Digit","");else if(e.startsWith("Numpad"))if(e.length>7){if(e.endsWith("Multiply"))e="Num *";else if(e.endsWith("Add"))e="Num +";else if(e.endsWith("Subtract"))e="Num -";else if(e.endsWith("Decimal"))e="Num .";else if(e.endsWith("Divide"))e="Num /";else if(e.endsWith("Enter"))e="Num Enter";else if(e.endsWith("Equal"))e="Num ="}else e=e.replace("Numpad","Num");var n={Slash:"/",Minus:"-",Equal:"=",Backslash:"\\",BracketRight:"]",BracketLeft:"[",Period:".",Comma:",",Quote:"'",Semicolon:";",Backquote:"`"};if(t){var o=e,s=[];e.forEach((function(e,t){if(e.startsWith("Key"))e=e.replace("Key","");else if(e.startsWith("Digit"))e=e.replace("Digit","");else if(e.startsWith("Numpad"))if(e.length>7){if(e.endsWith("Multiply"))e="Num *";else if(e.endsWith("Add"))e="Num +";else if(e.endsWith("Subtract"))e="Num -";else if(e.endsWith("Decimal"))e="Num .";else if(e.endsWith("Divide"))e="Num /";else if(e.endsWith("Enter"))e="Num Enter";else if(e.endsWith("Equal"))e="Num ="}else e=e.replace("Numpad","Num");if(i[e])var r="<span class='ks_keysAlign crm-base-font-size crm-font-bold'>"+i[e]+"</span>";else if(n[e])r="<span class='ks_keysAlign crm-base-font-size crm-font-bold'>"+$ESAPI.encoder().encodeForHTML(n[e])+"</span>";else r="<span class='ks_keysAlign crm-base-font-size crm-font-bold'>"+$ESAPI.encoder().encodeForHTML(e)+"</span>";if(o.length-1>t){var a=r+"<span class='ks_plusIcon pL2 pR2'>+</span>";s.push(a)}else s.push(r)}));e=s.join("")}return i[e]?i[e]:n[e]?n[e]:e})),Lyte.Component.registerHelper("tooltipShow",(function(e){if(e&&e.startsWith("Numpad")){var t=e.replace("Numpad","Numeric Keypad ");return t.endsWith("Add")?t=t.replace("Add","+"):t.endsWith("Subtract")?t=t.replace("Subtract","-"):t.endsWith("Multiply")?t=t.replace("Multiply","*"):t.endsWith("Divide")&&(t=t.replace("Divide","/")),t}})),Lyte.Mixin.register("crm-keyboard-shortcuts-commandsmixin",{methods:{onShowModal:function(){this.setData({"commands.unassignedScripts":CScript.Accessibility.getUnassignedScripts(this.getData("shortcuts")),"commands.selectedScript":void 0,shortcutKey:"",shortcutKeysArray:[],scriptErrorMsg:""})},onScriptSelection:function(){this.setData("scriptErrorMsg","")}},actions:{showCommandsModal:function(){this.setData("commands.showModal",!0)},cancelCommandsModal:function(){this.setData({"commands.showModal":!1,duplicateKeyErrorMsg:""})},manageCommands:function(){networkUtils.openUrl(window.location.origin+Crm.getCrmBasePath()+"/settings/cscript?tab=Commands","_blank")}},isCommands:function(e){let t=this.getData("shortcuts").find((e=>"Commands"===e.category));return!!t&&t.components.map((e=>e.cscript_snippet.uuid)).includes(e)},getNameOfScript:function(e){return CScript.Accessibility.getNamefromId(e)}}),Lyte.Component.registerHelper("getCScriptName",(function(e){return CScript.Accessibility.getNamefromId(e)}));
