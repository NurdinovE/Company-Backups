var Macro={module:null,closeFromSuggest:null,currentLength:null,SelCounter:0,canShowAutoSuggest:!1,autoSuggestHandler:null,rotationCircle:null,clickHandler:function(e,r,a){var t=a;if("showMacro"===t){var n=$(r),o=n.attr("data-params");return o||(o={}),"string"==typeof o&&(o=JSON.parse(o)),o.clickId=t,n.attr("data-params",JSON.stringify(o)),Crm.lyteTransition(e,r),!1}return!0},showMacroOptions:function(e,r,a,t,n,o,l,c,s,i,d){e=e||renderingUtils.getTargetElem(r);void 0===o&&(o=""),(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Macro.do",type:"POST",data:"step=showMacroOptions&module="+a+(t?"&entityId="+t:""),success:function(t){var n=$("#divMacro"+o),l=Handlebars.templates.MacroOptions,c=Object.keys(t.MacroListMap).length,s=Object.keys(t.sharedMacroListMap).length;Macro.module=a,t.totalMacroListMapLength=c+s,t.MacroListMapLength=c,t.sharedMacroListMapLength=s,t.reqFrom=d;var i=l(t);n.html(i),n.hide(),Macro.perfectScrollbinder("#macroListDIV");var u=$("#macroSugstBox"),m=$("#macroListDIV");u.length>0?m.length>0&&m.css({height:"240px",overflow:"hidden"}):m.length>0&&m.css({height:"",overflow:"hidden"});setTimeout((function(){manipulateScriptElems(n[0])}),0),Crm.menu.createMenu(r,{id:"divMacro",setDefaultPos:!0},e);var p=$(e),g=parseInt(p.offset().top),h=parseInt(p.offset().left),f=g+p.outerHeight(),v=h+parseInt(p.css("border-left-width"));$("#divMacro").on("onBeforeShow",(function(){var e=$(this);if(Crm.userDetails.RTL_ENABLED)if("detailView"===d)v+=parseInt(p.innerWidth()),e.css({left:v+"px",top:g+"px"});else{var r=$("#runMacro"),a=renderingUtils.windowWidth-(parseInt(r.offset().left)+parseInt(r.outerWidth()));e.css({left:"initial",right:a+"px",top:f+"px"})}else"detailView"===d?(v=h-(parseInt(e.css("width"))+2),e.css({left:v+"px",top:g+"px"})):e.css({left:v+"px",top:f+"px"})})).on("onBeforeClose",(function(e,r){var a=renderingUtils.getTargetElem(r);if(a&&"macroSugstBox"===a.id)return!1;$(this).off("onBeforeClose").off("onBeforeShow")}))}})},showMacroExecDialog:function(e,r,a,t){if(Macro.circleDraw=100,"detailView"===t&&(a=$("#id").val()),""!==a){renderingUtils.freezeBackground();var n="module="+r+"&ruleId="+e+(void 0!==t?"&reqFrom="+t:"")+("detailView"===t||"campView"===t?"&idlist="+a:"");(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Macro.do?step=showMacroExecDialog",type:"POST",data:n,success:function(e){if("error"==e.status&&"401"==e.code){var r=e.details.details;r=r.substring(16,r.length);var a=$("#shownotes");return a.addClass("newPopup p30"),a.html(r),getElemById("shownotes").style.zIndex=21,getElemById("shownotes").style.width="600px",getElemById("shownotes").style.position="absolute",$("#shownotes :button").click((function(){renderingUtils.removeFreezeLayer();var e=$("#shownotes");e.html(""),e.hide()})),renderingUtils.freezeBackground(),a.show(),mailsetCenter("shownotes"),!1}var t=$("#divMacro"),n=t.css("display"),o=$("#popupnew"),l=Handlebars.templates.MacroExecute;e.runAnyWay=e.emailPerm&&e.alertsListSize>0&&e.mailCount<e.limitCount||e.taskPerm&&e.tasksListSize>0||e.updatePerm&&e.updatesListSize>0;var c=l(e);o.html(c).removeClass().addClass("newPopup newInputStyleEle").css({zIndex:30,width:"800px"}),mailsetCenter("popupnew"),t.length&&"block"===n&&(t.hide(),$("#customizedd").hide())},error:function(){if(Lyte.Router.getRouteInstance().transition.target.includes("newForecasts")){setTimeout((function(){_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.migration.general.error"),ltPropWrapperClass:"forecastAlertWrap"}})}),100);var e=document.querySelector("crm-macro");e&&e.component.setData("flag",!1);var r=$("#FreezeLayer");r.length>0&&r.remove()}}})}else renderingUtils.showCustomAlert(I18n.getMsg("crm.macro.alert.selectRecords"))},executeMacro:function(e,r,a,t){var n=crmListView.getObject().cvId;if(customViewObject&&customViewObject.isForecast&&(n=customViewObject.cvid),$("#macExecRunBtn").prop("disabled",!0),$("#macExecCancelBtn").prop("disabled",!0),"null"===a&&crmListView.getObject()&&"potentialpipeline"!==t)a=crmListView.getObject().selectedIds.join(";");else if("null"===a&&void 0!==document.TransferWizardForm.chk){var o=document.TransferWizardForm.chk.length;if(a="",void 0===o){if(!document.TransferWizardForm.chk.checked)return renderingUtils.showCustomAlert('<fmt:message key="crm.alert.select.one"/>'),!1;a=document.TransferWizardForm.chk.value}else if(0!==o){if(0===getNoOfChecked())return renderingUtils.showCustomAlert('<fmt:message key="crm.alert.select.one"/>'),!1;for(var l=0;l<o;l++)document.TransferWizardForm.chk[l].checked&&(a=""===a?document.TransferWizardForm.chk[l].value:a+";"+document.TransferWizardForm.chk[l].value)}}Macro.loadCircle(),Macro.doMacroExecution(e,r,decodeURIComponent(a).split(";"),t,n)},doMacroExecution:function(e,r,a,t,n,o){var l;l=isWFSchedulerUser()&&"detailView"!==t?a.splice(0,a.length):a.splice(0,crmConstants.maxRecOperCnt);var c=csrfParamName+"="+encodeURIComponent(csrfToken);c+="&module="+r+"&idlist="+l.join(";")+"&ruleId="+e+"&cvId="+n;var s=$("#mailRest");s.length>0&&(c+="&mailRest="+s.val()),(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/Macro.do?step=executeMacro",type:"POST",data:c,success:function(l){if(1===a.length&&""===a[0]||a.length<=0){if(isWFSchedulerUser()&&$("#macroFieldUpdate").length>0&&"detailView"!==t&&l.isWFScheduler){var c=Lyte.Router.getRouteInstance().transition.target;if(c&&c.includes("newForecasts")){var s=document.querySelector("crm-forecast-deals-modal");if(s||(s=document.querySelector("crm-performance-deals-modal")),s){clearInterval(Macro.rotationCircle),$(".loadingCircle").fadeOut(100),Macro.circleDraw=100,Macro.drawCir(1),setTimeout((function(){s.component.executeMethod("refresh")}),100);var i=$("#FreezeLayer");i.length>0&&i.remove(),hide("popupnew"),clearInterval(Macro.rotation),clearInterval(Macro.drawCircle)}}var d=l.offloadedRecordsCnt,u=l.wfOffloadedJobid;detailView.currWFOffloadingJobIds.push(u);var m=automationActionsNotificationScheduler.setTimeoutForAutomationActionsOffload(d);return void setTimeout((function(){var e=$("#macroFieldUpdate");e.length>0&&automationActionsNotificationScheduler.showNotificationInProgress(u,e,d)}),m)}o=o>=0?o+l.locked_count:l.locked_count,crmTab.deleteFromCache(r),clearInterval(Macro.rotationCircle),$(".loadingCircle").fadeOut(100),Macro.circleDraw=100,Macro.drawCir(1),setTimeout((function(){var e=Lyte.Router.getRouteInstance().routeName,a=Lyte.Router.getRouteInstance().transition.target;if("detailView"==t&&"canvas"==e)Lyte.Router.getRouteInstance().refresh();else if(void 0!==t&&"dropDown"!==t&&""!==t&&"potentialpipeline"!==t&&"adwordCampSummary"!==t&&"adwordGroupSummary"!==t)reloadCurrentEntityView();else if("adwordCampSummary"===t||"adwordGroupSummary"===t)renderingUtils.removeFreezeLayer(),$("#popupnew").hide();else if(a.includes("newForecasts")){var n=document.querySelector("crm-forecast-deals-modal");n||(n=document.querySelector("crm-performance-deals-modal")),n&&n.component.executeMethod("refresh")}else"list"==e||"canvas"==e||"kanban"==e?o>0?Crm.showLockedRecordCountPopup("Macro",o):crmListView.reloadCurrentListView():""===currCVId&&RefreshDetailsAction(r);var l=$("#FreezeLayer");l.length>0&&l.remove(),hide("popupnew"),clearInterval(Macro.rotation),clearInterval(Macro.drawCircle)}),4500)}else Macro.doMacroExecution(e,r,a,t,n,l.locked_count)},error:function(){if(Lyte.Router.getRouteInstance().transition.target.includes("newForecasts")){clearInterval(Macro.rotationCircle),$(".loadingCircle").fadeOut(100),Macro.circleDraw=100,Macro.drawCir(1);var e=document.querySelector("crm-forecast-deals-modal");e||(e=document.querySelector("crm-performance-deals-modal")),setTimeout((function(){e&&(e.component.executeMethod("refresh"),_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.migration.general.error"),ltPropWrapperClass:"forecastAlertWrap"}}))}),100);var r=$("#FreezeLayer");r.length>0&&r.remove(),hide("popupnew"),clearInterval(Macro.rotation),clearInterval(Macro.drawCircle)}}})},macroSearchFocus:function(e){(e=$(e)).val()===I18n.getMsg("crm.globalsearch.search.title")&&e.val("").css("color","#333")},macroSearchBlur:function(e){""===(e=$(e)).val()&&e.val(I18n.getMsg("crm.globalsearch.search.title")).css("color","#ccc")},bindPerfectScroll:function(){var e=$(".Macro_thisiscontainer").find(".users_listul");e.perfectScrollbar("destroy"),e.perfectScrollbar({wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!0})},perfectScrollbinder:function(e){thirdPartyUtils.unbindPerfectScroll(e),thirdPartyUtils.bindPerfectScroll(e,{wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1}),setTimeout((function(){thirdPartyUtils.bindPerfectScrollUpdate(e)}),200)},loadCircle:function(){var e=-75;$(".runmacro-tickwrap").removeClass("dN"),Macro.rotationCircle=setInterval((function(){var r=e;$(".loadingCircle").css({display:"block"}),$(".circle").css({"-ms-transform":"rotate("+r+"deg)","-webkit-transform":"rotate("+r+"deg)",transform:"rotate("+r+"deg)"}),e+=10}),30)},circleDraw:100};Macro.rotation,Macro.drawCircle,Macro.drawCir=function(e){clearInterval(Macro.rotationCircle);var r=$("#macCir"+e);r&&(Macro.drawCircle=setInterval((function(){var a=parseFloat(150);if(Macro.circleDraw>a)return r.find(".check").attr("class","check checked"),clearInterval(Macro.drawCircle),e<=3&&(Macro.circleDraw=100,Macro.drawCir(e+1)),!1;r.find(".fill").css({"stroke-dasharray":parseFloat(Macro.circleDraw)}),Macro.circleDraw=Macro.circleDraw+parseFloat(.5)}),8))},Macro.showMacroSuggest=function(e,r,a,t,n,o,l,c,s,i,d,u,m){e=$(e);var p=$("#optionsHolder"),g=p.css("display"),h=$("#divMacro"),f=h.css("display"),v=p.length?p.find(".othersView"):$("#cv_"+$("#cvModule_Selector").val()).find(".othersView");if(v.length&&v.find(".othersdownicon").hasClass("ico-arrow-down-solid-small")&&v.trigger("click"),void 0!==o){var w=$("#"+o);if(w.length>0){var M=-1;if(window.event?M=window.event.keyCode:r&&(M=r.which),27===M)return void w.hide()}}var C=a.split(","),x=$("#"+l),k=e.val().trim().toLowerCase(),y=$("#"+n),I=$("#"+C[0]+",#"+C[1]).find(t),S=0;if(I.each((function(e,r){if(r=$(r),void 0!==i&&null==r.attr(i))return!0;var a=void 0!==i&&null!=r.attr(i)?r.attr(i).toLowerCase():u?r.text().toLowerCase():r.html().toLowerCase();if(""==k||-1!=a.indexOf(k)){if(m?r.closest(m).css("display",""):r.css("display","").parent().parent().css("display",""),null!=r.attr("event_row_idx")){var t=currElem.getAttribute("event_row_idx"),n=parseInt(t)-Events.totalUsersCount;$("tr[event_row_idx='"+n+"']").next().css("display","")}y.length>0&&y.hide(),S++,a.trim()===k&&0}else if(m?r.closest(m).hide():r.hide(),null!=r.attr("event_row_idx")){t=currElem.getAttribute("event_row_idx"),n=parseInt(t)-Events.totalUsersCount;$("tr[event_row_idx='"+n+"']").next().css("display","none")}})),d&&"false"!=d){var L=$("#"+C[0]),b=$("#"+C[1]);0===L.find("li:visible").length&&L.parent().hide(),0===b.find("li:visible").length&&b.parent().hide()}0===S?(y.length>0&&y.css("display","inline-block"),void 0!==s&&getElemById(s)&&(getElemById(s).style.display="none")):void 0!==s&&getElemById(s)&&(getElemById(s).style.display=""),x.length>0&&(S<12?x.css({height:"",overflow:"hidden"}):x.css({height:c,overflow:"hidden"})),p.length&&"block"===g&&$L("#divMacro #macroListDIV,#cvlist").scrollTop(1),"lv_left_filter"===a&&$L("#lv_filter_scroll").scrollTop(1),h.length&&"block"===f&&$L("#macroListDIV").scrollTop(1)},Macro.setMacroName=function(e){var r=null;if(window.event?r=window.event.keyCode:e&&(r=e.which),27!==r&&13!==r){var a=$("#createMacroBtn"),t=$("#macroSugstBox").val().trim();""!==t&&0===currSechExtMatCnt?a.html(I18n.getMsg("crm.macro.label.create.macro")+' "'+$ESAPI.encoder().encodeForHTML(t)+'"'):a.html(I18n.getMsg("crm.macro.label.create.macro"))}},Macro.autoSuggest=function(e){e&&featuresAvailable.Macros_Suggest&&Macro.isMacroSupportedModule(e)&&(Macro.canShowAutoSuggest=!0,null!==Macro.autoSuggestHandler&&clearTimeout(Macro.autoSuggestHandler),Macro.autoSuggestHandler=setTimeout((function(){Macro.canShowAutoSuggest=!1}),1e4))},Macro.showSuggest=function(e,r,a){var t,n=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("macrosuggestion")],ResourceConstants.CRM),o=networkUtils.returnDependencyFiles(["macro-suggestion-components.js"],ResourceConstants.CRMClient),l=networkUtils.returnDependencyFiles(["macro-suggestion-common.js","macro-suggestion-model.js"],ResourceConstants.CRMClient);t=!0===Crm.userDetails.RTL_ENABLED?networkUtils.returnDependencyFiles(["crm-macrosuggestions-listview-rtl.css","crm-macrosuggestions-listview.css"],ResourceConstants.CRMClient):networkUtils.returnDependencyFiles(["crm-macrosuggestions-listview.css"],ResourceConstants.CRMClient);var c=n.concat(o).concat(l).concat(t);Lyte.injectResources(c,void 0,(function(){store.findAll("macro_suggestion",{module:moduleRecordMapping[a].api_name,macro_already_available:!1,include_inner_details:"module.display_label,field_updates.field.field_label,field_updates.field.ui_type"}).then((function(t){var n=t?t.length:0;if(n<=0)crmui.showMsgBand("error",I18n.getMsg("crm.security.error.add.user"),1500);else{for(var o=0;o<n;o++){var l=t[o];l.savErrorMsg="",l.isMacroNameValid=!1,l.macroName=""}var c,s=$("#macroSuggestPopup");s.length||(s=$('<div id="macroSuggestPopup" style="display:none;"></div>').appendTo("#show")),c=!!$(r).hasClass("suggestedMacro-btn");var i=document.createElement("crm-macrosuggestions-listview");i.setData({macroSuggestionsList:t,autoSuggest:e,closeFromSuggest:c,module:a}),s.html(i)}}),(function(){crmui.showMsgBand("error",I18n.getMsg("crm.security.error.add.user"),1500)}))})),Crm.client_tracking("MacroAutoSuggest",{operation:"Suggestion Macros OnClick",Place:"Macro"})},Macro.slectCrtMacro=function(e){Crm.trackSpotLightAction("MacroAutoSuggest - Create Macro Click",{Place:"Write My Own1"}),$("#createMacroPopup").hide(),Lyte.Router.transitionTo({route:"crm.settings.section.macro.create",queryParams:{module:e}})},Macro.macrobtn=function(e){var r=new crmRequestPool,a={module:e};r.initiate({action:Crm.getCrmBasePath()+"/Macro.do?step=macroChoice",type:"GET",data:a,success:function(r){if(r.macroLength>0){Crm.trackSpotLightAction("MacroAutoSuggest - Create Macro Click",{Place:"List View"}),$("#show").append('<div class="" id="macroSuggestPopup" style="display:none;"></div>');var a=Handlebars.templates.MacroCreatePopup(r),t=$("#macroSuggestPopup");t.html(a),t.show().find(".zcrm-modal").addClass("zcrm-show"),renderingUtils.freezeBackground()}else{if("PermissionDenied"==r)return void crmui.showMsgBand("error",I18n.getMsg("custmr.prtl.permission.denied.error"),3e3);var n=document.querySelector("crm-forecast-deals-modal");if(n||(n=document.querySelector("crm-performance-deals-modal")),n)$L(".fcMacro")[0].click();else{var o=moduleRecordMapping[e].api_name;Lyte.Router.transitionTo({route:"crm.settings.section.macro.create",queryParams:{module:o}})}}}})},Macro.cancelMacro=function(){$("#createMacroPopup").removeClass("zcrm-show"),renderingUtils.removeFreezeLayer()},Macro.isMacroSupportedModule=function(e){return"Leads"===e||"Contacts"===e||"Potentials"===e||0===e.indexOf("CustomModule")&&parseInt(e.replace("CustomModule",""))<5e3},function(){var e=Handlebars.template,r=Handlebars.templates=Handlebars.templates||{};r.MacroCreatePopup=e({compiler:[7,">= 4.0.0"],main:function(e,r,a,t,n){var o=null!=r?r:{},l=e.escapeExpression;return'<div class="zcrm-modal zcrm-effect" id="createMacroPopup"> <div class="zcrm-content"> <div data-zcqa="macro_newpopup_closeicon" class="fR pR pT25 pR20"> <span class="newPopupCloseIcon svgIcons ico-close-small2 cP op8 dIB" onclick="Macro.cancelMacro()"></span> </div> <div class="popup-model-header crm-heading-font-size crm-font-bold crmHeadingColor">'+l(a.getI18n.call(o,"crm.macro.suggest.createnew.popup.header",{name:"getI18n",hash:{},data:n}))+'</div> <div class="popup-model-content w600" style="max-height:800px"> <div class="crtMacroIn aligncenter mT20"> <div class="dIB"> <div class="fL aligncenter minW200"> <i data-zcqa="shw_suggested_MacroBtn" class="icon_suggestion"  onclick="Macro.showSuggest(\'false\',\'true\',\''+l(a.encodeJS.call(o,null!=r?r.module:r,{name:"encodeJS",hash:{},data:n}))+'\');"></i> <label data-zcqa="shw_suggested_macro_label" class="dB pT10">'+l(a.getI18n.call(o,"crm.macro.suggest.button.suggested.macro",{name:"getI18n",hash:{},data:n}))+'</label> </div> <div class="fL orLine" style="height:120px"> <span>Or</span> </div> <div class="fL aligncenter minW200"> <i data-zcqa="createMacroBtn" class="createMacroBtn icon_fromown" onclick="Macro.slectCrtMacro(\''+l(a.encodeJS.call(o,null!=r?r.module:r,{name:"encodeJS",hash:{},data:n}))+'\')"></i> <label data-zcqa="write_my_own_label" class="dB pT10">'+l(a.getI18n.call(o,"crm.macro.suggest.label.writemyown.macro",{name:"getI18n",hash:{},data:n}))+"</label> </div> </div>  </div> </div> </div> </div>"},useData:!0}),r.MacroExecute=e({1:function(e,r,a,t,n){var o;return' <div id="macroFieldUpdate" class="pB10"> <div class="fL runmacro-tickwrap pR" id="macCir1"> <div class="circle"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="bgfill" fill="none" stroke="#c9c8c8" stroke-width="0.5" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <circle class="loadingCircle" fill="none" stroke="#1ECD97" stroke-width="1" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> </g> </svg> </div> <div class="checkmark pA" style="width:25px;"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="fill" fill="none" stroke="#1ECD97" stroke-width="1.25" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <polyline class="check" fill="none" stroke="#1ECD97" stroke-width="1" stroke-linecap="round" stroke-miterlimit="10" points="11,13, 6,8, 8,6"></polyline> </g> </svg> </div> </div> <div class="lh24 fL pL10 crmBaseColor crm-base-font-size w80_per crm-font-regular"> '+(null!=(o=e.lambda(null!=r?r.updatesAlertStr:r,r))?o:"")+' </div> <div class="cBoth"></div> </div> '},3:function(e,r,a,t,n){var o;return' <div id="macroAlert" class="pB10"> <div class="fL runmacro-tickwrap pR" id="macCir2"> <div class="circle"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="bgfill" fill="none" stroke="#c9c8c8" stroke-width="0.5" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <circle class="loadingCircle" fill="none" stroke="#1ECD97" stroke-width="1" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> </g> </svg> </div> <div class="checkmark pA" style="width:25px;"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="fill" fill="none" stroke="#1ECD97" stroke-width="1.25" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <polyline class="check" fill="none" stroke="#1ECD97" stroke-width="1" stroke-linecap="round" stroke-miterlimit="10" points="11,13, 6,8, 8,6"></polyline> </g> </svg> </div> </div> <div class="fL pL10 lh24 crmBaseColor crm-base-font-size w80_per crm-font-regular"> '+(null!=(o=a.getI18n.call(null!=r?r:{},"crm.macro.execute.sendOneEmail",null!=r?r.alertsAlertStr:r,{name:"getI18n",hash:{},data:n}))?o:"")+' </div> <div class="cBoth"></div> </div> '},5:function(e,r,a,t,n){var o,l=null!=r?r:{};return' <div id="macroTask" class="pB10"> <div class="fL runmacro-tickwrap pR" id="macCir3"> <div class="circle"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="bgfill" fill="none" stroke="#c9c8c8" stroke-width="0.5" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <circle class="loadingCircle" fill="none" stroke="#1ECD97" stroke-width="1" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> </g> </svg> </div> <div class="checkmark pA" style="width:25px;"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" x="0px" y="0px" viewBox="0, 0, 18, 18"> <g transform=""> <circle class="fill" fill="none" stroke="#1ECD97" stroke-width="1.25" stroke-miterlimit="10" cx="9" cy="9" r="8"></circle> <polyline class="check" fill="none" stroke="#1ECD97" stroke-width="1" stroke-linecap="round" stroke-miterlimit="10" points="11,13, 6,8, 8,6"></polyline> </g> </svg> </div> </div> <div class="lh24 fL pL10 crmBaseColor crm-base-font-size w80_per crm-font-regular"> '+(null!=(o=a.if.call(l,a.checkStorage.call(l,{name:"checkStorage",hash:{},data:n}),{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.program(11,n,0),data:n}))?o:"")+' </div> <div class="cBoth"></div> </div> '},6:function(e,r,a,t,n){var o;return" "+(null!=(o=a.ifCond.call(null!=r?r:{},null!=r?r.tasksListSize:r,">",1,{name:"ifCond",hash:{},fn:e.program(7,n,0),inverse:e.program(9,n,0),data:n}))?o:"")+" "},7:function(e,r,a,t,n){var o;return" "+(null!=(o=a.getI18n.call(null!=r?r:{},"crm.macro.execute.storage.assignManyTasks",null!=r?r.tasksAlertStr:r,null!=r?r.tasksAlertStr1:r,{name:"getI18n",hash:{},data:n}))?o:"")+" "},9:function(e,r,a,t,n){var o;return" "+(null!=(o=a.getI18n.call(null!=r?r:{},"crm.macro.execute.storage.assignOneTask",null!=r?r.tasksAlertStr:r,{name:"getI18n",hash:{},data:n}))?o:"")+" "},11:function(e,r,a,t,n){var o;return" "+(null!=(o=a.ifCond.call(null!=r?r:{},null!=r?r.tasksListSize:r,">",1,{name:"ifCond",hash:{},fn:e.program(12,n,0),inverse:e.program(14,n,0),data:n}))?o:"")+" "},12:function(e,r,a,t,n){var o;return" "+(null!=(o=a.getI18n.call(null!=r?r:{},"crm.macro.execute.assignManyTasks",null!=r?r.tasksAlertStr:r,null!=r?r.tasksAlertStr1:r,{name:"getI18n",hash:{},data:n}))?o:"")+" "},14:function(e,r,a,t,n){var o;return" "+(null!=(o=a.getI18n.call(null!=r?r:{},"crm.macro.execute.assignOneTask",null!=r?r.tasksAlertStr:r,{name:"getI18n",hash:{},data:n}))?o:"")+" "},16:function(e,r,a,t,n){var o;return' <div id="macroWarning" class="pB10"> '+(null!=(o=a.each.call(null!=r?r:{},null!=r?r.warningList:r,{name:"each",hash:{},fn:e.program(17,n,0),inverse:e.noop,data:n}))?o:"")+" </div> "},17:function(e,r,a,t,n){return' <div class="svgIcons warning_icon ico-warning-filled dIB fL"></div> <div class="fL pL10 lh24 crmBaseColor crm-base-font-size w80_per crm-font-regular"> '+e.escapeExpression(e.lambda(r,r))+' </div> <div class="cBoth"></div> '},19:function(e,r,a,t,n){var o,l=null!=r?r:{},c=e.escapeExpression;return' <input type="button" data-zcqa="btn_wf_cancel" id="macExecCancelBtn" class="newgraybtn" onclick="closeMacroDialog();" value="'+c(a.getI18n.call(l,"crm.creator.cancelbutton",{name:"getI18n",hash:{},data:n}))+'"></input> <input '+(null!=(o=a.if.call(l,a.checkStorage.call(l,{name:"checkStorage",hash:{},data:n}),{name:"if",hash:{},fn:e.program(20,n,0),inverse:e.noop,data:n}))?o:"")+' data-zcqa="btn_wf_run" type="button" id="macExecRunBtn" value="'+c(a.getI18n.call(l,"crm.button.run",{name:"getI18n",hash:{},data:n}))+'" class="primarybtn mR0" onclick=\'Macro.executeMacro("'+c(a.encodeJS.call(l,null!=(o=null!=r?r.ruleDetails:r)?o[0]:o,{name:"encodeJS",hash:{},data:n}))+'", "'+c(a.encodeJS.call(l,null!=r?r.module:r,{name:"encodeJS",hash:{},data:n}))+'", "'+(null!=(o=a.ifCond.call(l,null!=r?r.idsList:r,"==",null,{name:"ifCond",hash:{},fn:e.program(23,n,0),inverse:e.program(25,n,0),data:n}))?o:"")+'", "'+(null!=(o=a.ifCond.call(l,null!=r?r.reqFrom:r,"==",null,{name:"ifCond",hash:{},fn:e.program(27,n,0),inverse:e.program(29,n,0),data:n}))?o:"")+"\");'/> "},20:function(e,r,a,t,n){var o;return null!=(o=a.ifAllMatch.call(null!=r?r:{},null!=r?r.updatesListSize:r,"<",1,null!=r?r.alertsListSize:r,"<",1,{name:"ifAllMatch",hash:{},fn:e.program(21,n,0),inverse:e.noop,data:n}))?o:""},21:function(e,r,a,t,n){return"disabled"},23:function(e,r,a,t,n){return"null"},25:function(e,r,a,t,n){return e.escapeExpression(e.lambda(null!=r?r.idsList:r,r))},27:function(e,r,a,t,n){return""},29:function(e,r,a,t,n){return e.escapeExpression(e.lambda(null!=r?r.reqFrom:r,r))},31:function(e,r,a,t,n){return' <input type="button" data-zcqa="btn_wf_cancel" id="macExecCancelBtn" class="newgraybtn dIB crm-base-font-size" onclick="closeMacroDialog();" value="'+e.escapeExpression(a.getI18n.call(null!=r?r:{},"crm.nsocial.okay",{name:"getI18n",hash:{},data:n}))+'"></input> '},compiler:[7,">= 4.0.0"],main:function(e,r,a,t,n){var o,l=null!=r?r:{},c=e.escapeExpression;return' <div class="dim pL30 pR40"> <div class="crm-heading-font-size crm-font-bold crmBaseColor mB0 pT20 macropopTitle">'+(null!=(o=a.getI18n.call(l,"crm.macro.execute.label.header",null!=(o=null!=r?r.ruleDetails:r)?o[1]:o,{name:"getI18n",hash:{},data:n}))?o:"")+'<br ></br></div> <div class=" pB0"> <div class="br5 p10 pL0 pT8"> '+(null!=(o=a.ifCondLogic.call(l,null!=r?r.updatesListSize:r,">",0,"&&",null!=r?r.updatePerm:r,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifCondLogic.call(l,null!=r?r.alertsListSize:r,">",0,"&&",null!=r?r.emailPerm:r,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifCondLogic.call(l,null!=r?r.tasksListSize:r,">",0,"&&",null!=r?r.taskPerm:r,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifCond.call(l,null!=r?r.warningListSize:r,">",0,{name:"ifCond",hash:{},fn:e.program(16,n,0),inverse:e.noop,data:n}))?o:"")+' </div> </div> </div> <div align="right" class="pT10 pB30 pL30 pR40" id="macroExecuteBtnLayer"> '+(null!=(o=a.ifAnyMatch.call(l,null!=r?r.updatesListSize:r,"!=",0,null!=r?r.tasksListSize:r,"!=",0,null!=r?r.alertsListSize:r,"!=",0,{name:"ifAnyMatch",hash:{},fn:e.program(19,n,0),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifAllMatch.call(l,null!=r?r.updatesListSize:r,"=",0,null!=r?r.tasksListSize:r,"=",0,null!=r?r.alertsListSize:r,"=",0,{name:"ifAllMatch",hash:{},fn:e.program(31,n,0),inverse:e.noop,data:n}))?o:"")+' </div> <div id="macroExecutingBtnLayer" align="center" class="mT10 dN mB20"><img src="'+c(a.getCrmImageUrl.call(l,"zoho-busy.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" alt="" /> '+c(a.getI18n.call(l,"crm.macro.execute.status.executing",{name:"getI18n",hash:{},data:n}))+' </div> <div id="macroExecutedBtnLayer" class="crm-base-font-size mT10 greenColor pB10 pT5 mB5 dN h20" align="center"> <img src="'+c(a.getCrmImageUrl.call(l,"right_plan.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" alt="" class="pR" style="right:5px;" />'+c(a.getI18n.call(l,"crm.macro.execute.status.executedSuccessfully",{name:"getI18n",hash:{},data:n}))+" </div> "},useData:!0}),r.MacroOptions=e({1:function(e,r,a,t,n,o,l){var c,s=null!=r?r:{};return" "+(null!=(c=a.ifCond.call(s,null!=r?r.totalMacroListMapLength:r,">",10,{name:"ifCond",hash:{},fn:e.program(2,n,0,o,l),inverse:e.noop,data:n}))?c:"")+' <div id="macroListDIV" class="pR" style="max-width: 200px;"> <div class=" w100_per dIB"> <div id="noMatchMacroElem" class="pL10 pT5 pB5 dN crmNotFoundColor noMatchMacro">'+e.escapeExpression(a.getI18n.call(s,"crm.macro.label.noMacroFoundForTheModule",{name:"getI18n",hash:{},data:n}))+'</div> <ul class="p0 m0"> <li class="Macro_dropListMacroSection Macro_HeaderGroup p0"> <ul class="p0 m0" id="ownedmacrosList"> '+(null!=(c=a.each.call(s,null!=r?r.MacroListMap:r,{name:"each",hash:{},fn:e.program(4,n,0,o,l),inverse:e.noop,data:n}))?c:"")+' </ul> </li> </ul> </div> </div> <div class="br_top_border4 mT5 mB5"></div> '},2:function(e,r,a,t,n){var o=null!=r?r:{},l=e.escapeExpression;return' <div class="br_border3 w180 mB5 mT10 mL10 crmNotFoundColor" style="border-top:1px solid var(--br_c0c6cc);"> <div class="pR w100_per"> <input data-zcqa="txt_wf_searchTitle" maxlength="50" type="text" id="macroSugstBox" onkeyup="Macro.showMacroSuggest(this, event, \'ownedmacrosList,sharedmacrosList\', \'li\', \'noMatchMacroElem\', \'divMacro\', \'macroListDIV\', \'250px\', \'mngMacroBtn\'); Macro.setMacroName(event);" class="borderNone fL pL10 h25 crmNotFoundColor" onblur="Macro.macroSearchBlur(this);" onfocus="Macro.macroSearchFocus(this);" style="width:85%;" value="'+l(a.getI18n.call(o,"crm.globalsearch.search.title",{name:"getI18n",hash:{},data:n}))+'"></input> <img src="'+l(a.getCrmImageUrl.call(o,"sear_Ic.png",{name:"getCrmImageUrl",hash:{},data:n}))+'" alt="" class="mT5 pA"/> <div class="cBoth"></div> </div> </div> '},4:function(e,r,a,t,n,o,l){var c;return" "+(null!=(c=a.if.call(null!=r?r:{},null!=l[1]?l[1].reqFromCond:l[1],{name:"if",hash:{},fn:e.program(5,n,0,o,l),inverse:e.program(8,n,0,o,l),data:n}))?c:"")+" "},5:function(e,r,a,t,n,o,l){var c;return" "+(null!=(c=a.each.call(null!=r?r:{},r,{name:"each",hash:{},fn:e.program(6,n,0,o,l),inverse:e.noop,data:n}))?c:"")+" "},6:function(e,r,a,t,n,o,l){var c=e.lambda,s=e.escapeExpression;return' <li  data-zcqa="macroExec_'+s(c(null!=r?r[0]:r,r))+'" title="'+s(c(null!=r?r[0]:r,r))+'" class="aa ellipsistext" onclick="massAction(\'executeMacro\', undefined, \''+s(c(n&&n.key,r))+"', '"+s(c(null!=l[2]?l[2].module:l[2],r))+"','','','','','','',$(this).closest('form'));\">"+s(c(null!=r?r[0]:r,r))+"</li> "},8:function(e,r,a,t,n,o,l){var c;return" "+(null!=(c=a.each.call(null!=r?r:{},r,{name:"each",hash:{},fn:e.program(9,n,0,o,l),inverse:e.noop,data:n}))?c:"")+" "},9:function(e,r,a,t,n,o,l){var c,s=e.lambda,i=e.escapeExpression;return' <li data-zcqa="macroExec_'+i(s(null!=r?r[0]:r,r))+'" title="'+i(s(null!=r?r[0]:r,r))+'" class="aa ellipsistext" onclick="'+(null!=(c=a.ifCond.call(null!=r?r:{},null!=l[2]?l[2].entityId:l[2],"=","",{name:"ifCond",hash:{},fn:e.program(10,n,0,o,l),inverse:e.program(19,n,0,o,l),data:n}))?c:"")+'">'+i(s(null!=r?r[0]:r,r))+"</li> "},10:function(e,r,a,t,n,o,l){var c,s=e.lambda,i=e.escapeExpression,d=null!=r?r:{};return"massAction('executeMacro', undefined, '"+i(s(n&&n.key,r))+"', '"+i(s(null!=l[2]?l[2].module:l[2],r))+"','','','','','','',"+(null!=(c=a.ifEquals.call(d,null!=l[2]?l[2].reqFrom:l[2],"campView",{name:"ifEquals",hash:{},fn:e.program(11,n,0,o,l),inverse:e.program(13,n,0,o,l),data:n}))?c:"")+", "+(null!=(c=a.contains.call(d,'["potentialpipeline","campView"]',null!=l[2]?l[2].reqFrom:l[2],{name:"contains",hash:{},fn:e.program(15,n,0,o,l),inverse:e.program(17,n,0,o,l),data:n}))?c:"")+"); "},11:function(e,r,a,t,n){return"$('#runMacro').closest('form')"},13:function(e,r,a,t,n){return"$(this).closest('form')"},15:function(e,r,a,t,n,o,l){return"'"+e.escapeExpression(e.lambda(null!=l[2]?l[2].reqFrom:l[2],r))+"'"},17:function(e,r,a,t,n){return"''"},19:function(e,r,a,t,n,o,l){var c=e.lambda,s=e.escapeExpression;return"Macro.showMacroExecDialog('"+s(c(n&&n.key,r))+"', '"+s(c(null!=l[2]?l[2].module:l[2],r))+"', '"+s(c(null!=l[2]?l[2].entityId:l[2],r))+"', 'detailView');"},21:function(e,r,a,t,n){var o,l=null!=r?r:{};return' <ul style="padding-top: 2px !important;"> '+(null!=(o=a.ifCond.call(l,null!=r?r.permissions:r,"==",!0,{name:"ifCond",hash:{},fn:e.program(22,n,0),inverse:e.noop,data:n}))?o:"")+" "+(null!=(o=a.ifCond.call(l,null!=r?r.totalMacroListMapLength:r,">",0,{name:"ifCond",hash:{},fn:e.program(24,n,0),inverse:e.noop,data:n}))?o:"")+" </ul> "},22:function(e,r,a,t,n){var o=null!=r?r:{},l=e.escapeExpression;return' <li id="createMacroBtn" data-zcqa="createMacroBtn" class="oA" onclick="Macro.macrobtn(\''+l(a.encodeJS.call(o,null!=r?r.module:r,{name:"encodeJS",hash:{},data:n}))+"');\">"+l(a.getI18n.call(o,"crm.macro.label.create.macro",{name:"getI18n",hash:{},data:n}))+"</li> "},24:function(e,r,a,t,n){var o=e.lambda,l=e.escapeExpression;return' <li id="mngMacroBtn" data-zcqa="mngMacroBtn" data-cid="showMacro" data-params=\'{"module":"'+l(o(null!=r?r.module:r,r))+'","reqFrom":"'+l(o(null!=r?r.reqFromVal:r,r))+"\"}' >"+l(a.getI18n.call(null!=r?r:{},"crm.macro.label.manage.macro",{name:"getI18n",hash:{},data:n}))+"</li> "},26:function(e,r,a,t,n){return' <div id="noMatchMacroElem" data-zcqa="noMatchMacroElem" class="pT5 pB5 crmNotFoundColor noMatchMacro">'+e.escapeExpression(a.getI18n.call(null!=r?r:{},"crm.macro.label.noMacroFoundForTheModule",{name:"getI18n",hash:{},data:n}))+"</div> "},compiler:[7,">= 4.0.0"],main:function(e,r,a,t,n,o,l){var c,s=null!=r?r:{};return(null!=(c=a.ifCond.call(s,null!=r?r.totalMacroListMapLength:r,">",0,{name:"ifCond",hash:{},fn:e.program(1,n,0,o,l),inverse:e.noop,data:n}))?c:"")+" "+(null!=(c=a.ifAnyMatch.call(s,null!=r?r.permissions:r,"==",!0,null!=r?r.totalMacroListMapLength:r,">",0,{name:"ifAnyMatch",hash:{},fn:e.program(21,n,0,o,l),inverse:e.noop,data:n}))?c:"")+" "+(null!=(c=a.ifAllMatch.call(s,null!=r?r.permissions:r,"!=",!0,null!=r?r.totalMacroListMapLength:r,"<=",0,{name:"ifAllMatch",hash:{},fn:e.program(26,n,0,o,l),inverse:e.noop,data:n}))?c:"")},useData:!0,useDepths:!0})}();