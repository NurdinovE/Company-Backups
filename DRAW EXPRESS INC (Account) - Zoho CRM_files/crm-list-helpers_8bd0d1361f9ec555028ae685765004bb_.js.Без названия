Lyte.Component.registerHelper("getActivityIcon",(function(e){return"Events"===e?"EventSmall":"Tasks"===e?"TaskSmall":"Calls_small"})),Lyte.Component.registerHelper("getTagColor",(function(e){var t=e.split("-")[1],n=new Date(e).getFullYear();e&&Utils.isValidDate("YYYY-MM-DD",e,void 0,!0)&&(n=Lyte.registeredMixins["crux-element-validation"].getDateObjectFromString(e,"YYYY-MM-DD").getFullYear());var r=new Date,a=e.split("-")[2];return n>(new Date).getFullYear()?"h_latertask":n<(new Date).getFullYear()?"h_overdue":t>r.getMonth()+1?"h_latertask":t<r.getMonth()+1?"h_overdue":a>r.getDate()?"h_latertask":a<r.getDate()?"h_overdue":"h_todaytask"})),Lyte.Component.registerHelper("getActivityBadgeColor",(function(e){var t=e.split("-")[1],n=$L.moment(e).toDate().getFullYear(),r=$L.moment("").toDate(),a=e.split("-")[2];return n>$L.moment("").toDate().getFullYear()?"newActivityBadgeGreen":n<$L.moment("").toDate().getFullYear()?"newActivityBadgeRed":t>r.getMonth()+1?"newActivityBadgeGreen":t<r.getMonth()+1?"newActivityBadgeRed":a>r.getDate()?"newActivityBadgeGreen":a<r.getDate()?"newActivityBadgeRed":"newActivityBadgeWarn"})),Lyte.Component.registerHelper("getActivityIconClass",(function(e){if(e.$upcoming_activity&&e.$upcoming_activity.date){var t=(e=e.$upcoming_activity.date).split("-")[1],n=$L.moment(e).toDate().getFullYear(),r=$L.moment("").toDate(),a=e.split("-")[2];return n>$L.moment("").toDate().getFullYear()?"h_latertask":n<$L.moment("").toDate().getFullYear()?"zcicn_red_mask":t>r.getMonth()+1?"zcicn_green_mask":t<r.getMonth()+1?"zcicn_red_mask":a>r.getDate()?"zcicn_green_mask":a<r.getDate()?"zcicn_red_mask":"zcicn_sandal_mask"}return"zcicn_black_mask"})),Lyte.Component.registerHelper("getActivityTaskPopupClass",(function(e,t){var n=Lyte.registeredMixins["crm-view-utils"].checkDateWithCurrentDate(e);return"icon"===t?["wq_list_taskRedIcon","wq_list_taskOrangeIcon","wq_list_taskGreenIcon"][n]:["crmNegativeColor","wq_lst_taskdate","crmLabelColor"][n]})),Lyte.Component.registerHelper("getActivityTaskPopupMsg",(function(e){return[I18n.getMsg("Overdue"),I18n.getMsg("Today"),I18n.getMsg("zb.upcoming")][Lyte.registeredMixins["crm-view-utils"].checkDateWithCurrentDate(e)]})),Lyte.Component.registerHelper("getUserFormatDate",(function(e){if(!e)return"";var t=CrmDateUtils.getDateObjectFromString(e,"YYYY-MM-DD",!0),n=Crm.userDetails.DATE_PATTERN;return!n&&parent.Crm.userDetails.DATE_PATTERN&&(n=parent.Crm.userDetails.DATE_PATTERN),n&&(n=n.toUpperCase()),CrmDateUtils.convertDateToUserPattern(t,n,!0)})),Lyte.Component.registerHelper("getModuleNameForIcon",(function(e){return(e="Deals"==e?"Potentials":e)&&e.indexOf("_")>0&&(e=(e=e.split("_"))[0]+e[1]),e?e.slice(0,e.lastIndexOf("s")):void 0})),Lyte.Component.registerHelper("arrayJoin",(function(e,t){return e?e.join(t):void 0})),Lyte.Component.registerHelper("arrayMap",(function(e,t){return e?e.map((function(e){return e[t]})):void 0})),Lyte.Component.registerHelper("isVisitorOnline",(function(e,t){return"object"==typeof CrmTracking&&CrmTracking.isEntityOnline(e,t)})),Lyte.Component.registerHelper("tagAvailable",(function(e){var t=e.custom_view.name;if("Activities"==e.module_name){return!!(["My Calls","Incoming Calls","My Incoming Calls","My Outgoing Calls","Outgoing Calls","My Todays Scheduled+Overdue Calls","Todays Scheduled+Overdue Calls","Todays Scheduled Calls","Scheduled Calls","Cancelled Calls","All Calls","Attended Calls","Overdue Calls","Unattended Calls","My Unattended Calls","My Scheduled Calls","My Todays Scheduled Calls","My Cancelled Calls","My Overdue Calls","My Attended Calls"].contains(t)||["My Events","All Events","Past Events","Open Events","This Week Events","Todays Events","My Meetings","All Meetings","Past Meetings","Open Meetings","This Week Meetings","Todays Meetings"].contains(t)||["My Open Tasks","All Tasks","Open Tasks","Closed Tasks","Overdue Tasks","Todays Tasks","Tomorrow's Tasks","Today+Overdue Tasks","Next7days+Overdue Tasks"].contains(t))}return!0})),Lyte.Component.registerHelper("checkViewAvailability",(function(e,t,n){var r=t.kanban_view_supported&&!crmTab.isZBCustomModule(t.module_name)&&!crmTab.isZSCustomModule(t.module_name)||"Activities"==t.module_name||"Visits"==t.module_name||"Tasks"==t.module_name||"Calls"==t.module_name,a=t.customized_view&&-1==="Activities,Visits,Tasks,Events,Calls".indexOf(t.module_name)&&!crmTab.isZBCustomModule(t.module_name)&&!crmTab.isZSCustomModule(t.module_name)&&crmTab.isLinkingModule(t.module_name);if(a=-1==="Activities,Visits".indexOf(t.module_name)&&!crmTab.isZBCustomModule(t.module_name)&&!crmTab.isZSCustomModule(t.module_name),"kanban"===e&&!n){if(r){if("Activities"==t.module_name||"Tasks"==t.module_name||"Calls"==t.module_name||"Potentials"==t.module_name||"Visits"==t.module_name||"Deals"==t.module_name)return!0;var i=Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM;return"team_based"===moduleRecordMapping[t.module_name].access_type&&(i=Crm.userDetails.permissions[Crm.splittedPermission.Crm_Implied_Customize_Zoho_CRM+t.module_name]),!(!t.group_by_field_available&&!i)}return!1}return"chart"!==e||n?("customized"!==e||n)&&("card"!==e&&"table"!==e||n)?"prediction"===e?!(!Crm.userDetails.isDealPredictionEnabled||"Potentials"!=t.module_name&&"Deals"!=t.module_name):"timeline_view"!==e||n?void 0:!(!featuresAvailable.TIMELINE_VIEW_ENABLED||["Appointments","Calls","Events","Services","Visits"].contains(t.module_name)||crmTab.isZBCustomModule(t.module_name)||crmTab.isZSCustomModule(t.module_name)):a:Crm.userDetails.isChartViewEnabled&&t.chart_view_supported&&!crmTab.isZBCustomModule(t.module_name)&&!crmTab.isZSCustomModule(t.module_name)})),Lyte.Component.registerHelper("isEditList",(function(e,t,n,r){var a=!!moduleRecordMapping[this.component.data.module]&&"team_based"===moduleRecordMapping[this.component.data.module].access_type?Crm.userDetails.permissions["Crm_Implied_Manage_CustomViews_"+this.component.data.module]:Crm.userDetails.permissions.Crm_Implied_Manage_CustomViews;return!(e&&-1!=e.indexOf("CONVERTEDVIEWS")&&(t||!n)||!a)&&("Activities"!==r||!Crm.isActivitySplitDone)})),Lyte.Component.registerHelper("getNumberValueForView",(function(e,t,n,r,a,i,o){if(null!=e){var s=t.data_type;return("formula"===s&&"currency"===t.formula.return_type||"rollup_summary"===s&&"currency"===t.rollup_summary.return_type)&&(s="currency"),this.component.getNumberValueForView(e,s,n,void 0,void 0,void 0,void 0,r,a,i,!0,o)}return e})),Lyte.Component.registerHelper("showSelectAll",(function(e){return!!(1!=e.fromIndex||e.totalCount>=e.toIndex||!e.totalCount&&e.showHideSelectAllDiv||e.body&&e.body[e.toIndex])})),Lyte.Component.registerHelper("isOverdueFlag",(function(e){if(null!=e){var t=new Date(e);if((new Date).getTime()-t.getTime()>0)return!0}return!1})),Lyte.Component.registerHelper("isOverDue",(function(e,t){if("Closed"!=e&&t){var n=new Date(t),r=(new Date).getTime()-n.getTime();if(r>0){var a=[],i=r/36e5,o="";if((i=Math.floor(i))>24){var s=i/24;i%=24,o=(s=Math.floor(s))+" Days ",a.push(o)}return o=o+i+" Hours",0==a.length&&a.push(o),a}}})),Lyte.Component.registerHelper("getTimeInUserTZ",(function(e,t){var n=[];if(!e||e.length<1)return null;var r=new Date(e),a=r.getTime()+6e4*r.getTimezoneOffset(),i=new Date(a-6e4*Utils.getTimezoneOffset());if("dueDate"==t||"createdTime"==t){var o=new Date,s=o.getTime()+6e4*o.getTimezoneOffset(),l=new Date(s-6e4*Utils.getTimezoneOffset());if(l.getFullYear()==i.getFullYear()&&l.getMonth()==i.getMonth())switch(l.getDate()-i.getDate()){case 0:n.push("Today");break;case 1:n.push("Yesterday");break;case-1:n.push("Tomorrow")}}return 0==n.length&&n.push(Utils.getDateInUserDatePattern(i,!0)),n})),Lyte.Component.registerHelper("getDateTimeForView",(function(e){return e&&-1!=e.indexOf(":")?e.substring(0,e.split(":")[0].lastIndexOf(" ")):""})),Lyte.Component.registerHelper("getFinalTotalCount",(function(e,t,n,r,a){return void 0===e||0==e?(n-1)*r+t+1:e})),Lyte.Component.registerHelper("getLink",(function(e,t,n){return Lyte.Router.getURL({route:e,dynamicParams:t,queryParams:n})})),Lyte.Component.registerHelper("getDynamicArray",(function(){return Array.from(arguments)})),Lyte.Component.registerHelper("getQueryParamObj",(function(e){return JSON.parse(e)})),Lyte.Component.registerHelper("getDateInUsrLocaleFormat",(function(e,t){if(t||!e)return e;var n="MMM D, YYYY";function r(e,t){if(e&&Utils.isValidDate("yyyy-mm-dd",e)){e=e.replace(/[+-]\d{2}:\d{2}/,"");var n=Lyte.registeredMixins["crux-element-validation"],r=/^(.*)T/.exec(e);r&&(e=r[1]);var a=n.getDateInUserDatePattern(n.getDateObjectFromString(e,"YYYY-MM-DD"),t||Crm.userDetails.DATE_PATTERN);if(a){var i=a.slice(0,3);return a.replace(i,I18n.getMsg(i))}}return e}var a=r(e,n),i=!1;(e&&Utils.isValidDate("YYYY-MM-DD",e,void 0,!0)?Lyte.registeredMixins["crux-element-validation"].getDateObjectFromString(e,"YYYY-MM-DD").getFullYear():$L.moment(e).toDate().getFullYear())===$L.moment().toDate().getFullYear()&&(n=n.split(",")[0],i=!0);a=r(e,n).toUpperCase();var o=e.split("-")[1],s=new Date;return a.split(" ")[1]==s.getDate()&&i&&o==s.getMonth()+1?I18n.getMsg("crm.livedesk.pot.today"):a})),Lyte.Component.registerHelper("isEngLocale",(function(){var e=Crm.userDetails;return!Crm.userDetails.CLIENT_ACCOUNT&&(!(!e||"en_US"!==e.LOCALE&&"en_GB"!==e.LOCALE)||void 0)})),Lyte.Component.registerHelper("checkValueIsInArray",(function(e,t){return-1!==e.indexOf(t)})),Lyte.Component.registerHelper("formatDecimalValue",(function(e){return commonUtils.formatDecimalValue(e)})),Lyte.Component.registerHelper("addClassForBulkUnblock",(function(e){return e&&e.name&&"bulk_email_unblock"===e.name?"bulkEmailUnblock":""})),Lyte.Component.registerHelper("isEmailBlocked",(function(e){return EmailUnblocking.checkIsBlockedSelcted(e)?"":"hide"})),Lyte.Component.registerHelper("addHideClassForEmailUnblock",(function(e){if("bulk_email_unblock"===e){return EmailUnblocking.checkIsBlockedSelcted(!0)||EmailUnblocking.checkIsBlockedSelcted(!1)?"":"hide"}return""}));
