$L.prototype.extend({cruxTextareaBindResize:function(e){var t=this[0];if(!t.getData("ltPropDisabled")&&!t.getData("ltPropReadonly")){function a(){if(t.cxResized)return!1;var a=e&&e.height?e.height.split("px")[0]:71;t.querySelector("textarea").style.height=a+"px","vertical"==t.getData("ltPropDirection")&&t.querySelector(".lyteLabel")&&(a+=t.querySelector(".lyteLabel").offsetHeight),t.style.height=a+2+"px"}t.setMethods({onResizeEnd:function(){t.cxResized=!0}}),Lyte.Component.addLyteEventListener(t,"click",a),Lyte.Component.addLyteEventListener(t,"keyup",(function(e){(e&&"Tab"!=e.key||!e)&&a()})),t.getData("ltPropValue")&&a(),t.ltProp("textAreaResize",{vertical:!0,horizontal:!1})}}}),Lyte.Mixin.register("crux-user-utils",{excludeIds:function(e,t,a,o){for(var i=this.getData("cxPropPrimaryKey"),r=[],s=this.getData("cxPropExclude"),l=t.length,n=a;n<l&&r.length!=o;n++)-1==s.indexOf(t[n][i])?r.push(t[n]):Lyte.arrayUtils(this.getData("currentlyExcludedArray"),"push",t[n]);return this.setData("currentPos",n),this.newConstructedBatch&&this.newConstructedBatch(r),r},constructArray:function(e,t){var a,o=this.getData("cxPropNetworkData");a=this.getData("localData"),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||("userLookup"!=e||"userLookup"==e&&0==this.getData("selectedList")?1!=this.getData("pageNo")&&0!=this.getData("pageNo")||this.setData("noMoreRecords",!0):"userLookup"==e&&1==this.getData("selectedList")&&1==this.getData("pageNo")&&this.setData("noMoreRecords",!0));var i=this.getData("cxPropRecords"),r=this.getData("currentPos");if("userLookup"==e||"lookupComponent"==e)if(0==this.getData("selectedList")||null==this.getData("selectedList"))var s=this.getData("systemData");else var l=this.getData("addedItems");else s=this.getData("systemData");if(r<a.length)i=a.length-r>i?i:a.length-r,"userLookup"==e||"lookupComponent"==e?(0==this.getData("selectedList")||null==this.getData("selectedList")?0===r?this.setData("systemData",this.excludeIds.call(this,e,a,r,i)):Lyte.arrayUtils(s,"push",this.excludeIds.call(this,e,a,r,i)):0===r?this.setData("addedItems",this.excludeIds.call(this,e,a,r,i)):Lyte.arrayUtils(l,"push",this.excludeIds.call(this,e,a,r,i)),this.setData("multiScroll",!1)):(0===r?this.setData("systemData",this.excludeIds.call(this,e,a,r,i)):Lyte.arrayUtils(s,"push",this.excludeIds.call(this,e,a,r,i)),this.setData("multiScroll",!1),this.setData("scrollLoading",!1)),this.updatedList&&this.updatedList();else if(t)this.setData("multiScroll",!1);else if(this.getData("noMoreRecords")){if(this.beforeNewRequest&&this.beforeNewRequest(),!this.getData("cxPropCustomRequest"))return this.getData("isSearch")?store.triggerAction(o.cxPropModuleName,"search",this.queryParams()).then(function(t){""===this.getData("cxPropInputValue")||this.getData("cxPropInputValue")?0!=this.getData("cxPropInputValue").length&&this.setReqData(t,e):this.setReqData(t,e)}.bind(this),function(t){this.errorOnSearch&&("userLookup"!=e&&(this.setData("searchLoading",!1),this.setData("scrollLoading",!1),this.setData("systemData",[])),this.errorOnSearch(t)),(0,console.error)(t),this.setData("multiScroll",!1)}.bind(this)):store.findAll(o.cxPropModuleName,this.queryParams(),o.cxPropCacheQuery,o.cxPropDataCache,o.cxPropCustomData).then(function(t){this.setReqData(t,e)}.bind(this),function(e){this.errorOnRequest&&this.errorOnRequest(e),(0,console.error)(e),this.setData("multiScroll",!1)}.bind(this));if(this.customReqFunc){var n=this.queryParams(),c=this.customReqFunc(this.getData("cxPropNetworkData"),n,this.getData("isSearch"),this.getData("cxPropInputValue"));c&&c.then&&Promise.resolve(c).then(function(t){this.getData("isSearch")&&this.getData("cxPropInputValue")?0!=this.getData("cxPropInputValue").length&&this.setReqData(t,e):this.setReqData(t,e)}.bind(this),function(){this.data.isSearch?this.errorOnSearch&&this.errorOnSearch():this.errorOnRequest&&this.errorOnRequest()}.bind(this))}}else this.setData("multiScroll",!1);return!0},setReqData:function(e,t){var a=e,o=!0,i=this.getData("cxPropNetworkData");if(this.getData("isSearch"))var r=store.serializer[i.cxPropModuleName].varPayloadKey;"userLookup"!==t&&"lookupComponent"!==t||(this.getData("selectedList")?this.getData("addedItems"):this.getData("systemData")),this.setData("multiScroll",!1),this.getData("isSearch")?e&&e.constructor==Object?e=e[r]:Array.isArray(e)&&0==e.length&&(o=!1):e&&null!=e[i.cxPropModuleName]?e=e[i.cxPropModuleName]:e&&null!=e[store.serializer[i.cxPropModuleName].varPayloadKey]&&(e=e[store.serializer[i.cxPropModuleName].varPayloadKey]),(null==e||e&&!Array.isArray(e)&&null==e[i.cxPropModuleName]||Array.isArray(e)&&0==e.length||e[0]&&e[0].$&&e[0].$.isError)&&(o=!1),e&&o?(null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||this.setData("pageNo",this.getData("pageNo")+1),this.setData("noUsersAvilabel",!1),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||"userLookup"==t&&this.getData("selectedList")&&null!=this.getData("cxPropReqForSelected")&&null!=this.getData("cxPropReqForSelected")&&0==this.getData("cxPropReqForSelected")&&this.setData("pageNo",0),Lyte.arrayUtils(this.getData("localData"),"concat",e),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||("userLookup"==t&&0==this.getData("selectedList")||"userLookup"!=t?e.length<this.getData("cxPropPerPage")&&this.setData("noMoreRecords",!1):"userLookup"==t&&1==this.getData("selectedList")&&(this.getData("cxPropReqForSelected")?e.length<this.getData("cxPropPerPage")&&this.setData("noMoreRecords",!1):e.length<this.getData("cxPropSelectedPerPage")&&this.setData("noMoreRecords",!1))),this.constructArray.call(this,t,!0)):(0==this.getData("currentPos")?(("userLookup"===t||"lookupComponent"===t)&&this.getData("selectedList")?this.setData("addedItems",[]):this.setData("systemData",[]),this.setData("noUsersAvilabel",!0)):("userLookup"===t||"lookupComponent"===t)&&this.getData("selectedList")?Lyte.arrayUtils(this.data.addedItems,"push",[]):Lyte.arrayUtils(this.data.systemData,"push",[]),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||this.setData("noMoreRecords",!1)),this.loadMoreData&&(null==this.getData("cxPropCustomPagination")||null==this.getData("cxPropCustomPagination")||0==this.getData("cxPropCustomPagination")?this.loadMoreData():this.loadMoreData(a))},queryParams:function(){var e=JSON.parse(JSON.stringify(this.getData("cxPropQueryParams")||{}));if(this.setCriteria)e=this.setCriteria();return null==e&&(e=JSON.parse(JSON.stringify(this.getData("cxPropQueryParams")||{}))),null!=this.getData("cxPropCustomPagination")&&null!=this.getData("cxPropCustomPagination")&&0!=this.getData("cxPropCustomPagination")||(0!=this.getData("cxPropPerPage")&&(e.per_page=this.getData("cxPropPerPage")),0!=this.getData("pageNo")&&(e.page=this.getData("pageNo"))),e},bodyScroll:function(e,t){if(this.getData("stopScrolling"))this.setData("stopScrolling",!1);else{var a=this.getData("cxPropNetworkData"),o=t.target,i=o.scrollHeight,r=o.offsetHeight;i!=r&&i-10<=Math.ceil(r)+Math.ceil(o.scrollTop)&&(this.getData("isSearch")||this.getData("preventCacheReset")||(a.cxPropCacheQuery=!1,a.cxPropDataCache=!1,this.setData("cxPropNetworkData",a)),this.getData("multiScroll")||("userLookup"==e?this.getData("noMoreRecords")&&(this.getData("selectedList")?this.setData("searchingSelectedScroll",!0):this.setData("searchingScroll",!0)):this.getData("noMoreRecords")?this.setData("scrollLoading",!0):this.setData("scrollLoading",!1),this.setData("multiScroll",!0),this.constructArray.call(this,e,!1)))}},keyup:function(e,t,a){clearTimeout(this._timeout),this._timeout=setTimeout(function(){this.performKeyUpSearch&&this.performKeyUpSearch(a,this.getData("cxPropInputValue"));var o=this.getData("cxPropInputValue"),i=this.getData("cxPropMinLength");this.perform_input_Trim&&(o=o.trim()),this.setData("currentSearchValue",o),this.getData("noUsersAvilabel")&&null!=this.getData("oldSearchValue")&&null!=this.getData("oldSearchValue")&&""!=this.getData("oldSearchValue")&&(-1==this.getData("currentSearchValue").indexOf(this.getData("oldSearchValue"))||this.getData("currentSearchValue").indexOf(this.getData("oldSearchValue"))>0)&&(this.setData("noUsersAvilabel",!1),this.setData("noMoreRecords",!0)),"userLookup"==e&&(o.length>i-1?this.setData("searchingSearch",!0):this.setData("searchingSearch",!1)),o.length>=i?(null!=t&&(this.setData("stopScrolling",!0),0==t.scrollTop?this.setData("stopScrolling",!1):t.scrollTop=0),this.setData("multipleBack",!1),1!=this.getData("isSearch")&&this.setData("noMoreRecords",!0),this.setData("isSearch",!0),"userLookup"!=e&&(this.setData("currentPos",0),this.setData("localData",[]),0!=this.getData("pageNo")&&this.setData("pageNo",1)),"userLookup"==e?this.getData("noUsersAvilabel")?(this.search_rejected&&this.search_rejected(),this.setData("searchingSearch",!1)):this.filterObserver.call(this,"search",a):(o.length>i-1?this.setData("searchLoading",!0):this.setData("searchLoading",!1),1==this.getData("noUsersAvilabel")?this.setData("searchLoading",!1):this.constructArray.call(this,e,!1))):"userLookup"!=e?this.setData("searchLoading",!1):this.setData("searchingSearch",!1),0!=this.getData("multipleBack")&&null!=this.getData("multipleBack")||(null==this.getData("multipleBack")&&o.length<this.getData("cxPropMinLength")?this.setData("multipleBack",!0):0==o.length&&(this.endKeyUpSearch&&this.endKeyUpSearch(),this.setData("isSearch",!1),"userLookup"==e?(this.setData("noMoreRecords",!0),this.filterObserver.call(this,"removeAll",a)):(this.setData("noMoreRecords",!0),this.setData("currentPos",0),this.setData("localData",[]),0!=this.getData("pageNo")&&this.setData("pageNo",1),this.constructArray.call(this,e,!1)),this.setData("multipleBack",!0))),this.setData("oldSearchValue",this.getData("currentSearchValue"))}.bind(this),300)},escapeString:function(e){var t=e.replace(/\(/g,"\\(").replace(/\)/g,"\\)");return t=t.trim()},cxPropMaxLimitMessageBox:function(){var e=this.getData("messageBoxType");e||(e="warning");var t=this.getData("cxPropMaxLimitMsg");t||(t=_cruxUtils.getI18n("crux.comboBox.max.limit",this.getData("cxPropMaxLimit"),_cruxUtils.getI18n("crm.label.users")));var a=this.getData("cxPropMaxLimitDuration");a||(a="2000"),_cruxUtils.showCustomMessage({params:{ltPropType:e,ltPropMessage:t,ltPropDuration:a,ltPropShow:!0}})},setSearchDataForSuggestion:function(e){e=e.replace(/^([\W|_|\s]+)/g,"").replace(/([\W|_|\s]+)$/g,"");var t=function(t){return t.split(/[@&(+)_\-'.=: ]/).find((function(t){return t.toLowerCase().startsWith(e)}))},a=this.getData("cxPropSuggestion").users,o=a.length,r=[];e=e.toLowerCase();for(i=0;i<o;i++)(t(a[i].full_name)||t(a[i].email))&&r.push(a[i]);this.setData("suggestedUsers",r)},getDefaultFilters:function(){return[{id:"AllUsers",category:_cruxUtils.getI18n("crm.globalsearch.option.all")},{id:"ActiveUsers",category:_cruxUtils.getI18n("webform.status.Active")},{id:"DeactiveUsers",category:_cruxUtils.getI18n("Inactive")},{id:"ConfirmedUsers",category:_cruxUtils.getI18n("Confirmed")},{id:"NotConfirmedUsers",category:_cruxUtils.getI18n("crm.user.component.unconfirmed")},{id:"DeletedUsers",category:_cruxUtils.getI18n("DeletedUser")},{id:"ActiveConfirmedUsers",category:_cruxUtils.getI18n("webform.status.Active")+" "+_cruxUtils.getI18n("Confirmed")},{id:"AdminUsers",category:_cruxUtils.getI18n("crm.feed.group.admin")},{id:"ActiveConfirmedAdmins",category:_cruxUtils.getI18n("crm.user.label.active.confirmed.admins")},{id:"CurrentUser",category:_cruxUtils.getI18n("crm.ln.lable.current")}]}}),Lyte.Component.register("crux-table-component",{_template:'<template tag-name="crux-table-component"> <template is="if" value="{{cxPropExpress}}"><template case="true"> <lyte-expresstable lt-prop-aria="{{cxPropAria}}" lt-prop-content="{{content}}" lt-prop-role="{{cxPropRole}}" lt-prop-height="{{cxPropHeight}}" lt-prop-header-label-key="field_label" lt-prop-header="{{header}}" lt-prop-fixed-table-scroll="true" lt-prop-yield="true" id="{{cxPropTableId}}" lt-prop-dual-resize="{{cxPropDualResize}}" onscroll="{{action(\'scroll\',event)}}" lt-prop-scrollbar-option="{&quot;showOn&quot; : &quot;{{cxPropShowScrollOn}}&quot;, &quot;containerClass&quot; : &quot;scrollbarClass&quot;}" on-resize-select="{{method(\'resizeSelect\')}}" on-resize-end="{{method(\'resizeEnd\')}}" class="pR {{cxPropTableClass}}" before-set-fix-table-column-width="{{method(\'beforeSetFixTableColumnWidth\')}}" after-set-fix-table-column-width="{{method(\'afterSetFixTableColumnWidth\')}}" lt-prop-prevent-content-observer="true" lt-prop-prevent-width="{{cxPropPreventWidth}}" lt-prop-sticky-table="{{cxPropStickyTable}}" onmouseover="{{action(\'hoverOnTable\',index,true)}}" onmouseout="{{action(\'hoverOnTable\',index)}}"> <template is="registerYield" yield-name="headerYield" class="tablecomponent1 tableBdrCollapse tablecomponent"> <lyte-exptable-tr id="{{cxPropHeaderRowId}}"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <template is="if" value="{{cxPropHeaderCellPrefixYield}}"><template case="true"><lyte-yield yield-name="headerCellPrefixYield" field-obj="{{field}}"></lyte-yield></template></template> <template is="if" value="{{field.cxCheckbox}}"><template case="true"> <lyte-exptable-th resize="{{cxPropResizeCheckbox}}" fixed="{{cxPropFixCheckbox}}"> <lyte-checkbox></lyte-checkbox> </lyte-exptable-th> </template><template case="false"><template is="if" value="{{expHandlers(field.yield,\'==\',true)}}"><template case="true"> <lyte-exptable-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}} cxPropTh{{index}} {{if(ifEquals(field.id,intPinnedColumn),\'cxTableLastPinnedColumn\')}}" data-zcqa="{{field[cxPropZcqaSelector]}}" onmouseover="{{action(\'hoverOnTh\',index,true)}}" onmouseout="{{action(\'hoverOnTh\',index)}}"> <lyte-yield yield-name="header-{{field.yieldName}}"></lyte-yield> </lyte-exptable-th> </template><template case="false"> <lyte-exptable-th resize="{{field.cxPropResize}}" class="{{cxPropColumnCellClass}} {{field.cxPropClass}} cxSortQuery cxPropTh{{index}} {{if(ifEquals(field.id,intPinnedColumn),\'cxTableLastPinnedColumn\')}}" id="{{field[cxPropHeaderIdSelector]}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" data-zcqa="{{field[cxPropZcqaSelector]}}" onmouseover="{{action(\'hoverOnTh\',index,true)}}" onmouseout="{{action(\'hoverOnTh\',index)}}"> <lyte-text tabindex="0" class="{{cruxGetTableTextClass(cxPropEnableSort,cxPropShowSortIcon)}}" lt-prop-tooltip-config="{{stringify(cxPropHeaderTooltipConfig)}}" lt-prop-value="{{field[cxPropLabelSelector]}}" onclick="{{action(\'sort\',field)}}" lt-prop-tooltip-class="{{cxPropHeaderTooltipClass}}"></lyte-text> <template is="if" value="{{expHandlers(expHandlers(expHandlers(field.api_name,\'==\',cxPropSortedColumn),\'||\',expHandlers(field.id,\'==\',cxPropSortedColumn)),\'&amp;&amp;\',cxPropShowSortIcon)}}"><template case="true"> <span class="cxTableStarLabel" id="sorted_column_{{field.id}}" data-param="{&quot;fieldid&quot;:&quot;{{field.id}}&quot;}">*</span> </template></template> <template is="if" value="{{expHandlers(expHandlers(cxPropNewListView,\'&amp;&amp;\',cxPropIsAlphaSearchShown),\'&amp;&amp;\',cxPropModuleDisplayField[cxPropModule])}}"><template case="true"> <template is="if" value="{{cruxContains(cxPropModuleDisplayField[cxPropModule],field.api_name,cxPropModuleDisplayField[cxPropModule].length)}}"><template case="true"> <span><lyte-yield yield-name="header-alpha-search" field-name="{{field.api_name}}"></lyte-yield></span> </template></template></template></template> <template is="if" value="{{cxPropShowSortIcon}}"><template case="true"> <span tabindex="0" title="Column options" id="cxTableSortIcon_{{cxPropId}}" class="cxTableSortIcon" data-zcqa="sorticon_{{field[cxPropZcqaSelector]}}" onclick=" {{action(\'sortIconClick\',field)}}"></span> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(field.api_name,\'==\',cxPropSortedColumn),\'||\',expHandlers(field.id,\'==\',cxPropSortedColumn))}}"><template case="true"> <span id="sorted_column_{{field.id}}" title="{{field.field_label}}" tabindex="0" class="cxTableSortIconNew cxTableColumnSort_{{cxPropSortedOrder}}" data-param="{&quot;fieldid&quot;:&quot;{{field.id}}&quot;}"></span> </template><template case="false"> <template is="if" value="{{expHandlers(cxPropNewListView,\'!\')}}"><template case="true"> <span class="cx_sortIconPlaceholder dIB mL5 cxVam"></span> </template></template></template></template></template></template> </lyte-exptable-th> </template></template></template></template> </template> </lyte-exptable-tr> </template> <template is="registerYield" yield-name="contentYield" class="tableBdrCollapse tablecomponent2" id="{{cxPropBodyId}}"> <template is="if" value="{{cxPropContent.length}}"><template case="true"><template is="if" value="{{showLoadingUp}}"><template case="true"> <lyte-exptable-tr class="cxTableEmptyRow cxTableUpRow"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <div class="content-animated-line zcrm-contentloading" style="height: 10px;"> </div> </lyte-exptable-td> </template> </lyte-exptable-tr> </template></template><template is="for" items="{{content}}" item="row" index="contentIndex" unbound="{{cxPropDataBind}}"> <lyte-exptable-tr id="{{row.id}}" onclick="{{action(\'onRowClick\',row,event)}}" onmouseover="{{action(\'onMouseOver\',row.id,this)}}" onmouseout="{{action(\'onMouseOut\',row.id,this)}}" style="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowStyle)}}" data-zcqa="{{if(cxPropZcqaWithId,concat(cxPropZcqaWithId,row.id),cxPropRowZcqa)}}" class="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowClass)}} {{if(row.hideRecord,\'cruxHideRow\',\'\')}} {{row.cxPropClass}}"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index" unbound="{{cxPropDataBind}}"> <template is="if" value="{{field.cxCheckbox}}"><template case="true"> <lyte-exptable-td fixed="{{cxPropFixCheckbox}}"><lyte-checkbox></lyte-checkbox></lyte-exptable-td> </template><template case="false"><template is="if" value="{{expHandlers(field.yield,\'||\',field.yieldName)}}"><template case="true"> <lyte-exptable-td style="{{field.style}}" fixed="{{field.fixed}}" width="{{field.width}}" class="{{field.cxPropClass}} {{cxPropColumnCellClass}} {{if(ifEquals(field.id,intPinnedColumn),\'cxTableLastPinnedColumn\')}}"> <lyte-yield yield-name="body-{{field.yieldName}}" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}"></lyte-yield> </lyte-exptable-td> </template><template case="false"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}} {{if(ifEquals(field.cxTypeMapping,\'multi-picklist\'),\'wspaceNor \',\'\')}} {{if(ifEquals(field.id,intPinnedColumn),\'cxTableLastPinnedColumn\')}}" style="{{field.style}}"> <template is="if" value="{{cxPropCellPrefixYield}}"><template case="true"><lyte-yield yield-name="cellPrefixYield" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}"></lyte-yield></template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;tag&quot;),\'&amp;&amp;\',expHandlers(row[field.api_name].length,\'!=\',0)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;user&quot;),\'&amp;&amp;\',row[field.api_name])),\'||\',expHandlers(field.cxTypeMapping,\'==\',&quot;number&quot;)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;picklist&quot;),\'&amp;&amp;\',field.enable_colour_code))}}"><template case="true"> <template is="component" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-value="{{row[field.api_name]}}" cx-prop-field="{{field}}" cx-prop-iso-code="{{row.Currency}}" cx-prop-exchange-rate="{{row.Exchange_Rate}}" cx-prop-exchange-rate-finance="{{row.ExchangeRate}}" cx-prop-home-currency="{{row.$home_converted_currency[field.api_name]}}" on-show-more-tags="{{method(\'tagsShowMore\')}}" cx-prop-formatted-currency="{{row.$formatted_currency[field.api_name]}}" cx-prop-clip-mode="{{cxPropClipMode}}" cx-prop-width="{{if(field.tagWidth,field.tagWidth,field.width)}}" cx-prop-tooltip="{{if(field.cxPropTooltip,field.cxPropTooltip,if(cxPropTooltip,cxPropTooltip,\'\'))}}" cx-prop-tooltip-props="{{cxPropTooltipProps}}" cx-prop-show-business-card="{{cxPropShowBusinessCard}}" cx-prop-masking-properties="{{field.cxPropMaskingProperties}}" cx-prop-is-color-code-enabled="{{field.enable_colour_code}}" cx-prop-user-detail-view-path="{{cxPropUserDetailViewPath}}"></template> </template><template case="false"> {{unescape(getCruxTableValue(field,row,cxPropModule,cxPropTooltip,cxPropTooltipProps,cxPropLookupProperties,cxPropPhoneIconTooltip,undefined,undefined,cxPropTwitterUrl,cxPhoneProperties))}} </template></template> <template is="if" value="{{expHandlers(cxPropCellSuffixYield,\'||\',field.cxPropCellSuffixYield)}}"><template case="true"><lyte-yield yield-name="cellSuffixYield" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}"></lyte-yield></template></template> </lyte-exptable-td> </template></template></template></template> </template> </lyte-exptable-tr> </template> <template is="if" value="{{showLoadingDown}}"><template case="true"> <lyte-exptable-tr class="cxTableEmptyRow cxTableDownRow dN"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <div class="cxListViewLazyLoad"> <div class="cxListViewLazyLoadRunner"></div> </div> </lyte-exptable-td> </template> </lyte-exptable-tr> </template></template> </template><template case="false"> <lyte-exptable-tr class="cxTableEmptyRow"> <template is="for" items="{{ltPropTableHeader}}" item="field" index="index"> <lyte-exptable-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <template is="if" value="{{cxPropShowLoading}}"><template case="true"> <div class="cxListViewLazyLoad"> <div class="cxListViewLazyLoadRunner"></div> </div> </template></template> </lyte-exptable-td> </template> </lyte-exptable-tr> </template></template> </template> </lyte-expresstable> </template><template case="false"><template is="if" value="{{expHandlers(content.length,\'||\',expHandlers(cxPropHideHeaderOnNoContent,\'!\'))}}"><template case="true"> <lyte-table lt-prop-aria="{{cxPropAria}}" lt-prop-yield="true" id="{{cxPropTableId}}" lt-prop-role="{{cxPropRole}}" lt-prop-width="{{cxPropTableWidth}}" lt-prop-dual-resize="{{cxPropDualResize}}" style="height : {{cxPropHeight}}; position: relative; overflow:hidden" onscroll="{{action(\'scroll\',event)}}" lt-prop-scrollbar-option="{&quot;showOn&quot; : &quot;{{cxPropShowScrollOn}}&quot;, &quot;containerClass&quot; : &quot;scrollbarClass&quot;}" on-resize-end="{{method(\'resizeEnd\')}}" class="cxCommonTable {{cxPropTableClass}}" onmouseover="{{action(\'hoverOnTable\',index,true)}}" onmouseout="{{action(\'hoverOnTable\',index)}}"> <template is="if" value="{{cxPropShowFilterIcon}}"><template case="true"> <div class="cxTableFilterIcons filterIcons cxTableHeaderIcons"> <div data-zcqa="{{cxPropFilterProperties.zcqa}}" class="dIB cxTableHeaderFilterIcon {{if(cxPropShowFilter,\'cxTableHeaderFilterOpenedIcon\')}}" onclick="{{action(\'toggleFilter\')}}" lt-prop-title="{{cxPropFilterProperties.title}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}"></div> </div> </template></template> <template is="registerYield" yield-name="yield"> <lyte-table-structure class="cruxTableStructure"> <template is="if" value="{{expHandlers(expHandlers(cxPropHideHeaderOnNoContent,\'&amp;&amp;\',expHandlers(content.length,\'!\')),\'!\')}}"><template case="true"> <lyte-thead class="tablecomponent"> <lyte-tr id="{{cxPropHeaderRowId}}"> <template is="for" items="{{header}}" item="field" index="index"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}} {{if(negate(field.yield),cxPropColumnCellClass,\'\')}}" data-zcqa="{{field[cxPropZcqaSelector]}}" id="{{field[cxPropHeaderIdSelector]}}" onclick="{{action(\'sort\',field)}}"> <template is="if" value="{{cxPropHeaderCellPrefixYield}}"><template case="true"><lyte-yield yield-name="headerCellPrefixYield" field-obj="{{field}}"></lyte-yield></template></template><template is="if" value="{{expHandlers(field.yield,\'==\',true)}}"><template case="true"><lyte-yield yield-name="header-{{field.yieldName}}"></lyte-yield> </template><template case="false"> <span class="cxHeaderWrapper"> <span class="cxThFieldSortEnabled {{if(cruxAnd(field.sortable,cxPropEnableFieldSort,expHandlers(cxPropShowSortIcon,\'!\')),\'cxCP\',\'\')}} " tabindex="0"> <lyte-text lt-prop-value="{{field[cxPropLabelSelector]}}" class="cxTableHeadingElem {{if(cxPropShowSortIcon,\'cxSkipFocusable\')}}"></lyte-text> <template is="if" value="{{expHandlers(expHandlers(cxPropShowSortIcon,\'!\'),\'&amp;&amp;\',expHandlers(field.api_name,\'==\',cxPropSortedColumn))}}"><template case="true"> <span id="sorted_column_{{field.id}}" title="{{field.field_label}}" class="cxTableSortIconNew cxTableColumnSort_{{cxPropSortedOrder}}" data-param="{&quot;fieldid&quot; : &quot;{{field.id}}&quot;}"></span> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(field.api_name,\'==\',cxPropSortedColumn),\'||\',expHandlers(field.id,\'==\',cxPropSortedColumn)),\'&amp;&amp;\',cxPropShowSortIcon)}}"><template case="true"> <span class="cxTableStarLabel" id="sorted_column_{{field.id}}" data-param="{&quot;fieldid&quot;:&quot;{{field.id}}&quot;}">*</span> </template></template> </span> <template is="if" value="{{expHandlers(cxPropIsAlphaSearchShown,\'&amp;&amp;\',cxPropModuleDisplayField[cxPropModule])}}"><template case="true"><template is="if" value="{{cruxContains(cxPropModuleDisplayField[cxPropModule],field.api_name)}}"><template case="true"> <span class="cxSfAlphaSearchYeild"><lyte-yield yield-name="header-alpha-search" field-name="{{field.api_name}}"></lyte-yield></span> </template></template></template></template> <template is="if" value="{{expHandlers(expHandlers(field.tooltip,\'&amp;&amp;\',expHandlers(field.tooltip.name,\'==\',&quot;Info Icon&quot;)),\'&amp;&amp;\',field.tooltip.value)}}"><template case="true"> <div class="cxSubformInfoIcon" lt-prop-title="{{field.tooltip.value}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;top&quot;}"></div> </template></template> </span> <template is="if" value="{{expHandlers(cxPropShowSortIcon,\'&amp;&amp;\',field.sortable)}}"><template case="true"> <span tabindex="0" title="Column options" class="cxTableSortIcon {{if(expHandlers(cxPropEnableFieldSort,\'!\'),\'pointerEventsNone\')}}" data-zcqa="{{cxPropSortZcqaPrefix}}_{{field[cxPropZcqaSelector]}}_sort" onclick="{{action(\'sortIconClick\',field)}}"></span> </template></template> </template></template> </lyte-th> </template> </lyte-tr> <lyte-yield yield-name="row-1" class="lyteRowCopy" style="display: table-row;background: #f2f2f2;"></lyte-yield> <template is="if" value="{{cxPropFilterComponent}}"><template case="true"> <template is="component" component-name="{{cxPropFilterComponent}}" cx-prop-show-filter="{{cxPropShowFilter}}" cx-prop-display-fields="{{header}}" cx-prop-comparator="{{cxPropComparator}}" apply-filter="{{method(\'applyFilter\')}}" cx-prop-module-name="{{cxPropModule}}" cx-prop-show-clear="{{cxPropFilterShowClear}}" clear-filter="{{method(\'clearFilter\')}}" set-lookup-filter-conditions="{{method(\'setLookupFilterConditionsCall\')}}" class="cxTableLookupFilterComponent lyteRowCopy" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}"></template> </template></template> </lyte-thead> </template></template> <lyte-tbody class="tablecomponent2" id="{{cxPropBodyId}}"> <template is="if" value="{{content.length}}"><template case="true"> <template is="for" items="{{content}}" item="row" index="contentIndex" unbound="{{cxPropDataBind}}"> <template is="if" value="{{lyteViewPort(cruxOr(row.disableViewPort,expHandlers(cxPropViewPortLoading,\'!\')))}}"><template case="true"><lyte-tr class="cxSubformTdLoadingWrapper {{row.cxPropClass}}"> <template is="for" items="{{header}}" item="field" index="index" unbound="lyteFastRender"> <lyte-td class="cxLoaderHorTd" style="{{field.style}}"> <span class="cxPlaceholderLoader"></span> <span class="dN">{{if(row[field.api_name].name,row[field.api_name].name,row[field.api_name])}}<template is="if" value="{{expHandlers(cxPropCellSuffixYield,\'||\',field.cxPropCellSuffixYield)}}"><template case="true"><lyte-yield yield-name="cellSuffixYield" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}" view-port="{{if(true,true,false)}}"></lyte-yield></template></template></span> </lyte-td> </template> </lyte-tr></template><template case="false"><lyte-tr id="{{row.id}}" onclick="{{action(\'onRowClick\',row,event)}}" onmouseover="{{action(\'onMouseOver\',row.id,this)}}" onmouseleave="{{action(\'onMouseOut\',row.id,this)}}" style="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowStyle)}}" data-zcqa="{{if(cxPropZcqaWithId,concat(cxPropZcqaWithId,row.id),cxPropRowZcqa)}}" class="{{if(cruxContains(cxPropSelectedRows,row.id,cxPropSelectedRows.length),cxPropSelectedRowClass)}} {{row.cxPropClass}} {{if(cruxAnd(ifEquals(cxPropAjaxEditId,row.id),cxPropAjaxEditId),if(cxPropFreezeRow,\'cxSubformRowEditMode cxSubformRowFreeze\',\'cxSubformRowEditMode\'))}}"> <template is="for" items="{{header}}" item="field" index="index" unbound="{{cxPropDataBind}}"> <template is="if" value="{{expHandlers(cxPropAllRowsEditable,\'||\',expHandlers(expHandlers(cxPropAjaxEditId,\'!==\',undefined),\'&amp;&amp;\',expHandlers(cxPropAjaxEditId,\'===\',row.id)))}}"><template case="true"> <lyte-td class="{{field.cxPropClass}} {{if(ifEquals(field.yieldName,\'ajaxActions\'),\'cxTableStickycolumn\')}}" style="{{field.style}}" data-zcqa="{{if(cxPropTableId,concat(\'value_\',cxPropTableId,\'_\',if(cxPropCellZcqaWithRowNo,concat(field.field_label,\'_\',expHandlers(contentIndex,\'+\',1)),field.field_label)),concat(\'value_\',if(cxPropCellZcqaWithRowNo,concat(field.field_label,\'_\',expHandlers(contentIndex,\'+\',1)),field.field_label)))}}"> <lyte-yield yield-name="edit-yield" field-obj="{{field}}" record-obj="{{row}}" index-val="{{contentIndex}}"></lyte-yield></lyte-td> </template><template case="false"> <template is="if" value="{{expHandlers(field.yield,\'||\',field.yieldName)}}"><template case="true"> <lyte-td style="{{field.style}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" class="{{field.cxPropClass}} {{cxPropColumnCellClass}}" data-zcqa="{{if(cxPropTableId,concat(\'value_\',cxPropTableId,\'_\',if(cxPropCellZcqaWithRowNo,concat(field.field_label,\'_\',expHandlers(contentIndex,\'+\',1)),field.field_label)),concat(\'value_\',if(cxPropCellZcqaWithRowNo,concat(field.field_label,\'_\',expHandlers(contentIndex,\'+\',1)),field.field_label)))}}"> <lyte-yield yield-name="body-{{field.yieldName}}" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}"></lyte-yield> </lyte-td> </template><template case="false"> <lyte-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}} {{if(ifEquals(field.cxTypeMapping,\'multi-picklist\'),\'wspaceNor \',\'\')}}" style="{{field.style}}" data-zcqa="{{if(cxPropTableId,concat(\'value_\',cxPropTableId,\'_\',if(cxPropCellZcqaWithRowNo,concat(field.field_label,\'_\',expHandlers(contentIndex,\'+\',1)),field.field_label)),concat(\'value_\',if(cxPropCellZcqaWithRowNo,concat(field.field_label,\'_\',expHandlers(contentIndex,\'+\',1)),field.field_label)))}}"> <template is="if" value="{{expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;lookup&quot;),\'&amp;&amp;\',row[field.api_name])}}"><template case="true"> <crux-lookup-component cx-prop-field="{{field}}" cx-prop-route-name="{{cxPropLookupProperties.routeName}}" cx-prop-value="{{if(row[field.api_name].name,row[field.api_name].name,row[field.api_name])}}" lookup-id="{{row[field.api_name].id}}" cx-prop-zcqa="{{cxPropLookupProperties.zcqa}}" cx-prop-module="{{if(expHandlers(cxPropLookupProperties[field.api_name],\'&amp;&amp;\',cxPropLookupProperties[field.api_name].module),cxPropLookupProperties[field.api_name].module,cxPropLookupProperties.module)}}" cx-prop-dynamic-params="{{getTableLookupProperty(cxPropLookupProperties,row,field,\'dynamicParams\')}}" cx-prop-query-params="{{getTableLookupProperty(cxPropLookupProperties,row,field,\'queryParams\')}}" cx-prop-id="{{cxPropLookupProperties.id}}" cx-prop-transition-data="{{if(expHandlers(cxPropLookupProperties[field.api_name],\'&amp;&amp;\',cxPropLookupProperties[field.api_name].transitionData),cxPropLookupProperties[field.api_name].transitionData,cxPropLookupProperties.transitionData)}}" cx-prop-target="{{if(expHandlers(cxPropLookupProperties[field.api_name],\'&amp;&amp;\',cxPropLookupProperties[field.api_name].target),cxPropLookupProperties[field.api_name].target,cxPropLookupProperties.target)}}" cx-prop-icon-class="{{if(expHandlers(cxPropLookupProperties[field.api_name],\'&amp;&amp;\',cxPropLookupProperties[field.api_name].iconClass),cxPropLookupProperties[field.api_name].iconClass,cxPropLookupProperties.iconClass)}}" cx-prop-show-bc="{{if(cxPropLookupProperties,if(expHandlers(cxPropLookupProperties[field.api_name],\'&amp;&amp;\',expHandlers(cxPropLookupProperties[field.api_name].showBc,\'!=\',undefined)),cxPropLookupProperties[field.api_name].showBc,if(expHandlers(cxPropLookupProperties.showBc,\'!=\',undefined),cxPropLookupProperties.showBc,true)),true)}}" cx-prop-hide-icon-for-view="{{if(expHandlers(cxPropLookupProperties[field.api_name],\'&amp;&amp;\',cxPropLookupProperties[field.api_name].hideIconForView),cxPropLookupProperties[field.api_name].hideIconForView,cxPropLookupProperties.hideIconForView)}}" on-lookup-hover-fetch-bc-data="{{method(\'onLookupHoverFetchBcDataPopup\')}}" cx-prop-hover-callback="{{cxPropLookupProperties.hoverCallback}}"></crux-lookup-component> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;tag&quot;),\'&amp;&amp;\',expHandlers(row[field.api_name].length,\'!=\',0)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;user&quot;),\'&amp;&amp;\',row[field.api_name])),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;picklist&quot;),\'&amp;&amp;\',field.enable_colour_code)),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',&quot;number&quot;),\'&amp;&amp;\',expHandlers(cxPropNumberProperties,\'!\'))),\'||\',expHandlers(expHandlers(field.cxTypeMapping,\'==\',\'text-area\'),\'&amp;&amp;\',expHandlers(cxPropClipMode,\'||\',cxPropTextareaProperties.lineClamp))),\'||\',expHandlers(field.cxTypeMapping,\'==\',\'image\'))}}"><template case="true"> <template is="component" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-value="{{getCruxTableValue1(row,field)}}" cx-prop-field="{{field}}" cx-prop-iso-code="{{row.Currency}}" cx-prop-exchange-rate="{{row.Exchange_Rate}}" cx-prop-exchange-rate-finance="{{row.ExchangeRate}}" cx-prop-home-currency="{{row.$home_converted_currency[field.api_name]}}" on-show-more-tags="{{method(\'tagsShowMore\')}}" cx-prop-formatted-currency="{{row.$formatted_currency[field.api_name]}}" cx-prop-clip-mode="{{cxPropClipMode}}" cx-prop-popover-class="{{cxPropTextareaProperties.popoverProperties.class}}" cx-prop-popover-height="{{cxPropTextareaProperties.popoverProperties.height}}" cx-prop-popover-width="{{cxPropTextareaProperties.popoverProperties.width}}" cx-prop-width="{{if(field.tagWidth,field.tagWidth,field.width)}}" cx-prop-tooltip="{{if(field.cxPropTooltip,field.cxPropTooltip,if(cxPropTooltip,cxPropTooltip,\'\'))}}" cx-prop-tooltip-props="{{cxPropTooltipProps}}" cx-prop-show-business-card="{{cxPropShowBusinessCard}}" cx-prop-masking-properties="{{field.cxPropMaskingProperties}}" cx-prop-is-color-code-enabled="{{field.enable_colour_code}}" cx-prop-user-detail-view-path="{{cxPropUserDetailViewPath}}" cx-prop-line-clamp="{{cxPropTextareaProperties.lineClamp}}" cx-prop-highlight-url="{{cxPropTextareaProperties.highlightUrl}}" on-show-less="{{method(\'showLess\')}}" cx-prop-minified="{{cxPropImageProperties.minified}}" cx-prop-type="{{cxPropImageProperties.type}}" on-expand-image-view="{{method(\'expandImageView\')}}" on-crop-success="{{method(\'cropSuccess\')}}" on-preview-close="{{method(\'previewClose\')}}"></template> </template><template case="false"> {{unescape(getCruxTableValue(field,row,cxPropModule,cxPropTooltip,cxPropTooltipProps,cxPropLookupProperties,cxPropPhoneIconTooltip,cxPropNumberProperties,cxPropTextareaProperties,cxPropTwitterUrl,cxPhoneProperties))}} </template></template></template></template> <template is="if" value="{{expHandlers(cxPropCellSuffixYield,\'||\',field.cxPropCellSuffixYield)}}"><template case="true"><lyte-yield yield-name="cellSuffixYield" record-obj="{{row}}" field-obj="{{field}}" index-val="{{contentIndex}}"></lyte-yield></template></template> </lyte-td> </template></template> </template></template> </template> </lyte-tr></template></template> </template> </template></template> <template is="if" value="{{cxPropShowLoading}}"><template case="true"> <lyte-tr class="cxTableEmptyRow"> <template is="for" items="{{header}}" item="field" index="index"> <lyte-td class="{{cxPropColumnCellClass}} {{field.cxPropClass}}" style="{{field.style}}"> <template is="if" value="{{cxPropShowLoading}}"><template case="true"> <div class="cxListViewLazyLoad"> <div class="cxListViewLazyLoadRunner"></div> </div> </template></template> </lyte-td> </template> </lyte-tr> </template></template> </lyte-tbody> </lyte-table-structure> </template> </lyte-table> </template></template></template></template> <template is="if" value="{{expHandlers(cxPropShowNoRecordsMessage,\'||\',expHandlers(expHandlers(expHandlers(cxPropContent.length,\'!\'),\'&amp;&amp;\',expHandlers(cxPropShowLoading,\'!\')),\'||\',showNoRecord))}}"><template case="true"> <div class="{{if(cxPropNoContentClass,cxPropNoContentClass,\'cxTableCompNoResults p30 cxAlignCenter\')}}" data-zcqa="{{cxPropNoRecordsZcqa}}">{{cxPropNoRecordsMessage}}</div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"insertYield",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:[{type:"helper",value:{name:"cruxContains",args:["cxPropSelectedRows","row.id","cxPropSelectedRows.length"]}},"cxPropSelectedRowStyle"]}}}},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'height : '","cxPropHeight","'; position: relative; overflow:hidden'"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"registerYield",position:[1,3],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"insertYield",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"insertYield",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"for",position:[0,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"text",position:[1,3,0]},{type:"attr",position:[1,3,2]},{type:"if",position:[1,3,2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0],attr:{style:{name:"style",helperInfo:{name:"if",args:[{type:"helper",value:{name:"cruxContains",args:["cxPropSelectedRows","row.id","cxPropSelectedRows.length"]}},"cxPropSelectedRowStyle"]}}}},{type:"attr",position:[0,1]},{type:"for",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[0]}]}},default:{}}]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}],_observedAttributes:["cxPropExpress","cxPropHeader","cxPropContent","cxPropYieldForPrefix","cxPropYieldForSuffix","cxPropLabelSelector","cxPropHeaderRowId","cxPropFilterComponent","cxPropShowFilter","cxPropFilterShowClear","cxPropDualResize","cxPropHideHeaderOnNoContent","cxPropTableId","cxPropSortColumns","cxPropSortedColumn","cxPropSortedOrder","cxPropBodyId","cxPropNoRecordsMessage","cxPropNoRecordsZcqa","cxPropColumnCellClass","cxPropSelectedRows","cxPropSelectedRowStyle","cxPropFieldTypeMapping","cxPropFieldTypeMappingSelector","header","headerFields","cxPropHeight","content","cxPropEnableBodyScroll","cxPropZcqaSelector","cxPropRowZcqa","cxPropModule","nextRender","new","cxPropDisplayRowNumber","cxPropTableClass","cxPropPrefixYields","lyteUnbound","cxPropSuffixYields","cxPropDataBind","cxPropHeaderIdSelector","cxPropSelectedRowClass","showLoadingDown","showLoadingUp","cxPropHeaderYield","beingSorted","options","cxPropShowSortDropdown","cxPropMaxcharacter","cxPropCheckboxPosition","cxPropResizeCheckbox","cxPropFixCheckbox","cxPropModuleDisplayField","cxPropNewListView","cxPropIsAlphaSearchShown","cxPropPreventWidth","cxPropClipMode","cxPropStickyTable","cxPropTooltip","cxPropTooltipProps","beingResized","cxPropHeaderTooltipConfig","cxPropHeaderTooltipClass","cxPropShowScrollOn","telephonyEnabled","zpbEnabled","cxPropEnableSort","cxPropNoContentClass","cxPropEnableFieldSort","cxPropZcqaWithId","cxPropShowBusinessCard","cxPropShowLoading","cxPropShowSortIcon","mouseOverTable","cxPropLookupProperties","cxPropShowFilterIcon","cxPropDefaultFields","cxPropFreezeRow","cxPropAllRowsEditable","cxPropTableWidth","cxPropPhoneIconTooltip","cxPropRenderOnlyViewportRecords","cxPropCurrency","cxPropExchangeRate","cxPropNumberProperties","cxPropUserDetailViewPath","cxPropCellSuffixYield","cxPropUserDetailViewPath","cxPropScrollRecordCount","cxPropFormulaMapping","cxPropViewPortLoading","cxPropCellPrefixYield","cxPropTextareaProperties","cxPropFilterProperties","cxPropCellZcqaWithRowNo","cxPropHeaderCellPrefixYield","cxPropDateProperties","cxPropDatetimeProperties","cxPropComparator","cxPropImageProperties","cxPropTwitterUrl","cxPropShowNoRecordsMessage","cxPropRole","cxPropAria","cxPhoneProperties"],data:function(){return{cxPropExpress:Lyte.attr("boolean",{default:!1}),cxPropHeader:Lyte.attr("array"),cxPropContent:Lyte.attr("array",{default:[]}),cxPropYieldForPrefix:Lyte.attr("boolean",{default:!1}),cxPropYieldForSuffix:Lyte.attr("boolean",{default:!1}),cxPropLabelSelector:Lyte.attr("string",{default:"field_label"}),cxPropHeaderRowId:Lyte.attr("string"),cxPropFilterComponent:Lyte.attr("string",{default:""}),cxPropShowFilter:Lyte.attr("boolean",{default:!1}),cxPropFilterShowClear:Lyte.attr("boolean",{default:!1}),cxPropDualResize:Lyte.attr("boolean",{default:!1}),cxPropHideHeaderOnNoContent:Lyte.attr("boolean",{default:!1}),cxPropTableId:Lyte.attr("string"),cxPropSortColumns:Lyte.attr("boolean"),cxPropSortedColumn:Lyte.attr("string"),cxPropSortedOrder:Lyte.attr("string"),cxPropBodyId:Lyte.attr("string"),cxPropNoRecordsMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.no.data.found")}),cxPropNoRecordsZcqa:Lyte.attr("string"),cxPropColumnCellClass:Lyte.attr("string"),cxPropSelectedRows:Lyte.attr("array",{default:[]}),cxPropSelectedRowStyle:Lyte.attr("string"),cxPropFieldTypeMapping:Lyte.attr("object",{default:{}}),cxPropFieldTypeMappingSelector:Lyte.attr("string",{default:"ui_type"}),header:Lyte.attr("array"),headerFields:Lyte.attr("array"),cxPropHeight:Lyte.attr("string"),content:Lyte.attr("array",{default:[]}),cxPropEnableBodyScroll:Lyte.attr("boolean",{default:!0}),cxPropZcqaSelector:Lyte.attr("string",{default:"field_label"}),cxPropRowZcqa:Lyte.attr("string"),cxPropModule:Lyte.attr("string"),nextRender:Lyte.attr("number",{default:5}),new:Lyte.attr("boolean",{default:!1}),cxPropDisplayRowNumber:Lyte.attr("number",{default:1}),cxPropTableClass:Lyte.attr("string",{default:""}),cxPropPrefixYields:Lyte.attr("array",{default:[]}),lyteUnbound:Lyte.attr("boolean",{default:!1}),cxPropSuffixYields:Lyte.attr("array",{default:[]}),cxPropDataBind:Lyte.attr("string",{default:"false"}),cxPropHeaderIdSelector:Lyte.attr("string",{default:"id"}),cxPropSelectedRowClass:Lyte.attr("string"),showLoadingDown:Lyte.attr("boolean",{default:!1}),showLoadingUp:Lyte.attr("boolean",{default:!1}),cxPropHeaderYield:Lyte.attr("object"),beingSorted:Lyte.attr("string"),options:Lyte.attr("array"),cxPropShowSortDropdown:Lyte.attr("boolean",{default:!0}),cxPropMaxcharacter:Lyte.attr("number",{default:0}),cxPropCheckboxPosition:Lyte.attr("number",{default:-1}),cxPropResizeCheckbox:Lyte.attr("boolean",{default:!1}),cxPropFixCheckbox:Lyte.attr("string",{default:"enable"}),cxPropModuleDisplayField:Lyte.attr("object",{default:{}}),cxPropNewListView:Lyte.attr("boolean",{default:!1}),cxPropIsAlphaSearchShown:Lyte.attr("boolean",{default:!1}),cxPropPreventWidth:Lyte.attr("boolean",{default:!1}),cxPropClipMode:Lyte.attr("boolean",{default:!1}),cxPropStickyTable:Lyte.attr("boolean"),cxPropTooltip:Lyte.attr("boolean",{default:!1}),cxPropTooltipProps:Lyte.attr("object",{default:{}}),beingResized:Lyte.attr("boolean",{default:!1}),cxPropHeaderTooltipConfig:Lyte.attr("object",{default:{position:"bottom"}}),cxPropHeaderTooltipClass:Lyte.attr("string"),cxPropShowScrollOn:Lyte.attr("string",{default:"hover"}),telephonyEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.TELEPHONY_ENABLED}),zpbEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.ZPBENABLED}),cxPropEnableSort:Lyte.attr("boolean",{default:!0}),cxPropNoContentClass:Lyte.attr("string"),cxPropEnableFieldSort:Lyte.attr("boolean",{default:!0}),cxPropZcqaWithId:Lyte.attr("string"),cxPropShowBusinessCard:Lyte.attr("boolean",{default:!0}),cxPropShowLoading:Lyte.attr("boolean",{default:!1}),cxPropShowSortIcon:Lyte.attr("boolean",{default:!1}),mouseOverTable:Lyte.attr("boolean"),cxPropLookupProperties:Lyte.attr("object",{default:{routeName:"crm.tab.module.entity.detail"}}),cxPropShowFilterIcon:Lyte.attr("boolean",{default:!1}),cxPropDefaultFields:Lyte.attr("object"),cxPropFreezeRow:Lyte.attr("boolean",{default:!1}),cxPropAllRowsEditable:Lyte.attr("boolean",{default:!1}),cxPropTableWidth:Lyte.attr("string",{default:"100%"}),cxPropPhoneIconTooltip:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.phoneNo.Link.Title")}),cxPropRenderOnlyViewportRecords:Lyte.attr("boolean",{default:!1}),cxPropCurrency:Lyte.attr("string"),cxPropExchangeRate:Lyte.attr("number"),cxPropNumberProperties:Lyte.attr("object"),cxPropUserDetailViewPath:Lyte.attr("string",{default:"undefined"!=typeof Crm&&Crm.getCrmBasePath()&&-1!=Crm.getCrmBasePath().indexOf("crm")?Crm.getCrmBasePath()+"/settings/users/":""}),cxPropCellSuffixYield:Lyte.attr("boolean",{default:!1}),cxPropUserDetailViewPath:Lyte.attr("string",{default:"undefined"!=typeof Crm&&Crm.getCrmBasePath()&&-1!=Crm.getCrmBasePath().indexOf("crm")?Crm.getCrmBasePath()+"/settings/users/":""}),cxPropScrollRecordCount:Lyte.attr("number"),cxPropFormulaMapping:Lyte.attr("object",{default:{currency:"number",text:"text",longinteger:"number",boolean:"boolean",datetime:"date-time",date:"date",double:"number",decimal:"number",integer:"number"}}),cxPropViewPortLoading:Lyte.attr("boolean",{default:!1}),cxPropCellPrefixYield:Lyte.attr("boolean",{default:!1}),cxPropTextareaProperties:Lyte.attr("object",{default:{popoverProperties:{},highlightUrl:!1}}),cxPropFilterProperties:Lyte.attr("object",{default:{}}),cxPropCellZcqaWithRowNo:Lyte.attr("boolean",{default:!1}),cxPropHeaderCellPrefixYield:Lyte.attr("boolean",{default:!1}),cxPropDateProperties:Lyte.attr("object"),cxPropDatetimeProperties:Lyte.attr("object"),cxPropComparator:Lyte.attr("boolean",{default:!0}),cxPropImageProperties:Lyte.attr("object"),cxPropTwitterUrl:Lyte.attr("string",{default:"undefined"!=typeof RebrandLinkUtil?RebrandLinkUtil.getProperty("TW_URL"):""}),cxPropShowNoRecordsMessage:Lyte.attr("boolean",{default:!1}),cxPropRole:Lyte.attr("string",{default:"grid"}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPhoneProperties:Lyte.attr("object")}},isSelected:function(){return 0==window.getSelection().isCollapsed},actions:{sort:function(e){this.data.cxPropShowSortIcon||this.sortFn(e)},sortIconClick:function(e){this.sortFn(e)},onRowClick:function(e,t){if(this.isSelected()||t.target.classList.contains("cruxPreventClick"))return!1;this.throwEvent("on-body-row-click",e,t)},onMouseOver:function(e,t){this.throwEvent("on-mouse-over",e,t)},onMouseOut:function(e,t){this.throwEvent("on-mouse-out",e,t)},scroll:function(e){var t=e.target;if(!this.getData("beingResized"))if(this.getMethods("onScroll")&&this.executeMethod("onScroll"),this.getData("new"))this.fetchNextDataNew(t);else if(this.moreContent&&t.scrollHeight-300<=Math.ceil(t.offsetHeight)+Math.ceil(t.scrollTop)){this.scrollTop=t.scrollTop,this.moreContent=!1;var a=this.getData("cxPropContent").slice(this.rendered,this.getData("nextRender")+this.rendered);a&&a.length?(Lyte.arrayUtils(this.getData("content"),"push",a),this.rendered+=a.length,this.moreContent=!0,this.scrollTable(),this.getMethods("onScrollRecordsHaveBeenRendered")&&this.executeMethod("onScrollRecordsHaveBeenRendered")):this.getMethods("onScrollFetchMoreRecords")&&this.executeMethod("onScrollFetchMoreRecords",this.rendered).then(function(e){e&&e.length?(Lyte.arrayUtils(this.getData("content"),"push",e),this.rendered+=e.length,this.moreContent=!0,this.scrollTable()):this.moreContent=!1,this.getMethods("onScrollRecordsHaveBeenRendered")&&this.executeMethod("onScrollRecordsHaveBeenRendered")}.bind(this))}},getOnMouseDown:function(e){"LYTE-TABLEHEAD-RESIZE"===e.target.tagName&&$L(e.target).closest("lyte-th").addClass("resizeStart")},hoverOnTh:function(e,t){var a=this.$node.querySelector(".cxPropTh"+(e-1));a&&(t?a.classList.add("nLThHover"):a.classList.remove("nLThHover"))},phoneClick:function(e,t){Lyte.registeredMixins["crux-element-validation"].phoneClick(e[t.api_name],e.id,this.data.cxPropModule,e[moduleRecordMapping[this.data.cxPropModule].display_field.api_name])},stopEvent:function(){event.preventDefault()},hoverOnTable:function(e,t){this.setData("mouseOverTable",t)},toggleFilter:function(){this.throwEvent("toggle-filter")}},sortFn:function(e){if(this.isSelected())return!1;clearTimeout(this.sortTimer);var t=event;this.sortTimer=setTimeout(function(){if(this.beingResized)return clearTimeout(this.sortTimer),!1;this.getData("cxPropShowSortDropdown")?1==this.getData("cxPropSortColumns")&&this.throwEvent("on-sort",e,t):this.triggerSortClick(e,event)}.bind(this),100)},didConnect:function(){this.pos&&!this.data.cxPropExpress&&(this.$node.querySelector(".lyteTableScroll").scrollTop=this.$node.querySelectorAll("lyte-tr")[this.pos].offsetTop),this.getData("cxPropEnableBodyScroll")&&(this.boundEvent=this.resize.bind(this),window.addEventListener("resize",this.boundEvent,!0))},observeFields:function(){this.data.cxPropHeader||(this.data.cxPropHeader=[]),this.setData("intPinnedColumn","");for(var e=this.data.cxPropHeader.slice(0),t=this.data.cxPropFieldTypeMapping,a={text:{medium:"text-area",large:"text-area"}},o=this.data.cxPropFieldTypeMappingSelector,i=this.data.cxPropFormulaMapping,r=0;r<e.length;r++)e[r].cxPropPinned&&this.setData("intPinnedColumn",e[r].id),116==e[r].ui_type&&a[i[e[r].formula.return_type]]&&a[i[e[r].formula.return_type]][e[r].formula.sub_return_type]?e[r].cxTypeMapping=a[i[e[r].formula.return_type]][e[r].formula.sub_return_type]:116==e[r].ui_type||117==e[r].ui_type?e[r].cxTypeMapping=i[e[r].formula.return_type]:118==e[r].ui_type?e[r].cxTypeMapping=i[e[r].rollup_summary.return_type]:"Solution_Number"!=e[r].api_name&&"Quote_Number"!=e[r].api_name&&t[e[r][o]]&&"Invoice_Number"!=e[r].api_name&&"Case_Number"!=e[r].api_name&&"SO_Number"!=e[r].api_name?333!=e[r].ui_type&&14!=e[r].ui_type&&786!=e[r].ui_type||"Activities"!=this.getData("cxPropModule")?e[r].cxTypeMapping=t[e[r][o]]:e[r].cxTypeMapping="allday":e[r].cxTypeMapping="text";if(1==this.data.cxPropYieldForPrefix||1==this.data.cxPropYieldForSuffix)if(this.getData("cxPropHeaderYield")){var s=this.getData("cxPropHeaderYield").prefix?this.getData("cxPropHeaderYield").prefix:[];for(r=0;r<s.length;r++)e.splice(r,0,{yield:!0,fixed:s[r].fixed,width:s[r].width,yieldName:"prefix-"+(r+1),style:s[r].style,cxPropClass:s[r].class});var l=this.getData("cxPropHeaderYield").suffix?this.getData("cxPropHeaderYield").suffix:[];for(r=0;r<l.length;r++)e.push({yield:!0,fixed:l[r].fixed,width:l[r].width,yieldName:"suffix-"+(r+1),style:l[r].style,cxPropClass:l[r].class})}else if(this.data.cxPropPrefixYields&&this.data.cxPropPrefixYields.length>0||this.data.cxPropSuffixYields&&this.data.cxPropSuffixYields.length>0){for(s=this.data.cxPropPrefixYields,r=0;r<s.length;r++)e.splice(r,0,{yield:!0,fixed:s[r].fixed,width:s[r].width,yieldName:"prefix-"+(r+1),style:s[r].style,cxPropClass:s[r].class});for(l=this.data.cxPropSuffixYields,r=0;r<l.length;r++)e.push({yield:!0,fixed:l[r].fixed,width:l[r].width,yieldName:"suffix-"+(r+1),style:l[r].style,cxPropClass:l[r].class})}else{var n=1,c=this.$node.querySelector("template[yield-name='header-prefix-"+n+"']"),p=this.$node.querySelector("template[yield-name='header-suffix-"+n+"']");if(c||p)for(var d=0,u=1;c||p;)c&&(e.splice(d,0,{yield:!0,fixed:c.getAttribute("cx-prop-fixed"),width:c.getAttribute("cx-prop-width"),yieldName:"prefix-"+(d+1),style:c.getAttribute("cx-prop-style")}),d++),p&&(e.push({yield:!0,fixed:p.getAttribute("cx-prop-fixed"),width:p.getAttribute("cx-prop-width"),yieldName:"suffix-"+u,style:p.getAttribute("cx-prop-style")}),u++),n++,c=this.$node.querySelector("template[yield-name='header-prefix-"+n+"']"),p=this.$node.querySelector("template[yield-name='header-suffix-"+n+"']")}this.data.cxPropCheckboxPosition>-1&&e.splice(this.data.cxPropCheckboxPosition,0,{cxCheckbox:!0,fixed:"enable"}),this.setData("header",e);var h=e.slice(0);this.setData("headerFields",h)}.observes("cxPropHeader","cxPropPrefixYields","cxPropSuffixYields","cxPropHeaderYield","cxPropYieldForPrefix","cxPropYieldForSuffix").on("init"),minHeightOfRow:45,validateDisplayRowNumber:function(){(null==this.data.cxPropDisplayRowNumber||isNaN(this.getData("cxPropDisplayRowNumber")))&&this.setData("cxPropDisplayRowNumber",1)}.observes("cxPropDisplayRowNumber").on("init"),observeContent:function(){if(this.obj&&clearInterval(this.obj.interval),this.obju&&clearInterval(this.obju.interval),this.clearValues(),this.obj=void 0,this.obju=void 0,this.data.cxPropContent||(this.data.cxPropContent=[]),1==this.data.cxPropEnableBodyScroll){this.maxRenderCount=Math.ceil(window.innerHeight/this.minHeightOfRow);var e=this.data.cxPropContent.length/2;if(e>=50&&(e=50),this.data.cxPropScrollRecordCount?this.maxRenderCount=this.data.cxPropScrollRecordCount:e>=this.maxRenderCount&&!this.data.cxPropRenderOnlyViewportRecords&&(this.maxRenderCount=Math.ceil(e),this.setData("showLoadingDown",!0)),this.data.new){if(this.upContent=!0,this.downContent=!0,this.startIndex=this.data.cxPropDisplayRowNumber>=this.data.cxPropContent.length-5?this.data.cxPropDisplayRowNumber-this.maxRenderCount:this.data.cxPropDisplayRowNumber-5,this.startIndex<=0&&(this.startIndex=0,this.upContent=!1),0!=this.startIndex&&this.setData("showLoadingUp",!0),this.endIndex=this.startIndex+this.maxRenderCount,this.endIndex>=this.data.cxPropContent.length){var t=this.endIndex-this.data.cxPropContent.length;this.startIndex=this.startIndex-t,this.startIndex<=0&&(this.startIndex=0,this.upContent=!1,this.setData("showLoadingUp",!1)),this.setData("showLoadingDown",!1)}else this.setData("showLoadingDown",!0);this.pos=this.data.cxPropDisplayRowNumber-this.startIndex;for(var a=this.data.cxPropContent.slice(this.startIndex,this.endIndex),o=0;o<a.length;o++)delete a[o].hideRecord;this.setData("content",a),this.endIndex=this.endIndex-1,1==this.getData("showLoadingUp")&&$L.fastdom.mutate(function(){for(var e=this.$node.querySelector(".lyteExpTableOrigTableInnerWrap").clientWidth,t=this.$node.querySelectorAll(".cxTableLoadingDiv"),a=0;a<t.length;a++)t[a].style.width=e+"px";var o=this.getData("cxPropContent").slice(0,this.startIndex);o&&o.length&&(this.countDown=0,this.intervalDown=setInterval(function(){for(var e=0;e<2;e++)if(o[this.countDown])o[this.countDown].hideRecord=!0,Lyte.arrayUtils(this.getData("content"),"insertAt",this.countDown,o[this.countDown]),this.countDown++;else{clearInterval(this.intervalDown);for(var t=document.querySelectorAll(".cruxHideRow"),a=0;a<t.length;a++)t[a].classList.remove("cruxHideRow");this.$node.querySelector("lyte-expresstable")&&this.$node.querySelector("lyte-expresstable").contentObserver(),this.setData("showLoadingUp",!1),this.getMethods("onScrollSetLatestEntityPosition")&&this.executeMethod("onScrollSetLatestEntityPosition"),this.getMethods("onScrollRecordsHaveBeenRendered")&&this.executeMethod("onScrollRecordsHaveBeenRendered")}}.bind(this),10))}.bind(this))}else this.rendered=0,this.moreContent=!0,this.data.cxPropContent.length>this.maxRenderCount?(this.setData("content",this.data.cxPropContent.slice(0,this.maxRenderCount)),this.rendered=this.maxRenderCount):(this.setData("content",this.data.cxPropContent),this.rendered=this.data.cxPropContent.length)}else this.setData("content",this.data.cxPropContent),this.moreContent=!1,$L(".lyteTableScroll",this.$node)&&this.data.mouseOverTable&&$L(".lyteTableScroll",this.$node).resetScrollbar();let i=this.$node.querySelector(".lyteTableScroll");i&&$L.fastdom.mutate((function(){i.scrollLeft=0,i.scrollTop=0})),this.$node.querySelector("lyte-expresstable")&&this.$node.querySelector("lyte-expresstable").reset()}.observes("cxPropContent.[]").on("init"),resize:function(e){clearTimeout(this.timeout);var t=this;this.timeout=setTimeout((function(){var e=Math.ceil(window.innerHeight/t.minHeightOfRow);t.getData("new")?e>t.maxRenderCount&&(t.maxRenderCount=e,t.fetchNextDataNew(document.querySelector(".lyteTableScroll"))):t.moreContent&&e>t.rendered&&t.getData("cxPropContent")&&(Lyte.arrayUtils(t.getData("content"),"push",t.getData("cxPropContent").slice(t.rendered,e)),t.maxRenderCount=t.rendered=e)}),300)},didDestroy:function(){window.removeEventListener("resize",this.boundEvent,!0),this.obj&&clearInterval(this.obj.interval),this.obju&&clearInterval(this.obju.interval),clearInterval(this.intervalUp),clearInterval(this.intervalDown),this.obj=void 0,this.obju=void 0,document.getElementById("cxTableSortMenu")&&document.getElementById("cxTableSortMenu").remove()},scrollTable:function(e,t){if(!this.getData("cxPropExpress")){var a=this.$node.querySelector("lyte-table");delete a._scrolldiv._alive,t?a.scrollTable(e,t):a.scrollTable()}},fetchNextData:function(e){var t=this.scrollTop;if(this.scrollTop=e.scrollTop,!this.disableScroll){if(this.downContent&&!this.waitDown&&e.scrollTop>document.querySelector(".lyteExpTableRowGroup").offsetHeight-500){this.downContent=!1;var a,o=this.endIndex+1,i=this.endIndex+this.maxRenderCount,r=this.getData("cxPropContent").slice(o,i),s=this;if(r&&r.length)this.obj?(a=this.obj,Lyte.arrayUtils(a.moreArr,"push",r)):(a=this.obj={},this.upContent?a.startIndex=this.endIndex-this.startIndex+1:a.startIndex=this.endIndex+1,a.moreArr=r,a.count=0,a.interval=setInterval((function(){for(var e=0;e<2;e++)a.moreArr[a.count]?Lyte.arrayUtils(s.getData("content"),"push",a.moreArr[a.count++]):(clearInterval(a.interval),s.waitDown=!1,s.obj=void 0)}),10)),this.endIndex+=r.length,this.downContent=!0,this.setData("showLoadingDown",!1);else this.getMethods("onScrollFetchMoreRecords")?this.executeMethod("onScrollFetchMoreRecords",this.endIndex).then(function(e){e&&e.length&&(Lyte.arrayUtils(this.getData("content"),"push",e),this.endIndex+=e.length,this.downContent=!0,this.scrollTable(),this.setData("showLoadingDown",!1))}.bind(this)):this.setData("showLoadingDown",!1)}if(this.upContent&&!this.waitUp&&e.scrollTop<t){if(this.upContent=!1,0==(i=this.startIndex))return;if(this.startIndex=i-this.maxRenderCount,this.startIndex<0&&(this.startIndex=0),(r=this.getData("cxPropContent").slice(this.startIndex,i))&&r.length){var l;if(this.obju)l=this.obju,Lyte.arrayUtils(l.moreArr,"insertAt",0,r);else{(l=this.obju={}).moreArr=r,l.count=0;s=this;l.interval=setInterval((function(){for(var e=l.moreArr.length,t=0;t<2;t++){var a=e-1-l.count;if(l.count++,!l.moreArr[a]){clearInterval(l.interval),s.obju=void 0,s.waitUp=!1;break}Lyte.arrayUtils(s.getData("content"),"insertAt",0,l.moreArr[a])}}),10)}this.upContent=!0}this.setData("showLoadingUp",!1)}}},fetchNextDataNew:function(e){if(this.data.cxPropExpress)var t=this.$node.querySelector(".lyteExpOriginalTable .lyteExpTableRowGroup").offsetHeight-this.$node.querySelector(".lyteExpTableOrigTableInnerWrap").offsetHeight-100;else t=this.$node.querySelector("lyte-tbody").offsetHeight-this.$node.querySelector(".lyteTableScroll").offsetHeight;if(this.downContent&&e.scrollTop>t){this.downContent=!1;var a,o=this.endIndex+1,i=this.endIndex+this.maxRenderCount+1,r=!1;i+50<=this.getData("cxPropContent").length?(a=this.getData("cxPropContent").slice(o,i),r=!0):a=this.getData("cxPropContent").slice(o),a&&a.length?(this.countUp=0,this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow")&&this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow").classList.remove("dN"),this.intervalUp=setInterval(function(){for(var e=0;e<2;e++)if(a[this.countUp].hideRecord=!0,Lyte.arrayUtils(this.getData("content"),"push",a[this.countUp++]),!a[this.countUp]){clearInterval(this.intervalUp);for(var t=document.querySelectorAll(".cruxHideRow"),o=0;o<t.length;o++)t[o].classList.remove("cruxHideRow");r||this.getMethods("onScrollFetchMoreRecords")?(this.downContent=!0,this.endIndex=this.endIndex+this.maxRenderCount,this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow")&&this.$node.querySelector(".lyteExpTableOrigTableInnerWrap .cxTableDownRow").classList.add("dN")):this.setData("showLoadingDown",!1),this.$node.querySelector("lyte-expresstable").contentObserver(),this.getMethods("onScrollRecordsHaveBeenRendered")&&this.executeMethod("onScrollRecordsHaveBeenRendered");break}}.bind(this),10)):this.getMethods("onScrollFetchMoreRecords")?this.executeMethod("onScrollFetchMoreRecords",this.endIndex).then(function(e){e&&e.length&&(Lyte.arrayUtils(this.getData("content"),"push",e),this.endIndex+=e.length,this.downContent=!0,this.scrollTable(),this.setData("showLoadingDown",!1))}.bind(this)):this.setData("showLoadingDown",!1)}},methods:{previewClose:function(e){if(this.getMethods("onPreviewClose"))return this.executeMethod("onPreviewClose",e)},cropSuccess:function(e,t){if(this.getMethods("onCropSuccess"))return this.executeMethod("onCropSuccess",e,t)},expandImageView:function(e){if(this.getMethods("onExpandImageView"))return this.executeMethod("onExpandImageView",e)},showLess:function(e){if(this.getMethods("onShowLess"))return this.executeMethod("onShowLess",e)},beforeShow:function(e,t){if(this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",e,t)},beforeHide:function(e,t){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",e,t)},show:function(e,t){this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},hide:function(e,t){this.getMethods("onHide")&&this.executeMethod("onHide",e,t)},fetchmodule:function(e){if(this.getMethods("fetchModuleData"))return this.executeMethod("fetchModuleData",e)},fetchrecord:function(e,t){if(this.getMethods("fetchRecords"))return this.executeMethod("fetchRecords",e,t)},valueChange:function(e,t,a,o,i,r){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,t,a,o,i,r)},resizeSelect:function(e,t,a){this.setData("beingResized",!0),this.getMethods("onResizeSelect")&&this.executeMethod("onResizeSelect",e,t,a)},resizeEnd:function(e,t,a){this.beingResized=!0,this.setData("beingResized",!1),setTimeout(function(){this.beingResized=!1}.bind(this),200),$L(e).removeClass("resizeStart"),this.getMethods("onResizeEnd")&&this.executeMethod("onResizeEnd",e,t,a)},applyFilter:function(e,t,a){this.getMethods("applyFilter")&&this.executeMethod("applyFilter",e,t,a)},setLookupFilterConditionsCall:function(e){return this.getMethods("setLookupFilterConditions")?this.executeMethod("setLookupFilterConditions",e):{}},tagsShowMore:function(){this.getMethods("onShowMoreTags")&&this.executeMethod("onShowMoreTags")},sortClick:function(e,t,a,o){this.sortClick(e,t,a,o)},beforeSetFixTableColumnWidth:function(e){this.getMethods("onBeforeSetFixTableColumnWidth")&&this.executeMethod("onBeforeSetFixTableColumnWidth",e)},afterSetFixTableColumnWidth:function(e){this.getMethods("onAfterSetFixTableColumnWidth")&&this.executeMethod("onAfterSetFixTableColumnWidth",e)},onLookupHoverFetchBcDataPopup:function(e,t){if(this.getMethods("onLookupHoverFetchBcData"))return this.executeMethod("onLookupHoverFetchBcData",e,t)},afterAriaAdd:function(){console.log("After Aria Add Method Executed...")}},clearValues:function(){clearInterval(this.intervalUp),clearTimeout(this.intervalDown),this.setData({showLoadingUp:!1,showLoadingDown:!1})},performSort:function(e){if(!e.cxPropPreventSort){var t=["asc","desc"];e.cxPropSortOptions?t=e.cxPropSortOptions:this.getMethods("onSort")&&this.getData("cxPropSortedColumn")&&(this.getData("cxPropSortedColumn")==e.api_name||this.getData("cxPropSortedColumn")==e.id)&&(t="asc"==this.getData("cxPropSortedOrder")?["desc","unsort"]:["asc","unsort"]);for(var a={asc:"crm.column.sort.asc",desc:"crm.column.sort.desc",unsort:"crm.column.unsort"},o=0;o<t.length;o++)t[o]={label:_cruxUtils.getI18n(a[t[o]]),value:t[o]};this.setData("options",t),this.setData("beingSorted",e.api_name)}},sortClick:function(e,t,a,o){var i=this;if(i.setData("cxPropSortedColumn",i.getData("beingSorted")),i.setData("cxPropSortedOrder",e),this.getMethods("onSort"))this.executeMethod("onSort",this.getData("cxPropSortedColumn"),e,t,a,o);else{var r=this.getData("beingSorted"),s=this.getData("cxPropContent").slice(0);s.sort((function(t,a){return null==t[r]||""==t[r]?"asc"==e?1:-1:null==a[r]||""==a[r]?"desc"==e?1:-1:t[r].localeCompare(a[r])})),this.setData("cxPropContent",s)}},triggerSortClick:function(e,t){var a="asc";!this.getData("cxPropSortedOrder")||this.getData("cxPropSortedColumn")!=e.api_name&&this.getData("cxPropSortedColumn")!=e.id||(a="asc"==this.getData("cxPropSortedOrder")?"desc":"asc"),this.setData("beingSorted",e.api_name),this.sortClick(a,t)},observeFilter:function(){if(!this.data.cxPropExpress&&this.data.cxPropShowFilter){var e=this;$L.fastdom.measure((function(){var t=e.data.cxPropShowFilter?e.$node.querySelector(".cxTableLookupFilterComponent").offsetHeight:0,a=e.$node.querySelector("lyte-tr").offsetHeight;$L.fastdom.mutate((function(){e.$node.querySelector(".lyteScrollContainer.lyteScrollContainerY").style.top=e.data.cxPropShowFilter?a+t+"px":a+"px"}))}))}}.observes("cxPropShowFilter").on("didConnect"),keyDownEvent:function(){this.$node.cxProp("aria")&&this.bindEventForAria()}.observes("cxPropContent","cxPropAria").on("didConnect")},{mixins:["crux-element-validation","crux-aria-table-mixin"]}),Lyte.Component.registerHelper("getCruxTableValue",(function(e,t,a,o,i,r,s,l,n,c,p){var d=_cruxUtils.isLyteWidgetBuild?"lyte-widget":"",u=t[e.api_name],h="";if("undefined"!==u&&"boolean"===e.cxTypeMapping&&e.cxDisplayText)return u;if(!u&&e.api_name.indexOf(".")>-1&&(u=t[e.api_name.split(".")[0]])&&(u=u[[e.api_name.split(".")[1]]]),(!u||0==u.length)&&"number"!=e.cxTypeMapping)return"";switch(e.cxPropMaskingProperties&&(u=Lyte.Component.registeredHelpers.cruxMaskValue(u,e.cxPropMaskingProperties)),o&&i&&(i.config&&(h=`lt-prop-tooltip-config=${i.config} `),i.class&&(h=`lt-prop-tooltip-class=${i.class}`)),e.cxTypeMapping){case"phone":if(e.cxPropMaskingProperties)return u;var m=!0;t.Data_Processing_Basis_Details&&(m=t.Data_Processing_Basis_Details.Contact_Through_Phone);var y="<div class='phoneRtl",x=0;0==m||e.private&&e.private.restricted?y+="' style='min-width : 100%;'>":"undefined"!=typeof Crm&&Crm.userDetails&&Crm.userDetails.TELEPHONY_ENABLED?(y+=" cruxPreventClick cxPhoneViewOutbound'>",x=1):"undefined"!=typeof Crm&&Crm.userDetails&&Crm.userDetails.ZPBENABLED?(y+=" cxPhoneViewZPBEnabled cruxPreventClick'>",x=2):(y+=" cruxPreventClick' onmouseover='Lyte.registeredMixins[\"crux-aria-table-mixin\"].phoneMouseOver(this);' onmouseout='Lyte.registeredMixins[\"crux-aria-table-mixin\"].phoneMouseOut(this);' style='min-width:100%;'><zpb-phone phoneno='"+$ESAPI.encoder().encodeForHTMLAttribute(u)+'\' callbackparam=\'{"module" : "'+a+'", "searchid" : "'+t.id+"\"}'>",x=3);var f="undefined"!=typeof moduleRecordMapping&&moduleRecordMapping[a]&&moduleRecordMapping[a].display_field?t[moduleRecordMapping[a].display_field.api_name]:"";if(y+=o?"<lyte-text "+d+" "+h+" lt-prop-value='"+$ESAPI.encoder().encodeForHTML(u)+"'></lyte-text>":$ESAPI.encoder().encodeForHTML(u),1==x)y+="<span class='cxCalliconOuter' onclick='Lyte.registeredMixins[\"crux-element-validation\"].phoneClick(\""+$ESAPI.encoder().encodeForJavaScript(u)+'", "'+t.id+'", "'+a+'","'+$ESAPI.encoder().encodeForJavaScript(f)+"\");'><i class='cxCallIcon cruxPreventClick'></i><span id='calllabel1' class='cruxPreventClick cxPhoneViewCallLabel'>"+_cruxUtils.getI18n("Call")+"</span></span>";else if(2==x){var g="asyncFn(crmCallsNew.getClick2CallPromise,'"+t.id+"','"+a+"','"+f+"','','"+$ESAPI.encoder().encodeForJavaScript(u)+"','"+e.column_name+"')";y+="<span class='cxPhoneViewZPBEnabledIconWrap'><zpb-phone number='"+$ESAPI.encoder().encodeForHTMLAttribute(u)+"' module='"+a+"' recordid='"+t.id+"' callbackparamfn="+$ESAPI.encoder().encodeForHTMLAttribute(g)+"></zpb-phone></span>"}else 3==x&&(y+=`</zpb-phone><a style='visibility : hidden;' class='pH2 phoneRtl' title='${s}' href='${p&&"tel"===p.mode?"tel:"+$ESAPI.encoder().encodeForHTMLAttribute(u):"skype:"+$ESAPI.encoder().encodeForHTMLAttribute(u)+"?call"}' onclick='sE();'></a>`);return y+"</div>";case"allday":case"date":case"date-time":var P=!(!t.All_day||"Events"!==a&&"Meetings"!==a||-1===["Start_DateTime","End_DateTime"].indexOf(e.api_name)),v=!!this.getData("cxPropDateProperties")&&!this.getData("cxPropDateProperties").dateInUserPattern,b=!!this.getData("cxPropDatetimeProperties")&&!this.getData("cxPropDatetimeProperties").datetimeInUserPattern;if(v||b||P&&-1!=u.indexOf("T")){if("date"==e.cxTypeMapping&&v)return"<crux-date-component "+d+" cx-prop-value='"+u+"' cx-prop-date-in-user-pattern=false></crux-date-component>";if("date-time"==e.cxTypeMapping&&b)return"<crux-date-time-component "+d+" cx-prop-value='"+u+"' cx-prop-datetime-in-user-pattern=false></crux-date-time-component>"}return(P||"date"==e.cxTypeMapping)&&u.indexOf(":")>-1&&(u=u.substring(0,u.split(":")[0].lastIndexOf(" "))),o?"<lyte-text "+d+" class='newDTField' "+h+" lt-prop-value='"+u+"'></lyte-text>":"<span>"+u+"</span>";case"boolean":return"<span class="+(1==u?"criteria-yes":"")+"></span>";case"email":return e.cxPropMaskingProperties?u:o?"<a class='cxEmailViewLink cruxPreventClick emailUnblock' href='mailto:"+$ESAPI.encoder().encodeForHTMLAttribute(u)+"'> <lyte-text "+d+" "+h+" lt-prop-value='"+$ESAPI.encoder().encodeForHTML(u)+"'></lyte-text></a>":"<a class='cxEmailViewLink cruxPreventClick emailUnblock' href='mailto:"+$ESAPI.encoder().encodeForHTMLAttribute(u)+"'>"+$ESAPI.encoder().encodeForHTML(u)+"</a>";case"layout":return o?"<lyte-text "+d+" "+h+" lt-prop-value='"+$ESAPI.encoder().encodeForHTML(u.name)+"'></lyte-text>":$ESAPI.encoder().encodeForHTML(u.name);case"number":var S=!1;("currency"==e.data_type||"formula"==e.data_type&&"currency"==e.formula.return_type)&&(S=!0);var D=e.data_type;return("formula"==D||e.formula&&e.formula.return_type)&&(D="currency"==e.formula.return_type?"currency":"number"),u=u||0==u?this.component.getNumberValueForView(u,D,l&&l.isoCode?l.isoCode:t.Currency,e.ui_type,l&&l.currencyDetails?l.currencyDetails:Crm.userDetails.CURRENCY_DETAILS,e.hasOwnProperty("decimal_place")?e.decimal_place:l&&l.defaultRoundOff?l.defaultRoundOff:Crm.userDetails.defaultRoundOff?Crm.userDetails.defaultRoundOff:2,l&&l.currencyCode?l.currencyCode:Crm.userDetails.BASE_CURRENCY,l&&l.exchangeRate?l.exchangeRate:void 0,l&&l.exchangeRateFinance?l.exchangeRateFinance:void 0,t.$formatted_currency?t.$home_converted_currency[e.api_name]:void 0,!l||!l.hasOwnProperty("displayCurrency")||l.displayCurrency,t.$formatted_currency?t.$formatted_currency[e.api_name]:void 0,e.separator,l&&l.defaultOrgCurrency?l.defaultOrgCurrency:Crm.userDetails.defaultOrgCurrency,e.currency?e.currency.rounding_option:void 0,e.currency?e.currency.precision:void 0):"",`<div class="${S?"numberDivCurrencyView":"numberDivNumberView"}">${o?`<lyte-text  ${d} lt-prop-value='${u}'></lyte-text>`:u}</div>`;case"text-area":return o?"<div class='pR'><pre style='word-wrap : break-word; white-space : pre-wrap; min-width : 200px;'>"+$ESAPI.encoder().encodeForHTML(u)+"</pre><span id='showMoreDesc' class='showMoreAddedEvents'></span></div>":"<pre style='word-wrap : break-word; white-space : pre-wrap; min-width : 200px; max-width : 500px;'>"+$ESAPI.encoder().encodeForHTML(u)+"</pre>";case"twitter":return e.cxPropMaskingProperties?u:o?"<a data-zcqa='dummy' class='link cruxPreventClick' href='"+c+"/"+$ESAPI.encoder().encodeForURL(u)+"' target='_blank'> <lyte-text "+d+" "+h+" lt-prop-value='"+$ESAPI.encoder().encodeForHTML(u)+"'></lyte-text></a>":"<a data-zcqa='dummy' class='link cruxPreventClick' href='"+c+"/"+$ESAPI.encoder().encodeForURL(u)+"' target='_blank'>"+$ESAPI.encoder().encodeForHTML(u)+"</a>";case"website":var L="",C="http";return u&&""!==u&&0!=u.indexOf(C)&&0!=u.indexOf("https")?L="http://"+u:u&&(L=u),e.cxPropMaskingProperties?u:o?"<a class='link cruxPreventClick' href='"+$ESAPI.encoder().encodeForHTMLAttribute(L)+"' target='_blank'> <lyte-text "+d+" "+h+" lt-prop-value='"+$ESAPI.encoder().encodeForHTML(u)+"'></lyte-text></a>":"<a class='link cruxPreventClick' href='"+$ESAPI.encoder().encodeForHTMLAttribute(L)+"' target='_blank'>"+$ESAPI.encoder().encodeForHTML(u)+"</a>";case"lookup":case"multi_module_lookup":var A,w={field:e,row:t};if(["dynamicParams","queryParams","transitionData","target","iconClass","showBc","hideIconForView","module","cxPropShowImage","cxPropShowLookupPopupFields"].forEach((function(t){w[t]=r[e.api_name]&&r[e.api_name].hasOwnProperty(t)?r[e.api_name][t]:r[t]?r[t]:""})),w.iconClass&&(w.iconClass=w.iconClass,-1===w.iconClass.indexOf("{{")?w.iconClass=w.iconClass:w.iconClass=t.cxPropIconClass?t.cxPropIconClass:""),w.dynamicParams?(w.dynamicParams=JSON.parse(w.dynamicParams),w.dynamicParams=w.dynamicParams.map((function(e){if(-1==e.indexOf("{{"))return e;for(var t=e.split("{{")[1].split("}}")[0].split("."),a=w[t[0]],o=t.length,i=1;i<o;i++){var r=t[i];if(-1!==r.indexOf("["))if(-1!==r.indexOf("]"))r=t[i];else{r=r.split("[")[1];var s=w[r],l=t.length;for(i+=1;i<l;i++)if(-1!==(r=t[i]).indexOf("]")){s=s[r=r.split("]")[0]];break}a=a[s]}else a&&a[r]&&(a=a[r])}return w.cxPropIdModuleMap&&w.cxPropIdModuleMap[a]?w.cxPropIdModuleMap[a]:a})),w.dynamicParams=JSON.stringify(w.dynamicParams)):"multi_module_lookup"==e.cxTypeMapping&&(w.dynamicParams=[t[e.api_name].module.api_name,t[e.api_name].id],w.dynamicParams=JSON.stringify(w.dynamicParams),w.module=t[e.api_name].module.api_name),w.queryParams){for(var k in w.queryParams=JSON.parse(w.queryParams),w.queryParams)if(-1!=w.queryParams[k].indexOf("{{")){for(var T=w.queryParams[k].split("{{")[1].split("}}")[0].split("."),N=w[T[0]],_=1;_<T.length;_++)N=N[T[_]];w.queryParams[k]=N}w.queryParams=JSON.stringify(w.queryParams)}"string"!=typeof u&&((A=Object.assign({},u)).name=$ESAPI.encoder().encodeForHTML(u.name));var U=e instanceof Record?JSON.stringify(store.peekRecord(e.$.model._name,e.id).$.toJSON()):JSON.stringify(e);return"<crux-lookup-component "+d+" cx-prop-show-lookup-popup-fields='"+(""!==w.cxPropShowLookupPopupFields&&w.cxPropShowLookupPopupFields)+"' cx-prop-field='"+U+"' cx-prop-route-name='"+r.routeName+"' cx-prop-value='"+(A?A.name:u)+"' lookup-id='"+(A?A.id:"")+"' cx-prop-zcqa='"+(r.zcqa?r.zcqa:A?A.name:u)+"' cx-prop-dynamic-params='"+w.dynamicParams+"' cx-prop-query-params='"+w.queryParams+"' cx-prop-id='"+(r.id?r.id:t.id)+"' cx-prop-transition-data='"+w.transitionData+"' cx-prop-target='"+w.target+"' cx-prop-icon-class='"+w.iconClass+"'   cx-prop-show-bc='"+(""!==w.showBc&&w.showBc)+"' cx-prop-module='"+(""!==w.dynamicParams?JSON.parse(w.dynamicParams)[0]:"")+"' cx-prop-hide-icon-for-view='"+(""!==w.hideIconForView&&w.hideIconForView)+"'></crux-lookup-component>";case"picklist":u&&"string"!=typeof u&&(u=u.join("; "));default:return o?"<lyte-text "+d+" "+h+" lt-prop-value='"+$ESAPI.encoder().encodeForHTML(u&&"object"==typeof u&&u.name?u.name.toString():u.toString())+"'></lyte-text>":$ESAPI.encoder().encodeForHTML(u.toString())}})),Lyte.Component.registerHelper("cruxGetDateValue",(function(e,t){return e.All_day||"date"==t.cxTypeMapping&&e[t.api_name].indexOf(":")>-1?e[t.api_name].substring(0,e[t.api_name].split(":")[0].lastIndexOf(" ")):e[t.api_name]})),Lyte.Component.registerHelper("cruxGetWebsiteHref",(function(e){var t="http";return e&&""!=e&&0!=e.indexOf(t)&&0!=e.indexOf("https")?"http://"+e:e||""})),Lyte.Component.registerHelper("getCruxTableValue1",(function(e,t){var a=e[t.api_name];return!a&&t.api_name.indexOf(".")>-1&&(a=e[t.api_name.split(".")[0]])&&(a=a[[t.api_name.split(".")[1]]]),a})),Lyte.Component.registerHelper("getTableLookupProperty",(function(e,t,a,o){var i=e[a.api_name]&&e[a.api_name].hasOwnProperty(o)?e[a.api_name][o]:e[o];if(i){let c=Lyte.deepCopyObject(e);switch(c.row=t,c.field=a,o){case"dynamicParams":return i=(i=JSON.parse(i)).map((function(e){if(-1==e.indexOf("{{"))return e;for(var t=e.split("{{")[1].split("}}")[0].split("."),a=c[t[0]],o=1;o<t.length;o++)a=a[t[o]];return a})),JSON.stringify(i);case"queryParams":for(var r in i=JSON.parse(i))if(-1!=i[r].indexOf("{{")){for(var s=i[r].split("{{")[1].split("}}")[0].split("."),l=c[s[0]],n=1;n<s.length;n++)l=l[s[n]];i[r]=l}return JSON.stringify(i)}}})),Lyte.Component.register("crux-user-dropdown",{_template:'<template tag-name="crux-user-dropdown"> <lyte-dropdown data-zcqa="{{cxPropZcqa}}" lt-prop-data-tabindex="{{cxPropDataTabindex}}" lt-prop-aria="{{cxPropAria}}" lt-prop-aria-body="{{cxPropAriaBody}}" lt-prop-aria-button="{{cxPropAriaButton}}" lt-prop-aria-box="{{cxPropAriaBox}}" class="outerDropdown {{if(cxPropMandatory,\'mandatoryField\',\'\')}} {{noUserSelected}} {{cxPropClass}} {{if(ifEquals(cxPropAppearance,\'box\'),\'cxBoxDropdown\',\'\')}}" lt-prop-disable-item-tooltip="true" lt-prop-freeze="{{cxPropFreeze}}" lt-prop-tooltip="{&quot;appearance&quot;: &quot;callout&quot;, &quot;keeptooltip&quot;:true}" lt-prop-box-button-width="{{cxPropBoxButtonWidth}}" lt-prop-scope="{{cxPropScope}}" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-position="{{cxPropPosition}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-placeholder="{{cxPropPlaceholder}}" lt-prop-display-value="{{if(cxPropSelectedUser[cxPropUserValue],cxPropSelectedUser[cxPropUserValue],cxPropNoUserLabel)}}" lt-prop-tabindex="{{cxPropTabindex}}" lt-prop-type="{{cxPropType}}" lt-prop-selected="{{lbind(cxPropSelected)}}" lt-prop-callout="{{cxPropCallout}}" lt-prop-yield="true" on-option-selected="{{method(\'userSelected\')}}" on-show="{{method(\'userShow\')}}" on-before-show="{{method(\'userBeforeShow\')}}" on-hide="{{method(\'userHide\')}}" on-before-hide="{{method(\'userBeforeHide\')}}" on-add="{{method(\'userAdd\')}}" on-remove="{{method(\'userRemove\')}}" on-position-change="{{method(\'userPositionChange\')}}" on-scroll="{{method(\'userScroll\')}}" lt-prop-icon-class="{{cxPropDropdownIconClass}}" lt-prop-button-class="{{cxPropButtonClass}}" lt-prop-prevent-parent-scroll="{{cxPropPreventParentScroll}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{cxPropUserButtonYield}}"><template case="true"> <lyte-drop-button class="cxUserDropButton {{if(cxPropDropdownIconNodeClass,\'ltDropdownIconNodePresent\',\'\')}}"> <lyte-yield yield-name="userButtonYield"></lyte-yield> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true"> <lyte-drop-button style="min-height: 0px;" class="cxUserDropButton {{if(cxPropDropdownIconNodeClass,\'ltDropdownIconNodePresent\',\'\')}}"> <template is="if" value="{{expHandlers(addedItems.length,\'==\',0)}}"><template case="true"> <span class="lyteDropPlaceholderMultiple crux_userdrop_multi_placeholder">{{cxPropNoUserLabel}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{addedItems}}" item="item" index="index"> <li data-value="{{item[cxPropSystemValue]}}"> <div class="cxFlex"> <template is="if" value="{{cxPropSelectedUsrImg}}"><template case="true"> <template is="if" value="{{item.image_link}}"><template case="true"> <div class="cruxSelUserImgWrap"> <img src="{{item.image_link}}" class="cruxSelUserImg"> </div> </template><template case="false"> <div class="cruxSelUserImgWrap noUserPhoto cxUserDropboxNoUserPhoto"> <span class="cruxSelUserImg"></span> </div> </template></template> </template></template> <span class="lyteDropdownVisible">{{item[cxPropUserValue]}}</span> </div> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> <template is="if" value="{{cxPropIsDropdownIconNode}}"><template case="true"><lyte-icon class="{{cxPropDropdownIconNodeClass}}"></lyte-icon></template></template> </lyte-drop-button> </template></template></template></template> <lyte-drop-box class="cxUserDropbox userDropbox {{cxPropBoxClass}}"> <template is="if" value="{{expHandlers(cxPropFilterable,\'||\',cxPropSearchable)}}"><template case="true"> <div class="wrapperdiv cxUserDropFilterWrapperCont cxDropdownInputGroupFocused"> <template is="if" value="{{expHandlers(expHandlers(cxPropDisabled,\'!\'),\'&amp;&amp;\',cxPropFilterable)}}"><template case="true"><template is="if" value="{{cxPropFilterYield}}"><template case="true"> <lyte-dropdown data-zcqa="user_dd_type" class="innerUserDropdown cxBoxDropdown" lt-prop-yield="true" lt-prop-selected="{{lbind(cxPropFilterSelected)}}" lt-prop-tabindex="{{cxPropFilterTabindex}}" on-option-selected="{{method(\'filterSelected\')}}" on-show="{{method(\'filterShow\')}}" on-before-show="{{method(\'filterBeforeShow\')}}" on-hide="{{method(\'filterHide\')}}" on-before-hide="{{method(\'filterBeforeHide\')}}" on-position-change="{{method(\'filterPositionChange\')}}" on-scroll="{{method(\'filterScroll\')}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="filterYield"></lyte-yield> </template> </lyte-dropdown> </template><template case="false"> <lyte-dropdown data-zcqa="user_dd_type" class="cxUserDropdownInnerFilter filterDropDown cxBoxDropdown" lt-prop-selected="{{cxPropFilterSelected}}" on-option-selected="{{method(\'filterSelected\')}}" on-show="{{method(\'filterShow\')}}" on-before-show="{{method(\'filterBeforeShow\')}}" on-hide="{{method(\'filterHide\')}}" on-before-hide="{{method(\'filterBeforeHide\')}}" on-position-change="{{method(\'filterPositionChange\')}}" on-scroll="{{method(\'filterScroll\')}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="crux_dropbox_filter"> <lyte-drop-body> <template is="for" items="{{cxPropFilterOptions}}" item="item" index="index"> <lyte-drop-item data-zcqa="user_dd_type_{{item[cxPropFilterSystemValue]}}" data-value="{{item[cxPropFilterSystemValue]}}" class="{{if(ifEquals(item[cxPropFilterSystemValue],cxPropFilterSelected),\'result-selected\',\'\')}}">{{item[cxPropFilterUserValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template></template></template><template is="if" value="{{expHandlers(expHandlers(cxPropDisabled,\'!\'),\'&amp;&amp;\',cxPropSearchable)}}"><template case="true"> <span data-zcqa="user_dd_search_clear" class="{{if(cxPropInputValue,\'clearField\',\'\')}}" onclick="{{action(\'clearInputField\',event)}}" style="{{if(showSearchLoading,\'display:none\',\'display:inline-block\')}}"></span> <lyte-input data-zcqa="user_dd_search" class="userSearchBox" lt-prop-autocomplete="{{cxPropInputAutocomplete}}" lt-prop-placeholder="{{cxPropInputPlaceholder}}" lt-prop-autofocus="{{cxPropInputAutofocus}}" lt-prop-disabled="{{cxPropInputDisabled}}" lt-prop-style="{{cxPropInputStyle}}" lt-prop-readonly="{{cxPropInputReadonly}}" lt-prop-id="{{cxPropInputId}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-type="text" lt-prop-name="{{cxPropInputName}}" lt-prop-width="{{cxPropInputWidth}}" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-update-delay="{{updateDelay}}" lt-prop-appearance="{{cxPropInputAppearance}}" lt-prop-direction="{{cxPropInputDirection}}" lt-prop-wrapper-style="{{cxPropInputWrapperStyle}}" lt-prop-tab-index="{{cxPropInputTabindex}}" onkeydown="{{action(\'closeDropdown\',event)}}" oninput="{{action(\'findUsers\',event)}}" onfocus="{{action(\'closeInnerDropdown\',event)}}"></lyte-input> <span style="{{if(showSearchLoading,\'display:inline-block\',\'display:none\')}};" class="searchLoadingIcon cxUserDropboxSearchLoadingIcon"></span> </template></template> </div> </template></template> <lyte-drop-body class="bodyDropBody {{if(ifEquals(cxPropType,\'multiple\'),\'multiSelectDd\')}}" onmouseover="{{action(\'showUserInfoTooltip\',event)}}"> <template is="if" value="{{expHandlers(showLoading,\'&amp;&amp;\',expHandlers(cxPropShowSuggestion,\'!\'))}}"><template case="true"> <div class="loadingGifDiv cxUserDropboxInitialLoaderWrap cxAlignCenter"> <span class="cxUserDropboxItemsLoader loadingGif"></span> </div> </template><template case="false"><template is="if" value="{{cxPropShowSuggestion}}"><template case="true"> <lyte-drop-label>{{cxPropSuggestion.label}}</lyte-drop-label> <template is="if" value="{{cxPropShowSuggestionLoading}}"><template case="true"> <div class="cxFlexCenter cxUserDropdownLoadingWithZia"> <span class="cxUserDropboxItemsLoader"></span> </div> </template><template case="false"><template is="if" value="{{expHandlers(suggestedUsers.length,\'>\',0)}}"><template case="true"><template is="for" items="{{suggestedUsers}}" item="item" index="index"> <lyte-drop-item data-zcqa="user_dd_list_{{item[cxPropUserValue]}}" class="{{if(cxPropUserYield,\'\',if(ifEquals(cxPropType,\'single\'),if(ifEquals(cxPropSelectedUser.id,item.id),\'result-selected\',\'\'),\'\'))}} suggestedUser" data-value="{{item[cxPropSystemValue]}}" data-order="{{index}}"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <div class="cruxUserImgWrap mT5 noUserPhoto cxUserDropboxNoUserPhoto"> <span class="cruxUserImg"></span> </div> </template><template case="false"> <div class="cruxUserImgWrap mT5"> <img src="{{item.image_link}}" class="cruxUserImg"> </div> </template></template> <div class="userDetail mL10 {{if(item.allUsers,\'cruxDropAlluser\',\'\')}}"> <div class="userPrimaryDetail">{{item[cxPropUserValue]}}</div> <div class="userSecondaryDetail"> <span class="cxUserDdSecondaryMsg">{{item.email}}</span> <span class="cxUserDdSuggestUserPercentage">{{item.confidence_percentage}}%</span> </div> </div> </lyte-drop-item> </template></template><template case="false"> <div class="noUsersDiv">{{cxPropNoSuggestionValue}}</div> </template></template></template></template> <lyte-drop-label>Users</lyte-drop-label> <template is="if" value="{{showLoading}}"><template case="true"> <div class="cxFlexCenter cxUserDropdownLoadingWithZia"> <span class="cxUserDropboxItemsLoader"></span> </div> </template></template> </template></template><template is="for" items="{{systemData}}" item="item" index="index"> <lyte-drop-item data-zcqa="user_dd_list_{{item[cxPropUserValue]}}" class="{{if(cxPropUserYield,\'\',if(ifEquals(cxPropType,\'single\'),if(ifEquals(cxPropSelectedUser.id,item.id),\'result-selected\',\'\'),\'\'))}}" data-value="{{item[cxPropSystemValue]}}" data-order="{{index}}"> <template is="if" value="{{cxPropUserYield}}"><template case="true"> <lyte-yield yield-name="userYield" item-value="{{item}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <template is="if" value="{{item.loggedinuser}}"><template case="true"> <div class="cruxUserImgWrap loggedInUser"> <span class="cruxUserImg"></span> </div> </template><template case="false"><template is="if" value="{{item.allUsers}}"><template case="true"> <div class="cruxUserImgWrap allUsers"> <span class="allUsersImg"></span> </div> </template><template case="false"> <div class="cruxUserImgWrap noUserPhoto cxUserDropboxNoUserPhoto"> <span class="cruxUserImg"></span> </div> </template></template></template></template> </template><template case="false"> <div class="cruxUserImgWrap"> <img src="{{item.image_link}}" class="cruxUserImg"> </div> </template></template> <div class="userDetail mL10 {{if(item.allUsers,\'cruxDropAlluser\',\'\')}}"> <div class="userPrimaryDetail">{{item[cxPropUserValue]}}</div> <div class="userSecondaryDetail"> <span class="cxUserDdSecondaryMsg">{{item.email}}</span> </div> </div> </template></template> </lyte-drop-item> </template> <template is="if" value="{{cxPropShowSuggestion}}"><template case="true"> <div class="noUsersFoundDiv noUsersDiv" style="display: none">{{cruxGetI18n("crm.security.group.users.empty")}}</div> </template></template> <template is="if" value="{{showScrollLoading}}"><template case="true"> <div class="loadingGifDiv cxAlignCenter"> <span class="cxUserDropboxScrollLoaderIcon scrollLoadingGif"></span> </div> </template></template> </template></template> </lyte-drop-body> <template is="if" value="{{expHandlers(cxPropShowSuggestion,\'!\')}}"><template case="true"> <div class="noUsersFoundDiv noUsersDiv" style="display: none">{{emptyDataMessage}}</div> </template></template> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-drop-footer> <lyte-yield yield-name="userFooterYield"></lyte-yield> </lyte-drop-footer> </template></template> </lyte-drop-box> </template> </lyte-dropdown> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"text",position:[1,1,3,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["showSearchLoading","'display:none'","'display:inline-block'"]}}}},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["showSearchLoading","'display:inline-block'","'display:none'"]}},"';'"]}}}}]}},default:{}}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,0]},{type:"text",position:[1,3,3,1,0]},{type:"text",position:[1,3,3,3,0]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[5]},{type:"attr",position:[7]},{type:"if",position:[7],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3]},{type:"text",position:[3,1,0]},{type:"text",position:[3,3,1,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,7]},{type:"if",position:[3,7],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropFilterYield","cxPropFilterSystemValue","cxPropFilterUserValue","cxPropFilterTabindex","cxPropFilterOptions","cxPropFilterSelected","cxPropAppearance","cxPropCallout","cxPropBoxButtonWidth","cxPropUserFieldProperties","cxPropMandatory","cxPropTabindex","cxPropUserYield","cxPropUserButtonYield","cxPropType","cxPropSelected","cxPropUserValue","cxPropSystemValue","cxPropBoundary","cxPropInputAutocomplete","cxPropInputPlaceholder","cxPropInputAutofocus","cxPropInputDisabled","cxPropInputStyle","cxPropInputReadonly","cxPropInputId","cxPropInputClass","cxPropInputName","cxPropInputWidth","cxPropInputValue","cxPropInputAppearance","cxPropInputDirection","cxPropInputWrapperStyle","cxPropInputTabindex","cxPropPlaceholder","cxPropRecords","cxPropSearchable","cxPropMinLength","cxPropFilterable","cxPropForcedFetch","systemData","addedItems","cxProoPerPage","cxPropSearchPerPage","cxPropSelectedUser","cxPropSelectedUsers","cxPropExclude","cxPropNoUserLabel","cxPropZcqa","cxPropCriteria","cxPropSearchCriteria","cxPropLoginUserRequired","cxPropDisabled","cxPropQueryParam","cxPropAllUserNeeded","cxPropPosition","cxPropClass","cxPropScope","updateDelay","noUserSelected","cxPropMaxLimit","cxPropFreeze","showSearchLoading","cxPropDropdownIconClass","cxPropSuggestion","suggestedUsers","cxPropShowSuggestion","cxPropShowSuggestionLoading","cxPropNoSuggestionValue","cxPropIsSubordinate","cxPropEmptyDataMessage","cxPropFooterYield","cxPropSelectedUsrImg","cxPropBoxClass","cxPropPreventParentScroll","cxPropIsDropdownIconNode","cxPropDropdownIconNodeClass","cxPropSkipUserFieldRequest","cxPropAria","cxpropAriaAttributes","cxpropAriaButton","cxpropAriaBox","cxpropAriaBody","cxPropDataTabindex","cxPropErrorIconClass","cxPropShowAllSelectedMessage","cxPropAllSelectedMessage","emptyDataMessage"],init:function(){if(this.cacheQuery=!this.getData("cxPropForcedFetch"),this.dataCache=!1,this.currentPos=0,this.localData=[],this.pageNo=1,this.isSearch=!1,this.areRecordsAvailable=!0,this.activeUsersData=[],this.activeUsersPageNo=1,this.allActiveUsersFetched=!1,this.prevSearchChars="",this.doesUserHasFirstName=!this.data.cxPropSkipUserFieldRequest,this.doesUserHasLastName=!this.data.cxPropSkipUserFieldRequest,this.getData("cxPropSearchable")&&this.getData("cxPropMinLength")<1&&this.setData("cxPropMinLength",1),this.getData("cxPropFilterable")){if(this.getData("cxPropFilterYield")&&!this.getData("cxPropFilterSelected")&&this.setData("cxPropFilterSelected","ActiveUsers"),!this.getData("cxPropFilterYield"))if(0===(t=this.getData("cxPropFilterOptions")).length){var e=this.getDefaultFilters();this.setData("cxPropFilterOptions",e),this.getData("cxPropFilterSelected")||this.setData("cxPropFilterSelected",e[0].id)}else{var t=this.getData("cxPropFilterOptions"),a=this.getData("cxPropFilterSystemValue");this.getData("cxPropFilterSelected")||this.setData("cxPropFilterSelected",t[0][a])}}else this.getData("cxPropFilterSelected")||this.setData("cxPropFilterSelected","ActiveUsers");var o=this.getData("cxPropType");if("single"===o){this.getData("cxPropNoUserLabel")||this.getData("cxPropPlaceholder")||this.setData("cxPropNoUserLabel",_cruxUtils.getI18n("crm.label.picklist.none"));var i=this.getData("cxPropSelectedUser");i?this.setData("cxPropSelected",i.id?i.id:""):this.setData("cxPropSelectedUser",{})}else if("multiple"===o){this.getData("cxPropNoUserLabel")||this.setData("cxPropNoUserLabel",_cruxUtils.getI18n("crm.label.picklist.none"));var r=this.getData("cxPropSelectedUsers");r||(r=[],this.setData("cxPropSelectedUsers",r));var s=r?r.length:0;if(s){for(var l=[],n=0;n<s;n++)l[n]=r[n].id;this.setData("cxPropSelected",JSON.stringify(l)),this.setData("addedItems",r)}else this.setData("noUserSelected","cxNoUserSelected lyteDropNoOptSelected")}},data:function(){return{cxPropFilterYield:Lyte.attr("boolean",{default:!1}),cxPropFilterSystemValue:Lyte.attr("string",{default:"id"}),cxPropFilterUserValue:Lyte.attr("string",{default:"category"}),cxPropFilterTabindex:Lyte.attr("string",{default:"0"}),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropFilterSelected:Lyte.attr("string",{default:""}),cxPropAppearance:Lyte.attr("string",{default:""}),cxPropCallout:Lyte.attr("boolean",{default:!1}),cxPropBoxButtonWidth:Lyte.attr("string",{default:"min-button"}),cxPropUserFieldProperties:Lyte.attr("object",{default:{}}),cxPropMandatory:Lyte.attr("boolean"),cxPropTabindex:Lyte.attr("string",{default:"0"}),cxPropUserYield:Lyte.attr("boolean",{default:!1}),cxPropUserButtonYield:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"single"}),cxPropSelected:Lyte.attr("string",{default:""}),cxPropUserValue:Lyte.attr("string",{default:"full_name"}),cxPropSystemValue:Lyte.attr("string",{default:"id"}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropInputAutocomplete:Lyte.attr("string",{default:"off"}),cxPropInputPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.search.for.users")}),cxPropInputAutofocus:Lyte.attr("boolean",{default:!0}),cxPropInputDisabled:Lyte.attr("boolean",{default:!1}),cxPropInputStyle:Lyte.attr("string",{default:""}),cxPropInputReadonly:Lyte.attr("boolean",{default:!1}),cxPropInputId:Lyte.attr("string",{default:"inputId"}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropInputName:Lyte.attr("string",{default:""}),cxPropInputWidth:Lyte.attr("string",{default:""}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropInputAppearance:Lyte.attr("string",{default:"flat"}),cxPropInputDirection:Lyte.attr("string",{default:"vertical"}),cxPropInputWrapperStyle:Lyte.attr("string",{default:""}),cxPropInputTabindex:Lyte.attr("string",{default:"0"}),cxPropPlaceholder:Lyte.attr("string",{default:""}),cxPropRecords:Lyte.attr("number",{default:50}),cxPropSearchable:Lyte.attr("boolean",{default:!0}),cxPropMinLength:Lyte.attr("number",{default:1}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),systemData:Lyte.attr("array",{default:[]}),addedItems:Lyte.attr("array",{default:[]}),cxProoPerPage:Lyte.attr("number",{default:200}),cxPropSearchPerPage:Lyte.attr("number",{default:200}),cxPropSelectedUser:Lyte.attr("object",{default:{},hideAttr:!0}),cxPropSelectedUsers:Lyte.attr("array",{default:[]}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropNoUserLabel:Lyte.attr("string",{default:""}),cxPropZcqa:Lyte.attr("string",{default:""}),cxPropCriteria:Lyte.attr("string",{default:""}),cxPropSearchCriteria:Lyte.attr("string",{default:""}),cxPropLoginUserRequired:Lyte.attr("boolean",{default:!1}),cxPropDisabled:Lyte.attr("boolean",{default:!1}),cxPropQueryParam:Lyte.attr("object",{default:{}}),cxPropAllUserNeeded:Lyte.attr("boolean",{default:!1}),cxPropPosition:Lyte.attr("string",{default:"down"}),cxPropClass:Lyte.attr("string",{default:""}),cxPropScope:Lyte.attr("string",{default:""}),updateDelay:Lyte.attr("number",{default:void 0}),noUserSelected:Lyte.attr("string",{default:""}),cxPropMaxLimit:Lyte.attr("number",{default:500}),cxPropFreeze:Lyte.attr("boolean",{default:!1}),showSearchLoading:Lyte.attr("boolean",{default:!1}),cxPropDropdownIconClass:Lyte.attr("string",{default:"dropdown"}),cxPropSuggestion:Lyte.attr("object",{default:{label:"Zia Suggestion",users:[]}}),suggestedUsers:Lyte.attr("array",{default:[]}),cxPropShowSuggestion:Lyte.attr("boolean",{default:!1}),cxPropShowSuggestionLoading:Lyte.attr("boolean",{default:!1}),cxPropNoSuggestionValue:Lyte.attr("string",{default:"No Suggestions Found"}),cxPropIsSubordinate:Lyte.attr("boolean",{default:!1}),cxPropEmptyDataMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.security.group.users.empty")}),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropSelectedUsrImg:Lyte.attr("boolean",{default:!1}),cxPropBoxClass:Lyte.attr("string"),cxPropPreventParentScroll:Lyte.attr("boolean"),cxPropIsDropdownIconNode:Lyte.attr("boolean",{default:!1}),cxPropDropdownIconNodeClass:Lyte.attr("string"),cxPropSkipUserFieldRequest:Lyte.attr("boolean",{default:!1}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxpropAriaAttributes:Lyte.attr("object",{default:{}}),cxpropAriaButton:Lyte.attr("object",{default:{}}),cxpropAriaBox:Lyte.attr("object",{default:{}}),cxpropAriaBody:Lyte.attr("object",{default:{}}),cxPropDataTabindex:Lyte.attr("string"),cxPropErrorIconClass:Lyte.attr("string"),cxPropShowAllSelectedMessage:Lyte.attr("boolean",{default:!0}),cxPropAllSelectedMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.usrpop.all.selected")}),emptyDataMessage:Lyte.attr("string",{default:""})}},didConnect:function(){this.outerDropdown=this.$node.querySelector("lyte-dropdown"),this.outerDropdownBody=this.outerDropdown.querySelector("lyte-drop-body.bodyDropBody"),this.outerDropdownBox=this.outerDropdown.querySelector("lyte-drop-box"),this.innerDropdown=this.outerDropdown.querySelector("lyte-dropdown");var e=this.getData("cxPropType");this.getData("addedItems");if("single"===e&&!this.getData("cxPropUserButtonYield")){var t=this.outerDropdown,a=this.getData("cxPropSelectedUser");if(!a.hasOwnProperty(this.data.cxPropSystemValue)||!a.hasOwnProperty(this.data.cxPropUserValue))t.querySelector("lyte-drop-button").className="grayColor"}this.addTitle(),this.$node.open=function(){this.outerDropdown.open()}.bind(this),this.$node.close=function(){this.outerDropdown.close()}.bind(this),this.$node.toggle=function(){this.outerDropdown.toggle()}.bind(this),this.$node.resetPosition=function(){this.outerDropdown.resetPosition()}.bind(this)},scrollToEnd:function(){var e=$L(".cxUserDropButton",this.outerDropdown);e&&e.scrollTop(e[0].scrollHeight)},getSubordinateQp:function(){if(this.getData("cxPropIsSubordinate")){var e={feature:"subordinates"};return e.related_entity_id=Crm.userDetails.USER_ID,e}},didDestroy:function(){var e=this.getData("cxPropFilterOptions"),t=this.getData("cxPropFilterSystemValue");this.pageNo=1,e.forEach(function(e){"ActiveUsers"!==e[t]&&(this.setData("cxPropFilterSelected",e[t]),store.clearCachedQuery("user",this.getQueryParams()))}.bind(this)),clearTimeout(this._timeout)},addTitle:function(){$L.fastdom.measure(function(){this.getData("cxPropSelectedUser");var e=this.getData("addedItems");if(e.length>0)for(var t=this.outerDropdown.querySelectorAll(".lyteMultipleSelect .lyteDropdownVisible"),a=t.length,o=0;o<a;o++)t[o].scrollWidth>t[o].offsetWidth&&(t[o].setAttribute("lt-prop-tooltip-config",JSON.stringify({keeptooltip:!0})),t[o].setAttribute("lt-prop-title",e[o][this.data.cxPropUserValue]))}.bind(this))},selectedUsersObserver:function(){var e=this.getData("cxPropSelectedUsers");this.setData("addedItems",e),0===e.length?this.setData("noUserSelected","cxNoUserSelected lyteDropNoOptSelected"):this.setData("noUserSelected",""),this.outerDropdown.ltProp("selected",e.map((function(e){return e.id}))),this.createRemoveErrorDiv()}.observes("cxPropSelectedUsers.[]"),filterableObserver:function(){if(0===this.getData("cxPropFilterOptions").length){var e=this.getDefaultFilters();this.setData("cxPropFilterOptions",e);var t=this.getData("cxPropFilterSelected"),a=e.filter((function(e){return e.id===t})),o=this.outerDropdown.component.childComp;this.innerDropdown=o?o.querySelector("lyte-dropdown"):null,this.innerDropdown&&this.innerDropdown.ltProp("displayValue",a[0].category)}}.observes("cxPropFilterable"),setSuggestedUsers:function(){this.data.cxPropShowSuggestion&&(this.data.cxPropInputValue.length>1?this.setSearchDataForSuggestion(this.data.cxPropInputValue):this.setData("suggestedUsers",this.data.cxPropSuggestion.users),this.data.suggestedUsers.length>0&&this.setData("cxPropShowSuggestionLoading",!1))}.observes("cxPropSuggestion.users").on("didConnect"),getEmptyMessage:function(){var e;if(this.getData("cxPropShowAllSelectedMessage")){var t=this.getData("systemData").length,a=this.getData("cxPropEmptyDataMessage");e=t===this.getData("cxPropSelectedUsers").length?0===t?a:this.getData("cxPropAllSelectedMessage"):a}else e=a;return e},createRemoveErrorDiv:function(){if(this.$node.querySelector("lyte-dropdown").ltProp("show")){for(var e=this.getData("cxPropType"),t=this.$node.querySelector("lyte-dropdown").component.childComp.querySelectorAll("lyte-drop-body.bodyDropBody lyte-drop-item:not(.lyteDropdownActive)"),a=[],o=t.length,i=0;i<o;i++){"none"!==(t[i].style?t[i].style.display:"")&&a.push(t[i])}var r=a.length,s=this.$node.querySelector("lyte-dropdown").component.childComp.querySelector("lyte-drop-body.bodyDropBody");if("multiple"===e&&r>0||"single"===e&&r>0){this.outerDropdownBox;(l=this.outerDropdownBox.querySelector(".noUsersFoundDiv"))&&(this.setData("emptyDataMessage",""),l.style.display="none",s.style.display="block")}else if("multiple"===e&&0==r||"single"===e&&0==r){this.outerDropdownBox;var l=this.outerDropdownBox.querySelector(".noUsersFoundDiv");this.setData("emptyDataMessage",this.getEmptyMessage()),l&&"none"===l.style.display&&(l.style.display="block",this.data.cxPropShowSuggestion||(s.style.display="none"))}}},getQueryParams:function(e){var t={};t.type=this.getData("cxPropFilterSelected");var a=this.getData("cxPropInputValue");if("search"===e){if(a=(a=a.replace(/\(/g,"\\(").replace(/\)/g,"\\)")).trim())if(this.getMethods("setSearchCriteria")){var o=this.executeMethod("setSearchCriteria",a);for(var i in o)t[i]=o[i]}else{var r,s=this.getData("cxPropSearchCriteria");this.doesUserHasFirstName&&this.doesUserHasLastName?r=s?"(((first_name:starts_with:"+a+")or(last_name:starts_with:"+a+")or(full_name:starts_with:"+a+")or(email:starts_with:"+a+"))and"+s+")":"((first_name:starts_with:"+a+")or(last_name:starts_with:"+a+")or(full_name:starts_with:"+a+")or(email:starts_with:"+a+"))":this.doesUserHasLastName?r=s?"(((last_name:starts_with:"+a+")or(full_name:starts_with:"+a+")or(email:starts_with:"+a+"))and"+s+")":"((last_name:starts_with:"+a+")or(full_name:starts_with:"+a+")or(email:starts_with:"+a+"))":this.doesUserHasFirstName&&(r=s?"(((first_name:starts_with:"+a+")or(full_name:starts_with:"+a+")or(email:starts_with:"+a+"))and"+s+")":"((first_name:starts_with:"+a+")or(full_name:starts_with:"+a+")or(email:starts_with:"+a+"))"),this.getData("cxPropIsSubordinate")?(t.search={},t.search.criteria=r):t.criteria=r}a.length>=this.getData("cxPropMinLength")?t.per_page=this.getData("cxPropSearchPerPage"):t.per_page=this.getData("cxProoPerPage"),t.page=this.pageNo}else{t.per_page=this.getData("cxProoPerPage"),"ActiveUsers"===this.getData("cxPropFilterSelected")?t.page=this.activeUsersPageNo:t.page=this.pageNo;var l=this.getData("cxPropCriteria");l&&(t.filters=l)}var n=this.getData("cxPropQueryParam");for(var i in n)t[i]=n[i];var c=this.getSubordinateQp();if(c)for(var i in c)t[i]=c[i];return t},errorHandling:function(){console.error("Error: user data could not be fetched."),this.setData("showSearchLoading",!1),this.setData("showLoading",!1),this.setData("showScrollLoading",!1),this.localData=[],this.setData("systemData",[]),this.createRemoveErrorDiv.call(this)},usersUtil:function(e,t){this.setData("filterChanged",!1),this.setData("showSearchLoading",!1),this.setData("showLoading",!1);this.$node.querySelector(".outerDropdown").component.childComp.querySelector(".userDropbox lyte-input");var a,o=this.getData("cxPropFilterSelected"),i=this.getData("cxPropAllUserNeeded"),r=[];(!this.isSearch&&i&&r.push({full_name:_cruxUtils.getI18n("AllUsers"),id:"All",email:"",allUsers:!0}),e)?(e.meta?a=e.meta:e.$&&(a=e.$.meta),this.areRecordsAvailable=!!a&&a.more_records):this.areRecordsAvailable=!1;if(e&&e.constructor==Object&&(e=e.user?e.user:e.users),("INVALID_DATA"===e||e&&e.$&&!0===e.$.isError)&&console.error("Error: format of query params for cxPropCriteria is incorrect."),e&&e.constructor===Array&&e.length>0){this.pageNo+=1;var s=this.getData("cxPropFilterSelected"),l=(i=this.getData("cxPropAllUserNeeded"),this.getData("cxPropLoginUserRequired"));this.isSearch||!l&&!i?this.localData=[]:(!l||"AllUsers"!==s&&"ActiveUsers"!==s||r.push({full_name:_cruxUtils.getI18n("current.logged.in.user"),id:"${CURRENTUSER}",email:_cruxUtils.getI18n("current.logged.in.user.definition"),loggedinuser:!0}),this.localData=r),Lyte.arrayUtils(this.localData,"push",e),"ActiveUsers"===o&&(this.activeUsersData=this.localData,this.activeUsersPageNo+=1),(!e||e.length<this.getData("cxProoPerPage"))&&"ActiveUsers"===o&&(this.allActiveUsersFetched=!0),this.currentPos=0,this.paintUsers.call(this),this.outerDropdown.component.childComp&&(this.outerDropdown.component.childComp.querySelector("lyte-drop-body").scrollTop=0)}else"ActiveUsers"===o&&(this.allActiveUsersFetched=!0),this.setData("systemData",r),this.localData=r,this.createRemoveErrorDiv.call(this)},fetchUsers:function(e,t,a){var o=this.getData("cxPropFilterSelected"),i=this.getData("cxPropInputValue");if(0===i.length||0!==i.trim().length){this.areRecordsAvailable=!0;var r=this.prevSearchChars,s=!1;i.startsWith(r)||(s=!0),this.prevSearchChars=i;var l="search"===e&&this.localData.length>0;if("search"!==e||l||(this.setData("showSearchLoading",!1),this.setData("showLoading",!1)),"search"!==e&&"ActiveUsers"!==o||"search"!==e&&"ActiveUsers"===o&&!this.activeUsersData.length>0||"search"===e&&(l||a||s)){if(this.isSearch&&i.length>=this.getData("cxPropMinLength")){if(!i.trim())return;if(this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user","search",this.getQueryParams(e),this.getData("cxPropInputValue"))).constructor===Promise&&Promise.resolve(n).then(function(e){this.getData("cxPropInputValue")&&this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else this.getData("cxPropIsSubordinate")?store.triggerAction("user","get_assigned",this.getQueryParams(e)).then(function(e){this.getData("cxPropInputValue")&&(this.data.cxPropShowSuggestion&&this.data.cxPropSuggestion.users.length&&this.setSearchDataForSuggestion(this.data.cxPropInputValue),this.usersUtil(e,t))}.bind(this),function(){this.errorHandling.call(this)}.bind(this)):store.triggerAction("user","search",this.getQueryParams(e)).then(function(e){this.getData("cxPropInputValue")&&(this.data.cxPropShowSuggestion&&this.data.cxPropSuggestion.users.length&&this.setSearchDataForSuggestion(this.data.cxPropInputValue),this.usersUtil(e,t))}.bind(this),function(){this.errorHandling.call(this)}.bind(this))}else if("search"===e&&this.isSearch||"search"!==e){if("search"===e&&this.isSearch&&(this.activeUsersPageNo=1),this.dataCache="ActiveUsers"===o&&!1===this.getData("cxPropForcedFetch"),this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),this.cacheQuery,this.dataCache)).constructor===Promise&&Promise.resolve(n).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else this.getData("cxPropIsSubordinate")?store.triggerAction("user","get_assigned",this.getQueryParams()).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this)):store.findAll("user",this.getQueryParams(),this.cacheQuery,this.dataCache).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this))}}else if("search"!==e&&"ActiveUsers"===o&&this.activeUsersData.length>0){var n;if(this.setData("filterChanged",!1),this.getData("cxPropForcedFetch"))if(this.dataCache=!1,this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),this.cacheQuery,this.dataCache)).constructor===Promise&&Promise.resolve(n).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else this.getData("cxPropIsSubordinate")?store.triggerAction("user","get_assigned",this.getQueryParams()).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this)):store.findAll("user",this.getQueryParams(),this.cacheQuery,this.dataCache).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else if(this.setData("showSearchLoading",!1),this.setData("showLoading",!1),this.getMethods("onCustomUserRequest"))(n=this.executeMethod("onCustomUserRequest","user",this.getQueryParams())).constructor===Promise&&Promise.resolve(n).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));else this.getData("cxPropIsSubordinate")?store.triggerAction("user","get_assigned",this.getQueryParams()).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this)):store.findAll("user",this.getQueryParams()).then(function(e){this.usersUtil(e,t)}.bind(this),function(){this.errorHandling.call(this)}.bind(this));this.outerDropdown.component.childComp&&(this.outerDropdown.component.childComp.querySelector("lyte-drop-body").scrollTop=0),this.createRemoveErrorDiv.call(this)}}},filterObs:function(){var e=this.$node.querySelector("lyte-dropdown.outerDropdown").component.childComp.querySelector(".noUsersFoundDiv");e&&e.setAttribute("style","display:none"),this.getData("cxPropForcedFetch")&&(this.activeUsersPageNo=1,this.allActiveUsersFetched=!1),this.setData("filterChanged",!0),this.setData("showLoading",!0),this.activeUsersPageNo=1,this.pageNo=1,this.setData("cxPropInputValue",""),this.isSearch=!1,this.fetchUsers.call(this)}.observes("cxPropFilterSelected"),fetchUsersByBatch:function(e,t,a){for(var o=[],i=e.length,r=t;r<i&&o.length!=a;r++)o.push(e[r]);return this.currentPos=r,o},paintNextUsers:function(e){this.setData("showScrollLoading",!1);var t,a=this.getData("cxPropFilterSelected");(this.setData("reqPending",!1),e)?(e.meta?t=e.meta:e.$&&(t=e.$.meta),this.areRecordsAvailable=!!t&&t.more_records):this.areRecordsAvailable=!1;e&&e.constructor==Object&&(e=e.user?e.user:e.users),e&&e.constructor===Array?(this.pageNo+=1,e&&(Lyte.arrayUtils(this.localData,"concat",e),"ActiveUsers"===a&&(this.activeUsersData=this.localData,this.activeUsersPageNo+=1)),(!e||e.length<this.getData("cxProoPerPage"))&&"ActiveUsers"===a&&(this.allActiveUsersFetched=!0),this.paintUsers.call(this)):("ActiveUsers"===a&&(this.allActiveUsersFetched=!0),this.createRemoveErrorDiv.call(this))},paintUsers:function(e){var t=this.getData("cxPropFilterSelected"),a=this.outerDropdownBox.classList.contains("lyteDropdownHidden"),o=this.localData,i=this.getData("cxPropRecords"),r=this.currentPos,s=this.getData("systemData");this.getData("addedItems");if(r<o.length){i=o.length-r>i?i:o.length-r;var l=this.fetchUsersByBatch.call(this,o,r,i);0===r?this.setData("systemData",l):Lyte.arrayUtils(s,"push",l);var n=this.getData("cxPropExclude"),c=this.getData("systemData"),p=this.$node.querySelector("lyte-dropdown").component.childComp;p&&c.forEach((function(e){if(-1!==n.indexOf(e.id)){var t=p.querySelector("lyte-drop-item[data-value='"+e.id+"']");t&&(t.style.display="none")}})),"multiple"==this.getData("cxPropType")&&(this.outerDropdown.component.hideNodes.call(this.outerDropdown.component),this.getData("cxPropLoginUserRequired")?this.currentPos-1<=this.getData("cxPropSelectedUsers").length&&this.paintUsers():this.currentPos<=this.getData("cxPropSelectedUsers").length&&this.paintUsers()),this.getData("showScrollLoading")||this.createRemoveErrorDiv()}else if(!a){var d;if("multiple"==this.getData("cxPropType")&&this.outerDropdown.component.hideNodes.call(this.outerDropdown.component),this.areRecordsAvailable)if("ActiveUsers"!==t||"ActiveUsers"===t&&!this.allActiveUsersFetched)if(!this.getData("reqPending"))if(this.setData("reqPending",!0),this.isSearch&&this.getData("cxPropInputValue").length>=this.getData("cxPropMinLength"))if(this.setData("showScrollLoading",!0),this.getMethods("onCustomUserRequest"))(d=this.executeMethod("onCustomUserRequest","user","search",this.getQueryParams(e))).constructor===Promise&&Promise.resolve(d).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this));else this.getData("cxPropIsSubordinate")?store.triggerAction("user","get_assigned",this.getQueryParams(e)).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this)):store.triggerAction("user","search",this.getQueryParams(e)).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this));else if(this.setData("showScrollLoading",!0),this.getMethods("onCustomUserRequest"))(d=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),!1,!1)).constructor===Promise&&Promise.resolve(d).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this));else this.getData("cxPropIsSubordinate")?store.triggerAction("user","get_assigned",this.getQueryParams()).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this)):store.findAll("user",this.getQueryParams(),!1,!1).then(function(e){this.paintNextUsers(e)}.bind(this),function(){this.setData("reqPending",!1),this.errorHandling.call(this)}.bind(this))}},excludeObserver:function(){this.getData("cxPropType");var e=this.getData("cxPropExclude"),t=this.getData("systemData"),a=this.$node.querySelector("lyte-dropdown").component.childComp;if(a){for(var o=0;o<e.length;o++){var i=a.querySelector("lyte-drop-item[data-value='"+e[o]+"']");i&&(i.style.display="none")}t.forEach((function(t){if(-1===e.indexOf(t.id)){var o=a.querySelector("lyte-drop-item[data-value='"+t.id+"']");o&&(o.style.display="")}}))}this.createRemoveErrorDiv()}.observes("cxPropExclude.[]"),searchUsers:function(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(function(){this.allActiveUsersFetched=!1;var a=this.getData("cxPropInputValue").trim(),o=this.getData("cxPropMinLength");this.$node.querySelector(".outerDropdown").component.childComp.querySelector(".userDropbox lyte-input");this.pageNo=1,(this.isSearch||a.length>=o)&&(this.isSearch=!0,a.length>=o&&(this.setData("showSearchLoading",!0),this.fetchUsers.call(this,"search",e))),0==a.length&&(this.isSearch=!0,this.setData("showSearchLoading",!1),this.fetchUsers.call(this,"search",e,t),this.data.cxPropShowSuggestion&&this.data.cxPropSuggestion.users.length&&this.setData("suggestedUsers",this.data.cxPropSuggestion.users),this.isSearch=!1)}.bind(this),300)},openDropdown:function(e,t,a){var o=this.getData("cxPropFilterSelected"),i=!0,r=this.getData("cxPropUserFieldProperties");r&&Object.keys(r).length&&(r.firstName||!1===r.firstName||r.lastName||!1===r.lastName?(i=!1,this.doesUserHasFirstName=r.firstName,this.doesUserHasLastName=r.lastName):i=!0),i&&!this.data.cxPropSkipUserFieldRequest&&store.findAll("field",{module:"users"},!1,!1).then(function(e){var t=[];e.constructor===Object?t=e.field?e.field:e.fields:e.constructor===Array&&(t=e);var a=t?t.length:0;if(a){for(var o=!1,i=!1,r=0;r<a&&("first_name"===t[r].api_name?o=!0:"last_name"===t[r].api_name&&(i=!0),!o||!i);r++);this.doesUserHasFirstName=o,this.doesUserHasLastName=i}}.bind(this),function(e){this.doesUserHasFirstName=!1,this.doesUserHasLastName=!1}.bind(this)),this.setData("dataFetched",!0),this.setData("showLoading",!1),this.setData("dataPending",!1),this.localData=[],this.currentPos=0,this.systemData=[];var s,l=[];(this.getData("cxPropAllUserNeeded")&&(l.push({full_name:_cruxUtils.getI18n("AllUsers"),id:"All",email:"",allUsers:!0}),this.localData=l),e)?(e.meta?s=e.meta:e.$&&(s=e.$.meta),this.areRecordsAvailable=!!s&&s.more_records):this.areRecordsAvailable=!1;if(e&&e.constructor==Object&&(e=e.user?e.user:e.users),"INVALID_DATA"===e&&console.error("Error: format of query params for cxPropCriteria is incorrect."),e&&e.constructor===Array&&e.length>0){this.pageNo+=1;var n=this.getData("cxPropFilterSelected"),c=this.getData("cxPropLoginUserRequired");c&&(!c||"AllUsers"!==n&&"ActiveUsers"!==n||l.push({full_name:_cruxUtils.getI18n("current.logged.in.user"),id:"${CURRENTUSER}",email:_cruxUtils.getI18n("current.logged.in.user.definition"),loggedinuser:!0}),this.localData=l),Lyte.arrayUtils(this.localData,"push",e),"ActiveUsers"===n&&(this.activeUsersData=this.localData,this.activeUsersPageNo+=1),e.length<this.getData("cxProoPerPage")&&"ActiveUsers"===n&&(this.allActiveUsersFetched=!0),this.paintUsers.call(this),a.getDropBody(a.childComp).classList.add("_lyteDummyClass")}else"ActiveUsers"===o&&(this.allActiveUsersFetched=!0),this.createRemoveErrorDiv.call(this);this.getMethods("onUserShow")&&this.executeMethod("onUserShow",t,a)},actions:{findUsers:function(e){this.searchUsers(e)},showUserInfoTooltip:function(e){if(!this.getData("cxPropUserYield")){e.stopPropagation();var t=e.target;clearTimeout(this.tooltipTimeout),t&&(t.classList.contains("userPrimaryDetail")||t.classList.contains("cxUserDdSecondaryMsg"))&&t.scrollWidth>t.offsetWidth&&(t.setAttribute("lt-prop-tooltip-config",JSON.stringify({keeptooltip:!0,position:"bottom"})),t.setAttribute("lt-prop-title",t.innerText),t.setAttribute("lt-prop-tooltip-class","cxUserDropboxTooltip"))}},closeDropdown:function(e){var t=e.key?e.key.toLowerCase():"";"esc"!==t&&"escape"!==t||this.$node.querySelector(".outerDropdown").close()},clearInputField:function(e){this.actions.closeInnerDropdown.call(this),this.setData("cxPropInputValue",""),this.outerDropdownBox.querySelector(".userSearchBox").focus(),this.searchUsers(e,!0)},closeInnerDropdown:function(){var e=this.$node.querySelector(".outerDropdown").component.childComp.querySelector(".filterDropDown");e&&e.close()}},methods:{userSelected:function(e,t,a,o){if(e&&e.stopPropagation(),"single"===this.getData("cxPropType")){for(var i,r=this.outerDropdown,s=(this.getData("cxPropFilterSelected"),o.classList.contains("suggestedUser")?this.getData("suggestedUsers"):this.getData("systemData")),l=s.length,n=0;n<l;n++)if(s[n].id===t){i=s[n];break}this.setData("cxPropSelectedUser",i);var c=r.querySelector("lyte-drop-button");if(c.className="",!this.getData("cxPropUserButtonYield")){c.querySelector(".lyteDropdownLabel");this.addTitle()}this.setData("cxPropInputValue",""),this.isSearch=!0,this.searchUsers(void 0,!0)}this.getMethods("onUserSelected")&&this.executeMethod("onUserSelected",e,i,a,o)},userBeforeShow:function(e,t){if(this.getMethods("onUserBeforeShow")){var a=this.executeMethod("onUserBeforeShow",e,t);if(!1===a)return a}var o=this.getData("cxPropFilterSelected");if(!0===this.getData("cxPropForcedFetch")||!this.getData("dataFetched")&&!this.getData("dataPending")){if(this.setData("dataPending",!0),this.dataCache="ActiveUsers"===o&&!1===this.getData("cxPropForcedFetch"),!0===this.getData("cxPropForcedFetch")&&(this.localData=[],this.setData("systemData",[]),this.currentPos=0,this.pageNo=1,this.activeUsersPageNo=1),this.getMethods("onCustomUserRequest")){var i=this.executeMethod("onCustomUserRequest","user",this.getQueryParams(),this.cacheQuery,this.dataCache);i.constructor===Promise&&Promise.resolve(i).then(function(a){this.openDropdown(a,e,t),t.$node.resetPosition()}.bind(this),function(){this.setData("dataPending",!0),this.errorHandling.call(this)}.bind(this))}else this.getData("cxPropIsSubordinate")?store.triggerAction("user","get_assigned",this.getQueryParams()).then(function(a){this.openDropdown(a,e,t),t.$node.resetPosition()}.bind(this),function(){this.setData("dataPending",!0),this.errorHandling.call(this)}.bind(this)):store.findAll("user",this.getQueryParams(),this.cacheQuery,this.dataCache).then(function(a){this.openDropdown(a,e,t),t.$node.resetPosition()}.bind(this),function(){this.setData("dataPending",!0),this.errorHandling.call(this)}.bind(this));this.setData("showLoading",!0)}},userShow:function(e,t){if(!this.getData("showLoading")&&this.getMethods("onUserShow")&&this.executeMethod("onUserShow",e,t),!this.getData("cxPropDisabled")&&this.getData("cxPropSearchable")){var a=this.$node.querySelector("lyte-dropdown");a.ltProp("show")&&a.component.childComp.querySelector(".userSearchBox").focus()}var o=this.outerDropdown.component.childComp,i=o?o.querySelector("lyte-dropdown"):null;if(this.getData("cxPropFilterable")&&i&&!i.ltProp("displayValue")){var r=this.getData("cxPropFilterSelected"),s=this.getData("cxPropFilterOptions").filter((function(e){return e.id===r}));i.ltProp("displayValue",s[0].category)}if(this.$node.cxProp("aria")){var l=Lyte.registeredMixins["crux-aria-dropdown-mixin"],n=this;this.$node&&(n=this.$node),n.querySelector("lyte-dropdown")&&(n=n.querySelector("lyte-dropdown"));var c=n;c.component.childComp&&(c=c.component.childComp),c&&"LYTE-DROP-BOX"==c.tagName&&!$L(c).attr("keyListen")&&(c.listener=l.keyEvent.bind(c),c.addEventListener("keydown",c.listener),$L(c).attr("keyListen",!0))}},userBeforeHide:function(e,t){var a=t.childComp.querySelector("div.wrapperdiv");if(a){var o=a.querySelector("#inputId"),i=a.querySelector("lyte-dropdown");if(e&&a.contains(e.target)&&(i&&e.shiftKey&&!i.contains(e.target)||o&&!e.shiftKey&&e.target!=o))return!1}if(this.getMethods("onUserBeforeHide"))return this.executeMethod("onUserBeforeHide",e,t)},userHide:function(e,t){var a=t.childComp.querySelector("lyte-dropdown");a&&a.component.childComp&&!a.component.childComp.classList.contains("lyteDropdownHidden")&&a.toggle(),this.setData("cxPropInputValue",""),this.isSearch&&this.searchUsers(void 0,!0),this.getMethods("onUserHide")&&this.executeMethod("onUserHide",e,t)},userAdd:function(e,t,a,o,i){var r=!0,s=JSON.parse(a);s.length>this.getData("cxPropMaxLimit")&&(this.getMethods("onUserDropLimitErr")?this.executeMethod("onUserDropLimitErr"):this.cxPropMaxLimitMessageBox(),r=!1);var l=this.$node.querySelector("lyte-dropdown").component.childComp.querySelector(".wrapperdiv lyte-dropdown");if(l&&l.component.childComp&&!l.component.childComp.classList.contains("lyteDropdownHidden")&&l.toggle(),r){for(var n,c=this.getData("systemData"),p=this.getData("addedItems"),d=this.getData("cxPropSystemValue"),u=c.length,h=0;h<u;h++)if(c[h][d]==t){n=c[h];break}if(this.getMethods("onUserAdd")){var m=p.slice();m.push(n),r=this.executeMethod("onUserAdd",e,n,m,o)}}if(!1===r){var y=s.filter((function(e){return e!==t}));o.$node.ltProp("selected",JSON.stringify(y))}else{Lyte.arrayUtils(p,"push",n);var x=this.outerDropdownBody;x&&parseInt(x.scrollHeight)==parseInt(x.offsetHeight)&&this.paintUsers.call(this);this.$node.querySelector(".lyteMultipleSelect li[data-value='"+n.id+"'] .lyteDropdownVisible");this.addTitle(),this.createRemoveErrorDiv.call(this),this.setData("cxPropSelected",a),this.setData("cxPropSelectedUsers",p),o.$node.resetPosition(),this.scrollToEnd()}},userRemove:function(e,t,a,o,i,r){for(var s,l=!0,n=this.getData("addedItems"),c=this.getData("cxPropSystemValue"),p=n.length,d=0;d<p;d++)if(n[d][c]==t){s=n[d];break}if(this.getMethods("onUserRemove")){var u=n.filter((function(e){return e.id!==t}));l=this.executeMethod("onUserRemove",e,s,u,o)}if(!1===l)o.$node.ltProp("selected",JSON.stringify(n.map((function(e){return e.id}))));else{if(Lyte.arrayUtils(n,"removeAt",d),this.setData("cxPropSelected",a),this.getMethods("onError")&&this.getData("cxPropSearchable")){var h=this.outerDropdownBody.querySelector("div.userComponent");h&&h.parentElement.removeChild(h)}this.createRemoveErrorDiv.call(this),this.setData("cxPropSelectedUsers",n),o.$node.resetPosition()}},userPositionChange:function(e,t){this.getMethods("onUserPositionChange")&&this.executeMethod("onUserPositionChange",e,t)},userScroll:function(e,t){if(!this.data.dataPending){var a=e.target;clearTimeout(this.timeout1),this.timeout1=setTimeout(function(){a.scrollHeight<=Math.ceil(a.offsetHeight)+Math.ceil(a.scrollTop)&&(this.getData("filterChanged")||(this.isSearch?this.paintUsers.call(this,"search"):this.paintUsers.call(this),this.getMethods("onUserScroll")&&this.executeMethod("onUserScroll",e,t)))}.bind(this),100)}},filterSelected:function(e,t,a,o){this.setData("cxPropFilterSelected",t),this.getMethods("onFilterSelected")&&this.executeMethod("onFilterSelected",e,t,a,o)},filterBeforeShow:function(e,t){if(this.getMethods("onFilterBeforeShow"))return this.executeMethod("onFilterBeforeShow",e,t)},filterShow:function(e,t){if(this.getMethods("onFilterShow")&&this.executeMethod("onFilterShow",e,t),this.outerDropdown.ltProp("preventNavigation",!0),t&&t.childComp&&!t.$node.className.includes("cxKeyboardNavClass")){var a="#"+t.childComp.querySelector("lyte-drop-body").id;if(!this.innerDropdown.ltProp("preventNavigation")){this.innerDropdown.ltProp("preventNavigation",!0);let e={child:"lyte-drop-item",selectedClass:"lyteDropdownSelection",skipElements:".disabled",scope:a,dropdown:this.innerDropdown,triggerClick:!0};$L(t.$node.querySelector(".lyteDummyEventContainer")).keyboardNavigator(e),$L(t.$node).addClass("cxKeyboardNavClass")}}},filterBeforeHide:function(e,t){if(this.getMethods("onFilterBeforeHide"))return this.executeMethod("onFilterBeforeHide",e,t)},filterHide:function(e,t){t&&t.$node.className.includes("cxKeyboardNavClass")&&($L(t.$node.querySelector(".lyteDummyEventContainer")).keyboardNavigator("destroy"),$L(t.$node).removeClass("cxKeyboardNavClass"),this.innerDropdown.ltProp("preventNavigation",!1)),this.getMethods("onFilterHide")&&this.executeMethod("onFilterHide",e,t),this.outerDropdown.ltProp("preventNavigation",!1)},filterPositionChange:function(e,t){this.getMethods("onFilterPositionChange")&&this.executeMethod("onFilterPositionChange",e,t)},filterScroll:function(e,t){this.getMethods("onFilterScroll")&&this.executeMethod("onFilterScroll",e,t)}},observeSelectedUser:function(){if(this.data.cxPropShowSuggestion)for(var e=$L("lyte-drop-item[selected=true]",this.outerDropdownBody),t=e?e.length:0,a=0;a<t;a++)e[0].removeAttribute("selected");this.getData("cxPropShowSuggestion")}.observes("cxPropSelectedUser"),keyDownEvent:function(){this.$node.querySelector("lyte-dropdown")&&this.$node.cxProp("aria")&&this.bindEventForAria()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-user-utils","crux-aria-dropdown-mixin"]}),Lyte.Component.register("crux-user-lookup",{_template:'<template tag-name="crux-user-lookup"> <lyte-modal lt-prop-allow-multiple="{{cxPropAllowMultiple}}" lt-prop-close-on-escape="{{cxPropCloseOnEscape}}" class="lookupModal" lt-prop-height="{{cxPropHeight}}" lt-prop-max-height="{{cxPropMaxHeight}}" lt-prop-show-close-button="false" lt-prop-max-width="{{cxPropMaxWidth}}" lt-prop-width="{{cxPropModalWidth}}" lt-prop-transition="{{cxPropTransition}}" lt-prop-wrapper-class="popUpWrapper userLookupModal {{if(ifEquals(cxPropType,\'view\'),\'cruxUserView\',\'\')}} {{cxPropWrapperClass}}" lt-prop-offset="{{cxPropOffset}}" on-before-show="{{method(\'bodyBeforeShow\')}}" on-show="{{method(\'bodyShow\')}}" on-before-close="{{method(\'bodyBeforeClose\')}}" on-close="{{method(\'bodyClose\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="cxHeaderMinHeight"> <template is="if" value="{{cxPropTitle}}"><template case="true"> <div class="cxUserLookupHeader">{{cxPropTitle}}</div> </template></template> <template is="if" value="{{expHandlers(cxPropHeaderYield,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;view&quot;)}}"><template case="true"> <div class="cxUserLookupHeader lookupHeaderStyle"> <span class="cxUserLookupHeaderText lookupHeaderText" data-zcqa="user_view_header_msg">{{cxPropHeaderName}}</span> </div> </template></template> <template is="if" value="{{expHandlers(DselectedList,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropReqForSelected,\'&amp;&amp;\',cxPropHeaderName)}}"><template case="true"> <div class="cxUserLookupHeader lookupHeaderStyle"> <span class="cxUserLookupHeaderText lookupHeaderText" data-zcqa="user_view_header_msg">{{cxPropHeaderName}}</span> </div> </template></template> <div class="cxFlex user-lookup-section {{if(cxPropSearchable,\'\',\'cxUserLookupNoSearchCont\')}}"> <template is="if" value="{{cxPropFilterable}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropFilterYield,\'!\')}}"><template case="true"> <lyte-dropdown data-zcqa="user_lookup_type" class="cxUserLookupDropdown innerDrop pR" lt-prop-callout="{{cxPropUserDropCallout}}" lt-prop-selected="{{cxPropSelectedFilterOption}}" lt-prop-show="{{cxPropUserDropShow}}" lt-prop-freeze="{{cxPropUserDropFreeze}}" lt-prop-disabled="{{cxPropUserDropDisabled}}" lt-prop-boundary="{{cxPropUserDropBoundary}}" on-show="{{method(\'showFilterDropdown\')}}" on-hide="{{method(\'hideFilterDropdown\')}}" on-option-selected="{{method(\'userSelected\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{cxPropFilterOptions}}" item="item" index="index"> <lyte-drop-item data-zcqa="user_lookup_type_{{item[cxPropFilterSystemValue]}}" data-value="{{item[cxPropFilterSystemValue]}}">{{item[cxPropFilterUserValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <lyte-dropdown data-zcqa="user_lookup_type" class="innerDrop" lt-prop-yield="true" lt-prop-selected="{{cxPropSelectedFilterOption}}" lt-prop-callout="{{cxPropUserDropCallout}}" lt-prop-show="{{cxPropUserDropShow}}" lt-prop-freeze="{{cxPropUserDropFreeze}}" lt-prop-tabindex="{{cxPropUserDropTabindex}}" lt-prop-disabled="{{cxPropUserDropDisabled}}" lt-prop-boundary="{{cxPropUserDropBoundary}}" on-option-selected="{{method(\'userSelected\')}}" on-show="{{method(\'showFilterDropdown\')}}" on-hide="{{method(\'hideFilterDropdown\')}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="userDropdownInner"></lyte-yield> </template> </lyte-dropdown> </template></template></template></template><template is="if" value="{{cxPropSearchable}}"><template case="true"> <div class="cxUserLookupSearch lookupSearch cxVam {{if(cxPropFilterable,\'cxLookupFilterpresent\',\'\')}}"> <lyte-input data-zcqa="user_lookup_search" lt-prop-autocomplete="{{cxPropInputAutocomplete}}" lt-prop-placeholder="{{cxPropInputPlaceholder}}" lt-prop-autofocus="{{cxPropInputAutofocus}}" lt-prop-disabled="{{cxPropInputDisabled}}" lt-prop-style="{{cxPropInputStyle}}" lt-prop-readonly="{{cxPropInputReadonly}}" lt-prop-id="{{cxPropInputId}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-type="{{cxPropInputType}}" lt-prop-name="{{cxPropInputName}}" lt-prop-width="{{cxPropInputWidth}}" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-appearance="{{cxPropInputAppearance}}" lt-prop-direction="{{cxPropInputDirection}}" lt-prop-tab-index="{{cxPropInputTabindex}}" oninput="{{action(\'searchKeyup\',event)}}" style="width: 100%;" on-focus="{{method(\'onInputFocus\')}}" on-blur="{{method(\'onInputBlur\')}}"> </lyte-input> <template is="if" value="{{cxPropInputValue.length}}"><template case="true"> <span data-zcqa="user_lookup_search_clear" class="{{if(cxPropInputValue,\'lookupSearchCloseIcon cP\',\'\')}}" onclick="{{action(\'clearInput\',if(cxPropInputValue,true,false))}}" style="{{if(searchingSearch,\'display:none\',\'display:inline-block\')}};"></span> </template></template> <span class="cxUserLookupSearchLoader" style="{{if(searchingSearch,\'\',\'display:none\')}};"></span> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'multiple\'),\'&amp;&amp;\',expHandlers(cxPropSelectedCount,\'>\',0))}}"><template case="true"> <span data-zcqa="user_lookup_selected" class="userSelection cP" onclick="{{action(\'SelectedUserModal\')}}">{{cxPropSelectedLinkMessage}} </span> </template><template case="false"><template is="if" value="{{cxPropShowCloseIcon}}"><template case="true"> <span data-zcqa="user_lookup_close" class="userLookupCloseButton lyteModalClose" onclick="{{action(\'closeUserLookup\')}}"></span> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'&amp;&amp;\',expHandlers(cxPropFooterYield,\'!\'))}}"><template case="true"> <template is="if" value="{{showSelectedFooter}}"><template case="true"> <div class="cxFlex user-lookup-right"> <span data-zcqa="user_lookup_selected" class="singleUserSelected alignSelectedFooter">{{cruxGetI18n(\'crm.label.selected\')}} {{cruxGetI18n(\'crm.auditlog.user\')}}: </span> <template is="if" value="{{showPlaceholderForSelected}}"><template case="true"> <div class="cxUserLookupImgDummy"></div> <div class="cxUserLookupSelNameDummy"></div> </template><template case="false"> <div class="cxUserLookupProfileSection "> <template is="if" value="{{expHandlers(displaySingleUser.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg alignSelectedFooter pA"></span> </template><template case="false"> <img src="{{displaySingleUser.image_link}}" class="cxUserLookupUserImg alignSelectedFooter pA"> </template></template> <span class="cxUserLookupProfileName alignSelectedFooter">{{userFieldValues(displaySingleUser,"full_name")}}</span> </div> </template></template> </div> </template></template> </template></template> </template></template></template></template></template></template> </div> </template><template case="false"> <span data-zcqa="user_lookup_back" class="userLookupBackIcon mR5" onclick="{{action(\'bactToLookup\')}}"></span> <div data-zcqa="user_lookup_selected" class="selectedUsersHd">{{cxPropSelectedHeaderMsg}}</div> <template is="if" value="{{cxPropReqForSelected}}"><template case="true"> <div class="cxFlex"> <template is="if" value="{{cxPropSearchable}}"><template case="true"> <div class="cxUserLookupSearch lookupSearch {{if(cxPropFilterable,\'cxLookupFilterpresent\',\'\')}}"> <lyte-input data-zcqa="user_lookup_search" lt-prop-autocomplete="{{cxPropInputAutocomplete}}" lt-prop-placeholder="{{cxPropInputPlaceholder}}" lt-prop-autofocus="{{cxPropInputAutofocus}}" lt-prop-disabled="{{cxPropInputDisabled}}" lt-prop-style="{{cxPropInputStyle}}" lt-prop-readonly="{{cxPropInputReadonly}}" lt-prop-id="{{cxPropInputId}}" lt-prop-class="{{cxPropInputClass}}" lt-prop-type="{{cxPropInputType}}" lt-prop-name="{{cxPropInputName}}" lt-prop-width="{{cxPropInputWidth}}" lt-prop-value="{{lbind(cxPropInputValue)}}" lt-prop-appearance="{{cxPropInputAppearance}}" lt-prop-direction="{{cxPropInputDirection}}" lt-prop-tab-index="{{cxPropInputTabindex}}" oninput="{{action(\'searchKeyup\',event)}}" style="width: 100%;" on-focus="{{method(\'onInputFocus\')}}" on-blur="{{method(\'onInputBlur\')}}"> </lyte-input> <template is="if" value="{{cxPropInputValue.length}}"><template case="true"> <span data-zcqa="user_lookup_search_clear" class="{{if(cxPropInputValue,\'lookupSearchCloseIcon cP\',\'\')}}" onclick="{{action(\'clearInput\',if(cxPropInputValue,true,false))}}" style="{{if(searchingSearch,\'display:none\',\'display:inline-block\')}};"> </span> </template></template> <span class="cxUserLookupSearchLoader" style="{{if(searchingSearch,\'\',\'display:none\')}};"></span> </div> </template></template> <template is="if" value="{{expHandlers(cxPropSelectedCount,\'>\',0)}}"><template case="true"> <span data-zcqa="user_lookup_selected" class="cxUserLookupSelCountLabel"> {{cxPropSelectedLinkMessage}} </span> </template></template> </div> </template></template> </template></template> </template><template case="false"> <div class="cxHeaderMinHeight"> <lyte-yield yield-name="userHeaderYield"></lyte-yield> </div> </template></template> </lyte-modal-header> <lyte-modal-content class="lookupModalContent {{if(cxLookupCheckForFooterAvailability(cxPropFooterYield,cxPropType),\'\',\'cxLookupModalNoFooter\')}}" onmouseenter="{{action(\'mouse\',event)}}"> <div class="cxUserLookupTableWrap"> <template is="if" value="{{expHandlers(cxPropShowSuggestion,\'!\')}}"><template case="true"> <span class="cxUserLookupListLoader" style="{{if(searchingUser,\'\',\'display:none\')}};"></span> </template></template> <template is="if" value="{{expHandlers(DselectedList,\'!\')}}"><template case="true"> <lyte-table lt-prop-yield="true" id="cruxUserLookupTable" onscroll="{{action(\'tableScroll\',event)}}" class="cxCommonTable {{cruxUserLookupContentStatus(systemData.length,cxPropReqForSelected,showNoDataMsg)}}"> <template is="registerYield" yield-name="yield"> <lyte-table-structure> <lyte-thead> <lyte-tr> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> <lyte-th class="lookupTableHeaderWidth lookupFirstMinWidth" fixed="enable"></lyte-th> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;multiple&quot;)}}"><template case="true"> <lyte-th class="lookupTableHeaderWidth lookupFirstMinWidth" fixed="enable"> <template is="if" value="{{cxPropShowAllselectCheckbox}}"><template case="true"> <lyte-checkbox data-zcqa="user_lookup_select_all_checkbox" class="{{if(ifEquals(systemData.length,0),\'vh\',\'\')}}" lt-prop-checked="{{lbind(allCheckboxState)}}" lt-prop-name="allSelectCheckbox" on-changed="{{method(\'allCheckboxOnChanged\')}}" on-before-checked="{{method(\'allCheckboxOnBeforeChecked\')}}" on-checked="{{method(\'allCheckboxChecked\')}}" on-unchecked="{{method(\'allCheckboxUnchecked\')}}" on-before-unchecked="{{method(\'allCheckboxbeforeUnchecked\')}}"> </lyte-checkbox> </template></template> </lyte-th> </template></template></template></template> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-th class="lookupTableHeaderColor {{if(ifEquals(cxPropType,\'view\'),\'viewHeaderPadding\',\'\')}}" fixed="{{if(feildName.isSticky,\'enable\',\'\')}}">{{feildName.displayValue}}</lyte-th> </template> </lyte-tr> </lyte-thead> <lyte-tbody id="userLookupTableBody" style="{{if(searchingUser,\'visibility:hidden\',\'\')}};"> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropShowSuggestion,\'&amp;&amp;\',expHandlers(expHandlers(cxPropFilter,\'==\',&quot;AllUsers&quot;),\'||\',expHandlers(cxPropFilter,\'==\',&quot;ActiveUsers&quot;)))}}"><template case="true"> <lyte-tr class="cxUserLookupSubHeadingRow"> <lyte-td class="cxUserLookupSubHeadingCell"> <span class="cxUserLookupRowHeading">{{cxPropSuggestion.label}}</span> </lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> <template is="if" value="{{cxPropShowSuggestionLoading}}"><template case="true"> <lyte-tr class="cxUserLookupListLoaderTr"> <lyte-td class="cxUserLookupListLoaderTd"> <span class="cxUserLookupListLoader ziaLookupLoader"></span> </lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> </template><template case="false"><template is="if" value="{{expHandlers(suggestedUsers.length,\'>\',0)}}"><template case="true"><template is="for" items="{{suggestedUsers}}" item="item" index="index"> <lyte-tr class="cxUserLookupZiaSuggestedRow" onclick="{{action(\'rowClick\',event,this,index,item)}}" data-zcqa="user_lookup_list_{{item.full_name}}"> <lyte-td><lyte-radiobutton lt-prop-prevent-focus="{{preventFocus}}" data-zcqa="user_lookup_list_radiobutton_{{item.full_name}}" lt-prop-type="primary" class="radioLookupTableBodypadding suggestionRadioButton" on-changed="{{method(\'radiobuttonOnChanged\')}}" lt-prop-checked="{{lbind(item.lookup_selected_val)}}" on-before-checked="{{method(\'radiobuttonOnBeforeChecked\')}}" on-checked="{{method(\'radiobuttonChecked\',item)}}" lt-prop-name="sRadioButton" lt-prop-value="{{index}}"></lyte-radiobutton></lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(feildName.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <div class="cxUserLookupTextWrap"> <span class="cruxUserLookupText {{if(ifEquals(feildName.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,feildName.systemValue))}}">{{userDispVal(feildName.systemValue,userFieldValues(item,feildName.systemValue))}}</span> <template is="if" value="{{expHandlers(feildName.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <span class="cxUserLookupZiaPercent">{{item.confidence_percentage}}%</span> </template></template> </div> </lyte-td> </template> </lyte-tr> </template></template><template case="false"> <lyte-tr class="cxUserLookupListLoaderTr"> <lyte-td class="cxUserLookupListLoaderTd"> <div class="ziaNoUsersLookup cxUserLookupNoSuggestion">{{cxPropNoSuggestionValue}}</div> </lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> </template></template></template></template> <lyte-tr class="cxUserLookupSubHeadingRow"> <lyte-td class="cxUserLookupSubHeadingCell cxUserLookupSubHeadingSecondCell"> <span class="cxUserLookupRowHeading">Users</span> </lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> <template is="if" value="{{searchingUser}}"><template case="true"> <lyte-tr class="cxUserLookupListLoaderTr"> <lyte-td class="cxUserLookupListLoaderTd"> <span class="cxUserLookupListLoader ziaLookupLoader"></span> </lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> </template></template> </template></template> <template is="for" items="{{systemData}}" item="item" index="index"> <lyte-tr onclick="{{action(\'rowClick\',event,this,index)}}" data-zcqa="user_lookup_list_{{item.full_name}}" class="{{if(ifEquals(item.id,displaySingleUser.id),\'cxUserLookupRowActive\')}}"> <lyte-td><lyte-radiobutton data-zcqa="user_lookup_list_radiobutton_{{item.full_name}}" lt-prop-prevent-focus="{{preventFocus}}" lt-prop-type="primary" class="radioLookupTableBodypadding" on-changed="{{method(\'radiobuttonOnChanged\')}}" lt-prop-checked="{{lbind(item.lookup_selected_val)}}" on-before-checked="{{method(\'radiobuttonOnBeforeChecked\')}}" on-checked="{{method(\'radiobuttonChecked\',item)}}" lt-prop-name="radioButton" lt-prop-value="{{index}}"></lyte-radiobutton></lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"><template is="if" value="{{expHandlers(feildName.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(feildName.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(feildName.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,feildName.systemValue))}}">{{userDispVal(feildName.systemValue,userFieldValues(item,feildName.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="cxHeaderMinHeight"> <lyte-yield yield-name="{{feildName.systemValue}}" cell-index="{{index}}" cell-value="{{item}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template><template is="if" value="{{expHandlers(expHandlers(cxPropShowSuggestion,\'&amp;&amp;\',expHandlers(systemData.length,\'==\',0)),\'&amp;&amp;\',expHandlers(firstOpen,\'!\'))}}"><template case="true"> <lyte-tr class="cxUserLookupListLoaderTr"> <lyte-td class="cxUserLookupListLoaderTd"> <div class="cxUserLookupNoSuggestion">{{cxPropNoUserAvilableMsg}}</div> </lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',\'multiple\')}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index"> <template is="if" value="{{expHandlers(expHandlers(cxPropReqForSelected,\'!\'),\'||\',expHandlers(cxPropReqForSelected,\'&amp;&amp;\',expHandlers(item.lookup_newely_selected_val,\'!==\',\'selected\')))}}"><template case="true"> <lyte-tr onclick="{{action(\'rowClick\',event,this,index)}}" data-zcqa="user_lookup_list_{{item.full_name}}" class="{{if(item.lookup_selected_val,\'cxUserLookupSelectedRow\',\'\')}}"> <lyte-td class="lookupTableBodypadding"><lyte-checkbox d="cxUserLookupUserCheckbox" data-zcqa="user_lookup_list_checkbox_{{item.full_name}}" lt-prop-checked="{{lbind(item.lookup_selected_val)}}" lt-prop-value="{{index}}" lt-prop-name="checkbox" on-checked="{{method(\'checkboxChecked\')}}" on-unchecked="{{method(\'checkboxUnchecked\')}}" on-before-checked="{{method(\'checkboxOnBeforeChecked\')}}" on-changed="{{method(\'checkboxOnChanged\')}}" on-before-unchecked="{{method(\'checkboxOnBeforeUnChecked\')}}"></lyte-checkbox></lyte-td> <template is="for" items="{{cxPropHeader}}" item="value" index="position"><template is="if" value="{{expHandlers(value.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(value.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(value.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,value.systemValue))}}">{{userDispVal(value.systemValue,userFieldValues(item,value.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="cxHeaderMinHeight"> <lyte-yield yield-name="{{value.systemValue}}" cell-index="{{index}}" cell-value="{{item}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template></template></template></template><template case="false"><template is="if" value="{{expHandlers(cxPropType,\'==\',&quot;view&quot;)}}"><template case="true"><template is="for" items="{{systemData}}" item="item" index="index"> <lyte-tr class="viewLookupTr" data-zcqa="user_view_list_{{item.full_name}}"> <template is="for" items="{{cxPropHeader}}" item="value" index="position"><template is="if" value="{{expHandlers(value.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(value.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(value.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,value.systemValue))}}">{{userDispVal(value.systemValue,userFieldValues(item,value.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="cxHeaderMinHeight"> <lyte-yield something="" yield-name="headerDetail" cell-index="{{index}}" cell-value="{{item}}" current-header="{{value}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template></template></template></template></template></template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(cxPropReqForSelected,\'!\'),\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',expHandlers(systemData.length,\'==\',0)),\'||\',expHandlers(expHandlers(cxPropReqForSelected,\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',showNoDataMsg))}}"><template case="true"> <lyte-tr class="cxUserLookupEmptyRow"> <template is="if" value="{{expHandlers(cxPropType,\'!==\',&quot;view&quot;)}}"><template case="true"> <lyte-td></lyte-td> </template></template> <template is="for" items="{{cxPropHeader}}" item="value" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> </template></template> </lyte-tbody> </lyte-table-structure> <div class="scrollSearchDiv" style="{{if(searchingScroll,\'display:block\',\'display:none\')}};"> <span class="cxUserLookupLazyLoader"></span> </div> </template> </lyte-table> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(cxPropShowSuggestion,\'!\'),\'&amp;&amp;\',expHandlers(cxPropReqForSelected,\'!\')),\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',expHandlers(systemData.length,\'==\',0)),\'||\',expHandlers(expHandlers(cxPropReqForSelected,\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',showNoDataMsg))}}"><template case="true"> <div class="NoUsersLookup NoUsersLookupInTable {{cxPropNoContentClass}}">{{cxPropNoUserAvilableMsg}}</div> </template></template> </template><template case="false"> <lyte-table lt-prop-yield="true" id="cruxUserLookupTable" onscroll="{{action(\'tableScroll\',event)}}" class="cxCommonTable {{cruxUserLookupContentStatus(addedItems.length,cxPropReqForSelected,showNoDataMsg)}}"> <template is="registerYield" yield-name="yield"> <lyte-table-structure> <lyte-thead> <lyte-tr> <lyte-th class="lookupTableHeaderWidth lookupFirstMinWidth" fixed="enable"> <template is="if" value="{{cxPropShowAllselectCheckbox}}"><template case="true"> <lyte-checkbox id="cxUserLookupUserCheckbox" data-zcqa="user_lookup_select_all_checkbox" class="{{if(ifEquals(addedItems.length,0),\'vh\',\'\')}}" lt-prop-checked="{{lbind(selectedCheckBoxValue)}}" lt-prop-name="selectedAllSelectCheckbox" on-changed="{{method(\'allCheckboxOnChanged\')}}" on-before-checked="{{method(\'allCheckboxOnBeforeChecked\')}}" on-checked="{{method(\'allCheckboxChecked\')}}" on-unchecked="{{method(\'allCheckboxUnchecked\')}}" on-before-unchecked="{{method(\'allCheckboxbeforeUnchecked\')}}"> </lyte-checkbox> </template></template> </lyte-th> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"> <lyte-th class="lookupTableHeaderColor" fixed="{{if(feildName.isSticky,\'enable\',\'\')}}">{{feildName.displayValue}}</lyte-th> </template> </lyte-tr> </lyte-thead> <lyte-tbody id="selectedUserLookupTableBody" style="{{if(searchingUser,\'visibility:hidden\',\'\')}};"> <template is="for" items="{{addedItems}}" item="item" index="index"> <lyte-tr onclick="{{action(\'rowClick\',event,this,index)}}" data-zcqa="user_lookup_list_{{item.full_name}}" style="{{if(ifEquals(item.lookup_newely_selected_val,\'unSelected\'),\'display:none\',\'\')}};" class="{{if(item.lookup_selected_val,\'cxUserLookupSelectedRow\',\'\')}}"> <lyte-td class="lookupTableBodypadding"><lyte-checkbox data-zcqa="user_lookup_list_checkbox_{{item.full_name}}" on-changed="{{method(\'checkboxOnChanged\')}}" lt-prop-checked="{{lbind(item.lookup_selected_val)}}" lt-prop-value="{{index}}" lt-prop-name="checkbox" on-checked="{{method(\'checkboxChecked\')}}" on-unchecked="{{method(\'checkboxUnchecked\')}}" on-before-checked="{{method(\'checkboxOnBeforeChecked\')}}" on-before-unchecked="{{method(\'checkboxOnBeforeUnChecked\')}}"></lyte-checkbox></lyte-td> <template is="for" items="{{cxPropHeader}}" item="feildName" index="position"><template is="if" value="{{expHandlers(feildName.yield,\'!\')}}"><template case="true"> <lyte-td class="lookupTableBodyColor"> <template is="if" value="{{expHandlers(feildName.systemValue,\'==\',&quot;full_name&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(item.image_link,\'!\')}}"><template case="true"> <span class="cxUserLookupNoPhoto cxUserLookupUserImg"></span> </template><template case="false"> <img src="{{item.image_link}}" class="cxUserLookupUserImg"> </template></template> </template></template> <span class="cruxUserLookupText {{if(ifEquals(feildName.systemValue,\'full_name\'),\'cruxUserLookupImage\',\'\')}}" onmouseover="{{action(\'checkForToolTip\',this,userFieldValues(item,feildName.systemValue))}}">{{userDispVal(feildName.systemValue,userFieldValues(item,feildName.systemValue))}}</span> </lyte-td> </template><template case="false"> <lyte-td class="cxHeaderMinHeight"> <lyte-yield yield-name="{{feildName.systemValue}}" cell-index="{{index}}" cell-value="{{item}}"></lyte-yield> </lyte-td> </template></template></template> </lyte-tr> </template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(cxPropReqForSelected,\'!\'),\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',expHandlers(addedItems.length,\'==\',0)),\'||\',expHandlers(expHandlers(cxPropReqForSelected,\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',showNoDataMsg))}}"><template case="true"> <lyte-tr class="cxUserLookupEmptyRow"> <lyte-td></lyte-td> <template is="for" items="{{cxPropHeader}}" item="value" index="position"> <lyte-td></lyte-td> </template> </lyte-tr> </template></template> </lyte-tbody> </lyte-table-structure> <div class="scrollSearchDiv" style="{{if(searchingSelectedScroll,\'display:block\',\'display:none\')}};"> <span class="cxUserLookupLazyLoader"></span> </div> </template> </lyte-table> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(cxPropReqForSelected,\'!\'),\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',expHandlers(addedItems.length,\'==\',0)),\'||\',expHandlers(expHandlers(cxPropReqForSelected,\'&amp;&amp;\',expHandlers(searchingUser,\'!\')),\'&amp;&amp;\',showNoDataMsg))}}"><template case="true"> <div class="NoUsersLookup {{cxPropNoContentClass}}">{{cxPropNoUserAvilableMsg}}</div> </template></template> </template></template> </div> </lyte-modal-content> <template is="if" value="{{expHandlers(expHandlers(cxPropFooterYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropType,\'!=\',&quot;view&quot;))}}"><template case="true"> <lyte-modal-footer class="right"> <lyte-button onclick="{{action(\'closeUserLookup\')}}" data-zcqa="user_lookup_cancel"> <template is="registerYield" yield-name="text"> {{cxPropFooterButtonsLiterals.cancel}} </template> </lyte-button> <lyte-button lt-prop-id="LookupAssignButton" lt-prop-disabled="{{lbind(buttonAccessibility)}}" lt-prop-appearance="primary" onclick="{{action(\'assignSelectedUsers\')}}" data-zcqa="user_lookup_assign"> <template is="registerYield" yield-name="text"> <template is="if" value="{{expHandlers(cxPropType,\'==\',\'single\')}}"><template case="true"> {{cruxGetI18n(\'Done\')}} </template><template case="false"> {{cxPropFooterButtonsLiterals.save}} </template></template> </template> </lyte-button> </lyte-modal-footer> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(cxPropType,\'==\',\'single\'),\'||\',expHandlers(cxPropType,\'==\',\'view\')),\'||\',expHandlers(cxPropType,\'==\',\'multiple\')),\'&amp;&amp;\',cxPropFooterYield)}}"><template case="true"> <lyte-modal-footer> <lyte-yield yield-name="userFooterYield"></lyte-yield> </lyte-modal-footer> </template></template></template></template> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,2]},{type:"if",position:[3,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","'display:none'","'display:inline-block'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[1,5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","''","'display:none'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[3,4]},{type:"if",position:[3,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,1,2]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"text",position:[1,3,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[3,0]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","'display:none'","'display:inline-block'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[1,5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSearch","''","'display:none'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"insertYield",position:[1,1]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingUser","''","'display:none'"]}},"';'"]}}}}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"if",position:[3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,1,3]},{type:"for",position:[1,1,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingUser","'visibility:hidden'","''"]}},"';'"]}}}},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[5,1]},{type:"attr",position:[5,3]},{type:"for",position:[5,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[5]},{type:"attr",position:[7]},{type:"if",position:[7],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingScroll","'display:block'","'display:none'"]}},"';'"]}}}}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1,1]},{type:"if",position:[1,1,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"for",position:[1,1,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingUser","'visibility:hidden'","''"]}},"';'"]}}}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"ifEquals",args:["item.lookup_newely_selected_val","'unSelected'"]}},"'display:none'","''"]}},"';'"]}}}},{type:"attr",position:[1,1,0]},{type:"componentDynamic",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["''",{type:"helper",value:{name:"if",args:["searchingSelectedScroll","'display:block'","'display:none'"]}},"';'"]}}}}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropPluralModuleName","cxPropSingularModuleName","cxPropMaxLimitMsg","cxPropAllowMultiple","cxPropCustomRequest","cxPropNoUserAvilableMsg","currentlyExcludedArray","cxPropLookupWidth","cxPropViewWidth","allCheckboxbeforeUnchecked","allCheckboxState","buttonAccessibility","cxPropWrapperClass","stopScrolling","cxPropQueryParams","selectedCheckBoxValue","cxPropPrimaryKey","cxPropHeader","cxPropHeaderYield","cxPropFooterYield","cxPropNetworkData","displaySingleUser","cxPropSelectedPerPage","searchingScroll","noUsersAvilabel","firstOpen","cxPropModalWidth","cxPropShow","DselectedList","selectedList","cxPropType","cxPropForcedFetch","systemData","localData","pageNo","noMoreRecords","addedItems","totalAddedObjects","currentPos","isSearch","multiScroll","searchingSearch","searchingUser","cxPropCacheQuery","cxPropDataCache","cxPropPerPage","cxPropSelectedIds","cxPropSelectedId","cxPropExclude","cxPropModuleName","cxPropMaxLimit","cxPropHeaderName","cxPropUserDropShow","cxPropUserDropFreeze","cxPropUserDropDisabled","cxPropUserDropBoundary","cxPropUserDropCallout","cxPropUserDropTabindex","cxPropFilter","cxPropFilterYield","cxPropFilterOptions","cxPropSelectedFilterOption","cxPropFilterUserValue","cxPropFilterSystemValue","cxPropSearchable","cxPropFilterable","cxPropRecords","cxPropMinLength","cxPropInputAutocomplete","cxPropInputPlaceholder","cxPropInputAutofocus","cxPropInputDisabled","cxPropInputStyle","cxPropInputReadonly","cxPropInputId","cxPropInputClass","cxPropInputType","cxPropInputName","cxPropInputWidth","cxPropInputValue","cxPropInputAppearance","cxPropInputDirection","cxPropInputWrapperStyle","cxPropInputTabindex","cxPropCriteria","cxPropSearchCriteria","cxPropPreventKeyDown","cxPropReqForSelected","cxPropSelectedCount","cxPropSelectedList","cxPropSetEmptyFilter","cxPropSelectedLinkMessage","cxPropPreventRowClick","showPlaceholderForSelected","showSelectedFooter","cxPropMaxLimitDuration","cxPropSelectedQueryParams","messageBoxType","cxPropUserFieldProperties","cxPropShowSuggestion","cxPropShowSuggestionLoading","cxPropSuggestion","suggestedUsers","cxPropNoSuggestionValue","cxPropIsSubordinate","cxPropTransition","cxPropOffset","cxPropTitle","cxPropShowCloseIcon","cxPropCloseOnEscape","preventFocus","openRequest","cxPropReqForSelectedValue","cxPropShowAllselectCheckbox","cxPropFooterButtonsLiterals","showNoDataMsg","cxPropSelectedHeaderMsg","cxPropModalWidth","cxPropMaxWidth","cxPropMaxHeight","cxPropHeight","cxPropNoContentClass"],search_rejected:function(){this.data.cxPropReqForSelected&&this.data.noUsersAvilabel&&(this.data.selectedList?this.setData("addedItems",[]):this.setData("systemData",[]),this.setData({localData:[],searchingUser:!0}),this.addNewelySelectedToTop(),this.setData("searchingUser",!1),this.checkIfNoResultStatus())},beforeNewRequest:function(){if(this.data.cxPropReqForSelected&&(this.isNewRequest=!0,this.batchDispCount=0,this.preventLoadMoreData||(this.preventLoadMoreData=!1),1===this.data.pageNo&&(this.initialRequest=!0,this.data.cxPropReqForSelected&&(this.data.selectedList?this.setData("addedItems",[]):this.setData("systemData",[]),this.setData("searchingUser",!0)))),1===this.data.pageNo||0===this.data.pageNo){var e=this.bodydrop.querySelector("#cruxUserLookupTable");e&&e.scrollTable(0,0)}},addNewelySelectedToTop:function(){if(this.getData("cxPropReqForSelected")&&!this.getData("isSearch")&&this.initialRequest){if(this.getData("selectedList")){if(a=this.newelySelected.length)for(var e=0;e<a;e++)Lyte.arrayUtils(this.getData("localData"),"unshift",this.newelySelected[e]),Lyte.arrayUtils(this.getData("addedItems"),"unshift",this.newelySelected[e]);this.valueAddedToCurrentList=this.newelySelected}else{if(a=this.newelyUnSelected.length)for(e=0;e<a;e++)Lyte.arrayUtils(this.getData("localData"),"unshift",this.newelyUnSelected[e]),Lyte.arrayUtils(this.getData("systemData"),"unshift",this.newelyUnSelected[e]);this.valueAddedToCurrentList=this.newelyUnSelected}this.setData("currentPos",this.data.currentPos+a)}if(this.getData("isSearch")&&this.data.cxPropReqForSelected&&this.initialRequest){var t;this.data.cxPropReqForSelected&&(t=this.performLocalSearch(this.data.cxPropInputValue));var a=t.length;Lyte.arrayUtils(this.getData("localData"),"unshift",t),this.getData("selectedList")?Lyte.arrayUtils(this.getData("addedItems"),"unshift",t):Lyte.arrayUtils(this.getData("systemData"),"unshift",t),this.valueAddedToCurrentList=t,this.setData("currentPos",this.data.currentPos+a)}},checkIfNoResultStatus:function(){var e,t;this.data.cxPropReqForSelected&&(this.getData("selectedList")?(e=!this.data.addedItems.length&&!this.valueAddedToCurrentList.length,t=this.data.addedItems.length&&this.data.addedItems.length===this.currentlyHiddenList.length&&!this.valueAddedToCurrentList.length):(e=!this.data.systemData.length&&!this.valueAddedToCurrentList.length,t=this.data.systemData.length&&this.data.systemData.length===this.currentlyHiddenList.length&&!this.valueAddedToCurrentList.length),e||t?this.setData("showNoDataMsg",!0):this.setData("showNoDataMsg",!1))},performLocalSearch:function(e){for(var t,a=[],o=(t=this.data.selectedList?this.newelySelectedTempList:this.newelyUnSelectedTempList).length,i=this.firstNameAvailability,r=this.lastNameAvailability,s=0;s<o;s++){var l,n=!1;if(i&&t[s].first_name)-1!==(l=t[s].first_name.toLowerCase().indexOf(e.toLowerCase()))&&0===l&&(n=!0);if(!n&&r&&t[s].last_name)-1!==(l=t[s].last_name.toLowerCase().indexOf(e.toLowerCase()))&&0===l&&(n=!0);if(!n&&t[s].email)-1!==(l=t[s].email.toLowerCase().indexOf(e.toLowerCase()))&&0===l&&(n=!0);if(!n&&t[s].full_name)-1!==(l=t[s].full_name.toLowerCase().indexOf(e.toLowerCase()))&&0===l&&(n=!0);n&&a.push(t[s])}return a},setSelectionStateOfRecords:function(e,t){var a=e.length;this.setData("preventCall",!0);for(var o=0;o<a;o++)switch(t){case"clear":Lyte.objectUtils(e[o],"delete","lookup_selected_val"),Lyte.objectUtils(e[o],"delete","lookup_newely_selected_val");break;case"selected":Lyte.Component.set(e[o],"lookup_selected_val",!0);break;case"unSelected":Lyte.Component.set(e[o],"lookup_selected_val",!1);break;case"selectedAndHidden":Lyte.Component.set(e[o],"lookup_selected_val",!0),Lyte.Component.set(e[o],"lookup_newely_selected_val","selected");break;case"unSelectedAndHidden":Lyte.Component.set(e[o],"lookup_selected_val",!1),Lyte.Component.set(e[o],"lookup_newely_selected_val","unSelected")}return this.setData("preventCall",!1),e},updateSelectedCountMsg:function(){this.isCustomLinkMessage||(this.data.cxPropReqForSelected?1===this.data.cxPropSelectedCount?this.setData("cxPropSelectedLinkMessage",_cruxUtils.getI18n("crux.user.selected.singular",this.data.cxPropSelectedCount)):this.setData("cxPropSelectedLinkMessage",_cruxUtils.getI18n("crux.users.selected.plural",this.data.cxPropSelectedCount)):1===this.data.totalAddedObjects.length?this.setData("cxPropSelectedLinkMessage",_cruxUtils.getI18n("crux.user.selected.singular",this.data.totalAddedObjects.length)):this.setData("cxPropSelectedLinkMessage",_cruxUtils.getI18n("crux.users.selected.plural",this.data.totalAddedObjects.length)))},handleSelection:function(e,t){var a,o,i,r,s=this.getData("cxPropPrimaryKey");if(r="SelectedUsers"!==this.data.cxPropFilter?this.data.systemData[t]:this.data.addedItems[t],"checked"===e&&!this.data.selectedList||"unChecked"===e&&this.data.selectedList){"checked"===e?(this.newelyUnSelectedTempList,i=this.newelyUnSelected,a=this.newelySelectedTempList,o=this.newelySelected):(this.newelySelectedTempList,i=this.newelySelected,a=this.newelyUnSelectedTempList,o=this.newelyUnSelected);for(var l=i.length,n=!1,c=0;c<l;c++)if(i[c][s]===r[s]){n=!0,Lyte.objectUtils(r,"delete","lookup_newely_selected_val"),Lyte.arrayUtils(i,"removeAt",c,1);break}n||o.unshift(r)}else if("checked"===e&&this.data.selectedList||"unChecked"===e&&!this.data.selectedList){"unChecked"===e?(this.newelySelectedTempList,i=this.newelySelected,a=this.newelyUnSelectedTempList,o=this.newelyUnSelected):(this.newelyUnSelectedTempList,i=this.newelyUnSelected,a=this.newelySelectedTempList,o=this.newelySelected);n=!1;for(var p=a.length,d=0;d<p;d++)if(r[s]===a[d][s]){n=!0,Lyte.arrayUtils(o,"insertAt",c,r);break}if(!n){p=i.length;for(d=0;d<p;d++)if(r[s]===i[d][s]){Lyte.objectUtils(r,"delete","lookup_newely_selected_val"),Lyte.arrayUtils(i,"removeAt",d,1);break}}}},checkVisibleData:function(){var e,t,a;a=t=(e=this.data.selectedList?this.data.addedItems:this.data.systemData).length;for(var o=0;o<t;o++)(!this.data.selectedList&&"selected"===e[o].lookup_newely_selected_val||this.data.selectedList&&"unSelected"===e[o].lookup_newely_selected_val)&&a--;a<20&&this.constructArray.call(this,"userLookup",!1)},resetNewelyAdjustedValues:function(){var e;this.data.selectedList?(e=this.newelySelectedTempList.length)&&Lyte.arrayUtils(this.getData("addedItems"),"removeAt",0,e):(e=this.newelyUnSelectedTempList.length)&&Lyte.arrayUtils(this.getData("systemData"),"removeAt",0,e)},init:function(){if(this.isDefaultCustomReq=this.getData("cxPropCustomRequest"),this.getData("cxPropIsSubordinate")&&!this.isDefaultCustomReq&&this.setData("cxPropCustomRequest",!0),this.onInDirectChange=!1,this.fixedCacheQuery=this.getData("cxPropNetworkData").cxPropCacheQuery,this.fixedDataCache=this.getData("cxPropNetworkData").cxPropDataCache,this.firstNameAvailability=!0,this.lastNameAvailability=!0,this.onFilterChange=!1,this.preventAllSelection=!1,this.preventCallBacks=!1,this.assignClose=!1,this.preventShowCalling=!1,this.preventWrongClose=!1,this.defaultSelectedIds=[],this.preventAction=!1,this.selectedModalSelectedIds=0,this.selectingFlag=!0,this.filterChange=!1,this.responseData=[],this.onModalClose=!1,this.splitAddedItems=0,this.splitPreAddedItems=0,this.usersAvailable=void 0,this.savedFilter=void 0,this.backButton=!1,this.multipleClicks=!1,this.makeRequest=!1,this.beforeAssign=!1,this.localClose=!1,this.selectedUser=!1,this.headerHeight=void 0,this.modalHeigth=void 0,this.tempLocalData=[],this.tempCurrentPos=void 0,this.tempnoMoreRecords=void 0,this.tempAllselectedCheckbox=void 0,this.tempUserAvilable=void 0,this.temppageNo=void 0,this.tempcxPropPerPage=void 0,this.fixedcxPropPerPage=void 0,this.tempCacheQuery=void 0,this.tempDataCache=void 0,this.inputFocus=!1,this.selectedTotalAddedObjects=[],this.newelySelected=[],this.newelySelectedTempList=[],this.preventCheckAllSelection=!1,this.mirrorTotalAddedObjects=[],this.perform_input_Trim=!0,null==this.getData("cxPropSelectedIds")&&this.setData("cxPropSelectedIds",[]),null==this.getData("cxPropSelectedId")&&this.setData("cxPropSelectedId",""),this.getData("cxPropHeaderYield")&&(this.setData("cxPropFilterable",!1),this.setData("cxPropSearchable",!1)),this.fixedcxPropPerPage=this.getData("cxPropPerPage"),"view"!=this.getData("cxPropType")?this.setData("cxPropModalWidth",this.getData("cxPropLookupWidth")):this.setData("cxPropModalWidth",this.getData("cxPropViewWidth")),this.getData("cxPropHeaderYield"))this.setData("cxPropFilter","");else if(this.getData("cxPropFilterYield"))this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"));else{if(0==this.getData("cxPropFilterOptions").length&&this.getData("cxPropFilterable")){var e=this.getDefaultFilters();this.setData("cxPropFilterOptions",e),this.setData("cxPropFilterUserValue","category"),this.setData("cxPropFilterSystemValue","id")}null==this.getData("cxPropSelectedFilterOption")||null==this.getData("cxPropSelectedFilterOption")?(this.setData("cxPropSelectedFilterOption","ActiveUsers"),this.setData("cxPropFilter","ActiveUsers")):this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"))}this.getData("cxPropSetEmptyFilter")&&this.setData("cxPropFilter",""),this.setData("value",this.data.cxPropSelectedId),"view"==this.data.cxPropType&&this.setData("cxPropCloseOnEscape",!0),this.data.cxPropMaxLimitMsg?this.isCustomMaxLimitMessage=!0:this.setData("cxPropMaxLimitMsg",this.getModalMaxLimitMsgValue()),this.data.cxPropSelectedLinkMessage?this.isCustomLinkMessage=!0:(this.isCustomLinkMessage=!1,this.updateSelectedCountMsg()),this.data.cxPropReqForSelected&&(this.initialOpen=!0,this.originalSelectedCount=0,this.newelyUnSelected=[],this.newelyUnSelectedTempList=[],this.initialRequest=!1,this.originalCount=0,this.emptyFirstReq=!1,this.preventLoadMoreData=!1,this.isRowClicking=!1,this.isNewRequest=!1,this.addedUsersToTop=!1,this.newelyUnSelected=[],this.newelyUnSelectedTempList=[],this.selectedHideList=[],this.unSelectedHideList=[],this.currentlyHiddenList=[],this.valueAddedToCurrentList=[],this.initialRequest=!1,this.originalCount=0,this.emptyFirstReq=!1,this.preventLoadMoreData=!1,this.isRowClicking=!1,this.isNewRequest=!1,this.addedUsersToTop=!1,this.isCustomMaxLimitMessage=!1,this.cachedDataOfPreviousScreen=[],this.setData("selectedCheckBoxValue",!1),this.sideChange=!1,this.isOpenRequest=!1)},getModalMaxLimitMsgValue:function(){var e;this.getData("cxPropMaxLimitMsg");if(!this.isCustomMaxLimitMessage)return e=1===this.getData("cxPropMaxLimit")?this.getData("cxPropSingularModuleName"):this.getData("cxPropPluralModuleName"),this.data.cxPropReqForSelected&&this.data.selectedList?_cruxUtils.getI18n("crux.max.limit.unselect",this.getData("cxPropMaxLimit"),e):_cruxUtils.getI18n("crux.comboBox.max.limit",this.getData("cxPropMaxLimit"),e)},didDestroy:function(){if(!this.getData("cxPropHeaderYield")&&!this.getData("cxPropCustomRequest")){var e=this.getData("cxPropPrimaryKey");this.setData("cxPropPerPage",this.fixedcxPropPerPage),this.setData("pageNo",1);for(var t=this.getData("cxPropFilterOptions"),a=0;a<t.length;a++)this.setData("cxPropFilter",t[a][e]),"ActiveUsers"!=t[a][e]&&store.clearCachedQuery(this.getData("cxPropNetworkData").cxPropModuleName,this.queryParams.call(this));0==this.getData("cxPropFilterable")&&store.clearCachedQuery(this.getData("cxPropNetworkData").cxPropModuleName,this.queryParams.call(this))}this.getMethods("onLookupDestroyed")&&this.executeMethod("onLookupDestroyed"),delete this.bodydrop,delete this.bodybody,delete this.userdrop,delete this.bodybox,delete this.userbody,delete this.userbox},didConnect:function(){this._keydown=this.getKeyDown.bind(this),this.modalEle=this.$node.querySelector("lyte-modal")},customReqFunc:function(e,t,a){return this.getData("cxPropIsSubordinate")&&!this.isDefaultCustomReq?new Promise(function(e,o){store.triggerAction("user","get_assigned",t).then(function(t){e(t)}.bind(this),function(e){a&&(this.errorOnSearch&&("userLookup"!=type&&(this.setData("searchLoading",!1),this.setData("scrollLoading",!1),this.setData("systemData",[])),this.errorOnSearch()),(0,console.error)(e),this.setData("multiScroll",!1))}.bind(this))}.bind(this)):this.getMethods("onCustomRequest")?this.data.cxPropReqForSelected?this.executeMethod("onCustomRequest",t,this.getData("isSearch"),this.getData("cxPropInputValue"),this.getData("cxPropSelectedList"),{newelySelected:this.newelySelected,newelyUnSelected:this.newelyUnSelected}):this.executeMethod("onCustomRequest",e,t,this.getData("isSearch"),this.getData("cxPropInputValue"),this.getData("cxPropSelectedList")):void 0},handleErrorOnRequest:function(){this.setData({searchLoading:!1,systemData:[],searchingSearch:!1,searchingUser:!1}),this.data.cxPropReqForSelected&&(this.emptyFirstReq=!0,this.valueAddedToCurrentList=[],this.currentlyHiddenList=[],this.checkIfNoResultStatus())},errorOnRequest:function(){this.handleErrorOnRequest()},errorOnSearch:function(){this.handleErrorOnRequest()},setCriteria:function(){if(this.getData("cxPropHeaderYield")){if(this.getMethods("getCriteria"))t=this.executeMethod("getCriteria")}else{var e=this.getData("cxPropPrimaryKey"),t={},a=this.getData("cxPropQueryParams");for(var o in a)t[o]=a[o];if(!this.data.cxPropReqForSelected){var i=this.setSubordinateQp();if(i)for(var o in i)t[o]=i[o];var r=this.getData("cxPropFilter");this.getData("cxPropSetEmptyFilter")||(t.type=r)}if(this.getData("isSearch")){if(this.getData("cxPropSearchable")){var s=this.getData("cxPropInputValue").slice().replace(/\(/g,"\\(").replace(/\)/g,"\\)");s=s.trim();var l=this.firstNameAvailability,n=this.lastNameAvailability;if(this.getMethods("setSearchCriteria")){var c=this.executeMethod("setSearchCriteria",s,l,n,t);for(var o in c)t[o]=c[o]}else if("user"==this.getData("cxPropNetworkData").cxPropModuleName){if(l&&n?p="((first_name:starts_with:"+s+")or(last_name:starts_with:"+s+")or(email:starts_with:"+s+")or(full_name:starts_with:"+s+"))":l&&!n?p="((first_name:starts_with:"+s+")or(email:starts_with:"+s+")or(full_name:starts_with:"+s+"))":!l&&n&&(p="((last_name:starts_with:"+s+")or(email:starts_with:"+s+")or(full_name:starts_with:"+s+"))"),null!=this.getData("cxPropSearchCriteria")&&""!=this.getData("cxPropSearchCriteria"))var p="("+p+"and"+this.getData("cxPropSearchCriteria")+")";this.getData("cxPropIsSubordinate")?(t.search={},t.search.criteria=p):t.criteria=p,this.data.cxPropReqForSelected||(t.type=r)}}}else if(!this.getData("cxPropReqForSelected"))if(this.getData("selectedList")){for(var d=this.mirrorTotalAddedObjects,u=[],h=d.length,m=0;m<h;m++)void 0===d[m][e]?u.push(d[m]):u.push(d[m][e]);var y=u.slice(this.splitAddedItems,this.splitAddedItems+this.getData("cxPropSelectedPerPage"));this.splitAddedItems+=this.getData("cxPropSelectedPerPage");var x=this.bodydrop.querySelector("lyte-table-structure").querySelector("input[name=selectedAllSelectCheckbox]");null!==x&&x.parentElement.parentElement.ltProp("checked")&&(this.selectedModalSelectedIds=y.length),this.getData("localData").length+y.length===u.length&&this.setData("noMoreRecords",!1),t={ids:y.join(",")};var f=this.getData("cxPropSelectedQueryParams");for(var o in f)t[o]=f[o]}else{var g=this.getData("cxPropCriteria");g.length>1&&(t.filters=g)}if(this.getMethods("getCustomQueryParams"))var t=this.executeMethod("getCustomQueryParams",t,this.data.isSearch,this.data.cxPropInputValue,this.data.selectedList)}return t},userLookupClose:function(){this.mirrorTotalAddedObjects=[],this.setData("showPlaceholderForSelected",!1),this.setData("showSelectedFooter",!1),this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0,this.onInDirectChange=!1,this.selectedModalSelectedIds=0,this.setData("currentlyExcludedArray",[]),this.preventWrongClose=!1,this.setData("stopScrolling",!1),this.preventShowCalling=!1,this.defaultSelectedIds=[],this.preventAction=!1,this.selectedModalSelectedIds=0;var e=this.getData("cxPropNetworkData");if(0==this.getData("cxPropForcedFetch")&&(e.cxPropCacheQuery=this.fixedCacheQuery,this.setData("cxPropNetworkData",e)),this.setData("displaySingleUser",{}),this.setData("searchingSearch",!1),this.setData("isSearch",!1),this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.setData("noMoreRecords",!0),"single"==this.getData("cxPropType")&&this.setData("buttonAccessibility",!0),"multiple"==this.getData("cxPropType")&&(this.selectingFlag=!0,this.setData("cxPropPerPage",this.fixedcxPropPerPage),this.splitAddedItems=0,this.splitPreAddedItems=0,this.getData("cxPropFooterYield")||this.setData("buttonAccessibility",!0)),this.setData("dataFetched",!1),this.multipleClicks=!1,this.setData("systemData",[]),null!=this.bodydrop.querySelector(".NoUsersLookup")&&(this.bodydrop.querySelector(".NoUsersLookup").style.visibility="hidden"),this.setData("localData",[]),null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&(this.preventAllSelection=!0,this.setData("allCheckboxState",!1),this.preventAllSelection=!1),this.setData("pageNo",1),this.setData("currentPos",0),this.getData("selectedList")&&(this.setData("selectedList",!1),this.setData("cxPropSelectedList",!1),this.setData("DselectedList",!1)),this.onModalClose=!1,this.selectedUser=!1,this.localClose=!1,this.setData("addedItems",[]),this.getData("cxPropReqForSelected")){if(this.newelySelectedTempList=[],this.getData("cxPropFilterable")){var t=this.newelySelectedTempObject;for(var a in t)t[a]=[];this.newelySelectedTempObject=t}if(this.getData("cxPropFilterable")){for(var a in t=this.newelySelectedObject)t[a]=[];this.newelySelectedObject=t}this.newelyUnSelected=[],this.newelySelected=[],this.selectedHideList=[],this.unSelectedHideList=[];var o={selected:(o=this.data.cxPropReqForSelectedValue)&&o.selected&&o.selected.length?this.setSelectionStateOfRecords(o.selected,"clear"):[],unSelected:o&&o.unSelected&&o.unSelected.length?this.setSelectionStateOfRecords(o.unSelected,"clear"):[]}}if("single"===this.data.type&&this.data.cxPropShowSuggestion&&(this.setData("suggestedUsers",this.data.cxPropSuggestion.users),this.setData("cxPropShowSuggestionLoading",!1),this.data.suggestedUsers.length)){var i=this.data.suggestedUsers.find((function(e){return!0===e.lookup_selected_val}));i&&(this.suggestionCheck=!0,Lyta.objectUtils(i,"add","lookup_selected_val",!1))}},setSelectedFilterValue:function(){if(!this.getData("cxPropHeaderYield"))if(this.getData("cxPropFilterable")){var e=this.getData("cxPropFilterYield");e?(this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption")),this.getData("selectedList")||this.userdrop.ltProp("selected",this.getData("cxPropSelectedFilterOption")),this.getMethods("onFilterOptionSelected")&&this.executeMethod("onFilterOptionSelected",{},this.getData("cxPropSelectedFilterOption"),this.userdrop.component)):e||null==this.getData("cxPropSelectedFilterOption")||(this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption")),this.getData("selectedList")||this.userdrop.ltProp("selected",this.getData("cxPropSelectedFilterOption")))}else null==this.getData("cxPropSelectedFilterOption")||null==this.getData("cxPropSelectedFilterOption")?(this.setData("cxPropSelectedFilterOption","ActiveUsers"),this.setData("cxPropFilter","ActiveUsers")):this.setData("cxPropFilter",this.getData("cxPropSelectedFilterOption"))},setSuggestedUsers:function(){if(this.data.cxPropShowSuggestion&&this.data.cxPropShow){this.data.cxPropInputValue.length>1?this.setSearchDataForSuggestion(this.data.cxPropInputValue):this.setData("suggestedUsers",this.data.cxPropSuggestion.users);var e=this.data.cxPropSelectedId;if(e&&this.data.suggestedUsers.length){var t=this.data.suggestedUsers.find((function(t){return t.id===e}));t&&(this.suggestionCheck=!0,Lyte.objectUtils(t,"add","lookup_selected_val",!0))}this.data.suggestedUsers.length>0&&this.setData("cxPropShowSuggestionLoading",!1)}}.observes("cxPropSuggestion.users").on("didConnect"),setZiaLoaderPos:function(){if(this.data.cxPropShowSuggestion&&(this.data.cxPropShowSuggestionLoading||this.data.searchingUser)){var e=$L("#cruxUserLookupTable",this.bodydrop)[0].offsetWidth/2,t=$L(".ziaLookupLoader",this.bodybody),a=t[0].offsetWidth/2,o=t.length,i=e-a;if(o)for(var r=0;r<o;r++)t[r].left=i}}.observes("cxPropShowSuggestionLoading","searchingUser"),setPostionForNoValueTxt:function(){if("single"===this.data.cxPropType&&this.data.cxPropShowSuggestion){var e,t=$L("#cruxUserLookupTable",this.bodydrop)[0].offsetWidth/2;if(0===this.data.systemData.length)(e=$L(".NoUsersLookup",this.bodybody)[0])&&(e.left=t-e.width/2);if(0===this.data.suggestedUsers.length)(e=$L(".ziaNoUsersLookup",this.bodybody)[0])&&(e.left=t-e.width/2)}}.observes("suggestedUsers","systemData"),newConstructedBatch:function(e){for(var t,a,o=0,i=this.getData("cxPropPrimaryKey"),r=e.length,s=0;s<r;s++){if(this.setData("preventCall",!0),this.getData("cxPropReqForSelected"))if(this.getData("selectedList")){t=(a=this.newelyUnSelected).length,Lyte.Component.set(e[s],"lookup_selected_val",!0),Lyte.objectUtils(e[s],"delete","lookup_newely_selected_val");for(l=0;l<t;l++)a[l][i]===e[s][i]&&Lyte.Component.set(e[s],"lookup_selected_val",!1);if(this.sideChange||this.isOpenRequest)for(c=(n=this.unSelectedHideList).length,l=0;l<c;l++)if(e[s][i]===n[l][i]){Lyte.Component.set(e[s],"lookup_newely_selected_val","unSelected"),this.currentlyHiddenList.push(e[s]),o++;break}}else{t=(a=this.newelySelected).length,Lyte.Component.set(e[s],"lookup_selected_val",!1),Lyte.objectUtils(e[s],"delete","lookup_newely_selected_val");for(var l=0;l<t;l++)a[l][i]===e[s][i]&&Lyte.Component.set(e[s],"lookup_selected_val",!0);if(this.sideChange||this.isOpenRequest)for(var n,c=(n=this.selectedHideList).length,l=0;l<c;l++)if(e[s][i]===n[l][i]){Lyte.Component.set(e[s],"lookup_newely_selected_val","selected"),this.currentlyHiddenList.push(e[s]),o++;break}}else if(t=1,a=this.getData("totalAddedObjects"),"multiple"==this.getData("cxPropType")&&(t=a.length),0==this.getData("selectedList")&&"view"!=this.getData("cxPropType")){Lyte.Component.set(e[s],"lookup_selected_val",!1);for(var l=0;l<t;l++)null!=a[l][i]?a[l][i]==e[s][i]&&Lyte.Component.set(e[s],"lookup_selected_val",!0):null!=a[l]?a[l]==e[s][i]&&Lyte.Component.set(e[s],"lookup_selected_val",!0):a==e[s][i]&&Lyte.Component.set(e[s],"lookup_selected_val",!0)}else Lyte.Component.set(e[s],"lookup_selected_val",!0);this.setData("preventCall",!1)}this.isNewRequest&&this.data.cxPropReqForSelected&&(this.batchDispCount=this.batchDispCount+this.data.cxPropRecords-o,!(this.data.currentPos===this.data.localData.length&&!this.data.noMoreRecords)&&this.batchDispCount<10&&this.data.cxPropReqForSelected?(this.preventLoadMoreData=!0,setTimeout(function(){this.constructArray.call(this,"userLookup",!1)}.bind(this),0)):(setTimeout(function(){this.checkIfNoResultStatus()}.bind(this),0),this.preventLoadMoreData&&(this.preventLoadMoreData=!1,this.loadMoreData())));this.getMethods("updateList")&&this.executeMethod("updateList",e)},updatedList:function(){if(this.data.cxPropShowAllselectCheckbox){var e=this.getData("cxPropRecords");if(0!=this.getData("currentPos")){if(null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&1==this.bodydrop.querySelector("input[name=allSelectCheckbox]").checked&&0==this.getData("selectedList")){var t=this.getData("systemData").length;for(this.setData("preventAllCallBacks",!0),i=t-1-e;i<=t-1;i++){var a=!0;if(this.getMethods("beforeCheckboxChecked"))a=this.executeMethod("beforeCheckboxChecked",this.getData("systemData")[i]);if(a||null==a||null==a){if(this.getData("totalAddedObjects").length==this.getData("cxPropMaxLimit")){this.cxPropMaxLimitMessageBox(),t>this.getData("cxPropMaxLimit")&&(this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1);break}this.preventCallBacks=!0,this.preventCheckAllSelection=!0,Lyte.Component.set(this.getData("systemData")[i],"lookup_selected_val",!0)}}this.preventCheckAllSelection=!1;var o=this;setTimeout((function(){o.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1)}if(null!=this.bodydrop.querySelector("input[name=selectedAllSelectCheckbox]")&&0==this.bodydrop.querySelector("input[name=selectedAllSelectCheckbox]").checked&&this.getData("selectedList")){if(!this.onInDirectChange){t=this.getData("addedItems").length;this.setData("preventAllCallBacks",!0);for(var i=t-1;i>t-1-e;i--){var r=!0;if(this.getMethods("beforeCheckboxUnChecked"))r=this.executeMethod("beforeCheckboxUnChecked",this.getData("systemData")[i]);(r||null==r||null==r)&&(this.preventCallBacks=!0,this.preventCheckAllSelection=!0,Lyte.Component.set(this.getData("addedItems")[i],"lookup_selected_val",!1))}this.preventCheckAllSelection=!1;o=this;setTimeout((function(){o.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1)}for(var s=this.getData("addedItems"),l=0,n=s.length,c=0;c<n;c++)s[c].lookup_selected_val&&(l+=1);this.selectedModalSelectedIds=l}else this.selectedModalSelectedIds=this.getData("addedItems").length}}},loadMoreData:function(){if(this.data.cxPropReqForSelected){if(this.preventLoadMoreData)return;this.isNewRequest=!1,this.setData("openRequest",!1),1===this.data.pageNo&&this.data.localData&&0===this.data.localData.length&&(this.emptyFirstReq=!0),this.addNewelySelectedToTop(),this.sideChange=!1,this.isOpenRequest=!1}if(this.bodybody.classList.contains("crux_transform_0deg")?this.bodybody.classList.remove("crux_transform_0deg"):this.bodybody.classList.add("crux_transform_0deg"),!this.data.cxPropReqForSelected&&!this.getData("selectedList")){for(var e=0,t=0;t<this.getData("systemData").length;t++)this.getData("systemData")[t].lookup_selected_val&&e++;e==this.getData("systemData").length&&0!=e&&(this.preventAction=!0,this.setData("allCheckboxState",!0),this.preventAction=!1),this.onFilterChange=!1}this.setData("firstOpen",!1),this.setData("searchingScroll",!1),this.setData("searchingSelectedScroll",!1),this.setData("searchingSearch",!1),this.data.cxPropReqForSelected||(this.getData("noMoreRecords")&&this.getData("localData").length-this.getData("currentlyExcludedArray").length<this.getData("cxPropRecords")?this.constructArray.call(this,"userLookup",!1):this.setData("searchingUser",!1)),this.setData("searchingUser",!1),this.selectedUser&&(this.setData("DselectedList",!0),this.modalEle.alignLyteModal()),this.data.cxPropReqForSelected&&this.checkIfNoResultStatus(),$L(this.bodydrop.querySelector(".lyteTableScroll")).resetScrollbar()},storeCurrentSelection:function(){if(null!=this.bodydrop.querySelector("input[name=allSelectCheckbox]")){this.bodydrop.querySelector("lyte-table-structure").querySelector("input[name=allSelectCheckbox]");this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1}},filterObserver:function(e,t){"search"==e&&this.getMethods("onSearch")&&this.executeMethod("onSearch",this.getData("cxPropInputValue")),"removeAll"==e&&(this.data.cxPropReqForSelected&&this.resetNewelyAdjustedValues(),this.getMethods("onCancelSearch")&&this.executeMethod("onCancelSearch",this.getData("cxPropFilter")));var a=this.getData("cxPropNetworkData");this.setData("currentlyExcludedArray",[]),this.filterChange=!0,this.onFilterChange=!1,this.getData("isSearch")||this.setData("searchingUser",!0),"multiple"==this.getData("cxPropType")&&this.storeCurrentSelection();var o=this.getData("cxPropFilter");this.getData("isSearch")||("SelectedUsers"!=o&&0==this.getData("cxPropForcedFetch")&&(a.cxPropCacheQuery=this.fixedCacheQuery,this.setData("cxPropNetworkData",a)),"ActiveUsers"==o&&1==this.getData("pageNo")&&0==this.getData("cxPropForcedFetch")?(a.cxPropDataCache=this.fixedDataCache,this.setData("cxPropNetworkData",a)):(a.cxPropDataCache=!1,this.setData("cxPropNetworkData",a))),"SelectedUsers"==o&&this.getData("cxPropReqForSelected")||"SelectedUsers"==o&&0!=this.getData("totalAddedObjects").length||"SelectedUsers"!=o?(("SelectedUsers"!=o||"SelectedUsers"==o&&this.getData("cxPropReqForSelected"))&&0!=this.getData("pageNo")&&this.setData("pageNo",1),"SelectedUsers"==o&&(this.getData("cxPropReqForSelected")||this.setData("selectedCheckBoxValue",!0)),"search"===e&&"removeAll"!=e&&"search"!==e||(this.setData("localData",[]),this.setData("currentPos",0),this.data.cxPropReqForSelected&&(this.currentlyHiddenList=[]),"search"==e&&this.setData("searchingSearch",!0),this.constructArray("userLookup",!1),this.filterChange=!1)):(this.setData("selectedCheckBoxValue",!1),this.filterChange=!1,this.setData("addedItems",this.getData("totalAddedObjects")),this.setData("searchingUser",!1),this.setData("DselectedList",!0))},setAssign:function(){var e=!0;if(this.getMethods("onBeforeAssign")&&(e=this.getData("cxPropReqForSelected")?this.executeMethod("onBeforeAssign",{selected:this.newelySelected,unSelected:this.newelyUnSelected}):this.executeMethod("onBeforeAssign",this.responseData)),0!=e){if(this.localClose=!0,this.beforeAssign=!0,this.onModalClose=!0,this.setSelectedFilterValue.call(this),this.assignClose=!0,this.$node.cxProp("show",!1),this.data.cxPropReqForSelected){var t={selected:this.setSelectionStateOfRecords(this.newelySelected,"clear"),unSelected:this.setSelectionStateOfRecords(this.newelyUnSelected,"clear")};this.setData("cxPropReqForSelectedValue",t)}this.getMethods("onAssign")&&(e=this.getData("cxPropReqForSelected")?this.executeMethod("onAssign",t):this.executeMethod("onAssign",this.responseData))}},fetchUsers:function(e,t,a,o,i){var r=t.slice(this.splitPreAddedItems,this.splitPreAddedItems+this.getData("cxPropSelectedPerPage"));return this.splitPreAddedItems+=this.getData("cxPropSelectedPerPage"),o++,store.findAll(this.getData("cxPropNetworkData").cxPropModuleName,{ids:r.join(",")},this.getData("cxPropNetworkData").cxPropCacheQuery,this.getData("cxPropNetworkData").cxPropDataCache,this.getData("cxPropNetworkData").cxPropCustomData).then(function(t){t&&t.constructor==Object&&(t=t[this.getData("cxPropNetworkData").cxPropModuleName]),i.push(t);for(var r=0;r<t.length;r++)a.push(t[r]);this.responseData=a,o==e&&this.setAssign.call(this)}.bind(this),function(e){(0,console.error)(e)}.bind(this)),o},filterObs:function(){this.onModalClose?this.onModalClose=!1:this.backButton?this.backButton=!1:(this.getData("cxPropInputValue").length>1&&this.getData("isSearch")&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1)),0!=this.getData("pageNo")&&this.setData("pageNo",1),null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.filterObserver.call(this))}.observes("cxPropFilter"),changeCacheOption:function(){var e=this.getData("cxPropNetworkData");0==this.getData("cxPropForcedFetch")?e.cxPropCacheQuery=this.fixedCacheQuery:e.cxPropCacheQuery=!1,this.setData("cxPropNetworkData",e)}.observes("cxPropForcedFetch"),setSubordinateQp:function(){if(this.getData("cxPropIsSubordinate")){var e={feature:"subordinates"};return e.related_entity_id=Crm.userDetails.USER_ID,e}},showToggle:function(){if(this.preventShowCalling)this.preventShowCalling=!1;else if(this.getData("cxPropShow")){this.data.cxPropReqForSelected&&(this.currentlyHiddenList=[],(this.data.cxPropSelectedCount||0===this.data.cxPropSelectedCount)&&(this.originalSelectedCount=this.data.cxPropSelectedCount),this.initialOpen=!1,this.newelySelected=this.data.cxPropReqForSelectedValue&&this.data.cxPropReqForSelectedValue.selected?this.data.cxPropReqForSelectedValue.selected.slice():[],this.newelySelectedTempList=this.newelySelected.slice(),this.selectedHideList=this.newelySelected,this.newelyUnSelected=this.data.cxPropReqForSelectedValue&&this.data.cxPropReqForSelectedValue.unSelected?this.data.cxPropReqForSelectedValue.unSelected.slice():[],this.newelyUnSelectedTempList=this.newelyUnSelected.slice(),this.unSelectedHideList=this.newelyUnSelected);var e=this.getData("cxPropNetworkData");if(0==this.getData("cxPropForcedFetch")?e.cxPropCacheQuery=this.fixedCacheQuery:e.cxPropCacheQuery=!1,this.setData("cxPropNetworkData",e),this.setData("cxPropNetworkData",e),this.setData("cxPropPrimaryKey",store.getPrimaryKey(this.getData("cxPropNetworkData").cxPropModuleName)),this.setData("searchingUser",!0),this.setData("firstOpen",!0),"single"!=this.getData("cxPropType")||this.getData("cxPropFooterYield"))this.modalEle.ltProp("show",!0);else{var t=this.getData("cxPropSelectedId");0!=t.length&&(this.setData("showSelectedFooter",!0),this.setData("showPlaceholderForSelected",!0),store.findRecord(this.getData("cxPropNetworkData").cxPropModuleName,t).then(function(e){this.setData("showPlaceholderForSelected",!1),this.setData("displaySingleUser",e[0])}.bind(this))),this.modalEle.ltProp("show",!0)}}else this.preventWrongClose?this.preventWrongClose=!1:this.modalEle.ltProp("show",!1)}.observes("cxPropShow").on("didConnect"),lookupOpen:function(){this.bodydrop.querySelector("input[name=allSelectCheckbox]")&&this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked")&&(this.setData("preventAllCheckboxUnchecked",!1),this.setData("allCheckboxState",!1));var e=this.getData("cxPropNetworkData");if(!this.multipleClicks&&(this.multipleClicks=!0,!this.getData("dataFetched"))){if("single"==this.getData("cxPropType")){var t=[];t[0]=this.getData("cxPropSelectedId").slice(),this.setData("totalAddedObjects",t)}else{var a=this.data.cxPropSelectedIds.slice();this.defaultSelectedIds=a,this.setData("totalAddedObjects",a.slice()),this.data.cxPropReqForSelected||this.setData("cxPropSelectedCount",a.length?a.length:0)}if(this.updateSelectedCountMsg(),!this.getData("cxPropHeaderYield"))"ActiveUsers"==this.getData("cxPropFilter")&&0==this.getData("cxPropForcedFetch")?e.cxPropDataCache=this.fixedDataCache:e.cxPropDataCache=!1,this.setData("cxPropNetworkData",e);if("user"==this.getData("cxPropNetworkData").cxPropModuleName){var o=!0,i=this.getData("cxPropUserFieldProperties");i&&Object.keys(i).length&&(i.firstName||!1===i.firstName||i.lastName||!1===i.lastName?(o=!1,this.firstNameAvailability=i.firstName,this.lastNameAvailability=i.lastName):o=!0),o&&store.findAll("field",{module:"users"}).then(function(e){var t;e&&e.constructor==Object?null!=e.field?t=e.field:null!=e.fields&&(t=e.fields):e&&e.constructor==Array&&(t=e),this.lastNameAvailability=!1,this.firstNameAvailability=!1;for(var a=0,o=0;o<t.length&&("first_name"==t[o].api_name&&(this.firstNameAvailability=!0,a++),"last_name"==t[o].api_name&&(this.lastNameAvailability=!0,a++),2!==a);o++);}.bind(this),function(e){(0,console.error)(e)}.bind(this))}this.isOpenRequest=!0,this.constructArray.call(this,"userLookup",!1),this.multipleClicks=!1,this.setData("dataFetched",!0),this.usersAvailable=!0}},checkAllSelection:function(){if("SelectedUsers"!=this.getData("cxPropFilter"))for(var e=(o=this.getData("systemData")).length,t=0,a=0;a<e;a++){if(!o[a].lookup_selected_val){this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1;break}if(++t==this.getData("cxPropMaxLimit")||t===e){this.preventAction=!0,this.setData("allCheckboxState",!0),this.preventAction=!1;break}}else{this.bodydrop.querySelector("lyte-table-structure").querySelector("input[name=selectedAllSelectCheckbox]");if(this.getData("cxPropReqForSelected")){var o;for(e=(o=this.getData("addedItems").length).length,t=0,a=0;a<e;a++){if(o.lookup_selected_val){this.preventAction=!0,this.setData("allCheckboxState",!1),this.preventAction=!1;break}++t==this.getData("cxPropMaxLimit")&&(this.preventAction=!0,this.setData("allCheckboxState",!0),this.preventAction=!1)}}else this.selectedModalSelectedIds==this.getData("addedItems").length?(this.preventAction=!0,this.setData("selectedCheckBoxValue",!0),this.preventAction=!1):(this.preventAction=!0,this.setData("selectedCheckBoxValue",!1),this.preventAction=!1)}},getKeyDown:function(e){if(!this.getData("cxPropPreventKeyDown")&&!this.inputFocus){var t=!1,a=!1,o=!1;38==e.keyCode?t=!0:40==e.keyCode?a=!0:32==e.keyCode&&(o=!0);var i=document.querySelector(".currentOpenedModal").component.childComp.querySelector("lyte-table"),r=i.querySelector(".currentSelected");if(o&&r)r.click();else if(i)if(r||!t&&!a){if(t){null!==r.previousElementSibling&&(r.classList.remove("currentSelected"),r.previousElementSibling.classList.add("currentSelected"),r=r.previousElementSibling);var s=i.querySelector("lyte-thead").querySelector("lyte-th").getBoundingClientRect().bottom,l=r.getBoundingClientRect().top;l-s<0&&(i.querySelector(".lyteTableScroll").scrollTop=i.querySelector(".lyteTableScroll").scrollTop+(l-s))}else if(a){"TEMPLATE"!=r.nextElementSibling.tagName&&(r.classList.remove("currentSelected"),r.nextElementSibling.classList.add("currentSelected"),r=r.nextElementSibling);i.querySelector("lyte-thead").querySelector("lyte-th");var n=i.querySelector(".lyteTableScroll").getBoundingClientRect().bottom,c=r.getBoundingClientRect().bottom;n-c<0&&(i.querySelector(".lyteTableScroll").scrollTop=i.querySelector(".lyteTableScroll").scrollTop+-1*(n-c))}}else i.querySelector("lyte-tbody").querySelector("lyte-tr").classList.add("currentSelected")}},data:function(){return{cxPropPluralModuleName:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.users")}),cxPropSingularModuleName:Lyte.attr("string",{default:_cruxUtils.getI18n("User")}),cxPropMaxLimitMsg:Lyte.attr("string",{default:""}),cxPropAllowMultiple:Lyte.attr("boolean",{default:!1}),cxPropCustomRequest:Lyte.attr("boolean",{default:!1}),cxPropNoUserAvilableMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.security.group.users.empty")}),currentlyExcludedArray:Lyte.attr("array",{default:[]}),cxPropLookupWidth:Lyte.attr("string",{default:"60%"}),cxPropViewWidth:Lyte.attr("string",{default:"40%"}),allCheckboxbeforeUnchecked:Lyte.attr("boolean",{default:!0}),allCheckboxState:Lyte.attr("boolean",{default:!1}),buttonAccessibility:Lyte.attr("boolean",{default:!0}),cxPropWrapperClass:Lyte.attr("string",{default:""}),stopScrolling:Lyte.attr("boolean",{default:!1}),cxPropQueryParams:Lyte.attr("object",{default:{}}),selectedCheckBoxValue:Lyte.attr("boolean",{default:!0}),cxPropPrimaryKey:Lyte.attr("string"),cxPropHeader:Lyte.attr("array",{default:[{systemValue:"full_name",displayValue:_cruxUtils.getI18n("crm.zti.label.user"),yield:!1,isSticky:!0},{systemValue:"role",displayValue:_cruxUtils.getI18n("cob.role"),yield:!1,isSticky:!1},{systemValue:"email",displayValue:_cruxUtils.getI18n("zoho.email"),yield:!1,isSticky:!1},{systemValue:"profile",displayValue:_cruxUtils.getI18n("Profile"),yield:!1,isSticky:!1}]}),cxPropHeaderYield:Lyte.attr("boolean",{default:!1}),cxPropFooterYield:Lyte.attr("boolean",{default:!1}),cxPropNetworkData:Lyte.attr("object",{default:{cxPropModuleName:"user",cxPropCacheQuery:!0,cxPropDataCache:!1}}),displaySingleUser:Lyte.attr("object",{default:{}}),cxPropSelectedPerPage:Lyte.attr("number",{default:100}),searchingScroll:Lyte.attr("boolean",{default:!1}),noUsersAvilabel:Lyte.attr("boolean",{default:!1}),firstOpen:Lyte.attr("boolean"),cxPropModalWidth:Lyte.attr("string"),cxPropShow:Lyte.attr("boolean",{default:!1}),DselectedList:Lyte.attr("boolean",{default:!1}),selectedList:Lyte.attr("boolean",{default:!1}),cxPropType:Lyte.attr("string",{default:"single"}),cxPropForcedFetch:Lyte.attr("boolean",{default:!1}),systemData:Lyte.attr("array",{default:[]}),localData:Lyte.attr("array",{default:[]}),pageNo:Lyte.attr("number",{default:1}),noMoreRecords:Lyte.attr("boolean",{default:!0}),addedItems:Lyte.attr("array",{default:[]}),totalAddedObjects:Lyte.attr("array",{default:[]}),currentPos:Lyte.attr("number",{default:0}),isSearch:Lyte.attr("boolean",{default:!1}),multiScroll:Lyte.attr("boolean",{default:!1}),searchingSearch:Lyte.attr("boolean",{default:!1}),searchingUser:Lyte.attr("boolean",{default:!0}),cxPropCacheQuery:Lyte.attr("boolean"),cxPropDataCache:Lyte.attr("boolean",{default:!1}),cxPropPerPage:Lyte.attr("number",{default:200}),cxPropSelectedIds:Lyte.attr("array",{default:[]}),cxPropSelectedId:Lyte.attr("string",{default:""}),cxPropExclude:Lyte.attr("array",{default:[]}),cxPropModuleName:Lyte.attr("string",{default:"user"}),cxPropMaxLimit:Lyte.attr("number",{default:500}),cxPropHeaderName:Lyte.attr("string"),cxPropUserDropShow:Lyte.attr("boolean",{default:!1}),cxPropUserDropFreeze:Lyte.attr("boolean",{default:!1}),cxPropUserDropDisabled:Lyte.attr("boolean",{default:!1}),cxPropUserDropBoundary:Lyte.attr("object",{default:{}}),cxPropUserDropCallout:Lyte.attr("boolean",{default:!1}),cxPropUserDropTabindex:Lyte.attr("string",{default:"0"}),cxPropFilter:Lyte.attr("string",{default:"AllUsers"}),cxPropFilterYield:Lyte.attr("boolean",{default:!1}),cxPropFilterOptions:Lyte.attr("array",{default:[]}),cxPropSelectedFilterOption:Lyte.attr("string"),cxPropFilterUserValue:Lyte.attr("string",{default:""}),cxPropFilterSystemValue:Lyte.attr("string",{default:""}),cxPropSearchable:Lyte.attr("boolean",{default:!0}),cxPropFilterable:Lyte.attr("boolean",{default:!0}),cxPropRecords:Lyte.attr("number",{default:20}),cxPropMinLength:Lyte.attr("number",{default:1}),cxPropInputAutocomplete:Lyte.attr("string",{default:"off"}),cxPropInputPlaceholder:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.search.for.users")}),cxPropInputAutofocus:Lyte.attr("boolean",{default:!1}),cxPropInputDisabled:Lyte.attr("boolean",{default:!1}),cxPropInputStyle:Lyte.attr("string",{default:""}),cxPropInputReadonly:Lyte.attr("boolean",{default:!1}),cxPropInputId:Lyte.attr("string",{default:"inputId"}),cxPropInputClass:Lyte.attr("string",{default:""}),cxPropInputType:Lyte.attr("string",{default:"search"}),cxPropInputName:Lyte.attr("string",{default:""}),cxPropInputWidth:Lyte.attr("string",{default:"auto"}),cxPropInputValue:Lyte.attr("string",{default:""}),cxPropInputAppearance:Lyte.attr("string",{default:"box"}),cxPropInputDirection:Lyte.attr("string",{default:"vertical"}),cxPropInputWrapperStyle:Lyte.attr("string",{default:"border: 1px solid #ddd; padding: 5px;height: 32px; top: unset;"}),cxPropInputTabindex:Lyte.attr("string",{default:"0"}),cxPropCriteria:Lyte.attr("string",{default:""}),cxPropSearchCriteria:Lyte.attr("string",{default:""}),cxPropPreventKeyDown:Lyte.attr("boolean",{default:!1}),cxPropReqForSelected:Lyte.attr("boolean",{default:!1}),cxPropSelectedCount:Lyte.attr("number",{default:0}),cxPropSelectedList:Lyte.attr("boolean",{default:!1}),cxPropSetEmptyFilter:Lyte.attr("boolean",{default:!1}),cxPropSelectedLinkMessage:Lyte.attr("string"),cxPropPreventRowClick:Lyte.attr("boolean",{default:!0}),showPlaceholderForSelected:Lyte.attr("boolean",{default:!1}),showSelectedFooter:Lyte.attr("boolean",{default:!1}),cxPropMaxLimitDuration:Lyte.attr("string",{default:"2000"}),cxPropSelectedQueryParams:Lyte.attr("object",{default:{}}),messageBoxType:Lyte.attr("string",{default:"error"}),cxPropUserFieldProperties:Lyte.attr("object",{default:{}}),cxPropShowSuggestion:Lyte.attr("boolean",{default:!1}),cxPropShowSuggestionLoading:Lyte.attr("boolean",{default:!1}),cxPropSuggestion:Lyte.attr("object",{default:{label:"Zia Suggestion",users:[]}}),suggestedUsers:Lyte.attr("array",{default:[]}),cxPropNoSuggestionValue:Lyte.attr("string",{default:"No Suggestions Found"}),cxPropIsSubordinate:Lyte.attr("boolean",{default:!1}),cxPropTransition:Lyte.attr("object",{default:{animation:"slideFromTop",duration:"0.4"}}),cxPropOffset:Lyte.attr("object",{default:{top:"0px",left:"center"}}),cxPropTitle:Lyte.attr("string"),cxPropShowCloseIcon:Lyte.attr("boolean"),cxPropCloseOnEscape:Lyte.attr("boolean",{default:!1}),preventFocus:Lyte.attr("boolean",{default:!1}),openRequest:Lyte.attr("boolean"),cxPropReqForSelectedValue:Lyte.attr("object",{default:{selected:[],unSelected:[]}}),cxPropShowAllselectCheckbox:Lyte.attr("boolean",{default:!0}),cxPropFooterButtonsLiterals:Lyte.attr("object",{default:{cancel:_cruxUtils.getI18n("crm.button.cancel"),save:_cruxUtils.getI18n("crm.label.assign.manually")}}),showNoDataMsg:Lyte.attr("boolean",{default:!1}),cxPropSelectedHeaderMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.usrpop.non.selected")}),cxPropModalWidth:Lyte.attr("string"),cxPropMaxWidth:Lyte.attr("string",{default:""}),cxPropMaxHeight:Lyte.attr("string",{default:""}),cxPropHeight:Lyte.attr("string",{default:"auto"}),cxPropNoContentClass:Lyte.attr("string",{default:"noResultAriaComp"})}},continueBackToLookup:function(){this.modalEle.alignLyteModal(),this.bodydrop=this.modalEle.component.childComp,this.bodybody=this.bodydrop.querySelector("div.lyteTableScroll"),this.userdrop=this.bodydrop.querySelector("lyte-dropdown"),this.bodybox=this.bodydrop.querySelector("lyte-drop-box"),this.userdrop&&(this.userbody=this.userdrop.querySelector("lyte-drop-body"),this.userbox=this.userdrop.querySelector("lyte-drop-box")),this.backButton=!0,this.setData("cxPropFilter",this.savedFilter),this.getData("cxPropFilterable")&&!this.getData("cxPropHeaderYield")&&this.bodydrop.querySelector("lyte-dropdown").ltProp("selected",this.savedFilter),this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0,this.setData("totalAddedObjects",this.getData("cxPropSelectedIds").slice()),this.updateSelectedCountMsg(),this.checkIfNoResultStatus()},actions:{rowClick:function(e,t,a,o){if(!this.isRowClicking&&this.getData("cxPropPreventRowClick")){if("single"==this.getData("cxPropType")){if(e.target._callee&&"LYTE-RADIOBUTTON"==e.target._callee.tagName)return;if(0!=!t.querySelector("lyte-radiobutton").ltProp("checked")){var i=!0,r=t.classList.contains("cxUserLookupZiaSuggestedRow")?this.data.suggestedUsers[a]:this.data.systemData[a];if(this.getMethods("beforeRadiobuttonClicked"))i=this.executeMethod("beforeRadiobuttonClicked",r);(i||null==i||null==i)&&(this.preventCallBacks=!0,this.getData("selectedList")?Lyte.Component.set(this.getData("addedItems")[a],"lookup_selected_val",!0):Lyte.Component.set(r,"lookup_selected_val",!0))}}else if("multiple"==this.getData("cxPropType")){if(e.target._callee&&"LYTE-CHECKBOX"==e.target._callee.tagName)return;var s=t.querySelector("lyte-checkbox");if(s.ltProp("checked")){if(s.ltProp("checked")){var l=!0;if(this.getMethods("beforeCheckboxUnChecked"))l=this.executeMethod("beforeCheckboxUnChecked",this.getData("systemData")[a]);(l||null==l||null==l)&&(this.preventCallBacks=!0,this.isRowClicking=!0,s.click(),this.isRowClicking=!1)}}else{var n=!0;if(this.getMethods("beforeCheckboxChecked"))n=this.executeMethod("beforeCheckboxChecked",this.getData("systemData")[a]);(n||null==n||null==n)&&(this.preventCallBacks=!0,this.isRowClicking=!0,s.click(),this.isRowClicking=!1)}}this.preventCallBacks=!1}},clearInput:function(e){e&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1),null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.filterObserver.call(this,"removeAll"),this.bodydrop.querySelector("lyte-input input").focus(),this.data.cxPropShowSuggestion&&this.setSearchDataForSuggestion(this.data.cxPropInputValue))},searchKeyup:function(e){var t=this.bodydrop.querySelector(".lyteTableScroll");this.keyup.call(this,"userLookup",t,e),this.data.cxPropShowSuggestion&&(clearTimeout(this._timeout2),this._timeout2=setTimeout(function(){this.data.cxPropInputValue.length>=2?this.setSearchDataForSuggestion(this.data.cxPropInputValue):0==this.data.cxPropInputValue.length&&this.setData("suggestedUsers",this.data.cxPropSuggestion.users)}.bind(this),300))},bactToLookup:function(){if(this.getMethods("onViewChange")&&this.executeMethod("onViewChange","ordinary"),this.data.cxPropReqForSelected){this.sideChange=!0,this.emptyFirstReq=!1,this.newelyUnSelectedTempList=this.newelyUnSelected.slice();var e=this.newelySelectedTempList.length;e&&Lyte.arrayUtils(this.getData("addedItems"),"removeAt",0,e),this.selectedHideList=this.newelySelected,this.unSelectedHideList=this.newelyUnSelected,this.currentlyHiddenList=[],this.getData("isSearch")&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1)),this.setData("cxPropPerPage",this.tempcxPropPerPage),this.setData("pageNo",this.temppageNo),this.setData("selectedList",!1),this.setData("cxPropSelectedList",!1),this.usersAvailable=this.tempUserAvilable,!0===this.tempAllselectedCheckbox&&(this.selectingFlag=!1),this.setData("noMoreRecords",this.tempnoMoreRecords),this.setData("localData",this.tempLocalData),this.setData("currentPos",this.tempCurrentPos),this.splitAddedItems=0,this.setData("addedItems",[]),this.makeRequest&&(this.makeRequest=!1,this.selectedUser=!1,this.filterObserver.call(this,"removeAll"),this.cachedDataOfPreviousScreen=[],this.setData("DselectedList",!1),null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.continueBackToLookup())}else{var t=this.getData("cxPropNetworkData");if(this.selectedModalSelectedIds=0,0==this.getData("cxPropForcedFetch")&&(t.cxPropCacheQuery=this.tempCacheQuery,t.cxPropDataCache=this.tempDataCache,this.setData("cxPropNetworkData",t)),this.setData("cxPropPerPage",this.tempcxPropPerPage),this.setData("pageNo",this.temppageNo),this.setData("selectedList",!1),this.setData("cxPropSelectedList",!1),this.setData("DselectedList",!1),this.bodydrop=this.$node.querySelector("lyte-modal").component.childComp,this.bodybody=this.bodydrop.querySelector("div.lyteTableScroll"),this.userdrop=this.bodydrop.querySelector("lyte-dropdown"),this.bodybox=this.bodydrop.querySelector("lyte-drop-box"),this.userdrop&&(this.userbody=this.userdrop.querySelector("lyte-drop-body"),this.userbox=this.userdrop.querySelector("lyte-drop-box")),this.usersAvailable=this.tempUserAvilable,this.setData("QueryParam",null),1==this.tempAllselectedCheckbox&&(this.selectingFlag=!1),0==this.getData("totalAddedObjects").length?(this.selectingFlag=!0,this.setData("allCheckboxState",!1)):this.setData("allCheckboxState",this.tempAllselectedCheckbox),this.setData("noMoreRecords",this.tempnoMoreRecords),this.setData("localData",this.tempLocalData),this.setData("currentPos",this.tempCurrentPos),this.splitAddedItems=0,this.backButton=!0,this.setData("cxPropFilter",this.savedFilter),this.getData("cxPropFilterable")&&!this.getData("cxPropHeaderYield")&&this.bodydrop.querySelector("lyte-dropdown").ltProp("selected",this.savedFilter),this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0,this.setData("totalAddedObjects",this.getData("cxPropSelectedIds").slice()),this.makeRequest)this.makeRequest=!1,this.selectedUser=!1,null!=this.bodydrop.querySelector(".lyteTableScroll")&&(this.bodydrop.querySelector(".lyteTableScroll").scrollTop=0),this.filterObserver.call(this,"removeAll");else{this.selectedUser=!1;var a,o=this.getData("cxPropPrimaryKey"),i=this.bodydrop.querySelector("lyte-table-structure").querySelectorAll("input[name=checkbox]"),r=this.getData("systemData");a=this.getData("cxPropReqForSelected")?this.getData("cxPropFilterable")?this.newelySelectedObject[this.getData("cxPropFilter")]:this.newelySelected:this.getData("cxPropSelectedIds");for(var s=0;s<r.length;s++){var l=!1;if(this.getData("cxPropReqForSelected")){selectedDummyLength=a.length;for(var n=0;n<selectedDummyLength;n++)if(a[n][o]==r[s][o]){l=!0;break}}else a.includes(r[s][o])&&(l=!0);l?Lyte.Component.set(r[s],"lookup_selected_val",!0):(r[s].lookup_selected_val&&Lyte.Component.set(i[s],"lookup_selected_val",!1),!r[s].lookup_selected_val&&this.getData("allCheckboxState")&&(this.setData("preventAllCheckboxUnchecked",!1),this.preventAllSelection=!0,this.setData("allCheckboxState",!1),this.preventAllSelection=!1),Lyte.Component.set(r[s],"lookup_selected_val",!1))}setTimeout(function(){this.bodydrop.querySelector("input[name=allSelectCheckbox]").parentElement.parentElement.ltProp("checked")||(this.selectingFlag=!0)}.bind(this),0)}}},SelectedUserModal:function(){if(this.getMethods("onViewChange")&&this.executeMethod("onViewChange","selected"),this.getData("cxPropReqForSelected")){this.sideChange=!0,this.setData("addedItems",[]),this.makeRequest=!0,this.newelySelectedTempList=this.newelySelected.slice();var e=this.newelyUnSelectedTempList.length;e&&Lyte.arrayUtils(this.getData("systemData"),"removeAt",0,e),this.selectedHideList=this.newelySelected,this.unSelectedHideList=this.newelyUnSelected,this.currentlyHiddenList=[]}else{this.mirrorTotalAddedObjects=this.getData("totalAddedObjects").slice();var t=this.getData("cxPropNetworkData");this.selectedTotalAddedObjects=this.getData("totalAddedObjects").slice(),this.selectedModalSelectedIds=this.getData("addedItems").length,0==this.getData("cxPropForcedFetch")&&(this.tempCacheQuery=this.getData("cxPropNetworkData").cxPropCacheQuery,this.tempDataCache=this.getData("cxPropNetworkData").cxPropDataCache),t.cxPropCacheQuery=!1,t.cxPropDataCache=!1,this.setData("cxPropNetworkData",t)}this.getData("isSearch")&&(this.setData("cxPropInputValue",""),this.setData("isSearch",!1),this.makeRequest=!0),this.tempcxPropPerPage=this.getData("cxPropPerPage"),this.getData("cxPropReqForSelected")||this.setData("cxPropPerPage",0),this.temppageNo=this.getData("pageNo"),this.getData("cxPropReqForSelected")?this.setData("pageNo",1):this.setData("pageNo",0),this.tempAllselectedCheckbox=this.getData("allCheckboxState"),this.tempLocalData=this.getData("localData"),this.tempCurrentPos=this.getData("currentPos"),this.tempnoMoreRecords=this.getData("noMoreRecords"),this.setData("noMoreRecords",!0),this.tempUserAvilable=this.usersAvailable,this.selectedUser=!0,this.savedFilter=this.getData("cxPropFilter"),this.setData("selectedList",!0),this.setData("cxPropSelectedList",!0),this.setData("cxPropFilter","SelectedUsers"),this.getData("cxPropReqForSelected")&&this.checkIfNoResultStatus()},assignSelectedUsers:function(){if("single"==this.data.cxPropType){if(this.$node.cxProp("show",!1),this.getMethods("onAssign"))return this.executeMethod("onAssign",this.getData("displaySingleUser"))}else if(this.getData("cxPropReqForSelected"))this.setAssign.call(this);else{for(var e,t,a=[],o=[],i=[],r=0,s=0,l=[],n=(e=this.getData("selectedList")?this.selectedTotalAddedObjects:this.getData("totalAddedObjects")).length-1;n>=0;n--)"object"!=typeof e[n]?a.push(e[n]):(i.push(e[n]),this.responseData=i);for(var c=0;c<a.length;c++){var p=store.peekRecord(this.getData("cxPropNetworkData").cxPropModuleName,a[c]);p?i.push(p):l.push(a[c])}if(0==l.length&&0!=i.length)this.responseData=i,this.setAssign.call(this);else if(0==l.length&&0==i.length)this.responseData=[],this.setAssign.call(this);else for(t=l.length<this.getData("cxPropSelectedPerPage")?1:Math.ceil(l.length/this.getData("cxPropSelectedPerPage")),r=0;r<t;r++)s=this.fetchUsers.call(this,t,l,i,s,o)}},tableScroll:function(e){this.getData("cxPropShow")&&(clearTimeout(this._timeout1),this._timeout1=setTimeout(function(){(!this.data.cxPropReqForSelected||this.data.cxPropReqForSelected&&!this.emptyFirstReq)&&this.bodyScroll.call(this,"userLookup",e)}.bind(this),100))},mouse:function(e){e._fakeEvent&&setTimeout((function(){e.preventDefault(),e.stopPropagation()}),0)},closeUserLookup:function(){if("single"==this.data.cxPropType){for(var e=0;e<this.data.systemData.length;e++)this.data.value==this.data.systemData[e].id&&Lyte.objectUtils(this.getData("systemData")[e],"add","lookup_selected_val",!0);this.$node.cxProp("show",!1)}else this.localClose=!0,this.$node.cxProp("show",!1)},checkForToolTip:function(e,t){var a=e.offsetWidth;e.scrollWidth>a||a===parseInt(getComputedStyle(e).maxWidth)?e.setAttribute("lt-prop-title",t):null!=e.getAttribute("lt-prop-title")&&e.removeAttribute("lt-prop-title")}},methods:{onInputFocus:function(){this.inputFocus=!0},onInputBlur:function(){this.inputFocus=!1},showFilterDropdown:function(e,t){this.setData("cxPropPreventKeyDown",!0),t.childComp.classList.add("userLookupFilterDropDown")},hideFilterDropdown:function(){this.setData("cxPropPreventKeyDown",!1)},bodyShow:function(){if(document.addEventListener("keydown",this._keydown),this.$node.querySelector("lyte-modal").classList.add("currentOpenedModal"),this.bodydrop.querySelector("lyte-modal-content").style.height="",null!=this.bodydrop.querySelector("lyte-input input")&&setTimeout(function(){this.bodydrop.querySelector("lyte-input").focus()}.bind(this),500),this.lookupOpen.call(this),this.getMethods("onBodyShow")&&this.executeMethod("onBodyShow"),this.data.cxPropShowSuggestion&&"single"==this.getData("cxPropType")&&this.data.cxPropSuggestion.users.length){this.setData("suggestedUsers",this.data.cxPropSuggestion.users);var e=this.data.cxPropSelectedId;if(e){var t=this.data.suggestedUsers.find((function(t){return t.id===e}));if(t)this.onOpenSuggestionCheck=!0,Lyte.objectUtils(t,"add","lookup_selected_val",!0),this.onOpenSuggestionCheck=!1;else{var a=this.data.suggestedUsers.find((function(e){return e.lookup_selected_val}));a&&Lyte.objectUtils(a,"add","lookup_selected_val",!1)}if(!this.data.systemData.find((function(t){return t.id===e}))){var o=this.data.systemData.find((function(e){return e.lookup_selected_val}));o&&Lyte.objectUtils(o,"add","lookup_selected_val",!1)}}}},bodyBeforeClose:function(){var e;if(this.getMethods("onBeforeLookupClose")&&(e=this.executeMethod("onBeforeLookupClose",this.assignClose)),0==e)return this.getData("cxPropShow")||(this.preventShowCalling=!0,this.setData("cxPropShow",!0)),this.localClose=!1,this.assignClose=!1,this.onModalClose=!1,!1;this.bodydrop.querySelector("#cruxUserLookupTable").scrollTable(0,0),this.assignClose?(this.data.cxPropReqForSelected&&(this.originalSelectedCount=this.data.cxPropSelectedCount),this.assignClose=!1):(this.data.cxPropReqForSelected&&this.setData("cxPropSelectedCount",this.originalSelectedCount),this.setData("cxPropSelectedIds",this.defaultSelectedIds)),this.onModalClose=!0,this.setSelectedFilterValue.call(this),this.localClose||(this.preventWrongClose=!0),this.getData("cxPropShow")&&this.$node.cxProp("show",!1)},bodyClose:function(){this.$node.querySelector("lyte-modal").classList.remove("currentOpenedModal"),document.removeEventListener("keydown",this._keydown),this.userLookupClose(),this.getMethods("onLookupClose")&&this.executeMethod("onLookupClose")},bodyBeforeShow:function(){if(this.bodydrop=this.modalEle.component.childComp,this.bodydrop=this.$node.querySelector("lyte-modal").component.childComp,this.bodybody=this.bodydrop.querySelector("div.lyteTableScroll"),this.userdrop=this.bodydrop.querySelector("lyte-dropdown"),this.bodybox=this.bodydrop.querySelector("lyte-drop-box"),this.userdrop&&(this.userbody=this.userdrop.querySelector("lyte-drop-body"),this.userbox=this.userdrop.querySelector("lyte-drop-box")),this.getMethods("onBodyBeforeShow"))return this.executeMethod("onBodyBeforeShow")},radiobuttonChecked:function(e,t,a){if("single"==this.data.cxPropType&&(this.setData("displaySingleUser",e),this.setData("showSelectedFooter",!0)),this.setData("buttonAccessibility",!1),this.onOpenSuggestionCheck)this.onOpenSuggestionCheck=!1;else{var o=t._callee.classList.contains("suggestionRadioButton");this.localClose=!0;var i=[],r=t.value;i.push(o?this.getData("suggestedUsers")[r]:this.getData("systemData")[r]),this.setData("totalAddedObjects",i),this.setAlternateRadioVal(o,i[0]),this.assignClose=!0,this.getMethods("onRadiobuttonClicked")&&this.executeMethod("onRadiobuttonClicked",this.getData("systemData")[t.value])}},radiobuttonOnBeforeChecked:function(e,t){var a=!0,o=e._callee.classList.contains("suggestionRadioButton");if(!this.preventCallBacks&&this.getMethods("beforeRadiobuttonClicked"))a=this.executeMethod("beforeRadiobuttonClicked",o?this.getData("suggestedUsers")[e.value]:this.getData("systemData")[e.value]);if(!a&&null!=a&&null!=a)return!1;if(this.getMethods("onBeforeAssign")){var i=o?this.getData("suggestedUsers")[e.value]:this.getData("systemData")[e.value];return this.executeMethod("onBeforeAssign",i)}},allCheckboxOnBeforeChecked:function(){if(!this.preventAction){var e=!0;if(this.getMethods("beforeAllCheckboxChecked"))e=this.executeMethod("beforeAllCheckboxChecked");if(!e&&null!=e&&null!=e)return!1;if(this.getData("cxPropSelectedIds").length>=this.getData("cxPropMaxLimit"))return this.setData("cxPropMaxLimitMsg",this.getModalMaxLimitMsgValue()),this.cxPropMaxLimitMessageBox(),!1}},allCheckboxChecked:function(e,t){if(!this.preventAction){if(1==this.selectingFlag){var a=(this.getData("selectedList")?this.getData("addedItems"):this.getData("systemData")).length;this.setData("preventAllCallBacks",!0);for(var o=0;o<a;o++){if(!(this.getData("cxPropSelectedIds").length<this.getData("cxPropMaxLimit"))){this.getData("selectedList")||(this.setData("cxPropMaxLimitMsg",this.getModalMaxLimitMsgValue()),this.cxPropMaxLimitMessageBox());break}var i=!0;this.getMethods("beforeCheckboxChecked")&&(i=this.getData("selectedList")?this.executeMethod("beforeCheckboxChecked",this.getData("addedItems")[o]):this.executeMethod("beforeCheckboxChecked",this.getData("systemData")[o])),(i||null==i||null==i)&&(this.preventCallBacks=!0,this.preventCheckAllSelection=!0,this.getData("selectedList")?Lyte.Component.set(this.getData("addedItems")[o],"lookup_selected_val",!0):Lyte.Component.set(this.getData("systemData")[o],"lookup_selected_val",!0))}this.preventCheckAllSelection=!1;var r=this;setTimeout((function(){r.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1)}else this.selectingFlag=!0;this.getData("selectedList")&&(this.selectedTotalAddedObjects=this.getData("totalAddedObjects").slice()),this.getMethods("onAllCheckboxChecked")&&this.executeMethod("onAllCheckboxChecked")}},allCheckboxbeforeUnchecked:function(e,t,a){if(this.getData("preventAllCheckboxUnchecked")){var o=!0;if(this.getMethods("beforeAllCheckboxUnChecked"))o=this.executeMethod("beforeAllCheckboxUnChecked");if(0==o)return!1;"SelectedUsers"==this.getData("cxPropFilter")&&(this.onInDirectChange=!a||0==Object.keys(a).length)}else this.setData("preventAllCheckboxUnchecked",!0)},allCheckboxUnchecked:function(e,t){if(!this.preventAllSelection){if(!this.preventAction){if(this.getData("selectedList"))this.selectedTotalAddedObjects=[],this.setData("cxPropSelectedIds",[]);else{for(var a=this.getData("systemData"),o=a.length,i=this.getData("cxPropSelectedIds"),r=i.length,s=0;s<o;s++)for(var l=0;l<r;l++)a[s][this.getData("cxPropPrimaryKey")]==i[l]&&(Lyte.arrayUtils(i,"removeAt",l,1),r=i.length);for(var n=this.getData("totalAddedObjects"),c=n.length,p=0;p<o;p++)for(var d=0;d<c;d++)a[p][this.getData("cxPropPrimaryKey")]==n[d][this.getData("cxPropPrimaryKey")]&&(Lyte.arrayUtils(n,"removeAt",d,1),c=n.length)}this.setData("cxPropSelectedIdsLength",this.getData("cxPropSelectedIds").length);var u=(this.getData("selectedList")?this.getData("addedItems"):this.getData("systemData")).length;this.setData("preventAllCallBacks",!0);for(var h=0;h<u;h++){var m=!0;if(this.getMethods("beforeCheckboxUnChecked"))m=this.getData("selectedList")?this.executeMethod("beforeCheckboxUnChecked",this.getData("addedItems")[h]):this.executeMethod("beforeCheckboxUnChecked",this.getData("systemData")[h]);(m||null==m||null==m)&&(this.preventCallBacks=!0,this.preventCheckAllSelection=!0,this.getData("selectedList")?Lyte.Component.set(this.getData("addedItems")[h],"lookup_selected_val",!1):Lyte.Component.set(this.getData("systemData")[h],"lookup_selected_val",!1))}this.preventCheckAllSelection=!1;var y=this;setTimeout((function(){y.checkAllSelection()}),0),this.preventCallBacks=!1,this.setData("preventAllCallBacks",!1),this.onInDirectChange||(this.selectedModalSelectedIds=0)}this.getMethods("onAllCheckboxUnChecked")&&this.executeMethod("onAllCheckboxUnChecked")}},checkboxChecked:function(e,t){if(1!=this.getData("preventCall")){var a,o=this.getData("cxPropPrimaryKey");if(this.getData("cxPropReqForSelected")?(this.setData("cxPropSelectedCount",this.getData("cxPropSelectedCount")+1),this.updateSelectedCountMsg(),this.handleSelection("checked",e.value)):("SelectedUsers"!=this.getData("cxPropFilter")?a=this.getData("systemData")[e.value]:(a=this.getData("addedItems")[e.value],this.selectedModalSelectedIds+=1),Lyte.arrayUtils(this.getData("cxPropSelectedIds"),"push",a[o]),this.setData("cxPropSelectedIdsLength",this.getData("cxPropSelectedIds").length),Lyte.arrayUtils(this.getData("totalAddedObjects"),"unshift",a),this.setData("cxPropSelectedCount",this.data.totalAddedObjects.length),this.updateSelectedCountMsg(),this.getData("selectedList")&&this.selectedTotalAddedObjects.unshift(a)),this.getMethods("onCheckboxChecked")&&this.executeMethod("onCheckboxChecked",a),this.data.cxPropShowAllselectCheckbox&&!this.preventCheckAllSelection){var i=this;setTimeout((function(){i.checkAllSelection()}),0)}}},checkboxUnchecked:function(e,t){if(1!=this.getData("preventCall")){var a,o=this.getData("cxPropPrimaryKey");if(this.getData("cxPropReqForSelected"))this.setData("cxPropSelectedCount",this.getData("cxPropSelectedCount")-1),this.updateSelectedCountMsg(),this.handleSelection("unChecked",e.value);else{"SelectedUsers"==this.getData("cxPropFilter")?(a=this.getData("addedItems")[e.value],this.selectedModalSelectedIds>0&&(this.selectedModalSelectedIds-=1)):a=this.getData("systemData")[e.value];for(var i=this.getData("cxPropSelectedIds"),r=i.length,s=0;s<r;s++)if(a[o]==i[s]){Lyte.arrayUtils(this.getData("cxPropSelectedIds"),"removeAt",s,1);break}this.setData("cxPropSelectedIdsLength",this.getData("cxPropSelectedIds").length);var l=a[o],n=(c=this.getData("totalAddedObjects")).length;for(s=0;s<n;s++)if(null!=c[s][o]){if(c[s][o]==l)break}else if(c[s]==l)break;if(Lyte.arrayUtils(c,"removeAt",s),this.setData("totalAddedObjects",c),this.setData("cxPropSelectedCount",c.length),this.updateSelectedCountMsg(),this.getData("selectedList")){var c;for(l=a[o],n=(c=this.selectedTotalAddedObjects).length,s=0;s<n;s++)if(null!=c[s][o]){if(c[s][o]==l)break}else if(c[s]==l)break;Lyte.arrayUtils(c,"removeAt",s),this.selectedTotalAddedObjects=c}}if(this.getMethods("onCheckboxUnChecked")&&this.executeMethod("onCheckboxUnChecked",a),!this.preventCheckAllSelection){var p=this;setTimeout((function(){p.checkAllSelection()}),0)}}},checkboxOnChanged:function(e,t){1!=this.getData("preventCall")&&(this.getData("cxPropFooterYield")||this.filterChange||this.setData("buttonAccessibility",!1),this.getMethods("onCheckboxChanged")&&this.executeMethod("onCheckboxChanged",this.getData("systemData")[e.value]))},checkboxOnBeforeChecked:function(e,t){if(1!=this.getData("preventCall")){this.getData("cxPropMaxLimit");var a,o=!0;if(!this.preventCallBacks)if(a="SelectedUsers"!=this.getData("cxPropFilter")?this.getData("systemData")[e.value]:this.getData("addedItems")[e.value],this.getMethods("beforeCheckboxChecked"))o=this.executeMethod("beforeCheckboxChecked",a);if(!o&&null!=o&&null!=o)return!1;if(this.getData("cxPropReqForSelected")){if(this.newelySelected.length===this.data.cxPropMaxLimit&&!this.data.cxPropSelectedList)return this.setData("cxPropMaxLimitMsg",this.getModalMaxLimitMsgValue()),this.cxPropMaxLimitMessageBox(),!1}else if(this.getData("totalAddedObjects").length==this.getData("cxPropMaxLimit"))return this.setData("cxPropMaxLimitMsg",this.getModalMaxLimitMsgValue()),this.cxPropMaxLimitMessageBox(),!1}},checkboxOnBeforeUnChecked:function(e,t){if(1!=this.getData("preventCall")){var a,o=!0;if(!this.preventCallBacks)if(a="SelectedUsers"!=this.getData("cxPropFilter")?this.getData("systemData")[e.value]:this.getData("addedItems")[e.value],this.getMethods("beforeCheckboxUnChecked"))o=this.executeMethod("beforeCheckboxUnChecked",a);if(0==o)return!1;if(this.data.cxPropReqForSelected&&this.newelyUnSelected.length===this.data.cxPropMaxLimit&&this.data.cxPropSelectedList)return this.setData("cxPropMaxLimitMsg",this.getModalMaxLimitMsgValue()),this.cxPropMaxLimitMessageBox(),!1}},allCheckboxOnChanged:function(e,t){this.getMethods("onAllCheckboxChanged")&&this.executeMethod("onAllCheckboxChanged",this.getData("systemData")[e.value])},radiobuttonOnChanged:function(e,t){if(this.suggestionCheck)this.suggestionCheck=!1;else{var a=e._callee.classList.contains("suggestionRadioButton");if(this.data.cxPropShowSuggestion&&"single"===this.data.cxPropType&&a){this.data.suggestedUsers[e.value];this.setData("preventFocus",!1)}this.getMethods("onRadiobuttonChanged")&&this.executeMethod("onRadiobuttonChanged",a?this.getData("suggestedUsers")[e.value]:this.getData("systemData")[e.value])}},userSelected:function(e,t,a){this.getMethods("onFilterOptionSelected")&&this.executeMethod("onFilterOptionSelected",e,t,a),this.setData("cxPropFilter",t)}},setAlternateRadioVal:function(e,t){var a,o,i=this.data.suggestedUsers,r=this.data.systemData;e?(a=r.find((function(e){return t.id===e.id})))||(o=r.find((function(e){return e.lookup_selected_val}))):(a=i.find((function(e){return t.id===e.id})))||(o=i.find((function(e){return e.lookup_selected_val}))),a?(this.setData("preventFocus",!0),Lyte.Component.set(a,"lookup_selected_val",!0),this.setData("preventFocus",!1)):o&&Lyte.Component.set(o,"lookup_selected_val",!1)}},{mixins:["crux-user-utils","crux-aria-table-mixin","crux-lookup-mixin","crux-aria-lookup-mixin"],alias:"crm-user-lookup"}),Lyte.Mixin.register("crux-filter-utils",{_cruxReplace:Lyte.Component.registeredHelpers.cruxReplace,specialfield:function(e,t,a,o,i,r,s){var l,n,c,p,d={UMT:{field:{api_name:"User_Modified_Time",id:""},comparator:null,value:null},SMT:{field:{api_name:"System_Modified_Time",id:""},comparator:null,value:null},URAT:{field:{api_name:"User_Related_Activity_Time",id:""},comparator:null,value:null},SRAT:{field:{api_name:"System_Related_Activity_Time",id:""},comparator:null,value:null},LAT:{field:{api_name:"Last_Activity_Time",id:""},comparator:null,value:null}};if("cxFilter_TouchedRecords"==e.api_name)"-1"!=t.indexOf("User")&&(d.UMT.comparator=d.URAT.comparator=o,d.UMT.value=d.URAT.value=a,n=this.construct_group(d.UMT,d.URAT,"OR"),l=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")?(d.SMT.comparator=d.SRAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.SMT.value=d.SRAT.value=a,n=JSON.parse(JSON.stringify(d.SMT)),c=JSON.parse(JSON.stringify(d.SRAT)),"greater_than"==d.SMT.comparator&&(d.SMT.comparator=d.SRAT.comparator="equal",d.SMT.value=d.SRAT.value="${EMPTY}",n=this.construct_group(n,d.SMT,"OR"),c=this.construct_group(c,d.SRAT,"OR")),p=this.construct_group(n,c,"AND"),l=this.construct_group(l,p,"AND")):(d.UMT.comparator="not_equal",d.UMT.value="${EMPTY}",d.URAT.comparator="not_equal",d.URAT.value="${EMPTY}",p=this.construct_group(d.UMT,d.URAT,"OR"),l=this.construct_group(l,p,"AND"))),"-1"!=t.indexOf("System")&&(d.SMT.comparator=d.SRAT.comparator=o,d.SMT.value=d.SRAT.value=a,c=this.construct_group(d.SMT,d.SRAT,"OR"),l=JSON.parse(JSON.stringify(c)),"-1"!=t.indexOf("Only")?(d.UMT.comparator=d.URAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.UMT.value=d.URAT.value=a,n=JSON.parse(JSON.stringify(d.UMT)),c=JSON.parse(JSON.stringify(d.URAT)),"greater_than"==d.UMT.comparator&&(d.UMT.comparator=d.URAT.comparator="equal",d.UMT.value=d.URAT.value="${EMPTY}",n=this.construct_group(n,d.UMT,"OR"),c=this.construct_group(c,d.URAT,"OR")),p=this.construct_group(n,c,"AND"),l=this.construct_group(l,p,"AND")):(d.SMT.comparator="not_equal",d.SMT.value="${EMPTY}",d.SRAT.comparator="not_equal",d.SRAT.value="${EMPTY}",p=this.construct_group(d.SMT,d.SRAT,"OR"),l=this.construct_group(l,p,"AND"))),"-1"!=t.indexOf("And")&&(l=this.construct_group(n,c,"AND")),-1!=t.indexOf("Or")&&(l=this.construct_group(n,c,"OR"));else if("cxFilter_UnTouchedRecords"==e.api_name){if("-1"!=t.indexOf("User")){d.UMT.comparator=d.URAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.UMT.value=d.URAT.value=a;var u=JSON.parse(JSON.stringify(d));d.UMT.comparator=d.URAT.comparator="equal",d.UMT.value=d.URAT.value="${EMPTY}",p=this.construct_group(u.UMT,d.UMT,"OR"),n=this.construct_group(u.URAT,d.URAT,"OR"),l=n=this.construct_group(p,n,"AND"),"-1"!=t.indexOf("Only")&&(d.SMT.comparator=d.SRAT.comparator=o,d.SMT.value=d.SRAT.value=a,l=this.construct_group(d.SMT,d.SRAT,"OR"),l=this.construct_group(n,l,"AND"))}if("-1"!=t.indexOf("System")){d.SMT.comparator=d.SRAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.SMT.value=d.SRAT.value=a;u=JSON.parse(JSON.stringify(d));d.SMT.comparator=d.SRAT.comparator="equal",d.SMT.value=d.SRAT.value="${EMPTY}",p=this.construct_group(u.SMT,d.SMT,"OR"),c=this.construct_group(u.SRAT,d.SRAT,"OR"),l=c=this.construct_group(p,c,"AND"),"-1"!=t.indexOf("Only")&&(d.UMT.comparator=d.URAT.comparator=o,d.UMT.value=d.URAT.value=a,l=this.construct_group(d.UMT,d.URAT,"OR"),l=this.construct_group(c,l,"AND"))}"-1"!=t.indexOf("Or")&&(l=this.construct_group(n,c,"OR")),"-1"!=t.indexOf("And")&&(l=this.construct_group(n,c,"AND"))}else if("cxFilter_RecordAction"==e.api_name){i=i;if("-1"!=t.indexOf("User"))if("modified"==i.toLowerCase())d.UMT.comparator=o,d.UMT.value=a,n=JSON.parse(JSON.stringify(d.UMT)),l=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")&&(d.SMT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.SMT.value=a,p=JSON.parse(JSON.stringify(d.SMT)),"greater_than"==d.SMT.comparator&&(d.SMT.comparator="equal",d.SMT.value="${EMPTY}",p=this.construct_group(p,d.SMT,"OR")),l=this.construct_group(l,p,"AND"));else{d.UMT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.UMT.value=a;u=JSON.parse(JSON.stringify(d));d.UMT.comparator="equal",d.UMT.value="${EMPTY}",n=this.construct_group(u.UMT,d.UMT,"OR"),l=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")&&(d.SMT.comparator=o,d.SMT.value=a,l=this.construct_group(l,d.SMT,"AND"))}if("-1"!=t.indexOf("System"))if(i&&"modified"==i.toLowerCase())d.SMT.comparator=o,d.SMT.value=a,c=JSON.parse(JSON.stringify(d.SMT)),l=JSON.parse(JSON.stringify(c)),"-1"!=t.indexOf("Only")&&(d.UMT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.UMT.value=a,p=JSON.parse(JSON.stringify(d.UMT)),"greater_than"==d.UMT.comparator&&(d.UMT.comparator="equal",d.UMT.value="${EMPTY}",p=this.construct_group(p,d.UMT,"OR")),l=this.construct_group(l,p,"AND"));else{d.SMT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.SMT.value=a;u=JSON.parse(JSON.stringify(d));d.SMT.comparator="equal",d.SMT.value="${EMPTY}",l=c=this.construct_group(u.SMT,d.SMT,"OR"),"-1"!=t.indexOf("Only")&&(d.UMT.comparator=o,d.UMT.value=a,l=this.construct_group(c,d.UMT,"AND"))}"-1"!=t.indexOf("Or")&&(l=this.construct_group(n,c,"OR")),"-1"!=t.indexOf("And")&&(l=this.construct_group(n,c,"AND"))}else if("cxFilter_RelatedRecordsAction"==e.api_name){i=i;if("-1"!=t.indexOf("User"))if("done"==i.toLowerCase()||"modified"==i.toLowerCase())d.URAT.comparator=o,d.URAT.value=a,n=JSON.parse(JSON.stringify(d.URAT)),l=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")&&(d.SRAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.SRAT.value=a,n=JSON.parse(JSON.stringify(d.SRAT)),"greater_than"==d.SRAT.comparator&&(d.SRAT.comparator="equal",d.SRAT.value="${EMPTY}",n=this.construct_group(n,d.SRAT,"OR")),l=this.construct_group(l,n,"AND"));else{d.URAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.URAT.value=a;u=JSON.parse(JSON.stringify(d));d.URAT.comparator="equal",d.URAT.value="${EMPTY}",l=n=this.construct_group(u.URAT,d.URAT,"OR"),"-1"!=t.indexOf("Only")&&(d.SRAT.comparator=o,d.SRAT.value=a,l=this.construct_group(n,d.SRAT,"AND"))}if("-1"!=t.indexOf("System"))if("done"==i.toLowerCase()||"modified"==i.toLowerCase())d.SRAT.comparator=o,d.SRAT.value=a,c=JSON.parse(JSON.stringify(d.SRAT)),l=JSON.parse(JSON.stringify(c)),"-1"!=t.indexOf("Only")&&(d.URAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.URAT.value=a,c=JSON.parse(JSON.stringify(d.URAT)),"greater_than"==d.URAT.comparator&&(d.URAT.comparator="equal",d.URAT.value="${EMPTY}",c=this.construct_group(c,d.URAT,"OR")),l=this.construct_group(l,c,"AND"));else{d.SRAT.comparator="equal"==o?"not_equal":"less_than"==o||"less_equal"==o?"greater_than":"",d.SRAT.value=a;u=JSON.parse(JSON.stringify(d));d.SRAT.comparator="equal",d.SRAT.value="${EMPTY}",l=c=this.construct_group(u.SRAT,d.SRAT,"OR"),"-1"!=t.indexOf("Only")&&(d.URAT.comparator=o,d.URAT.value=a,l=this.construct_group(c,d.URAT,"AND"))}"-1"!=t.indexOf("Or")&&(l=this.construct_group(n,c,"OR")),"-1"!=t.indexOf("And")&&(l=this.construct_group(n,c,"AND"))}else if("cxFilter_Email_Status"==e.api_name){d={LAT:{field:{api_name:"LAST_ACTION_TIME",id:""},comparator:null,value:null},LST:{field:{api_name:"LAST_SENT_TIME",id:""},comparator:null,value:null},GEN_FORMAT:{field:{api_name:"LAST_ACTION",id:""},comparator:null,value:null}};var h,m=t,y=!0;if("sent"==m?(h=i,d.LST.comparator=o,d.LST.value=a,y="any_of_the_above"!=h,n=JSON.parse(JSON.stringify(d.LST)),m=h):"not_sent"==m?(d.LST.comparator="${EMPTY}"==a?o:this.negative_Comparator(o),d.LST.value=a,n=JSON.parse(JSON.stringify(d.LST)),"greater_than"!=d.LST.comparator&&"greater_equal"!=d.LST.comparator||(d.LST.comparator,d.LST.comparator="equal",d.LST.value="${EMPTY}",n=this.construct_group(n,d.LST,"OR"))):(d.LAT.value=a,("not_opened"==m||"not_received"==m)&!h?(d.LAT.comparator=this.negative_Comparator(o),n=JSON.parse(JSON.stringify(d.LAT)),"greater_than"!=d.LAT.comparator&&"greater_equal"!=d.LAT.comparator||(d.LAT.comparator,d.LAT.comparator="equal",d.LAT.value="${EMPTY}",n=this.construct_group(n,d.LAT,"OR"))):(d.LAT.comparator=o,n=JSON.parse(JSON.stringify(d.LAT)))),y){d.GEN_FORMAT.comparator="equal",d.GEN_FORMAT.value="${EMPTY}"==a?a:{replied:["Replied"],responded:["Responded"],clicked:["Clicked"],opened:["Opened","Clicked","Responded"],not_opened:["Opened","Clicked","Responded","Bounced"],bounced:["Bounced"],opened_and_not_replied:["Opened","Clicked"],not_sent:["Opened","Clicked","Sent","Replied","Bounced","Responded"],received:["Received","Responded"],not_received:["Received","Responded"]}[m];var x="AND";"not_opened"!=m&&"not_sent"!=m&&"not_received"!=m||(d.GEN_FORMAT.comparator="${EMPTY}"==a?"equal":"not_equal",x="not_opened"==m&&h?x:"OR",x="${EMPTY}"==d.GEN_FORMAT.value?"AND":x),l=this.construct_group(n,d.GEN_FORMAT,x),"not_opened"==m&&(d.LST.comparator="not_equal",d.LST.value="${EMPTY}",l=this.construct_group(l,d.LST,"AND"))}else l=this.construct_group(n,null)}else if("cxFilter_Activities"==e.api_name){d={TASKS:[{status:{field:{api_name:"Status",id:""},comparator:"not_equal",value:"${PICKLIST."+(e=>{if(!e)return"Completed";let t=e.pick_list_values.filter((e=>"Completed"==e.actual_value))[0];return t?t.display_value:"Completed"})(moduleRecordMapping.Tasks.fields?moduleRecordMapping.Tasks.fields.filter((e=>"STATUS"==e.column_name))[0]:void 0)+"}"}},{Due_Date:{field:{api_name:"Due_Date",id:""},comparator:"equal",value:"${YESTERDAYMINUS}"}}],CALLS:[{status:{field:{api_name:"Call_Status",id:""},comparator:"equal",value:"Overdue"}},{Call_Start_Date_Time:{field:{api_name:"Call_Start_Time",id:""},comparator:"less_than",value:"${CURRENTTIME}"}}],EVENTS:{field:{api_name:"End_DateTime",id:""},comparator:null,value:"${TODAY}"}};var f={field:{api_name:"Activity_Type"},comparator:"equal",value:""};if((D={}).include_objects=!0,"Tasks"!=t&&"Activities"!=t||(n=this.construct_group(d.TASKS[0].status,d.TASKS[1].Due_Date,"AND"),f.value="Tasks",l=n=this.construct_group(n,f,"AND")),"Calls"!=t&&"Activities"!=t||(c=this.construct_group(d.CALLS[0].status,d.CALLS[1].Call_Start_Date_Time,"AND"),f.value="Calls",l=c=this.construct_group(c,f,"AND")),"Activities"==t)l=this.construct_group(n,c,"OR");else if("Without_Open_Activity"==t){D.include_objects=!1,d.CALLS[0].status.comparator="equal",d.CALLS[0].status.value=["scheduled","overdue"],f.value="Calls";var g=this.construct_group(d.CALLS[0].status,f,"AND");f.value="Tasks";var P=this.construct_group(d.TASKS[0].status,f,"AND");n=this.construct_group(g,P,"OR"),d.EVENTS.comparator="greater_equal",d.EVENTS.value="${CURRENTTIME}",f.value="Events";var v=this.construct_group(d.EVENTS,f,"AND");l=this.construct_group(n,v,"OR")}else if("Activity_Due"==t){d.TASKS[1].Due_Date.comparator=o,d.TASKS[1].Due_Date.value=a,n=this.construct_group(d.TASKS[0].status,d.TASKS[1].Due_Date,"AND"),f.value="Tasks",n=this.construct_group(n,f,"AND"),d.CALLS[0].status.comparator="equal",d.CALLS[0].status.value=["Scheduled","Overdue"],d.CALLS[1].Call_Start_Date_Time.comparator=o,d.CALLS[1].Call_Start_Date_Time.value=a,c=this.construct_group(d.CALLS[0].status,d.CALLS[1].Call_Start_Date_Time,"AND"),f.value="Calls",c=this.construct_group(c,f,"AND"),p=this.construct_group(n,c,"OR"),"${TODAYANDOVERDUE}"==a&&(o="equal",a="${TODAY}"),d.EVENTS.comparator=o,d.EVENTS.value=a,f.value="Events";v=this.construct_group(d.EVENTS,f,"AND");l=this.construct_group(p,v,"OR")}else if("Without_Any_Activity"==t)D.include_objects=!1,l={field:{api_name:"Modified_Time",id:""},comparator:o,value:a};else if("Activity_Done"==t){p={field:{api_name:"Closed_Time",id:""},comparator:o,value:a},f.value="Tasks",p=this.construct_group(p,f,"AND"),d.CALLS[0].status.comparator="not_equal",d.CALLS[0].status.value=["Scheduled","Overdue"],d.CALLS[1].Call_Start_Date_Time.comparator=o,d.CALLS[1].Call_Start_Date_Time.value=a,n=this.construct_group(d.CALLS[0].status,d.CALLS[1].Call_Start_Date_Time,"AND"),f.value="Calls",n=this.construct_group(n,f,"AND"),p=this.construct_group(p,n,"OR"),d.EVENTS.comparator=o,d.EVENTS.value=a,f.value="Events";v=this.construct_group(d.EVENTS,f,"AND");l=this.construct_group(p,v,"OR")}D.relation={},D.relation.relation_id=this.moduleRecordMapping.Activities.id,D.relation.api_name=this.moduleRecordMapping.Activities.api_name,D.criteria=l,l=D}else if("cxFilter_Notes"==e.api_name)(D={}).include_objects=!0,"Without_Any_Notes"==t&&(D.include_objects=!1),D.relation={},D.relation.relation_id=this.moduleRecordMapping.Notes.id,D.relation.api_name=this.moduleRecordMapping.Notes.api_name,D.criteria={field:{api_name:"Created_Time",id:""},comparator:o,value:a},l=D;else if("cxFilter_Deals"==e.api_name)d=[{field:{api_name:"Stage",id:""},comparator:"equal",value:"${OPEN}"},{field:{api_name:"Created_Time",id:""},comparator:"",value:""}],(D={}).include_objects=!0,"Without_Open_Deal"==t&&(D.include_objects=!1),"With_Open_Deal"==t||"Without_Open_Deal"==t?(d[1].comparator=o,d[1].value=a,l=this.construct_group(d[0],d[1],"AND")):(D.include_objects=!1,d[1].field.api_name="Deal_Name",d[1].comparator="not_equal",d[1].value="${EMPTY}",l=d[1]),D.relation={},D.relation.relation_id=this.moduleRecordMapping.Potentials.id,D.relation.api_name=this.moduleRecordMapping.Potentials.api_name,D.criteria=l,l=D;else if("cxFilter_Contacts"==e.api_name)(D={}).include_objects=!0,"Without_Any_Contact"==t&&(D.include_objects=!1),D.relation={},D.relation.relation_id=this.moduleRecordMapping.Contacts.id,D.relation.api_name=this.moduleRecordMapping.Contacts.api_name,D.criteria={field:{api_name:"Full_Name",id:""},comparator:"not_equal",value:"${EMPTY}"},l=D;else if("cxFilter_Chats"==e.api_name){(D={include_objects:!0,relation:{type:"related_list",relation:{api_name:"Actions_Performed"}}}).relation.relation_id=this.moduleRecordMapping.Visits.id,D.relation.api_name="Visits_Zoho_Livedesk",n={field:{api_name:"Action_Type",id:""},comparator:"equal",value:t="Attended"==(t="Missed"==t?"Missed Chat":t)?"Chat":t},c={field:{api_name:"Action_Performed_Time",id:""},comparator:o,value:a},l=this.construct_group(n,c,"AND"),D.criteria=l,l=D}else if("cxFilter_Not_Replied_Messages"==e.api_name||"cxFilter_Replied_Messages"==e.api_name){var b={field:{api_name:"message_time__s",id:""},comparator:o,value:a},S={field:{api_name:"conversation_status__s",id:""}};switch(e.api_name){case"cxFilter_Not_Replied_Messages":S.comparator="not_equal",S.value="Replied";break;case"cxFilter_Replied_Messages":S.comparator="equal",S.value="Replied"}l=this.construct_group(b,S,"AND")}else if("cxFilter_Email_Sentiment"==e.api_name){var D,L=this.data&&"Accounts"===this.data.cxPropModule?"Email_Sentiment.":"",C={field:{api_name:L+"Received_Date",id:""},comparator:o,value:a},A=i,w="greater_than";a=0;if(n={field:{}},c={field:{}},"For_The_Last_Email"==A)a="PositiveOrNegative"==t?["Positive","Negative"]:t,n.field.api_name=L+"Last_Email_Sentiment",n.comparator="equal",n.value=a,p=JSON.parse(JSON.stringify(n));else{if("count"==A||"percentage"==A){w=s||$("#DDV_"+A)[0].ltProp("Selected");if(r)a=r;else{var k=$("#"+A+"_crux_comp")[0];k.component.validate(),a=k.component.getValue()}}"Positive"!=t&&"PositiveAndNegative"!=t&&"PositiveOrNegative"!=t&&"PositiveOnly"!=t||(A=""==A?"count":A,n.field.api_name=L+"Positive",n.comparator=w,n.value="${"+A.toUpperCase()+"|"+a+"}",p=JSON.parse(JSON.stringify(n))),"Negative"!=t&&"PositiveAndNegative"!=t&&"PositiveOrNegative"!=t&&"NegativeOnly"!=t||(A=""==A?"count":A,c.field.api_name=L+"Negative",c.comparator=w,c.value="${"+A.toUpperCase()+"|"+a+"}",p=JSON.parse(JSON.stringify(c))),"PositiveAndNegative"==t?p=this.construct_group(n,c,"AND"):"PositiveOrNegative"==t?p=this.construct_group(n,c,"OR"):"PositiveOnly"==t?(c.field.api_name=L+"Negative",c.comparator="equal",c.value="${COUNT|0}",p=this.construct_group(p,c,"AND")):"NegativeOnly"==t?(c.field.api_name=L+"Positive",c.comparator="equal",c.value="${COUNT|0}",p=this.construct_group(p,c,"AND")):"Neutral"==t&&(A=""==A?"count":A,n.field.api_name=L+"Neutral",n.comparator=w,n.value="${"+A.toUpperCase()+"|"+a+"}",p=JSON.parse(JSON.stringify(n)))}l=l=this.construct_group(C,p,"AND"),(D={include_objects:!0,relation:{}}).relation.api_name=L?"Contacts":"Email_Sentiment",D.criteria=l,l=D}return l},getEmailBlockedCriteria:function(e){let t="Email"===e?$L("input[name=option_"+e+"]:checked").val().split("_")[2]:$L("input[name=option_"+e+"]:checked").val().split("_")[3],a="Email"===e?"EMAIL":"ADDN_EMAIL";if("both"===t)value="${BLOCKED}";else{let e=$L("#sub_option_cxFilter_"+a+"_"+t)[0].component.data.selectedValues,o=e.byDropDownValue,i=e.firstDropDownValue,r=e.secondDropDownValue;if(i.includes("Age in")||i.includes("Due in")){i=i.replace("Days",r);let e=$L("#id_cxFilter_"+a+"_"+t)[0].ltProp("value");if(!e)return this.showFilterAlert("Enter a valid number",$L("#id_cxFilter_"+a+"_"+t)[0].component),{isValdationFailure:!0};i=i.replaceAll(" ",""),i=i.toUpperCase(),i="less_than {"+i+"}+"+e}else if("less_than"===i||"greater_than"===i){let e=$L("#cxFilter_"+a+"_"+t+"_crux_comp")[0].component.getValue();if(!e)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+a+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};e=this.getISODateTime(e,this.datePattern),i=i.toUpperCase(),i=i+" "+e}else if("equal"===i){let e=$L("#cxFilter_"+a+"_"+t+"_crux_comp")[0].component.getValue();if(!e)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+a+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};let o=this.getISODateTime(e,this.datePattern),r=this.getISODateTime(e,this.datePattern,"end");i="between",i=i+" "+o+" "+r}else if("between"===i){let e=$L("#cxFilter_"+a+"_"+t+"_crux_comp")[0].component.getValue();if(!e)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+a+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};e=this.getISODateTime(e,this.datePattern);let o=$L("#between_cxFilter_"+a+"_"+t+"_crux_comp")[0].component.getValue();if(!o)return this.showFilterAlert("Enter a valid date",$L("#between_cxFilter_"+a+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};o=this.getISODateTime(o,this.datePattern,"end"),i=i+" "+e+" "+o}else i=comparator+" "+i;value="${BLOCKED_"+o.toUpperCase()+"} "+i}return value},setEmailBlockedCriteria:function(e,t){let a=t.split(" "),o=a[0],i="Email"==e?"EMAIL":"ADDN_EMAIL";if("${BLOCKED}"===o)$L("#sub_field_cxFilter_"+i+"_both")[0].ltProp("checked",!0);else{a[0]=a[0].replace("${BLOCKED_",""),a[0]=a[0].replace("}","");let e=a[0].split("_")[0].toLowerCase();$L("#sub_field_cxFilter_"+i+"_"+e)[0].ltProp("checked",!0);let t={};if(o=o.replace("${BLOCKED_","").replace("}","").toLowerCase(),t.byDropDownValue=o,a[2].endsWith("}"))t.firstDropDownValue=a[2],$L("#sub_option_cxFilter_"+i+"_"+e)[0].component.setData("selectedValues",t),$L("#sub_option_cxFilter_"+i+"_"+e)[0].component.methods.triggerGetDropDownVal(t.firstDropDownValue,$L("#sub_option_cxFilter_"+i+"_"+e)[0].component),$L("#DDV_cxFilter_"+i+"_"+e)[0].ltProp("selected",t.firstDropDownValue);else if(a[2].includes("+")){let o=a[2].split("+");o[0]=o[0].replace("{","").replace("}",""),t.secondDropDownValue=o[0].endsWith("DAYS")?"DAYS":o[0].endsWith("MONTHS")?"MONTHS":"WEEKS",o[0].replace(t.secondDropDownValue,"DAYS"),t.firstDropDownValue=o[0].includes("AGEINDAYS")||o[0].includes("AGEINMONTHS")||o[0].includes("AGEINWEEKS")?"Age in Days":"Due in Days",$L("#sub_option_cxFilter_"+i+"_"+e)[0].component.setData("selectedValues",t),$L("#sub_option_cxFilter_"+i+"_"+e)[0].component.methods.triggerGetDropDownVal(t.firstDropDownValue,$L("#sub_option_cxFilter_"+i+"_"+e)[0].component),$L("#DDV_cxFilter_"+i+"_"+e)[0].ltProp("selected",t.firstDropDownValue),$L("#id_cxFilter_"+i+"_"+e)[0].ltProp("value",o[1])}else t.firstDropDownValue=a[1].trim().toLowerCase(),a[2].substr(0,a[2].indexOf("T"))===a[3].substr(0,a[3].indexOf("T"))&&(t.firstDropDownValue="equal"),$L("#sub_option_cxFilter_"+i+"_"+e)[0].component.setData("selectedValues",t),$L("#sub_option_cxFilter_"+i+"_"+e)[0].component.methods.triggerGetDropDownVal(t.firstDropDownValue,$L("#sub_option_cxFilter_"+i+"_"+e)[0].component),$L("#DDV_cxFilter_"+i+"_"+e)[0].ltProp("selected",t.firstDropDownValue),$L("#cxFilter_"+i+"_"+e+"_crux_comp").attr("value",Utils.getDateInGivenPattern($L.moment(a[2]).toDate(),Crm.userDetails.DATE_PATTERN.toLowerCase())),"equal"!==t.firstDropDownValue&&$L("#between_cxFilter_"+i+"_"+e+"_crux_comp").attr("value",Utils.getDateInGivenPattern($L.moment(a[3]).toDate(),Crm.userDetails.DATE_PATTERN.toLowerCase()))}$L("crux-smart-filter")[0].component.setData("blockedCriteria."+e,"");let r="Email"===e,s=$L("#listViewModuleChange"),l=s.length&&s[0].ltProp?s[0].ltProp("selected"):"list";Crm.userDetails.EMAIL_BOUNCE_MANAGEMENT&&("list"!==l&&"table"!==l&&"card"!==l&&"kanban"!==l||!r?"list"!==l&&"table"!==l&&"card"!==l&&"kanban"!==l||r?"canvas"===l&&r?($L(".emailUnblocking.Email").removeClass("hide"),$L(".emailUnblocking.EMAIL").removeClass("hide")):"canvas"!==l||r||($L(".emailUnblocking.Secondary_Email").removeClass("hide"),$L(".emailUnblocking.ADDN_EMAIL").removeClass("hide")):$L(".emailUnblocking.Secondary_Email").removeClass("hide"):$L(".emailUnblocking.Email").removeClass("hide"))},construct_group:function(e,t,a){var o=[];return null==e||0==e.length?t:null==t||0==t.length?e:(Lyte.arrayUtils(o,"push",JSON.parse(JSON.stringify(e))),Lyte.arrayUtils(o,"push",JSON.parse(JSON.stringify(t))),{group_operator:a,group:o})},sortArray:function(e,t){return e.sort((function(e,a){if(!e[t])return 0;var o=e[t].toUpperCase(),i=a[t].toUpperCase();return o<i?-1:o>i?1:0})),e},getISODateTime:function(e,t,a="start",o="datetime"){return e?(t=t||"",e=this.convertUsrtoDefaultDatePattern(e,t),"start"!=a&&e.setHours(23,59,59,999),e.setTime(e.getTime()-6e4*e.getTimezoneOffset()),e=e.toISOString().split(/\./)[0],"date"==o?e=/^(.*)T/.exec(e,t)[1]:e+(this.getData("cxPropTimeZone")?this.getData("cxPropTimeZone"):"")):""},getMilliSecondsfromDuration:function(e,t){return e&&t?e*this.durationClass(t):""},getDurationfromMilliSeconds:function(e,t){return t?e/this.durationClass(t):this.getTimeValue(e)},durationClass:function(e){const t=36e5,a=24*t;switch(e){case"SECONDS":return 1e3;case"MINUTES":return 6e4;case"HOURS":return t;case"DAYS":return a;case"WEEKS":return 6048e5;case"MONTHS":return 2592e6;case"YEARS":return 31536e6;default:return 1}},getTimeValue:function(e){var t={value:0,durationType:""};const a=this.durationClass("SECONDS"),o=this.durationClass("MINUTES"),i=this.durationClass("HOURS"),r=this.durationClass("DAYS"),s=this.durationClass("WEEKS"),l=this.durationClass("MONTHS"),n=this.durationClass("YEARS");return e>=n&&e%n==0?(t.value=e/n,t.durationType="YEARS"):e>=l&&e%l==0?(t.value=e/l,t.durationType="MONTHS"):e>=s&&e%s==0?(t.value=e/s,t.durationType="WEEKS"):e>=r&&e%r==0?(t.value=e/r,t.durationType="DAYS"):e>=i&&e%i==0?(t.value=e/i,t.durationType="HOURS"):e>=o&&e%o==0?(t.value=e/o,t.durationType="MINUTES"):(t.value=e/a,t.durationType="SECONDS"),t},getMulSelLookUpField:function(e,t){for(var a=this.moduleRecordMapping[e].fields,o=a.length,i=0;i<o;i++)if(("multiselectlookup"==a[i].data_type||"multiuserlookup"==a[i].data_type)&&a[i][a[i].data_type].api_name==t.api_name)return a[i]},getRelationDetails:function(e,t){var a=this.moduleRecordMapping[e].related_lists;if(a)for(var o=a.length,i=0;i<o;i++)if(a[i].api_name==t)return a[i]},isVisitsField:function(e){var t={LASTVISITEDTIME:"Last_Visited_Time",AVERAGETIMESPENT:"Average_Time_Spent_Minutes",DAYSVISITED:"Days_Visited",FIRSTVISITEDURL:"First_Visited_URL",FIRSTVISITEDTIME:"First_Visited_Time",NUMBEROFCHATS:"Number_Of_Chats",REFERRER:"Referrer",VISITORSCORE:"Visitor_Score",ATTENDEDBY:"Attended_By",BROWSER:"Browser",OPERATINGSYSTEM:"Operating_System",PORTAL_NAME:"Portal_Name",SEARCHENGINE:"Search_Engine",TIMESPENT:"Time_Spent",VISITEDTIME:"Visited_Time"};return"AVERAGETIMESPENT"==e||"DAYSVISITED"==e||"FIRSTVISITEDURL"==e||"FIRSTVISITEDTIME"==e||"LASTVISITEDTIME"==e||"NUMBEROFCHATS"==e||"REFERRER"==e||"VISITORSCORE"==e?{isVisits:!0,fieldtype:"normalField",api_name:t[e]}:("ATTENDEDBY"==e||"BROWSER"==e||"OPERATINGSYSTEM"==e||"PORTAL_NAME"==e||"SEARCHENGINE"==e||"TIMESPENT"==e||"VISITEDTIME"==e)&&{isVisits:!0,fieldtype:"crossField",api_name:t[e]}},negative_Comparator:function(e){var t={equal:"not_equal",not_equal:"equal",less_than:"greater_than",less_equal:"greater_equal",greater_than:"less_than",greater_equal:"less_equal",between:"not_between",not_between:"between"};return t[e]?t[e]:e},checkLimitValues:function(e,t){return!(-1!=["text","textarea","phone","email","mobile","website"].type(t)&&e.constructor==Array&&e.length>50)||(this.showFilterAlert(_cruxUtils.getI18n("crm.alert.maximum.text.values.contains",50)),!1)},isZBCustomModule:function(e){return["CustomModule5001","CustomModule5002","CustomModule5003","CustomModule5004","CustomModule5005"].indexOf(e)>=0},removeValue:function(e,t,a){for(var o=0;e[o];o++)-1!=a.indexOf(e[o][t])&&(e.splice(o,1),o-=1)},updateCrossFilter:function(e,t,a){for(var o=0,i=e.length,r=!1;o<i;o++)if(e[o].relation&&"related_list"!==e[o].relation.type&&(e[o].relation.api_name===t||e[o].relation.relation&&e[o].relation.relation.api_name===t)&&(!a.relation||"related_list"!==a.relation.type)){r=!0,e[o].include_objects=0!=e[o].include_objects&&0!=a.include_objects;var s=this.construct_group(e[o].criteria,a.criteria,"AND");e[o].criteria=s;break}r||Lyte.arrayUtils(e,"push",a)},getIndex:function(e,t,a,o){var i=0,r=e?e.length:0;for(i=0;i<r;i++)if(e[i][a]==t)return o?i:e[i].index;return!1},getValueBasedonKeys:function(e,t){for(var a=0,o=e.length,i=[];a<o;a++)i.push({id:e[a].id,name:e[a][t]});return i},sendxhr:function(e,t,a,o){return new Promise((function(i,r){var s=new XMLHttpRequest;for(var l in s.open(t,e,!0),(a=a||{})["X-ZCSRF-TOKEN"]=csrfParamName+"="+csrfToken,window.clientPortalName&&(a["X-CRMPORTAL"]=window.clientPortalName),"undefined"!=typeof crmZgid&&crmZgid&&(a["X-CRM-ORG"]=crmZgid),a)s.setRequestHeader(l,a[l]);s.send(o),s.onreadystatechange=function(){if(4==s.readyState)return"2"==s.status.toString()[0]||"3"==s.status.toString()[0]?i(s):r(s)}}))},convertUsrtoDefaultDatePattern:function(e,t){if(!e)return"";if(!e.getMonth){var a=t.toUpperCase();try{e=$L.moment(e,a,{i18n:!0}).getDObj()}catch(e){murphy.error(e)}}return e},showFilterAlert:function(e,t){var a=!0;this.getMethods("onBeforeErrorAlert")&&(a=this.executeMethod("onBeforeErrorAlert",e)),a&&(_cruxUtils.showCustomAlert({params:{cxPropYield:!0,cxPropHeading:Lyte.Component.registeredHelpers.cruxEncodeHTML(e),cxPropButtonPosition:"center",cxPropButtons:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary",cxPropZcqa:"button_primary"}],cxPropWrapperClass:"cxSmartFilterAlert",id:"cxFilterAlert"},show:function(){$L(".cxSmartFilterAlert lyte-button").focus()},close:function(){if(t&&t.$node&&(t=t.$node),t){var e=t.querySelector("lyte-input,lyte-number");e&&e.focus()}}}),this.getMethods("onErrorAlert")&&this.executeMethod("onErrorAlert",e))},getDisplayValue:function(e,t,a="actual_value"){var o=[],i="actual_value"==a?"display_value":"actual_value";return e.forEach((function(e){var r=!1;t.pick_list_values.forEach((function(t){if(t[i]==e)return o.push(t[a]),void(r=!0)})),r||o.push(e)})),o},setModuleMappingData:function(){0===Object.keys(this.data.cxPropModuleRecordMapping).length&&"undefined"!=typeof moduleRecordMapping&&this.setData("cxPropModuleRecordMapping",moduleRecordMapping);var e={},t=this.data.cxPropModuleRecordMapping;for(var a in t)e[t[a].id]=t[a].module_name;this.setData("idModuleMapping",e),this.idModuleMapping=e,this.moduleRecordMapping=this.data.cxPropModuleRecordMapping},getFieldDataType:function(e){if("FULLNAME"!==e.column_name||"Leads"!==this.data.cxPropModule&&"Contacts"!==this.data.cxPropModule)if("formula"===e.data_type||e.rollup_summary&&e.rollup_summary.return_type)e.field_data_type=e.formula.return_type?e.formula.return_type:e.rollup_summary.return_type;else if(-1!==["LAYOUTID","TAGMODULEREFID","ACTIVITYTYPE","WIZARDID"].indexOf(e.column_name)){var t={LAYOUTID:"layout",TAGMODULEREFID:"tag",ACTIVITYTYPE:"picklist",WIZARDID:"layout"};e.field_data_type=t[e.column_name],"Service_Members"===e.api_name&&(e[t[e.api_name]]=e.multiselectlookup)}else 53===e.ui_type?(e.cxGetValueInMS=void 0===e.cxGetValueInMS||e.cxGetValueInMS,e.field_data_type="date"):"Services"===this.data.cxPropModule&&"MXNDUMMYCOLUMN_SERVICE"===e.column_name?(e.field_data_type="multiuserlookup",e.multiuserlookup=e.multiselectlookup):"multi_module_lookup"===e.data_type&&(e.field_data_type="lookup");else e.display_field_label="Leads"===this.data.cxPropModule?_cruxUtils.getI18n("crm.label.vendor.name",this.moduleRecordMapping.Leads.singular_label):_cruxUtils.getI18n("crm.label.vendor.name",this.moduleRecordMapping.Contacts.singular_label),e.field_label=e.display_field_label;return void 0===e.field_data_type&&(e.field_data_type=e.data_type),e.field_data_type}}),Lyte.Component.register("crux-alert",{_template:'<template tag-name="crux-alert"> <lyte-alert on-show="{{method(\'setOnShow\')}}" on-close="{{method(\'setOnClose\')}}" on-accept="{{method(\'setOnAccept\')}}" on-reject="{{method(\'setOnReject\')}}" lt-prop-show="{{lbind(cxPropShow)}}" lt-prop-type="{{cxPropType}}" lt-prop-wrapper-class="{{cxPropWrapperClass}}" lt-prop-allow-multiple="{{cxPropAllowMultiple}}" lt-prop-top="{{cxPropTop}}" lt-prop-buttons="{{cxPropButtons}}" lt-prop-button-position="{{cxPropButtonPosition}}" lt-prop-show-close-button="{{cxPropShowCloseButton}}" lt-prop-close-on-escape="{{cxPropCloseOnEscape}}" lt-prop-dimmer="{{cxPropDimmer}}" lt-prop-yield="true" lt-prop-animation="{{cxPropAnimation}}" lt-prop-content-align="{{cxPropContentAlign}}" lt-prop-aria="{{cxPropAria}}" lt-prop-prevent-focus="{{cxPropPreventFocus}}" lt-prop-aria-attributes="{{cxPropAriaAttributes}}"> <template is="registerYield" yield-name="alert"> <div data-zcqa="cxAlertContainerZcqa"> <template is="if" value="{{cxPropHeading}}"><template case="true"> <lyte-alert-header> <div class="alertContent"> <template is="if" value="{{cxPropType}}"><template case="true"> <div class="alertContentMiddle"> <span class="{{cxPropClass}}"></span> </div> </template></template> <div class="alertContentMiddle"> <span class="alertHeader" data-zcqa="{{cxPropHeadingMessageZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropHeadingMessageMarkdown,\'!\'))}}"><template case="true"> {{cxPropHeading}} </template><template case="false"> {{unescape(if(cxPropHeadingMessageMarkdown,markdown(cxPropHeading),cxPropHeading))}} </template></template> </span> </div> </div> </lyte-alert-header> </template></template> <template is="if" value="{{expHandlers(cxPropPrimaryMessage,\'||\',cxPropSecondaryMessage)}}"><template case="true"> <lyte-alert-content> <div class="alertContent"> <template is="if" value="{{expHandlers(expHandlers(cxPropType,\'&amp;&amp;\',expHandlers(cxPropHeading,\'!\')),\'&amp;&amp;\',cxPropPrimaryMessage)}}"><template case="true"> <div class="alertContentMiddle"> <span class="{{cxPropClass}}"></span> </div> </template></template> <template is="if" value="{{cxPropPrimaryMessage}}"><template case="true"> <span class="alertPrimaryMsg" data-zcqa="{{cxPropPrimaryMessageZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropPrimaryMessageMarkdown,\'!\'))}}"><template case="true"> {{cxPropPrimaryMessage}} </template><template case="false"> {{unescape(if(cxPropPrimaryMessageMarkdown,markdown(cxPropPrimaryMessage),cxPropPrimaryMessage))}} </template></template> </span> </template></template> </div> <template is="if" value="{{cxPropSecondaryMessage}}"><template case="true"> <span class="alertSecondaryMsg" data-zcqa="{{cxPropSecondayMessageZcqa}}"> <template is="if" value="{{expHandlers(expHandlers(cxPropYield,\'!\'),\'&amp;&amp;\',expHandlers(cxPropSecondaryMessageMarkdown,\'!\'))}}"><template case="true"> {{cxPropSecondaryMessage}} </template><template case="false"> {{unescape(if(cxPropSecondaryMessageMarkdown,markdown(cxPropSecondaryMessage),cxPropSecondaryMessage))}} </template></template> </span> </template></template> </lyte-alert-content> </template></template> <lyte-alert-footer> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-yield yield-name="cx-alert-footer"></lyte-yield> </template><template case="false"> <div class="alertFooter {{cxPropButtonPosition}}"> <template is="for" items="{{cxPropButtons}}" item="item" index="index"> <lyte-button lt-prop-type="{{item.type}}" lt-prop-appearance="{{item.appearance}}" onclick="{{action(\'alertButtonClick\',item.type,item.text)}}"> <template is="registerYield" yield-name="text"> {{item.text}} </template> </lyte-button> </template> </div> </template></template> </lyte-alert-footer> </div> </template> </lyte-alert> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"attr",position:[1,1,3,1,1]},{type:"if",position:[1,1,3,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,5]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropShow","cxPropPrimaryMessage","cxPropHeading","cxPropSecondaryMessage","cxPropType","cxPropClass","cxPropWrapperClass","cxPropAllowMultiple","cxPropTop","cxPropButtons","cxPropButtonPosition","cxPropShowCloseButton","cxPropCloseOnEscape","cxPropDimmer","cxPropYield","cxPropAnimation","cxPropContentAlign","cxPropAria","cxPropPreventFocus","cxPropAriaAttributes","cxAlertHeader","cxAlertContent","cxPropHeadingMessageMarkdown","cxPropPrimaryMessageMarkdown","cxPropSecondaryMessageMarkdown","cxPropHeadingMessageZcqa","cxPropPrimaryMessageZcqa","cxPropSecondayMessageZcqa","cxPropFooterYield","cxPropUtilAlert"],data:function(){return{cxPropShow:Lyte.attr("boolean",{default:!1}),cxPropPrimaryMessage:Lyte.attr("string"),cxPropHeading:Lyte.attr("string"),cxPropSecondaryMessage:Lyte.attr("string"),cxPropType:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropWrapperClass:Lyte.attr("string",{default:"cxAlertWrapper"}),cxPropAllowMultiple:Lyte.attr("string",{default:!1}),cxPropTop:Lyte.attr("string",{default:"0px"}),cxPropButtons:Lyte.attr("array",{default:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary"}]}),cxPropButtonPosition:Lyte.attr("string",{default:"center"}),cxPropShowCloseButton:Lyte.attr("boolean",{default:!1}),cxPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),cxPropDimmer:Lyte.attr("object",{default:{color:"black",opacity:"0.4"}}),cxPropYield:Lyte.attr("boolean",{default:!1}),cxPropAnimation:Lyte.attr("string",{default:"slideDown"}),cxPropContentAlign:Lyte.attr("string",{default:"left"}),cxPropAria:Lyte.attr("boolean",{default:!1}),cxPropPreventFocus:Lyte.attr("boolean",{default:!1}),cxPropAriaAttributes:Lyte.attr("object",{default:""}),cxAlertHeader:Lyte.attr("string"),cxAlertContent:Lyte.attr("string"),cxPropHeadingMessageMarkdown:Lyte.attr("boolean",{default:!1}),cxPropPrimaryMessageMarkdown:Lyte.attr("boolean",{default:!1}),cxPropSecondaryMessageMarkdown:Lyte.attr("boolean",{default:!1}),cxPropHeadingMessageZcqa:Lyte.attr("string",{default:"cxAlertHeadingMessageZcqa"}),cxPropPrimaryMessageZcqa:Lyte.attr("string",{default:"cxAlertPrimaryMessageZcqa"}),cxPropSecondayMessageZcqa:Lyte.attr("string",{default:"cxAlertSecondaryMessageZcqa"}),cxPropFooterYield:Lyte.attr("boolean",{default:"false"}),cxPropUtilAlert:Lyte.attr("boolean",{default:!1})}},init:function(){},didConnect:function(){},actions:{alertButtonClick:function(e,t){var a=!0,o=this.data.cxPropUtilAlert?this.$node.querySelector("lyte-alert"):this,i="on"+e.charAt(0).toUpperCase()+e.slice(1);this.getMethods(i)&&(a=null==(a=this.executeMethod(i,o,t))||a),a&&this.$node.cxProp("show",!1)}},methods:{setOnShow:function(e){e.childComp.querySelectorAll(".alertFooter lyte-button").forEach((function(t,a){if(e.getData("ltPropButtons")[a].cxPropZcqa)t.setAttribute("data-zcqa",e.getData("ltPropButtons")[a].cxPropZcqa);else if(e.getData("ltPropButtons")[a].type){var o=e.getData("ltPropButtons")[a].type;t.setAttribute("data-zcqa","cxAlert"+o.charAt(0).toUpperCase()+o.slice(1)+"ButtonZcqa")}else t.setAttribute("data-zcqa","cxAlertAcceptButtonZcqa")})),this.getMethods("onShow")&&this.executeMethod("onShow",e)},setOnClose:function(e){this.getMethods("onClose")&&this.executeMethod("onClose",e)},setOnAccept:function(e,t){this.getMethods("onAccept")&&this.executeMethod("onAccept",e,t)},setOnReject:function(e,t){this.getMethods("onReject")&&this.executeMethod("onReject",e,t)}},setIconClass:function(){if(this.getData().cxPropType){var e=this.getData().cxPropType.toLowerCase()+"AlertIcon lyteStatusIcon";this.setData("cxPropClass",e)}}.observes("cxPropType").on("init")}),Lyte.Mixin.register("crux-aria-column-list-mixin",{addLiveForEmpty:function(){var e=this;setTimeout((()=>{var t;e.cxProp("noContentClass")&&(t=e.querySelector("."+e.cxProp("noContentClass"))),t&&("none"!==$L(t).css("display")?t.ariaLive="polite":t.ariaLive&&t.removeAttribute("aria-live"))}),500)},keyEvent:function(){for(var e=Lyte.registeredMixins["crux-aria-column-list-mixin"],t=this.data.cxPropAccessibilityClass,a=this.$node.querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),o=event.key,i=this.$node.querySelector("."+t),r=a.length,s=0;s<r;s++)this.addLabel.call(this,a[s]);if(i||("ArrowUp"===event.key?($L(a[0]).addClass(t),i=a[0]):"ArrowDown"===event.key&&($L(a[a.length-1]).addClass(t),i=a[a.length-1])),i){if(document.querySelector("#crurr_act_item")&&$L("#crurr_act_item").removeAttr("id"),a=this.$node.querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),event.key.includes("Arrow")||event.key.includes("Page")){var l,n;if(i&&$L(i).removeClass(t),event.preventDefault(),event.metaKey&&i.className.includes("sortable-element")){var c=this.$node.querySelectorAll("lyte-menu-item[class *= sortable-element]"),p=c.length;for(l=0;l<p;l++)if(c[l]===i){n=l;var d=Lyte.arrayUtils(this.getData("items"),"removeAt",l,1)[0];"ArrowUp"===event.key?n=0===n?c.length-1:n-1:"ArrowDown"===event.key&&(n=n===c.length-1?0:n+1),Lyte.arrayUtils(this.getData("items"),"insertAt",n,d),this.sortableMenu.call(this),c=this.$node.querySelectorAll("lyte-menu-item[class *= sortable-element]")[n],$L(c).addClass(t)}}else if(event.key.includes("Page"))"PageUp"===event.key?$L(a[0]).addClass(t):"PageDown"===event.key&&$L(a[a.length-1]).addClass(t);else{var u=a.length;for(l=0;l<u;l++)if(a[l]===i){if(n=l,"ArrowUp"===event.key)for(n=0===n?a.length-1:n-1;a[n].className.includes("lyteSearchHidden");)n=0===n?a.length-1:n-1;else if("ArrowDown"===event.key)for(n=n===a.length-1?0:n+1;a[n].className.includes("lyteSearchHidden");)n=n===a.length-1?0:n+1;$L(a[n]).addClass(t)}}e.scrollToActiveElem.call(this,this,t,o)}else if("Enter"===event.key){if(event.preventDefault(),i){var h=i.querySelector("lyte-checkbox");h&&h.click()}for(var m=i;"LYTE-MENU-ITEM"!==m.tagName;)m=m.parentElement;i&&$L(i).removeClass(t),setTimeout((()=>{$L(m).addClass(t)}),100)}else"Meta"!==event.key&&(i&&$L(i).removeClass(t),$L(a[0]).addClass(t));i.id="crurr_act_item",document.activeElement.setAttribute("aria-activedescendant","crurr_act_item")}},scrollToActiveElem:function(e,t,a){var o=Lyte.registeredMixins["crux-aria-column-list-mixin"],i=e.$node.querySelector("."+t);e.scrollableParent&&void 0!==e.scrollableParent||(e.scrollableParent=$L(i).cxGetScrollParent());var r=e.scrollableParent,s=i.offsetHeight+i.offsetTop,l=r.offsetHeight+r.offsetTop+r.scrollTop;if(i!==document.activeElement)if("ArrowUp"!==a&&"PageUp"!==a||!(s>l||i.offsetTop<r.scrollTop||Math.abs(r.scrollTop-i.offsetTop)<r.offsetTop)){if(("ArrowDown"===a||"PageDown"===a)&&(s>l||i.offsetTop<r.scrollTop||Math.abs(r.scrollTop-i.offsetTop)<r.offsetTop)){var n;if($L(r).css("overflow","hidden"),s<l&&i.offsetTop<r.scrollTop)n=$L(".cxAriaActive")[0]&&$L(".cxAriaActive")[0]._cx&&$L(".cxAriaActive")[0]._cx.itemIndex?$L(".cxAriaActive")[0]._cx.itemIndex:$L("lyte-menu-item",e.$node).indexOf(e.$node.querySelector(".cxAriaActive")),$L(r,e.$node).scrollTo({top:n*i.offsetHeight},{onAfter:function(){o.onAfterScroll.call(this,r)}});else $L(r,e.$node).scrollTo({top:r.scrollTop+(s-l)},{onAfter:function(){o.onAfterScroll.call(this,r)}})}}else $L(r).css("overflow","hidden"),i.offsetTop>r.scrollTop&&s>l?$L(r,e.$node).scrollTo({top:r.scrollTop+(s-l)},{onAfter:function(){o.onAfterScroll.call(this,r)}}):$L(r,e.$node).scrollTo($L("."+t),{onAfter:function(){o.onAfterScroll.call(this,r)}})},onAfterScroll:function(e){$L(e).css("overflow","auto")},bindEventForAriaColumnList:function(){if(console.log("column-list-mixin..."),this.$node.cxProp("aria")){for(var e=Lyte.registeredMixins["crux-aria-column-list-mixin"],t=this.data.cxPropAccessibilityClass,a=this.$node.querySelectorAll("lyte-menu-item, #inputId"),o=0;o<a.length;o++){a[o];if(this.addLabel.call(this,a[o]),"inputId"===a[o].id){if(!$L(a[o]).attr("cxAriaColListInputFocus")){var i=this;this.$node&&(i=this.$node);var r=e.addLiveForEmpty.bind(i);a[o].addEventListener("input",r),$L(a[o]).attr("cxAriaColListInputFocus",!0)}a[o].addEventListener("focusout",(()=>{$L("."+t,this.$node).removeClass(t)}))}}$L(this.$node).attr("cxAriaColListKeydown")||(this.listener=this.keyEvent.bind(this),this.$node.addEventListener("keydown",this.listener),$L(this.$node).attr("cxAriaColListKeydown",!0))}},addLabel:function(e){var t,a=e;if(!a.ariaLabel){if(a.className.includes("cxColListMandatoryItem")&&(a.ariaRequired=!0),"LYTE-MENU-ITEM"===a.tagName){var o=a.querySelector("lyte-label");o&&(t=o.textContent.trim());var i=a.querySelector("[type = checkbox]");i&&(a=i)}"checkbox"===a.type&&(a=a.closest("[lyte-rendered]")),"LYTE-CHECKBOX"===a.tagName&&t&&a.ltProp("ariaCheckbox",{"aria-label":t}),a.tagName.includes("INPUT")&&(a.placeholder&&(a.ariaPlaceholder=a.placeholder),a.maxLength&&(a.ariaValueMax=a.maxLength))}}}),Lyte.Mixin.register("crux-aria-dropdown-mixin",{addLiveForEmpty:function(){var e=this;"LYTE-DROPDOWN"!=e.tagName&&e.querySelector("lyte-dropdown")&&(e=e.querySelector("lyte-dropdown")),setTimeout((()=>{if(e.component&&e.component.childComp&&e.component.childComp.querySelector(".noUsersFoundDiv, .cxDropdownNoResult")){var t=e.component.childComp.querySelector(".noUsersFoundDiv, .cxDropdownNoResult");"none"!=$L(t).css("display")?t.ariaLive="polite":t.ariaLive&&t.removeAttribute("aria-live")}}),500)},inputFocus:function(){for(var e=Lyte.registeredMixins["crux-aria-dropdown-mixin"],t=this;!t.tagName.includes("LYTE-DROPDOWN")&&(t._callee&&(t=t._callee),"BODY"!=t.tagName););"LYTE-DROPDOWN"!=t.tagName&&t.querySelector("lyte-dropdown")&&(t=this);var a=document.activeElement;if(!$L(a).attr("cxAriaDropdownInputFocus")){var o=e.addLiveForEmpty.bind(t);a.addEventListener("input",o),$L(a).attr("cxAriaDropdownInputFocus",!0)}document.querySelector(".cxAriaActive")&&$L(".cxAriaActive").removeClass("cxAriaActive"),$L(document.activeElement).addClass("cxAriaActive");var i="";t.querySelector("lyte-search")||t.querySelector(".userSearchBox")?i=t.querySelector("lyte-search")?t.querySelector("lyte-search"):t.querySelector(".userSearchBox"):t.component.childComp&&(t.component.childComp.querySelector("lyte-search")||t.component.childComp.querySelector(".userSearchBox"))&&(i=t.component.childComp.querySelector("lyte-search")?t.component.childComp.querySelector("lyte-search"):t.component.childComp.querySelector(".userSearchBox"));var r=a.value;if(i&&""!=r&&("LYTE-SEARCH"==i.tagName?i.setValue(r.trim()):i.className.includes("userSearchBox")&&i.ltProp("value",r.trim())),"LYTE-DROPDOWN"==t.tagName){var s=document.activeElement,l="";t.querySelector(".cxAriaActive")?l=t.querySelector(".cxAriaActive"):t.component.childComp&&t.component.childComp.querySelector(".cxAriaActive")&&(l=t.component.childComp.querySelector(".cxAriaActive")),""!=l&&(s=".cxAriaActive",t.ltProp("activeElement",s))}},onFocus:function(){var e=this;"LYTE-DROPDOWN"!=e.tagName&&e.querySelector("lyte-dropdown")&&(e=e.querySelector("lyte-dropdown"));var t=document.activeElement;if(e.querySelector(".cxAriaActive")?$L(e.querySelector(".cxAriaActive")).removeClass("cxAriaActive"):e.component.childComp&&e.component.childComp.querySelector(".cxAriaActive")&&$L(e.component.childComp.querySelector(".cxAriaActive")).removeClass("cxAriaActive"),t&&!$L(t).hasClass("cxAriaActive")&&$L(t).addClass("cxAriaActive"),"LYTE-DROPDOWN"==e.tagName){t=document.activeElement;var a="";e.querySelector(".cxAriaActive")?a=e.querySelector(".cxAriaActive"):e.component.childComp&&e.component.childComp.querySelector(".cxAriaActive")&&(a=e.component.childComp.querySelector(".cxAriaActive")),""!=a&&(actElem=".cxAriaActive",e.ltProp("activeElement",actElem))}},onFocusOut:function(){var e=this;"LYTE-DROPDOWN"!=e.tagName&&e.querySelector("lyte-dropdown")&&(e=e.querySelector("lyte-dropdown"));var t=document.querySelector(".cxAriaActive");t&&(e.querySelector(".cxPrevAriaActive")?$L(e.querySelector(".cxPrevAriaActive")).removeClass("cxPrevAriaActive"):e.component.childComp&&e.component.childComp.querySelector(".cxPrevAriaActive")&&$L(e.component.childComp.querySelector(".cxPrevAriaActive")).removeClass("cxPrevAriaActive"),$L(t).addClass("cxPrevAriaActive"),$L(t).removeClass("cxAriaActive"))},keyEvent:function(){var e=Lyte.registeredMixins["crux-aria-dropdown-mixin"],t=this;"LYTE-DROP-BOX"==t.tagName?"LYTE-DROPDOWN"!=(t=t._callee).tagName&&t.querySelector("lyte-dropdown")&&(t=t.querySelector("lyte-dropdown")):(t.$node&&(t=t.$node),"LYTE-DROPDOWN"!=t.tagName&&t.querySelector("lyte-dropdown")&&(t=t.querySelector("lyte-dropdown")));var a=t.querySelectorAll("li:not(.lyteMultiselectInput), input, lyte-dropdown lyte-dropdown .lyteDummyEventContainer");if(a=Array.from(a),t.component&&t.component.childComp&&t.component.childComp.querySelector("li:not(.lyteMultiselectInput), lyte-input, input:not(lyte-input input)")){var o=t.component.childComp,i=Array.from(o.querySelectorAll("li:not(.lyteMultiselectInput), input, lyte-dropdown .lyteDummyEventContainer"));if(a=a.concat(i),o.querySelector("lyte-input, lyte-dropdown")&&!$L(o).attr("cxAriaDropdownKeydown")&&(o.listener=e.keyEvent.bind(t),o.addEventListener("keydown",o.listener),$L(o).attr("cxAriaDropdownKeydown",!0)),o.querySelector("lyte-input"))"LYTE-INPUT"!=(n=o.querySelector("lyte-input")).tagName||$L(n).attr("cxAriaDropdownInputFocus")||(n.addEventListener("focusin",e.inputFocus.bind(t)),$L(n).attr("cxAriaDropdownInputFocus",!0))}else setTimeout((()=>{if(t.component&&t.component.childComp&&t.component.childComp.querySelector("li:not(.lyteMultiselectInput), lyte-input, input:not(lyte-input input)")){var a=t.component.childComp;if(a.querySelector("lyte-input, lyte-dropdown")&&!$L(a).attr("cxAriaDropdownKeydown")&&(a.listener=e.keyEvent.bind(a),a.addEventListener("keydown",a.listener),$L(a).attr("cxAriaDropdownKeydown",!0)),a.querySelector("lyte-input")){var o=a.querySelector("lyte-input");"LYTE-INPUT"!=o.tagName||$L(o).attr("cxAriaDropdownInputFocus")||(o.addEventListener("focusin",e.inputFocus.bind(t)),$L(o).attr("cxAriaDropdownInputFocus",!0))}}}),100);!t.querySelector("lyte-input")||t.component.childComp&&t.component.childComp.querySelector("lyte-input")||("LYTE-INPUT"!=(n=t.querySelector("lyte-input")).tagName||$L(n).attr("cxAriaDropdownInputFocus")||(n.addEventListener("focusin",e.inputFocus.bind(t)),$L(n).attr("cxAriaDropdownInputFocus",!0)));for(var r=-1,s="",l=0;l<a.length;l++){var n;0==(n=a[l]).tabIndex&&n.ariaLabel||e.addLabel.call(t,n),$L(n).attr("cxAriaDropdownFocus")||(n.addEventListener("focusin",e.onFocus.bind(t)),n.addEventListener("focusout",e.onFocusOut.bind(t)),$L(n).attr("cxAriaDropdownFocus",!0)),n.className.includes("cxAriaActive")&&a.includes(n)&&(r=l,s=n)}var c=document.activeElement,p=!0;if("INPUT"==c.tagName&&("ArrowLeft"==event.key||"ArrowRight"==event.key)){p=!1;var d=c.value.length,u=event.target.selectionStart;(d==u&&"ArrowRight"==event.key||0==u&&"ArrowLeft"==event.key)&&(p=!0)}if(p&&""!=s&&-1!=r)if(event.key.includes("Arrow")){var h=r,m=a.length;if("ArrowLeft"==event.key||"ArrowRight"==event.key){a[h].classList.contains("lyteDummyEventContainer")&&a[h].parentElement.ltProp("isOpen")&&a[h].parentElement.close();do{"ArrowLeft"==event.key?h=0==h?m-1:h-1:"ArrowRight"==event.key&&(h=h==m-1?0:h+1)}while("none"==$L(a[h]).css("display"));a[h].classList.contains("lyteDummyEventContainer")&&a[h].parentElement.ltProp("isOpen")&&a[h].parentElement.close(),a[h].focus()}}else if("Backspace"==event.key||"Delete"==event.key){if(document.activeElement==s){if("INPUT"==document.activeElement.tagName&&0==document.activeElement.value.length){for(var y=document.activeElement;"LYTE-DROP-BUTTON"!=y.tagName&&(!y.previousElementSibling||"LI"!=y.previousElementSibling.tagName);)y=y.parentElement;"LYTE-DROP-BUTTON"==y.tagName||y.previousElementSibling.querySelector("input")||y.previousElementSibling.focus(),document.activeElement.className.includes("cxAriaActive")||$L(document.activeElement).addClass("cxAriaActive")}t.querySelector(".cxAriaActive")&&t.querySelector(".cxAriaActive").children.length>0&&(t.querySelector(".cxAriaActive").children[1].focus(),t.querySelector(".cxAriaActive").children[1].click())}if("INPUT"!=s.tagName&&"LYTE-INPUT"!=s.tagName){if(t.component.childComp&&t.component.childComp.querySelector("lyte-input"))t.component.childComp.querySelector("lyte-input").focus();else t.querySelector("lyte-input")&&t.querySelector("lyte-input").focus();event.preventDefault()}event.stopImmediatePropagation()}else if("Escape"==event.key){var x=t;t.component&&t.component.childComp&&t.component.childComp.querySelector("lyte-dropdown .cxAriaActive")&&t.component.childComp.querySelector("lyte-dropdown").ltProp("isOpen")&&(x=t.component.childComp.querySelector("lyte-dropdown")),a.includes(document.activeElement)&&(x.querySelector(".cxAriaActive")||x.component&&x.component.childComp&&x.component.childComp.querySelector(".cxAriaActive"))&&x.ltProp("isOpen")&&(x.close(),event.stopImmediatePropagation()),x&&x.querySelector("[tabindex]")&&!x.querySelector("[tabindex]").className.includes("cxAriaActive")&&($L(".cxAriaActive").removeClass("cxAriaActive"),t.querySelector("[tabindex]").focus())}else" "!==event.key&&"Enter"!==event.key||!c.className.includes("cxAriaActive")||!$L(c).attr("click")&&!$L(c).attr("onClick")||c.click()},bindEventForAria:function(){var e=Lyte.registeredMixins["crux-aria-dropdown-mixin"],t=this;t.$node&&(t=t.$node),setTimeout((()=>{var a=t.querySelectorAll("lyte-dropdown:not(lyte-dropdown lyte-dropdown)");if(t&&t.cxProp("aria")){for(var o=0;o<a.length;o++){var i=a[o];if("multiple"==i.ltProp("type")||"multisearch"==i.ltProp("type")){var r=i,s=r.querySelectorAll("li:not(.lyteMultiselectInput), lyte-input, input, lyte-dropdown, lyte-dropdown lyte-dropdown .lyteDummyEventContainer");if(s=Array.from(s),r.component&&r.component.childComp&&r.component.childComp.querySelector("li:not(.lyteMultiselectInput), lyte-input, input, lyte-dropdown, lyte-dropdown lyte-dropdown .lyteDummyEventContainer")){var l=r.component.childComp,n=Array.from(l.querySelectorAll("li:not(.lyteMultiselectInput), lyte-input, input, lyte-dropdown, lyte-dropdown lyte-dropdown .lyteDummyEventContainer"));s=s.concat(n),"LYTE-DROPDOWN"!=l.tagName||$L(l).attr("cxAriaDropdownKeydown")||(l.listener=e.keyEvent.bind(r),l.addEventListener("keydown",l.listener),$L(l).attr("cxAriaDropdownKeydown",!0))}for(o=0;o<s.length;o++){0==(c=s[o]).tabIndex&&c.ariaLabel||"LYTE-DROPDOWN"==c.tagName||"LYTE-INPUT"==c.tagName||e.addLabel.call(r,c),"LYTE-INPUT"!=c.tagName||$L(c).attr("cxAriaDropdownInputFocus")||(c.addEventListener("focusin",e.inputFocus.bind(i)),$L(c).attr("cxAriaDropdownInputFocus",!0)),$L(c).attr("cxAriaDropdownFocus")||"LYTE-DROPDOWN"==c.tagName||"LYTE-INPUT"==c.tagName||(c.addEventListener("focusin",e.onFocus.bind(i)),c.addEventListener("focusout",e.onFocusOut.bind(i)),$L(c).attr("cxAriaDropdownFocus",!0))}"LYTE-DROPDOWN"!=r.tagName||$L(r).attr("cxAriaDropdownKeydown")||(r.listener=e.keyEvent.bind(r),r.addEventListener("keydown",r.listener),$L(r).attr("cxAriaDropdownKeydown",!0))}}if("CRUX-TAG-COMPONENT"==t.tagName&&"view"==t.cxProp("from")){for(s=t.querySelectorAll("li"),o=0;o<s.length;o++){var c;0==(c=s[o]).tabIndex&&c.ariaLabel||e.addLabel.call(t,c),$L(c).attr("cxAriaDropdownFocus")||(c.addEventListener("focusin",e.onFocus.bind(t)),c.addEventListener("focusout",e.onFocusOut.bind(t)),$L(c).attr("cxAriaDropdownFocus",!0))}$L(t).attr("cxAriaDropdownKeydown")||(t.listener=e.keyEvent.bind(t),t.addEventListener("keydown",t.listener),$L(t).attr("cxAriaDropdownKeydown",!0))}}}),100)},addLabel:function(e){if("LI"==e.tagName&&(e.tabIndex=0),!e.ariaLabel&&-1!=e.tabIndex){var t="",a="";if("INPUT"==e.tagName||e.className.includes("lyteDummyEventContainer")){for(a=e;!a.tagName.includes("LYTE")&&"BODY"!=(a=a.parentElement).tagName;);a.tagName.includes("LYTE")||(a="")}if("INPUT"==e.tagName?(t=e.value?e.value.trim():"none",e.placeholder&&(e.ariaPlaceholder=e.placeholder),e.maxLength&&(e.ariaValueMax=e.maxLength)):e.textContent&&(t=e.textContent.trim()),t){var o=e.closest("[lyte-rendered]");if(o.tagName.includes("LYTE"))switch(o.ltProp("aria",!0),o.tagName){case"LYTE-DROPDOWN":o.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":o.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":o.ltProp("ariaRadio",{"aria-label":t});break;default:o.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-lookup-filter-mixin",{onFocus:function(){var e=document.activeElement;"lv_filter_scroll"!=e.id&&(document.querySelector(".cxAriaActive")?$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive"):($L(e).addClass("cxAriaActive"),event.stopImmediatePropagation()))},onFocusOut:function(){document.querySelector(".cxAriaActive")&&$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive")},lookUpKeyEvent:function(){var e=Lyte.registeredMixins["crux-aria-lookup-filter-mixin"],t=event.currentTarget;t.$node&&(t=t.$node);var a=t.modalContainer,o=t.table,i=t.querySelector(".cxAriaActive");this.bindLabelAndIndex.call(this);var r=document.activeElement;if(i&&(r=i),event.target==r){var s=Lyte.registeredMixins["crux-aria-table-mixin"];$L(o).attr("listener")&&(o.removeEventListener("keydown",s.actionCompEvent),$L(o).removeAttr("listener"))}if(!i||i.tagName.includes("TD")||i.tagName.includes("TH")||$L(t).attr("subKeyListen"))$L(t).attr("subKeyListen")||t.removeEventListener("keydown",e.lookUpSubKeyEvent);else{t.addEventListener("keydown",e.lookUpSubKeyEvent),$L(t).attr("subKeyListen",!0),!o.attributes.listener&&a.component&&a.component.parent&&"LYTE-MODAL"==a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","false"),event.stopImmediatePropagation();var l=new KeyboardEvent("keydown",{key:event.key});t.dispatchEvent(l)}" "!=event.key||$L(t).attr("subKeyListen")||"true"==$L(t).attr("subKeyListen")||(event.preventDefault(),(i.tagName.includes("TH")||i.tagName.includes("TD"))&&i.querySelector("[tabIndex]")&&i.querySelector("[tabIndex]").focus(),$L(t).attr("subKeyListen")||(t.addEventListener("keydown",e.lookUpSubKeyEvent),$L(t).attr("subKeyListen",!0)),!o.attributes.listener&&a.component&&a.component.parent&&"LYTE-MODAL"==a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","false"),event.stopImmediatePropagation())},lookUpSubKeyEvent:function(){var e=Lyte.registeredMixins["crux-aria-lookup-filter-mixin"],t=event.currentTarget;t.$node&&(t=t.$node);var a=t.modalContainer,o=t.table,i=event.currentTarget;$L(i).attr("cxLookupFilterFocusout")||(document.addEventListener("click",(function a(){var o=t.querySelector(".cxAriaActive");o&&(o.tagName.includes("TD")||o.tagName.includes("TH"))&&$L(o).attr("focusable")&&$L(t).attr("subKeyListen")&&(t.removeEventListener("keydown",e.lookUpSubKeyEvent),$L(t).removeAttr("subKeyListen")),$L(t).attr("cxLookupFilterFocusout")&&(document.removeEventListener("click",a),$L(i).removeAttr("cxLookupFilterFocusout"))})),$L(i).attr("cxLookupFilterFocusout",!0));var r=t.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td"),s=t.querySelector(".cxAriaActive"),l=!0;if(s&&"INPUT"==s.tagName&&"inputId"!=s.id&&("ArrowLeft"==event.key||"ArrowRight"==event.key)){l=!1;var n=s.value.length,c=(event.target.ariaLabel?event.target:event.target.querySelector(".cxAriaActive")).selectionStart;(n==c&&"ArrowRight"==event.key||0==c&&"ArrowLeft"==event.key)&&(l=!0)}if(l&&(event.key.includes("Arrow")||"Escape"==event.key))for(var p=0;p<r.length;p++){var d=0,u=r[p].querySelectorAll("[tabIndex]:not(#inputId, li)");if(u.length<=0&&(u=[]).push(r[p]),r[p]==s||r[p].querySelector(".cxAriaActive")){for(var h=0;h<u.length;h++)if(u[h]==s||u[h].querySelector(".cxAriaActive")||r[p]==s){var m;if(u[h].querySelector(".cxAriaActive")||event.preventDefault(),event.key.includes("Arrow")&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){if("ArrowUp"==event.key||"ArrowDown"==event.key)m=h,"ArrowUp"==event.key?m=0==m?u.length-1:m-1:"ArrowDown"==event.key&&(m=m==u.length-1?0:m+1),u[m].focus();else if("ArrowLeft"==event.key||"ArrowRight"==event.key)if(m=p,"ArrowLeft"==event.key?m=0==m?r.length-1:m-1:"ArrowRight"==event.key&&(m=m==r.length-1?0:m+1),r[m].querySelectorAll("[tabIndex]:not(#inputId, li)").length>h)r[m].querySelectorAll("[tabIndex]:not(#inputId, li)")[h].focus();else if(r[m].querySelectorAll("[tabIndex]:not(#inputId, li)").length<=0)r[m].focus();else{for(;r[m].querySelectorAll("[tabIndex]:not(#inputId, li)").length<=h&&h>0;)h--;r[m].querySelectorAll("[tabIndex]:not(#inputId, li)")[h].focus()}d=1,event.stopImmediatePropagation();break}if("Escape"==event.key){var y=t.querySelector(".cxAriaActive");if(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft"))for(;"LYTE-DROPDOWN"!=y.tagName;)y=y.parentElement;u[h]==s?(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")?(y.close(),event.stopImmediatePropagation()):(r[p].focus(),$L(t).attr("subKeyListen")&&(t.removeEventListener("keydown",e.lookUpSubKeyEvent),$L(t).removeAttr("subKeyListen"))),d=1):u[h].querySelector(".cxAriaActive")&&(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")&&y.close(),u[h].focus(),event.stopImmediatePropagation(),d=1);var x=document.activeElement;y&&(x=y);for(var f=x;!f.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!=f.tagName&&"BODY"!=f.tagName;)f=f.parentElement;if(event.target==x||f==event.target&&y==x){var g=Lyte.registeredMixins["crux-aria-table-mixin"];$L(o).attr("listener")&&(o.removeEventListener("keydown",g.actionCompEvent),$L(o).removeAttr("listener")),!o.attributes.listener&&!t.attributes.subKeyListen&&a.component&&a.component.parent&&"LYTE-MODAL"==a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","true"),event.stopImmediatePropagation()}if(1==d)break}}if(1==d)break}}else if("Enter"==event.key)if(document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft"))t.component&&t.component.bindLabelAndIndex.call(t.component);else{var P=document.activeElement;document.activeElement.click(),$L(P).addClass("cxAriaActive"),P.focus()}},bindLabelAndIndex:function(){for(var e=this.$node.querySelectorAll("[tabIndex]"),t=0;t<e.length;t++){var a=e[t];if("inputId"==a.id){for(var o=a;"LYTE-DROPDOWN"!=o.tagName&&"CRUX-LOOKUPFILTER-COMPONENT"!=o.tagName;)o=o.parentElement;"LYTE-DROPDOWN"==o.tagName&&(a=o.querySelector(".lyteDummyEventContainer"))}a.tabIndex&&a.ariaLabel||this.addLabel.call(this,a)}},bindEventForAriaLookUpFilter:function(){if(this.$node.cxProp("aria")){for(var e=this.$node.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, [tabIndex], [click], [onclick]"),t=0;t<e.length;t++){var a=e[t];if("inputId"==a.id){for(var o=a;"LYTE-DROPDOWN"!=o.tagName&&"CRUX-LOOKUPFILTER-COMPONENT"!=o.tagName;)o=o.parentElement;"LYTE-DROPDOWN"==o.tagName&&(a=o.querySelector(".lyteDummyEventContainer"))}this.addLabel.call(this,a),$L(a).attr("cxAriaLookupFilterFocus")||(a.addEventListener("focusin",this.onFocus),a.addEventListener("focusout",this.onFocusOut),$L(a).attr("cxAriaLookupFilterFocus",!0))}$L(this.$node).attr("cxAriaLookupFilterKeydown")||(this.listener=this.lookUpKeyEvent.bind(this),this.$node.addEventListener("keydown",this.listener),$L(this.$node).attr("cxAriaLookupFilterKeydown",!0));var i=this.$node;if(this.$node._callee&&("CRUX-TABLE-COMPONENT"!=(i=this.$node._callee).tagName&&"LYTE-TABLE"!=i.tagName&&"LYTE-EXPRESSTABLE"!=i.tagName&&"TABLE"!=i.tagName||(i.tagName.includes("CRUX")&&i.querySelector("lyte-table, lyte-expresstable, table")&&(i=i.querySelector("lyte-table, lyte-expresstable, table")),this.$node.table=i)),document.querySelector("[cxAriaTableFocusableParent]")){var r=document.querySelector("[cxAriaTableFocusableParent]");if(r.component){var s=r=r.component;for(s.$node&&(s=s.$node);!(s.component&&s.component.parent||"LYTE-WORMHOLE"==s.tagName||"BODY"==s.tagName);)s=s.parentElement;this.$node.modalContainer=s}}setTimeout((()=>{var e=this;if(this.$node&&(e=this.$node),e.querySelector("lyte-dropdown"))for(var t=e.querySelectorAll("lyte-dropdown"),a=0;a<t.length;a++)t[a].component&&t[a].component.childComp&&t[a].component.childComp.className&&!t[a].component.childComp.className.includes("Hidden")&&t[a].close();e.firstElementChild&&e.firstElementChild.focus()}),100)}},addLabel:function(e){var t,a=e;if(!a.tagName.includes("TD")&&!a.tagName.includes("TH")||a.tabIndex&&-1!=a.tabIndex||(a.tabIndex=0),!e.ariaLabel&&-1!=a.tabIndex){if("LYTE-MENU-ITEM"==a.tagName&&(a=a.querySelector("[type = checkbox]")),"checkbox"==a.type&&(a=a.parentElement),"INPUT"==a.tagName)t=a.value?a.value:"none",a.placeholder&&(a.ariaPlaceholder=a.placeholder),a.maxLength&&(a.ariaValueMax=a.maxLength);else if(a.childNodes.length>0)if(a.querySelector("span"))t=a.querySelector("span").textContent;else if(a.querySelector("#inputId")){var o=a.querySelector("#inputId");o.value?t=o.value:o.placeholder&&(t=o.placeholder)}if(!t&&e.textContent&&""!=e.textContent.trim()&&(t=e.textContent.trim()),t){var i=e.closest("[lyte-rendered]");if(i.tagName.includes("LYTE"))switch(i.ltProp("aria",!0),i.tagName){case"LYTE-DROPDOWN":i.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":i.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":i.ltProp("ariaRadio",{"aria-label":t});break;default:i.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-lookup-mixin",{onFocus:function(){var e=document.activeElement,t=this;t.$node&&(t=t.$node),t.querySelector(".cxAriaActive")&&$L(".cxAriaActive",t).removeClass("cxAriaActive"),e&&!$L(e).hasClass("cxAriaActive")&&$L(e).addClass("cxAriaActive")},onFocusOut:function(){var e=this;e.$node&&(e=e.$node);var t=$L(e.querySelector(".cxAriaActive"));t[0]&&(e.querySelector(".cxPrevAriaActive")&&$L(".cxPrevAriaActive",e).removeClass("cxPrevAriaActive"),t.hasClass("cxPrevAriaActive")||t.addClass("cxPrevAriaActive"),t.removeClass("cxAriaActive"))},keyEventOnShow:function(){console.log("my snippet registered and runnning...");var e=this.$node;if(e.cxProp("aria")){var t=!1;if(this.data.show?t=this.data.show:this.data.cxPropShow&&(t=this.data.cxPropShow),t){var a=document.activeElement;if(event&&event.target&&("click"===event.type||"keydown"===event.type)&&(a=event.target),"BODY"!==a.tagName&&!a.querySelector(".cxSetRefocus")&&!a.classList.contains("cxSetRefocus")&&a.attributes){for(var o=!0;!a.attributes.click&&!a.attributes.onclick;)if("BODY"===(a=a.parentElement).tagName){o=!1;break}o&&($L(a).addClass("cxSetRefocus"),-1===a.tabIndex&&(a.tabIndex=0))}setTimeout((()=>{var t=e;for(t.querySelector("lyte-modal")&&(t=t.querySelector("lyte-modal"));"CRUX-LOOKUP-FILTER-VIEW"!==t.tagName&&"LYTE-MODAL"!==t.tagName;)t=t._callee;if(t&&t.component&&(t.component.childComp||"CRUX-LOOKUP-FILTER-VIEW"===t.tagName)){var a=t.component.childComp?t.component.childComp:t;a.querySelector("lyte-table, lyte-expresstable, table")&&Lyte.registeredMixins["crux-aria-table-mixin"]&&Lyte.registeredMixins["crux-aria-table-mixin"].bindEventForAria&&a.cxProp("aria")&&(a.bindAria=Lyte.registeredMixins["crux-aria-table-mixin"].bindEventForAria.bind(a),a.bindAria());var o=a.querySelectorAll("[tabindex]:not(crux-table-component [tabindex]), [click]"),i=Lyte.registeredMixins["crux-aria-lookup-mixin"];o.forEach((e=>{""!==e.attributes.tabindex&&((e.attributes.click||e.attributes.onclick)&&e.className.includes("advanceFilter")?(e.setAttribute("lt-prop-aria-keydown",!0),e.setAttribute("role","button"),i.addLabel.call(a,e)):e.attributes.click||e.attributes.onclick||i.addLabel.call(a,e))}))}}),100)}else setTimeout((()=>{if(document.querySelector(".cxSetRefocus")){var e=document.querySelector(".cxSetRefocus");-1===e.tabIndex&&(e.tabIndex=0),e.focus(),$L(".cxSetRefocus").removeClass("cxSetRefocus")}}),150)}}.observes("cxPropShow","show","cxPropAria"),setLabelForModal:function(){var e=this.$node;!e.cxProp("aria")||"CRUX-LOOKUP-FILTER-VIEW"!==e.tagName&&"CRUX-LOOKUP-MODAL"!==e.tagName||setTimeout((()=>{for(var e=this.$node,t=e;!("BODY"===e.parentElement.tagName||(e=e.parentElement).component&&e.component.parent);)if("BODY"===e.parentElement.tagName){e=t;break}var a=e.querySelectorAll("[tabindex]:not(crux-table-component [tabindex]), [click]"),o=Lyte.registeredMixins["crux-aria-lookup-mixin"];a.forEach((t=>{""!=t.attributes.tabindex&&((t.attributes.click||t.attributes.onclick)&&t.className.includes("advanceFilter")?(t.setAttribute("lt-prop-aria-keydown",!0),t.setAttribute("role","button"),t.setAttribute("label","Filter"),o.addLabel.call(e,t)):t.attributes.click||t.attributes.onclick||o.addLabel.call(e,t))}))}),500)}.on("didConnect"),addLabel:function(e){var t=Lyte.registeredMixins["crux-aria-lookup-mixin"];if(!e.ariaLabel&&-1!==e.tabIndex){var a="",o=e.querySelector("#labelText");if(e.attributes.label?(a=e.attributes.label.nodeValue,e.ariaLabel=a,$L(e).removeAttr("label")):o&&o.textContent&&""!==o.textContent.trim()?a+=o.textContent.trim():e.textContent&&""!==e.textContent.trim()?a+=e.textContent.trim():a+="icon",e._callee&&"LYTE-INPUT"===e._callee.tagName&&"search"===e._callee.ltProp("type")&&(e.ariaPlaceholder=e.placeholder,e.ariaValueMax=e.maxLength),!e.querySelector('[tabIndex = "0"]')&&e.textContent.trim().length>0){var i=e.closest("[lyte-rendered]");if(i.tagName.includes("LYTE"))switch(i.ltProp("aria",!0),i.tagName){case"LYTE-DROPDOWN":i.ltProp("ariaButton",{"aria-label":a});break;case"LYTE-CHECKBOX":i.ltProp("ariaCheckbox",{"aria-label":a});break;case"LYTE-RADIOBUTTON":i.ltProp("ariaRadio",{"aria-label":a});break;default:i.ltProp("ariaAttributes",{"aria-label":a})}else e.ariaLabel=a}e.querySelectorAll("[focusable]").length<1&&$L(e).attr("focusable","true"),t.onFocus&&(e.addEventListener("focusin",t.onFocus.bind(this)),e.addEventListener("focusout",t.onFocusOut.bind(this)))}}}),Lyte.Mixin.register("crux-aria-smart-filter-input-mixin",{onFocus:function(){var e=document.activeElement;"lv_filter_scroll"!=e.id&&(document.querySelector(".cxAriaActive")?$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive"):$L(e).addClass("cxAriaActive"))},onFocusOut:function(){document.querySelector(".cxAriaActive")&&$L(document.querySelector(".cxAriaActive")).removeClass("cxAriaActive")},filterInputKeyEvent:function(){if(document.querySelector(".lyteBodyWrapper"))"Enter"==event.key&&setTimeout((()=>{var e=this.$node.querySelectorAll('[tabIndex]:not([tabIndex][aria-label]), [type = radio]:not([tabIndex][aria-label]), [tabIndex]:not([aria-label = ""])');if(e.length>0)for(var t=0;t<e.length;t++){var a=e[t];if("INPUT"==a.tagName||"LI"==a.tagName){for(;"CRUX-SMART-FILTER-INPUT"!=a.tagName&&"LYTE-DROPDOWN"!=a.tagName;)a=a.parentElement;"LYTE-DROPDOWN"!=a.tagName&&(a=e[t])}this.addLabel.call(this,a),$L(a).attr("cxAriaSmartFilterInputFocus")||(a.addEventListener("focusin",this.onFocus),a.addEventListener("focusout",this.onFocusOut),$L(a).attr("cxAriaSmartFilterInputFocus",!0))}}),100);else{if((s=this.$node.querySelectorAll('[tabIndex]:not([tabIndex][aria-label]), [type = radio]:not([tabIndex][aria-label]), [tabIndex]:not([aria-label = ""]), [tabIndex]:not(.cxMXNFld [tabIndex])')).length>0)for(var e=0;e<s.length;e++){var t=s[e];if("radio"==t.type){for(var a=t;"DIV"!=a.tagName;)a=a.parentElement;$L(a).attr("role","radiogroup"),$L(t).attr("role","radio"),$L(t).attr("aria-labelledby",t.parentElement.querySelector(".lyteRadioLabel").id),t.checked?t.ariaChecked=!0:t.ariaChecked=!1}if("INPUT"==t.tagName||"LI"==t.tagName){for(;"CRUX-SMART-FILTER-INPUT"!=t.tagName&&"LYTE-DROPDOWN"!=t.tagName;)t=t.parentElement;"LYTE-DROPDOWN"!=t.tagName&&(t=s[e])}this.addLabel.call(this,t),$L(t).attr("cxAriaSmartFilterInputFocus")||(t.addEventListener("focusin",this.onFocus),t.addEventListener("focusout",this.onFocusOut),$L(t).attr("cxAriaSmartFilterInputFocus",!0))}var o=document.activeElement,i=!0;if(("inputId"==o.id||"LI"==o.tagName||o==this.$node.querySelector(".cxMXNFld input"))&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){for(var r=o;"LYTE-DROPDOWN"!=r.tagName;)r=r.parentElement;"multiple"==r.component.data.ltPropType&&(r=r.querySelector(".lyteDummyEventContainer")),o=r,r.focus()}var s=this.$node.querySelectorAll("[tabIndex][aria-label]:not(.cvSubOption [tabIndex][aria-label], #inputId, li, .cxMXNFld input), [type = radio][aria-label]");if(this.$node.className.includes("cvSubOption")&&(s=this.$node.querySelectorAll("[tabIndex][aria-label]:not(#inputId, li, .cxMXNFld input), [type = radio][aria-label]")),"INPUT"==o.tagName&&"text"==o.type&&("ArrowLeft"==event.key||"ArrowRight"==event.key)){i=!1;var l=o.value.length,n=event.target.selectionStart;(l==n&&"ArrowRight"==event.key||0==n&&"ArrowLeft"==event.key)&&(i=!0)}if("radio"==o.type){for(a=o;"DIV"!=a.tagName;)a=a.parentElement;$L(a).attr("role","radiogroup"),$L(o).attr("role","radio"),$L(o).attr("aria-labelledby",o.parentElement.querySelector(".lyteRadioLabel").id),o.checked?o.ariaChecked=!0:o.ariaChecked=!1}if(" "==event.key&&"radio"==o.type){for(var c=o;"LYTE-RADIOBUTTON"!=c.tagName;)c=c.parentElement;(c=c.nextElementSibling).querySelector("[tabIndex][aria-label]")&&c.querySelector("[tabIndex][aria-label]").focus()}else if(i&&event.key.includes("Arrow")){if(!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){event.preventDefault();for(e=0;e<s.length;e++)if((o==s[e]||o==s[e].parentElement)&&!s[e].querySelector(".lyteDropButtonDown, .lyteDropButtonUp, .lyteDropButtonLeft, .lyteDropButtonRight")){if(s[e].id&&"inputId"==s[e].id||s[e]==this.$node.querySelector(".cxMXNFld input")){for(r=document.activeElement;"LYTE-DROPDOWN"!=r.tagName;)r=r.parentElement;document.querySelector(".lyteDropButtonDown, .lyteDropButtonUp, .lyteDropButtonLeft, .lyteDropButtonRight")&&r.close()}var p=e;if("ArrowUp"==event.key||"ArrowDown"==event.key){for(s=this.$node;!s.className.includes("leftElements");)s=s.parentElement;for(var d=s;"CRUX-SMART-FILTER"!=d.tagName;)d=d.parentElement;d=d.querySelectorAll(".leftElements, lyte-accordion-header");for(e=0;e<d.length;e++)if(d[e].querySelector(".cxAriaActive")){p=e;"ArrowDown"==event.key&&(p=p==d.length-1?0:p+1),"LYTE-ACCORDION-HEADER"==d[p].tagName?d[p].focus():d[p].querySelector("[type = checkbox]").focus();break}event.stopImmediatePropagation();break}if("ArrowLeft"==event.key||"ArrowRight"==event.key){"ArrowLeft"==event.key?p=0==p?s.length-1:p-1:"ArrowRight"==event.key&&(p=p==s.length-1?0:p+1),s[p].focus(),"LYTE-DROPDOWN"==s[p].tagName?s[p].querySelector(".lyteDummyEventContainer").click():s[p].click();break}if(document.activeElement.id&&"inputId"==document.activeElement.id||"LI"==document.activeElement.tagName||document.activeElement==this.$node.querySelector(".cxMXNFld input")){for(var u=document.activeElement;"LYTE-DROPDOWN"!=u.tagName&&"CRUX-SMART-FILTER"!=u.tagName&&"CRUX-SMART-FILTER-INPUT"!=u.tagName;)u=u.parentElement;u.focus();break}}event.stopPropagation()}}else if("Escape"==event.key)if("LI"==document.activeElement.tagName||"inputId"==document.activeElement.id||this.$node.querySelector(".cxMXNFld input")){for(c=document.activeElement;"LYTE-DROPDOWN"!=c.tagName&&"CRUX-SMART-FILTER"!=c.tagName&&"CRUX-SMART-FILTER-INPUT"!=c.tagName;)c=c.parentElement;"multiple"==c.component.data.ltPropType&&(c=c.querySelector(".lyteDummyEventContainer")),document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")?c.close():(event.preventDefault(),"LYTE-DROPDOWN"!=c.tagName&&"LYTE-DROPDOWN"!=c.parentElement.tagName||(event.stopImmediatePropagation(),c.focus()))}else this.$node.className.includes("cvSubOption")&&this.$node.previousElementSibling.focus();else"Enter"==event.key?"checkbox"==document.activeElement.type?document.activeElement.click():setTimeout((()=>{for(var e=this.$node.querySelectorAll("[tabIndex]:not([tabIndex][aria-label])"),t=0;t<e.length;t++)this.addFocus.call(this,e[t]);document.activeElement.className.includes("cxAriaActive")||$L(document.activeElement).addClass("cxAriaActive")}),50):!event.key.includes("Page")&&" "!=event.key&&"INPUT"!=document.activeElement.tagName&&document.activeElement.querySelector("input[tabIndex]")&&document.activeElement.querySelector("input[tabIndex]").focus()}this.$node.querySelector(".cxAriaActive")&&this.addLabel.call(this,this.$node.querySelector(".cxAriaActive"))},bindEventForAriaFilterInput:function(){var e=document.activeElement,t=this.$node.querySelectorAll("[tabIndex], [type = radio]");if(t.length>0&&this.$node.cxProp("aria"))for(var a=0;a<t.length;a++){var o=t[a];if("radio"==o.type){for(var i=o;"DIV"!=i.tagName;)i=i.parentElement;$L(i).attr("role","radiogroup"),$L(o).attr("role","radio"),$L(o).attr("aria-labelledby",o.parentElement.querySelector(".lyteRadioLabel").id),o.checked?o.ariaChecked=!0:o.ariaChecked=!1,o.parentElement.onmouseup=this.radioCheck,o.parentElement.onkeydown=this.radioCheck}if("INPUT"==o.tagName){for(;"CRUX-SMART-FILTER-INPUT"!=o.tagName&&"LYTE-DROPDOWN"!=o.tagName;)o=o.parentElement;"LYTE-DROPDOWN"!=o.tagName&&(o=t[a])}this.addLabel.call(this,o),$L(o).attr("cxAriaSmartFilterInputFocus")||(o.addEventListener("focusin",this.onFocus),o.addEventListener("focusout",this.onFocusOut),$L(o).attr("cxAriaSmartFilterInputFocus",!0))}$L(this.$node).attr("cxAriaSmartFilterInputKeydown")||(this.listener=this.filterInputKeyEvent.bind(this),this.$node.addEventListener("keydown",this.listener),$L(this.$node).attr("cxAriaSmartFilterInputKeydown",!0)),setTimeout((()=>{e.focus()}),250)},radioCheck:function(){var e=document.activeElement;setTimeout((()=>{var t=document.activeElement;t.checked?(e.ariaChecked=!1,t.ariaChecked=!0):t.ariaChecked=!1}),100)},addLabel:function(e){var t,a=e;if(!e.ariaLabel&&-1!=e.tabIndex){var o=a,i=-1,r=-1;if(o.closest(".paddingElm")){var s=(o=o.closest(".paddingElm")).children;o.querySelector(".cxAriaPrefixLabel")&&(s=o.querySelectorAll(".cxAriaPrefixLabel, [tabIndex], [type=radio]"));for(var l=0;l<s.length;l++)if(s[l].className.includes("cxAriaPrefixLabel")&&(l<s.length-1&&s[l+1]==e||l>1&&s[l-1]==e)){i=l,l>1&&s[l-1]==e?r=l-1:l<s.length-1&&s[l+1]==e&&(r=l+1),o=o.querySelector(".cxAriaPrefixLabel").textContent;break}}if("checkbox"==a.type&&(a=a.parentElement),document.querySelector(".cxMXNFld .cxAriaActive")||a.className.includes("cxMXNFld")){if(document.querySelector(".cxMXNFld .cxAriaActive")){for(var n=document.querySelector(".cxMXNFld .cxAriaActive");!n.className.includes("cxMXNFld");)n=n.parentElement;a=n}a.ariaDescription=_cruxUtils.getI18n("crm.chosen.minimum.input.text","2"),t=_cruxUtils.getI18n("crm.chosen.minimum.input.text","2"),a.querySelector("input").ariaLabel=_cruxUtils.getI18n("crm.chosen.minimum.input.text","2")}else if("INPUT"==a.tagName)t=a.value?a.value:a.placeholder?a.placeholder:"-";else if(a.childNodes.length>0)if(a.querySelector("span"))t=a.querySelector("span").textContent;else if(a.querySelector("#inputId")||a.querySelector(".cxMXNFld input")){var c;a.querySelector("#inputId")?c=a.querySelector("#inputId"):a.querySelector(".cxMXNFld input")&&(c=a.querySelector(".cxMXNFld input")),c.value?t=c.value:c.placeholder&&(t=c.placeholder)}if(!t&&e.textContent&&""!=e.textContent.trim()&&(t=e.textContent.trim()),t){-1!=i&&-1!=r&&(i>r&&i-r==1?t=t+" "+o:i<r&&r-i==1&&(t=o+" "+t));var p=e.closest("[lyte-rendered]");if(p.tagName.includes("LYTE"))switch(p.ltProp("aria",!0),p.tagName){case"LYTE-DROPDOWN":p.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":p.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":p.ltProp("ariaRadio",{"aria-label":t});break;default:p.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-smart-filter-mixin",{onFocus:function(){var e=document.activeElement;if("lv_filter_scroll"!=e.id){var t=document.querySelector(".cxAriaActive");t?$L(t).removeClass("cxAriaActive"):$L(e).addClass("cxAriaActive")}if(e.tagName.includes("ACCORDION-HEADER")){var a=e.parentElement.querySelector("#"+e.attributes["aria-controls"].nodeValue)?e.parentElement.querySelector("#"+e.attributes["aria-controls"].nodeValue):e.parentElement.querySelector("#"+e.id.replace("header","body"));e.tagName.includes("ACCORDION-HEADER")&&a.tagName.includes("ACCORDION-BODY")&&a.querySelector(".noresultstyle")&&(a.querySelector(".noresultstyle").id="noResultOpt",$L(e).removeAttr("ariaLabel"),$L(e).attr("aria-labelledby",e.id+" noResultOpt"))}},onFocusOut:function(){var e=document.querySelector(".cxAriaActive");e&&$L(e).removeClass("cxAriaActive")},filterKeyEvent:function(){if(!this.$node.querySelector("crux-smart-filter-input .cxAriaActive")||event.key.includes("Page")){var e=document.activeElement,t=e.nextElementSibling.querySelectorAll("[tabIndex]:not(crux-smart-filter-input [tabIndex])");if("LYTE-ACCORDION-HEADER"===e.tagName)for(var a=0;a<t.length;a++)"false"===e.ariaExpanded?$L(t[a]).removeAttr("aria-label"):"true"===e.ariaExpanded&&this.addLabel.call(this,t[a]);var o=this.$node.querySelectorAll(".lyteAccordionActive [tabIndex][click]:not(crux-smart-filter-input [tabIndex][click]), [tabIndex][aria-label]:not(crux-smart-filter-input [tabIndex][aria-label]), .lyteAccordionActive crux-smart-filter-input:not(crux-smart-filter-input crux-smart-filter-input), #searchId #inputId");if(document.activeElement.className.includes("alertPopup")&&" "==event.key)document.querySelector(".alertPopup button").focus();else if(!document.querySelector(".lyteBodyWrapper")){var i;if(event.key.includes("Page")){if("PageUp"==event.key){if(event.preventDefault(),"CRUX-SMART-FILTER-INPUT"==o[i=0].tagName?o[i].previousElementSibling.focus():o[i].focus(),document.activeElement!=o[0])for(;document.activeElement==e;)i=i==o.length-1?-1:i,"CRUX-SMART-FILTER-INPUT"==o[++i].tagName?o[i].previousElementSibling.focus():o[i].focus()}else if("PageDown"==event.key&&(event.preventDefault(),"CRUX-SMART-FILTER-INPUT"==o[i=o.length-1].tagName?o[i].previousElementSibling.focus():o[i].focus(),document.activeElement!=o[o.length-1]))for(;document.activeElement==e;)i=0==i?o.length:i,"CRUX-SMART-FILTER-INPUT"==o[--i].tagName?o[i].previousElementSibling.focus():o[i].focus()}else{for(var r=0;r<o.length;r++)if(e==o[r]){if("ArrowUp"===event.key||"ArrowDown"===event.key||"Tab"===event.key&&"false"===e.ariaExpanded){if(event.preventDefault(),i=r,"ArrowUp"===event.key||"Tab"===event.key&&event.shiftKey){i=0==i?o.length-1:i-1;do{"CRUX-SMART-FILTER-INPUT"==o[i].tagName?o[i].querySelector("[tabIndex]").focus():o[i].focus(),document.activeElement===e&&(i=0==i?o.length:i,i--)}while(document.activeElement===e)}else if("ArrowDown"===event.key||"Tab"===event.key){i=i==o.length-1?0:i+1;do{"CRUX-SMART-FILTER-INPUT"==o[i].tagName?o[i].querySelector("[tabIndex]").focus():o[i].focus(),document.activeElement===e&&(i=i==o.length-1?-1:i,i++)}while(document.activeElement===e);event.stopImmediatePropagation()}}else" "==event.key&&this.checkbox.call(this);break}if("radio"==document.activeElement.type){for(var s=document.activeElement;"CRUX-SMART-FILTER-INPUT"!=s.tagName;)s=s.parentElement;s.querySelector("[class *= selectedRadioBtn]").focus(),event.stopImmediatePropagation()}}}}},bindEventForAriaFilter:function(){if(console.log("Filter Bind..."),this.$node.cxProp("aria")){var e,t=document.activeElement,a=this.$node;if(a.cxProp("search")){var o=a.querySelector("#searchId").querySelector("[tabIndex]");o.value&&(o.ariaLabel=o.value),o.placeholder&&(o.ariaPlaceholder=o.placeholder),o.maxLength&&(o.ariaValueMax=o.maxLength),o.role="search"}if(a.querySelector("lyte-accordion"))for(var i=a.querySelectorAll("lyte-accordion-header"),r=a.querySelectorAll("lyte-accordion-body"),s=0;s<i.length;s++){i[s].ariaLabel=i[s].textContent,e=r[s].querySelectorAll("[tabIndex]:not(crux-smart-filter-input [tabIndex])");for(var l=0;l<e.length;l++)this.addLabel.call(this,e[l])}else for(var n=(e=a.querySelectorAll("[tabIndex]:not(crux-smart-filter-input [tabIndex])")).length,c=0;l<n;c++)this.addLabel.call(this,e[c]);for(var p=a.querySelectorAll("[tabIndex][aria-label]:not(crux-smart-filter-input [tabIndex][aria-label])"),d=p.length,u=0;u<d;u++)"checkbox"===p[u].type&&(this.checkboxLis=this.checkbox.bind(this),p[u].addEventListener("click",this.checkboxLis)),p[u].addEventListener("focusin",this.onFocus),p[u].addEventListener("focusout",this.onFocusOut);this.listener=this.filterKeyEvent.bind(this),a.addEventListener("keydown",this.listener);var h=document.querySelector(".alertPopup");h&&h.addEventListener("keydown",this.alertKeyDownEvent),setTimeout((()=>{t.focus()}),100)}},alertKeyDownEvent:function(){document.activeElement.className.includes("alertPopup")&&" "==event.key&&document.querySelector(".alertPopup button").focus()},checkbox:function(){setTimeout((()=>{var e=document.querySelector(".alertPopup");e&&(e.addEventListener("keydown",this.alertKeyDownEvent),e.tabIndex=0,e.ariaLabel=document.querySelector(".alertPopup .alertSecondaryMsg").textContent,e.focus())}),550)},addLabel:function(e){var t,a=e;if(!e.ariaLabel&&-1!=e.tabIndex){if("checkbox"==a.type&&(a=a.parentElement),"INPUT"==a.tagName)a.value&&(t=a.value),a.placeholder&&(e.ariaPlaceholder=a.placeholder);else if(a.childNodes.length>0){var o=a.querySelector("span"),i=a.querySelector("#inputId"),r=a.querySelector(".cxMXNFld input");if(o)t=o.textContent;else if(i||r){var s=i||r;s.value&&(t=s.value),s.parentElement.className.includes("search")&&(s.placeholder&&(e.ariaPlaceholder=s.placeholder),s.maxLength&&(e.ariaValuemax=s.maxLength))}}if(!t&&e.textContent&&""!=e.textContent.trim()&&(t=e.textContent.trim()),t){var l=e.closest("[lyte-rendered]");if(l.tagName.includes("LYTE"))switch(l.ltProp("aria",!0),l.tagName){case"LYTE-DROPDOWN":l.ltProp("ariaButton",{"aria-label":t});break;case"LYTE-CHECKBOX":l.ltProp("ariaCheckbox",{"aria-label":t});break;case"LYTE-RADIOBUTTON":l.ltProp("ariaRadio",{"aria-label":t});break;default:l.ltProp("ariaAttributes",{"aria-label":t})}else e.ariaLabel=t}}}}),Lyte.Mixin.register("crux-aria-table-mixin",{phoneMouseOut:function(e){e.querySelector("a")&&(e.querySelector("a").style.visibility="hidden")},phoneMouseOver:function(e){e.querySelector("a")&&(e.querySelector("a").style.visibility="visible")},onFocus:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=document.activeElement,a=this,o=a.lyteTable,i=a.querySelector(".cxAriaActive");i&&$L(".cxAriaActive",a).removeClass("cxAriaActive"),t&&!$L(t).hasClass("cxAriaActive")&&$L(t).addClass("cxAriaActive");var r=o.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp"),s=r.length;if(!o.contains(event.relatedTarget)&&r&&event.target===r[s-1]){var l=r[0];if($L(l).hasClass("lyteFixedColumn")){var n=$L(l).cxGetScrollParent();n.scrollLeft=0,n.scrollTop=0}l.focus()}!i||!$L(i).attr("focusable")||i.tagName.includes("TH")||i.tagName.includes("TD")||$L(a).attr("listener")?i&&(i.tagName.includes("TH")||i.tagName.includes("TD"))&&a.querySelector(".cxAriaActive [focusable]")&&$L(a).attr("listener")&&(a.removeEventListener("keydown",e.actionCompEvent),$L(a).removeAttr("listener")):(a.addEventListener("keydown",e.actionCompEvent),$L(a).attr("listener",!0))},onFocusOut:function(){var e=this,t=$L(e.querySelector(".cxAriaActive"));t[0]&&(e.querySelector(".cxPrevAriaActive")&&$L(".cxPrevAriaActive",e).removeClass("cxPrevAriaActive"),t.hasClass("cxPrevAriaActive")||t.addClass("cxPrevAriaActive"),t.removeClass("cxAriaActive"))},keyEvent:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=event.currentTarget;!t.tagName.includes("TABLE")&&this.tagName.includes("TABLE")&&(t=this);var a=t;t.querySelector("lyte-table:not(.cxPropAriaSkip), lyte-expresstable:not(.cxPropAriaSkip), table:not(.cxPropAriaSkip)")&&(a=t.querySelector("lyte-table:not(.cxPropAriaSkip), lyte-expresstable:not(.cxPropAriaSkip), table:not(.cxPropAriaSkip)"));var o=a.cruxTable,i=a.lyteTable,r=a.parentCruxComp,s=a.parentWormHole,l=a.modalContainer,n=a.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp");if(r.tagName.includes("CRUX")&&r.cxProp("noContentClass")&&(r.querySelector("."+r.cxProp("noContentClass"))||s.querySelector("."+r.cxProp("noContentClass")))){var c=r.querySelector("."+r.cxProp("noContentClass"))?r.querySelector("."+r.cxProp("noContentClass")):s.querySelector("."+r.cxProp("noContentClass"));if(c.textContent&&""!==c.textContent){if(c.tabIndex=0,c.ariaLabel=c.textContent,$L(c).attr("cxAriaTableKeyEvent")||(c.listener=e.keyEvent.bind(a),c.addEventListener("keydown",c.listener),$L(c).attr("cxAriaTableKeyEvent",!0)),!r.cxProp("noContentClass").includes("noResultAriaComp")){var p=r.cxProp("noContentClass");p+=" noResultAriaComp",r.cxProp("noContentClass",p)}$L(c).attr("cxAriaTableFocus")||(c.addEventListener("focusin",e.onFocus.bind(a)),c.addEventListener("focusout",e.onFocusOut.bind(a)),$L(c).attr("cxAriaTableFocus",!0))}}var d,u=n.length;for(d=0;d<u;d++)e.addLabel.call(a,n[d]);o&&o.tagName.includes("CRUX")&&o.getMethods("afterAriaAdd")&&o.component.executeMethod("afterAriaAdd"),(!a.attributes.listener&&a.attributes.cxIsEditOpen||document.querySelector(".lyteBodyWrapper"))&&$L(a).attr("listener",!0),a.attributes&&!a.attributes.listener?a.querySelector(".cxAriaActive")?a.removeEventListener("keydown",e.actionCompEvent):(a.addEventListener("keydown",e.actionCompEvent),$L(a).attr("listener")):a.attributes&&a.attributes.listener&&(a.querySelector(".cxAriaActive")?a.addEventListener("keydown",e.actionCompEvent):(a.removeEventListener("keydown",e.actionCompEvent),$L(a).removeAttr("listener")));var h=r;s!==i&&(h=s);var m=h.querySelector(".cxAriaActive");if((a.querySelector(".cxAriaActive")||a.className.includes("cxAriaActive")||m&&m.className.includes("noResultAriaComp"))&&("CRUX-TABLE-COMPONENT"===a.tagName||!a.querySelector("lyte-table, lyte-expresstable, table"))){var y=a.querySelectorAll("lyte-tr, lyte-exptable-tr, tr, crux-lookupfilter-component");r&&r.tagName.includes("CRUX")&&(s&&s.querySelector(".noResultAriaComp")?y=s.querySelectorAll(".noResultAriaComp, lyte-tr, lyte-exptable-tr, tr, crux-lookupfilter-component"):r&&r.querySelector(".noResultAriaComp")&&(y=r.querySelectorAll(".noResultAriaComp, lyte-tr, lyte-exptable-tr, tr, crux-lookupfilter-component")));var x=y.length;for(d=0;d<x;d++)y[d].className.includes("noResultAriaComp")&&(s&&s.querySelector(".noResultAriaComp")?y=s.querySelectorAll(".noResultAriaComp, lyte-tr:not(lyte-tr.cxUserLookupEmptyRow), lyte-exptable-tr:not(lyte-exptable-tr.cxUserLookupEmptyRow), tr:not(tr.cxUserLookupEmptyRow), crux-lookupfilter-component"):r&&r.querySelector(".noResultAriaComp")&&(y=r.querySelectorAll(".noResultAriaComp, lyte-tr:not(lyte-tr.cxUserLookupEmptyRow), lyte-exptable-tr:not(lyte-exptable-tr.cxUserLookupEmptyRow), tr:not(tr.cxUserLookupEmptyRow), crux-lookupfilter-component")));var f=new Event("mouseover"),g=new Event("mouseout"),P=$L(a),v=!1;if(!P.attr("listener")||"false"===P.attr("listener"))if(event.key.includes("Arrow")&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){for(var b=y.length,S=0;S<b;S++){var D,L=y[S].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td"),C=0;if(y[S].className&&y[S].className.includes("noResultAriaComp")&&y[S].className.includes("cxAriaActive")&&("ArrowUp"===event.key||"ArrowDown"===event.key))for(L=y[S],D=S;L.className.includes("cxAriaActive");){"ArrowDown"===event.key&&D===b-1?D=0:"ArrowUp"===event.key&&0===D?D=b-1:"ArrowDown"===event.key?D+=1:"ArrowUp"===event.key&&(D-=1),y[D]&&y[D].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td").length>0&&y[D].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[0].focus()}else for(var A=L.length,w=a.querySelector(".cxAriaActive"),k=0;k<A;k++)if(w!==L[k]&&L[k].querySelector(".cxAriaActive")&&L[k].focus(),w===L[k]){var T=document.activeElement;if(D="ArrowUp"===event.key||"ArrowDown"===event.key?S:k,"ArrowUp"===event.key||"ArrowDown"===event.key){event.preventDefault();do{y[D]&&y[D].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k]&&y[D].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k].dispatchEvent(g),y[D].dispatchEvent(g),"ArrowUp"===event.key?D=0===D?b-1:D-1:"ArrowDown"===event.key&&(D=D===b-1?0:D+1),y[D].dispatchEvent(f),y[D]&&y[D].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k]?(y[D].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k].dispatchEvent(f),y[D].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[k].focus()):y[D].className.includes("noResultAriaComp")&&(y[D].dispatchEvent(f),y[D].focus())}while(document.activeElement===T&&S!==D);C=1;break}if("ArrowLeft"===event.key||"ArrowRight"===event.key){event.preventDefault();do{y[S]&&y[S].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[D]&&y[S].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[D].dispatchEvent(g),"ArrowLeft"===event.key?D=0===D?A-1:D-1:"ArrowRight"===event.key&&(D=D===A-1?0:D+1),y[S].dispatchEvent(f),y[S]&&y[S].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[D]&&(y[S].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[D].dispatchEvent(f),y[S].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[D].focus())}while(document.activeElement===T&&k!==D);C=1;break}}if(1===C)break}event.stopImmediatePropagation()}else if(" "===event.key||"Enter"===event.key){for(var N=document.activeElement;!N.tagName.includes("TH")&&!N.tagName.includes("TD")&&"BODY"!==N.tagName;)N=N.parentElement;for(var _=N;!_.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==_.tagName&&"BODY"!==_.tagName;)_=_.parentElement;if(_.dispatchEvent(f),event.target===N){var U;if(event.preventDefault(),e.clickOnComp(N),N&&(U=N.querySelector("[focusable]:not(.cxSkipFocusable)")),U)if("checkbox"===U.type){var E=U;$L(_).on("click",(e=>{"checkbox"===document.activeElement.type&&e.stopImmediatePropagation()})),setTimeout((()=>{E.focus()}),100)}else!$L(U).attr("click")&&N.querySelector("[focusable]").tabIndex?(N.dispatchEvent(f),U.focus()):U.focus();else N.attributes&&(N.attributes.click||N.attributes.onclick)?N.click():N.focus();a.attributes&&!a.attributes.listener&&(a.addEventListener("keydown",e.actionCompEvent),a.setAttribute("listener",!0)),l&&l.component&&l.component.parent&&"LYTE-MODAL"===l.component.parent.tagName&&l.component.parent.ltProp("closeOnEscape","false")}}else if("Tab"===event.key){if(v=!0,!a.querySelector(".cxAriaActive")){var M=a.querySelector("[listener]");!M||M.tagName.includes("TH")||M.tagName.includes("TD")||(M.removeEventListener(e.subActionCompEvent),$L(M).removeAttr("listener")),a.attributes&&a.attributes.listener&&(M.tagName.includes("TH")||M.tagName.includes("TD"))&&(a.removeEventListener("keydown",e.actionCompEvent),$L(a).removeAttr("listener"))}var I=a.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp, [focusable]");if(a.querySelector(".cxPrevAriaActive")&&$L(".cxPrevAriaActive",a).removeClass("cxPrevAriaActive"),event.shiftKey)I[0].focus({preventScroll:!0});else I[I.length-1].focus({preventScroll:!0})}var q=$L(".cxAriaActive",i);if(q&&!v){var R=q[0].offsetLeft,F=q[0].offsetWidth;if(q.cxGetScrollParent){var O=q.cxGetScrollParent();O&&(O.scrollLeft>R?O.scrollLeft=R:R+F>O.scrollLeft+O.offsetWidth&&(O.scrollLeft+=R+F-(O.scrollLeft+O.offsetWidth)))}}if(a.querySelector(".lyteTableFixed")){for(var H=document.activeElement,$=H,B=H;!B.tagName.includes("TR");)(B.tagName.includes("TD")||B.tagName.includes("TH"))&&($=B),B=B.parentElement;var V=Array.from(B.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, [focusable]")),Y=V.indexOf(H),W=V[Y+1];if(event.shiftKey&&(W=V[Y-1]),W)for(;!W.tagName.includes("TD")&&!W.tagName.includes("TH");)W=W.parentElement;if(H.className&&!H.className.includes("lyteTableFixed")||"Tab"===event.key&&W&&W.className&&!W.className.includes("lyteTableFixed")){"Tab"===event.key&&($=W);var j=H,z=H;for(j.parentElement&&(z=j.parentElement.querySelector("[scroll]"));!z&&j!==a;)(j=j.parentElement)&&(z=(z=j.parentElement).querySelector("[scroll]"));for(var K=B.querySelectorAll(".lyteTableFixed"),J=K.length-1,X=$L(K[J]);"none"===X.css("display")&&0!==J;)J--;var Q=K[J].clientWidth,Z=X.offset(),G=$L($).offset();if($&&!$.className.includes("lyteFixedColumn")&&Z&&Z.left&&G&&G.left&&G.left<Z.left+Q){var ee=$L(j).scrollLeft()-(Z.left-G.left+Q);$L(j).scrollLeft(ee)}}}}},actionCompEvent:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=event.currentTarget,a=t.modalContainer,o=t.querySelectorAll("lyte-tr, lyte-exptable-tr, tr");if(t.attributes&&!t.attributes.listener)t.removeEventListener("keydown",e.actionCompEvent);else{for(var i=document.activeElement;"CRUX-LOOKUPFILTER-COMPONENT"!==i.tagName&&!i.tagName.includes("TR")&&"BODY"!==i.tagName;)i=i.parentElement;if(!document.querySelector(".lyteBodyWrapper")&&("CRUX-LOOKUPFILTER-COMPONENT"!==i.tagName||"ArrowUp"===event.key||"ArrowDown"===event.key)){var r=new Event("mouseover"),s=new Event("mouseout"),l=document.activeElement,n=!0;if("INPUT"===l.tagName&&"text"===l.type&&("ArrowLeft"===event.key||"ArrowRight"===event.key)){n=!1;var c=l.value.length,p=event.target.selectionStart;(c===p&&"ArrowRight"===event.key||0===p&&"ArrowLeft"===event.key)&&(n=!0)}if(n&&event.key.includes("Arrow")&&!document.querySelector(".lyteDropdownDown, .lyteDropdownUp, .lyteDropdownRight, .lyteDropdownLeft")){var d,u,h,m,y;if(event.preventDefault(),"ArrowLeft"===event.key||"ArrowRight"===event.key){var x=document.activeElement;for(h=x;!x.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==x.tagName&&"BODY"!==x.tagName;)(x.tagName.includes("TH")||x.tagName.includes("TD"))&&(h=x),x=x.parentElement;var f=Array.from(x.querySelectorAll("[focusable]:not(.cxSkipFocusable)"));if(h.attributes&&h.attributes.cxFocusableSelector&&h.attributes.cxFocusableSelector.value){var g=$L(h).attr("cxFocusableSelector");if(g){var P=document.querySelector(g);P&&(f.push(P),e.addLabel.call(t,h))}}var v=f.length;for(d=0;d<v;d++)if(document.activeElement===f[d]&&!f[d].querySelector("[focusable]:not(.cxSkipFocusable)")){m=f[d],u=d;do{for("ArrowLeft"===event.key?u=0===u?v-1:u-1:"ArrowRight"===event.key&&(u=u===v-1?0:u+1),$L(f[u]).attr("click")||x.dispatchEvent(r),y=f[u];!m.tagName.includes("TD")&&!m.tagName.includes("TH")||!y.tagName.includes("TD")&&!y.tagName.includes("TH");)m.tagName.includes("TD")||m.tagName.includes("TH")||(m=m.parentElement),y.tagName.includes("TD")||y.tagName.includes("TH")||(y=y.parentElement);f[u].focus()}while(l===document.activeElement&&d!==u);break}}else{var b=o.length;for(d=0;d<b;d++)if(o[d].querySelector(".cxAriaActive")){for(var S=!1,D=(h=o[d].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")).length,L=0;L<D;L++)if(h[L]&&h[L].className&&h[L].className.includes("cxAriaActive")||h[L].querySelector(".cxAriaActive")){m=document.activeElement,o[u=d].dispatchEvent(s),"ArrowUp"===event.key?u=0===u?b-1:u-1:"ArrowDown"===event.key&&(u=u===b-1?0:u+1);var C=o[u].querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")[L];for(o[u].dispatchEvent(r),y=C;!m.tagName.includes("TD")&&!m.tagName.includes("TH")||!y.tagName.includes("TD")&&!y.tagName.includes("TH");)m.tagName.includes("TD")||m.tagName.includes("TH")||(m=m.parentElement),y.tagName.includes("TD")||y.tagName.includes("TH")||(y=y.parentElement);!C.querySelector("[focusable]:not(.cxSkipFocusable)")||C.className.includes("cxLookupFieldList")||y.querySelector(".cxSetFocus")?C.attributes.focusable&&C.focus():C.querySelector("[focusable]:not(.cxSkipFocusable)").focus(),S=!0;break}if(S)break}}event.stopPropagation()}else if(" "===event.key||"Enter"===event.key){event.preventDefault();for(var A=document.activeElement,w=A;!w.tagName.includes("TR")&&"BODY"!==w.tagName;)w=w.parentElement;if("checkbox"===A.type){var k=A;$L(w).on("click",(e=>{"checkbox"===document.activeElement.type&&e.stopImmediatePropagation()})),setTimeout((()=>{k.focus()}),100)}else A.dispatchEvent(r),A.click();setTimeout((()=>{document.querySelector("[pos]:not(.lyteMenuClosed, .lyteMenuHidden)")&&(A.addEventListener("keydown",e.subActionCompEvent),A.setAttribute("listener",!0),A.table=t)}),100),event.stopImmediatePropagation()}else if("Escape"===event.key){for(var T=document.activeElement,N=T,_=N;!_.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==_.tagName&&"BODY"!==_.tagName;)(_.tagName.includes("TH")||_.tagName.includes("TD"))&&(N=_),_=_.parentElement;N.querySelector(".cxSetFocus")&&N.querySelector(".cxCloseEdit")&&N.querySelector(".cxCloseEdit").click(),event.target===T&&(_.dispatchEvent(s),N.focus(),N.dispatchEvent(r),t.attributes&&t.attributes.listener&&(t.removeEventListener("keydown",e.actionCompEvent),$L(t).removeAttr("listener")),!t.attributes.listener&&!t.querySelector("[subKeyListen]")&&a&&a.component&&a.component.parent&&"LYTE-MODAL"===a.component.parent.tagName&&a.component.parent.ltProp("closeOnEscape","true"))}else if("Tab"===event.key){var U=t.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp, [focusable]");if(event.shiftKey)U[0].focus();else U[U.length-1].focus()}}}},subActionCompEvent:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=event.currentTarget.table,a=document.activeElement,o=t.parentCruxComp;if(o.component&&o.component.data&&o.component.data.showSortableOptions){var i=o.querySelector("#sortOrderMenu");if(i&&i.component&&i.component.childComp){a&&"sortOptionSelection"!==$L(a).attr("aria-activedescandant")&&a.setAttribute("aria-activedescendant","sortOptionSelection");var r=i.component.childComp.querySelector(".lyteMenuSelection");r&&"sortOptionSelection"!==r.id&&($L("#sortOptionSelection").removeAttr("id"),r.id="sortOptionSelection")}}t.attributes&&t.attributes.listener&&(t.removeEventListener("keydown",e.actionCompEvent),$L(t).removeAttr("listener"));var s=new Event("mouseover");if("Escape"===event.key)t.attributes&&!t.attributes.listener&&(t.addEventListener("keydown",e.actionCompEvent),$L(t).attr("listener",!0)),a.dispatchEvent(s),a.focus(),a.attributes&&a.attributes.listener&&(a.removeEventListener("keydown",e.subActionCompEvent),$L(a).removeAttr("listener"));else if(event.key.includes("Arrow"))event.preventDefault();else if("Tab"===event.key){var l=t.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td, .noResultAriaComp, [focusable]");if(event.shiftKey)l[0].focus();else l[l.length-1].focus()}else{0===document.querySelectorAll("[pos]:not(.lyteMenuClosed)").length&&(t.attributes&&!t.attributes.listener&&(t.addEventListener("keydown",e.actionCompEvent),$L(t).attr("listener",!0)),a.dispatchEvent(s),a.focus(),a.attributes&&a.attributes.listener&&(a.removeEventListener("keydown",e.subActionCompEvent),$L(a).removeAttr("listener")))}event.stopImmediatePropagation()},bindEventForAria:function(){console.log("bind");var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=this;this.$node&&(t=this.$node),setTimeout((()=>{var a=t.querySelectorAll("lyte-table:not(.cxPropAriaSkip), lyte-expresstable:not(.cxPropAriaSkip), table:not(.cxPropAriaSkip)");if(t)for(var o=a.length,i=0;i<o;i++){var r=a[i];if(("LYTE-TABLE"===r.tagName||"LYTE-EXPRESSTABLE"===r.tagName)&&r.ltProp("aria")||$L(r).attr("lt-prop-aria")||"CRUX-TABLE-COMPONENT"===r.tagName&&r.cxProp("aria")||$L(r).attr("cx-prop-aria")){for(var s=r,l=r,n=r,c=r,p=r;"BODY"!==p.tagName&&"TABLE"!==r.tagName;){if(p.tagName.includes("CRUX")&&"CRUX-TABLE-COMPONENT"!==p.tagName&&(n=p),"LYTE-TABLE"===p.tagName||"LYTE-EXPRESSTABLE"===p.tagName)l=p;else if("CRUX-TABLE-COMPONENT"===p.tagName)s=p;else if(p._callee&&p._callee.component&&p._callee.component.childComp&&p._callee.component.childComp===n)c=p;else if("BODY"===p.tagName)break;if(!p._callee)break;p=p._callee}"CRUX-TABLE-COMPONENT"===n.tagName&&(s=n),s.cruxTable=s,s.lyteTable=l,s.parentCruxComp=n,s.parentWormHole=c,l.cruxTable=s,l.lyteTable=l,l.parentCruxComp=n,l.parentWormHole=c,r.lyteTable&&r.lyteTable.tagName.includes("LYTE")&&r.lyteTable.ltProp("tabIndex","-1");for(var d=r.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td"),u=0,h=d.length,m=0;m<h;m++){if(!$L(d[m]).attr("lt-prop-data-tabindex")&&($L(r).attr("cx-prop-group-index")||n.tagName.includes("CRUX")&&n.cxProp("groupIndex"))){var y=n.tagName.includes("CRUX")?n.cxProp("groupIndex"):$L(r).attr("cx-prop-group-index");d[m].setAttribute("lt-prop-data-tabindex","group"+y+"-"+u),u++}0===d[m].tabIndex&&d[m].ariaLabel||e.addLabel.call(r,d[m]),d[m].querySelector(".cxSetFocus")&&e.clickOnComp(this,d[m])}if(s.tagName.includes("CRUX")&&s.getMethods("afterAriaAdd")&&s.component.executeMethod("afterAriaAdd"),n.tagName.includes("CRUX")&&n.cxProp("noContentClass")&&n.querySelector("."+n.cxProp("noContentClass"))){var x=s.querySelector("."+s.cxProp("noContentClass"));if(x.textContent&&""!==x.textContent){if(x.tabIndex=0,x.ariaLabel=x.textContent,!s.cxProp("noContentClass").includes("noResultAriaComp")){var f=s.cxProp("noContentClass");f+=" noResultAriaComp",s.cxProp("noContentClass",f)}$L(x).attr("focusable")||$L(x).attr("focusable",!0),$L(x).attr("cxAriaTableFocus")||(x.addEventListener("focusin",e.onFocus.bind(r)),x.addEventListener("focusout",e.onFocusOut.bind(r)),$L(x).attr("cxAriaTableFocus",!0))}}if((!$L(t).attr("cxAriaTableFocusableParent")||t&&t.attributes&&t.attributes.cxAriaTableFocusableParent&&!t.attributes.cxAriaTableFocusableParent.nodeValue)&&(document.addEventListener("click",e.clickOnDoc),document.addEventListener("keydown",e.escOnDoc),$L(t).attr("cxAriaTableFocusableParent",!0)),$L(r).attr("cxAriaTableKeydown")||(r.listener=e.keyEvent.bind(r),r.addEventListener("keydown",r.listener),r.addEventListener("click",e.clickOnTable),r._this=this,$L(r).attr("cxAriaTableKeydown",!0)),!r.attributes||!r.attributes.listener||r.querySelector(".cxAriaActive")&&$L(".cxAriaActive",r).attr("focusable")||($L(r).removeAttr("listener"),r.removeEventListener("keydown",e.actionCompEvent)),document.querySelector("[cxAriaTableFocusableParent]")){var g=document.querySelector("[cxAriaTableFocusableParent]");if(g&&g.component){var P=g=g.component;for(P&&P.$node&&(P=P.$node);P&&(!P.component||!P.component.parent)&&"LYTE-WORMHOLE"!==P.tagName&&"BODY"!==P.tagName;)P=P.parentElement;s.modalContainer=P,l.modalContainer=P}}}}}),100)},clickOnComp:function(e){var t=Lyte.registeredMixins["crux-aria-table-mixin"],a=!1;setTimeout((()=>{if(e.childElementCount>0){for(let[t,o]of Object.entries(e.children))if("none"!==$L(o).css("display")){a=!0;break}}else e.textContent&&(a=!0);for(var o=e;"BODY"!==o.tagName&&"LYTE-TABLE"!==(o=o.parentElement).tagName&&"LYTE-EXPRESSTABLE"!==o.tagName&&"TABLE"!==o.tagName;);if(a){var i=document.activeElement.closest("[focusable]");if(!e.querySelector(".cxSetFocus")&&i&&i===e&&$L(e).addClass("cxSetFocus"),e.className.includes("cxSetFocus")||e.querySelector(".cxSetFocus")){var r=e;r.querySelector(".cxSetFocus")&&(r=r.querySelector(".cxSetFocus")),r.querySelectorAll("[tabIndex], input, [onclick]").forEach((e=>{var a=$L(e);if("none"!==a.css("display")&&"hidden"!==a.css("visibility")&&!e.className.includes("hidden")&&-1!==e.tabindex&&(a.attr("focusable",!0),(e.tagName.includes("TD")||e.tagName.includes("TH"))&&-1===e.tabIndex&&(e.tabIndex=0,!e.ariaLabel)))if(e.value){var i=e.value;i&&(e.ariaLabel=i)}else e.textContent&&""!==e.textContent.trim()&&(e.ariaLabel=e.textContent.trim());e.attributes&&e.attributes.onclick&&$L(e).on("click",(()=>{r.focus(),("LYTE-TABLE"===o.tagName||"LYTE-EXPRESSTABLE"===o.tagName||"TABLE"===o.tagName)&&e.attributes&&o.attributes.listener&&(o.removeEventListener("keydown",t.actionCompEvent),$L(o).removeAttr("listener")),o.querySelectorAll("[nonFocusable]").forEach((e=>{(e.tagName.includes("TH")||e.tagName.includes("TD"))&&o&&o.attributes&&!o.attributes.listener&&($L(e).attr("focusable","true"),$L(e).removeAttr("nonFocusable"))}))})),r.querySelectorAll("[focusable]:not(.cxSkipFocusable)").forEach((e=>{e.querySelector("[focusable]:not(.cxSkipFocusable)")&&$L(e).removeAttr("focusable")}))}))}}}),500)},clickOnTable:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=document.activeElement,a=event.currentTarget;event.target;setTimeout((()=>{e.addLabel.call(a,t);var o=a.cruxTable,i=a.lyteTable,r=a.parentCruxComp,s=a.modalContainer;if(o.tagName.includes("CRUX")&&o.getMethods("afterAriaAdd")&&o.component.executeMethod("afterAriaAdd"),(t=document.activeElement).attributes&&t.attributes.focusable&&(!t.tagName.includes("TD")&&!t.tagName.includes("TH")||r.component&&r.component.data&&r.component.data.showSortableOptions)&&a.querySelector(".cxAriaActive:not(crux-lookupfilter-component .cxAriaActive)")){if(r.component&&r.component.data&&r.component.data.showSortableOptions){var l=r.querySelector("#sortOrderMenu");if(l&&l.component&&l.component.childComp){t&&"sortOptionSelection"!==$L(t).attr("aria-activedescandant")&&t.setAttribute("aria-activedescendant","sortOptionSelection");var n=l.component.childComp.querySelector(".lyteMenuSelection");n&&"sortOptionSelection"!==n.id&&($L("#sortOptionSelection").removeAttr("id"),n.id="sortOptionSelection")}}i.attributes&&!i.attributes.listener&&(i.addEventListener("keydown",e.actionCompEvent),$L(i).attr("listener",!0)),t.attributes&&!t.attributes.listener&&setTimeout((()=>{document.querySelector("[pos]:not(.lyteMenuClosed, .lyteMenuHidden)")&&(t.addEventListener("keydown",e.subActionCompEvent),$L(t).attr("listener",!0),t.table=a)}),100)}else!t.tagName.includes("TD")&&!t.tagName.includes("TH")||t.querySelector("[focusable]:not(.cxSkipFocusable)")||t.attributes.click||t.attributes.onclick||t.querySelector("[focusable]:not(lyte-td[focusable], lyte-th[focusable], lyte-exptable-td[focusable], lyte-exptable-th[focusable], td[focusable], th[focusable], .cxSkipFocusable)")||$L(i).removeAttr("listener");var c;new Event("mouseover"),new Event("mouseout");if(c=document.querySelector(".cxAriaActive")?document.querySelector(".cxAriaActive"):document.querySelector(".cxPrevAriaActive")){for(var p=c;!p.tagName.includes("TR")&&"CRUX-LOOKUPFILTER-COMPONENT"!==p.tagName&&"BODY"!==p.tagName;)(p.tagName.includes("TH")||p.tagName.includes("TD"))&&p,p=p.parentElement;!i.attributes.listener&&!i.querySelector("[subKeyListen]")&&s&&s.component&&s.component.parent&&"LYTE-MODAL"===s.component.parent.tagName&&!c.attributes.focusable?s.component.parent.ltProp("closeOnEscape","true"):s&&s.component&&s.component.parent&&s.component.parent.ltProp("closeOnEscape")&&s.component.parent.ltProp("closeOnEscape","false"),"CRUX-LOOKUPFILTER-COMPONENT"===p.tagName&&p.attributes.listener&&$L(p).removeAttr("listener")}}),300)},clickOnDoc:function(){var e=Lyte.registeredMixins["crux-aria-table-mixin"],t=document.querySelector("[cxAriaTableFocusableParent]");if(t&&"hidden"!==$L(t).css("visibility")){var a=document.activeElement,o=event.target;if("BODY"===a.tagName&&document.querySelector("lyte-table .cxPrevAriaActive, lyte-expresstable .cxPrevAriaActive, table .cxPrevAriaActive, lyte-table .cxAriaActive, lyte-expresstable .cxAriaActive, table .cxAriaActive")){for(o=document.querySelector(".cxPrevAriaActive");"TABLE"!==o.tagName&&"LYTE-TABLE"!==o.tagName&&"LYTE-EXPRESSTABLE"!==o.tagName&&"BODY"!==(o=o.parentElement).tagName;);var i=o.lyteTable;o.removeEventListener("keydown",e.actionCompEvent),o.attributes.listener&&$L(o).removeAttr("listener"),i.removeEventListener("keydown",e.actionCompEvent),i.attributes.listener&&$L(i).removeAttr("listener"),"BODY"===a.tagName&&(i.querySelector(".cxAriaActive")?a=i.querySelector(".cxAriaActive"):i.querySelector(".cxPrevAriaActive")&&(a=i.querySelector(".cxPrevAriaActive"))),a.removeEventListener("keydown",e.subActionCompEvent),a.attributes.listener&&$L(a).removeAttr("listener")}setTimeout((()=>{t&&"hidden"!==$L(t).css("visibility")||(document.removeEventListener("keydown",e.escOnDoc),document.removeEventListener("click",e.clickOnDoc),$L(t).removeAttr("cxAriaTableFocusableParent"))}),100)}setTimeout((()=>{t&&"hidden"!==$L(t).css("visibility")||(document.removeEventListener("keydown",e.escOnDoc),document.removeEventListener("click",e.clickOnDoc),t&&"hidden"===$L(t).css("visibility")&&$L(t).attr("cxAriaTableFocusableParent",!1))}),100)},addLabel:function(e){(e.tagName.includes("TD")||e.tagName.includes("TH"))&&-1===e.tabIndex&&(e.tabIndex=0);var t=Lyte.registeredMixins["crux-aria-table-mixin"],a=this;this.$node&&(a=this.$node);var o=a.cruxTable,i=a.lyteTable,r=a;i.tagName.includes("LYTE")&&"TABLE"!==r.tagName&&(r=i);var s=!1;if(e.childElementCount>0){for(let[t,a]of Object.entries(e.children))if("none"!==$L(a).css("display")){s=!0;break}}else(e.textContent||"none"!==$L(e).css("display"))&&(s=!0);var l=e;if(e.tagName.includes("TD")||e.tagName.includes("TH"))for(;!l.tagName.includes("TR");)l=l.parentElement;if(s){if(!(e.querySelector("table")||e.querySelector("lyte-table")||e.querySelector("lyte-expresstable"))){var n="",c="";if(o&&o.component&&o.component.data&&o.component.data.cxPropModule&&moduleRecordMapping[o.component.data.cxPropModule]&&moduleRecordMapping[o.component.data.cxPropModule].display_field&&moduleRecordMapping[o.component.data.cxPropModule].display_field.id&&!e.tagName.includes("TH"))n=moduleRecordMapping[o.component.data.cxPropModule].display_field.id,document.getElementById(n)||(n=moduleRecordMapping[o.component.data.cxPropModule].fields.filterBy({api_name:"Last_Name"})[0].id),document.getElementById(n)&&(c=document.getElementById(n)._cx.itemIndex);else if(i&&i.id.includes("cruxUserLookupTable")&&o&&o._callee){for(var p,d=o._callee;!d.tagName.includes("CRUX");)if("BODY"===(d=d._callee).tagName){d=o._callee;break}if(d.tagName.includes("CRUX")){var u=(d=d.component.data.cxPropHeader).length;for(p=0;p<u;p++)if("full_name"===d[p].systemValue){n=d[p].displayValue;break}}var h=r.querySelectorAll("lyte-th, lyte-exptable-th, th"),m=h.length;for(p=0;p<m;p++)h[p].textContent===n&&(c=p)}var y=l.querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td"),x="";if(e.tagName.includes("TD")&&(o.tagName.includes("CRUX")||i.tagName.includes("LYTE"))){var f="",g="";o.tagName.includes("CRUX")&&o.component&&o.component.data&&o.component.data.cxPropHeaderRowId?(f=o.component.data.cxPropHeaderRowId,g=o.querySelector("#"+f).querySelectorAll("lyte-th, lyte-td, lyte-exptable-th, lyte-exptable-td, th, td")):r.querySelectorAll("lyte-th, lyte-exptable-th, th")&&(g=r.querySelectorAll("lyte-th, lyte-exptable-th, th")),y.forEach(((t,a)=>{t===e&&g[a]&&""!==g[a].textContent.trim()&&(x+=g[a].textContent.trim())}))}var P=x.length;P>0&&(x=x.trim()+" ");var v=e.querySelector("[lt-prop-title]"),b=e.querySelector("#labelText");if((e.querySelector("lyte-checkbox")||e.querySelector("lyte-radiobutton"))&&""!==c)x=x.trim(),x+="select record ",y.forEach(((e,t)=>{t===c&&(x+=e.textContent.trim())}));else if(e.tagName.includes("TH"))b?x+=b.textContent.trim():e.textContent.trim()?x+=e.textContent.trim():e.attributes&&e.attributes["lt-prop-title"]&&e.attributes["lt-prop-title"].nodeValue?x+=e.attributes["lt-prop-title"].nodeValue.trim():v&&v.attributes&&v.attributes["lt-prop-title"]&&v.attributes["lt-prop-title"].nodeValue&&(x+=v.attributes["lt-prop-title"].nodeValue.trim());else if(!e.tagName.includes("TH")&&!e.tagName.includes("TD")){for(var S=e;!S.tagName.includes("TH")&&!S.tagName.includes("TD")&&!((S=S.parentElement).tagName.includes("TR")||S.tagName.includes("BODY")||S.tagName.includes("TABLE")););(S.tagName.includes("TH")||S.tagName.includes("TD"))&&S.ariaLabel&&!e.ariaLabel&&""===x&&(x=S.ariaLabel.trim())}if((P=x.length)>0&&(x=x.trim()+" "),e.querySelector("[tabIndex]"))if(e.querySelector("[tabIndex]").tagName.includes("CRUX")||e.querySelector("[tabIndex]").tagName.includes("LYTE")){var D=e.querySelector("[tabIndex]").tagName.split("-")[1];x+=D.trim()}else x.includes("select")||(x=x.trim(),e.querySelector("a")||e.querySelector("[tabIndex]").className.includes("link")||e.querySelector("[tabIndex]").className.includes("Link")?x+=" link":""!==e.textContent.trim()&&(x+=" text"));var L=Array.from(e.querySelectorAll("[tabIndex]:not(.cxSkipFocusable), [click]:not(.cxSkipFocusable), [focus]:not(.cxSkipFocusable), [focusable]:not(.cxSkipFocusable), crmutil-icon:not(.cxSkipFocusable), a:not(.cxSkipFocusable), button:not(.cxSkipFocusable)"));if(e.attributes&&e.attributes.cxFocusableSelector&&e.attributes.cxFocusableSelector.value){var C=$L(e).attr("cxFocusableSelector");if(C){var A=document.querySelector(C);A&&L.push(A)}}var w=L.length;if(w>0)for(var k=0;k<w;k++){if(L[k].tagName.includes("LYTE")||L[k]._callee&&L[k]._callee.tagName.includes("LYTE")){var T=L[k];!L[k].tagName.includes("LYTE")&&L[k]._callee.tagName.includes("LYTE")&&(T=L[k]._callee),T.component.data.ltPropAria||T.ltProp("aria",!0),x.includes("text")?x=x.replace("text","").trim():x.includes("link")&&(x=x.replace("link","").trim()),x=x.trim(),"LYTE-DROPDOWN"===T.tagName?T.ltProp("ariaButton",{"aria-label":x}):"LYTE-CHECKBOX"===T.tagName?T.ltProp("ariaCheckbox",{"aria-label":x}):"LYTE-RADIOBUTTON"===T.tagName?T.ltProp("ariaRadio",{"aria-label":x}):T.tagName.includes("LYTE")&&T.ltProp("ariaAttributes",{"aria-label":x})}for(var N=0;N<w;N++)if("none"!==$L(L[N]).css("display")&&L[k]!==L[N])for(var _=L[N];!(_.tagName.includes("TH")||_.tagName.includes("TD")||_.tagName.includes("TR")||"BODY"===_.tagName);){if(_===L[k]){$L(L[k]).removeAttr("focusable"),$L(L[k]).attr("nonFocusable","true");break}_=_.parentElement}if(!$L(L[k]).attr("nonFocusable")){var U=L[k];if(!U.querySelector("[tabindex][aria-label]:not([focusable], .cxSkipFocusable)")&&(U.attributes&&!U.attributes.focusable&&-1!==U.tabIndex&&($L(U).attr("focusable","true"),U.attributes.tabindex||$L(U).attr("tabindex",U.tabIndex)),(U.tagName.includes("TD")||U.tagName.includes("TH"))&&-1===U.tagName&&(U.tabIndex=0),x&&(e.ariaLabel=x.replace(/ +/g," ").trim()),!U.ariaLabel))if(U.className.includes("cxTableSortIcon"))U.ariaLabel="Column Options";else if(U.textContent&&""!==U.textContent.trim())U.ariaLabel=U.textContent.replace(/ +/g," ").trim();else if(!U.tagName.includes("TH")&&!U.tagName.includes("TD")){for(var E=U;!E.tagName.includes("TH")&&!E.tagName.includes("TD")&&!((E=E.parentElement).tagName.includes("TR")||E.tagName.includes("BODY")||E.tagName.includes("TABLE")););if((E.tagName.includes("TH")||E.tagName.includes("TD"))&&E.ariaLabel&&!U.ariaLabel){var M=E.ariaLabel;M.includes("text")?M=M.replace("text",""):M.includes("link")&&(M=M.replace("link",""))}}U.attributes&&U.attributes.focusable&&U.querySelector("[focusable]:not(.cxSkipFocusable)")&&($L(U).removeAttr("[focusable]"),U.querySelectorAll("[focusable]:not(.cxSkipFocusable)").forEach((e=>{e.querySelector("[focusable]:not(.cxSkipFocusable)")&&$L(e).removeAttr("[focusable]")})))}}else $L(e).attr("focusable","true");var I,q=e.textContent.trim();q&&(I=q.length),(!e.querySelector('[tabIndex = "0"]')&&I&&I>0||x)&&((e.tagName.includes("TD")||e.tagName.includes("TH"))&&-1===e.tagName&&(e.tabIndex=0),x&&(e.ariaLabel=x.replace(/ +/g," ").trim()));var R,F=e.querySelectorAll("[focusable]:not(.cxSkipFocusable)");F&&(R=F.length),!(R&&R<1)||r.attributes.listener&&$L(e).attr("nonFocusable")||($L(r).attr("cxIsEditOpen")&&$L(e).attr("focusable")?$L(e).removeAttr("focusable"):$L(r).attr("cxIsEditOpen")||$L(e).attr("focusable","true"))}$L(e).attr("cxAriaTableFocus")||(e.addEventListener("focusin",t.onFocus.bind(r)),e.addEventListener("focusout",t.onFocusOut.bind(r)),$L(e).attr("cxAriaTableFocus",!0))}}});
