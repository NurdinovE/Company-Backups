store.registerModel("crm_social_brand",{brands:Lyte.attr("array")},{actions:{authenticate:{},importAction:{},search:{}}}),store.registerAdapter("crm_social_brand",{namespace:"crm/v2/settings/social/",buildURL:function(e,r,a,t,o,c,n){return o=o.replace(e,"brands"),"string"==typeof n?o=o.replace("/brands","/portals/"+n+"/brands"):"authenticate"===c?o=o.replace("actions/authenticate",n.brand_id+"/authenticate/"+n.network):"importAction"===c?o=o.replace("brands/actions/importAction","portals/"+n.portalId+"/import"):"updateRecord"===r?o=o.replace("/"+t.brands[0].id,""):"search"===c?o=o.replace("actions",n.brand_id).replace("settings/social","Social"):n&&"workflow"===n.type?o=o+"/"+n.brandid+"/workflow":"delete"===r?o=o+"/"+n.brandid:n&&n.portalId&&n.type&&"createBrand"===n.type&&(o=o=o.replace("/brands","/portals/"+n.portalId+"/brands")),o},methodForRequest:function(e,r,a,t,o){return"PATCH"===e&&(e="PUT"),"authenticate"===o||"search"===o?e="GET":"importAction"===o&&(e="POST"),e}}),store.registerSerializer("crm_social_brand",{payloadKey:function(){return"brands"},serialize:function(e,r,a,t){var o={};if(t&&"createBrand"===t.type)o=r.crm_social_brand,delete r.crm_social_brand,r=o[0];else if("updateRecord"===e)return r.crm_social_brand;return r},normalizeResponse:function(e,r,a){var t=[];if(a){t=a.brands;var o=[];return delete a.brands,$.each(t,(function(e,a){!a.id&&a.details.id?a.id=a.details.id:a.id||(a.id=Math.floor(1e5*Math.random()+1)),"updateRecord"===r?o=a:o[e]=a})),a={brands:o,meta:a}}},extractMeta:function(e){if(e&e.meta)return e.meta}}),store.registerModel("crm_social_account",{},{actions:{addAccountPermission:{},removeAccountPerm:{},getProfileInfo:{}}}),store.registerAdapter("crm_social_account",{namespace:"crm/v2/settings/social/",buildURL:function(e,r,a,t,o,c,n){switch(o=o.replace(e,"account"),n&&("pages"===n?o+="/pages":n.addPage&&(o=o+"/"+n.id),"pages"===n.type&&(o=o+"/"+n.id+"/pages")),c){case"addAccountPermission":o=o.replace("actions/addAccountPermission","")+n.accountId+"/permissions";break;case"removeAccountPerm":o=o.replace("actions/removeAccountPerm","")+n.accountId+"/permissions";break;case"getProfileInfo":o=o.replace("settings/social","Social").replace("account/actions/getProfileInfo",n.network+"/"+n.accountId+"/profiles"),void 0!==n.profileId?o=o+"/"+n.profileId:void 0!==n.screenName?o=o+"/"+n.screenName:n.search&&(o=o+"/"+n.search)}return n&&"workflowaccount"===n.type&&(o=o+"/"+n.id+"/workflow/"+n.network),"delete"===r&&(o=o+"/"+n.accountid),o=o.replace("account","accounts")},methodForRequest:function(e,r,a,t,o){switch(o){case"addAccountPermission":return"POST";case"removeAccountPerm":return"DELETE";case"getProfileInfo":return"GET"}return e}}),store.registerSerializer("crm_social_account",{payloadKey:function(){return"accounts"},normalizeResponse:function(e,r,a,t){return a.data&&(a.accounts=a.data,delete a.data),t&&(a[e]={id:t,meta:a.accounts}),a&&a.workflowconfiguration&&(a.meta={workflowconfiguration:a.workflowconfiguration}),a},serialize:function(e,r,a,t){return t&&(t.addAccountPerm&&(r=t.params),t.addPage&&(r=a[0])),r},extractMeta:function(e){return e.summary?(e.meta={summary:e.summary,hasnext:e.hasnext},delete e.summary,delete e.hasnext,e.meta):e&e.meta?e.meta:void 0}}),store.registerModel("crm_social_portal",{},{actions:{unmapPortal:{}}}),store.registerAdapter("crm_social_portal",{namespace:"crm/v2/settings/social/",buildURL:function(e,r,a,t,o,c,n){return o=o.replace(e,"portal"),"unmapPortal"===c?o=o.replace("portal/actions/unmapPortal","portals"):n&&n.importBrand?o.replace("portal","portals/"+n.portalId+"/import"):o.replace("portal","portals")},methodForRequest:function(e,r,a,t,o){return"unmapPortal"===o?"DELETE":e}}),store.registerSerializer("crm_social_portal",{payloadKey:function(){return"portals"}});
