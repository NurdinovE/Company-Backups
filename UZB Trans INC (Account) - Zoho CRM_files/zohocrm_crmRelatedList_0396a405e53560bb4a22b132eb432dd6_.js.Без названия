if(Crm.userDetails.isRelatedListLyteEnabled){var crmRelatedList={relTaskCreate:function(e,t,a,l,n,i){var r=Lyte.registeredMixins["crm-related-list-utils"].getPersonalityModuleObj($(e).attr("data-relid")),s=$("#newRelatedListPopUpDiv");s&&s.empty();var o=Crm.getCrmBasePath()+"/Create.do",d=new crmRequestPool,c={module:"Tasks",format:"json"};if(r?(c.listRelationId=r.id,c.fillUpModule=Lyte.Globals.get("relatedList.module"),c.entityid=Lyte.Globals.get("relatedList.entityId"),c.relmodule=Lyte.Globals.get("relatedList.module"),c.entityname=$("#entityName").val()):t&&(c.fillUpModule=l,c.entityid=t,c.relmodule=l,c.entityname=a,c.taskCheckKey=!0),"followup"===n){returnJson.entityMapJson.CONTACTID&&("null"!==returnJson.entityMapJson.CONTACTID.defaultid?c.entityid=returnJson.entityMapJson.CONTACTID.defaultid:delete c.entityid,"null"!==returnJson.entityMapJson.CONTACTID.lookupmodule?c.fillUpModule=returnJson.entityMapJson.CONTACTID.lookupmodule:delete c.fillUpModule);var u=returnJson.entityMapJson.CONTACTID?returnJson.entityMapJson.CONTACTID.lookupmodule:l;c.relmodule=u,c.entityname=returnJson.entityMapJson.CONTACTID?returnJson.entityMapJson.CONTACTID.defaultvalue:void 0,c.taskCheckKey=!0}var m="bulk"===n?getIdsAndNames():void 0;moduleRecordMapping.Tasks&&moduleRecordMapping.Tasks.fields&&moduleRecordMapping.Tasks.fields.length&&moduleRecordMapping.Tasks.fields.length>0||store.findAll("field",{module:"Tasks",type:"all"},!1,void 0,{apiVersion:"2.2"}),networkUtils.setCsrfParam(c),d.initiate({action:o,data:c,datatype:"json",success:function(t){var l=JSON.parse(t);l.isFromRelatedList=!0;var r=Crm.getModuleObj("Tasks");r.currentStatus="create";var s=e?e.firstElementChild:void 0;e&&s&&"TaskPopup"===s.id||"fromSaveandNew"===e?r.createTemplate(l,void 0,"TaskPopup"):r.createTemplate(l),renderingUtils.labelWidthFixed("list","preHTMLContainer_Tasks");var o=$("#newRelatedListPopUpDiv");o.addClass("createTaskPopContainer");var d=$("#preHTMLContainer_Tasks"),c=$('<div id="tasksPopFreezeLayer" class="tasksPopupFreezeLayer hide"></div>');d.append(c);var u=$("#secDiv_Task_Information").height();c.height(u),thirdPartyUtils.bindSelect2($(".newChosenSel").find("select")),thirdPartyUtils.bindSelect2($(".mlSelect").find("select")),thirdPartyUtils.bindSelect2($(".labelTabCreate").find("select"));var p=$("#FreezeLayer");if("salessignals"===a&&(p.addClass("bulkTaskfreezeZi"),o.addClass("bulkTaskPopZi")),void 0!==m){var h=JSON.stringify(m),v=$('<input type="hidden" id="bulkTaskNewPopup" value='+h+"></input>");o.append(v),$("#Tasks_fldRow_CONTACTID").addClass("bulkTaskPopupHide"),$("#Tasks_fldRow_SEID").addClass("bulkTaskPopupHide"),p.addClass("bulkTaskfreezeZi"),o.addClass("bulkTaskPopZi")}if("followup"===n){var L=$('<input type="hidden" id="followUpTask"></input>');o.append(L)}var g=$("#Tasks_Notify_Owner"),I=o.find(".topband_tb");I.prepend(g),I.addClass("taskPopTopband_tb"),$(".ui-menu").addClass("bulkTaskPopZi"),d.scroll((function(){$(".lookFieldSrcWrap").hide(),$(".ui-menu").hide()})),i&&i()},error:function(){commonUtils.showHideLoadingDiv(),renderingUtils.showCustomAlert(I18n.getMsg("crm.assignment.rule.internal.error"))}}),(void 0===Crm.userDetails.LAYOUTRULEAVAILABLE||!0===Crm.userDetails.LAYOUTRULEAVAILABLE&&Crm.userDetails.LRINVOLVEDMODULES.contains(c.module))&&(c.getLayoutRuleJSON=!0,Crm.layoutRuleJSONData={},d.addUp({type:"GET",action:o,data:c,dataType:"json",success:function(e){null!==e&&(CFRExec.init(e,c.module,"edit"),CFRExec.promptIfMandatory=!1,CFRExec.evalRules("edit",!0))},error:function(){commonUtils.showHideLoadingDiv(),Crm.layoutRuleJSONData={}}})),(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(c.module))&&Crm.downloadValidationRules(o+"?format=json&module=Tasks","Tasks")},showCircuitPreview:function(e,t){$("#crm-msg").remove(),commonUtils.showHideLoadingDiv(!0);var a=networkUtils.returnDependencyFiles(["crm-circuits-preview-display.js"],ResourceConstants.CRMClient);a=a.concat(networkUtils.returnDependencyFiles(["crm-circuits-preview-display.css"],ResourceConstants.CRMClient)),Crm.userDetails.RTL_ENABLED&&(a=a.concat(networkUtils.returnDependencyFiles(["crm-circuits-rtl.css"],ResourceConstants.CRMClient))),a=(a=a.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("circuits")],ResourceConstants.CRM))).concat(networkUtils.returnDependencyFiles(["crm-circuits-common.js"],ResourceConstants.CRMClient)),Lyte.injectResources(a,void 0,(function(){if(e){var a=$("crm-circuits-preview");0!==a.length||(Lyte.Component.render("crm-circuits-preview",void 0,"#show"),a=$("crm-circuits-preview"));var l={circuit_name:t,preview_url:e};Lyte.triggerEvent("cirPrev_set_data",l),Lyte.triggerEvent("cirPrev_show_preview_pop",!0),commonUtils.showHideLoadingDiv(!1)}else $L("crm-circuits-preview")[0].component.executeMethod("errorHandling",{})}),e,t)}};Handlebars.registerHelper("isActivitySplitNotDone",(function(){return!Crm.isActivitySplitDone}))}else{crmRelatedList={Module:"",ModuleApiName:"",EntityId:"",EachModuleData:{},CampaignEmailObj:{},ListIds:[],filters:{},openCusData:{},closeCusData:{},nameArr:[],mandFields:{},seriesSelectedids:[],load:function(e,t,a,l,n,r){if(resetCustomRelatedListTrigger(),!a.Converted_Lead&&"undefined"!=typeof returnJson&&returnJson&&"canvas"!=Lyte.Router.getRouteInstance().routeName){if("Potentials"===e&&returnJson.entityMapJson.CONTACTID){var s=returnJson.entityMapJson.CONTACTID.defaultid;s&&"null"!==s&&!$("#dIBestTime").length&&$("#BestTimeDetailsPage").length&&(Lyte.Component.render("crm-besttime-new",{seid:s,viewType:"DetailsPage",module:"Contacts",type:"CALLTEXT",parentModule:"Potentials"},"#BestTimeDetailsPage"),crmBstTime.setPosition())}Crm.userDetails.isSegmentationEnabled&&returnJson.isSegmentationAllowed&&!window.clientPortalName&&networkUtils.loadFeatureScripts([networkUtils.getI18nJSUrl("segmentation")],(function(){$("#segmentation").is(":visible")||crmRelatedList.loadSegmentationInfo(t,e)}));var o,d=[],c=[],u=!1,m=0,p="",h="",v="",L="",g="",I=[],f=[],C="",R="",E="",T="",S=0,b=0,y=0,A=0,O=0,N="",P="",k=!1,M=null;if("string"==typeof a)try{a=JSON.parse(a)}catch(e){a={}}if(e!=crmRelatedList.Module&&(crmRelatedList.EachModuleData={}),a.listLabelsJson){returnJson.relListLabelsJson.relListLabelJson=a.listLabelsJson,returnJson.relListLabelsJson.isNotesRLPresent=a.isNotesRLPresent,detailView.formNewLeftPanel();var _=Handlebars.templates.RelatedList(returnJson.relListLabelsJson);$("#relatedPageContent").html(_)}returnJson.relListJson=a[e],returnJson.notes=a.notes,crmRelatedList.Module=e,crmRelatedList.EntityId=t;var D=a[crmRelatedList.Module];"Deals"===crmRelatedList.Module&&void 0===D&&(crmRelatedList.Module="Potentials",D=a[crmRelatedList.Module]),"Meetings"===crmRelatedList.Module&&void 0===D&&(crmRelatedList.Module="Events",D=a[crmRelatedList.Module]),Handlebars.registerPartial("zdeskActions",Handlebars.templates.zdeskActions);document.querySelector("crm-backstage-detail-wrapper");var w=0,U={},x={},F={data:[]},Y={data:[]},j={data:[]},B={},V={},H=$L("crm-activity-rel-actions"),q=$L("crm-activity-rel-customize"),z=0===q.length?q:"openActivities"===q[0].component.data.btn_name?q[0]:q[1],J=0===q.length?q:"closedActivities"===q[0].component.data.btn_name?q[0]:q[1],Z=null,G=null,W=null,K=null,Q=!0;for(key1 in D){Crm.userDetails.isRLCountQuerySupported&&(P=P+key1+",");var X={};w++,D.hasOwnProperty(key1)&&(X=D[key1],crmRelatedList.EachModuleData[key1]=X);var ee=$("#"+X.listRelationId);if("ACTIVITYHISTORYPERSONALITY"!==X.name&&"ACTIVITYPERSONALITY"!==X.name||!Crm.isActivitySplitDone){crmRelatedList.isNotActivitySubPersonality(X.name,ne)||(Q=X.isShowColumns);var te=X.filtersAvailable;if("SCOREPERSONALITY"!==X.name){if("SERIESPERSONALITY"===X.name){var ae=detailView.currentModule;(re=store.peekRecord(moduleRecordMapping[ae].id,t))&&re.$stop_processing&&(X.isLocked=re.$stop_processing)}if("undefined"!=typeof businessCardJson&&businessCardJson&&(X.isLinkingModule&&2==businessCardJson.isApproved||7==businessCardJson.isApproved||!X.isLinkingModule&&8==businessCardJson.isApproved||10==businessCardJson.isApproved||12==businessCardJson.isApproved||13==businessCardJson.isApproved)&&"ACTIVITYHISTORYPERSONALITY"!=X.name&&"ACTIVITYPERSONALITY"!=X.name&&"EMAILSPERSONALITY"!=X.name&&"ATTACHMENTSPERSONALITY"!=X.name&&null!=X.label&&(c.push(X.listRelationId),d.push(X.label),"SUPPORTPERSONALITY"==X.name&&(u=!0)),"SALESORDERSPERSONALITY"!=X.name&&"INVOICESPERSONALITY"!=X.name&&"POTENTIALSPERSONALITY"!=X.name&&"CONTACTSPERSONALITY"!=X.name&&"ACCOUNTSPERSONALITY"!=X.name||(I.push(X.listRelationId),f.push(X.label)),"CHILDCAMPAIGNSPERSONALITY"!==X.name)if("MESSAGESPERSONALITY"!==X.name){te&&("CHILDCAMPAIGNSPERSONALITY"!==X.name&&("LEADSPERSONALITY"!==X.name&&"CONTACTSPERSONALITY"!==X.name||("LEADSPERSONALITY"===X.name?!0:!0,crmRelatedList.recipientScrollToId=crmRelatedList.recipientScrollToId?crmRelatedList.recipientScrollToId:X.listRelationId),crmRelatedList.hideOnCheckRlActions(X.listRelationId)),crmRelatedList.preProcessForV2Model(X));var le=null,ne=!("APPOINTMENTSPERSONALITY"!==X.name||"Services"!==e&&Crm.isActivitySplitDone)||void 0;if("CONNECTEDRECORDSPERSONALITY"!==X.name&&"TASKSHISTORYPERSONALITY"!==X.name&&"CALLSHISTORYPERSONALITY"!==X.name&&"EVENTSHISTORYPERSONALITY"!==X.name&&"TASKSPERSONALITY"!==X.name&&"EVENTSPERSONALITY"!==X.name&&"CALLSPERSONALITY"!==X.name&&"APPOINTMENTSPERSONALITY"!==X.name&&"APPOINTMENTSHISTORYPERSONALITY"!==X.name&&"CHRONOLOGICALVIEWPERSONALITY"!==X.name&&"CHRONOLOGICALVIEWHISTORYPERSONALITY"!==X.name||ne)X.IS_CLIENT_ACCOUNT=Crm.userDetails.CLIENT_ACCOUNT,le=Handlebars.templates.RelatedListData(X);else{"CHRONOLOGICALVIEWPERSONALITY"!==X.name&&"CHRONOLOGICALVIEWHISTORYPERSONALITY"!==X.name||(X.module="CHRONOLOGICALVIEWPERSONALITY"===X.name?"ActivitiesChronologicalView":"ActivitiesChronologicalViewHistory"),X.rel_module=e;var ie=X.body;X.body={},X.headings=ie.headings?ie.headings:[],X.fields=ie.fields?ie.fields:[],X.data=ie.data,X.info=ie.info,X.entity_id=t,X.personality=X.name,X.list_relation_id=X.listRelationId,X.name.indexOf("HISTORY")>0?(x[X.module]=X,ee.length>0&&(K=ee)):(U[X.module]=X,ee.length>0&&(W=ee))}if("RELATEDLISTPERSONALITY"==X.name)$("#customRelatedListDiv_"+X.listRelationId).html(le),"undefined"!=typeof LuxHandler&&(LuxHandler.LuxConfig||(LuxHandler.LuxConfig={COMPONENTS:{}}),X.dependentId&&(LuxHandler.LuxConfig.COMPONENTS[X.listRelationId]={id:X.dependentId}));else if("SUPPORTPERSONALITY"==X.name);else{if("ATTACHMENTSPERSONALITY"==X.name){var re,se,oe=[];ae=detailView.currentModule;(re=store.peekRecord(moduleRecordMapping[ae].id,t))||oe.push(store.findRecord(moduleRecordMapping[ae].id,t,{approved:"both"}));var de=store.peekRecord("related_list",X.listRelationId);de||oe.push(store.findRecord("related_list",X.listRelationId,{module:moduleApiMapping[ae]}));var ce=function(){var e='#RelatedListCommonDiv[ddname="ATTACHMENTSPERSONALITY"]';$(e).length<=0||("Events"===ae&&(e="#eventsRightPanelAttachDiv"),$(e).html(""),Lyte.Component.render("crm-related-list-view-header",{entityId:t,module:ae,relatedList:de,record:re,layoutId:se},e))};if(oe.length>0){var ue=X.listRelationId;Promise.all(oe).then((function(){re||(re=store.peekRecord(moduleRecordMapping[ae].id,t)),se=re&&re.Layout?re.Layout.id:store.peekRecord("module",moduleRecordMapping[ae].id).layouts[0].id,de||(de=store.peekRecord("related_list",ue)),ce()})).catch((function(e){murphy.error(e)}))}else se=re.Layout?re.Layout.id:store.peekRecord("module",moduleRecordMapping[ae].id).layouts[0].id,ce();continue}if("SURVEYPERSONALITY"==X.name){if(store.pushPayload("zsurvey_rl",X),$L("crm-zsurvey-rl-body")[0]){var me=document.getElementsByTagName("crm-zsurvey-rl-body")[0].component;me.loadCompData.call(me)}}else"LINKEDIN_SALES_NAVIGATOR_PERSONALITY"!==X.name&&null!==le?$L("#"+X.listRelationId).html(le):null===le&&crmRelatedList.isNotActivitySubPersonality(X.name,ne)&&$("#"+X.listRelationId).hide()}var pe="CB_"+key1;if(CustomButtonJSObjectInit.checkBox&&null!=CustomButtonJSObjectInit.checkBox[pe]){var he=CustomButtonJSObjectInit.checkBox[pe].length;if(0==he)$("#"+pe).addClass("customCheckBox").removeClass("customCheckBoxChecked"),$("#customButtonDetails_"+key1).hide();else{for(i=0;i<he;i++)$("#CB_"+CustomButtonJSObjectInit.checkBox[pe][i]).addClass("customCheckBoxChecked");var ve=$(".customDom[data-cid=selectEntity_"+key1+"]").length,Le=$(".customCheckBoxChecked[data-cid=selectEntity_"+key1+"]").length;0!=ve&&Le==ve&&$("#"+pe).removeClass("customCheckBox").addClass("customCheckBoxChecked")}$("#relatedListRecVal_"+key1).text(he)}var ge=$("#norec_"+X.listRelationId),Ie=$("#ract_"+X.listRelationId);if(Z||!Ie.length||-1!==X.name.indexOf("HISTORY")||crmRelatedList.isNotActivitySubPersonality(X.name,ne)||(Z="#ract_"+X.listRelationId),G||!Ie.length||-1===X.name.indexOf("HISTORY")||crmRelatedList.isNotActivitySubPersonality(X.name,ne)||(G="#ract_"+X.listRelationId),X.isShowColumns){var fe="";!crmRelatedList.isNotActivitySubPersonality(X.name,ne)?$("#"+X.name+"_"+X.listRelationId).siblings("#relatedListCols_"+X.name).length&&(fe=$("#"+X.name+"_"+X.listRelationId).siblings("#relatedListCols_"+X.name)):$("#"+X.name+"_"+X.listRelationId).siblings("#relatedListCols").length&&(fe=$("#"+X.name+"_"+X.listRelationId).siblings("#relatedListCols")),$("#"+X.name+"_"+X.listRelationId).after(fe)}else $("[ddid="+X.listRelationId+"]").find("#showCustomizeList").remove();if("EMAILSPERSONALITY"==X.name&&("Vendors"==crmRelatedList.Module||"Cases"==crmRelatedList.Module||"Leads"==crmRelatedList.Module||"Contacts"==crmRelatedList.Module||"Accounts"==crmRelatedList.Module||"Potentials"==crmRelatedList.Module||"Quotes"==crmRelatedList.Module||"SalesOrders"==crmRelatedList.Module||"PurchaseOrders"==crmRelatedList.Module||"Invoices"==crmRelatedList.Module||X.isCustomModule||crmRelatedList.Module&&(-1!==crmRelatedList.Module.indexOf("CustomModule")||-1!==crmRelatedList.Module.indexOf("LinkingModule")))){var Ce;if(X.mailObj.email_related_list){var Re=X.mailObj.mailType;"Accounts"===crmRelatedList.Module&&(Ce=X.mailObj.contacts_details),X.mailObj=X.mailObj.email_related_list[0],X.mailObj.mailType=Re}X.mailObj.module=crmRelatedList.Module,X.mailObj.entityId=crmRelatedList.EntityId,X.mailObj.loginUserId=Crm.userDetails.USER_ID,X.mailObj.singularMod=moduleRecordMapping[crmRelatedList.Module].singular_label,Crm.frameOriginForEmail=X.frameOriginForEmail,T=X.listRelationId,S=1,"Accounts"===crmRelatedList.Module&&(X.contactObject||X.mailObj.email_related_list&&X.mailObj.email_related_list[0].contacts_details)&&crmTab.tabList.contains("Contacts")&&(X.mailObj.contactObject=null!=X.mailObj.email_related_list?X.mailObj.email_related_list[0].contacts_details:X.contactObject),"Potentials"===crmRelatedList.Module&&(X.contactObject||Ce)&&crmTab.tabList.contains("Contacts")&&(X.mailObj.contactObject=void 0!==Ce?Ce:X.mailObj.contactObject)}if("CONTACTSROLESPERSONALITY"==X.name&&X.ACTIONS&&X.ACTIONS.forEach((function(e){var t=$("#accountId");if(t.length&&(e.accId=t.val()),returnJson.entityMapJson.ACCOUNTID){var a=returnJson.entityMapJson.ACCOUNTID.defaultid;void 0!==a&&"null"!==a&&""!==a&&(e.accId=a)}})),"SURVEYPERSONALITY"!=X.name){var Ee=$("#eventsRightPanelAttachDiv"),Te=$("#eventsAttachButtonDiv"),Se=null;try{if(Crm.SEND_MAIL_BUTTON_HIDE&&"Campaigns"===crmRelatedList.Module&&("Contacts"===X.module||"Leads"===X.module)){var be=Crm.userDetails.permissions["Crm_Implied_Send_Mail_"+X.module],ye=Crm.userDetails.permissions["Crm_Implied_Mass_Email_"+X.module];be&&ye||(X.ACTIONS=X.ACTIONS.filter((e=>"Send Survey"!==e.label)),X.ACTIONS=X.ACTIONS.filter((e=>"Send Email"!==e.label)))}}catch(e){murphy.error(e)}if(crmRelatedList.isNotActivitySubPersonality(X.name,ne)){let t;if(Crm.userDetails.hideUnauthorizedCreateLink&&X.ACTIONS){t=[];let e=X.ACTIONS&&X.ACTIONS.length;for(var Ae=0;Ae<e;Ae++)X.ACTIONS[Ae]&&!1===X.ACTIONS[Ae].SHOWACTION||t.push(X.ACTIONS[Ae])}else t=X.ACTIONS;Se=Handlebars.templates.personalityAction({actions:t,rid:X.listRelationId,name:X.name,mailObj:X.mailObj,entityId:crmRelatedList.EntityId,moduleName:crmRelatedList.Module,isRecordLocked:X.isRecordLocked,body:X.body,isCustLookUp:X.isCustLookUp,filtersAvailable:X.filtersAvailable,hideSendMailBtn:X.hideSendMailBtn,moduleData:a[e]})}else-1==X.name.indexOf("HISTORY")&&0==H.length&&(F.parentid=X.listRelationId,X.ACTIONS&&(B[X.module]=X.ACTIONS[0]));if(!crmRelatedList.isNotActivitySubPersonality(X.name,ne)&&(Y.parentid||-1!==X.name.indexOf("HISTORY")?j.parentid||-1===X.name.indexOf("HISTORY")||(j.parentid=X.listRelationId):Y.parentid=X.listRelationId,X.data&&0!==X.data.length)){var Oe={};if(Oe.module=X.module,Oe.zcqa="customize_"+X.module,Oe.personality=X.name,Oe.label="Events"===X.module?"Meetings":X.module,Oe.label=I18n.getMsg(Oe.label),Oe.parentid=X.listRelationId,-1===X.name.indexOf("HISTORY")){if(!Z&&z&&0!==z.length&&z.component.data.parentid)Z="#ract_"+z.component.data.parentid;V[X.module]=Oe}else{if(!G&&J&&0!==J.length&&J.component.data.parentid)G="#ract_"+z.component.data.parentid;V[X.module+"_History"]=Oe}}var Ne=$("#rel_newui_"+X.listRelationId);if(0!=X.body.length||crmRelatedList.filters[X.listRelationId]||"PROJECTSPERSONALITY"==X.name||"ATTACHMENTSPERSONALITY"==X.name)!crmRelatedList.isNotActivitySubPersonality(X.name,ne)&&H.length>0||Ie.html(Se);else if("SOCIALPERSONALITY"==X.name)k=!0,M=X.SocialObj;else if("EMAILSPERSONALITY"==X.name&&1==X.isFromAPI){var Pe={rid:X.listRelationId,mailObj:X.mailObj,erlCheckboxChecked:!1};if(store.pushPayload("emails_rl_user",{content:"shared_users_"+crmRelatedList.EntityId,data:Pe}),X.columnsWidths){let e=X.columnsWidths;store.pushPayload("email_column_widths",e,!0)}ee.empty(),Lyte.Component.render("crm-rl-users-list",Pe,"[id='"+X.listRelationId+"']"),Crm.userDetails.mailConfigured=Pe.mailObj.mailConfigured;var ke=$L("crm-rl-users-list");if(("Potentials"===crmRelatedList.Module||"Deals"===crmRelatedList.Module)&&ke&&ke.length>0){var Me=ke[0].component;if(Crm.userDetails.CONTACT_ROLES_EMAILS_RL)if(moduleRecordMapping.Contacts.visible&&moduleRecordMapping.Contacts.viewable){var _e=$L("#cntId").val();if(_e&&"null"!==_e){var De="/crm/v2/"+moduleRecordMapping.Contacts.api_name+"/"+_e;(new crmRequestPool).initiate({url:De,type:"GET",data:"approved=both",headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},content:"application/json; charset=UTF-8",dataType:"json",success:function(e){var t=$L("#primEmail").val(),a=$L("#secondMail").val(),l=[{name:$L("#associatedContName").val(),id:_e,email:t,secondary_email:a}];Me.methods.loadContactRoles(l),e?(Me.methods.reloadUserList(),Me.methods.showOrHideContactRoles()):store.findAll("emails_rl_user",{page:1,per_page:30,fields:"id,Full_Name,Email,Secondary_Email"},!1,!1,{module:crmRelatedList.Module,entityId:crmRelatedList.EntityId,action:"getContactRoles"}).then((function(e){crmTab.tabList.contains("Contacts")&&"object"==typeof e&&Object.keys(e).length>0&&(Me.data.contact_details=void 0!==e.emails_rl_user[0].data.contact_details?e.emails_rl_user[0].data.contact_details:Me.data.contact_details,Me.data.cntMetaInfo=void 0!==e.emails_rl_user[0].data.meta?e.emails_rl_user[0].data.meta:Me.data.cntMetaInfo,Me.methods.loadContactRoles(e.emails_rl_user[0].data.contact_details)),Me.setData("isRecordViewable",!1),Me.methods.reloadUserList(),Me.methods.showOrHideContactRoles()}),(e=>{let t=e.responseText.replace("↵",""),a=JSON.parse(t);commonUtils.showHideLoadingDiv(!1),_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropMessage:a.message,ltPropDuration:"3000",ltPropShow:!0}})}))}})}else store.findAll("emails_rl_user",{page:1,per_page:30,fields:"id,Full_Name,Email,Secondary_Email"},!1,!1,{module:crmRelatedList.Module,entityId:crmRelatedList.EntityId,action:"getContactRoles"}).then((function(e){crmTab.tabList.contains("Contacts")&&"object"==typeof e&&Object.keys(e).length>0&&(Me.data.contact_details=void 0!==e.emails_rl_user[0].data.contact_details?e.emails_rl_user[0].data.contact_details:Me.data.contact_details,Me.data.cntMetaInfo=void 0!==e.emails_rl_user[0].data.meta?e.emails_rl_user[0].data.meta:Me.data.cntMetaInfo,Me.methods.loadContactRoles(e.emails_rl_user[0].data.contact_details),Me.methods.reloadUserList(),Me.methods.showOrHideContactRoles())}),(e=>{let t=e.responseText.replace("↵",""),a=JSON.parse(t);commonUtils.showHideLoadingDiv(!1),_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropMessage:a.message,ltPropDuration:"3000",ltPropShow:!0}})}))}else Me.methods.showOrHideContactRoles(),Me.methods.reloadUserList();disablePOPUsers(Pe.mailObj)}"detail"===Lyte.Router.getRouteInstance().routeName&&detailView.changedBCJson&&detailView.changedBCJson.recordLockingDetails&&detailView.changedBCJson.recordLockingDetails.isLockedForMe&&businessCardJson&&businessCardJson.isEmailRestricted&&(X.hideSendMailBtn=!0);var we=Lyte.Component.registeredHelpers.isUserHasSendMailPermission(moduleApiMapping[crmRelatedList.Module]),Ue={isRecordLocked:X.isRecordLocked,mailObj:X.mailObj,isSendMailRestricted:X.hideSendMailBtn,isUserHasSendMailPermission:we};$("crm-rl-share-email").length>0?document.querySelector("crm-rl-share-email").component.setData(Ue):Lyte.Component.render("crm-rl-share-email",Ue,"[id='ract_"+X.listRelationId+"']")}else Ie.html(""),ge.html(Se),Ne.parents("#RelatedListCommonDiv").addClass("noDataFountDetail"),Ie.parent("td").addClass("noDataFountDetailtxt"),0!=X.body.length||"CONTACTSPERSONALITY"!==X.name&&"REPORTINGCONTACTSPERSONALITY"!==X.name?$("#contactTreePopup").removeClass("disabledArow"):$("#contactTreePopup").addClass("disabledArow");if(X.body.length>0?"Events"===e&&"ATTACHMENTSPERSONALITY"==X.name?(Ee.removeClass("noDataFountDetail"),Te.parent("td").removeClass("noDataFountDetailtxt")):(Ne.parents("#RelatedListCommonDiv").removeClass("noDataFountDetail"),Ie.parent("td").removeClass("noDataFountDetailtxt")):"PROJECTSPERSONALITY"==X.name&&(Ne.parents(".component1").addClass("noDataFountDetail"),Ie.parent("td").addClass("noDataFountDetailtxt")),"CONTACTSPERSONALITY"!==X.name&&"REPORTINGCONTACTSPERSONALITY"!==X.name||(X.body.length>0?$L("#contactTreePopup").removeClass("disabledArow"):$L("#contactTreePopup").addClass("disabledArow")),"SERIESPERSONALITY"===X.name){var xe=$L("#addToseries");if(xe){var Fe=$L("#addNewIcP_Cadences");Crm.userDetails.LITE.IS_LITE_USER&&(xe.addClass("hide"),Fe.addClass("eventNone")),void 0!==Crm.userDetails.permissions.Crm_Implied_Manage_Enroll_Series&&Crm.userDetails.permissions.Crm_Implied_Manage_Enroll_Series||(xe.addClass("hide"),Fe.addClass("dN"))}}"RELATEDLISTPERSONALITY"==X.name&&($("#relPersAction_"+X.listRelationId).html(ge.html()),ge.remove(),Ie.html(Se)),"PROJECTSPERSONALITY"==X.name&&(v=X.ProjectObj.authMsg,L=X.ProjectObj.portalName,$("#portalname").val(L),null!=X.ProjectObj.projectIdList&&""!=X.ProjectObj.projectIdList&&(m=1,p=X.listRelationId,h=X.name.toLowerCase()+"_"+X.listRelationId,g=X.ProjectObj.projectIdList,ge.remove())),"SUPPORTPERSONALITY"==X.name&&X.SupportObj&&(null!=X.SupportObj.crmAdmin&&null!=X.SupportObj.portalUser||null!=X.SupportObj.supportTicket&&X.SupportObj.supportzuid),"ZINVOICEPERSONALITY"==X.name&&(b=1,C=X.listRelationId),"ZEXPENSEPERSONALITY"==X.name&&(y=1,R=X.listRelationId),"ZSUBSCRIPTIONSPERSONALITY"==X.name&&(A=1,E=X.listRelationId);var Ye=detailView.relatedPersonalityList[X.name];l&&"updateCampaignStatus"!==n||!Ye||detailView.loadRelatedDetails($("#module").val(),$("#entityId").val(),Ye),"navigate_next_rellist"!==n&&"navigate_previous_rellist"!==n||populateRLCount(X.listRelationId,void 0,!0),X.isCustLookUp||"Campaigns"!==e||"LEADSPERSONALITY"!==X.name&&"CONTACTSPERSONALITY"!==X.name||crmRelatedList.showOnCheckRlActions(X.listRelationId)}}else O=1,N=X.listRelationId;else{var je=document.querySelector("crm-child-campaigns");X.isLoading=!1,je&&(X.showCreateLink=Lyte.Component.registeredHelpers.showAddRecord("Campaigns"),je.setData(X))}}else X.isRulesAvailable?o={entity_scores:X.body,module:e}:$L(".scorigRulesTable").css("display","none")}}o&&(o.layout_id=returnJson.layoutIdOfEntity?returnJson.layoutIdOfEntity:store.peekRecord("module",moduleRecordMapping[detailView.currentModule].id).layouts[0].id,detailView.arry=[],crmRelatedList.renderScoringRelList(o)),F.parentid&&0===H.length&&(B.Tasks&&Lyte.Component.registeredHelpers.showAddRecord("Tasks")&&F.data.push(B.Tasks),B.Events&&Lyte.Component.registeredHelpers.showAddRecord("Events")&&F.data.push(B.Events),B.Calls&&Lyte.Component.registeredHelpers.showAddRecord("Calls")&&F.data.push(B.Calls),B.Appointments&&Lyte.Component.registeredHelpers.showAddRecord("Appointments")&&F.data.push(B.Appointments),0!==F.data.length&&Lyte.Component.render("crm-activity-rel-actions",F,Z));var Be=["Tasks","Events","Calls","Appointments"],$e=["Tasks_History","Events_History","Calls_History","Appointments_History"];if(Y.parentid&&(Y.btn_name="openActivities",Y.outer_selector="openActivities_customize_outer",z&&0!==z.length&&z.getData().data.forEach((function(e){!Be.contains(e.module)||V[e.module]||void 0!==U[e.module]&&void 0===U[e.module].data||(V[e.module]=e)})),Y.module_name=e,Y.module_data=a,Y.entity_id=t,Y.data.activity_type="open",Y.isshowcol=Q,Y.activity_name=Crm.userDetails.openActRelView,V.Tasks&&Y.data.push(V.Tasks),V.Events&&Y.data.push(V.Events),V.Calls&&Y.data.push(V.Calls),V.Appointments&&Y.data.push(V.Appointments),Y.outer_selector="openActivities_customize_outer",z&&0!==z.length?z.setData("data",Y.data):0===z.length&&Lyte.Component.render("crm-activity-rel-customize",Y,Z)),j.parentid&&(j.btn_name="closedActivities",j.outer_selector="closedActivities_customize_outer",J&&0!==J.length&&J.getData().data.forEach((function(e){!$e.contains(e.module+"_History")||V[e.module+"_History"]||void 0!==x[e.module]&&void 0===x[e.module].data||(V[e.module+"_History"]=e)})),j.module_name=e,j.module_data=a,j.entity_id=t,j.isshowcol=Q,j.data.activity_type="closed",j.activity_name=Crm.userDetails.closedActRelView,V.Tasks_History&&j.data.push(V.Tasks_History),V.Events_History&&j.data.push(V.Events_History),V.Calls_History&&j.data.push(V.Calls_History),V.Appointments_History&&j.data.push(V.Appointments_History),j.outer_selector="closedActivities_customize_outer",J&&0!==J.length?J.setData("data",j.data):0===J.length&&Lyte.Component.render("crm-activity-rel-customize",j,G)),crmRelatedList.renderSplitActivity(U,"activity_split_wrapper",l,W,t,e,F,Y,r,"Activities"),crmRelatedList.renderSplitActivity(x,"activity_history_split_wrapper",l,K,t,e,F,j,r,"Activities_History"),detailView.isLeadOrContactPresent=!1,crmRelatedList.clearHiglihtData(),returnJson.isUIHidden&&2==businessCardJson.isApproved)for(var Ve=I.length,He=0;He<Ve;He++){var qe=I[He];if(null!=qe)$("#norec_"+qe).addClass("hide"),$("#ract_"+qe).addClass("hide"),(Je=$("#newleft_"+qe)).find("#addNewIcP_"+f[He].replace(/ /g,"\\ ")).hide()}if($L(".actColumnList").scroll({preventHorizontal:!0}),crmCommonModule.isApproved=businessCardJson.isApproved,"undefined"!=typeof businessCardJson&&(2==businessCardJson.isApproved||7==businessCardJson.isApproved||8==businessCardJson.isApproved||10==businessCardJson.isApproved||12==businessCardJson.isApproved||13==businessCardJson.isApproved)){Ve=c.length;u&&$("#noTicket_newTicketLink").hide();for(He=0;He<Ve;He++){var ze=c[He];if(null!=ze){$("#norec_"+ze).addClass("hide"),$("#ract_"+ze).addClass("hide");var Je=$("#newleft_"+ze);(D[ze].isLinkingModule=!0)?$(Je.find("span")[1]).hide():Je.find("#addNewIcP_"+d[He].replace(/ /g,"\\ ")).hide()}}$("#newRelatedListDiv").hide()}var Ze=$("#accountId"),Ge=$("#Potential_accountId"),We=$("#fullname"),Ke=$("#entityName"),Qe=$("#emailId"),Xe=$("#zmailEmail");Ze&&Ge&&Ge.val(Ze.val()),Ke&&We&&We.val(Ke.val()),Qe&&Xe&&Qe.val(Xe.val());var et,tt=""+m+S+0+b+y+A+O;if(tt.indexOf("1")>-1){var at=detailView.changedBCJson.hidden.cvid;getIntegList(tt,p,crmRelatedList.EntityId,h,crmRelatedList.Module,at||getObj("cvid").value,L,v,1,g,crmRelatedList.EntityId,C,R,E,"true","active",N,T)}if(returnJson&&returnJson.relListLabelsJson&&returnJson.relListLabelsJson.relListLabelJson&&$.each(returnJson.relListLabelsJson.relListLabelJson,(function(e,t){"LINKEDIN_SALES_NAVIGATOR_PERSONALITY"===t.name&&(et=!0)})),Crm.userDetails.permissions.Crm_Implied_LinkedIn_Sales_Navigator_Integration||et){var lt=networkUtils.returnDependencyFiles(["delete-popup.js"],ResourceConstants.CRMClient),nt=networkUtils.loadFeatureScripts(["zcrm4.js","zcrm_detailviewNew.js","zcrm_footer_initial_and_detailviewNew.js"]),it=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("salesnavigator")],ResourceConstants.CRM),rt=lt.concat(nt).concat(it);Lyte.injectResources(rt,void 0,(function(){SalesNavigator.loadSalesNavigator()}))}if(k){var st=!1,ot=[];if($.each(M.accounts,(function(e,t){"twitter"===t.network&&t.status<=1&&t.perm_type<=3&&ot.push(t.id)})),void 0!==M&&void 0!==M.accounts&&M.accounts.length>0){var dt=void 0!==M.SOCIALPROFILES?M.SOCIALPROFILES.twitter:"";dt=(dt=void 0===dt?"":dt).trim(),ot.length>0&&null!==dt&&""!==dt&&void 0!==dt&&(st=!0)}if(crmRelatedList.new_social=M.new_social,M.new_social){var ct=networkUtils.returnDependencyFiles(["crm-social-common-mixins.js","social_related_list_store.js","crm-social-helper.js","social_related_list_store.js","crm-social-related-list-common.js","crm-social-integ-outer-template.js","crm-social-common-models.js","crm-social-setup-models.js"],ResourceConstants.CRMClient);Lyte.injectResources(ct,void 0,(function(){var t=Lyte.registeredMixins["crm-social-integration"];M.id||(M.id=Math.floor(1e5*Math.random()+1)),M.brandParent=[],M.personalAcc=[],M.accIdVsPerm=[],M.networkVsBrandId=[],M.brandIdVsDetails=[],$.each(M.accounts,(function(e,t){"brand"===t.type&&t.status<=1&&!M.networkVsBrandId[t.network]?(M.brandParent[t.network]=t.id,M.networkVsBrandId[t.network]=t.brand?t.brand.id:void 0):"Personal"===t.type&&t.status<=1&&(M.personalAcc[t.network]=t.id),M.accIdVsPerm[t.id]=t.perm_type})),void 0!==M.brands&&$.each(M.brands,(function(e,t){t.accounts&&t.accounts.length>0&&(M.brandIdVsDetails[t.id]=t)})),M.module=e,M.record_id=re?re.id:void 0,store.unloadAll("social_related_list"),store.pushPayload("social_related_list",M),st&&(t.processPersonalAccounts(void 0,M,!0),t.showDMSection(ot),t.showTweetSection()),t.fetchSocialRelatedList(M)}))}else networkUtils.loadFeatureScripts(["zohocrm_zsocial.js","zohocrm_zsocialinteg.js",networkUtils.getI18nJSUrl("social")],(function(){st&&(crmSocialInteg.processPersonalAccounts(void 0,M,!0),crmSocialInteg.showDMSection(ot),crmSocialInteg.showTweetSection()),crmSocialInteg.twitterIds=ot,crmSocialInteraction.fetchSocialRelatedList(M)}))}var ut=!1;if(a.notes&&a.isNotesRLPresent){Notes.registerPartial(),Crm.userDetails.CLIENT_ACCOUNT&&(a.notes.hasCreateAttPerm=Crm.userDetails.permissions.Crm_Implied_Create_Attachments,a.notes.hasDeleteAttPerm=Crm.userDetails.permissions.Crm_Implied_Delete_Attachments);var mt=Handlebars.templates.CrmNotes_DetailsPage;Notes.addNotesClass(a.notes),$("#relNotesInRL").html(mt(a.notes)),setTimeout((function(){"undefined"!=typeof Notes&&"function"==typeof Notes.callLeafletForVisibleNotes&&Notes.callLeafletForVisibleNotes()}),1e3),$("a.imageGallery").colorbox({photo:!0}),ut=!0,Crm.userDetails.CLIENT_ACCOUNT||Notes.renderTimelineLogs(a.notes),Notes&&""!=Notes.noteInEditMode&&(Notes.noteInEditMode=""),Crm.userDetails.isRLCountQuerySupported&&(P=P+a.notes.LISTRELATIONID+",")}if(transferRelatedDetails(ut,a.isNotesRLPresent),placeExtra(),fetchCustomRelatedList(),"navigate_next_rellist"!==n&&"navigate_previous_rellist"!==n&&(1===w?populateRLCount(X.listRelationId):populateRLCount(void 0,void 0,void 0,void 0,a[e])),"undefined"!=typeof Crm){var pt=document.location.href;if(pt.indexOf("#")>-1){var ht=pt.substr(pt.indexOf("#")+1,pt.length);Crm.scrollToElem=ht}Crm.scrollPage(),Crm.bindEventForUserBCView()}if(P.length){P=P.slice(0,-1).split(",");let a=Crm.userDetails.RLBatchLimitPerRLCountAPI,l=P.map(((e,t)=>t%a==0?P.slice(t,t+a):null)).filter((e=>e));crmRelatedList.scheduleOrTriggerRLCountAPI(l,moduleApiMapping[e],t)}if(!l&&CScriptLib&&detailView.invokeClientScript(),Crm.userDetails.isAccessibilityConfigSupported){var vt=$L("#relatedPageContent");vt.bindAria=Lyte.registeredMixins["crux-aria-table-mixin"].bindEventForAria.bind(vt[0]),vt.bindAria()}Crm.userDetails.isAccessibilityConfigSupported&&!Lyte.Service.getInjected("globalAccessibilityServices").getVariable("standardNavigationOrder")&&$L("#newleft_Info>a").focus()}},scheduleOrTriggerRLCountAPI:function(e,t,a){"requestIdleCallback"in window?requestIdleCallback((l=>{(l.timeRemaining()>0||l.didTimeout)&&crmRelatedList.getCountForRLInBatches(e,t,a)}),{timeout:1e3}):crmRelatedList.getCountForRLInBatches(e,moduleApiMapping[t],a)},getCountForRLInBatches:function(e,t,a){e.forEach((e=>{let l,n=[];e.forEach((e=>{if(l={related_list:{id:e}},crmRelatedList.filters[e]){let t,a=crmRelatedList.filters[e].length;if(1===a)t=crmRelatedList.filters[e][0],l.params={},l.params.filters={field:{api_name:crmRelatedList.alterFilterAPIName(t.api_name)},comparator:t.comparator,value:t.value};else if(a>1){let n={group_operator:"AND",group:[]};for(let l=0;l<a;l++)t=crmRelatedList.filters[e][l],n.group.push({field:{api_name:crmRelatedList.alterFilterAPIName(t.api_name)},comparator:t.comparator,value:t.value});l.params={},l.params.filters=n}}n.push(l)})),store.triggerAction("dummy","rlCount",{url:"/crm/v4/"+t+"/"+a+"/actions/get_related_records_count",method:"POST",payLoad:{get_related_records_count:n}},null,"POST")}))},alterFilterAPIName:function(e){let t=e.split(".");return t.length>1&&"member_info"===t[0]?e.replace("member_info","$member_info"):e},getSelectorForActivitiesRl:function(e,t){var a;return e.forEach((e=>{("TASKSPERSONALITY"!==e.name&&"EVENTSPERSONALITY"!==e.name&&"CALLSPERSONALITY"!==e.name&&"APPOINTMENTSPERSONALITY"!==e.name&&"CHRONOLOGICALVIEWPERSONALITY"!==e.name||"activity_split_wrapper"!==t)&&("TASKSHISTORYPERSONALITY"!==e.name&&"EVENTSHISTORYPERSONALITY"!==e.name&&"CALLSHISTORYPERSONALITY"!==e.name&&"APPOINTMENTSHISTORYPERSONALITY"!==e.name&&"CHRONOLOGICALVIEWHISTORYPERSONALITY"!==e.name||"activity_history_split_wrapper"!==t)||(a=e)})),a},renderSplitActivity:function(e,t,a,l,n,i,r,s,o,d){try{if(e.Events||e.Tasks||e.Calls||e.Appointments){if(o&&("TimeLineView"===Crm.userDetails.openActRelView||"TabView"===Crm.userDetails.openActRelView||"TimeLineView"===Crm.userDetails.closedActRelView||"TabView"===Crm.userDetails.closedActRelView)&&"entity"===Lyte.Router.getRouteInstance().parent.routeName){let e="refreshTemplate"===o.action,a="refresh"===o.action;Lyte.triggerEvent("relatedList",{refresh:a,refreshTemplate:e,id:o.listRelationId,parent_relation_name:d,idselector:t,isChrono:!0})}var c=crmRelatedList.getSelectorForActivitiesRl(returnJson.relListLabelsJson.relListLabelJson,t);if(!c)return;var u,m=c.name+"_"+c.id,p="RelatedListCommonDiv[ddname="+m.substring(0,m.indexOf("_"))+"]",h=$L("#"+p)[0].querySelector("crm-activity-rel-wrapper"),v=[],L={},g={},I=80;let U=returnJson.layoutIdOfEntity;if(l&&(u=l.parent().parent()),h){for(var f=!1,C=0,R=h.getData("subModuleData"),E=0;E<=3;E++)if(R[E]){C++;var T=R[E].module;if(e[T]){e[T].data&&(f=f||!0),Lyte.Component.set(R[E],"headings",e[T].headings);var S=e[T].fields&&e[T].fields.fields?e[T].fields.fields:void 0;if(S){for(var b={fields:S.removeArrayElements(["Subject","Event_Title","Appointment_Name","Due_Date","Owner","Start_DateTime","End_DateTime","All_day","Call_Start_Time","Appointment_Start_Time","Member","_bindings"])},y=(g=e[T].headings,{}),A=g.length,O=0;O<A;O++){var N=g[O].api_name;S.contains(N)&&(y[N]=g[O])}var P=void 0===R[E].fieldsforrel?{}:R[E].fieldsforrel;P[e[T].personality]=y,Lyte.Component.set(R[E],"fieldsforrel",P),Lyte.Component.set(R[E],"personality",e[T].personality),"Tasks"===T&&h.setData("hasCompletePermissionForTask",e[T].hasCompletePermissionForTask),Lyte.Component.set(R[E],"fields",b)}Lyte.Component.set(R[E],"data",R[E].data&&a?R[E].data.concat(e[T].data):e[T].data),Lyte.Component.set(R[E],"info",e[T].info),R[E].info=e[T].info}else R[E].data&&R[E].data.length>0&&(f=!0)}f&&C<=2&&l&&(u.addClass(C>1?"doubleAct_list":"singleAct_list"),I=1==C?152:I),!f&&l&&u.removeClass("singleAct_list doubleAct_list"),h.setData("showBlankState",!f),h.setData("txt_ln",I),h.setData("actActionsData",r),h.setData("custData",s),h.setData("relselector",m);let n="activity_split_wrapper"===t?Crm.userDetails.openActRelView:Crm.userDetails.closedActRelView;h.setData("activityView",n)}else{e.Tasks&&v.push(e.Tasks),e.Events&&v.push(e.Events),e.Calls&&v.push(e.Calls),e.Appointments&&v.push(e.Appointments);var k=crmRelatedList.isActDataPresent(e);k&&v.length<=2&&l&&(u.addClass(v.length>1?"doubleAct_list":"singleAct_list"),I=1==v.length?152:I),(L={subModuleData:v,parent_relation_name:m.indexOf("HISTORY")>-1?"Activities_History":"Activities",showBlankState:!k,txt_ln:I,entity_id:n,layout_id:U,rel_module:i}).relActionData=r,L.custData=s,L.displayLabel=c.label,L.relselector=m,L.idselector=t,L.activityView="activity_split_wrapper"===t?Crm.userDetails.openActRelView:Crm.userDetails.closedActRelView,$L("#"+p).length&&Lyte.Component.render("crm-activity-rel-wrapper",L,"#"+p)}var M=C>0?C:v.length;if(M>2){var _=$L("#newLeftPanel").width(),D=(window.innerWidth-_-61)/M;if(4===M){var w=.26*D;0===_&&(w=.05*D),D+=w}$L("crm-activity-rel-list").css("width",D)}}}catch(e){murphy.error(e)}},validateLimit:function(e,t){if(t=void 0===t?e.parentElement.parentElement.parentElement.parentElement.id.split("_")[1]:t,Crm.isActivitySplitDone&&!crmRelatedList.isNotActivitySubPersonality(t,"Services"===getObj("module").value||void 0)){var a=$("#relatedListCols_"+t),l=void 0!==e?e.parentElement:a[0],n=[],i="#relateList_"+(void 0!==e?$(l)[0].id.split("_")[1]:a.find("ul")[0].id.split("_")[1]);$(i+" input[type='checkbox']:checked").each((function(e,t){n.push($(t).val())}));var r=crmRelatedList.mandFields[t]+5,s=a.find(".columnListBtn"),o=a.find("#customize_error");if(n.length>=r){var d=a.width()-38;o.css("width",d+"px"),o.show(),s.addClass("actColumnsDiv");var c=$("#"+l.id).find(".ccNotSelected");c.addClass("disableColumns"),c.removeClass("enableColumns"),$(i+" input[type='checkbox']:checked").each((function(e,t){var a=$(t.parentElement.parentElement);a.addClass("enableColumns"),a.removeClass("disableColumns")})),$(".disableColumns input[type='checkbox']").attr("disabled","disabled"),$("#currentRL").find(".ddMenus.boxShadowMask").find("#menuColumnListView").removeClass("oH pR").addClass("oA").css({"max-height":renderingUtils.windowOuterHeight/3-50})}else{s.removeClass("actColumnsDiv"),o.hide(),$(".disableColumns input[type='checkbox']").removeAttr("disabled","");var u=$("#"+l.id).find(".ccNotSelected");u.removeClass("disableColumns"),u.addClass("enableColumns")}}},restrictMandatorySortable:function(e){if(Crm.isActivitySplitDone&&!crmRelatedList.isNotActivitySubPersonality(e,"Services"===getObj("module").value||void 0)){var t="#relatedListCols_"+e+" .sortable ";$(t+"input[type='checkbox']:disabled").each((function(e,t){$(t.parentElement.parentElement).addClass("actMandColUnSort")})),$(t).sortable({placeholder:"ui-state-highlight",items:"li:not(.actMandColUnSort)"})}},renderScoringRelList:function(e,t){var a=networkUtils.returnDependencyFiles(["scoring_entityscore.js","scoringrules_store.js","series_store.js"],ResourceConstants.CRMClient);a=(a=(a=a.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("scoringRulesChart")],ResourceConstants.CRM))).concat(networkUtils.returnDependencyFiles(networkUtils.includeChartFiles(),ResourceConstants.CRM))).concat(networkUtils.returnDependencyFiles(["scoring_entityscore.css"],ResourceConstants.CRMClient));var l=document.querySelector("crm-entityscores-view");null===l?Lyte.injectResources(a,void 0,(function(){Lyte.Component.render("crm-entityscores-view",e,"#scorigRulesTable"),t&&t()})):(l.component.setData(e),t&&t())},getSeriesCompletedDateFromRelatedListIndex:function(e){var t=2;return e.forEach((function(e,a){"ENDDATE"!==e.COLUMNNAME||(t=a)})),t},getSeriesCompletedDateFromBody:function(e,t,a){var l="";return e.forEach((function(e){e.ENTITYID!==t||(l=e.CONTENT[a])})),l},getSeriesCompletedDateFromRelatedList:function(e){var t="";for(data in crmRelatedList.EachModuleData)if("SERIESPERSONALITY"===crmRelatedList.EachModuleData[data].name){var a=this.getSeriesCompletedDateFromRelatedListIndex(crmRelatedList.EachModuleData[data].heading);t=this.getSeriesCompletedDateFromBody(crmRelatedList.EachModuleData[data].body,e,a)}return t},OpenSeriesPop:function(e,t,a){a&&a.stopPropagation();var l=!1;t||(t=this.getSeriesCompletedDateFromRelatedList(e)),""!==t&&"null"!==t&&(l=!0);var n=$("#seriesPop").eq(0);void 0!==n&&n.remove();var i=networkUtils.returnDependencyFiles(["crm-add-to-series.js"],ResourceConstants.CRMClient);i=(i=(i=i.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("Series")],ResourceConstants.CRM))).concat(networkUtils.returnDependencyFiles(["series-configs.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT))).concat(networkUtils.returnDependencyFiles(["series_store.js"],ResourceConstants.CRMClient)),Lyte.injectResources(i,void 0,(function(){var t={};t.entityId=e,t.entityIdVsDate=detailView.entityIdVsDate,t.cadenceCompleted=l,Lyte.Component.render("crm-series-pop",t,"#mainMenuTabDiv")}))},isNotActivitySubPersonality:function(e,t){return!(Crm.isActivitySplitDone&&("TASKSHISTORYPERSONALITY"===e||"CALLSHISTORYPERSONALITY"===e||"EVENTSHISTORYPERSONALITY"===e||"TASKSPERSONALITY"===e||"EVENTSPERSONALITY"===e||"CALLSPERSONALITY"===e||"APPOINTMENTSPERSONALITY"===e||"APPOINTMENTSHISTORYPERSONALITY"===e)&&!t)},isSplitActivitySubModule:e=>(e.includes("Appointments")&&(e="Appointments__s"),!(!Crm.isActivitySplitDone||"Tasks"!==e&&"Calls"!==e&&"Events"!==e&&"Appointments__s"!==e)),isActDataPresent:function(e){return!!(e.Calls&&e.Calls.data||e.Events&&e.Events.data||e.Tasks&&e.Tasks.data||e.Appointments&&e.Appointments.data)},clearHiglihtData:function(){0===$("#fieldHighlightId").length&&void 0!==detailView.oldfieldUpdateJson&&detailView.oldfieldUpdateJson.length>0&&(detailView.oldfieldUpdateJson={})},loadSegmentationInfo:function(e,t){store.findRecord("rfm_entity",e,null,null,null,t).then((function(e){e&&e[0]&&((e=e[0]).$.set("module",t),Lyte.Component.render("related-list-segment",e,"#segmentation"),document.getElementById("segmentation").style.display="block")}))},mOverEv:function(e){var t=$(e);$("#rlDropDown_"+t.attr("ddid")).css("visibility","visible"),$("#"+t.attr("ddname")+"_"+t.attr("ddid")).css("visibility","visible")},navigate:function(e,t){var a=(t=$(t)).attr("data-cid"),l={};t&&(l=JSON.parse(t.attr("data-params")));var n={};n.id=crmRelatedList.EntityId,n.module=crmRelatedList.Module,n.rid=l.rid,n.isSortRequest=!1,"navigate_next_rellist"===a?n.fromIndex=parseInt(l.fromIndex)+10:"navigate_previous_rellist"===a&&(n.fromIndex=parseInt(l.fromIndex)-10),crmRelatedList.ajaxReq(n,a)},ajaxReq:function(e,t,a,l){var n=new crmRequestPool;crmRelatedList.addFiltersParam(e),n.initiate({action:Crm.getCrmBasePath()+"/NewRelatedList.do?action=getData",type:"GET",data:e,success:function(n){crmRelatedList.load(e.module,e.id,n,a,t,l);var i=!(!Lyte.Router.getRouteInstance()||"canvas"!==Lyte.Router.getRouteInstance().routeName);if(n&&n[e.module]&&n[e.module][e.rid]){var r,s=n[e.module][e.rid];if(r=Lyte.Router.getRouteInstance().parent.currentModel?Lyte.Router.getRouteInstance().parent.currentModel.module_name:Lyte.Router.getRouteInstance().parent.parent.currentModel.module.module_name,s.isLinkingModule&&!1===e.isSortRequest&&(refreshFollowDiv(),multiLookupsView.updateMXNFieldValue(void 0,s.listRelationId,s.defaultvalue),void 0===Crm.userDetails.LAYOUTRULEAVAILABLE||!0===Crm.userDetails.LAYOUTRULEAVAILABLE&&Crm.userDetails.LRINVOLVEDMODULES.contains(r)))if(CFRExec.holdFormRule()&&!i)CFRExec.evalAjaxEditForLayoutRule(r,s.mxndummycolumn,"",!0,"related_list");else{var o=Lyte.registeredMixins["crm-detailcanvas-utils"],d=$L("crm-detailview-canvas")[0].component;o.LRuleManField=[],o.layoutRuleShowFld=[],o.layoutRuleShowSections=[],o.layoutRuleSubformSections=[],o.revlayoutRuleShowFld=[],o.revlayoutRuleShowSections=[],o.revlayoutRuleSubformSections=[],o.revLRuleManField=[],o.lRuleSubformSections=[],o.executeLayoutRuleforAjaxEdit(d.getData("originalRecord"),d)}}crmRelatedList.populateFilterValues(e.rid),$L("#RelatedListCommonDiv #RelatedListDataScrollInteg,#RelatedListCommonDiv #RelatedListDataScroll,#RelatedListCommonDiv #ticketsDropDiv").scroll({preventVertical:!0});var c=$L.debounce(detailView.detailViewRelatedListDataScrollHandler,1);$("#RelatedListCommonDiv .lyteScrollBar").off("scroll",c).on("scroll",c)}})},sortColumn:function(e,t){var a=JSON.parse($(t).attr("data-params")),l=$(t).attr("data-enc"),n=a.fieldLabel,i=!(void 0!==l&&(!0===l||"true"===l)),r=a.fieldId;""==r&&(r=n,a.fieldId=n);for(var s,o=crmRelatedList.getSetSinglePersonalityData(a.rid,"get"),d=o.sortColumnId,c=o.sortOrderString,u="",m=o.heading.length,p=0;p<m;p++)if(o.heading[p].FIELDID==d||""==o.heading[p].FIELDID&&o.heading[p].FIELDLABEL==d){u=o.heading[p].FIELDLABEL,u=o.heading[p].COLUMNNAME==a.columnName?o.heading[p].FIELDLABEL:o.heading[p].FIELDID;break}"INVITEDEVENTSPERSONALITY"!=o.name?void 0!==i&&i&&crmRelatedList.showRelListSortDiv(a.fieldLabel,o.name.toLowerCase()+"_"+o.listRelationId,""==r?null:u,t,e,I18n.getMsg("crm.column.sort.asc"),I18n.getMsg("crm.column.sort.desc"),u,c,I18n.getMsg("crm.column.unsort"),!0,r):(s=r==d&&"sort_asc"==c?"Desc":"Asc",sortViewColumns($ESAPI.encoder().encodeForJavaScript(a.fieldLabel),o.name.toLowerCase()+"_"+o.listRelationId,$ESAPI.encoder().encodeForJavaScript(""==r?null:encodeURIComponent(u)),s,"false",!0,r));sE(e)},getPersonalityModuleObj:function(e){var t=crmRelatedList.EachModuleData;for(key in t)if(t.hasOwnProperty(key)&&key==e)return t[key]},getSetSinglePersonalityData:function(e,t,a){var l=crmRelatedList.EachModuleData;for(var n in l)if(l[n].listRelationId==e){if("get"==t)return l[n];l[n]=a}},getTaregetString:function(e){var t=crmRelatedList.getPersonalityModuleObj(e);return t?t.name.replace(/_/g,"$").toLowerCase()+"_"+t.listRelationId:""},toggle:function(e){var t=JSON.parse($(e.target).attr("data-params")).rid;$("div[data-rnode='"+t+"']").toggleClass("listHide")},checkBodyContent:function(e){return 0!=crmRelatedList.getSetSinglePersonalityData(e,"get").body.length},createEditLink:function(e,t,a,l){var n=crmRelatedList.Module,i=crmRelatedList.EntityId,r=Crm.getCrmBasePath()+"/EditEntity.do?module="+encodeURIComponent(e)+"&id="+t+"&returnAnchor="+a+"&editprimmodule="+(null==n?null:encodeURIComponent(n))+"&parenteditentityid="+i;return null!=l&&(r=r+"&recordNum="+(null==l?null:encodeURIComponent(l))),r},createDeleteLink:function(e,t,a,l,n,i,r){var s=crmRelatedList.Module,o=crmRelatedList.EntityId,d=Crm.getCrmBasePath()+"/MassDelete.do?module="+encodeURIComponent(e)+"&id="+t+"&actModule="+(null==s?null:encodeURIComponent(s))+"&actId="+o+"&nextStep=relatedlist";return l&&(d=d+"&tomodule="+encodeURIComponent(i)),null!=n&&(d=d+"&isCustLukup="+n),d=d+"&isajax=true#"+a},createRemoveEntityFromEventLink:function(e,t,a,l,n){void 0===l&&(l=crmRelatedList.Module),void 0===n&&(n=crmRelatedList.EntityId);var i=Crm.getCrmBasePath()+"/RemoveInvitees.do?action=removeEntity&module="+encodeURIComponent(e)+"&id="+t+"&actModule="+(null==l?null:encodeURIComponent(l))+"&actId="+n+"&fromSrc=rl&isajax=true";return void 0!==a&&(i=i+"#"+a),i},createStatusChangeLink:function(e,t,a,l){var n=crmRelatedList.Module,i=crmRelatedList.EntityId,r=crmRelatedList.getSetSinglePersonalityData(e,"get"),s=r.sortColumnId,o=r.sortOrderString;return Crm.getCrmBasePath()+"/CampaignStatusChange.do?module="+encodeURIComponent(t)+"&id="+a+"&parentModule="+(null==n?null:encodeURIComponent(n))+"&action=showStatus&parentId="+i+"&isajax=true&returnAnchor="+l+"&sortColumnString_"+e+"="+(null==s?null:encodeURIComponent(s))+"&sortOrderString_"+e+"="+(null==s?null:encodeURIComponent(o))+"&listRelationID="+e},createCloseLink:function(e,t){var a=crmRelatedList.Module;return Crm.getCrmBasePath()+"/closeTask.do?action=CloseTask&taskid="+e+"&&module="+(null==a?null:encodeURIComponent(a))+"&id="+crmRelatedList.EntityId+"&nextStep=relatedlist&isajax=true#"+t},creareEditLinkForProducts:function(e,t,a,l,n,i){var r=crmRelatedList.Module;return Crm.getCrmBasePath()+"/ShowMultiValuesForAdd.do?moduleid="+crmRelatedList.EntityId+"&rid="+e+"&pname="+t+"&returnAnchor="+a+"&tomodule="+encodeURIComponent(i)+"&Edit=true&othermoduleid="+l+"&frommodule="+(null==r?null:encodeURIComponent(r))},createRemoveLinkForContactRole:function(e,t,a){var l="";return null!=e&&(l=l+"&whoId="+e),null!=t&&(l=l+"&whatId="+t),Crm.getCrmBasePath()+"/potentials/deleteContPotRel.do?module=Potentials"+l+"&nextStep=relatedlist&isajax=true#"+a},bindFileUploaderForRelatedListAttachments:function(e){$(e.save).prop("disabled",!0);$(e.clickable).FileUploader({workdriveUploadData:e.wddetails,isSendToWorkdrive:e.issendtowd,previewsContainer:e.container,createImageThumbnails:!1,needWMSFallback:!0,needVirusFilter:!0,clickable:e.clickable,previewTemplate:e.previewtemplate,uploadMethod:e.uploadmethod,maxFiles:e.uploadlimit,maxFilesize:e.uploadsizelimit,totalFilesize:e.uploadsizelimit,flexSize:e.uploadsizeflex,parallelUploads:e.parallelupload,progressRatio:e.progressratio,fileSizeBase:e.filesizebase,save:e.save,cancel:e.cancel,preventUploadObjDestroy:e.preventUploadObjDestroy,fromSrc:e.fromSrc,init:function(){var t=this;t.on("proceed",(function(t){if(t.preventDefault(),t.stopPropagation(),"proceed"===fileAttachSubmitIntercept("fileUpload",this)){var a=new FormData(document[e.mainform]);if(this.options.isSendToWorkdrive&&document.querySelector('crm-related-list-view-header[related-module="Attachments"]')){var l=this.options.successfullyUploadedFiles,n="";if(l.length>0||failedFiles.length>0)for(var i=l.length,r=0;r<i;r++)n+=","+l[r].resource_id;a.append("temp_resource_ids",n)}else this.getIdsAsFormData("uploadId","uploadIds",a);commonUtils.showHideLoadingDiv(!0);var s;a=new FormData(document[e.mainform]);this.getIdsAsFormData("uploadId","uploadIds",a),commonUtils.showHideLoadingDiv(!0),$.ajax({url:document[e.mainform].action,type:"POST",data:a,contentType:!1,processData:!1,success:(s=this,function(t){let a=t.match(/var failedFilesName = '(.+)';/);if(commonUtils.showHideLoadingDiv(!1),document.querySelector('crm-related-list-view-header[related-module="Attachments"]')){if(Crm.userDetails.isWorkdriveConfigured)if(t.includes("Insufficient Myfolder Storage"))crmui.showMsgBand("error",I18n.getMsg("crm.workdrive.file.attach.insufficient.myfolder.storage.admin"),6e3);else if(t.includes("Storage space exceeded"))crmui.showMsgBand("error",I18n.getMsg("crm.fileuploader.entityattachments.message.507"),6e3);else if(t.includes("Unable to process your request"))crmui.showMsgBand("error",I18n.getMsg("crm.workdrive.file.attach.failure"),6e3);else if(a&&""!==a){let e=a[1];crmui.showMsgBand("error",I18n.getMsg("crm.attachment.error.upload",e),6e3)}else{for(var l="",n=moduleDetailedInfo.modules,i=n.length,r=0;r<i;r++)if("Documents"===n[r].module_name){l=n[r].singular_label;break}if(""!==l){var o=[],d="/crm/org"+Crm.userDetails.ZGID+"/tab/Documents";o.push(l),o.push(d),crmui.showMsgBand("success",I18n.getMsg("crm.workdrive.file.attach.success",o),5e3),$(".crm-msg-cnt").addClass("zwd-suc-msg")}}else _cruxUtils.showCustomMessage({params:{ltPropType:"success",ltPropMessage:I18n.getMsg("crm.label.function.file.upload.success"),ltPropDuration:1500}});Lyte.triggerEvent("relatedList",{module:"Attachments"}),refreshFollowDiv()}else $(e.attachframe).contents().find("body").html(t);$(s.options.cancel).click()}),error:function(e){return function(){$(e.options.cancel).hide(),_cruxUtils.showMsgBand(e.options.messageType.error,I18n.getMsg("crm.fileuploader.message.uploadfailedretry"),"infinity"),commonUtils.showHideLoadingDiv(!1),$(e.options.cancel).click()}}(this)}),$(this.options.save).prop("disabled",!0)}})),t.on("error",(function(e){if(e.previewElement){if(e.virus){var t=$(e.previewElement).find(".virusAlert");t.css("display","inline-block");var a=t.parent()[0];a.addEventListener("mouseenter",(function(){crmui.showTooltip(I18n.getMsg("crm.fileuploader.ToolTip.virusdetected"))})),a.addEventListener("mouseleave",(function(){crmui.hideTooltip()}))}var l=e.previewElement.querySelector("[data-dz-errormessage]");l&&l.innerHTML.length>20&&$(l).attr("title",l.innerHTML)}})),t.on("customizepreviewtemplate",(function(e){if(e.previewElement){var t=e.previewElement.querySelector("[data-dz-name]"),a=e.name;a&&a.length>20&&$(t).attr("title",a);var l="";a&&""!==a&&-1!==a.lastIndexOf(".")&&(l=a.slice(a.lastIndexOf(".")+1)),(t=e.previewElement.querySelector(".dz-filename"))&&$(t).prepend(FileUploader.createElement('<span class="mR15 '+function(e){var t="file";if("txt"===e||"pdf"===e||"html"===e||"xml"===e)return e;var a={png:["jpeg","jpg","gif","png","webp","bmp","svg"],word:["doc","docx","odt","rtf"],excel:["csv","xls","xlsx","ods","xlsm","sxc","tsv"],ppt:["odp","pps","pot","pptx","ppt"],movie:["avi","wmv","mp4","mpeg","mpg","mov","flv","mkv","webm"],mp3:["mp3","ogg","oga","wma","m4p","m4a","au","3gp"],zip:["zip","zipx","tar","gz","z","cab","rar","bz2","lzh","7z","img","iso"]};for(var l in a)if(a.hasOwnProperty(l)){var n=a[l];if($.inArray(e,n)>=0){t=l;break}}return t}(l)+'-icon"></span>')),(t=e.previewElement.querySelector("[data-dz-size]"))&&(t.textContent="("+this.options.getFileSize(e.size)+")")}})),t.on("terminate",(function(){if(this.options.isSendToWorkdrive&&document.querySelector('crm-related-list-view-header[related-module="Attachments"]')){var t=this.options.successfullyUploadedFiles,a=this.options.failedUploadedFiles,l=[];if(t.length>0||a.length>0){for(var n=t.length,i=0;i<n;i++)l.push(t[i].resource_id);var r=a.length;for(i=0;i<r;i++)l.push(a[i].resource_id)}var s={};s.params={resource_ids:l[0],record_id:Lyte.Router.getRouteInstance().parent.getDynamicParam()};networkUtils.lyteInitiateRequest("/crm/v2/__internal/workdrive/temporary_files","DELETE",s).then((function(){Lyte.triggerEvent("relatedList",{module:"Attachments"}),refreshFollowDiv()}))}hideAnimatePopup(e.popupname),setTimeout((function(){$("#attachPopup").remove()}),100)}))},uploadBean:{crmHandback:{entityId:e.entityid,module:e.module,action:e.action},user:{zgid:e.zgid},uploadTo:e.resourcetype,folderId:e.workspace}})},attachDocs:function(){crmRelatedList.hideAttachDropList(),openZDocsLinkDialog(Crm.userDetails.ZGID)},attachFromTeamDrive:function(e,t,a){var l={WDDomainURL:httpprotocol+RebrandLinkUtil.getProperty("teamdriveURL"),primaryActionCallBack:crmRelatedList.addAttachmentsFromTeamDrive,closeActionCallBack:crmRelatedList.removeOverallScroll,countToSelectMaxFiles:10,width:"850px",height:"calc( "+renderingUtils.windowHeight+"px - 3rem - 20px )",disableFolderSelection:!1,canShare:!0,service:"ZohoCRM",showSearch:!0,zsoid:crmZgid},n={showshareDialog:!0,shareFields:{collaboratorShare:!1,teamShare:!0,orgShare:!1,externalShare:!0,linkOnly:!0},defaultShare:"teamShare",externalShareTag:"crm_team"};1==e?(l.countToSelectMaxFiles=t,l.handBackObj={fieldId:fileupload.fieldID},l.primaryActionCallBack=crmRelatedList.addAttachmentFieldFromTeamDrive,l.closeActionCallBack=crmRelatedList.removeOverallScroll,n={showshareDialog:!0,shareFields:{collaboratorShare:!1,teamShare:!0,orgShare:!1,externalShare:!0,linkOnly:!0},defaultShare:"teamShare",externalShareTag:"crm_team"},Crm.trackSpotLightAction("Workdrive Picker Click",{Place:"file upload field"}),a&&(l.customLandingLocation=a)):Crm.trackSpotLightAction("Workdrive Picker Click",{Place:"related list"}),l.shareOptions=n;var i=RebrandLinkUtil.getProperty("TD_JS_STATIC_URL");Lyte.removeFromCache([i]),Lyte.injectResources([i],void 0,(function(){(new WorkDrive).showResourcePicker(l),crmRelatedList.hideAttachDropList()})),$("body").addClass("oH")},removeOverallScroll:function(){$("body").removeClass("oH")},attachFromCloudPicker:function(){if($("#multipleFieldsEditPop").is(":visible"))BlueprintAttachment.showCloudPickerDialog();else{var e={feature:"attachments",cloud_services:"gdrive,box,skydrive,dropbox,evernote,onedrive",callback:crmRelatedList.addAttachmentsFromCloudPicker,max_file_selection:5};Crm.userDetails.GOOGLE_SHARED_DRIVE&&(e.cloud_services="gdrive,googleTD,box,skydrive,onedrive");var t=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("cloudpicker")],ResourceConstants.CRM),a=networkUtils.returnDependencyFiles(["crmcloudpicker.js"],ResourceConstants.CRMClient),l=t.concat(a);Lyte.injectResources(l,void 0,(function(){Lyte.Component.render("crm-cloud-picker",{options:e,showCloudPicker:!0},"#show")}))}},attachFromCL:function(){store.findAll("workdrive-conf").then((function(e){var t=e[0],a={WDDomainURL:httpprotocol+RebrandLinkUtil.getProperty("teamdriveURL"),primaryActionCallBack:crmRelatedList.addAttachmentsFromTeamDrive,countToSelectMaxFiles:10,width:"850px",height:"calc( "+renderingUtils.windowHeight+"px - 3rem - 20px )",disableFolderSelection:!1,canShare:!0,service:"ZohoCRM",showSearch:!0,zsoid:crmZgid,draggableDialog:!1};a.entityId=crmZgid,a.customLandingLocation=t.my_folder_view_id;var l={showshareDialog:!0,shareFields:{collaboratorShare:!1,teamShare:!0,orgShare:!1,externalShare:!0,linkOnly:!0,setByRecord:!0},defaultShare:"teamShare",externalShareTag:"crm_team"};Crm.userDetails.isWorkdriveConfigured&&(l.defaultShare="linkOnly"),Crm.trackSpotLightAction("Documents Picker Click",{Place:"related list"}),a.shareOptions=l;for(var n,i=$("#multipleFieldsEditPop").is(":visible"),r=i?$("#multipleFieldEditModule").val():$("#module").val(),s=i?$("#multipleFieldEditEntityId").val():$("#entityId").val(),o=moduleDetailedInfo.modules,d=o.length,c=0;c<d;c++)if(o[c].module_name===r){n=o[c].id;break}var u="crm.tab.requesters.module.index-module.entity.detail"===Lyte.Router.getRouteInstance().transition.info.route?Lyte.Router.getRouteInstance().parent.parent.parent:Lyte.Router.getRouteInstance().parent.parent,m=store.peekRecord(moduleRecordMapping[u.getDynamicParam()].id,Lyte.Router.getRouteInstance().parent.getDynamicParam())[moduleRecordMapping[u.getDynamicParam()].display_field.api_name],p={};p.appKey=t.app_key,p.appToken=t.web_token,p.entityValue=m,p.entityLabel="record",p.module=n,a.entityId=s,a.setByRecordOptions=p;var h=RebrandLinkUtil.getProperty("TD_JS_STATIC_URL");Lyte.removeFromCache([h]),Lyte.injectResources([h],void 0,(function(){(new WorkDrive).showResourcePicker(a),crmRelatedList.hideAttachDropList()}))}))},attachDesktop:function(){crmRelatedList.hideAttachDropList();var e=$(event.target);detailView.btnAddClassSelected(e),showCustomizePopup("Attach",crmRelatedList.getTaregetString(e.attr("data-relid")),void 0,e.attr("data-fromsrc"))},attachZDocs:function(){crmRelatedList.hideAttachDropList(),openForDocs("zdoc",RebrandLinkUtil.properties.docsURL)},attachGDocs:function(e){crmRelatedList.hideAttachDropList();var t=window.location.hostname;t==RebrandLinkUtil.properties.CRMURL?openForDocs("gdoc",RebrandLinkUtil.properties.GadGetsURL,RebrandLinkUtil.properties.CRMURL,e):openForDocs("gdoc",RebrandLinkUtil.properties.GadGetsURL,t,e)},attachFromCloudPickerForFileupload:function(e,t){detailView.fileuploadfieldId=e,detailView.fileuploadParentModule=t;var a={feature:"FileuploadField",cloud_services:"gdrive,box,skydrive,dropbox,evernote,onedrive",callback:crmRelatedList.addAttachmentsFromCloudPickertoFileUpload,max_file_selection:5};!0!==featuresAvailable.CLOUDPICKER_GADGETS&&(a.cloud_services="gdrive,box,skydrive,onedrive,dropbox"),Crm.userDetails.GOOGLE_SHARED_DRIVE&&(a.cloud_services="gdrive,googleTD,box,skydrive,onedrive"),Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-cloud-picker-mixin.js"],ResourceConstants.CRMClient),void 0,(function(){Lyte.registeredMixins["crm-cloud-picker-mixin"].loadCloudPicker(a)}))},addAttachmentsFromCloudPickertoFileUpload:function(e){var t=document.querySelector("crm-cloud-picker").component;t.setData("showFreezeLayerAgain",!0),t.hidePicker.call(t);var a=detailView.fileuploadfieldId;fileupload.isSubformField&&(fileupload.fieldID=a,fileupload.rowNum=detailView.rowNum);$("#attachSize_"+(fileupload.isSubformField?a+fileupload.rowNum:a)).val();var l,n=!1,i=Lyte.registeredMixins["crm-detailcanvas-utils"];i&&(i.isFormViewCommonCheck()||i.isWizardView())&&(n=!0,l=$L("crm-canvas-form")[0].component);var r={data:JSON.stringify(e)};r.fieldId=a,r.module=detailView.fileuploadParentModule,r.fromFileUploadField=!0,r.fromGoogleDocs="CloudPicker";var s=Lyte.registeredMixins["crm-uploadfields-mixin"];r.attachedSize=s.getFileUploadAttachedSize(fileupload.cxPropId),r.attachedCount=s.getFileUploadAttachedCount(fileupload.cxPropId),l&&n&&(r.module=l.getData("module_name"));var o=s.getCruxFileUploadCreateComponents(fileupload.cxPropId)[0].component;o.setData("cxPropErrorMessage","");var d=Crm.getCrmBasePath()+"/docsSubmit.do";networkUtils.makeRequest(d,"POST",{params:r,success_callback:function(e){switch(renderingUtils.removeFreezeLayer(),null!==t.data&&t.setData("showFreezeLayerAgain",!1),e.trim()){case"crm.FileuploadField.size.newlimitstmt":let t=fileupload.maximum_allowed_size?fileupload.maximum_allowed_size:crmConstants.FileUploader.fileUploadFieldAttachments.uploadSizeLimit;return void renderingUtils.showCustomAlert(I18n.getMsg("crm.FileuploadField.size.newlimitstmt",t));case"crm.FileuploadField.size.limitstmt":case"crm.attachment.name.check":case"crm.attachment.fileUploadField.Maxcount.check":case"crm.attachment.fileUploadField.Mincount.check":return void renderingUtils.showCustomAlert(I18n.getMsg(e.trim()))}var a=JSON.parse(e);switch($(".zc_fileup_alert").addClass("dNImp"),a.message){case"crm.FileuploadField.size.newlimitstmt":let e=fileupload.maximum_allowed_size?fileupload.maximum_allowed_size:crmConstants.FileUploader.fileUploadFieldAttachments.uploadSizeLimit;return o.setData("cxPropErrorMessage",parent.I18n.getMsg("crm.FileuploadField.size.newlimitstmt",e)),!1;case"crm.attachment.fileUploadField.Maxcount.check":case"crm.attachment.fileUploadField.Mincount.check":return o.setData("cxPropErrorMessage",parent.I18n.getMsg(a.message)),!1;case"File not found":return o.setData("cxPropErrorMessage",parent.I18n.getMsg("crm.refresh.page")),!1;case"crm.attachment.0bytes.file":return o.setData("cxPropErrorMessage",parent.I18n.getMsg("crm.FileuploadField.empty.file.error")),!1}a.fromFileUpload.length&&fileupload.createAttachElement(a,void 0,n)}})},attachLink:function(){if(crmRelatedList.hideAttachDropList(),$("#multipleFieldsEditPop").is(":visible")){var e=Handlebars.templates.LinkAttachPopUp();$("#topBandPopup").html(e),showAnimatePopup("topBandPopup"),setTimeout((function(){$("#attachmentUrl").focus()}),100)}else{var t=networkUtils.returnDependencyFiles(["editlinkurl.js"],["editlinkurl.js"],ResourceConstants.CRMClient),a=networkUtils.returnDependencyFiles(["linkattachment.css"],["linkattachment.css"],ResourceConstants.CRMClient),l=t.concat(a);Lyte.injectResources(l,void 0,(function(){Lyte.Component.render("crm-linkattachment",{module:crmRelatedList.Module,record:crmRelatedList.EntityId,header:I18n.getMsg("crm.attach.link.from.url")},"#show"),document.getElementById("showLinkUrlPop").ltProp("show",!0)}))}},hideAttachDropList:function(){$(".atch-droplist").hide(0)},addNew:function(e,t){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l={module:a.module,primid:crmRelatedList.EntityId,primmodule:encodeURIComponent(crmRelatedList.Module),returnAnchor:a.name.toLowerCase()+"_"+a.listRelationId,listRelationId:a.listRelationId,fillUpModule:encodeURIComponent(crmRelatedList.Module),entityid:crmRelatedList.EntityId,relmodule:encodeURIComponent(crmRelatedList.Module)};if("REPORTINGCONTACTSPERSONALITY"===a.name){var n=$("#subvalue_ACCOUNTID");if(!n[0]||n[0]&&""===n[0].text){var i=Crm.moduleInfo.Contacts.translatedSingularLabel,r=Crm.moduleInfo.Accounts.translatedSingularLabel;return void crmui.showMsgBand("error",I18n.getMsg("crm.contact.hierarchy.new_reporting_contact_error",[i,r]),"7000")}}"true"!=l.isCustLookup&&("Accounts"==l.relmodule||"Contacts"==l.relmodule?l.fillUpFieldId=getObj("id").value:getObj("accountId")&&(l.fillUpFieldId=getObj("accountId").value));var s="crm.tab.module.create";moduleRecordMapping[a.module]&&"team_based"===moduleRecordMapping[a.module].access_type&&moduleRecordMapping[a.module].private_profile&&"Requesters"===moduleRecordMapping[a.module].private_profile.name&&(s="crm.tab.requesters.module.create"),l.entityname=crmRelatedList.getEntityNameForCreate(),Lyte.Router.transitionTo({route:s,dynamicParams:[a.module]}).data=l}},getEntityNameForCreate:function(){let e,t=crmRelatedList.Module,a=store.peekRecord(moduleRecordMapping[t].id,crmRelatedList.EntityId);if(!a||"Leads"!==t&&"Contacts"!==t)e=$("#entityName").val();else{var l=Crm.userDetails.NAME_FORMAT;l=l.split(",");var n=[];l.forEach((function(e){switch("Salutation"!==e&&(e=e.replace(" ","_")),e){case"Salutation":e="Salutation";break;case"Last Name":e="Last_Name";break;case"First Name":e="First_Name"}"Salutation"!==e&&a[e]&&n.push(a[e])})),e=n.join(" ").trim()}return e},addProducts:function(e){var t=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),a=t.name.toLowerCase()+"_"+t.listRelationId;addMultiValue(crmRelatedList.EntityId,encodeURIComponent(crmRelatedList.Module),encodeURIComponent(t.module),a,void 0,void 0,t.listRelationId),detailView.btnAddClassSelected($(e.target))},addPotentialsProducts:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var t=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),a=t.name.toLowerCase()+"_"+t.listRelationId,l=$("#parentCurrencyISOCode").val(),n=$("#parentExchangeRate").val();addMultiValue(crmRelatedList.EntityId,encodeURIComponent(crmRelatedList.Module),encodeURIComponent(t.module),a,l,n,t.listRelationId)}},importListPrice:function(e,t){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l={module:encodeURIComponent(a.module),priceBookId:crmRelatedList.EntityId,step:"1"};$(t).attr("data-params",JSON.stringify(l)),Lyte.Router.transitionTo({route:"crm.settings.import",queryParams:l}).data={itsRelatedModule:"true",currStep:"sourceType",parentModule:encodeURIComponent(crmRelatedList.Module),parentId:crmRelatedList.EntityId}}},editProducts:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var t=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid"));editAllValues(crmRelatedList.EntityId,encodeURIComponent(crmRelatedList.Module),encodeURIComponent(t.module),void 0,void 0,t.listRelationId,t.name)}},newTask:function(e,t){Crm.userDetails.isStorageLimitReached?Crm.showStorageExceedPopup():(selectAction("NewTask",crmRelatedList.getTaregetString($(e.target).attr("data-relid")),encodeURIComponent(crmRelatedList.Module),crmRelatedList.EntityId,t,e),detailView.btnAddClassSelected(t))},newEvent:function(e,t){Events.globalCreate(e,"relatedlist_new",t),detailView.btnAddClassSelected(t)},logCall:function(e,t){Crm.userDetails.isStorageLimitReached?Crm.showStorageExceedPopup():(isNewCallView?Crm.globalCreate(e,"relatedlist_new",t,void 0,void 0,void 0,void 0,!0):selectAction("NewCall",crmRelatedList.getTaregetString($(e.target).attr("data-relid")),encodeURIComponent(crmRelatedList.Module),crmRelatedList.EntityId,t,e),detailView.btnAddClassSelected(t))},newAppointment:function(e,t){Events.globalCreate("Appointments","relatedlist_new",t),detailView.btnAddClassSelected(t)},sendMailEvent:function(){var e=moduleRecordMapping[crmRelatedList.Module].singular_label;EntSendMail(encodeURIComponent(crmRelatedList.Module),crmRelatedList.EntityId,"",e)},associateMxN:function(e,t){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l=JSON.parse('{"fldName":""}');l.fldName=a.mxnfieldid,l.relatedlist=!0,multiLookupsView.frameMLJSON(l);var n=multiLookupsView.getParamJson(l.fldName);n.entityId=crmRelatedList.EntityId,n.relatedlist=!0,n.searchmodule=a.searchmodule,Crm.trackSpotLightAction("Multi Select Lookup - Add Click",{Module:n.searchmodule}),n.select=!1,n.fldName=a.mxnfieldid,n.linkingmodule=a.module,n.relid=a.listRelationId,n.parentModule=crmRelatedList.Module,multiLookupsView.submitMultiLookupForm("addmore",Crm.getCrmBasePath()+"/Search.do","topBandPopup",n),detailView.btnAddClassSelected(t)}},associateLookupRel:function(e){var t=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid"));if("REPORTINGCONTACTSPERSONALITY"===t.name){var a=$("#subvalue_ACCOUNTID");if(!a[0]||a[0]&&""===a[0].text){var l=Crm.moduleInfo.Contacts.translatedSingularLabel,n=Crm.moduleInfo.Accounts.translatedSingularLabel;return void crmui.showMsgBand("error",I18n.getMsg("crm.contact.hierarchy.assign_reporting_contact_error",[l,n]),"7000")}}var i=JSON.parse('{"fldName":""}');i.fldName=t.listRelationId,i.relatedlist=!0,i.lookuprel=!0,multiLookupsView.frameMLJSON(i);var r=multiLookupsView.getParamJson(i.fldName);r.entityId=crmRelatedList.EntityId,r.parentModule=crmRelatedList.Module,r.relatedlist=!0,r.searchmodule=t.module,r.lookuprel=!0,r.select=!1,r.linkingmodule=null,r.relid=t.listRelationId,multiLookupsView.submitMultiLookupForm("addmore",Crm.getCrmBasePath()+"/Search.do","topBandPopup",r),detailView.btnAddClassSelected(e.target)},dissociateMxN:function(e,t){var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l="{}";l.fldName=a.mxnfieldid,multiLookupsView.frameMLJSON(l);var n=multiLookupsView.getParamJson(l.fldName);n.entityId=crmRelatedList.EntityId,n.link="edit",n.relatedlist=!0,n.searchmodule=a.searchmodule,Crm.trackSpotLightAction("Multi Select Lookup - Edit Click",{Module:n.searchmodule}),n.select=!0,n.fldName=a.mxnfieldid,n.linkingmodule=a.module,n.relid=a.listRelationId,n.parentModule=a.parentModule,multiLookupsView.submitMultiLookupForm("addmore",Crm.getCrmBasePath()+"/Search.do","topBandPopup",n),detailView.btnAddClassSelected(t)},editLookupRel:function(e){for(var t=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),a=Crm.userDetails.LOOKUPVRINVOLVEDMODULES,l=[],n=[],i=a?a.length:0,r=0;r<i;r++){var s=a[r].split(":");l.push(s[0]),n.push(s[1])}var o=!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(t.module),d=o&&Crm.userDetails.VRFUNCINVOLVEDMODULES.contains(t.module);if(o&&l.contains(t.module)&&n.contains(t.listRelationId)||d&&Crm.userDetails.VALIDATION_RULE_CF_LOOKUPSUPPORT&&Crm.userDetails.CVRFuncExecuteForAllFields){var c=Crm.moduleInfo?Crm.moduleInfo[t.module].singularLabel:t.module;_cruxUtils.showCustomAlert({params:{ltPropType:"info",ltPropYield:!0,ltPropPrimaryMessage:I18n.getMsg("crm.validation.rule.relListRestrictTitle",c),ltPropSecondaryMessage:I18n.getMsg("crm.validation.rule.relListRestrictBody",[c,t.fieldlabel]),ltPropButtons:[{type:"accept",appearance:"default",text:"Ok",cxPropZcqa:"button_1"}]}})}else crmRelatedList.editLookupRelNew(e,t)},editLookupRelNew:function(e,t){var a=JSON.parse('{"fldName":""}');a.fldName=t.listRelationId,a.relatedlist=!0,a.lookuprel=!0,multiLookupsView.frameMLJSON(a);var l=multiLookupsView.getParamJson(a.fldName);(l=multiLookupsView.getParamJson(a.fldName)).entityId=crmRelatedList.EntityId,l.parentModule=crmRelatedList.Module,l.link="edit",l.relatedlist=!0,l.mlaction="edit",l.searchmodule=t.module,Crm.trackSpotLightAction("Multi Select Lookup - Edit Click",{Module:l.searchmodule}),l.select=!0,l.linkingmodule=t.module,l.relid=t.listRelationId,multiLookupsView.submitMultiLookupForm("edit",Crm.getCrmBasePath()+"/Search.do","topBandPopup",l),detailView.btnAddClassSelected(e.target)},newPotential:function(e,t){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l="";"Accounts"==crmRelatedList.Module||"Contacts"==crmRelatedList.Module?l=getObj("id").value:getObj("accountId")&&(l=getObj("accountId").value);var n={module:encodeURIComponent(a.module),primid:crmRelatedList.EntityId,primmodule:encodeURIComponent(crmRelatedList.Module),returnAnchor:a.name.toLowerCase()+"_"+a.listRelationId,listRelationId:a.listRelationId,isCustLookup:!1,entityid:crmRelatedList.EntityId,fillUpModule:encodeURIComponent(crmRelatedList.Module),fillUpFieldId:encodeURIComponent(l),relmodule:encodeURIComponent(crmRelatedList.Module)};n.entityname=crmRelatedList.getEntityNameForCreate();var i="crm.tab.module.create";moduleRecordMapping[a.module]&&"team_based"===moduleRecordMapping[a.module].access_type&&moduleRecordMapping[a.module].private_profile&&"Requesters"===moduleRecordMapping[a.module].private_profile.name&&(i="crm.tab.requesters.module.create"),Lyte.Router.transitionTo({route:i,dynamicParams:[a.module]}).data=n,detailView.btnAddClassSelected(t)}},newPotentialForContacts:function(e,t){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l={module:encodeURIComponent(a.module),primid:crmRelatedList.EntityId,primmodule:encodeURIComponent(crmRelatedList.Module),returnAnchor:a.name.toLowerCase()+"_"+a.listRelationId,listRelationId:a.listRelationId,recordNum:$("#recordNum").val(),relmodule:encodeURIComponent(crmRelatedList.Module),fillUpModule:encodeURIComponent(crmRelatedList.Module),entityid:crmRelatedList.EntityId,relmodule:encodeURIComponent(crmRelatedList.Module)};l.entityname=crmRelatedList.getEntityNameForCreate(),Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:[a.module]}).data=l,detailView.btnAddClassSelected(t)}},newCompetitor:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var t=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid"));selectAction("Competitor",crmRelatedList.getTaregetString($(e.target).attr("data-relid")),void 0,void 0,t.listRelationId,e)}},newProject:function(){selectAction("Project",crmRelatedList.getTaregetString($(event.target).attr("data-relid")),void 0,void 0,void 0,event)},newAssociateProject:function(){selectAction("Associate Project",crmRelatedList.getTaregetString($(event.target).attr("data-relid")),void 0,void 0,void 0,event)},importAction:function(e,t){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l={module:encodeURIComponent(a.module),campaignId:crmRelatedList.EntityId,step:"1"};$(t).attr("data-params",JSON.stringify(l)),Lyte.Router.transitionTo({route:"crm.settings.import",queryParams:l}).data={itsRelatedModule:"true",dataScope:"myOrgData",currStep:"sourceType",parentModule:encodeURIComponent(crmRelatedList.Module),parentId:crmRelatedList.EntityId}}},updateCampaignStatus:function(e){var t=$(e.target).attr("data-relid");crmRelatedList.showCampaignStatusDiv(t)},importOrgAction:function(e,t){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var a=crmRelatedList.getPersonalityModuleObj($(e.target).attr("data-relid")),l={module:encodeURIComponent(a.module),campaignId:crmRelatedList.EntityId,dataScope:"myOrgData"};$(t).attr("data-params",JSON.stringify(l)),Lyte.Router.transitionTo({route:"crm.settings.import",queryParams:l}).data={currStep:"sourceType",parentId:crmRelatedList.EntityId}}},hideRLPersonality:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var t=crmRelatedList.getPersonalityModuleObj($(e.target.parentElement).attr("data-relid"));CustomRelatedListObj.doCustomRleatedList(t.name.toLowerCase()+"_"+t.listRelationId,"hide")}},reorderRLPersonality:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var t=crmRelatedList.getPersonalityModuleObj($(e.target.parentElement).attr("data-relid"));CustomRelatedListObj.doCustomRleatedList(t.name.toLowerCase()+"_"+t.listRelationId,"reorder")}},editRLPersonality:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var t=crmRelatedList.getPersonalityModuleObj($(e.target.parentElement).attr("data-relid"));CustomRelatedListObj.doCustomRleatedList(t.name.toLowerCase()+"_"+t.listRelationId,"edit")}},deleteRLPersonality:function(e){if(Crm.userDetails.isStorageLimitReached)Crm.showStorageExceedPopup();else{var t=crmRelatedList.getPersonalityModuleObj($(e.target.parentElement).attr("data-relid"));CustomRelatedListObj.doCustomRleatedList(t.name.toLowerCase()+"_"+t.listRelationId,"del")}},sendsurvey:function(e,t){var a=null,l={action:"surveyDetails",from:"sendsurvey",entityId:crmRelatedList.EntityId,module:crmRelatedList.Module};null!=$("#entIdForZMail")&&"null"!==$("#entIdForZMail").val()&&null!=$("#entIdForZMail").val()&&(a=$("#entIdForZMail").val(),l.entIdForZMail=a),$(t).attr("data-params",JSON.stringify(l)),ZSurvey.showSurveyDetails(t)},attendsurvey:function(e,t){var a=null,l={action:"surveyDetails",from:"attendsurvey",entityId:crmRelatedList.EntityId,module:crmRelatedList.Module};null!=$("#entIdForZMail")&&"null"!==$("#entIdForZMail").val()&&null!=$("#entIdForZMail").val()&&(a=$("#entIdForZMail").val(),l.entIdForZMail=a),$(t).attr("data-params",JSON.stringify(l)),ZSurvey.showSurveyDetails(t)},addDefaultRelatedList:function(e,t){var a=$("#id").val(),l=$("[name='module']").val();l||(l=detailView.currentModule);var n=Crm.getCrmBasePath()+"/CustomRelatedList.do?action=addUnselectedRelatedList&module="+l+"&listRelationId="+t+"&entityId="+a,i=csrfParamName+"="+encodeURIComponent(csrfToken);mR(n,(function(e){n=Crm.getCrmBasePath()+"/CustomizePage.do?module="+l+"&id="+t+"&entityid="+a+"&from=frmCustomRL",mR(n,(function(e){$("#topBandPopup").html(e),$("#DefaultRLSuccessMsg").html(I18n.getMsg("crm.newrelatedlist.label.releatedList.added")),mailsetCenter("DefaultRLSuccessMsg"),show("DefaultRLSuccessMsg"),setTimeout((function(){$("#DefaultRLSuccessMsg").hide()}),2e3),$("[name='rlContentChngd']").length>0&&$("[name='rlContentChngd']").val("true")}))}),i)},changePortal:function(e){var t=$(e),a=t.val();if(a!=t.attr("prevVal")){t.attr("prevVal",a);var l=JSON.parse(t.attr("data-params")),n={};n.id=crmRelatedList.EntityId,n.module=crmRelatedList.Module,n.rid=l.rid,n.isSortRequest=!1;var i=$("#portalRListSel option:selected").text();"All Portals"!=a?(n.portalName=i,n.allPortals=!1):n.allPortals=!0,crmRelatedList.ajaxReq(n)}},showatchPop:function(e,t){var a,l,n,i,r=$(e),s=$(".eventActionsMenu");l=r.offset().top+r.outerHeight(),Utils.windowWidth,r.offset().left,r.outerWidth();var o=$("body").find("#bp-attachment");"none"==o.css("display")&&"bluePrint"==t&&(l=(i=r.parents(".attachmentsLabel")).offset().top+i.outerHeight(),a=i.offset().left,n=i.outerWidth(),o.css({top:l,position:"absolute",right:"initial","z-index":"250",left:a,display:"block",width:n}));r=$(e);$(s).is(":visible")&&s.hide(),"none"==r.parent().children("ul").css("display")?r.parent().children("ul").stop().slideDown(200):r.parent().children("ul").stop().slideUp(0),detailView.btnAddClassSelected($(e))},getUrlTitle:function(e){var t=$(e).val(),a=$("#invalidUrl");if(""===t)$("#linkattachmentTitle")[0].value="",$("#linkattachmentTitleTr").hide(),$("#attachlinkbtn").prop("disabled",!0),a.hide();else if(validationUtils.isValidWebUrl(t)){a.hide(),commonUtils.showHideLoadingDiv(!0);var l={attachment_url:t};networkUtils.makeRequest("/crm/v2.1/Attachments/actions/process_url","GET",{params:l,success_callback:function(e){commonUtils.showHideLoadingDiv(!1),"error"===e.status?($("#attachlinkbtn").prop("disabled",!0),a.show(),a[0].innerText=I18n.getMsg("crm.custombutton.valid.url.check")):(a.hide(),""===e.process_url.title?$("#linkattachmentTitle")[0].value="Untitled":$("#linkattachmentTitle")[0].value=e.process_url.title,$("#linkattachmentTitleTr").show(),$("#attachlinkbtn").prop("disabled",!1))}})}else a[0].innerText=I18n.getMsg("crm.custombutton.valid.url.check"),a.show()},onUrlInputChange:function(e){clearTimeout(this.timer),this.timer=setTimeout((function(){crmRelatedList.getUrlTitle(e)}),500)},openLinkAndTitleChange:function(e,t,a){window.open(t).opener=null},addLink:function(e){var t=$("#attachmentUrl").val();if(t.length>3e3)return crmui.showMsgBand("error",I18n.getMsg("maxlenmsg"),"2500"),!1;if(!validationUtils.isValidWebUrl(t))return crmui.showMsgBand("error",I18n.getMsg("crm.custombutton.valid.url.check"),"2500"),!1;var a=Crm.getCrmBasePath()+"/fileattach.do";if(getElemById("attachTotCnt")&&(a+="?attachTotCnt="+getElemById("attachTotCnt").value),"proceed"!==fileAttachSubmitIntercept("attachLink"))return!1;var l={module:$("#module")[0].value,id:$("#id")[0].value,attachmentUrl:t};return networkUtils.makeRequest(a,"POST",{params:l,success_callback:function(t){if(!e)if("Link already exists"==t)crmui.showMsgBand("error",I18n.getMsg("crm.attach.link.exists"),"2500");else if("invalid_link"===t||""===t)crmui.showMsgBand("error",I18n.getMsg("crm.custombutton.valid.url.check"),"2500");else if(crmRelatedList.hideLinkPopup(),"canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName)Lyte.triggerEvent("relatedList",{res:t});else if(document.querySelector('crm-related-list-view-header[related-module="Attachments"]'))Lyte.triggerEvent("relatedList",{module:"Attachments",category:"links"}),refreshFollowDiv();else if(getElemById("attachTotCnt")){var a=document.createElement("tempDivForAttLink");a.innerHTML=t;var l=getElemById("eventAttachmentDiv");l.appendChild(a),EvalInnerScript(a),l.removeChild(a),$("#eventsRightPanelAttachDiv").removeClass("noDataFountDetail"),$("#eventsAttachButtonDiv").parent("td").removeClass("noDataFountDetailtxt")}else crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,t)}}),!1},docsTabTeamSetupCallback:function(e){var t={},a={};if(void 0!==e.installationObj){var l=e.installationObj.data;t.team_id=l.attributes.team_id,t.wd_org_id=l.attributes.owner,t.installed_id=l.id}a.params=t,networkUtils.lyteInitiateRequest("/crm/v2/settings/workdrive/integrate","POST",a).then((function(){if(null!==Lyte.Router.getRouteInstance().parent.getDynamicParam()&&"Documents"===Lyte.Router.getRouteInstance().parent.getDynamicParam()){var e=document.querySelector("crm-content-libraries");if(e){var t=e.component;t.processAndLoadContentLibraryPage.call(t)}}featuresAvailable.WD_CONTENT_LIBRARY=!0;var a=networkUtils.returnDependencyFiles(["zworkdrive-conf-model.js","crm-related-list-wd-attachments.js"],ResourceConstants.CRMClient);Lyte.injectResources(a,void 0,(function(){var e=$(".newSelect").find("select");store.findAll("workdrive-conf").then((function(t){var a=Lyte.Router.getRouteInstance().routeName;if(void 0===a||"storage"!==a){var l=t[0],n={},i=$("#multipleFieldsEditPop").is(":visible"),r=i?$("#multipleFieldEditModule").val():$("#module").val();n.module=r,n.moduleApiName=moduleApiMapping[r],n.entityId=i?$("#multipleFieldEditEntityId").val():$("#entityId").val();var s=!0;store.findAll("workdrive-record-folder",null,null,null,n).then((function(t){var a=crmConstants.FileUploader.relatedListAttachments.previewtemplate,i=!1;if(l.available)if(l.configured){var r=t[0].workdrive_folder_id;if(null===r)return void crmui.showMsgBand("error",I18n.getMsg("crm.workflow.save.error"),5e3);i=!0;var o={};o.id=Lyte.Router.getRouteInstance().parent.getDynamicParam(),o.mod=Lyte.Router.getRouteInstance().parent.parent.getDynamicParam();var d=crmConstants.moduleDisplayField[o.mod];void 0===d&&(d=store.peekRecord("module",moduleRecordMapping[o.mod].id).display_field.api_name),n.entityName=store.peekRecord(moduleRecordMapping[o.mod].id,o.id)[d],n.jwtToken=l.web_token,n.parendWorkspaceId=r,crmui.showMsgBand("success","Your Zoho CRM account has been configured successfully with the specified Zoho WorkDrive",5e3)}else if(s=!1,"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus())CrmPlusImpl.trigger("handleWorkDriveIntegration");else{var c={wdURL:httpprotocol+RebrandLinkUtil.getProperty("teamdriveURL"),portalId:crmZgid,productName:"ZohoCRM",appKey:l.app_key,serviceOrgTypeId:5,callbackFn:crmRelatedList.docsTabTeamSetupCallback,signedAppKey:l.signed_app_key,hideLeftPanel:!0},u=RebrandLinkUtil.getProperty("WD_SDK_JS_STATIC_URL");Lyte.removeFromCache([u]),Lyte.injectResources([u],void 0,(function(){(new ZWDSDK).loadOnboarding(c)}))}s?(showAnimatePopup("topBandPopup"),thirdPartyUtils.bindSelect2(e),crmRelatedList.bindFileUploaderForRelatedListAttachments({wddetails:n,issendtowd:i,save:crmConstants.FileUploader.relatedListAttachments.saveElement,uploadmethod:crmConstants.FileUploader.uploadMethod.ZFSNG,acceptedfiles:crmConstants.FileUploader.relatedListAttachments.acceptedfiles,previewtemplate:a,clickable:crmConstants.FileUploader.relatedListAttachments.clickableElement,container:crmConstants.FileUploader.relatedListAttachments.previewElement,cancel:crmConstants.FileUploader.relatedListAttachments.cancelElement,mainform:crmConstants.FileUploader.relatedListAttachments.mainformElement,uploadlimit:crmConstants.FileUploader.relatedListAttachments.uploadLimit,uploadsizeflex:crmConstants.FileUploader.relatedListAttachments.uploadSizeFlex,uploadsizelimit:crmConstants.FileUploader.relatedListAttachments.uploadSizeLimit,parallelupload:crmConstants.FileUploader.relatedListAttachments.parallelUpload,filesizebase:crmConstants.FileUploader.relatedListAttachments.fileSizeBase,progressratio:crmConstants.FileUploader.relatedListAttachments.progressratio,tabload:crmConstants.FileUploader.relatedListAttachments.tabLoadElement,attachframe:crmConstants.FileUploader.relatedListAttachments.targetAttachFrameElement,popupname:crmConstants.FileUploader.relatedListAttachments.popupName,entityid:n.entityId,module:n.module,action:crmConstants.FileUploader.relatedListAttachments.action,resourcetype:crmConstants.Docs.ResourceTypes.ENTITY_ATTACHMENTS,workspace:crmConstants.Docs.WorkSpace.WS_ATTACHMENT_LIBRARY,zgid:Crm.userDetails.ZGID,preventUploadObjDestroy:{prevent:$("#multipleFieldsEditPop").is(":visible"),objBindTo:"#multipleFieldsEditPop"}})):hideAnimatePopup("topBandPopup")}))}else Lyte.Router.getRouteInstance().refresh()}))}))}),(function(){document.querySelector("crm-content-libraries").component.showHideMessageElement.call(self,"#contentLibraryMessageBox","error",!0,I18n.getMsg("crm.mailmerge.internal.error"))}))},addAttachmentsFromCloudPicker:function(e){var t=document.querySelector("crm-cloud-picker").component;t.setData("showFreezeLayerAgain",!0),t.hidePicker.call(t);var a=e,l=moduleApiMapping[detailView.currentModule],n="/crm/v2.2/"+l+"/"+detailView.entityId+"/Attachments",i=a.length;if(i>0){var r={data:a},s={attachments:JSON.stringify(r)};"Events"===l?(s.id=detailView.entityId,s.module=l,s.attachTotCnt=$("#attachTotCnt").val(),n=Crm.getCrmBasePath()+"/fileattach.do",networkUtils.makeRequest(n,"POST",{params:s,success_callback:function(e){if(renderingUtils.removeFreezeLayer(),null!==t.data&&t.setData("showFreezeLayerAgain",!1),document.querySelector('crm-related-list-view-header[related-module="Attachments"]')){if(e.startsWith("maxsizereached_")){var a=e.split("maxsizereached_")[1],l=I18n.getMsg("crm.attachment.error.upload",[a])+" "+I18n.getMsg("crm.attachment.max.size.reached",[10]);crmui.showMsgBand("error",l,1e4)}else if(e.startsWith("failure")){a=e.split("failure_")[1],l=I18n.getMsg("crm.attachment.error.upload",[a])+" "+I18n.getMsg("crm.tryagain.message");crmui.showMsgBand("error",l,1e4)}Lyte.triggerEvent("relatedList",{module:"Attachments"}),refreshFollowDiv()}else{var n=document.createElement("tempDivForAttLink");n.innerHTML=e;var i=getElemById("eventAttachmentDiv");i.appendChild(n),EvalInnerScript(n),i.removeChild(n)}}})):networkUtils.makeRequest(n,"POST",{params:s,success_callback:function(e){renderingUtils.removeFreezeLayer(),null!==t.data&&t.setData("showFreezeLayerAgain",!1),crmRelatedList.processCloudPickerAttachmentsResponse(e),Crm.trackSpotLightAction("Cloudpicker Files Attached",{Place:"related list",Count:i});var a={id:detailView.entityId,module:detailView.currentModule,pname:"ATTACHMENTSPERSONALITY"};"canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{module:"Attachments"}),networkUtils.makeRequest(Crm.getCrmBasePath()+"/NewRelatedList.do?action=getData","GET",{params:a,success_callback:function(e){crmRelatedList.load(detailView.currentModule,detailView.entityId,e)}})}})}},processCloudPickerAttachmentsResponse:function(e){var t=e.data;if(t||"NO_PERMISSION"!==e.code){for(var a=t.length,l=0,n=!1,i=!1,r=!1,s=1024,o=0;o<a;o++){var d=t[o];if("SUCCESS"!==d.code)if(l++,"MYFOLDER_STORAGE_LIMIT_EXCEEDS"===d.code)i=!0;else if("FILE_SIZE_EXCEEDS"===d.code){n=!0;var c=d.details.size/1048576;s=Math.round(100*c)/100}else"storage space exceeds"===d.message&&(r=!0)}if(l>0){var u=I18n.getMsg("crm.attachment.error.upload",[l]);u+=n?" "+I18n.getMsg("crm.attachment.max.size.reached",[s]):r?" "+I18n.getMsg("crm.fileuploader.entityattachments.message.507"):i?" "+I18n.getMsg("crm.workdrive.file.attach.insufficient.myfolder.storage.admin"):" "+I18n.getMsg("crm.tryagain.message"),crmui.showMsgBand("error",u,1e4)}else if(Crm.userDetails.isWorkdriveConfigured){var m="",p=moduleDetailedInfo.modules,h=p.length;for(o=0;o<h;o++)if("Documents"===p[o].module_name){m=p[o].singular_label;break}if(""!==m){var v=[],L="/crm/org"+Crm.userDetails.ZGID+"/tab/Documents";v.push(m),v.push(L),crmui.showMsgBand("success",I18n.getMsg("crm.workdrive.file.attach.success",v),5e3),$(".crm-msg-cnt").addClass("zwd-suc-msg")}}else _cruxUtils.showCustomMessage({params:{ltPropType:"success",ltPropMessage:I18n.getMsg("crm.label.function.file.upload.success"),ltPropDuration:1500}})}else crmui.showMsgBand("error",I18n.getMsg("crm.security.error"),1e4)},addAttachmentsFromTeamDrive:function(e){var t=e.callbackDataFromWorkDrive,a=t.filesModel,l=t.permissionModel,n=moduleApiMapping[detailView&&detailView.currentModule?detailView.currentModule:$L("#module")[0].value],i="/crm/v2/"+n+"/"+detailView.entityId+"/Attachments",r=l.length;if(r>0){for(var s=[],o=detailView.currentModule,d=moduleRecordMapping[o].id,c=0;c<r;c++){var u=l[c],m=u.link;if(5===u.shareType){var p={entity_id:detailView.entityId,module:d};m=m+"?authId="+$ESAPI.encoder().encodeForURL(JSON.stringify(p))}var h={$link_url:m,File_Name:u.fileName,$resource_id:a[c].id,$type:"teamdrive"};s.push(h);var v={data:s}}if("proceed"!==fileAttachSubmitIntercept("attachFromTeamDrive",s))return!1;"canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{module:"Attachments",category:"links"});var L={attachments:JSON.stringify(v)};"Events"==n?(L.id=detailView.entityId,L.module=n,L.attachTotCnt=$("#attachTotCnt").val(),i=Crm.getCrmBasePath()+"/fileattach.do",networkUtils.makeRequest(i,"POST",{params:L,success_callback:function(e){if(document.querySelector('crm-related-list-view-header[related-module="Attachments"]'))Lyte.triggerEvent("relatedList",{module:"Attachments",category:"links"}),refreshFollowDiv();else{var t=document.createElement("tempDivForAttLink");t.innerHTML=e;var a=getElemById("eventAttachmentDiv");a.appendChild(t),EvalInnerScript(t),a.removeChild(t)}}})):("Bundles__s"===n&&(i=Crm.changeBundlesApiVersion(i,"v2.2")),networkUtils.makeRequest(i,"POST",{params:L,success_callback:function(){Crm.trackSpotLightAction("Workdrive Files Attached",{Place:"related list",Count:r}),Lyte.triggerEvent("relatedList",{module:"Attachments",category:"links"}),_cruxUtils.showCustomMessage({params:{ltPropType:"success",ltPropMessage:I18n.getMsg("crm.workdrive.file.attach.from_WD.success"),ltPropDuration:4e3}})}}))}return!1},addAttachmentFieldFromTeamDrive:function(e){var t=e.callbackDataFromWorkDrive,a={};a.resources=t.permissionModel;var l=t.handbackobj.fieldId;a.fieldId=l;var n=!1,i=Lyte.registeredMixins["crm-detailcanvas-utils"];i&&(i.isFormViewCommonCheck()||i.isWizardView())&&(n=!0);var r=t.permissionModel,s=r.length;if(s>0){for(var o=[],d=0;d<s;d++){var c={$link_url:(e=r[d]).link,File_Name:e.fileName,$type:"teamdrive"};o.push(c);var u={data:o}}if("proceed"!==fileAttachSubmitIntercept("attachFromTeamDrive",o))return!1;var m={attachments:JSON.stringify(u)};m.id=l,m.action="storeTeamDriveAttachments";for(var p=Crm.getCrmBasePath()+"/fileattach.do",h=a.resources.length,v=[],L=0;L<h;L++)v.push(a.resources[L]);networkUtils.makeRequest(p,"POST",{params:m,success_callback:function(e){for(var t=e.teamDriveData,l=t.length,i=0;i<l;i++)for(var r=v.length,s=0;s<r;s++)if(v[s].link===t[i].link){v[s].encryptedUploadId=t[i].encryptedUploadId;break}a.resources=v,fileupload.createAttachElement(a,"FieldAttachmentsTeamDrive",n)}})}return $("body").removeClass("oH"),!1},hideLinkPopup:function(){hideAnimatePopup("topBandPopup"),detailView.hideDetailviewMenu(!0),detailView.btnRemoveClassSelected(),hideMenu()},showRelListSortDiv:function(e,t,a,l,n,i,r,s,o,d,c,u){u=""==u?null:u;var m=$("#sortrellist_div").css("display","block").offset({left:0,top:0});m.offset({left:$(l).offset().left,top:$(l).offset().top+16});var p=$("#sorted_column"),h="<div><ul>";(e=$ESAPI.encoder().encodeForJavaScript(e),a=$ESAPI.encoder().encodeForJavaScript(a),s=$ESAPI.encoder().encodeForJavaScript(s),null!=p)?(null!=p.attr("title")&&(sortOrderString=p.attr("class")),h+=s==e?"sort_asc"==o?"<li><a style='' href='javascript:void(0);' onclick=\"javascript:sortViewColumns('"+e+"','"+t+"','"+a+"','Desc','false',"+c+",'"+u+"');\">"+r+"&nbsp;<span class='svgIconsImg sort_desc'></span></a></li>":"<li><a style='' href='javascript:void(0);' onclick=\"sortViewColumns('"+e+"','"+t+"','"+a+"','Asc','false',"+c+",'"+u+"');\">"+i+"&nbsp;<span class='svgIconsImg sort_asc'></span></a></li>":"<li><a href='javascript:void(0);' onclick=\"sortViewColumns('"+e+"','"+t+"','"+a+"','Asc','false',"+c+",'"+u+"');\">"+i+"&nbsp;<span class='svgIconsImg sort_asc'></span></a></li><li><a href='javascript:void(0);' onclick=\"sortViewColumns('"+e+"','"+t+"','"+a+"','Desc','false',"+c+",'"+u+"');\">"+r+"&nbsp;<span class='svgIconsImg sort_desc'></span></a></li>"):h+="<li><a href='javascript:void(0);' onclick=\"sortViewColumns('"+e+"','"+t+"','"+a+"','Asc','false',"+c+",'"+u+"');\" >"+i+"&nbsp;<span class='svgIconsImg sort_asc'></span></a></li><li><a href='javascript:void(0);' onclick=\"sortViewColumns('"+e+"','"+t+"','"+a+"','Desc','false',"+c+",'"+u+"');\">"+r+"&nbsp;<span class='sort_desc'></span></a></li>";s==e&&(h+="<li><a href='javascript:void(0);' onclick=\"sortViewColumns('"+e+"','"+t+"','"+a+"','Unsort','true',"+c+",'"+u+"');\" >"+d+"&nbsp;</a></li>"),h+="</ul></div>",m.html(h),m.show()},createNewChildCampaign:function(e){var t=$(e.target),a=crmRelatedList.getPersonalityModuleObj(t.attr("data-relid")),l=t.attr("data-layoutid"),n={module:a.module,primid:crmRelatedList.EntityId,primmodule:crmRelatedList.Module,returnAnchor:a.name.toLowerCase()+"_1458",listRelationId:a.listRelationId,recordNum:$("#recordNum").val(),relmodule:crmRelatedList.Module,fillUpModule:crmRelatedList.Module,entityid:crmRelatedList.EntityId,relmodule:crmRelatedList.Module,isCreateChildCampaign:!0};l&&(n.layoutId=l),n.entityname=crmRelatedList.getEntityNameForCreate(),Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:[a.module]}).data=n},clickEventIdVsMethodMapping:{toggleList:"crmRelatedList.toggle",navigate_previous_rellist:"crmRelatedList.navigate",navigate_next_rellist:"crmRelatedList.navigate",sortColumnRL:"crmRelatedList.sortColumn",attachDocuments:"crmRelatedList.attachDocs",teamDrivePicker:"crmRelatedList.attachFromTeamDrive",cloudPicker:"crmRelatedList.attachFromCloudPicker",attachDesktop:"crmRelatedList.attachDesktop",attachZDocs:"crmRelatedList.attachZDocs",attachGDocs:"crmRelatedList.attachGDocs",attachLink:"crmRelatedList.attachLink",attachFromCloudPickerForFileupload:"crmRelatedList.attachFromCloudPickerForFileupload",addAttachmentsFromCloudPickertoFileUpload:"crmRelatedList.addAttachmentsFromCloudPickertoFileUpload",addProducts:"crmRelatedList.addProducts",add:"crmRelatedList.addProducts",addNew:"crmRelatedList.addNew",addVendorProducts:"crmRelatedList.addVendorProducts",addPotentialsProducts:"crmRelatedList.addPotentialsProducts",importListPrice:"crmRelatedList.importListPrice",editProducts:"crmRelatedList.editProducts",newTask:"crmRelatedList.newTask",newEvent:"crmRelatedList.newEvent",logCall:"crmRelatedList.logCall",sendMailEvent:"crmRelatedList.sendMailEvent",addCampaigns:"crmRelatedList.addProducts",addSeries:"crmRelatedList.addSeries",unEnrollSeries:"crmRelatedList.unenrollSeries",associateMxN:"crmRelatedList.associateMxN",dissociateMxN:"crmRelatedList.dissociateMxN",editLookupRel:"crmRelatedList.editLookupRel",associateLookupRel:"crmRelatedList.associateLookupRel",newPotential:"crmRelatedList.newPotential",newPotentialForContacts:"crmRelatedList.newPotentialForContacts",newCompetitor:"crmRelatedList.newCompetitor",addContactRoles:"crmRelatedList.addContactRoles",editContactRoles:"crmRelatedList.editContactRoles",newProject:"crmRelatedList.newProject",newAssociateProject:"crmRelatedList.newAssociateProject",importAction:"crmRelatedList.importAction",updateCampaignStatus:"crmRelatedList.updateCampaignStatus",importOrgAction:"crmRelatedList.importOrgAction",hideRLPersonality:"crmRelatedList.hideRLPersonality",reorderRLPersonality:"crmRelatedList.reorderRLPersonality",editRLPersonality:"crmRelatedList.editRLPersonality",deleteRLPersonality:"crmRelatedList.deleteRLPersonality",sendsurvey:"crmRelatedList.sendsurvey",attendsurvey:"crmRelatedList.attendsurvey",viewCampaignSummary:"ZCampaigns.viewCampaignSummary",viewCampaignRecipientFilters:"ZCampaigns.viewCampaignRecipientFilters",viewRecipientsFromSummary:"ZCampaigns.viewRecipientsFromSummary",navigateCampaignRecipients:"ZCampaigns.filterRecipients",sendMailToMembers:"crmRelatedList.sendNormalMailToMembers",showMembersListView:"CrmCampaignInteg.showMembersListView",newChildCampaign:"crmRelatedList.createNewChildCampaign",showHideFilter:"crmRelatedList.showHideFilter"},clickHandler:function(e,t,a){return!this.clickEventIdVsMethodMapping[a]||(Lyte.registeredMixins["crm-utilities"].executeFunctionByName(this.clickEventIdVsMethodMapping[a],window,e,t),!1)},showMenuList:function(e){if($("#RelatedListDataScroll").length){var t=$(e).offset().top-11,a=$(e).offset().left+20,l=$(e).parent().find(".relListMenuDiv").outerWidth()+20;Crm.userDetails.RTL_ENABLED&&(a-=l),$(e).parent().find(".relListMenuDiv").css({visibility:"visible",position:"fixed",left:a,top:t}).find(".scaleCont").addClass("scaleOne")}else $(e).parent().find(".relListMenuDiv").css("visibility","visible").find(".scaleCont").addClass("scaleOne")},showMouseHoverSettingIcon:function(e){$(e).children("td:first").find(".moreOptions").addClass("activeMenu")},hideMouseHoverSettingIcon:function(e){$(e).children("td:first").find(".moreOptions").removeClass("activeMenu"),$(e).children("td:first").find(".relListMenuDiv").css("visibility","hidden").find(".scaleCont").removeClass("scaleOne")},showRemovePopup:function(e,t,a,l){$(".relListMenuDiv").css({visibility:"hidden"});var n=$("#removepopup"),i=(e=$(e)).attr("data-stdt"),r=(new Date).getTime(),s=e.attr("data-onclick"),o=e.attr("data-stat");if(void 0===a&&(a=$(e.closest("tr").find("td:first").find("a")[0]).text()),void 0===l&&(l=getObj("entityName").value),i>r&&-1!=parseInt(o)){n.find("#remWarningMsg").text(I18n.getMsg("crm.label.event.remove.alert",[l,a]));var d=n.find("#notifyButton").show(),c=n.find("#dontnotifyButton").show();Lyte.registeredMixins["crm-email-auth-util"].getDomainsAuthNPolicy(),d.unbind("click").click((function(a){var l;Lyte.registeredMixins["crm-email-auth-util"].showPopUpForEventModule("notifyButton")||(-1!==s.indexOf("#")?(l=s.substr(0,s.indexOf("#")),s=l+"&isCancelMailNeeded=1"+s.substr(s.indexOf("#"))):s=(l=s)+"&isCancelMailNeeded=1","rl"===t?new Promise((function(e){e(sortRelatedList(s))})).then((function(){renderingUtils.stopEvent(a)})):(commonUtils.showHideLoadingDiv(),Events.removeParticipant(s,e),renderingUtils.stopEvent(a)))})),c.unbind("click").click((function(a){var l;commonUtils.showHideLoadingDiv(),-1!==s.indexOf("#")?(l=s.substr(0,s.indexOf("#")),s=l+"&isCancelMailNeeded=0"+s.substr(s.indexOf("#"))):s=(l=s)+"&isCancelMailNeeded=0","rl"===t?new Promise((function(e){e(sortRelatedList(s))})).then((function(){renderingUtils.stopEvent(a)})):(commonUtils.showHideLoadingDiv(),Events.removeParticipant(s,e),renderingUtils.stopEvent(a))})),d.focus()}else{n.find("#remWarningMsg").text(I18n.getMsg("crm.label.event.remove.participant.message",[l,a,Events.getModuleName(!0,!1)]));var u=n.find("#notifyButton").val(I18n.getMsg("crm.label.event.remove.participant",[l])).show();n.find("#dontnotifyButton").hide(),u.removeAttr("data-params").removeAttr("data-cid"),u.unbind("click").click((function(a){"rl"===t?new Promise((function(e){e(sortRelatedList(s))})).then((function(){renderingUtils.stopEvent(a)})):(commonUtils.showHideLoadingDiv(),Events.removeParticipant(s,e),renderingUtils.stopEvent(a))}))}showAnimatePopup("removepopup"),e.blur(),event&&renderingUtils.stopEvent(event)},unenrollSeries:function(e,t){if(e&&e.$stop_processing)renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"));else{"object"==typeof t&&(t=crmRelatedList.Module);var a=[];if(a.push(Lyte.Router.getRouteInstance().parent.getDynamicParam()),0!==crmRelatedList.seriesSelectedids.length){var l=networkUtils.returnDependencyFiles(["series_store.js","series_mixin.js"],ResourceConstants.CRMClient);l=l.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("relatedRules")],ResourceConstants.CRM)),Lyte.injectResources(l,void 0,(()=>{var e={cadences_ids:crmRelatedList.seriesSelectedids,ids:a};store.triggerAction("cadence","unEnrollSeries",{module:t},{},"POST",e).then((()=>{if(crmRelatedList.seriesSelectedids=[],"detail"===Lyte.Router.getRouteInstance().routeName){commonUtils.showHideLoadingDiv(!1);var a=Crm.getCrmBasePath()+"/NewRelatedList.do?pname=SERIESPERSONALITY&action=getData&module="+t+"&id="+crmRelatedList.EntityId,l={};l.url=a,l.method="GET",store.findAll("dummy",{},!1,!1,l).then((e=>{crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,e),"canvas"===Lyte.Router.getRouteInstance().routeName&&"entity"===Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{res:e,callActivity:!0})}),(e=>{this.checkOrUncheckTheRuleCheckBox(e.error)})),refreshFollowDiv()}else crmListView.reloadCurrentListView();return _cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("crm.entity.unenroll.success",moduleRecordMapping[t].singular_label),ltPropType:"success"}}),"canvas"===Lyte.Router.getRouteInstance().routeName&&Lyte.triggerEvent("relatedList",{module:"Entity_Cadences"}),$L("#unenroll").addClass("hide"),$L("#enroll").removeClass("hide"),$L("#filter").removeClass("hide"),$L(".columnadd").removeClass("hide"),commonUtils.showHideLoadingDiv(!1),e}),(function(e){Lyte.registeredMixins.series_common.routeErrorHandling(e,!1)}))}))}}},selectAllIds:function(){crmRelatedList.seriesSelectedids=[];var e=$L(".seriesChkbox_entity"),t=e.length,a=void 0!==Crm.userDetails.permissions.Crm_Implied_Manage_Enroll_Series&&Crm.userDetails.permissions.Crm_Implied_Manage_Enroll_Series,l=void 0!==Crm.userDetails.permissions.Crm_Implied_Manage_UnEnroll_Series&&Crm.userDetails.permissions.Crm_Implied_Manage_UnEnroll_Series,n=$L("#seriesChkbox");if(l){var i=$L("#addToseries"),r=$L("#seriesUnenroll");if(n.hasClass("lyteCheckboxPartial")){for(var s=0;s<t;s++)e[s].ltProp("checked",!1);return n.removeClass("lyteCheckboxPartial"),l&&(r.addClass("hide"),i.removeClass("hide")),void n[0].component.setData("ltPropChecked",!1)}n.removeClass("lyteCheckboxPartial");var o=n[0],d=!1;for(s=0;s<t;s++){var c=e[s].getAttribute("id");if(!$L("#"+c)[0].component.getData("ltPropDisabled")){d=!0;var u=c.split("seriesChkbox_")[1];o.checked?(crmRelatedList.seriesSelectedids.push(u),$("#"+u).addClass("bg_crmSelectBg"),e[s].ltProp("checked",!0)):(e[s].ltProp("checked",!1),$("#"+u).removeClass("bg_crmSelectBg"))}}!o.checked&&a?(r.addClass("hide"),i.removeClass("hide")):d&&o.checked&&l?(i.addClass("hide"),r.removeClass("hide")):l&&a||(i.addClass("hide"),r.addClass("hide")),!d&&n[0].ltProp("checked")&&n[0].ltProp("checked",!1)}else n[0].ltProp("checked",!1)},selectedIds:function(e){var t=$L("#seriesChkbox"),a=void 0!==Crm.userDetails.permissions.Crm_Implied_Manage_Enroll_Series&&Crm.userDetails.permissions.Crm_Implied_Manage_Enroll_Series,l=void 0!==Crm.userDetails.permissions.Crm_Implied_Manage_UnEnroll_Series&&Crm.userDetails.permissions.Crm_Implied_Manage_UnEnroll_Series;if($L("#seriesChkbox_"+e)[0].checked)$L("#"+e).addClass("bg_crmSelectBg"),crmRelatedList.seriesSelectedids.push(e);else{$L("#"+e).removeClass("bg_crmSelectBg");const a=crmRelatedList.seriesSelectedids.indexOf(e);a>-1&&(crmRelatedList.seriesSelectedids.splice(a,1),t.addClass("lyteCheckboxPartial"),t[0].ltProp("checked",!1))}if(0===crmRelatedList.seriesSelectedids.length&&a)$L("#seriesUnenroll").addClass("hide"),$L("#addToseries").removeClass("hide"),t.removeClass("lyteCheckboxPartial");else if(0!==crmRelatedList.seriesSelectedids.length&&l){$L("#addToseries").addClass("hide"),$L("#seriesUnenroll").removeClass("hide");for(var n=$L(".seriesChkbox_entity"),i=n.length,r=!0,s=0;s<i;s++)if(!n[s].checked){r=!1;break}r?(t.removeClass("lyteCheckboxPartial"),t[0].setData("ltPropChecked",!0)):t.addClass("lyteCheckboxPartial")}else t.removeClass("lyteCheckboxPartial"),$L("#addToseries").addClass("hide"),$L("#seriesUnenroll").addClass("hide")},getEditDeleteLinks:function(e,t,a,l,n){var i="",r="",s="",o="",d="0",c="",u="",m="",p="",h=!1,v=crmRelatedList.getPersonalityModuleObj(e),L=v.name,g=crmRelatedList.getTaregetString(e),I=!1;l.links={};var f=!1,C="",R=$("#topSectionTitle").find("span:first").map((function(){return $(this).text()})).get(),E=R[0]?R[0].trim():null;if((!v.isStandardLookup||L.includes("POTSTAGEHISTPERSONALITY")||L.includes("ATTACHMENTSPERSONALITY")||L.includes("HISTORYPERSONALITY")||L.includes("REPORTINGCONTACTSPERSONALITY")||"Accounts"===crmRelatedList.Module&&"CONTACTSPERSONALITY"===L||"Contacts"===crmRelatedList.Module&&"POTENTIALSPERSONALITY"===L||"CHILDACCOUNTSPERSONALITY"===L)&&(!v.isCustLookUp||v.isLinkingModule)||(f=!0),v.isCustLookUp||f){l.links.lookuprel=!0;var T="&fldName="+e+"&fldId="+e+"&entityId="+crmRelatedList.EntityId+"&parentModule="+crmRelatedList.Module+"&module="+crmRelatedList.Module+"&searchmodule="+t.MODULE+"&unselectedid="+t.ENTITYID;I=!0,1==t.isEditPermissionDenied?(i="",C="multiLookupsView.permissionIssueWarningShow("+t.ENTITYID+","+e+","+t.MODULE+",1)"):(i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g),C="multiLookupsView.submitMultiLookupForm('dissociate', '"+Crm.getCrmBasePath()+"/Search.do?lookuprel=true&relatedlist=true&select=true&mlaction=remove"+T+"', 'deletepopup',null,"+t.ENTITYID+")")}if("ACCOUNTSPERSONALITY"===L||v.isCustomModule&&!v.isLinkingModule)I=!0,i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,void 0,t.MODULE);else if("CHILDACCOUNTSPERSONALITY"==L||"POTENTIALSPERSONALITY"==L||"CASESPERSONALITY"==L||"QUOTESPERSONALITY"==L||"SALESORDERSPERSONALITY"==L||"PURCHASEORDERSPERSONALITY"==L||"INVOICESPERSONALITY"==L||"SOLUTIONSPERSONALITY"==L||"VENDORSPERSONALITY"==L||"REPORTINGCONTACTSPERSONALITY"==L)I=!1,"POTENTIALSPERSONALITY"==L&&(I=!0),i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g,$("#recordNum").val()),"SOLUTIONSPERSONALITY"!=L&&"VENDORSPERSONALITY"!=L||(i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g)),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,void 0,t.MODULE);else if("CONTACTSPERSONALITY"==L||"CAMPAIGNSPERSONALITY"==L||"LEADSPERSONALITY"==L){I=!0;var S=crmRelatedList.Module;!v.isCustLookUp&&"Campaigns"==S||!v.isCustLookUp&&"CAMPAIGNSPERSONALITY"==L?(i=crmRelatedList.createStatusChangeLink(e,t.MODULE,t.ENTITYID,g,$("#recordNum").val()),r=crmRelatedList.createDeleteLink("MultiValued",t.ENTITYID,g,I,v.isCustLookUp,t.MODULE)):(i="LEADSPERSONALITY"==L?crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g):crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g,$("#recordNum").val()),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,v.isCustLookUp,t.MODULE))}else if("VISITSPERSONALITY"==L)I=!0,r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,v.isCustLookUp,t.MODULE);else if(v.isCustomModule&&!v.isLinkingModule)I=!0,i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,v.isCustLookUp,t.MODULE);else if("EMAILSPERSONALITY"==L)I=!1,r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I);else if("ACTIVITYPERSONALITY"===L||"TASKSPERSONALITY"===L||"ACTIVITYHISTORYPERSONALITY"===L||"INVITEDEVENTSPERSONALITY"===L||"TASKSPERSONALITY"===L||"TASKSHISTORYPERSONALITY"===L||"EVENTSPERSONALITY"===L||"EVENTSHISTORYPERSONALITY"===L||"CALLSPERSONALITY"===L||"CALLSHISTORYPERSONALITY"===L)I=!1,r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I),i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g,$("#recordNum").val()),"Tasks"==t.MODULE&&"ACTIVITYHISTORYPERSONALITY"!=L&&2!=t.approveStatus&&(crmRelatedList.EachModuleData[e].isCloseTaskReq&&(s=crmRelatedList.createCloseLink(t.ENTITYID,g)),void 0!==t.recordInsideProcess&&(d=t.recordInsideProcess),m="lnk_delete_Tasks"),"Calls"!=t.MODULE||"ACTIVITYHISTORYPERSONALITY"==L||2==t.approveStatus||"Scheduled"!=t.CALLSTATUS&&"Overdue"!=t.CALLSTATUS||(h=!0,u="relatedListMore_Calls"),"INVITEDEVENTSPERSONALITY"==L&&(o=crmRelatedList.createRemoveEntityFromEventLink(t.MODULE,t.ENTITYID,g),p="lnk_remove_entity");else if("COMPETITORSPERSONALITY"==L){var b=$("#recordNum").val();i=Crm.getCrmBasePath()+"/potentials/EditCompetitor.do?id="+crmRelatedList.EntityId+"&module=Potentials&competitorid="+t.ENTITYID+"&rid="+e+"&returnAnchor="+g+"&recordNum="+(null==b?null:encodeURIComponent(b)),r=Crm.getCrmBasePath()+"/potentials/DeletingCompetitor.do?competitorid="+t.ENTITYID+"&nextStep=relatedlist&isajax=true#"+g}else if("PRICEBOOKSPERSONALITY"==L){I=!0,i="Products"!=(y=crmRelatedList.Module)||v.isCustLookUp?crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g):crmRelatedList.creareEditLinkForProducts(e,L,g,t.ENTITYID,crmRelatedList.Module,t.MODULE),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,v.isCustLookUp,t.MODULE),v.isCustLookUp||(r=crmRelatedList.createDeleteLink("MultiValued",t.ENTITYID,g,I,v.isCustLookUp,t.MODULE))}else if("PRODUCTSPERSONALITY"===L||v.isLinkingModule){I=!0;var y=crmRelatedList.Module,A=t.MODULE;if(v.isLinkingModule&&(A=v.module,isReadOnly=v.readonly,7==businessCardJson.isApproved||2==businessCardJson.isApproved||isReadOnly||v.isEditPermissionDenied||v.isReadOnlyRecord))return;i=crmRelatedList.creareEditLinkForProducts(e,L,g,t.ENTITYID,crmRelatedList.Module,t.MODULE),v.isCustLookUp&&(i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g)),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,v.isCustLookUp,A),v.isCustLookUp||(r=crmRelatedList.createDeleteLink("MultiValued",t.ENTITYID,g,I,v.isCustLookUp,A)),"PriceBooks"==y&&"Products"==A||"Products"==y&&"PriceBooks"==A||(v.isLinkingModule?t.JID?(i=crmRelatedList.createEditLink(a,t.JID,g),"Products"!==y&&"Bundles"!==y||"LinkingModuleBundleRel"!==A||(i=crmRelatedList.createEditLink(y,t.JID,g))):i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g):"Vendors"==y?(I=!1,i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I)):i=v.isCustLookUp?crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g):"")}else"BUNDLESPERSONALITY"===L?r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,!0,v.isCustLookUp,t.MODULE):"CONTACTSROLESPERSONALITY"==L?r=crmRelatedList.createRemoveLinkForContactRole(t.CONTACTID,t.POTENTIALID,g):"ATTACHMENTSPERSONALITY"==L?r=Crm.getCrmBasePath()+"/deleteattachment.do?attachmentid="+t.ENTITYID+"&module="+encodeURIComponent(crmRelatedList.Module)+"&id="+crmRelatedList.EntityId+"&nextStep=relatedlist&isajax=true&creatorId="+t.CreaterId+"#"+g:"APPOINTMENTSPERSONALITY"==L&&(i=crmRelatedList.createEditLink(t.MODULE,t.ENTITYID,g,$("#recordNum").val()),r=crmRelatedList.createDeleteLink(t.MODULE,t.ENTITYID,g,I,v.isCustLookUp,t.MODULE));if(v.readonly){r="",C="",o="";var O=!0}if(""!=i){var N,P,k,M=!1,_=null,D={};if(-1!=i.indexOf("EditEntity.do?")){var w=i.substring(i.indexOf("?")+1),U=w.substring(0,w.indexOf("&"));U=U.substring(U.indexOf("=")+1),"ACTIVITYPERSONALITY"==L||"ACTIVITYHISTORYPERSONALITY"==L||"INVITEDEVENTSPERSONALITY"==L?-1!=w.indexOf("Events")?(N=!0,c="relatedListEdit_Events",D={module:"Events",id:t.ENTITYID,from:"relatedlist_new"}):isNewCallView&&-1!=w.indexOf("Calls")?(_="Cancelled"!=t.CALLSTATUS&&("Scheduled"==t.CALLSTATUS||"Overdue"==t.CALLSTATUS||"Missed"===t.CALLTYPE||t.SMOWNERID==Crm.userDetails.USER_ID),c="relatedListEdit_Calls",D={module:"Calls",id:t.ENTITYID,from:"relatedlist_new"}):(k=!0,c="relatedListEdit_"+$ESAPI.encoder().encodeForHTML(t.MODULE),D={goTo:g,module:encodeURIComponent(t.MODULE),id:t.ENTITYID}):v.isLinkingModule?w.indexOf("module=LinkingModule")>-1?(k=!0,c="relatedListEdit_"+a,D={goTo:g,module:encodeURIComponent(a),id:t.JID}):(k=!0,c="relatedListEdit_"+$ESAPI.encoder().encodeForHTML(t.MODULE),D={goTo:g,module:encodeURIComponent(t.MODULE),id:t.ENTITYID}):"APPOINTMENTSPERSONALITY"==L&&w.indexOf("Appointments")>-1?(N=!0,c="editBtn",D={module:"Appointments",id:t.ENTITYID,from:"relatedlist_new",serviceId:t.serviceId}):(k=!0,c="relatedListEdit_"+$ESAPI.encoder().encodeForHTML(t.MODULE),D={goTo:g,module:encodeURIComponent(t.MODULE),id:t.ENTITYID})}else v.isCustLookUp||"CAMPAIGNSPERSONALITY"!=L&&"CONTACTSPERSONALITY"!=L&&"LEADSPERSONALITY"!=L?(v.isCustLookUp||"PRODUCTSPERSONALITY"!=L&&"PRICEBOOKSPERSONALITY"!=L)&&"COMPETITORSPERSONALITY"!=L||(M=!0):(c="relatedListEdit_Campaigns",P=!0);l.links.editObj={url:i,dataCid:"editbtn",dataParams:D,isShowStatusChange:P,isEditEntity:k,isEventEdit:N,isCallEdit:_,isProductPers:M,editzcqa:c}}if(""!=r&&(!Crm.userDetails.CLIENT_ACCOUNT||Crm.userDetails.CLIENT_ACCOUNT&&Crm.userDetails.CLIENT_TYPE!==crmRelatedList.Module&&Crm.userDetails.moduleVsCriteriaLookup[crmRelatedList.Module]&&Crm.userDetails.moduleVsCriteriaLookup[crmRelatedList.Module][0]!==n.mxnfieldid||!v.isCustLookUp&&"CAMPAIGNSPERSONALITY"===L)){var x=!1,F=!1,Y="",j={};if(v.isCustLookup||"INVOICESPERSONALITY"!=L&&"SALESORDERSPERSONALITY"!=L&&"QUOTESPERSONALITY"!=L?"VISITACTIONSPERSONALITY"!=L&&"SURVEYPERSONALITY"!=L&&(u="lnk_delete_"+t.MODULE):(x=!0,u="showSettings_"+t.MODULE,j={module:encodeURIComponent(t.MODULE),relatedContactId:t.relContactId,id:t.ENTITYID,deleteLink:r,isApproved:t.approveStatus}),!v.isCustLookUp&&("CAMPAIGNSPERSONALITY"==L||"PRODUCTSPERSONALITY"==L||"PRICEBOOKSPERSONALITY"==L||"CONTACTSROLESPERSONALITY"==L||v.isLinkingModule||"Campaigns"==crmRelatedList.Module&&("Leads"==t.MODULE||"Contacts"==t.MODULE))){u="",F=!0;var B="";B="CONTACTSROLESPERSONALITY"==L?moduleRecordMapping.Contacts.singular_label:moduleRecordMapping[t.MODULE].singular_label,Y=I18n.getMsg("crm.mxnLookup.dissociateselectedmessage",[t.CONTENT[0],B,E,moduleRecordMapping[crmRelatedList.Module].singular_label])}f&&(B=moduleRecordMapping[t.MODULE].singular_label,Y=I18n.getMsg("crm.warning.deassociateordelete.entity",B),x&&(j.dissociatelink=C,j.warningMsg=Y)),l.links.deleteObj={url:r,isShowInvoiceMenu:x,isRemoveLink:F,warningMsg:Y,dataParamsDel:j,isCallLink:h,deletezcqa:u,withDissociate:f,dissociatelink:C}}else v.readonly&&(l.links.deleteObj={isDeletePermissionDenied:O});if(""!=o){Y="";B=I18n.getMsg(Crm.getModuleDisplayName(!1,!0,!0)),Y=I18n.getMsg("crm.mxnLookup.dissociateselectedmessage",[t.CONTENT[0],B.toLowerCase(),E,moduleRecordMapping[crmRelatedList.Module].singular_label.toLowerCase()]);var V=$("#entityName").val();l.links.removeObj={url:o,warningMsg:Y,dataParamsRem:j,removezcqa:p,entityName:V}}else v.readonly&&(l.links.removeObj={isDeletePermissionDenied:O});""!=s&&(l.links.closeObj={isUnderProcess:d,url:s,closezcqa:m})},sendNormalMailToMembers:function(e){var t=$(e.target).attr("data-relid"),a=crmRelatedList.getPersonalityModuleObj(t).module,l="CB_"+t;if(CustomButtonJSObjectInit.checkBox&&CustomButtonJSObjectInit.checkBox[l]&&CustomButtonJSObjectInit.checkBox[l].length>0){var n=CustomButtonJSObjectInit.checkBox[l],i={from:"relatedList"};i.frommodule=a,i.isCampaignEmail=!0,i.fromRelatedListNormal=!0,i.idList=n.join(";"),i.listRelationId=t,CrmCampaignInteg.CampaignEmailObject=i,CrmCampaignInteg.sendMailToMembers(),crmListView.trackSendMailClickFromRL(a)}else crmui.showMsgBand("error",I18n.getMsg("crm.campaign.member.email.empty"),3e3)},preProcessForV2Model:function(e){for(var t=e.body,a=t.length,l=[],n=[],i=0;i<a;i++){for(var r=t[i],s={},o=(l=[],e.heading),d=o.length,c=0;c<d;c++){var u=o[c],m=u.SYS_REF_NAME,p="";(null!=r[m="Member_Status1"===m?"Member_Status":m]||r.$member_info&&u.campaign_member_field&&null!=r.$member_info[m])&&(p=crmRelatedList.getDisplayValueByUIType(r,m,u),"Backstage_No_of_Tickets"===m&&"Purchaser"===r.$member_info.Backstage_Role&&(p+=" true")),133===u.UITYPE&&(p.MODULE=u.MODULE_NAME),l.push(p)}s.CONTENT=l,s.approveStatus=r.$approved?1:2,s.MODULE=e.module,s.ENTITYID=r.id,r.$campaign_type&&(s.$campaign_type=r.$campaign_type),r.$member_info&&r.$member_info.Received_By&&(s.Received_By=r.$member_info.Received_By),n.push(s)}e.body=n},getDisplayValueByUIType:function(e,t,a){var l=a.UITYPE,n=a.campaign_member_field?e.$member_info[t]:e[t];if("Full_Name"==a.SYS_REF_NAME){var i=Crm.userDetails.NAME_FORMAT;i=i.split(",");var r=[];return i.forEach((function(t){"Salutation"!=t&&(t=t.replace(" ","_"),e[t]&&r.push(e[t]))})),r.join(" ")}if(133===l)n={MODULE:n.module,ENTITYID:n.id,DISPLAYLABEL:n.name};else if(20===l||8===l||221===l)n={MODULE:"User",ENTITYID:n.id,DISPLAYLABEL:n.name};else if(118===l)if("DOUBLE"===a.TYPE||"CRM_BIGINT"===a.TYPE){if("currency"===a.returnType&&(n=Handlebars.helpers.formatCurrencyValue(n,e.Currency)),("integer"===a.returnType||"decimal"===a.returnType||"longinteger"===a.returnType)&&!0===a.separator){var s=Crm.userDetails.COUNTRY_LOCALE.replace("_","-");"ar-SA"!==s&&"es-PR"!==s&&"bn-BD"!==s&&"ar-AE"!==s&&"ar-KW"!==s||(s="en-US"),n=Intl.NumberFormat(s).format(n);var o=new Intl.NumberFormat(s).format(1.1).replace(/1/g,""),d=new Intl.NumberFormat(s).format(11111).replace(/1/g,""),c=n.split(d).join(Crm.userDetails.numberSeparators.group);if(1===Search.countCharacters(o,n)){var u=o+"([^"+o+"]*)$";c=c.replace(new RegExp(u),Crm.userDetails.numberSeparators.decimal+"$1")}n=c}}else("BIGINT"===a.TYPE&&"datetime"===a.returnType||"DATEINLONG"===a.TYPE&&"date"===a.returnType||"date"===a.returnType||"datetime"===a.returnType)&&(n=Handlebars.helpers.getDateTime(n.replace(/[+-]\d{2}:\d{2}/,"").replace(/-/g,"/").replace(/[T|Z]/g," "),l,a.returnType.toLowerCase()));else if(116===l)"DOUBLE"===a.TYPE?"currency"===a.returnType?n=Handlebars.helpers.formatCurrencyValue(n,e.Currency):116!==l&&(n=parseFloat(n)):("DATE"===a.TYPE||"BIGINT"===a.TYPE&&"longinteger"!==a.returnType)&&(n=Handlebars.helpers.getDateTime(n.replace(/[+-]\d{2}:\d{2}/,"").replace(/-/g,"/").replace(/[T|Z]/g," "),l,a.TYPE.toLowerCase()));else if(100===l)n=n.join(";");else if(999===l)n=n.map((e=>"object"==typeof e?e.Name:e)).join(",");else if(209===l){for(var m=n.length,p=[],h=0;h<m;h++)p.push(n[h].name);n=p.length?p.join(";"):""}else 786===l||200===l||24===l||202===l||333===l?n=Handlebars.helpers.getDateTime(n.replace(/[+-]\d{2}:\d{2}/,"").replace(/\-/g,"/").replace(/[T|Z]/g," "),l):208===l?n=n.name:36===l||143===l||144===l||145===l?n=Handlebars.helpers.formatCurrencyValue(n,e.Currency):34===l?n=parseFloat(n).toFixed(2):40===l?n=parseFloat(n).toFixed(9):"object"==typeof n&&n.name&&(n=n.name);return n},getReloadParams:function(e){var t={};return t.id=crmRelatedList.EntityId,t.module=crmRelatedList.Module,t.isSortRequest=!1,t.rid=e,t},renderFilters:function(e){var t=$("#filterIcon_"+e);if(t.hasClass("zWebSITableFilterDivOpen")&&crmRelatedList.filters[e]){var a=crmRelatedList.getReloadParams(e);delete crmRelatedList.filters[e],crmRelatedList.ajaxReq(a),Crm.trackSpotLightAction("RelatedList Filters - Clear and Closed",{personalityName:crmRelatedList.getPersonalityModuleObj(e).name})}else crmRelatedList.insertFilterTr(e),t.addClass("zWebSITableFilterDivOpen")},showHideFilter:function(e,t){var a=$(t).data("params").rid,l=$("#filterIcon_"+a);l.hasClass("zWebSITableFilterDivOpen")&&!crmRelatedList.filters[a]?(crmRelatedList.removeFilterTr(a),l.removeClass("zWebSITableFilterDivOpen"),Crm.trackSpotLightAction("RelatedList Filters - Closed",{personalityName:crmRelatedList.getPersonalityModuleObj(a).name})):(crmRelatedList.filters[a]||Crm.trackSpotLightAction("RelatedList Filters - Opened",{personalityName:crmRelatedList.getPersonalityModuleObj(a).name}),crmRelatedList.renderFilters(a))},showPromoPopup:function(e){var t={},a=Lyte.registeredMixins["crm-view-utils"].getIntegCampObject()[e.target.id];if(t.show=!0,t.integTitle=a.name,t.route=a.route,t.iconClass=a.iconClass,Lyte.Component.registeredComponents["crm-integ-promo-popup"])Lyte.Component.render("crm-integ-promo-popup",t,"#show");else{var l=networkUtils.returnDependencyFiles(["crm-integ-promo-popup.js"],ResourceConstants.CRMClient),n=networkUtils.returnDependencyFiles(["crm-integ-promo-popup.css"],ResourceConstants.CRMClient),i=l.concat(n);Lyte.injectResources(i,void 0,(function(){Lyte.Component.render("crm-integ-promo-popup",t,"#show")}))}},removeFilterTr:function(e){$(".zWebSITableFilterSelectTr_"+e).remove()},insertFilterTr:function(e){commonUtils.showHideLoadingDiv(!0),Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-user-autocomplete-wrapper.js"],ResourceConstants.CRMClient),void 0,(function(){commonUtils.showHideLoadingDiv(!1);var t=Handlebars.templates.RelatedListFilters(crmRelatedList.getPersonalityModuleObj(e));$("#rlHeader_"+e).after($(t))}))},showRlLoading:function(e){$("#"+e).find(".topband_dv_row, .norec, #rlTotalCount").remove();var t=$("#filterFooter_"+e);t&&t[0]?t.after(Handlebars.templates.RelatedListLoading()):$("#rlHeader_"+e).after(Handlebars.templates.RelatedListLoading())},applyFilter:function(e){var t=crmRelatedList.getReloadParams(e);crmRelatedList.formFilters(e)?(crmRelatedList.addFiltersParam(t),crmRelatedList.showRlLoading(e),crmRelatedList.ajaxReq(t),Crm.trackSpotLightAction("RelatedList Filters - Apply Clicked",{personalityName:crmRelatedList.getPersonalityModuleObj(e).name})):crmui.showMsgBand("error",I18n.getMsg("crm.label.empty.value"),"2500")},clearFilter:function(e){if(crmRelatedList.filters[e]){var t=crmRelatedList.getReloadParams(e);crmRelatedList.filters[e]=[],crmRelatedList.showRlLoading(e),crmRelatedList.ajaxReq(t)}else crmRelatedList.removeFilterTr(e),crmRelatedList.insertFilterTr(e);Crm.trackSpotLightAction("RelatedList Filters - Clear Clicked",{personalityName:crmRelatedList.getPersonalityModuleObj(e).name})},fillFiltersRecursively:function(e,t){return t instanceof Array||(t=[t]),0===t.length?t.push(e):1===t.length?(t.push("and"),t.push(e)):3===t.length&&(t[2]=crmRelatedList.fillFiltersRecursively(e,t[2])),t},formFilters:function(e){var t=[];return $("#"+("filters_"+e)+" .rlFiltersInput").each((function(){var a,l=$(this),n=l.prop("tagName").toLowerCase(),i=l[0],r=l.data("ui-type");if("lyte-dropdown"===n)(a=i.ltProp("selected"))&&301!=r&&999!=r&&(a=[a]);else if("crm-user-autocomplete-wrapper"===n){var s=i.querySelector("crux-user-dropdown").cxProp("selectedUser");s&&s.id&&(a={id:s.id,full_name:s.full_name})}else a=i.ltProp("value");if(a){(786===r||200===r||24===r||202===r||333===r||118===r&&l.data("datatype")&&("DATEINLONG"===l.data("datatype")||"BIGINT"===l.data("datatype")||"DATE"===l.data("datatype")))&&(a=CrmDateUtils.convertDateToUserPattern(CrmDateUtils.getDateObjectFromString(a),"YYYY-MM-DD"));var o=l.closest("td").find("#comparator_"+e)[0].ltProp("selected"),d={api_name:l.data("field-name"),comparator:o,value:a};t.push(d)}})),0!==t.length&&(crmRelatedList.filters[e]=t,!0)},addFiltersParam:function(e){var t=crmRelatedList.filters[e.rid];if(t&&validationUtils.isEmpty(e.filters)){var a=t.length;if(a){for(var l=[],n=0;n<a;n++){var i=t[n],r={api_name:i.api_name,comparator:i.comparator};r.value=i.value.id?[i.value.id]:i.value,l=crmRelatedList.fillFiltersRecursively(r,l)}e.filters=JSON.stringify(l)}}},populateFilterValues:function(e){var t=crmRelatedList.filters[e];if(t){getElemById("filterIcon_"+e).click();var a=t.length;if(0===a)delete crmRelatedList.filters[e];else var l=$("#filters_"+e);for(var n=0;n<a;n++){var i=t[n],r=i.api_name.replace(".","\\."),s=i.comparator,o=i.value,d=l.find("#rlFiltersInput_"+r);d.closest("td").find("#comparator_"+e)[0].ltProp("selected",s);var c=d.prop("tagName").toLowerCase(),u=d.data("ui-type");(786===u||200===u||24===u||202===u||333===u||118===u&&d.data("datatype")&&("BIGINT"===d.data("datatype")||"DATE"===d.data("datatype")))&&(o=Utils.getDateInUserDatePattern(new Date(o)));var m=d[0];"lyte-dropdown"===c?m.ltProp("selected",301!=u&&999!=u?o[0]:o):"crm-user-autocomplete-wrapper"===c?m.querySelector("crux-user-dropdown").cxProp("selectedUser",o):m.ltProp("value",o)}}},showCampaignStatusDiv:function(e,t){var a={};a.memberStatus=store.peekAll("campaign_status"),a.list_relation_id=e,a.record_id=t,a.showPopup=!0,crmRelatedList.renderMemberStatusPopup(a),detailView.atnAddClassSelected(event.currentTarget)},renderMemberStatusPopup:function(e){var t=$("#addCampaignMembersNextButton");t.length&&t.addClass("eventNone op5");var a=networkUtils.returnDependencyFiles(["crm-update-member-status-popup.js"],ResourceConstants.CRMClient),l=networkUtils.returnDependencyFiles(["crm-update-member-status-popup.css"],ResourceConstants.CRMClient),n=a.concat(l);Lyte.injectResources(n,void 0,(function(){t.length&&(t.blur(),t.removeClass("eventNone op5")),e.memberStatus=store.peekAll("campaign_status"),Lyte.Component.render("crm-update-member-status-popup",e,"#show")}))},showOnCheckRlActions:function(e){var t="CB_"+e;CustomButtonJSObjectInit.checkBox&&CustomButtonJSObjectInit.checkBox[t]&&CustomButtonJSObjectInit.checkBox[t].length>0&&($("#ract_"+e+" > a").hide(),$("#ract_"+e+" > .onCheckRLActions").show().addClass("tb_newsmallbtn"))},hideOnCheckRlActions:function(e){var t="CB_"+e;(!CustomButtonJSObjectInit.checkBox||!CustomButtonJSObjectInit.checkBox[t]||!CustomButtonJSObjectInit.checkBox[t].length>0)&&($("#ract_"+e+" > a").show(),$("#ract_"+e+" > .onCheckRLActions").hide().removeClass("tb_newsmallbtn"))},getContactTreeData:function(e,t){var a="crm/v6/"+t+"/"+e+"/__contacts_hierarchy";store.findRecord("dummy",e,{},!1,!1,{url:a}).then((function(t){var a=t.data;if(void 0!==a&&"TOO_MANY_RECORDS"===a.code){var l=Crm.moduleInfo.Contacts.translatedPluralLabel,n=Crm.moduleInfo.Accounts.translatedSingularLabel;crmui.showMsgBand("info",I18n.getMsg("crm.contact.hierarchy.view.Tree_not_supported",[$ESAPI.encoder().encodeForHTML(n),$ESAPI.encoder().encodeForHTML(l)]),"10000")}else if(void 0!==a){var i=crmRelatedList.constructTree(a),r=[{value:{Account_Name:{name:a[0].Account_Name.name},isAccount:"true"},children:i}],s=networkUtils.returnDependencyFiles(["crm-contact-hierarchyview.js","lyte-tree.js","businesscard_model.js"],ResourceConstants.CRMClient),o=[];Crm.userDetails.RTL_ENABLED&&(o=networkUtils.returnDependencyFiles(["crm-contact-hierarchyview-rtl.css"],ResourceConstants.CRMClient));var d=s.concat(o);Lyte.injectResources(d,void 0,(function(){Lyte.Component.render("crm-contact-hierarchyview",{treeData:r,currentEntityId:e,isPopUp:!0},"#contactTreePopupId")}))}}),(function(e){if("TOO_MANY_RECORDS"===JSON.parse(e.response).code){var t=Crm.moduleInfo.Contacts.translatedPluralLabel,a=Crm.moduleInfo.Accounts.translatedSingularLabel;crmui.showMsgBand("info",I18n.getMsg("crm.contact.hierarchy.view.Tree_not_supported",[$ESAPI.encoder().encodeForHTML(a),$ESAPI.encoder().encodeForHTML(t)]),"10000")}}))},parseRLForActivitySplt:function(e,t){var a={},l=!1,n=!1,i=1,r="Services"===t||!Crm.isActivitySplitDone||void 0,s={data:[]},o={data:[]},d=[];for(key in e){var c=key.match(/(\d+)/);if(null==c||isNaN(c[0]))a[key]=e[key];else d[c[0]]=e[key]}var u={};return d.forEach((function(e){var d="RL"+i,c=!("APPOINTMENTSPERSONALITY"!==e.name||"Services"===t||!Crm.isActivitySplitDone)||void 0;if("TASKSPERSONALITY"===e.name||"EVENTSPERSONALITY"===e.name||"CALLSPERSONALITY"===e.name||"CHRONOLOGICALVIEWPERSONALITY"===e.name||c?l||(a[d]=e,l=!0,i++):"TASKSHISTORYPERSONALITY"===e.name||"EVENTSHISTORYPERSONALITY"===e.name||"CALLSHISTORYPERSONALITY"===e.name||"APPOINTMENTSHISTORYPERSONALITY"===e.name||"CHRONOLOGICALVIEWHISTORYPERSONALITY"===e.name?n||(a[d]=e,n=!0,i++):(a[d]=e,i++),!0===e.isShowColumns&&!crmRelatedList.isNotActivitySubPersonality(e.name,r)){s.parentid||-1!==e.name.indexOf("HISTORY")?o.parentid||-1===e.name.indexOf("HISTORY")||(o.parentid=void 0===e.listRelationId?e.name:e.listRelationId):s.parentid=void 0===e.listRelationId?e.name:e.listRelationId,crmRelatedList.actRecordSelector||-1!==e.name.indexOf("HISTORY")||(crmRelatedList.actRecordSelector="#manageRLColumns_Activity"),crmRelatedList.closedRecordSelector||-1===e.name.indexOf("HISTORY")||(crmRelatedList.closedRecordSelector="#manageRLColumns_Activity_History");var m={};m.module=e.module,m.zcqa="customize_"+e.module,m.label="Events"===e.module?"Meetings":e.module,m.personality=e.name,m.parentid=void 0===e.listRelationId?e.name:e.listRelationId,-1===e.name.indexOf("HISTORY")?(s.parentid=m.parentid,u[e.module]=m):(o.parentid=m.parentid,u[e.module+"_History"]=m)}})),s.parentid&&(s.btn_name="openActivities",u.Tasks&&s.data.push(u.Tasks),u.Events&&s.data.push(u.Events),u.Calls&&s.data.push(u.Calls),u.Appointments&&s.data.push(u.Appointments)),o.parentid&&(o.btn_name="closedActivities",u.Tasks_History&&o.data.push(u.Tasks_History),u.Events_History&&o.data.push(u.Events_History),u.Calls_History&&o.data.push(u.Calls_History),u.Appointments_History&&o.data.push(u.Appointments_History)),this.openCusData=s,this.closeCusData=o,a},constructTree:function(e){for(var t=[],a={},l=e.length,n=0;n<l;n++){var i=e[n],r=i.Reporting_To;(null===r?t:a[r.id]||(a[r.id]=[])).push({value:i})}for(var s=function(e){if(a[e.value.id]){var t=a[e.value.id];e.children=t;for(var l=0,n=t.length;l<n;++l)s(t[l])}},o=(n=0,t.length);n<o;++n)s(t[n]);return t},handleIntegCampaignDissociation:function(e,t){var a=networkUtils.returnDependencyFiles(["crm-campaign-disassociate-popup.js","crm-campaign-detail-utils.js"],ResourceConstants.CRMClient),l=networkUtils.returnDependencyFiles(["crm-campaign-disassociate-popup.css"],ResourceConstants.CRMClient),n=a.concat(l);Lyte.injectResources(n,void 0,(function(){Lyte.Component.render("crm-campaign-disassociate-popup",{pModule:e,campaignType:t},"#show")}))},showCircuitPreview:function(e,t){$("#crm-msg").remove(),commonUtils.showHideLoadingDiv(!0);var a=networkUtils.returnDependencyFiles(["crm-circuits-preview-display.js"],ResourceConstants.CRMClient);a=a.concat(networkUtils.returnDependencyFiles(["crm-circuits-preview-display.css"],ResourceConstants.CRMClient)),Crm.userDetails.RTL_ENABLED&&(a=a.concat(networkUtils.returnDependencyFiles(["crm-circuits-rtl.css"],ResourceConstants.CRMClient))),a=(a=a.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("circuits")],ResourceConstants.CRM))).concat(networkUtils.returnDependencyFiles(["crm-circuits-common.js"],ResourceConstants.CRMClient)),Lyte.injectResources(a,void 0,(function(){if(e){var a=$("crm-circuits-preview");0!==a.length||(Lyte.Component.render("crm-circuits-preview",void 0,"#show"),a=$("crm-circuits-preview"));var l={circuit_name:t,preview_url:e};Lyte.triggerEvent("cirPrev_set_data",l),Lyte.triggerEvent("cirPrev_show_preview_pop",!0),commonUtils.showHideLoadingDiv(!1)}else $L("crm-circuits-preview")[0].component.executeMethod("errorHandling",{})}),e,t)},showSrTable:function(){$L("crm-entityscores-view").e[0].component.showSrList()},showSrChart:function(){$L("crm-entityscores-view").e[0].component.showSrChart()},addSeries:function(e){if(Crm.seriesEnabled){"object"==typeof e&&(e=crmRelatedList.Module);var t={},a=[];t.active="true",t.module=moduleApiMapping[e];var l=Lyte.Router.getRouteInstance().parent.getDynamicParam(),n=Crm.getCrmBasePath()+"/NewRelatedList.do?pname=SERIESPERSONALITY&action=getData&module="+e+"&id="+l,i={};i.url=n,i.method="GET",store.findAll("dummy",{},!1,!1,i).then((l=>{var n=l[e];for(var i in crmRelatedList.nameArr=[],n){var r=0,s=n[i].ACTIONS,o=n[i].ACTIONS.length;if(o<1||1===o&&"addSeries"!==s[0]["data-cid"])return void renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"));var d=n[i].heading;for(var c in d)if(r++,"Name"===d[c].FIELDLABEL||"Cadencesid__s"===d[c].SYS_REF_NAME)break;var u=n[i].body;for(var m in u){var p=u[m].CONTENT;p&&!p.contains("Un-enrolled")&&crmRelatedList.nameArr.push(p[r-1])}}store.findAll("cadence",t).then((t=>{for(var l=[],n=t.length,i=0;i<n;i++)crmRelatedList.nameArr&&crmRelatedList.nameArr.includes(t[i].name)||"CUSTOMVIEW"!==t[i].type&&"Custom view"!==t[i].type&&l.push(t[i]);if(a=l,null===document.querySelector("crm-add-to-series")){var r=networkUtils.returnDependencyFiles(["crm-add-to-series.js","series_mixin.js"],ResourceConstants.CRMClient);r=r.concat(networkUtils.returnDependencyFiles(["series_store.js"],ResourceConstants.CRMClient));var s=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("Series")],ResourceConstants.CRM),o=r.concat(s);Lyte.injectResources(o,void 0,(function(){Lyte.Component.render("crm-add-to-series",{isFromenrol:!0,series_rules:a,module:e},"#show")}))}setTimeout((function(){commonUtils.showHideLoadingDiv(!1)}),100)}),(function(e){403===e.status&&(commonUtils.showHideLoadingDiv(!1),setTimeout((function(){renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"))}),10))}))}),(function(e){this.checkOrUncheckTheRuleCheckBox(e.error)}))}},relTaskCreate:function(e,t,a,l,n,i){var r=crmRelatedList.getPersonalityModuleObj($(e).attr("data-relid")),s=$("#newRelatedListPopUpDiv");s&&s.empty();var o=Crm.getCrmBasePath()+"/Create.do",d=new crmRequestPool,c={module:"Tasks",format:"json"};if(r?(c.listRelationId=r.listRelationId,c.fillUpModule=crmRelatedList.Module,c.entityid=crmRelatedList.EntityId,c.relmodule=crmRelatedList.Module,c.entityname=$("#entityName").val()):t&&(c.fillUpModule=l,c.entityid=t,c.relmodule=l,c.entityname=a,c.taskCheckKey=!0),"followup"===n){returnJson.entityMapJson.CONTACTID&&("null"!=returnJson.entityMapJson.CONTACTID.defaultid?c.entityid=returnJson.entityMapJson.CONTACTID.defaultid:delete c.entityid,"null"!=returnJson.entityMapJson.CONTACTID.lookupmodule?c.fillUpModule=returnJson.entityMapJson.CONTACTID.lookupmodule:delete c.fillUpModule);var u=returnJson.entityMapJson.CONTACTID?returnJson.entityMapJson.CONTACTID.lookupmodule:l;c.relmodule=u,c.entityname=returnJson.entityMapJson.CONTACTID?returnJson.entityMapJson.CONTACTID.defaultvalue:void 0,c.taskCheckKey=!0}var m="bulk"===n?getIdsAndNames():void 0;moduleRecordMapping.Tasks&&moduleRecordMapping.Tasks.fields&&moduleRecordMapping.Tasks.fields.length&&moduleRecordMapping.Tasks.fields.length>0||store.findAll("field",{module:"Tasks",type:"all"},!1,void 0,{apiVersion:"2.2"}),networkUtils.setCsrfParam(c),d.initiate({action:o,data:c,datatype:"json",success:function(t){var l=JSON.parse(t);l.isFromRelatedList=!0;var r=Crm.getModuleObj("Tasks");r.currentStatus="create";var s=e?e.firstElementChild:void 0;e&&s&&"TaskPopup"===s.id||"fromSaveandNew"===e?r.createTemplate(l,void 0,"TaskPopup"):r.createTemplate(l),renderingUtils.labelWidthFixed("list","preHTMLContainer_Tasks");var o=$("#newRelatedListPopUpDiv");o.addClass("createTaskPopContainer");var d=$("#preHTMLContainer_Tasks"),c=$('<div id="tasksPopFreezeLayer" class="tasksPopupFreezeLayer hide"></div>');d.append(c);var u=$("#secDiv_Task_Information").height();c.height(u),thirdPartyUtils.bindSelect2($(".newChosenSel").find("select")),thirdPartyUtils.bindSelect2($(".mlSelect").find("select")),thirdPartyUtils.bindSelect2($(".labelTabCreate").find("select"));var p=$("#FreezeLayer");if("salessignals"==a&&(p.addClass("bulkTaskfreezeZi"),o.addClass("bulkTaskPopZi")),null!=m){var h=JSON.stringify(m),v=$('<input type="hidden" id="bulkTaskNewPopup" value='+h+"></input>");o.append(v),$("#Tasks_fldRow_CONTACTID").addClass("bulkTaskPopupHide"),$("#Tasks_fldRow_SEID").addClass("bulkTaskPopupHide"),p.addClass("bulkTaskfreezeZi"),o.addClass("bulkTaskPopZi")}if("followup"==n){var L=$('<input type="hidden" id="followUpTask"></input>');o.append(L)}var g=$("#Tasks_Notify_Owner"),I=o.find(".topband_tb");I.prepend(g),I.addClass("taskPopTopband_tb"),$(".ui-menu").addClass("bulkTaskPopZi"),d.scroll((function(){$(".lookFieldSrcWrap").hide(),$(".ui-menu").hide()})),i&&i()},error:function(){commonUtils.showHideLoadingDiv(),renderingUtils.showCustomAlert(I18n.getMsg("crm.assignment.rule.internal.error"))}}),(void 0===Crm.userDetails.LAYOUTRULEAVAILABLE||!0===Crm.userDetails.LAYOUTRULEAVAILABLE&&Crm.userDetails.LRINVOLVEDMODULES.contains(c.module))&&(c.getLayoutRuleJSON=!0,Crm.layoutRuleJSONData={},d.addUp({type:"GET",action:o,data:c,dataType:"json",success:function(e){null!==e&&(CFRExec.init(e,c.module,"edit"),CFRExec.promptIfMandatory=!1,CFRExec.evalRules("edit",!0))},error:function(){commonUtils.showHideLoadingDiv(),Crm.layoutRuleJSONData={}}})),(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(c.module))&&Crm.downloadValidationRules(o+"?format=json&module=Tasks","Tasks")},sendDm:function(e,t){var a,l=networkUtils.returnDependencyFiles(["crm-social-direct-message.js","social_related_list_store.js","crm-social-common.js","crm-social-common-models.js","crm-social-helper.js","crm-social-convo-inner-new.js"],ResourceConstants.CRMClient),n=networkUtils.returnDependencyFiles(["crm-social-related-list.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT).concat(networkUtils.returnDependencyFiles(["crm-social-common.css"],ResourceConstants.CRMClient));if(Crm.userDetails.RTL_ENABLED){var i=networkUtils.returnDependencyFiles(["crm-social-common-rtl.css","crm-social-related-list-rtl.css"],ResourceConstants.CRMClient);a=l.concat(n).concat(i)}else a=l.concat(n);Lyte.injectResources(a,void 0,(function(){Lyte.registeredMixins["crm-social-integration"].sendDm(e,t)}))}};function triggerLinkDocsView(e,t,a,l){var n;if(-1!=e.indexOf("linkDocs=true")){if(a||(a=renderingUtils.getTargetElem(event)),null!=usernameNeeded&&"boolean"==typeof usernameNeeded&&1==usernameNeeded&&-1==jQuery.inArray("zdoc",usernameNotNeeded))return commonUtils.checkUsernameNeeded((function(){showExportMenu(e,t,attachId,a)}),"zdoc"),!1;var i=objectUtils.URL(e).getParams();$.ajax({type:"POST",url:Crm.getCrmBasePath()+"/ZDocs.do?mode=isTrashedDocInZDocs",data:"fileId="+i.fileId+"&"+csrfParamName+"="+encodeURIComponent(csrfToken),success:function(n){if("true"==trimBoth(n)){var i=I18n.getMsg("crm.trashdoc.alert");return alert(i),!1}if($.inArray(t,["jpeg","jpg","gif","png","webp","bmp","svg"])>-1)return event.preventDefault(),"fileupload"===l?$("#fileUploadField_"+a).attr({onclick:"showImagePreview(this)",href:e,name:"cboxElement"}):$("#relatedList_"+a).attr({onclick:"showImagePreview(this)",href:e,name:"cboxElement"}),renderingUtils.triggerEvent("click",$("#relatedList_"+a)),!1}})}n="pdf"==t?"pdfViewPlugin":function(){var e={sheet:["excel","xls","csv"],show:["ppt","pptx","pps","odp"],writer:["word","txt","doc","docx","htm","html","sxw","odt","rtf"]};for(var a in e)if(e[a].indexOf(t)>-1)return a}(),"pdf"==t?openSheetForExport(encodeURI(e)+"&downLoadMode=pdfViewPlugin","pdfViewPlugin"):-1==$.inArray(t,["jpeg","jpg","gif","png","webp","bmp","svg"])&&openSheetForExport(encodeURI(e)+"&downLoadMode="+n)}function sortViewColumns(e,t,a,l,n,i,r){var s=t.split("_"),o=s[s.length-1];append_sort_column="sortColumnString_"+o,append_sort_order="sortOrderString_"+o;var d=e,c="sort_asc";"Desc"==l&&(c="sort_desc"),getObj(append_sort_column)&&getObj(append_sort_order)&&(getObj(append_sort_column).value=d,getObj(append_sort_order).value=c);var u=$("#module").val(),m=$("#id").val();if(i){"true"==n&&(r=null);var p={rid:o,module:u,id:m,fromIndex:1,sortOrderString:null!=r?c:"",sortColumnId:null!=r?r:"",isSortRequest:!0};crmRelatedList.ajaxReq(p)}$("#sortrellist_div").hide()}function setPlayOrPauseMessage(e){$(e).hasClass("icon_pause")?$(e).attr("title",I18n.getMsg("crm.button.pause")):$(e).attr("title",I18n.getMsg("crm.button.play"))}function showInvoiceMenu(e){var t=JSON.parse($(e).attr("data-params")),a=$("#invoiceMenuList").children("a"),l=a.length,n="";"2"===t.isApproved&&(n="none"),t.dissociatelink?a.eq(0).attr("onclick","showDeletePopup('"+t.warningMsg+"', 'crm.mb.label.move.to.trash', '', '', this)").attr("data-params",'{"dissociateclick":"javascript:'+t.dissociatelink+'","module":"'+t.module+'"}').attr("data-onclick",'javascript:sortRelatedList("'+t.deleteLink+'")').css("display",n):a.eq(0).attr("onclick","showDeletePopup('"+t.id+"', 'crm.button.delete', '', '', this)").attr("data-onclick",'javascript:sortRelatedList("'+t.deleteLink+'")').css("display",n),delete t.deleteLink,delete t.isApproved,t=JSON.stringify(t);for(var i=1;i<l;i++)a.eq(i).attr("data-params",t);var r={id:"invoiceMenuList",clickSelector:"a"};Crm.menu.createMenu(event,r),$("#invoiceMenuList").css("position","fixed")}function saveRelatedListColumns(e){var t=[],a=Crm.listRId[0],l=!("APPOINTMENTSPERSONALITY"!==a||"Services"!==getObj("module").value&&Crm.isActivitySplitDone)||void 0,n=!crmRelatedList.isNotActivitySubPersonality(a,l);n?$("#relateList_"+e+" input[type='checkbox']:checked").each((function(e,a){t.push($(a).val())})):($("[ddid="+e+"] #relateList_"+e+" input[type='checkbox']:checked").each((function(e,a){t.push($(a).val())})),$("#"+Crm.listRId[0]+"_"+Crm.listRId[1]).addClass("newRlEdit").removeClass("selectRlEdit").css("visibility","hidden")),t=t.join(";");var i,r=document.getElementById("selectList");if(i=null!=r?r.value:null,getObj("selectList").value!=t+";"){var s=Crm.listRId[1];if("ACTIVITYPERSONALITY"!==a&&"ACTIVITYHISTORYPERSONALITY"!==a||"true"===Crm.userDetails.MPL_MIGRATION_COMPLETED)if(0==a.indexOf("HISTORYPERSONALITY")){s=[],s=$("[ddname="+a+"]").attr("ddid");c=0!==$("[ddname="+a+"]").find("[name=rellistrow]").length}else{c=0!==$("[ddname="+Crm.listRId[0]+"]").find("[name=rellistrow]").length;n&&(c=!0)}else{a="ACTIVITYPERSONALITY;ACTIVITYHISTORYPERSONALITY",s=[];var o=$("[ddname=ACTIVITYPERSONALITY]").attr("ddid");null!=o&&s.push(o);var d=$("[ddname=ACTIVITYHISTORYPERSONALITY]").attr("ddid");null!=d&&s.push(d);var c=0!==$("[ddname=ACTIVITYPERSONALITY]").find("[name=rellistrow]").length||0!==$("[ddname=ACTIVITYHISTORYPERSONALITY]").find("[name=rellistrow]").length}var u=$("[ddid="+e+"]"),m=n?$("#frmmodule_"+e).val():u.find("#frmmodule").val(),p=Crm.getCrmBasePath()+"/CustomDisplay.do?actionName=update&cust_disp_module="+getObj("module").value+"&frmmodule="+m+"&pname="+a+"&from=detailView&id="+getObj("entityId").value;p+="&rid="+s;var h={};if(h[csrfParamName]=csrfToken,h.sellist=t,h.reload=c,"VISITSPERSONALITY"==a){var v=$("#portalRListSel").val(),L=$("#portalRListSel option:selected").text();"All Portals"!=v?(h.portalName=L,h.allPortals=!1):h.allPortals=!0}mR(p,(function(l){if(!0===c&&""!==l){if(n){var i={module:crmRelatedList.Module,id:crmRelatedList.EntityId,fromIndex:1};"canvas"===Lyte.Router.getRouteInstance().routeName&&"entity"===Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{id:e,refreshTemplate:!0});let t=returnJson.layoutIdOfEntity?returnJson.layoutIdOfEntity:store.peekRecord("module",moduleRecordMapping[detailView.currentModule].id).layouts[0].id;store.findRecord("related_list",e,{module:moduleApiMapping[crmRelatedList.Module],layout_id:t,include_inner_details:"fields.ui_type,fields.lookup,fields.formula,fields.rollup_summary,fields.field_label,fields.pick_list_values,fields.separator"}),crmRelatedList.ajaxReq(i,void 0,!1,{action:"refreshTemplate",listRelationId:e})}else crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,l);$("#selectList").val(t+";")}if(Crm.scrollToElem=(Crm.listRId[0]+"_"+Crm.listRId[1]).toLowerCase(),Crm.scrollPage(),hideCustomizeListPopup("relatedListCols_"+a),hideMenu(),n){var r=-1===a.indexOf("HISTORY")?"openActivities":"closedActivities";$L("#customizePopover_"+r)[0].ltProp("show",!1)}}),h)}else i==t+";"?(hideCustomizeListPopup("relatedListCols_"+a),hideMenu()):n&&hideCustomizeListPopup("relatedListCols_"+a)}function sortRelatedList(e,t,a,l,n){if(http){var i=e.substr(e.indexOf("#")+1,e.length),r=i.split("_")[1],s=i.split("_")[0].replace("$","_").toUpperCase();e.indexOf("#")>-1&&(e=e.substr(0,e.indexOf("#")));var o=!1;if((e+="&pname="+s).indexOf("closeTask.do")>-1){if(l&&!l.getData("hasCompletePermissionForTask"))return void renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"));if("string"==typeof(h=localStorage.getItem("isDontAskAgainChecked_"+Crm.userDetails.ZUID))&&(h="true"===h),!h&&"hidden"===$("#deletepopup").css("visibility")&&!n){var d=window.event,c=renderingUtils.getTargetElem(d),u=networkUtils.parseUrl(e).params,m=(d=window.event,c=renderingUtils.getTargetElem(d),new crmRequestPool);return u[csrfParamName]=encodeURIComponent(csrfToken),u.action="showNotifyOwner",void m.initiate({action:Crm.getCrmBasePath()+"/closeTask.do",data:u,type:"POST",success:function(e){$("#freezeBackGround").css("z-index","30");var t=Crm.isActivitySplitDone?"deleteAction":void 0;showDeletePopup(I18n.getMsg("crm.confirm.close.task"),"crm.label.mark.completed","","",c,void 0,"primarybtn",!0,void 0,"true"==e,!1,t),l&&l.setData("showpopover",!1)},error:function(){$("#freezeBackGround").css("z-index","30"),showDeletePopup(I18n.getMsg("crm.confirm.close.task"),"crm.label.mark.completed","","",c,void 0,"primarybtn",!0,void 0,!1,!1)}})}var p=crmRelatedList.personalityArr.indexOf("taskshistorypersonality")>-1||crmRelatedList.personalityArr.indexOf("eventshistorypersonality")>-1||crmRelatedList.personalityArr.indexOf("callshistorypersonality")>-1;(crmRelatedList.personalityArr.indexOf("activityhistorypersonality")>-1||p)&&(e+="TASKSPERSONALITY"===s?";TASKSHISTORYPERSONALITY":"EVENTSPERSONALITY"===s?";EVENTSHISTORYPERSONALITY":"CALLSPERSONALITY"===s?";CALLSHISTORYPERSONALITY":";ACTIVITYHISTORYPERSONALITY",crmRelatedList.personalityArr.indexOf("taskspersonality")>-1&&(e+=";TASKSPERSONALITY")),$("#showDontAskOption").prop("checked")&&localStorage.setItem("isDontAskAgainChecked_"+Crm.userDetails.ZUID,!0);var h,v=$("#notifyOwnerOption").prop("checked");"string"==typeof(h=localStorage.getItem("isDontAskAgainChecked_"+Crm.userDetails.ZUID))&&(h="true"===h),h||(e+="&isNotifyOwnerChecked="+v),o=!0}e+="&rid="+r;var L=csrfParamName+"="+encodeURIComponent(csrfToken);null!=t&&"false"==t&&(L=""),getObj("parentCurrencyISOCode")&&(e+="&parentCurrencyISOCode="+getObj("parentCurrencyISOCode").value),getObj("parentExchangeRate")&&(e+="&parentExchangeRate="+getObj("parentExchangeRate").value);var g=$("#portalRListSel").val(),I=$("#portalRListSel option:selected").text();e+="All Portals"!=g?"&portalName="+I+"&allPortals=false":"&allPortals=true";var f="CB_"+r;if(CustomButtonJSObjectInit.checkBox&&CustomButtonJSObjectInit.checkBox[f]){var C=CustomButtonJSObjectInit.checkBox[f].indexOf(a);CustomButtonJSObjectInit.checkBox[f].splice(C,1);var R=CustomButtonJSObjectInit.checkBox[f].length;$("#relatedListRecVal_"+r).text(R)}var E=!1;if(o&&(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains("Tasks"))&&(E=!0,Crm.VR||(Crm.VR={}),Crm.VR.rL_closetask=!0,Crm.VR.ajaxEditFieldLabel="STATUS"),o&&(void 0===Crm.userDetails.LAYOUTRULEAVAILABLE||!0===Crm.userDetails.LAYOUTRULEAVAILABLE&&Crm.userDetails.LRINVOLVEDMODULES.contains("Tasks"))){renderingUtils.freezeBackground();var u={module:"Tasks",entityId:a,layoutId:""};return E&&(u.includeVR=!0),u[csrfParamName]=encodeURIComponent(csrfToken),void(m=new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/FormRule.do?action=getLayoutRuleNEntityInfo",data:u,type:"POST",success:function(t){CFRExec.moveToTempHolder(),returnJson=$.parseJSON(t.entityInfo),Crm.jsonDepValues.Tasks=JSON.parse(returnJson.Tasks.fieldDependency),E&&(Crm.validationRuleJSONData.Tasks=JSON.parse(t.validationRuleJSON),Crm.VR.entityDetails=returnJson),CFRExec.init(t.layoutRuleJSONObj,"Tasks","list");var l=CFRExec.getTaskCompletedOptionLabel("list"),n=CFRExec.evalAjaxEditForLayoutRule("Tasks","STATUS",l);if(-1!=n)if(n){hideAnimatePopup("deletepopup");var r={};r.moduleid=a,r.module="Tasks",r.columnName="STATUS",r.fieldValue=l,networkUtils.setCsrfParam(r);var s=objectUtils.URL(e).getParams();r.check={type:"closeTask",from:"relatedList",module:s.module,id:s.id},CFRExec.haltStageChange(r)}else E?new Promise((function(t){t(executeVRRule(a,e))})).then((function(t){t||(renderingUtils.removeFreezeLayer(),performOperationNdReloadList(e,i,L))})):(renderingUtils.removeFreezeLayer(),performOperationNdReloadList(e,i,L));else renderingUtils.removeFreezeLayer()},error:function(e){}})}if("PRODUCTS_LINKINGMODULEBUNDLERELPERSONALITY"===s&&e.indexOf("MassDelete.do")>-1){var T=Crm.isModuleAvailable("Bundles"),S={bundleId:T&&T.id?T.id:null,entityId:crmRelatedList&&crmRelatedList.EntityId?crmRelatedList.EntityId:null};return commonUtils.showHideLoadingDiv(!0),void store.findRecord(S.bundleId,S.entityId).then((e=>{var t=e.first();if(t.Unique_Item_Count<=2)return hideAnimatePopup("deletepopup"),void renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("bundles.minimum.product.relatedlist.check",["2",moduleRecordMapping.Products.plural_label]));var l=i?i.split("_")[1]:null;deleteFromBundleProductsRelatedList(t,a,l)}),(()=>{bundlesData.$.set("Linked_Products",linkedProducts),bundlesData.$.set("Total_Item_Count",uniqueItemCount),bundlesData.$.set("Total_Item_Count",totalItemCount),commonUtils.showHideLoadingDiv(!1)}))}if("BUNDLES_LINKINGMODULEBUNDLERELPERSONALITY"===s&&e.indexOf("MassDelete.do")>-1){var b=Crm.isModuleAvailable("Products"),y={productId:b&&b.id?b.id:null,entityId:crmRelatedList&&crmRelatedList.EntityId?crmRelatedList.EntityId:null};if(y.productId&&y.entityId){var A=store.peekRecord(y.productId,y.entityId);if(A&&A.Linked_Bundles){var O=i?i.split("_")[1]:null;return commonUtils.showHideLoadingDiv(!0),void deleteFromProductBundleRelatedList(A,a,O)}}return}if(o&&E)return renderingUtils.freezeBackground(),(u={module:"Tasks",entityId:a,layoutId:""})[csrfParamName]=encodeURIComponent(csrfToken),u.onlyEntityDetails=!0,u.includeVR=!0,void(m=new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/FormRule.do?action=getLayoutRuleNEntityInfo",data:u,type:"POST",success:function(t){Crm.VR.entityDetails=$.parseJSON(t.entityInfo),Crm.validationRuleJSONData.Tasks=JSON.parse(t.validationRuleJSON),new Promise((function(t){t(executeVRRule(a,e))})).then((function(t){t||(renderingUtils.removeFreezeLayer(),performOperationNdReloadList(e,i,L))}))},error:function(e){}});l?performOperationNdReloadList(e,i,L,l.data):performOperationNdReloadList(e,i,L)}("Campaigns"==getObj("module").value&&getObj("totalContact")||getObj("totalLead"))&&loadCampaingSummary()}function executeVRRule(e,t){CVRExec.getTaskCompletedUserValue();return CVRExec.setAjaxEditPrimaryField(!0),new Promise((function(e){e(CVRExec.evalRules("view","Tasks","STATUS",!0,!0))})).then((function(a){if(!a){hideAnimatePopup("deletepopup");var l={};l.moduleid=e,l.module="Tasks",l.columnName="STATUS",l.fieldValue="Completed",networkUtils.setCsrfParam(l);var n=objectUtils.URL(t).getParams();return l.check={type:"closeTask",from:"relatedList",module:n.module,id:n.id},n.isNotifyOwnerChecked?l.isNotifyOwnerChecked="true":n.isDontAskAgainChecked&&(l.isDontAskAgainChecked="true"),CVRExec.storeCachedParams(l),!0}return!1}))}function performOperationNdReloadList(e,t,a,l){commonUtils.showHideLoadingDiv(!0),http.open("POST",e,!0),http.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),http.setRequestHeader("X-Requested-With","XMLHttpRequest"),http.onreadystatechange=function(){if(4==http.readyState){hideAnimatePopup("removepopup"),hideAnimatePopup("deletepopup");var a=http.responseText;if(http.status==crmConstants.errorStatusCode)return commonUtils.showHideLoadingDiv(),void renderingUtils.displayPermissionDenied(http);if(validationUtils.isJson(a)&&JSON.parse(a).CannotDelete){commonUtils.showHideLoadingDiv();var n='<div onclick="sE()" class="w500 p20"><div class="fL pL20 w430"><div class="crm-heading-font-size"><h2 style="color:#E20000";>'+I18n.getMsg(JSON.parse(a).CannotDelete[0])+'</h2></div><div class="mT10">'+I18n.getMsg(JSON.parse(a).CannotDelete[1])+'</div></div><br class="cBoth"><div  class="alignRight mT20"><input type="button" id="popupok" class="primarybtn" value="'+I18n.getMsg("crm.button.ok")+"\" onclick=\"hide('popupnew');renderingUtils.removeFreezeLayer();document.getElementById('popupnew').style.zIndex=30\"></div></div>";return void renderingUtils.popUpWithFreeze(n)}if(validationUtils.isJson(a)&&"object"!=typeof a&&"PARENT_RECORD_DELETED"===JSON.parse(a).STATUS)return commonUtils.showHideLoadingDiv(),void crmui.showMsgBand("error",I18n.getMsg("crm.record.perform.deleted.revoked"),5e3);if(a.indexOf(":::CampaignMemberDisAssociationException:::")>-1){commonUtils.showHideLoadingDiv();var i=JSON.parse(a);return void renderingUtils.showCustomAlert(i.msg,i.title,!1)}if(a.indexOf("ALERTERROR:::")>-1){var r=a.split("ALERTERROR:::");return commonUtils.showHideLoadingDiv(),r[1].indexOf(I18n.getMsg("crm.security.error"))>-1?void renderingUtils.displayPermissionDenied():void alert(r[1])}if(e.indexOf("pname")>-1){var s=objectUtils.URL(e).getParams();!0==!validationUtils.isEmpty(CFRExec.tempHolder)&&CFRExec.initFromTempHolder(),e.includes("MassDelete.do")&&null!=s&&"EMAILSPERSONALITY"==s.pname&&0==$("#isFromNewAPI").length?$("#selectMails").val("ALL").change():crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,a,null,null,{action:"refresh"}),Lyte.triggerEvent("relatedList",{res:a});var o=JSON.parse(a)[crmRelatedList.module?crmRelatedList.module:$L("#module")[0].value][s.rid];if(o&&o.isLinkingModule&&multiLookupsView.updateMXNFieldValue(void 0,s.rid,o.defaultvalue),l){if(!l.canvas||"Activities"===!l.list_relation_id){var d=s.module;crmTab.deleteFromCache(d),d=s.actModule,crmTab.deleteFromCache(d)}}else if("canvas"==Lyte.Router.getRouteInstance().routeName&&("Tasks"===s.module||"Events"===s.module||"Calls"===s.module&&s.actModule)){d=s.module;crmTab.deleteFromCache(d)}else{var c=s.action,u=s.module,m=s.actModule;"CloseTask"!=c&&crmTab.deleteFromCache(u),crmTab.deleteFromCache(m)}}else crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,a),!0==!validationUtils.isEmpty(CFRExec.tempHolder)&&CFRExec.initFromTempHolder();commonUtils.showHideLoadingDiv(),showDrillDownPtr(t),refreshFollowDiv()}},http.send(a)}function deleteFromProductBundleRelatedList(e,t,a){if(e&&e.Linked_Bundles&&t&&a){hideAnimatePopup("removepopup"),hideAnimatePopup("deletepopup");var l=t,n=crmRelatedList.EachModuleData[a].body.find((e=>e.ENTITYID===t));l=n&&n.JID?n.JID:l;var i=e.Linked_Bundles.filter((e=>{var a=e.Bundle;if(a)return a.id!==t})),r={id:e.id,module:"Products",isSortRequest:!1,rid:a};e.$.set("Linked_Bundles",[{_delete:null,id:l}]),e.$.save().then((()=>{crmRelatedList.ajaxReq(r),commonUtils.showHideLoadingDiv(!1)}),(()=>{renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("bundles.minimum.product.relatedlist.check",["2",moduleRecordMapping.Products.plural_label])),commonUtils.showHideLoadingDiv(!1)})),e.$.set("Linked_Bundles",i)}}function deleteFromBundleProductsRelatedList(e,t,a){if(e&&e.Linked_Products&&e.Unique_Item_Count&&e.Total_Item_Count&&t&&a){hideAnimatePopup("removepopup"),hideAnimatePopup("deletepopup");var l,n=e=>parseFloat(e.toFixed(7)),i=e.Unique_Item_Count,r=e.Total_Item_Count,s={id:e.id,module:"Bundles",isSortRequest:!1,rid:a},o=e.Linked_Products,d=1;crmRelatedList.EachModuleData[a].heading.find(((e,t)=>(d=t,"PRODUCT_QUANTITY"===e.COLUMNNAME)));var c=crmRelatedList.EachModuleData[a].body.find((e=>e.ENTITYID===t));l=c.JID;var u=isNaN(parseFloat(c.CONTENT[d]))?1:parseFloat(c.CONTENT[d]);r=n(r)-n(u);var m=o.filter((e=>{var a=e.Product;if(a)return a.id!==t}));e.$.set("Linked_Products",[{_delete:null,id:l}]),e.$.save().then((()=>{i-=1,e.$.set("Linked_Products",m),e.$.set("Unique_Item_Count",i),e.$.set("Total_Item_Count",r);var t=document.querySelector("[id='headervalue_UNIQUE_ITEM_COUNT']"),a=document.querySelector("[id='value_UNIQUE_ITEM_COUNT']"),l=document.querySelector("[id='value_TOTAL_ITEM_COUNT']");t&&a&&l&&(t.textContent=i,a.textContent=i,l.textContent=r),crmRelatedList.ajaxReq(s),commonUtils.showHideLoadingDiv(!1)}),(()=>{e.$.set("Linked_Products",o),e.$.set("Unique_Item_Count",i),e.$.set("Total_Item_Count",r),commonUtils.showHideLoadingDiv(!1)}))}}function reloadPersonality(e){for(var t,a=crmRelatedList.personalityArr.split("||"),l=0;l<a.length;l++){var n=a[l].split("_");if(n[0]===e){e=n[0],t=n[1];break}}if(void 0!==t){var i=Crm.getCrmBasePath()+"/NewRelatedList.do?action=getData&module="+getObj("module").value+"&id="+getObj("id").value+"&cvid="+getObj("cvid").value+"&pname="+e.toLocaleUpperCase();mR(i,(function(e){crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,e)}))}}function resetCustomRelatedListTrigger(){for(var e=$("div[id^='customRelatedListDiv_']:visible"),t=e.length,a=0;a<t;a++)$(e[a]).attr("istriggered","false")}function fetchCustomRelatedList(){var e=$("div[id^='customRelatedListDiv_']:visible"),t=$("[name='module']").val();t||(t=detailView.currentModule);var a=$("[name='id']").val();for(i=0;i<e.length;i++){var l=$L("#dvinner").scrollTop(),n=l+$(window).height(),r=renderingUtils.findPosY(e[i]),s=r+$(e[i]).height();if("true"!=$(e[i]).attr("istriggered")&&s>=l&&r<=n&&s<=n&&r>=l){$(e[i]).attr("istriggered","true");var o=$(e[i]).attr("id").split("_")[1];if("undefined"!=typeof LuxHandler&&LuxHandler.LuxConfig&&LuxHandler.LuxConfig.COMPONENTS&&LuxHandler.LuxConfig.COMPONENTS[o]){renderLux(o,a);continue}var d={Entity:moduleRecordMapping[t].api_name,EntityId:a},c="undefined"!=typeof WidgetHandler?WidgetHandler.getWidget("RelatedList",o):void 0;if(c){var u=CustomRelatedListObj.constructRelListData(o,c);d.related_list=u,WidgetHandler.RelatedList.render(c,o,d),CustomRelatedListObj.removeRelatedListBottonMargin(CustomRelatedListObj.TYPE.WIDGET,o)}else CustomRelatedListObj.connectToCustomRelatedList(t,o,a)}}}async function renderLux(e,t){$L("#customRelatedListDiv_"+e).addClass("lytew_frame_loading");let a=await store.triggerAction(moduleRecordMapping[detailView.currentModule].id,"related_lists",{relatedlist_id:e,type:"POST",fromLux:!0},{ids:t}),l={arguments:a.details[a.details.action].arguments,component_id:LuxHandler.LuxConfig.COMPONENTS[e].id};return new Promise((t=>{let a={position:"COMPONENTS",listRelationId:e,infos:l,onsuccess:function(){t(!0)},onerror:function(){t(!1)}};Lyte.triggerEvent("render",a)}))}function mailToolTipHvr(e,t){if(t){var a=$(e).offset().top,l=$(e).offset().left,n=$(e).outerHeight();setTimeout((function(){$(".mailDetailToolTip").css({left:l-37,top:a+n+4}).show()}),400)}else $(".mailDetailToolTip").hide()}function updateUsersList(e,t){var a=getObj("status_"+t);if(a){a.disabled="disabled";var l=getObj("zmailkey").value,n=Crm.getCrmBasePath()+"/ZMailConfig.do?action=updateUsersList&entId="+e+"&shareMails="+a.checked+"&zmailkey="+l,i="&"+csrfParamName+"="+csrfToken;commonUtils.showHideLoadingDiv(!0),mR(n,(function(e){commonUtils.showHideLoadingDiv(),$("#bulkUpdateSuccess").empty(),getObj("bulkUpdateSuccess").innerHTML=e,show("bulkUpdateSuccess"),mailsetCenter("bulkUpdateSuccess"),setTimeout((function(){hide("bulkUpdateSuccess"),a.disabled=""}),4e3)}),i)}}function potentialPopUp(e,t){var a=$("#entityId").attr("value"),l=$("#cntId").attr("value");null==l&&(l=$("crm-emailsrl-canvas-view").attr("associated-cont-id")),$(t).closest("tr").attr("tobehidden",!0);var n=Crm.getCrmBasePath()+"/Search.do?searchmodule=Potentials&entityId="+a+"&msgId="+e+"&contactId="+l;commonUtils.openCustomLookup(n,void 0,"topBandPopup",renderingUtils.windowWidth-300)}function getIntegList(e,t,a,l,n,i,r,s,o,d,c,u,m,p,h,v,L,g){var I,f,C,R=Crm.getCrmBasePath()+"/GetIntegrationList.do",E="action=getIntegList&projectlistrelid="+t+"&module="+n,T=$("crm-rl-users-list").length>0,S=$("#sendEntityMailLink"),b=S;if("1"==e[0]&&((getObj("isProjectCalled")&&"N"==getObj("isProjectCalled").value||getOpenerObj("isProjectCalled")&&"N"==getOpenerObj("isProjectCalled").value)&&(getObj("isProjectCalled")?getObj("isProjectCalled").value="S":getOpenerObj("isProjectCalled").value="S"),E+="&reqid="+a+"&returnAnchor="+l+"&cvid="+i+"&portalName="+r+"&msg="+s+"&pageno="+o+"&projId="+d+"&sortorder="+v),"1"==e[1]){var y="false";if(getObj("mailListRelId"))if(getObj("mailConfigType")){f=(I=getObj("mailConfigType").value.split("#"))[0];var A=getObj("mailListRelId").value;getObj("getMailOpt")&&getObj("getMailOpt").innerHTML,"1"==f&&I[1]?"Potentials"===n?(f=null,y="true"):($("crm-rl-share-email").length>0&&S.hide(),$("#maillistid").empty(),document.getElementById(A).innerHTML="<table cellspacing='0' cellpadding='0' width='100%' border='0' class='norec' align='center'><tbody><tr><td><div class='pR30 crm-font-regular'>"+I[1]+"</div><br/></td></tr></table><br/>"):"2"==f&&I[1]?(y="true",S.hide()):getObj("entIdForZMail")&&(y="true",n&&"Potentials"!=n&&(getObj("zmailRS").style.display=""))}else y="true";if("true"==y){var O=null,N=null,P=null,k=f,M=(T=$("crm-rl-users-list").length>0,"true"==$("#isMailAppsFlow").val()),_=Lyte.Component.registeredHelpers.getUserStatus("IMAP_STATUS");getObj("selectMails")&&(P=getObj("selectMails"));var D=$("#dealOnlyDropDown"),w=$("#contactSelDropdownInAcc"),U=T?w:$("#contactSelDropdownInAcc :selected");if(null==P||"IMAP_ALL"!==P.value&&"IMAP_ALL"!==P.getAttribute("lt-prop-selected")||"Potentials"===n&&!_||"Accounts"===n&&U.length>0&&("ALL"==U.attr("lt-prop-selected")||"ALL"==U.attr("value")))if("Accounts"===n)U.length>=0&&"ACCOUNTS_ALL"===U.attr("lt-prop-selected")?E+="&mailType=sent_from_crm":U.length>=0&&("ALL"===U.attr("lt-prop-selected")||"ALL"===U.attr("value"))?E+=T?"&mailType=all_contacts_sent_crm_emails":"&mailType=ALLUSERSMAILS":Crm.userDetails.isEmailsForModuleEnabled||null==P||"ALL_MAIL_VIEW"!==P.value&&"ALL_MAIL_VIEW"!==P.getAttribute("lt-prop-selected")?E+="&mailType=sent_from_crm":E+="&mailType=";else if(null==P||"ALL_MAIL_VIEW"!==P.value&&"ALL_MAIL_VIEW"!==P.getAttribute("lt-prop-selected"))if("Potentials"===n&&Crm.userDetails.CONTACT_ROLES_EMAILS_RL)E+="&mailType=";else if(null==P||"ALL"==P.value||"ALL"==P.getAttribute("lt-prop-selected")||"Accounts"===n&&U.length>0&&("ALL"==U.attr("lt-prop-selected")||"ALL"==U.attr("value")))E+=T?"&mailType=sent_from_crm":"&mailType=ALLUSERSMAILS";else{var x=P.value?P.value:P.getAttribute("lt-prop-selected");O=x.substring(0,x.indexOf("_")),N=x.substring(x.indexOf("_")+1,x.length)}else E+="&mailType=";else M?E=E+"&mailType="+P.getAttribute("lt-prop-selected"):(E+="&mailType=IMAP_ALLUSERSMAILS","true"===$("#isALLOptOnly").val()&&(E+="&mailType1=IMAP_CRMMAILS"));var F=c,Y=$("#entityName").val();if("Potentials"==n){if(Crm.userDetails.CONTACT_ROLES_EMAILS_RL){var j=$("#id").val(),B=$("#dealOnlyDropDown :selected");if(B.length>0){var V=B.attr("value");V&&V.indexOf("_")>-1&&"contactRoles"===V.split("_")[0]?(c=V.split("_")[1],n="Contacts",Y=B.attr("name"),k=B.attr("email")):c=j}else c=j}F=c,"Potentials"!=n||"dealsOnly"!==D.val()&&"dealsOnly"!==D.attr("lt-prop-selected")||(E+="&isDealsMail=true")}else if(null!=U&&U.length>0){var H=$("#addNewIcP_Emails");if(0==H.length)try{H=$("#addNewIcP_"+I18n.getMsg("Emails"))}catch(e){H=$("#newleft_"+g+" .addNewIcP")}"ACCOUNTS_ALL"==U||"ACCOUNTS_ALL"==U.attr("lt-prop-selected")||"ACCOUNTS_ALL"==U.attr("value")?(F=c,Crm.userDetails.isEmailsForModuleEnabled?(S.css("display","inline-block"),H.removeClass("dN")):(S.css("display","none"),H.addClass("hide")),$("#relatedMailList").hide(),E+="&isAccountsMail=true"):"ALL"!=U.attr("lt-prop-selected")&&"ALL"!=U.attr("value")?(F=null==(F=U.attr("value"))?U.attr("lt-prop-selected"):F,k=U.attr("email"),S.css("display","inline-block"),H.removeClass("hide"),$("#relatedMailList").show()):(F=$("#id").val(),$("#relatedMailList").hide(),S.css("display","none"),H.removeClass("dN"),Crm.userDetails.isEmailsForModuleEnabled||H.addClass("hide"),E+="&entityType=allContacts")}else"Accounts"===n&&(F=c,$("#contactSelDropdownInAcc").closest(".newSelect").remove(),$("#sendEntityMailLink").remove(),$("#relatedMailList").remove(),E+="&isAccountsMail=true");Y=$L("#entityName")[0].getAttribute("value");getObj("zmailEmail")&&(k=getObj("zmailEmail").value);var q="Cases"===n||"Vendors"===n?$("#zs_EMAIL"):null;if(q){var z=$("#subvalue_EMAIL");z&&(q.value=z.text()),k=q.value}var J=$L("crm-email-rl-filter");if(("Contacts"===n||"Leads"===n||"Vendors"===n)&&J.length>0){var Z=J.get(0).component,G=Z.getData("emailsSelected"),W="";if(G&&Crm.userDetails.isCustomEmailPreferencePageEnabled)if("allEmails"===G||"allEmailsSentFrom"===G){for(var K=Z.getData("emailIdOptions"),Q=K.length,X=0;X<Q;X++)"allEmailsSentFrom"!==K[X].name&&"allEmails"!==K[X].name&&(W=W.concat(K[X].value).concat(","));""!==W&&(k=W)}else k=G=G.split("_")[0];else{var ee=store.peekRecord(moduleRecordMapping[n].id,c),te=moduleRecordMapping[n].fields.filter((e=>25===e.ui_type&&"Email"!==e.api_name&&"Secondary_Email"!==e.api_name));if(ee){var ae=ee.Email;ae&&""!==ae&&(W=W.concat(ae).concat(","));var le=ee.Secondary_Email;if(le&&""!==le&&(W=W.concat(le).concat(",")),(Q=te.length)>0&&Crm.userDetails.isCustomEmailPreferenceEnabled){for(X=0;X<Q;X++){var ne=ee[te[X].api_name];ne&&""!==ne&&(W=W.concat(ne).concat(","))}""!==W&&(k=W)}}}}E+="null"!==k&&void 0!==k?"&listRelationId="+getObj("mailListRelId").value+"&entId="+F+"&moduleId="+c+"&user_id="+O+"&user_name="+encodeURIComponent(N)+"&searchid="+encodeURIComponent(k)+"&fullname="+encodeURIComponent(Y)+"&Zmail=true":"&listRelationId="+getObj("mailListRelId").value+"&entId="+F+"&moduleId="+c+"&user_id="+O+"&user_name="+encodeURIComponent(N)+"&fullname="+encodeURIComponent(Y)+"&Zmail=false"}else if(getObj("zs_EMAIL")&&(getObj("zs_EMAIL1")?getObj("zs_EMAIL").value=getObj("zs_EMAIL1").value:getObj("subvalue_EMAIL")&&(getObj("zs_EMAIL").value=getObj("subvalue_EMAIL").innerHTML)),-1==(e=e[0]+"0"+e[2]+e[3]+e[4]+e[5]+e[6]).indexOf("1"))return}if("1"==e[2]){var ie=deskInteg.getKeyValueForTicketCriteria();if(!ie)return $("#deskLoadingDiv div").text(I18n.getMsg("crm.new.label.no.records")),void(e=e[0]+e[1]+"0"+e[3]+e[4]+e[5]+e[6]);"email"==ie.key&&(E=E+"&"+ie.key+"="+encodeURIComponent(ie.value));var re=deskInteg.getCurrentTicketType();null!=re&&(E=E+"&ticketType="+re),-1==E.indexOf("&moduleId=")&&(E=E+"&moduleId="+crmRelatedList.EntityId),0==deskCache.get(crmRelatedList.EntityId)&&(E+="&deskstats=true")}("1"==e[3]&&(E=E+"&invoiceListRelationId="+u),"1"==e[4]&&(E=E+"&expenseListRelationId="+m),"1"==e[5]&&(E=E+"&zsubscriptionsListRelationId="+p),"1"==e[3]||"1"==e[4]||"1"==e[5])&&(E=E+"&isRefresh="+(h=void 0!==h&&h)+"&entityId="+c);if("1"===e[6]&&-1===E.indexOf("&entityId=")&&(E=E+"&entityId="+crmRelatedList.EntityId),E+="&map="+e,Lyte.registeredMixins["crm-email-emotions-mixin"])C=Lyte.registeredMixins["crm-email-emotions-mixin"].findZiaEmailConfigDetails();else{var se=networkUtils.returnDependencyFiles(["email-emotions.js","zia-notification-settings.js"],ResourceConstants.CRMClient);Lyte.injectResources(se,void 0).then((function(){C=Lyte.registeredMixins["crm-email-emotions-mixin"].findZiaEmailConfigDetails()}))}C&&C.then((function(t){t&&t.zia_config&&Lyte.registeredMixins["crm-email-emotions-mixin"].setEmailsAIVariables(t),networkUtils.loadFeatureScripts(["zohocrm_projectDeatils_list.js"],function(){httphandle.open("POST",R,!0),httphandle.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),httphandle.onreadystatechange=function(){if(3==httphandle.readyState)try{if(d="["+(d=httphandle.responseText).substring(1)+"]",validationUtils.IsJsonString(d))if(null!=(c=JSON.parse(d))[c.length-1].project&&"1"==e[0]){var t=JSON.parse(c[c.length-1].project);store.unloadAll("zprojects_rl"),store.pushPayload("zprojects_rl",t.projectList),ZProjects&&ZProjects.errorProject&&(t.errorProject=ZProjects.errorProject),projectProcess(t);var a=parseInt(t.current_filter_count)+1,l=$("div[ddname='PROJECTSPERSONALITY']").attr("ddid"),i=$('#RelatedListCommonDiv[ddid="'+l+'"]');a?(a>10&&(a="10+"),a>100&&(a="100+"),$("#newleft_"+l).find("span.numCountn").addClass("numCountVal").text(a),i.removeClass("noDataFountDetail")):($("#newleft_"+l).find("span.numCountn").text("").removeClass("numCountVal"),i.addClass("noDataFountDetail")),null!=t&&(e="0"+e[1]+e[2]+e[3]+e[4]+e[5]+e[6]),ZProjects.projectsNavigated=!1}else if(null!=c[c.length-1].mail&&"1"==e[1]){if((t=JSON.parse(c[c.length-1].mail)).hasOwnProperty("isFromNewAPI")?mailProcess(t):mailProcess(Handlebars.templates.MailDetailsList(t)),null!=t){if(e=e[0]+"0"+e[2]+e[3]+e[4]+e[5]+e[6],t.mailRange){var r=t.mailRange;crmRelatedList.mailRange={},crmRelatedList.mailRange[0]=r}else{var s=null!=(g=t.mailsList)?g.length:0;g&&g[s-1]&&g[s-1].hasOwnProperty("mail_index")?(Crm.mailIndex={},Crm.mailIndex[0]=g[s-1].mail_index):t.hasOwnProperty("next_index")&&(Crm.mailIndex={},Crm.mailIndex[0]=t.next_index)}if(t.hasOwnProperty("isFromNewAPI")){var o='<div class="ernCount vH mL20 pB10 dIB crm-base-font-size crmBaseColor"><span id="ernRowCount" class="crm-font-bold">1</span><span class="pL10 ">Row Selected</span><input type="hidden" value="" id="mailsToDelete"/><div style="display:none;" id="mailsSub"></div><input type="hidden" value="listRelationId"><span class="mL10 svgIcons dIB ernDeleteIcon cP vaBaseLine" onClick="showDeletePopup(\'mailsSub\',\'crm.button.move.to.trash\', \'\', \'\',this,true)" id="deleteMailsButton"></span></div>';$($("div[ddname=EMAILSPERSONALITY]").children("table").find("tr").children()[0]).append(o)}}}else if(null!=c[c.length-1].support&&"1"==e[2]){null!=(t=JSON.parse(c[c.length-1].support))&&(e=e[0]+e[1]+"0"+e[3]+e[4]+e[5]+e[6])}else if(null!=c[c.length-1].invoice&&"1"==e[3]){t=JSON.parse(c[c.length-1].invoice);ZInvoice.loadRL("ZINVOICEPERSONALITY",crmRelatedList.Module,u,crmRelatedList.EntityId,t),null!=t&&(e=e[0]+e[1]+e[2]+"0"+e[4]+e[5]+e[6],"Potentials"===n&&ZInvoice.refreshpotentialEstInvRL(t))}else if(null!=c[c.length-1].expense&&"1"==e[4]){t=JSON.parse(c[c.length-1].expense);ZInvoice.loadRL("ZEXPENSEPERSONALITY",crmRelatedList.Module,m,crmRelatedList.EntityId,t),null!=t&&(e=e[0]+e[1]+e[2]+e[3]+"0"+e[5]+e[6],showZFinanceRelCnt("expense",t.expense_loop_count))}else if(null!=c[c.length-1].zsubscriptions&&"1"==e[5]){t=JSON.parse(c[c.length-1].zsubscriptions);ZInvoice.loadRL("ZSUBSCRIPTIONSPERSONALITY",crmRelatedList.Module,p,crmRelatedList.EntityId,t),null!=t&&(e=e[0]+e[1]+e[2]+e[3]+e[4]+"0"+e[6],showZFinanceRelCnt("zsubscriptions",t.subscription_loop_count))}else null!==c[c.length-1].messages&&"1"===e[6]&&(e=showMessagesList(c[c.length-1].messages,e,L))}catch(e){murphy.error(e)}if(4==httphandle.readyState){var d;d="["+(d=httphandle.responseText).substring(1)+"]";var c,h,v=(c=JSON.parse(d)).length;for(h=0;h<v;h++)if(null!=c[h].project&&"1"==e[0]){t=JSON.parse(c[h].project);store.unloadAll("zprojects_rl"),store.pushPayload("zprojects_rl",t.projectList),ZProjects&&ZProjects.errorProject&&(t.errorProject=ZProjects.errorProject),projectProcess(t);a=parseInt(t.current_filter_count)+1,l=$("div[ddname='PROJECTSPERSONALITY']").attr("ddid"),i=$('#RelatedListCommonDiv[ddid="'+l+'"]');a?(a>10&&(a="10+"),a>100&&(a="100+"),$("#newleft_"+l).find("span.numCountn").addClass("numCountVal").text(a),i.removeClass("noDataFountDetail")):($("#newleft_"+l).find("span.numCountn").text("").removeClass("numCountVal"),i.addClass("noDataFountDetail")),null!=t&&(e="0"+e[1]+e[2]+e[3]+e[4]+e[5]+e[6]),ZProjects.projectsNavigated=!1}else if(null!=c[h].mail&&"1"==e[1]){if((t=JSON.parse(c[h].mail)).hasOwnProperty("isFromNewAPI")?mailProcess(t):mailProcess(Handlebars.templates.MailDetailsList(t)),null!=t){if(e=e[0]+"0"+e[2]+e[3]+e[4]+e[5]+e[6],t.mailRange){r=t.mailRange;crmRelatedList.mailRange={},crmRelatedList.mailRange[0]=r}else{var g;s=(g=t.mailsList).length;g&&g[s-1]&&g[s-1].hasOwnProperty("mail_index")?(Crm.mailIndex={},Crm.mailIndex[0]=g[s-1].mail_index):t.hasOwnProperty("next_index")&&(Crm.mailIndex={},Crm.mailIndex[0]=t.next_index)}if(t.hasOwnProperty("isFromNewAPI")){o='<div class="ernCount vH mL20 pB10 dIB crm-base-font-size crmBaseColor"><span id="ernRowCount" class="crm-font-bold">0</span><span class="pL10 ">Row Selected</span><input type="hidden" value="" id="mailsToDelete"/><div style="display:none;" id="mailsSub"></div><input type="hidden" value="listRelationId"><span class="mL10 svgIcons dIB ernDeleteIcon cP vaBaseLine vH" onClick="showDeletePopup(\'mailsSub\',\'crm.button.move.to.trash\', \'\', \'\',this,true)" id="deleteMailsButton"></span></div>';$($("div[ddname=EMAILSPERSONALITY").children("table").find("tr").children()[0]).append(o)}}}else if(null!=c[h].support&&"1"==e[2]){t=JSON.parse(c[h].support);deskInteg.loadDeskintegration(t),null!=t&&(e=e[0]+e[1]+"0"+e[3]+e[4]+e[5]+e[6])}else if(null!=c[h].invoice&&"1"==e[3]){t=JSON.parse(c[h].invoice);ZInvoice.loadRL("ZINVOICEPERSONALITY",crmRelatedList.Module,u,crmRelatedList.EntityId,t),null!=t&&(e=e[0]+e[1]+e[2]+"0"+e[4]+e[5]+e[6],"Potentials"===n&&ZInvoice.refreshpotentialEstInvRL(t))}else if(null!=c[h].expense&&"1"==e[4]){t=JSON.parse(c[h].expense);ZInvoice.loadRL("ZEXPENSEPERSONALITY",crmRelatedList.Module,m,crmRelatedList.EntityId,t),null!=t&&(e=e[0]+e[1]+e[2]+e[3]+"0"+e[5]+e[6],showZFinanceRelCnt("expense",t.expense_loop_count))}else if(null!=c[h].zsubscriptions&&"1"==e[5]){t=JSON.parse(c[h].zsubscriptions);ZInvoice.loadRL("ZSUBSCRIPTIONSPERSONALITY",crmRelatedList.Module,p,crmRelatedList.EntityId,t),null!=t&&(e=e[0]+e[1]+e[2]+e[3]+e[4]+"0"+e[6],showZFinanceRelCnt("zsubscriptions",t.subscription_loop_count))}else null!==c[h].messages&&"1"===e[6]&&(e=showMessagesList(c[h].messages,e,L))}$L("#RelatedListCommonDiv #RelatedListDataScrollInteg,#RelatedListCommonDiv #RelatedListDataScroll,#newRelDetailsScroll,#RelatedListCommonDiv #deskIntegDiv").scroll({preventVertical:!0})},httphandle.send(E)}.bind(this))}));try{crmRelatedList.Module&&Crm.SEND_MAIL_BUTTON_HIDE&&(void 0===Crm.userDetails.permissions["Crm_Implied_Send_Mail_"+crmRelatedList.Module]||!Crm.userDetails.permissions["Crm_Implied_Send_Mail_"+crmRelatedList.Module])&&b&&b.length>0&&b.hide()}catch(e){murphy.error(e)}}function showZFinanceRelCnt(e,t){var a=null;"zsubscriptions"==e&&t>0?a=$('[data-zcqa= "newleft__Zoho Subscriptions"]'):"expense"==e&&t>0&&(a=$('[data-zcqa= "newleft__Zoho Expense"]')),a&&(a=(a=a.find("span.numCountn")).addClass("numCountVal"),t<10?a.text(t):a.text("10+"))}function showMessagesList(e,t,a){var l=JSON.parse(e);if(null!==l){t=t[0]+t[1]+t[2]+t[3]+t[4]+t[5]+"0";var n=networkUtils.returnDependencyFiles(["crm-msg-utils.js"],ResourceConstants.CRMClient),i=networkUtils.returnDependencyFiles(["crm-msg-related-list.js"],ResourceConstants.CRMClient),r=networkUtils.returnDependencyFiles(["crm-msg-related-list.css"],ResourceConstants.CRMClient);Crm.userDetails.RTL_ENABLED&&(r=r.concat(networkUtils.returnDependencyFiles(["crm-msg-rtl.css"],ResourceConstants.CRMClient)));var s=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("bmrelatedlist")],ResourceConstants.CRM);Lyte.injectResources(i.concat(r).concat(s).concat(n),void 0,(function(){var e=document.createElement("crm-msg-related-list");e.setData({conversations:l.messages,listRelationId:a}),$("#"+a).html("").append(e),l.messages&&l.messages.length>0?$("#newleft_"+a).find("span.numCountn").addClass("numCountVal").text(l.messages.length):$("#newleft_"+a).find("span.numCountn").text("").removeClass("numCountVal"),$("[ddid="+a+"]").find("#showCustomizeList").remove()}))}return t}$((function(){$("#show").on("mouseenter","#relatedPageContent .modRow",(function(){crmRelatedList.showMouseHoverSettingIcon(this)})).on("mouseleave","#relatedPageContent .modRow",(function(){crmRelatedList.hideMouseHoverSettingIcon(this)})),$("#show").on("mouseenter","#relatedPageContent .showModMenu",(function(){event.stopPropagation(),$(".DetailsPageBox").length&&crmRelatedList.showMenuList(this),$(this).closest("td").find(".relListMenuDiv").css({visibility:"visible",transition:"visibility 0s linear 600ms"})})),$("#show").on("mouseenter","#relatedPageContent .moreOptions",(function(){event.stopPropagation(),$(".DetailsPageBox").length&&crmRelatedList.showMenuList(this),$(this).closest("td").find(".relListMenuDiv").css({visibility:"visible"})})),$("#show").on("mouseleave","#relatedPageContent .showModMenu",(function(){$(".relListMenuDiv").css({visibility:"hidden",transition:""})}))})),Handlebars.registerHelper("checkIfSubjectField",(function(e,t,a,l){return"SUBJECT"!=e[t].COLUMNNAME||"ACTIVITYHISTORYPERSONALITY"!=a&&"ACTIVITYPERSONALITY"!=a?l.inverse(this):l.fn(this)})),Handlebars.registerHelper("stringify",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("showNavigation",(function(e,t,a,l,n){return e=parseInt(e),crmRelatedList.showNavigation(e,t,a,l.length)?n.fn(this):n.inverse(this)})),crmRelatedList.showNavigation=function(e,t,a,l){return e>=parseInt(a)||l>=parseInt(a)},Handlebars.registerHelper("isNotUndefined",(function(e,t){return e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isBodyContentAvailable",(function(e,t){return crmRelatedList.checkBodyContent(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("compareNumbers",(function(e,t,a){return e===t?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("getId",(function(e,t){return"RELATEDLISTPERSONALITY"==e?"customRelatedListDiv_"+t:"SUPPORTPERSONALITY"==e?"supportdiv":t})),Handlebars.registerHelper("getStyleAttr",(function(e,t){return"RELATEDLISTPERSONALITY"!=e&&"SUPPORTPERSONALITY"!=e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("checkForRlHandling",(function(e,t,a,l){if("COMPETITORNAME"==e[t].COLUMNNAME)return l.fn(this);return"SUBJECT"===e[t].COLUMNNAME&&["ACTIVITYHISTORYPERSONALITY","ACTIVITYPERSONALITY","CALLSPERSONALITY","EVENTSPERSONALITY","TASKSPERSONALITY","CALLSHISTORYPERSONALITY","EVENTSHISTORYPERSONALITY","TASKSHISTORYPERSONALITY"].contains(a)?l.fn(this):("ATTACHMENTSPERSONALITY"!=a||"NAME"!=e[t].COLUMNNAME&&"ATTACHMENTSIZE"!=e[t].COLUMNNAME&&"MODIFIEDTIME"!=e[t].COLUMNNAME)&&("SURVEYPERSONALITY"!=a||"UNIQUEID"!=e[t].COLUMNNAME&&"SOURCE"!=e[t].COLUMNNAME)?"CHILDCAMPAIGNSPERSONALITY"==a&&"CAMPAIGNNAME"==e[t].COLUMNNAME?l.fn(this):"LEADSPERSONALITY"!=a&&"CONTACTSPERSONALITY"!=a||"SERVICERESPONSEID"!=e[t].COLUMNNAME&&"BACKSTAGE_NOOFTICKETS"!=e[t].COLUMNNAME?l.inverse(this):l.fn(this):l.fn(this)})),Handlebars.registerHelper("checkIfSubjectField",(function(e,t,a,l){return"SUBJECT"!=e[t].COLUMNNAME||"ACTIVITYHISTORYPERSONALITY"!=a&&"ACTIVITYPERSONALITY"!=a?l.inverse(this):l.fn(this)})),Handlebars.registerHelper("chattedDiv",(function(e){return null!=e&&0!=e?"<td><span class='siq-chatted'></span></td>":"<td></td>"})),Handlebars.registerHelper("checkStringRL",(function(e,t,a,l,n,i,r,s,o,d){var c="";if("COMPETITORSPERSONALITY"==r)c="<a id='relatedList_"+l.ENTITYID+"_"+n+"' data-zcqa='relatedList_"+d.fn(this)+"_"+n+"' class='link' href='javascript:;' onclick='commonUtils.openCustomLookup(\""+Crm.getCrmBasePath()+"/potentials/ViewCompetitor.do?id="+l.ENTITYID+"&module=Potentials&returnAnchor=competitorspersonality_"+i+'", undefined, "topBandPopup");\'>'+d.fn(this)+"</a>";else if(["ACTIVITYHISTORYPERSONALITY","ACTIVITYPERSONALITY","CALLSPERSONALITY","EVENTSPERSONALITY","TASKSPERSONALITY","CALLSHISTORYPERSONALITY","EVENTSHISTORYPERSONALITY","TASKSHISTORYPERSONALITY"].contains(r)){var u="ap";u="ACTIVITYHISTORYPERSONALITY"===r?"ahp":"ACTIVITYPERSONALITY"===r?"ap":u;if(0==n.indexOf("CustomModule")&&"NAME"==t[a].COLUMNNAME||t[a].COLUMNNAME=={Leads:"LASTNAME",Activities:"SUBJECT",Tasks:"SUBJECT",Calls:"SUBJECT",Events:"SUBJECT",Accounts:"ACCOUNTNAME",Contacts:"LASTNAME",Potentials:"POTENTIALNAME",Campaigns:"CAMPAIGNNAME",Cases:"CASESUBJECT",Solutions:"SOLUTIONTITLE",Products:"PRODUCTNAME",Bundles:"BUNDLENAME",Vendors:"VENDORNAME",PriceBooks:"BOOKNAME",Quotes:"QUOTESUBJECT",SalesOrders:"SALESORDERSUBJECT",PurchaseOrders:"PURCHASEORDERSUBJECT",Invoices:"INVOICESUBJECT",Forecasts:"FORECASTNAME",Visits:"VISITEDPAGE"}[n]){var m="Crm_Implied_View_"+n;crmListView.changedPermissionsForZBModules.hasOwnProperty(m)&&(m=crmListView.changedPermissionsForZBModules[m]);c="<a ";c+=(m=Crm.userDetails.permissions[m])>-1?'data-cid="detailView" href="'+Crm.getCrmBasePath()+"/EntityInfo.do?id="+l.ENTITYID+"&module="+l.MODULE+'"':'href="javascript:;" title="permission denied" data-permission="false"',c+="ACTIVITYHISTORYPERSONALITY"===r||"ACTIVITYPERSONALITY"===r?'id="relatedList_'+l.ENTITYID+"\" data-zcqa='relatedList_"+d.fn(this)+"_"+n+'\' data-params=\'{"fromActivityListView":"true","pfrom":"rel","module":"'+l.MODULE+'","id":"'+l.ENTITYID+'","pn":"'+u+'","peId":"'+crmRelatedList.EntityId+'","bMod":"'+crmRelatedList.Module+'","lookback":"true"':'id="relatedList_'+l.ENTITYID+"\" data-zcqa='relatedList_"+d.fn(this)+"_"+n+'\' data-params=\'{"fromActSubModuleListView":"true","pfrom":"rel","module":"'+l.MODULE+'","id":"'+l.ENTITYID+'","pn":"'+r+'","peId":"'+crmRelatedList.EntityId+'","bMod":"'+crmRelatedList.Module+'","lookback":"true"',c+='}\' class="crmLinkColor cP"',c+=">"+d.fn(this)+"</a>"}}else if("ATTACHMENTSPERSONALITY"==r)if("NAME"==t[a].COLUMNNAME){var p=e,h=p.length,v=p.lastIndexOf("."),L="";0!=h&&v>-1&&(L=(L=p.substring(v+1,h)).toLowerCase());var g=l.extn,I=l.mode,f=l.isLinkDocs,C=l.isPreviewAvailable;void 0===l.isPreviewAvailable&&(C=!0);c='<div class="atchName" style="max-width:600px">',c='<div class="atchName w90_per">';if(null!=f&&0==f)c+="pdf"==L&&C?"<a data-zcqa='relatedList_"+d.fn(this)+"_"+n+"' id='relatedList_"+l.ENTITYID+"' title=\""+$ESAPI.encoder().encodeForHTMLAttribute(p)+'" onClick="javascript:openSheetForExport(\''+Crm.getCrmBasePath()+"/specific/ViewAttachment?fileId="+l.FILEID+"&module="+encodeURIComponent(crmRelatedList.Module)+"&parentId="+l.ParentId+"&creatorId="+l.CreaterId+"&id="+l.ENTITYID+"&name="+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(encodeURIComponent(p)))+"&downLoadMode=pdfViewPlugin','pdfViewPlugin');sE(event);\" style=\"cursor: pointer\"><span> <span class='"+$ESAPI.encoder().encodeForHTMLAttribute(g)+"-icon dIB vaM'></span></span>":""!=I&&C?"<a data-zcqa='relatedList_"+d.fn(this)+"_"+n+"' id='relatedList_"+l.ENTITYID+"' title=\""+$ESAPI.encoder().encodeForHTMLAttribute(p)+'" onClick="javascript:openSheetForExport(\''+Crm.getCrmBasePath()+"/specific/ViewAttachment?fileId="+l.FILEID+"&module="+encodeURIComponent(crmRelatedList.Module)+"&parentId="+l.ParentId+"&creatorId="+l.CreaterId+"&id="+l.ENTITYID+"&name="+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(encodeURIComponent(p)))+"&downLoadMode="+I+'\');sE(event);" style="cursor: pointer"> <span><span class=\''+$ESAPI.encoder().encodeForHTMLAttribute(g)+"-icon dIB vaM'></span></span>":"png"==g&&C?"<a data-zcqa='relatedList_"+d.fn(this)+"_"+n+"' id='relatedList_"+l.ENTITYID+"' title=\""+$ESAPI.encoder().encodeForHTMLAttribute(p)+'" onClick="showImagePreview(this)" href="'+Crm.getCrmBasePath()+"/ViewImage?fileId="+l.FILEID+"&module="+encodeURIComponent(crmRelatedList.Module)+"&parentId="+l.ParentId+"&creatorId="+l.CreaterId+"&id="+l.ENTITYID+"&name="+$ESAPI.encoder().encodeForHTMLAttribute(encodeURIComponent(p))+'&downLoadMode=default" class="cboxElement" style="cursor: pointer" name=\'cboxElement\'> <span><span class=\''+$ESAPI.encoder().encodeForHTMLAttribute(g)+"-icon dIB vaM'></span></span>":"<a data-zcqa='relatedList_"+d.fn(this)+"_"+n+"' id='relatedList_"+l.ENTITYID+"' title=\""+$ESAPI.encoder().encodeForHTMLAttribute(p)+'" href="'+Crm.getCrmBasePath()+"/specific/ViewAttachment?fileId="+l.FILEID+"&module="+encodeURIComponent(crmRelatedList.Module)+"&parentId="+l.ParentId+"&creatorId="+l.CreaterId+"&id="+l.ENTITYID+"&name="+$ESAPI.encoder().encodeForHTMLAttribute(encodeURIComponent(p))+'&downLoadMode=default" style="cursor: pointer" title=\''+I18n.getMsg("crm.view.attachment.download")+" "+$ESAPI.encoder().encodeForHTMLAttribute(p)+"' > <span><span class='"+$ESAPI.encoder().encodeForHTMLAttribute(g)+"-icon dIB vaM'></span></span>";else if(null!=f&&1==f)c+="<a data-zcqa='relatedList_"+d.fn(this)+"_"+n+"' id='relatedList_"+l.ENTITYID+"' title=\""+$ESAPI.encoder().encodeForHTMLAttribute(p)+'" onClick="triggerLinkDocsView(\''+Crm.getCrmBasePath()+"/specific/ViewAttachment?fileId="+l.ZDOCS_FILEID+"&module="+encodeURIComponent(crmRelatedList.Module)+"&parentId="+l.ParentId+"&creatorId="+l.CreaterId+"&id="+l.ENTITYID+"&name="+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(encodeURIComponent(p)))+"&linkDocs=true','"+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(l.attachExt))+"','"+l.ENTITYID+'\');sE(event);" style="cursor: pointer"><span> <span class=\''+$ESAPI.encoder().encodeForHTMLAttribute(g)+"-icon dIB vaM'></span></span>";else if(null!=f&&2==f)c+='<div class = "link-iconAtc mR10 dIB vaM w90_per" border="0" hspace="3" height="16px" width="16px" align="absmiddle"></div> <a data-zcqa=\'relatedList_'+d.fn(this)+"_"+n+"' id='relatedList_"+l.ENTITYID+"' title=\""+$ESAPI.encoder().encodeForHTMLAttribute(p)+'"  onClick="crmRelatedList.openLinkAndTitleChange(\''+Crm.getCrmBasePath()+"/specific/ViewAttachment?module="+encodeURIComponent(crmRelatedList.Module)+"&id="+l.ENTITYID+"&name="+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(encodeURIComponent(p)))+"&linkURL="+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(encodeURIComponent(l.linkURL)))+"','"+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(l.linkURL))+'\',this);sE(event);" target="_blank" style="cursor: pointer">';else if(void 0!==f&&(3===f||4===f)){var R=moduleApiMapping[detailView.currentModule],E=l.linkURL,T={entity_id:detailView.entityId,module:R};E=1===E.split("?").length?E+"?authId="+$ESAPI.encoder().encodeForURL(JSON.stringify(T)):E+"&authId="+$ESAPI.encoder().encodeForURL(JSON.stringify(T));var S="svgIcons ico-teamDrive mR10 dIB vaM";4===f&&(S=$ESAPI.encoder().encodeForHTMLAttribute(g)+"-icon dIB vaM"),c+="<div class = '"+S+'\' border="0" hspace="3" height="16px" width="16px" align="absmiddle"></div> <a data-zcqa=\'relatedList_'+d.fn(this)+"_"+n+"' id='relatedList_"+l.ENTITYID+"' title=\""+$ESAPI.encoder().encodeForHTMLAttribute(p)+'"  onClick="Utils.openUrl(\''+$ESAPI.encoder().encodeForHTMLAttribute($ESAPI.encoder().encodeForJavaScript(E))+'\');sE(event);" rel="noopener noreferrer" target="_blank" style="cursor: pointer">'}null!=f&&3==f?1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI?c+='<span class="dIB ellipsistext vaM" >'+d.fn(this)+'</span><span class="dIB mL10 vaM"></span></a>':c+='<span class="dIB ellipsistext vaM" style="max-width: 400px;">'+d.fn(this)+'</span><span class="dIB mL10 vaM"></span></a>':c+=d.fn(this)+"</a>","mp3"!=L&&"wav"!=L||(c+='<span class="cP icon_play notPlaying dIB" onclick="playAudio(this,\''+l.ENTITYID+'\')" style="margin-left:10px;display: none;" onmouseover="setPlayOrPauseMessage(this);"></span>',c+="<audio id='"+l.ENTITYID+'_audio\' class="mT10" hidden="true" src="'+Crm.getCrmBasePath()+"/specific/ViewAttachment?fileId="+l.FILEID+"&module="+encodeURIComponent(crmRelatedList.Module)+"&parentId="+l.ParentId+"&creatorId="+l.CreaterId+"&id="+l.ENTITYID+"&name="+$ESAPI.encoder().encodeForHTMLAttribute(encodeURIComponent(p))+'" controls preload="none">'),c+="</div>"}else if("ATTACHMENTSIZE"==t[a].COLUMNNAME){var b=e;if(null!=(f=l.isLinkDocs)&&1==f&&(b=l.FILESIZE),null!=f&&(2==f||3==f))return"-";b.indexOf("KB")>-1?c=b.replace(/KB/g,I18n.getMsg("KB")):b.indexOf("MB")>-1&&(c=b.replace("/MB/g",I18n.getMsg("MB")))}else"MODIFIEDTIME"==t[a].COLUMNNAME&&(c="<span onmouseover=\"renderingUtils.zctt.showtt('"+l.dateToolTip+'\')" onmouseout="renderingUtils.zctt.hidett()">'+e+"</span>");else if("CHILDCAMPAIGNSPERSONALITY"==r){m="Crm_Implied_View_"+n;crmListView.changedPermissionsForZBModules.hasOwnProperty(m)&&(m=crmListView.changedPermissionsForZBModules[m]);c="";(m=Crm.userDetails.permissions[m])>-1?(2==l.CAMPAIGN_TYPE&&(c+='<span data-cid="subCampaigns" data-params=\'{"id":"'+l.ENTITYID+'","rid":"'+i+'"}\' class="cP svgIconsImg camTrArrow dIB vaM mR8"></span>'),c+='<a data-cid="detailView" href="'+Crm.getCrmBasePath()+"/EntityInfo.do?id="+l.ENTITYID+"&module="+l.MODULE+'"'):c+='<a href="javascript:;" title="permission denied" data-permission="false"',c+='id="relatedList_'+l.ENTITYID+"\" data-zcqa='relatedList_"+d.fn(this)+"_"+n+'\' data-params=\'{"pfrom":"rel","module":"'+l.MODULE+'","id":"'+l.ENTITYID+'","recordNum":"'+recordNum+'","lookback":"true"}\' class="link',c+=s?' mL20">':'">',c+=d.fn(this)+"</a>"}else if("SURVEYPERSONALITY"==r){if("SOURCE"==t[a].COLUMNNAME)c=I18n.getMsg(e);else if("UNIQUEID"==t[a].COLUMNNAME){var y=l.uniqueId,A=encodeURIComponent(l.sEmail);c=l&&l.RESPONSEID&&"-1"===l.RESPONSEID?'<span class="crm-small-font-size" >'+I18n.getMsg("crm.survey.status.visited")+"</span>":null!=y&&0!=y?1==o?"<a href='javascript:void(0);' data-zcqa='viewResponse' onclick='ZSurvey.viewResponse(this);' data-params='{\"action\" : \"viewResponse\", \"uniqueid\":\""+y+'","responseid":"'+l.RESPONSEID+'" , "zcrmemail":"'+A+"\"}'>"+I18n.getMsg("crm.zsurvey.label.view.response")+"</a>":"<a href='javascript:void(0);' data-zcqa='viewResponse' onmouseenter=\"crmui.showTooltip('"+I18n.getMsg("crm.zsurvey.no.viewresponse.surveydisabled.brandchange",Crm.integrationsAppName.ZOHO_SURVEY)+'\');" onmouseleave="crmui.hideTooltip();">'+I18n.getMsg("crm.zsurvey.label.view.response")+"</a>":'<span class="crm-small-font-size" >'+I18n.getMsg("crm.survey.response.yettorespond")+"</span>"}}else if("LEADSPERSONALITY"==r||"CONTACTSPERSONALITY"==r)if("SERVICERESPONSEID"==t[a].COLUMNNAME){if(!validationUtils.isEmptyString(e)){var O=encodeURIComponent(l.Received_By);if(returnJson&&returnJson.Campaigns&&returnJson.Campaigns.surveyUniqueId&&!validationUtils.isEmptyString(O)){var N=returnJson.Campaigns.surveyUniqueId;c=1==o?'<a href=\'javascript:void(0);\' data-zcqa=\'viewResponse\' onclick=\'ZSurvey.viewResponse(this);\' data-params=\'{"hideSummary" : "true", "action" : "viewResponse", "uniqueid":"'+N+'","responseid":"'+e+'" , "zcrmemail":"'+O+"\"}'>"+I18n.getMsg("crm.zsurvey.label.view.response")+"</a>":"<a href='javascript:void(0);' data-zcqa='viewResponse' onmouseenter=\"crmui.showTooltip('"+I18n.getMsg("crm.zsurvey.no.viewresponse.surveydisabled.brandchange",Crm.integrationsAppName.ZOHO_SURVEY)+'\');" onmouseleave="crmui.hideTooltip();">'+I18n.getMsg("crm.zsurvey.label.view.response")+"</a>"}}}else"BACKSTAGE_NOOFTICKETS"==t[a].COLUMNNAME&&(c=e&&e.split&&2===e.split(" ").length?e.split(" ")[0]+" <span class='zBSEmptyChartImg zBSSmallTicketIcon dIB mL5'></span>":e);l.colorCode&&""!==l.colorCode&&(c="<div class='pR'><span class='dIB eventColor_lv_fr' data-zcqa='rlcolor_"+e+"' style='background: "+l.colorCode+"'></span></div>"+c);return c})),Handlebars.registerHelper("getDownloadLink",(function(e,t,a,l,n,i,r){var s="",o=l.isLinkDocs;if("ATTACHMENTSPERSONALITY"==r&&2!=o&&3!=o&&0==a){for(var d="",c=t.length,u=0;u<c;u++)if("NAME"==t[u].COLUMNNAME){d=l.CONTENT[u];break}var m="",p="";null!=o&&1==o?(m=l.ZDOCS_FILEID,p="&linkDocs=true"):(m=l.FILEID,p=""),s+='<div name="downloadcontainer" style="display:inline-block;"><a id="downloadlink" class="svgIconsImg dIB downloadLinkImg" href="'+Crm.getCrmBasePath()+"/specific/ViewAttachment?fileId="+m+"&module="+encodeURIComponent(crmRelatedList.Module)+"&parentId="+l.ParentId+"&creatorId="+l.CreaterId+"&id="+l.ENTITYID+"&name="+encodeURIComponent(d)+"&downLoadMode=default"+p,s+='" style="cursor: pointer"></a></div>'}return s})),Handlebars.registerHelper("checkSortArrow",(function(e,t,a,l){return""==e&&t==a||e==t?l.fn(this):l.inverse(this)})),Handlebars.registerHelper("getClassNames",(function(e){return e?e+" createlink rel_listRelationButton":"tb_newsmallbtn"})),Handlebars.registerHelper("getSplitValues",(function(e,t,a){return e.split(t)[a]})),Handlebars.registerHelper("getEditDeleteLinks",(function(e,t,a,l){return crmRelatedList.getEditDeleteLinks(e,t,a,this,l.data.root),l.fn(this)})),Handlebars.registerHelper("isSortableRL",(function(e,t,a){return 3==e||999==e||208==e||207==e||209==e||110==e||1e3==e||132==e||"POTSTAGEHISTPERSONALITY"==t?a.inverse(this):a.fn(this)})),Handlebars.registerHelper("ifNotInventoryModule",(function(e,t){return"Quotes"!=e&&"Invoices"!=e&&"PurchaseOrders"!=e&&"SalesOrders"!=e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isCustomCheckBoxChecked",(function(e,t,a){var l="CB_"+t;return CustomButtonJSObjectInit.checkBox&&CustomButtonJSObjectInit.checkBox[l]&&CustomButtonJSObjectInit.checkBox[l].length>0&&-1!=CustomButtonJSObjectInit.checkBox[l].indexOf(e)?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("toShowCheckBox",(function(e,t,a,l){var n=returnJson.relListLabelsJson.customButtonJson;return t&&n&&n[e]&&n[e].length||a?l.fn(this):l.inverse(this)})),Handlebars.registerHelper("isHeaderCustomCheckBoxChecked",(function(e,t,a){var l="CB_"+t;if(void 0===CustomButtonJSObjectInit.checkBox||void 0===CustomButtonJSObjectInit.checkBox[l]||CustomButtonJSObjectInit.checkBox[l].length<=0)return a.inverse(this);if(e.body&&e.body.length>0){for(var n=e.body.length,i=0;i<n;i++){var r=e.body[i].ENTITYID;if(CustomButtonJSObjectInit.checkBox&&CustomButtonJSObjectInit.checkBox[l]&&CustomButtonJSObjectInit.checkBox[l].length>0&&CustomButtonJSObjectInit.checkBox[l].indexOf(r)<0)return a.inverse(this)}return a.fn(this)}})),Handlebars.registerHelper("checkStringRelList",(function(e,t,a,l,n,i,r,s){var o="";if(i.indexOf("LinkingModule")>-1&&(o=i,i=l.MODULE,l.searchmodule?i=l.searchmodule:l.isCustLookUp&&(i=e.MODULE)),n||(n=null),"Contact Roles"==i)i="Contacts";else if("Entity_Cadences"===i&&"Last Follow Up Date"===t[a].FIELDLABEL){detailView.entityIdVsDate[l.ENTITYID]=e}else if("Invited Events"==i){if("SUBJECT"==t[a].COLUMNNAME){var d=$("<ul/>",{class:"m0 modListMenuDD"}),c=$("<li/>",{class:"modListLi crm-font-regular crm-small-font-size cP"});if(2==l.approveStatus){(m=c.clone()).attr("href","javascript;:"),m.text(I18n.getMsg("crm.approvalProcess.label.waitingForApproval")),d.html(m)}else{if(crmRelatedList.getEditDeleteLinks(r.listRelationId,l,r.module,crmRelatedList),crmRelatedList.links.editObj){var u=crmRelatedList.links.editObj,m=c.clone();u.isShowStatusChange?(m.attr("href","javascript:;").attr("data-zcqa",u.editzcqa).attr("onclick","javascript:showCampaignStatusDiv('"+u.url+"');retrun false;"),m.text(I18n.getMsg("crm.button.edit")),d.append(m)):u.isEditEntity?(m.attr("href",u.url).attr("data-zcqa",u.editzcqa).attr("data-cid",u.dataCid).attr("data-params",JSON.stringify(u.dataParams)),m.text(I18n.getMsg("crm.button.edit")),d.append(m)):u.isEventEdit&&(m.attr("href","javascript:;").attr("data-zcqa",u.editzcqa).attr("data-cid",u.dataCid).attr("data-params",JSON.stringify(u.dataParams)),m.text(I18n.getMsg("crm.button.edit")),d.append(m))}if(crmRelatedList.links.deleteObj){u=crmRelatedList.links.deleteObj;(m=c.clone()).attr("href","javascript;:").attr("data-zcqa",u.deletezcqa).attr("data-onclick","javascript:sortRelatedList('"+u.url+"')").attr("onclick","showDeletePopup('"+l.ENTITYID+"', 'crm.button.delete', '', '',  this, 'rl', undefined,false,'"+$ESAPI.encoder().encodeForJavaScript(l.CONTENT[0])+"')"),m.text(I18n.getMsg("crm.button.delete")),d.append(m)}if(crmRelatedList.links.removeObj){u=crmRelatedList.links.removeObj;(m=c.clone()).attr("href","javascript;:").attr("data-zcqa",u.removezcqa).attr("data-onclick",u.url).attr("data-stdt",l.stDt).attr("data-stat",l.status).attr("onclick","crmRelatedList.showRemovePopup(this, 'rl')"),m.text(I18n.getMsg("crm.label.event.remove.participant",[u.entityName])),d.append(m)}}var p=$("<div/>",{class:"scaleCont scaleZero"}).html(d),h=$("<div/>",{class:"p0 relListMenuDiv",style:"visibility: hidden;"}).append($("<i/>",{class:"setDDPopupLeft",style:"top: 14px;left: -8px;"}).append($("<i/>",{class:"setDDPopupLeftA"})));h.append(p);var v=$("<div/>",{class:"pR crm-font-regular crm-base-font-size crmBaseColor"}).append($("<a/>",{"data-zcqa":"detailView","data-cid":"detailView",href:Crm.getCrmBasePath()+"/EntityInfo.do?id="+l.ENTITYID+"&module=Events",id:"relatedListView_"+l.ENTITYID,"data-params":"{'module':'Events', 'id':'"+l.ENTITYID+"'}",class:"link fL textWarp"}).text(l.CONTENT[0]));if(v.append($("<div/>",{class:"pR fL mL10"}).append($("<span/>",{class:"moreOptions formBuildIconsSvg","data-zcqa":"RL_OptionsIcon",onclick:"crmRelatedList.showMenuList(this)"})).append(h)),l.colorCode&&""!==l.colorCode){var L="<div class='pR'><span class='dIB eventColor_lv_fr' data-zcqa='rlcolor_"+$ESAPI.encoder().encodeForHTML(e)+"' style='background: "+l.colorCode+"'></span></div>";$(L).insertBefore(v.find(".pR"))}return $("<div/>").html(v).html()}if("STATUS"==t[a].COLUMNNAME){var g="",I="";switch(e){case"5":g="noreplyDisc",I=I18n.getMsg("crm.label.event.invitation.not.sent");break;case"4":g="noreplyDisc",I=I18n.getMsg("crm.label.event.invitation.sent");break;case"1":g="greenDisc",I=I18n.getMsg("crm.label.event.invitation.accept");break;case"2":g="orangeDisc",I=I18n.getMsg("crm.label.event.invitation.may.be");break;case"3":g="redDisc",I=I18n.getMsg("crm.label.event.invitation.decline")}return"<em class='"+g+" vaM mR5'>&nbsp;</em>"+I}i="Activities"}else if("CheckLists"===i){var f,C=$("<div>");return"TITLE"===t[a].COLUMNNAME?(f=""===e||void 0===e?"("+I18n.getMsg("crm.untitled.default.label")+")":e,C.append($("<a>",{class:"link cP pR bpChkListRL",onclick:"ProcessFlow.toggleCheckLists(this)",chkLiId:l.checkListId}).text(f).append($("<span>",{class:"checkListArrow"})))):(f=I18n.getMsg("crm.process.completed.via.transition",$ESAPI.encoder().encodeForHTML(e)),C.append(f)),C.html()}if("Member Status"==t[a].COLUMNALIAS&&null!=l.REMARKS)return"<span style='cursor: pointer' onmouseout='renderingUtils.zctt.hidett();' onmouseover='renderingUtils.zctt.showtt( \""+l.REMARKS+"\")'>"+s.fn(this)+"</span>";if("object"!=typeof e&&void 0!==t){if(void 0===t[a])return;if(21==t[a].UITYPE){var R="",E="http";return""===e||0!=e.indexOf(E)&&0!=e.indexOf("https")?""!=e&&(R='<a data-cid="dummy" class="crmLinkColor cP" href="http://'+s.fn(this)+'" target="_blank">'+s.fn(this)+"</a>"):R='<a data-cid="dummy" class="crmLinkColor cP" href="'+s.fn(this)+'" target="_blank">'+s.fn(this)+"</a>",R}if(301==t[a].UITYPE||300==t[a].UITYPE){if("CALFORMSTATUS"===t[a].COLUMNNAME&&"Status__s"===t[a].SYS_REF_NAME)return"<div class='Status__sdiv'data-zcqa='Status'>"+("1"===e?I18n.getMsg("Active"):I18n.getMsg("Inactive"))+"</div>";R="";return R=!0===e||"true"==e?'<img src="'+Search.spacerImg+'" class="yes">':'<img src="'+Search.spacerImg+'" class="no-new" width="9" height="9">'}if(100==t[a].UITYPE){R=s.fn(this);return""!=e&&(R=R.replace(/;/g,"; ")),R}if(22==t[a].UITYPE){R="";if(""!=e){var T=s.fn(this),S={screen_name:e,mode:"get_twitter_name"};(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/socialIntegration.do",data:S,success:function(e){R=null!=e&&"null"!=e&&e.trim().length>0?' <a data-cid="dummy" class="crmLinkColor cP" href="'+RebrandLinkUtil.getProperties("TW_URL")+"/"+e+'" target="_blank"  id="subvalue_Twitter">'+T+"</a>":' <span id="subvalue_Twitter">'+T+"</span>"}})}return R}if(38===t[a].UITYPE){var b=parseFloat(s.fn(this));return"TIMESPENT"==t[a].COLUMNNAME||"AVERAGETIMESPENT"==t[a].COLUMNNAME?Utils.convertTimeInDoubleToReadableForm(s.fn(this)):isNaN(b)?"":!0===t[a].separator?s.fn(this):b}if(33===t[a].UITYPE){if(""===e)return s.fn(this);if(!1===l.ISCALLALLOWED||t[a].donotshow||"Activities"===i)return"<div class='phoneRtl dvphoneRtl' style='min-width:100%'>"+s.fn(this)+"</div>";if(null==returnJson[crmRelatedList.Module]||1!=returnJson[crmRelatedList.Module].isOutboundAllowed||t[a].donotshow){if(Crm.userDetails.ZPBENABLED){var y='asyncFn(crmCallsNew.getClick2CallPromise,"'+l.ENTITYID+'","'+i+'","'+$ESAPI.encoder().encodeForJavaScript(l.ENTITYNAME)+'","","'+s.fn(this)+'","'+t[a].COLUMNNAME+'")';return"<div class='phoneRtl' style='min-width:100%;position:relative;'>"+s.fn(this)+"<span style='position:absolute'><zpb-phone number='"+s.fn(this)+"' module='"+i+"' recordid='"+l.ENTITYID+"' callbackparamfn='"+y+"'></zpb-phone></span></div>"}return"<div onmouseover='editmouseover(this, \"phone\");' onmouseout='editmouseout(this, \"phone\");' class='phoneRtl dvphoneRtl' style='min-width:100%'>"+s.fn(this)+"<a style='visibility:hidden;' class='pH2 phoneRtl' title='"+I18n.getMsg("crm.phoneNo.Link.Title")+"' href='skype:"+e+"?call' onclick='sE();'></a></div>"}return"<div class='phoneRtl' style='min-width:100%'>"+s.fn(this)+"<a href='javascript:;' class='calliconOuter fN' onmouseover='CTIAPI.showCallButtonlabel(this)' onmouseout=\"CTIAPI.hideCallButtonlabel(this)\" onclick=\"sE();ctiApiNotifier.click2Call('"+$ESAPI.encoder().encodeForJavaScript(e)+"','"+Crm.userDetails.ZGID+"','"+Crm.userDetails.USER_ID+"','"+l.ENTITYID+"','','"+i+"','"+$ESAPI.encoder().encodeForJavaScript(l.ENTITYNAME)+"','"+t[a].COLUMNNAME+"')\"><i class='callIcon'></i><span id='calllabel1'>"+I18n.getMsg("Call")+"</span></a></div>"}if("TIMESPENT"==t[a].COLUMNNAME||"AVERAGETIMESPENT"==t[a].COLUMNNAME)return Utils.convertTimeInDoubleToReadableForm(s.fn(this));if(32===t[a].UITYPE||38===t[a].UITYPE||52===t[a].UITYPE||117===t[a].UITYPE)return null!==t[a].separator&&t[a].separator,e;if(t[a].UITYPE==CrmField.UITYPES.SERVICE_DURATION)return Handlebars.helpers.setServiceDuration(e);var A;if(t[a].UITYPE===CrmField.UITYPES.PICK_LIST||t[a].UITYPE===CrmField.UITYPES.STAGE)return"Activities"!==i&&t[a].colorcode_enabled&&!0===t[a].colorcode_enabled&&""!==s.fn(this)?l.colorCode&&""!==l.colorCode?(A=getPLStyleObj(l.colorCode),"<span data-zcqa='colorcode_rellistvalue_"+i+"_"+t[a].FIELDID+"_"+s.fn(this)+"' class='colorAppliedPicklist' style='"+A+"'>"+s.fn(this)+"</span>"):(A=getPicklistStyleObj(e,t[a].picklistmap),"<span data-zcqa='colorcode_rellistvalue_"+i+"_"+t[a].FIELDID+"_"+s.fn(this)+"' class='colorAppliedPicklist' style='"+A+"'>"+s.fn(this)+"</span>"):s.fn(this);if(moduleRecordMapping.CalendarBookings&&i===moduleRecordMapping.CalendarBookings.module_name)switch(t[a].SYS_REF_NAME){case"Booking_Form_Name__s":return"<link-to data-zcqa='Booking Form Name'class='cP'lt-prop-route='crm.settings.section.calendar-booking.view-calendar-booking'lt-prop-qp='{\"module\" : \"Appointments__s\", \"type\" : \"team\"}'lt-prop-dp='[\""+l.ENTITYID+'"]\'lt-prop-td=\'{"from": "serviceRelatedList"}\'>'+$ESAPI.encoder().encodeForHTML(e)+"</link-to>";case"Booking_Form_Description__s":return"<div data-zcqa='Booking Form Description'>"+$ESAPI.encoder().encodeForHTML(e)+"</div>"}if(0==i.indexOf("CustomModule")&&"NAME"==t[a].COLUMNNAME||0==o.indexOf("LinkingModule")&&"NAME"==t[a].COLUMNNAME&&2!=t[a].UITYPE&&0!=r.name.indexOf("HISTORYPERSONALITY")||t[a].COLUMNNAME=={Leads:"LASTNAME",Activities:"SUBJECT",Accounts:"ACCOUNTNAME",Contacts:"LASTNAME",Potentials:"POTENTIALNAME",Campaigns:"CAMPAIGNNAME",Cases:"CASESUBJECT",Solutions:"SOLUTIONTITLE",Products:"PRODUCTNAME",Bundles:"BUNDLENAME",Vendors:"VENDORNAME",PriceBooks:"BOOKNAME",Quotes:"QUOTESUBJECT",SalesOrders:"SALESORDERSUBJECT",PurchaseOrders:"PURCHASEORDERSUBJECT",Invoices:"INVOICESUBJECT",Forecasts:"FORECASTNAME",Visits:"VISITEDPAGE",Appointments:"APPOINTMENTNAME",Services:"SERVICENAME"}[i]||(i.indexOf("Leads")||i.indexOf("Contacts"))&&"FULLNAME"==t[a].COLUMNNAME||"Campaigns"===i&&"PARENT_CAMPAIGNID"==t[a].COLUMNNAME){var O=l.relContactId?l.relContactId:null,N="Crm_Implied_View_"+i;crmListView.changedPermissionsForZBModules.hasOwnProperty(N)&&(N=crmListView.changedPermissionsForZBModules[N]),N=Crm.userDetails.permissions[N];R="<a ";var P="<crux-lookup-component ";o||l.MODULE,l.JID?l.JID:l.ENTITYID;if(N>-1)if(t[a].JFIELDID&&"NAME"==t[a].COLUMNNAME)P+=' cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params=\'["'+o+'","'+l.JID+"\"]'";else{let e="crm.tab.module.entity";void 0!==moduleRecordMapping[i]&&"team_based"===moduleRecordMapping[i].access_type&&moduleRecordMapping[i].private_profile&&"Requesters"===moduleRecordMapping[i].private_profile.name&&(e="crm.tab.requesters.module.index-module.entity.detail"),P+=' cx-prop-route-name="'+e+'" cx-prop-dynamic-params=\'["'+l.MODULE+'","'+l.ENTITYID+"\"]'"}else R+='href="javascript:;" title="permission denied" data-permission="false"';return t[a].JFIELDID&&"NAME"==t[a].COLUMNNAME&&l.JID?P+="cx-prop-zcqa='relatedList_"+s.fn(this)+"_"+i+"' cx-prop-id=\"relatedList_"+l.JID+'" cx-prop-transition-data=\'{"pfrom":"rel","relContactId":"'+O+'","module":"'+o+'","id":"'+l.JID+'","cvid":"'+n+'","recordNum":"'+recordNum+'","lookback":"true"}\' cx-prop-class="crmLinkColor cP" class="wrapLyteTextWrapperClass" ':P+="cx-prop-zcqa='relatedList_"+s.fn(this)+"_"+i+"' cx-prop-id=\"relatedList_"+l.ENTITYID+'" cx-prop-transition-data=\'{"pfrom":"rel","relContactId":"'+O+'","module":"'+l.MODULE+'","id":"'+l.ENTITYID+'","cvid":"'+n+'","recordNum":"'+recordNum+'","lookback":"true"}\' cx-prop-class="crmLinkColor cP" class="wrapLyteTextWrapperClass" ',R+='}\' class="crmLinkColor cP"',R+=">"+s.fn(this)+"</a>",P+='cx-prop-value="'+s.fn(this)+'"></crux-lookup-component>'}return s.fn(this)}if(void 0!==t[a]){if(4==t[a].UITYPE&&"Accounts"==l.MODULE)return s.fn(this.DISPLAYLABEL);if(4!=t[a].UITYPE||"Calls"!=l.MODULE&&"Tasks"!=l.MODULE&&"Events"!=l.MODULE){if("User"===e.MODULE||"Users"===e.MODULE)return'<span purpose="showUserBC" data-params=\'{"userId":"'+this.ENTITYID+"\"}'>"+s.fn(this.DISPLAYLABEL)+"</span>";if("Appointments_Booking_Form_Name__s"===t[a].SYS_REF_NAME)return e.DISPLAYLABEL?"<link-to data-zcqa='relatedList_"+e.DISPLAYLABEL+"_"+i+'\'class=\'cP\'lt-prop-route=\'crm.settings.section.calendar-booking.view-calendar-booking\'lt-prop-qp=\'{"module" : "Appointments__s", "type" : "team"}\'lt-prop-dp=\'["'+e.ENTITYID+'"]\'lt-prop-td=\'{"from": "serviceRelatedList"}\'>'+e.DISPLAYLABEL+"</link-to>":"<div data-zcqa='relatedList__"+i+"'></div>";N="Crm_Implied_View_";0==o.indexOf("LinkingModule")&&0==t[a].COLUMNNAME.indexOf("LINKINGMXN")&&2!=t[a].UITYPE&&0!=r.name.indexOf("HISTORYPERSONALITY")?N+=o:N+=i,crmListView.changedPermissionsForZBModules.hasOwnProperty(N)&&(N=crmListView.changedPermissionsForZBModules[N]),N=Crm.userDetails.permissions[N];R="<a ";return R+=N>-1?'data-cid="detailView" data-params=\'{"pfrom":"rel","relContactId":"null","module":"'+e.MODULE+'","id":"'+e.ENTITYID+"\",\"lookback\":\"true\"}' onclick=\"Crm.trackSpotLightAction('Lookup Click',{'Module':'"+e.MODULE+'\'});" onmouseenter="crmLookupBusinessCard.showLookupDetails(this)" onmouseout="crmui.hideTooltip()" href="'+Crm.getCrmBasePath()+"/EntityInfo.do?id="+e.ENTITYID+"&module="+e.MODULE+'"':'href="javascript:;" title="Permission denied" data-permission="false"',R+='id="relatedList_'+e.ENTITYID+"\" data-zcqa='relatedList_"+s.fn(this.DISPLAYLABEL)+"_"+i+'\' class="crmLinkColor cP">'+s.fn(this.DISPLAYLABEL)+"</a>"}var k=this.MODULE,N="Crm_Implied_View_"+k;crmListView.changedPermissionsForZBModules.hasOwnProperty(N)&&(N=crmListView.changedPermissionsForZBModules[N]),N=Crm.userDetails.permissions[N],k=k.slice(0,k.lastIndexOf("s"));var R="<a ";return R+=N>-1?'data-cid="detailView" data-params=\'{"pfrom":"rel","relContactId":"'+(l.relContactId?l.relContactId:null)+'","module":"'+this.MODULE+'","id":"'+this.ENTITYID+'","lookback":"true"}\' href="'+Crm.getCrmBasePath()+"/EntityInfo.do?id="+this.ENTITYID+"&module="+this.MODULE+'"onmouseover="showRelatedFields_new(\''+this.MODULE+"','"+this.ENTITYID+'\',this)" onmouseout="hideLoadingDiv();"':'href="javascript:;" title="permission denied" data-permission="false"',R+=' id="relatedList_'+this.ENTITYID+"\" data-zcqa='relatedList_"+s.fn(this.DISPLAYLABEL)+"_"+i+'\' class="crmLinkColor cP">',R+=s.fn(this.DISPLAYLABEL),R+="</a>"}})),Handlebars.registerHelper("showNoRecords",(function(e,t){var a=e.listRelationId||e.rid;return e.body&&0===e.body.length&&crmRelatedList.filters&&!crmRelatedList.filters[a]?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("setFilterComparators",(function(e){var t;e.disabled=!1,"Response"===e.SYS_REF_NAME&&"SERVICERESPONSEID"===e.COLUMNNAME?(e.disabled=!0,t=[{name:I18n.getMsg("crm.label.hyphenselect"),value:""}]):e.picklist_values?("-None-"===e.picklist_values[0].ActualValue&&e.picklist_values.splice(0,1),t=999===e.UITYPE?[{name:I18n.getMsg("contains"),value:"equal"}]:[{name:I18n.getMsg("is"),value:"equal"},{name:I18n.getMsg("isn't"),value:"not_equal"}]):32===e.UITYPE||34===e.UITYPE||36===e.UITYPE||38===e.UITYPE||40===e.UITYPE||52===e.UITYPE||143===e.UITYPE||144===e.UITYPE||145===e.UITYPE||(116===e.UITYPE||118===e.UITYPE)&&("currency"===e.returnType||"decimal"===e.returnType||"integer"===e.returnType||"longinteger"===e.returnType)||116===e.UITYPE&&"DOUBLE"===e.TYPE?t=[{name:I18n.getMsg("is"),value:"equal"},{name:I18n.getMsg("isn't"),value:"not_equal"}]:301===e.UITYPE?(t=[{name:I18n.getMsg("is"),value:"equal"}],e.picklist_values=[{DisplayValue:I18n.getMsg("crm.label.selected"),ActualValue:"true"},{DisplayValue:I18n.getMsg("crm.label.notSelected"),ActualValue:"false"}]):786!==e.UITYPE&&200!==e.UITYPE&&24!==e.UITYPE&&202!==e.UITYPE&&333!==e.UITYPE&&(118!==e.UITYPE&&118!==e.UITYPE||"datetime"!==e.returnType&&"date"!==e.returnType)?20===e.UITYPE||8===e.UITYPE||221===e.UITYPE?(e.userType=!0,t=[{name:I18n.getMsg("is"),value:"equal"},{name:I18n.getMsg("isn't"),value:"not_equal"}]):t=[{name:I18n.getMsg("contains"),value:"contains"},{name:I18n.getMsg("doesn't contain"),value:"not_contains"}]:(e.showCal=!0,t=[{name:I18n.getMsg("On"),value:"equal"},{name:I18n.getMsg("Before"),value:"less_than"},{name:I18n.getMsg("After"),value:"greater_than"}]),e.filterComparators=t})),Handlebars.registerHelper("getRelatedListLabel",(function(e){return crmRelatedList.getPersonalityModuleObj(e).label})),Handlebars.registerHelper("getAPINameForFilters",(function(e){return e.campaign_member_field?"member_info."+e.SYS_REF_NAME:e.SYS_REF_NAME})),Handlebars.registerHelper("isCampaignMemberPersonality",(function(e,t,a,l){return"CONTACTSPERSONALITY"!=t&&"CAMPAIGNSPERSONALITY"!=t&&"LEADSPERSONALITY"!=t||a||!("Campaigns"===detailView.currentModule&&detailView.isIntegCampaign()||("Contacts"===detailView.currentModule||"Leads"===detailView.currentModule)&&-1!==[1,2,3,4,5,7,8].indexOf(e.$campaign_type))?l.inverse(this):l.fn(this)})),Handlebars.registerHelper("isTdHtmlNeeded",(function(e,t){var a=crmRelatedList.getPersonalityModuleObj(e);return a.customButton||a.toShowRelatedListRecordsCheckBox?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isActivitySplitNotDone",(function(){return!Crm.isActivitySplitDone}))}!function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.CheckListsRLView=e({1:function(e,t,a,l,n){var i,r=e.lambda;return' <tr class="crm-font-regular crm-small-font-size"> <td> <span class="vaM cLC">'+e.escapeExpression(r(n&&n.key,t))+'</span> </td> <td> <span class="vaM cLC">'+(null!=(i=r(t,t))?i:"")+"</span> </td> </tr> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var i;return'<tr class="topband_dv_row" id="ChkLiItems_'+e.escapeExpression(e.lambda(null!=t?t.checkListId:t,t))+'"> <td colspan="3" width="0" class="tableData pL0 vaT pT0 pB0"> <div class="checklistContainer pL30"> <table cellspacing="0" cellpadding="0" width="100%" class="bp_rl_checkList"> <tbody> '+(null!=(i=a.each.call(null!=t?t:{},null!=t?t.CheckLists:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?i:"")+" </tbody> </table> </div> </td> </tr>"},useData:!0}),t.CustomRelatedListName=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return'<div class="zcrm-content"> <div class="popup-model-header bxShTp"> <table width="100%" cellspacing="0" cellpadding="0"> <tbody> <tr> <td width="38"> <img src="'+r(a.getCrmImageUrl.call(i,"spacer.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" class="backtoIcon" width="38px" height="23px" border="0" onclick="CustomRelatedListObj.listCustomFunctions()"> </td> <td class="crm-heading-font-size crm-font-bold crmHeadingColor"> '+r(a.getI18n.call(i,"crm.label.relatedlist.create.new",{name:"getI18n",hash:{},data:n}))+' </td> <td class="alignRight pR" valign="top" width="100"> <a data-zcqa="lnk_cfun_help" id="context-helplink" class="toplink mR20 pR10 br_right_border3 vaT mT8" onclick="openHelp(\'http://www.zoho.com/crm/help/customization/related-lists.html?src=product#Create_Custom_Function\')" href="javascript:;">'+r(a.getI18n.call(i,"crm.label.context.help",{name:"getI18n",hash:{},data:n}))+'</a> <span class="dbBtnClose svgIcons ico-close op5 dIB cP right0" onclick="reloadRelatedList(); hideAnimatePopup(\'newRelatedListPopUpDiv\');"></span> </td> </tr> </tbody> </table> </div> <div class="popup-model-content"> <table class="wf_form_UI w100_per wf_form_focus w50_per" cellspacing="0" cellpadding="0"> <tbody> <tr> <td> '+r(a.getI18n.call(i,"crm.label.relatedlist.create.new.msg",{name:"getI18n",hash:{},data:n}))+'</td> <td class=""> <input type="text" value="" class="newinputText w250" id="crlRelatedListName" name="crlRelatedListName" onblur="wfForm.removeFocus(this,\'form\')"></td> </tr> </tbody> </table> </div> <div class="popup-model-footer"> <input type="button" class="newgraybtn" value="Cancel" onclick=" $(\'#newRelatedListPopUpDiv\').hide(); javascript:reloadRelatedList();"> <input type="submit" class="primarybtn mR0" value="Save" onclick="CustomRelatedListObj.saveNewCustomRelatedList(\''+r(a.encodeJS.call(i,a.ObjToString.call(i,t,{name:"ObjToString",hash:{},data:n}),{name:"encodeJS",hash:{},data:n}))+"')\"> </div> </div> "},useData:!0}),t.LinkAttachPopUp=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return'<div class="zcrm-content"> <div class="popup-model-header crm-heading-font-size crm-font-bold crmHeadingColor bxShTp">'+r(a.getI18n.call(i,"crm.attach.link.from.url",{name:"getI18n",hash:{},data:n}))+'</div> <div class="popup-model-content"> <form method="post" action="" name="linkAttachForm" onsubmit = "return Lyte.registeredMixins[\'crm-related-list-utils\'].addLink()"> <table cellpadding="0" cellspacing="0" class="w100_per mT0 wf_form_UI wf_form_focus"> <tr> <td>'+r(a.getI18n.call(i,"crm.attach.link.enter.url",{name:"getI18n",hash:{},data:n}))+'</td> <td> <input type="text" name="attachmentUrl" id="attachmentUrl" oninput="Lyte.registeredMixins[\'crm-related-list-utils\'].onUrlInputChange(this);" style="width:100%" maxlength="3000" ></input> <div id="invalidUrl" style="display:none;" class="form_err_msg crm-base-font-size h10_per">'+r(a.getI18n.call(i,"crm.custombutton.valid.url.check",{name:"getI18n",hash:{},data:n}))+'</div> </td> </tr> <tr id="linkattachmentTitleTr" style="display:none;"> <td>'+r(a.getI18n.call(i,"crm.label.name",{name:"getI18n",hash:{},data:n}))+'</td> <td> <input type="text" name="title" id="linkattachmentTitle" style="width:100%" maxlength="250" ></input> <div id="invalidUrlName" style="display:none;" class="form_err_msg crm-base-font-size h10_per">'+r(a.getI18n.call(i,"crm.label.valid.name",{name:"getI18n",hash:{},data:n}))+'</div> </td> </tr> </table> <table cellpadding="0" cellspacing="0" class="w100_per mT10"> <tr> <td colspan="2" class="pB20 alignRight"> <input type="button" class="newgraybtn" onclick="Lyte.registeredMixins[\'crm-related-list-utils\'].hideLinkPopup()" value="'+r(a.getI18n.call(i,"crm.button.cancel",{name:"getI18n",hash:{},data:n}))+'"></input> <input type="submit" class="primarybtn mR0" id="attachlinkbtn" disabled="disabled" value="'+r(a.getI18n.call(i,"crm.button.attach",{name:"getI18n",hash:{},data:n}))+'"></input> </td> </tr> </table> </form> </div> </div> '},useData:!0}),t.RelatedList=e({1:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.isRelatedListRequiredInDetailView.call(null!=t?t:{},t,{name:"isRelatedListRequiredInDetailView",hash:{},fn:e.program(2,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},2:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression,c=e.lambda;return' <div id="RelatedListCommonDiv" role="complementary" tabindex="-1" lt-prop-landmark-label="'+d(a.getI18nwithoutParamI18n.call(o,"crm.landmark.comp",null!=t?t.label:t,{name:"getI18nwithoutParamI18n",hash:{},data:n}))+'" lt-prop-landmark="true" aria-label="'+d(c(null!=t?t.label:t,t))+'" class="component1 relatedlist-bg '+d(c(null!=t?t.name:t,t))+'" data-zcqa="Related_list_Div_'+d(c(null!=t?t.label:t,t))+'"  ddname ="'+d(c(null!=t?t.name:t,t))+'" ddid="'+d(c(null!=t?t.id:t,t))+'" onmouseover="crmRelatedList.mOverEv(this)"> '+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"CONNECTEDRECORDSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(3,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" <div class='dvBoxshadow mB20' id=\"RelList_"+d(c(null!=t?t.name:t,t))+"_"+d(c(null!=t?t.id:t,t))+'"> '+(null!=(s=a.contains.call(o,'["SURVEYPERSONALITY", "SUPPORTPERSONALITY","WEBINAR_POLLS_PERSONALITY", "WEBINAR_QUESTION_PERSONALITY", "CHILDCAMPAIGNSPERSONALITY", "CIRCUITSPERSONALITY", "VOCPERSONALITY"]',null!=t?t.name:t,{name:"contains",hash:{},fn:e.program(5,n,0,i,r),inverse:e.program(20,n,0,i,r),data:n}))?s:"")+" </div> </div> "},3:function(e,t,a,l,n){return' <div id="connectedRecords"></div> '},5:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"SURVEYPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(6,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"SUPPORTPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(8,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"WEBINAR_POLLS_PERSONALITY",{name:"ifEquals",hash:{},fn:e.program(10,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"WEBINAR_QUESTION_PERSONALITY",{name:"ifEquals",hash:{},fn:e.program(12,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"VOCPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(14,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"CHILDCAMPAIGNSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(16,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"CIRCUITSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(18,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},6:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return" <crm-zsurvey-rl entity_id="+o(s(null!=r[1]?r[1].entityid:r[1],t))+' module="'+o(s(null!=r[1]?r[1].module:r[1],t))+'" related_list_id="'+o(s(null!=t?t.id:t,t))+'" display_label="'+o(s(null!=t?t.label:t,t))+'"></crm-zsurvey-rl> '},8:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return" <crm-zdesk-rl entity_id="+o(s(null!=r[1]?r[1].entityid:r[1],t))+' module="'+o(s(null!=r[1]?r[1].module:r[1],t))+'" related_list_id="'+o(s(null!=t?t.id:t,t))+'" display_label="'+o(s(null!=t?t.label:t,t))+'"></crm-zdesk-rl> '},10:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <crm-webinar-poll-details list-relation-id="'+o(s(null!=t?t.id:t,t))+'" campaign-id="'+o(s(null!=r[1]?r[1].entityid:r[1],t))+'" display-label="'+o(s(null!=t?t.label:t,t))+'"></crm-webinar-poll-details> '},12:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <crm-webinar-qanda-details list-relation-id="'+o(s(null!=t?t.id:t,t))+'" campaign-id="'+o(s(null!=r[1]?r[1].entityid:r[1],t))+'" display-label="'+o(s(null!=t?t.label:t,t))+'"></crm-webinar-qanda-details> '},14:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <crm-voc-entity-dashboard entity-id="'+o(s(null!=r[1]?r[1].entityid:r[1],t))+'" display-label="'+o(s(null!=t?t.label:t,t))+'" module="'+o(s(null!=r[1]?r[1].moduleApiName:r[1],t))+'"></crm-voc-entity-dashboard> '},16:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <crm-child-campaigns load-data="false" campaign-id="'+o(s(null!=r[1]?r[1].entityid:r[1],t))+'" list-relation-id="'+o(s(null!=t?t.id:t,t))+'" display-label="'+o(s(null!=t?t.label:t,t))+'"></crm-child-campaigns> '},18:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <crm-circuits-rl type="nonCanvas" entity_id="'+o(s(null!=r[1]?r[1].entityid:r[1],t))+'" module="'+o(s(null!=r[1]?r[1].module:r[1],t))+'" related_list_id="'+o(s(null!=t?t.id:t,t))+'" display_label="'+o(s(null!=t?t.label:t,t))+'"></crm-circuits-rl> '},20:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.lambda,c=e.escapeExpression;return" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"SOCIALPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(21,n,0,i,r),inverse:e.program(23,n,0,i,r),data:n}))?s:"")+' <table border="0" width="100%" align="center" cellspacing="0" cellpadding="0" class="relCenterBg cxPropAriaSkip" id="RelList_'+c(d(null!=t?t.name:t,t))+"_"+c(d(null!=t?t.id:t,t))+'"> <tbody> <tr height="25"> <td nowrap=""> '+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"SUPPORTPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(28,n,0,i,r),inverse:e.program(31,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"PROJECTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(53,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' </td> <div id="customButtonDetails_'+c(d(null!=t?t.id:t,t))+'" class="pA flexAlignCenter" style="display:none;" onclick="sE(event);"> '+(null!=(s=a.each.call(o,null!=r[1]?r[1].customButtonJson:r[1],{name:"each",hash:{},fn:e.program(55,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <span class="selCountNumWrap pR crm-small-font-size"><span id="relatedListRecVal_'+c(d(null!=t?t.id:t,t))+'"class="crm-font-bold mR3"></span><span>'+c(a.getI18n.call(o,"crm.label.selected.records",{name:"getI18n",hash:{},data:n}))+"</span></span> </div> <td class='dvAttahDiv'> "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(61,n,0,i,r),inverse:e.program(63,n,0,i,r),data:n}))?s:"")+" </td> "+(null!=(s=a.ifNotEquals.call(o,null!=t?t.name:t,"CIRCUITSPERSONALITY",{name:"ifNotEquals",hash:{},fn:e.program(65,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"LINKEDIN_SALES_NAVIGATOR_PERSONALITY",{name:"ifEquals",hash:{},fn:e.program(68,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"VISITSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(70,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifNotEquals.call(o,null!=t?t.name:t,"ATTACHMENTSPERSONALITY",{name:"ifNotEquals",hash:{},fn:e.program(73,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"CONTACTSROLESPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(77,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(79,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"PROJECTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(81,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"RELATEDLISTPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(83,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <input type="hidden" name="ID_'+c(d(null!=t?t.name:t,t))+'" value="'+c(d(null!=t?t.id:t,t))+'"> </tr> </tbody> </table> </div> '+(null!=(s=a.getStyleAttr.call(o,null!=t?t.name:t,{name:"getStyleAttr",hash:{},fn:e.program(85,n,0,i,r),inverse:e.program(90,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"LINKEDIN_SALES_NAVIGATOR_PERSONALITY",{name:"ifEquals",hash:{},fn:e.program(92,n,0,i,r),inverse:e.program(94,n,0,i,r),data:n}))?s:"")+" </div> </div> "},21:function(e,t,a,l,n){return" <div class='relCenterBgDiv dvSocialHeader'> "},23:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.name:t,"SERIESPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(24,n,0),inverse:e.program(26,n,0),data:n}))?i:"")+" "},24:function(e,t,a,l,n){return" <div class='rl_Header'> "},26:function(e,t,a,l,n){return" <div class='relCenterBgDiv dvcompHeader'> "},28:function(e,t,a,l,n){var i,r=null!=t?t:{},s=e.escapeExpression;return' <span name="'+s(a.toLowerCase.call(r,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+'_supportdiv" id="'+s(a.toLowerCase.call(r,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+'_supportdiv" class="relListHead">'+s(a.encodeForHtml.call(r,null!=t?t.label:t,{name:"encodeForHtml",hash:{},data:n}))+"</span> "+(null!=(i=a.if.call(r,null!=t?t.isNewDesk:t,{name:"if",hash:{},fn:e.program(29,n,0),inverse:e.noop,data:n}))?i:"")+' <input type="hidden" name="supportStatus" value="Enabled" ></input> '},29:function(e,t,a,l,n){return' <div class="dIB pL10 vaM"> <div class="tb_small_loader" id="deskRefresh" onClick="deskInteg.refreshData()" style="display:none"> <span class="ld_init"></span> <span class="ld_process"></span> </div> </div> <a style="display:none"  id="dVnoTicket_newTicketLink" class="dummyForLeftPanel createlink" onclick="deskInteg.showCreateTicketPopup()" >'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.newticket",{name:"getI18n",hash:{},data:n}))+"</a> "},31:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.ifEquals.call(o,null!=t?t.isCustomRel:t,"true",{name:"ifEquals",hash:{},fn:e.program(32,n,0,i,r),inverse:e.program(35,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"SOCIALPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(37,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"ZINVOICEPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(39,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"ZEXPENSEPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(41,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"ZSUBSCRIPTIONSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(43,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"SURVEYPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(45,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.unless.call(o,null!=r[1]?r[1].IS_CLIENT_ACCOUNT:r[1],{name:"unless",hash:{},fn:e.program(47,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},32:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression,c=e.lambda;return' <span name="'+d(a.toLowerCase.call(o,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+"_"+d(c(null!=t?t.id:t,t))+'" id="'+d(a.toLowerCase.call(o,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+"_"+d(c(null!=t?t.id:t,t))+'" class="relListHead pR"><span class=\'vaM\' data-zcqa="Related_List_Name_'+d(c(null!=t?t.label:t,t))+'">'+d(a.encodeForHtml.call(o,null!=t?t.label:t,{name:"encodeForHtml",hash:{},data:n}))+"</span> "+(null!=(s=a.unless.call(o,null!=r[1]?r[1].IS_CLIENT_ACCOUNT:r[1],{name:"unless",hash:{},fn:e.program(33,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' </span> <span class="labelValTwo oInherit dN mB10 pR"> <span class="errMsg errorMsgDesc dN" id="errorMsgDescMXN" style="clear: both; color: var(--formBorderError); font-size: var(--crm-extra-small-font-size);line-height: normal;"></span> <input type="text" class="textField moduleNameMXN" style="" maxlength="50"><span class="mL10"> <input type="button" value="Save " class="saveLink crm-base-font-size" onclick="relatedListHeader.save(this,\''+d(a.getCrmBasePath.call(o,{name:"getCrmBasePath",hash:{},data:n}))+"/CustomRelatedList.do?action=renameRelatedList&listRelationId="+d(c(null!=t?t.id:t,t))+'\')"> <a value="Cancel" href="javascript:;" class="smalledit mL10 crmLabelColor crm-base-font-size" onclick="relatedListHeader.cancelEdit(this)">Cancel</a></span></span> '},33:function(e,t,a,l,n){return' <span class="mxneditIconSvg vH cP mL10 pR" onclick="relatedListHeader.editElement(this);"></span> '},35:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression,s=e.lambda;return' <span name="'+r(a.toLowerCase.call(i,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+"_"+r(s(null!=t?t.id:t,t))+'" tabindex="0" aria-label="'+r(a.encodeForHtml.call(i,null!=t?t.label:t,{name:"encodeForHtml",hash:{},data:n}))+'" id="'+r(a.toLowerCase.call(i,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+"_"+r(s(null!=t?t.id:t,t))+'" class="relListHead vaM">'+r(a.encodeForHtml.call(i,null!=t?t.label:t,{name:"encodeForHtml",hash:{},data:n}))+"</span> "},37:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' \x3c!--<img id=\'interactions_loading\' class="dN pL30" src="'+r(a.getCrmImageUrl.call(i,"loading.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'">--\x3e <div id="interactions_loading" class="socInContain_main pR"> <div class="intractStart pR" style="min-height: 480px;"> <div class="intStartDet pA"> <div class="socialIllustration socInteractionHome mAuto mB20"></div> <div class="aligncenter crmNotFoundColor crm-base-font-size">'+r(a.getI18n.call(i,"crm.social.integ.perm.start1",{name:"getI18n",hash:{},data:n}))+"</div> </div> </div> </div> "},39:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <input type="hidden" id="zinvInvLoaded" value="false"> <input type="hidden" id="zinvRelID" value="'+o(s(null!=t?t.id:t,t))+'"> <input type="hidden" id="zinvEntityID" value="'+o(s(null!=r[1]?r[1].entityid:r[1],t))+'"> <input type="hidden" id="targetStringID" value="'+o(a.toLowerCase.call(d,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+"_"+o(s(null!=t?t.id:t,t))+'"> <div class="zIconLoader mL10 dIB vaM" id="zinvoiceRef" onclick="javascript:ZInvoice.loadRL(\'ZINVOICEPERSONALITY\',\''+o(s(null!=r[1]?r[1].module:r[1],t))+"','"+o(s(null!=t?t.id:t,t))+"','"+o(s(null!=r[1]?r[1].entityid:r[1],t))+"', undefined, true);\"  onmouseover=\"crmui.toolTip_show(this,'left','"+o(a.getI18n.call(d,"crm.button.refresh",{name:"getI18n",hash:{},data:n}))+'\');" onmouseout="crmui.toolTip_hide();"> <span class="zIconLoadInit"></span><span class="zIconLoadProcess"></span> </div> '},41:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <input type="hidden" id="zExpenseLoaded" value="false"> <input type="hidden" id="zExpenseRelID" value="'+o(s(null!=t?t.id:t,t))+'"> <input type="hidden" id="zExpenseEntityID" value="'+o(s(null!=r[1]?r[1].entityid:r[1],t))+'"> <input type="hidden" id="zExpenseTargetStringID" value="'+o(a.toLowerCase.call(d,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+"_"+o(s(null!=t?t.id:t,t))+'"> <div class="zIconLoader mL10 dIB vaM" id="zExpenseRefresh" onclick="javascript:ZInvoice.loadRL(\'ZEXPENSEPERSONALITY\',\''+o(s(null!=r[1]?r[1].module:r[1],t))+"','"+o(s(null!=t?t.id:t,t))+"','"+o(s(null!=r[1]?r[1].entityid:r[1],t))+"', undefined, true);\"  onmouseover=\"crmui.toolTip_show(this,'left','"+o(a.getI18n.call(d,"crm.button.refresh",{name:"getI18n",hash:{},data:n}))+'\');" onmouseout="crmui.toolTip_hide();"> <span class="zIconLoadInit"></span><span class="zIconLoadProcess"></span> </div> '},43:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <input type="hidden" id="zSubscriptionsLoaded" value="false"> <input type="hidden" id="zSubscriptionsRelID" value="'+o(s(null!=t?t.id:t,t))+'"> <input type="hidden" id="zSubscriptionsEntityID" value="'+o(s(null!=t?t.entityid:t,t))+'"> <input type="hidden" id="zSubscriptionsTargetStringID" value="'+o(a.toLowerCase.call(d,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}))+"_"+o(s(null!=t?t.id:t,t))+'"> <div class="zIconLoader mL10 dIB vaM" id="zSubscriptionsRefresh" onclick="javascript:ZInvoice.loadRL(\'ZSUBSCRIPTIONSPERSONALITY\',\''+o(s(null!=r[1]?r[1].module:r[1],t))+"','"+o(s(null!=t?t.id:t,t))+"','"+o(s(null!=r[1]?r[1].entityid:r[1],t))+"', undefined, true);\"  onmouseover=\"crmui.toolTip_show(this,'left','"+o(a.getI18n.call(d,"crm.button.refresh",{name:"getI18n",hash:{},data:n}))+'\');" onmouseout="crmui.toolTip_hide();"> <span class="zIconLoadInit"></span><span class="zIconLoadProcess"></span> </div> '},45:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <span class="pL10 top2 pR"> <a href="javascript:ZSurvey.refreshSurveyPersonality(\''+o(s(null!=r[1]?r[1].module:r[1],t))+"', '"+o(s(null!=r[1]?r[1].entityid:r[1],t))+'\');"><img src="'+o(a.getCrmImageUrl.call(null!=t?t:{},"spacer.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" width="11px" height="11px" class="fetchNo" alt="" border="0"/></a> </span> '},47:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.ifCondLogic.call(o,null!=t?t.name:t,"==","CONTACTSPERSONALITY","&&",null!=r[1]?r[1].module:r[1],"==","Accounts",{name:"ifCondLogic",hash:{},fn:e.program(48,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"REPORTINGCONTACTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(51,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},48:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifNotEquals.call(null!=t?t:{},null!=t?t.isCustomRel:t,"true",{name:"ifNotEquals",hash:{},fn:e.program(49,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},49:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <a id="contactTreePopup" href="javascript:crmRelatedList.getContactTreeData(\''+o(s(null!=r[1]?r[1].entityid:r[1],t))+"', '"+o(s(null!=r[1]?r[1].module:r[1],t))+'\');" class="dIB vaT hietimeOpen crm-small-font-size">'+o(a.getI18n.call(d,"crm.contact.HierarchyView",{name:"getI18n",hash:{},data:n}))+'</a> <div id="contactTreePopupId" class="newPopup ppTop is-scroll" style="display: none;"> <h2 class="crm-heading-font-size mB0 pp-header crm-font-bold">'+o(a.encodeForHtml.call(d,null!=t?t.label:t,{name:"encodeForHtml",hash:{},data:n}))+" "+o(a.getI18n.call(d,"crm.contact.hierarchy.view.Role_Hierarchy",{name:"getI18n",hash:{},data:n}))+'</h2> <span class="dIB closeBtnHierar"></span> <div class="pp-content"> <div class="timelineCntn"> <span class="cmpnyLogo dIB"></span> <span class="dIB pB10" id="treeAccName"></span> <ul class="hierarcyTimeline" id="userstree"></ul> </div> </div> <div class="pp-footer"></div> </div> '},51:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <a id="contactTreePopup" href="javascript:crmRelatedList.getContactTreeData(\''+o(s(null!=r[1]?r[1].entityid:r[1],t))+"', '"+o(s(null!=r[1]?r[1].module:r[1],t))+'\');" class="dIB vaT hietimeOpen crm-small-font-size">'+o(a.getI18n.call(d,"crm.contact.HierarchyView",{name:"getI18n",hash:{},data:n}))+'</a> <div id="contactTreePopupId" class="newPopup ppTop is-scroll" style="display: none;"> <h2 class="crm-heading-font-size mB0 pp-header crm-font-bold">'+o(a.getDisplayModuleName.call(d,"Contacts",!0,{name:"getDisplayModuleName",hash:{},data:n}))+" "+o(a.getI18n.call(d,"crm.contact.hierarchy.view.Role_Hierarchy",{name:"getI18n",hash:{},data:n}))+'</h2> <span class="dIB closeBtnHierar"></span> <div class="pp-content"> <div class="timelineCntn"> <span class="cmpnyLogo dIB"></span> <span class="dIB pB10" id="treeAccName"></span> <ul class="hierarcyTimeline" id="userstree"></ul> </div> </div> <div class="pp-footer"></div> </div> '},53:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <span class="newSelect mL20"> <select class="select" id="projects_sort" style="width:150px" onchange="ZProjects.sortProjectColumn(this.value)"> <option value="active" selected="selected">'+r(a.getI18n.call(i,"Active",{name:"getI18n",hash:{},data:n}))+" "+r(a.getI18n.call(i,"Projects",{name:"getI18n",hash:{},data:n}))+'</option> <option value="archived">'+r(a.getI18n.call(i,"crm.archive",{name:"getI18n",hash:{},data:n}))+" "+r(a.getI18n.call(i,"Projects",{name:"getI18n",hash:{},data:n}))+'</option> </select> </span> <div style="display: block;" id="responseDiv"></div> '},55:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},n&&n.key,null!=r[1]?r[1].id:r[1],{name:"ifEquals",hash:{},fn:e.program(56,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},56:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.each.call(null!=t?t:{},t,{name:"each",hash:{},fn:e.program(57,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},57:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.ifEquals.call(o,a.incre.call(o,n&&n.index,{name:"incre",hash:{},data:n}),1,{name:"ifEquals",hash:{},fn:e.program(58,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},58:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression,c=null!=t?t:{};return" <span id='custBtnRel_"+d(o(null!=t?t.listRelationId:t,t))+'\' class="custBtnSortFunc customPluswithImpotBtnCon mR8"> <input type="button"  id="btn_'+d(o(null!=t?t.key:t,t))+'" class="newwhitebtn ttNone customImportBtn '+d(o(null!=t?t.key:t,t))+'" value="'+d(o(null!=t?t.name:t,t))+'" style="border-left:0  !important; border-right:solid 1px #EDF0F4; height:25px; padding:5px 15px;" onclick="return CustomButtonJSObjectInit.execute(\''+d(o(null!=t?t.key:t,t))+"','relatedlist','"+d(o(null!=r[3]?r[3].entityid:r[3],t))+"','"+d(o(null!=t?t.listRelationId:t,t))+"','"+d(o(null!=r[3]?r[3].module:r[3],t))+"');\"  onmouseover=\"CustomButtonJSObjectInit.showCusBtnDetTt(this,'"+d(a.encodeJS.call(c,null!=t?t.name:t,{name:"encodeJS",hash:{},data:n}))+"','"+d(a.encodeJS.call(c,null!=t?t.desc:t,{name:"encodeJS",hash:{},data:n}))+'\')" onmouseout="CustomButtonJSObjectInit.hideCusBtnDetTt()"> '+(null!=(s=a.ifNotEquals.call(c,null!=r[1]?r[1].length:r[1],1,{name:"ifNotEquals",hash:{},fn:e.program(59,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </span> "},59:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <a class="newwhitebtn cbDropDown"  relatedlist="'+o(s(null!=r[3]?r[3].module:r[3],t))+"_"+o(s(null!=t?t.listRelationId:t,t))+'" value="&nbsp;&nbsp;New" style="background:url('+o(a.getCrmImageUrl.call(d,"sprite_moduleBuilder.svg",{name:"getCrmImageUrl",hash:{},data:n}))+') no-repeat 0 -34px; height:8px; margin-top:9px" id="dwnBtn" onclick="CustomButtonJSObjectInit.relatedListDropDown(\''+o(a.encodeJS.call(d,a.ObjToString.call(d,r[1],{name:"ObjToString",hash:{},data:n}),{name:"encodeJS",hash:{},data:n}))+"','"+o(s(null!=r[3]?r[3].entityid:r[3],t))+"','relatedlist','"+o(s(null!=r[3]?r[3].module:r[3],t))+"','sortableRelatedList','"+o(s(null!=t?t.key:t,t))+"','"+o(s(null!=r[3]?r[3].module:r[3],t))+"_"+o(s(null!=t?t.listRelationId:t,t))+"');\"></a> "},61:function(e,t,a,l,n){var i=e.escapeExpression;return' <div id ="rel_newui_'+i(e.lambda(null!=t?t.id:t,t))+'" class="pR30 fontsmooth noDataFountDetailtxt mR5">'+i(a.getI18n.call(null!=t?t:{},"crm.event.attachment.empty.msg",{name:"getI18n",hash:{},data:n}))+"</div> "},63:function(e,t,a,l,n){var i=e.escapeExpression;return' <div id ="rel_newui_'+i(e.lambda(null!=t?t.id:t,t))+'" class="pR30 fontsmooth noDataFountDetailtxt mR5">'+i(a.getI18n.call(null!=t?t:{},"crm.new.label.no.records",{name:"getI18n",hash:{},data:n}))+"</div> "},65:function(e,t,a,l,n){var i;return" "+(null!=(i=a.isNotActivitySplitPersonality.call(null!=t?t:{},null!=t?t.name:t,{name:"isNotActivitySplitPersonality",hash:{},fn:e.program(66,n,0),inverse:e.noop,data:n}))?i:"")+" "},66:function(e,t,a,l,n){return' <td class="alignRight vaM dvInnerTd"> <div id="ract_'+e.escapeExpression(e.lambda(null!=t?t.id:t,t))+'" class="enableRelLinks"></div> </td> '},68:function(e,t,a,l,n){return' <td class="alignRight"> <lyte-button lt-prop-id="relLinkedLogoutId" lt-prop-class="outlineredlight bt-smalloutlineredlight dN" onclick="SalesNavigator.revokeAccess()"> <template is=\'registerYield\' yield-name=\'text\'>'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.linkedin.logout",{name:"getI18n",hash:{},data:n}))+"</template> </lyte-button> </td> "},70:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression,o=null!=t?t:{};return' <td class="alignRight"> <div id="portalRList" class="newSelect pR dIB cP w220 mB5"> <select id="portalRListSel" prevVal="All Portals" data-params=\'{"module":"'+s(r(null!=t?t.module:t,t))+'","rid":"'+s(r(null!=t?t.id:t,t))+'","name":"'+s(r(null!=t?t.name:t,t))+'"}\' onchange="crmRelatedList.changePortal(this)"> <option value="All Portals">'+s(a.getI18n.call(o,"crm.salesiq.all.accounts",{name:"getI18n",hash:{},data:n}))+"</option> "+(null!=(i=a.each.call(o,null!=t?t.screenVsPortalJson:t,{name:"each",hash:{},fn:e.program(71,n,0),inverse:e.noop,data:n}))?i:"")+" </select> </div> </td> "},71:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <option value="'+r(i(n&&n.key,t))+'">'+r(i(t,t))+"</option> "},73:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifNotEquals.call(null!=t?t:{},null!=t?t.name:t,"CALENDARBOOKINGSPERSONALITY",{name:"ifNotEquals",hash:{},fn:e.program(74,n,0),inverse:e.noop,data:n}))?i:"")+" "},74:function(e,t,a,l,n){var i;return" "+(null!=(i=a.isNotActivitySplitPersonality.call(null!=t?t:{},null!=t?t.name:t,{name:"isNotActivitySplitPersonality",hash:{},fn:e.program(75,n,0),inverse:e.noop,data:n}))?i:"")+" "},75:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression,s=null!=t?t:{};return' <td class="alignRight w30 pR" id="showCustomizeList" > <span class="newRlEdit dIB dvRlcolumnEdit" name="relatedclm" id="'+r(i(null!=t?t.name:t,t))+"_"+r(i(null!=t?t.id:t,t))+'" tabindex="0" role="button" aria-haspopup="listbox" lt-prop-aria-keydown="true" lt-prop-title="'+r(a.getI18n.call(s,"crm.accessibility.customize.popup",{name:"getI18n",hash:{},data:n}))+'" aria-label="'+r(a.getI18n.call(s,"crm.accessibility.customize.popup",{name:"getI18n",hash:{},data:n}))+'" value="relate" onclick="showCustomizeListPopup(this, event, \''+r(i(null!=t?t.module:t,t))+"')\"></span> </td> "},77:function(e,t,a,l,n){return' <input type=\'hidden\' name="Potential_accountId" id="Potential_accountId" ></input> <input type="hidden" id="callingAction" value="-1"> '},79:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <input type="hidden" name="moduleForIFrame" id="moduleForIFrame" value="'+o(s(null!=r[1]?r[1].module:r[1],t))+'" /> <input type="hidden" name="anchorId" id="anchorId" value="'+o(s(null!=t?t.id:t,t))+'" ></input> <input type="hidden" name="fileCheckVariable" id="fileCheckVariable" value="RelatedList" ></input> '},81:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <input type="hidden" name="isProjectCalled" id="isProjectCalled" value="N" ></input> <input type="hidden" name="portalname" id="portalname" value="" ></input> <input type="hidden" name="accounttabname" id="accounttabname" value=\''+r(a.getDisplayModuleName.call(i,"Accounts",!0,{name:"getDisplayModuleName",hash:{},data:n}))+'\' ></input> <input type="hidden" name="contacttabname" id="contacttabname" value=\''+r(a.getDisplayModuleName.call(i,"Contacts",!0,{name:"getDisplayModuleName",hash:{},data:n}))+'\' ></input> <input type="hidden" name="potentialtabname" id="potentialtabname" value=\''+r(a.getDisplayModuleName.call(i,"Potentials",!0,{name:"getDisplayModuleName",hash:{},data:n}))+">' /> "},83:function(e,t,a,l,n){return' <td class="alignRight" id="relPersAction_'+e.escapeExpression(e.lambda(null!=t?t.id:t,t))+'" style="width:70px !important;"></td> '},85:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.module:t,"Social",{name:"ifEquals",hash:{},fn:e.program(86,n,0),inverse:e.program(88,n,0),data:n}))?i:"")+" "},86:function(e,t,a,l,n){return' <div id="'+e.escapeExpression(a.getId.call(null!=t?t:{},null!=t?t.name:t,null!=t?t.id:t,{name:"getId",hash:{},data:n}))+'" style="display:block"> '},88:function(e,t,a,l,n){var i=e.escapeExpression,r=e.lambda;return' <div id="'+i(a.getId.call(null!=t?t:{},null!=t?t.name:t,null!=t?t.id:t,{name:"getId",hash:{},data:n}))+'" class="'+i(r(null!=t?t.name:t,t))+"_"+i(r(null!=t?t.id:t,t))+'" style="display:block" class=\'flex-grid-skeleton-table\'> '},90:function(e,t,a,l,n){return' <div id="'+e.escapeExpression(a.getId.call(null!=t?t:{},null!=t?t.name:t,null!=t?t.id:t,{name:"getId",hash:{},data:n}))+'"> '},92:function(e,t,a,l,n){return' <div id="linked_in_container" class="norec p0 m0"> <div class="socialImg socLoadingIcon pR fN mT20 mB20"></div> </div> '},94:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifNotEquals.call(null!=t?t:{},null!=t?t.name:t,"SOCIALPERSONALITY",{name:"ifNotEquals",hash:{},fn:e.program(95,n,0),inverse:e.noop,data:n}))?i:"")+" "},95:function(e,t,a,l,n){return' <table border="0" width="100%" cellspacing="0" cellpadding="0" align="center" class="norec"> <tbody> <tr> <td valign="center"> <div class="pR30 fontsmooth">Loading...</div> </td> </tr> </tbody> </table> '},97:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <a href="javascript:;" data-zcqa="invoiceMenuListExport" onclick="exportPDF(\'\', \'\', this)">'+r(a.getI18n.call(i,"crm.export.pdf",{name:"getI18n",hash:{},data:n}))+'</a> <a href="javascript:;" data-zcqa="invoiceMenuListSendMail" onclick="showSendMail(this)">'+r(a.getI18n.call(i,"crm.button.license.sendMail",{name:"getI18n",hash:{},data:n}))+"</a> "},99:function(e,t,a,l,n){var i;return" "+(null!=(i=a.isNotPartOf.call(null!=t?t:{},"Tasks,Events,Calls,Activities",null!=t?t.module:t,{name:"isNotPartOf",hash:{},fn:e.program(100,n,0),inverse:e.noop,data:n}))?i:"")+" "},100:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <crm-detailview-footer showAddRelatedList="'+r(i(null!=t?t.showAddRelatedList:t,t))+'" module="'+r(i(null!=t?t.module:t,t))+'" layout="'+r(i(null!=t?t.layoutId:t,t))+'" entity="'+r(i(null!=t?t.entityid:t,t))+'" feature="DetailView"> </crm-detailview-footer> '},102:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.showAddRelatedList:t,{name:"if",hash:{},fn:e.program(103,n,0),inverse:e.noop,data:n}))?i:"")},103:function(e,t,a,l,n){return' <div id="newRelatedListDiv" class="mT15 mB15"> <input type="button" class="primarybtn" data-zcqa="detail_lead_addrelatedlist" value=\''+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.newCustomRelatedList",{name:"getI18n",hash:{},data:n}))+'\' onclick="CustomRelatedListObj.addNewRelatedList()"> </div> <input type="hidden" name="rlContentChngd" value="false" /> '},105:function(e,t,a,l,n){var i;return" "+(null!=(i=a.unless.call(null!=t?t:{},null!=t?t.isCanvasAccessible:t,{name:"unless",hash:{},fn:e.program(106,n,0),inverse:e.noop,data:n}))?i:"")+" "},106:function(e,t,a,l,n){return' <div class="mB50"></div> <br><br><br><br><br><br> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression,c=null!=t?t:{};return' <input type="hidden" name="zs_EMAIL" id="zs_EMAIL" ></input> <input type="hidden" name="entityID" id="entityID" value="'+d(o(null!=t?t.entityid:t,t))+'" ></input> <input type="hidden" name="entityId" id="entityId" value="'+d(o(null!=t?t.entityid:t,t))+'" ></input> <div id="sortrellist_div" class="ddM" style="position: absolute; display: none; z-index: 15;" data-close="true"></div> '+(null!=(s=a.each.call(c,null!=t?t.relListLabelJson:t,{name:"each",hash:{},fn:e.program(1,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <div id="relNotesInRL" style="display: none;"></div> <div id="invoiceMenuList" style="display:none" class="ddM invoiceMenuList"> <a href="javascript:;" data-zcqa="invoiceMenuListDelete" data-onclick=\'javascript:sortRelatedList("")\' onclick="showDeletePopup(\'\', \'crm.button.move.to.trash\', \'\', \'\', this,true);">'+d(a.getI18n.call(c,"crm.label.delete",{name:"getI18n",hash:{},data:n}))+"</a> "+(null!=(s=a.unless.call(c,null!=t?t.IS_CLIENT_ACCOUNT:t,{name:"unless",hash:{},fn:e.program(97,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' </div> <div id="drillDownPtr" class="pA" style="position:absolute;top:-1000px;" ;><img src="'+d(a.getCrmImageUrl.call(c,"spacer.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" width="19px" height="16px" class="red-arrow"></div> <div id="ddm" class="ddM" style="position:absolute;display:none; z-index:31;"> <div class="shadowr"> <table border="0" cellspacing="0" cellpadding="2"> <tr class="dropDownItem" onMouseOver="this.className=\'dropDownItemOver\'" onMouseOut="this.className=\'dropDownItem\'"> <td> <a id="downloadlink">'+d(a.getI18n.call(c,"crm.view.attachment.download",{name:"getI18n",hash:{},data:n}))+'</a></td> </tr> <tr class="dropDownItem" onMouseOver="this.className=\'dropDownItemOver\'" onMouseOut="this.className=\'dropDownItem\'"> <td> <a id="viewlink">'+d(a.getI18n.call(c,"crm.file.open",{name:"getI18n",hash:{},data:n}))+'</a></td> </tr> </table> </div> </div> <div id="customRelatedListAddedDiv" class="dN"></div> <crm-detail-view-common></crm-detail-view-common> '+(null!=(s=a.if.call(c,null!=t?t.isCanvasAccessible:t,{name:"if",hash:{},fn:e.program(99,n,0,i,r),inverse:e.program(102,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.isNotPartOf.call(c,"Tasks,Events,Calls,Activities",null!=t?t.module:t,{name:"isNotPartOf",hash:{},fn:e.program(105,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <div id="virusDetectionContainer" class="p25 newPopup w550 scaleZ scaleOne" style="margin-left: -300px; left: 50%; top: 50%; margin-top: -100px; z-index: 300; position: fixed;"><i id="virusContainerIcon"></i> <div class="crm-heading-font-size crmHeadingColor crm-font-bold fL mL15 fontSmooth w80_per" id="virusDetectionTitle"></div> <div class="cBoth"></div> <div class="crm-base-font-size mT15 mL40"> <div class="crmParagraphColor crm-font-regular crm-base-font-size" id="virusDetectionMsg"></div> </div> <div class="mT30 aligncenter tgl"> <input type="button" id="virusDetectionOkButton" class="redbtn"> <input type="button" id="virusDetectionCancelButton" class="newgraybtn"> <div class="cBoth"></div> </div> </div> '},useData:!0,useDepths:!0}),t.RelatedListData=e({1:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.name:t,"SOCIALPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(2,n,0),inverse:e.program(15,n,0),data:n}))?i:"")+" "},2:function(e,t,a,l,n){var i,r=null!=t?t:{},s=e.lambda,o=e.escapeExpression;return' <div id="scrollvariables"> '+(null!=(i=a.if.call(r,null!=(i=null!=(i=null!=t?t.SocialObj:t)?i.SOCIALPROFILES:i)?i.facebook:i,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.program(5,n,0),data:n}))?i:"")+" "+(null!=(i=a.if.call(r,null!=(i=null!=(i=null!=t?t.SocialObj:t)?i.SOCIALPROFILES:i)?i.twitter:i,{name:"if",hash:{},fn:e.program(7,n,0),inverse:e.program(9,n,0),data:n}))?i:"")+" "+(null!=(i=a.if.call(r,null!=(i=null!=(i=null!=t?t.SocialObj:t)?i.SOCIALPROFILES:i)?i.googleplus:i,{name:"if",hash:{},fn:e.program(11,n,0),inverse:e.program(13,n,0),data:n}))?i:"")+' <input type="hidden" id="listrelation" name="listrelation" value=\''+o(s(null!=t?t.listRelationId:t,t))+'\' ></input> <input type="hidden" id="socialobj" name="socialobj" value=\''+o(a.ObjToString.call(r,null!=(i=null!=t?t.SocialObj:t)?i.SOCIALPROFILES:i,{name:"ObjToString",hash:{},data:n}))+'\' ></input> <input type="hidden" id="createdtime" name="createdtime" value=\''+o(s(null!=(i=null!=t?t.SocialObj:t)?i.CREATEDTIME:i,t))+"' ></input> </div> "},3:function(e,t,a,l,n){var i;return' <input type="hidden" name="fbProfile" id="fbProfile" value="'+e.escapeExpression(e.lambda(null!=(i=null!=(i=null!=t?t.SocialObj:t)?i.SOCIALPROFILES:i)?i.facebook:i,t))+'"> '},5:function(e,t,a,l,n){return' <input type="hidden" name="fbProfile" id="fbProfile" value="null"> '},7:function(e,t,a,l,n){var i;return' <input type="hidden" name="twProfile" id="twProfile" value="'+e.escapeExpression(e.lambda(null!=(i=null!=(i=null!=t?t.SocialObj:t)?i.SOCIALPROFILES:i)?i.twitter:i,t))+'"> '},9:function(e,t,a,l,n){return' <input type="hidden" name="twProfile" id="twProfile" value="null"> '},11:function(e,t,a,l,n){var i;return' <input type="hidden" name="gpProfile" id="gpProfile" value="'+e.escapeExpression(e.lambda(null!=(i=null!=(i=null!=t?t.SocialObj:t)?i.SOCIALPROFILES:i)?i.googleplus:i,t))+'"> '},13:function(e,t,a,l,n){return' <input type="hidden" name="gpProfile" id="gpProfile" value="null"> '},15:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.name:t,"SUPPORTPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(16,n,0),inverse:e.program(21,n,0),data:n}))?i:"")+" "},16:function(e,t,a,l,n){var i;return" "+(null!=(i=e.invokePartial(l.zdeskActions,t,{name:"zdeskActions",data:n,helpers:a,partials:l,decorators:e.decorators}))?i:"")+' <table id="deskLoadingDiv" border="0" width="100%" cellspacing="0" cellpadding="0" align="center" class="norec"> <tbody> <tr> <td valign="center"> '+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.SupportObj:t,{name:"if",hash:{},fn:e.program(17,n,0),inverse:e.program(19,n,0),data:n}))?i:"")+" </td> </tr> </tbody> </table> "},17:function(e,t,a,l,n){return' <div class="pR30 fontsmooth">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.fetchingtickets",{name:"getI18n",hash:{},data:n}))+"</div> "},19:function(e,t,a,l,n){return' <div class="pR30 fontsmooth">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.zdesk.contactadmin",{name:"getI18n",hash:{},data:n}))+"</div> "},21:function(e,t,a,l,n){var i;return' <table border="0" width="100%" cellspacing="0" cellpadding="0" align="center" class="norec"> <tbody> <tr> <td valign="center"> '+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.name:t,"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(22,n,0),inverse:e.program(24,n,0),data:n}))?i:"")+' <div id="norec_'+e.escapeExpression(e.lambda(null!=t?t.listRelationId:t,t))+'"> </div> </td> </tr> </tbody> </table> '},22:function(e,t,a,l,n){return' <div class="pR30 fontsmooth noDataFountDetailtxt mR5">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.event.attachment.empty.msg",{name:"getI18n",hash:{},data:n}))+"</div> "},24:function(e,t,a,l,n){return' <div class="pR30 fontsmooth noDataFountDetailtxt mR5">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.new.label.no.records",{name:"getI18n",hash:{},data:n}))+"</div> "},26:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" <div id='RelatedListDataScroll'> <table border=\"0\" class='RelatedListData oldRLlist' "+(null!=(s=a.isPartOf.call(o,"CONTACTSPERSONALITY,LEADSPERSONALITY",null!=t?t.name:t,{name:"isPartOf",hash:{},fn:e.program(27,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' width="100%" cellspacing="0" cellpadding="0" align="center"> <tbody> <tr> <td colspan="2"> <table border="0" width="100%" cellspacing="0" cellpadding="0" class="rellist RelatedListData pR table_Layoutfixed" cx-prop-aria="true"> <tbody>  <tr id=\'rlHeader_'+e.escapeExpression(e.lambda(null!=t?t.listRelationId:t,t))+'\' class="tableHeadBg"> '+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"VISITSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(29,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifNotEquals.call(o,null!=t?t.name:t,"INVITEDEVENTSPERSONALITY",{name:"ifNotEquals",hash:{},fn:e.program(31,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.each.call(o,null!=t?t.heading:t,{name:"each",hash:{},fn:e.program(39,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </tr>  "+(null!=(s=a.compareNumbers.call(o,null!=(s=null!=t?t.body:t)?s.length:s,0,{name:"compareNumbers",hash:{},fn:e.program(49,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.showEntityRL.call(o,null!=t?t.body:t,{name:"showEntityRL",hash:{},fn:e.program(52,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' </tbody> </table> </td> </tr> </tbody> </table> </div> <div> <table width="100%" cellspacing="0" cellpadding="0"> <tbody>  <tr class="rellistbL"> <td colspan="2"> '+(null!=(s=a.showNavigation.call(o,null!=t?t.fromIndex:t,null!=t?t.toIndex:t,10,null!=t?t.body:t,{name:"showNavigation",hash:{},fn:e.program(170,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.hasKey.call(o,t,"info",{name:"hasKey",hash:{},fn:e.program(179,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </td> </tr> </tbody> </table> </div> "},27:function(e,t,a,l,n){return' class="mT10 RelatedListData" '},29:function(e,t,a,l,n){return" <td class='dv_first_td'></td> "},31:function(e,t,a,l,n){var i,r=null!=t?t:{};return" <td class='dv_first_td pL0'> "+(null!=(i=a.ifEquals.call(r,null!=t?t.name:t,"SERIESPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(32,n,0),inverse:e.noop,data:n}))?i:"")+" </td> "+(null!=(i=a.toShowCheckBox.call(r,null!=t?t.listRelationId:t,null!=t?t.customButton:t,null!=t?t.toShowRelatedListRecordsCheckBox:t,{name:"toShowCheckBox",hash:{},fn:e.program(34,n,0),inverse:e.noop,data:n}))?i:"")+" "},32:function(e,t,a,l,n){return' <lyte-checkbox data-zcqa="allChkBox" lt-prop-type=\'default\' class="pR mL10"  onclick="crmRelatedList.selectAllIds()"  id="seriesChkbox"></lyte-checkbox> '},34:function(e,t,a,l,n){var i,r=null!=t?t:{},s=e.lambda,o=e.escapeExpression;return' <td class="w20" id=\'dvpR0\'> <div class="'+(null!=(i=a.isHeaderCustomCheckBoxChecked.call(r,t,null!=t?t.listRelationId:t,{name:"isHeaderCustomCheckBoxChecked",hash:{},fn:e.program(35,n,0),inverse:e.program(37,n,0),data:n}))?i:"")+' mR5 " id="CB_'+o(s(null!=t?t.listRelationId:t,t))+'" value="CB_'+o(s(null!=t?t.listRelationId:t,t))+'" onclick="CustomButtonJSObjectInit.selectAllRecord(this,\''+o(a.encodeJS.call(r,a.toLowerCase.call(r,null!=t?t.name:t,{name:"toLowerCase",hash:{},data:n}),{name:"encodeJS",hash:{},data:n}))+"_"+o(s(null!=t?t.listRelationId:t,t))+"')\"></div> </td> "},35:function(e,t,a,l,n){return"customCheckBoxChecked"},37:function(e,t,a,l,n){return"customCheckBox"},39:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.ifEquals.call(o,null!=t?t.FIELDLABEL:t,"Subject",{name:"ifEquals",hash:{},fn:e.program(40,n,0,i,r),inverse:e.program(42,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.isSortableRL.call(o,null!=t?t.UITYPE:t,null!=r[1]?r[1].name:r[1],{name:"isSortableRL",hash:{},fn:e.program(44,n,0,i,r),inverse:e.program(47,n,0,i,r),data:n}))?s:"")+" </td> "},40:function(e,t,a,l,n){return' <td style="width:300px;"> '},42:function(e,t,a,l,n,i,r){return' <td  class="'+e.escapeExpression(a.getClassForLVDataDV.call(null!=t?t:{},null!=r[1]?r[1].heading:r[1],n&&n.index,{name:"getClassForLVDataDV",hash:{},data:n}))+'"> '},44:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression,c=e.lambda;return' <a href="javascript:void(0);" data-zcqa="Detail_'+d(a.encodeJS.call(o,null!=t?t.FIELDLABEL:t,{name:"encodeJS",hash:{},data:n}))+"_"+d(a.toLowerCase.call(o,null!=r[1]?r[1].name:r[1],{name:"toLowerCase",hash:{},data:n}))+"_"+d(c(null!=r[1]?r[1].listRelationId:r[1],t))+'" data-cid="sortColumnRL" data-params=\'{"rid":"'+d(c(null!=r[1]?r[1].listRelationId:r[1],t))+'","fieldLabel":"'+d(a.encodeForHtml.call(o,null!=t?t.FIELDLABEL:t,{name:"encodeForHtml",hash:{},data:n}))+'","columnName":"'+d(c(null!=t?t.COLUMNNAME:t,t))+'","fieldId":"'+d(c(null!=t?t.FIELDID:t,t))+'","isEnc":"'+d(c(null!=t?t.isEnc:t,t))+"\"}' data-enc='"+d(c(null!=t?t.isEnc:t,t))+'\' class="tableHead">'+d(a.encodeForHtml.call(o,null!=t?t.FIELDLABEL:t,{name:"encodeForHtml",hash:{},data:n}))+" "+(null!=(s=a.checkSortArrow.call(o,null!=t?t.FIELDID:t,null!=r[1]?r[1].sortColumnId:r[1],null!=t?t.FIELDLABEL:t,{name:"checkSortArrow",hash:{},fn:e.program(45,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </a> "},45:function(e,t,a,l,n,i,r){return' <span id="sorted_column" title="Product Name" border="0" class="'+e.escapeExpression(e.lambda(null!=r[1]?r[1].sortOrderString:r[1],t))+' svgIconsImg"></span> '},47:function(e,t,a,l,n){return" "+e.escapeExpression(a.encodeForHtml.call(null!=t?t:{},null!=t?t.FIELDLABEL:t,{name:"encodeForHtml",hash:{},data:n}))+" "},49:function(e,t,a,l,n){var i;return' <table border="0" width="100%" cellspacing="0" cellpadding="0" align="center" class="norec"> <tbody> <tr> <td valign="center"> '+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.name:t,"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(50,n,0),inverse:e.program(24,n,0),data:n}))?i:"")+' <div id="norec_'+e.escapeExpression(e.lambda(null!=t?t.listRelationId:t,t))+'"> </div> </td> </tr> </tbody> </table> '},50:function(e,t,a,l,n){return' <div class="pR30 fontsmooth">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.event.attachment.empty.msg",{name:"getI18n",hash:{},data:n}))+"</div> "},52:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return' <tr id="'+e.escapeExpression(e.lambda(null!=t?t.ENTITYID:t,t))+'" '+(null!=(s=a.isNotUndefined.call(o,null!=r[1]?r[1].parentId:r[1],{name:"isNotUndefined",hash:{},fn:e.program(53,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' class="'+(null!=(s=a.ifEquals.call(o,null!=r[1]?r[1].name:r[1],"INVITEDEVENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(55,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' topband_dv_row" name="rellistrow"> '+(null!=(s=a.ifNotEquals.call(o,null!=r[1]?r[1].name:r[1],"INVITEDEVENTSPERSONALITY",{name:"ifNotEquals",hash:{},fn:e.program(57,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=r[1]?r[1].name:r[1],"VISITSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(141,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.toShowCheckBox.call(o,null!=r[1]?r[1].listRelationId:r[1],null!=r[1]?r[1].customButton:r[1],null!=r[1]?r[1].toShowRelatedListRecordsCheckBox:r[1],{name:"toShowCheckBox",hash:{},fn:e.program(144,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.each.call(o,null!=t?t.CONTENT:t,{name:"each",hash:{},fn:e.program(149,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </tr> "},53:function(e,t,a,l,n,i,r){return' data-parentid="'+e.escapeExpression(e.lambda(null!=r[1]?r[1].parentId:r[1],t))+'" '},55:function(e,t,a,l,n){return"modRow"},57:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return' <td nowrap="" width="0" class="tableData pL0 vaT dv_first_td"> '+(null!=(s=a.ifEquals.call(o,null!=r[1]?r[1].name:r[1],"SERIESPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(58,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <div class="pR"> <div class="alignRight pA w40 mainRLActionIcon mT_3 tableDataAction"> '+(null!=(s=a.ifCondLogic.call(o,null!=t?t.approveStatus:t,"=","2","||",null!=t?t.approveStatus:t,"=","9",{name:"ifCondLogic",hash:{},fn:e.program(60,n,0,i,r),inverse:e.program(65,n,0,i,r),data:n}))?s:"")+" </div> </div> </td> "},58:function(e,t,a,l,n,i,r){var s=null!=t?t:{},o=e.escapeExpression,d=e.lambda;return' <lyte-checkbox data-zcqa="srChkBoxRl_'+o(a.addDatZcqaChk.call(s,null!=r[1]?r[1].heading:r[1],null!=t?t.ENTITYID:t,r[1],{name:"addDatZcqaChk",hash:{},data:n}))+'" lt-prop-type=\'default\' class="pR seriesChkbox_entity mL10"   lt-prop-disabled='+o(a.addDatZcqa.call(s,null!=r[1]?r[1].heading:r[1],null!=t?t.ENTITYID:t,r[1],{name:"addDatZcqa",hash:{},data:n}))+" onclick=\"crmRelatedList.selectedIds('"+o(d(null!=t?t.ENTITYNAME:t,t))+'\')"    id="seriesChkbox_'+o(d(null!=t?t.ENTITYNAME:t,t))+'"></lyte-checkbox> '},60:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.approveStatus:t,2,{name:"ifEquals",hash:{},fn:e.program(61,n,0),inverse:e.program(63,n,0),data:n}))?i:"")+" "},61:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <span class="iconlock_ap" title=\''+r(a.getI18n.call(i,"crm.approvalProcess.label.waitingForApproval",{name:"getI18n",hash:{},data:n}))+"' alt='"+r(a.getI18n.call(i,"crm.approvalProcess.label.waitingForApproval",{name:"getI18n",hash:{},data:n}))+"'></span> "},63:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <span class="iconlock_ap" title=\''+r(a.getI18n.call(i,"crm.approvalProcess.label.waitingForFindAndMerge",{name:"getI18n",hash:{},data:n}))+"' alt='"+r(a.getI18n.call(i,"crm.approvalProcess.label.waitingForFindAndMerge",{name:"getI18n",hash:{},data:n}))+"'></span> "},65:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifCondLogic.call(null!=t?t:{},null!=t?t.approveStatus:t,"=","7","||",null!=t?t.approveStatus:t,"=","8",{name:"ifCondLogic",hash:{},fn:e.program(66,n,0,i,r),inverse:e.program(68,n,0,i,r),data:n}))?s:"")+" "},66:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <span class="iconlock_ap mL2" title=\''+r(a.getI18n.call(i,"crm.reviewprocess.record.review.pending",{name:"getI18n",hash:{},data:n}))+"' alt='"+r(a.getI18n.call(i,"crm.reviewprocess.record.review.pending",{name:"getI18n",hash:{},data:n}))+"'></span> "},68:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifCondLogic.call(null!=t?t:{},null!=t?t.Locked__s:t,"==",!0,"&&",null!=t?t.locked_for_me:t,"==",!0,{name:"ifCondLogic",hash:{},fn:e.program(69,n,0,i,r),inverse:e.program(71,n,0,i,r),data:n}))?s:"")+" "},69:function(e,t,a,l,n){var i=e.escapeExpression;return' <span data-zcqa="lockedforMeRelated_'+i(e.lambda(null!=t?t.ENTITYID:t,t))+'" class="dIB mL8 zcrm_svgIcons rlc_lockIcon vaT mT5" onmouseenter="crmui.showTooltip(\''+i(a.getI18n.call(null!=t?t:{},"crm.record.lock.record.locked",{name:"getI18n",hash:{},data:n}))+'\')" onmouseleave="crmui.hideTooltip()"></span> '},71:function(e,t,a,l,n,i,r){var s;return' <div align="center" id="div'+e.escapeExpression(e.lambda(null!=t?t.ENTITYID:t,t))+'" class="indIcon"> '+(null!=(s=a.getEditDeleteLinks.call(null!=t?t:{},null!=r[1]?r[1].listRelationId:r[1],t,null!=r[1]?r[1].module:r[1],{name:"getEditDeleteLinks",hash:{},fn:e.program(72,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </div> "},72:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t.MODULE:t,"Appointments",{name:"ifEquals",hash:{},fn:e.program(73,n,0,i,r),inverse:e.program(76,n,0,i,r),data:n}))?s:"")+" "},73:function(e,t,a,l,n){var i,r=null!=t?t:{};return" "+(null!=(i=a.ifCondLogic.call(r,a.checkPermissionAvailable.call(r,"Crm_Implied_Delete_Appointments",{name:"checkPermissionAvailable",hash:{},data:n}),"==",!0,"||",a.checkPermissionAvailable.call(r,"Crm_Implied_Edit_Appointments",{name:"checkPermissionAvailable",hash:{},data:n}),"==",!0,{name:"ifCondLogic",hash:{},fn:e.program(74,n,0),inverse:e.noop,data:n}))?i:"")+" "},74:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <a class="sl svgIcons moreOptionIcon dIB pR" data-zcqa="relatedListAppMore_App" id="relatedListAppMore_'+s(r(null!=t?t.ENTITYID:t,t))+'"  href="javascript:;" onclick="detailView.loadCrmServiceUtils(this,\'relatedList\',\''+s(r(null!=t?t.appointmentStatus:t,t))+"','"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.url:i,t))+"','',"+s(r(null!=t?t.endTime:t,t))+",'"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.editzcqa:i,t))+"','"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataCid:i,t))+"','"+s(a.stringify.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i,{name:"stringify",hash:{},data:n}))+'\');sE(event);"  data-params=\'{"module":"'+s(r(null!=t?t.MODULE:t,t))+'","id":"'+s(r(null!=t?t.ENTITYID:t,t))+'","from":"relatedlist", "serviceId": "'+s(r(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.serviceId:i,t))+"\"}'></a> "},76:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.ifEquals.call(o,null!=t?t.MODULE:t,"CalendarBookings",{name:"ifEquals",hash:{},fn:e.program(77,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.isNotUndefined.call(o,null!=(s=null!=t?t.links:t)?s.editObj:s,{name:"isNotUndefined",hash:{},fn:e.program(79,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.isNotUndefined.call(o,null!=(s=null!=t?t.links:t)?s.closeObj:s,{name:"isNotUndefined",hash:{},fn:e.program(101,n,0,i,r),inverse:e.program(104,n,0,i,r),data:n}))?s:"")+" "},77:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return" <div id='calendarBookingMenu_"+r(i(null!=t?t.ENTITYID:t,t))+'\' class="sl svgIcons moreOptionIcon dIB pR" data-zcqa="calendarBookingMenu" onclick=\'detailView.renderCalendarBookingOptions("{\\"id\\":\\"'+r(i(null!=t?t.ENTITYID:t,t))+'\\"}")\'></div> '},79:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.links:t)?s.editObj:s)?s.isShowStatusChange:s,{name:"if",hash:{},fn:e.program(80,n,0,i,r),inverse:e.program(82,n,0,i,r),data:n}))?s:"")+" "},80:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression;return' <a class="link neweditIcon dIB" href="javascript:;" data-zcqa=\''+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.editObj:s)?s.editzcqa:s,t))+'\' lt-prop-aria-keydown="true" tabindex="0" aria-label=\''+d(a.getI18n.call(null!=t?t:{},"crm.button.edit",{name:"getI18n",hash:{},data:n}))+"' onclick=\"crmRelatedList.showCampaignStatusDiv('"+d(o(null!=r[1]?r[1].listRelationId:r[1],t))+"','"+d(o(null!=t?t.ENTITYID:t,t))+"');\"></a> "},82:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.links:t)?s.editObj:s)?s.isEditEntity:s,{name:"if",hash:{},fn:e.program(83,n,0,i,r),inverse:e.program(90,n,0,i,r),data:n}))?s:"")+" "},83:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifAnyMatch.call(null!=t?t:{},null!=(s=null!=(s=null!=(s=null!=t?t.links:t)?s.editObj:s)?s.dataParams:s)?s.module:s,"=","Tasks",null!=(s=null!=(s=null!=(s=null!=t?t.links:t)?s.editObj:s)?s.dataParams:s)?s.module:s,"=","Calls",{name:"ifAnyMatch",hash:{},fn:e.program(84,n,0,i,r),inverse:e.program(86,n,0,i,r),data:n}))?s:"")+" "},84:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return" <link-to data-zcqa='"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.editzcqa:i,t))+"' lt-prop-td='"+s(a.stringify.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i,{name:"stringify",hash:{},data:n}))+'\' lt-prop-class="link neweditIcon dIB" lt-prop-route="crm.tab.module.entity.edit"  lt-prop-qp =\'{"sub_module" : "'+s(r(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.module:i,t))+'"}\' lt-prop-dp = \'["Activities","'+s(r(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.id:i,t))+"\"]'></link-to> "},86:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=r[1]?r[1].IS_CLIENT_ACCOUNT:r[1],"true",{name:"ifEquals",hash:{},fn:e.program(87,n,0,i,r),inverse:e.program(88,n,0,i,r),data:n}))?s:"")+" "},87:function(e,t,a,l,n){var i;return" "+(null!=(i=a.checkPermission.call(null!=t?t:{},"Crm_Implied_Edit",null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.module:i,{name:"checkPermission",hash:{},fn:e.program(88,n,0),inverse:e.noop,data:n}))?i:"")+" "},88:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return" <link-to data-zcqa='"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.editzcqa:i,t))+"' lt-prop-td='"+s(a.stringify.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i,{name:"stringify",hash:{},data:n}))+'\' lt-prop-class="link neweditIcon dIB" lt-prop-route="crm.tab.module.entity.edit" lt-prop-dp = \'["'+s(r(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.module:i,t))+'","'+s(r(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.id:i,t))+"\"]'></link-to> "},90:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.isEventEdit:i,{name:"if",hash:{},fn:e.program(91,n,0),inverse:e.program(93,n,0),data:n}))?i:"")+" "},91:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <a class="link neweditIcon dIB" href="javascript:;" data-zcqa=\''+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.editzcqa:i,t))+"' data-cid=\""+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataCid:i,t))+"\" data-params='"+s(a.stringify.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i,{name:"stringify",hash:{},data:n}))+"'></a> "},93:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifCondLogic.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.isCallEdit:i,"=",!0,"||",null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.isCallEdit:i,"=",!1,{name:"ifCondLogic",hash:{},fn:e.program(94,n,0),inverse:e.program(96,n,0),data:n}))?i:"")+" "},94:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.isCallEdit:i,!0,{name:"ifEquals",hash:{},fn:e.program(91,n,0),inverse:e.noop,data:n}))?i:"")+" "},96:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.isProductPers:i,{name:"if",hash:{},fn:e.program(97,n,0),inverse:e.program(99,n,0),data:n}))?i:"")+" "},97:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <a class="link neweditIcon dIB" href="javascript:;" data-zcqa=\''+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.editzcqa:i,t))+"' onclick=\"javascript:commonUtils.openCustomLookup('"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.url:i,t))+"',undefined,'topBandPopup');\"></a> "},99:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <a class="link neweditIcon dIB" data-zcqa=\''+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.editzcqa:i,t))+"' href=\""+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.url:i,t))+'"></a> '},101:function(e,t,a,l,n){var i;return' <span class="sep">&nbsp;&nbsp;</span> '+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.closeObj:i)?i.isUnderProcess:i,"0",{name:"ifEquals",hash:{},fn:e.program(102,n,0),inverse:e.noop,data:n}))?i:"")+" "},102:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <a id="deletelink" class="link closeTaskIcon dIB" data-zcqa=\''+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.closeObj:i)?i.closezcqa:i,t))+"' onclick=\"javascript:sortRelatedList('"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.closeObj:i)?i.url:i,t))+"','','"+s(r(null!=t?t.ENTITYID:t,t))+"')\" ></a> "},104:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.isNotUndefined.call(null!=t?t:{},null!=(s=null!=t?t.links:t)?s.deleteObj:s,{name:"isNotUndefined",hash:{},fn:e.program(105,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},105:function(e,t,a,l,n,i,r){var s;return' <span class="sep">&nbsp;&nbsp;</span> '+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=t?t.links:t)?s.lookuprel:s,{name:"if",hash:{},fn:e.program(106,n,0,i,r),inverse:e.program(124,n,0,i,r),data:n}))?s:"")+" "},106:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.isShowInvoiceMenu:s,{name:"if",hash:{},fn:e.program(107,n,0,i,r),inverse:e.program(109,n,0,i,r),data:n}))?s:"")+" "},107:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <span id="deletelink" class="ddDotIcon dIB vaM pR" style="margin-left:-5px;" data-dissociateclick="javascript:'+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.dissociatelink:i,t))+'" onclick="showInvoiceMenu(this)" data-zcqa=\''+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.deletezcqa:i,t))+"' data-params='"+s(a.stringify.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.dataParamsDel:i,{name:"stringify",hash:{},data:n}))+"'></span><span>&nbsp;</span> "},109:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.isCallLink:s,{name:"if",hash:{},fn:e.program(110,n,0,i,r),inverse:e.program(112,n,0,i,r),data:n}))?s:"")+" "},110:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <a class="sl svgIcons moreOptionIcon dIB pR" data-zcqa="relatedListMore_Calls" id="relatedListMore_'+s(r(null!=t?t.ENTITYID:t,t))+'"  href="javascript:;" onclick="Crm.scheduledCallMoreOption(this, \'relatedList\',\''+s(r(null!=t?t.SMOWNERID:t,t))+'\');sE1(event);" data-params=\'{"dissociateclick":"javascript:'+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.dissociatelink:i,t))+"\"}'></a> "},112:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=t?t.isEditPermissionDenied:t,{name:"if",hash:{},fn:e.program(113,n,0,i,r),inverse:e.program(116,n,0,i,r),data:n}))?s:"")+" "},113:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifNotEquals.call(null!=t?t:{},null!=r[1]?r[1].name:r[1],"SERIESPERSONALITY",{name:"ifNotEquals",hash:{},fn:e.program(114,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},114:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression;return' <a id="deletelink" class="link newCloseIcon svgIcons ico-close-small2 cP op5 dIB pR" data-onclick="javascript:sortRelatedList(\''+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.url:s,t))+"','','"+d(o(null!=t?t.ENTITYID:t,t))+"')\" data-zcqa='"+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.deletezcqa:s,t))+"' onclick=\"showDeletePopup('"+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.warningMsg:s,t))+"', 'crm.mb.label.move.to.trash', '', '', this);\" data-params='{\"module\":\""+d(o(null!=(s=null!=(s=null!=(s=null!=t?t.links:t)?s.editObj:s)?s.dataParams:s)?s.module:s,t))+'","isMultiValued" :true,"dissociateclick":"javascript:multiLookupsView.permissionIssueWarningShow(SSIINNGGLLEEQQUUOOTTEE'+d(o(null!=t?t.ENTITYID:t,t))+"SSIINNGGLLEEQQUUOOTTEE,SSIINNGGLLEEQQUUOOTTEE"+d(o(null!=r[1]?r[1].listRelationId:r[1],t))+"SSIINNGGLLEEQQUUOOTTEE,SSIINNGGLLEEQQUUOOTTEE"+d(o(null!=r[1]?r[1].module:r[1],t))+"SSIINNGGLLEEQQUUOOTTEE,14);\"}'></a> "},116:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=t?t.isMandatory:t,{name:"if",hash:{},fn:e.program(117,n,0,i,r),inverse:e.program(119,n,0,i,r),data:n}))?s:"")+" "},117:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression;return' <a id="deletelink" class="link newCloseIcon svgIcons ico-close-small2 cP op5 dIB pR" data-onclick="javascript:sortRelatedList(\''+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.url:s,t))+"','','"+d(o(null!=t?t.ENTITYID:t,t))+"')\" data-zcqa='"+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.deletezcqa:s,t))+"' onclick=\"showDeletePopup('"+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.warningMsg:s,t))+"', 'crm.mb.label.move.to.trash', '', '', this);\" data-params='{\"module\":\""+d(o(null!=(s=null!=(s=null!=(s=null!=t?t.links:t)?s.editObj:s)?s.dataParams:s)?s.module:s,t))+'","isMultiValued" :true,"dissociateclick":"javascript:multiLookupsView.permissionIssueWarningShow(SSIINNGGLLEEQQUUOOTTEE'+d(o(null!=t?t.ENTITYID:t,t))+"SSIINNGGLLEEQQUUOOTTEE,SSIINNGGLLEEQQUUOOTTEE"+d(o(null!=r[1]?r[1].listRelationId:r[1],t))+"SSIINNGGLLEEQQUUOOTTEE,SSIINNGGLLEEQQUUOOTTEE"+d(o(null!=r[1]?r[1].module:r[1],t))+"SSIINNGGLLEEQQUUOOTTEE,5 ,null,SSIINNGGLLEEQQUUOOTTEE"+d(o(null!=r[1]?r[1].fieldlabel:r[1],t))+"SSIINNGGLLEEQQUUOOTTEE);\"}'></a> "},119:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.isDeletePermissionDenied:i,{name:"if",hash:{},fn:e.program(120,n,0),inverse:e.program(122,n,0),data:n}))?i:"")+" "},120:function(e,t,a,l,n){return' <a id="deletelink" class="link newCloseIcon svgIcons ico-close-small2 cP op5 dIB pR" onmouseenter="crmui.showTooltip(\''+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.relatedlist.remove.disabled.tooltip",{name:"getI18n",hash:{},data:n}))+'\');" onmouseleave="crmui.hideTooltip();" onclick="return false"></a> '},122:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <a id="deletelink" class="link newCloseIcon svgIcons ico-close-small2 cP op5 dIB pR"  data-onclick="javascript:sortRelatedList(\''+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.url:i,t))+"','','"+s(r(null!=t?t.ENTITYID:t,t))+"')\" data-zcqa='"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.deletezcqa:i,t))+"' onclick=\"showDeletePopup('"+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.warningMsg:i,t))+"', 'crm.mb.label.move.to.trash', '', '', this);\" data-params='{\"module\":\""+s(r(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.module:i,t))+'","isMultiValued" :true,"dissociateclick":"javascript:'+s(r(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.dissociatelink:i,t))+"\"}'></a> "},124:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.isShowInvoiceMenu:s,{name:"if",hash:{},fn:e.program(125,n,0,i,r),inverse:e.program(127,n,0,i,r),data:n}))?s:"")+" "},125:function(e,t,a,l,n){var i,r=e.escapeExpression;return' <span id="deletelink" class="ddDotIcon dIB vaM pR" style="margin-left:-5px;" onclick="showInvoiceMenu(this)" data-zcqa=\''+r(e.lambda(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.deletezcqa:i,t))+"' data-params='"+r(a.stringify.call(null!=t?t:{},null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.dataParamsDel:i,{name:"stringify",hash:{},data:n}))+"'></span><span>&nbsp;</span> "},127:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.isRemoveLink:s,{name:"if",hash:{},fn:e.program(128,n,0,i,r),inverse:e.program(133,n,0,i,r),data:n}))?s:"")+" "},128:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.isCampaignMemberPersonality.call(null!=t?t:{},t,null!=r[1]?r[1].name:r[1],null!=r[1]?r[1].isCustLookUp:r[1],{name:"isCampaignMemberPersonality",hash:{},fn:e.program(129,n,0,i,r),inverse:e.program(131,n,0,i,r),data:n}))?s:"")+" "},129:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <a id="deletelink" class="link newCloseIcon svgIcons ico-close-small2 cP op5 dIB pR" onclick="crmRelatedList.handleIntegCampaignDissociation(\''+r(i(null!=t?t.MODULE:t,t))+"', '"+r(i(null!=t?t.$campaign_type:t,t))+"')\"></a> "},131:function(e,t,a,l,n){var i,r=null!=t?t:{},s=e.escapeExpression,o=e.lambda;return' <a id="deletelink" class="crmLinkColor cP newCloseIcon svgIcons ico-close-small2 cP op5 dIB pR"  lt-prop-aria-keydown="true" tabindex="0" aria-label=\''+s(a.getI18n.call(r,"crm.button.delete",{name:"getI18n",hash:{},data:n}))+"' data-onclick=\"javascript:sortRelatedList('"+s(o(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.url:i,t))+"','','"+s(o(null!=t?t.ENTITYID:t,t))+"')\" data-zcqa='"+s(o(null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.deletezcqa:i,t))+"' onclick=\"showDeletePopup('"+s(a.encodeJS.call(r,null!=(i=null!=(i=null!=t?t.links:t)?i.deleteObj:i)?i.warningMsg:i,{name:"encodeJS",hash:{},data:n}))+"', 'crm.confirm.deassociate', '', '', this);\" data-params='{\"module\":\""+s(o(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.module:i,t))+'","isMultiValued" :true}\'></a> '},133:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.isCallLink:s,{name:"if",hash:{},fn:e.program(134,n,0,i,r),inverse:e.program(136,n,0,i,r),data:n}))?s:"")+" "},134:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <a class="sl svgIcons moreOptionIcon dIB pR" data-zcqa="relatedListMore_Calls" id="relatedListMore_'+r(i(null!=t?t.ENTITYID:t,t))+'" href="javascript:;" onclick="Crm.scheduledCallMoreOption(this, \'relatedList\',\''+r(i(null!=t?t.SMOWNERID:t,t))+"');sE1(event);\"></a> "},136:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression,c=null!=t?t:{};return' <a id="deletelink" class="link deleteIcon dIB pR" data-zcqa=\''+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.deletezcqa:s,t))+"' data-onclick=\"javascript:sortRelatedList('"+d(o(null!=(s=null!=(s=null!=t?t.links:t)?s.deleteObj:s)?s.url:s,t))+"','','"+d(o(null!=t?t.ENTITYID:t,t))+"')\" "+(null!=(s=a.ifEquals.call(c,null!=r[1]?r[1].name:r[1],"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(137,n,0,i,r),inverse:e.program(139,n,0,i,r),data:n}))?s:"")+" onclick=\"showDeletePopup('"+d(o(null!=t?t.ENTITYID:t,t))+"', 'crm.button.move.to.trash', '', '', this, 'rl','','','"+d(a.encodeJS.call(c,null!=(s=null!=t?t.CONTENT:t)?s[0]:s,{name:"encodeJS",hash:{},data:n}))+"');\"></a> "},137:function(e,t,a,l,n){return' data-params=\'{"module":"'+e.escapeExpression(e.lambda(null!=t?t.MODULE:t,t))+"\"}' "},139:function(e,t,a,l,n){var i;return' data-params=\'{"module":"'+e.escapeExpression(e.lambda(null!=(i=null!=(i=null!=(i=null!=t?t.links:t)?i.editObj:i)?i.dataParams:i)?i.module:i,t))+"\"}' "},141:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.chattedDiv.call(null!=t?t:{},null!=r[1]?r[1].chatted:r[1],{name:"chattedDiv",hash:{},fn:e.program(142,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},142:function(e,t,a,l,n){return""},144:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" <td class=\"w20 vaT\" id='dvpR0'> "+(null!=(s=a.if.call(o,null!=r[1]?r[1].listRelationId:r[1],{name:"if",hash:{},fn:e.program(145,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.if.call(o,null!=r[2]?r[2].listRelationId:r[2],{name:"if",hash:{},fn:e.program(147,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </td> "},145:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.lambda,c=e.escapeExpression;return' <div class="'+(null!=(s=a.isCustomCheckBoxChecked.call(o,null!=t?t.ENTITYID:t,null!=r[1]?r[1].listRelationId:r[1],{name:"isCustomCheckBoxChecked",hash:{},fn:e.program(35,n,0,i,r),inverse:e.program(37,n,0,i,r),data:n}))?s:"")+' customDom mR5" id="CB_'+c(d(null!=t?t.ENTITYID:t,t))+'" value="CB_'+c(d(null!=r[1]?r[1].listRelationId:r[1],t))+'" data-cid="selectEntity_'+c(d(null!=r[1]?r[1].listRelationId:r[1],t))+'" onclick="CustomButtonJSObjectInit.selectRecord(this,\''+c(a.encodeJS.call(o,a.toLowerCase.call(o,null!=r[1]?r[1].name:r[1],{name:"toLowerCase",hash:{},data:n}),{name:"encodeJS",hash:{},data:n}))+"_"+c(d(null!=r[1]?r[1].listRelationId:r[1],t))+"')\"></div> "},147:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.lambda,c=e.escapeExpression;return' <div class="'+(null!=(s=a.isCustomCheckBoxChecked.call(o,null!=r[1]?r[1].ENTITYID:r[1],null!=r[2]?r[2].listRelationId:r[2],{name:"isCustomCheckBoxChecked",hash:{},fn:e.program(35,n,0,i,r),inverse:e.program(37,n,0,i,r),data:n}))?s:"")+' customDom mR5" id="CB_'+c(d(null!=r[1]?r[1].ENTITYID:r[1],t))+'" value="CB_'+c(d(null!=r[2]?r[2].listRelationId:r[2],t))+'" data-cid="selectEntity_'+c(d(null!=r[2]?r[2].listRelationId:r[2],t))+'" onclick="CustomButtonJSObjectInit.selectRecord(this,\''+c(a.encodeJS.call(o,a.toLowerCase.call(o,null!=r[2]?r[2].name:r[2],{name:"toLowerCase",hash:{},data:n}),{name:"encodeJS",hash:{},data:n}))+"_"+c(d(null!=r[2]?r[2].listRelationId:r[2],t))+"')\"></div> "},149:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.if.call(o,null!=r[2]?r[2].heading:r[2],{name:"if",hash:{},fn:e.program(150,n,0,i,r),inverse:e.program(153,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.checkForRlHandling.call(o,null!=r[2]?r[2].heading:r[2],n&&n.index,null!=r[2]?r[2].name:r[2],{name:"checkForRlHandling",hash:{},fn:e.program(155,n,0,i,r),inverse:e.program(165,n,0,i,r),data:n}))?s:"")+" </td> "},150:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return' <td class="tableData vaT cP '+e.escapeExpression(a.getClassForLVDataDV.call(o,null!=r[2]?r[2].heading:r[2],n&&n.index,{name:"getClassForLVDataDV",hash:{},data:n}))+' formatLtr" '+(null!=(s=a.ifEquals.call(o,null!=r[2]?r[2].name:r[2],"SERIESPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(151,n,0,i,r),inverse:e.noop,data:n}))?s:"")+"> "},151:function(e,t,a,l,n,i,r){return" onClick="+e.escapeExpression(a.addOnClick.call(null!=t?t:{},null!=r[3]?r[3].heading:r[3],n&&n.index,null!=r[2]?r[2].ENTITYID:r[2],r[3],{name:"addOnClick",hash:{},data:n}))+" "},153:function(e,t,a,l,n){return' <td class="tableData vaT"> '},155:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.checkStringRL.call(o,r[1],null!=r[3]?r[3].heading:r[3],n&&n.index,r[2],null!=r[3]?r[3].module:r[3],null!=r[3]?r[3].listRelationId:r[3],null!=r[3]?r[3].name:r[3],null!=r[3]?r[3].subCampaigns:r[3],null!=r[3]?r[3].surveyEnabled:r[3],{name:"checkStringRL",hash:{},fn:e.program(156,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.getDownloadLink.call(o,r[1],null!=r[3]?r[3].heading:r[3],n&&n.index,r[2],null!=r[3]?r[3].module:r[3],null!=r[3]?r[3].listRelationId:r[3],null!=r[3]?r[3].name:r[3],{name:"getDownloadLink",hash:{},fn:e.program(142,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.checkIfSubjectField.call(o,null!=r[3]?r[3].heading:r[3],n&&n.index,null!=r[3]?r[3].name:r[3],{name:"checkIfSubjectField",hash:{},fn:e.program(158,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.if.call(o,n&&n.index,{name:"if",hash:{},fn:e.program(161,n,0,i,r),inverse:e.program(163,n,0,i,r),data:n}))?s:"")+" "},156:function(e,t,a,l,n){return e.escapeExpression(e.lambda(t,t))},158:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=r[2]?r[2].isProjectTask:r[2],!0,{name:"ifEquals",hash:{},fn:e.program(159,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},159:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <i style="margin-left: 2px;margin-bottom: 2px;" class="task_syncIcon vaM"  onmouseover=\'renderingUtils.zctt.showtt(" '+r(a.getI18n.call(i,"crm.schedules.prefix.in",{name:"getI18n",hash:{},data:n}))+" "+r(a.getI18n.call(i,"crm.integ.sync.message","crm.project.integration.title",{name:"getI18n",hash:{},data:n}))+'")\' onmouseout="renderingUtils.zctt.hidett(1)"></i> '},161:function(e,t,a,l,n){return" "},163:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <div class="dIB relatedlist_dropIcon"></div> <div id="attachdropdownarrow'+o(s(null!=r[2]?r[2].ENTITYID:r[2],t))+'" class="attachDropMenuArrow"></div> <div class="dIB attachDropMenuContainer"> <div id="attachdropdown'+o(s(null!=r[2]?r[2].ENTITYID:r[2],t))+'" data-close></div> </div> '},165:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=r[1]?r[1].CONTENT:r[1],{name:"if",hash:{},fn:e.program(166,n,0,i,r),inverse:e.program(168,n,0,i,r),data:n}))?s:"")+" "},166:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.checkStringRelList.call(null!=t?t:{},t,null!=r[2]?r[2].heading:r[2],n&&n.index,r[2],null!=r[3]?r[3].cvId:r[3],null!=r[2]?r[2].module:r[2],r[2],{name:"checkStringRelList",hash:{},fn:e.program(156,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},168:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.checkStringRelList.call(null!=t?t:{},r[1],null!=r[3]?r[3].heading:r[3],n&&n.index,r[2],null!=r[3]?r[3].cvId:r[3],null!=r[3]?r[3].module:r[3],r[3],{name:"checkStringRelList",hash:{},fn:e.program(156,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},170:function(e,t,a,l,n){var i,r=null!=t?t:{},s=e.escapeExpression;return' <div class="fR"> <div align="right" class="listNav" id="rellist_navigation_div"> <table class="fR"> <tr> <td class="lh14 vaM pT8" id="rellist_navig_prev"> '+(null!=(i=a.ifEquals.call(r,null!=t?t.fromIndex:t,1,{name:"ifEquals",hash:{},fn:e.program(171,n,0),inverse:e.program(173,n,0),data:n}))?i:"")+' </td> <td class="crm-small-font-size lh14 vaM pT8"> '+s(e.lambda(null!=t?t.fromIndex:t,t))+' <span class="crmLabelColor pL10 pR10"> - </span> <span id="rellist_end_index">'+s(a.getEndIndex.call(r,null!=t?t.fromIndex:t,null!=t?t.toIndex:t,10,null!=t?t.body:t,!0,{name:"getEndIndex",hash:{},data:n}))+'</span> </td> <td class="lh14 vaM pT8" id="rellist_navig_next"> '+(null!=(i=a.objPresentAtIndex.call(r,null!=t?t.body:t,10,{name:"objPresentAtIndex",hash:{},fn:e.program(175,n,0),inverse:e.program(177,n,0),data:n}))?i:"")+" </td> </tr> </table> </div> </div> "},171:function(e,t,a,l,n){return' <img hspace="2" src="'+e.escapeExpression(a.getCrmImageUrl.call(null!=t?t:{},"spacer.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" class="previous_disabled"> '},173:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <a class="link" id=\'advancedsearchArrowP\' data-params=\'{"module":"'+r(i(null!=t?t.module:t,t))+'","fromIndex":"'+r(i(null!=t?t.fromIndex:t,t))+'","rid":"'+r(i(null!=t?t.listRelationId:t,t))+'","name":"'+r(i(null!=t?t.name:t,t))+'"}\' data-cid="navigate_previous_rellist"> <img hspace="2" src="'+r(a.getCrmImageUrl.call(null!=t?t:{},"spacer.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" class="previous" border="0"> </a> '},175:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <a class="link" id=\'advancedsearchArrowN\' data-params=\'{"module":"'+r(i(null!=t?t.module:t,t))+'","fromIndex":"'+r(i(null!=t?t.fromIndex:t,t))+'","rid":"'+r(i(null!=t?t.listRelationId:t,t))+'","name":"'+r(i(null!=t?t.name:t,t))+'"}\' data-cid="navigate_next_rellist"> <img hspace="2" src="'+r(a.getCrmImageUrl.call(null!=t?t:{},"spacer.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" class="next" border="0"> </a> '},177:function(e,t,a,l,n){return' <img hspace="2" src="'+e.escapeExpression(a.getCrmImageUrl.call(null!=t?t:{},"spacer.gif",{name:"getCrmImageUrl",hash:{},data:n}))+'" class="next_disabled"> '},179:function(e,t,a,l,n){var i;return" "+(null!=(i=a.hasKey.call(null!=t?t:{},null!=t?t.info:t,"total_count",{name:"hasKey",hash:{},fn:e.program(180,n,0),inverse:e.noop,data:n}))?i:"")+" "},180:function(e,t,a,l,n){var i,r=e.escapeExpression;return' <div id="rlTotalCount" class="fL clearFix mT10 crmBaseColor mB10 mL20"> '+r(a.getI18n.call(null!=t?t:{},"crm.label.totalcount",{name:"getI18n",hash:{},data:n}))+': <span class="fwBold mL5 crmBaseColor"> '+r(e.lambda(null!=(i=null!=t?t.info:t)?i.total_count:i,t))+" </span> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.showNoRecords.call(null!=t?t:{},t,{name:"showNoRecords",hash:{},fn:e.program(1,n,0,i,r),inverse:e.program(26,n,0,i,r),data:n}))?s:"")+" "},usePartial:!0,useData:!0,useDepths:!0}),t.RelatedListFilters=e({1:function(e,t,a,l,n){return" <td></td> "},3:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression,c=e.lambda;return" "+d(a.setFilterComparators.call(o,t,{name:"setFilterComparators",hash:{},data:n}))+' <td class="borderBottomNone"> <div class="zWebSITableFilterSelect pT10 pB10"> <div class="dB"> <lyte-dropdown lt-prop-options="'+d(a.ObjToString.call(o,null!=t?t.filterComparators:t,{name:"ObjToString",hash:{},data:n}))+'" lt-prop-aria-button=\'{"aria-label" : "'+d(c(null!=t?t.FIELDLABEL:t,t))+'" , "aria-disabled" : "'+d(c(null!=t?t.disabled:t,t))+'"}\' lt-prop-user-value="name" lt-prop-system-value="value" data-zcqa="rlComparator_'+d(a.getRelatedListLabel.call(o,null!=r[1]?r[1].listRelationId:r[1],{name:"getRelatedListLabel",hash:{},data:n}))+"_"+d(c(null!=t?t.FIELDLABEL:t,t))+'" id="comparator_'+d(c(null!=r[1]?r[1].listRelationId:r[1],t))+'" class="zCampSmartFilterDd zWebTableFilterSel" lt-prop-disabled="'+d(c(null!=t?t.disabled:t,t))+'"></lyte-dropdown> </div> '+(null!=(s=a.isNotUndefined.call(o,null!=t?t.picklist_values:t,{name:"isNotUndefined",hash:{},fn:e.program(4,n,0,i,r),inverse:e.program(6,n,0,i,r),data:n}))?s:"")+" </div> </td> "},4:function(e,t,a,l,n,i,r){var s=null!=t?t:{},o=e.escapeExpression,d=e.lambda;return' <lyte-dropdown lt-prop-options="'+o(a.ObjToString.call(s,null!=t?t.picklist_values:t,{name:"ObjToString",hash:{},data:n}))+'" lt-prop-aria-button=\'{"aria-label" : "'+o(d(null!=t?t.FIELDLABEL:t,t))+'", "aria-placeholder" : "'+o(a.getI18n.call(s,"crm.label.hyphenselect",{name:"getI18n",hash:{},data:n}))+'"}\' lt-prop-user-value="DisplayValue" lt-prop-system-value="ActualValue" data-zcqa="rlDropDown_'+o(a.getRelatedListLabel.call(s,null!=r[1]?r[1].listRelationId:r[1],{name:"getRelatedListLabel",hash:{},data:n}))+"_"+o(d(null!=t?t.FIELDLABEL:t,t))+'" id="rlFiltersInput_'+o(a.getAPINameForFilters.call(s,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" class="zCampSmartFilterDd rlFiltersInput mT10" data-ui-type="'+o(d(null!=t?t.UITYPE:t,t))+'" data-field-name="'+o(a.getAPINameForFilters.call(s,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" lt-prop-placeholder="'+o(a.getI18n.call(s,"crm.label.hyphenselect",{name:"getI18n",hash:{},data:n}))+'"></lyte-dropdown> '},6:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=t?t.userType:t,{name:"if",hash:{},fn:e.program(7,n,0,i,r),inverse:e.program(9,n,0,i,r),data:n}))?s:"")+" "},7:function(e,t,a,l,n,i,r){var s=null!=t?t:{},o=e.escapeExpression,d=e.lambda;return' <crm-user-autocomplete-wrapper data-zcqa="rlUserDropDown_'+o(a.getRelatedListLabel.call(s,null!=r[1]?r[1].listRelationId:r[1],{name:"getRelatedListLabel",hash:{},data:n}))+"_"+o(d(null!=t?t.FIELDLABEL:t,t))+'" id="rlFiltersInput_'+o(a.getAPINameForFilters.call(s,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" class-val="zCampSmartFilterDd zCampSmartFilterUserDd" class="rlFiltersInput" data-ui-type="'+o(d(null!=t?t.UITYPE:t,t))+'" data-field-name="'+o(a.getAPINameForFilters.call(s,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" cx-prop-type="single"></crm-user-autocomplete-wrapper> '},9:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=t?t.showCal:t,{name:"if",hash:{},fn:e.program(10,n,0,i,r),inverse:e.program(12,n,0,i,r),data:n}))?s:"")+" "},10:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <lyte-input lt-prop-aria-attribute=\'{"aria-label" : "'+o(s(null!=t?t.FIELDLABEL:t,t))+'" , "aria-maxlength" : "'+o(s(null!=t?t.MAXIMUMLEN:t,t))+'" , "aria-placeholder" : "'+o(a.convertToUpperCase.call(d,a.getUserDetail.call(d,"DATE_PATTERN",{name:"getUserDetail",hash:{},data:n}),{name:"convertToUpperCase",hash:{},data:n}))+'"}\' data-zcqa="rlCalInput_'+o(a.getRelatedListLabel.call(d,null!=r[1]?r[1].listRelationId:r[1],{name:"getRelatedListLabel",hash:{},data:n}))+"_"+o(s(null!=t?t.FIELDLABEL:t,t))+'" id="rlFiltersInput_'+o(a.getAPINameForFilters.call(d,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" class="rlFiltersInput" lt-prop-wrapper-style="background-color: var(--bg_white);margin-top: 10px;padding: 5px 10px;" lt-prop-appearance="box" data-field-name="'+o(a.getAPINameForFilters.call(d,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" data-ui-type="'+o(s(null!=t?t.UITYPE:t,t))+'" data-datatype="'+o(s(null!=t?t.TYPE:t,t))+'" lt-prop-type="text" lt-prop-placeholder="'+o(a.convertToUpperCase.call(d,a.getUserDetail.call(d,"DATE_PATTERN",{name:"getUserDetail",hash:{},data:n}),{name:"convertToUpperCase",hash:{},data:n}))+'" onclick="showCalen(this.id,undefined, undefined, undefined, true, this);"></lyte-input> '},12:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression,d=null!=t?t:{};return' <lyte-input lt-prop-aria-attribute=\'{"aria-label" : "'+o(s(null!=t?t.FIELDLABEL:t,t))+'" , "aria-maxlength" : "'+o(s(null!=t?t.MAXIMUMLEN:t,t))+'" , "aria-disabled" : "'+o(s(null!=t?t.disabled:t,t))+'" , "aria-placeholder" : "'+o(a.getI18n.call(d,"crm.label.filter.typehere",{name:"getI18n",hash:{},data:n}))+'"}\' data-zcqa="rlInput_'+o(a.getRelatedListLabel.call(d,null!=r[1]?r[1].listRelationId:r[1],{name:"getRelatedListLabel",hash:{},data:n}))+"_"+o(s(null!=t?t.FIELDLABEL:t,t))+'" lt-prop-maxlength="'+o(s(null!=t?t.MAXIMUMLEN:t,t))+' id="rlFiltersInput_'+o(a.getAPINameForFilters.call(d,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" class="rlFiltersInput textFld" lt-prop-wrapper-style="background-color: var(--bg_white);margin-top: 10px;padding: 5px 10px;" lt-prop-appearance="box" data-field-name="'+o(a.getAPINameForFilters.call(d,t,{name:"getAPINameForFilters",hash:{},data:n}))+'" data-ui-type="'+o(s(null!=t?t.UITYPE:t,t))+'" lt-prop-type="text" lt-prop-placeholder="'+o(a.getI18n.call(d,"crm.label.filter.typehere",{name:"getI18n",hash:{},data:n}))+'" lt-prop-disabled="'+o(s(null!=t?t.disabled:t,t))+'"> </lyte-input> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression,c=null!=t?t:{};return' <tr id="filters_'+d(o(null!=t?t.listRelationId:t,t))+'" class="zCampSmartFilter zWebSITableFilterSelectTr_'+d(o(null!=t?t.listRelationId:t,t))+'"> '+(null!=(s=a.isTdHtmlNeeded.call(c,null!=t?t.listRelationId:t,{name:"isTdHtmlNeeded",hash:{},fn:e.program(1,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" <td></td> "+(null!=(s=a.each.call(c,null!=t?t.heading:t,{name:"each",hash:{},fn:e.program(3,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' </tr> <tr id="filterFooter_'+d(o(null!=t?t.listRelationId:t,t))+'" class="zCampSmartFilter zWebSITableFilterSelectTr_'+d(o(null!=t?t.listRelationId:t,t))+'"> '+(null!=(s=a.isTdHtmlNeeded.call(c,null!=t?t.listRelationId:t,{name:"isTdHtmlNeeded",hash:{},fn:e.program(1,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <td></td> <td colspan="'+d(a.getObjectLength.call(c,null!=t?t.heading:t,{name:"getObjectLength",hash:{},data:n}))+'" class="alignLeft pB15 pT0"> <span data-zcqa="rlApplyFilter_'+d(a.getRelatedListLabel.call(c,null!=t?t.listRelationId:t,{name:"getRelatedListLabel",hash:{},data:n}))+'" tabindex="0" aria-label="'+d(a.getI18n.call(c,"Apply",{name:"getI18n",hash:{},data:n}))+'" class="crmLinkColor cP dIB vaM mB15 mR15 dvmB0" onclick="crmRelatedList.applyFilter(\''+d(o(null!=t?t.listRelationId:t,t))+"');\">"+d(a.getI18n.call(c,"Apply",{name:"getI18n",hash:{},data:n}))+'</span> <span data-zcqa="rlClearFilter_'+d(a.getRelatedListLabel.call(c,null!=t?t.listRelationId:t,{name:"getRelatedListLabel",hash:{},data:n}))+'" tbindex="0" aria-label="'+d(a.getI18n.call(c,"Clear",{name:"getI18n",hash:{},data:n}))+'" class="crmNotFoundColor cP dIB vaM mB15 mR0 dvmB0" onclick="crmRelatedList.clearFilter(\''+d(o(null!=t?t.listRelationId:t,t))+"');\">"+d(a.getI18n.call(c,"Clear",{name:"getI18n",hash:{},data:n}))+"</span> </td> </tr> "},useData:!0,useDepths:!0}),t.RelatedListLoading=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){return'<tr> <td></td> <td></td> <td valign="center" class="norec borderTopNone borderBottomNone"> <div class="pR30 fontsmooth crmNotFoundColor pT10 pB10">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.admin.loading",{name:"getI18n",hash:{},data:n}))+"</div> </td> </tr>"},useData:!0}),t.SalesNavigatorWidget=e({1:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <tr> <td> <div class="crmNotFoundColor mT8">'+r(i(null!=t?t.entity_title:t,t))+'</div> </td> <td> <div class="crmNotFoundColor mT8">'+r(i(null!=t?t.account_title:t,t))+'</div> </td> </tr> <tr> <td> <div> <iframe src="'+r(i(null!=t?t.entity_url:t,t))+'" width="'+r(i(null!=t?t.width:t,t))+'" height="'+r(i(null!=t?t.height:t,t))+'" frameborder="0" type="text/html"></iframe> </div> </td> <td> <div> <iframe src="'+r(i(null!=t?t.account_url:t,t))+'" width="'+r(i(null!=t?t.width:t,t))+'" height="'+r(i(null!=t?t.height:t,t))+'" frameborder="0" type="text/html"></iframe> </div> </td> </tr> '},3:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.entity_linkedin_id:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.program(6,n,0),data:n}))?i:"")+" "},4:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <tr> <td> <div class="crmNotFoundColor mT8">'+r(i(null!=t?t.entity_title:t,t))+'</div> </td> </tr> <tr> <td> <div> <iframe src="'+r(i(null!=t?t.entity_url:t,t))+'" width="'+r(i(null!=t?t.width:t,t))+'" height="'+r(i(null!=t?t.height:t,t))+'" frameborder="0" type="text/html"></iframe> </div> </td> </tr> '},6:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.account_linkedin_id:t,{name:"if",hash:{},fn:e.program(7,n,0),inverse:e.noop,data:n}))?i:"")+" "},7:function(e,t,a,l,n){var i=e.lambda,r=e.escapeExpression;return' <tr> <td> <div class="crmNotFoundColor mT8">'+r(i(null!=t?t.account_title:t,t))+'</div> </td> </tr> <tr> <td> <div> <iframe src="'+r(i(null!=t?t.account_url:t,t))+'" width="'+r(i(null!=t?t.width:t,t))+'" height="'+r(i(null!=t?t.height:t,t))+'" frameborder="0" type="text/html"></iframe> </div> </td> </tr> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var i;return'<table style="width: 100%"> <tbody> '+(null!=(i=a.if_all.call(null!=t?t:{},null!=t?t.entity_linkedin_id:t,null!=t?t.account_linkedin_id:t,{name:"if_all",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?i:"")+" </tbody> </table> "},useData:!0}),t.personalityAction=e({1:function(e,t,a,l,n){var i;return" "+(null!=(i=a.isNotEmpty.call(null!=t?t:{},null!=t?t.actions:t,{name:"isNotEmpty",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?i:"")+" "},2:function(e,t,a,l,n){var i,r=null!=t?t:{},s=e.escapeExpression;return' <div class="pR"> <a href="javascript:void(0);" onclick="crmRelatedList.showatchPop(this,\''+s(a.encodeJS.call(r,null!=t?t.fromSrc:t,{name:"encodeJS",hash:{},data:n}))+'\');sE(event)" class="atch-dropdown pR pR5" '+(null!=(i=a.ifEquals.call(r,null!=t?t.fromSrc:t,"bluePrint",{name:"ifEquals",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?i:"")+"><span></span></span>"+s(a.getI18n.call(r,"crm.attach.option.label",{name:"getI18n",hash:{},data:n}))+'</a> <ul class="m0 pL0 '+(null!=(i=a.ifNotEquals.call(r,null!=t?t.fromSrc:t,"bluePrint",{name:"ifNotEquals",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?i:"")+' atch-droplist" style="display: none;" data-close="true"> '},3:function(e,t,a,l,n){return'data-zcqa="Detail_Add_Attachemnt"'},5:function(e,t,a,l,n){return"pA"},7:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.isNotUndefined.call(null!=t?t:{},null!=t?t.labelType:t,{name:"isNotUndefined",hash:{},fn:e.program(8,n,0,i,r),inverse:e.program(17,n,0,i,r),data:n}))?s:"")+" "},8:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t.labelType:t,"dropDown",{name:"ifEquals",hash:{},fn:e.program(9,n,0,i,r),inverse:e.program(15,n,0,i,r),data:n}))?s:"")+" "},9:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.isNotUndefined.call(o,null!=t?t.dropDowns:t,{name:"isNotUndefined",hash:{},fn:e.program(10,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.isNotUndefined.call(o,null!=t?t.addNewCustomRl:t,{name:"isNotUndefined",hash:{},fn:e.program(13,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},10:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression;return' <div class="pR fR" style="width:20px !important;"> <span   id="rlDropDown_'+d(o(null!=r[1]?r[1].rid:r[1],t))+'"  class="newRlEdit dIB dvRlEdit" onclick="CustomRelatedListObj.togglerelatedlistmenu(event,\'\',\''+d(o(null!=r[1]?r[1].rid:r[1],t))+'\')"></span> <div id="customRelatedListMenuDiv'+d(o(null!=r[1]?r[1].rid:r[1],t))+'" class="alignLeft crlmenu cfRLaction-popup" style="display:none; right:0px; top:22px;z-index: 1000;"> '+(null!=(s=a.each.call(null!=t?t:{},null!=t?t.dropDowns:t,{name:"each",hash:{},fn:e.program(11,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </div> </div> "},11:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <div class="mT7" data-cid="'+o(s(null!=t?t["data-cid"]:t,t))+'" data-relId="'+o(s(null!=r[2]?r[2].rid:r[2],t))+'"><a class="pL15 fblink mT10" href="javascript:;"  id="submenu_Leads">'+o(s(null!=t?t.label:t,t))+"</a></div> "},13:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <div id="addNewCustomRL_'+o(s(null!=r[1]?r[1].rid:r[1],t))+'" class="fR pT5 pR20 addNewCustomAppRL" style="display:none;"><a  class="dummyForLeftPanel createlink" data-zcqa="lnk_rel_add"  href="javascript:CustomRelatedListObj.addCreatorRecord(\''+o(s(null!=r[1]?r[1].rid:r[1],t))+"')\">"+o(s(null!=t?t.addNewCustomRlLabel:t,t))+"</a></div> "},15:function(e,t,a,l,n){return" "},17:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.isNotUndefined.call(null!=t?t:{},null!=t?t.checkBody:t,{name:"isNotUndefined",hash:{},fn:e.program(18,n,0,i,r),inverse:e.program(26,n,0,i,r),data:n}))?s:"")+" "},18:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.isBodyContentAvailable.call(null!=t?t:{},null!=r[1]?r[1].rid:r[1],{name:"isBodyContentAvailable",hash:{},fn:e.program(19,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},19:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.isNotUndefined.call(o,null!=t?t.mandatoryCheck:t,{name:"isNotUndefined",hash:{},fn:e.program(20,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=r[1]?r[1].name:r[1],"CONTACTSROLESPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(22,n,0,i,r),inverse:e.program(24,n,0,i,r),data:n}))?s:"")+" "},20:function(e,t,a,l,n){return' <span class=" mandatory" style="text-align:center;">'+e.escapeExpression(e.lambda(null!=t?t.mandatoryCheck:t,t))+"</span> "},22:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <link-to data-zcqa="'+o(s(null!=t?t.zcqa:t,t))+'" lt-prop-qp=\'{"returnAnchor" :"contactsrolespersonality_'+o(s(null!=r[1]?r[1].rid:r[1],t))+'", "accId" : "'+o(s(null!=t?t.accId:t,t))+'"}\' lt-prop-class="'+o(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" lt-prop-route="crm.tab.module.entity.edit-contact-role" lt-prop-dp=\'["Potentials","'+o(s(null!=r[1]?r[1].entityId:r[1],t))+"\"]'>"+o(s(null!=t?t.label:t,t))+"</link-to> "},24:function(e,t,a,l,n,i,r){var s=e.escapeExpression,o=e.lambda;return' <a class="'+s(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" tabindex="0" role="button" aria-label="'+s(o(null!=t?t.label:t,t))+'" lt-prop-aria-keydown="true" href="javascript:void(0);" data-zcqa="'+s(o(null!=t?t.zcqa:t,t))+'" data-cid="'+s(o(null!=t?t["data-cid"]:t,t))+'" data-relId="'+s(o(null!=r[1]?r[1].rid:r[1],t))+'">'+s(o(null!=t?t.label:t,t))+"</a> "},26:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=r[1]?r[1].name:r[1],"EMAILSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(27,n,0,i,r),inverse:e.program(75,n,0,i,r),data:n}))?s:"")+" "},27:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression,c=e.lambda;return" "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.setEntIdForZMail:s,{name:"if",hash:{},fn:e.program(28,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <input type="hidden" id="emailId" value=""></input> <input type="hidden" id="fullname" value=""></input> <input type="hidden" name="mailType" id="mailType" value="'+d(a.encodeForHTMLAttribute.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.mailType:s,{name:"encodeForHTMLAttribute",hash:{},data:n}))+'"> '+(null!=(s=a.unless.call(o,null!=t?t.isRecordLocked:t,{name:"unless",hash:{},fn:e.program(30,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' <span id="zmailRS" style="display: none"> '+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.showCheckBox:s,{name:"if",hash:{},fn:e.program(32,n,0,i,r),inverse:e.noop,data:n}))?s:"")+' </span> <span> <input type="hidden" value="'+d(c(null!=r[1]?r[1].rid:r[1],t))+'" id="mailListRelId" name="mailListRelId" /> </span> '+(null!=(s=a.ifEquals.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.module:s,"Accounts",{name:"ifEquals",hash:{},fn:e.program(34,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.getUserStatus.call(o,"IMAP_STATUS",{name:"getUserStatus",hash:{},fn:e.program(44,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.showSelectBox:s,{name:"if",hash:{},fn:e.program(49,n,0,i,r),inverse:e.program(51,n,0,i,r),data:n}))?s:"")+' <span id="relatedMailList" class="newSelect mB5"> <select class=\'select\' name=\'selectMails\' id="selectMails" onChange="javascript:showMailsList(\''+d(c(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.entIdForZMail:s,t))+"','','','"+d(c(null!=r[1]?r[1].rid:r[1],t))+"','-10','next','','true', '"+d(a.encodeJS.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.module:s,{name:"encodeJS",hash:{},data:n}))+"','true')\" style=\"visibility:hidden\"> <option value='ALL' selected>"+d(a.getI18n.call(o,"crm.label.all.sent",{name:"getI18n",hash:{},data:n}))+"</option> "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.isNewEditor:s,{name:"if",hash:{},fn:e.program(53,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.showSelectBox:s,{name:"if",hash:{},fn:e.program(55,n,0,i,r),inverse:e.program(69,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.ifAnyMatch.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.module:s,"!=","Accounts",null!=(s=null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.contactObject:s)?s.length:s,">",0,{name:"ifAnyMatch",hash:{},fn:e.program(71,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},28:function(e,t,a,l,n,i,r){var s;return' <input type="hidden" name="contId" id="contId" value="'+e.escapeExpression(e.lambda(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.entIdForZMail:s,t))+'"/> '},30:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression;return' <span id="getMailOpt" style="display:none;"> <a name="mail" data-zcqa="link_SendMail" class="tb_newsmallbtn" href="javascript:;" onclick="javascript:EntSendMail(\''+d(a.encodeJS.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.module:s,{name:"encodeJS",hash:{},data:n}))+"','"+d(e.lambda(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.entityId:s,t))+"','','"+d(a.encodeJS.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.singularMod:s,{name:"encodeJS",hash:{},data:n}))+"');\">"+d(a.getI18n.call(o,"crm.button.license.sendMail",{name:"getI18n",hash:{},data:n}))+"</a> </span> "},32:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression;return' <input type="checkbox" id="status_'+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.loginUserId:s,t))+'" name="status_'+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.loginUserId:s,t))+'" '+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.checked:s,t))+" onclick='javascript:updateUsersList(\""+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.entIdForZMail:s,t))+'","'+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.loginUserId:s,t))+"\")' /> "+d(a.getI18n.call(null!=t?t:{},"crm.label.share.email",{name:"getI18n",hash:{},data:n}))+' <input type="hidden" id="zmailkey" name="zmailkey" value=\''+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.zmailkey:s,t))+"' /> "},34:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.contactObject:s,{name:"if",hash:{},fn:e.program(35,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},35:function(e,t,a,l,n,i,r){var s,o=e.escapeExpression,d=null!=t?t:{};return" <span class=\"newSelect mB5 mR20\"> <select class='select' id='contactSelDropdownInAcc' onchange=\"javascript:showMailsList($(this),'','','"+o(e.lambda(null!=r[1]?r[1].rid:r[1],t))+"','-10','next','','true', 'Accounts','true')\"> "+(null!=(s=a.if.call(d,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.ALL_CONTACTS_OPTION:s,{name:"if",hash:{},fn:e.program(36,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.each.call(d,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.contactObject:s,{name:"each",hash:{},fn:e.program(41,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" <option value='ACCOUNTS_ALL'>"+o(a.getI18n.call(d,"crm.label.all.accounts.email.sent",{name:"getI18n",hash:{},data:n}))+"</option> </select> </span> "},36:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.showSelectBox:s,{name:"if",hash:{},fn:e.program(37,n,0,i,r),inverse:e.program(39,n,0,i,r),data:n}))?s:"")+" "},37:function(e,t,a,l,n){return" <option value='ALL' selected>"+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.all.contacts.email.sent",{name:"getI18n",hash:{},data:n}))+"</option> "},39:function(e,t,a,l,n){return" <option value='ALL' selected> "+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.all",{name:"getI18n",hash:{},data:n}))+" </option> "},41:function(e,t,a,l,n){var i;return" "+(null!=(i=a.ifAnyMatch.call(null!=t?t:{},null!=t?t.EMAIL:t,"!=","",null!=t?t.ADDN_EMAIL:t,"!=","",{name:"ifAnyMatch",hash:{},fn:e.program(42,n,0),inverse:e.noop,data:n}))?i:"")+" "},42:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return' <option value="'+r(a.encodeForHTMLAttribute.call(i,null!=t?t.entityId:t,{name:"encodeForHTMLAttribute",hash:{},data:n}))+'" email="'+r(a.getCommaSeperatedStr.call(i,null!=t?t.EMAIL:t,null!=t?t.ADDN_EMAIL:t,{name:"getCommaSeperatedStr",hash:{},data:n}))+'">'+r(a.encodeForHtml.call(i,null!=t?t.entityName:t,{name:"encodeForHtml",hash:{},data:n}))+"</option> "},44:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.showSelectBox:s,{name:"if",hash:{},fn:e.program(45,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},45:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.imapAccessible:s,{name:"if",hash:{},fn:e.program(46,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},46:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.module:s,"Potentials",{name:"ifEquals",hash:{},fn:e.program(47,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},47:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression;return" <span class=\"newSelect mB5 mR20\"> <select class='select' data-zcqa='dealOnlyDropDown' name='dealOnlyDropDown' id=\"dealOnlyDropDown\" onchange=\"EntityEmail.changeEmailsViewForDeals(this);sE(event);\"> <option value='dealsOnly' selected>"+d(a.getModule.call(o,"crm.relatedList.deals.ddown.deal","Potentials",{name:"getModule",hash:{},data:n}))+"</option> <option value='"+d(e.lambda(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.entIdForZMail:s,t))+"'>"+d(a.getModule.call(o,"crm.relatedList.deals.ddown.contact","Contacts",{name:"getModule",hash:{},data:n}))+"</option> </select> </span> "},49:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression;return' <input type="hidden" id="isALLOptOnly" value="'+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.isALLOptOnly:s,t))+'" /> <input type="hidden" id="isMailAppsFlow" value="'+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.isMailAppsFlow:s,t))+'" /> '},51:function(e,t,a,l,n){return' <input type="hidden" id="isALLOptOnly" value="true" /> '},53:function(e,t,a,l,n){return" <option value='DRAFTS'>"+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.email.drafts",{name:"getI18n",hash:{},data:n}))+"</option> "},55:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.isMailAppsFlow:s,{name:"if",hash:{},fn:e.program(56,n,0,i,r),inverse:e.program(63,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.each.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.usersArray:s,{name:"each",hash:{},fn:e.program(65,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" </select> </span> "},56:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.isALLOptOnly:s,{name:"if",hash:{},fn:e.program(57,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.isAllImapPresent:s,{name:"if",hash:{},fn:e.program(59,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.if.call(o,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.isAllPopPresent:s,{name:"if",hash:{},fn:e.program(61,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},57:function(e,t,a,l,n,i,r){var s;return" <option value='ALL_MAIL_VIEW' selected>"+e.escapeExpression(e.lambda(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.ALL_MAIL_VIEW:s,t))+"</option> "},59:function(e,t,a,l,n,i,r){var s;return" <option value='IMAP_ALL' selected>"+e.escapeExpression(e.lambda(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.IMAP_ALL:s,t))+"</option> "},61:function(e,t,a,l,n,i,r){var s;return" <option value='POP_ALL' selected>"+e.escapeExpression(e.lambda(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.POP_ALL:s,t))+"</option> "},63:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.if.call(null!=t?t:{},null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.imapAccessible:s,{name:"if",hash:{},fn:e.program(59,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},65:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.optGroup:t,{name:"if",hash:{},fn:e.program(66,n,0),inverse:e.noop,data:n}))?i:"")+" "},66:function(e,t,a,l,n){var i,r=e.lambda,s=e.escapeExpression;return' <optgroup style="border: medium none ;" class="select" type="'+s(r(null!=t?t.optGroupType:t,t))+'" label="'+s(r(null!=t?t.optGroupLabel:t,t))+'" id="'+s(r(null!=t?t.optGroupId:t,t))+'"> '+(null!=(i=a.each.call(null!=t?t:{},null!=t?t.optGroupArr:t,{name:"each",hash:{},fn:e.program(67,n,0),inverse:e.noop,data:n}))?i:"")+" </optgroup> "},67:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression;return" <option value='"+r(a.getSplitValues.call(i,t,";","0",{name:"getSplitValues",hash:{},data:n}))+"_"+r(a.getSplitValues.call(i,t,";","1",{name:"getSplitValues",hash:{},data:n}))+"' "+r(a.getSplitValues.call(i,t,";","2",{name:"getSplitValues",hash:{},data:n}))+">"+r(a.getSplitValues.call(i,t,";","1",{name:"getSplitValues",hash:{},data:n}))+"</option> "},69:function(e,t,a,l,n){return" </select> </span> "},71:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifNotInventoryModule.call(null!=t?t:{},null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.module:s,{name:"ifNotInventoryModule",hash:{},fn:e.program(72,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},72:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.unless.call(null!=t?t:{},null!=r[1]?r[1].hideSendMailBtn:r[1],{name:"unless",hash:{},fn:e.program(73,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "},73:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression,c=null!=t?t:{};return' <a id="sendEntityMailLink" name="mail" data-zcqa="'+d(o(null!=t?t.zcqa:t,t))+'" class="'+d(a.getClassNames.call(c,null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" href="javascript:;" onclick="javascript:EntSendMail(\''+d(a.encodeJS.call(c,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.module:s,{name:"encodeJS",hash:{},data:n}))+"','"+d(o(null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.entityId:s,t))+"','','"+d(a.encodeJS.call(c,null!=(s=null!=r[1]?r[1].mailObj:r[1])?s.singularMod:s,{name:"encodeJS",hash:{},data:n}))+"');\">"+d(a.getI18n.call(c,"crm.button.license.sendMail",{name:"getI18n",hash:{},data:n}))+"</a> "},75:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["data-cid"]:t,"createsurvey",{name:"ifEquals",hash:{},fn:e.program(76,n,0,i,r),inverse:e.program(78,n,0,i,r),data:n}))?s:"")+" "},76:function(e,t,a,l,n){var i=e.escapeExpression,r=e.lambda;return' <a href="'+i(a.getUrl.call(null!=t?t:{},null!=t?t.URL:t,{name:"getUrl",hash:{},data:n}))+'" data-zcqa="'+i(r(null!=t?t["data-cid"]:t,t))+'" target="_blank" name="newsurveybutton" id="newsurveybutton1" class="tb_newsmallbtn" >'+i(r(null!=t?t.label:t,t))+"</a> "},78:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=r[1]?r[1].name:r[1],"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(79,n,0,i,r),inverse:e.program(81,n,0,i,r),data:n}))?s:"")+" "},79:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <li class="p0"><a href="javascript:void(0);" class="crmBaseColor p10 dB dummyForLeftPanel" data-zcqa="'+o(s(null!=t?t.zcqa:t,t))+'" data-cid="'+o(s(null!=t?t["data-cid"]:t,t))+'" data-relId="'+o(s(null!=r[1]?r[1].rid:r[1],t))+'" data-fromsrc="'+o(s(null!=r[1]?r[1].fromSrc:r[1],t))+'"><span class="'+o(s(null!=t?t.classForLeftPanel:t,t))+'"></span>'+o(s(null!=t?t.label:t,t))+"</a></li> "},81:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=r[1]?r[1].name:r[1],"CONTACTSROLESPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(82,n,0,i,r),inverse:e.program(84,n,0,i,r),data:n}))?s:"")+" "},82:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <link-to data-zcqa="'+o(s(null!=t?t.zcqa:t,t))+"\" lt-prop-aria-attributes=\"{'role' : 'button' , 'lt-prop-aria-keydown' : 'true'}\"lt-prop-qp='{\"returnAnchor\" :\"contactsrolespersonality_"+o(s(null!=r[1]?r[1].rid:r[1],t))+'", "accId" : "'+o(s(null!=t?t.accId:t,t))+'"}\' lt-prop-class="'+o(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" lt-prop-route="crm.tab.module.entity.add-contact-role" lt-prop-dp=\'["Potentials","'+o(s(null!=r[1]?r[1].entityId:r[1],t))+"\"]'>"+o(s(null!=t?t.label:t,t))+"</link-to> "},84:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["data-cid"]:t,"showMembersListView",{name:"ifEquals",hash:{},fn:e.program(24,n,0,i,r),inverse:e.program(85,n,0,i,r),data:n}))?s:"")+" "},85:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["data-cid"]:t,"unEnrollSeries",{name:"ifEquals",hash:{},fn:e.program(86,n,0,i,r),inverse:e.program(88,n,0,i,r),data:n}))?s:"")+" "},86:function(e,t,a,l,n,i,r){var s=e.escapeExpression,o=e.lambda;return' <a id="seriesUnenroll" class="'+s(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+' hide" href="javascript:void(0);" data-zcqa="'+s(o(null!=t?t["data-cid"]:t,t))+'" data-cid="'+s(o(null!=t?t["data-cid"]:t,t))+'" data-relId="'+s(o(null!=r[1]?r[1].rid:r[1],t))+'">'+s(o(null!=t?t.label:t,t))+"</a> "},88:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["data-cid"]:t,"addSeries",{name:"ifEquals",hash:{},fn:e.program(89,n,0,i,r),inverse:e.program(91,n,0,i,r),data:n}))?s:"")+" "},89:function(e,t,a,l,n,i,r){var s=e.escapeExpression,o=e.lambda;return' <a id="addToseries" tabindex="0" class="'+s(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" href="javascript:void(0);" data-zcqa="'+s(o(null!=t?t["data-cid"]:t,t))+'" data-cid="'+s(o(null!=t?t["data-cid"]:t,t))+'" data-relId="'+s(o(null!=r[1]?r[1].rid:r[1],t))+'">'+s(o(null!=t?t.label:t,t))+"</a> "},91:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifAnyMatch.call(null!=t?t:{},null!=t?t["data-cid"]:t,"=","sendsurvey",null!=t?t["data-cid"]:t,"=","attendsurvey",{name:"ifAnyMatch",hash:{},fn:e.program(92,n,0,i,r),inverse:e.program(94,n,0,i,r),data:n}))?s:"")+" "},92:function(e,t,a,l,n,i,r){var s=e.escapeExpression,o=e.lambda;return' <a class="'+s(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" tabindex="0" role="button" aria-label="'+s(o(null!=t?t.label:t,t))+'" lt-prop-aria-keydown="true" href="javascript:void(0);" data-zcqa="'+s(o(null!=t?t["data-cid"]:t,t))+'" data-cid="'+s(o(null!=t?t["data-cid"]:t,t))+'" data-relId="'+s(o(null!=r[1]?r[1].rid:r[1],t))+'">'+s(o(null!=t?t.label:t,t))+"</a> "},94:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.isPartOf.call(null!=t?t:{},"updateCampaignStatus,sendMailToMembers,addToCampaigns,newCampaignWithMembers",null!=t?t["data-cid"]:t,{name:"isPartOf",hash:{},fn:e.program(95,n,0,i,r),inverse:e.program(100,n,0,i,r),data:n}))?s:"")+" "},95:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["data-cid"]:t,"newCampaignWithMembers",{name:"ifEquals",hash:{},fn:e.program(96,n,0,i,r),inverse:e.program(98,n,0,i,r),data:n}))?s:"")+" "},96:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <a class="dN onCheckRLActions" onclick="CustomView.showCampSubMenu(this, \'detailQuickCreate\')" href="javascript:void(0);" data-zcqa="'+o(s(null!=t?t.zcqa:t,t))+'" data-relId="'+o(s(null!=r[1]?r[1].rid:r[1],t))+'">'+o(s(null!=t?t.label:t,t))+"</a> "},98:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <a class="dN onCheckRLActions" href="javascript:void(0);" data-zcqa="'+o(s(null!=t?t.zcqa:t,t))+'" data-cid="'+o(s(null!=t?t["data-cid"]:t,t))+'" data-relId="'+o(s(null!=r[1]?r[1].rid:r[1],t))+'">'+o(s(null!=t?t.label:t,t))+"</a> "},100:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["data-cid"]:t,"newChildCampaign",{name:"ifEquals",hash:{},fn:e.program(101,n,0,i,r),inverse:e.program(104,n,0,i,r),data:n}))?s:"")+" "},101:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression,c=e.lambda;return' <a class="'+d(a.getClassNames.call(o,null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" tabindex="0" role="button" aria-label="'+d(c(null!=t?t.label:t,t))+'" lt-prop-aria-keydown="true" href="javascript:void(0);" data-zcqa="'+d(c(null!=t?t.zcqa:t,t))+'" onclick="CustomView.showCampSubMenu(this, \'detailCreate\')" data-relId="'+d(c(null!=r[1]?r[1].rid:r[1],t))+'" '+(null!=(s=a.isNotUndefined.call(o,null!=t?t.tooltip:t,{name:"isNotUndefined",hash:{},fn:e.program(102,n,0,i,r),inverse:e.noop,data:n}))?s:"")+">"+d(c(null!=t?t.label:t,t))+"</a> "},102:function(e,t,a,l,n){return" onmouseenter=\"crmui.showTooltip('"+e.escapeExpression(a.encodeJS.call(null!=t?t:{},null!=t?t.tooltip:t,{name:"encodeJS",hash:{},data:n}))+'\')" onmouseleave="crmui.hideTooltip();" '},104:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["action-id"]:t,"sendMailToMembers",{name:"ifEquals",hash:{},fn:e.program(105,n,0,i,r),inverse:e.program(108,n,0,i,r),data:n}))?s:"")+" "},105:function(e,t,a,l,n,i,r){var s,o=e.lambda,d=e.escapeExpression,c=null!=t?t:{};return' <a class="'+d(o(null!=t?t.classForLeftPanel:t,t))+" "+(null!=(s=a.isNotUndefined.call(c,null!=t?t.showOnMemberSelect:t,{name:"isNotUndefined",hash:{},fn:e.program(106,n,0,i,r),inverse:e.noop,data:n}))?s:"")+'" href="javascript:void(0);" data-zcqa="'+d(o(null!=t?t.zcqa:t,t))+'" data-relId="'+d(o(null!=r[1]?r[1].rid:r[1],t))+'" '+(null!=(s=a.isNotUndefined.call(c,null!=t?t.tooltip:t,{name:"isNotUndefined",hash:{},fn:e.program(102,n,0,i,r),inverse:e.noop,data:n}))?s:"")+">"+d(o(null!=t?t.label:t,t))+"</a> "},106:function(e,t,a,l,n){return" dN onCheckRLActions "},108:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=t?t["data-cid"]:t,"newTaskPopup",{name:"ifEquals",hash:{},fn:e.program(109,n,0,i,r),inverse:e.program(111,n,0,i,r),data:n}))?s:"")+" "},109:function(e,t,a,l,n,i,r){var s=e.escapeExpression,o=e.lambda;return' <a class="'+s(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" tabindex="0" role="button" aria-label="'+s(o(null!=t?t.label:t,t))+'" lt-prop-aria-keydown="true" href= "javascript:void(0);" onclick="crmRelatedList.relTaskCreate(this)" data-zcqa="'+s(o(null!=t?t.zcqa:t,t))+'"  data-relId="'+s(o(null!=r[1]?r[1].rid:r[1],t))+'" id="newTaskPopup">'+s(o(null!=t?t.label:t,t))+"</a> "},111:function(e,t,a,l,n,i,r){var s;return" "+(null!=(s=a.ifEquals.call(null!=t?t:{},null!=r[1]?r[1].name:r[1],"CALENDARBOOKINGSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(112,n,0,i,r),inverse:e.program(114,n,0,i,r),data:n}))?s:"")+" "},112:function(e,t,a,l,n,i,r){var s=e.lambda,o=e.escapeExpression;return' <link-to data-zcqa="createAppointment" data-cid="'+o(s(null!=t?t["data-cid"]:t,t))+'" data-relId="'+o(s(null!=r[1]?r[1].rid:r[1],t))+'" lt-prop-qp=\'{"type" :"team", "module" : "Appointments__s"}\' lt-prop-class="'+o(a.getClassNames.call(null!=t?t:{},null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" lt-prop-route="crm.settings.section.calendar-booking.create-calendar-booking" lt-prop-td=\'{"from": "serviceRelatedList", "serviceId": "'+o(s(null!=r[1]?r[1].entityId:r[1],t))+"\"}'>"+o(s(null!=t?t.label:t,t))+"</link-to> "},114:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{},d=e.escapeExpression,c=e.lambda;return' <a class="'+d(a.getClassNames.call(o,null!=t?t.classForLeftPanel:t,{name:"getClassNames",hash:{},data:n}))+'" tabindex="0" role="button" aria-label="'+d(c(null!=t?t.label:t,t))+'" lt-prop-aria-keydown="true" href="javascript:void(0);" data-zcqa="'+d(c(null!=t?t.zcqa:t,t))+'" data-cid="'+d(c(null!=t?t["data-cid"]:t,t))+'" data-relId="'+d(c(null!=r[1]?r[1].rid:r[1],t))+'" '+(null!=(s=a.isNotUndefined.call(o,null!=t?t.tooltip:t,{name:"isNotUndefined",hash:{},fn:e.program(102,n,0,i,r),inverse:e.noop,data:n}))?s:"")+">"+d(c(null!=t?t.label:t,t))+"</a> "},116:function(e,t,a,l,n){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.filtersAvailable:t,{name:"if",hash:{},fn:e.program(117,n,0),inverse:e.noop,data:n}))?i:"")+" "},117:function(e,t,a,l,n){var i=null!=t?t:{},r=e.escapeExpression,s=e.lambda;return' <span data-zcqa="filterIcon_'+r(a.getRelatedListLabel.call(i,null!=t?t.rid:t,{name:"getRelatedListLabel",hash:{},data:n}))+'" lt-prop-aria-keydown="true" role="button" tabindex="0" aria-controls="filters_'+r(s(null!=t?t.rid:t,t))+'" lt-prop-title="'+r(a.getI18n.call(i,"crm.accessibility.filter.campaign",{name:"getI18n",hash:{},data:n}))+'" aria-label="'+r(a.getI18n.call(i,"crm.accessibility.filter.campaign",{name:"getI18n",hash:{},data:n}))+'" id="filterIcon_'+r(s(null!=t?t.rid:t,t))+'" class="zWebSITableFilterDiv cP dIB vaM mL5 pR" data-cid="showHideFilter" data-params=\'{"rid" : "'+r(s(null!=t?t.rid:t,t))+'"}\'><span class="zWebSITableFilter svgIcons pA"></span></span> '},119:function(e,t,a,l,n){var i;return" "+(null!=(i=a.isNotEmpty.call(null!=t?t:{},null!=t?t.actions:t,{name:"isNotEmpty",hash:{},fn:e.program(120,n,0),inverse:e.noop,data:n}))?i:"")+" "},120:function(e,t,a,l,n){return" </ul> </div> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n,i,r){var s,o=null!=t?t:{};return" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(1,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.each.call(o,null!=t?t.actions:t,{name:"each",hash:{},fn:e.program(7,n,0,i,r),inverse:e.noop,data:n}))?s:"")+" "+(null!=(s=a.showNoRecords.call(o,t,{name:"showNoRecords",hash:{},fn:e.program(15,n,0,i,r),inverse:e.program(116,n,0,i,r),data:n}))?s:"")+" "+(null!=(s=a.ifEquals.call(o,null!=t?t.name:t,"ATTACHMENTSPERSONALITY",{name:"ifEquals",hash:{},fn:e.program(119,n,0,i,r),inverse:e.noop,data:n}))?s:"")},useData:!0,useDepths:!0})}();