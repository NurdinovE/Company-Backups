Lyte.Mixin.register("crm-menu-utils",{changemenu:function(e){var t={dynamicParams:[],queryParams:{}};if("Approvals"==e)Lyte.Router.getRouteInstance().transitionTo("crm.tab.approvals.index");else{var r,n=moduleRecordMapping[e];if(n.custom_view&&n.custom_view.id&&"Home"!=n.api_name&&"Forecasts"!=n.api_name){n.kanban_view?t.route="crm.tab.module.custom-view.kanban":n.canvas_view?t.route="crm.tab.module.custom-view.canvas":t.route="crm.tab.module.custom-view.list",t.dynamicParams.push(e),t.dynamicParams.push(n.custom_view.id),n.viewid&&t.dynamicParams.push(n.viewid);var o=crmTab.getFromCache(e);o&&o.filters&&(t.queryParams={filters:JSON.stringify(o.filters)},o.filterId&&(t.queryParams.filter_id=o.filterId)),t.data={clearselectedIds:!0}}else if("Home"==n.api_name)t.route="crm.tab.module.begin",t.dynamicParams.push(e);else if("Google_AdWords"==n.api_name&&"crm.tab.google-adwords"!=Lyte.Router.getRouteInstance().transition.info.route)t.route="crm.tab.google-adwords";else if("Projects"==n.api_name&&"crm.tab.projects"!=Lyte.Router.getRouteInstance().transition.info.route)t.route="crm.tab.projects";else if("Marketplace"==n.api_name)t.route="crm.tab.marketplace";else if("Dashboards"==n.api_name)t.route=newDashbordsEnabled?"crm.tab.newDashboards.index":"crm.tab.dashboards.index";else if("Google AdWords"==n.api_name)t.route="crm.tab.google-adwords";else if("Forecasts"==n.api_name)t.route=newForecastsEnabled?"crm.tab.newForecasts.index":"crm.tab.forecasts.index";else if("Reports"==n.api_name)t.route="crm.tab.newReports";else if("Messages"===n.api_name)t.route="crm.tab.messages";else if("Approvals"==n.api_name)t.route="crm.tab.approvals.index";else{if("SalesInbox"==n.api_name&&crmTab.isMailClientActive)return void("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?window.open(RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty("CRMURL")+networkUtils.getOrgSpecificURL(Urls.Salesinbox)):window.location=window.location.origin+networkUtils.getOrgSpecificURL(Urls.Salesinbox));if("SalesInbox"==n.api_name&&crmTab.isMailClientActive)return void("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?window.open(RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty("CRMURL")+networkUtils.getOrgSpecificURL(Urls.Salesinbox)):window.location=crmHistory.locationOrigin+networkUtils.getOrgSpecificURL(Urls.Salesinbox));t.route="crm.tab.module.index-module",t.dynamicParams.push(e)}Crm.checkIfSameRoute(Lyte.Router.getRouteInstance().transition.info,t)?r=Lyte.Router.getRouteInstance().refresh():(customViewObject&&customViewObject.module==n.api_name&&customViewObject.filters&&!t.queryParams.filters&&(t.queryParams.filters=JSON.stringify(customViewObject.filters)),r=Lyte.Router.transitionTo(t)),t.data&&(r.data=t.data,delete t.data)}},checkParamsAndTransition:function(e,t,r){var n={dynamicParams:[t||e.module_name,e.custom_view.id],queryParams:{},route:"crm.tab.module.custom-view.list"};return e.kanban_view?n.route="crm.tab.module.custom-view.kanban":e.canvas_view&&e.viewid&&0!=e.customized_view?(n.route="crm.tab.module.custom-view.canvas",n.dynamicParams.push(e.viewid),n.queryParams.viewType="CustomizedView"):e.card_view&&e.cardid&&!1!==e.customized_view?(n.route="crm.tab.module.custom-view.canvas",n.dynamicParams.push(e.cardid),n.queryParams.viewType="CardView"):e.table_view&&e.tableid&&!1!==e.customized_view?(n.route="crm.tab.module.custom-view.canvas",n.dynamicParams.push(e.tableid),n.queryParams.viewType="TableView"):e.chart_view?n.route="crm.tab.module.custom-view.chart":e.timeline_view?n.route="crm.tab.module.custom-view.timeline":e.zia_view&&(n.route="crm.tab.module.custom-view.zia"),r&&((r.filter_id||r.filterId)&&(n.queryParams.filter_id=r.filter_id?r.filter_id:r.filterId),r.filters&&(n.queryParams.filters=JSON.stringify(r.filters)),r.cross_filters&&(n.queryParams.cross_filters=JSON.stringify(r.cross_filters)),e.kanban_view&&r.layoutId&&!Crm.userDetails.isMultipleKanbanViewsEnabled&&(n.queryParams.layout_id=r.layoutId),e.kanban_view&&r.pipeline&&!Crm.userDetails.isMultipleKanbanViewsEnabled&&(n.queryParams.pipeline=r.pipeline)),n},changeTab:async function(e,t,r){var n=e.getData("previouslySelectedModule");if(-1!==["Home","Leads","Contacts","Accounts","Potentials","Activities","Reports","Dashboards","Projects","Marketplace","settings"].indexOf(t)){var o=t;"Projects"===o&&"undefined"!=typeof crmTab&&crmTab.needPseudoProjectsTab&&(o="Projects Marketing Tab"),n!==t&&(Crm.trackSpotLightAction(o+" Tab Clicked"),Crm.client_tracking(o+" Tab Clicked"),e.setData("previouslySelectedModule",t))}if(r&&e.persistUserViewPreference(t),"false"===RebrandLinkUtil.getProperties("IS_LOCAL_ZOHO").IS_LOCAL_ZOHO&&"false"===RebrandLinkUtil.getProperties("ISDEVELOPMENT").ISDEVELOPMENT&&"US"===RebrandLinkUtil.getProperties("DeploymentLocation").DeploymentLocation&&Crm.userDetails&&"A"!==Crm.userDetails.LICENSE_TYPE_ACTUAL&&"A"===Crm.userDetails.LICENSE_TYPE){var i=$L.moment().toDate();if(Crm.userDetails.ORG_CREATED_TIME>i.getTime()-2592e6){var a,s,l=["Leads","Contacts","Accounts","Potentials"].indexOf(t);if(-1!==l&&n!==t)switch(l){case 0:a=RebrandLinkUtil.getProperties("PF_ACCESSED_LEADS").PF_ACCESSED_LEADS,s=RebrandLinkUtil.getProperties("PF_ACCESSED_LEADS_ID").PF_ACCESSED_LEADS_ID;break;case 1:a=RebrandLinkUtil.getProperties("PF_ACCESSED_CONTACTS").PF_ACCESSED_CONTACTS,s=RebrandLinkUtil.getProperties("PF_ACCESSED_CONTACTS_ID").PF_ACCESSED_CONTACTS_ID;break;case 2:a=RebrandLinkUtil.getProperties("PF_ACCESSED_ACCCOUNTS").PF_ACCESSED_ACCCOUNTS,s=RebrandLinkUtil.getProperties("PF_ACCESSED_ACCCOUNTS_ID").PF_ACCESSED_ACCCOUNTS_ID;break;case 3:a=RebrandLinkUtil.getProperties("PF_ACCESSED_DEALS").PF_ACCESSED_DEALS,s=RebrandLinkUtil.getProperties("PF_ACCESSED_DEALS_ID").PF_ACCESSED_DEALS_ID}else n!==t&&(a=RebrandLinkUtil.getProperties("PF_OTHER_MODULE_ACCESS").PF_OTHER_MODULE_ACCESS,s=RebrandLinkUtil.getProperties("PF_OTHER_MODULE_ACCESS_ID").PF_OTHER_MODULE_ACCESS_ID);a&&(a===RebrandLinkUtil.getProperties("PF_OTHER_MODULE_ACCESS").PF_OTHER_MODULE_ACCESS?gS.trackOnboardUsingPF(a,s,t):gS.trackOnboardUsingPF(a,s))}}var u=Lyte.Router.getRouteInstance();if("SalesInbox"===t&&crmTab.isMailClientActive)"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?networkUtils.openUrl(RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty("CRMURL")+networkUtils.getOrgSpecificURL(Urls.Salesinbox)):window.location=window.location.origin+networkUtils.getOrgSpecificURL(Urls.Salesinbox);else if("Social"===t)"social"===Lyte.Router.getRouteInstance().routeName||Lyte.Router.getRouteInstance().parent&&"social"===Lyte.Router.getRouteInstance().parent.routeName?(Lyte.Router.getRouteInstance().transitionTo("crm.tab.social"),document.getElementById("socialTabNew").openTab("dashboard")):Lyte.Router.getRouteInstance().transitionTo("crm.tab.social");else{if("ABM"===t){if(!crmTab.isABMAvailable)return void renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"));var m="/crm/"+crmPortal+"/abm/connect";return crmTab.isABMConfigured&&(m="/crm/"+crmPortal+"/abm/home"),void("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?Lyte.Router.transitionTo("crm.tab.module.index-module","ABM",{}):window.location=window.location.origin+m)}var c,p=moduleRecordMapping[t];if("Orchestration"===t)if(Crm.userDetails.CC_SERVICE_ENABLED)Lyte.Router.getRouteInstance().transitionTo("crm.tab.commandcenter.index-commandcenter");else if(!crmTab.isABMCCAvailable||!crmTab.isABMConfigured||store.peekAll("orchestration_process")&&store.peekAll("orchestration_process").length)if(moduleRecordMapping[t].orchestrationModule&&!Lyte.registeredMixins.orchestration.isAbmOrchestration(moduleRecordMapping[moduleRecordMapping[t].orchestrationModule].id,store.peekAll("orchestration_process")))c=moduleRecordMapping[t].orchestrationModule,p=moduleRecordMapping[c];else{var d=Lyte.registeredMixins.orchestration.fetchOrchestrationChildModules().sort((function(e,t){return e.sequence_number-t.sequence_number}));crmTab.isABMConfigured&&(d=Lyte.registeredMixins.orchestration.filterOutAbmOrchestrations(d)),d.length>0&&(c=d[0].module_name,p=moduleRecordMapping[c],moduleRecordMapping[t].orchestrationModule=c)}else try{Crm.userDetails.permissions.Crm_Implied_Manage_ABM?await store.findAll("orchestration_process",{category:"abm"}):Crm.userDetails.permissions.Crm_Implied_Manage_Workflow&&await store.findAll("orchestration_process")}catch(e){murphy.error(e)}var g,f=this.getRouteForModule(t,c);!Crm.checkIfSameRoute(u.transition.info,f)||"chart"===u.routeName||200!==u.transition.state&&308!==u.transition.state?(p&&customViewObject&&customViewObject.module===p.module_name&&!customViewObject.isForecast&&(customViewObject.filter_id&&!f.queryParams.filter_id?f.queryParams.filter_id=customViewObject.filter_id:app.prevTransition.route&&-1===app.prevTransition.route.indexOf("settings")&&(customViewObject&&customViewObject.filters&&!f.queryParams.filters&&(f.queryParams.filters=JSON.stringify(customViewObject.filters)),customViewObject&&customViewObject.cross_filters&&!f.queryParams.cross_filters&&(f.queryParams.cross_filters=JSON.stringify(customViewObject.cross_filters))),f.queryParams.page=-1===f.route.indexOf("chart")?1:void 0),g=Lyte.Router.transitionTo(f)):u.transition.target.indexOf("custom-view")>-1?(g=u.refresh({refreshTemplate:!0}),f.data?f.data.refreshTemplate=!0:f.data={refreshTemplate:!0},f.queryParams.page=1):g=u.refresh(),f.data&&g&&(-1===crmConstants.cachedModules.indexOf(t)&&(f.data.reloadAll=!0),g.data=f.data,delete f.data)}},getRouteForModule:function(e,t){var r={dynamicParams:[],queryParams:{}},n=moduleRecordMapping[e];if("Approvals"===e)r.route="crm.tab.approvals.index";else if("Voice Of Customer"===e||"Voice of the Customer"===e)crmTab&&crmTab.showVocPromoTab?r.route="crm.tab.voc.promo":r.route="crm.tab.voc.analytics";else if("Projects"===e)r.route="crm.tab.projects";else if("Dashboards"===e){if(r.route="crm.tab.dashboards.index",newDashbordsEnabled)r.route="crm.tab.newDashboards.index.view",(o=Lyte.Router.getRouteInstance()?Lyte.Router.getRouteInstance().transition.info:null)&&o.route===r.route?(r.queryParams=o.queryParams,r.dynamicParams.push(o.dynamicParams[0]),r.data={refreshTemplate:!0}):r.route="crm.tab.newDashboards.index"}else if("Messages"===e){var o;r.route="crm.tab.messages.custom-view.list",(o=Lyte.Router.getRouteInstance()?Lyte.Router.getRouteInstance().transition.info:null)&&o.route===r.route?(r.queryParams=o.queryParams,r.dynamicParams=o.dynamicParams):r.route="crm.tab.messages"}else if("Google AdWords"===e)r.route="crm.tab.google-adwords";else if("Forecasts"===e)r.route=newForecastsEnabled?"crm.tab.newForecasts.index":"crm.tab.forecasts.index",newForecastsEnabled&&(r.data={reloadAll:!0});else if("Reports"===e)r.route="crm.tab.newReports.index",n.query_params&&(r.route="crm.tab.newReports.index.list",r.queryParams=n.query_params,n.query_params.category&&"scheduled"===n.query_params.category&&(r.route="crm.tab.newReports.index.schedule.list",r.queryParams={status:"active"}));else if(n&&"Home"===n.api_name)r.route="crm.tab.module.begin",r.dynamicParams.push(e);else if("Marketplace"===e)r.route="crm.tab.marketplace";else if(Crm.userDetails.CC_SERVICE_ENABLED&&"Orchestration"===e)r.route="crm.tab.commandcenter.index-commandcenter";else if(n&&n.custom_view&&n.custom_view.id&&"Home"!==n.api_name)if("Visits"===e&&"undefined"==typeof CrmTracking)r.route="crm.tab.module.index-module",r.dynamicParams.push(e);else{r=this.checkParamsAndTransition(n,t||e,crmTab.getFromCache(e));var i=app.prevTransition;i&&i.route===r.route&&i.dynamicParams[1]!==n.custom_view.id&&(n.start_index=void 0),r.data={clearselectedIds:!0},Lyte.Router.getRouteInstance()&&Lyte.Router.getRouteInstance().transition.target.indexOf("crm.settings.section.custom-view")>-1&&store.model[n.id]&&store.unloadAll(n.id)}else r.route="crm.tab.module.index-module",r.dynamicParams.push(e);return r},persistUserViewPreference(e,t){var r=!0,n=document.querySelector("crm-left-menu").component,o=["SalesInbox","Projects","ABM"];if(crmTab&&crmTab.requiredPromoTabs&&Crm.userDetails.SERVICES_PROMO_VISIBILITY){var i=Object.keys(crmTab.requiredPromoTabs);Lyte.arrayUtils(o,"push",i)}if(!o.contains(e)){var a=n.getData("prevSelectedMenu"),s="modules",l={};if("Reports"!==e&&"Dashboards"!==e&&"Marketplace"!==e&&"Requesters"!==e&&"settings"!==e||(s=e,"Marketplace"!==e&&a&&a.toLowerCase()===s.toLowerCase()&&(r=!1)),"modules"===s){var u=n.getData("lastAccessedModule"),m=moduleRecordMapping[e];if(m){if(a)var c="modules"!==a&&(!u||u.api_name===m.api_name),p="modules"===a&&(!u||u.api_name!==m.api_name),d="modules"!==a&&(!u||u.api_name!==m.api_name);else var g=!u||u.api_name!==m.api_name;if(c||p||d||g){var f={};f.api_name=m.api_name,f.id=m.id,l.last_accessed_module=f,n.setData("lastAccessedModule",f)}else r=!1}}else if("Marketplace"===s){var C=n.getData("lastAccessedMarketplace");a&&"marketplace"===a.toLowerCase()&&C&&C.menu.api_name===t.menu.api_name?r=!1:(l.last_accessed_component=t,n.setData("lastAccessedMarketplace",t))}else"Requesters"===s&&(l.last_accessed_requester_module=t,n.setData("lastAccessedRequesterModule",t));if(r){l.last_accessed_menu=s.toLowerCase();var y={user_view_preference:l};networkUtils.lyteInitiateRequest("/crm/v5/settings/user_view_preference","PUT",{params:JSON.stringify(y),skip_load_tab:!0})}}},addABMEventListener:function(){var e=window.addEventListener?"addEventListener":"attachEvent",t="addEventListener"===e?"message":"onmessage";window[e](t,(function(e){var t,r,n;if(e.origin===window.location.origin)switch((r=JSON.parse(e.data)).action){case"handshake":n={action:"initialAck",isLoadedInCrmPlus:isLoadedInCRMPlusIFrame()},"undefined"!=typeof CrmPlusLib&&CrmPlusLib.getFrameOriginForURL&&(n.frameOrigin=CrmPlusLib.getFrameOriginForURL()),$L("#abmFrame")[0].contentWindow.postMessage(JSON.stringify(n),window.location.origin);break;case"urlReplace":(t=r.url)&&(window.history.replaceState({},"",Lyte.registeredMixins["crm-menu-utils"].removeQueryParams(t)),crmplusImplTriggerActions("notifyURLReplace"));break;case"setLoading":crmplusImplTriggerActions(r.toggleLoading)}}))},getABMUrl:function(){var e=window.location.origin+window.location.pathname;return window.location.pathname.startsWith("/crm/"+crmPortal+"/abm/")||(e=window.location.origin+"/crm/"+crmPortal+"/abm/home"),crmTab.isABMConfigured||(e=window.location.origin+"/crm/"+crmPortal+"/abm/connect"),"undefined"!=typeof CrmPlusLib&&CrmPlusLib.getFrameOriginForURL&&(e+="?frameorigin="+CrmPlusLib.getFrameOriginForURL()),e},removeQueryParams:function(e){return e.includes("?")?e.split("?")[0]:e},onTeamModuleClick:function(){var e=document.querySelector("crm-create-module-modal");if(e&&e.component)e.component.showTeamModulePop();else{let e=networkUtils.returnDependencyFiles(["crm-privatemodule-components.js","crm-module-element.js"],ResourceConstants.CRMClient);e=e.concat(networkUtils.returnDependencyFiles(["crm-privatemodule-components.css","crm-module-element.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT)),Crm.userDetails.RTL_ENABLED&&(e=e.concat(networkUtils.returnDependencyFiles(["crm-teammodule-rtl.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT))),Lyte.injectResources(e).then((function(){$L("crm-create-module-modal")[0].component.showTeamModulePop()}))}}}),Lyte.Component.registerHelper("getI18n",(function(){var e=arguments.length;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],r=[],n=1;n<e;n++)r.push(arguments[n]);var o=I18n.getMsg(t,I18n.getMsg(r));return o=o?o.replace("''","'"):o})),Lyte.Component.registerHelper("convertToNumber",(function(e){return""===e.trim()?NaN:Number(e)})),Lyte.Component.registerHelper("roundToInteger",(function(e){return"number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&""===e.trim()?NaN:Math.round(Number(e))})),Lyte.Component.registerHelper("containsObject",(function(e,t,r){for(var n=e.length,o=0;o<n;o++)if(e[o][r]===t)return!0;return!1})),Lyte.Component.registerHelper("getI18nwithoutParamI18n",(function(){var e=arguments.length;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],r=[],n=1;n<e;n++)r.push(arguments[n]);return I18n.getMsg(t,r)})),Lyte.Component.registerHelper("I18nDynamicKey",(function(e,t){for(var r=[],n=2;n<arguments.length;n++)r.push(arguments[n]);var o=I18n.getMsg(e+t,r);return o})),Lyte.Component.registerHelper("encodeForHTMLAttribute",(function(e){return $ESAPI.encoder().encodeForHTMLAttribute(e)})),Lyte.Component.registerHelper("stringJoin",(function(){for(var e=arguments.length,t="",r=0;r<e;r++)arguments[r]&&""!==arguments[r]&&(t=""===t?arguments[r]:t+","+arguments[r]);return t})),Lyte.Component.registerHelper("capitalize",(function(e){return"delivered"==e&&(e="sent"),e[0].toUpperCase()+e.slice(1)})),Lyte.Component.registerHelper("getUserTimeFormat",(function(){return"HH:mm"===Crm.userDetails.TIME_FORMAT?"24":"12"})),Lyte.Component.registerHelper("ifContains",(function(e,t){return null!=e&&null!=t&&null!=e&&null!=t&&e.toString().indexOf(t.toString())>-1})),Lyte.Component.registerHelper("getValue",(function(e,t){return e?"object"==typeof e?e[t]:JSON.parse(e)[t]:""})),Lyte.Component.registerHelper("hasOwnProperty",(function(e,t){return e&&e.hasOwnProperty(t)})),Lyte.Component.registerHelper("checkComparison",(function(e,t,r){switch(r){case">=":if(e>=t)return!0;break;case"<=":if(e<=t)return!0;break;case">":if(e>t)return!0;break;case"<":if(e<t)return!0;break;case"=":if(e===t)return!0;break;case"==":if(e==t)return!0;break;case"!=":if(e!=t)return!0}return!1})),Lyte.Component.registerHelper("ifAllMatch",(function(){var e=arguments.length;if(e%3==0){for(var t=0;t<e;t+=3)if(!1===Lyte.Component.registeredHelpers.checkComparison.call(this,arguments[t],arguments[t+2],arguments[t+1]))return!1;return!0}return!1})),Lyte.Component.registerHelper("dateTimeUserFormat",(function(e,t){var r=void 0!==t&&t;if(e)return Utils.getDateTimeInUserFormat($L.moment(e).toDate(),r)})),Lyte.Component.registerHelper("spliter",(function(e){if(e)return e.split("splitername")[1]})),Lyte.Component.registerHelper("splitername",(function(e){if(e)return e.split("splitername")[0]})),Lyte.Component.registerHelper("getHref",(function(e,t){if(t)return Crm.getCrmBasePath()+"/EntityInfo.do?module="+e+"&id="+t})),Lyte.Component.registerHelper("dateTimeUserFormatFromISOFormat",(function(e){if(e){var t=e.split("T"),r=-1!=t[1].indexOf("+")?"+":"-",n=t[1].split(r),o=t[0].split("-"),i=n[0].split(":"),a=new Date;return a.setFullYear(parseInt(o[0])),a.setMonth(parseInt(o[1])-1),a.setDate(parseInt(o[2])),a.setHours(parseInt(i[0])),a.setMinutes(parseInt(i[1])),a.setSeconds(parseInt(i[2])),Utils.getDateTimeInUserFormat(a,!0)}})),Lyte.Component.registerHelper("dateUserFormatFromISOFormat",(function(e){if(e){var t=e.split("T"),r=-1!=t[1].indexOf("+")?"+":"-",n=t[1].split(r),o=t[0].split("-"),i=n[0].split(":"),a=new Date;return a.setFullYear(parseInt(o[0])),a.setMonth(parseInt(o[1])-1),a.setDate(parseInt(o[2])),a.setHours(parseInt(i[0])),a.setMinutes(parseInt(i[1])),a.setSeconds(parseInt(i[2])),Utils.getDateInLocaleDefaultFormat(a)}})),Lyte.Component.registerHelper("ifAnyMatch",(function(){var e=arguments.length;if(e%3==0){for(var t=0;t<e;t+=3)if(!0===Lyte.Component.registeredHelpers.checkComparison.call(this,arguments[t],arguments[t+2],arguments[t+1]))return!0;return!1}return!1})),Lyte.Component.registerHelper("contains",(function(e,t){return e&&"string"==typeof e&&(e=e.replace(/'/g,'"'),e=JSON.parse(e)),!(!e||!e.contains(t))})),Lyte.Component.registerHelper("startsWith",(function(e,t){return!(!e||"string"!=typeof e||!e.startsWith(t))})),Lyte.Component.registerHelper("endsWith",(function(e,t){return!(!e||!e.toLowerCase().endsWith(t))})),Lyte.Component.registerHelper("notStartsWith",(function(e,t){return!(!e||"string"!=typeof e||e.startsWith(t))})),Lyte.Component.registerHelper("and",(function(){for(var e=0;e<arguments.length;e++)if(0==arguments[e]||null==arguments[e]||null==arguments[e])return!1;return!0})),Lyte.Component.registerHelper("or",(function(){for(var e=0;e<arguments.length;e++)if(arguments[e])return!0;return!1})),Lyte.Component.registerHelper("checkPermission",(function(e,t){return t&&""!==t&&(e=e+"_"+t),crmListView.changedPermissionsForZBModules.hasOwnProperty(e)&&(e=crmListView.changedPermissionsForZBModules[e]),!0===Crm.userDetails.permissions[e]})),Lyte.Component.registerHelper("showAddRecord",(function(e){return!Crm.userDetails.hideUnauthorizedCreateLink||!e||Lyte.Component.registeredHelpers.checkPermission.call(this,"Crm_Implied_Create",e)})),Lyte.Component.registerHelper("setTabSubTab",(function(e){var t=e.clickId;if(t){"custom"===e.generated_type&&t.startsWith("widget_")?(crmSetup.setupObject[e.routeName]=crmSetup.setupObject[e.routeName]?crmSetup.setupObject[e.routeName]:{},crmSetup.setupObject[e.routeName].generated_type=e.generated_type,crmSetup.setupObject[e.routeName].menus=crmSetup.setupObject[e.routeName].menus?crmSetup.setupObject[e.routeName].menus:[],crmSetup.setupObject[e.routeName].menus.push(e)):crmSetup.setupObject[e.routeName]=e,e.indexRoute&&(crmSetup.setupObject[e.routeName+"."+e.indexRoute]=e);var r=t.split("_"),n=r[0],o=r[1];e.tab=n,e.subTab=o}})),Lyte.Component.registerHelper("jsonToString",(function(e){return JSON.stringify(e)})),Lyte.Component.registerHelper("getUserDetail",(function(){for(var e=Crm.userDetails[arguments[0]],t=1;t<arguments.length;t++)e=e[arguments[1]];return e})),Lyte.Component.registerHelper("getUserName",(function(e){var t=store.peekRecord("user",e);return t?t.full_name:"No User"})),Lyte.Component.registerHelper("substr",(function(e,t,r){return e.substring(t,r)})),Lyte.Component.registerHelper("indexOf",(function(e,t,r,n){return!(!e||!t)&&Lyte.Component.registeredHelpers.checkComparison(e.indexOf(t),n,r)})),Lyte.Component.registerHelper("encodeHTML",(function(e){return $ESAPI.encoder().encodeForHTML(e)})),Lyte.Component.registerHelper("encodeURL",(function(e){return $ESAPI.encoder().encodeForURL(e)})),Lyte.Component.registerHelper("encodeJS",(function(e){return $ESAPI.encoder().encodeForJavaScript(e)})),Lyte.Component.registerHelper("encodeURIComponent",(function(e){return encodeURIComponent(e)})),Lyte.Component.registerHelper("getUserStatus",(function(e){return!!Crm.userDetails[e]})),Lyte.Component.registerHelper("rebrandProperty",(function(e){return RebrandLinkUtil.getProperty(e)})),Lyte.Component.registerHelper("isFeatureAvailable",(function(e){return featuresAvailable.hasOwnProperty(e)&&featuresAvailable[e]})),Lyte.Component.registerHelper("getPluralLabel",(function(e,t){return!e&&t&&(e=store.peekRecord("module",t).module_name),Crm.moduleInfo[e]?Crm.moduleInfo[e].translatedPluralLabel:""})),Lyte.Component.registerHelper("getModuleDisplayName",(function(e,t,r){return Crm.getModuleDisplayName(e,t,r)})),Lyte.Component.registerHelper("formatCurrencyValue",(function(e,t){return"NaN"===parseInt(e).toString()?"-":(null==t&&(t=returnJson&&returnJson.entityMapJson&&returnJson.entityMapJson.CURRENCYISOCODE?returnJson.entityMapJson.CURRENCYISOCODE.defaultvalue:void 0),currencyUtils.returnValueInDefaultCurrency(t,e))})),Lyte.Component.registerHelper("getDateTime",(function(e,t,r){if(!e||e.length<1)return r||"";if("786"==t||"14"==t||"116"==t||"118"==t||"333"==t){var n=new Date(e);return Utils.getDateTimeInUserFormat(n,!0)}if("24"==t||"202"==t){var o=new Date(e);return Utils.getDateInUserDatePattern(o,!0)}})),Lyte.Component.registerHelper("convertAPIDateFormatToUserDateFormat",(function(e,t){return!e||e.length<1?t||"":Utils.getDateInUserDatePattern(CrmDateUtils.getDateObjectFromString(e,"YYYY-MM-DD"))})),Lyte.Component.registerHelper("array_contains",(function(e,t){if(validationUtils.isEmpty(e))return!1;for(var r=e.length,n=0;n<r;n++)if(e[n]==t)return!0;return!1})),Lyte.Component.registerHelper("array_not_contains",(function(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n]==t)return!1;return!0})),Lyte.Component.registerHelper("arrayLength",(function(e){return e?e.length:0})),Lyte.Component.registerHelper("getFieldLabel",(function(e){if("undefined"!=typeof returnJson&&returnJson.entityMapJson)return returnJson.entityMapJson[e]?returnJson.entityMapJson[e].displaylabel:void 0;var t=store.peekAll("field").filter((function(t){return t.column_name==e}));return t&&t[0]?t[0].display_label:void 0})),Lyte.Component.registerHelper("getModuleLabel",(function(e){if("Zoho Finance"==e||"Zoho Books"==e||"Zoho Invoice"==e)if(Crm.moduleInfo["Zoho Invoice"])e="Zoho Invoice";else{if(!Crm.moduleInfo["Zoho Books"])return"Zoho Finance";e="Zoho Books"}return I18n.getMsg(Crm.moduleInfo[e].translatedPluralLabel,I18n.getMsg("Zoho"))})),Lyte.Component.registerHelper("toString",(function(e){return e.toString()})),Lyte.Component.registerHelper("getSum",(function(e,t,r){return parseFloat((e+t).toFixed(r))})),Lyte.Component.registerHelper("inc",(function(e,t){return e+t})),Lyte.Component.registerHelper("dec",(function(e,t){return e-t})),Lyte.Component.registerHelper("showMandatoryAsterix",(function(e){return e&&e.required&&Crm.userDetails.DV_MANDATORY_FIELD_ASTERIX_SYMBOL})),Lyte.Component.registerHelper("concat",(function(){for(var e="",t=arguments.length,r=0;r<t;r++)e+=arguments[r];return e})),Lyte.Component.registerHelper("noOfKeys",(function(e){return Object.keys(e).length})),Lyte.Component.registerHelper("isRTLuser",(function(){return"iw_IL"===Crm.userDetails.RELEVANT_LOCALE})),Lyte.Component.registerHelper("getSingularLabel",(function(e,t){return!e&&t&&(e=idModuleMapping[t]),moduleRecordMapping&&moduleRecordMapping[e]?moduleRecordMapping[e].singular_label:""})),Lyte.Component.registerHelper("getModuleSingularLabelbyApiName",(function(e){var t=moduleApiVsNameMapping[e];return moduleRecordMapping&&moduleRecordMapping[t]?moduleRecordMapping[t].singular_label:""})),Lyte.Component.registerHelper("getCrmBasePath",(function(){return Crm.getCrmBasePath()})),Lyte.Component.registerHelper("isCurrentOrg",(function(e){return Crm.currentZgid===e})),Lyte.Component.registerHelper("isEmpty",(function(e){return validationUtils.isEmpty(e)})),Lyte.Component.registerHelper("isNotEmpty",(function(e){return!validationUtils.isEmpty(e)})),Lyte.Component.registerHelper("isNotEmptyString",(function(e){return!validationUtils.isEmptyString(e)})),Lyte.Component.registerHelper("isEmptyString",(function(e){return validationUtils.isEmptyString(e)})),Lyte.Component.registerHelper("if_gt_len",(function(e,t){return!!(e&&e.length>parseInt(t))})),Lyte.Component.registerHelper("if_lt_len",(function(e,t){return e.length<parseInt(t)})),Lyte.Component.registerHelper("isNotPartOf",(function(e,t){return!t||null!=(e=e.split(","))&&null!=t&&-1==e.indexOf(t.toString())})),Lyte.Component.registerHelper("isPartOf",(function(e,t){return!t||null!=(e=e.split(","))&&null!=t&&e.indexOf(t.toString())>-1})),Lyte.Component.registerHelper("getModuleDislayNameByModuleName",(function(e,t){var r=Crm.moduleInfo;if(void 0===e)return e;var n="Deals"===e?"Potentials":e;if(!r[n])return e;var o="";return/^CustomModule500[1-4]$/.test(r[n].apiname)&&(o=" ("+I18n.getMsg("crm.title.zohofinance","Zoho")+")"),t?r[n].translatedSingularLabel+o:r[n].translatedPluralLabel+o})),Lyte.Component.registerHelper("convertISODatetoUserDatePattern",(function(e){return Utils.convertDateToUserPattern(Utils.ISO8601toDateObject(e),!1,!0)})),Lyte.Component.registerHelper("getDateTimeInUserPatternFormatFromISODate",(function(e){return e?Utils.convertDateToUserPattern(e.replace(/[+-]\d{2}:\d{2}/,""),Crm.userDetails.DATE_PATTERN.toUpperCase()+" "+Crm.userDetails.TIME_FORMAT.toUpperCase(),!0):""})),Lyte.Component.registerHelper("getTimeInUserFormat",(function(e){var t=e?new Date(e):new Date;return Utils.getTimeInUserFormat(t)})),Lyte.Component.registerHelper("getDateFormISODate",(function(e){return e?Utils.getDateInUserDatePattern(new Date(e),!1):""})),Lyte.Component.registerHelper("convertMinutesToHoursAndMinutes",(function(e){var t=Math.floor(e/60),r=e%60,n=t>0?t+(1===t?" hr":" hrs"):"",o=r>0?r+(1===r?" min":" mins"):"";return n+(n&&o?" ":"")+o})),Lyte.Component.registerHelper("getDateInUserPatternFormISODate",(function(e){return e?Utils.convertDateToUserPattern(e.replace(/[+-]\d{2}:\d{2}/,""),void 0,!0):""})),Lyte.Component.registerHelper("getDateInUserPatternFromTimeStamp",(function(e){return e?Utils.convertDateToUserPattern(e,void 0,!0):""})),Lyte.Component.registerHelper("getDateTimeInUserPatternFromTimeStamp",(function(e){return e?new CrmDate($L.moment(e).toDate(),!1).getDateTimeInUserPattern():""})),Lyte.Component.registerHelper("getModuleLabelByApiName",(function(e,t){var r=Crm.moduleInfo;for(var n in r){var o=r[n];if(o.apiname===e)return t?o.translatedSingularLabel:o.translatedPluralLabel}return e})),Lyte.Component.registerHelper("getModuleNameByApiName",(function(e){var t=Crm.moduleInfo;for(var r in t){var n=t[r];if(n.apiname===e)return n.translatedSingularLabel}return e})),Lyte.Component.registerHelper("getModuleNameByApiName",(function(e){var t=Crm.moduleInfo;for(var r in t){if(t[r].apiname===e)return r}})),Lyte.Component.registerHelper("getTabSystemNameById",(function(e){var t=Crm.moduleInfo;for(var r in t){var n=t[r];if(n.Id===e)return n.sysRefName}})),Lyte.Component.registerHelper("getApiNameByModuleName",(function(e){return moduleApiMapping&&moduleApiMapping[e]?moduleApiMapping[e]:e})),Lyte.Component.registerHelper("getI18nByAppendKey",(function(){if(arguments[0]+arguments[1]==="crm.label.widgets.SALES_SIGNALS"||arguments[0]+arguments[1]==="crm.label.widgets.sales_signals"||arguments[0]+arguments[1]==="crm.label.cf.salessignals")return I18n.getMsg("crm.ntc.label.listview.notificationHeading");var e=arguments.length-1;if(2===e)return I18n.getMsg(arguments[0]+arguments[1]);for(var t=arguments[0]+arguments[1],r=[],n=2;n<e;n++)r.push(arguments[n]);return I18n.getMsg(t,I18n.getMsg(r))})),Lyte.Component.registerHelper("ObjToString",(function(e){return JSON.stringify(e)})),Lyte.Component.registerHelper("replace",(function(e,t,r){return e.replace(new RegExp(t,"g"),r)})),Lyte.Component.registerHelper("formatNumber",(function(e){var t=Crm.userDetails.COUNTRY_LOCALE.replace("_","-");if("${EMPTY}"===e||"${NOTEMPTY}"===e||"NaN"===Intl.NumberFormat(t,{maximumFractionDigits:9}).format(e))return e;["ps-AF","bn-BD","es-PR","ar-SA"].includes(t)&&(t="en-US"),e=-1===e.indexOf(".")&&e.length>16?Search.formatBigNumber(e,t):Intl.NumberFormat(t,{maximumFractionDigits:9}).format(e);var r=new Intl.NumberFormat(t).format(11111).replace(/1/g,""),n=new Intl.NumberFormat(t).format(1.1).replace(/1/g,""),o=e.split(r).join(Crm.userDetails.numberSeparators.group);if(1===Search.countCharacters(n,e)){var i=new RegExp(n+"([^"+n+"]*)$");o=o.replace(i,Crm.userDetails.numberSeparators.decimal+"$1")}return o})),Lyte.Component.registerHelper("arithResult",(function(e,t,r){switch(e=parseFloat(e),t=parseFloat(t),r){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t;case"%":return e%t}})),Lyte.Component.registerHelper("parseFloat",(function(e){return parseFloat(e)})),Lyte.Component.registerHelper("getDisplayModuleName",(function(e,t,r,n){if(!e)return e;var o=Crm.moduleInfo,i="Deals"==e?"Potentials":e;return o[i]?t?o[i].translatedSingularLabel:o[i].translatedPluralLabel:n?r:e})),Lyte.Component.registerHelper("isEqualTo",(function(e,t){return e===t})),Lyte.Component.registerHelper("getUserImageUrl",(function(e){var t=Crm.getUserDetailsMap()[e=e||Crm.userDetails.USER_ID];return t&&t.avatar?t.avatar:networkUtils.getImageUrl("nophoto.png",ResourceConstants.CRM)})),Lyte.Component.registerHelper("getUserImageUrlByZuId",(function(e){return"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb"})),Lyte.Component.registerHelper("getDateInUsrViewFormat",(function(e){return e||(e=new Date),Utils.getDateInUsrViewFormat(e)})),Lyte.Component.registerHelper("getUserDisplayName",(function(){return Crm.userDetails.DISPLAY_NAME})),Lyte.Component.registerHelper("is12HourFormat",(function(){return"HH:MM"!==Crm.userDetails.TIME_FORMAT.toUpperCase()})),Lyte.Component.registerHelper("getHelpUrl",(function(e){switch(Crm.userDetails.RELEVANT_LOCALE){case"fr_FR":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"fr/crm/help/"+crmConstants.helpUrl[e];case"es_ES":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"es-xl/crm/help/"+crmConstants.helpUrl[e];case"pt_BR":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"pt-br/crm/help/"+crmConstants.helpUrl[e];case"de_DE":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"de/crm/help/"+crmConstants.helpUrl[e];default:return crmConstants.helpUrl["help.domain.url"]+crmConstants.helpUrl[e]}})),Lyte.Component.registerHelper("joinArray",(function(e,t,r){if(void 0===t&&(t=""),e.length<1)return"";if(r){for(var n=e[0][r],o=e.length,i=1;i<o;i++)n=n+t+e[i][r];return n}return e.join(t)})),Lyte.Component.registerHelper("descTrim",(function(e){return e.length>30&&(e=e.slice(0,30)+"..."),e})),Lyte.Component.registerHelper("hasValueInJSONArray",(function(){var e=arguments;return arguments[0].some((function(t){return t[e[1]]===e[2]}))})),Lyte.Component.registerHelper("execString",(function(e){return new Function("return "+e)()})),Lyte.Component.registerHelper("join",(function(){return Array.prototype.join.call(arguments,"")})),Lyte.Component.registerHelper("getSub",(function(e,t){return e-t})),Lyte.Component.registerHelper("if_gt",(function(e,t){return e>t})),Lyte.Component.registerHelper("if_lt_eq",(function(e,t){return e<=t})),Lyte.Component.registerHelper("getLastModified",(function(e){return(e?new CrmDate(e):new CrmDate).getDateInPattern("MMM dd, yyyy")})),Lyte.Component.registerHelper("getLocaleTimeString",(function(e){return e?new CrmDate(e).getTimeInUserPattern():(new CrmDate).getTimeInUserPattern()})),Lyte.Component.registerHelper("getImgUrl",(function(e){return commonUtils.getPhotoURL(e)})),Lyte.Component.registerHelper("not",(function(e){return!e})),Lyte.Component.registerHelper("capitalize",(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),Lyte.Component.registerHelper("checkSetupInnerLinkVisible",(function(){var e=Lyte.Router.getRouteInstance("crm.settings.section").transition.target;return-1==e.indexOf("crm.settings.section.manage-tags")&&-1==e.indexOf("crm.settings.section.schedule-mass-email")&&-1==e.indexOf("crm.settings.section.macro")&&-1==e.indexOf("crm.settings.section.autoresponders")&&-1==e.indexOf("crm.settings.section.custom-view")&&"crm.settings.section.import"!==e&&"crm.settings.import"!==e})),Lyte.Component.registerHelper("containsRecord",(function(e,t){if(!e||!t)return!1;for(var r=e.length,n=0;n<r;n++){if(e[n].id==t)return!0}return!1})),Lyte.Component.registerHelper("isPaidUser",(function(){return Crm.userDetails.ISPAID_USER})),Lyte.Component.registerHelper("getRecordsCountForSearch",(function(e){return e?e.total_records_count:0})),Lyte.Component.registerHelper("getPluralLabelByModuleMap",(function(e,t){return t[e.module.api_name].plural_label})),Lyte.Component.registerHelper("getNameByModuleMap",(function(e,t){return t[e.module.api_name].module_name})),Lyte.Component.registerHelper("getValuesForModule",(function(e,t,r){var n=e.module.api_name,o=t[n].sysRefName;return void 0===r[o]&&(o=t[n].module_name),r[o]})),Lyte.Component.registerHelper("trim",(function(e){return e?e.trim():e})),Lyte.Component.registerHelper("stringLen",(function(e){return e.length})),Lyte.Component.registerHelper("isUndefined",(function(e){return void 0===e})),Lyte.Component.registerHelper("getObjLength",(function(e){return e.length-1})),Lyte.Component.registerHelper("getRecordValue",(function(e,t){if("Full_Name"==t.api_name){var r=Crm.userDetails.NAME_FORMAT;r=r.split(",");var n=[];return r.forEach((function(t){"Salutation"!=t&&(t=t.replace(" ","_"),e[t]&&n.push(e[t]))})),n.join(" ")}return e[t.api_name]})),Lyte.Component.registerHelper("getRecordsCount",(function(e){return e.per_page*(e.page-1)+e.count})),Lyte.Component.registerHelper("getFromIndex",(function(e){return e.per_page*(e.page-1)})),Lyte.Component.registerHelper("objectLen",(function(e){return Array.isArray(e)?e.length:"object"==typeof e?Object.keys(e).length:0})),Lyte.Component.registerHelper("getModuleLabelFromApiName",(function(e,t){if(void 0!==e){var r=Utils.inverseKeyValues(moduleApiMapping)[e];if(void 0!==r)return 1===t?moduleRecordMapping[r].singular_label:moduleRecordMapping[r].plural_label}return e})),Lyte.Component.registerHelper("getCommaSeperatedStrWithSpace",(function(){for(var e=arguments[0],t=e.length,r="",n=0;n<t;n++)e[n]&&""!==e[n]&&(r=""===r?e[n]:r+", "+e[n]);return r})),Lyte.Component.registerHelper("toLowerCase",(function(e){return void 0!==e?e.toLowerCase():e})),Lyte.Component.registerHelper("getUserImgUrlByZuId",(function(e){return"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb"})),Lyte.Component.registerHelper("fixedDecimal",(function(e,t){return null!==e?e.toFixed(t):""})),Lyte.Component.registerHelper("getAttachmentIcons",(function(e){switch(e){case"attachDesktop":return"dIB vaM mR10 upload-iconAtc";case"attachDocuments":return"dIB vaM mR10 docs-iconAtc";case"teamDrivePicker":case"contentLibraryPicker":return"dIB mR10 svgIcons ico-teamDrive vaM";case"attachZDocs":return"dIB vaM mR10 zohodocs-iconAtc";case"attachGDocs":case"attachBoxDocs":case"attachOneDocs":return"dIB vaM mR10 googledrive-iconAtc";case"cloudPicker":return"dIB mR10 svgIcons ico-cloudPicker vaM";case"attachLink":return"dIB vaM mR10 link-iconAtc"}})),Lyte.Component.registerHelper("getNumberWithCommas",(function(e,t,r){return currencyUtils.getNumberWithCommas(e,t,r)})),Lyte.Component.registerHelper("getOrgCode",(function(e,t){try{var r=commonUtils.getOrgNameForDisplay(e,t);r.length>22&&(r=r.substring(0,19));var n="";if(/(org)+([\d]{4,})/g.test(r))return"O";r=r.replace(/[\!\@\#\$\^\&\%\*\(\)\+\=\-\[\]\\\/\{\}\|\:\<\>\?\,\.]/gi,"");n=r[0],r.split(" ").forEach((function(e,t){t>0&&(n+=e[0])}));return/^[a-zA-z].*$/g.test(n)&&(n=n.toUpperCase()),n=n.substr(0,2)}catch(e){return" "}})),Lyte.Component.registerHelper("getOrgName",(function(e,t){return commonUtils.getOrgNameForDisplay(e,t)})),Lyte.Component.registerHelper("safeEncodeHTML",(function(e){return null!=new RegExp("[<>]|(?:(&(?!(amp;|lt;|gt;|quot;|#x27;|#x2f;|#39;|#x3a;))))").exec(e)?$ESAPI.encoder().encodeForHTML(e):e})),Lyte.Component.registerHelper("getCurrencySymbol",(function(e){return currencyUtils.getCurrencySymbol(e)})),Lyte.Component.registerHelper("getPaymentsSubUrl",(function(e,t){return document.location.protocol+"//"+RebrandLinkUtil.getProperty("STOREURL")+"/html/store/index.html#history?serviceId="+t+"&customId="+e})),Lyte.Component.registerHelper("convertToLocaleString",(function(e){return e?e.toLocaleString():e})),Lyte.Component.registerHelper("getLogoUrl",(function(e){if("Favicon"===e)return Crm.Logo.Favicon;if("Logo_url"===e){var t=$L("crm-left-menu")[0];return"dark"===((t=t?t.component:null)?t.getData("dataMode"):"default")?Crm.Logo.Logo_url_white:Crm.Logo.Logo_url}})),Lyte.Component.registerHelper("getCurrentUserZuid",(function(){return Crm.userDetails.ZUID})),Lyte.Component.registerHelper("getCurrentUserEmail",(function(){return Crm.userDetails.EMAIL})),Lyte.Component.registerHelper("formatBytesCeil",(function(e){if(0===e)return"0 Bytes";var t=[I18n.getMsg("B"),I18n.getMsg("KB"),I18n.getMsg("MB"),I18n.getMsg("GB")],r=Math.floor(Math.log(e)/Math.log(1e3));return Math.ceil(parseFloat((e/Math.pow(1e3,r)).toFixed(2)))+" "+t[r]})),Lyte.Component.registerHelper("getPLStyleObj",(function(e,t){return""===t||"-None-"===t||"None"===t||"-"===t||e&&""!==e||(e="#ffffff"),getPLStyleObj(e)})),Lyte.Component.registerHelper("getSFParentClass",(function(e){var t="colorEnabledddDropdown colorEnabledPicklist";return e&&"-None-"!==e&&"None"!==e||(t+=" colorEnabledPKNone"),t})),Lyte.Component.registerHelper("getCVPicklistStyleObj",(function(e,t){return getPicklistStyleObj(e,t.pick_list_values)})),Lyte.Component.registerHelper("isPremiumUser",(function(){var e=Crm.userDetails.LICENSE_TYPE;return"U"===e||"A"===e||"E"===e||"C"===e||"Z"===e})),Lyte.Component.registerHelper("addString",(function(e,t){return e+t})),Lyte.Component.registerHelper("isHebrewUser",(function(){return!!Crm.userDetails.LOCALE.includes("iw")})),Lyte.Component.registerHelper("getDateInUserDatePatternFromISODate",(function(e){if(e){var t=Utils.ISO8601toDateObject(e);return Utils.getDateInUserDatePattern(t)}return""})),Lyte.Component.registerHelper("validateIfWarringNeededOrNot",(function(e,t){return t&&t[e]})),Lyte.Component.registerHelper("getAppName",(function(){return Crm.appName})),Lyte.Component.registerHelper("getProductName",(function(){return Crm.productName})),Lyte.Component.registerHelper("getCrmClientImageUrl",(function(e){return networkUtils.getImageUrl(e,ResourceConstants.CRMClient)})),Lyte.Component.registerHelper("getCrmImageUrl",(function(e){return networkUtils.getImageUrl(e,ResourceConstants.CRM)})),Lyte.Component.registerHelper("getIntegrationName",(function(e){return Crm.integrationsAppName[e]})),Lyte.Component.registerHelper("getTimePredicate",(function(e){return null==e?"zia.on":"before"===e.typeTrigger?I18n.getMsg("before"):I18n.getMsg("crm.label.general.small.after")})),Lyte.Component.registerHelper("getUserImage",(function(e){return store.peekRecord("user",e).image_link})),Lyte.Component.registerHelper("getToolClass",(function(e,t){return"marketplace"===t?"proapps "+e.toLowerCase()+"_pro dIB vaM":"proapps "+e.toLowerCase()+"_pro "+e.toLowerCase()+"_pro_sca dIB vaM"})),Lyte.Component.registerHelper("getMeetingToolDisplayName",(function(e){var t={GoToMeeting:"GoToMeeting",ZohoMeeting:"Zoho Meeting",JoinMeMeeting:"Join.Me",TeamVMeeting:"TeamViewer",ZoomMeeting:"Zoom",BlueJeansMeeting:"BlueJeans",WebexMeeting:"Cisco Webex",RingCentralMeeting:"Ring Central",ClickMeeting:"Click Meeting",MegaMeeting:"Mega Meeting",StarLeafMeeting:"StarLeaf",RCVideoMeeting:"RingCentral Video",MicrosoftTeamsMeeting:"Microsoft Teams"};for(var r in t)if(t.hasOwnProperty(r)&&e===r)return t[r]})),Lyte.Component.registerHelper("getSplittedValue",(function(e,t){return e.split(t)})),Lyte.Component.registerHelper("getArrayValue",(function(e,t){return e[t]})),Lyte.Component.registerHelper("formatISODate",(function(e){var t=Utils.ISO8601toDateObject(e);return new CrmDate(t).getDateTimeInUserPattern()})),Lyte.Component.registerHelper("getPageFirstRecordIndex",(function(e){return 10*((e=Number(e))-1)+1})),Lyte.Component.registerHelper("getPageLastRecordIndex",(function(e,t){return 10*((e=Number(e))-1)+t})),Lyte.Component.registerHelper("formatAttachmentSize",(function(e){return EmailComposeUtil.formatAttachmentSize(e)})),Lyte.Component.registerHelper("isCpqDashboardVisible",(function(){return Crm.userDetails.permissions.Crm_Implied_View_CPQ_Quotes_dashboard&&moduleRecordMapping.Dashboards&&moduleRecordMapping.Dashboards.visible&&moduleRecordMapping.Dashboards.viewable})),Lyte.Component.registerHelper("iconsModuleName",(function(e,t){return e=e.startsWith("CustomModule")||e.startsWith("LinkingModule")?"custom":e,t&&(e=e.toLowerCase()),e})),Lyte.Component.registerHelper("calculatePercentage",(function(e,t){return e/t*100})),Lyte.Component.registerHelper("toUpperCase",(function(e){if(e)return e.toUpperCase()})),Lyte.Component.registerHelper("checkIfObject",(function(e){return"object"==typeof e&&"[object Object]"===e.toString()||e instanceof Array})),Lyte.Component.registerHelper("object_entries",(function(e){return e?Object.entries(e):[]})),Lyte.Component.registerHelper("getParsedEmailStatus",(function(e){return mailparser[e]})),Lyte.Component.registerHelper("removeMappingsFromSubject",(function(e){return e.replace(mailparser.tagsRegex,"")})),Lyte.Component.registerHelper("getI18nEmailParserFailureReason",(function(e){switch(e){case"invalid data":return I18n.getMsg("mailparser.failure.invalid.data");case"duplicate data":return I18n.getMsg("mailparser.failure.duplicate.data");case"no permission":return I18n.getMsg("mailparser.failure.no.permission");case"record awaiting approval":return I18n.getMsg("mailparser.failure.awaiting.approval");case"mandatory not found":return I18n.getMsg("crm.wfr.createrecord.mandatory.not.found");case"Content didn't match, Unable to map fields":return I18n.getMsg("mailparser.failure.unable.to.map")}return e})),Lyte.Component.registerHelper("getDisplayLabelByApiName",(function(e,t){var r=store.model.module.data.filter((t=>t.api_name===e));return r.length>0?t?r[0].singular_label:r[0].plural_label:e})),Lyte.Component.registerHelper("getKeys",(function(e){return"object"==typeof e?Object.keys(e):[]})),Lyte.Component.registerHelper("getExtnTypeClass",(function(e){var t=e.split(".");return e=(e=t[t.length-1]).toLowerCase(),showImageType(e)})),Lyte.Component.registerHelper("getAttachmentClassName",(function(e){var t=e.split("."),r=(e=t[t.length-1]).toLowerCase();return r.match(/(jpg|jpeg|png|gif|svg)$/i)?"image":r.match(/(doc)$/i)?"document":r.match(/(pdf)$/i)||r.match(/(chart)$/i)?"pdf":r.match(/(xls|xlsx|xlsm|xltx|xltm)$/i)?"sheet":r.match(/(mp4|mov|wmv|mkv|avi|webm)$/i)?"video":r.match(/(wav|aiff|flac|mp3|aac|alac|wma)$/i)?"audio":r.match(/(txt|rtf)$/i)?"text":r.match(/(zip|zipx)$/i)?"zip":"noformat"})),Lyte.Component.registerHelper("getImageDataForCrux",(function(e,t,r,n,o,i,a){let s;if("publicField"===o&&(s=!0),t){var l=Lyte.registeredMixins["crm-uploadfields-mixin"].constructImageDataFromServer(t,i,a,r,s);let e=document.querySelector("crm-create-layout");if(s&&(e=document.querySelector("crm-public-fields-view")),e&&e.component&&!Object.keys(e.component.getData("getThumbnailDataMap")).length){let t=[];if(s){let r=[],n=e.component.getData("fieldsData");n.filter((e=>556===e.ui_type)).map((e=>e.api_name)).forEach((t=>{e.component.getData("recordData")[t]&&r.push(t)})),r.forEach((e=>{t.push(n.filter((t=>t.api_name===e)).map((e=>e.id)))}))}0==t.length&&r&&t.push(r),t.length&&(t=t.join("."),Lyte.registeredMixins["crm-uploadfields-mixin"].makeRequestForThumbnailForAlLIU(i,t,a,o,!0))}return JSON.stringify(l)}})),Lyte.Component.registerHelper("getFilesDataInCruxFormat",(function(e,t,r,n,o){if(this.component&&this.component.data&&"clone"===this.component.data.initRoute)return[];if(e)return Lyte.registeredMixins["crm-uploadfields-mixin"].getFileDataInCruxFormat(e);if(t){var i=$L("crm-create-layout")[0],a=$L("crm-canvas-form")[0];if(!i&&a&&(i=a),i){var s=i.component.data.fileuploadFieldsData;if(this.component&&this.component.data.iscpqVerifyDetailsSubform&&(s.cpq_verify_temp?s.cpq_verify_temp[n]&&(s.cpq_verify_temp[n]={}):(s.cpq_verify_temp={},s.cpq_verify_temp[n]||(s.cpq_verify_temp[n]={})),Object.keys(s[n]).forEach((e=>{Object.keys(s[n][e]).forEach((t=>{s[n][e][t].forEach((e=>{var t=e.encryptedUploadId?e.encryptedUploadId:e.file_Id;s.cpq_verify_temp[n][t]=e}))}))}))),n&&s[n]&&s[n][o])return Lyte.registeredMixins["crm-uploadfields-mixin"].getFileDataInCruxFormat(s[n][o][r]);if(!n&&s[r])return Lyte.registeredMixins["crm-uploadfields-mixin"].getFileDataInCruxFormat(s[r]);if(this.component&&this.component.data.iscpqVerifyDetailsSubform){var l=[];return this.component.data.cachedSubformRecords&&this.component.data.cachedSubformRecords[o]&&this.component.data.cachedSubformRecords[o][r]?this.component.data.cachedSubformRecords[o][r].forEach((e=>{var t=e.file_id?e.file_id:e.file_Id;l.push(s.cpq_verify_temp[n][t])})):this.component.data.dataBind[r]&&this.component.data.dataBind[r].forEach((e=>{var t=e.file_id?e.file_id:e.file_Id;l.push(s.cpq_verify_temp[n][t])})),l}}else if(n){var u=$L('crux-subform[subform-api-name="'+n+'"]')[0];if(u){var m=u.component.data.cxPropContent[n].filter((e=>e.id===o));if(m[0]&&m[0][r]&&m[0][r].length>0)return Lyte.registeredMixins["crm-uploadfields-mixin"].getFileDataInCruxFormat(m[0][r])}else{if(this.component&&this.component.data.dataBind[n]){var c=this.component.data.dataBind[n].filter((e=>e.id===o))[0][r];return Lyte.registeredMixins["crm-uploadfields-mixin"].getFileDataInCruxFormat(c)}if(this.component&&this.component.data.databindSubform&&this.component.data.databindSubform[r])return Lyte.registeredMixins["crm-uploadfields-mixin"].getFileDataInCruxFormat(this.component.data.databindSubform[r])}}return[]}})),Lyte.Component.registerHelper("setReviewProcessFieldProp",(function(e,t,r){if(!t)return!1;for(var n=t.length,o=!1,i=e.subform&&500!==e.ui_type&&116!==e.ui_type&&117!==e.ui_type,a=0;a<n;a++){var s=t[a];if(s.subform){var l=s.subform.filter((function(t){var n=t.subform;return(n&&n.subformRecordId?n.subformRecordId:void 0)===r.id&&t.id===e.id}));if(l.length>0){var u=l[0];o=!0,e.review_status=u.review_status;break}}else if(i&&s.id===e.id){e.review_status=s.review_status,o=!0;break}}return o})),Lyte.Component.registerHelper("getValFromRPFieldObj",(function(e,t,r,n){var o=e[t.id+"_"+r.id];return o?o[n]:void 0})),Lyte.Component.registerHelper("isInventoryModule",(function(e){var t=moduleDetailedInfo.modules.filter((function(t){return t.api_name===e.lookup.module.api_name}))[0],r=t?t.module_name:void 0;return"Quotes"===r||"Invoices"===r||"SalesOrders"===r||"PurchaseOrders"===r})),Lyte.Component.registerHelper("convertDateAndTimeApiFormatToUserViewFormat",(function(e){return new CrmDate(e).getDateTimeInUserPattern(!0)})),Lyte.Component.registerHelper("isTeamModule",(function(e){return!(!moduleRecordMapping[e]||!moduleRecordMapping[e].access_type||"team_based"!==moduleRecordMapping[e].access_type)})),Lyte.Component.registerHelper("isRequesterTeamModule",(function(e){return!!(moduleRecordMapping[e]&&moduleRecordMapping[e].access_type&&"team_based"===moduleRecordMapping[e].access_type&&moduleRecordMapping[e].private_profile&&"Requesters"===moduleRecordMapping[e].private_profile.name)})),Lyte.Component.registerHelper("isTeamModuleAdmin",(function(e){return!!(moduleRecordMapping[e]&&moduleRecordMapping[e].access_type&&"team_based"===moduleRecordMapping[e].access_type&&moduleRecordMapping[e].private_profile&&"Admins"===moduleRecordMapping[e].private_profile.name)})),Lyte.Component.registerHelper("isTeamModuleManager",(function(e){return!!(moduleRecordMapping[e]&&moduleRecordMapping[e].access_type&&"team_based"===moduleRecordMapping[e].access_type&&moduleRecordMapping[e].private_profile&&"Managers"===moduleRecordMapping[e].private_profile.name)})),Lyte.Component.registerHelper("getObjectForOptGroup",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("getUploadedFilesLength",(function(e){return e&&e.length?e.filter((function(e){return!e.hasOwnProperty("_delete")})).length:0})),Lyte.Component.registerHelper("isPropertyAvailable",(function(e,t){return!(!e||"object"!=typeof e||!Object.keys(e).length)&&e.hasOwnProperty(t)})),Lyte.Component.registerHelper("showHideFilesize",(function(e){return e&&void 0!==e.file_readable_Size&&""!==e.file_readable_Size?e.file_readable_Size:e&&"0 KB"!=e.file_Size&&"0"!=e.original_Size_Byte?e.file_Size:""})),Lyte.Component.registerHelper("convertCurrencyValue",(function(e,t){return 0===t||t?currencyUtils.returnValueInDefaultCurrency(e.Currency,t):"0.00"})),Lyte.Component.registerHelper("isTimeinServerFormat",(function(e){return!(!e||"string"!=typeof e||!e.match("T"))})),Lyte.Component.registerHelper("getCanvasId",(function(e,t,r){var n=t?t.id:void 0,o=moduleRecordMapping[e].id,i=Crm.getCanvasId(o,n),a=[e,n];return r?i?(a.push(i),a):a:i?"crm.tab.module.entity.canvas":"crm.tab.module.entity.detail"})),Lyte.Component.registerHelper("getRouteNameByModule",(function(e){return moduleRecordMapping[e]&&moduleRecordMapping[e].access_type&&"team_based"===moduleRecordMapping[e].access_type&&moduleRecordMapping[e].private_profile&&"Requesters"===moduleRecordMapping[e].private_profile.name?"crm.tab.requesters.module.index-module.entity.detail":"crm.tab.module.entity"})),Lyte.Component.registerHelper("getValueFromInnerObject",(function(e,t,r){var n=null;if(e&&t&&"object"==typeof e&&Object.keys(e).contains(t)){var o=e[t];o&&Object.keys(o).contains(r)&&(n=o[r])}return n})),Lyte.Mixin.register("crm-stop-event",{actions:{stopEvent:function(e){e&&event.preventDefault(),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation())}}}),Lyte.Component.registerHelper("getCallIconClass",(function(e,t){var r="headervalue_Calls_ico mR10";if("Inbound"===e)return"call-incoming";if("Missed"===e)return"call-missed";if("Outbound"===e)switch(t){case"Scheduled":r="call-scheduled";break;case"Overdue":r="call-overdue";break;case"Cancelled":r="call-cancelled";break;default:r="call-outgoing"}return r})),Lyte.Component.registerHelper("getFirstValueOfJson",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("uiTypeTemplate",(function(e){return null==e.displayValue&&null==e.defaultvalue?"":$(Handlebars.templates.uiTypeTemplate(e)).text()})),Lyte.Component.registerHelper("hasCallSupportedModules",(function(e){return-1!==["Leads","Contacts","Accounts","PhoneNumbers"].indexOf(e)})),Lyte.Component.registerHelper("whichPBService",(function(){return window.ZPB&&ZPB.clickToDial.isEnabled()?"ZPB":Crm.userDetails.TELEPHONY_ENABLED?"CRM_TELEPHONY":void 0})),Lyte.Component.registerHelper("getLabelForCallPopupOptions",(function(e){var t="";switch(e){case"add_lead":t=I18n.getMsg("crm.label.convert.create.new.module",Utils.getCustomisedSingularLabel("Leads"));break;case"add_contact":t=I18n.getMsg("crm.label.convert.create.new.module",Utils.getCustomisedSingularLabel("Contacts"));break;case"associate_lead":t=I18n.getMsg("crm.tpi.ctiapi.associate.new.module",Utils.getCustomisedSingularLabel("Leads"));break;case"associate_contact":t=I18n.getMsg("crm.tpi.ctiapi.associate.new.module",Utils.getCustomisedSingularLabel("Contacts"));break;case"add_call_details":t=I18n.getMsg("Add Call Details")}return t})),Lyte.Component.registerHelper("checkAndLoadZPBRecordingDep",(function(e){return!(!e||1!=e.length||!e[0].includes("phonebridge/recording/"))&&(CTIAPI.zpbRecDetails.required=!0,CTIAPI.loadRecording(),!0)})),Lyte.Component.registerHelper("isPhoneNoNewView",(function(){return Crm.userDetails.isPhoneNoNewView})),Lyte.Component.registerHelper("getImageFile",(function(e,t,r){var n=networkUtils.getImageUrl("nophoto.png",ResourceConstants.CRM);return"Contacts"===e||"Leads"===e?validationUtils.isNotEmpty(r)&&(n="/crm/EntityImageAttach.do?action_module="+e+"&entityId="+t+"&actionName=readImage&fileId="+r):n="",n})),Lyte.Component.registerHelper("isDeleteAllowed",(function(){return"dNImp"})),Lyte.Component.registerHelper("getPreviewUrl",(function(e){return"/crm/v2.1/__attachment_preview/"+e})),Lyte.Component.registerHelper("constructName",(function(e){if("system"===e.type)return I18n.getMsg("crm.bm.detail.notification.message");var t=Crm.getUserDetailsMap();return e&&e.id&&t[e.id]?t[e.id].name:e.name})),Lyte.Component.registerHelper("getTimeForUI",(function(e){var t=new Date(e);return Utils.convertToUserTimezone(t),Utils.getTimeInUserFormat(t,!0)})),Lyte.Component.registerHelper("getDateTimeForEntity",(function(e,t){return Lyte.registeredMixins["crm-msg-common"].getDateTimeInUserFormat(e,!t)})),Lyte.Component.registerHelper("getDateTimeString",(function(e){var t=new Date(e);return Utils.convertToUserTimezone(t),$.datepicker.formatDate("D d M yy",t)+" "+Utils.getTimeInUserFormat(t,!0)})),Lyte.Component.registerHelper("getDisplayDateTime",(function(e){return Utils.getDisplayDateTime(new Date(e),!0)})),Lyte.Component.registerHelper("getMsgServicLogo",(function(e){switch(e){case"WHATSAPP":case"TWILIO":return networkUtils.getImageUrl("whatsapptemplogo.png",ResourceConstants.CRMClient);case"TELEGRAM":return""}return""})),Lyte.Component.registerHelper("getAssignToText",(function(e){var t="";e&&e.category.forEach((function(e){t+=""!==t?", "+e.name:e.name}));return t})),Lyte.Component.registerHelper("getTruncatedTemplateText",(function(e,t,r){var n="manage"===r?100:45;return(e=CrmConvertMergeFields.convertMergeFieldsAsRequiredFormat(e,"apitolabel",Lyte.registeredMixins["crm-msg-common"].CrmIMMergeFields[t]))&&e.length>n?e.substring(0,n)+"...":e})),Lyte.Component.registerHelper("checkTemplateTextLenght",(function(e,t){return(e=CrmConvertMergeFields.convertMergeFieldsAsRequiredFormat(e,"apitolabel",Lyte.registeredMixins["crm-msg-common"].CrmIMMergeFields[t]))&&e.length>100})),Lyte.Component.registerHelper("getConvertedTemplateText",(function(e,t){return CrmConvertMergeFields.convertMergeFieldsAsRequiredFormat(e,"apitolabel",Lyte.registeredMixins["crm-msg-common"].CrmIMMergeFields[t])})),Lyte.Component.registerHelper("getMsgStatus",(function(e){var t="";switch(e){case"delivered":t="Delivered";break;case"failed":t="crm.bm.status.retry";break;case"read":t="crm.bm.status.read";break;default:t="Sent"}return I18n.getMsg(t)})),Lyte.Component.registerHelper("getMsgStatusClass",(function(e){var t="";switch(e){case"delivered":t="bm_delivered";break;case"read":t="bm_read";break;default:t="bm_sent"}return t})),Lyte.Component.registerHelper("getExtensionGroup",(function(e){var t="file";if("txt"===(e=e.toLowerCase())||"pdf"===e||"html"===e||"xml"===e)return t=e;var r={png:["jpeg","jpg","gif","png","webp","bmp","svg"],word:["doc","docx","odt","rtf"],excel:["csv","xls","xlsx","ots","xlsm","ods","numbers","fcs","bks","rdf"],ppt:["odp","pps","pot","pptx","ppt"],movie:["avi","wmv","mp4","mpeg","mpg","mov","flv","mkv","webm"],mp3:["mp3","ogg","oga","wma","m4p","m4a","au","3gp"],zip:["zip","zipx","tar","gz","z","cab","rar","bz2","lzh","7z","img","iso"]};for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];if($.inArray(e,o)>=0){t=n;break}}return t})),Lyte.Component.registerHelper("getMsgAttachIconClass",(function(e){var t="",r=e.split("."),n=r[r.length-1];switch(Lyte.Component.registeredHelpers.getExtensionGroup(n)){case"text":case"word":t="ico-worddoc";break;case"pdf":t="ico-pdf";break;case"png":t="ico-image";break;case"excel":t="ico-spreadsheet";break;case"ppt":t="ico-presentation";break;case"movie":t="ico-video";break;case"mp3":t="ico-music";break;case"zip":t="ico-zip";break;default:t="ico-unknown"}return t})),Lyte.Component.registerHelper("getFileType",(function(e){var t=e.split("."),r=t[t.length-1];return validationUtils.isNotEmpty(r)?"."+r:""})),Lyte.Component.registerHelper("getFileName",(function(e){var t=e.lastIndexOf(".");return e.substring(0,t)})),Lyte.Component.registerHelper("includes",(function(e,t){return e.includes(t)})),Lyte.Component.registerHelper("getMsgPreviewName",(function(e){return validationUtils.isEmptyString(e)?e:"img_"+e+"_preview"})),Lyte.Component.registerHelper("getColorBoxName",(function(e){return validationUtils.isEmptyString(e)?e:e+"_colorbox"})),Lyte.Component.registerHelper("getFieldValue",(function(e,t){return"object"==typeof e[t]?e[t].name:e[t]?e[t]+"":""})),Lyte.Component.registerHelper("getMsgTotalCount",(function(e,t,r,n,o){return 0!==e&&void 0!==e||(n<=r&&(e=(t-1)*r+n),o&&(e+=1)),e})),Lyte.Component.registerHelper("getNotfMsgInfo",(function(e){var t;switch(e.type){case"WORKFLOW":if(t=I18n.getMsg("crm.workflow.rule"),e.resource._deleted)t+="&nbsp-&nbsp"+e.resource.name;else t+='&nbsp-&nbsp<a target="_blank" href='+(Crm.getCrmBasePath()+"/settings/workflow-rules/"+e.resource.id)+">"+e.resource.name+"</a>";break;case"BLUEPRINT_TRANSITION":case"BLUEPRINT_STATE":if(t=I18n.getMsg("crm.label.process.blueprint"),e.resource._deleted)t+="&nbsp-&nbsp"+e.resource.name;else t+='&nbsp-&nbsp<a target="_blank" href='+(Crm.getCrmBasePath()+"/settings/blueprint/"+e.resource.id)+">"+e.resource.name+"</a>";break;case"ORCHESTRATION":if(t=I18n.getMsg("crm.label.automation.orchestration"),e.resource._deleted)t+="&nbsp-&nbsp"+e.resource.name;else t+='&nbsp-&nbsp<a target="_blank" href='+(Crm.getCrmBasePath()+"/settings/commandcenter/journey-builder/"+e.resource.id)+">"+e.resource.name+"</a>"}return t})),Lyte.Component.registerHelper("getMsgStartIndex",(function(e,t){return Math.round(t*(e-1))})),Lyte.Component.registerHelper("getInventoryHeader",(function(e){if(!validationUtils.isEmpty(e.lookup)){var t=e.lookup.module.api_name;if(t="Deals"===t?"Potentials":t,void 0===Crm.moduleInfo[t]){var r={type:"Message Inventory popup event"};r.error_message="There is no module info in Crm.moduleInfo for module name "+t,murphy.addCustomTracking(r),murphy.error(new Error(r.error_message))}return I18n.getMsg(e.field_label,Crm.moduleInfo[t].translatedSingularLabel)}return e.display_label})),Lyte.Component.registerHelper("getTrimmedMsg",(function(e,t){if(e){var r=500;if("dummy"===t)r=135;else r=500;return e.length<r?e:e.substring(0,r)+"..."}return e})),Lyte.Component.registerHelper("getCurrencyValue",(function(e){if(e){var t=e.split(" ");return currencyUtils.getCurrencySymbol(t[1])+" "+currencyUtils.getWholeOrDecimalValue(t[0],2)}return 0})),Lyte.Component.registerHelper("showSaveButton",(function(e,t,r,n){return!e&&n.auto_renewal_enabled===e||(!(!e||n.renewal_credit_count!==t||n.renewal_credit_threshold!==r)||!!e&&(!t||t<1||t>5e3||!r||r<1||r>=n.available_credit_value))})),Lyte.Component.registerHelper("showCreditsNextButton",(function(e){return!e||e<1||e>5e3})),Lyte.Component.registerHelper("showPreviewOption",(function(e){var t=e.split("."),r=t[t.length-1];return"pdf"===r||"png"===Lyte.Component.registeredHelpers.getExtensionGroup(r)})),Lyte.Component.registerHelper("getTruncatedString",(function(e,t){return e.length>t?e.substring(0,t)+"...":e})),Lyte.Component.registerHelper("getRepliedByTT",(function(e){if(e&&(Crm.userDetailsMap||Crm.getUserDetailsMap(),!validationUtils.isEmptyString(e.id)&&Crm.userDetailsMap[e.id]))return I18n.getMsg("crm.bm.replied.by.tt",Crm.userDetailsMap[e.id].name)})),Lyte.Component.registerHelper("getTranslatedDate",(function(e){if(!validationUtils.isEmptyString(e)){var t=e.split(" ");t.length>1&&(e=e.replace(t[1],I18n.getMsg(t[1])))}return I18n.getMsg(e)})),Lyte.Mixin.register("crm-license-mixin",{enableEditionTrial:function(e,t,r){var n={crmcsrfparam:csrfToken,selEdition:t,actionName:r};networkUtils.lyteInitiateRequest(Crm.getCrmBasePath()+"/Security.do","POST",{params:n}).then((function(t){-1!==t.indexOf("You cannot access this URL")?renderingUtils.displayPermissionDenied():setTimeout((function(){e&&Crm.client_tracking("Extend Trial");cookieUtils.setCookie("crmtrialEnabed","Closed",365,"/"),Utils.windowLocationReload()}),500)}),(function(t){555===t.status&&(e?_cruxUtils.showCustomMessage({params:{ltPropMessage:t.responseText,ltPropType:"warning"}}):_cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:t.responseText}}))}))},showReviewPopup:function(e,t,r){var n=networkUtils.returnDependencyFiles(["crm-trial-review.js"],ResourceConstants.CRMClient),o=networkUtils.returnDependencyFiles(["crm-trial-review.css"],ResourceConstants.CRMClient),i=n.concat(o);Lyte.injectResources(i,void 0,(function(){Lyte.Component.render("crm-trial-extend-popup",{edition:e},"#show"),Crm.trackSpotLightAction("ReviewPopupShown");var n=document.getElementById("dataSubmitted");if(t?(n.ltProp("show",!0),n.ltProp("secondaryMessage",I18n.getMsg("crm.license.trial.review.already.submitted",e))):($L("#basic").addClass("bodyBlur"),document.getElementById("extendedTrialModal").ltProp("show",!0),n.ltProp("secondaryMessage",I18n.getMsg("crm.license.trial.review.message.receive",e))),r){var o=new FormData;o.append("edition",e),store.findAll("dummy",{actionType:"pushEditionToSalesAccForReview"},!1,!1,{url:Crm.getCrmBasePath()+"/License.do",method:"POST",formData:o,isFrom:"showReviewPopup"})}}))},onCloseTrial:function(){var e=$L("crm-try-other-edition");0!==e.length&&(renderingUtils.removeFreezeLayer(),$L("#basic").removeClass("toe_blurFilter op5"),e[0].remove())}});
