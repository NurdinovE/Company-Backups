var closeAll,SalesSummaryInfo=SalesSummaryInfo||{},zCampaignaDetails=zCampaignaDetails||{};macroDivStatus=!0;var singularModule=getObj("singularModule")?getObj("singularModule").value:"",noneValue="-None-";pulseSelId={id:!0};var typedtext,feedBacktimeout,countDownInterval,scrX=0,scrY=0,pgeX=0,pgeY=0,splCharArray=new Array("`","~","!","#","^","*","[","]","{","}","|","\\",'"',";"),splCharUsersArray=new Array("`","~","!","#","^","*","[","]","{","}","|","\\",'"',";","<",">"),splCharArrayNew=new Array("'","`","~","!","#","^","*","[","]","{","}","|","\\",'"',";","/","<",">","?","&","%"),splCharArrayForTabs=new Array("`","~","!","#","^","*","[","]","{","}","|","\\",'"',";","'","&","+","%","(",")","@","_","?",":","<",">","="),currSrchResCnt=0,currSechExtMatCnt=0,noMoreTBActions=!1,zInvEntId="",zInvMod="",zInvRelId="",ZB_ESTIMATE_POST=1,ZB_ESTIMATE_EDITPAGE=5,div_on_hover=!1,div_on_click=!1,li_hover_class="li_hover",cur=-1,CaretPos=0,focusRange="",appAct=null,appMod=null,appRecId=null,appObj=null,appObj1=null,JElem=null,currAppLevel=-1,isWFExecuted=!1,isDeletedUserDetailsAvail=!1,messageBoardObj={messageBoard:null,messageBoardStyleJson:null,messageBoardDarkStyleJson:null};function showUserBusinessCard(e,t,i){var o={};if(i||(i=this),!t){var n=$(i).attr("data-params");t=(o=n?JSON.parse(n):{}).userId}"assigned_by_zia"!==o.reqFrom&&Crm.getUserBusinessCard(t,i)}function hideUserBusinessCard(e){var t=document.getElementById("popoverTooltip");t&&t.component&&t.component.hide()}function refreshFollowDiv(e,t){var i=document.getElementById("flw_spn_lnk");i&&(e&&t&&("Accounts"!=e||"Contacts"!=t&&"Potentials"!=t&&"Tasks"!=t&&"Events"!=t&&"Calls"!=t&&"Notes"!=t)&&("Leads"!=e&&"Contacts"!=e||"Tasks"!=t&&"Events"!=t&&"Calls"!=t&&"Emails"!=t&&"Notes"!=t)&&("Potentials"!=e||"Calls"!=t&&"Tasks"!=t&&"Events"!=t&&"Emails"!=t&&"Notes"!=t)||(i&&getObj("isthroughP")?($(i).empty(),i.innerHTML='<a id="pulseHistorylnk" class="smalledit" href="javascript:;" onclick="javascript:showPulseHistory(\'dlink\');sE(event);">'+getObj("awago").value+"</a>"):($(i).empty(),i.innerHTML=getObj("awago").value))),$("#timeLineContainerDV").html("").hide(),$("#timeLineContainerDataDV").html("").hide(),Crm.userDetails.timelineRevamp&&(detailView.reRenderTimeline[0]=!0),Crm.userDetails.journeysEnabled&&["Leads","Contacts"].contains(detailView.currentModule)&&(detailView.reRenderTimeline[1]=!0);var o=$("#newleft_UpdatedTime");0==o.length?1==Crm.userDetails.detailView_newUI?($(".last-updated-status").append('<span class="last-updated" id="newleft_UpdatedTime">'+I18n.getMsg("crm.calendar.lastsyncat")+" : "+I18n.getMsg("crm.general.a.while.ago")+"</span>"),detailView.lastupdateChecking()):$("#newleft_History").append('<span class="fR crm-extra-small-font-size pR15 lh27 crmNotFoundColor crm-font-regular dB" id="newleft_UpdatedTime">'+I18n.getMsg("crm.calendar.lastsyncat")+" : "+I18n.getMsg("crm.general.a.while.ago")+"</span>"):($(o).text(I18n.getMsg("crm.calendar.lastsyncat")+" : "+I18n.getMsg("crm.general.a.while.ago")),1==Crm.userDetails.detailView_newUI&&detailView.lastupdateChecking()),$("#krp_Rightpanel_TimelineContainer").remove(),$("#krp_Conversation_Container").remove(),$$rightPanel.rpCachedList=["info"],$("#fromTaskPage").length||"true"===$("#iskanbanview").val()?($("#fromTaskPage").find("#rp_parent").show(),$('[id="timeLine_dv"]:visible').click()):(null==Crm.userDetails.CUSTOMIZE_INFO.SHOW_RIGHT_PANEL||Crm.userDetails.CUSTOMIZE_INFO.SHOW_RIGHT_PANEL)&&($("#rp_parent").show(),$("#kso_rightpanel_title").find('a[tabname="info"]').click(),$$rightPanel.rpCachedList=["info"]),$("#newleft_History").hasClass("sel")&&Crm.userDetails.detailView_newUI&&detailView.switchTab(this,"Info"),$L("#upcomingActionsTitle").length>0&&loadTimeBasedActions(1,detailView.entityId,detailView.currentModule,"upcomingActionsDiv")}function toggleDivDispById(e){var t=getObj(e);t&&("none"==t.style.display?t.style.display="":(crmui.modalZIndex("nonLyte",nameObj,"close"),t.style.display="none"))}function openHelp(e,t){if(!(Crm.userDetails.DEPLOYMENT.includes("China")||Crm.userDetails.DEPLOYMENT.includes("skyDesk")||Crm.userDetails.LOCALE.includes("zh")||isMobileBrowser())){if(e.includes("zia-smart-prompt"))return void openKB("Smart Prompt");if(e.includes("zia-recommendation-analytics"))return void openKB("Recommendation Analytics");if(e.includes("zia-recommendation"))return void openKB("Recommendation");if(e.includes("workflow-suggestions"))return void openKB("System Recommendation");if(e.includes("zia-similarity-recommender"))return void openKB("Similarity");if(e.includes("call-transcription"))return void openKB("Call Transcription");if(e.includes("zia-call-intelligence"))return void openKB("Call Intelligence");if(e.includes("duplicate-image-detection"))return void openKB("Duplicate Image Detection");if(e.includes("customize-crm-account/customizing-templates/articles/email-templates"))return void openKB("Email Templates");if(e.includes("customize-crm-account/customizing-page-layouts/articles/create-conditional-layouts"))return void openKB("Conditional Layout");if(e.includes("automate-business-processes/scoring-rules/articles/multiple-scoring-rule"))return void openKB("Scoring Rules");if(e.includes("data-administration/import-data.html"))return void openKB("Data Import");if(e.includes("data-administration/data-backup/articles/requesting-data-backup"))return void openKB("Data Backup");if(e.includes("migrate-data.html"))return void openKB("Data Migration");if(e.includes("gamescope/configure-gamescope.html")||e.includes("gamescope/reward-management.html"))return void openKB("Gamescope");if(e.includes("customize-crm-account/validation-rules/articles/create-validation-rules"))return void openKB("Validation Rules");if(e.includes("process-management/approval-process/articles/set-approval-process"))return void openKB("Approval Process");if(e.includes("process-management/blueprint/articles/blueprint-an-overview")||e.includes("help/automation/processautomation-rules.html"))return void openKB("Blueprint");if(e.includes("automate-business-processes/assignment-rules/articles/set-assignment-rules"))return void openKB("Assignment Rules");if(e.includes("Compliance"))return void openKB("Compliance");if(e.includes("connect-with-customers/webforms/articles/set-up-web-forms"))return void openKB("Webforms");if("Webform_ABTesting"===e)return void openKB("Webform ABTesting");if(e.includes("customize-crm-account/customizing-page-layouts/articles/create-page-layouts"))return void openKB("Page Layouts");if(e.includes("help/zoho-phonebridge/index.html"))return void openKB("Telephony");if(e.includes("experience-center/salessignals/articles/signals-an-overview"))return void openKB("Sales Signals");if(e.includes("Subforms-Help"))return void openKB("Subforms");if(e.includes("Interlinking Modules-Help"))return void openKB("Interlinking Modules");if(e.includes("SalesIQ Integration"))return void openKB("SalesIQ Integration");if(e.includes("ZCampaign Integration"))return void openKB("ZCampaign Integration");if(e.includes("Voc"))return void openKB("Voc");if(e.includes("Competitor Alert"))return void openKB("Competitor Alert");if(e.includes("Create Forecasts"))return void openKB("Forecast");if(e.includes("organization-settings/user-management/articles/add-import-modify-re-invite-users"))return void openKB("Users");if("BusinessHours"===e)return void openKB("Business Hours");if("CalendarBooking"===e)return void openKB("Calendar Booking");if("Roles"===e||"Profiles"===e)return void openKB(e);if("Copy_Customization"==e)return void openKB("Copy Customization");if("external_Field"==e)return void openKB("CUSTOMIZE_CRM_ACCOUNT");if("Currencies"===e)return void openKB("Currencies");if(e.includes("zia-artificial-intelligence/prediction/articles/zia-s-field-prediction"))return void openKB("Field Prediction");if(e.includes("zia-artificial-intelligence/prediction/articles/predict-customer-churn-using-zia-1-11-2022"))return void openKB("Churn Prediction");if(e.includes("zia-artificial-intelligence/prediction/articles/prediction-analytics"))return void openKB("Field Prediction Analytics");if(e.includes("zia-notifications"))return void openKB("Zia Notification");if(e.includes("zia-vision"))return void openKB("Image Validation");if(e.includes("custom-ai"))return void openKB("Custom AI");if(e.includes("zia-presentation-20-11-2024"))return void openKB("Zia Presentation");if(e.includes("ask-zia-17-8-2022"))return void openKB("Ask Zia");if(e.includes("using-best-time-to-contact"))return void openKB("Best Time");if(e.includes("zia-best-time-to-contact-analytics"))return void openKB("Best Time Analytics");if(e.includes("zia-artificial-intelligence/data-enrichment-1/articles/zia-data-enrichment"))return void openKB("Data Enrichment");if("undefined"!=typeof automationActions&&!automationActions.isHelpDocAvailable()){if(e.includes("automate-business-processes/actions/articles/set-email-notifications"))return void openKB("Workflow Alert");if(e.includes("automate-business-processes/actions/articles/workflow-tasks"))return void openKB("Task");if(e.includes("automate-business-processes/actions/articles/field-updates"))return void openKB("Field Update");if(e.includes("automate-business-processes/actions/articles/webhooks-workflow"))return void openKB("Webhook");if(e.includes("automate-business-processes/actions/articles/associate-functions-workflow-rules"))return void openKB("Deluge");if(e.includes("automate-business-processes/workflow-management/articles/configuring-workflow-rules"))return void openKB("Workflow Rule")}}-1==e.indexOf("#")||t||(t=e.substring(e.indexOf("#")+1,e.length),e=e.substring(0,e.indexOf("#")));var i=e+"?crmprod=1";e.indexOf("?src=")>0&&(i=e+"&crmprod=1"),t&&(i=i+"#"+t),window.open(i,"help","toolbar=no,statusbar=no,menubar=no,directories=no,scrollbars=yes,resizeable=yes,menubar=no,width=700,height=600")}function isLeapYear(e){return e%400==0||e%100!=0&&e%4==0}function selInvalidText(e,t){e.setSelectionRange(e.value.indexOf(t),parseInt(e.value.indexOf(t)+t.length))}function clearId(e,t){var i=void 0;t&&(i=$(t).closest("form")[0].name);var o=getElm(i,e);o&&(o.value=""),$("#cvEditSave")[0]&&"block"===$("#cvEditSave")[0].style.display&&($('[id="cvEditSave"] [id="'+e+'"]')[0].value="")}function removeInsertedScripts(){if(null!=document.getElementById("insertedscript1")&&null!=document.getElementById("insertedscript2")){var e=document.getElementById("insertedscript1"),t=document.getElementById("insertedscript2");e.parentNode.removeChild(e),t.parentNode.removeChild(t)}}function openPopUp(e,t,i,o,n,r,s){var a=!1;if(i&&i.split("?")[1]){var l=i.split("?")[1];a="send_mail"===(d=(c=objectUtils.parseURLParamString(l)).action)||"sendReminder"===d}if(Crm.userDetails.isNewEditor&&a){l=i.split("?")[1];var c,d,u,m=(c=objectUtils.parseURLParamString(l)).module,p=c.entId,g=c.userIds;if(a="send_mail"===(d=c.action)||"sendReminder"===d)return"sendReminder"===d&&(u="sendReminder",EmailComposeUtil.ReminderMail={},EmailComposeUtil.ReminderMail.userId=g),void EmailLaunchUtil.SendMailEvent(m,p,u)}if(i=networkUtils.getOrgSpecificURL(i),"undefined"!=typeof crmNewPortal&&crmNewPortal)Crm.showURLChangeAlert(!1);else{var f=parseInt(renderingUtils.findPosX(t)),h=parseInt(renderingUtils.findPosY(t));if(h+=parseInt(t.offsetHeight),f+=scrX-pgeX,(h+=scrY-pgeY)+r+30>window.screen.height&&(h=renderingUtils.findPosY(t)+(scrY-pgeY)-r-30),f+n>window.screen.width&&(f=renderingUtils.findPosX(t)+(scrX-pgeX)-n),$("html").hasClass("win")&&(f=0),o=window.name==o?o+"_"+Math.floor(100*Math.random()):o,s="width="+n+",height="+r+",top=50,left="+f+","+s,"casereplyWin"==e&&"casereply"==o){var v=getObj("secondMail");null!=v&&(i+="&caseEmail="+v.value)}else"authGoogle"==e&&(window.name="zcrmmainwindow");if(-1!=i.indexOf("MailingLabel")){var y=customViewObject.selectedIds.join(";");if(null==document.getElementById("mailinglabel")){var C=document.createElement("form");C.setAttribute("id","mailinglabel"),$("#basic").append(C),document.getElementById("mailinglabel").target="_blank",document.getElementById("mailinglabel").method="post";var b=document.createElement("input");b.setAttribute("type","hidden"),b.setAttribute("name","idvals"),b.setAttribute("value",y),$("#mailinglabel").append(b)}else $("[name=idvals]").val(y);var w=networkUtils.getOrgSpecificURL(Crm.getCrmBasePath()+"/ShowSelectedCustomView.do?&mailinglabel=true&module="+customViewObject.module);document.getElementById("mailinglabel").action=w,document.getElementById("mailinglabel").submit()}else if(window[e]&&window[e].close(),window[e]=window.open(i,o,s),businessCardJson&&businessCardJson.isSendSurveyLocked&&(window[e].isRecordLocked=!0),window[e]&&"undefined"!=typeof EmailSendingUtil&&EmailSendingUtil&&EmailSendingUtil.switchedToOldEditor){window[e].switchedToOldEditor=!0,window[e].tempContent=EmailSendingUtil.tempContent,window[e].fromAddr=EmailSendingUtil.fromAddr,window[e].tempEditor=EmailSendingUtil.tempEditor,window[e].mailSubject=EmailSendingUtil.subject,window[e].toAddr=EmailSendingUtil.toAddr,window[e].fromAddr=EmailSendingUtil.fromAddr,window[e].toAddress=EmailSendingUtil.toAddress,window[e].ccAddr=EmailSendingUtil.ccAddr,window[e].bccAddr=EmailSendingUtil.bccAddr,window[e].replyTo=EmailSendingUtil.replyTo,window[e].attachArray=EmailSendingUtil.attachArray,window[e].inventObj=EmailSendingUtil.inventObj,window[e].ScheduledTime=EmailSendingUtil.ScheduledTime,window[e].ScheduleText=EmailSendingUtil.ScheduleText,EmailSendingUtil.tempContent="",EmailSendingUtil.tempEditor="richtext",EmailSendingUtil.subject="",EmailSendingUtil.toAddr="",EmailSendingUtil.ccAddr="",EmailSendingUtil.bccAddr="",EmailSendingUtil.attachArray=[],EmailSendingUtil.switchedToOldEditor=!1}}}function popUpListener(e){scrX=e.screenX,scrY=e.screenY,pgeX=e.pageX,pgeY=e.pageY}function toggle(){bottom_ig=getObj("hide"),ScrollEffect.lengthcount>=ScrollEffect.togglelimit?topple():(bottom_ig.style.display="block",ig.style.height=ScrollEffect.lengthcount+"px",ScrollEffect.lengthcount=ScrollEffect.lengthcount+3,ScrollEffect.lengthcount<ScrollEffect.togglelimit?setTimeout((function(){toggle()}),20):getObj("hide").style.display="block")}function topple(){button_ig=getObj("hide"),button_ig.style.display="none",ScrollEffect.lengthcount=ScrollEffect.lengthcount-3,ig.style.height=ScrollEffect.lengthcount+"px",ScrollEffect.lengthcount<ScrollEffect.topplelimit||setTimeout((function(){topple()}),30)}function trim(e){return e?e.replace(/\s+$/,""):""}function trimRight(e){return e.replace(/\s+$/,"")}function trimBoth(e){return"string"==typeof e?trimRight(trimLeft(e)):e}function trimLeft(e){return e.replace(/[\s| ]*/,"")}function splCharCheck(e){var t=splCharArray.length;for(i=0;i<t;i++)if(e.indexOf(splCharArray[i])>=0)return!1;return!0}ScrollEffect=function(){},ScrollEffect.lengthcount=0,ScrollEffect.closelimit=0,ScrollEffect.limit=0,ScrollEffect.togglelimit=0,ScrollEffect.topplelimit=0;var viewUserObject={splCharCheckUsers:function(e){var t=0,i=splCharUsersArray.length;for(t=0;t<i;t++)if(e.indexOf(splCharUsersArray[t])>=0)return!1;return!0}};function splCharCheckNew(e){for(i=0;i<splCharArrayNew.length;i++)if(e.indexOf(splCharArrayNew[i])>=0)return!1;return!0}function splCharCheckForTabs(e){for(i=0;i<splCharArrayForTabs.length;i++)if(e.indexOf(splCharArrayForTabs[i])>=0)return!1;return!0}function splRegexCheckValidation(e){var t=new RegExp(/(?:\<script\>)/),i=new RegExp(/(?:alert\((.*)\))/);return t.test(e)||i.test(e)}function incrId(e,t){for(var i=e.length-1;i>=0;i--){var o=e[i].id;if(o.indexOf("_")>-1){var n=o.substr(0,o.indexOf("_")+1);e[i].id=e[i].name=n+t}else{n=o.substr(0,o.indexOf("l")+1);e[i].id=e[i].name=n+t}}}function upgradeNow(e,t){document.location.href=Crm.getCrmBasePath()+"/PlanCrmAccount.do?plans="+e+"&srcplans="+t+"&actionName=PlanAccount"}function loadToolTip(e,t){var i=window.event||event;e||(e=i.target||i.srcElement);var o="";if(e.hasAttribute("data-toolTip"))o=e.getAttribute("data-toolTip");else{var n=history.state;n.backOneLevel&&(o=Crm.newHistoryArr[n.backOneLevel.historyIndex]?Crm.newHistoryArr[n.backOneLevel.historyIndex].toolTip:""),o?(o=I18n.getMsg("BackButton.back.to.name",decodeURIComponent(o)),e.hasAttribute("data-toolTip")||e.setAttribute("data-toolTip",o)):o=I18n.getMsg("BackButton.back")}renderingUtils.zctt.showtt(revertSplChrs(o),void 0,void 0,void 0,"false")}function roundNumber(e,t){return(Math.round((e*Math.pow(10,t)).toFixed(t-1))/Math.pow(10,t)).toFixed(t)}function addEventInCrm(e,t,i,o){o=o||!1,e.addEventListener?e.addEventListener(t,i,o):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i}function showHideSubMenu(e){hideMenu(e),showSubMenuLayer(),Activities.RemainderHideOnly(),$("#conditionalFieldRightSection").length&&(Crm.userDetails.RTL_ENABLED?$("#conditionalFieldRightSection").css("left","-650px"):$("#conditionalFieldRightSection").css("right","-650px")),$("#validationRuleRightSection").length&&$("#validationRuleRightSection").hide(),sE(e)}function sE(e){var t,i=renderingUtils.getTargetElem(e);try{t=i.getAttribute("data-cid")}catch(e){t=void 0}t||(e||(e=window.event),e&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()),i=null,"undefined"!=typeof ZDLibrary&&ZDLibrary.Launcher.isOpen()&&ZDLibrary.Launcher.close())}function qasE(e){if(getObj("Calendar")&&"block"==getObj("Calendar").style.display){var t=e||window.event;"INPUT"!=(t.target||t.srcElement).nodeName&&(getObj("Calendar").style.display="none",crmCalendar.calendarNode=void 0)}if(!e)e=window.event;e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),$(".dItimesdiv").length&&"INPUT"!=e.target.nodeName&&($(".dItimesdiv").hide(),$(".bestTimeListFilter").hide(),$(".tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask"))}var calendarObject={};function doActionInAjax(e,t,i,o,n,r,s,a){var l=new getHTTPObject,c=null;n&&(c=csrfParamName+"="+encodeURIComponent(csrfToken)),o?l.open("GET",e,!0):l.open("POST",e,!0),l.onreadystatechange=function(){if(4==l.readyState)if(void 0===i||i==l.responseText)if(void 0!==t){var o=getObj(t);0!==$L(o).find("div[title|='Recommendation date']").length&&Crm.client_tracking("Zia Recommendation workflow delete");var n=$("#moduleSel");if(void 0!==o.dataset.module)var c=o.dataset.module;if(n.find("option").each((function(){if(this.value.indexOf(c+":")>-1){var e=this.value.split(":");return this.value=e[0]+":"+(parseInt(e[1])-1),!1}})),-1!=t.indexOf("home_")){var d=$("#"+t);void 0!==d.data("status")&&"undefined"!=typeof workflow&&(workflow.totalRulesCount--,"active"===d.data("status")&&workflow.activeRulesCount--,workflow.checkWFRuleCount()),0===d.parent().children("div").length?(o&&o.parentNode.removeChild(o),showWFtab("result",Crm.getCrmBasePath()+"/WorkFlowRule.do?step=showAllRules","wfrule")):o&&o.parentNode.removeChild(o)}else o&&o.parentNode.removeChild(o)}else void 0!==s&&(void 0!==a&&""!=a&&"result"===a?-1!=e.indexOf("delAlert")?Lyte.Router.transitionTo({route:"crm.settings.section.alerts.index-alert"}):-1!=e.indexOf("delTask")?Lyte.Router.transitionTo({route:"crm.settings.section.tasks.index-task"}):-1!=e.indexOf("delFieldUpdate")?Lyte.Router.transitionTo({route:"crm.settings.section.field-updates.index-field-update"}):-1!=e.indexOf("delWebHook")&&Lyte.Router.transitionTo({route:"crm.settings.section.webhooks.index-webhook"}):void 0!==a&&""!=a?loadUrl("result",s):document.location.href=s);else{if(-1!=l.responseText.indexOf("tError"))return void alert(I18n.getMsg("crm.alert.thresholdError"));if(-1!=l.responseText.indexOf("AlreadyDeletedWFRule")){var u=I18n.getMsg("crm.workflow.rule.already.deleted.warning");return void wfNew.showPopup(u)}void 0!==r&&alert(r)}},l.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),l.send(c),$("#deletepopup").is(":visible")&&hideAnimatePopup("deletepopup")}function EvalInnerScript(e,t){if(e&&e.getElementsByTagName)for(var i=e.getElementsByTagName("SCRIPT"),o=0;o<i.length;o++){var n=e.ownerDocument.createElement("SCRIPT");n.type="text/javascript",n.language="javascript",""!=i[o].src?n.src=i[o].src:("text/x-jquery-tmpl"!=i[o].type||"text/x-handlebars-template"!==i[o].type)&&(n.text=i[o].text),"text/x-jquery-tmpl"!==i[o].type&&"text/x-handlebars-template"!==i[o].type&&(t?$(t).append(n):i[o].parentNode.replaceChild(n,i[o]))}}function getAccessibleObj(e){var t=document.getElementById(e);if(t)return t;try{if(opener)return opener.document.getElementById(e)}catch(e){}}function reinitGlobalVars(){Search.rowcnt=1,Search.calform=""}function getAttr(e,t){return $(e).attr(t)}function showUpdateMsg(e){jQuery("#bulkUpdateSuccess").show(),mailsetCenter("bulkUpdateSuccess"),e?jQuery("#bulkUpdateSuccess").html(I18n.getMsg("crm.name.format.updated.successfully")):jQuery("#bulkUpdateSuccess").html(I18n.getMsg("crm.updated")),$("#bulkUpdateSuccess").fadeIn().delay(1500).fadeOut("slow")}function popup(e){getObj("parentCurrencyISOCode")&&getObj("parentExchangeRate")&&(e+="&parentCurrencyISOCode="+getObj("parentCurrencyISOCode").value+"&parentER="+getObj("parentExchangeRate").value),openPopUp("newWin","",networkUtils.getOrgSpecificURL(e),"newPopup",800,400,"menubar=no,toolbar=no,location=no,status=no,scrollbars=yes,resizable=yes")}calendarObject.removeCalendar=function(){var e=$L("#Calendar")[0];e&&"block"===e.style.display&&crmCalendar.close()};var getFileSize=function(e){var t=-1;return e&&"undefined"!=typeof FileReader&&(t=e.files[0].size),t};function getElemById(e){return document.getElementById(e)}function setVisibility(e,t){var i=getElemById(e);i&&(i.style.visibility=t)}function formatNumber(e){return(e<10?"0":"")+e}function getLength(e){var t=0;for(var i in e)t++;return t}function unCheckChkBoxes(e){if(null!=(e=document.getElementsByName(e))){var t=e.length;if(null!=t)for(var i=0;i<t;i++)e[i].checked&&(e[i].checked=!1);else e.checked=!1}}function checkBoxCheckedCount(e){if(chkBoxElement=document.getElementsByName(e),null!=chkBoxElement){var t=0,i=chkBoxElement.length;if(null!=i)for(var o=0;o<i;o++)chkBoxElement[o].checked&&t++}return t}function getDocumentFragment(e){var t=document.createDocumentFragment();if(e){var i=document.createElement("div");i.innerHTML=e,t.appendChild(i.firstChild)}return t}function showAlertMessage(e,t,i,o){var n=getObj(e);n&&(1==t?(n.style.position="absolute",n.style.lineHeight="",n.style.fontSize="14px"):(n.className="redbox p10",n.style.textAlign="left",n.style.position="",n.style.lineHeight="1.5",n.style.fontSize="12px"),$(n).empty(),n.innerHTML=i,n.style.display="block",null!=o&&$("#"+e).delay(o).fadeOut())}function getDataType(e){return-1==(e=parseInt(e))||32==e?"int":36==e?"float":24===e||202===e||200===e||786===e||333===e||14===e?"date":301==e?"bool":"string"}function populateTimeVal(e){li_hover_class="li_hover",cur=-1,sTimeOut=void 0,availStat=void 0;var t=e?$(e):$(".ddTime");sdTime=void 0,constructList(),$("#sdiv,.AmpmnewValues").off("mouseleave").mouseleave((function(e){div_on_hover=!1})).off("mouseenter").mouseenter((function(e){div_on_hover=!0})),t.off("keyup keydown focus blur click"),t.on("keyup",(function(e){switch(e.keyCode){case 38:setPos(-1);e.preventDefault();break;case 40:setPos(1);e.preventDefault();break;case 37:case 39:break;case 13:"none"==$("#sdiv").css("display")?(this.setAttribute("time",this.value),-1!==cur&&parseTime($(this),$($(".AmpmnewValues li").get(cur)))):cur>0&&parseTime($(this),$($("#times li").get(cur))),$(".AmpmnewValues li").hasClass(li_hover_class)&&e.preventDefault(),$("#sdiv").hide(),$(".bestTimeListFilter").length&&($(".bestTimeListFilter").hide(),$(".tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask")),$(".AmpmnewValues").addClass("hide");break;case 9:if($(this).hasClass("Crm_Calls_CALLSTARTDATETIME"))break;default:if(!$(this).hasClass("Crm_Calls_CALLSTARTDATETIME")){var t=$(this).val();$(this).val().length,t.substr(0,5);"HH:mm"!==Crm.userDetails.TIME_FORMAT&&appendAmpm(this,e),switchFocus(this),$("#bestTimeListFilterId").hide(),$("#sdiv").hide()}}})),t.on("focus",(function(e){var t,i;if((t=$(".bestTimeListFilter")).length&&(i=$(".bestTimeListFilter").outerHeight()),getObj("Calendar")&&"block"===getObj("Calendar").style.display){var o=e||window.event;o.target||o.srcElement;crmCalendar.calendarNode=void 0,getObj("Calendar").style.display="none"}if(sdTime=$(this),null!=sdTime.attr("readonly")&&"readonly"===sdTime.attr("readonly"))return!1;$(this).attr("autocomplete","off");$(this).offset();var n=$("#sdiv"),r=sdTime.closest("#ctinotifier").length>0,s=sdTime.closest(".topBandTime").length>0,a=$("#updateCallStatus").is(":visible");if(r){var l=sdTime.offset().left,c=sdTime.offset().top+sdTime.outerHeight()-$L(window).scrollTop();n.css({top:c,left:l-1,position:"fixed"})}else if(s)l=sdTime.offset().left,c=sdTime.offset().top+sdTime.outerHeight();else{l=sdTime.offset().left,c=sdTime.offset().top+this.offsetHeight;$(".AmpmnewValues").hasClass("hide")&&(l=parseInt(l)-parseInt(28),c+=6,t.css({top:parseInt(c)+parseInt(287)-i,left:l}).show())}$(this).get(0);if($(".AmpmnewValues").hasClass("hide")&&(n.show(),n.css({top:c,left:l-1,position:""}),$("#searchCreatePopup .popup-model-content").on("scroll",(function(){$("#sdiv").hide()}))),a){c=sdTime.offset().top+sdTime.outerHeight()-$L(window).scrollTop();if(Crm.userDetails.RTL_ENABLED)l=sdTime.offset().left-($(".ampmSpan#calltimefrmampmSpan").outerWidth()-1);else{l=sdTime.offset().left;t.css("left",l)}$(".AmpmnewValues").hasClass("hide")&&$(".dItimesdiv").length?(l=parseInt(l)-parseInt(28),c+=6,t.css({top:parseInt(c)+parseInt(287)-i,left:l}).show(),n.css({position:"absolute"})):n.css({position:"fixed"}),n.css({top:c,left:l-1})}setCTPos($(this).attr("time")),$(this).parent().hasClass("time_h24")?($("#sdiv").width("45"),$(this).css("margin-right","6px")):($("#sdiv").width("65"),$(this).css("margin-right","0px")),crmBstTime.showBestTimeInList()})),t.on("blur",(function(e){div_on_click||div_on_hover?div_on_click||setTimeout((function(){sdTime.focus()}),0):(parseTime($(this),void 0,!0),$("#sdiv").hide(),$(".bestTimeListFilter").hide(),$(".tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask"),$(".AmpmnewValues").addClass("hide"),setDefault(),sdTime=void 0);div_on_click=!1})),t.on("keydown",(function(e){if(doGetCaretPosition(this),restrictType(e,this),13==e.keyCode)return e.preventDefault(),renderingUtils.stopEvent(e),!1})),t.on("click",(function(e){consoleCaretPos(this),crmBstTime.showBestTimeInList()})),t.each((function(){var e=$(this);e.parent().find("span").off("click").click((function(){setTimeout((function(){e.trigger("focus")}),0)}))})),t=null}function parseTime(e,t,i){var o,n,r,s,a=void 0===t;o=a?e.val().match(/(\d{1,2})(\d*):(\d{1,2})/):t.attr("time").split(":");var l=getFCT();if(o){var c=e.attr("fldlabel");if(a){if(n=parseInt(o[1],10),r=parseInt(o[3],10),"HH:mm"!==Crm.userDetails.TIME_FORMAT){var d=c+"_ampmSpan";-1!=c.indexOf("@{pattern}")&&(d=c.replace("@{pattern}","ampmSpan")),s=$("span[id='"+d+"']").attr("ampm")}}else n=parseInt(o[0],10),r=parseInt(o[1],10),s=o[2];n=n<12?formatNumber(n):n,r=formatNumber(r),s&&""!==s?(e.attr("time",[n,r,s].join(":")),$(".bestTimeListFilter").hasClass("bottomAlignClicked")||setTime([n,r,s].join(":"),i)):(e.attr("time",[n,r].join(":")),$(".bestTimeListFilter").hasClass("bottomAlignClicked")||setTime([n,r].join(":"),i))}else e.attr("time",l.F),$(".bestTimeListFilter").hasClass("bottomAlignClicked")||setTime(l.F)}function setDefault(){cur=-1}function setCTPos(e){var t=$("#times li[time='"+e+"']");if(t.length){cur=t.index();var i=t[0];$L("#sdiv")[0].scrollTop=i.offsetTop-i.offsetHeight,setPos()}else $("#times li").removeAttr("class")}function getFCT(){var e="00",t="",i="00",o=new Date;o.getMinutes()>30?o.setHours(o.getHours()+1):e="30","HH:mm"!==Crm.userDetails.TIME_FORMAT?(t=o.getHours()>11?"PM":"AM",i=formatNumber((o.getHours()+11)%12+1)):i=formatNumber(o.getHours());var n=""!==t?[i,e,t].join(":"):[i,e].join(":");return{Hour:i,Min:e,AMPM:t,F:n}}function setTime(e,t){var i="object"==typeof e?$(e).attr("time"):e,o=i.split(":");if("HH:mm"===Crm.userDetails.TIME_FORMAT?o[0]>=24&&(o[0]="23","00"!==o[1]&&(o[1]="59")):o[0]>=12&&(o[0]="12"),sdTime){var n=sdTime.attr("fldlabel");if(sdTime.attr("isProperty"))$('input[name="property('+n+'hour)"]').val(o[0]),$('input[name="property('+n+'minute)"]').val(o[1]),"HH:mm"!==Crm.userDetails.TIME_FORMAT&&(""===o[2]&&(o[2]="AM"),$('input[name="property('+n+'ampm)"]').val(o[2]),$('span[id="'+n+'_ampmSpan"]').attr("ampm",o[2]),$('span[id="'+n+'_ampmSpan"]').text(I18n.getMsg(o[2])));else{var r=n.replace("@{pattern}","hour"),s=n.replace("@{pattern}","minute"),a=n.replace("@{pattern}","ampm"),l=n+"_ampmSpan";-1!=n.indexOf("@{pattern}")&&(l=n.replace("@{pattern}","ampmSpan"));var c=sdTime.hasClass("newSrchView");if(c){var d=sdTime.closest(".searchcrt");d.find("#"+r).val(o[0]),d.find("#"+s).val(o[1])}$("input[name='"+r+"']").val(o[0]),$("input[name='"+s+"']").val(o[1]),"HH:mm"!==Crm.userDetails.TIME_FORMAT&&(""===o[2]&&(o[2]="AM"),c?(d.find("#"+a).val(o[2]),d.find("#"+l).attr("ampm",o[2]).text(I18n.getMsg(o[2]))):($("input[name='"+a+"']").val(o[2]),$("span[id='"+l+"']").attr("ampm",o[2]),$("span[id='"+l+"']").text(I18n.getMsg(o[2]))))}sdTime.attr("time",i),sdTime.val(o[0]+":"+o[1]),"Call Start Time"!==n&&"calltimefrm@{pattern}"!==n||Events.callDuplicateCheckHandler(n,o),renderingUtils.triggerEvent("change",sdTime),sdTime=void 0}}function setPos(e){e&&"block"!=$("#sdiv").css("display")&&$(".AmpmnewValues").hasClass("hide")&&(setDefault(),setTimeout((function(){sdTime.focus()}),0),e=void 0);var t=$("#times li");$(".AmpmnewValues").length&&!$(".AmpmnewValues").hasClass("hide")&&(t=$(".AmpmnewValues li")),e&&(cur=(cur+=e)<0?t.length-1:cur>=t.length?0:cur),t.removeClass(li_hover_class);var i=t.get(cur);$(i).addClass(li_hover_class);var o=$("#sdiv")[0];return e&&scrollPos(e,o,i),$(i)}function scrollPos(e,t,i){var o=i,n=t;1==e?o.offsetHeight+o.offsetTop>n.scrollTop+n.offsetHeight?n.scrollTop=n.scrollTop+o.offsetHeight:n.scrollTop=0==cur?0:n.scrollTop:o.offsetTop<=n.scrollTop?n.scrollTop=n.scrollTop-o.offsetHeight:o.offsetHeight+o.offsetTop>n.scrollTop+n.offsetHeight&&(n.scrollTop=o.offsetTop-o.offsetHeight)}function appendAmpm(e,t){var i=$(e).val(),o=$(e).val().length;i=i.substr(0,5);if(5==o){var n=$(e).offset();"HH:mm"!==Crm.userDetails.TIME_FORMAT&&($(".AmpmnewValues").removeClass("hide").show(),$(".AmpmnewValues").css({top:n.top+23,left:n.left}),$(".bestTimeListFilter").hide(),$(".tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask"),$(".AmpmnewValues li").removeClass("li_hover").each((function(e,t){0==e?$(this).attr("time",i+":AM").text(i+" "+I18n.getMsg("AM")):$(this).attr("time",i+":PM").text(i+" "+I18n.getMsg("PM"))})),setDefault()),sdTime&&sdTime.val(i)}}function restrictType(e,t){sdTime.attr("maxlength",5);for(var i=0,o=(typedtext=sdTime.val()).length;i<o;i++)typedtext[i];var n=isNaN(e.key);9!=e.keyCode&&(CaretPos>=3&&37==e.keyCode&&(fixValues(t),selectRange($(t),0,2),doGetCaretPosition(t)),CaretPos<=2&&39==e.keyCode&&(fixValues(t),selectRange($(t),3,5),doGetCaretPosition(t)),2==CaretPos&&186!==e.keyCode&&8!==e.keyCode&&59!==e.keyCode&&e.preventDefault(),46!=e.keyCode&&8!=e.keyCode&&("HH:mm"!==Crm.userDetails.TIME_FORMAT?0==CaretPos?(-1==["0","1"].indexOf(e.key)||n)&&e.preventDefault():1==CaretPos?0==typedtext[0]?n||"0"==e.key?e.preventDefault():focusRange="mm":1==typedtext[0]&&(-1==["0","1","2"].indexOf(e.key)||n?e.preventDefault():focusRange="mm"):3==CaretPos?(-1==["0","1","2","3","4","5"].indexOf(e.key)||n)&&e.preventDefault():4==CaretPos&&n&&e.preventDefault():0==CaretPos?(-1==["0","1","2"].indexOf(e.key)||n)&&e.preventDefault():1==CaretPos?0==typedtext[0]?n||"0"==e.key?e.preventDefault():focusRange="mm":1==typedtext[0]?n?e.preventDefault():focusRange="mm":2==typedtext[0]&&(-1==["0","1","2","3"].indexOf(e.key)||n?e.preventDefault():focusRange="mm"):3==CaretPos?(-1==["0","1","2","3","4","5"].indexOf(e.key)||n)&&e.preventDefault():4==CaretPos&&n&&e.preventDefault()))}function consoleCaretPos(e){doGetCaretPosition(e),fixValues(e),0!=CaretPos&&1!==CaretPos&&2!=CaretPos||selectRange($(e),0,2),(4==CaretPos||CaretPos>=5||3==CaretPos)&&selectRange($(e),3,5)}function fixValues(e){var t=$(e).val().split(":");"undefined"!==t[0]&&1===t[0].length?t[0]=0+t[0]:"undefined"!==t[0]&&0===t[0].length&&(t[0]="01"+t[0]),"undefined"!==t[1]&&1===t[1].length?t[1]=0+t[1]:"undefined"!==t[1]&&0===t[1].length&&(t[1]="00"+t[1]),$(e).val(t[0]+":"+t[1])}function switchFocus(e){"hh"===focusRange?(selectRange($(e),0,2),focusRange=""):"mm"===focusRange&&(selectRange($(e),3,5),focusRange=""),0===$(e).val().length&&0==sdTime.val().length&&($(e).val("01:00"),focusRange="hh",switchFocus(e))}function logout(e){cookieUtils.deleteCookie("classicId"),"undefined"!=typeof CTIAPI&&CTIAPI.removeClientStorage(""),Utils.windowLocationHref(e),"object"==typeof CrmTracking&&CrmTracking.remTrackingRelStuff()}function showRecentIteminChatBar(){"undefined"!=typeof Storage&&JSON.parse(localStorage.getItem("recentItemSts")),WebMessanger.disableWMSStatus();var e="";if(Lyte.Router.getRouteInstance().transition.info.route.includes("crm.gamification")||(e="<td><div class='rItemIcon cP pR crm-wms-icon accessibility-clickable-elem' id='rItmes_l' data-zcqa='rItem' tabindex='0' role='button' lt-prop-aria-keydown='true' aria-label='"+I18n.getMsg("crm.recentitems.title")+"' onclick='refreshRecentItem1();slidelt();' onmouseenter='emptyLocalStoreRI(this);crmui.showTooltip(\""+I18n.getMsg("crm.recentitems.title")+"\")' onmouseleave='crmui.hideTooltip(this)' data-title='"+I18n.getMsg("crm.recentitems.title")+"'><crmutil-icon non-lyte=\"true\" icon-name='timer-recent' icon-class='zcicn-timer-recent crmBaseIcon' class='dIB vaM'></crmutil-icon></div></td>"),Crm.userDetails.isAccessibilityConfigSupported&&(e=e+"<td class='vaM pR'><div class='cP' style='display:none;position: absolute;font-size: 1.1rem;background-color: #f56d6d;border-radius: 8px;top:-14px;right: 3px; text-align:center; min-width: 18px;color: #fff;padding: 3px 5px; z-index: 1;line-height:1.1rem'></div><div onclick='accessibilityShortcut();'  data-zcqa='accessibility_shortcut' id='accessibilityWMS' style='display:block' class='fL lh25 pR10 cP crm-font-regular crmBaseColor crm-wms-icon pR' tabindex='0' role='button' lt-prop-aria-keydown='true' aria-label='"+I18n.getMsg("Accessibility")+"' lt-prop-title='"+I18n.getMsg("Accessibility")+"'> <crmutil-icon class='mT5' icon-name='accessibility' icon-class='zcicn-accessibility zcicn16 zcicn_black'></crmutil-icon></div></td>",Lyte.Service.getInjected("globalAccessibilityServices")&&Lyte.Service.getInjected("globalAccessibilityServices").getVariable("voiceAssistantEnable")&&(e=e+"<td id='voiceAssiatanceWMS'><div class='cP pR pT4 crm-wms-icon' id='ac_vcAsst' onclick='openVoiceAssist()' onmouseenter='crmui.showTooltip(\""+I18n.getMsg("Zia Voice Assistance")+"\")' onmouseleave='crmui.hideTooltip(this)' data-zcqa='voice_assistance' data-title='"+I18n.getMsg("Zia Voice Assistance")+"'><crmutil-icon icon-name='mic' icon-class='zcicn-mic  zcicn_black'></crmutil-icon></div></td>",Lyte.registeredMixins["crm-keyboard-shortcutsmixin"]&&Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].bindShortcuts("General",[{action:"Open Voice Assistance",key_combination:["Control","KeyZ","KeyV"],deletable:!1,editable:!1}]))),"false"===isCrmPlusUser&&"false"===isZohoOneUser&&"undefined"!=typeof gcBotHelpOptionAvailable&&(e=e+'<td><div class="wms_help_icon_parent cP pR crm-wms-icon vaM w60 p5" data-zcqa="gcHelp" tabindex="0" role="button" lt-prop-aria-keydown="true" aria-label="'+I18n.getMsg("crm.label.context.help")+'" onclick="initAsap(\'gchelpinit\')"><crmutil-icon icon-name="help" icon-class="zcicn-help iconWhite "></crmutil-icon><span class="wms_help_icon vaM dIB"></span><span class="crmWhiteColor crm-font-semibold dIB vaM crm-extra-small-font-size mL2">'+I18n.getMsg("crm.label.context.help")+"</span></div></td>"),!Crm.userDetails.CLIENT_ACCOUNT){if(isConfiguredUser("AWSlily")){e="<td><div class='crm-wms-icon topsetting twilioStat cP pR telpEnabled' data-zcqa='telephonyStatusIcon' href='javascript:;' onmouseenter='crmui.toolTip_show(this,\"right\",this.getAttribute(\"data-title\"))' onmouseleave='crmui.hideTooltip(this)' data-title='"+I18n.getMsg("crm.tpi.ctiapi.title.logout","Amazon Connect")+"' id='lily_status_img' onclick='lilyUINotify.lily_config_show_login();' style=''><span class='twistatusimg phoneIcon-Rc' id='lily_status_icon'></span></div></td>"+e}if(isConfiguredUser("twilio")&&(e="<td><div class='crm-wms-icon topsetting twilioStat twilioStatoffline cP pR' data-zcqa='telephonyStatusIcon' href='javascript:;' onmouseenter='crmui.toolTip_show(this,\"center\",this.getAttribute(\"data-title\"))' onmouseleave='crmui.hideTooltip(this)' data-title='  off-line  ' id='twistatusimg' statusvalue='0' style='display:none' onclick='ctiApiNotifier.showTwiStatusPopup();'><span class='twistatusimg toffline' id='twistatusimgicon'></span></div></td>"+e),$(".remainder-notifi").length>0){var t="";0==Activities.reminderCount&&(t='style="display: none"');var i=$("#notificationCount").text();e='<td><div class="crm-wms-icon timericon cP pR accessibility-clickable-elem" tabindex="0" role="button" lt-prop-aria-keydown="true" aria-label="'+I18n.getMsg("crm.activity.reminder")+'" data-zcqa="remainder" onmouseenter="crmui.showTooltip(\''+I18n.getMsg("crm.activity.reminder")+'\');" onmouseleave="crmui.hideTooltip(this)" onclick="Activities.showHideRemainder();" data-title="'+I18n.getMsg("crm.activity.reminder")+'"><crmutil-icon non-lyte="true" icon-name="alarm" icon-class="zcicn-alarm crmBaseIcon" class="dIB vaM pT6"></crmutil-icon><span id="reminder_notification" '+t+" >"+i+"</span></div></td>"+e,isLoadedInCRMPlusIFrame()&&CrmPlusImpl.trigger("setNotificationCount",["reminder",i])}$("#wVisTitBar").length>0&&(e="<td>"+$("#wmsstatusbar").html()+"</td>"+e),e="<td class='pR'><div style='display:none !important;' class='cP pR crm-wms-icon accessibility-clickable-elem' id='di-notification-icon' tabindex='0' role='button' lt-prop-aria-keydown='true'  aria-label='"+I18n.getMsg("crm.intelligence.name")+'\' onclick="Lyte.Mixin.get(\'crm-zianotification-helper\').getZiaNotificationSummary(event,this)" onmouseenter=\'emptyLocalStoreRI(this);crmui.toolTip_show(this,"center","'+I18n.getMsg("crm.intelligence.name")+"\")' onmouseleave='crmui.hideTooltip(this)'><span><crmutil-icon icon-name='zia-logo' icon-class='zcicn-zia-logo crmBaseIcon mT7 mL7' class='vaM'></crmutil-icon></span><div class='ziaCount'></div></div></td>"+e,e="<td class='vaM'><div class='fL lh25 pR10 cP crm-font-regular crmBaseColor cP crm-wms-icon pR pL7 accessibility-clickable-elem' id='sticky-notes-icon' tabindex='0' role='button' lt-prop-aria-keydown='true' aria-label='"+I18n.getMsg("crm.sticky.title")+"' onclick=\"Lyte.Mixin.get('crm-sticky-mixin').stickyRenderer()\" data-active='view' data-zcqa='stickies_view' onmouseenter='crmui.showTooltip(\""+I18n.getMsg("crm.sticky.title")+"\")' onmouseleave='crmui.hideTooltip(this)' ><crmutil-icon icon-name='stickynotes' icon-class='zcicn-stickynotes crmBaseIcon mT7 mL7' class='dIB vaM'></crmutil-icon><span id='sticky-notification-count' class='pA lh16 crm-extra-small-font-size'></span></div></td>"+e,"true"===Crm.userDetails.isMotivatorEnabled&&(e="<td class='vaM dIB' id= 'salesmotivatornotification'><div class='fL lh25 pR10 cP crm-wms-icon pR accessibility-clickable-elem' data-active='view'  data-zcqa='game_view' tabindex='0' role='button' lt-prop-aria-keydown='true' aria-label='"+I18n.getMsg("gs.salesmotivator")+"' lt-prop-title='"+I18n.getMsg("gs.salesmotivator")+"' id='my_rank' onclick=\"networkUtils.openUrl('"+Crm.getCrmBasePath()+"/gamification/home');Crm.client_tracking('SM Icon Click from CRM');return false;\" > <span id='gameentrancecolour' ><crmutil-icon non-lyte=\"true\" icon-name='motivator' icon-class='zcicn-motivator zcicn14 vaM' class='zcicn14 crmBaseIcon mT7 mL7 '></crmutil-icon></span><span class='pA' id='motivatorBlinkIcon'></span></div></td>"+e),"true"===Crm.userDetails.isChatbotEnabled&&(e="<td class='vaM' ><div class='fL lh25  cP crmBaseColor cP askZiaIcon crm-wms-icon pR accessibility-clickable-elem' id='askZiaCont' tabindex='0' role='button' lt-prop-aria-keydown='true' aria-label='"+I18n.getMsg("crm.chatbot.ask.zia")+"' onclick=\"Lyte.Mixin.get('crm-chatbot-helper').constructChatbotDiv()\"><div class='dIB crm-font-bold' style='margin-top:2px'>"+I18n.getMsg("crm.chatbot.ask.zia")+"</div></div></td>"+e)}e="<td id='MultiOperationSchedular' class='pR dN'><div class='cP pR crm-wms-icon pT5 w40' onclick='crmSchedulerNotification.hideInSchedularBar(this);'><span class='svgIcons rls-progress-icon dIB'></span></div></td>"+e,e="<td><div class='fL lh25  cP crm-font-bold crmBaseColor cP   crm-wms-icon pR hide' id='maxComposeBtn' tabindex='0' role='button' lt-prop-aria-keydown='true' aria-label='"+I18n.getMsg("crm.label.mail")+"' onclick='EmailLaunchUtil.restoreComposePopup();' ><div class='dIB' style='margin-top:2px'>"+I18n.getMsg("crm.label.mail")+"</div></div></td>"+e,Crm.userDetails.isSandbox||Crm.userDetails.CLIENT_ACCOUNT||(e="<td class='vaM pR'><div id='mbRippleDiv'></div><div id='stackedNumber' onclick='displayFeature();' class='cP' data-zcqa='msgboardcount_view' style='display:none;position: absolute;font-size: 1.1rem;background-color: #f56d6d;border-radius: 8px;top:-14px;right: 3px; text-align:center; min-width: 18px;color: #fff;padding: 3px 5px; z-index: 1;line-height:1.1rem'></div><div id='msgBoardDisplay' tabindex='0' role='button' lt-prop-aria-keydown='true' aria-label='"+I18n.getMsg("crm.msgboard.icon.hover.lable")+"' onclick='displayFeature();closeGcHelpBotOption()' style='display:block' class='fL lh25 pR10 cP crm-font-regular crmBaseColor cP crm-wms-icon pR'  data-active='view'  data-zcqa='msgboard_view' lt-prop-title='"+I18n.getMsg("crm.msgboard.icon.hover.lable")+"'> <span class='msg-board-icon' style='display:inline-block; top:0px; bottom:0px; left:0px; right:0px;position:absolute; margin:0 auto !important; margin-top: 4px !important;text-align: center;z-index: -1;'><crmutil-icon icon-name='messageboard' icon-class='zcicn-messageboard crmBaseIcon' class='dIB vaT'></crmutil-icon></span><span id='stackedNumber'></span></div></td>"+e),e='<table class="fR crm-chatBarIcons" cellpadding="0" cellspacing="0" id="chatBarIcons"><tr>'+e,WebMessanger.setServiceStatus(e),Crm.userDetails.isSandbox||Crm.userDetails.CLIENT_ACCOUNT||"CSEZ"==Crm.userDetails.DEPLOYMENT||(crmTab.isLiveDeskEnabled?setTimeout((function(){initializeMsgBoard()}),1e3):initializeMsgBoard());try{CScriptLib&&featuresAvailable.CSCRIPT_COMMANDS&&Crm.userDetails.IS_CONFIRMED_IN_IAM&&(Crm.userDetails.permissions.Crm_Implied_Advanced_Dev_Access||_cscript._hotEngine._engine&&_cscript._hotEngine._init&&_cscript._hotEngine._jsonobj&&0!==Object.keys(_cscript._hotEngine._jsonobj).length)&&Lyte.registeredMixins["crm-cscript-global-mixin"].addCSDivInWMS()}catch(e){murphy.error(e)}}function displayFeature(){crmui.fromCloseOther||crmui.closeOtherWMSBars("announcement");var e=$L("#viewFeatures"),t=document.getElementById("viewFeatures"),i=document.querySelector("#msgBoardDisplay .msg-board-icon"),o=$L(".msg-board-icon .zcicn-messageboard")[0];if(0===e.length){var n=document.createElement("a");n.style="display: block;cursor:pointer;z-index: 306;width: 400px;text-align: center; padding-bottom: 11px;background-color: var(--bg_white);font-size: var(--crm-extra-medium-font-size);font-weight:700;color: var(--linkColor);right:0;bottom:28px;position:fixed;box-shadow: 0px -2px 4px rgb(135, 151, 161, 0.2);",n.textContent=I18n.getMsg("crm.msgboard.whatsnew",Crm.appName),n.href=RebrandLinkUtil.getProperty("whatsnew_canvas")+"/?src=inproduct-notification",n.target="_blank";var r=document.createElement("img");r.classList.add("mR5","pR","top3","h25");var s=document.createAttribute("src");s.value=networkUtils.getImageUrl("Blinking_Star.gif",ResourceConstants.CRM),r.setAttributeNode(s),n.prepend(r);var a=document.createElement("img");a.classList.add("mL5","pR","top3","h25"),a.style.transform="rotateY(180deg)";var l=document.createAttribute("src");l.value=networkUtils.getImageUrl("Blinking_Star.gif",ResourceConstants.CRM),a.setAttributeNode(l),n.appendChild(a);var c=document.createAttribute("data-zcqa");c.value="msgboard_whatsnew",n.setAttributeNode(c);var d=document.createElement("div");d.id="viewFeatures",d.appendChild(n),document.body.appendChild(d),i.classList.add("msg-board-icon-active"),o.style.fill="#f56d6d",$L("html").addClass("oH"),document.getElementById("wVisTitBar")&&(i.classList.add("msg-board-icon-active"),o.style.fill="#f56d6d",document.getElementById("stackedNumber").style.display="none"),crmui.WMSBarOpened(document.getElementById("mics_stacked_carpet"))}else if("block"==t.style.display||0==t.style.display.length){t.style.display="none",i.classList.remove("msg-board-icon-active"),o.style.fill="#313949";var u=$L("html"),m=document.getElementById("stNotes");m&&"block"===m.style.display?u.addClass("oH"):u.removeClass("oH")}else t.style.display="block",i.classList.add("msg-board-icon-active"),o.style.fill="#f56d6d",document.getElementById("stackedNumber").style.display="none",$L("html").addClass("oH"),crmui.WMSBarOpened(document.getElementById("mics_stacked_carpet"));var p=document.getElementById("remainder-notifi"),g=document.getElementById("wms_notebook_icon");p&&"block"===p.style.display&&Activities.RemainderHideOnly(),g&&"true"===g.getAttribute("data-shown")&&g.setAttribute("data-shown","false");var f=$L("crm-accessibility-shortcut")[0];f&&f.component.getData("showModal")&&f.component.setData("showModal",!1)}function initializeMsgBoard(){try{messageBoardObj.messageBoardStyleJson={home:{topband:{backgroundColor:"#338CF0",text:I18n.getMsg("crm.msgboard.announcements.lable",Crm.appName),color:"#FFF",fontSize:"19px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700",zIndex:"100",boxShadow:"1px 0px 1px #bbc3ca",borderBottom:"",borderTop:"",borderLeft:"",borderRight:""},closeButton:{icon:"close",iconColor:"#FFF"},historyButton:{showDynamicHistory:!0,withNotification:{text:I18n.getMsg("crm.msgboard.see.history"),color:"#338CF0",buttonColor:"#fff",fontSize:"12px",fontFamily:"Lato,  sans-serif",fontWeight:"600",icon:"arrow_forward",iconColor:"#338CF0","text-decoration":"underline"},withNoNotification:{text:I18n.getMsg("crm.msgboard.view.history"),color:"#fff",fontSize:"14px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"500",backgroundColor:"#338cf0","text-decoration":"underline"}},background:{color:"#F6F9FC"},genreSelect:{selection:{backgroundColor:"#ECF3FA",color:"#22252A",fontSize:"14px",fontFamily:"Lato, sans-serif",fontWeight:""},item:{color:"#313949",fontSize:"14px",fontFamily:"Lato, sans-serif",fontWeight:""}},descriptionText:{noDataDescription:{icon:"question_answer",iconColor:"#616E88",heading:{text:"",color:"#313949",fontSize:"18px",fontWeight:"800",fontFamily:"Zoho_Puvi_Regular, sans-serif !important"},description:{text:I18n.getMsg("crm.msgboard.no.notification.lable"),color:"#313949",fontSize:"20px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700 !important"}}}},history:{topband:{backgroundColor:"#338CF0",text:I18n.getMsg("crm.label.general.history"),color:"#FFF",fontSize:"20px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700",boxShadow:"1px 0px 1px #bbc3ca"},backButton:{icon:"arrow_back",iconColor:"#FFF"},closeButton:{icon:"close",iconColor:"#FFF"},background:{color:"#F5F9FC"},descriptionText:{noDataDescription:{text:"You have viewed all updates",color:"#313949",fontSize:"20px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700"}}},showMessagesWithUndefinedGenreText:!1,genreTexts:{"All Messages":I18n.getMsg("crm.msgboard.drop.down.lable"),"User Education":I18n.getMsg("crm.msgboard.genre.usereducation"),Webinars:I18n.getMsg("crm.msgboard.genre.webinars"),Events:I18n.getMsg("crm.msgboard.genre.events"),"Feature Releases":I18n.getMsg("crm.msgboard.genre.featurereleases"),Announcements:I18n.getMsg("crm.msgboard.icon.hover.lable"),Community:I18n.getMsg("crm.msgboard.genre.community"),Retention:I18n.getMsg("crm.msgboard.genre.retention"),"Tips and Tricks":I18n.getMsg("crm.msgboard.genre.tips"),Survey:I18n.getMsg("crm.msgboard.genre.survey"),Enhancements:I18n.getMsg("crm.msgboard.genre.enhancement")},genreStyles:{renderGenreStyles:!0,default:{color:"#6C6C6C",fontSize:"12px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"",backgroundColor:"#EBEBEB",padding:"4px 12px",borderRadius:"6px",border:"none"},"Tips and Tricks":{color:"#8A390D",backgroundColor:"#FFF7F0"},Enhancements:{color:"#6C6C6C",backgroundColor:"#EBEBEB"},Survey:{color:"#D60000",backgroundColor:"#FFF0F0"},"User Education":{color:"#9E1B4A",backgroundColor:"#FFEAF3"},Community:{color:"#1E807A",backgroundColor:"#E1FFFD"},Events:{backgroundColor:"#EFF9FF",color:"#256DDA"},Webinars:{backgroundColor:"#FFF7D9",color:"#786214"},"Feature Releases":{backgroundColor:"#F3FBE9",color:"#029200"},Announcements:{backgroundColor:"#F7F0FF",color:"#6422B9"}},messageStyles:{renderUndefinedMessageTemplates:"true","message-template-default-styles":{heading:{color:"#313949",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:"700"},sideHeading:{color:"#616e88",fontSize:"13px",fontFamily:"Lato, sans-serif",fontWeight:"400"},description:{color:"#616e88",fontSize:"14px",fontFamily:"Lato, sans-serif",fontWeight:"400"},category:{color:"#f48a4f",fontSize:"14px",fontFamily:"Lato, sans-serif",backgroundColor:"#fff7f0",margin:"0 10px",padding:"2px 8px 2px 10px",borderRadius:"6px",fontWeight:""},background:{backgroundColor:"#fff",border:"none"},hover:{showHover:!0,hoverColor:"#E5F4FF"}},"message-template-options-styles":{heading:{color:"#2e4156",fontSize:"18pxpx",fontFamily:"Lato,  sans-serif",fontWeight:"700"},sideHeading:{color:"#747f8c",fontSize:"13pxpx",fontFamily:"Lato,  sans-serif",fontWeight:""},description:{color:"#2e4156",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""},category:{color:"#6b21b7",background:"#fff7f0",fontSize:"14px",fontFamily:"Lato, sans-serif",padding:"2px 8px 2px 10px",borderRadius:"6px",fontWeight:""},selectBox:{backgroundColor:"#fff",placeHolder:{text:"Choose your option",color:"#02e415600",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""},selection:{color:"#2e4156",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""},item:{color:"#2e4156",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""}},sendButton:{icon:"send",iconColor:"#5780ce"}}}},messageBoardObj.messageBoardDarkStyleJson={home:{topband:{backgroundColor:"#5464F2",text:I18n.getMsg("crm.msgboard.announcements.lable",Crm.appName),color:"#FFF",fontSize:"19px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700",zIndex:"100",boxShadow:"1px 0px 1px #bbc3ca",borderBottom:"",borderTop:"",borderLeft:"",borderRight:""},closeButton:{icon:"close",iconColor:"#FFF"},historyButton:{showDynamicHistory:!0,withNotification:{text:I18n.getMsg("crm.msgboard.see.history"),color:"#5464F2",buttonColor:"#fff",fontSize:"12px",fontFamily:"Lato,  sans-serif",fontWeight:"600",icon:"arrow_forward",iconColor:"#5464F2","text-decoration":"underline"},withNoNotification:{text:I18n.getMsg("crm.msgboard.view.history"),color:"#fff",fontSize:"14px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"500",backgroundColor:"#5464F2","text-decoration":"underline"}},background:{color:"#1E1F22"},genreSelect:{selection:{backgroundColor:"#20272E",color:"#E4E8F1",fontSize:"14px",fontFamily:"Lato, sans-serif",fontWeight:""},item:{color:"#D3D6DE",fontSize:"14px",fontFamily:"Lato, sans-serif",fontWeight:""}},descriptionText:{noDataDescription:{icon:"question_answer",iconColor:"#A7ACB7",heading:{text:"",color:"#D3D6DE",fontSize:"18px",fontWeight:"800",fontFamily:"Zoho_Puvi_Regular, sans-serif !important"},description:{text:I18n.getMsg("crm.msgboard.no.notification.lable"),color:"#D3D6DE",fontSize:"20px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700 !important"}}}},history:{topband:{backgroundColor:"#5464F2",text:I18n.getMsg("crm.label.general.history"),color:"#FFF",fontSize:"20px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700",boxShadow:"1px 0px 1px #bbc3ca"},backButton:{icon:"arrow_back",iconColor:"#FFF"},closeButton:{icon:"close",iconColor:"#FFF"},background:{color:"#F5F9FC"},descriptionText:{noDataDescription:{text:"You have viewed all updates",color:"#D3D6DE",fontSize:"20px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"700"}}},showMessagesWithUndefinedGenreText:!1,genreTexts:{"All Messages":I18n.getMsg("crm.msgboard.drop.down.lable"),"User Education":I18n.getMsg("crm.msgboard.genre.usereducation"),Webinars:I18n.getMsg("crm.msgboard.genre.webinars"),Events:I18n.getMsg("crm.msgboard.genre.events"),"Feature Releases":I18n.getMsg("crm.msgboard.genre.featurereleases"),Announcements:I18n.getMsg("crm.msgboard.icon.hover.lable"),Community:I18n.getMsg("crm.msgboard.genre.community"),Retention:I18n.getMsg("crm.msgboard.genre.retention"),"Tips and Tricks":I18n.getMsg("crm.msgboard.genre.tips"),Survey:I18n.getMsg("crm.msgboard.genre.survey"),Enhancements:I18n.getMsg("crm.msgboard.genre.enhancement")},genreStyles:{renderGenreStyles:!0,default:{color:"#BBBBBB",fontSize:"12px",fontFamily:"Zoho_Puvi_Regular, sans-serif !important",fontWeight:"",backgroundColor:"#353535",padding:"4px 12px",borderRadius:"6px",border:"none"},"Tips and Tricks":{color:"#AC4E1C",backgroundColor:"#2A241F"},Enhancements:{color:"#979797",backgroundColor:"#333333"},Survey:{color:"#BB2222",backgroundColor:"#2C2121"},"User Education":{color:"#BD285D",backgroundColor:"#3A2930"},Community:{color:"#1E807A",backgroundColor:"#1F2B2A"},Events:{backgroundColor:"#1D252A",color:"#256DDA"},Webinars:{backgroundColor:"#302D22",color:"#A88D2D"},"Feature Releases":{backgroundColor:"#21251C",color:"#029200"},Announcements:{backgroundColor:"#282230",color:"#8642DD"}},messageStyles:{renderUndefinedMessageTemplates:"true","message-template-default-styles":{heading:{color:"#D3D6DE",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:"700"},sideHeading:{color:"#A7ACB7",fontSize:"13px",fontFamily:"Lato, sans-serif",fontWeight:"400"},description:{color:"#A7ACB7",fontSize:"14px",fontFamily:"Lato, sans-serif",fontWeight:"400"},category:{color:"#CE7540",fontSize:"14px",fontFamily:"Lato, sans-serif",backgroundColor:"#261F19",margin:"0 10px",padding:"2px 8px 2px 10px",borderRadius:"6px",fontWeight:""},background:{backgroundColor:"#fff",border:"none"},hover:{showHover:!0,hoverColor:"#28343D"}},"message-template-options-styles":{heading:{color:"#E4E8F1",fontSize:"18pxpx",fontFamily:"Lato,  sans-serif",fontWeight:"700"},sideHeading:{color:"#6A7281",fontSize:"13pxpx",fontFamily:"Lato,  sans-serif",fontWeight:""},description:{color:"#D3D6DE",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""},category:{color:"#8642DD",background:"#261F19",fontSize:"14px",fontFamily:"Lato, sans-serif",padding:"2px 8px 2px 10px",borderRadius:"6px",fontWeight:""},selectBox:{backgroundColor:"#1E1F22",placeHolder:{text:"Choose your option",color:"#6B6E75",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""},selection:{color:"#D3D6DE",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""},item:{color:"#D3D6DE",fontSize:"15px",fontFamily:"Lato, sans-serif",fontWeight:""}},sendButton:{icon:"send",iconColor:"#5780CE"}}}},messageBoardObj.messageBoard=new messageboardsdk(Crm.micsconfigurations,crmZgid,"msgBoardDisplay"),messageBoardObj.messageBoard.customizePanelStyle({messageIndicator:"number",messageIndicatorStyle:{left:"auto",bottom:"auto"},panelIconOpacity:"0.4",backdropStyle:"black",panelZindex:214,backdropZindex:210,panelTemplateName:"panel-template-primary"});var e=$L("crm-left-menu")[0];e=e?e.component:null;var t="default";e&&(t=e.getData("dataMode")),"dark"===t?messageBoardObj.messageBoard.customizeMessageStyle(messageBoardObj.messageBoardDarkStyleJson):messageBoardObj.messageBoard.customizeMessageStyle(messageBoardObj.messageBoardStyleJson),messageBoardObj.messageBoard.initialize(),$L("#micsiframe").length>0&&setTimeout((function(){$L("#micsiframe")[0].style.height="calc(100% - 67px)"}),3e3)}catch(e){}}function showAnimatePopup(e,t){var i=e.split("####");e=i[0];var o=$("#"+e),n=document.getElementsByClassName("modalWithlookup"),r=$("#chooseCriteria-mm1, #followUppopup"),s=r.hasClass("zcrm-show");"searchCreatePopup"===e&&(select2ChangesInFields(o),lookupClassAddFunction(o),noBorderStyleApply(o));var a=o.find(".popup-model-content");if("lookupErrorMsg"===e&&"r"===i[i.length-1]){var l=a.children();a.parent().children()[0].innerText=I18n.getMsg("crm.title.max.relatedmodule.fields"),l[0].innerText=I18n.getMsg("crm.msg.exceeds.max.relatedmodule.limit1"),l[2].innerText=I18n.getMsg("crm.msg.exceeds.max.relatedmodule.limit2")}else if("lookupErrorMsg"===e&&"f"===i[i.length-1]){l=a.children();a.parent().children()[0].innerText=I18n.getMsg("crm.title.max.lookup.fields"),l[0].innerText=I18n.getMsg("crm.msg.exceeds.max.lookup.limit1"),l[2].innerText=I18n.getMsg("crm.msg.exceeds.max.lookup.limit2")}else if("lookupErrorMsg"===e&&"f"===i[i.length-2]&&"r"===i[i.length-1]){l=a.children();a.parent().children()[0].innerText=I18n.getMsg("crm.title.max.lookupandrelatedmodule.fields"),l[0].innerText=I18n.getMsg("crm.msg.exceeds.max.lookupandrelatedmodule.limit1"),l[2].innerText=I18n.getMsg("crm.msg.exceeds.max.lookupandrelatedmodule.limit2")}var c=!1;a&&a.prevObject&&a.prevObject.length>0&&a.prevObject[0].classList&&a.prevObject[0].classList.length>0&&a.prevObject[0].classList.contains("zcrm-show")&&"none"!==a.prevObject[0].style.display&&(0===a.length||"createLinkContent"!==a[0].getAttribute("id")&&"updateCallStatus"!==e)&&(c=!0),o.show().addClass("zcrm-show").find(".popup-model-header").addClass("bxShTp");var d=$(".zcrm-modal select").attr("multiple"),u="undefined"!=typeof module&&null!=module?module.value:null;("multiple"!=d&&"massmail_schedule_alert"!==e&&!Crm.isHeadless||"Users"==u&&"massmail_schedule_alert"!==e&&!Crm.isHeadless)&&wfForm.chosen_show(e),s&&r.css("z-index","29"),Crm.isHeadless||wfForm.initFormClick(),$("[name=createEntityFormctiapiTasks]").length||setTimeout((function(){"block"==$("#qCreate").css("display")||Crm.isHeadless||$("#intelligenceConfigDiv").length||$("#RoleAction").length||wfForm.inputfieldFocus()}),100),a[0]&&(a.scrollTop()+a.outerHeight()+10<a[0].scrollHeight&&o.find(".popup-model-footer").addClass("scroll-sh"),a.on("scroll",(function(){var t=$("#"+e);a.scrollTop()+a.innerHeight()>=a[0].scrollHeight?t.find(".popup-model-footer").removeClass("scroll-sh"):t.find(".popup-model-footer").addClass("scroll-sh");var i=$(".calculaterInfo");i.is(":visible")&&i.hide()})));var m=$("#freezeBackGround");"subSecondaryPopup"!==e&&"popup1"!==e||m.css("z-index","30"),n.length&&!0===n[0].ltProp("show")&&m.css("z-index","31");var p=$("#eventCreatePopup").is(":visible");"topBandPopup"===e&&p&&m.css("z-index","32"),$("body").addClass("oH"),t&&t.call(window,e),renderingUtils.showFreezeLayer(),c||crmui.modalZIndex("nonLyte",a.prevObject[0],"open")}function hideAnimatePopup(e,t,i){if(!($("#"+e).find(".rtfLargeTextEditorParent").length>0)){var o=$L(".dummyfileupload");o.length&&o[0].classList.remove("dummyfileupload");var n=$("#chooseCriteria-mm1, #followUppopup"),r=n.hasClass("zcrm-show"),s=$L("crm-social-account-reauth");s&&s.length>0&&s[0].component.setData("showReauthPop",!0),!Crm.isHeadless&&crmNTC.isSignalDetailViewVisible()&&crmNTCGlobal.hideFreezeLayerForSignals();var a=document.querySelector("crm-forecast-deals-modal");if(a&&a.setData("popupCloseOnEsc",!0),("topBandPopup"===e||!$("#topBandPopup").is(":visible"))&&(Crm.isHeadless||!crmNTC.isSignalDetailViewVisible()&&!SalesSignalsWrapper.isSignalIFrameOpen)){if(Crm.isFromSalesInbox){var l=$("#qCreate");l&&l[0]&&l[0].childElementCount>0&&$(".freezeLayer").attr("style","z-index : 32 !important")}"topBandPopup"===e&&$("#createMassMailContainer").length>0||renderingUtils.hideFreezeLayer()}if(($("#tabGroupListPopup").is(":visible")||$("#createtabGroupPopup").is(":visible"))&&$("#topBandPopup").removeClass("moveBackToTheFreeze"),"lookupErrorMsg"==e){var c=document.getElementById("kanbanViewSubmit");null!=c&&c.classList.remove("pointerEventsNone","disable")}"topBandPopup"===e&&t&&(CTIAPI.Windows.changeWindowInfo="closed");var d=$("#columnList"),u=$(".columnListNew");("topBandPopup"===e&&d.is(":visible")||"columnList"===e)&&d.removeClass("dBImp"),($(".ziaCallAnalyticswrapper").length||$(".etTrendsWrapper").length)&&"topBandPopup"===e&&$(".temp_freezelayer").css({zIndex:313});var m=$("#"+e);m.find(".popup-model-content").off("scroll"),$(".popup-model-content").off("wheel"),m.find(".popup-model-footer").removeClass("scroll-sh"),m.off("keydown");var p=m.height();m.css({top:"-"+2*p+"px"}),targ=null,srcElement=null,setTimeout((function(){m.removeClass("zcrm-show").css({top:"0px",display:"none"}).width(""),t&&m.empty()}),200);var g=$("#freezeBackGround");if("deletepopup"===e&&g.css("z-index","30"),"subSecondaryPopup"!==e&&"popup1"!==e||g.css("z-index","30"),g.hasClass("zcrmImageUploadCustomPopupFreeze")&&(g.removeClass("zcrmImageUploadCustomPopupFreeze"),g.css("z-index","30")),$("body").removeClass("oH"),i&&i.call(window,e),Crm.userDetails.isNewEditor&&EmailSendingUtil.composeActive){var f=document.getElementById("lookupdiv");f||"none"!==f.style.display||EmailUtil.removeCustomFreezeLayer()}var h=$L(".freezeLayer");if("custom_alert_popup"===e||"lookupErrorMsg"===e)if($L("#serviceAjaxEdit").is(":visible")||$L("#appointmentRescheduleDiv").is(":visible")||$L("#qc_holder_createEntityForm").is(":visible")||$L("#appointmentCompletePopup").is(":visible")||$L("#createFormRulePopup").is(":visible")||$L("#createProcessPopDiv").is(":visible")||$L("#createEditCallDiv").is(":visible"))h.show();else{var v=$L("crm-kiosk-builder"),y=$L("#wf_nw_fld");v.length>0&&v[0].component&&y.length>0||h.hide()}u&&u.removeClass("popupLookupEnable"),r&&n.css("z-index",""),Crm.userDetails.TaskPopup&&h.show();var C=$L("#"+e).find(".popup-model-content");crmui.modalZIndex("nonLyte",C.prevObject[0],"close")}}function getFormattedName(e,t,i){var o=Crm.userDetails.NAME_FORMAT.split(",");null==t&&(t="");var n=t,r=o.indexOf("First Name"),s=o.indexOf("Last Name"),a=o.indexOf("Salutation");return null!=e&&""!=e&&(n=e+" "+t,r>s&&(n=t+" "+e)),null!=i&&"None"!=i&&(1==a?null!=e&&(n=e+" "+i+" "+t,r>s&&(n=t+" "+i+" "+e)):n=2==a?n+" "+i:i+" "+n),n}function newshowtt(e,t){void 0===t?renderingUtils.zctt.showtt(e):renderingUtils.zctt.showtt($ESAPI.encoder().encodeForHTML(e)),$("#tooltip-zc").addClass("newtooltipzcdefault")}function newhidett(){renderingUtils.zctt.hidett(""),$("#tooltip-zc").hide().removeClass("newtooltipzcdefault")}function enableImportRevamp(e,t,i,o,n,r){commonUtils.showHideLoadingDiv(!0);var s=!1,a=Crm.getCrmBasePath()+"/specific/ImportAction.do?currStep=tryNew&status="+e;null!=t&&null!=t&&"null"!=t&&""!=t&&(a=a+"&module="+t),null!=i&&null!=i&&"null"!=i&&""!=i&&(a=a+"&parentModule="+i),null!=o&&null!=o&&"null"!=o&&""!=o&&(a=a+"&parentId="+o),null!=n&&null!=n&&"null"!=n&&""!=n&&(a=a+"&itsfromMigration="+n,"true"===n&&(s=!0)),null!=r&&null!=r&&"null"!=r&&""!=r&&(a=a+"&feedback="+encodeURIComponent(r)),a=a+"&"+csrfParamName+"="+encodeURIComponent(csrfToken),(new crmRequestPool).initiate({action:a,type:"POST",success:function(e){commonUtils.showHideLoadingDiv();var t="show";$("#show").length&&!s||(t="result"),thirdPartyUtils.unbindChildEvents("#"+t),$("#"+t).empty().html(e)}})}function showDeletePopup(e,t,i,o,n,r,s,a,l,c,d,u,m,p){var g,f,h=document.getElementsByName("module")[0];h=h?h.value:h;var v,y=!1,C=!1;if(1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI&&detailView.atnAddClassSelected(n),customViewObject&&customViewObject.module&&(h=customViewObject.module),"mailsSub"==e)if($("#draftMails").hasClass("selectTab"))t="crm.button.delete.permanently";else if($("#mails").hasClass("selectTab")){var b=$("#selectMails");"ALL"!=(b.length>0?b:$(getOpenerObj("selectMails"))).attr("lt-prop-selected")&&(t="crm.button.move.to.trash.mail")}var w,I="";if(p||$(n).attr("data-params")){var E=p||JSON.parse($(n).attr("data-params")),k=E.module;k&&(h=k),Crm.userDetails.CLIENT_ACCOUNT&&!Crm.userDetails.permissions["Crm_Implied_Edit_"+h]||(I=E.dissociateclick),E.action&&(E.action.includes("deleteFilter")?g=E.action.includes("deleteFilter"):E.action.includes("deleteCustomView")&&(f=E.action.includes("deleteCustomView"))),y=!(!E.isMultiValued||crmTab.isLinkingModule(k))}else"Notes"===r&&(v=h,h="Notes");if("Potentials"===h){var x=void 0!==n?$L(n.closest("#RelatedListCommonDiv"))[0]:void 0;if(void 0!==x&&"COMPETITORSPERSONALITY"===x.getAttribute("ddname")||"competitorName"===e){var T=$L("crm-detailview-header")[0];if("read_only"===(void 0!==T?T.component.data.record:$L("crm-detailview-canvas")[0].component.data.record).$sharing_permission)return renderingUtils.displayPermissionDenied(),void commonUtils.showHideLoadingDiv(!1)}}h="Deals"===h?"Potentials":h;try{var P=$(n);if(P){let e=P.attr("id");w=!!e&&e.includes("proj_del_icon")}else w=!1}catch(e){murphy.error(e),w=!1}if(y&&("PriceBooks"===h||"Products"===h))var L=P.attr("data-onclick"),S=L.substr(L.indexOf("#")+1,L.length).split("_")[0].replace("$","_").toUpperCase(),M=returnJson.relListLabelsJson.relListLabelJson.findIndex((function(e){return e.name===S})),O=returnJson.relListLabelsJson.relListLabelJson[M].module;if(!(w||g||f||y||"mailsSub"===e&&("mailsSub"!==e||Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Delete_Mail_"+h))||!h||("Notes"===h?moduleRecordMapping&&moduleRecordMapping[v]&&"team_based"===moduleRecordMapping[v].access_type?Crm.userDetails.permissions["Crm_Implied_Delete_"+h+"_"+v]:Crm.userDetails.permissions["Crm_Implied_Delete_"+h]:Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Delete_"+h))||(crmTab.isZBCustomModule(h)||crmTab.isZSCustomModule(h)||crmTab.isZECustomModule(h))&&Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_View_"+h)||-1!==e.indexOf(I18n.getMsg("crm.confirm.close.task"))||-1!==e.indexOf(I18n.getMsg("crm.massmail.delete.confirm")))){var A='<div onclick=/"sE()" class="w500 p20"><div class="fL pL20 w430"><div class="crm-heading-font-size"><h2 style="color:#E20000";>'+I18n.getMsg("crm.delete.error")+'</h2></div><div class="mT10">'+I18n.getMsg("crm.security.error")+'</div></div><br class="cBoth"><div  class="alignRight mT20"><input type="button" id="popupok" class="primarybtn" value="'+I18n.getMsg("crm.button.ok")+"\" onclick=\"hide('popupnew');renderingUtils.removeFreezeLayer();document.getElementById('popupnew').style.zIndex=30\"></div></div>";return renderingUtils.popUpWithFreeze(A),commonUtils.showHideLoadingDiv(),void renderingUtils.stopEvent()}if(y&&!I&&O&&Crm.userDetails.MODULE_LIST.hasOwnProperty(O)&&!Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Edit_"+O)){A='<div onclick=/"sE()" class="w500 p20"><div class="fL pL20 w430"><div class="crm-heading-font-size"><h2 style="color:#E20000";>'+I18n.getMsg("crm.delete.error")+'</h2></div><div class="mT10">'+I18n.getMsg("crm.security.error")+'</div></div><br class="cBoth"><div  class="alignRight mT20"><input type="button" id="popupok" class="primarybtn" value="'+I18n.getMsg("crm.button.ok")+"\" onclick=\"hide('popupnew');renderingUtils.removeFreezeLayer();document.getElementById('popupnew').style.zIndex=30\"></div></div>";return renderingUtils.popUpWithFreeze(A),commonUtils.showHideLoadingDiv(),void renderingUtils.stopEvent()}if(n&&n.id&&("deleteEntityImageVision"===n.id||"remove"===n.id)&&(C=Lyte.registeredMixins["crm-vision-create"].entityImgShowSRFBpopup(detailView)),C)Lyte.registeredMixins["crm-vision-create"].renderSRFBpopupForEntityImg(Crm.renderDVLyteFlow(h));else{var _=$("#deletepopup");if(n=$(n),0!=$(".relListMenuDiv").length&&$(".relListMenuDiv").is(":visible")&&$(".relListMenuDiv").css({visibility:"hidden"}),_.length){if(n.data("checkbox")&&0===getNoOfSelected(n.closest("form"),void 0,n.data("checkbox")))return void alert(I18n.getMsg("crm.alert.select.one"));if(r&&"removeSampleData"!=r){var D="Home"===r?$("#homePage_"+e):$("#relatedList_"+e),R=[];0==D.length&&(D=$("#"+e)),"rl"==r&&(D=$("#relatedList_"+e)),"fl"==r&&(D=$("#attachment_"+e));var F=D.text();""==F&&"Notes"===r&&(e=e.replace("ntitle_","ncontent_"),F=$("#"+e).text()),F&&F.length>=40&&(F=F.substr(0,35)+"..."),""==F||null==F?R.push(l):R.push(F),e="mailsSub"==e?(e=I18n.getMsg("crm.warning.delete.record",R)).replace(/"/g,""):I18n.getMsg("crm.warning.delete.record",R)}_.find(".evButtons").hide(),_.find("#warningMsg").text(e),s=s?s+" fromDeletePopup":"redbtn fromDeletePopup";var B=_.find("#deleteButton").val(I18n.getMsg(t)).attr("onclick","").removeAttr("class").addClass(s).off("click").show(),U=n.attr("data-onclick")?"data-onclick":"onclick";if(U=u||U,u){var N=n.parent();N&&N.attr(U)&&(n=N)}if(n.attr("data-cid")?(B.attr("data-cid",n.attr("data-cid")).attr("data-params",n.attr("data-params")),B.data("params",JSON.parse(n.attr("data-params"))),B.removeAttr("onclick")):p?(B.attr("data-cid",p.clickId).attr("data-params",JSON.stringify(p)),B.data("params",p),B.removeAttr("onclick")):(B.removeAttr("data-params").removeAttr("data-cid"),n.attr("close-task")?B.attr("onclick",n.attr("close-task")):n.attr(U)?B.attr("onclick",n.attr(U)):B.attr("onclick","massActionDelete('massdelete','MassDelete','');return false;")),I&&""!=I&&$("#dissociatebutton").attr("onclick",I.split("SSIINNGGLLEEQQUUOOTTEE").join("'")).show(),i=i?'"'+(i=i.length>=45?i.substring(0,35)+"...":i)+'"':"",d&&(B.attr("onclick","crmTasks.triggerSaveFieldClickEvnt(true);"),_.find(".newgraybtn").attr("onclick","crmTasks.triggerSaveFieldClickEvnt();")),"mass_transfer"===n.attr("name")&&("Accounts"===zbCustomModuleObjForAccountContactDeletion.module||"Contacts"===zbCustomModuleObjForAccountContactDeletion.module)&&zbCustomModuleObjForAccountContactDeletion.isZBCustomModuleEnabled)return void ZInvoice.getAlertContentOnMassDelete(_,i,o,event);_.find("#delItemName").text(i),o?_.find("#showWarning2").css("display","").find("#noteMsg").text(I18n.getMsg(o)):_.find("#showWarning2").css("display","none"),$("#showDontAskOption").prop("checked",!1);var z=_.find("#showDontAskOptionDiv");if(a?z.show():z.hide(),a){var H=z.find("p"),j=H.text();j=j.replace(".",""),H.text(j)}$("#notifyOwnerOption").prop("checked",!1);var W=_.find("#notifyOwnerOptionDiv");if(c?W.show():W.hide(),"removeSampleData"!=r)setTimeout((function(){showAnimatePopup("deletepopup")}),1),n.blur();else{$("#overlayHeader,#settingInner").hide(),$("#setupshow,#mainResult").show();$("#setupLinkDiv").offset().top;var V=$(window).height(),Z=isChatEnabled?26:0;Z;var q=V-($("#setup_new_leftmenuDiv").offset().top+Z);$("#setup_new_leftmenuDiv").css({height:q+"px"});$("#result").html("<div id='rmvSampledata' class='p30'></div>");var J=$("#rmvSampledata");J.append('<p class="darkMainHead">'+I18n.getMsg("cob.remove.sampledata")+"</p>"),J.append(_.find(".fromDeletepopup").html()),J.find(".newgraybtn").attr("onclick","Lyte.Router.transitionTo('crm.settings.index')")}"undefined"!=typeof event&&(m||renderingUtils.stopEvent(event))}}}function crmplusImplTriggerActions(e,t){"undefined"!=typeof CrmPlusImpl&&("UIReady"==e?CrmPlusImpl.trigger("UIReady"):CrmPlusImpl.isLoadedInCrmplus()&&("hideSearchBar"==e?($("#newgsearchouterdiv").hide(),$(".adSearchClose").hide()):CrmPlusImpl.trigger(e,t)))}function loadDataForDisplayAndMentions(e,t,i,o,n,r,s,a,l){var c=null!=e&&e,d=null!=i&&i,u=null!=t&&t,m=(r=void 0!==r&&r,s=void 0!==s&&s,Crm.getCrmBasePath()+"/Pulse.do?action=getDataForDisplayAndMentions&isDeletedUsersNeeded="+c+"&isFullLoad="+u+"&isActiveOnly="+d+"&fromFeeds="+r+"&isSubordinateListingNeeded="+s+"&module="+l);a&&""!==a&&(m+="&filtercriteria="+encodeURIComponent(JSON.stringify(a))),$.ajax({url:m,async:void 0!==o&&o,type:"GET",dataType:"json",success:function(e){s?Search.InfoForSubordinateListing=e.infoForDisplay?e.infoForDisplay:void 0:!r||!t&&e.infoForPartialLoad?t||!e.infoForPartialLoad?InfoForDisplay=e.infoForDisplay:r?Search.InfoForDefaultDisplayWithLiteUsers=e.InfoForDisplayWithLiteUsers:Search.InfoForDefaultDisplay=e.infoForDisplay:InfoForDisplayWithLiteUsers=e.InfoForDisplayWithLiteUsers,s||(Search.InfoForPartialLoad=e.infoForPartialLoad,InfoForMentions=e.infoForMentions),moduleRecordMapping[l]&&"org_based"===moduleRecordMapping[l].access_type&&(InfoForOrgDisplay=e.infoForDisplay),n&&n()}})}function loadUserDataForPartialLoad(e,t,i,o,n,r){var s=null!=r&&r;if(void 0===Search.InfoForDefaultDisplay||i){var a=null!=t&&t,l=Crm.getCrmBasePath()+"/Pulse.do?action=getDataForDisplayAndMentions&isDeletedUsersNeeded="+a+"&isActiveOnly="+s;i&&(n||(n=""),o||(o=0),l=l+"&isPartialLoad="+i+"&searchKey="+n+"&startRange="+o),(new crmRequestPool).initiate({action:l,type:"GET",dataType:"json",success:function(t){o&&o>0||n&&n.length>0?e&&e(t.infoForDisplay):Search.InfoForDefaultDisplay=t.infoForDisplay,InfoForMentions=t.infoForMentions,Search.InfoForPartialLoad=t.infoForPartialLoad}})}}function newPopupCallMethodId(){return"popupNewUiEnhancementLook"===crmTemplate.lookupNewStylePopupId?"popupNewUiEnhancementLook":"topBandPopup"}function triggerClickEvent(e,t){var i=$(t),o=e.currentTarget;if(!($(o).find("span.busniess_card_Hover").hasClass("agrFld")||t&&t.endsWith(".agrFld")||"#mouseArea__SMOWNERID"===t&&i&&i.hasClass("readOnlyFld")||$L(e.target).hasClass("smartPromptIcon"))){var n=$(".detailViewContainer.editModeEnable, .newBusinessCardView.editModeEnable");i=i.length>0||void 0===t,$L("#rpBtnResubmit")&&$L("#rpBtnResubmit").is(":visible")&&!detailView.readOnlyField&&$L("#rpBtnResubmit").addClass("disable"),i&&0===n.length&&setTimeout((function(){if(0===window.getSelection().toString().length&&"A"!==e.target.tagName&&!$(e.target).parent().hasClass("calliconOuter")){var i=$(o),n=i.closest(".tabDiv").hasClass("readOnlyFld"),r=i.attr("data-uitypesEle");if("Calls"===detailView.currentModule&&"#mouseArea__SMOWNERID"===t&&(r="8"),"555"!==r||n||$L(e.target.parentElement).removeClass("fu_viewNonEmpty"),"208"!==r||n)if("8"!==r||n){"true"===(returnJson&&returnJson.entityMapJson&&returnJson.entityMapJson[o.dataset.colname]&&returnJson.entityMapJson[o.dataset.colname].restricted)||$("#crmspanid").click()}else{var s=$("#changeOwnerIco");0===s.length?$L("#rpBtnResubmit").removeClass("disable"):s.click()}else $("#changeLayoutIco").click();e.stopPropagation(),hideMenu()}}),150)}}function select2ChangesInFields(e){for(var t=$(e).find(".newChosenSel select:not(#execDaySign_3), .newSelect select:not(#execDaySign_3), select:not(#execDaySign_3)"),i=t.length,o=0;o<i;o++){var n=t.eq(o),r=n.closest(".tabDivCreate");0===r.length&&(r=n.closest("tr")),r.addClass("selectBoxSelect2")}}function lookupClassAddFunction(e){var t=$(e).find(".amountCustom, .lookupDummyClass, .task_lookup, .qcInputModulation, #roleName_Add");if(t.length>0)for(var i=t.length,o=0;o<=i;o++){var n=t.eq(o),r=n.closest("tr");r.length>0?r.addClass("lookupFieldCreate"):n.closest(".tabDivCreate").addClass("lookupFieldCreate")}}function noBorderStyleApply(){$('input[type="checkbox"]').closest(".tabDivCreate").hasClass("nAborderNone")||$('input[type="checkbox"]').closest(".tabDivCreate").addClass("noBorderStyle")}function removeTextareaFocus(e){var t=(e=$(e)).outerHeight(),i=$("#span_tarea_new");if(t>150)return i.remove(),!1;i.text(e.val());var o=""===e.val()?36:t;return e.css({height:o}).removeClass("focusEleField"),i.remove(),!0}function focusEnableFunc(e,t){var i=$("#"+t);e?i.find("input.Macro_Namefield, select, input.textField, textarea.textField").on("focus blur",(function(e){var t=e.type,i=$(this),o=i.parent("td");0===o.length&&(o=i.closest(".labelValCreate")),"focus"===t?o.addClass("focusEleField"):o.removeClass("focusEleField")})):i.find("input.Macro_Namefield, select").off("focus blur")}function focusEnableFuncDetailpage(e){$(e).closest(".mlSelect").find(".select2-search__field").off("focus").on("focus",(function(){$(this).closest(".tabDiv").addClass("focusEleField")}))}function getDomWidthCalculation(e,t){var i,o=e.length,n="",r=[],s=[],a=document.createElement("div");a.className="newWidthLabelData",void 0===o&&(o=1);for(var l=0;l<o;l++){if(void 0===e.length)var c=e.FL,d=e.layout;else c=e[l].FL,d=e[l].layout;var u=c.length;if(void 0!==u)for(var m=0;m<u;m++){var p=c[m];if(!0!==p){var g=$ESAPI.encoder().encodeForHTML(p.displaylabel);n+="2"==d?m%2==0?"<span class='layoutCol1'>"+g+"</span>":"<span class='layoutCol2'>"+g+"</span>":"<span class='layoutCol1'>"+g+"</span>"}}else if("object"==typeof c)n+="<span class='layoutCol1'>"+(g=$ESAPI.encoder().encodeForHTML(c.displaylabel))+"</span>"}a.innerHTML=n,$("body").append(a);var f=$(".layoutCol1"),h=$(".layoutCol2"),v=f.length,y=h.length;for(l=0;l<v;l++){var C=f.eq(l).text();if("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus())if(Crm.userDetails.detailView_newUI)var b=commonUtils.getTextWidthUsingCanvas(C,{font:"var(--crm-base-font-size) Zoho_Puvi_Regular, sans-serif"});else b=commonUtils.getTextWidthUsingCanvas(C,{font:"var(--crm-base-font-size) Zoho_Puvi_Regular, sans-serif"});else if(Crm.userDetails.detailView_newUI)b=commonUtils.getTextWidthUsingCanvas(C,{font:"0.94rem Zoho_Puvi_Regular, sans-serif"});else b=commonUtils.getTextWidthUsingCanvas(C,{font:"1.007rem Zoho_Puvi_Regular, sans-serif"});r.push(b)}for(l=0;l<y;l++){C=h.eq(l).text();if("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus())if(Crm.userDetails.detailView_newUI)b=commonUtils.getTextWidthUsingCanvas(C,{font:"var(--crm-base-font-size) Zoho_Puvi_Regular, sans-serif"});else b=commonUtils.getTextWidthUsingCanvas(C,{font:"var(--crm-base-font-size) Zoho_Puvi_Regular, sans-serif"});else if(Crm.userDetails.detailView_newUI)b=commonUtils.getTextWidthUsingCanvas(C,{font:"0.94rem Zoho_Puvi_Regular, sans-serif"});else b=commonUtils.getTextWidthUsingCanvas(C,{font:"1.007rem Zoho_Puvi_Regular, sans-serif"});s.push(b)}var w=Math.max.apply(null,r),I=Math.max.apply(null,s);return w>=(i="list"===t?230:"detail"===t?175:180)&&(w=i),I>=i&&(I=i),$(".newWidthLabelData").remove(),[w,I]}function getExtensionGroup(e){var t="file";if("txt"===e||"pdf"===e||"html"===e||"xml"===e)return t=e;var i={png:["jpeg","jpg","gif","png","webp","bmp","svg"],word:["doc","docx","odt","rtf"],excel:["csv","xls","xlsx","ots","xlsm","ods","numbers","fcs","bks","rdf"],ppt:["odp","pps","pot","pptx","ppt"],movie:["avi","wmv","mp4","mpeg","mpg","mov","flv","mkv","webm"],mp3:["mp3","ogg","oga","wma","m4p","m4a","au","3gp"],zip:["zip","zipx","tar","gz","z","cab","rar","bz2","lzh","7z","img","iso"]};for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];if($.inArray(e,n)>=0){t=o;break}}return t}function showImageType(e){return"fileIcon"+getExtensionGroup(e)}var Encryption={showEncryptionPop:function(e){var t=$("#ENCNOTIFICATION"),i=$("#wmsstatusbar");if(i.find("tr").find("#encProgressIconDiv").length<=0){i.find("tr").prepend("<td style='border-left: 1px solid #c0c6cc;' id='encProgress'><div class='vaM pR h30' style='padding: 5px; display: table-cell; bottom: 0px; top: -1px; border-top: 1px solid #fff;'><div id='encProgressIconDiv' data-zcqa='encProgressIcon' class='encProgressIcon cP pR activeProgress'  onclick='Encryption.showProgressDiv()' onmouseover='' data-title='Encryption'></div></div></td>")}if(t.length>0){var o=Handlebars.templates.EncryptionNotification(e);if(t.addClass("schedularOpen"),$("#encryptionMsg"+e.id).length>0?t.find("#encryptionMsg"+e.id).replaceWith(o):$("#ENCNOTIFICATION > ul").append(o),$("#ENCNOTIFICATION li").length>3){var n=$(window).height()/4*3;$("#ENCNOTIFICATION ul").css("max-height",n).addClass("oA")}}else{Handlebars.registerPartial("EncryptionNotification",Handlebars.templates.EncryptionNotification);var r=Handlebars.templates.EncryptionPopup(e);$("body").append(r),t=$("#ENCNOTIFICATION")}if("Rollup Summary"===e.type&&t.find(".schedularPop-Header .schedularMsg").html(I18n.getMsg("crm.rollup.scheduler.status")+"<a href='javascript:;' class='dB fR minimizeSchedularPop pR mT5' onclick='Encryption.encPopClose()'></a>"),t.addClass("schedularOpen"),"Progress"===e.status)t.find("#encryptionMsg"+e.id).find(".progressBarAnime").removeClass("dN"),t.find("#encryptionMsg"+e.id).find("#encProgMsg").html(e.message),(l=$("#ENCNOTIFICATION .closeSchedularPop")).addClass("minimizeSchedularPop"),l.removeClass("closeSchedularPop");else if("Success"===e.status||"Failure"===e.status||"Partial"===e.status){if(t.find("#encryptionMsg"+e.id).find(".progressBarAnime").remove(),t.find("#encryptionMsg"+e.id).find(".schedularMsg").removeClass("dN"),t.find("#encryptionMsg"+e.id).find("#encComMsg").html(e.message),e.unqMessage&&(t.find("#encryptionMsg"+e.id).find("#unqComMsg").removeClass("dN"),t.find("#encryptionMsg"+e.id).find("#unqComMsg").html(e.unqMessage)),t.find("#encryptionMsg"+e.id).find(".viewInfoData").html(e.viewInfo),void 0===e.viewInfo){var s=$L("#encryptionMsg"+e.id),a=t.find(s);a.find(".viewInfoTbl").remove(),a.find(".viewInfoData").remove()}var l;if(t.find(".progressBarAnime").length<1)(l=$("#ENCNOTIFICATION .minimizeSchedularPop")).addClass("closeSchedularPop"),l.removeClass("minimizeSchedularPop")}"Success"===e.status?t.find("#encryptionMsg"+e.id).find("#encComMsg").addClass("succesIcoSchedular"):"Failure"===e.status?t.find("#encryptionMsg"+e.id).find("#encComMsg").addClass("failedIcoSchedular"):"Partial"===e.status&&t.find("#encryptionMsg"+e.id).find("#encComMsg").addClass("partialSuccessIcoSchedular"),"Success"===e.unq_status?t.find("#encryptionMsg"+e.id).find("#unqComMsg").addClass("succesIcoSchedular"):"Failure"===e.unq_status?t.find("#encryptionMsg"+e.id).find("#unqComMsg").addClass("failedIcoSchedular"):"Partial"===e.unq_status&&t.find("#encryptionMsg"+e.id).find("#unqComMsg").addClass("partialSuccessIcoSchedular")},encPopClose:function(){Encryption.showProgressDiv()},showViewInfo:function(e){$(".viewInfoTbl").removeClass("dN"),$(".viewInfoData").slideUp(300),$(e).addClass("dN"),$(e).siblings(".viewInfoData").slideDown(300)},closeNotification:function(e){var t=$("#ENCNOTIFICATION");$(e).closest("ul").find("li").length<=1?(t.removeClass("schedularOpen",(function(){t.remove()}),100),$("#wmsstatusbar").find("tr").find("#encProgress").remove()):$(e).closest("li").remove()},showProgressDiv:function(){var e=$(".encProgressIcon");e.hasClass("activeProgress")?Encryption.hideEncProgressDiv():(Crm.menu.globalHideMenu(),hideFeedBackPopup(),$("#encProgressDiv").css({bottom:"26px"}),e.addClass("activeProgress"),e.parent().css({top:"-1px","border-top":"1px solid #fff"}),$("#ENCNOTIFICATION").addClass("schedularOpen"))},hideEncProgressDiv:function(){var e=$("#ENCNOTIFICATION");if(e.find(".progressBarAnime").length<1)e.removeClass("schedularOpen",(function(){e.remove()})),$("#wmsstatusbar").find("tr").find("#encProgress").remove();else{$("#encProgressDiv").css({bottom:"-400px"});var t=$(".encProgressIcon");t.removeClass("activeProgress"),t.parent().css({top:"","border-top":""}),e.removeClass("schedularOpen")}}},cruxSchedularPopup={showOrHideSchedularPopup:function(e){var t=$L(".cruxSchedularPopup_"+e)[0];t&&t.setData("cxPropShow",!t.getData("cxPropShow"))},closeOrMinimizePopup:function(e,t,i){if("close"===i){var o=$L(".cruxSchedularPopup_"+e)[0];o&&"dataSharingNotify"===e?t.querySelector("#dsProgressIconDiv").remove():o&&t.querySelector("#uqProgressIconDiv").remove()}}};function showRecordAccess(e){var t=$("#wmsstatusbar");if((i=$("#user_lookup_scheduler")).length<1&&!$L("#recaccProgressIconDiv").length){var i;(i=t.find("tr")[0].insertCell(0)).id="user_lookup_scheduler";var o=networkUtils.returnDependencyFiles(["crm-user-lookup-scheduler.js"],ResourceConstants.CRMClient),n=networkUtils.returnDependencyFiles(["crm-user-lookup-scheduler.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT),r=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("RecordCoownership")],ResourceConstants.CRM),s=o.concat(n).concat(r);Lyte.injectResources(s,void 0,(function(){isLoadedInCRMPlusIFrame()?Lyte.Component.render("crm-user-lookup-scheduler",{},"body"):Lyte.Component.render("crm-user-lookup-scheduler",{},i);var t=$L("crm-user-lookup-scheduler")[0];t&&!t.component.data.showDiv&&t.executeMethod("setInfo",e)}))}else{const t=$L("crm-user-lookup-scheduler")[0];if(t&&t.component&&(t.component.executeMethod("setInfo",e),"Success"===e.status))for(var a=e.fldIds,l=a.length,c=0;c<l;c++){var d=$("#id_"+a[c]+" >div").data();d&&d.recaccMode&&delete d.recaccMode}}}function showGDPRCallOut(){$("#emailEntityComposepopup").length<1&&networkUtils.loadFeatureScripts(["zohocrm_gdprCallOut.js"],(function(){setTimeout((function(){var e=$("#gdprcalloutPop"),t=e;0===t.length&&($("body").append(Handlebars.templates.gdprCallOut),t=e),t.length>0&&(mailsetCenter("gdprcalloutPop"),renderingUtils.freezeBackground())}),500)}))}function hideGDPRCallOut(e){var t={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};(new crmRequestPool).initiate({action:"/crm/v2/consents/consent_callout_disable",type:"POST",headers:t,data:{},success:function(){var t=$("#gdprcalloutPop");t.css("transform","scale(0)"),renderingUtils.removeFreezeLayer(),e&&networkUtils.openUrl(Crm.getCrmBasePath()+"/settings/compliance"),setTimeout((function(){t.remove()}),300)}})}function initAsap(e){if(!window.ZohoHCAsap){window.ZohoHCAsapReady=function(e){if(window.ZohoHCAsap__asyncalls=window.ZohoHCAsap__asyncalls||[],window.ZohoHCAsapReadyStatus){e&&window.ZohoHCAsap__asyncalls.push(e);for(var t=window.ZohoHCAsap__asyncalls,i=t.length,o=0;o<i;o++){var n=t[o];n&&n()}window.ZohoHCAsap__asyncalls=null}else e&&window.ZohoHCAsap__asyncalls.push(e)};window.ZohoHCAsapSettings={disableDashboard:!0,menuType:"TOP",customeIcons:{closeIcon:function(e){return'<svg class="contextHelpClose"><use xlink:href="#close_icon"></use></svg>'}},hideLauncherIcon:!0,layoutAdjustments:{maxZindex:32},fontSettings:{fontFamily:"Zoho_Puvi_Regular, sans-serif",fontSize:"15px"},hideLanguageSwitch:!0}}if("gchelpinit"===e){var t=$L("crm-accessibility-shortcut")[0];if(t&&t.component.getData("showModal")&&t.component.setData("showModal",!1),"undefined"==typeof isHelpOptionOpened||!1===isHelpOptionOpened)if(window.ZohoHCAsap){window.ZohoHCAsapReady((function(){crmui.fromCloseOther||crmui.closeOtherWMSBars("help_bot"),crmui.WMSBarOpened($L("#zohohc-asap-web-layoutbox")[0]),window.isHelpOptionOpened=!0,window.kbopened=!1,localStorage.removeItem("gcSessionData"),Crm.client_tracking("GcBotHelpOption-Clicked"),asapConfigStyles();$L(".wms_help_icon_parent").removeClass("peNone"),ZohoHCAsap.Events.Subscribe("onAppClose",(()=>{window.isHelpOptionOpened=!1,localStorage.removeItem("gcSessionData"),ZohoHCAsap.UnInstall()}))})),ZohoHCAsap.Action("open",{tab:"ZOHOCHAT",clearPrevious:!0}),$("#zohohc-asap-web-layoutbox").css({height:"70%",bottom:"28px",top:"auto"})}else{"none"!==$L("#remainder-notifi")[0].style.display&&Activities.RemainderHideOnly(),"visible"===$L("#chatbotDiv")[0].style.visibility&&zia&&zia.minimizeChat();let e=$L("#mics_stacked_carpet")[0];e&&"block"===e.style.display&&displayFeature();let t=".wms_help_icon_parent";$L(t).addClass("peNone");let n=$L("crm-profile-menu")[0].component.getData("isPaidLicense")?"Paid":"Free";window.ZohoHCAsap=window.ZohoHCAsap||function(e,t){ZohoHCAsap[e]=t},i=document,(o=i.createElement("script")).type="text/javascript",o.defer=!0,o.src=RebrandLinkUtil.getProperty("GC_BOT_SCRIPT_URL"),i.getElementsByTagName("head")[0].appendChild(o),window.isHelpOptionOpened=!0,window.ZohoHCAsapReady((function(){crmui.fromCloseOther||crmui.closeOtherWMSBars("help_bot"),crmui.WMSBarOpened($L("#zohohc-asap-web-layoutbox")[0]),ZohoHCAsap.Action("open"),window.isHelpOptionOpened=!0,window.kbopened=!1,localStorage.removeItem("gcSessionData"),Crm.client_tracking("GcBotHelpOption-Clicked"),asapConfigStyles(),$L(t).removeClass("peNone"),ZohoHCAsap.Actions.UpdateSettings({imChatSettings:{sessionVariables:[{name:"LicenseType",value:n},{name:"CurrentUserEmail",value:Crm.userDetails.LOGIN_NAME}]},layoutAdjustments:{bottom:"28px",minusHeight:"30%",maxZindex:32},allowedTabs:["ZOHOCHAT"],styles:{customThemeColors:{headerAndFab:{textColor:"#fff"}},theme:"CUSTOMTHEME"}}),ZohoHCAsap.Events.Subscribe("onIMChatMessage",(e=>{"Chat with us"!=e.value&&"Contact Us"!=e.value||openChatWithUs()})),ZohoHCAsap.Events.Subscribe("onAppClose",(()=>{window.isHelpOptionOpened=!1,localStorage.removeItem("gcSessionData"),ZohoHCAsap.UnInstall()}))}))}else ZohoHCAsap.Action("close")}else Crm.userDetails.DEPLOYMENT.includes("China")||Crm.userDetails.LOCALE.includes("zh")||isMobileBrowser()||(window.ZohoHCAsap=window.ZohoHCAsap||function(e,t){ZohoHCAsap[e]=t},function(){var e=document,t=e.createElement("script");t.type="text/javascript",t.defer=!0,t.src=RebrandLinkUtil.getProperty("GC_BOT_SCRIPT_URL"),e.getElementsByTagName("head")[0].appendChild(t)}(),window.kbopened=!0,window.isHelpOptionOpened=!1);var i,o}function openChatWithUs(){var e="true"===RebrandLinkUtil.getProperty("PS_ENABLED")&&null!==ps_details&&ps_details.isPremium,t=e?"Premium":Crm.userDetails.SUPPORT_PLAN,i="Administrator"===Crm.userDetails.PROFILE_NAME;FeedbackChat.setVisitorInfo("gcBotContactUs");var o=0;try{$zoho&&$zoho.salesiq&&Crm.widgetCode&&$zoho.salesiq.widgetcode!==Crm.widgetCode&&(o=1e3,$zoho.salesiq.widgetcode=Crm.widgetCode,$zoho.salesiq.reset())}catch(e){murphy.error(e)}setTimeout((function(){if(ZohoHCAsap.Action("close"),e&&i)PremiumChat.invokePremiumChat(ps_details.PSE_Mail_Id,Crm.userDetails.DISPLAY_NAME,ps_details.emailId,"Chat",ps_details.weekend_restriction);else{let e=!1;"Classic"!=t&&"Enterprise"!=t||!Crm.timingCheckNeeded||(e=!0),$zoho&&$zoho.salesiq&&$zoho.salesiq.visitor&&$zoho.salesiq.visitor.ongoingchat()&&(e=!1),FeedbackChat.loadChat(e,i)}Crm.client_tracking("GC BOT - Contact Us Click")}),o)}function closeGcHelpBotOption(){void 0!==window.isHelpOptionOpened&&!0===window.isHelpOptionOpened&&"undefined"!=typeof ZohoHCAsap&&void 0!==ZohoHCAsap.Action&&ZohoHCAsap.Action("close")}function closeAsapWidget(){Crm.userDetails.DEPLOYMENT.includes("China")||Crm.userDetails.LOCALE.includes("zh")||isMobileBrowser()||"function"!=typeof ZohoHCAsap||!ZohoHCAsap.Action||(removeViewPortFromAsapWidget(),window.isHelpOptionOpened||ZohoHCAsap.Action("close"))}function asapConfigStyles(){var e=document.getElementById("zohohc-asap-web-helper-styles"),t="#zohohc-asap-web-header{background-color: "+(Crm.userDetails.SKIN_INFO.NEWBGCOLOR||"#313949")+"};}#hc_asap_header_tabsoption{display: none;}",i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.appendChild(i)}function setKBHeight(e){var t,i=$("#mainMenuTabDiv"),o=i.outerHeight(),n=i.offset().top;t=o+n==void 0?49:o+n;var r=0,s=$("#zohohc-asap-web-layoutbox");(e.includes("Subforms")||e.includes("Interlinking Modules"))&&(t=0),r=renderingUtils.windowHeight-t-28,s.css({height:r,top:t}),Crm.userDetails.RTL_ENABLED&&s.css({right:"initial",left:"0px"}),"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()&&(r=renderingUtils.windowHeight-28,s.css({height:r,top:"0px"}))}function openKB(e){Crm.client_tracking("Help Icon Click",{Feature:e}),"undefined"!=typeof ZohoHCAsap&&"object"!=typeof ZohoHCAsap||initAsap(e),window.ZohoHCAsapReady((function(){setKBHeight(e),asapConfigStyles();var t=RebrandLinkUtil.getProperty("KB_PERMALINK_"+e.replace(/\s/g,"_").toUpperCase()),i=ZohoHCAsap.Actions.History.Index();i&&ZohoHCAsap.Actions.History.Go(-i),ZohoHCAsap.kbArticles.view({permalink:t},{clearPrevious:!0});var o="undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?"#313949":Crm.userDetails.SKIN_INFO.NEWBGCOLOR||"#313949";(e.includes("Subforms")||e.includes("Interlinking Modules"))&&$("body").addClass("oH");let n=$L("crm-profile-menu")[0].component.getData("isPaidLicense")?"Paid":"Free";ZohoHCAsap.Actions.UpdateSettings({styles:{customThemeColors:{button:{secondaryBg:"#e3e5ea",primaryBg:"#00a3fe",primaryTextColor:"var(--fff)",secondaryTextColor:"#666"},accentBg:"#00a3fe",fontFamily:"DEFAULT",headerAndFab:{secoundaryBg:o,primaryBg:o,textColor:"#fff"},footer:{secoundaryBg:"var(--bg_white)",primaryBg:"var(--bg_white)",primaryTextColor:"var(--baseColor)",separatorBgColor:"#e7f2ff",secoundaryTextColor:"#00a3fe"},text:{primaryColor:"var(--baseColor)",secondaryColor:"var(--paragraphColor)"},body:{secoundaryBg:"var(--bg_white)",borderColor:"#e9e9e9",primaryBg:"var(--bg_white)"}},theme:"CUSTOMTHEME"},ticketsSettings:{preFillFields:{email:{defaultValue:$("<div>").html(Crm.userDetails.EMAIL).text(),isHidden:!0},contactName:{defaultValue:Crm.userDetails.DISPLAY_NAME,isHidden:!0},subject:{defaultValue:"Question in "+e}}},kbSettings:{showArticleTitleInHeader:!0,disableCategoryBreadCrumbs:!0,disableArticleUpdatedInfo:!0,disableArticlesSearch:!0,disableArticlePermalink:!0,articlePageSections:["articlehelp"]},imChatSettings:{sessionVariables:[{name:"LicenseType",value:n}]}}),window.isHelpOptionOpened=!1,window.kbopened=!0}));var t=$("#zohohc-asap-web-helper-main");t.is(":visible")||t.show(),$(window).keydown((function(t){if(27===t.keyCode&&(e.includes("Subforms")||e.includes("Interlinking Modules")?($("body").removeClass("oH"),ZohoHCAsap.Action("close")):ZohoHCAsap.Action("close")),37===t.keyCode||39===t.keyCode){var i=$("#zohohc_asap_mediaviewer_downloadmedia");i&&i.remove()}})),$(window).click((function(){var e=$("#zohohc_asap_mediaviewer_downloadmedia");e&&e.remove()}))}function installAsasp(e){"undefined"!=typeof ZohoHCAsap&&"object"!=typeof ZohoHCAsap||initAsap(e)}function getworkflowjsfiles(e){var t=[];return e?(t.push("zohocrm_wflyte_workflow.js"),t.push("zohocrm_wfInsights.js")):(t.push("automation/workflow/wfmergefield.js"),t.push("automation/actions/wfdeluge.js"),t.push("automation/workflow/wfActions.js"),t.push("automation/workflow/wfActionHandler.js"),t.push("wfNew.js"),t.push("workflow.js"),t.push("WFTask.js"),t.push("automation/actions/wfwebhook.js"),t.push("automation/actions/wfdeluge.js"),t.push("CrmAutomationActions.js")),t.push(networkUtils.getI18nJSUrl("facebook")),t.push(networkUtils.getI18nJSUrl("twitter")),t.push(networkUtils.getI18nJSUrl("workflowrule")),t.push(networkUtils.getI18nJSUrl("createrecordaction")),t.push(networkUtils.getI18nJSUrl("workflowalert")),t.push(networkUtils.getI18nJSUrl("datebasedworkflow")),t.push(networkUtils.getI18nJSUrl("assignowner")),t.push(networkUtils.getI18nJSUrl("scoringrulesnew")),t.push(networkUtils.getI18nJSUrl("series")),t.push(networkUtils.getI18nJSUrl("businesshours")),t.push(networkUtils.getI18nJSUrl("workflowtriggerconditions")),t}function fetchWFParamterComponentFiles(){var e=networkUtils.returnDependencyFiles(["automation/common/actions-entity-params-dependencies.js","automation/common/crm-automation-actions-helper.js"],ResourceConstants.CRMClient);return e=e.concat(networkUtils.returnDependencyFiles(["automation/common/actions-entity-params-dependencies.css"],ResourceConstants.CRMClient))}function fetchAutomationFunctionFiles(){var e=networkUtils.returnDependencyFiles(["custom-function-model.js","function-model.js"],ResourceConstants.CRMClient),t=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("customfunctions"),"zcrm_custom_functions.min.js"],ResourceConstants.CRM),i=networkUtils.returnDependencyFiles(["custom-function-editor.js","crm-function-components-wrapper.js","crm-functions-helper.js","crux-form-component.js"],ResourceConstants.CRMClient),o=networkUtils.returnDependencyFiles(["custom-function-editor.css","crm-reviewprocess-customfunction.css","function-common.css"],ResourceConstants.CRMClient);Crm.userDetails.RTL_ENABLED&&(o=o.concat(networkUtils.returnDependencyFiles(["function-common-rtl.css"],ResourceConstants.CRMClient)));var n=networkUtils.returnDependencyFiles(["automation/common/crm-mergefield-multilevel.js","lyte-caret.js"],ResourceConstants.CRMClient);n=n.concat(networkUtils.returnDependencyFiles(["automation/common/crm-mergefield-multilevel.css"],ResourceConstants.CRMClient)),Crm.userDetails.RTL_ENABLED&&(n=n.concat(networkUtils.returnDependencyFiles(["automation/common/crm-mergefield-multilevel-rtl.css"],ResourceConstants.CRMClient)));var r=networkUtils.returnDependencyFiles(["crm-automation-actions.js","store_deluge.js"],ResourceConstants.CRMClient);return e.concat(t).concat(i).concat(o).concat(n).concat(r)}function removeViewPortFromAsapWidget(){var e=$("#zohohc-asap-web-helper-core meta[name='viewport']");null!==e&&e.attr("content","")}function deleteUserCheck(e,t,i,o){var n,r=networkUtils.constructUrl(Crm.getCrmBasePath()+"/Security.do?actionName=isDeleteAllowed&id="+e);(new crmRequestPool).initiate({action:r,type:"GET",success:function(r){if(0!=r){for(var s in n=r,$("#automationDiv","#lARhead","#lARdiv","#assgnRestdiv","#assgnResthead","#autoRespRuleshead","#autoRespRulesdiv","#BMhead","#BMdiv").hide(),n)if(n.hasOwnProperty(s)){var a=n[s];if("assignmentRule"==s)a=constructBusinessMessageDiv(a),validationUtils.isEmpty(a)||(constructParticipateList(a,"lAR"),$("#AssRuleMsg").show());else if("assignmentRestriction"===s)constructParticipateList(a,"assgnRest"),$("#AssRestMsg").show();else if("approvalProcess"===s)constructParticipateList(a,"approvalProcess"),$("#AssRestMsg").show();else if("assignOwner"===s){var l=n[s],c=JSON.parse(JSON.stringify(l));renderAutomationDenyPopComp(c,void 0,void 0,"#automationDiv")}else if("wfNewActions"===s){l=n[s],c=JSON.parse(JSON.stringify(l));renderAutomationDenyPopComp(c,void 0,void 0,"#automationDiv")}else if("wfAlertActions"===s){l=n[s],c=JSON.parse(JSON.stringify(l));renderAutomationDenyPopComp(c,void 0,void 0,"#automationDiv")}else"AutoResponseRules"===s&&(constructParticipateList(a,"autoRespRules"),$("#AssRestMsg").css("display","block"))}isDeleteAllowed(!0,t,e,i,o)}else{isDeleteAllowed(!1,t,e,i,o);var d=$L("#userDeletePopup");d.length>0&&d.e.ltProp("show",!1)}}})}function constructBusinessMessageDiv(e){var t={},i=!1;for(var o in e){var n=e[o];2===n.source?i=!0:t[o]=n}return i&&($L("#BMhead").show(),$L("#BMdiv").show()),t}function constructParticipateList(e,t){getElemById(t+"head").style.display="block",getElemById(t+"div").style.display="block",$("#"+t+"div").empty();var i=document.createElement("ul");for(var o in e){var n=document.createElement("li");n.setAttribute("class","p3");var r=document.createElement("a");$(r).empty();var s=e[o],a=null;"lAR"==t?a=Crm.getCrmBasePath()+"/settings/assignment-rules/"+o+"?module="+s.module:"assgnRest"==t?a=Crm.getCrmBasePath()+"/settings/assignment-thresholds/"+o+"?module="+s.module:"WrkF"==t?a=Crm.getCrmBasePath()+"/settings/workflow-rules/"+o:"autoRespRules"===t&&(a=isAutoResponseEnabled?Crm.getCrmBasePath()+"/settings/auto-response-rules/"+o:Crm.getCrmBasePath()+"/ShowSetup.do?tab=devSpace&subTab=autoRespRules&seModule="+s.module+"&action=viewAutoRespRuleEntries&ruleId="+o),r.innerHTML=s.ruleName,r.setAttribute("href",a),r.setAttribute("target","_blank"),n.appendChild(r),i.appendChild(n),getElemById(t+"div").appendChild(i)}}function showThanksPage(){$("#logoutSurveyPop").html(Lyte.Component.render("crm-logout-survey")),setTimeout((function(){Utils.windowLocationHref(crmConstants.logoutURL+"?logoutSurvey=true")}),2e3)}function isMobileBrowser(){return/iPhone|iPad|iPod|Android|webOS|Windows Phone/i.test(navigator.userAgent)}function isLoadedInCRMPlusIFrame(){return"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()}function closeGlobalSearch(){if(document.querySelector("crm-left-menu-gsearch")){var e=document.querySelector("crm-left-menu");e&&e.component&&e.component.actions.showSearchInput(!1)}else crmNavig.removeFeaturCacheObj("gsearch"),adSearchClose()}function accessibilityShortcut(){var e=$L("crm-accessibility-shortcut")[0];if(e&&e.component.getData("showModal"))e.component.setData("showModal",!1);else{crmNTCGlobal.closeGlobalNotifications(),Crm.menu.globalHideMenu(),$L(".remainder-notifi,#LDPOP").hide(),hideFeedBackPopup(),massActionNotification.hideMassOperationProgressDiv(),$L(".timericon,#wVisTitBar").removeClass("footIconActive timericonAct ldchatPop_active"),"object"==typeof CrmTracking&&CrmTracking.isSalesiqUser&&CrmTracking.popupState&&CrmTracking.minimizePop();var t=document.getElementById("wms_notebook_icon");if(t&&"true"===t.getAttribute("data-shown")&&t.setAttribute("data-shown","false"),e&&e.component)e.component.setData("showModal",!0);else{var i=networkUtils.returnDependencyFiles(["crm-accessibility-shortcut.js","lyte-shortcut.js","crm-keyboard-shortcutsmixin.js"],ResourceConstants.CRMClient),o=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("accessibilityShortcut")],ResourceConstants.CRM),n=i.concat(o);Lyte.injectResources(n,void 0,(function(){Lyte.Component.render("crm-accessibility-shortcut",{showModal:!0},"body")}))}}}function openVoiceAssist(){var e=$L("crm-voice-assistance-shortcut")[0],t=arguments;if(e&&e.component.getData("showModal")&&t[1]&&"control+keyz+keyv"===t[1])e.component.activateVoiceSrch.call(e.component);else if(e&&e.component&&e.component.data.showModal)e.component.setData("showModal",!1);else if(e&&e.component)e.component.setData("showModal",!0);else{var i=networkUtils.returnDependencyFiles(["crm-voice-assistance-shortcut.js"],ResourceConstants.CRMClient),o=networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("voiceassistanceShortcut")],ResourceConstants.CRM),n=i.concat(o);Lyte.injectResources(n,void 0,(function(){Lyte.Component.render("crm-voice-assistance-shortcut",{showModal:!0},"body")}))}}Storage.prototype.setObject=function(e,t){this.setItem(e,"a"+JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&("{"!==t.charAt(0)&&(t=t.substr(1)),t=JSON.parse(t)),t};var CrmIntelligenceNew={checkAlertStatus:function(e){var t={};t.action=e||"status",t[csrfParamName]=csrfToken,(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/crminotification.do",type:"POST",data:t,success:function(e){var t=e.newnoti+e.unseen+e.seen;e.routineMessage>0&&$L("#askZiaCont").addClass("zia-active-rm");var i=document.getElementById("crmpluscommonuinotificationziachatbot");i&&i.classList.add("zia-active-rm"),0===e.status?($(".ziaCount").text(t),$("#di-notification-icon").addClass("ziaCountActive")):1===e.status&&$("#di-notification-icon").addClass("zia-active"),"false"!==e.seenfirsttime&&!1!==e.seenfirsttime||$(".jiaAnimatedDiv").addClass("animkey")}})}},crmui={zIndex:"98",fromCloseOther:!1,notesListener:!1,prevoisElement:[],WMSIndex:-1};crmui.thisBody=document.body||document.documentElement,crmui.thisStyle=crmui.thisBody.style,crmui.preventEscCloseOnce=!1,crmui.transSupport=void 0!==crmui.thisStyle.transition||void 0!==crmui.thisStyle.WebkitTransition||void 0!==crmui.thisStyle.MozTransition||void 0!==crmui.thisStyle.MsTransition||void 0!==crmui.thisStyle.OTransition;try{crmui.transition="Webkit"===$L.userAgent.browser?"-webkit-transition":"Mozilla"===$L.userAgent.browser||"Firefox"===$L.userAgent.browser?"-moz-transition":"MSIE"===$L.userAgent.browser?"-ms-transition":"Opera"===$L.userAgent.browser?"-o-transition":"transition",crmui.transform="Webkit"===$L.userAgent.browser?"-webkit-transform":"Mozilla"===$L.userAgent.browser||"Firefox"===$L.userAgent.browser?"-moz-transform":"MSIE"===$L.userAgent.browser?"-ms-transform":"Opera"===$L.userAgent.browser?"-o-transform":"transform"}catch(e){crmui.transition=void 0}"undefined"!=typeof uiTrans&&$("head").append(uiTrans),crmui.window,crmui.freeze=1,crmui.showPopup=function(e){if("string"==typeof e){var t=!0;crmui.showPop(e,t)}else{var i=e.id,o=e.start,n=e.complete,r=e.clickDismiss,s=e.freezeLayer,a=(t=e.escToClose,e.headerBg),l=e.bindSelect;crmui.showPop(i,t,o,n,r,s,a,l)}},crmui.showPop=function(e,t,i,o,n,r,s,a){r=$("#FreezeLayer");var l=$("body"),c=r.css("display"),d=renderingUtils.windowHeight,u=$("#"+e),m=u.outerHeight();i&&i.call(window,e),s&&u.addClass("headerBg"),u.addClass("ppTop"),"fieldPropertiesPopup"!==e&&"fieldPropertiesPopup2"!==e&&"infoNPermissionDiv"!==e||(u.find(".formBldPopHd").addClass("pp-header"),u.find(".p30").addClass("pp-content"),u.find(".popup-model-footer").addClass("pp-footer"));var p=u.find(".pp-content"),g=u.find(".pp-footer");if(r||void 0===r){if(0==r.length||"none"===c)renderingUtils.freezeBackground(),r.hide(),r.fadeIn();else if("cobdiv_alert"===e&&0==$("#FreezeLayer_1").length&&$("#helpdesk").hasClass("cobclicked")){var f=$("<div>").attr({class:"freezeLayer",id:"FreezeLayer_1",style:"z-index: 30;"});l.append(f),crmui.freeze++}n&&r.on("click",(function(){crmui.hidePopup(e)}))}m>=d-(isChatEnabled?26:0)&&g.addClass("box-sh");var h=d-175;p.length>0&&(p.css({"max-height":h}),p.bind("scroll",(function(){var t=$("#"+e),i=$L(t.find(".pp-content")),o=t.find(".pp-footer");i.scrollTop()+i.innerHeight()>=i[0].scrollHeight?o.removeClass("box-sh"):o.addClass("box-sh"),$("#cNsubformFileAttachDrop").hide(),$("div").filter("#cNSubformFileUpload").closest(".labelValCreate").removeClass("focusEleField")}))),l.addClass("oH"),u.show(),setTimeout((function(){u.addClass("showPpTop"),"pl_prefOrderPopup"!==u.attr("id")&&crmLayout.Resize.PopupHeightResize(),p.length>0&&(h<p[0].scrollHeight&&g.addClass("box-sh"),p.hasClass("ofV")&&p.css({overflow:"visible"}));var e=$L("#viewAsContainer");e&&0!==e.length&&Crm.userDetails.isPinnedColumnEnabled&&CMB.setWidthForPreview(e)}),100),(t||void 0===t)&&crmui.escPopup(e),(void 0===a||!0===a||a)&&wfForm.chosen_show(e),o&&u.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend ",(function(){var t=$("#"+e);o.call(window,e),t.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})),crmui.modalZIndex("nonLyte",u[0],"open")},crmui.escPopup=function(e){$("html").off("keyup").on("keyup",(function(t){if(27!==t.keyCode||crmui.preventEscCloseOnce)setTimeout((function(){crmui.preventEscCloseOnce=!1}),10);else{var i=$("#autoNumberConfirmUpdatePopup"),o=$("#fieldtyperesult"),n=$("crm-dynamic-layout-unused-popup");if("cobdiv"===e){var r=$("#orgName");return Crm.trackSpotLightAction("Customer OnBoarding - User clicked Esc",{ZUID:Crm.userDetails.ZUID}),Crm.client_tracking("Customer OnBoarding - User clicked Esc"),void((""==r.val()||""!=r.val()&&""==$("#orgPhone").val()&&""==$("#orgMobile").val())&&(crmui.showMsgBand("warning",I18n.getMsg("crm.alert.mobileorphoneorcompany"),5e3),r.focus()))}if("fieldPropertiesPopup"===e&&$("#deleteStages").is(":visible"))return;if("fieldPropertiesPopup"===e&&$(".dynFormPopup").is(":visible"))return;if(o.is(":visible")&&n.is(":visible"))return;if($L(".rtfLargeTextEditorParent").is(":visible"))return;if("addRelatedFieldRelatingPop"===e)$("#addRelatedFieldRelatingPop").removeClass("showPpTop").hide(),$("#addRelatedFieldsPop").removeClass("goBackToFirstLayer");else if("multipleFieldsEditPop"===e)$("#bp-attachment").remove(),crmui.hidePopup(e);else if("fieldPropertiesPopup"===e){$("#addOpp").hide();var s=$(".meetingConfigurationDisablePop").is(":visible"),a=$L(".dupChkPreferenceModal").is(":visible");s||a||crmui.hidePopup(e)}else if(i.is(":visible"))i.hide();else if("newRelatedListPopUpDiv"===e){var l;if(renderingUtils.hideFreezeLayer(),renderingUtils.removeFreezeLayer(),crmui.hidePopup("newRelatedListPopUpDiv, CrmWidgetsForm"),(l=document.querySelector("crm-webtabs-modal"))&&l.component&&l.component.setData("show",!0),(l=document.querySelector("crm-webtabs-create"))&&l.component)if(!l.component.data.widgetInfo.id){var c=l.querySelector("#widgetRadioBtn");c&&(c.ltProp("checked",!1),l.component.validateSave())}var d=$("#editor-menuprop")[0];d&&d.ltProp("show",!0)}else if("deletefield"===e&&$("#subformNotDelete").is(":visible"))crmui.hidePopup(e,!0),sE(t);else if("convertNormalWarningPopup"===e)$("#fieldPropertiesPopup").removeClass("moveBackToTheFreeze"),crmui.modalZIndex("nonLyte",$L("#convertNormalWarningPopup")[0],"close"),$("#convertNormalWarningPopup").removeClass("showPpTop").hide(),$("#globalset_type").prop("checked",!0),$("#globalsetSelectParent").removeClass("vH"),crmui.escPopup("fieldPropertiesPopup");else if("convertGlobalWarningPopup"===e)crmui.modalZIndex("nonLyte",$L("#convertGlobalWarningPopup")[0],"close"),$("#convertGlobalWarningPopup").removeClass("showPpTop").hide(),$("#fieldPropertiesPopup").removeClass("moveBackToTheFreeze"),crmui.escPopup("fieldPropertiesPopup");else if("convertWarningPopup"===e)crmui.modalZIndex("nonLyte",$L("#convertWarningPopup")[0],"close"),$("#convertWarningPopup").removeClass("showPpTop").hide(),$("#fieldPropertiesPopup").removeClass("moveBackToTheFreeze"),$("#default_type").prop("checked",!0),crmui.escPopup("fieldPropertiesPopup");else if("encryptConfirmationPopup"===e){var u=$("#fieldtyperesult").find('input[name="fldEnc"]');u.prop("checked")?u.prop("checked",!1):u.prop("checked",!0),$("#encryptConfirmationPopup").removeClass("showPpTop").hide(),$("#fieldPropertiesPopup").removeClass("moveBackToTheFreeze"),crmui.escPopup("fieldPropertiesPopup")}else if("pickMapPopup"===e){var m=$("#fieldPropertiesPopup"),p=$("#globalset"),g=$("div#currentfield");p.removeData("mappedOptions");var f=p.data("oldMappedOptions");void 0!==f&&p.data("mappedOptions",f);var h=p.data("oldval");void 0===h||"None"===h||void 0===g.data("globalpicklistid")&&void 0===f?(p.val("None"),CMB.handlePicklist(!1,!0)):p.val(h),m.removeClass("moveBackToTheFreeze"),crmui.modalZIndex("nonLyte",$L("#pickMapPopup")[0],"close"),$("#pickMapPopup").removeClass("showPpTop").hide(),crmui.escPopup("fieldPropertiesPopup")}else if("picklistCannotBeConverted"===e)$("#fieldPropertiesPopup").removeClass("moveBackToTheFreeze"),$("#picklistCannotBeConverted").removeClass("showPpTop").hide(),crmui.escPopup("fieldPropertiesPopup");else if("showMapMandatoryWarningPop"===e)$("#pickMapPopup").removeClass("moveBackToTheFreeze"),crmui.modalZIndex("nonLyte",$L("#showMapMandatoryWarningPop")[0],"close"),$("#showMapMandatoryWarningPop").removeClass("showPpTop").hide(),crmui.escPopup("pickMapPopup");else if(Crm.userDetails.isStaticSubFormEnabled&&"subFrmEditProps"===e){var v=$("#subFrmEditProps");v&&v.data("isIntialLoad")&&CrmSubform.subfrmDontSave(),crmui.hidePopup(e)}else if("pl_prefOrderPopup"===e)$("#FreezeLayer").css("z-index","20"),$("#picklistMaindiv .importDiv").removeClass("overflhidden"),crmui.hidePopup(e,!0);else if(Crm.userDetails.isStaticSubFormEnabled&&"fieldPropertiesPopup2"===e){var y=$("#fieldPropertiesPopup"),C=$("#fieldPropertiesPopup2");if(y.is(":visible")){y.removeClass("moveBackToTheFreeze"),C.removeClass("showPpTop").hide(),crmui.escPopup("fieldPropertiesPopup");var b=$L("#staticMapperComponentContent")[0].firstChild;if(b){var w=b.component.getData("addingFieldId");(g=$("#currentfield")).data("compAddingfieldId",w)}}else crmui.hidePopup(e),$(".staticSubfrmModalContent:visible").closest("crm-subform-static-mapping-content")[0].component.setData("staticFieldPopupCloseOnEscape",!0);C.find("#picklistFieldFPPopup").remove()}else if("canvasdetails"===e){var I=$L("crm-detailview-oldeditor");I&&I[0]&&I[0].component&&I[0].component.methods&&I[0].component.methods.onClosePopup&&I[0].component.methods.onClosePopup.call(I[0]),crmui.hidePopup(e)}else if("bulkUpdateFldsListForScheduler"===e)hideAnimatePopup("bulkUpdateFldsListForScheduler"),renderingUtils.removeFreezeLayer(),renderingUtils.hideFreezeLayer();else if($("#conditionalFieldRightSection").length||$("validationRuleRightSection").length)renderingUtils.freezeBackground();else if("WarningDiv"===e)crmui.hidePopup(e),renderingUtils.removeFreezeLayer(),sE(t);else if($("#VRAjaxEdit:visible").length)crmui.showPopup("VRAjaxEdit");else if("popupnew"===e){var E=$L("#memStatusDeleteWarningPop");E[0]&&E[0].component&&E[0].component.data.ltPropShow&&sE(t)}else{if("commonActionPage"===e){var k=$L("crm-kiosk-builder"),x=$L("crm-cc-actions");if(k.length>0)k[0].setData("isKioskStateClicked",!1),($L("#kioskDisconnectedCompConnect").length>0||$L("crm-kiosk-disconnected-components-popup").length>0)&&($L("#commonActionPage").removeClass("kioskActionPopZInd"),$L("#FreezeLayer").removeClass("kioskLeftPanActionZInd"));else if(x.length>0)return}crmui.hidePopup(e)}}}))},crmui.hidePopup=function(e,t,i,o){var n=$("#"+e),r=$("html"),s=$("body");$L(".rtfLargeTextEditorParent").is(":visible")||n.is(":visible")&&!n.find(".vr_cancelTrigger").length&&("enrichPopupDiv"===e&&$L(".freezeLayer").removeClass("erlEnrichDataPop"),"addUnsubscriptionForm"!==e&&"limitReachedPop"!==e||i||(i=unsubscription.loadUnsubscribeLinks),"defaultURLPP"!==e&&"messagePreviewPP"!==e&&"forecastRemoveModal"!==e||(t=!0),"addAggFldPopup"===e&&document.getElementById("errorSuggestion").ltProp("show",!1),s.removeClass("oH"),r.removeClass("oH"),crmui.transSupport?(n.removeClass("showPpTop"),n.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend ",(function(){var t=$("#"+e),o=$("html");t.css({height:"auto",height:"auto",overflow:"visible"}),t.hide(),o.off("keyup"),o.css({overflow:""}),i&&i.call(window),t.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}))):(n.css({height:"auto",overflow:"visible"}),n.hide(),r.off("keyup"),i&&i.call(window)),o&&n.empty(),crmui.modalZIndex("nonLyte",n&&n.length>0?n[0]:n,"close"),t||("hierarchyPopup"===e&&void 0!==CrmAnalytics&&(CrmAnalytics.hierarchyPersonalCache={},CrmAnalytics.hierarchyTeamCache={}),"cobdiv_alert"===e&&$("#helpdesk").hasClass("cobclicked")?$("#FreezeLayer_1").fadeOut("",(function(){$(this).remove()})):$("#createValidationRulePopup").is(":visible")||$("#FreezeLayer").fadeOut("",(function(){if(!$("#autoNumberConfirmUpdatePopup").is(":visible"))if($(".temp_freezelayer.emailAI").length>0)removeTempFreezeLayer(),(t=$("#FreezeLayer")).show(),t.css({"z-index":"24"});else if("deletefield"===e&&void 0!==$("#fieldPropertiesPopup")[0]&&void 0!==$("#fieldPropertiesPopup")[0].className&&$("#fieldPropertiesPopup")[0].className.includes("op0")){$("#fieldPropertiesPopup").removeClass("op0"),(t=$("#FreezeLayer")).show(),t.css({"z-index":"24"})}else if("deletefield"===e&&$("#fieldtyperesult").find("#formulaFieldFPPopup").is(":visible")){var t;(t=$("#FreezeLayer")).css("display","block"),t.removeClass("zi30")}else renderingUtils.removeFreezeLayer()})),"businessHrs"==e&&(CrmBusinessHours.businessHoursJson={}),"undefined"!=typeof CMB&&(CMB.isMxnFieldProperty=!1),Crm.userDetails.isStaticSubFormEnabled&&"deleteStages"===e&&n&&void 0!==n[0].getAttribute("zind")&&($("#popup-modifi").css("z-index",n[0].getAttribute("zind")),n[0].removeAttribute("zind"))))},crmui.getSetMaxWt=function(e,t,i){if(crmui.transSupport){var o=[],n=0;null==i&&(i=0),$("#"+t).css({overflow:"hidden"}),setTimeout((function(){for(var i=e.length,r=0;r<i;r++)"-"===e[r][0]&&(e[r]=e[r].slice(1),o[r]=e[r]),"+"===e[r][0]?(e[r]=e[r].slice(1),o[r]=e[r]):o[r]=$("#"+e[r]).outerWidth();n=Math.max.apply(Math,o)+50,new animate({element:"#"+t,width:n,easing:"easeOutCubic",duration:260,start:function(){$("#"+t).css({overflow:"hidden"})},complete:function(){$("#"+t).css({overflow:"visible"})}}).play()}),i)}},crmui.getSetMaxHt=function(e,t,i){if(crmui.transSupport){if(null==t)return;null==i&&(i=0),"."===t[0]?$(t).css({overflow:"hidden"}):$("#"+t).css({overflow:"hidden"}),setTimeout((function(){for(var i=0,o=e.length,n=0;n<o;n++)"object"===jQuery.type(e[n])?i+=e[n].outerHeight():"@"===e[n][0]?(e[n]=e[n].slice(1),i-=$("#"+e[n]).outerHeight()):"-"===e[n][0]?i-=parseInt(e[n].slice(1)):"+"===e[n][0]?i+=parseInt(e[n].slice(1)):""!==e[n].trim()&&(i+=$("#"+e[n]).outerHeight());(i+=50,"."===t[0])?new animate({element:"."+t,height:i,easing:"easeOutCubic",duration:260,start:function(){$("#"+t).css({overflow:"hidden"})},complete:function(){$("#"+t).css({overflow:"visible"})}}).play():new animate({element:"#"+t,height:i,easing:"easeOutCubic",duration:260,start:function(){$("#"+t).css({overflow:"hidden"})},complete:function(){$("#"+t).css({overflow:"visible"})}}).play()}),i)}},crmui.showTooltip=function(e,t,i,o){var n,r;clearTimeout(crmui.tooltip_timeout);var s,a,l=[],c=[],d=[],u=renderingUtils.windowWidth,m=renderingUtils.windowHeight;"string"==typeof e?(s=e,t=!!t,i=""===i||null==i?void 0:i,o=void 0===o?event.target:o,r=!!t):(s=e.content,t=!(void 0!==e.isHTML&&!e.isHTML),i=e.position,o=void 0===e.target?event.target:e.target,r=null==e.tooltipHover||null==e.tooltipHover||e.tooltipHover,n=e.classList),l.width=$(o).outerWidth(),l.height=$(o).outerHeight(),0==$("#wf_tooltip").length&&((a=$("<div>")).attr({id:"wf_tooltip",class:"wf_tooltip fs"}),$("body").append(a));var p=$("#wf_tooltip");p.removeClass(p.attr("class")),p.addClass("wf_tooltip fs");var g=$(document.createElement("div"));g.attr({id:"tooltip_cnt",class:"tooltip_cnt"}),$(o).hasClass("addIcon")&&g.attr({id:"tooltip_cnt",class:"tooltip_cnt crm-extra-small-font-size"}),p.removeClass("setDelay"),t||p.addClass("setDelay"),p.removeAttr("style"),void 0===s||"#"!==s[0]&&"."!==s[0]?void 0!==t&&null!=t&&t?g.html(s):g.text(s):(s=$(s).html(),g.html(s)),p.html(g);var f=[],h=crmui.getOffset(o);c.height=p.outerHeight()+3;var v=isChatEnabled?26:0;d.height=m-v,d.width=u;var y=h.top,C=d.height-h.top-l.height,b=d.width-h.left;if(p.removeClass("center right left bottom top showOnLeft showOnRight"),p.addClass(n),c.height<C){var w=10,I=C-l.height;g.css({"max-height":I,overflow:"auto"}),f.top="showOnRight"===i||"showOnLeft"===i?h.top-2:h.top+l.height+7;var E=f.top;$(o).hasClass("disableNavigator")&&(E-=50),p.addClass("bottom").css({top:E})}else if(y>C){w=10;var k=!1;"showOnRight"!==i&&"showOnLeft"!==i||(f.top=h.top+l.height+5-c.height,f.height=y+l.height+7,k=!0),c.height>y?(f.top=0,!k&&(f.height=y-w)):k||(f.top=h.top-c.height-4,f.height=y-w),p.addClass("top");var x=f.height,T=f.top;g.css({"max-height":x,overflow:"auto"}),$(o).hasClass("disableNavigator")&&(T+=30),p.css({top:T})}else if(y<C){w=10;var P=C-l.height;g.css({"max-height":P,overflow:"auto"}),f.top="showOnLeft"===i||"showOnRight"===i?h.top-8:h.top+l.height+8;var L=f.top;p.addClass("bottom").css({top:L})}switch(c.width=p.outerWidth()+3,void 0===i&&(h.left>c.width/2&&b-l.width>c.width/2?(p.addClass("center"),i="center"):h.left>c.width/2?(p.addClass("right"),i="right"):(p.addClass("left"),i="left")),i=i.toLowerCase()){case"showonright":p.addClass("showOnRight");var S=h.left+l.width+10;p.css({left:S});break;case"showonleft":p.addClass("showOnLeft");S=h.left-c.width-10;p.css({left:S});break;case"center":p.addClass("center");S=h.left-c.width/2+l.width/2+2;p.css({left:S});break;case"right":p.addClass("right");var M=b-l.width/2-15;p.css({right:M});break;case"left":p.addClass("left");var O=h.left-3;p.css({left:O})}null!=r&&r&&($("#tooltip-styles").remove(),$('<style type="text/css" id="tooltip-styles">.wf_tooltip:hover{display: block !important;}</style>').appendTo(document.head)),p.show()},crmui.toolTip_show=function(e,t,i,o){crmui.showTooltip(i,o,t,e)},crmui.hideTooltip=function(){crmui.toolTip_hide()},crmui.toolTip_hide=function(){crmui.tooltip_timeout=setTimeout((function(){var e=$("#wf_tooltip");e.hide(),e.is(":visible")?e.hasClass("wf_tooltip_bgwhite")&&e.addClass("wf_tooltip_bgwhite"):e.removeClass("wf_tooltip_bgwhite")}),300)},crmui.showMsgBand=function(e,t,i){crmui.hideTimeout,(s=$("#crm-msg")).remove(),clearTimeout(crmui.hideTimeout);var o=$("<div>"),n=document.createElement("span");n=$(n);var r=document.createElement("span");r=$(r),o.attr({id:"crm-msg",class:"crm-msg fromTopCenter"}),n.attr({id:"crm-msg-close",class:"crm-msg-close ico-close-small pA dIB cP svgIcons"}),r.attr({class:"cm-ico"}),$("body").append(o),o.click((function(e){sE(e)}));var s=$("#crm-msg");$("#modulelayoutcontainer").length>0&&o.addClass("cust-msg-top"),o.html("<div class='crm-msg-cnt'>"+t+"</div>"),"success"===e&&s.addClass("crm-band-success"),"warn"!==e&&"warning"!==e&&"alert"!==e||s.addClass("crm-band-warn"),"info"===e&&s.addClass("crm-band-info"),"error"===e&&s.addClass("crm-band-error"),s.show(),""!=i&&"infinity"!=i?crmui.hideMsgBand(i):"infinity"===i?crmui.hideMsgBand("150000"):crmui.hideMsgBand("4000"),s.append(n),s.prepend(r),$("#crm-msg-close").on("click",(function(){$("#crm-msg").remove()}))},crmui.showMsgBandWithMarkdown=function(e,t,i="4000"){crmui.hideTimeout,(s=$("#crm-msg")).remove(),clearTimeout(crmui.hideTimeout);var o=$("<div>"),n=document.createElement("span");n=$(n);var r=document.createElement("span");r=$(r),o.attr({id:"crm-msg",class:"crm-msg fromTopCenter"}),n.attr({id:"crm-msg-close",class:"crm-msg-close ico-close-small pA dIB cP svgIcons"}),r.attr({class:"cm-ico"}),$("body").append(o),o.click((function(e){sE(e)}));var s=$("#crm-msg");$("#modulelayoutcontainer").length>0&&o.addClass("cust-msg-top"),o.html("<div class='crm-msg-cnt cscript-msg-cnt'></div>"),o.find(".crm-msg-cnt").append(t);const a={success:"crm-band-success",warn:"crm-band-warn",warning:"crm-band-warn",alert:"crm-band-warn",info:"crm-band-info",error:"crm-band-error"};a[e]&&s.addClass(a[e]),s.show(),crmui.hideMsgBand("infinity"===i?"150000":i),s.append(n),s.prepend(r),$("#crm-msg-close").on("click",(function(){$("#crm-msg").remove()}))},crmui.hideMsgBand=function(e){crmui.hideTimeout=setTimeout((function(){$("#crm-msg").fadeOut("",(function(){$("#crm-msg").remove()})),clearTimeout(crmui.hideTimeout)}),e)},crmui.getOffset=function(e){var t=[],i=$(e).offset();return t.left=i.left,t.top=i.top,t},crmui.fromFooter=function(e,t){var i=$("#"+e),o=isChatEnabled||Crm.userDetails.CLIENT_ACCOUNT?26:0,n=i.outerHeight()-o,r=renderingUtils.windowHeight-100;i.css("max-height",r),i.css({bottom:"-"+n+"px"}),i.fadeIn("fast",(function(){i.css({bottom:o}),t&&t.call(window)}))},crmui.toFooter=function(e){var t=$("#"+e),i=isChatEnabled||Crm.userDetails.CLIENT_ACCOUNT?26:0,o=t.outerHeight()-i;t.css({bottom:"-"+o+"px"}).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){var t=$("#"+e);t.hide(),t.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}))},crmui.showTooltipOn=function(e,t,i,o){crmui.toolTip_show(e,t,i,o),$("#wf_tooltip").addClass("wf_link_white")},crmui.hideTooltipOn=function(){var e=$("#wf_tooltip");crmui.timeout=setTimeout((function(){e.length&&e.is(":hover")?(e.on("mouseleave",(function(){crmui.toolTip_hide()})),clearTimeout(crmui.timeout)):crmui.toolTip_hide()}),300)},crmui.checkPopupScroll=function(e){var t=$("#"+e),i=isChatEnabled?26:0,o=renderingUtils.windowHeight;document.getElementById(e).scrollHeight>=o-i-175&&t.find(".pp-footer").addClass("box-sh")},crmui.animateScrollTop=function(e,t,i,o,n){var r,s=e.scrollTop,a=t-s,l=0,c=o,d=function(){var t;switch(l+=20,c){case"inQuad":t=crmEasingFunctions.easeInQuad(l,s,a,i);break;case"outQuad":t=crmEasingFunctions.easeOutQuad(l,s,a,i);break;case"inOutQuad":t=crmEasingFunctions.easeInOutQuad(l,s,a,i);break;case"inCubic":t=crmEasingFunctions.easeInCubic(l,s,a,i);break;case"outCubic":t=crmEasingFunctions.easeOutCubic(l,s,a,i);break;case"inOutCubic":t=crmEasingFunctions.easeInOutCubic(l,s,a,i);break;case"inQuart":t=crmEasingFunctions.easeInQuart(l,s,a,i);break;case"outQuart":t=crmEasingFunctions.easeOutQuart(l,s,a,i);break;case"inOutQuart":t=crmEasingFunctions.easeInOutQuart(l,s,a,i);break;case"inQuint":t=crmEasingFunctions.easeInQuint(l,s,a,i);break;case"outQuint":t=crmEasingFunctions.easeOutQuint(l,s,a,i);break;case"inOutQuint":t=crmEasingFunctions.easeInOutQuint(l,s,a,i);break;case"inSine":t=crmEasingFunctions.easeInSine(l,s,a,i);break;case"outSine":t=crmEasingFunctions.easeOutSine(l,s,a,i);break;case"inOutSine":t=crmEasingFunctions.easeInOutSine(l,s,a,i);break;case"inExpo":t=crmEasingFunctions.easeInExpo(l,s,a,i);break;case"outExpo":t=crmEasingFunctions.easeOutExpo(l,s,a,i);break;case"inOutExpo":t=crmEasingFunctions.easeInOutExpo(l,s,a,i);break;case"inCirc":t=crmEasingFunctions.easeInCirc(l,s,a,i);break;case"outCirc":t=crmEasingFunctions.easeOutCirc(l,s,a,i);break;case"inOutCirc":t=crmEasingFunctions.easeInOutCirc(l,s,a,i);break;default:t=crmEasingFunctions.linear(l,s,a,i)}e.scrollTop=t,l<i?r=setTimeout(d,20):clearTimeout(r)};d()};var dtPtn,crmEasingFunctions={linear:function(e,t,i,o){return i*e/o+t},easeInQuad:function(e,t,i,o){return i*(e/=o)*e+t},easeOutQuad:function(e,t,i,o){return-i*(e/=o)*(e-2)+t},easeInOutQuad:function(e,t,i,o){return(e/=o/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,i,o){return i*(e/=o)*e*e+t},easeOutCubic:function(e,t,i,o){return e/=o,i*(--e*e*e+1)+t},easeInOutCubic:function(e,t,i,o){return(e/=o/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,i,o){return i*(e/=o)*e*e*e+t},easeOutQuart:function(e,t,i,o){return e/=o,-i*(--e*e*e*e-1)+t},easeInOutQuart:function(e,t,i,o){return(e/=o/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,i,o){return i*(e/=o)*e*e*e*e+t},easeOutQuint:function(e,t,i,o){return e/=o,i*(--e*e*e*e*e+1)+t},easeInOutQuint:function(e,t,i,o){return(e/=o/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,i,o){return-i*Math.cos(e/o*(Math.PI/2))+i+t},easeOutSine:function(e,t,i,o){return i*Math.sin(e/o*(Math.PI/2))+t},easeInOutSine:function(e,t,i,o){return-i/2*(Math.cos(Math.PI*e/o)-1)+t},easeInExpo:function(e,t,i,o){return i*Math.pow(2,10*(e/o-1))+t},easeOutExpo:function(e,t,i,o){return i*(1-Math.pow(2,-10*e/o))+t},easeInOutExpo:function(e,t,i,o){return(e/=o/2)<1?i/2*Math.pow(2,10*(e-1))+t:(e--,i/2*(2-Math.pow(2,-10*e))+t)},easeInCirc:function(e,t,i,o){return e/=o,-i*(Math.sqrt(1-e*e)-1)+t},easeOutCirc:function(e,t,i,o){return e/=o,e--,i*Math.sqrt(1-e*e)+t},easeInOutCirc:function(e,t,i,o){return(e/=o/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:(e-=2,i/2*(Math.sqrt(1-e*e)+1)+t)}};crmui.closeOtherWMSBars=function(e){crmui.fromCloseOther=!0;var t=document.getElementById("wms_notebook_icon");!crmui.notesListener&&t&&(crmui.notesListener=!0,t.addEventListener("click",(function(){crmui.fromCloseOther||crmui.closeOtherWMSBars("notes"),EmailSendingUtil.composeActive&&EmailCompose.etMinimiseCompose()}))),t&&"true"===t.getAttribute("data-shown")&&"notes"!==e&&t.setAttribute("data-shown","false"),"object"==typeof CrmTracking&&CrmTracking.popupState&&"visitor"!==e&&CrmTracking.maximizePop();var i=document.getElementById("viewFeatures");"announcement"===e||!i||"block"!==i.style.display&&0!==i.style.display.length||$L("#msgBoardDisplay")[0].click();var o=$L("#chatbotDiv");o&&o[0].style.visibility&&"hidden"!==o[0].style.visibility&&"askzia"!==e&&Lyte.Mixin.get("crm-chatbot-helper").constructChatbotDiv();var n=document.getElementById("sticky-notes-icon");n&&("view"!==n.getAttribute("data-active")&&"stickyNotes"!==e&&Lyte.Mixin.get("crm-sticky-mixin").stickyRenderer());var r=$L("#di-notification-icon"),s=document.querySelector("crm-zianotification-popup");"zia"!==e&&s&&"reminder"!==e?Lyte.Mixin.get("crm-zianotification-helper").getZiaNotificationSummary(event,r[0]):"zia"!==e&&s&&"reminder"===e&&Lyte.registeredMixins["crm-zianotification-helper"].hideDiNotification(),$L("#remainder-notifi").is(":visible")&&"reminder"!==e&&Activities.showHideRemainder();var a=$L("#rItemDataDiv")[0].querySelector("crm-recent-items");"recentItem"!==e&&a&&a.component.getData("showModal")&&refreshRecentItem1();var l=document.querySelector("crm-dm-notification");l&&"migNotification"!==e&&l.remove();var c=$L("#etComposePanel");if(c&&c.length>0&&!c[0].classList.contains("etMinimize")){EmailCompose.etMinimiseCompose();var d=$L("crm-cloud-picker"),u=$L("#templateComponentDIV");d&&d.length>0&&d[0].component.hidePicker.call(d[0].component),u&&u.length>0&&"none"!==u[0].style.display&&template.compCloseComponentPop()}var m=$L("#schedulerNotificationPopup");"scheduler"!==e&&m&&m.length>0&&m[0].classList.contains("schedularOpen")&&crmSchedulerNotification.hideInSchedularBar(),crmui.checkForLyteModalAlertOpened(),crmui.fromCloseOther=!1;var p=$L("#wid_calCreate_opts_menu");p&&p.length>0&&"none"!==p[0].style.display&&p.hide();var g=document.getElementById("zohohc-asap-web-helper-main"),f=document.getElementById("zohohc-asap-web-layoutbox"),h=f?window.getComputedStyle(f):"";g&&"help_bot"!==e&&h&&"none"!==h.display&&initAsap("gchelpinit");var v=$L("#zpbsdk");v&&v.length>0&&"hidden"!==v.visibility&&"Phone"!==e&&(v[0].style.visibility="hidden")},crmui.checkForLyteModalAlertOpened=function(){for(var e=$L(".lyteModal"),t=$L(".alertPopup"),i=e.length,o=t.length,n=0;n<i;n++){"visible"!==(r=e[n].closest("lyte-wormhole")).style.visibility||r.component&&r.component.parent&&"privateModuleBuilderPopup"===r.component.parent.getAttribute("Id")||r._callee.setData("ltPropAllowMultiple",!0)}for(n=0;n<o;n++){var r;"hidden"!==(r=t[n].closest("lyte-wormhole")).style.visibility&&r._callee.setData("ltPropAllowMultiple",!0)}},crmui.modalZIndex=function(e,t,i,o=null){if(t)if("open"===i){var n,r=98,s=crmui.isElementVisible(t);switch(r=s?s+2:r+2,e){case"lyte-messagebox":case"lyte-popover":case"lyte-alert":t.parentElement.classList.contains("analytics_alertWrapper")||(t.parentElement.style.zIndex=r),n=t.parentElement;break;case"lyte-modal":t.parentElement.style.zIndex=r,n=t.parentElement;break;case"nonLyte":t.style.zIndex=r,"WMSElement"===o&&"mics_stacked_carpet"!==t.getAttribute("id")||"noFreeze"===o||"delugelockpopup"===t.getAttribute("id")||crmui.adjustFreezeLayer(r,t),n=t;break;default:if("diNotificationDetails"===t.getAttribute("id")){var a=$L("#diNotificationDiv");t.style.zIndex=a&&a.length>0&&a[0].style.zIndex?parseInt(a[0].style.zIndex)-1:r-3}else t.style.zIndex=r;n=t}("WMSElement"===o||t&&t.parentElement&&t.parentElement.classList.contains("recentItemsModal")||"etComposePanel"===t.getAttribute("id"))&&(crmui.WMSIndex>-1&&crmui.prevoisElement.splice(crmui.WMSIndex,1),crmui.WMSIndex=crmui.prevoisElement.length),crmui.prevoisElement.push(n),crmui.zIndex=r,"lyte-messagebox"!==e&&crmui.removePreviousElements(t,e)}else if("close"===i){for(var l=crmui.prevoisElement.length,c=0;c<l;c++){("lyte-messagebox"===e||"lyte-popover"===e||"lyte-alert"===e||"lyte-modal"===e?t.parentElement:t).isEqualNode(crmui.prevoisElement[c])&&(crmui.prevoisElement.splice(c,1),crmui.WMSIndex=c===crmui.WMSIndex?-1:c<crmui.WMSIndex?crmui.WMSIndex-1:crmui.WMSIndex,--c,--l)}"nonLyte"!==e||"noFreeze"===o||t&&"delugelockpopup"===t.getAttribute("id")||(t&&t.classList.contains("singlereminder")?crmui.adjustFreezeLayer(null,t):crmui.adjustFreezeLayer())}},crmui.WMSBarOpened=function(e,t){if("sticky"===t){for(var i=$L(".sticky"),o=i.length,n=crmui.isElementVisible(i[0]),r=n||98,s=0;s<o;s++)i[s].style.zIndex=r+2;$L(".sticky_freeze_layer")[0].style["z-index"]=r+1,$L(".sticky_add_sign_container")[0].style["z-index"]=r+2,(0===crmui.prevoisElement.length||crmui.prevoisElement.length>0&&!crmui.prevoisElement[crmui.prevoisElement.length-1].isEqualNode(i[0]))&&(crmui.WMSIndex>-1&&crmui.prevoisElement.splice(crmui.WMSIndex,1),crmui.WMSIndex=crmui.prevoisElement.length,crmui.prevoisElement.push(i[0]))}else e&&!e.classList.contains("recentItemsModal")&&crmui.modalZIndex("nonLyte",e,"open","WMSElement")},crmui.adjustFreezeLayer=function(e=null,t=null){e||(e=crmui.isElementVisible(null,"adjustFreeze"));var i=$L("#z_freezeLayer");if(!(i&&i.length>0)||t&&"etComposePanel"===t.getAttribute("id")){var o=$L("#etComposePanel");if(t&&"etComposePanel"===t.getAttribute("id")&&$L("#EmailComposeFreezelayer").length>0&&!o[0].classList.contains("etMinimize"))$L("#EmailComposeFreezelayer")[0].style.zIndex=e-1;else if(!(t&&"etComposePanel"===t.getAttribute("id")&&$L("#EmailComposeFreezelayer").length>0||o.length>0&&parseInt(o[0].style.zIndex)===e&&o[0].classList.contains("etComposeMinWindow")&&!o[0].classList.contains("etMinimize"))){var n=$L("#mics_stacked_backdrop");if(n&&n.length>0&&t&&"mics_stacked_carpet"===t.getAttribute("id"))n[0].style.zIndex=e-1;else if(!(n&&n.length>0&&"none"!==n[0].style.display&&parseInt(n[0].style.zIndex)===e-1)){var r=$L("#campaignIntegFreezePop");if(r&&r.length>0&&t&&"zWebSendInvite"===t.getAttribute("id"))r[0].style.zIndex=e-1;else{var s=$L(".ui-widget-overlay");if(s&&s.length>0&&t&&t.classList.contains("docsdialog"))s[0].style.zIndex=e-1;else{var a=$L("#emptyLayer");if(a&&a.length>0&&t&&"gotoDateContDiv"===t.getAttribute("id"))a[0].style.zIndex=e-1;else{var l=$L(".rtfEditorFreezeLayer");if(l&&l.length>0&&t&&t.classList.contains("rtfLargeTextEditorParent"))l[0].style.zIndex=e-1;else{var c=$L(".ctiapiFreezeLayer");c&&c.length>0&&t&&t.classList.contains("singlereminder")&&(c[0].style.zIndex=e-1),setTimeout((()=>{crmui.applyFreeze(e)}))}}}}}}}else i[0].style.zIndex=e-1},crmui.applyFreeze=function(e){var t=$L("#FreezeLayer")[0],i=$L("#freezeBackGround")[0],o=t?document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"):0;o=parseInt(o);var n=i?document.defaultView.getComputedStyle(i,null).getPropertyValue("z-index"):0;n=parseInt(n),e?o&&(o>n||i&&"none"===i.style.display)?t.style["z-index"]=e-1:i&&"none"!==i.style.display&&(i.style["z-index"]=e-1):(t&&(t.display="none"),i&&(i.display="none"))},crmui.isElementVisible=function(e=null,t=null){for(var i=crmui.prevoisElement.length,o=0,n=0;n<i;n++){var r=window.getComputedStyle(crmui.prevoisElement[n]);(e||"etComposePanel"===crmui.prevoisElement[n].getAttribute("id")&&(crmui.prevoisElement[n].classList.contains("etComposeMinWindow")||crmui.prevoisElement[n].classList.contains("etMinimize")||crmui.prevoisElement[n].style&&"-100%"===crmui.prevoisElement[n].style.right)||"diNotificationDiv"===crmui.prevoisElement[n].getAttribute("id")&&r.bottom.startsWith("-")||"remainder-notifi"===crmui.prevoisElement[n].getAttribute("id")&&"none"!==crmui.prevoisElement[n].style.display||"chatbotDiv"===crmui.prevoisElement[n].getAttribute("id")&&"hidden"!==crmui.prevoisElement[n].style.visibility||t&&("ctireminder"===crmui.prevoisElement[n].getAttribute("id")||"ctiapi_multireminder_bussinessview"===crmui.prevoisElement[n].getAttribute("id")))&&(!e||e.isEqualNode(crmui.prevoisElement[n]))||!((crmui.prevoisElement[n].offsetWidth&&crmui.prevoisElement[n].offsetHeight&&crmui.prevoisElement[n].getClientRects().length||"subSecondaryPopup"===crmui.prevoisElement[n].getAttribute("id"))&&"none"!==r.display&&"hidden"!==r.visibility||crmui.prevoisElement[n].classList.contains("singlereminder"))||(o=o>parseInt(r.zIndex)?o:parseInt(r.zIndex))}return o},crmui.removePreviousElements=function(e,t){for(var i=crmui.prevoisElement.length,o=0;o<i;o++){var n=window.getComputedStyle(crmui.prevoisElement[o]);!e||("nonLyte"!==t&&t||e.isEqualNode(crmui.prevoisElement[o]))&&("nonLyte"===t||e.parentNode.isEqualNode(crmui.prevoisElement[o]))||!("etComposePanel"===crmui.prevoisElement[o].getAttribute("id")&&crmui.prevoisElement[o].classList.contains("etMinimize")||"diNotificationDiv"===crmui.prevoisElement[o].getAttribute("id")&&n.bottom.startsWith("-"))&&(crmui.prevoisElement[o].offsetWidth||crmui.prevoisElement[o].offsetHeight||crmui.prevoisElement[o].getClientRects().length)&&"none"!==n.display&&"hidden"!==n.visibility||(crmui.prevoisElement.splice(o,1),crmui.WMSIndex=o===crmui.WMSIndex?-1:o<crmui.WMSIndex?crmui.WMSIndex-1:crmui.WMSIndex,--o,--i)}},crmui.commonListener=function(){var e=setInterval((function(){document.getElementById("wmsphonebridge")&&(clearInterval(e),document.getElementById("wmsphonebridge").addEventListener("click",(function(){crmui.closeOtherWMSBars("Phone"),setTimeout((()=>{crmui.modalZIndex("nonLyte",$L("#zpbsdk")[0],"open","WMSElement")}),100)})))}),1e3)},crmui.commonListener(),document.addEventListener("lyteModalBeforeOpen",(function(e){var t=e.srcElement.closest("lyte-wormhole");t&&t.component&&t.component.parent&&t.component.parent.component&&t.component.parent.component.data.ltPropIgnoreZindex||crmui.modalZIndex("lyte-modal",e.srcElement,"open")})),document.addEventListener("lyteAlertBeforeOpened",(function(e){crmui.modalZIndex("lyte-alert",e.srcElement,"open")})),document.addEventListener("lyteModalBeforeClose",(function(e){var t=e.srcElement.closest("lyte-wormhole");t&&t.component&&t.component.parent&&t.component.parent.component&&t.component.parent.component.data.ltPropIgnoreZindex||crmui.modalZIndex("lyte-modal",e.srcElement,"close")})),document.addEventListener("lyteAlertBeforeClose",(function(e){crmui.modalZIndex("lyte-alert",e.srcElement,"close")})),document.addEventListener("lytePopoverBeforeOpen",(function(e){e.srcElement&&(e.srcElement.parentElement.classList.contains("quickCreateAppointmentsPopup")||e.srcElement.parentElement.classList.contains("detailview_add_tag"))&&crmui.modalZIndex("lyte-popover",e.srcElement,"open")})),document.addEventListener("lytePopoverBeforeClose",(function(e){e.srcElement&&(e.srcElement.parentElement.classList.contains("quickCreateAppointmentsPopup")||e.srcElement.parentElement.classList.contains("detailview_add_tag"))&&crmui.modalZIndex("lyte-popover",e.srcElement,"open")})),document.addEventListener("lyteMessageboxBeforeOpen",(function(e){crmui.modalZIndex("lyte-messagebox",e.srcElement,"open")})),document.addEventListener("lyteMessageboxBeforeClose",(function(e){crmui.modalZIndex("lyte-messagebox",e.srcElement,"close")}));var formurl,gblid,intvlTrialPopup,sTimeOut,availStat,CLEAR_INTERVAL_ID,DuplicateId,anchorObj,taskArr,adwordParams={dateFilter:"0",startDate:""},isWorking=!1,http=getHTTPObject(),rowCnt=0,priceRowCount=1,ajaxback=!0,calenderviewHeader=0,advSearchEnableVal="false",httpprotocol=location.protocol+"//",cvUrlInfo=window.cvUrlInfo||{},allTimeArr=[],httphandle=getHTTPObject(),duplicateRecordIds={},pbty=0,showCacheObj={},PAGE_CACHE={},isRelatedListLoaded=!1,listTableStart="<table width='100%' border='0' cellspacing='0' cellpadding='0'>",viewTableStart="<table width='100%' border='0' cellspacing='1' cellpadding='1'>",TBAPageNum=1,TBALoading=!1,pos=0,anchorLeft=0,anchorTop=0,currCVId="",searchletter="",previous_sort_order="",currCVMod="",base64s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",showToggleNote=window.showToggleNote||{display:"block"},CustomizationName={RIGHT_PANEL:"SHOW_RIGHT_PANEL",RECENT_ITEM:"UNPIN_RECENT_ITEM"},scrcntcheck="0",groupIdsVsZuids=groupIdsVsZuids||{};function getHTTPObject(){var e=null;try{if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}catch(e){renderingUtils.showCustomAlert("No support for ajax")}return e}function isContainsPipeSymbol(e,t,i){if("object"==typeof e)for(var o in e){var n=getObj(o);if(n&&(-1!=n.value.search(/\|/)||-1!=n.value.search(/=/)))return"inline"===i?renderingUtils.displayErrorDiv(o,e[o],"crm.field.valid.check"):alert(I18n.getMsg("crm.field.valid.check",I18n.getMsg(e[o]))),!0}else if(getObj(e)&&(-1!=getObj(e).value.search(/\|/)||-1!=getObj(e).value.search(/=/)))return alert(I18n.getMsg("crm.field.valid.check",I18n.getMsg(t))),!0;return!1}function addShowCacheObj(e,t,i){var o="tab_"+t;(-1==e.indexOf("RefreshShowDetails")||"Leads"!=t&&"Contacts"!=t&&"Accounts"!=t&&"Potentials"!=t)&&(-1==e.indexOf("NavigateByRecords")||"Leads"!=t&&"Contacts"!=t&&"Accounts"!=t&&"Potentials"!=t||-1==e.indexOf("changeOption"))&&(-1==e.indexOf("ShowDetails")||-1==e.indexOf("Leads")&&-1==e.indexOf("Contacts")&&-1==e.indexOf("Accounts")&&-1==e.indexOf("Potentials"))&&(-1==e.indexOf("ShowSelectedCustomView")||-1==e.indexOf("updateCV=true")||"Leads"!=t&&"Contacts"!=t&&"Accounts"!=t&&"Potentials"!=t)&&(-1==e.indexOf("ShowSelectedCustomView")||"undefined"==typeof params||1!=params.search(/searchletter=[A-Z]/)||"Leads"!=t&&"Contacts"!=t&&"Accounts"!=t&&"Potentials"!=t)?-1==e.indexOf("CreateCommonModuleandNew")&&-1==e.indexOf("CreateCommonModule")&&-1==e.indexOf("EditCommonModule")&&-1==e.indexOf("CloneCommonModule")&&-1==e.indexOf("CloneCommonModuleandNew")||"Leads"!=t&&"Contacts"!=t&&"Accounts"!=t&&"Potentials"!=t||clearShowCacheObj(o):(setDataFetchDate(),showCacheObj[o]=getObj("show").innerHTML)}function clearShowCacheObj(e){showCacheObj.hasOwnProperty(e)&&delete showCacheObj[e]}function showCacheAjaxNew(e,t,i){var o="tab_"+t;if(showCacheObj.hasOwnProperty(o)){var n=showCacheObj[o];if($("#show").empty(),getObj("show").innerHTML=n,getObj("basic"))0!=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)&&$L("#basic").scrollTo({axis:"y",duration:1e3,offset:-50});JSEvalScript(getObj("show")),getObj("menuincreate")&&($("#menuContent").empty(),getObj("menuContent").innerHTML=getObj("menuincreate").innerHTML),getObj("h3")&&(getObj("operation")?(getObj("ph3").style.display="none",getObj("h3").style.display="none"):(getObj("ph3").style.display="block",getObj("h3").style.display="block",getObj("ph3").className="sideBarHead")),isWorking=!1,i&&i.call(window,n)}else ajaxNew(e,"",i)}function ajaxNew(e,t,i,o,n,r){o=o||"show",returnJson=void 0,commonUtils.showHideLoadingDiv(!0);var s=objectUtils.URL(e).getParams().module,a=getObj("module")?getObj("module").value:"",l=s||a;e=decideGetHtml(e);var c=networkUtils.parseUrl(e).params;for(var d in c)c[d]=decodeURIComponent(c[d]);if(!isWorking){var u="";e.split(/advSearchCnt|GSearch|ChangeOwner.do/).length>1&&(t=e.split("?"),e=t[0],t=t[1]),null!=t?(u=t,u+="&newModel=true"):u="newModel=true",n&&(n=Crm.lyteHeaderNeeded(s));var m={};if(n&&-1!==e.indexOf("ShowEntityInfo.do")&&!s.startsWith("Orchestration")&&!s.startsWith("PathFinder")){if(featuresAvailable.hasOwnProperty("ZiaVision")&&featuresAvailable.ZiaVision){var p=Lyte.registeredMixins["zia-insights-utils"],g=moduleRecordMapping[s],f=p.getInsights(g,c.id,{keys:"vision_data"},null,"zia_vision");m.zia_insights=f}m.detailview_buttons=store.triggerAction("entity","available_actions",{module:moduleRecordMapping[s].api_name,entityId:c.id}).then((function(e){return e}),(function(e){murphy.error(e)})),m.record=store.findRecord(moduleRecordMapping[s].id,c.id,{approved:"both",converted:"both",formatted_currency:!0,home_converted_currency:!0})}var h=objectUtils.parseURLParamString(u);(new crmRequestPool).initiate({action:e,type:"POST",data:h,beforeSend:function(e){1==Crm.isPageLoad&&(e.setRequestHeader("is-Page-Load","true"),Crm.isPageLoad=!1)},success:function(a){-1!=e.indexOf("CalendarView.do")?networkUtils.loadFeatureScripts(["zohocrm_calendar_view.js"],(function(){ajaxNewAfterResponse(a,e,l,u,i,o,t,c,s)})):r&&"detail"===Lyte.Router.getRouteInstance().routeName?Lyte.resolvePromises(r).then((function(n){detailView.lyte_headerDataHolder.detailview_buttons=n.detailview_buttons,detailView.lyte_headerDataHolder.business_card=n.business_card,detailView.lyte_headerDataHolder.custom_buttons=n.custom_buttons,ajaxNewAfterResponse(a,e,l,u,i,o,t,c,s),detailView.pageRefreshHandlingForDetailView()})):n&&"detail"===Lyte.Router.getRouteInstance().routeName?Lyte.resolvePromises(m).then((function(n){detailView.lyte_headerDataHolder.detailview_buttons=n.detailview_buttons,ajaxNewAfterResponse(a,e,l,u,i,o,t,c,s),detailView.pageRefreshHandlingForDetailView()})):(ajaxNewAfterResponse(a,e,l,u,i,o,t,c,s),detailView.pageRefreshHandlingForDetailView())},error:function(t){ajaxNewError(e,t)}})}}function ajaxNewError(e,t){-1!=e.indexOf("CreateCommonModule")&&(alert(I18n.getMsg("crm.field.nomandatory.error")),commonUtils.showHideLoadingDiv()),t.status===crmConstants.errorStatusCode?(renderingUtils.displayPermissionDenied(t),$("#cvEditSave").hide()):t.status===crmConstants.limitExceedsCode&&Search.displayLookupExceedsMsg(t)}function ajaxNewAfterResponse(e,t,i,o,n,r,s,a,l,c){detailView.currentModule=l;var d=document.getElementById("mainloadingDiv");if(d&&(d.style.display="none"),commonUtils.checkErrorMsg(e,r,t))return!1;if(t&&-1!=t.indexOf("EntityInfo")&&(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(detailView.currentModule))&&Crm.downloadValidationRules(t,detailView.currentModule),"object"==typeof(e=detailView.convertMessageHandlingForAutomationActionConvert(e))){if("true"===e.deletedEntity){var u=parseInt(document.getElementById("recordNum").value),m=$("#id")[0].value,p=parseInt($("input[name=fromIndex]")[0].value),g=parseInt($("input[name=toIndex]")[0].value);crmNavig.recentListViewUrl=crmNavig.recentListViewUrl?crmNavig.recentListViewUrl:crmHistory.getState().url;crmNavig.recentListViewUrl,s=crmHistory.getCurrentStateData();var f=void 0;"NavPrevious"===postData.clickId?(f=crmNavig.getRecordNumToId(m,crmNavig.customViewKey),crmNavig[crmNavig.customViewKey].recordId.splice(u-1,1),f-=1,document.getElementById("recordNum").value=f,crmNavig.updateDataParamValue("detailPrevious","recordNum",f),crmNavig.updateDataParamValue("detailNext","recordNum",f)):(crmNavig[crmNavig.customViewKey].recordId.splice(u+1,1),f=u)}var h=crmHistory.getCurrentStateData();return h.trigg="true",h.clickId=postData.clickId,h.recordNum=f,crmNavig.triggerFetch(p,g,f,h,postData.clickId,(function(){crmNavig.navigateRecord(void 0,void 0,h)})),!0}var v="true"===$("#iskanbanview").val();if(-1!=t.indexOf("EditCommonModule")){e=JSON.parse(e);var y=$("input[name=cvid]").val();if(addShowCacheObj(t,i,e),"Activities"===Crm.activityGrp[e.module]){if(updateLeftPanel(e.entityId),v&&$("#entitypopup").length)return $("#cvEditSave").html(""),loadActivityDetails(void 0,$("#recordid_"+e.entityId),void 0,e.entityId,!0),!0;if($("#rightPanel").length)loadActivityDetails(void 0,void 0,void 0,e.entityId,!0);else{var C={clickId:"detailView",module:e.module,id:e.entityId,recordNum:$("#recordNum").val(),pfrom:"cv",cvid:y,lookback:!0,step:"2",calleeObj:"Crm"};$("#from_index").val()&&y&&(C.FROM_INDEX=$("#from_index").val(),C.TO_INDEX=$("#to_index").val(),C.fromActivityListView="true",C.fromEditListView="true"),Crm.addToHistory(void 0,void 0,C)}taskKanbanViewCache&&"false"!==taskKanbanViewCache&&ActivityMoreInfoContent&&(ActivityMoreInfoContent="",taskKanbanViewCache="")}else"listView"==Crm.editReqFrom?Crm.addToHistory(void 0,void 0,{clickId:"detailView",module:e.module,id:e.entityId,recordNum:$("#recordNum").val(),pfrom:"cv",cvid:y,lookback:!0,step:"2",calleeObj:"Crm",WFRuleId:e.WFRuleId}):crmHistory.backOneLevel();return!0}if(-1!=t.indexOf("CreateCommonModuleandNew")&&"1"===postData.futask){"Calls"==i&&(i="Tasks");var b={module:i,calleeObj:"crm"};return postData["property(leContModId)"]&&(b.entityid=postData["property(leContModId)"],b.entityname=postData["property(leContModName)"],b.relmodule=postData["property(leContModSel)"]),postData["property(modid)"]&&(b.modsel=postData["property(modsel)"],b.modid=postData["property(modid)"],b.modname=postData["property(modname)"]),v?(b.kvFollowupTask="true",Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:[i]}).data={module:i,calleeObj:"Crm",kvFollowupTask:"true"},iskvFollowupTask=!0,iskvFollowupEdit=!0,$(".refreshkv").click()):(("Forecasts"==i?Lyte.Router.transitionTo({route:"crm.tab.forecasts.create",dynamicParams:[i]}):Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:[i]})).data=b,addShowCacheObj(t,i,e)),!0}if(-1!=t.indexOf("CloneCommonModuleandNew")||-1!=t.indexOf("CreateCommonModuleandNew"))return"Calls"==i&&(i="Tasks"),"Potentials"==i&&(i="Deals"),v?(Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:[i]}).data={module:i,calleeObj:"Crm",kvFollowupTask:"true"},iskvFollowupTask=!0,iskvFollowupEdit=!0,$(".refreshkv").click()):("Forecasts"==i?Lyte.Router.transitionTo({route:"crm.tab.forecasts.create",dynamicParams:[i]}):Lyte.Router.transitionTo({route:"crm.tab.module.create",dynamicParams:[i]})).data={module:i,calleeObj:"Crm"},addShowCacheObj(t,i,e),!0;if(-1!=t.indexOf("CreateCommonModule")||-1!=t.indexOf("CloneCommonModule")){if(-1!=t.indexOf("returnAnchor=")||-1!=o.indexOf("returnAnchor=")){var w=-1!=t.indexOf("returnAnchor=")?t:o,I=w.substring(w.indexOf("returnAnchor=")+"returnAnchor=".length);(I=I.substring(0,I.indexOf("&")))&&(Crm.scrollToElem=I),crmHistory.backOneLevel()}else e=JSON.parse(e),Crm.addToHistory(void 0,void 0,{clickId:"detailView",module:e.module,id:e.entityId,calleeObj:"Crm"});return addShowCacheObj(t,i,e),!0}if(crmHistory.getState().data&&"rel"!==crmHistory.getState().data.pfrom&&-1!==crmHistory.getState().url.indexOf("EntityInfo")&&getObj("module")){var E=networkUtils.parseUrl(crmHistory.getState().url).params.module;E&&("Activities"!==!Crm.activityGrp[E]||"Activities"===Crm.activityGrp[E]&&"Events"!==E&&$("#leftPanel").length>0&&!a.isFromRecentItem&&"cv"!==a.pfrom&&-1!==t.indexOf("ShowEntityInfo")||(r="show"))}if(v&&"kanbanviewentity"===a.clickId)r="entitypopup";else if("Activities"===Crm.activityGrp[a.module]&&$("#taskDetailsPart").length&&(a.fromDetailView||"taskDetailsPart"==r)){if("Events"===a.module){var k=$("#detailView_"+a.id).find(".activitesColor");k.length>0&&k.remove()}r="taskDetailsPart",$("#rp_td").hide()}if(v&&"cvEditSave"===r)$("#entitypopup").html("");else{if(t.indexOf("GSearch.do")>-1){var x=$(e).filter("#gsearchparentdiv");return $("#gsearchparentdiv").replaceWith(x),$("#gsearchparentdiv").addClass("searchOverlayAct fullSearchBg").css("display","block").show(),"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()&&"undefined"!=typeof CrmPlusLib&&($("#newgsearchouterdiv").hide(),$(".adSearchClose").hide(),commonUtils.showHideLoadingDiv()),commonUtils.showHideLoadingDiv(),$initialVal=$("#searchStr").val(),$("#searchStr").val($initialVal+" "),$("#searchStr").val($initialVal),$("#searchStr").focus(),!0}if($.fn.fullCalendar&&$("#calendarBd").length&&$("#calendarBd").fullCalendar("destroy"),c)c({outlet:"#"+r,html:e});else{if(!document.getElementById(r))return;$("#"+r).empty(),getObj(r).innerHTML=e}}if(!c){if(-1===t.indexOf("GSearch.do")&&adSearchClose(),(v="true"===$("#iskanbanview").val())?"mailcompose"===r&&($("#FreezeLayer3").removeClass("hide"),$("#mailcompose").removeClass("hide"),taskDetailsview.setComposeWindow()):(addHTMLtoDOMCache(t),addShowCacheObj(t,i,e)),getObj("basic"))0!=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)&&$L("#basic").scrollTo({axis:"y",duration:1e3,offset:-50});(-1!==crmHistory.getState().url.indexOf("ShowTab")||-1!==crmHistory.getState().url.indexOf("ShowSelectedCustomView"))&&Crm.latestEntId&&$("tr[id="+Crm.latestEntId+"]").length>0&&$("#listView_"+Crm.latestEntId).length>0&&($L("#listview_"+Crm.latestEntId).scrollTo({axis:"y",duration:1,offset:-250}),$("tr[id="+Crm.latestEntId+"]").attr("class","trialyellowbox"),$("div[id=div"+Crm.latestEntId+"]").closest("td").css({"border-left-color":"#f00","border-left-width":"2px","border-left-style":"solid"}),"true"==!$("#"+Crm.latestEntId).attr("lockedrecord")?$("tr[id="+Crm.latestEntId+"]").animate({"background-color":"#fff"},6e3,(function(){Crm.latestEntId&&($("div[id=div"+Crm.latestEntId+"]").closest("td").css({"border-left-color":"","border-left-width":"","border-left-style":""}),document.getElementById(Crm.latestEntId).setAttribute("class","bg_white")),Crm.latestEntId=void 0})):setTimeout((function(){Crm.latestEntId&&($("div[id=div"+Crm.latestEntId+"]").closest("td").css({"border-left-color":"","border-left-width":"","border-left-style":""}),document.getElementById(Crm.latestEntId).setAttribute("class","bg_white")),Crm.latestEntId=void 0}),5e3)),EvalInnerScript(getObj(r)),commonUtils.showHideLoadingDiv(),getObj("menuincreate")&&($("#menuContent").html($("#menuincreate").html()),$("#menuincreate").empty()),getObj("h3")&&(getObj("operation")?(getObj("ph3").style.display="none",getObj("h3").style.display="none"):(getObj("ph3").style.display="block",getObj("h3").style.display="block",getObj("ph3").className="sideBarHead"));var T=!!a&&Crm.lyteHeaderNeeded(a.module);init(s,void 0,void 0,T),enableSkype(),isWorking=!1;f=void 0;document.forms.createEntityForm&&(document.forms.createEntityForm.name="createEntityForm"+Crm.formCounter,Crm.formCounter++),$("#recordNum").length>0&&(f=parseInt($("#recordNum")[0].value)),crmNavig.setNavigButtonState(f),n&&n.call(window,e)}}function addHTMLtoDOMCache(e){var t=getActionTypeFromUrl(e);if(t&&$("#pcVersionInfo").length){var i=$("#module").val();if(document.getElementById("iskanbanview")&&"true"===document.getElementById("iskanbanview").value)i=networkUtils.parseUrl(e).params.module;PAGE_CACHE[i]=PAGE_CACHE[i]||{},PAGE_CACHE[i][t]=PAGE_CACHE[i][t]||{},$("#preHTMLContainer").length?PAGE_CACHE[i][t].HTML=$("#preHTMLContainer").html():$("#cacheLoadContainer").html(PAGE_CACHE[i][t].HTML),PAGE_CACHE[i][t].PC_VERSION=$("#pcVersionInfo").val()}}function getActionTypeFromUrl(e){var t;return-1!=e.indexOf("/ShowEntityInfo.do")?t="View":-1==e.indexOf("/Edit.do")&&-1==e.indexOf("/Create.do")&&-1==e.indexOf("/Clone.do")||(t="New"),t}function putInHistory(e,t){var i=t.split("|"),o=i[0];Crm.getCrmBasePath(),i[1];return"ShowDetails"==o&&"&isload=false",!0}function yrsBetween(e,t){e=getObj("property(Start Date1)").value;var i=CrmDateUtils.splitDateVal(e);startdate_yyyy=i[2];t=getObj("property(End Date1)").value;var o=CrmDateUtils.splitDateVal(t);return enddate_yyyy=o[2],enddate_yyyy-startdate_yyyy}function monthsBetween(e,t){var i=CrmDateUtils.splitDateVal(e);startdate_dd=i[0],startdate_mm=i[1],startdate_yyyy=i[2];var o=CrmDateUtils.splitDateVal(t);enddate_dd=o[0],enddate_mm=o[1],enddate_yyyy=o[2];var n=0;return parseInt(enddate_yyyy)>parseInt(startdate_yyyy)?(n+=12*(parseInt(enddate_yyyy)-parseInt(startdate_yyyy)-1),n=parseInt(enddate_mm)>parseInt(startdate_mm)?parseInt(n)+12+parseInt(enddate_mm)-parseInt(startdate_mm):parseInt(n)+(12-parseInt(startdate_mm))+parseInt(enddate_mm)):parseInt(enddate_mm)-parseInt(startdate_mm)}function daysBetween(e,t){Date.prototype.DaysBetween=function(){var e=864e5,t=arguments[0]-this,i=Math.floor(t/e);return i};var i=CrmDateUtils.splitDateVal(e);startdate_dd=i[0],startdate_mm=i[1],startdate_yyyy=i[2];var o=CrmDateUtils.splitDateVal(t);enddate_dd=o[0],enddate_mm=o[1],enddate_yyyy=o[2];var n=new Date(startdate_mm+"/"+startdate_dd+"/"+startdate_yyyy),r=new Date(enddate_mm+"/"+enddate_dd+"/"+enddate_yyyy);return n.DaysBetween(r)}function showMenu(e){var t=$("#menu"),i=$("#showMenu");if(i.hasClass("showing"))t.hide(),menuHide();else{var o=$("#menu_more"),n=o.offset().left;t.show(),i.addClass("showing"),$(".menuMore").addClass("dotsClr"),o.addClass("menuMoreOn"),$("#moreMenuLi li").show(),$("#menuNoResult").hide(),$("#srch").val("");var r=$("#menuTD").offset().left;Crm.userDetails.RTL_ENABLED?t.css({display:"block","z-index":"98",left:"-13px"}):$("#crmPlusAppsMenu").length>0?t.css({display:"block","z-index":"98",left:n-($(document).scrollLeft()+67+55)}):t.css({display:"block","z-index":"98",left:n-($(document).scrollLeft()+37+r)}),$("body").addClass("oH"),setTimeout((function(){$("#menu .addTabFdiv").css("max-height",renderingUtils.windowHeight-($("#wmstoolbar").outerHeight()+renderingUtils.tabLayerTop()+renderingUtils.tabLayerOuterHeight()+125));var e=$("#menu .addTabsul").height();$("#menu .addTabsulHt").height()<e?$("#menu .MenuSearch").show():$(".MenuSearch").hide(),t.find("#srch").focus()}),100),crmTab.li=t.find("#moreMenuLi li").addClass("eleVis"),$(".eleVis").mouseover((function(){t.find("#srch").blur(),$(".menuHighlight").removeClass("menuHighlight"),$(this).addClass("menuHighlight"),crmTab.liSelected=$(this)})),$("#menu").mouseleave((function(){$(".menuHighlight").removeClass("menuHighlight")})),$(".newModuleBtn").hover((function(){$(".menuHighlight").removeClass("menuHighlight")})),$(".MenuSearch").hover((function(){$(".menuHighlight").removeClass("menuHighlight")})),thirdPartyUtils.bindPerfectScroll("#menu .addTabFdiv",{wheelSpeed:1,preventOnEnd:!0,preventHorizontal:!1}),$("#conditionalFieldRightSection").length&&(Crm.userDetails.RTL_ENABLED?$("#conditionalFieldRightSection").css("left","-650px"):$("#conditionalFieldRightSection").css("right","-650px")),$("#validationRuleRightSection").hide(),$("#cv_body").length>0&&jSortable.hideOtherOptions()}sE(e)}function viewSrch(e){sE(e)}function menuHide(e){$("#menu li").removeClass("menuHighlight"),$("#showMenu").removeClass("showing"),$(".menuMore").removeClass("dotsClr")}function hideMenu(e,t){if(Lyte.Router.getRouteInstance()&&"crm.tab.module.entity.detail"===Lyte.Router.getRouteInstance().transition.target&&Lyte.Router.getRouteInstance().lyteConvertionSupported)Lyte.registeredMixins["crm-detailview-common-utils"]&&Lyte.registeredMixins["crm-detailview-common-utils"].handleBodyClickEvent(e);else{var i=$("#moreActionSbox");i.length>0&&i.is(":visible")&&i.slideUp(300),Crm.globalHideMenuCall||(Crm.globalHideMenuCall=!0),Crm.menu.globalHideMenu(e),menuHide();var o=Lyte.Router.getRouteInstance(),n=o&&o.transition?Lyte.Router.getRouteInstance().transition.target:"";Crm.isHeadless||!0!==Crm.userDetails.detailView_newUI||void 0===Crm.userDetails.detailView_newUI||-1!==["crm.tab.module.custom-view.kanban"].indexOf(n)||(""!=t&&null!=t||(t=!0),"undefined"!=typeof detailView&&detailView.hideDetailviewMenu&&detailView.hideDetailviewMenu(t));var r=$L(".listTableHover");r.length&&e&&e.originalEvent&&e.originalEvent.isTrusted&&!e.target.closest(".moreOptionSvg")&&r.removeClass("listTableHover")}}function setCenter(e){var t=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;e.style.top=t+200+"px"}function showDrillDownPtr(e){var t=!1,o=document.location.href,n=document.getElementsByTagName("SPAN");for(e=e?e.substr(e.lastIndexOf("#")+1):unescape(o.substr(o.lastIndexOf("#")+1,o.length)),getObj("returnAnchor")&&(e=getObj("returnAnchor").value),i=0;i<n.length;i++)if($(n[i]).attr("name")==e){t=!0,anchorObj=n[i],anchorLeft=renderingUtils.findPosX(n[i]),anchorTop=renderingUtils.findPosY(n[i]);break}if(1==t){$("#relNotesInRL").height()>0&&$("#relNotesInRL").height();var r=$("#dvinner");r.animate({scrollTop:anchorTop-r.offset().top-20},{duration:1e3,complete:function(){anchorLeft=$(anchorObj).offset().left,anchorTop=$(anchorObj).offset().top;var e=getObj("drillDownPtr");e&&($(e).show(),e.style.top=anchorTop-1+"px",e.style.left=anchorLeft-30+"px",setTimeout((function(){$(e).hide()}),5e3)),anchorObj=void 0}})}}var range=10;function getNoOfSelected(e,t,i){return i=i||"chk",t&&e?$(e).find("input[name='"+i+"']:checked").length:$("input[name='"+i+"']:checked").length}function cFn(e){$("show").empty(),document.getElementById("show").innerHTML=e,getObj("menuincreate")&&($("#menuContent").empty(),getObj("menuContent").innerHTML=getObj("menuincreate").innerHTML,$("#menuincreate").empty()),EvalInnerScript(document.getElementById("show")),init(undefined)}function replace(e,t,i){var o=e.length,n=t.length;if(0==o||0==n)return e;var r=e.indexOf(t);if(!r&&t!=e.substring(0,n))return e;if(-1==r)return e;var s=e.substring(0,r)+i;return r+n<o&&(s+=replace(e.substring(r+n,o),t,i)),s}function getMapParameter(e){var t;if(null==getObj(e))t="";else{var i=getObj(e);t=""!=$(i).text().trim()?$(i).text().trim():""}return t}function encode(e){e=escape(e);for(var t,i,o=0,n="";e.length>=o+3;)t=(255&e.charCodeAt(o++))<<16|(255&e.charCodeAt(o++))<<8|255&e.charCodeAt(o++),n+=base64s.charAt((16515072&t)>>18)+base64s.charAt((258048&t)>>12)+base64s.charAt((4032&t)>>6)+base64s.charAt(63&t);return e.length-o>0&&e.length-o<3&&(i=Boolean(e.length-o-1),t=(255&e.charCodeAt(o++))<<16|(i?(255&e.charCodeAt(o))<<8:0),n+=base64s.charAt((16515072&t)>>18)+base64s.charAt((258048&t)>>12)+(i?base64s.charAt((4032&t)>>6):"=")+"="),n}function decode(e){for(var t,i="",o=0;o<e.length;o+=4)t=(255&base64s.indexOf(e.charAt(o)))<<18|(255&base64s.indexOf(e.charAt(o+1)))<<12|(255&base64s.indexOf(e.charAt(o+2)))<<6|255&base64s.indexOf(e.charAt(o+3)),i+=String.fromCharCode((16711680&t)>>16,(65280&t)>>8,255&t);return 61==e.charCodeAt(o-2)?undecOut=i.substring(0,i.length-2):61==e.charCodeAt(o-1)?undecOut=i.substring(0,i.length-1):undecOut=i,unescape(undecOut)}function getNoOfChecked(){for(noofrows=document.TransferWizardForm.chk.length,noofselected=0,i=0;i<noofrows;i++)document.TransferWizardForm.chk[i].checked&&noofselected++;return noofselected}function refreshRecentItem1(){crmui.fromCloseOther||crmui.closeOtherWMSBars("recentItem"),crmNTCGlobal.closeGlobalNotifications(),Crm.menu.globalHideMenu();var e=$L("#rItemDataDiv");if($L(".remainder-notifi,#LDPOP").hide(),hideFeedBackPopup(),massActionNotification.hideMassOperationProgressDiv(),$L(".timericon,#wVisTitBar").removeClass("footIconActive timericonAct ldchatPop_active"),1==Crm.userDetails.CUSTOMIZE_INFO.UNPIN_RECENT_ITEM||null==Crm.userDetails.CUSTOMIZE_INFO.UNPIN_RECENT_ITEM){$L(".rItemIcon").addClass("footIconActive rItemIconAct");var t=e[0].querySelector("crm-recent-items");if(t&&t.component.getData("showModal"))t.component.setData("showModal",!1);else if(t&&t.component)t.component.setData("openModal",!0);else{commonUtils.showHideLoadingDiv(!1);var i=networkUtils.returnDependencyFiles(["crm-recentitems-resources.js"],ResourceConstants.CRMClient);i.push(networkUtils.returnDependencyFiles(["crm-recentitems-resources.css"],ResourceConstants.CRMClient)),Crm.userDetails.RTL_ENABLED&&i.push(networkUtils.returnDependencyFiles(["crm-recentitems-resources-rtl.css"],ResourceConstants.CRMClient)),Lyte.injectResources(i,void 0,(function(){Lyte.Component.render("crm-recent-items",{openModal:!0},"#rItemDataDiv")}))}}"object"==typeof CrmTracking&&CrmTracking.isSalesiqUser&&CrmTracking.popupState&&CrmTracking.minimizePop()}function deleteWarning(e,t){gblid=e,renderingUtils.freezeBackground(),3==$("input[name=masterrecord]").length?($("#WarningDiv1").addClass("ppTop"),crmui.showPopup("WarningDiv1")):($("#WarningDiv").addClass("ppTop"),void 0!==t&&t?$("#WarningDiv").find("#encMsg").css("display",""):$("#WarningDiv").find("#encMsg").css("display","none"),crmui.showPopup("WarningDiv"))}function closePopup(e){$("#"+e).css({width:"",display:"none",bottom:""}),$("#"+e).html(""),$("#FreezeLayer").remove()}function maxLengthCheck(e){if(document.getElementById(e)){if("property(Description)"===e){var t=I18n.getMsg("crm.description.maxlength.exceed"),i="";return!(document.getElementById(e).value.length>32e3)||(alert(t),getObj(e).focus(),!1)}t=I18n.getMsg("maxlenmsg"),i="";return!(document.getElementById(e).value.length>3e3)||(alert(t),getObj("operation")||(i=document.getElementById(e).value.substring(0,2999),document.getElementById(e).value=i),getObj(e).focus(),!1)}return!0}function mailsetCenter(e){var t=parseInt($L(window).scrollTop()),i=parseInt($(window).scrollLeft()),o=parseInt($(window).height()),n=parseInt($(window).width()),r=$("#"+e);if("lookupdiv"==e&&r.parent("crm-zsurvey-rl-body").length>0&&(r=$(".showhide").find("#lookupdiv")),$("#myPluginList").length||$("#profilesList").length)r.css({display:"block",position:"fixed",left:(n-r.width())/2-26,top:(o-r.height())/2-26});else if("social_interaction_container"===e)$("#"+e).css({display:"block",position:"fixed",left:"50%",top:"0","margin-left":-$("#"+e).width()/2+i});else if("bulkUpdateFldsList"===e||"bulkUpdate_display"===e||"qCreate"===e||"massActionWorkFlowPopUp"===e||"vtPopup"===e||"sendWebmaster"===e||"errorMsgVisits"===e||"zldEmbed"===e||"reorderPop"===e||"dependencyDelConfirmBox"===e)if(o>$("#"+e).height())$("#"+e).css({display:"block",position:"fixed",left:"50%",top:"50%","margin-left":-$("#"+e).width()/2,"margin-top":-$("#"+e).height()/2});else{var s=t+10;$("#"+e).css({display:"block",position:"fixed",left:"50%",top:s,"margin-left":-$("#"+e).width()/2,"margin-top":"0px"})}else if(o>r.height())r.css({display:"block",position:"absolute",left:i+n/2,top:t+o/2,"margin-left":-r.width()/2,"margin-top":-r.height()/2});else{s=t+10;r.css({display:"block",position:"absolute",left:i+n/2,top:s,"margin-left":-r.width()/2+i,"margin-top":"0px"})}crmui.modalZIndex("nonLyte",r[0],"open")}function setpostCenterPopupFormula(){var e=$("#FormulaFieldExpressionPopup"),t=$(window),i={};i.height=e.outerHeight(),i.width=e.outerWidth(),i.top=t.height()/2-i.height/2,i.left=t.width()/2-i.width/2,i.heightContainer=t.height()-(i.top+200),e.css({top:i.top,position:"fixed",left:i.left}),e.show()}function fieldValLengthCheck(e,t,i,o,n){null==o&&(o=I18n.getMsg(singularModule));var r=I18n.getMsg("crm.workflow.field.length.check",I18n.getMsg(e,o));return r+=" "+i,!(getObj(t).value.length>i)||(getObj(t).focus(),renderingUtils.displayAlert(t,void 0,r,getObj(t),n),!1)}function goToSetup(){document.location.href=networkUtils.getOrgSpecificURL(Crm.getCrmBasePath()+"/settings/index")}function just(e){ig=document.getElementById("outersideBar"),$("#"+e).fadeOut(2e3),$("#showhide").empty(),document.getElementById("showhide").innerHTML="<a href='javascript:closet(\"outersideBar\")' class='bluetxt'><div class='sliderBlock'></div></a>",cookieUtils.setCookie("ig","s")}function closet(e){ig=document.getElementById("outersideBar"),$("#"+e).show(),$("#showhide").empty(),document.getElementById("showhide").innerHTML="<a href='javascript:just(\"outersideBar\")' class='bluetxt'><div class='slidernone'></div></a>",cookieUtils.deleteCookie("ig")}function isValidAdditionalRecipientEmails(e,t,i){var o=splitValues();void 0===e&&(e=-1);var n=0;for(x=0;x<o.length;x++)for(var r=o[x].split(","),s=0;s<r.length;s++){if(""!=r[s]&&!validationUtils.isValidEmail(trimBoth(r[s])))return alert(I18n.getMsg("crm.email.comma")),getObj("otherEmails").focus(),!1;n++}return-1!=e&&n>e?(i?renderingUtils.showCustomAlert(t,"",!1):renderingUtils.displayErrorDiv("otherEmails","Email",t),getObj("otherEmails").focus(),!1):(getObj("otherEmails").value=getObj("otherEmails").value.replace(/\s/g,""),!0)}function splitValues(){var e=getObj("otherEmails");e.value=e.value.replace(/\n/g,",").replace(/,+/g,",").replace(/,$/,"");var t=e.value,i=new Array,o=0;if(-1!=t.indexOf("\n"))for(;-1!=t.indexOf("\n")&&t.replace(/^\s+/g,"").replace(/\s+$/g,"").length>0;)i[o]=t.substr(0,t.indexOf("\n")).replace(/^\s+/g,"").replace(/\s+$/g,""),t=t.substr(t.indexOf("\n")+1,t.length),o++;else t.replace(/^\s+/g,"").replace(/\s+$/g,"").length>0&&(i[0]=t.replace(/^\s+/g,"").replace(/\s+$/g,""));return i}function splitByPattern(e,t){var i=new RegExp(e).exec(t);return null!=i?i[1]:""}function isEmpty(e){var t=!0;return getObj(e)&&""!=trimBoth(getObj(e).value)?t=!1:getObj(e).value="",t}function escapeToHTML(e){return null!=e&&(e=(e=(e=(e=(e=e.replace(/&gt;/gi,">")).replace(/&lt;/gi,"<")).replace(/&amp;/gi,"&")).replace(/&quot;/gi,'"')).replace(/&#39;/gi,"'")),e}function selectORUnselect(e,t){if(getObj(e))if(getObj(e).length>1)for(var i=0;i<getObj(e).length;i++)getObj(e)[i].disabled||(getObj(e)[i].checked=t);else getObj(e).checked=t}function isDisabledAll(e){var t=!0;if(getObj(e))if(getObj(e).length>0){for(var i=0;i<getObj(e).length;i++)if(0==getObj(e)[i].disabled){t=!1;break}}else 0==getObj(e).disabled&&(t=!1);return t}function isCheckedAll(e){var t=!0;if(getObj(e))if(getObj(e).length>0){for(var i=0;i<getObj(e).length;i++)if(0==getObj(e)[i].checked){t=!1;break}}else 0==getObj(e).checked&&(t=!1);return t}function hideShowDiv(e){getObj(e)&&("block"==getObj(e).style.display?getObj(e).style.display="none":getObj(e).style.display="block")}function placeRes(e,t,i,o,n){if(-1!=e.indexOf("SHOW_NO_RECORDS_ALERT")||"SHOW_NO_RECORDS_ALERT"==trimBoth(e))alert(I18n.getMsg("crm.new.label.no.records")),$("#loadMoreRelCV").hide();else{i=i&&"string"!=typeof i&&i.requestUrl?i.requestUrl:i;var r=$(e).find("#detailCView").children(),s=networkUtils.parseUrl(i).params,a=!1;"true"===s.previous||"NavPrevious"===s.clickId?($("#detailCView").prepend(r),a=!0):$("#detailCView").append(r),($(e).find("#nextDisabledForRelCV").length||$(e).filter("#nextDisabledForRelCV").length)&&$("#loadMoreRelCV").hide(),($(e).find("#prevDisabledForRelCV").length||$(e).filter("#prevDisabledForRelCV").length)&&$("#loadPrevRelCV").hide();var l=$(e).filter("[data-needed='true']");$.merge(l,$(e).find("[data-needed='true']"));var c=0;$("[data-needed='true']").each((function(e,t){l[c]&&$(t).replaceWith(l[c++])}));var d=$("#cvFromIndex"),u=$("#cvToIndex"),m=$("input[name=fromIndex]"),p=$("input[name=toIndex]");if(d.length&&u.length){var g=$("[data-recordnum]"),f=g.eq(0).attr("data-recordnum"),h=g.eq(-1).attr("data-recordnum");d.val(f),m.val(f),u.val(h),p.val(h)}var v=parseInt($("#detailCView").children().length);if(v<10){$("#taskMenuBlkdiv").css("min-height","0").css("height","auto");d=parseInt(getObj("cvFromIndex").value),u=parseInt(getObj("cvToIndex").value);$("#from_To").text(d+" - "+(d+v-1))}if(s.loadNextEntity){var y=$("#detailCView").find("li.selectedRightActivity"),C=(n||parseInt($("#recordNum").val()))-1;if(0==y.length&&(y=$("#detailCView").find('div[data-recordnum="'+C+'"]').parent("li")),targetElem=a?y.prev("li").find('div[data-cid="detailView"]'):y.next("li").find('div[data-cid="detailView"]'),targetElem.length){m=o&&o.fromIndex?o.fromIndex:m.val(),p=o&&o.toIndex?o.toIndex:p.val();var b=targetElem.attr("id");b=b.indexOf("detailView_")>-1?b.split("detailView_")[1]:b.split("cvlist_")[1],"Activities"===s.module||void 0!==Lyte.Router.getRouteInstance().parent&&void 0!==Lyte.Router.getRouteInstance().parent.parent&&"Activities"===Lyte.Router.getRouteInstance().parent.parent.getDynamicParam()?Lyte.Router.transitionTo({route:"crm.tab.module.entity.detail",dynamicParams:["Activities",b],queryParams:{sub_module:s.module}}).data={fromDetailView:!0,navig:"true",recordNum:C+1,FROM_INDEX:m.val(),TO_INDEX:p.val(),cvid:s.cvid}:Lyte.Router.transitionTo({route:"crm.tab.module.entity.detail",dynamicParams:[s.module,b]}).data={fromDetailView:!0,navig:"true",recordNum:C+1,FROM_INDEX:m,TO_INDEX:p,cvid:s.cvid,stageId:s.stageId,fromActSubModuleListView:"true",fromDel:s.fromDel}}}}}function stopEvent(e){if(!e)e=window.event;e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}function doAjaxUpdate(e,t,i,o,n,r){var s=$("input[name=module]").val();s||(s=CustomRelatedListObj.getCurrentPageDetails("module")),s||"detail"!==Lyte.Router.getRouteInstance().routeName||(s=Lyte.Router.getRouteInstance().parent.parent.getDynamicParam());var a=$("#moduleCustomizationDiv"),l=null!=i?i:"";return void 0!==t&&t.startsWith(Crm.getCrmBasePath()+"/ChangeOwnership.do?&target=MassRecords")&&(isWFExecuted=!1),mR(t,(function(s){var l;try{JSON.parse(s),l=!0}catch(e){l=!1}if(l&&s.indexOf("CannotDelete")>-1){var c=JSON.parse(s).CannotDelete,d=I18n.getMsg(c[0]),u=I18n.getMsg(c[1]);if("crm.cannot.delete.products.listView"===c[0]&&"crm.cpq.cannotdelete.rules.list"===c[1]&&moduleRecordMapping&&moduleRecordMapping.Products){d=I18n.getMsg(c[0],moduleRecordMapping.Products.singular_label);var m=[moduleRecordMapping.Products.plural_label,moduleRecordMapping.Quotes.plural_label,moduleRecordMapping.SalesOrders.plural_label,moduleRecordMapping.PurchaseOrders.plural_label,moduleRecordMapping.Invoices.plural_label,moduleRecordMapping.Bundles.plural_label];u=moduleRecordMapping.Bundles?I18n.getMsg("crm.bundle.cannotdelete.entity.list",m):I18n.getMsg("crm.cpq.cannotdelete.rules.list",m)}var p='<div onclick="sE()" class="w500 p20"><div class="fL pL20 w430"><div class="crm-heading-font-size"><h2 style="color:#E20000";>'+d+'</h2></div><div class="mT10">'+u+'</div></div><br class="cBoth"><div  class="alignRight mT20"><input type="button" id="popupok" class="primarybtn" value="'+I18n.getMsg("crm.button.ok")+"\" onclick=\"hide('popupnew');renderingUtils.removeFreezeLayer();document.getElementById('popupnew').style.zIndex=30\"></div></div>";return renderingUtils.popUpWithFreeze(p),!1}if(l){var g=JSON.parse(s).orchestration_used;if(g)return void Crm.showOrchUsedBUlkDenyPopUp(g,!0)}if(void 0!==s&&-1!==s.indexOf("EmptyGroup")&&1==(s=JSON.parse(s)).EmptyGroup&&"ALERTERROR:::"===s.AlertMsg.substring(0,"ALERTERROR:::".length)){var f=s.AlertMsg.split(":::");return crmui.showMsgBand("error",f[1],3e3),!1}if(-1!=s.indexOf("accountStatus")&&-1!=s.indexOf("no_account")){const e=["no_account","internal_error"];if((s=JSON.parse(s)).hasOwnProperty("accountStatus")&&e.includes(s.accountStatus)){var h=$("#creatorFormDiv");return h.length>0&&h.remove(),"no_account"===s.accountStatus?crmui.showMsgBand("error",I18n.getMsg("crm.creator.no.account.error",Crm.brandName),"3000"):crmui.showMsgBand("error",I18n.getMsg("crm.label.widgets.error.internal"),3e3),null!=o&&"function"==typeof o&&o(),!1}}if(-1!==s.indexOf("REACHED_ROLE_HIERARCHY_MAX_LIMIT")){var v=s.split("###")[1];return crmui.showMsgBand("error",I18n.getMsg("crm.territory.role.hirearchy.alert",v),3e3),!1}if(-1!==s.indexOf("WEBCBADDED")){if(1==(s=JSON.parse(s)).WEBCBADDED)return CustomButtonJSObject.hideWebForm(),$("#createwebform").html(""),null!=s.MSG?CustomButtonJSObject.showWebTabs("save",s.WEBTABID,s.WEBTABNAME,s.WEBTABLINK,s.MSG):CustomButtonJSObject.showWebTabs("save",s.WEBTABID,s.WEBTABNAME,s.WEBTABLINK),void $("#CBERRDIV").html("");if(0==s.WEBCBADDED)return void crmui.showMsgBand("error",s.MSG,5e3)}if(-1===s.indexOf("WEB_TAB_ASSOCIATED_WITH_CUSTOM_BUTTON")||"failure"!==(s=JSON.parse(s)).status||"WEB_TAB_ASSOCIATED_WITH_CUSTOM_BUTTON"!==s.error_message)if("-1"!==t.indexOf("/SaveCreator.do?tabId=")&&-1!==t.indexOf("&action=delete")&&o(),-1===s.indexOf("APRuleNewId"))if(-1===s.indexOf("AP_Module_Limit_Exceeds"))if("customActionDiv"!==e&&"customizationDiv"!==e||void 0===t||!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=create")&&!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=save")||-1===s.indexOf("usedInFormRules"))if("customActionDiv"!==e&&"customizationDiv"!==e||void 0===t||!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=create")&&!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=save")||-1===s.indexOf("usedAsChild")&&-1===s.indexOf("ParentChildAlreadyAssociated")&&-1===s.indexOf("loopingcheck"))if("customActionDiv"!==e&&"customizationDiv"!==e||void 0===t||!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=create")&&!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=save")||-1===s.indexOf("isFieldremoved"))if("customActionDiv"!==e&&"customizationDiv"!==e||void 0===t||!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=update")||-1===s.indexOf("fieldDependencyEditNotAllowed")||CrmPageLayout.showMsgBand(a,"error",I18n.getMsg("crm.mb.edit.dependency.not.allowed.msg"),2e3),"customActionDiv"!==e&&"customizationDiv"!==e||void 0===t||!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=update")||-1!==s.indexOf("fieldDependencyEditNotAllowed")||CrmPageLayout.showMsgBand(a,"success",I18n.getMsg("crm.label.updated.successfully"),2e3),"customActionDiv"!==e&&"customizationDiv"!==e||void 0===t||!t.startsWith(Crm.getCrmBasePath()+"/FieldDependency.do?action=edit")||-1===s.indexOf("fieldDependencyEditNotAllowed")){if("massResult"===e&&void 0!==t&&t.startsWith(Crm.getCrmBasePath()+"/ChangeOwnership.do?&target=MassRecords")){var y=$(s).find("#tempWorkFlowScheduler").val();if(isWFSchedulerUser()&&"true"==y)return void commonUtils.showHideLoadingDiv(!0)}if("nameFormatDiv"===e&&void 0!==t&&t.startsWith(Crm.getCrmBasePath()+"/CustomizeName.do?step=updatePattern")&&(Crm.userDetails.NAME_FORMAT=$("#displayPattern")[0].value),s&&s.indexOf("crm.cannot.delete.product.detailview")>-1)return s=JSON.parse(s),void o(s);if(s&&s.indexOf("CRM_ERROR_PAGE_500::::EXCEPTION")>-1){var C=$("#show");C.length&&(C.eq(0).empty(),C[0].innerHTML=s,EvalInnerScript(C.get(0)),$L("#basic").scrollTo())}else{if(void 0!==s&&t.indexOf("SharingSetting")>-1&&s.indexOf("error")>-1&&l)return s=JSON.parse(s),void o(s);var b=s,w=!0;if("json"!=e){X=document.getElementById(e);if("cobdiv"==e&&(X=$(X).find(".zcrm-content")),X){var I=$L("crm-detail-view");if(-1!==t.indexOf("SubmitRelatedListSequence")){var E=objectUtils.parseURLParamString(i);if(void 0!==s&&Crm.renderDVLyteFlow(E.bcmodule)&&s.indexOf("success")>-1&&"success"===(s=JSON.parse(s)).status)return Lyte.triggerEvent("detail_view_listener_"+I[0].component.getData("unique_listener_id"),{componentsToBeReloaded:["all_components","business_card"]}),void hideAnimatePopup("topBandPopup")}if(!(t.indexOf("MergetoOneEntity")>-1))if(t.indexOf("closeTask")>-1){var k=networkUtils.parseUrl(t);if(k.params.module.indexOf("Home")>-1)return void CrmDashboard.replaceTaskDiv(JSON.parse(s),k.params.module.replace("Home_",""))}else if(n&&1==n){var x=X.innerHTML+s;$(X).empty(),X.innerHTML=x,EvalInnerScript(X)}else if(r){var T=JSON.parse(s);if(void 0!==T&&Crm.renderDVLyteFlow(T.module))return Lyte.triggerEvent("detail_view_listener_"+I[0].component.getData("unique_listener_id"),{componentsToBeReloaded:["related_list"]}),void hideAnimatePopup("topBandPopup");T.isCanvasAccessible=returnJson.relListLabelsJson.isCanvasAccessible,T.canvasCreate=returnJson.relListLabelsJson.canvasCreate,T.layoutId=returnJson.relListLabelsJson.layoutId,returnJson.relListLabelsJson=T,detailView.formNewLeftPanel();var P=getObj("entityId").value;N||(N=CustomRelatedListObj.getCurrentPageDetails("module"));var L=Crm.getCrmBasePath()+"/NewRelatedList.do?action=getAllData&module="+N+"&id="+P+"&updateLeftPanel=true";detailView.loadRelatedDetails(N,P),loadRelatedListNew(L,onCompleteFnRl,onSuccessFnRl,N,P);var S=document.querySelector("crm-zcampaign-create-progress-info");S&&S.setData({reLoad:!S.getData("reLoad")})}else if(t.indexOf("NewRelatedList.do")>-1)Crm.userDetails.isRelatedListLyteEnabled?Lyte.triggerEvent("relatedList",{res:s}):(crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,s,!0),"canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{res:s}));else{if(t===Crm.getCrmBasePath()+"/ZTIConfig.do"&&"object"==typeof s&&"providerList"===s.view||"string"==typeof s&&-1!==s.indexOf("providerList")){"string"==typeof s&&(s=JSON.parse(s));var M=$("#pbxType").val();if(s.isZticonfigured&&validationUtils.isNotEmpty(M)){var O=store.peekAll("provider_conf")[0];O.$.set("isEnabled",!0),O.$.set("providerName",M),O.$.set("phoneViewType","PBX");var A=Lyte.Router.getRouteInstance().parent,_=A.getURINameFromProviderName?A.getURINameFromProviderName(M):M,D=Lyte.Router.getRouteInstance().getQueryParams();D.from="creategroup",Lyte.Router.transitionTo({route:"crm.settings.section.telephony.configuration",dynamicParams:[_],queryParams:D})}else ctiApiConfig.renderProviderList(s,$(X),!0)}else if(-1!==t.indexOf(Crm.getCrmBasePath()+"/ZTIConfig.do")&&"string"==typeof s&&-1!==s.indexOf("providerEnabled")&&-1===s.indexOf("hasUserAddedDefault")){var R={};R.i18nErrorMsg=I18n.getMsg("crm.phonebridge.integration.error"),ctiApiNotifier.showErrorStatus(R,!1),ctiApiConfig.loadDetailViewPage(JSON.parse(s),!0)}else{if(-1!=t.indexOf("approvalProcess.do")){$(e).find(".select2-hidden-accessible").each((function(){$(this).hasClass("select2-hidden-accessible")&&$(this).select2("destroy")}));var F=Lyte.Router.getRouteInstance().transition.info;if("crm.settings.section.approval-process.index-approval-process"==F.route)Lyte.Router.getRouteInstance().refresh();else if("crm.settings.section.approval-process.view-approval-process"==F.route||"crm.settings.section.approval-process.create-approval-process"==F.route){var B=F.dynamicParams[0]||s;Lyte.Router.transitionTo({route:"crm.settings.section.approval-process.index-approval-process"}).data={highlight:B}}}else if(-1==t.indexOf("UpdateContactsRolesMapping.do")||"crm.tab.module.entity.edit-contact-role"!==Lyte.Router.getRouteInstance().transition.info.route&&"crm.tab.module.entity.add-contact-role"!==Lyte.Router.getRouteInstance().transition.info.route){if(-1!==t.indexOf("autoresprules.do")){let e=t.match(/seModule=([^&]+)/),i=e?e[1]:null;i&&Lyte.Router.getRouteInstance().getQueryParams().module!==i&&Lyte.Router.getRouteInstance().setQueryParams("module",i)}$(X).html(s)}else crmHistory.backOneLevel();if("undefined"!=typeof inReview&&inReview>0){Y=$L("#rpRecordInReview")[0];inReview>1?Y.ltProp("message",I18n.getMsg("crm.reviewprocess.records.entered.customview.msg",[inReview,moduleRecordMapping&&moduleRecordMapping[N]?moduleRecordMapping[N].plural_label:N])):Y.ltProp("message",I18n.getMsg("crm.reviewprocess.record.entered.customview.msg",moduleRecordMapping&&moduleRecordMapping[N]?moduleRecordMapping[N].plural_label:N)),Y.ltProp("show",!0),hideAnimatePopup("searchCreatePopup",!0)}}"cobdiv"!=e&&$(".copyErrorDiv").delay(4e3).slideUp()}if(document.getElementById("basic")&&"popupnew"!=e&&"lookupdiv"!=e&&"menuContent"!=e&&"Comlogo"!=e)0!=(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)&&$L("#basic").scrollTo({axis:"y",duration:1e3,offset:-50});if(-1!==t.indexOf("SharingSetting")){var U={},N=(E=objectUtils.parseURLParamString(i)).srmodule;U.status="progress",U.module=N;var z=$("#sharingRulesNew_"+U.module);if(U.id=z.attr("data-tabid"),null!=N){var H=I18n.getMsg(z.attr("data-zcqa").replace("security_dataSharing_newrule_",""));U.message=I18n.getMsg("crm.security.sharing.rules.in.progress",H)}-1!==t.indexOf("createRule")&&-1==s.indexOf("FEATURELIMIT_ERROR_403::::FEATURELIMITEXCEEDS")?(UserModule.showSharingRuleSuccessPopup("createRule"),dsNotificationScheduler.addOrUpdateSchedulerStatus(U,I18n.getMsg("crm.security.sharing.rules.popup.title"))):-1!==t.indexOf("updateRule")&&-1==X.innerText.indexOf("The Data sharing rule you are trying to access is not available.")&&(UserModule.showSharingRuleSuccessPopup("updateRule"),dsNotificationScheduler.addOrUpdateSchedulerStatus(U,I18n.getMsg("crm.security.sharing.rules.popup.title")))}if((document.viewentityform||document.createEntityForm||"undefined"!=typeof returnJson)&&"cuslnkquickact"!==e&&"popupnew"!==e&&"relatedPageContent"!==e&&"menuContent"!==e&&"tkvloadmorediv"!==e&&init(void 0,void 0,void 0,Lyte.Router.getRouteInstance().transition.lyteHeaderSupported),null!=o&&"function"==typeof o&&o(),"tkvloadmorediv"===e&&init(j,"kanbanview"),/AutoResponder/.test(t)){H=Lyte.Router.getRouteInstance().getQueryParams().module;/step=update/.test(t)||/step=save/.test(t)||/step=createFolder/.test(t)?crmHistory.backOneLevel():/step=del/.test(t)&&(N||H)&&Lyte.Router.getRouteInstance().replaceWith("crm.settings.section.autoresponders.index-autoresponder",{module:void 0===N?H:N})}}if($("#feedsLookupDiv").is(":visible")&&o(),/MergeAction/.test(t)){for(var j=i.split("&"),W=[],V=t.split("dupCheckField=")[1].split("&")[0],Z=t.split("module=")[1].split("&")[0],q=0;q<j.length;q++)W.push(j[q].split("chk=")[1]);var J={calleeObj:"Crm",clickId:"MergeEntities",module:Z,dupCheckField:V};for(q=0;q<W.length;q++)W[q]&&(J["entityId"+q]=W[q]);Crm.addToHistory(void 0,void 0,J)}else if(/MergetoOneEntity/.test(t)){j=i.split("&"),Z=t.split("module=")[1].split("&")[0];var G=null,K=0;for(V=t.split("dupCheckField=")[1].split("&")[0],q=0;q<j.length;q++)"masterrecord"===j[q].split("=")[0]&&(G=j[q].split("=")[1]),0==j[q].indexOf("ld")&&K++;return null===V||"null"===V?(noOfRecords-=K-1,noOfRecords>1?crmHistory.backOneLevel():Crm.addToHistory(void 0,void 0,{clickId:"detailView",module:Z,id:G,calleeObj:"Crm"})):DuplicateId?(duplicateRecordIds[DuplicateId]=duplicateRecordIds[DuplicateId]-(K-2),duplicateRecordIds[DuplicateId]>=2&&DuplicateId?crmHistory.backOneLevel():Crm.addToHistory(void 0,void 0,{clickId:"deduplicate",calleeObj:"Crm",module:Z,dupCheckField:V,mergeSuccess:!0})):Crm.addToHistory(void 0,void 0,{clickId:"deduplicate",calleeObj:"Crm",module:Z,dupCheckField:V,mergeSuccess:!0}),crmTab.deleteFromCache(Z),!1}thirdPartyUtils.bindSelect2($(".newSelect select,.useRnewSelect select"));var Q=$("#result");if((t===Crm.getCrmBasePath()+"/SharingSetting.do?action=updateAllDefPer"||t===Crm.getCrmBasePath()+"/SharingSetting.do?action=createRule"||t===Crm.getCrmBasePath()+"/SharingSetting.do?action=updateRule")&&Q.find("#defaultSharingPermTable").length>0)Lyte.Router.getRouteInstance().replaceWith("crm.settings.section.data-sharing.index-data-sharing").data={data:Q.html()};else if(t===Crm.getCrmBasePath()+"/ZohoOrgConfig.do?action=createOrg"){Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.allowed-ips.index-allowed-ips").data={data:Q.html()}}else if(t===Crm.getCrmBasePath()+"/FieldDependency.do?action=save"||t===Crm.getCrmBasePath()+"/FieldDependency.do?action=update"){Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.modules.module.map-dependency.index-map-dependency",Lyte.Router.getRouteInstance("crm.settings.section.modules.module").getDynamicParam(),{layoutId:$("input[name='layoutId']").val()}).data={data:Q.html()}}else if(t.indexOf(Crm.getCrmBasePath()+"/Group.do?action=deleteGroup")>-1){Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.groups.index-groups").data={data:Q.html()}}if("massResult"===e&&void 0!==t&&t.startsWith(Crm.getCrmBasePath()+"/ChangeOwnership.do?&target=MassRecords"))if(""!==document.TransferWizardForm.elements.relatedRecords.value)(U={}).message=I18n.getMsg("crm.changeOwner.relatedRecord.scheduler.popup.message.progress"),crmSchedulerNotification.addOrUpdateStatus(U,I18n.getMsg("crm.changeOwner.relatedRecord.scheduler.popup.title"))}else if(o(),validationUtils.isJson(s)&&(w=!1,void 0!==(b=JSON.parse(b)).result&&"success"==b.result&&(w=!1)),w){var X=document.getElementById("show");if($(X).html(b),"undefined"!=typeof inReview&&inReview>0){var Y=$L("#rpRecordInReview")[0];inReview>1?Y.ltProp("message",I18n.getMsg("crm.reviewprocess.records.entered.customview.msg",[inReview,moduleRecordMapping&&moduleRecordMapping[N]?moduleRecordMapping[N].plural_label:N])):Y.ltProp("message",I18n.getMsg("crm.reviewprocess.record.entered.customview.msg",moduleRecordMapping&&moduleRecordMapping[N]?moduleRecordMapping[N].plural_label:N)),Y.ltProp("show",!0),hideAnimatePopup("searchCreatePopup",!0)}}}}else{var ee=JSON.parse(s);showEditAlert(ee.uid,ee.parentFld,ee.childFld)}else"both"===(s=JSON.parse(s)).whichfield?showEditAlert("fromcreate","false","false"):"parent"===s.whichfield?showEditAlert("fromcreate","false","true"):showEditAlert("fromcreate","true","false");else{if((s=JSON.parse(s)).ParentChildAlreadyAssociated)te=I18n.getMsg("crm.exist.map.dependency.msg3");else if(s.loopingcheck)te=I18n.getMsg("crm.alert.dependency.loopcheck",["<b>"+$ESAPI.encoder().encodeForHTML(s.child)+"</b>","<b>"+$ESAPI.encoder().encodeForHTML(s.parent)+"</b>"]);else te=I18n.getMsg("crm.exist.map.dependency.msg4",["<b>"+$ESAPI.encoder().encodeForHTML(s.fieldLabel)+"</b>"]);CrmPageLayout.showMsgBand(a,"error",te,1e4)}else{var te="";if((s=JSON.parse(s)).isInternal)te=I18n.getMsg("crm.exist.map.dependency.msg5",["<b>"+$ESAPI.encoder().encodeForHTML(s.fieldLabel)+"</b>"]);else{var ie="<a href= '"+Crm.getCrmBasePath()+"/ShowSetup.do?tab=customize&subTab=modules&innerTab=formRules&module="+s.module+"&formRuleId="+s.formRuleId+"&layoutId="+s.layoutId+"' target='_blank'>"+s.formRuleName+"</a>";te=I18n.getMsg("crm.form.rule.map.dependency.msg1",[$ESAPI.encoder().encodeForHTML(s.fieldLabel),ie])}CrmPageLayout.showMsgBand(a,"error",te,1e4)}else{var te=I18n.getMsg("crm.approvalprocess.limit.exceeded.validation")+" <a href='"+commonUtils.getOldHelpUrl("help.feature.availability.custommodules.helplink")+"' target='_blank' onclick='sE(event)'>click here.</a>";_cruxUtils.showCustomAlert({params:{cxPropPrimaryMessage:I18n.getMsg("crm.rls.limit.exceeded"),cxPropSecondaryMessage:te,cxPropYield:!0}})}else{var oe=JSON.parse(s),ne=oe.RuleCount;if(void 0!==oe.APRuleOldId&&$("#ruleId_"+ne).val()==oe.APRuleOldId)$("#ruleId_"+ne).val(oe.APRuleNewId),$("#approverRuleId_"+ne).val(oe.APRuleNewId);else if(void 0===oe.APRuleOldId){var re='<input type="hidden" id="ruleId_'+ne+'" name="ruleId_'+ne+'" value="'+oe.APRuleNewId+'">';$("#dataPart_"+ne).append(re)}}else _cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropMessage:I18n.getMsg("crm.custombutton.webtab.associated")}})}),l,(function(e){e.responseText&&e.responseText.includes("CVCADENCES")&&o(JSON.parse(e.responseText)),555===e.status&&alert(e.responseText)})),!1}function doAjaxUpdateForm(e,t,i,o,n){var r=commonUtils.formData2QueryString(t);(null!=o&&1==o&&(r+="&"+csrfParamName+"="+encodeURIComponent(csrfToken)),"profilePerForm"==$(t).attr("name"))&&(r+=unCheckedPermissions());var s=getAttr(t,"action");if(s.indexOf("closeTask.do")>-1){var a=localStorage.getItem("isDontAskAgainChecked_"+Crm.userDetails.ZUID);"string"==typeof a&&(a="true"===a),a||(s+="&isNotifyOwnerChecked="+$("#notifyOwnerOption").prop("checked"))}else s.indexOf("MassDelete.do")>-1&&(r+="&isajax=true");if(s.indexOf("SharingSetting")>-1&&r.indexOf("criteriaScr")>-1){var l=t.srmodule.value,c=JSON.stringify($L("crux-criteria-editor")[0].getCriteria());["Tasks","Events","Calls"].includes(l)&&(c.includes("What_Id.Name")&&(c=c.replace("What_Id.Name","What_Id")),c.includes("Who_Id.Full_Name")&&(c=c.replace("Who_Id.Full_Name","Who_Id"))),r+="&criteria=+"+encodeURIComponent(c)}return doAjaxUpdate(e,s,r,i,void 0,n),!1}function unCheckedPermissions(){var e="";return $(document.profilePerForm).find("input[type=checkbox]").not(":checked").each((function(){e=e+$(this).attr("name")+"=off&",1})),e}function loadUrl(e,t,i,o,n,r){i?o&&(i+="&"+csrfParamName+"="+encodeURIComponent(csrfToken)):i=o?csrfParamName+"="+encodeURIComponent(csrfToken):"",null!=n&&"clone"==n&&(""==i?i="clone=true":i+="&clone=true"),resHolder=e,getObj("subTabBottomDiv")&&(resHolder="subTabBottomDiv"),"result"===e&&(resHolder=e),commonUtils.showHideLoadingDiv(!0),$.ajax({type:"POST",url:t,data:i,success:function(e){if(-1!=t.indexOf("approvalProcess.do")&&$(resHolder).find(".select2-hidden-accessible").each((function(){$(this).hasClass("select2-hidden-accessible")&&$(this).select2("destroy")})),"scheduler running"===e.error)return crmui.hidePopup("compute_Sharing_Rule",!0,(function(){crmui.showPopup("scheduler_Sharing_Rule")})),void commonUtils.showHideLoadingDiv();if("module unavailable"===e.error)return crmui.hidePopup("compute_Sharing_Rule",!0,(function(){crmui.showPopup("module_Sharing_Rule")})),void commonUtils.showHideLoadingDiv();if($("#"+resHolder).html(e),wfForm.chosen_show(),wfForm.initFormClick(),wfForm.inputfieldFocus(),$(".wf_form_focus").find("tr:eq(0) td:eq(1)").addClass("text"),$(".wf_form_focus").find("tr:eq(0) td:eq(1) input").focus(),$("#subTabBottomDiv").hasClass("setBgClr")&&($("#subTabBottomDiv").removeClass("setBgClr"),$("#setup_new_ContentDiv").removeClass("workflow_rule")),-1!==t.indexOf("recalculate")){renderingUtils.removeFreezeLayer(),UserModule.showSharingRuleSuccessPopup("recalculate");var i=objectUtils.parseURLParamString(t).tabid,o={status:"progress"};o.id=i,o.module=$("[id*='sharingRulesRecalculate_'][data-tabid='"+i+"']").attr("id").replace("sharingRulesRecalculate_","");var n=I18n.getMsg($("#sharingRulesNew_"+o.module).attr("data-zcqa").replace("security_dataSharing_newrule_",""));o.message=I18n.getMsg("crm.security.sharing.rules.in.progress",n),dsNotificationScheduler.addOrUpdateSchedulerStatus(o,I18n.getMsg("crm.security.sharing.rules.popup.title"))}commonUtils.showHideLoadingDiv(),r||getObj("basic")&&$L("#basic").scrollTo({axis:"y",duration:1e3,offset:-50}),thirdPartyUtils.bindSelect2($(".newSelect").find("select"))},error:function(e){if(t.includes("WorkFlowRule.do")){var i=$("#step").val();"object"!=typeof e.responseJSON||"Usage of V1 API is Deprecated"!=e.responseJSON.message||"createRule"!=i&&"updateRule"!=i?setTimeout((function(){400===e.status&&e.responseText.indexOf("ENCRYPTED_FIELDS_IN_CRITERIA")>-1?crmui.showMsgBand("error",I18n.getMsg("ear.error.message.criteria.comparator.not.allowed",e.responseText.split("###")[1]),4e3,$("#subTabBottomDiv")):e.status!==crmConstants.limitExceedsCode&&crmui.showMsgBand("error",I18n.getMsg("crm.workflow.save.error"),4e3,$("#subTabBottomDiv"))}),50):renderDenyTemp(e.responseJSON,"workflow","save")}commonUtils.showHideLoadingDiv()}})}function redirectTOCompanyInfo(){window.location=Crm.getCrmBasePath()+"/ShowSetup.do?tab=general&subTab=viewOrgDetails&src=addUser"}function matchStart(e,t){var i=t.element;t.text;if(null!=e.term){var o=$(i).data("email"),n=$(i).data("fullname");return null==o||null==e.term||null==n||0!=o.toUpperCase().indexOf(e.term.toUpperCase())&&0!=n.toUpperCase().indexOf(e.term.toUpperCase())?null:t}return t}function validateFieldLength(e,t){return e.length>t}function isFieldEmpty(e){return""==trimBoth(e)}function validateFields(e){var t=isFieldEmpty(e);return t||CustomRelatedListObj.checkSpecialChar(e)}function clearObjectCache(){for(var e in showCacheObj)delete showCacheObj[e]}function hideGetStart(){var e=Crm.getCrmBasePath()+"/Security.do?actionName=hideGetStart",t="&"+csrfParamName+"="+encodeURIComponent(csrfToken);mR(e,(function(e){$("#show").empty(),getObj("show").innerHTML=e,EvalInnerScript(document.getElementById("show"))}),t)}function getIdsAndNames(){var e,t=[],i=[];if(0==$("input[name=chk]").length)t=customViewObject.selectedIds;else{parseInt(getObj("cvid").value),getObj("module").value;$("input[name=chk]:checked").each((function(o){e=$(this).attr("value").split("&&||"),t.push(e[0]),i.push(e[1])}))}return{idList:t.join(";"),nameList:i.join("&&##")}}function trimFormElementsAndAssign(e){var t;if(getObj(e)){var o=getObj(e);for(i=0;i<o.elements.length;i++)"text"!=(t=o.elements[i]).type&&"password"!=t.type&&"select-one"!=t.type&&"textarea"!=t.type||(t.value=trimBoth(t.value))}}function validateImageSize(e,t){var i=10;return"Users"==t&&(i=5),!(e.size>1024*i*1024)||("Users"==t?(renderingUtils.showCustomAlert(I18n.getMsg("crm.photo.size.validation.error","5")),e.value=null):(renderingUtils.showCustomAlert(I18n.getMsg("crm.photo.size.validation.error","10")),e.value=null),!1)}function validateImageFileExtension(e,t){var i=[".png",".jpeg",".jpg",".gif"];return"Users"!=t&&(i=[".png",".jpeg",".jpg",".gif",".bmp"]),!stringEndsWithValidExtension(e,i)||("Users"==t?renderingUtils.showCustomAlert(I18n.getMsg("crm.user.photo.extension.validation.error")):renderingUtils.showCustomAlert(I18n.getMsg("crm.entity.photo.extension.validation.error")),!1)}function stringEndsWithValidExtension(e,t){if(0==e.length)return!1;for(var i=0;i<t.length;i++)if(e.toLowerCase().endsWith(t[i].toLowerCase()))return!1;return!0}function isValidEmail(e){return""==(e=trimBoth(e))||""==e.replace(validationUtils.emailRegex,"")}function hideEditionTrialPopup(){getObj("editionTrialDiv")&&"block"==getObj("editionTrialDiv").style.display&&(getObj("editionTrialDiv").style.display="none")}function PopSetCenter(e){mailsetCenter(e),window.document.documentElement.style.overflow="hidden"}function removeFreezeLayer2(){$(".temp_freezelayer.emailAI").length>0?removeTempFreezeLayer():renderingUtils.removeFreezeLayer(),window.document.documentElement.style.overflow=""}function checkSplChars(e,t,i,o=!0){var n,r=getElemById(e);if(r){"LYTE-INPUT"==r.tagName,n="LYTE-INPUT"===r.tagName?r.ltProp("value"):"CRUX-TEXT-COMPONENT"===r.tagName?r.component.getValue():r.value;var s="";if("roleName"==t){s=getClrTxtPtnResChars(n,/[^~`#,%^&*()+={}[\]|\;"<>\\]/g).join(" ")}else s=getClrTxtPtnResChars(n).join(", ");if(""!=s){if(o){t="groupName"==t?I18n.getMsg("crm.security.group.name"):"groupDesc"==t?I18n.getMsg("crm.security.group.desc"):"syncName"==t?I18n.getMsg("crm.gapps.contactsync.syncname"):"roleName"==t?I18n.getMsg("crm.security.role.name"):"roleDesc"==t?I18n.getMsg("crm.label.description"):"profileName"==t?I18n.getMsg("crm.security.profile.name"):"profileDesc"==t?I18n.getMsg("crm.security.profile.desc"):I18n.getMsg(t);var a=1==s.length?I18n.getMsg("crm.clearTextPattern.validationFail.alert",[t,s]):I18n.getMsg("crm.clearTextPattern.validationFail.alert.moreThanOneChar",[t,s]);"CRUX-TEXT-COMPONENT"===r.tagName&&"cruxInline"===i?r.setData({isError:!0,cxPropErrorMessage:a}):"inline"===i?"ruleName_inp"===e?renderingUtils.displayErrorDiv("ruleName",void 0,a):renderingUtils.displayErrorDiv(e,void 0,a):"inlineCenter"===i?commonUtils.showErrorMsg(a,$(r),void 0,!0):"crmAlert"===i?crmui.showMsgBand("warning",a,2e3):renderingUtils.showAlertMsg(a),r.focus()}return!1}}return!0}function enableAutoTag(e,t){$("ul#not_autotagged_acc li").each((function(e){1==t||"true"==t?$(this).removeClass("notenabled").addClass("enabled"):$(this).removeClass("enabled").addClass("notenabled")}))}function homePageDateEdit(e){var t=(e=$(e)).data("dateObj"),i=e.attr("id").replace("task_",""),o=Utils.getDateInUserDatePattern(t),n=getFormattedDate(o);e.val(n);var r={module:"Tasks",fieldLabel:"Due Date",moduleid:i,columnName:"DUEDATE",uitype:"24",fieldValue:o};r[csrfParamName]=csrfToken;var s="";(new crmRequestPool).doAjax1("/crm/v2/",(function(t){var i;"string"==typeof t?(i=t.split("AJAX::::"),s=i[2]):(s=(i=t).outputValue,s=o);var n=Utils.getDateObject(s,{}),r=new Date;r.setHours(0,0,0,0);var a=n.getTime()===r.getTime()?I18n.getMsg("Today"):getFormattedDate(s),l=e.parent();if(!e.hasClass("h_completetask")){var c=n.getTime()>=r.getTime()?n.getTime()===r.getTime()?"h_todaytask":"h_latertask":"h_overdue";e.removeClass("h_overdue h_todaytask h_latertask").addClass(c),e.parent().removeClass("h_overdue h_todaytask h_latertask").addClass(c);var d=n.getTime()<r.getTime()?Utils.getDayDiff(r,n):"";l.next("[name=daydiff]").html(d)}e.val(a).attr("data-old",a),l.attr("title",s)}),r,(function(t){return e.val(e.attr("data-old")),!1}))}function showConfirmBox(e,t){var i="stayonPageConfirmBox",o=$("#"+i);renderingUtils.dummyBackground(!1,i),mailsetCenter(i),o.find(".leavePage").off("click").click((function(){if(renderingUtils.removeDummyBackground(),o.hide(),$("#cvEditSave").hide(),detailView.currentModule&&window[detailView.currentModule]&&(window[detailView.currentModule].currentStatus=void 0),t)t.resume();else{var i=$(e).attr("id");$("#"+i).click()}})),o.find(".stayPage").off("click").click((function(){o.hide(),renderingUtils.removeDummyBackground(),t&&t.abort()})),o.focus()}function showQuicktourPop(){renderingUtils.freezeBackground(),mailsetCenter("siQuickTour"),$("#siQTVideo").attr("src",RebrandLinkUtil.getProperty("Salesinbox_Video_intro"))}function callBackFunctionToLoadStaticFiles(e,t){var i=document.getElementsByTagName("head")[0];if(!jQuery("#css_linkdocscomponents").length){var o=document.createElement("link");o.href=e,o.rel="stylesheet",o.type="text/css",o.id="css_linkdocscomponents",i.appendChild(o)}if(!jQuery("#js_linkdocscomponents").length){var n=document.createElement("script");n.src=t,n.type="text/javascript",n.id="js_linkdocscomponents",i.appendChild(n)}}function loadComponentsStaticFiles(e,t,i){var o=e+"/docs/docsrequest.do?method=loadComponentsStaticFiles",n="service="+t.toUpperCase()+"&_t="+(new Date).getTime();jQuery.ajax({url:o,type:"GET",dataType:"json",data:n,xhrFields:{withCredentials:!0},success:function(e){void 0===i?callBackFunctionToLoadStaticFiles(e.cssfilepath,e.jsfilepath):i(e)}})}function openTryEditionsPage(){$("#trialExpiryMsgTooltip").addClass("dN"),$("#sSetting").trigger("click"),crmLicense.editionTrialPopup(),Crm.trackSpotLightAction("Trial Remaining - Click Here")}function listConflicts(e,t,i,o,n){var r=Lyte.Router.getURL({route:"crm.tab.module.actions.deduplicate.list-conflicts",dynamicParams:[t],queryParams:{jobId:e,isFromLink:"true"}});null==n&&networkUtils.openUrl(r,"_blank"),$("#ztinotifier").hide()}function mergedoitLater(){$(".mergecomplete-step").hide(),$("#mailmsg").show(),setTimeout((function(){$("#pickListCont").hide(),$("#ztinotifier").hide()}),5e3)}function hideandShowNotifier(){$("#mergecomplete").slideToggle()}function removeRFMSegmentationCustomFields(e,t){try{var i=e[t].section;if(null!=i.length)for(var o=i.length,n=0;n<o;n++){var r=i[n].FL;if(null!=r.length)for(var s=r.length,a=0;a<s;a++){var l=!1;("13"==r[a].showtype&&"Recency"==r[a].sysRefName&&"true"==r[a].readonly||"13"==r[a].showtype&&"Frequency"==r[a].sysRefName&&"true"==r[a].readonly||"13"==r[a].showtype&&"Monetary"==r[a].sysRefName&&"true"==r[a].readonly||"13"==r[a].showtype&&"Segment_Label"==r[a].sysRefName&&"true"==r[a].readonly)&&(l=!0),l&&(r.splice(a,1),a--,s--)}}return e}catch(t){return e}}