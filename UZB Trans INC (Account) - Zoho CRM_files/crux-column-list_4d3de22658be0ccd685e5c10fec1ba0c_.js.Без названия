Lyte.Component.register("crux-column-list",{_template:'<template tag-name="crux-column-list"> <div class="cxColListWrapperDiv {{if(isAccordianEnabled,\'cxColumnListWithAccordion\',\'\')}}"> <lyte-menu-body> <template is="if" value="{{expHandlers(cxPropHideSearch,\'!\')}}"><template case="true"> <div class="columnListComp cxColListSearchWrap"> <template is="if" value="{{cxPropLazyRender}}"><template case="true"><lyte-input lt-prop-placeholder="{{cruxGetI18n(\'crm.globalsearch.search.title\')}}" on-value-change="{{method(\'searchColumns\')}}" class="columnListSearchIcon cxDB cxColumnListSearchInput" id="cruxColumnSearch" lt-prop-appearance="{{cxPropSearchAppearance}}" lt-prop-maxlength="{{cxPropMaxlength}}"> </lyte-input></template><template case="false"><lyte-search lt-prop-placeholder="{{cruxGetI18n(\'crm.globalsearch.search.title\')}}" data-zcqa="{{cxPropSearchZcqa}}" lt-prop-query-selector="{&quot;scope&quot; : &quot;.lyteBodyPosition.{{cxPropId}}&quot;, &quot;target&quot; : &quot;lyte-menu-item.lyteMenuItem.{{cxPropId}}&quot;, &quot;search&quot; : &quot;lyte-menu-item.lyteMenuItem.{{cxPropId}}&quot;}" on-search="{{method(\'searchColumnList\')}}" on-after-search="{{method(\'afterSearch\')}}" class="columnListSearchIcon cxDB" id="cruxColumnSearch" lt-prop-trim="{{cxPropTrimSearch}}" lt-prop-appearance="{{cxPropSearchAppearance}}" lt-prop-maxlength="{{cxPropMaxlength}}"></lyte-search></template></template> <span class="searchCloseCOpen cxColListSearchClearWrap {{if(showCloseIcon,\'cxdF\',\'cxdN\')}}" data-zcqa="lv_column_search_clear" onclick="{{action(\'clearSearch\')}}"> <span class="cxSearchClearIcon"></span> </span> </div> </template></template> <lyte-yield yield-name="listHeaderYield"></lyte-yield> <div style="max-height: {{cxPropMaxHeight}};" class="lyteBodyPosition cxColListContainer_{{cxPropId}} {{cxPropId}} {{if(ifEquals(pinnedFieldCount,1),\'cxColListSingleFieldPinned\',\'\')}} {{if(ifEquals(pinnedFieldCount,cxPropPinFieldLimit),\'cxColumnListMaxLimitReached\',\'\')}} cxToScrollTop"> <div class="divTopBorder {{if(cxPropSingleMandatoryCheck,\'cxColListOnlyOneMandatoryChecked\')}}"> <template is="for" items="{{cxPropPropertyFields}}" item="item" index="index"> <lyte-menu-item class="cxColPropField cxColListItem lyteMenuItem {{cxPropId}} {{item.cxPropClass}} restrict cxNotSortable cxPropDisableSort"> <lyte-checkbox lt-prop-tabindex="-1" data-value="{{item[cxPropUniqueNameSelector]}}" index="{{index}}" lt-prop-id="moduleProperty_{{item[cxPropUniqueNameSelector]}}" lt-prop-type="default" lt-prop-checked="{{lbind(item.selected)}}" lt-prop-label="{{item[cxPropDisplayLabel]}}" on-before-unchecked="{{method(\'beforeUnChecked\',item)}}" on-before-checked="{{method(\'beforeChecked\',item)}}" class="{{if(item.selected,\'cxColListCheckedElem\')}}"> </lyte-checkbox> </lyte-menu-item> </template> <template is="if" value="{{cxPropPropertyFields.length}}"><template case="true"><div class="cxColLineSeparator"></div></template></template> <template is="if" value="{{expHandlers(isAccordianEnabled,\'!\')}}"><template case="true"> <template is="for" items="{{items}}" item="item" index="index" unbound="{{cxPropDataBind}}"><template is="if" value="{{item[cxPropDisplayLabel]}}"><template case="true"> <lyte-menu-item class="cxColListItem lyteMenuItem {{cxPropId}} {{if(item[cxPropMandatory],\'cxColListMandatoryItem\')}} {{if(cruxAnd(disable,negate(item.selected)),\'restrictSortable\')}} {{if(cruxOr(cruxAnd(negate(item.selected),cxPropDisableSortForUnselectedFields),cxPropDisableSortable),\'cxPropDisableSort\')}} {{item.cxPropClass}} {{if(cruxOr(cruxAnd(cxPropPreventSortableOnMandatoryFields,item[cxPropMandatory]),cruxAnd(cxPropPreventSortableOnDisabledFields,item.cxPropDisabled)),\'restrict\')}} {{if(item.pinned,\'cxColListPinnedField\',\'cxColListUnPinnedField\')}}" data-zcqa="{{if(cxPropDragZcqaPrefix,concat(cxPropDragZcqaPrefix,item.column_name),\'\')}}"> <template is="if" value="{{cxPropFieldYield}}"><template case="true"> <lyte-checkbox lt-prop-tabindex="-1" data-value="{{item[cxPropUniqueNameSelector]}}" index="{{index}}" lt-prop-id="{{item.id}}_{{item[cxPropUniqueNameSelector]}}" lt-prop-type="default" lt-prop-checked="{{if(item.selected,true,false)}}" lt-prop-label="{{item[cxPropDisplayLabel]}}" on-checked="{{method(\'checkedCheckbox\',item,undefined,undefined)}}" on-unchecked="{{method(\'unCheckedCheckbox\',item,undefined,undefined)}}" lt-prop-label-class="{{if(item[cxPropMandatory],\'cxColumnMandatory\')}}" on-before-unchecked="{{method(\'beforeUnChecked\',item)}}" on-before-checked="{{method(\'beforeChecked\',item)}}" lt-prop-disabled="{{if(cruxOr(cruxAnd(disable,negate(item.selected)),item.cxPropDisabled),true,false)}}" class="{{if(item.selected,\'cxColListCheckedElem\')}}" lt-prop-yield="{{cxPropFieldYield}}" data-zcqa="{{if(cxPropZcqaPrefix,concat(cxPropZcqaPrefix,item.column_name),concat(item.id,\'_\',item[cxPropDisplayLabel]))}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="fieldYield" field-obj="{{item}}"></lyte-yield> </template> </lyte-checkbox> </template><template case="false"> <lyte-checkbox lt-prop-tabindex="-1" data-value="{{item[cxPropUniqueNameSelector]}}" index="{{index}}" lt-prop-id="{{item.id}}_{{item[cxPropUniqueNameSelector]}}" lt-prop-type="default" lt-prop-checked="{{if(item.selected,true,false)}}" lt-prop-label="{{item[cxPropDisplayLabel]}}" on-checked="{{method(\'checkedCheckbox\',item,undefined,undefined)}}" on-unchecked="{{method(\'unCheckedCheckbox\',item,undefined,undefined)}}" lt-prop-label-class="{{if(item[cxPropMandatory],\'cxColumnMandatory\')}}" on-before-unchecked="{{method(\'beforeUnChecked\',item)}}" on-before-checked="{{method(\'beforeChecked\',item)}}" lt-prop-disabled="{{if(cruxOr(cruxAnd(disable,negate(item.selected)),item.cxPropDisabled),true,false)}}" class="{{if(item.selected,\'cxColListCheckedElem\')}}" lt-prop-yield="{{cxPropFieldYield}}" data-zcqa="{{if(cxPropZcqaPrefix,concat(cxPropZcqaPrefix,item.column_name),concat(item.id,\'_\',item[cxPropDisplayLabel]))}}"></lyte-checkbox> </template></template> <span class="dragIcon dIB cxAlignRight cxVam fR svgIcons"></span> <template is="if" value="{{expHandlers(cxPropPinUnpinOption,\'&amp;&amp;\',item.selected)}}"><template case="true"> <span id="cxPinUnpinIcon" class="cP mlAuto {{if(item.pinned,\'cxColPinActiveIcon\',\'cxColPinIcon\')}}" lt-prop-tooltip-config="{&quot;showdelay&quot;:600}" onclick="{{action(\'doPinOrUnpin\',item,this)}}" onmouseenter="{{action(\'mouseEnterForPinIcon\',item,this)}}"></span> </template></template> </lyte-menu-item> </template><template case="false"> <div class="dN"></div> </template></template></template> <template is="if" value="{{if(ifEquals(cxPropFields.length,0),true,false)}}"><template case="true"><div class="cxColListNoResult {{cxPropNoContentClass}}">{{cxPropEmptyListMsg}}</div></template><template case="false"><template is="if" value="{{showNoResult}}"><template case="true"><div class="cxColListNoResult {{cxPropNoContentClass}}">{{cxPropSearchEmptyMessage}}</div></template></template></template></template> </template><template case="false"> <lyte-accordion lt-prop-exclusive="false" lt-prop-dynamic="true" on-before-open="{{method(&quot;beforeOpenAcc&quot;)}}" after-render="{{method(\'afterRenderAcc\')}}"> <template is="registerYield" yield-name="yield"> <template is="for" items="{{items}}" item="group" index="pos"> <lyte-accordion-item data-fetched="{{group.isDatafetched}}" class="{{group.class}}" selector-atr="{{group[cxPropUniqueNameSelector]}}" selector-pos="{{pos}}" id="cxColumListAccItem_{{pos}}"> <template is="if" value="{{expHandlers(group.suffix,\'==\',\'cxColumnListDefault\')}}"><template case="true"> <lyte-accordion-header style="padding:0px;"></lyte-accordion-header> </template><template case="false"> <lyte-accordion-header data-zcqa="{{group[cxPropUniqueNameSelector]}}" class="columnListAccHeader">{{group.header_label}}<lyte-icon class="lyteAccordionArrow"></lyte-icon></lyte-accordion-header> </template></template> <lyte-accordion-body class="columnListAccordianBody"> <template is="for" items="{{group.fields}}" item="item" index="index"><template is="if" value="{{item[cxPropDisplayLabel]}}"><template case="true"> <lyte-menu-item class="cxColListItem lyteMenuItem {{cxPropId}} {{if(item[cxPropMandatory],\'cxColListMandatoryItem\')}} {{if(cruxAnd(disable,negate(item.selected)),\'restrictSortable\')}} {{if(cruxOr(cruxAnd(negate(item.selected),cxPropDisableSortForUnselectedFields),cxPropDisableSortable),\'cxPropDisableSort\')}} {{item.cxPropClass}} {{if(cruxOr(cruxAnd(cxPropPreventSortableOnMandatoryFields,item[cxPropMandatory]),cruxAnd(cxPropPreventSortableOnDisabledFields,item.cxPropDisabled)),\'restrict\')}} {{if(item.pined,\'pinedField\',\'unPinedField\')}} " grpr-pos="{{pos}}" data-zcqa="{{item[cxPropUniqueNameSelector]}}"> <template is="if" value="{{cxPropFieldYield}}"><template case="true"> <lyte-checkbox lt-prop-tabindex="-1" data-value="{{item[cxPropUniqueNameSelector]}}" index="{{index}}" lt-prop-id="{{item.id}}_{{item[cxPropDisplayLabel]}}" lt-prop-type="default" lt-prop-checked="{{if(item.selected,true,false)}}" lt-prop-label="{{if(item.cx_display_label,item.cx_display_label,item[cxPropDisplayLabel])}}" on-checked="{{method(\'checkedCheckbox\',item,pos,index)}}" on-unchecked="{{method(\'unCheckedCheckbox\',item,pos,index)}}" lt-prop-label-class="{{if(item[cxPropMandatory],\'cxColumnMandatory\')}}" on-before-unchecked="{{method(\'beforeUnChecked\',item)}}" on-before-checked="{{method(\'beforeChecked\',item)}}" lt-prop-disabled="{{if(cruxOr(cruxAnd(disable,negate(item.selected)),item.cxPropDisabled),true,false)}}" class="{{if(item.selected,\'cxColListCheckedElem\')}}" lt-prop-yield="{{cxPropFieldYield}}" data-zcqa="{{item.id}}_{{item[cxPropDisplayLabel]}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="fieldYield" field-obj="{{item}}"></lyte-yield> </template> </lyte-checkbox> </template><template case="false"> <lyte-checkbox lt-prop-tabindex="-1" data-value="{{item[cxPropUniqueNameSelector]}}" index="{{index}}" lt-prop-id="{{item.id}}_{{item[cxPropDisplayLabel]}}" lt-prop-type="default" lt-prop-checked="{{if(item.selected,true,false)}}" lt-prop-label="{{if(item.cx_display_label,item.cx_display_label,item[cxPropDisplayLabel])}}" on-checked="{{method(\'checkedCheckbox\',item,pos,index)}}" on-unchecked="{{method(\'unCheckedCheckbox\',item,pos,index)}}" lt-prop-label-class="{{if(item[cxPropMandatory],\'cxColumnMandatory\')}}" on-before-unchecked="{{method(\'beforeUnChecked\',item)}}" on-before-checked="{{method(\'beforeChecked\',item)}}" lt-prop-disabled="{{if(cruxOr(cruxAnd(disable,negate(item.selected)),item.cxPropDisabled),true,false)}}" class="{{if(item.selected,\'cxColListCheckedElem\')}}" lt-prop-yield="{{cxPropFieldYield}}" data-zcqa="{{item.id}}_{{item[cxPropDisplayLabel]}}"></lyte-checkbox> </template></template> <span class="dragIcon dIB cxAlignRight cxVam fR svgIcons"></span> <template is="if" value="{{expHandlers(cxPropPinUnpinOption,\'&amp;&amp;\',item.selected)}}"><template case="true"> <span id="cxPinUnpinIcon" onmouseover="{{action(\'mouseOverPinUnpinIcon\',item,this)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;Right&quot;}" class="cP {{if(item.pined,\'cxColPinActiveIcon\',\'cxColPinIcon\')}}" onclick="{{action(\'doPinOrUnpin\',item,this,pos,index)}}"></span> </template></template> </lyte-menu-item> </template><template case="false"> <div class="dN"></div> </template></template></template> <div class="cxColListNonActionItems"> <template is="if" value="{{group.isAllSelected}}"><template case="true"> <div class="cxColListAllFieldsSelected">{{cxPropAllSelectedMessage}}</div> </template><template case="false"><template is="if" value="{{expHandlers(group.isDatafetched,\'!\')}}"><template case="true"> <span class="cxColListLoader"></span> </template></template></template></template> </div> </lyte-accordion-body> </lyte-accordion-item> </template> <template is="if" value="{{showNoResult}}"><template case="true"> <div class="cxColListNoResult">{{cxPropSearchEmptyMessage}}</div> </template></template> </template> </lyte-accordion> </template></template> </div> </div> </lyte-menu-body> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"attr",position:[1,3]}]}},default:{}},{type:"insertYield",position:[1,1,3]},{type:"attr",position:[1,1,5],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'max-height: '","cxPropMaxHeight","';'"]}}}},{type:"attr",position:[1,1,5,1]},{type:"attr",position:[1,1,5,1,1]},{type:"for",position:[1,1,5,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[1,1,5,1,3]},{type:"if",position:[1,1,5,1,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,1,5,1,5]},{type:"if",position:[1,1,5,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1,2]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},{type:"attr",position:[1,3,3,1]},{type:"if",position:[1,3,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1]}],_observedAttributes:["cxPropFields","cxPropSelectedFields","showNoResult","cxPropDisplayLabel","cxPropMandatory","cxPropId","cxPropMaxSelectColumn","disable","disablePinOption","cxPropDisableSortForUnselectedFields","cxPropDataBind","items","cxPropSingleMandatoryCheck","cxPropFieldYield","cxPropDisableSortable","cxPropHideSearch","cxPropPreventSortableOnMandatoryFields","cxPropSearchAppearance","cxPropUniqueNameSelector","cxPropMaxAccordianColumns","cxPropZcqaPrefix","cxPropDragZcqaPrefix","cxPropPreventReordering","cxPropPinUnpinOption","cxPropPinFieldLimit","cxPropPinFieldLimitMessage","cxPropPropertyFields","pinnedFieldCount","isAccordianEnabled","cxPropSortOrder","cxPropFixedColumns","cxPropMinSelectColumn","cxPropTrimSearch","cxPropFiltering","cxPropSearchEmptyMessage","cxPropAllSelectedMessage","cxPropGroupLimitReachedInfo","cxPropEmptyListMsg","cxPropMaxlength","cxPropMaxHeight","showCloseIcon","cxPropAccessibilityClass","cxPropPreventSortableOnDisabledFields","cxPropSearchZcqa","cxPropNoContentClass","cxPropAria"],init:function(){var e=_lyteUiUtils.isAndroid.constructor==Boolean?_lyteUiUtils.isAndroid:_lyteUiUtils.isAndroid(),t=_lyteUiUtils.isIos.constructor==Boolean?_lyteUiUtils.isIos:_lyteUiUtils.isIos();this._isMobile=e||t,this.$node.toggleField=function(e){this.querySelector("[data-value='"+e+"']").click()}},data:function(){return{cxPropFields:Lyte.attr("array",{default:[]}),cxPropSelectedFields:Lyte.attr("array",{default:[]}),showNoResult:Lyte.attr("boolean",{default:!1}),cxPropDisplayLabel:Lyte.attr("string",{default:"field_label"}),cxPropMandatory:Lyte.attr("string",{default:"mandatory"}),cxPropId:Lyte.attr("string"),cxPropMaxSelectColumn:Lyte.attr("number"),disable:Lyte.attr("boolean",{default:!1}),disablePinOption:Lyte.attr("boolean",{default:!1}),cxPropDisableSortForUnselectedFields:Lyte.attr("boolean",{default:!1}),cxPropDataBind:Lyte.attr("string",{default:"false"}),items:Lyte.attr("array"),cxPropSingleMandatoryCheck:Lyte.attr("boolean",{default:!0}),cxPropFieldYield:Lyte.attr("boolean",{default:!1}),cxPropDisableSortable:Lyte.attr("boolean",{default:!1}),cxPropHideSearch:Lyte.attr("boolean",{default:!1}),cxPropPreventSortableOnMandatoryFields:Lyte.attr("boolean",{default:!1}),cxPropSearchAppearance:Lyte.attr("string",{default:"box"}),cxPropUniqueNameSelector:Lyte.attr("string",{default:"api_name"}),cxPropMaxAccordianColumns:Lyte.attr("number",{default:5}),cxPropZcqaPrefix:Lyte.attr("string"),cxPropDragZcqaPrefix:Lyte.attr("string"),cxPropPreventReordering:Lyte.attr("boolean",{default:!1}),cxPropPinUnpinOption:Lyte.attr("boolean",{default:!1}),cxPropPinFieldLimit:Lyte.attr("number",{default:2}),cxPropPinFieldLimitMessage:Lyte.attr("string",{default:""}),cxPropPropertyFields:Lyte.attr("array",{default:[]}),pinnedFieldCount:Lyte.attr("number",{default:0}),isAccordianEnabled:Lyte.attr("boolean",{default:!1}),cxPropSortOrder:Lyte.attr("string",{default:""}),cxPropFixedColumns:Lyte.attr("number"),cxPropMinSelectColumn:Lyte.attr("number",{default:0}),cxPropTrimSearch:Lyte.attr("boolean",{default:!0}),cxPropFiltering:Lyte.attr("boolean",{default:!0}),cxPropSearchEmptyMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.no.results.match")}),cxPropAllSelectedMessage:Lyte.attr("string"),cxPropGroupLimitReachedInfo:Lyte.attr("string"),cxPropEmptyListMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.no.data.found")}),cxPropMaxlength:Lyte.attr("number",{default:25}),cxPropMaxHeight:Lyte.attr("string"),showCloseIcon:Lyte.attr("boolean",{default:!1}),cxPropAccessibilityClass:Lyte.attr("string",{default:"cxAriaActive"}),cxPropPreventSortableOnDisabledFields:Lyte.attr("boolean",{default:!1}),cxPropSearchZcqa:Lyte.attr("string"),cxPropNoContentClass:Lyte.attr("string",{default:"noResultAriaComp"}),cxPropAria:Lyte.attr("boolean",{default:!1})}},selectedCount:function(e){for(var t=this.data.isAccordianEnabled?this.data.items[0].fields:this.data.items,i=0,o=0;o<t.length;o++)t[o]&&t[o][e]&&i++;return i},actions:{clearSearch:function(){var e=this.$node.querySelector("#cruxColumnSearch");e.setValue(""),this.setData("showCloseIcon",!1),e.focus()},doPinOrUnpin:function(e,t,i,o){var a=!e.pinned,r=this.selectedCount("pinned");a?(this.data.cxPropPinFieldLimit>r&&(this.checkUncheck("check",e,t,"pinned",i,o),this.setData("pinnedFieldCount",r+1)),r+1==this.data.cxPropPinFieldLimit&&this.setData("disablePinOption",!0)):(this.checkUncheck("uncheck",e,t,"pinned",i,o),this.setData("disablePinOption",!1),this.setData("pinnedFieldCount",r-1))},mouseEnterForPinIcon:function(e,t){var i=t;e.pinned?i.setAttribute("lt-prop-title",_cruxUtils.getI18n("crm.customview.unpin.column")):this.data.pinnedFieldCount>=this.data.cxPropPinFieldLimit?i.setAttribute("lt-prop-title",this.data.cxPropPinFieldLimitMessage):i.setAttribute("lt-prop-title",_cruxUtils.getI18n("crm.customview.pin.column"))}},methods:{afterRenderAcc:function(){$L("#cxColumListAccItem_0",this.$node)[0].classList.add("lyteAccordionActive"),this.accItems=$L("lyte-accordion-item",this.$node)},checkedCheckbox:function(e,t,i,o){this.data.cxPropPreventReordering?(e.selected=!0,this.afterSelectionUnselection("onCheckBoxChecked",void 0,o)):this.checkUncheck("check",e,o,"selected",t,i)},unCheckedCheckbox:function(e,t,i,o){this.data.cxPropPreventReordering?(e.selected=!1,this.afterSelectionUnselection("onCheckBoxUnChecked",void 0,o)):this.checkUncheck("uncheck",e,o,"selected",t,i)},beforeUnChecked:function(e,t){if(this._prevent)return delete this._prevent,!1;var i=this.data.cxPropMinSelectColumn;return!(i&&this.selectedCount("selected")-1<i)&&(!this.getMethods("onBeforeUnchecked")||this.executeMethod("onBeforeUnchecked",e,t.closest("lyte-menu-item")))},beforeChecked:function(e,t){if(this._prevent)return delete this._prevent,!1;var i=e[this.data.cxPropUniqueNameSelector].split("."),o=!(i.length>1)||Object.keys(this.accordianAsChecked).includes(i[0]);return this.data.isAccordianEnabled&&!o&&Object.keys(this.accordianAsChecked).length>=this.data.cxPropMaxAccordianColumns?(_cruxUtils.showCustomAlert({params:{ltPropWrapperClass:"",ltPropCloseOnEscape:!1,ltPropContentAlign:"center",ltPropButtonPosition:"center",ltPropSecondaryMessage:this.data.cxPropGroupLimitReachedInfo,ltPropButtons:[{type:"accept",text:I18n.getMsg("crm.button.ok.got.it"),appearance:"primary"}],ltPropButtonPosition:"center"}}),!1):!this.getMethods("onBeforeChecked")||this.executeMethod("onBeforeChecked",e,t.closest("lyte-menu-item"))},beforeOpenAcc:function(e,t){var i=t.getAttribute("selector-pos"),o=this.data.items,a=this,r=this.data.cxPropUniqueNameSelector;if(!o[i].isDatafetched&&!this.isFetchingTriggered[o[i][r]]){var c=a.selectedAccFields[o[i][r]],n=this.accordianFields.find((function(e){return e[r]===o[i][r]})),s=$L("#cruxColumnSearch",this.$node)[0],l=s?s.getData("ltPropValue"):"",d={};n.fields&&n.fields.length?d.fields=n.fields:this.getMethods("fetchAccordianFields")&&(d.fields=this.executeMethod("fetchAccordianFields",n)),this.isFetchingTriggered[o[i][r]]=!0,Lyte.resolvePromises(d).then((function(e){var t=Lyte.deepCopyObject(e.fields);t.map((function(e){e[r]=n[r]+"."+e[r]}));for(var d=c.length,p=0;p<d;p++){var m=t.findIndex((function(e){return e[r]===c[p][r]}));t.splice(m,1),p-=1,d-=1}if(a.data.cxPropFiltering)for(var u=t.length,h=0;h<u;h++)(a.preventUIType.indexOf(t[h].ui_type)>-1||a.preventColumnName.indexOf(t[h].column_name)>-1)&&(t.splice(h,1),h-=1,u-=1);Lyte.objectUtils(o[i],"add","isDatafetched",!0),Lyte.objectUtils(o[i],"add","fields",a.getSortedArray(t)),t.length||Lyte.objectUtils(o[i],"add","isAllSelected",!0),l.length&&s.setValue(l)}))}return!0},afterSearch:function(e){if(this.data.isAccordianEnabled){for(var t=[],i=0;i<e.length;i++){var o=parseInt(e[i].getAttribute("grpr-pos"));-1===t.indexOf(o)&&t.push(parseInt(o))}var a=this.data.items,r=(o=this.searchVal,this);a.forEach((function(e,i){-1===t.indexOf(i)&&o.length?r.accItems[i].classList.add("dN"):(-1===t.indexOf(i)&&e.isDatafetched&&Lyte.objectUtils(a[i],"add","isAllSelected",!0),r.accItems[i].classList.remove("dN"))})),this.setData("showNoResult",0==e.length)}else this.setData("showNoResult",0==e.length)},searchColumnList:function(e,t,i,o){var a=$L(".cxColLineSeparator");a.addClass("cxHide");var r=0,c=0;e.forEach((function(e){e.classList.contains("cxColPropField")?r++:c++})),r&&c&&a.removeClass("cxHide"),this.searchVal=o;$L(".searchCloseCOpen");if(this.setData("showCloseIcon",!!o.length),0!=this.resetScroll&&(this.$node.querySelector(".cxToScrollTop").scrollTop=0,delete this.resetScroll),this.getMethods("onSearch"))return this.executeMethod("onSearch",e)}},didConnect:function(){this.sortableMenu(),this._searchInput=this.$node.getElementsByTagName("lyte-search")[0],this.getMethods("onRender")&&this.executeMethod("onRender",this.$node),this.$node.setSearchValue=function(e){this.component._searchInput.setValue(e)}},didDestroy:function(){delete this.accItems},getItem:function(e){var t={};return Object.keys(e).forEach((function(i){t[i]={},t[i]=e[i]})),t},getHiddenCount:function(e,t,i){for(var o=Math.min(t,i),a=Math.max(t,i),r=0,c=o;c<a;++c)e[c].classList.contains("lyteSearchHidden")&&r++;return r},setItemArray:function(e){for(var t=this.getFilteredFields(),i=e?[]:this.getData("cxPropSelectedFields").slice(0),o=(this.preventUIType,this.data.cxPropFiltering),a=(this.preventColumnName,this),r={},c=i.map((function(e){return r[e[a.data.cxPropUniqueNameSelector]]=e,e[a.data.cxPropUniqueNameSelector]})),n=t.map((function(e){return e[a.data.cxPropUniqueNameSelector]})),s=[],l=i.filter((function(e){if((e._pin||e._pin_order)&&-1!=n.indexOf(e[a.data.cxPropUniqueNameSelector]))return e})).length,d=0,p=0;p<c.length;p++){if((y=n.indexOf(c[p]))>-1)if(r[c[p]]._pin||r[c[p]]._pin_order){let e=r[c[p]]._pin_order?r[c[p]]._pin_order:++d;r[c[p]].cxFrom=p,s[e-1]=c[p]}else s[l++]=c[p]}var m=[],u=0;for(p=0;p<t.length;++p){(a=t[p])[this.getData("cxPropMandatory")]&&++u>1&&this.setData("cxPropSingleMandatoryCheck",!1);var h=this.getItem(a),x=r[h[this.data.cxPropUniqueNameSelector]];x&&(x._pin||x._pin_order)&&(h.pinned=!0,h.cxFrom=x.cxFrom);var y=s.indexOf(h[this.data.cxPropUniqueNameSelector]);o&&(this.preventUIType.indexOf(h.ui_type)>-1||this.preventColumnName.indexOf(h.column_name)>-1)||(y>-1?(h.selected=!0,this.data.cxPropPreventReordering?m[l++]=h:m[y]=h):m[l++]=h)}if(this.data.cxPropSortOrder){var f=m.slice(0,s.length),P=this.getSortedArray(m.slice(s.length,m.length));m=f.concat(P)}this.data.isAccordianEnabled?(this.itemsArray[0].fields=m,this.setData("items",this.itemsArray)):this.setData({items:m}),this.setData("pinnedFieldCount",this.selectedCount("pinned"))},sortableMenu:function(){if(this.data.cxPropDisableSortable||this._isMobile||!this.$node.querySelector(".cxToScrollTop"))return!1;if(this.data.isAccordianEnabled)var e=this.$node.querySelector(".columnListAccordianBody");else e=this.$node.querySelector(".divTopBorder");var t=this;$L(e).sortable({containment:"parent",cancel:"input",onSelect:function(e,i,o,a){var r=a.target;return("SPAN"!=r.tagName||!r.classList.contains("lyteCheckBoxDefault"))&&(!(t.data.cxPropFixedColumns&&i<t.data.cxPropFixedColumns)&&(1!=t.selectedCount("pinned")||!e.classList.contains("cxColListPinnedField")))},onDrag:function(){this._prevent=!0}.bind(this),onDragStart:function(e,i){var o=e.classList.contains("cxColListPinnedField")?"cxColListUnPinnedField":"cxColListPinnedField",a=e.classList.contains("cxColListPinnedField")?"cxColListPinnedColumnSorting":"cxColListUnPinnedColumnSorting";t.$node.querySelector(".divTopBorder").classList.add(a);var r=i.querySelectorAll("lyte-checkbox input:checked");t.rem_from_sort=[],r.forEach((function(e){var a=e.closest("lyte-menu-item");a.classList.contains(o)&&(t.rem_from_sort.push(a),a.classList.add("restrict"),i.removeFromSortable(a))}))},onBeforeDrop:function(e,i,o,a,r,c,n){var s=t.data.cxPropPropertyFields.length?t.data.cxPropPropertyFields.length+1:0;a-=s,r-=s;var l=t.getData("items");return delete t._prevent,!(t.data.cxPropFixedColumns&&r<t.data.cxPropFixedColumns)&&(t.getMethods("onBeforeDropItem")?t.executeMethod("onBeforeDropItem",e,l[a],l[r]):void 0)},onDrop:function(e,i,o,a,r,c){var n=t.data.cxPropPropertyFields.length?t.data.cxPropPropertyFields.length+1:0;a-=n,r-=n;var s=t.data.isAccordianEnabled?t.data.items[0].fields:t.data.items,l=Lyte.arrayUtils(s,"removeAt",a,1)[0];if(Lyte.arrayUtils(s,"insertAt",r,l),t.sortableMenu(),t.$node.querySelector(".divTopBorder").classList.remove("cxColListPinnedColumnSorting","cxColListUnPinnedColumnSorting"),t.rem_from_sort.length&&t.rem_from_sort.forEach((function(e){e.classList.remove("restrict"),c.addToSortable(e)})),t.getMethods("onDropItem"))return t.executeMethod("onDropItem",e,l)},restrict:this.getData("cxPropDisableSortForUnselectedFields")?".restrict,.cxPropDisableSort,lyte-checkbox label>span,.cxColLineSeparator":".restrict,lyte-checkbox label>span,.cxColLineSeparator"})},getSelectedPropertyFields:function(){for(var e=this.getData("cxPropPropertyFields"),t=[],i=0;i<e.length;i++)e[i]&&e[i].selected&&t.push(e[i]);return t},getSelectedFields:function(e){var t,i=this.data.isAccordianEnabled?this.data.items[0].fields:this.data.items,o={},a=i.length;for(t=0;t<a;t++)i[t]&&i[t].selected&&(o[i[t][this.data.cxPropUniqueNameSelector]]=i[t]);var r,c=this.$node.querySelectorAll("lyte-menu-item.lyteMenuItem:not(.cxNotSortable) lyte-checkbox input:checked"),n=[],s={},l=1,d=c.length;for(t=0;t<d;t++){var p=c[t].closest("lyte-checkbox").getAttribute("data-value");if(r=e?store.peekRecord(e,c[t].getAttribute("id").split("_")[0]):o[p]?o[p]:i.filter(function(e){return e[this.data.cxPropUniqueNameSelector]==p}.bind(this))[0],o[p]&&o[p].pinned){var m=o[p].cxFrom;r._pin_order=l++,s[m]=r}else n.push(r)}for(const e in s)n.splice(e,0,s[e]);return n},clearSelectedFields:function(e){this.getData("cxPropMaxSelectColumn")&&this.getData("cxPropSelectedFields").length>=this.getData("cxPropMaxSelectColumn")?this.setData("disable",!0):this.setData("disable",!1),this.setItemArray(e),this.sortableMenu()},selectedFieldsObs:function(){this.getData("cxPropMaxSelectColumn")&&this.getData("cxPropSelectedFields").length>=this.getData("cxPropMaxSelectColumn")?this.setData("disable",!0):this.setData("disable",!1),this.setItemArray();var e=this.$node.querySelector("lyte-search");e&&e.setValue(e.ltProp("value")),this.sortableMenu()}.observes("cxPropSelectedFields.[]"),preventUIType:[556,555,51,123,500,66,444,343,41,1234,445],preventColumnName:["KEYWORDID","ADID","GADCONFIGID","ADGROUPID","REMINDINVITEESAT","CONVERTEDDATE","PRODUCTDETAILS","ISAPPROVED","CONSENTID","SE_STATUS","PROCESSINGBASIS","COMMENTCONTENTS","ISCTICALL","PUBLISHED","CALLSTATUS","ISDUPLICATE","ZCAMPAIGNID","CONVERTED","ISLOCKED","CTIVOICEURL"],observeFields:function(){this.setItemArray(),this.getData("cxPropMaxSelectColumn")&&this.getData("cxPropSelectedFields").length==this.getData("cxPropMaxSelectColumn")&&(this.data.disable=!0),this.sortableMenu()}.observes("cxPropFields").on("init"),observePreventReordering:function(){this.data.cxPropPreventReordering&&this.setData("cxPropDisableSortable",!0)}.observes("cxPropPreventReordering").on("init"),afterSelectionUnselection:function(e,t,i){this.getMethods(e)&&this.executeMethod(e,this.getSelectedFields(),this.$node.querySelector("[lt-prop-id='"+i.id+"']").parentElement,this.data.items,t),"onCheckBoxChecked"==e&&this.getData("cxPropMaxSelectColumn")&&this.$node.querySelectorAll("lyte-checkbox input:checked").length==this.getData("cxPropMaxSelectColumn")?this.setData("disable",!0):"onCheckBoxUnChecked"==e&&this.setData("disable",!1)},checkUncheck:function(e,t,i,o,a,r){var c=i.closest("lyte-menu-item"),n=this.data.cxPropUniqueNameSelector,s=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend","animationend"],l="number"==typeof a?this.data.items[0].fields:this.data.items,d=this;s.forEach((function(p){c.addEventListener(p,(function p(m){if(!m.currentTarget.dataset.triggered){m.currentTarget.dataset.triggered=!0;var u=d.$node.querySelectorAll("lyte-menu-item:not(#dummy):not(.cxNotSortable)"),x=!1,y=d.data.items;r="number"==typeof r?r:Array.prototype.slice.call(u).indexOf(c);var f=Lyte.arrayUtils("number"==typeof a?y[a].fields:y,"removeAt",r,1)[0];if(f[o]="check"==e,"check"==e){var P=d.selectedCount(o),b="number"==typeof a?P:r<P?r:P;if("pinned"==o){for(var g=0,C=0;C<l.length;C++){let e=l[C];if(!e.pinned)break;e.id!=t.id&&r<=e.cxFrom&&g++}f.cxFrom=r-g}if(d.data.isAccordianEnabled){var S=d.data.items[a].suffix;f[o]=!0,f.cxIsFrom=d.data.items[a][n],S&&"cxColumnListDefault"!==S&&(f.cx_display_label=f[d.data.cxPropDisplayLabel]+" ("+S+")",d.accordianAsChecked[f.cxIsFrom]+=1)}}else{P=d.selectedCount("selected");"pinned"==o&&(P=d.itemInd,delete d.itemInd);b=P<r?r:P;if(d.data.isAccordianEnabled&&f.cxIsFrom&&"cxColumnListDefault"!==f.cxIsFrom){f.cx_display_label=void 0;var L=d.data.items.map((function(e){return e.api_name})).indexOf(f.cxIsFrom),v=d.data.items[L];if(v.isDatafetched){var A=v.fields.length;if(d.data.cxPropSortOrder){var D=$L.extend(!0,[],v.fields);D.push(f),eleArr=d.getSortedArray(D),A=eleArr.findIndex((function(e){return e[n]===f[n]}))}Lyte.arrayUtils(v.fields,"insertAt",A,f);var k=$L("#cxColumListAccItem_"+L,d.$node)[0];k&&!k.classList.contains("lyteAccordionActive")&&k.click()}else{var F=d.selectedAccFields.findIndex((function(e){return e[n]===f[n]}));d.selectedAccFields[v[n]].splice(F,1)}Lyte.objectUtils(v,"add","isAllSelected",!1),d.accItems[L].classList.remove("dN"),d.accordianAsChecked[f.cxIsFrom]=d.accordianAsChecked[f.cxIsFrom]-1,0===d.accordianAsChecked[f.cxIsFrom]&&delete d.accordianAsChecked[f.cxIsFrom]}else{if(d.data.cxPropSortOrder){var I=l.slice(b,l.length);I.push(f),b+=d.getSortedArray(I).findIndex((function(e){return e[n]===f[n]}))}Lyte.arrayUtils(l,"insertAt",b,f)}x=!0}if(x||Lyte.arrayUtils(l,"insertAt",b,f),"number"==typeof a&&"check"===e){h.querySelectorAll("lyte-menu-item").length||Lyte.objectUtils(y[a],"add","isAllSelected",!0);var U=h.querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),M=d.searchVal;M&&M.length&&!U.length&&d.accItems[a].classList.add("dN")}var N=$L("input",d._searchInput)[0];if(d._searchInput&&N.value&&(d.resetScroll=!1,d._searchInput.setValue(N.value)),c.style.transition="",c.style.transform="",c.style.background="#fff",c.style.zIndex="",s.forEach((function(e){c.removeEventListener(e,p)})),"pinned"==o){if(d.getMethods("onPinOptionChanged")){var _=d.getSelectedFields();d.executeMethod("onPinOptionChanged",_,d.$node.querySelector("#"+i.id).parentElement,d.data.items,b,"check"==e?"PinAction":"unPinAction")}}else d.afterSelectionUnselection("check"==e?"onCheckBoxChecked":"onCheckBoxUnChecked",b,i);d.sortableMenu()}}))}));var p=this.$node.querySelectorAll("lyte-menu-item:not(#dummy):not(.cxNotSortable)"),m=Array.prototype.slice.call(p).indexOf(c);if("check"==e){var u=(m-(P=m<(x=this.selectedCount(o))?m:x)-this.getHiddenCount(p,m,P))*c.getBoundingClientRect().height;if("number"==typeof a){var h=i.closest(".columnListAccordianBody");if(0!==a)u+=(C=$L(".columnListAccHeader")[0].offsetHeight)*a}c.style.transition="0.3s all ease",c.style.transform="translateY(-"+u+"px)",c.style.background="#ebebeb",c.style.zIndex="1"}else{var x=this.selectedCount(o)-1;if("pinned"==o){for(var y=t.cxFrom,f=0;f<l.length;f++){let e=l[f];if(!e.pinned)break;e.id!=t.id&&t.cxFrom<e.cxFrom&&(y+=1)}$L("#"+l[y].id+"_"+l[y][n])[0].checked&&(x=y),this.itemInd=x}var P;u=((P=x<m?m:x)-m-this.getHiddenCount(p,m,P))*c.getBoundingClientRect().height;if("number"==typeof a){var b=this.getData("items")[a].fields[r];if(b.cxIsFrom&&"cxColumnListDefault"!==b.cxIsFrom){for(var g=this.data.items.map((function(e){return e[n]})).indexOf(b.cxIsFrom),C=0;1<=g;)C+=$L("#cxColumListAccItem_"+g)[0].offsetHeight,g--;var S=this.$node.querySelector("#cxColumListAccItem_0").querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),L=Array.prototype.slice.call(S).indexOf(c);u+=C+=S.length-(L+1)}}c.style.transition="0.3s all ease",c.style.transform="translateY(+"+u+"px)",c.style.background="#ebebeb",c.style.zIndex="1"}},getFilteredFields:function(){var e=[],t=[],i=this.data.cxPropFields,o=i.length,a=this.data.cxPropUniqueNameSelector;this.itemsArray=[],this.selectedAccFields={};for(var r=0;r<o;r++)i[r].cxAccHeader?(e.push(i[r]),this.itemsArray.push({fields:[],suffix:i[r].suffix,[a]:i[r][a],header_label:i[r].cxAccHeader,isDatafetched:!1,isAllSelected:!1,hideSection:!1}),this.selectedAccFields[i[r][a]]=[]):t.push(i[r]);if(!e.length)return i;this.isFetchingTriggered={},this.accordianAsChecked={},this.setData("isAccordianEnabled",!0);var c=this.data.cxPropSelectedFields,n=this.data.cxPropDisplayLabel;if(this.itemsArray.unshift({fields:[],suffix:"cxColumnListDefault",[a]:"cxColumnListDefault",header_label:"cxColumnListDefault",isDatafetched:!0,isAllSelected:!1,hideSection:!1}),this.accordianFields=e,e.length){var s=c.filter((function(e){return 2===e[a].split(".").length})),l=s.length;for(j=0;j<l;j++){var d=s[j][a].split("."),p=e.find((function(e){return e[a]===d[0]}));if(p){var m=p.suffix;s[j].cx_display_label=m?s[j][n]+" ("+m+")":s[j][n],s[j].cxIsFrom=p[a],this.accordianAsChecked[p[a]]?this.accordianAsChecked[p[a]]=this.accordianAsChecked[p[a]]+1:this.accordianAsChecked[p[a]]=1,this.selectedAccFields[p[a]].push(s[j]),t.push(s[j])}}}return t},getSortedArray:function(e){var t=this.data.cxPropSortOrder,i=this.data.cxPropDisplayLabel;if("ascending"===t)var o=-1,a=1;else{if("descending"!==t)return e;o=1,a=-1}return e.sort((function(e,t){var r=e[i].toUpperCase(),c=t[i].toUpperCase();return r<c?o:r>c?a:0})),e},keyDownEvent:function(){setTimeout((()=>{this.$node.cxProp("aria")&&this.bindEventForAriaColumnList()}),500)}.observes("items","cxPropAria").on("didConnect")},{mixins:["crux-aria-column-list-mixin"]});
