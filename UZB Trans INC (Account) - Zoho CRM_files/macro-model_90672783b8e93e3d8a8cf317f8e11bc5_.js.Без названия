store.registerModel("macro",{created_by:Lyte.attr("object"),access_type:Lyte.attr("string"),name:Lyte.attr("string"),description:Lyte.attr("string"),actions:Lyte.attr("object"),id:Lyte.attr("string",{primaryKey:!0}),modified_by:Lyte.attr("object"),shared_to:Lyte.attr("array")},{actions:{run_macro:{}}}),store.registerAdapter("macro",{namespace:"crm/v2.2/settings",buildURL:function(e,t,a,r,i,s,o){if("action"===t){var n=/\/settings\/macro/;return o&&(o.hasOwnProperty("recordId")?i=i.replace(n,"/"+o.module+"/"+o.recordId):o.hasOwnProperty("payLoad")&&(i=i.replace(n,"/"+o.module))),i}return i=i.replaceAll("macro","macros")},methodForRequest:function(e){return"PATCH"===e?"PUT":e}}),store.registerSerializer("macro",{serialize:function(e,t,a,r){if("action"===e&&r&&r.hasOwnProperty("payLoad"))return r.payLoad;if("createRecord"===e||"updateRecord"===e){var i=t.macro;"createRecord"===e&&""===i.description&&delete i.description,i.access_type=a.access_type,i.name=a.name,0===i.actions.email_notifications.length&&delete i.actions.email_notifications,0===i.actions.field_update.length&&delete i.actions.field_update,0===i.actions.tasks.length&&delete i.actions.tasks,0===i.shared_to.length&&delete i.shared_to,i.actions.email_notifications&&i.actions.email_notifications.length>0&&i.actions.email_notifications[0].reply_to_address&&0===Object.keys(i.actions.email_notifications[0].reply_to_address).length&&delete i.actions.email_notifications[0].reply_to_address,i.actions.tasks&&i.actions.tasks.length>0&&i.actions.tasks.forEach((function(e){e.assignee&&0===Object.keys(e.assignee).length&&delete e.assignee,e.reminder&&0===Object.keys(e.reminder).length&&delete e.reminder})),"updateRecord"===e&&(i.id&&delete i.id,i.created_by&&delete i.created_by,(i.modified_by||null===i.modified_by)&&delete i.modified_by);var s=[];s.push(i);var o={};return o.macros=s,t=o}},normalizeResponse:function(e,t,a){if("createRecord"===t||"create"===t||"updateRecord"===t){var r={},i=e+"s";return r[i]={},r[i]=a.macros[0].details,r}if(void 0===a||0===Object.keys(a).length){var s={};switch(t){case"findAll":s[e]=[];break;case"findRecord":s[e]={}}return s}return a}});
