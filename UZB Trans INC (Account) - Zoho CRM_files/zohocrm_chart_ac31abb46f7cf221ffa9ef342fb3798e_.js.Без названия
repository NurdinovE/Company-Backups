function _regeneratorRuntime(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var t,e={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,a){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),l=new P(a||[]);return r(i,"_invoke",{value:S(t,n,l)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var b={};c(b,i,(function(){return this}));var x=Object.getPrototypeOf,C=x&&x(x(E([])));C&&C!==n&&a.call(C,i)&&(b=C);var k=y.prototype=v.prototype=Object.create(b);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(r,o,i,l){var s=d(t[r],t,o);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==_typeof(u)&&a.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,l)}),(function(t){n("throw",t,i,l)})):e.resolve(u).then((function(t){c.value=t,i(c)}),(function(t){return n("throw",t,i,l)}))}l(s.arg)}var o;r(this,"_invoke",{value:function(t,a){function r(){return new e((function(e,r){n(t,a,e,r)}))}return o=o?o.then(r,r):r()}})}function S(e,n,a){var r=h;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return{value:t,done:!0}}for(a.method=o,a.arg=i;;){var l=a.delegate;if(l){var s=O(l,a);if(s){if(s===g)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===h)throw r=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=f;var c=d(e,n,a);if("normal"===c.type){if(r=a.done?p:"suspendedYield",c.arg===g)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(r=p,a.method="throw",a.arg=c.arg)}}}function O(e,n){var a=n.method,r=e.iterator[a];if(r===t)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),g;var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function E(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(e)+" is not iterable")}return m.prototype=y,r(k,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},w(_.prototype),c(_.prototype,l,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new _(u(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(k),c(k,s,"Generator"),c(k,i,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var a in e)n.push(a);return n.reverse(),function t(){for(;n.length;){var a=n.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},e.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return l.type="throw",l.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:E(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),g}},e}function asyncGeneratorStep(t,e,n,a,r,o,i){try{var l=t[o](i),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(a,r)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){asyncGeneratorStep(o,a,r,i,l,"next",t)}function l(t){asyncGeneratorStep(o,a,r,i,l,"throw",t)}i(void 0)}))}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var a=_superPropBase(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},_get.apply(this,arguments)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _callSuper(t,e,n){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],_getPrototypeOf(t).constructor):e.apply(t,n))}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,l=[],s=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(l.push(a.value),l.length!==e);s=!0);}catch(t){c=!0,r=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={exports:{}};e(n.exports),t.d3=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(t){"use strict";function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var t,n={},a=Object.prototype,r=a.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function h(t,e,n,a){var r=e&&e.prototype instanceof y?e:y,o=Object.create(r.prototype),l=new L(a||[]);return i(o,"_invoke",{value:A(t,n,l)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var p="suspendedStart",g="executing",v="completed",m={};function y(){}function b(){}function x(){}var C={};d(C,s,(function(){return this}));var k=Object.getPrototypeOf,w=k&&k(k(M([])));w&&w!==a&&r.call(w,s)&&(C=w);var _=x.prototype=y.prototype=Object.create(C);function S(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(a,i,l,s){var c=f(t[a],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==o(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,l,s)}),(function(t){n("throw",t,l,s)})):e.resolve(d).then((function(t){u.value=t,l(u)}),(function(t){return n("throw",t,l,s)}))}s(c.arg)}var a;i(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(o,o):o()}})}function A(e,n,a){var r=p;return function(o,i){if(r===g)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return{value:t,done:!0}}for(a.method=o,a.arg=i;;){var l=a.delegate;if(l){var s=T(l,a);if(s){if(s===m)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===p)throw r=v,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=g;var c=f(e,n,a);if("normal"===c.type){if(r=a.done?v:"suspendedYield",c.arg===m)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(r=v,a.method="throw",a.arg=c.arg)}}}function T(e,n){var a=n.method,r=e.iterator[a];if(r===t)return n.delegate=null,"throw"===a&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var o=f(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return b.prototype=x,i(_,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=d(x,u,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},n.awrap=function(t){return{__await:t}},S(O.prototype),d(O.prototype,c,(function(){return this})),n.AsyncIterator=O,n.async=function(t,e,a,r,o){void 0===o&&(o=Promise);var i=new O(h(t,e,a,r),o);return n.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(_),d(_,u,"Generator"),d(_,s,(function(){return this})),d(_,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var a in e)n.push(a);return n.reverse(),function t(){for(;n.length;){var a=n.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},n.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(a,r){return l.type="throw",l.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:M(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},n}Object.defineProperty(t,"__esModule",{value:!0}),t.Node=Po,t.active=function(t,e){var n,a,r=t.__transition;if(r)for(a in e=null==e?null:e+"",r)if((n=r[a]).state>1&&n.name===e)return new er([[t]],gr,e,+a);return null},t.arc=function(){var t=$c,e=Qc,n=zc(0),a=null,r=Kc,o=Jc,i=tu,l=null;function s(){var s,c,u=+t.apply(this,arguments),d=+e.apply(this,arguments),h=r.apply(this,arguments)-Gc,f=o.apply(this,arguments)-Gc,p=jc(f-h),g=f>h;if(l||(l=s=wi()),d<u&&(c=d,d=u,u=c),d>Yc)if(p>Xc-Yc)l.moveTo(d*Bc(h),d*Wc(h)),l.arc(0,0,d,h,f,!g),u>Yc&&(l.moveTo(u*Bc(f),u*Wc(f)),l.arc(0,0,u,f,h,g));else{var v,m,y=h,b=f,x=h,C=f,k=p,w=p,_=i.apply(this,arguments)/2,S=_>Yc&&(a?+a.apply(this,arguments):Vc(u*u+d*d)),O=Nc(jc(d-u)/2,+n.apply(this,arguments)),A=O,T=O;if(S>Yc){var P=qc(S/u*Wc(_)),E=qc(S/d*Wc(_));(k-=2*P)>Yc?(x+=P*=g?1:-1,C-=P):(k=0,x=C=(h+f)/2),(w-=2*E)>Yc?(y+=E*=g?1:-1,b-=E):(w=0,y=b=(h+f)/2)}var L=d*Bc(y),M=d*Wc(y),D=u*Bc(C),I=u*Wc(C);if(O>Yc){var R=d*Bc(b),z=d*Wc(b),j=u*Bc(x),F=u*Wc(x);if(p<Uc){var B=k>Yc?eu(L,M,j,F,R,z,D,I):[D,I],H=L-B[0],N=M-B[1],W=R-B[0],V=z-B[1],Y=1/Wc(Zc((H*W+N*V)/(Vc(H*H+N*N)*Vc(W*W+V*V)))/2),U=Vc(B[0]*B[0]+B[1]*B[1]);A=Nc(O,(u-U)/(Y-1)),T=Nc(O,(d-U)/(Y+1))}}w>Yc?T>Yc?(v=nu(j,F,L,M,d,T,g),m=nu(R,z,D,I,d,T,g),l.moveTo(v.cx+v.x01,v.cy+v.y01),T<O?l.arc(v.cx,v.cy,T,Fc(v.y01,v.x01),Fc(m.y01,m.x01),!g):(l.arc(v.cx,v.cy,T,Fc(v.y01,v.x01),Fc(v.y11,v.x11),!g),l.arc(0,0,d,Fc(v.cy+v.y11,v.cx+v.x11),Fc(m.cy+m.y11,m.cx+m.x11),!g),l.arc(m.cx,m.cy,T,Fc(m.y11,m.x11),Fc(m.y01,m.x01),!g))):(l.moveTo(L,M),l.arc(0,0,d,y,b,!g)):l.moveTo(L,M),u>Yc&&k>Yc?A>Yc?(v=nu(D,I,R,z,u,-A,g),m=nu(L,M,j,F,u,-A,g),l.lineTo(v.cx+v.x01,v.cy+v.y01),A<O?l.arc(v.cx,v.cy,A,Fc(v.y01,v.x01),Fc(m.y01,m.x01),!g):(l.arc(v.cx,v.cy,A,Fc(v.y01,v.x01),Fc(v.y11,v.x11),!g),l.arc(0,0,u,Fc(v.cy+v.y11,v.cx+v.x11),Fc(m.cy+m.y11,m.cx+m.x11),g),l.arc(m.cx,m.cy,A,Fc(m.y11,m.x11),Fc(m.y01,m.x01),!g))):l.arc(0,0,u,C,x,g):l.lineTo(D,I)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,a=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Uc/2;return[Bc(a)*n,Wc(a)*n]},s.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:zc(+e),s):t},s.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:zc(+t),s):e},s.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:zc(+t),s):n},s.padRadius=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:zc(+t),s):a},s.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:zc(+t),s):r},s.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:zc(+t),s):o},s.padAngle=function(t){return arguments.length?(i="function"==typeof t?t:zc(+t),s):i},s.context=function(t){return arguments.length?(l=null==t?null:t,s):l},s},t.area=su,t.radialArea=t.areaRadial=function(){var t=su().curve(du),e=t.curve,n=t.lineX0,a=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return pu(n())},delete t.lineX0,t.lineEndAngle=function(){return pu(a())},delete t.lineX1,t.lineInnerRadius=function(){return pu(r())},delete t.lineY0,t.lineOuterRadius=function(){return pu(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(fu(t)):e()._curve},t},t.ascending=i,t.axisBottom=function(t){return R(3,t)},t.axisLeft=function(t){return R(4,t)},t.axisRight=function(t){return R(2,t)},t.axisTop=function(t){return R(1,t)},t.bisectRight=t.bisectLeft=t.bisect=void 0,t.bisector=l,t.brush=function(){return Nr(Pr)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.brushX=function(){return Nr(Ar)},t.brushY=function(){return Nr(Tr)},t.clientPoint=ut,t.cluster=function(){var t=bo,e=1,n=1,a=!1;function r(r){var o,i=0;r.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(xo,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Co,0)}(n)):(e.x=o?i+=t(e,o):0,e.y=0,o=e)}));var l=function(t){var e;for(;e=t.children;)t=e[0];return t}(r),s=function(t){var e;for(;e=t.children;)t=e[e.length-1];return t}(r),c=l.x-t(l,s)/2,u=s.x+t(s,l)/2;return r.eachAfter(a?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(a=!1,e=+t[0],n=+t[1],r):a?null:[e,n]},r.nodeSize=function(t){return arguments.length?(a=!0,e=+t[0],n=+t[1],r):a?[e,n]:null},r},t.color=Ie,t.creator=X,t.csvParseRows=t.csvParse=void 0,t.cubehelix=yn,t.curveCardinalClosed=t.curveCardinal=void 0,t.curveLinear=ru,t.curveLinearClosed=function(t){return new Su(t)},t.curveMonotoneX=function(t){return new Eu(t)},t.curveMonotoneY=function(t){return new Lu(t)},t.curveStepAfter=function(t){return new Du(t,1)},t.curveStepBefore=function(t){return new Du(t,0)},t.customEvent=st,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.dispatch=j,t.drag=function(){var t,e,n,a,r=fe,o=pe,i=ge,l=ve,s={},c=j("start","drag","end"),u=0,d=0;function h(t){t.on("mousedown.drag",f).filter(l).on("touchstart.drag",v).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!a&&r.apply(this,arguments)){var i=b("mouse",o.apply(this,arguments),dt,this,arguments);i&&(oe(nt.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),ce(nt.view),le(),n=!1,t=nt.clientX,e=nt.clientY,i("start"))}}function p(){if(se(),!n){var a=nt.clientX-t,r=nt.clientY-e;n=a*a+r*r>d}s.mouse("drag")}function g(){oe(nt.view).on("mousemove.drag mouseup.drag",null),ue(nt.view,n),se(),s.mouse("end")}function v(){if(r.apply(this,arguments)){var t,e,n=nt.changedTouches,a=o.apply(this,arguments),i=n.length;for(t=0;t<i;++t)(e=b(n[t].identifier,a,ie,this,arguments))&&(le(),e("start"))}}function m(){var t,e,n=nt.changedTouches,a=n.length;for(t=0;t<a;++t)(e=s[n[t].identifier])&&(se(),e("drag"))}function y(){var t,e,n=nt.changedTouches,r=n.length;for(a&&clearTimeout(a),a=setTimeout((function(){a=null}),500),t=0;t<r;++t)(e=s[n[t].identifier])&&(le(),e("end"))}function b(t,e,n,a,r){var o,l,d,f=n(e,t),p=c.copy();if(st(new he(h,"beforestart",o,t,u,f[0],f[1],0,0,p),(function(){return null!=(nt.subject=o=i.apply(a,r))&&(l=o.x-f[0]||0,d=o.y-f[1]||0,!0)})))return function i(c){var g,v=f;switch(c){case"start":s[t]=i,g=u++;break;case"end":delete s[t],--u;case"drag":f=n(e,t),g=u}st(new he(h,c,o,t,g,f[0]+l,f[1]+d,f[0]-v[0],f[1]-v[1],p),p.apply,p,[c,a,r])}}return h.filter=function(t){return arguments.length?(r="function"==typeof t?t:de(!!t),h):r},h.container=function(t){return arguments.length?(o="function"==typeof t?t:de(t),h):o},h.subject=function(t){return arguments.length?(i="function"==typeof t?t:de(t),h):i},h.touchable=function(t){return arguments.length?(l="function"==typeof t?t:de(!!t),h):l},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,h):Math.sqrt(d)},h},t.dragDisable=ce,t.dragEnable=ue,t.easeBackOut=t.easeBackInOut=t.easeBackIn=t.easeBack=void 0,t.easeBounceOut=t.easeBounce=ur,t.easeBounceIn=function(t){return 1-ur(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-ur(1-t):ur(t-1)+1)/2},t.easeCircleInOut=t.easeCircle=function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2},t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubicInOut=t.easeCubic=or,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeElasticOut=t.easeElasticInOut=t.easeElasticIn=t.easeElastic=void 0,t.easeExpInOut=t.easeExp=function(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2},t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeLinear=function(t){return+t},t.easePolyOut=t.easePolyInOut=t.easePolyIn=t.easePoly=void 0,t.easeQuadInOut=t.easeQuad=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2},t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeSinInOut=t.easeSin=function(t){return(1-Math.cos(ir*t))/2},t.easeSinIn=function(t){return 1-Math.cos(t*lr)},t.easeSinOut=function(t){return Math.sin(t*lr)},t.event=void 0,t.extent=function(t,e){var n,a,r,o=t.length,i=-1;if(null==e){for(;++i<o;)if(null!=(n=t[i])&&n>=n)for(a=r=n;++i<o;)null!=(n=t[i])&&(a>n&&(a=n),r<n&&(r=n))}else for(;++i<o;)if(null!=(n=e(t[i],i,t))&&n>=n)for(a=r=n;++i<o;)null!=(n=e(t[i],i,t))&&(a>n&&(a=n),r<n&&(r=n));return[a,r]},t.format=void 0,t.formatDefaultLocale=go,t.formatLocale=po,t.formatPrefix=void 0,t.formatSpecifier=no,t.geoAiry=function(){var t=Hg,e=tg(qg),n=e(t);return n.radius=function(n){return arguments.length?e(t=n*Ug):t*Yg},n.scale(179.976).clipAngle(147)},t.geoAitoff=function(){return Jp($g).scale(152.63)},t.geoAlbers=rg,t.geoAlbersUsa=function(){var t,e,n,a,r,o,i=rg(),l=ag().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ag().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function u(t){var e=t[0],i=t[1];return o=null,n.point(e,i),o||(a.point(e,i),o)||(r.point(e,i),o)}function d(){return t=e=null,u}return u.invert=function(t){var e=i.scale(),n=i.translate(),a=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&a>=-.425&&a<-.214?l:r>=.166&&r<.234&&a>=-.214&&a<-.115?s:i).invert(t)},u.stream=function(n){return t&&e===n?t:(a=[i.stream(e=n),l.stream(n),s.stream(n)],r=a.length,t={point:function(t,e){for(var n=-1;++n<r;)a[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)a[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)a[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)a[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)a[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)a[t].polygonEnd()}});var a,r},u.precision=function(t){return arguments.length?(i.precision(t),l.precision(t),s.precision(t),d()):i.precision()},u.scale=function(t){return arguments.length?(i.scale(t),l.scale(.35*t),s.scale(t),u.translate(i.translate())):i.scale()},u.translate=function(t){if(!arguments.length)return i.translate();var e=i.scale(),o=+t[0],u=+t[1];return n=i.translate(t).clipExtent([[o-.455*e,u-.238*e],[o+.455*e,u+.238*e]]).stream(c),a=l.translate([o-.307*e,u+.201*e]).clipExtent([[o-.425*e+ad,u+.12*e+ad],[o-.214*e-ad,u+.234*e-ad]]).stream(c),r=s.translate([o-.205*e,u+.212*e]).clipExtent([[o-.214*e+ad,u+.166*e+ad],[o-.115*e-ad,u+.234*e-ad]]).stream(c),d()},u.fitExtent=function(t,e){return Yp(u,t,e)},u.fitSize=function(t,e){return Up(u,t,e)},u.fitWidth=function(t,e){return Gp(u,t,e)},u.fitHeight=function(t,e){return Xp(u,t,e)},u.scale(1070)},t.geoArea=function(t){return Bd.reset(),Md(t,Hd),2*Bd},t.geoArmadillo=function(){var t=20*Ug,e=t>=0?1:-1,n=jg(e*t),a=tg(Qg),r=a(t),o=r.stream;return r.parallel=function(r){return arguments.length?(n=jg((e=(t=r*Ug)>=0?1:-1)*t),a(t)):t*Yg},r.stream=function(a){var i=r.rotate(),l=o(a),s=(r.rotate([0,0]),o(a));return r.rotate(i),l.sphere=function(){s.polygonStart(),s.lineStart();for(var a=-180*e;e*a<180;a+=90*e)s.point(a,90*e);for(;e*(a-=t)>=-180;)s.point(a,e*-Pg(Eg(a*Ug/2),n)*Yg);s.lineEnd(),s.polygonEnd()},l},r.scale(218.695).center([0,28.0974])},t.geoAzimuthalEqualArea=function(){return Jp(lg).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=void 0,t.geoAzimuthalEquidistant=function(){return Jp(sg).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=void 0,t.geoBounds=function(t){var e,n,a,r,o,i,l;if(eh=th=-(Kd=Jd=1/0),ih=[],Md(t,Sh),n=ih.length){for(ih.sort(Ih),e=1,a=ih[0],o=[a];e<n;++e)r=ih[e],Rh(a,r[0])||Rh(a,r[1])?(Dh(a[0],r[1])>Dh(a[0],a[1])&&(a[1]=r[1]),Dh(r[0],a[1])>Dh(a[0],a[1])&&(a[0]=r[0])):o.push(a=r);for(i=-1/0,n=o.length-1,e=0,a=o[n];e<=n;a=r,++e)r=o[e],(l=Dh(a[1],r[0]))>i&&(i=l,Kd=r[0],th=a[1])}return ih=lh=null,Kd===1/0||Jd===1/0?[[NaN,NaN],[NaN,NaN]]:[[Kd,Jd],[th,eh]]},t.geoCentroid=Xh,t.geoChamberlinAfrica=function(){return function(t,e,n){var a=Xh({type:"MultiPoint",coordinates:[t,e,n]}),r=[-a[0],-a[1]],o=ef(r),i=Jp(function(t,e,n){for(var a,r=[[t[0],t[1],zg(t[1]),Eg(t[1])],[e[0],e[1],zg(e[1]),Eg(e[1])],[n[0],n[1],zg(n[1]),Eg(n[1])]],o=r[2],i=0;i<3;++i,o=a)a=r[i],o.v=nv(a[1]-o[1],o[3],o[2],a[3],a[2],a[0]-o[0]),o.point=[0,0];var l=av(r[0].v[0],r[2].v[0],r[1].v[0]),s=av(r[0].v[0],r[1].v[0],r[2].v[0]),c=Bg-l;r[2].point[1]=0,r[0].point[0]=-(r[1].point[0]=r[0].v[0]/2);var u=[r[2].point[0]=r[0].point[0]+r[2].v[0]*Eg(l),2*(r[0].point[1]=r[1].point[1]=r[2].v[0]*zg(l))];function d(t,e){var n,a=zg(e),o=Eg(e),i=new Array(3);for(n=0;n<3;++n){var l=r[n];if(i[n]=nv(e-l[1],l[3],l[2],o,a,t-l[0]),!i[n][0])return l.point;i[n][1]=rv(i[n][1]-l.v[1])}var d=u.slice();for(n=0;n<3;++n){var h=2==n?0:n+1,f=av(r[n].v[0],i[n][0],i[h][0]);i[n][1]<0&&(f=-f),n?1==n?(f=s-f,d[0]-=i[n][0]*Eg(f),d[1]-=i[n][0]*zg(f)):(f=c-f,d[0]+=i[n][0]*Eg(f),d[1]+=i[n][0]*zg(f)):(d[0]+=i[n][0]*Eg(f),d[1]-=i[n][0]*zg(f))}return d[0]/=3,d[1]/=3,d}return d}(ov(o(t)),ov(o(e)),ov(o(n)))).rotate(r),l=i.center;return delete i.rotate,i.center=function(t){return arguments.length?l(o(t)):o.invert(l())},i.clipAngle(90)}([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},t.geoCircle=function(){var t,e,n=Zh([0,0]),a=Zh(90),r=Zh(6),o={point:function(n,a){t.push(n=e(n,a)),n[0]*=cd,n[1]*=cd}};function i(){var i=n.apply(this,arguments),l=a.apply(this,arguments)*ud,s=r.apply(this,arguments)*ud;return t=[],e=Qh(-i[0]*ud,-i[1]*ud,0).invert,nf(o,l,s,1),i={type:"Polygon",coordinates:[t]},t=e=null,i}return i.center=function(t){return arguments.length?(n="function"==typeof t?t:Zh([+t[0],+t[1]]),i):n},i.radius=function(t){return arguments.length?(a="function"==typeof t?t:Zh(+t),i):a},i.precision=function(t){return arguments.length?(r="function"==typeof t?t:Zh(+t),i):r},i},t.geoClipAntimeridian=void 0,t.geoClipCircle=vf,t.geoClipExtent=function(){var t,e,n,a=0,r=0,o=960,i=500;return n={stream:function(n){return t&&e===n?t:t=bf(a,r,o,i)(e=n)},extent:function(l){return arguments.length?(a=+l[0][0],r=+l[0][1],o=+l[1][0],i=+l[1][1],t=e=null,n):[[a,r],[o,i]]}}},t.geoClipRectangle=bf,t.geoConicConformal=function(){return eg(hg).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=hg,t.geoConicEqualArea=ag,t.geoConicEqualAreaRaw=ng,t.geoConicEquidistant=function(){return eg(pg).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=pg,t.geoContains=function(t,e){return(t&&Mf.hasOwnProperty(t.type)?Mf[t.type]:If)(t,e)},t.geoCylindricalStereographic=function(){return function(t){var e=0,n=tg(t),a=n(e);return a.parallel=function(t){return arguments.length?n(e=t*Ug):e*Yg},a}(iv).scale(124.75)},t.geoDistance=Lf,t.geoEckert3=function(){return Jp(lv).scale(180.739)},t.geoEckert4=function(){return Jp(sv).scale(180.739)},t.geoEckert5=function(){return Jp(cv).scale(173.044)},t.geoEckert6=function(){return Jp(uv).scale(173.044)},t.geoEqualEarth=function(){return Jp(xg).scale(177.158)},t.geoEqualEarthRaw=xg,t.geoEquirectangular=function(){return Jp(fg).scale(152.63)},t.geoEquirectangularRaw=fg,t.geoFahey=function(){return Jp(hv).scale(137.152)},t.geoGinzburg4=function(){return Jp(pv).scale(149.995)},t.geoGinzburg5=function(){return Jp(gv).scale(153.93)},t.geoGinzburg6=function(){return Jp(vv).scale(130.945)},t.geoGinzburg8=function(){return Jp(mv).scale(131.747)},t.geoGinzburg9=function(){return Jp(yv).scale(131.087)},t.geoGnomonic=function(){return Jp(Cg).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Cg,t.geoGraticule=Wf,t.geoGraticule10=function(){return Wf()()},t.geoHammer=function(){var t=2,e=tg(Kg),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n.scale(169.529)},t.geoIdentity=function(){var t,e,n,a,r,o,i=1,l=0,s=0,c=1,u=1,d=Vf,h=null,f=Vf;function p(){return a=r=null,o}return o={stream:function(t){return a&&r===t?a:a=d(f(r=t))},postclip:function(a){return arguments.length?(f=a,h=t=e=n=null,p()):f},clipExtent:function(a){return arguments.length?(f=null==a?(h=t=e=n=null,Vf):bf(h=+a[0][0],t=+a[0][1],e=+a[1][0],n=+a[1][1]),p()):null==h?null:[[h,t],[e,n]]},scale:function(t){return arguments.length?(d=kg((i=+t)*c,i*u,l,s),p()):i},translate:function(t){return arguments.length?(d=kg(i*c,i*u,l=+t[0],s=+t[1]),p()):[l,s]},reflectX:function(t){return arguments.length?(d=kg(i*(c=t?-1:1),i*u,l,s),p()):c<0},reflectY:function(t){return arguments.length?(d=kg(i*c,i*(u=t?-1:1),l,s),p()):u<0},fitExtent:function(t,e){return Yp(o,t,e)},fitSize:function(t,e){return Up(o,t,e)},fitWidth:function(t,e){return Gp(o,t,e)},fitHeight:function(t,e){return Xp(o,t,e)}}},t.geoInterpolate=function(t,e){var n=t[0]*ud,a=t[1]*ud,r=e[0]*ud,o=e[1]*ud,i=pd(a),l=bd(a),s=pd(o),c=bd(o),u=i*pd(n),d=i*bd(n),h=s*pd(r),f=s*bd(r),p=2*_d(Cd(Sd(o-a)+i*s*Sd(r-n))),g=bd(p),v=p?function(t){var e=bd(t*=p)/g,n=bd(p-t)/g,a=n*u+e*h,r=n*d+e*f,o=n*l+e*c;return[fd(r,a)*cd,fd(o,Cd(a*a+r*r))*cd]}:function(){return[n*cd,a*cd]};return v.distance=p,v},t.geoKavrayskiy7=function(){return Jp(bv).scale(158.837)},t.geoLength=Tf,t.geoMercator=function(){return ug(cg).scale(961/sd)},t.geoMercatorRaw=cg,t.geoMiller=function(){return Jp(xv).scale(108.318)},t.geoNaturalEarth1=function(){return Jp(wg).scale(175.295)},t.geoNaturalEarth1Raw=wg,t.geoOrthographic=function(){return Jp(_g).scale(249.5).clipAngle(90.000001)},t.geoOrthographicRaw=_g,t.geoPath=function(t,e){var n,a,r=4.5;function o(t){return t&&("function"==typeof r&&a.pointRadius(+r.apply(this,arguments)),Md(t,n(a))),a.result()}return o.area=function(t){return Md(t,n($f)),$f.result()},o.measure=function(t){return Md(t,n(zp)),zp.result()},o.bounds=function(t){return Md(t,n(op)),op.result()},o.centroid=function(t){return Md(t,n(bp)),bp.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Vf):(t=e).stream,o):t},o.context=function(t){return arguments.length?(a=null==t?(e=null,new Bp):new Pp(e=t),"function"!=typeof r&&a.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(a.pointRadius(+t),+t),o):r},o.projection(t).context(e)},t.geoProject=function(t,e){var n,a=e.stream;if(!a)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=_v;break;case"FeatureCollection":n=wv;break;default:n=Sv}return n(t,a)},t.geoProjection=Jp,t.geoProjectionMutator=tg,t.geoQuantize=function(t,e){if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");function n(t){var n=t.length,a=2,r=new Array(n);for(r[0]=+t[0].toFixed(e),r[1]=+t[1].toFixed(e);a<n;)r[a]=t[a],++a;return r}function a(t){return t.map(n)}function r(t){return t.map(a)}function o(t){if(null==t)return t;var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(o)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:a(t.coordinates)};break;case"MultiLineString":case"Polygon":e={type:t.type,coordinates:r(t.coordinates)};break;case"MultiPolygon":e={type:"MultiPolygon",coordinates:t.coordinates.map(r)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function i(t){var e={type:"Feature",properties:t.properties,geometry:o(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),e}if(null!=t)switch(t.type){case"Feature":return i(t);case"FeatureCollection":var l={type:"FeatureCollection",features:t.features.map(i)};return null!=t.bbox&&(l.bbox=t.bbox),l;default:return o(t)}return t},t.geoRobinson=function(){return Jp(Mv).scale(152.63)},t.geoRotation=ef,t.geoSatellite=function(){var t=2,e=0,n=tg(Dv),a=n(t,e);return a.distance=function(a){return arguments.length?n(t=+a,e):t},a.tilt=function(a){return arguments.length?n(t,e=a*Ug):e*Yg},a.scale(432.147).clipAngle(Xg(1/t)*Yg-1e-6)},t.geoStereographic=function(){return Jp(Sg).scale(250).clipAngle(142)},t.geoStereographicRaw=Sg,t.geoStitch=function(t){if(null==t)return t;switch(t.type){case"Feature":return Gv(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(Gv)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return Xv(t)}},t.geoStream=Md,t.geoTransform=function(t){return{stream:Np(t)}},t.geoTransverseMercator=function(){var t=ug(Og),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Og,t.geoWagner4=function(){return Jp($v).scale(176.84)},t.geoWagner6=function(){return Jp(Qv).scale(152.63)},t.hcl=ln,t.hierarchy=_o,t.hsl=We,t.interpolate=jn,t.interpolateArray=En,t.interpolateBasis=Cn,t.interpolateBasisClosed=kn,t.interpolateCubehelixLong=t.interpolateCubehelix=void 0,t.interpolateDate=Ln,t.interpolateHslLong=t.interpolateHsl=t.interpolateHclLong=t.interpolateHcl=void 0,t.interpolateLab=function(t,e){var n=An((t=Je(t)).l,(e=Je(e)).l),a=An(t.a,e.a),r=An(t.b,e.b),o=An(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=a(e),t.b=r(e),t.opacity=o(e),t+""}},t.interpolateNumber=Mn,t.interpolateObject=Dn,t.interpolateRgbBasisClosed=t.interpolateRgbBasis=t.interpolateRgb=void 0,t.interpolateRound=Fn,t.interpolateString=zn,t.interpolateTransformSvg=t.interpolateTransformCss=void 0,t.interpolateZoom=Qn,t.interrupt=Aa,t.interval=function(t,e,n){var a=new pa,r=e;return null==e?(a.restart(t,e,n),a):(e=+e,n=null==n?ha():+n,a.restart((function o(i){i+=r,a.restart(o,r+=e,n),t(i)}),e,n),a)},t.json=t.isoParse=t.isoFormat=void 0,t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.lab=Je,t.line=lu,t.radialLine=t.lineRadial=function(){return pu(lu().curve(du))},t.linkHorizontal=function(){return yu(bu)},t.linkVertical=function(){return yu(xu)},t.local=q,t.map=w,t.matcher=void 0,t.max=function(t,e){var n,a,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(a=n;++o<r;)null!=(n=t[o])&&n>a&&(a=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(a=n;++o<r;)null!=(n=e(t[o],o,t))&&n>a&&(a=n);return a},t.mean=function(t,e){var n,a=t.length,r=a,o=-1,i=0;if(null==e)for(;++o<a;)isNaN(n=d(t[o]))?--r:i+=n;else for(;++o<a;)isNaN(n=d(e(t[o],o,t)))?--r:i+=n;if(r)return i/r},t.merge=x,t.min=function(t,e){var n,a,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(a=n;++o<r;)null!=(n=t[o])&&a>n&&(a=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(a=n;++o<r;)null!=(n=e(t[o],o,t))&&a>n&&(a=n);return a},t.mouse=dt,t.namespace=Y,t.namespaces=void 0,t.now=ha,t.pack=function(){var t=null,e=1,n=1,a=Mo;function r(r){var o=Ro();return r.x=e/2,r.y=n/2,t?r.eachBefore($o(t)).eachAfter(Qo(a,.5,o)).eachBefore(Ko(1)):r.eachBefore($o(qo)).eachAfter(Qo(Mo,1,o)).eachAfter(Qo(a,r.r/Math.min(e,n),o)).eachBefore(Ko(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=Eo(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(a="function"==typeof t?t:Do(+t),r):a},r},t.packEnclose=function(t){return zo(t,Ro())},t.packSiblings=function(t){return Zo(t,Ro()),t},t.pairs=function(t,e){null==e&&(e=u);var n=0,a=t.length-1,r=t[0],o=new Array(a<0?0:a);for(;n<a;)o[n]=e(r,r=t[++n]);return o},t.partition=function(){var t=1,e=1,n=0,a=!1;function r(r){var o=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/o,r.eachBefore(function(t,e){return function(a){a.children&&ti(a,a.x0,t*(a.depth+1)/e,a.x1,t*(a.depth+2)/e);var r=a.x0,o=a.y0,i=a.x1-n,l=a.y1-n;i<r&&(r=i=(r+i)/2),l<o&&(o=l=(o+l)/2),a.x0=r,a.y0=o,a.x1=i,a.y1=l}}(e,o)),a&&r.eachBefore(Jo),r}return r.round=function(t){return arguments.length?(a=!!t,r):a},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},t.path=wi,t.pie=function(){var t=uu,e=cu,n=null,a=zc(0),r=zc(Xc),o=zc(0);function i(i){var l,s,c,u,d,h=i.length,f=0,p=new Array(h),g=new Array(h),v=+a.apply(this,arguments),m=Math.min(Xc,Math.max(-Xc,r.apply(this,arguments)-v)),y=Math.min(Math.abs(m)/h,o.apply(this,arguments)),b=y*(m<0?-1:1);for(l=0;l<h;++l)(d=g[p[l]=l]=+t(i[l],l,i))>0&&(f+=d);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(i[t],i[e])})),l=0,c=f?(m-h*b)/f:0;l<h;++l,v=u)s=p[l],u=v+((d=g[s])>0?d*c:0)+b,g[s]={data:i[s],index:l,value:d,startAngle:v,endAngle:u,padAngle:y};return g}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:zc(+e),i):t},i.sortValues=function(t){return arguments.length?(e=t,n=null,i):e},i.sort=function(t){return arguments.length?(n=t,e=null,i):n},i.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:zc(+t),i):a},i.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:zc(+t),i):r},i.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:zc(+t),i):o},i},t.pointRadial=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},t.polygonArea=function(t){var e,n=-1,a=t.length,r=t[a-1],o=0;for(;++n<a;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2},t.polygonCentroid=function(t){var e,n,a=-1,r=t.length,o=0,i=0,l=t[r-1],s=0;for(;++a<r;)e=l,l=t[a],s+=n=e[0]*l[1]-l[0]*e[1],o+=(e[0]+l[0])*n,i+=(e[1]+l[1])*n;return[o/(s*=3),i/s]},t.polygonContains=function(t,e){for(var n,a,r=t.length,o=t[r-1],i=e[0],l=e[1],s=o[0],c=o[1],u=!1,d=0;d<r;++d)o=t[d],n=o[0],(a=o[1])>l!=c>l&&i<(s-n)*(l-a)/(c-a)+n&&(u=!u),s=n,c=a;return u},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,a=new Array(n),r=new Array(n);for(e=0;e<n;++e)a[e]=[+t[e][0],+t[e][1],e];for(a.sort(Qu),e=0;e<n;++e)r[e]=[a[e][0],-a[e][1]];var o=Ku(a),i=Ku(r),l=i[0]===o[0],s=i[i.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[a[o[e]][2]]);for(e=+l;e<i.length-s;++e)c.push(t[a[i[e]][2]]);return c},t.polygonLength=function(t){var e,n,a=-1,r=t.length,o=t[r-1],i=o[0],l=o[1],s=0;for(;++a<r;)e=i,n=l,o=t[a],i=o[0],l=o[1],e-=i,n-=l,s+=Math.sqrt(e*e+n*n);return s},t.precisionFixed=vo,t.precisionPrefix=mo,t.precisionRound=yo,t.quadtree=Am,t.quantize=function(t,e){for(var n=new Array(e),a=0;a<e;++a)n[a]=t(a/(e-1));return n},t.range=h,t.request=Xr,t.rgb=Fe,t.scaleBand=Pi,t.scaleLinear=function t(){var e=ji(Di,Mn);return e.copy=function(){return zi(e,t())},function(t){var e=t.domain;return t.ticks=function(t){var n=e();return v(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return function(t,e,n){var a,r=t[0],o=t[t.length-1],i=y(r,o,null==e?10:e);switch((n=no(null==n?",f":n)).type){case"s":var l=Math.max(Math.abs(r),Math.abs(o));return null!=n.precision||isNaN(a=mo(i,l))||(n.precision=a),lo(n,l);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=yo(i,Math.max(Math.abs(r),Math.abs(o))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=vo(i))||(n.precision=a-2*("%"===n.type))}return io(n)}(e(),t,n)},t.nice=function(n){null==n&&(n=10);var a,r=e(),o=0,i=r.length-1,l=r[o],s=r[i];return s<l&&(a=l,l=s,s=a,a=o,o=i,i=a),(a=m(l,s,n))>0?a=m(l=Math.floor(l/a)*a,s=Math.ceil(s/a)*a,n):a<0&&(a=m(l=Math.ceil(l*a)/a,s=Math.floor(s*a)/a,n)),a>0?(r[o]=Math.floor(l/a)*a,r[i]=Math.ceil(s/a)*a,e(r)):a<0&&(r[o]=Math.ceil(l*a)/a,r[i]=Math.floor(s*a)/a,e(r)),t},t}(e)},t.scaleLog=function t(){var e=mc(cc()).domain([1,10]);return e.copy=function(){return sc(e,t()).base(e.base())},Qs.apply(e,arguments),e},t.scaleOrdinal=Ti,t.scalePoint=function(){return Ei(Pi().paddingInner(1))},t.scaleQuantile=function t(){var e=[],n=[],a=[];function r(){var t=0,r=Math.max(1,n.length);for(a=new Array(r-1);++t<r;)a[t-1]=b(e,t/r);return o}function o(t){if(!isNaN(t=+t))return n[c(a,t)]}return o.invertExtent=function(t){var r=n.indexOf(t);return r<0?[NaN,NaN]:[r>0?a[r-1]:e[0],r<a.length?a[r]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,a=0,o=t.length;a<o;++a)null==(n=t[a])||isNaN(n=+n)||e.push(n);return e.sort(i),r()},o.range=function(t){return arguments.length?(n=Oi.call(t),r()):n.slice()},o.quantiles=function(){return a.slice()},o.copy=function(){return t().domain(e).range(n)},o},t.scaleSqrt=function(){return Sc.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var e=xc(cc());return e.copy=function(){return sc(e,t()).constant(e.constant())},Qs.apply(e,arguments)},t.scaleTime=function(){return Zs(il,ol,Ki,$i,qi,Zi,Xi,Ni,Sl).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Zs(bl,yl,dl,cl,sl,ll,Xi,Ni,Ol).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.scan=function(t,e){if(!(n=t.length))return;var n,a,r=0,o=0,l=t[o];null==e&&(e=i);for(;++r<n;)(e(a=t[r],l)<0||0!==e(l,l))&&(l=a,o=r);if(0===e(l,l))return o},t.select=oe,t.selectAll=function(t){return"string"==typeof t?new ae([document.querySelectorAll(t)],[document.documentElement]):new ae([null==t?[]:t],ne)},t.selection=re,t.selector=ft,t.selectorAll=gt,t.set=O,t.stack=function(){var t=zc([]),e=Ru,n=Iu,a=zu;function r(r){var o,i,l=t.apply(this,arguments),s=r.length,c=l.length,u=new Array(c);for(o=0;o<c;++o){for(var d,h=l[o],f=u[o]=new Array(s),p=0;p<s;++p)f[p]=d=[0,+a(r[p],h,p,r)],d.data=r[p];f.key=h}for(o=0,i=e(u);o<c;++o)u[i[o]].index=o;return n(u,i),u}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:zc(gu.call(e)),r):t},r.value=function(t){return arguments.length?(a="function"==typeof t?t:zc(+t),r):a},r.order=function(t){return arguments.length?(e=null==t?Ru:"function"==typeof t?t:zc(gu.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?Iu:t,r):n},r},t.stratify=function(){var t,e=ri,n=oi;function r(r){var o,i,l,s,c,u,d,h,f=Array.from(r),p=e,g=n,v=new Map;if(null!=t){var m,y=f.map((function(e,n){return function(t){var e=(t="".concat(t)).length;li(t,e-1)&&!li(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:"/".concat(t)}(t(e,n,r))})),b=y.map(ii),x=new Set(y).add(""),C=a(b);try{for(C.s();!(m=C.n()).done;){var k=m.value;x.has(k)||(x.add(k),y.push(k),b.push(ii(k)),f.push(ai))}}catch(t){C.e(t)}finally{C.f()}p=function(t,e){return y[e]},g=function(t,e){return b[e]}}for(l=0,o=f.length;l<o;++l)i=f[l],u=f[l]=new Po(i),null!=(d=p(i,l,r))&&(d+="")&&(h=u.id=d,v.set(h,v.has(h)?ni:u)),null!=(d=g(i,l,r))&&(d+="")&&(u.parent=d);for(l=0;l<o;++l)if(d=(u=f[l]).parent){if(!(c=v.get(d)))throw new Error("missing: "+d);if(c===ni)throw new Error("ambiguous: "+d);c.children?c.children.push(u):c.children=[u],u.parent=c}else{if(s)throw new Error("multiple roots");s=u}if(!s)throw new Error("no root");if(null!=t){for(;s.data===ai&&1===s.children.length;)s=s.children[0],--o;for(var w=f.length-1;w>=0&&(u=f[w]).data===ai;--w)u.data=null}if(s.parent=ei,s.eachBefore((function(t){t.depth=t.parent.depth+1,--o})).eachBefore(To),s.parent=null,o>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=Eo(t),r):e},r.parentId=function(t){return arguments.length?(n=Eo(t),r):n},r.path=function(e){return arguments.length?(t=Eo(e),r):t},r},t.style=Lt,t.sum=function(t,e){var n,a=t.length,r=-1,o=0;if(null==e)for(;++r<a;)(n=+t[r])&&(o+=n);else for(;++r<a;)(n=+e(t[r],r,t))&&(o+=n);return o},t.tickIncrement=m,t.tickStep=y,t.ticks=v,t.timeFormat=t.timeDays=t.timeDay=void 0,t.timeFormatDefaultLocale=Fs,t.timeFormatLocale=wl,t.timeHours=t.timeHour=t.timeFridays=t.timeFriday=void 0,t.timeInterval=Hi,t.timeYears=t.timeYear=t.timeWeeks=t.timeWeek=t.timeWednesdays=t.timeWednesday=t.timeTuesdays=t.timeTuesday=t.timeThursdays=t.timeThursday=t.timeSundays=t.timeSunday=t.timeSeconds=t.timeSecond=t.timeSaturdays=t.timeSaturday=t.timeParse=t.timeMonths=t.timeMonth=t.timeMondays=t.timeMonday=t.timeMinutes=t.timeMinute=t.timeMilliseconds=t.timeMillisecond=void 0,t.timeout=xa,t.timer=ga,t.timerFlush=va,t.topojson=void 0,t.touch=ie,t.touches=function(t,e){null==e&&(e=ct().touches);for(var n=0,a=e?e.length:0,r=new Array(a);n<a;++n)r[n]=ut(t,e[n]);return r},t.transition=nr,t.tree=function(){var t=si,e=1,n=1,a=null;function r(r){var s=function(t){var e,n,a,r,o,i=new fi(t,0),l=[i];for(;e=l.pop();)if(a=e._.children)for(e.children=new Array(o=a.length),r=o-1;r>=0;--r)l.push(n=e.children[r]=new fi(a[r],r)),n.parent=e;return(i.parent=new fi(null,0)).children=[i],i}(r);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(i),a)r.eachBefore(l);else{var c=r,u=r,d=r;r.eachBefore((function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>d.depth&&(d=t)}));var h=c===u?1:t(c,u)/2,f=h-c.x,p=e/(u.x+h+f),g=n/(d.depth||1);r.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*g}))}return r}function o(e){var n=e.children,a=e.parent.children,r=e.i?a[e.i-1]:null;if(n){!function(t){var e,n=0,a=0,r=t.children,o=r.length;for(;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(a+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,a){if(n){for(var r,o=e,i=e,l=n,s=o.parent.children[0],c=o.m,u=i.m,d=l.m,h=s.m;l=ui(l),o=ci(o),l&&o;)s=ci(s),(i=ui(i)).a=e,(r=l.z+d-o.z-c+t(l._,o._))>0&&(di(hi(l,e,a),e,r),c+=r,u+=r),d+=l.m,c+=o.m,h+=s.m,u+=i.m;l&&!ui(i)&&(i.t=l,i.m+=d-u),o&&!ci(s)&&(s.t=o,s.m+=c-h,a=e)}return a}(e,r,e.parent.A||a[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(a=!1,e=+t[0],n=+t[1],r):a?null:[e,n]},r.nodeSize=function(t){return arguments.length?(a=!0,e=+t[0],n=+t[1],r):a?[e,n]:null},r},t.treemap=function(){var t=mi,e=!1,n=1,a=1,r=[0],o=Mo,i=Mo,l=Mo,s=Mo,c=Mo;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=a,t.eachBefore(d),r=[0],e&&t.eachBefore(Jo),t}function d(e){var n=r[e.depth],a=e.x0+n,u=e.y0+n,d=e.x1-n,h=e.y1-n;d<a&&(a=d=(a+d)/2),h<u&&(u=h=(u+h)/2),e.x0=a,e.y0=u,e.x1=d,e.y1=h,e.children&&(n=r[e.depth+1]=o(e)/2,a+=c(e)-n,u+=i(e)-n,(d-=l(e)-n)<a&&(a=d=(a+d)/2),(h-=s(e)-n)<u&&(u=h=(u+h)/2),t(e,a,u,d,h))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],a=+t[1],u):[n,a]},u.tile=function(e){return arguments.length?(t=Lo(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Do(+t),u):o},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(i="function"==typeof t?t:Do(+t),u):i},u.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:Do(+t),u):l},u.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:Do(+t),u):s},u.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Do(+t),u):c},u},t.treemapBinary=function(t,e,n,a,r){var o,i,l=t.children,s=l.length,c=new Array(s+1);for(c[0]=i=o=0;o<s;++o)c[o+1]=i+=l[o].value;!function t(e,n,a,r,o,i,s){if(e>=n-1){var u=l[e];return u.x0=r,u.y0=o,u.x1=i,void(u.y1=s)}for(var d=c[e],h=a/2+d,f=e+1,p=n-1;f<p;){var g=f+p>>>1;c[g]<h?f=g+1:p=g}h-c[f-1]<c[f]-h&&e+1<f&&--f;var v=c[f]-d,m=a-v;if(i-r>s-o){var y=a?(r*m+i*v)/a:i;t(e,f,v,r,o,y,s),t(f,n,m,y,o,i,s)}else{var b=a?(o*m+s*v)/a:s;t(e,f,v,r,o,i,b),t(f,n,m,r,b,i,s)}}(0,s,t.value,e,n,a,r)},t.treemapDice=ti,t.treemapResquarify=void 0,t.treemapSlice=pi,t.treemapSliceDice=function(t,e,n,a,r){(1&t.depth?pi:ti)(t,e,n,a,r)},t.utcHours=t.utcHour=t.utcFridays=t.utcFriday=t.utcFormat=t.utcDays=t.utcDay=t.treemapSquarify=void 0,t.utcYears=t.utcYear=t.utcWeeks=t.utcWeek=t.utcWednesdays=t.utcWednesday=t.utcTuesdays=t.utcTuesday=t.utcThursdays=t.utcThursday=t.utcSundays=t.utcSunday=t.utcSeconds=t.utcSecond=t.utcSaturdays=t.utcSaturday=t.utcParse=t.utcMonths=t.utcMonth=t.utcMondays=t.utcMonday=t.utcMinutes=t.utcMinute=t.utcMilliseconds=t.utcMillisecond=void 0,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.versor=t.version=void 0,t.window=At,t.zoom=function(){var t,e,n=Yu,a=Uu,r=qu,o=Xu,i=Zu,l=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Qn,d=j("start","zoom","end"),h=500,f=0;function p(t){t.property("__zoom",Gu).on("wheel.zoom",C).on("mousedown.zoom",k).on("dblclick.zoom",w).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new Bu(e,t.x,t.y)}function v(t,e,n){var a=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return a===t.x&&r===t.y?t:new Bu(t.k,a,r)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,e,n){t.on("start.zoom",(function(){b(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).end()})).tween("zoom",(function(){var t=this,r=arguments,o=b(t,r),i=a.apply(t,r),l=null==n?m(i):"function"==typeof n?n.apply(t,r):n,s=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),c=t.__zoom,d="function"==typeof e?e.apply(t,r):e,h=u(c.invert(l).concat(s/c.k),d.invert(l).concat(s/d.k));return function(t){if(1===t)t=d;else{var e=h(t),n=s/e[2];t=new Bu(n,l[0]-e[0]*n,l[1]-e[1]*n)}o.zoom(null,t)}}))}function b(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.extent=a.apply(t,e),this.taps=0}function C(){if(n.apply(this,arguments)){var t=b(this,arguments),e=this.__zoom,a=Math.max(l[0],Math.min(l[1],e.k*Math.pow(2,o.apply(this,arguments)))),i=dt(this);if(t.wheel)t.mouse[0][0]===i[0]&&t.mouse[0][1]===i[1]||(t.mouse[1]=e.invert(t.mouse[0]=i)),clearTimeout(t.wheel);else{if(e.k===a)return;t.mouse=[i,e.invert(i)],Aa(this),t.start()}Vu(),t.wheel=setTimeout(c,150),t.zoom("mouse",r(v(g(e,a),t.mouse[0],t.mouse[1]),t.extent,s))}function c(){t.wheel=null,t.end()}}function k(){if(!e&&n.apply(this,arguments)){var t=b(this,arguments,!0),a=oe(nt.view).on("mousemove.zoom",c,!0).on("mouseup.zoom",u,!0),o=dt(this),i=nt.clientX,l=nt.clientY;ce(nt.view),Wu(),t.mouse=[o,this.__zoom.invert(o)],Aa(this),t.start()}function c(){if(Vu(),!t.moved){var e=nt.clientX-i,n=nt.clientY-l;t.moved=e*e+n*n>f}t.zoom("mouse",r(v(t.that.__zoom,t.mouse[0]=dt(t.that),t.mouse[1]),t.extent,s))}function u(){a.on("mousemove.zoom mouseup.zoom",null),ue(nt.view,t.moved),Vu(),t.end()}}function w(){if(n.apply(this,arguments)){var t=this.__zoom,e=dt(this),o=t.invert(e),i=t.k*(nt.shiftKey?.5:2),l=r(v(g(t,i),e,o),a.apply(this,arguments),s);Vu(),c>0?oe(this).transition().duration(c).call(y,l,e):oe(this).call(p.transform,l)}}function _(){if(n.apply(this,arguments)){var e,a,r,o,i=nt.touches,l=i.length,s=b(this,arguments,nt.changedTouches.length===l);for(Wu(),a=0;a<l;++a)o=[o=ie(this,i,(r=i[a]).identifier),this.__zoom.invert(o),r.identifier],s.touch0?s.touch1||s.touch0[2]===o[2]||(s.touch1=o,s.taps=0):(s.touch0=o,e=!0,s.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(s.taps<2&&(t=setTimeout((function(){t=null}),h)),Aa(this),s.start())}}function S(){if(this.__zooming){var e,n,a,o,i=b(this,arguments),l=nt.changedTouches,c=l.length;for(Vu(),t&&(t=clearTimeout(t)),i.taps=0,e=0;e<c;++e)a=ie(this,l,(n=l[e]).identifier),i.touch0&&i.touch0[2]===n.identifier?i.touch0[0]=a:i.touch1&&i.touch1[2]===n.identifier&&(i.touch1[0]=a);if(n=i.that.__zoom,i.touch1){var u=i.touch0[0],d=i.touch0[1],h=i.touch1[0],f=i.touch1[1],p=(p=h[0]-u[0])*p+(p=h[1]-u[1])*p,m=(m=f[0]-d[0])*m+(m=f[1]-d[1])*m;n=g(n,Math.sqrt(p/m)),a=[(u[0]+h[0])/2,(u[1]+h[1])/2],o=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else{if(!i.touch0)return;a=i.touch0[0],o=i.touch0[1]}i.zoom("touch",r(v(n,a,o),i.extent,s))}}function O(){if(this.__zooming){var t,n,a=b(this,arguments),r=nt.changedTouches,o=r.length;for(Wu(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),h),t=0;t<o;++t)n=r[t],a.touch0&&a.touch0[2]===n.identifier?delete a.touch0:a.touch1&&a.touch1[2]===n.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps){var i=oe(this).on("dblclick.zoom");i&&i.apply(this,arguments)}}}return p.transform=function(t,e,n){var a=t.selection?t.selection():t;a.property("__zoom",Gu),t!==a?y(t,e,n):a.interrupt().each((function(){b(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},p.scaleBy=function(t,e,n){p.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},p.scaleTo=function(t,e,n){p.transform(t,(function(){var t=a.apply(this,arguments),o=this.__zoom,i=null==n?m(t):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(i),c="function"==typeof e?e.apply(this,arguments):e;return r(v(g(o,c),i,l),t,s)}),n)},p.translateBy=function(t,e,n){p.transform(t,(function(){return r(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),a.apply(this,arguments),s)}))},p.translateTo=function(t,e,n,o){p.transform(t,(function(){var t=a.apply(this,arguments),i=this.__zoom,l=null==o?m(t):"function"==typeof o?o.apply(this,arguments):o;return r(Hu.translate(l[0],l[1]).scale(i.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,s)}),o)},x.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){st(new Fu(p,t,this.that.__zoom),d.apply,d,[t,this.that,this.args])}},p.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:ju(+t),p):o},p.filter=function(t){return arguments.length?(n="function"==typeof t?t:ju(!!t),p):n},p.touchable=function(t){return arguments.length?(i="function"==typeof t?t:ju(!!t),p):i},p.extent=function(t){return arguments.length?(a="function"==typeof t?t:ju([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),p):a},p.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],p):[l[0],l[1]]},p.translateExtent=function(t){return arguments.length?(s[0][0]=+t[0][0],s[1][0]=+t[1][0],s[0][1]=+t[0][1],s[1][1]=+t[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(t){return arguments.length?(r=t,p):r},p.duration=function(t){return arguments.length?(c=+t,p):c},p.interpolate=function(t){return arguments.length?(u=t,p):u},p.on=function(){var t=d.on.apply(d,arguments);return t===d?p:t},p.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,p):Math.sqrt(f)},p},t.zoomIdentity=void 0,t.zoomTransform=Nu;var n=e().mark(wo);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){s=!0,i=t},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function l(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,a,r){for(null==a&&(a=0),null==r&&(r=e.length);a<r;){var o=a+r>>>1;t(e[o],n)<0?a=o+1:r=o}return a},right:function(e,n,a,r){for(null==a&&(a=0),null==r&&(r=e.length);a<r;){var o=a+r>>>1;t(e[o],n)>0?r=o:a=o+1}return a}}}var s=l(i),c=t.bisectRight=t.bisect=s.right;t.bisectLeft=s.left;function u(t,e){return[t,e]}function d(t){return null===t?NaN:+t}function h(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var a=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++a<r;)o[a]=t+a*n;return o}var f=Math.sqrt(50),p=Math.sqrt(10),g=Math.sqrt(2);function v(t,e,n){var a,r,o,i,l=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((a=e<t)&&(r=t,t=e,e=r),0===(i=m(t,e,n))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),e=Math.floor(e/i),o=new Array(r=Math.ceil(e-t+1));++l<r;)o[l]=(t+l)*i;else for(t=Math.floor(t*i),e=Math.ceil(e*i),o=new Array(r=Math.ceil(t-e+1));++l<r;)o[l]=(t-l)/i;return a&&o.reverse(),o}function m(t,e,n){var a=(e-t)/Math.max(0,n),r=Math.floor(Math.log(a)/Math.LN10),o=a/Math.pow(10,r);return r>=0?(o>=f?10:o>=p?5:o>=g?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=f?10:o>=p?5:o>=g?2:1)}function y(t,e,n){var a=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),o=a/r;return o>=f?r*=10:o>=p?r*=5:o>=g&&(r*=2),e<t?-r:r}function b(t,e,n){if(null==n&&(n=d),a=t.length){if((e=+e)<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,r=(a-1)*e,o=Math.floor(r),i=+n(t[o],o,t);return i+(+n(t[o+1],o+1,t)-i)*(r-o)}}function x(t){for(var e,n,a,r=t.length,o=-1,i=0;++o<r;)i+=t[o].length;for(n=new Array(i);--r>=0;)for(e=(a=t[r]).length;--e>=0;)n[--i]=a[e];return n}var C="$";function k(){}function w(t,e){var n=new k;if(t instanceof k)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var a,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(a=t[r],r,t),a)}else if(t)for(var i in t)n.set(i,t[i]);return n}function _(){}k.prototype=w.prototype={constructor:k,has:function(t){return C+t in this},get:function(t){return this[C+t]},set:function(t,e){return this[C+t]=e,this},remove:function(t){var e=C+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===C&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===C&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===C&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===C&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===C&&++t;return t},empty:function(){for(var t in this)if(t[0]===C)return!1;return!0},each:function(t){for(var e in this)e[0]===C&&t(this[e],e.slice(1),this)}};var S=w.prototype;function O(t,e){var n=new _;if(t instanceof _)t.each((function(t){n.add(t)}));else if(t){var a=-1,r=t.length;if(null==e)for(;++a<r;)n.add(t[a]);else for(;++a<r;)n.add(e(t[a],a,t))}return n}_.prototype=O.prototype={constructor:_,has:S.has,add:function(t){return this[C+(t+="")]=t,this},remove:S.remove,clear:S.clear,values:S.keys,size:S.size,empty:S.empty,each:S.each};var A=Array.prototype.slice;function T(t){return t}var P=1e-6;function E(t){return"translate("+(t+.5)+",0)"}function L(t){return"translate(0,"+(t+.5)+")"}function M(t){return function(e){return+t(e)}}function D(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function I(){return!this.__axis}function R(t,e){var n=[],a=null,r=null,o=6,i=6,l=3,s=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",u=1===t||3===t?E:L;function d(d){var h=null==a?e.ticks?e.ticks.apply(e,n):e.domain():a,f=null==r?e.tickFormat?e.tickFormat.apply(e,n):T:r,p=Math.max(o,0)+l,g=e.range(),v=+g[0]+.5,m=+g[g.length-1]+.5,y=(e.bandwidth?D:M)(e.copy()),b=d.selection?d.selection():d,x=b.selectAll(".domain").data([null]),C=b.selectAll(".tick").data(h,e).order(),k=C.exit(),w=C.enter().append("g").attr("class","tick"),_=C.select("line"),S=C.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),C=C.merge(w),_=_.merge(w.append("line").attr("stroke","#000").attr(c+"2",s*o)),S=S.merge(w.append("text").attr("fill","#000").attr(c,s*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==b&&(x=x.transition(d),C=C.transition(d),_=_.transition(d),S=S.transition(d),k=k.transition(d).attr("opacity",P).attr("transform",(function(t){return isFinite(t=y(t))?u(t):this.getAttribute("transform")})),w.attr("opacity",P).attr("transform",(function(t){var e=this.parentNode.__axis;return u(e&&isFinite(e=e(t))?e:y(t))}))),k.remove(),x.attr("d",4===t||2==t?"M"+s*i+","+v+"H0.5V"+m+"H"+s*i:"M"+v+","+s*i+"V0.5H"+m+"V"+s*i),C.attr("opacity",1).attr("transform",(function(t){return u(y(t))})),_.attr(c+"2",s*o),S.attr(c,s*p).text(f),b.filter(I).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=y}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=A.call(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:A.call(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(a=null==t?null:A.call(t),d):a&&a.slice()},d.tickFormat=function(t){return arguments.length?(r=t,d):r},d.tickSize=function(t){return arguments.length?(o=i=+t,d):o},d.tickSizeInner=function(t){return arguments.length?(o=+t,d):o},d.tickSizeOuter=function(t){return arguments.length?(i=+t,d):i},d.tickPadding=function(t){return arguments.length?(l=+t,d):l},d}var z={value:function(){}};function j(){for(var t,e=0,n=arguments.length,a={};e<n;++e){if(!(t=arguments[e]+"")||t in a)throw new Error("illegal type: "+t);a[t]=[]}return new F(a)}function F(t){this._=t}function B(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",a=t.indexOf(".");if(a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function H(t,e){for(var n,a=0,r=t.length;a<r;++a)if((n=t[a]).name===e)return n.value}function N(t,e,n){for(var a=0,r=t.length;a<r;++a)if(t[a].name===e){t[a]=z,t=t.slice(0,a).concat(t.slice(a+1));break}return null!=n&&t.push({name:e,value:n}),t}F.prototype=j.prototype={constructor:F,on:function(t,e){var n,a=this._,r=B(t+"",a),o=-1,i=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<i;)if(n=(t=r[o]).type)a[n]=N(a[n],t.name,e);else if(null==e)for(n in a)a[n]=N(a[n],t.name,null);return this}for(;++o<i;)if((n=(t=r[o]).type)&&(n=H(a[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new F(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,a,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(a=this._[t]).length;o<n;++o)a[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var a=this._[t],r=0,o=a.length;r<o;++r)a[r].value.apply(e,n)}};var W="http://www.w3.org/1999/xhtml",V=t.namespaces={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Y(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),V.hasOwnProperty(e)?{space:V[e],local:t}:t}function U(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===W&&e.documentElement.namespaceURI===W?e.createElement(t):e.createElementNS(n,t)}}function G(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function X(t){var e=Y(t);return(e.local?G:U)(e)}var Z=0;function q(){return new $}function $(){this._="@"+(++Z).toString(36)}$.prototype=q.prototype={constructor:$,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Q=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var K=document.documentElement;if(!K.matches){var J=K.webkitMatchesSelector||K.msMatchesSelector||K.mozMatchesSelector||K.oMatchesSelector;Q=function(t){return function(){return J.call(this,t)}}}}var tt=t.matcher=Q,et={},nt=t.event=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(et={mouseenter:"mouseover",mouseleave:"mouseout"}));function at(t,e,n){return t=rt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function rt(e,n,a){return function(r){var o=nt;t.event=nt=r;try{e.call(this,this.__data__,n,a)}finally{t.event=nt=o}}}function ot(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function it(t){return function(){var e=this.__on;if(e){for(var n,a=0,r=-1,o=e.length;a<o;++a)n=e[a],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function lt(t,e,n){var a=et.hasOwnProperty(t.type)?at:rt;return function(r,o,i){var l,s=this.__on,c=a(e,o,i);if(s)for(var u=0,d=s.length;u<d;++u)if((l=s[u]).type===t.type&&l.name===t.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=e);this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function st(e,n,a,r){var o=nt;e.sourceEvent=nt,t.event=nt=e;try{return n.apply(a,r)}finally{t.event=nt=o}}function ct(){for(var t,e=nt;t=e.sourceEvent;)e=t;return e}function ut(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,[(a=a.matrixTransform(t.getScreenCTM().inverse())).x,a.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function dt(t){var e=ct();return e.changedTouches&&(e=e.changedTouches[0]),ut(t,e)}function ht(){}function ft(t){return null==t?ht:function(){return this.querySelector(t)}}function pt(){return[]}function gt(t){return null==t?pt:function(){return this.querySelectorAll(t)}}function vt(t){return new Array(t.length)}function mt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}mt.prototype={constructor:mt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function yt(t,e,n,a,r,o){for(var i,l=0,s=e.length,c=o.length;l<c;++l)(i=e[l])?(i.__data__=o[l],a[l]=i):n[l]=new mt(t,o[l]);for(;l<s;++l)(i=e[l])&&(r[l]=i)}function bt(t,e,n,a,r,o,i){var l,s,c,u={},d=e.length,h=o.length,f=new Array(d);for(l=0;l<d;++l)(s=e[l])&&(f[l]=c="$"+i.call(s,s.__data__,l,e),c in u?r[l]=s:u[c]=s);for(l=0;l<h;++l)(s=u[c="$"+i.call(t,o[l],l,o)])?(a[l]=s,s.__data__=o[l],u[c]=null):n[l]=new mt(t,o[l]);for(l=0;l<d;++l)(s=e[l])&&u[f[l]]===s&&(r[l]=s)}function xt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ct(t){return function(){this.removeAttribute(t)}}function kt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wt(t,e){return function(){this.setAttribute(t,e)}}function _t(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function St(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ot(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function At(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Tt(t){return function(){this.style.removeProperty(t)}}function Pt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Et(t,e,n){return function(){var a=e.apply(this,arguments);null==a?this.style.removeProperty(t):this.style.setProperty(t,a,n)}}function Lt(t,e){return t.style.getPropertyValue(e)||At(t).getComputedStyle(t,null).getPropertyValue(e)}function Mt(t){return function(){delete this[t]}}function Dt(t,e){return function(){this[t]=e}}function It(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Rt(t){return t.trim().split(/^|\s+/)}function zt(t){return t.classList||new jt(t)}function jt(t){this._node=t,this._names=Rt(t.getAttribute("class")||"")}function Ft(t,e){for(var n=zt(t),a=-1,r=e.length;++a<r;)n.add(e[a])}function Bt(t,e){for(var n=zt(t),a=-1,r=e.length;++a<r;)n.remove(e[a])}function Ht(t){return function(){Ft(this,t)}}function Nt(t){return function(){Bt(this,t)}}function Wt(t,e){return function(){(e.apply(this,arguments)?Ft:Bt)(this,t)}}function Vt(){this.textContent=""}function Yt(t){return function(){this.textContent=t}}function Ut(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Gt(){this.innerHTML=""}function Xt(t){return function(){this.innerHTML=t}}function Zt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function qt(){this.nextSibling&&this.parentNode.appendChild(this)}function $t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qt(){return null}function Kt(){var t=this.parentNode;t&&t.removeChild(this)}function Jt(t,e,n){var a=At(t),r=a.CustomEvent;"function"==typeof r?r=new r(e,n):(r=a.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function te(t,e){return function(){return Jt(this,t,e)}}function ee(t,e){return function(){return Jt(this,t,e.apply(this,arguments))}}jt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ne=[null];function ae(t,e){this._groups=t,this._parents=e}function re(){return new ae([[document.documentElement]],ne)}function oe(t){return"string"==typeof t?new ae([[document.querySelector(t)]],[document.documentElement]):new ae([[t]],ne)}function ie(t,e,n){arguments.length<3&&(n=e,e=ct().changedTouches);for(var a,r=0,o=e?e.length:0;r<o;++r)if((a=e[r]).identifier===n)return ut(t,a);return null}function le(){nt.stopImmediatePropagation()}function se(){nt.preventDefault(),nt.stopImmediatePropagation()}function ce(t){var e=t.document.documentElement,n=oe(t).on("dragstart.drag",se,!0);"onselectstart"in e?n.on("selectstart.drag",se,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ue(t,e){var n=t.document.documentElement,a=oe(t).on("dragstart.drag",null);e&&(a.on("click.drag",se,!0),setTimeout((function(){a.on("click.drag",null)}),0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function de(t){return function(){return t}}function he(t,e,n,a,r,o,i,l,s,c){this.target=t,this.type=e,this.subject=n,this.identifier=a,this.active=r,this.x=o,this.y=i,this.dx=l,this.dy=s,this._=c}function fe(){return!nt.button}function pe(){return this.parentNode}function ge(t){return null==t?{x:nt.x,y:nt.y}:t}function ve(){return"ontouchstart"in this}function me(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ye(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function be(){}ae.prototype=re.prototype={constructor:ae,select:function(t){"function"!=typeof t&&(t=ft(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var o,i,l=e[r],s=l.length,c=a[r]=new Array(s),u=0;u<s;++u)(o=l[u])&&(i=t.call(o,o.__data__,u,l))&&("__data__"in o&&(i.__data__=o.__data__),c[u]=i);return new ae(a,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=gt(t));for(var e=this._groups,n=e.length,a=[],r=[],o=0;o<n;++o)for(var i,l=e[o],s=l.length,c=0;c<s;++c)(i=l[c])&&(a.push(t.call(i,i.__data__,c,l)),r.push(i));return new ae(a,r)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var o,i=e[r],l=i.length,s=a[r]=[],c=0;c<l;++c)(o=i[c])&&t.call(o,o.__data__,c,i)&&s.push(o);return new ae(a,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),c=-1,this.each((function(t){f[++c]=t})),f;var n=e?bt:yt,a=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,i=new Array(o),l=new Array(o),s=new Array(o),c=0;c<o;++c){var u=a[c],d=r[c],h=d.length,f=t.call(u,u&&u.__data__,c,a),p=f.length,g=l[c]=new Array(p),v=i[c]=new Array(p);n(u,d,g,v,s[c]=new Array(h),f,e);for(var m,y,b=0,x=0;b<p;++b)if(m=g[b]){for(b>=x&&(x=b+1);!(y=v[x])&&++x<p;);m._next=y||null}}return(i=new ae(i,a))._enter=l,i._exit=s,i},enter:function(){return new ae(this._enter||this._groups.map(vt),this._parents)},exit:function(){return new ae(this._exit||this._groups.map(vt),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,a=e.length,r=n.length,o=Math.min(a,r),i=new Array(a),l=0;l<o;++l)for(var s,c=e[l],u=n[l],d=c.length,h=i[l]=new Array(d),f=0;f<d;++f)(s=c[f]||u[f])&&(h[f]=s);for(;l<a;++l)i[l]=e[l];return new ae(i,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var a,r=t[e],o=r.length-1,i=r[o];--o>=0;)(a=r[o])&&(i&&i!==a.nextSibling&&i.parentNode.insertBefore(a,i),i=a);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=xt);for(var n=this._groups,a=n.length,r=new Array(a),o=0;o<a;++o){for(var i,l=n[o],s=l.length,c=r[o]=new Array(s),u=0;u<s;++u)(i=l[u])&&(c[u]=i);c.sort(e)}return new ae(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],r=0,o=a.length;r<o;++r){var i=a[r];if(i)return i}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var r,o=e[n],i=0,l=o.length;i<l;++i)(r=o[i])&&t.call(r,r.__data__,i,o);return this},attr:function(t,e){var n=Y(t);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((null==e?n.local?kt:Ct:"function"==typeof e?n.local?Ot:St:n.local?_t:wt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Tt:"function"==typeof e?Et:Pt)(t,e,null==n?"":n)):Lt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Mt:"function"==typeof e?It:Dt)(t,e)):this.node()[t]},classed:function(t,e){var n=Rt(t+"");if(arguments.length<2){for(var a=zt(this.node()),r=-1,o=n.length;++r<o;)if(!a.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Wt:e?Ht:Nt)(n,e))},text:function(t){return arguments.length?this.each(null==t?Vt:("function"==typeof t?Ut:Yt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Gt:("function"==typeof t?Zt:Xt)(t)):this.node().innerHTML},raise:function(){return this.each(qt)},lower:function(){return this.each($t)},append:function(t){var e="function"==typeof t?t:X(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:X(t),a=null==e?Qt:"function"==typeof e?e:ft(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)}))},remove:function(){return this.each(Kt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var a,r,o=ot(t+""),i=o.length;if(!(arguments.length<2)){for(l=e?lt:it,null==n&&(n=!1),a=0;a<i;++a)this.each(l(o[a],e,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(a=0,s=l[c];a<i;++a)if((r=o[a]).type===s.type&&r.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?ee:te)(t,e))}},he.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var xe=.7,Ce=1/xe,ke="\\s*([+-]?\\d+)\\s*",we="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Se=/^#([0-9a-f]{3})$/,Oe=/^#([0-9a-f]{6})$/,Ae=new RegExp("^rgb\\("+[ke,ke,ke]+"\\)$"),Te=new RegExp("^rgb\\("+[_e,_e,_e]+"\\)$"),Pe=new RegExp("^rgba\\("+[ke,ke,ke,we]+"\\)$"),Ee=new RegExp("^rgba\\("+[_e,_e,_e,we]+"\\)$"),Le=new RegExp("^hsl\\("+[we,_e,_e]+"\\)$"),Me=new RegExp("^hsla\\("+[we,_e,_e,we]+"\\)$"),De={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ie(t){var e;return t=(t+"").trim().toLowerCase(),(e=Se.exec(t))?new Be((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=Oe.exec(t))?Re(parseInt(e[1],16)):(e=Ae.exec(t))?new Be(e[1],e[2],e[3],1):(e=Te.exec(t))?new Be(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pe.exec(t))?ze(e[1],e[2],e[3],e[4]):(e=Ee.exec(t))?ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Le.exec(t))?He(e[1],e[2]/100,e[3]/100,1):(e=Me.exec(t))?He(e[1],e[2]/100,e[3]/100,e[4]):De.hasOwnProperty(t)?Re(De[t]):"transparent"===t?new Be(NaN,NaN,NaN,0):null}function Re(t){return new Be(t>>16&255,t>>8&255,255&t,1)}function ze(t,e,n,a){return a<=0&&(t=e=n=NaN),new Be(t,e,n,a)}function je(t){return t instanceof be||(t=Ie(t)),t?new Be((t=t.rgb()).r,t.g,t.b,t.opacity):new Be}function Fe(t,e,n,a){return 1===arguments.length?je(t):new Be(t,e,n,null==a?1:a)}function Be(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}function He(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ve(t,e,n,a)}function Ne(t){if(t instanceof Ve)return new Ve(t.h,t.s,t.l,t.opacity);if(t instanceof be||(t=Ie(t)),!t)return new Ve;if(t instanceof Ve)return t;var e=(t=t.rgb()).r/255,n=t.g/255,a=t.b/255,r=Math.min(e,n,a),o=Math.max(e,n,a),i=NaN,l=o-r,s=(o+r)/2;return l?(i=e===o?(n-a)/l+6*(n<a):n===o?(a-e)/l+2:(e-n)/l+4,l/=s<.5?o+r:2-o-r,i*=60):l=s>0&&s<1?0:i,new Ve(i,l,s,t.opacity)}function We(t,e,n,a){return 1===arguments.length?Ne(t):new Ve(t,e,n,null==a?1:a)}function Ve(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}function Ye(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}me(be,Ie,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),me(Be,Fe,ye(be,{brighter:function(t){return t=null==t?Ce:Math.pow(Ce,t),new Be(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?xe:Math.pow(xe,t),new Be(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),me(Ve,We,ye(be,{brighter:function(t){return t=null==t?Ce:Math.pow(Ce,t),new Ve(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?xe:Math.pow(xe,t),new Ve(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,r=2*n-a;return new Be(Ye(t>=240?t-240:t+120,r,a),Ye(t,r,a),Ye(t<120?t+240:t-120,r,a),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ue=Math.PI/180,Ge=180/Math.PI,Xe=.95047,Ze=1.08883,qe=4/29,$e=6/29,Qe=3*$e*$e;function Ke(t){if(t instanceof tn)return new tn(t.l,t.a,t.b,t.opacity);if(t instanceof sn){var e=t.h*Ue;return new tn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Be||(t=je(t));var n=rn(t.r),a=rn(t.g),r=rn(t.b),o=en((.4124564*n+.3575761*a+.1804375*r)/Xe),i=en((.2126729*n+.7151522*a+.072175*r)/1);return new tn(116*i-16,500*(o-i),200*(i-en((.0193339*n+.119192*a+.9503041*r)/Ze)),t.opacity)}function Je(t,e,n,a){return 1===arguments.length?Ke(t):new tn(t,e,n,null==a?1:a)}function tn(t,e,n,a){this.l=+t,this.a=+e,this.b=+n,this.opacity=+a}function en(t){return t>.008856451679035631?Math.pow(t,1/3):t/Qe+qe}function nn(t){return t>$e?t*t*t:Qe*(t-qe)}function an(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function rn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function on(t){if(t instanceof sn)return new sn(t.h,t.c,t.l,t.opacity);t instanceof tn||(t=Ke(t));var e=Math.atan2(t.b,t.a)*Ge;return new sn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ln(t,e,n,a){return 1===arguments.length?on(t):new sn(t,e,n,null==a?1:a)}function sn(t,e,n,a){this.h=+t,this.c=+e,this.l=+n,this.opacity=+a}me(tn,Je,ye(be,{brighter:function(t){return new tn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new tn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=1*nn(t),new Be(an(3.2404542*(e=Xe*nn(e))-1.5371385*t-.4985314*(n=Ze*nn(n))),an(-.969266*e+1.8760108*t+.041556*n),an(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),me(sn,ln,ye(be,{brighter:function(t){return new sn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new sn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ke(this).rgb()}}));var cn=-.14861,un=1.78277,dn=-.29227,hn=-.90649,fn=1.97294,pn=fn*hn,gn=fn*un,vn=un*dn-hn*cn;function mn(t){if(t instanceof bn)return new bn(t.h,t.s,t.l,t.opacity);t instanceof Be||(t=je(t));var e=t.r/255,n=t.g/255,a=t.b/255,r=(vn*a+pn*e-gn*n)/(vn+pn-gn),o=a-r,i=(fn*(n-r)-dn*o)/hn,l=Math.sqrt(i*i+o*o)/(fn*r*(1-r)),s=l?Math.atan2(i,o)*Ge-120:NaN;return new bn(s<0?s+360:s,l,r,t.opacity)}function yn(t,e,n,a){return 1===arguments.length?mn(t):new bn(t,e,n,null==a?1:a)}function bn(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}function xn(t,e,n,a,r){var o=t*t,i=o*t;return((1-3*t+3*o-i)*e+(4-6*o+3*i)*n+(1+3*t+3*o-3*i)*a+i*r)/6}function Cn(t){var e=t.length-1;return function(n){var a=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[a],o=t[a+1],i=a>0?t[a-1]:2*r-o,l=a<e-1?t[a+2]:2*o-r;return xn((n-a/e)*e,i,r,o,l)}}function kn(t){var e=t.length;return function(n){var a=Math.floor(((n%=1)<0?++n:n)*e),r=t[(a+e-1)%e],o=t[a%e],i=t[(a+1)%e],l=t[(a+2)%e];return xn((n-a/e)*e,r,o,i,l)}}function wn(t){return function(){return t}}function _n(t,e){return function(n){return t+n*e}}function Sn(t,e){var n=e-t;return n?_n(t,n>180||n<-180?n-360*Math.round(n/360):n):wn(isNaN(t)?e:t)}function On(t){return 1==(t=+t)?An:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}(e,n,t):wn(isNaN(e)?n:e)}}function An(t,e){var n=e-t;return n?_n(t,n):wn(isNaN(t)?e:t)}me(bn,yn,ye(be,{brighter:function(t){return t=null==t?Ce:Math.pow(Ce,t),new bn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?xe:Math.pow(xe,t),new bn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ue,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),a=Math.cos(t),r=Math.sin(t);return new Be(255*(e+n*(cn*a+un*r)),255*(e+n*(dn*a+hn*r)),255*(e+n*(fn*a)),this.opacity)}}));var Tn=t.interpolateRgb=function t(e){var n=On(e);function a(t,e){var a=n((t=Fe(t)).r,(e=Fe(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),i=An(t.opacity,e.opacity);return function(e){return t.r=a(e),t.g=r(e),t.b=o(e),t.opacity=i(e),t+""}}return a.gamma=t,a}(1);function Pn(t){return function(e){var n,a,r=e.length,o=new Array(r),i=new Array(r),l=new Array(r);for(n=0;n<r;++n)a=Fe(e[n]),o[n]=a.r||0,i[n]=a.g||0,l[n]=a.b||0;return o=t(o),i=t(i),l=t(l),a.opacity=1,function(t){return a.r=o(t),a.g=i(t),a.b=l(t),a+""}}}t.interpolateRgbBasis=Pn(Cn),t.interpolateRgbBasisClosed=Pn(kn);function En(t,e){var n,a=e?e.length:0,r=t?Math.min(a,t.length):0,o=new Array(r),i=new Array(a);for(n=0;n<r;++n)o[n]=jn(t[n],e[n]);for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<r;++n)i[n]=o[n](t);return i}}function Ln(t,e){var n=new Date;return e-=t=+t,function(a){return n.setTime(t+e*a),n}}function Mn(t,e){return e-=t=+t,function(n){return t+e*n}}function Dn(t,e){var n,a={},r={};for(n in null!==t&&"object"===o(t)||(t={}),null!==e&&"object"===o(e)||(e={}),e)n in t?a[n]=jn(t[n],e[n]):r[n]=e[n];return function(t){for(n in a)r[n]=a[n](t);return r}}var In=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rn=new RegExp(In.source,"g");function zn(t,e){var n,a,r,o=In.lastIndex=Rn.lastIndex=0,i=-1,l=[],s=[];for(t+="",e+="";(n=In.exec(t))&&(a=Rn.exec(e));)(r=a.index)>o&&(r=e.slice(o,r),l[i]?l[i]+=r:l[++i]=r),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,s.push({i:i,x:Mn(n,a)})),o=Rn.lastIndex;return o<e.length&&(r=e.slice(o),l[i]?l[i]+=r:l[++i]=r),l.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,a=0;a<e;++a)l[(n=s[a]).i]=n.x(t);return l.join("")})}function jn(t,e){var n,a=o(e);return null==e||"boolean"===a?wn(e):("number"===a?Mn:"string"===a?(n=Ie(e))?(e=n,Tn):zn:e instanceof Ie?Tn:e instanceof Date?Ln:Array.isArray(e)?En:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Dn:Mn)(t,e)}function Fn(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}var Bn,Hn,Nn,Wn,Vn=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Un(t,e,n,a,r,o){var i,l,s;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(s=t*n+e*a)&&(n-=t*s,a-=e*s),(l=Math.sqrt(n*n+a*a))&&(n/=l,a/=l,s/=l),t*a<e*n&&(t=-t,e=-e,s=-s,i=-i),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Vn,skewX:Math.atan(s)*Vn,scaleX:i,scaleY:l}}function Gn(t,e,n,a){function r(t){return t.length?t.pop()+" ":""}return function(o,i){var l=[],s=[];return o=t(o),i=t(i),function(t,a,r,o,i,l){if(t!==r||a!==o){var s=i.push("translate(",null,e,null,n);l.push({i:s-4,x:Mn(t,r)},{i:s-2,x:Mn(a,o)})}else(r||o)&&i.push("translate("+r+e+o+n)}(o.translateX,o.translateY,i.translateX,i.translateY,l,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,a)-2,x:Mn(t,e)})):e&&n.push(r(n)+"rotate("+e+a)}(o.rotate,i.rotate,l,s),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,a)-2,x:Mn(t,e)}):e&&n.push(r(n)+"skewX("+e+a)}(o.skewX,i.skewX,l,s),function(t,e,n,a,o,i){if(t!==n||e!==a){var l=o.push(r(o)+"scale(",null,",",null,")");i.push({i:l-4,x:Mn(t,n)},{i:l-2,x:Mn(e,a)})}else 1===n&&1===a||o.push(r(o)+"scale("+n+","+a+")")}(o.scaleX,o.scaleY,i.scaleX,i.scaleY,l,s),o=i=null,function(t){for(var e,n=-1,a=s.length;++n<a;)l[(e=s[n]).i]=e.x(t);return l.join("")}}}var Xn=t.interpolateTransformCss=Gn((function(t){return"none"===t?Yn:(Bn||(Bn=document.createElement("DIV"),Hn=document.documentElement,Nn=document.defaultView),Bn.style.transform=t,t=Nn.getComputedStyle(Hn.appendChild(Bn),null).getPropertyValue("transform"),Hn.removeChild(Bn),Un(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Zn=t.interpolateTransformSvg=Gn((function(t){return null==t?Yn:(Wn||(Wn=document.createElementNS("http://www.w3.org/2000/svg","g")),Wn.setAttribute("transform",t),(t=Wn.transform.baseVal.consolidate())?Un((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Yn)}),", ",")",")"),qn=Math.SQRT2;function $n(t){return((t=Math.exp(t))+1/t)/2}function Qn(t,e){var n,a,r=t[0],o=t[1],i=t[2],l=e[0],s=e[1],c=e[2],u=l-r,d=s-o,h=u*u+d*d;if(h<1e-12)a=Math.log(c/i)/qn,n=function(t){return[r+t*u,o+t*d,i*Math.exp(qn*t*a)]};else{var f=Math.sqrt(h),p=(c*c-i*i+4*h)/(2*i*2*f),g=(c*c-i*i-4*h)/(2*c*2*f),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);a=(m-v)/qn,n=function(t){var e=t*a,n=$n(v),l=i/(2*f)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(qn*e+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[r+l*u,o+l*d,i*n/$n(qn*e+v)]}}return n.duration=1e3*a,n}function Kn(t){return function(e,n){var a=t((e=We(e)).h,(n=We(n)).h),r=An(e.s,n.s),o=An(e.l,n.l),i=An(e.opacity,n.opacity);return function(t){return e.h=a(t),e.s=r(t),e.l=o(t),e.opacity=i(t),e+""}}}t.interpolateHsl=Kn(Sn),t.interpolateHslLong=Kn(An);function Jn(t){return function(e,n){var a=t((e=ln(e)).h,(n=ln(n)).h),r=An(e.c,n.c),o=An(e.l,n.l),i=An(e.opacity,n.opacity);return function(t){return e.h=a(t),e.c=r(t),e.l=o(t),e.opacity=i(t),e+""}}}t.interpolateHcl=Jn(Sn),t.interpolateHclLong=Jn(An);function ta(t){return function e(n){function a(e,a){var r=t((e=yn(e)).h,(a=yn(a)).h),o=An(e.s,a.s),i=An(e.l,a.l),l=An(e.opacity,a.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=i(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,a.gamma=e,a}(1)}t.interpolateCubehelix=ta(Sn);var ea=t.interpolateCubehelixLong=ta(An);var na,aa,ra=0,oa=0,ia=0,la=0,sa=0,ca=0,ua="object"===("undefined"==typeof performance?"undefined":o(performance))&&performance.now?performance:Date,da="object"===("undefined"==typeof window?"undefined":o(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ha(){return sa||(da(fa),sa=ua.now()+ca)}function fa(){sa=0}function pa(){this._call=this._time=this._next=null}function ga(t,e,n){var a=new pa;return a.restart(t,e,n),a}function va(){ha(),++ra;for(var t,e=na;e;)(t=sa-e._time)>=0&&e._call.call(null,t),e=e._next;--ra}function ma(){sa=(la=ua.now())+ca,ra=oa=0;try{va()}finally{ra=0,function(){var t,e,n=na,a=1/0;for(;n;)n._call?(a>n._time&&(a=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:na=e);aa=t,ba(a)}(),sa=0}}function ya(){var t=ua.now(),e=t-la;e>1e3&&(ca-=e,la=t)}function ba(t){ra||(oa&&(oa=clearTimeout(oa)),t-sa>24?(t<1/0&&(oa=setTimeout(ma,t-ua.now()-ca)),ia&&(ia=clearInterval(ia))):(ia||(la=ua.now(),ia=setInterval(ya,1e3)),ra=1,da(ma)))}function xa(t,e,n){var a=new pa;return e=null==e?0:+e,a.restart((function(n){a.stop(),t(n+e)}),e,n),a}pa.prototype=ga.prototype={constructor:pa,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ha():+n)+(null==e?0:+e),this._next||aa===this||(aa?aa._next=this:na=this,aa=this),this._call=t,this._time=n,ba()},stop:function(){this._call&&(this._call=null,this._time=1/0,ba())}};var Ca=j("start","end","cancel","interrupt"),ka=[];function wa(t,e,n,a,r,o){var i=t.__transition;if(i){if(n in i)return}else t.__transition={};!function(t,e,n){var a,r=t.__transition;function o(t){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}function i(o){var c,u,d,h;if(1!==n.state)return s();for(c in r)if((h=r[c]).name===n.name){if(3===h.state)return xa(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[c])}if(xa((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,a=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(a[++u]=h);a.length=u+1}}function l(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,i=a.length;++o<i;)a[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var a in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=ga(o,0,n.time)}(t,n,{name:e,index:a,group:r,on:Ca,tween:ka,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function _a(t,e){var n=Oa(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Sa(t,e){var n=Oa(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Oa(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Aa(t,e){var n,a,r,o=t.__transition,i=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(a=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):i=!1;i&&delete t.__transition}}function Ta(t,e){var n,a;return function(){var r=Sa(this,t),o=r.tween;if(o!==n)for(var i=0,l=(a=n=o).length;i<l;++i)if(a[i].name===e){(a=a.slice()).splice(i,1);break}r.tween=a}}function Pa(t,e,n){var a,r;if("function"!=typeof n)throw new Error;return function(){var o=Sa(this,t),i=o.tween;if(i!==a){r=(a=i).slice();for(var l={name:e,value:n},s=0,c=r.length;s<c;++s)if(r[s].name===e){r[s]=l;break}s===c&&r.push(l)}o.tween=r}}function Ea(t,e,n){var a=t._id;return t.each((function(){var t=Sa(this,a);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Oa(t,a).value[e]}}function La(t,e){var n;return("number"==typeof e?Mn:e instanceof Ie?Tn:(n=Ie(e))?(e=n,Tn):zn)(t,e)}function Ma(t){return function(){this.removeAttribute(t)}}function Da(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ia(t,e,n){var a,r,o=n+"";return function(){var i=this.getAttribute(t);return i===o?null:i===a?r:r=e(a=i,n)}}function Ra(t,e,n){var a,r,o=n+"";return function(){var i=this.getAttributeNS(t.space,t.local);return i===o?null:i===a?r:r=e(a=i,n)}}function za(t,e,n){var a,r,o;return function(){var i,l,s=n(this);if(null!=s)return(i=this.getAttribute(t))===(l=s+"")?null:i===a&&l===r?o:(r=l,o=e(a=i,s));this.removeAttribute(t)}}function ja(t,e,n){var a,r,o;return function(){var i,l,s=n(this);if(null!=s)return(i=this.getAttributeNS(t.space,t.local))===(l=s+"")?null:i===a&&l===r?o:(r=l,o=e(a=i,s));this.removeAttributeNS(t.space,t.local)}}function Fa(t,e){return function(n){this.setAttribute(t,e(n))}}function Ba(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}function Ha(t,e){var n,a;function r(){var r=e.apply(this,arguments);return r!==a&&(n=(a=r)&&Ba(t,r)),n}return r._value=e,r}function Na(t,e){var n,a;function r(){var r=e.apply(this,arguments);return r!==a&&(n=(a=r)&&Fa(t,r)),n}return r._value=e,r}function Wa(t,e){return function(){_a(this,t).delay=+e.apply(this,arguments)}}function Va(t,e){return e=+e,function(){_a(this,t).delay=e}}function Ya(t,e){return function(){Sa(this,t).duration=+e.apply(this,arguments)}}function Ua(t,e){return e=+e,function(){Sa(this,t).duration=e}}function Ga(t,e){if("function"!=typeof e)throw new Error;return function(){Sa(this,t).ease=e}}function Xa(t,e,n){var a,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?_a:Sa;return function(){var i=o(this,t),l=i.on;l!==a&&(r=(a=l).copy()).on(e,n),i.on=r}}var Za=re.prototype.constructor;function qa(t){return function(){this.style.removeProperty(t)}}function $a(t,e,n){return function(a){this.style.setProperty(t,e(a),n)}}function Qa(t,e,n){var a,r;function o(){var o=e.apply(this,arguments);return o!==r&&(a=(r=o)&&$a(t,o,n)),a}return o._value=e,o}function Ka(t){return function(e){this.textContent=t(e)}}function Ja(t){var e,n;function a(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Ka(a)),e}return a._value=t,a}var tr=0;function er(t,e,n,a){this._groups=t,this._parents=e,this._name=n,this._id=a}function nr(t){return re().transition(t)}function ar(){return++tr}var rr=re.prototype;function or(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}er.prototype=nr.prototype={constructor:er,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ft(t));for(var a=this._groups,r=a.length,o=new Array(r),i=0;i<r;++i)for(var l,s,c=a[i],u=c.length,d=o[i]=new Array(u),h=0;h<u;++h)(l=c[h])&&(s=t.call(l,l.__data__,h,c))&&("__data__"in l&&(s.__data__=l.__data__),d[h]=s,wa(d[h],e,n,h,d,Oa(l,n)));return new er(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=gt(t));for(var a=this._groups,r=a.length,o=[],i=[],l=0;l<r;++l)for(var s,c=a[l],u=c.length,d=0;d<u;++d)if(s=c[d]){for(var h,f=t.call(s,s.__data__,d,c),p=Oa(s,n),g=0,v=f.length;g<v;++g)(h=f[g])&&wa(h,e,n,g,f,p);o.push(f),i.push(s)}return new er(o,i,e,n)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var o,i=e[r],l=i.length,s=a[r]=[],c=0;c<l;++c)(o=i[c])&&t.call(o,o.__data__,c,i)&&s.push(o);return new er(a,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,a=e.length,r=n.length,o=Math.min(a,r),i=new Array(a),l=0;l<o;++l)for(var s,c=e[l],u=n[l],d=c.length,h=i[l]=new Array(d),f=0;f<d;++f)(s=c[f]||u[f])&&(h[f]=s);for(;l<a;++l)i[l]=e[l];return new er(i,this._parents,this._name,this._id)},selection:function(){return new Za(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ar(),a=this._groups,r=a.length,o=0;o<r;++o)for(var i,l=a[o],s=l.length,c=0;c<s;++c)if(i=l[c]){var u=Oa(i,e);wa(i,t,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new er(a,this._parents,t,n)},call:rr.call,nodes:rr.nodes,node:rr.node,size:rr.size,empty:rr.empty,each:rr.each,on:function(t,e){var n=this._id;return arguments.length<2?Oa(this.node(),n).on.on(t):this.each(Xa(n,t,e))},attr:function(t,e){var n=Y(t),a="transform"===n?Zn:La;return this.attrTween(t,"function"==typeof e?(n.local?ja:za)(n,a,Ea(this,"attr."+t,e)):null==e?(n.local?Da:Ma)(n):(n.local?Ra:Ia)(n,a,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var a=Y(t);return this.tween(n,(a.local?Ha:Na)(a,e))},style:function(t,e,n){var a="transform"==(t+="")?Xn:La;return null==e?this.styleTween(t,function(t,e){var n,a,r;return function(){var o=Lt(this,t),i=(this.style.removeProperty(t),Lt(this,t));return o===i?null:o===n&&i===a?r:r=e(n=o,a=i)}}(t,a)).on("end.style."+t,qa(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var a,r,o;return function(){var i=Lt(this,t),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(t),s=l=Lt(this,t)),i===s?null:i===a&&s===r?o:(r=s,o=e(a=i,l))}}(t,a,Ea(this,"style."+t,e))).each(function(t,e){var n,a,r,o,i="style."+e,l="end."+i;return function(){var s=Sa(this,t),c=s.on,u=null==s.value[i]?o||(o=qa(e)):void 0;c===n&&r===u||(a=(n=c).copy()).on(l,r=u),s.on=a}}(this._id,t)):this.styleTween(t,function(t,e,n){var a,r,o=n+"";return function(){var i=Lt(this,t);return i===o?null:i===a?r:r=e(a=i,n)}}(t,a,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var a="style."+(t+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;return this.tween(a,Qa(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ea(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ja(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var a,r=Oa(this.node(),n).tween,o=0,i=r.length;o<i;++o)if((a=r[o]).name===t)return a.value;return null}return this.each((null==e?Ta:Pa)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wa:Va)(e,t)):Oa(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ya:Ua)(e,t)):Oa(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Ga(e,t)):Oa(this.node(),e).ease},end:function(){var t,e,n=this,a=n._id,r=n.size();return new Promise((function(o,i){var l={value:i},s={value:function(){0==--r&&o()}};n.each((function(){var n=Sa(this,a),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),n.on=e}))}))}};t.easePolyIn=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),t.easePolyOut=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),t.easePolyInOut=t.easePoly=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3);var ir=Math.PI,lr=ir/2;var sr=4/11,cr=7.5625;function ur(t){return(t=+t)<sr?cr*t*t:t<.7272727272727273?cr*(t-=.5454545454545454)*t+.75:t<.9090909090909091?cr*(t-=.8181818181818182)*t+.9375:cr*(t-=.9545454545454546)*t+.984375}var dr=1.70158,hr=(t.easeBackIn=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(dr),t.easeBackOut=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(dr),t.easeBackInOut=t.easeBack=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(dr),2*Math.PI),fr=(t.easeElasticIn=function t(e,n){var a=Math.asin(1/(e=Math.max(1,e)))*(n/=hr);function r(t){return e*Math.pow(2,10*--t)*Math.sin((a-t)/n)}return r.amplitude=function(e){return t(e,n*hr)},r.period=function(n){return t(e,n)},r}(1,.3),t.easeElasticOut=t.easeElastic=function t(e,n){var a=Math.asin(1/(e=Math.max(1,e)))*(n/=hr);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+a)/n)}return r.amplitude=function(e){return t(e,n*hr)},r.period=function(n){return t(e,n)},r}(1,.3),t.easeElasticInOut=function t(e,n){var a=Math.asin(1/(e=Math.max(1,e)))*(n/=hr);function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((a-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((a+t)/n))/2}return r.amplitude=function(e){return t(e,n*hr)},r.period=function(n){return t(e,n)},r}(1,.3),{time:null,delay:0,duration:250,ease:or});function pr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return fr.time=ha(),fr;return n}re.prototype.interrupt=function(t){return this.each((function(){Aa(this,t)}))},re.prototype.transition=function(t){var e,n;t instanceof er?(e=t._id,t=t._name):(e=ar(),(n=fr).time=ha(),t=null==t?null:t+"");for(var a=this._groups,r=a.length,o=0;o<r;++o)for(var i,l=a[o],s=l.length,c=0;c<s;++c)(i=l[c])&&wa(i,t,e,c,l,n||pr(i,e));return new er(a,this._parents,t,e)};var gr=[null];function vr(t){return function(){return t}}function mr(t,e,n){this.target=t,this.type=e,this.selection=n}function yr(){nt.stopImmediatePropagation()}function br(){nt.preventDefault(),nt.stopImmediatePropagation()}var xr={name:"drag"},Cr={name:"space"},kr={name:"handle"},wr={name:"center"};function _r(t){return[+t[0],+t[1]]}function Sr(t){return[_r(t[0]),_r(t[1])]}function Or(t){return function(e){return ie(e,nt.touches,t)}}var Ar={name:"x",handles:["w","e"].map(Rr),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Tr={name:"y",handles:["n","s"].map(Rr),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Pr={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Rr),input:function(t){return null==t?null:Sr(t)},output:function(t){return t}},Er={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Mr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Dr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ir={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Rr(t){return{type:t}}function zr(){return!nt.ctrlKey&&!nt.button}function jr(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Fr(){return navigator.maxTouchPoints||"ontouchstart"in this}function Br(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Hr(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Nr(t){var e,n=jr,a=zr,r=Fr,o=!0,i=j("start","brush","end"),l=6;function s(e){var n=e.property("__brush",g).selectAll(".overlay").data([Rr("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Er.overlay).merge(n).each((function(){var t=Br(this).extent;oe(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Rr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Er.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var a=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));a.exit().remove(),a.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Er[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=oe(this),e=Br(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-l/2:e[0][0]-l/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-l/2:e[0][1]-l/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+l:l})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+l:l}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){return!n&&t.__brush.emitter||new d(t,e)}function d(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function h(){if((!e||nt.touches)&&a.apply(this,arguments)){var n,r,i,l,s,d,h,f,p,g,v,m=this,y=nt.target.__data__.type,b="selection"===(o&&nt.metaKey?y="overlay":y)?xr:o&&nt.altKey?wr:kr,x=t===Tr?null:Dr[y],C=t===Ar?null:Ir[y],k=Br(m),w=k.extent,_=k.selection,S=w[0][0],O=w[0][1],A=w[1][0],T=w[1][1],P=0,E=0,L=x&&C&&o&&nt.shiftKey,M=nt.touches?Or(nt.changedTouches[0].identifier):dt,D=M(m),I=D,R=u(m,arguments,!0).beforestart();"overlay"===y?(_&&(p=!0),k.selection=_=[[n=t===Tr?S:D[0],i=t===Ar?O:D[1]],[s=t===Tr?A:n,h=t===Ar?T:i]]):(n=_[0][0],i=_[0][1],s=_[1][0],h=_[1][1]),r=n,l=i,d=s,f=h;var z=oe(m).attr("pointer-events","none"),j=z.selectAll(".overlay").attr("cursor",Er[y]);if(nt.touches)R.moved=B,R.ended=N;else{var F=oe(nt.view).on("mousemove.brush",B,!0).on("mouseup.brush",N,!0);o&&F.on("keydown.brush",W,!0).on("keyup.brush",V,!0),ce(nt.view)}yr(),Aa(m),c.call(m),R.start()}function B(){var t=M(m);!L||g||v||(Math.abs(t[0]-I[0])>Math.abs(t[1]-I[1])?v=!0:g=!0),I=t,p=!0,br(),H()}function H(){var t;switch(P=I[0]-D[0],E=I[1]-D[1],b){case Cr:case xr:x&&(P=Math.max(S-n,Math.min(A-s,P)),r=n+P,d=s+P),C&&(E=Math.max(O-i,Math.min(T-h,E)),l=i+E,f=h+E);break;case kr:x<0?(P=Math.max(S-n,Math.min(A-n,P)),r=n+P,d=s):x>0&&(P=Math.max(S-s,Math.min(A-s,P)),r=n,d=s+P),C<0?(E=Math.max(O-i,Math.min(T-i,E)),l=i+E,f=h):C>0&&(E=Math.max(O-h,Math.min(T-h,E)),l=i,f=h+E);break;case wr:x&&(r=Math.max(S,Math.min(A,n-P*x)),d=Math.max(S,Math.min(A,s+P*x))),C&&(l=Math.max(O,Math.min(T,i-E*C)),f=Math.max(O,Math.min(T,h+E*C)))}d<r&&(x*=-1,t=n,n=s,s=t,t=r,r=d,d=t,y in Lr&&j.attr("cursor",Er[y=Lr[y]])),f<l&&(C*=-1,t=i,i=h,h=t,t=l,l=f,f=t,y in Mr&&j.attr("cursor",Er[y=Mr[y]])),k.selection&&(_=k.selection),g&&(r=_[0][0],d=_[1][0]),v&&(l=_[0][1],f=_[1][1]),_[0][0]===r&&_[0][1]===l&&_[1][0]===d&&_[1][1]===f||(k.selection=[[r,l],[d,f]],c.call(m),R.brush())}function N(){if(yr(),nt.touches){if(nt.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else ue(nt.view,p),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);z.attr("pointer-events","all"),j.attr("cursor",Er.overlay),k.selection&&(_=k.selection),Hr(_)&&(k.selection=null,c.call(m)),R.end()}function W(){switch(nt.keyCode){case 16:L=x&&C;break;case 18:b===kr&&(x&&(s=d-P*x,n=r+P*x),C&&(h=f-E*C,i=l+E*C),b=wr,H());break;case 32:b!==kr&&b!==wr||(x<0?s=d-P:x>0&&(n=r-P),C<0?h=f-E:C>0&&(i=l-E),b=Cr,j.attr("cursor",Er.selection),H());break;default:return}br()}function V(){switch(nt.keyCode){case 16:L&&(g=v=L=!1,H());break;case 18:b===wr&&(x<0?s=d:x>0&&(n=r),C<0?h=f:C>0&&(i=l),b=kr,H());break;case 32:b===Cr&&(nt.altKey?(x&&(s=d-P*x,n=r+P*x),C&&(h=f-E*C,i=l+E*C),b=wr):(x<0?s=d:x>0&&(n=r),C<0?h=f:C>0&&(i=l),b=kr),j.attr("cursor",Er[y]),H());break;default:return}br()}}function f(){u(this,arguments).moved()}function p(){u(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=Sr(n.apply(this,arguments)),e.dim=t,e}return s.move=function(e,n){e.selection?e.on("start.brush",(function(){u(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){u(this,arguments).end()})).tween("brush",(function(){var e=this,a=e.__brush,r=u(e,arguments),o=a.selection,i=t.input("function"==typeof n?n.apply(this,arguments):n,a.extent),l=jn(o,i);function s(t){a.selection=1===t&&null===i?null:l(t),c.call(e),r.brush()}return null!==o&&null!==i?s:s(1)})):e.each((function(){var e=this,a=arguments,r=e.__brush,o=t.input("function"==typeof n?n.apply(e,a):n,r.extent),i=u(e,a).beforestart();Aa(e),r.selection=null===o?null:o,c.call(e),i.start().brush().end()}))},s.clear=function(t){s.move(t,null)},d.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){st(new mr(s,e,t.output(this.state.selection)),i.apply,i,[e,this.that,this.args])}},s.extent=function(t){return arguments.length?(n="function"==typeof t?t:vr(Sr(t)),s):n},s.filter=function(t){return arguments.length?(a="function"==typeof t?t:vr(!!t),s):a},s.touchable=function(t){return arguments.length?(r="function"==typeof t?t:vr(!!t),s):r},s.handleSize=function(t){return arguments.length?(l=+t,s):l},s.keyModifiers=function(t){return arguments.length?(o=!!t,s):o},s.on=function(){var t=i.on.apply(i,arguments);return t===i?s:t},s}var Wr={},Vr={};function Yr(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}function Ur(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function a(t,e){var a,r=[],o=t.length,i=0,l=0,s=o<=0,c=!1;function u(){if(s)return Vr;if(c)return c=!1,Wr;var e,a,r=i;if(34===t.charCodeAt(r)){for(;i++<o&&34!==t.charCodeAt(i)||34===t.charCodeAt(++i););return(e=i)>=o?s=!0:10===(a=t.charCodeAt(i++))?c=!0:13===a&&(c=!0,10===t.charCodeAt(i)&&++i),t.slice(r+1,e-1).replace(/""/g,'"')}for(;i<o;){if(10===(a=t.charCodeAt(e=i++)))c=!0;else if(13===a)c=!0,10===t.charCodeAt(i)&&++i;else if(a!==n)continue;return t.slice(r,e)}return s=!0,t.slice(r,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(a=u())!==Vr;){for(var d=[];a!==Wr&&a!==Vr;)d.push(a),a=u();e&&null==(d=e(d,l++))||r.push(d)}return r}function r(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=a(t,(function(t,a){if(n)return n(t,a-1);r=t,n=e?function(t,e){var n=Yr(t);return function(a,r){return e(n(a),r,t)}}(t,e):Yr(t)}));return o.columns=r||[],o},parseRows:a,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var a in t)a in e||n.push(e[a]=a)})),n}(e)),[n.map(o).join(t)].concat(e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))).join("\n")},formatRows:function(t){return t.map(r).join("\n")}}}var Gr=Ur(",");t.csvParse=Gr.parse,t.csvParseRows=Gr.parseRows,Ur("\t");function Xr(t,e){var n,a,r,o,i=j("beforesend","progress","load","error"),l=w(),s=new XMLHttpRequest,c=null,u=null,d=0;function h(t){var e,a=s.status;if(!a&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(s)||a>=200&&a<300||304===a){if(r)try{e=r.call(n,s)}catch(t){return void i.call("error",n,t)}else e=s;i.call("load",n,e)}else i.call("error",n,t)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in s)&&/^(http(s)?:)?\/\//.test(t)&&(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=s.ontimeout=h:s.onreadystatechange=function(t){s.readyState>3&&h(t)},s.onprogress=function(t){i.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),n)},mimeType:function(t){return arguments.length?(a=null==t?null:t+"",n):a},responseType:function(t){return arguments.length?(o=t,n):o},timeout:function(t){return arguments.length?(d=+t,n):d},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},password:function(t){return arguments.length<1?u:(u=null==t?null:t+"",n)},response:function(t){return r=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,r,h){return s.open(e,t,!0,c,u),null==a||l.has("accept")||l.set("accept",a+",*/*"),s.setRequestHeader&&l.each((function(t,e){s.setRequestHeader(e,t)})),null!=a&&s.overrideMimeType&&s.overrideMimeType(a),null!=o&&(s.responseType=o),d>0&&(s.timeout=d),null==h&&"function"==typeof r&&(h=r,r=null),null!=h&&1===h.length&&(h=function(t){return function(e,n){t(null==e?n:null)}}(h)),null!=h&&n.on("error",h).on("load",(function(t){h(null,t)})),i.call("beforesend",n,s),s.send(null==r?null:r),n},abort:function(){return s.abort(),n},on:function(){var t=i.on.apply(i,arguments);return t===i?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n}var Zr,qr,$r;t.json=(Zr="application/json",qr=function(t){return JSON.parse(t.responseText)},function(t,e){var n=Xr(t).mimeType(Zr).response(qr);if(null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n});function Qr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function Kr(t){return(t=Qr(Math.abs(t)))?t[1]:NaN}function Jr(t,e){var n=Qr(t,e);if(!n)return t+"";var a=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+a:a.length>r+1?a.slice(0,r+1)+"."+a.slice(r+1):a+new Array(r-a.length+2).join("0")}var to={"":function(t,e){t:for(var n,a=(t=t.toPrecision(e)).length,r=1,o=-1;r<a;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Jr(100*t,e)},r:Jr,s:function(t,e){var n=Qr(t,e);if(!n)return t+"";var a=n[0],r=n[1],o=r-($r=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,i=a.length;return o===i?a:o>i?a+new Array(o-i+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+Qr(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},eo=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function no(t){return new ao(t)}function ao(t){if(!(e=eo.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",a=e[2]||">",r=e[3]||"-",o=e[4]||"",i=!!e[5],l=e[6]&&+e[6],s=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";"n"===u?(s=!0,u="g"):to[u]||(u=""),(i||"0"===n&&"="===a)&&(i=!0,n="0",a="="),this.fill=n,this.align=a,this.sign=r,this.symbol=o,this.zero=i,this.width=l,this.comma=s,this.precision=c,this.type=u}function ro(t){return t}no.prototype=ao.prototype,ao.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var oo,io,lo,so,co,uo,ho,fo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function po(t){var e,n,a=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,a){for(var r=t.length,o=[],i=0,l=e[0],s=0;r>0&&l>0&&(s+l+1>a&&(l=Math.max(1,a-s)),o.push(t.substring(r-=l,r+l)),!((s+=l+1)>a));)l=e[i=(i+1)%e.length];return o.reverse().join(n)}):ro,r=t.currency,o=t.decimal,i=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(t.numerals):ro,l=t.percent||"%";function s(t){var e=(t=no(t)).fill,n=t.align,s=t.sign,c=t.symbol,u=t.zero,d=t.width,h=t.comma,f=t.precision,p=t.type,g="$"===c?r[0]:"#"===c&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",v="$"===c?r[1]:/[%p]/.test(p)?l:"",m=to[p],y=!p||/[defgprs%]/.test(p);function b(t){var r,l,c,b=g,x=v;if("c"===p)x=m(t)+x,t="";else{var C=(t=+t)<0;if(t=m(Math.abs(t),f),C&&0==+t&&(C=!1),b=(C?"("===s?s:"-":"-"===s||"("===s?"":s)+b,x=x+("s"===p?fo[8+$r/3]:"")+(C&&"("===s?")":""),y)for(r=-1,l=t.length;++r<l;)if(48>(c=t.charCodeAt(r))||c>57){x=(46===c?o+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}h&&!u&&(t=a(t,1/0));var k=b.length+t.length+x.length,w=k<d?new Array(d-k+1).join(e):"";switch(h&&u&&(t=a(w+t,w.length?d-x.length:1/0),w=""),n){case"<":t=b+t+x+w;break;case"=":t=b+w+t+x;break;case"^":t=w.slice(0,k=w.length>>1)+b+t+x+w.slice(k);break;default:t=w+b+t+x}return i(t)}return f=null==f?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),b.toString=function(){return t+""},b}return{format:s,formatPrefix:function(t,e){var n=s(((t=no(t)).type="f",t)),a=3*Math.max(-8,Math.min(8,Math.floor(Kr(e)/3))),r=Math.pow(10,-a),o=fo[8+a/3];return function(t){return n(r*t)+o}}}}function go(e){return oo=po(e),t.format=io=oo.format,t.formatPrefix=lo=oo.formatPrefix,oo}function vo(t){return Math.max(0,-Kr(Math.abs(t)))}function mo(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Kr(e)/3)))-Kr(Math.abs(t)))}function yo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Kr(e)-Kr(t))+1}function bo(t,e){return t.parent===e.parent?1:2}function xo(t,e){return t+e.x}function Co(t,e){return Math.max(t,e.y)}function ko(t){var e=0,n=t.children,a=n&&n.length;if(a)for(;--a>=0;)e+=n[a].value;else e=1;t.value=e}function wo(){var t,a,r,o,i,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[t=this];case 1:a=r.reverse(),r=[];case 2:if(!(t=a.pop())){e.next=8;break}return e.next=5,t;case 5:if(o=t.children)for(i=0,l=o.length;i<l;++i)r.push(o[i]);e.next=2;break;case 8:if(r.length){e.next=1;break}case 9:case"end":return e.stop()}}),n,this)}function _o(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Oo)):void 0===e&&(e=So);for(var n,a,r,o,i,l=new Po(t),s=[l];n=s.pop();)if((r=e(n.data))&&(i=(r=Array.from(r)).length))for(n.children=r,o=i-1;o>=0;--o)s.push(a=r[o]=new Po(r[o])),a.parent=n,a.depth=n.depth+1;return l.eachBefore(To)}function So(t){return t.children}function Oo(t){return Array.isArray(t)?t[1]:null}function Ao(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function To(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Po(t){this.data=t,this.depth=this.height=0,this.parent=null}function Eo(t){return null==t?null:Lo(t)}function Lo(t){if("function"!=typeof t)throw new Error;return t}function Mo(){return 0}function Do(t){return function(){return t}}go({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Po.prototype=_o.prototype=(so={constructor:Po,count:function(){return this.eachAfter(ko)},each:function(t,e){var n,r=-1,o=a(this);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.call(e,i,++r,this)}}catch(t){o.e(t)}finally{o.f()}return this},eachAfter:function(t,e){for(var n,a,r,o=this,i=[o],l=[],s=-1;o=i.pop();)if(l.push(o),n=o.children)for(a=0,r=n.length;a<r;++a)i.push(n[a]);for(;o=l.pop();)t.call(e,o,++s,this);return this},eachBefore:function(t,e){for(var n,a,r=this,o=[r],i=-1;r=o.pop();)if(t.call(e,r,++i,this),n=r.children)for(a=n.length-1;a>=0;--a)o.push(n[a]);return this},find:function(t,e){var n,r=-1,o=a(this);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(t.call(e,i,++r,this))return i}}catch(t){o.e(t)}finally{o.f()}},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,a=e.children,r=a&&a.length;--r>=0;)n+=a[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),a=e.ancestors(),r=null;for(t=n.pop(),e=a.pop();t===e;)r=t,t=n.pop(),e=a.pop();return r}(e,t),a=[e];e!==n;)e=e.parent,a.push(e);for(var r=a.length;t!==n;)a.splice(r,0,t),t=t.parent;return a},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return _o(this).eachBefore(Ao)}},co=Symbol.iterator,uo=wo,ho=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(co,"string"),(co="symbol"==o(ho)?ho:String(ho))in so?Object.defineProperty(so,co,{value:uo,enumerable:!0,configurable:!0,writable:!0}):so[co]=uo,so);var Io=4294967296;function Ro(){var t=1;return function(){return(t=(1664525*t+1013904223)%Io)/Io}}function zo(t,e){for(var n,a,r=0,o=(t=function(t,e){for(var n,a,r=t.length;r;)a=e()*r--|0,n=t[r],t[r]=t[a],t[a]=n;return t}(Array.from(t),e)).length,i=[];r<o;)n=t[r],a&&Bo(a,n)?++r:(a=No(i=jo(i,n)),r=0);return a}function jo(t,e){var n,a;if(Ho(e,t))return[e];for(n=0;n<t.length;++n)if(Fo(e,t[n])&&Ho(Wo(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(a=n+1;a<t.length;++a)if(Fo(Wo(t[n],t[a]),e)&&Fo(Wo(t[n],e),t[a])&&Fo(Wo(t[a],e),t[n])&&Ho(Vo(t[n],t[a],e),t))return[t[n],t[a],e];throw new Error}function Fo(t,e){var n=t.r-e.r,a=e.x-t.x,r=e.y-t.y;return n<0||n*n<a*a+r*r}function Bo(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),a=e.x-t.x,r=e.y-t.y;return n>0&&n*n>a*a+r*r}function Ho(t,e){for(var n=0;n<e.length;++n)if(!Bo(t,e[n]))return!1;return!0}function No(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Wo(t[0],t[1]);case 3:return Vo(t[0],t[1],t[2])}}function Wo(t,e){var n=t.x,a=t.y,r=t.r,o=e.x,i=e.y,l=e.r,s=o-n,c=i-a,u=l-r,d=Math.sqrt(s*s+c*c);return{x:(n+o+s/d*u)/2,y:(a+i+c/d*u)/2,r:(d+r+l)/2}}function Vo(t,e,n){var a=t.x,r=t.y,o=t.r,i=e.x,l=e.y,s=e.r,c=n.x,u=n.y,d=n.r,h=a-i,f=a-c,p=r-l,g=r-u,v=s-o,m=d-o,y=a*a+r*r-o*o,b=y-i*i-l*l+s*s,x=y-c*c-u*u+d*d,C=f*p-h*g,k=(p*x-g*b)/(2*C)-a,w=(g*v-p*m)/C,_=(f*b-h*x)/(2*C)-r,S=(h*m-f*v)/C,O=w*w+S*S-1,A=2*(o+k*w+_*S),T=k*k+_*_-o*o,P=-(Math.abs(O)>1e-6?(A+Math.sqrt(A*A-4*O*T))/(2*O):T/A);return{x:a+k+w*P,y:r+_+S*P,r:P}}function Yo(t,e,n){var a,r,o,i,l=t.x-e.x,s=t.y-e.y,c=l*l+s*s;c?(r=e.r+n.r,r*=r,i=t.r+n.r,r>(i*=i)?(a=(c+i-r)/(2*c),o=Math.sqrt(Math.max(0,i/c-a*a)),n.x=t.x-a*l-o*s,n.y=t.y-a*s+o*l):(a=(c+r-i)/(2*c),o=Math.sqrt(Math.max(0,r/c-a*a)),n.x=e.x+a*l-o*s,n.y=e.y+a*s+o*l)):(n.x=e.x+n.r,n.y=e.y)}function Uo(t,e){var n=t.r+e.r-1e-6,a=e.x-t.x,r=e.y-t.y;return n>0&&n*n>a*a+r*r}function Go(t){var e=t._,n=t.next._,a=e.r+n.r,r=(e.x*n.r+n.x*e.r)/a,o=(e.y*n.r+n.y*e.r)/a;return r*r+o*o}function Xo(t){this._=t,this.next=null,this.previous=null}function Zo(t,e){if(!(i=(t=function(t){return"object"===o(t)&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,a,r,i,l,s,c,u,d,h,f;if((n=t[0]).x=0,n.y=0,!(i>1))return n.r;if(a=t[1],n.x=-a.r,a.x=n.r,a.y=0,!(i>2))return n.r+a.r;Yo(a,n,r=t[2]),n=new Xo(n),a=new Xo(a),r=new Xo(r),n.next=r.previous=a,a.next=n.previous=r,r.next=a.previous=n;t:for(c=3;c<i;++c){Yo(n._,a._,r=t[c]),r=new Xo(r),u=a.next,d=n.previous,h=a._.r,f=n._.r;do{if(h<=f){if(Uo(u._,r._)){a=u,n.next=a,a.previous=n,--c;continue t}h+=u._.r,u=u.next}else{if(Uo(d._,r._)){(n=d).next=a,a.previous=n,--c;continue t}f+=d._.r,d=d.previous}}while(u!==d.next);for(r.previous=n,r.next=a,n.next=a.previous=a=r,l=Go(n);(r=r.next)!==a;)(s=Go(r))<l&&(n=r,l=s);a=n.next}for(n=[a._],r=a;(r=r.next)!==a;)n.push(r._);for(r=zo(n,e),c=0;c<i;++c)(n=t[c]).x-=r.x,n.y-=r.y;return r.r}function qo(t){return Math.sqrt(t.value)}function $o(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Qo(t,e,n){return function(a){if(r=a.children){var r,o,i,l=r.length,s=t(a)*e||0;if(s)for(o=0;o<l;++o)r[o].r+=s;if(i=Zo(r,n),s)for(o=0;o<l;++o)r[o].r-=s;a.r=i+s}}}function Ko(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Jo(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ti(t,e,n,a,r){for(var o,i=t.children,l=-1,s=i.length,c=t.value&&(a-e)/t.value;++l<s;)(o=i[l]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*c}var ei={depth:-1},ni={},ai={};function ri(t){return t.id}function oi(t){return t.parentId}function ii(t){var e=t.length;if(e<2)return"";for(;--e>1&&!li(t,e););return t.slice(0,e)}function li(t,e){if("/"===t[e]){for(var n=0;e>0&&"\\"===t[--e];)++n;if(0==(1&n))return!0}return!1}function si(t,e){return t.parent===e.parent?1:2}function ci(t){var e=t.children;return e?e[0]:t.t}function ui(t){var e=t.children;return e?e[e.length-1]:t.t}function di(t,e,n){var a=n/(e.i-t.i);e.c-=a,e.s+=n,t.c+=a,e.z+=n,e.m+=n}function hi(t,e,n){return t.a.parent===e.parent?t.a:n}function fi(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function pi(t,e,n,a,r){for(var o,i=t.children,l=-1,s=i.length,c=t.value&&(r-n)/t.value;++l<s;)(o=i[l]).x0=e,o.x1=a,o.y0=n,o.y1=n+=o.value*c}fi.prototype=Object.create(Po.prototype);var gi=(1+Math.sqrt(5))/2;function vi(t,e,n,a,r,o){for(var i,l,s,c,u,d,h,f,p,g,v,m=[],y=e.children,b=0,x=0,C=y.length,k=e.value;b<C;){s=r-n,c=o-a;do{u=y[x++].value}while(!u&&x<C);for(d=h=u,v=u*u*(g=Math.max(c/s,s/c)/(k*t)),p=Math.max(h/v,v/d);x<C;++x){if(u+=l=y[x].value,l<d&&(d=l),l>h&&(h=l),v=u*u*g,(f=Math.max(h/v,v/d))>p){u-=l;break}p=f}m.push(i={value:u,dice:s<c,children:y.slice(b,x)}),i.dice?ti(i,n,a,r,k?a+=c*u/k:o):pi(i,n,a,k?n+=s*u/k:r,o),k-=u,b=x}return m}var mi=t.treemapSquarify=function t(e){function n(t,n,a,r,o){vi(e,t,n,a,r,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(gi);t.treemapResquarify=function t(e){function n(t,n,a,r,o){if((i=t._squarify)&&i.ratio===e)for(var i,l,s,c,u,d=-1,h=i.length,f=t.value;++d<h;){for(s=(l=i[d]).children,c=l.value=0,u=s.length;c<u;++c)l.value+=s[c].value;l.dice?ti(l,n,a,r,f?a+=(o-a)*l.value/f:o):pi(l,n,a,f?n+=(r-n)*l.value/f:r,o),f-=l.value}else t._squarify=i=vi(e,t,n,a,r,o),i.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(gi);var yi=Math.PI,bi=2*yi,xi=1e-6,Ci=bi-xi;function ki(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function wi(){return new ki}ki.prototype=wi.prototype={constructor:ki,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,a){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+a)},bezierCurveTo:function(t,e,n,a,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +a+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,a,r){t=+t,e=+e,n=+n,a=+a,r=+r;var o=this._x1,i=this._y1,l=n-t,s=a-e,c=o-t,u=i-e,d=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>xi)if(Math.abs(u*l-s*c)>xi&&r){var h=n-o,f=a-i,p=l*l+s*s,g=h*h+f*f,v=Math.sqrt(p),m=Math.sqrt(d),y=r*Math.tan((yi-Math.acos((p+d-g)/(2*v*m)))/2),b=y/m,x=y/v;Math.abs(b-1)>xi&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+r+","+r+",0,0,"+ +(u*h>c*f)+","+(this._x1=t+x*l)+","+(this._y1=e+x*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,a,r,o){t=+t,e=+e;var i=(n=+n)*Math.cos(a),l=n*Math.sin(a),s=t+i,c=e+l,u=1^o,d=o?a-r:r-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>xi||Math.abs(this._y1-c)>xi)&&(this._+="L"+s+","+c),n&&(d<0&&(d=d%bi+bi),d>Ci?this._+="A"+n+","+n+",0,1,"+u+","+(t-i)+","+(e-l)+"A"+n+","+n+",0,1,"+u+","+(this._x1=s)+","+(this._y1=c):d>xi&&(this._+="A"+n+","+n+",0,"+ +(d>=yi)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,a){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +a+"h"+-n+"Z"},toString:function(){return this._}};var _i=Array.prototype,Si=_i.map,Oi=_i.slice,Ai={name:"implicit"};function Ti(t){var e=w(),n=[],a=Ai;function r(r){var o=r+"",i=e.get(o);if(!i){if(a!==Ai)return a;e.set(o,i=n.push(r))}return t[(i-1)%t.length]}return t=null==t?[]:Oi.call(t),r.domain=function(t){if(!arguments.length)return n.slice();n=[],e=w();for(var a,o,i=-1,l=t.length;++i<l;)e.has(o=(a=t[i])+"")||e.set(o,n.push(a));return r},r.range=function(e){return arguments.length?(t=Oi.call(e),r):t.slice()},r.unknown=function(t){return arguments.length?(a=t,r):a},r.copy=function(){return Ti().domain(n).range(t).unknown(a)},r}function Pi(){var t,e,n=Ti().unknown(void 0),a=n.domain,r=n.range,o=[0,1],i=!1,l=0,s=0,c=.5;function u(){var n=a().length,u=o[1]<o[0],d=o[u-0],f=o[1-u];t=(f-d)/Math.max(1,n-l+2*s),i&&(t=Math.floor(t)),d+=(f-d-t*(n-l))*c,e=t*(1-l),i&&(d=Math.round(d),e=Math.round(e));var p=h(n).map((function(e){return d+t*e}));return r(u?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(a(t),u()):a()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],u()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],i=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(i=!!t,u()):i},n.padding=function(t){return arguments.length?(l=s=Math.max(0,Math.min(1,t)),u()):l},n.paddingInner=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),u()):l},n.paddingOuter=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),u()):s},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u()):c},n.copy=function(){return Pi().domain(a()).range(o).round(i).paddingInner(l).paddingOuter(s).align(c)},u()}function Ei(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ei(e())},t}function Li(t){return+t}var Mi=[0,1];function Di(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(e)}function Ii(t,e,n,a){var r=t[0],o=t[1],i=e[0],l=e[1];return o<r?(r=n(o,r),i=a(l,i)):(r=n(r,o),i=a(i,l)),function(t){return i(r(t))}}function Ri(t,e,n,a){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)o[l]=n(t[l],t[l+1]),i[l]=a(e[l],e[l+1]);return function(e){var n=c(t,e,1,r)-1;return i[n](o[n](e))}}function zi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function ji(t,e){var n,a,r,o=Mi,i=Mi,l=jn,s=!1;function c(){return n=Math.min(o.length,i.length)>2?Ri:Ii,a=r=null,u}function u(e){return(a||(a=n(o,i,s?function(t){return function(e,n){var a=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:a(t)}}}(t):t,l)))(+e)}return u.invert=function(t){return(r||(r=n(i,o,Di,s?function(t){return function(e,n){var a=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:a(t)}}}(e):e)))(+t)},u.domain=function(t){return arguments.length?(o=Si.call(t,Li),c()):o.slice()},u.range=function(t){return arguments.length?(i=Oi.call(t),c()):i.slice()},u.rangeRound=function(t){return i=Oi.call(t),l=Fn,c()},u.clamp=function(t){return arguments.length?(s=!!t,c()):s},u.interpolate=function(t){return arguments.length?(l=t,c()):l},c()}var Fi=new Date,Bi=new Date;function Hi(t,e,n,a){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,a,o){var i,l=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<a&&o>0))return l;do{l.push(i=new Date(+n)),e(n,o),t(n)}while(i<n&&n<a);return l},r.filter=function(n){return Hi((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,a){if(t>=t)if(a<0)for(;++a<=0;)for(;e(t,-1),!n(t););else for(;--a>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,a){return Fi.setTime(+e),Bi.setTime(+a),t(Fi),t(Bi),Math.floor(n(Fi,Bi))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(a?function(e){return a(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Ni=t.utcMillisecond=t.timeMillisecond=Hi((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Ni.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Hi((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Ni:null};t.utcMilliseconds=t.timeMilliseconds=Ni.range;var Wi=1e3,Vi=6e4,Yi=36e5,Ui=864e5,Gi=6048e5,Xi=t.utcSecond=t.timeSecond=Hi((function(t){t.setTime(Math.floor(t/Wi)*Wi)}),(function(t,e){t.setTime(+t+e*Wi)}),(function(t,e){return(e-t)/Wi}),(function(t){return t.getUTCSeconds()})),Zi=(t.utcSeconds=t.timeSeconds=Xi.range,t.timeMinute=Hi((function(t){t.setTime(Math.floor(t/Vi)*Vi)}),(function(t,e){t.setTime(+t+e*Vi)}),(function(t,e){return(e-t)/Vi}),(function(t){return t.getMinutes()}))),qi=(t.timeMinutes=Zi.range,t.timeHour=Hi((function(t){var e=t.getTimezoneOffset()*Vi%Yi;e<0&&(e+=Yi),t.setTime(Math.floor((+t-e)/Yi)*Yi+e)}),(function(t,e){t.setTime(+t+e*Yi)}),(function(t,e){return(e-t)/Yi}),(function(t){return t.getHours()}))),$i=(t.timeHours=qi.range,t.timeDay=Hi((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vi)/Ui}),(function(t){return t.getDate()-1})));t.timeDays=$i.range;function Qi(t){return Hi((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vi)/Gi}))}var Ki=t.timeSunday=t.timeWeek=Qi(0),Ji=t.timeMonday=Qi(1),tl=t.timeTuesday=Qi(2),el=t.timeWednesday=Qi(3),nl=t.timeThursday=Qi(4),al=t.timeFriday=Qi(5),rl=t.timeSaturday=Qi(6),ol=(t.timeSundays=t.timeWeeks=Ki.range,t.timeMondays=Ji.range,t.timeTuesdays=tl.range,t.timeWednesdays=el.range,t.timeThursdays=nl.range,t.timeFridays=al.range,t.timeSaturdays=rl.range,t.timeMonth=Hi((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),il=(t.timeMonths=ol.range,t.timeYear=Hi((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));il.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Hi((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};t.timeYears=il.range;var ll=t.utcMinute=Hi((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Vi)}),(function(t,e){return(e-t)/Vi}),(function(t){return t.getUTCMinutes()})),sl=(t.utcMinutes=ll.range,t.utcHour=Hi((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Yi)}),(function(t,e){return(e-t)/Yi}),(function(t){return t.getUTCHours()}))),cl=(t.utcHours=sl.range,t.utcDay=Hi((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Ui}),(function(t){return t.getUTCDate()-1})));t.utcDays=cl.range;function ul(t){return Hi((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Gi}))}var dl=t.utcSunday=t.utcWeek=ul(0),hl=t.utcMonday=ul(1),fl=t.utcTuesday=ul(2),pl=t.utcWednesday=ul(3),gl=t.utcThursday=ul(4),vl=t.utcFriday=ul(5),ml=t.utcSaturday=ul(6),yl=(t.utcSundays=t.utcWeeks=dl.range,t.utcMondays=hl.range,t.utcTuesdays=fl.range,t.utcWednesdays=pl.range,t.utcThursdays=gl.range,t.utcFridays=vl.range,t.utcSaturdays=ml.range,t.utcMonth=Hi((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),bl=(t.utcMonths=yl.range,t.utcYear=Hi((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));bl.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Hi((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};t.utcYears=bl.range;function xl(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Cl(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kl(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function wl(t){var e=t.dateTime,n=t.date,a=t.time,r=t.periods,o=t.days,i=t.shortDays,l=t.months,s=t.shortMonths,c=Il(r),u=Rl(r),d=Il(o),h=Rl(o),f=Il(i),p=Rl(i),g=Il(l),v=Rl(l),m=Il(s),y=Rl(s),b={a:function(t){return i[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:es,e:es,f:is,H:ns,I:as,j:rs,L:os,m:ls,M:ss,p:function(t){return r[+(t.getHours()>=12)]},Q:zs,s:js,S:cs,u:us,U:ds,V:hs,w:fs,W:ps,x:null,X:null,y:gs,Y:vs,Z:ms,"%":Rs},x={a:function(t){return i[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:ys,e:ys,f:ws,H:bs,I:xs,j:Cs,L:ks,m:_s,M:Ss,p:function(t){return r[+(t.getUTCHours()>=12)]},Q:zs,s:js,S:Os,u:As,U:Ts,V:Ps,w:Es,W:Ls,x:null,X:null,y:Ms,Y:Ds,Z:Is,"%":Rs},C={a:function(t,e,n){var a=f.exec(e.slice(n));return a?(t.w=p[a[0].toLowerCase()],n+a[0].length):-1},A:function(t,e,n){var a=d.exec(e.slice(n));return a?(t.w=h[a[0].toLowerCase()],n+a[0].length):-1},b:function(t,e,n){var a=m.exec(e.slice(n));return a?(t.m=y[a[0].toLowerCase()],n+a[0].length):-1},B:function(t,e,n){var a=g.exec(e.slice(n));return a?(t.m=v[a[0].toLowerCase()],n+a[0].length):-1},c:function(t,n,a){return _(t,e,n,a)},d:Ul,e:Ul,f:Ql,H:Xl,I:Xl,j:Gl,L:$l,m:Yl,M:Zl,p:function(t,e,n){var a=c.exec(e.slice(n));return a?(t.p=u[a[0].toLowerCase()],n+a[0].length):-1},Q:Jl,s:ts,S:ql,u:jl,U:Fl,V:Bl,w:zl,W:Hl,x:function(t,e,a){return _(t,n,e,a)},X:function(t,e,n){return _(t,a,e,n)},y:Wl,Y:Nl,Z:Vl,"%":Kl};function k(t,e){return function(n){var a,r,o,i=[],l=-1,s=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===t.charCodeAt(l)&&(i.push(t.slice(s,l)),null!=(r=Tl[a=t.charAt(++l)])?a=t.charAt(++l):r="e"===a?" ":"0",(o=e[a])&&(a=o(n,r)),i.push(a),s=l+1);return i.push(t.slice(s,l)),i.join("")}}function w(t,e){return function(n){var a,r,o=kl(1900);if(_(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(a=Cl(kl(o.y))).getUTCDay(),a=r>4||0===r?hl.ceil(a):hl(a),a=cl.offset(a,7*(o.V-1)),o.y=a.getUTCFullYear(),o.m=a.getUTCMonth(),o.d=a.getUTCDate()+(o.w+6)%7):(r=(a=e(kl(o.y))).getDay(),a=r>4||0===r?Ji.ceil(a):Ji(a),a=$i.offset(a,7*(o.V-1)),o.y=a.getFullYear(),o.m=a.getMonth(),o.d=a.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?Cl(kl(o.y)).getUTCDay():e(kl(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Cl(o)):e(o)}}function _(t,e,n,a){for(var r,o,i=0,l=e.length,s=n.length;i<l;){if(a>=s)return-1;if(37===(r=e.charCodeAt(i++))){if(r=e.charAt(i++),!(o=C[r in Tl?e.charAt(i++):r])||(a=o(t,n,a))<0)return-1}else if(r!=n.charCodeAt(a++))return-1}return a}return b.x=k(n,b),b.X=k(a,b),b.c=k(e,b),x.x=k(n,x),x.X=k(a,x),x.c=k(e,x),{format:function(t){var e=k(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",xl);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t,Cl);return e.toString=function(){return t},e}}}var _l,Sl,Ol,Al,Tl={"-":"",_:" ",0:"0"},Pl=/^\s*\d+/,El=/^%/,Ll=/[\\^$*+?|[\]().{}]/g;function Ml(t,e,n){var a=t<0?"-":"",r=(a?-t:t)+"",o=r.length;return a+(o<n?new Array(n-o+1).join(e)+r:r)}function Dl(t){return t.replace(Ll,"\\$&")}function Il(t){return new RegExp("^(?:"+t.map(Dl).join("|")+")","i")}function Rl(t){for(var e={},n=-1,a=t.length;++n<a;)e[t[n].toLowerCase()]=n;return e}function zl(t,e,n){var a=Pl.exec(e.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function jl(t,e,n){var a=Pl.exec(e.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function Fl(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function Bl(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function Hl(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function Nl(t,e,n){var a=Pl.exec(e.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function Wl(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function Vl(t,e,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function Yl(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function Ul(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function Gl(t,e,n){var a=Pl.exec(e.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function Xl(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function Zl(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function ql(t,e,n){var a=Pl.exec(e.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function $l(t,e,n){var a=Pl.exec(e.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function Ql(t,e,n){var a=Pl.exec(e.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function Kl(t,e,n){var a=El.exec(e.slice(n,n+1));return a?n+a[0].length:-1}function Jl(t,e,n){var a=Pl.exec(e.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function ts(t,e,n){var a=Pl.exec(e.slice(n));return a?(t.Q=1e3*+a[0],n+a[0].length):-1}function es(t,e){return Ml(t.getDate(),e,2)}function ns(t,e){return Ml(t.getHours(),e,2)}function as(t,e){return Ml(t.getHours()%12||12,e,2)}function rs(t,e){return Ml(1+$i.count(il(t),t),e,3)}function os(t,e){return Ml(t.getMilliseconds(),e,3)}function is(t,e){return os(t,e)+"000"}function ls(t,e){return Ml(t.getMonth()+1,e,2)}function ss(t,e){return Ml(t.getMinutes(),e,2)}function cs(t,e){return Ml(t.getSeconds(),e,2)}function us(t){var e=t.getDay();return 0===e?7:e}function ds(t,e){return Ml(Ki.count(il(t),t),e,2)}function hs(t,e){var n=t.getDay();return t=n>=4||0===n?nl(t):nl.ceil(t),Ml(nl.count(il(t),t)+(4===il(t).getDay()),e,2)}function fs(t){return t.getDay()}function ps(t,e){return Ml(Ji.count(il(t),t),e,2)}function gs(t,e){return Ml(t.getFullYear()%100,e,2)}function vs(t,e){return Ml(t.getFullYear()%1e4,e,4)}function ms(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ml(e/60|0,"0",2)+Ml(e%60,"0",2)}function ys(t,e){return Ml(t.getUTCDate(),e,2)}function bs(t,e){return Ml(t.getUTCHours(),e,2)}function xs(t,e){return Ml(t.getUTCHours()%12||12,e,2)}function Cs(t,e){return Ml(1+cl.count(bl(t),t),e,3)}function ks(t,e){return Ml(t.getUTCMilliseconds(),e,3)}function ws(t,e){return ks(t,e)+"000"}function _s(t,e){return Ml(t.getUTCMonth()+1,e,2)}function Ss(t,e){return Ml(t.getUTCMinutes(),e,2)}function Os(t,e){return Ml(t.getUTCSeconds(),e,2)}function As(t){var e=t.getUTCDay();return 0===e?7:e}function Ts(t,e){return Ml(dl.count(bl(t),t),e,2)}function Ps(t,e){var n=t.getUTCDay();return t=n>=4||0===n?gl(t):gl.ceil(t),Ml(gl.count(bl(t),t)+(4===bl(t).getUTCDay()),e,2)}function Es(t){return t.getUTCDay()}function Ls(t,e){return Ml(hl.count(bl(t),t),e,2)}function Ms(t,e){return Ml(t.getUTCFullYear()%100,e,2)}function Ds(t,e){return Ml(t.getUTCFullYear()%1e4,e,4)}function Is(){return"+0000"}function Rs(){return"%"}function zs(t){return+t}function js(t){return Math.floor(+t/1e3)}function Fs(e){return _l=wl(e),t.timeFormat=Sl=_l.format,t.timeParse=_l.parse,t.utcFormat=Ol=_l.utcFormat,t.utcParse=Al=_l.utcParse,_l}Fs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Bs="%Y-%m-%dT%H:%M:%S.%LZ";t.isoFormat=Date.prototype.toISOString?function(t){return t.toISOString()}:Ol(Bs);t.isoParse=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Al(Bs);var Hs=1e3,Ns=6e4,Ws=36e5,Vs=864e5,Ys=2592e6,Us=31536e6;function Gs(t){return new Date(t)}function Xs(t){return t instanceof Date?+t:+new Date(+t)}function Zs(t,e,n,a,r,o,i,s,c){var u=ji(Di,Mn),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),m=c("%a %d"),b=c("%b %d"),x=c("%B"),C=c("%Y"),k=[[i,1,Hs],[i,5,5e3],[i,15,15e3],[i,30,3e4],[o,1,Ns],[o,5,3e5],[o,15,9e5],[o,30,18e5],[r,1,Ws],[r,3,108e5],[r,6,216e5],[r,12,432e5],[a,1,Vs],[a,2,1728e5],[n,1,6048e5],[e,1,Ys],[e,3,7776e6],[t,1,Us]];function w(l){return(i(l)<l?f:o(l)<l?p:r(l)<l?g:a(l)<l?v:e(l)<l?n(l)<l?m:b:t(l)<l?x:C)(l)}function _(e,n,a,r){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(a-n)/e,i=l((function(t){return t[2]})).right(k,o);i===k.length?(r=y(n/Us,a/Us,e),e=t):i?(r=(i=k[o/k[i-1][2]<k[i][2]/o?i-1:i])[1],e=i[0]):(r=Math.max(y(n,a,e),1),e=s)}return null==r?e:e.every(r)}return u.invert=function(t){return new Date(d(t))},u.domain=function(t){return arguments.length?h(Si.call(t,Xs)):h().map(Gs)},u.ticks=function(t,e){var n,a=h(),r=a[0],o=a[a.length-1],i=o<r;return i&&(n=r,r=o,o=n),n=(n=_(t,r,o,e))?n.range(r,o+1):[],i?n.reverse():n},u.tickFormat=function(t,e){return null==e?w:c(e)},u.nice=function(t,e){var n=h();return(t=_(t,n[0],n[n.length-1],e))?h(function(t,e){var n,a=0,r=(t=t.slice()).length-1,o=t[a],i=t[r];return i<o&&(n=a,a=r,r=n,n=o,o=i,i=n),t[a]=e.floor(o),t[r]=e.ceil(i),t}(n,t)):u},u.copy=function(){return zi(u,Zs(t,e,n,a,r,o,i,s,c))},u}function qs(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}qs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),qs("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),qs("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),qs("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),ea(yn(300,.5,0),yn(-240,.5,1));ea(yn(-100,.75,.35),yn(80,1.5,.8)),ea(yn(260,.75,.35),yn(80,1.5,.8)),yn();function $s(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}$s(qs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));$s(qs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),$s(qs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),$s(qs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Qs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Ks=Array.prototype,Js=Ks.map,tc=Ks.slice;function ec(t){return+t}var nc=[0,1];function ac(t){return t}function rc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function oc(t){var e,n=t[0],a=t[t.length-1];return n>a&&(e=n,n=a,a=e),function(t){return Math.max(n,Math.min(a,t))}}function ic(t,e,n){var a=t[0],r=t[1],o=e[0],i=e[1];return r<a?(a=rc(r,a),o=n(i,o)):(a=rc(a,r),o=n(o,i)),function(t){return o(a(t))}}function lc(t,e,n){var a=Math.min(t.length,e.length)-1,r=new Array(a),o=new Array(a),i=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<a;)r[i]=rc(t[i],t[i+1]),o[i]=n(e[i],e[i+1]);return function(e){var n=c(t,e,1,a)-1;return o[n](r[n](e))}}function sc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cc(){var t,e,n,a,r,o,i=nc,l=nc,s=jn,c=ac;function u(){return a=Math.min(i.length,l.length)>2?lc:ic,r=o=null,d}function d(e){return isNaN(e=+e)?n:(r||(r=a(i.map(t),l,s)))(t(c(e)))}return d.invert=function(n){return c(e((o||(o=a(l,i.map(t),Mn)))(n)))},d.domain=function(t){return arguments.length?(i=Js.call(t,ec),c===ac||(c=oc(i)),u()):i.slice()},d.range=function(t){return arguments.length?(l=tc.call(t),u()):l.slice()},d.rangeRound=function(t){return l=tc.call(t),s=Fn,u()},d.clamp=function(t){return arguments.length?(c=t?oc(i):ac,d):c!==ac},d.interpolate=function(t){return arguments.length?(s=t,u()):s},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,a){return t=n,e=a,u()}}function uc(t){var e=t.domain;return t.ticks=function(t){var n=e();return v(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var a=e();return function(t,e,n,a){var r,o=y(t,e,n);switch((a=no(null==a?",f":a)).type){case"s":var i=Math.max(Math.abs(t),Math.abs(e));return null!=a.precision||isNaN(r=mo(o,i))||(a.precision=r),lo(a,i);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(r=yo(o,Math.max(Math.abs(t),Math.abs(e))))||(a.precision=r-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(r=vo(o))||(a.precision=r-2*("%"===a.type))}return io(a)}(a[0],a[a.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var a,r=e(),o=0,i=r.length-1,l=r[o],s=r[i];return s<l&&(a=l,l=s,s=a,a=o,o=i,i=a),(a=m(l,s,n))>0?a=m(l=Math.floor(l/a)*a,s=Math.ceil(s/a)*a,n):a<0&&(a=m(l=Math.ceil(l*a)/a,s=Math.floor(s*a)/a,n)),a>0?(r[o]=Math.floor(l/a)*a,r[i]=Math.ceil(s/a)*a,e(r)):a<0&&(r[o]=Math.ceil(l*a)/a,r[i]=Math.floor(s*a)/a,e(r)),t},t}function dc(t){return Math.log(t)}function hc(t){return Math.exp(t)}function fc(t){return-Math.log(-t)}function pc(t){return-Math.exp(-t)}function gc(t){return isFinite(t)?+("1e"+t):t<0?0:t}function vc(t){return function(e){return-t(-e)}}function mc(t){var e,n,a=t(dc,hc),r=a.domain,o=10;function i(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?gc:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),r()[0]<0?(e=vc(e),n=vc(n),t(fc,pc)):t(dc,hc),a}return a.base=function(t){return arguments.length?(o=+t,i()):o},a.domain=function(t){return arguments.length?(r(t),i()):r()},a.ticks=function(t){var a,i=r(),l=i[0],s=i[i.length-1];(a=s<l)&&(h=l,l=s,s=h);var c,u,d,h=e(l),f=e(s),p=null==t?10:+t,g=[];if(!(o%1)&&f-h<p){if(h=Math.round(h)-1,f=Math.round(f)+1,l>0){for(;h<f;++h)for(u=1,c=n(h);u<o;++u)if(!((d=c*u)<l)){if(d>s)break;g.push(d)}}else for(;h<f;++h)for(u=o-1,c=n(h);u>=1;--u)if(!((d=c*u)<l)){if(d>s)break;g.push(d)}}else g=v(h,f,Math.min(f-h,p)).map(n);return a?g.reverse():g},a.tickFormat=function(t,r){if(null==r&&(r=10===o?".0e":","),"function"!=typeof r&&(r=io(r)),t===1/0)return r;null==t&&(t=10);var i=Math.max(1,o*t/a.ticks().length);return function(t){var a=t/n(Math.round(e(t)));return a*o<o-.5&&(a*=o),a<=i?r(t):""}},a.nice=function(){return r(function(t,e){var n,a=0,r=(t=t.slice()).length-1,o=t[a],i=t[r];return i<o&&(n=a,a=r,r=n,n=o,o=i,i=n),t[a]=e.floor(o),t[r]=e.ceil(i),t}(r(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},a}function yc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xc(t){var e=1,n=t(yc(e),bc(e));return n.constant=function(n){return arguments.length?t(yc(e=+n),bc(e)):e},uc(n)}function Cc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function kc(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wc(t){return t<0?-t*t:t*t}function _c(t){var e=t(ac,ac),n=1;function a(){return 1===n?t(ac,ac):.5===n?t(kc,wc):t(Cc(n),Cc(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,a()):n},uc(e)}function Sc(){var t=_c(cc());return t.copy=function(){return sc(t,Sc()).exponent(t.exponent())},Qs.apply(t,arguments),t}function Oc(t,e){return t.each((function(){var t=e.apply(this,arguments),n=oe(this);for(var a in t)n.attr(a,t[a])}))}function Ac(t,e){for(var n in e)t.attr(n,e[n]);return t}function Tc(t,e,n){return t.each((function(){var t=e.apply(this,arguments),a=oe(this);for(var r in t)a.style(r,t[r],n)}))}function Pc(t,e,n){for(var a in e)t.style(a,e[a],n);return t}function Ec(t,e){return t.each((function(){var t=e.apply(this,arguments),n=oe(this);for(var a in t)n.property(a,t[a])}))}function Lc(t,e){for(var n in e)t.property(n,e[n]);return t}function Mc(t,e){return t.each((function(){var n=e.apply(this,arguments),a=oe(this).transition(t);for(var r in n)a.attr(r,n[r])}))}function Dc(t,e){for(var n in e)t.attr(n,e[n]);return t}function Ic(t,e,n){return t.each((function(){var a=e.apply(this,arguments),r=oe(this).transition(t);for(var o in a)r.style(o,a[o],n)}))}function Rc(t,e,n){for(var a in e)t.style(a,e[a],n);return t}function zc(t){return function(){return t}}re.prototype.attrs=function(t){return("function"==typeof t?Oc:Ac)(this,t)},re.prototype.styles=function(t,e){return("function"==typeof t?Tc:Pc)(this,t,null==e?"":e)},re.prototype.properties=function(t){return("function"==typeof t?Ec:Lc)(this,t)},nr.prototype.attrs=function(t){return("function"==typeof t?Mc:Dc)(this,t)},nr.prototype.styles=function(t,e){return("function"==typeof t?Ic:Rc)(this,t,null==e?"":e)};var jc=Math.abs,Fc=Math.atan2,Bc=Math.cos,Hc=Math.max,Nc=Math.min,Wc=Math.sin,Vc=Math.sqrt,Yc=1e-12,Uc=Math.PI,Gc=Uc/2,Xc=2*Uc;function Zc(t){return t>1?0:t<-1?Uc:Math.acos(t)}function qc(t){return t>=1?Gc:t<=-1?-Gc:Math.asin(t)}function $c(t){return t.innerRadius}function Qc(t){return t.outerRadius}function Kc(t){return t.startAngle}function Jc(t){return t.endAngle}function tu(t){return t&&t.padAngle}function eu(t,e,n,a,r,o,i,l){var s=n-t,c=a-e,u=i-r,d=l-o,h=(u*(e-o)-d*(t-r))/(d*s-u*c);return[t+h*s,e+h*c]}function nu(t,e,n,a,r,o,i){var l=t-n,s=e-a,c=(i?o:-o)/Vc(l*l+s*s),u=c*s,d=-c*l,h=t+u,f=e+d,p=n+u,g=a+d,v=(h+p)/2,m=(f+g)/2,y=p-h,b=g-f,x=y*y+b*b,C=r-o,k=h*g-p*f,w=(b<0?-1:1)*Vc(Hc(0,C*C*x-k*k)),_=(k*b-y*w)/x,S=(-k*y-b*w)/x,O=(k*b+y*w)/x,A=(-k*y+b*w)/x,T=_-v,P=S-m,E=O-v,L=A-m;return T*T+P*P>E*E+L*L&&(_=O,S=A),{cx:_,cy:S,x01:-u,y01:-d,x11:_*(r/C-1),y11:S*(r/C-1)}}function au(t){this._context=t}function ru(t){return new au(t)}function ou(t){return t[0]}function iu(t){return t[1]}function lu(){var t=ou,e=iu,n=zc(!0),a=null,r=ru,o=null;function i(i){var l,s,c,u=i.length,d=!1;for(null==a&&(o=r(c=wi())),l=0;l<=u;++l)!(l<u&&n(s=i[l],l,i))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(s,l,i),+e(s,l,i));if(c)return o=null,c+""||null}return i.x=function(e){return arguments.length?(t="function"==typeof e?e:zc(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:zc(+t),i):e},i.defined=function(t){return arguments.length?(n="function"==typeof t?t:zc(!!t),i):n},i.curve=function(t){return arguments.length?(r=t,null!=a&&(o=r(a)),i):r},i.context=function(t){return arguments.length?(null==t?a=o=null:o=r(a=t),i):a},i}function su(){var t=ou,e=null,n=zc(0),a=iu,r=zc(!0),o=null,i=ru,l=null;function s(s){var c,u,d,h,f,p=s.length,g=!1,v=new Array(p),m=new Array(p);for(null==o&&(l=i(f=wi())),c=0;c<=p;++c){if(!(c<p&&r(h=s[c],c,s))===g)if(g=!g)u=c,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=c-1;d>=u;--d)l.point(v[d],m[d]);l.lineEnd(),l.areaEnd()}g&&(v[c]=+t(h,c,s),m[c]=+n(h,c,s),l.point(e?+e(h,c,s):v[c],a?+a(h,c,s):m[c]))}if(f)return l=null,f+""||null}function c(){return lu().defined(r).curve(i).context(o)}return s.x=function(n){return arguments.length?(t="function"==typeof n?n:zc(+n),e=null,s):t},s.x0=function(e){return arguments.length?(t="function"==typeof e?e:zc(+e),s):t},s.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:zc(+t),s):e},s.y=function(t){return arguments.length?(n="function"==typeof t?t:zc(+t),a=null,s):n},s.y0=function(t){return arguments.length?(n="function"==typeof t?t:zc(+t),s):n},s.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:zc(+t),s):a},s.lineX0=s.lineY0=function(){return c().x(t).y(n)},s.lineY1=function(){return c().x(t).y(a)},s.lineX1=function(){return c().x(e).y(n)},s.defined=function(t){return arguments.length?(r="function"==typeof t?t:zc(!!t),s):r},s.curve=function(t){return arguments.length?(i=t,null!=o&&(l=i(o)),s):i},s.context=function(t){return arguments.length?(null==t?o=l=null:l=i(o=t),s):o},s}function cu(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function uu(t){return t}au.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var du=fu(ru);function hu(t){this._curve=t}function fu(t){function e(e){return new hu(t(e))}return e._curve=t,e}function pu(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(fu(t)):e()._curve},t}hu.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var gu=Array.prototype.slice;function vu(t){return t.source}function mu(t){return t.target}function yu(t){var e=vu,n=mu,a=ou,r=iu,o=null;function i(){var i,l=gu.call(arguments),s=e.apply(this,l),c=n.apply(this,l);if(o||(o=i=wi()),t(o,+a.apply(this,(l[0]=s,l)),+r.apply(this,l),+a.apply(this,(l[0]=c,l)),+r.apply(this,l)),i)return o=null,i+""||null}return i.source=function(t){return arguments.length?(e=t,i):e},i.target=function(t){return arguments.length?(n=t,i):n},i.x=function(t){return arguments.length?(a="function"==typeof t?t:zc(+t),i):a},i.y=function(t){return arguments.length?(r="function"==typeof t?t:zc(+t),i):r},i.context=function(t){return arguments.length?(o=null==t?null:t,i):o},i}function bu(t,e,n,a,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+a)/2,n,e,r,a,r)}function xu(t,e,n,a,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,a,n,a,r)}function Cu(){}function ku(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function wu(t,e){this._context=t,this._k=(1-e)/6}wu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ku(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ku(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};t.curveCardinal=function t(e){function n(t){return new wu(t,e)}return n.tension=function(e){return t(+e)},n}(0);function _u(t,e){this._context=t,this._k=(1-e)/6}_u.prototype={areaStart:Cu,areaEnd:Cu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ku(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};t.curveCardinalClosed=function t(e){function n(t){return new _u(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Su(t){this._context=t}function Ou(t){return t<0?-1:1}function Au(t,e,n){var a=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(a||r<0&&-0),i=(n-t._y1)/(r||a<0&&-0),l=(o*r+i*a)/(a+r);return(Ou(o)+Ou(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(l))||0}function Tu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Pu(t,e,n){var a=t._x0,r=t._y0,o=t._x1,i=t._y1,l=(o-a)/3;t._context.bezierCurveTo(a+l,r+l*e,o-l,i-l*n,o,i)}function Eu(t){this._context=t}function Lu(t){this._context=new Mu(t)}function Mu(t){this._context=t}function Du(t,e){this._context=t,this._t=e}function Iu(t,e){if((r=t.length)>1)for(var n,a,r,o=1,i=t[e[0]],l=i.length;o<r;++o)for(a=i,i=t[e[o]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Ru(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function zu(t,e){return t[e]}function ju(t){return function(){return t}}function Fu(t,e,n){this.target=t,this.type=e,this.transform=n}function Bu(t,e,n){this.k=t,this.x=e,this.y=n}Su.prototype={areaStart:Cu,areaEnd:Cu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pu(this,this._t0,Tu(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Pu(this,Tu(this,n=Au(this,t,e)),n);break;default:Pu(this,this._t0,n=Au(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Lu.prototype=Object.create(Eu.prototype)).point=function(t,e){Eu.prototype.point.call(this,e,t)},Mu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,r,o){this._context.bezierCurveTo(e,t,a,n,o,r)}},Du.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},Bu.prototype={constructor:Bu,scale:function(t){return 1===t?this:new Bu(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Bu(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hu=t.zoomIdentity=new Bu(1,0,0);function Nu(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Hu;return t.__zoom}function Wu(){nt.stopImmediatePropagation()}function Vu(){nt.preventDefault(),nt.stopImmediatePropagation()}function Yu(){return!nt.ctrlKey&&!nt.button}function Uu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Gu(){return this.__zoom||Hu}function Xu(){return-nt.deltaY*(1===nt.deltaMode?.05:nt.deltaMode?1:.002)}function Zu(){return navigator.maxTouchPoints||"ontouchstart"in this}function qu(t,e,n){var a=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function $u(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Qu(t,e){return t[0]-e[0]||t[1]-e[1]}function Ku(t){for(var e=t.length,n=[0,1],a=2,r=2;r<e;++r){for(;a>1&&$u(t[n[a-2]],t[n[a-1]],t[r])<=0;)--a;n[a++]=r}return n.slice(0,a)}function Ju(){return new td}function td(){this.reset()}Nu.prototype=Bu.prototype,td.prototype={constructor:td,reset:function(){this.s=this.t=0},add:function(t){nd(ed,t,this.t),nd(this,ed.s,this.s),this.s?this.t+=ed.t:this.s=ed.t},valueOf:function(){return this.s}};var ed=new td;function nd(t,e,n){var a=t.s=e+n,r=a-e,o=a-r;t.t=e-o+(n-r)}var ad=1e-6,rd=1e-12,od=Math.PI,id=od/2,ld=od/4,sd=2*od,cd=180/od,ud=od/180,dd=Math.abs,hd=Math.atan,fd=Math.atan2,pd=Math.cos,gd=Math.ceil,vd=Math.exp,md=Math.log,yd=Math.pow,bd=Math.sin,xd=Math.sign||function(t){return t>0?1:t<0?-1:0},Cd=Math.sqrt,kd=Math.tan;function wd(t){return t>1?0:t<-1?od:Math.acos(t)}function _d(t){return t>1?id:t<-1?-id:Math.asin(t)}function Sd(t){return(t=bd(t/2))*t}function Od(){}function Ad(t,e){t&&Pd.hasOwnProperty(t.type)&&Pd[t.type](t,e)}var Td={Feature:function(t,e){Ad(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,a=-1,r=n.length;++a<r;)Ad(n[a].geometry,e)}},Pd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)t=n[a],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ed(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)Ed(n[a],e,0)},Polygon:function(t,e){Ld(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)Ld(n[a],e)},GeometryCollection:function(t,e){for(var n=t.geometries,a=-1,r=n.length;++a<r;)Ad(n[a],e)}};function Ed(t,e,n){var a,r=-1,o=t.length-n;for(e.lineStart();++r<o;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function Ld(t,e){var n=-1,a=t.length;for(e.polygonStart();++n<a;)Ed(t[n],e,1);e.polygonEnd()}function Md(t,e){t&&Td.hasOwnProperty(t.type)?Td[t.type](t,e):Ad(t,e)}var Dd,Id,Rd,zd,jd,Fd=Ju(),Bd=Ju(),Hd={point:Od,lineStart:Od,lineEnd:Od,polygonStart:function(){Fd.reset(),Hd.lineStart=Nd,Hd.lineEnd=Wd},polygonEnd:function(){var t=+Fd;Bd.add(t<0?sd+t:t),this.lineStart=this.lineEnd=this.point=Od},sphere:function(){Bd.add(sd)}};function Nd(){Hd.point=Vd}function Wd(){Yd(Dd,Id)}function Vd(t,e){Hd.point=Yd,Dd=t,Id=e,Rd=t*=ud,zd=pd(e=(e*=ud)/2+ld),jd=bd(e)}function Yd(t,e){var n=(t*=ud)-Rd,a=n>=0?1:-1,r=a*n,o=pd(e=(e*=ud)/2+ld),i=bd(e),l=jd*i,s=zd*o+l*pd(r),c=l*a*bd(r);Fd.add(fd(c,s)),Rd=t,zd=o,jd=i}function Ud(t){return[fd(t[1],t[0]),_d(t[2])]}function Gd(t){var e=t[0],n=t[1],a=pd(n);return[a*pd(e),a*bd(e),bd(n)]}function Xd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Zd(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qd(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function $d(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Qd(t){var e=Cd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Kd,Jd,th,eh,nh,ah,rh,oh,ih,lh,sh,ch,uh,dh,hh,fh,ph,gh,vh,mh,yh,bh,xh,Ch,kh,wh,_h=Ju(),Sh={point:Oh,lineStart:Th,lineEnd:Ph,polygonStart:function(){Sh.point=Eh,Sh.lineStart=Lh,Sh.lineEnd=Mh,_h.reset(),Hd.polygonStart()},polygonEnd:function(){Hd.polygonEnd(),Sh.point=Oh,Sh.lineStart=Th,Sh.lineEnd=Ph,Fd<0?(Kd=-(th=180),Jd=-(eh=90)):_h>ad?eh=90:_h<-1e-6&&(Jd=-90),lh[0]=Kd,lh[1]=th}};function Oh(t,e){ih.push(lh=[Kd=t,th=t]),e<Jd&&(Jd=e),e>eh&&(eh=e)}function Ah(t,e){var n=Gd([t*ud,e*ud]);if(oh){var a=Zd(oh,n),r=Zd([a[1],-a[0],0],a);Qd(r),r=Ud(r);var o,i=t-nh,l=i>0?1:-1,s=r[0]*cd*l,c=dd(i)>180;c^(l*nh<s&&s<l*t)?(o=r[1]*cd)>eh&&(eh=o):c^(l*nh<(s=(s+360)%360-180)&&s<l*t)?(o=-r[1]*cd)<Jd&&(Jd=o):(e<Jd&&(Jd=e),e>eh&&(eh=e)),c?t<nh?Dh(Kd,t)>Dh(Kd,th)&&(th=t):Dh(t,th)>Dh(Kd,th)&&(Kd=t):th>=Kd?(t<Kd&&(Kd=t),t>th&&(th=t)):t>nh?Dh(Kd,t)>Dh(Kd,th)&&(th=t):Dh(t,th)>Dh(Kd,th)&&(Kd=t)}else ih.push(lh=[Kd=t,th=t]);e<Jd&&(Jd=e),e>eh&&(eh=e),oh=n,nh=t}function Th(){Sh.point=Ah}function Ph(){lh[0]=Kd,lh[1]=th,Sh.point=Oh,oh=null}function Eh(t,e){if(oh){var n=t-nh;_h.add(dd(n)>180?n+(n>0?360:-360):n)}else ah=t,rh=e;Hd.point(t,e),Ah(t,e)}function Lh(){Hd.lineStart()}function Mh(){Eh(ah,rh),Hd.lineEnd(),dd(_h)>ad&&(Kd=-(th=180)),lh[0]=Kd,lh[1]=th,oh=null}function Dh(t,e){return(e-=t)<0?e+360:e}function Ih(t,e){return t[0]-e[0]}function Rh(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var zh={sphere:Od,point:jh,lineStart:Bh,lineEnd:Wh,polygonStart:function(){zh.lineStart=Vh,zh.lineEnd=Yh},polygonEnd:function(){zh.lineStart=Bh,zh.lineEnd=Wh}};function jh(t,e){t*=ud;var n=pd(e*=ud);Fh(n*pd(t),n*bd(t),bd(e))}function Fh(t,e,n){++sh,uh+=(t-uh)/sh,dh+=(e-dh)/sh,hh+=(n-hh)/sh}function Bh(){zh.point=Hh}function Hh(t,e){t*=ud;var n=pd(e*=ud);Ch=n*pd(t),kh=n*bd(t),wh=bd(e),zh.point=Nh,Fh(Ch,kh,wh)}function Nh(t,e){t*=ud;var n=pd(e*=ud),a=n*pd(t),r=n*bd(t),o=bd(e),i=fd(Cd((i=kh*o-wh*r)*i+(i=wh*a-Ch*o)*i+(i=Ch*r-kh*a)*i),Ch*a+kh*r+wh*o);ch+=i,fh+=i*(Ch+(Ch=a)),ph+=i*(kh+(kh=r)),gh+=i*(wh+(wh=o)),Fh(Ch,kh,wh)}function Wh(){zh.point=jh}function Vh(){zh.point=Uh}function Yh(){Gh(bh,xh),zh.point=jh}function Uh(t,e){bh=t,xh=e,t*=ud,e*=ud,zh.point=Gh;var n=pd(e);Ch=n*pd(t),kh=n*bd(t),wh=bd(e),Fh(Ch,kh,wh)}function Gh(t,e){t*=ud;var n=pd(e*=ud),a=n*pd(t),r=n*bd(t),o=bd(e),i=kh*o-wh*r,l=wh*a-Ch*o,s=Ch*r-kh*a,c=Cd(i*i+l*l+s*s),u=_d(c),d=c&&-u/c;vh+=d*i,mh+=d*l,yh+=d*s,ch+=u,fh+=u*(Ch+(Ch=a)),ph+=u*(kh+(kh=r)),gh+=u*(wh+(wh=o)),Fh(Ch,kh,wh)}function Xh(t){sh=ch=uh=dh=hh=fh=ph=gh=vh=mh=yh=0,Md(t,zh);var e=vh,n=mh,a=yh,r=e*e+n*n+a*a;return r<rd&&(e=fh,n=ph,a=gh,ch<ad&&(e=uh,n=dh,a=hh),(r=e*e+n*n+a*a)<rd)?[NaN,NaN]:[fd(n,e)*cd,_d(a/Cd(r))*cd]}function Zh(t){return function(){return t}}function qh(t,e){function n(n,a){return n=t(n,a),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,a){return(n=e.invert(n,a))&&t.invert(n[0],n[1])}),n}function $h(t,e){return[t>od?t-sd:t<-od?t+sd:t,e]}function Qh(t,e,n){return(t%=sd)?e||n?qh(Jh(t),tf(e,n)):Jh(t):e||n?tf(e,n):$h}function Kh(t){return function(e,n){return[(e+=t)>od?e-sd:e<-od?e+sd:e,n]}}function Jh(t){var e=Kh(t);return e.invert=Kh(-t),e}function tf(t,e){var n=pd(t),a=bd(t),r=pd(e),o=bd(e);function i(t,e){var i=pd(e),l=pd(t)*i,s=bd(t)*i,c=bd(e),u=c*n+l*a;return[fd(s*r-u*o,l*n-c*a),_d(u*r+s*o)]}return i.invert=function(t,e){var i=pd(e),l=pd(t)*i,s=bd(t)*i,c=bd(e),u=c*r-s*o;return[fd(s*r+c*o,l*n+u*a),_d(u*n-l*a)]},i}function ef(t){function e(e){return(e=t(e[0]*ud,e[1]*ud))[0]*=cd,e[1]*=cd,e}return t=Qh(t[0]*ud,t[1]*ud,t.length>2?t[2]*ud:0),e.invert=function(e){return(e=t.invert(e[0]*ud,e[1]*ud))[0]*=cd,e[1]*=cd,e},e}function nf(t,e,n,a,r,o){if(n){var i=pd(e),l=bd(e),s=a*n;null==r?(r=e+a*sd,o=e-s/2):(r=af(i,r),o=af(i,o),(a>0?r<o:r>o)&&(r+=a*sd));for(var c,u=r;a>0?u>o:u<o;u-=s)c=Ud([i,-l*pd(u),-l*bd(u)]),t.point(c[0],c[1])}}function af(t,e){(e=Gd(e))[0]-=t,Qd(e);var n=wd(-e[1]);return((-e[2]<0?-n:n)+sd-ad)%sd}function rf(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Od,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function of(t,e){return dd(t[0]-e[0])<ad&&dd(t[1]-e[1])<ad}function lf(t,e,n,a){this.x=t,this.z=e,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function sf(t,e,n,a,r){var o,i,l=[],s=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,a=t[0],i=t[e];if(of(a,i)){for(r.lineStart(),o=0;o<e;++o)r.point((a=t[o])[0],a[1]);r.lineEnd()}else l.push(n=new lf(a,t,null,!0)),s.push(n.o=new lf(a,null,n,!1)),l.push(n=new lf(i,t,null,!1)),s.push(n.o=new lf(i,null,n,!0))}})),l.length){for(s.sort(e),cf(l),cf(s),o=0,i=s.length;o<i;++o)s[o].e=n=!n;for(var c,u,d=l[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(o=0,i=c.length;o<i;++o)r.point((u=c[o])[0],u[1]);else a(h.x,h.n.x,1,r);h=h.n}else{if(f)for(c=h.p.z,o=c.length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else a(h.x,h.p.x,-1,r);h=h.p}c=(h=h.o).z,f=!f}while(!h.v);r.lineEnd()}}}function cf(t){if(e=t.length){for(var e,n,a=0,r=t[0];++a<e;)r.n=n=t[a],n.p=r,r=n;r.n=n=t[0],n.p=r}}$h.invert=$h;var uf=Ju();function df(t,e){var n=e[0],a=e[1],r=bd(a),o=[bd(n),-pd(n),0],i=0,l=0;uf.reset(),1===r?a=id+ad:-1===r&&(a=-id-ad);for(var s=0,c=t.length;s<c;++s)if(d=(u=t[s]).length)for(var u,d,h=u[d-1],f=h[0],p=h[1]/2+ld,g=bd(p),v=pd(p),m=0;m<d;++m,f=b,g=C,v=k,h=y){var y=u[m],b=y[0],x=y[1]/2+ld,C=bd(x),k=pd(x),w=b-f,_=w>=0?1:-1,S=_*w,O=S>od,A=g*C;if(uf.add(fd(A*_*bd(S),v*k+A*pd(S))),i+=O?w+_*sd:w,O^f>=n^b>=n){var T=Zd(Gd(h),Gd(y));Qd(T);var P=Zd(o,T);Qd(P);var E=(O^w>=0?-1:1)*_d(P[2]);(a>E||a===E&&(T[0]||T[1]))&&(l+=O^w>=0?1:-1)}}return(i<-1e-6||i<ad&&uf<-1e-6)^1&l}function hf(t,e,n,a){return function(r){var o,i,l,s=e(r),c=rf(),u=e(c),d=!1,h={point:f,lineStart:g,lineEnd:v,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,i=[],o=[]},polygonEnd:function(){h.point=f,h.lineStart=g,h.lineEnd=v,i=x(i);var t=df(o,a);i.length?(d||(r.polygonStart(),d=!0),sf(i,pf,t,n,r)):t&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),i=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(e,n){t(e,n)&&r.point(e,n)}function p(t,e){s.point(t,e)}function g(){h.point=p,s.lineStart()}function v(){h.point=f,s.lineEnd()}function m(t,e){l.push([t,e]),u.point(t,e)}function y(){u.lineStart(),l=[]}function b(){m(l[0][0],l[0][1]),u.lineEnd();var t,e,n,a,s=u.clean(),h=c.result(),f=h.length;if(l.pop(),o.push(l),l=null,f)if(1&s){if((e=(n=h[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),t=0;t<e;++t)r.point((a=n[t])[0],a[1]);r.lineEnd()}}else f>1&&2&s&&h.push(h.pop().concat(h.shift())),i.push(h.filter(ff))}return h}}function ff(t){return t.length>1}function pf(t,e){return((t=t.x)[0]<0?t[1]-id-ad:id-t[1])-((e=e.x)[0]<0?e[1]-id-ad:id-e[1])}var gf=t.geoClipAntimeridian=hf((function(){return!0}),(function(t){var e,n=NaN,a=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,i){var l=o>0?od:-od,s=dd(o-n);dd(s-od)<ad?(t.point(n,a=(a+i)/2>0?id:-id),t.point(r,a),t.lineEnd(),t.lineStart(),t.point(l,a),t.point(o,a),e=0):r!==l&&s>=od&&(dd(n-r)<ad&&(n-=r*ad),dd(o-l)<ad&&(o-=l*ad),a=function(t,e,n,a){var r,o,i=bd(t-n);return dd(i)>ad?hd((bd(e)*(o=pd(a))*bd(n)-bd(a)*(r=pd(e))*bd(t))/(r*o*i)):(e+a)/2}(n,a,o,i),t.point(r,a),t.lineEnd(),t.lineStart(),t.point(l,a),e=0),t.point(n=o,a=i),r=l},lineEnd:function(){t.lineEnd(),n=a=NaN},clean:function(){return 2-e}}}),(function(t,e,n,a){var r;if(null==t)r=n*id,a.point(-od,r),a.point(0,r),a.point(od,r),a.point(od,0),a.point(od,-r),a.point(0,-r),a.point(-od,-r),a.point(-od,0),a.point(-od,r);else if(dd(t[0]-e[0])>ad){var o=t[0]<e[0]?od:-od;r=n*o/2,a.point(-o,r),a.point(0,r),a.point(o,r)}else a.point(e[0],e[1])}),[-od,-id]);function vf(t){var e=pd(t),n=6*ud,a=e>0,r=dd(e)>ad;function o(t,n){return pd(t)*pd(n)>e}function i(t,n,a){var r=[1,0,0],o=Zd(Gd(t),Gd(n)),i=Xd(o,o),l=o[0],s=i-l*l;if(!s)return!a&&t;var c=e*i/s,u=-e*l/s,d=Zd(r,o),h=$d(r,c);qd(h,$d(o,u));var f=d,p=Xd(h,f),g=Xd(f,f),v=p*p-g*(Xd(h,h)-1);if(!(v<0)){var m=Cd(v),y=$d(f,(-p-m)/g);if(qd(y,h),y=Ud(y),!a)return y;var b,x=t[0],C=n[0],k=t[1],w=n[1];C<x&&(b=x,x=C,C=b);var _=C-x,S=dd(_-od)<ad;if(!S&&w<k&&(b=k,k=w,w=b),S||_<ad?S?k+w>0^y[1]<(dd(y[0]-x)<ad?k:w):k<=y[1]&&y[1]<=w:_>od^(x<=y[0]&&y[0]<=C)){var O=$d(f,(-p+m)/g);return qd(O,h),[y,Ud(O)]}}}function l(e,n){var r=a?t:od-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return hf(o,(function(t){var e,n,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(d,h){var f,p=[d,h],g=o(d,h),v=a?g?0:l(d,h):g?l(d+(d<0?od:-od),h):0;if(!e&&(c=s=g)&&t.lineStart(),g!==s&&(!(f=i(e,p))||of(e,f)||of(p,f))&&(p[0]+=ad,p[1]+=ad,g=o(p[0],p[1])),g!==s)u=0,g?(t.lineStart(),f=i(p,e),t.point(f[0],f[1])):(f=i(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(r&&e&&a^g){var m;v&n||!(m=i(p,e,!0))||(u=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&of(e,p)||t.point(p[0],p[1]),e=p,s=g,n=v},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return u|(c&&s)<<1}}}),(function(e,a,r,o){nf(o,t,n,r,e,a)}),a?[0,-t]:[-od,t-od])}var mf=1e9,yf=-mf;function bf(t,e,n,a){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=a}function o(r,o,l,c){var u=0,d=0;if(null==r||(u=i(r,l))!==(d=i(o,l))||s(r,o)<0^l>0)do{c.point(0===u||3===u?t:n,u>1?a:e)}while((u=(u+l+4)%4)!==d);else c.point(o[0],o[1])}function i(a,r){return dd(a[0]-t)<ad?r>0?0:3:dd(a[0]-n)<ad?r>0?2:1:dd(a[1]-e)<ad?r>0?1:0:r>0?3:2}function l(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),a=i(e,1);return n!==a?n-a:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){var s,c,u,d,h,f,p,g,v,m,y,b=i,C=rf(),k={point:w,lineStart:function(){k.point=_,c&&c.push(u=[]);m=!0,v=!1,p=g=NaN},lineEnd:function(){s&&(_(d,h),f&&v&&C.rejoin(),s.push(C.result()));k.point=w,v&&b.lineEnd()},polygonStart:function(){b=C,s=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=c.length;n<r;++n)for(var o,i,l=c[n],s=1,u=l.length,d=l[0],h=d[0],f=d[1];s<u;++s)o=h,i=f,h=(d=l[s])[0],f=d[1],i<=a?f>a&&(h-o)*(a-i)>(f-i)*(t-o)&&++e:f<=a&&(h-o)*(a-i)<(f-i)*(t-o)&&--e;return e}(),n=y&&e,r=(s=x(s)).length;(n||r)&&(i.polygonStart(),n&&(i.lineStart(),o(null,null,1,i),i.lineEnd()),r&&sf(s,l,e,o,i),i.polygonEnd());b=i,s=c=u=null}};function w(t,e){r(t,e)&&b.point(t,e)}function _(o,i){var l=r(o,i);if(c&&u.push([o,i]),m)d=o,h=i,f=l,m=!1,l&&(b.lineStart(),b.point(o,i));else if(l&&v)b.point(o,i);else{var s=[p=Math.max(yf,Math.min(mf,p)),g=Math.max(yf,Math.min(mf,g))],x=[o=Math.max(yf,Math.min(mf,o)),i=Math.max(yf,Math.min(mf,i))];!function(t,e,n,a,r,o){var i,l=t[0],s=t[1],c=0,u=1,d=e[0]-l,h=e[1]-s;if(i=n-l,d||!(i>0)){if(i/=d,d<0){if(i<c)return;i<u&&(u=i)}else if(d>0){if(i>u)return;i>c&&(c=i)}if(i=r-l,d||!(i<0)){if(i/=d,d<0){if(i>u)return;i>c&&(c=i)}else if(d>0){if(i<c)return;i<u&&(u=i)}if(i=a-s,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<u&&(u=i)}else if(h>0){if(i>u)return;i>c&&(c=i)}if(i=o-s,h||!(i<0)){if(i/=h,h<0){if(i>u)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<u&&(u=i)}return c>0&&(t[0]=l+c*d,t[1]=s+c*h),u<1&&(e[0]=l+u*d,e[1]=s+u*h),!0}}}}}(s,x,t,e,n,a)?l&&(b.lineStart(),b.point(o,i),y=!1):(v||(b.lineStart(),b.point(s[0],s[1])),b.point(x[0],x[1]),l||b.lineEnd(),y=!1)}p=o,g=i,v=l}return k}}var xf,Cf,kf,wf=Ju(),_f={sphere:Od,point:Od,lineStart:function(){_f.point=Of,_f.lineEnd=Sf},lineEnd:Od,polygonStart:Od,polygonEnd:Od};function Sf(){_f.point=_f.lineEnd=Od}function Of(t,e){xf=t*=ud,Cf=bd(e*=ud),kf=pd(e),_f.point=Af}function Af(t,e){t*=ud;var n=bd(e*=ud),a=pd(e),r=dd(t-xf),o=pd(r),i=a*bd(r),l=kf*n-Cf*a*o,s=Cf*n+kf*a*o;wf.add(fd(Cd(i*i+l*l),s)),xf=t,Cf=n,kf=a}function Tf(t){return wf.reset(),Md(t,_f),+wf}var Pf=[null,null],Ef={type:"LineString",coordinates:Pf};function Lf(t,e){return Pf[0]=t,Pf[1]=e,Tf(Ef)}var Mf={Feature:function(t,e){return If(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,a=-1,r=n.length;++a<r;)if(If(n[a].geometry,e))return!0;return!1}},Df={Sphere:function(){return!0},Point:function(t,e){return Rf(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)if(Rf(n[a],e))return!0;return!1},LineString:function(t,e){return zf(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)if(zf(n[a],e))return!0;return!1},Polygon:function(t,e){return jf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,a=-1,r=n.length;++a<r;)if(jf(n[a],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,a=-1,r=n.length;++a<r;)if(If(n[a],e))return!0;return!1}};function If(t,e){return!(!t||!Df.hasOwnProperty(t.type))&&Df[t.type](t,e)}function Rf(t,e){return 0===Lf(t,e)}function zf(t,e){var n=Lf(t[0],t[1]);return Lf(t[0],e)+Lf(e,t[1])<=n+ad}function jf(t,e){return!!df(t.map(Ff),Bf(e))}function Ff(t){return(t=t.map(Bf)).pop(),t}function Bf(t){return[t[0]*ud,t[1]*ud]}function Hf(t,e,n){var a=h(t,e-ad,n).concat(e);return function(t){return a.map((function(e){return[t,e]}))}}function Nf(t,e,n){var a=h(t,e-ad,n).concat(e);return function(t){return a.map((function(e){return[e,t]}))}}function Wf(){var t,e,n,a,r,o,i,l,s,c,u,d,f=10,p=f,g=90,v=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return h(gd(a/g)*g,n,g).map(u).concat(h(gd(l/v)*v,i,v).map(d)).concat(h(gd(e/f)*f,t,f).filter((function(t){return dd(t%g)>ad})).map(s)).concat(h(gd(o/p)*p,r,p).filter((function(t){return dd(t%v)>ad})).map(c))}return y.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[u(a).concat(d(i).slice(1),u(n).reverse().slice(1),d(l).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(a=+t[0][0],n=+t[1][0],l=+t[0][1],i=+t[1][1],a>n&&(t=a,a=n,n=t),l>i&&(t=l,l=i,i=t),y.precision(m)):[[a,l],[n,i]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),y.precision(m)):[[e,o],[t,r]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(g=+t[0],v=+t[1],y):[g,v]},y.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],y):[f,p]},y.precision=function(h){return arguments.length?(m=+h,s=Hf(o,r,90),c=Nf(e,t,m),u=Hf(l,i,90),d=Nf(a,n,m),y):m},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Vf(t){return t}var Yf,Uf,Gf,Xf,Zf=Ju(),qf=Ju(),$f={point:Od,lineStart:Od,lineEnd:Od,polygonStart:function(){$f.lineStart=Qf,$f.lineEnd=tp},polygonEnd:function(){$f.lineStart=$f.lineEnd=$f.point=Od,Zf.add(dd(qf)),qf.reset()},result:function(){var t=Zf/2;return Zf.reset(),t}};function Qf(){$f.point=Kf}function Kf(t,e){$f.point=Jf,Yf=Gf=t,Uf=Xf=e}function Jf(t,e){qf.add(Xf*t-Gf*e),Gf=t,Xf=e}function tp(){Jf(Yf,Uf)}var ep=1/0,np=ep,ap=-ep,rp=ap,op={point:function(t,e){t<ep&&(ep=t);t>ap&&(ap=t);e<np&&(np=e);e>rp&&(rp=e)},lineStart:Od,lineEnd:Od,polygonStart:Od,polygonEnd:Od,result:function(){var t=[[ep,np],[ap,rp]];return ap=rp=-(np=ep=1/0),t}};var ip,lp,sp,cp,up=0,dp=0,hp=0,fp=0,pp=0,gp=0,vp=0,mp=0,yp=0,bp={point:xp,lineStart:Cp,lineEnd:_p,polygonStart:function(){bp.lineStart=Sp,bp.lineEnd=Op},polygonEnd:function(){bp.point=xp,bp.lineStart=Cp,bp.lineEnd=_p},result:function(){var t=yp?[vp/yp,mp/yp]:gp?[fp/gp,pp/gp]:hp?[up/hp,dp/hp]:[NaN,NaN];return up=dp=hp=fp=pp=gp=vp=mp=yp=0,t}};function xp(t,e){up+=t,dp+=e,++hp}function Cp(){bp.point=kp}function kp(t,e){bp.point=wp,xp(sp=t,cp=e)}function wp(t,e){var n=t-sp,a=e-cp,r=Cd(n*n+a*a);fp+=r*(sp+t)/2,pp+=r*(cp+e)/2,gp+=r,xp(sp=t,cp=e)}function _p(){bp.point=xp}function Sp(){bp.point=Ap}function Op(){Tp(ip,lp)}function Ap(t,e){bp.point=Tp,xp(ip=sp=t,lp=cp=e)}function Tp(t,e){var n=t-sp,a=e-cp,r=Cd(n*n+a*a);fp+=r*(sp+t)/2,pp+=r*(cp+e)/2,gp+=r,vp+=(r=cp*t-sp*e)*(sp+t),mp+=r*(cp+e),yp+=3*r,xp(sp=t,cp=e)}function Pp(t){this._context=t}Pp.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,sd)}},result:Od};var Ep,Lp,Mp,Dp,Ip,Rp=Ju(),zp={point:Od,lineStart:function(){zp.point=jp},lineEnd:function(){Ep&&Fp(Lp,Mp),zp.point=Od},polygonStart:function(){Ep=!0},polygonEnd:function(){Ep=null},result:function(){var t=+Rp;return Rp.reset(),t}};function jp(t,e){zp.point=Fp,Lp=Dp=t,Mp=Ip=e}function Fp(t,e){Dp-=t,Ip-=e,Rp.add(Cd(Dp*Dp+Ip*Ip)),Dp=t,Ip=e}function Bp(){this._string=[]}function Hp(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Np(t){return function(e){var n=new Wp;for(var a in t)n[a]=t[a];return n.stream=e,n}}function Wp(){}function Vp(t,e,n){var a=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),Md(n,t.stream(op)),e(op.result()),null!=a&&t.clipExtent(a),t}function Yp(t,e,n){return Vp(t,(function(n){var a=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(a/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),i=+e[0][0]+(a-o*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([i,l])}),n)}function Up(t,e,n){return Yp(t,[[0,0],e],n)}function Gp(t,e,n){return Vp(t,(function(n){var a=+e,r=a/(n[1][0]-n[0][0]),o=(a-r*(n[1][0]+n[0][0]))/2,i=-r*n[0][1];t.scale(150*r).translate([o,i])}),n)}function Xp(t,e,n){return Vp(t,(function(n){var a=+e,r=a/(n[1][1]-n[0][1]),o=-r*n[0][0],i=(a-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,i])}),n)}Bp.prototype={_radius:4.5,_circle:Hp(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Hp(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Wp.prototype={constructor:Wp,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Zp=pd(30*ud);function qp(t,e){return+e?function(t,e){function n(a,r,o,i,l,s,c,u,d,h,f,p,g,v){var m=c-a,y=u-r,b=m*m+y*y;if(b>4*e&&g--){var x=i+h,C=l+f,k=s+p,w=Cd(x*x+C*C+k*k),_=_d(k/=w),S=dd(dd(k)-1)<ad||dd(o-d)<ad?(o+d)/2:fd(C,x),O=t(S,_),A=O[0],T=O[1],P=A-a,E=T-r,L=y*P-m*E;(L*L/b>e||dd((m*P+y*E)/b-.5)>.3||i*h+l*f+s*p<Zp)&&(n(a,r,o,i,l,s,A,T,S,x/=w,C/=w,k,g,v),v.point(A,T),n(A,T,S,x,C,k,c,u,d,h,f,p,g,v))}}return function(e){var a,r,o,i,l,s,c,u,d,h,f,p,g={point:v,lineStart:m,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function v(n,a){n=t(n,a),e.point(n[0],n[1])}function m(){u=NaN,g.point=y,e.lineStart()}function y(a,r){var o=Gd([a,r]),i=t(a,r);n(u,d,c,h,f,p,u=i[0],d=i[1],c=a,h=o[0],f=o[1],p=o[2],16,e),e.point(u,d)}function b(){g.point=v,e.lineEnd()}function x(){m(),g.point=C,g.lineEnd=k}function C(t,e){y(a=t,e),r=u,o=d,i=h,l=f,s=p,g.point=y}function k(){n(u,d,c,h,f,p,r,o,a,i,l,s,16,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return Np({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var $p=Np({point:function(t,e){this.stream.point(t*ud,e*ud)}});function Qp(t,e,n){function a(a,r){return[e+t*a,n-t*r]}return a.invert=function(a,r){return[(a-e)/t,(n-r)/t]},a}function Kp(t,e,n,a){var r=pd(a),o=bd(a),i=r*t,l=o*t,s=r/t,c=o/t,u=(o*n-r*e)/t,d=(o*e+r*n)/t;function h(t,a){return[i*t-l*a+e,n-l*t-i*a]}return h.invert=function(t,e){return[s*t-c*e+u,d-c*t-s*e]},h}function Jp(t){return tg((function(){return t}))()}function tg(t){var e,n,a,r,o,i,l,s,c,u,d=150,h=480,f=250,p=0,g=0,v=0,m=0,y=0,b=0,x=null,C=gf,k=null,w=Vf,_=.5;function S(t){return s(t[0]*ud,t[1]*ud)}function O(t){return(t=s.invert(t[0],t[1]))&&[t[0]*cd,t[1]*cd]}function A(){var t=Kp(d,0,0,b).apply(null,e(p,g)),a=(b?Kp:Qp)(d,h-t[0],f-t[1],b);return n=Qh(v,m,y),l=qh(e,a),s=qh(n,l),i=qp(l,_),T()}function T(){return c=u=null,S}return S.stream=function(t){return c&&u===t?c:c=$p(function(t){return Np({point:function(e,n){var a=t(e,n);return this.stream.point(a[0],a[1])}})}(n)(C(i(w(u=t)))))},S.preclip=function(t){return arguments.length?(C=t,x=void 0,T()):C},S.postclip=function(t){return arguments.length?(w=t,k=a=r=o=null,T()):w},S.clipAngle=function(t){return arguments.length?(C=+t?vf(x=t*ud):(x=null,gf),T()):x*cd},S.clipExtent=function(t){return arguments.length?(w=null==t?(k=a=r=o=null,Vf):bf(k=+t[0][0],a=+t[0][1],r=+t[1][0],o=+t[1][1]),T()):null==k?null:[[k,a],[r,o]]},S.scale=function(t){return arguments.length?(d=+t,A()):d},S.translate=function(t){return arguments.length?(h=+t[0],f=+t[1],A()):[h,f]},S.center=function(t){return arguments.length?(p=t[0]%360*ud,g=t[1]%360*ud,A()):[p*cd,g*cd]},S.rotate=function(t){return arguments.length?(v=t[0]%360*ud,m=t[1]%360*ud,y=t.length>2?t[2]%360*ud:0,A()):[v*cd,m*cd,y*cd]},S.angle=function(t){return arguments.length?(b=t%360*ud,A()):b*cd},S.precision=function(t){return arguments.length?(i=qp(l,_=t*t),T()):Cd(_)},S.fitExtent=function(t,e){return Yp(S,t,e)},S.fitSize=function(t,e){return Up(S,t,e)},S.fitWidth=function(t,e){return Gp(S,t,e)},S.fitHeight=function(t,e){return Xp(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&O,A()}}function eg(t){var e=0,n=od/3,a=tg(t),r=a(e,n);return r.parallels=function(t){return arguments.length?a(e=t[0]*ud,n=t[1]*ud):[e*cd,n*cd]},r}function ng(t,e){var n=bd(t),a=(n+bd(e))/2;if(dd(a)<ad)return function(t){var e=pd(t);function n(t,n){return[t*e,bd(n)/e]}return n.invert=function(t,n){return[t/e,_d(n*e)]},n}(t);var r=1+n*(2*a-n),o=Cd(r)/a;function i(t,e){var n=Cd(r-2*a*bd(e))/a;return[n*bd(t*=a),o-n*pd(t)]}return i.invert=function(t,e){var n=o-e;return[fd(t,dd(n))/a*xd(n),_d((r-(t*t+n*n)*a*a)/(2*a))]},i}function ag(){return eg(ng).scale(155.424).center([0,33.6442])}function rg(){return ag().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function og(t){return function(e,n){var a=pd(e),r=pd(n),o=t(a*r);return[o*r*bd(e),o*bd(n)]}}function ig(t){return function(e,n){var a=Cd(e*e+n*n),r=t(a),o=bd(r),i=pd(r);return[fd(e*o,a*i),_d(a&&n*o/a)]}}var lg=t.geoAzimuthalEqualAreaRaw=og((function(t){return Cd(2/(1+t))}));lg.invert=ig((function(t){return 2*_d(t/2)}));var sg=t.geoAzimuthalEquidistantRaw=og((function(t){return(t=wd(t))&&t/bd(t)}));function cg(t,e){return[t,md(kd((id+e)/2))]}function ug(t){var e,n,a,r=Jp(t),o=r.center,i=r.scale,l=r.translate,s=r.clipExtent,c=null;function u(){var o=od*i(),l=r(ef(r.rotate()).invert([0,0]));return s(null==c?[[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]]:t===cg?[[Math.max(l[0]-o,c),e],[Math.min(l[0]+o,n),a]]:[[c,Math.max(l[1]-o,e)],[n,Math.min(l[1]+o,a)]])}return r.scale=function(t){return arguments.length?(i(t),u()):i()},r.translate=function(t){return arguments.length?(l(t),u()):l()},r.center=function(t){return arguments.length?(o(t),u()):o()},r.clipExtent=function(t){return arguments.length?(null==t?c=e=n=a=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],a=+t[1][1]),u()):null==c?null:[[c,e],[n,a]]},u()}function dg(t){return kd((id+t)/2)}function hg(t,e){var n=pd(t),a=t===e?bd(t):md(n/pd(e))/md(dg(e)/dg(t)),r=n*yd(dg(t),a)/a;if(!a)return cg;function o(t,e){r>0?e<-id+ad&&(e=-id+ad):e>id-ad&&(e=id-ad);var n=r/yd(dg(e),a);return[n*bd(a*t),r-n*pd(a*t)]}return o.invert=function(t,e){var n=r-e,o=xd(a)*Cd(t*t+n*n);return[fd(t,dd(n))/a*xd(n),2*hd(yd(r/o,1/a))-id]},o}function fg(t,e){return[t,e]}function pg(t,e){var n=pd(t),a=t===e?bd(t):(n-pd(e))/(e-t),r=n/a+t;if(dd(a)<ad)return fg;function o(t,e){var n=r-e,o=a*t;return[n*bd(o),r-n*pd(o)]}return o.invert=function(t,e){var n=r-e;return[fd(t,dd(n))/a*xd(n),r-xd(a)*Cd(t*t+n*n)]},o}sg.invert=ig((function(t){return t})),cg.invert=function(t,e){return[t,2*hd(vd(e))-id]},fg.invert=fg;var gg=1.340264,vg=-.081106,mg=893e-6,yg=.003796,bg=Cd(3)/2;function xg(t,e){var n=_d(bg*bd(e)),a=n*n,r=a*a*a;return[t*pd(n)/(bg*(gg+3*vg*a+r*(7*mg+9*yg*a))),n*(gg+vg*a+r*(mg+yg*a))]}function Cg(t,e){var n=pd(e),a=pd(t)*n;return[n*bd(t)/a,bd(e)/a]}function kg(t,e,n,a){return 1===t&&1===e&&0===n&&0===a?Vf:Np({point:function(r,o){this.stream.point(r*t+n,o*e+a)}})}function wg(t,e){var n=e*e,a=n*n;return[t*(.8707-.131979*n+a*(a*(.003971*n-.001529*a)-.013791)),e*(1.007226+n*(.015085+a*(.028874*n-.044475-.005916*a)))]}function _g(t,e){return[pd(e)*bd(t),bd(e)]}function Sg(t,e){var n=pd(e),a=1+pd(t)*n;return[n*bd(t)/a,bd(e)/a]}function Og(t,e){return[md(kd((id+e)/2)),-t]}xg.invert=function(t,e){for(var n,a=e,r=a*a,o=r*r*r,i=0;i<12&&(o=(r=(a-=n=(a*(gg+vg*r+o*(mg+yg*r))-e)/(gg+3*vg*r+o*(7*mg+9*yg*r)))*a)*r*r,!(dd(n)<rd));++i);return[bg*t*(gg+3*vg*r+o*(7*mg+9*yg*r))/pd(a),_d(bd(a)/bg)]},Cg.invert=ig(hd),wg.invert=function(t,e){var n,a=e,r=25;do{var o=a*a,i=o*o;a-=n=(a*(1.007226+o*(.015085+i*(.028874*o-.044475-.005916*i)))-e)/(1.007226+o*(.045255+i*(.259866*o-.311325-.005916*11*i)))}while(dd(n)>ad&&--r>0);return[t/(.8707+(o=a*a)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),a]},_g.invert=ig(_d),Sg.invert=ig((function(t){return 2*hd(t)})),Og.invert=function(t,e){return[-e,2*hd(vd(t))-id]};var Ag=Math.abs,Tg=Math.atan,Pg=Math.atan2,Eg=Math.cos,Lg=Math.exp,Mg=Math.floor,Dg=Math.log,Ig=Math.max,Rg=Math.min,zg=Math.sin,jg=Math.tan,Fg=1e-6,Bg=Math.PI,Hg=Bg/2,Ng=Bg/4,Wg=(Math.SQRT1_2,Zg(2)),Vg=2*Bg,Yg=180/Bg,Ug=Bg/180;function Gg(t){return t>1?Hg:t<-1?-Hg:Math.asin(t)}function Xg(t){return t>1?0:t<-1?Bg:Math.acos(t)}function Zg(t){return t>0?Math.sqrt(t):0}function qg(t){var e=jg(t/2),n=2*Dg(Eg(t/2))/(e*e);function a(t,e){var a=Eg(t),r=Eg(e),o=zg(e),i=r*a,l=-((1-i?Dg((1+i)/2)/(1-i):-.5)+n/(1+i));return[l*r*zg(t),l*o]}return a.invert=function(e,a){var r,o=Zg(e*e+a*a),i=-t/2,l=50;if(!o)return[0,0];do{var s=i/2,c=Eg(s),u=zg(s),d=jg(s),h=Dg(1/c);i-=r=(2/d*h-n*d-o)/(-h/(u*u)+1-n/(2*c*c))}while(Ag(r)>Fg&&--l>0);var f=zg(i);return[Pg(e*f,o*Eg(i)),Gg(a*f/o)]},a}function $g(t,e){var n=Eg(e),a=function(t){return t?t/Math.sin(t):1}(Xg(n*Eg(t/=2)));return[2*n*zg(t)*a,zg(e)*a]}function Qg(t){var e=zg(t),n=Eg(t),a=t>=0?1:-1,r=jg(a*t),o=(1+e-n)/2;function i(t,i){var l=Eg(i),s=Eg(t/=2);return[(1+l)*zg(t),(a*i>-Pg(s,r)-.001?0:10*-a)+o+zg(i)*n-(1+l)*e*s]}return i.invert=function(t,i){var l=0,s=0,c=50;do{var u=Eg(l),d=zg(l),h=Eg(s),f=zg(s),p=1+h,g=p*d-t,v=o+f*n-p*e*u-i,m=p*u/2,y=-d*f,b=e*p*d/2,x=n*h+e*u*f,C=y*b-x*m,k=(v*y-g*x)/C/2,w=(g*b-v*m)/C;l-=k,s-=w}while((Ag(k)>Fg||Ag(w)>Fg)&&--c>0);return a*s>-Pg(Eg(l),r)-.001?[2*l,s]:null},i}function Kg(t,e){if(arguments.length<2&&(e=t),1===e)return lg;if(e===1/0)return Jg;function n(n,a){var r=lg(n/e,a);return r[0]*=t,r}return n.invert=function(n,a){var r=lg.invert(n/t,a);return r[0]*=e,r},n}function Jg(t,e){return[t*Eg(e)/Eg(e/=2),2*zg(e)]}function tv(t,e){var n,a=t*zg(e),r=30;do{e-=n=(e+zg(e)-a)/(1+Eg(e))}while(Ag(n)>Fg&&--r>0);return e/2}function ev(t,e,n){function a(a,r){return[t*a*Eg(r=tv(n,r)),e*zg(r)]}return a.invert=function(a,r){return r=Gg(r/e),[a/(t*Eg(r)),Gg((2*r+zg(2*r))/n)]},a}$g.invert=function(t,e){if(!(t*t+4*e*e>Bg*Bg+Fg)){var n=t,a=e,r=25;do{var o,i=zg(n),l=zg(n/2),s=Eg(n/2),c=zg(a),u=Eg(a),d=zg(2*a),h=c*c,f=u*u,p=l*l,g=1-f*s*s,v=g?Xg(u*s)*Zg(o=1/g):o=0,m=2*v*u*l-t,y=v*c-e,b=o*(f*p+v*u*s*h),x=o*(.5*i*d-2*v*c*l),C=.25*o*(d*l-v*c*f*i),k=o*(h*s+v*p*u),w=x*C-k*b;if(!w)break;var _=(y*x-m*k)/w,S=(m*C-y*b)/w;n-=_,a-=S}while((Ag(_)>Fg||Ag(S)>Fg)&&--r>0);return[n,a]}},Jg.invert=function(t,e){var n=2*Gg(e/2);return[t*Eg(n/2)/Eg(n),n]};ev(Wg/Hg,Wg,Bg);ev(1,4/Bg,Bg);function nv(t,e,n,a,r,o){var i,l=Eg(o);if(Ag(t)>1||Ag(o)>1)i=Xg(n*r+e*a*l);else{var s=zg(t/2),c=zg(o/2);i=2*Gg(Zg(s*s+e*a*c*c))}return Ag(i)>Fg?[i,Pg(a*zg(o),e*r-n*a*l)]:[0,0]}function av(t,e,n){return Xg((t*t+e*e-n*n)/(2*t*e))}function rv(t){return t-2*Bg*Mg((t+Bg)/(2*Bg))}function ov(t){return t[0]*=Ug,t[1]*=Ug,t}function iv(t){var e=Eg(t);function n(t,n){return[t*e,(1+e)*jg(n/2)]}return n.invert=function(t,n){return[t/e,2*Tg(n/(1+e))]},n}function lv(t,e){var n=Zg(Bg*(4+Bg));return[2/n*t*(1+Zg(1-4*e*e/(Bg*Bg))),4/n*e]}function sv(t,e){var n=(2+Hg)*zg(e);e/=2;for(var a=0,r=1/0;a<10&&Ag(r)>Fg;a++){var o=Eg(e);e-=r=(e+zg(e)*(o+2)-n)/(2*o*(1+o))}return[2/Zg(Bg*(4+Bg))*t*(1+Eg(e)),2*Zg(Bg/(4+Bg))*zg(e)]}function cv(t,e){return[t*(1+Eg(e))/Zg(2+Bg),2*e/Zg(2+Bg)]}function uv(t,e){for(var n=(1+Hg)*zg(e),a=0,r=1/0;a<10&&Ag(r)>Fg;a++)e-=r=(e+zg(e)-n)/(1+Eg(e));return n=Zg(2+Bg),[t*(1+Eg(e))/n,2*e/n]}lv.invert=function(t,e){var n=Zg(Bg*(4+Bg))/2;return[t*n/(1+Zg(1-e*e*(4+Bg)/(4*Bg))),e*n/2]},sv.invert=function(t,e){var n=e*Zg((4+Bg)/Bg)/2,a=Gg(n),r=Eg(a);return[t/(2/Zg(Bg*(4+Bg))*(1+r)),Gg((a+n*(r+2))/(2+Hg))]},cv.invert=function(t,e){var n=Zg(2+Bg),a=e*n/2;return[n*t/(1+Eg(a)),a]},uv.invert=function(t,e){var n=1+Hg,a=Zg(n/2);return[2*t*a/(1+Eg(e*=a)),Gg((e+zg(e))/n)]};var dv=Eg(35*Ug);function hv(t,e){var n=jg(e/2);return[t*dv*Zg(1-n*n),(1+dv)*n]}function fv(t,e,n,a,r,o,i,l){function s(s,c){if(!c)return[t*s/Bg,0];var u=c*c,d=t+u*(e+u*(n+u*a)),h=c*(r-1+u*(o-l+u*i)),f=(d*d+h*h)/(2*h),p=s*Gg(d/f)/Bg;return[f*zg(p),c*(1+u*l)+f*(1-Eg(p))]}return arguments.length<8&&(l=0),s.invert=function(s,c){var u,d,h=Bg*s/t,f=c,p=50;do{var g=f*f,v=t+g*(e+g*(n+g*a)),m=f*(r-1+g*(o-l+g*i)),y=v*v+m*m,b=2*m,x=y/b,C=x*x,k=Gg(v/x)/Bg,w=h*k,_=v*v,S=(2*e+g*(4*n+6*g*a))*f,O=r+g*(3*o+5*g*i),A=(2*(v*S+m*(O-1))*b-y*(2*(O-1)))/(b*b),T=Eg(w),P=zg(w),E=x*T,L=x*P,M=h/Bg*(1/Zg(1-_/C))*(S*x-v*A)/C,D=L-s,I=f*(1+g*l)+x-E-c,R=A*P+E*M,z=E*k,j=1+A-(A*T-L*M),F=L*k,B=R*F-j*z;if(!B)break;h-=u=(I*R-D*j)/B,f-=d=(D*F-I*z)/B}while((Ag(u)>Fg||Ag(d)>Fg)&&--p>0);return[h,f]},s}hv.invert=function(t,e){var n=e/(1+dv);return[t&&t/(dv*Zg(1-n*n)),2*Tg(n)]};var pv=fv(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);var gv=fv(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);var vv=fv(5/6*Bg,-.62636,-.0344,0,1.3493,-.05524,0,.045);function mv(t,e){var n=t*t,a=e*e;return[t*(1-.162388*a)*(.87-952426e-9*n*n),e*(1+a/12)]}mv.invert=function(t,e){var n,a=t,r=e,o=50;do{var i=r*r;r-=n=(r*(1+i/12)-e)/(1+i/4)}while(Ag(n)>Fg&&--o>0);o=50,t/=1-.162388*i;do{var l=(l=a*a)*l;a-=n=(a*(.87-952426e-9*l)-t)/(.87-.00476213*l)}while(Ag(n)>Fg&&--o>0);return[a,r]};var yv=fv(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function bv(t,e){return[3/Vg*t*Zg(Bg*Bg/3-e*e),e]}function xv(t,e){return[t,1.25*Dg(jg(Ng+.4*e))]}bv.invert=function(t,e){return[Vg/3*t/Zg(Bg*Bg/3-e*e),e]},xv.invert=function(t,e){return[t,2.5*Tg(Lg(.8*e))-.625*Bg]};var Cv=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];function kv(){}function wv(t,e){return{type:"FeatureCollection",features:t.features.map((function(t){return _v(t,e)}))}}function _v(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:Sv(t.geometry,e)}}function Sv(t,e){if(!t)return null;if("GeometryCollection"===t.type)return function(t,e){return{type:"GeometryCollection",geometries:t.geometries.map((function(t){return Sv(t,e)}))}}(t,e);var n;switch(t.type){case"Point":case"MultiPoint":n=Tv;break;case"LineString":case"MultiLineString":n=Pv;break;case"Polygon":case"MultiPolygon":case"Sphere":n=Ev;break;default:return null}return Md(t,e(n)),n.result()}[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(t){return t.map((function(t){return Cv[t]}))}));var Ov=[],Av=[],Tv={point:function(t,e){Ov.push([t,e])},result:function(){var t=Ov.length?Ov.length<2?{type:"Point",coordinates:Ov[0]}:{type:"MultiPoint",coordinates:Ov}:null;return Ov=[],t}},Pv={lineStart:kv,point:function(t,e){Ov.push([t,e])},lineEnd:function(){Ov.length&&(Av.push(Ov),Ov=[])},result:function(){var t=Av.length?Av.length<2?{type:"LineString",coordinates:Av[0]}:{type:"MultiLineString",coordinates:Av}:null;return Av=[],t}},Ev={polygonStart:kv,lineStart:kv,point:function(t,e){Ov.push([t,e])},lineEnd:function(){var t=Ov.length;if(t){do{Ov.push(Ov[0].slice())}while(++t<4);Av.push(Ov),Ov=[]}},polygonEnd:kv,result:function(){if(!Av.length)return null;var t=[],e=[];return Av.forEach((function(n){!function(t){if((e=t.length)<4)return!1;for(var e,n=0,a=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)a+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return a<=0}(n)?e.push(n):t.push([n])})),e.forEach((function(e){var n=e[0];t.some((function(t){if(function(t,e){for(var n=e[0],a=e[1],r=!1,o=0,i=t.length,l=i-1;o<i;l=o++){var s=t[o],c=s[0],u=s[1],d=t[l],h=d[0],f=d[1];u>a^f>a&&n<(h-c)*(a-u)/(f-u)+c&&(r=!r)}return r}(t[0],n))return t.push(e),!0}))||t.push([e])})),Av=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}};var Lv=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Mv(t,e){var n,a=Rg(18,36*Ag(e)/Bg),r=Mg(a),o=a-r,i=(n=Lv[r])[0],l=n[1],s=(n=Lv[++r])[0],c=n[1],u=(n=Lv[Rg(19,++r)])[0],d=n[1];return[t*(s+o*(u-i)/2+o*o*(u-2*s+i)/2),(e>0?Hg:-Hg)*(c+o*(d-l)/2+o*o*(d-2*c+l)/2)]}function Dv(t,e){var n=function(t){function e(e,n){var a=Eg(n),r=(t-1)/(t-a*Eg(e));return[r*a*zg(e),r*zg(n)]}return e.invert=function(e,n){var a=e*e+n*n,r=Zg(a),o=(t-Zg(1-a*(t+1)/(t-1)))/((t-1)/r+r/(t-1));return[Pg(e*o,r*Zg(1-o*o)),r?Gg(n*o/r):0]},e}(t);if(!e)return n;var a=Eg(e),r=zg(e);function o(e,o){var i=n(e,o),l=i[1],s=l*r/(t-1)+a;return[i[0]*a/s,l/s]}return o.invert=function(e,o){var i=(t-1)/(t-1-o*r);return n.invert(i*e,i*o*a)},o}Lv.forEach((function(t){t[1]*=1.0144})),Mv.invert=function(t,e){var n=e/Hg,a=90*n,r=Rg(18,Ag(a/5)),o=Ig(0,Mg(r));do{var i=Lv[o][1],l=Lv[o+1][1],s=Lv[Rg(19,o+2)][1],c=s-i,u=s-2*l+i,d=2*(Ag(n)-l)/c,h=u/c,f=d*(1-h*d*(1-2*h*d));if(f>=0||1===o){a=(e>=0?5:-5)*(f+r);var p,g=50;do{f=(r=Rg(18,Ag(a)/5))-(o=Mg(r)),i=Lv[o][1],l=Lv[o+1][1],s=Lv[Rg(19,o+2)][1],a-=(p=(e>=0?Hg:-Hg)*(l+f*(s-i)/2+f*f*(s-2*l+i)/2)-e)*Yg}while(Ag(p)>1e-12&&--g>0);break}}while(--o>=0);var v=Lv[o][0],m=Lv[o+1][0],y=Lv[Rg(19,o+2)][0];return[t/(m+f*(y-v)/2+f*f*(y-2*m+v)/2),a*Ug]};var Iv=-180,Rv=-179.9999,zv=179.9999,jv=-89.9999,Fv=89.9999;function Bv(t){return t.length>0}function Hv(t){return Math.floor(1e4*t)/1e4}function Nv(t){return-90===t||90===t?[0,t]:[Iv,Hv(t)]}function Wv(t){var e=t[0],n=t[1],a=!1;return e<=Rv?(e=Iv,a=!0):e>=zv&&(e=180,a=!0),n<=jv?(n=-90,a=!0):n>=Fv&&(n=90,a=!0),a?[e,n]:t}function Vv(t){return t.map(Wv)}function Yv(t,e,n){for(var a=0,r=t.length;a<r;++a){var o=t[a].slice();n.push({index:-1,polygon:e,ring:o});for(var i=0,l=o.length;i<l;++i){var s=o[i],c=s[0],u=s[1];if(c<=Rv||c>=zv||u<=jv||u>=Fv){o[i]=Wv(s);for(var d=i+1;d<l;++d){var h=o[d],f=h[0],p=h[1];if(f>Rv&&f<zv&&p>jv&&p<Fv)break}if(d===i+1)continue;if(i){var g={index:-1,polygon:e,ring:o.slice(0,i+1)};g.ring[g.ring.length-1]=Nv(u),n[n.length-1]=g}else n.pop();if(d>=l)break;n.push({index:-1,polygon:e,ring:o=o.slice(d-1)}),o[0]=Nv(o[0][1]),i=-1,l=o.length}}}}function Uv(t){var e,n,a,r,o,i,l=t.length,s={},c={};for(e=0;e<l;++e)a=(n=t[e]).ring[0],o=n.ring[n.ring.length-1],a[0]!==o[0]||a[1]!==o[1]?(n.index=e,s[a]=c[o]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<l;++e)if(n=t[e]){if(a=n.ring[0],o=n.ring[n.ring.length-1],r=c[a],i=s[o],delete s[a],delete c[o],a[0]===o[0]&&a[1]===o[1]){n.polygon.push(n.ring);continue}r?(delete c[a],delete s[r.ring[0]],r.ring.pop(),t[r.index]=null,n={index:-1,polygon:r.polygon,ring:r.ring.concat(n.ring)},r===i?n.polygon.push(n.ring):(n.index=l++,t.push(s[n.ring[0]]=c[n.ring[n.ring.length-1]]=n))):i?(delete s[o],delete c[i.ring[i.ring.length-1]],n.ring.pop(),n={index:l++,polygon:i.polygon,ring:n.ring.concat(i.ring)},t[i.index]=null,t.push(s[n.ring[0]]=c[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function Gv(t){var e={type:"Feature",geometry:Xv(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function Xv(t){if(null==t)return t;var e,n,a,r;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(Xv)};break;case"Point":e={type:"Point",coordinates:Wv(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:Vv(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(Vv)};break;case"Polygon":var o=[];Yv(t.coordinates,o,n=[]),Uv(n),e={type:"Polygon",coordinates:o};break;case"MultiPolygon":n=[],a=-1,r=t.coordinates.length;for(var i=new Array(r);++a<r;)Yv(t.coordinates[a],i[a]=[],n);Uv(n),e={type:"MultiPolygon",coordinates:i.filter(Bv)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}var Zv=4*Bg+3*Zg(3),qv=2*Zg(2*Bg*Zg(3)/Zv),$v=ev(qv*Zg(3)/Bg,qv,Zv/6);function Qv(t,e){return[t*Zg(1-3*e*e/(Bg*Bg)),e]}Qv.invert=function(t,e){return[t/Zg(1-3*e*e/(Bg*Bg)),e]};var Kv=Math.acos,Jv=Math.asin,tm=Math.atan2,em=Math.cos,nm=Math.max,am=Math.min,rm=Math.PI,om=Math.sin,im=Math.sqrt,lm=rm/180,sm=180/rm,cm=t.versor=function(t){var e=t[0]/2*lm,n=om(e),a=em(e),r=t[1]/2*lm,o=om(r),i=em(r),l=t[2]/2*lm,s=om(l),c=em(l);return[a*i*c+n*o*s,n*i*c-a*o*s,a*o*c+n*i*s,a*i*s-n*o*c]};function um(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function dm(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function hm(t){return t}function fm(t){if(null==t)return hm;var e,n,a=t.scale[0],r=t.scale[1],o=t.translate[0],i=t.translate[1];return function(t,l){l||(e=n=0);var s=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*a+o,u[1]=(n+=t[1])*r+i;s<c;)u[s]=t[s],++s;return u}}function pm(t){var e,n=fm(t.transform),a=1/0,r=a,o=-a,i=-a;function l(t){(t=n(t))[0]<a&&(a=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>i&&(i=t[1])}function s(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(s);break;case"Point":l(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(l)}}for(e in t.arcs.forEach((function(t){for(var e,l=-1,s=t.length;++l<s;)(e=n(t[l],l))[0]<a&&(a=e[0]),e[0]>o&&(o=e[0]),e[1]<r&&(r=e[1]),e[1]>i&&(i=e[1])})),t.objects)s(t.objects[e]);return[a,r,o,i]}function gm(t,e){var n=e.id,a=e.bbox,r=null==e.properties?{}:e.properties,o=vm(t,e);return null==n&&null==a?{type:"Feature",properties:r,geometry:o}:null==a?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:a,properties:r,geometry:o}}function vm(t,e){var n=fm(t.transform),a=t.arcs;function r(t,e){e.length&&e.pop();for(var r=a[t<0?~t:t],o=0,i=r.length;o<i;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,a=t.length,r=a-e;r<--a;)n=t[r],t[r++]=t[a],t[a]=n}(e,i)}function o(t){return n(t)}function i(t){for(var e=[],n=0,a=t.length;n<a;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function l(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(l)}return function t(e){var n,a=e.type;switch(a){case"GeometryCollection":return{type:a,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=i(e.arcs);break;case"MultiLineString":n=e.arcs.map(i);break;case"Polygon":n=s(e.arcs);break;case"MultiPolygon":n=e.arcs.map(s);break;default:return null}return{type:a,coordinates:n}}(e)}function mm(t,e){var n={},a={},r={},o=[],i=-1;function l(t,e){for(var a in t){var r=t[a];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),o.push(r)}}return e.forEach((function(n,a){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++i],e[i]=n,e[a]=r)})),e.forEach((function(e){var n,o,i=function(e){var n,a=t.arcs[e<0?~e:e],r=a[0];t.transform?(n=[0,0],a.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=a[a.length-1];return e<0?[n,r]:[r,n]}(e),l=i[0],s=i[1];if(n=r[l])if(delete r[n.end],n.push(e),n.end=s,o=a[s]){delete a[o.start];var c=o===n?n:n.concat(o);a[c.start=n.start]=r[c.end=o.end]=c}else a[n.start]=r[n.end]=n;else if(n=a[s])if(delete a[n.start],n.unshift(e),n.start=l,o=r[l]){delete r[o.end];var u=o===n?n:o.concat(n);a[u.start=o.start]=r[u.end=n.end]=u}else a[n.start]=r[n.end]=n;else a[(n=[e]).start=l]=r[n.end=s]=n})),l(r,a),l(a,r),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function ym(t,e,n){var a,r,o;if(arguments.length>1)a=bm(t,e,n);else for(r=0,a=new Array(o=t.arcs.length);r<o;++r)a[r]=r;return{type:"MultiLineString",arcs:mm(t,a)}}function bm(t,e,n){var a,r=[],o=[];function i(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:a})}function l(t){t.forEach(i)}function s(t){t.forEach(l)}return function t(e){switch(a=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":l(e.arcs);break;case"MultiLineString":case"Polygon":s(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(s)}(e.arcs)}}(e),o.forEach(null==n?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}function xm(t,e){var n={},a=[],r=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),a.push(t)}function i(e){return function(t){for(var e,n=-1,a=t.length,r=t[a-1],o=0;++n<a;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(vm(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),a.forEach((function(t){if(!t._){var e=[],a=[t];for(t._=1,r.push(e);t=a.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,a.push(t))}))}))}))}})),a.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var a,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&r.push(t)}))}))})),(a=(r=mm(t,r)).length)>1)for(var o,l,s=1,c=i(r[0]);s<a;++s)(o=i(r[s]))>c&&(l=r[0],r[0]=r[s],r[s]=l,c=o);return r}))}}function Cm(t,e){for(var n=0,a=t.length;n<a;){var r=n+a>>>1;t[r]<e?n=r+1:a=r}return n}function km(t){if(null==t)return hm;var e,n,a=t.scale[0],r=t.scale[1],o=t.translate[0],i=t.translate[1];return function(t,l){l||(e=n=0);var s=2,c=t.length,u=new Array(c),d=Math.round((t[0]-o)/a),h=Math.round((t[1]-i)/r);for(u[0]=d-e,e=d,u[1]=h-n,n=h;s<c;)u[s]=t[s],++s;return u}}cm.cartesian=function(t){var e=t[0]*lm,n=t[1]*lm,a=em(n);return[a*em(e),a*om(e),om(n)]},cm.rotation=function(t){return[tm(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*sm,Jv(nm(-1,am(1,2*(t[0]*t[2]-t[3]*t[1]))))*sm,tm(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*sm]},cm.delta=function(t,e,n){2==arguments.length&&(n=1);var a=um(t,e),r=im(dm(a,a));if(!r)return[1,0,0,0];var o=n*Kv(nm(-1,am(1,dm(t,e))))/2,i=om(o);return[em(o),a[2]/r*i,-a[1]/r*i,a[0]/r*i]},cm.multiply=function(t,e){return[t[0]*e[0]-t[1]*e[1]-t[2]*e[2]-t[3]*e[3],t[0]*e[1]+t[1]*e[0]+t[2]*e[3]-t[3]*e[2],t[0]*e[2]-t[1]*e[3]+t[2]*e[0]+t[3]*e[1],t[0]*e[3]+t[1]*e[2]-t[2]*e[1]+t[3]*e[0]]};t.topojson=Object.freeze({bbox:pm,feature:function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return gm(t,e)}))}:gm(t,e)},mesh:function(t){return vm(t,ym.apply(this,arguments))},meshArcs:ym,merge:function(t){return vm(t,xm.apply(this,arguments))},mergeArcs:xm,neighbors:function(t){var e={},n=t.map((function(){return[]}));function a(t,n){t.forEach((function(t){t<0&&(t=~t);var a=e[t];a?a.push(n):e[t]=[n]}))}function r(t,e){t.forEach((function(t){a(t,e)}))}var o={LineString:a,MultiLineString:r,Polygon:r,MultiPolygon:function(t,e){t.forEach((function(t){r(t,e)}))}};for(var i in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in o&&o[e.type](e.arcs,n)})),e)for(var l=e[i],s=l.length,c=0;c<s;++c)for(var u=c+1;u<s;++u){var d,h=l[c],f=l[u];(d=n[h])[i=Cm(d,f)]!==f&&d.splice(i,0,f),(d=n[f])[i=Cm(d,h)]!==h&&d.splice(i,0,h)}return n},quantize:function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)l=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be 2");var n,a=(l=t.bbox||pm(t))[0],r=l[1],o=l[2],i=l[3];e={scale:[o-a?(o-a)/(n-1):1,i-r?(i-r)/(n-1):1],translate:[a,r]}}var l,s,c=km(e),u=t.objects,d={};function h(t){return c(t)}function f(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(f)};break;case"Point":e={type:"Point",coordinates:h(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(h)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(s in u)d[s]=f(u[s]);return{type:"Topology",bbox:l,transform:e,objects:d,arcs:t.arcs.map((function(t){var e,n=0,a=1,r=t.length,o=new Array(r);for(o[0]=c(t[0],0);++n<r;)((e=c(t[n],n))[0]||e[1])&&(o[a++]=e);return 1===a&&(o[a++]=[0,0]),o.length=a,o}))}},transform:fm,untransform:km});function wm(t,e,n,a){if(isNaN(e)||isNaN(n))return t;var r,o,i,l,s,c,u,d,h,f=t._root,p={data:a},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((c=e>=(o=(g+m)/2))?g=o:m=o,(u=n>=(i=(v+y)/2))?v=i:y=i,r=f,!(f=f[d=u<<1|c]))return r[d]=p,t;if(l=+t._x.call(null,f.data),s=+t._y.call(null,f.data),e===l&&n===s)return p.next=f,r?r[d]=p:t._root=p,t;do{r=r?r[d]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+m)/2))?g=o:m=o,(u=n>=(i=(v+y)/2))?v=i:y=i}while((d=u<<1|c)==(h=(s>=i)<<1|l>=o));return r[h]=f,r[d]=p,t}function _m(t,e,n,a,r){this.node=t,this.x0=e,this.y0=n,this.x1=a,this.y1=r}function Sm(t){return t[0]}function Om(t){return t[1]}function Am(t,e,n){var a=new Tm(null==e?Sm:e,null==n?Om:n,NaN,NaN,NaN,NaN);return null==t?a:a.addAll(t)}function Tm(t,e,n,a,r,o){this._x=t,this._y=e,this._x0=n,this._y0=a,this._x1=r,this._y1=o,this._root=void 0}function Pm(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Em=Am.prototype=Tm.prototype;Em.copy=function(){var t,e,n=new Tm(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return n;if(!a.length)return n._root=Pm(a),n;for(t=[{source:a,target:n._root=new Array(4)}];a=t.pop();)for(var r=0;r<4;++r)(e=a.source[r])&&(e.length?t.push({source:e,target:a.target[r]=new Array(4)}):a.target[r]=Pm(e));return n},Em.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return wm(this.cover(e,n),e,n,t)},Em.addAll=function(t){var e,n,a,r,o=t.length,i=new Array(o),l=new Array(o),s=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(a=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(i[n]=a,l[n]=r,a<s&&(s=a),a>u&&(u=a),r<c&&(c=r),r>d&&(d=r));if(s>u||c>d)return this;for(this.cover(s,c).cover(u,d),n=0;n<o;++n)wm(this,i[n],l[n],t[n]);return this},Em.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,a=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(a=Math.floor(e))+1;else{for(var i,l,s=r-n,c=this._root;n>t||t>=r||a>e||e>=o;)switch(l=(e<a)<<1|t<n,(i=new Array(4))[l]=c,c=i,s*=2,l){case 0:r=n+s,o=a+s;break;case 1:n=r-s,o=a+s;break;case 2:r=n+s,a=o-s;break;case 3:n=r-s,a=o-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=a,this._x1=r,this._y1=o,this},Em.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Em.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Em.find=function(t,e,n){var a,r,o,i,l,s,c,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new _m(g,u,d,h,f)),null==n?n=1/0:(u=t-n,d=e-n,h=t+n,f=e+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(r=s.x0)>h||(o=s.y0)>f||(i=s.x1)<u||(l=s.y1)<d))if(g.length){var v=(r+i)/2,m=(o+l)/2;p.push(new _m(g[3],v,m,i,l),new _m(g[2],r,m,v,l),new _m(g[1],v,o,i,m),new _m(g[0],r,o,v,m)),(c=(e>=m)<<1|t>=v)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=y*y+b*b;if(x<n){var C=Math.sqrt(n=x);u=t-C,d=e-C,h=t+C,f=e+C,a=g.data}}return a},Em.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(i=+this._y.call(null,t)))return this;var e,n,a,r,o,i,l,s,c,u,d,h,f=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(l=(p+v)/2))?p=l:v=l,(u=i>=(s=(g+m)/2))?g=s:m=s,e=f,!(f=f[d=u<<1|c]))return this;if(!f.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,h=d)}for(;f.data!==t;)if(a=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,a?(r?a.next=r:delete a.next,this):e?(r?e[d]=r:delete e[d],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=r,this)},Em.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Em.root=function(){return this._root},Em.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Em.visit=function(t){var e,n,a,r,o,i,l=[],s=this._root;for(s&&l.push(new _m(s,this._x0,this._y0,this._x1,this._y1));e=l.pop();)if(!t(s=e.node,a=e.x0,r=e.y0,o=e.x1,i=e.y1)&&s.length){var c=(a+o)/2,u=(r+i)/2;(n=s[3])&&l.push(new _m(n,c,u,o,i)),(n=s[2])&&l.push(new _m(n,a,u,c,i)),(n=s[1])&&l.push(new _m(n,c,r,o,u)),(n=s[0])&&l.push(new _m(n,a,r,c,u))}return this},Em.visitAfter=function(t){var e,n=[],a=[];for(this._root&&n.push(new _m(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,i=e.x0,l=e.y0,s=e.x1,c=e.y1,u=(i+s)/2,d=(l+c)/2;(o=r[0])&&n.push(new _m(o,i,l,u,d)),(o=r[1])&&n.push(new _m(o,u,l,s,d)),(o=r[2])&&n.push(new _m(o,i,d,u,c)),(o=r[3])&&n.push(new _m(o,u,d,s,c))}a.push(e)}for(;e=a.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Em.x=function(t){return arguments.length?(this._x=t,this):this._x},Em.y=function(t){return arguments.length?(this._y=t,this):this._y};t.version="2.1"})),function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?e(exports,require("@zohocharts/d3")):"function"==typeof define&&define.amd?define(["exports","@zohocharts/d3"],e):e((t=t||self).$ZC={},t.d3)}(this,(function(t,e){var n,a,r,o,i=e,l=e.select,s=e.selectAll,c=e.min,u=e.max,d=e.pairs,h=(o={top:e.axisTop,bottom:e.axisBottom,left:e.axisLeft,right:e.axisRight},function(t,e){return o[t](e)}),f=(r={linear:e.easeLinear,quad:e.easeQuad,"quad-in-out":e.easeQuadInOut,"quad-in":e.easeQuadIn,"quad-out":e.easeQuadOut,cubic:e.easeCubic,"cubic-in-out":e.easeCubicInOut,"cubic-in":e.easeCubicIn,"cubic-out":e.easeCubicOut,sin:e.easeSin,"sin-in-out":e.easeSinInOut,"sin-in":e.easeSinIn,"sin-out":e.easeSinOut,exp:e.easeExp,"exp-in-out":e.easeExpInOut,"exp-in":e.easeExpIn,"exp-out":e.easeExpOut,circle:e.easeCircle,"circle-in-out":e.easeCircleInOut,"circle-in":e.easeCircleIn,"circle-out":e.easeCircleOut,elastic:e.easeElastic,"elastic-in-out":e.easeElasticInOut,"elastic-in":e.easeElasticIn,"elastic-out":e.easeElasticOut,back:e.easeBack,"back-in-out":e.easeBackInOut,"back-in":e.easeBackIn,"back-out":e.easeBackOut,bounce:e.easeBounce,"bounce-in-out":e.easeBounceInOut,"bounce-in":e.easeBounceIn,"bounce-out":e.easeBounceOut},function(t){return"function"==typeof t?t:r[t]||e.easeLinear}),p=e.easeLinear,g=(a={linear:e.curveLinear,linearClosed:e.curveLinearClosed,cardinal:e.curveCardinal,cardinalClosed:e.curveCardinalClosed,monotone:e.curveMonotoneX,monotoneY:e.curveMonotoneY,stepBefore:e.curveStepBefore,stepAfter:e.curveStepAfter,"linear-closed":e.curveLinearClosed,"cardinal-closed":e.curveCardinalClosed,"step-before":e.curveStepBefore,"step-after":e.curveStepAfter},function(t,e,n){var r=a[t];return"monotone"==t&&e&&(r=a.monotoneY),null!=n&&r.tension&&r.tension(n),r}),v=(n={squarify:e.treemapSquarify,slice:e.treemapSlice,dice:e.treemapDice,sliceDice:e.treemapSliceDice,resquarify:e.treemapResquarify},function(t){return n[t]||n.squarify}),m=function(){var t=e.scaleLinear();return t.ticks=function(t){var n=this.domain();return e.ticks(n[0],n[n.length-1],null==t?10:t)},t},b=e.scaleBand,C=e.scaleTime,k=e.scalePoint,w=e.scaleOrdinal,_=e.scaleSqrt,S=e.scaleSymlog,O=e.bisector,A=e.sum,T=e.hsl,P=function(){var t=e.rgb.apply(this,arguments);return(isNaN(t.r)||isNaN(t.g)||isNaN(t.b))&&(t=e.rgb(0,0,0,t.opacity)),t},E=e.merge,L=e.map,M=e.set,D=e.zoom,I=e.zoomTransform,R=e.zoomIdentity,z=e.drag,j=e.extent,F=e.dispatch,B=e.ascending,H=e.descending,N=e.line,W=e.radialLine,V=e.area,Y=e.radialArea,U=e.arc,G=e.hierarchy,X=e.pack,Z=e.pie,q=e.partition,$=e.treemap,Q=e.interpolate,K=e.interpolateRgb,J=e.interpolateRound,tt=e.range,et=e.tickStep,nt=e.timeSunday,at=e.timeMonday,rt=e.timeTuesday,ot=e.timeWednesday,it=e.timeThursday,lt=e.timeFriday,st=e.timeSaturday,ct=e.timeSeconds,ut=e.timeHours,dt=e.timeDays,ht=e.timeWeeks,ft=e.timeMonths,pt=e.timeYears,gt=e.format,vt=e.timeFormat,mt=e.utcFormat,yt=e.timeParse,bt=e.formatLocale,xt=e.timeFormatLocale,Ct=e.brush,kt=e.brushX,wt=e.brushY,_t=e.brushSelection,St=e.topojson,Ot=e.versor,At=e.geoPath,Tt=e.geoGraticule,Pt=e.geoCentroid,Et=e.polygonContains,Lt=e.geoDistance,Mt=e.geoContains,Dt=e.quadtree,It=e.namespace,Rt=e.namespaces,zt=e.customEvent,jt=function(t){return t&&(i.event=t),i.event},Ft=(i.linkHorizontal,i.polygonCentroid),Bt=i.path,Ht=function(){},Nt=function(){},Wt=function(){},Vt=function(){},Yt=function(){};Yt.canvas=function(){};var Ut=function(){},Gt={},Xt=Gt.line=11,Zt=Gt.pie=8,qt=Gt.bar=9,$t=Gt.stkdbar=10,Qt=Gt.scatter=12,Kt=Gt.area=14,Jt=Gt.stkdarea=15,te=Gt.bubble=20,ee=Gt.packedbubble=19,ne=Gt.funnel=7,ae=Gt.web=16,re=Gt.sunburst=17,oe=Gt.pyramid=13,ie=Gt.dial=18,le=Gt.bullet=6,se=Gt.arearange=21,ce=Gt.bubblepie=5,ue=Gt.gantt=24,de=Gt.treemap=4,he=Gt.heatmap=3,fe=Gt.dotgrid=26,pe=Gt.waterfall=27,ge=Gt.wordcloud=2,ve=Gt.geoheatmap=30,me=Gt.geoscatter=31,ye=Gt.geobubble=32,be=Gt.geobubblepie=33,xe=Gt.boxplot=35,Ce=Gt.sankey=36,ke=Gt.barrange=37,we=L();we.set(Gt.line,"line"),we.set(Gt.pie,"pie"),we.set(Gt.bar,"bar"),we.set(Gt.stkdbar,"bar"),we.set(Gt.scatter,"scatter"),we.set(Gt.area,"area"),we.set(Gt.funnel,"funnel"),we.set(Gt.web,"web"),we.set(Gt.stkdarea,"area"),we.set(Gt.sunburst,"sunburst"),we.set(Gt.pyramid,"pyramid"),we.set(Gt.bubble,"bubble"),we.set(Gt.dial,"dial"),we.set(Gt.packedbubble,"packedbubble"),we.set(Gt.bullet,"bullet"),we.set(Gt.arearange,"arearange"),we.set(Gt.gantt,"gantt"),we.set(Gt.bubblepie,"bubblepie"),we.set(Gt.treemap,"treemap"),we.set(Gt.heatmap,"heatmap"),we.set(Gt.dotgrid,"dotgrid"),we.set(Gt.waterfall,"waterfall"),we.set(Gt.wordcloud,"wordcloud"),we.set(Gt.geoheatmap,"geoheatmap"),we.set(Gt.geoscatter,"geoscatter"),we.set(Gt.geobubble,"geobubble"),we.set(Gt.geobubblepie,"geobubblepie"),we.set(Gt.boxplot,"boxplot"),we.set(Gt.sankey,"sankey"),we.set(Gt.barrange,"barrange");var _e={};_e.axis=[Xt,Kt,Qt,Jt,qt,$t,te,le,se,ce,ue,he,pe,xe,ke],_e.flow=[Ce],_e.nonaxis=[Zt,ne,oe,ie,fe],_e.nonaxismultiseries=[ae,re,ee,de,ge],_e.polarAxis=[ae],_e.hierarchy=[ee,re,de],_e.continous=[Xt,Kt,Qt,Jt,te,se,ce],_e.discrete=[Zt,qt,$t,re,ne,oe,ie,le,ue,he,pe,xe,ke],_e.dotPlot=[Qt,te,me,ye],_e.piePlot=[Zt,ce,be],_e.zaxis=[te,ce,he,ye,be,Ce],_e.svgOnly=[Zt,ne,oe,ie,re,ee,ce,ue,pe,be,xe],_e.geo=[ve,me,ye,be],_e.bubble=M([te,ye]),_e.bubblePie=M([ce,be]),_e.rangePlot=M([se,ue,xe,ke]),_e.barPlot=M([qt,$t,le,ue,he,pe,xe,ke]),_e.markerPlot=M([Qt,te,Xt,Kt,se]),_e.whiskerPlot=M([qt,ke,xe]),_e.stacked=[qt,pe,le,Xt,Kt,ae,ke],_e.stackedPercent=[qt,Xt,Kt,ae,$t,Jt],_e.innerLabels=[Zt,ne,oe,re,ce,be],_e.datalabelsInside=[ee,he,de,ve],_e.parentLabels=[de,re],_e.nonAxisSingleSourceEvent=[de,ge],_e.singleSourceEvent=[].concat(_toConsumableArray(_e.axis),_toConsumableArray(_e.polarAxis),_toConsumableArray(_e.flow),_toConsumableArray(_e.nonAxisSingleSourceEvent));var Se,Oe,Ae,Te={},Pe={},Ee={},Le={},Me=function(){},De={},Ie=L(),Re=/\{\{val\((\d+)\)\}\}|\{\{col\((\d+)\)\}\}|\{\{per\((\d+)\)\}\}|\{\{splitper\((\d+)\)\}\}|\{\{maxper\((\d+)\)\}\}|\{\{geo\(([a-z0-9\-\_]+)\)\}\}|\{\{clr\}\}|\{\{valatpos\((\d+)\)\[(\d+)\]\}\}|\{\{symbol\(([a-z0-9\-\_]*)(?:,\s*({{clr}}|[a-z0-9\-_]+)\s*)?\)\}\}/gi,ze=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,je=/(illuminate|moody|flip|boxShadow|invert|ridge)/,Fe=/(fadeOut|blur|grayscale|saturate)/,Be=window.console,He=document.createElement("canvas").getContext("2d"),Ne=function(t){return t&&t.document?t.document:window},We=Math,Ve=We.round,Ye=We.floor,Ue=We.ceil,Ge=We.max,Xe=We.min,Ze=We.abs,qe=We.pow,$e=We.sqrt,Qe=We.cos,Ke=We.sin,Je=We.log,tn=We.tan,en=We.atan2,nn=We.atan,an=We.LN10,rn=We.random,on=We.PI,ln=2*on/360,sn=Number.MAX_SAFE_INTEGER||9007199254740991,cn=Number.EPSILON||2220446049250313e-31,un="px ",dn="none",hn="transparent",fn="pointer",pn=null,gn=[],vn=Ne().devicePixelRatio||1,mn=((Ae=function(){})._empty=!0,Ae),yn={};function bn(t){return yn[t]||mn}function xn(t,e){yn[t]=e}var Cn=bn,kn=xn,wn={getComponent:bn,setComponent:xn,getComponentMethod:function(t,e){return(bn(t)||mn)[e]||mn}},_n="".concat(window.location.protocol,"//").concat(window.location.hostname,"/src/images/"),Sn={minsize:15,maxsize:40,ratio:.038},On=!1,An=!1,Tn=function(t){if(!arguments.length)return An;An=t};wn.setComponent("dataEncoded",Tn);var Pn={scaleCorrection:!1,colorBandLegend:!0};wn.setComponent("modularized",(function(t){if(!arguments.length)return Pn;Pn=t}));var En,Ln=window.btoa||function(t){t=String(t);var e,n,a,r,o,i,l,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,u=[];if(/[^\x00-\xFF]/.test(t))throw Error("InvalidCharacterError");for(;c<t.length;)r=(e=t.charCodeAt(c++))>>2,o=(3&e)<<4|(n=t.charCodeAt(c++))>>4,i=(15&n)<<2|(a=t.charCodeAt(c++))>>6,l=63&a,c===t.length+2?(i=64,l=64):c===t.length+1&&(l=64),u.push(s.charAt(r),s.charAt(o),s.charAt(i),s.charAt(l));return u.join("")};En=function t(e,n){var a=e.nodeType;if(3==a)n.push(e.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==a){if(n.push("<",e.tagName),e.hasAttributes())for(var r=e.attributes,o=0,i=r.length;o<i;++o){var l=r.item(o);n.push(" ",l.name,"='",l.value,"'")}if(e.hasChildNodes()){n.push(">");var s=e.childNodes;for(o=0,i=s.length;o<i;++o)t(s.item(o),n);n.push("</",e.tagName,">")}else n.push("/>")}else{if(8!=a)throw"Error serializing XML. Unhandled node of type: ".concat(a);n.push("\x3c!--",e.nodeValue,"--\x3e")}},Object.defineProperty(SVGElement.prototype,"innerHTML",{configurable:!0,get:function(){for(var t=[],e=this.firstChild;e;)En(e,t),e=e.nextSibling;return t.join("")},set:function(t){for(;this.firstChild;)this.removeChild(this.firstChild);try{var e=new DOMParser;e.async=!1;for(var n="<svg xmlns='http://www.w3.org/2000/svg'>".concat(t,"</svg>"),a=e.parseFromString(n,"text/xml").documentElement.firstChild;a;)this.appendChild(this.ownerDocument.importNode(a,!0)),a=a.nextSibling}catch(t){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"outerHTML",{get:function(){var t,e;return e=document.createElement("div"),t=this.cloneNode(!0),e.appendChild(t),e.innerHTML},enumerable:!1,configurable:!0}),Object.defineProperty(SVGElement.prototype,"innerSVG",{configurable:!0,get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){var n=e>0?0|e:0;return this.substring(n,n+t.length)===t}}),function(){try{document.createElement("div").style.setProperty("opacity",0,"")}catch(r){var t=window.Element.prototype,e=t.setAttribute,n=t.setAttributeNS,a=window.CSSStyleDeclaration.prototype.setProperty;t.setAttribute=function(t,n){e.call(this,t,"".concat(n))},t.setAttributeNS=function(t,e,a){n.call(this,t,e,"".concat(a))},window.CSSStyleDeclaration.prototype.setProperty=function(t,e,n){a.call(this,t,"".concat(e),n)}}}();var Mn=window.Set;Mn&&Mn.prototype.values||(Mn=function(t,e){var n=e(a.prototype,{size:{configurable:!0,get:function(){return this._v.length}}});function a(t){e(this,{_v:{value:[]}}),t&&t.forEach(this.add,this)}function r(e,n){return-1<(t=e._v.indexOf(n))}function o(t){return[t,t]}return n.add=function(t){return r(this,t)||this._v.push(t),this},n.clear=function(){var t=this._v.length;this._v.splice(0,t)},n.delete=function(e){return r(this,e)&&!!this._v.splice(t,1)},n.entries=function(){return this._v.map(o)},n.forEach=function(t,e){this._v.forEach((function(n,a){t.call(e,n,n,this)}),this)},n.has=function(t){return r(this,t)},n.keys=n.values=function(){return this._v.slice(0)},a}(0,Object.defineProperties)),Math.sign=Math.sign||function(t){return(t>0)-(t<0)||+t},Math.log1p=Math.log1p||function(t){if((t=Number(t))<-1||t!=t)return NaN;if(0===t||t===1/0)return t;var e=t+1-1;return 0===e?t:t*(Math.log(t+1)/e)},Math.expm1=Math.expm1||function(t){return Math.exp(t)-1};var Dn=function(){};function In(t,e){t.attr("width",e.width).attr("height",e.height).style("fill-opacity",0).style("stroke",hn)}Dn.drawBorderBox=In,Dn.getActualTextBounds=function(t,e,n){e=e;var a=t,r=n*(2*on/360),o={};return o.width=Ze(a*Ke(r))+Ze(e*Qe(r)),o.height=Ze(a*Qe(r))+Ze(e*Ke(r)),o};var Rn=Dn.mergeJSON=function(t,e,n,a,r){t=t||{},e=e||{};var o=null!=a&&1==a?t:Hn(t);for(var i in e)e.hasOwnProperty(i)&&(null!=o[i]?null!=e[i]&&(ca(e[i])||ua(e[i]))?ua(e[i])&&!ua(o[i])?n&&(o[i]=e[i]):!ca(e[i])||o[i].constructor!=String&&o[i].constructor!=Number&&o[i].constructor!=Boolean?o[i]=Rn(o[i],e[i],n,a):n&&(o[i]=e[i]):1==n&&"object"===_typeof(o)&&(o[i]=e[i]):o[i]=e[i],o[i]&&o[i]._zc&&(o[i]=void 0));return o};function zn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof t?t.apply(n,e):t}function jn(t,e){if(null==t||t.constructor!=Object)return null!=e?e:void 0;var n,a="";for(var r in t)t.hasOwnProperty(r)&&((n=t[r])&&n.constructor===Object&&(n=ha(n)),a+=null==n||""==n?"$$":"".concat(n,"_"));return a=(a=(a=e+a).replace(/[.-]/g,"_")).replace(/[`~!@#$%^&*( )|+\-=?;:'",.<>{}[\]\\/\s]/gi,"_")}function Fn(t,e,n){var a=T(t),r=m().domain([-1,0,1]).range([T(a.h,a.s,.1),a,T(a.h,a.s,.9)]).interpolate(K),o=m().domain(e).range(n);return function(t){return r(o(t))}}function Bn(t){return t&&(t.isD3Selection&&(t=t.node()),Va(t))?t.getBBox():{x:0,y:0,height:0,width:0}}wn.setComponent("utils.mergeJSON",Rn),Dn.getValueOfPlotOptions=function(t,e){return function(n){return null!=t&&null!=t[n]?t[n]:null!=e&&null!=e[n]?e[n]:null}},Dn.getVal=zn,Dn.generateIdByPropValue=jn,Dn.getMonochromeColor=Fn,wn.setComponent("domUtils.getBBox",Bn);var Hn=Dn.simpleClone=function(t){var e,n=t;if(t&&"object"===_typeof(t))for(e in n=ua(t)?[]:{},t)n[e]=Hn(t[e]);return n};function Nn(t){if(!An||null==t)return t;var e=document.createElement("div");e.innerHTML=encodeURI(t);var n=e.textContent;return decodeURI(n)}function Wn(t){if(An||null==t)return t;var e=document.createElement("div");return e.textContent=Nn(t),e.innerHTML}function Vn(t){var e=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g),n=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi);return t.match(e)||t.match(n)}function Yn(t){return t.slice(0)}function Un(){return s("base").node()?location.href.split(location.search||location.hash||/[?#]/)[0]:""}function Gn(t,e,n){var a=e.replace(/\[(\w+)\]/g,".$1"),r=(a=a.replace(/^\./,"")).split(".").reduce((function(t,e){return na(t)?t[e]:t}),t);return n?r:na(r)}function Xn(t){return!na(t)}function Zn(t){return Array.prototype.slice.call(t)}function qn(t,e,n){var a=[];for(var r in t)t.hasOwnProperty(r)&&sa(t[r])&&(e?e(t[r])&&a.push(t[r]):a.push(t[r]),n&&(a=a.slice(n[0],n[1])));return a}function $n(){var t=Zn(arguments),e=!0===t[0]&&t.shift(),n=t.shift();if("string"==typeof n){var a=fa(window,n);n="function"==typeof a?a:n}return"function"==typeof n?e?n.apply(t[0],t.splice(1)):n.apply(void 0,t):n}function Qn(t,e){return na(t)?"function"==typeof t?t.call(e):t:null}function Kn(t,e){for(var n,a=0,r=t.length;a<r&&(null==n||""===n);a++)t[a]&&(n=t[a][e]);return n}function Jn(t,e){var n=null==t||""===t?e:t,a=JSON.parse(n);return n="number"==typeof a?parseFloat(a):"boolean"==typeof a?JSON.parse(a):a}function ta(t,e,n,a,r,o){var i,l=Xe(r,o),s=a*l/100,c=n*l/100;return i=null==(i=t[e])||""===i?null:i<c?c:i>s?s:parseFloat(i)}function ea(t,e){var n=e[0],a=e[1];return!(t<n||t>a)}function na(t){return null!=t}function aa(t){return t>0}function ra(t){return null==t||"null"==t}function oa(t){return t+"".toLocaleLowerCase()==="true"}function ia(t){return"".concat((t+="").replace(/ /g,"px "),"px")}function la(t,e){return parseInt(t,e||10)}function sa(t){return t&&"object"===_typeof(t)}function ca(t){return t&&(t.constructor==Object||"Object"==t.constructor.name)}function ua(t){return Array.isArray?Array.isArray(t):!!t&&t.constructor===Array}function da(t){return"number"==typeof t&&!isNaN(t)}function ha(t,e){return na(t)?JSON.stringify(t,e):Oe}wn.setComponent("utils.simpleClone",Hn),wn.setComponent("domUtils.decodeHTML",Nn),Dn.encodeHTML=Wn,wn.setComponent("domUtils.encodeHTML",Wn),Dn.validateURL=Vn,Dn.d3_values=Yn,wn.setComponent("domUtils.getDefsLocation",Un),Dn.isObjectPropDefined=Gn,wn.setComponent("utils.isUndefined",Xn),wn.setComponent("utils.toArray",Zn),Dn.objectToArray=qn,wn.setComponent("utils.invokeFunction",$n),Dn.getValue=Qn,Dn.getValByPriority=Kn,wn.setComponent("utils.validateNullValue",Jn),Dn.validateValWithinLimit=ta,Dn.isWithinRange=ea,wn.setComponent("utils.defined",na),Dn.isPositive=aa,Dn.isNull=ra,Dn.isTrue=oa,Dn.shorthand_px=ia,Dn.pInt=la,Dn.isString=function(t){return"string"==typeof t},Dn.isObject=sa,Dn.isProperObject=ca,wn.setComponent("utils.isArray",ua),Dn.isNumber=da,Dn.jsonStringify=ha;var fa=Dn.getPropVal=function(t,e){return Gn(t,e,!0)},pa=Dn.setPropVal=function(t,e,n){var a=(e=(e=e.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split(".");return function t(e){var r=a.shift();if(null===r||0===a.length)return e[r]=n,!1;null!==e[r]&&"object"===_typeof(e[r])||(e[r]=isNaN(parseInt(a[0]))?{}:[]),t(e[r])}(t),t};function ga(t,e){if(!t||!e)return null;var n,a={};for(var r in t)if(t.hasOwnProperty(r)&&e.hasOwnProperty(r)){var o=t[r],i=e[r];if(!o||o.constructor!=Object&&o.constructor!=Array)o==i&&(a[r]=o,n=!0);else{var l=ga(o,i);null!=l&&(a[r]=l,n=!0)}}return n?a:null}function va(t){var e=P(t);return(299*e.r+587*e.g+114*e.b)/1e3<128}function ma(t){return va(t)?"#f8f8f8":"#444444"}function ya(t){return null!=t&&t===t.window}function ba(t){return ya(t)?t:9===t.nodeType&&t.defaultView}function xa(t){var e=t.getBoundingClientRect(),n=t&&t.ownerDocument,a=n.documentElement,r=ba(n);return{top:e.top+r.pageYOffset-a.clientTop,left:e.left+r.pageXOffset-a.clientLeft}}function Ca(t){return t?t.split(",").reverse().join():t}function ka(){return na(document.visibilityState)&&"visible"!==document.visibilityState}Dn.intersectObject=ga,Dn.isDarkColor=va,Dn.isLightColor=function(t){return!va(t)},Dn.getContrastColor=ma,Dn.isWindow=ya,Dn.getWindow=ba,Dn.offset=xa,Dn.stringifiedArrayReverse=Ca,Dn.isDocumentVisible=ka,Dn.elementIsVisible=function(t,e,n){var a=e.offsetHeight,r=xa(t).top-xa(e).top,o=r+t.offsetHeight;return r>=0&&o<=a||n&&(r<0&&o>0||r>0&&r<=a)};var wa=function(){var t,e,n=arguments,a=n.length;for(t=0;t<a;t++)if(na(e=n[t]))return e;return n[a-1]};function _a(t,e){for(var n=t.length,a=new Array(n),r=0;r<n;++r)a[r]=r;return a.sort((function(n,a){var r=t[n],o=t[a];return na(r)||(r=""),na(o)||(o=""),"integer"==e?o>r?1:o<r?-1:0:o.length>r.length?1:o.length<r.length?-1:0})),a}function Sa(t){return null===t.offsetParent}function Oa(t,e){if("object"!==_typeof(t))return!1;if(ua(t)||"number"==typeof t.length)Array.prototype.forEach.call(t,e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)}function Aa(t){if(arguments[1]){for(var e=1,n=arguments.length;e<n;e++){var a=arguments[e];for(var r in a)!t[r]&&a.hasOwnProperty(r)&&(t[r]=a[r])}return t}}function Ta(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not ".concat(_typeof(e)));var n=t.prototype;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),Aa(t.prototype,n)}function Pa(t,e,n){var a;return t.isD3Selection&&(t=t.node()),a=window.getComputedStyle(t),"width"===e?Xe(t.offsetWidth,t.scrollWidth)-Ea("padding-left",a,n)-Ea("padding-right",a,n):"height"===e?Xe(t.offsetHeight,t.scrollHeight)-Ea("padding-top",a,n)-Ea("padding-bottom",a,n):(a&&(a=a.getPropertyValue(e),wa(n,"opacity"!==e)&&(a=la(a))),a)}function Ea(t,e,n){var a;return e&&(a=e.getPropertyValue(t),wa(n,"opacity"!==t)&&(a=la(a))),a}function La(t){return t instanceof HTMLElement}function Ma(t){return ua(t)?t:[t]}function Da(t){var e,n,a,r;if(na(t)){var o=t.toString().split(" ");e=la(Ra([o[0],0])),n=la(Ra([o[1],o[0],0])),a=la(Ra([o[2],o[0],0])),r=la(Ra([o[3],o[1],o[0],0]))}else e=0,n=0,a=0,r=0;return{top:e,right:n,bottom:a,left:r}}function Ia(t){if(sa(t))return t;var e={},n=null!=t?t.toString().split("/"):null,a=null!=n&&null!=n[0]?n[0].split(" "):[],r=null!=n&&null!=n[1]?n[1].split(" "):a;return e.tlx=la(Ra([a[0]])),e.tly=la(Ra([r[0],a[0]])),e.trx=la(Ra([a[1],a[0]])),e.trY=la(Ra([r[1],r[0],a[1],a[0]])),e.brx=la(Ra([a[2],a[0]])),e.bry=la(Ra([r[2],r[0],a[2],a[0]])),e.blx=la(Ra([a[3],a[1],a[0]])),e.bly=la(Ra([r[3],r[1],a[3],a[0]])),e}function Ra(t,e){var n=null,a=t.length,r=0;for(e=wa(e,0);r<a&&!na(n);)n=null!=t[r]?t[r]:null,r++;return wa(n,e)}function za(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ja(t){var e=t.canvas,n=vn;return e.style.width="".concat(e.width,"px"),e.style.height="".concat(e.height,"px"),e.setAttribute("width",e.width*n),e.setAttribute("height",e.height*n),t.scale(n,n),t}function Fa(t,e){if(Array.prototype.find)return t.find(e);for(var n=t.length>>>0,a=0;a<n;){var r=t[a];if(e.call(e,r,a,t))return r;a++}}function Ba(t){return t.getRootNode?t.getRootNode():null!=t.parentNode?Ba(t.parentNode):t}function Ha(t){return Na(Ba(t))}function Na(t){return"#document-fragment"===t.nodeName&&"ShadowRoot"===t.constructor.name}function Wa(t){return Ha(t)||document.body.contains(t)}function Va(t){return Wa(t)&&l(t).style("display")!==dn}function Ya(t){var e=Ba(t);if(Na(e)){var n="_zc_fakeBody",a=e.querySelector(".".concat(n));return a||((a=document.createElement("div")).className=n,e.appendChild(a)),a}return document.body}function Ua(t){return Ba(t).ZC_DOCUMENT_INDEX}function Ga(t){if(t.isD3Selection&&(t=t.node()),na(t)&&Va(t))return t.getBoundingClientRect();var e={};return e.x=e.y=e.width=e.height=e.top=e.left=e.right=e.bottom=0,e}function Xa(t,e,n){return"string"==typeof t&&t.indexOf("%")>-1?e*+t.replace(/%/g,"")*.01:Jn(t,n)}function Za(t){return Object.getPrototypeOf(t.constructor.prototype)}function qa(t,e){return!!na(t)&&(t.includes?t.includes(e):t.indexOf(e)>-1)}Dn.pick=wa,Dn.arrayJoin=function(){var t=Zn(arguments),e=!0===t[0]&&t.shift(),n=e?t.shift():[];return e&&!t.length||t.forEach((function(t){for(var e=0,a=t.length;e<a;++e)n.push(t[e])})),n},Dn.sortByLength=function(t){return t.slice(0).sort((function(t,e){return na(t)||(t=""),na(e)||(e=""),e.length-t.length}))},Dn.sortByIndices=_a,Dn.isHidden=Sa,Dn.each=Oa,Dn.extend=Aa,Dn.inherit=Ta,Dn.removeElementFromArray=function(t,e){var n=t.indexOf(e);return n>-1&&t.splice(n,1),t},Dn.getStyle=Pa,Dn.isHTMLElement=La,Dn.splat=Ma,Dn.parseShortHandValue=Da,Dn.getBorderRadius=Ia,Dn.priorityBasedValue=Ra,Dn.toCapitalize=za,Dn.fixHDPI=ja,Dn.arrayFind=Fa,Dn.moveArrayElement=function(t,e,n){t.splice(n,0,t.splice(e,1)[0])},Dn.getRootNode=Ba,Dn.isShadowElement=Ha,Dn.isShadowRoot=Na,Dn.isElementOnDocument=Wa,Dn.isElementVisible=Va,Dn.getRootBody=Ba,Dn.getDocumentIndex=Ua,Dn.getBoundingRect=Ga,Dn.perToPx=Xa,Dn._super=Za,Dn.arrayIncludes=qa;var $a=qa;function Qa(t,e){var n=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return t>=n&&t<=a}function Ka(t){return t in document.documentElement.style}function Ja(t){return!na(t)||0===Object.keys(t).length&&t.constructor===Object}function tr(t){return{x:t[0][0],y:t[0][1],width:Ze(t[1][0]-t[0][0]),height:Ze(t[1][1]-t[0][1])}}function er(t,e){var n=_toConsumableArray(new Mn(t).values());return e&&(n=n.map(e)),n}function nr(t){return Object.values?Object.values(t):Object.keys(t).map((function(e){return t[e]}))}Dn.numberIsBetween=Qa,Dn.isStylePropertySupported=Ka,Dn.isEmptyObject=Ja,Dn.boundToRect=tr,Dn.getDistinct=er,Dn.objectValues=nr;var ar,rr=(ar=null,function(){if(na(ar))return ar;var t=l(document.body||document.documentElement).append("div").styles({width:"100%",visibility:"hidden",overflow:"scroll","-ms-overflow-style":"scrollbar"}),e=t.append("div").styles({width:"100%"});return ar=t.node().offsetWidth-e.node().offsetWidth,t.remove(),ar});Dn.getScrollbarWidth=rr;var or=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";return t.isD3Selection&&(t=t.node()),"width"===e?t.scrollWidth>t.offsetWidth:t.scrollHeight>t.offsetHeight};function ir(t){return function(e,n){var a=[];return e.map((function(e,r){t(e)==n&&a.push(r)})),a}}function lr(t){if(Object.entries)return Object.entries(t);for(var e=Object.keys(t),n=e.length,a=new Array(n);n--;)a[n]=[e[n],t[e[n]]];return a}function sr(t){return ua(t)?[t[0],t[t.length-1]]:t}function cr(t,e){return t.reduce((function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t}),{})}function ur(t,e){function n(n,a){n&&n!==e&&(n.remove&&n.remove(),n.destroy&&n.destroy()),t[a]=null,delete t[a]}for(var a in t)Object.hasOwnProperty.call(t,a)&&n.call(t[a],t[a],a,t)}function dr(t,e){return 100*t/e}function hr(t){return!!(t&&t.constructor&&t.call&&t.apply)}function fr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return function(){var e=this,a=arguments;t.apply(e,a),n.forEach((function(t){return t.apply(e,a)}))}}function pr(t,e,n){return function(){var a=n.apply(e,arguments);return a===e?t:a}}Dn.elementIsScrollable=or,Dn.searchIndex=ir,Dn.objectEntries=lr,Dn.firstAndLastItem=sr,Dn.groupBy=cr,Dn.destroyObjectProperties=ur,i.rebind=function(t,e){for(var n,a=1,r=arguments.length;++a<r;)t[n=arguments[a]]=pr(t,e,e[n]);return t},function(t){t.quadtree.prototype.findAll=function(t,e,n,a){var r=this,o={points:[],visited:[]};return r._size=r._size||function(){return 0},sa(n)?r.visit(function(t,e,n,a){var r=t[0][0],o=t[0][1],i=t[1][0],l=t[1][1];return function(t,s,c,u,d){if(!t.length)do{var h=t.data,f=a._x(h),p=a._y(h);n.push(h),f>=r&&f<i&&p>=o&&p<l&&e.push(h)}while(t=t.next);return s>=i||c>=l||u<r||d<o}}(n,o.points,o.visited,r)):r.visit(function(t,e,n,a,r,o){var i=e,l=t.x-i,s=t.x+i,c=t.y-i,u=t.y+i;return function(e,i,d,h,f){if(!e.length){r.push(e.data);do{if(e.data){var p=t.x-o._x(e.data),g=t.y-o._y(e.data);$e(p*p+g*g)<=o._size(e.data)/2+n&&a.push(e.data)}}while(e=e.next)}return i>s||h<l||d>u||f<c}}({x:t,y:e},n,a,o.points,o.visited,r)),o},t.quadtree.prototype.size=function(t){return hr(t)&&(this._size=t),this}}(i),i.selection.prototype.first=function(){return i.select(this.nodes()[0])},i.selection.prototype.last=function(){return i.select(this.nodes()[this.size()-1])},i.selection.prototype.removeAllListeners=function(){var t,e=this;return(t=this.node()&&this.node().__on)&&t.forEach((function(t){return e.on(".".concat(t.name),pn)})),this},i.selection.prototype.isD3Selection=!0;var gr="text",vr="tspan",mr="path",yr="circle",br="rect",xr="line",Cr="div",kr="svg",wr={};function _r(t,e,n,a){for(var r,o=Zn(arguments).slice(4),i=null,l=0,s=o.length;l<s+1&&(i=Or(a,null,r=l===s?null:fa(t,o[l]),e,n),!da(r));l++);return i}function Sr(t,e,n){wr.globalProp={},n.fontL1Size=_r(t,wr.fontL1Size,n.fontL1Size,e,"canvas.fontSize"),n.fontL2Size=_r(t,wr.fontL2Size,n.fontL2Size,e,"chart.fontSize","canvas.fontSize"),wr.globalProp.fontL1Color=null,wr.globalProp.fontL2Color=null,wr.globalProp.fontL1Family=null,wr.globalProp.fontL2Family=null,wr.globalProp.fontL1Style=null,wr.globalProp.fontL2Style=null,wr.globalProp.fontL1Weight=null,wr.globalProp.fontL2Weight=null,wr.globalProp.textShadow=null;var a=wa(fa(t,"chart.plot.animation"),{});return wr.globalProp.animation={},wr.globalProp.animation.enabled=!1!==a.enabled,wr.globalProp.animation.duration=a.duration||null,wr.globalProp.animation.easingType=a.easingType||null,wr.globalProp.datalabels={},n.datalabels=null==n.datalabels?{}:n.datalabels,wr.globalProp.datalabels.enabled=null,n.datalabels.fontSize=_r(t,wr.fontL3Size,n.datalabels.fontSize,e,"chart.plot.datalabels.fontSize","chart.fontSize","canvas.fontSize"),wr.globalProp.datalabels.fontColor=null,wr.globalProp.datalabels.fontFamily=null,wr.globalProp.datalabels.fontStyle=null,wr.globalProp.datalabels.fontWeight=null,wr.globalProp.events={},wr.globalProp.events.mouseMove=null,wr.globalProp.events.mouseOut=null,wr.globalProp.events.click=null,wr.globalProp.events.doubleClick=null,n}function Or(t,e,n,a,r){var o=Xe(t.width,t.height),i=Gn(Sn,"ratio")&&Sn.ratio;"function"==typeof i&&(i=i(t)),e=null==e?i&&!isNaN(i)?i:.038:e;var l=Ve(o*e);wr.minL1Size=Sn.minsize,wr.maxL1Size=Sn.maxsize;var s=wr.minL1Size,c=wr.maxL1Size;return l=l<s?s:l>c?c:l,null!=n&&(e=la(n)*e/l,l=(l=Ve(o*e))<s?s:l>c?c:l),(r=null==a?null==r?{}:r:a).size=l,r.l1=function(){return r.size},r.l2=function(){return r.size-2},r.l3=function(){return r.size-3},r.l4=function(){return r.size-4},r.l5=function(){return r.size-5},r.l8=function(){return r.size-8},r}wr.fontFamily="'Roboto','Open Sans',sans-serif",wr.fontColor="#616161",wr.fontStyle=null,wr.fontWeight=null,wr.fontL1Size=null,wr.fontL2Size=null,wr.fontL3Size=null,wr.DOMBorder="none";var Ar=new function(){this.NETSCAPE=0,this.FIREFOX=0,this.OPERA=0,this.IE=0,this.SAFARI=0,this.MOZILA=0,this.CHROME=0,this.NONIE=1,this.WEBKIT=0;var t=navigator.userAgent.toLowerCase();this.OSX=-1!=t.indexOf("mac"),this.WINDOWS=-1!=t.indexOf("windows"),this.LINUX=-1!=t.indexOf("linux"),this.IPHONE=-1!=t.indexOf("iphone"),this.IPAD=-1!=t.indexOf("ipad"),this.ANDROID=-1!=t.indexOf("android"),this.IS_IOS=this.IPHONE||this.IPAD,this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this.isMouseDevice=!(this.IS_IOS||this.ANDROID||-1!=t.indexOf("mobile")),this.uiwebview=this.IS_IOS&&!/safari/.test(t),this.PHANTOMJS=-1!==t.indexOf("phantomjs"),this.WKWebView=this.uiwebview&&-1!=t.indexOf("wkwebview");var e="";this.detect=function(){var t=navigator.userAgent,n=t.length,a=navigator.vendor,r="";window.opera?(this.OPERA=1,e="o"):t.indexOf("Chrome")>-1?(this.CHROME=1,r="Chrome/",e="webkit"):t.indexOf("Firefox")>-1?(this.FIREFOX=1,r="Firefox/",e="moz"):t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1?(this.IE=1,r="MSIE ",e="ms"):a.indexOf("Apple")>-1?(this.SAFARI=1,r="Version/",e="webkit"):r="Unknown Browser",this.VERSION=t.substring(t.indexOf(r),n).match(/[0-9\.]+/)[0]},this.detect(),this.NONIE=!this.IE,this.WEBKIT=this.SAFARI||this.CHROME,this.prefix={lowercase:e,css:e?"-".concat(e,"-"):e,js:e?e[0].toUpperCase()+e.substr(1):e}};wn.setComponent("browser",Ar);var Tr=function t(e){return{canvas:{fontFamily:wr.globalProp.fontL1Family,fontColor:wr.globalProp.fontL1Color,fontSize:e.fontL1Size.l3,fontWeight:wr.globalProp.fontL1Weight,fontStyle:wr.globalProp.fontL1Style,title:{show:!0,text:"Title comes here",hAlign:"left",vAlign:"top",marginTop:10,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l1},subtitle:{show:!0,text:"Description comes here",hAlign:"left",vAlign:"top",marginTop:0,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l2},background:{alpha:1,color:"#FFFFFF"},border:{show:!0,size:1,style:"solid",radius:1,color:"#cccccc"},shadow:{show:!0,x:1,y:1,color:"rgba(0,0,0,0.1)",blur:2,inset:!1},intelligence:{dimension:{title:100,subtitle:120,xaxis:70,xaxislabel:80,yaxis:70,yaxislabel:80,legend:140,credits:150,marker:50},dataCount:{marker:300,animation:300,datalabels:300}}},legend:{enabled:!0,colorPallete:{type:"multicolor",options:{multicolor:"countries",monochrome:{baseColor:"red",count:5,colorGamma:[.3,.9]}}},hAlign:"right",vAlign:"top",fontSize:e.fontL1Size.l5,textPadding:5,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,colorBox:{shape:"square",strokeWidth:2},colorBand:{},title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4,keepAligned:!1},background:{color:"transparent",alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:"transparent"},itemDisabledStyle:{color:"#d1d1d1",patternColor:"#ffffff",strikeout:!1},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},filter:{enabled:!0,slider:{tooltip:{fontSize:e.fontL1Size.l5}}},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},expandable:{fontSize:e.fontL1Size.l5},size:{}},chart:{behaviour:{resetButton:{enabled:!1,fillColor:"#3c3c3c",label:{marginTop:6,marginRight:10,marginBottom:6,marginLeft:10,fontSize:14,fontColor:"white",fontWeight:500},border:{show:!0,size:1,radius:2,color:"transparent"}}},marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,fontSize:e.fontL2Size.l3,zoom:{enabled:!1,type:"x"},brush:{enabled:!1,type:"x"},effects:{choice:"auto",options:{dropShadow:{dx:"5",dy:"5",blur:"3",color:"rgba(0,0,0,0.6)"},freeHand:{scale:7}}},plot:{renderer:{mode:window.rendererMode||"svg",image:{source:"auto",addDimensionInSource:!1,exportUrl:""}},morph:{enabled:!1,duration:1e3,samplingDistance:5},background:{alpha:1,color:"transparent",gradients:{show:!1,type:"radial"},image:{}},border:{show:!1,size:1,style:"solid",radius:0,color:"#ececec"},animation:{enabled:wr.globalProp.animation.enabled,easingType:wr.globalProp.animation.easingType,duration:wr.globalProp.animation.duration},datalabels:{renderOnInit:!1,animation:{enabled:!1},show:wr.globalProp.datalabels.enabled,handleOverlapping:!0,fontSize:e.datalabels.fontSize.l5,boundBox:{strokeColor:wr.fontColor,fillColor:"white"}},events:{cursor:null,click:wr.globalProp.events.click,mousemove:wr.globalProp.events.mouseMove,mouseout:wr.globalProp.events.mouseOut,doubleclick:wr.globalProp.events.doubleClick,contextmenu:null,init:null,onload:null},plotoptions:{}},axes:t.axes?t.axes(e):{}},map:t.map?t.map():{},tooltip:{enabled:!0,fontSize:e.fontL1Size.l5,opacity:.8,zindex:2e3,view:"normal",crosshair:{type:"none",color:"grey"},pointerEvents:"none",focusOnTooltipEvent:!1},noDataHandler:{text:"No Data",fontSize:e.fontL1Size.l1},loader:{type:"none",fontSize:e.fontL1Size.l3}}},Pr=function(t,e,n){var a;switch(t){case"zoom":a=Tr.zoom(n);break;case"brush":a=Tr.brush(n);break;case"scroll":a=Tr.scroll();break;case"legend":a={};break;case"credits":a=Tr.credits(n);break;case"notes":a=Tr.notes(n);break;case"bar":case"barrange":a=Tr.bar();break;case"line":a=Tr.line();break;case"area":a=Tr.area();break;case"arearange":a=Tr.arearange();break;case"scatter":case"geoscatter":a=Tr.scatter(t);break;case"bubblepie":case"geobubblepie":case"pie":a=Tr.pie(t);break;case"funnel":a=Tr.funnel();break;case"web":a=Tr.web();break;case"pyramid":a=Tr.pyramid();break;case"sunburst":a=Tr.sunburst();break;case"dial":a=Tr.dial(n);break;case"bubble":case"geobubble":a=Tr.bubble();break;case"packedbubble":a=Tr.packedbubble();break;case"bullet":a=Tr.bullet(n);break;case"gantt":a=Tr.gantt();break;case"treemap":a=Tr.treemap();break;case"heatmap":a=Tr.heatmap();break;case"geoheatmap":a=Tr.geoheatmap();break;case"dotgrid":a=Tr.dotgrid();break;case"waterfall":a=Tr.waterfall();break;case"wordcloud":a=Tr.wordcloud();break;case"size":a=Tr.sizeLegend?Tr.sizeLegend(n):{};break;case"shape":a=Tr.shapeLegend?Tr.shapeLegend(n):{};break;case"color":a=Tr(n).legend;break;case"boxplot":a=Tr.boxplot();break;case"sankey":a=Tr.sankey();break;case"metadata":a={axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"",datatype:"numeric"},{dataindex:1,columnname:"",datatype:"numeric"}]}}return a},Er=function(t,e,n,a,r){r||(a=Pr(t,0,n));var o=null==e[t]?e[t]={}:e[t];return Rn(a,o,!0,!0),e[t]=a,a};function Lr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1],a=arguments.length>3?arguments[3]:void 0;return _objectSpread({mark:t,selector:e,data:n,children:[]},a)}function Mr(t){var e=t.selection,n=t.data,a=t.event,r=Lr("point",e,n);return r.config=function(t){var e=t.config,n=t.prefix,a=t.defsPath,r=void 0===a?Un():a,o=t.context,i=void 0===o?l(document.body).select("svg.svgPattern"):o,s=["fillColor","strokeColor"],c=["size","x","y","angle","imageUrl","rotate","translateX","translateY"],u={};["fillOpacity","strokeOpacity","strokeWidth","dashStyle","lineCap"].forEach((function(t){return u[t]=n?wa(e[n+za(t)],e[t]):e[t]})),s.forEach((function(t){return u[t]=(n?e[n+za(t)]:e[t])||e.color})),c.forEach((function(t){return u[t]=e[t]})),u.shape=e.shape||e.symbol,u.dashStyle=u.strokeWidth?u.dashStyle:null;var d=e.url||e.imageUrl;if(d){var h=Ma(zn(e.size))[0];u.fillColor={url:d,context:i,defsPath:r,width:h,height:h,x:-h/2,y:-h/2,_type:"image"}}return u}(t),r.event=a,r}function Dr(t){var e=document.createRange();e.selectNode(t);var n=e.getClientRects(),a=n[1]||n[0];return e.detach(),a||{x:0,y:0,width:0,height:0}}function Ir(t){return t.getBoundingClientRect()}function Rr(t,e,n,a,r,o,i){var l,s,c,u,d,h,f=ua(t),p=Dn.fontUtils.getTextHeight(t,e,n,o,i,r);return f?t.forEach((function(r,f){var g;na(a)&&a.length&&(g=!0,e=a[f].fontSize||e,n=a[f].fontFamily||n,c=a[f].y,u=a[f].dy,d=t.width,h=t.height);var v=d||Dn.fontUtils.getTextWidth(r,e,n,o,i);p=h||Dn.fontUtils.getTextHeight(r,e,n,o,i),l=na(l)?g?na(c)||na(u)?Ge(l,v):l+v:Ge(l,v):v,na(s)?g?s=na(c)||na(u)?s+1.1*p:s:s+=1.1*p:s=p})):(na(a)?(e=a.fontSize||e,n=a.fontFamily||n,d=t.width,h=t.height):t&&"group"==t.type&&(d=t.width,h=t.height),l=d||Dn.fontUtils.getTextWidth(t,e,n,o,i),s=h||Dn.fontUtils.getTextHeight(t,e,n,o,i,r)),{width:l,height:s}}wn.setComponent("mark",Lr),wn.setComponent("marker.parser",Mr);var zr={},jr=function(t,e,n,a,r,o,i,l,s){zr[t]={type:e||"diagonal-line-right",size:n||5,strokeWidth:a||1,bgClr:o,stroke:r,fillOpacity:i||1,strokeOpacity:l||1,translate:s}},Fr=function(t){return{type:zr[t].type,size:zr[t].size,strokeWidth:zr[t].strokeWidth,bgClr:zr[t].bgClr,stroke:zr[t].stroke,fillOpacity:zr[t].fillOpacity,strokeOpacity:zr[t].strokeOpacity,translate:zr[t].translate}};function Br(t){return{ele:t}}wn.setComponent("patterns.get",Fr);var Hr=function(){};function Nr(t,e,n,a){var r=t.type;if(r&&r!==dn){var o=t.options[r]||t.options,i=Hn(o);return i.color=null!=n?n:i.color,i.opacity=null!=a?a:i.opacity,i.dimension=null!=e?e:i.dimension,i.type=r,i}}function Wr(t,e){return e.map((function(e,n){var a=parseInt(e);return t.width%a/(parseInt(t.width/a)||1)+a}))}function Vr(t,e){var n=e.effect,a=e.config,r=void 0===a?{}:a,o=e.chartObj;!n&&o&&(n=Yr(r,o)),t.selectAll("*:not(text):not(span):not(b):not(strong):not(i):not(em):not(mark):not(small):not(del):not(ins):not(sub):not(sup):not(.expandable):not(.zc-expandable):not(.minorTicks):not(.domain):not(.zc-connector-line)").filter((function(){return!this.childElementCount})).style("filter",n)}function Yr(t,e){var n=!1!==t.useChartEffect&&e.filterEffectsID;return n?"url(".concat(e.defsLocation,"#").concat(n,")"):null}wn.setComponent("effects",Hr),Hr.get=function(t,e,n,a){var r=(a=a||{}).offset,o=(a.dimension,a.returnSVGimage),i=a.base64,s=a.chartObj,c="svgPattern"==a.moduleType?Hr.svg_patterns:null;if(t=t||c,(null!=e||""!=e)&&t[e]){var u;s&&s.getPatternSvg?u=s.getPatternSvg():(u=wa(a.renderTo,wr.patternSVG)).isD3Selection||(u=l(u));var d,h="zp".concat(jn(n,e));if(null!=h){var f=Ua(u.node()),p=gn&&f&&gn[f].EFFECTS;return p&&na(p[h])?(d=p[h],o?d:d.id||d):(d=t[e](n,h,r,o,i,s,u))?(p&&(p[h]=d),o?d:d.id||d):void 0}}};var Ur={solid:"",shortdash:"1.5,1.5",shortdot:"0.1,1.5",dashed:"2.5,2.5",longdash:"5,5",dotted:"0.1,2.5",shortdashdotdot:"1.5,2,0.1,2,0.1,2",dashdot:"2.5,2.5,0.1,2.5",longdashdot:"5,5,0.1,5",longdashdotdot:"5,2.5,0.1,2.5,0.1,2.5"};function Gr(t,e,n){var a=na(Ur[t]),r=wa(Ur[t],t,null);return na(r)&&"solid"!==t?(e=a?wa(e,1):1,n&&(e*=n),(ua(r)?r:r.split(",")).map((function(t){return+t*e}))):[]}function Xr(t,e){return t||(e&&/dot/g.test(e)?"round":null)}function Zr(t,e,n,a){var r=n.reduce((function(t,e){return e+t}),0);t.attr("stroke-dasharray",n).attr("stroke-dashoffset",r).transition().duration(e).ease(p).attr("stroke-dashoffset",0).on("end",(function(){a&&a.chartRendered&&Zr(t,e,n,a)}))}var qr="center",$r="left",Qr="right",Kr="bottom",Jr="top",to="fixedTop",eo="vertical",no="horizontal",ao="inner",ro="outer",oo="start",io="middle",lo="end",so={center:io,right:lo,left:oo};function co(t){var e="";if(ua(t))t.forEach((function(t,n){e+="<tspan class='zcTspan'".concat(n?" dy='1.1em'":"",">").concat(uo(t),"</tspan>")}));else{var n=t.indexOf("<tspan");e=-1!=n?"<tspan class='zcTspan'>".concat(uo(t),"</tspan>"):t}return e}function uo(t){var e="",n=0,a={"<tspan":[],"</tspan>":[]};return t.replace(/<tspan|<\/tspan>/g,(function(){a[arguments[0]].push(arguments[1])})),a["<tspan"].forEach((function(r,o){n!=r&&(e+="<tspan>".concat(t.substring(n,r),"</tspan>")),e+=t.substring(r,n=a["</tspan>"][o]+8)})),n!=t.length&&(e+="<tspan>".concat(t.substring(n,t.length),"</tspan>")),e}function ho(t,e){t.selectAll("tspan.zcTspan").attr("x",e)}function fo(t,e,n,a,r,o,i,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{};if(o.length){var u=+n[0],d=+n[1],h=e.plotarea,f={left:-a,right:-a,top:0,bottom:0},p="..",g=Kr,v=c.useBBox;i=i||0,r=r||{left:-u+i,top:-d,right:h.width-u-i,bottom:h.height-d},t.each((function(){var t,e=this,n=this.childNodes,u=0;v||(t=po(this,r,i,c));for(var d,h,m,y,b,x,C,k,w,_,S,O=function(){for(v&&(t=po(e,r,i,c)),d=n[A],h=d.childNodes,m=d.getComputedTextLength(),y="",w=0;w<h.length;w++)b=h[w].textContent,y+=b,o[u+w].textLength=b.length;if(m-t>1){x=o[u].bbox,C={left:x.x+(s?s[0]:0),top:x.y+(s?s[1]:0),width:m,height:x.height},hc(h[0],y,C,r,g,p,f,null,null,!1),k=h[0].innerHTML;var O=y.length,T=p.length;if(k.length>O&&(k=k.substring(0,O-T)+p),".."===k&&(k=""),v){var P=go(l(e),a,v);o.forEach((function(t,e){return P[e].textLength=t.textLength})),o=P}for(w=0,_=0;w<h.length;w++)S=o[u+w].textLength,h[w].innerHTML=k.substring(_,_+S),_+=S}u+=v?h.length:h.length-1},A=0;A<n.length;A++)O()}))}}function po(t,e,n,a){var r=Bn(t),o=a.useBBox?r.width:t.getComputedTextLength();return r.x+o>e.right&&(o-=r.x+o-e.right+n),r.x<e.left&&(o-=e.left-r.x+n),o}function go(t,e,n){var a=t.selectAll((function(){return this.childNodes})),r=t.attr("text-anchor"),o=+t.attr("x"),i=+t.attr("y"),s=[],c=0;return a.each((function(t,a){if(yo(this)){var u=l(this),d=parseFloat(u.attr("dy")||0),h=this.childNodes,f=this.getComputedTextLength(),p="middle"===r?-f/2:"end"==r?-f:0;c+=d;for(var g=0;g<h.length;g++){var v=h[g].getComputedTextLength(),m={dy:c,dx:p+("middle"===r?v/2:0),bbox:{x:o+p,y:i+c*e,width:h[g].getComputedTextLength(),height:e},style:h[g].style,text:h[g].textContent,id:a+"_"+g};s.push(m),p+=v}}else n&&s.push({})})),s}function vo(t,e){return e=e||[],t.each((function(t,n){var a=l(this).selectAll("*");if(a.size())a.each((function(){vo(l(this),e)}));else{var r=Bn(this),o=this.nodeName;if(o===vr){if(""===this.textContent)return;var i=Dr(mo(this)),s=Dr(this);r.x+=s.left-i.left,r.y+=s.top-i.top,r.width=s.width,r.height=s.height}e.push({node:this,nodeName:o,bb:r})}})),e}function mo(t){return t.parentNode.nodeName!==gr?mo(t.parentNode):t.parentNode}function yo(t){var e=Ar.PHANTOMJS||Ar.IE?1:0,n=Dr(t);return n.width>e&&n.height>e}function bo(t,e,n,a){if(null==e){var r="y"==n?"row":"column";e=a.dataObject.hierarchical.pivotLayout.getRootNodeList(r).getClustersCount()}return t%e}function xo(t,e,n){var a=n.dataObject.hierarchical,r=(n.dataObject.categoryHierarchy,"y"==t?"row":"column");if(a){var o=a.pivotLayout.getRootNodeList(r);if(o.getCount()||o.hasMultiCluster()){var i=o.getClustersCount(),l=(o.getLeavesCount(),wo(t,e,n)),s=bo(e,i);return l?s:0}return e}return e}function Co(t,e){var n="x"==t?"column":"row";return e.dataObject.hierarchical.pivotLayout.getRootNodeList(n).getCount()}function ko(t,e,n){var a="x"==t?"column":"row";return e>n.dataObject.hierarchical.pivotLayout.getRootNodeList(a).getLeavesCount()-1}function wo(t,e,n){var a="x"==t?"column":"row";return e<n.dataObject.hierarchical.pivotLayout.getRootNodeList(a).getLeavesCount()}function _o(t,e,n){return e==n.getAxesCount(t)-1}function So(t,e,n){return"x"==t?_o(t,e,n):wo(t,e,n)||_o(t,e,n)}function Oo(t,e,n,a,r){var o=a.dataObject.hierarchical;if(o&&o.pivot){if("y"==t&&wo(t,e,a)){var i="x"==t?"column":"row",l=a.dataObject.hierarchical.pivotLayout.getRootNodeList(i),s={};return s["left"==n||"right"==n?"height":"width"]=2*(l.leafSize*e+l.leafSize/2),s}return r}return r}function Ao(t){var e=t.dataObject;if(!e)return!1;var n=e.hierarchical;return n&&n.pivot}var To="ordinal",Po="time",Eo="numeric",Lo="ordinalNonLinear",Mo={};function Do(t){return nr(t.hierarchical.pivotLayout.getRootNodeList("layer").panes)}function Io(t,e){for(var n=0,a=nr(t),r=function(t){var e=a[t].index===t?t:a.filter((function(e){return e.index===t}))[0];n+=a[e].data.length},o=0;o<e;o++)r(o);return n}Mo.saveEncode=function(t,e,n,a){var r=this,o=r.encodes[t]=r.encodes[t]||{},i=o[e];i||(i=o[e]={seriesData:[],seriesIndices:[]});var l=r.processedseriesData[n];i.seriesData.push(a||l),i.seriesIndices.push(n)},Mo.getEncode=function(t,e){var n=this,a=n.encodes[t]||{};return arguments.length>1?a[e=e||0]:a},Mo.filterEncode=function(t,e){var n=this,a=n.encodes[t]||{};if(arguments.length>1){var r=nr(a);return r.filter((function(t){return e(t)}))}return a};var Ro,zo="datalabels",jo="stackLabels",Fo="innerLabel",Bo="parentLabels",Ho={};function No(t){return t?Ho[t]:Ro}function Wo(t,e,n,a,r,o,i,l){if(!n)return u(e);if(null==e||e.constructor==Array&&null===e[0])return t&&null!=t.nullformatting?u($n(t.nullformatting,e,n,t,r,a)):e;var s=t?t["".concat(r,"format")]||t.format:null;return s&&Object.keys(s).length||(s=Vo(n,t)),e.constructor==Array?e.map((function(t){return c(t)})).join(na(s.arraySeperator)?s.arraySeperator:i):c(e);function c(e){return n!==Po||s.customFormat?n===Eo&&("axis"===r||r===jo||r===zo&&a.dataObject.isHierarchy)&&"number"==typeof e&&ai(e)>12&&(e=parseFloat(e.toFixed(12))):e=Go(e,s,t),l&&s.customFormat&&((t=Hn(t)).levelindex=l),u("function"==typeof s?s(e,n,t):s.customFormat?$n(s.customFormat,e,n,t,r,a):Yo(s,e,t,n,l,r,a))}function u(t){return 0!=o?Nn(t):Wn(t)}}function Vo(t,e){var n={};switch(t){case"time":e&&e.groupby?n={}:e&&e.subfunction?n=Uo(e.subfunction,e.useUTC,e.locale):n.specifier="YYYY";break;case"numeric":n.thousandSeperator=",";break;case"geo":break;case"percent":n.decimalPlaces=1,n.suffix="%",n.trailingZeros=!1}return n}function Yo(t,e,n,a,r,o,i){var l,s=(n||{}).locale;switch(a){case"time":var c,u=n&&!0===n.useUTC?ui("time",s,"utcFormat"):ui("time",s),d=t.specifier;if(na(n)&&(c=ua(n.groupby)?n.groupby:n.AUTO_GROUP_ORDER),ua(d)||ua(c))l=[],d=d||[null],na(r)&&(d=na(d)?[d[r]]:[null]),(d=ua(d)?d:[d]).forEach((function(t,a){var o=Jo(t),i=ti(u,o,n,r);l[a]=i?i(e):e})),o==zo&&(l=l&&l.toString());else if(d){var h=Jo(d);if("auto"===d||null==h)l=e;else if(Ko.test(h)){var f=ti(u,h,n,r);l=f(e)}else l=u(h)(e)}else{var p=Vo(a,n);l=p(e)}break;case"ordinal":var g=t.letterCase;e+="",l=g?"uppercase"===g?e.toUpperCase():"lowercase"===g?e.toLowerCase():za(e):e;break;case"geo":var v=t.mapBy;g=t.letterCase;if(l=e,v){var m=i.dataObject.userMapFeatures.get(e);m&&m.properties&&m.properties[v]&&(l=m.properties[v])}l=g?"uppercase"===g?l.toUpperCase():"lowercase"===g?l.toLowerCase():l[0].toUpperCase()+l.substring(1).toLowerCase():l;break;default:if("decimal"==t.type&&la(e)!=e)return"";var y=t.decimalPlaces;e="decimal"==t.type||0===y?parseFloat(e):e;var b=t.currency,x=ei(t,null,s,e),C=!1;if(l=x(e),/(e|s)/gi.test(ni(t))?na(y)?l=l.replace(/[^a-z]+/i,(function(){return ei(t,".".concat(y,"f"),s)(arguments[0])})):C=!0:na(y)&&y>0&&(l=l.replace(/[^a-z]+/i,(function(){var e=+arguments[0].replace(/,/g,""),n=li(e,y);return ei(t,".".concat(y,"f"),s)(n)}))),!1===t.signEnabled&&(l=l.substring(1,l.length)),!Jn(t.trailingZeros,!0)||C){var k="";l=l.replace(/[a-z]+(\+|-)*(\d)*$/i,(function(){return k=arguments[0],""})),l=l.replace(/\.(\d)*0*$/gi,(function(){var t=arguments[0];return parseFloat(t)?".".concat(ri(+t).toString().split(".")[1]):""}))+k}l=function(t,e){var n=t.thousandSeperator,a=t.decimalSeperator,r=e.split(/\./);return(null!=n&&","!=n?r[0].replace(/,/g,n):r[0])+(r[1]?(null!=a?a:".")+r[1]:"")}(t,l),null!=b&&(l=/(\+|\-)/.test(l[0])?l[0]+b+l.slice(1):b+l)}return l=function(t,e){if(ua(e))return e;var n=wa(t.prefix,""),a=wa(t.suffix,"");return n+e+a}(t,l),t.breakSpace&&(l=l.split(" ")),l}function Uo(t,e,n){var a=(e=!0===e)?ui("time",n,"utcFormat"):ui("time",n);switch(t){case"YEAR":case"year":return a("%Y");case"MONTH":case"month":return a("%B");case"ABSDAY":return a("%a");case"DAY":case"day":return a("%e");case"WEEKDAY":return a("%A");case"WEEK":case"week":return a("Week %W");case"ABSHOUR":return a("%I");case"ABSSECOND":return a("%S");case"ABSMINUTE":case"MINUTE":return a("%M");case"MILLISEC":return a("%L");case"HOUR":return a("%H hrs");case"DATETIME":return a("%d %b %Y %H:%M:%S");case"DATE":return a("%x");case"TIME":return a("%X");case"TIMESTAMP":return a("%x %X hrs");case"ABSMONTH":return a("%b %Y");case"ABSWEEK":return a("W%U %Y");case"ABSQUARTER":return function(t){var n=e?t.getUTCFullYear():t.getFullYear();return a("Q".concat(si(t,e)," ").concat(n))};case"QUARTER":return function(t){return a("Q".concat(si(t,e)))};case 100:return a("%d %b %Y %H:%M:%S %L");default:throw"UNKNOWN TYPE 111: ".concat(t)}}function Go(t,e,n,a){var r=n?n.inputformat:null,o=new Date("0"===t.toString()?+t:t.toString()),i="function"==typeof r?r:"function"==typeof window[r]?window[r]:null;if(!(t instanceof Date)&&null!=r&&(i||"timestamp"!=r.toLowerCase())){t=i||_typeof(t)==String?t:t.toString();var l=ui("time",n.locale,"parse"),s=i?i(t,n):l(Jo(r))(t);o=null==s?o:new Date(s)}return isNaN(o)&&(o=new Date(+t)),o}function Xo(t,e,n,a,r){return t=t||{},r="".concat(r&&t["".concat(r,"percentformat")]?r:"","percent"),t["".concat(r,"format")]||(t.percentformat=Vo("percent")),Wo(t,e,n,a,r)}var Zo={YYYY:"%Y",MMMM:"%B",EEEE:"%A",EEE:"%a",MMM:"%b",YY:"%y",MM:"%m",EE:"%U",dd:"%d",HH:"%H",hh:"%I",mm:"%M",ss:"%S",a:"%p",MILLI:"%L",z:"%Z",QT:"$Q"},qo={decimal:"d",exponent:"e",float:"f",binary:"b",octal:"o",hexadecimal:"x",SIprefix:"s"},$o={Q:si},Qo=Object.keys($o).map((function(t){return"\\$".concat(t)})),Ko=new RegExp(Qo.join("|"));function Jo(t){if(t)for(var e in Zo){var n=t.indexOf(e);n>=0&&"%"!==t[n-1]&&(t=t.replace(new RegExp(e,"g"),Zo[e]))}return t}function ti(t,e,n,a){var r,o,i;if(e)o=t(e),i=n.useUTC,r=function(t){for(var e,n=o(t),a=[],r=-1,l=0,s=n.length;++r<s;)36===n.charCodeAt(r)&&(a.push(n.slice(l,r)),e=n.charAt(++r),e=na($o[e])?$o[e](t,i):e,a.push(e),l=r+1);return a.push(n.slice(l,r)),a.join("")};else if(n.groupby){var l=ua(n.groupby)?n.groupby:n.AUTO_GROUP_ORDER;r=Uo(0!==a&&na(a)?l[a-1]:n.subfunction,n.useUTC,n.locale)}return r}function ei(t,e,n,a){var r,o=na(t.signEnabled)?"+":"",i=null!=t.zeroPadding&&t.zeroPadding.enabled?"0".concat(t.zeroPadding.digits):"",l=null!=t.thousandSeperator?",":"",s=ni(t),c=/(e|s)/gi.test(s),u=t.decimalPlaces;r=null!=u&&u>=0?c?Ar.IE?".20":"":".".concat(0===u?u:u+3):c?"":".".concat(ai(a));var d=o+i+l+(e||r+s);return ui(void 0,n)(d)}function ni(t){t.decimalPlaces;var e=t.type;return qo[e]||"f"}function ai(t){return isNaN(t)?0:(t=+t,Math.floor(t)==t?0:ri(t).toString().split(".")[1].length||0)}function ri(t){if(/\d+\.?\d*e[+-]*\d+/i.test(t)){var e=String(t).toLowerCase().split("e"),n=e.pop(),a=Math.abs(n),r=n/a,o=e[0].split(".");if(-1===r)t="".concat("0",".").concat(new Array(a).join("0")).concat(o.join(""));else{var i=o[1];i&&(a-=i.length),t=o.join("")+new Array(a+1).join("0")}}return t}function oi(t){var e=Ye(t/1e3),n=Ye(e/60),a=Ye(n/60),r=Ye(a/24);return{seconds:e,minute:n,hour:a,day:r,month:Ye(r/30.436854166666667),years:Ye(r/365.24225)}}function ii(t){var e=oi(t);return{subFunction:e.years>1?"YEAR":e.month>1?"ABSMONTH":e.day>1?"ABSDAY":e.hour>1?"ABSHOUR":e.minute>1?"ABSMINUTE":"ABSSECOND"}}function li(t,e){var n=Math.pow(10,e);return+(Math.round((t+cn)*n)/n).toFixed(e)}function si(t,e){return Ye((e?t.getUTCMonth():t.getMonth())/3)+1}var ci={format:vt,parse:yt,utcFormat:mt};function ui(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"numeric",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"format",a=No(e);return"time"===t?a?xt(a)[n]:ci[n]:a?bt(a)[n]:gt}function di(t,e){ua(e)||(e=[e]);return E(e.map((function(e){return hi(t,e)})))}function hi(t,e){var n=[];return t&&ua(t)&&t.every(ua)?t.forEach((function(t){return function(t,e,n){var a=hi(t,e);n.push.apply(n,_toConsumableArray(a))}(t,e,n)})):fi.call(null,t,e,n),n}function fi(t,e,n){var a=hr(e)?e(t):t[e];ua(a)?n.push.apply(n,_toConsumableArray(a)):n.push(a)}function pi(t,e,n){this.data=t,this.dataset=e,this.chartObj=n,this.allChartTypes=null,this.globalChartType=null,this.processedseriesData=n.seriesdata,this.initialize()}wn.setComponent("defaultDataProcessor",pi);var gi=pi.prototype;gi.initialize=function(t){var e=this,n=e.data,a=e.globalChartType=n.seriesdata&&n.seriesdata.type,r=n.metadata,o=e.dataset,i=e.processedseriesData,l=pi.helpers,s=e.chartObj;if(o.setDataObj(e),o.seriesTypes=M(),e.totalnoofdatas=0,e.encodes={},e.markerSize={},e.annotation=[],s.cache.data={},s.cache.search={},s.cache.customPoints={},s.cache.correction={},ua(i)){var c=l.groupByDataIndices(r,s);e.allChartTypes=e.allChartTypes||l.getAllChartTypes(n),(e.pivot?Do(e):[{data:i}]).forEach((function(t){t.data.forEach((function(t){var n=l.getChartType(t.node&&t.node.type||t.type||a,Eo);e.isAxisCategory=e.isAxisCategory||qa(_e.axis,n),e.isPolarAxisCategory=e.isPolarAxisCategory||qa(_e.polarAxis,n),e.isNonAxisMultiSeriesCategory=e.isNonAxisMultiSeriesCategory||qa(_e.nonaxismultiseries,n),e.singleSourceEvent=e.singleSourceEvent||qa(_e.singleSourceEvent,n),e.hasLevelMarker=e.hasLevelMarker||n==Gt.bullet||n==Gt.dial,_e.markerPlot.has(n)&&(e.markerSize[we.get(n)]=M())}))})),i.forEach((function(n,r){var i=n.disabled,u=n.data,d=l.is3D(u),h=l.getChartType(n.type||a,Eo);o.seriesTypes.add(h),"addorremoveseries"!==t&&!d&&ua(u)&&(u=e.convertTo3DArray(n,c,h)),!i&&ua(u)&&e.totalDataCount(u),function(t,e,n,a){var r=(e.systemConf.notes||{}).dataIndex;if(Xn(r))return;t.forEach((function(t,e){ua(t)&&t.forEach((function(t,o){(t.data||t)[r]&&n.push({data:t,subSeriesIndex:e,itemIndex:o,seriesIndex:a})}))}))}(u,s,e.annotation,r)}))}},Aa(gi,Mo);var vi="bar",mi="bullet",yi="waterfall",bi="area",xi="arearange",Ci="line",ki="scatter",wi="geoscatter",_i="bubble",Si="geobubble",Oi="bubblepie",Ai="pie",Ti="dial",Pi="funnel",Ei="pyramid",Li="web",Mi="heatmap",Di="sunburst",Ii="packedbubble",Ri="treemap",zi="boxplot",ji="sankey",Fi="barrange",Bi={};function Hi(t,e,n){var a=e.dataset.getDataType("clr");return Ni(t.colorBand,a,n)}function Ni(t,e,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=t.ranges,o=a?Hn(r):r,i=e===To;return ua(o[0])||(o=o.map((function(t){return[t]}))),i||n||o.sort((function(t,e){return B(t[0],e[0])})),o}function Wi(t,e){var n=t.colorBand;return e&&e.dataset&&(e=e.dataset.getDataType("clr")),n.type?n.type:n.ranges||e===To?"discrete":"continuous"}function Vi(t){return t===Gt.area||t===Gt.stkdarea||t===Gt.arearange}function Yi(t){return _e.bubble.has(t)||_e.bubblePie.has(t)}function Ui(t,e,n,a){if(t.dataObject.categoryHierarchy&&t.dataObject.hierarchical.pivot){e||(e=a?"".concat(a.row,"_").concat(a.column):"0_0");var r=t.dataObject.hierarchical.gridOptions;return r[e].chartTypes[n]||r[e].chartTypes[0]}return t.chartTypes[n]||t.chartTypes[0]}function Gi(t){return M(t.distinctChartTypes)}function Xi(t,e,n){if(Ao(t)){return qa(_e[{axis:"axis",polarAxis:"polarAxis",nonAxisMultiSeries:"nonaxismultiseries",hierarchy:"hierarchy"}[n]],e)}return t.dataObject[{axis:"isAxisCategory",polarAxis:"isPolarAxisCategory",nonAxisMultiSeries:"isNonAxisMultiSeriesCategory",hierarchy:"isHierarchy"}[n]]}function Zi(t,e){var n=/(bar|scatter|bubble$|bullet|gantt|wordcloud|waterfall|boxplot|barrange)/.test(t)&&Ns(e.systemConf.chart.plot.plotoptions[t],e),a=/(^pie|funnel|pyramid|sankey|dial)/.test(t);return n||a}Bi.getProcessedColorRange=function(t,e,n,a){var r=n.colorBand,o=r.stops,i=r.ranges,l=[],s=a.dataset.getDataType("clr")===To,c="discrete"!==Wi(n,a);if(i&&i.length){i=Hi(n,a,!0);for(var u=0,d=function(t,n){if(1===t.length?s?t[0]===e[u]:t[0]===e[u+1]:t[0]===e[u]&&t[1]===e[u+1])return f=n,!0},h=e.length;u<h;s?u++:u+=2){var f=-1;i.some(d),-1===f||!c&&i[f].disabled?l.push(null):l.push(t[f%t.length])}}else if(!s&&o&&o.length){var p=0;e.forEach((function(e,n){var a=o.indexOf(e);-1===a&&(a=p),l.push(t[a%t.length]),p=a}))}else l=t;return l},Bi.getColorDomain=function(t){var e=t.systemConf.legend,n=e.colorBand,a=n.stops,r=n.ranges,o=Bi.getMinMax(t),i=wa(n.minRange,o[0])||0,l=wa(n.maxRange,o[1])||0,s=t.dataset.getDataType("clr")===To;if(r&&r.length){var c=Hi(e,t),u=[];if(s)u=c;else{if(1===c[0].length){var d=i;c=c.map((function(t){var e=[d,t[0]];return d=e[1],e}))}(u=c).splice(0,0,[-1/0,-sn]),u.splice(u.length,0,[sn,1/0])}return E(u)}if(!s&&a&&a.length){var h=Yn(a);h.sort(B);var f=h.filter((function(t){var e=!0;return na(n.minRange)&&(e=e&&t>=n.minRange),na(n.maxRange)&&(e=e&&t<=n.maxRange),e}));return(i<f[0]||!f.length)&&f.splice(0,0,i),l>f[f.length-1]&&f.splice(f.length,0,l),f}return[i,l]},Bi.getMinMax=function(t){var e=Bi.getAllColorData(t);return j(e)},Bi.getCategories=function(t){return er(Bi.getAllColorData(t))},Bi.getAllColorData=function(t){var e=t.seriesdata,n=[];return e.forEach((function(e){if(!e.disabled){var a=e.data||e;Bi.pushColorData(t,a,n)}})),n},Bi.pushColorData=function(t,e,n){if(e&&ua(e)&&e.every(ua))e.forEach((function(e){Bi.pushColorData(t,e,n)}));else{var a=t.dataset.getClr(e);n.push(a)}},Bi.isQuantileColorScale=function(t){return t.axes.clr?"quantile"===t.axes.clr.scaleType:na(t.dataset.clridx)&&!t.dataObject.isPolarAxisCategory&&t.systemConf.legend.colorBand.type!==dn},Bi.getItemIndex=function(t,e,n,a){var r=n&&t.dataset.getClr(n);return e?e(r):a},Bi.getIndexScale=function(t){var e,n=Bi.isQuantileColorScale(t),a=t.systemConf.legend,r=a.colorBand.ranges;if(n&&r&&r.length){var o,i=t.axes.clr.scale,l=i.domain(),s=t.patternPallete,c=t.imagePallete;c&&c.length?o=c:s&&s.length&&(o=s),o&&(e=i.copy()).range(Bi.getProcessedColorRange(tt(o.length),l,a,t))}return e},wn.setComponent("colorscale_helpers",Bi),wn.setComponent("utils.isCategoryOf",Xi),wn.setComponent("utils.getChartTypeByIndex",Ui);var qi="slider",$i="nested",Qi="list",Ki="band";function Ji(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"z-0";return el(e.legends,n)===t}}function tl(t,e){var n;return e.some((function(a,r){var o=e.length-1-r,i=e[o];if(t>=i[0]&&t<=i[1])return n=o,!0})),n}function el(t,e){var n=t.get(e);return n&&n.meta.view}function nl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"z",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=rl(t,e),r=t.hoverOptions,o=t.itemHoverStyle,i=t._itemHoverStyle,l=("clr"===e?i||o:r)||{};return(n?l[a]:null)||l}function al(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"z",n=rl(t,e),a=t.filter,r=t.itemDisabledStyle,o=("clr"===e?r:a)||{};return o[n]||o}function rl(t,e){var n=t.ranges;return t.type||(n?Qi:"z"===e?$i:Ki)}function ol(t,e){var n=e.config,a=e.scale,r=e.columnKey,o=n.nullAs;return t===Oe&&(t=pn),Xn(t)&&na(o)&&(o==="{{min(".concat(r,")}}")?a&&(t=a.domain()[0]):t=o),t}function il(t,e,n){if(!t)return!1;var a=t.data||t,r=e.dataset.getClr(a),o=wn.getComponent("color.isWithinColorRange"),i=wa(a.seriesIndex,t.index,n);e.seriesAddRemoveDetails&&e.seriesAddRemoveDetails.seriesAddRemovePhase&&(!0!==e.seriesAddRemoveDetails.seriesAdded&&!0!==e.seriesAddRemoveDetails.seriesRemoved||(i=n));var l=pi.helpers.getChartType,s=na(i)&&Yi(l(null,Eo,i,e.userdata)),c=wa(a.seriesIndex,a.seriesPos,t._seriesIndex,e.dataObject.isHierarchy||e.dataObject.pivot?null:t.index,n);if(na(c)&&Gs(e,a&&a.paneid,c))return!1;if(!o(r,e)&&e.chartTypes[0].name!==ji)return!1;if(e.dataObject.hasZaxis&&s&&!wn.getComponent("size.isWithinSizeEncode")(a,e))return!1;if(e.dataObject.isFlowChartCategory){var u=e.renderer[0];if(u&&u.highlighter)return u.highlighter.isVisible(a.point||a)}return!0}function ll(t,e,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=o.range,l=o.condition,s=void 0===l?function(){return!0}:l,c=r.ranges;if(!a)return!0;var u={config:r,scale:a,columnKey:n.dataset.getColumnIdx(e)};t=ol(t,u);var d=i||r.filter.range,h=n.dataset.getDataType(e),f=a.domain(),p=function(){if(d){if(h===To)return qa(d,t);if(c&&c.length&&ua(d[0])){var e=tl(t,c);return!(na(e)&&c[e].disabled)}return sl(t,d)}return!0},g=p(),v=h===To?qa(f,t):sl(t,[f[0],f[f.length-1]]);return v&&g&&null!==a(t)&&s(t)}function sl(t,e){return t>=e[0]&&t<=e[1]}function cl(t,e,n){var a=t.dataObject.hierarchical;if(t.dataObject.categoryHierarchy&&a.pivot&&e){e=e||"0_0";var r=t.dataObject.hierarchical.gridOptions[e].colors;return r[n%r.length]}return t.seriesColor[n%t.seriesColor.length]}function ul(t,e,n){var a=t.imagePallete;if(a){var r=t.dataObject.hierarchical;return t.dataObject.categoryHierarchy&&r&&r.pivot&&n?(n=n||"0_0",a[r.gridOptions[n].renderer[e].commonRendererProp().params.legendIndex%a.length]):a[e%a.length]}}function dl(t,e){var n=e.x-t.x,a=e.y-t.y;return $e(qe(n,2)+qe(a,2))}function hl(t,e){var n=dl(t,e),a=t.r,r=e.r;return n+r==a||n+r<a}function fl(t,e){var n=_slicedToArray(t,3),a=n[0],r=n[1],o=n[2],i=_slicedToArray(e,2),l=dl({x:a,y:r},{x:i[0],y:i[1]});return l>=o?l-o:o-l}function pl(t,e){var n=t.x,a=t.y,r=t.r,o=e.x,i=e.y,l=e.r;if(hl(t,e)||hl(e,t))return[];if(r===l){var s=nn((i-a)/(o-n));return[[n+r*Ke(s),a-r*Qe(s)],[o+r*Ke(s),i-r*Qe(s)],[n-r*Ke(s),a+r*Qe(s)],[o-r*Ke(s),i+r*Qe(s)]]}var c=(o*r-n*l)/(r-l),u=(i*r-a*l)/(r-l),d=qe(c-n,2)+qe(u-a,2),h=qe(c-n,2)+qe(u-a,2)-qe(r,2),f=qe(r,2)*(c-n),p=r*(u-a)*$e(h),g=qe(r,2)*(u-a),v=r*(c-n)*$e(h),m=qe(c-o,2)+qe(u-i,2),y=qe(c-o,2)+qe(u-i,2)-qe(l,2),b=qe(l,2)*(c-o),x=l*(u-i)*$e(y),C=qe(l,2)*(u-i),k=l*(c-o)*$e(y);return[[n+(f+p)/d,a+(g-v)/d],[o+(b+x)/m,i+(C-k)/m],[n+(f-p)/d,a+(g+v)/d],[o+(b-x)/m,i+(C+k)/m]]}function gl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[{x:0,y:0},{x:0,y:0}],a=t.map((function(t,a){var r,o,i,l;Oa(t,(function(t){e?t[0]<0&&t[1]<0?(!r||r[1]>t[1])&&(r=t):t[0]>=0&&t[1]<0?(!o||o[1]>t[1])&&(o=t):t[0]>=0&&t[1]>=0?(!i||i[1]<t[1])&&(i=t):(!l||l[1]<t[1])&&(l=t):t[0]<0&&t[1]<0?(!r||r[0]>t[0])&&(r=t):t[0]>=0&&t[1]<0?(!o||o[0]<t[0])&&(o=t):t[0]>=0&&t[1]>=0?(!i||i[0]<t[0])&&(i=t):(!l||l[0]>t[0])&&(l=t)}));var s=e?0==a?[o,i]:[r,l]:0==a?[i,l]:[o,r];return Oa(s,(function(t){t&&(t[0]+=n[a].x,t[1]+=n[a].y)})),s}));return[a[0][0],a[1][0],a[0][1],a[1][1]]}wn.setComponent("geometryUtils.circle.closestToCircle",fl),wn.setComponent("geometryUtils.circle.isCircleWithinCircle",hl),wn.setComponent("geometryUtils.circle.outerTangentPoints",pl),wn.setComponent("geometryUtils.polygon.outerTangentPoints",gl);var vl={rotatePoint:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},a=t.x,r=t.y,o=n.x,i=n.y;return{x:(a-o)*Qe(e)+(r-i)*Ke(e)+o,y:(a-o)*Ke(e)-(r-i)*Qe(e)+i}},pointInRectangle:function(t,e){var n,a,r=e.x||0,o=e.y||0,i=r+e.width,l=o+e.height;return ua(t)?(n=t[0],a=t[1]):(n=t.x,a=t.y),r<=n&&n<=i&&o<=a&&a<=l},degreeToRadian:function(t){return t/180*on},areaOfEllipse:function(t,e){return on*t*e},areaOfCircle:function(t){return on*t*t},areaOfRect:function(t,e){return t*e},dist:dl,outerTangentPoints$Circle:pl,tangentPoints$Polygon:gl};function ml(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.y1>e.y2||e.y1>t.y2)}wn.setComponent("geometryUtils.doOverlapRect",ml);var yl={};function bl(t,e,n,a,r){var o=na(t)&&na(t.events)&&t.events,i=e.events,l=n.systemConf.chart.plot.events;na(r)&&(i=e[r.type]&&e[r.type].events);var s=na(o)&&na(o[a])?o[a]:na(i)&&na(i[a])?i[a]:null!=l?l[a]:null;return void 0===s&&l&&(s=l[a]),s}function xl(t){return t.changedTouches?t.changedTouches[0]:t}function Cl(t){return t===Gt.bar||t===Gt.stkdbar||t===Gt.bullet||t===Gt.gantt||Al(t)&&t!==Gt.geoheatmap||t===Gt.waterfall||t===Gt.boxplot||t===Gt.barrange}function kl(t){return-1!=_e.dotPlot.indexOf(t)}function wl(t){return _e.bubble.has(t)||_e.bubblePie.has(t)}function _l(t){return Ll(t,yi)}function Sl(t){return kl(t)||t===Gt.bubblepie}function Ol(t){return t===Gt.sunburst}function Al(t){return t===Gt.heatmap||t===Gt.geoheatmap}function Tl(t){return-1!=_e.piePlot.indexOf(t)}function Pl(t){return Tl(t)&&t!==Gt.pie}function El(t){return t===Gt.geoheatmap}function Ll(t,e){return(da(t)?we.get(t):t)===e}function Ml(t,e,n,a,r){var o,i,l,s,c=t.dataset,u=t.systemConf.chart.plot.plotoptions.heatmap,d=u.symbol&&np(u.symbol),h=c.getX(e),f=c.getY(e,r),p=t.dataObject.hasZaxis?t.dataObject.getXYvalue(null,null,null,null,null,e,"z"):1,g=n.bandwidth(),v=a.bandwidth(),m=u.padding||0,y=g-2*Xe(m,.4*g),b=v-2*Xe(m,.4*v);return t.axes.rotated?(l=b*p,s=y*p,d&&(l=s=Xe(l,s)),i=n(h)+(g-s)/2,o=a(f)+(v-l)/2):(l=y*p,s=b*p,d&&(l=s=Xe(l,s)),o=n(h)+(g-l)/2,i=a(f)+(v-s)/2),{x:o,y:i,width:l,height:s}}function Dl(t,e,n,a){if(Bi.isQuantileColorScale(t)||Ao(t)){var r=Ui(t,a,0).value===Gt.pyramid,o=Ys(t)?t.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes[a].data:Ao(t)?pi.helpers.getSeriesdata(t,a,0).data[0]:r?t.seriesdata[0].data[0]:pn,i=Bi.getIndexScale(t);e.style("pointer-events",(function(e,l){var s,c=r?o.length-1-l:wa(e&&e.seriesIndex,l),u=r&&o?o[c]:e.data||e,d=Dn.getVal(n,arguments);if(Ao(t)){var h=t.dataObject.isHierarchy?e&&e.seriesIndex||u&&u.seriesIndex||u&&u.seriesPos||u&&u._seriesIndex||0:Ys(t)?c:Bi.getItemIndex(t,i,u,c);s=Gs(t,a,h)}if(d||!il(r?u:e,t)||s)return dn}))}}function Il(t,e,n,a,r,o,i,l,s,c,u,d){var h=null,f=r.plotarea,p=r.plotarea_approx,g=r.eventHandler.isSingleSource(),v=o&&o.yaxisOrder||0,m=Gn(r.systemConf,"chart.axes.yaxis[".concat(v,"].reversed"),!0);if(o=o||{},l&&function(t){return t.systemConf.tooltip.crosshair.type!=dn}(r))i?h={actLeft:n+f.left,actTop:e.y+f.top,top:e.y,left:c?f.width:e.x}:(h={top:0,actTop:f.top+a},c?(h.left=e.x,h.actLeft=e.x+f.left):(h.left=n,h.actLeft=f.left+n));else if(c||!g)if(h={left:e.x,top:e.y},i){var y=m?0:o&&o._width||0;h.actLeft=n+y+f.left,h.actTop=e.y+f.top}else{var b=m&&o&&o._height||0;h.actLeft=e.x+f.left,h.actTop=a+b+f.top}else{var x=Ui(r,o.paneid,o.seriesIndex||0).value;(r.dataObject.isFlowChartCategory||qa(_e.nonAxisSingleSourceEvent,x))&&(n=e.x,a=e.y),h={left:n,top:a,actLeft:f.left+n,actTop:f.top+a}}var C=e.x-t.clientX,k=e.y-t.clientY;return h.dLeft=C+f.left,h.dTop=k+f.top,h.left-=C,h.top-=k,h.distance=r.dataObject.isBubbleEnabled&&!c&&o._size?o._size/2:0,g||(h.dLeft=C,h.dTop=k),h.helpers={seriesindex:o.seriesIndex,subseriespos:ua(o.subSeriesIndex)?o.subSeriesIndex[o.seriesIndex]:o.subSeriesIndex,subseriesLength:ua(o.subseriesLength)?o.subseriesLength[o.seriesIndex]:o.subseriesLength,itempos:wa(o.categoryIndex,o.sortedItemIndex,o.itemIndex),paneid:o.paneid,itemposShared:o.itemPosShared,color:r.seriesColor,tooltipSharedInfo:s,tooltipShared:l,svgFillFunc:d||r.renderer[o.seriesIndex]&&r.renderer[o.seriesIndex].fillColorFunc,inheritColors:r.dataObject.isWaterfallEnabled,d:(r.dataObject.isHierarchy||!g)&&(o.data&&o.data.data||o.data)||o,renderTo:"plot",isWithinPlot:!(!c&&g&&!r.dataObject.isPolarAxisCategory)||zl(r.plotarea.left+n,r.plotarea.top+a,{x:r.plotarea.left+(r.scrolledX||0),y:r.plotarea.top+(r.scrolledY||0),width:r.plotarea.width,height:r.plotarea.height})},u&&(h.dLeft+=p.x,h.dTop+=p.y),h}function Rl(t,e){return t.userdata.metadata.columns.filter((function(t){return t.dataindex===e.dataindex}))[0]}function zl(t,e,n){return vl.pointInRectangle({x:t,y:e},n)}function jl(t,e,n,a){var r=null,o=t.systemConf.chart.plot.plotoptions[we.get(e)],i=Sl(e)||e===Gt.line,l=!i,s=o&&o.events&&o.events.triggerOffset;if(na(s))r=s;else if(wl(e)||"bubble"==e)if(3===arguments.length)r=arguments[2];else{var c=t.zscale?t.zscale.range()[1]/2:10,u=t.dataObject.isCombinationalChart?10:50;r=c+u}else r=l||t.systemConf.tooltip.sharedSeriesInfo?null:t.dataObject.isCombinationalChart&&i||"segment"==a?10:50;return r}function Fl(t,e){var n=il(e,t),a=!function(t,e){var n=t.dataset,a=pi.helpers,r=a.isCatNull(n,"x"),o=a.isCatNull(n,"y",e.yaxisOrder);if(t.seriesdata[0].type==Gt.stkdarea)return!1;if(e){var i=Ui(t,e.paneid,e.seriesindex).value;if(qa(_e.nonAxisSingleSourceEvent,i))return!1}return null==e||r(n.getX(e))||o(n.getY(e,e.yaxisOrder))}(t,e),r=!e._filter;return n&&a&&r}function Bl(t){var e="x",n="y";return t&&(e="y",n="x"),[e,n]}function Hl(t){return t.chartTypes[0].name===ji}function Nl(t,e,n){return n>=+t.systemConf.canvas.intelligence.dimension[e]}function Wl(t,e){return+t.systemConf.canvas.intelligence.dataCount[e]>=t.dataObject.totalnoofdatas}yl.getSize=function(t,e,n,a){a=a||[];var r=e[0],o=e[1],i=n[0],l=n[1],s=a[0],c=a[1],u=Xa(t.width,r,Xa(i,r)),d=Xa(t.height,o,Xa(l,o)),h=Xa(t.maxWidth,r,s||u),f=Xa(t.maxHeight,o,c||d);return{w:Xe(h,u),h:Xe(f,d),maxw:h,maxh:f}},yl.getPieColumnIndex=function(t){var e,n=Jn(t.systemConf.chart.plot.plotoptions.bubblepie.dataindex,3);return t.systemConf.metadata.columns.some((function(t,a){if(t.dataindex===n)return e=a,!0})),na(e)?e:t.dataset.getColumnIdx("y",0)},yl.hasSharedSeries=function(t){return t.systemConf.tooltip.sharedSeriesInfo&&t.isAxisCategory&&!Al(t.chartTypes[0].value)},wn.setComponent("events.getConfig",bl);var Vl="80%",Yl="100%",Ul="50%",Gl="100%",Xl="zc-legend-legseries",Zl="zc-legend-series",ql="zc-header-legseries",$l="zc-track-flash",Ql="zc-track-symbol",Kl="zc-legend-track",Jl="zc-slider-view",ts="zc-expandable",es="zc-legend-highlight",ns="zc-legend-minmaxlabels",as="custom-handle-path-track",rs="custom-handle-path";function os(t){return{left:-t.scrolledX||0,top:-t.scrolledY||0,right:is(t,"width"),bottom:is(t,"height")}}function is(t,e,n,a,r){n=n||t&&t.plotarea;var o=a||n[e],i=$n(r||t&&t.systemConf.chart[e],t);return null==i||isNaN(i)?o:Ge(o,+i)}function ls(t,e,n,a,r){var o=Gn(e.dataObject,"hierarchical.pivotLayout.layers.groups.length",!0)>1,i=function(t,e,n){if(Ao(t)){var a=!1;return t.legends&&t.legends.forEach((function(r){if("clr"===r.meta.encode){var o=t.legend.state&&t.legend.state[r.id]||{allSelected:!0};a=a||(na(e)&&r.id==="clr-".concat(n)?e:!r.enabled||o.allSelected)}})),a}var r=t.legend.states||{};return wa(e,r.allSelected)}(e,a,r);if(Ao(e)&&o){var l=wc("svg",".zc-fade-overlay-svg",[1],e.container.selectAll(".canvas-component")),s=wc("g",".zc-fade-overlay-clip-holder",[1],l),c=wc("rect",".zc-fade-overlay",[1],s);if(l.attrs({version:"1.1",xmlns:Rt.svg}).styles({position:"absolute",left:0,top:0,width:e.getChartDimension("width"),height:e.getChartDimension("height"),"box-sizing":"border-box","pointer-events":"none"}),!i)return ss(!1,e,n),cs(e,!1),void c.style("visibility","hidden");ss(!0,e,n);var u,d="",h=Do(e.dataObject),f=0;h.forEach((function(t){var o=e.rendererConf[f].params,i=o.bound,l=(o.yaxiscolumnorder,t.row),s=t.layer,c=t.data,u=e.legend.state["clr-".concat(s)],h=na(a)&&"clr-".concat(s)==="clr-".concat(r)?a:u.allSelected;cs(e,!h,n,"y-axis-".concat(l)),d+=h?"":function(t,e){var n=e.x,a=e.y,r=e.width,o=e.height,i=t.plotarea,l=i.left,s=i.top;return"M".concat(l+n," ").concat(s+a," L").concat(l+n+r," ").concat(s+a," L").concat(l+n+r," ").concat(s+a+o," L").concat(l+n+r," ").concat(s+a+o," L").concat(l+n," ").concat(s+a+o," Z")}(e,i),f+=c.length}));var p={d:d,name:"zc-legend-selectAll",id:e.id};u=d?Hr.get(Hr.svg_clips,"polygon",p,{chartObj:e}):null,c.attrs({x:e.plotarea.left,y:e.plotarea.top,width:is(e,"width"),height:is(e,"height"),transform:"translate(".concat(-e.scrolledX||0,",").concat(-e.scrolledY||0,")"),"clip-path":u?"url(".concat(e.defsLocation,"#").concat(u,")"):null}).styles({fill:"white",opacity:1-n,visibility:u?null:"hidden"})}else ss(i,e,n)}function ss(t,e,n){var a=e.container.selectAll("g.chartgroup,svg.static,canvas.zc-canvas,canvas.zc-labelholder-canvas,div.zcnotes");a.style("opacity",t?pn:n),ps(a,t?pn:["opacity"])}function cs(t,e,n,a){(a?t.container.selectAll("g.".concat(a)):t.container.selectAll("g.y-axis").selectAll((function(){return this.childNodes}))).style("opacity",e?n:null)}var us={};function ds(t,e,n,a,r){if(na(n)){var o=r.config,i=r.scale,l=r.dataType,s=r.dataAccessor,c=r.userRanges,u=r.encode,d=r.valueByIdex,h=function(t){return s(t._acutalData&&t._acutalData()||t.data||t)};if(c&&c.length){var f=Ma(c[n]),p=l===To;if(1===f.length&&!p){var g=Yn(i.domain());g.splice(0,2),f=[g[2*n],g[2*n+1]]}return t.filter((function(t){var r=h(t),l=il(t,a)&&ll(r,u,a,i,o,{range:f});return p?l=l&&r===f[0]:(l=l&&r>=f[0]&&r<=f[1],r===f[0]&&(l=l&&d(n)===i(r)),r===f[1]&&(l=l&&d(n)===i(r))),e?l:!l}))}return t.filter((function(t){var r=h(t),l=il(t,a)&&ll(r,u,a,i,o,{range:n});return e?l:!l}))}return t.filter((function(t){return il(t,a)}))}function hs(t){var e=fs(t),n=e.vAlign,a=e.hAlign,r=0,o=0;return"horizontal"===e.layout?"top"===n||"bottom"===n?(r=Yl,o="20%"):"center"===n&&(r="30%",o=Vl):"left"===a||"right"===a?(r="20%",o=Vl):"center"===a&&(r=Yl,o="30%"),{width:r,height:o}}function fs(t){var e=t.hAlign,n=t.vAlign,a=t.layout,r=t.x,o=t.y,i=na(r)&&na(o);return"center"===e&&"center"===n&&(e="right"),i&&(e=$r,n=Jr),na(a)||(a=i?"vertical":"top"===n||"bottom"===n?"horizontal":"vertical"),{hAlign:e,vAlign:n,layout:a,floating:i}}function ps(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n="zc-priority";if(1===arguments.length)return JSON.parse(t.attr(n))||[];t.attr(n,ha(e))}function gs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"color",a=fs(t),r=a.vAlign,o=a.floating,i=e.canvasarea[r===Jr||r===Kr?"height":"width"],l=Nl(e,"legend",i);return!(!o&&!l||!bs(n,e))&&(e.dataObject.isFlowChartCategory&&t.enabled?e.dataObject.sankeyLayout.nodeLength>0:t.enabled)}function vs(t){var e=Ao(t)&&qa([Ai,Pi,Ei],t.chartTypes[0].name)&&!t.userdata.facets.color.length;return Ao(t)&&!e}function ms(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"clr-0";if(Ao(t)){var n=t.legends.get(e);return n&&n.element||t.legendarea.element}return t.legendarea.element}function ys(t,e,n){var a="z"===t?"size":"clr"===t?"color":t,r=n.systemConf.legend;return r[a][e]||r[a]}function bs(t,e){if("color"===t){if(Bi.isQuantileColorScale(e))return!0;var n=e.isAxisCategory||e.isNonAxisMultiSeriesCategory||e.isGeoMap,a=!0;return e.dataObject.pivot&&(a=!e.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").noLayers),n?e.seriesdata.some((function(t){return!us.isHiddenItem(t)&&t.seriesname!==Oe}))&&a:e.chartTypes[0].value!==Gt.dial||e.seriesdata[0].data[0].length>1&&!Ao(e)}return!0}function xs(t,e){var n="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='".concat(t.w,"' height='").concat(t.h,"'>").concat((new XMLSerializer).serializeToString(t.node.node()),"<path d='")+"M-5,-5 L5,-5 L5,5 L-5,5 Z"+"' transform='translate(".concat(t.w/2,",").concat(t.h/2,")' style='fill: ")+"url(#".concat(t.id,")'></path> </svg>");return{url:Ar.FIREFOX||e?"data:image/svg+xml;base64,".concat(Ln(n)):"data:image/svg+xml;utf8,".concat(n),width:t.w,height:t.h}}function Cs(t,e,n){var a=n.cache,r=n.parser,o=a.as[wa(t,"zcUnNamed")];if(1===o.length)return o[0];var i=o.filter((function(t){return t._as&&-1!==lr(t._as).map((function(t){return t[0]})).indexOf(e)}));return 1===i.length?i[0]:ks(i,r._level)}function ks(t,e){if(!e)return t[0];var n=t.filter((function(t){return 0===t._level.indexOf(e)}));return n.length?n[0]:ks(t,e.substr(0,e.length-2))}us.getLegendData=function(t,e){if(Bi.isQuantileColorScale(t)){var n=t.systemConf.legend.colorBand.ranges;if(n&&n.length)return n}var a=t.dataObject;if(t._isAxisCategory()&&!a.isAxisCategory&&!a.isPolarAxisCategory&&!a.isNonAxisMultiSeriesCategory&&!Ys(t))return Do(a)[e||0].data[0].data[0];if(t.dataObject.categoryHierarchy){var r=t.dataObject.hierarchical.pivotLayout,o=r.getRootNodeList("row"),i=r.layers,l=i.isLayerNode,s=o.hasMultiCluster(),c=i.groups.length>1,u=nr(i.panes);if(c||s&&l)return u[e||0].data;if(Ys(t))return t.seriesdata}return t.isAxisCategory||t.isNonAxisMultiSeriesCategory||t.isGeoMap?t.seriesdata:t.dataObject.isFlowChartCategory?t.cache.sankey.legend:t.seriesdata[0].data[0]},us.getLegendDataLength=function(t,e){return t.isAxisCategory||t.isNonAxisMultiSeriesCategory?e.filter((function(t){return!us.isHiddenItem(t)})).length:e.length},us.isHiddenItem=function(t){return t&&t.hideInLegend},us.getClr=function(t,e,n){return t&&n.color||e},us.updateBubblePieData=function(t,e,n){n.dataObject.pieWithAxis&&t.data.forEach((function(a){var r=Pl(n.chartTypes[e].value);a.forEach((function(e){e.disabled=t.disabled||!r||e.dummy}))}))},us.updateHierarchyData=function(t,e,n){n.dataObject.isHierarchy&&(n.systemConf.seriesdata.chartdata[e].disabled=t.disabled)},us.toggleChartEvents=function(t,e){var n=Gn(t.dataObject,"hierarchical.pivotLayout.layers.groups.length",!0)>1;if(Ao(t)&&n)t.container.selectAll("rect.zc-fade-overlay").style("pointer-events",e?dn:"all");else{var a=e?null:dn,r=[];t.svg?(r.push(t.eventHandler.trackerElement),r.push(t.svg)):r.push(t.container),r.forEach((function(t){t.style("pointer-events",a)}))}},us.fadeChart=function(t,e,n,a,r){ls(0,e,n,a,r)},us.isDisabled=function(t,e,n){return e||n?us.isItemDisabled(t):!e},us.isItemDisabled=function(t){var e=t.node||t;return e.disabled||e.filtered||t.disabled||t.filtered},us.isAllEnabled=function(t,e){return e?!t.filter(us.isItemDisabled).length:e},us.getFilterBoxSize=function(t,e){var n=wa(t.size,e);return[wa(t.width,n),wa(t.height,n)]},us.updateData=function(t,e,n){Bi.isQuantileColorScale(n)?n.axes.clr.scale=Wt.getScale(n,n.dataObject,null,null,null,n.dataset,"clr"):Ao(n)||(us.updateBubblePieData(t,e,n),us.updateHierarchyData(t,e,n),n.dataObject.data=n.systemConf)},us.isContinousLegend=function(t){if(Bi.isQuantileColorScale(t)){var e=Wi(t.systemConf.legend,t);return"continuousDiscrete"===e||"continuous"===e}return!1},us.getColorBandDimension=function(t,e,n){var a=n.chartarea||n,r=t,o=fs(r),i=r.colorBand,l="horizontal"===o.layout,s=e.maxWidth,c=e.maxHeight,u=i.width,d=i.height;if(l?(u=u||"40%",d=d||14):(u=u||14,d=d||"70%"),!e.adjust){var h=hs(r);s=h.width,c=h.height}if(s=Xa(s,a.width),c=Xa(c,a.height),e.adjust){l?s*=.8:c*=.8}return u=Xa(u,a.width),d=Xa(d,a.height),[u=Xe(u,s),d=Xe(d,c)]},us.getOrient=function(t){var e=fs(t),n=e.hAlign,a=e.vAlign,r=e.floating,o=e.layout===no;return r?o?Kr:Qr:o?{top:"top",center:"bottom",bottom:"bottom"}[a]:{left:"left",center:"right",right:"right"}[n]},us.getLabelIndex=function(t,e,n){var a,r=e.stops,o=e.ranges;return o&&o.length?o.some((function(e,n){if(ua(e)?ua(t)?e[0]===t[0]&&e[1]===t[1]:e[0]===t:e===t)return a=n,!0})):n!==To&&r&&r.length&&r.some((function(e,n){if(e===t)return a=n,!0})),a},us.hexToRGB=function(t){if(t&&-1==t.toString().indexOf("#"))return t;var e=la(As(t).replace(/#/g,""),16);return"rgb(".concat(e>>16&255,",").concat(e>>8&255,",").concat(255&e,")")},us.filterSelectionByColor=function(t,e,n,a){var r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"clr";if("clr"===o){var i=a.systemConf.legend;r={encode:o,config:i,userRanges:i.colorBand.ranges,scale:a.axes.clr.scale,dataType:a.dataset.getDataType("clr"),dataAccessor:function(t){return a.dataset.getClr(t)},valueByIdex:function(t){return Bs(a,t)}}}else if("z"===o){var l=Fa(a.scales,(function(t){return"z-0"===t.id})),s=l.getScale(),c=s.range(),u=a.systemConf.legend,d=u.size[l.key]||u.size;r={encode:o,config:d,scale:s,userRanges:d.ranges,dataType:a.dataset.getDataType("z"),dataAccessor:function(t){var e=a.dataset.getZ(t);return e=ol(e,{config:d,scale:s,columnKey:a.dataset.getColumnIdx(o)})},valueByIdex:function(t){return c[t]}}}return ds(t,e,n,a,r)},us.isReversedColorAxis=function(t){return t.colorAxis&&t.colorAxis.reversed},us.hasPatternPallete=function(t){var e=t.patternPallete;return e&&e.length};var ws=L();ws.set("pattern",(function(t,e){var n=t.context,a=t.defsPath,r=void 0===a?"":a,o=t.rendererMode,i=void 0===o?"svg":o,l=e.color,s=e.pattern,c=e.opacity,u=e.size,d=e.staticColor,h="base64"===i?"svg":i;return function(t,e){var a=function(t,e,n,a,r){var o=zr[t]?Fr(t):Br(t);return o.bgClr_base=e,o.stroke_base=e,o.fillOpacity=o.fillOpacity||n,o.customStaticClr=r,a&&(o.x=a.x,o.y=a.y,o.width=a.width,o.height=a.height),o}(zn(s,[t,e]),zn(l,[t,e]),zn(c,[t,e]),u,d),o={renderTo:n,returnSVGimage:"base64"===i},f=Hr.get(Hr["".concat(h,"_patterns")],"".concat(h,"PatternFill"),a,o);return"base64"===i?"url(".concat(xs(f,!0).url,")"):"svg"===i?"url(".concat(r,"#").concat(f,")"):f}})),ws.set("encode",(function(t){t.scale;var e=t.field,n=t.accessor,a=t.value;return n||(n=e?function(t){return t[e.dataindex]}:function(t){return t}),a||(a=function(t){var e=t.scale;t.field,t.config;return function(t,a){return e(n(t))}}),a(t)})),ws.set("gradient",(function(t,e){var n=t.context,a=t.defsPath,r=void 0===a?"":a,o=t.rendererMode,i=void 0===o?"svg":o,l=t.dimension,s=void 0===l?[0,300]:l,c=e.color;return function(t,a){var o=zn(c,[t,a]),l=function(t,e,n,a){var r=t.gradient,o=Hn(_objectSpread(_objectSpread({},t),{},{chart:void 0,context:void 0}));return o.color=null!=n?n:o.color,o.opacity=null!=a?a:o.opacity,o.dimension=null!=e?e:o.dimension,o.type=r,_objectSpread({},o)}(e,s,o,0),u=Hr.get(Hr["".concat(i,"_gradients")],"".concat(i,"GradientFill"),l,{renderTo:n});return"svg"===i?"url(".concat(r,"#").concat(u,")"):u}})),ws.set("image",(function(t,e){var n=t.context,a=t.defsPath,r=void 0===a?"":a,o=t.rendererMode,i=void 0===o?"svg":o,l=e.url,s=e.width,c=e.height,u=e.x,d=void 0===u?0:u,h=e.y,f=void 0===h?0:h,p="base64"===i?"svg":i;return function(t,e){var a={name:zn(l,[t,e]),width:zn(s,[t,e]),height:zn(c,[t,e]),x:zn(d,[t,e]),y:zn(f,[t,e]),mode:p,context:n},o=Hr.get(Hr["".concat(p,"_patterns")],"imageFill",a,{renderTo:n});return"svg"===i?"url(".concat(r,"#").concat(o,")"):o}})),ws.set("as",(function(t,e){var n=t.name,a=t.as,r=t.onEnd,o=void 0===r?function(t){return t}:r,i=Cs(n,a,this)._as[a];return function(t,e){return o(i[e])}}));var _s=function(t,e,n){if(t.dataObject.isPolarAxisCategory){var a=t.plotarea_approx.radius;return{r:a,x1:-a,x2:a,y1:-a,y2:a}}if(t._isAxisCategory()){var r=t.rendererConf[e].params,o=Ui(t,n,e).value,i=t.systemConf.chart.axes,l=i.xaxis.reversed,s=i.yaxis[r.yaxiscolumnorder].reversed,c=r.xscale,u=r.yscale,d=c.range(),h=u.range(),f=function(t,e){if(t.bandwidth&&(Vi(o)||o===Gt.line)){var n=t.bandwidth()/2,a=e[0]<e[1]?1:-1;return[e[0]+n*a,e[1]-n*a]}return e};return d=f(c,d),h=f(u,h),r.axisrotated?{x1:h[+!s],x2:h[+!!s],y1:d[+!l],y2:d[+!!l]}:{x1:d[+!!l],x2:d[+!l],y1:h[+!!s],y2:h[+!s]}}};function Ss(t,e,n,a){var r=e.stopOffset,o=e.stopOpacity,i=e.stopColor,l=e.colorGamma||[1,0],s=e.spreadMethod,c="radial"==a?+e.radius:Ge(Ze((+e.x2||0)-(+e.x1||0)),Ze((+e.y2||0)-(+e.y1||0)));if(r=r||["0%","100%"],i=$n(i,n)||r.map((function(t,e){return ra(Es(n,l[e]||0,"brighter",T))?n:Es(n,l[e]||0,"brighter",T)})),o=o||[1,1],!Os(s)){for(var u=[],d=[],h=[],f=0,p=0;f<100;){for(var g=0,v=r.length;g<v;g++){var m=Xe(parseFloat(r[g])/100*c+f,100);u.push("".concat(m,"%")),h.push(p%2!=0?o[o.length-1-g]:o[g]),d.push(p%2!=0?i[i.length-1-g]:i[g])}f+=c,p+="reflect"===s?1:0}r=u,i=d,o=h}return i.map((function(t,e){null===t&&(i[e]=n)})),{offset:r,color:i,opacity:o}}function Os(t){return!(("repeat"===t||"reflect"===t)&&(Ar.IS_IOS||Ar.SAFARI))}function As(t){var e=t.match(ze);return e&&5===e.length?"#".concat("0".concat(parseInt(e[1],10).toString(16)).slice(-2)).concat("0".concat(parseInt(e[2],10).toString(16)).slice(-2)).concat("0".concat(parseInt(e[3],10).toString(16)).slice(-2)):t}function Ts(t,e){var n=P(t);return n.opacity=Xn(e)?1:e,n.toString()}function Ps(t,e){e=wa(e,1);var n=P(t);return"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(e*n.opacity,")")}function Es(t,e,n,a){return t===hn?t:(n=wa(n,"darker"),wa(a,P)(t)[n](e).toString())}function Ls(t,e,n,a,r,o,i,l){t.defsLocation;var s=Ui(t,n,e),c=s.name,u=s.value,d=t.systemConf.chart.plot.plotoptions[c],h=(t.seriesdata[e]||t.seriesdata[0]).plotoptions,f=(i=i||(h&&h.gradients?Rn(d.gradients,h.gradients,!0):d.gradients),t.patternPallete),p=t.imagePallete,g=p&&p.length,v=!r&&f&&f.length,m=o||t.plot.renderer.mode,y=Bi.getIndexScale(t),b=l?l.rendererIndex:null,x=function(r,o,s,x,C,k,w,_,S){var O,A=o&&t.dataset.getClr(o),T=i&&i.type;t.cache.clickSelectionData;if(a=k||a,r=Math.max(r,0)||0,x)O=x;else if(l&&l.paneColor&&!l.colorOverlay)O=l.paneColor;else if(O=Fs(t,r,o,e,n,b),r=Bi.getItemIndex(t,y,o,r),y&&(!Rs(A,t)||Xn(r))&&0===P(O).opacity)return O;if(c===ji&&t.systemConf.legend&&t.systemConf.legend.ranges){var E=t.systemConf.legend.filter.track;O=Rs(o[0],t)&&Rs(o[1],t)?O:E?E.fillColor:"rgb(237, 234, 234)"}if(O=Us(t,n,e,O),"canvas"!=m||T||O instanceof Object||(O=Ps(O,C)),v&&/(url|data)/.test(O))return O;if(na(s)&&(O=Es(O,s).toString()),p&&p.length&&Rs(A,t)){var L={_type:"image",url:ul(t,r,n),width:w&&w.width||t.patternImageSizes[r%g][0],height:w&&w.height||t.patternImageSizes[r%g][1],context:w&&w.context||t.getPatternSvg(),defsPath:t.defsLocation,rendererMode:m};return ws.get(L._type)(L,L)()}if(v){var M=t.userdata.legend,D=M.useCustomPatternDimension,I=M.customPatternColor;w=na(D)&&!D?D:w;var R={_type:"pattern",color:O,pattern:f[r%v],opacity:C,size:w,staticColor:I,context:t.getPatternSvg(),defsPath:t.defsLocation,rendererMode:_?"base64":m};return ws.get(R._type)(R,R)()}if(Bi.isQuantileColorScale(t)&&na(S)&&Vi(u)&&!(h&&h.fillColor||d.fillColor)){var z=l?l.rendererIndex:e;i=Ws(t,t.renderer[z].seriesdataAfterUpdate[S],e)}return a&&i&&i.type?Ms(i,a,O,m,C,c,_,t):O};return x.gradientOptions=i,x}function Ms(t,e,n,a,r,o,i,l){var s,c=Nr(t,e,n,r);return s="svg"===a?Hr.get(Hr.svg_gradients,"svgGradientFill",c,{offset:o,chartObj:l}):Hr.get(Hr.canvas_gradients,"canvasGradientFill",c,{offset:o,chartObj:l,returnSVGimage:i}),i||"canvas"===a?s:"url(".concat(l.defsLocation,"#").concat(s,")")}function Ds(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"svg",r={},o=n.rendererConf[e]||n.rendererConf[0],i=o.params,l=i&&i.gvp&&i.gvp("hoveroptions"),s=l&&l.gradients;if(s&&(s.enabled||"object"!==_typeof(s))){var c=Hn(i.gvp("gradients")),u=n.chartTypes[e],d=n.seriesColor[e],h=_s(n,e),f={def:{gradients:c},gradientDim:h,chartName:u,seriesColor:d},p=(s="object"===_typeof(s)?s.type&&s.options?s:c:$n(s,t,e,n,f))?"string"==typeof s?s:Ms(s,h,d,a,null,u,null,n):d;r.gradient=p||d,r.bound=i.bound}return r}function Is(t,e,n,a,r){var o,i=t.defsLocation,l=Ui(t,n,e),s=l.value,c=l.name,u=Vi(s),d=s===Gt.line,h=(t.seriesdata[e]||t.seriesdata[0]).plotoptions,f=t.systemConf.chart.plot.plotoptions[c],p=d&&h&&h.gradients?Rn(f.gradients,h.gradients,!0):f.gradients,g=Bi.isQuantileColorScale(t),v=t.plot.renderer.mode,m=r?r.rendererIndex:e;return function(r,l,s,y,b,x){var C=g&&na(x)&&(d||u)&&!(h&&h.strokeColor||f.strokeColor),k=d&&p.type;if(C&&(p=Ws(t,t.renderer[m].seriesdataAfterUpdate[x],e)),a&&(C||k)){var w=s||Bs(t,e,n),_=Nr(p,a,w,b),S="svg"==v?Hr.get(Hr.svg_gradients,"svgGradientFill",_,{offset:c,chartObj:t}):Hr.get(Hr.canvas_gradients,"canvasGradientFill",_,{offset:c,chartObj:t});return"canvas"==v?S||w:"url(".concat(i,"#").concat(S,")")}if(s)o=s;else{r=Math.max(r,0)||0;w=Fs(t,r,l,e,n,m);na(y)&&(w=Es(w,y).toString()),o=w}return o=Us(t,n,e,o),"canvas"!=v||o instanceof Object||(o=Ps(o,b)),o}}function Rs(t,e,n,a,r){n||(n=Gn(e,"axes.clr.scale",!0));var o=e.systemConf.legend;return ll(t,"clr",e,n,o,{condition:function(t){return!(Xn(o.colorBand.nullAs)&&null==t)},range:r})}function zs(t,e,n){if(!t||!t.dummy&&t.disabled)return e;var a=n.systemConf.legend;if(!Rs(n.dataset.getClr(t),n))return js(e,a.filter.track);if(n.dataObject.hasZaxis){var r=Fa(n.scales,(function(t){return"z-0"===t.id})),o=ys(r.encode,r.key,n);if(!wn.getComponent("size.isWithinSizeEncode")(t,n))return js(e,al(o).track)}return!0}function js(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Jn(e.fillOpacity,1),a=e.fillColor||hn,r=P(a);if(0===(n=r.opacity*n))return hn;var o=m().domain([0,1]).range([t,As(a)]).interpolate(K);return o(n)}function Fs(t,e,n,a,r,o){r=r||n&&n.paneid;var i,l=wa(o,a),s=Bs(t,e,r),c=Xi(t,Ui(t,r,0).value,"axis")&&na(l)&&t.rendererConf&&t.rendererConf[l]&&t.rendererConf[l].params,u=(t.seriesdata[wa(a,e)]||t.seriesdata[0]).colorFinder;return na(u)&&na(i=$n(u,t,e,n,a))?i:(i=c&&c.categoryColorConfig?Bi.getWaterfallColor(n,c.categoryColorConfig,s):c&&c.colorOverlay?function(t,e,n,a){var r=e.yaxiscolumnorder,o=e.threshold,i=e.thresholdType,l=t.dataset,s="x"==i?l.getX(n):l.getY(n,r);return e.colorOverlay(o,i,s,a)}(t,c,n,s):n&&Bi.isQuantileColorScale(t)?Hs(t,n):n&&n.arcColor?ua(n.arcColor)?n.arcColor[0]:n.arcColor:s,il(n,t,a)||(i=zs(n,i,t)),i=Us(t,r,a,i))}function Bs(t,e,n,a){if(t.imagePallete)return ul(t,e,n);if(t.dataObject&&t.dataObject.categoryHierarchy&&a){var r=t.dataObject.hierarchical.legendOptions[a],o=t.imagePallete||r.colors;return o[e%o.length]}return cl(t,n,e)}function Hs(t,e){var n=t.dataset.getClr(e),a=t.axes.clr.scale;return n===Oe&&(n=null),a(n)}function Ns(t,e){return t.multiColoring&&!e.legendarea.show}function Ws(t,e,n){var a,r,o,i,l,s,c=t.axes.rotated,u=t.systemConf.chart.axes.xaxis.reversed,d=t.axes.x.scale,h=d.range(),f="rgba(255,255,255,0)",p="discrete"===t.systemConf.legend.colorBand.colorModeOnPlot,g=d.bandwidth?d.bandwidth()/2:0,v=m().domain([h[0]+g,h[h.length-1]-g]).range([0,100]),y=[],b=[];e.forEach((function(e){if(i=+v(d(t.dataset.getX(e))+g).toFixed(2),l=Hs(t,e),il(e,t,n)||(l=zs(e,l,t)),(s=l===hn)&&(l=f),p||!o&&!s||(na(a)&&(b.push("".concat(Xe(100,a+.1),"%")),y.push(f)),b.push("".concat(Ge(0,i-.1),"%")),y.push(f)),p&&r)if(o)b.push("".concat(Ge(0,i-.1),"%")),y.push(r);else if(s)b.push("".concat(Xe(100,a+.1),"%")),y.push(l);else{var c=(i+a)/2;b.push("".concat(c,"%")),y.push(r),b.push("".concat(c,"%")),y.push(l)}b.push("".concat(i,"%")),y.push(l),a=i,r=l,o=s}));var x={type:"linear",options:{linear:{gradientUnits:"userSpaceOnUse",x1:0,x2:0,y1:0,y2:0,stopColor:y,stopOffset:b}}},C=c?u?"y2":"y1":u?"x1":"x2";return x.options.linear[C]=100,x}function Vs(t,e,n,a){var r=n.dataCount;return n.reverseColor?r-1-t:(a.isAxisCategory||a.isNonAxisMultiSeriesCategory||a.dataObject.isPolarAxisCategory||a.isGeoMap)&&!n.multiColoring?e:t}function Ys(t,e){if(t.isGeoMap)return!1;if(!Ao(t))return!1;var n=na(e)?t.dataObject.hierarchical.gridOptions[e].chartTypes.map((function(t){return t.name})):Gi(t).values();return t.userdata.facets.color.length&&n.some((function(t){return qa([Ai,Pi,Ei],t)}))}function Us(t,e,n,a){if(Gs(t,e,n)){var r=t.dataObject.hierarchical.gridOptions[e].legendOrder||0;return js(a,t.legends.get("clr-".concat(r)).meta.config.filter.track)}return a}function Gs(t,e,n){var a=Ui(t,e,0).name;if(Ao(t)&&e&&(!qa([Ai,Pi,Ei],a)||t.userdata.facets.color.length))return pi.helpers.getSeriesdata(t,e,n).filtered}function Xs(t,e){this.spec=t,this.data=t.data||e.seriesdata.chartdata,this.encoding={},this.columns=new Array(0),this.scales={},this.axes={vertical:new Array(0),horizontal:new Array(0)},this.marks={_default:{},_custom:new Array(0)},this.marks._default={chart:new Array(0),label:new Array(0)},this.legends={}}function Zs(t,e){for(var n=e.systemConf.metadata,a=n.axes.y[t],r=1,o=a.length-1,i=n.columns[a[r-1]],l=i[i.datatype];r<=o;r++){var s=n.columns[a[r]];l=ga(l,s[s.datatype])}return l}function qs(t){switch(t){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top"}}function $s(t,e){return{top:wa(t.marginTop,e,5),right:wa(t.marginRight,e,5),bottom:wa(t.marginBottom,e,5),left:wa(t.marginLeft,e,5)}}function Qs(t,e,n){return n||(t=qs(t)),e[t]}function Ks(t,e){return"x"==t&&e||"y"==t&&!e}function Js(t,e){return("bottom"==t||"top"==t)&&!e||("left"==t||"right"==t)&&e?"x":"y"}function tc(t,e,n){var a;if("x"==e){var r=t.dataObject.hierarchical;if(r){var o=r.pivotLayout.getRootNodeList("column"),i=o.getCount(),l=o.getLeavesCount();i&&n>l-1?(t.axes.x.levels[n-l]=t.axes.x.levels[n-l]||{},a=t.axes.x.levels[n-l]):l>1?(t.axes.x.leaves[n]=t.axes.x.leaves[n]||{},a=t.axes.x.leaves[n]):a=t.axes.x}else a=t.axes.x}else if("clr"===e)a=t.axes.clr;else{var s,c,u,d=t.dataObject.hierarchical;if(d){var h=d.pivotLayout.getRootNodeList("row");s=h.getCount(),c=h.hasMultiCluster(),u=h.getLeavesCount()}c||s?s&&n>u-1?(t.axes.y.branches[n-u]=t.axes.y.branches[n-u]||{},a=t.axes.y.branches[n-u]):(t.axes.y.leaves[n]=t.axes.y.leaves[n]||{},a=t.axes.y.leaves[n]):(t.axes.y.groups[n]=t.axes.y.groups[n]||{},a=t.axes.y.groups[n])}return a}function ec(t,e,n,a){var r,o=t.systemConf,i=(t.dataSplicer.getAxisConfig(e),"y"==e?o.chart.axes.yaxis:o.chart.axes.xaxis),l="y"==e?o.chart.axes.yaxisLevels:o.chart.axes.xaxisLevels,s=t.dataObject,c="y"==e?s.categoryHierarchy:s.hierarchical;c&&c.categoryTree;if(c){var u=ko(e,n,t),d=bo(n,null,e,t);if(u){var h=function(t,e,n){var a="x"==t?"column":"row",r=n.dataObject.hierarchical.pivotLayout.getRootNodeList(a).getLeavesCount();return r>1?e-r:e-1}(e,n,t);if(r=l[h]||{},a){var f="y"==e?i[0]:i;r=l[h]=Rn(l[h],f,!1)}}else r="x"==e?i:i[d],a&&"y"==e&&d>0&&(r=Rn(i[d],i[0],!1))}else r=t.dataSplicer.getAxisConfig(e,n),a&&"y"==e&&n>0&&(r=Rn(i[n],i[0],!1));return r}function nc(t,e,n){if(t.viewFlow){var a=rc(n);return t.viewFlow.axes[a].length||t.axes[e].count}return t.axes[e].count}function ac(t,e,n,a){var r=rc(n);return t.viewFlow?t.viewFlow.axes[r][a]:null}function rc(t,e,n){return t?"left"==t||"right"==t?"vertical":"horizontal":n?"x"==e?"vertical":"horizontal":"y"==e?"vertical":"horizontal"}function oc(t,e,n){if("inner"==t.tickOrient)return"x"!=e||!n.ismultix}function ic(t,e,n){var a=n.chart.axes.yaxis[0].reversed;if("x"==t&&("bottom"==e&&!a||"left"==e&&!a||"top"==e&&a||"right"==e&&a))return!0}function lc(t){if(t._viewParser)return t.rotated;var e=t.chart.axes;return e&&!0===e.rotated}function sc(t,e,n){var a=n.dataObject.hierarchical,r=(n.plotarea,n.axes[t].count,0);if(a)for(var o="x"==t?"column":"row",i=a.pivotLayout.getRootNodeList(o),l=i.getLeavesCount(),s=i.getCount(),c=i.hasMultiCluster(),u=n.dataObject.hierarchical&&(c||s),d=0;d<e;d++){if(u&&d<l-1);else if(cc(ec(n,t,d),t,d,n)){var h=tc(n,t,d);r+="y"===t&&d===l-1&&u?n.axes[t].maxLeafAxisArea:h.component.tickLabelWidth()}}return r}function cc(t,e,n,a){var r=t.show;if(a._isAxisCategory()&&!a.isAxisCategory){if(!(a.dataObject.hierarchical&&a.dataObject.hierarchical.pivot))return r;if(wo(e,n,a)&&("y"===e||"x"!==e||!Ys(a)))return!1}return r}function uc(t,e,n){return"y"==t?e?Kr:$r:e?$r:Kr}function dc(t,e,n,a,r,o,i,l){var s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=s.enter_update_exit,u=s.insertBefore,d=s.remove,h=void 0===d||d;a=a||"",o=o||"",r=r||"zc";var f=t.selectAll(e+a+o).data(n,l),p=u?f.enter().insert(e,u):f.enter().append(e),g=p.merge(f).attr(r,o),v=f.exit();return i&&g.styles(i),h&&v.remove(),c?{enter:p,update:g,exit:v}:g}function hc(t,e,n,a,r,o,i,l,s,c,u){if(null==e||!e.trim()||!t)return e;var d,h;s=s||t,l?(d=l.width,h=l.height):(d=a.right-a.left,h=a.bottom-a.top);var f=0;if("left"==r||"right"==r)n.top+n.height-i.bottom>a.bottom&&(f+=(n.top+n.height-i.bottom-a.bottom)/n.height),n.top+i.top<a.top&&(f+=(a.top-(n.top+i.top))/n.height),h=n.height-Ge(0,n.top+n.height-i.bottom-a.bottom)-Ge(0,a.top-(n.top+i.top));else if("bottom"==r||"top"==r)if(u){var p=0;n.left+n.width-i.right>a.right&&(p=n.left+n.width-i.right-a.right),n.left+i.left<a.left&&(p=Ge(p,a.left-(n.left+i.left))),d=2*(n.width/2-p),f+=2*p/n.width}else n.left+n.width-i.right>a.right&&(f+=(n.left+n.width-i.right-a.right)/n.width),n.left+i.left<a.left&&(f+=(a.left-(n.left+i.left))/n.width),d=n.width-Ge(0,n.left+n.width-i.right-a.right)-Ge(0,a.left-(n.left+i.left));if((f=parseFloat(f.toFixed(2)))>0){var g=Ue((1-f)*e.length);t.textContent=e.substring(0,g-1)+o;var v=("tspan"==s.nodeName?Dr:Ir)(s);!1===(c="tspan"!=t.nodeName&&c)||v.width==n.width&&v.height==n.height||yc(t,s,e,d,h,v,o)}}function fc(t,e,n,a,r,o,i){return{x1:o&&i?t-n:t,y1:o&&!i?e-a:e,x2:o&&i?t:t+n,y2:o&&!i?e:e+a}}function pc(t,e,n,a,r,o,i,l){var s=t,c=e,u=n,d=a;if(!l){var h=fc.apply(this,Zn(arguments));s=h.x1,c=h.y1,u=h.x2,d=h.y2,r=gc(r,n,a)}return"M".concat(s,",").concat(d-r.bly,"L").concat(s,",").concat(c+r.tly,"A").concat(r.tlx,",").concat(r.tly," 0 0 1 ").concat(s+r.tlx,",").concat(c,"L").concat(u-r.trx,",").concat(c,"A").concat(r.trx,",").concat(r.trY," 0 0 1 ").concat(u,",").concat(c+r.trY,"L").concat(u,",").concat(d-r.bry,"A").concat(r.brx,",").concat(r.bry," 0 0 1 ").concat(u-r.brx,",").concat(d,"L").concat(s+r.blx,",").concat(d,"A").concat(r.blx,",").concat(r.bly," 0 0 1 ").concat(s,",").concat(d-r.bly,"Z")}function gc(t,e,n,a){var r,o=Object.create(t),i=o.tlx+o.trx,l=o.trY+o.bry,s=o.brx+o.blx,c=o.tly+o.bly;return n<c&&(r=c/(c-n),o.tly=o.tly-o.tly/r,o.bly=o.bly-o.bly/r),e<i&&(r=i/(i-e),o.tlx=o.tlx-o.tlx/r,o.trx=o.trx-o.trx/r),n<l&&(r=l/(l-n),o.trY=o.trY-o.trY/r,o.bry=o.bry-o.bry/r),e<s&&(r=s/(s-e),o.brx=o.brx-o.brx/r,o.blx=o.blx-o.blx/r),a&&(o.tlx=o.tly=Math.min(o.tlx,o.tly),o.trx=o.trY=Math.min(o.trx,o.trY),o.blx=o.bly=Math.min(o.blx,o.bly),o.brx=o.bry=Math.min(o.brx,o.bry)),o}function vc(t,e,n){var a=Dn.getVal(Kn(e,"fontSize")),r=Kn(e,"fontFamily"),o=Kn(e,"fontWeight"),i=Kn(e,"fontStyle"),l=Kn(e,"textShadow"),s=Kn(e,"fontColor"),c=Kn(e,"textDecoration"),u=Kn(e,"strokeColor"),d=Kn(e,"fontOpacity"),h=_defineProperty({"font-size":na(a)?"".concat(a,"px"):null,"font-family":r,"font-weight":o,"font-style":i,"text-shadow":l,"text-decoration":c,"fill-opacity":d},n?"color":"fill",s);return!n&&u&&(h.stroke=u,h["stroke-width"]=Kn(e,"strokeWidth")||3,h["paint-order"]="stroke"),na(t)?("contrast"===u&&(h.stroke=null),t.styles(h)):h.color=s,h}function mc(t,e){t.append("title").text((function(){return e||this.parentNode.textContent}))}function yc(t,e,n,a,r,o,i){var l=t.textContent.length-1,s=i.length;if(o.width>a||o.height>r)for(var c=0;l>=c;){if(u(!0),o.width<=a&&o.height<=r)return;l--}else for(c=n.length;l<c;){if(o.width>=a||o.height>=r)return l--,void u(!1);l++}function u(a){var r="tspan"==t.nodeName?Dr:Ir;t.textContent=n.substring(0,l-s)+i,a&&(o=r(e))}}function bc(t){return t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi).map((function(t){var e=(t=t.trim()).match(/[a-z]/gi).shift(),n=t.match(/-?[0-9]\d*(\.\d+(e-\d+)?)?/g);return n&&(n=n.map((function(t){return parseFloat(t)}))),{function:e,moves:n}}))}function xc(t,e,n,a){var r,o=ua(e)&&e.length>1,i=a?"html":"text",s=l(t.node().parentNode);if(o){t.text(null);var c=t.attr("x")||0,u=t.attr("y")||0,d=t.attr("dy")?parseFloat(t.attr("dy")):.71,h=0,f=na(n)&&na(n.lineHeight)?n.lineHeight:d,p=na(n)&&n.orient;f="top"==p?-(e.length-1+f):"left"==p||"right"==p?-(e.length-2+f)/2:f,e.forEach((function(e,n){if(a)Cc(s,t,e,n);else{var r=t.append("tspan");r.attr("x",c).attr("y",u).attr("dy",(function(t,e){return"".concat(h+++f,"em")})),r[i]((function(){return e}))}}))}else a?(t.text(null),r=Cc(s,t,e)):t[i](e);return r}function Cc(t,e,n,a){var r,o,i,s=e.node();if(/^<g.+<\/g>/i.test(n)){for(var c=(h=(new DOMParser).parseFromString('<svg xmlns="'.concat(Rt.svg,'">').concat(n,"</svg>"),"application/xml")).querySelectorAll("text"),u=0;u<c.length;u++){var d=l(c[u]);"auto"==d.attr("position")&&(r=e,i=void 0,i=(o=d).attr("textAnchor"),o.attrs({x:r.attr("x"),y:r.attr("y"),dy:r.attr("dy"),transform:r.attr("transform"),"text-anchor":r.attr("text-anchor"),class:r.attr("class"),style:r.attr("style")}),i&&o.style("text-anchor",i))}s=t.node().appendChild(h.querySelector("g"))}else if(/^<image.+<\/image>/i.test(n))if(t.selectAll("g.image").nodes().length){var h=(new DOMParser).parseFromString('<svg xmlns="'.concat(Rt.svg,'">').concat(n,"</svg>"),"application/xml");t.selectAll("g.image").node().appendChild(h.querySelector("image"))}else wc("g",".image",[e.data()[0]],t,0==a?"text":null).html(n);else if(/^<tspan.+<\/tspan>/i.test(n)){h=(new DOMParser).parseFromString('<svg xmlns="'.concat(Rt.svg,'">').concat(n,"</svg>"),"application/xml");e.node().appendChild(h.querySelector("tspan"))}else e.append("tspan").text(n);return s}function kc(t){var e=t.selectAll("tspan").nodes();if(e&&e.length){var n=[];return e.forEach((function(t){n.push(t.textContent)})),n}return t.node().textContent}function wc(t,e,n,a,r,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};a||(a=l("body"));var s,c,u,d={".":"class","#":"id"};return/^[.#]/.test(e)&&(u=e[0],c=e.slice(1),s=d[u]),dc(a,t,n,u,s,c,null,o,_objectSpread(_objectSpread({},i),{},{insertBefore:r}))}function _c(t){return t.isD3Selection&&(t=t.node()),!!t.ownerSVGElement}wn.setComponent("gradient_helpers.getDimension",_s),wn.setComponent("color.rgb2hex",As),wn.setComponent("color.toRGBA",Ts),wn.setComponent("color.toneColor",Es),wn.setComponent("color.getGradients",Ms),wn.setComponent("color.isWithinColorRange",Rs),wn.setComponent("color.getRawColor",Fs),wn.setComponent("color.getColorByIndex",Bs),wn.setComponent("color.getIndexForItem",Vs),Xs.prototype={init:function(){var t=this;this.spec.encoding&&this.addEncode(this.spec.encoding),this.spec.scales&&this.spec.scales.map((function(e){return t.addScale(e)})),this.spec.axes&&this.spec.axes.map((function(e){return t.addAxis(e)})),this.spec.marks&&this.spec.marks.map((function(e){return t.addMarks(e)})),this.spec.legends&&this.spec.legends.map((function(e){return t.addLegend(e)}))},addLegend:function(t){this.legends=t},addEncode:function(t){var e=this;t.x&&(this.encoding.x=[],t.x.constructor,t.x.map((function(t){e.encoding.x.push({column:t})}))),t.y&&(this.encoding.y=[],t.y.map((function(t){e.encoding.x.push({column:t})})))},addScale:function(t){this.scales[t.id]={conf:t}},addAxis:function(t){"left"==t.orient||"right"==t.orient?this.axes.vertical.push({conf:t,scale:this.scales[t.scale]}):this.axes.horizontal.push({conf:t,scale:this.scales[t.scale]})},addMarks:function(t){var e=this;if("DEFAULT"==t.type){var n,a,r=$n(t.data,this.data),o=r.map((function(e,n){return $n(t.renderer,e,n)}));t.operator&&(n=r.map((function(e,n){return t.operator(e,n)}))),t.spec&&(a=r.map((function(e,n){return"function"==typeof t.spec?t.spec(e,n):t.spec}))),r.map((function(t,r){o[r].isDataLabel?e.marks._default.label.push({data:t,operator:n&&n[r],type:o[r].type,spec:a&&a[r]}):e.marks._default.chart.push({data:t,operator:n&&n[r],type:o[r].type,datasetIndex:o[r].datasetIndex,spec:a&&a[r],x:o[r].x&&e.scales[o[r].x].component,y:o[r].y&&e.scales[o[r].y].component})}))}else this.marks._custom.push({mark:t})}},wn.setComponent("viewParser",Xs),wn.setComponent("domUtils.appendElement",dc),wn.setComponent("utils.roundedRect",pc),wn.setComponent("domUtils.applyFont",vc);Dn.fontUtils={getTextWidth:function(t,e,n,a,r){a=a||"normal",r=r||"normal",He.save(),He.font="".concat(a," ").concat(r," ").concat(e||12,"px ").concat(n||wr.fontFamily);var o=He.measureText(t).width;return He.restore(),o},getTextHeight:function(t,e,n,a,r,o){return o?e:e<24?e+3:~~(1.195*e)}};function Sc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=_objectSpread({transform:"transform",filter:"filter",dashStyle:"stroke-dasharray"},a),o=_objectSpread({fillColor:"fill",innerFillColor:"fill",outerFillColor:"fill",fillOpacity:"fill-opacity",innerFillOpacity:"fill-opacity",outerFillOpacity:"fill-opacity",strokeColor:"stroke",innerStrokeColor:"stroke",outerStrokeColor:"stroke",strokeOpacity:"stroke-opacity",innerStrokeOpacity:"stroke-opacity",outerStrokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",innerStrokeWidth:"stroke-width",outerStrokeWidth:"stroke-width",fontWeight:"font-weight",fontStyle:"font-style",textShadow:"text-shadow"},n);return Oa(e,(function(n,a){r[a]?("dashStyle"===a&&(n=Gr(n,e.strokeWidth)),t.attr(r[a],n)):t.style(o[a]||a,n)})),t}function Oc(t,e){if(t){var n=t.split(" "),a={dx:parseFloat(n[0]),dy:parseFloat(n[1]),color:n[3],blur:parseFloat(n[2]),x:"-50%",y:"-50%",width:"200%",height:"200%"},r=Hr.get(Hr.svg_filters,"dropShadow",a,{chartObj:e});return"url(".concat(e.defsLocation,"#").concat(r,")")}}function Ac(t){t.isD3Selection&&(t=t.node());for(var e=t.getTotalLength(),n=[],a=0;a<e;a++){var r=t.getPointAtLength(a);n.push([r.x,r.y])}return n}function Tc(t){var e="<zc-temp>".concat(t,"</zc-temp>");return(new DOMParser).parseFromString('<svg xmlns="'.concat(Rt.svg,'">').concat(e,"</svg>"),"application/xml")}function Pc(t,e){return Zn(t.querySelectorAll(e))}Dn.createElement=wc,Dn.svgBoxShadow=Dn.setStyles=Sc;var Ec="fadeAll",Lc="fadeOneByOne",Mc="fadeRandom",Dc="fade",Ic="sizing",Rc="sizingRandom",zc="randomOut",jc="vertical",Fc="verticalAll",Bc="vertPathTween",Hc="vertPathTweenAll",Nc="horizontalAll",Wc="horiPathTween",Vc="strokeTween",Yc="pointTween",Uc="pointbypoint",Gc="allseries",Xc="onebyone",Zc=M(["geo-location-1","geo-location-2","geo-location-3","geo-flag-1","geo-flag-2","geo-flag-3","geo-pin-1","geo-pin-2","geo-pin-3"]);function qc(t,e,n,a,r,o){return na(o)?Ze(e(t[o][1])-e(t[o][0])):e(t[a][r])-e(t[n][r])}function $c(t){var e=t.length-1,n="";return t.map((function(t,a){n+=a==e?"".concat(np(t[0])(t[1])):"".concat(np(t[0])(t[1])," Z ")})),n}function Qc(t,e,n){var a=np("line")(t),r=np("vertical-line")(e),o=function(t){return function(){var e=arguments[0][0];return e+t}};if(n){var i=/ (\d)+/g,l=a.replace(i,o(-e/2)),s=a.replace(i,o(e/2));return"".concat(r," ").concat(l," ").concat(s)}var c=/M(\d)+|L(\d)+/g,u=r.replace(c,o(-t/2)),d=r.replace(c,o(t/2));return"".concat(a," ").concat(u," ").concat(d)}function Kc(t,e,n,a,r){return r?[ip("vertical-line",t,n-a/2,e),ip("line",a,n,e),ip("vertical-line",t,n+a/2,e)]:[ip("line",t,e,n-a),ip("vertical-line",a,e,n),ip("line",t,e,n+a)]}wn.setComponent("svg.symbolPath.geo",(function(t,e,n){return n=wa(n,"outer"),{"geo-location-1":{outer:"".concat("M ",0," ").concat(-.9956*e,"C")+" ".concat(-.1506*e," ").concat(-.9956*e," ").concat(-.2845*e," ").concat(-.8718*e," ").concat(-.2845*e," ").concat(-.7279*e,"C")+" ".concat(-.2845*e," ").concat(-.7179*e," ").concat(-.2845*e," ").concat(-.7078*e," ").concat(-.2811*e," ").concat(-.6978*e,"C")+" ".concat(-.2744*e," ").concat(-.594*e," ").concat(-.2209*e," ").concat(-.5204*e," ").concat(-.1673*e," ").concat(-.4401*e,"C")+" ".concat(-.0971*e," ").concat(-.3363*e," ").concat(-.0167*e," ").concat(-.2159*e," ").concat(-.0167*e," ").concat(-.0084*e,"C")+" ".concat(-.0167*e," ").concat(.0017*e," ").concat(-.01*e," ").concat(.0084*e," ",0," ").concat(.0084*e,"S")+" ".concat(.0167*e," ").concat(.0017*e," ").concat(.0167*e," ").concat(-.0084*e,"C")+" ".concat(.0167*e," ").concat(-.2192*e," ").concat(.0971*e," ").concat(-.3363*e," ").concat(.1673*e," ").concat(-.4401*e,"C")+" ".concat(.2209*e," ").concat(-.5204*e," ").concat(.2744*e," ").concat(-.594*e," ").concat(.2811*e," ").concat(-.6944*e,"C")+" ".concat(.2811*e," ").concat(-.7045*e," ").concat(.2845*e," ").concat(-.7145*e," ").concat(.2845*e," ").concat(-.7246*e,"C")+" ".concat(.2845*e," ").concat(-.8718*e," ").concat(.1506*e," ").concat(-.9956*e," ",0," ").concat(-.9956*e,"z"),inner:"".concat("M ",0," ").concat(-1.7333*e,"C")+" ".concat(.1267*e," ").concat(-1.7333*e," ").concat(.2333*e," ").concat(-1.6267*e," ").concat(.2333*e," ").concat(-1.5*e,"S")+" ".concat(.1267*e," ").concat(-1.2667*e," ",0," ").concat(-1.2667*e,"S")+" ".concat(-.2333*e," ").concat(-1.3733*e," ").concat(-.2333*e," ").concat(-1.5*e,"S")+" ".concat(-.1267*e," ").concat(-1.7333*e," ",0," ").concat(-1.7333*e,"z")},"geo-location-2":{outer:"".concat("M ",0," ").concat(-1*e,"C")+" ".concat(-.1933*e," ").concat(-1*e," ").concat(-.35*e," ").concat(-.8433*e," ").concat(-.35*e," ").concat(-.65*e,"C")+" ".concat(-.35*e," ").concat(-.31*e," ").concat(-.0233*e," ").concat(-.0167*e," ").concat(-.01*e," ").concat(-.0033*e,"C")+" ".concat(-.0067*e," ",0," ").concat(-.0033*e," ",0," ",0," ",0,"S")+" ".concat(.0067*e," ",0," ").concat(.01*e," ").concat(-.0033*e,"C")+" ".concat(.0233*e," ").concat(-.0167*e," ").concat(.35*e," ").concat(-.31*e," ").concat(.35*e," ").concat(-.65*e,"C")+" ".concat(.35*e," ").concat(-.8433*e," ").concat(.1933*e," ").concat(-1*e," ",0," ").concat(-1*e,"z"),inner:"".concat("M ",0," ").concat(-1.6667*e,"C")+" ".concat(.2*e," ").concat(-1.6667*e," ").concat(.3667*e," ").concat(-1.5*e," ").concat(.3667*e," ").concat(-1.3*e,"S")+" ".concat(.2*e," ").concat(-.9333*e," ",0," ").concat(-.9333*e,"S")+" ".concat(-.3667*e," ").concat(-1.1*e," ").concat(-.3667*e," ").concat(-1.3*e,"S")+" ".concat(-.2*e," ").concat(-1.6667*e," ",0," ").concat(-1.6667*e,"z")},"geo-pin-1":{outer:"".concat("M ").concat(.2167*e," ").concat(-.7833*e,"C")+" ".concat(.2167*e," ").concat(-.9033*e," ").concat(.12*e," ").concat(-1*e," ",0," ").concat(-1*e,"S")+" ".concat(-.2167*e," ").concat(-.9033*e," ").concat(-.2167*e," ").concat(-.7833*e,"C")+" ".concat(-.2167*e," ").concat(-.67*e," ").concat(-.1267*e," ").concat(-.5767*e," ").concat(-.0167*e," ").concat(-.5667*e,"L")+" ".concat(-.0167*e," ").concat(-.0167*e,"C")+" ".concat(-.0167*e," ").concat(-.0067*e," ").concat(-.01*e," ",0," ",0," ",0,"S")+" ".concat(.0167*e," ").concat(-.0067*e," ").concat(.0167*e," ").concat(-.0167*e,"L")+" ".concat(.0167*e," ").concat(-.5667*e,"C")+" ".concat(.1267*e," ").concat(-.5767*e," ").concat(.2167*e," ").concat(-.67*e," ").concat(.2167*e," ").concat(-.7833*e,"z"),inner:"".concat("M ",0," ").concat(-1.8*e,"C")+" ".concat(-.1267*e," ").concat(-1.8*e," ").concat(-.2333*e," ").concat(-1.6933*e," ").concat(-.2333*e," ").concat(-1.5667*e,"C")+" ".concat(-.2333*e," ").concat(-1.5467*e," ").concat(-.2467*e," ").concat(-1.5333*e," ").concat(-.2667*e," ").concat(-1.5333*e,"S")+" ".concat(-.3*e," ").concat(-1.5467*e," ").concat(-.3*e," ").concat(-1.5667*e,"C")+" ".concat(-.3*e," ").concat(-1.7333*e," ").concat(-.1667*e," ").concat(-1.8667*e," ",0," ").concat(-1.8667*e,"C")+" ".concat(.02*e," ").concat(-1.8667*e," ").concat(.0333*e," ").concat(-1.8533*e," ").concat(.0333*e," ").concat(-1.8333*e,"S")+" ".concat(.02*e," ").concat(-1.8*e," ",0," ").concat(-1.8*e,"z")},"geo-pin-2":{outer:"".concat("M ").concat(.304*e," ").concat(-.6935*e,"C")+" ".concat(.304*e," ").concat(-.8607*e," ").concat(.1672*e," ").concat(-.9975*e," ",0," ").concat(-.9975*e,"S")+" ".concat(-.304*e," ").concat(-.8607*e," ").concat(-.304*e," ").concat(-.6935*e,"C")+" ".concat(-.304*e," ").concat(-.532*e," ").concat(-.1786*e," ").concat(-.4009*e," ").concat(-.019*e," ").concat(-.3914*e,"L")+" ".concat(-.019*e," ").concat(-.019*e,"C")+" ".concat(-.019*e," ").concat(-.0076*e," ").concat(-.0114*e," ",0," ",0," ",0,"S")+" ".concat(.019*e," ").concat(-.0076*e," ").concat(.019*e," ").concat(-.019*e,"L")+" ".concat(.019*e," ").concat(-.3914*e,"C")+" ".concat(.1786*e," ").concat(-.4009*e," ").concat(.304*e," ").concat(-.532*e," ").concat(.304*e," ").concat(-.6935*e,"z"),inner:"".concat("M ").concat(-.038*e," ").concat(-1.767*e,"C")+" ".concat(-.228*e," ").concat(-1.767*e," ").concat(-.38*e," ").concat(-1.615*e," ").concat(-.38*e," ").concat(-1.425*e,"C")+" ".concat(-.38*e," ").concat(-1.4022*e," ").concat(-.3648*e," ").concat(-1.387*e," ").concat(-.342*e," ").concat(-1.387*e,"S")+" ".concat(-.304*e," ").concat(-1.4022*e," ").concat(-.304*e," ").concat(-1.425*e,"C")+" ".concat(-.304*e," ").concat(-1.5732*e," ").concat(-.1862*e," ").concat(-1.691*e," ").concat(-.038*e," ").concat(-1.691*e,"C")+" ".concat(-.0152*e," ").concat(-1.691*e," ",0," ").concat(-1.7062*e," ",0," ").concat(-1.729*e,"S")+" ".concat(-.0152*e," ").concat(-1.767*e," ").concat(-.038*e," ").concat(-1.767*e,"z")},"geo-pin-3":{outer:"".concat("M ").concat(.9442*e," ").concat(-.5854*e,"L")+" ".concat(.5451*e," ").concat(-.9826*e,"C")+" ".concat(.5376*e," ").concat(-.9901*e," ").concat(.5264*e," ").concat(-.9901*e," ").concat(.5189*e," ").concat(-.9826*e,"L")+" ".concat(.4196*e," ").concat(-.8833*e,"C")+" ".concat(.4159*e," ").concat(-.8795*e," ").concat(.414*e," ").concat(-.8758*e," ").concat(.414*e," ").concat(-.8702*e,"S")+" ".concat(.4159*e," ").concat(-.8608*e," ").concat(.4196*e," ").concat(-.857*e,"L")+" ".concat(.4721*e," ").concat(-.8046*e,"L")+" ".concat(.2248*e," ").concat(-.5554*e,"L")+" ".concat(.1161*e," ").concat(-.5236*e,"C")+" ".concat(.1105*e," ").concat(-.5217*e," ").concat(.1049*e," ").concat(-.5161*e," ").concat(.103*e," ").concat(-.5105*e,"C")+" ".concat(.1012*e," ").concat(-.5049*e," ").concat(.103*e," ").concat(-.4974*e," ").concat(.1087*e," ").concat(-.4917*e,"L")+" ".concat(.2473*e," ").concat(-.3531*e,"L")+" ".concat(-.0244*e," ").concat(-.0815*e,"C")+" ".concat(-.0431*e," ").concat(-.0628*e," ").concat(-.0431*e," ").concat(-.0328*e," ").concat(-.0244*e," ").concat(-.0159*e,"C")+" ".concat(-.015*e," ").concat(-.0066*e," ").concat(-.0037*e," ").concat(-.0028*e," ").concat(.0094*e," ").concat(-.0028*e,"S")+" ".concat(.0337*e," ").concat(-.0084*e," ").concat(.0431*e," ").concat(-.0159*e,"L")+" ".concat(.3147*e," ").concat(-.2876*e,"L")+" ".concat(.4533*e," ").concat(-.1489*e,"C")+" ".concat(.4571*e," ").concat(-.1452*e," ").concat(.4608*e," ").concat(-.1433*e," ").concat(.4665*e," ").concat(-.1433*e,"L")+" ".concat(.4702*e," ").concat(-.1433*e,"C")+" ".concat(.4758*e," ").concat(-.1452*e," ").concat(.4814*e," ").concat(-.1489*e," ").concat(.4833*e," ").concat(-.1564*e,"L")+" ".concat(.5152*e," ").concat(-.2651*e,"L")+" ".concat(.7643*e," ").concat(-.5142*e,"L")+" ".concat(.8168*e," ").concat(-.4618*e,"C")+" ".concat(.8243*e," ").concat(-.4543*e," ").concat(.8355*e," ").concat(-.4543*e," ").concat(.843*e," ").concat(-.4618*e,"L")+" ".concat(.9423*e," ").concat(-.5611*e,"C")+" ".concat(.9498*e," ").concat(-.5667*e," ").concat(.9498*e," ").concat(-.5779*e," ").concat(.9442*e," ").concat(-.5854*e,"z"),inner:"".concat("M ").concat(.0336*e," ").concat(-.0747*e,"C")+" ".concat(.0299*e," ").concat(-.0709*e," ").concat(.0224*e," ").concat(-.0709*e," ").concat(.0187*e," ").concat(-.0709*e,"C")+" ".concat(.0149*e," ").concat(-.0709*e," ").concat(.0112*e," ").concat(-.0709*e," ").concat(.0037*e," ").concat(-.0747*e,"C")+" ".concat(-.0037*e," ").concat(-.0821*e," ").concat(-.0037*e," ").concat(-.0933*e," ").concat(.0037*e," ").concat(-.1008*e,"L")+" ".concat(.5451*e," ").concat(-.6421*e,"L")+" ".concat(.5712*e," ").concat(-.616*e,"L")+" ".concat(.0336*e," ").concat(-.0747*e,"z")+"M"+" ".concat(1.6539*e," ").concat(-.9856*e,"L")+" ".concat(1.5493*e," ").concat(-1.0901*e,"C")+" ".concat(1.5344*e," ").concat(-1.1051*e," ").concat(1.512*e," ").concat(-1.1051*e," ").concat(1.4971*e," ").concat(-1.0901*e,"L")+" ".concat(.9707*e," ").concat(-.5637*e,"C")+" ".concat(.9669*e," ").concat(-.56*e," ").concat(.9632*e," ").concat(-.5525*e," ").concat(.9595*e," ").concat(-.5488*e,"L")+" ".concat(.9109*e," ").concat(-.3845*e,"L")+" ".concat(.3136*e," ").concat(-.9819*e,"L")+" ".concat(.4555*e," ").concat(-1.0229*e,"L")+" ".concat(.6757*e," ").concat(-.8027*e,"C")+" ".concat(.6832*e," ").concat(-.7952*e," ").concat(.6944*e," ").concat(-.7915*e," ").concat(.7019*e," ").concat(-.7915*e,"S")+" ".concat(.7205*e," ").concat(-.7952*e," ").concat(.728*e," ").concat(-.8027*e,"C")+" ".concat(.7429*e," ").concat(-.8176*e," ").concat(.7429*e," ").concat(-.84*e," ").concat(.728*e," ").concat(-.8549*e,"L")+" ".concat(.5189*e," ").concat(-1.064*e,"L")+" ".concat(.9931*e," ").concat(-1.5381*e,"L")+" ".concat(1.176*e," ").concat(-1.3515*e,"C")+" ".concat(1.1835*e," ").concat(-1.344*e," ").concat(1.1947*e," ").concat(-1.3403*e," ").concat(1.2021*e," ").concat(-1.3403*e,"S")+" ".concat(1.2208*e," ").concat(-1.344*e," ").concat(1.2283*e," ").concat(-1.3515*e,"C")+" ".concat(1.2432*e," ").concat(-1.3664*e," ").concat(1.2432*e," ").concat(-1.3888*e," ").concat(1.2283*e," ").concat(-1.4037*e,"L")+" ".concat(1.0155*e," ").concat(-1.6165*e,"L")+" ".concat(.9147*e," ").concat(-1.7248*e,"L")+" ".concat(1.0603*e," ").concat(-1.8704*e,"L")+" ".concat(1.7995*e," ").concat(-1.1312*e,"L")+" ".concat(1.6539*e," ").concat(-.9856*e,"z")},"geo-flag-1":{outer:"".concat("M ").concat(.7417*e," ").concat(-.6333*e,"C")+" ".concat(.735*e," ").concat(-.6467*e," ").concat(.7283*e," ").concat(-.6567*e," ").concat(.7217*e," ").concat(-.67*e,"C")+" ".concat(.7183*e," ").concat(-.6767*e," ").concat(.7117*e," ").concat(-.6833*e," ").concat(.7083*e," ").concat(-.69*e,"C")+" ".concat(.695*e," ").concat(-.7133*e," ").concat(.6917*e," ").concat(-.7433*e," ").concat(.6983*e," ").concat(-.77*e,"C")+" ".concat(.705*e," ").concat(-.7933*e," ").concat(.7183*e," ").concat(-.8167*e," ").concat(.735*e," ").concat(-.84*e,"C")+" ".concat(.7383*e," ").concat(-.8467*e," ").concat(.7417*e," ").concat(-.85*e," ").concat(.745*e," ").concat(-.8567*e,"C")+" ".concat(.7583*e," ").concat(-.8767*e," ").concat(.755*e," ").concat(-.9033*e," ").concat(.7383*e," ").concat(-.92*e,"C")+" ".concat(.6617*e," ").concat(-1*e," ").concat(.5317*e," ").concat(-1.0233*e," ").concat(.4283*e," ").concat(-.9767*e,"C")+" ".concat(.3983*e," ").concat(-.9633*e," ").concat(.375*e," ").concat(-.9467*e," ").concat(.3483*e," ").concat(-.93*e,"C")+" ".concat(.3317*e," ").concat(-.9167*e," ").concat(.315*e," ").concat(-.9067*e," ").concat(.295*e," ").concat(-.8967*e,"C")+" ".concat(.215*e," ").concat(-.85*e," ").concat(.1083*e," ").concat(-.85*e," ").concat(.025*e," ").concat(-.8967*e,"L")+" ".concat(.025*e," ").concat(-.9667*e,"C")+" ".concat(.025*e," ").concat(-.9867*e," ").concat(.0117*e," ").concat(-1*e," ").concat(-.0083*e," ").concat(-1*e,"S")+" ".concat(-.0417*e," ").concat(-.9867*e," ").concat(-.0417*e," ").concat(-.9667*e,"L")+" ".concat(-.0417*e," ").concat(-.0333*e,"C")+" ".concat(-.0417*e," ").concat(-.0133*e," ").concat(-.0283*e," ",0," ").concat(-.0083*e," ",0,"S")+" ".concat(.025*e," ").concat(-.0133*e," ").concat(.025*e," ").concat(-.0333*e,"L")+" ".concat(.025*e," ").concat(-.4267*e,"C")+" ".concat(.0683*e," ").concat(-.41*e," ").concat(.115*e," ").concat(-.4*e," ").concat(.1617*e," ").concat(-.4*e,"C")+" ".concat(.2183*e," ").concat(-.4*e," ").concat(.2783*e," ").concat(-.4133*e," ").concat(.3283*e," ").concat(-.44*e,"C")+" ".concat(.3483*e," ").concat(-.45*e," ").concat(.3683*e," ").concat(-.4633*e," ").concat(.3883*e," ").concat(-.4767*e,"C")+" ".concat(.4117*e," ").concat(-.4933*e," ").concat(.435*e," ").concat(-.5067*e," ").concat(.4583*e," ").concat(-.52*e,"C")+" ".concat(.525*e," ").concat(-.55*e," ").concat(.615*e," ").concat(-.54*e," ").concat(.675*e," ").concat(-.49*e,"C")+" ".concat(.6917*e," ").concat(-.4767*e," ").concat(.7117*e," ").concat(-.4767*e," ").concat(.7283*e," ").concat(-.4833*e,"C")+" ".concat(.745*e," ").concat(-.4933*e," ").concat(.7583*e," ").concat(-.51*e," ").concat(.755*e," ").concat(-.53*e,"C")+" ".concat(.7583*e," ").concat(-.5667*e," ").concat(.755*e," ").concat(-.6*e," ").concat(.7417*e," ").concat(-.6333*e,"z"),inner:"".concat("M ").concat(.8633*e," ").concat(-1.1667*e,"C")+" ".concat(.8033*e," ").concat(-1.14*e," ").concat(.7567*e," ").concat(-1.1067*e," ").concat(.7033*e," ").concat(-1.0733*e,"C")+" ".concat(.67*e," ").concat(-1.0467*e," ").concat(.63*e," ").concat(-1.0267*e," ").concat(.5967*e," ").concat(-1.0067*e,"C")+" ".concat(.43*e," ").concat(-.9133*e," ").concat(.2167*e," ").concat(-.92*e," ").concat(.05*e," ").concat(-1.0067*e,"L")+" ".concat(.05*e," ").concat(-1.6467*e,"C")+" ".concat(.2433*e," ").concat(-1.5667*e," ").concat(.4767*e," ").concat(-1.5733*e," ").concat(.6633*e," ").concat(-1.6733*e,"C")+" ".concat(.7033*e," ").concat(-1.6933*e," ").concat(.7433*e," ").concat(-1.72*e," ").concat(.7833*e," ").concat(-1.7467*e,"C")+" ".concat(.83*e," ").concat(-1.78*e," ").concat(.8767*e," ").concat(-1.8067*e," ").concat(.9233*e," ").concat(-1.8333*e,"C")+" ".concat(1.07*e," ").concat(-1.9*e," ").concat(1.25*e," ").concat(-1.8667*e," ").concat(1.37*e," ").concat(-1.7667*e,"L")+" ".concat(1.3633*e," ").concat(-1.76*e,"C")+" ".concat(1.33*e," ").concat(-1.7067*e," ").concat(1.29*e," ").concat(-1.6533*e," ").concat(1.27*e," ").concat(-1.58*e,"C")+" ".concat(1.25*e," ").concat(-1.4933*e," ").concat(1.2567*e," ").concat(-1.4*e," ").concat(1.3033*e," ").concat(-1.32*e,"C")+" ".concat(1.31*e," ").concat(-1.3*e," ").concat(1.3233*e," ").concat(-1.2867*e," ").concat(1.3367*e," ").concat(-1.2667*e,"S")+" ".concat(1.3633*e," ").concat(-1.2267*e," ").concat(1.37*e," ").concat(-1.2133*e,"C")+" ".concat(1.3833*e," ").concat(-1.1867*e," ").concat(1.39*e," ").concat(-1.16*e," ").concat(1.39*e," ").concat(-1.1267*e,"C")+" ".concat(1.2233*e," ").concat(-1.22*e," ").concat(1.0233*e," ").concat(-1.24*e," ").concat(.8633*e," ").concat(-1.1667*e,"z")},"geo-flag-2":{outer:"".concat("M ").concat(.6456*e," ").concat(-.928*e,"L")+" ".concat(.0538*e," ").concat(-.928*e,"L")+" ".concat(.0538*e," ").concat(-.9818*e,"C")+" ".concat(.0538*e," ").concat(-.9926*e," ").concat(.0466*e," ").concat(-.9998*e," ").concat(.0359*e," ").concat(-.9998*e,"L")+" ".concat(-.0359*e," ").concat(-.9998*e,"C")+" ".concat(-.0466*e," ").concat(-.9998*e," ").concat(-.0538*e," ").concat(-.9926*e," ").concat(-.0538*e," ").concat(-.9818*e,"L")+" ".concat(-.0538*e," ").concat(-.0134*e,"C")+" ".concat(-.0538*e," ").concat(-.0027*e," ").concat(-.0466*e," ").concat(.0045*e," ").concat(-.0359*e," ").concat(.0045*e,"L")+" ".concat(.0359*e," ").concat(.0045*e,"C")+" ".concat(.0466*e," ").concat(.0045*e," ").concat(.0538*e," ").concat(-.0027*e," ").concat(.0538*e," ").concat(-.0134*e,"L")+" ".concat(.0538*e," ").concat(-.4438*e,"L")+" ".concat(.6456*e," ").concat(-.4438*e,"C")+" ".concat(.6564*e," ").concat(-.4438*e," ").concat(.6635*e," ").concat(-.451*e," ").concat(.6635*e," ").concat(-.4618*e,"L")+" ".concat(.6635*e," ").concat(-.9101*e,"C")+" ".concat(.6635*e," ").concat(-.9209*e," ").concat(.6564*e," ").concat(-.928*e," ").concat(.6456*e," ").concat(-.928*e,"z"),inner:"".concat("M ").concat(.0359*e," ").concat(-.0717*e,"L")+" ".concat(-.0359*e," ").concat(-.0717*e,"L")+" ".concat(-.0359*e," ").concat(-1.9368*e,"L")+" ".concat(.0359*e," ").concat(-1.9368*e,"L")+" ".concat(.0359*e," ").concat(-.0717*e,"z")+"M"+" ".concat(1.2553*e," ").concat(-.9684*e,"L")+" ".concat(.1076*e," ").concat(-.9684*e,"L")+" ".concat(.1076*e," ").concat(-1.7933*e,"L")+" ".concat(1.2553*e," ").concat(-1.7933*e,"L")+" ".concat(1.2553*e," ").concat(-.9684*e,"z")},"geo-flag-3":{inner:"".concat("M ").concat(.664*e," ").concat(-.5013*e,"L")+" ".concat(.664*e," ").concat(-.508*e,"C")+" ".concat(.664*e," ").concat(-.5113*e," ").concat(.6607*e," ").concat(-.5113*e," ").concat(.6607*e," ").concat(-.5146*e,"C")+" ".concat(.6607*e," ").concat(-.5146*e," ").concat(.6607*e," ").concat(-.5179*e," ").concat(.6574*e," ").concat(-.5179*e,"L")+" ".concat(.5412*e," ").concat(-.664*e,"L")+" ".concat(.6574*e," ").concat(-.8101*e,"S")+" ".concat(.6574*e," ").concat(-.8134*e," ").concat(.6607*e," ").concat(-.8134*e,"C")+" ".concat(.6607*e," ").concat(-.8167*e," ").concat(.664*e," ").concat(-.8167*e," ").concat(.664*e," ").concat(-.82*e,"L")+" ".concat(.664*e," ").concat(-.841*e,"C")+" ".concat(.664*e," ").concat(-.8433*e," ").concat(.664*e," ").concat(-.8433*e," ").concat(.6607*e," ").concat(-.8466*e,"C")+" ".concat(.6607*e," ").concat(-.8499*e," ").concat(.6574*e," ").concat(-.8499*e," ").concat(.6574*e," ").concat(-.8532*e,"S")+" ".concat(.654*e," ").concat(-.8566*e," ").concat(.654*e," ").concat(-.8599*e,"C")+" ".concat(.654*e," ").concat(-.8599*e," ").concat(.6507*e," ").concat(-.8599*e," ").concat(.6507*e," ").concat(-.8632*e,"C")+" ".concat(.6474*e," ").concat(-.8632*e," ").concat(.6474*e," ").concat(-.8665*e," ").concat(.6441*e," ").concat(-.8665*e,"L")+" ".concat(.3685*e," ").concat(-.8665*e,"L")+" ".concat(.3685*e," ").concat(-.8964*e,"C")+" ".concat(.3685*e," ").concat(-.9163*e," ").concat(.3552*e," ").concat(-.9296*e," ").concat(.3353*e," ").concat(-.9296*e,"L")+" ".concat(.0332*e," ").concat(-.9296*e,"L")+" ".concat(.0332*e," ").concat(-.9628*e,"C")+" ".concat(.0332*e," ").concat(-.9827*e," ").concat(.0199*e," ").concat(-.996*e," ",0," ").concat(-.996*e,"S")+" ".concat(-.0332*e," ").concat(-.9827*e," ").concat(-.0332*e," ").concat(-.9628*e,"L")+" ".concat(-.0332*e," ",0,"L")+" ".concat(.0332*e," ",0,"L")+" ".concat(.0332*e," ").concat(-.5312*e,"L")+" ".concat(.2988*e," ").concat(-.5312*e,"L")+" ".concat(.2988*e," ").concat(-.498*e,"C")+" ".concat(.2988*e," ").concat(-.4781*e," ").concat(.3121*e," ").concat(-.4648*e," ").concat(.332*e," ").concat(-.4648*e,"L")+" ".concat(.6308*e," ").concat(-.4648*e,"C")+" ".concat(.6341*e," ").concat(-.4648*e," ").concat(.6374*e," ").concat(-.4648*e," ").concat(.6441*e," ").concat(-.4681*e,"C")+" ".concat(.6441*e," ").concat(-.4681*e," ").concat(.6474*e," ").concat(-.4681*e," ").concat(.6474*e," ").concat(-.4714*e,"C")+" ".concat(.6474*e," ").concat(-.4714*e," ").concat(.6507*e," ").concat(-.4714*e," ").concat(.6507*e," ").concat(-.4748*e,"C")+" ".concat(.654*e," ").concat(-.4748*e," ").concat(.654*e," ").concat(-.4781*e," ").concat(.654*e," ").concat(-.4814*e,"C")+" ".concat(.654*e," ").concat(-.4814*e," ").concat(.6574*e," ").concat(-.4847*e," ").concat(.6574*e," ").concat(-.488*e,"S")+" ".concat(.6574*e," ").concat(-.4914*e," ").concat(.6607*e," ").concat(-.4947*e,"C")+" ".concat(.6607*e," ").concat(-.498*e," ").concat(.6607*e," ").concat(-.498*e," ").concat(.664*e," ").concat(-.5013*e,"C")+" ".concat(.6607*e," ").concat(-.5013*e," ").concat(.6607*e," ").concat(-.5013*e," ").concat(.6607*e," ").concat(-.5046*e,"C")+" ".concat(.664*e," ").concat(-.498*e," ").concat(.664*e," ").concat(-.5013*e," ").concat(.664*e," ").concat(-.5013*e,"z"),outer:"".concat("M ").concat(.664*e," ").concat(-.5013*e,"L")+" ".concat(.664*e," ").concat(-.508*e,"C")+" ".concat(.664*e," ").concat(-.5113*e," ").concat(.6607*e," ").concat(-.5113*e," ").concat(.6607*e," ").concat(-.5146*e,"C")+" ".concat(.6607*e," ").concat(-.5146*e," ").concat(.6607*e," ").concat(-.5179*e," ").concat(.6574*e," ").concat(-.5179*e,"L")+" ".concat(.5412*e," ").concat(-.664*e,"L")+" ".concat(.6574*e," ").concat(-.8101*e,"S")+" ".concat(.6574*e," ").concat(-.8134*e," ").concat(.6607*e," ").concat(-.8134*e,"C")+" ".concat(.6607*e," ").concat(-.8167*e," ").concat(.664*e," ").concat(-.8167*e," ").concat(.664*e," ").concat(-.82*e,"L")+" ".concat(.664*e," ").concat(-.841*e,"C")+" ".concat(.664*e," ").concat(-.8433*e," ").concat(.664*e," ").concat(-.8433*e," ").concat(.6607*e," ").concat(-.8466*e,"C")+" ".concat(.6607*e," ").concat(-.8499*e," ").concat(.6574*e," ").concat(-.8499*e," ").concat(.6574*e," ").concat(-.8532*e,"S")+" ".concat(.654*e," ").concat(-.8566*e," ").concat(.654*e," ").concat(-.8599*e,"C")+" ".concat(.654*e," ").concat(-.8599*e," ").concat(.6507*e," ").concat(-.8599*e," ").concat(.6507*e," ").concat(-.8632*e,"C")+" ".concat(.6474*e," ").concat(-.8632*e," ").concat(.6474*e," ").concat(-.8665*e," ").concat(.6441*e," ").concat(-.8665*e,"L")+" ".concat(.3685*e," ").concat(-.8665*e,"L")+" ".concat(.3685*e," ").concat(-.8964*e,"C")+" ".concat(.3685*e," ").concat(-.9163*e," ").concat(.3552*e," ").concat(-.9296*e," ").concat(.3353*e," ").concat(-.9296*e,"L")+" ".concat(.0332*e," ").concat(-.9296*e,"L")+" ".concat(.0332*e," ").concat(-.9628*e,"C")+" ".concat(.0332*e," ").concat(-.9827*e," ").concat(.0199*e," ").concat(-.996*e," ",0," ").concat(-.996*e,"S")+" ".concat(-.0332*e," ").concat(-.9827*e," ").concat(-.0332*e," ").concat(-.9628*e,"L")+" ".concat(-.0332*e," ",0,"L")+" ".concat(.0332*e," ",0,"L")+" ".concat(.0332*e," ").concat(-.5312*e,"L")+" ".concat(.2988*e," ").concat(-.5312*e,"L")+" ".concat(.2988*e," ").concat(-.498*e,"C")+" ".concat(.2988*e," ").concat(-.4781*e," ").concat(.3121*e," ").concat(-.4648*e," ").concat(.332*e," ").concat(-.4648*e,"L")+" ".concat(.6308*e," ").concat(-.4648*e,"C")+" ".concat(.6341*e," ").concat(-.4648*e," ").concat(.6374*e," ").concat(-.4648*e," ").concat(.6441*e," ").concat(-.4681*e,"C")+" ".concat(.6441*e," ").concat(-.4681*e," ").concat(.6474*e," ").concat(-.4681*e," ").concat(.6474*e," ").concat(-.4714*e,"C")+" ".concat(.6474*e," ").concat(-.4714*e," ").concat(.6507*e," ").concat(-.4714*e," ").concat(.6507*e," ").concat(-.4748*e,"C")+" ".concat(.654*e," ").concat(-.4748*e," ").concat(.654*e," ").concat(-.4781*e," ").concat(.654*e," ").concat(-.4814*e,"C")+" ".concat(.654*e," ").concat(-.4814*e," ").concat(.6574*e," ").concat(-.4847*e," ").concat(.6574*e," ").concat(-.488*e,"S")+" ".concat(.6574*e," ").concat(-.4914*e," ").concat(.6607*e," ").concat(-.4947*e,"C")+" ".concat(.6607*e," ").concat(-.498*e," ").concat(.6607*e," ").concat(-.498*e," ").concat(.664*e," ").concat(-.5013*e,"C")+" ".concat(.6607*e," ").concat(-.5013*e," ").concat(.6607*e," ").concat(-.5013*e," ").concat(.6607*e," ").concat(-.5046*e,"C")+" ".concat(.664*e," ").concat(-.498*e," ").concat(.664*e," ").concat(-.5013*e," ").concat(.664*e," ").concat(-.5013*e,"z")},"geo-location-3":{outer:"".concat("M ").concat(-.3654*e," ").concat(-.928*e,"L")+" ".concat(-.3654*e," ").concat(-.3712*e,"C")+" ".concat(-.319*e," ").concat(-.1392*e," ").concat(-.1334*e," ").concat(-.0928*e," ").concat(.0058*e," ",0,"C")+" ".concat(.145*e," ").concat(-.0928*e," ").concat(.3306*e," ").concat(-.1392*e," ").concat(.377*e," ").concat(-.3712*e,"L")+" ".concat(.377*e," ").concat(-.928*e,"C")+" ".concat(.0522*e," ").concat(-1.0208*e," ").concat(-.0406*e," ").concat(-1.0208*e," ").concat(-.3654*e," ").concat(-.928*e,"Z"),inner:"".concat("M ").concat(-.5452*e," ").concat(-1.392*e,"L")+" ".concat(-.174*e," ").concat(-1.392*e,"L")+" ".concat(.0116*e," ").concat(-1.7632*e,"L")+" ".concat(.1972*e," ").concat(-1.392*e,"L")+" ".concat(.5684*e," ").concat(-1.392*e,"L")+" ".concat(.29*e," ").concat(-1.1136*e,"L")+" ".concat(.4756*e," ").concat(-.6496*e,"L")+" ".concat(.0116*e," ").concat(-.928*e,"L")+" ".concat(-.4524*e," ").concat(-.6496*e,"L")+" ".concat(-.2668*e," ").concat(-1.1136*e)}}[t][n]}));var Jc={};function tu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"style",a=arguments.length>3?arguments[3]:void 0;Jc[t]={cssName:e,attrType:n,value:a}}tu("fill","fill"),tu("fillColor","fill"),tu("fillOpacity","fill-opacity"),tu("stroke","stroke"),tu("strokeColor","stroke"),tu("strokeOpacity","stroke-opacity"),tu("strokeWidth","stroke-width"),tu("dashStyle","stroke-dasharray"),tu("lineCap","stroke-linecap"),tu("fontColor",{svg:"fill",html:"color"}),tu("fontSize","font-size",void 0,(function(t){return"".concat(t,"px")})),tu("fontFamily","font-family"),tu("fontStyle","font-style"),tu("fontWeight","font-weight"),tu("text","text","text"),tu("html","html","html"),tu("anchor","text-anchor","attr"),tu("backgroundColor","background-color"),tu("background","background"),tu("backgroundSize","background-size"),tu("border","border"),tu("borderRadius","border-radius"),tu("boxShadow","box-shadow"),tu("width","width"),tu("height","height"),tu("opacity","opacity");var eu=["pattern","gradient","image"];function nu(t){if(!sa(t))return t;var e={},n=this;return Oa(t,(function(t,a){var r;if(t&&t._type){var o=qa(eu,t._type)&&nu(_objectSpread(_objectSpread({},t),{},{_type:null}));r=ws.get(t._type).call(n,t,o)}else r=ua(t)?t.map((function(t){return nu(t)})):t;e[a]=r})),e}wn.setComponent("markUtils.convertOperatorToProperty",nu);var au={x:0,y:0,width:0,height:0,angle:0,radius:0,size:0,points:[],fillColor:hn,strokeColor:hn};function ru(t,e,n,a){var r=ua(a)?a[0]:a,o=zn(ua(a)?a.reduce((function(t,e){return t||n[e]}),null):n[r],e,t);return t.zc_cache=t.zc_cache||{},(na(o)||o===pn)&&(t.zc_cache[r]=o),wa(o,t.zc_cache[r],zn(au[r],e,t))}function ou(t){return null!=t}function iu(t){t.isD3Selection&&(t=t.node());var e=t.transform.baseVal.consolidate(),n=ou(e)?e.matrix:null;if(ou(n)){var a,r,o,i=n.a,l=n.b,s=n.c,c=n.d,u=n.e,d=n.f;return(a=Math.sqrt(i*i+l*l))&&(i/=a,l/=a),(o=i*s+l*c)&&(s-=i*o,c-=l*o),(r=Math.sqrt(s*s+c*c))&&(s/=r,c/=r,o/=r),i*c<l*s&&(i=-i,l=-l,o=-o,a=-a),{translate:[u,d],skew:[180*Math.atan2(l,i)/Math.PI,180*Math.atan(o)/Math.PI],rotate:180*Math.atan2(l,i)/Math.PI,scale:[a,r]}}return{translate:[0,0],skew:[0,0],rotate:0,scale:[0,0]}}function lu(t,e){return"translate(".concat(t.join(" "),")")+(ou(e)?" rotate(".concat(e,")"):"")}function su(t){var e,n,a,r,o=t.systemConf.legend,i=us.isContinousLegend(t),l=t.legendarea.element.node(),s=na(o.x)&&na(o.y),c=fs(o),u="vertical"===c.layout,d=!u,h=0,f=0,p=c.hAlign,g=c.vAlign;if(i){var v=Bn(l);e=v.width,n=v.height,a=v.x,r=v.y}else e=l.offsetWidth,n=l.offsetHeight,a=l.offsetLeft,r=l.offsetTop;var m=function(){f=n+o.marginTop+o.marginBottom,t.chartarea.height-=f,t.plotarea.height-=f,"top"===o.vAlign&&(t.chartarea.top+=f,t.plotarea.top+=f),t.legendarea.adjust="x"},y=function(){h=e+o.marginLeft+o.marginRight,t.chartarea.width-=h,t.plotarea.width-=h,"left"===o.hAlign&&(h=e+o.marginLeft+o.marginRight,t.chartarea.left+=h,t.plotarea.left+=h),t.legendarea.adjust="y"};s||(d?"top"===g||"bottom"===g?m():"center"===g&&y():u&&("left"===p||"right"===p?y():"center"===p&&m())),t.legendarea.x=a,t.legendarea.y=r,t.legendarea.width=e,t.legendarea.height=n}function cu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.width-t.marginLeft-t.marginRight,r=e.height-t.marginTop-t.marginBottom,o=hs(t),i=Xa(n.maxWidth||t.maxWidth||o.width,a),l=Xa(n.maxHeight||t.maxHeight||o.height,r);return{maxWidth:i,maxHeight:l}}function uu(t,e,n){return{w:t=t||n.maxWidth,h:e=e||n.maxHeight}}wn.setComponent("domUtils.getSvgTransform",iu);var du=function(){};(du.colorpallete=L()).set("greenish",["#6c6c6d","#1ba98e","#00ff80","#00ffc0","#00ffff","#40ff00","#40ff40","#40ff80","#40ffc0","#40ffff","#80ff00","#80ff40","#80ff80","#80ffc0","#80ffff"]),du.colorpallete.set("pinkish",["#ff00ff","#ff00c0","#ff0080","#ff0040","#ff0000","#c000ff","#c000c0","#c00080","#c00040","#c00000","#8000ff","#8000c0","#800080","#800040","#800000"]),du.colorpallete.set("countries",["#00c6e4","#faa43a","#5da5da","#60bd68","#f17cb0","#b2912f","#307d99"]),du.colorpallete.set("saturate5",["#594f4f","#547980","#45ada8","#97843a","#518058","#975156"]),du.colorpallete.set("ocean5",["#ff7f00","#6a4a3c","#cc333f","#eb6841","#edc951","#975156"]),du.colorpallete.set("zoho-reports-old",["#FF465B","#04C36B","#3A92E9","#FDC33A","#D65587","#FC7C63","#51A5A9","#BFBFBF","#91CD6A","#BE9B89","#7D8DB0","#B68E2E","#C6D5B0","#D1ACCE","#E0AE60","#5CD29F","#716398","#AD8686","#FF99A8","#A0C0C0","#2D7094","#553D4E","#B2449D","#FED577","#D3D159","#AAAAAA","#7ED9D9","#F7A26D","#8ABFA2","#767676","#E36068","#A3AFC7"]),du.colorpallete.set("zoho-reports-new",["#60bfdf","#ffa060","#aadf80","#ff6c7d","#c9ac66","#bf80bf","#df6060","#606060","#60a0df","#ff99a8","#feff60","#a0dfdf","#dfa080","#dfdfdf","#a0a060","#a080bf","#a06060","#5cd29f","#ffbe60","#bfa080","#f28fb5","#8080bf","#bfbfbf","#dfdf80","#80a060","#80a060","#a08060","#7ed9d9","#be9b89","#bf6060","#a0bf60","#fc7c63"]),du.colorpallete.set("colors",["#0eaadd","#1ac9bb","#92c658","#dbbe56","#ee7d54","#ef4f6a","#b952ef"]),du.colorpallete.set("flat-ui-colors",["#23a96e","#bca634","#f75a51","#39b6c5","#f9ce8d","#983a67","#634c3f","#d7dab9","#357180","#983a67","#b16b76","#7f90a0"]),du.colorpallete.set("MEMobile",["#73c2f4","#ecd543","#e6be3f","#da7b36","#c84b37","#9c240f","#9bcedd","#ffe560","#ffe560","#c67c99","#c6db4c"]),du.colorpallete.set("Toddler",["#f8d0db","#9be1ed","#c4ead1","#fbe2aa","#e5e5e5","#d6b65f","#be9fbf","#ffe560","#ffe560","#c67c99","#c6db4c"]),du.colorpallete.set("BrightNDull",["#47bac1","#8ccace","#72c3f5","#71bfee","#ac66ad","#c5a0c6","#906aa6","#b29dbf","#fd9f94","#f6cac4","#ff759c","#f6acc1"]),du.colorpallete.set("BlueShades",["#00c6e4","#6ad4e4","#a3dbe4","#c3e0e4","#e4e4e4","#c8c8c8","#aac4c8"]),du.colorpallete.set("graphite6",["#595959","#767676","#373737","#9d9d9d","#bfbfbf","#222222"]),du.colorpallete.set("chalk",["#FFFFFF","#FAFAFA","#CCCCCC"]),du.colorpallete.set("map",["#FB0D0D","#53B808","#B80894","#2ADBDD"]),du.patternPallete=L(),(du.imagePallete=L()).set("linesndots",["01.png","02.png","03.png","04.png","05.png","06.png","07.png","08.png","09.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),du.imagePallete.set("dotsfirst",["13.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),du.imagePallete.set("stones",["01.jpg","02.jpg","03.jpg"]),jr("hatch","diagonal-line-right","5","1","null","white","1","1"),jr("hatchDash","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,3"),jr("thinThickHatch","square,diagonal-line-right,diagonal-line-right","10,10,10","1,1,3","transparent,null,null",hn,"1","1","0,2.5,0"),jr("thinThickHatchLeft","square,diagonal-line-left,diagonal-line-left","10,10,10","1,1,3","transparent,null,null",hn,"1","1","[0,[2.5,-2.5],0]"),jr("thickHatch","diagonal-line-right","5","3","null","white","1","1"),jr("thinHatch","diagonal-line-right","2","1","null","white","1","1"),jr("hatchLeft","diagonal-line-left","5","1","null","white","1","1"),jr("horizontalStripes","horizontal-line","5","1","null","white","1","1"),jr("thinHorizontalStripes","horizontal-line","2","1","null","white","1","1"),jr("verticalStripes","vertical-line","5","1","null","white","1","1"),jr("thinVerticalStripes","vertical-line","2","1","null","white","1","1"),jr("crossStripes","vertical-line,horizontal-line","5","1","null","white","1","1"),jr("tinyHatchfill","square,diagonal-line-right","5","1","transparent,{{brighter}}","null,transparent","1","1"),jr("hatchfill","square,diagonal-line-right","10","1","transparent,{{brighter}}","null,transparent","1","1"),jr("grayscale","square","1","1","#D3D3D3","#D3D3D3","1","1"),jr("hatchLeftfill","square,diagonal-line-left","10","1","transparent,{{brighter}}","null,transparent","1","1"),jr("hatchDashfill","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","null,transparent","1","1","0,3"),jr("tinyHatchLeftfill","square,diagonal-line-left","5","1","transparent,{{brighter}}","null,transparent","1","1"),jr("horizontalStripesfill","square,horizontal-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),jr("verticalStripesfill","square,vertical-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),jr("crossStripesfill","square,square","5,5","1","transparent,{{brighter}}","null,transparent","1","1"),jr("checkerBoard","square,square,square","10,5,5","1",hn,"transparent,null,{{brighter}}","1","1","0,0,5"),jr("circle","circle","10","1","null","white","1","1"),jr("tinyCircle","circle","5","1","null","white","1","1"),jr("crossCircle","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}",hn,"1","1","0,0,5"),jr("floatingCircle","square,circle","10,5","1","transparent,{{brighter}}",hn,"1","1","0,2.5"),jr("dot","square,circle","5,2.5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,1.25"),jr("dotSquare","square,circle","10,2.5","1","null,{{brighter}}","transparent,transparent","1","1","0,3.75"),jr("circlefill","square,circle","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),jr("crossCirclefill","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}","null,{{brighter}},null","1","1","0,0,5"),jr("floatingCirclefill","square,circle","10,5","1","transparent,{{brighter}}","null,transparent","1","1","0,2.5"),jr("dotfill","square,circle","5,2.5","1","transparent,{{brighter}}","null,transparent","1","1","0,1.25"),jr("square","square","5","1","null","white","1","1"),jr("squarefill","square","5","1","{{brighter}}","null","1","1"),jr("star","star","10","1","null","white","1","1"),jr("starfill","square,star","10,5","1","transparent,{{brighter}}","null,transparent","1","1"),jr("wave","waves","5","1","null","white","1","1"),jr("wavefill","square,waves","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),jr("cap","caps","5","1","null","white","1","1"),jr("capfill","square,caps","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),jr("nylon","nylon","5","1","null","white","1","1"),jr("nylonfill","square,nylon","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),du.patternPallete.set("stripes-fill",["hatchfill","hatchDashfill","checkerBoard","horizontalStripesfill","verticalStripesfill","crossStripesfill"]),du.patternPallete.set("stripes",["hatch","thinThickHatch","hatchLeft","hatchDash","horizontalStripes","crossStripes","verticalStripes","thickHatch","thinHatch","thinVerticalStripes","thinHorizontalStripes"]),du.patternPallete.set("dotted",["circle","tinyCircle","crossCircle","floatingCircle","dot"]),du.patternPallete.set("dotted-fill",["circlefill","crossCirclefill","floatingCirclefill","dotfill"]),du.patternPallete.set("shapes",["thinThickHatch","crossCircle","star","wave","cap","nylon"]),du.patternPallete.set("shapes-fill",["checkerBoard","floatingCirclefill","squarefill","starfill","wavefill","capfill","nylonfill"]);function hu(t,e,n,a,r){var o=e.legend.isSingleLayout;a=a||e.legendarea.element,r=r||e.systemConf.legend;var i=a.node(),l=fs(r),s=0,c=0,u=function(t){return!1===n?0:+r[t]},d=_c(i),h=d?Bn(i):i.getBoundingClientRect(),f=h.width,p=h.height,g=l.floating,v=e.canvasarea,m=cu(r,e.chartarea),y=m.maxWidth,b=m.maxHeight;if(d||(h.x=0,h.y=0),g)return s=r.x-h.x,c=r.y-h.y,[s=Xe(v.width-Xe(h.width,y),s),c=Xe(v.height-Xe(h.height,b),c)];switch(l.hAlign){case"left":s=t.left+u("marginLeft")-h.x;break;case"center":s=t.width/2-f/2-h.x;break;case"right":s=(d||!o?t.left:0)+t.width-f-u("marginRight")-h.x}switch(l.vAlign){case"top":c=t.top+u("marginTop")-h.y;break;case"center":c=t.top+t.height/2-p/2-(o?0:h.y);break;case"bottom":c=t.top+t.height-p-u("marginBottom")-h.y}return[s,c,f,p]}function fu(t,e,n,a){var r=n.showAs,o=0,i=e;if((a.isAxisCategory||a.isNonAxisMultiSeriesCategory||a.isGeoMap)&&(o=e,i=0),r)return r=$n(r,t,e,a),a.dataset.getCustomizedVal(a,r,o,0,i,t,"legend")}du.imagePallete.each((function(t,e){var n=t.map((function(t,e){return _n+t}));du.imagePallete.set(e,n)})),du.getMonochromeColorPallette=function(t){var e=[0,+t.count-1],n=[+t.colorGamma[0],+t.colorGamma[1]],a=Fn(t.baseColor,e,n);return tt(t.count).map((function(t,e){return a(e)}))};var pu=function(t,e){var n="normal",a=e&&e["font-style"]||t["font-style"]||n,r=e&&e["font-weight"]||t["font-weight"]||n,o=e&&e["font-size"]||t["font-size"],i=e&&e["font-family"]||t["font-family"];return"".concat(a," ").concat(n," ").concat(r," ").concat(o," ").concat(i)};function gu(t){var e=s("div.__baseZC_Container__ > svg.svgPattern");e.node()||(e=wc("svg",".__zc_fakeBody",[1],s("body")));var n=wc("text","#zc-text-dummy",[1],e);n.html("qtyplkjhgfd"),vc(n,t);var a=Bn(n).height;return n.remove(),a}function vu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3,o=a.layout===no,i=t.show,l=t.keepAligned,s=[0,0];return i&&(o&&l?s[0]+=.2*e+2*r:s[1]+=gu([t,n,wr])+2*r),s}wn.setComponent("expandable.adjust",vu);var mu=function(t,e,n,a,r,o,i,l){var s=t.systemConf,c=s.legend,u=r[0],d=c.showAs,h=t.dataset.getColumnIdx(t.isAxisCategory||t.isGeoMap||t.isNonAxisMultiSeriesCategory||Bi.isQuantileColorScale(t)||Ys(t)?"clr":"x"),f="horizontal"===o.layout,p="number"==typeof c.itemWidth,g={getLegendItemText:function(e,n){if(Bi.isQuantileColorScale(t)){var a=c.colorBand.labels;if(a&&a.length)return Wn(a[n])}var r=t.dataObject.isFlowChartCategory?t.dataset.getColumnIdx(e._format||"x",0):h,o=t.isAxisCategory||t.isNonAxisMultiSeriesCategory||t.isGeoMap||Ys(t)?n:0,i=fu(e,n,c,t),l=e.node||e;return d?i:t.dataset.getDataPointValue(t,l,r,o,null,"legend")},getItemDimension:function(t){var e=v([t]),n=e.ul,a=e.li,r=e.span,o={label:{width:r.node().offsetWidth,height:r.node().offsetHeight},item:{width:a.node().offsetWidth,height:a.node().offsetHeight}};return n.remove(),o},getMaxItemWidth:function(){var t,e=v([n[0]]),a=e.span,r=e.li,o=null;return p?c.itemWidth:("auto"===c.itemWidth&&n.forEach((function(e,n){e.hideInLegend||(a.html((function(){return g.getLegendItemText(e,n)})),(t=Ga(r).width)>o&&(o=t))})),e.li.remove(),o)},getRowsCount:function(t,e){return e/t-(Ye(e/t)||1)>.9?Ve(e/t)||1:Ye(e/t)||1},getVisibleItemRenderCount:function(t,e,r,o,i){var l=0;if(f){var s=!1;if(p){var u=c.itemWidth+2*+c.itemMargin;l=Ye(r/u)*e}else{for(var d,h=!1,g=null,m=-1;!s;){l++;var y=n.slice(0,l),b=(d=v(y,r,o)).li.last().node().offsetTop;g!==b&&(g=b,m++),h=m>e-1,s=a===l||h}h&&(l-=1),d.ul.remove()}}else l=e;return l}},v=function(e,n,a){var r=wc("ul",".tempUl",[1],t.d3container).styles({"max-width":na(n)?"".concat(n,"px"):null,"max-height":na(a)?"".concat(a,"px"):null,position:"absolute",top:0,left:0,padding:0}),o=wc("li",".tempItem",e,r).styles({display:f?"inline-block":"block","line-height":i,"white-space":"nowrap",padding:"".concat(c.itemMargin,"px"),width:p?"".concat(c.itemWidth,"px"):null,height:na(c.itemHeight)?"".concat(c.itemHeight,"px"):null,"padding-left":"".concat(u+c.itemMargin,"px")}),d=wc("span",".tempLabel",(function(t){return[t]}),o).style("padding-left","".concat(c.textPadding,"px")).style("display",s.legend.showAs?"block":null);if(s.legend.showAs){var h={display:wa(s.legend.showAsDisplay,"inline-block"),overflow:"hidden"};Ar.PHANTOMJS||(h["vertical-align"]="top"),d.styles(h)}return o.select("span.tempLabel").html((function(t,e){return g.getLegendItemText(t,e)})),vc(o,[l,c,s.canvas,wr],!0),{ul:r,li:o,span:d}};return g},yu="width",bu="height",xu=function(){function t(e,n){_classCallCheck(this,t);var a=n.area,r=n.order,o=n.getPosition,i=n.callbackArgs,l=void 0===i?[]:i;l=Ma(l),this.units=e.slice(0),this.area=a,this.getPosition=o,this.order=r,this.callbackArgs=l,this.areaToBeUpdated=[a]}return _createClass(t,[{key:"create",value:function(){var t=this,e=this,n=this.units;if(this.elementBound={},this.HEIGHT=function(e){return t.elementBound[e].height},this.WIDTH=function(e){return t.elementBound[e].width},n.length){this.findBound(n),this.prepare();var a=this.items;n=this.units,a.forEach((function(t,a){var r=t.unit;!r.enabled||fs(Au(r)).floating||e.canFit(t)||(e.redraw(t,a),e.findBound(n[a]))})),this.position(n)}}},{key:"findBound",value:function(t){var e=this.elementBound;(t=Ma(t)).forEach((function(t){var n=t.element.node(),a=Au(t),r=a.marginLeft,o=a.marginTop,i=a.marginRight,l=a.marginBottom,s=_c(n)?Bn(n):n.getBoundingClientRect();e[t.id]={width:s.width+r+i,height:s.height+o+l}}))}},{key:"prepare",value:function(){var t=this.HEIGHT,e=this.WIDTH,n=this.units=this.getUnitOrder();this.items=n.map((function(t){return{id:t.id,unit:t}})),function(t,e,n,a,r){var o,i=[],l=function(o){var l=i.map((function(e){return Fa(t,(function(t){return t.id===e}))})),s=i.map((function(t){return Fa(e,(function(e){return e.id===t}))}));!function(t,e,n,a,r,o){var i=function(e){return function(r){var i=e===bu?a:n,l=i(r),s=t.map((function(t){return t.id})).filter((function(t){return t!==r})),c=A(s,(function(t){return i(t)})),u=o[e],d=u/(s.length+1);return l<=d?l:c<d?u-c:d}},l=function(t){return n(t)},s=function(t){return a(t)};r===$r||r===Qr?s=i(bu):l=i(yu);e.forEach((function(e,n){var a=Au(t[n]),r=Tu(a,"width",o),i=Tu(a,"height",o);e.width=r||l,e.height=i||s,e.strict=!(!r&&!i)}))}(l,s,n,a,o,r),i=[]};t.forEach((function(t){var e=t.enabled,n=t.id,a=Au(t);if(e){var r=ku(a);r&&(o&&o!==r&&l(o),i.push(n),o=r)}})),o&&l(o)}(n,this.items,e,t,this.area)}},{key:"canFit",value:function(t){var e=this.callbackArgs,n=this.HEIGHT,a=this.WIDTH,r=t.id,o=t.width.apply(t,[r].concat(_toConsumableArray(e))),i=t.height.apply(t,[r].concat(_toConsumableArray(e))),l=[];return a(r)>o&&(l[0]=o),n(r)>i&&(l[1]=i),t.update=l,!l.length}},{key:"redraw",value:function(t,e){var n,a,r=this.units,o=Au(r[e]),i=o.marginLeft,l=o.marginTop,s=o.marginRight,c=o.marginBottom,u=t.update;u[0]&&(n=u[0]-i-s),u[1]&&(a=u[1]-l-c),r[e].component.resize(n,a)}},{key:"position",value:function(e){var n,a=this,r=a.items,o=a.elementBound,i=a.getPosition,l=a.area,s=Hn(l),c=[],u=[],d=function(e){var n,o,d=Hn(s),h=function(t,e,n,a,r){var o=[],i=0,l=0,s=t.some((function(t){return Fa(r,(function(e){return e.id===t.id})).strict}));if(!s)return[tt(t.length)];return t.forEach((function(t,r){(l+=e[r][a])-n[a]>1&&(l=0,i++),o[i]=o[i]||[],o[i].push(r)})),o}(c,u,l,e===$r||e===Qr?bu:yu,r),f=[],p=[];h.forEach((function(a){n=function(t,e,n){if(t===Qr||t===Kr){var a=_u(t),r=wu(t,e),o=t===Qr?$r:Jr;return Cu(o,n[a]-r,n),_defineProperty({},t===Qr?"hAlign":"vAlign",o)}return{}}(e,u.filter((function(t,e){return a.indexOf(e)>-1})),d);var r=Hn(d);a.forEach((function(a){var l=c[a],s=Au(l),d=l.element,h=fs(s),p=h.hAlign,g=h.vAlign,v=_objectSpread(_objectSpread({},s),n);p!==qr&&g!==qr||(o||(o=function(t,e,n){var a,r,o;t===$r||t===Qr?(a="vAlign",r=Jr,o=bu):(a="hAlign",r=$r,o=yu);var i=A(e,(function(t){return t[o]}));return n[r]+=(n[o]-i)/2,n[o]-=i,_defineProperty({},a,r)}(e,u.slice(a,u.length),r)),e===$r||e===Qr?g=v.vAlign=o.vAlign:p=v.hAlign=o.hAlign);var m=i(d,v,r),y=e===$r||e===Qr?bu:yu;Cu(e===$r||e===Qr?g:p,u[a][y],r),t.positionElement(d,m[0],m[1]),f.push(u[a])}));var l=wu(e,f);Cu(e,l,d),p.push(l),f=[]}));var g=A(p);Cu(e,g,s),a.updateArea(e,g),c=[],u=[]};e.forEach((function(e){var a=e.enabled,r=e.id,s=e.element,h=Au(e);if(a){var f=ku(h);if(f){n&&n!==f&&d(n);var p=o[r];c.push(e),u.push(p),n=f}else{var g=i(s,h,l);t.positionElement(s,g[0],g[1])}}})),n&&d(n)}},{key:"updateArea",value:function(t,e){Cu(t,e,this.areaToBeUpdated)}},{key:"getUnitOrder",value:function(){var t,e=this.units,n=this.elementBound,a=this.order,r=this.callbackArgs;return t=a?ua(a)?a:$n.apply(void 0,[a,e,n].concat(_toConsumableArray(r))):function(t,e){var n=[],a=[],r=[],o={left:[],right:[],top:[],bottom:[]},i={left:0,right:0,top:0,bottom:0};return t.forEach((function(t){var n=t.enabled,l=t.id,s=Au(t);if(n){var c=ku(s);if(c){var u=e[l][c===$r||c===Qr?bu:yu];o[c].push(l),i[c]+=u}else r.push(l)}else a.push(l)})),lr(i).sort((function(t,e){return H(t[1],e[1])})).forEach((function(e){var a=e[0],r=o[a].sort((function(e,n){var r=Ou(t,a,e),o=Ou(t,a,n);return H(r,o)}));n.push.apply(n,_toConsumableArray(r))})),n.push.apply(n,r),n.push.apply(n,a),n}(e,n),t.map((function(t){return Fa(e,(function(e){return e.id===t}))}))}}]),t}();function Cu(t,e,n){var a=_u(t);(n=Ma(n)).forEach((function(n){n[t]+=e,n[a]-=e}))}function ku(t){var e=fs(t),n=e.vAlign,a=e.hAlign,r=e.floating,o=e.layout;if(!r)if(o===no){if(n===Jr||n===Kr)return n;if(n===qr)return a}else{if(a===$r||a===Qr)return a;if(a===qr)return n}}function wu(t,e){var n=_u(t);return u(e.map((function(t){return t[n]})))}function _u(t){return t===$r||t===Qr?yu:bu}xu.positionElement=function(t,e,n){_c(t)?t.attr("transform","translate(".concat(e,",").concat(n,")")):t.styles({left:"".concat(e,"px"),top:"".concat(n,"px")})};var Su={top:2,bottom:1,left:2,right:1,center:0};function Ou(t,e,n){var a=Fa(t,(function(t){return t.id===n})),r=fs(Au(a)),o=r.hAlign,i=r.vAlign;return Su[e===$r||e===Qr?i:o]}function Au(t){return t.config||t.meta.config}function Tu(t,e,n){var a,r=t[e];return r&&(hr(a=fa(window,r))||(a=function(){return Xa(r,n[e])})),a}function Pu(t){var e=t;if(e.isD3Selection&&(e=e.node()),Ar.FIREFOX&&(e.ownerSVGElement||e instanceof SVGElement)||i.event.customListenedEvent){for(var n,a=e.ownerSVGElement||e,r=i.event,o=a.getBoundingClientRect();n=r.sourceEvent;)r=n;r.changedTouches&&(r=r.changedTouches[0]);var l=function(t){t.isD3Selection&&(t=t.node());for(var e=t.ownerSVGElement||t,n=[0,0];t!==e;){var a=iu(t).translate;n[0]+=a[0],n[1]+=a[1],t=t.parentNode}return n}(e),s=_slicedToArray(l,2),c=s[0],u=s[1];return[c=r.clientX-o.left-e.clientLeft-c,u=r.clientY-o.top-e.clientTop-u]}return i.mouse.apply(this,[e])}var Eu=["tap","taphold","dbltap","tapholdend","touchmove","touchend","singletouchmove","doubletouchmove"];function Lu(t,e){var n=Pu(t);return null==e.touches||Ar.ANDROID||!Ar.uiwebview||Ar.WKWebView||(n[0]+=window.pageXOffset,n[1]+=window.pageYOffset),n}function Mu(t,e){var n=e.x,a=e.y,r=e.rotation;return na(r)?vl.rotatePoint(t,r,{x:n,y:a}):t}function Du(t,e,n,a,r){var o=e&&e[a]||r;na(o)&&$n(o,jt(),t)}function Iu(t,e,n,a,r){r=(a=a||{}).namespace||r,Ar.isMouseDevice&&!Ja(e)&&function(t,e,n){if(null==t.node())return;e=".".concat(e);var a={};for(var r in n)a[r+e]=n[r],t.on(r+e,a[r+e]);n=a,t.on(n)}(t,r,e),Ar.isTouchDevice&&!Ja(n)&&function(t,e,n,a){if(null==t.node())return;var r=a.touchleave,o=a.target,i=a.chartObj,s=i&&i.systemConf.chart.plot.events||{},c=!1!==a.preventDefault,u=!("plot"===o&&0==s.isFocusedTouchmove);e=null!=e?".".concat(e):"";var d,h,f,p,g,v=30,m=150,y=100,b=50,x=500,C={},k=0,w=0,_=500-m,S=null,O=!1,A=(n.touchmove,n.touchend),T=n.tap,P=n.dbltap,E=n.singletouchmove,L=n.doubletouchmove;"plot"===o&&bl(null,i.systemConf.chart.plot.plotoptions[i.chartTypes[0].name],i,"taphold")?(p=n.tap,g=A):(p=n.taphold,g=n.tapholdend);var M="touchstart".concat(e),D="touchmove".concat(e),I="touchend".concat(e),R={};R[M]=function(){if(0!=s.enabled&&(!(jt().touches.length>1)&&(C.time=new Date,C.location=Lu(this,jt()),S=null,O=!1,h=!1,p))){var t=jt(),e=arguments,n=this;f=setTimeout((function(){jt(t),i&&(i.zcEventType="taphold"),p.apply(n,e),h=!0}),x)}},R[D]=function(){if(0!=s.enabled){var t=jt().touches;if(p){var e=Lu(this,jt());if((null!=C.location?F(C.location[0],C.location[1],e[0],e[1]):null)>v)clearTimeout(f);else if(h)return B(),!1}if(t.length>1)2==t.length&&L&&(O=!0,L.apply(this,arguments),B());else{var n=(new Date).getTime();if(S||(S=n),r&&null!=document.elementFromPoint){var a=0==k||n-k>b,o=t[0],c=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset);if(!a||"svg"===c.localName||null!=c.id.match(/tooltip/gi))return void B();if(c!=this){if(d!=c){var g=d||this,m=(w=l(g)).on(I),x=w.datum();T=null!=(T=null!=(A=w.attr("id")||w.attr("class"))?A.match(/(\d)+$/gi):null)&&null!=T[0]?parseInt(T[0]):null,null!=m&&null!=T&&m.call(g,x,T)}var w,_=(w=l(c)).attr("class");i.chartTypes[0].value!==Gt.dial||"inner"!==_&&"outer"!==_||(w=l(c.parentNode));var A,T,P=w.on(D);x=w.datum();return T=null!=(T=null!=(A=w.attr("id")||w.attr("class"))?A.match(/(\d)+$/gi):null)&&null!=T[0]?parseInt(T[0]):null,void(null!=P&&null!=T&&(P.call(c,x,T),d=c,k=n))}}u&&S-C.time<y||E&&(i&&(i.zcEventType="touchmove"),E.apply(this,arguments),B())}}},R[I]=function(){if(0!=s.enabled){var t=jt().touches;if(p&&(clearTimeout(f),h))return h=!1,B(),g&&g.apply(this,arguments),!1;if(!(t.length>1)){if(O&&L&&A)return O=!1,A.apply(this,arguments),void B();var e=new Date,n=Lu(this,jt()),a=e-C.time,r=null!=C.location?F(C.location[0],C.location[1],n[0],n[1]):null,o=e-w;o<=_&&o>0&&r<=v?(P&&(i&&(i.zcEventType="doubletap"),P.apply(this,arguments),B()),w=0):a<=m&&r<=v?T&&(i&&(i.zcEventType="tap"),T.apply(this,arguments),B()):A&&A.apply(this,arguments),w=e}}};var z=i&&i.isAxisCategory&&i.systemConf.chart.brush.enabled;for(var j in R)t.on(j,R[j],z);function F(t,e,n,a){return Math.sqrt(Math.pow(n-t,2)+Math.pow(a-e,2))}function B(){var t=jt();c&&t.cancelable&&t.preventDefault()}}(t,r,n,a)}function Ru(t,e,n){if(e=null!=e&&""!=e?".".concat(e):"",Ar.isMouseDevice){if(""!==e)t.on(e,null);else for(var a in n)t.on(a,null);n=null}}wn.setComponent("events.getMousePosition",Lu);var zu=function(t){var e=t.encode,n=t.view;wn.setComponent(Fu(e,n),t)},ju=function(t,e){return wn.getComponent(Fu(t,e))};function Fu(t,e){return"legend-".concat(t,"-").concat(e)}function Bu(t,e){return hr(e)||"string"==typeof e&&hr(fa(window,e))?$n(e,t):(e.extend?t=Rn(t,e,!0,!0,!0):(e.domain&&(e.domain.extend?t.domain=Rn(t.domain,e.domain,!0,!0,!0):t.domain=e.domain),e.range&&(e.range.extend?t.range=Rn(t.range,e.range,!0,!0,!0):t.range=e.range)),t)}var Hu=function(){function t(e){_classCallCheck(this,t),this.spec=e}return _createClass(t,[{key:"draw",value:function(t){var e=this.encode;if(e){var n=this.spec.parser;n&&(e=Bu(e,n)),this.element=t,Kf(e,t)}}},{key:"create",value:function(){var t=this.constructor.parser;if(t)return this.encode=t(this.spec)}}]),t}(),Nu=function(t,e){wn.setComponent(Vu(t),e)},Wu=function(t){return wn.getComponent(Vu(t))};function Vu(t){return"datalabels-".concat(t)}var Yu=function(t){t=wa(t,{}),this.startWeekDay=na(t.startWeekDay)?t.startWeekDay:1,this.startMonth=na(t.startMonth)?t.startMonth:0};Yu.MILLISEC=0,Yu.SECOND=1,Yu.MINUTE=2,Yu.HOUR=3,Yu.DATE=4,Yu.MONTH=5,Yu.SECOND_TYPE="ABSSECOND",Yu.MINUTE_TYPE="ABSMINUTE",Yu.HOUR_TYPE="ABSHOUR",Yu.DAY_TYPE="ABSDAY",Yu.DATETIME_TYPE="DATETIME",Yu.DATE_TYPE="DATE",Yu.ABSWEEK_TYPE="ABSWEEK",Yu.ABSMONTH_TYPE="ABSMONTH",Yu.ABSQUARTER_TYPE="ABSQUARTER",Yu.ABSYEAR_TYPE="YEAR",Yu.D3_WEEKDAY_FNS=[nt,at,rt,ot,it,lt,st],Yu.DAY_MILLIS=864e5,Yu.prototype.setZero=function(t,e){for(var n=0,a=0;a<=e;a++)switch(a){case Yu.MILLISEC:n+=this.getMilliseconds(t),this.setMilliseconds(t,0);break;case Yu.SECOND:n+=this.getSeconds(t),this.setSeconds(t,0);break;case Yu.MINUTE:n+=this.getMinutes(t),this.setMinutes(t,0);break;case Yu.HOUR:n+=this.getHours(t),this.setHours(t,0);break;case Yu.DATE:n+=this.getDate(t)-1,this.setDate(t,1);break;case Yu.MONTH:n+=this.getMonth(t),this.setMonth(t,this.startMonth);break;default:throw"unknown type 333: ".concat(e)}return n},Yu.prototype.getBaseValue=function(t,e,n){switch(e){case Yu.SECOND_TYPE:case Yu.DATETIME_TYPE:var a=this.setZero(t,Yu.MILLISEC);n&&a>0&&this.setSeconds(t,this.getSeconds(t)+1);break;case Yu.MINUTE_TYPE:a=this.setZero(t,Yu.SECOND);n&&a>0&&this.setMinutes(t,this.getMinutes(t)+1);break;case Yu.HOUR_TYPE:a=this.setZero(t,Yu.MINUTE);n&&a>0&&this.setHours(t,this.getHours(t)+1);break;case Yu.DAY_TYPE:case Yu.DATE_TYPE:a=this.setZero(t,Yu.HOUR);n&&a>0&&this.setDate(t,this.getDate(t)+1);break;case Yu.ABSWEEK_TYPE:a=this.setZero(t,Yu.SECOND);var r=this.startWeekDay;n?(a>0&&this.setDate(t,this.getDate(t)+1),r<this.getDay(t)?this.setDate(t,this.getDate(t)+(7-this.getDay(t)+r)):this.setDate(t,this.getDate(t)+(r-this.getDay(t)))):r>this.getDay(t)?this.setDate(t,this.getDate(t)-(7-r+this.getDay(t))):this.setDate(t,this.getDate(t)-(this.getDay(t)-r));break;case Yu.ABSQUARTER_TYPE:case Yu.ABSMONTH_TYPE:a=this.setZero(t,Yu.DATE);n&&a>0&&this.setMonth(t,this.getMonth(t)+1);break;case Yu.ABSYEAR_TYPE:a=this.setZero(t,Yu.MONTH);n&&a>this.startMonth&&this.setFullYear(t,this.getFullYear(t)+1);break;default:throw"unknow type 222: ".concat(e)}},Yu.prototype.getTicksList=function(t,e,n,a){for(var r=new Array,o=e.getTime(),i=t.getTime(),l=new Date(i);i<=o;){switch(r.push(l),l=new Date(i),a){case Yu.SECOND_TYPE:case Yu.DATETIME_TYPE:l.setTime(l.getTime()+1e3*Ye(n));break;case Yu.MINUTE_TYPE:l.setTime(l.getTime()+6e4*n);break;case Yu.HOUR_TYPE:l.setTime(l.getTime()+36e5*n);break;case Yu.DAY_TYPE:case Yu.DATE_TYPE:l.setTime(l.getTime()+n*Yu.DAY_MILLIS);break;case Yu.ABSWEEK_TYPE:this.setDate(l,this.getDate(l)+n);break;case Yu.ABSMONTH_TYPE:case Yu.ABSQUARTER_TYPE:this.setMonth(l,this.getMonth(l)+n);break;case Yu.ABSYEAR_TYPE:this.setFullYear(l,this.getFullYear(l)+n)}i=l.getTime()}return r},Yu.prototype.range=function(t,e,n,a,r){switch(t=new Date(t.getTime()),e=new Date(e.getTime()),this.getBaseValue(t,a,!1),this.getBaseValue(e,a,!0),a){case Yu.SECOND_TYPE:case Yu.DATETIME_TYPE:var o=1,i=Ue((e.getTime()-t.getTime())/1e3);return s=d(s=Ue(i/n)||o,r),{TYPE:ct,INTERVAL:s,TICKS:this.getTicksList(t,e,s,a)};case Yu.MINUTE_TYPE:o=1;return s=d(s=Ue((e.getTime()-t.getTime())/(6e4*n))||o,r),{TYPE:ut,INTERVAL:s,TICKS:this.getTicksList(t,e,s,a)};case Yu.HOUR_TYPE:o=1;return s=d(s=Ue((e.getTime()-t.getTime())/(36e5*n))||o,r),{TYPE:ut,INTERVAL:s,TICKS:this.getTicksList(t,e,s,a)};case Yu.DAY_TYPE:case Yu.DATE_TYPE:o=1;return s=d(s=Ue((e.getTime()-t.getTime())/(n*Yu.DAY_MILLIS))||o,r),{TYPE:dt,INTERVAL:s,TICKS:this.getTicksList(t,e,s,a)};case Yu.ABSWEEK_TYPE:o=1;var l=Ue((e.getTime()-t.getTime())/(n*Yu.DAY_MILLIS*7));l=d(l,r);var s=7*Ue(l)||o;return{TYPE:ht,INTERVAL:s,TICKS:this.getTicksList(t,e,s,a)};case Yu.ABSMONTH_TYPE:o=1;return s=d(s=Ue(this.getMonthsDiff(t,e)/n)||o,r),{TYPE:ft,INTERVAL:s,TICKS:this.getTicksList(t,e,s,a)};case Yu.ABSQUARTER_TYPE:o=1;var c=this.getMonthsDiff(t,e)/n||o,u=Ue(c/3);return u=d(u,r),{TYPE:ft,INTERVAL:s=3*u,TICKS:this.getTicksList(t,e,s,a)};case Yu.ABSYEAR_TYPE:o=1;return s=d(s=Ue((e.getFullYear()-t.getFullYear())/n)||o,r),{TYPE:pt,INTERVAL:s,TICKS:this.getTicksList(t,e,s,a)};default:throw"UNKNOWN TYPE 111: ".concat(a)}function d(t,e){return null!=e&&e>=t?e:t}},Yu.MAX_DATE=new Date(2008,8,29,23,23,23,999),Yu.prototype.getMaxDate=function(t,e){return Wo(t,Yu.MAX_DATE,Po,null,"axis",null,null,e)},Yu.prototype.getMonthsDiff=function(t,e){return 12*(this.getFullYear(e)-this.getFullYear(t))+(this.getMonth(e)-this.getMonth(t))},Yu.prototype.getYearsDiff=function(t,e){return 12*(this.getFullYear(e)-this.getFullYear(t))+(this.getMonth(e)-this.getMonth(t))},Yu.prototype.getFullYear=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCFullYear():t.getFullYear()},Yu.prototype.getMonth=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCMonth():t.getMonth()},Yu.prototype.getDay=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCDay():t.getDay()},Yu.prototype.getDate=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCDate():t.getDate()},Yu.prototype.getHours=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCHours():t.getHours()},Yu.prototype.getMinutes=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCMinutes():t.getMinutes()},Yu.prototype.getSeconds=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCSeconds():t.getSeconds()},Yu.prototype.getMilliseconds=function(t){return null!=this.useUTC&&this.useUTC?t.getUTCMilliseconds():t.getMilliseconds()},Yu.prototype.setFullYear=function(t,e){return null!=this.useUTC&&this.useUTC?t.setUTCFullYear(e):t.setFullYear(e)},Yu.prototype.setMonth=function(t,e){return null!=this.useUTC&&this.useUTC?t.setUTCMonth(e):t.setMonth(e)},Yu.prototype.setDate=function(t,e){return null!=this.useUTC&&this.useUTC?t.setUTCDate(e):t.setDate(e)},Yu.prototype.setHours=function(t,e){return null!=this.useUTC&&this.useUTC?t.setUTCHours(e):t.setHours(e)},Yu.prototype.setMinutes=function(t,e){return null!=this.useUTC&&this.useUTC?t.setUTCMinutes(e):t.setMinutes(e)},Yu.prototype.setSeconds=function(t,e){return null!=this.useUTC&&this.useUTC?t.setUTCSeconds(e):t.setSeconds(e)},Yu.prototype.setMilliseconds=function(t,e){return null!=this.useUTC&&this.useUTC?t.setUTCMilliseconds(e):t.setMilliseconds(e)};var Uu=function t(){var e,n,a,r,o,i;function l(t){return e?e.get(t):null}return l.domain=function(t){return arguments.length?(n=t,l):n},l.rangeBand=function(t){return arguments.length?(i=t,l):0},l.bandwidth=function(t){return a?arguments.length?a.get(t):i:null},l.rangeBands=function(t){if(!arguments.length)return a;if(null==t)return l;o=t,a=new L,e=new L;for(var n=-1,r=t.length;++n<r;)e.set(n,t[n][0]),a.set(n,t[n][1]-t[n][0]);return l},l.discreteWidth=function(t){return a?a.get(t):null},l.range=function(t){return arguments.length?(r=t,l):r},l.copy=function(){return t().domain(n).rangeBands(o).range(r)},l};function Gu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Xu(t,e)[n]}function Xu(t,e){var n=t.axes[e];if(Ao(t)){if("y"===e){var a=t.dataObject.hierarchical.pivotLayout.getRootNodeList("row"),r=a.getCount();return a.hasMultiCluster()||r?n.leaves:n.groups}return t.systemConf.chart.axes.xaxis.splitLeaves?n.leaves:[{scale:n.leafScaleGrid}]}return"y"===e?n.groups:[{scale:n.scale}]}function Zu(t){var e=t.chartTypes[0].name;return t.systemConf.chart.plot.plotoptions[e]}function qu(t,e,n,a){var r=t.dataset.getColumn(e,n),o=r.datatype,i=r[o];return function(e){return Wo(i,e,o,t,a)}}function $u(t,e,n){var a=n||Qu(t,e),r=a.reversed,o=a.startAngle,i=a.endAngle;return r?[Jn(i,2*on),Jn(o,0)]:[Jn(o,0),Jn(i,2*on)]}function Qu(t,e){var n=Zu(t),a=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.systemConf.chart.axes;return"x"==e?a.xaxis:a.yaxis[n]}(t,e);return{reversed:a.reversed,startAngle:n.startAngle,endAngle:n.endAngle}}function Ku(){this.list=L(),this.list1=L(),this.count=0}Ku.prototype.add=function(t,e){var n=wa(e,this.count);this.list.has(t)||(this.list1.set(n,t),this.list.set(t,[n,this.count++]))},Ku.prototype.get=function(t){return this.list1.get(t)},Ku.prototype.indexOf=function(t,e){var n=this.list.get(t);if(n)return e?n[1]:n[0]},Ku.prototype.values=function(){return this.list.keys()};var Ju="log",td="sqrt";Bi.quantileScale=function(){var t=[],e=[],n=[];function a(t){var a;return n.forEach((function(e,n){t>=e[0]&&t<=e[1]&&(a=n)})),na(a)?e[a]:null}return a.domain=function(e){if(arguments.length){t=e,n=[];for(var r=0;r<t.length;r+=2)n.push([t[r],t[r+1]]);return a}return t},a.range=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Bi.quantileScale().domain(t).range(e)},a};var ed=function(t,e){wn.setComponent(t,e)},nd=function(t){return wn.getComponent(t)};function ad(t,e){var n=this;if(!t._correction)return[0,0];var a=t._correction.map((function(t){return ua(t)?t:hr(t)?$n(t,n):[t,t]})),r=[u(a,(function(t){return t[0]})),u(a,(function(t){return t[1]}))],o=e.config.domain,i=t.domainOperators||o.operators||{};return(i.min||o.hasDefaultMin)&&(r[0]=0),i.max&&(r[1]=0),[r[0]||0,r[1]||0]}function rd(t){var e=this;return t.map((function(t){var n=t._type,a=t.key;if(n){var r=nd(n+"-correction-evaluator").call(e,t)||0;return function(t,e,n){if(!t||!n)return;var a=ua(e)?e:[e,e],r=n.cache.correction;r[t]=r[t]||[0,0],r[t]=[Ge(r[t][0],a[0]),Ge(r[t][1],a[1])]}(a,r,e.chartObj),r}return t}))}function od(t){return this.d3_scale.origRange=t.plotBound,function(t,e){var n=ad(t,e);t.plotBound[1]=t.plotBound[1]+n[0]}(t,this),t.plotBound}function id(t,e){return er(di(t,e))}wn.setComponent("scale.correctionEvaluator",ad),wn.setComponent("scale.operatorCorrectionMapping",rd),ed("axis.evalLinearRange",od);var ld="polar",sd="quantile";function cd(t){var e,n=this,a=this;a.chartObj,a.type,a.encode,a.reverse,a.dimension;e=t.map((function(t){if(ua(t))return t;if(hr(t))return $n(t,n);var e={};return fd.has(t._type)?(e[t._type]=fd.get(t._type).call(n,t),e[t._type]):void 0}));var r=j(E(e));return a.config.tempDomain=j(E(e)),a.config.extremes=r,r}function ud(t,e){t&&ua(t)&&t.every(ua)?t.forEach((function(t){ud(t,e)})):e(t)}function dd(t){if("time"==t.dataType)return correctionFactorForTimeData.call(this,t);var e=this,n=e.chartObj,a=(e.type,e.encode,e.reverse,e.dimension,e.config.extremes),r=t._needCorrectionFactor,o=t.correction,i=t.preCorrectionValue?e.config.domain.outerPaddingCorrection:0,l=t.correctionValue||i||0,s=$n(e.config.domain.operators.min,n,this,a),c=$n(e.config.domain.operators.max,n,this,a),u=a[1]-a[0];return 0===u&&(u=1),e.config.originalDomain=a.slice(),r&&(l=u*o),Xn(s)&&(s=e.config.domain.hasDefaultMin?0:a[0]-l||0),Xn(c)&&(c=a[1]+l||0),e.config.extremes=[s,c],[s,c]}ed("axis.extremes",cd);var hd=L();hd.set("extremes",cd),hd.set("logDomain",(function(t){var e;e=t.map((function(t){if(ua(t))return t}));var n=j(E(e));return this.config.extremes=n,n})),hd.set("plotBound",(function(t){var e=this.config,n=e.scaleType,a=this.encode,r=e.reverse,o=t.dimension,i=$n(t.plotSize,t.defaultPlotSize,this.chartObj),l=t.customPlotBound&&t.customPlotBound[o],s=t.polarConfig,c=$n(t.boundExtreme,t.defaultPlotSize,this.chartObj);if(n==ld)return $u(pn,a,s);if("clr"==a)return t.color;var u=is(pn,o,i,pn,l),d=["width"==o?c||0:u,"width"==o?u:c||0];return r&&(d=d.reverse()),e.tempRange=d,this.d3_scale.origRange=Hn(d),d})),hd.set("waterfallBound",(function(t){var e=this,n=e.config,a=e.chartObj,r=a.dataObject,o=e.encode,i=e.key,l=r.getCorrectionForWaterfall(n.extremes,o,i,a,a.cache.correction["label-y-0"]&&a.cache.correction["label-y-0"][1]);return e.config.extremes=l,l})),hd.set("correctionFactor",dd),hd.set("extraCorrectionFactor",(function(t){var e=this,n=e.config,a=e.chartObj,r=n.extremes[1]-n.extremes[0],o=0==r?a.plotarea.width/2:r*(n.outerPadding||0);return e.config.domain.outerPaddingCorrection=o,o})),hd.set("correctionFactor1",dd),hd.set("updateBaseValue",(function(t){var e=this,n=(e.chartObj,e.key,e.config),a=pn;if(e.datatype===Eo){var r=t.basevalue,o=t.stacked;a=!na(r)||o||t.rangeCheck&&!isWithinRange(r,n.extremes)?t.definedMin<0||n.extremes[0]<0?0:pn:r}this.config.hasNegativeValue||(this.config.hasNegativeValue=[]),this.config.hasNegativeValue[e.key]=a})),hd.set("hasDefaultBaseValue",(function(){var t=this,e=(t.chartObj,t.key,t.config),n=e.extremes,a=e.hasNegativeValue[t.key],r=e.domain.operators.hasDefaultBase&&(null==a||a>0);return e.domain.operators.hasDefaultBase&&n[1]-n[0]==0&&(e.extremes=j(E([n,[0]]))),t.config.domain.hasDefaultMin=r,r})),hd.set("basevalue",(function(t){var e=this.config,n=e.subfunction,a=e.extremes,r=new Date(a[0]),o=new Date(a[1]),i=new Yu(t.metaConf);return i.useUTC=wa(t.metaConf&&t.metaConf.useUTC,!1),i.getBaseValue(r,n,!1),i.getBaseValue(o,n,!0),e.extremes=[r.getTime(),o.getTime()],e.tempDomain=[r.getTime(),o.getTime()],e.extremes})),hd.set("subfunction",(function(t){var e=this.config,n=t.subfunction,a=e.extremes,r=new Date(a[0]),o=new Date(a[1]);return na(n)&&"AUTO"!=n||(n=ii(o-r).subFunction),e.subfunction=n,n})),hd.set("timeFormat",(function(t){var e=this.config,n=(e.subfunction,e.extremes),a=new Date(n[0]),r=new Date(n[1]);return e.extremes=[a.getTime(),r.getTime()],e.extremes})),hd.set("logConstant",(function(t){var e=this,n=e.config,a=(e.encode,e.key,n.extremes),r=c(a);r>0&&r<wa(n.logBase,10)&&!1===t.allowNonPositiveTicks?this.d3_scale.constant=1e-4:this.d3_scale.constant=1})),hd.set("_correction",rd);var fd=L();fd.set("extremesByData",(function(t){var e=this.chartObj,n=(t.accessor,t.data||e.seriesdata||this.config.data),a=t.indices,r=[];return n.forEach((function(t){t.disabled||ud(t.data||t,(function(t){a.map((function(e){r=r.concat(t[e])}))}))})),j(r)})),fd.set("extremesByEncode",(function(t){var e=this,n=(e.type,e.encode,e.reverse,e.dimension,e.id,e.key),a=t.seriesExtermes,r=E(a[n]);return 0!=r.length?j(r):r.enabled?[0,0]:null})),fd.set("extremesByAccessor",(function(t){var e,n=this,a=(n.chartObj,n.type,n.encode),r=(n.reverse,n.dimension,t.accessor),o=t.data,i=t.indices,l=t.condition;return e=o.map((function(e,n){var o,s=E(e.data),c=i?i[n]:n,u=r(a,c);if(l&&(s=s.filter(l)),t.isRangeType&&t.isRangeType(c)){var d=E(s.map(u,a,c));o=j(d)}else o=j(s,u,a,c);return o})),j(E(e))})),fd.set("stackExtremes",(function(t){var e=this,n=e.chartObj.dataObject,a=(e.type,e.encode,e.reverse,e.dimension,t.data),r=t.stackIndices;if(n.isPercentChart)return[0,100];if(!r.length)return[];var o=r.map((function(t){return a[t].layout.getExtent()}));return j(E(o))})),fd.set("waterfallProcessor",(function(t){var e=this,n=(e.config,e.chartObj.dataObject),a=(e.encode,e.key),r=n.processDataForWaterFall(a);return e.config.extremes=r,r})),ed("scale.allowedOperators",hd),ed("scale.allowedExtremesOperators",fd);var pd=function(){function t(e,n,a,r){_classCallCheck(this,t),this.encode=e,this.key=n||0,this.config=a,this.chartObj=r,this.bounds={},this.init()}return _createClass(t,[{key:"init",value:function(){this.scale=pn,this.id="".concat(this.encode,"-").concat(this.key),this.d3_scale={};var t=this.getConfig(),e=this.chartObj&&this.getDataSchema(),n=t.ranges;n&&!ua(n[0])&&(t.ranges=n.map((function(t){return[t]}))),this.datatype=e&&e.dataType,this.schema={data:e,domain:{key:e&&e.meta.dataindex,min:t.minRange,max:t.maxRange,ranges:t.ranges,stops:t.stops,base:t.base}}}},{key:"create",value:function(){var t=this.getScaleType()(),e=this.getConfig();for(var n in this.d3_scale.domain=this._parseDomain(),this.d3_scale.range=this._parseRange(),this.d3_scale.unknown=0,e.clamp&&(this.d3_scale.clamp=!0),this.d3_scale)t[n]?t[n](this.d3_scale[n]):t[n]=this.d3_scale[n];return this.scale=t}},{key:"getScale",value:function(){return this.scale||this.create(),this.scale}},{key:"getScaleType",value:function(){var t=this.schema&&this.schema.data;return function(t,e,n){var a=e.schema.domain.ranges,r=e.encode;switch(t){case Eo:return a||e.config.scaleType==sd?Bi.quantileScale:n===td?_:n===Ju?S:m;case To:return"_ordinal"===e.config.scaleType?w:"x"==r||"y"==r?b:w;case Po:return a||e.config.scaleType==sd?Bi.quantileScale:C}}(this.config.dataType||t.dataType,this,this.config.scaleType||t&&t.meta.scaleType)}},{key:"getConfig",value:function(){return this.config}},{key:"_parseDomain",value:function(){var t=this,e=this.config,n=(e.field,e.domain);e.type;if(ua(n))return n;if(!hr(n)){var a={};return Object.keys(n.operators).map((function(e){hd.has(e)&&(a[e]=hd.get(e).call(t,n.operators[e],a))})),("string"==typeof n.evaluator?$n(n.evaluator,this):n.evaluator).call(this,a)}$n(n,this)}},{key:"_parseRange",value:function(){var t=this,e=this.config,n=(e.field,e.range);e.type;if(ua(n))return n;if(!hr(n)){var a={};return hd.keys().map((function(e){n.operators[e]&&(a[e]=hd.get(e).call(t,n.operators[e],a))})),("string"==typeof n.evaluator?$n(n.evaluator,this):n.evaluator).call(this,a)}$n(n,this)}},{key:"parseDomain",value:function(){var t=this.schema.data,e=$n(t.source),n=t.dataType,a=this.schema.domain;n===Po&&(a=vd(a,t.meta));var r=a.min,o=a.max,i=a.stops,l=a.ranges,s=a.base;if(l)return E(l);switch(t.condition&&(e=e.filter(t.condition)),n){case To:return id(e,this.schema.domain.key);case Po:case Eo:var c=function(t,e){var n=di(t,e);return j(n)}(e,this.schema.domain.key),u=c;if(na(s)&&(u=j([].concat(_toConsumableArray(u),[s]))),na(r)&&(u[0]=r),na(o)&&(u[u.length-1]=o),i){var d=Yn(i);d.sort(B);var h=d.filter((function(t){var e=!0;return na(r)&&(e=e&&t>=r),na(o)&&(e=e&&t<=o),e}));return(u[0]<h[0]||!h.length)&&h.splice(0,0,u[0]),u[1]>h[h.length-1]&&h.splice(h.length,0,u[1]),h}return u}}},{key:"parseRange",value:function(){}},{key:"getDataSchema",value:function(){var t=pi.helpers.isCatNull,e=this.encode,n=this.key,a=this.chartObj,r=a.dataObject,o=a.dataset,i=t(o,"x"),l=t(o,"y",0),s=o.getColumn(e,n),c=r.encodes&&r.getEncode(e,n),u=e?a.dataset.getDataType(e,n):gd(s);return{source:c?E(c.seriesData.map((function(t){return E(t.data)}))):[],condition:function(t){return!!function(t){return t.isGeoMap||t.mapObj||t.dataObject.isFlowChartCategory}(a)||!(i(o.getActualX(t,n))||l(o.getY(t,n)))},meta:Hn(s),dataType:u}}}]),t}();function gd(t){var e=t.useDiscrete,n=t.datatype;return e?To:n||To}function vd(t,e){var n=e[gd(e)]||{},a=n.inputformat,r=function(t){return Go(t,0,n).getTime()};if(!a||/timestamp/i.test(a))return t;var o=t.min,i=t.max,l=t.stops,s=t.ranges;return s&&(s=s.map((function(t){return t.map(r)}))),l&&(l=l.map(r)),na(o)&&(o=r(o)),na(i)&&(i=r(i)),_objectSpread(_objectSpread({},t),{},{ranges:s,stops:l,min:o,max:i})}function md(t){return/(left|right)/.test(t)?"bottom":"left"}function yd(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function bd(t){var e=[];return na(t.threshold)&&Oa(t.threshold,(function(t){!0===t.show&&t.values.length&&(e=e.concat(t.values))})),e}ed("Scale",pd);var xd="x",Cd="y",kd="z",wd="geo",_d="per",Sd="splitper",Od="maxper",Ad="percent",Td="splitpercent",Pd="maxpercent",Ed=M([xd,Cd,kd,wd,_d,Sd,Od,Ad,Td,Pd]);function Ld(t,e,n,a,r){a.length;return t||function(t,e){var a=Vs(e.itemIndex,r,e,n);return Fs(n,a,t&&t.data?t.data:t,r)}}function Md(t,e){return Rn(e.systemConf.chart.plot.datalabels.boundBox,t.boundBox,!0)}function Dd(t,e){return!0===Kn([t.boundBox||{},e.systemConf.chart.plot.datalabels.boundBox||{}],"show")}function Id(t,e){return Ge(Jn(Kn([t.boundBox||{},e.systemConf.chart.plot.datalabels.boundBox||{}],"padding"),2),0)}function Rd(t,e){return Jn(Kn([t.boundBox||{},e.systemConf.chart.plot.datalabels.boundBox||{}],"strokeWidth"),1)}function zd(t,e,n,a){return Ge(2*(n||0)+a-t-2*e,0)}function jd(t){var e=!0===(t=t||{}).enabled,n={};return n.enabled=e,n.width=e?na(t.width)?+t.width:10:0,n.height=e?na(t.height)?+t.height:4:0,n}function Fd(t){return!(!1===t.display||Xn(t.text)||""===t.text)}function Bd(t,e,n){return{seriesIndex:e,itemIndex:t,multiColoring:n.multiColoring,reverseColor:n.reverseColor,dataCount:n.dataUpdate.length}}function Hd(t,e,n,a,r){var o,i=e&&e.datalabels?Rn(t.datalabels,e.datalabels,!0):t.datalabels;n&&n.viewFlow&&n.viewFlow.marks._default.label.length&&(i=(o=n.viewFlow.marks._default.label[a].spec)?Rn(o,i,!0):i);return n&&function(t,e,n,a){var r,o,i,l,s,c,u=Ui(e,a,n).name,d=Gn(e.userdata,"chart.plot.plotoptions.".concat(u,".datalabels"),!0)||{},h=Gn(e.seriesdata[n]||e.seriesdata[0],"plotoptions.datalabels",!0)||{};(h.showAs||d.showAs)&&(t.showAs=h.showAs||d.showAs||t.showAs);(r=d.innerLabel)?((l=t.innerLabel).showAs=r.showAs||l.showAs,(o=r.parentLabel)&&((s=t.innerLabel.parentLabel).showAs=o.showAs||s.showAs)):(i=d.stackLabels)&&((c=t.stackLabels).showAs=i.showAs||c.showAs)}(i,n,a,r),i}function Nd(t,e,n,a,r,o,i){var l=n.systemConf;return ua(a)&&na(o)&&(a=a[o]),vc(t,[{fontColor:Vd(l,a,e,n,r,o,i,"fontColor"),strokeColor:Vd(l,a,e,n,r,o,i,"strokeColor")},e,l.chart.plot.datalabels,l.chart,l.canvas,wr])}function Wd(t,e,n){e=parseInt(e/2);var a=n.split(/ (?![^(]*\))/),r="".concat(parseFloat(a[0])+e,"px ").concat(parseFloat(a[1])+e,"px ").concat(a[2]," ").concat(a[3]||"black");return"".concat(-e,"px ").concat(-e,"px 0 ").concat(t,", ").concat(e,"px ").concat(-e,"px 0 ").concat(t,", ").concat(-e,"px ").concat(e,"px 0 ").concat(t,", ").concat(e,"px ").concat(e,"px 0 ").concat(t,", ").concat(r)}function Vd(t,e,n,a,r,o,i){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"fontColor",s=arguments.length>8?arguments[8]:void 0,c=n[l];if("function"==typeof c){var u=$n(c,e,a);if(na(u))return u}var d,h=fa(a.systemConf,"chart.plot.datalabels")||{},f=fa(a.systemConf,"map.labels")||{},p=a.isGeoMap?wa(h[l],f[l]):h[l],g=Ui(a,s,o||0),v=g.value,m=na(t.legend.imagePallete),y=Cl(v)&&a.dataObject.isstacked(v)&&!0!==i,b=g.name===ji&&"inside"===n.labelPos;if(Dd(n,a)){var x=Md(n,a);d=x.fillColor||e}else if(b){var C=t.chart.plot.plotoptions.sankey.node;e=wa(C.fillColor,e)}if("fontColor"===l&&c===Oe&&p===Oe){if(d&&d!==hn)return ma(d);if(r&&m)return"#444444";if(r&&_e.innerLabels.indexOf(v)>-1||y||b||_e.datalabelsInside.indexOf(v)>-1)return ma(e)}return(m||(na(c)||null!==p)&&null!==c?c:e)||wa(p,t.chart[l],t.canvas[l],wr[l])}function Yd(t,e){return!(t.x1<e.x1||t.y1<e.y1||t.x2>e.x2||t.y2>e.y2)}function Ud(t,e){if(Wl(e,zo)){var n=e.dataSplicer.getEncode().label;return n&&na(n[0])||!0===Kn([t,e.systemConf.chart.plot.datalabels],"show")}return!1}function Gd(t,e){return e.dataObject.noofBarEnabledSeries&&e.dataObject.isstacked()&&!e.dataObject.isStackedPercentChart&&t&&t.show}function Xd(t,e,n,a,r,o){var i=+n[0],l=+n[1],s=e.plotarea,c={left:-a,right:-a,top:0,bottom:0};r=r||{left:-i,top:-l,right:s.width-i,bottom:s.height-l},t.each((function(){var t=Bn(this),e={left:t.x+(o?o[0]:0),top:t.y+(o?o[1]:0),width:t.width,height:t.height};hc(this,this.textContent,e,r,"bottom","..",c)}))}function Zd(t){return t.staticPaneSVG.select(".labelholder")}function qd(t,e,n){var a=t.labelArray,r="".concat(e||0);return-1===r.indexOf("_")?r="0":na(n)&&(r+="(".concat(n,")")),a[r]=a[r]||[],a[r]}function $d(t,e,n){return t?u(t,(function(t,a){return qa(n?n(t,a):t,e)?a:0})):0}function Qd(t){return t.seriesIndices[t.seriesIndices.length-1]}function Kd(t){if(t.dataObject.noofBarEnabledSeries){var e;if(t.seriesdata.some((function(n,a){return(e=Jd(t,a,zo))===to})),e===to)return!0;var n=t.dataObject.getEncode("stack");return Object.keys(n).some((function(n){var a=t.dataObject.getEncode("stack",n);if(a){var r=Qd(a);return(e=Jd(t,r,jo))===to}})),e===to}}function Jd(t,e,n){if(t.dataObject.noofBarEnabledSeries){var a=n===jo,r=t.chartTypes[e]||t.chartTypes[0],o=t.seriesdata[e]||t.seriesdata[0],i=Hd(t.systemConf.chart.plot.plotoptions[r.name],a?pn:o.plotoptions,t,e);a&&(i=i.stackLabels||{});var l=t.dataObject,s=t.axes.rotated,c=l.isstacked(),u=i.labelPos||Jr,d=i.textDirection;return(a?Gd(i,t):Ud(i,t))?(d=!d||c&&!a?s?eo:no:d,n===zo&&u===to&&(c||s&&d!==eo||!s&&d===eo)&&(u=Jr),u):void 0}}function th(){if(!arguments[0].length)return[0,0];var t=this,e=arguments[arguments.length-1],n=rd.call.apply(rd,[t].concat(Array.prototype.slice.call(arguments))),a=t.config.domain.operators||{},r=t.chartObj,o=r.cache.correction,i=r.dataset,l=ad({_correction:n,domainOperators:"label"===e?{hasDefaultMin:a.hasDefaultMin}:null},t).slice(0);if("label"===e&&((t.config.domain.hasDefaultMin||r.datalabels.hasFixedPosition)&&(l[0]=0),"log"!==t.schema.data.meta.scaleType||Kd(r)||(l[0]=l[1]=0)),o.domainCorrection=o.domainCorrection||{},"ordinal"===this.config.type)return l;var s=o.domainCorrection["".concat(e,"-").concat(t.id)],c=r.plotarea.height,u=s&&o.domainCorrection.measure["measure-axis-".concat(t.id.split("-")[1])]===c?s:nh(l,t,e);if(o.domainCorrection["".concat(e,"-").concat(t.id)]=u,o.domainCorrection.measure=o.domainCorrection.measure||{},o.domainCorrection.measure["measure-axis-".concat(t.id.split("-")[1])]=c,"label"===e){var d=t.id.split("-");if("time"==i.getColumn(d[0],+d[1]).datatype&&"ordinal"!==i.getColumn("x",0).datatype){var h="label-x-0";o[h]=o["label-".concat(t.id)],o.domainCorrection[h]=u}}return u[0]&&(t.config.extremes[0]-=u[0]),u[1]&&(t.config.extremes[1]+=u[1]),u}function eh(t,e,n){Pn.scaleCorrection||"marker"!==t&&(n["".concat(t,"Bound")]=e)}function nh(t,e,n){if(Pn.scaleCorrection){var a=e.config,r=a.extremes,o=e.config.range.operators.plotBound.plotSize,i=Eh(Gn(e,"schema.data.meta.scaleType",!0))().domain(r),l=[0,o[a.range.operators.plotBound.dimension]];return t.map((function(t,e){return i.range(0===e?[t,l[1]]:[0,l[1]-t]),(0===e?i.invert(t)-i.invert(0):i.invert(l[1])-i.invert(l[1]-t))||0}))}return function(t,e,n){var a=e.config,r=a.extremes,o=e.config.range.operators.plotBound.plotSize,i=Eh(e.config.scaleType)().domain(r),l=e.chartObj,s="time"==e.datatype?"x":e.encode,c=a.orient||l.axes[s].orient,u=[0,"time"==e.config.dataType&&"marker"===n?o[a.range.operators.plotBound.dimension]:o["left"==c?"height":"width"]],d=u[1]-u[0],h=e.config.scaleType;if("label"===n&&"log"!==h){var f=r[1]-r[0];return t.map((function(t){return f/(d-t)*t}))}return t.map((function(t,e){var a="marker"===n?[0,d]:0===e?[t,d]:[0,d-t];return i.range(a),("log"===h?0===e?i.invert(a[0])-i.invert(a[0]-t):i.invert(a[1]+t)-i.invert(a[1]):0===e?i.invert(t)-i.invert(0):i.invert(d)-i.invert(d-t))||0}))}(t,e,n)}function ah(t){t.extremes,t.min,t.max,t.plotBound,t.baseline;return t.categories?t.categories:t.ranges?t.ranges:t.stops?t.stops:(function(t,e){var n=nh(ad(t,e),e),a=t.extremes||t.logDomain;if(n[0]){var r=Ge(n[0]-(a[0]-e.config.extremes[0]),0);e.config.extremes[0]-=r}if(n[1]){var o=Ge(n[1]-(e.config.extremes[1]-a[1]),0);e.config.extremes[1]+=o}}(t,this),this.d3_scale.originalDomain="numeric"==this.config.dataType&&"y"==this.encode?this.config.extremes:this.config.originalDomain,this.d3_scale.originalDomain=this.d3_scale.originalDomain||t.correctionFactor1||this.config.extremes,this.d3_scale.outerPadding=this.config.outerPadding,this.d3_scale.correction=this.config.domain.outerPaddingCorrection,"time"==this.config.dataType&&(rh.call(this),this.d3_scale.correction=this.config.domain.outerPaddingCorrection),this.config.extremes)}function rh(){var t=this.d3_scale.originalDomain.map((function(t){return new Date(t)}));this.d3_scale.originalDomain=t}function oh(t,e,n){if(n.getAxesCount("y")>1){var a=e.allChartTypes;return t.seriesIndices.map((function(t){return a[t]})).some((function(t){return Cl(t)&&!_e.rangePlot.has(t)||t===Gt.area||t===Gt.stkdarea}))}return e.noofBarEnabledSeries&&!e.noofBoxplotEnabledSeries&&!e.noofBarRangeEnabledSeries||e.noofAreaEnabledSeries}function ih(t,e,n){return t+"-"+e+"-"+n}function lh(t){var e,n,a,r=t.chartObj,o=t.config;if(t.config.domain.hasDefaultMin&&(t.config.tempDomain=[0,t.config.tempDomain[1]],t.config.extremes=[0,t.config.extremes[1]]),"ordinal"==t.config.type){e=o.tempDomain||o.domain,n=j(o.tempRange);var i=Wt.getOuterPadding(n,o.domain.length,o.padding,o.outerPadding);a=b().domain(e).range(n).paddingInner(o.padding).paddingOuter(i)}else e=o.tempDomain,n=[0,r.plotarea[o.range.operators.plotBound.dimension]],a=Ph(r.dataset,t.encode,t.key)().domain(e).range(n);return a}wn.setComponent("dataLabel.applyFont",Nd),wn.setComponent("dataLabel.isDatalabelEnabled",Ud),hd.set("bubbleBound",(function(){return th.call.apply(th,[this].concat(Array.prototype.slice.call(arguments),["marker"]))})),hd.set("markerBound",(function(){return 0})),hd.set("labelBound",(function(){return th.call.apply(th,[this].concat(Array.prototype.slice.call(arguments),["label"]))})),ed("axis.evalLinearDomain",ah),pi.prototype.getMinMaxY=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=(this.chartObj.systemConf,this.dataset.getColumn("y",t)),o={},i=uc("y",this.chartObj.axes.rotated);o.plotBound={dimension:i==Kr||i==Jr?"width":"height",customPlotBound:this.chartObj.systemConf.chart,plotSize:this.chartObj.plotarea,defaultPlotSize:this.chartObj.plotarea,color:this.chartObj.imagePallete||this.chartObj.seriesColor,boundExtreme:0};var l=uh("y",t,this.chartObj,e,n,a,!0),s={type:"numeric",field:r,scaleType:r.scaleType,reverse:wa(this.yaxesData[t],{}).reversed,data:[],domain:{operators:l,evaluator:ah},range:{operators:o,evaluator:od}};this.chartObj.viewFlow&&this.chartObj.viewFlow.scales[r.id]&&Bu(s,this.chartObj.viewFlow.scales[r.id].conf);var c=new pd("y",t,s,this.chartObj),u=c._parseDomain();return this.yRange[t]||(this.yRange[t]=c.config.tempDomain),this.hasNegativeValue[t]=c.config.hasNegativeValue&&c.config.hasNegativeValue[t],u},pi.prototype.ZC_BAR_getRangeY=function(t){var e=this.yRange[t]||[];return j(E([e,[0]]))};var sh={label:function(t,e,n){var a=ih("label",t,e),r=n.dataObject.getEncode(t,e);return Pn.scaleCorrection||(t="time"==n.dataset.getColumn(t,e).datatype?"x":t),r&&Wu("preCalculation")(t,r.seriesData,n,!1,a)||[]},bubble:function(t,e,n){var a=ih("bubble",t,e),r=[],o=n.dataset,i=n.dataObject,l=i.getEncode(t,e).seriesData,s=pi.helpers;return i.isBubbleEnabled?(l.forEach((function(e,l){var c=e.disabled,u=s.getParsedYAxisOrder(e.yaxiscolumnorder),d=s.isCatNull(o,"x"),h=s.isCatNull(o,"y",u),f=function(t){return!(!t||t.isDummy||d(o.getX(t))||h(o.getY(t,u)))};(Pn.scaleCorrection?c||!Yi(Ui(n,null,l).value):c)||e.data.forEach((function(e){r.push({_type:"marker",data:e.filter(f),size:[function(t){return i.getXYvalue(null,null,null,null,null,t,"z")},0],position:function(e){return"x"===t?o.getX(e):o.getY(e,u)},scale:lh,key:a})}))})),r):r},marker:function(t,e,n){var a=ih("marker",t,e),r=[],o=u(rp(n));return r.push({_type:"marker",data:[1],size:o+0,position:0,key:a}),r}};function ch(t,e,n,a){var r=ih(t,e,n),o=a.cache.correction;return o[r]?[o[r]]:sh[t](e,n,a)}function uh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=arguments.length>8?arguments[8]:void 0;e=e||0;var c={},u=[],d=[],h=n.dataObject,f=ec(n,t,e,null,n.userdata),p=(h.hasNegativeValue,h.baseline),g="x"==t?h.xRange:h.yRange[e],v=n.dataset,m=(h.isPercentChart,h.isstacked()||h.isPercentChart),y=v.getDataType(t,e),b=v.getColumn(t,e),x=b[b.datatype],C=x&&x.subfunction,k=h.getEncode(t,e),w=Gn(n.systemConf,"chart.brush.".concat(t,"[").concat(e,"]"))&&o,_=tc(n,t,e),S=na(s);a=b.scaleType===Ju?0:wa(a,"x"==t?.05:n.datalabels.hasFixedPosition?1e-8:.05),l=wa(l,a);var O=dh(t,y,i,S,b.scaleType),A=hh(t,e,n,r,l);if(A.forEach((function(t){return O.remove(t)})),O.has("NodataExtremes")&&!k)return i?u.push(["NoData","NoData"]):u.push([0,0]),c.extremes=u,c;if(b.scaleType===Ju&&(a=0,na(_.logDomain)))return u.push(_.logDomain),c.logDomain=[_.logDomain],O.has("baseLine")&&(c.updateBaseValue={definedMin:c.min,basevalue:h.baseline[e],stacked:m,rangeCheck:!1}),O.has("logConstant")&&(c.logConstant={allowNonPositiveTicks:f.allowNonPositiveTicks}),c;if(O.has("brushExtremes")&&w){var T=[(w=n.systemConf.chart.brush[t][e]).minRange,w.maxRange];return u.push(T),c.extremes=u,c.updateBaseValue={definedMin:c.min,basevalue:h.baseline[e],stacked:m,rangeCheck:!0},c}if(c.baseline=p[e]=!0===fa(f,"baseline.show")?f.baseline.value:null,s)u.push(s),c.extremes=u;else if(g)u.push(g),c.extremes=u;else{if(O.has("waterfallProcessor")&&h.isWaterfallEnabled)u.push({_type:"waterfallProcessor"});else if(O.has("stackExtremes")&&m){var P=h.getStackingIndices(e);P.stackIndices.length&&u.push({_type:"stackExtremes",stackIndices:P.stackIndices,data:h.encodes.stack}),P.nonStackseriesIndices.length&&u.push({_type:"extremesByAccessor",indices:P.nonStackseriesIndices,data:P._nonStackData,accessor:function(t,e){var a=pi.helpers.getParsedYAxisOrder(h.processedseriesData[e].yaxiscolumnorder);return function(e){return"y"==t?n.dataset.getY(e,a):n.dataset.getX(e)}},isRangeType:function(t){return _e.rangePlot.has(h.allChartTypes[t])}})}else"x"==t?u.push({_type:"extremesByAccessor",data:h.processedseriesData,accessor:function(t){return function(t){return n.dataset.getX(t)}}}):u.push({_type:"extremesByEncode",seriesExtermes:h.seriesExtermes});if(O.has("threshold")){var E="x"==t?"chart.axes.".concat(t,"axis"):"chart.axes.".concat(t,"axis[").concat(e,"]"),L=wa(fa(n.userdata,E),{}),M=bd(L);M&&M.length&&u.push(M)}if(O.has("levelMarker")&&pi.helpers.hasLevelMarkerData(h,e)){var D=h.getLevelMarkerIndices(e);D.indices.length&&(u.push({_type:"extremesByData",data:h.getEncode("y",e).seriesData,indices:D.indices}),u.push([0,0])),(D.values.length||h.hasLevelMarker)&&(u.push(D.values),u.push([0,0]))}c.extremes=u}if(c.min=f.minRange,c.max=f.maxRange,O.has("baseLine")){var I=y==Eo&&oh(k,h,n);c.hasDefaultBase=I,c.updateBaseValue={definedMin:c.min,basevalue:h.baseline[e],stacked:m,rangeCheck:!1},c.hasDefaultBaseValue={}}if(O.has("correctionFactor")&&y==Po&&(c.correctionFactor1={_needCorrectionFactor:"x"==t||!(h.isPercentChart||h.hasLevelMarker||h.isWaterfallEnabled),correction:0}),O.has("subfunction")&&(c.subfunction={subfunction:C}),O.has("basevalue")&&(n.systemConf.chart.axes["".concat(t,"axis")].disableBaseValue||w||"clr"==t||(c.basevalue={metaConf:x})),O.has("bubbleBound")&&h.isBubbleEnabled&&Xn(f.minRange)&&Xn(f.maxRange)){var R=ch("bubble",t,e,n);d.push.apply(d,_toConsumableArray(R)),eh("bubble",R,c)}if(O.has("markerBound")){var z=ch("marker",t,e,n);d.push.apply(d,_toConsumableArray(z)),eh("marker",z,c)}if(O.has("extraCorrectionFactor")&&y==Po&&(c.extraCorrectionFactor={dataType:y,_needCorrectionFactor:!(h.isPercentChart||h.hasLevelMarker||h.isWaterfallEnabled),correction:a}),O.has("correctionFactor")&&"y"==t&&y!==Po&&(c.correctionFactor={dataType:y,_needCorrectionFactor:!(h.isPercentChart||h.hasLevelMarker||h.isWaterfallEnabled),correction:a}),O.has("fontBound")){var j=ch("label",t,e,n);d.push.apply(d,_toConsumableArray(j)),eh("label",j,c)}return O.has("correctionFactor")&&y==Po&&(c.correctionFactor={_needCorrectionFactor:!1,preCorrectionValue:!0,fontPreCorrection:!0}),O.has("correctionFactor")&&"x"==t&&y!==Po&&(c.correctionFactor={dataType:y,correction:l,_needCorrectionFactor:!0}),O.has("logConstant")&&(c.logConstant={allowNonPositiveTicks:f.allowNonPositiveTicks}),O.has("waterfallBound")&&h.isWaterfallEnabled&&(c.waterfallBound={mode:"domain"}),O.has("timeFormat")&&y==Po&&(c.timeFormat={}),O.has("extraCorrectionFactor")&&y==Eo&&(c.extraCorrectionFactor={},c.correctionFactor1={_needCorrectionFactor:!1,preCorrectionValue:!0,fontCorrectionFactor:!0}),c._correction=Pn.scaleCorrection?d:[],c}function dh(t,e,n,a,r){return e==Po?"x"==t?function(t,e,n){var a=["brushExtremes","seriesExtremes","threshold","min","max","correctionFactor","timeFormat"],r=["extraCorrectionFactor","bubbleBound","fontBound","markerBound","subfunction","basevalue"],o=e?a:n?r:E([a,r]);return t==Ju&&o.push("logConstant"),M(o)}(r,n,a):function(t,e,n){var a=["baseLine","NodataExtremes","brushExtremes","waterfallProcessor","stackExtremes","seriesExtremes","levelMarker","threshold","min","max","updateBaseValue","hasDefaultBaseValue","correctionFactor","waterfallBound","timeFormat"],r=["extraCorrectionFactor","basevalue","subfunction","bubbleBound","correctionFactor","fontBound","markerBound"],o=e?a:n?r:E([a,r]);return t==Ju&&o.push("logConstant"),M(o)}(r,n,a):"x"==t?function(t,e,n){var a=M(["brushExtremes","extremes","threshold","bubbleBound","markerBound","fontBound","correctionFactor"]);return e||a.add("extraCorrectionFactor"),n&&(a=M(["correctionFactor","extraCorrectionFactor"])),t==Ju&&a.add("logConstant"),a}(r,n,a):function(t,e,n){var a=M(["baseLine","NodataExtremes","brushExtremes","waterfallProcessor","stackExtremes","seriesExtremes","levelMarker","threshold","min","max","hasDefaultBase","updateBaseValue","hasDefaultBaseValue","bubbleBound","markerBound","correctionFactor","fontBound","waterfallBound"]);return n&&(a=M(["correctionFactor","extraCorrectionFactor"])),t==Ju&&a.add("logConstant"),a}(r,0,a)}function hh(t,e,n,a,r){var o=n.dataObject,i=n.dataset,l=ec(n,t,e,null,n.userdata),s=i.getDataType(t,e),c=i.getColumn(t,e),u=[];o.isBubbleEnabled&&Xn(l.minRange)&&Xn(l.maxRange)||u.push("bubbleBound"),pi.helpers.hasMarkerCorrection()&&s!==Po||u.push("markerBound");var d=!o.isPercentChart&&!(o.isBubbleEnabled&&!o.pieWithAxis)&&(o.isAxisCategory||o.isNonAxisMultiSeriesCategory)&&!(null!=l.minRange&&null!=l.maxRange);return(0===r&&c.scaleType!==Ju||"x"!=t&&("y"!=t||a)||!d)&&u.push("fontBound"),"y"===t&&o.isPercentChart&&o.isstacked()&&u.push("bubbleBound","markerBound","fontBound"),u}function fh(t,e){var n,a,r=t.systemConf,o=t.dataObject,i=o.isstacked(),l=o.noofBarEnabledSeries,s="y"===e;if(n=t.seriesdata.some((function(e,n){if(!e.disabled){var a=e.plotoptions;return Ud(Hd(r.chart.plot.plotoptions[t.chartTypes[n].name],a),t)}})),s&&l&&i&&!o.isStackedPercentChart){var c=o.allChartTypes,u=t.dataObject.filterEncode("stack",(function(t){return t.seriesIndices.some((function(t){return Cl(c[t])}))}));if(!u.length)return!1;var d=Qd(u[0]),h=r.chart.plot.plotoptions[t.chartTypes[d].name].datalabels.stackLabels||{};a=!!h&&h.show}return n||a}function ph(t){var e=t.systemConf;if(t.dataObject.totalnoofdatas>+e.canvas.intelligence.dataCount.datalabels)return!1;if(!0===fa(e.chart,"plot.datalabels.show"))return!0;for(var n=t.seriesdata,a=n.length;a--;){var r=e.chart.plot.plotoptions[t.chartTypes[a].name],o=r.datalabels;if(na(n[a].plotoptions)&&(o=Hd(r,n[a].plotoptions)),Ud(o,t))return!0}return!1}function gh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e="y"===t?e:0;var o={},i=[],l=uc(t,n.axes.rotated);if(o.plotBound={dimension:l==Kr||l==Jr?"width":"height",customPlotBound:n.systemConf.chart,plotSize:n.plotarea,defaultPlotSize:n.plotarea,polarConfig:r==ld?Qu(n,t):pn,color:n.imagePallete||n.seriesColor,boundExtreme:0},a&&(n.datalabels.moduleExists&&ph(n)||n.dataObject.isBubbleEnabled))if(n.dataObject.isBubbleEnabled){var s=ch("bubble",t,e,n);i.push.apply(i,_toConsumableArray(s)),eh("bubble",s,o)}else{s=ch("label",t,e,n);i.push.apply(i,_toConsumableArray(s)),eh("label",s,o)}return o._correction=Pn.scaleCorrection?i:[],o}function vh(t){var e=this.config.outerPadding,n=t.plotBound,a=Ze(n[1]-n[0])*e;if(Pn.scaleCorrection){var r=u(ad(t,this));a=r?Ge(a,r):a}else a+=function(t){var e=t.labelBound,n=void 0===e?[0]:e,a=t.bubbleBound,r=void 0===a?[0]:a;return u(n)||u(r)||0}(t);this.d3_scale.origRange=t.plotBound.slice(),this.d3_scale.outerPaddingPx=a;var o=n[0]<n[1],i=o?1:0;return n[o?0:1]+=a,n[i]-=a,n}function mh(t,e,n){var a=e.getZ(t),r=Fa(n.scales,(function(t){return"z-0"===t.id})),o=r.scale,i=r.config,l=r.schema.data.dataType,s=i.nullAs;return Xn(a)?na(s)?o(ol(a,{config:i,scale:o,columnKey:n.dataset.getColumnIdx("z")})):o(l===To?a:o.domain()[0]):o(a)}function yh(t,e){var n,a=t.datatype,r=t.point,o=t.chartObj,i=t.axisrotated,l=t.scaleObj,s=t.type,c=t.xidx,u=o.cache,d=u.brushDataDetails,h=d&&d[a].quadTree,f=o.eventHandler&&o.eventHandler.dataAccesor([r,0]),p=f&&"pane".concat(f.paneId()),g=o&&o.dataObject&&o.dataObject.flattenPoints,v=g&&g.get(p),m=o&&o.updating;if(d&&(u.brushDataDetails[a].scale=l,u.brushDataDetails[a].brushType=s,u.brushDataDetails[a].activeBrush=o.eventHandler.activeBrushComponent),d&&!h&&v||d&&m&&v){var y=wn.getComponent("searchMode.quadtree"),b=v.keys(),x=[];o.systemConf.chart.plot.events.enabled=void 0,b.map((function(t){var e=qn(v.get(t),(function(t){return!t.disabled()}),f.spliceIndices());x=x.concat(e[0]instanceof Array?E(e):e)})),(n=new y(x,!0,1/0,[o.plotarea.width,o.plotarea.height],null)).tree.x((function(t){var e=u.brushDataDetails[a].scale,n=na(t.yaxisOrder)?o.dataset.yidx(t.yaxisOrder):t.yColumnIndex,r=u.brushDataDetails[a].brushType,l="y"===r?t[n]:t[c];return i&&"x"===r||!i&&"y"===r?0:e(l)+(null!=e.bandwidth?e.bandwidth(l)/2:0)})).y((function(t){var e=u.brushDataDetails[a].scale,n=na(t.yaxisOrder)?o.dataset.yidx(t.yaxisOrder):t.yColumnIndex,r=u.brushDataDetails[a].brushType,l="y"===r?t[n]:t[c];return i&&"x"===r||!i&&"y"===r?e(l)+(null!=e.bandwidth?e.bandwidth(l)/2:0):0})).size(e),u.brushDataDetails[a].quadTree=n,u.brushDataDetails[a].data_sizePos=L(),h=n}return h&&h.find(i&&"x"===s||!i&&"y"===s?[0,r]:[r,0])||[]}function bh(t,e,n,a){for(var r,o,i,l,s,c,u,d,h=t.datatype,f=t.point,p=t.chartObj,g=t.ordinalRange,v=t.scaleObj,m=t.maxBandwidth,y=t.rangeBand,b=t.type,x=t.xidx,C=p.cache.brushDataDetails[h].data_sizePos,k=p.eventHandler.activeBrushComponent,w=0;w<e.length;w++){var _=e[w];r=p.dataset.yidx(_.yaxisOrder);var S="y"===b?_[r]:_[x],O=C.get(S);O&&"plot"!==k&&(n?O.pos<o&&(o=O.pos,i=O.size,l=S):O.pos>o&&(o=O.pos,i=O.size,l=S));var A=_._size||(y>m?m:y),T=v(S)+(y?y/2:0),P=(c=f,u=T,Math.max(c,u)-Math.min(c,u));(P<(s=Xn(s)?P:s)||Xn(o))&&(s=P,o=T,l=S),i=Xn(i)||A>=i?A:i}if((C.get(l)||"plot"===k||C.set(l,{pos:o,size:i}),na(o)&&na(i))&&(f>=(o-=i/2)&&f<=o+i))return"ordinal"===h?(g&&(d=v.domain().reduce((function(t,e,n){return t[e]=n,t}),{})),d[l]):n?o:a?o+i:f}function xh(t,e,n,a,r,o){var i="y"==n?a?t.x:t.y:a?t.y:t.x,l=uc(n,a)==$r,s=r?!l:l;return function(t,e,n,a,r,o){var i=O(n).left(e,t,0,a);return">"==r?i>0&&(!o||i<a)&&e[i]>t?i-1:i:"<"==r?i>0&&e[i]<t?i-1:i:i>0&&t>e[i-1]?i-1:i}(i,e,s?H:B,e.length-1,o,s)}function Ch(t,e,n,a,r){var o=Wt.getOuterPadding(t,e,n,a);return 2*(Xe(t[0],t[1])+r*o)}function kh(t,e,n,a,r,o,i,l){var s=0,c=r[0]<r[1],u=c?0:1,d=c?1:0;return s+=t.dataObject.extendOuterpadding(a,r,t.systemConf,o,l,e,n),s+=Ze(r[1]-r[0])*i,r[u]=r[u]+s,r[d]=r[d]-s,{range:r,outerPaddingPx:s}}function wh(t){return t.ordinalRange||(t.ordinalRange=t.domain().map((function(e){return t(e)})))}function _h(t){return t.actualRange||(t.actualRange=t.originalDomain&&t.originalDomain.map(t))}function Sh(t){var e=pi.helpers.getChartType(t.type||this.globalChartType,Eo);return!t.disabled&&Cl(e)}function Oh(t,e,n){if("x"===e)return ec(t,e,n,!1);if("clr"===e)return t.systemConf.legend.colorBand;if(t.dataObject.hierarchical){var a=bo(n,null,"y",t);return t.systemConf.chart.axes.yaxis[a]}return ec(t,e,n,!1)}function Ah(t,e,n){var a=t.chartTypes[0].name,r="dial"===a&&"y"===e||"web"===a&&"x"===e&&!t.dataObject.hierarchical;if(r){var o=t.dataObject.hierarchical;if(o)n>=o.pivotLayout.getRootNodeList("x"==e?"column":"row").getLeavesCount()&&(r=!1)}return r}function Th(t,e,n,a,r){var o=we.get(Lh(t)),i=t.plotarea,l="dial"===o&&"y"===e||"web"===o&&"x"===e&&!t.dataObject.hierarchical;if(l){var s=t.dataObject.hierarchical;if(s)r>=s.pivotLayout.getRootNodeList("x"==e?"column":"row").getLeavesCount()&&(l=!1)}return l?$u(t,e):"clr"===e?t.imagePallete||t.seriesColor:a?"bottom"===n||"top"==n?[is(t,"width",i),0]:[0,is(t,"height",i)]:"bottom"===n||"top"==n?[0,is(t,"width",i)]:[is(t,"height",i),0]}function Ph(t,e,n){return Eh(t.getColumn(e,n).scaleType||"linear")}function Eh(t){return"log"===t?S:"sqrt"===t?_:m}function Lh(t){var e=t.chartTypes[0].value;Ao(t)&&Do(t.dataObject).some((function(n){var a="".concat(n.row,"_").concat(n.column),r=Ui(t,a,0).value;if(Xi(t,r,"axis"))return e=r,!0}));return e}function Mh(t,e){return{vertical:Xa(wa(t.height,t.maxHeight,Ht.ticks.maxTickSizeRatio_Vert),e.height),horizontal:Xa(wa(t.width,t.maxWidth,Ht.ticks.maxTickSizeRatio_Hori),e.width)}}function Dh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"axis",n=null!=t?t["".concat(e,"format")]||t.format:null;return n&&"auto"===n.specifier}function Ih(t,e,n,a){var r=t*(2*on/360),o=2*on/360*(90-t);return"bottom"===a||"top"===a?{tickSpacing:Ze(n/Ke(r))+5,baseLen:0}:{tickSpacing:Ze(Ke(o)*n)+Ze(Qe(o)*n*tn(r))+5,baseLen:Ze(Qe(o)*e)}}function Rh(t,e,n,a){var r=t.getBoundingClientRect(),o=e.getBoundingClientRect();if(n){var i=e.getBBox(),l=Ih(n,i.width,i.height,a);return Ze(r.x-o.x)<=l.tickSpacing-5}return ml({x1:r.left,x2:r.left+r.width,y1:r.top,y2:r.top+r.height},{x1:o.left,x2:o.left+o.width,y1:o.top,y2:o.top+o.height})}function zh(t,e,n,a,r){return null==t?t:"wrapOnSpace"==e?t.split(" "):"wrapAll"==e?function(t,e,n,a){var r,o=t.split(/\s+/).reverse(),i=[],l=[],s=a;for(e=e;r=o.pop();)if(i.push(r),Dn.fontUtils.getTextWidth(i.join(" "))>e){if(i.length>1&&(i.pop(),l.pop(),l.push(i.join(" "))),s>n)return l;s+=a,i=[r],l.push(r)}else l.pop(),l.push(i.join(" "));return l}(t,n,a,r):t}function jh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t<0;if(n){if(0===t)return t;(t=Math.abs(t))<e&&(t+=(e-t)/e)}var r=Bh(Math.log(t)/Math.log(e),14);return a?-r:r}function Fh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t<0,r=Math.pow(e,t);return n&&((r=Math.pow(e,Math.abs(t)))<e&&(r=e*(r-1)/(e-1)),r=a?-r:r),Bh(r,12)}function Bh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;return parseFloat(t.toPrecision(e))}function Hh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2?arguments[2]:void 0,a=t<0;n&&(t=Ze(t));var r=Math.floor(jh(t,e,n),14);return a?-Math.pow(e,r):Math.pow(e,r)}ed("axis.evalOrdinalRange",vh),Wt.getScale=function(t,e,n,a,r,o,i,l,s){var c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];return function(n){var a,u,d,h=t.systemConf,f=o.getDataType(i,r),p=Oh(t,i,r),g=e.hierarchical,v=(na(p.minRange),na(p.maxRange),we.get(Lh(t))),m=h.chart.plot.plotoptions[v],y="dial"===v||"web"===v&&"x"===i,b="heatmap"===v,x="clr"===i&&Bi.isQuantileColorScale(t),C=o.getColumn(i,r),k=(c&&fa(h,"chart.brush.".concat(i,"[").concat(r,"]")),C.scaleType===Ju),w=Th(t,i,n,p.reversed,r),_=function(){if(y||b||"x"!=i||!t.dataObject.isAxisCategory)return 0;var n=e.noofBarEnabledSeries?.2:Ao(t)&&Object.keys(e.hierarchical.gridOptions).some((function(e){return Ys(t,e)}))?0:.9;return Jn(m.padding,n)}(),S=y||x||b||s||!t.dataObject.isAxisCategory&&!t.dataObject.isPolarAxisCategory&&!t.dataObject.isAxisCategory||k?0:"y"===i?Jn(p.outerPadding,t.datalabels.hasFixedPosition?1e-8:.05):null!=S?S:Jn(m.outerPadding,.02);if("clr"===i){var O,A;A=nd("color.domainParser")(i,r,h.legend,t),O=nd("color.rangeParser")(i,r,h.legend,t);var T={type:f,dataType:f,scaleType:f!=To&&p.ranges&&p.ranges.length?sd:f,field:C,reverse:p.reversed,data:[],domain:{operators:A,evaluator:nd("color.evalDomain")},range:{operators:O,evaluator:nd("color.evalRange")},padding:_,outerPadding:S};t.viewFlow&&t.viewFlow.scales[C.id]&&Bu(T,t.viewFlow.scales[C.id].conf),u=new pd(i,r,T,t).getScale()}switch(f){case"numeric":case"time":if("x"==i||"y"==i){var P,E={},L=(n=uc(i,t.axes.rotated),"time"==f?pn:"x"==i?0:S),M=y?ld:p.ranges&&p.ranges.length?sd:C.scaleType,D=Qu(t,i);E.plotBound={dimension:n==Kr||n==Jr?"width":"height",customPlotBound:{width:t.systemConf.chart.width,height:t.systemConf.chart.height},plotSize:t.plotarea,defaultPlotSize:t.plotarea,polarConfig:D,color:t.imagePallete||t.seriesColor,boundExtreme:0},P=uh(i,r,t,S,Oe,c,Oe,L,l);var I={dataType:f,orient:f==Po?t.axes.x.orient:n,type:f,scaleType:M,field:C,reverse:p.reversed,data:[],domain:{operators:P,evaluator:ah},range:{operators:E,evaluator:od},padding:_,outerPadding:S};C.scaleType===Ju&&(I.logBase=p.logBase),t.viewFlow&&t.viewFlow.scales[C.id]&&Bu(I,t.viewFlow.scales[C.id].conf),u=(z=new pd(i,r,I,t)).getScale(),"y"==i&&(e.hasNegativeValue[r]=z.config.hasNegativeValue&&z.config.hasNegativeValue[r])}_h(u),l&&f==Eo&&t.scroll&&t.scroll.scrollDomain&&(t.viewPortExtent=u.domain(),t.scroll.scrollDomain=t.viewPortExtent);break;case"ordinal":if(l)d=l;else if("clr"!==i){var R=e.getCategories(i,r,c);d=e.getDomain(R,i,!0)}if(_=1===(d="clr"==i?u.domain():d).length?0:_,"x"==i||"y"==i){M=Ah(t,i,r)?ld:p.ranges&&p.ranges.length?sd:C.scaleType,E=gh(i,r,t,S&&!s&&!b&&"clr"!==i&&!y,M),I={dataType:f,type:f,scaleType:M,field:C,reverse:p.reversed,data:[],domain:d,range:{operators:E,evaluator:vh},padding:_,outerPadding:S};t.viewFlow&&t.viewFlow.scales[C.id]&&Bu(I,t.viewFlow.scales[C.id].conf);var z=new pd(i,r,I,t);"clr"!==i&&(z.d3_scale.paddingInner=_,z.d3_scale.paddingOuter=0),u=z.getScale()}break;case"ordinalNonLinear":R=e.getCategories(i,r,c);d=l||e.getDomain(R,i);var j,F=g.pivotLayout.getRootNodeList("row"),B=g.pivotLayout.getRootNodeList("column"),H=[w[0],w[1]];"x"==i&&B.getCount()?j=B.getRangesForBranch(r-B.getLeavesCount()):"y"==i&&F.getCount()&&(j=F.getRangesForBranch(r-F.getLeavesCount())),(a=Uu().domain(d).range(w).rangeBands(j)).origRange=H,u=a}if(t.viewFlow){var N=ac(t,0,n,r);N&&N.scale&&(N.scale.component=u)}return u.outerPadding=S,u.padding=_,u}(a)},Wt.setRowScale=function(t,e,n){var a,r,o,i=t.dataObject.hierarchical,l=t.axes.y,s=t.dataObject,c=t.plotarea,u=t.dataset;if(i&&(r=(a=i.pivotLayout.getRootNodeList("row")).getCount(),o=a.hasMultiCluster()),o||r){i.pivotLayout.setRanges("row");var d=r||0,h=a.getClustersCount();if(d||h){for(var f=d?a.getDomainForBranch(0).length:1,p=a.getLeavesCount(),g=0;g<d;g++){l.branches[g]||(l.branches[g]={});var v=a.getDomainForBranch(g),m=s.getDomain(v,"y",!0);l.branches[g].scale=Wt.getScale(t,s,c,l.orient,g+p,u,"y",m)}for(var y=new Array(h),b=0;b<h;b++)y[b]=Wt.getScale(t,s,c,l.orient,b,u,"y"),a.clusters[b].domain=y[b].domain();d&&l.branches[0].scale;for(var x=0,C=0,k=0;k<f;k++)for(b=0;b<h;b++){var w=Oh(t,"y",b),_=y[b],S=[x+a.leafSize,x];x+=a.leafSize;var O=n?.1:0,A=Ze(S[1]-S[0])*O;S=[S[0]-A,S[1]+A],(t.axes.rotated&&!w.reversed||!t.axes.rotated&&w.reversed)&&(S=S.reverse()),l.leaves[C]||(l.leaves[C]={}),l.leaves[C].scale=_.copy().range(S),l.leaves[C].scale.origRange=S,l.leaves[C].parentBranchIdx=k,C++}return t.axes.y=l,l.leaves.concat(l.branches)}}},Wt.setColumnScale=function(t,e){var n=t.dataObject,a=n.hierarchical,r=t.viewPortExtent,o=t.axes.x,i=t.dataObject,l=t.plotarea,s=t.dataset,c=Wt.getScale,u=s.getDataType("x");if(o.rangeScale=o.scale.copy(),o.rangeScale.outerPaddingPx=o.scale.outerPaddingPx,a.groupByDiscreteTime){var d=n.getCategories("x"),h=n.getDomain(d,"x");o.rangeScale.domain(h)}var f=a.pivotLayout.getRootNodeList("column"),p=f.getCount(),g=p||u==Po||u==Eo?f.getDomainForCluster(0):i.xaxisData.categories||f.getDomainForCluster(0),v=p||0;h=i.getDomain(g,"x",!0);if(u!=Po&&u!=Eo||(h=p?j(h):o.scale.domain()),t.axes.x.leafScaleGrid=a.categoryTree?Wt.getScale(t,i,l,o.orient,null,s,"x",h):t.axes.x.scale,p){var m=a.pivotLayout.getRootNodeList("column");if(t.systemConf.facets&&t.systemConf.facets.config&&t.systemConf.facets.config.columns.leafSize){t.dataObject.hierarchical.getDynamicColumnSize(t.axes.x.leafScaleGrid);var y=m.getDynamicDomainForCluster(0),b=Wt.getScale(t,i,l,o.orient,null,s,"x",tt(y.length)),x=a.pivotLayout.setRangesForLeaf("column",b),C=Uu().domain(h).range(b.origRange).rangeBands(x).rangeBand(b.bandwidth());C.origRange=b.origRange,C.outerPaddingPx=o.scale.outerPaddingPx,o.rangeScale=C,o.rangeScale.outerPaddingPx=C.outerPaddingPx,o.scale=C,o.scale.outerPaddingPx=C.outerPaddingPx,t.axes.x.leafScaleGrid=C,t.axes.x.leafScaleGrid.outerPaddingPx=C.outerPaddingPx}var k=a.setScaleForRange(t.axes.x.rangeScale);a.pivotLayout.setRanges("column",k);for(var w=0;w<v;w++)o.levels[w]||(o.levels[w]={}),o.levels[w].scale=c(t,n,l,o.orient,w+f.getLeavesCount(),s,"x",r,null)}var _=t.systemConf.chart.axes.xaxis.splitLeaves,S=t.systemConf.chart.axes.xaxis.reversed,O=f.getLeavesCount();if(_&&p){for(var A=t.systemConf.chart.axes.xaxis.uniformLeafScale,T=u==To?f.getUniqueDomainForCluster(0):null,P=Wt.getScale(t,i,l,o.orient,null,s,"x",T),E=(p&&o.levels[0].scale,"top"==o.orient||"bottom"==o.orient),L=E?1:-1,M=E?0:l.height,D=0,I=0;I<O;I++){var R=u==To?f.getDomainForClusterSet(0,I):null,z=A?f.leafSize:f.nonUniformLeafSize[I],F=[M,M+L*z];M+=L*z;var B=.1*Ze(F[1]-F[0]),H=E?1:-1;F=[F[0]+H*B,F[1]-H*B],S&&(F=F.reverse()),o.leaves[D]||(o.leaves[D]={});var N=A?P:Wt.getScale(t,i,l,o.orient,null,s,"x",R);o.leaves[D].scale=N.copy().range(F),o.leaves[D].scale.origRange=F,o.leaves[D].parentBranchIdx=I;var W=P.domain(),V=P.padding,Y=P.outerPadding,U=kh(t,"x",0,W,F,V,Y,Wt.getOuterPadding(F,W.length,V,Y));o.leaves[D].scale.outerPaddingPx=U.outerPaddingPx||0,D++}return o.leaves.concat(o.levels)}return[{scale:t.axes.x.leafScaleGrid}].concat(o.levels)},Wt.getEventScale=function(t,e,n,a,r,o,i){o.getDataType(i,r);return Wt.getScale(t,e,n,a,r,o,i)},Wt.constructor=function(t,e,n,a){var r,o=Wt.getEventScale;n=wa(n,Wt.getScale),a=wa(a,o);switch(e){case"left":r=t.axes.rotated?i():l();break;case"bottom":r=t.axes.rotated?l():i()}return r;function i(){var e=t.dataObject.hierarchical,r=t.viewPortExtent,o=t.axes.x,i=t.dataObject,l=t.plotarea,s=t.dataset;return t.axes.x.scale=n(t,i,l,o.orient,0,s,"x",r),t.axes.x.eventscale=null==a?t.axes.x.scale:a(t,i,l,o.orient,null,s,"x"),na(e)?Wt.setColumnScale(t,"x"):[{scale:t.axes.x.scale}].concat(o.levels)}function l(){for(var e=t.dataObject.hierarchical,r=e&&e.categoryTree?1:t.axes.y.count,o=t.axes.y,i=0;i<r;i++)o.groups[i]||(o.groups[i]={}),o.groups[i].scale=n(t,t.dataObject,t.plotarea,t.axes.y.orient,i,t.dataset,"y"),o.groups[i].eventscale=null==a?o.groups[i].scale:a(t,t.dataObject,t.plotarea,t.axes.y.orient,i,t.dataset,"y");if(e&&e.categoryTree){var l=e.pivotLayout.getRootNodeList("row"),s=l.getCount(),c=l.hasMultiCluster();return s||c?(t.axes.rotated&&Wt.setRowScale(t,"row",!0),s?t.axes.y.leaves.concat(t.axes.y.branches):t.axes.y.leaves):t.axes.y.groups}return t.axes.y.groups}},Wt.invert=function(t,e,n,a,r,o,i,l,s){switch(t){case"numeric":case"time":var c="y"==r?a?e.x:e.y:a?e.y:e.x,u={chartObj:s,axisrotated:s.axes.axisrotated,datatype:t,point:c,scaleObj:n,type:r,xidx:s.systemConf.metadata.columns[s.systemConf.metadata.axes.x[0]].dataindex};(M=(x=s.cache).brushDataDetails&&x.brushDataDetails[t])||(x.brushDataDetails={},x.brushDataDetails[t]={});var d=function(e){var n=na(e._size)?e:e._data(),a="scroll"===x.brushDataDetails[t].activeBrush?s.overview&&s.overview.destroying?s:s.overview||s:s;return a.scales.length?mh(e,s.dataset,a):n._size},h=l&&l.selection&&l.selection[0]===c,f=l&&l.selection&&l.selection[1]===c,p=s.eventHandler.oldBrushComponent,g=s.eventHandler.activeBrushComponent,v="plot"===p&&"scroll"===g||null===p&&null===g,m=s.scroll&&s.scroll.overviewEnabled;if(!v&&("plot"===g||m))if((D=yh(u,d)).length){var y=bh(u,D,h,f);c=na(y)?y:c}b=n.invert(c);break;case"ordinal":var b,x,C=wh(n),k=n.bandwidth(),w=n.maxBandWidth1,_=w?Xe(k,w):k,S=C.length>1?Ze(C[1]-C[0]):0,O=Ze(S-_),A=w&&w<k?(k-_)/2:0,T=a&&!o?1:-1,P=a&&!o?_:0,E=a&&!o?"<":">",L=0,M=(x=s.cache).brushDataDetails&&x.brushDataDetails.ordinal;w&&k>w&&(L=(k-w)/2),C=C.map((function(t){return l?t+L:t+P+T*O/2})),M||(x.brushDataDetails={},x.brushDataDetails[t]={});var D;c="y"==r?a?e.x:e.y:a?e.y:e.x,u={chartObj:s,axisrotated:s.axes.rotated,axisReversed:o,datatype:t,point:c,ordinalRange:C,maxBandwidth:w,rangeBand:k,scaleObj:n,type:r,xidx:s.systemConf.metadata.columns[s.systemConf.metadata.axes.x[0]].dataindex},d=function(e){if(e._width){var n=x.brushDataDetails[t].scale;return n.bandwidth()>n.maxBandWidth1?n.maxBandWidth1:n.bandwidth()}var a=na(e._size)?e:e._data(),r="scroll"===x.brushDataDetails[t].activeBrush?s.overview&&s.overview.destroying?s:s.overview||s:s;return r.scales.length?mh(e,s.dataset,r):a._size},h=l&&l.selection&&l.selection[0]===c,f=l&&l.selection&&l.selection[1]===c,p=s.eventHandler.oldBrushComponent,g=s.eventHandler.activeBrushComponent;if(!(v="plot"===p&&"scroll"===g||null===p&&null===g)&&(p&&p.length||g&&g.length))(D=yh(u,d)).length&&(b=bh(u,D,h,f));var I=s&&s.cache&&s.cache.brushDataDetails[t].quadTree;if(l&&l.quadTreePosition&&I&&(l.quadTreePosition[h?0:1]=b),na(b))break;(p&&p.length||g&&g.length)&&(C=wh(n).map((function(t){return t+=n.bandwidth()/2}))),b=xh(e,C,r,a,o,E);var R=n.ordinalRange[b]+A;i&&!ea(c,[R,R+_])&&(b=null),l&&(b=function(t,e,n,a,r){var o=r.axisReversed,i=r.axisrotated,l=r.type,s=r.point,c=e[t],u=s,d=function(t,n){return na(e[n])?n:t};n?"x"===l&&(i&&!o||!i&&o)||"y"===l&&(!i&&!o||i&&o)?u>c&&(t=d(t,--t)):u>c&&(t=d(t,++t)):a&&("x"===l&&(i&&!o||!i&&o)||"y"===l&&(!i&&!o||i&&o)?u<c&&(t=d(t,++t)):u<c&&(t=d(t,--t)));return t}(b,C,h,f,u))}return b},Wt.ordinalSubInvert=function(t,e,n,a,r,o,i){var l=n.bandwidth(),s=n.range(),c=a.ordinalRange,u=n.domain(),d=s[1]-s[0]-u.length*l;return xh(t,u.map((function(t,n){return c[e]+n*(l+d)})),o,r,i)},Wt.barBandwidth=function(t){var e=t.systemConf,n=t.dataObject,a=Lh(t),r=t.dataset.seriesTypes,o=n.barChartType||(n.noofBarEnabledSeries?r.has(Gt.stkdbar)?Gt.stkdbar:r.has(Gt.bar)?Gt.bar:r.has(Gt.bullet)?Gt.bullet:r.has(Gt.waterfall)?Gt.waterfall:a:a);n.barChartType=o;var i,l,s=ac(t,0,t.axes.x.orient,0);if(s&&s.scale&&(i=s.scale.conf.subBand),n.isstacked(o)){var c=n.getEncode("stack");l=n.categoryHierarchy?1:nr(c).filter((function(t){return Sh.call(n,t.seriesData[0])})).length||1}else l=n.hierarchical&&n.hierarchical.pivotLayout.getRootNodeList("row").hasMultiCluster()?1:wa(i,function(t){var e=t.dataObject;if(Ao(t)&&e.isCombinationalChart){var n=Do(t.dataObject);return u(n,(function(t){return t.data.reduce((function(t,n){return t+(Sh.call(e,n.node)?1:0)}),0)}))}return A(t.seriesdata.map((function(t){if(Sh.call(e,t))return t.data.length})))}(t));var d=we.get(a),h=a==Gt.bullet,f=e.chart.plot.border,p=!0===f.show?f.size:0,g=("gantt"==d||"bullet"==d||"bar"==d||"waterfall"==d||"boxplot"==d||"barrange"==d)&&e.chart.plot.plotoptions[d].padding||.2,v=1==l?0:("bar"==d||"gantt"==d||"waterfall"==d||"boxplot"==d||"barrange"==d)&&e.chart.plot.plotoptions[d].interPadding||0,m=e.chart.plot.plotoptions[d].outerPadding;m=null!=m&&""!==m?m:.02;var y,x,C=t.axes.x.scale.domain().length,k=t.axes.rotated?[is(t,"height",t.plotarea)-p,p]:[p,is(t,"width",t.plotarea)-p];m=Wt.getOuterPadding(k,C,g,m),t.barscale1=y=t.axes.x.leaves.length?t.axes.x.leaves[0].scale:t.axes.x.scale,t.barscale2=x=b().domain(tt(l)).range([0,y.bandwidth()]).paddingInner(v);var w=$n(e.chart.plot.plotoptions[d].maxBandWidth,y,t);w=w<0?null:w;var _=n.noofBarEnabledSeries&&!h?w||y.bandwidth():200,S=$n(e.chart.plot.plotoptions[we.get(o||a)].maxBandWidth,y,t);if(S=S<0?null:S,y.maxBandWidth=l*w,y.maxBandWidth1=l*S,!h&&x.bandwidth()>_){var O=(y.bandwidth()-l*_)/2;x.range([O,y.bandwidth()-O]).paddingInner(v)}return Wt.outspace=x.range()[0],[y,x]},Wt.getOuterPadding=function(t,e,n,a){var r=Ze(t[1]-t[0]),o=a*r;return o/((r-2*o)/(e-n+0))},Wt.getOrdinalOuterPadding=function(t,e,n,a){return a*Ze(t[1]-t[0])/2},Wt.getContinuousRangeBand=function(t,e,n){var a=t.range(),r=t(e[0]),o=n&&e[n]?t(e[n]):r,i=n&&e[n+1]?t(e[n+1]):t(e[1]||e[0]),l=1==e.length?2*(r-(r-a[0])/2):i-o;return{outerPaddingInPixel:(l<0?-1:1)*Xe(Ze(r-a[0]),Ze(l/2)),rangeBand:l/2}},Wt.getDiscreteRangeBand=function(t){var e=t.bandwidth(),n=t.outerPaddingPx+e/2,a=wh(t),r=e/2+(t.domain().length>1?a[1]-a[0]-e:0)/2;return{outerPaddingInPixel:Xe(n,r),rangeBand:r}},Wt._getDiscreteRangeBand=function(t,e){var n,a=t.bandwidth(),r=t.outerPaddingPx,o=wh(t),i=ua(o)&&o.length>1,l=wa(e,0);i&&l==o.length-1?(n=l,l-=1):n=l+1;var s=i?(o[n]-(o[l]+a))/2:0;return{outerPaddingInPixel:Xe(r,s),rangeBand:s}},Wt.getRangeBand=function(t,e,n){return t.bandwidth?Wt.getDiscreteRangeBand(t):Wt.getContinuousRangeBand(t,e,n)},wn.setComponent("logUtils.logBase",jh),wn.setComponent("logUtils.logArgument",Fh),wn.setComponent("logUtils.fixFloatingPoint",Bh),wn.setComponent("logUtils.getMagnitude",Hh);function Nh(t,e,n,a,r,o,i,l,s,c,u,d,h,f,p){var g,v,m,y,b=r.minRange,x=r.maxRange,C=r.interval,k=r.logBase,w=void 0===k?10:k,_=r.outerPadding,S=r.tickCount,O=r.minorGrid||{},A=r.subtickmark||{},T=!0===O.show,P=!1!==r.allowNonPositiveTicks,E=O.count,L=O.interval,M=T?wa(E,A.count):A.count,D=T?wa(L,A.interval):A.interval,I=T||M>0||na(D),R=function(t){return Bh(Fh(t,w,P),12)},z=_slicedToArray(t,2),F=z[0],B=z[1],H=_slicedToArray(n,2),N=H[0],W=H[1],V=a&&!na(b)?wa(_,.05):0,Y=a&&!na(x)?wa(_,.05):0,U=wa(S,e/70),G=[],X=F===B;!na(S)&&C||(C=Oe),S<4&&(g=S,U=S=5);var Z,q=jh(F,w,P),$=jh(B,w,P),Q=$-q||1;if((q-=Q*V)===($+=Q*Y)||0===p[0]&&0===p[1])return{tickValues:n,minorTickValues:[]};na(d)&&(q<0||$<0)&&P&&(q<d&&N>=d?q=d:$>d&&W<=d&&($=d)),v={numberMin:F,numberMax:B,userTickCount:S,tickCount:U,logMin:q,logMax:$,forceUserTickCount:g,base:w,allowNonPositiveTicks:P,axisSize:e,tickMultiples:r.tickMultiples},((Z=qe(w||10,C))===1/0||Z===-1/0)&&(Be.warn("Log axis interval ".concat(C," is too large. Switching to the default interval.")),C=null),(m=Wh(v,wa(C,($-q)/Math.max(U-1,1)),l,c,o,s,i,u)).slice(0),y=j(m),na(b)&&(y[0]=b,m=m.filter((function(t){return t>=F}))),na(x)&&(y[1]=x,m=m.filter((function(t){return t<=B})));var K=h(m),J=!0;if(K.length!==m.length&&(m=K,J=!1),F=R(q),B=R($),!na(S)&&!na(g)&&!na(C)&&J&&!X&&m.length>3){var tt=_slicedToArray(y,2),et=tt[0],nt=tt[1],at=Hh(F,w,P),rt=Hh(B,w,P),ot=F-Ze(at)/10,it=B+Ze(rt)/10,lt=m.map(o),st=lt[lt.length-1]-lt[lt.length-2],ct=o(B),ut=dr(lt[lt.length-1]-ct,st),dt=lt[1]-lt[0],ht=dr(o(F)-lt[0],dt);f?(y=t,m=m.filter((function(t){return t>=p[0]&&t<=p[1]}))):(ut>40||ht>40)&&(ut>40&&it<nt&&(y[1]=it),ht>40&&ot>et&&(y[0]=ot),m=m.filter((function(t){return t>=y[0]&&t<=y[1]})))}else na(v.useDefaultLogDomain)&&(m.every((function(t){return t>F}))&&(y[0]=F),m.every((function(t){return t<B}))&&(y[1]=B));return I&&!X&&(G=Vh(v,m,y,M,D)),{tickValues:m,minorTickValues:G,logDomain:y}}function Wh(t,e,n,a,r,o,i,l,s){t.interval=e;var c,u=t.base,d=t.allowNonPositiveTicks,h=t.tickCount,f=(t.axisSize,Yh(t,s).map((function(t){return Bh(Fh(t,u,d),12)}))),p=j(f);if((f=M(f).values().map(Number).sort(B),!s)&&(c=o(f),r.domain(p),f.length>h&&"auto"===l&&(l=45),function(t){var e=[],n=!1;return t.forEach((function(t,a){n||e.length&&(n=e.some((function(e){return a=e,(n=t).x<a.x+a.width&&n.x+n.width>a.x&&n.y<a.y+a.height&&n.height+n.y>a.y;var n,a})))||e.push(t)})),n}(f.map((function(t,e){var o,s,u=0,d=0;return"top"===a||"bottom"===a?u=r(t):d=r(t),_objectSpread(_objectSpread({},(o=c[e],{width:Kh("width",s=Rr(o,null,null,n),i,l,n.fontSize,a),height:Kh("height",s,i,l,n.fontSize,a)})),{},{x:u,y:d,tick:c[e]})})))))return Wh(t,1.5*e,n,a,r,o,i);return f}function Vh(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"auto",o=[],i=_slicedToArray(n,2),l=i[0],s=i[1],c="auto"===r?t.interval/5:r;if(a>0)e.forEach((function(t,e,n){if(e){var r=Xe(n[e-1],t),i=Ge(n[e-1],t),l=tt(r,i,(i-r)/(a+1));o=[].concat(_toConsumableArray(o),_toConsumableArray(l))}}));else{var u=t,d=u.base,h=u.allowNonPositiveTicks,f=function(t){return Bh(Fh(t,d,h),12)};(t=_objectSpread({},t)).interval=c,t.isMinorGrid=!0,e.forEach((function(n,a){if(a){t.logMin=jh(e[a-1],d,h),t.logMax=jh(e[a],d,h);var r=Yh(t,!0);o=[].concat(_toConsumableArray(o),_toConsumableArray(r))}})),o=o.map(f)}return o.filter((function(t){return!qa(e,t)&&t>=l&&t<=s}))}function Yh(t,e){var n,a=t.logMin,r=t.logMax,o=t.tickCount,i=t.interval,l=t.base,s=t.allowNonPositiveTicks,c=t.userTickCount,u=t.isMinorGrid,d=t.tickMultiples,h=!1;if(i>=.5)n=Xh(a,r,i=Math.round(i));else if(i>=.1)h=!0,n=Uh(a,r,i,l,s,u);else{var f=Fh(a,l,s),p=Fh(r,l,s),g=(p-f)/o,v=g>1?Hh(g,l,s):Hh(g,l),m=d||[1,2,2.5,5,10];c>0?(n=of([f,p],o),t.useDefaultLogDomain=!0):n=Xh(f,p,g=wa(t.autoSubTickInterval,ef(g,v,m))),n.length>1e4&&r-a<.1&&(n=of([f,p],o),t.useDefaultLogDomain=!0),n=n.map((function(t){return jh(t,l,s)})),e||(t.autoSubTickInterval=g/5)}return t.interval=i,t.logMin=n[0],t.logMax=n[n.length-1],!e&&t.userTickCount>0&&n.length!==t.userTickCount&&(t.extent=t.extent||j(n),n=Gh(n,t,h),n=[].concat(_toConsumableArray(n),_toConsumableArray(t.extent))),n}function Uh(t,e,n,a,r,o){var i,l,s,c=Ye(t),u=Ue(e),d=[],h=!1,f=[];i=n>.3?[1,2,4]:n>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];for(var p=c;p<=u+1&&!s;p++)for(var g=0;g<i.length&&!s;g++){var v=void 0,m=!0;o&&r&&p<0?(v=Bh(Fh(p+1,a,r))*i[g],m=!1):v=Bh(Fh(p,a,r))*i[g],(l=jh(v,a,r))>=c&&l<=u&&(d.push(l),f.push(v)),m&&l>=e&&(s=!0)}if(f.some((function(t){return t>=0&&t<=a}))){var y=i.map((function(t){return jh(t,a,r)}));d=d.concat(y),h=!0}if(f.some((function(t){return t<=0&&t>=-a}))){var b=i.map((function(t){return-jh(t,a,r)}));d=d.concat(b),h=!0}h&&(d=d.filter((function(t){return t>=c&&t<=u}))),d.sort(B);for(var x=null,C=0;C<d.length;C++){var k=d[C];if(k>t)break;x=k}return na(x)&&(d=d.splice(d.lastIndexOf(x))),d}function Gh(t,e,n){var a=e.interval,r=e.tickCount,o=e.forceUserTickCount,i=e.logMin,l=(e.logMax,e.base),s=e.allowNonPositiveTicks,c=e.extent,u=t&&t.length,d=function(e){var n=Fh(Bh(-1===e?t[t.length-1]+a:t[0]-a),l,s),r=Hh(n,l,s);return jh(Bh(-1===e?Math.ceil(n/r)*r:Math.floor(n/r)*r),l,s)};if(u<r)for(;t.length<r;)t.length%2||0===i?n?t.push(d(-1)):t.push(Bh(t[t.length-1]+a)):n?t.unshift(Bh(d(1))):t.unshift(Bh(t[0]-a));else u>r&&(t=Zh(t,r));if(na(o)&&t.length!==o){var h=_slicedToArray(j(t),2),f=h[0],p=h[1],g=t[Math.round(t.length/2)];t=2===o?[f,p]:[f,g,p],e.forceUserTickCount=null}return t=t.filter((function(t){return t>=c[0]&&t<=c[1]})),t}function Xh(t,e,n){var a=Bh(Math.floor(t/n)*n),r=Bh(Math.ceil(e/n)*n);return tt(a,r+n/2,n)}function Zh(t,e,n,a){var r=t.length;e=Ve(e),n=n||Ue(r/Ze(e));for(var o=0,i=[],l=a?[]:null,s=a?[]:null,c=!!a&&na(t[0].index);o<r;)a?c?(i.push(t[o].value),l.push(t[o].index),s.push(t[o])):(i.push(t[o]),l.push(o),s.push({value:t[o],index:o})):i.push(t[o]),o+=n;return a?{nodes:s,ticks:i,indices:l}:i}function qh(t,e,n,a,r,o){var i=[],l=[],s=[],c={data:[n]};return n.columnindex=wa(n.columnindex,r),t.forEach((function(t,n){var r=$n(e.showAs,t,e,c,a,n,o),u=[],d=[];if(ua(r)?(i.push(u),l.push(d)):(u=i,d=l),s.push(r),na(r)){var h=Tc(r),f=Pc(h,"tspan"),p=Pc(h,"image,img");f.length?f.forEach((function(t){u.push(t.textContent.trim());var e=t.style||{},n=t.attributes||{};d.push({fontSize:e.fontSize&&parseFloat(e.fontSize),fontFamily:e.fontFamily,fontStyle:e.fontStyle,fontWeight:e.fontWeight,x:n.x,y:n.y,dy:n.dy})})):p.length||u.push(r),p.length&&Zn(h.querySelectorAll("image,img")).forEach((function(t){t.style,t.attributes;u.push({width:+t.getAttribute("width"),height:+t.getAttribute("height")}),d.push({y:t.getAttribute("y"),dy:t.getAttribute("dy")})})),h=null}})),{tickValues:i,styles:l,userRawTicks:s}}function $h(t,e,n,a,r,o,i){He.save(),He.font="".concat(n,"px ").concat(a);var l,s,c,u=0,d=null,h=null;r=wa(r,[]),na(e)||(e=[]);return t.forEach((function(t,f){var p=Rr(t,n,a,r[f]),g=p.width;o&&(g=p.width*p.height),i&&!s&&(s=-1!=t.indexOf(" ")),g>u&&(u=g,d=t,h=e[f],l=r[f],c=f)})),He.restore(),{actualVal:h,formattedVal:d,style:l,index:c,hasWhiteSpace:s}}function Qh(t,e,n){return"rotate(".concat(t," ").concat(e||0," ").concat(n||0,")")}function Kh(t,e,n,a,r,o){return"height"===t?Math.abs(r+n.top+n.bottom):a>0?Ih(a,e.width,r,o).tickSpacing+n.left+n.right:e.width+n.left+n.right}function Jh(t,e,n,a,r,o){var i=n.dataObject,l=e.minmaxlabels||{};if(!0===l.show){var s=Wt.getScale(n,i,n.plotarea,o,r,n.dataset,a).domain();Jn(l.excludeIntervals,!0)?t=s:(s[0]!==t[0]&&t.splice(0,0,s[0]),s[1]!==t[t.length-1]&&t.push(s[1]))}return t}function tf(t,e,n,a){var r,o,i=[1,2,5,10],l=i.length,s=t+e/2;s=+s.toFixed(12);for(var c=0;c<l;c++){var u,d=n/i[c],h=Ze(s-(u=t%d?t-t%d+d:t));(h<r||null==r)&&(r=h,o=u)}if(null==o||o<t){var f=Ye(Je(a)/an);f<0&&(o=+t.toFixed(Ze(Xe(0,f)))),o=t}return o=o>t?o:t}function ef(t,e,n,a){var r,o,i=null,l=e;n=n||[1,1.2,1.5,1.75,1.8,1.85,1.9,1.95,2,2.2,2.5,3,3.5,4,4.5,5,6,7,8,9,10];for(var s=0;s<n.length;s++)o=n[s]*e,(!a||"integer"==a&&o%1==0)&&(r=Ze(t-o))<(i=null==i?r:i)&&o<=t&&(i=r,l=o);return l}wn.setComponent("logTicks.getLogTickValues",Wh),wn.setComponent("logTicks.getMinorTickValues",Vh),wn.setComponent("logTicks.getLogTickExponents",Yh),wn.setComponent("logTicks.getIntermediateLogTickExponents",Uh),wn.setComponent("logTicks.getTickValuesByUserTickCount",Gh),wn.setComponent("logTicks.getNiceLinearTicks",Xh);var nf=function(t,e,n,a){this.axis=t,this.config=t.label,this.axisRect=e.bound,this.parentNode=a.isD3Selection?a:l(a),this.orient=n,this.systemConfig=e.systemConf,this.chart=e.chartObj,this.axisType=e.type,this.order=e.axisOrder,this.plotRect=e.plotRect,this.show=!e.hide,this.tickObj=e.tickObj,this.show?this.add():this.element=dc(this.parentNode,"text",[],".","class","axislabel")};nf.prototype={add:function(){var t=this,e=Wo({},t.config.text,"ordinal",this.chart,"axis"),n=Oo(this.axisType,this.order,this.orient,this.chart,this.plotRect);t.group=dc(t.parentNode,"g",[1],".","class","axislabelgroup"),t.element=dc(t.group,"text",[1],".","class","axislabel"),t.text=t.config.text,t.element.text(e),t.rect=null,t.transformLabel(pn,n)},remove:function(){var t=this;t.rect=null,t.element=dc(t.parentNode,"text",[],".","class","axislabel")},setStyles:function(){var t=this,e=t.systemConfig;vc(t.element,[t.config,e.chart,e.canvas,wr])},getBBox:function(){var t,e=this;if(!na(e.rect)){if(!e.element.isD3Selection||e.element.empty()||e.parentNode.style("display")===dn)return(t={}).x=t.y=t.width=t.height=0,t;e.rect=Bn(e.element)}return e.rect},transformLabel:function(t,e,n){var a=this;if(!0!==a.show)return a.remove();if(a.element.empty()&&!0===a.show||a.text!==a.config.text)return a.add();var r=Wo({},a.config.text,"ordinal",this.chart,"axis");a.element.text(r),a.setStyles();var o,i,l=a.systemConfig,s=wa(n,a.orient),c={top:0,right:90,bottom:0,left:270}[s],u=wa(t,this.axisRect),d=wa(e,this.plotRect),h=a.axis.ticklabel,f=a.config,p=$s(h),g=$s(f),v=parseFloat(Dn.getVal(Kn([a.config,l.chart,l.canvas,wr],"fontSize")));a.fontSize!==v?a.rect=null:a.fontSize=v,a.element.attr("dy","-0.25em");var m=this.tickObj.isInline,y=this.tickObj.inlineToPlot,b=m&&!y?0:p[s];switch(s){case"top":var x=y?0:u.height+b;C(c,o=d.width/2,-(i=x+g.bottom));break;case"right":x=y?0:u.width+b;C(c,o=d.height/2,-(i=x+g.left));break;case"bottom":x=y?0:u.height+b;o=d.width/2,i=x+g.top,a.element.attr("dy","0.91em"),C(c,o,i);break;case"left":C(c,-(o=(x=y?0:u.width+b)+g.right),i=d.height/2,-o,i)}function C(t,e,n,r,o){r=wa(r,0),o=wa(o,0),a.element.attrs({x:e,y:n,transform:Qh(t,r,o),"text-anchor":"middle"})}}};var af=function(t,e,n,a,r){this.type=t,this.config=e.ticklabel,this.axis=e,this.plotRect=n,this.helpers=a,this.tickCount=r,this.maxSize=function(){return Mh(this.config,this.plotRect)},this.cache={}};function rf(t,e,n,a,r,o,i,l,s,c){var u="wrapOnSpace"==l||"wrapAll"==l;return t.map((function(t){var d;return d=e(n,t,r,a,o,null,null,i),d=u?zh(d,l,s.horizontal,s.vertical,c):d}))}function of(t,e,n,a){if(1===e)return d=lf(t,1),[r=Math.ceil(t[0]/d)*d];var r,o,i,l,s=(t[1]-t[0])/e,c=e-1,u=t[1]-t[0],d=u/c,h=Ye(Je(d)/an),f=qe(10,h),p=ef(s,f=+(f*=Math.floor(d/f)).toFixed(12),null,a);return"integer"==a&&p<1?sf(t,e,n):(r=t[0],o=t[1],o=(o=+(o=(r=+(r=tf(r,i=u-p*c,qe(10,Ye(Je(i)/an)+1),p)).toFixed(12))+p*e).toFixed(12))>t[1]?+t[1]:o,l=tt(r,o,p),na(n)&&(l=cf(l,p,n)),l)}function lf(t,e){var n=na(e)?e:10,a=t[1]-t[0],r=qe(10,Ye(Je(a/n)/an)),o=n/a*r;return o<=.15?r*=10:o<=.35?r*=5:o<=.75&&(r*=2),r}function sf(t,e,n){var a,r=function(t,e){return Ue(lf(t,e))}(t,e);return a=tt(function(t,e){var n=lf(t);na(e)&&(n=Ge(e,n));return Ue(t[0]/n)*n}(t,1),t[1],r),na(n)&&(a=cf(a,r,n)),a}function cf(t,e,n){return t[t.length-1]+e<=n&&t.push(t[t.length-1]+e),t}function uf(t,e,n,a,r){var o,i=t.domain();return e===Po?(ff(o=Zh(o=(o=t.ticks(n)).length<n?t.ticks(2*n):o,n),i),o):("integer"===a?o=function(t,e){var n=t.length,a=e[e.length-1];n>1&&e[e.length-1]-t[n-1]<(t[n-1]-t[n-2])/2?t[n-1]=a:t.push(a);return t}(o=sf(i,Ge(n-1,1)),i):ff(o=of(i,n),i),o.map((function(t){return+t.toFixed(12)})).sort(r?H:B))}function df(t,e,n){var a=hf(t,e,n);if(!a){var r=e.range(),o=e.domain(),i=o[0]===o[o.length-1]?1:3;a=da(a=Ge(i,Ve((r[r.length-1]-r[0])/20)))?a:i}return a>1?a+.1:a}function hf(t,e,n){var a=t[n],r=(a.axis||a).tickCount;if(r)return $n(r,e,t)}function ff(t,e){t[0]=e[0],t[t.length-1]=e[e.length-1]}af.prototype={getScale:function(){var t=this,e=t.helpers.chart,n=t.helpers,a=e.dataObject.hierarchical,r=e.dataObject.categoryHierarchy&&"y"==t.type?0:n.axisOrder,o=Wt.getScale(e,e.dataObject,t.plotRect,n.orient,r,e.dataset,t.type,t.extent);if(e.dataObject.categoryHierarchy){var i=a.pivotLayout.getRootNodeList("row"),l=a.pivotLayout.getRootNodeList("column"),s=i.getCount(),c=i.hasMultiCluster(),u=i.leafSize,d=bo(n.axisOrder||0,null,"y",e),h=e.systemConf.chart.axes.yaxis[d],f=e.systemConf.chart.axes.xaxis.splitLeaves;if(c&&"y"==t.type){if(s){var p=e.axes.y.branches[0].scale,g=[p(n.axisOrder)+p.discreteWidth(n.axisOrder),p(n.axisOrder)];return(e.axes.rotated&&!h.reversed||!e.axes.rotated&&h.reversed)&&(g=g.reverse()),o.copy().range(g)}g=[n.axisOrder*u+u,n.axisOrder*u];return e.axes.rotated&&(g=g.reverse()),o.copy().range(g)}if("x"==t.type&&f){g=[n.axisOrder*l.leafSize,n.axisOrder*l.leafSize+l.leafSize];return o.copy().range(g)}}return o},getTicks:function(t,e,n){var a,r,o,i,l,s,u,d,h,f,p,g,v,m,y,b,x,C=this,k=wa(n,C.helpers),w=k.chart,_=w.systemConf,S=w.dataObject,O=C.plotRect=wa(t,C.plotRect),A=C.axis,T=C.type,P=A.interval,E=A.tickCount,L=A.interval,M=wa(e,0),D=n.extent,I=D,R=k.axisOrder,z=k.axisRotated,F=w.dataset.getDataType(T,R),B=w.systemConf.metadata,H=w.dataset.getColumnIdx(T,R),N=B.columns[H],W=B.columns[H].datatype,V=S.hierarchical,Y="y"==T&&!V&&B.axes.y[R].length>1,U=B.columns[H],G=wa(Y&&"y"==T?Zs(R,w):U[W],{}),X=G.subfunction,Z="y"===T&&w.dataObject.isPercentChart?Xo:Wo,q=$s(C.config),$=oc(C.axis,T,w),Q=!!$&&ic(T,k.orient,_),K=N.scaleType===Ju,J=function(t,e,n,a,r,o,i,l){var s=wa(n.size,6),c=Qs(t,e,i),u="left"===t||"right"===t?"x":"y",d="left"===t||"right"===t?"y":"x",h="top"===t||"left"===t?-1:1,f=(h=o?-h:h,{});return l&&(a.count>0||na(a.interval))&&(s=Ge(s,wa(a.size,3))),f[d]=0,f[u]=h*(c+s),f}(k.orient,q,C.axis.tickmark,C.axis.subtickmark,C.axis.ticklabel,Q,$,K),et=parseFloat(Dn.getVal(Kn([C.config,_.chart,_.canvas,wr],"fontSize"))),nt=Dn.getVal(Kn([C.config,_.chart,_.canvas,wr],"fontFamily")),at=function(t){var e,n,a=t.alignMode,r=t.alignMode&&-1!=t.alignMode.indexOf("rotate"),o=na(t.rotation),i=0,l=45;if(r){var s=/\(([^)]+)\)/.exec(a);i=s?parseInt(s[1]):"auto"}else o&&!na(t.alignMode)?(i="auto"==t.rotation?t.rotation:parseInt(t.rotation),a="rotate",r=!0):Array.isArray(a)&&a.length?(e=!0,a.some((function(t){if(-1!=t.indexOf("rotate")){a="rotate",r=!0;var e=/\(([^)]+)\)/.exec(t);return i="auto",n=e,l=e?parseInt(e[1]):l,!0}}))):na(t.alignMode)||(a="rotate(0)",r=!0);return{alignmentMode:a,isRotateMode:r,rotation:i,hasPriorityOrder:e,hasDefinedAutoRotation:n,autoRotation:l}}(C.config),rt=at.alignmentMode,ot=at.isRotateMode,it=at.rotation,lt=at.autoRotation,st=at.hasDefinedAutoRotation,ct=Ks(T,z)?"height":"width",ut=(Kt=w.dataObject.hierarchical)&&Kt.categoryTree,dt=function(t,e,n,a){var r;return t.dataObject.categoryHierarchy&&"x"==e&&(r=ko(e,n,t)),"auto"==a&&!r}(w,this.type,R,it),ht=ut?ko(T,R,w):"x"==T&&R>0,ft=ht?0:it,pt=w.chartTypes[0].name,gt=w.systemConf.chart.plot.plotoptions[pt],vt=S.isAxisCategory&&gt.outerPadding||0,mt=S.isAxisCategory?gt.padding||.2:0,yt=null,bt=is(k.chart,ct,O),xt="x"===T?bt*vt*2:0,Ct={},kt=n.maxTickSize||this.maxSize(),wt=ua(G.groupby)&&G.groupby.length>0||"AUTO"===G.groupby&&"YEAR"!==X,_t=tc(w,T,R),St=wt?R:null,Ot=fa(w,"behaviouralEvents.eventManager.behaviours")||{},At=Ot.PLOT_ZOOM||Ot.CHART_SCROLL&&w.scroll&&w.scroll.settings.smooth&&"x"===T;if(wt&&"AUTO"===G.groupby&&(G.AUTO_GROUP_ORDER=pi.HierarchicalTimeDataAdapter.getAutoGroupOrder(X).reverse()),Ot.PLOT_ZOOM||Ot.PLOT_BRUSH||Ot.CHART_SCROLL){p=_t.scale,D="x"===T&&Ot.CHART_SCROLL?w.viewPortExtent||_t.domain||D:_t.domain||D,I=At?null:D;var Tt=p.range();if(bt=Ze(Tt[1]-Tt[0]),xt="x"===T?bt*vt*2:0,"time"===F&&ua(D)&&p){D[0]instanceof Date&&(D=D.map((function(t){return t.getTime()})));var Pt=Ze(D[1]-D[0])*p.outerPadding;D[0]=D[0]+Pt,D[1]=D[1]-Pt}}switch(dt||(ft<0?ft=360-Ze(ft):ft>=360&&(ft=Ze(ft)%360)),lt&&(lt<0?lt=360-Ze(lt):lt>360&&(lt=Ze(lt)%360)),Kt&&(g=Kt.pivotLayout.getRootNodeList("row"),v=Kt.pivotLayout.getRootNodeList("column"),m=g.getLeavesCount(),y=g.getClustersCount(),b=v.splitColumnLeaves),F){case"numeric":"y"==T&&ut?g.hasMultiCluster()&&k.axisOrder:k.axisOrder;var Et,Lt,Mt="y"==T&&ut?g.hasMultiCluster()&&k.axisOrder<m?k.axisOrder%y:0:k.axisOrder;if(_t.logDomain=null,r=na(D)?D:"x"===T?S.getMinMaxX():S.getMinMaxY(Mt,Oe,w.datalabels.hasFixedPosition),"y"===T&&w.datalabels.hasFixedPosition){var Dt=w.cache.correction,It="label-".concat(T,"-").concat(k.axisOrder),Rt=0;if(Xn(Dt[It])){var zt=S.getEncode("y",k.axisOrder);Rt=Wu("preCalculation")(T,zt.seriesData,w)||0,Dt[It]=[Rt,Rt]}else Rt=Dt[It][1]||0;Et=Rt}else Et=0;if("y"==T&&ut&&m){var jt=[k.axisOrder*g.leafSize+g.leafSize,k.axisOrder*g.leafSize];x=Lt=Ze(jt[1]-jt[0])}if("x"==T&&ut&&b){jt=[k.axisOrder*v.leafSize,k.axisOrder*v.leafSize+v.leafSize];x=Lt=Ze(jt[1]-jt[0])}"height"===ct?(u=(Lt||O.height)-Et,M=M||Ve(u/40),a=[u,0]):(u=(Lt||O.width)-Et,M=M||Ve(u/100),a=[0,u]),na(E)&&(L=(r[1]-r[0])/E);var Ft=(r[1]-r[0])/P,Bt=na(P)&&Ft<u,Ht=p||Ph(w.dataset,T,R)().domain(r).range(a);if(K){if(Ht.constant){var Nt=c(r);Nt>0&&Nt<wa(A.logBase,10)&&!1===A.allowNonPositiveTicks?Ht.constant(1e-4):Ht.constant(1)}var Vt,Yt="x"===T?S.getMinMaxX(0):S.getMinMaxY(Mt,0),Ut=!qa(Yt),Gt=Yt.slice(0),Xt=!(S.isPercentChart||S.hasLevelMarker||S.isWaterfallEnabled),Zt=null,qt=S.getEncode("y",Mt);0===Yt[0]&&0===Yt[1]&&(N.scaleType=null,r="x"===T?S.getMinMaxX(0):S.getMinMaxY(Mt,Oe,w.datalabels.hasFixedPosition),N.scaleType=Ju),qt&&oh(qt,w.dataObject,w)&&Ut&&"y"===T&&!na(A.minRange)&&(Zt=0,Gt.push(0),Gt=j(Gt));var $t=Nh(Gt,u,Yt,Xt,A,Ht.copy(),q,{fontSize:et,fontFamily:nt},(function(t){return rf(t,Z,G,w,W,"axis",St,rt,kt,et)}),k.orient,it,Zt,(function(t){return _t.logDomain=j(t),Jh(t,C.config,w,T,k.axisOrder,k.orient)}),w.datalabels.hasFixedPosition,r);I=$t.tickValues,f=$t.minorTickValues,Vt=$t.logDomain,_t.logDomain=Vt}else I=Bt?function(t,e,n){var a,r,o=Ye((t[1]-t[0])/e);if(o){var i=lf(t,o);if((a=Ue(t[0]/i)*i)-t[0]>e){var l=qe(10,Ye(Je(e)/an));a-=Ye((a-t[0])/l)*l}}else{var s=t[1]-t[0];l=qe(10,Ye(Je(s)/an));a=t[0]-t[0]%l+l}r=tt(a,t[1],e),na(n)&&(r=cf(r,e,n));return r}(r,L,A.maxRange):+E>0?of(r,E,A.maxRange,X):"integer"===X?sf(r,null,A.maxRange):Ht.ticks(M);I=Jh(I,C.config,w,T,k.axisOrder,k.orient),M=I.length;break;case"ordinalNonLinear":case"ordinal":var Qt,Kt,Jt,te=et;i=na(Kt=S.hierarchical)&&Kt.categoryTree&&"x"==T&&!b&&0==R||S.isWaterfallEnabled,s=Jt="auto"===_.chart.width||"auto"===_.chart.height;var ee=null;if(S.isWaterfallEnabled&&na(p)&&ua(I)&&(ee=I),na(I)||(I=S.getCategories(T,k.axisOrder).slice(0)),i&&na(Kt)&&(I=v.getClusterNodes(0)),W===Po&&!na(X)){var ne=ii(I[I.length-1]-I[0]);X=G.subfunction=ne.subFunction}M=I.length,(d={}).width=d.height=et,h=Kh(ct,d,q,ft,et,k.orient),bt=b?v.leafSize:bt,x=b?v.leafSize:null,(Qt=Ve((bt-xt)/h))<M&&"width"===ct&&(ft||C.config.rotation>0)&&(h=Ih(lt,et,te,k.orient).tickSpacing+q.left+q.right),ht||s||(E<M?I=Zh(I,E,null,i):na(L)?I=Zh(I,M,L,i):Qt<M&&(I=Zh(I,Qt,null,i))),i&&(o=I.nodes||I,l=I.indices,I=I.ticks||S.getCategories(T,k.axisOrder,!0,ee).slice(0)),M=I.length;break;case"time":var ae=Dh(G);if(!ae){var re,oe,ie;if(r=na(D)?D:"x"===T?S.getMinMaxX(0):S.getMinMaxY(k.axisOrder,0),re=new Date(r[0]),oe=new Date(r[1]),na(U[W])||(U[W]=G),!na(X)||"AUTO"===X){ne=ii(oe-re);X=G.subfunction=ne.subFunction}(ie=new Yu(G)).useUTC=!0===G.useUTC,d=Rr(yt=zh(yt=ie.getMaxDate(G,St),rt,kt.horizontal,kt.vertical,et),et,nt),h=Kh(ct,d,q,ft,et,k.orient),bt=b?v.leafSize:bt,x=b?v.leafSize:bt,M=(bt-xt)/h;var le=ie.range(re,oe,Ue(M),X,L,w);I=Jh(le.TICKS,C.config,w,T,k.axisOrder,k.orient),M=le.TICKS.length;break}var se=p||Wt.getScale(w,S,O,k.orient,k.axisOrder,w.dataset,T,D);I=se.ticks(),ce=I.map((function(t){return se.tickFormat()(t)})),M=I.length}if("ordinalNonLinear"===F){var ce=ae?ce:rf(I,Z,G,w,W,"axis",St,rt,kt,et);na(C.config.showAs)&&(Ct=qh(I,C.config,N,w,H,R),ce=Ct.tickValues,Ct.length=ce.length);var ue=$h(ce,I,et,nt,Ct.styles);if(!w.dataObject.isAxisCategory){var de="x"===T&&(z?"height":"width")||"y"===T&&(z?"width":"height"),he="auto"===_.chart[de];na(yt)||(yt=ue.formattedVal);var fe=Rr(yt,et,nt,ue.style,!0),pe=Mh(C.config,w.chartarea);if(fe.width=Xe(fe.width,pe.horizontal),fe.height=Xe(fe.height,pe.vertical),he&&C.recalculatePlotSize(k.chart,bt,fe,ct,M,q,mt,vt,"x"),he&&Kt){var ge=Kt.pivotLayout.getRootNodeList("row"),ve=ge.getCount(),me=ge.getLeavesCount(),ye=ge.leafSize;if(ve){var be={width:0,height:0};be[ct]=ye,C.recalculatePlotSize(w,bt,be,ct,me,q,mt,vt,"y")}}}return{rawTickValues:I,formatterTickValues:ce,longestTickValue:ue,scale:C.getScale(),longestTickDimension:Rr(ue.formattedVal,et,nt),margin:q,tickMargin:J,rotation:ft,customTickInfo:Ct,mode:rt,isInline:$,inlineToPlot:Q,maxTickSize:kt}}var xe=(Ht=p||C.getScale()).actualRange,Ce=xe&&xe[0]===xe[1];Ce&&(I=[Ht.invert(xe[0])],K&&(I=I.map((function(t){return Bh(t)})))),w.renderVisiblePointsOnly&&!i&&(I=function(t){var e=Ze(Ht.origRange[1]-Ht.origRange[0]),n=Ht.bandwidth?Ht.bandwidth()/2:0,a=[-n,e-n];return t.filter((function(t){var e=Ht(t);return null!==e&&e>=a[0]&&e<=a[1]}))}(I)),M=I.length,ce=ae?ce:rf(I,Z,G,w,W,"axis",St,rt,kt,et),na(C.config.showAs)&&(Ct=qh(I,C.config,N,w,H,R),ce=Ct.tickValues,Ct.length=ce.length),ue=$h(ce,I,et,nt,Ct.styles),na(yt)||(yt=ue.formattedVal);fe=Rr(yt,et,nt,ue.style,!0),pe=Mh(C.config,w.chartarea);if(fe.width=Xe(fe.width,pe.horizontal),fe.height=Xe(fe.height,pe.vertical),Jt&&C.recalculatePlotSize(k.chart,bt,fe,ct,M,q,mt,vt,"x"),("auto"===_.chart.width||"auto"===_.chart.height)&&Kt&&"y"==T){var ke=Kt.pivotLayout.getRootNodeList("row"),we=ke.getCount(),_e=we?ke.getDomainForBranch(0).length:0,Se=ke.getLeavesCount(),Ae=ke.leafSize;if(we&&R==_e-1){var Te={width:0,height:Ae};C.recalculatePlotSize(w,bt,Te,ct,Se,q,mt,vt,"y")}}var Pe=function(t){if("auto"===rt){if((0).maxTickCount<t){var e=F==To?je(fe):ze(fe,lt,!0);if(e.maxTickCount<t){var n=ze(fe,lt,!0);return n.maxTickCount<t&&ue.hasWhiteSpace?Fe():n}return e}return 0}if(ot)return ze(fe);if("zigzag"==rt)return je(fe);if("wrapOnSpace"==rt)return Fe();if("wrapAll"==rt)return{mode:"wrapAll",maxTickCount:Re(ft,fe,T),rotation:ft}}(M),Ee=Pe.mode,Le=Pe.maxTickCount;if(ft=Pe.rotation,!Ce&&(M>Le||Pe.recalculate))if(F===Po)if(ae){se=p||Wt.getScale(w,S,O,k.orient,k.axisOrder,w.dataset,T,null);var Me=M>Le&&ot&&0===ft;I=se.ticks(Me?.5*Le:Le),M>Le&&!Me&&(ft=lt),ce=I.map((function(t){return se.tickFormat()(t)})),ue=$h(ce,I,et,nt,Ct.styles)}else le=ie.range(re,oe,Le,X,L,w),I=Jh(le.TICKS,C.config,w,T,k.axisOrder,k.orient),ce=rf(I,Z,G,w,W,"axis",St,rt,kt,et);else Le<M&&(i?(l=(I=Zh(o||I,Le,null,i)).indices,I=I.ticks):(I=Zh(I,Le),C.config.showAs&&(Ct.styles=Zh(Ct.styles,Le),Ct.userRawTicks=Zh(Ct.userRawTicks,Le))),ce=Zh(ce,Le),ue=$h(ce,I,et,nt,Ct.styles));if(W===Po&&wt)if(wt&&!na(S.hierarchical))S.hierarchical=new pi.HierarchicalTimeDataAdapter(w,I,G.groupby,F!==Po,N);else if(wt){S.hierarchical.update(I);var De=S.hierarchical.setScaleForRange(w.axes.x.rangeScale);Kt.pivotLayout.setRanges("column",De)}(na(Ct.styles)||G&&G.format&&G.format.breakSpace)&&(ue=$h(ce,I,et,nt,Ct.styles,!0));var Ie=Rr(yt,et,nt,ue.style);return{rawTickValues:I,formatterTickValues:ce,longestTickValue:ue,scale:Ht,longestTickDimension:Ie,margin:q,tickMargin:J,rotation:ft,mode:Ee,isInline:$,inlineToPlot:Q,tickValueIndices:l,customTickInfo:Ct,maxTickSize:kt,minorTickValues:f};function Re(t,e,n){var a,r,o=0,i=is(k.chart,ct,C.plotRect,x);if("x"===n&&(o=i*vt*2),a=i-o,r=e||fe,!!t){if("height"===ct&&(90===t||270===t))return a/(r.width+Ze(q.top)+Ze(q.bottom));var l=t%90;if("height"===ct?l>0:l>0||90===t||270===t)return a/(Ih(t,r.width,r.height,k.orient).tickSpacing+Ze(q.left)+Ze(q.right))}return a/("height"===ct?r.height+Ze(q.top)+Ze(q.bottom):r.width+Ze(q.left)+Ze(q.right))}function ze(t,e,n){var a,r=na(e)?e:ft,o=w.dataObject.categoryHierarchy;return"auto"===r?(a=Re(ft=0,fe,T),!Ce&&a<M?"width"===ct?(a=Re(ft=!st&&(o&&"x"==T&&!ht&&Co(T,k.chart)||!o&&"x"==T&&k.chart.axes.x.count>1)?90:lt,fe,null),n=!0):n=!0:n=!1):(a=Re(r,fe,T),ft=r),{mode:"rotate",rotation:ft,maxTickCount:a,recalculate:n}}function je(t){return{mode:"zigzag",rotation:0,maxTickCount:2*Re(0,t,T)}}function Fe(){if("auto"==rt){var t=$h(ce=ce.map((function(t,e){return t.split(" ")})),I,et,nt,Ct.styles);na(yt)||(yt=t.formattedVal);var e=Rr(yt,et,nt,t.style,!0)}return{mode:"wrapOnSpace",maxTickCount:Re(ft,e,T),rotation:ft}}},recalculatePlotSize:function(t,e,n,a,r,o,i,l,s){var c,u=fa(t.systemConf,"chart.scroll.categoryThickness")||n[a];e="height"===a?[c=(u+=o.top+o.bottom)*r,0]:[0,c=(u+=o.left+o.right)*r],c+="x"==s?Ch(e,r,i,l,u):0,t.systemConf.chart[a]=c}},Ht.Ticks=af,Ht.AxisLabel=nf,Ht.Ticks.prototype.ticklabelFitModels=function(t,e){var n={},a=t.length;return n.zigzag={},n.rotate={},n.type=a>e?2*a<e?"zigzag":"rotate":"default",n};var pf=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"resize",value:function(t,e){var n=this.spec.bound;n.maxWidth=t,n.maxHeight=e,this.create(),this.draw(this.element)}},{key:"viewScaleComponent",value:function(){var t,e,n,a=this.spec,r=a.config,o=a.scaleComponent,i=a.view,l=o.getScale(),s=l.range(),c=l.domain(),u=s[s.length-1],d=o.schema.domain,h=o.schema.data,f=h.meta,p=h.dataType,g=f[f.datatype]||{},v=d.ranges,m=d.stops,y=hf(r,l,i),b=df(r,l,i),x=i===Qi;return p===Po&&function(t,e){var n=t.subfunction,a=Dh(t,"legend");if(!na(n)||"AUTO"===n||a){var r=ii(e[1]-e[0]);t.subfunction=r.subFunction}a&&((t.legendformat||t.format).specifier=null)}(g,c),p===To&&(r.ranges||(r.ranges=c.map((function(t){return[t]})))),v||p===To?(t=p===To?c:v||c,n=w().domain(t).range(s)):(t=m?c:uf(l,p,b,g.subfunction,x),n=l),y&&(e=Zh(t,y)),{ticks:t,labels:e||t,scale:n,bound:{width:u,height:u},labelData:v&&t._dummy&&1===t.length&&t[0][0]===t[0][1]?[[t[0][0]]]:null}}}]),e}(Hu);var gf=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){this.encode=function(t,e){return(t.legend.component=Nt.discrete.get(e)).chartarea(t.chartarea).systemconf(t.systemConf).color(t.seriesColor).chartObj(t)}(this.spec.chartObj,this.spec)}},{key:"draw",value:function(t){this.parent=t,us.isContinousLegend(this.spec.chartObj)?_get(_getPrototypeOf(e.prototype),"draw",this).call(this,t):this.encode(t.datum(this.spec.config))}},{key:"resize",value:function(t,e){if(t||e){var n=this.spec.bound,a=uu(t,e,n),r=a.w,o=a.h;n.maxWidth=r,n.maxHeight=o,this.create(),this.draw(this.parent)}}}]),e}(pf);function vf(t){var e=wn.getComponent("LegendHighlight"),n=t.systemConf.legend,a=!t.dataObject.hasZaxis||Al(t.chartTypes[0].value)||t.dataObject.isFlowChartCategory?[]:["z"],r=[],o=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1],r=e===kr,o=r?"g":Cr,i=function(t,e,n){return e===n.length-1},l=t.container.selectAll("".concat(o,".legendarea")).filter(i);return l.style("display",pn),wc(o,".zc-legend-".concat(n),a,l)},i=function(e,n,a){o(e===kr?"html":kr,n,[]);var r=o(e,n,a);return(n.indexOf("z")>-1||n.indexOf("shape")>-1||n.indexOf("clr")>-1&&e===kr)&&vc(r,[t.systemConf.canvas,wr],e!==kr),r},l=t.dataSplicer.getEncode();na(t.dataset.getColumnIdx("shape"))&&a.push("shape"),function(t){if(Bi.isQuantileColorScale(t)){var e=t.userdata,n=t.systemConf.legend,a=t.dataset.getDataType("clr");a===To&&(e.legend=e.legend||{},e.legend.colorBand=e.legend.colorBand||{},e.legend.colorBand.ranges||(n.colorBand.ranges=e.legend.colorBand.ranges=Bi.getCategories(t)));var r=n.colorBand.ranges;r&&r.length&&(e.legend.colorBand.ranges=n.colorBand.ranges=Hi(n,t,!0)),n.ranges=n.colorBand.ranges;var o=Wt.getScale(t,t.dataObject,null,null,null,t.dataset,"clr"),i=o.domain(),l=o.copy();l.range(Bi.getProcessedColorRange(tt(i.length),i,n,t));var s=t.axes.clr||{};s.scaleType="quantile",s.dataType=a,s.scale=o,s.indexScale=l,s.schema={data:{meta:_objectSpread(_objectSpread({},t.dataset.getColumn("clr")),{},{columnindex:t.dataset.getColumnIdx("clr")})}},s.component=s.component||Ht.get(),t.axes.clr=s}else t.axes.clr={}}(t);var s=1;if(t.dataObject.categoryHierarchy)s=t.dataObject.hierarchical.pivotLayout.layers.groups.length;for(var c="clr",u=0;u<s;u++){var d="".concat(c,"-").concat(u),h=n,f=yf(c,{config:h,dataType:t.axes.clr.dataType}),p=ju("clr",f).domMode,g=Gn(t.systemConf,"viewParser.legend.".concat(d),!0);u>1&&n.color&&(n.color[0],n.color[u]=h=null!=n.color[u]?mergeJSON(n.color[u],n.color[0],!1):n.color[0]);var v={id:d,config:h,renderTo:i,parser:g,order:u,encode:c,globalFont:t.systemConf.canvas,scaleComponent:t.axes.clr,area:t.chartarea,bound:cu(h,t.chartarea),format:bf(t.dataset.getColumn("clr"),t,p),enabled:gs(h,t),view:us.isContinousLegend(t)?"band":"list",effect:Yr(h,t),callbackArgs:[t],highlightManager:new e(t,t.svg,{encode:"clr",config:h,order:u}),chartObj:t,legendView:t.viewFlow&&t.viewFlow.legends};r.push(v)}return a.forEach((function(a){l[a]&&l[a].forEach((function(o,l){var s="".concat(a,"-").concat(l),c=Fa(t.scales,(function(t){return t.id===s})),u=ys(a,l,t),d=yf(a,{config:u,dataType:c.schema.data.dataType}),h=ju(a,d).domMode,f=Gn(t.systemConf,"viewParser.legend.".concat(s),!0),p={id:s,scaleComponent:c,config:u,renderTo:i,view:d,parser:f,encode:a,globalFont:t.systemConf.canvas,area:t.chartarea,bound:cu(u,t.chartarea),format:bf(c.schema.data.meta,t,h),enabled:gs(u,t,a),effect:Yr(u,t),highlightManager:new e(t,t.svg,{encode:a,config:u}),callbackArgs:[t]};n.singleLayout||r.push(p)}))})),t.legend.isSingleLayout=n.singleLayout||r.length<=1,r[0].bound.adjust=!t.legend.isSingleLayout,r}function mf(t){var e=t.encode,n=t.id,a=t.enabled,r=t.highlightManager,o=t.config,i=t.effect,l=ju(e,t.view);if(l!==mn){var s=new l(t),c=t.renderTo(l.domMode,n,[o]);if(c.style("display",a?pn:dn),a){!function(t,e){var n=e.view,a=t.attr("zc-view");a&&n!==a&&t.selectAll("*").remove();t.attr("zc-view",n)}(c,t);var u=s.create(),d=t.legendView&&t.legendView.markExtender;d&&(s.encode=$n(d,u,t)),s.draw(c),Vr(c,{effect:i})}return{enabled:a,element:c,component:s,meta:t,id:n,highlightManager:r}}}function yf(t,e){var n=e.config,a=e.dataType;if(n.type)return n.type;switch(t){case"z":case"size":return n.ranges||a===To?"list":"nested";case"color":case"clr":return n.ranges||a===To?"list":"band";case"shape":return"list"}}function bf(t,e,n){if(t){var a=t.datatype,r=t[a],o=n===kr;return function(t){return Wo(r,t,a,e,"legend",o,"-")}}}function xf(t,e){var n;return nr(t.defaultBehaviour).some((function(t){return n=Fa(t,(function(t){return(n=t.name,n.charAt(0).toLowerCase()+n.slice(1)).replace(/\$(\d+)/,"")===e;var n})),n})),n}function Cf(t){return"z"===t?"size":"clr"===t?"color":null}function kf(t,e){if(!e)return{};var n=e.element,a={element:n,show:e.enabled};if(e.enabled){var r=hu(t.chartarea,t,null,n);a.x=r[0],a.y=r[1],a.width=r[2],a.height=r[3]}return a}Nt.render=function(t){var e=t.systemConf.legend;Du(t,e.events,0,"init");var n=vf(t).map(mf).filter((function(t){return!!t}));!function(t,e){t.get=function(e){return Fa(t,(function(t){return t.id===e}))},t.behaviour=function(n,a,r){var o=t.get(n);if(o){var i=o.meta,l=i.view,s=i.encode,c="".concat(Cf(s).toUpperCase(),"_").concat(l.toUpperCase(),"(").concat(n,")"),u=e.legendEvents.eventManager[c],d=xf(u,a),h=r.point?r:{point:r};if(d){for(var f=arguments.length,p=new Array(f>3?f-3:0),g=3;g<f;g++)p[g-3]=arguments[g];d.call.apply(d,[u,null,h].concat(p))}}}}(n,t);var a=n.get("clr-0");t.legendarea=kf(t,a),t._chartarea=Hn(t.chartarea),t._plotarea=Hn(t.plotarea),Nt.align(n,t,t.chartarea,t.plotarea),function(t,e,n){(t&&!t.enabled&&"list"===t.meta.view||t&&t.enabled&&"band"===t.meta.view)&&(e.legend.component=Nt.discrete.get(t.meta),Nt.events(e,e.legendarea.element.selectAll("li.series"),{allSelected:!0,isFirstClickAfterDeselection:!1}))}(a,t),t.legends=n,Du(t,e.events,0,t.updating?"onreload":"onload")},Nt.align=function(t,e,n,a){var r=e.systemConf.legend;if(e.legend.isSingleLayout)!function(t){var e=t.legendarea,n=e.x,a=e.y,r=e.element;e.show&&(xu.positionElement(r,n,a),su(t))}(e);else{var o={area:n,order:r.order,getPosition:function(t,n,a){return hu(a,e,null,t,n)},callbackArgs:e},i=new xu(t,o);t.layout=i,i.areaToBeUpdated.push(a),i.create()}};var wf=Nt.render;function _f(t,e,n,a,r,o,i,l,s,c,u,d,h,f,p,g,v){var m=t.systemConf,y=m.legend,b=[y,m.canvas,wr],x=y.expandable||{},C=!0===x.show,k=y.title.keepAligned&&l,w=!!t.renderer.length;return{create:function(r){var i=t.legend.unitTestObject["zc-legend"].clr[v];if(C){a.style("overflow","hidden");var h,m=dc(e,"div",[1],".","class","expandable").styles({color:x.fontColor,"font-size":"".concat(Dn.getVal(x.fontSize),"px"),"font-family":x.fontFamily||Kn(b,"fontFamily"),"text-align":x.textAlign,cursor:fn,display:"block",padding:"".concat(y.itemMargin,"px"),overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","max-width":"".concat(o,"px"),"margin-left":k?s+un:0}),_=t.legend.expanded;return _?w&&_&&m.html((function(){return h=$n(x.ontoggle,this,_,t)||"Show less.."})):(h=$n(x.text,r,t)||"".concat(r," more..."),m.html(h)),Sf({object:i,key:"expandable",value:{maxWidth:o,"margin-left":k?s+un:0,html:h}}),function(e,r){r.on("click",(function(){if(!t.legend.allRendered&&e>0){t.cache.data={},t.cache.search={},t.cache.correction={},t.legend.allRendered=!0;var r=c(n);if(u(r),t.legend.isSingleLayout?d(f):Nt.align(t.legends,t,p,g),!l&&f.node().offsetWidth>t.legendarea.width){var o=Fa(t.legends,(function(t){return"clr-0"===t.id}));t.legendarea=kf(t,o),function(){t.legend.isSingleLayout?(t.updatePlotArea(),su(t)):(t.chartarea=p,t.plotarea=g);t.isAxisCategory?Ht.render(t,t.chartWidth,t.chartHeight,!0):t.dataObject.isPolarAxisCategory&&Ht.polar.render(t,"x");t.drawThreshold(!0),t.drawPlotareaClippath(),t.updatePlotareaProp(),t.plot.renderer.draw(!0),(t.isAxisCategory||t.dataObject.isPolarAxisCategory)&&t.positionEventTrackerElement()}()}}var i=t.legend.expanded=!t.legend.expanded,s=$n(x.ontoggle,this,i,t);na(s)&&(s="".concat(s)),i?(this.innerHTML=s||"Show less..",a.style("overflow-y","auto")):(a.node().scrollTop=0,this.innerHTML=s||$n(x.text,e,t)||"".concat(e," more..."),a.style("overflow-y","hidden"))}))}(r,m),m}e.select(".expandable").empty()||(e.selectAll(".expandable").remove(),a.style("overflow-y","hidden"),a.style("overflow-x","hidden"))},remove:function(){e.select(".expandable").empty()||(e.selectAll(".expandable").remove(),a.style("overflow-y","hidden"),a.style("overflow-x","hidden"))}}}function Sf(t){var e,n=t.value,a=t.key;t.object&&("object"===_typeof(n)?(e=na(a)?t.object[a]=t.object[a]?t.object[a]:{}:t.object,Object.keys(n).forEach((function(t){e[t]=n[t]}))):(e=t.object,na(a)?e[a]=n:e=n))}wn.setComponent("legend.render",wf),(Nt.discrete=function(){}).get=function(t){var e,n,a,r,o=F("legendClick","legendDblclick","legendMouseover","legendMouseout"),i=t.bound,s=t.globalFont,c=(t.callbackArgs,t.order),u=us.getLegendData,d=us.getLegendDataLength,h=us.isHiddenItem,f=us.getClr,p=us.isDisabled;function g(t){return t.each((function(t){r.legend.state=r.legend.state||{};var n=u(r,c),o=d(r,n),m=t.colorBox,y=al(t,"clr"),b=[t,a.canvas,wr],x=null!=t.x&&""!==t.x&&null!=t.y&&""!==t.y,C=+Dn.getVal(t.fontSize||a.canvas.fontSize),k=Kn(b,"fontColor"),w=(r.dataset.getColumnIdx(r.isAxisCategory||r.isGeoMap||r.isNonAxisMultiSeriesCategory||Bi.isQuantileColorScale(r)?"clr":"x"),t.showAs),_=m.position||"left",S=t.expandable||{},O=!0===S.show,A=(r.renderer.length,us.getFilterBoxSize(m,C)),T=A[0],E=A[1],L=fs(t),M=r.legend.state["clr-".concat(c)]=r.legend.state["clr-".concat(c)]||{allSelected:!0,isFirstClickAfterDeselection:!1},D=na(m.size)?"".concat(Ge(C,E),"px"):(Ar.OSX||Ar.LINUX)&&Ar.FIREFOX?"1.2":"normal",I="horizontal"===L.layout,R=Hn(r.plotarea);r.legend.states=r.legend.state["clr-0"],r.legend.unitTestObject||(r.legend.unitTestObject={"zc-legend":{clr:{}}});var z,j={fontColor:function(t){return f(p(t,M.allSelected,M.isFirstClickAfterDeselection),k,y)},textDecoration:function(t){return p(t,M.allSelected,M.isFirstClickAfterDeselection)&&y.strikeout?"line-through":null}};z="wrap"===t.textOverflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":"top"}:{"text-overflow":"ellipsis","vertical-align":"middle"};var F=l(this);g.update=function(){F.transition().call(g)};F.styles({display:"block",position:"absolute",left:null,top:null});var B=dc(F,"div",[t],".","class","legendgroup"),H=t.shadow;if(!0===H.show){var N="".concat(H.x,"px ").concat(H.y,"px ").concat(H.blur,"px ").concat(H.color);N=H.inset?"".concat(N," inset"):N,F.style("box-shadow",N)}else F.style("box-shadow",null);var W=P(t.background.color.toString());F.style("background-color","rgba(".concat(W.r,",").concat(W.g,",").concat(W.b,",").concat(t.background.alpha,")"));var V=t.border;!0===V.show?F.styles({border:"".concat(+V.size,"px ").concat(V.style," ").concat(V.color),"border-radius":"".concat(V.radius,"px")}):F.style("border",null);var Y=t.title,U=Y.keepAligned&&I,G=na(Y.margin)?Y.margin:3,X=Y.text,Z={display:U?"inline-block":null,"vertical-align":"top"},q=r.legend.unitTestObject["zc-legend"].clr[c]={fontSize:C,fontColor:k,background_rgb:W,title_grp:{title_nodes:{selectAll:{},title:{}}},legend_grp:{legend_nodes:{seriesSpecificStyles:{},label:{},colorBox:{}}}},$=wc("ul",".zcheader",!0===Y.show?[Y]:[],B,":first-child").styles(Z),Q=dc($,"li",[1],".","class","zcheader");$.styles({"white-space":"normal",overflow:"hidden",width:"","list-style-type":dn,margin:0,padding:0});var K=ia(G);Q.styles({padding:K,"white-space":"nowrap",overflow:"hidden","text-align":"left","text-overflow":"ellipsis","vertical-align":"middle"}),Sf({object:q.title_grp,value:_objectSpread({},Z)}),Sf({object:q.title_grp.title_nodes,value:{padding:K}});var J=Nt.selectAllBox(Q,r,M,c),tt=J.element,et=J.options,nt=J.size,at=et.disabledOpacity;Ao(r)||us.fadeChart(M.allSelected,r,at);var rt,ot=dc(Q,"span",[1],".","class","legendtitle"),it="padding-".concat(_),lt=et.show?"".concat(t.textPadding,"px"):null,st="margin-".concat(_),ct=et.show?"".concat(nt,"px"):null,ut={};ot.style(it,lt).style(st,ct),hr(X)?(rt=$n(X,r),ot.html(rt)):(rt=Nn(X),ot.text(rt));var dt=vc(ot,[Y,a.canvas,wr],!0);ut[it]=lt,ut[st]=ct,Sf({object:q.title_grp.title_nodes.title,value:_objectSpread(_objectSpread({},ut),{},{html_or_text:rt},dt)}),tt.style("margin",(function(){var t="".concat(Math.max(0,(ot.node().offsetHeight-tt.node().offsetHeight)/2),"px"),e="".concat(t," 0px 0px 0px");return Sf({object:q.title_grp.title_nodes.selectAll,value:{margin:e}}),e})),Q.style("line-height",(function(){var t=et.show?tt.node().offsetHeight:0,e=Math.max(ot.node().offsetHeight,t);return Sf({object:q.title_grp.title_nodes,value:{lineHeight:e}}),"".concat(e,"px")}));var ht=dc(B,"ul",[t],".","class","legseries");ht.styles({"white-space":"normal","overflow-y":"hidden",width:"","list-style-type":dn,margin:0,padding:0,"-webkit-overflow-scrolling":"touch","font-size":"0px"}).styles(Z);var ft=function(e){var n=dc(ht,"li",e,".","class","series");dc(n,"div",[1],".","class","legendfilterbox"),dc(n,"span",[1],".","class","legendlabel"),n.styles({color:function(t,e){var n=f(p(t,M.allSelected,M.isFirstClickAfterDeselection),k,y);return Sf({object:q.legend_grp.legend_nodes.seriesSpecificStyles,key:e,value:{color:n}}),n},position:"relative","white-space":"nowrap",padding:"".concat(+t.itemMargin,"px"),overflow:"hidden","text-align":"left","line-height":D,"font-size":"".concat(C,"px"),width:Pt?"".concat(t.itemWidth,"px"):null,height:null==t.itemHeight||""==t.itemHeight?null:"".concat(t.itemHeight,"px"),"font-family":Kn(b,"fontFamily"),"font-weight":Kn(b,"fontWeight"),display:function(t,e){var n=h(t)?dn:I?"inline-block":"block";return Sf({object:q.legend_grp.legend_nodes.seriesSpecificStyles,key:e,value:{display:n}}),n}}).styles(z).style("vertical-align","top"),Nt.events(r,n,M,at,c);var o=n.select("span.legendlabel"),i=q.legend_grp.legend_nodes.label;if(na(w)){var s={display:wa(t.showAsDisplay,"inline-block"),overflow:"hidden"};o.styles(s),Sf({object:i,value:s}),na(g.legendLabelMaxWidth)&&Tt&&(o.style("width",g.legendLabelMaxWidth+un),Sf({object:i,value:{width:g.legendLabelMaxWidth}}))}var u="padding-".concat(_),d=t.textPadding,v="margin-".concat(_),x=T,S={};i.seriesSpecificHTML={},o.style(u,"".concat(d,"px")).style(v,"".concat(x,"px")).html((function(t,e){var n=pt.getLegendItemText(t,e);return Sf({object:i.seriesSpecificHTML,key:e,value:n}),n})).attr("title",(function(){var e=t.tooltip?this.textContent:null;return Sf({object:i,value:{title:e}}),e}));var O=vc(o,[j,t,a.canvas,wr],!0);S[u]=d,S[v]=x,Sf({object:i,value:_objectSpread(_objectSpread(_objectSpread({},S),O),{},{color:k,"text-decoration":null})}),Sf({object:q.legend_grp.legend_nodes,value:_objectSpread(_objectSpread({lineHeight:D,width:Pt?"".concat(t.itemWidth,"px"):null,height:null==t.itemHeight||""==t.itemHeight?null:"".concat(t.itemHeight,"px")},z),{},{"font-family":Kn(b,"fontFamily"),"font-weight":Kn(b,"fontWeight"),"vertical-align":"top",cursor:r.systemConf.legend&&r.systemConf.legend.events&&r.systemConf.legend.events.cursor||fn})}),i.disabledStyles={},na(w)&&n.each((function(e,n){if(p(e,M.allSelected,M.isFirstClickAfterDeselection)){var r=vc(l(this).selectAll(".legendlabel, .legendlabel *"),[{fontColor:j.fontColor(e),textDecoration:j.textDecoration(e)},t,a.canvas,wr],!0);Sf({object:i.disabledStyles,key:n,value:r})}}));var P=n.select("span.legendlabel").node().offsetHeight,L=n.select("div.legendfilterbox"),R=Mf(m.vAlign,P,E,C,m.size,t.textOverflow);return Sf({object:q.legend_grp.legend_nodes.colorBox,value:{position:_,size:A,margin_top:R,lineHeight:E-m.strokeWidth}}),L.styles({width:T+un,height:E+un,float:_,"margin-top":R+un,"border-color":hn,"background-repeat":"repeat","line-height":E-m.strokeWidth+un,"text-align":"center","font-family":m.fontFamily,"font-size":(m.fontSize||C)+un,position:"absolute",display:"inline-block","box-sizing":"border-box"}),Nt.setColorBoxBackground(L,r,M,c),n},pt=mu(r,0,n,o,A,L,D,j),gt=function(t){return Xe(Xa(Y.maxWidth||(U?Ul:Gl),t),t)},vt=Xa(t.maxHeight||(I?"20%":Vl),e.height),mt=Xa(t.maxWidth||(I?Yl:"20%"),e.width);i.adjust&&(mt=Xe(i.maxWidth||mt,mt),vt-=Ga($).height,vt=Xe(i.maxHeight?i.maxHeight-Ga($).height:vt,vt));var yt,bt,xt,Ct,kt,wt=gt(mt),_t=pt.getItemDimension(n[0]),St=_t.label.height,Ot=_t.item.height,At=null,Tt="auto"===t.itemWidth,Pt="number"==typeof t.itemWidth,Et=wa(t.itemHeight&&+t.itemHeight,Ge(St,E)+2*+t.itemMargin),Lt=mt;if(O&&I&&(vt=Ye(vt/Ot)*Ot)<Ot&&(vt=Ot),r.legend.hasScroll=o*Et>vt,B.style("max-width","".concat(mt,"px")),$.style("max-width","".concat(wt,"px")),xt=Ga($).width,I){var Mt=+t.marginLeft+ +t.marginRight+(t.border.show?2*t.border.size:0),Dt=r.canvasarea.width-Mt;mt>Dt&&(mt=Dt),wt=gt(mt),U&&(mt-=xt),B.style("max-width","".concat(mt,"px")),$.style("max-width","".concat(wt,"px"))}if(Sf({object:q.title_grp,value:{maxWidth:wt}}),O&&(yt=pt.getRowsCount(Ot,vt),vt=Xe(yt*Ot,vt),i.adjust)){var It=pt.getVisibleItemRenderCount(B,yt,mt,vt,Ot),Rt=i.maxWidth,zt=i.maxHeight;if(n.length!==It){var jt=vu(S,Rt,zt,s,L,t.itemMargin);vt-=jt[1],vt=Xe(zt?zt-jt[1]:vt,vt)}}if(Sf({object:q.legend_grp,value:_objectSpread({maxWidth:mt,maxHeight:vt},Z)}),ht.styles({"max-width":mt+un,"max-height":vt+un}),g.itemMaxWidth=null,g.legendLabelMaxWidth=null,w&&Tt){var Ft=pt.getMaxItemWidth(n);if(kt=Xe(Ft,mt),g.itemMaxWidth=kt,g.legendLabelMaxWidth=kt-T-2*t.itemMargin,Ar.WINDOWS&&I){Sf({object:q.legend_grp,value:{maxWidth:mt+2}}),ht.style("max-width","".concat(mt+2,"px"))}}bt=pt.getVisibleItemRenderCount(B,yt,mt,vt,Ot);var Bt=_f(r,B,n,ht,0,mt,0,I,xt,ft,Yt,v,0,F,e,R,c),Ht=Ge(0,o-bt);At=O&&Ht>0&&!r.legend.allRendered?ft(n.slice(0,bt)):ft(n),O&&Ht>0?Bt.create(Ht):(O&&0===Ht||!O)&&Bt.remove();var Wt=r.legend.expanded,Vt=1;function Yt(t){if(I){ht.styles({width:null,height:null}),t.style("max-width","".concat(mt,"px")),Sf({object:q.legend_grp.legend_nodes,value:_defineProperty({maxWidth:mt},"maxWidth",mt)}),B.style("max-width","".concat(mt,"px")),ht.styles({display:"inline","border-top":"1px solid"});var e=Ga(ht).width;ht.styles({display:Z.display,"border-top":null}),B.style("max-width","".concat(Lt,"px")),Sf({object:q,value:{maxWidth:Lt}}),Vt=Ve(ht.node().offsetHeight/Et)||1,ht.style("height","".concat(Vt*Et+2,"px")),Ct=or(ht)||O&&bt<o?20:0,ht.style("width","".concat(e+Ct+2,"px")),Sf({object:q.legend_grp,value:{preCalculationStyle:{width:null,height:null,display:"inline","border-top":"1px solid"},display:Z.display,"border-top":null,height:Vt*Et+2,width:e+Ct+2}})}else{ht.style("width",null);var n=Ga(ht.style("display","inline-block")).width;ht.style("display",Z.display),ht.style("width","".concat(n+Ct+2,"px")),ht.style("height",null),Sf({object:q.legend_grp,value:{preCalculationStyle:{width:null,display:"inline-block"},display:Z.display,height:null,width:n+Ct+2}})}}Ct=or(ht)||O&&bt<o?20:0,Sf({object:q,value:_defineProperty({maxWidth:mt},"maxWidth",mt)}),Yt(At),v(F,x,mt,vt);var Ut=!0===(O&&Wt||!O);Ar.IE&&Ut&&(Ut=ht.node().scrollHeight-Vt>ht.node().offsetHeight),ht.style("overflow-x","hidden"),ht.style("overflow-y",Ut?"auto":"hidden"),Sf({object:q.legend_grp,value:{addOverFlowY:Ut}})})),g}function v(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>3?arguments[3]:void 0,i=0,l=0;if(n){var s=a.legend,c=r.legendarea.element.node().getBoundingClientRect();i=Xe(r.canvasarea.width-c.width,s.x),l=Xe(r.canvasarea.height-Xe(c.height,o),s.y)}else{var u=hu(e,r);i=u[0],l=u[1]}t.styles({left:"".concat(i,"px"),top:"".concat(l,"px")})}return g.dispatch=o,g.chartarea=function(t){return arguments.length?(e=Hn(t),g):e},g.systemconf=function(t){return arguments.length?(a=t,g):a},g.chartObj=function(t){return arguments.length?(r=t,g):r},g.color=function(t){return arguments.length?(n=t,g):n},g};var Of=us.getClr,Af=us.isDisabled,Tf=us.hexToRGB;function Pf(t){return t&&!("<"===t[0]||0===t.indexOf('url("data'))}function Ef(t,e){var n=t.size,a=void 0===n?1:n,r=t.width,o=void 0===r?t.width||a:r,i=t.height,l=void 0===i?t.height||a:i,s=t.shape,c=t.fillColor,u=void 0===c?"black":c,d=t.fillOpacity,h=void 0===d?1:d,f=t.strokeColor,p=void 0===f?"black":f,g=t.strokeWidth,v=void 0===g?1:g,m=t.strokeOpacity,y=void 0===m?1:m,b=t.padding,x=void 0===b?0:b,C=t.borderRadius,k=void 0===C?0:C,w=t.rotate,_=void 0===w?0:w,S=t.translateX,O=void 0===S?t.translateX||o/2:S,A=t.translateY,T=void 0===A?t.translateY||l/2:A,P=e?Ge(o-2*x,1):10,E=e?Ge(l-2*x,1):10,L=Ge(o-2*x,1)/(P+2*Jn(v,1)),M=Ge(l-2*x,1)/(E+2*Jn(v,1)),D=np(s||"square")(P,E,k),I=us.hexToRGB;return"<path d='".concat(D,"' transform='translate(").concat(O,",").concat(T,") scale(").concat(L,",").concat(M,") rotate(").concat(_,")' style='stroke: ").concat(I(p),"; fill: ").concat(I(u),"; fill-opacity: ").concat(h,"; stroke-width: ").concat(Jn(v,1),"px; stroke-opacity: ").concat(y,";'></path>")}function Lf(t,e,n,a){var r="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='".concat(e,"' height='").concat(n,"'>");r+=t,r+=" </svg>";var o="data:image/svg+xml;'}".concat(Ar.IE?"base64":"utf8",",").concat(Ar.IE?Ln(r):r);return a?o:'url("'.concat(o,'")')}function Mf(t,e,n,a,r,o){var i=~~(1.195*a-a),l=0;switch(t){case"top":l=i;break;case"bottom":l=e-n-i;break;default:"center"===t&&"wrap"!==o?l=(Ge(e,n)-n)/2:na(r)||"wrap"===o?l=(Ge(a,n)-n)/2:e>n&&(l=(e-n)/2)}return l}function Df(t){return{config:{d:function(e,n){var a,r,o=this,i=[e,n];if(t.d){var l=ru(o,i,t,"d");a=l.shape,r=l.size}else a=ru(o,i,t,"shape"),r=ru(o,i,t,"size");return np(a).apply(void 0,_toConsumableArray(Ma(r)))},transform:function(e,n){var a,r,o,i=this,l=[e,n];if(t.transform){var s=ru(i,l,t,"transform");a=s.x,r=s.y,o=s.angle}else a=ru(i,l,t,"x"),r=ru(i,l,t,"y"),o=ru(i,l,t,"angle");return lu([a,r],o)}},depends:{d:["shape","size"],transform:["x","y","angle"]}}}Nt.setColorBoxBackground=function(t,e,n,a){var r,o,i=a>1&&e.systemConf.legend.color?e.systemConf.legend.color[a]:e.systemConf.legend,l=i.colorBox,s=al(i,"clr"),c=s.colorBox||{},u=i.imagePallete?du.imagePallete.get(i.imagePallete):null,d=e.imagePallete&&na(u)&&u.length>0,h=e.patternPallete,f=h&&h.length,p=!e.patternPallete&&(na(i.shapes)||"square"!==l.shape),g=Yr(i,e),v=c.grayScale,m=+Dn.getVal(i.fontSize||e.systemConf.canvas.fontSize),y=us.getFilterBoxSize(l,m),b=y[0],x=y[1],C=l.borderRadius,k=[],w=function(t,n,a,r){var o,i,l=Of(_(t),wa(a,Bs(e,n,null,r)),s);return Ar.IE&&v&&_(t)&&(o=P(l),i=la((o.r+o.g+o.b)/3),l="rgba(".concat(i,",").concat(i,",").concat(i,",").concat(o.opacity,")")),l},_=function(t){return Af(t,n.allSelected,n.isFirstClickAfterDeselection)},S=function(t,e){return w(t,e,l.strokeColor,a)},O={opacity:function(t,e){return _(t)?c.fillOpacity:null},filter:function(t,e){var n=[];return n.push(_(t)&&v&&!Ar.IE?"grayscale(1)":null),n.push(g),n=n.filter((function(t){return!!t})),n.length?n.join(" "):null},"border-radius":!p&&na(C)?C+un:null,color:function(t,e){return _(t)?c.fontColor:l.fontColor||"white"},border:function(t,e){return d||p?null:"".concat(l.strokeWidth+un,"solid ").concat(S(t,e))},background:function(t,n){var i=_(t),c=null;if(o=w(t,n,l.fillColor,a),d)if(i&&s.color)r=s.color;else{r='url("'.concat(u[n%u.length],'")');var g=e.patternImageSizes&&e.patternImageSizes;c=g[n]?"".concat(g[n%g.length][0]+un," ").concat(g[n%g.length][1]).concat(un):null}else if(p)r=function(t,e,n,a,r,o,i){n=Tf(n),a=Tf(a);var l=r.systemConf.legend,s=l.colorBox,c=l.shapes,u=(c?c[o%c.length]:null)||s.shape,d=u||!Nt.getHTML4ChartTypeSymbol||Bi.isQuantileColorScale(r)&&r.dataObject.isCombinationalChart?Ef(_objectSpread(_objectSpread({},s),{},{width:t,height:e,strokeColor:n,fillColor:a,shape:u})):Nt.getHTML4ChartTypeSymbol(t,e,a,r,o,i);if(Pf(d))return'url("'.concat(d,'")');return Lf(d,t,e)}(b,x,S(t,n),o,e,n,i);else if(f){var m=h[n%f],y=zr[m]?Fr(m):Br(m);y.bgClr_base=o,y.stroke_base=o,y.width=b,y.customStaticClr=i?s.patternColor:e.userdata.legend.customPatternColor,y.x=y.y=0;var C="zp".concat(jn(y,"legelegendndFill")),O=Hr.svg_patterns.svgPatternFill(y,C,null,!0,!0,e,e.getPatternSvg(),"objectBoundingBox"),A=O.width,T=O.height;r='url("'.concat(O.url,'")'),c="".concat((2*A<b?A:b/2)+un," ").concat(2*T<x?T:x/2).concat(un)}else r=o;if(Pf(r)&&(c=c||"".concat(b+un," ").concat(x).concat(un),i&&v&&Ar.IE)){var P=c.split("px").map((function(t){return+t}));r=function(t,e,n){var a=document.createElement("canvas"),r=a.getContext("2d");a.width=e,a.height=n;var o=new Image;o.src=t.substring(5,t.length-2),o.width=e,o.height=n,o.onload=function(){r.drawImage(o,0,0,e,n);for(var t=r.getImageData(0,0,a.width,a.height),i=0;i<t.height;i++)for(var l=0;l<t.width;l++){var s=4*i*t.width+4*l,c=(t.data[s]+t.data[s+1]+t.data[s+2])/3;t.data[s]=c,t.data[s+1]=c,t.data[s+2]=c}return r.putImageData(t,0,0,0,0,t.width,t.height),"url(".concat(a.toDataURL(),")")}}(r,P[0],P[1])}return k[n]=c,r},"background-size":function(t,e){return k[e]}},A=function(t,e){var n=_(t)?c.text||"":l.text;return n="string"==typeof n?n.replace(/<|>/g,(function(t){return"<"===t?"&lt;":">"===t?"&gt;":t})):n,n};if(!t)return{styles:O,html:A};t.styles(O).html(A)};var If={_rect:function(t){return{config:{d:function(e,n){var a=this,r=[e,n],o=t.d?ru(a,r,t,"d"):t,i=["x1","y1","x2","y2"].some((function(t){return na(o[t])})),l=function(t){return t?{x:"x1",y:"y1",width:"x2",height:"y2"}:{x:"x",y:"y",width:"width",height:"height"}}(i);return pc(ru(a,r,o,l.x),ru(a,r,o,l.y),ru(a,r,o,l.width),ru(a,r,o,l.height),Ia(ru(a,r,o,["radius","borderRadius"])),null,null,i)}},depends:{d:["x","y","width","height","radius","borderRadius","x1","y1","x2","y2"]}}},_div:function(t){var e=t.shape,n=void 0===e?"square":e,a="square"!==n&&"rect"!==n;return{config:{background:function(e,n){var r=this,o=[e,n];if(na(t.background))return ru(r,o,t,"background");if(a){var i=ru(r,o,t,"width"),l=ru(r,o,t,"height"),s=ru(r,o,t,"strokeColor"),c=ru(r,o,t,"fillColor"),u=ru(r,o,t,"shape");return Lf(Ef(_objectSpread(_objectSpread({},t),{},{width:i,height:l,strokeColor:s,fillColor:c,shape:u}),!0),i,l)}return ru(r,o,t,"fillColor")},backgroundSize:function(e,n){var a=[e,n];if(na(t.backgroundSize))return ru(this,a,t,"backgroundSize")},borderRadius:function(e,n){var r=[e,n];return na(t.borderRadius)?"".concat(ru(this,r,t,["radius","borderRadius"]),"px"):a?null:"".concat(ru(this,r,t,["radius","borderRadius"]),"px")},border:function(e,n){var r=this,o=[e,n];if(na(t.border))return ru(r,o,t,"border");if(a)return"none";var i=ru(r,o,t,"strokeWidth"),l=ru(r,o,t,"strokeColor");return"".concat(wa(i,1),"px solid ").concat(l)},width:function(e,n){var a=ru(this,[e,n],t,"width");return"".concat(a,"px")},height:function(e,n){var a=ru(this,[e,n],t,"height");return"".concat(a,"px")}},depends:{background:a?["width","height","strokeColor","fillColor","shape"]:["fillColor"],backgroundSize:[],borderRadius:a?[]:["radius","borderRadius"],border:a?[]:["strokeWidth","strokeColor"],width:["width"],height:["height"]}}},group:function(t){return{config:{transform:function(e,n){var a,r,o=this,i=[e,n];if(t.transform){var l=ru(o,i,t,"transform");a=l.x,r=l.y}else a=ru(o,i,t,"x"),r=ru(o,i,t,"y");return lu([a,r])}},depends:{transform:["x","y"]}}},point:Df,polygon:function(t){var e=t.curve,n=void 0===e?"linear":e,a=N().curve(g(n));return{config:{d:function(e,n){var r,o=[e,n];t.d?r=ru(this,o,t,"d").points:r=ru(this,o,t,"points");return a(r)}},depends:{d:["points","curve"]}}}};function Rf(t,e,n,a){if(e=nu.call(n,e),!If[t])return _objectSpread(_objectSpread({},e),zf(e));var r=If[t](e),o={},i={},l=Object.keys(r.depends),s=E(nr(r.depends)).filter((function(t){return!qa(l,t)}));return Oa(e,(function(t,e){qa(s,e)||(o[e]=t)})),Oa(r.config,(function(t,n){(na(e[n])||r.depends[n].some((function(t){return na(e[t])})))&&(i[n]=t)})),a?_objectSpread(_objectSpread({},o),i):_objectSpread(_objectSpread(_objectSpread({},o),i),zf(e))}function zf(t){var e=t.strokeWidth,n=t.lineCap,a=t.dashStyle;t.tooltip;return{strokeWidth:e=wa(e,1),lineCap:n=Xr(n,a),dashStyle:a=Gr(a,e),title:function(){return t.tooltip?this.textContent:pn}}}function jf(t,e){e.empty()||Oa(t,(function(t,n){"styles"===n&&(t=Bf(t),_c(e)&&(t=function(t){return t["stroke-width"]=wa(t["stroke-width"],1),t["stroke-linecap"]=Xr(t["stroke-linecap"],t["stroke-dasharray"]),t["stroke-dasharray"]=Gr(t["stroke-dasharray"],t["stroke-width"]),t}(t))),e[n](t)}))}function Ff(t,e,n,a){var r=t.mark,o=t.config,i={};if(!e.empty()&&o){o=Rf(r,o,n,a);var l=If[r]?Object.keys(If[r](o).depends):[];for(var s in Oa(o,(function(t,n){var a=Jc[n]||{},r=a.attrType,o=void 0===r?"attr":r,s=a.cssName,c=void 0===s?n:s,u=a.value,d=u?function(e,n){return u(zn(t,[e,n],this))}:t;"attr"===o||"style"===o?(sa(c)&&(c=_c(e)?c.svg:c.html),i["".concat(o,"s")]=i["".concat(o,"s")]||{},i["".concat(o,"s")][c]=d):i[o]=d,e.each((function(t,e){this.zc_cache&&(qa(l,n)||(this.zc_cache[n]=d))}))})),i)e[s](i[s])}}function Bf(t){var e={};return Oa(t,(function(t,n){return e[Hf[n]||n]=t})),e}wn.setComponent("markUtils.customMark",Rf);var Hf={fillColor:"fill",fillOpacity:"fill-opacity",strokeColor:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",lineCap:"stroke-linecap",dashStyle:"stroke-dasharray"};function Nf(t,e,n,a,r,o){if(!n.empty()&&t){var i={arr:t=Ma(t),i:0,element:n,cache:a,mark:r,parser:e};!function(t,e,n){var a,r=e.element,o=e.cache,i=e.mark,l=e.parser;t.forEach((function(s,c){if(hr(s))a?a.on("end",(function(){return s(r,a)})):s(r,a);else if(ua(s))a?a.on("end",(function(){return Wf(s,e)})):Wf(s,e);else{var u=Vf(s),d=u.from,h=u.to,p=u.interpolate,g=u.property,v=Xf(s,l),m=v.duration,y=v.delay,b=v.easing,x=v.transition;Yf(a||r,d,o,i),Uf(a||r,g.from),a=(a||r).transition(x),na(x)||a.duration(m).delay(y).ease(f(b)),Yf(a,h,o,i),Uf(a,g.to),Gf(p)||function(t,e,n,a){if(t.empty()||!e)return;var r={},o={},i={};for(var l in e)void 0!==e[l].from&&(r[l]=e[l].from),void 0!==e[l].to?o[l]=e[l].to:o[l]=e[l],void 0!==e[l].interpolator&&(i[l]=e[l].interpolator);if(Gf(i))return;Rf(a,r,n,!0);Oa(Rf(a,o,n,!0),(function(e,l){var s=Jc[l]||{},c=s.attrType,u=void 0===c?"attr":c;s.cssName,s.value;t["".concat(u,"Tween")](l,(function(t,e,s){var c={},u=this;return Oa(o,(function(t,e){c[e]=(i[e]||Q)(wa(r[e],u.zc_cache[e],au[e]),t)})),function(r){var o={};return Oa(c,(function(t,e){o[e]=c[e](r)})),zn(Rf(a,o,n,!0)[l],[t,e],u)}}))}))}(a,p,o,i),c===t.length-1&&a.on("end",n)}}))}(i.arr,i,o)}}function Wf(t,e){var n=e.element,a=e.cache,r=e.mark,o=e.parser,i=n.node();n.empty()||t.forEach((function(t){var e=Vf(t),s=e.from,c=e.to,u=(e.interpolate,Xf(t,o)),d=u.duration,h=u.delay,p=u.easing,g=u.transition,v={};Oa(c,(function(t,e){v[e]=wa(s[e],i.zc_cache[e],au[e])}));var m=Rf(r,v,a,!0),y=Rf(r,c,a,!0),b=l({}).transition(g);na(g)||b.duration(d).delay(h).ease(f(p)),b.tween("style",(function(t,e){var a={};return Oa(y,(function(n,r){var o=Jc[r]||{},l=(o.attrType,o.cssName,o.value),s=function(n){return l?l(zn(n,[t,e],i)):zn(n,[t,e],i)};a[r]=Q(s(m[r]),s(n))})),function(t){Oa(y,(function(e,r){var o=Jc[r]||{},i=o.attrType,l=void 0===i?"attr":i,s=o.cssName,c=void 0===s?r:s;o.value;"attr"===l||"style"===l?n[l](c,a[r](t)):n[l](a(t))}))}}))}))}function Vf(t){var e={},n={},a={},r={from:{},to:{}},o=["duration","delay","easing","transition"];for(var i in t)if(t.hasOwnProperty(i)){var l=t[i];if(!qa(o,i)&&na(l)){var s=l.property,c=l.from,u=l.to,d=l.interpolator;s&&l.hasOwnProperty("property")?(void 0!==c&&(r.from[i]=[s,c]),r.to[i]=[s,u]):(d||(void 0!==c&&(e[i]=c),n[i]=void 0!==u?u:l),a[i]=l)}}return{from:e,to:n,interpolate:a,property:r}}function Yf(t,e,n,a){e&&!Gf(e)&&Ff({mark:a,config:e},t,n,!0)}function Uf(t,e){if(e&&!Gf(e))for(var n in e){var a=e[n];t[a[0]](n,a[1])}}function Gf(t){for(var e in t)return!1;return!0}function Xf(t,e){return{duration:wa(Kn([t,e],"duration"),250),delay:Kn([t,e],"delay")||0,easing:Kn([t,e],"easing"),transition:Kn([t,e],"transition")}}wn.setComponent("mark.anime",Nf);var Zf={_rect:"path",_div:"div",group:"g",point:"path",polygon:"path"};function qf(t){var e={_name:{},dependency:{},as:{}};return $f(t,e),Oa(e.dependency,(function(t,n){return e.dependency[n].push(e._name[n])})),delete e._name,e}function $f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.children,r=t.name,o=t.dependency,i=t.as;if(t._level=n,r&&(e._name[r]=t),o&&(e.dependency[sa(o)?o.name:o]=[]),i){var l="zcUnNamed";e.as[wa(r,l)]=e.as[wa(r,l)]||[],e.as[wa(r,l)].push(t),e.as[l]=e.as[l]||[],e.as[l].push(t)}a&&a.length&&a.forEach((function(t,a){return $f(t,e,n+"_"+a)}))}function Qf(t,e){var n=t.parent;return na(n)?n.isD3Selection?n:l(n):e}function Kf(t,e){return Jf(t,e,qf(t))}function Jf(t,e,n){var a=t.mark,r=t.data,o=void 0===r?[1]:r,i=t.selector,l=void 0===i?"":i,s=t.order,c=t.children,u=t.name,d=t.dependency,h=t.dataAccessor,f=t.on,p=void 0===f?{}:f,g=Qf(t,e),v=function(t){return Zf[t]||t}(a),m=n.exclude,y=void 0===m?[]:m,b=p.start||t.onStart,x=p.end||t.onEnd;if(!(na(u)&&y.length&&qa(y,u))){if(t._rendered){var C=t.element.node();return C.parentNode.removeChild(C),g.node().appendChild(C),void delete t._rendered}var k=wc(v,l,o,g,s,h,{enter_update_exit:!0,remove:!1}),w=k.update,_=k.exit,S=w;if(t.accessor)S.each((function(e,n){t.accessor.call(this,e,n)}));else{t.depends&&(S=w=k.update=g.select(v+l)),w.each(tp),_.each(tp),$n(b,S),function(t,e,n){t&&(t=Ma(t)).forEach((function(t){var a=sa(t)?t:{name:t},r=a.name,o=a.parent,i=a.onStart,l=a.onEnd,s=a.exclude,c=void 0===s?[]:s;$n(i,t);var u=function(t,e){return e.dependency[t][0]}(r,n);Jf(u,Qf(a,e),_objectSpread(_objectSpread({},n),{},{exclude:Ma(c)})),u._rendered=!o,$n(l,t)}))}(d,g,n),function(t,e){var n=e.properties,a=void 0===n?{}:n,r=a.enter,o=a.update,i=a.exit,l=t.enter,s=t.update,c=t.exit;o=_objectSpread(_objectSpread({},a),o),["enter","update","exit"].forEach((function(t){return delete o[t]})),jf(r,l),jf(o,s),jf(i,c)}(k,t),function(t,e,n){var a=e.mark,r=e.config,o=void 0===r?{}:r,i={cache:n,parser:e},l=o.enter,s=o.update,c=o.exit,u=t.enter,d=t.update,h=t.exit;s=_objectSpread(_objectSpread({},o),s),["enter","update","exit"].forEach((function(t){return delete s[t]})),Ff({mark:a,config:l},u,i),Ff({mark:a,config:s},d,i),Ff({mark:a,config:c},h,i)}(k,t,n),t.element=S,t.anime?function(t,e,n){var a=e.mark,r=e.anime;if(!r)return;var o=r.enter,i=r.update,l=r.exit,s=t.enter,c=t.update,u=t.exit;ua(i)||(i=_objectSpread(_objectSpread({},r),i),["enter","update","exit"].forEach((function(t){return delete i[t]})));Nf(o,r,s,n,a),Nf(i,r,c,n,a),Nf(l,r,u,n,a,(function(){return u.remove()}))}(k,t,n):_.remove(),t.element&&(t.element._zc=!0);var O=g.selectAll(v+l),A=t.config&&t.config.html;c&&c.length?c.forEach((function(t){return Jf(t,O,n)})):A||S.selectAll("*").remove(),$n(x,S),function(t,e){var n=t.as,a=(t.name,t.element);if(n){var r=t._as={};Oa(n,(function(t){return r[t]=[]})),a.each((function(){var t=_c(this)?Bn(this):Ga(this);Oa(n,(function(e,n){return r[e].push(wa(t[n],t))}))}))}}(t)}}}function tp(){this.zc_cache=this.zc_cache||{}}wn.setComponent("mark.render",Kf);var ep=L();function np(t){return function(e,n,a,r){if(Zc.has(t))return wn.getComponent("svg.symbolPath.geo")(t,e,r);var o=ep.get(t);if(o)return $n(o,e);switch(t){case"asterisk":return"M0 0 C".concat(-.25*e," ").concat(-.65*e," ").concat(.25*e," ").concat(-.65*e," 0 0 C").concat(.5*e," ").concat(-.633*e," ").concat(.65*e," ").concat(-.117*e," 0 0 C").concat(.583*e," ").concat(.083*e," ").concat(.583*e," ").concat(.65*e," 0 0 C").concat(.25*e," ").concat(.65*e," ").concat(-.25*e," ").concat(.65*e," 0 0 C").concat(-.617*e," ").concat(.65*e," ").concat(-.55*e," ").concat(.017*e," 0 0 C").concat(-.483*e," ").concat(-.05*e," ").concat(-.583*e," ").concat(-.717*e," 0 0 Z");case"bean":return"M0 ".concat(.5*e," A").concat(.25*e," ").concat(.5*e," 0 0 1 0 ").concat(.5*-e," A").concat(.15*e," ").concat(.25*e," 0 0 1 1 0 A").concat(.15*e," ").concat(.25*e," 0 0 1 0 ").concat(.5*e);case"butterfly":return"M0 ".concat(.25*-e," C0 ").concat(.25*-e," ").concat(.85*e," ").concat(-e," ").concat(.3*e," ").concat(.25*e," C").concat(.6*e," ").concat(.7*e," 0 ").concat(.4*e," 0 ").concat(.4*e," M0 ").concat(.25*-e," C0 ").concat(.25*-e," ").concat(.85*-e," ").concat(-e," ").concat(.3*-e," ").concat(.25*e," C").concat(.6*-e," ").concat(.7*e," 0 ").concat(.4*e," 0 ").concat(.4*e," M0 ").concat(.25*-e," L").concat(.1*e," ").concat(.5*-e," M0 ").concat(.25*-e," L").concat(.1*-e," ").concat(.5*-e);case"clover":return"M".concat(.033*e," ").concat(-.033*e," C").concat(-.133*e," ").concat(-.966*e," ").concat(1.066*e," ").concat(-.116*e," ").concat(.1*e," ").concat(.033*e," C").concat(.933*e," ").concat(.233*e," ").concat(-.133*e," ").concat(.9*e," ").concat(.016*e," ").concat(.083*e," C").concat(-.633*e," ").concat(.6*e," ").concat(-.6*e," ").concat(-.6*e," ").concat(.033*e," ").concat(-.033*e," Z");case"cloverFour":return"M".concat(.05*-e," ").concat(.05*-e," C").concat(.4*-e," ").concat(.6*-e," ").concat(.4*e," ").concat(.6*-e," ").concat(.05*e," ").concat(.05*-e," C").concat(.6*e," ").concat(.4*-e," ").concat(.6*e," ").concat(.4*e," ").concat(.05*e," ").concat(.05*e," C").concat(.4*e," ").concat(.6*e," ").concat(.4*-e," ").concat(.6*e," ").concat(.05*-e," ").concat(.05*e," C").concat(.6*-e," ").concat(.4*e," ").concat(.6*-e," ").concat(.4*-e," ").concat(.05*-e," ").concat(.05*-e," Z");case"cross":return"M".concat(-e/2," ").concat(.2*-e," L").concat(.2*-e," ").concat(.2*-e," L").concat(.2*-e," ").concat(-e/2," L").concat(.2*e," ").concat(-e/2," L").concat(.2*e," ").concat(.2*-e," L").concat(e/2," ").concat(.2*-e," L").concat(e/2," ").concat(.2*e," L").concat(.2*e," ").concat(.2*e," L").concat(.2*e," ").concat(e/2," L").concat(.2*-e," ").concat(e/2," L").concat(.2*-e," ").concat(.2*e," L").concat(-e/2," ").concat(.2*e," Z");case"diamond":return"M".concat(.4*-e," 0 L0 ").concat(-e/2," L").concat(.4*e," 0 L0 ").concat(e/2," Z");case"ellipse":return"M".concat(.5*-e," 0 A").concat(.5*e," ").concat(.35*e," 0 0 1 ").concat(.5*e," 0 A").concat(.5*e," ").concat(.35*e," 0 0 1 ").concat(.5*-e," 0");case"gear":return"M".concat(-.088*e," ").concat(-.365*e," L").concat(-.084*e," ").concat(-.471*e," L").concat(.092*e," ").concat(-.471*e," L").concat(.097*e," ").concat(-.369*e," L").concat(.194*e," ").concat(-.317*e," L").concat(.27*e," ").concat(-.386*e," L").concat(.409*e," ").concat(-.263*e," L").concat(.339*e," ").concat(-.189*e," L").concat(.364*e," ").concat(-.088*e," L").concat(.478*e," ").concat(-.088*e," L").concat(.478*e," ").concat(.097*e," L").concat(.369*e," ").concat(.097*e," L").concat(.325*e," ").concat(.192*e," L").concat(.394*e," ").concat(.265*e," L").concat(.254*e," ").concat(.396*e," L").concat(.197*e," ").concat(.325*e," L").concat(.092*e," ").concat(.364*e," L").concat(.092*e," ").concat(.476*e," L").concat(-.084*e," ").concat(.476*e," L").concat(-.084*e," ").concat(.364*e," L").concat(-.185*e," ").concat(.32*e," L").concat(-.263*e," ").concat(.394*e," L").concat(-.388*e," ").concat(.26*e," L").concat(-.317*e," ").concat(.192*e," L").concat(-.354*e," ").concat(.097*e," L").concat(-.473*e," ").concat(.097*e," L").concat(-.473*e," ").concat(-.091*e," L").concat(-.356*e," ").concat(-.091*e," L").concat(-.317*e," ").concat(-.189*e," L").concat(-.384*e," ").concat(-.258*e," L").concat(-.267*e," ").concat(-.384*e," L").concat(-.184*e," ").concat(-.312*e," L").concat(-.088*e," ").concat(-.365*e," Z");case"heart":return"M0 ".concat(.2*-e," C").concat(.65*e," ").concat(.65*-e," ").concat(.65*e," ").concat(.2*e," 0 ").concat(.45*e," C").concat(.65*-e," ").concat(.2*e," ").concat(.65*-e," ").concat(.65*-e," 0 ").concat(.2*-e,"Z");case"star":return"M0 ".concat(.5*-e," L").concat(.122*e," ").concat(.12*-e," L").concat(.5*e," ").concat(.12*-e," L").concat(.197*e," ").concat(.12*e," L").concat(.306*e," ").concat(.5*e," L0 ").concat(.274*e," L").concat(.306*-e," ").concat(.5*e," L").concat(.197*-e," ").concat(.12*e," L").concat(.5*-e," ").concat(.12*-e," L").concat(.122*-e," ").concat(.12*-e," Z");case"malteseCross":return"M".concat(.3*-e," ").concat(.4*-e," A").concat(.3*e," ").concat(.1*e," 0 0 1 ").concat(.3*e," ").concat(.4*-e," L").concat(.2*e," ").concat(.2*-e," L").concat(.4*e," ").concat(.3*-e," A").concat(.1*e," ").concat(.3*e," 0 0 1 ").concat(.4*e," ").concat(.3*e," L").concat(.2*e," ").concat(.2*e," L").concat(.3*e," ").concat(.4*e," A").concat(.3*e," ").concat(.1*e," 0 0 1 ").concat(.3*-e," ").concat(.4*e," L").concat(.2*-e," ").concat(.2*e," L").concat(.4*-e," ").concat(.3*e," A").concat(.1*e," ").concat(.3*e," 0 0 1 ").concat(.4*-e," ").concat(.3*-e," L").concat(.2*-e," ").concat(.2*-e," Z");case"square":r=+arguments[0];var i=+wa(arguments[2],0);return na(arguments[2])?pc(-r/2,-r/2,r,r,Ia(i)):"M".concat(.5*-e," ").concat(.5*-e," L").concat(.5*e," ").concat(.5*-e," ").concat(.5*e," ").concat(.5*e," ").concat(.5*-e," ").concat(.5*e," Z");case"triangle-up":return"M".concat(.5*-e," ").concat(.285*e," L0 ").concat(.43*-e," ").concat(.5*e," ").concat(.285*e," Z");case"triangle-down":return"M0 ".concat(.43*e," L").concat(.5*-e," ").concat(.285*-e," L").concat(.5*e," ").concat(.285*-e," Z");case"triangle-right":return"M".concat(.5*-e," ").concat(.43*-e," L").concat(.285*e," 0 L").concat(.5*-e," ").concat(.43*e," Z");case"triangle-left":return"M".concat(.5*e," ").concat(.43*e," L").concat(.285*-e," 0 L").concat(.5*e," ").concat(.43*-e," Z");case"arrow":return"M".concat(.5*-e," ").concat(.2*e," L0 ").concat(.5*-e," ").concat(.5*e," ").concat(.2*e," ").concat(.25*e," ").concat(.2*e," ").concat(.25*e," ").concat(.5*e," ").concat(.25*-e," ").concat(.5*e," ").concat(.25*-e," ").concat(.2*e," Z");case"rocket":return"M".concat(.5*-e," ").concat(.5*e," L0 ").concat(.5*-e," ").concat(.5*e," ").concat(.5*e," 0 ").concat(.25*e," ").concat(.5*-e," ").concat(.5*e," Z");case"nylon":return"M".concat(-e/2," ").concat(-e/4," L").concat(-e/4," ").concat(-e/4," L").concat(-e/4," ").concat(-e/2," M").concat(-e/4," 0 L").concat(-e/4," ").concat(e/4," L0 ").concat(e/4," M0 ").concat(-e/4," L").concat(e/4," ").concat(-e/4," L").concat(e/4," 0 M").concat(e/4," ").concat(e/2," L").concat(e/4," ").concat(e/4," L").concat(e/2," ").concat(e/4);case"waves":return"M".concat(-e," 0 C").concat(7*-e/8," ").concat(-e/4," ").concat(5*-e/8," ").concat(-e/4," ").concat(-e/2," 0 C").concat(3*-e/8," ").concat(-e/4," ").concat(-e/8," ").concat(-e/4," 0 0 C").concat(e/8," ").concat(e/4," ").concat(3*e/8," ").concat(e/4," ").concat(e/2," 0 C").concat(5*e/8," ").concat(-e/4," ").concat(7*e/8," ").concat(-e/4," ").concat(3*e/4," 0");case"woven":return"M".concat(-e/4," ").concat(-e/4," L").concat(e/4," ").concat(e/4," M").concat(e/4," ").concat(-e/4," L").concat(e/2," ").concat(-e/2," M").concat(-e/4," ").concat(e/4," L").concat(-e/2," ").concat(e/2," M").concat(e/4," ").concat(3*e/4," L").concat(3*e/4," ").concat(e/4);case"crosses":return"M ".concat(-e/4," ").concat(-e/4," L").concat(e/4,",").concat(e/4," M").concat(-e/4,",").concat(e/4," L").concat(e/4,",").concat(-e/4);case"caps":return"M".concat(-e/4," ").concat(e/4," L0 ").concat(-e/4," ").concat(e/4," ").concat(e/4);case"hexagons":return"M".concat(-e/2," 0 L").concat(-e/4," 0 M").concat(e/2," 0 L").concat(e/4," ").concat(-e/2," L0 ").concat(-e/2," L").concat(-e/4," 0 L0 ").concat(e/2," L").concat(e/4," ").concat(e/2,"Z");case"line":case"horizontal-line":return"M".concat(.5*-e," 0 L").concat(.5*e," 0");case"diagonal-line-right":return"M".concat(3*-e/4," ").concat(-e/4," L").concat(-e/4," ").concat(3*-e/4," M").concat(-e/2," ").concat(e/2," L").concat(e/2," ").concat(-e/2," M").concat(e/4," ").concat(3*e/4," L").concat(3*e/4," ").concat(e/4);case"vertical-line":return"M0 ".concat(-e/2," L0 ").concat(e/2);case"vertical-line-z":return"M0 0 L0 ".concat(e);case"hexagon":return"M".concat(.433*e," ").concat(.25*e," L").concat(0*e," ").concat(.5*e," L").concat(-.433*e," ").concat(.25*e," L").concat(-.433*e," ").concat(-.26*e," L").concat(0*e," ").concat(-.5*e," L").concat(.433*e," ").concat(-.26*e," Z");case"diagonal-line-left":return"M".concat(3*-e/4," ").concat(e/4," L").concat(-e/4," ").concat(3*e/4," M").concat(-e/2," ").concat(-e/2," L").concat(e/2," ").concat(e/2," M").concat(e/4," ").concat(3*-e/4," L").concat(3*e/4," ").concat(-e/4);case"oval":return"M".concat(-e/2," 0 A").concat(e/2," ").concat(e/2," 0 0 1 0 ").concat(-e/2," A").concat(e/2," ").concat(e/2," 0 0 1 ").concat(-e/2," 0");case"rect":var l=+arguments[0],s=+wa(arguments[1],0);i=+wa(arguments[2],0);return na(arguments[2])?pc(-l/2,-s/2,l,s,Ia(i)):"M".concat(-l/2," ").concat(-s/2," L").concat(l/2," ").concat(-s/2," L").concat(l/2," ").concat(s/2," L").concat(-l/2," ").concat(s/2,"Z");case"ninja":return"M".concat(-.267*e," ").concat(-.367*e," L").concat(.167*e," ").concat(-.133*e," L").concat(.433*e," ").concat(-.267*e," L").concat(.2*e," ").concat(.167*e," L").concat(.333*e," ").concat(.433*e," L").concat(-.1*e," ").concat(.167*e," L").concat(-.367*e," ").concat(.333*e," L").concat(-.167*e," ").concat(-.1*e," Z");case"whiskers":return $c([["line",e],[a.symbol,a.size]]);case"whisker":return Qc(arguments[0],wa(arguments[1],8),!1);case"horizontal-whisker":return Qc(wa(arguments[0],8),arguments[1],!0);case"half-circle":return"M".concat(-e/2," ").concat(e/4," A").concat(e/2," ").concat(e/2," 0 0 1 ").concat(e/2," ").concat(e/4," Z");case"arrow-line":return"M".concat(.5*-e," 0 L").concat(.25*e," 0 M").concat(.25*e," ").concat(.25*-e," L").concat(.5*e," 0 L").concat(.25*e," ").concat(.25*e);default:return"M".concat(-e/2," 0 A").concat(e/2," ").concat(e/2," 0 0 1 ").concat(e/2," 0 A").concat(e/2," ").concat(e/2," 0 0 1 ").concat(-e/2," 0")}}}function ap(t,e,n,a,r){var o,i=a.transform,l=a.rotate,s=a.color,c=a.symbolSize,u=void 0===c?{outer:1,inner:.5}:c,d=i?{x:i[0],y:i[1],angle:l}:{},h=n.symbol||a.symbol,f=null!=n.imageUrl&&""!==n.imageUrl,p=wa(n.size,wa(a.strokeWidth,1)),g=p*u.outer,v=p*u.inner,m=(null!=e?p:g)*wa(a.imageSize,10),y=n.innerFillColor||s,b=f||0===n.innerStrokeWidth&&(0===n.innerFillOpacity||"transparent"===y)?[]:[1],x=[f?m:10*g,a.size2d,a.custom],C=[10*v,a.size2d,a.custom,"inner"];if(null!=e){var k=Lr("marker","#"+e);pa(k,"properties.attrs",function(t){return{orient:0,viewBox:"".concat(-t/2," ").concat(-t/2," ").concat(t," ").concat(t),markerUnits:"userSpaceOnUse",markerWidth:t,markerHeight:t}}(10*p)),Kf(k,r.getPatternSvg().select("defs")),o=k.element}else o=t;var w=o.selectAll("path.outer").nodes().length,_=Mr({prefix:"outer",selection:".outer",config:_objectSpread(_objectSpread(_objectSpread({},d),n),{},{shape:h,color:s,size:x}),context:r.getPatternSvg(),defsPath:r.defsLocation}),S=Mr({prefix:"inner",selection:".inner",data:b,config:_objectSpread(_objectSpread(_objectSpread({},d),n),{},{shape:h,color:s,size:C})});Kf(_,o),Kf(S,o),_.element.style("stroke-width",(n.outerStrokeWidth||0).toString());var O=_.element,A=n.animation;return!w&&A&&A.enabled&&O.styles({"stroke-opacity":0,"fill-opacity":0}).transition().delay(A.duration).duration(A.duration).styles({"stroke-opacity":n.outerStrokeOpacity}),o}function rp(t){var e=t.systemConf.chart.plot.plotoptions,n=t.canvasarea;return t.seriesdata.map((function(a,r){var o=a.plotoptions,i=0,l=t.chartTypes[r].name,s=Dn.getValueOfPlotOptions(o?o.marker:null,e[l].marker);/(area|arearange|line)/.test(l)&&s("enabled")&&Wl(t,"marker")&&Nl(t,"marker",Xe(n.width,n.height))?i=Jn(s("size"),Jn(o?o.strokeWidth:e[l].strokeWidth,1)):l===ki&&(i=Jn(s("size"),2));return 10*i}))}function op(t,e,n){if(Ar.IE&&e.enabled)!function(t,e,n){var a=na(n)?n-1:e.repeat||1/0;if(!t.node()||!a)return void t.styles({transform:null,opacity:null});var r=(e.type||"twinkle")===Dc,o=(e.duration||800)/2,i=f(e.easingType),l=o,s=r?500:0,c=r?0:o,u=r?{transform:"scale(1)",opacity:0}:{transform:"scale(0)"},d=r?{transform:"scale(0)",opacity:1}:{transform:"scale(1)"};t.transition(),t.attrs(d).transition().delay(s).duration(l).ease(i).attrs(u).transition().duration(c).ease(i).attrs(d).on("end",(function(){op(t,e,a)}))}(t,e);else{var a={animation:pn,opacity:pn,transform:pn};if(e.enabled){var r=na(e.repeat)?e.repeat:"infinite",o=e.type||"twinkle",i=(e.duration||800)/1e3,s=("fade"===o?250:0)/1e3,c=e.easingType||"linear",u=dc(l(Ya(n.container.node())).selectAll("div.__baseZC_Container__"),"style",[1]).node(),d="",h="ZC".concat(jn(e,"blink"));switch(o){case"twinkle":d="".concat("\n@keyframes ").concat(h," { ")+"0% {transform: scale(1);}50% {transform: scale(0);}100% {transform: scale(1);} }\n";break;case"fade":d="".concat("\n@keyframes ").concat(h," { ")+"0% {transform: scale(0);opacity: 1;}100% {transform: scale(1);opacity: 0;} }\n",t.styles({transform:"scale(0)",opacity:1})}var p=Ua(n.container.node()),g=gn[p].ANIMATION;g&&na(g[h])||(u.innerHTML+=d,g[h]=!0),t.style("animation","".concat(h," ").concat(i,"s ").concat(c," ").concat(s,"s ").concat(r)).on("animationend",(function(){l(this).styles(a)}))}else t.styles(a)}}function ip(t,e,n,a,r,o){switch(t){case"line":return[[n-.5*e,a],[n+.5*e,a]];case"vertical-line":return[[n,a-.5*e],[n,a+.5*e]];case"horizontal-whisker":return Kc(e,n,a,r,o);case"whisker":return Kc(e,n,a,r)}}wn.setComponent("svg.setSymbolPath",(function(t,e){ep.set(t,e)})),wn.setComponent("svg.symbolPath",np),wn.setComponent("svgRenderer.marker",ap);var lp=function(){var t=navigator.userAgent,e={};if(t.indexOf("OPR")>0){e.name="Opera",e.jsPrefix="webkit",e.cssPrefix="-webkit-";var n=t.indexOf("OPR/");e.version=la(t.substr(n+4))}else if(t.indexOf("Chrome")>0){e.name="Chrome",e.jsPrefix="webkit",e.cssPrefix="-webkit-";n=t.indexOf("Chrome/");e.version=la(t.substr(n+7))}else if(t.indexOf("Safari")>0){e.name="Safari",e.jsPrefix="webkit",e.cssPrefix="-webkit-";n=t.indexOf("Version/");e.version=la(t.substr(n+8))}else if(t.indexOf("Firefox")>0){e.name="Firefox",e.jsPrefix="Moz",e.cssPrefix="-moz-";n=t.indexOf("Firefox/");e.version=la(t.substr(n+8))}else if(t.indexOf("MSIE")>0){e.name="Internet Explorer",e.jsPrefix="ms",e.cssPrefix="-ms-";n=t.indexOf("MSIE");e.version=la(t.substr(n+5))}else e=void 0;return e},sp=function(t,e){var n=getComputedStyle(t),a=lp();for(var r in e)if(e.hasOwnProperty(r))if(r in n)t.style[r]=e[r];else if(null!=a){var o=a.jsPrefix+r.charAt(0).toUpperCase()+r.slice(1);t.style[o]=e[r]}},cp=function t(e,n){var a={type:"zBars",scale:1,duration:1.2},r=document.getElementById("ZCloader");for(var o in t.style||((r=document.createElement("style")).setAttribute("id","ZCloader"),document.head.appendChild(r),t.style=!0),n)n.hasOwnProperty(o)&&(a[o]=n[o]);var i=a.colors||["rgb(204, 32, 50)","rgb(24, 153, 74)","rgb(1, 115, 178)","rgb(253, 208, 25)"],l=i[0%i.length],s=i[1%i.length],c=i[2%i.length],u=i[3%i.length],d=lp(),h="";if(void 0===d?(d={}).cssPrefix="":"Internet Explorer"===d.name&&d.version<10&&(a.type="wheel"),!e.loader){var f=document.createElement("div");if("zBlocks"==a.type){if(!t.zBlocks){h="\n@".concat(d.cssPrefix,"keyframes ").concat(a.type," {");h+="0% { left:0px; top:0px; ".concat(d.cssPrefix,"transform:rotate(0deg) scale(1)}"),h+="25% { left:40px; top:0px; ".concat(d.cssPrefix,"transform:rotate(90deg) scale(0.5)}"),h+="50% { left:40px; top:40px; ".concat(d.cssPrefix,"transform:rotate(180deg) scale(1.0)}"),h+="75% { left:0px; top:40px; ".concat(d.cssPrefix,"transform:rotate(270deg) scale(0.5)}"),h+="100% { left:0px; top:0px; ".concat(d.cssPrefix,"transform:rotate(360deg)scale(1)} }\n"),r.innerHTML+=h,t.zBlocks=!0}sp(f,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale(".concat(a.scale,")")});var p=document.createElement("div");p.innerHTML="&nbsp",f.appendChild(p),sp(p,{backgroundColor:l,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var g=document.createElement("div");g.innerHTML="&nbsp",f.appendChild(g),sp(g,{backgroundColor:s,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration/4*1,"s")});var v=document.createElement("div");v.innerHTML="&nbsp",f.appendChild(v),sp(v,{backgroundColor:c,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration/4*2,"s")});var m=document.createElement("div");m.innerHTML="&nbsp",f.appendChild(m),sp(m,{backgroundColor:u,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration/4*3,"s")}),e.loader=!0}else if("zCircle1"==a.type){if(!t.zCircle1){h="\n@".concat(d.cssPrefix,"keyframes ").concat(a.type," { ");h+="0% ,25%, 50%, 75%, 100%{ ".concat(d.cssPrefix,"transform: scale(0.0);  } "),h+="12.5%  { ".concat(d.cssPrefix,"transform: scale(1.0); background-color: ").concat(l,";}"),h+="37.5%  { ".concat(d.cssPrefix,"transform: scale(1.0); background-color: ").concat(s,";}"),h+="62.5%  { ".concat(d.cssPrefix,"transform: scale(1.0); background-color: ").concat(c,";}"),h+="87.5%  { ".concat(d.cssPrefix,"transform: scale(1.0); background-color: ").concat(u,";} }\n"),r.innerHTML+=h,t.zCircle1=!0}sp(f,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale(".concat(a.scale,")")});var y=document.createElement("div");y.innerHTML="&nbsp",f.appendChild(y),sp(y,{width:"100%",height:"100%",borderRadius:"50%",opacity:"0.6",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),e.loader=!0}else if("zBars"==a.type){if(!t.zBars){h="\n@".concat(d.cssPrefix,"keyframes ").concat(a.type," { ");h+="0%, 40%, 100% { ".concat(d.cssPrefix,"transform: scaleY(0.4) }"),h+="20% { ".concat(d.cssPrefix,"transform: scaleY(1.0) } }\n"),r.innerHTML+=h,t.zBars=!0}sp(f,{display:"inline-block",verticalAlign:"middle",width:"50px",height:"30px",textAlign:"center",fontSize:"10px",transform:"scale(".concat(a.scale,")")}),(w=document.createElement("div")).innerHTML="&nbsp",f.appendChild(w),sp(w,{backgroundColor:l,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),(_=document.createElement("div")).innerHTML="&nbsp",f.appendChild(_),sp(_,{backgroundColor:s,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration-.1,"s")}),(S=document.createElement("div")).innerHTML="&nbsp",f.appendChild(S),sp(S,{backgroundColor:c,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration-.2,"s")}),(O=document.createElement("div")).innerHTML="&nbsp",f.appendChild(O),sp(O,{backgroundColor:u,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration-.3,"s")}),e.loader=!0}else if("zCircle2"==a.type){if(!t.zCircle2){h="\n@".concat(d.cssPrefix,"keyframes ").concat(a.type," { ");h+="0%, 80%, 100% { ".concat(d.cssPrefix,"transform: scale(0.0) }"),h+="40% { ".concat(d.cssPrefix,"transform: scale(1.0) } }\n"),r.innerHTML+=h,t.zCircle2=!0}sp(f,{display:"inline-block",verticalAlign:"middle",width:"72px",height:"18px",textAlign:"center",fontSize:"10px",transform:"scale(".concat(a.scale,")")});var b=document.createElement("div");b.innerHTML="&nbsp",f.appendChild(b),sp(b,{backgroundColor:l,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var x=document.createElement("div");x.innerHTML="&nbsp",f.appendChild(x),sp(x,{backgroundColor:s,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration-.2,"s")});var C=document.createElement("div");C.innerHTML="&nbsp",f.appendChild(C),sp(C,{backgroundColor:c,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration-.4,"s")});var k=document.createElement("div");k.innerHTML="&nbsp",f.appendChild(k),sp(k,{backgroundColor:u,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-".concat(a.duration-.6,"s")}),e.loader=!0}else if("zCrossBars"==a.type){if(!t.zCrossBars){h="\n@".concat(d.cssPrefix,"keyframes ").concat(a.type," { ");h+="0%{left:-50%;}",h+="100%{left: 150%;} }\n",r.innerHTML+=h,t.zCrossBars=!0}var w,_,S,O;sp(f,{display:"inline-block",position:"relative",verticalAlign:"middle",width:"70px",height:"30px",boxSizing:"border-box",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(160, 150, 150)",borderRadius:"8px",overflow:"hidden",transform:"scale(".concat(a.scale,")")}),(w=document.createElement("div")).innerHTML="&nbsp",f.appendChild(w),sp(w,{backgroundColor:l,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-".concat(a.duration,"s")}),(_=document.createElement("div")).innerHTML="&nbsp",f.appendChild(_),sp(_,{backgroundColor:s,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-".concat(a.duration/100*80,"s")}),(S=document.createElement("div")).innerHTML="&nbsp",f.appendChild(S),sp(S,{backgroundColor:c,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-".concat(a.duration/100*60,"s")}),(O=document.createElement("div")).innerHTML="&nbsp",f.appendChild(O),sp(O,{backgroundColor:u,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:"".concat(a.duration,"s"),animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-".concat(a.duration/100*40,"s")}),e.loader=!0}else sp(f,{display:"inline-block",verticalAlign:"middle",width:"30px",height:"30px",position:"absolute",backgroundImage:"url('".concat(_n,"loader_").concat(a.type,".gif')"),backgroundSize:"30px 30px",backgroundRepeat:"no-repeat",backgroundPosition:"center"});return f}};function up(t){var e=t.seriesdata;if(!e||!e.chartdata)return[];var n=e.type,a=[],r=function(t){var e,r=t.type||n;e="number"==typeof r?we.get(r):r.toLowerCase(),a.push(e)};return t.facets?dp(e.chartdata,r):e.chartdata.forEach(r),a}function dp(t,e){t.forEach((function(t){e(t),t.data&&dp(t.data,e)}))}Dn.getAllSeriesTypes=up;var hp=function(){};function fp(t,e,n,a){var r=e&&e.animation?Rn(t.animation,e.animation,!0):t.animation,o=n.systemConf.chart.plot.animation,i={},l=r.easingType||o.easingType||(/(scatter|bubble$|packedbubble|heatmap)/.test(a)?"cubic-in-out":null)||"linear";return ka()||n.isHiddenCoainer||n.disableAnimation?i.enabled=!1:i.enabled=!!Wl(n,"animation")&&Kn([r,o],"enabled"),i.enabled="canvas"==window.rendererMode?"dial"==a:i.enabled,i.type=r.type,i.easingType=f(l),i.duration=i.enabled?Jn(r.duration,+(o.duration||(/(bar|bullet|gantt|waterfall)/.test(a)?300:/(line|area|arearange)/.test(a)?600:/(scatter|bubble$|funnel|pyramid|heatmap)/.test(a)?1e3:500))):0,i}function pp(t,e,n,a,r,o,i,l,s,c,u){var d=r==Yc,h=l.dataset,f=l.yaxiscolumnorder,p=d?0:-1,g=n.length,v=Ve(i/(d?a.length-1:g));!function r(){if(p++,d)for(var i=0;i<g;i++)t[i]=n[i<p?i:Ge(0,p-1)],e[i]=n[i<p?i:p];else t[p-1]=n[p-1],e[p]=n[p];if(p<g){var l=1==p&&d?(a.indexOf(h.getX(n[0]))-(p-1))*v:0,m=(d?a.indexOf(h.getX(n[p]))-a.indexOf(h.getX(n[p-1])):1)*v;(d?null!=h.getY(n[p],f)&&null!=h.getY(n[Ge(0,p-1)],f):null!=h.getY(n[p],f))?c.attrs(s(t)).transition().delay(l).duration(m).ease(o).attrs(s(e)).on("end",u===ki?function(t,e){e==g-1&&r()}:r):r()}}()}function gp(t){var e=Q(0,on);t.attrTween("transform",(function(){var t=l(this).attr("transform");return function(n){return"".concat(t," matrix(").concat(Qe(e(n)),",0,0,1,0,0)")}}))}function vp(t){var e=Q(0,1);t.styleTween("opacity",(function(){return function(t){return e(t)}}))}function mp(t){var e=Q(0,1);t.attrTween("transform",(function(){var t=l(this).attr("transform")||"";return function(n){return"".concat(t," scale(").concat(e(n),")")}}))}function yp(t){t.interrupt()}function bp(t,e,n){return Xn(t)&&(t={}),"add"===e?(t.seriesAdded=!0,t.seriesPositionMap=L(),t.seriesRemoved&&(t.seriesRemoved=!1)):"remove"===e&&(t.seriesRemoved=!0,t.seriesAdded&&(t.seriesAdded=!1,delete t.seriesPositionMap)),Xn(t.maxDOMseriesIndex)&&(t.maxDOMseriesIndex=n?n-1:0),t.seriesAddRemovePhase=!0,t}hp.polygon=function(t,e,n,a,r,o,i){var l=hp.createElement(mr,e,o,i);return hp.setAttributes(l,t,["d"]),e},hp.rect=function(t,e,n,a,r,o,i){var l=hp.createElement(br,e,o,i);return hp.setAttributes(l,t,["x","y","width","height"]),e},hp.circle=function(t,e,n,a,r,o,i){var l=hp.createElement(yr,e,o,i);return hp.setAttributes(l,t,["cx","cy","r"]),e},hp.createElement=function(t,e,n,a){var r=n.getPatternSvg(),o=Ar.SAFARI?n.svg||r:a||r,i=wc("clipPath","#".concat(e),[1],o.select("defs"));return wc(t,".clip",[1],i)},hp.setAttributes=function(t,e,n){n.forEach((function(n){t.attr(n,e[n])}))},Hr.svg_clips=hp;var xp=function(){var t=function(t){return $e(qe(t[0],2)+qe(t[1],2))},e=function(e,n){var a=1;return e[0]*n[1]-e[1]*n[0]<0&&(a=-1),a*Math.acos(function(e,n){var a=function(t,e){return t[0]*e[0]+t[1]*e[1]}(e,n)/(t(e)*t(n));return a<0?Ge(-1,a):Xe(1,a)}(e,n))},n=function(t,n,a,r,o,i,l,s){if(0!==n&&0!==a){r*=Math.PI/180,n=Math.abs(n),a=Math.abs(a);var c,u,d,h=function(t,e){var n=Qe(e),a=Math.sin(e);return[n*t[0]+a*t[1],-1*a*t[0]+n*t[1]]}((d=l,[((u=t)[0]-d[0])/2,(u[1]-d[1])/2]),r),f=function(t,e){return[t[0]*e[0],t[1]*e[1]]}(h,h),p=qe(n,2),g=qe(a,2),v=$e(f[0]/p+f[1]/g);v>1&&(a*=v,p=qe(n*=v,2),g=qe(a,2)),c=$e(Math.abs((p*g-p*f[1]-g*f[0])/(p*f[1]+g*f[0]))),o===i&&(c*=-1);var m=function(t,e){return[t*e[0],t*e[1]]}(c,[n*h[1]/a,-a*h[0]/n]),y=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(function(t,e){var n=Qe(e),a=Math.sin(e);return[n*t[0]-a*t[1],a*t[0]+n*t[1]]}(m,r),function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t,l)),b=[(h[0]-m[0])/n,(h[1]-m[1])/a],x=[(-1*h[0]-m[0])/n,(-1*h[1]-m[1])/a],C=e([1,0],b),k=C+e(b,x);s.push({type:"save",args:[]},{type:"translate",args:[y[0],y[1]]},{type:"rotate",args:[r]},{type:"scale",args:[n,a]},{type:"arc",args:[0,0,1,C,k,1-i]},{type:"restore",args:[]})}else s.push({type:"lineTo",args:l})},a=function(t){var e=[0,0],a=[0,0],r=[],o="",i=!1;function l(t,n){return-1==="mlazhvcsqt".indexOf(t)?e=n:(e[0]+=n[0],e[1]+=n[1]),o=t,e.slice(0)}function s(t,n){for(var r=[],o=e.slice(0),i=0;i<n.length;i+=2){e=o.slice(0);var s=l(t,n.slice(i,i+2));r=r.concat(s),i===n.length-4&&(a=s.slice(0))}return r}function c(){-1==="CcSsQqTt".indexOf(o)&&(a=e.slice(0));var t=[0,0];return t[0]=2*e[0]-a[0],t[1]=2*e[1]-a[1],t}function u(t,n){var a=[n,0];return"H"===t&&(a[1]=e[1]),l(t,a)}function d(t,n){var a=[0,n];return"V"===t&&(a[0]=e[0]),l(t,a)}var h,f={m:function(t,e){var n=t;for(i&&(n="M",i=!1),r.push({type:"moveTo",args:l(n,e)});e.length;)h=e.splice(0,2),r.push({type:"lineTo",args:l(t,h)})},z:function(){r.push({type:"closePath",args:[]})},l:function(t,e){for(;e.length;)h=e.splice(0,2),r.push({type:"lineTo",args:l(t,h)})},h:function(t,e){r.push({type:"lineTo",args:u(t,e)})},v:function(t,e){r.push({type:"lineTo",args:d(t,e)})},c:function(t,e){for(;e.length;)h=e.splice(0,6),r.push({type:"bezierCurveTo",args:s(t,h)})},s:function(t,e){r.push({type:"bezierCurveTo",args:c().concat(s(t,e))})},q:function(t,e){for(;e.length;)h=e.splice(0,6),r.push({type:"quadraticCurveTo",args:s(t,e)})},t:function(t,e){var n=c();r.push({type:"quadraticCurveTo",args:n.concat(s(t,e))}),a=n.slice(0)},a:function(t,a){var o=[e.slice()],i=[l(t,a.slice(-2))],s=o.concat(a.slice(0,-2),i,[r]);n.apply(this,s)}},p=bc(t);return p.length&&p.forEach((function(t){var e=t.function.toLowerCase();f[e](t.type,t.moves)})),r};return{parse:a,drawPath:function(t,e){a(t).forEach((function(t){e[t.type].apply(e,t.args)}))}}}(),Cp={drawPath:function(t,e){xp.drawPath(e,t)},getRadianAngle:function(t){return t*on/180},constant:function(t){return function(){return t}},pointX:function(t){return t[0]},pointY:function(t){return t[1]},rgba:function(t,e){e=wa(e,1);var n=P(t);return"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(e*n.opacity,")")},roundedRect:function(t,e,n,a,r,o,i,l){var s=pc(e,n,a,r,o,i,l);xp.drawPath(s,t)},boundBoxWithHook:function(t,e){xp.drawPath(e,t)},getFontStyles:function(t,e,n,a,r,o){return Nd(null,e,t,n,a,r,o)}};var kp={CLIP_TRACK:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=wp(t,e,n,a,r);return t._track.attr("clip-path",o),o},GET_CLIP:wp};function wp(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=wa(r.desc,_p(t,e)),i={d:o,name:"brush",id:n.id},l="brush_tracker_clip_".concat(a,"_").concat(n.id);return Ar.PHANTOMJS?l=Hr.get(Hr.svg_clips,"polygon",i,{chartObj:n}):hp.polygon(i,l,null,null,null,n),"url(".concat(n.defsLocation,"#").concat(l,")")}function _p(t,e){var n=[0,0],a=t.d3_brush.extent()()[1];return e=e||t.getSelection(),"x"===t.options.type?"M".concat(n[0]," ").concat(n[1],"L").concat(e[0]," ").concat(n[1],"L").concat(e[0]," ").concat(a[1],"L").concat(n[0]," ").concat(a[1],"Z")+"M".concat(e[1]," ").concat(n[1],"L").concat(a[0]," ").concat(n[1],"L").concat(a[0]," ").concat(a[1],"L").concat(e[1]," ").concat(a[1],"Z"):"M".concat(n[0]," ").concat(n[1],"L").concat(a[0]," ").concat(n[1],"L").concat(a[0]," ").concat(e[0],"L").concat(n[0]," ").concat(e[0],"Z")+"M".concat(n[0]," ").concat(e[1],"L").concat(a[0]," ").concat(e[1],"L").concat(a[0]," ").concat(a[1],"L").concat(n[0]," ").concat(a[1],"Z")}var Sp=function(t,e,n){var a=ua(t)&&ua(e),r=e.__$overview;if(a)return function(t,e){if(!ua(t)||!ua(e))return;var n=t.map((function(t,n){return Tp(t,e[n])})),a=[];return Pp(n.slice().reverse(),a,n),n}(t,e);var o=Tp(t,e);return r&&function(t,e){var n=t.canvasarea,a=t.chartarea,r=t.titlearea;n.width=e.width,a.width=e.width,r.width=e.width,n.height=e.height,a.height=e.height,r.height=e.height}(o,n),o&&(o.isMiniature?o.sparkline.draw():o.draw()),o},Op=function(t,e){return t.isD3Selection||(t=l(t)),Ap(t,e)};function Ap(t,e){return new Op.GeoMap(t,e)}function Tp(t,e){if(t.isD3Selection||(t=l(t)),!Wa(t.node()))return this.console.warn("No container"),null;var n=t.datum(e),a=null;return n.each((function(t){var e=l(this);(a=Sp.get(e,t)).showLoading(e)})),a}function Pp(t,e,n){var a=t.length,r=t[a-1];a||(n.chartRendered=!0),a>0&&1!=r.drawStarted&&Wa(r.container.node())&&(r.draw(),r.drawStarted=!0,Ep(t,e,n))}function Ep(t,e,n,a){var r=t.length,o=t[r-1];if(o.chartRendered||o.breakOnErr)e.push(t.pop()),Pp(t,e,n);else{null!=a&&clearTimeout(a);a=setTimeout((function(){Ep(t,e,n,a)}),10)}}function Lp(t,e,n){return{line:{strokeColor:"grey",strokeWidth:2,height:t[e?1:0]+20},triangleUp:{size:15,fillColor:"#4C4C4C"},triangleDown:{size:15,fillColor:"#4C4C4C"},triangleUpDown:{size:15,fillColor:"#4C4C4C",padding:t[e?1:0]+15},box:{strokeWidth:1,strokeColor:"black",fillColor:"transparent",height:t[e?1:0],width:n?t[e?0:1]/n:10},enlarge:{range:1.2,height:t[e?1:0],width:n?t[e?0:1]/n:10},lever:{height:26,width:9,radius:2,stripeHeight:8,stripePadding:2,fillColor:"white",strokeColor:"#DADADA",stripeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},hollowCircle:{size:25,outerFillColor:"white",outerStrokeColor:"#DADADA",innerStrokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},circle:{size:25,outerStrokeColor:"white",outerStrokeWidth:2,innerFillColor:"white",shadow:"0 0 2px rgba(0,0,0,0.2)"},vernier:{height:26,width:9,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},pentagon:{size:8,bandWidth:3,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)",height:t[e?1:0]},lineCircle:{size:15,strokeWidth:2,strokeColor:"blue",position:e?"end":"start"},rectangle:{fillColor:"#333",strokeWidth:1}}}var Mp=L();function Dp(t,e){Mp.set(t,e)}var Ip=function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0];if(Mp.has(t))return Mp.get(t);var o,i=null,l={x:1,y:0}[n],s="x"===n,c=Rp(n,t,a,e.size);switch(c=c.map((function(t,e){return t+r[e]})),t){case"line":i={shape:np("vertical-line")(e.height),style:{stroke:e.strokeColor,"stroke-width":e.strokeWidth}};break;case"triangleUp":i={shape:np("triangle-down")(e.size),style:{fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth}};break;case"triangleDown":i={shape:np("triangle-up")(e.size),style:{fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth}};break;case"triangleUpDown":var u=e.padding/2,d=s?[0,u]:[u,0],h=d.map((function(t){return-1*t}));h=[h[0]+c[0],h[1]+c[1]],d=[d[0]+c[0],d[1]+c[1]],i={shape:[np("triangle-down")(e.size),np("triangle-up")(e.size)],style:[{fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth,transform:"translate(".concat(h,")")},{fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth,transform:"translate(".concat(d,")")}]};break;case"box":var f=e.strokeWidth;i={shape:pc(-((v=e.width)-f)/2,-((m=e.height)-f)/2,v-f,m-f,Ia()),style:{stroke:e.strokeColor,"stroke-width":e.strokeWidth,fill:e.fillColor}};break;case"enlarge":f=e.strokeWidth;var p=e.range||1;i={shape:pc(-(v=e.width*p)/2,-(m=e.height*p)/2,v,m,Ia()),style:{stroke:e.strokeColor,"stroke-width":e.strokeWidth,fillColor:e.fillColor}};break;case"lever":var g=Ia(e.radius);i={shape:[pc(-e.width/2,-e.height/2,e.width,e.height,g),"M".concat(-e.stripePadding/2," ").concat(-e.stripeHeight/2," L").concat(-e.stripePadding/2," ").concat(e.stripeHeight/2," M").concat(e.stripePadding/2," ").concat(-e.stripeHeight/2," L").concat(e.stripePadding/2," ").concat(e.stripeHeight/2)],style:[{fill:e.fillColor,stroke:e.strokeColor},{stroke:e.stripeColor}]};break;case"hollowCircle":i={shape:[np()(e.size),np()(.4*e.size)],style:[{fill:e.outerFillColor,stroke:e.outerStrokeColor},{fill:e.innerFillColor,stroke:e.innerStrokeColor}]};break;case"circle":i={shape:[np()(e.size),np()(.3*e.size)],style:[{fill:e.outerFillColor,stroke:e.outerStrokeColor,"stroke-width":e.outerStrokeWidth},{fill:e.innerFillColor,stroke:e.innerStrokeColor}]};break;case"vernier":var v=e.width,m=e.height,y="M".concat(.5*-v," ").concat(.5*-m," L").concat(.5*v," ").concat(.5*-m," L").concat(.5*v," ").concat(.5*m," L").concat(.5*-v," ").concat(.2*m," Z"),b="M".concat(.5*-v," ").concat(.5*-m," L").concat(.5*v," ").concat(.5*-m," L").concat(.5*v," ").concat(.2*m," L").concat(.5*-v," ").concat(.5*m," Z");i={shape:[[y],[b]],style:{fill:e.fillColor,stroke:e.strokeColor}};break;case"pentagon":var x=e.size,C=e.bandWidth,k=(m=e.height,"M".concat(.5*-x-C," ").concat(.5*-m-C," L").concat(.5*x+C," ").concat(.5*-m-C," L").concat(.5*x+C," ").concat(.5*m,"L0 ").concat(.5*m+1.5*C+2," L").concat(.5*-x-C," ").concat(.5*m,"Z")+"M".concat(.5*-x," ").concat(.5*-m," L").concat(.5*x," ").concat(.5*-m," L").concat(.5*x," ").concat(.5*m-.5*C,"L0 ").concat(.5*m+.5*C," L").concat(.5*-x," ").concat(.5*m-.5*C,"Z")),w="M".concat(.5*-x," ").concat(.5*-m," L").concat(.5*x," ").concat(.5*-m," L").concat(.5*x," ").concat(.5*m," L").concat(.5*-x," ").concat(.5*m,"Z");i={_effectElementIndex:1,shape:[w,k],style:[{},{"fill-rule":"evenodd",fill:e.fillColor,stroke:e.strokeColor}]};break;case"lineCircle":x=e.size;var _=a[l],S="end"===e.position?1:-1,O=x/2*S,A="vertical-line";"end"===e.position&&(O+=a[l]),o=[0,O],s||o.reverse(),o=o.map((function(t,e){return t+r[e]})),i={shape:[np("circle")(x),np(A)(_)],style:[{fill:e.fillColor,stroke:e.strokeColor,transform:"translate(".concat(o.join(" "),")")},{fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth}]};break;case"rectangle":return{shape:"default",style:_objectSpread({},e)}}return o=c&&"translate(".concat(c.join(" "),") ")||"",Ma(i.style).forEach((function(t){var e=t.transform||o;"y"===n&&(e+=" rotate(-90)"),t.transform=e})),i},Rp=function(t,e,n,a){var r={x:1,y:0}[t],o=[0,0];switch(e){case"triangleUp":o[r]=-a/2;break;case"triangleDown":o[r]=n[r]+a/2;break;default:o[r]=n[r]/2}return o};function zp(t){return{x:[{type:"w"},{type:"e"}],y:[{type:"n"},{type:"s"}]}[t]}function jp(t,e,n,a,r,o){var i=[n[1][0]-n[0][0],n[1][1]-n[0][1]],l=_objectSpread(_objectSpread({},Lp(i,"x"===t,a)[e]),r),s=Ip(e,l,t,i,o);return Ma(s).forEach((function(t){t.alignCenter=!1})),s}function Fp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lever",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=jp(t,e,n,a,r,o);return zp(t).map((function(t){return _objectSpread(_objectSpread({},t),i)}))}function Bp(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,o=t.axes.rotated,i=r||Hp(t,e,a,n),l={x:o?"y":"x",y:o?"x":"y"},s=i[1]-i[0],c="x"===l[n]?"width":"height",u=t.plotarea[c]/s,d=0,h=0;return"height"===c?h=-i[0]:d=-i[0],R.scale(u).translate(d,h)}function Hp(t,e,n,a,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=arguments.length>6?arguments[6]:void 0;e=[e[0],e[e.length-1]];var l,s=tc(t,a,n)||{},c=s.scale,u=s.baseScale;return c=wa(i,o?u:c),l=e.map(c).sort(B),c.bandwidth&&(l=Np(c,i||u||c,l,r,t.axes.rotated)),l}function Np(t,e,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=wh(e).slice(0).sort(B),o=(r[1]-r[0]-e.bandwidth())/2,i=t.outerPaddingPx;!1===a&&(o=i=0);var l=e.bandwidth(),s=r[0]===n[0]?n[0]-i:n[0]-o,c=r[r.length-1]===n[1]?n[1]+l+i:n[1]+l+o;return[s,c]}function Wp(t){var e=t.systemConf.chart.scroll.overview.data,n=t.systemConf.chart.scroll.overview.plotHeight;return(e=e?$n(e=sa(e)?Vp(t,e):e,t,Vp):Vp(t,e)).plotHeight=n,e}function Vp(t,e){if(!e){e=Hn(t.userdata),pa(e,"chart.marginTop",0),pa(e,"chart.marginBottom",0),pa(e,"chart.marginLeft",0),pa(e,"chart.marginRight",0),pa(e,"canvas.title.show",!1),pa(e,"canvas.subtitle.show",!1),pa(e,"canvas.border.show",!1),pa(e,"canvas.shadow.show",!1),(e.metadata.axes.y||[]).forEach((function(t,n){pa(e,"chart.axes.yaxis[".concat(n,"].show"),!1)}));var n=t.dataset.getColumn("x",0);pa(e,"chart.axes.xaxis.show",n.datatype===Po&&"auto"===fa(n,"time.format.specifier")),pa(e,"chart.axes.xaxis.label.show",!1)}var a=t.scroll.settings.orient,r=e.chart.axes.xaxis.reversed;return pa(e,"chart.axes.xaxis.reversed","right"===a||"left"===a?!(!Xn(r)&&!t.racing)||r:!Xn(r)&&!t.racing&&r),pa(e,"__$overview",!0),pa(e,"chart.plot.renderer.mode",t.systemConf.chart.scroll.overview.renderMode),pa(e,"chart.axes.rotated",a?"left"===a||"right"===a:t.axes.rotated),pa(e,"chart.plot.datalabels.show",!1),pa(e,"chart.plot.events.enabled",!1),pa(e,"credits.show",!1),pa(e,"notes.enabled",!1),pa(e,"chart.scroll.enabled",!1),pa(e,"chart.axes.xaxis.ticklabel.textOverflow","none"),pa(e,"chart.axes.animation.enabled",!1),pa(e,"metadata.axes.label",[]),pa(e,"legend.enabled",!1),pa(e,"legend.size.enabled",!1),pi.helpers.getAllChartTypes(e,"object").forEach((function(n){var a=t.systemConf.chart.plot.plotoptions[n.name];a&&a.marker&&pa(e,"chart.plot.plotoptions.".concat(n.name,".marker.useSVGMarkers"),!1),pa(e,"chart.plot.plotoptions.".concat(n.name,".datalabels.show"),!1),pa(e,"chart.plot.plotoptions.".concat(n.name,".datalabels.stackLabels.show"),!1),pa(e,"chart.plot.plotoptions.".concat(n.name,".animation.enabled"),!1)})),e}function Yp(){return(Yp=_asyncToGenerator(_regeneratorRuntime().mark((function t(e,n,a){var r,o;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Wp(e),(o=e.container.selectAll("div.zcoverview")).styles({position:"absolute","pointer-events":dn,"box-sizing":"border-box",width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}),o.style("display",null),e.staticPaneSVG.selectAll(".brush-scroll").style("display",null),e.overview=Sp(o.node(),r,n),e.systemConf.chart.scroll.overview.show||(o.style("display","none"),e.staticPaneSVG.selectAll(".brush-scroll").style("display","none")),a&&a(e.overview);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Up(t,e){var n=M(["lineCircle"]),a=t.settings.resizer||{},r=a.type;if(a.enabled&&n.has(r)){var o=a[r]||{},i=function(t,e,n,a,r){return _objectSpread(_objectSpread({},Lp([n[1][0]-n[0][0],n[1][1]-n[0][1]],"x"===t,a)[e]),r)}("x",a.type,e,null,o);return i.size}return 0}function Gp(t){var e=this,n=this,a=n.dimension,r=n.settings,o=n.brushExtent,i=r.overview||{},l=t.axes.rotated,s=n.scrollDomain,c={scrollType:this.type,brushInstance:this.brushInstance,scrollScale:this.settings.brushScale,chartObj:this.chart},u=ua(n.settings.selectionDomain)?n.settings.selectionDomain:$n(n.settings.selectionDomain,c)||s,d=r.overview.renderMode;!1!==i.syncScale&&(n.brushScale=t.axes.x.scale),"plot"===i.bindTo&&(o=Xp(t,r,!0));var h,f,p=n.addEvent(o,u);"canvas"===d?(h=function(t,e){e.width=Ve(e.width);var n=is(t,"height"),a=is(t,"width");return ja(wc("canvas",".overview-grayscale",[1],t.d3container.select(".canvas-component"),"svg.static").attrs({width:a,height:n}).styles({position:"absolute",left:"".concat(t.plotarea.left,"px"),top:"".concat(t.plotarea.top,"px"),width:"".concat(a,"px"),height:"".concat(n,"px")}).node().getContext("2d"))}(t,a),f=function(t){return t.getImageData(0,0,t.canvas.width,t.canvas.height)}(t.context),function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gray",n=P(e),a=t.data,r=0;r<a.length;r+=4){var o=a[r]+a[r+1]+a[r+2];"grayscale"===e?a[r]=n.r=a[r+1]=a[r+2]=o:0!==o&&(a[r]=n.r,a[r+1]=n.g,a[r+2]=n.b,a[r+3]=255*n.opacity)}}(f,i.unselectedEffect)):this.chart.overview.svg.selectAll(".seriesholder").style("display","none");var g=function(){var a=p.getSelection(),o=function(t,e,n,a){var r=t[1]-t[0],o=n?0:t[0]-a.left,i=n?t[0]-a.top:0,l=n?e.height:r,s=n?r:e.height;return{x:o,y:i,width:l,height:s}}(a,r,l,t.plotarea);"canvas"===d?(h.putImageData(f,0,0),h.clearRect(o.x,o.y,o.width,o.height)):hp.rect(o,"overviewClipPath_0",null,null,null,e.chart,null),kp.CLIP_TRACK(p,a,n.chart,"overview")};g(),p.addHook("brush.clipCanvas",g)}function Xp(t,e,n){var a=t.plotarea;return n?[[a.left,a.top],[a.width+a.left,a.height+a.top]]:e.orient?[[0,0],"right"===e.orient||"left"===e.orient?[e.height,t.plotarea.height]:[t.plotarea.width,e.height]]:[[0,0],t.axes.rotated?[e.height,t.plotarea.height]:[t.plotarea.width,e.height]]}function Zp(t){switch(t){case"waterfall":case"gantt":case"boxplot":case"bullet":case"barrange":t="bar";break;case"web":case"arearange":t="area";break;case"bubble":case"geobubble":case"geoscatter":t="scatter";break;case"bubblepie":case"geobubblepie":t="bubblepie"}return t}function qp(t,e,n,a){var r=t.systemConf.chart.plot.datalabels;if(t.systemConf.__$overview)return!1;if(n){if(Me&&e.labelQueue.length&&!r.renderOnInit){var o=r.events;Du(t,o,0,"init"),wn.getComponent("labelRenderer")(e.labelQueue,e.labelArray,t),Du(t,o,0,a?"onreload":"onload")}e.labelArray={},e.labelQueue=[],"chartRendered"===Qp(t)&&(t.dataObject.isFlowChartCategory?$p(t,e):t.timerObj[t.timerObj.length]=setTimeout((function(){$p(t,e)}),17))}}function $p(t,e){var n,a=t.systemConf.notes;if(na(a)&&!0===a.enabled){var r=wn.getComponent("annotation");r._empty||(n=r.draw(t,e.notesArray),setTimeout((function(){wa(Gn(t,"annotation.flatten",!0),[]).forEach((function(t){return t()}))}),0))}else t.notes.selectAll("*").remove(),t.container.selectAll("g.zc-annotation").remove();e.notesArray=n||[]}function Qp(t){return wa(Gn(t.systemConf,"notes.animation.delay",!0),"chartRendered")}function Kp(t){if(Ao(t))return Do(t.dataObject).some((function(e){var n="".concat(e.row,"_").concat(e.column),a=Ui(t,n,0).value;return qa(_e.svgOnly,a)}));var e=t.chartTypes[0];return _e.svgOnly.indexOf(e.value)>-1||t.dataObject.pieWithAxis}Yt.rendererConf=function(){var t={params:{},dynamicSeriesPosition:function(e){return arguments.length?(t.params.dynamicSeriesPosition=e,t):t.params.dynamicSeriesPosition},xscale:function(e){return arguments.length?(t.params.xscale=e,t):t.params.xscale},yscale:function(e){return arguments.length?(t.params.yscale=e,t):t.params.yscale},shapescale:function(e){return arguments.length?(t.params.shapescale=e,t):t.params.shapescale},stacked:function(e){return arguments.length?(t.params.stacked=e,t):t.params.stacked},datasetIndex:function(e){return arguments.length?(t.params.datasetIndex=e,t):t.params.datasetIndex},renderingOrderIndex:function(e){return arguments.length?(t.params.renderingOrderIndex=e,t):t.params.renderingOrderIndex},legendOrderIndex:function(e){return arguments.length?(t.params.legendOrderIndex=e,t):t.params.legendOrderIndex},rendererIndex:function(e){return arguments.length?(t.params.rendererIndex=e,t):t.params.rendererIndex},axisrotated:function(e){return arguments.length?(t.params.axisrotated=e,t):t.params.axisrotated},commonPlotOptions:function(e){return arguments.length?(t.params.commonPlotOptions=e,t):t.params.commonPlotOptions},color:function(e){return arguments.length?(t.params.color=e,t):t.params.color},paneColor:function(e){return arguments.length?(t.params.paneColor=e,t):t.params.paneColor},chartObj:function(e){return arguments.length?(t.params.chartObj=e,t):t.params.chartObj},notes:function(e){return arguments.length?(t.params.notesArray=e,t):t.params.notesArray},updateLabelArrayAndLabelQueue:function(e,n){return arguments.length?(t.params.labelArray=e,t.params.labelQueue=n,t):[t.params.labelArray,t.params.labelQueue]},hasNegValue:function(e){return arguments.length?(t.params.hasNegValue=e,t):t.params.hasNegValue},dataset:function(e){return arguments.length?(t.params.dataset=e,t):t.params.dataset},yaxiscolumnorder:function(e){return arguments.length?(t.params.yaxiscolumnorder=e,t):t.params.yaxiscolumnorder},threshold:function(e){return arguments.length?(t.params.threshold=e,t):t.params.threshold},thresholdType:function(e){return arguments.length?(t.params.thresholdType=e,t):t.params.thresholdType},colorOverlay:function(e){return arguments.length?(t.params.colorOverlay=e,t):t.params.colorOverlay},bound:function(e){return arguments.length?(t.params.bound=e,t):t.params.bound},legendIndex:function(e){return arguments.length?(t.params.legendIndex=e,t):t.params.legendIndex},legendOrder:function(e){return arguments.length?(t.params.legendOrder=e,t):t.params.legendOrder}};return t},Yt.render=function(t){var e=t.systemConf.chart.plot.renderer.mode.toLowerCase(),n={mode:Kp(t)?"svg":e.toLocaleLowerCase()},a={labelQueue:[],notesArray:[],labelArray:{}};if(t.rendererConf||(t.rendererConf=[]),"function"!=typeof Yt["".concat(n.mode,"Renderer")])throw new SyntaxError("".concat(n.mode,"Renderer not found"));return n[n.mode]=Yt["".concat(n.mode,"Renderer")](t,a),n.draw=function(e){var n=na(t.cache.clickSelectionData),r=t.cache.clickSelectionData;t.chartRendered=!1,a.labelArray={},a.labelQueue=[],t.annotation?t.annotation.events=[]:t.annotation={events:[]},this[this.mode].draw(e),n&&na(r[0])&&function(t,e){if("canvas"==t){var n=e.systemConf.legend,a=e.legend.component,r=Array(e.seriesdata.length).fill().map((function(t,e){return e}));a.highlightSeries(null,e.seriesdata,r,n,e,!1,!0)}}(this.mode,t);var o=Qp(t);"chartRendered"!==o&&(t.timerObj[t.timerObj.length]=setTimeout((function(){$p(t,a)}),o))},n},Ee.renderCompletedEvents=function(t,e,n,a){var r,o=t.systemConf,i=t.dataObject.hasLevelMarker&&!t.isAxisCategory,s=function(t){var e=t.dataObject;if(Ao(t)){var n=(t.distinctChartTypes||er(up(t.userdata))).map((function(t){return Gt[t]}));return n.every((function(t){return qa(_e.axis,t)}))}var a=e.hasLevelMarker&&!e.isAxisCategory;return(e.isAxisCategory||e.isPolarAxisCategory)&&!e.pieWithAxis||a||t.isGeoMap&&!e.hasBubblePie}(t),c=t.renderer,u=!1;t._isAxisCategory()||t.dataObject.isPolarAxisCategory?t.timerObj[t.timerObj.length]=setTimeout((function(){u=!0}),t.axes.animationDuration+17):u=!0;var d=t.timerObj[t.timerObj.length]=setInterval((function(){if(ka()&&(t.chartRendered=!0),t.destroying)return clearInterval(d),!0;for(r=c.length;r--;)if(!0!==c[r].chartRendered||!u||t.racing&&!t.racing.ended&&t.racing.preventEvent)return!1;return function(){try{t.divScroll&&Ar.CHROME&&t.divScroll.fixScrollView(!0,t.canvasarea,t),t.viewFlow&&t.viewFlow.marks._custom.length&&t.viewFlow.marks._custom.map((function(e){Kf($n(e.mark.parser,t))})),Du(t,o.chart.plot.events,0,e?"onreload":"onload"),qp(t,n,!(s&&e),e),t.handleHiddenContainer(!0),t.overview&&function(t){var e=t.overview&&t.overview.svg,n=e&&e.selectAll(".seriesholder_copy");if(e&&!n.node()){var a=e.selectAll(".seriesholder"),r=e.selectAll(".seriesClippathholder"),o=a.node().cloneNode(1);o.setAttribute("class","seriesholder_copy"),l(o).selectAll("path").each((function(e,n){var a=l(this),r=t.scroll.settings.overview.unselectedEffect,o=function(t,e,n,a,r){n!=dn&&"transparent"!=n&&t[r](e,a)};o(a,"fill",a.style("fill"),r,"style"),o(a,"stroke",a.style("stroke"),r,"style"),o(a,"fill",a.attr("fill"),r,"attr"),o(a,"stroke",a.attr("stroke"),r,"attr")})),r.node().insertBefore(o,a.node()),o=e.selectAll(".seriesholder_copy"),a.style("display",null),o.style("display",null),a.attr("clip-path","url(#overviewClipPath_0)");var i=t.scroll.brushInstance._track.attr("clip-path");o.attr("clip-path",i)}}(t),t.timerObj[t.timerObj.length]=setTimeout((function(){Du(t,o.canvas.events,0,e?"onreload":"onload")}),30)}catch(e){Mv.helpers.handleErrors(t,e)}t.phase=null}(),clearInterval(d),hr(a)?a():(t.updating=!1,t.chartRendered=!0),!0}),1e3/60);s&&qp(t,n,i||e,e)},Ee.arrangeSeriesRenderingOrder=function(t,e,n,a){var r=e||t.seriesdata,o=pi.helpers;if(t.dataObject.isCombinationalChart){var i={defaultType:0,area:0,arearange:0,geoheatmap:0,bar:1,barrange:1,line:2,bubble:3,geobubble:3,bubblepie:4,geobubblepie:4,scatter:5,geoscatter:5},l=t.userdata.seriesdata.type;a&&(r=e.map((function(t){return t.node})));var s=Hn(r),c=n||0;return s.map((function(t,e){return t.counter=e,t.seriesidx=c++,t})),s.sort((function(t,e){var n=o.getChartType(t.type||l,"string"),a=o.getChartType(e.type||l,"string"),r=null==i[n]?i.defaultType:i[n],s=null==i[a]?i.defaultType:i[a],c=t.seriesidx,u=e.seriesidx;return r<s?-1:r>s?1:c<u?-1:c>u?1:0})),a?e.map((function(t,e){return t.node=r[s[e].counter],t})):s}return r},Ee.setRendererProp=function(t,e,n,a,r,o,i,l,s){i=wa(i,a);var c,u,d,h,f,p,g,v=t.chartTypes[a],m=l?we.get(l):v.name,y=l||v.value,b=(t.systemConf,pi.helpers),x=t.dataObject.hierarchical,C=x&&x.facetRendering;if(C){c=x.pivotLayout.getRootNodeList("row"),u=x.pivotLayout.getRootNodeList("column"),d=c.getCount(),c.getClustersCount(),h=c.hasMultiCluster(),p=u.getLeavesCount(),g=x.pivotLayout.layers.groups[s],f=!!h&&x.pivotLayout.layers.isLayerNode;var k=x.gridOptions,w="".concat(n[a].row,"_").concat(n[a].column);k[w]&&(k[w].renderer[a]=e)}var _=C?g.indexOf(n[a].value):a;!function(e,n,a,r,i,l,s){var c=t.dataObject.hierarchical,u=c&&c.facetRendering,d=u&&n[a]?n[a].node.color:null,h=!!(u&&c.pivotLayout.rows&&c.pivotLayout.rows.hasMultiCluster())&&c.pivotLayout.layers.isLayerNode,f=u&&h?n[l].node:t.seriesdata[l],p=n[a]?"".concat(n[a].row,"_").concat(n[a].column):"0_0",g=u?cl(t,p,a):f.color||cl(t,p,a),v=h?n[l].parent.node.yaxiscolumnorder:t.seriesdata[a].yaxiscolumnorder,m=u&&c.hasRows()?bo(n[a].row||0,null,"y",t):b.getParsedYAxisOrder(v);t.rendererConf[s].chartObj(t).dataset(t.dataset).yaxiscolumnorder(m).commonPlotOptions(t.systemConf.chart.plot.plotoptions[r]).color("bubblepie"==r?t.seriesColor:t.isAxisCategory?function(e,n,a,r,o,i,l){var s=Gn(t.userdata,"chart.axes.xaxis")?t.userdata.chart.axes.xaxis:{},c=Gn(t.userdata,"chart.axes.yaxis")?t.userdata.chart.axes.yaxis:{},u=null!=c&&null!=c[o]&&null!=c[o].threshold?c[o].threshold:null,d=Gn(s,"threshold")?s.threshold:null,h=d&&d.coloroverlay||{},f=u&&u.coloroverlay||{},p=h.show||null!=f&&f.show;if(p){var g=null!=f&&f.show?"y":h.show?"x":null,v=null!=f&&f.show?f:h.show?h:null,m=null!=f&&f.show?"y":h.show?"x":null,y=p?Ht.threshold.overlay(t,"continous"):null,b="y"===m?o:0;return t.rendererConf[l].threshold(p?v:null).thresholdType(m).colorOverlay(p?Ht.threshold.overlay(t,"discrete",g,v):null),"bar"==i||"scatter"==i||"bubble"==i?a:y(a,v,b,m)}return a}(0,0,g,0,m,r,s):t.dataObject.isPolarAxisCategory||Ys(t)?g:t.seriesColor).paneColor(d).notes(o.notesArray).updateLabelArrayAndLabelQueue(o.labelArray,o.labelQueue)}(0,n,a,m,0,_,i),e.commonRendererProp(t.rendererConf[i]);var S=f?n[_].parent.node.yaxiscolumnorder:t.seriesdata[a].yaxiscolumnorder,O=f?n[_]:t.seriesdata[_],A=b.getParsedYAxisOrder(S);if(e.chartRendered=!1,t._isAxisCategory()||t.dataObject.isPolarAxisCategory){var T=t.axes.y.groups[A].scale||t.axes.y.groups[0].scale,P=C&&(h||d)?n[a].row||0:null,E=C?p>1?t.axes.x.leaves[n[a].column].scale:t.axes.x.leafScaleGrid:t.axes.x.scale,L=C&&(h||d)?t.axes.y.leaves[P].scale:T,M=t.renderer[a].commonRendererProp().params.dynamicSeriesPosition;t.seriesAddRemoveDetails&&t.seriesAddRemoveDetails.seriesAddRemovePhase&&(M=function(t,e){var n,a=t.renderer[e].commonRendererProp().params,r=a.dynamicSeriesPosition,o=a.datasetIndex,i=t.seriesAddRemoveDetails;if(i.seriesAdded){var l=i.seriesPositionMap;n=l.get(e)?l.get(e):Xn(r)?o:r}else t.seriesAddRemoveDetails.seriesRemoved?n=Xn(r)?o:r:r&&(n=r);return n}(t,a)),t.rendererConf[i].dynamicSeriesPosition(M).xscale(E).yscale(L).shapescale(na(t.dataset.shapeidx)?Fa(t.scales,(function(t){return"shape-0"===t.id})).getScale():null).datasetIndex(a).renderingOrderIndex(r).legendOrderIndex(a).legendIndex(_).legendOrder(s).rendererIndex(i).axisrotated(t.axes.rotated).hasNegValue(t.dataObject.containsNegativeData(A)).stacked(t.dataObject.isstacked(y)),o.labelArray=t.rendererConf[i].params.labelArray,o.labelQueue=t.rendererConf[i].params.labelQueue}if(t.dataObject.isFlowChartCategory&&t.rendererConf[i].datasetIndex(a),Cl(y)&&!Al(y)&&(e.bandwidth1(t.barscale1).bandwidth2(t.barscale2),o.barDatasetIndex=C&&t.barscale2.domain().length>1?_:o.barDatasetIndex,o.image||e.barDatasetIndex(o.barDatasetIndex),null!=O.disabled&&O.disabled||(o.barDatasetIndex=o.barDatasetIndex+O.data.length)),_l(y)){var D=t.rendererConf[i].params;D.categoryColorConfig=Ee.getWaterfallCategoriesConfig(t.seriesdata[a].plotoptions,D.commonPlotOptions)}t.rendererConf[i].bound(Ee.getBound(t,n[a]))},Ee.getBound=function(t,e){var n=t.dataObject.hierarchical;if(n&&n.facetRendering){var a,r,o,i,l=e.row,s=e.column,c=n.pivotLayout,u=c.columns,d=c.rows,h=u.leafSize,f=d.leafSize,p=u.count?u.branches[0].domain.length:1,g=d.count?d.branches[0].domain.length:1,v=p*u.clustersCount,m=g*d.clustersCount,y=u.branches.length,b=d.branches.length,x=t.cache.polar&&t.cache.polar["".concat(l,"-").concat(s)],C=y&&ec(t,"x",0).reversed,k=b&&ec(t,"y",0).reversed;return t.axes.rotated?(a=(k?m-l-1:l)*f,r=(C?s:v-s-1)*h,o=f,i=h):(a=(C?v-s-1:s)*h,r=(k?m-l-1:l)*f,o=h,i=f),{width:o||0,height:i||0,x:a||0,y:r||0,polar:x}}var w=t.plotarea,_=w.width,S=w.height,O=t.plotarea_approx;return _defineProperty({width:_,height:S,polar:O,x:0,y:0,left:0,top:0},"polar",O)},Ee.saveSeriesdataInRenderer=function(t,e,n){n=wa(n,e);var a=t.rendererConf[e].params,r=a.xscale,o=a.yscale,i=a.yaxiscolumnorder,l=t.dataset,s=l.getDataType("x"),c=l.getDataType("y",i),u=t.seriesdata[e].data,d=t.renderer[n];if(s==To||c==To){d.seriesdataAfterUpdate=[];var h=pi.helpers,f=(h.isCatNull(l,"x"),h.isCatNull(l,"y",i),s==To?r.domain():null),p=c==To?o.domain():null;u.forEach((function(e,n){d.seriesdataAfterUpdate[n]=t.dataObject.updateSeriesdatabyCategories(Yn(e),f,p,i)}))}else d.seriesdataAfterUpdate=null};var Jp={},tg=(Yt.canvasRenderer=function(t,e){var n={},a=t.systemConf,r=pi.helpers;return n.draw=function(n){var o=t.scroll&&!t.scroll.initialized&&t.scroll.visible;if(t.container.select(".highlight-canvas").style("visibility","hidden"),t.container.select(".selection-canvas").remove(),t.canvasScrollGroup?(t.context=ng(t,"zc-canvas",null,t.canvasScrollGroup),t.labelHolderContext=ng(t,"zc-labelholder-canvas",null,t.canvasScrollGroup),t.canvasScrollGroup.selectAll("canvas").styles({left:0,top:0})):(t.context=ng(t,"zc-canvas",".static"),t.labelHolderContext=ng(t,"zc-labelholder-canvas",window.PointerEvent?t.container.selectAll("div.legendarea").node():null)),o)return!1;e.barDatasetIndex=0,t.systemConf.legend.enabled&&t.svg.select(".seriesholder").selectAll("*:not(.zmarea)").remove(),t.dataObject.isPolarAxisCategory&&t.labelHolderContext.translate(t.plotarea_approx.x,t.plotarea_approx.y),t.dataset.getDataType("x")==To&&t.isAxisCategory&&Wt.barBandwidth(t);var i=null;t.chartRendered=!1;var l=t.dataObject.isCombinationalChart,s=t.plotarea,c=l?Ee.arrangeSeriesRenderingOrder(t):t.seriesdata,u=t.dataObject.hierarchical,d=u&&u.facetRendering,h=[{data:c}];d&&(h=nr((d&&u.pivotLayout).getRootNodeList("layer").panes));t.isAxisedHierarchyChart&&(h=[{data:new(wn.getComponent("hierarchyDataAdapter"))(t.seriesdata,t.preProcessor).getData()}]);var f=0;h.forEach((function(n,o){e.barDatasetIndex=0,n.data.forEach((function(o,s){var u=d?Ee.arrangeSeriesRenderingOrder(t,n.data,f,!0):c,h=d?o.node:o,g=l?d?s:u[s].seriesidx:s;p=d?f++:g;var v=d?o.layer:0;i=r.getChartType(h.type||t.userdata.seriesdata.type,"string");var m=r.getChartType(h.type||t.userdata.seriesdata.type,Eo);null==t.renderer[p]&&(t.renderer[p]=tg(i),t.rendererConf[p]=new Yt.rendererConf),t.renderer[p].chartRendered=!1,0==s&&(Du(t,a.chart.plot.events,0,"init"),t.hideLoading(t.container)),Ee.setRendererProp(t,t.renderer[p],u,g,s,e,p,m,v)}))}));var p;f=0;if(h.forEach((function(e,n){e.data.forEach((function(n,a){var o=d||t.isAxisedHierarchyChart?Ee.arrangeSeriesRenderingOrder(t,e.data,f,!0):c,u=d?n.node:n,h=l?d?a:o[a].seriesidx:a;p=d?f++:h;var g=r.getChartType(u.type||t.userdata.seriesdata.type,Eo),v=Xi(t,g,"axis"),m=Xi(t,g,"polarAxis");if(t._isAxisCategory()&&!t.isAxisedHierarchyChart||m||!(h>0))if(i=r.getChartType(u.type||t.userdata.seriesdata.type,"string"),!t._isAxisCategory()||v||m||0==a){if(s.width>0&&s.height>0){var y=t.renderer[p].commonRendererProp().params.bound,b=v?0:y.x+(m?y.polar.x:0),x=v?0:y.y+(m?y.polar.y:0);t.context.translate(b,x),eg(t,o,t.renderer[p]),t.context.translate(-b,-x)}}else t.renderer[p].chartRendered=!0;else t.renderer[p].chartRendered=!0}))})),t.systemConf.chart.plot.datalabels.renderOnInit){var g=t.systemConf.chart.plot.datalabels.events;Du(t,g,0,"init"),wn.getComponent("labelRenderer")(e.labelQueue,e.labelArray,t),Du(t,g,0,n?"onreload":"onload")}if(Ee.renderCompletedEvents(t,n,e),!n){var v=fp(t.systemConf.chart.plot.plotoptions[i],t.seriesdata[0].plotoptions,t,i),m=na(v.duration)?v.duration:400;if(!na(v.enabled)||0===m)return;var y=t.seriesdata.length,b=t.d3container.selectAll("canvas").style("opacity",0),x=t.timerObj[t.timerObj.length]=setInterval((function(){var e=!0;if(t.destroying)clearInterval(x);else{if(t.renderer.length===y)for(var n=0;n<t.renderer.length;n++)if(!t.renderer[n].chartRendered){e=!1;break}e&&(clearInterval(x),b.style("opacity",0).transition().duration(m).style("opacity",1))}}),1e3/60)}},n}).createCanvasRenderer=function(t){return t=Zp(t),new Jp[t]},eg=Yt.canvasRenderer.drawCanvas=function(t,e,n,a,r,o,i,l,s){function c(t,e,n){return t.select("g.".concat(e)).attr("transform","translate(".concat(n.x,",").concat(n.y,")"))}a=na(a)?a:t.context,c(t.wrap,"seriesholder",{x:t.plotarea.left,y:t.plotarea.top}),c(t.staticPaneSVG,"labelholder",{x:t.plotarea.left,y:t.plotarea.top}),n(a,e,r,o,i,l)},ng=Yt.canvasRenderer.updateCanvasContext=function(t,e,n,a){var r=t.svg.node().parentNode.querySelector("canvas.".concat(e)),o=is(t,"width"),i=is(t,"height"),l=t.staticPaneSVG.node(),s=t.svg.node().parentNode;(a=a||s).isD3Selection&&(a=a.node()),r||((r=document.createElement("canvas")).className=e,r.setAttribute("actual-width",o),r.setAttribute("actual-height",i),r.style.position="absolute",r.style.pointerEvents=dn,"string"==typeof n&&(n=t.container.node().querySelector(n)),a.insertBefore(r,n||(s===a?l:null))),r.width=o,r.height=i,r.style.left="".concat(Ve(t.plotarea.left),"px"),r.style.top="".concat(Ve(t.plotarea.top),"px"),r.style.visibility="visible";var c=r.getContext("2d"),u="".concat(Ar.prefix.lowercase,"ImageSmoothingEnabled");return c.clearRect(0,0,o,i),c[u]=!1,c.imageSmoothingEnabled=!1,ja(c)};function ag(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;isNaN(e.x0)&&(e.x0=0),isNaN(e.x1)&&(e.x1=n.width),t.moveTo(e.x0,e.y0),t.lineTo(e.x1,e.y0),t.lineTo(e.x1,e.y1),t.lineTo(e.x0,e.y1),t.closePath(),a=4;var r=e.y1-e.y0,o=e.y0+r/2,i=e.y0,l=e.y1;r<a&&(i=o-a/2,l=o+a/2),e._polypoints=[[e.x0,i],[e.x1,i],[e.x1,l],[e.x0,l]]}function rg(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=Ge(e.width/2,a/2),o=e.source.x1,i=e.y0-r,l=e.target.x0,s=e.y1-r,c=n.padding||0;o+=c,l-=c;var u=Ge(e.width,a),d=(o+l)/2,h=(o+l)/2;return l-o>u/2&&(i>s?h+=u/2:d+=u/2),t.moveTo(o,i),t.bezierCurveTo(d,i,d,s,l,s),t.lineTo(l,s+u),t.bezierCurveTo(h,s+u,h,i+u,o,i+u),t.closePath(),t}function og(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=Ge(e.width/2,a/2),o=e.source.x1,i=e.y0-r,l=e.target.x0,s=e.y1-r,c=Ge(e.width,a),u=n.padding||0;return o+=u,l-=u,t.moveTo(o,i),t.lineTo(l,s),t.lineTo(l,s+c),t.lineTo(o,i+c),t.closePath(),e._polypoints=[[o,i],[l,s],[l,s+c],[o,i+c]],t}function ig(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,o=Ge(e.width,a),i=e.source.x1,l=e.y0-o/2,s=Xe(l+o,r.y1-10),c=Xe(o,25),u=i+c,d=l+c,h=Xe(.5*o,10),f=s+h,p=n.padding||0;return i+=p,t.moveTo(i,l),t.arcTo(u,l,u,d,c),t.lineTo(u,s),t.lineTo(u-c/2,f),t.lineTo(i,s),t.closePath(),t}function lg(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0;a=na(n.minWidth)?n.minWidth:a;var o=Bt();return"node"===t._type||"node"===t._type?ag(o,t,e):"link"===t._type&&(t.circular?o=t.circularPathData.path:t.exit?ig(o,t,n,a,r):("linear"===n.curve?og:rg)(o,t,n,a)),o}function sg(t){return"top"==t.circularLinkType?"M".concat(t.circularPathData.sourceX," ").concat(t.circularPathData.sourceY," ")+"L".concat(t.circularPathData.leftInnerExtent," ").concat(t.circularPathData.sourceY," ")+"A".concat(t.circularPathData.leftLargeArcRadius," ").concat(t.circularPathData.leftSmallArcRadius," 0 0 0 ").concat(t.circularPathData.leftFullExtent," ").concat(t.circularPathData.sourceY-t.circularPathData.leftSmallArcRadius," ")+"L".concat(t.circularPathData.leftFullExtent," ").concat(t.circularPathData.verticalLeftInnerExtent," ")+"A".concat(t.circularPathData.leftLargeArcRadius," ").concat(t.circularPathData.leftLargeArcRadius," 0 0 0 ").concat(t.circularPathData.leftInnerExtent," ").concat(t.circularPathData.verticalFullExtent," ")+"L".concat(t.circularPathData.rightInnerExtent," ").concat(t.circularPathData.verticalFullExtent," ")+"A".concat(t.circularPathData.rightLargeArcRadius," ").concat(t.circularPathData.rightLargeArcRadius," 0 0 0 ").concat(t.circularPathData.rightFullExtent," ").concat(t.circularPathData.verticalRightInnerExtent," ")+"L".concat(t.circularPathData.rightFullExtent," ").concat(t.circularPathData.targetY-t.circularPathData.rightSmallArcRadius," ")+"A".concat(t.circularPathData.rightLargeArcRadius," ").concat(t.circularPathData.rightSmallArcRadius," 0 0 0 ").concat(t.circularPathData.rightInnerExtent," ").concat(t.circularPathData.targetY," ")+"L".concat(t.circularPathData.targetX," ").concat(t.circularPathData.targetY," ")+"L".concat(t.circularPathData.targetX," ").concat(t.circularPathData.targetY-t.width," ")+"L".concat(t.circularPathData.rightInnerExtent1," ").concat(t.circularPathData.targetY-t.width," ")+"A".concat(t.circularPathData.rightLargeArcRadius1," ").concat(t.circularPathData.rightSmallArcRadius1," 0 0 1 ").concat(t.circularPathData.rightFullExtent1," ").concat(t.circularPathData.targetY-t.width-t.circularPathData.rightSmallArcRadius1," ")+"L".concat(t.circularPathData.rightFullExtent1," ").concat(t.circularPathData.verticalRightInnerExtent1+t.circularPathData.rightLargeArcRadius1," ")+"A".concat(t.circularPathData.rightLargeArcRadius1," ").concat(t.circularPathData.rightLargeArcRadius1," 0 0 1 ").concat(t.circularPathData.rightInnerExtent1," ").concat(t.circularPathData.verticalFullExtent1," ")+"L".concat(t.circularPathData.leftInnerExtent1," ").concat(t.circularPathData.verticalFullExtent1," ")+"A".concat(t.circularPathData.leftLargeArcRadius1," ").concat(t.circularPathData.leftLargeArcRadius1," 0 0 1 ").concat(t.circularPathData.leftFullExtent1," ").concat(t.circularPathData.verticalLeftInnerExtent1+t.circularPathData.leftLargeArcRadius1," ")+"L".concat(t.circularPathData.leftFullExtent1," ").concat(t.circularPathData.sourceY-t.width-t.circularPathData.leftSmallArcRadius1," ")+"A".concat(t.circularPathData.leftLargeArcRadius1," ").concat(t.circularPathData.leftSmallArcRadius1," 0 0 1 ").concat(t.circularPathData.leftInnerExtent1," ").concat(t.circularPathData.sourceY-t.width," ")+"L".concat(t.circularPathData.sourceX," ").concat(t.circularPathData.sourceY-t.width):"M".concat(t.circularPathData.sourceX," ").concat(t.circularPathData.sourceY," ")+"L".concat(t.circularPathData.leftInnerExtent," ").concat(t.circularPathData.sourceY," ")+"A".concat(t.circularPathData.leftLargeArcRadius," ").concat(t.circularPathData.leftSmallArcRadius," 0 0 1 ").concat(t.circularPathData.leftFullExtent," ").concat(t.circularPathData.sourceY+t.circularPathData.leftSmallArcRadius," ")+"L".concat(t.circularPathData.leftFullExtent," ").concat(t.circularPathData.verticalLeftInnerExtent," ")+"A".concat(t.circularPathData.leftLargeArcRadius," ").concat(t.circularPathData.leftLargeArcRadius," 0 0 1 ").concat(t.circularPathData.leftInnerExtent," ").concat(t.circularPathData.verticalFullExtent," ")+"L".concat(t.circularPathData.rightInnerExtent," ").concat(t.circularPathData.verticalFullExtent," ")+"A".concat(t.circularPathData.rightLargeArcRadius," ").concat(t.circularPathData.rightLargeArcRadius," 0 0 1 ").concat(t.circularPathData.rightFullExtent," ").concat(t.circularPathData.verticalRightInnerExtent," ")+"L".concat(t.circularPathData.rightFullExtent," ").concat(t.circularPathData.targetY+t.circularPathData.rightSmallArcRadius," ")+"A".concat(t.circularPathData.rightLargeArcRadius," ").concat(t.circularPathData.rightSmallArcRadius," 0 0 1 ").concat(t.circularPathData.rightInnerExtent," ").concat(t.circularPathData.targetY," ")+"L".concat(t.circularPathData.targetX," ").concat(t.circularPathData.targetY," ")+"L".concat(t.circularPathData.targetX," ").concat(t.circularPathData.targetY+t.width," ")+"L".concat(t.circularPathData.rightInnerExtent1," ").concat(t.circularPathData.targetY+t.width," ")+"A".concat(t.circularPathData.rightLargeArcRadius1," ").concat(t.circularPathData.rightSmallArcRadius1," 0 0 0 ").concat(t.circularPathData.rightFullExtent1," ").concat(t.circularPathData.targetY+t.width+t.circularPathData.rightSmallArcRadius1," ")+"L".concat(t.circularPathData.rightFullExtent1," ").concat(t.circularPathData.verticalRightInnerExtent1-t.circularPathData.rightLargeArcRadius1," ")+"A".concat(t.circularPathData.rightLargeArcRadius1," ").concat(t.circularPathData.rightLargeArcRadius1," 0 0 0 ").concat(t.circularPathData.rightInnerExtent1," ").concat(t.circularPathData.verticalFullExtent1," ")+"L".concat(t.circularPathData.leftInnerExtent1," ").concat(t.circularPathData.verticalFullExtent1," ")+"A".concat(t.circularPathData.leftLargeArcRadius1," ").concat(t.circularPathData.leftLargeArcRadius1," 0 0 0 ").concat(t.circularPathData.leftFullExtent1," ").concat(t.circularPathData.verticalLeftInnerExtent1-t.circularPathData.leftLargeArcRadius1," ")+"L".concat(t.circularPathData.leftFullExtent1," ").concat(t.circularPathData.sourceY+t.width+t.circularPathData.leftSmallArcRadius1," ")+"A".concat(t.circularPathData.leftLargeArcRadius1," ").concat(t.circularPathData.leftSmallArcRadius1," 0 0 0 ").concat(t.circularPathData.leftInnerExtent1," ").concat(t.circularPathData.sourceY+t.width," ")+"L".concat(t.circularPathData.sourceX," ").concat(t.circularPathData.sourceY+t.width)}function cg(t,e,n,a,r,o,i){var l=e.nodes,s=e.links,c=n.strokeWidth,u=a.strokeWidth;t.save(),t.translate(c,c),na(a.blendMode)&&(t.globalCompositeOperation=a.blendMode);var d=function(e,n,r){t.save(),t.fillStyle=n,t.strokeStyle=a.strokeColor,t.lineWidth=u,t.beginPath(),e.circular?function(t,e){var n=sg(e);xp.drawPath(n,t)}(t,e):e.exit?ig(t,e,a,.5,r):("linear"===a.curve?og:rg)(t,e,a,.5),t.translate(e.source.x0,0),t.fill(),u&&t.stroke(),t.restore()};s.forEach((function(n){if(ug(a.fillColor))d(n,a.fillColor,e);else if(na(i)){var r={context:t,name:i[n.source.index]};Hr.canvas_patterns.imageFill(r,(function(t,a){return d(n,a,e)}))}else d(n,o(n.point),e)}));var h=function(e,a){t.save(),t.fillStyle=a,t.lineWidth=c,t.strokeStyle=n.strokeColor,t.beginPath(),e.color=a,ag(t,e,n),t.fill(),c&&t.stroke(),t.restore()};l.forEach((function(e){if(ug(n.fillColor))h(e,n.fillColor);else if(na(i)){var a={context:t,name:i[e.index]};Hr.canvas_patterns.imageFill(a,(function(t,n){return h(e,n)}))}else h(e,r(e.point))})),t.restore()}function ug(t){return t instanceof CanvasPattern}function dg(t){var e=Math.abs(t.y1-t.y0),n=Math.abs(t.target.x0-t.source.x1);return Math.atan(n/e)}function hg(t,e,n,a){var r=0,o=0,i=0,l=0,s={},c={},d={top:0,bottom:0,left:0};t.links.forEach((function(u,h){null==e&&null==n||(u.width=null!=e?u.value*e:u.width*n),u.circular&&("top"==u.circularLinkType?(d.top++,r+=u.width):(d.bottom++,o+=u.width),s[u.target.column]?s[u.target.column].total+=u.width:(s[u.target.column]={},s[u.target.column].total=u.width),0!=u.target.column&&s[u.target.column]&&u.target.x0-s[u.target.column].total<t.x0&&(s[u.target.column].extra=(s[u.target.column].extra||0)+u.width),c[u.source.column]?c[u.source.column].total+=u.width:(c[u.source.column]={},c[u.source.column].total=u.width),u.source.column!=a&&c[u.source.column]&&u.source.x1+c[u.source.column].total>t.x1&&(c[u.source.column].extra=(c[u.source.column].extra||0)+u.width),0==u.target.column&&(l+=u.width),u.source.column==a&&(i+=u.width))}));var h=Object.keys(s),f=Object.keys(c);l+=u(h,(function(t){return s[t].extra||0}))||0,i+=u(f,(function(t){return c[t].extra||0}))||0;var p={top:r=r>0?r+25+10:r,bottom:(o=o>0?o+25+10:o)+0,left:l=l>0?l+25+10:l,right:i=i>0?i+25+10:i,linkCount:d};return t.circularSize={width:p.left+p.right,height:p.top+p.bottom,hCount:h.length+f.length},p}function fg(t){return t.sort(pg),t.forEach((function(e,n){for(var a,r,o=0,i=0;i<n;i++)if(a=t[n],r=t[i],!(a.source.depth<r.target.depth||a.target.depth>r.source.depth)){var l=t[i].circularPathData.verticalBuffer1+t[i].width/2+2;o=l>o?l:o}e.circularPathData.verticalBuffer1=o+e.width/2,e.circularPathData.verticalBuffer=o+e.width})),t}function pg(t,e){return bg(t)==bg(e)?"bottom"==t.circularLinkType?vg(t,e):gg(t,e):bg(e)-bg(t)}function gg(t,e){return t.y0-e.y0}function vg(t,e){return e.y0-t.y0}function mg(t,e){return t.y1-e.y1}function yg(t,e){return e.y1-t.y1}function bg(t){return t.target.depth-t.source.depth}function xg(t){return t.target.x0-t.source.x1}function Cg(t,e){var n=dg(t),a=xg(e)/Math.tan(n);return"up"==Eg(t)?t.y1+a:t.y1-a}function kg(t,e){var n=dg(t),a=xg(e)/Math.tan(n);return"up"==Eg(t)?t.y1-a:t.y1+a}function wg(t,e,n,a,r,o){e.nodes.forEach((function(i){if(i.depth==a){var l=o/(r+1),s=Math.pow(1-l,3),c=3*l*Math.pow(1-l,2),u=3*Math.pow(l,2)*(1-l),d=Math.pow(l,3),h=s*t.y0+c*t.y0+u*t.y1+d*t.y1,f=h-t.width/2,p=h+t.width/2;if(f>i.y0&&f<i.y1){var g=-(i.y1-f+10);Og(m=_g(e,i),n,g)||m.map((function(t){Sg(t,g)}))}else if(p>i.y0&&p<i.y1){var v=p-i.y0+10;Og(m=_g(e,i,!0),n,v)||m.map((function(t){Sg(t,v)}))}else if(f<i.y0&&p>i.y1){var m,y=p-i.y0+10;Og(m=_g(e,i,!0),n,y)||m.map((function(t){Sg(t,y)}))}}}))}function _g(t,e,n){var a=[e];return t.nodes.forEach((function(t){var r,o;t.name!=e.name&&t.depth==e.depth&&(n?t.y0<e.y1&&t.y1>e.y1&&a.push(t):(o=t,((r=e).y0>o.y0&&r.y0<o.y1||r.y1>o.y0&&r.y1<o.y1||r.y0<o.y0&&r.y1>o.y1)&&a.push(t)))})),a}function Sg(t,e){return t.y0=t.y0+e,t.y1=t.y1+e,t.targetLinks.forEach((function(t){t.y1=t.y1+e})),t.sourceLinks.forEach((function(t){t.y0=t.y0+e})),t}function Og(t,e,n){return t.some((function(t){return!(t.y0+n>e.y0&&t.y1+n<e.y1)}))}function Ag(t,e){t.nodes.forEach((function(n){n.y+(n.y1-n.y0)>e&&(n.y=n.y-(n.y+(n.y1-n.y0)-e));var a=t.links.filter((function(t){return t.source.name==n.name}));a.length>1&&a.sort((function(t,e){if(!t.circular&&!e.circular){if(t.target.depth==e.target.depth)return t.y1-e.y1;if(!Pg(t,e))return t.y1-e.y1;if(t.target.depth>e.target.depth){var n=kg(e,t);return t.y1-n}if(e.target.depth>t.target.depth)return kg(t,e)-e.y1}return t.circular&&!e.circular?"top"==t.circularLinkType?-1:1:e.circular&&!t.circular?"top"==e.circularLinkType?1:-1:t.circular&&e.circular?t.circularLinkType===e.circularLinkType&&"top"==t.circularLinkType?t.target.depth===e.target.depth?t.target.y1-e.target.y1:e.target.depth-t.target.depth:t.circularLinkType===e.circularLinkType&&"bottom"==t.circularLinkType?t.target.depth===e.target.depth?e.target.y1-t.target.y1:t.target.depth-e.target.depth:"top"==t.circularLinkType?-1:1:void 0}));var r=n.y0;a.forEach((function(t){t.y0=r+t.width/2,r+=t.width}))}))}function Tg(t,e){t.nodes.forEach((function(e){var n=t.links.filter((function(t){return t.target.name==e.name}));n.length>1&&n.sort((function(t,e){if(!t.circular&&!e.circular){if(t.source.depth==e.source.depth)return t.y0-e.y0;if(!Pg(t,e))return t.y0-e.y0;if(e.source.depth<t.source.depth){var n=Cg(e,t);return t.y0-n}if(t.source.depth<e.source.depth)return Cg(t,e)-e.y0}return t.circular&&!e.circular?"top"==t.circularLinkType?-1:1:e.circular&&!t.circular?"top"==e.circularLinkType?1:-1:t.circular&&e.circular?t.circularLinkType===e.circularLinkType&&"top"==t.circularLinkType?t.source.depth===e.source.depth?t.source.y1-e.source.y1:t.source.depth-e.source.depth:t.circularLinkType===e.circularLinkType&&"bottom"==t.circularLinkType?t.source.depth===e.source.depth?t.source.y1-e.source.y1:e.source.depth-t.source.depth:"top"==t.circularLinkType?-1:1:void 0}));var a=e.y0;n.forEach((function(t){t.y1=a+t.width/2,a+=t.width}))}))}function Pg(t,e){return Eg(t)==Eg(e)}function Eg(t){return t.y0-t.y1>0?"up":"down"}function Lg(t,e,n){Ag(t),Tg(t),function(t){var e={y0:c(t.nodes,(function(t){return t.y0})),y1:u(t.nodes,(function(t){return t.y1}))};t.links.forEach((function(n){if(!n.circular&&n.target.depth-n.source.depth>1){var a=n.source.depth+1,r=n.target.depth-1,o=1,i=r-a+1;for(o=1;a<=r;a++,o++)wg(n,t,e,a,i,o)}}))}(t),Ag(t,t.y1),Tg(t,t.y1),function(t,e,n,a){var r=t.nodes;t.links.forEach((function(t){"top"==t.circularLinkType||t.circularLinkType}));var o=hg(t,null,null,u(t.nodes,(function(t){return t.column}))),i=(u(t.nodes,(function(t){return t.column})),c(r,(function(t){return t.y0})),u(r,(function(t){return t.y1})),1*o.linkCount.bottom);t.y1=a.y1-o.bottom-i}(t,t.y0,t.y1,e),function(t,e){var n=t.y1,a=c(t.links,(function(t){return t.source.y0}));t.links.forEach((function(t){t.circular&&(t.circularPathData={})}));var r=t.links.filter((function(t){return"top"==t.circularLinkType}));r=fg(r);var o=t.links.filter((function(t){return"bottom"==t.circularLinkType}));o=fg(o),t.links.forEach((function(r){if(r.circular){r.circularPathData.arcRadius=r.width+10,r.circularPathData.leftNodeBuffer=10,r.circularPathData.rightNodeBuffer=10,r.circularPathData.sourceWidth=r.source.x1-r.source.x0,"bottom"==r.circularLinkType?(r.circularPathData.sourceX=r.source.x0+r.circularPathData.sourceWidth+e,r.circularPathData.targetX=r.target.x0-e,r.circularPathData.sourceY=r.y0-r.width/2,r.circularPathData.targetY=r.y1-r.width/2):(r.circularPathData.sourceX=r.source.x0+r.circularPathData.sourceWidth+e,r.circularPathData.targetX=r.target.x0-e,r.circularPathData.sourceY=r.y0+r.width/2,r.circularPathData.targetY=r.y1+r.width/2);var o=r.source.depth,i=r.circularLinkType,l=t.links.filter((function(t){return t.source.depth==o&&t.circularLinkType==i}));"bottom"==r.circularLinkType?l.sort(vg):l.sort(gg);var s=0;l.forEach((function(t,e){t.circularLinkID==r.circularLinkID&&(r.circularPathData.leftSmallArcRadius=10+r.width+s,r.circularPathData.leftLargeArcRadius=10+r.width+2*e+s,r.circularPathData.leftSmallArcRadius1=r.circularPathData.leftSmallArcRadius-r.width,r.circularPathData.leftLargeArcRadius1=r.circularPathData.leftLargeArcRadius-r.width),s+=t.width})),o=r.target.depth,l=t.links.filter((function(t){return t.target.depth==o&&t.circularLinkType==i})),"bottom"==r.circularLinkType?l.sort(yg):l.sort(mg),s=0,l.forEach((function(t,e){t.circularLinkID==r.circularLinkID&&(r.circularPathData.rightSmallArcRadius=10+r.width+s,r.circularPathData.rightLargeArcRadius=10+r.width+2*e+s,r.circularPathData.rightSmallArcRadius1=r.circularPathData.rightSmallArcRadius-r.width,r.circularPathData.rightLargeArcRadius1=r.circularPathData.rightLargeArcRadius-r.width),s+=t.width})),r.circularPathData.leftInnerExtent=r.circularPathData.sourceX+r.circularPathData.leftNodeBuffer,r.circularPathData.rightInnerExtent=r.circularPathData.targetX-r.circularPathData.rightNodeBuffer,r.circularPathData.leftFullExtent=r.circularPathData.sourceX+r.circularPathData.leftLargeArcRadius+r.circularPathData.leftNodeBuffer,r.circularPathData.rightFullExtent=r.circularPathData.targetX-r.circularPathData.rightLargeArcRadius-r.circularPathData.rightNodeBuffer,r.circularPathData.rightFullExtent1=r.circularPathData.rightFullExtent+r.width,r.circularPathData.rightInnerExtent1=r.circularPathData.rightFullExtent1+r.circularPathData.rightLargeArcRadius1,r.circularPathData.leftFullExtent1=r.circularPathData.leftFullExtent-r.width,r.circularPathData.leftInnerExtent1=r.circularPathData.leftFullExtent1-r.circularPathData.leftLargeArcRadius1,r.circularPathData.leftWidth=r.circularPathData.leftLargeArcRadius+r.circularPathData.leftNodeBuffer,r.circularPathData.rightWidth=r.circularPathData.rightLargeArcRadius+r.circularPathData.rightNodeBuffer,"bottom"==r.circularLinkType?(r.circularPathData.verticalFullExtent=n+25+r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.rightLargeArcRadius,r.circularPathData.verticalFullExtent1=n+25+r.circularPathData.verticalBuffer-r.width,r.circularPathData.verticalRightInnerExtent1=r.circularPathData.verticalFullExtent1,r.circularPathData.verticalLeftInnerExtent1=r.circularPathData.verticalFullExtent1,r.circularPathData.totalHeight=25+r.circularPathData.verticalBuffer):(r.circularPathData.verticalFullExtent=a-25-r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.rightLargeArcRadius,r.circularPathData.verticalFullExtent1=r.circularPathData.verticalFullExtent+r.width,r.circularPathData.verticalLeftInnerExtent1=r.circularPathData.verticalFullExtent1,r.circularPathData.verticalRightInnerExtent1=r.circularPathData.verticalFullExtent1,r.circularPathData.totalHeight=25+r.circularPathData.verticalBuffer),r.circularPathData.path=sg(r)}}))}(t,n)}function Mg(t){return t.target.depth}function Dg(t){return t.depth}function Ig(t,e){return e-1-t.height}function Rg(t,e){return t.sourceLinks.length?t.depth:e-1}function zg(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?c(t.sourceLinks,Mg)-1:0}function jg(t){return function(){return t}}function Fg(t,e){return Hg(t.source,e.source)||t.index-e.index}function Bg(t,e){return Hg(t.target,e.target)||t.index-e.index}function Hg(t,e){return t.partOfCycle===e.partOfCycle?t.y0-e.y0:"top"===t.circularLinkType||"bottom"===e.circularLinkType?-1:1}function Ng(t){return t.value}function Wg(t){return t.index}function Vg(t){return t.nodes}function Yg(t){return t.links}function Ug(t,e){var n=t.get(e);if(!n)throw new Error("missing: ".concat(e));return n}var Gg=function(){var t,e,n,a,r,o=0,i=0,l=1,s=1,d=24,h=8,f=1,p=Wg,g=Rg,v=Vg,m=Yg,y=0,b=1,x=.1;function C(){var t={nodes:v.apply(null,arguments),links:m.apply(null,arguments),x0:o,y0:i,x1:l,y1:s},e={x0:o,y0:i,x1:l,y1:s};return k(t),Xg(t),Zg(t),w(t),_(t),P(t,e),O(t),T(t,e),t.circular&&Lg(t,e,y),t}function k(t){t.nodes.forEach((function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]}));var e=L(t.nodes,p);t.links.forEach((function(t,n){t.index=n;var a=t.source,r=t.target;"object"!==_typeof(a)&&(a=t.source=Ug(e,a)),"object"===_typeof(r)||t.exit||(r=t.target=Ug(e,r)),a.sourceLinks.push(t),t.exit||(a.hasExitLink=!0,r.targetLinks.push(t))})),t.nodes.forEach((function(t,e){t.hasExitLink&&t.sourceLinks.sort((function(t,e){return t.exit?1e5-e.index:e.exit?t.index-1e5:t.index-e.index}))}))}function w(t){t.nodes.forEach((function(t){t.partOfCycle=!1,t.value=Math.max(A(t.sourceLinks,Ng),A(t.targetLinks,Ng)),t.sourceLinks.forEach((function(e){e.circular&&(t.partOfCycle=!0,t.circularLinkType=e.circularLinkType)})),t.targetLinks.forEach((function(e){e.circular&&(t.partOfCycle=!0,t.circularLinkType=e.circularLinkType)}))}))}function _(t){var e,n,a;for(e=t.nodes,n=[],a=0;e.length;++a,e=n,n=[])for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];for(var s in i.depth=a,i.sourceLinks)if(i.sourceLinks.hasOwnProperty(s)){var c=i.sourceLinks[s];n.indexOf(c.target)<0&&!c.circular&&!c.exit&&n.push(c.target)}}for(e=t.nodes,n=[],a=0;e.length;++a,e=n,n=[])for(var u in e)if(e.hasOwnProperty(u)){var h=e[u];for(var f in h.height=a,h.targetLinks)if(h.targetLinks.hasOwnProperty(f)){var p=h.targetLinks[f];n.indexOf(p.source)<0&&!p.circular&&n.push(p.source)}}var v=(l-o-d)/(a-1);t.nodes.forEach((function(t){t.x1=(t.x0=o+Math.max(0,Math.min(a-1,Math.floor(g.call(null,t,a))))*v)+d})),t.nodes.forEach((function(t){t.column=Math.floor(g.call(null,t,a))}))}function S(t){var n=t.nodes,a=u(n,(function(t){return t.depth}))+1,r=(l-o-d)/(a-1),i=new Array(a);if(n.forEach((function(t){var e=Math.max(0,Math.min(a-1,Math.floor(g.call(null,t,a))));t.layer=e,t.x0=o+e*r,t.x1=t.x0+d,i[e]?i[e].push(t):i[e]=[t]})),e){if("string"==typeof e){var s=fa(window,e);e="function"==typeof s?s:void 0}i.forEach((function(t){t.sort(e)}))}return i}function O(a){var r=S(a),o=u(r,(function(t){return t.length}));a.columns=r.length,a.rows=o,t=Math.min(h,(s-i)/(o-1)),function(){var e=c(r,(function(e){return(s-i-(e.length-1)*t)/A(e,Ng)}));c(r,(function(e){return(s-i-(e.length-1)*t)/A(e,Ng)}));e=a.ky||e,r.forEach((function(a){var r=i;a.forEach((function(n){n.y0=r,n.y1=r+n.value*e,r=n.y1+t,n.sourceLinks.forEach((function(t){t.width=t.value*e}))})),r=(s-r+t)/(a.length+1);for(var o=0;o<a.length;++o){var l=a[o];l.partOfCycle?"top"==l.circularLinkType?(l.y0=i+o,l.y1=l.y0+l.value*e):(l.y0=s-l.value*e-o,l.y1=l.y0+l.value*e):(l.y0+=r*(o+1),l.y1+=r*(o+1))}!function(t){void 0===n&&t.forEach((function(t){var e=t.sourceLinks,n=t.targetLinks;e.sort(Bg),n&&n.sort(Fg)}))}(a)}))}();for(var l=0;l<b;++l){var d=Math.pow(.99,l),f=Math.max(1-d,(l+1)/b);m(r,d,f),g(r,d,f)}function p(e,n,a,r){if(e.hasOwnProperty(n)){var o=e[n],i=0,l=0;if(o.targetLinks.forEach((function(e){var n=e.source,a=e.value*(o.layer-n.layer);i+=function(e,n){var a=e.y0-(e.sourceLinks.length-1)*t/2;for(var r in e.sourceLinks)if(e.sourceLinks.hasOwnProperty(r)){var o=e.sourceLinks[r],i=o.target,l=o.width;if(i===n)break;a+=l+t}for(var s in n.targetLinks)if(n.targetLinks.hasOwnProperty(s)){var c=n.targetLinks[s],u=c.source,d=c.width;if(u===e)break;a-=d}return a}(n,o)*a,l+=a})),l>0){var s=(i/l-o.y0)*a;o.y0+=s,o.y1+=s,k(o)}else;}}function g(t,n,r){for(var o=1,i=t.length;o<i;++o){var l=t[o];for(var s in l)p(l,s,n);void 0===e&&l.sort(Hg),y(l,r,a.circular)}}function v(e,n,a,r){if(e.hasOwnProperty(n)){var o=e[n],i=0,l=0;if(o.sourceLinks.forEach((function(e){var n=e.target,a=e.value*(n.layer-o.layer);i+=function(e,n){if("null"!=n){var a=n.y0-(n.targetLinks.length-1)*t/2;for(var r in n.targetLinks)if(n.targetLinks.hasOwnProperty(r)){var o=n.targetLinks[r],i=o.source,l=o.width;if(i===e)break;a+=l+t}for(var s in e.sourceLinks)if(e.sourceLinks.hasOwnProperty(s)){var c=e.sourceLinks[s],u=c.target,d=c.width;if(u===n)break;a-=d}return a}}(o,n)*a,l+=a})),l>0){var s=(i/l-o.y0)*a;o.y0+=s,o.y1+=s,k(o)}else;}}function m(t,n,a){for(var r=t.length-2;r>=0;--r){var o=t[r];for(var i in o)v(o,i,n);void 0===e&&o.sort(Hg),y(o,a)}}function y(e,n){var a=e.length>>1,r=e[a];C(e,r.y0-t,a-1,n),x(e,r.y1+t,a+1,n),C(e,s,e.length-1,n),x(e,i,0,n)}function x(e,n,a,r){for(;a<e.length;++a){var o=e[a],i=(n-o.y0)*r;i>1e-6&&(o.y0+=i,o.y1+=i),n=o.y1+t}}function C(e,n,a,r){for(;a>=0;--a){var o=e[a],i=(o.y1-n)*r;i>1e-6&&(o.y0-=i,o.y1-=i),n=o.y0-t}}function k(t){var e=t.sourceLinks,a=t.targetLinks;void 0===n&&(a&&a.forEach((function(t){t.source.sourceLinks.sort(Bg)})),e.forEach((function(t){var e=t.target.targetLinks;e&&e.sort(Fg)})))}function y(e,n,a){if(a)r.forEach((function(e){var n,a,r,o=i,l=e.length;for(e.sort(Hg),r=0;r<l;++r)(a=o-(n=e[r]).y0)>0&&(n.y0+=a,n.y1+=a),o=n.y1+t;if((a=o-t-s)>0)for(o=n.y0-=a,n.y1-=a,r=l-2;r>=0;--r)(a=(n=e[r]).y1+t-o)>0&&(n.y0-=a,n.y1-=a),o=n.y0}));else{var o=e.length>>1,l=e[o];C(e,l.y0-t,o-1,n),x(e,l.y1+t,o+1,n),C(e,s,e.length-1,n),x(e,i,0,n)}}}function T(t,e){t.nodes.forEach((function(t){t.sourceLinks.sort(Bg),t.targetLinks.sort(Fg)})),t.nodes.forEach((function(n){var a=n.y0,r=a,o=n.y1,i=o;n.sourceLinks.forEach((function(n){(n.circular?(n.y0=o-n.width/2,o-=n.width):(n.y0=a+n.width/2,a+=n.width),n.exit&&!t.exitAtEndNode&&e)&&(n.source.x1==e.x1&&(t.exitAtEndNode=n.width))})),n.targetLinks.forEach((function(t){t.circular?(t.y1=i-t.width/2,i-=t.width):(t.y1=r+t.width/2,r+=t.width)}))}))}function P(e,n){var a=e;if(a.circular){var h=S(a);a.py=t;var f=c(h,(function(e){return(n.y1-n.y0-(e.length-1)*t)/A(e,Ng)})),p=u(a.nodes,(function(t){return t.column})),g=a.x1-a.x0,v=a.y1-a.y0,m=g/(g+(w=hg(a,f,null,p)).right+w.left),y=v/(v+w.top+w.bottom);if(w.top>v||w.top>a.y1*y){var b=v-v*y,x=w.top+w.bottom,C=b*(w.top/x),k=b*(w.bottom/x);i=a.y0=C,s=a.y1=a.y1-k}else i=a.y0=a.y0*y+w.top,s=a.y1=0==w.bottom?a.y1:a.y1*y,o=a.x0=a.x0*m+w.left,l=a.x1=0==w.right?a.x1:a.x1*m;f=c(h,(function(e){return(s-i-(e.length-1)*t)/A(e,Ng)}));var w=hg(a,f,null,p),_=a.y1,O=(a.y0,(s=a.y1=n.y1-w.bottom)/_);f=c(h,(function(e){return(s-i-(e.length-1)*t)/A(e,Ng)}));w=hg(a,null,O,p);r&&r.right&&(w.right=r.right>w.right?0:w.right-r.right),r&&r.left&&(w.left=r.left>w.left?0:w.left-r.left),m=(g=n.x1-n.x0)/(g+w.right+w.left),o=a.x0=n.x0+w.left,l=a.x1=n.x1-w.right,f=c(h,(function(e){return(s-i-(e.length-1)*t)/A(e,Ng)})),a.nodes.forEach((function(t){t.x0=a.x0+t.column*((a.x1-a.x0-d)/p),t.x1=t.x0+d}))}return a}return C.update=function(t){return T(t),t},C.nodeId=function(t){return arguments.length?(p="function"==typeof t?t:jg(t),C):p},C.nodeAlign=function(t){return arguments.length?(g="function"==typeof t?t:jg(t),C):g},C.nodeSort=function(t){return arguments.length?(e=t,C):e},C.nodeWidth=function(t){return arguments.length?(d=+t,C):d},C.nodePadding=function(e){return arguments.length?(h=t=+e,C):h},C.linkPadding=function(t){return arguments.length?(y=+t,C):y},C.scale=function(t){return arguments.length?(f=+t,C):f},C.nodes=function(t){return arguments.length?(v="function"==typeof t?t:jg(t),C):v},C.links=function(t){return arguments.length?(m="function"==typeof t?t:jg(t),C):m},C.linkSort=function(t){return arguments.length?(n=t,C):n},C.size=function(t){return arguments.length?(o=i=0,l=+t[0],s=+t[1],C):[l-o,s-i]},C.extent=function(t){return arguments.length?(o=+t[0][0],l=+t[1][0],i=+t[0][1],s=+t[1][1],C):[[o,i],[l,s]]},C.iterations=function(t){return arguments.length?(b=+t,C):b},C.nodePaddingRatio=function(t){return arguments.length?(x=+t,C):x},C.height=function(t){return arguments.length?(a=+t,C):a},C.margin=function(t){return arguments.length?(r=t,C):r},C};function Xg(t){var e=[],n=0;t.links.forEach((function(a){qg(a.source,a.target,e)?(t.circular=!0,a.circular=!0,a.circularLinkID=n,n+=1):(a.circular=!1,e.push(a))}))}function Zg(t){if(t.circular){var e=0,n=0;t.links.forEach((function(a){a.circular&&(a.source.circularLinkType||a.target.circularLinkType?a.circularLinkType=a.source.circularLinkType?a.source.circularLinkType:a.target.circularLinkType:a.circularLinkType=e<n?"top":"bottom","top"==a.circularLinkType?e+=1:n+=1,t.nodes.forEach((function(t){t.name!=a.source.name&&t.name!=a.target.name||(t.circularLinkType=a.circularLinkType)})))})),t.circularLinks=e+n}}function qg(t,e,n){if(0==n.length)return!1;var a=function(t,e){for(var n=[],a=0;a<e.length;a++)t==e[a].source&&n.push(e[a]);return n}(e,n);if(0==a.length)return!1;for(var r=0;r<a.length;r++){var o=a[r];if(o.target===t)return!0;if(qg(t,o.target,n))return!0}return!1}wn.setComponent("d3_Sankey",Gg);var $g={left:Dg,right:Ig,center:zg,justify:Rg};function Qg(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,o=t.link,i=Gg().extent(e).nodeWidth(Xe(a,t.node.width)).nodeSort(t.node.sort).linkSort(t.link.sort).nodePadding(t.node.padding||0).linkPadding(o.padding||0).iterations(n||t.iterations||64).nodeId((function(t){return t.name})).height(e[1][1]).margin(r);return t.align&&i.nodeAlign($g[t.align]),i}function Kg(t,e,n){var a=this.renderer.commonRendererProp().params,r=this.chart.legendHighlight,o=Ns(a.commonPlotOptions,this.chart),i=t.seriesIndex,l=t.paneid,s=wa(n,o?wa(t.categoryIndex,t.sortedItemIndex):i),c=Ui(this.chart,l,i),u=Cl(c.value)?"bar":c.name,d=r.getLegendHighlightEffect(i,"selectedSeries","plot",l),h=r.getLegendHighlightEffect(i,"unselectedSeries","plot",l),f=this.options(t),p=f.color,g=je.test(d)||Fe.test(h),v=g?p:hn,m={};if(d==dn)m.fill=c.value===Gt.wordcloud&&f.fillColor||v;else{var y=Ds(t,s,this.chart);y.fill=v,y.stroke=p,e="inherit"==e?p:y.fill,m=r.getEffect(d,u,e,y,s,"plot",t),qa(_e.nonAxisSingleSourceEvent,c.value)&&(m=_objectSpread({fill:g||c.value===Gt.wordcloud?f.fillColor:hn,stroke:f.strokeColor},m))}return m}var Jg=L();function tv(t){var e=this;Jg.keys().forEach((function(n){Jg.get(n).call(e,t).selectAll("*").remove()}))}function ev(t,e,n,a,r){this.size=e,this.radius=n,this.sizeOffset=r,this.tree=i.quadtree().x((function(t){var e=t._data();return e._visible&&e._x})).y((function(t){var e=t._data();return e._visible&&e._y})).size((function(t){var e=t._data();return e._visible&&e._size})).extent([[0,0],a]).addAll(t)}function nv(t,e,n,a){if(t._data)return t;var r=n.eventHandler.dataAccesor(),o=Gt[r.bestChartType(a)],i=r.radius(a),l=_e.bubble.has(o)||_e.bubblePie.has(o)||"segment"==a,s=n.systemConf.chart.plot.plotoptions[a],c=s&&s.events&&s.events.triggerOffset||10,u=new ev(t,l,i,[n.plotarea.width,n.plotarea.height],c),d=Bl();return u.find([e[d[0]],e[d[1]]])}function av(t,e,n,a){var r,o,i=n.cache.search.bisect?nv(t,e,n,a):t,l=n.dataObject,s=n.plotarea,c=l.isCombinationalChart;if(i){var u=i.map((function(t){var a=t._data(),r=a._size/2,o={x:a._x,y:a._y},i=function(t,e,n,a){return $e((t-n)*(t-n)+(e-a)*(e-a))}(e.x,e.y,o.x,o.y);if(zl(o.x,o.y,{x:n.scrolledX||0,y:n.scrolledY||0,width:s.width,height:s.height}))return{radius:r,bubbleDistance:i-r,pointDistance:i,over:i-r<=0,point:t}})).filter((function(t){return na(t)}));if(1===u.length)(!c||c&&u[0].over)&&(r=u[0].point);else if(u.length>1)if(1===(o=u.filter((function(t){return t.over}))).length)r=o[0].point;else if(o.length>1){r=o.slice(0).sort((function(t,e){return B(t.radius,e.radius)}))[0].point}else{r=u.slice(0).sort((function(t,e){return B(t.bubbleDistance,e.bubbleDistance)}))[0].point}return r}}function rv(t,e){return this.chart=t,this.renderer=e,this}Jg.set("bar",(function(t){return t.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcbarhighlight")})),Jg.set("scatter",(function(t){return t.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcscatterhighlight")})),Jg.set("area",(function(t){return t.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcareahighlight")})),Jg.set("nonaxis",(function(t){return t.staticPaneSVG.selectAll("g.eventgroup").selectAll("g.zcnonaxishighlight")})),Jg.set("geo",(function(t){return t.staticPaneSVG.selectAll("g.map-highlight")})),ev.prototype.find=function(t){return this.size?this.tree.findAll(t[0],t[1],this.radius,this.sizeOffset).points:this.tree.find(t[0],t[1],this.radius)},wn.setComponent("searchMode.quadtree",ev);var ov=rv.prototype;function iv(t,e){this.chart=t,this.renderer=e}ov._defaultH=function(){return[{shape:"marker",data:ov.data,path:this.path,context:this.renderingContext,translate:this.translateContext}]},ov.data=function(t){var e=this.renderer.commonRendererProp().params,n=this.chart,a=this.renderer;return function(){n.cache.data[t._key]||(n.cache.data[t._key]={});var r=n.cache.data[t._key];return r._x=t._x=r._x||n.dataObject.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"x"),r._y=t._y=r._y||n.dataObject.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"y"),r._size=t._size=r._size||a.getSymbolSize(t),r._visible=t._visible=Fl(n,t),r._uid=t._uid=n.dataset.getX(t),r._point=t,t}},ov.commonOptions=function(t){this.chart;var e=this.renderer.commonRendererProp().params,n=e.markerOptions||{},a=e.hoverOptions||{},r=a.symbol||n.symbol,o=null!=a.size?1:n.size;return{options:a,symbol:r,_size:o,color:Fs(this.chart,Ns(e.commonPlotOptions,this.chart)?t.sortedItemIndex:t.seriesIndex,t,t.seriesIndex,t.paneid,t.rendererIndex),size:{outer:o,inner:o}}},ov.options=function(t){var e=this.commonOptions(t),n=e.symbol,a=e._size||1,r=Zc.has(n)?1:2,o=Zc.has(n)?.5:1;return e.size={outer:a*r,inner:a*o},e},ov.renderingContext=function(){return Jg.get("scatter").call(this,this.chart)},ov.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},ov.path=function(t,e){t=t._data&&t._data()||t;var n=this.options(t),a=Hn(n.options);a=function(t,e,n){return t.innerFillColor=$n(t.innerFillColor,e.color,e.options,n),t.innerStrokeColor=$n(t.innerStrokeColor,e.color,e.options,n),t.outerFillColor=$n(t.outerFillColor,e.color,e.options,n),t.outerStrokeColor=$n(t.outerStrokeColor,e.color,e.options,n),t}(a,n,this.chart);var r=e.context.call(this),o=e.translate.call(this),i=t,l=i.seriesIndex,s=i.paneid,c=Ui(this.chart,s,l).value,u=wl(c)||c===Gt.scatter,d=dc(r,"g",[1],".","class","highlight".concat(t.paneid).concat(l).concat(t.itemIndex).concat(e.type)||"_"),h=this.chart.legendHighlight.getLegendHighlightEffect(l,"selectedSeries","plot",s),f=us.hasPatternPallete(this.chart)&&"strokeEnlarge"!==h&&h.constructor!==Function&&u,p="end"==e.type?[t._x,t._y0]:[t._x,t._y];if(ap(d,null,f?{symbol:n.symbol}:a,{color:f?null:n.color,symbolSize:{inner:n.size.inner,outer:n.size.outer},symbol:n.symbol,transform:p,imageSize:15},this.chart),f){var g=h===dn?{fill:hn}:this.chart.legendHighlight.getEffect(h,"scatter",je.test(h)?n.color:hn,{fill:hn,stroke:n.color},t.seriesIndex,"plot");d.styles(g)}return r.style("display",""),r.attr("transform","translate(".concat(o[0],",").concat(o[1],")")),d},Ta(iv,rv);var lv=iv.prototype;function sv(){var t,e,n,a,r,o,i,l,s,c,u=!1,d=!1,h=0,f=0,p=function p(m,y,b,x,C,k){o=t.params.chartObj;var w,_,S,O,A,T,P,E=t.params,M=E.labelQueue,D=E.commonPlotOptions,I=o.systemConf,R=(E.dataset,o.dataObject),z=E.datasetIndex||0,j=o.seriesdata[z],F="canvas"===o.plot.renderer.mode,H=j.plotoptions,N=s=Rn(wa(j.plotoptions,{}),D),W=N.link,V=N.node,Y=o.cache.sankey,U=Y.legendItemsMap,G=Y.legend,X=R.sankeyLayout,Z=X.graph,q=X.linkLength,$=X.nodeLength,Q=R.sankeyLayout,K=o.plotarea,J=K.width,tt=K.height,et=W.gradients,nt=et.options.linear,at=na(nt.x1)||na(nt.x2)||na(nt.y1)||na(nt.y2),rt=na(o.phase),ot=F&&na(k),it=fp(D,H,o,ji),lt=rt?0:it.duration,st=V.strokeWidth,ct=s.datalabels,ut=0,dt=0,ht=o.imagePallete,ft=Rn(wa(I.chart.plot.events),D.events),pt=0,gt=na(k),vt=na(I.legend.ranges);if(at=na(et.customGradient)?et.customGradient:at,et.customGradient=at,o.systemConf.chart.width&&(J=$n(o.systemConf.chart.width,o)),o.systemConf.chart.height&&(tt=$n(o.systemConf.chart.height,o)),e=p.nodeAligns=(w=Z.nodes,_=cr(w,"layer"),S=Object.keys(_).map(parseFloat).sort(B),O=S.length,A=S.shift(),T=S.pop(),P=[],S.forEach((function(t){P=[].concat(_toConsumableArray(P),_toConsumableArray(_[t]))})),{start:_[A],center:P,end:_[T]||[],layerCount:O}),u="inside"===ct.labelPos,d="outside"===ct.labelPos,W.padding||0,a=L(),Z.nodes.forEach((function(t){a.set(t.name,t),t.point.arcColor=Fs(o,t.index,t.point,z),vt&&(t.point._visible=Rs(t.point[0],o))})),vt){Q.nodeMatrix=Array.from({length:Q.layout.columns},(function(){return[]}));var mt=Q.nodeMatrix;Z.nodes.forEach((function(t){return mt[t.column].push(t)}))}if(r=L(),Z.links.forEach((function(t){r.set(t.point._key,t),vt&&(t.point._visible=Rs(t.point[0],o)&&("null"==t.target||Rs(t.point[1],o))),et.type?t.circular?t.point.arcColor=[t.target.point.arcColor,t.source.point.arcColor]:t.exit?(t.point.arcColor=W.exit.color,t.point.exit=!0):t.point.arcColor=[t.source.point.arcColor,t.target.point.arcColor]:t.point.arcColor=t.exit?W.exit.color:t.source.point.arcColor})),d&&G.length){var yt=Md(ct,o),bt=jd(yt.hook),xt=2*(yt.padding||0);e.layerCount;if(dt=bt.height,ut=2*(ct.padding||0)+xt,pt=xt/2,gt){var Ct=_slicedToArray(o.renderer[0].labelWidthOutside,2);h=Ct[0],f=Ct[1]}else{var kt=_slicedToArray(Wu("preCalculation")(null,{},o),2);h=kt[0],f=kt[1],o.renderer[0].labelWidthOutside=[h,f]}}var wt=h+st+ut+dt,_t=f+st+ut+dt,St=st+pt+0,Ot=[[wt,St],[J-_t,tt-St]],At=[J,tt],Tt=Ls(o,0),Pt=Ls(o,0,null,At,null,null,et),Et=t.params.hoverOptions=H&&H.hoveroptions?Rn(D.hoveroptions,H.hoveroptions,!0):D.hoveroptions,Lt=(Ot[1][0]-Ot[0][0])/e.layerCount*.8;i=function(t,e){var n,a=g(t);if(a)return n=U.get(a.name).index,Tt(n,a.point,pn,e?pn:V.fillColor,V.fillOpacity)},l=function(t){var e=r.get(t._key),n=(ot?Et:W).fillOpacity;if(vt&&!1===e.point._visible){var a=o.systemConf.legend,l=a.filter&&a.filter.track&&a.filter.track.fillColor;return l||"rgb(237, 234, 234)"}if(na(et.type)){var s=e.source,c=e.target,u=e.exit?W.exit.color:$n(W.fillColor,e,e.index,e.point.arcColor,o),d=e.exit?W.exit.color[0]:e.circular?i(c.point,!0):i(s.point,!0),h=e.exit?W.exit.color[1]:e.circular?i(s.point,!0):i(c.point,!0),f=e.exit?[s.x1+e.width,500]:[c.x0-s.x1,500];return at||uv(t,et),et.options.linear.stopColor=[d,h],Pt(s.index,e.point,null,u,n,f)}var p=U.get(e.source.name).index,g=e.exit?W.exit.color:$n(W.fillColor,e,e.index,e.point.arcColor,o);return Pt(p,e.point,pn,g,n,null,{context:o.context})};var Mt=o.dataObject.sankeyLayout.layout,Dt=Mt&&Mt.exitAtEndNode;Dt&&(Ot[1][0]=Ot[1][0]-Xe(Dt,25));var It=Qg(s,Ot,Oe,Lt,{left:wt,right:_t});if(p.sankeyLayout=n=q||$?It(Z):Z,R.sankeyLayout.layout=p.sankeyLayout,"legendFilter"===o.phase&&n.nodes.forEach((function(t){t.index=U.get(t.name).index})),p.seriesdataAfterUpdate=[G],p.sankeyOptions=s,F)if(gt){k=o.chartTypes[0].name===ji&&o.systemConf.legend.ranges?g(o.systemConf.legend.ranges[k]).point.itemIndex:k;var zt=o.renderer[0].highlighter,jt=G[k],Ft=zt.getDependentLayoutPoints(jt),Bt=_objectSpread(_objectSpread({},W),{},{fillColor:b.fill,fillOpacity:b["fill-opacity"]}),Ht=_objectSpread(_objectSpread({},V),{},{fillColor:b.fill});Ft.x0=n.x0,Ft.x1=n.x1,Ft.y0=n.y0,Ft.y1=n.y1,cg(m,Ft,Ht,Bt,i,l,ht)}else cg(m,n,V,W,i,l,ht);else rt?v(m):function(t,e){var n={x:0,y:0,width:0,height:o.plotarea.height};v(t,n).transition().ease(e.easingType).duration(e.duration).attr("width",o.plotarea.width)}(m,it),function(t,e,n,a,r,o,i){var l=e.nodes,s=e.links,c=wc("g",".sankey-chart",[1],t).attr("transform","translate(".concat(a.strokeWidth,",").concat(a.strokeWidth,")")),u=wc("g",".sankey-chart-main",[1],c),d=wc("g",".sankey-links",[1],u),h=wc("g",".sankey-nodes",[1],u);if(n.zoomTransform){var f=n.zoomTransform;u.attr("transform","translate("+parseFloat(f.x)+","+parseFloat(f.y)+") scale("+parseFloat(f.k)+","+parseFloat(f.k)+")")}wc("path",".sankey-link",s,d,null,(function(t){return t.point})).attrs({d:function(t){return this.index=t.index,lg(t,a,r,.5,e)}}).styles({fill:function(t){return i(t.point)},"fill-opacity":r.fillOpacity,stroke:r.strokeColor,"stroke-width":r.strokeWidth,"mix-blend-mode":r.blendMode}),wc("path",".sankey-node",l,h,null,(function(t){return t.point})).attrs({d:function(t){return lg(t,a,r)}}).styles({fill:function(t){return o(t.point)},"fill-opacity":a.fillOpacity,stroke:a.strokeColor,"stroke-width":a.strokeWidth})}(m,n,o.dataObject.sankeyLayout,V,W,i,l);var Nt=q||$?G.filter((function(t){return!t.disabled})):[];M.length=0,M.push({renderer:p,charttype:"hierarchy",chartObj:o,args:[o.seriesdata[0],0,pn,pn,null,Nt,[0,0]]}),c=document.createElementNS(Rt.svg,"path"),p.getPath=function(t,e){return c.setAttribute("d",lg(t,V,W,e,n)),c},p.getLinkByPoint=function(t){return r.get(t._key)},p.getNodeByPoint=function(t){return a.get(t._key)},G.disabled=function(){return!1===ft.enabled},o.cache.customPoints.sankeyNodes={"0_0":G},setTimeout((function(){p.chartRendered=!0}),lt)};function g(t,e){var n=o.dataset.getX(t),r="link"==t._type?function(t,e){var n=o.dataset.getColumn(e,0);return Wo(n[n.datatype],t,n.datatype,o)}(n,t._format||"x"):n;return wa(e,a).get(r)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,width:o.plotarea.width,height:o.plotarea.height};return cv(o,t,e)}return p.getHighlighter=function(t,e){return p.highlighter=new iv(t,p,n)},p.getPosition=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=g(t);if(u)return{x:l.x0,y:l.y0,width:l.x1-l.x0,height:l.y1-l.y0};var s,c=l.x1-l.x0,h=(l.y1,l.y0,0),f=2*o;if(n&&(h=Xe(n.width,r)),qa(e.start,l))s=d?l.x0-i-2*a-h-f:l.x1+i;else if(qa(e.end,l))s=d?l.x1+i:l.x0-h-i-2*a-f;else{var p=l.x0+c/2;s=p-h/2-a-f}return{x:s,y:l.y0,width:h+2*a+f,height:l.y1-l.y0}},p.getLabelAnchor=function(t){var n=g(t);return u?io:qa(e.center,n)?io:qa(e.end,n)?d?oo:lo:d?lo:oo},p.getSankeyNodeByPoint=g,p.getColor=function(t,e){return!na(s[t._type].fillColor)&&na(t.arcColor)?t.arcColor:"node"===t._type?i(t):"link"===t._type?l(t,e):void 0},p.commonRendererProp=function(e){return e?(t=e,p):t},p.destroy=function(){c=null},p}function cv(t,e,n){var a="sankey-animation-clip-".concat(t.idNumeric),r=hp.createElement("rect",a,t);return n=n||{x:0,y:0,width:t.plotarea.width,height:t.plotarea.height},yv(t)&&(n.x=t.scrolledX||0,n.y=t.scrolledY||0,n.width+=t.scrolledX||0,n.height+=t.scrolledY||0),r.interrupt(),hp.setAttributes(r,n,["x","y","width","height"]),e.attr("clip-path","url(#".concat(a,")")),t.container.selectAll(".labelholder").attr("clip-path","url(#".concat(a,")")),r}function uv(t,e){t&&t.exit?(e.options.linear.y1=0,e.options.linear.y2=100,e.options.linear.x1=null,e.options.linear.x2=null):(e.options.linear.x1=0,e.options.linear.x2=100,e.options.linear.y1=null,e.options.linear.y2=null)}lv._defaultH=function(){var t=this;return[{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:function(e){var n;return n="link"===e._type?t.renderer.getSankeyNodeByPoint(e).index:e.itemIndex,Kg.call(t,e,"inherit",n)}}]},lv.data=function(t){var e=this,n=this.chart,a={node:0,link:1};return t._setPolygonType=function(e){return t._polygonType=e},t._polydata=this.poly(t),t._getRank=function(){return a[t._type]},function(){n.cache.data[t._key]||(n.cache.data[t._key]={});var a=n.cache.data[t._key];if(!na(a._x)){var r=_slicedToArray(Ft(e.getPolygon(this,!0)),2),o=r[0],i=r[1];a._x=t._x=o,a._y=t._y=i,a._defined=t._defined=!0,a._point=t}return a._visible=t._visible=e.isVisible(t),t}},lv.isVisible=function(t,e){var n=this.chart,a=n.cache.disabledItems,r=n.dataset.getX(t),o=n.dataset.getY(t,0),i=n.dataset.getZ(t),l="absolute"===fa(n.systemConf,"chart.plot.plotoptions.sankey.showAsNegative"),s=!1;n.dataset.clridx;l&&(i=Ze(i));var c=!a.has(r)&&!a.has(o)&&i>0,u=("node"===t._type||"link"===t._type)&&(n.systemConf.legend.ranges?Rs(t[0],n)&&(null==t[1]||Rs(t[1],n)):Rs(n.dataset.getClr(t),n));return c&&"node"===t._type&&"legend"!==e&&(s=this.renderer.getSankeyNodeByPoint(t).hasOwnProperty("fixedValue")),c&&u&&!t.disabled&&!s},lv.getPolygon=function(t,e){var n,a=this,r=a.renderer,o="bezier"===r.sankeyOptions.link.curve,i=a.chart.dataObject.sankeyLayout.zoomTransform;if("link"===t._type){var l=r.getLinkByPoint(t);if(l){if(!i||!l._polypointsOrig){if("path"===t._polygonType||o||l.circular)n=function(t,e){for(var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=t.getTotalLength(),o=[],i=_slicedToArray(a,2),l=i[0],s=i[1],c=0;c<=r;c+=e)n=t.getPointAtLength(c),o.push([n.x+l,n.y+s]);return o.push(o[0].slice(0)),o}(r.getPath(l,4),10);else n=l._polypoints;l._polypoints=n,a.chart.systemConf.chart.zoom.enabled&&!l._zoomed&&(l._polypointsOrig=Hn(n))}if(i){n=l._polypointsOrig;var s=Hn(n);l._polypoints=n=s.map((function(t){return t[0]=t[0]*parseFloat(i.k)+parseFloat(i.x),t[1]=t[1]*parseFloat(i.k)+parseFloat(i.y),t})),l._zoomed=!0}}}else{var c=r.getSankeyNodeByPoint(t);if(c&&(n=c._polypoints,i&&e)){c._zoomed||(c._polypointsOrig=Hn(c._polypoints));var u=Hn(c._polypointsOrig);c._polypoints=n=u.map((function(t){return t[0]=t[0]*parseFloat(i.k)+parseFloat(i.x),t[1]=t[1]*parseFloat(i.k)+parseFloat(i.y),t})),c._zoomed=!0}}return n||[[null,null]]},lv.poly=function(t){var e=this,n=e.chart;return function(){n.cache.data[t._key]||(n.cache.data[t._key]={});var a=n.cache.data[t._key];return a._poly||(a._poly=t._poly={points:e.getPolygon(t)}),t._poly}},lv.renderingContext=function(){return Jg.get("area").call(this,this.chart)},lv.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},lv.options=function(t){var e=this.renderer.commonRendererProp().params,n=e.commonPlotOptions,a=e.hoverOptions.fillOpacity.fillOpacity;n.fillOpacity=a;var r=this.chart.dataObject.sankeyLayout.completeGraph.links[t.itemIndex];return n.color=n[t._type].fillColor?$n(n[t._type].fillColor,r,r.index,r.point.arcColor,chartObj):this.renderer.getColor(t,!0),!n.link.gradients.customGradient&&na(n.link.gradients.type)&&uv(t,n.link.gradients),n},lv.path=function(t,e){var n,a=this,r=e.context.call(a),o=e.translate.call(a),i=a.renderer,l=i.sankeyOptions,s=l.link,c=l.node,u=c.strokeWidth;r.style("display","").attr("transform","translate(".concat(o[0]+u,",").concat(o[1]+u,")")),"link"===t._type?n=i.getLinkByPoint(t):"node"===t._type&&(n=i.getSankeyNodeByPoint(t));var d=wc("path",".sankey-highlight-".concat(t._type,"-").concat(n.index),[n],r).attr("d",(function(t){return lg(t,c,s,.5,i.sankeyLayout)})),h=a.chart.dataObject.sankeyLayout.zoomTransform;return h&&d.attr("transform","translate("+h.x+","+h.y+") scale("+h.k+" "+h.k+")"),d},lv.getDependentLayoutPoints=function(t,e,n){var a=this,r=(a.chart,a.renderer),o=a.chart.dataObject.sankeyLayout,i=a.chart.phase,l=function(t){return t.filter((function(t){var e=t.point;return e&&e.hasOwnProperty("_visible")&&"legendFilter"!==i&&"legend"!==n?e._visible:e?e._visible=a.isVisible(e,n):void 0}))},s={link:r.getLinkByPoint,node:r.getSankeyNodeByPoint}[t._type](t);if(s){var c=o.getAllConnectedPoints(s,e);return e?l(c):{links:l(c.links),nodes:l(c.nodes)}}return[]},Pe.sankey=sv,Jp.sankey=sv;var dv=function(){};function hv(t,e,n,a){var r,o=t.dataObject.hierarchical,i=t.plotarea,l="width"==n?t.scrolledX:t.scrolledY,s=(t.axes[e].count,0);s=o?sc(e,a,t):"x"==e?t.axes.x.ticks.preCalcAxisLen:t.axes.y.groups[0].ticks.preCalcAxisLen;var c=a;Ao(t)&&!t.isAxisCategory&&(c=o.pivotLayout.getRootNodeList("y"==e?"row":"column").getLeavesCount());var u=tc(t,e,c),d=u.component.tickLabelWidth(),h=u.component.orient(),f={left:(p=0)*t.plotarea.left,right:p*t.plotarea.right,top:p*t.plotarea.top,bottom:p*t.plotarea.bottom};if("height"==n){r="left"==h?{x:-i.left,y:l-f.top,width:i.width+i.left+s,height:i.height+f.top+f.bottom}:{x:-s-i.width,y:l-f.top,width:i.width+d+s,height:i.height+f.top+f.bottom};f={left:(p=.5)*t.plotarea.left,right:p*t.plotarea.right,top:p*t.plotarea.top,bottom:p*t.plotarea.bottom};if("auto"==t.userdata.chart.height&&"auto"==t.systemConf.chart.height||t.userdata.chart.height<i.height)r.y=l-f.top,r.height=i.height+f.top+f.bottom;else if(0==l)r.y=l-f.top,r.height=i.height+f.top;else if(na(t.defaultScroll.dimension)){100*(l+i.height)/t.defaultScroll.dimension.height>99.8&&(r.y=l,r.height=i.height+f.bottom)}}else{r="bottom"==h?{x:l,y:-s-i.height,width:i.width,height:s+i.height+d}:{x:l,y:-i.top,width:i.width,height:i.height+i.top+s};var p;f={left:(p=.5)*t.plotarea.left,right:p*t.plotarea.right,top:p*t.plotarea.top,bottom:p*t.plotarea.bottom};if(l+i.width==t.defaultScrollWidth||t.userdata.chart.width<i.width)r.x=l-f.left,r.width=i.width+f.left+2*f.right;else if(0==l)r.x=l-f.left,r.width=i.width+f.left;else if(na(t.defaultScroll.dimension)){100*(l+i.width)/t.defaultScroll.dimension.width>99.8&&(r.x=l,r.width=i.width+2*f.right)}}return r}function fv(t,e,n,a){var r=t.container.selectAll("g.".concat(e,"-axis")).selectAll("g.axisgroup,g.minmaxlabelsGroup"),o=function(t,e){var n="width"==e?t.scrolledX:t.scrolledY;return"height"==e?[0,-n]:[-n,0]}(t,n),i=_slicedToArray(o,2),s=i[0],c=i[1],u=pv(t),d=function(t){return t&&t.search("-")>-1};r.each((function(r,o){var i,h,f=l(this);if(mv(t))if(i=function(t,e){return l(e.parentNode).attr("class").replace("".concat(t,"-axis-"),"")}(e,this),"minmaxlabelsGroup"===f.attr("class")||d(i))h=function(t,e,n){var a=pv(t),r=iu(n.parentNode).translate,o=t.plotarea,i=t.plotarea_approx,l=t.rendererConf[0].bound(),s=t.dataObject.isPolarAxisCategory&&"x"===e||!t.dataObject.isPolarAxisCategory&&"y"===e,c=s?-r[0]-i.x+o.left+a[0]:-r[0]+o.left+a[0],u=s?-r[1]-i.y+o.top+a[1]:-r[1]+o.top+a[1];return{x:c,y:u,width:Xe(o.width,Ge(-c+l.width,0)),height:Xe(o.height,Ge(-u+l.height,0))}}(t,e,this);else{if(a)return;h=hv(t,e,n,+i)}else h=hv(t,e,n,o);var p=d(i)?t.dataObject.isPolarAxisCategory&&"x"===e||!t.dataObject.isPolarAxisCategory&&"y"===e?[-u[0]+t.plotarea_approx.x,-u[1]+t.plotarea_approx.y]:[-u[0],-u[1]]:[s,c],g="default_scroll_axes_".concat(e,"_").concat(o,"_clip").concat(t.id);if((hp.rect(h,g,null,null,null,t),f.attrs({transform:"translate(".concat(p[0],",").concat(p[1],")"),"clip-path":"url(#".concat(g,")")}),t.staticPaneSVG.selectAll("g.threshold").attrs({transform:"translate(".concat(p[0],",").concat(p[1],")")}),t.dataObject.hierarchical&&t.dataObject.hierarchical.categoryTree&&!d(i))&&wo(e,o,t))l(this.parentElement).selectAll("g.axislabelgroup").attrs({transform:"translate(".concat(s,",").concat(c,")"),"clip-path":"url(#".concat(g,")")})}))}function pv(t){var e=jt();if(e){var n=e.srcElement||e.target;return[n.scrollLeft,n.scrollTop]}return[t.scrolledX||0,t.scrolledY||0]}function gv(t,e,n){var a=t.axes.rotated,r=(t.plotarea,"x"==e?t.scrolledX:t.scrolledY,t.dataObject.hierarchical),o={x:a?"height":"width",y:a?"width":"height"},i={x:a?"y":"x",y:a?"x":"y"};if("xy"==e?(fv(t,"x",o.x),fv(t,"y",o.y)):"x"==e?(fv(t,i[e],o[i[e]]),mv(t)&&fv(t,i.y,o[i[e]],!0)):(fv(t,i[e],o[i[e]]),mv(t)&&fv(t,i.x,o[i[e]],!0)),"init"==n&&"xy"==e&&r){var l=r.pivotLayout.getRootNodeList("row").getCount(),s=t.axes.y.count;if(!l)return;var c=t.axes.y.branches[l-1],u=(c.component.majorTicks(),c.component.orient()),d=wc("g",".scroll_roller_grid_group",[1],t.wrap.selectAll("g.y-axis-".concat(s-1)),".y-axis"),h=wc("g",".scroll_roller_header_grid_group",[1],d,".y-axis"),f=wc("g",".scroll_roller_footer_grid_group",[1],d,".y-axis"),p=t.wrap.selectAll("g.y-axis-".concat(s-1)).selectAll("line.majorTicks").nodes();if(p.length){var g=p[0].cloneNode(0),v=p[0].cloneNode(0);h.node().appendChild(g),f.node().appendChild(v),"left"==u?(h.attr("transform","translate(0,0.5)"),f.attr("transform","translate(0,".concat(t.plotarea.height+.5,")"))):"bottom"==u&&(h.attr("transform","translate(0.5,0)"),f.attr("transform","translate(".concat(t.plotarea.width+.5,",0)")))}}}function vv(t,e){var n=t.plotarea,a=n.left,r=n.top,o=n.width,i=n.height;return e&&(a=r=0),na(t.divScroll)&&(a-=t.scrolledX,r-=t.scrolledY,o+=t.scrolledX,i+=t.scrolledY),{x:a,y:r,left:a,top:r,width:o,height:i}}function mv(t){return t.dataObject.isPolarAxisCategory||Ll(t.chartTypes[0].value,Ti)}function yv(t){return(t._isAxisCategory()||t.dataObject.isFlowChartCategory)&&t.systemConf.chart.width||t.systemConf.chart.height}function bv(t){var e=_e.singleSourceEvent,n=_e.nonaxis,a=_e.nonaxismultiseries,r=n.concat(a),o=_e.polarAxis,i=t.oldChartTypes;t.chartTypes.map((function(n,a){(-1==r.indexOf(i[a].value)&&-1!=r.indexOf(n.value)||-1!=o.indexOf(i[a].value))&&(function(t){var e=t.svg;e.selectAll(".x-axis").selectAll("g").remove(),e.selectAll(".y-axis").selectAll("g").remove()}(t),function(t,e){pa(t.axes,"x.axisLabel",null),pa(t.axes,"y.groups["+e+"].axisLabel",null)}(t,a),function(t){t.staticPaneSVG.selectAll(".threshold").selectAll("g").remove()}(t),function(t){t.staticPaneSVG.selectAll(".plotareaBorder-property").selectAll("line").remove()}(t)),-1===e.indexOf(n.value)&&t.eventHandler.removeTracker(),function(t){t.staticPaneSVG.selectAll(".labelholder").selectAll("g").remove()}(t)}))}dv.prototype.defaultScroll=function(t,e){if(yv(t)){var n=$n(t.systemConf.chart.width,t),a=$n(t.systemConf.chart.height,t),r=na(n),o=na(a),i=this.mode=r&&o?"xy":r?"x":"y",l=t.axes.rotated,s=t.plotarea,c=qa(_e.nonAxisSingleSourceEvent,t.chartTypes[0].value),u=is(t,"width")-s.width,d=is(t,"height")-s.height,h=t.container.selectAll(".d3container").selectAll(".zohocharts_scroll"),f=+h.attr("scrollbarSize"),p=s.width+("xy"!=this.mode&&"x"!=this.mode&&l?0:u);s.height,"xy"==this.mode||this.mode;t.defaultScrollWidth=p,gv(t,i,"init");var g={left:s.left+un,top:s.top+un,height:s.height+("xy"==this.mode||"x"==this.mode?f:0)+un,width:s.width+("xy"==this.mode||"y"==this.mode?f:0)+un,"overflow-y":"xy"==this.mode||"y"==this.mode||l?"auto":"hidden","overflow-x":"xy"!=this.mode&&"x"!=this.mode&&l?"hidden":"auto"};if(t.container.selectAll(".qualitativeGroupHolder").selectAll("g#plot_notes_main").attrs({_x:null,_y:null}),h.styles(g).on("scroll",(function(e){var n,a=jt().srcElement||jt().target,r=a.scrollLeft,o=a.scrollTop,l=t.scrolledX!==r;t.scrolledY;t.scrolledY=o,t.scrolledX=r;var s=l?"x":"y";n=l?r:o,jt().clientX=jt().clientX||0,jt().clientY=jt().clientY||0,t.dataObject.isAxisCategory&&(t.eventHandler.tooltipElement.hide(),t.eventHandler.handlers.mouseout.call(t.eventHandler)),t.cache.data={},t.cache.search={},C(n,i,s)})),t.canvasScrollGroup&&t.canvasScrollGroup.styles(g),Ar.CHROME){var v=t.canvasarea;this.fixScrollView(!1,{width:v.width+("xy"!=this.mode&&l?0:u),height:v.height+("xy"==this.mode||l?d:0)},t)}var m=s.width+("xy"!=this.mode&&"x"!=this.mode&&l?0:u),y=s.height+("xy"==this.mode||"y"==this.mode||l?d:0);t.defaultScroll.dimension={width:null===n||isNaN(n)?n:m,height:null===a||isNaN(a)?a:y},h.selectAll(".child").styles({height:y+un,width:m+un,"pointer-events":dn,margin:0,padding:0,"background-color":hn}),(t.dataObject.isAxisCategory||t.dataObject.isFlowChartCategory||c)&&t.eventHandler.addListeners(h);var b=t.scrolledX?"x":"y",x="x"==b?t.scrolledX:t.scrolledY;x&&"addorremoveseries"===e&&(C(x,this.mode,b),t.scrolledX&&t.scrolledY&&C(t.scrolledY,this.mode,"y"))}function C(e,n,a){var r=t.container.selectAll(".seriesholder"),o=t.container.select(".seriesClippathholder").attr("clip-path"),i=iu(r).translate,l="x"==a?s.left-e:i[0],u="x"==a?i[1]:s.top-e,d=t.scrolledX,h=void 0===d?0:d,f=t.scrolledY,p=void 0===f?0:f;r.attr("transform","translate(".concat(l,",").concat(u,")")),t.container.selectAll(".zc-fade-overlay").attr("transform","translate(".concat(-t.scrolledX,",").concat(-t.scrolledY,")")),t.container.selectAll(".labelholder").attr("transform","translate(".concat(l,",").concat(u,")")),t.container.selectAll(".eventgroup").attr("transform","translate(".concat(-t.scrolledX,",").concat(-t.scrolledY,")")),t.container.selectAll("rect.eventhandler").attr("transform","translate(".concat(t.scrolledX,",").concat(t.scrolledY,")")),t.container.selectAll(".qualitativeGroup").attr("transform","translate(".concat(-t.scrolledX,",").concat(-t.scrolledY,")"));var g="translate(".concat(-t.scrolledX+un,",").concat(-t.scrolledY+un,")");t.container.selectAll("canvas").style("transform",g),t.container.selectAll("canvas").style("".concat(Ar.prefix.css,"transform"),g),t.container.selectAll(".highlight-canvas").style("transform",null),t.drawPlotareaClippath(),t.notesParent&&t.notesParent.length&&t.notesParent.map((function(n){if(n.node().ownerSVGElement){var r,o,i=n.selectAll("g#plot_notes_main"),l=i.attr("_x"),s=i.attr("_y");if(na(l))r="x"==a?parseFloat(l)-e:parseFloat(l)-h,o="x"==a?parseFloat(s)-p:parseFloat(s)-e;else{var c=iu(i).translate;i.attrs({_x:c[0],_y:c[1]}),r="x"==a?c[0]-e:c[0]-h,o="x"==a?c[1]-p:c[1]-e}i.attr("transform","translate(".concat(r,",").concat(o,")")),n.attr("clip-path","url(".concat(t.defsLocation,"#").concat(t.plotClippathID,")"))}}));var v="y"==a?{y:-e,height:s.height+e}:{x:-e,width:s.width+e};(t.dataObject.isAxisCategory||t.dataObject.isPolarAxisCategory||t.dataObject.isFlowChartCategory||c)&&t.eventHandler.trackerElement.attrs(v).attr("clip-path",o),gv(t,a),t.dataObject.isFlowChartCategory&&cv(t,t.wrap.selectAll("g.seriesholder"));var m={name:"rect_highlight",id:t.id};"y"==a?(m.x=-s.left+t.scrolledX,m.y=e,m.width=s.width+s.left,m.height=s.height):(m.x=e,m.y=s.top+t.scrolledY,m.width=s.width,m.height=s.height);var y="default_scroll_highlight_clip_".concat(t.id);(hp.rect(m,y,null,null,null,t),t.plot.hasBgAspectRatio)&&t.plotareaPropertyElement.styles({"background-position-x":"".concat(-t.scrolledX,"px"),"background-position-y":"".concat(-t.scrolledY,"px")})}},dv.prototype.initialize=function(t){if(yv(t)){var e=na(t.systemConf.chart.width),n=na(t.systemConf.chart.height),a=this.mode=e&&n?"xy":e?"x":"y",r={x:(l=t.axes.rotated)?"y":"x",y:l?"x":"y"};t.plotarea;t.scrolledX=t.scrolledX||0,t.scrolledY=t.scrolledY||0;var o={overflow:"scroll",position:"absolute",margin:0,padding:0,"background-color":"rgba(0,0,0,0)","box-sizing":"content-box","-webkit-tap-highlight-color":hn,"-webkit-overflow-scrolling":"touch"},i=dc(t.container.selectAll(".d3container"),Cr,[1],".","class","zohocharts_scroll");i.styles(o),dc(i,Cr,[1],".","class","child");var l=t.axes.rotated,s=t.defaultScroll,c=i.node();"xy"==a&&(u=c.offsetWidth-c.clientWidth+(c.offsetHeight-c.clientHeight));var u=l||"y"==a?c.offsetWidth-c.clientWidth:c.offsetHeight-c.clientHeight;i.attr("scrollbarSize",u);var d=r.y,h="x"==r.x?t.systemConf.chart.axes.xaxis:t.systemConf.chart.axes.yaxis[0],f="x"==d?t.systemConf.chart.axes.xaxis:t.systemConf.chart.axes.yaxis[0];s||((s=t.defaultScroll={}).tickmarkSize=+h.tickmark.size,s.marginRight=+t.systemConf.chart.marginRight,s.tickmarkSizeVertical=+f.tickmark.size),"x"!=a&&"xy"!=a||"top"===h.orient||(h.tickmark.size=+s.tickmarkSize+u),"y"!=a&&"xy"!=a||"right"!=f.orient||(f.tickmark.size=+s.tickmarkSizeVertical+u),"canvas"===t.systemConf.chart.plot.renderer.mode.toLowerCase()&&(t.canvasScrollGroup=wc("div",".canvas_scroll_group",[1],t.chartParentElement,".static").styles(o)),"xy"!=a&&"y"!=a||(t.plotarea.bottom+=u,t.plotarea.width-=u)}},dv.prototype.fixScrollView=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n.svg.styles({width:e.width+un,height:e.height+un}),n.d3container.style("overflow",t?null:"hidden")},wn.setComponent("smoothScroll",dv);var xv=L();xv.set("bar","series_"),xv.set("pie","group"),xv.set("funnel","group"),xv.set("pyramid","group"),xv.set("scatter","series_"),xv.set("line","series_"),xv.set("area","series_");var Cv=L();function kv(t,e){var n=L();e.map((function(e,a){var r={},o=t.renderer[a].commonRendererProp().params.commonPlotOptions.multiColoring;r.isAxisCategory=t.isAxisCategory,r.seriesIndex=a,r.chartType=e.name,r.pathData=function(t,e,n,a){var r=t.svg.selectAll(".seriesholder"),o=[],i=e?a:"";return r.selectAll(".".concat(n).concat(xv.get(n)).concat(i)).selectAll("path").each((function(){o.push(this)})),Cv.get(n)(o)}(t,r.isAxisCategory,e.name,a),r.color=function(t,e,n,a,r){var o,i=e?r:"";o=e&&n||!e?a.map((function(e,n){return Fs(t,n,e,i)})):a.map((function(e){return Fs(t,0,e,i)}));return o}(t,r.isAxisCategory,o,r.pathData,a),r.plotarea=t.plotarea,r.transformationInfo=function(t,e,n,a){var r=t.svg.selectAll(".seriesholder"),o=e?a:"",i=wv.get(n),l=[];return r.selectAll(".".concat(n).concat(xv.get(n)).concat(o)).selectAll(i).each((function(){var t=iu(this);l.push({x:t.translate[0],y:t.translate[1]})})),l}(t,r.isAxisCategory,e.name,a),n.set(a,r)})),t.oldSeriesInfo=n}Cv.set("bar",(function(t){return t})),Cv.set("pie",(function(t){return t})),Cv.set("funnel",(function(t){var e=[];return t.map((function(t){-1!=t.getAttribute("id").indexOf("funnel")&&e.push(t)})),e.reverse()})),Cv.set("scatter",(function(t){var e=[];return t.map((function(t){-1!=t.getAttribute("class").indexOf("outer")&&e.push(t)})),e})),Cv.set("pyramid",(function(t){for(var e=t.length/4,n=[],a=0,r=0;r<e;r++){var o=t[a+2].getAttribute("d")+" "+t[a+3].getAttribute("d"),i=(o=o.replace(/[^\d. ]/g,"")).split(" "),l="M".concat(i[6]," ").concat(i[7]," L").concat(i[4]," ").concat(i[5]," L").concat(i[14]," ").concat(i[15]," L").concat(i[12]," ").concat(i[13]," L").concat(i[2]," ").concat(i[3]," L").concat(i[0]," ").concat(i[1]);t[a].setAttribute("d",l),n.push(t[a]),a+=4}return n.reverse()}));var wv=L();function _v(t,e){var n=t.oldSeriesInfo.get(e);return t.isAxisCategory?t.isAxisCategory&&n.isAxisCategory?{x:n.plotarea.left-t.plotarea.left,y:n.plotarea.top-t.plotarea.top}:{x:-(t.plotarea.left-n.plotarea.left)+n.plotarea.centerX,y:-(t.plotarea.top-n.plotarea.top)+n.plotarea.centerY}:t.isAxisCategory||n.isAxisCategory?{x:-t.plotarea.centerX+(n.plotarea.left-t.plotarea.left),y:-t.plotarea.centerY-(t.plotarea.top-n.plotarea.top)}:{x:n.plotarea.centerX-t.plotarea.centerX,y:n.plotarea.centerY-t.plotarea.centerY}}function Sv(t,e,n,a){var r=e.data,o=r.dataType,i=r.meta,l=e.domain,s=l.ranges,c=l.stops,u=t.ranges,h=function(t){var e=t.datatype;return(t[e]||{}).subfunction}(i),f=n.domain();if(a===Qi&&!s&&o!==To){var p=u&&u._cache;if(p&&p.subFunction===h&&ha(p.domain)===ha(f))return u;var g=df(t,n,a),v=c?f:uf(n,o,g+1,h),m=1===v.length?[[v[0],v[0]]]:d(v);return m._dummy=!0,m._cache={subFunction:h,domain:f},u&&ha(u)===ha(m)&&u.forEach((function(t,e){return m[e].disabled=t.disabled})),m}u&&u._dummy}function Ov(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=i.eventHandler,c=s.selectionDomain,u=c&&c[n];if(!ua(t))return e.originalDomain;if(u&&u.length&&"plot"!==s.activeBrushComponent)return u;var d,h={selection:t,quadTreePosition:[]},f=t.map((function(t,s){var c={x:0,y:0};return c[Av(n,r)]=t,Wt.invert(a,c,e,r,n,o,null,h,i,l)})),p=_slicedToArray(f,2),g=p[0],v=p[1];if(a===To){var m=_slicedToArray(h.quadTreePosition,2),y=m[0],b=m[1],x=wh(e),C=e.bandwidth(),k=x[v]+C/2,w=x[v-1]+C/2;h.quadTreePosition.length?Xn(y)&&Xn(b)&&(k>=t[0]&&k<=t[1]||w>=t[0]&&w<=t[1]||(g=-1,v=0)):Tv(t,x,g,C)&&(g=-1,v=0)}if(g>v){var _=[v,g];g=_[0],v=_[1]}if(a===To){var S=fa(i,"behaviouralEvents.eventManager.behaviours.CHART_SCROLL.instance"),O=fa(S,"overviewEnabled");if(!l&&!O){var A=fa(S,"visiblePointCount");v+=na(A)?A-(v-g+1):0}d=e.domain().slice(g,v+1,0)}else d=[g,v];return"plot"===s.oldBrushComponent&&"scroll"===s.activeBrushComponent&&(s.oldBrushComponent=null,s.activeBrushComponent=null),"plot"===s.activeBrushComponent&&(s.selectionDomain=c||{},s.selectionDomain[n]=d),d}function Av(t,e){return e&&{x:"y",y:"x"}[t]||t}function Tv(t,e,n,a){var r=t[0],o=t[1],i=e[n],l=e[n+1],s=e[n-1],c=i+a,u=l+a,d=s+a;function h(t,e,n){if(t>=e&&t<=n)return!0}return!(h(i,r,o)||h(c,r,o)||h(l,r,o)||h(u,r,o)||h(s,r,o)||h(d,r,o)||h(r,i,c)||h(o,i,c))}function Pv(t,e,n,a){var r,o,i=t.scale,l=t.baseScale,s=t.zoomScale,c=t.baseZoomScale,u=n.k>1;if(e=e.toUpperCase(),i.bandwidth){var d=a||l.range();o=d.map((function(t){return n["apply".concat(e)](t)})),u&&(o=function(t,e){var n=_slicedToArray(e,2),a=n[0],r=n[1];return e[0]<e[1]?[Xe(t[0],a),Ge(t[1],r)]:[Ge(t[0],a),Xe(t[1],r)]}(o,d)),i.range(o)}else r=n["rescale".concat(e)](l).domain(),u&&(r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t[0]instanceof Date;a&&(t=t.map((function(t){return t.getTime()})),e=e.map((function(t){return t.getTime()})));var r=_slicedToArray(t,2),o=r[0],i=r[1],l=_slicedToArray(e,2),s=l[0],c=l[1],u=c+(c-o)*n,d=Ge(o,s-(i-s)*n),h=Xe(i,u);if(i<s&&(d=s-.001*(d-s),h=s+.001*(s-h)),o>c&&(d=c+.001*(c-d),h=c-.001*(h-c)),a){var f=_slicedToArray([d,h].map((function(t){return new Date(t)})),2);d=f[0],h=f[1]}return[d,h]}(r,l.originalDomain||i.originalDomain,i.outerPadding)),i.domain(r);if(s){var h=n["rescale".concat(e)](c).domain();s.domain(t.zoomDomain=h)}return{domain:r,range:o}}function Ev(t,e,n,a){var r=0,o=0;return e&&(r=e.baseZoomScale(e.zoomDomain[0])),n&&(o=n.baseZoomScale(n.zoomDomain[0])),R.scale(t).translate(-r,-o)}function Lv(t,e){!0===fa(e.systemConf,"chart.zoom.enabled")&&(t.zoomScale=m().range([0,e.axes.rotated?e.plotarea.height:e.plotarea.width]).domain([0,100]),t.baseZoomScale=t.zoomScale.copy())}function Mv(t,e){this.container=t,this.userdata=e,this.oldRenderer=[],this.dataset={},this.dataObject={},this.canvasarea={},this.chartarea={},this.legendarea={},this.legend={color:[{component:null}],component:null},this.renderer=[],this.svg=null,this.cache={},this.subrenderer=[],this.datalabels={moduleExists:Me},this.prepareLayout(),this.renderVisiblePointsOnly=!1}wv.set("bar",".zc_bar"),wv.set("pie",".zc_pie"),wv.set("funnel",".zc_funnel"),wv.set("pyramid",".pyramidsection"),wv.set("scatter",".scatter"),Mv.prototype.prepareLayout=function(){var t=this,e=(Se=Se||0,++Se);t.id="ZC_".concat(e),t.idNumeric=e;try{var n=this.userdata;t.isHiddenContainer=Sa(t.container.node()),t.createHelperElements(),t.handleHiddenContainer(),t.chartWidth=t.getChartDimension("width"),t.chartHeight=t.getChartDimension("height"),Mv.helpers.initializeChartHolders(t),t.setCanvasDimension(),t.chartTypes=pi.helpers.getAllChartTypes(n,"object"),t.chartFontProp={},t.globalProp=Sr(n,{width:t.canvasarea.width,height:t.canvasarea.height},t.chartFontProp),t.themeoptions=t.getThemeOptions(t.globalProp),n.metadata||t.userdata._viewParser||Er("metadata",n),t.defsLocation=Un(),t.svg.append("defs")}catch(e){Mv.helpers.handleErrors(t,e)}};var Dv,Iv={getPatternSvg:function(){var t=this,e=t.patternSVG;if(!na(e)){var n=Ya(t.container.node());e=t.patternSVG=l(n).select("svg.svgPattern")}return e},getDocumentIndex:function(){var t=this;return na(t.DOCUMENT_INDEX)||(t.DOCUMENT_INDEX=Ua(this.container.node())),t.DOCUMENT_INDEX},getBaseContainer:function(){var t=this,e=t.getDocumentIndex();return na(t.BASE_HELPER_CONTAINER)||(t.BASE_HELPER_CONTAINER=gn[e].BASE_HELPER_CONTAINER),t.BASE_HELPER_CONTAINER},createHelperElements:function(){var t=this,e=Ya(t.container.node()),n=l(e).select("svg.svgPattern");if(n.empty()){var a=Ba(e),r=l(e),o=t.baseContainer=dc(r,"div",[1],".","class","__baseZC_Container__");if(o.styles({position:"absolute",left:-9999+un,top:-9999+un}),t.patternSVG=dc(o,"svg",[1],".","class","svgPattern").attrs({version:"1.1",xmlns:Rt.svg}),dc(t.patternSVG,"defs",[1]),gn){var i=0,s=i++;a.ZC_DOCUMENT_INDEX=s,gn[s]={BASE_HELPER_CONTAINER:t.baseContainer,EFFECTS:{},ANIMATION:{},CANVASPATTERN:{}}}}else t.patternSVG=n},handleHiddenContainer:function(t){var e=this,n=e.container;if(t&&na(e.originalContainer))e.originalContainer.node().appendChild(e.d3container.node()),e.container.remove(),e.container=e.originalContainer,delete e.isHiddenCoainer,delete e.originalContainer;else{var a=n.node();if(e.isHiddenContainer){var r=a.cloneNode(0);e.getBaseContainer().node().appendChild(r),r.style.setProperty("display","block","important"),e.isHiddenCoainer=!0,e.originalContainer=n,e.container=l(r)}}},updateCanvasArea:function(){var t=this,e=t.systemConf;t.container.selectAll("div.d3container").styles({position:"relative",width:t.getChartDimension("width")+un,height:t.getChartDimension("height")+un}),(t.chartParentElement=t.container.selectAll("div.canvas-component")).styles({position:"relative",width:"".concat(t.canvasarea.width,"px"),height:"".concat(t.canvasarea.height,"px")});var n=t.container.selectAll("div.canvas-property");n.styles({position:"absolute",width:"".concat(t.canvasarea.width,"px"),height:"".concat(t.canvasarea.height,"px")}),t.updateCommonBBSProp(n,null,e.canvas,"canvas")},getThemeOptions:function(t){var e,n,a=this,r=a.distinctChartTypes||er(up(a.userdata)),o=Gn(a.userdata,"canvas.theme",!0);n=new Tr(t),r.forEach((function(e){return Er(e,n.chart.plot.plotoptions,t)}));var i=Te[o]||window.$ZC&&$ZC[o];return i?(e=new i(t),Rn(n,e,!0,!0)):(a.distinctChartTypes=r,n)},getChartDimension:function(t){var e=this,n={width:960,height:400};return e.isHiddenCoainer||(n[t]=e["_chart"+t]||Pa(e.container,t,!0),e["_chart"+t]=n[t]),n[t]},setCanvasDimension:function(t,e){t||e||(t=this.getChartDimension("width"),e=this.getChartDimension("height")),this.canvasarea={left:0,top:0,right:0,bottom:0,width:t,height:e}},setChartDimension:function(){var t=this,e=t.systemConf.canvas.border,n=e.show?ta(e,"size",0,10,t.canvasarea.width,t.canvasarea.height):0;t.titlearea={left:t.canvasarea.left+n,top:t.canvasarea.top+n,right:t.canvasarea.right-n,bottom:t.canvasarea.bottom-n,width:t.canvasarea.width-2*n,height:t.canvasarea.height-2*n},t.chartarea=Hn(t.titlearea),t.plotarea=Object.create(t.chartarea)},applyChartProperties:function(){var t=this,e=t.systemConf,n=t.chartHeight,a=e.canvas.title,r=e.canvas.subtitle,o=e.credits||{},i=a.show&&Nl(t,"title",n),l=r.show&&Nl(t,"subtitle",n);if(!0===o.enabled&&Nl(t,"credits",n)){Er("credits",t.systemConf,t.globalProp);t.drawTitle(t.systemConf.credits,"credits")}i&&("bottom"===a.vAlign&&"bottom"===r.vAlign&&r.show?t.drawTitle(e.canvas.subtitle,"subtitle"):t.drawTitle(e.canvas.title,"title")),l&&("bottom"===r.vAlign&&"bottom"===a.vAlign&&a.show?t.drawTitle(e.canvas.title,"title"):t.drawTitle(e.canvas.subtitle,"subtitle")),t.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("line","path").style("border",""),t.updatePlotArea()},updatePlotArea:function(){var t=this,e=t.systemConf;t.chartarea=Hn(t.titlearea),t.plotarea=Hn(t.chartarea);var n=e.chart,a=parseFloat(n.marginLeft),r=parseFloat(n.marginRight),o=parseFloat(n.marginTop),i=parseFloat(n.marginBottom),l=a+r>t.plotarea.width?0:a,s=a+r>t.plotarea.width?0:r,c=o+i>t.plotarea.height?0:o,u=o+i>t.plotarea.height?0:i;t.plotarea.left+=l,t.plotarea.right+=s,t.plotarea.bottom+=u,t.plotarea.top+=c,t.plotarea.width=t.plotarea.width-l-s,t.plotarea.height=t.plotarea.height-u-c},drawTitle:function(t,e){var n=this,a=n.svg,r=n.systemConf,o=na(t.x)&&na(t.y),i=window.location,l={top:Jn(t.marginTop,0),right:Jn(t.marginRight,0),bottom:Jn(t.marginBottom,0),left:Jn(t.marginLeft,0)},s=a.selectAll("g.chart".concat(e)),c=o?{x:t.x+l.left,y:t.y+l.top,dy:"1",textAnchor:"left"===t.hAlign?"start":"right"===t.hAlign?"end":"middle"}:Mv.helpers.align(t.hAlign,t.vAlign,n.titlearea,l),u=t.imageUrl,d=!na(u),h=t.htmlEl,f=d?""===t.text?dn:"text":"image";if((f=na(h)?"html":f)!==dn){if(!h){var p=dc(s,f,[t],".","class",e);if(na(t.href)){var g=function(){if(Vn(t.href)){var e=t.target;"newtab"===e||"newwindow"===e?window.open(t.href,"popUpWindow","newwindow"===e?"status=yes":""):i.href=t.href}else Be.log("invalid URL for credits")};Iu(p,{click:g},{tap:g})}}if(h)(p=s).attrs({transform:"translate(".concat(c.x-200,",").concat(c.y-50,")")}),p.html(h);else if(d){var v=n.userdata.canvas?n.userdata.canvas.fontColor:null;p.attrs({x:c.x,y:c.y,dy:"".concat(c.dy,"em"),"text-anchor":c.textAnchor}).styles({cursor:na(t.href)?fn:"auto",display:"block"}).text(Nn(t.text)),!0===t.tooltip&&mc(p),vc(p,[{fontColor:"subtitle"!==e||na(t.fontColor)||na(v)?t.fontColor||v:"#CCCCCC"},t,r.canvas,wr])}else u&&p.attrs({x:c.x+("right"===t.hAlign?-t.imageWidth:0),y:c.y+("bottom"===t.vAlign?-t.imageHeight:0),width:t.imageWidth,height:t.imageHeight,"xlink:href":t.imageUrl}).styles({cursor:na(t.href)?fn:"auto",display:"block"});var m=Bn(p.node()),y={left:o?t.x+l.left:m.x,top:o?t.y+l.top:m.y,width:m.width,height:m.height},b={left:l.left,top:l.top,right:n.titlearea.width-l.right,bottom:n.titlearea.height};if(hc(p.node(),Nn(t.text),y,b,"bottom","..",{left:5,right:5,top:5,bottom:5}),!o){var x=m.height+l.bottom+l.top;"top"===t.vAlign&&(n.titlearea.top+=x,n.titlearea.height-=x),"bottom"===t.vAlign&&(n.titlearea.height-=x)}}"html"!==f&&s.selectAll(f===dn?"text,image":"image"===f?"text":"image").style("display",dn)},updateCommonBBSProp:function(t,e,n,a){var r,o=this,i=o.systemConf,l=n.border||{},s=n.background||{},c=n.shadow||{},u=!0===fa(s,"gradients.show");if(t.styles({"background-color":s.color,opacity:s.alpha}),na(s.imageUrl)){"plotarea"==a&&o.plot.hasBgAspectRatio&&(s.imagePosition="initial",s.imageSize=["".concat(i.chart.width,"px"),"".concat(i.chart.height,"px")]);var d=Mv.helpers.getStyles4Image(s);t.styles(d)}else if(u){d=Mv.helpers.getStyles4Gradients(s);t.styles(d)}if(!0===l.show&&"canvas"===a){r="plotarea"===a?e:t;var h="canvas"===a?ta(i.canvas.border,"size",0,10,o.canvasarea.width,o.canvasarea.height):ta(i.chart.plot.border,"size",0,10,o.plotarea.width,o.plotarea.height);h=wa(h,2),r.styles({border:"".concat(h,"px ").concat(l.style," ").concat(l.color),"border-radius":"".concat(la(l.radius),"px")}),r.node().border={size:h,clr:l.color}}else r="plotarea"===a?e:t,"plotarea"!==a&&r.style("border","");if(!0===c.show){var f="".concat(c.x,"px ").concat(c.y,"px ").concat(c.blur,"px ").concat(c.color);!0===c.inset&&(f+=" inset"),t.style("box-shadow",f)}else t.style("box-shadow","")},updatePlotareaProp:function(){var t=this,e=t.systemConf,n=(t.d3container,t.plotareaPropertyElement),a=t.staticPaneSVG.selectAll("g.plotareaBorder-property"),r=t.plotarea.left,o=t.plotarea.top,i=t.plotarea.width,l=t.plotarea.height,s=t.plotarea.left+t.plotarea.width,c=t.plotarea.top+t.plotarea.height,u=e.chart.plot.background;if(u.image&&u.image.x){var d=t.axes.x.scale,h=d.domain(),f=$n(u.image.x.min,h,d,t),p=$n(u.image.x.max,h,d,t);na(f)&&(r=d(f)+t.plotarea.left),na(p)&&(s=d(p)+t.plotarea.left),i=s-r}if(u.image&&u.image.y){var g=t.axes.y.groups[0].scale,v=g.domain(),m=$n(u.image.y.min,v,g,t),y=$n(u.image.y.max,v,g,t);na(m)&&(c=g(m)+t.plotarea.top),na(y)&&(o=g(y)+t.plotarea.top),l=c-o}var b={position:"absolute",left:"".concat(r,"px"),top:"".concat(o,"px"),width:"".concat(i,"px"),height:"".concat(l,"px"),"pointer-events":dn,"box-sizing":"border-box"};b["".concat(Ar.prefix.css,"box-sizing")]="border-box",t.plotareaPropertyElement.styles(b),a.attrs({transform:"translate(".concat(t.plotarea.left,",").concat(t.plotarea.top,")")}),t.updateCommonBBSProp(n,a,e.chart.plot,"plotarea")},drawPlotareaClippath:function(){var t=this,e=t.systemConf;if(t.staticPaneSVG.selectAll("g.highlightergroup").attr("filter",t.filterEffectsID?"url(".concat(t.defsLocation,"#").concat(t.filterEffectsID,")"):null),e.chart.clip!==dn){var n=Gn(e,"chart.zoom.x")||na(t.scrolledX),a=Gn(e,"chart.zoom.y")||na(t.scrolledY),r=t.axes.rotated,o=function(t){var e={left:0,top:0,right:0,bottom:0},n=t.behaviouralEvents&&t.behaviouralEvents.eventManager.behaviours||{};if(!t.isAxisCategory||n.PLOT_ZOOM||n.PLOT_BRUSH||n.CHART_SCROLL)return e;var a=t.systemConf.chart.axes.xaxis,r=t.systemConf.chart.axes.yaxis,o=null!=a.minRange&&""!==a.minRange,i=null!=a.maxRange&&""!==a.maxRange,l=r.some((function(t){return null!=t.minRange&&""!==t.minRange})),s=r.some((function(t){return null!=t.maxRange&&""!==t.maxRange}));if(o&&i&&l&&s)return e;var c=t.axes.rotated,d=u(rp(t))/2;return{left:(c?l:o)?e.left:d,top:(c?i:s)?e.top:d,right:(c?s:i)?e.right:d,bottom:(c?o:l)?e.bottom:d}}(t),i=(r?a:n)?t.plotarea.left:-o.left+t.plotarea.left,l=(r?n:a)?t.plotarea.top:-o.top+t.plotarea.top,s=t.plotarea.width+((r?a:n)?0:o.left+o.right),c=t.plotarea.height+((r?n:a)?0:o.top+o.bottom),d={name:"rect",id:t.id,x:i,y:l,width:s,height:c},h=Hr.get(Hr.svg_clips,"rect",d,{chartObj:t}),f="g.seriesClippathholder, g.labelClippathholder, g.zcMapClipHighlight, g.thresholdClippathholder, g.zc-fade-overlay-clip-holder";f=t.dataObject.noofGanttEnabledSeries||t.dataObject.hasWhiskers?"".concat(f,",g.qualitativeGroupHolder"):f,t.plotClippathID=h,t.chartParentElement.selectAll(f).attr("clip-path","url(".concat(t.defsLocation,"#").concat(h,")"));var p="highlight_group_clip_".concat(t.id),g={x:d.x+(t.scrolledX||0),y:d.y+(t.scrolledY||0),width:s,height:c};hp.rect(g,p,null,null,null,t);var v="g#zcscatterCliphighlight, g#zcareaCliphighlight, g#zcbarCliphighlight, g.zcMapClipHighlight";v+=Ao(t)?", g.zcnonaxisCliphighlight":"",t.staticPaneSVG.selectAll(v).attr("clip-path","url(".concat(t.defsLocation,"#").concat(p,")"))}},getChartSeriesColor:function(){var t=this,e=t.systemConf,n=[],a=e.legend;if(a.colors)if(ua(a.colors))n=a.colors;else{var r=[];for(var o in a.colors)a.colors.hasOwnProperty(o)&&r.push(a.colors[o]);n=r}else a.colorPallete&&(n="monochrome"===a.colorPallete.type?du.getMonochromeColorPallette(a.colorPallete.options.monochrome):du.colorpallete.get(a.colorPallete.options.multicolor)||du.colorpallete.get("flat-ui-colors"));if(a.imagePallete){t.patternImageSizes=[];var i=du.imagePallete.get(a.imagePallete);t.imagePallete=i;var l="stripes"===a.imagePallete?null:50,s=dc(t.getPatternSvg(),"image",[1],".","class","tempImage");i.map((function(e,n){s.attr("xlink:href",e);var a=Bn(s.node());t.patternImageSizes[n]=[l||a.width||3,l||a.height||3]})),s.remove()}if(a.patterns)t.patternPallete=a.patterns;else if(a.patternPallete){var c=du.patternPallete.get(a.patternPallete);!na(c)&&ua(a.patternPallete)&&a.patternPallete.length&&(c=a.patternPallete),t.patternPallete=c}if(na(n)){var u=n.slice(0,n.length),d=0;t.seriesColor=u,t.mainSeriesColor=u,Bi.isQuantileColorScale(t)||t.seriesdata.map((function(e,a){na(e.color)?t.seriesColor[a]=e.color:t.seriesColor[a]||(t.seriesColor[a]=n[d++%n.length])}))}t.dataObject.categoryHierarchy&&t.dataObject.hierarchical.setGridOptions()},resetdata:function(t,e){var n,a,r,o=this;o.chartWidth=o.getChartDimension("width"),o.chartHeight=o.getChartDimension("height"),o.setCanvasDimension(),o.oldChartTypes=o.chartTypes,o.chartTypes=pi.helpers.getAllChartTypes(t,"object"),e&&(n=o.oldChartTypes,a=o.chartTypes,r=!0,!(void 0===n?r:n.length==a.length&&(n.map((function(t,e){a[e].name!=t.name&&(r=!1)})),r)))&&(o.systemConf.chart.plot.morph.enabled&&(o.oldSeriesInfo={},o.oldSeriesInfo.isAxisCategory=o.isAxisCategory,kv(o,o.oldChartTypes)),o.distinctChartTypes=er(up(o.userdata)),function(t,e){for(var n=e.chart.plot.plotoptions,a=0;a<t.distinctChartTypes.length;a++)Er(t.distinctChartTypes[a],n,t.globalProp)}(o,t),o.seriesAddRemoveDetails&&o.seriesAddRemoveDetails.seriesAddRemovePhase||(o.svg.selectAll(".seriesholder").selectAll("g").remove(),o.renderer=[],bv(o))),o.userdata.seriesdata&&o.userdata.seriesdata.chartdata&&(t.seriesdata.chartdata=o.userdata.seriesdata.chartdata),o.processUserData(t,!0),o.setChartDimension(),o.globalProp=Sr(t,{width:o.canvasarea.width,height:o.canvasarea.height},o.chartFontProp),o.events={},o.dataObject&&(o.dataObject.formattedData={x:[],y:[]})},destroy:function(){var t=this;t.destroying||($n(Gn(t.systemConf,"canvas.events.destroy",!0),jt(),t),t.eventHandler&&(clearTimeout(t.eventHandler.mouseouttimer),clearTimeout(t.eventHandler.mousemovetimer),clearTimeout(t.eventHandler.tooltipElement.timeout),t.eventHandler.tooltipElement.destroy()),t.timerObj.forEach((function(t){clearTimeout(t),clearInterval(t)})),t.container.datum(null),t.container=t.baseContainer=t.BASE_HELPER_CONTAINER=t.patternSVG=t.originalContainer=null,(t.dataObject.isAxisCategory||t.dataObject.isPolarAxisCategory)&&(ur(t.axes.x),t.axes.y.groups.forEach((function(t){return ur(t)}))),t.renderer.forEach((function(t){return ur(t.commonRendererProp().params.labelArray)})),t.renderer.forEach((function(e){ur(e.commonRendererProp().params.labelQueue,t),ur(e.commonRendererProp().params.labelParser,t)})),t.renderer.forEach((function(t){return t.destroy&&t.destroy()})),t.renderer.forEach((function(e){return ur(e,t)})),t.behaviouralEvents&&(ur(t.behaviouralEvents.eventManager.brushResetButton,t),Oa(t.behaviouralEvents.eventManager.behaviours,(function(t){ur(t)})),ur(t.behaviouralEvents,t)),ur(t.eventHandler,t),ur(t.dataObject,t),ur(t.cache),ur(t),t.destroying=!0)},redraw:(Dv=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var n,a;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(n=this).systemConf,n.updating=!0,n.phase="redraw",!n.racing||!n.racing.started){t.next=6;break}return t.next=6,new Promise((function(t,e){var a=setInterval((function(){n.racing.race_redraw&&(clearInterval(a),t())}),10)}));case 6:n.viewPortExtent=null,n._chartwidth=null,n._chartheight=null,n.svg.styles({width:n.getChartDimension("width")+un,height:n.getChartDimension("height")+un}),n.staticPaneSVG.styles({width:n.getChartDimension("width")+un,height:n.getChartDimension("height")+un}),n.resetdata(a,e),Mv.helpers.constructChartGroups(n),n.render(!0),n.phase=null;case 15:case"end":return t.stop()}}),t,this)}))),function(t){return Dv.apply(this,arguments)}),drawPlotBorder:function(){var t=this,e=t.systemConf.chart.plot.border,n=t.staticPaneSVG.selectAll("g.plotareaBorder-property");if(na(e)&&!0===e.show){var a=n.selectAll("path.plotBorderPath"),r=ta(e,"size",0,10,t.plotarea.width,t.plotarea.height),o=wa(t.tickarea,{left:0,right:0,top:0,bottom:0}),i=pc(-o.left||.5,-o.top||.5,t.plotarea.width+o.right+o.left,t.plotarea.height+o.bottom+o.top,Ia(e.radius),!1,!1);r=null==r||""===r?2:r,a.styles({"stroke-width":r,stroke:e.color,"stroke-dasharray":Gr(e.style,r),fill:dn,"pointer-events":dn}).attrs({d:i}),n.selectAll("line").style("stroke",hn)}},handleNoData:function(t,e){this.clearChart();var n=this,a=n.systemConf,r=wa(e,n.wrap.selectAll("g.nodatahandler"));if(na(t.htmlEl)){var o=dc(n.container.selectAll("div.canvas-component"),"div",[1],".","class","nodatahandler");o.style("position","absolute").html(t.htmlEl);var i=o.node();o.styles({left:"".concat(wa(t.x,(n.chartWidth-i.offsetWidth)/2),"px"),top:"".concat(wa(t.y,(n.chartHeight-i.offsetHeight)/2),"px")})}else if(na(t.imageUrl)){dc(r,"image",[1]).attrs({x:t.x||n.chartarea.width/2-50,y:t.y||n.chartarea.height/2-50,width:100,height:100,"xlink:href":t.imageUrl})}else if(na(t.text)){var l=dc(r,"text",[t],".","class","nodata");l.attrs({x:t.x||n.chartarea.width/2,y:t.y||n.chartarea.height/2,"text-anchor":"middle"}).text(Nn(t.text||"No Data")),vc(l,[t,a.canvas,wr])}},clearNoData:function(t,e){var n=this,a=(n.systemConf,wa(e,n.wrap.selectAll("g.nodatahandler")));if(na(t.htmlEl))dc(n.container.selectAll("div.canvas-component"),"div",[],".","class","nodatahandler");else if(na(t.imageUrl))dc(a,"image",[]);else if(na(t.text))dc(a,"text",[],".","class","nodata")},clearChart:function(t,e,n){var a=this;n||dc(a.wrap,"g",[],".","class","chartgroup"),dc(a.staticPaneSVG,"g",[],".","class","plotareaBorder-property"),dc(a.staticPaneSVG,"g",[],".","class","labelClippathholder"),dc(a.staticPaneSVG,"g",[],".","class","qualitativeGroupHolder"),dc(a.container,"div",[],".","class","legendgroup"),dc(a.staticPaneSVG,"g",[],".","class","legendarea"),dc(a.container,"div",[],".","class","zcnotes"),dc(a.container,"canvas",[],".","class","zc-canvas"),dc(a.container,"canvas",[],".","class","zc-labelholder-canvas"),a.eventHandler&&(a.isAxisCategory||a.dataObject.isPolarAxisCategory||a.isGeoMap)&&a.positionEventTrackerElement(null,{})},showLoading:function(t){var e=this,n=e.systemConf,a=n.loader;if(!0===a.enabled&&a.type!==dn){var r=dc(this.container.selectAll("div.d3container"),"div",[1],".","class","loading");r.style("position","absolute").html(Mv.helpers.getLoader(e,a)),vc(r,[a,n.chart,n.canvas,wr],!0);var o=r.node();r.styles({left:"".concat(e.chartarea.width/2-o.offsetWidth/2,"px"),top:"".concat(e.chartarea.height/2-o.offsetHeight/2,"px")})}},hideLoading:function(){this.container.selectAll("div.loading").remove()},fixLegendPosition:function(){var t=this,e=t.legendarea;if(!0===t.systemConf.legend.enabled){var n=hu(t.plotarea,t,!1),a=us.isContinousLegend(t);if("y"===e.adjust)if(a){var r=iu(e.element.node()).translate;e.element.attr("transform","translate(".concat(r[0],",").concat(n[1],")"))}else e.element.style("top",n[1]+un)}},createEventGroups:function(t){var e=this,n=e.systemConf,a={opacity:0,"pointer-events":dn},r=_objectSpread(_objectSpread({},a),{},{fill:dn}),o=dc(e.eventWrap=e.staticPaneSVG.selectAll("g.eventgroup").styles({"pointer-events":"visible"}),"g",[1],".","class","highlightergroup");o.append("g").attr("id","zcareaCliphighlight").append("g").attr("id","zcareahighlight"),o.append("g").attr("id","zcbarCliphighlight").append("g").attr("id","zcbarhighlight");if(n.tooltip.crosshair){var i=dc(o,"g",[1],".","class","crosshair");i.style("visibility","hidden"),dc(i,"line",[1],".","class","x-crosshair"),dc(i,"line",[1],".","class","y-crosshair")}o.append("g").attr("id","zcscatterCliphighlight").append("g").attr("id","zcscatterhighlight");wc("g",".zcplothighlight",[1],o).styles(a);var l=wc("g",".zcnonaxisCliphighlight",[1],o);wc("g",".zcnonaxishighlight",[1],l).styles(r),wc("g","#zchierarchyhighlight",[1],o).styles(r)},positionEventTrackerElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vv(this,!0),n=this,a=n.eventHandler.trackerGroup,r=n.plotarea,o=n.scrolledX,i=n.scrolledY,l=o||i;a.attr("transform","translate(".concat(r.left||0," ").concat(r.top||0,")")),t=wa(t,n.eventHandler.trackerElement),l?t.attr("transform","translate(".concat(n.scrolledX||0," ").concat(n.scrolledY||0,")")):t.attr("transform","translate(".concat(e.left||0," ").concat(e.top||0,")")),In(t,e)},__enableZoomBrush:function(t,e){var n=this,a="PLOT_".concat(e.toUpperCase()),r=n.behaviouralEvents,o=r.eventManager.behaviours,i=function(){n.systemConf.chart[e].enabled=!0,n.systemConf.chart[e].type=t,r.initiateBehaviour(a)};o[a]?o[a]&&o[a].instance.options.type!==t&&i():i()},__enableZoom:function(t){this.__enableZoomBrush(t,"zoom");var e=this.axes.rotated,n=function(t,e,n){Lv(tc(t,e,n),t)};if("xy"===t){var a=nc(this,"x",e?"left":"bottom"),r=nc(this,"y",e?"bottom":"left");for(i=0;i<a;i++)n(this,"x",i);for(i=0;i<r;i++)n(this,"y",i)}else if(na(t))for(var o=nc(this,t,"x"===t&&e||"y"===t&&!e?"left":"bottom"),i=0;i<o;i++)n(this,t,i)},__enableBrush:function(t){this.__enableZoomBrush(t,"brush")},zoomStep:function(t){var e=this.isGeoMap?"xy":fa(this.systemConf,"chart.zoom.type")||"x";this.__enableZoom(e),this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.step(t)},parseScale:function(){var t=this,e=t.dataSplicer.getEncode(),n=["z","shape"],a=t.dataObject.hasZaxis?["z"]:[],r={},o=[],i=function(e,n){var a="z"===e?"size":"clr"===e?"color":e,r=function(e){if("size"===e||"color"===e||"shape"===e)return t.systemConf.legend}(a);return Er(a,r,t.globalProp),r[a][n]||r[a]};for(var l in na(t.dataset.getColumnIdx("shape"))&&a.push("shape"),a.forEach((function(t){e[t]&&(r[t]=tt(e[t].length))})),r)r[l].forEach((function(e){var n=wn.getComponent("".concat("z"===l?"size":l,".parser"));if(n!=mn){var a=i(l,e),r=a.ranges,s=a.stops,c=a.minRange,u=a.maxRange,d=a.base,h=a.nullAs;r&&!ua(r[0])&&(r=r.map((function(t){return[t]})),a.ranges=r),r&&r._dummy&&(r=null);var f=n(l,e,t,_objectSpread(_objectSpread({},a),{},{ranges:r})),p=new pd(l,e,_objectSpread({ranges:r,stops:s,minRange:c,maxRange:u,base:d,nullAs:h},f),t);o.push(p)}}));o.forEach((function(t){return t.getScale()})),o.forEach((function(e,a){var r=e.encode,i=e.key;if(qa(n,r)){var l=e.getScale(),s=e.schema,c=ys(r,i,t),u=Sv(c,s,l,yf(r,{config:c,dataType:s.data.dataType}));if(u){c.ranges=u,s.domain.ranges=u;var d=wn.getComponent("".concat("z"===r?"size":r,".parser")),h=c.ranges,f=c.stops,p=c.minRange,g=c.maxRange,v=c.base,m=c.nullAs,y=d(r,i,t,c),b=new pd(r,i,_objectSpread({ranges:h,stops:f,minRange:p,maxRange:g,base:v,nullAs:m},y),t);b.create(),o[a]=b}}})),t.scales=o},handleLegendEvents:function(){var t=this,e=wn.getComponent("LegendEvents");if(e._empty||(t.legendEvents?t.legendEvents.update():t.legendEvents=new e(t)),Ao(t)){var n=wa(Gn(t.systemConf,"legend.selectAllBox.disabledOpacity",!0),.3);us.fadeChart(null,t,n)}},_isAxisCategory:function(){var t=this.dataObject,e=this.preProcessor,n=t.hierarchical,a=this.systemConf.chart.plot.plotoptions[this.distinctChartTypes&&this.distinctChartTypes[0]];return t.isAxisCategory||n&&n.facetRendering||e&&e.hierarchical&&e.hierarchical.facetRendering||a&&a.axis&&a.axis.enabled}},Rv=Iv.createHelperElements;Aa(Mv.prototype,Iv),Mv.helpers={initializeChartHolders:function(t){var e,n,a=t.container,r=a.selectAll("div.d3container");if(!r.empty()){var o=r.datum();o&&o.destroy&&o.destroy(),r.remove()}e=t.getChartDimension("width"),n=t.getChartDimension("height"),r=t.d3container=dc(a,"div",[t],".","class","d3container"),dc(r,"div",[1],".","class","canvas-property"),t.plotareaPropertyElement=dc(r,"div",[1],".","class","plotarea-property"),dc(t.d3container,"div",[1],".","class","zcoverview");var i=dc(r,"div",[1],".","class","canvas-component");i.style("-webkit-tap-highlight-color",hn);var l=dc(t.getBaseContainer(),"div",[1],"#","id","zctooltip".concat(t.idNumeric));l.node().isTooltipContainer=!0,t.tooltip={element:l},t.svg=dc(i,"svg",[1],".","class","svgarea"),t.staticPaneSVG=dc(i,"svg",[t],".","class","static").style("pointer-events",dn),dc(i,Cr,[1],".","class","legendarea"),t.notes=dc(i,Cr,[1],".","class","zcnotes");var s={width:"".concat(e,"px"),height:"".concat(n,"px"),position:"relative",left:"0px",top:"0px","box-sizing":"border-box","-moz-user-select":dn,"-webkit-user-select":dn,"-ms-user-select":dn,"user-select":dn};s["".concat(Ar.prefix.css,"box-sizing")]="border-box",r.styles(s);var c=Mv.helpers.positionSVG(t,e,n);t.svg.styles(c),t.staticPaneSVG.styles(c),t.tooltip.element.styles({position:"fixed",display:"inline-block",visibility:"hidden","white-space":"nowrap","background-color":"white",border:"1px solid","-webkit-tap-highlight-color":hn})},removeChartHolders:function(t){var e=t.container;e.select("div.d3container").remove(),e.select("div.zc-staticPane").remove(),e.select("div.zc-chartPane").remove()},align:function(t,e,n,a){var r={};return"center"===t?(r.x=n.width/2+a.left,r.textAnchor="middle"):"left"===t?(r.x=n.left+a.left,r.textAnchor="start"):"right"===t&&(r.x=n.width+n.left-a.right,r.textAnchor="end"),"top"===e?(r.y=n.top+a.top,r.dy=1):"bottom"===e&&(r.y=n.height+n.top-a.bottom,r.dy=-.21),r},getLoader:function(t,e){var n=e.htmlEl,a=e.imageUrl,r=e.type,o=e.text,i=e.colors;if(n)return n;if(a)return"<img src=".concat(a," height=").concat(e.imageHeight," width=").concat(e.imageWidth,">");var l="",s=null;if(r){var c=t.container.selectAll("div.loading");i=i&&i.length?i:null,s=cp(c,{type:r,colors:i}),l=(new XMLSerializer).serializeToString(s)}return o&&(l+="<p style=position:relative;display:inline-block>".concat(o,"</p>")),l},constructChartGroups:function(t){var e,n=t.svg,a=t.systemConf,r=t.chartHeight;t.chartWidth;if(dc(n,"g",p(!0===a.canvas.title.show&&Nl(t,"title",r)),".","class","charttitle"),dc(n,"g",p(!0===a.canvas.subtitle.show&&Nl(t,"subtitle",r)),".","class","chartsubtitle"),dc(n,"g",p(a.credits&&!0===a.credits.enabled&&Nl(t,"credits",r)),".","class","chartcredits"),e=t.isGeoMap&&t.geo.isCanvasMode&&t.dataObject.hasPointChart?t.wrap=wc("g",".xychart",[1],t.staticPaneSVG,":first-child"):t.wrap=dc(n,"g",[1],".","class","xychart"),t.nochartdata)dc(e,"g",[1],".","class","nodatahandler");else{dc(e,"g",[0],".","class","nodatahandler");var o=dc(e,"g",[t.seriesdata],".","class","chartgroup");dc(o,"g",p(!0===Gn(a,"chart.axes.xaxis.show",!0)),".","class","x-axis"),dc(o,"g",[t.seriesdata],".","class","y-axis"),dc(o,"g",[t.seriesdata],".","class","threshold");var i=dc(o,"g",[t.seriesdata],".","class","seriesClippathholder"),l=t.seriesholder=dc(i,"g",[t.seriesdata],".","class","seriesholder");t.filterEffectsID=function(t){var e=t.systemConf,n=e.chart.effects.choice;if(Hr.svg_filters[n]&&t.chartTypes[0].value!==Gt.wordcloud){var a=e.chart.effects.options[n];return"dropShadow"===n&&(a.blur=Ge(0,a.blur)),Hr.get(Hr.svg_filters,n,a,{chartObj:t})}}(t);var s=t.filterEffectsID?"url(".concat(t.defsLocation,"#").concat(t.filterEffectsID,")"):null;l.attr("filter",s);var c=dc(t.staticPaneSVG,"g",[t.seriesdata],".","class","labelClippathholder"),u=!1;t.dataObject&&(u=t.dataObject&&t.dataObject.noofBarEnabledSeries&&!t.dataObject.isCombinationalChart||t.dataObject.isHierarchy||t.dataObject.isFlowChartCategory),u||dc(c,"g",[t.seriesdata],".","class","labelholder");var d=dc(t.staticPaneSVG,"g",[t.seriesdata],".","class","thresholdClippathholder");dc(d,"g",[t.seriesdata],".","class","threshold");var h=dc(t.staticPaneSVG,"g",[1],".","class","qualitativeGroupHolder");dc(h,"g",[1],".","class","qualitativeGroup");var f=dc(t.staticPaneSVG,"g",[1],".","class","plotareaBorder-property");if(dc(f,"path",p(!0===a.chart.plot.border.show),".","class","plotBorderPath"),dc(t.staticPaneSVG,"g",[1],".","class","eventgroup"),u)c.raise(),dc(c,"g",[t.seriesdata],".","class","labelholder").style("pointer-events",dn);dc(l,"rect",[1],".","class","dummy-rect-filter").style("pointer-events",dn),Mv.helpers.createLegendArea(t)}function p(t){return t?[1]:[]}},handleErrors:function(t,e){e=e.stack?e.stack:e,Be.error?Be.error(e):Be.log(e),t.breakOnErr=!0,Gn(t.systemConf,"canvas.events")&&$n(t.systemConf.canvas.events.onerror,jt(),t,e)},positionSVG:function(t,e,n){return{width:e+un,height:n+un,position:"absolute",top:0,left:0}},createLegendArea:function(t){var e=us.isContinousLegend(t),n=wc("g",".legendarea",[1],t.staticPaneSVG),a=t.container.selectAll("".concat(Cr,".legendarea"));if(e){var r=t.dataObject;r&&(r.noofBarEnabledSeries&&!r.isCombinationalChart||r.isHierarchy)&&n.raise(),a.style("display",dn),t.legendarea.element=n}else n.style("display",dn),t.legendarea.element=a},getChartId:function(t){return t.id},setChartId:function(t){t.id},getStyles4Gradients:function(t){var e=t.gradients||{};if(1===Ar.IE&&0===Ar.VERSION.indexOf("9.")){var n=e.stopColor?e.stopColor.map(As):["black","white"];return"linear"===e.type?{filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=".concat(n[0],", endColorstr=").concat(n[1],")")}:{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0, finishopacity=100, style=2)","background-color":n[1]}}var a,r=Ar.WEBKIT?"-webkit-":Ar.FIREFOX?"-moz-":Ar.IE?"-ms-":"",o="";return na(e.useCSS)?a=e.useCSS:(na(e.stopColor)&&e.stopColor.map((function(t,n){var a=na(e.stopOffset)&&na(e.stopOffset[n])?" ".concat(e.stopOffset[n]):"";o+=0===n?"".concat(t," ").concat(a):",".concat(t).concat(a)})),"radial"===e.type?a="radial-gradient(".concat(o,")"):"linear"===e.type&&(a="linear-gradient(".concat(o,")"))),{"background-image":r+a}},getStyles4Image:function(t){return{"background-image":"url(".concat(t.imageUrl,")"),"background-repeat":t.imageRepeat,"background-position":t.imagePosition,"background-size":t.imageSize}}},Tr.credits=function(t){return{enabled:!1,imageWidth:150,imageHeight:50,hAlign:"right",vAlign:"bottom",text:"Zoho Reports",target:"newtab",marginTop:0,marginRight:10,marginBottom:10,marginLeft:0,fontSize:t.fontL1Size.l4}};var zv={CALCULATE_DOMAIN:function(t,e,n,a,r){var o,i,l=t.dataset.getDataType(n,a),s=t.axes.rotated;if(null===e)return"x"===n?i=t.axes.x.baseScale:"y"===n&&(i=t.axes.y.groups[a].baseScale),i.domain();"x"===n?(r=wa(r,t.axes.x.scale),o=t.systemConf.chart.axes.xaxis.reversed):(r=wa(r,t.axes.y.groups[a].scale),o=t.systemConf.chart.axes.yaxis[a].reversed);var c=Ov(e,r,n,l,s,o,t,!0);if(!c.length){var u=jv(e,r,n,l,s,o,t,!0);t.emptySelectionDomain=u||t.emptySelectionDomain}return c},GET_DOMAIN:function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;return"xy"===n&&ua(t)&&(t="x"===Av(e,r.axes.rotated)?[t[0][0],t[1][0]]:[t[0][1],t[1][1]]),this.CALCULATE_DOMAIN(r,t,e,a)},GET_DOMAIN_INFO:function(t,e,n,a){var r=this,o={};if(qa(e=Ma(e),"x")){var i=this.GET_DOMAIN(t,"x",n,0,a);o.x=[{domain:i,index:0,dataType:a.dataset.getDataType("x",0)}]}return qa(e,"y")&&(o.y=[],a.axes.y.groups.forEach((function(e,i){e.disabled||o.y.push({domain:r.GET_DOMAIN(t,"y",n,i,a),index:i,dataType:a.dataset.getDataType("y",i)})}))),o},DOMAIN_TO_DATA:function(t,e,n){var a,r,o=t.axes.x.scale,i=t.axes.y.groups[0].scale,l=[];return ua(e)&&(e=sr(e),a=e.map(o).sort(B)),ua(n)&&(n=sr(n),r=n.map(i).sort(B)),t.renderer.filter((function(e){e.seriesdataAfterUpdate.forEach((function(e){var n=e.filter((function(e){return zv.POINT_WITHIN_RANGE(e,a,r,t)}));l=l.concat(n)}))})),l},POINT_WITHIN_RANGE:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=a.axes.x.scale,i=a.axes.y.groups[r].scale,l=function(t){var l=!0,s=!0;if(ua(e)){var c=o(a.dataset.getX(t));l=c>=e[0]&&c<=e[1]}if(ua(n)){var u=i(a.dataset.getY(t,r));s=u>=n[0]&&u<=n[1]}return l&&s};return l(t)},POINT_WITHIN_DOMAIN:function(t,e){var n,a=e.plotBrush.domainInfo.x[0].domain;return ua(a=[a[0],a[a.length-1]])&&(n=a.map(e.axes.x.scale).sort(B)),zv.POINT_WITHIN_RANGE(t,n,null,e)},FILTER_CHART:function(t,e){if(e.cache.data={},e.cache.search={},e.datalabels.hasFixedPosition)Oa(t,(function(t,n){e.cache.correction["bubble-"+n+"-"+(t.index||0)]=null,e.cache.correction.domainCorrection&&(e.cache.correction.domainCorrection["marker-"+n+"-"+(t.index||0)]=null)}));else{for(var n in e.cache.correction)if(n.indexOf("bubble")>-1){var a=n.split("-");"ordinal"===e.dataset.getDataType(a[1],+a[2])&&(e.cache.correction[n]=null)}for(var n in e.cache.correction.domainCorrection)if(n.indexOf("marker")>-1){var r=n.split("-");"ordinal"===e.dataset.getDataType(r[1],+r[2])&&(e.cache.correction.domainCorrection[n]=null)}}e.eventHandler.bulletEvents=null,e.updateScale&&(Oa(t,(function(t,n){Ma(t).forEach((function(t,a){e.updateScale(null,n,t.domain,t.index,t.range,!0)}))})),e.plot.renderer.draw(!0,!1),e.dataObject.flattenPoints||e.dataObject.flattenData(),e.drawPlotareaClippath(),e.updatePlotareaProp(),e.positionEventTrackerElement(),e.drawThreshold(!0))}};function jv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=t.map((function(s,c){var u={x:0,y:0};return u[Av(n,r)]=s,Wt.invert(a,u,e,r,n,o,null,{selection:t},i,l)})),c=_slicedToArray(s,2),u=c[0],d=c[1],h=i.axes.x.scale,f=h.domain();if(u>d){var p=[d,u];u=p[0],d=p[1]}return u===d&&(f[u-1]&&f[u+1]||(f[u-1]?d=null:u=null)),f.length?{start:f[u],end:f[d]}:null}wn.setComponent("filterChart",zv.FILTER_CHART);var Fv=function(){function t(e,n,a){_classCallCheck(this,t),this.data=e,this.systemConf=n,this.chart=a}return _createClass(t,[{key:"getColumns",value:function(){return this.data.metadata.columns}},{key:"getEncode",value:function(){return this.data.metadata.axes}},{key:"getAxisConfig",value:function(t,e){return na(e)?"y"==t?this.systemConf.chart.axes.yaxis[e]||this.systemConf.chart.axes.yaxis[0]:this.systemConf.chart.axes.xaxis:"y"==t?this.systemConf.chart.axes.yaxis:this.systemConf.chart.axes.xaxis}},{key:"getPlotConfig",value:function(t,e){return t.plotoptions}},{key:"rotated",value:function(){return this.data.chart.axes.rotated}},{key:"getPropValue",value:function(t,e,n){}}]),t}();wn.setComponent("dataSplicer",Fv);var Bv=function(t){function e(t,n,a){var r;return _classCallCheck(this,e),(r=_callSuper(this,e,[t,n,a])).axisConfig={x:new Array(0),y:new Array(0)},r}return _inherits(e,t),_createClass(e,[{key:"getColumns",value:function(){return this.data.columns?this.data.columns:_get(_getPrototypeOf(e.prototype),"getColumns",this).call(this)}},{key:"getEncode",value:function(){return this.data.encoding?this.data.encoding:_get(_getPrototypeOf(e.prototype),"getEncode",this).call(this)}},{key:"getAxisConfig",value:function(t,n){n=wa(n,0);var a=rc(null,t,this.chart.axes.rotated);if(this.chart.viewFlow){var r=this.chart.viewFlow.axes[a],o=this.axisConfig[t][n];if(!r)return _get(_getPrototypeOf(e.prototype),"getAxisConfig",this).call(this,t,n);if(!na(n))return r;if(!r[n])return _get(_getPrototypeOf(e.prototype),"getAxisConfig",this).call(this,t,n);if(o)return o;var i=_get(_getPrototypeOf(e.prototype),"getAxisConfig",this).call(this,t,n);if("y"==t&&n>0){if(!i.merged)return{};this.axisConfig[t][n]=Rn(r[n].conf.spec,i,!1,!1)}return this.axisConfig[t][n]=Rn(r[n].conf.spec,i,!1,!1),this.axisConfig[t][n]}}},{key:"getPlotConfig",value:function(t,e){return t.spec}},{key:"rotated",value:function(){return this.rotated}},{key:"getPropValue",value:function(t,e,n){}}]),e}(Fv);wn.setComponent("dataSplicer4ViewParser",Bv);var Hv={};function Nv(t,e,n,a){var r=$d(t.dataObject.getStackGroup(),e),o=t.renderer[e].commonRendererProp().params,i=t.dataset,l=i.getX(n),s=i.getY(n,o.yaxiscolumnorder||0),c=t.dataObject.getEncode("stack",r).layout.getAllExtents().filter((function(t){return t[0]==l}));return a===Ad||a===_d?c.reduce((function(t,e){return t+Ze(e[1])}),0):c[s<o.hasNegValue&&c[1]?1:0][1]}Hv.filterBySum=function(t,e){var n=function(t,n){return t+(n.disabled?0:Ze(n[e]||0))};return t.filter((function(t){return t.reduce(n,0)>0}))},Hv.getKey=function(t,e,n,a){if(!a){var r=n.dataset,o=pi.helpers.getParsedYAxisOrder((n.seriesdata[e]||{}).yaxiscolumnorder);a=[r.getX(t),r.getY(t,o)]}return n&&Ys(n)?"x(".concat(a[0],")"):"x(".concat(a[0],") y(").concat(a[1],")")},wn.setComponent("rendererUtils.bubblePie.getCluster",(function(t,e){return t?e.renderer[t.rendererIndex].subrenderer[t.subSeriesIndex][Hv.getKey(t,t.seriesIndex,e)].data.map((function(t){return t.data})).filter((function(t){return!t.dummy})):[]}));var Wv=function(){};function Vv(t,e,n,a,r,o,i){a=+a;var l=t.systemConf.metadata.axes.y,s=-1,c=Pl(t.chartTypes[e].value);if(t.dataObject.isstacked(t.chartTypes[e].value)&&!t.dataObject.isPercentChart&&/(datalabels|tooltip)/.test(i))return Nv(t,e,r,o);if((ua(l)||t.isGeoMap)&&(ua(l)&&(ua(l[0])?l.forEach((function(t,e){s=-1==s&&t.indexOf(a)>-1?e:s})):s=l.indexOf(a)>-1?0:-1),-1!=s||c)){var u;if(c){var d=Hv.getKey(r,e,t);u=t.subrenderer[n||0][d].total}else if(t.isAxisCategory||t.dataObject.isPolarAxisCategory){var h=t.axes.y.groups[s].scale;if(o!==Od&&h){u=(f=h.domain())[1]}else{var f=t.dataObject.ZC_BAR_getRangeY(s);u=t.dataset.getY(r,s)<0?-f[0]:f[1]}}else if(t.isNonAxisMultiSeriesCategory){var p=Yv(r,t),g=t.renderer[p];if(o===_d)return g.total;if(g.extentY)return g.extentY[1];var v=g.getProcessedNode,m=v?v(r):r;u=m._parent?m._parent.value:m.parent.value}else if("legend"===i){var y=t.seriesdata[0],b=t.dataset.yidx(pi.helpers.getParsedYAxisOrder(y.yaxiscolumnorder));u=y.data[0].reduce((function(t,e){return t+(e.disabled?0:Ze(e[b]||0))}),0)}else{var x=Yv(r,t);u=t.renderer[x].total}return u||0===u?u:null}return null}function Yv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Ao(e)&&(t&&t.data&&t.data.paneid||t&&t.paneid)){var a=e.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes,r=a[t.paneid].index;return Io(a,r)}return n}function Uv(t){this.chart=t,this.data=t.systemConf,this.initialize()}function Gv(t,e){e=wa(e,t.systemConf);var n=pi.helpers.getChartType(null,Eo,0,e);return qa(_e.hierarchy,n)}function Xv(t,e){t.forEach((function(t){var n=t.data;if(ua(n)){var a=pi.helpers.is3D(n);n.forEach((function(t,n){a&&ua(t)&&t.forEach((function(t){return qv(e,t)})),a||qv(e,t)}))}}))}function Zv(t,e){t.forEach((function(t){ua(t[0])?Zv(t,e):qv(e,t)}))}function qv(t,e){(t=Ma(t)).forEach((function(t){return t(e)}))}wn.setComponent("defaultDataParser",Wv),Wv.get=function(t,e){var n,a=e.dataSplicer,r=t.metadata,o=a.getColumns(),i=a.getEncode(),l=t.seriesdata.chartdata,s=pi.helpers.getParsedYAxisOrder;n={},Object.keys(i).sort((function(t,e){return e.length>t.length?-1:e.length<t.length?1:0})).forEach((function(t){n[t]=i[t]}));var c,u=o[(i=n).clr]||{},d=o.map((function(t,e){return function(t){var e=[];for(var n in i){if(i.hasOwnProperty(n))if(-1!=("y"==n?E(i[n]):i[n]).indexOf(t))return"y"==n&&i[n].map((function(n,a){var r=n.indexOf(t);-1!=r&&(e.push(a),e.push(r))})),{type:n,order:e}}}(e)})),h={xidx:o[i.x].dataindex,yidx:function(t){var e=t instanceof Array?i.y[t[0]][t[1]||0]:i.y[t][0];return o[e].dataindex},zidx:(o[i.z]||{}).dataindex,shapeidx:(o[i.shape]||{}).dataindex,tooltipidx:function(t){return null!=i.tooltip?o[t].dataindex:null},clridx:u.levelindex?null:u.dataindex};return h.setDataObj=function(t){c=t},h.getX=function(t){return na(c)&&(c.categoryHierarchy&&c.hierarchical.pivotLayout.columns.count&&!c.hierarchical.pivotLayout.columns.splitColumnLeaves||c.isWaterfallEnabled)?t.index:this.getActualX(t)},h.getY=function(t,e,n){try{var a=this.yidx(e);return void 0===t[a]?null:null==n?t[a]:t[a][n]}catch(t){}},h.getZ=function(t){return t[this.zidx]},h.getClr=function(t){return t[this.clridx]},h.getGroupByValues=function(t,e){return null==e||0==e.length?null:e.reduce((function(e,n,a){return na(t[n])?e+t[n]:e}),"")},h.getActualX=function(t){return t[this.xidx]},h.getDataType=function(n,a,r){var i=e.dataSplicer.getEncode();r=r||h.seriesTypes.values().map((function(t){return+t}));var l,s=c&&c.hierarchical;if(s)if(s.pivot){var u="x"==n?"column":"row";l=a>c.hierarchical.pivotLayout.getRootNodeList(u).getLeavesCount()-1}else l="x"===n&&a>0;if(l)return"ordinalNonLinear";var d=null;if(null!=i[n]){var f=this.getColumnIdx(n,a),p=o[f];d=p.datatype;var g="x"==n&&(c&&c.isPolarAxisCategory||-1!=r.indexOf(Gt.bar)||-1!=r.indexOf(Gt.stkdbar)||-1!=r.indexOf(Gt.bullet)||-1!=r.indexOf(Gt.gantt)||-1!=r.indexOf(Gt.boxplot)||-1!=r.indexOf(Gt.barrange)||-1!=r.indexOf(Gt.web))||"clr"===n&&t.legend._dummy,v=-1!=r.indexOf(Gt.heatmap)&&("x"===n||"y"===n);d=g||p.useDiscrete||v?To:d}return d},h.getColumnIdx=function(t,n){var a,r=e.dataSplicer,o=r.getEncode(),i=r.getColumns(),l=o[t];if("y"==t)if(c&&c.hierarchical&&c.hierarchical.pivotLayout.rows.count){var s=c.hierarchical.pivotLayout.getRootNodeList("row");n>s.getLeavesCount()-1?i.filter((function(t,r){t.levelindex==e.axes.y.count-1-n&&(a=r)})):a=l[0][0]}else a=n instanceof Array&&2==n.length?l[n[0]][n[1]]:l[n][0];else if("tooltip"==t)a=l[n];else if("x"==t&&n>0){if(c&&c.hierarchical&&c.hierarchical.pivot){var u=c.hierarchical.pivotLayout.getRootNodeList("column"),d=c.hierarchical.pivotLayout.getRootNodeList("row").getBranchesCount()||0;n>u.getLeavesCount()-1?i.filter((function(t,r){t.levelindex==d+e.axes.x.count-1-n&&(a=r)})):a=l[0]}else i.filter((function(t,r){t.levelindex==e.axes.x.count-n&&(a=r)}));a=wa(a,l[0])}else a=null==l?null:l[0];return a},h.getColumn=function(t,e){var n=this.getColumnIdx(t,e);return o[n]},h.getColumnName=function(t,e){return(0!=e?Nn:Wn)(o[t].columnname)},h.getCustomizedVal=function(t,e,n,a,r,i,l,s,c,u,d){Xn(c)&&(c=!/(tooltip|legend)/.test(l));var f=t.chartTypes[0].name===ji;return e.toString().replace(Re,(function(){var p=arguments[0],g=arguments[1],v=arguments[2],m=arguments[3],y=arguments[4],b=arguments[5],x=arguments[7],C=arguments[8],k=arguments[9],w=arguments[10],_=g||v||m||y||b||C;if(-1!==p.indexOf("{{symbol(")){var S="null"!==k?Object.assign({},$ZC.utils.getPropVal(window,k)):{};if(void 0===S)throw"Symbol configuration not defined on window object";na(S.fillColor)||(S.fillColor=na(w)?"{{clr}}"!=w?w:"string"==typeof s?s:s[e]:"black");var O=t.systemConf.legend.shapes;if("string"==typeof O)S.shape=S.shape||O;else{var A=i?na(i.seriesIndex)?i.seriesIndex:na(i._seriesIndex)?i._seriesIndex:na(i.seriesPos)?i.seriesPos:r:n;S.shape=S.shape||(O&&O.length>0?O[A%O.length]:"circle")}S.size=S.size||15;var T=S.width||S.size,P=S.height||S.size,E=Ef(S),L=Lf(E,T,P,!0);return L}if(-1!=p.indexOf("{{clr}}"))return s;if(null==o[_])return p;var M=l===jo||f?i:h.getDataPoint(t,_,n,a,r,i);if(null==M)return"";var D=p.match(/[a-z]+/gi)[0];switch(D){case"col":return h.getColumnName(v,c);case"valatpos":case"val":var I=na(C),R=d;I&&(g=x,R=C);var z=h.getDataPointValue(t,M,g,n,!1,l,a,c,u,R);return[zo,jo,Fo,Bo].indexOf(l)>-1&&(z=z||""),z;case _d:case Sd:case Od:return h.getDataPointValue(t,M,m||y||b,n,D,l,a,c,u)}}))},h.getYaxisColumnIndexBySeriesIndex=function(t,e){var n=(l[e]||l[0]).yaxiscolumnorder||[0,0];return ua(n)?i.y[n[0]][n[1]||0]:i.y[n][0]},h.getDataPoint=function(t,e,n,a,r,s){var c=null,u=o[e=+e]||{},h=n,f=!0;if("y"===(d[e]&&d[e].type)&&this.getYaxisColumnIndexBySeriesIndex(t,n)!==e)return c;if(t.dataObject.isHierarchy){var p=Yv(s,t),g=t.renderer[p].getProcessedNode,v=g?g(s):s,m=s.yaxiscolumnorder,y=t.systemConf.metadata.axes.y.length,b=s.yaxisOrder,x=t.systemConf.metadata.axes.y,C=t.userdata.facets;f=i.clr&&i.clr[0]===e&&1===v.depth||-1!==(na(m)?x[m[0]]:y>1&&na(b)?x[b]:x[0]).indexOf(e)||v.children&&(u.levelindex===v.depth-1||ua(u.levelindex)&&-1!==u.levelindex.indexOf(v.depth-1))||!v.children&&(null==u.levelindex||null!=u.dataindex)||qa(C&&C.rows||[],e)||qa(C&&C.columns||[],e)}else t.dataObject.isFlowChartCategory&&(c=s.point);if(null!=h&&f){var k=Yv(s,t,t.isAxisCategory||t.dataObject.isPolarAxisCategory?h:0),w=t.renderer[k],_=s?null:null!=w&&null!=w.seriesdataAfterUpdate?w.seriesdataAfterUpdate[a]:l[h].data[a];c=s||_[r]}return c},h.getDataPointValue=function(t,e,n,a,r,c,u,d,f,p){null!=n&&(n=+n),Xn(d)&&(d=!/(tooltip|legend)/.test(c));var g,v=o[n]||{},m=v.datatype,y=v.levelindex,b=v.dataindex,x=v[m];if(null!=e){if(t.dataObject.isFlowChartCategory&&"node"==e._type&&(b===this.xidx||b===this.yidx(0)))return this.getX(e);if(t.dataObject.isHierarchy){var C=Yv(e,t),k=t.renderer[C],w=k&&k.getProcessedNode;g=w?w(e):e}if(null==i.clr&&"legend"!==c||n!=i.clr||t.dataObject.isHierarchy&&"legend"!==c&&null!=v.dataindex){if(na(y)&&t.dataObject.hierarchical&&"ordinal"==m){var _=t.dataObject.hierarchical.getNodeValueByColumnIdx(e,n,y);return _?Wo(x,_,m,t,c,d):""}if(t.dataObject.isHierarchy&&(y===g.depth-1||ua(y)&&-1!==y.indexOf(g.depth-1)))return Wo(x,g.children||null==v.dataindex?e.seriesname:e[b],m,t,c,d);P=n==this.getColumnIdx("y",s((t.seriesdata[a]||t.seriesdata[0]).yaxiscolumnorder))||t.dataObject.hasWhiskers?" - ":void 0;var S,O=r?Xo:Wo;if(f){for(var A=0,T=0;T<f;T++)A+=h.getDataPointUnformattedValue(m,a,T,n,e,c,r,b,p);S=A}else S=h.getDataPointUnformattedValue(m,a,u,n,e,c,r,b,p);return""===S&&r?S:O(x,S,m,t,c,d,P)}var P;if(na(this.clridx)&&Bi.isQuantileColorScale(t))return"legend"===c?Wo(x,e,m,t,c,d,P="-"):Wo(x,this.getClr(e),m,t,c,d);var E=e.paneid?pi.helpers.getSeriesdata(t,e.paneid,a):l[a];return Wo(x,e.seriesname||E&&E.seriesname,m,t,c,d)}return null},h.getDataPointUnformattedValue=function(t,n,a,r,o,i,l,s,c){if(e.dataObject.isHierarchy)var u=Yv(o,e),d=e.renderer[u],h=d&&d.getProcessedNode,f=h?h(o):o;if(l){var p=t==Eo?Vv(e,n,a,r,o,l,i):null;return null!=p?(i==jo?o:e.dataObject.isHierarchy&&f.children&&na(f.value)?f.value:e.dataObject.isPercentChart?o.y:o[s])/p*100||0:""}var g=this.getColumnIdx("y",(e.seriesdata[n]||e.seriesdata[0]).yaxiscolumnorder||0);return e.dataObject.isHierarchy&&f.children&&r==g&&na(f.value)?f.value:i==jo?o:na(c)?o[s][c]:o[s]},h.getMetaInfoObj=function(t,e,n){var a=t.systemConf.metadata.axes,r=t.systemConf.metadata.columns,o=t.systemConf.seriesdata.chartdata,i=(n=t.isAxisCategory||t.isNonAxisMultiSeriesCategory?n:0,[]),l=(o[n]||o[0]).yaxiscolumnorder||[0,0],s=l instanceof Array?a.y[l[0]][l[1]||0]:a.y[l][0];if(e instanceof Array&&e.forEach((function(t,e){var n=r.indexOf(r.filter((function(t,n){return t.dataindex==e&&(h.yidx(l)!=e||h.yidx(l)==e&&s==n)}))[0]);i.push(u(n,t))})),null!=a.clr){var c=a.clr instanceof Array?a.clr[0]:a.clr;i.push(u(c,o[n].seriesname))}return i;function u(t,e){var n=Hn(r[t]||{});return n.value=e,n.columnindex=t,n}},h.processMetaData=function(){var t=fa(r,"axes.clr");na(t)&&(t=t[0]),o.forEach((function(e,n){var a;if(n!==t){if(!na(e.datatype)){var r=h.getDataByColumnIndex(e.dataindex);a=h.findDataType(r),e.datatype=a}na(a)&&!na(e[a])&&(e[a]={})}}))},h.getDataByColumnIndex=function(t){var n=null,a=!1;return e.seriesdata.some((function(e){return e.data.some((function(e){return e.some((function(e){if(na(e))return(a=na(e[t]))&&(n=e[t]),a}))}))})),n},h.findDataType=function(t){return"number"==typeof t?t>31536e6?Po:Eo:To},h.processMetaData(),h},Uv.prototype.initialize=function(){var t=this,e=t.chart,n=t.data,a=e.dataSplicer,r=a.getEncode(),o=a.getColumns(),i=r.x,l=o[i].datatype,s=pi.helpers,c=_e.discrete.some((function(t){return-1!==e.chartTypes.indexOf(t)})),u=s.getChartType(null,null,0,e.systemConf),d=u.value,h=u.name,f=n.facets&&n.facets.hierarchy,p=Cl(d)||Vi(d)||kl(d)||Sl(d)||"line"===h||n.facets&&["pie","funnel","pyramid","dial","web","packedbubble","treemap","sunburst","wordcloud"].indexOf(h)>-1;(this.isHierarchyLayout()&&p||f)&&(t.hierarchical=new pi.HierarchicalOrdinalDataAdapter(this.chart),t.isLayerHierarchy=!t.hierarchical.pivot,t.isPivot=t.hierarchical.pivot,t.isAxisCategoricalPivot=!0,t.chart.seriesdata=this.hierarchical.getSeries(),this.hierarchical.pivot&&(e.chartTypes=pi.helpers.getAllChartTypesFromSeriesdata(t.chart.userdata,t.chart.seriesdata,"object")));var g=e.systemConf.chart.plot.plotoptions[h];if(e.isAxisedHierarchyChart=g&&g.axis&&g.axis.enabled,t.hierarchical&&t.hierarchical.facetRendering)Do(t).forEach((function(n){var a={seriesdata:{chartdata:n.data.map((function(t){return t.node})),type:e.systemConf.seriesdata.type}};if(Gv(e,a)){t.isHierarchy=!0;var r=new(wn.getComponent("hierarchyDataAdapter"))(n.data,t);n.data=r.getData()}}));else if(Gv(e)&&!e.isAxisedHierarchyChart){t.isHierarchy=!0;var v=new(wn.getComponent("hierarchyDataAdapter"))(e.seriesdata,t);e.seriesdata=v.getData()}e.isAxisedHierarchyChart&&(t.isHierarchy=!0),t.processTimeData(),On&&(l===Eo||l===Po&&!c)&&t.sortData(i,l)},Uv.prototype.isHierarchyLayout=function(){return this.chart.systemConf.seriesdata.chartdata.some(Uv.helpers.hasInnerSeries)},Uv.prototype.processTimeData=function(){var t,e,n,a=this.chart,r=a.seriesdata;(e=(t=Uv.helpers.time.getDataInfo(this.data,null,a)).indices,n=t.formatConf.some((function(t){return na(t)&&na(t.inputformat)})),e&&e.length&&n)&&(Gv(a)?Zv:Xv)(r,(function(e){return Uv.helpers.time.applyFormats(e,t)}))},Uv.prototype.sortData=function(t){var e=this.chart,n=this.data;return e.seriesdata.forEach((function(e){var a=e.data,r=n.metadata.columns[t].dataindex;pi.helpers.is3D(a)?ua(a)&&a.forEach((function(t){Uv.helpers.linear.sort(t,r)})):Uv.helpers.linear.sort(a,r)})),n};var $v={getContentTemplate:function(t,e,n,a){var r,o,i=t.systemConf,l=t.userdata.seriesdata.chartdata[0].data[0]||{},s=t.dataSplicer,c=s.getEncode(),u=s.getColumns(),d=$n(n||c.tooltip||tt(u.length),null,l),h=c.y&&E(c.y)||[],f=i.tooltip,p=Xa(f.maxWidth||"40%",t.chartarea.width),g=yl.hasSharedSeries(t),v="column"===f.view,m=[];if(e)m=e;else{if(na(i.tooltip.theme)&&Gn(window.$ZC,"tooltip.getTheme"))d=t.tooltip.content;else if(g){var y=L();t.seriesdata.forEach((function(e,n){$v.updateSharedInfo(t,y,n)})),d=$v.getRawSharedContent(t,y,d)}d.forEach((function(t,e){var n,a,o=a="";if(u[t]){if(h.length>1&&h.indexOf(t)>-1&&!g){if(r)return;r=!0,d.forEach((function(t){h.indexOf(t)>-1&&(o+="{{col(".concat(t,")}}"),a+="{{val(".concat(t,")}}"))}))}else o="{{col(".concat(t,")}}"),a="{{val(".concat(t,")}}");n=[o,a]}else n=t;m.push(n)}))}return v?(o=m.reduce((function(t,e){return t+(ua(e)?"<tr style='vertical-align: top;'><td style='max-width:".concat(.4*p,"px;'>").concat(e[0],": </td><td style='max-width:").concat(.6*p,"px;'><b>").concat(e[1],"</b></td></tr>"):"<tr style='vertical-align: top;'><td style='max-width:".concat(p,"px;'>").concat(e,"</td></tr>"))}),""),o="<table cellspacing='0' cellpadding='0' border='0' style='border-spacing: 5px;'><tbody>".concat(o,"</tbody></table>")):o=m.reduce((function(t,e,n){return t+(ua(e)?"".concat(e[0]," : ").concat(e[1]):e)+(n==m.length-1?"":"<br>")}),""),a&&(o=o.replace(/{{clr}}/g,"black")),o},updateSharedInfo:function(t,e,n){var a=t.dataset,r=a.getColumnIdx("clr"),o=a.getColumnIdx("y",(t.seriesdata[n]||t.seriesdata[0]).yaxiscolumnorder||[0,0]),i="{{val(".concat(t.dataObject.pieWithAxis&&!t.dataObject.isCombinationalChart?yl.getPieColumnIndex(t):o,")}}");e.y_val_pattern=e.y_val_pattern||"",e.y_col_pattern=e.y_col_pattern||"",-1==e.y_val_pattern.indexOf(i)&&(e.y_val_pattern+=i,e.y_col_pattern+=t.ismultiy||Xn(r)?""!=e.y_col_pattern?"":"{{val(null)}}":"{{val(".concat(r,")}}"))},getRawSharedContent:function(t,e,n){var a=t.systemConf.metadata,r=a.axes,o=a.columns,i=E(r.y),l=t.dataset,s=[],c="",u=t.dataObject.pieWithAxis&&!t.dataObject.isCombinationalChart?yl.getPieColumnIndex(t):pn,d=n.some((function(t){return Re.lastIndex=0,"string"==typeof t&&Re.test(t)})),h=function(t){var e=na(u)?u:t;return(ua(c)?c:[c]).some((function(t){return"string"==typeof t&&(-1!=t.indexOf("{{val(".concat(e,")}}"))||-1!=t.indexOf("{{per(".concat(e,")}}")))}))},f=t.isAxisCategory;if(d)n.forEach((function(e,n){na(o[e])&&(e=["{{col(".concat(e,")}}"),"{{val(".concat(e,")}}")]),c=e,(ua(e)||"string"==typeof e)&&i.some(h)&&f?t.seriesdata.forEach((function(){s.push(ua(e)?Yn(e):e)})):s.push(e)}));else{var p="{{val(".concat(l.getColumnIdx("x"),")}}"),g=e.y_val_pattern,v=e.y_col_pattern,m=p,y=["<div style='margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:".concat("{{clr}}","''></div>").concat(v),g];s.push(m),t.dataObject.pieWithAxis&&!t.dataObject.isCombinationalChart&&(s.push(["{{col(".concat(l.getColumnIdx("y",0),")}}"),"{{val(".concat(l.getColumnIdx("y",0),")}}")]),s.push(["{{col(".concat(l.getColumnIdx("z"),")}}"),"{{val(".concat(l.getColumnIdx("z"),")}}")])),f?t.seriesdata.forEach((function(){s.push(Yn(y))})):s.push(Yn(y))}return s}},Qv={};Qv.MAXHEIGHT_BLOCK="50%",Qv.updatePlotarea4BlockTooltip=function(t){var e=t.systemConf.tooltip,n=e.block||{},a=e.position||"relative";if(e.enabled&&"block"===a){if(Xn(e.height)&&!e.content)Vt.tooltip(t.tooltip.element,t.systemConf,t).initialize(),t.tooltip.element.selectAll("div#tooltipcontent").html($v.getContentTemplate(t,pn,pn,!0)),t.tooltip.preCalculatedHeight=t.tooltip.element.node().clientHeight;else t.tooltip.preCalculatedHeight="20%";var r=t.plotarea;t.tooltip.blockarea=Hn(r);var o=n.vAlign||Jr,i=Da(wa(e.borderWidth,1)),l=i.top,s=i.right,c=i.bottom,u=i.left,d=t.chartarea,h=d.width-u-s,f=d.height,p=yl.getSize(e,[h,f],["100%",t.tooltip.preCalculatedHeight]),g=Xe(p.h,Xa(Qv.MAXHEIGHT_BLOCK,f))+l+c;o===qr&&(o=Jr),r.height-=g,r[o]+=g}};var Kv="zc-marker";function Jv(t,e){var n=e.nearest||e.selectionSet[0];tm(this.chart);var a=this.chart.eventHandler.tooltipElement,r=!0===this.chart.systemConf.tooltip.enabled,o=yl.hasSharedSeries(this.chart),i=this.chart.eventHandler.getPointType(n),l=this.chart.dataset.getDataType("x"),s=this.chart.dataObject.noofBarEnabledSeries>0,c=(o=yl.hasSharedSeries(this.chart),l===To&&(s||o));if(r&&"series"==i)(u=Il(xl(this.chart.eventHandler.targetEvent),t,n._x,n._y,this.chart,n,this.chart.eventHandler.rotated,o,this.chart.eventHandler.tooltipSharedInfo,c,this.chart.eventHandler.isPolarAxisCategory,Pl(Ui(this.chart,n.paneid,n.seriesIndex).value)&&this.chart.subrenderer[n.subSeriesIndex][Hv.getKey(n,n.seriesIndex,this.chart)].fillColorFunc)).helpers.d.paneid||(u.helpers.d.paneid=n.paneid),u.helpers.nearest=e.nearest,a.show(this.chart,u,null,!0,u.helpers);else if(r&&this.chart.isGeoMap)this.chart.eventHandler.mapEvents.showTooltip(t,n.point,this.chart.eventHandler.targetEvent,n);else if(!r||"marker"!=n.type&&"levelMarker"!=n.type){if(n.type==Kv){var u=Il(xl(this.chart.eventHandler.targetEvent),t,n._x,n._y,this.chart,n,this.chart.eventHandler.rotated,o,this.chart.eventHandler.tooltipSharedInfo,c,!1,null),d=$n(Gn(this.chart.cache,"parser.".concat([n.__key],".parser.event.tooltipContent"),!0),n,n.itemIndex,this.chart,this.chart.cache.parser[n.__key].parser);a.show(this.chart,u,d,!0,u.helpers)}}else{var h=Il(xl(this.chart.eventHandler.targetEvent),t,0,0,this.chart,n,this.chart.eventHandler.rotated,o,{},!0,!1,!1),f=this.chart.eventHandler.bulletEvents.getTooltipContent(n,0);h.helpers.inheritColors=!0,h.helpers.itemIndex=n.sortedItemIndex,h.helpers.seriesIndex=n.sortedItemIndex,h.helpers.chartType=n.chartType,a.show(this.chart,h,f,!1,h.helpers)}}function tm(t){if(!t.eventHandler.tooltipElement){t.eventHandler.tooltipElement=Vt.tooltip(t.tooltip.element,t.systemConf,t),t.eventHandler.tooltipElement.initialize();var e=t.eventHandler.tooltipElement;t.eventHandler.addListeners(t.eventHandler.tooltipElement.element,"tooltip"),"auto"===t.systemConf.tooltip.pointerEvents&&(e.element.on("mouseenter",(function(){t.eventHandler.mouseOnTooltip=!0})),e.element.on("mouseleave",(function(){t.eventHandler.mouseOnTooltip=!1,t.eventHandler.handlers.mouseout.call(t.eventHandler)})));var n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",a=t.container.node(),r=null;t.d3container.on(n,(function(){var t=a.getBoundingClientRect();r&&(r.left===t.left&&r.top===t.top||e.hide(e.element)),r=t}))}}function em(t){var e,n,a;if(Ao(t)){var r="";Do(t.dataObject).forEach((function(e){var n=Ee.getBound(t,e.data[0]),a=n.x,o=n.y,i=n.width,l=n.height,s=n.polar,c=t.dataObject.hierarchical.gridOptions["".concat(e.row,"_").concat(e.column)].chartTypes[0].value;if(Xi(t,c,"polarAxis")){var u=s.radius;a+=s.x,o+=s.y,r+="M".concat(a-u," ").concat(o," A").concat(u," ").concat(u," 0 0 1 ").concat(a+u," ").concat(o," A").concat(u," ").concat(u," 0 0 1 ").concat(a-u," ").concat(o," ")}else qa(_e.singleSourceEvent,c)&&(r+="M".concat(a," ").concat(o," L").concat(a+i," ").concat(o," L").concat(a+i," ").concat(o+l," L").concat(a," ").concat(o+l," Z "))}));var o={d:r,name:"pivotpolarClip",id:t.id};e=Hr.get(Hr.svg_clips,"polygon",o,{chartObj:t})}else if(Xi(t,null,"polarAxis")){var i=t.plotarea_approx;o={name:"polarClip",id:t.id,cx:i.x,cy:i.y,r:Ge(0,i.radius)};e=Hr.get(Hr.svg_clips,yr,o,{chartObj:t})}t.eventHandler.trackerElement.attr("clip-path",e?"url(".concat(t.defsLocation,"#").concat(e,")"):null),window.PointerEvent||"canvas"!==t.plot.renderer.mode||(n=t.container.selectAll("canvas.zc-labelholder-canvas,canvas.highlight-canvas,canvas.zc-canvas"),a=function(){n.style("display",dn);var t=document.elementFromPoint(jt().clientX,jt().clientY),e=l(t),a=t&&t.__on&&t.__on.filter((function(t){return t.type===jt().type}))[0].value;return n.style("display",pn),l(this).style("cursor",a?e.style("cursor"):pn),a&&a.call(t,e.datum(),e.attr("index")||0),!1},Iu(n,{mousemove:a,mouseout:a,click:a,dblclick:a},{singletouchmove:a,touchend:a,tap:a,dbltap:a}))}wn.setComponent("events.controllers.tooltip",Jv);var nm=function(){function t(e){_classCallCheck(this,t),this.chart=e,this.behaviours={}}return _createClass(t,[{key:"getBehaviouralEventInstance",value:function(t,e){var n,a=this;if(e){var r=wn.getComponent(e._constructor),o=wn.getComponent(e._arguments);return(n=a.behaviours[t]||{}).instance=new r(o(a.chart)),a.behaviours[t]=n,n}}},{key:"dataFinder",value:function(t,e){t.dataFinder=e}},{key:"setListenerTypes",value:function(t,e){t.listenerTypes=e}},{key:"getData",value:function(t,e,n){var a=t.dataFinder,r={point:null};return a[e]&&(r.point=a[e].apply(this,[t,e,n])),r}},{key:"attachListeners",value:function(t,e){var n=this,a=t.listenerTypes,r=t.instance;Oa(e,(function(e,o){a.has(o)&&Ma(e).forEach((function(e){r.on(o,(function(){e.apply(n,[t].concat(Array.prototype.slice.call(arguments)))}))}))}))}},{key:"getBehaviours",value:function(t,e){var n=[],a=t.defaultBehaviour[e],r=t.customBehaviour&&t.customBehaviour[e];return r&&(n=_toConsumableArray(Ma(r).map((function(t){return{type:"custom",behaviour:t}})))),a&&(n=[].concat(_toConsumableArray(n),_toConsumableArray(Ma(a).map((function(t){return{type:"default",behaviour:t}}))))),n}},{key:"setBehaviours",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";t["".concat(n,"Behaviour")]=e}},{key:"associateBehaviours",value:function(t,e,n,a,r){var o=this,i=o.getBehaviours(t,e),l=!0;ua(i)&&i.length&&i.forEach((function(e){"custom"===e.type?($n(!0,e.behaviour,o,t,n,a,r),l=r.allowDefault):l&&e.behaviour.apply(o,[t,n,a,r])}))}},{key:"detachListeners",value:function(){}}]),t}();wn.setComponent("ZCChartScroll",(function(t){return t.scroll})),wn.setComponent("ZCChartScrollArguments",(function(t){return t}));var am={PLOT_ZOOM:{_property:"chart.zoom",_feature_name:"zoom",_handlers:function(t){return t.isGeoMap?"_mapZoomHandlers":t.dataObject.isFlowChartCategory?"_sankeyZoomHandlers":"_chartZoomHandlers"},_behavior:{_constructor:"ZoomD3",_arguments:"_getPlotZoomArguments"}},PLOT_BRUSH:{_property:"chart.brush",_feature_name:"brush",_handlers:function(t){return t.isGeoMap?"_mapBrushHandlers":"_chartBrushHandlers"},_behavior:{_constructor:"BrushD3",_arguments:"_getPlotBrushArguments"}},CHART_SCROLL:{_property:"chart.scroll",_feature_name:"scroll",_handlers:"_chartScrollHandlers",_behavior:{_constructor:"ZCChartScroll",_arguments:"ZCChartScrollArguments"}}},rm={LEGEND_SIZE_SLIDER_BRUSH:{_property:"legend.size",_feature_name:"brush",_handlers:"_legendSizeSliderBrushHandlers",_id:"z-0",_behavior:{_constructor:"BrushD3",_arguments:"_getLegendSizeSliderBrushArguments"}},LEGEND_COLOR_BAND_BRUSH:{_property:"legend",_feature_name:"brush",_handlers:"_legendColorBandBrushHandlers",_id:"clr-0",_behavior:{_constructor:"BrushD3",_arguments:"_getLegendColorBandBrushArguments"}}},om=function(){function t(e){_classCallCheck(this,t),this.chart=e,this.eventManager=new nm(e),this.init()}return _createClass(t,[{key:"init",value:function(){var t=this,e=this,n=(e.chart,function(t,n,a){e.initiateBehaviour(n,a)});Oa(am,n),Oa(rm,n),Oa(this.eventManager.behaviours,(function(e){e&&e._init&&e._init.call(t,e)}))}},{key:"update",value:function(){var t=this;Oa(this.eventManager.behaviours,(function(e){e&&e._update&&e._update.call(t,e)})),this.init()}},{key:"initiateBehaviour",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:am,n=this.eventManager,a=n.chart,r=a.systemConf,o=e[t],i=fa(r,o._property)||{},l=i.actions,s=wn.getComponent(zn(o._handlers,[a])),c=na(s)&&s!==mn&&s.SUPPORTED(a,o._id);if(c&&i.enabled){var u=e===am;na(a.systemConf.chart.width)||a.renderVisiblePointsOnly||!u||(a.renderVisiblePointsOnly=!1!==i.renderVisiblePointsOnly),Er(o._feature_name,r.chart,a.globalProp);var d=n.getBehaviouralEventInstance(t,zn(o._behavior,[a]));s.BEHAVIOUR&&(d._init=s.INIT,d._update=s.UPDATE,n.setBehaviours(d,s.BEHAVIOUR),n.dataFinder(d,s.DATA_FINDER),n.setListenerTypes(d,s.LISTENER_TYPES),n.attachListeners(d,s.LISTENER),(l=i.actions)&&n.setBehaviours(d,l,"custom"))}else na(n.behaviours[t])&&(n.behaviours[t].destroy&&n.behaviours[t].destroy(),n.behaviours[t]=null,delete n.behaviours[t])}}]),t}();function im(t,e){var n=t;return"x"===e?n=[[t[0],0],[t[1],0]]:"y"===e&&(n=[[0,t[0]],[0,t[1]]]),n}function lm(t,e,n,a,r,o){var i,l=t.chart,s=t.behaviours.PLOT_ZOOM,c=n.split("").map((function(t,n){return Hp(l,ua(e[0])?e[n]:e,a,t)}));"xy"!==n&&(c=c[0]),i=im(c,Av(n,l.axes.rotated)),s.instance.zoomToBounds(i,r,o)}function sm(t,e,n,a,r,o){var i=t.chart,l=t.behaviours.PLOT_BRUSH,s=t.behaviours.PLOT_ZOOM,c=n.split("").map((function(t,n){return Hp(i,ua(e[0])?e[n]:e,a,t,na(s),!1)}));c="xy"===n?[[c[0][0],c[1][0]],[c[0][1],c[1][1]]]:c[0],l.instance.setSelection(c)}function cm(t,e,n){var a=wa(e,!0),r=wa(n,!0),o=(t.axes.rotated,t.dataObject),i=t.plotarea,l=t.systemConf,s=t.axes,c=t.dataset,u=s.rotated?"width":"height",d="auto"==l.chart[u]?null:l.chart[u]||i[u],h=s.rotated?"height":"width",f="auto"==l.chart[h]?null:l.chart[h]||i[h];o.hierarchical.pivotLayout.leafSize(d,f),a&&Wt.setRowScale(t,"row",!0),r&&(t.axes.x.scale=Wt.getScale(t,o,i,s.x.orient,0,c,"x",t.viewPortExtent),Wt.setColumnScale(t,"column"))}function um(t,e,n){var a,r,o=pi.helpers,i=o.isCatNull(e,"x");t.forEach((function(t,l){var s=o.getChartType(null,Eo,l,n.data);if((n.isstacked(s)||n.isPercentChart)&&!Cl(s)){var c,u,d=function(t){return e.getX(t)};if(n.categoryHierarchy){u=(c=n.hierarchical.pivotLayout.getRootNodeList("column")).splitColumnLeaves;var h=n.chartObj.systemConf.chart.axes.xaxis.uniformLeafScale;a=h?c.getUniqueDomainForCluster(0):c.getDomainForClusterSet(0,t.column),c.count&&!u&&(d=function(t){return e.getActualX(t)})}a||(a=n.getDomain(n.getCategories("x"),"x",!0),n.pivot&&(a=c.getUniqueDomainForCluster(0)),r=a.length),t.data.forEach((function(n){for(var l=n.map(d),s=0,c=r;s<c;s++){var u=a[s],h=l.indexOf(u);if(h>=0&&h!=s&&(n.splice(s,0,n[h]),n.splice(h+1,1),l=n.map(d)),_typeof(l[s])!=Oe&&i(l[s])&&n.splice(s,1),h<0){var f=[],p=o.getParsedYAxisOrder(t.yaxiscolumnorder);f.splice(e.xidx,0,u),f.splice(e.yidx(p),0,0),f.isDummy=!0,f.isPrevDummy=0==s||n[s-1].isDummy,s==c-1?f.isNextDummy=!0:0!=s&&(n[s-1].isNextDummy=!0),n.splice(s,0,f),l=n.map(d)}else n.isDummy=!1}r!=n.length&&n.splice(r,n.length-r)}))}}))}function dm(t,e,n){var a=pi.helpers,r=!!n.pivot&&n.hierarchical.pivotLayout.columns.splitColumnLeaves;t.forEach((function(t,o){var i=n.pivot?t.row+t.column+o:o,l=n.seriesAssist[i];if(!t.disabled&&qa(l.layout||[],"stack")){var s=n.pivot?"".concat(t.row,"_").concat(t.column):l.stackIndex,c=n.getEncode("stack",s).layout,u=t.data,d=a.getParsedYAxisOrder(t.yaxiscolumnorder),h=E(u);if(Cl(a.getChartType(null,Eo,i,n.data))){var f=n.getCategories("x",0,!1),p=r?f:n.getDomain(f,"x",!0);h=n.updateSeriesdatabyCategories(h,p)}c.add(h,(function(t){return e.getX(t)}),(function(t){return e.getY(t,d)}))}}));var o=n.isStackedSort();if(o){var i=nr(n.getEncode("stack")),l=function(t){return e.getY(t,0)},s=function(t){return e.getX(t)};i.map((function(t){t.layout.sort(s,l,o)}))}}function hm(t,e,n,a,r){var o=t.groupedByStack,i={si:n,d:e};if(Cl(r)){if(o.has(a)){var l=o.get(a);o.set(a,l.concat([i]))}else o.set(a,[i]);o.get(a).stackLabelIndex=i.si}}wn.setComponent("BehaviouralEvents",om);var fm=function(t,e){var n=t.legendarea.element,a=n&&n.selectAll(".legseries, .zc-legend-legseries").node();this.chartObj=t,this.legendSeries=a,this.legendElements=a?a.children:[],this.itemHighlighted=!1,this.hoveredSeriesIndex=pn,this.hoveredlegendOrder=pn,this.previousHoveredSeriesIndex=pn,this.legend_series_height=pn,this.legendScrollable=pn,this.legendComponents=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={},n=function(t){return e[t.id]={data:null,highlighted:!1}};return t.forEach(n),e}(t.legends),a&&(this.legend_series_height=a.clientHeight,this.legendScrollable=a.scrollHeight>this.legend_series_height)};function pm(t,e){var n=t.legends.get(e).meta.encode,a=el(t.legends,e);return"".concat(function(t){return qa(["shape"],t)?t:"z"===t?"size":"clr"===t?"color":null}(n).toUpperCase(),"_").concat(a.toUpperCase(),"(").concat(e,")")}fm.prototype.highlight=function(t){var e=this.chartObj;if(Oa(this.legendComponents,(function(n,a){var r=e.legendEvents.reverseEventManager[pm(e,a)],o=e.legends.get(a);if(r&&!Ja(r)){var i=o.meta.encode;if(nl(r.options.config,i,!1).showOnDataHover&&t){var l=e.isGeoMap&&t.type?t.point:"clr"===i&&(t.data&&t.data.data||t.data)||t,s=n.data,c=r.getData("mousemove",l);r.targetEvent=jt(),s&&ha(c.point)!==ha(s.point)&&r.associateBehaviours("mouseout",s),function(t,e,n){var a=n.seriesIndex;switch(t){case"z":return na(a)&&Yi(e.chartTypes[a].value);case"clr":return us.isContinousLegend(e)}}(i,e,t)&&(r.associateBehaviours("mousemove",c),n.data=_objectSpread({},c),n.highlighted=!0)}}})),!us.isContinousLegend(e)){var n=this.previousHoveredSeriesIndex,a=e.systemConf.legend,r=nl(a,"clr",!1),o=e.legend.component,i=t?e.renderer[t.rendererIndex||0].commonRendererProp():pn;if(e.dataObject.pivot&&t){var l=i.legendOrder();this.hoveredlegendOrder=l,o=e.legends[l].component.discrete_encode}if(o&&r&&r.showOnDataHover&&(!us.isContinousLegend(e)||r.type&&r.type!==dn)){var s=e.eventHandler.eventManager.selectionManager,c=o.highlightItem;if(!(e.isAxisCategory||e.dataObject.isPolarAxisCategory||e.isGeoMap||e.dataObject.isFlowChartCategory)||s&&s.nearest){var u,d,h;if(e.isAxisCategory||e.dataObject.isPolarAxisCategory||e.isGeoMap||e.dataObject.isFlowChartCategory)u=e.isGeoMap&&t.type?t.point:t,d=t.seriesIndex,h=t.itemIndex,e.dataObject.pivot&&t&&"threshold-marker"!=u.type&&(d=i.legendIndex());else if(u=t.data?t.data.data||t.data:t,d=t.seriesIndex,h=t.itemIndex,e.dataObject.pivot&&t)if(e.dataObject.isHierarchy)d=e.dataObject.hierarchical.gridOptions[t.paneid||"0_0"].legendIndices[t.seriesIndex||0];else d=i.legendIndex();var f=this.hoveredSeriesIndex=this.getLegendIndex(u,e.isAxisCategory||e.dataObject.isPolarAxisCategory||e.isNonAxisMultiSeriesCategory||e.isGeoMap?d:h);if(us.isContinousLegend(e)){var p=e.dataset.getClr(u),g=a.colorBand.ranges,v=e.axes.clr.brushScale;c(g&&g.length?v(g[f])+v.bandwidth()/2:v(p),!0,pn,g&&g.length?f:[p]),this.itemHighlighted=!0}else{var m=this.legendElements;if(m[f]){var y=us.getLegendData(e);f!==n&&null!=n&&c(m[n],y[n],n,a),c(m[f],y[f],f,a,!0),this.itemHighlighted=!0,!this.legendScrollable||e.systemConf.legend.expandable&&e.systemConf.legend.expandable.show||(this.legendSeries.scrollTop=m[f].offsetTop-this.legend_series_height/2)}}this.previousHoveredSeriesIndex=f}}}},fm.prototype.reset=function(){var t=this.chartObj;if(Oa(this.legendComponents,(function(e,n){if(e.highlighted){var a=t.legendEvents.reverseEventManager,r=e.data,o=a[pm(t,n)];if(!o||Ja(o))return;o.targetEvent=jt(),o.associateBehaviours("mouseout",r),e.data=null,e.highlighted=!1}})),!us.isContinousLegend(t)){if(this.itemHighlighted){var e=this.legendElements,n=this.hoveredSeriesIndex,a=t.legend.component;if(t.dataObject.pivot&&(a=t.legends[this.hoveredlegendOrder||0].component.discrete_encode),!a)return;var r=a.highlightItem;if(us.isContinousLegend(t))r(pn,!1);else if(na(e[n])){var o=us.getLegendData(t),i=t.systemConf.legend;r(e[n],o[n],n,i)}this.hoveredSeriesIndex=null}this.itemHighlighted=!1}},fm.prototype.getLegendIndex=function(t,e){var n=this.chartObj,a=n.axes.clr,r=n.chartTypes[0].name===ji;if(a.scaleType)return Bi.getItemIndex(n,a.indexScale,t);if(r){var o=n.renderer[0];return("link"===t._type?o.getLinkByPoint(t).source:o.getSankeyNodeByPoint(t)).point.itemIndex}return null!=e?e:void 0};var gm=function(t,e,n){var a,r=n.userdata.seriesdata.chartdata,o=r.length,i=!0,l=L();return 1===e.length&&Xn(e[0])&&e.splice(0,1),a=o+e.length,t.map((function(t,n){Xn(e[n])&&(e[n]=a,a++),l.set(e[n],t)})),e.sort((function(t,e){return t-e})),n.nochartdata&&(n.rendererConf=[]),e.map((function(t){var e=t,a=l.get(t);n.seriesAddRemoveDetails.maxDOMseriesIndex++,n.seriesAddRemoveDetails.seriesPositionMap.set(e,n.seriesAddRemoveDetails.maxDOMseriesIndex),r.splice(e,0,a),n.renderer.splice(e,0,null),n.rendererConf.splice(e,0,null),t<o&&(i=!1)})),n.staticPaneSVG.selectAll(".qualitativeGroup").selectAll("g").remove(),chartObj.notes.selectAll("*").remove(),chartObj.container.selectAll("g.zc-annotation").remove(),n.seriesAddRemoveDetails.seriesUpdatedAtEnd=i,l};function vm(t,e,n){var a,r=Zp(t.type),o=[".".concat(r).concat(xv.get(r)).concat(n.seriesAddRemoveDetails.seriesPositionMap.get(t.index))];if(!Xn(e.data)){var i,l=Zp(e.type);i=null===n.renderer[e.index]?n.seriesAddRemoveDetails.seriesPositionMap.get(e.index):chartObj.renderer[e.index]&&chartObj.renderer[e.index].commonRendererProp()&&chartObj.renderer[e.index].commonRendererProp().params&&!Xn(chartObj.renderer[e.index].commonRendererProp().params.dynamicSeriesPosition)?n.renderer[e.index].commonRendererProp().params.dynamicSeriesPosition:n.renderer[e.index].commonRendererProp().params.datasetIndex,a=[".".concat(l).concat(xv.get(l)).concat(i)]}return"line"===r&&(o.push(".scatterseries_".concat(n.seriesAddRemoveDetails.seriesPositionMap.get(t.index))),a&&a.push(".scatterseries_".concat(i))),"area"===r&&(o.push(".lineseries_".concat(n.seriesAddRemoveDetails.seriesPositionMap.get(t.index))),o.push(".scatterseries_".concat(n.seriesAddRemoveDetails.seriesPositionMap.get(t.index))),a&&(a.push(".lineseries_".concat(i)),a.push(".scatterseries_".concat(i)))),{newSeriesClass:o,oldSeriesClass:a}}function mm(t,e){var n=t.dataObject.isCombinationalChart=t.dataObject.pivot?Gi(t).values().length>1:er(pi.helpers.getAllChartTypes(t.systemConf,"object"),(function(t){return we.get(t)})).length>1,a=t.svg.selectAll(".seriesholder");if(n)for(var r=n?Ee.arrangeSeriesRenderingOrder(t):t.seriesdata,o=r.length-1;o>=0;o--){var i=(s=r[o]).seriesidx;null===t.renderer[i]&&((l=r[o+1]?vm({data:s,index:i,type:pi.helpers.getChartType(s.type,"string",i,t.userdata)},{data:r[o+1],index:r[o+1].seriesidx,type:pi.helpers.getChartType(r[o+1].type,"string",r[o+1].seriesidx,t.userdata)},t):vm({data:s,index:i,type:pi.helpers.getChartType(s.type,"string",i,t.userdata)},{},t)).oldSeriesClass||(l.oldSeriesClass=[]),l.newSeriesClass.map((function(t,e){wc("g",t,[{data:s,index:e}],a,l.oldSeriesClass[e],(function(t){return t}))})))}else{var l;for(o=e.length-1;o>=0;o--){var s=t.seriesdata[o];i=o;(l=t.seriesdata[o+1]?vm({data:t.seriesdata[o],index:e[o],type:pi.helpers.getChartType(t.seriesdata[o].type,"string",e[o],t.userdata)},{data:t.seriesdata[e[o]+1],index:e[o]+1,type:pi.helpers.getChartType(t.seriesdata[e[o]+1].type,"string",e[o]+1,t.userdata)},t):vm({data:t.seriesdata[o],index:o,type:pi.helpers.getChartType(t.seriesdata[o].type,"string",o,t.userdata)},t)).oldSeriesClass||(l.oldSeriesClass=[]),l.newSeriesClass.map((function(t,e){wc("g",t,[{data:s,index:e}],a,l.oldSeriesClass[e],(function(t){return t}))}))}}}var ym=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function t(e,n){var a,r,o,i,l,s;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=this,r=_e.nonaxis,e=Ma(e),n=Ma(n);try{e.some((function(t,e){if(-1!=r.indexOf(Gt[t.type]))throw'Action not possible! Add series is not supported for "'.concat(t.type,'"')})),a.seriesAddRemoveDetails=bp(a.seriesAddRemoveDetails,"add",a.seriesdata&&a.seriesdata.length),o=a&&a.plot&&a.plot.renderer&&a.plot.renderer.mode||"svg",i=a.userdata.seriesdata.chartdata.length,l=gm(e,n,a),s=a.dataObject.flattenPoints,"svg"===o&&i&&mm(a,n),a.redraw(!0),a.seriesAddRemoveDetails.seriesUpdatedAtEnd&&!a.dataObject.flattenPoints&&(a.dataObject.flattenPoints=s,bm(l,n,a)),a.dataObject.pushFlattenAnnotation&&a.eventHandler.isSingleSource()&&a.dataObject.pushFlattenAnnotation(),a.eventHandler.reverseLegendHighlight=new fm(a),a.seriesAddRemoveDetails.seriesAddRemovePhase=!1}catch(t){Mv.helpers.handleErrors(a,t)}case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}();function bm(t,e,n){e.map((function(e){var a=t.get(e).data[0],r=e,o={seriesindex:r,subseriesindex:0,row:null,column:null,index:0,rendererIndex:n.renderer[r].commonRendererProp().rendererIndex()};a.map((function(t){o.data=[[t]],n.dataObject.flattenData([o])}))}))}var xm=function(t,e){t.sort((function(t,e){return e-t}));var n=e.userdata.seriesdata.chartdata,a=n.length-1,r=!0,o=[],i=e.svg.selectAll(".seriesholder"),l=e&&e.plot&&e.plot.renderer&&e.plot.renderer.mode||"svg";return t.map((function(s,c){void 0===s&&(s=n.length-1,t[c]=s),a!=s&&(r=!1),a--;var u=function(t,e){return void 0===e&&(e=t.userdata.seriesdata.type),Number(e)&&(e=we.get(e)),e.toLowerCase()}(e,n[s].type);o.push(u);var d,h=Zp(u);"svg"===l&&(d=null!=e.renderer[s].commonRendererProp().params.dynamicSeriesPosition?e.renderer[s].commonRendererProp().params.dynamicSeriesPosition:e.renderer[s].commonRendererProp().params.datasetIndex,"area"===h?i.selectAll("g.areaseries_".concat(d,",g.lineseries_").concat(d,",g.scatterseries_").concat(d)).remove():"line"===h?i.selectAll("g.lineseries_".concat(d,",g.scatterseries_").concat(d)).remove():i.selectAll(".".concat(h).concat(xv.get(h)).concat(d)).remove());n.splice(s,1),e.renderer.splice(s,1),e.rendererConf.splice(s,1)})),e.staticPaneSVG.selectAll(".qualitativeGroup").selectAll("g").remove(),chartObj.notes.selectAll("*").remove(),chartObj.container.selectAll("g.zc-annotation").remove(),e.staticPaneSVG.selectAll(".labelholder").selectAll("g").remove(),e.staticPaneSVG.selectAll(".legendarea").selectAll("g").remove(),e.seriesAddRemoveDetails.seriesUpdatedAtEnd=r,{seriesTypesRemoved:o}};function Cm(t,e,n,a,r){var o,i=t.chartObj,l=t.xscale,s=t.yscale,c=t.stacked,u=t.datasetIndex,d=t.axisrotated,h=t.commonPlotOptions,f=t.yaxiscolumnorder,p=t.dataset,v=i.systemConf,m=i.dataObject,y=v.chart.axes.yaxis[f].reversed,b=(i.seriesdata[u]||i.seriesdata[0]).plotoptions,x=Dn.getValueOfPlotOptions(b,h),C=Ar.FIREFOX&&1==e.length?"linearClosed":x("mode");if(m.isPolarAxisCategory)o=W().defined((function(t,e){return!t.isDummy})).radius((function(t,e){var n=c?s(t.y+t.y0):s(p.getY(t,f))+(null!=s.bandwidth?s.bandwidth()/2:0);return Ge(n,s.range()[y&&!c?s.domain().length-1:0]+.1)})).angle((function(t,e){return l(p.getX(t))})).curve(g(C,d));else{var k=Ui(i,r,u),w=pi.helpers,_=w.isCatNull(p,"x"),S=w.isCatNull(p,"y",f);o=N().defined((function(t,e){var n=!S(p.getY(t,f))&&!_(p.getX(t));return k.value===Gt.stkdarea?!(t.isDummy&&t.isPrevDummy&&t.isNextDummy):!t.isDummy&&n})).x((function(t,r){var o=m.getXYvalue(d,c,l,s,f,t,"x",null,a);null!=n&&(o+=Math.abs(m.getXYvalue(d,c,i.renderer[u].oldXscale,s,f,e[0],"x",null,a)-m.getXYvalue(d,c,l,s,f,e[0],"x",null,a)));return o})).y((function(t,e){return i.dataObject.getXYvalue(d,c,l,s,f,t,"y",null,a)})).curve(g(C,d,h.tension))}return o}function km(t,e){this.chart=t,this.renderer=e}Ta(km,rv),km.prototype.options=function(t){var e=this.renderer.commonRendererProp().params,n=Za(this).commonOptions.call(this,t),a=(n.symbol,n._size||e.gvp("strokeWidth"));return n.size={outer:.9*a,inner:.4*a},n},Jp.line=function(){var t,e,n=Jp.scatter();function a(r,o,i,l){var s=t.params,c=s.chartObj,u=s.xscale,d=s.yscale,h=s.datasetIndex,f=s.legendOrderIndex,p=s.rendererIndex,g=(s.axisrotated,s.commonPlotOptions),v=s.color,m=s.labelQueue,y=s.yaxiscolumnorder,b=o,x=(b=c.dataObject.categoryHierarchy?o[h]:c.seriesdata[h]).plotoptions,C=t.params.gvp=Dn.getValueOfPlotOptions(x,g),k=(c.systemConf.chart.axes.xaxis.reversed,_s(c,h)),w=c.canvasarea,_=Ao(c)?"".concat(b.row,"_").concat(b.column):"0_0",S=Ui(c,_,h),O=(S.value,C("dashStyle")),A=Jn(C("strokeWidth"),2),T=C("strokeOpacity"),P=Is(c,f,_,k,s),E=t.params.markerOptions=x?Rn(g.marker,x.marker,!0):g.marker,L=(t.params.hoverOptions=x&&x.hoveroptions?Rn(g.hoveroptions,x.hoveroptions,!0):g.hoveroptions,Xr(C("lineCap"),O)),M=Gr(O,A),D=!(!Wl(c,"marker")||!Nl(c,"marker",Xe(w.width,w.height)))&&E.enabled,I=c.dataset.getDataType("x"),R=c.dataset.getDataType("y",y),z=I==To?u.domain():null,j=R==To?d.domain():null;na(i)?(r.lineWidth=wa(i["stroke-width"],A),na(l)&&(D=!0,T=1e-8)):r.lineWidth=A,b.disabled||(a.seriesdataAfterUpdate=[],r.save(),b.data.forEach((function(t,n){var o;r.beginPath(),o=I==To||R==To?c.dataObject.updateSeriesdatabyCategories(Yn(t),z,j,y):t,c.renderVisiblePointsOnly&&(o=pi.helpers.filterPointsInViewport(c,o,"line","x",h)),a.seriesdataAfterUpdate[n]=o,Cm(s,o,e,undefined,_).context(r)(o),M.length&&"object"===_typeof(M)&&na(r.setLineDash)&&(r.setLineDash(M),r.lineCap=L),r.strokeStyle=P(f,pn,C("strokeColor")||v,pn,T,n),r.stroke()})),r.restore(),D&&(n.commonRendererProp(t).shiftInfo(e),n.chartRendered=!1,n(r,o,i,l)));var F=0;return D||(F=D?.5*(E.size||A)*10+A/2:0,c.dataObject.markerSize[S.name]&&c.dataObject.markerSize[S.name].add(F),m.push({renderer:a,charttype:"scatter",chartObj:c,rendererIndex:p,paneid:_,args:[b,h,F]})),a.getSymbolSize=n.getSymbolSize||function(){return F},a.chartRendered=!0,r=null,a}return a.getHighlighter=function(t,e){return a.highlighter||(a.highlighter=new km(t,a)),a.highlighter},a.commonRendererProp=function(e){return arguments.length?(t=e)&&a:t},a.shiftInfo=function(t){return arguments.length?(e=t)&&a:e},a};var wm={mousemove:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="mousemove",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},mouseout:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="mouseout",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},click:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="click",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},doubleclick:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="doubleclick",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},contextmenu:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="contextmenu",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},tap:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="tap",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},dbltap:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="dbltap",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},singletouchmove:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="singletouchmove",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))},touchend:function(){var t=this.chart,e=this.eventManager,n=Pu(t.trackerElement),a=_m.call(this,n);t.chartRendered&&(e.eventType="touchend",e.targetEvent=jt(),t.rendererConf.forEach((function(n){$n(fa(n.params.commonPlotOptions.events,e.eventType),e.targetEvent,a,t)})))}};function _m(t){var e=this.chart.axes.x.scale;e.invert(t[0]);return{itemIndex:e.index(t[0]),mouse:t}}function Sm(t,e){var n=this.sparkline=new Om(this);try{n.declareProperties(),n.prepareLayout(),n.processUserData(),n.constructScales()}catch(t){Mv.helpers.handleErrors(this,t)}}function Om(t){this.chart=t,this.container=t.container,this.userdata=t.userdata}function Am(t,e){this.container=t,this.userdata=e,this.dataObject=null,this.dataset=null,this.svg=null,this.seriesColor=[],this.axes={x:{levels:[],branches:[],clusters:[],leaves:[]},y:{groups:[],branches:[],clusters:[],leaves:[]}},this.ismultiy=null,this.plotarea_approx=null,this.nochartdata=!1,this.chartRendered=!1,this.plot={},this.events={},this.viewPortExtent=null,this.isMiniature=this.isMiniature||fa(e,"chart.plot.miniature"),this.isMiniature?Sm.call(this,t,this.userdata):(Mv.call(this,t,e),this.initialize())}Om.prototype.declareProperties=function(){var t=this.chart;t.cache={},t.plot={},t.dataset={},t.dataObject={},t.timerObj=[],t.datalabels={},t.legendarea={}},Om.prototype.prepareLayout=function(t){var e=this.chart,n=this.container,a=e.chartWidth=e.getChartDimension("width"),r=e.chartHeight=e.getChartDimension("height");e.setCanvasDimension(a,r),t||(n.selectAll("*").remove(),n.styles({position:"relative"}),dc(e.container,"canvas",[1],".","class","zc-canvas")),e.context=this.prepareCanvas()},Om.prototype.prepareCanvas=function(){var t=this.chart,e=this.container.select(".zc-canvas"),n=t.getChartDimension("width"),a=t.getChartDimension("height"),r=fa(t,"userdata.chart"),o=r.marginLeft,i=void 0===o?10:o,l=r.marginRight,s=void 0===l?10:l,c=r.marginTop,u=void 0===c?10:c,d=r.marginBottom,h=void 0===d?10:d;e.attrs({width:n-s,height:a-h}),e.styles({position:"absolute",left:i+un,top:u+un,width:n-s+un,height:a-h+un,visibility:"visible",opacity:1});var f=e.node().getContext("2d"),p="".concat(Ar.prefix.lowercase,"ImageSmoothingEnabled");return f.clearRect(0,0,n,a),f[p]=!1,ja(f)},Om.prototype.processUserData=function(){var t=this.chart,e=this.userdata,n=t.getChartDimension("width"),a=t.getChartDimension("height");t.chartTypes=pi.helpers.getAllChartTypes(e,"object"),t.globalChartType=e.seriesdata&&e.seriesdata.type,t.chartFontProp={},t.globalProp=Sr(t.userdata,{width:n,height:a},t.chartFontProp),t.themeoptions=t.getThemeOptions(t.globalProp),t.processUserData(t.themeoptions),this.updateSystemConf(),t.setChartDimension(),t.updatePlotArea(),t.getChartSeriesColor(),t.isAxisCategory=t.dataObject.isAxisCategory,t.isNonAxisMultiSeriesCategory=t.dataObject.isNonAxisMultiSeriesCategory,t.isPolarAxisCategory=t.dataObject.isPolarAxisCategory},Om.prototype.updateSystemConf=function(){var t=this.chart.systemConf,e=t.chart.plot,n=e.plotoptions;for(var a in e.datalabels.show=!1,t.chart.scroll&&(t.chart.scroll.enabled=!1),t.loader.enabled=!1,n){var r=n[a].datalabels;r&&(r.show=!1)}},Om.prototype.constructScales=function(){var t=this.chart,e=t.systemConf,n=t.axes,a=n.x,r=n.y;if(t._isAxisCategory()||t.dataObject.isPolarAxisCategory||t.dataObject.hasLevelMarker){n.rotated=lc(e);var o=_slicedToArray(n.rotated?["left","bottom"]:["bottom","left"],2);a.orient=o[0],r.orient=o[1],t.ismultiy=t.getAxesCount("y")>1,t.ismultix=t.getAxesCount("x")>1}Wt.constructor(t,"bottom"),Wt.constructor(t,"left"),this.addScaleDependencies()},Om.prototype.addScaleDependencies=function(){var t=this.chart,e=t.axes.x.scale,n=t.axes.y.groups,a=e.domain(),r=e.range(),o=(e.outerPaddingPx,(r[1]-r[0])/a.length);e.invert=e.invert||function(t){return a[Ye((t-r[0])/o)]},e.index=e.index||function(t){return Ye((t-r[0])/o)},t.dataset.getDataType("x")==To&&(Wt.barBandwidth(t),n.forEach((function(t){return wh(t.scale)})))},Om.prototype.draw=function(t){this.chart;this.render(!1)},Om.prototype.render=function(t){var e=this.chart,n=this,a=e.systemConf,r=e.renderer=e.renderer||[],o=e.rendererConf=e.rendererConf||[],i=e.seriesdata,l=pi.helpers;e.plot.renderer={mode:"canvas"};try{i.forEach((function(t,a){var i=l.getChartType(t.type||e.globalChartType,"string"),s=l.getChartType(t.type||e.globalChartType,Eo),c=Zp(i);r[a]=r[a]||new Jp[c],o[a]=new Yt.rendererConf,r[a].chartRendered=!1,n.addDependencies(i);Ee.setRendererProp(e,r[a],t,a,a,{barDatasetIndex:0,labelArray:{},labelQueue:[],notesArray:[]},a,s,0)}));var s=e.plotarea;i.forEach((function(t,n){if(s.width>0&&s.height>0){var a=e.renderer[n].commonRendererProp().params.bound,o=a.x,i=a.y;e.context.translate(o,i),r[n](e.context,t)}})),this.handleEvents(t),e.chartRendered=!0,Du(e,a.canvas.events,0,t?"onreload":"onload")}catch(t){Mv.helpers.handleErrors(e,t)}},Om.prototype.addDependencies=function(t){var e=this.chart;e.dataset.getDataType("x")==To&&Wt.barBandwidth(e)},Om.prototype.handleEvents=function(t){var e=this.chart;this.eventManager={};var n=l(e.context.canvas);e.trackerElement=n,n.styles({"pointer-events":"all"}),this.bindEvents(t)},Om.prototype.bindEvents=function(t){var e=this,n=this.chart,a=(n.container,n.trackerElement),r=wm,o={click:function(t){r.click.call(e,t)},dblclick:function(t){r.doubleclick.call(e,t)},contextmenu:function(t){r.contextmenu.call(e,t)},mousemove:function(t){r.mousemove.call(e,t)},mouseout:function(t){r.mouseout.call(e,t)},tap:function(t){r.click.call(e,t)},dbltap:function(t){r.doubleclick.call(e,t)},singletouchmove:function(t){r.mousemove.call(e,t)},touchend:function(t){r.mouseout.call(e,t)}};for(var i in o)a.on(i,o[i])},Om.prototype.destroy=_asyncToGenerator(_regeneratorRuntime().mark((function t(){var e,n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.chart,n=e.sparkline,!e.destroying){t.next=3;break}return t.abrupt("return");case 3:return t.abrupt("return",new Promise((function(){e.destroying=!0,$n(Gn(e.systemConf,"canvas.events.destroy",!0),jt(),e),n.container.datum(null),e.container=e.sparkline.container=null,e.dataObject&&(e.dataObject.isAxisCategory||e.dataObject.isPolarAxisCategory)&&(ur(e.axes.x),e.axes.y.groups.forEach((function(t){return ur(t)})),e.renderer.forEach((function(t){return ur(t.commonRendererProp().params.labelArray)})),e.renderer.forEach((function(t){return ur(t,e)})),ur(e.dataObject,e),ur(e.cache),ur(e))})));case 4:case"end":return t.stop()}}),t,this)}))),Om.prototype.redraw=function(){var t=this.chart;t.updating=!0,t.phase="redraw",t.viewPortExtent=null,t._chartwidth=null,t._chartheight=null,t.oldChartTypes=t.chartTypes,t.chartRendered=!1,this.prepareLayout(!0),this.processUserData(),this.constructScales(),this.render(!0),t.phase=null},pi.helpers={isCatNull:function(t,e,n){var a=t.hasNullFormatter&&!t.hasNullFormatter[e+(na(n)?n:"")];return function(t){return!na(t)&&a}},is3D:function(t){return ua(t)&&ua(t[0])&&ua(t[0][0])},getParsedYAxisOrder:function(t){return ua(t)?t[0]:t||0},getChartType:function(t,e,n,a){if(null!=t||null!=n){var r,o,i=a&&a.seriesdata.chartdata;return na(n)&&(t=wa((i[n]||i[0]).type,a.seriesdata.type)),isNaN(+t)?(r=t.toLowerCase(),o=Gt[r]):(o=+t,r=we.get(o)),"string"===e?r:e===Eo?o:{name:r,value:o}}},getAllChartTypes:function(t,e){var n=this,a=t.seriesdata&&t.seriesdata.type;return wa(fa(t,"seriesdata.chartdata"),[]).map((function(t){var r=n.getChartType(wa(t.type,a),wa(e,Eo));return e||"object"!==e?r:{}}))},getAllChartTypesFromSeriesdata:function(t,e,n){var a=this,r=t.seriesdata&&t.seriesdata.type;return wa(e,[]).map((function(t){var e=a.getChartType(wa(t.type,r),wa(n,Eo));return n||"object"!==n?e:{}}))},filterDataToViewPort:function(t,e,n,a,r){var o=ua(e)&&ua(a),i=0;return t.filter((function(t){var l,s=n&&n(t),c=r&&r(t);return(l=o?null!==s&&null!==c&&s>=e[0]&&s<=e[1]&&c>=a[0]&&c<=a[1]:null!==s&&s>=e[0]&&s<=e[1])?(t._filter=!1,t.counter=i++):t._filter=!0,l}))},getDataPosition:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=r.renderer[n],c=r.rendererConf[n],u=c.yaxiscolumnorder(),d=r.axes.rotated,h=c.stacked(),f=null;if(o=wa(o,r.chartTypes[n].name),i=wa(i,c.xscale()),l=wa(l,c.yscale()),"bar"===o)f=r.dataObject.getTransRectValue(e,t,a,0,s.commonOption);else if("bubblepie"===o){var p=t[n];f=r.dataObject.getXYvalue(d,h,i,l,u,p,e)}else f=r.dataObject.getXYvalue(d,h,i,l,u,t,e);return isNaN(f)&&(f=null),f},filterPointsInViewport:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(t.isGeoMap)return e;var i=qa(["line","area","bar","arearange","canvasscatter"],n),l=t.plotarea,s=[0,l.width],c=[0,l.height],u=t.axes.rotated,d=t.axes.x.reversed,h=pi.helpers.getDataPosition;if("x"!==a&&"xy"!==a||!ua(t.scrollView)||(s=t.scrollView.map(t.axes.x.baseScale).sort(B)),t.racing&&t.racing.scrollView&&(s=t.racing.scrollView),i&&(e.length>1||"bar"===n)&&!t.racing)if("bar"===n)u&&(s=c),s=[s[0]-t.barscale2.bandwidth(),s[1]];else{var f,p,g=h(e[0],"x",r,o,t,n),v=h(e[1],"x",r,o,t,n),m=h(e[0],"y",r,o,t,n),y=h(e[1],"y",r,o,t,n);if(d?(f=g-v,p=m-y):(f=v-g,p=y-m),u){var b=[p,f].map(Ze),x=_slicedToArray(b,2);f=x[0],p=x[1];var C=[c,s];s=C[0],c=C[1]}s=[s[0]-f,s[1]+f],c=[c[0]-p,c[1]+p]}else if(u){var k=[c,s];s=k[0],c=k[1]}var w=function(e){return h(e,u?"y":"x",r,o,t,n)},_=function(e){return h(e,u?"x":"y",r,o,t,n)};return"xy"===a?pi.helpers.filterDataToViewPort(e,s,w,c,_):"x"===a?pi.helpers.filterDataToViewPort(e,s,w):"y"===a?pi.helpers.filterDataToViewPort(e,c,_):void 0},groupByDataIndices:function(t,e){var n=e.dataSplicer,a=n.getEncode(),r=n.getColumns();return(a.groupby||[]).map((function(t){return r[t].dataindex}))},hasLevelMarkerData:function(t,e){var n=[vi,mi,Ti,zi,Fi],a=t.getEncode("y",e).seriesIndices,r=t.allChartTypes;return a.some((function(t){return qa(n,we.get(r[t]))}))},hasMarkerCorrection:function(t){return!1},generatePointKey:function(t,e,n,a,r){return"".concat(t,"_").concat(e,"_").concat(n,"_").concat(a,"_").concat(r)},getSeriesdata:function(t,e,n){if(na(n))return t.dataObject.pivot?t.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes[e].data[n].node:t.seriesdata[n]},getDynamicData:function(t,e){for(var n=Yn(t),a=n.count,r=0;r<=a;r++)n.splice(r,0,[null,null]);return n}},Uv.helpers={time:{},ordinal:{},numeric:{},linear:{}},Uv.helpers.hasInnerSeries=function(t){return ua(t.data)&&t.data[0]&&t.data[0].constructor===Object},Uv.helpers.time={getDataInfo:function(t,e,n){var a,r,o,i=n.dataSplicer,l=i.getEncode(),s=i.getColumns(),c=l.x,u=l.z||[],d=l.clr||[],h=E([c,E(l.y),u,d]),f=/timestamp/i,p=[],g=[];return h.map((function(t){o=wa(s[t],{}),a=wa(o.time,{}),"time"!==o.datatype||t===c||e||(r=a.inputformat,f.test(r)&&"function"!==r&&"function"!=typeof window[r]?g.push(null):g.push(a),p.push(s[t].dataindex))})),{indices:p,formatConf:g}},applyFormats:function(t,e){var n=e.indices,a=e.formatConf;return n.map((function(e,n){na(t[e])&&(ua(t[e])?t[e]=t[e].map((function(t){return Go(t,0,a[n]).getTime()})):t[e]=Go(t[e],0,a[n]).getTime())})),t}},Uv.helpers.linear={sort:function(t,e){return t.sort((function(t,n){return(t=t[e])<(n=n[e])?-1:t>n?1:t>=n?0:NaN}))}},pi.prototype.convertTo3DArray=function(t,e,n){var a=t.data;if(e.length>0&&(n===Gt.bar||n===Gt.stkdbar)){var r=function(t,e){var n=t.data.map((function(t){return e.reduce((function(e,n){return e+t[n]}),"")}));return{distintGroupbyCat:er(n),allGroupbyCat:n}}(t,e),o=r.distintGroupbyCat,i=r.allGroupbyCat,l=[];t.data.forEach((function(t,e){var n=o.indexOf(i[e]);l[n]=l[n]||[],l[n].push(t)})),a=t.data=l}else na(a)&&(!a.length||na(a[0])&&ua(a[0]))&&(t.data=[],t.data.push(a),a=t.data);return a},pi.prototype.totalDataCount=function(t){var e=this,n=e.chartObj,a=0;return t.map((function(r){if(!t.disabled&&ua(r)){var o=n._isAxisCategory()||e.isPolarAxisCategory||e.isNonAxisMultiSeriesCategory?r.length:r.reduce((function(t,e){return t+(e.disabled?0:1)}),0);a+=1!==o||null!==r[0]&&r[0].length?o:0}})),this.totalnoofdatas+=a,a},Sp.get=function(t,e){return new Am(t,e)},Ta(Am,Mv),Am.helpers=Mv.helpers,Am.prototype.initialize=function(){var t=this;try{t.timerObj=new Array(0),t.processUserData(t.themeoptions),t.setChartDimension();var e=wn.getComponent("LegendHighlight");t.legendHighlight=new e(t,t.svg),Mv.helpers.constructChartGroups(t)}catch(e){Mv.helpers.handleErrors(t,e)}},Am.prototype.draw=function(){var t=this,e=this.systemConf.chart.plot.background;if(e.image.lockAspectRatio&&e.imageUrl){var n=new Image;this.plot.hasBgAspectRatio=!0;var a=this.plot.backgroundImg={};n.onload=function(){a.width=this.width,a.height=this.height,t.render(!1)},n.src=e.imageUrl}else this.render(!1)},Am.prototype.render=function(t){var e=this;try{e.updateCanvasArea();var n=e.systemConf;if(e.applyChartProperties(),e.nochartdata)e.hideLoading(e.container),e.handleNoData(n.noDataHandler),e.chartRendered=!0,Du(e,n.canvas.events,0,t?"onreload":"onload");else{if(e.clearNoData(n.noDataHandler),e.getChartSeriesColor(),e.isAxisCategory=e.dataObject.isAxisCategory,e.isNonAxisMultiSeriesCategory=e.dataObject.isNonAxisMultiSeriesCategory,e.isPolarAxisCategory=e.dataObject.isPolarAxisCategory,e.parseScale(),e.zscale=e.scales[0]&&e.scales[0].getScale(),wn.getComponent("legend.render")(e,t),Qv.updatePlotarea4BlockTooltip(e),function(t,e,n){if(Gn(t.systemConf,"notes")&&t.systemConf.notes.enabled){var a=wn.getComponent("annotation");a._empty||a.addBlockAnnotations(t)}(t._isAxisCategory()||t.dataObject.isPolarAxisCategory||t.dataObject.hasLevelMarker)&&(t.axes.rotated=lc(e),t.axes.rotated?(t.axes.x.orient="left",t.axes.y.orient="bottom"):(t.axes.x.orient="bottom",t.axes.y.orient="left"),t.ismultiy=t.getAxesCount("y")>1,t.ismultix=t.getAxesCount("x")>1);if(Gn(t.systemConf.chart,"scroll")&&t.systemConf.chart.scroll.enabled)if(t.scroll)t.scroll.update();else{var r=wn.getComponent("ChartBrushScroll");Er("scroll",t.systemConf.chart,t.globalProp);t.systemConf.chart.scroll.orient,t.axes.rotated;t.scroll=new r(t,"x")}else t.scroll&&(t.scroll.destroy(),t.scroll=null,t.behaviouralEvents.eventManager.behaviours.CHART_SCROLL=null,delete t.behaviouralEvents.eventManager.behaviours.CHART_SCROLL,delete t.scroll);if(t.plot.backgroundImg){var o=t.plot.backgroundImg.width/t.plot.backgroundImg.height,i=Ge(t.chartWidth,t.chartHeight)*o,l=i/o;t.systemConf.chart.width=i,t.systemConf.chart.height=l}if(yv(t)){var s=new(wn.getComponent("smoothScroll"));t.divScroll=s,s.initialize(t)}Du(t,e.chart.axes.events,0,"init"),t.drawPlotBorder(),t._isAxisCategory()&&Ht.render(t,t.chartWidth,t.chartHeight,n);(t.dataObject.isPolarAxisCategory||Ll(t.chartTypes[0].value,Ti))&&Ht.polar.render(t);t.legend.isSingleLayout&&(t.zscale=t.dataObject.hasZaxis&&!t.dataObject.isHierarchy?t.scales[0].create():null);Du(t,e.chart.axes.events,0,n?"onreload":"onload"),t.updatePlotareaProp(),new Promise((function(t,e){t()}))}(e,n,t),e.plot.renderer)e.plot.renderer.draw(t);else(e.plot.renderer=Yt.render(e,t)).draw(!1);e.isAxisCategory&&e.drawThreshold(t),e.handleEvent(t),e.drawPlotareaClippath(),e.positionEventTrackerElement(e.wrap.selectAll("rect.dummy-rect-filter"))}}catch(t){Mv.helpers.handleErrors(e,t)}},Am.prototype.processUserData=function(t,e){var n,a,r,o=this;o.systemConf=n=Rn(t,o.userdata,!0,!0),a=fa(n,"seriesdata")||{},o.seriesdata=r=a.chartdata,Du(o,n.canvas.events,0,"init");var i=wn.getComponent("dataSplicer");if(o.userdata.viewParser||o.userdata._viewParser){var l=wn.getComponent("viewParser");o.viewFlow=new l(o.userdata.viewParser||o.userdata,o.userdata),i=wn.getComponent("dataSplicer4ViewParser"),o.parserConfig=o.viewFlow.init()}if(o.dataSplicer=new i(o.userdata,o.systemConf,o),o.nochartdata=!na(r)||na(r)&&r.length<1,o.nochartdata)o.seriesdata=null;else{if(function(t){var e=t.dataSplicer,n=t.systemConf,a=e.getEncode(),r=e.getColumns(),o=n.facets,i=[Ai,Pi,Ei],l=Gi(t).values().some((function(t){return qa(i,t)})),s=r[a.x[0]],c=s.datatype;if(!o||a.clr&&a.clr.length||n.facets.color&&n.facets.color.length||!l)!l&&fa(t.userdata,"legend._dummy")&&(delete n.metadata.axes.clr,pa(t.userdata,"legend._dummy",void 0),pa(t.systemConf,"legend._dummy",void 0),c===To&&(Gn(s.ordinal,"_dummyNullformatting")&&(pa(s,"ordinal.nullformatting",void 0),pa(s,"ordinal._dummyNullformatting",void 0)),pa(t.userdata,"legend.colorBand.nullAs",void 0),pa(t.systemConf,"legend.colorBand.nullAs",void 0)));else if(n.metadata.axes.clr=[a.x[0]],pa(t.userdata,"legend._dummy",!0),pa(t.systemConf,"legend._dummy",!0),c===To){Gn(s.ordinal,"nullformatting")||(pa(s,"ordinal.nullformatting","null"),pa(s,"ordinal._dummyNullformatting",!0));var u=Gn(s.ordinal,"nullformatting",!0)||"null";pa(t.userdata,"legend.colorBand.nullAs",u),pa(t.systemConf,"legend.colorBand.nullAs",u)}}(o),o.dataset=new Wv.get(n,o),o.preProcessor=new Uv(o),!o.seriesdata.length)return void(o.nochartdata=!0);o.dataObject=o.getDataObject(),o.nochartdata=o.dataObject.totalnoofdatas<1}},Am.prototype.getDataObject=function(){var t,e,n=this,a=n.chartTypes[0].value,r=this.dataObject,o=this.preProcessor,i=r.hierarchical,l=i&&i.facetRendering||o&&o.hierarchical&&o.hierarchical.facetRendering;return t=l||!qa(_e.hierarchy,a)||n.isAxisedHierarchyChart?qa(_e.axis,a)||qa(_e.polarAxis,a)||Ll(a,Ti)||qa(_e.flow,a)||l||n.isAxisedHierarchyChart?"cartesianDataProcessor":"defaultDataProcessor":"hierarchyDataProcessor",function(t){var e=t.prototype,n={getAxisRotated:function(){return lc(this.data)},isstacked:function(){return!1}};for(var a in n)e[a]||(e[a]=n[a])}(e=wn.getComponent(t)),new e(n.systemConf,n.dataset,n)},Am.prototype.getAxesCount=function(t){var e=this,n=1,a=e.dataSplicer,r=a.getEncode(),o=a.getColumns(),i=e.dataObject.hierarchical;if("x"===t){var l=e.dataset.getColumnIdx(t),s=o[l].datatype,c=wa(o[l][s],{}),u=c.subfunction,d=e.systemConf.chart.axes.xaxis.show;if(i){var h=i.pivotLayout.getRootNodeList("column");n=h.getCount()+h.getLeavesCount()}else d&&ua(c.groupby)&&c.groupby.length?n=c.groupby.length+1:d&&"AUTO"===c.groupby&&(n=pi.HierarchicalTimeDataAdapter.getAutoGroupOrder(u).length+1);e.axes[t].count=n}else{var f=r.y;if(i&&i.pivot){var p=i.pivotLayout.getRootNodeList("row");n=(p.getCount()||0)+p.getLeavesCount()}else n=f.length;e.axes[t].count=n}return n},Am.prototype.drawThreshold=function(t){if(Ht.threshold){var e=this;e.cache.thresholdCustomPoints=[],Ht.threshold(e,t),Vr(e.container.selectAll("g.threshold"),{chartObj:e})}},Am.prototype.handleEvent=function(t){var e=this,n=e.systemConf,a=wn.getComponent("ZC_ChartEvents");if(t&&e.eventHandler)e.eventHandler.update(),function(t){t.eventHandler.tooltipElement=Vt.tooltip(t.tooltip.element,t.systemConf,t),t.eventHandler.tooltipElement.initialize()}(e);else{e.createEventGroups(t);var r=wc("g",".trackerGroup",[1],e.eventWrap).attr("pointer-events","all"),o=wc("rect",".eventhandler",[1],r);o.node().__chart=e,e.eventHandler=new a(e,r),e.eventHandler.trackerGroup=r,e.eventHandler.trackerElement=o,em(e),e.eventHandler.init(),tm(e)}if(e.eventHandler.isSingleSource()&&(e.renderer.length&&(e.seriesAddRemoveDetails&&e.seriesAddRemoveDetails.seriesAddRemovePhase&&e.seriesAddRemoveDetails.seriesUpdatedAtEnd||e.dataObject.flattenData()),e.positionEventTrackerElement()),em(e),yv(e)&&e.divScroll.defaultScroll(e),e.behaviouralEvents)e.behaviouralEvents.update();else if(!0!==n.__$overview){e.behaviouralEvents=new om(e);var i=e.eventHandler.trackerGroup.selectAll("rect.overlay");i.empty()||(i.node().__chart=e)}e.scroll&&e.scroll.render(),e.handleLegendEvents()},Am.prototype.addRemoveSeries=function(t,e,n,a){var r=this,o=r.systemConf;if(r.phase="legendFilter",r.cache.correction={},Ao(r))return r.cache.search={},void r.plot.renderer.draw(!0);if(Bi.isQuantileColorScale(r))return r.phase="legendFilter-colorScale",r.cache.search={},void r.plot.renderer.draw(!0);if(r.dataObject.formattedData={x:[],y:[]},r.dataObject.initialize("addorremoveseries"),Du(r,o.chart.axes.events,0,"init"),r.isAxisCategory){r.updateZscale();var i=r.dataObject.hierarchical;if(a){if(r.axes.y.groups.forEach((function(t,e){r.updateScale([e,0],"y")})),r.dataObject.hierarchical)i.pivotLayout.getRootNodeList("row").getCount()&&Wt.setRowScale(r,"row")}else r.updateScale(n,"y");if(r.updateScale(0,"x",r.viewPortExtent),i){r.axes.x.rangeScale=r.axes.x.scale.copy(),r.axes.x.rangeScale.outerPaddingPx=r.axes.x.scale.outerPaddingPx,r.dataObject.hierarchical.groupByDiscreteTime&&r.axes.x.rangeScale.domain(tt(r.axes.x.scale.domain().length));var l=i.setScaleForRange(r.axes.x.rangeScale);i.pivotLayout.setRanges("column",l),r.axes.x.levels.forEach((function(t,e){r.updateScale(n,"x",null,e+1)})),i.categoryTree&&Ht.TickLabelFilter.updateTickEventHandler(r,t.disabled,"x")}r.drawThreshold(!0),r.updatePlotareaProp()}else r.dataObject.isPolarAxisCategory&&Ht.polar.render(r,"x");Du(r,o.chart.axes.events,0,"onreload"),r.events={},r.plot.renderer.draw(!0),r.drawPlotareaClippath(),(r.isAxisCategory||r.dataObject.isPolarAxisCategory)&&(r.positionEventTrackerElement(),(r.systemConf.chart.width||r.systemConf.chart.height)&&r.divScroll.defaultScroll(r,"addorremoveseries")),r.dataObject.pushFlattenAnnotation&&r.eventHandler.isSingleSource()&&r.dataObject.pushFlattenAnnotation(),r.behaviouralEvents&&r.behaviouralEvents.update(),!r.scroll||r.racing&&r.racing.isInitiated||r.scroll.update()},Am.prototype.removeSeries=function(t){var e=this;t=Ma(t);try{if(function(t,e){var n=function(t){var e,n=0;return t.map((function(t,a){t.disabled&&!e&&(e=!0),t.disabled||n++})),{activeSeriesCount:n,isAnySeriesDisabled:e}}(e),a=n.isAnySeriesDisabled,r=0;return a&&t.map((function(n,a){Xn(n)&&(n=e.length-1,t[a]=n),e[n].disabled||r++})),e.length===t.length||a&&n.activeSeriesCount===r&&t.length!=e.length}(t,e.userdata.seriesdata.chartdata))throw"You are trying to remove/disable all the active series' from the chart data,which is not possible";e.seriesAddRemoveDetails=bp(e.seriesAddRemoveDetails,"remove",e.seriesdata&&e.seriesdata.length);var n=xm(t,e),a=e.dataObject.flattenPoints;e.seriesdata[0]?(e.redraw(!0),e.seriesAddRemoveDetails.seriesUpdatedAtEnd&&(e.dataObject.flattenPoints=a,function(t,e,n){var a=e.seriesTypesRemoved,r=t.dataObject.flattenPoints.get("pane0_0"),o=0;n.map((function(t,e){delete r.get(a[e])["".concat(t,"_").concat(o)],0===Object.keys(r.get(a[e])).length&&delete r["$".concat(a[e])]}))}(e,n,t)),e.eventHandler.reverseLegendHighlight=new fm(e)):(e.systemConf.seriesdata.chartdata=[],e.dataObject.processedseriesData=[],e.staticPaneSVG.selectAll("g").remove(),delete e.eventHandler,e.redraw(!0)),e.dataObject.pushFlattenAnnotation&&e.eventHandler.isSingleSource()&&e.dataObject.pushFlattenAnnotation(),e.seriesAddRemoveDetails.seriesAddRemovePhase=!1}catch(t){Mv.helpers.handleErrors(e,t)}},Am.prototype.addSeries=ym,Am.prototype.pushDataPoint=function(t,e,n,a){var r,o,i=this,l=i.dataObject.isCombinationalChart,s=l?Ee.arrangeSeriesRenderingOrder(i):i.seriesdata,c=i.dataObject.pivot,u=i.dataObject.hierarchical,d=u&&u.facetRendering;if(d){var h=(d&&u.pivotLayout).getRootNodeList("layer");nr(r=h.panes)}if(!Array.isArray(t)){var f=[],p=[];f.push(t),p.push(e),t=f,e=p,c&&(a=[a])}if(i.cache.data={},i.cache.search={},t.forEach((function(t,d){var h,f,p,g=c?"".concat(a[d][0],"_").concat(a[d][1]):"0_0",v=c?r[g].data[t]:s[t],m=l&&!c?v.seriesidx:t,y=pi.helpers.getSeriesdata(i,g,m),b=c?u.gridOptions[g].renderer[m]:i.renderer[m],x=b.commonRendererProp().stacked();if(p=ua(n)?n[d]:n,x&&(o=!0,y=function(t){var e=new Array(0);t.data[0].map((function(t,n){t.isDummy&&e.push(n),t.isDummy=!1,t.isPrevDummy=!1,t.isNextDummy=!1}));for(var n=e.length-1;n>=0;n--)t.data[0].splice(e[n],1);return t}(y),y.data[0].push(e[d])),y.data[0].push(e[d]),i.dataObject.flattenData([{seriesindex:m,subseriesindex:0,index:c?r[g].index:0,data:[[e[d]]],row:c?a[d][0]:null,column:c?a[d][1]:null,rendererIndex:b.commonRendererProp().rendererIndex()}]),p){h=y.data[0][0];var C=y.data[0].shift();C._filter=!0,na(b.shiftInfo())?(f=b.shiftInfo()).count++:(f={}).count=0,f.point=h,f.shiftedData=C,b.shiftInfo(f)}else b.shiftInfo(null)})),c&&(i.dataObject.hierarchical.update(!1),i.dataObject.processedseriesData=i.seriesdata=i.dataObject.hierarchical.getSeries()),i.dataObject.initialize(),o&&(i.dataObject.flattenPoints=null,i.renderer.length&&i.dataObject.flattenData()),c){cm(i);for(var g=i.axes.x.count,v=0;v<g;v++)i.updateScale(null,"x",null,v);cm(i,null,!1)}else i.updateScale(null,"x");if(c)for(g=i.axes.y.count,v=0;v<g;v++)i.updateScale(null,"y",null,v);else i.ismultiy?t.forEach((function(t,e){var n=s[t],a=l?n.seriesidx:t,r=i.seriesdata[a];i.updateScale(r,"y")})):i.updateScale(i.seriesdata[0],"y");i.plot.renderer.draw(!0),i.drawThreshold(!0)},Am.prototype.popDataPoint=function(t){var e=this,n=e.seriesdata[t];n.data.forEach((function(t){t.pop()})),e.dataObject.initialize(),e.updateScale(n,"x"),e.updateScale(n,"y"),e.plot.renderer.draw(!0),e.drawThreshold(!0)},Am.prototype.zoomX=function(t,e){this.__enableZoom("x"),lm(this.behaviouralEvents.eventManager,e,"x",t)},Am.prototype.zoomY=function(t,e){this.__enableZoom("y"),lm(this.behaviouralEvents.eventManager,e,"y",t)},Am.prototype.zoomXY=function(t,e,n){this.__enableZoom("xy"),lm(this.behaviouralEvents.eventManager,[e,n],"xy",t)},Am.prototype.zoomReset=function(){this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.reset()},Am.prototype.brushON=function(t){this.__enableBrush(t)},Am.prototype.brushOFF=function(){this.__enableBrush(null)},Am.prototype.brushX=function(t,e){this.__enableBrush("x"),sm(this.behaviouralEvents.eventManager,e,"x",t)},Am.prototype.brushY=function(t,e){this.__enableBrush("y"),sm(this.behaviouralEvents.eventManager,e,"y",t)},Am.prototype.brushXY=function(t,e,n){this.__enableBrush("xy"),sm(this.behaviouralEvents.eventManager,[e,n],"xy",t)},Am.prototype.changeZoomType=function(t){var e=this.systemConf;this.zoom||Er("zoom",e.chart,this.globalProp),e.chart.zoom.type=t};var Tm=function(t,e){wn.setComponent(t,e)},Pm=function(t){return wn.getComponent(t)};function Em(t,e,n){var a;for(var r in n)if(n.hasOwnProperty(r)){if(r===t&&n[t]===e)return n;var o=n[r];if(ua(o))for(var i=0;i<o.length;i++)if(a=Em(t,e,o[i]))return a}}function Lm(t,e,n){var a=[];for(var r in n)if(n.hasOwnProperty(r)){r===t&&n[t]===e&&a.push(n);var o=n[r];if(ua(o))for(var i=0;i<o.length;i++)a=a.concat(Lm(t,e,o[i]))}return a}function Mm(t,e,n,a){for(var r in n)if(n.hasOwnProperty(r)){if(r===t&&n[t]===e)return null;var o=n[r];if(ua(o))for(var i=0;i<o.length;i++)if(null===Mm.call(this,t,e,o[i])){if(this.selection=this.selection.concat(o.splice(i,1)),!a)return;i--}}}function Dm(t,e,n){var a=this,r=ua(e)?e:[e],o=ua(n)?n:[n];r.map((function(e,n){var r=e.split(".");Im.call(a,t,r,o[n])}))}function Im(t,e,n){var a=-1;(function t(r){if(++a===e.length-1){var o=e[a];return na(n)&&(r[o]=n),null===n?void delete r[o]:void 0}r[e[a]]=r[e[a]]?r[e[a]]:{},t.call(this,r[e[a]])}).call(this,t)}function Rm(t,e,n){var a=this,r=t.properties,o=ua(e)?e:[e],i=ua(n)?n:[n],l=(r=t.properties=r||{}).attrs;l=r.attrs=l||{},o.map((function(t,e){Im.call(a,l,[t],i[e])}))}function zm(t,e,n){var a=this,r=t.properties,o=ua(e)?e:[e],i=ua(n)?n:[n],l=(r=t.properties=r||{}).styles;l=r.styles=l||{},o.map((function(t,e){Im.call(a,l,[t],i[e])}))}function jm(t,e){var n=0;return function t(a){if(n===e.length-1)return a[e[n]];return t(a[e[n++]])}(t)}function Fm(t,e,n){var a=this,r=t.config,o=ua(e)?e:[e],i=ua(n)?n:[n];r=t.config=r||{},o.map((function(t,e){Im.call(a,r,[t],i[e])}))}function Bm(t){this.parser=_objectSpread({},t)}Bm.prototype.select=function(t,e){var n=this;return ua(t)?(this.selection=[],t.map((function(t,a){n.selection.push(Em(t,e[a],n.parser))}))):this.selection=Em(t,e,this.parser),this},Bm.prototype.selectAll=function(t,e){return this.selection=Lm(t,e,this.parser),this},Bm.prototype.remove=function(t,e){var n=this;this.selection=[];var a,r=ua(t)?t:[t],o=ua(e)?e:[e];return r.map((function(t,e){a=Mm.call(n,t,o[e],n.parser)})),null!==a||(this.selection.push(this.parser),this.parser={}),this},Bm.prototype.removeAll=function(t,e){var n=this;this.selection=[];var a,r=ua(t)?t:[t],o=ua(e)?e:[e];return r.map((function(t,e){a=Mm.call(n,t,o[e],n.parser,!0)})),null!==a||(this.selection.push(this.parser),this.parser={}),this},Bm.prototype.append=function(t){var e=this.selection,n=ua(e)?e:[e],a=ua(t)?t:[t];return n.map((function(t,e){!function(t,e){e.children=e.children?e.children.concat(t):t}(a,t)})),this},Bm.prototype.insert=function(t,e){var n=this.selection,a=ua(n)?n:[n],r=ua(t)?t:[t],o=ua(e)?e:[e];return a.map((function(t,e){!function(t,e,n){t.map((function(a,r){var o=n.children;if(o){var i=na(e[r])?e[r]:o.length;o.splice(i,0,a)}else n.children=[t[r]]}))}(r,o,t)})),this},Bm.prototype.each=function(t){var e=this,n=this.selection;ua(n),n.map((function(n,a){t.call(e,n,a)}))},Bm.prototype.attr=function(t,e){for(var n=this.selection,a=ua(n)?n:[n],r=0;r<a.length;r++)Rm.call(this,a[r],t,e);return this},Bm.prototype.attrs=function(t){var e=this.selection;if(ua(e))for(var n=0;n<e.length;n++){var a=e[n].properties;(a=e[n].properties=a||{}).attrs=t}else{a=e.properties;(a=e.properties=a||{}).attrs=t}return this},Bm.prototype.style=function(t,e){for(var n=this.selection,a=ua(n)?n:[n],r=0;r<a.length;r++)zm.call(this,a[r],t,e);return this},Bm.prototype.styles=function(t){var e=this.selection;if(ua(e))for(var n=0;n<e.length;n++){var a=e[n].properties;(a=e[n].properties=a||{}).styles=t}else{a=e.properties;(a=e.properties=a||{}).styles=t}return this},Bm.prototype.data=function(t,e){for(var n=this.selection,a=ua(n)?n:[n],r=0;r<a.length;r++)a[r].data=t,a[r].dataAccessor=e;return this},Bm.prototype.get=function(t){var e=this.selection,n=[];return(ua(t)?t:[t]).map((function(t){var a=t.split(".");if(ua(e))for(var r=0;r<e.length;r++)n.push(jm(e[r],a));else n.push(jm(e,a))})),n},Bm.prototype.set=function(t,e){for(var n=this.selection,a=ua(n)?n:[n],r=0;r<a.length;r++)Dm.call(this,a[r],t,e);return this},Bm.prototype.config=function(t,e){for(var n=this.selection,a=ua(n)?n:[n],r=0;r<a.length;r++)Fm.call(this,a[r],t,e);return this},Tm("markSelection",Bm),Tr.notes=function(t){return{enabled:!1,chartValues:[],plotValues:[],blockValues:[],type:"stickyNote",options:{stickyNote:{headWidth:15,headHeight:15,bodyWidth:100,bodyHeight:100,fontSize:t.fontL1Size.l5,color:["#F0F8FF","#FFE4C4","#DCDCDC","#ADFF2F","#90EE90","#87CEFA","#FFC0CB","#B0E0E6","#D2B48C","#D8BFD8","#EE82EE","#F5DEB3"],mode:"close",border:"1px solid grey"},customNote:{fontSize:t.fontL1Size.l5}}}};var Hm=function(){};function Nm(t,e,n,a){n=wa(n,e);var r,o=t.params,i=o.stacked,l=o.chartObj,s=o.yscale,c=l.dataObject,u=l.renderer[e].barDatasetIndex?l.renderer[e].barDatasetIndex():0,d=o.commonPlotOptions,h=Ui(l,a,n).name,f="bullet"==h,p=(l.seriesdata[n]||l.seriesdata[0]).plotoptions,g=p&&p.levelMarker?Rn(d.levelMarker,p.levelMarker,!0):d.levelMarker,v=d.levelMarker||{},m=l.barscale2.bandwidth()||0,y=+(d.bandWidth||null)||(f?m/3:m),b=+(v.bandWidth||m),x=+(v.maxBandWidth||m),C=$n(d.maxBandWidth,l.barscale1,l);C=+((C=C<0?null:C)||m),r=Xe(b,x,m),y=Xe(y,C,m);var k,w=Ge(0,(m-y)/2),_=Ge(0,(m-r)/2);if(i){var S=c.allChartTypes,O=c.getStackGroup().filter((function(t){return t.some((function(t){return!l.seriesdata[t].disabled&&Cl(S[t])}))}));k=c.categoryHierarchy?0:$d(O,e)}else k=0;var A={stacked:i,categories:o.xscale.domain(),axisrotated:o.axisrotated,bandwidth1:o.xscale,bandwidth2:l.barscale2,barDatasetIndex:u,padding:w,yscale:s,hasNegValue:o.hasNegValue,yaxiscolumnorder:o.yaxiscolumnorder,addRangeBand:function(){return s.bandwidth?s.bandwidth()/2:0},barWidth:y,charttype:h,levelMarker:g,levelMarkerWidth:r,levelMarkerPadding:_,stackGroupIndex:k};return l.renderer[e].commonOption=A,A}function Wm(t,e){var n=(t.data||t).slice(),a=n.splice(0,n.length);return null!=e&&a.push(e),a}function Vm(t,e,n,a,r){"plot"==r?t.plotValues.push({data:e,text:n}):t["".concat(r,"Values")].push({id:e,text:n,x:a[0],y:a[1]})}function Ym(t,e,n,a,r,o){return t+n>r&&(t-=t+n-r),e+a>o&&(e-=e+a-o),[t,e]}function Um(t,e,n){var a=t["".concat(n,"Values")];return a.indexOf(a.filter((function(t){return"plot"===n?ha(t.data)==ha(e):t.id==e}))[0])}function Gm(t,e,n,a,r){if(t){var o=t.children,i=t.config,l=void 0===i?{}:i,s=(t.data,l.x),c=void 0===s?0:s,u=l.y,d=void 0===u?0:u,h=[e[0]+zn(c,[n]),e[1]+zn(d,[n])];t.event&&a.annotation.events.push({parser:t,xy:h,data:n,conf:r}),o&&o.length&&o.forEach((function(t){return Gm(t,h,n,a,r)}))}}function Xm(t){var e=t.instance,n=this.chart.systemConf.chart.brush;Sc(e._selection,n.selectionArea)}function Zm(t,e){var n=this.chart.eventHandler;null!==n.activeBrushComponent&&(n.activeBrushComponent="plot");var a=this.getData(t,e.type,e.selection),r=a.point;("start"===e.type||r.x||r.y)&&this.associateBehaviours(t,e.type,a,e.selection,e)}function qm(t,e,n,a){var r=this.chart,o=t.instance,i=o.options.type,l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={};if(t)if(t=Ma(t),"xy"===e){var o=_slicedToArray(t,2),i=o[0],l=o[1];r={x:l[0]-i[0]>n,y:l[1]-i[1]>n}}else t[1]-t[0]>n&&(r[e]=!0);else a&&("xy"===e?r.x=r.y=!0:r[e]=!0);return Object.keys(r).filter((function(t){return r[t]}))}(n,Av(i,r.axes.rotated),Oe,a);return o.brushedAxes=l,zv.GET_DOMAIN_INFO(n,l,i,r)}function $m(t,e){var n=this.chart;n.eventHandler.eventManager;tv(this.chart),n.eventHandler.tooltipElement.hide(),n.eventHandler.handlers.mouseout.call(n.eventHandler)}wn.setComponent("annotation",Hm),Hm.draw=function(t,e){var n=t.systemConf.notes,a=na(n)&&!0===n.enabled;if(t.notesParent=new Array(0),a){var r=t.dataObject.isPolarAxisCategory,o=t.dataObject.isFlowChartCategory,i=wa(n.chartValues,[]),l=[];if(i.forEach((function(e){Hm.addNotes(t,{coordinate:[e.x,e.y],conf:e})})),t.dataObject.annotation.forEach((function(t){var e=t.seriesIndex;l[e]=l[e]||[],l[e].push(t)})),t.isAxisCategory||r||t.isGeoMap||o)for(var s,c,u,d,h,f,p,g,v,m,y,b,x,C=function(){if(s=t.renderer[k],"image"===t.plot.renderer.mode&&Ee.setRendererProp(t,s,t.seriesdata,k,k,{image:!0}),c=t.rendererConf[k].params,d=c.xscale,h=c.yscale,f=c.stacked,p=c.datasetIndex,g=c.legendOrderIndex,c.rendererIndex,v=c.axisrotated,m=c.yaxiscolumnorder,b=t.chartTypes[p].value,t.isGeoMap||o||(y=t.dataset.getDataType("x")==To?d.domain():t.dataObject.getCategories("x")),Cl(b))x=Nm(t.rendererConf[p],p,g),u=function(e,n,a){return[t.dataObject.getTransRectValue("x",e,n,a,x),t.dataObject.getTransRectValue("y",e,n,a,x)]};else{var n=c.isRangeChart?1:null,a=r?[t.plotarea_approx.x,t.plotarea_approx.y]:[0,0];u=function(e){return[t.dataObject.getXYvalue(v,f,d,h,m,e,"x",null,n)+a[0],t.dataObject.getXYvalue(v,f,d,h,m,e,"y",null,n)+a[1]]}}e=Hm.preprocessAnnotations(t.seriesdata,p,u,e,t,c,y,l[k])},k=0,w=t.seriesdata.length;k<w;k++)C();e.forEach((function(e){Hm.addNotes(t,e)})),t.divScroll&&t.divScroll.defaultScroll&&(t.divScroll.defaultScroll(t,"addorremoveseries"),Ar.CHROME&&t.divScroll.fixScrollView(!0,t.canvasarea,t))}return e=[]},Hm.addNotes=function(t,e){var n,a,r,o,i=t.systemConf.notes,s=t.plotarea,c=t.canvasarea,u=wa(t.defaultScroll&&t.defaultScroll.dimension.width,c.width),d=wa(t.defaultScroll&&t.defaultScroll.dimension.height,c.height),h=e.coordinate,f=e.basedOn||"chart",p=e.data,g=e.conf||{},v=!t.defaultScroll&&e.disabled,m=wa(g.type,i.type,"stickyNote"),y="block"===f||"plot"===f?s:c,b=g.overflow||i.overflow||"scroll";"block"===f&&(r="scroll"===b?"auto":"hidden",n=Xa(i.maxWidth||"100%",y.width)),"block"===f&&(o="scroll"===b?"auto":"hidden",a=Xa(i.maxHeight||"10%",y.height));var x="plot"==f?ha(p)+wa(e.index,""):"block"==f?jn(g,""):ha(e.conf);x="plot"!=f&&null!=g.id?g.id:f+x.replace(/\`/gi,"_tilde_").replace(/\~/gi,"_acute_").replace(/\!/gi,"_exclamation_mark_").replace(/\@/gi,"_at_").replace(/\#/gi,"_hash_").replace(/\$/gi,"_dollar_").replace(/\%/gi,"_percent_").replace(/\^/gi,"_caret_").replace(/\&/gi,"_ampersand_").replace(/\*/gi,"_asterisk_").replace(/\(/gi,"_left_parenthesis_").replace(/ /gi,"_space_").replace(/\)/gi,"_right_parenthesis_").replace(/\_/gi,"_underscore_").replace(/\|/gi,"_pipe_").replace(/\+/gi,"_plus_").replace(/\-/gi,"_minus_").replace(/\=/gi,"_equal_").replace(/\?/gi,"_question_mark_").replace(/\;/gi,"_semi_colon_").replace(/\:/gi,"_colon_").replace(/\'/gi,"_single_quote_").replace(/\"/gi,"_double_quote_").replace(/\,/gi,"_comma_").replace(/\./gi,"_dot_").replace(/\</gi,"_less_than_").replace(/\>/gi,"_greater_than_").replace(/\{/gi,"_left_brace_").replace(/\}/gi,"_right_brace").replace(/\[/gi,"_open_bracket_").replace(/\]/gi,"_close_bracket_").replace(/\\/gi,"_backslash_").replace(/\//gi,"_forwardslash_"),g.id=x;var C,k,w,_=Hm["stickyNote"===m?"stickyNote":"customNote"](),S=function(t,e,n){var a=e.conf&&e.conf.batch,r=t.batch,o=t.options,i=a&&r[a]?Rn(o[n],r[a],!0):o[n];return Rn(i,e.conf||{},!0)}(i,e,m),O=S.parent,A=!1;O?((A=_c(O=(O=$n(O,t)).isD3Selection?O:l(O)))?(w=dc(O,"g",[e],"#","id",x),k=dc(w,A?"g":"div",[e],"#","id","plot_notes_main"),w.attr("clip-path","url(".concat(t.defsLocation,"#").concat(t.plotClippathID,")"))):k=dc(O,A?"g":"div",[e],"#","id",x),k.style("display",v?dn:null)):((C=dc(t.notes,"div",[1],"#","id",f)).styles({width:"0",height:"0"}),k=dc(C,"div",[e],"#","id",x)),"plot"==f&&t.notesParent.push(w||k);var T=k.node().getAttribute("style");if(A||T&&t.racing&&t.racing.syncTransition||k.styles({display:v?dn:null,position:"absolute",left:"0",top:"0","overflow-x":r,"overflow-y":o,"max-width":na(n)?n+un:pn,"max-height":na(a)?a+un:pn}),t._annotation=null,k.attr("class","zc-annotation"),_.chartObj(t).conf(S),vc(k,[S,t.systemConf.canvas,wr],!A),k.call(_),!v){var P=k.node(),E="stickyNote"===m?Ge(parseFloat(k.selectAll(".head").style("width")),parseFloat(k.selectAll(".body").style("width"))):0,L="stickyNote"===m?parseFloat(k.selectAll(".head").style("height"))+parseFloat(k.selectAll(".body").style("height")):0;h=h.map((function(e,n){var a="plot"===f?e+t.plotarea[0==n?$r:Jr]:$n(e,t,g,P);return isNaN(+a)?Xa(e,0==n?u:d,0):a})),h=$n("plot"===f||"block"===f?S.transform:null,t,g,P,h)||h,_.coordinate(h),h=Ym(h[0],h[1],E,L,u,d),A?k.attr("transform",lu(h)):T&&t.racing&&t.racing.syncTransition?(k.interrupt(),k.transition(t.racing.syncTransition).styles({left:h[0]+un,top:h[1]+un})):k.styles({left:h[0]+un,top:h[1]+un});var M=!!(p&&t&&t.annotation&&t.annotation.events)&&t.annotation.events.some((function(t){return t.data._key===p._key}));"plot"!==f||M||Gm(t._annotation,h,p,t,S);var D="plot"==f?p:x,I=Um(i,D,f,e.index);return na(e.index)||-1!=I||Vm(i,D,"",e.coordinate,f),k}var R=!!(p&&t&&t.annotation&&t.annotation.events)&&t.annotation.events.some((function(t){return t.data._key===p._key})),z=p.seriesIndex||0,j=!1!==t.seriesdata[z].disabled;"plot"!==f||R||j||Gm(t._annotation,h,p,t,S)},Hm.preprocessAnnotations=function(t,e,n,a,r,o,i){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];if(!r.destroying){var s=r.systemConf.notes;if(!na(s)||!na(s.enabled)||!1===s.enabled)return a;var c=s.plotValues,u=r.isAxisCategory,d=r.isNonAxisMultiSeriesCategory,h=r.dataset,f=o.stacked,p=r.plotarea,g=o.yaxiscolumnorder,v=t[e],m=vl.pointInRectangle,y=r.dataObject.isHierarchy?v:v.data,b=(u||d)&&t.length>1?v.seriesname:null,x=r.chartTypes[e].name,C=r.dataObject.seriesNames||(r.dataObject.seriesNames=r.seriesdata.map((function(t){return t.seriesname}))),k=u&&t.length>1?c.filter((function(t){var e=t.data[t.data.length-1];return b==e||-1==C.indexOf(e)})):c;k.forEach((function(e,a){for(var o=!1,l=e.data,s=0,c=u?y.length:1;s<c&&!o;s++)for(var k=0,w=y[s].length;k<w&&!o;k++){var S=Wm(A=y[s][k],b);if(ha(S)==ha(l))o=!0,_(O=n(A,s,k),S,e,!(!u||m(O,p))||(u||d?v.disabled:A.disabled)||!il(A,r))}if(u&&!o&&("bar"!==x||-1!=i.indexOf(h.getX(l)))){o=!0;var O,A=Wm(l);f&&(A.y=h.getY(l,g),A.y0=0),_(O=n(A,0,k),A,e,!(!u||m(O,p))||!(u&&t.length>1&&-1==C.indexOf(l[l.length-1]))&&v.disabled)}if(!o&&"sunburst"===x){var T=[b,v.value];ha(T)===ha(l)&&_(n(v),T,e,v.disabled)}if(!o&&x===ji){var P=r.renderer[0].getSankeyNodeByPoint(l);if(P){var E=r.dataset,L=[];L[E.xidx]=L[E.yidx(0)]=P.name,L[E.zidx]=P.value,ha(L)===ha(l)&&_(n(l),L,e)}else _([null,null],l,e,!0)}})),l.forEach((function(t){var e=t.subSeriesIndex,a=t.itemIndex,o=t.data,i=o.data||o,l=o[s.dataIndex],c=n(o,e,a),h=!(!u||m(c,p))||(u||d?v.disabled:o.disabled);h=h||!il(o,r),Ma(l).forEach((function(t,e){var n=$n(t,i,r)||{};_(c,i,_objectSpread(_objectSpread({},n),{},{data:i}),h,e)}))}));var w=r.userdata.seriesdata.chartdata;return w&&k.length&&r.seriesAddRemoveDetails&&a.map((function(t){var e=!1;w.map((function(n){n.seriesname===t.data[2]&&(e=!0)})),e||(t.disabled=!0)})),a}function _(t,e,n,r,o){a.push({coordinate:t,data:e,conf:n,disabled:r,basedOn:"plot",index:o})}},Hm.addBlockAnnotations=function(t){var e=t.systemConf.notes;if(na(e)&&!1!==e.enabled){Er("notes",t.systemConf,t.globalProp);var n,a,r=(e=t.systemConf.notes).blockValues,o=t.plotarea,i=Xa(e.maxWidth||"100%",o.width),l=Xa(e.maxHeight||"10%",o.height),s=o.width,c=o.height,u=o.left,d=o.top,h=o.bottom;r.forEach((function(r){var f=r.hAlign,p=r.vAlign,g=r.overflow||e.overflow||"scroll",v=f===Qr,m=f===$r,y=p===Jr,b=p===Kr;if(!(a&&y||n&&b)){var x=Hm.addNotes(t,{coordinate:[function(t,e,n){var a=n.getBoundingClientRect(),r=v?u+s:m?u:u+s/2,o=v?a.width:m?0:a.width/2;return Ge(r-o,0)},function(t,e,n){var a=n.getBoundingClientRect();return(y?d:d+c)-(y?0:a.height)}],conf:r,basedOn:"block"}),C=x.node(),k=C.getBoundingClientRect(),w=k.height;k.width;"fire"===g&&(C.scrollHeight>l||C.scrollWidth>i)?x.remove():(o.height=c-w,y?o.top=d+w:b&&(o.bottom=h+w)),a=a||y,n=n||b}}))}},Hm.customNote=function(){var t,e,n;function a(e){e.each((function(e){var a=this;l(this).each((function(){var r=l(a);if(t.parser&&(e.conf.parser||!e.conf.htmlEl)){var o=$n(t.parser,n,e.conf||t);return Kf(o,r),void(n._annotation=o)}var i=$n(t.htmlEl,n,e.conf||t);if(i&&(i.isD3Selection||1===i.nodeType)){r.html("");var s=i.isD3Selection?i.node():i;1===s.nodeType&&a.appendChild(Ar.IE?s.cloneNode(!0):s)}else r.html(i)}))}))}return a.coordinate=function(t){return arguments.length?(e=t,a):e},a.conf=function(e){return arguments.length?(t=e,a):t},a.chartObj=function(t){return arguments.length?(n=t,a):n},a},Hm.stickyNote=function(){var t,e,n;function a(a){a.each((function(a){var r=l(this),o=t.systemConf.notes,i=t.canvasarea.width,s=t.canvasarea.height,c=t.notes,u=a.basedOn||"chart",d=(a.data,a.coordinate),h="string"==typeof d[0]&&d[0].indexOf("%")>-1,f="string"==typeof d[1]&&d[1].indexOf("%")>-1,g=e.text,v=c.selectAll(".head").size(),m=e.color,y="open"===e.mode,b=Jn(e.bodyWidth,100),x=Jn(e.bodyHeight,100),C=Jn(e.headWidth,15),k=Jn(e.headHeight,15),w=y?0:1,_="plot"===u?a.conf.data:a.conf;m=ua(m)?m[v%m.length]:m,_._color||(_._color=m);z().on("drag",(function(t,e){if(!jt().defaultPrevented){var a=l(this.parentNode),r=parseFloat(a.style("left"))+jt().x,c=parseFloat(a.style("top"))+jt().y,d=Ge(w%2!=0?0:b,C),p=(w%2!=0?0:x)+k;r=r>i-d?i-d:r<0?0:r,c=c>s-p?s-p:c<0?0:c,n[0]=r,n[1]=c;var g=r+un,v=c+un;if(a.styles({left:g,top:v}),"plot"!=u){var m=a.attr("id"),y=Um(o,m,u);-1!=y&&(o.chartValues[y].x=h?"".concat(r/i*100,"%"):r,o.chartValues[y].y=f?"".concat(c/s*100,"%"):c)}}}));r.attr("class","group").styles({width:0,height:0,"z-index":2});var S=dc(c,"textarea",[1]);S.styles({width:b+un,height:x+un,position:"absolute","border-color":hn,"border-radius":(e.bodyBorderRadius||0)+un,"background-color":hn,overflow:"hidden",display:dn,resize:dn,"z-index":2,outline:dn}).on("blur",(function(t,e){var n=S.attr("eleID");if(S.style("display",dn),null!=n){var a=l("#".concat(n));a.selectAll(".body").style("color",null),a.style("z-index",2)}})).on("input",(function(){var t=l(this);if(t.style("display")!==dn){var e=l("#".concat(t.attr("eleID"))),n=e.selectAll(".body"),a=e.attr("id"),r=S.node().value,i=e.datum(),s=i.basedOn||"chart",c=i.data;n.text(r);var u="plot"==s?c:a,h=Um(o,u,s);-1==h?Vm(o,u,r,d,s):o["".concat(s,"Values")][h].text=r}})).text(g);var O=dc(r,"div",[1],".","class","head");O.styles({width:C+un,height:k+un,border:e.border,"border-radius":(e.headBorderRadius||0)+un,"z-index":"auto","background-color":_._color});var A=function(t,e){if(!jt().defaultPrevented){var a=w%2==0,r=l(this.nextSibling),o=l(this.parentNode);if(S.on("blur")(),a)o.transition().delay(250).duration(0).styles({left:n[0]+un,top:n[1]+un});else{var u=Ym(parseFloat(o.style("left")),parseFloat(o.style("top")),b,k+x,i,s);o.styles({left:u[0]+un,top:u[1]+un})}r.style("color",null).transition().ease(p).styles({width:a?0+un:b+un,height:a?0+un:x+un,display:a?null:"block"}),r.transition().delay(250).style("display",a?dn:null),c.selectAll(".group").style("z-index",1),o.style("z-index",2),w++}};Iu(O,{click:A},{tap:A});var T=dc(r,"div",[1],".","class","body");T.styles({width:y?b+un:"0",height:y?x+un:"0",display:y?null:dn,border:e.border,overflow:"hidden","box-shadow":e.shadow,"border-radius":(e.bodyBorderRadius||0)+un,"z-index":"auto","background-color":_._color}).text(g),Iu(T,{click:A=function(t,e){var n=l(this),a=l(this.parentNode);S.on("blur")(),S.styles({display:null,left:a.style("left"),top:parseFloat(a.style("top"))+k+un,color:a.style("color"),"font-size":a.style("font-size"),"font-family":a.style("font-family"),"font-weight":a.style("font-weight"),"font-style":a.style("font-style")}).attr("eleID",a.attr("id")),S.node().value=n.text(),S.node().focus(),n.style("color",hn),c.selectAll(".group").style("z-index",1),a.style("z-index",2),S.style("z-index",3)}},{tap:A}),dc(r,"div",e.htmlEl?[1]:[],".","class","zcannotation-custom").styles({position:"absolute",left:0,top:0}).each((function(){var n=Hm.customNote().conf(e).chartObj(t);l(this).call(n)}))}))}return a.chartObj=function(e){return arguments.length?(t=e,a):t},a.conf=function(t){return arguments.length?(e=t,a):e},a.coordinate=function(t){return arguments.length?(n=t,a):n},a};var Qm=0,Km=function(){function t(e,n,a,r){_classCallCheck(this,t),this.label=n,this.button=a,this.parent=r,this.className=e,this.init()}return _createClass(t,[{key:"init",value:function(){var t=this,e=$s(t.button,5),n=t.className?"."+t.className:".custom-button-".concat(Qm++),a=t.group=wc("g",n,[1],t.parent),r=t._rect=wc("rect",".custom-button-rect",[1],a),o=t._text=wc("text",".custom-button-text",[1],a);o.text(t.label.text).attrs({dy:".9em"}),Sc(t._text,t.label.style);var i,l=Ga(o),s=wa(t.button.width,l.width),c=wa(t.button.height,l.height),u={width:s+e.left+e.right,height:c+e.top+e.bottom},d={x:u.width/2-l.width/2,y:u.height/2-l.height/2};(i=t.button).radius&&(i.rx=i.ry=i.radius),Sc(r,_objectSpread(_objectSpread({},u),t.button),Oe,{width:"width",height:"height"}),o.attrs(d),t.group.styles({cursor:fn}),t.bounds={text:_objectSpread(_objectSpread({},d),{},{width:l.width,height:l.height}),rect:u}}},{key:"translate",value:function(t){this.group.attr("transform","translate(".concat(t.join(" "),")"))}},{key:"show",value:function(){this.group.style("display",null),this.visible=!0}},{key:"hide",value:function(){this.group.style("display","none"),this.visible=!1}}]),t}();function Jm(){var t,e=this,n=e.chart,a=n.systemConf.chart.brush,r=e.behaviours,o=r.PLOT_BRUSH,i=r.PLOT_ZOOM;a.x=a.y=null,$m.call(e),i?i.instance.reset():n.scroll&&n.scroll.visible&&"y"!==a.type?(n.scroll.visiblePointCount=null,n.scroll.brushInstance.setSelection(n.scroll.brushInstance.getRange())):(t=qm.apply(e,[o,null,null,!0]),o.instance.brushed=!1,zv.FILTER_CHART(t,n)),e.resetButton.hide(),o&&o.instance.updateExtent([[0,0],[n.plotarea.width,n.plotarea.height]]),n.positionEventTrackerElement()}function ty(t){var e=function(t,e){var n=t.scroll,a=t.systemConf.chart,r=a.brush,o=a.behaviour,i=t.axes&&t.axes.x&&t.axes.x.scale,l=t.overview&&t.overview.axes&&t.overview.axes.x.scale.actualRange?t.overview.axes.x.scale.actualRange:i&&i.range(),s=n&&n.brushInstance&&n.brushInstance.getSelection();if(l&&s)var c=Number(Math.min(l[0],l[1]).toFixed(5)),u=Number(Math.max(l[0],l[1]).toFixed(5)),d=Number(Math.min(s[0],s[1]).toFixed(5)),h=Number(Math.max(s[0],s[1]).toFixed(5));var f=o&&o.resetButton,p=r.resetButton,g=t.axes.x&&t.axes.x.zoomScale&&t.axes.x.zoomScale.domain(),v=n&&!(d>c||h<u),m=g&&0===g[0]&&100===g[1],y=e.resetButton&&e.resetButton.visible,b=fa(e.behaviours,"PLOT_BRUSH.instance.brushed"),x=n&&n.visible&&"y"===a.brush.type&&!(b||y);if(v||m||x)return void(e.resetButton&&e.resetButton.hide());if(!(r.enabled&&p&&p.enabled||f&&f.enabled))return;var C=Rn(f,p,!0),k=ny(C,t,na(e.behaviours.PLOT_ZOOM)),w=e.resetButton=new Km("custom-button-0",k.label,k.button,t.staticPaneSVG.select(".eventgroup"));return Vr(w.group,{config:C,chartObj:t}),w.group.classed("zmbtn",!0),ey(t),function(t,e,n){var a=n.events,r=e.behaviouralEvents.eventManager;t.instance=t.group,t.defaultBehaviour={click:function(t,e,n){var a=n.behaviouralEvents.eventManager,r=a.resetButton;Jm.call(a,r)},tap:function(t,e,n){var a=n.behaviouralEvents.eventManager,r=a.resetButton;Jm.call(a,r)}},t.customBehaviour={click:a&&a.click,tap:a&&a.tap};var o=jt(),i={click:function(){o.type="click",l(e,o)},tap:function(){o.type="tap",l(e,o)}};r.resetButton.listenerTypes=M(["click","tap"]),r.attachListeners(r.resetButton,i);var l=function(e,n){var a=e.behaviouralEvents.eventManager,r=a.getBehaviours(t,n.type),o=!0;ua(r)&&r.length&&r.forEach((function(r){"custom"===r.type?($n(!0,r.behaviour,a,t,n,e),o=n.allowDefault):o&&r.behaviour.apply(a,[t,n,e])}))}}(e.resetButton,t,C),w}(this.chart,this);e&&e.show()}function ey(t){var e=t.systemConf.chart,n=e.brush,a=e.behaviour,r=a&&a.resetButton,o=n.resetButton,i=Rn(r,o,!0),l=t.behaviouralEvents.eventManager,s=l.resetButton;if(l.resetButton){var c=wa($n(i.x,t,s.bounds.rect),t.plotarea.left+t.plotarea.width-s.bounds.rect.width),u=wa($n(i.y,t,s.bounds.rect),10);s.translate([c,u])}}var ny=function(t,e,n){var a=t.border,r=t.label,o=a.show,i=o?a.radius:0,l=Gr(a.style,a.size),s=[r,e.systemConf.chart,e.systemConf.canvas,{fontColor:"white",fontSize:11},wr];return{label:{text:wa(r.text,n?"Reset Zoom":"Reset Brush"),style:_objectSpread(_objectSpread({},r),{},{fill:r.fontColor||"white","font-size":r.fontSize,"font-family":Kn(s,"fontFamily"),"text-shadow":Kn(s,"textShadow")})},button:{radius:i,fill:t.fillColor,"fill-opacity":t.fillOpacity,stroke:a.color,"stroke-width":o?a.size:0,"stroke-dasharray":l,"stroke-linecap":Xr(a.lineCap,l),marginTop:r.marginTop,marginRight:r.marginRight,marginBottom:r.marginBottom,marginLeft:r.marginLeft,filter:Oc(t.shadow,e)}}};function ay(t,e,n){var a=this,r=t.instance,o=a.behaviours.PLOT_BRUSH,i=a.chart,l=e.point;a.behaviours;i.disableAnimation=!1,Oa(l,(function(t,e){Oa(t,(function(t,n){var a=tc(i,e,n);a.scale.ordinalRange&&(a.scale.ordinalRange=null)}))}));var s=[[0,0],[i.plotarea.width,i.plotarea.height]];o&&o.instance.updateExtent(s),i.positionEventTrackerElement(),r.updateExtent(s),i.zooming=!1,i.brushing=!1,i.scroll&&i.scroll.scrollDomain&&(i.scroll.visiblePointCount=i.scroll.scrollDomain.length),this.chart.eventHandler.oldBrushComponent="",this.chart.eventHandler.activeBrushComponent="",this.chart.eventHandler.selectionDomain={}}function ry(t,e,n){var a=this.chart,r=e.point,o=fa(this,"behaviours.PLOT_ZOOM.instance");if(a.scroll&&a.scroll.visible&&!a.scrolling&&r.x){var i,l=r.x[0].domain;if(l&&!l.length){var s,c,u=a.scroll.brushScale,d=u.bandwidth(),h=u.ordinalRange,f=u.bandwidth(),p=u.maxBandWidth1,g=p?Xe(f,p):f,v=h.length>1?Ze(h[1]-h[0]):0,m=Ze(v-g),y=a.emptySelectionDomain,b=a.axes.rotated,x=a.axes.x.reversed;if(y.start&&y.end){var C=f||0,k=u(y.start)+C/2,w=u(y.end)+C/2;i=[k+(w-k)/2,k+(w-k)/2]}else{var _=.1*m;!b&&x||b&&!x?(s=u(y.start)-_,c=u(y.end)+d+_,y.start?y.end||(s=c=u(y.start)-_):s=c=u(y.end)+d+_,i=[c,s]):(s=u(y.start)+d+_,c=u(y.end)-_,y.start?y.end||(s=c=u(y.start)+d+_):s=c=u(y.end)-_,i=[s,c])}}else i=oy(a,l,n);(o&&a.zooming||!o)&&(a.scroll.scrollDomain=l,a.scroll.brushInstance.setSelection(i))}}function oy(t,e,n){var a,r=t.scroll.brushScale,o=(r.origRange||r.range()).slice(0).sort(B);if(ua(e)&&r.bandwidth&&(e=[e[0],e[e.length-1]]),r.bandwidth&&n&&n.invert){var i,l="width",s="X";t.axes.rotated&&(l="height",s="Y"),a=[i=n["invert".concat(s)](0),t.plotarea[l]/n.k+i]}else e&&(a=Hp(t,e,0,"x",!1,!1,r));if(r.bandwidth&&(!n||!n.invert)){var c=r.domain()[0],u=r.domain()[r.domain().length-1];e[0]===c&&e[1]===u&&(a[0]=o[0],a[1]=o[1])}return a&&(a.sort(B),a[0]=Ge(a[0],o[0]),a[1]=Xe(a[1],o[1])),a}var iy=[],ly=[];Ar.isTouchDevice?ly=[$m]:iy=[$m];var sy={LISTENER:{start:Zm,brush:Zm,end:Zm},DATA_FINDER:{start:qm,brush:qm,end:qm},BEHAVIOUR:{start:[].concat(_toConsumableArray(iy),[Xm]),brush:[function(){this.chart.brushing=!0}].concat(_toConsumableArray(ly)),end:[function(t){t.instance.reset()},function(t,e,n){var a=this.behaviours,r=this.chart,o=t.instance,i=r.systemConf.chart.brush,l=e.point,s=r.scroll&&r.scroll.settings.smooth;if(n){if(a.PLOT_ZOOM){var c=im(n,o.options.type),u=a.PLOT_ZOOM.instance,d=u.getTransform();u.zoomToBounds(c.map((function(t){return d.invert(t)})))}else s||function(t,e,n){Oa(t,(function(t,a){Oa(t,(function(t,r){if(t.domain){var o=tc(n,a,r),i="".concat(a,"[").concat(r,"]"),l=fa(e,i),s=Ma(t.domain);na(l)||pa(e,i,l={}),t.dataType===To?l.categories=s:(l.minRange=s[0],l.maxRange=s[1]),o.domain=t.domain||o.baseScale.domain()}}))}))}(l,i,r),zv.FILTER_CHART(l,r);o.updateExtent([[0,0],[r.plotarea.width,r.plotarea.height]])}},ry,ty,ay]},LISTENER_TYPES:M(["start","brush","end"]),SUPPORTED:function(t){return t.isAxisCategory&&!t.isPolarAxisCategory},UPDATE:function(){ey(this.eventManager.chart)}};function cy(t,e,n){this.target=t,this.type=e,this.selection=n}function uy(){var t=jt();t.cancelable&&t.preventDefault()}function dy(t){return t.touches}function hy(){var t=jt();return!t.ctrlKey&&!t.button}function fy(t,e){var n=function(){for(var t,e=jt();t=e.sourceEvent;)e=t;return e}();n.changedTouches&&(n=n.touches[e]);var a=t.ownerSVGElement||t;if(a.createSVGPoint){var r=a.createSVGPoint();r.x=n.clientX,r.y=n.clientY;var o=[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y];return dy(jt())&&!Ar.ANDROID&&Ar.uiwebview&&(o[0]+=window.pageXOffset,o[1]+=window.pageYOffset),o}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function py(t){var e,n=F("start","brush","end"),a=hy;function r(t,e,a){var r=new cy(o,e,t);zt(r,n.apply,n,[e,a,[r,a]])}function o(n){var i,s,c=wc("rect",".selection",[1],n).attrs({fill:"#777","fill-opacity":.3,stroke:"#fff","shape-rendering":"crispEdges"}),u=function(e){switch(t){case"X":return[e[0][0],e[1][0]];case"Y":return[e[0][1],e[1][1]];default:return e}},d=function(n){var a=null,r=null,o=null,i=null;if(null!==n)switch(t){case"X":a=n[0][0],o=n[1][0]-n[0][0],r=e[0][1],i=e[1][1]-e[0][1];break;case"Y":a=e[0][0],o=e[1][0]-e[0][0],r=n[0][1],i=n[1][1]-n[0][1];break;default:a=n[0][0],r=n[0][1],o=n[1][0]-n[0][0],i=n[1][1]-n[0][1]}c.attrs({width:o,height:i,x:a,y:r})},h=l(window),f=n.node(),p=function(){var t,a,o,l,c,h,p;uy(),jt().stopImmediatePropagation(),dy(jt())?(i=fy(f,0),t=fy(f,1)):t=Pu(f),o=t,l=Xe((a=i)[0],o[0]),c=Xe(a[1],o[1]),h=Ge(a[0],o[0]),p=Ge(a[1],o[1]),s=[[l=Ge(l,e[0][0]),c=Ge(c,e[0][1])],[h=Xe(h,e[1][0]),p=Xe(p,e[1][1])]],d(s),r(u(s),"brush",n)},g=function(){uy(),h.on("mousemove.brush",null),h.on("touchmove.brush",null),h.on("mouseup.brush touchend.brush",null),s&&r(u(s),"end",n)};n.on("mousedown.brush, touchstart.brush",(function(){if(a.apply(this,arguments)){uy(),i=Pu(f),d(s=[i,i]),r(u(s),"start",n);var t=jt(),e=t.touches;dy(t)&&e.length>1?h.on("touchmove.brush",p,!0):h.on("mousemove.brush",p,!0),h.on("mouseup.brush touchend.brush",g,!0)}})),o.move=function(e,n){n?(r(u(s),"start",e),function(e){if(null!==e)switch(t){case"X":s[0][0]=e[0],s[1][0]=e[1];break;case"Y":s[0][1]=e[0],s[1][1]=e[1];break;default:s=_toConsumableArray(e)}}(n),r(u(s),"brush",e),r(u(s),"end",e)):s=null,d(s)}}return o.extent=function(t){return arguments.length&&(e=t),o},o.on=function(){var t=n.on.apply(n,arguments);return t===n?o:t},o.handleSize=function(){},o.filter=function(t){return arguments.length?(a="function"==typeof t?t:a,o):a},o}wn.setComponent("_chartBrushHandlers",sy),Tr.brush=function(t){return{enabled:!1,type:"x",pan:!0,snap:!1,selectionArea:{fillColor:"#3a8aea",fillOpacity:.2,strokeColor:"#3a8aea",dashStyle:"",strokeWidth:.8},resetButton:{enabled:!0,fillColor:"#3c3c3c",label:{marginTop:6,marginRight:10,marginBottom:6,marginLeft:10,fontSize:14,fontColor:"white",fontWeight:500},border:{show:!0,size:1,radius:2,color:"transparent"}}}};var gy=Object.freeze({brushX:function(){return py("X")},brushY:function(){return py("Y")},brush:function(){return py("XY")}}),vy={brush:Ct,brushX:kt,brushY:wt},my={extent:[[0,0],[0,0]],handleSize:6,type:"xy",snap:null,element:null,metaKey:null,styles:{track:{},selection:{},handles:{}}},yy=_createClass((function t(e){_classCallCheck(this,t),this.settings=_objectSpread(_objectSpread({},my),e)})),by=function(){function t(e){_classCallCheck(this,t);var n=this.options=e.settings;if(this.type=this.options.type,this.initialize(),this.hookCount=0,this._snap={},na(n.behaviour)){if(!t.behaviours.has(n.behaviour))throw new TypeError("".concat(n.behaviour," behaviour not found"));this.behaviour=t.behaviours.get(n.behaviour)}n.element&&n.element.isD3Selection&&this.bindTo(n.element)}return _createClass(t,[{key:"initialize",value:function(){var e,n,a=this,r=a.options,o=Ar.isTouchDevice&&!0===r.multitouch,i=r.extent,l=a.type=wa({x:"brushX",y:"brushY",xy:"brush"}[a.type],"brush"),s=a.d3_brush=a.d3_brush||(o?gy:vy)[l]();ua(i)&&ua(i[0])&&ua(i[1])&&s.extent(i),r.metaKey&&s.filter((function(){return!jt()[r.metaKey]})),s.handleSize(wa(r.handleSize,6)),e=a._signal=F("start","brush","end"),n=a.behaviour_signal=F("init","start","brush","end");var c,u=[0,0],d=!1;s.on("start",(function(){var t,r=jt(),o=r;if(!r.selection)return!1;for(a.brushed=d=!1;t=o.sourceEvent;)o=t;var i=o&&o.target&&o.target.getAttribute?o.target:null;c=i&&/handle/.test(i.getAttribute("class"))?"resize":"move",r.mode=c,n.call("start",a,r),e.call("start",a,r)})),s.on("brush",(function(){if(t.isInvalidBrush())return!1;var r=jt();r.mode=c;var o="brush"===a._snap.when&&hr(a._snap.calculate)&&a._snap.calculate(r);if(o){if(t.isInvalidBrush())return;var i=wa(o,u);a.setSelection(i),u[0]===i[0]&&u[1]===i[1]||(u=r.selection=i,a.positionCustomHandles(u),n.call("brush",a,r),e.call("brush",a,r))}else a.positionCustomHandles(),n.call("brush",a,r),e.call("brush",a,r);r&&r.sourceEvent&&"end"!==r.sourceEvent.type&&(a.brushed=d=!0)})),s.on("end",(function(){if(!t.isInvalidBrush()){var r=jt(),o=a.getSelection(),i="end"===a._snap.when&&hr(a._snap.calculate)&&a._snap.calculate(a,r);if(r.mode=c,i&&o){var l=wa(i,u);a.setSelection(l,a._snap.duration),u[0]===l[0]&&u[1]===l[1]||(u=r.selection=l,n.call("end",a,r,d),e.call("end",a,r,d))}else a.positionCustomHandles(),n.call("end",a,r,d),e.call("end",a,r,d)}}))}},{key:"snap",value:function(t,e,n){this._snap={when:t,calculate:e,duration:n}}},{key:"getSignals",value:function(){return this._signal}},{key:"addHook",value:function(t,e){this.hookCount++;var n="".concat(t,".").concat(this.hookCount);return this._signal.on(n,e),n}},{key:"removeHook",value:function(t){this._signal.on(t,null)}},{key:"addBehaviourHook",value:function(t,e){this.hookCount++;var n="".concat(t,".").concat(this.hookCount);return this.behaviour_signal.on(n,e),n}},{key:"removeBehaviourHook",value:function(t){this.behaviour_signal.on(t,null)}},{key:"bindTo",value:function(t){var e=this,n=e.d3_brush,a=e.options.styles||{},r=t;e.parent_group=r,r.call(n),e._track=r.selectAll("rect.overlay"),e._selection=r.selectAll("rect.selection"),e._handles=r.selectAll("rect.handle"),Sc(e._track,a.track),Sc(e._selection,a.selection),Sc(e._handles,a.handle),!1===e.options.resizer&&r.selectAll("rect.handle").remove(),na(e.behaviour)&&e.behaviour.call(e),e.behaviour_signal.call("init",e)}},{key:"addCustomHandle",value:function(e){var n=this;return e.isD3Selection?n.customHandles=e:"default"===e[0].shape?Sc(n._handles,e[0].style):(n.customHandles=t.ADD_HANDLE(e,n.parent_group).attrs({cursor:function(e){return t.getCursor(e.type)},"pointer-events":"all"}),n.positionCustomHandles(),n.customHandles)}},{key:"positionCustomHandles",value:function(){var t=this,e=t.getSelection();t.customHandles&&(e?t.customHandles.attr("transform",(function(e){var n=t.getCustomHandlePosition(e);return"translate(".concat(n.join(" "),")")})).style("display",null):t.customHandles.style("display","none"))}},{key:"getCustomHandlePosition",value:function(t){var e=this,n=e.getSelection(),a=tr(wa(e.options.extent,e.d3_brush.extent()())),r=0,o=0;if(!1!==t.alignCenter&&(r=a.width/2,o=a.height/2),n)return{e:[n[1],o],w:[n[0],o],n:[r,n[0]],s:[r,n[1]]}[t.type]}},{key:"setSelection",value:function(t,e,n){var a=this,r=a.options.type,o=a.getRange(r),i=n&&n.syncTransition;this.racingStarted&&!n||(this.racingStarted=!!n,t="xy"===r?[[Ge(o[0][0],t[0][0]),Xe(o[0][1],t[0][1])],[Xe(o[1][0],t[1][0]),Xe(o[1][1],t[1][1])]]:[Ge(o[0],t[0]),Xe(o[1],t[1])],jt()&&(jt().selection=t),da(e)&&e>0?a.parent_group.transition().duration(e).call(a.d3_brush.move,t):i?a.parent_group.transition(i).call(a.d3_brush.move,t).on("end",(function(){n.status.currentFrame_positioned=!1})):(a.__checkSameType=!0,a.parent_group.call(a.d3_brush.move,t)))}},{key:"getSelection",value:function(){return jt()&&jt().selection||_t(this.parent_group.node())}},{key:"getRange",value:function(){var t=this.d3_brush.extent()();switch(this.options.type){case"x":return[t[0][0],t[1][0]];case"y":return[t[0][1],t[1][1]];default:return t}}},{key:"hide",value:function(){this.parent_group.attr("display","none")}},{key:"show",value:function(){this.parent_group.attr("display",null)}},{key:"reset",value:function(){this.parent_group.call(this.d3_brush.move,null)}},{key:"destroy",value:function(){var t=this;t.parent_group&&t.parent_group.on(".brush",null),t.parent_group&&t.parent_group.selectAll("rect.overlay, rect.handle, rect.selection").remove(),Oa(t,(function(e,n){t[n]=null,delete t[n]}))}},{key:"update",value:function(t){this.options=t,this.type=wa(t.type,"xy"),this.initialize()}},{key:"updateExtent",value:function(t){ua(t)&&ua(t[0])&&ua(t[1])&&(this.d3_brush.extent(t),this.parent_group&&this.parent_group.call(this.d3_brush))}}],[{key:"isInvalidBrush",value:function(t){var e=jt(),n=e&&e.sourceEvent;return n&&n.type===(t||jt().type)}},{key:"getCursor",value:function(t){return{e:"ew-resize",w:"ew-resize",n:"ns-resize",s:"ns-resize"}[t]}},{key:"ADD_HANDLE",value:function(t,e){var n=wc("g",".handle--custom",t=Ma(t),e);return wc("path",".custom-handle-path",(function(t,e){var n=Ma(t.shape);return ua(t.shape[e])&&(n=t.shape[e]),Ma(n).map((function(n){return{type:t.type,shape:n,i:e}}))}),n).attr("d",(function(t){return t.shape})).each((function(e,n){var a=l(this),r=t[e.i],o=Ma(r.style),i=Ma(r.attributes);a.attrs(wa(i[n],r.attributes)),Sc(a,wa(o[n],r.style))})),n}}]),t}();function xy(t,e){var n=t.options.type,a=e||t.getSelection(),r=Pu(this)["x"===n?0:1],o=a[1]-a[0],i=r-o/2,l=r+o/2,s=_slicedToArray(t.getRange(),2),c=s[0],u=s[1],d=l>u?[u-o,u]:i<c?[c,c+o]:[i,l];t.setSelection(d)}function Cy(t,e){t[0]===t[1]&&(t[1]+=1e-9,t[0]-=1e-9,e.setSelection(t,0))}by.prototype.on=by.prototype.addHook,by.behaviours=L(),by.addBehaviour=function(t,e){if(!na(e))return by.behaviours.remove(t);by.behaviours.set(t,e)},wn.setComponent("BrushD3",by),wn.setComponent("BrushD3Options",yy);var ky={scroll:function(){var t=this,e=0,n=null;this._track.datum({type:"selection"}).on("mousedown touchstart",(function(){var e={scrollType:t.options.type,brushInstance:t,scrollScale:t.options.brushScale,ismousedownTouchstart:!0};null!=(n=t.options.brushSelection)&&"string"==typeof n?$n(n,e):xy.call(this,t)})),t.addBehaviourHook("brush.scroll",(function(){e=t.getSelection()})),t.addBehaviourHook("end.scroll",(function(n){n.sourceEvent&&e[0]===e[1]&&Cy(e,t)}))},reposition:function(){var t,e=this;e.addBehaviourHook("brush.reposition",(function(){return t=e.getSelection()})),e.addBehaviourHook("end.reposition",(function(n,a){n.sourceEvent&&(a||xy.call(e.parent_group.node(),e,t))}))},resizeToMouse:function(){var t=this,e=t.getSelection(),n=t.options.type;t.addBehaviourHook("brush.resizeToMouse",(function(){e=t.getSelection()})),t.addBehaviourHook("end.resizeToMouse",(function(a,r){if(a.sourceEvent)if(!r&&ua(e)){var o=Pu(t.parent_group.node())["x"===n?0:1],i=e.indexOf(function(t,e){var n,a;return t.some((function(t){var r=Math.abs(e-t);if(r>a)return!0;n=t,a=r})),n}(e,o));e[i]=o,t.setSelection(e)}else Cy(e,t)}))},slider:function(){var t=this,e=t.getSelection(),n=t.options.type,a=function(){var e=_slicedToArray(d3.mouse(t.parent_group.node()),2),a=e[0],r=e[1],o=n?"x"==n?a:r:a;t.setSelection([0,o])};this._selection.datum({type:"none"}),this._track.datum({type:"none"}),this._track.on("click touchstart",a),this._selection.on("click touchstart",a),t.addBehaviourHook("start.slider",(function(e){t.customHandles&&l(t.customHandles.node()).remove()})),t.addBehaviourHook("brush.slider",(function(n){var a=_slicedToArray(n.selection,2),r=a[0],o=a[1];e=[0,o],r>0&&t.setSelection(e)})),t.addBehaviourHook("end.slider",(function(n){return n.sourceEvent&&Cy(e,t)}))}};function wy(t,e){e.selection&&this.associateBehaviours(t,e.type,{},e.selection,e)}Oa(ky,(function(t,e){return by.addBehaviour(e,t)})),wn.setComponent("_getPlotBrushArguments",(function(t){var e,n=t.systemConf.chart.brush,a=t.systemConf.chart.zoom,r=[[0,0],[t.plotarea.width,t.plotarea.height]],o=wn.getComponent("BrushD3Options"),i=t.isGeoMap?"xy":Av(n.type,t.axes.rotated);return!0===n.pan&&a.enabled&&(e="shiftKey"),new o({type:i,extent:r,element:t.eventHandler.trackerGroup,metaKey:e,multitouch:n.multitouch,styles:{selection:{fillColor:"transparent",strokeColor:"transparent"}}})}));var _y={LISTENER:{start:wy,end:wy},DATA_FINDER:{},BEHAVIOUR:{start:Xm,end:function(t,e,n){var a=this.behaviours;if(n&&a.PLOT_ZOOM){var r=a.PLOT_ZOOM.instance,o=r.getTransform();t.instance.reset(),r.zoomToBounds(n.map((function(t){return o.invert(t)})))}}},LISTENER_TYPES:M(["start","brush","end"]),SUPPORTED:function(t){return t.isGeoMap}};function Sy(t,e,n){return(e<t[0]||!t.length)&&t.splice(0,0,e),n>t[t.length-1]&&t.splice(t.length,0,n),t}function Oy(t,e){var n=[],a=e;return t.map((function(t){n.push([a,t[0]]),a=t[0]})),n}function Ay(t,e){return t.shapes}function Ty(t,e){return t.shapes}function Py(t,e,n,a){if(a.systemConf.legend.singleLayout)return t;var r=n.config,o=r.minSize,i=r.maxSize,l=r.title,s=yf("z",n),c=ju("z",s),u=e.maxWidth,d=e.maxHeight,h=r[s]||{},f=wa(h.padding,3),p=a.systemConf.canvas,g=fs(r).layout===no;if(!gs(r,a,"z")||c===mn)return t;if(c.adjustFactor){if(l.show){var v=Da(wa(l.margin,3));l.keepAligned&&g||(d-=gu([l,p,wr])+v.top+v.bottom)}var m=c.adjustFactor(r,u,d,p,t);u-=m[0],d-=m[1]}var y=Xe(u,d)-2*f,b=Ge(y,20),x=Ge(.1*y,5);return t[1]>y&&(Xn(i)&&(t[1]=b),Xn(o)&&(t[0]=x)),t[0]>t[1]&&(Xn(i)&&(t[1]=t[0]),Xn(o)&&(t[0]=t[1])),t}function Ey(t){return Ly(t)?["25%","100%"]:t.systemConf.legend.singleLayout?["2.5%","25%"]:["2%","20%"]}function Ly(t){return Al(t.chartTypes[0].value)}function My(t,e){var n=t.config,a=void 0===n?{}:n,r=t.size,o=t.callbackArgs,i=void 0===o?[]:o,l=t.correction,s=$n.apply(void 0,[a.minSize].concat(_toConsumableArray(i))),c=$n.apply(void 0,[a.maxSize].concat(_toConsumableArray(i))),u=[wa(s,r[0]),wa(c,r[1])].map(Iy(t));return l?l(u):u}function Dy(t,e){var n=t.size,a=t.callbackArgs,r=void 0===a?[]:a;return $n.apply(void 0,[n].concat(_toConsumableArray(r))).map(Iy(t))}function Iy(t){var e=t.plotBound,n=e?Xe(e.width,e.height):1;return function(t){return Xa(t,n)}}function Ry(t,e){var n=this.d3_scale.domain,a=t.ranges,r=e.baseSize,o=a||n,i=k();return i.domain(o).range(r),o.map(i)}function zy(t,e){var n=this.d3_scale.domain,a=e.baseSize,r=[n[0],n[n.length-1]],o=a[0]+(a[1]-a[0])/2,i=m();return i.domain(r).range(r[0]==r[1]?[o,o]:a),n.map(i)}function jy(t){this.scale(),this.type,this.order;var e=this.config,n=(this.plotRect,this.datatype,this.column,e.ticklabel.minmaxlabels||{});if(!0===n.show){var a=this.tickH.scale().domain();Jn(n.excludeIntervals,!0)?t=a:(a[0]!==t[0]&&t.splice(0,0,a[0]),a[1]!==t[t.length-1]&&t.push(a[1]))}return t}function Fy(t){var e,n,a,r=this,o=this.scale,i=this.size,l=(this.side,this.styles),s=this.format,u=this.rotation,d=(this.formatter,this.formatAccessor),h=this.margin,f=t.domain,p=this.config.ticklabel,g=(p.tickCount,p.tickInterval,this.column,this.orient);s.subfunction;if(o.constant){var v=c(f);v>0&&v<wa(t.axisObj.logBase,10)&&!1===t.axisObj.allowNonPositiveTicks?o.constant(1e-4):o.constant(1)}var m=Nh(t.domainCopy,i,t.dataMinMax,t.usePadding,t.axisObj,o.copy(),h,{fontSize:l.fontSize,fontFamily:l.fontFamily},(function(t){return t.map(d)}),g,u,t.adjustToBase,(function(e){return t.axisInfo.logDomain=j(e),jy.call(r,e)}),t.hasFixedPosition,f);return e=m.tickValues,n=m.minorTickValues,a=m.logDomain,t.axisInfo.logDomain=a,{ticks:e,minorTickValues:n}}function By(){var t,e=this.domain,n=this.simpleScale,a=this.size,r=this.side,o=this.format,i=this.config,l=i.tickCount,s=i.interval,c=i.maxRange,u=i.tickMultiples,d=i.minTick,h=o.subfunction,f=(e[1]-e[0])/s;if(n.isD3&&(n=n().domain(e).range(a)),na(s)&&f<a)t=function(t,e,n,a){var r,o,i=Ye((t[1]-t[0])/e);if(i){var l=Hy(t,i);if((r=Ue(t[0]/l)*l)-t[0]>e){var s=qe(10,Ye(Je(e)/an));r-=Ye((r-t[0])/s)*s}}else{var c=t[1]-t[0];s=qe(10,Ye(Je(c)/an));r=t[0]-t[0]%s+s}r=wa(n,r),o=tt(r,t[1],e),na(a)&&(o=Wy(o,e,a));return o}(e,s=na(l)?(e[1]-e[0])/l:s,d,c);else if(+l>0)s=(e[1]-e[0])/l,t=function(t,e,n,a,r,o){if(1===e)return f=Hy(t,1),[i=Math.ceil(t[0]/f)*f];var i,l,s,c,u=(t[1]-t[0])/(e-1),d=e-1,h=t[1]-t[0],f=h/d,p=Ye(Je(f)/an),g=qe(10,p),v=ef(u,g=+(g*=Math.floor(f/g)).toFixed(12),o,r);return"integer"==r&&v<1?Ny(t,e,a):(i=t[0],l=t[1],i=+(i=tf(i,s=h-v*d,qe(10,Ye(Je(s)/an)+1),v)).toFixed(12),l=(l=+(l=(i=wa(n,i))+v*e).toFixed(12))>t[1]?+t[1]:l,c=tt(i,l,v),na(a)?c=Wy(c,v,a):c.length<e&&(c=Wy(c,v,l)),c)}(e,l,d,c,h,u);else if("integer"===h)t=Ny(e,null,c);else if(l="height"===r?l||Ve(a/40):l||Ve(a/100),na(d)){var p=et(d,e[1],l);t=tt(d,e[1],p)}else t=n.ticks(l);return t=jy.call(this,t)}function Hy(t,e){var n=na(e)?e:10,a=t[1]-t[0],r=qe(10,Ye(Je(a/n)/an)),o=n/a*r;return o<=.15?r*=10:o<=.35?r*=5:o<=.75&&(r*=2),r}function Ny(t,e,n){var a,r=function(t,e){return Ue(Hy(t,e))}(t,e);return a=tt(function(t,e){var n=Hy(t);na(e)&&(n=Ge(e,n));return Ue(t[0]/n)*n}(t,1),t[1],r),na(n)&&(a=Wy(a,r,n)),a}function Wy(t,e,n){return t[t.length-1]+e<=n&&t.push(t[t.length-1]+e),t}function Vy(t){var e,n,a=t.type,r=t.order,o=t.chart,i=t.datatype,l=t.plotRect,s=o.dataObject,c=fa(o,"behaviouralEvents.eventManager.behaviours")||{},u=Ks(a,o.axes.rotated)?"height":"width",d=tc(o,a,r),h=o.chartTypes[0].name,f=o.systemConf.chart.plot.plotoptions[h],p=(s.isAxisCategory&&f.outerPadding,is(t.chart,u,l),c.PLOT_ZOOM||c.CHART_SCROLL&&o.scroll&&o.scroll.settings.smooth&&"x"===a);if(c.PLOT_ZOOM||c.PLOT_BRUSH||c.CHART_SCROLL){if(n=d.scale,e="x"===a&&c.CHART_SCROLL?o.viewPortExtent||d.domain||e:d.domain||e,i==To)return p?null:e;var g=n.range();if(Ze(g[1]-g[0]),"time"===i&&ua(e)&&n){e[0]instanceof Date&&(e=e.map((function(t){return t.getTime()})));var v=Ze(e[1]-e[0])*n.outerPadding;e[0]=e[0]+v,e[1]=e[1]-v}return e}}function Yy(t,e){var n=this.type,a=this.order;return this.chart.dataObject.getCategories(n,a,!0,e).slice(0)}function Uy(){var t,e,n=this.domain,a=(this.scale,this.size),r=this.side,o=this.format,i=this.styles,l=this.useTickAsIndices,s=(this.filter,this.rotation),c=this.rotationConfig,u=(this.chartPadding,this.filteredTickIndices,this.subFormatType),d=this.orient,h=this.config,f=h.tickCount,p=h.interval,g=n,v=$s(this.config.ticklabel),m=o.subfunction,y=!this.autoScrollX&&!this.branchType,b=Yy.call(this);this.column.datatype!==Po||na(m)||(m=u(o,n[n.length-1]-n[0]));var x={};x.width=x.height=i.fontSize;var C=Kh(r,x,v,s,i.fontSize,d),k=Ve(a/C);return k<g.length&&"width"===r&&(s||this.config.rotation>0)&&(C=Ih(c.tickAutoRotation,i.fontSize,i.fontSize,d).tickSpacing+v.left+v.right),y&&(f<g.length?g=Zh(g,f,null,l):na(p)?g=Zh(g,f,p,l):k<g.length&&(g=Zh(g,k,null,l))),l&&(e=g.nodes||g,t=g.indices,g=g.ticks||b),{ticks:g,tickValueIndices:t,tickLeafNodes:e}}function Gy(t,e){this.domain,this.size,this.side,this.format,this.styles;var n,a=this.useTickAsIndices,r=(this.filter,this.orient,this.chartPadding,this.maxSize,this.tickH.scale(),t.ticks),o=t.ticks_formatted,i=t.customTickInfo,l=e.maxTickCount;a?(n=(r=Zh((t.tickLeafNodes&&t.tickLeafNodes.length?t.tickLeafNodes:r)||r,l,null,a)).indices,r=r.ticks):(r=Zh(r,l),this.config.ticklabel.showAs&&(i.styles=Zh(i.styles,l),i.userRawTicks=Zh(i.userRawTicks,l)));return{ticks:r,ticks_formatted:o=Zh(o,l),tickValueIndices:n}}function Xy(){var t,e=this,n=e.config,a=n.tickCount,r=n.interval,o=e.groupby?e.order:null,i=e.column,l=i.datatype;na(i[l])||(i[l]=e.format);var s=e.subFormatType(e.format,e.domain[1]-e.domain[0]),c=new Date(e.domain[0]),u=new Date(e.domain[1]),d=new Yu(e.format);d.useUTC=!0===e.format.useUTC;var h=d.getMaxDate(e.format,o),f=Rr(h=zh(h,e.rotationConfig.tickAlignmentMode,e.maxSize.horizontal,e.maxSize.vertical,e.styles.fontSize),e.styles.fontSize,e.styles.fontFamily),p=Kh(e.side,f,e.margin,e.rotation,e.styles.fontSize,e.orient);(a=wa(a,e.size/p),e.isAutoFormat)?(t=e.tickH.scale(function(t){var e=t.type,n=t.order,a=t.chart,r=(t._order,fa(a,"behaviouralEvents.eventManager.behaviours")||{}),o=r.PLOT_ZOOM||r.PLOT_BRUSH||r.CHART_SCROLL,i="x"===e&&0===n?a.viewPortExtent:pn;return o&&(i=Vy(t)),i}(this)).ticks(),h=null):t=d.range(c,u,Ue(a),s,r).TICKS;return{ticks:t=jy.call(this,t),longestFormattedTick:h}}function Zy(t,e){var n=e.maxTickCount,a=t.ticks,r=t.ticks_formatted,o=t.customTickInfo,i=t.tickRotateMode,l=t.tickAutoRotation,s=t.rotation,c=t.tickCount;if(this.isAutoFormat){var u=this.scale,d=c>n&&i&&0===s;a=u.ticks(d?.5*n:n),this.tickCount>n&&!d&&(s=l),r=a.map((function(t){return u.tickFormat()(t)})),this.longestTick=$h(r,a,this.styles&&this.styles.fontSize,this.styles&&this.styles.fontFamily,o&&o.styles)}else{var h=new Date(this.domain[0]),f=new Date(this.domain[1]),p=new Yu(this.format);p.useUTC=!0===this.format.useUTC,a=p.range(h,f,n,this.format.subfunction,this.config.interval).TICKS,r=(a=jy.call(this,a)).map(this.formatAccessor)}return{ticks:a,ticks_formatted:r,rotation:s}}function qy(t){var e=this.chart.dataObject;if(this.groupby&&!na(e.hierarchical))e.hierarchical=new pi.HierarchicalTimeDataAdapter(this.chart,t,this.format.groupby,this.datatype!==Po,this.column);else if(this.groupby){e.hierarchical.update(t);var n=e.hierarchical.setScaleForRange(this.chart.axes.x.rangeScale);e.hierarchical.pivotLayout.setRanges("column",n)}}function $y(t){this.type;var e,n=this.order,a=this.chart,r=this.config,o=(this.plotRect,this.datatype,this.column),i=r.ticklabel,l=[],s=[],c=[],u={data:[o]};return o.columnindex=wa(o.columnindex,0),t.forEach((function(t,r){var o=$n(i.showAs,t,i,u,a,r,n),d=[],h=[];if(ua(o)?(l.push(d),s.push(h)):(d=l,h=s),c.push(o),na(o)){var f=Tc(o),p=f.querySelectorAll("zc-temp")[0].childNodes,g=Pc(f,"tspan"),v=Pc(f,"image,img"),m=Pc(f,"g");if(p&&p.length)for(var y=0;y<p.length;y++){if(y>0&&!g.length&&!v.length)return;var b=p[y];if("tspan"==b.tagName){d.push(b.textContent.trim());var x=b.style||{},C=b.attributes||{};h.push({fontSize:x.fontSize&&parseFloat(x.fontSize),fontFamily:x.fontFamily,fontStyle:x.fontStyle,fontWeight:x.fontWeight,x:C.x,y:C.y,dy:C.dy})}else if("image"==b.tagName||"img"==b.tagName)Zn(f.querySelectorAll("image,img")).forEach((function(t){t.style,t.attributes;d.push({width:+t.getAttribute("width"),height:+t.getAttribute("height")}),h.push({y:t.getAttribute("y"),dy:t.getAttribute("dy")})}));else if("g"==b.tagName){e=!0;var k=wc("g",".customTick",[1],a.wrap,null).html(o),w=k.node().getBBox();d.push({width:+w.width,height:+w.height,type:"group"}),k.remove()}else g.length||v.length||m.length||d.push(o)}else d.push(o);f=null}})),{customGroup:e,tickValues:l,styles:s,userRawTicks:c}}function Qy(t,e,n,a,r,o,i,l,s){var c,u,d=t||e[n];return u="height"===n?[c=(d+=r.top+r.bottom)*a,0]:[0,c=(d+=r.left+r.right)*a],c+="x"==l?Ch(u,a,o,i,d):0,s.systemConf.chart[n]=c,c}function Ky(t){var e=this,n=this.datatype,a=this.rotation,r=this.type,o=t.ticks,i=t.longestTick,l=t.tickBound,s=t.longestFormattedTick,c=t.ticks_formatted,u=this.rotationConfig,d=u.tickAlignmentMode,h=u.tickRotateMode,f=u.tickAutoRotation,p=o.length;if("auto"===d){var g=b(0);if(g.maxTickCount<p){var v=n==To?x():b(f,!0);if(v.maxTickCount<p){var m=b(f,!0);return m.maxTickCount<p&&i.hasWhiteSpace?C():m}return v}return g}if(h)return b(null,!1);if("zigzag"==d)return x();if("wrapOnSpace"==d)return C();if("wrapAll"==d)return{mode:"wrapAll",maxTickCount:y(),rotation:e.rotation};function y(t,n,a){var r,o,i=0,s=e.plotSize_no_zoom;if(a&&(i=s*e.chartOuterPadding*2),r=e.plotSize_no_zoom-i,o=n||l,!!t){if("height"===e.side&&(90===t||270===t))return r/(o.width+Ze(e.margin.top)+Ze(e.margin.bottom));var c=t%90;if("height"===e.side?c>0:c>0||90===t||270===t)return r/(Ih(t,o.width,o.height,e.orient).tickSpacing+Ze(e.margin.left)+Ze(e.margin.right))}return r/("height"===e.side?o.height+Ze(e.margin.top)+Ze(e.margin.bottom):o.width+Ze(e.margin.left)+Ze(e.margin.right))}function b(t,n){var o,i=na(t)?t:a;if("auto"===i){a=0,o=y(0,null,"x"==r);var s=e.scale.actualRange;!(s&&s[0]===s[1])&&o<p?"width"===e.side?(a=e.leafType?90:f,o=y(f,null,!1),n=!0):n=!0:n=!1}else o=y(i,l,"x"==r),a=i;return{mode:"rotate",rotation:a,maxTickCount:o,recalculate:n}}function x(){return{mode:"zigzag",rotation:0,maxTickCount:2*y()}}function C(){if("auto"==d){c=c.map((function(t,e){return t.split(" ")}));var t=getLongestTick(e.ticks_formatted,o,e.styles.fontSize,e.styles.fontFamily,e.customTickInfo.styles);na(s)||(s=t.formattedVal);Rr(s,e.styles.fontSize,e.styles.fontFamily,t.style,!0)}return{mode:"wrapOnSpace",maxTickCount:y(),rotation:a,longestFormattedTick:s}}}function Jy(){var t,e,n,a,r,o,i,l,s,c=this,u=c.tickH,d={},h=c.config.ticklabel,f=c.config.tickCount,p=$s(h);if(l=c.rotation,c.datatype==Eo)if(c.column.scaleType==Ju){var g=Fy.call(this,c.tickH.logTickH());t=g.ticks,e=g.minorTickValues}else t=By.call(this);else if(c.datatype==To||c.datatype==Lo){var v=Uy.call(this);t=v.ticks,n=v.tickValueIndices,a=v.tickLeafNodes}else if(c.datatype==Po){var m=Xy.call(this);t=m.ticks,o=m.longestFormattedTick}c.filter&&!c.useTickAsIndices&&(t=function(t,e){var n=Ze(t.origRange[1]-t.origRange[0]),a=t.bandwidth?t.bandwidth()/2:0,r=[-a,n-a];return e.filter((function(e){var n=t(e);return null!==n&&n>=r[0]&&n<=r[1]}))}(c.scale,t)),f=t.length;var y=(s=c.column.scaleType==Ju?u.scale():c.scale).actualRange,b=y&&y[0]===y[1];b&&(t=[c.scale.invert(y[0])],c.column.scaleType==Ju&&(t=t.map((function(t){return Bh(t)})))),i=c.isAutoFormat?t.map((function(t){return c.scale.tickFormat()(t)})):t.map(c.formatAccessor),na(h.showAs)&&(i=(d=$y.call(this,t)).tickValues,d.length=i.length),r=$h(i,t,c.styles.fontSize,c.styles.fontFamily,d.styles),na(o)||(o=r.formattedVal);var x=Rr(o,c.styles.fontSize,c.styles.fontFamily,r.style,!0),C=Mh(h,c.chartRect);if(x.width=Xe(x.width,C.horizontal),x.height=Xe(x.height,C.vertical),c.autoScrollX&&Qy(u.scrollThickness(),x,c.side,f,p,c.chartPadding,c.chartOuterPadding,"x",c.chart),c.autoScrollY&&Qy(u.scrollThickness(),u.pivotLeafSize(),c.side,u.pivotLeafCount(),p,c.chartPadding,c.chartOuterPadding,"y",c.chart),c.datatype!=Lo){var k=Ky.call(this,{ticks:t,longestTick:r,tickBound:x,longestFormattedTick:o,ticks_formatted:i}),w=k.mode,_=k.maxTickCount;if(l=k.rotation,!b&&(f>_||k.recalculate)){var S=c.rotationConfig,O=(S.tickAlignmentMode,S.tickRotateMode),A=S.tickAutoRotation,T=(S.hasDefinedAutoRotation,{tickCount:f,ticks:t,ticks_formatted:i,tickAutoRotation:A,tickLeafNodes:a,customTickInfo:d,tickRotateMode:O,rotation:l});if(c.datatype===Po){var P=Zy.call(this,T,k);t=P.ticks,i=P.ticks_formatted,l=P.rotation,c.isAutoFormat&&(r=$h(i,t,c.styles.fontSize,c.styles.fontFamily,d.styles))}else if(_<f){var E=Gy.call(this,T,k);t=E.ticks,i=E.ticks_formatted,n=E.tickValueIndices,r=$h(i,t,c.styles.fontSize,c.styles.fontFamily,d.styles)}}c.column.datatype===Po&&c.groupby&&qy.call(this,t)}c.config.ticks&&(t=$n(this.config.ticks,t,s.domain()),r=$h(i=c.isAutoFormat?t.map((function(t){return c.scale.tickFormat()(t)})):t.map(c.formatAccessor),t,c.styles.fontSize,c.styles.fontFamily,d.styles)),(na(d.styles)||c.format&&c.format.format&&c.format.format.breakSpace)&&(r=$h(i,t,c.styles.fontSize,c.styles.fontFamily,d.styles));var L={};return L.scale=s,L.ticks=t,L.ticks_formatted=i,L.tickValueIndices=n,L.tickLeafNodes=a,L.longestTick=r,L.longestFormattedTick=o,L.longTickSize=Rr(o,c.styles.fontSize,c.styles.fontFamily,r.style,!0),L.maxSize=c.maxSize,L.rotation=l,L.mode=w||c.rotationConfig.tickAlignmentMode,L.minorTickValues=e,L.maxTickSize=c.maxSize,L.customTicks=d.userRawTicks,L.customTickInfo=d,L.isInline=oc(c.config,c.type,c.chart),L.inlineToPlot=!!L.isInline&&ic(c.type,c.orient,c.chart.systemConf),L.showGrid=c.config.grid.show&&c.config.grid.color!=hn,L}wn.setComponent("_mapBrushHandlers",_y),ed("color.domainParser",(function(t,e,n,a){var r=n.colorBand,o=r.stops,i=r.ranges,l=(wa(e,""),a.dataObject),s=a.dataset.getDataType(t),c={};return M(["extremes","sortedRanges","filteredStops","min","max"]).has("extremes")&&(c.extremes=[{_type:"extremesByData",data:l.processedseriesData,indices:[a.dataset.clridx]}]),c.min=r.minRange,c.max=r.maxRange,i&&i.length?(c.ranges=!0,c.sortedRanges={datatype:s,config:r}):o&&o.length&&(c.stops=!0,c.filteredStops={array:Yn(o).sort(B),min:r.minRange,max:r.maxRange}),c})),ed("color.sortRanges",(function(t){return Ni(t.config,t.datatype,!0,t.clone)})),ed("color.filterStops",(function(t){return e=t.array,n=t.min,a=t.max,r=na(n),o=na(a),e.filter((function(t){return r&&o?t>=n&&t<=a:r?t>=n:!o||t<=a}));var e,n,a,r,o})),hd.set("filteredStops",nd("color.filterStops")),hd.set("sortedRanges",nd("color.sortRanges")),ed("color.rangeParser",(function(t,e,n,a){var r=n.colorBand,o=r.stops,i=r.ranges,l=(wa(e,""),a.dataObject,a.dataset.getDataType(t)),s=l==To,c=(uc(t,a.axes.rotated),"discrete"!==Wi(n,a)),u={};return M(["colorRanges","mapDistinctRanges","mapArrayRanges"]).has("colorRanges")&&(u.colorRanges={colors:a.imagePallete||a.seriesColor}),i&&i.length?(u.sortedRanges={datatype:l,config:r},u.mapArrayRanges={ranges:i,isOrdinal:s,isContinousLegend:c}):!s&&o&&o.length&&(u.mapDistinctRanges={stops:o}),u})),ed("color.utils._pairs",Oy),ed("color.evalDomain",(function(t){var e,n,a,r=t.extremes,o=this.config.domain.operators.min,i=this.config.domain.operators.max;return n=[o=wa(o,r[0])||0,i=wa(i,r[1])||0],t.sortedRanges&&(e=t.sortedRanges,this.config.dataType==To?n=e:(n=e,1===e[0].length&&(n=Oy(e,o)),(a=n).splice(0,0,[-1/0,-sn]),a.splice(a.length,0,[sn,1/0]),n=a),n=E(n)),t.filteredStops&&(n=Sy(t.filteredStops,o,i)),n})),ed("color.evalRange",(function(t){var e=t.mapArrayRanges||t.mapDistinctRanges||t.colorRanges;return this.d3_scale.origRange=e.slice(),e})),ed("color.rangeBound",(function(t){return this.config,this.chartObj,t.colors})),hd.set("colorRanges",nd("color.rangeBound")),ed("color.rangesForDistinctDomain",(function(t,e){var n=this.d3_scale.domain,a=t.stops,r=e.colorRanges,o=0,i=[];return n.forEach((function(t,e){var n=a.indexOf(t);-1===n&&(n=o),i.push(r[n%r.length]),o=n})),i})),ed("color.rangesForArrayDomain",(function(t,e){for(var n=this.d3_scale.domain,a=t.isOrdinal,r=e.colorRanges,o=e.sortedRanges,i=t.isContinousLegend,l=[],s=0,c=function(t,e){if(1===t.length?a?t[0]===n[s]:t[0]===n[s+1]:t[0]===n[s]&&t[1]===n[s+1])return d=e,!0},u=n.length;s<u;a?s++:s+=2){var d=-1;o.some(c),-1===d||!i&&o[d].disabled?l.push(null):l.push(r[d%r.length])}return l})),hd.set("mapDistinctRanges",nd("color.rangesForDistinctDomain")),hd.set("mapArrayRanges",nd("color.rangesForArrayDomain")),ed("shape.domainParser",(function(t,e,n,a){var r=a.dataObject,o=a.dataset,i=o.getDataType(t,e),l=o.getColumn(t,e),s={config:n,columnKey:o.getColumnIdx(t,e)},c=r.processedseriesData,u=pi.helpers.isCatNull,d=u(o,"x"),h=u(o,"y",0),f=!(function(t){return t.isGeoMap||t.mapObj||t.dataObject.isFlowChartCategory}(a)||a.systemConf.legend.singleLayout&&i===Eo)&&function(t){return!(d(o.getActualX(t,e))||h(o.getY(t,e)))},p=(i===Po?vd(n,l):null)||n,g=p.minRange,v=p.maxRange,m=p.stops,y=p.ranges,b=function(t){return ol(t[l.dataindex],s)},x={},C=M(i===To?["categories"]:["extremes"]);if(C.has("extremes")&&(a.systemConf.legend.singleLayout&&"z"===t?x.extremes=[function(){return r.getMinMaxZ()}]:x.extremes=[{_type:"extremesByAccessor",data:c,condition:f,accessor:function(){return b}}]),C.has("categories")){var k=E(c.map((function(t){return E(t.data)})));x.categories=id(k,b)}if(i===Eo&&!a.isGeoMap){var w=n.base;x.base=w!==Oe?w:0}return x.min=g,x.max=v,y&&y.length?x.sortedRanges={datatype:i,clone:!1,config:_objectSpread(_objectSpread({},n),{},{ranges:y})}:m&&m.length&&(x.filteredStops={array:Yn(m).sort(B),min:g,max:v}),x})),ed("shape.rangeParser",(function(t,e,n,a,r){var o=a.dataset.getDataType(t),i=n.ranges,l=n.shapes,s={};return l?(s.userShapes={shapes:l},s):(s.baseShapes={shapes:["star","heart","diamond"]},i||o===To?s.mapDiscreteDomainToDiscreteRange={ranges:i}:s.mapContinuousDomainToDiscreteRange={},s)})),wn.setComponent("shape.parser",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=n.dataset,o=r.getDataType(t,e),i=r.getColumn(t,e),l={type:o,dataType:o,scaleType:i.scaleType,field:i,reverse:a.reversed,clamp:!0,data:[],domain:{operators:nd("shape.domainParser")(t,e,a,n),evaluator:nd("shape.evalDomain")},range:{operators:nd("shape.rangeParser")(t,e,a,n),evaluator:nd("shape.evalRange")}};return l})),ed("shape.evalDomain",(function(t){var e=t.extremes,n=this.config.domain.operators,a=n.min,r=n.max,o=n.base,i=t.sortedRanges,l=t.filteredStops,s=e;return i?E(i):n.categories?n.categories:(na(o)&&(s=j([].concat(_toConsumableArray(s),[o]))),na(a)&&(s[0]=a),na(r)&&(s[s.length-1]=r),l&&(s=Sy(l,wa(a,s[0])||0,wa(r,s[s.length-1])||0)),s)})),ed("shape.evalRange",(function(t){return t.userShapes||t.mapDiscreteDomainToDiscreteRange||t.mapContinuousDomainToDiscreteRange})),hd.set("userShapes",Ay),hd.set("baseShapes",Ty),ed("size.userShapes",Ay),ed("size.baseShapes",Ty),hd.set("mapDiscreteDomainToDiscreteRange",(function(t,e){var n=this.d3_scale.domain,a=t.ranges,r=e.baseShapes,o=a||n,i=w();return i.domain(o).range(r),o.map(i)})),hd.set("mapContinuousDomainToDiscreteRange",(function(t,e){var n=this.d3_scale.domain,a=e.baseShapes,r=[n[0],n[n.length-1]],o=m();return o.domain(r).range(a),n.map(o)})),ed("size.domainParser",(function(t,e,n,a){var r=a.dataObject,o=a.dataset,i=o.getDataType(t,e),l=o.getColumn(t,e),s={config:n,columnKey:o.getColumnIdx(t,e)},c=r.encodes&&r.getEncode(t,e),u=n._data||(c?c.seriesData:[]),d=pi.helpers.isCatNull,h=d(o,"x"),f=d(o,"y",0),p=!(function(t){return t.isGeoMap||t.mapObj||t.dataObject.isFlowChartCategory}(a)||a.systemConf.legend.singleLayout&&i===Eo)&&function(t){return!(h(o.getActualX(t,e))||f(o.getY(t,e)))},g=(i===Po?vd(n,l):null)||n,v=g.minRange,m=g.maxRange,y=g.stops,b=g.ranges,x=function(t){return ol(t[l.dataindex],s)},C={},k=M(i===To?["categories"]:["extremes"]);if(k.has("extremes")&&(a.systemConf.legend.singleLayout&&"z"===t?C.extremes=[function(){return r.getMinMaxZ()}]:C.extremes=[{_type:"extremesByAccessor",data:u,condition:p,accessor:function(){return x}}]),k.has("categories")){var w=E(u.map((function(t){return E(t.data)})));C.categories=id(w,x)}if(i===Eo&&!a.isGeoMap){var _=n.base;C.base=_!==Oe?_:0}return C.min=v,C.max=m,b&&b.length?C.sortedRanges={datatype:i,clone:!1,config:_objectSpread(_objectSpread({},n),{},{ranges:b})}:y&&y.length&&(C.filteredStops={array:Yn(y).sort(B),min:v,max:m}),C})),ed("size.rangeParser",(function(t,e,n,a,r){var o=a.dataset.getDataType(t),i=n.ranges,l=n.sizes,s=cu(n,a.chartarea,r),c={};return l?(c.userRanges={size:l,plotBound:Ly(a)?null:a.plotarea,callbackArgs:[a,s]},c):(c.baseSize={config:n,size:Ey(a),plotBound:Ly(a)?null:a.plotarea,correction:function(t){return Py(t,s,{config:n,dataType:o},a)},callbackArgs:[a,s]},i||o===To?c.mapDiscreteDomainToRange={ranges:i}:c.mapContinuousDomainToRange={},c)})),wn.setComponent("size.parser",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=n.dataset,o=r.getDataType(t,e),i=r.getColumn(t,e),l={type:o,dataType:o,scaleType:i.scaleType,field:i,reverse:a.reversed,clamp:!0,data:[],domain:{operators:nd("size.domainParser")(t,e,a,n),evaluator:nd("size.evalDomain")},range:{operators:nd("size.rangeParser")(t,e,a,n),evaluator:nd("size.evalRange")}};return l})),ed("size.evalDomain",(function(t){var e=t.extremes,n=this.config.domain.operators,a=n.min,r=n.max,o=n.base,i=t.sortedRanges,l=t.filteredStops,s=e;return i?E(i):n.categories?n.categories:(na(o)&&(s=j([].concat(_toConsumableArray(s),[o]))),na(a)&&(s[0]=a),na(r)&&(s[s.length-1]=r),l&&(s=Sy(l,wa(a,s[0])||0,wa(r,s[s.length-1])||0)),s)})),ed("size.evalRange",(function(t){return t.userRanges||t.mapDiscreteDomainToRange||t.mapContinuousDomainToRange})),hd.set("baseSize",My),hd.set("userRanges",Dy),ed("size.baseSize",My),ed("size.userRanges",Dy),hd.set("mapDiscreteDomainToRange",Ry),hd.set("mapContinuousDomainToRange",zy),ed("size.mapDiscreteDomainToRange",Ry),ed("size.mapContinuousDomainToRange",zy),Tr.axes=function(t){return{xaxisLevels:{},yaxisLevels:{},xaxis:{splitLeaves:!1,uniformLeafScale:!0,show:!0,label:{show:!0,text:"Xaxis",fontSize:t.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"transparent",strokeWidth:null},minorGrid:{show:!1,color:"#ececec"},subtickmark:{show:!1,color:"#ececec",size:3,count:0},ticklabel:{textOverflow:"ellipsis",fontSize:t.fontL2Size.l5},tickmark:{strokeWidth:null,color:"#ececec",size:3},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:10,color:"black"},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:t.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:t.fontL2Size.l5}}}},yaxis:[{show:!0,label:{show:!0,text:"Yaxis",fontSize:t.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"#ececec"},minorGrid:{show:!1,color:"#ececec"},ticklabel:{textOverflow:"ellipsis",fontSize:t.fontL2Size.l5},tickmark:{color:"#ececec",size:3},subtickmark:{color:"#ececec",size:5,count:0},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:0,color:"grey",strokeWidth:null},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:t.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:t.fontL2Size.l5}}}}]}};var tb=function(){function t(e,n){_classCallCheck(this,t),this.chart=e.chart,this.type=e.type,this.order=e.order,this.config=e.config,this.plotRect=e.plotRect,this.plotRect1=e.plotRect1,this._order=e._order,this.orient=e.orient,this.datatype=e.datatype,this.column=e.column,this.initialize(e,n)}return _createClass(t,[{key:"initialize",value:function(t,e){t.axisInfo.logDomain=null;var n=this.tickH=e(t);this.domain=n.domain(),this.scale=n.scale(),this.simpleScale=n.simpleScale(),this.filter=n.filter(),this.useTickAsIndices=n.useTickAsIndices,this.styles=n.styles(),this.rotationConfig=n.rotation(),this.rotation=this.rotationConfig.rotation,this.format=n.format(),this.formatter=n.formatter(),this.groupby=n.groupby(),this.side=n.side(),this.size=n.size(),this.maxSize=n.maxSize(),this.margin=n.margin(),this.padding=n.padding(this.margin),this.autoScrollX=n.autoScrollX(),this.autoScrollY=n.autoScrollY(),this.chartPadding=n.chartPadding(),this.chartOuterPadding=n.chartOuterPadding(),this.plotSize=n.plotSize(),this.plotSize_no_zoom=n.plotSize_no_zoom(),this.subFormatType=n.subFormatType,this.chartRect=n.chartRect(),this.branchType=n.isBranchType&&n.isBranchType(),this.leafType=n.isLeafType&&n.isLeafType(),this.bzsEnabled=n.bzsEnabled(),this.customTickInfo={},this.isAutoFormat=this.datatype==Po?Dh(this.format):null,this.formatAccessor=n.formatAccessor(t,this)}},{key:"collect",value:function(){this.tickInfo=Jy.call(this),(na(this.customTickInfo.styles)||this.format&&this.format.format&&this.format.format.breakSpace)&&(this.tickInfo.longestTick=$h(this.ticks_formatted,this.ticks,this.styles.fontSize,this.styles.fontFamily,this.customTickInfo.styles))}}]),t}();function eb(){var t,e=this.type,n=this.order,a=this.chart,r=this.config,o=(this.plotRect,this.viewParser,this.orient),i=(this.rotated,this.axisTicks.margin),l=this.axisTitle,s=l.hideTitle,c=(l.titleConfig,l.titleMargin),u=(l.branchTitleConfig,this.axisTicks.precalculate.axisgroup),d=(this.axisTicks.tickInfo,_objectSpread(_objectSpread({},this.axisTicks.precalculate),this.axisTicks.tickInfo)),h=0,f=this.axisInfo,p="".concat(e,"-axis-").concat(n),g=dc(a.svg.selectAll("g.".concat(e,"-axis")),"g",[r],".","class",p),v=this.axisView&&this.axisView.conf.preMarkExtender,m=this.marks.axisTitle.onReady();v&&(m=$n(v,m,this)),Kf(m,g);var y=g.selectAll("text.axislabel"),b=y.node();if(f.axisLabel=b,s)t="bottom"===o||"top"==o?u.height+i.bottom:u.width+i.left;else switch(h=y.empty()||g.style("display")===dn?0:b.getBBox().height,o){case"left":t=(d.inlineToPlot?0:d.isInline?u.width:u.width+i.left)+c.right+h+c.left;break;case"right":t=(d.inlineToPlot?0:d.isInline?u.width:u.width+i.right)+c.left+h+c.right;break;case"bottom":t=(d.inlineToPlot?0:d.isInline?u.height:u.height+i.bottom)+c.bottom+h+c.top;break;case"top":t=(d.inlineToPlot?0:d.isInline?u.height:u.height+i.top)+c.top+h+c.bottom}return{preCalcAxisLen:t}}function nb(t){var e=this.scale,n=this.config,a=this.chartRect,r=this.orient,o=this.type,i=this.chart,l=this.styles,s=this.plotSize,c=this.tickInfo,u=c.rotation,d=c.ticks,h=(c.ticks_formatted,c.customTickInfo,c.longestTick,_objectSpread(_objectSpread({},t),{},{scale:e,ticks:d,rotation:u,config:n,chartRect:a,orient:r,type:o,chart:i,styles:l,plotSize:s}));return{needTrimByMaxSize:!0,hasDynamicTickSpacing:h.isHierarchialLevelType(),fitTextInBetween:rb(h),maxTickSize:Mh(n.ticklabel,a),boundaryEdges:lb(h),tickSpacing:ob(h),minMargin:ab(h)?h.styles.fontSize:0,margin:cb(h),needDynamicEdge:i&&i.dataObject&&i.dataObject.hierarchical&&i.dataObject.hierarchical.dynamicLeafScale,dynamicBoundaryEdges:function(){return sb},dynamicMaxTickSize:function(){return ib},referenceBounds:function(){return Ga(h.tempDom.selectAll(".axisline"))},overflowPattern:null==n.ticklabel.textOverflow||"ellipsis"==n.ticklabel.textOverflow?"..":"",prerender:!0}}function ab(t){return!rb(t)&&!t.chart.dataObject.isPolarAxisCategory}function rb(t){return!t.isHierarchialLevelType()&&t.isHierarchy()&&"x"==t.type||"between"==t.config.tickmark}function ob(t){if(rb(t))return Wt.getRangeBand(t.scale,t.ticks,0)}function ib(t,e,n,a){var r,o,i=n.tempDom.selectAll("text.ticklabel").nodes().length,l=Ze(a.tickSpacing.outerPaddingInPixel),s=na(n.config.ticklabel.width)||na(n.config.ticklabel.maxWidth);return"bottom"==n.orient||"top"==n.orient?s?r=a.maxTickSize.horizontal:90!=n.rotation&&270!=n.rotation&&(r=0==e||e==i-1?2*l:2*Ze(a.tickSpacing.rangeBand)):"left"!=n.orient&&"right"!=n.orient||90!=n.rotation&&270!=n.rotation||(o=0==e||e==i-1?2*l:2*Ze(a.tickSpacing.rangeBand)),{horizontal:r,vertical:o}}function lb(t,e){var n=t.scale,a=t.ticks,r=t.rotation,o=t.config,i=(t.chartRect,t.orient),l=(t.type,n.bandwidth?n.bandwidth()/2:0),s=a[0],c=a[a.length-1];o.reversed&&(s=a[a.length-1],c=a[0]);var u=wa(e,l),d={};if(rb(t)){var h=ob(t),f=Ze(h.outerPaddingInPixel);"bottom"==i||"top"==i?(d.left=n(s)-Ze(u-f),d.right=n(c)+(f+u)):"left"!=i&&"right"!=i||90!=r&&270!=r||(d.top=n(c)-f,d.bottom=scale1(s)+f)}else d.top=d.left=0,d.right="bottom"==i||"top"==i?t.plotSize:0,d.bottom="bottom"==i||"top"==i?0:t.plotSize;return d}function sb(t,e,n,a,r){var o=n.chart,i=o&&o.dataObject&&o.dataObject.hierarchical&&o.dataObject.hierarchical.dynamicLeafScale,l={};return a.edgeOptions?l=a.edgeOptions(t,r):i&&n.scale.bandwidth&&(l=lb(n,n.scale.bandwidth)),l}function cb(t){var e=.5,n={};return ab(t)?(n.left=e*t.chart.plotarea.left,n.right=e*(t.chart.canvasarea.width-(t.chart.plotarea.left+t.chart.plotarea.width)),n.top=e*t.chart.plotarea.top,n.bottom=e*t.chart.plotarea.bottom):(n.left=n.right=0,n.top=n.bottom=0),n}function ub(t,e,n){t.plotRect,t.side;var a=t.overflow,r=t.orient,o=t.rotation,i=t.scale,s=e.maxTickSize.horizontal,c=e.maxTickSize.vertical,u=e.margin,d=e.boundaryEdges,h=e.prerender,f=e.needTrimByMaxSize,p=(e.tickSpacing,e.hasDynamicTickSpacing),g=e.minMargin,v=e.overflowPattern,m=n.node,y=n.index;if("none"!=a){var b=m,x=[b.childNodes[0]],C=l(b).selectAll("tspan").nodes();if(C&&C.length&&(C.sort((function(t,e){return e.textContent.length-t.textContent.length})),x=C),x){e.fitTextInBetween&&e.dynamicMaxTickSize()(m,y,t,e);for(var k=0;k<x.length;k++){var w,_=C&&C.length?x[k]:b,S=_.textContent,O="tspan"==_.nodeName?Dr:Ir,A=L=O(_),T={width:s,height:c};if(p&&f&&!h){var P="left"==r||"right"==r?s:Math.abs(i.discreteWidth(m.__data__))||s,E=Xe(s,P);return void yc(_,_,_.textContent,E,c,L,v)}if(f)L=O(db(_,L,{horizontal:s,vertical:c},v));var L,M=e.referenceBounds(),D={left:L.left-M.left,right:L.left+L.width-M.left,top:L.top-M.top,bottom:L.top+L.height-M.top,width:L.width,height:L.height};if(e.needDynamicEdge&&i.bandwidth&&(d=e.dynamicBoundaryEdges()(m,y,t,e,L)),"left"!=r&&"right"!=r||0==o||180==o||360==o?"bottom"!=r&&"top"!=r||90==o||270==o||(D.left+Ge(g,u.left)<d.left||D.right-Ge(g,u.right)>d.right)&&(w=!0,hc(_,_.textContent,D,d,r,v,u,T,_)):(D.top+Ge(g,u.top)<d.top||D.bottom-Ge(g,u.bottom)>d.bottom)&&(w=!0,hc(_,_.textContent,D,d,r,v,u,T,_)),f&&!w)(L=O(_)).width==A.width&&L.height==A.height||yc(_,b,S,T.width,T.height,L,v);_.textContent==v&&(_.textContent=h?".":"")}}}}function db(t,e,n,a){var r="tspan"==t.nodeName?Dr:Ir;if(n.horizontal<e.width){var o=(e.width-n.horizontal)/e.width,i=Ue((1-o)*t.textContent.length);t.textContent=t.textContent.substring(0,i-2)+a,e=r(t)}if(n.vertical<e.height){var l=(e.height-n.vertical)/e.height;i=Ue((1-l)*t.textContent.length);t.textContent=t.textContent.substring(0,i-2)+a}return t}function hb(t,e){var n,a,r,o,i,l,s,c,u,d=this.plotRect,h=this.config,f=this.orient,p=(this.datatype,this.chart),g=this.axisTicks,v=g.scale,m=g.styles,y=(g.chartArea,g.plotSize),b=this.axisTicks.tickH,x=b.isHierarchialLevelType,C=b.isHierarchy,k=this.axisTicks.tickInfo,w=k.rotation,_=k.ticks,S=k.ticks_formatted,O=k.customTickInfo,A=k.longestTick,T=O&&O.styles,P=("right"==f?(d.left,d.width):d.left,"bottom"==f?(d.top,d.height):d.top,_a(S)),E=-1,L=P[0],M=P[0],D=function(t){var e,n,a=t.customTickInfo,r=t.styles,o=t.orient,i=a&&a.styles;return function(t,l){return i&&(e=a.styles[l]),n=Rr(t,r.fontSize,r.fontFamily,e),i?n.width*n.height:"left"==o||"right"==o?n.width:n.width*n.height}}({orient:f,customTickInfo:O,styles:m}),I=new(Pm("markSelection"))(t);T&&(P=_a(S.map((function(t,e){return D(t,e)})),"integer"));var R={config:h,orient:f,isHierarchialLevelType:x,isHierarchy:C,tempDom:e,rotation:w,ticks:_,styles:m,chart:p,scale:v,plotSize:y},z=nb.call(this.axisTicks,{isHierarchialLevelType:x,isHierarchy:C,tempDom:e});for(l=_[M=A.index],s=T?O.userRawTicks[A.index]:A.formattedVal,I.select("selector",".zc-tick").data([l]),I.select("name","ticklabel").data([s]),Kf(t=I.parser,e),xc(e.selectAll("text"),s,null,T),ub(R,z,{node:e.selectAll("text")._groups[0][1]||e.selectAll("text").node(),index:M}),c=kc(e.selectAll("text")),u=T?pb(e):c;!n&&E<_.length-2;){r=_[a=P[E+=1]],o=T?O.userRawTicks[a]:S[a],I.select("selector",".zc-tick").data([r]),I.select("name","ticklabel").data([o]),Kf(t=I.parser,e),xc(e.selectAll("text"),o,null,T),ub(R,z,{node:e.selectAll("text")._groups[0][1]||e.selectAll("text").node(),index:E}),i=kc(e.selectAll("text")),D(c,M)>D(o,a)&&(n=!0),D(i,L)>D(c,M)&&(l=_[a],s=T?O.userRawTicks[a]:S[a],M=a,c=i,u=T?pb(e):c);!_.length||E===_.length-1||_.length;e.selectAll("g.customTick").remove()}I.select("selector",".zc-tick").data([l]),I.select("name","ticklabel").data([s]),Kf(t=I.parser,e),xc(e.selectAll("text"),u,null,T);var j=T&&O.tickValues[M]&&"group"==O.tickValues[M].type?e.selectAll("g.customTick"):e.selectAll("text"),F=e.node().getBoundingClientRect(),B=F.width,H=F.height,N=this.axisTicks.tickInfo;return"left"!==f&&"right"!==f||!na(N.width)?na(this.axisTicks.tickInfo.height)&&(H=Xa(fb(N.height,N.maxHeight)||Ht.ticks.maxTickSizeRatio_Vert,d.height)):B=Xa(fb(N.width,N.maxWidth)||Ht.ticks.maxTickSizeRatio_Hori,d.width),{axisgroup:F,preCalcTickLen:{x:F.left,y:F.top,width:B,height:H},longTickSize:j.node().getBoundingClientRect(),ticks:_}}var fb=function(t,e){return na(t)&&na(t)?t>e?e:t:t||e};function pb(t){var e=t.selectAll("text.ticklabel").selectAll("tspan").nodes(),n=t.selectAll("g.image").selectAll("image","img").nodes(),a=t.selectAll("g.customTick").nodes(),r=[];return a&&a.length?a.forEach((function(t){r.push(t.outerHTML)})):(e&&e.length&&e.forEach((function(t){r.push(t.outerHTML)})),n&&n.length&&n.forEach((function(t){r.push(t.outerHTML)}))),r}function gb(t,e,n,a,r,o,i){var l={},s="0.71em",c="0.35em",u="0em",d="left"===t||"right"===t?"width":"height",h=(o=null==o?a.tickPadding():o,i&&i.isInline),f=i&&i.inlineToPlot,p=h&&!f?i.longTickSize[d]+Math.max(r,0)+o:Math.max(r,0)+o,g="top"===t||"left"===t?-1:1,v=f?-g:g,m=h&&i.showGrid;switch(t){case"top":l.rotate=[e,0,v*p],e>=0&&e<45||e>315&&e<=360?(l.dy=h?s:u,l.dy1="-1em"):e>=45&&e<=90||e>=90&&e<=135||e>=225&&e<=315?l.dy=c:e>135&&e<225&&(l.dy=s),l.textAnchor="0"==e||180==la(e)||360==la(e)?"middle":la(e)<180?"end":"start";break;case"bottom":l.rotate=[e,0,v*p],e>=0&&e<45||e>315&&e<=360?(l.dy=h?u:s,l.dy1="1.71em"):e>=45&&e<=90||e>=90&&e<=135||e>=225&&e<=315?l.dy=c:e>135&&e<225&&(l.dy=u);var y="0"==e||180==la(e)||360==la(e)?"middle":la(e)<180?"start":"end";l.textAnchor=h?"start"==y?"end":"end"==y?"start":y:y;break;case"left":l.rotate=[e,v*p,0],e>=0&&e<45?l.dy=m?"-".concat(c):c:e>=45&&e<=90||e>=90&&e<=135?l.dy=s:(e>135&&e<225||e>=225&&e<=315||e>315&&e<=360)&&(l.dy=h?"1em":u);y="90"==e||270==la(e)?"middle":e>90&&e<270?"start":"end";l.textAnchor=h?"start"==y?"end":"end"==y?"start":y:y;break;case"right":l.rotate=[e,v*p,0],e>=0&&e<45||e>135&&e<225?l.dy=m?"-".concat(c):c:e>=225&&e<=315||e>315&&e<=360?l.dy=s:(e>=90&&e<=135||e>=45&&e<=90)&&(l.dy=u),l.textAnchor=h?"end":"90"==e||270==la(e)?"middle":e>90&&e<270?"end":"start"}return l}var vb=function(t,e){wn.setComponent(t,e)},mb=function(t){return wn.getComponent(t)};function yb(t,e){var n=this,a=n.existingTickInfo,r=a&&a.precalculate,o=n.axisTicks.tickInfo,i={x:"left"===n.orient||"right"===n.orient?"x":"y",w:"left"===n.orient||"right"===n.orient?"width":"height",y:"left"===n.orient||"right"===n.orient?"y":"x"},l={k:"top"===n.orient||"left"===n.orient?-1:1},s=$s(n.config.ticklabel),c=($s(n.config.label),Qs(n.orient,s,oc(n.config,n.type,n.chart))),u=Jn(n.config.tickmark.size,6),d=n.column.scaleType===Ju,h=o.minorTickValues,f=d||ua(h)&&h.length>0,p=n.config.subtickmark||{},g=(p.count>0||na(p.interval))&&f?Jn(n.config.subtickmark.size,6):0,v=Math.max(u,g,0),m=v+c,y=oc(n.config,n.type,n.chart),b=!!y&&ic(n.type,n.orient,n.chart.systemConf),x=y&&!b,C=r&&x,k=b?-l.k:l.k,w=y?-l.k:l.k,_=C?r.longTickSize[i.w]:x?c:m,S=C?r.axisgroup[i.w]:0,O=wa(o.rotation,0),A=O<0?360-Ze(O):O;A=O>360?Ze(A)-360:A;var T=r?_objectSpread(_objectSpread({},a.tickInfo),a.precalculate):null,P={attrs_key:i,attrs_value:l,m:w,l:k,spacing:_,tickmarkStart:S,rotation:A,rotationInfo:gb(n.orient,A||0,0,null,v,c,T),tickSizeInner:u,subTickSize:g};return{axisG:mb("cartesian.axisGPosition").call(this),tickG:mb("cartesian.tickGPosition").call(this,e),ticklabel:mb("cartesian.ticklabelPosition").call(this,P),tickmark:mb("cartesian.tickmarkPosition").call(this,P,P.tickSizeInner,t),subtickmark:mb("cartesian.tickmarkPosition").call(this,P,P.subTickSize,t),gridline:n.axisInfo&&n.axisInfo.ticks?n.axisInfo.ticks.majorTicks:null,axisline:mb("cartesian.axisLinePosition").call(this),axislinePath:mb("cartesian.axisLinePath").call(this,P)}}function bb(t){var e=this.titleH=t.call(this,this.axisTicks.tickH);return{hideTitle:e.hideAxislabel(),titleConfig:e.axislabelData(),titleMargin:e.margin(),branchTitleConfig:e.branchLabelData()}}vb("cartesian.positionFinder",yb);var xb=function(){function t(e,n){_classCallCheck(this,t);var a=e.type,r=e.order,o=e.config,i=e.plotRect,l=(e.viewParser,e.maxSize),s=e.chart;this.type=a,this.order=r,this.config=o,this.plotRect=i,this.plotRect1=i,this.maxSize=l,this.chart=s,this.initialize(e,n)}return _createClass(t,[{key:"initialize",value:function(t,e){var n=e.axisH;this._order=n.order(this.type,this.order),this.orient=n.orient(this.type,this.order),this.datatype=n.datatype(this.type,this.order),this.column=n.column(this.type,this.order),this.axisInfo=n.axisInfo(this.type,this.order),this.tickParser=e.tickH,this.titleParser=e.titleH,this.axisView=this.axisInfo.axisView}},{key:"getDefaultMarkParser",value:function(){var t="cartesian.axisPreRenderMarks";return this.axisView&&this.axisView.conf&&this.axisView.conf.preMarkParser&&(t=this.axisView.spec.preMarkParser),{placeHolder:this.chart.svg.append("g").attr("class","dummy"),markParser:mb(t).call(this)}}},{key:"title",value:function(){this.titleH.hideTitle(),this.titleH.titleConfig();renderAxisTitle.call(this)}},{key:"getTicks",value:function(t){var e={chart:this.chart,type:this.type,_order:this._order,config:this.config,plotRect:this.plotRect,plotRect1:this.plotRect1,order:this.order,orient:this.orient,datatype:this.datatype,column:this.column,maxSize:this.maxSize,axisInfo:this.axisInfo};this.axisTicks=new tb(e,this.tickParser),this.axisTicks.collect()}},{key:"preRender",value:function(t){this.plotRect=t||this.plotRect,this.preRenderTickG(),this.preRenderAxisG()}},{key:"preRenderTickG",value:function(t){this.plotRect=t||this.plotRect,this.existingTickInfo=this.axisTicks&&this.axisTicks.tickInfo?this.axisTicks:null,this.getTicks();var e=yb.call(this),n=this.axisView&&this.axisView.conf.preMarkExtender,a=this.getDefaultMarkParser(),r=a.markParser(e),o=r.mark;this.marks=r,n&&(o=$n(n,o,this));var i=this.placeHolder=a.placeHolder;this.axisTicks.precalculate=hb.call(this,o,i),this.placeHolder.remove(),this.placeHolder=null}},{key:"preRenderAxisG",value:function(){this.axisTitle=bb.call(this,this.titleParser),this.axisTitle.precalculate=eb.call(this)}},{key:"destroy",value:function(){this.marks=null}}]),t}();function Cb(t,e,n,a,r){return{x:e,y:n,transform:"rotate(".concat(t," ").concat(a||0," ").concat(r||0,")")}}function kb(t,e,n,a,r,o,i){var l=a.minmaxlabels||{},s=i.systemConf;if(!0===l.show){var c=!0===r.reversed,u=+Dn.getVal(Kn([l,a,s.chart,s.canvas,wr],"fontSize")),d=o.domain(),h=d.length-1,f=t.filter((function(t,e){return!(t-d[0]&&t-d[h])}));"top"!==e&&"bottom"!==e||"middle"!==n.textAnchor?"left"!==e&&"right"!==e||!(i.plotarea.top<u/2||i.plotarea.bottom<u/2)||f.attr("dy",(function(t){return t-d[c?h:0]?"0.9em":"-0.3em"})):f.style("text-anchor",(function(t){return t-d[c?h:0]?"end":"start"})),vc(f,[l,a,s.chart,s.canvas,wr])}}function wb(t,e,n){var a=e,r=a.chart.racing,o=r&&r.jumpDuration,i=r&&r.duration;return o=r&&o>i?i:o,function(e,r){if("x"===a.type)var s=a.chart.racing.racingBarInfoMap,c=s&&s[0];var u=t.tickG.position(e),d=na(o)&&1*o/i,h=this.getAttribute("transform"),f=t.tickG.transform(e,u),p=Q(h,f),g=l(this.parentElement).selectAll(".tick").selectAll(".ticklabel");return function(t){if("x"===a.type&&na(o)){var r,i=c&&c.get(e).jumpStartTVal;if(na(i)){var l=t<=i+d;if(r=l?0:1,t>i&&l&&t<=1){r=(t-i)/((i+d>1?1:i+d)-i)}}else r=1,t<=d&&(r=1*t/d);t=r}if(1==t&&a.chart.updating){a.chart.racing.axesRendered=!0;var s=setTimeout((function(){n(g),clearTimeout(s)}),1)}return p(t)}}}function _b(t,e,n,a,r,o,i,s,c,u,d){var h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:{};return function(u){if("none"==r)return Y;var f,p,g,v,m=n.plotarea,y=n.chartarea,b=n.canvasarea,x=n.actChartObj||n,C=x.dataObject.isAxisCategory?Js(e,x.axes.rotated):"y",k=x.dataObject.categoryHierarchy,w=n&&n.dataObject&&n.dataObject.hierarchical&&n.dataObject.hierarchical.dynamicLeafScale,_=!!k&&x.dataObject.hierarchical.pivotLayout.columns.splitColumnLeaves,S=(x.systemConf.chart.axes.xaxis,x.systemConf.chart.axes.yaxis,ec(x,C,d||0,!x.dataObject.isAxisCategory)),O=null==r||"ellipsis"==r?"..":"",A=S.tickmark.align,T=Dn.getVal(Kn([u,x.systemConf.chart,x.systemConf.canvas,wr],"fontSize")),P=(u="ticklabel"==c?u:{},tc(x,C,d||0).ticks),E=P?P.isHierarchialLevelType():o.discreteWidth&&null==o.bandwidth(),L="polar"===h.type;if(null==t&&"ticklabel"==c){f=null==s.tickValues()?o.ticks?o.ticks.apply(o,[10]):o.domain():s.tickValues();var M=i.selectAll(".tick").data(f,o);t=M.selectAll("text.ticklabel")}if("ticklabel"==c&&s&&!E&&(P&&P.isHierarchy()&&"x"==C||"between"==A)){v=!0,f=f||s.tickValues(),p=Wt.getRangeBand(o,f,0);var D=f[0],I=f[f.length-1];S.reversed&&(D=f[f.length-1],I=f[0]);var R=Ze(p.outerPaddingInPixel),z=o.bandwidth?o.bandwidth()/2:0}var j=Mh(u,y),F=na(u.width)||na(u.maxWidth),B=j.vertical,H=j.horizontal,N=V(x),W=function(t,e,n,a,r){var o={};v||L?(o.left=o.right=0,o.top=o.bottom=0):(o.left="axislabel"==t?r*(n.width-(e.left+e.width)):r*e.left,o.right=r*(n.width-(e.left+e.width)),o.top="axislabel"==t?r*(e.top-a.top):r*e.top,o.bottom="axislabel"==t?r*(e.top-a.top):r*e.bottom);return o}(c,m,b,y,.5);return n.actChartObj||"axislabel"==c&&t.node()?Y(t.node()):Y;function V(t,n){var r=wa(n,z),i={},l="x"==C&&_&&t.axes.x.leaves[0]?t.axes.x.leaves[0].scale:o;return v?"bottom"==e||"top"==e?(i.left=l(D)-Ze(r-R),i.right=l(I)+(R+r)):"left"!=e&&"right"!=e||90!=a&&270!=a||(i.top=l(I)-R,i.bottom=l(D)+R):(i.top=i.left=0,i.right="bottom"==e||"top"==e?is(t,"width",m):0,i.bottom="bottom"==e||"top"==e?0:is(t,"height",m)),i}function Y(t,s){if("none"!=r){var u=t,d=[u.childNodes[0]],f=l(u).selectAll("tspan").nodes();if(f&&f.length&&(f.sort((function(t,e){return e.textContent.length-t.textContent.length})),d=f),d){if(v){g=g||i.selectAll("text.ticklabel").nodes().length;var m=Ze(p.outerPaddingInPixel);"bottom"==e||"top"==e?F?H=j.horizontal:90!=a&&270!=a&&(H=0==s||s==g-1?2*m:2*Ze(p.rangeBand)):"left"!=e&&"right"!=e||90!=a&&270!=a||(B=0==s||s==g-1?2*m:2*Ze(p.rangeBand))}for(var y=0;y<d.length;y++){var b,x=f&&f.length?d[y]:u,C=x.textContent,k="tspan"==x.nodeName?Dr:Ir,_=R=k(x),S=-1,A={width:H,height:B},P=v||L?0:T;if(E&&"ticklabel"==c&&!n.actChartObj){var M="left"==e||"right"==e?H:Math.abs(o.discreteWidth(t.__data__))||H,D=Xe(H,M);return void yc(x,x,x.textContent,D,B,R,O)}if("ticklabel"==c){if(H<R.width){S=(R.width-H)/R.width;var I=Ue((1-S)*x.textContent.length);x.textContent=x.textContent.substring(0,I-2)+O,R=k(x)}if(B<R.height){S=(R.height-B)/R.height;I=Ue((1-S)*x.textContent.length);x.textContent=x.textContent.substring(0,I-2)+O,R=k(x)}}var R,z=L?{left:0,top:0}:Ga(i.selectAll(".domain")),Y={left:R.left-z.left,right:R.left+R.width-z.left,top:R.top-z.top,bottom:R.top+R.height-z.top,width:R.width,height:R.height};if(h.edge?N=h.edge(x,R):w&&o.bandwidth&&(N=V(n,o.bandwidth(t.__data__))),"left"!=e&&"right"!=e||0==a||180==a||360==a?"bottom"!=e&&"top"!=e||"middle"!=x.style["text-anchor"]||0!=a&&180!=a&&360!=a?"bottom"!=e&&"top"!=e||90==a||270==a||(Y.left+Ge(P,W.left)<N.left||Y.right-Ge(P,W.right)>N.right)&&(b=!0,hc(x,x.textContent,Y,N,e,O,W,A,x)):(Y.left+Ge(P,W.left)<N.left||Y.right-Ge(P,W.right)>N.right)&&(b=!0,hc(x,x.textContent,Y,N,e,O,W,A,x,null,!0)):(Y.top+Ge(P,W.top)<N.top||Y.bottom-Ge(P,W.bottom)>N.bottom)&&(b=!0,hc(x,x.textContent,Y,N,e,O,W,A,x)),"ticklabel"==c&&!b)(R=k(x)).width==_.width&&R.height==_.height||yc(x,u,C,A.width,A.height,R,O);x.textContent==O&&(x.textContent=n.actChartObj?".":"")}}}}}(u)}vb("cartesian.prerender",xb),vb("cartesian.axisGPosition",(function(){var t=this,e="right"==t.orient?t.plotRect.left+t.plotRect.width:t.plotRect.left,n="bottom"==t.orient?t.plotRect.top+t.plotRect.height:t.plotRect.top;return{transform:"translate(".concat(e,",").concat(n,")")}})),vb("cartesian.axisLinePosition",(function(){var t=this;return{x1:0,y1:0,x2:"bottom"==t.orient||"top"==t.orient?t.plotRect.width:1e-4,y2:"bottom"==t.orient||"top"==t.orient?1e-4:t.plotRect.height}})),vb("cartesian.axisLinePath",(function(t){var e=this,n=e.axisInfo.scale||e.axisTicks.tickInfo.scale,a=n.origRange?n.origRange:n.range(),r=+a[0]+.5,o=+a[a.length-1]+.5;return"left"===e.orient||"right"==e.orient?"M".concat(t.attrs_value.k*(0+t.tickmarkStart),",").concat(r,"h","0.5V").concat(o,"H").concat(t.attrs_value.k*(0+t.tickmarkStart)):"M".concat(r,",").concat(0*t.attrs_value.k,"V0.5H").concat(o,"V").concat(0*t.attrs_value.k)})),vb("cartesian.tickGPosition",(function(t){var e=this,n=e.axisTicks.tickInfo,a=this.axisTicks.tickH.isHierarchialLevelType(),r={position:function(r){var o=t||e.axisInfo.scale||n.scale,i=0;return o.bandwidth&&(o.discreteWidth?a?i=0:(i=Math.max(0,o.bandwidth(r)-1)/2,i=Math.round(i)):(i=Math.max(0,o.bandwidth()-1)/2,o.round()&&(i=Math.round(i)))),wa(o(r),0)+(i||0)},transform:function(t,n){var a=n||r.position(t),o="bottom"==e.orient||"top"==e.orient?"".concat(a+.5,",0"):"0,".concat(a+.5);return isNaN(a)?null:"translate(".concat(o,")")}};return r})),vb("cartesian.ticklabelPosition",(function(t){var e=this,n=e.axisTicks.tickInfo,a=this.axisTicks.tickH.isHierarchialLevelType(),r=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},t.attrs_key.x,t.l*t.spacing),t.attrs_key.y,0),"dy",n&&"zigzag"==n.mode&&t.rotationInfo.dy1?t.rotationInfo.dy1:t.rotationInfo.dy),"_dy",t.rotationInfo.dy),"transform","rotate(".concat(t.rotationInfo.rotate[0]," ").concat(t.rotationInfo.rotate[1]," ").concat(t.rotationInfo.rotate[2],")")),"transform1",(function(r,o){var i=e.axisInfo.scale||n.scale,l=[0,0];if(e.config.tickTransform&&(l=$n(e.config.tickTransform,r,i,e.chart)),a&&i.bandwidth&&i.discreteWidth){var s=i.discreteWidth(o)/2||0,c="bottom"==e.orient||"top"==e.orient?"".concat(s+l[0],",").concat(l[1]):"".concat(l[0],",").concat(s+l[1]);return"translate(".concat(c,")")}return"rotate(".concat(t.rotationInfo.rotate[0]," ").concat(t.rotationInfo.rotate[1]+l[0]," ").concat(t.rotationInfo.rotate[2]+l[1],")")})),"textAnchor",t.rotationInfo.textAnchor),"customTransform",(function(t,a,r){var o=e.axisInfo.scale||n.scale,i=e.config.tickTransform;if(i){var l=$n(i,t,o,e.chart);r+="x"==a?l[0]:l[1]}return r})),o={attrs_key:t.attrs_key};return _objectSpread(_objectSpread({},r),o)})),vb("cartesian.tickmarkPosition",(function(t,e,n){var a=this.axisTicks.tickInfo,r=t.attrs_value.k*t.tickmarkStart+t.m*e,o=_defineProperty(_defineProperty(_defineProperty({},"".concat(t.attrs_key.x,"1"),(a.isInline&&a.inlineToPlot,t.attrs_value.k*t.tickmarkStart)),"".concat(t.attrs_key.x,"2"),a.isInline&&!a.inlineToPlot||n?r:0),"x",t.attrs_key.x),i={attrs_key:t.attrs_key};return _objectSpread(_objectSpread({},o),i)})),vb("cartesian.axisTitle",(function(){var t,e,n,a=this,r=a.axisTicks,o=r.tickInfo,i=r.precalculate.axisgroup,l=a.axisTitle,s={top:0,right:90,bottom:0,left:270}[a.orient],u="-0.25em",d=i,h=l.precalculate?Oo(a.type,a.order,a.orient,a.chart,a.chart.plotarea):null,f=wa(h,this.plotRect),p=(a.config.ticklabel,l.branchTitleConfig),g=r.margin,v=l.titleMargin,m=Wo({},p.label.text,"ordinal",this.chart,"axis"),y=vc(null,[p.label,this.chart.systemConf.chart,this.chart.systemConf.canvas,wr]),b=o.isInline,x=o.inlineToPlot,C=b&&!x?0:g[a.orient],k=a.axisInfo.scale||a.axisTicks.tickInfo.scale,w=k.origRange?k.origRange:k.range(),_=Ze(w[1]-w[0]);switch(a.orient){case"top":var S=x?0:d.height+C;n=Cb(s,t=f.width/2,-(e=S+v.bottom));break;case"right":S=x?0:d.width+C;n=Cb(s,t=f.height/2,-(e=S+v.left));break;case"bottom":S=x?0:d.height+C;u="0.91em",n=Cb(s,t=a.chart.defaultScroll?f.width/2:c([w[0],w[1]])+_/2,e=S+v.top);break;case"left":n=Cb(s,-(t=(S=x?0:d.width+C)+v.right),e=f.height/2,-t,e)}return{x:n.x,y:n.y,transform:n.transform,dy:u,textAnchor:"middle",text:m,styleObj:y}})),vb("cartesian.axisPreRenderMarks",(function(){var t,e=this,n=vc(null,[e.config.ticklabel,e.chart.systemConf.chart,e.chart.systemConf.canvas,wr]);return function(a){var r=a.ticklabel.attrs_key.x,o=a.ticklabel.attrs_key.y,i=a.tickmark.attrs_key.x;return{renderOnDemand:!0,datatype:e.datatype,column:e.column,scale:{accessor:function(){}},order:e._order,config:e.config,orient:e.orient,mark:{mark:"g",selector:".axisgroups",data:[1],properties:{attrs:{transform:a.axisG.transform}},children:[{mark:"g",selector:".zc-tick",data:[e.axisTicks.tickInfo.ticks_formatted[0]],properties:{attrs:{transform:function(t){var n=e.axisTicks.tickInfo.scale.discreteWidth||e.axisTicks.useTickAsIndices?e.axisTicks.tickInfo.scale.domain()[0]:t;return a.tickG.transform(n)}}},children:[{name:"ticklabel",selector:".ticklabel",mark:"text",datum:function(){},data:[e.axisTicks.tickInfo.ticks_formatted[0]],properties:{text:function(t,e){return t},attrs:_defineProperty(_defineProperty(_defineProperty(_defineProperty({},r,a.ticklabel[r]),o,a.ticklabel[o]),"dy",a.ticklabel.dy),"transform",a.ticklabel.transform),styles:_objectSpread({"text-anchor":a.ticklabel.textAnchor},n)}},{name:"tickmark",selector:".tickmark",mark:"line",data:[e.axisTicks.tickInfo.ticks_formatted[0]],properties:{attrs:_defineProperty(_defineProperty({},"".concat(i,"1"),a.tickmark["".concat(i,"1")]),"".concat(i,"2"),a.tickmark["".concat(i,"2")])}}]},{name:"axisline",selector:".axisline",mark:"line",data:[1],properties:{attrs:{x1:a.axisline.x1,y1:a.axisline.y1,x2:a.axisline.x2,y2:a.axisline.y2}}}]},axisTitle:{onReady:function(){return{mark:"g",selector:".axislabelgroup",data:[1],children:[{name:"axislabel",selector:".axislabel",mark:"text",data:[(t=mb("cartesian.axisTitle").call(e)).text],properties:{text:function(t,n){return e.axisTitle.hideTitle?"":t},attrs:{x:t.x,y:t.y,dy:t.dy,transform:t.transform},styles:_objectSpread({"text-anchor":t.textAnchor},t.styleObj)}}]}}}}}})),vb("cartesian.axisMarks",(function(){var t=this,e=vc(null,[t.config.ticklabel,t.chart.systemConf.chart,t.chart.systemConf.canvas,wr]),n=t.chart.racing&&t.chart.racing.syncTransition;return function(a,r,o,i,s){var c=null==o.tickValues?o.scale.ticks?o.scale.ticks.apply(o.scale,[]):o.scale.domain():o.tickValues;t.axisTicks.tickInfo.ticklabelObj=c;var u=L();c.map((function(t,e){return u.set(t,e)}));var d=t.config.ticklabel.events,h=null!=d&&0==Jn(d.enabled,!0)?"auto":d&&d.cursor||"pointer",f={};o.syncTransition||(f={transform:function(t){return a.tickG.transform(t)}});var p=a.ticklabel.attrs_key.x,g=a.ticklabel.attrs_key.y,v=a.tickmark.attrs_key.x,m=function(e,n){var r=null==o.tickFormat?o.scale.tickFormat?o.scale.tickFormat.apply(o.scale,[]):function(t){return t}:o.tickFormat,i=wc("g",".tick",c,s,null,(function(t){return o.scale(t)}),{remove:!1}),d=i.select("text.ticklabel");kb(d,t.orient,a.ticklabel,t.config.ticklabel,t.config,o.scale,t.chart),d.each((function(t,e){r.call(this,this.__data__,u.get(t))})),!0===t.config.ticklabel.tooltip&&e.each((function(t){mc(l(this),this.formattedVal)}))},y=t.chart.racing,b=y&&y.jumpDuration,x=y&&y.duration;b=y&&b>x?x:b;var C={renderOnDemand:!0,datatype:t.datatype,column:t.column,scale:{accessor:function(){}},order:t._order,config:t.config,orient:t.orient,mark:{mark:"g",selector:".axisgroups",data:[1],children:[{mark:"path",selector:".domain",data:[null],order:".tick",config:{strokeWidth:wa(t.config.axisline.strokeWidth,1),dashStyle:t.config.axisline.style,lineCap:t.config.axisline.lineCap},properties:{attrs:{d:function(){return a.axislinePath}},styles:{stroke:!1===t.config.axisline.show?"transparent":t.config.axisline.color||"#000",fill:"none"}}},{mark:"g",selector:".tick",data:c,dataAccessor:function(t){return o.scale(t)},config:{enter:n&&"x"===t.type?{opacity:1e-6,transform:function(){var e;return e=t.chart.axes.rotated&&"bottom"===t.chart.axes.y.groups[0].prerenderComp.orient?"0,-20":"0,".concat(t.chart.plotarea.height+20),"translate(".concat(e,")")}}:{opacity:1e-6,transform:function(t){return a.tickG.transform(t)}}},anime:{update:{transition:i,opacity:1,transform:n?{property:"attrTween",to:wb(a,t,m)}:function(t){var e=a.tickG.position(t);return this.__axis=e,a.tickG.transform(t,e)}},exit:n&&"x"===t.type?{transition:i,opacity:1e-6,transform:na(b)?{property:"attrTween",to:function(e){var n;a.tickG.position(e);n=t.chart.axes.rotated&&"bottom"===t.chart.axes.y.groups[0].prerenderComp.orient?"0, -".concat(t.chart.plotarea.top):"0,".concat(t.chart.plotarea.height+20);var r=y.duration,o=1*b/r,i=this.getAttribute("transform"),l="translate(".concat(n,")"),s=Q(i,l);return function(t){var e=1;return t<=o&&(e=1*t/o),s(e)}}}:function(){var e;return e=t.chart.axes.rotated&&"bottom"===t.chart.axes.y.groups[0].prerenderComp.orient?"0,-20":"0,".concat(t.chart.plotarea.height+20),"translate(".concat(e,")")}}:{transition:i,opacity:1e-6,transform:function(t){return isFinite(a.tickG.position(t))?a.tickG.transform(t):this.getAttribute("transform")}}},properties:{attrs:f},children:[{name:"tickmark",selector:".minorTicks",mark:"line",data:function(t,e){return[t]},config:{strokeWidth:wa(t.config.tickmark.strokeWidth,1)},properties:{attrs:_defineProperty(_defineProperty({},"".concat(v,"1"),a.tickmark["".concat(v,"1")]),"".concat(v,"2"),a.tickmark["".concat(v,"2")]),styles:{fill:"none","shape-rendering":"crispedges",stroke:t.config.tickmark.color}}},{name:"gridline",selector:".majorTicks",mark:"line",data:function(t,e){return o.isGridShow&&o.renderGrid&&a.gridline?[t]:[]},config:{strokeWidth:wa(t.config.grid.strokeWidth,1),dashStyle:t.config.grid.style,lineCap:t.config.grid.lineCap},properties:{attrs:{x1:a.gridline&&a.gridline.x1,x2:a.gridline&&a.gridline.x2,y1:a.gridline&&a.gridline.y1,y2:a.gridline&&a.gridline.y2},styles:{fill:"none","shape-rendering":"crispedges",stroke:t.config.grid.color}}},{name:"ticklabel",selector:".ticklabel",mark:"text",datum:function(){},data:function(t){return o.renderTicklabel?[t]:[]},dataAccessor:function(t){return o.scale(t)},onEnd:n&&t.chart.updating?null:m,config:{enter:{}},properties:{attrs:_defineProperty(_defineProperty(_defineProperty(_defineProperty({},p,(function(t){var e=a.ticklabel[p];return a.ticklabel.customTransform(t,p,e)})),g,(function(t){var e=a.ticklabel[g];return a.ticklabel.customTransform(t,g,e)})),"dy",(function(e){return"zigzag"==t.axisTicks.tickInfo.mode&&u.get(e)%2?a.ticklabel.dy:a.ticklabel._dy})),"transform",(function(t){return a.ticklabel.transform1(t,u.get(t))})),styles:_objectSpread({"text-anchor":a.ticklabel.textAnchor,cursor:h},e)}}]},{mark:"g",selector:".zc-subMinorTicks",data:o.isSubTickMarkShow&&ua(o.minorGrid)?[1]:[],children:[{name:"sub-minor-ticks",selector:".zc-sub-ticks",mark:"line",data:o.isSubTickMarkShow?o.minorGrid:[],config:{strokeWidth:wa(t.config.subtickmark.strokeWidth,1)},properties:{attrs:_defineProperty(_defineProperty(_defineProperty({},"".concat(v,"1"),a.subtickmark["".concat(v,"1")]),"".concat(v,"2"),a.subtickmark["".concat(v,"2")]),"transform",(function(t){return a.tickG.transform(t)})),styles:{fill:"none","shape-rendering":"crispedges",stroke:t.config.subtickmark.color}}}]},{mark:"g",selector:".zc-subMajorTicks",data:o.isMinorGridShow&&ua(o.minorGrid)?[1]:[],children:[{name:"sub-major-ticks",selector:".zc-sub-major-ticks",mark:"line",data:a.gridline&&o.isMinorGridShow?o.minorGrid:[],config:{strokeWidth:wa(t.config.minorGrid.strokeWidth,1),dashStyle:t.config.minorGrid.style,lineCap:t.config.minorGrid.lineCap},properties:{attrs:{x1:a.gridline&&a.gridline.x1,x2:a.gridline&&a.gridline.x2,y1:a.gridline&&a.gridline.y1,y2:a.gridline&&a.gridline.y2,transform:function(t){return a.tickG.transform(t)}},styles:{fill:"none","shape-rendering":"crispedges",stroke:t.config.minorGrid.color}}}]},{mark:"g",selector:".axislabelgroup",parent:s.node().parentElement,data:[1],children:[{mark:"text",selector:".axislabel",data:t.axisTitle.hideTitle?[]:[r.text],properties:{text:function(t,e){return t},attrs:{x:r.x,y:r.y,dy:r.dy,transform:r.transform},styles:_objectSpread({"text-anchor":r.textAnchor},r.styleObj)}}]}]}};return C}}));var Sb={};function Ob(t){var e,n=t.type,a=t.order,r=t.chart,o=t.plotRect,i=t.side,l=r.dataObject;if("y"===n&&r.datalabels.hasFixedPosition){var s=r.cache.correction,c="label-".concat(n,"-").concat(a),u=0;if(Xn(s[c])){var d=l.getEncode("y",a);u=Wu("preCalculation")(n,d.seriesData,r)||0,s[c]=[u,u]}else u=s[c][1]||0;e=u}else e=0;var h=l.hierarchical&&function(t){var e,n=t.type,a=t.order,r=t.chart.dataObject.hierarchical,o=r&&r.categoryTree,i=r.pivotLayout,l=i.getRootNodeList("row"),s=i.getRootNodeList("column"),c=l.getLeavesCount(),u=s.splitColumnLeaves;if("y"==n&&o&&c){var d=[a*l.leafSize+l.leafSize,a*l.leafSize];e=Ze(d[1]-d[0])}if("x"==n&&o&&u){d=[a*s.leafSize,a*s.leafSize+s.leafSize];e=Ze(d[1]-d[0])}return e}(t)||o[i];return h-e}function Ab(t){t.type,t.order;var e=t.chart,n=(t.plotRect,t.side,e.dataObject),a=function(t){var e=t.chart,n=(t.plotRect,t.side),a=t.plotRect1,r=zb(t)?Eb(t):is(e,n,a);return r-Lb(t,r)}(t);if(n.hierarchical){var r=Pb(t);if(r)a=r-Lb(t,a)}return a}function Tb(t,e){var n=t.type,a=(t.order,t.chart),r=t.plotRect1,o=t.side,i=a.dataObject,l=zb(t);return t.datatype==Eo&&"y"==n?Ob(t):i.hierarchical?Pb(t)||is(a,o,r):l&&e?Eb(t):is(a,o,r)}function Pb(t){t.type,t.order;var e=t.chart.dataObject.hierarchical.pivotLayout.getRootNodeList("column");if(e.splitColumnLeaves)return e.leafSize}function Eb(t){var e=Fb(t).range();return Ze(e[1]-e[0])}function Lb(t,e){var n=t.type,a=(t.order,t.chart),r=(t.plotRect,a.dataObject),o=a.chartTypes[0].name,i=a.systemConf.chart.plot.plotoptions[o],l=r.isAxisCategory&&i.outerPadding||0;return"x"===n?e*l*2:0}function Mb(t){var e=t.type,n=t.order,a=t.chart,r=function(t){var e,n,a=t.alignMode,r=t.alignMode&&-1!=t.alignMode.indexOf("rotate"),o=na(t.rotation),i=0,l=45;if(r){var s=/\(([^)]+)\)/.exec(a);i=s?parseInt(s[1]):"auto"}else o&&!na(t.alignMode)?(i="auto"==t.rotation?t.rotation:parseInt(t.rotation),a="rotate",r=!0):Array.isArray(a)&&a.length?(e=!0,a.some((function(t){if(-1!=t.indexOf("rotate")){a="rotate",r=!0;var e=/\(([^)]+)\)/.exec(t);return i="auto",n=e,l=e?parseInt(e[1]):l,!0}}))):na(t.alignMode)||(a="rotate(0)",r=!0);return{tickAlignmentMode:a,tickRotateMode:r,rotation:i,hasPriorityOrder:e,hasDefinedAutoRotation:n,tickAutoRotation:l}}(t.config.ticklabel),o=(r.isRotateMode,r.rotation),i=r.tickAutoRotation,l=(r.hasDefinedAutoRotation,function(t,e,n,a){var r;return t.dataObject.categoryHierarchy&&"x"==e&&(r=ko(e,n,t)),"auto"==a&&!r}(a,e,n,o)),s=a.dataObject.categoryHierarchy,c=function(t){return t.dataObject&&t.dataObject.hierarchical&&t.dataObject.hierarchical.categoryTree}(a)?ko(e,n,a):"x"==e&&n>0,u=c?0:o;r.alignmentMode,r.hasPriorityOrder;return l||(u<0?u=360-Ze(u):u>=360&&(u=Ze(u)%360)),i&&(s&&"x"==e&&!c&&Co(e,t.chart)||!s&&"x"==e&&t.chart.axes.x.count>1?i=90:i<0?i=360-Ze(i):i>360&&(i=Ze(i)%360)),r.rotation=u,r.tickAutoRotation=i,r}function Db(t,e){var n=t.chart,a=t.type,r=t._order,o=t.plotRect,i=(n.dataObject.hierarchical,Wt.getScale(n,n.dataObject,o,t.orient,r,n.dataset,a,e));return n.dataObject.categoryHierarchy&&function(t,e){var n=e.chart,a=e.type,r=(e.order,n.dataObject.hierarchical),o=r.pivotLayout.getRootNodeList("row"),i=r.pivotLayout.getRootNodeList("column"),l=o.getCount(),s=o.hasMultiCluster(),c=o.leafSize,u=bo(e.axisOrder||0,null,"y",n),d=n.systemConf.chart.axes.yaxis[u],h=n.systemConf.chart.axes.xaxis.splitLeaves;if(s&&"y"==a){if(l){var f=n.axes.y.branches[0].scale,p=[f(e.axisOrder)+f.discreteWidth(e.axisOrder),f(e.axisOrder)];return(n.axes.rotated&&!d.reversed||!n.axes.rotated&&d.reversed)&&(p=p.reverse()),t.copy().range(p)}p=[e.axisOrder*c+c,e.axisOrder*c];return n.axes.rotated&&(p=p.reverse()),t.copy().range(p)}if("x"==a&&h){p=[e.axisOrder*i.leafSize,e.axisOrder*i.leafSize+i.leafSize];t.copy().range(p)}}(i,t),i}function Ib(t){var e=t.type,n=t.order,a=t.chart,r=t.config,o=t.plotRect,i=(t.datatype,t.column),l=a.dataObject,s=(a.dataset,a.systemConf,i.datatype,l.hierarchical,i.scaleType,Ks(e,a.axes.rotated)?"height":"width");Mh(r.ticklabel,o),tc(a,e,n);return Rb(_objectSpread(_objectSpread({},t),{},{side:s}))}Sb.getAvailableBound=function(t,e){var n=t.width,a=t.height,r=Xe(n/2,Xa(e.outerPadding,n/2,0)),o=Xe(a/2,Xa(e.outerPadding,a/2,0));return{x:r,y:o,width:n-2*r,height:a-2*o}},Sb.updatePlotareaByBandWidth=function(t,e){var n,a=t.dataObject;if((a.noofBarEnabledSeries||a.isCombinationalChart)&&a.allChartTypes.some((function(e){var a=pi.helpers.getChartType(e,"string");if(Cl(e))return n=t.systemConf.chart.plot.plotoptions[a],!0})),n&&n.strictBandWidth){var r=a.getCategories("x").length,o=wa(n.padding,.2),i=n.outerPadding;i=na(i)?i:.2,i=Wt.getOuterPadding(u?[0,e.width]:[e.height,0],r,o,i);var l=n.levelMarker,s=n.targetMarker||{},c=t.plotarea,u=t.axes.rotated,d=(u?e.height:e.width)/(r-o+2*i)*(1-o),h=[],f=Jn(l.bandWidth,d),p=Jn(l.maxBandWidth,d),g=Xe(f,p,d);l.enabled&&h.push(g),s.enabled&&h.push(na(s.size)?Xe(10*s.size,d):0);var v=Jn(n.bandWidth,g),m=Jn(n.maxBandWidth,v);h.push(Xe(v,m,d));var y=Ge.apply(null,h);y=y/(1-o)*(r-o+2*i),u?(c.height=y+(c.height-e.height),c.top+=c.adjust=(e.height-y)/2):(c.width=y+(c.width-e.width),c.left+=c.adjust=(e.width-y)/2)}};var Rb=function(t){var e,n=t.chart,a=t.type,r=t.config,o=t.plotRect,i=t.datatype,l=(t.order,t.maxSize,n.dataObject),s=(n.dataset,n.systemConf),c=n.dataObject,u=c.hierarchical,d=function(t){return t.axisInfo.prerenderComp&&t.axisInfo.prerenderComp.axisTicks.tickInfo}(t),h=n.chartTypes[0].name,f=n.systemConf.chart.plot.plotoptions[h],p=function(t){var e=t.type,n=t.order,a=t.chart,r=a.dataObject,o=(a.systemConf,r.hierarchical);return{isHierarchy:function(){var t=a.axes;return"x"==e&&t.x.count>1||r.categoryHierarchy&&"y"==e&&t.y.count>1},isHierarchialLevelType:function(){if(o){var t="x"==e?"column":"row",i=o.pivotLayout.getRootNodeList(t),l=i.getCount(),s=i.getLeavesCount(),c=a.axes,u="x"==e&&c.x.count>1||r.categoryHierarchy&&"y"==e&&c.y.count>1;return"x"==e&&u&&n>s-1||"y"==e&&u&&l&&n>s-1}}}}(t),g=function(t,e){var n=t.type,a=t.order,r=t.chart,o=r.dataObject,i=(r.systemConf,o.hierarchical);return{getActualTicklabel:function(t){var n=t,a=n.ticks;return i&&e.isHierarchy()&&!e.isHierarchialLevelType()&&n.tickValueIndices?function(t){var e=n.tickValueIndices.indexOf(t);return-1!=e?a[e]:null}:(r.dataObject.isWaterfallEnabled&&n.tickValueIndices,function(t){return a[t]})},getTicksforAxisComp:function(t){var o=r.dataset.getDataType(n,a);return e.isHierarchy(r,n)&&r.dataObject.hierarchical.categoryTree&&(o==To&&"x"==n&&!r.dataObject.hierarchical.pivotLayout.columns.splitColumnLeaves||"ordinalNonLinear"==o)||i&&e.isHierarchialLevelType()&&r.dataObject.hierarchical.groupByTime?null:r.dataObject.isWaterfallEnabled&&"x"==n?t.tickValueIndices||null:t.ticks}}}(t,p);u&&(e=function(t){var e=t.type,n=t.order,a=t.chart,r=(a.dataObject,a.systemConf),o=a.dataObject.hierarchical,i=o&&o.categoryTree,l=o.pivotLayout,s=l.getRootNodeList("row"),c=l.getRootNodeList("column").splitColumnLeaves;return{useTickAsIndices:o.categoryTree&&"x"==e&&!c&&0==n,autoScrollY:function(){var t=s.count?s.getDomainForBranch(0).length:0;return("auto"===r.chart.width||"auto"===r.chart.height)&&"y"==e&&s.count&&n==t-1},pivotLeafSize:function(){return{width:0,height:s.leafSize}},pivotLeafCount:function(){return s.getLeavesCount()},isBranchType:function(){return i?ko(e,n,a):"x"==e&&n>0},isLeafType:function(){var t=i?ko(e,n,a):"x"==e&&n>0;return i&&"x"==e&&!t&&Co(e,a)||!i&&"x"==e&&a.axes.x.count>1}}}(t));var v={domain:function(){return function(t){return t.datatype==Eo||t.datatype==Po?function(t){var e=t.type,n=t.order,a=t.chart,r=t._order,o=a.dataObject,i=fa(a,"behaviouralEvents.eventManager.behaviours")||{},l=i.PLOT_ZOOM||i.PLOT_BRUSH||i.CHART_SCROLL,s="x"===e&&0===n?a.viewPortExtent:pn;return l&&(s=Vy(t)),na(s)?s:"x"===e?o.getMinMaxX():o.getMinMaxY(r,Oe,a.datalabels.hasFixedPosition)}(t):function(t){var e=t.type,n=t.order,a=t.chart,r=a.dataObject,o=fa(a,"behaviouralEvents.eventManager.behaviours")||{},i=o.PLOT_ZOOM||o.PLOT_BRUSH||o.CHART_SCROLL,l="x"===e&&0===n?a.viewPortExtent:null;return i&&(l=Vy(t)),l=r.hierarchical?function(t){var e=t.type,n=t.order,a=t.chart,r=a.dataObject,o=a.dataObject.hierarchical,i=o.pivotLayout.getRootNodeList("column"),l=i.splitColumnLeaves;return o.categoryTree&&"x"==e&&!l&&0==n?i.getClusterNodes(0):r.getCategories(e,n).slice(0)}(t):l||r.getCategories(e,n).slice(0),l}(t)}(t)},scale:function(e){return jb(t,null,e)},simpleScale:function(){return jb(t,!0)},size:function(){return function(t){if(t.datatype==Eo)return Ob(t);if(t.datatype==Po)return Ab(t);if(t.datatype==To||t.datatype==Lo)return Ab(t)}(t)},orient:function(){},filter:function(){return t.chart.renderVisiblePointsOnly},useTickAsIndices:u?e.useTickAsIndices:i==To&&c.isWaterfallEnabled,styles:function(){return function(t){var e=t.config.ticklabel,n=t.chart.systemConf;return{fontSize:parseFloat(Dn.getVal(Kn([e,n.chart,n.canvas,wr],"fontSize"))),fontFamily:Dn.getVal(Kn([e,n.chart,n.canvas,wr],"fontFamily"))}}(t)},rotation:function(){return Mb(t)},format:function(){return Bb(t)},formatter:function(){return function(t){var e=t.type,n=(t.order,t.chart);t.datatype;return"y"===e&&n.dataObject.isPercentChart?Xo:Wo}(t)},formatAccessor:Hb,side:function(){return function(t,e){return Ks(e,t.axes.rotated)?"height":"width"}(n,a)},groupby:function(){return function(t){var e=Bb(t),n=ua(e.groupby)&&e.groupby.length>0||"AUTO"===e.groupby&&"YEAR"!==e.subfunction;n&&"AUTO"===e.groupby&&(e.AUTO_GROUP_ORDER=pi.HierarchicalTimeDataAdapter.getAutoGroupOrder(e.subfunction).reverse());return n}(t)},maxSize:function(){return d?d.maxTickSize:Mh(r.ticklabel,o)},autoScrollX:function(){return!(i!=To&&i!=Lo||"auto"!==s.chart.width&&"auto"!==s.chart.height)},autoScrollY:function(){return("auto"===s.chart.width||"auto"===s.chart.height)&&u&&"y"==a},chartPadding:function(){return l.isAxisCategory?f.padding||.2:0},chartOuterPadding:function(){return l.isAxisCategory&&f.outerPadding||0},logTickH:function(){return function(t){var e=t.type,n=t.order,a=t.chart,r=t.column,o=t.config,i=a.dataObject,l=tc(a,e,n);l.logDomain=null;var s="x"===e&&0===n?a.viewPortExtent:pn,c=na(s)?s:"x"===e?i.getMinMaxX():i.getMinMaxY(n,Oe,a.datalabels.hasFixedPosition),u="x"===e?i.getMinMaxX(0):i.getMinMaxY(n,0),d=!qa(u),h=u.slice(0),f=!(i.isPercentChart||i.hasLevelMarker||i.isWaterfallEnabled),p=null,g=i.getEncode("y",n);0===u[0]&&0===u[1]&&(r.scaleType=null,c="x"===e?i.getMinMaxX(0):i.getMinMaxY(n,Oe,a.datalabels.hasFixedPosition),r.scaleType=Ju),g&&oh(g,a.dataObject,a)&&d&&"y"===e&&!na(o.minRange)&&(p=0,h.push(0),h=j(h));var v={dataMinMax:u,usePadding:f,axisObj:o,adjustToBase:p,hasFixedPosition:a.datalabels.hasFixedPosition,axisInfo:l,domainCopy:h,domain:c};return i.logTickH=v,v}(t)},scrollThickness:function(){return fa(n.systemConf,"chart.scroll.categoryThickness")},chartRect:function(){return n.chartarea},plotSize:function(){return Tb(t,!0)},plotSize_no_zoom:function(){return Tb(t,!1)},bzsEnabled:function(){return zb(t)},filteredTickIndices:function(e){return c.isWaterfallEnabled&&Fb(t)&&ua(e)},subFormatType:Nb,margin:function(){return $s(r.ticklabel)},padding:function(e){return Qs(t.orient,e,oc(r,a,n))},getActualTicklabel:g.getActualTicklabel,getTicksforAxisComp:g.getTicksforAxisComp,isHierarchy:p.isHierarchy,isHierarchialLevelType:p.isHierarchialLevelType};return _objectSpread(_objectSpread({},v),e)};function zb(t){var e=t.chart,n=fa(e,"behaviouralEvents.eventManager.behaviours")||{};return n.PLOT_ZOOM||n.PLOT_BRUSH||n.CHART_SCROLL}function jb(t,e,n){var a,r=t.chart,o=t.type,i=t.order,l=t.column,s=tc(r,o,i),c=fa(r,"behaviouralEvents.eventManager.behaviours")||{};((c.PLOT_ZOOM||c.PLOT_BRUSH||c.CHART_SCROLL)&&(a=s.scale),a)||(e?(a=Eh(l.scaleType||"linear")).isD3=!0:a=Db(t,n));return a}function Fb(t){return tc(t.chart,t.type,t.order).scale}function Bb(t){t.type;var e=t.order,n=t.chart,a=t.column,r=function(t){var e=t.type,n=t.order,a=t.chart,r=a.dataObject,o=(a.systemConf,a.dataSplicer.getEncode());return!r.hierarchical&&o[e][n].length>1}(t);return wa(r?Zs(e,n):a[a.datatype],{})}function Hb(t,e){t.type;var n=t.order,a=t.chart,r=(t.datatype,t.column),o=e.formatter,i=e.maxSize,l=e.styles,s=e.format,c=e.groupby,u=e.rotationConfig,d="wrapOnSpace"==u.tickAlignmentMode||"wrapAll"==u.tickAlignmentMode,h=c?n:null;return function(t){var e=o(s,t,r.datatype,a,"axis",null,null,h);return e=d?zh(e,u.tickAlignmentMode,i.horizontal,i.vertical,l.fontSize):e}}function Nb(t,e){var n=t.subfunction;if(!na(n)||"AUTO"===n){var a=ii(e);n=t.subfunction=a.subFunction}return n}vb("tickH",Ib);var Wb=function(t,e){var n,a=t.dataObject,r=t.dataset,o=t.axes.rotated,i=a.hierarchical;return i&&(n=Vb(t)),{order:function(t,e){return i?n.order(t,e):e},orient:function(t,a){return e.orient?e.orient:i?n.orient(t,a):"x"==t?0==a?o?"left":"bottom":o?"right":"top":0==a?o?"bottom":"left":o?"top":"right"},datatype:function(t,e){return r.getDataType(t,e)},column:function(e,n){var a=r.getColumnIdx(e,n);return t.dataSplicer.getColumns()[a]},axisInfo:function(e,n){return tc(t,e,n)},rotated:o}},Vb=function(t){var e=t.dataObject.hierarchical,n=e&&e.categoryTree,a=e.pivotLayout,r=a.getRootNodeList("row"),o=a.getRootNodeList("column"),i=r.getLeavesCount(),l=r.getClustersCount(),s=(o.splitColumnLeaves,n&&e.hasRows()),c=t.axes.rotated;return{order:function(t,e){return"y"==t&&n?r.hasMultiCluster()&&e<i?e%l:0:e},orient:function(t,e){return"x"==t?c?"left":"bottom":0==e||s?c?"bottom":"left":c?"top":"right"}}};function Yb(t){var e=this.type,n=this.order,a=this.chart,r=this.config,o=(this.plotRect,this.datatype,this.column),i=this.orient,l=a.dataObject,s=(a.dataset,a.systemConf,r.label);return{hideAxislabel:function(){var r=a.canvasarea["bottom"==i||"top"==i?"height":"width"];return!1===s.show||!na(s.text)||""===s.text||!Nl(a,"".concat(e,"axislabel"),r)||t.isHierarchy()&&!So(e,n,a)||Ao(a)&&l.isPolarAxisCategory&&"y"==e&&!l.hierarchical.pivotLayout.getRootNodeList("row").branches.length},axislabelData:function(){var t=l.hierarchical,i=t&&t.categoryTree;if("y"!=e||!i)return s;if(ko(e,n,a)){var c={label:{text:o.columnname}};return Rn(r,c,!0)}},margin:function(){return $s(r.label)},branchLabelData:function(){var t,i=l.hierarchical;if("y"==e&&i&&i.categoryTree&&ko(e,n,a)){var s={label:{text:o.columnname}};t=Rn(r,s,!0)}return t||r}}}vb("axisH",Wb),vb("axisTitleH",Yb),(Ht.ticks=function(t,e,n,a,r,o){var i,l,s={},c=t.dataObject,u=t.systemConf,d=t.svg,h=t.canvasarea["bottom"==r||"top"==r?"height":"width"];s.isHierarchy=F,s.isHierarchialLevelType=j;var f=t.dataset.getDataType(n,a),p=t.axes.rotated,g=e.label||{},v=e.ticklabel||{},m=e.tickmark||{},y=parseFloat(Dn.getVal(Kn([v,u.chart,u.canvas,wr],"fontSize"))),b=Dn.getVal(Kn([v,u.chart,u.canvas,wr],"fontFamily")),x=null!=v&&null!=v.rotation&&"auto"!=v.rotation?v.rotation:0;F()&&(x=0),x=(x=(x=null==x||""==x?0:parseFloat(x))<0?360-Ze(x):x)>360?Ze(x)%360:x;var C,k,w,_,S=!1===g.show||!na(g.text)||""===g.text||!Nl(t,"".concat(n,"axislabel"),h)||F()&&!So(n,a,t)||Ao(t)&&c.isPolarAxisCategory&&"y"==n&&!c.hierarchical.pivotLayout.getRootNodeList("row").branches.length;S?C=k=w=_=0:(_=wa(g.marginTop,5),w=wa(g.marginBottom,5),k=wa(g.marginLeft,5),C=wa(g.marginRight,5));var O,A=$s(v),T=t.systemConf.metadata,P=t.dataset.getColumnIdx(n,a),E=T.columns[P],L=E[E.datatype],M=c.hierarchical,D="y"==n&&!M&&T.axes.y[a].length>1;O=D&&"y"==n?Zs(a,t):L,this.preCalcAxisLen=0;var I,R=wa(m.size,6);if("y"==n&&M&&M.categoryTree&&ko(n,a,t)){var z={label:{text:E.columnname}};I=Rn(e,z,!0)}function j(){var e=t.dataObject.hierarchical;if(e){var r="x"==n?"column":"row",o=e.pivotLayout.getRootNodeList(r),i=o.getCount(),l=o.getLeavesCount();return"x"==n&&F()&&a>l-1||"y"==n&&F()&&i&&a>l-1}}function F(){var e=t.axes;return"x"==n&&e.x.count>1||c.categoryHierarchy&&"y"==n&&e.y.count>1}function B(t){var e=t.selectAll("text.dummyText").selectAll("tspan").nodes(),n=t.selectAll("g.image").selectAll("image","img").nodes(),a=[];return e&&e.length&&e.forEach((function(t){a.push(t.outerHTML)})),n&&n.length&&n.forEach((function(t){a.push(t.outerHTML)})),a}function H(t,e,n){return n.customTickInfo.userRawTicks[na(e)?e:t.index]}return s.preCalcApproxAxisLength=function(o){var i=null;"x"===n&&0===a&&(i=t.viewPortExtent);var l=tc(t,n,a),c={axisRotated:p,axisOrder:a,chart:t,orient:r};l.Ticks||(l.Ticks=new Ht.Ticks(n,e,o,c)),this.tickValueObj=s.getTickValues(o.width,o.height,i,!0,null,l.Ticks,o);var d="".concat(n,"-axis-").concat(a),h=dc(t.svg.selectAll("g.".concat(n,"-axis")),"g",[e],".","class",d);dc(h,"g",[e],".","class","axisgroup").selectAll("line.majorTicks").style("display","");var f=this.tickValueObj.axisgroup,g=f.width,m=f.height,y=v.maxWidth,b=v.maxHeight;"left"!==r&&"right"!==r||!na(v.width)?na(v.height)&&(m=Xa(Ub(v.height,b)||Ht.ticks.maxTickSizeRatio_Vert,o.height)):g=Xa(Ub(v.width,y)||Ht.ticks.maxTickSizeRatio_Hori,o.width),f=this.preCalcTickLen={x:f.left,y:f.top,width:g,height:m};var x="x"===n&&!p,O={systemConf:u,bound:f,horizontal:x,vertical:!x,axisOrder:a,plotRect:o,hide:S,tickObj:this.tickValueObj,type:n,chartObj:t},T=0,P=I||e;if(l.axisLabel&&l.axisLabel.order==a){var E=Oo(n,a,r,t,o);l.axisLabel.show=!S,l.axisLabel.transformLabel(f,E,r)}else l.axisLabel=new Ht.AxisLabel(P,O,r,h);if(S)this.preCalcAxisLen="bottom"===r||"top"==r?f.height+A.bottom:f.width+A.left;else switch(T=l.axisLabel.getBBox().height,r){case"left":var L=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?f.width:f.width+A.left;this.preCalcAxisLen=L+C+T+k;break;case"right":L=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?f.width:f.width+A.right;this.preCalcAxisLen=L+k+T+C;break;case"bottom":var M=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?f.height:f.height+A.bottom;this.preCalcAxisLen=M+w+T+_;break;case"top":M=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?f.height:f.height+A.top;this.preCalcAxisLen=M+_+T+w}return this.preCalcAxisLen},s.getTickValues=function(s,c,h,g,m,C,k){var w={},_={axisRotated:p,axisOrder:a,chart:t,orient:r,extent:h,maxTickSize:this.tickValueObj?this.tickValueObj.maxTickSize:null},S=C.getTicks(o,m,_),T=na(v.showAs);x=isNaN(S.rotation)?x:S.rotation;var P=S.tickMargin,E=Qs(r,A,oc(e,n,t)),L=gb(r,x,0,null,R,E,this.tickValueObj),M="left"===r||"right"===r?"x":"y",D="left"===r||"right"===r?1:2;P[M]+=this.tickValueObj&&this.tickValueObj.isInline&&!this.tickValueObj.inlineToPlot?L.rotate[D]:0,P.dy=L.dy,L.rotate[D]=P[M],f=t.dataset.getDataType(n,a);var I=wa(k,o),z=d.append("g").attr("class","dummy"),j="right"==r?I.left+I.width:I.left,F="bottom"==r?I.top+I.height:I.top;z.attr("transform","translate(".concat(j,",").concat(F,")"));var N=z.append("g").attr("class","tick"),W=function(t,e,n,a,r,o){var i=dc(t,"text",[1],".","class","dummyText");i.attrs({x:n.x||0,y:n.y||0,dy:n.dy||0}).attr("transform","rotate(".concat(a," ").concat(n.x," ").concat(n.y,")")),r?e=H(o.longestTickValue,null,o):i.text(e);return xc(i,e,null,r),vc(i,[v,u.chart,u.canvas,wr]),i}(N,S.longestTickValue.formattedVal,P,x,T,S);return W.call((function(n){w=function(n,o,s,c,u,d,h,p){var g,m=o,C=f===Po&&Dh(O),k=u.formatterTickValues;i=u.rawTickValues,l=u.minorTickValues;var w,_,S=u.longestTickValue,A=u.maxTickSize,T=u.tickValueIndices,P=u.scale;na(u.customTickInfo)&&u.customTickInfo.length&&(w=u.customTickInfo.styles,_=u.customTickInfo.userRawTicks);var E=_a(k),L=function(t,e){var n,a;return na(w)&&(n=w[e]),a=Rr(t,y,b,n),h?a.width*a.height:"left"==r||"right"==r?a.width:a.width*a.height};if(h){E=_a(k.map((function(t,e){return L(t,e)})),"integer")}if(!d){var M=is(t,"width",n),D=is(t,"height",n);s.append("line").attr("class","domain").attrs({x1:0,y1:0,x2:"bottom"==r||"top"==r?M:1e-4,y2:"bottom"==r||"top"==r?1e-4:D}).style("stroke","black");var I,R=v.textOverflow==dn?"":v.textOverflow,z=!1,j=-1,F=S.actualVal,N=S.formattedVal;h&&(N=H(u.longestTickValue,null,u),B(c)),xc(o,N,null,h),function(t,e,n){t.attrs({dy:"zigzag"==n.mode&&e.dy1||e.dy,transform:"rotate(".concat(e.rotate[0]," ").concat(e.rotate[1]," ").concat(e.rotate[2],")")}).styles({"text-anchor":e.textAnchor})}(o,p,u);var W,V,Y,U,G,X=(P(F)||0)+(P.bandwidth&&!P.discreteWidth?P.bandwidth()/2:0);X="bottom"==r||"top"==r?"".concat(X,",0"):"0,".concat(X),c.attr("transform","translate(".concat(X,")")),_b(o,r,{svg:t.svg,canvasarea:t.canvasarea,plotarea:n,chartarea:t.chartarea,legendarea:t.legendarea,actChartObj:t},x,R,P,s,null,"ticklabel",v,a),V=W=h?B(c):kc(o),U=G=E[j];for(var Z,q=kc(o);"ordinalNonLinear"!=f&&!z&&j<i.length;){I=E[j+=1];X=(P(F)||0)+(null==P.bandwidth?0:P.bandwidth()/2);X="bottom"==r||"top"==r?"".concat(X,",0"):"0,".concat(X),c.attr("transform","translate(".concat(X,")")),_b(o,r,{svg:t.svg,canvasarea:t.canvasarea,plotarea:n,chartarea:t.chartarea,legendarea:t.legendarea,actChartObj:t},x,R,P,s,null,"ticklabel",v,a),W=h?B(c):kc(o),Z=kc(o),L(Z,U)>L(q,G)&&(N=W,h&&B(c),V=N,G=I,q=Z),xc(o,V,null,h);var $=!i.length||j===i.length-1||1===i.length;Y=$?null:C?k[I]:k[I]||"",!$&&L(Z,U)<L(Y,I)?(F=i[I],W=Y,U=I,N=Y,h&&(N=H(null,I,u)),xc(o,N,null,h)):z=!0}}var Q=m.node().getBoundingClientRect(),K=s.node().getBoundingClientRect();g={ticks:i,minorTickValues:l,rotation:x,longTickSize:Q,longtick:S,axisgroup:K,customTicks:_,mode:u.mode,isInline:u.isInline,inlineToPlot:u.inlineToPlot,maxTickSize:A,showGrid:e.grid.show&&e.grid.color!=hn},T&&(g.tickValueIndices=T);return g}(I,n,z,N,S,na(m),T,L)})),z.remove(),w},s.getActualTicklabel=function(){var e=this.tickValueObj,n=e.ticks;return this.isHierarchy()&&!this.isHierarchialLevelType()&&e.tickValueIndices?function(t){var a=e.tickValueIndices.indexOf(t);return-1!=a?n[a]:null}:(t.dataObject.isWaterfallEnabled&&e.tickValueIndices,function(t){return n[t]})},s.getTicksforAxisComp=function(){var e=t.dataset.getDataType(n,a);return F()&&t.dataObject.hierarchical.categoryTree&&(e==To&&"x"==n&&!t.dataObject.hierarchical.pivotLayout.columns.splitColumnLeaves||"ordinalNonLinear"==e)||j()&&t.dataObject.hierarchical.groupByTime?null:t.dataObject.isWaterfallEnabled&&"x"==n?this.tickValueObj.tickValueIndices||null:this.tickValueObj.ticks},s}).maxTickSizeRatio_Vert="50%",Ht.ticks.maxTickSizeRatio_Hori="50%",Ht.constructTickObj=function(t,e,n,a,r,o){var i,l,s,c,u,d,h,f=t.systemConf,p=nc(t,i="left"==a&&t.axes.rotated||"bottom"==a&&!t.axes.rotated?"x":"y",a),g=t.dataObject.hierarchical,v=g&&g.categoryTree;if(g){var m="x"==i?"column":"row",y=g.pivotLayout.getRootNodeList(m);c=y.getCount(),s=y.getClustersCount(),u=y.getLeavesCount(),d=y.hasMultiCluster()}var b=t.scroll,x=f.chart&&f.chart.scroll&&f.chart.scroll.orient;x&&(i===(t.axes.rotated?"bottom"===x||"top"===x?"y":"x":"bottom"===x||"top"===x?"x":"y")&&b&&b.initialize());for(var C=0;C<p;C++){var k,w,_=f.chart.axes.yaxis;"y"==i&&v&&(k=wo(i,C,t),w=bo(C,s));var S=wa(w,C);if(C>0&&"y"==i&&(!g||g&&k)){l=ec(t,"y",C,!(o&&_[S].merged));var O=null!=_[S]&&""!==_[S]?_[S]:{};l.interval=O.interval,l.tickCount=O.tickCount,l.minRange=O.minRange,l.maxRange=O.maxRange,l.categories=O.categories,_[S]=l,_[S].merged=!0}var A="bottom"==(a=(l=ec(t,i,C,(g||"x"==i&&C>0)&&ko(i,C,t)&&!o)).orient||("x"==i?t.axes.rotated?"left":"bottom":t.axes.rotated?na(g)||0==C?"bottom":"top":na(g)||0==C?"left":"right"))||"top"==a?n:e;if(cc(l,i,C,t)&&Nl(t,"".concat(i,"axis"),A)){var T={type:i,chart:t,order:C,config:l,plotRect:r,needCalcAxisG:!0,prerender:!0},P={axisH:Wb(t,l),tickH:Ib,titleH:Yb},E=new(mb("cartesian.prerender"))(T,P),L=ac(t,0,a,C);E&&(E.axisView=L),E.preRender();var M=tc(t,i,C);M.prerenderComp=E;var D=E.axisTicks.tickH;"y"!=i||M||(M={}),"x"!=i||M||(M=C>0?{}:M);var I=oc(l,i,t),R=0,z=!0===fa(l,"label.show"),j=M.ticks={};if(j.getActualTicklabel=D.getActualTicklabel,j.getTicksforAxisComp=D.getTicksforAxisComp,j.isHierarchy=D.isHierarchy,j.isHierarchialLevelType=D.isHierarchialLevelType,!I||"x"!==i||z){var F=E.axisTicks,B=E.axisTitle;j.tickValueObj=_objectSpread(_objectSpread(_objectSpread({},F.tickInfo),F.precalculate),B.precalculate),j.preCalcAxisLen=B.precalculate.preCalcAxisLen,R=B.precalculate.preCalcAxisLen}var H=tc(t,"y",C),N=t.dataObject.hierarchical&&(d||c),W=N&&C<=u-2;N&&(N&&C<=u-1)?(h=0==C?R:Ge(h,R),t.axes[i].maxLeafAxisArea=h):h=R;var V=void 0;if(t.viewFlow){var Y=ac(t,0,a,C);V=Y&&Y.spec&&Y.spec.evaluator}if(V)V.call(t,r,h);else if(!("y"===i&&H.disabled||W)){var U,G=t.plotarea;t.scroll||(U=$n(t.userdata.plotHeight,t.chartarea,h)),"left"==a?(r.left+=h,r.width=r.width-h,G.left+=h,G.width-=h):"right"==a?(r.width=r.width-h,G.width=r.width):"bottom"==a?(G.height=G.height-h,G.bottom+=h,r.height=G.height,r.bottom+=G.bottom):"top"==a&&(G.height=G.height-h,G.top+=h,r.height=G.height,r.top+=G.top),t.scroll||("bottom"==a||"top"==a?(G.height=G.height>U?U:G.height,r.height=G.height):(G.width=G.width>U?U:G.width,r.width=G.width))}}else{var X="y"===i?t.axes.y.groups[C]:t.axes.x;X&&(X.axisLabel=X.Ticks=null)}}"y"===i&&b&&!x&&b.initialize(),x&&b&&b.updatePositionScale()};var Ub=function(t,e){return na(t)&&na(t)?t>e?e:t:t||e};Ht.render=function(t,e,n,a){var r=t.systemConf,o=t.dataObject,i={left:!1,right:!1,top:!1,bottom:!1},s=t.wrap,c=function(){var e=r.chart.axes.animation||{},n=e.enabled;if(!na(n)){var a=t._isAxisCategory()||t.isNonAxisMultiSeriesCategory?t.seriesdata:t.seriesdata.slice(0,1);n=a.some((function(e,n){var a=t.chartTypes[n].name;return fp(r.chart.plot.plotoptions[a],e.plotoptions,t,a).enabled}))}return n?wa(e.duration,600):0}(),u=t.dataSplicer,d=u.getEncode(),h=u.getColumns(),f=0,p=pi.helpers.getParsedYAxisOrder;t.axes.animationDuration=c,t.legend.isSingleLayout&&(t.zscale=t.dataObject.hasZaxis?t.scales[0].create():null),t.datalabels.hasFixedPosition=t.datalabels.moduleExists&&Kd(t),t.tickarea={left:0,right:0,top:0,bottom:0};var g={left:t.plotarea.left,top:t.plotarea.top,width:t.plotarea.width,height:t.plotarea.height};if(t.dataObject.hierarchical){var v=t.axes.rotated?"width":"height",m="auto"==t.systemConf.chart[v]?null:t.systemConf.chart[v]||t.plotarea[v],y=t.axes.rotated?"height":"width",b="auto"==t.systemConf.chart[y]?null:t.systemConf.chart[y]||t.plotarea[y];t.dataObject.hierarchical.pivotLayout.leafSize(m,b,t),Wt.setRowScale(t,"row",!0)}if(Ht.constructTickObj(t,e,n,"left",g,a),Ht.constructTickObj(t,e,n,"bottom",g,a),function(t){for(var e in t.cache.correction.domainCorrection);for(var e in t.cache.correction)"domainCorrection"!==e&&(t.cache.correction[e]=null)}(t),t.dataObject.hierarchical){v=t.axes.rotated?"width":"height",m="auto"==t.systemConf.chart[v]?null:t.systemConf.chart[v]||t.plotarea[v],y=t.axes.rotated?"height":"width",b="auto"==t.systemConf.chart[y]?null:t.systemConf.chart[y]||t.plotarea[y];t.dataObject.hierarchical.pivotLayout.leafSize(m,b,t),Wt.setRowScale(t,"row",!0)}t.legend.isSingleLayout&&(t.zscale=t.dataObject.hasZaxis?t.scales[0].create():null),Sb.updatePlotareaByBandWidth(t,g);for(var x=Wt.constructor(t,"left"),C=t.axes.rotated?"x":"y",k=nc(t,C,"left"),w=0;w<k;w++){I("left",w);var _=ac(t,0,"left",w),S=x[w].scale;_&&_.scale&&(S=_.scale.component,_.scale.component.__type__="GOD"),R(S,"left",w,a)}var O=Wt.constructor(t,"bottom"),A=t.axes.rotated?"y":"x",T=nc(t,A,"bottom");for(w=0;w<T;w++){I("bottom",w);var P=ac(t,0,"bottom",w),E=O[w].scale;P&&P.scale&&(E=P.scale.component),R(E,"bottom",w,a)}for(w=0;w<x.length;w++){null!=(L=tc(t,C,w)).component&&j(L.component,w,C,a)}for(w=0;w<O.length;w++){var L;null!=(L=tc(t,A,w)).component&&j(L.component,w,A,a)}function M(e,n,a,o,i,l,s){var c=r.chart.plot.border,u=t.staticPaneSVG.selectAll("g.plotareaBorder-property"),d=null;if(na(c)&&!0===c.show)t.drawPlotBorder(),a.selectAll("path.domain").style("stroke",hn);else{var h,f,p,g,v=n.axisline,m=0==v.show||null==v.color?hn:v.color,y=Jn(v.strokeWidth,1),b=v.style||"solid",x=oc(n,l,t)&&!o.tickObj.tickValueObj.inlineToPlot,C="left"==e||"right"==e?o.preCalcTickLen().width:o.preCalcTickLen().height,k=x?C:0,w=dc(u,"line",[1],".","class",e);if(0==i||0==cc(n,l,s,t)||a.style("display")==dn)return void w.style("stroke",hn);if("back"!=v.zindex)"bottom"==e?(h=-t.tickarea.left,f=t.plotarea.width+t.tickarea.right,p=t.plotarea.height+.5+k,g=t.plotarea.height+.5+k):"left"==e?(h=.5-k,f=.5-k,p=0,g=t.plotarea.height+t.tickarea.bottom):"right"==e?(h=t.plotarea.width+.5+k,f=t.plotarea.width+.5+k,p=0,g=t.plotarea.height+t.tickarea.bottom):"top"==e&&(h=-t.tickarea.left,f=t.plotarea.width+t.tickarea.right,p=.5-k,g=.5-k),w.styles({"stroke-width":y,stroke:m,"shape-rendering":"crispedges","stroke-dasharray":Gr(b,y)}).attrs({x1:h,x2:f,y1:p,y2:g}),d={size:y,clr:m},u.node()["border-".concat(e)]=d,a.selectAll("path.domain").style("stroke",hn);else"back"==v.zindex&&w.style("stroke",hn)}}function D(e,n,a){var r=e.orient,o=t.axes.rotated,i=t.dataObject.hierarchical,l=t.dataObject.categoryHierarchy&&i.hasRows();return r||(r="x"==n?0==a||i?o?"left":"bottom":o?"right":"top":0==a||l?o?"bottom":"left":o?"top":"right")}function I(e,n){var a=[];switch(e){case"left":a=t.axes.rotated?z("x",n,e):z("y",n,e);break;case"bottom":a=t.axes.rotated?z("y",n,e):z("x",n,e)}return a}function R(a,c,u,h){var p="left"==c?t.axes.rotated?"x":"y":t.axes.rotated?"y":"x";return function(a,c,u,h,p,v){var m,y,b=a.component,x=t.dataObject.hierarchical,C=x&&x.categoryTree,k=(!!C&&x.pivotLayout.getRootNodeList("row").hasMultiCluster(),r.chart.axes,ec(t,c,p,!1)),w="bottom"==(h=D(k,c,p))||"top"==h?n:e,_=!0===cc(k,c,p,t)&&Nl(t,"".concat(c,"axis"),w),S=$s(k.ticklabel),O=Qs(h,S,oc(k,c,t)),A=t.plotarea;if(C){var T=x.pivotLayout.getRootNodeList("row").getLeavesCount();y=(m=C?x.hasRows():null)&&p==T-1}var P=tc(t,"y",p);"y"!==c||_&&!P.disabled||f++;if(b&&!i[h]){var E="y"===c&&P.disabled;b.plotBorderDrawn=!(!_||E)||b.plotBorderDrawn,i[h]=b.plotBorderDrawn}if(a.index=p,a.reversed=k.reversed,a.baseScale=Wt.getScale(t,o,A,h,p,t.dataset,c,Oe,Oe,!1),a.scale.originalDomain=a.baseScale.originalDomain,Lv(a,t),function(t,e,n,a,r,o){var i=r.behaviouralEvents&&fa(r.behaviouralEvents.eventManager,"behaviours.PLOT_ZOOM");if(i&&i.types&&!0===i.types[e]){var l=i.instance.getTransform(),s=_defineProperty({},e,o);Pv(o,e,Ev(l.k,s.x,s.y))}}(u,c,0,k.reversed,t,a),u.ordinalRange=null,u.ordinalRange=wh(u),_){var L=tc(t,c,p),M=L.ticks,I=M.preCalcAxisLen,R=L.prerenderComp;R.preRender(g);var z=R.axisTicks,j=R.axisTitle;M.tickValueObj=_objectSpread(_objectSpread(_objectSpread({},z.tickInfo),z.precalculate),j.precalculate),M.preCalcAxisLen=j.precalculate.preCalcAxisLen,M.preCalcTickLen=z.precalculate.preCalcTickLen;t.axes.y.groups;var F=m?t.axes[c].maxLeafAxisArea:I,B=(z.tickInfo.longTickSize,M.preCalcAxisLen-F),H=M.tickValueObj,V=!m||y,Y="".concat(c,"-axis-").concat(p),U=dc(s.selectAll("g.".concat(c,"-axis")),"g",_?[k]:[],".","class",Y);if(U.attr("filter",null),ua(L.logDomain)&&u.domain(L.logDomain),Ze(B)>1&&V&&(W(h,B),g=t.plotarea),null!=b){var G="y"==c&&!C&&d.y[p].length>1,X=M&&M.isHierarchy()&&t.dataObject.hierarchical.groupByTime,Z=t.dataset.getColumnIdx(c,X?0:p),q=t.dataSplicer.getColumns(),$=q[Z].datatype;$=M&&M.isHierarchialLevelType()&&t.dataObject.categoryHierarchy?To:$;var Q=q[Z][$],K=(Q=G&&"y"==c?Zs(p,t):Q)&&(Q.axisformat||Q.format),J=Jn(k.tickmark.size,6),tt=Jn(k.subtickmark.size,6),et=o.isPercentChart&&"y"==c?Xo:Wo,nt=X?p:null,at=!(M&&M.isHierarchy())&&Q&&K&&K.specifier&&K.specifier.constructor==Array||"wrapOnSpace"==H.mode||"wrapAll"==H.mode,rt=H.isInline&&!H.inlineToPlot,ot="left"===h||"right"===h?"width":"height";t.tickarea[h]=rt&&b.plotBorderDrawn?H.axisgroup[ot]:t.tickarea[h]||0,b.tickOrient(H.isInline?"inner":"outer").orient(h).scale(u).tickPadding(O).tickSize(J).subTickSize(tt).tickSizeOuter(0).majorTicks(p===("y"===c?f:0)||C?N(h,c,H):null).plotarea(t.plotarea).systemconf(t.systemConf).tickRotation(H.rotation).preCalcTickLen(M.preCalcTickLen).chartObj(t).columnIndices(G&&"y"==c?d.y[p]:[Z]).isMultiLineTick(at).minorGrid(H.minorTickValues);var it=null!=Q?Q.axisformat||Q.format:null;if(it&&"auto"==it.specifier&&!u.bandwidth)b.tickValues(M.getTicksforAxisComp(H)).tickFormat((function(t,e){var n=u.tickFormat()(t);l(this).text(n),this.formattedVal=n}));else{b.tickValues(M.getTicksforAxisComp(H));var lt,st=M.getActualTicklabel(H),ct=M.tickValueObj.maxTickSize.horizontal,ut=M.tickValueObj.maxTickSize.vertical,dt=Dn.getVal(Kn([k.ticklabel,t.systemConf.chart,t.systemConf.canvas,wr],"fontSize")),ht="wrapOnSpace"==M.tickValueObj.mode||"wrapAll"==M.tickValueObj.mode,ft=b.isMultiLineTick(),pt=na(k.ticklabel.showAs),gt=[null,h,t,H.rotation,k.ticklabel.textOverflow,b.scale(),U,b,"ticklabel",k.ticklabel,p],vt=_b.apply(null,gt),mt=function(e,n){var a=st(n),r=et(Q,a,$,t,"axis",null,null,nt);l(this).text(r),this.formattedVal=r;var o,i=n==H.ticks.length-1;if(ft)ht&&(r=zh(r,M.tickValueObj.mode,ct,ut,dt)),xc(l(this),r,{orient:h});else if(pt&&na(M.tickValueObj.customTicks[n])){this.innerHTML="",o=xc(l(this),M.tickValueObj.customTicks[n],null,!0);var s=kc(l(o=o||this));o.formattedVal=ua(s)?s.join(" "):s}vt(o||this,n);var c=k.ticklabel.minmaxlabels;($==Eo||$==Po)&&M&&!M.isHierarchialLevelType()&&c&&c.show&&!c.excludeIntervals&&(1==n?Rh(lt,this,H.rotation,h)&&(this.style.display="none"):i&&Rh(lt,this,H.rotation,h)&&(lt.style.display="none")),lt=this};b.tickFormat(mt)}b.tickObj=M,b.hideAxisLabel=!Nl(t,"".concat(c,"axislabel"),w)}}return b}(tc(t,p,u),p,a,c,u)}function z(e,a,r){var o=tc(t,e,a),i=(xo("y",a,t),ec(t,e,a)),l=o.component;if(l)return l;var s=cc(i,e,a,t);return o.component="x"==e?s&&Nl(t,"xaxis",n)?Ht.get():null:s?Ht.get():null,l}function j(a,o,i,l){var u;return u=function(a,o,i,l){var u=t.dataObject.categoryHierarchy,d=(r.chart.axes,u&&xo("y",i,t),ec(t,o,i,!1)),h=(d.ticklabel,D(d,o,i)),f="bottom"==h||"top"==h?n:e,p=!0===cc(d,o,i,t)&&Nl(t,"".concat(o,"axis"),f),g="".concat(o,"-axis-").concat(i),v=dc(s.selectAll("g.".concat(o,"-axis")),"g",p?[d]:[],".","class",g),m=tc(t,o,i),y=t.axes[o].count;if(i>y-1)return dc(s.selectAll("g.".concat(o,"-axis")),"g",[],".","class",g),void(1==a.plotBorderDrawn&&M(h,d,v,a,!1,o,i));var b=tc(t,o,i);v.style("display","y"===o&&b.disabled?dn:null);var x=!t.dataObject.isAxisCategory&&i===t.axes[o].count-1;"x"===o&&p?F(d,i,a,!0,x):p&&B(d,i,a,x,!0);if(p){m.ticks.tickValueObj;t.plotarea=a.plotarea(),v.transition().duration(c).call(a,o,i),("y"==o&&1==a.plotBorderDrawn||"x"==o&&function(t,e,n){var a=t.dataObject.hierarchical;return!a||t.dataObject.isAxisCategory||Ys(t)?0===n:n===a.pivotLayout.getRootNodeList("x"===e?"column":"row").getLeavesCount()}(t,o,i))&&M(h,d,v,a,p,o,i)}else 1==a.plotBorderDrawn&&M(h,d,v,a,p,o,i)}(a,i,o),u}function F(e,n,a,r,o){var i,l,c,u={left:0,top:0,right:0,bottom:0},d=t.axes.x.count,h=t.dataObject.categoryHierarchy,f=0;if(h){var p=t.dataObject.hierarchical.pivotLayout.getRootNodeList("column");l=p.getCount(),i=p.hasMultiCluster(),c=p.getLeavesCount()}if(0==n||o){for(var g=0;g<d;g++){if(cc(ec(t,"x",g),"x",g,t)){var v=tc(t,"x",g).component,m=a.orient(),y=r?H(e.label,e.ticklabel,v.preCalcTickLen(),t,"x",g,m):v.tickLabelWidth(),b=s.selectAll(".x-axis-".concat(g)),x=h&&g<c-1,C=ac(t,0,m,g),k="right"==m?t.plotarea.left+t.plotarea.width+u.right:t.plotarea.left-u.left,w=t.axes.rotated||"top"==m?t.plotarea.top-u.top:t.plotarea.top+t.plotarea.height+u[m];if(C&&C.conf&&C.conf.transform){var _=$n(C.conf.transform,[k,w],t);k=_[0],w=_[1]}else u[m]+=x&&g!==c-1?0:y;if(b.attr("transform","translate(".concat(k,",").concat(w,")")),b.attr("x",k),b.attr("y",w),(l||i)&&(0==g&&(f=y),l&&g>c-1&&v.majorTicks())){var S="left"==m||"right"==m?"x2":"y2",O="top"===m||"left"===m?1:-1;v.majorTicks()[S]+=O*f,f+=y}}}b=s.selectAll("g.x-axis-0")}}function B(a,o,i,l,c){var u=r.chart.axes.yaxis,d=t.axes.y.count,h=s.selectAll(".y-axis-0"),f=u[0].orient||(t.axes.rotated?"bottom":u[0].orient||"left"),p=t.dataObject.categoryHierarchy;if(l||0==o){for(var g={left:0,top:0,right:0,bottom:0},v=0,m=0;m<d;m++){var y=ec(t,"y",m),b=y,x=cc(y,"y",m,t);if(x){var C=b.orient;if(C=C||(t.axes.rotated?0==m||p?"bottom":"top":null!=b.orient?b.orient:0==m||p?"left":"right"),!0===x&&Nl(t,"yaxis","bottom"==C||"top"==C?n:e)){var k=ac(t,0,C,m),w=void 0,_=void 0,S=void 0;if(p){var O=t.dataObject.hierarchical.pivotLayout.getRootNodeList("row");_=O.getCount(),w=O.hasMultiCluster(),S=O.getLeavesCount()}var A=tc(t,"y",m),T=A.component,P=p&&m<S-1,E=s.selectAll(".y-axis-".concat(m)),L=E.style("display")==dn?T.tickLabelWidth():H(b.label,b.ticklabel,T.preCalcTickLen(),t,"y",m,C),D="bottom"==C||"top"==C?t.plotarea.left:"left"===C?t.plotarea.left-g[C]:t.plotarea.left+t.plotarea.width+g[C],I="left"==C||"right"==C?t.plotarea.top:"bottom"===C?t.plotarea.height+t.plotarea.top+g[C]:t.plotarea.top-g[C];if(k&&k.conf&&k.conf.transform){var R=$n(k.conf.transform,[D,I],t);D=R[0],I=R[1]}else g[C]+=A.disabled||P&&m!==S-1?0:L;if(E.attr("transform","translate(".concat(D,",").concat(I,")")),T&&1==T.plotBorderDrawn&&M(C,b,E,i,"y",m),(_||w)&&(0==m&&(v=L),_&&m>S-1&&T.majorTicks())){var z="left"==C||"right"==C?"x2":"y2",j="top"===C||"left"===C?1:-1;T.majorTicks()[z]+=j*v,v+=L}}}}!t.axes.rotated&&h.selectAll("line.majorTicks").attr("x2","right"==f?-t.plotarea.width:t.plotarea.width)}}function H(t,e,n,a,r,o,i){var l={top:0,right:0,bottom:5,left:0},s=0,c=0,u=tc(a,r,o),d=u.component,h=u.ticks;c="clr"===r?0:u.axisLabel.getBBox().height,d.hideAxisLabel||!1===t.show||!na(t.text)||""===t.text||h.isHierarchy()&&!So(r,o,a)?l.top=l.bottom=l.left=l.right=0:(l.top=wa(t.marginTop,5),l.bottom=wa(t.marginBottom,5),l.left=wa(t.marginLeft,5),l.right=wa(t.marginRight,5));var f=wa(e.marginRight,5),p=wa(e.marginLeft,5),g=wa(e.marginBottom,5),v=wa(e.marginTop,5);switch(i){case"top":s=(s=null!=n?n.height+v+l.bottom:0)+c+l.top;break;case"bottom":s=(s=null!=n?n.height+g+l.top:0)+c+l.bottom;break;case"left":s=(s=null!=n?n.width+p+l.right:0)+c+l.left;break;case"right":s=(s=null!=n?n.width+f+l.left:0)+c+l.right}return d.tickLabelWidth(s),s}function N(e,n,a){var o,i,l,s;o=i=l=s=0;var c=a.isInline&&!a.inlineToPlot,u=a.longTickSize,d=c&&("left"==e||"right"==e)?u.width:0;if("bottom"==e?(i=d,s=-t.plotarea.height):"top"==e?(i=-d,s=t.plotarea.height):"left"==e?(o=-d,l=t.plotarea.width):"right"==e&&(o=d,l=-t.plotarea.width),"x"===n&&t.datalabels.hasFixedPosition){var h=t.axes.y.groups.map((function(t){return t.disabled})).indexOf(!1),f=r.chart.axes.yaxis[h].reversed,p=function(e){var n,a=Wt.getScale(t,t.dataObject,t.plotarea,t.axes.y.orient,e,t.dataset,"y"),r=a.origRange;if(t.dataset.getDataType("y",e)===To){var o=a.domain();n=a(o[o.length-1])+a.bandwidth()/2}else{n=a((o=t.dataObject.getMinMaxY(e,0,t.datalabels.hasFixedPosition))[1])}return Xe(Ze(n-r[0]),Ze(n-r[1]))}(h);"bottom"==e?f?i-=p:s+=p:"top"==e?f?s-=p:i+=p:"left"==e?f?o+=p:l-=p:"right"==e&&(f?l+=p:o-=p)}return{x1:o,y1:i,x2:l,y2:s}}function W(e,n){var a=t.plotarea;"left"===e?(a.left+=n,a.width-=n):"right"===e?a.width-=n:"bottom"===e?(a.height-=n,a.bottom+=n):(a.height-=n,a.top+=n)}function V(e,n,a,o,l,c){i={left:!1,right:!1,top:!1,bottom:!1},t.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("line").style("stroke",hn);var u=n.orient(),d=(n.majorTicks(),n.tickLabelWidth());"none"===e.style("display")&&"remove"===c||("left"==u||"right"==u?(t.plotarea.width="add"==c?t.plotarea.width-d:t.plotarea.width+d,t.plotarea.left="left"==u?"add"==c?t.plotarea.left+d:t.plotarea.left-d:t.plotarea.left):(t.plotarea.height="add"==c?t.plotarea.height-d:t.plotarea.height+d,t.plotarea.top="top"==u?"add"==c?t.plotarea.top+d:t.plotarea.top-d:t.plotarea.top));var h=0,f="add"==c?"":dn;e.style("display",f),e.attr("filter",!0),"add"==c&&e.style("display",null);for(var p=0;p<t.axes.y.groups.length;p++){var g=s.selectAll("g.y-axis-".concat(p)),v=t.axes.y.groups[p].component,m=v.orient(),y=v.majorTicks(),b=r.chart.axes.yaxis[p]||r.chart.axes.yaxis[0];g.node()&&(g.style("display")!=dn&&0==h?(y=N(m,l,v.tickObj.tickValueObj),v.majorTicks(y),g.transition().duration(0).call(v,l,p,!0),h++):null!=y&&h>0&&(v.majorTicks(null),g.transition().duration(0).call(v,l,p,!0)),g.style("display")===dn||i[m]?(v.plotBorderDrawn=!1,""==g.style("display")||"inline"==g.style("display")?g.selectAll("path.domain").style("stroke",b.axisline.color):g.selectAll("path.domain").style("stroke",hn)):(i[m]=!0,v.plotBorderDrawn=!0))}B(0,o,n,!0)}t.dataset.getDataType("x")==To&&Wt.barBandwidth(t),t.updateZscale=function(){if(t.legend.isSingleLayout&&t.dataObject.hasZaxis){var e=Fa(t.scales,(function(t){return"z-0"===t.id})),n=e._parseDomain();t.zscale.domain(n)}},t.updateScale=function(a,i,u,f,g){var v=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return function(f){var m,y=(null==a||ua(a)?a:a.yaxiscolumnorder)||f,b="y"==i?p(y):0,x=(f="x"==i&&na(f)?f:b,s.selectAll("g.".concat(i,"-axis-").concat(f))),C=tc(t,i,f),k=C.ticks,w=ec(t,i,f,!1),_=w.ticklabel,S=C.component?C.component.orient():D(w,i,b),O="bottom"==S||"top"==S?n:e,A=!0===cc(w,i,"x"===i?0:b,t)&&Nl(t,"".concat(i,"axis"),O),T=t.dataset,P="y"==i?t.dataObject.categoryHierarchy:t.dataObject.hierarchical,E=t.dataset.getColumnIdx(i,b),L=h[E].datatype,I=(L=k&&k.isHierarchialLevelType()&&t.dataObject.hierarchical.categoryTree?To:L,h[E][L]),R=(rt=k&&k.isHierarchy()&&t.dataObject.hierarchical.groupByTime)?f:null,z=function(){if(t.dataObject.pivot)return C.scale.domain();var e=t.chartTypes[0].name,n=r.chart.plot.plotoptions[e].outerPadding;return T.getDataType(i,f)===To?o.getCategories(i,f):"x"===i?t.dataObject.getMinMaxX(Jn(n,.2)):t.dataObject.getMinMaxY(b)},j=!1,N=t.plotarea,Y=u,U=t.behaviouralEvents.eventManager.behaviours,G=Object.keys(U).length>0,X=U.PLOT_ZOOM&&U.PLOT_ZOOM.types&&U.PLOT_ZOOM.types[i],Z=X||U.CHART_SCROLL&&t.scroll&&t.scroll.settings.smooth&&"x"===i,q=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return m=Wt.getScale(t,o,N,S,f,T,i,e,Oe,n),t.dataObject.pivot&&(m=C.scale),m.ordinalRange=wh(m),m},$=function(t,e){t&&C.scale.domain(C.domain=t),e&&C.scale.range(C.range=e),C.scale.bandwidth&&(C.scale.ordinalRange=null),u=t,C.eventscale=C.scale};if(!u){var Q=z()||[];j="NoData"===Q[0]&&"NoData"===Q[1]}if(C.scale.bandwidth&&!Z&&C.domain&&1===C.domain.length&&(v=!1,ua(Y)&&(C.domain=Y)),!v){if("x"===i&&Z&&C.scale.bandwidth&&(u=null),C.logDomain){var K=C.logDomain;C.logDomain=null;var J=z();0===J[0]&&0===J[1]?C.logDomain=null:C.logDomain=K}var tt;if(m=q(u),C.eventscale=C.scale=m,Z)if(C.baseScale=q(Oe,!1),m.originalDomain=C.baseScale.originalDomain,tt=X?U.PLOT_ZOOM.instance.getTransform():t.scroll.transform){var et=Pv(C,Av(i,t.axes.rotated),tt);Y=et.domain,g=et.range,$(Y,g)}}v&&($(Z?null:u,g),t.axes.animationDuration=t.disableAnimation?0:c);var nt="y"==i&&!x.empty()&&j,at="y"==i&&!x.empty()&&1!=w.disabled&&x.style("display")==dn&&!!x.attr("filter");if(nt)A&&V(x,C.component,0,b,"y","remove");else if(at&&!G)A&&V(x,C.component,0,b,"y","add");else if(o.isBubbleEnabled&&"y"==i&&!Z&&(C.eventscale=C.scale=Wt.getScale(t,o,t.plotarea,S,b,t.dataset,"y")),A&&G&&at&&V(x,C.component,0,b,"y","add"),A){C.component.scale(C.scale);var rt=k&&k.isHierarchy()&&t.dataObject.hierarchical.groupByTime,ot=(E=t.dataset.getColumnIdx(i,rt?0:f),L=h[E].datatype,"y"==i&&!P&&d.y[f].length>1);L=k&&k.isHierarchialLevelType()&&t.dataObject.categoryHierarchy?To:L,I=h[E][L],I=ot&&"y"==i?Zs(b,t):I;var it=o.isPercentChart&&"y"==i?Xo:Wo,lt=null!=I?I.axisformat||I.format:null,st=(k=C.ticks).preCalcTickLen,ct="bottom"==S||"top"==S?k.tickValueObj.longTickSize.height:k.tickValueObj.longTickSize.width,ut=C.prerenderComp;ut.preRenderTickG(t.plotarea);var dt=ut.axisTicks,ht=ut.axisTitle;k.tickValueObj=_objectSpread(_objectSpread(_objectSpread({},dt.tickInfo),dt.precalculate),ht.precalculate),k.preCalcAxisLen=ht.precalculate.preCalcAxisLen,k.preCalcTickLen=st;var ft=k.tickValueObj;ua(C.logDomain)&&!v&&(C.scale.domain(C.logDomain),C.eventscale.domain(C.logDomain)),k.tickValueObj=ft;var pt="bottom"==S||"top"==S?k.tickValueObj.longTickSize.height:k.tickValueObj.longTickSize.width,gt=k.preCalcTickLen,vt=k.retainAxisHeight?0:ct>pt||ct<pt?pt-ct:0;"bottom"==S||"top"==S?gt.height=gt.height+vt:gt.width=gt.width+vt;var mt=!x.empty()&&x.style("display")===dn&&"y"===i;mt&&x.style("display",null);var yt=k.getTicksforAxisComp(ft),bt=H(w.label,w.ticklabel,C.component.preCalcTickLen(),t,i,f,S);C.component.tickValues(yt).tickRotation(ft.rotation).minorGrid(k.tickValueObj.minorTickValues).preCalcTickLen(k.preCalcTickLen),C.component.tickLabelWidth(bt);var xt,Ct=k.getActualTicklabel(ft),kt=k.tickValueObj.maxTickSize.horizontal,wt=k.tickValueObj.maxTickSize.vertical,_t=Dn.getVal(Kn([w.ticklabel,t.systemConf.chart,t.systemConf.canvas,wr],"fontSize")),St="wrapOnSpace"==k.tickValueObj.mode||"wrapAll"==k.tickValueObj.mode,Ot=C.component.isMultiLineTick(),At=na(w.ticklabel.showAs),Tt=[null,S,t,ft.rotation,w.ticklabel.textOverflow,C.scale,x,C.component,"ticklabel",w.ticklabel,f],Pt=_b.apply(null,Tt);if(lt&&"auto"==lt.specifier&&!C.scale.bandwidth?C.component.tickFormat((function(t,e){l(this).text(C.scale.tickFormat()(t))})):C.component.tickFormat((function(e,n){var a=Ct(n),r=it(I,a,L,t,"axis",null,null,R);l(this).text(r);var o=n==ft.ticks.length-1;this.formattedVal=r,Ot?(St&&(r=zh(r,k.tickValueObj.mode,kt,wt,_t)),xc(l(this),r,{orient:S})):At&&na(k.tickValueObj.customTicks[n])&&(this.innerHTML="",xc(l(this),k.tickValueObj.customTicks[n],null,!0)),Pt(this,n);var i=w.ticklabel.minmaxlabels;(L==Eo||L==Po)&&k&&!k.isHierarchialLevelType()&&i&&i.show&&!i.excludeIntervals&&(1==n?Rh(xt,this,ft.rotation,S)&&(this.style.display="none"):o&&Rh(xt,this,ft.rotation,S)&&(xt.style.display="none")),xt=this})),C.component.isMultiLineTick()||na(_.showAs)?x.call(C.component,i,f):x.transition().duration(c).call(C.component,i,f),mt&&V(x,C.component,0,b,"y","add"),Ze(vt)>1){mt||W(S,vt);var Et="x"===i?"y":"x";("x"===Et?[t.axes.x]:t.axes.y.groups).forEach((function(e){e.disabled||(Z?(Y=e.domain,g=e.range,t.updateScale(a,Et,Y,e.index,g,!1)):t.updateScale(a,Et,null,e.index))})),t.drawPlotareaClippath(),t.updatePlotareaProp()}"y"===i?(x.styles({display:null,visibility:"visible"}),B(0,b,C.component,!0)):F(w,f,C.component);var Lt=t.plotarea.width;!t.axes.rotated&&"y"==i&&s.selectAll(".y-axis-".concat(b)).selectAll("line.majorTicks").attr("x2","right"!=S?Lt:-Lt),1==C.component.plotBorderDrawn&&M(S,w,x,C.component,i,f)}}(f)}};var Gb=L(),Xb=L(),Zb=L(),qb=M(),$b=M();M();function Qb(t,e,n){t.each((function(t,a){var r=function(t,e){var n="opacity",a=1;if(we.has(Gt[e])){var r=Xb.get(e),o=r&&r[1]||n,i=r&&r[0]||n,l=t.systemConf.chart.plot.plotoptions[e];return[i,l&&l[o]||a]}return[n,a]}(e,a),o=r[0],i=n?r[1]:.1;t.style(o,i)}))}function Kb(t,e,n,a,r,o){var i={selected:L(),unSelected:L(),reset:L()},l=e;return E(o?[["tick","label","boundbox","connector","bar.levelMarker"],r]:[["label","boundbox","connector"],r]).map((function(r){var s=e&&e.get(r)||function(t,e,n){return"label"==t||"boundbox"==t||"connector"==t?e.staticPaneSVG.select("g.labelholder"):"tick"==t||"axislabel"==t?e.wrap.selectAll(".".concat(n,"-axis")):e.svg.select(".seriesholder")}(r,t,o),c=Gb.get(r),u=Gb.get("".concat(r,"_child")),d="row"==n?"levelbyrow":"levelbycolumn";l=e&&!$b.has(r);var h=function(t,e,n,a,r,o){var i=r?"filter":"selectAll",l=t[i]("".concat(a,"[").concat(e,'^="').concat(n,'"]')),s=t[i]("".concat(a,":not([").concat(e,'^="').concat(n,'"])')),c=t[i]("".concat(a));o&&(l=l[i]("".concat(o)),s=s[i]("".concat(o)));return{selected:l,unSelected:s,reset:c}}(s,d,a,c,l,u);i.selected.set(r,h.selected),i.unSelected.set(r,h.unSelected),"tick"==r&&i.reset.set(r,h.reset)})),i}function Jb(t,e){t.forEach((function(t){t.active=e}))}Zb.set("row","levelByRow"),Zb.set("column","levelByColumn"),Gb.set("bar","path.zc_bar"),Gb.set("bar.levelMarker","path.zc_levelMarker"),Gb.set("area","path.area"),Gb.set("line","path.line"),Gb.set("scatter","g.scatter"),Gb.set("bubble","g.scatter"),Gb.set("pie","path.zc_pie"),Gb.set("funnel","path.zc_funnel"),Gb.set("pyramid","g.pyramidsection"),Gb.set("sunburst","path.zc_sunburst"),Gb.set("treemap","path.zc_treemap"),Gb.set("packedbubble","circle.zc_packedbubble"),Gb.set("wordcloud","text.zc_wordcloud"),Gb.set("web","path.area"),Gb.set("tick","g.tick"),Gb.set("tick_child","text.ticklabel"),Gb.set("axislabel","text.axislabel"),Gb.set("label","text"),Gb.set("boundbox","path.zc_label_background"),Gb.set("connector","path.zc_label_connector"),Xb.set("area",["opacity","fillOpacity"]),qb.add(["label","series","boundbox","connector"]),$b.add(["tick"]);var tx={};function ex(t){var e=t.columnInfo.data[0];t.axisType,t.event;if(e.datatype!=Eo){this.cache.hierarchical||(this.cache.hierarchical={row:{},column:{}});var n=tx._defaultBehavior.selection.call(this,t);tx._defaultBehavior.action.call(this,n)}}tx._defaultBehavior={handler:"",selection:function(t){var e,n=this,a=Gi(n),r=a.values(),o=t.columnInfo.data[0],i=n.dataObject.hierarchical,l=t.axisType,s="x"==l?"column":"row",c="x"==l?"row":"column",u="row"==s?"levelbyrow":"levelbycolumn",d=t.element.parentNode.getAttribute(u),h=n.cache.hierarchical[s],f=h.itemIndex=o.itemIndex,p=i.pivotLayout.getRootNodeList(s),g=p.getCount(),v=p.getLeavesCount(),m=o.axisOrder,y=(h.depth=g+v-m-1,p.getNodesAtDepth(m)[f]),b=p.getAllChildren(y),x=n.cache.hierarchical[c].query,C=h.query==d;r=a.has("line")&&(Ar.SAFARI||Ar.IE)?r.concat(["scatter"]):a.has("area")?r.concat(["line","scatter"]):r,x&&(e=Kb(n,null,c,x,r).selected);var k=Kb(n,e,s,d,r,l);return k.resetMode=C,ua(h.data)&&Jb(h.data,!1),h.query===d?h.data=h.query=h.active=h.depth=h.itemIndex=h.isLeaf=null:(Jb(b,!0),h.data=b,h.active=!0,h.query=d),k},action:function(t){var e=this;t&&(t.resetMode?(Qb(t.selected,e,!0),Qb(t.unSelected,e,!0)):(Qb(t.reset,e,!0),Qb(t.unSelected,e,!1),Qb(t.selected,e,!0)))}};var nx={};function ax(t,e,n,a,r){var o=this.chart,i=this.eventManager;if(o.zooming||o.brushing)return!1;if(o.chartRendered){this.clearOldActions();var l=Ar.isTouchDevice&&o.isAxisCategory&&o.systemConf.chart.brush.enabled;!1===o.stopPropogate||l||jt().stopPropagation(),i.eventType=t,i.targetEvent=o.eventHandler.targetEvent=jt();var s=this.isSingleSource(),c=this.getSourceNode(),u=this.getRelativeMousePosition(c,s),d=n&&(n.constructor===Object||n.constructor===Array||!s);if(n=s||n.constructor===Object?n:i.selectionManager.nearest,d&&(n=this.toNewObject(n)),!d)if(!(n=i.getData("mousemove",u)).selectionSet.length)return void o.eventHandler.handlers.mouseout.call(this);i.associateBehaviours(i.eventType,n,u)}}function rx(t,e,n,a,r,o,i,l){var s=this,c=r.events,u=null!=c&&0==Jn(c.enabled,!0),d=tc(t,i,l),h=d&&d.ticks,f=h&&h.tickValueObj,p={mousemove:c?c.mousemove:null,mouseout:c?c.mouseout:null,click:c?c.click:null,dblclick:c?c.doubleclick:null,tap:c?c.tap:null,tapHold:c?c.taphold:null,tapHoldEnd:c?c.tapholdend:null,dbltap:c?c.doubletap:null};if(!u){var g={click:k,tap:k},v=function(e,n,a,r,i){var s=p[e]||c&&c[e];s&&$n(s,n,w(o,a,r,l),t,i)},m={mousemove:function(t,e){var n=jt();v("mousemove",n,t,e,s)},mouseout:function(t,e){var n=jt();v("mouseout",n,t,e,s)},click:function(t,e){var n=jt();v("click",n,t,e,this),(!p.click||p.click&&n.allowDefault)&&g.click.call(this,o,t,e,l,!1,i)},dblclick:function(t,e){var n=jt();v("dblclick",n,t,e,s)}},y={tapHold:function(t,e){var n=jt();v("tapHold",n,t,e)},tapHoldEnd:function(t,e){var n=jt();v("tapHoldEnd",n,t,e)},tap:function(t,e){var n=jt();v("tap",n,t,e),(!p.tap||p.tap&&n.allowDefault)&&g.tap.call(this,o,t,e,l,!1,i)},dbltap:function(t,e){var n=jt();v("dbltap",n,t,e)}};if(a){var b=u?"auto":c&&c.cursor||"pointer";a.style("cursor",b)}if(Iu(n,m,y),a&&Iu(a,m,y),f&&f.customTickInfo&&f.customTickInfo.customGroup&&Iu(e.selectAll("g.customTick"),m,y),nx){var x=Object.keys(nx),C=wn.getComponent("CustomGesture");x.map((function(t){C.call(s,t,n,"axis",v)})),n=null}}function k(e,n,a,r,o,i){if(t.dataObject.hierarchical&&t.dataObject.hierarchical.categoryTree){var l=t.chartTypes[0],s=ko(i,r,t);if(("area"===l.name||"line"===l.name)&&!s)return;var c={event:jt(),columnInfo:w(e,n,a,r),axisType:i,element:this};ex.call(t,c)}}function w(t,e,n,a){return t.data=t.data.map((function(t){var r=na(e)?e.d||e:null;return t.value=t.datatype===Po?Go(e,0,t.time).getTime():r,t.itemIndex=n,t.levelindex=wa(t.levelindex,a),t.axisOrder=a,t})),t}wn.setComponent("AxisEventHandler",v)}function ox(t,e,n){t.nodes().forEach((function(t,a){var r="left"==n||"right"==n?1:0,o=[0,0],i=e.discreteWidth(a)/2;o[r]=o[r]+i,t.setAttribute("transform","translate(".concat(o[0],",").concat(o[1],")"))}))}wn.setComponent("setCustomGesture",(function(t,e){nx[t]=e})),wn.setComponent("CustomGesture",(function(t,e,n,a){if(!nx[t])throw"unknown gesture : ".concat(t);var r;switch(n){case"plot":r=ax;break;case"axis":r=a||wn.getComponent("AxisEventHandler");break;case"legend":r=a||""}nx[t].call(this,e,r)}));var ix=function(t){return t};function lx(t){return"translate(".concat(t+.5,",0)")}function sx(t){return"translate(0,".concat(t+.5,")")}function cx(t){return function(e){return+t(e)}}function ux(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function dx(t){return function(e,n){var a=Math.max(0,t.bandwidth(e)-1)/2;return a=Math.round(a),+t(e)+a}}function hx(){return!this.__axis}function fx(t,e,n){var a=[],r=e.chart,o=e.axis,i=o.ticks.tickValueObj,s=e.tickValues,c=e.tickFormat,u=e.tickSizeInner,d=e.tickSizeOuter,h=e.isSubTickMarkShow?e.subTickSize:0,f=e.gridSize,p=e.tickPadding,g=e.rotation,v=e.orient,m=e.scale,y=i&&i.isInline,b=i&&i.inlineToPlot,x="top"===v||"left"===v?-1:1,C=b?-x:x,k=y?-x:x,w="left"===v||"right"===v?"x":"y",_="left"===v||"right"===v?"width":"height",S="x"==w?"y":"x",O="top"===v||"bottom"===v?lx:sx,A=r.dataObject.isPolarAxisCategory?"H":"h",T=(n.label,n.ticklabel),P=T.events,E=n.tickmark,L=n.subtickmark,M=n.axisline,D=n.grid,I=n.minorGrid||{},R=n.tickTransform,z=e.renderGrid,j=e.renderTicklabel,F=e.isGridShow,B=e.isMinorGridShow,H=e.isSubTickMarkShow,N=null!=P&&0==Jn(P.enabled,!0)?"auto":P&&P.cursor||"pointer",W=r.systemConf.chart.plot.border,V=e.minorGrid,Y=o.ticks.isHierarchialLevelType(),U=1e-6,G=null==s?m.ticks?m.ticks.apply(m,a):m.domain():s,X=null==c?m.tickFormat?m.tickFormat.apply(m,a):ix:c,Z=y&&!b?i.longTickSize[_]:Math.max(u,h,0)+p,q=y&&!b?i.axisgroup[_]:0,$=m.origRange?m.origRange:m.range(),Q=+$[0]+.5,K=+$[$.length-1]+.5,J=(m.bandwidth?m.discreteWidth?Y?cx:dx:ux:cx)(m.copy()),tt=t.selection?t.selection():t,et=tt.selectAll(".domain").data([null]),nt=tt.selectAll(".tick").data(G,m).order(),at=nt.exit(),rt=nt.enter().append("g").attr("class","tick"),ot=nt.select("line.minorTicks"),it=(f&&D.show?nt.select("line.majorTicks"):nt.select("line.majorTicks").remove(),nt.select("text").attr("class","ticklabel"));B=B&&isArray(V),H=H&&isArray(V);var lt=wc("g",".minorGrid",B?[1]:[],tt),st=wc("line",".minor-grid",B?V:[],lt),ct=wc("g",".subTicks",H?[1]:[],tt),ut=wc("line",".sub-ticks",H?V:[],ct),dt=r.racing&&r.racing.syncTransition||tt.transition(t);et=et.merge(et.enter().insert("path",".tick")).attr("class","domain").styles({stroke:!1===M.show?"transparent":M.color||"#000","stroke-width":wa(M.strokeWidth,1),"stroke-dasharray":Gr(M.style,wa(M.strokeWidth,1)),"stroke-linecap":Xr(M.lineCap,M.style)});var ht=function(t,e,n,a){a&&t.attr("transform",(function(t){return O(J(t))})),t.attr("".concat(w,"1"),x*q).attr("".concat(w,"2"),x*q+k*n).styles({fill:"none","shape-rendering":"crispedges","stroke-width":e.strokeWidth,stroke:e.color})};ht(ot=wc("line",".minorTicks",[1],nt=nt.merge(rt)),E,u),L&&ht(ut,L,h,!0);var ft=function(t,e){var n=wa(e.strokeWidth,1),a=Gr(e.style,n),r=Xr(e.lineCap,e.style);t.attr("stroke","#000").attrs({x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2}).styles({fill:"none","shape-rendering":"crispedges","stroke-width":n,stroke:e.color,"stroke-dasharray":a,"stroke-linecap":r})};z&&f&&F&&ft(wc("line",".majorTicks",[1],nt),D),z&&B&&f&&(st.attr("transform",(function(t){return O(J(t))})),ft(st,I));var pt=[T,r.systemConf.chart,r.systemConf.canvas,wr],gt=Dn.getVal(Kn(pt,"fontSize")),vt=Kn(pt,"fontFamily"),mt=Kn(pt,"fontWeight"),yt=Kn(pt,"fontStyle"),bt=Kn(pt,"textShadow"),xt=Kn(pt,"fontColor"),Ct=Kn(pt,"textDecoration"),kt=(Kn(pt,"strokeColor"),gb(v,g,0,null,Math.max(E.size,h),p,i));it=it.merge(rt.append("text"));var wt=function(t,e,n,a){if(a){var o=$n(a,t,m,r);n+="x"==e?o[0]:o[1]}return n};if(j&&(it.attr("class","ticklabel").style("font-size","".concat(gt,"px")).style("font-family",vt).style("font-weight",mt).style("font-style",yt).style("text-shadow",bt).style("text-decoration",Ct).style("fill",xt).style("text-anchor",kt.textAnchor).style("cursor",N).style(w,C*Z).attr(w,(function(t){return wt(t,w,C*Z,R)})).attr(S,(function(t){return wt(t,S,0,R)})).attr("dy",(function(t,e){return i&&"zigzag"==i.mode&&e%2&&kt.dy1?kt.dy1:kt.dy})).attr("transform",(function(t){var e=[0,0];return R&&(e=$n(R,t,m,r)),"rotate(".concat(kt.rotate[0]," ").concat(kt.rotate[1]+e[0]," ").concat(kt.rotate[2]+e[1],")")})),kb(it,v,kt,T,n,m,r),o.ticks.isHierarchialLevelType()&&it.call(ox,m,v)),r.racing&&r.racing.syncTransition?nt.transition(dt).attr("transform",(function(t){return O(J(t))})):nt.attr("transform",(function(t){return O(J(t))})),t!==tt&&(nt=nt.transition(t),ot=ot.transition(t),it=it.transition(t),st=st.transition(t),ut=ut.transition(t),at=at.transition(dt).attr("opacity",U).attr("transform",(function(t){return isFinite(t=J(t))?O(t):this.getAttribute("transform")})),rt.attr("opacity",U).attr("transform",(function(t){var e=this.parentNode.__axis;return O((e&&isFinite(e=e(t)),J(t)))}))),at.remove(),et.attr("d","left"===v||"right"==v?"M".concat(x*(d+q),",").concat(Q).concat(A,"0.5V").concat(K,"H").concat(x*(d+q)):"M".concat(Q,",").concat(x*d,"V0.5H").concat(K,"V").concat(x*d)),nt.attr("opacity",1).attr("transform",(function(t){return O(J(t))})),i&&i.isInline&&na(W)&&!0===W.show){var _t="left"==v||"right"==v,St=_t?1:0,Ot=_t?gt*parseFloat(kt.dy):0,At=_t?[0,r.plotarea.height]:[r.plotarea.left+.05*r.plotarea.left,r.plotarea.width+.05*r.plotarea.width];nt.style("display",(function(){var t=iu(this).translate[St];return ea(Ot+t,At)?"":"none"}))}ot.attr("".concat(w,"2"),x*q+k*u),tt.filter(hx).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===v?"start":"left"===v?"end":"middle"),tt.each((function(){this.__axis=J})),j&&(it.each(X),!0===T.tooltip&&it.each((function(t){mc(l(this),this.formattedVal)})))}function px(t,e,n,a,r,o){var i=n.textOverflow||"ellipsis",s="ticklabel",c=!1,u=[pn,Kr,a,0,i,r,t,o,s,n,0,{edge:function(t,n){var a=l(t).attr("text-anchor"),r=iu(t.parentNode).translate,o=iu(t).translate,i={};if(a===io){var s=(n.left+n.right)/2;i.left=s-e,i.right=s+e}else a===lo?(i.right=n.left+n.width,i.left=i.right-r[0]-o[0]-e):(i.left=n.left,i.right=i.left-r[0]-o[0]+e);return c=c||n.left<i.left||n.right>i.right,i},type:"polar"}],d=_b.apply(void 0,u);return function(){t.selectAll("".concat(gr,".").concat(s)).each((function(t,e){d(this,e)})),a.cache.polarAxis={trimmed:c}}}function gx(t,e){var n=t.selectAll("".concat(gr,".ticklabel")),a=vx(n,e),r=a.right,o=a.left,i=Ge(mx(r),mx(o)),s=0;if(i){n.each((function(){s&&s<=i&&l(this).style("display","none"),s=s===i?0:s+1}));var c=vx(n.filter((function(){return"none"!==l(this).style("display")})),e);r=c.right,o=c.left,(i=Ge(mx(r),mx(o)))&&(yx(r),yx(o))}}function vx(t,e){var n=[],a=[];return t.each((function(t){var r=e(t),o=l(this),i={bb:Bn(this),xy:iu(this.parentNode).translate,ele:o};0===r||r===on||r===2*on?(n.push(i),a.push(i)):r>0&&r<on?n.push(i):a.push(i)})),{left:a,right:n}}function mx(t){var e=0;t.sort((function(t,e){return t.xy[1]-e.xy[1]}));for(var n=0;n<t.length-1;n++){for(var a=!1,r=0,o=bx(t[n]),i=n+1;i<t.length&&!a;i++){ml(o,bx(t[i]))?r++:a=!0}e=Ge(e,r)}return e}function yx(t){for(var e=0;e<t.length-1;e++){if(t[e].hidden)return;for(var n=!1,a=bx(t[e]),r=e+1;r<t.length&&!n;r++){var o=t[r].ele;ml(a,bx(t[r]))?(t[r].hidden=!0,o.style("display","none")):n=!0}}}function bx(t){var e=t.bb,n=t.xy;return{x1:e.x+n[0],y1:e.y+n[1],x2:e.x+e.width+n[0],y2:e.y+e.height+n[1]}}function xx(t,e){return[Qe(e-=on/2)*t,Ke(e)*t]}function Cx(t){return(t=t%(2*on))<0?t+2*on:t}function kx(t,e,n,a,r){var o=0-(t.x-.5*r),i=t.width+r-o,l=0-(t.y-.5*r);return[e/2-(a-o)/2+(a-i)/2,n/2-(a-l)/2+(a-(t.height+r-l))/2]}function wx(t){return m().range([0,1]).domain([t<on?on/2:3*on/2,on])(t)}function _x(t,e,n){return e<t&&(e=t+((t=e)-e)),t<0&&e<0&&(t+=2*on,e+=2*on),t<0&&e>=0&&(n<0?e=2*on:t=0),t<=(n=n<0?n+2*on:n)&&n<=e}function Sx(t){return 180*t/on}function Ox(t,e){var n=na(t.bandWidth)||t.levelMarker&&na(t.levelMarker.bandWidth),a=na(t.maxBandWidth)||t.levelMarker&&na(t.levelMarker.maxBandWidth),r=Ge(0,Xa(t.innerRadius,e,0));if(n||a){var o=na(t.bandWidth)?Xa(t.bandWidth,e,0):e-r,i=na(t.levelMarker.bandWidth)?Xa(t.levelMarker.bandWidth,e,0):e-r,l=Jn(t.maxBandWidth,e),s=Jn(t.levelMarker.maxBandWidth,e);return o=Xe(o,l),i=Xe(i,s),e-Ge(o,i)}return Xe(r,e)}Ht.get=function(){var t,e,n,a,r,o,i,s,c,u,d,f,p,g,v,m,y,b,x,C,k,w,_=[],S=null,O=null,A=6,T=6,P=6,E=3,L=null,M=null,D=0;function I(h,p,v,y){return h.each((function(h){var y=l(this);c=h.label,i=h.ticklabel,s=h.tickmark,u=h.grid,d=h.minorGrid||{},f=h.subtickmark||{};var _=g.dataSplicer.getColumns(),M=tc(g,p,v),z=M.ticks,F=z.tickValueObj,B=g.dataObject.hierarchical,H=g.dataObject.categoryHierarchy,N=H&&ko(p,v,g),W=u.show,V=ua(k)&&k.length>0,Y=d.show&&V,U=(f.count>0||na(f.interval))&&V,G=z.isHierarchialLevelType(),X=na(i.showAs),Z=(D=wa(D,0))<0?360-Ze(D):D;Z=Z>360?Ze(Z)-360:Z,a&&(y.selectAll("g.axisgroup").selectAll("*").remove(),y.selectAll("g.axisgroup").attr("transform",null),y.selectAll("g.axislabelgroup").attr("transform",null).attr("clip-path",null));var q,$=dc(y,"g",[h],".","class","axisgroup");if(r&&y.selectAll("g#ticklabelG_".concat(g.id)).remove(),F&&F.inlineToPlot){y.selectAll("g.axisgroup").selectAll("*").remove(),(q=dc(y,"g",[1],"#","id","ticklabelG_".concat(g.id))).style("pointer-events","visible");var Q=dc(g.staticPaneSVG,"use",[1]);Q.attr("xlink:href","#ticklabelG_".concat(g.id)),Q.attr("x",y.attr("x")),Q.attr("y",y.attr("y"))}if(n&&t.ticks(n[0],n[1]),g._isAxisCategory()&&"clr"!==p&&(g.dataObject.isAxisCategory||!B||!B.pivot||!wo(p,v,g))){var K=function(t,e,n,a,r){var o=Hn(t.plotarea);o.chartId=t.id;var i=t.dataObject.hierarchical,l=dc(t.svg,"defs",[1]),s=jn(o,a+r),c=dc(l,"clipPath",[1],"#","id",s),u=dc(c,"rect",[1]),d=(t.systemConf.chart.axes.xaxis,t.systemConf.chart.axes.yaxis,ec(t,a,r,!1)),h={},f=e.axisgroup,p=.5,g=p*t.plotarea.left,v=p*(t.canvasarea.width-(t.plotarea.left+t.plotarea.width)),m=p*t.plotarea.top,y=p*t.plotarea.bottom,b=0;switch(i&&(b=sc(a,r,t)),n){case"top":h.x=-g,h.y=-f.height,h.height=f.height+b+t.plotarea.height,h.width=f.width+g+v;break;case"right":h.x=-t.plotarea.width,h.y=-m,h.width=f.width+t.plotarea.width+(d.axisline.strokeWidth||1),h.height=f.height+m+y;break;case"bottom":h.x=-g,h.y=-t.plotarea.height-b,h.height=f.height+b+t.plotarea.height,h.width=f.width+g+v;break;case"left":h.x=-f.width,h.y=-m,h.width=f.width+t.plotarea.width+b+(d.axisline.strokeWidth||1),h.height=f.height+m+y}return u.attrs(h),s}(g,F,m,p,v);$.attr("clip-path","url(".concat(g.defsLocation,"#").concat(K,")")),F.inlineToPlot&&q.attr("clip-path","url(".concat(g.defsLocation,"#").concat(K,")"))}C=g.axes.animationDuration;var J={tickValues:S,tickFormat:O,tickSizeInner:A,tickSizeOuter:T,subTickSize:P,gridSize:L,tickPadding:E,orient:m,rotation:Z,scale:e,chart:g,axis:M,minorGrid:k,syncTransition:g.racing&&g.racing.syncTransition};z.majorTicks=L;var tt,et,nt,at,rt,ot=g.racing&&g.racing.syncTransition||$.transition().duration(C),it=!w,lt=M.prerenderComp;if(it){var st="cartesian.axisMarks";lt.axisView&&(st=lt.axisView.conf.markParser||st,at=lt.axisView.conf.markExtender),tt=yb.call(M.prerenderComp,!0,e),et=mb("cartesian.axisTitle").call(M.prerenderComp),nt=mb(st).call(lt)}"clr"===p||X||x?(J.renderGrid=!0,J.renderTicklabel=!F.inlineToPlot,J.isGridShow=W,it?(rt=nt(tt,et,J,ot,$).mark,at&&(rt=$n(at,rt,lt)),Kf(rt,$)):$.call(fx,J,h),F.inlineToPlot&&(J.renderGrid=!1,J.renderTicklabel=!0,rt=nt(tt,et,J,ot,$).mark,at&&(rt=$n(at,rt.mark,lt)),Kf(rt,q))):(J.renderGrid=!0,J.renderTicklabel=!F.inlineToPlot,J.isGridShow=W,J.isMinorGridShow=Y,J.isSubTickMarkShow=U,it?(rt=nt(tt,et,J,ot,$).mark,at&&(rt=$n(at,rt,lt)),Kf(rt,$)):$.transition(ot).call(fx,J,h),F.inlineToPlot&&(J.renderGrid=!1,J.renderTicklabel=!0,q.transition().duration(150).call(fx,J,h)));var ct=$.selectAll(".tick"),ut=null==S?e.ticks?e.ticks.apply(e,[ct.nodes().length]):e.domain():S,dt=it?lt.axisTicks.tickInfo.ticklabelObj:ut,ht=it?function(t){return lt.axisTicks.tickInfo.scale(t)}:e,ft=$.selectAll(".tick").data(dt,ht),pt=ft.select("line.majorTicks"),gt=y.selectAll("text.axislabel"),vt=F.inlineToPlot?q:$,mt=vt.selectAll("text.ticklabel").data(dt,ht),yt=X?$.selectAll(" g.image").data(dt,ht):null;G&&(j(ft,p,v,"minorTicks"),N&&W&&j(ft,p,v,"majorTicks"));gb(m,Z,0,t,s.size);var bt={data:b.map((function(t){return Rn(_[t],{columnindex:t},!0)}))};if(rx(g,vt,mt,yt,i,bt,p,v),"clr"!==p&&g.dataObject.hierarchical&&g.dataObject.hierarchical.categoryTree&&function(t,e,n,a,r,o){var i,l=g.dataObject.hierarchical.pivotLayout,s="x"==a?"column":"row",c=l.getRootNodeList(s);if(ko(a,r,g))var u=r-c.getLeavesCount(),d=c.getBranchNodes(u);else{var h="column"==s&&c.splitColumnLeaves&&g.axes[a].leaves.length||"row"==s&&"numeric"==o;d=h?c.getBranchNodes(0):c.getClusterNodes(0),i=h?g.axes[a].leaves[r].parentBranchIdx:null}if(d){t.attr("levelbycolumn",(function(t,e){var n=wa(i,e);return d[n]?d[n].levelByColumn:null})).attr("levelbyrow",(function(t,e){var n=wa(i,e);return d[n]?d[n].levelByRow:null})),"numeric"==o&&(n.attr("levelbycolumn",d[i||0].levelByColumn),n.attr("levelbyrow",d[i||0].levelByRow));var f=g.cache.hierarchical&&g.cache.hierarchical[s],p="row"==s?"levelByRow":"levelByColumn";if(f&&f.active){var v=f.query;e.style("opacity",(function(t,e){var n=wa(i,e);return d[n][p].startsWith(v)?1:.1}))}}}(ft,mt,gt,p,v,bt.data[0].datatype),G||"between"!=s.align||R(e,ft,"minorTicks",p,v),"clr"!==p){gt=y.selectAll("text.axislabel");Oo(p,v,m,g,o);_b(gt,m,g,"left"==m?270:"right"==m?90:0,"ellipsis",e,$,I,"axislabel"),!0===c.tooltip&&mc(gt,et.text)}if(L&&W&&((e.bandwidth||e.discreteWidth)&&"between"==s.align&&R(e,ft,"majorTicks",p,v),"clr"!==p)){var xt=e.range(),Ct=null==I.tickValues()?null:e(I.tickValues()[0])+(e.bandwidth?e.bandwidth()/2:0),kt=g.systemConf.chart.plot.border,wt=ec(g,"x"===p?"y":"x",0,!1),_t=!0===kt?kt.color:wt.axisline.color;!na(Ct)||"transparent"===u.color||"transparent"===_t||xt[0]!==Ct||"y"==p&&H&&B.hasRows()||l(pt.nodes()[0]).style("stroke","transparent")}var St=h.baseline;null!=St&&dc($,"line",!0===St.show&&e.domain()[0]<=St.value&&St.value<e.domain()[1]?[1]:[],".","class","zeroBase").attrs({x1:"left"==m||"right"==m?0:e(St.value),y1:"left"==m||"right"==m?e(St.value):-o.height,x2:"left"==m||"right"==m?o.width:e(St.value),y2:"left"==m||"right"==m?e(St.value):0}).styles({fill:dn,stroke:St.color,"shape-rendering":"crispedges","stroke-width":St.strokeWidth})})),I}function R(t,e,n,a,r){e.selectAll("line#".concat(n,"Align")).remove();var o,i,c,d,h=e.nodes(),f=l(e.node()),p=l(h[h.length-1]),v=e.selectAll("line.".concat(n,":not(#minorTicksAlign)")),y=p.selectAll("line.".concat(n)),b=dc(f,"line",[1],"#","id","".concat(n,"Align")),x=tc(g,a,r).ticks.isHierarchialLevelType(),C=z(t,x);if("minorTicks"==n)c="bottom"==m||"top"==m?0:-s.size,d="bottom"==m?s.size:"top"==m?-s.size:0,F(s,b);else{var k=sc(a,r,g),w="left"==m||"right"==m?"x1":"y1",_="left"==m||"top"==m?k:-k;o="x1"==w?_:L.x1,i="y1"==w?_:L.y1,c=L.x2,d=L.y2,B(u,b)}if(t.bandwidth||t.discreteWidth)v.attr("transform","translate(".concat(C.mid,")")),y.attr("transform","translate(".concat(C.end,")")),b.attr("transform","translate(".concat(C.start,")")).attrs({x1:o,y1:i,x2:c,y2:d});else{var S=0;v.attr("transform",(function(e,n){var a=z(t,x,S++);return"translate(".concat(a.mid,")")})),y.attr("transform","translate(".concat(C.end,")")),b.attr("transform","translate(".concat(C.start,")")).attrs({x1:o,y1:i,x2:c,y2:d})}}function z(t,e,n){var a,r,o,i,l;if(t.bandwidth&&!e){var s=t.bandwidth(),c=t.ordinalRange,u=t.outerPaddingPx+s/2,d=t.domain().length>1?c[1]-c[0]-s:0;l=Xe(u,i=s/2+d/2)}else if(e)i=0,l=0;else{var h;if(g.dataObject.hierarchical)h=g.dataObject.hierarchical.pivotLayout.getRootNodeList("column").getDomainForCluster(0);else h=I.tickValues();var f=Wt.getContinuousRangeBand(t,h,n);i=s=f.rangeBand,l=f.outerPaddingInPixel}var p=t.bandwidth?.5:0;return"bottom"===m||"top"==m?(a="".concat(-(l-p),",0"),r="".concat(i+p,",0"),o="".concat(l+p,",0")):(a="0,".concat(-l+p),r="0,".concat(i+p),o="0,".concat(l+p)),{start:a,mid:r,end:o}}function j(t,e,n,a){var r=tc(g,e,n),i=r.component,c="minorTicks"==a?s:u,d=t.selectAll("line.".concat(a)),h=sc(e,n,g);r.ticks.tickValueObj.tickMarkSize=h+i.tickSize();var f=n,p="left"==m||"right"==m?"x1":"y1",v="left"==m||"top"==m?h:-h,y="left"==m?"y1":"x1";g.dataObject.hierarchical.pivotLayout;if(f===g.axes[e].count-1){"bottom"==m&&s.size;var b=t.nodes();t.selectAll("line#".concat(a,"Align")).remove();var x,C=dc(l(b[b.length-1]),"line",[1],"#","id","".concat(a,"Align")),k=r.scale,w=k.domain().length,_="top"==m||"bottom"==m?"".concat(k.discreteWidth(w-1),",0"):"0,".concat(k.discreteWidth(w-1)),S="left"==m||"right"==m?"x2":"y2";x="minorTicks"==a?"left"==m||"top"==m?-s.size:s.size:"left"==m||"top"==m?h+o.width:-(h+o.height),C.attr("transform","translate(".concat(_,")")).attr(p,v).attr(S,x),"minorTicks"==a?F(c,C):B(c,C)}d.attr(y,null),d.attr(p,v)}function F(t,e){e.styles({fill:"none","shape-rendering":"crispedges","stroke-width":t.strokeWidth,stroke:t.color})}function B(t,e){var n=wa(t.strokeWidth,1),a=Gr(t.style,n),r=Xr(t.lineCap,u.style);e.styles({fill:"none","shape-rendering":"crispedges","stroke-width":n,stroke:u.color,"stroke-dasharray":a,"stroke-linecap":r})}return I.axis=t,I.scale=function(n){return arguments.length?(e=n,t?t.scale(e):(t=h(m,e)).scale(e),I):e},I.systemconf=function(t){return arguments.length?(p=t,I):p},I.orient=function(e){return arguments.length?(na(m)&&(m!=e?(a=!0,g.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("*").remove(),t=null):a=!1),m=e,I):m},I.tickOrient=function(t){return arguments.length?(na(y)&&(r=y!=t),y=t,I):y},I.tickArguments=function(t){return arguments.length?(_=null==t?[]:Array.prototype.slice.call(t),I):_.slice()},I.tickValues=function(t){return arguments.length?(S=null==t?null:Array.prototype.slice.call(t),I):S&&S.slice()},I.tickFormat=function(t){return arguments.length?(O=t,I):O},I.tickSize=function(t){return arguments.length?(A=T=+t,I):A},I.subTickSize=function(t){return arguments.length?(P=+t,I):P},I.tickSizeInner=function(t){return arguments.length?(A=+t,I):A},I.tickSizeOuter=function(t){return arguments.length?(T=+t,I):T},I.tickPadding=function(t){return arguments.length?(E=+t,I):E},I.ticks=function(){return arguments.length?(n=arguments,I):n},I.majorTicks=function(t){return arguments.length?(L=t,I):L},I.minorGrid=function(t){return arguments.length?(k=t,I):k},I.plotarea=function(t){return arguments.length?(o=t,I):o},I.tickLabelWidth=function(t){return arguments.length?(M=t,I):M},I.tickRotation=function(t){return arguments.length?(D=t,I):D},I.preCalcTickLen=function(t){return arguments.length?(v=t,I):v},I.chartObj=function(t){return arguments.length?(g=t,I):g},I.columnIndices=function(t){return arguments.length?(b=t,I):b},I.isMultiLineTick=function(t){return arguments.length?(x=t,I):x},I.polar=function(t){return arguments.length?(w=t,I):w},I},(Ht.TickLabelFilter=function(t,e,n,a,r){if((e=e.data[0]).datatype!=Eo&&e.datatype!=Po){n.cache.hierarchical||(n.cache.hierarchical={rows:{},columns:{}});var o=n.dataObject.hierarchical,i=e.itemIndex,l="x"==r?"column":"row",s="row"==l?n.cache.hierarchical.rows:n.cache.hierarchical.columns,c=o.pivotLayout.getRootNodeList(l),u=c.getCount(),d=c.getLeavesCount(),h=e.axisOrder,f=u+d-h-1,p=ko(r,h,n),g=c.getNodesAtDepth(h)[i],v=c.getAllChildren(g),m=n.dataObject.pivot?"row"==l?"levelByRow":"levelByColumn":"level",y=n.dataObject.pivot?"row"==l?"levelByColumn":"levelByRow":"level",b=n.dataObject.pivot?"row"==l?"columns":"rows":"level",x=Ht.TickLabelFilter.getQuery(v[0],f,m),C=n.cache.hierarchical[b].query,k=n.chartTypes[0];if("area"!==k.name&&"line"!==k.name||p){if(s.lastQuery=x,a){var w;if(C)w=Ht.TickLabelFilter.getSelectedNodes(n,null,y,C).selected;var _=Ht.TickLabelFilter.getSelectedNodes(n,w,m,x);Ht.TickLabelFilter.getSelectedTickNodes(n,_,r,h,i,x,m),function(t,e,n){if(!e)return;!0===n?(e.selected.series.style("opacity",1),e.unSelected.series.style("opacity",.1),e.selected.labels.style("opacity",1),e.unSelected.labels.style("opacity",.1),e.reset.tick.style("opacity",1),e.unSelected.tick.style("opacity",.1),e.selected.tick.style("opacity",1)):(e.selected.series.style("opacity",1),e.unSelected.series.style("opacity",1),e.selected.labels.style("opacity",1),e.unSelected.labels.style("opacity",1),e.unSelected.tick.style("opacity",1),e.selected.tick.style("opacity",1))}(0,_,s.query!==x)}s.query===x?(ua(s.data)&&Ht.TickLabelFilter.setState(s.data,!1),s.data=s.query=s.active=s.depth=s.itemIndex=s.isLeaf=null):(ua(s.data)&&Ht.TickLabelFilter.setState(s.data,!1),Ht.TickLabelFilter.setState(v,!0),s.query=x,s.data=v,s.active=!0,s.depth=f,s.itemIndex=i,s.isLeaf=g.leaf)}}}).getSelectedTickNodes=function(t,e,n,a,r,o,i){if(e){var l=t.wrap.selectAll(".".concat(n,"-axis"));t.wrap.selectAll(".".concat(n,"-axis-").concat(a)).selectAll("g.tick:nth-child(".concat(r+2,")"));return e.selected.tick=l.selectAll("g.tick[".concat(i,'^="').concat(o,'"]')).selectAll("text.ticklabel"),e.unSelected.tick=l.selectAll("g.tick:not([".concat(i,'^="').concat(o,'"])')).selectAll("text.ticklabel"),e.reset.tick=l.selectAll("g.tick").selectAll("text.ticklabel"),e}},Ht.TickLabelFilter.getSelectedNodes=function(t,e,n,a){var r,o,i=t.chartTypes[0],l=e?e.series:t.svg.select(".seriesholder"),s=e?e.labels:t.staticPaneSVG.select("g.labelholder"),c=e?"filter":"selectAll",u=s[c]("text[".concat(n,'^="').concat(a,'"],')+"path[".concat(n,'^="').concat(a,'"]')),d=s[c]('text:not([level^="'.concat(a,'"]), ')+"path:not([".concat(n,'^="').concat(a,'"])'));if("bar"===i.name||"area"===i.name||"line"===i.name)r=l[c]("path[".concat(n,'^="').concat(a,'"]')),o=l[c]("path:not([".concat(n,'^="').concat(a,'"])'));else{if("scatter"!==i.name&&"bubble"!==i.name)return;r=l[c]("g.scatter[".concat(n,'^="').concat(a,'"]')),o=l[c]("g.scatter:not([".concat(n,'^="').concat(a,'"])'))}return{selected:{labels:u,series:r},unSelected:{labels:d,series:o},reset:{}}},Ht.TickLabelFilter.setState=function(t,e){t.forEach((function(t){t.active=e}))},Ht.TickLabelFilter.updateTickEventHandler=function(t,e,n){var a="x"==n?"column":"row",r=t.cache.hierarchical&&t.cache.hierarchical[a],o=!e;if(na(r)&&na(r.data)){var i,l=t.dataObject.hierarchical,s="row"==a?"levelByRow":"levelByColumn";if(r.data){var c=r.data.filter((function(t){return!t.seriesDisabled}));if(e&&(c.length?r.query=Ht.TickLabelFilter.getQuery(c[0],r.depth,s):r.query="-1"),o){var u=(i=c[0])[s].split("_").slice(0,r.depth+1).map(Number),d=u.length-1,h=u[u.length-1],f=l.pivotLayout.getRootNodeList("column"),p=f.getCount()+f.getLeavesCount()-d-1,g=f.getNodesAtDepth(p)[h],v=f.getAllChildren(g);r.query=Ht.TickLabelFilter.getQuery(i,r.depth,s),r.data=v,Ht.TickLabelFilter.setState(v,!0)}}}},Ht.TickLabelFilter.getQuery=function(t,e,n){var a=t[n=n||"level"].split("_").slice(0,e+1).map(Number);return"".concat(a.slice(0,e+1).join("_"),"_")},wn.setComponent("geometryUtils.polarToCartesian",xx),wn.setComponent("geometryUtils.dyFromAngle",wx),wn.setComponent("geometryUtils.isAngleInside",_x);var Ax=function(){};Ax.getValueWithinRange=function(t,e){return Xe(Ge(t,e[0]),e[1])},Ax.getNeedlePolygon=function(t,e,n){var a=wa(t.width/2,7),r=-Xa(t.innerRadius,e.radius,0),o=-Xa(t.radius,e.radius,n)+t.padding;switch(o=Xe(o,-3*a),t.type){case"clock":return"M".concat(a," ").concat(r," A").concat(a," ").concat(a," 0 0 1 ").concat(-a," ").concat(r," A").concat(a," ").concat(a," 0 0 1 ").concat(a," ").concat(r," ")+"M0 ".concat(r-a," L0 ").concat(o," M").concat(-a," ").concat(a+o," L0 ").concat(o," L").concat(a," ").concat(a+o," L0 ").concat(o);case"sharp":return"M".concat(a," ").concat(r," L",0," ").concat(r+a," L").concat(-a," ").concat(r," L0 ").concat(o," L").concat(a," ").concat(r);default:return"M".concat(a," ").concat(r," A").concat(a," ").concat(a," 0 0 1 ").concat(-a," ").concat(r," L0")+" ".concat(o," L").concat(a," ").concat(r)}},Ax.createLevelsNColors=function(t,e,n,a){var r,o=[],i=[],l=t[0].data[0],s=l[0][e.dataindex]||e.values||[],c=l[0][e.dataindex]||[],u=e.color,d=e.cornerRadius,h=e.padAngle,f=na(d)&&!na(h);if(r=ua(c[0])?c:e.ranges,s instanceof Array||(s=[s]),void 0===u&&s.length<=1&&(u=["#d1d1d1"]),r)return f&&((r=r.slice(0)).forEach((function(t){t[0]=a[0]})),r.reverse(),(u=u.slice(0)).length=r.length,u.reverse()),r.forEach((function(t,e){return t._color=u[e]})),{values:r,colors:u};if(s.length>0){var p=s.slice(0);if(!u)var g=Fn(n,[0,p.length-1],[e.colorGamma[0],e.colorGamma[1]]);var v=a[0],m=v;f?(m<0&&!qa(p,0)&&p.push(0),p.sort(B),v===p[0]&&(p=p.slice(1,p.length)),p.forEach((function(t,e){var n=Ax.getValueWithinRange(t,a);i[e]=u?u[e]:g(e),o[e]=[m,n]})),o.reverse(),i.reverse()):(p.sort(B),p.forEach((function(t,e){var n=s.indexOf(t),r=Ax.getValueWithinRange(t,a),l=Ax.getValueWithinRange(na(p[e+1])?p[e+1]:0,a);o[e]=r<0?[r,l]:[v,r],i[e]=u?u[n]:g(e),v=r<0?l:r})))}else l.forEach((function(t,e){o[e]=a.slice(0),i[e]=(u instanceof Array?u[e]:u)||"#d1d1d1"}));return o.forEach((function(t,e){return t._color=i[e]})),{values:o,colors:i}};var Tx=(Yt.svgRenderer=function(t,e){var n={},a=t.systemConf,r=pi.helpers;return n.draw=function(n){if(t.scroll&&!t.scroll.initialized&&t.scroll.visible)return!1;t.dataset.getDataType("x")==To&&t.isAxisCategory&&Wt.barBandwidth(t);var o,i=[];t.chartRendered=!1;var l=t.dataObject.isCombinationalChart,s=l?Ee.arrangeSeriesRenderingOrder(t):t.seriesdata,c=t.dataObject.hierarchical,u=c&&c.facetRendering,d=[{data:s}];u&&(d=nr((u&&c.pivotLayout).getRootNodeList("layer").panes));t.isAxisedHierarchyChart&&(d=[{data:new(wn.getComponent("hierarchyDataAdapter"))(t.seriesdata,t.preProcessor).getData()}]);var h=0;if(t.viewFlow&&t.viewFlow.marks._default.chart.length){var f=t.viewFlow.marks._default.chart;d=[{data:f=l?Ee.arrangeSeriesRenderingOrder(t,f):f}]}d.forEach((function(n,i){e.barDatasetIndex=0,n.data.forEach((function(i,c){var d=u?Ee.arrangeSeriesRenderingOrder(t,n.data,h,!0):s,f=u?i.node:i,p=l?u?c:d[c].seriesidx:c,g=u?h++:p,v=u?i.layer:0;((o=r.getChartType(f.type||t.userdata.seriesdata.type,Eo))==Gt.bubblepie||Ys(t))&&Xn(t.bubblePieRendererIndex)&&(t.bubblePieRendererIndex=p);var m=we.get(o);null==t.renderer[g]&&(t.renderer[g]=Tx(m,t),t.rendererConf[g]=new Yt.rendererConf),t.renderer[g].chartRendered=!1,0==c&&(Du(t,a.chart.plot.events,0,"init"),t.hideLoading(t.container)),Ee.setRendererProp(t,t.renderer[g],d,p,c,e,g,o,v)}))}));h=0;if(d.forEach((function(c,d){e.barDatasetIndex=0,c.data.forEach((function(e,d){var f=u||t.isAxisedHierarchyChart?c.data:t.seriesdata,p=u||t.isAxisedHierarchyChart?Ee.arrangeSeriesRenderingOrder(t,c.data,h,!0):s,g=u?e.node:e,v=l?u?d:p[d].seriesidx:d,m=u?h++:v;if(!(v>0)||t._isAxisCategory()&&!t.isAxisedHierarchyChart||t.dataObject.isPolarAxisCategory){o=r.getChartType(g.type||t.userdata.seriesdata.type,Eo);var y=[],b=we.get(o),x=p.plotoptions,C=fp(a.chart.plot.plotoptions[b],x,t,b),k=C.enabled,w=C.type,_=Xi(t,o,"axis"),S=Xi(t,o,"polarAxis");if(k&&!n&&(kl(o)||Vi(o))&&[Gc,Yc,Hc,Ec,Fc,Ic,Rc].indexOf(w)<0)i[m]=!1,t.timerObj[t.timerObj.length]=y[m]=setInterval((function(){t.renderer[m].chartRendered&&clearInterval(y[m]),!i[m]&&(0==m||m>0&&t.renderer[m-1].chartRendered)&&(Px(t,f,t.renderer[m]),i[m]=!0)}),10);else{if(t._isAxisCategory()&&!_&&!S&&0!=d)return void(t.renderer[m].chartRendered=!0);Px(t,f,t.renderer[m])}}else t.renderer[m].chartRendered=!0}))})),t.systemConf.chart.plot.datalabels.renderOnInit){var p=t.systemConf.chart.plot.datalabels.events;Du(t,p,0,"init"),wn.getComponent("labelRenderer")(e.labelQueue,e.labelArray,t),Du(t,p,0,n?"onreload":"onload")}Ee.renderCompletedEvents(t,n,e)},n}).createSVGRenderer=function(t,e){return t=Zp(t),Ao(e)&&Ys(e)&&qa([Ai,Pi,Ei],t)&&(t="bubblepie"),new Pe[t]},Px=Yt.svgRenderer.drawSVG=function(t,e,n,a){if(a)n.update();else{if(t.viewFlow&&t.viewFlow.marks._default.chart.length)e=t.viewFlow.marks._default.chart;clearTimeout(n.renderedTimer);var r=t.wrap.data([t.systemConf]),o=vv(t),i=n.commonRendererProp().params.bound,l=p(r,"seriesholder",{x:o.left,y:o.top}),s=t.dataObject.hierarchical;if(s&&s.facetRendering){var c=e[0].row||0,u=e[0].column||0,d="".concat(c,"_").concat(u),h=Ui(t,d,0).value,f=wc("g",".grid".concat(d),[1],l);f.datum(e).call(n),g(f),qa(_e.axis,h)||p(l,"grid".concat(c,"_").concat(u),i)}else l.datum(e).call(n),g(r.selectAll("g.seriesholder"));p(t.staticPaneSVG,"labelholder",{x:o.left,y:o.top})}function p(t,e,n){return t.select("g.".concat(e)).attr("transform","translate(".concat(n.x,",").concat(n.y,")"))}function g(e){t.dataObject.isPolarAxisCategory&&e.selectAll((function(){return this.childNodes})).attr("transform","translate(".concat(t.plotarea_approx.x,",").concat(t.plotarea_approx.y,")"))}};function Ex(t){var e=t.config,n=t.radius,a=t.innerRadius,r=t.data,o=t.globalFont,i=t.scale,l=t.element,s=t.format,c=e.show,u=e.align,d=e.showAs,h=e.padding,f=void 0===h?5:h,p=c?"min"===d?[r[0]]:"max"===d?[r[1]]:r:[],g=u===ao?a-f:u===qr?(n+a)/2:n+f,v=wc("g",".minmaxlabelsGroup",[1],l),m=wc(gr,".minmaxlabels",p,v);vc(m,[e].concat(_toConsumableArray(o),[wr])),m.attrs({"text-anchor":function(t){var e=Cx(i(t));return u===qr||e%on==0?io:u===ao&&e<on||u!==ao&&e>on?lo:null},dy:function(t){var e=Cx(i(t));return u===qr?"1em":u===ao?e>on/2&&e<3*on/2?null:"".concat(-wx(e),"em"):e>on/2&&e<3*on/2?"".concat(wx(e),"em"):null},transform:function(t){var e=xx(g,i(t)),n=u===qr?f:0;return lu([e[0],e[1]+n])}}).text(s)}function Lx(t,e,n,a){var r=n.datatype,o=n[r],i="threshold",l=!1;return t.replace(Re,(function(t,n){var s="";return ua(e[n])?(s=Wo(o,e[n][0],r,a,i,l),s+=" - ".concat(Wo(o,e[n][1],r,a,i,l))):s=Wo(o,e[n],r,a,i,l),s}))}function Mx(t,e){var n=e.scale,a=e.radius,r=e.innerRadius,o=e.element,i=e.type,l=e.index,s=Zu(t).minmaxlabels,c=s.text,u=n.domain(),d=t.dataset.getColumn(i,l);return{config:s,radius:a,innerRadius:r,data:u,scale:n,element:o,globalFont:[t.systemConf.chart,t.systemConf.canvas],format:function(e,n){return c&&na(c[n])?Lx("".concat(c[n]),u,d,t):qu(t,i,l,"minmaxlabels")(e)}}}var Dx=["interval","tickCount","tickMultiples"];function Ix(t){var e,n=t.chartObj,a=t.type,r=t.index,o=t.config,i=t.scale,l=t.radius,s=t.plotarea,c=t.container;if(Dx.some((function(t){return na(o[t])}))){var u=i.range(),d=2*l*Ze(u[1]-u[0]),h=Gu(n,a,r),f=Ht.ticks(n,o,a,r,"left",s);h.ticks=f,i.range([0,d]),f.preCalcApproxAxisLength(s);var p=f.getTickValues(d,d,null,null,null,h.Ticks);c.selectAll("g.axislabelgroup").remove(),e=p.ticks}return e}function Rx(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"y",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,l=Fx(t,n),s="polar"===l?zx:jx;s(t,e,n,a,r,o,i)}function zx(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"y",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=t.systemConf,d=t.renderer[0],h=o,f=t.chartTypes[0],p=f.value,g=f.name,v=s.chart.plot.plotoptions[g],m=ec(t,n,a),y=+v.outerPadding||0,b=+v.maxRadius||0,x=p===Gt.dial,C=Bx(t,n,m),k=C&&m.axisline.show?Jn(m.axisline.strokeWidth,1):0,w=Jn(m.ticklabel.marginLeft,5),_=Jn(m.tickmark.size,3),S=m.subtickmark?Jn(m.subtickmark.size,2):0,O=Dn.getVal(m.ticklabel.fontSize||s.chart.fontSize||s.canvas.fontSize||wr.fontSize),A=m.orient||ro,T=m.tickOrient,P=m.ticklabel.textOverlap||"hidden",E=function(t){return t.selectAll((function(){return this.childNodes}))},L=h.width-2*y,M=h.height-2*y,D=wa(i&&i.radius,Xe(L,M)/2),I=wa(i&&i.innerRadius,Ox(v,D)),R=C&&+v.padding||0;t.plotarea_approx={x:0,y:0,innerRadius:I};var z=e.scale,j=z.range(),F=t.dataset.getColumnIdx(n,a),B=t.dataObject,H=B.isPolarAxisCategory&&B.categoryHierarchy&&B.hierarchical.pivotLayout.columns.count&&!B.hierarchical.pivotLayout.columns.splitColumnLeaves&&B.getCategories(n,a),N=Ix({chartObj:t,type:n,index:a,config:m,scale:z,radius:D,plotarea:h,container:r});z.range(j);var W=wa(i&&i.axisRadius,A==ao?T===ro?I-R-k/2-Ge(S,_+w+O):I:D),V=function(e,r){var o=H?H[e]:e;return qu(t,n,a,"axis")(o,r)},Y=Ht.polar().scale(z).chartObj(t).radius(W).columnIndices([F]).tickFormat(V).tickValues(N);E(r).attr("transform",null);var G=wc("g",".axisgroup",C?[m]:[],r),X=function(){var e=[G,L/2,m.ticklabel,t,z,Y];return px.apply(void 0,e)},Z=function(){!0===m.ticklabel.tooltip&&G.selectAll(gr).each((function(t){mc(l(this),V(t))}))},q=function(){G.selectAll("".concat(gr,".ticklabel")).style("display",null),G.call(Y).call(X()).call((function(){return"hidden"===P?gx(G,z):null})).call(Z)};if(q(),r.style("visibility","hidden"),x&&yt(D),!i){var $,Q=U().innerRadius(!x||v.needle.show||t.datalabels.moduleExists&&Ud(v.datalabels,t)?0:I).outerRadius(D).startAngle(j[0]).endAngle(j[1]),K=dc(r,mr,[1],".","class","dummyArc").attr("d",Q(1)),J=wc("g",".datalabel",[1],r),tt=wc("g",".targetSeries",[1],r);if(x){var et=t.dataObject.hierarchical,nt=et&&et.facetRendering;if($=nt?Do(t.dataObject):[{data:t.seriesdata}],!d){var at=0;d=t.renderer[at]=Tx(g,t),t.rendererConf=[],t.rendererConf[at]=new Yt.rendererConf,Ee.setRendererProp(t,d,$[0].data,at,at,[],at,null,at)}d.firedList={};var rt=Wu("dial");rt._empty||J.call(rt().renderer(d).args([t.seriesdata,0]),t.labelHandler,J),bt(D,$);var ot=+v.needle.width/2||7,it=dc(J,"circle",v.needle.show?[1]:[]);it.attrs({r:ot,transform:"translate(".concat(ot,",").concat(ot,")")})}var lt=Bn(K),st=Bn(r),ct=lt.height/D,ut=lt.width/D,dt=D+Xe((L-st.width)/ut,(M-st.height)/ct),ht={};if(x){ht=xt(),st=Bn(r);dt=(dt=D+Xe((L-st.width)/ut,(M-st.height)/ct))>b?b:dt,dt=isFinite(dt)&&dt>0?dt:0}I=Ox(v,dt)-(A==ao?(+v.strokeWidth||0)/2:0),W=(A==ao?T==ao?I:I-(mt(D)-D):dt)-(T==ao?k/2:0)-(A==ao?R:0),Y.radius(W),ht.axisgroup||q(),Q.outerRadius(dt).innerRadius(!x||v.needle.show||t.datalabels.moduleExists&&Ud(v.datalabels,t)?0:I),K.attr("d",Q(1)),x&&(!ht.minmaxlabels&&yt(dt),bt(dt,$));lt=Bn(K);var ft=kx(st=Bn(r),h.width,h.height,dt,0);t.cache.polarAxis.trimmed&&(ft[0]=h.width/2);var pt=(T==ao&&A==ro?mt(dt):dt-(A==ao?0:k/2))-(A==ao?0:R),gt=T==ao?(dt-pt)*ut:0,vt=T==ao?(dt-pt)*ct:0;i={x:ft[0],y:ft[1],width:lt.width-k-gt,height:lt.height-k-vt,radius:pt,actualRadius:dt,innerRadius:I,axisRadius:W},K.remove(),J.remove(),tt.remove(),tt=null}function mt(t){var e=[],n=t+((A==ro?k:k/2)+S*(T==ao?-1:1)),a=T==ao?c:u;return G.selectAll(gr).each((function(r){var o=Bn(this),i=xx(t+((A==ro?k:k/2)+_+w)*(T==ao?-1:1),void 0),l=[Nx(i[0]+o.x,i[1]+o.y),Nx(i[0]+o.x,i[1]+o.y+o.height),Nx(i[0]+o.x+o.width,i[1]+o.y),Nx(i[0]+o.x+o.width,i[1]+o.y+o.height),n];e.push(a(l))})),a(e)}function yt(e){Ex(Mx(t,{radius:e,innerRadius:I,type:n,index:a,scale:z,element:r}))}function bt(e,n){n.forEach((function(n,a){var r=wc("g",".targetSeries-".concat(a),[1],tt);Ax.targetMarker(r,e,I,t,n.data,void 0,r)}))}function xt(){var t={};return Ct(t,"axisgroup"),Ct(t,"minmaxlabels"),Ct(t,"targetSeries"),d.firedList=t}function Ct(t,e){var n=[".targetSeries",".datalabel",".minmaxlabels",".axisgroup"].filter((function(t){return t!==".".concat(e)})).join();r.selectAll(n).style("display",dn);var a=Bn(r),o=D+Xe((L-a.width)/ut,(M-a.height)/ct),i=Xa("minmaxlabels"===e?v.minmaxlabels.maxWidth:null,D,Xa("50%",D));(o<D-i||D<=0||!isFinite(o))&&(t[e]=!0,r.selectAll(".".concat(e)).remove()),r.selectAll(n).style("display",null)}E(r).attr("transform","translate(".concat(i.x,",").concat(i.y,")")),r.style("visibility",null),t.dataObject.isPolarAxisCategory&&r.selectAll("".concat(mr,".domain")).attr("d",(function(){return Wx(i.radius,z,m)})),t.plotarea_approx=i,o.polar=i}function jx(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"y",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return function(e){var i=t.systemConf.chart.axes.yaxis[a],s=Bx(t,n,i),c=o.polar,u=c.radius,d=i.orient||Qr,h=Jn(i.tickmark.size,6),f=Jn(i.ticklabel[d==$r?"marginRight":"marginLeft"],3),p=e.scale,g=p.range(),v=Gu(t,"x",0).scale;p=p.copy().range([g[1],g[0]]);var m={left:t.plotarea.left,top:t.plotarea.top,width:u,height:u},y=Gu(t,n,a),b=Ht.ticks(t,i,"y",a,d,m);y.ticks=b,b.preCalcApproxAxisLength(m);var x=b.getTickValues(u,u,null,null,u/20,y.Ticks),C=t.userdata.metadata,k=C.axes.y[a].length>1,w=t.dataset.getColumnIdx(n,a);ua(y.logDomain)&&p.domain(y.logDomain);e=Ht.get().orient(d).scale(p).tickPadding(f).tickSize(h,0).plotarea({width:u,height:u}).systemconf(t.systemConf).chartObj(t).tickRotation(x.rotation).preCalcTickLen(b.preCalcTickLen).tickValues(x.ticks).tickFormat((function(e){var r=qu(t,n,a,"axis")(e);l(this).text(r)})).columnIndices(k&&"y"==n?C.axes.y[a]:[w]).polar(!0);var _=iu(r).translate;r.datum(i).call(e,n,a).attr("transform","translate(".concat(c.x+_[0],",").concat(c.y-u+_[1],")")),s||r.remove();var S=r.selectAll(".tick");S.append(mr),S.select(mr).attr("transform",(function(t){return"".concat("translate(0,").concat(u-p(t),")")})).attr("d",(function(t){return Wx(u-p(t),v,i)})).styles({fill:dn,stroke:i.grid.color,"stroke-width":i.grid.strokeWidth})}(e)}function Fx(t,e){return t.chartTypes[0].value===Gt.dial||"x"===e?"polar":"angular"}function Bx(t,e,n){var a=t.canvasarea;return(n.show||n._backup&&n._backup.show)&&Nl(t,"".concat(e,"axis"),Xe(a.width,a.height))}function Hx(t,e){t.attr("transform",lu(e))}function Nx(t,e){return $e(qe(t,2)+qe(e,2))}function Wx(t,e,n){var a=e.range();if("arc"===n.grid.type){var r=U().innerRadius(t-1).outerRadius(t).startAngle(a[0]).endAngle(a[1])(1);return"M".concat(r.split(/L|M/gi)[1])}r=(e.ticks?e.ticks():e.domain()).reduce((function(n,a,r){var o=e(a),i=xx(t,o);return"".concat(n,"L").concat(i[0]," ").concat(i[1]," ")}),"");return"M".concat(r.substring(1),"Z")}(Ht.polar=function(){var t,e,n,a,r,o,i;function s(s){s.each((function(s){var u,d,h,f,p,g,v=l(this),m=e.systemConf,y=s.axisline,b=s.tickmark,x=s.subtickmark||{},C=s.grid,k=s.ticklabel,w=k.events;null!=w&&(g=0==Jn(w.enabled,!0),u=w.mousemove,d=w.mouseout,h=w.click,f=w.doubleclick,p=w.cursor);var _=s.tickOrient,S=y.show?Jn(y.strokeWidth,1):0,O=Jn(C.strokeWidth,1),A=Jn(k.marginLeft,5),T=Jn(b.size,3),P=Jn(x.size,2),E=+x.count||0,L=o||(t.ticks?t.ticks():t.domain()),M=function(t,e,n){if(a=[],n&&e.length>1){for(var a,r,o,i=(u=t.domain(),d=u[0],h=u[u.length-1],d<h?[d,h]:[h,d]),l=-1,s=e.length,c=(e[1]-e[0])/++n;++l<s;)for(r=n;--r>0;)(o=+e[l]-r*c)>=i[0]&&a.push(o);for(--l,r=0;++r<n&&(o=+e[l]+r*c)<i[1];)a.push(o)}var u,d,h;return a}(t,L,E),D=t.range(),I=dc(v,"g",[1],".","class","subticksGroup");I.style("stroke",x.color);var R=dc(I,xr,M),z=dc(v,"g",[1],".","class","ticksGroup"),j=dc(z,"g",L,".","class","tick");dc(v,mr,y.show?[1]:[],".","class","domain").attr("d",(function(){var t=U().innerRadius(n-1).outerRadius(n).startAngle(D[0]).endAngle(D[1])(1);return"M".concat(t.split(/L|M/gi)[1])})).styles({stroke:y.color,fill:dn,"stroke-width":S,"stroke-dasharray":Gr(y.style,S),"stroke-linecap":Xr(y.lineCap,y.style),"pointer-events":dn}),dc(j,xr,[1],".","class","tickmark"),dc(j,xr,[1],".","class","grid"),dc(j,gr,[1],".","class","ticklabel");var F=j.select("".concat(gr,".ticklabel")),B=j.select("".concat(xr,".tickmark")),H=j.select("".concat(xr,".grid"));F.style("cursor",p||fn).style("pointer-events",g?dn:pn).attr("index",(function(t,e){return e})).text((function(t){return r(t)})),vc(F,[k,m.chart,m.canvas,wr]),i={data:a.map((function(t){return Rn(e.systemConf.metadata.columns[t],{columnindex:t},!0)}))};var N,W,V,Y,G=function(t){c(u,jt(),t)},X=function(t){c(d,jt(),t)},Z=function(t){c(h,jt(),t)},q=function(t){c(f,jt(),t)};if(Iu(F,{mousemove:G,mouseout:X,click:Z,dblclick:q},{singletouchmove:G,touchend:X,tap:Z,dbltap:q}),_===ao)N=n-S/2,W=-(T+A),V=-T,Y=-P;else N=n+S/2,W=T+A,V=T,Y=P;j.attr("transform",(function(e){var n=xx(N,t(e));return"translate(".concat(n[0],",").concat(n[1],")")})),F.attrs({dy:function(e){var n=Cx(t(e));return _==ao?n>on/2&&n<3*on/2?null:"".concat(-wx(n),"em"):n>on/2&&n<3*on/2?"".concat(wx(n),"em"):null},"text-anchor":function(e){var n=Cx(t(e));return n%on==0?"middle":_==ao&&n<on||_!=ao&&n>on?"end":null},transform:function(e){var n=xx(W,t(e));return"translate(".concat(n[0],",").concat(n[1],")")}}),B.attrs({x2:function(e){return xx(V,t(e))[0]},y2:function(e){return xx(V,t(e))[1]}}).styles({stroke:b.color,"stroke-width":b.strokeWidth}),H.attrs({x2:function(e){return xx(-n,t(e))[0]},y2:function(e){return xx(-n,t(e))[1]}}).styles({stroke:C.color,"stroke-width":O,"stroke-dasharray":Gr(C.style,O),"stroke-linecap":Xr(C.lineCap,C.style)}),R.attrs({x2:function(e){return xx(Y,t(e))[0]},y2:function(e){return xx(Y,t(e))[1]},transform:function(e){var n=xx(N,t(e));return"translate(".concat(n[0],",").concat(n[1],")")}})}))}return s.scale=function(e){return arguments.length?(t=e,s):t},s.chartObj=function(t){return arguments.length?(e=t,s):e},s.radius=function(t){return arguments.length?(n=t,s):n},s.columnIndices=function(t){return arguments.length?(a=t,s):a},s.tickValues=function(t){return arguments.length?(o=t,s):o},s.tickFormat=function(t){return arguments.length?(r=t,s):r},s;function c(t,n,a){null!=t&&(i.data=i.data.map((function(t){return t.value=a,t})),$n(t,n,i,e))}}).render=function(t){var e=t.dataObject.isPolarAxisCategory?["x","y"]:["y"],n=t.plotarea,a=Ao(t);t.plotarea_approx=null,e.forEach((function(e){var r=wc("g",".".concat(e,"-axis"),[1],t.wrap.selectAll("g.chartgroup"));if(function(t,e){var n=Fx(t,e);if(Ao(t)){var a;Xu(t,e).forEach((function(r,o){var i=ec(t,e,o);if("polar"===n)a=$u(t,e);else{var l=t.plotarea_approx.radius;a=i.reversed&&!t.dataObject.isstacked()?[l,0]:[0,l]}var s=r.scale;s&&(s.range(a),s.origRange=a)}))}else{var r=ec(t,e,0),o=Wt.constructor(t,"x"==e?Kr:$r);if(t.axes.rotated&&"x"===e&&(t.axes.x.scale=o[0].scale),"polar"!==n){var i=t.plotarea_approx.radius,l=r.reversed&&!t.dataObject.isstacked()?[i,0]:[0,i],s=o[0].scale;s.range(l),s.origRange=l}}}(t,e),a){var o=Do(t.dataObject);t.cache.polar=t.cache.polar||{},o.forEach((function(a){var o=a.row,i=a.column,l="x"===e?0:o,s=Gu(t,e,l),c=Ee.getBound(t,a.data[0]),u="x"===e?0:xo(e,l,t),d=wc("g",".".concat(e,"-axis-").concat(o,"-").concat(i),[1],r);Hx(d,[n.left+c.x,n.top+c.y]),Rx(t,s,e,u,d,c,t.plotarea_approx),t.cache.polar["".concat(o,"-").concat(i)]=c.polar}))}else{var i=Gu(t,e),l=Ee.getBound(t),s=wc("g",".".concat(e,"-axis-0"),[1],r);Hx(s,[n.left,n.top]),Rx(t,i,e,0,s,l)}}))};Ht.polar.render;var Vx=function(){},Yx={};Vx.create=function(t,e,n,a){if(/threshold/gi.test(e))return Yx[e](t,n,a);var r=Ar.SAFARI;Ar.SAFARI=0;var o=Ss(0,n,n.color,e),i=Yx[e](t,n,o);return Ar.SAFARI=r,i},Vx.canvasGradientFill=Yx.canvasGradientFill=function(t,e,n,a,r,o){return na(o.context)||(o.context=document.createElement("canvas").getContext("2d")),t&&t.type?Vx[t.type](t,e,n,a,r,o):null},Vx.linear=Yx.linear=function(t,e,n,a,r,o){var i,l,s,c,u=o.context,d=t.dimension,h=t.spreadMethod,f=+t.x1||0,p=+t.x2||0,g=+t.y1||0,v=+t.y2||0,y=Ss(0,t,t.color,"linear"),b=Os(h)?100:Ge(Ze(p-f),Ze(v-g));ua(d)?(i=0,l=d[0],s=0,c=d[1]):(i=d.x1||0,l=d.x2||0,s=d.y1||0,c=d.y2||0);var x=m().domain([0,100]).range([i,l].sort(B)),C=m().domain([0,100]).range([s,c].sort(B)),k=x(100*f/b),w=(f=x(100*p/b),C(100*g/b)),_=(g=C(100*v/b),u.createLinearGradient(k,w,f,g));return Ux(_,y,t.opacity),_},Vx.radial=Yx.radial=function(t,e,n,a,r,o){var i=o.context,l=t.dimension,s=t.spreadMethod,c=Ss(0,t,t.color,"radial"),u=ua(l)?na(l[2])?l[2]:l[0]:l.r,d=ua(l)?u:l.x2-l.x1,h=ua(l)?u:l.y2-l.y1,f=d/100*t.x||0,p=h/100*t.y||0,g=Os(s)?u/100*t.radius:u,v=i.createRadialGradient(f,p,0,f,p,g);return Ux(v,c,t.opacity),v},Vx.thresholdLinear=Yx.thresholdLinear=function(t,e,n,a,r,o){var i=o.context,l={opacity:[],offset:[],color:[]};n.forEach((function(t){l.opacity.push(1),l.offset.push(t.offset),l.color.push(t.color)}));var s=i.createLinearGradient(t.x1,t.y1,t.x2,t.y2);return Ux(s,l,t.opacity),s};var Ux=function(t,e,n){var a=e.offset.length,r=-1;for(n=n||1;++r<a;){var o=Ze(1-(Jn(e.opacity[r],1)+n)),i=Ps(e.color[r],o),l=parseFloat(e.offset[r])/100;ea(l,[0,1])&&t.addColorStop(l,i)}};Hr.canvas_gradients=Vx;var Gx=function(){},Xx=L(),Zx=L();function qx(t,e,n){var a=e.repeatMode||"repeat",r=function(e,n){var r=function(t,e){var n=0,a=0,r=t.naturalWidth,o=t.naturalHeight,i=Jn(e.width,50),l=Jn(e.height,50);if("no-repeat"===e.repeatMode){var s;if(o>r)n=(s=i-i*(r/o))/2,i-=s;else a=(s=l-l*(o/r))/2,l-=s}return{x:n,y:a,width:i,height:l}}(e,n),o=function(e){return"".concat(t,"-").concat(a,"-").concat(~~e.x,"-").concat(~~e.y,"-").concat(~~e.width,"-").concat(~~e.height)}(r),i=Xx.get(o);return na(i)||(i=function(t,e,n){var r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(t,0,0,r.width,r.height),n.context.createPattern(r,a)}(e,r,n),Xx.set(o,i)),{pattern:i,dimension:r}},o=Zx.get(t);if(na(o)){var i=r(o,e),l=i.pattern,s=i.dimension;n(e.context,l,s)}else{var c=new Image;c.onload=function(){Zx.has(t)||Zx.set(t,c);var a=r(c,e),o=a.pattern,i=a.dimension;n(e.context,o,i)},c.src=t}}function $x(t,e){var n=e.systemConf;return+Dn.getVal(Kn([t,n.chart.plot.datalabels,n.chart,n.canvas],"fontSize"))}function Qx(t,e){var n=e.systemConf;return Dn.getVal(Kn([t,n.chart,n.canvas,wr],"fontFamily"))}function Kx(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datalabels",r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=t.seriesdata[o]&&t.seriesdata[o].yaxiscolumnorder||[0,0],c=Ui(t,l,o),u=pi.helpers,d=t.dataObject,h=t.systemConf.metadata.columns,f=t.isGeoMap;e=e||{stacked:!1,commonPlotOptions:t.systemConf.chart.plot.plotoptions[c.name],yaxiscolumnorder:u.getParsedYAxisOrder(s)};var p,g,v,m,y=t.dataset,b=e.yaxiscolumnorder,x=e.stacked,C=e.yscale,k=Pl(c.value),w=Jn(e.commonPlotOptions.dataindex,3),_=Yv({paneid:l},t,0),S=t.renderer[_]&&t.renderer[_].getProcessedNode,O=t.systemConf.metadata.axes.label,A=O&&O[0],T=a===zo&&na(A),P=a==jo,E=T?h[A]?"{{val(".concat(A,")}}"):A.toString():n.showAs,L=-1!=[xd,Cd,kd,Ad,Td,Pd,wd].indexOf(E),M=-1!=[Ad,Td,Pd].indexOf(E),D="function"==typeof E||"function"==typeof window[E];if(t.renderVisiblePointsOnly&&!t.isGeoMap&&(C=tc(t,"y",b).baseScale||C),L||D||(m=co(E)),!T){var I=T?"label":E==xd?xd:E==kd&&na(y.zidx)?kd:f?wd:Cd;if(p=h[y.getColumnIdx(I,s)].datatype,g=y.getColumn(I,s)[p],v=M?Xo:Wo,k&&!D&&M){var R=h.filter((function(t){return t.dataindex===w}))[0];R=na(R)?R:y.getColumnIdx(I,s),p=R.datatype,g=R[p]}}var z=c.name===ji,j=function e(n){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=arguments.length>2?arguments[2]:void 0,_=P?n[1]:n,O=d.isHierarchy&&S&&S(_);if(z&&"node"==_._type&&!T){p=h[y.getColumnIdx(_._format||"x",s)].datatype,g=y.getColumn(_._format||"x",s)[p];var A=fa(g,"format.customFormat");if(A)return y.getX(_)}if(L){var M=pn;switch(E){case Ad:case Td:case Pd:var I=r,R=P?_:x||d.isPercentChart?_.y:k?_[w]:O&&O.children&&O.value||_.value||y.getY(_,b,i);if(x&&!d.isPercentChart&&a==zo)I=Nv(t,o,_,E);else if("function"==typeof r)I=r(_,E);else if(!na(I))if(E!==Pd&&C)I=(C.originalDomain||C.domain())[1];else{var j=d.ZC_BAR_getRangeY(b);I=R<0&&R>=j[0]?-j[0]:j[1]}M=R/I*100||0;break;case xd:M=O&&O.children?Oe:y.getActualX(_);break;case kd:na(y.zidx)&&(M=y.getZ(_));break;case wd:M=y.getGeo(_);break;default:M=P?_:d.isHierarchy?O&&O.children&&O.value||_.value||y.getY(_,b):y.getY(_,b,i)}return v(g,M,p,t,a)}if(D){var F=t.cache.coordinates=t.cache.coordinates||{},B=F[_._key]={};try{var H=t.renderer[_.seriesIndex||0].commonOption;B.x=t.dataObject.getTransRectValue("x",_,_.subSeriesIndex,0,H),B.y=t.dataObject.getTransRectValue("y",_,_.subSeriesIndex,0,H),B.width=t.dataObject.getTransRectValue("width",_,_.subSeriesIndex,0,H),B.height=t.dataObject.getTransRectValue("height",_,_.subSeriesIndex,0,H)}catch(t){}return $n(E,n,f,t,{coordinate:B})}var N=Zi(c.name,t),W=P?pn:Fs(t,N?u:o,_,o,l);return y.getCustomizedVal(t,m,o,pn,pn,_,a,W,"html"!==e.contentType,pn,i)};return j.contentType=L||!D&&!ua(E)&&-1==E.indexOf("<tspan")?"text":"html",j.multiLine="html"===j.contentType&&!D&&ua(E)&&E.length>1,j.hasShowAsFunction=D,j}function Jx(t,e,n,a,r){var o,i=n,s=a,c=function(t){var e=t.selectAll("tspan.zcTspan").nodes();return Array.prototype.filter.call(e,yo)}(t),u=1.1*(c.length-1);return c.length?e.showAs.length!==c.length&&(l(c[0]).attr("dy",null),s=t.html()):r=!1,-.3===i?o=(i-=u)+u:.3===i&&(o=(i-=u/2)+u/2),[i,o,s,r]}function tC(t,e,n,a,r,o,i,l,s){var c=l.enabled,u=l.width,d=l.height,h=pc(t,e,n+2*o,a+2*o,r);if(c&&i){var f=i===Kr?7:i===Jr?3:i===Qr?5:1,p=bc(h),g=function(n,a,r){var o=a[r-1].moves[r-1?5:0],i=a[r].moves[0],l=a[r-1].moves[r-1?6:1],c=a[r].moves[1],h=(o+i)/2,f=(l+c)/2;if(e=a[r].moves[1],t=a[r].moves[0],na(s)&&s){var p=s>0?1:-1,g=n===Kr?o-i:i-o;h-=(g-u)/2-s*p>0?s:(g-u)/2*p}switch(n){case Kr:return[[h-u/2,e],[h,e+d],[h+u/2,e]];case Jr:return[[h+u/2,e],[h,e-d],[h-u/2,e]];case $r:return[[t,f-u/2],[t-d,f],[t,f+u/2]];case Qr:return[[t,f+u/2],[t+d,f],[t,f-u/2]]}}(i,p,f);!function(t,e,n){n.forEach((function(n){t.splice(e,0,{function:"l",moves:n})}))}(p,f,g),h=p.reduce((function(t,e){return t+e.function.toUpperCase()+(e.moves&&e.moves.join(" ")||"")}),"")}return h}Gx.canvasPatternFill=function(t,e,n){var a,r;return r=document.createElement("canvas").getContext("2d"),a=t.ele?function(t,e){var n=Hr.get(Hr.svg_patterns,"svgPatternFill",t,{returnSVGimage:!0,base64:!0});qx(n.url,n)}(t):function(t,e){var n="zp".concat(jn(t,"canvasFill")),a=Xx.get(n);if(!na(a)){var r=document.createElement("canvas"),o=t.bgClr||t.bgClr_base,i=t.stroke||t.stroke_base,l=/\{\{([a-z]+)\}\}/,s=t.type.split(","),c=s.length,u="function"==typeof t.size,d=t.translate&&"function"==typeof t.translate,h=u?t.size(t.width):(t.size||"").split(","),f=t.strokeWidth.split(","),p=o.split(","),g=i.split(","),v=(t.fillOpacity||"").split(","),m=((t.strokeOpacity||"").split(","),d?t.translate(t.width):t.translate?/\[.*?\]/g.test(t.translate)?JSON.parse(t.translate):t.translate.split(","):null);h=t.width&&!u?Wr(t,h):h,r.width=h[0],r.height=h[0];for(var y=r.getContext("2d"),b=0;b<c;b++){var x=ra(g[b]||g[0])?t.stroke_base:"static"==(g[b]||g[0])?t.customStaticClr:g[b]||g[0],C=ra(p[b]||p[0])?t.bgClr_base:"static"==(p[b]||p[0])?t.customStaticClr:p[b]||p[0],k=(h[b]||h[0])/2,w=[k,k];if(x=l.test(x)?Es(t.stroke_base,1,x.replace(l,"$1"),T):x,C=l.test(C)?Es(t.bgClr_base,1,C.replace(l,"$1"),T):C,m){var _=m[b]||m[0];if(ua(_))w=[k+parseFloat(_[0]),k+parseFloat(_[1])];else{var S=k+parseFloat(_);w=[S,S]}}if(y.save(),y.translate(w[0],w[1]),y.beginPath(),y.lineWidth=f[b]||f[0],y.fillStyle=Ps(C,v[b]||v[0]),y.strokeStyle=x,"circle"===s[b])y.arc(0,0,h[b]/2,0,2*on,!1);else{var O=np(s[b])(h[b]||h[0]);Cp.drawPath(y,O)}y.fill(),y.stroke(),y.closePath(),y.restore()}Xx.set(n,r),a=r}return a}(t),r.createPattern(a,"repeat")},Gx.imageFill=function(t,e){qx(t.name,t,e)},Hr.canvas_patterns=Gx,wn.setComponent("patterns.canvas",Gx),wn.setComponent("dataLabel.getContent",Kx),Nu("bar",(function(){var t,e,n,a,r=pi.helpers;function o(o,i){o.each((function(){var o,l=e[0],s=e[1],c=e[2]||zo,d=e[3],h=e[4],f=wa(i.rendererIndex,s),p=i.paneid,g=t.commonRendererProp().params,v=na(h)?g.chartObj.systemConf.metadata.columns[h].dataindex:null,m=l.plotoptions,y=g.chartObj,b=y.systemConf,x=g.commonPlotOptions,C=g.dataset,k=g.stacked,w=g.yscale,_=g.yaxiscolumnorder,S=qd(g,p),O=c===jo,A=Ui(y,p,s),T=A.name==zi||A.name==Fi,P=T&&na(d),E="canvas"===y.plot.renderer.mode,L=g.axisrotated,D=!0,I=y.systemConf.chart.plot.datalabels.renderOnInit,R=y.dataObject.isCombinationalChart;if(!I){var z=y.behaviouralEvents.eventManager.behaviours;(z.PLOT_ZOOM||z.CHART_SCROLL&&!L)&&(D=!1)}o=Hd(x,O?pn:m,y,s,p),O&&(o=o.stackLabels);var j=O?Gd(o,y):Ud(o,y);if(!l.disabled&&j&&(O||!Gs(y,p,s))){var F=os(y),B=o.textOverlap,H=Jd(y,s,c),N=o.showZeros,W=Ns(x,y),V=F.left,Y=F.top,U=F.right,G=F.bottom,X=y.svg.node().getBoundingClientRect(),Z=X.left+y.plotarea.left,q=X.top+y.plotarea.top,$=.75*(L?y.plotarea.width:y.plotarea.height),Q=Kx(y,g,o,c,pn,s,d,p),K=Q.contentType||"text",J="html"===K&&Q.multiLine,tt=H===to,et=r.isCatNull(C,"x"),nt=r.isCatNull(C,"y",_),at=b.chart.axes.yaxis[_||0].reversed,rt=y.barscale2.bandwidth()||0,ot=$x(o,y),it=y.dataset.getDataType("y",_),lt=0,st=0,ct=0,ut=0,dt=0;if(Dd(o,y)){var ht=Md(o,y),ft=jd(ht.hook);lt=Id(o,y),st=Rd(o,y),ct=k||H===io?0:ft.height,ut=ft.width,dt=ht.radius}var pt="clip"===B,gt=b.chart.plot.datalabels.handleOverlapping&&B!==dn,vt=Ge(0,Jn(o.padding,2))+lt+ct+(tt&&st?st/2-1:0),mt=tt&&function(){if(it===To){var t=w.domain();return w(t[t.length-1])+w.bandwidth()/2}var e=y.cache.correction||{},n=[0],a=L?at?1:-1:at?-1:1;for(var r in e)r.indexOf("label-y")>-1&&n.push(u(e[r]));return w(w.domain()[1])+u(n)*a}();vt=vt>$?$:vt,n=!(n=o.textDirection)||k&&!O?L?eo:no:n,a=L?n==no?90:0:n==no?0:270;var yt=t.commonOption,bt=function(){return y.dataObject.getTransRectValue.apply(y.dataObject,Zn(arguments))},xt=dc(y.staticPaneSVG.select(".labelholder"),gr,[1],".","class","temp_label"),Ct=i.update,kt=i.add;if(y.viewFlow&&y.viewFlow.marks._default.label.length){var wt=y.viewFlow.marks._default.label[s];l=wt.data}l.data.forEach((function(e,r){var i=t.seriesdataAfterUpdate&&!O?t.seriesdataAfterUpdate[r]:l.data[r];if(O){var c=b.chart.scroll;c&&c.enabled&&(i=function(t,e){return t.filter((function(t){var n=t[0];return e.indexOf(n)>-1}))}(i,g.xscale.domain())),tt&&w.domain()[0]<0&&(i=function(t){var e=M();return t.filter((function(t){var n=t[0];return!e.has(n)&&(e.add(n),!0)}))}(i))}var u=[];Nd(xt,o,y,g.color,!1,s),xt.style("opacity",0),i.forEach((function(t,e){var i,l,c,h,p,m,b,x=pn,M=!0,I=at?-1:1,z=O?t[1]<0:C.getY(t,_)<0;xt[K]((function(){if(O){var n=t[1];t[0];i=N||0!=n?Q(t,e):pn}else i=et(C.getX(t))||nt(C.getY(t,_))||!N&&0==C.getY(t,_)?pn:Q(t,e);return i})),J&&ho(xt,0),x=Bn(xt.node());var j=0,F=0;if(O){var W=yt.bandwidth1(t[0])+yt.bandwidth2(yt.stackGroupIndex),X=w(t[2]||t[1]);l=L?X:W,c=L?W:X,L?n==no?(l+=(z?-vt:vt)*I,h=at?z?"-0.3em":"1em":z?"1em":"-0.3em"):(c+=rt/2,h="0.3em",tt?(l=mt+vt*I+0*I,p=at?"end":pn):(l+=(z?-vt:vt)*I,p=at?z?pn:"end":z?"end":pn,J&&(l+=x.width/2*(z?-1:1)*I))):(l+=rt/2,c+=(z?vt:-vt)*I,n==eo?(h="0.3em",p=at?z?pn:"end":z?"end":pn):(p="middle",tt?(c=mt-vt*I,h=at?"1em":"-0.3em"):h=at?z?"-0.3em":"1em":z?"1em":"-0.3em"))}else{var $=x,it=(W=na(v)&&L?g.yscale(t[v][d]||t[v]):bt("x",t,r,e,yt,null,d)||0,X=na(v)&&!L?g.yscale(t[v][d]||t[v]):bt("y",t,r,e,yt,null,d)||0,bt("width",t,r,e,yt)||0),ht=bt("height",t,r,e,yt)||0,ft=pt;l=W,c=X;var kt=P&&na(v)?t[v][0]>t[v][1]:null,wt=!!kt,_t=(at&&L?!wt:wt)?1-d:d,St=at?kt?d:1-d:kt?1-d:d;I=T&&P?at&&!L?-1:1:I;if(L)k?(c+=ht/2,h="0.3em",H==io?(l+=it/2*I,p="middle"):H==Jr?(l+=(z?vt:it-vt)*I,p=at?z?"end":pn:z?pn:"end",J&&!tt&&(l+=$.width/2*(z?1:-1)*I)):(l+=(z?it-vt:vt)*I,p=at?z?pn:"end":z?"end":pn,J&&!tt&&(l+=$.width/2*(z?-1:1)*I))):n==eo?(c+=ht/2+(F=zd(x.height,lt,dt,ut))/2,h="0.3em",ft=ft&&H!=Jr&&$.width>it,m=at?z?$r:Qr:z?Qr:$r,tt?(p=at?"end":pn,l=mt+vt*I+0*I,m=at?Qr:$r):ft?H==Kr?l+=at?z?-it+vt:-it:z?0:vt:H==io&&(l+=at?-it+lt:lt):(p=at?z?pn:"end":z?"end":pn,H==io?(l+=($.width>it?z?it:0:it/2)*I,p=$.width>it?p:"middle"):H==Jr?T?P?(l+=(0==_t?-vt:vt)*I,p=0==_t?"end":pn,m=0==St?Qr:$r):(p="middle",m=pn):l+=(z?-vt:it+vt)*I:l+=(z?it-vt:vt)*I,!J||H===io&&$.width<=it||(l+=(z?-x.width/2:x.width/2)*I))):(j=zd(x.width,lt,dt,ut),h=at?z?"-0.3em":"1em":z?"1em":"-0.3em",ft=ft&&$.width>ht,m=at?z?Kr:Jr:z?Jr:Kr,H==io?($.height>it?J?(l+=(at?z?it:0:z?0:it)*I,l+=at?$.height/2*(z?1:-1):0):l+=(at?z?0:it:z?it:0)*I:l+=it/2*I,h=$.height>it?h:"0.3em"):H==Jr?T?P?(l+=(0==_t?-vt:vt)*I,p=0==_t?"end":pn,m=0==St?Qr:$r,h=0==St?"1em":"-0.3em"):(p="middle",m=pn):l+=(z?-vt:it+vt)*I:l+=(z?it-vt:vt)*I,ft?(l+=j/2,c+=lt):(c+=ht/2,p="middle",H==io&&(h="0.3em")));else if(k)l+=it/2,p="middle",H==io?(c+=ht/2*I,h="0.3em"):H==Jr?(c+=(z?ht-vt:vt)*I,h=at?z?"1em":"-0.3em":z?"-0.3em":"1em"):(c+=(z?vt:ht-vt)*I,h=at?z?"-0.3em":"1em":z?"1em":"-0.3em");else if(n==eo){F=zd(x.height,lt,dt,ut);var Ot=!at&&z||at&&!z?$.width:0;ft=ft&&H!=Jr&&$.width+vt>ht,h="0.3em",m=at?z?$r:Qr:z?Qr:$r,ft?(l+=it/2,c+=H==io?at?lt:ht-lt:at?z?-vt:0:ht+(z?0:-vt)):(l+=it/2,H==io?($.width>ht?c+=J?(z?x.width/2:ht-x.width/2)*I:(z?0:ht)*I+Ot:c+=ht/2*I,p=$.width>ht?pn:"middle"):H==Jr?(c+=(z?ht+vt:-vt)*I+Ot,J&&(c-=x.width/2)):(c+=(z?vt:ht-vt)*I+Ot,J&&(c-=x.width/2)))}else j=zd(x.width,lt,dt,ut),ft=ft&&$.width+2*lt>it,h=at?z||0==_t?"-0.3em":"1em":z||0==_t?"1em":"-0.3em",m=at?z?Kr:Jr:z?Jr:Kr,tt?(c=mt-vt*I,m=at?Jr:Kr,h=at?"1em":"-0.3em"):H==io?(c+=($.height<ht?ht/2:z?0:ht)*I,h=$.height<ht?"0.3em":h):H==Jr?(c+=(z&&!P?ht+vt:0==_t?vt:-vt)*I,m=T?P?0==St?Jr:Kr:pn:m):c+=(z?vt:ht-vt)*I,ft?l+=lt:(l+=it/2,p="middle")}if(J){var At=Jx(xt,o,parseFloat(h),i,M);h="".concat(At[0],"em"),b=At[1],i=At[2],M=At[3],ft||tt||(p="middle")}xt.attrs({x:l,y:c,dy:h,"text-anchor":p,transform:"rotate(".concat(a," ").concat(l," ").concat(c,")")});var Tt=xt.node().childNodes;if(K=Tt.length?Tt[0].childNodes.length?Tt[0].childNodes[0].childNodes.length?K:function(t){var e="<tspan>".concat(t.node().innerHTML,"</tspan>");return t.node().innerHTML=e,"html"}(xt):"text":K,(tt||O)&&!1!==M){var Pt=Xa(na(o.maxWidth)?o.maxWidth:"30%",y.plotarea.width);if("html"===K){ho(xt,l);var Et={left:(Mt=Bn(xt.node())).x,top:Mt.y,right:Mt.x+Pt,bottom:Mt.y+Mt.height},Lt=(Mt.width,go(xt,ot));fo(xt,y,[0,0],0,Et,Lt),i=xt.html()}else{var Mt;Et={left:(Mt=Bn(xt.node())).x,top:Mt.y,right:Mt.x+Pt,bottom:Mt.y+Mt.height};Xd(xt,y,[0,0],0,Et),i=xt.text()}}var Dt=0,It=0,Rt=0,zt=0;if(m=H===io?pn:m,L?zt=(n===no?j:F)/2:Rt=(n===no?j:F)/2,!pt){J&&ho(xt,l);var jt=lt+st/2,Ft=($=xt.node().getBoundingClientRect()).left-Z-jt-Rt-0,Bt=Ft+$.width+2*jt+2*Rt,Ht=$.top-q-jt-zt-0,Nt=Ht+$.height+2*jt+2*zt;if(D){var Wt=l+(Ft<V?V-Ft:Bt>U?-(Bt-U):0);Wt==l||tt&&L||(Dt=Wt-l,l=Wt);var Vt=c+(Ht<Y?Y-Ht:Nt>G?-(Nt-G):0);Vt==c||tt&&!L||(It=Vt-c,c=Vt)}}var Yt=Rs(C.getClr(t),y);if(M=M&&(O||Yt),gt)if(k&&!O){xt.attrs({x:l,y:c}),J&&ho(xt,l),x=Bn(xt.node());W=bt("x",t,r,e,yt)||0,X=bt("y",t,r,e,yt)||0,ht=bt("height",t,r,e,yt)||0,it=bt("width",t,r,e,yt)||0;if(at&&(L?W-=it:X-=ht),Yd({x1:x.x-lt,y1:x.y-lt,x2:x.x+x.width+lt,y2:x.y+x.height+lt},{x1:W,y1:X,x2:W+it,y2:X+ht})){if(A.name===mi||R){var Ut=($=xt.node().getBoundingClientRect()).left-Z,Gt=$.top-q,Xt={id:"lbl".concat(f,"_").concat(r,"_").concat(e,"_").concat(s,"_").concat(d),translateFunction:Ct,isStackedLabels:O,x1:Ut-lt+Dt-Rt,y1:Gt-lt+It-zt,x2:Ut+$.width+lt+Dt+(a?ct+2*st:0)+Rt,y2:Gt+$.height+lt+It+(a?0:ct+2*st)+zt,overlap:tt&&"hidden"!==B&&B!==dn?"hidden":B};S.push(Xt)}}else M=!1}else if(!pt||O){J&&ho(xt,l);Ut=($=xt.node().getBoundingClientRect()).left-Z,Gt=$.top-q,Xt={id:"lbl".concat(f,"_").concat(r,"_").concat(e,"_").concat(s,"_").concat(d),translateFunction:Ct,isStackedLabels:O,x1:Ut-lt+Dt-Rt,y1:Gt-lt+It-zt,x2:Ut+$.width+lt+Dt+(a?ct+2*st:0)+Rt,y2:Gt+$.height+lt+It+(a?0:ct+2*st)+zt,overlap:tt&&"hidden"!==B&&B!==dn?"hidden":B};S.push(Xt)}else{if(n!=no){var Zt=bt(L?"width":"height",t,r,e,yt)||0;it=H==Jr?x.width:Zt-(H==Kr?vt+lt:2*lt)}else it=rt-2*lt;x.width=Xe(it,x.width)}var qt={X:l,Y:c,DY:h,ANCHOR:p,text:i,display:M,height:x.height+F,width:x.width+j,hookPosition:m,adjustVal:n===no?L?It:Dt:pn};void 0!==b&&(qt.actualDY=b),E&&"html"===K&&(qt.tspanInfo=go(xt,ot)),u.push(qt)})),u.dataUpdate=i,kt(u,s,r,d,O?jo:pn,f).properties={type:vi,dataLabels:o,rotation:a,color:g.color,dataUpdate:i,showlabel:j,multiColoring:W,textDirection:n,rangeChart:P,yrangePos:d,rp:g,contentType:K,isMultiLine:J,chartType:A.value}}))}}))}return o.renderer=function(e){return arguments.length?(t=e,o):t},o.args=function(t){return arguments.length?(e=t,o):e},o})),De.canvas=function(){var t;function e(e,n,a,r){e.each((function(){var e=n;wa(r,n);if(t){var a=t.properties,o=a.rp.chartObj,i=o.labelHolderContext;if(!na(i))return!1;if(Dd(a.dataLabels,o)){var l=Md(a.dataLabels,o),s=jd(l.hook),c=a.dataUpdate,u=a.rotation||0,d=Id(a.dataLabels,o),h=Ia(l.radius),f=na(l.strokeWidth)?+l.strokeWidth:1,p=Gr(l.dashStyle,f),g=Xr(l.lineCap,l.dashStyle),v=m();t.forEach((function(t){t.forEach((function(t,n){if(Fd(t)){var r=t.xy||[t.X,t.Y],m=r[0],y=r[1],b=void 0!==t.actualDY?t.actualDY:parseFloat(t.DY)||0,x=t.height,C=t.width,k=Ld(l.strokeColor,0,o,c,e);k=$n(k,c&&c[n],Bd(n,e,a),o);var w=Ld(l.fillColor,0,o,c,e);if(w=$n(w,c&&c[n],Bd(n,e,a),o),i.save(),na(u)&&0!==u){var _=0,S=0;o.axes.rotated?_=-1*b*x:(S=("middle"===t.ANCHOR?C/2:"end"===t.ANCHOR?-C:0)+d,_=-v.domain([-.3,.9]).range([x,0])(b)-d),i.translate(m+_,y+S),i.rotate(Cp.getRadianAngle(u))}else m=("middle"===t.ANCHOR?m-C/2:"end"===t.ANCHOR?m-C:m)-d,y=y-v.domain([-.3,1]).range([x,0])(b)-d,i.translate(m,y);i.fillStyle=Ps(w,l.fillOpacity),i.strokeStyle=Ps(k,l.strokeOpacity),i.lineWidth=f,p&&na(i.setLineDash)&&(i.setLineDash(p),i.lineCap=g),i.beginPath(),i.translate(-m,-y),Cp.boundBoxWithHook(i,tC(m,y,C,x,h,d,t.hookPosition,s,t.adjustVal)),i.fill(),i.stroke(),i.closePath(),i.restore()}}))}))}}}))}return e.args=function(n){return arguments.length?(t=n,e):t},e},Nu("boundBox-canvas",De.canvas),Le.canvasUtils=function(){},Le.canvasUtils.align=function(t){switch(t.toLocaleLowerCase()){case"start":return $r;case"middle":return qr;case"end":return Qr}},Le.canvasUtils.parseTextShadow=function(t){if(t=t&&t.trim())return t.split(/\s+/).map((function(t){var e=la(t);return isNaN(e)?t:e}))},Le.canvasUtils.addTextShadow=function(t,e){na(e)&&(t.shadowOffsetX=e[0],t.shadowOffsetY=e[1],t.shadowBlur=e[2],t.shadowColor=e[3])},Le.canvasUtils.createText=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=n.text,o=n.font,i=n.fill,l=n.stroke,s=n.textShadow,c=Cp.rgba(i||e.color,Jn(e&&e["fill-opacity"],1)),u=l||e.stroke;r=wa(r,""),a=a||[0,0],t.font=o,t.fillStyle=c,e["stroke-width"]>0&&("contrast"===e.stroke&&(u=ma(c)),t.strokeStyle=u,t.lineWidth=e["stroke-width"],t.strokeText(r,a[0],a[1])),Le.canvasUtils.addTextShadow(t,s),t.fillText(r,a[0],a[1])};var eC=Le.canvasUtils;Nu("canvas",(function(t,e,n,a,r){if(e){var o="stacklabel"===(a=a||"label"),i=a===Fo||a===Bo,s=e.properties,c=Ao(t)?s.rp.legendOrderIndex:n,u=s.rotation,d=s.dataLabels,h=na(n)?t.renderer[n]:null,f=Bi.isQuantileColorScale(t),p=s.chartType,g=Xi(t,p,"polarAxis"),v=Xi(t,p,"hierarchy"),m=Xi(t,p,"nonAxisMultiSeries"),y=Xi(t,p,"axis"),b=p==Gt.treemap,x=Cp.getFontStyles(t,s.dataLabels,s.color,null,n,o),C=parseFloat(x["font-size"]),k=eC,w=t.labelHolderContext,_=pu(x),S=k.parseTextShadow(x["text-shadow"]);e.forEach((function(e,a){var r=h&&h.seriesdataAfterUpdate?h.seriesdataAfterUpdate[a]:null;e.forEach((function(e,a){w.save();var o,h,p,O,A=e.xy||[e.X,e.Y],T=e.display,E=pn,L=pn;if(f||s.rp.threshold||v||!(y||g||m)||s.multiColoring){var M=b&&i?s.dataUpdate[a]:r&&r[a],D=Fs(t,s.multiColoring?a:n,M&&M.data?M.data:M,c),I=s.dataUpdate||r,R=I&&I[a],z=((R&&R.data?R.data:R)||[]).paneid;b&&i&&/(top-outset|bottom-outset)/.test(d.position)&&P(D).opacity<.1&&(D="white");var j=function(e){return Vd(t.systemConf,D,d,t,void 0,void 0,void 0,e,z)};E=j("fontColor"),L=j("strokeColor")}if(!0===T){if(o=A[0],h=A[1],p=e.customHTML?0:parseFloat(e.DY||0),O=e.height,p=(e.tspanInfo||1===p?C:O)*p,na(u)&&0!==u?(t.axes.rotated&&(p*=-1),w.translate(o+p,h),w.rotate(Cp.getRadianAngle(u))):w.translate(o,h+p),na(e.ANCHOR)&&(w.textAlign=k.align(e.ANCHOR)),e.customHTML)e.customHTML.forEach((function(n){!function(t,e,n,a,r,o,i,s,c){var u=eC,d=n.xy||[n.X,n.Y],h=a.bb,f=a.node;switch(a.nodeName){case"image":var p=+(x=l(f)).attr("x")||0,g=+x.attr("y")||0,v=+x.attr("width")||0,m=+x.attr("height")||0,y=x.attr("href")||x.attr("xlink:href"),b=new Image;b.onload=function(){e.drawImage(b,d[0]+p,d[1]+g,v,m)},b.src=y;break;case"rect":p=+(x=l(f)).attr("x")||0,g=+x.attr("y")||0,v=+x.attr("width")||0,m=+x.attr("height")||0;var x,C=+x.attr("rx")||0;e.fillStyle=x.style("fill"),e.strokeStyle=x.style("stroke"),e.lineWidth=x.style("stroke-width"),e.beginPath(),Cp.roundedRect(e,p,g,v,m,t.dataObject.getTransRectValue("radius",pn,pn,pn,pn,C)),e.fill(),e.stroke(),e.closePath();break;case"text":case"tspan":var k,w,_,S=f.style;S&&(k=pu(r,S),w=S.fill,_=S.stroke);var O={text:f.textContent,font:k||o,fill:w||s||r.color,stroke:_||c,textShadow:i};e.translate(h.x,h.y+.77*h.height),e.textAlign=u.align("start"),u.createText(e,r,O),e.translate(-h.x,-h.y-.77*h.height)}}(t,w,e,n,x,_,S,E,L)}));else if(e.tspanInfo)e.tspanInfo.forEach((function(t){var e,n,a,r,o=t.style;o&&(e=pu(x,o),n=parseFloat(o["font-size"]),a=o.fill,r=o.stroke);var i=[t.dx||0,(n||C)*t.dy],l={text:t.text,font:e||_,fill:a||E||x.color,stroke:r||L,textShadow:S};k.createText(w,x,l,i)}));else{var F={text:e.text,font:_,fill:E||x.color,stroke:L,textShadow:S};k.createText(w,x,F)}w.restore()}}))}))}}));var nC={};nC.getTileBound=function(t,e){var n=t.xScale,a=t.yScale,r=e.x0||0,o=e.x1||0,i=e.y0||0,l=e.y1||0;return{x:n(r),y:a(i),width:n(o)-n(r),height:a(l)-a(i)}},nC.getLevel=function(t){return t.level||t.data&&t.data.level},nC.getSeriesIndex=function(t){var e=nC.getLevel(t);if(e)return+e.split("_")[0]},nC.getItemIndex=function(t){var e=nC.getLevel(t);if(e){var n=e.split("_");return+n[n.length-1]}},nC.getParentColor=function(t,e,n){var a=t.params,r=a.chartObj,o=a.commonPlotOptions.parent.fillColor,i=hn;if(e.depth){var l=nC.getSeriesIndex(e),s=Fs(r,l,e,l,n);i="{{clr-tint}}"===o?Es(s,.5,"brighter",T):"{{clr-shade}}"===o?Es(s,.5,"darker",T):"{{clr}}"===o?s:o||Ts(s,1e-4)}return i},nC.isDisabled=function(t,e){return na(nC.getSeriesIndex(e))&&t.disabled},Nu("hierarchy",(function(){var t,e;function n(n,a){n.each((function(){var n,r=e[0],o=e[1],i=(e[2],e[3]),l=e[4],s=e[5],c=e[6]||[0,0],u=e[7],d=e[8],h=r.plotoptions,f=a.paneid,p=t.commonRendererProp().params,g=p.chartObj,v=g.systemConf,y=p.commonPlotOptions,b=p.dataset,x=p.yaxiscolumnorder,C=qd(p,f),k=p.xscale,w=p.yscale,_=p.rendererIndex,S=void 0===_?o:_,O=Ud(n=Hd(y,h,g,o),g),A=Ui(g,f,0),T=A.value,P=A.name,E=P===ji,L=E&&"inside"===n.labelPos,M=Xa(na(n.maxWidth)?n.maxWidth:"30%",g.plotarea.width);if(u){var D=Rn(y.parent.datalabels,n);O=oa(D.show),n=D}if(!r.disabled&&O&&!Gs(g,f,o)){os(g);var I=0,R=0;if(Dd(n,g)){var z=Md(n,g),j=jd(z.hook);I=Id(n,g),Rd(n,g),R=j.height,j.width,z.radius}var F=n.textOverlap,B=n.hAlign||qr,H=n.vAlign||qr,N=Jn(n.padding,.5),W=!0===v.chart.plot.datalabels.handleOverlapping&&F!==dn,V=Kx(g,p,n,zo,l,o,i,f),Y=V.contentType||"text",U="html"===Y&&V.multiLine,G=V.hasShowAsFunction,X=Ns(y,g),Z=$x(n,g),q=m().domain([-.3,.9]),$="canvas"===g.plot.renderer.mode,Q=function(){var t;t=H===qr?.3:H===Kr?-.3:1;return t}(),K=Nd(null,n,g,p.color,!1,o);F=G&&"ellipsis"===F?"hidden":F;var J=dc(g.staticPaneSVG.select(".labelholder"),G?"g":"text",[1],".","class","temp_label"),tt=a.update,et=a.add,nt=s,at=[];Nd(J,n,g,p.color,!1,o),J.style("opacity",0),nt.forEach((function(e,a){var r,i,l,s=function(e){if(E)return t.getLabelAnchor(e);return B===qr?"middle":B===Qr?"end":null}(e),h=function(t,e){var n=rt(t),a=n.x,r=n.y,o=n.width,i=n.height;return a=function(t,e,n,a){t+=B===qr?e/2:B===Qr?e-N-I:N+I;return t}(a,o)+c[0],r=function(t,e){t+=H===qr?e/2:H===Kr?e-N-I:N+I;return t}(r,i)+c[1],{x:a,y:r,w:o,h:i}}(e),f=h.x,p=h.y,v=null,m=null,y=!Bi.isQuantileColorScale(g)||(!!u||Rs(b.getClr(e.data||e),g)),x=null;if(E&&(s===oo?x=$r:s===lo&&(x=Qr)),J[Y]((function(){return v=V(e.data||e,a,h)})),U){var k=Jx(J,n,Q,v,y);r="".concat(k[0],"em"),i=k[1],v=k[2],y=k[3]}else r="".concat(Q,"em");if(J.attrs({dy:r,transform:"translate(".concat([f,p],")"),"text-anchor":s,display:y}),"html"===Y){if(U&&ho(J,0),B!==qr&&!G){J.attr("text-anchor",lo);var w=(l=Bn(J)).width+l.x;J.attr("text-anchor",oo),f+=((l=Bn(J)).x-w)*(B===Qr?1:-1),J.attr("transform","translate(".concat([f,p],")")).attr("text-anchor",s)}l=Bn(J)}else l=function(t,e,n,a,r){var o=t.width,i=t.height,l="middle"===e?o/2:"end"===e?o:0,s=q.range([i,0])(parseFloat(n));return t.x=-l,t.y=-s,t}(l=Rr(v,Z,Qx(n,g),null,null,K["font-style"],K["font-weight"]),s,r);var _,S,O=l.width+0,A=l.height;l.x;if(W){var T={x1:l.x+f-I,y1:l.y+p-I,x2:l.x+f+l.width+I,y2:l.y+p+l.height+I},M=function(t,e,n){var a=t.height-2*N,r=t.width-2*N,o=t.x+c[0]+N,i=t.y+c[1]+N,l={x1:o,y1:i,x2:o+r,y2:i+a};P===ji&&(l.y1=n.y1-2,l.y2=n.y2+2,l.x2+=2);if(P===Ii){var s=r/2,u=Xe(e.height/2,s),d=s-$e(qe(s,2)-qe(u,2));l.x1+=d,l.x2-=d,l.y1+=d,l.y2-=d}return l}(rt(e,l),l,T);if(E&&(h.w=M.x2-M.x1,h.h=M.y2-M.y1),!Yd(T,M)){var D;if("ellipsis"===F){var z=h.h,j=h.w;if(A+2*I<z){var X={left:M.x1+I,top:M.y1+I,right:M.x2-I,bottom:M.y2-I};"html"===Y?(m=go(J,Z),fo(J,g,c,0,X,m,pn,[f,p])):Xd(J,g,c,0,X,[f,p]);var et=J.text();if(et&&".."!==et&&(v=J[Y](),D=!0,O=j-2*I,U)){var nt=Bn(J);A=nt.height,O=nt.width+0,p+=(l.height-nt.height)/2}}}D?"html"===Y&&(m=go(J,Z)):y=!1}if(P===ji&&!L){T.x1=Ge(M.x1,T.x1),T.x2=Xe(M.x2,T.x2);var ot={id:"lbl".concat(o,"_",0,"_").concat(a),x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2,translateFunction:tt,overlap:"hidden",hookHeight:R,hookPosition:x},it=os(g),lt=it.left,st=it.top,ct=it.right,ut=it.bottom,dt=T.x1<lt||T.x2>ct||T.y1<st||T.y2>ut;y&&!d&&(y=!dt),C.push(ot)}}if(E&&g.dataObject.sankeyLayout.zoomTransform){var ht=g.dataObject.sankeyLayout.zoomTransform;_=f,S=p,f=f*parseFloat(ht.k)+parseFloat(ht.x),p=p*parseFloat(ht.k)+parseFloat(ht.y)}var ft={X:0,Y:0,DY:r,xy:[f,p],_translate:[_,S],actualDY:i,ANCHOR:s,text:v,display:y,height:A,width:O,hookPosition:x,adjustVal:0};$&&"html"===Y&&(G?ft.customHTML=vo(J):ft.tspanInfo=m||go(J,Z)),at.push(ft)})),at.dataUpdate=nt,et(at,o,0,i,u?Bo:pn,S).properties={type:"hierarchy",dataLabels:n,color:p.color,dataUpdate:nt,showlabel:O,multiColoring:X,rp:p,contentType:Y,isMultiLine:U,GLT:V,trans:[0,0],chartType:T}}function rt(e,a){switch(P){case Ii:return l=2*(i=e).r,s=2*i.r,{x:(i.x||0)-l/2,y:(i.y||0)-s/2,width:l,height:s};case Ri:var r=g.renderer[Yv(e.data,g)].layout,o=nC.getTileBound(r,e);return o=function(t){if(u&&("bottom-outset"===n.position||"top-outset"===n.position)){var e=Da(y.padding)["bottom-outset"===n.position?"bottom":"top"];"bottom-outset"===n.position&&(t.y=t.y+t.height-e),t.height=e<=t.height?e:t.height}return t}(o);case Mi:return Ml(g,e,k,w,x);case ji:return t.getPosition(e,a,N,M,I,R)}var i,l,s}}))}return n.renderer=function(e){return arguments.length?(t=e,n):t},n.args=function(t){return arguments.length?(e=t,n):e},n})),Nu("scatter",(function(){var t,e,n=pi.helpers;function a(a,r){a.each((function(){var a,o=e[0],i=e[1],l=e[2]||0,s=e[3],c=wa(r.rendererIndex,i),u=r.paneid,d=[0,0],h=o.plotoptions,f=t.commonRendererProp().params,p=f.chartObj,g=p.systemConf,v=f.commonPlotOptions,y=f.dataset,b=f.stacked,x=f.axisrotated,C=f.yaxiscolumnorder,k=f.xscale,w=f.yscale,_=qd(f,u),S=Ui(p,u,i),O=S.value,A=S.name==xi,T="canvas"===p.plot.renderer.mode,P=kl(O),E=_e.bubble.has(O),L=P&&!E,M=_e.bubblePie.has(O),D=p.dataObject.isPolarAxisCategory,I=Gt.geoheatmap===O,R=L&&Zc.has(v.marker.symbol),z=Ud(a=Hd(v,h,p,i,u),p),j=wa(a.orient,"top");if(!o.disabled&&z&&!Gs(p,u,i)){var F=os(p),B=0,H=0,N=0,W=0,V=0,Y=function(t,e){var n=e.staticPaneSVG.selectAll("g.plotareaBorder-property").node(),a=1,r={left:0,top:0,right:0,bottom:0};if(Dd(t,e))for(var o in r)r[o]=n["border-".concat(o)]?n["border-".concat(o)].size/2+a:a;return r}(a,p);if(Dd(a,p)){var U=Md(a,p),G=jd(U.hook);B=Id(a,p),H=Rd(a,p),N=G.height,W=G.width,V=U.radius}var X=E?0:Ge(0,+(a.padding||0))+B+N,Z=a.textOverlap,q=!0===g.chart.plot.datalabels.handleOverlapping,$=!!P&&Ns(v,p),Q=F.left,K=F.top,J=F.right,tt=F.bottom,et=Q+Y.left,nt=K+Y.top,at=J-Y.right,rt=Kx(p,f,a,zo,null,i,s,u),ot=rt.contentType||"text",it="html"===ot&&rt.multiLine,lt=n.isCatNull(y,"x"),st=n.isCatNull(y,"y",C),ct=$x(a,p),ut=Nd(null,a,p,f.color,!1,i),dt=dc(p.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),ht=r.update,ft=r.add,pt="bottom"===j&&L,gt=pt?-1:1;o.data.forEach((function(e,n){var r=t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[n]:o.data[n],u=[];Nd(dt,a,p,f.color,!1,i),dt.style("opacity",0),r.forEach((function(t,e){var r,o,h,g=p.dataObject.getXYvalue(x,b,k,w,C,t,"x",null,s),v=p.dataObject.getXYvalue(x,b,k,w,C,t,"y",null,s),S=E||M?p.dataObject.getXYvalue(x,b,k,w,C,t,"z",p.zscale):null,O=il(t,p),P=null,L=null,z=null,F=null,Y=O&&!t.disabled,U=it?"0.9em":E||I||pt?"0.3em":"-0.3em",G="middle",$=E?null:Kr,ft=0,vt=0;if(M){var mt=Hv.getKey(t,i,p),yt=p.subrenderer[n][mt],bt=yt.data[i];o=(bt.startAngle+bt.endAngle)/2;var xt=xx(S/2+X,o);U=it?"0.9em":o>on/2&&o<3*on/2?"".concat(wx(o),"em"):"0",G=o<0||o>on?"end":"start",rt=Kx(p,f,a,zo,yt.total,i,s)}if(dt[ot]((function(){return z=t.isDummy||lt(y.getX(t))||st(y.getY(t,C,s))?null:rt(t,e)})).styles({display:function(){if(D)return null;return g<Q||g>J||v<K||v>tt?(Y=!1,dn):null}}).attrs({transform:null,dy:U,x:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return(P=M?g+xt[0]:g)||0})),y:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return Dt=R?pt?2:l:(E?0:l)/2,Dt*=gt,(L=M?v+xt[1]:v+(Dt+X*gt)*(A&&!s?1:-1))||0})),"text-anchor":G}),r="lbl".concat(c,"_").concat(n,"_").concat(e,"_").concat(i,"_").concat(s),it){var Ct=Jx(dt,a,parseFloat(U),z,Y);if(z=Ct[2],Y=Ct[3],ho(dt,P),h=Bn(dt.node()),M){var kt=m().range([-1,0]).domain(o<on?[0,on]:[2*on,on]);L+=kt(o)*h.height,ho(dt,P)}else pt||(L-=E||I?h.height/2:h.height);dt.attr("y",L),h=Bn(dt.node())}else"html"===ot?h=Bn(dt.node()):((h=Rr(z,ct,Qx(a,p),null,null,ut["font-style"],ut["font-weight"])).x=P-("middle"===G?h.width/2:"end"===G?h.width:0),h.y=L-h.height,pt&&(L+=h.height/2));var wt=0;if(!D){wt=zd(h.width,B,V,W);var _t=B+H/2+wt/2,St=dt,Ot=h.x-_t,At=Ot+h.width+0+2*_t,Tt=P+(Ot<et?et-Ot:At>at?-(At-at):0);(ft=Tt-P)&&(P=Tt,St.attr("x",Tt),it&&ho(dt,Tt));var Pt=L+(h.y<nt?h.height+l+X:0);(vt=Pt-L)&&(L=Pt,St.attr("y",Pt)),it&&(ft||vt)?h=Bn(dt.node()):(Ar.IE&&(h=Hn(h)),h.x+=ft,h.y+=vt)}wt=D?zd(h.width,B,V,W):wt;var Et=h.width+wt,Lt=h.height,Mt=h.x+wt/2;if(q){var Dt=(E?S:l)/2;if(E){var It,Rt=g,zt=v,jt=$e(qe(Rt-Mt,2)+qe(zt-h.y,2))+B,Ft=$e(qe(Rt-(Mt+h.width),2)+qe(zt-(h.y+h.height),2))+B;if(jt>Dt||Ft>Dt)if("adjust"===Z){U=it?"0.9em":"-0.3em",$=Kr;Dt=S/2;Dt*=gt;var Bt=Ge(0,+(a.padding||0))+B+N;L=(L=v+(Dt+Bt*gt)*(A&&!s?1:-1))||0,h.y=L-h.height,h.y<nt&&(L=h.height,h.y=L)}else{if("ellipsis"===Z){var Ht=Xe(h.height/2,Dt),Nt=$e(qe(Dt,2)-qe(Ht,2)),Wt={left:Rt-Nt+B,top:zt-Nt+B,right:Rt+Nt-B,bottom:zt+Nt-B};"html"===ot?(F=go(dt,ct),fo(dt,p,d,0,Wt,F)):Xd(dt,p,d,0,Wt);var Vt=dt.text();if(Vt&&".."!==Vt&&(z=dt[ot](),It=!0,Et=2*Nt-2*B,it)){var Yt=Bn(dt.node());Lt=Yt.height,Et=Yt.width+wt,L+=(h.height-Yt.height)/2}}It||(Y=!1,dt.style("display",dn))}}if(p.isGeoMap&&Y||!p.isGeoMap){var Ut={id:r,x1:Mt-B,y1:h.y-B,x2:Mt+Et+B,y2:h.y+h.height+B+N,pointRadius:Dt+X-N,translateFunction:ht,overlap:Z,hookHeight:N,orient:j,factor:gt};_.push(Ut)}}var Gt={X:P,Y:L,DY:U,ANCHOR:G,text:z,display:Y,height:Lt,width:Et,hookPosition:$,adjustVal:ft};T&&"html"===ot&&(Gt.tspanInfo=F||go(dt,ct)),u.push(Gt)})),u.dataUpdate=r,ft(u,i,n,s,pn,c).properties={type:ki,dataLabels:a,color:f.color,dataUpdate:r,showlabel:z,multiColoring:$,rp:f,rangeChart:A,yrangePos:s,contentType:ot,isMultiLine:it,chartType:O}}))}}))}return a.renderer=function(e){return arguments.length?(t=e,a):t},a.args=function(t){return arguments.length?(e=t,a):e},a}));var aC=function(){};function rC(t,e){return Ar.SAFARI&&t&&t.svg?t.svg:e}aC.chalk=function(t,e,n,a,r,o,i){var l=rC(o,i).select("defs").append("filter").attrs({id:e,x:-.3,y:-.5,height:2,width:1.6,"color-interpolation-filters":"sRGB"});return l.append("feTurbulence").attrs({baseFrequency:.32065,seed:115,result:"result1",numOctaves:1,type:"fractalNoise"}),l.append("feOffset").attrs({result:"result2",dx:-2,dy:-2}),l.append("feDisplacementMap").attrs({scale:5,yChannelSelector:"G",in2:"result1",xChannelSelector:"R",in:"SourceGraphic"}),e},aC.dropShadow=function(t,e,n,a,r,o,i){var l=rC(o,i).select("defs").append("filter").attrs({x:t.x,y:t.y,width:t.width,height:t.height,id:e,filterUnits:t.filterUnits});if(l.append("feGaussianBlur").attrs({in:t.source||"SourceAlpha",stdDeviation:t.blur}),"SourceGraphic"!==t.source){l.append("feOffset").attrs({dx:t.dx,dy:t.dy,result:"offsetblur"});var s=t.color,c=null,u=s&&s.match(ze);u&&5===u.length&&(s=As(s),c=u[4]),l.append("feFlood").attrs({"flood-color":s,"flood-opacity":c}),l.append("feComposite").attrs({in2:"offsetblur",operator:"in"});var d=l.append("feMerge");d.append("feMergeNode"),d.append("feMergeNode").attr("in","SourceGraphic")}return e},aC.colorMatrix=function(t,e,n,a,r,o,i){rC(o,i).select("defs").append("filter").attr("id",e).append("feColorMatrix").attrs({in:"SourceGraphic",type:t.type,values:t.values});return e},aC.freeHand=function(t,e,n,a,r,o,i){var l=rC(o,i),s=(null==t.scale||t.scale,l.select("defs").append("filter").attr("id",e));s.append("feTurbulence").attrs({type:"fractalNoise",baseFrequency:.015,numOctaves:2,result:"turbulence_3","data-filterId":3}),s.append("feDisplacementMap").attrs({xChannelSelector:"R",yChannelSelector:"G",in:"SourceGraphic",in2:"turbulence_3",scale:t.scale});return e},Hr.svg_filters=aC;var oC=function(){};function iC(t,e,n,a){for(var r=Ss(0,e,n,a),o=0;o<r.offset.length;o++)t.append("stop").attr("offset",r.offset[o]).styles({"stop-color":r.color[o],"stop-opacity":r.opacity[o]})}oC.get=function(t,e,n,a,r,o){var i=t.type;if(i&&i!==dn){var l=r?r.plot.renderer.mode:"svg",s=t.options[i]||t.options,c=Hn(s);return c.color=null!=e?e:c.color,c.dimension=null!=n?n:c.dimension,c.defsLocation=r?r.defsLocation:"",c.id=r.id,"canvas"===l?(c.pointOpacity=o||1,Vx.create(r.context,i,c,a)):Hr.get(oC,i,c,{offset:a,chartObj:r})}},oC.svgGradientFill=function(t,e,n,a,r,o,i){return t&&t.type?oC[t.type](t,e,n,a,r,o,i):null},oC.radial=function(t,e,n,a,r,o,i){var l=i,s=t.color,c=t.dimension,u=t.spreadMethod,d=ua(c)?na(c[2])?c[2]:c[0]:c.r,h=+t.x||0,f=+t.y||0,p=+t.radius||0,g=m().domain([0,100]),v=l.select("defs").append("radialGradient").attrs({id:e,gradientUnits:t.gradientUnits||"userSpaceOnUse",spreadMethod:Os(u)||Ar.PHANTOMJS?u:"pad",gradientTransform:c.transform});if("objectBoundingBox"===t.gradientUnits)v.attrs({cx:"".concat(h,"%"),cy:"".concat(f,"%"),r:"".concat(p,"%")});else{var y=ua(c)?d:c.x2-c.x1,b=ua(c)?d:c.y2-c.y1,x=g.copy().range([0,y]),C=g.copy().range([0,b]),k=g.copy().range([0,d]);v.attrs({cx:x(h),cy:C(f),r:Os(u)?k(p):d})}return iC(v,t,s,"radial"),e},oC.linear=function(t,e,n,a,r,o,i){var l,s,c,u,d=i,h=t.color,f=t.dimension,p=t.spreadMethod,g=+t.x1||0,v=+t.x2||0,y=+t.y1||0,b=+t.y2||0,x=Os(p)?100:Ge(Ze(v-g),Ze(b-y));ua(f)?(l=0,s=f[0],c=0,u=f[1]):(l=f.x1||0,s=f.x2||0,c=f.y1||0,u=f.y2||0),/(pie|dial|bubblepie)/.test(n)&&(l=-s,c=-u);var C=m().domain([0,100]).range([l,s]),k=m().domain([0,100]).range([c,u]);g=100*g/x,v=100*v/x,y=100*y/x,b=100*b/x;var w=d.select("defs").append("linearGradient").attrs({id:e,gradientUnits:t.gradientUnits,spreadMethod:Os(p)||Ar.PHANTOMJS?p:"pad",gradientTransform:f.transform});return"userSpaceOnUse"==t.gradientUnits?w.attrs({x1:C(g),x2:C(v),y1:k(y),y2:k(b)}):w.attrs({x1:"".concat(g,"%"),x2:"".concat(v,"%"),y1:"".concat(y,"%"),y2:"".concat(b,"%")}),iC(w,t,h,"linear"),e},oC.thresholdLinear=function(t,e,n,a,r,o,i){return dc(i.select("defs").append("linearGradient").attrs({id:e,gradientUnits:"userSpaceOnUse",x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}),"stop",n,".","class","stop").attr("offset",(function(t){return t.offset})).attr("stop-color",(function(t){return t.color})),e},Hr.svg_gradients=oC;var lC=function(){};function sC(t,e,n,a,r){return{_x:r?e:t,_y:r?t:e,_width:r?a:n,_height:r?n:a}}function cC(t,e,n,a){this.chart=t,this.barOptions=e,this.scale={x:n,y:a},this.barOptions=e,this.axesRotated=t.axes.rotated,this.cache=L()}function uC(){return[]}function dC(t,e,n,a,r){return e.highlighter.data(n)}function hC(t,e,n){var a=t.plotoptions,r=n.systemConf.chart.plot.plotoptions[e];return t.disabled||0==Jn(bl(a,r,n,"enabled"),!0)}function fC(t,e){t&&(ua(t[0])?t.forEach((function(t){fC(t,e)})):e.push(t))}function pC(t,e,n,a,r,o){return t.seriesIndex=n||0,t.subSeriesIndex=0,t.itemIndex=a||0,t.sortedItemIndex=a||0,t.rendererIndex=0,t.yaxisOrder=0,t.paneid="0_0",t._key=pi.helpers.generatePointKey(e.id,r,n,0,a),t.__key=o,t._xid=e.dataset.getActualX(t),t.type=r,t}lC.imageFill=function(t,e,n,a,r,o,i){var l=t.width,s=t.height;return i.select("defs").append("pattern").attrs({patternUnits:"userSpaceOnUse",id:e,width:l,height:s,x:t.x||0,y:t.y||0}).append("image").attrs({"xlink:href":t.name,x:0,y:0,width:l,height:s}),e},lC.svgPatternFill=function(t,e,n,a,r,o,i,l){var s;if(s=null!=t.ele?function(t,e,n,a,r){var o=r,i=e.bgClr||e.bgClr_base,l=$n(t,i);e.ele=l.replace(/\{\{clr\}\}/g,i);var s,c=o.select("defs").append("pattern").attrs({patternUnits:a||"userSpaceOnUse",id:n,x:e.x||0,y:e.y||0}).html(e.ele);Ar.FIREFOX?o.append("g").html(e.ele).each((function(){s=Bn(this)})).remove():s=Bn(c.node().firstChild);var u=s.width,d=s.height;return c.attrs({width:u,height:d}),{node:c,w:u,h:d,id:n}}(t.ele,t,e,l,i):function(t,e,n,a){var r=a,o=t.bgClr||t.bgClr_base,i=t.stroke||t.stroke_base,l=/\{\{([a-z]+)\}\}/,s=(t.type||"").split(","),c=s.length,u="function"==typeof t.size,d=t.translate&&"function"==typeof t.translate,h=u?t.size(t.width):(t.size||"").split(","),f=(t.strokeWidth||"").split(","),p=o.split(","),g=i.split(","),v=(t.fillOpacity||"").split(","),m=(t.strokeOpacity||"").split(","),y=d?t.translate(t.width):t.translate?/\[.*?\]/g.test(t.translate)?JSON.parse(t.translate):t.translate.split(","):null;h=t.width&&!u?Wr(t,h):h;for(var b=r.select("defs").append("pattern").attrs({id:e,patternUnits:n||"userSpaceOnUse",width:h[0],height:h[0],x:t.x||0,y:t.y||0}),x=0;x<c;x++){var C=np(s[x])(h[x]||h[0]),k=ra(g[x]||g[0])?t.stroke_base:"static"==(g[x]||g[0])?t.customStaticClr:g[x]||g[0],w=ra(p[x]||p[0])?t.bgClr_base:"static"==(p[x]||p[0])?t.customStaticClr:p[x]||p[0],_=(h[x]||h[0])/2,S=[_,_];if(k=l.test(k)?Es(t.stroke_base,1,k.replace(l,"$1"),T):k,w=l.test(w)?Es(t.bgClr_base,1,w.replace(l,"$1"),T):w,y){var O=y[x]||y[0];if(ua(O))S=[_+parseFloat(O[0]),_+parseFloat(O[1])];else{var A=_+parseFloat(O);S=[A,A]}}b.append("path").attrs({transform:"translate(".concat(S[0],",").concat(S[1],")"),d:C,stroke:k,fill:w,"stroke-width":f[x]||f[0],"stroke-opacity":m[x]||m[0],"fill-opacity":v[x]||v[0]})}return{node:b,w:h[0],h:h[0],id:e}}(t,e,l,i),a){var c="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='".concat(s.w,"' height='").concat(s.h,"'>").concat((new XMLSerializer).serializeToString(s.node.node()),"<path d='").concat(np("square")(Xe(s.w,s.h)),"' transform='translate(").concat(s.w/2,",").concat(s.h/2,")' style='fill: ")+"url(#".concat(s.id,")'></path> </svg>");return{url:Ar.FIREFOX||r?"data:image/svg+xml;base64,".concat(Ln(c)):"data:image/svg+xml;utf8,".concat(c),node:s.node,w:s.w,h:s.h,id:s.id}}return s},lC.svgPatternWithGradientFill=function(t,e,n,a,r,o,i){t.bgClr=t.bgClr.split(",").map((function(t){return"transparent"})).join(",");o&&o.plot.renderer.mode;var l=o&&o.defsLocation;s("#"+e).remove(),this.svgPatternFill(t,e,n,a,r,o,i);var c=e+"with_gradients";return s("#"+c).remove(),i.select("defs").append("pattern").attrs({id:c,width:"100%",height:"100%"}).selectAll("rect").data([{id:"zpsvgPatternWithGradientFill__gradient_1",fill:t.gradient},{id:"zpsvgPatternWithGradientFill__pattern_1",fill:"url(".concat(l,"#").concat(e,")")}]).enter().append("rect").attr("id",(function(t){return t.id})).attr("width",t.bound.width).attr("height",t.bound.height).attr("fill",(function(t){return t.fill})),c},Hr.svg_patterns=lC,wn.setComponent("patterns.svg",lC),cC.prototype.getCurrentPoint=function(t,e){for(var n,a=this.getCurrentRectangles(e),r=a.length;r--;)if(n=a[r],zl(t.x,t.y,n))return n;return null},cC.prototype.getCurrentRectangles=function(t){if(t.isDummy)return[];var e=this,n=e.chart,a=n.dataset.getX(t);if(e.cache.has(a))return e.cache.get(a);var r,o,i,l,s=e.scale.y,c=e.scale.x,u=n.systemConf.chart.plot.plotoptions.bullet.levelMarker,d=n.systemConf.chart.plot.plotoptions.bullet.targetMarker,h=e.barOptions,f=c(a)+h.levelMarkerPadding,p=c.bandwidth(),g=Xe(u.maxBandWidth,p),v=n.dataset.getDataType("y",0),m=[],y=t[u.dataindex]||[],b=e.axesRotated,x=c.domain().indexOf(a),C=null;ua(y)||(y=[y]);var k=y.slice(0);if(v===Po){var w=n.dataset.getColumn("y",0);i=na(w.time)?w.time:null}k.push(0),k=k.map((function(t){return v===Po?Go(t,0,i).getTime():t}));var _,S=(k=b?k.sort(B):k.sort(H)).map((function(t){return s(t)}));k.splice(k.indexOf(0),1);var O=u.events||{},A=!na(O.enabled)||O.enabled;if(_=(l=S.length-1)-1,A)for(;l--;)(o=S[l+1]-S[l])>0&&(r=S[l]),r=S[l],o>0&&((C=sC(f,r,g,o,b)).currentStage=k[l],C.type="levelMarker",C.data=t,C.rangeIndex=_-l,C.itemIndex=x,C.seriesIndex=t.seriesIndex,C.events=u.events,C.chartType=n.chartTypes[0],C._defaultH=uC,C._visible=!0,C._key="levelMarker_".concat(t.seriesIndex,"_").concat(x,"_").concat(C.rangeIndex),m.push(C));var T=d.events||{},P=!na(T.enabled)||T.enabled;if(!0===d.enabled&&P){g=wa(d.size,h.levelMarkerWidth-2*wa(d.padding,h.padding/2)),na(d.size)&&(g=10*Xe(g,p/10)),o="line"===d.symbol?Ge(wa(d.outerStrokeWidth,d.innerStrokeWidth,0)):g;var E=t[d.dataindex];f=c(n.dataset.getX(t))-0,r=s(E)-0,f+=(p-g)/2,r-=o/2,o<5&&(o=5,r-=2.5);var L=T.triggerOffset||0;(C=sC(f-=L/2,r-=L/2,g+=L+0,o+=L+0,b)).type="marker",C.data=t,C.currentStage=E,C.itemIndex=x,C.seriesIndex=t.seriesIndex,C.targetIndex=0,C.events=d.events,C.chartType=n.chartTypes[0],C._defaultH=uC,C._key="targetMarker_".concat(t.seriesIndex,"_").concat(x,"_").concat(E),m.push(C),C._visible=!0}return e.cache.set(a,m),m},cC.prototype.getTooltipContent=function(t,e){var n=this.chart,a=n.systemConf.chart.plot.plotoptions.bullet,r=Rl(n,a.levelMarker),o=Rl(n,a.targetMarker),i=fa(a,"levelMarker.events")||{},l=fa(a,"targetMarker.events")||{},s=("marker"===this.type?o:r)||n.dataset.getColumn("y",0),c=t.currentStage,u=s.datatype,d=n.dataset.getMetaInfoObj(n,t.data,e),h=Wo(s[u],c,u,n,"tooltip"),f={value:c,formattedValue:h,actualData:t.data,data:d};return"marker"===t.type?$n(l.tooltipContent,f,n,"tooltip")||"Target: ".concat(h):$n(i.tooltipContent,f,n,"tooltip")||"Range: ".concat(h)},Vt.BulletEvent=cC,pi.prototype.flattenData=function(t){var e,n=this,a=n.chartObj,r=na(t),o=a.seriesdata,i=function(t,e){var n=t?[{data:t}]:[{data:e.seriesdata}];if(e.dataObject.pivot){if(t)n=[{row:t[0].row,column:t[0].column,data:t,index:t[0].index}];else n=nr(e.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes)}return n}(t,a),l=this.flattenPoints=this.flattenPoints||L(),s=pi.helpers,c=(n.globalChartType,n.isCombinationalChart,yl.hasSharedSeries(a)),u=a.systemConf.chart.axes.xaxis.reversed,d=n.pivot,h=(n.hierarchical,0);if(i.forEach((function(i,f){var p="".concat(i.row||0,"_").concat(i.column||0),g="pane".concat(i.row||0,"_").concat(i.column||0);"pane".concat(i.index||0);l.has(g)||l.set(g,L()),e=l.get(g),i.data.forEach((function(l,f){var v,m=r?l.seriesindex:f,y=Ui(a,p,m),b=y.name,x=r?l.rendererIndex:h++,C="bubblepie"==b?a.bubblePieRendererIndex:d?x:m,k=a.renderer[C],w=k.commonRendererProp().params,_=(Cl(y.value),function(t,e,n){var a=e.commonRendererProp().params,r=a.commonPlotOptions,o=(a.markerOptions||{}).symbol,i=r.link||{};return"line"==o||"vertical-line"==o?"segment":i.curve?"".concat(n,"Link").concat(za(i.curve)):n}(0,k,b)),S=function(t,e){return"charttype"==e?t:getSearchMode(t,c||n.noofBarEnabledSeries)}(_,"charttype"),O=e.get(S)||{},A=s.getParsedYAxisOrder(d&&!r?l.node.yaxiscolumnorder:l.yaxiscolumnorder),T=y.value,P=n.isstacked(T),E=k.getHighlighter&&k.getHighlighter(a,m,b),L=l.data||l;qa(_e.singleSourceEvent,T)&&(qa(_e.hierarchy,y.value)&&fC(L,v=[]),Oa(v?[v]:L,(function(e,n){var s=r?l.subseriesindex:n,c="".concat(m,"_").concat(s),d=O[c]||[],h=r&&d[d.length-1]&&d[d.length-1].itemIndex+1?d[d.length-1].itemIndex+1:0;Oa(e,(function(t,n){var r=h++,i=r;M();if(u&&(i=e.length-1-i),t.seriesIndex=m,t.subSeriesIndex=s,t.itemIndex=r,t.sortedItemIndex=r,t.rendererIndex=C,t.yaxisOrder=A,t._data=dC(a,k,t,A,P),t.paneid=p,t._key=pi.helpers.generatePointKey(a.id,g,m,s,r),t._xid=a.dataset.getActualX(t),t.subseriesLength=L.length,d.push(t),E.levelmarker&&!O["lm_".concat(t._xid)]){var l=E.levelmarker(t);O["".concat(a.id,"_")+"lm_".concat(t._xid)]=l,O["".concat(a.id,"_")+"lm_".concat(t._xid)].disabled=function(){return o[m].disabled||hC(o[m],b,a)}}})),O[c]=d,"bar"!=b&&"barrange"!=b&&"boxplot"!=b||w.whiskers&&w.whiskers.enabled&&"overlay"==w.whiskers.showOn&&w.whiskers.events.enabled&&(O.superKey="".concat(b,"_segment")),O[c].disabled=function(){var e=t?o[m]||o[f]:i.data[m]&&i.data[m].node||i.data[m]||i.data[f];return e.disabled||hC(e,b,a)}})),e.set(S,O))}))})),a.cache.thresholdCustomPoints&&!t)for(var f in a.cache.thresholdCustomPoints){var p=a.cache.thresholdCustomPoints[f];if(a.cache.thresholdCustomPoints.hasOwnProperty(f)){var g=f,v=e;p.grid&&(v=l.get("pane".concat(p.grid))),v.get(g)?v.set(g,v.concat(p)):v.set(g,p)}}var m=a.cache.customPoints;if(m){var y=function(t){m.hasOwnProperty(t)&&(Oa(m[t],(function(e,n){var r=_slicedToArray(n.split("_").map(Number),2),o=r[0],i=r[1],l=a.renderer[o];hr(l)&&e.forEach((function(e,n){e.seriesIndex=o,e.subSeriesIndex=i,e._key=pi.helpers.generatePointKey(t,o,i,n),e._data=dC(a,l,e)}))})),e.set(t,m[t]))};for(var b in m)y(b)}this.pushFlattenAnnotation&&this.pushFlattenAnnotation(),a.components&&a.components.forEach((function(t){var n=t.events;e.get(n.type)?e.get(n.type)[n.id]=n.config[n.id]:e.set(n.type,n.config)}))},pi.prototype.getFlattenedSeriesData=function(t){var e=this.chartObj,n=e.chartTypes[t.seriesIndex].name;return e.dataObject.flattenPoints.get(n)["".concat(t.seriesIndex,"_").concat(t.subSeriesIndex)]},pi.prototype.removeFlattenData=function(t){var e=this.getFlattenedSeriesData(t),n=t.itemIndex;e.splice(n,1);for(var a=n;a<e.length-1;a++)e[a].itemIndex=n++},pi.prototype.pushFlattenAnnotation=function(){var t=this.chartObj,e=t.seriesdata,n=t.annotation.flatten=[],a=this.flattenPoints.get("pane0_0");n.push((function(){var n=t.annotation.events;t.cache.parser={},n.forEach((function(t){var e=t.parser.event;a.set(e.type,null)})),n.forEach((function(n){var r=n.parser.event;a.get(r.type)||a.set(r.type,{}),a.get(r.type).superKey=r.superKey,a.get(r.type).size=r.size;var o=n.data.seriesIndex,i=r.id,l=a.get(r.type)[i]=a.get(r.type)[i]||[];l.disabled=function(){return!!na(o)&&e[o].disabled},l.push($n(r.data,n.data,t,n.xy,n));"".concat(r.type,"_").concat(i,"_").concat(n.data._key);t.cache.parser[n.data._key]=n,t.cache.parser[n.data._key]._highlighter=$n(Gn(t.cache,"parser.".concat([n.data._key],".parser.event.highlighter"),!0),t)}))}))},wn.setComponent("events.dataHash",pC);var gC=function(){function t(e,n){_classCallCheck(this,t),this.chart=e,this.eventManager=n,this.nearest=null,this.selectedEvent=null,this.selectionSet=[],this.newSelectionSet=[],this.oldSelectionSet=[],this.mergedSelectionSet=[],this.rejectionSet=[],this.oldSelectionSet=[],this.oldRejectionSet=[]}return _createClass(t,[{key:"add",value:function(t){this.selectionSet.length?(this.mergedSelectionSet=this.intersection(t,this.selectionSet,3),this.oldSelectionSet=this.difference(this.selectionSet,this.mergedSelectionSet,2),this.newSelectionSet=this.difference(t,this.mergedSelectionSet,1)):t.length&&(this.newSelectionSet=t,this.updateID(this.newSelectionSet,1)),this.selectionSet=t,this.selectedEvent=this.eventManager.eventType}},{key:"remove",value:function(){this.updateID(this.mergedSelectionSet,null),this.mergedSelectionSet=[],this.oldSelectionSet=_toConsumableArray(this.selectionSet),this.selectionSet=[]}},{key:"updateID",value:function(t,e){t.forEach((function(t){t.selected=e}))}},{key:"difference",value:function(t,e,n){var a=[];return e.length?t.forEach((function(t){e.forEach((function(e){t._key==e._key&&3!=e.selected&&a.push(t)}))})):a=t,this.updateID(a,n),a}},{key:"intersection",value:function(t,e,n){if(this.eventManager.eventType!=this.selectedEvent)return[];var a=[];return t.forEach((function(t){e.forEach((function(e){!t._key||t._key!=e._key||1!=e.selected&&3!=e.selected||a.push(t)}))})),this.updateID(a,n),a}}]),t}(),vC=function(){function t(e){_classCallCheck(this,t),this.chart=e}return _createClass(t,[{key:"highlight",value:function(t){t.seriesIndex,t.itemIndex,t.subSeriesIndex,t.subseriesLength;var e=t.type||"series",n=this.getRenderer(t,e),a=n._defaultH(t);for(var r in a)if(a.hasOwnProperty(r)){var o=a[r],i=o.path.call(n,t,o),l=o.styles?o.styles.call(n,t):null;this.applyStyles(i,l)}}},{key:"getRenderer",value:function(t,e){if("series"==e){Ui(this.chart,t.paneid,t.seriesIndex).name;return this.chart.renderer[t.rendererIndex||0].highlighter}return"threshold-marker"==e||"levelMarker"==e||"marker"==e?t:Gn(this.chart.cache,"parser.".concat([t.__key],"._highlighter"),!0)}},{key:"getRenderingContext",value:function(){}},{key:"applyStyles",value:function(t,e){t&&t.styles(e)}}]),t}();function mC(t,e){var n=e.nearest;n&&3==n.selected||(this.chart.eventHandler.isSingleSource()?this.chart.isGeoMap?this.chart.eventHandler.mapEvents.handleMouseMove(n):function(t,e,n){tv(n);var a,r=yl.hasSharedSeries(n),o=L(),i=n.eventHandler.plotHighlighter||new vC(n);n.eventHandler.plotHighlighter=i,a=r||Hl(n)?t.selectionSet:[t.nearest],n.dataObject.pivot&&n.systemConf.chart.axes.events&&n.systemConf.chart.axes.events.highlightAllGrid&&(a=function(t,e){t.column;var n=e.dataObject.hierarchical.pivotLayout.getRootNodeList("column");return n.clusters[0].datatype==Eo?null:n.getClusterNodes(0)[t.index].data}(t.nearest,n)||a);a.forEach((function(t){"series"==n.eventHandler.getPointType(t)&&(n.eventHandler.tooltipSharedInfo=o.set(t.seriesIndex,na(t.counter)?t.counter:wa(t.sortedItemIndex,t.itemIndex)),$v.updateSharedInfo(n,o,t.seriesIndex)),i.highlight(t)}))}(e,0,this.chart):n.renderer.defaultMouseOverFunc(n.data,n.seriesIndex,n.itemIndex,n.paneid))}M(["line","scatter","threshold"]);var yC=M(["bubble","bubblepie","area","arearange","web","bar","bullet","gantt","heatmap","waterfall","boxplot","levelMarker","marker","sankey","treemap","wordcloud","barrange","geoheatmap"]);function bC(t,e){var n=e.nearest;this.chart.eventHandler.reverseLegendHighlight.highlight(n),this.chart.eventHandler.unselectedHighlight.highlight(n)}function xC(t,e){this.chart.eventHandler.tapOldInfo;var n=jt()&&jt().touches,a=e.nearest;if(n&&"taphold"!==this.chart.zcEventType){var r=$ZC.getPlotDefaultBehaviour(),o=this.chart.eventHandler.eventManager;a&&3==a.selected?(o.selectionManager.remove(),r.mouseout.map((function(n,a){n.action().call(o,t,e)}))):o.associateBehaviours.call(o,"mousemove",e,t)}}function CC(t,e,n){var a=this.chart.eventHandler.isSingleSource(),r=wC(this.chart),o=!0===fa(this.chart.systemConf,"chart.brush.enabled"),i=this.chart.staticPaneSVG.selectAll(".trackerGroup").selectAll("rect.overlay"),l=this.chart.isAxisCategory&&this.chart.isPolarAxisCategory||this.chart.isGeoMap,s=n||(o&&l?"crosshair":fn);if(a){s=n||Uk.getCustomBehaviour.call(this,e,"cursor")||(o&&this.chart.isAxisCategory?"crosshair":fn);var c=function(t,e,n){if(!e)return!1;var a=n.isGeoMap?e.point:e,r=a.seriesIndex,o=a.type||Ui(n,a.paneid,r).name;if(yC.has(o))return!0;var i={x:a._x,y:a._y};return vl.dist(i,t)<10}(t,e.nearest,this.chart);c?(r.style("cursor",s),o&&i.style("cursor",s)):(kC.call(this),o&&i.style("cursor",i.attr("cursor")))}else r.style("cursor",s)}function kC(){var t=wC(this.chart),e=!0===fa(this.chart.systemConf,"chart.brush.enabled"),n=this.chart.staticPaneSVG.selectAll(".trackerGroup").selectAll("rect.overlay");t.style("cursor","default"),e&&n.style("cursor",null)}function wC(t){return t.isAxisCategory&&(t.systemConf.chart.width||t.systemConf.chart.height)?t.container.selectAll(".zohocharts_scroll"):t.eventHandler.trackerElement}function _C(){this.chart.eventHandler.handlers;var t=this.chart.eventHandler.tooltipElement;t.hide(t.element),kC.call(this)}wn.setComponent("events.controllers.highlighter",mC),wn.setComponent("events.controllers.reversehighlight",bC),wn.setComponent("events.controllers.highlightTouch",xC),wn.setComponent("events.controllers.showCursor",CC),wn.setComponent("events.controllers.hideTooltip",_C);var SC=wn.getComponent("annotation");function OC(t,e){var n,a=this.chart,r=e.nearest,o=this.chart.systemConf.notes;if(o&&o.enabled&&o.addOnDoubleclickEvent){if(this.chart.eventHandler.isSingleSource()){var i=this.chart.seriesdata,l=r.slice(),s=l.splice(0,l.length),c=Ui(a,r.paneid,0).value,u=r._centric&&qa(_e.nonAxisSingleSourceEvent,c),d=[r._x-(u?r._width/2:0),r._y-(u?r._height/2:0)];i.length>1&&s.push(i[r.seriesIndex].seriesname),n={coordinate:this.chart.dataObject.isPolarAxisCategory?[d[0]+this.chart.plotarea_approx.x,d[1]+this.chart.plotarea_approx.y]:d,data:s,basedOn:"plot",conf:{data:s}}}else n=_objectSpread(_objectSpread({},r),{},{conf:{data:r.data}});SC._empty||SC.addNotes(this.chart,n)}}function AC(t,e){var n=jt()||this.chart.eventHandler.targetEvent,a=null!=n?n.relatedTarget:null,r=null!=n?n.target:null,o=this.chart.eventHandler.tooltipElement,i=this.chart.systemConf.tooltip.hideDelay,l=(this.chart.eventHandler.getSourceNode(),e.nearest),s=this.chart,c=this.chart.eventHandler;if(s.eventHandler.unselectedHighlight.reset(),!this.chart.isAxisCategory||!1===s.eventHandler.mouseOnTooltip||(u=r,d=a,f=(h=o).element,d==pn||h===pn||u!=f.node()&&u!=f.selectAll("div#tooltipcontent").node()&&u!=f.selectAll("div#zctooltipafter").node()&&u!=f.selectAll("div#zctooltipbefore").node()&&d!=f.node()&&d!=f.selectAll("div#tooltipcontent").node()&&d!=f.selectAll("div#zctooltipafter").node()&&d!=f.selectAll("div#zctooltipbefore").node())){var u,d,h,f;if(c.isSingleSource())clearTimeout(c.mouseouttimer),c.mouseouttimer=setTimeout((function(){clearTimeout(c.tooltipElement.timeout),c.tooltipElement.timeout=setTimeout((function(){tv(s),o.hide()}),wa(i,150))}),0),kC.call(this);else{var p=l?l.seriesIndex:0;this.chart.renderer[p]||l.renderer;_C.call(this)}c.reverseLegendHighlight.reset()}}function TC(t,e){var n=jt()||this.chart.eventHandler.targetEvent,a=(null!=n&&n.relatedTarget,null!=n&&n.target,this.chart.eventHandler.tooltipElement,this.chart.systemConf.tooltip.hideDelay,this.chart.eventHandler.getSourceNode(),e.nearest),r=this.chart;if(this.chart.eventHandler.isSingleSource()){var o=e.nearest;if(o&&3==o.selected)return;tv(this.chart)}else PC(r,a,undefined)}function PC(t,e,n){var a=e?e.seriesIndex:0;((t.renderer[t.dataObject.isAxisCategory||t.dataObject.isPolarAxisCategory?a:e&&e.rendererIndex||0]||e.renderer).defaultMouseOutFunc||e.renderer.defaultMouseOutFunc)(e,a,n)}wn.setComponent("events.controllers.notes",OC),wn.setComponent("events.controllers.reset",AC),wn.setComponent("events.controllers.resethighlight",TC),wn.setComponent("events.controllers.forceResetHighlight",(function(t,e){var n=e.nearest,a=this.chart;if(this.chart.eventHandler.isSingleSource()){var r=e.nearest;if(r&&3==r.selected)return;tv(this.chart)}else PC(a,n,undefined)}));var EC={mousemove:[{action:function(){return TC},allowifcustom:!0,type:"resetHighlight"},{action:function(){return mC},type:"highlight"},{action:function(){return CC},type:"cursor"},{action:{callback:function(t,e,n){var a=n.eventHandler.tooltipElement;a.hide(a.element)}},type:"custom"}],click:[{action:function(){return _C},type:"hidetooltip"},{action:function(){return CC},type:"cursor",allowifcustom:IC},{action:function(){return xC},type:"highlightOnTaphold"}],doubleclick:[{action:function(){return _C},type:"hidetooltip"},{action:function(){return CC},type:"cursor",allowDefault:IC}],mouseout:[{action:function(){return TC},type:"resetHighlight",allowDefault:!0},{action:function(){return AC},type:"resetTooltip",allowDefault:!0}],contextmenu:[]};EC.touchmove=EC.mousemove,EC.tap=EC.click,EC.doubletap=EC.doubleclick;var LC={};function MC(){2===arguments.length?LC[arguments[0]]=arguments[1]:LC._defaultPlotBehaviour=arguments[0]}function DC(){if(!arguments.length)return LC._defaultPlotBehaviour;var t=Array.prototype.slice.call(arguments),e=t[0];return e?LC[e]:void 0}function IC(t){return!(!this.chart.isAxisCategory&&!this.chart.isPolarAxisCategory)}LC._defaultPlotBehaviour={mousemove:[{action:function(){return TC},allowifcustom:!0,type:"resetHighlight"},{action:function(){return mC},type:"highlight"},{action:function(){return CC},type:"cursor"},{action:function(){return bC},type:"reverseHighlight"},{action:function(){return Jv},allowDefault:!0,type:"tooltip"}],click:[{action:function(){return _C},type:"hidetooltip"},{action:function(){return CC},type:"cursor",allowifcustom:IC},{action:function(){return xC},type:"highlightOnTaphold"}],doubleclick:[{action:function(){return _C},type:"hidetooltip"},{action:function(){return OC},type:"notes"},{action:function(){return CC},type:"cursor",allowDefault:IC}],mouseout:[{action:function(){return TC},type:"resetHighlight",allowDefault:!0},{action:function(){return AC},type:"resetTooltip",allowDefault:!0}],contextmenu:[]},LC._defaultPlotBehaviour.touchmove=LC._defaultPlotBehaviour.mousemove,LC._defaultPlotBehaviour.tap=LC._defaultPlotBehaviour.click,LC._defaultPlotBehaviour.doubletap=LC._defaultPlotBehaviour.doubleclick,MC("marker",EC);var RC=function(){function t(e,n){_classCallCheck(this,t),this.chart=e,this.data=n,this.selectionManager,this.handlers={},this.dataGenerators={},this.defaultBehaviour={},this.customBehaviour={},this.targetEvent=null}return _createClass(t,[{key:"init",value:function(){this.selectionManager=new gC(this.chart,this)}},{key:"bindTo",value:function(t){this.tracker=t}},{key:"attachListeners",value:function(t,e,n,a,r){Iu(t,e,n,a,r)}},{key:"dataFinder",value:function(t){return t&&(this.dataGenerators=t),this.dataGenerators}},{key:"getData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=this.dataFinder()[t],r=a.call.apply(a,[this,e,t].concat(_toConsumableArray(n)));return this.updateSelectionManager(r),this.selectionManager}},{key:"updateSelectionManager",value:function(t){t.dependents?(this.selectionManager.add([t.nearest]),this.selectionManager.selectionSet=t.dependents,this.selectionManager.nearest!==t.nearest&&this.selectionManager.updateID([t.nearest],1)):t.nearby?this.selectionManager.add(t.nearby):t.nearest?this.selectionManager.add([t.nearest]):this.selectionManager.remove(),this.selectionManager.nearest=t.nearest,this.selectionManager.surround=t.surround}},{key:"associateBehaviours",value:function(t,e,n){var a,r=this;this.getbehaviour(t,e).forEach((function(t){if(t){var o=Qn(t.allowifcustom,r);if("custom"==t.type){a=!0;var i=t.action;$n(i.callback,r.targetEvent,i.args,r.chart)}else r.targetEvent.allowDefault||t.allowDefault?a&&o||zC(t,r,n,e):a&&o?zC(t,r,n,e):a||o||zC(t,r,n,e)}}))}},{key:"getbehaviour",value:function(t,e){var n=[],a=e.nearest,r=this.getBehaviourName&&this.getBehaviourName(a),o=wa(DC(r),this.defaultBehaviour)[t],i=this.customBehaviour(e,t);return n=na(i)?(n=n.concat(i)).concat(o):n.concat(o)}},{key:"isDefaultAllowed",value:function(t,e){return!na(t)||t&&!0===e.allowDefault}}]),t}();function zC(t,e,n,a){return(sa(t)?t.action():t).call(e,n,a)}var jC=M(["line","scatter","bubble","bubblepie","threshold","threshold-marker","segment","treemap","wordcloud"]),FC=M(["area","arearange","web","sankeyLinkLinear","sankeyNodes"]),BC=M(["bar","bullet","gantt","heatmap","waterfall","boxplot","barrange","bar_segment","barrange_segment","boxplot_segment","bar_triggeroffset"]),HC=M(["threshold"]),NC=M(["line","scatter","threshold"]),WC=M(["bubble"]),VC=M(["bubblepie"]),YC=M(["treemap"]),UC=M(["wordcloud"]),GC=M(["bar","barrange","bullet","gantt","heatmap","waterfall"]),XC=M(["boxplot"]),ZC=M(["bar_segment","barrange_segment","boxplot_segment"]),qC=M(["bar_triggeroffset"]),$C=M(["segment","whisker"]),QC=M(["sankeyLinkBezier"]),KC=M(["sankey"]);function JC(t,e){return e&&!HC.has(t)?"bisect":QC.has(t)?"PATH":FC.has(t)?"POLY":jC.has(t)?"QUADTREE":qC.has(t)?"BISECT_QUADTREE":BC.has(t)?"BISECT":"zc-marker"===t?"QUADTREE":void 0}function tk(t){return"QUADTREE"==t?"bubble":"bar"}function ek(t){this.data=t}var nk=ek.prototype;function ak(t,e){this.data=t,this.type=e,this.bisector="continous"==e?this.continousBisect():this.discreteBisect()}nk.getPoly=function(t){return t._polydata().points},nk.find=function(t){var e=[];return this.data.map((function(t,n){t._data()._visible&&e.push(t)})),e};var rk=ak.prototype;function ok(t,e){return Ze(t.x-e._data()._x)}function ik(t,e,n,a){var r=n?n.systemConf.chart.plot.plotoptions[a]:null,o=r&&r.events&&r.events.triggerOffset||0,i=o&&function(t){if(t)return t.dataObject.noofBarEnabledSeries&&t.dataObject.noofBarEnabledSeries>1&&"bullet"!=t.chartTypes[0].name&&"heatmap"!=t.chartTypes[0].name;return null}(n),l=o&&function(t){if(t)return t.dataObject.noofBarEnabledSeries&&"bullet"!=t.chartTypes[0].name&&"heatmap"!=t.chartTypes[0].name;return null}(n),s=t.map((function(t,n){var a,r=t._data(),s=lk(r),c=l?function(t,e){var n=(t.x||0)-e,a=(t.y||0)-e,r=t.width+2*e,o=t.height+2*e;return{x:n,y:a,width:r,height:o}}(s,o):s,u=Mu(e,{x:r._x,y:r._y,rotation:r._rotation}),d=zl(u.x,u.y,c);return i&&d&&(t.searchKey="bar_triggeroffset",a=function(t,e){var n=Ge(t.x-e.x,0,e.x-(t.x+t.width)),a=Ge(t.y-e.y,0,e.y-(t.y+t.height));return $e(n*n+a*a)}(s,u)),[d?0:1,r,a]})),c=s.filter((function(t){if(0==t[0])return t}));if(c.length>1){var u={marker:0,levelMarker:2};return c.sort((function(t,e){if(i)return B(t[2],e[2]);var n=u[t[1].type]||1,a=u[e[1].type]||1;return n==a?-1:B(n,a)}))[0][1]}return c.length?c[0][1]:pn}function lk(t){var e=t._x,n=t._y,a=t._width,r=t._height;return t._centric?{x:e-a/2,y:n-r/2,width:a,height:r}:{x:e,y:n,width:a,height:r}}function sk(t,e){var n,a,r,o,i,l,s=[],c=na(e.counter)?e.counter:e.itemIndex,u=0==c,d=c==t.length-1,h=[0,0],f=e._data(),p=u?h:t[c-1]._data(),g=d?h:t[c+1]._data(),v=!f._defined,m=!!u||!p._defined,y=!!d||!g._defined,b=p.isDummy,x=g.isDummy;a=v?h:ck(f),n=u?h:m?a:ck(p),r=d?h:y?a:ck(g),i=v?h:uk(f),o=u?h:m?i:b?n:uk(p),l=d?h:y?i:x?r:uk(g);var C=u?h:m||b?n:dk(n,a),k=d?h:y||x?r:dk(r,a),w=u?h:m||b?o:dk(o,i),_=d?h:y||x?l:dk(l,i);m&&y?s.push(a):u||m?s.push(a,k,_,i):d||y?s.push(C,a,i,w):s.push(C,a,k,_,i,w);return{points:s,prevCur:C,curNext:k,curpt:a}}function ck(t){return[t._x,t._y]}function uk(t){return[t._x0,t._y0]}function dk(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function hk(t,e,n,a){n.cache.search.bisect;var r,o,i=t;if(i)return e=[e.x,e.y],i.map((function(t){r=n.eventHandler.dataAccesor().radius(a);var i=n.renderer[t.seriesIndex],l="zc-marker"===t.type?Gn(n.cache,"parser.".concat([t.__key],"._highlighter"),!0).getSegments(t):i.getSegments(t);if(l)l.map((function(n){var a=n?fk(e,n[0],n[1]):$e(gk(e,[t._x,t._y]));(a<r||null==r)&&(r=a,o=t)}));else{var s=gk(e,[t._x,t._y]);(s<r||null==r)&&(r=s,o=t)}})),o}function fk(t,e,n){return $e(function(t,e,n){var a=gk(e,n);if(0===a)return gk(t,e);var r=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/a;if(r<0)return gk(t,e);if(r>1)return gk(t,n);return gk(t,[e[0]+r*(n[0]-e[0]),e[1]+r*(n[1]-e[1])])}(t,e,n))}function pk(t){return t*t}function gk(t,e){return pk(t[0]-e[0])+pk(t[1]-e[1])}function vk(t,e,n,a){n.renderer,n.dataObject;var r,o,i,l=n.dataset;pi.helpers.getParsedYAxisOrder,e=[e.x,e.y],t.map((function(a){var s=a.rendererIndex,u=a.seriesIndex,d=a.subSeriesIndex,h=a.itemIndex,f=Ui(n,a.paneid,u),p=n.renderer[s],g=p?p.seriesdataAfterUpdate[d]:t,v=a._polydata(),m=Et(v.points,e);f.name===ji?m&&((o=l.getZ(a))<i||null==i)&&(i=o,r=a):m?((o=0==h?fk(e,v.curpt,v.curNext):h==g.length-1?fk(e,v.prevCur,v.curpt):c([fk(e,v.prevCur,v.curpt),fk(e,v.curpt,v.curNext)]))<i||null==i)&&(i=o,r=a):1!=g.length&&1!=v.points.length||!a._defined||((o=gk(e,v.curpt))<=i||null==i)&&o<jl(n,Gt.line)&&(i=o,r=a)}));return r||(r=nv(t,{x:e[0],y:e[1]},n,"web")),r}function mk(t,e){return this.chart=t,this.renderer=e,this}rk.find=function(t,e){var n=this,a=[],r=this.data.map((function(a){return n.bisector.call(n,a,t,e)})),o=this.bisectValue(r,e);return this.data.map((function(t,e){if(r[e])return r[e].map((function(e){t[e]&&t[e]._data()._visible&&function(t){return"discrete"==n.type||o==t._x}(t[e])&&a.push(t[e])}))})),a},rk.continousBisect=function(){var t=O((function(t){return t._data()._uid})).left,e=this.discreteBisect;return function(n,a,r){var o=t(n,a,0,n.length-1);if(o>0){var i=[o,o-1],l=[ok(r,n[i[0]]),ok(r,n[i[1]])];o=l[0]<=l[1]?i[0]:i[1]}return e()(n,n[o]._uid)}},rk.discreteBisect=function(){return ir((function(t){return t._data()._uid}))},rk.bisectValue=function(t,e){var n,a,r;this.type;return this.data.map((function(o,i){if(t[i])return t[i].map((function(t){o[t]&&o[t]._data()._visible&&((a=ok(e,o[t]))<r||null==r)&&(n=o[t]._x,r=a)}))})),n},Ta(mk,rv);var yk=mk.prototype;function bk(t,e){this.chart=t,this.renderer=e}function xk(t,e){this.chart=t,this.renderer=e}function Ck(t,e,n,a){var r=Hv.getKey(a,e,t),o=t.subrenderer[n][r];return o?{start:o.data[e].startAngle,end:o.data[e].endAngle}:null}function kk(t,e,n,a){var r,o=av(t,e,n,a),i=null;if(o){var l=o.type||n.chartTypes[o.seriesIndex].name;if("bubblepie"!=l&&"geobubblepie"!=l)return o;if(a=Hv.getKey(o,o.seriesIndex,n),!(r=n.subrenderer[o.subSeriesIndex][a]))return!1;if(r.data.some((function(t){if(t.data.disabled||t.data.dummy)return!1;var a=t.data,r=Ck(n,a.seriesIndex,a.subSeriesIndex,a),o=en(e.x-a._x,-(e.y-a._y)),l=r&&_x(r.start,r.end,o);return l&&(i=a),l})),i&&(!n.hasColorScale||n.hasColorScale&&il(i,n)))return i}return null}yk._defaultH=function(){var t=this,e=[{shape:"marker",path:Za(this).path,data:Za(this).data,context:Za(this).renderingContext,translate:Za(this).translateContext},{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:Za(this).translateContext,styles:function(e){return Kg.call(t,e,"inherit")}}];return this.renderer.commonRendererProp().params.isRangeChart&&e.push({shape:"marker",path:Za(this).path,data:Za(this).data,context:Za(this).renderingContext,translate:Za(this).translateContext,type:"end"}),e},yk.data=function(t){var e=this.renderer.commonRendererProp().params,n=this.chart,a=this.renderer,r=e.axisrotated,o=e.stacked,i=a.layout[t.subSeriesIndex],l=r?i.x1():i.x(),s=r?i.y():i.y1(),c=r?i.x0():i.x(),u=r?i.y():i.y0(),d=i.defined();return t._polydata=this.poly(t),function(){n.cache.data[t._key]||(n.cache.data[t._key]={});var e=n.cache.data[t._key],r=na(t.counter)?t.counter:t.itemIndex;return e._x=t._x=e._x||l(t,r),e._y=t._y=e._y||s(t,r),e._x0=t._x0=e._x0||c(t,r),e._y0=t._y0=e._y0||u(t,r),e._uid=t._uid=n.dataset.getX(t),e._defined=t._defined=na(e._defined)?e._defined:d(t),e._size=t._size=e._size||a.getSymbolSize&&a.getSymbolSize(t),e._visible=t._visible=Fl(n,t)&&(!o||!t.isDummy),e._point=t,t}},yk.poly=function(t){var e=this.chart,n=this.renderer;return function(){e.cache.data[t._key]||(e.cache.data[t._key]={});var a=e.cache.data[t._key],r=n.seriesdataAfterUpdate[t.subSeriesIndex];return a._poly=t._poly=a._poly||sk(r,t),t._poly}},yk.options=function(t){var e=this.renderer.commonRendererProp().params,n=Za(this).commonOptions.call(this,t),a=(n.symbol,n._size||e.gvp("strokeWidth")),r=e.gvp("mode"),o=e.hoverOptions.fillOpacity||.2;return n.size={outer:.9*a,inner:.4*a},n.fillopacity=o,n.interpolation=r,n},yk.renderingContext=function(){return Jg.get("area").call(this,this.chart)},yk.path=function(t,e){t=t._data();var n,a=this.options(t),r=this.poly(t)(),o=this.chart.axes.rotated,i=e.context.call(this),l=this.renderer.commonRendererProp().params,s=this.renderer.layout[t.subSeriesIndex];if(s.context(pn),i.style("display","").attr("transform","translate(".concat(this.chart.plotarea.left,",").concat(this.chart.plotarea.top,")")),"linear"==a.interpolation){var d=E(r.points);(n=dc(i,"polygon",[r],".","class","highlight".concat(t.paneid).concat(t.seriesIndex))).attr("points",d.toString()).styles({"fill-opacity":a.fillopacity||.2,display:""})}else{var h=r.points,f=c(h,(function(t){return t[0]})),p=u(h,(function(t){return t[0]})),g=c(h,(function(t){return t[1]})),v=u(h,(function(t){return t[1]})),m=f,y=0,b=p-f,x=this.chart.plotarea.height;l.axisrotated&&(m=0,y=g,b=this.chart.plotarea.width,x=v-g);var C={name:"rect",id:this.chart.id,x:m+((o?0:this.chart.scrolledX)||0),y:y+((o?0:this.chart.scrolledY)||0),width:b,height:x},k={chartObj:this.chart},w=Hr.get(Hr.svg_clips,"rect",C,k);(n=dc(i,"path",[1],".","class","highlight".concat(t.paneid).concat(t.seriesIndex))).datum(this.renderer.seriesdataAfterUpdate[t.subSeriesIndex]).attr("d",s).attr("stroke","").attr("clip-path","url(".concat(this.chart.defsLocation,"#").concat(w,")")).styles({"fill-opacity":a.fillopacity,display:""})}return n},Ta(bk,rv),bk.prototype.options=function(t){var e=Za(this).options.call(this,t);return{options:e.options,color:e.color,symbol:e.symbol,size:{outer:.1*(t._size+Xa("2.5%",Xe(this.chart.plotarea.width,this.chart.plotarea.height))),inner:t._size/2*.1}}},Ta(xk,bk),xk.prototype.data=function(t){this.renderer.commonRendererProp().params;var e=this.chart,n=Za(this).data.call(this,t);return function(){var a=n(),r=e.dataset.getX(t),o=Hv.getKey(pn,pn,pn,[r,t[1]]),i=e.subrenderer[t.subSeriesIndex][o].data.map((function(t){var n=t.data;Ck(e,n.seriesIndex,n.subSeriesIndex,n)}));return a._angles=t._angles=i,a._visible=t._visible=Fl(e,t),a._uid=t._uid=e.dataset.getX(t),t}},Pe.bubblepie=function(){var t,e,n;function a(t){return t.each((function(t){var r=e.params,o=r.chartObj,i=r.datasetIndex,s=r.commonPlotOptions,c=r.axisrotated,u=r.stacked,d=r.xscale,h=r.yscale,f=r.yaxiscolumnorder,p=r.labelQueue,g=r.renderingOrderIndex,v=r.bound,m=r.rendererIndex,y=void 0===m?i:m,b=l(this),x=t[i],C={data:x,index:g},k=x.plotoptions;if(Ee.saveSeriesdataInRenderer(o,i,y),i===o.bubblePieRendererIndex){n=[],a.subrenderer=a.subrenderer||[],Ao(o)||(o.subrenderer=a.subrenderer);var w=fp(s,k,o,Oi).duration;e.params.hoverOptions=k&&k.hoverOptions?Rn(s.hoveroptions,k.hoveroptions,!0):s.hoveroptions;var _=a.subrenderer,S=Ao(o)?"".concat(x.row,"_").concat(x.column):"0_0",O=Ui(o,S,i),A=!qa(_e.nonaxis,O.value),T=A?Jn(s.dataindex,3):o.dataset.yidx(f),P=o.dataObject.processBubblePieData(t,{dataIndex:T}),E=-1;if(o.renderVisiblePointsOnly){var L=pi.helpers.filterPointsInViewport(o,P[0],"bubblepie","xy",i);P=[L]}var M=dc(b,"g",P?[C]:[],".","class","scatterseries");P&&P.forEach((function(t,a){_[a]=_[a]||{};var r=Hv.filterBySum(t,T);r=r.filter((function(t){var e=t.reference,n=o.dataObject.getXYvalue(c,u,d,h,f,e,"x"),a=o.dataObject.getXYvalue(c,u,d,h,f,e,"y");return!isNaN(n)&&!isNaN(a)})),Ao(o)&&r.forEach((function(t){t.row=x.row,t.column=x.column}));var i=dc(M,"g",[1],".","class","subseries_".concat(a));dc(i,"g",r,".","class",Ys(o)?"zc_nonaxis":"scatter",pn,(function(t){t.reference;return Hv.getKey(pn,pn,o,[t.x,t.y])})).each((function(t,r){var i=t.reference,s=Hv.getKey(pn,pn,o,[t.x,t.y]),p=o.dataObject.getXYvalue(c,u,d,h,f,i,"x")||0,g=o.dataObject.getXYvalue(c,u,d,h,f,i,"y")||0,m=A?o.dataObject.getXYvalue(c,u,d,h,f,i,"z",o.zscale):Xe(v.width,v.height,d.bandwidth?d.bandwidth():1),y=A?"pie":O.name,b=A?[p-m/2,g-m/2]:o.axes.rotated?[v.width/2-m/2,g-m/2-v.y]:[p-m/2-v.x,v.height/2-m/2];_[a][s]=(_[a][s]||Pe[y]()).commonRendererProp(e).plotarea({width:m,height:m,left:p-m/2,top:g-m/2,translate:b}),_[a][s].chartRendered=!1,_[a][s].subSeriesIndex=++E,n.push(_[a][s]),l(this).attr("transform","translate(".concat(b[0],",").concat(b[1],")")).call(_[a][s])}))})),a.getSymbolSize=function(t){return o.dataObject.getXYvalue(c,u,d,h,f,t,"z",o.zscale)},A&&(o.timerObj[o.timerObj.length]=a.renderedTimer=setTimeout((function(){a.chartRendered=!0;var t=o.seriesdata;t.forEach((function(e,n){var a=Ui(o,S,n).value;if(_e.bubblePie.has(a)){var r=o.renderer[n];p.push({renderer:r,charttype:ki,chartObj:o,args:[e,n],paneid:S}),p.push({renderer:r,charttype:"pieInnerLabels",chartObj:o,args:[t,n,P],paneid:S})}}))}),w))}else a.chartRendered=!0})),a}return a.getHighlighter=function(t,e){return a.highlighter||(a.highlighter=new bk(t,a)),a.highlighter},a.commonRendererProp=function(t){return arguments.length?(e=t,a):e},a.shiftInfo=function(e){return arguments.length?(t=e,a):t},a.endFunctions=function(){n.every((function(t){return t.chartRendered}))&&(a.chartRendered=!0)},a.destroy=function(){n&&n.forEach((function(t){return t.destroy&&t.destroy()}))},a};var wk={};wk.getSeriesIndex=function(t){return t.seriesIndex},wk.getItemIndex=function(t){return t.itemIndex},wk.getDy=function(t){return wk.isMultiLine(t)?.9:.35},wk.isMultiLine=function(t){return(t.nodeList?t.nodeList.format:t.format).multiLine},wk.getBoundBoxSize=function(t,e,n,a,r){var o=Md(e,a),i=(Jn(n.padding,2)+Rd(e,a))/2,l=r.output.scaleFactor,s=r.isScalable?1:l;return{x:t.x*s-t.width/2*s+i,y:t.y*s-t.height/2*s+i+(wk.isMultiLine(t)?t.size*s*wk.getDy(t)-t.height/2*s:0),width:t.width*s-2*i,height:t.height*s-2*i,r:a.dataObject.getTransRectValue("radius",pn,pn,pn,pn,o.radius)}},wk.getContainerTransformation=function(t,e){var n=t.output.scaleFactor;return{translate:[e.x-e.width*(n-1)/2,e.y-e.height*(n-1)/2],scale:t.isScalable?n:1}},wk.hasBoundBox=function(t){var e=Gn(t,"layout.nodeList.innerSVG",!0);return t.layout.size&&!(Xn(e)||""===e)};var _k=L(),Sk=[FC,QC,GC,XC,ZC,NC,WC,VC,YC,UC,$C],Ok=["POLY_TYPES","PATH_TYPES","BISECT_NORM_TYPES","BISECT_LEVEL_TYPES","BISECT_SEGMENT_TYPES","QUADTREE_NORM_TYPES","QUADTREE_SIZE_TYPES","QUADTREE_PIE_TYPES","QUADTREE_BOUND_TYPES","QUADTREE_TEXT_TYPES","SEGMENT_TYPES"];function Ak(t){ek.call(this,t)}function Tk(t,e,n,a){var r,o=t.keys(),i={},l=[];o.map((function(r){var o,s,c=t.get(r),u=c.superKey||r,d=a.isBisectMode(r,n),h=qn(c,(function(t){return!t.disabled()}),a.spliceIndices()),f=JC(u,d),p=function(t,e,n,a,r){var o,i,l=r.chart.cache.search,s=l.lastPane;if("QUADTREE"==a){var c=t[0]instanceof Array?E(t):t,u=r.radius(e),d=r.sizeOffset(e),h=r.extent(),f=r.size(e);n=r.toArray(n),o=(i=l["".concat(s,"_").concat(e,"_").concat(a)]||new ev(c,f,u,h,d)).find(n)}else if("POLY"==a){var p=E(t);o=(i=l["".concat(s,"_").concat(e,"_").concat(a)]||new ek(p)).find(n)}else if("PATH"===a){var g=E(t);o=(i=l["".concat(s,"_").concat(e,"_").concat(a)]||new Ak(g)).find(n)}else{var v=r.bisectMode(),m=r.median();o=(i=l["".concat(s,"_").concat(e,"_").concat(a)]||new ak(t,v)).find(m,n)}return l["".concat(s,"_").concat(e,"_").concat(a)]=i,o}(h,r,e,f,a);if(p){l=l.concat(p);var g=(o=u,Sk.some((function(t,e){if(t.has(o))return s=_k.get(Ok[e]),!0})),s),v=g(p,e,a.chart,r),m=JC(u,!1);v&&(ua(v)&&v.length||sa(v))&&(i[m]?i[m].push(v):i[m]=[v])}}));var s=function(t,e,n){var a=[];for(var r in t){var o=t[r];if(o.length>1){var i=_k.get("".concat(r,"_TYPES")),l=tk(r),s=i(o,e,n.chart,l,!0);a.push(s)}else a.push(o[0])}return a}(i,e,a),c=function(t,e){if(t&&1==t.length)return t[0];var n,a={QUADTREE:function(){return 0},BISECT:function(){return 1},POLY:function(){return 2},BISECT_QUADTREE:function(t){return e.hasSelection(t,"BISECT_QUADTREE")?1:3}},r=function(t,e){return Hl(e.chart)?"POINT":"SEARCH_MODE"}(0,e);return"SEARCH_MODE"===r?n=t.sort((function(t,n){if(t&&(ua(t)&&t.length||sa(t))){var r=JC(Pk(t,e)),o=JC(Pk(n,e));return a[r](t)-a[o](n)}})):"POINT"===r&&(n=t.sort((function(t,e){return t._getRank()-e._getRank()}))),n[0]}(s,a);c&&(c=a.pointLiesInsidePlot(c)?c:null),c&&a.hasDependantPoints()&&(r=function(t,e){var n,a=function(t){if(KC.has(t))return"FLOW"}(Pk(t,e)),r=t.seriesIndex,o=e.chart.renderer[r];"FLOW"===a&&(n=o.highlighter.getDependentLayoutPoints(t,!0).map((function(t){return t.point})));return n}(c,a));var u={nearest:c,nearby:l,dependents:r},d=a.userSelection;return d&&(u=$n(d,u,a.chart)||u),u}function Pk(t,e){var n=t.seriesIndex;return t.type||t.searchKey||e.chart.chartTypes[n].name}function Ek(t){var e=this.chart,n=this.eventManager,a=n.selectionManager;if(!0!==e.eventHandler.mouseOnTooltip&&e.chartRendered){n.eventType="mouseout",n.targetEvent=e.eventHandler.targetEvent=jt()||e.eventHandler.targetEvent;this.isSingleSource();t&&t.constructor===Object||t&&t.constructor===Array||(t=a.oldSelectionSet[0]||a.selectionSet[0]),t=this.toNewObject(t),n.selectionManager.remove(),n.associateBehaviours("mouseout",t)}}function Lk(t){var e=this.chart,n=this.eventManager;if(e.zooming||e.brushing)return!1;if(e.chartRendered){this.clearOldActions();var a=Ar.isTouchDevice&&e.isAxisCategory&&e.systemConf.chart.brush.enabled;!1===e.stopPropogate||a||jt().stopPropagation(),n.eventType=e.zcEventType||"mousemove",n.targetEvent=e.eventHandler.targetEvent=jt();var r=this.isSingleSource(),o=this.getSourceNode(),i=this.getRelativeMousePosition(o,r),l=t.constructor===Object||t.constructor===Array||!r;if(t=r||t.constructor===Object?t:n.selectionManager.nearest,l&&(t=this.toNewObject(t)),!l)if(!(t=n.getData("mousemove",i)).selectionSet.length)return void e.eventHandler.handlers.mouseout.call(this);var s=e.BASE_HELPER_CONTAINER.node(),c=e.eventHandler.targetEvent.currentTarget.parentElement,u=this.chart.systemConf.tooltip.focusOnTooltipEvent;if(c===s&&u)return;n.associateBehaviours(n.eventType,t,i)}}_k.set("POLY_TYPES",vk),_k.set("PATH_TYPES",vk),_k.set("BISECT_NORM_TYPES",ik),_k.set("BISECT_LEVEL_TYPES",(function(t,e,n){var a=ik(t.map((function(t,e){return n.renderer[t.seriesIndex].highlighter.box(t)})),e,n);if(!a)return pn;var r=a._point,o=n.renderer[r.seriesIndex].highlighter.levels(r);if(!o)return a._point;var i=ik(o,e,n);return i._point.subtype=i.type,i._point})),_k.set("BISECT_SEGMENT_TYPES",(function(t,e,n){var a=ik(t,e,n),r=ik(t.map((function(t,e){return n.renderer[t.seriesIndex].highlighter.box(t)})),e,n);if(!r)return pn;var o=hk([r._point],e,n,"bar_segment"),i=o||a;if(!i)return null;var l=i&&i._type;return o?o._type="segment":a&&(a._type=""),i._type!==l&&(i.selected=null),o||a})),_k.set("QUADTREE_NORM_TYPES",nv),_k.set("QUADTREE_SIZE_TYPES",av),_k.set("QUADTREE_PIE_TYPES",kk),_k.set("QUADTREE_BOUND_TYPES",(function(t,e,n,a){if(t)return ik(t,e)})),_k.set("QUADTREE_TEXT_TYPES",(function(t,e,n,a){if(t&&t.length){var r=_objectSpread({},e),o=n.renderer[Yv(t[0],n)],i=o.layout,l=o.commonRendererProp().bound(),s=i.output.scaleFactor,c=i.dimension,u=wk.getContainerTransformation(i,c);if(r.x-=u.translate[0],r.y-=u.translate[1],r.x-=l.x,r.y-=l.y,(t=t.filter((function(t){var e=t.layout,n=e.x*s,a=e.y*s,o=e.width*s,i=e.height*s,l={x:n-o/2,y:a-i/2,width:o,height:i},c=vl.rotatePoint(r,e.rotation,{x:n,y:a});return vl.pointInRectangle(e.rotation%on?c:r,l)}))).length<=1)return t[0];if((t=t.filter((function(t){var e=t.layout,n=e.tightBound,a=e.x*s,o=e.y*s,i=n.width*s,l=n.height*s,c={x:a-(e.width*s/2-n.x*s),y:o-(e.height*s/2-n.y*s),width:i,height:l},u=e.x*s,d=e.y*s,h=vl.rotatePoint(r,e.rotation,{x:u,y:d});return vl.pointInRectangle(e.rotation%on?h:r,c)}))).length<=1)return t[0];var d=null;return t.some((function(t){var e=t.layout,n=e.x*s,a=e.y*s,o=e.width*s,i=e.height*s;e.scaledPolygon||(e.scaledPolygon=e.polygon.map((function(t){return[n-o/2+t[0]*s,a-i/2+t[1]*s]})));var l=e.scaledPolygon.some((function(t){return Ze(t[0]-parseInt(r.x))<=5&&Ze(t[1]-parseInt(r.y))<=5}));return l&&(d=t),l})),d?d:(t=t.sort((function(t,e){return B(t.layout.size,e.layout.size)})))[0]}})),_k.set("QUADTREE_TYPES",kk),_k.set("SEGMENT_TYPES",hk),Ta(Ak,ek),Ak.prototype.getPoly=function(t){return t._setPolygonType("path"),Za(this).getPoly(t)};var Mk=l(document.documentElement),Dk=function(t,e){t&&Ar.isTouchDevice&&t.dataObject.pivot&&t.cache.search.lastPane&&(!(t.dataObject.isAxisCategory||t.dataObject.isNonAxisMultiSeriesCategory)&&e&&e.paneid&&e.paneid!==t.cache.search.lastPane&&(wr.clickArguments=[],Ik(t)));Ar.isTouchDevice&&(!t&&wr.clickArguments&&wr.previousChartObj||wr.previousChartObj&&wr.previousChartObj!=t)&&wr.previousChartObj&&!wr.previousChartObj.destroying&&Ik(wr.previousChartObj)};function Ik(t){if(Va(t.container.node())){wr.clickArguments[4]=!0;var e=t.systemConf.tooltip,n=e.hideDelay;e.hideDelay=0;var a=!(t.dataObject.isAxisCategory||t.dataObject.isNonAxisMultiSeriesCategory);t.dataObject.pivot&&a&&(t.eventHandler.eventManager.selectionManager.oldSelectionSet=[]),t.eventHandler.tapOldInfo=null,t.eventHandler.handlers.mouseout.call(t.eventHandler),e.hideDelay=n}}var Rk=Dk;if(Ar.isTouchDevice){var zk=function(){var t=(new Date).getTime();(!wr.clickedTime||t-wr.clickedTime>500)&&Dk(jt().target.__chart)};Iu(Mk,{},{tap:zk,taphold:zk,dbltap:zk},{preventDefault:!1}),Mk.on("touchmove",(function(){Dk(jt().target.__chart)}))}function jk(t){var e=this.chart,n=this.eventManager;if(e.chartRendered){e.seriesdata;var a=jt()&&jt().touches,r=e.zcEventType||"click";a&&"taphold"!==r&&Fk(r,e,t),n.eventType=r,n.targetEvent=e.eventHandler.targetEvent=jt();var o=this.isSingleSource(),i=this.getSourceNode(),l=this.getRelativeMousePosition(i,o),s=t.constructor===Object||t.constructor===Array||!o;if(o||(t=this.toNewObject(t)),!s)if(!(t=n.getData("click",l)).nearest)return void e.eventHandler.handlers.mouseout.call(this);n.associateBehaviours(r,t,l)}}function Fk(t,e,n){"taphold"!=t&&(Rk(e,n),wr.clickedTime=(new Date).getTime(),wr.clickedElement=jt()&&jt().target,wr.clickArguments=[],wr.previousChartObj=e)}function Bk(t){var e=this.chart,n=this.eventManager;if(e.chartRendered){var a=Ar.isTouchDevice&&e.isAxisCategory&&e.systemConf.chart.brush.enabled;if(!1===e.stopPropogate||a||jt().stopPropagation(),jt()&&jt().touches)e.eventHandler.handlers.mouseout.call(this);n.eventType=e.zcEventType||"doubleclick",n.targetEvent=e.eventHandler.targetEvent=jt();var r=this.isSingleSource(),o=this.getSourceNode(),i=this.getRelativeMousePosition(o,r),l=t.constructor===Object||t.constructor===Array||!r;if(r||(t=this.toNewObject(t)),!l)if(!(t=n.getData("doubleclick",i)).nearest)return void e.eventHandler.handlers.mouseout.call(this);n.associateBehaviours(n.eventType,t,i)}}var Hk={mousemove:Lk,mouseout:Ek,click:jk,doubleclick:Bk,contextmenu:function(t){var e=this.chart,n=this.eventManager;if(e.chartRendered){e.eventHandler.targetEvent=jt();var a=this.isSingleSource(),r=this.getSourceNode(),o=this.getRelativeMousePosition(r,a);t=n.selectionManager,n.associateBehaviours("contextmenu",t,o)}},tap:jk,dbltap:Bk,singletouchmove:Lk,touchend:Ek},Nk=function(t){this.chartObj=t,this.elements="svg"===t.plot.renderer.mode?t.container.selectAll("g.seriesholder, g.qualitativeGroupHolder"):l(t.context.canvas),this.backupStyles=pn,this.previousPoint=pn};function Wk(t,e){return["parent","children"].indexOf(t)>-1?Oe:e}function Vk(t,e,n,a,r){var o;if(!e)return{callback:t};if("threshold-marker"===e.type){var i="x"===e.thresholdType?"x":"y.groups[".concat(e.yColumnIndex,"]");o=fa(r.axes,"".concat(i,".threshold.line")).getMetaInfo(e)}else o=r.chartTypes[0].name===ji&&"node"===e._type?{point:e,seriesIndex:e.seriesIndex,subSeriesIndex:e.subSeriesIndex,data:r.dataset.getMetaInfoObj(r,e,e.seriesIndex)}:"legend"===e.type?{data:e.data,index:e.i}:function(t,e){var n,a=e.currentQualitativeRangePoint,r=wa(e.point,e.data)||{},o=wa(e.level,r&&r.level);n=na(o)?Yk(o):{seriesIndex:wa(e.seriesIndex,r.seriesIndex),subSeriesIndex:wa(e.subSeriesIndex,e.subSeriesIndex,r.subSeriesIndex),itemIndex:wa(e.itemIndex,r.itemIndex)};ua(e.subseriesindex)&&e.subseriesindex.some((function(t){if(na(t))return n.subSeriesIndex=t}));na(a)&&(n.rangeIndex=a.rangeIndex,n.targetIndex=a.targetIndex);na(n.seriesIndex)&&na(n.itemIndex)&&(na(r)&&ua(r.data)&&(r=r.data),ua(r)||(n.subSeriesIndex=wa(n.subSeriesIndex,0),na((r=e).level)&&(n.levelIndices=Yk(r.level).levelIndices)),n.data=t.dataset.getMetaInfoObj(t,r,n.seriesIndex));return n.point=r,n}(r,e);return na(a)&&"object"===_typeof(a)&&(o=Rn(o,a,!0,!0)),{args:o,callback:t}}function Yk(t){return{levelIndices:(t=t.split("_")).map(Number),seriesIndex:+t[0],itemIndex:+t[t.length-1]}}Nk.prototype.highlight=function(t){var e=this.chartObj,n=e.dataObject.isHierarchy?Wk:pn,a=e.systemConf.legend.highlightEffect.applyUnselectedSeriesToPlot,r=this.previousPoint;if(a&&t&&(!r||ha(r.data,n)!=ha(t.data,n)||r.seriesPos!=t.seriesPos||r.itemPos!=t.itemPos||ha(r.subseriesindex)!=ha(t.subseriesindex))){var o=this.elements,i=e.legendHighlight.getLegendHighlightEffect(0,"unselectedSeries","plot",t.paneid),l=e.legendHighlight.getEffect(i,pn,pn,pn,0,"plot");this.getBackup(l),o.styles(l),this.previousPoint=t}},Nk.prototype.reset=function(){var t=this.backupStyles;t&&(this.elements.styles(t),this.backupStyles=pn,this.previousPoint=pn)},Nk.prototype.getBackup=function(t){var e=this.elements,n=this.backupStyles;if(!n){for(var a in n={},t)t.hasOwnProperty(a)&&(n[a]=e.style(a));this.backupStyles=n}};var Uk=function(){function t(e,n){_classCallCheck(this,t),this.chart=e,this.tracker=n,this.rotated=e.axes.rotated,this.isAxisCategory=e.isAxisCategory,this.isGeoMap=e.isGeoMap,this.isPolarAxisCategory=e.dataObject.isPolarAxisCategory,this.isFlowChartCategory=e.dataObject.isFlowChartCategory}return _createClass(t,[{key:"init",value:function(){this.eventManager=new RC(this.chart),this.reverseLegendHighlight=new fm(this.chart),this.unselectedHighlight=new Nk(this.chart),this.eventManager.bindTo(this.tracker),this.eventManager.init(),this.chart.isGeoMap||(this.addListeners(this.tracker),this.eventManager.dataFinder({mousemove:t.findData,click:t.findData,doubleclick:t.findData}),this.eventManager.defaultBehaviour=DC(),this.eventManager.customBehaviour=t.getCustomBehaviour,this.eventManager.getBehaviourName=t.getBehaviourName,Vt.customPoints&&(this.CustomPoints=new Vt.customPoints(this.chart),this.CustomPoints.addPoints(this.chart.cache.thresholdCustomPoints,!0)))}},{key:"update",value:function(){this.rotated=this.chart.axes.rotated,this.isAxisCategory=this.chart.isAxisCategory,this.isGeoMap=this.chart.isGeoMap,this.isPolarAxisCategory=this.chart.dataObject.isPolarAxisCategory,this.isFlowChartCategory=this.chart.dataObject.isFlowChartCategory,this.tooltipElement.initialize(),this.bulletEvents=null,this.CustomPoints&&this.CustomPoints.addPoints(this.chart.cache.thresholdCustomPoints,!0)}},{key:"isSingleSource",value:function(){var t=jt(),e=this.chart;if(t&&!this.isGeoMap&&e.dataObject.isCombinationalChart&&Ao(e)){if(e.divScroll){var n=Lu(e.eventHandler.trackerElement.node(),t),a=e.eventHandler.dataAccesor({x:n[0],y:n[1]}),r=Ui(e,a.paneId(),0);return!qa(_e.nonAxisSingleSourceEvent,r)}var o=t.target,i=e.eventHandler.trackerElement.node(),l=e.svg.selectAll("g.seriesholder").node();if(o===i||l.contains(o))return o===i;var s=e.eventHandler.eventManager.selectionManager.nearest,c=s&&ua(s);if(s&&(c&&s.length||!c))return c}return this.isAxisCategory||this.isPolarAxisCategory||this.isFlowChartCategory||this.isGeoMap||e.dataObject.singleSourceEvent}},{key:"clearOldActions",value:function(){var t=this.chart.eventHandler.tooltipElement;null!=t&&null!=t.timeout&&clearTimeout(t.timeout)}},{key:"getSourceNode",value:function(){return this.isSingleSource()?this.chart.eventHandler.trackerElement.node():this.chart.svg.node()}},{key:"getRelativeMousePosition",value:function(t,e){var n=Lu(t,jt());if(e){var a=Bn(t);n[0]-=a.x,n[1]-=a.y,this.isPolarAxisCategory&&(n[0]-=this.chart.plotarea_approx.x,n[1]-=this.chart.plotarea_approx.y)}return this.chart.eventHandler.mousePos=n,{x:n[0],y:n[1]}}},{key:"toNewObject",value:function(t){var e={nearest:t};return this.eventManager.updateSelectionManager(e),this.eventManager.selectionManager}},{key:"addListeners",value:function(t,e){var n=this,a=this,r=this.handlers=this.handlers||Hk,o={click:function(t){r.click.call(a,t)},dblclick:function(t){r.doubleclick.call(a,t)},contextmenu:function(t){r.contextmenu.call(a,t)}},i={mousemove:function(t){r.mousemove.call(a,t)},mouseout:function(t){r.mouseout.call(a,t)}},l={tap:function(t){r.click.call(a,t)},dbltap:function(t){r.doubleclick.call(a,t)},singletouchmove:function(t){r.mousemove.call(a,t)},touchend:function(t){r.mouseout.call(a,t)}},s={target:"plot",chartObj:this.chart};if("tooltip"==e?this.eventManager.attachListeners(t,i,null,s):(this.eventManager.attachListeners(t,i,null,s,"chart"),this.eventManager.attachListeners(t,o,null,s,"chartmove"),this.eventManager.attachListeners(t,{},l,s)),nx){var c=Object.keys(nx),u=wn.getComponent("CustomGesture");c.map((function(e){u.call(n,e,t,"plot")}))}}},{key:"removeTracker",value:function(){var t=this.trackerElement;t.attr("transform",null),t.attr("width",null),t.attr("height",null),t.attr("style",null).attr("cursor",null)}},{key:"dataAccesor",value:function(t){var e=this.chart,n=this.chart.dataObject.noofBarEnabledSeries>0,a=yl.hasSharedSeries(e),r=(e.cache.search.bisect=n||a,{chart:e,parseKey:function(t){if(e.cache.thresholdCustomPoints&&-1!==t.indexOf("threshold"))return"threshold"},bestChartType:function(t){return"threshold"==t||"segment"==t?"scatter":t},radius:function(t){if(qa(_e.nonAxisSingleSourceEvent,Gt[t]))return Ge(e.plotarea.width,e.plotarea.height);if(e.cache.thresholdCustomPoints&&-1!==t.indexOf("threshold")&&e.cache.thresholdCustomPoints[t])return e.cache.thresholdCustomPoints[t].triggerOffset;if(t==Kv)return e.dataObject.flattenPoints.get("pane0_0").get(t).size;var n,a=("line"==(t="threshold"==t||"segment"==t?"scatter":t)||"scatter"==t?1==e.dataObject.markerSize[t].size():null)&&parseInt(e.dataObject.markerSize[t].values()[0])||0;return"bar_segment"==t&&(t="scatter",n="segment",a=.5),wa(jl(e,Gt[t],null,n),10)+a/2},sizeOffset:function(t){if(qa(_e.nonAxisSingleSourceEvent,Gt[t]))return 0;t="threshold"==t?"scatter":t;var n=e.systemConf.chart.plot.plotoptions[t];return n&&n.events&&n.events.triggerOffset||10},extent:function(){return[e.plotarea.width,e.plotarea.height]},size:function(t){var n="line"==t||"scatter"==t?e.dataObject.markerSize[t].size()>1:null;return e.dataObject.isBubbleEnabled||n||"segment"==t||t==Kv||qa(_e.nonAxisSingleSourceEvent,Gt[t])},toArray:function(t){var e=Bl(this.rotated);return[t[e[0]],t[e[1]]]},bisectMode:function(){var t=e.dataset.getDataType("x");return e.dataObject.noofBarEnabledSeries||t==To?"discrete":"continous"},median:function(){var n,r;e.dataObject.pivot&&(n=e.dataObject.hierarchical.pivotLayout.getRootNodeList("column").getLeavesCount()>1,r=e.cache.search.lastPane.split("_")[1]);var o=e.systemConf.chart.axes.xaxis.reversed,i=e.dataObject.noofBarEnabledSeries&&!e.dataObject.noofAreaEnabledSeries&&a,l=n?e.axes.x.leaves[r].scale:e.axes.x.scale,s=this.chart.dataset.getDataType("x"),c=Wt.invert(s,t,l,e.axes.rotated,null,o,i,null,e);return c=s==To?l.domain()[c]:c,c},spliceIndices:function(){return[]},paneIndex:function(t,n){return e.dataObject.pivot?e.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes["".concat(t,"_").concat(n)].index:0},paneId:function(){return function(t,e){var n=t.dataObject.isPolarAxisCategory;if(t.dataObject.pivot){t.dataObject.isPolarAxisCategory&&(e.x+=t.plotarea_approx.x,e.y+=t.plotarea_approx.y);var a,r,o=t.dataObject.hierarchical.pivotLayout,i=o.getRootNodeList("row"),l=o.getRootNodeList("column");if(i.hasMultiCluster()){var s=t.axes.y.leaves,c=i.leafSize,u=0,d=t.axes.rotated,h=!n&&t.axes.rotated,f=s.map((function(t,e){var a=n?[u,u+c]:t.scale.range(),r=!!n||t.reversed;return u+=c,a[n||h&&r?0:1]}));a=xh(e,f,"y",d,!d,p=h?"<":">")}else if(i.count){f=t.axes.y.branches[0].scale.ordinalRange;var p=(t.axes.rotated,">");a=xh(e,f,"y",t.axes.rotated,!t.axes.rotated,p)}if(l.count){var g=t.axes.x.levels[0].scale.ordinalRange,v=t.axes.x.reversed;p=t.axes.rotated&&!v?"<":">",r=xh(e,g,"x",t.axes.rotated,v,p)}return t.dataObject.isPolarAxisCategory&&(e.x-=t.plotarea_approx.x,e.y-=t.plotarea_approx.y),"".concat(a||0,"_").concat(r||0)}return"0_0"}(e,t)},hasDependantPoints:function(){return Hl(e)},pointLiesInsidePlot:function(t){var n=t.seriesIndex,a=Ui(e,t.paneid,n).value;return!!(Cl(a)||Vi(a)||e.dataObject.isPolarAxisCategory||e.dataObject.isFlowChartCategory)||function(t,e){var n=e.plotarea.left+(e.scrolledX||0),a=e.plotarea.top+(e.scrolledY||0),r=n+e.plotarea.width,o=a+e.plotarea.height,i=t._x+e.plotarea.left,l=t._y+e.plotarea.top;return n<=i&&i<=r&&a<=l&&l<=o?1:null}(t,e)},userSelection:a&&e.systemConf.tooltip.sharedSeriesInfo.selection,isBisectMode:function(t,e){return!!e&&t!=Kv},hasSelection:function(e,n){if("BISECT_QUADTREE"==n)return function(t,e){var n=lk(t),a=Mu(e,{x:t._x,y:t._y,rotation:t._rotation});return zl(a.x,a.y,n)}(e,t)}});return r}},{key:"getPointType",value:function(t){t.seriesIndex;return t.type||"series"}},{key:"eventDisabled",value:function(t){var e=t.plotoptions,n=pi.helpers.getChartType(t.type||this.chart.userdata.seriesdata.type,"string"),a=this.chart.systemConf.chart.plot.plotoptions[n];return t.disabled||0==Jn(bl(e,a,this.chart,"enabled"),!0)}}],[{key:"findData",value:function(t){var e=this.chart,n=this.chart.dataObject.noofBarEnabledSeries>0,a=yl.hasSharedSeries(e),r=e.cache.search.bisect=n||a,o=e.eventHandler.dataAccesor(t),i="pane".concat(o.paneId()),l=e.dataObject.flattenPoints.get(i);e.cache.search.lastPane=i;var s=Ao(e)&&e.dataObject.hierarchical&&e.dataObject.hierarchical.gridOptions[i.replace("pane","")].chartTypes;s&&qa(_e.nonAxisSingleSourceEvent,s[0].value)&&(r=s.some((function(t){return Cl(t.value)})));var c=Tk(l,t,r,o);return{nearby:a?c.nearby:null,nearest:c.nearest,dependents:c.dependents,surround:c.nearby}}},{key:"getCustomBehaviour",value:function(t,e){var n,a,r=this.chart,o=this.targetEvent,i=t.nearest||t.selectionSet[0]||t.oldSelectionSet[0],l=[];if(i||"contextmenu"===e||"mouseout"==e){if("contextmenu"==e||!i&&"mouseout"==e)n=r.systemConf.chart.plot.events[e];else{var s=i.seriesIndex,c=Ui(r,i.paneid,s),u=i.type||c.name;if("zc-marker"===u)p={events:Gn(r.cache,"parser.".concat([i.__key],".parser.event"),!0)||{}};else if("threshold-marker"==u||"levelMarker"==u||"marker"==u)p=i;else if("segment"==i._type)p=r.systemConf.chart.plot.plotoptions[c.name].whiskers;else{var d=pi.helpers.getSeriesdata(r,i.paneid,i.seriesIndex),h=(i.seriesIndex,c.name),f=d.plotoptions,p=r.systemConf.chart.plot.plotoptions[h];r.zcEventType||r.eventHandler.targetEvent}n=bl(f,p,r,e),a={x:i._x,y:i._y}}return n?"cursor"==e?n:(l.push({action:Vk(n,i,xl(o),a,r),type:"custom"}),l):null}}},{key:"getBehaviourName",value:function(t){var e=this.chart;return t&&Gn(e.cache,"parser.".concat([t.__key],".parser.event.behaviour"),!0)}}]),t}();function Gk(t,e,n){if(!(this instanceof Gk))return new Gk(e);e=wa(e,[]),n&&(e=Gk.toCircle(e)),this.chart=t,this.points=Gk.addType(e)}function Xk(t,e,n){var a=Zk(n);e.dataObject.pivot&&t.attr("levelbycolumn",(function(t){return a(t).levelByColumn})).attr("levelbyrow",(function(t){return a(t).levelByRow}))}function Zk(t,e){return t===Di||t===Ii||t===Ri?qk:t===Ai?function(t){return t.data}:t===bi||t===Ci?function(t){return t[0]&&t[0]}:"label"==t?e?function(t,e){return t[t.length-1-e]}:function(t){return t.data||t}:function(t){return t}}function qk(t){return t.children?qk(t.children[0]):t.data}function $k(t,e,n,a){e.dataObject.hierarchical&&e.cache.hierarchical&&t.style("opacity",(function(t,r){var o=Kk(t,r,e,n,a);return l(this).attr("filtered-opacity",o),o}))}function Qk(t,e,n,a){if(n.dataObject.hierarchical&&n.cache.hierarchical)return Kk(t,e,n,a)}function Kk(t,e,n,a,r){var o=Zk(a,r),i=n.cache.hierarchical,l=i.row,s=i.column,c=!0,u=!0,d=o(r||t,e);if(l&&l.active){var h=l.query;c=!na(d.levelByRow)||d.levelByRow.startsWith(h)}if(s&&s.active){h=s.query;u=!na(d.levelByColumn)||d.levelByColumn.startsWith(h)}var f=Xb.get(a),p=f&&f[1]||"opacity",g=n.systemConf.chart.plot.plotoptions[a]?n.systemConf.chart.plot.plotoptions[a][p]:1;return c&&u?g:.1}function Jk(t,e,n,a){var r=this,o=this,i=new Array(0);return n.map((function(n){var l=e[n];if(!l)throw"Mark operator is not defined";var s,c=!l.condition||l.condition.call(o),u=a&&a[n],d=l.holder?l.holder.call(o):null;s=u&&u.parser?$n(u.parser,r,t,"render",c):l.operator.call(r,t,"render",c),u&&u.extender&&(s=$n(u.extender,r,s)),i.push({mark:s,holder:d})})),i}function tw(){var t="label",e=this,n=e.chart,a=e.properties,r=e.dataLevelFontColor,o=(e.dataLevelStrokeColor,e.subSeries);e.helpers.styles[t]={fill:function(t,e){if(this.ctype===Gt.waterfall&&void 0!==dataLabels.fontColor&&dataLabels.fontColor==pn){var n=Bi.getWaterfallColor(t,a.rp.categoryColorConfig);if(n)return n}return r&&r(t,e)},display:function(t,e){return!1===o[e].display?dn:null},opacity:function(t,a){if(n.dataObject.hierarchical&&n.cache.hierarchical)return Kk(t,a,n,"label",e.actualData)},"stroke-width":function(t,n,a){if(a)return e.properties.dataLabels.strokeWidth},"filtered-opacity":function(t,a){if(n.dataObject.hierarchical&&n.cache.hierarchical)return Kk(t,a,n,"label",e.actualData)},dy:function(t,e){return o[e].DY},"text-anchor":function(t,e){return o[e].ANCHOR},id:function(t,e){return o[e].ID},"clip-path":function(t,e){var a=Bn(this),r={name:"textClip",id:n.id,x:a.x,y:a.y,width:o[e].width,height:a.height},i=Hr.get(Hr.svg_clips,"rect",r,{chart:n});return"url(".concat(n.defsLocation,"#").concat(i,")")},levelbycolumn:function(t,n){var a=e.actualData?e.actualData[e.actualData.length-1-n]:t.data||t;if(a.levelByColumn)return a.levelByColumn},levelbyrow:function(t,n){var a=e.actualData?e.actualData[e.actualData.length-1-n]:t.data||t;if(a.levelByRow)return a.levelByRow},stroke:function(t){var n=e.properties.dataLabels.strokeColor;if(t)return"contrast"===n?function(t,n){return ma(r?r(t,n):e.datalabelOptions.fill)}:e.dataLevelStrokeColor}},e.helpers.text[t]=function(t,e){return o[e].text}}function ew(){var t=this,e="label",n=this,a=n.subSeries,r=n.chart,o=n.properties,i=o.rotation;n.helpers.position[e]={},n.helpers.position[e].start={},n.helpers.position[e].stop_1={},n.helpers.position[e].end={};var l=n.properties.isMultiLine&&n.animate||n.animate;n.helpers.position[e].start.transform=function(t,e){var n="",i=a[e],s=o.rotation,c=i.xy||[i.X,i.Y],u=r.plotarea.height;return c=r.axes.rotated?i.xy&&[0,i.xy[1]]||[0,i.Y]:i.xy&&[i.xy[0],u]||[i.X,u],i.xy&&(n="translate(".concat(c,")")),l?n=na(s)?"translate(".concat(c,") rotate(").concat(s,")"):"translate(".concat(c,")"):na(s)&&(n+="rotate(".concat(s," ").concat(c,")")),n||pn},n.helpers.position[e].start.x=function(t,e){var n=a[e];return l||r.axes.rotated?0:n.xy&&n.xy[0]||n.X},n.helpers.position[e].start.y=function(t,e){var n=a[e];return l?0:r.axes.rotated?n.xy&&n.xy[1]||n.Y:r.plotarea.height},n.helpers.position[e].end.transform=function(t,e){var n,r="",i=o.rotation,s=a[e],c=s.xy||[s.X,s.Y];return na(i)&&(i=(n=360-i)<i?i>0?-n:n:i),s.xy&&(r="translate(".concat(c,")")),l?r=na(i)?"translate(".concat(c,") rotate(").concat(i,")"):"translate(".concat(c,")"):na(i)&&(r+="rotate(".concat(i," ").concat(c,")")),r||pn},n.helpers.position[e].end.x=function(t,e){var n=a[e];o.rotation;return l?0:n.X},n.helpers.position[e].end.y=function(t,e){var n=a[e];o.rotation;return l?0:n.Y},n.helpers.position[e].end.translateXY=function(t,e){return a[e]._translate||pn},n.helpers.position[e].stop_1.transform=function(t,e,n){var o=a[e],s="",c=$ZC.get("domUtils.getSvgTransform")(n),u=o.xy||[o.X,o.Y],d=c.rotate;if(r.axes.rotated){var h=Number(n.getAttribute("x"))||c.translate[0];o.xy&&(s="translate(".concat([h,u[1]],")")),l?s=na(i)?"translate(".concat([h,u[1]],") rotate(").concat(i,")"):"translate(".concat([h,u[1]],")"):na(d)&&(s+="rotate(".concat(d," ").concat([h,u[1]],")"))}else{var f=Number(n.getAttribute("y"))||c.translate[1];o.xy&&(s="translate(".concat([u[0],f],")")),l?s=na(i)?"translate(".concat([u[0],f],") rotate(").concat(i,")"):"translate(".concat([u[0],f],")"):na(d)&&(s+="rotate(".concat(d," ").concat([u[0],f],")"))}return s||pn},n.helpers.position[e].stop_1.x=function(e,n,r){var o=a[n].X;$ZC.get("domUtils.getSvgTransform")(r).rotate;return l?0:t.chart.axes.rotated?r.getAttribute("x"):o},n.helpers.position[e].stop_1.y=function(e,n,r){var o=a[n].Y;$ZC.get("domUtils.getSvgTransform")(r).rotate;return l?0:t.chart.axes.rotated?o:r.getAttribute("y")},n.helpers.position[e].dy=function(t,e){return a[e].DY}}function nw(){var t=this,e="racingLabel",n=this,a=n.subSeries,r=n.chart,o=n.properties;n.helpers.position[e]={},n.helpers.position[e].start={},n.helpers.position[e].exit={},n.helpers.position[e].end={},n.helpers.position[e].end.transform=function(t,e,r){var i,l=a[e],s=l.xy||[l.X,l.Y],c=o.rotation,u="";if(na(c)&&(c=(i=360-c)<c?c>0?-i:i:c),na(n.chart.racing.jumpDuration)){var d=wn.getComponent("domUtils.getSvgTransform")(r),h=d.translate[0],f=d.translate[1],p=d.rotate,g=s[0],v=s[1],m=c;return{x:d3.interpolate(h,g),y:d3.interpolate(f,v),rotate:d3.interpolate(p,m)}}return u="translate(".concat(s,")"),na(c)&&(u="translate(".concat(s,") rotate(").concat(c,")")),u},n.helpers.position[e].start.transform=function(e,i){var l=a[i],s=l.xy||[l.X,l.Y],c=o.rotation,u="",d=r.plotarea.height,h=t.chart.axes.y.groups[0].prerenderComp.orient,f=n.scales.x.bandwidth()||0;return t.chart.axes.rotated&&"bottom"===h?(u="translate(".concat([s[0],-t.chart.plotarea.top+f/2],")"),na(c)&&(u="translate(".concat([s[0],-t.chart.plotarea.top+f/2],") rotate(").concat(c,")")),u):(u="translate(".concat([s[0],d+20+f/2],")"),na(c)&&(u="translate(".concat([s[0],d+20+f/2],") rotate(").concat(c,")")),u)},n.helpers.position[e].exit.transform=function(e,a,o){var i=$ZC.get("domUtils.getSvgTransform")(o),l=r.plotarea.height,s=i.rotate,c=i.translate[0],u=t.chart.axes.y.groups[0].prerenderComp.orient,d=n.scales.x.bandwidth()||0;if(na(n.chart.racing.jumpDuration)){var h=wn.getComponent("domUtils.getSvgTransform")(o),f=h.translate[0],p=h.translate[1],g=h.rotate,v=c,m=l+20+d/2;t.chart.axes.rotated&&"bottom"===u&&"bottom"===u&&(b=[c,-t.chart.plotarea.top+d/2],na(s)&&(b=[c,-t.chart.plotarea.top+d/2]),v=b[0],m=b[1]);var y=s;return{x:d3.interpolate(f,v),y:d3.interpolate(p,m),rotate:d3.interpolate(g,y)}}if(t.chart.axes.rotated&&"bottom"===u&&"bottom"===u)return b="translate(".concat([c,-t.chart.plotarea.top+d/2],")"),na(s)&&(b="translate(".concat([c,-t.chart.plotarea.top+d/2],") rotate(").concat(s,")")),b;var b="translate(".concat([c,l+20+d/2],")");return na(s)&&(b="translate(".concat([c,l+20+d/2],") rotate(").concat(s,")")),b}}function aw(){var t=this,e=this,n="racingBoundBox";e.helpers.position[n]={},e.helpers.position[n].start={},e.helpers.position[n].exit={},e.helpers.position[n].end={},this.helpers.position[n].start=function(e,n,a){return t.helpers.position.racingLabel.start.transform(e,n,a)},this.helpers.position[n].end=function(e,n,a){return t.helpers.position.boundBox.end.transform(e,n,a)},this.helpers.position[n].exit=function(e,n,a){return t.helpers.position.racingLabel.exit.transform(e,n,a)}}function rw(){var t="boundBox",e=this,n=e.subSeries,a=e.chart,r=e.properties;e.helpers.position[t]={},e.helpers.position[t].start={},e.helpers.position[t].stop_1={},e.helpers.position[t].end={},e.helpers.position[t].start.transform=function(t,e){var o=n[e],i=o.xy||[o.X,o.Y],l=r.rotation,s=a.plotarea.height,c="";return i=a.axes.rotated?o.xy&&[0,o.xy[1]]||[0,o.Y]:o.xy&&[o.xy[0],s]||[o.X,s],c="translate(".concat(i,")"),na(l)&&(c="translate(".concat(i,") rotate(").concat(l,")")),c},e.helpers.position[t].stop_1.transform=function(t,e,r){var o=n[e],i=o.xy||[o.X,o.Y],l="",s=$ZC.get("domUtils.getSvgTransform")(r),c=s.rotate;if(a.axes.rotated){var u=s.translate[0];l="translate(".concat([u,i[1]],")"),na(c)&&(l="translate(".concat([u,i[1]],") rotate(").concat(c,")"))}else{var d=s.translate[1];l="translate(".concat([i[0],d],")"),na(c)&&(l="translate(".concat([i[0],d],") rotate(").concat(c,")"))}return l},e.helpers.position[t].end.transform=function(t,e){var a,o=n[e],i=o.xy||[o.X,o.Y],l=r.rotation,s="";return na(l)&&(l=(a=360-l)<l?l>0?-a:a:l),s="translate(".concat(i,")"),na(l)&&(s="translate(".concat(i,") rotate(").concat(l,")")),s}}function ow(){var t=this,e=t.subSeries,n=t.chart,a=t.properties,r=(t.datalabel_type,t.isPolarAxisCategory),o=t.isAxisCategory,i=a.dataLabels,l=a.isMultiLine,s=a.chartType,c=Md(i,n),u=jd(c.hook),d=a.dataUpdate,h=Id(i,n),f=Ia(c.radius),p=na(c.strokeWidth)?+c.strokeWidth:1,g=Gr(c.dashStyle,p),v=Xr(c.lineCap,c.dashStyle),y=m(),b=n.plotarea,x=a.trans||[0,0],C=-x[0]+b.left,k=b.width-x[0]-b.left;t.helpers.styles.boundBox={display:function(t,n,a){return Fd(e[n])?null:dn},fill:function(t,e,r){return $n(Ld(c.fillColor,0,n,d,r.legendOrder),t,Bd(e,r.legendOrder,a),n)},"fill-opacity":c.fillOpacity,stroke:function(t,e,r){return $n(Ld(c.strokeColor,0,n,d,r.legendOrder),t,Bd(e,r.legendOrder,a),n)},"stroke-opacity":c.strokeOpacity,"stroke-dasharray":g,"stroke-linecap":v,transition:"opacity ease .2s",opacity:function(t,e,a){if(na(n.dataObject.hierarchical)&&na(n.cache.hierarchical)&&n.cache.hierarchical.active)return!0===t.active?1:.1},strokeWidth:c.strokeWidth,d:function(t,n,d){var g=e[n],v=g.xy||[g.X,g.Y],m=v[0]-h,b=v[1]-h,x=g.width,w=g.height,_=void 0!==g.actualDY?g.actualDY:parseFloat(g.DY)||0,S=g.ANCHOR,O=g.hookPosition,A=d.labelType===zo&&qa([Gt.funnel,Gt.pyramid],s)&&na(i.y)&&l?a.txtHgt:w;return m="middle"===S?m-x/2:"end"===S?m-x:m,b-=y.domain([-.3,.9]).range([A,0])(_),o||r||"hierarchy"===a.type||(m<C&&(x-=C-m+p/2+h,m=C+p/2),m+x+p/2+h>k&&(x-=m+x-k+p/2+2*h),m+=(c.strokeWidth||1)*(O===Qr?.5:O===$r?-.5:0)),tC(m-=v[0],b-=v[1],x,w,f,h,O,u,g.adjustVal)},id:function(t,n){return"boundbox".concat(e[n].ID)},levelbycolumn:function(e,n){var a=t.actualData?t.actualData[t.actualData.length-1-n]:e.data||e;if(a.levelByColumn)return a.levelByColumn},levelbyrow:function(e,n){var a=t.actualData?t.actualData[t.actualData.length-1-n]:e.data||e;if(a.levelByRow)return a.levelByRow}}}function iw(){ew.call(this),tw.call(this),nw.call(this),aw.call(this),rw.call(this),ow.call(this)}wn.setComponent("ZC_ChartEvents",Uk),Gk.prototype.addPoints=function(t,e){if(t){for(var n in t)t.hasOwnProperty(n)&&(e&&(t[n]=Gk.toCircle(t[n])),Array.prototype.push.apply(this.points,Gk.addType(Ma(t[n]))));return this}},Gk.prototype.removePoints=function(t,e){return this.points.splice(t,e||1)},Gk.prototype.hoverPoint=function(t,e,n,a,r,o){if(r=!1!==r,a=!1!==a){var i=this.chart.eventHandler.getSourceNode();n=this.chart.eventHandler.getRelativeMousePosition(i,!0);!function(t,e,n,a,r,o){var i,l=t.eventHandler.oldInfo,s=t.systemConf.tooltip,c=t.systemConf.tooltip.sharedSeriesInfo,u=t.staticPaneSVG.selectAll("g.eventgroup"),d=!0===s.enabled||!0===o,h=t.eventHandler.tooltipElement;l&&!1===l.isNoInfo&&t.eventHandler.mouseOut();clearTimeout(h.timeout),u.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display",dn);var f=a._data(),p=f._x,g=f._y;na(n)||(n={x:p,y:g});na(e)&&(e=xl(e));if(!na(e)){var v=t.svg.node().getBoundingClientRect();e={clientX:p+t.plotarea.left+v.x,clientY:g+t.plotarea.top+v.y}}r&&"circle"===a._type&&(i=function(t,e,n,a,r,o){var i=a.selectAll("#zcscatterhighlight").style("display",null).attr("transform","translate(".concat(r.left,",").concat(r.top,")")),l=fa(t.marker,"hoveroptions")||{},s={color:t.color,symbolSize:{inner:t._mSize/2,outer:t._mSize},transform:[e,n]};return ap(i,null,l,s,o),i}(a,p,g,u,t.plotarea,t));if(d){var m=Il(e,n,p,g,t,null,t.axes.rotated,c,null,!1,!1),y=[Wn(a.text),a.formattedValue].join(": "),b=a.marker,x=wa(a.events,{}).tooltipContent;if(na(x)){var C=$n(x,e,{data:[a.columnInfo],itemIndex:a.itemIndex,point:a.point,pointFormatted:a.formattedValue},t);na(C)&&(y=C)}m.helpers.backgroundColor=wa(s.backgroundColor,b.fillColor,a.color),m.helpers.borderColor=wa(s.borderColor,b.strokeColor,a.color),h.show(t,m,y,!1,m.helpers)}}(this.chart,e||jt(),n,t,r,o)}},Gk.toCircle=function(t){return t.forEach((function(t){if(!t._converted&&!na(t.r)){var e=t._data();t.cx=e._x+t.width/2,t.cy=e._y+t.height/2,t.r=Ge(t.width,t.height)/2,t._converted=!0}})),t},Gk.addType=function(t){return t.forEach((function(t){var e=t._data();na(t.r)?t._type="circle":na(e._x)&&na(e._y)&&na(t.width)&&na(t.height)?t._type="rect":t._type="poly"})),t},Vt.customPoints=Gk,De.svg=function(){var t,e,n;function a(a,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zo,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;a.each((function(){var a=r,c=wa(i,r);t&&(e=t.properties,n=e.rp.chartObj);var u=t&&Dd(e.dataLabels,n),d=dc(l(this),"g",[{showBoundBox:u,labelQueue:s}],".","class",(o===Bo?"parentboundboxseries_":o===Fo?"innerboundboxseries_":"boundboxseries_")+c);e&&e.rangeChart&&(d=dc(d,"g",[1],".","class","rangePos_".concat(e.yrangePos)));var h=dc(d,"g",u?t:[]);if(u){var f=e.chartType,p=Xi(n,f,"polarAxis"),g=Xi(n,f,"axis"),v=p?"translate(".concat(n.plotarea_approx.x,",").concat(n.plotarea_approx.y,")"):g?null:e.translation;d.attr("transform",v);var y=e,b=y.dataLabels,x=(y.isMultiLine,Md(b,n)),C=(jd(x.hook),e.dataUpdate),k=(e.data,e.rotation,Id(b,n),Ia(x.radius),Ld(x.strokeColor,0,n,C,a),Ld(x.fillColor,0,n,C,a),na(x.strokeWidth)?+x.strokeWidth:1),w=(Gr(x.dashStyle,k),Xr(x.lineCap,x.dashStyle),m(),n.plotarea),_=e.trans||[0,0];_[0],w.left,w.width,_[0],w.left;h.attr("transform",(function(t){return t.translation})).attr("class",(function(t,e){return"subseries_".concat(e)}))}}))}return a.args=function(e){return arguments.length?(t=e,a):t},a},Nu("boundBox-svg",De.svg),Nu("connector",(function(t,e,n,a,r){a=wa(a,n);var o=e&&e.properties||{},i=o.dataUpdate,l=void 0===i?[]:i,s=o.isSunburst,c=o.connectorPath,u=o.showlabel,d=o.dataLabels,h=(void 0===d?{}:d).line,f=l.length,p=Zd(t),g=dc(r||p,"g",!e||!Ao(t)&&"circular"===u?[]:[1],".","class","link_".concat(a));if(e&&h){var v=o.data;g.attr("transform",o.translation).styles({stroke:h.strokeColor,"stroke-width":h.strokeWidth,fill:dn}),e.forEach((function(e,a){var r="circular"!==(e.showlabel||u),i=dc(g,"g",r?[1]:[],".","class","subseries_".concat(a)),d=dc(i,"path",e.dataUpdate||l);i.attr("transform",e.translation),d.styles({display:function(t,n){return!1===e[n].display?dn:pn},stroke:function(e,a){return s||h.strokeColor?pn:Fs(t,o.reverseColor?f-1-a:a,e&&e.data?e.data:e,n)}}).attrs({d:e.connectorPath||c,class:"zc_label_connector",id:function(t,e){return"link".concat(n,"_").concat(a,"_").concat(e)},levelbycolumn:function(t,e){var n=v?v[v.length-1-e]:t.data||t;if(n.levelByColumn)return n.levelByColumn},levelbyrow:function(t,e){var n=v?v[v.length-1-e]:t.data||t;if(n.levelByRow)return n.levelByRow}}),$k(d,t,"label",v)}))}})),Nu("bullet",(function(t,e,n,a){var r=t.label||{},o=this,i=this.dataset,s=this.plotarea,c=this.systemConf,u=e.commonOption,d=e.commonRendererProp().params,h=d.axisrotated,f=d.yscale,p=d.xscale.bandwidth(),g=c.chart.axes.yaxis[0].orient||(this.axes.rotated?Kr:$r),v=qd(d,a.paneid),m=t.dataindex,y=!0===t.enabled&&!0===r.enabled&&na(m),b=dc(this.staticPaneSVG.selectAll("g.qualitativeGroup"),"g",y?[1]:[],".","class","targetLabel");if(b.attr("transform","translate(".concat(s.left,",").concat(s.top,")")),y){var x=r.hAlign,C=r.vAlign,k=r.textOverlap,w=void 0===k?"none":k,_=Jn(r.padding,2),S="fixed"===r.position,O=10*Jn(t.size,(u.levelMarkerWidth-2*Jn(t.padding,u.padding/2))/10),A=("line"===t.symbol?Jn(t.outerStrokeWidth,1):O)/2;h?(x=x||qr,C=C||(g===Kr?Jr:Kr)):(x=x||(g===$r?Qr:$r),C=C||qr);var T=this.userdata.metadata.columns,P=T.filter((function(e){return e.dataindex===t.dataindex})),E=P.length?P[0]:T[i.getColumnIdx("y",0)],L=E.datatype,M=E[L],D={left:0,right:0,top:0,bottom:0};h?D.top=D.bottom=s.adjust:D.left=D.right=s.adjust,S||!0!==c.chart.axes.yaxis[0].show||(D[g]=0);var I=o.container.node().getBoundingClientRect(),R=I.left+o.plotarea.left,z=I.top+o.plotarea.top,j=os(o),F=j.left-D.left,H=j.top-D.top,N=j.right+D.left+D.right,W=j.bottom+D.top+D.bottom;vc(b,[r,c.chart,c.canvas,wr]);var V=dc(b,"text",n,null,null,null,null,(function(t){return i.getX(t)}));V.style("display",null),V.each((function(t,e){var n=t[m];if(na(n)){var s,c,d,g,y=i.getX(t),b=na(r.text)?i.getCustomizedVal(o,r.text,0,null,null,t,"targetLabel"):Wo(M,n,L,o,"targetLabel"),k=n<0,T=k?-1:1,P=u.bandwidth1(y)+p/2,E=f(n);h?(s=E,c=P,C===Kr?(c+=O/2,x===qr&&(d="1em",c=P+(S?p:O)/2)):C===qr?d="0.3em":C===Jr&&(c-=O/2,x===qr?(d="-0.3em",c=P-(S?p:O)/2):d="1em"),x===qr?(g="middle",c-=C===qr?0:C===Jr?_*T:-_*T):x===Qr?(s+=(_+A)*T,g=k?"end":null):(s-=(_+A)*T,g=k?null:"end")):(s=P,c=E,x===Qr?s+=(S?p:O)/2:x===qr?g="middle":x===$r&&(s-=(S?p:O)/2,g="end"),C===qr?(s+=x===qr?0:x===Qr?_:-_,d="0.3em"):C===Jr?(c-=(_+A)*T,d="-0.3em"):(c+=(_+A)*T,d="1em")),l(this).attrs({transform:"translate(".concat(s,",").concat(c,")"),"text-anchor":g,dy:d}).text(b);var D=this.getBoundingClientRect(),I=D.left-R,j=I+D.width,V=D.top-z,Y=V+D.height;if("none"!==w){var U=l(this),G={id:"lbl".concat(a.rendererIndex,"_0_").concat(a.subIndex,"_").concat(e),translateFunction:function(t,e,n,a){a?U.style("display","none"):U.attr("transform","translate(".concat(s+e,",").concat(c+n,")"))},x1:I,y1:V,x2:j,y2:Y,overlap:w,priority:1};v.push(G),v.accessor=function(t,e){return B(t.priority||0,e.priority||0)},v.align="vertical"}var X=s+(I<F?F-I:j>N?-(j-N):0),Z=c+(V<H?H-V:Y>W?-(Y-W):0);X!=s&&(s=X),Z!=c&&(c=Z),l(this).attr("transform","translate(".concat(s,",").concat(c,")"))}}))}}));var lw=function(){return{datalabel:{operator:Pm("datalabel.default")}}};function sw(){var t=this,e=t.chart,n=t.properties,a=t.isPolar,r=t.isHierarchy,o=t.isNonAxisMultiSeriesCategory,i=t.isAxisCategory,l=t.isTreemap,s=t.isInnerLabel,c=t.index,u=t.hasColorScale,d=this.builderC,h=n.dataLabels,f=n.reverseColor,p=n.dataUpdate,g=Ao(e)?d.legendOrderIndex:c,v=i||a?pn:p.length,m=pn;t.dataLevelFontColor=pn,t.dataLevelStrokeColor=pn,t.helpers={position:{},styles:{},text:{}},(u||d.threshold||r||!(i||e.isGeoMap||a||o)||n.multiColoring)&&(m=function(t){return function(r,u){var d=f?v-1-u:(i||a||o)&&!n.multiColoring?c:u,p=Fs(e,d,r&&r.data?r.data:r,g),m=n.isSunburst&&n.parentInnerLabel&&r.children?n.parentInnerLabel:h,y=((r&&r.data?r.data:r)||[]).paneid;return l&&s&&/(top-outset|bottom-outset)/.test(m.position)&&P(p).opacity<.1&&(p="white"),Vd(e.systemConf,p,m,e,s,c,void 0,t,y)}},t.dataLevelFontColor=m("fontColor"),t.dataLevelStrokeColor=m("strokeColor"))}var cw=function(){function t(e){_classCallCheck(this,t);var n=e.datalabel_type,a=e.ctype,r=e.chart,o=e.dataUpdate,i=e.actualData,l=e.properties,s=e.builderC,c=e.rendererIndex,u=e.subSeries,d=e.index,h=e.subseriesIdx,f=e.datalabelOptions,p=e.commonOptions,g=e.options,v=e.operator;this.datalabel_type=n,this.ctype=a,this.chart=r,this.dataUpdate=o,this.actualData=i,this.conf=r.rendererConf[c],this.properties=l,this.rendererIndex=c,this.builderC=s,this.subSeries=u,this.index=d,this.subseriesIdx=h,this.datalabelOptions=f,this.commonOptions=p.datalabels,this.options=g.datalabels,this.markOperator=v,this.animate=this.commonOptions.animation&&this.commonOptions.animation.enabled||this.options.animation&&this.options.animation.enabled,this.isStackedLabel="stacklabel"===n,this.isInnerLabel=n===Fo||n===Bo,this.hasColorScale=Bi.isQuantileColorScale(r),this.isPolar=Xi(r,l.chartType,"polarAxis"),this.isHierarchy=Xi(r,l.chartType,"hierarchy"),this.isNonAxisMultiSeriesCategory=Xi(r,l.chartType,"nonAxisMultiSeries"),this.isAxisCategory=Xi(r,l.chartType,"axis"),this.isTreemap=l.chartType==Gt.treemap,this.isPolarAxisCategory=Xi(r,l.chartType,"polarAxis"),this.isPackedBubble=l.chartType==Gt.packedbubble,this.isRedraw=this.conf.parser&&this.conf.parser.phase||r.redraw,this.setMarkMapping()}return _createClass(t,[{key:"initialize",value:function(t){this.container=t,sw.call(this),this.renderInfo=this.chart.renderer[this.rendererIndex].commonRendererProp().params,this.scales={x:this.renderInfo.xscale,y:this.renderInfo.yscale},this.collectEncode()}},{key:"collectEncode",value:function(){iw.call(this)}},{key:"getAllowedMarkOperator",value:function(){return["datalabel"]}},{key:"getDefaultMarkParser",value:function(){var t=this.getAllowedMarkOperator(),e=this.markMapping,n=this.markOperator;this._mark=Jk.call(this,this.data,e,t,n)}},{key:"setMarkMapping",value:function(t){this.markMapping=(t||lw).call(this)}},{key:"render",value:function(t){this._mark.map((function(e){Kf(e.mark,t)}))}},{key:"destroy",value:function(){this.container=null}}]),t}();function uw(t,e){var n=t.dataObject,a=n.isContinousChart,r=e.length,o={top:["hidden","topPlus","right","bottom","left"],bottom:["hidden","right","left"]},i=os(t),l={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};e=a?e.sort((function(t,e){return B(t.x1,e.x1)})):e;for(var s=1;s<r;s++){var c,u,d,h=0,f=!1,p=0,g=wa(e[s].factor,1),v=(e[s].pointRadius||0)*g,m=e[s].x1,y=e[s].y1,b=e[s].x2,x=e[s].y2,C=e[s].x2-e[s].x1,k=e[s].y2-e[s].y1,w=o[wa(e[s].orient,"top")],_=e.slice(0,s);_=a?_.reverse():_;do{switch(w[p]){case"hidden":u="hidden"===(c=e[s]).overlap||n.isBubbleEnabled;break;case"topPlus":c.y1=y-k/2,c.y2=x-k/2,d=Kr;break;case"right":c.x1=(m+b)/2+v,c.x2=(m+b)/2+v+C,c.y1=x+1,c.y2=x+k+1,d=$r;break;case"bottom":c.x1=m,c.x2=b,c.y1=x+2*(v+1),c.y2=x+2*(v+1)+k,d=Jr;break;case"left":c.x1=(m+b)/2-v-C,c.x2=(m+b)/2-v,c.y1=x+1,c.y2=x+k+1,d=Qr}for(var S=s-1;S>=0;S--)if(f=ml(_[S],c)){h++;break}}while(++p<5&&f);if(0!=h){var O=!!n.isPolarAxisCategory||Yd(c,l),A=e[s].translateFunction,T=e[s].id,P=e[s].isStackedLabels;if(!O||5==h||u)A(T,null,null,!0,Oe,Oe,P?jo:zo),e[s].x1=e[s].y1=e[s].x2=e[s].y2=0;else A(T,c.x1-m,c.y1-y,null,void 0,d,P?jo:zo)}}}function dw(t,e){var n=e.length,a=os(t),r={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom},o=t.axes.rotated,i=function(t,e){return o?H(t.x1,e.x1):B(t.y1,e.y1)},l=e.accessor||function(t,e){return o?H(t.y1,e.y1):B(t.x1,e.x1)},s=e.align||(o?"horizontal":"vertical");e.sort(l);for(var c=0;c<n;c++){for(var u=!1,d=0,h=0,f=e[c].x1,p=e[c].y1,g=e[c],v=e.slice(0,c).sort(i),m="hidden"===g.overlap,y=c-1;y>=0&&d<2;y--){var b=ml(v[y],g);b&&("horizontal"===s?(h=v[y].x2-g.x1,g.x2+=h,g.x1+=h):(h=v[y].y1-g.y2,g.y2+=h,g.y1+=h),d++),u=u||b}if(u){var x=Yd(g,r),C=e[c].translateFunction,k=e[c].id,w=e[c].isStackedLabels;if(!x||d>1||m)C(k,null,null,!0,Oe,Oe,w?jo:zo),e[c].x1=e[c].y1=e[c].x2=e[c].y2=0;else C(k,g.x1-f,g.y1-p,Oe,Oe,Oe,w?jo:zo)}}}function hw(t,e,n,a){for(var r=[],o=[],i=[],l=n-a,s=function(t,e){return t.dist-e.dist},c=l,u=0;u<n;u++)t[u]||r.push(u);t.forEach((function(t){t.sort(s)})),t.forEach((function(t){t.forEach((function(t,e){0!=e&&(i[e]=i[e]||[],i[e].push(t))}))})),i.forEach((function(t){t.sort(s)})),i.forEach((function(t){t.forEach((function(t,e){o.push([t])}))})),o.forEach((function(t,e){l>0?l--:t[0].hide=!0})),(o=o.slice(0,c)).sort((function(t,e){return t[0].y1-e[0].y1})),o.forEach((function(n){var a=n[0],o=a.y2-a.y1,i=Ge(Ye((a.y1-e)/o),0);if(t[i]){for(var l,s=r[0],c=0,u=0;u<r.length;u++){var d=Ze(e+r[u]*o-a.y1);null==l&&(l=d),d<l&&(l=d,s=r[u],c=u)}if(s<i){r.splice(c,1);var h=s;t.forEach((function(e,n){var r=e[0];n>s&&r.y1<a.y1&&(t[h]=e,h=n)})),t[h]=[a]}else{r.splice(c,1);h=[a];for(var f=i;f<=s;f++)if(t[f]){if(t[f][0].y1>a.y1){var p=t[f];t[f]=h,h=p}}else t[f]=h}}else t[i]=n})),t.forEach((function(a,r){var o=a[0],i=o.y2-o.y1,l=e+r*i-o.y1;o.translate=Ze(l)<i&&r+1<n&&!t[r+1]&&l<0?0:l})),t.forEach((function(a,r){var o=a[0],i=o.y2-o.y1,l=e+r*i-o.y1;o.translate=Ze(l)<i&&r+1<n&&(!t[r+1]||!t[r+1][0].translate)&&l<0?o.translate:l}))}function fw(t,e,n,a){return t.forEach((function(t){var r=t.y2-t.y1,o=Ge(0,Ye((t.y1-a)/(t.y2-t.y1)));t.dist=t.y1<a?a-t.y1:t.y1-(a+o*r),n[o]||(n[o]=[],e++),n[o].push(t)})),e}function pw(t,e,n,a,r,o,i,l,s){if(!t.hide){null==e&&(e=Ye((a-n)/(t.y2-t.y1)));var c=s?null==r?a-t.y2:o[r].y1-t.y2:null==r?t.y1-n:t.y1-o[r].y2;l+=null!=r&&ml(t,o[r])&&c<-5?Ze(c):0,r=i,o.push(t),i++}return{prev:r,count:i,totalslot:e,need:l}}function gw(t,e,n){if(e.length){var a,r,o,i=[],l=[],s=e.TOP,c=e.BOTTOM,u=e.queue,d=0,h=0,f=[],p=[],g=0,v=0,m=0,y=0;if(e.forEach((function(t){if(t.isLeft){var e=pw(t,o,s,c,a,l,h,y,!0);o=e.totalslot,a=e.prev,h=e.count,y=e.need}else{e=pw(t,o,s,c,r,i,d,m);o=e.totalslot,r=e.prev,d=e.count,m=e.need}})),m||y){if("funnel"===e.actualType&&i.reverse(),g=fw(i,g,f,s),l.reverse(),v=fw(l,v,p,s),hw(f,s,o,g),hw(p,s,o,v),e.forEach((function(e){t.labelHandler.update(e.id,e.DX,e.translate||0,e.hide,void 0,e.overlappingHookPosition,void 0,e.queue||u)})),Gn(u,"properties.onOverlap"))Ma(e.queues).forEach((function(t){return t.properties.onOverlap(t[e.subSeriesIndex])}))}else{if(Gn(u,"properties.onNonOverlap"))Ma(e.queues).forEach((function(t){return t.properties.onNonOverlap(t[e.subSeriesIndex])}));e.forEach((function(e){t.labelHandler.update(e.id,0,0,null,e.actualDY,void 0,void 0,e.queue||u)}))}}}function vw(t,e){var n=e.config,a=e.chartObj,r=e.renderMode,o=e.accessor,i=void 0===o?Kx(a,null,n):o,l=a.systemConf;return mw(t,{config:[n,l.chart.plot.datalabels,l.chart,l.canvas,wr],accessor:i,renderMode:r})}function mw(t,e){var n,a=e.config,r=e.renderMode,o=e.accessor,i=o.contentType,l=o.multiLine,c="html"==i||l||"svg"===r;a=Ma(a),c&&((n=wc("text",".dummy-text",[1],s("svg.svgPattern"))).style("opacity",0),vc(n,a));var u=t.map((function(t,e){var r=$n(o,t,e);if(c)return function(t,e,n,a){return a="html"===(n=n||"text")&&a,t[n](e),a&&ho(t,0),Bn(t.node())}(n,r,i,l);var s=vc(null,a);return Rr(r,na(s["font-size"])?parseFloat(s["font-size"]):null,s["font-family"],null,null,s["font-style"],s["font-weight"])}));return n&&n.remove(),u}function yw(t){var e=t.showAs;if(Ed.has(e))return e;var n=L();return e.toString().replace(Re,(function(){var t=arguments[0],e=arguments[1],a=arguments[2],r=arguments[3],o=arguments[4],i=arguments[5],l=e||a||r||o||i,s=t.match(/[a-z]+/gi)[0];if(n.has(s)){var c=n.get(s);c.push(l),n.set(s,c)}else n.set(s,[l])})),n}wn.setComponent("dataLabel.measureText",vw);var bw="qtyplkjhgfd";function xw(t,e,n,a){var r,o=t.renderer[0],i="hierarchy",l=t.staticPaneSVG.selectAll("g.labelholder"),s=0;(r=Le.initialize(t)).chartType=i;var c=function(e){var n=Wu(i),a=o.nodeAligns[e].map((function(t){return t.point})),c=[t.seriesdata[0],0,pn,pn,null,a,[0,0],null,!0];(n=n()).args(c).renderer(o),l.call(n,r);var d=_slicedToArray(r.getQueue(0),1)[0],h=u(d.slice(s),(function(t){return t.display?t.width:0}));return s=a.length,h},d=c("start"),h=c("end");a.push(d),a.push(h)}function Cw(t,e){var n=t.dataObject.getEncode("stack");return Object.keys(n).some((function(n){var a=Qd(t.dataObject.getEncode("stack",n));return"html"===Kx(t,null,e,jo,null,a).contentType}))}function kw(t){var e=t.data,n=t.config,a=t.renderMode,r=t.accessor,o=t.padding,i=t.measure,l=mw(e,{config:n,renderMode:a,accessor:r}),s=u(l,(function(t){return o+$n(i,t)}));return Pn.scaleCorrection?s||0:function(t,e){if("ordinal"!==t.config.type)return e||0;var n=t.config,a=n.domain,r=n.padding,o=j(n.tempRange),i=Wt.getOuterPadding(o,n.domain.length,n.padding,n.outerPadding),l=b().domain(a).range(o).paddingInner(r).paddingOuter(i),s=l(l.domain()[0])-l.range()[0],c=e||0;c=Ge(0,c-s);var u=[o[0]-c,o[1]+c];return Ge(u[1]-o[1],-u[0])}(this,s)}function ww(t){var e=t.chartObj,n=t.renderer,a=t.charttype,r=t.rendererIndex,o=t.paneid,i=t.args,l=e.staticPaneSVG.selectAll("g.labelholder"),s=e.labelHandler;e.labelHandler||((s=e.labelHandler=Le.initialize(e)).chartType=a),s.rendererIndex=r,s.paneid=o;var c=Wu(a);c!==mn&&((c=c()).renderer(n).args(i),l.call(c,s))}function _w(t,e){e=(e=Ao(t)&&"0"===e?"0_0":e).replace(/\((\d+)\)/,"");var n=t.dataObject,a=Ui(t,e,0).value,r=Xi(t,a,"axis"),o=Xi(t,a,"polarAxis");return r&&n.isCombinationalChart||r&&!n.noofBarEnabledSeries||o||t.isGeoMap||n.isFlowChartCategory?uw:r&&n.noofBarEnabledSeries?dw:gw}function Sw(t,e,n,a){var r,o,i,l,s,c=this,u=this,d=u.chart.staticPaneSVG,h=u.datalabel_type===Bo,f=u.isInnerLabel,p=h?"parent":f?"inner":"",g=d.selectAll(".".concat(p,"boundboxseries_").concat(wa(this.conf.rendererIndex()||this.conf.datasetIndex()||u.index))),v=n&&n._duration||100,m=n&&n._delay||0,y=this.chart.racing&&this.chart.racing.syncTransition;if(g.node()){g.each((function(t){l=t.showBoundBox,s=t.labelQueue}));var b=s.paneid,x=/(pieInnerLabels|funnelInnerLabels)/.test(s.charttype),C=s.args[1],k="pieInnerLabels"===s.charttype&&Ol(Ui(u.chart,b,C).value)&&s.args[s.args.length-1]?Bo:x?Fo:zo,w={legendOrder:C,rendererIndex:s.rendererIndex,paneid:b,labelType:k};u.properties&&u.properties.rangeChart&&(g=g.selectAll(".rangePos_".concat(u.properties.yrangePos))),a=g.selectAll(".subseries_".concat(u.subseriesIdx));var _="ordinal"===this.chart.dataset.getDataType("x",0),S={name:"rect",selector:".zc_label_background",mark:"path",order:".customLabel",data:l?t:[],dataAccessor:y&&_?function(t){return c.chart.dataset.getX(t)}:null,parent:a,config:{strokeWidth:u.helpers.styles.boundBox.strokeWidth,dashStyle:u.helpers.styles.boundBox["stroke-dasharray"],lineCap:u.helpers.styles.boundBox["stroke-linecap"]},properties:{styles:{display:function(t,e){return u.helpers.styles.boundBox.display(t,e,w)},fill:function(t,e){return u.helpers.styles.boundBox.fill(t,e,w)},"fill-opacity":u.helpers.styles.boundBox["fill-opacity"],stroke:function(t,e){return u.helpers.styles.boundBox.stroke(t,e,w)},"stroke-opacity":u.helpers.styles.boundBox["stroke-opacity"],transition:u.helpers.styles.boundBox.transition,opacity:function(t,e){return u.helpers.styles.boundBox.opacity(t,e,w)}},attrs:{d:function(t,e){return u.helpers.styles.boundBox.d(t,e,w)},id:function(t,e){return u.helpers.styles.boundBox.id(t,e,w)},levelbycolumn:function(t,e){return u.helpers.styles.boundBox.levelbycolumn(t,e,w)},levelbyrow:function(t,e){return u.helpers.styles.boundBox.levelbyrow(t,e,w)}}},onEnd:function(t){$k(t,u.chart,"label",u.actualData)}};if(y){var O=u.helpers.position.racingBoundBox;r={transform:function(t,e){return O.start(t,e)}},o=[{transition:y,transform:{property:"attrTween",to:function(t,e){var n=d3.interpolateString(this.getAttribute("transform"),O.end(t,e));return function(t){return n(t)}}}}],i={transition:y,transform:function(t,e){return O.exit(t,e,this)}},S.config.enter=r,S.anime={},S.anime.update=o,S.anime.exit=i}else e?(r={transform:function(t,e){return u.helpers.position.boundBox.start.transform(t,e)}},o=[{duration:"redraw"==this.isRedraw?v:0,delay:m,transform:{property:"attrTween",to:function(t,e){var n=d3.interpolateString(this.getAttribute("transform"),u.helpers.position.boundBox.stop_1.transform(t,e,this));return function(t){return n(t)}}}},{duration:v,delay:m,transform:{property:"attrTween",to:function(t,e){var n=d3.interpolateString(this.getAttribute("transform"),u.helpers.position.boundBox.end.transform(t,e));return function(t){return n(t)}}}}],S.config.enter=r,S.anime={},S.anime.update=o):(r={transform:function(t,e){return u.helpers.position.boundBox.end.transform(t,e)}},o={duration:0,transform:function(t,e){return u.helpers.position.boundBox.end.transform(t,e)}},i={duration:0,delay:0},S.config.enter=r,S.config.update=o,S.config.exit=i);return S}}function Ow(t){var e=this,n="clip"===e.properties.dataLabels.textOverlap;return{styles:{display:function(t,n){return e.helpers.styles.label.display(t,n)},fill:function(t,n){return e.helpers.styles.label.fill(t,n)},"pointer-events":dn,opacity:function(n,a){return e.helpers.styles.label.opacity(n,a,t)}},attrs:{dy:function(t,n){return e.helpers.styles.label.dy(t,n)},"text-anchor":function(t,n){return e.helpers.styles.label["text-anchor"](t,n)},id:function(t,n){return e.helpers.styles.label.id(t,n)},"clip-path":n?function(t,n){return e.helpers.styles.label["clip-path"](t,n)}:null,levelbycolumn:function(t,n){return e.helpers.styles.label.levelbycolumn(t,n)},levelbyrow:function(t,n){return e.helpers.styles.label.levelbyrow(t,n)},"filtered-opacity":function(t,n){return e.helpers.styles.label["filtered-opacity"](t,n)}}}}function Aw(t){var e=this,n=e.ctype,a=e.isPolar,r=e.isAxisCategory,o=e.isPackedBubble,i=e.isTreemap,s=e.isStackedLabels,c=e.isInnerLabel,u=e.properties,d=e.chart,h=u.GLT,f=u.contentType,p=u.dataLabels,g=$x(p,d),v=Dd(p,d)?Id(p,d)+Rd(p,d):0,m=n==Gt.bullet||n==Gt.dial,y=e.animate,b=u.isMultiLine&&y;return function(n){n.nodes().map((function(n,x){if(t&&l(n).selectAll(".zcTspan").attr("x",null),!b&&t&&0!=Number(n.getAttribute("x"))&&0!=Number(n.getAttribute("y"))){var C=$ZC.get("domUtils.getSvgTransform")(n);n.setAttribute("transform","translate(".concat(n.getAttribute("x"),",").concat(n.getAttribute("y"),") rotate(").concat(C.rotate,")")),n.setAttribute("x",0),n.setAttribute("y",0)}var k=x;if(u.isMultiLine)for(var w=0;w<n.childNodes.length;w++)y||t?n.childNodes[w].setAttribute("x",0):n.childNodes[w].setAttribute("x",e.subSeries[k].X);if(!(r||i||a||m||o||s||c||d.isGeoMap||h&&h.hasShowAsFunction))if("html"===f){if(!1!==e.subSeries[k].display){var _=p.preCalculation&&p.preCalculation.useBBox,S=null,O=l(n);if(y){var A=e.properties.rotation,T=(E=e.subSeries[k]).xy||[E.X,E.Y];O.attr("x",E.X).attr("y",E.Y).attr("transform",A?"rotate(".concat(A," ").concat(T,")"):pn),O.selectAll(".zcTspan").attr("x",E.X)}var P=go(O,g,_);if(fo(O,d,u.trans,u.txtHgt,null,P,e.subSeries[k].isLeft?v:0,void 0,p.preCalculation),y){var E;A=e.properties.rotation,T=(E=e.subSeries[k]).xy||[E.X,E.Y];O.attr("x",0).attr("y",0).attr("transform",A?"translate(".concat(T,") rotate(").concat(A,")"):"translate(".concat(T,")")),O.selectAll(".zcTspan").attr("x",0)}if("middle"===e.subSeries[k].ANCHOR){var L=(e.subSeries[k].width-Bn(n).width)/2,M=e.subSeries[k].isLeft?1:-1;S=e.subSeries[k].X+L*M}na(S)&&(O.attr("x",S),ho(O,S))}}else Xd(l(n),d,u.trans,u.txtHgt)})),wn.getComponent("defaultDatalabelParser")()&&wn.setComponent("datalabel.default",wn.getComponent("defaultDatalabelParser")())}}Nu("preCalculation",(function(t,e,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0,o=[];if(n.dataObject.hasLevelMarker||!e)return 0;if(!fh(n,t))return a?0:o;var i=[],l=n.systemConf,s=n.dataObject,c=n.axes.rotated,d=s.isstacked(),h=s.noofBarEnabledSeries,f=.75*(c?n.plotarea.width:n.plotarea.height),p=l.chart.plot.datalabels.handleOverlapping,g="y"===t,v=n.datalabels.renderer?n.datalabels.renderer:n.datalabels.renderer=[],m=n.chartTypes[0].name===ji,y=function(t){return g&&h&&!d&&Jd(n,t)===to},b=function(t){return[t,l.chart.plot.datalabels,l.chart,l.canvas,wr]},x=function(t,e){var a=y(e),r=a&&Cl(n.chartTypes[e].value)?2:0,o=g?Ge(0,Xe(Jn(t.padding,r),f)):0;return(a&&Dd(t,n)||m)&&(o+=2*Id(t,n)+Rd(t,n)),o},C=function(t,e){var a=Ud(t,n);v[e]=v[e]||{},v[e].show=a,v[e].config=t,v[e].labeltype=yw(t)};if(n.userdata.seriesdata,n.seriesdata.forEach((function(t,e){if(!t.disabled){var a=t.plotoptions,u=Hd(l.chart.plot.plotoptions[n.chartTypes[e].name],a),d=Ud(u,n),h=y(e),f=Kx(n,null,u,zo,null,e),v=x(u,e);if(C(u,e),d)if(h&&(c||"html"===f.contentType)){var k=pi.helpers.getParsedYAxisOrder(t.yaxiscolumnorder),w=n.dataset.getDataType("y",k),_=s.getDomain(s.getCategories("x"),"x",!0),S=w==To?s.getCategories("y",k):null,O=Xa(na(u.maxWidth)?u.maxWidth:"30%",n.plotarea.width);t.data.forEach((function(t){o.push({_type:"font",renderMode:"svg",padding:v,config:b(u),data:s.updateSeriesdatabyCategories(Yn(t),_,S,k),accessor:f,measure:function(t){return c?Xe(t.width,O):t.height},key:r})}))}else m?xw(n,u,v,i):o.push({_type:"font",renderMode:"svg",padding:v,config:b(u),data:[bw],accessor:function(t){return t},measure:function(t){return t.height+(p&&!c&&g&&!h?t.height:0)},key:r})}})),g&&h&&d&&!s.isStackedPercentChart){var k=s.getEncode("stack"),w=s.getEncode("stack",Object.keys(k)[0]);if(w){var _=Qd(w),S=l.chart.plot.plotoptions[n.chartTypes[_].name].datalabels.stackLabels||{},O=!!S&&S.show,A=Ge(0,Xe(Jn(S.padding,2),f)),T=Xa(na(S.maxWidth)?S.maxWidth:"30%",n.plotarea.width);n.datalabels.isStackedLabels=O,O&&(Jd(n,_,jo)===to&&(c||Cw(n,S))?Oa(k,(function(t){var e=Qd(t),a=Kx(n,null,S,jo,null,e);o.push({_type:"font",renderMode:"svg",padding:A,config:b(S),data:t.layout.getAllExtents(),accessor:a,measure:function(t){return c?Xe(t.width,T):t.height},key:r})})):o.push({_type:"font",renderMode:"svg",padding:A,config:b(S),data:[bw],accessor:function(t){return t},measure:function(t){return t.height},key:r}))}}if(!a)return o;if(m)return i;var P=u(o,(function(t){var e=t.data,a=t.config,r=t.renderMode,o=t.accessor,i=t.padding,l=t.measure,s=vw(e,{config:a,renderMode:r,accessor:o,chartObj:n});return u(s,(function(t){return i+l(t)}))}));return P})),ed("font-correction-evaluator",kw),ed("label-correction-evaluator",kw),Le.initialize=function(t){var e=t.plot.renderer.mode,n=Wu("".concat(e)),a=Wu("connector"),r=Zd(t),o=Gt,i={};i[zo]=[],i[jo]=[],i[Fo]=[],i[Bo]=[];var l,s={rangeChart:[o.arearange,o.boxplot,o.barrange],connector:[o.pie,o.sunburst,o.funnel,o.pyramid]};s[Fo]=_e.innerLabels,s[Bo]=_e.parentLabels;var c={add:function(e,n,a,r,o,c){o=o||zo,c=wa(c,n);var u=i[o];return u=u[c]=u[c]||[],o===zo&&s.rangeChart.indexOf(t.chartTypes[n].value)>-1&&na(r)&&(l=!0,u=u[r=r||0]=u[r]||[]),u[a]=u[a]||[],u[a].push.apply(u[a],e),Object.keys(e).filter(isNaN).forEach((function(t){return u[a][t]=e[t]})),u},update:function(t,e,n,a,r,o,i,l){i=i||zo;var s=t.match(/\d+/g),u=s[0],d=s[1],h=s[2],f=s[4],p=wa(s[3],u),g=(l||c.getQueue(p,f,i,u))[d][h];g&&(g.X+=e,g.Y+=n,g.display=g.display&&!a,void 0!==r&&(g.DY=r),o&&(g.hookPosition=o))},getQueue:function(e,n,a,r,o){a=a||zo,r=wa(r,e);var l=i[a];l=l[r];var c=Ui(t,o,e);return a===zo&&s.rangeChart.indexOf(c.value)>-1&&na(n)&&l&&(l=l[n||0]),l},draw:function(){if(t.isAxisCategory){var o=t.dataObject.getEncode("stack"),c=t.dataObject.getStackGroup();(c=c?c.map((function(t,e){return e})):Object.keys(o)).forEach((function(a,o){var l=t.dataObject.getEncode("stack",a);if(i[jo].length&&l){var s=Qd(l);n(t,i[jo][s],o,"stacklabel")}else"svg"===e&&dc(r,"g",[],".","class","stacklabel_".concat(o))})),c.length||"svg"!==e||dc(r,"g",[],"#","id",jo)}var u,d=t.dataObject.hierarchical,h=d&&d.facetRendering,f=[{data:t.seriesdata}];if(h){var p=(h&&d.pivotLayout).getRootNodeList("layer");f=nr(p.panes),p.domain,u=d.pivotLayout.layers.groups}var g=0;t.viewFlow&&t.viewFlow.marks._default.label.length&&(f=[{data:t.viewFlow.marks._default.label}]);f.forEach((function(e,o){e.data.forEach((function(e,o){var c,d=g++,f=(h&&e.layer,i[zo][d]),p=h?u[e.layer].indexOf(e.value):o,v=h?"".concat(e.row,"_").concat(e.column):o,m=Ui(t,v,p).value,y=(t.renderer[d]||t.renderer[0]).commonRendererProp().params.bound;if(!Ys(t,v)||0===o){if(h){var b=e.row||0,x=e.column||0;c=wc("g",".grid".concat(b,"_").concat(x),[1],r),qa(_e.axis,m)||c.attr("transform","translate(".concat(y.x,",").concat(y.y,")"))}s.rangeChart.indexOf(m)>-1&&l?(n(t,f&&f[0],p,null,d,c,e),n(t,f&&f[1],p,null,d,c,e)):n(t,f,p,null,d,c,e),s[Fo].indexOf(m)>-1&&(s.connector.indexOf(m)>-1&&a(t,f,p,d,c),n(t,i[Fo][d],p,Fo,d,c,e)),s[Bo].indexOf(m)>-1&&n(t,i[Bo][d],p,Bo,d,c,e)}}))}))}};return c.getLabel=function(e){if(e){var n=e.rendererIndex,a=e.seriesIndex,r=e.subSeriesIndex,o=e.itemIndex,i=e.paneid,l=Ui(t,i,a),s=_e.rangePlot.has(l.value)?[0]:[void 0,null,0];if(na(o)){var c=t.rendererConf[n].params.labelArray;return(c=c[i]||c.undefined_undefined)&&Fa(c,(function(t){return s.some((function(e){return t.id===function(t){return"lbl".concat(n,"_").concat(r,"_").concat(o,"_").concat(a,"_").concat(t)}(e)}))}))}}},c},wn.setComponent("labelRenderer",(function(t,e,n){if(n.labelHandler=null,"image"!==n.plot.renderer.mode){var a=n.dataObject;n.isAxisCategory&&function(t){var e=t.dataObject,n=e.getEncode("stack")||[];Oa(n,(function(a,r){r=e.pivot?"0_0":+r;var o=Qd(a);if((e.noofBarEnabledSeries||e.isCombinationalChart)&&null!=o){var i=n[r].layout.getAllExtents();if(t.renderVisiblePointsOnly){var l=t.axes.x.scale.domain();i=i.filter((function(t){return qa(l,t[0])}))}ww({renderer:t.renderer[o],chartObj:t,args:[{data:[i]},o,jo,r],charttype:vi,paneid:"0_0"})}}))}(n);var r=a.isCombinationalChart?n.distinctChartTypes||er(up(n.userdata)):[],o=r.includes(bi)&&r.includes(vi)?[vi]:[],i=o.length;if(i){var l={},s=n.dataObject.globalChartType,c=function(t){return pi.helpers.getChartType(t,"string")};o.forEach((function(t,e){return l[c(t)]=e})),t.sort((function(t,e){var n=l[c(t.args[0].type||s)],a=l[c(e.args[0].type||s)];return(na(n)?n:i)-(na(a)?a:i)}))}for(var u in t.forEach(ww),e)_w(n,u)(n,e[u],t);if(n.staticPaneSVG.select(".temp_label").remove(),n.labelHandler){var d=n.staticPaneSVG.selectAll("g.labelholder"),h=n.plot.renderer.mode,f=n.dataObject.hierarchical,p=f&&f.facetRendering;t.forEach((function(t){var e=t.args[1],a=t.rendererIndex,r=t.paneid,o=/(pieInnerLabels|funnelInnerLabels)/.test(t.charttype),i="pieInnerLabels"===t.charttype&&Ol(Ui(n,r,e).value)&&t.args[t.args.length-1]?Bo:o?Fo:zo,l=function(t,e){var n=t.args[1],a=t.rendererIndex,r=t.paneid,o=Ui(e,r,0).value,i=Xi(e,o,"axis")?t.args[3]:null,l=/(pieInnerLabels|funnelInnerLabels)/.test(t.charttype),s="pieInnerLabels"===t.charttype&&Ol(Ui(e,r,n).value)&&t.args[t.args.length-1]?Bo:l?Fo:zo;return e.labelHandler.getQueue(n,i,s,a,r)}(t,n),s=Wu("boundBox-".concat(h));if(s!==mn){var c=s().args(l);(p&&na(r)?wc("g",".grid".concat(r),[1],d):d).call(c,e,i,a,t)}})),n.labelHandler.draw()}}})),Tm("datalabel.default",(function(t){var e,n,a,r,o=this,i=o.chart,l=o.builderC,s=o.properties,c=(t=t||o.dataUpdate,l.animationOptions),u=s.GLT,d=s.contentType,h=[],f=this.chart.racing&&this.chart.racing.syncTransition,p=(d=d||"text",u&&u.hasShowAsFunction),g=o.properties.dataLabels.strokeColor,v=o.animate,m=c&&c._duration||100,y=c&&c._delay||0,b=i.axes.rotated;g===Oe&&(g=i.systemConf.chart.plot.datalabels.strokeColor),(r=g!==Oe)&&!Ka("paintOrder")&&(o.dataLevelStrokeColor||(o.dataLevelStrokeColor=o.datalabelOptions.stroke));var x="ordinal"===i.dataset.getDataType("x",0),C={name:"label",selector:".zc_label",mark:p?"g":"text",data:t,dataAccessor:f&&x?function(t){return i.dataset.getX(t)}:null,config:{stroke:o.helpers.styles.label.stroke(!(r&&!Ka("paintOrder"))),strokeWidth:function(t,e){return o.helpers.styles.label["stroke-width"](t,e)},dy:o.helpers.position.label.dy},anime:{},properties:Ow.call(this),onEnd:Aw.call(o,f)};if(f){var k=i.racing,w=k.jumpDuration,_=k.duration;w=w>_?_:w;var S=o.helpers.position.racingLabel;e={transform:function(t,e){return S.start.transform(t,e)},x:0,y:0},n=[{transition:f,transform:{property:"attrTween",to:function(t,e){if(na(w)){var n=i.racing.racingBarInfoMap,a=n&&n[0],r=S.end.transform(t,e,this),o=r.x,l=r.y,s=r.rotate,c=1*w/_;return function(e){var n,r=a&&a.get(t[0]).jumpStartTVal;if(na(r)){var i=e<=r+c;if(n=i?0:1,e>r&&i&&e<=1){n=(e-r)/((r+c>1?1:r+c)-r)}}else n=1,e<=c&&(n=1*e/c);var u=[o(b?e:n),l(b?n:e)],d=s(e),h="translate(".concat(u,")");return na(d)&&(h="translate(".concat(u,") rotate(").concat(d,")")),h}}var u=d3.interpolateString(this.getAttribute("transform"),S.end.transform(t,e,this));return function(t){return u(t)}}},x:0,y:0}],a={transition:f,transform:na(w)?{property:"attrTween",to:function(t,e){var n=S.exit.transform(t,e,this),a=n.x,r=n.y,o=n.rotate,i=1*w/_;return function(t){var e=1;t<=i&&(e=1*t/i);var n=[a(b?t:e),r(b?e:t)],l=o(t),s="translate(".concat(n,")");return na(l)&&(s="translate(".concat(n,") rotate(").concat(l,")")),s}}}:function(t,e){return S.exit.transform(t,e,this)}},C.config.enter=e,C.anime.update=n,C.anime.exit=a}else if(v){var O=o.helpers.position.label;e={transform:function(t,e){return O.start.transform(t,e)},x:function(t,e){return O.start.x(t,e)},y:function(t,e){return O.start.y(t,e)}},n=[{duration:"redraw"==o.isRedraw?m:0,delay:y,transform:{property:"attrTween",to:function(t,e){var n=d3.interpolateString(this.getAttribute("transform"),O.stop_1.transform(t,e,this));return function(t){return n(t)}}},x:function(t,e){return O.stop_1.x(t,e,this)},y:function(t,e){return O.stop_1.y(t,e,this)}},{duration:m,delay:y,transform:{property:"attrTween",to:function(t,e){var n=d3.interpolateString(this.getAttribute("transform"),O.end.transform(t,e));return function(t){return n(t)}}},x:function(t,e){return O.end.x(t,e)},y:function(t,e){return O.end.y(t,e)}}],a={duration:0},C.config.enter=e,C.anime.update=n,C.anime.exit=a}else{O=o.helpers.position.label;n={transform:function(t,e){return O.end.transform(t,e)},x:function(t,e){return O.end.x(t,e)},y:function(t,e){return O.end.y(t,e)},translateX:function(t,e){var n=O.end.translateXY(t,e);return n?n[0]:null},translateY:function(t,e){var n=O.end.translateXY(t,e);return n?n[1]:null}},i.dataObject.sankeyLayout&&i.dataObject.sankeyLayout.zoomTransform&&(n.translateX=function(t,e){var n=O.end.translateXY(t,e);return n?n[0]:null},n.translateY=function(t,e){var n=O.end.translateXY(t,e);return n?n[1]:null}),a={duration:0},C.config.update=n,C.anime.exit=a}C.config[d]=function(t,e){return o.helpers.text.label(t,e)};var A=Sw.call(o,t,v,c);if(A&&h.push(A),r&&!Ka("paintOrder")){o.isOutLineGroup=!0;var T={name:"outline",selector:".outline",mark:"text",data:t,config:{update:n,exit:a,stroke:o.helpers.styles.label.stroke(!0),strokeWidth:function(t,e){return o.helpers.styles.label["stroke-width"](t,e,!0)}},properties:Ow.call(this,!0),onEnd:Aw.call(o,f)};T.config[d]=function(t,e){return o.helpers.text.label(t,e)},h.push({name:"outputGroup",selector:".outputGroup",mark:"g",data:[1],children:[T],config:{strokeWidth:"inherit"}})}return h.push(C),{mark:"g",data:[1],selector:".subseries_".concat(o.subseriesIdx),properties:{attrs:{class:function(t,e){return"subseries_".concat(o.subseriesIdx)},transform:this.subSeries.translation}},children:h,onEnd:function(t){t.style("stroke-width","inherit")}}})),Nu("svg",(function(t,e,n,a,r,o,i){a=a||"label",r=wa(r,n);var l="stacklabel"===a,s=a===Fo||a===Bo,c=Zd(t),u=dc(o||c,"g",e?[1]:[],".","class","".concat(a,"_").concat(r));if(e){var d=e.properties,h=d.dataUpdate,f=d.dataLabels,p=d.data,g=d.rp,v=Ao(t)?g.legendOrderIndex:n,m=(d.rotation,d.rangeChart),y=d.yrangePos,b=d.reverseColor,x=(d.contentType,d.isMultiLine,d.chartType),C=Xi(t,x,"polarAxis"),k=Xi(t,x,"hierarchy"),w=Xi(t,x,"nonAxisMultiSeries"),_=Xi(t,x,"axis"),S=x==Gt.treemap,O="clip"===f.textOverlap,A=($x(f,t),_||C?pn:h.length),T="scatter"===d.type,E=Bi.isQuantileColorScale(t),L=f.strokeColor,M=pn,D=pn;if(L===Oe&&(L=t.systemConf.chart.plot.datalabels.strokeColor),(E||g.threshold||k||!(_||t.isGeoMap||C||w)||d.multiColoring)&&((M=function(e){return function(a,r){var o=b?A-1-r:(_||C||w)&&!d.multiColoring?n:r,i=Fs(t,o,a&&a.data?a.data:a,v),l=d.isSunburst&&d.parentInnerLabel&&a.children?d.parentInnerLabel:f,c=((a&&a.data?a.data:a)||[]).paneid;return S&&s&&/(top-outset|bottom-outset)/.test(l.position)&&P(i).opacity<.1&&(i="white"),Vd(t.systemConf,i,l,t,s,n,void 0,e,c)}})("fontColor"),D=M("strokeColor")),O)dc((Ar.SAFARI?t.svg:t.getPatternSvg()).selectAll("defs"),"g",[1],".","class","textClipPaths");m&&(u=dc(u,"g",[1],".","class","rangePos_".concat(y))),l&&u.attr("id",jo),u.attrs({"text-anchor":T?"middle":null,transform:d.translation});var I,R=Nd(u,f,t,g.color,s,n,l);R.fill;L===Oe||Ka("paintOrder")||(u.style("stroke",null),D||(D=R.stroke)),C&&u.attr("transform","translate(".concat(t.plotarea_approx.x,",").concat(t.plotarea_approx.y,")")),t.viewFlow&&t.viewFlow.marks._default.label.length&&(I=i),e.forEach((function(e,o){var i={datalabel_type:a,ctype:x,chart:t,dataUpdate:e.dataUpdate||h,actualData:e.data||p,subSeries:e,properties:d,builderC:g,rendererIndex:r,index:n,subseriesIdx:o,datalabelOptions:R,commonOptions:t.systemConf.chart.plot,options:g.commonPlotOptions,operator:I?I.operator:null},l=new cw(i);g.labelParser=l,l.initialize(u),l.getDefaultMarkParser(),l.render(u)}))}})),Nu("dial",(function(){var t,e;function n(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;n.each((function(){var n=e[0],o=e[1],i=t.commonRendererProp().params,l=i.chartObj,s=i.commonPlotOptions,c=i.color,u=i.rendererIndex,d=void 0===u?o:u,h=a.paneid,f=n.plotoptions,p=l.plotarea_approx,g=l.axes.y.groups[0].scale.domain(),v=Hd(s,f,l,o),m=Ud(v,l),y=Kx(l,i,v,zo,g[1]-g[0],0,void 0,h),b=y.contentType||"text",x="html"===b&&y.multiLine;if(m){var C=Dd(v,l)?Id(v,l)+Rd(v,l):0,k=dc(l.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Nd(k,v,l,c[0]),k.style("opacity",0);var w=[n[0].data[0][0]],_=[];if(w.forEach((function(t,e){var n="middle",a=x?"0.9em":"-.3em",r=y(t,e);k[b](r).attrs({x:c,dy:a,"text-anchor":n});var i=Bn(k.node()),c=na(v.x)?$n(v.x,t,l,i):p.x,u=na(v.y)?$n(v.y,t,l,i):p.y+(s.needle.show?i.height+(+v.padding||0)+(+s.needle.width/2||7)+C:i.height/2);x&&(na(v.y)||(u-=i.height),ho(k,c),i=Bn(k.node()));var d={X:c,Y:u,DY:a,ANCHOR:n,text:r,display:!0,ID:"lbl".concat(o,"_").concat(0,"_").concat(e),width:i.width,height:i.height};_.push(d)})),r){var S=_[0],O=dc(r,"text",m?w:[]);Nd(O,v,l,c[0]),O[b](S.text).attrs({"text-anchor":S.ANCHOR,dy:S.DY,transform:"translate(".concat(S.X,",").concat(S.Y,")")}),x&&ho(k,S.X)}else{(0,a.add)(_,o,0,null,null,d,h).properties={type:Ti,dataLabels:v,dataUpdate:w,showlabel:m,rp:i,contentType:b,isMultiLine:x,chartType:Gt.dial}}}}))}return n.renderer=function(e){return arguments.length?(t=e,n):t},n.args=function(t){return arguments.length?(e=t,n):e},n})),Nu("funnel",(function(){var t,e,n=N();function a(a,r){a.each((function(){var a,o=e[0],i=e[1],l=e[2],s=e[3],c=e[4],u=e[5],d=e[6],h=e[7],f=r.paneid,p=d.width,g=d.height,v=t.commonRendererProp().params,m=v.chartObj,y=m.systemConf,b=v.commonPlotOptions,x=v.dataset,C=v.yaxiscolumnorder,k=qd(v,f,e[8]),w=v.rendererIndex,_=void 0===w?i:w,S=Ui(m,f,i),O=S.name,A=S.value,T=t.plotarea&&t.plotarea()&&t.plotarea().top||0,P="translate(".concat(e[9],")"),E=O===Ei,L=(o=o[i]).plotoptions,M=0,D=0,I=0,R=0;if(Dd(a=Hd(b,L,m,i),m)){var z=Md(a,m),j=jd(z.hook);M=Id(a,m),D=M+Rd(a,m)+j.height,I=j.width,R=z.radius}var F=d.datalabelPadding||+a.padding||0,B=a.type,H=!0===y.chart.plot.datalabels.handleOverlapping,N=$x(a,m),W=Kx(m,v,a,zo,u,i,void 0,f),V=W.contentType||"text",Y="html"===V,U=Y&&W.multiLine,G=Ud(a,m),X=!0===a.relativeX,Z=Gn(a,"preCalculation.useBBox",!0);if(G){G=G?B:"hidden";var q=l.length,$=(iu(m.svg.selectAll("g.".concat(O,"group"))).translate,0),Q=dc(m.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),K=Q.node();Nd(Q,a,m,v.color),Q.attr("transform",P).style("opacity",0);var J=r.add;(Ys(m)?[o]:o.data).forEach((function(t,r){var o=h,s=[],u=wa(e[8],r),d={},y=[];o.forEach((function(t,e){var n,r=!tt(e),o=et($),h=o?"end":null,f=U&&Xn(a.y)?"0.9em":"0.3em",g=t.data=l[q-1-e],v=W(g,q-1-e),b=wa(a.x,(function(t,e,n){var a=at(t,$,d)+(o?-D:D);return r&&U&&!Z&&(a+=n.width/2*(o?-1:1)),a})),x=wa(a.y,(function(t,e,n){var a=E&&o?t.leftY:Ge(t.y,N-c-t.y);return r&&U&&(a-=n.height/2),a})),C=0;Q[V](v).attrs({"text-anchor":h,dy:f}),r&&U&&ho(Q,0),n=Bn(K);var k=$n(b,t,m,n),w=$n(x,t,m,n);if(r&&U&&ho(Q,k),Q.attrs({x:k,y:w}),H){if(r){C=zd((n=Bn(K)).height,M,R,I);var _=o?-(0+F+D):p+F+D;U&&!Z&&(_+=n.width/2*(o?-1:1)),y.push({id:"lbl".concat(i,"_").concat(u,"_").concat(e),x1:n.x-D,x2:n.x+n.width+D,y1:n.y-5-D-C/2,isLeft:o,y2:n.y+n.height+5+D+C/2,DX:_-k})}}else C=zd((n=Bn(K)).height,M,R,I);var S={X:k,Y:w,ANCHOR:h,DY:f,text:v,display:r,ID:"lbl".concat(i,"_").concat(u,"_").concat(e),width:r?n.width:0,height:r?n.height+C:0,hookPosition:o?Qr:$r,XY:[k,w]};Y&&(S.isLeft=o),s.push(S),$+=r?1:0})),$=-1,s.id="".concat(f,"(").concat(i,"_").concat(u,")"),s.translation=P,s.dataUpdate=o,s.overlap=d,s.connectorPath=function(t,e){$+=tt(e)?0:1;var r=s[e],o=r.Y+(U&&Xn(a.y)?r.height/2:0),i=na(a.y)?r.XY[1]:E&&et($)?t.leftY:t.y,l=[[nt(t,$,r),i],[at(t,$,d,0,r),i],[at(t,$,d,void 0,r),o]];return n(l)};var b=J(s,i,u,null,null,_);y.forEach((function(t){return t.queue=b})),k.push.apply(k,y),k.queue=b,k.queues=k.queues||[],k.queues.push(b),k.subSeriesIndex=u,b.properties={type:Ai,dataLabels:a,dataUpdate:o,showlabel:G,rp:v,trans:e[9],txtHgt:N,reverseColor:!0,onOverlap:function(t){t.overlap.stage="overlap"},contentType:V,isMultiLine:U,chartType:A},k.TOP=T-e[9][1],k.BOTTOM=g+e[9][1],k.actualType=Pi}))}function tt(t){var e=l[q-1-t],n=Rs(x.getClr(e),m)&&!Gs(m,f,q-1-t);return e.disabled||!x.getY(e,C)||!n}function et(t){switch(G){case"singleside":return!1;case"doubleside":return t%2==0;case"strokeddoubleside":return t>=s/2}}function nt(t,e,n){if(na(a.y)){var r=n.XY[1];return t._x(r,et(e))}return et(e)?t.leftx+F:t.rightx-F}function at(t,e,n,r,o){var i=et(e);return na(a.x)&&o?o.XY[0]:X&&"overlap"!=n.stage?i?t.leftx-D:t.rightx+D:(r=na(r)?r:F,i?0-r:p+r)}}))}return a.renderer=function(e){return arguments.length?(t=e,a):t},a.args=function(t){return arguments.length?(e=t,a):e},a})),Nu("funnelInnerLabels",(function(){var t,e;function n(n,a){n.each((function(){var n=e[0],r=e[1],o=e[2],i=e[4],l=e[5],s=e[6],c=e[7],u=s.width,d=t.commonRendererProp().params,h=d.rendererIndex,f=void 0===h?r:h,p=d.chartObj,g=d.commonPlotOptions,v=d.dataset,m=d.yaxiscolumnorder,y=a.paneid,b=Ui(p,y,r),x=b.name,C=b.value,k="translate(".concat(e[9],")"),w=x===Ei,_=Hd(g,(n=n[r]).plotoptions,p,r),S=_.innerLabel,O=s.datalabelPadding||+_.padding||0,A=o.length,T=!0===S.show,P=$x(S,p),E=Kx(p,d,S,Fo,l,r,void 0,y),L=E.contentType||"text",M="html"===L&&E.multiLine,D=Dd(_,p)?Id(_,p)+Rd(_,p):0;if(T=T&&Wl(p,zo),P+=2*D,!n.disabled&&T){var I=dc(p.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Nd(I,S,p,d.color),I.attr("transform",k).style("opacity",0);var R=a.add;n.data.forEach((function(t,n){var a=c,l=[],h=wa(e[8],n);a.forEach((function(t,e){var n=!function(t){var e=o[A-1-t],n=Rs(v.getClr(e),p)&&!Gs(p,y,A-1-t);return e.disabled||!v.getY(e,m)||!n}(e),a=w?t.midX:u/2,c=w?t.leftY:t.y,d="middle",f=M?"0.9em":"0.5em",g=E(o[A-1-e],A-1-e),b=null;if(I[L](g).attrs({x:a,y:c,dy:f,"text-anchor":d}),n&&M&&(ho(I,a),c-=(b=Bn(I.node())).height/2,P=b.height),n)if(b=b||Bn(I.node()),w)n=!(P>2*(t.y0-t.leftY));else{var x=s.canOverlap?(t.rightx-t.leftx-2*O)/u*i:i;n=!(P<t.y-(t.y0-t.y)+x&&P>t.y0+x-(t.y-(t.y0-t.y)+x))}var C={X:a,Y:c,DY:f,ANCHOR:d,text:g,display:n,ID:"innerlbl".concat(r,"_").concat(h,"_").concat(e),width:n?b.width:0,height:n?b.height:0};l.push(C)})),l.dataUpdate=a,l.data=o,l.translation="translate(".concat(e[9],")"),R(l,r,h,pn,Fo,f,y).properties={type:Ai,dataLabels:S,dataUpdate:a,showlabel:T,rp:d,trans:e[9],reverseColor:!0,contentType:L,isMultiLine:M,chartType:C,data:o}}))}}))}return n.renderer=function(e){return arguments.length?(t=e,n):t},n.args=function(t){return arguments.length?(e=t,n):e},n})),Nu("pie",(function(){var t,e,n,a,r,o,i;function l(l,u){l.each((function(){var l=e[0],d=e[2],h=e[3],f=e[4],p=e[5],g="translate(".concat(e[8][0],",").concat(e[8][1],")"),v=e[9]||{},y=t.commonRendererProp().params;r=y.chartObj,o=r.dataset,i=u.paneid;var b=r.systemConf,x=y.commonPlotOptions,C=qd(y,i,e[10]),k=y.datasetIndex||e[1]||0,w=wa(u.rendererIndex,k),_=(t.plotarea&&t.plotarea()||r.plotarea).height,S=t.plotarea&&t.plotarea()&&t.plotarea().top||0,O=Ui(r,i,k).value;a=Ol(O),l=l[k],n=e[6];var A,T,P,E,L=!0===b.chart.plot.datalabels.handleOverlapping,M=l.plotoptions,D=Hd(x,M,r,k);if(E=Ud(D,r),!(l.disabled||!E||a&&Gs(r,i,k))){var I=D.type,R=D.line,z=Kx(r,y,D,zo,f,k,void 0,i),j=z.contentType||"text",F="html"===j,B=F&&z.multiLine,H=Gn(D,"preCalculation.useBBox",!0),N=0,W=0,V=0,Y=0;if(Dd(D,r)){var U=Md(D,r),G=jd(U.hook);N=Id(D,r),W=N+Rd(D,r)+G.height,V=G.width,Y=U.radius}E=E?I:"hidden",A=(v.padding||+(D.padding||0))+W,P=$x(D,r),T=+(Dn.getValueOfPlotOptions(M,x)("outerPadding")||0),t.autoLabelDone=!1,t.showlabel=E,t.lineStrokeWidth=Jn(R.strokeWidth,1);var X=dc(r.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");X.attr("transform",g);var Z=u.add;(a?l:Ys(r)?[l]:l.data).forEach((function(o,l){var u=t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[l]:a?o:d,f=wa(e[10],l),v=[],b=[];Nd(X,D,r,y.color),X.style("opacity",0),u.forEach((function(e,n){var r,o=null,i=!s(e),u=0,d=c(e),g=d<0||d>on,y="doubleside"==E?d<0||d>on?-(h+A):h+A:p.centroid(e)[0],x=p.centroid(e)[1]+Ge(0,P-T-10-(h+p.centroid(e)[1])),C=g?"end":"start",w=B?"0.9em":"circular"==E&&d>on/2&&d<3*on/2?"".concat(wx(d),"em"):"0.3em",_=w,S=e.data;if(r=(a?0==e.depth:s(e))?null:z(S,n),X[j](r).attrs({x:y,y:x,dy:w,"text-anchor":C}),i&&B){ho(X,y);o=Bn(X.node());if("circular"==E)x+=m().range([-1,0]).domain(d<on?[0,on]:[2*on,on])(d)*o.height,y+=(d>0&&d<on?.5:d>on&&d<2*on?-.5:0)*o.width;else x-=.5*o.height,H||(y-=o.width/2*(g?1:-1));X.attr("y",x),ho(X,y)}if(L){t.showlabel="auto";if(B||(w="0.3em",X.attr("dy",w)),i){u=zd((o=Bn(X.node())).height,N,Y,V);var O=g?-(h+A+10):h+A+10;B&&!H&&(O+=o.width/2*(g?-1:1)),v.push({id:"lbl".concat(k,"_").concat(l,"_").concat(n),x1:o.x-W,x2:o.x+o.width+W,y1:o.y-5-W-u/2,y2:o.y+o.height+5+W+u/2,isLeft:g,actualDY:_,DX:O-y,overlappingHookPosition:g?Qr:$r})}}else u=zd((o=Bn(X.node())).height,N,Y,V);var M={X:y,Y:x,DY:w,ANCHOR:C,text:r,display:i,ID:"lbl".concat(k,"_").concat(f,"_").concat(n),width:i?o.width:0,height:i?o.height+u:0,hookPosition:"circular"===E?null:g?Qr:$r};F&&(M.isLeft=g),b.push(M)})),b.id="".concat(i,"(").concat(k,"_").concat(f,")"),b.translation=g,b.dataUpdate=u,b.renderer=t;var x=Z(b,k,f,null,null,w);v.forEach((function(t){return t.queue=x})),C.push.apply(C,v),C.queue=x,C.queues=C.queues||[],C.queues.push(x),C.subSeriesIndex=f,x.properties={type:Ai,dataLabels:D,dataUpdate:u,showlabel:t.showlabel,rp:y,trans:e[8],txtHgt:P,isSunburst:a,connectorPath:function(t,e){var a=c(t),r="M ".concat(n.centroid(t)[0]," ").concat(n.centroid(t)[1]," L").concat(p.centroid(t)[0]," ").concat(p.centroid(t)[1]);return"".concat(r," L").concat(p.centroid(t)[0]," ").concat(p.centroid(t)[1]," L").concat(a<0||a>on?-(h+A-W):h+A-W," ").concat(p.centroid(t)[1])},onNonOverlap:function(t){t.showlabel=t.renderer.showlabel=E,t.renderer.autoLabelDone=!0},onOverlap:function(t){t.connectorPath=function(e,a){var r=c(e),o=Ge(0,P-T-10-(h+p.centroid(e)[1])),i=p.centroid(e)[1]+o,l=r<0||r>on?-1:1,s=t[a].Y+(B?t[a].height/2:0),u=s-i?(h+A-W+10)*l:p.centroid(e)[0],d=p.centroid(e)[1],f=(h+A-W+10)*l,g=s;return"M ".concat(n.centroid(e)[0]," ").concat(n.centroid(e)[1]," Q ").concat(u," ").concat(d," ").concat(f," ").concat(g)}},contentType:j,isMultiLine:B,chartType:O},C.TOP=S-e[8][1],C.BOTTOM=S+_-e[8][1]}))}}))}function s(t){return!(Rs(o.getClr(a?t:t.data),r)&&(!!a||!Gs(r,i,t.index)))||a&&null==t.parent||0==t.value}function c(t){return((a?n.startAngle()(t):t.startAngle)+(a?n.endAngle()(t):t.endAngle))/2}return l.renderer=function(e){return arguments.length?(t=e,l):t},l.args=function(t){return arguments.length?(e=t,l):e},l})),Nu("pieInnerLabels",(function(){var t,e,n;function a(a,r){a.each((function(){var a=e[0],o=e[2],i=e[4],l=e[8]?"translate(".concat(e[8][0],",").concat(e[8][1],")"):null,s=e[7],c=e[9],u=t.commonRendererProp().params,d=u.rendererIndex,h=void 0===d?p:d;u.dataset,n=u.chartObj;var f=u.commonPlotOptions,p=e[1]||0,g=r.paneid,v=Ui(n,g,p).value,m=Ol(v),y=e[6],b=u.yaxiscolumnorder;c=m?c:pn,a=a[p];var x=_e.bubblePie.has(v),C=Hd(f,a.plotoptions,n,p).innerLabel,k=!0===C.show&&Wl(n,zo);if(c){var w=Rn(C.parentLabel,C);k=!1!==(na(w.show)?w.show:C.show),C=w}var _=Kx(n,u,C,Fo,i,p,void 0,g),S=_.contentType||"text",O="html"===S&&_.multiLine,A=C.textOverlap||"adjust",T=Dd(C,n)?Id(C,n)+Rd(C,n):0;if(!(a.disabled||!k||(x||m)&&Gs(n,g,p))){var P=dc(n.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Nd(P,C,n,u.color),P.attr("transform",l).style("opacity",0);var E=r.add;(m?a:Ys(n)?[a]:a.data).forEach((function(a,r){var i=x?t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[r]:a:o,d=[],f=wa(e[10],r);i.forEach((function(t,e){var a,o,i=null,l=!D(t),c="middle",h=O?"0.9em":"0.35em",v=0,k=0;if(x){var w=u.stacked,E=u.axisrotated,R=u.xscale,z=u.yscale,F=Hv.getKey(t,p,n),B=n.subrenderer[r][F];t=B.data[p],s=B.arc,v=n.dataObject.getXYvalue(E,w,R,z,b,t.data,"x",null),k=n.dataObject.getXYvalue(E,w,R,z,b,t.data,"y",null);var H=xx(n.dataObject.getXYvalue(E,w,R,z,b,t.data,"z",n.zscale)/4,I(t));_=Kx(n,u,C,Fo,B.total,p,void 0,g),a=v+H[0],o=k+H[1]}else a=s.centroid(t)[0],o=s.centroid(t)[1];var N=t.data,W=(m?0==t.depth:D(t))?null:_(N,e);if(P[S](W).attrs({x:a,y:o,dy:h,"text-anchor":c}),l&&O&&(ho(P,a),o-=(i=Bn(P.node())).height/2),A!=dn){i=i||Bn(P.node());var V=s.centroid(t),Y=i.width/2+T,U=i.height/2+T,G={x:V[0]-Y,y:V[1]-U},X={x:V[0]+Y,y:V[1]-U},Z={x:V[0]-Y,y:V[1]+U},q={x:V[0]+Y,y:V[1]+U},$=L(G,t)&&L(X,t)&&L(Z,t)&&L(q,t);if(!$){if("adjust"===A){var Q=m?y.startAngle()(t):t.startAngle,K=m?y.endAngle()(t):t.endAngle,J=I(t),tt=i.height+2*T,et=[M(G),M(X),M(Z),M(q)],nt=[G,X,Z,q],at=j(et),rt=nt[et.indexOf(at[0])],ot=nt[et.indexOf(at[1])],it=$e((rt.x-ot.x)*(rt.x-ot.x)+(rt.y-ot.y)*(rt.y-ot.y)),lt=Ze(it/2/tn((K-Q)/2))+tt,st=[Ke(J)*lt,-Qe(J)*lt];G={x:st[0]-Y,y:st[1]-U},X={x:st[0]+Y,y:st[1]-U},Z={x:st[0]-Y,y:st[1]+U},q={x:st[0]+Y,y:st[1]+U};$=L(G,t)&&L(X,t)&&L(Z,t)&&L(q,t)}$?(a=st[0]+v,o=st[1]+k):l=!1}}else i=Bn(P.node());var ct={X:a,Y:o,DY:h,ANCHOR:c,text:W,display:l,ID:"innerlbl".concat(p,"_").concat(f,"_").concat(e),width:i.width,height:i.height};d.push(ct)})),d.dataUpdate=i,d.translation=l,E(d,p,f,pn,c?Bo:Fo,h,g).properties={type:Ai,dataLabels:C,dataUpdate:i,showlabel:k,rp:u,trans:e[8],isSunburst:m,contentType:S,isMultiLine:O,chartType:v}}))}function L(t,e){var n=s.innerRadius()(e),a=s.outerRadius()(e),r=s.startAngle()(e),o=s.endAngle()(e),i=t.x*t.x+t.y*t.y,l=M(t);return n*n<=i&&i<=a*a&&_x(r,o,l)}function M(t){return en(t.x,-t.y)}function D(t){return!(il(m?t:t.data||t,n)&&(!(!x&&!m)||!Gs(n,g,t.index)))||m&&null==t.parent||0==t.value}function I(t){return((m?y.startAngle()(t):t.startAngle)+(m?y.endAngle()(t):t.endAngle))/2}}))}return a.renderer=function(e){return arguments.length?(t=e,a):t},a.args=function(t){return arguments.length?(e=t,a):e},a}));var Tw={top:"0.91em",center:"0.3em",bottom:"-0.3em"};function Pw(t){var e=t.config,n=t.data,a=t.bound,r=e.text,o=e.hAlign,i=void 0===o?"left":o,l=e.vAlign,s=void 0===l?"top":l,c=Da(wa(e.margin,3)),u=Da(wa(t.margin,e.margin,3)),d=function(t,e){var n=t.x,a=void 0===n?0:n,r=t.y,o=void 0===r?0:r;return{left:a+e.left,top:o+e.top,right:a+t.maxWidth+e.left-e.right,bottom:o+t.maxHeight+e.top-e.bottom}}(a,c),h={text:Nn(r),x:c.left,y:c.top,dy:Tw[s],anchor:so[i]},f=Lr("text",null,n);return f.onEnd=d&&u&&function(t){return function(t,e,n){var a=t.node(),r=Bn(a),o="..",i={left:0,top:0,width:r.width,height:r.height};hc(a,a.textContent,i,e,Kr,o,n),a.textContent===o&&t.text("")}(t,d,u)},f.config=_objectSpread(_objectSpread({},e),h),f}function Ew(t){var e=t.config,n=t.data,a=void 0===n?[1]:n,r=e.show,o=Da(wa(e.margin,3)),i=Lr("group",".zc-legend-title",a);if(r){var l=Pw(t);l.as={x:"bb_x",y:"bb_y",width:"bb_width",height:"bb_height"};var s=Lr("_rect",null,a);s.config={x:Lw("bb_x",-o.left),y:Lw("bb_y",-o.top),width:Lw("bb_width",o.left+o.right),height:Lw("bb_height",o.top+o.bottom)},pa(s,"properties.styles",{opacity:0,display:function(){var t=l._as[l.as.width][0],e=l._as[l.as.height][0];return t||e?null:"none"}}),i.children=[l,s]}return i}function Lw(t,e){return{_type:"as",as:t,onEnd:function(t){return t+e}}}function Mw(t){var e=t.config,n=function(t){var e=t.color,n=void 0===e?hn:e,a=t.alpha;return{fillColor:n,fillOpacity:a}}(e.background),a=function(t){var e=t.show,n=t.color,a=t.size,r=t.alpha,o=t.style,i=t.lineCap,l=t.radius;if(e)return{strokeColor:n,strokeWidth:a,strokeOpacity:r,dashStyle:o,lineCap:i,radius:l};return{strokeWidth:0,radius:0}}(e.border),r=Da(t.margin||e.padding),o=Lr("_rect",".zc-legend-background");return o.dependency="legend-content",o.onStart=t.onStart,o.onEnd=t.onEnd,o.config=_objectSpread(_objectSpread(_objectSpread({},n),a),{},{x:Dw("legend-content","background_x",-r.left),y:Dw("legend-content","background_y",-r.top),width:Dw("legend-content","background_width",r.left+r.right),height:Dw("legend-content","background_height",r.top+r.bottom)}),o}function Dw(t,e,n){return{_type:"as",name:t,as:e,onEnd:function(t){return t+n}}}function Iw(t){var e=Lr("group",".zc-legend-content");return e.name="legend-content",e.as={x:"background_x",y:"background_y",width:"background_width",height:"background_height"},e}function Rw(t){var e,n,a,r,o=t.reversed,i=t.isHorizontal,l=t.scale,s=t.config,c=s.ranges&&s.ranges.length;if(r=o?{x1:i?100:0,x2:null,y1:null,y2:i?0:100}:{x1:null,x2:i?100:0,y1:i?0:100,y2:null},c){n=l.range().filter((function(t){return null!==t}));for(var u=[],d=[],h=0;h<c;h++)u.push(h,h+1),d.push(n[h],n[h]);e=u,n=d,a=k().domain(e).range([0,100])}else e=l.domain(),n=l.range(),e[0]===e[1]&&(n=[n[0],n[0]]),a=m().domain([e[0],e[e.length-1]]).range([0,100]);return _objectSpread(_objectSpread({},r),{},{stopColor:n,stopOffset:e.map((function(t){return"".concat(a(t),"%")}))})}function zw(t,e,n,a,r){if(!t.empty()){var o,i=t.nodes(),s=e.nodes(),c=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{left:0,right:0,bottom:0,top:0},r=t.x,o=void 0===r?0:r,i=t.y,l=void 0===i?0:i,s=t.maxWidth,c=t.maxHeight,u=l+a.top,d=u+c-a.bottom,h=o+a.left,f=h+s-a.right;switch(n){case"end":var p=s-e.width;h-=p,f-=p;break;case"middle":var g=(s-e.width)/2;h-=g,f-=g}return{top:u,right:f,bottom:d,left:h}}(n,a,r.anchor),u=r.translateFunction,d=r._margin,h=function(t,e){l(t).style("display","none"),l(s[e]).style("display","none"),o[e]={x1:0,y1:0,x2:0,y2:0}};!1!==r.minmaxPriority&&(i.splice(1,0,i.splice(i.length-1,1)[0]),s.splice(1,0,s.splice(s.length-1,1)[0])),o=Fw(i,u),function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{left:0,right:0,bottom:0,top:0},o="..";t.forEach((function(t,i){var s=Bn(t),c=Bw(t,a),u={left:s.x+c[0],top:s.y+c[1],width:s.width,height:s.height};hc(t,t.textContent,u,e,Kr,o,r),t.textContent===o&&l(t).text(""),t.textContent||n(t,i)}))}(i,c,h,u,d),jw(i,o,h)}}function jw(t,e,n){t.forEach((function(t,a){for(var r=a-1,o=!1;r>=0&&!o;r--)(o=ml(e[r],e[a]))&&n(t,a)}))}function Fw(t,e){return t.map((function(t){return function(t,e){var n=Bn(t),a=Bw(t,e),r={x1:n.x+a[0],y1:n.y+a[1],width:n.width,height:n.height};return r.x2=r.x1+r.width,r.y2=r.y1+r.height,r}(t,e)}))}function Bw(t,e){return e?e(t):iu(t).translate}function Hw(t,e,n,a,r,o,i,s){var c=s||t.selectAll("g.".concat(ns)).selectAll("text"),d=t.selectAll("g.tick").selectAll("text"),h=function(t,e,n,a,r){var o=r.config,i=r.bound,s=fs(o),c=[],u={left:(i=Ww(o,i,a.chartarea,a.canvasarea)).x1,top:i.y1,right:i.x2,bottom:i.y2},d={left:5,right:5,top:5,bottom:5},h="..";if(t.each((function(t,a){var r=Nw(this,e,n),o={left:r.x1,top:r.y1,width:r.width,height:r.height};hc(this,this.textContent,o,u,Kr,h,d),this.textContent===h&&l(this).text(""),c[a]=Nw(this,e,n)})),"horizontal"===s.layout&&c.length&&ml(c[0],c[1])){var f=c[1].x2-c[0].x1;t.each((function(t,a){var r=Nw(this,e,n),o={left:r.x1,top:r.y1,width:r.width,height:r.height},i=Hn(u);0===a?i.right=r.x1+f/2:i.left=r.x2-f/2,hc(this,this.textContent,o,i,Kr,h,d),this.textContent===h&&l(this).text(""),c[a]=Nw(this,e,n)}))}return c}(c,e,n,a,r);!function(t,e,n,a,r,o,i){var s=Bn(i.node()),c=[],d=[],h=0;t.each((function(){d.push(Bn(this).width)})),d=u(d),t.each((function(){var t=iu(this.parentNode).translate;c.push(Nw(this,e,n,t)),function(t,e,n,a,r,o,i,s){var c=i.config,u=i.bound,d=us.getOrient(c),h=d===Qr||d===$r?1:.5,f=(u=Ww(c,u,e.chartarea,e.canvasarea),c.title.show?Bn(s.selectAll(".zc-legend-title > text").node()).width:0),p=(u.x2-u.x1-(o.width-Ge(r,f)))*h,g=u.y2-u.y1,v={left:n[0],top:n[1],right:n[0]+p,bottom:n[1]+g},m={left:5,right:5,top:5,bottom:5},y="..";if(a.x2-a.x1>p){var b={left:n[0],top:n[1],width:a.width,height:a.height};return hc(t,t.textContent,b,v,Kr,y,m),t.textContent===y&&(l(t).text(""),l(t.parentNode).style("opacity",0)),!0}}(this,r,t,c[h],d,s,o,i)&&(c[h]=Nw(this,e,n,t)),function(t,e,n,a){for(var r,o=a-1;o>=0&&!r;o--)r=ml(n[o],n[a]);if(e.length&&(ml(n[a],e[0])||ml(n[a],e[1]))||r)return l(t.parentNode).style("display",dn),!0}(this,a,c,h)&&(c[h]={x1:0,y1:0,x2:0,y2:0}),h++}))}(d,e,n,h,a,r,i),!0===o.ticklabel.tooltip&&d.each((function(t){mc(l(this),this.__formattedValue)}))}function Nw(t,e,n,a){a=a||[0,0];var r=Bn(t),o={x1:r.x+e[0]+n[0]+a[0],y1:r.y+e[1]+n[1]+a[1],width:r.width,height:r.height};return o.x2=o.x1+r.width,o.y2=o.y1+r.height,o}function Ww(t,e,n,a){var r=t,o=us.getOrient(r),i=fs(r),l=i.hAlign,s=i.floating,c=n.width,u=n.height,d=n.left,h=n.top,f=c-r.marginLeft-r.marginRight,p=u-r.marginTop-r.marginBottom,g=d+r.marginLeft,v=h+r.marginTop,m=e,y=m.maxWidth,b=m.maxHeight;e={};return s?(e.x1=Xe(r.x,c-y),e.y1=Xe(r.y,u-b),e.x2=Xe(e.x1+y,c),e.y2=Xe(e.y1+b,u),e):(o===Kr?(e.y1=v+p-b,e.x1=l===$r?g:l===Qr?g+f-y:g+(f-y)/2):o===Jr?(e.y1=v,e.x1=l===$r?g:l===Qr?g+f-y:g+(f-y)/2):o===Qr?(e.y1=v,e.x1=g+f-y):(e.y1=v,e.x1=g),e.x2=e.x1+y,e.y2=e.y1+b,e)}function Vw(t){var e=function(t){var e,n=t.scale,a=t.config,r=t.format,o=void 0===r?function(t){return t}:r,i=t.orient,s=t.dimension,c=t.dataType,u=t.reversed,d=t.isHorizontal,h=t.bandConfig,f=void 0===h?{}:h,p=(t.viewBound,t.availableBound,t.globalFont),g=void 0===p?{}:p,v=a.tickmark,y=a.ticklabel,x=a.axisline,C=a.grid,w=a.minmaxlabels,_=x.show?wa(x.strokeWidth,1):0,S=f.labels,O=function(t,e){if(S&&S.length){var n=us.getLabelIndex(t,f,c);if(na(n)){var a=S[n];return this.__formattedValue=a,l(this).text(a)}}var r=o(t);this.__formattedValue=r,l(this).text(r)},A={dataObject:{},systemConf:{canvas:_objectSpread({},g),chart:{plot:{border:{}}}}},T={ticks:{isHierarchialLevelType:function(){}}},P=n.domain(),L=d?[0,s[0]]:[s[1],0],M=w.show&&w.excludeIntervals?[]:P;u&&L.reverse();if(f.ranges&&f.ranges.length)P=Ni(f,c),"continuous"===f.type&&c!==To?(P=E(P),f.minRange!==P[0]&&P.splice(0,0,f.minRange),e=k().domain(P).range(L)):e=b().domain(P).range(L).padding(0);else{if(M[0]===M[1]){var D=Ze(L[0]-L[1]);L=[D/2,D/2]}e=m().domain([P[0],P[P.length-1]]).range(L)}return e.origRange=L,M=w.show&&w.excludeIntervals?[]:P,{axisSpec:{orient:i,scale:e,tickFormat:O,tickValues:M,tickSizeInner:wa(v.size,6),tickSizeOuter:0,gridSize:Yw(i,s[0],s[1],_),tickPadding:wa(y.margin,3),rotation:0,renderTicklabel:!0,renderGrid:!0,isGridShow:C.show,chart:A,axis:T},updateAxisLine:function(t){return function(t,e,n,a,r){if(e.show){var o=Jn(e.strokeWidth,1),i=0,l=0;n===$r?i=o/2:n===Qr?i=-o/2:l=n===Kr?-o/2:o/2,t.attr("transform","translate(".concat(i,",").concat(l,")")).attr("d",a?"M0,0 L".concat(r[0],",0"):"M0,0 L0,".concat(r[1])).styles({"stroke-dasharray":Gr(e.style,o),"stroke-linecap":Xr(e.lineCap,e.style)})}else t.remove()}(t,x,i,d,s)},trimText:function(t){}}}(t),n=e.axisSpec,a=e.updateAxisLine,r=e.trimText,o=t.config,i=t.meta,s=t.callbackArgs,c=void 0===s?[]:s,u=Lr("group",".zc-band-axis");if(!1===o.show)return u;var d=Lr("group");return d.onEnd=function(t){t.call(fx,n,o),a(t.selectAll("path.domain")),r(t),rx(c[0],null,Uw(t),null,o.ticklabel,{data:[i]},"clr"),Uw(t).style("pointer-events","visible")},u.children=[d],u}function Yw(t,e,n,a){var r,o,i,l;return r=o=i=l=0,t==Kr?(o=-a,l=-n-a):t==Jr?(o=a,l=n+a):t==$r?(r=e+a,i=a):t==Qr&&(r=-e-a,i=-a),{x1:r,y1:o,x2:i,y2:l}}function Uw(t){return t.selectAll("text.ticklabel")}function Gw(t){var e=function(t){var e=t.config,n=t.format,a=t.data,r=t.trimText,o=t.index,i=void 0===o?function(t){return t}:o,l=t.orient,s=void 0===l?Qr:l,c=t.dimension,u=t.sliderSize,d=void 0===u?[[0,0],[0,0]]:u,h=e.show,f=e.align,p=e.padding,g=void 0===p?2:p,v=e.text,m=a.map((function(t,e){return function(t,e,n,a,r,o){var i,l,s,c,u=ua(r[o])?r[o]:r;t===Kr?n===Jr?(s="-0.3em",c=0===o?null:"end",l=-e[1]-a-Ge(0,(u[1]-e[1])/2),i=0===o?0:e[0]):n===Kr?(s="1em",c=0===o?null:"end",l=a+Ge(0,(u[1]-e[1])/2),i=0===o?0:e[0]):(s="0.3em",c=0===o?"end":null,l=-e[1]/2,i=0===o?-a-u[0]/2:e[0]+a+u[0]/2):t===Jr?n===Jr?(s="-0.3em",c=0===o?null:"end",l=-a-Ge(0,(u[1]-e[1])/2),i=0===o?0:e[0]):n===Kr?(s="1em",c=0===o?null:"end",l=e[1]+a+Ge(0,(u[1]-e[1])/2),i=0===o?0:e[0]):(s="0.3em",c=0===o?"end":null,l=e[1]/2,i=0===o?-a-u[0]/2:e[0]+a+u[0]/2):t===Qr?n===$r?(s=0!==o?"0.71em":"0em",c="end",i=-e[0]-a-Ge(0,(u[1]-e[0])/2),l=0!==o?0:e[1]):n===Qr?(s=0!==o?"0.71em":"0em",c=null,i=a+Ge(0,(u[1]-e[0])/2),l=0!==o?0:e[1]):(s=0!==o?"-0.3em":"1em",c="middle",i=-e[0]/2,l=0!==o?-a-u[0]/2:e[1]+a+u[0]/2):n===$r?(s=0!==o?"0.71em":"0em",c="end",i=-a-Ge(0,(u[1]-e[0])/2),l=0!==o?0:e[1]):n===Qr?(s=0!==o?"0.71em":"0em",c=null,i=e[0]+a+Ge(0,(u[1]-e[0])/2),l=0!==o?0:e[1]):(s=0!==o?"-0.3em":"1em",c="middle",i=e[0]/2,l=0!==o?-a-u[0]/2:e[1]+a+u[0]/2);return{x:i,y:l,dy:s,anchor:c}}(s,c,f,g,d,i(e))}));return{show:h,trimText:r,text:function(t,e){return v?v[i(e)]:n(t,i(e))},x:function(t,e){return m[i(e)].x},y:function(t,e){return m[i(e)].y},anchor:function(t,e){return m[i(e)].anchor},dy:function(t,e){return m[i(e)].dy},styles:e}}(t),n=t.data,a=e.show,r=e.text,o=e.x,i=e.y,l=e.dy,s=e.anchor,c=e.styles,u=e.trimText,d=Lr("group",".".concat(ns)),h=Lr(gr,void 0,a?n:[]);return h.config=_objectSpread(_objectSpread({},c),{},{text:r,x:o,y:i,dy:l,anchor:s}),h.onEnd=u,d.children=[h],d}function Xw(t,e,n,a){var r=t.type;if(r){var o=wa(t[r].shadow,t.shadow);if(o){var i=wa(e[0]._effectElementIndex,0)+1;n.select("path:nth-child(".concat(i,")")).attr("filter",Oc(o,a))}}}wn.setComponent("legendBackgroundSvg.parser",Mw),wn.setComponent("minmaxLabel.parser",Gw);var Zw=wn.getComponent("BrushD3");function qw(t,e){var n,a=this.options,r=this.chart,o=a.config,i=a.dimension,l=a.highlightElement,s=a.type,c=a.markerBound,u=a.handles,d=o.slider.marker,h=nl(o),f=al(o),p=h.type,g=Qw(e.point,a);if(yp(l),l.style("opacity",null),"inherit"===p)if(f.type)n=$w(f,a,g);else{var v=u.shape,m=u.position;(n=Ip("marker-".concat(d.shape),d,s,i)).shape=[[v(c.width(g),c.height(g))]],n.style.transform=Kw(g,m(g),a)}else p&&(n=$w(h,a,g));if(n){Zw.ADD_HANDLE(n,l);var y=l.selectAll("g.handle--custom");"inherit"===p?f.type&&Xw(f,[n],y,r):p&&Xw(h,[n],y,r)}}function $w(t,e,n){var a=e.dimension,r=e.type,o=t.type,i=t[o],l=Rp(r,o,a,i.size),s=Ip(o,i,r,a),c=function(t){var a=t.transform,r=a.indexOf("rotate"),o=r>-1?" ".concat(a.substr(r)):"",i="clr"===e.encode?function(t){return t.trim().replace("translate(","").replace(")","").split(/[, ]/).map((function(t){return+t}))}(a):l;t.transform=Kw(n,i,e)+o};return ua(s.style)?s.style.forEach(c):c(s.style),s}function Qw(t,e){var n=e.dataType,a=e.ranges;return n===To?a[t][0]:a&&a.length?a[t]:t.data}function Kw(t,e,n){var a=n.isHorizontal,r=n.brushScale,o=r.bandwidth?r.bandwidth():0,i=r(t)+o/2,l=[];return a?(l[0]=i,l[1]=e[1]):(l[0]=e[0],l[1]=i),lu(l)}function Jw(t,e){return t_(t,this.options)}function t_(t,e){var n=e.config,a=e.brushScale,r=e.reversed,o=e.scale,i=e.singleDomainContinuous,l=e.isHorizontal,s=e.range,c=e.ranges,u=e.encode,d=nl(n,u),h=t[l?0:1];if(c&&c.length){var f=a.bandwidth(),p=la((h+(n.filter.enabled?0:f/2))/f);return p=Ge(Xe(p,c.length-1),0),"clr"!==u||l||(p=c.length-1-p),p=r?c.length-1-p:p}return i?o.domain():("z"===u&&(h=r?Xe(Ge(h,s[1]),s[0]):Xe(Ge(h,s[0]),s[1])),e_(h,a,{triggerOffset:Ge(Jn(d.triggerOffset,10),.1),round:"z"===u}))}function e_(t,e,n){var a=n.triggerOffset,r=void 0===a?0:a,o=n.round,i=void 0!==o&&o?Ve:Ye,l=e.invert(t-r/2),s=e.invert(t+r/2),c=Ze(s-l),u=c?Ye(+(Je(c)/an).toFixed(2)):0,d=qe(10,u),h=i(e.invert(t)/d)*d,f=[h=+h.toFixed(12),h+d-1e-12];return f.data=e.invert(t),f}var n_=1e-12;function a_(t,e){var n,a=t.range,r=t.ranges,o=r&&r.length;return e=function(t,e){e[1]>e[0]?(t[1]=Xe(t[1],e[1]),t[0]=Ge(t[0],e[0])):(t[1]=Ge(t[1],e[1]),t[0]=Xe(t[0],e[0]));return t}(e,a),n=o?function(t,e){var n,a,r=e.scale_domain,o=e.datatype,i=e.isHorizontal,l=e.reversed,s=e.scale,c=e.ranges,u=Yn(s.domain().map(s)).sort(B),d=s.domain(),h=s.bandwidth();u.some((function(e,r){if(t[0]>=e&&t[0]<=e+h){var o=t[0]-e;n=o<=.5&&o>=0?Ge(r-1,0):r}if(t[1]>=e&&t[1]<=e+h){o=e+h-t[1];a=o<=.5&&o>=0?Xe(r+1,u.length-1):r}return na(n)&&na(a)})),n=Ge(0,Jn(n,0)),a=Ge(0,Jn(a,d.length-1));var f=d;o!==To&&1===c[0].length&&(f=function(t,e){for(var n=t[2],a=t[t.length-1-2],r=[],o=0;o<e.length;o++)r.push([n,e[o][0]]),n=e[o][0];return r.push(n,a),r}(r,f));if("z"!==e.encode?!i&&!l||i&&l:l){var p=n;n=u.length-1-a,a=u.length-1-p}f=f.slice(n,a+1,0),t=o===To?f:o_(t=j(E(f)),r);return t}(e,t):e.map((function(e){return t.scale.invert(e)})).sort(B),n}function r_(t,e){var n,a=e.scale,r=e.ranges,o=e.scale_domain,i=e.datatype,l=a.bandwidth()/2;if(i===To)n=[a(t[0])+l,a(t[t.length-1])+l];else{var s,c,u=a.domain();t=o_(t,o),u.forEach((function(e,n){t[0]>=e[0]&&(s=1===r[0].length?n+1:n),!na(c)&&t[1]<=e[0]&&(c=1===r[0].length?n:n-1)})),s=Ge(0,Jn(s,0)),c=Ge(0,Jn(c,u.length-1)),n=[a(u[s])+l,a(u[c])+l]}return n[0]===n[1]&&(n[0]-=n_,n[1]+=n_),n}function o_(t,e){return function(t,e){return t.indexOf(e)===t.lastIndexOf(e)}(e,t[1])||(t[1]-=n_),t}function i_(t){var e=function(t){var e=t.initialExtent,n=t.config,a=t.isHorizontal,r=t.dimension,o=t.brushScale,i=t.ranges,l=t.singleDomainContinuous,s=n.filter,c=s.enabled,u=s.slider,d=(o.bandwidth&&o.bandwidth(),6),h=l?e:i&&i.length?e.map((function(e){return function(t,e){var n=e.dataType,a=e.ranges;return n===To?a[t][0]:a&&a.length?a[t]:t[0]}(t_([e,e],t),t)})):a_(t,e);return{show:c,handles:h.map((function(e){return $w(u,t,e)})),rectHandle:pc(-d/2,-d/2,(a?0:r[0])+d,(a?r[1]:0)+d,Ia(0))}}(t),n=t.isHorizontal,a=e.show,r=e.handles,o=e.rectHandle,i=Lr("group",".zc-band-brush-handle");return pa(i,"properties.styles",{visibility:"hidden","pointer-events":"none"}),a?(i.onEnd=function(t){r.forEach((function(t){t.shape=Ma(t.shape),t.style=Ma(t.style);var e=t.style[0].transform.replace("translate(","").replace(")","").split(" ").map((function(t){return+t||0}))||[0,0];ua(t.shape[0])?(t.shape.forEach((function(t){return t.push(o)})),t.style.push({transform:"translate("+(n?e[0]:0)+" "+(n?0:e[1])+")"})):(t.shape.push(o),t.style.push({transform:"translate("+(n?e[0]:0)+" "+(n?0:e[1])+")"}))})),by.ADD_HANDLE(r,t)},i):i}function l_(t){var e={label:{},grid:{color:hn},ticklabel:{fontColor:t.fontColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,tooltip:t.tooltip},minmaxlabels:{padding:2,align:"center",fontSize:t.fontSize},tickmark:{color:"#B0B0B0",size:3},axisline:{show:!1}},n=t.colorAxis||{};return n=Rn(e,n,!0)}function s_(t,e,n,a){var r=t.type,o=t[r],i="horizontal"===a.layout;return"triangleUp"===r||"triangleDown"===r?[0,0]:"lever"===r||"vernier"===r?[o.width,o.height]:"pentagon"===r?[o.size+2*o.bandWidth,e[i?1:0]+1.5*o.bandWidth+2]:[o.size,o.size]}function c_(t,e,n){var a=fs(t);return[us.getColorBandDimension(t,e,n),"horizontal"===a.layout,t.colorBand.ranges&&t.colorBand.ranges.length]}function u_(t,e){var n,a,r=[t[0],t[1]+1e-12],o=1===e[0].length;return e.forEach((function(t,e){t[0]<=r[0]&&(n=e),t[1===t.length?0:1]<=r[1]&&(a=e)})),Xn(n)?n=0:o&&n++,Xn(a)&&(a=e.length-1),[e[n],e[a]]}function d_(t,e,n,a,r){var o,i,l=n.hAlign,s=n.vAlign,c=t.bandwidth?t.bandwidth():0,u=e.bandwidth?e.bandwidth():0,d=a.width,h=a.height,f=function(e){return t(e)+c/2};return r.layout===no?(o=function(t){return e(t)+u/2},i=s===Jr?function(t){return f(t)/2}:s===Kr?function(t){return h-f(t)/2}:function(t){return h/2}):(i=function(t){return e(t)+u/2},o=l===$r?function(t){return f(t)/2}:l===Qr?function(t){return d-f(t)/2}:function(t){return d/2}),{x:o,y:i,r:f}}function h_(t,e,n){var a,r=t.ranges,o=t.reversed,i=t.config,l=t.sizeScale,s=t.datatype,c=t.singleDomainContinuous,u=i.filter.range;if(u&&(e=e||(o?Yn(u).reverse():u)),c)return l.domain();if(e){if(s===To){var d=[e[0],e[e.length-1]];a=o?Yn(d).reverse():d}else a=r&&r.length?u_(Yn(e).sort(B),r):n?Yn(e).reverse():e;return r&&r.length&&o&&(a=Yn(a).reverse()),a}var h=l.domain(),f=[h[0],h[h.length-1]];return o?Yn(f).reverse():f}function f_(t){var e=p_(t),n=Lr("group",".".concat(e.className));n.config={visibility:e.show?null:"hidden","shape-rendering":"crispedges"};var a=function(t){var e=t.symbolSpec,n=t.styles,a=Lr("point",".".concat(Ql),e.data);return a.config=_objectSpread(_objectSpread({},e),n),a}(e),r=function(t){var e=t.flashSpec,n=t.styles;return{mark:"polygon",selector:".".concat($l),config:_objectSpread({points:e.points,curve:"linearClosed"},n),onStart:e.onStart}}(e);return n.children=[a,r],n}function p_(t){var e,n=t.bound,a=t.data,r=t.scale,o=t.brushScale,i=t.config,s=t.filterConfig,c=t.align,u=t.markerBound,d=t.trackConfig,h=t.className,f=i.marker,p=s.type,g=d_(r,o,f,n,c),v=g.x,m=g.y,y={points:function(){return function(t,e,n){var a,r=t.data,o=t.config,i=t.filterConfig,l=t.align,s=t.markerBound,c=o.width,u=o.height,d=o.marker.shape,h=i.type,f=l.layout===no,p=e.x,g=e.y,v=e.r,m=r.map((function(t){return{x:p(t),y:g(t),r:v(t)/2,w:s.width(t),h:s.height(t)}}));if(h){var y=m[0],b=m[1],x=(f?u:c)||0,C=x/2||y.r,k=x/2||b.r;a=f?[[y.x,y.y+C],[b.x,b.y+k],[y.x,y.y-C],[b.x,b.y-k]]:[[y.x+C,y.y],[b.x+k,b.y],[y.x-C,y.y],[b.x-k,b.y]]}else if("circle"===d)a=vl.outerTangentPoints$Circle(m[0],m[1]);else if("square"===d||"rect"===d){var w=m[0],_=m[1];a=f?[[w.x+w.w/2,w.y-w.h/2],[_.x-_.w/2,_.y-_.h/2],[w.x+w.w/2,w.y+w.h/2],[_.x-_.w/2,_.y+_.h/2]]:[[w.x+w.w/2,w.y+w.h/2],[_.x+_.w/2,_.y-_.h/2],[w.x-w.w/2,w.y+w.h/2],[_.x-_.w/2,_.y-_.h/2]]}else if("horizontal-whisker"===d||"whisker"===d){var S=m[0],O=m[1];a=f?[[S.x,S.y-S.r],[O.x,O.y-O.r],[S.x,S.y+S.r],[O.x,O.y+O.r]]:[[S.x+S.r,S.y],[O.x+O.r,O.y],[S.x-S.r,S.y],[O.x-O.r,O.y]]}else{var A=[];n.each((function(){A.push(Ac(this))})),a=vl.tangentPoints$Polygon(A,f,m)}return a&&a.length?[a[0],a[1],a[3],a[2]]:[]}(t,g,e)},onStart:function(t){return e=l(t.node().parentNode).selectAll("path.".concat(Ql))}},b={data:p?[]:a,x:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return v(t)})),y:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return m(t)})),shape:f.shape,size:function(t){return[u.width(t),u.height(t)]}};return{show:d.show,flashSpec:y,symbolSpec:b,styles:d,className:h||Kl}}function g_(t){var e=function(t){var e=t.data,n=t.config.connector;return{data:n.show?[e]:[],config:_objectSpread({points:v_(t)},n)}}(t),n=Lr("group",".".concat("zc-legend-connector")),a=Lr("polygon",".".concat("zc-connector-line"),e.data);return a.config=e.config,n.children=[a],n}function v_(t){var e=t.bound,n=t.scale,a=t.brushScale,r=t.align,o=t.config,i=t.filterConfig,l=t.markerBound,c=t.data,u=l.width,d=l.height,h=o.marker,f=h.shape,p=i.type,g=r.layout===no,v=a.bandwidth?a.bandwidth():0,m=d_(n,a,h,e,r),y=Ge(n(c[0])/2,n(c[c.length-1])/2);return function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=t.map((function(t,e){var o=wa(r[e],a(t)+v/2),i=n(t)/2;return g?{x:o,y:m.y(t),r:i,w:u(t),h:d(t)}:{x:m.x(t),y:o,r:i,w:u(t),h:d(t)}})),i=_slicedToArray(o,2),l=i[0],c=i[1];if(p||"whisker"===f||"horizontal-whisker"===f)e=[[l.x,l.y],[c.x,c.y]];else if("circle"===f)e=g?[[l.x+l.r,l.y],[c.x-c.r,c.y]]:[[l.x,l.y+l.r],[c.x,c.y-c.r]];else if("square"===f||"rect"===f)e=g?[[l.x+l.w/2,l.y],[c.x-c.w/2,c.y]]:[[l.x,l.y+l.h/2],[c.x,c.y-c.h/2]];else{var h=s("svg.svgPattern");if(!h.__cache__){h.__cache__=h.__cache__||{};var b=wc(mr,".temp_slider_marker",[1],h);b.attr("d",np(f)(2*y)),h.__cache__.edges=m_(b),b.remove()}var x=h.__cache__.edges,C=x.right,k=x.left,w=x.top,_=x.bottom;if(g){var S=[C[0]/y*l.r,C[1]/y*l.r],O=[k[0]/y*c.r,k[1]/y*c.r];e=[[l.x+S[0],l.y+S[1]],[c.x+O[0],c.y+O[1]]]}else{var A=[_[0]/y*l.r,_[1]/y*l.r],T=[w[0]/y*c.r,w[1]/y*c.r];e=[[l.x+A[0],l.y+A[1]],[c.x+T[0],c.y+T[1]]]}}var P=g?e[0][0]>e[1][0]||e[1][0]<e[0][0]:e[0][1]>e[1][1]||e[1][1]<e[0][1];return P&&(e=[]),e}}function m_(t){var e=Ac(t),n={};return e.forEach((function(t){var e=t[1]<1&&t[1]>-1&&t[0]<=0,a=t[1]<1&&t[1]>-1&&t[0]>=0,r=t[0]<1&&t[0]>-1&&t[1]<=0,o=t[0]<1&&t[0]>-1&&t[1]>=0;e&&(!n.left||n.left[0]>t[0])&&(n.left=t),a&&(!n.right||n.right[0]<t[0])&&(n.right=t),r&&(!n.top||n.top[1]>t[1])&&(n.top=t),o&&(!n.bottom||n.bottom[1]<t[1])&&(n.bottom=t)})),n}function y_(t){var e=function(t){var e=t.scale,n=t.config,a=t.format,r=t.orient,o=t.viewBound,i=t.availableBound,s=t.align,c=t.data,u=n.show,d=n.tickmark,h=n.ticklabel,f=h.tooltip,p=h.labels,g=s.layout===no,v={dataObject:{},systemConf:{canvas:{},chart:{plot:{border:{}}}}},m={ticks:{isHierarchialLevelType:function(){}}},y=function(){mc(l(this),this.__formattedValue)},b=function(t){var e=x_(t),n=function(t){return t.selectAll("line.minorTicks")}(t),a={anchor:b_(r),translateFunction:function(t){var e=iu(t).translate,n=iu(t.parentNode).translate;return[e[0]+n[0],e[1]+n[1]]}};zw(e,n,i,o,a),!0===f&&e.each(y)},x={orient:r,scale:e,tickFormat:function(t,e){var n=p&&p.length?p[e]:a(t);this.__formattedValue=n,l(this).text(n)},tickValues:c,tickSizeInner:wa(d.size,6),tickSizeOuter:0,gridSize:null,tickPadding:wa(h.margin,3),rotation:0,renderTicklabel:!0,chart:v,axis:m};return{show:u,axisSpec:x,trimText:b,updateAxisLine:function(t){if(e.bandwidth){var n=e.range(),a=e.bandwidth()/2-wa(d.strokeWidth,1)/2,r=n[1]>n[0]?[n[0]+a,n[1]-a]:[n[0]-a,n[1]+a],o=g?"M".concat(r[0],",0 L").concat(r[1],",0"):"M0,".concat(r[0]," L0,").concat(r[1]);t.attr("d",o)}}}}(t),n=e.show,a=e.axisSpec,r=e.trimText,o=e.updateAxisLine,i=a.tickValues,s=t.config,c=Lr("group",".".concat("zc-slider-axis"));if(!n)return c;var u=Lr("group");return u.onEnd=function(t){t.call(fx,a,s),o(t.selectAll("path.domain")),t.selectAll("g.tick").sort((function(t,e){return t===i[0]||t===i[i.length-1]?-1:1})),r(t),x_(t).style("pointer-events","visible")},c.children=[u],c}function b_(t){return t===Qr?oo:t===$r?lo:io}function x_(t){return t.selectAll("text.ticklabel")}function C_(t){var e=function(t){var e,n=t.spec,a=t.viewScaleComponent,r=t.brushOptions,o=n.config,i=n.bound,l=n.format,c=n.globalFont,d=a.scale,h=a.bound,f=a.ticks,p=a.labels||f,g=o.slider,v=o.stops,m=o.ranges,y=g.axis,b=g.marker,x=g.track,C=al(o),k=wa(g.padding,3),w=y.show?wa(y.padding,3):0,_=Da(k),S=fs(o),O=S.layout===no,A=y.orient||(O?Kr:Qr),T=b.shape,P=r.reversed,L=r.brushScale,M=r.dimension,D=r.markerBound,I=r.singleDomainContinuous,R=r.sizeScale,z={width:M[0],height:M[1]},j=[p[0],p[p.length-1]],F=P?Yn(j).reverse():j,B=O?F:Yn(F).reverse(),H=I?R.domain():v&&!m?er(E([v,L.domain()])):L.domain(),N=B.map((function(t){return[d(t),d(t)]})),W=M,V={maxWidth:i.maxWidth-_.left-_.right,maxHeight:i.maxHeight-_.top-_.bottom};if(C.type){var Y=s_(C,M,0,S),U=O?1:0;N=N.map((function(t){return[Y[0],t[U]]}))}else if(r.handles&&"circle"!==T&&"square"!==T){var G=wc("path",".temp_slider_marker",[1],s("svg.svgPattern")),X=np(T),Z=[];N=B.map((function(t){G.attr("d",X(D.width(t),D.height(t)));var e=Bn(G);return Z.push(e),O?[e.width,e.width]:[e.height,e.height]})),G.remove(),W=O?[M[0],u(Z,(function(t){return t.height}))]:[u(Z,(function(t){return t.width})),M[1]]}e=O?Hn(N):Hn(N).reverse();var q=function(t,e,n,a,r){var o=t.maxWidth,i=t.maxHeight;if(n)return t;o-=a===Qr?e[0]+r:r;return{maxWidth:o,maxHeight:i}}(V,W,O,A,w),$=L.bandwidth?L.bandwidth():0;$&&N.forEach((function(t){t[0]-=$,t[1]-=$}));var Q={data:[1],config:o.title,bound:i},K={data:[1],config:o,margin:k},J={isHorizontal:O,padding:k,axisPadding:w,axisOrient:A,markerSize:e},tt={data:F,scale:d,brushScale:L,config:g,filterConfig:C,trackConfig:_objectSpread(_objectSpread({fillColor:hn},C.track),{},{show:x.show}),margin:k,bound:z,markerBound:D,align:S},et=_objectSpread(_objectSpread({},tt),{},{trackConfig:x,className:"".concat(Kl,"-selection")}),nt={data:H,format:l,scale:L,config:y,bound:z,viewBound:O?{width:h[0],height:W[1]}:{width:W[0],height:h[1]},align:S,orient:A,availableBound:q},at={format:l,data:B,index:O?void 0:function(t){return t?0:1},globalFont:c,config:y.minmaxlabels,orient:A,dimension:W,sliderSize:o.filter.enabled?N:[0,0],trimText:function(t){t.selectAll("text");var e=y.minmaxlabels.align,n=function(t,e,n,a,r,o,i,l){var s,c=t.maxWidth,u=t.maxHeight;if(a)return{maxWidth:c,maxHeight:u,x:(i.maxWidth-o[0]-l[0][0]/2-l[1][0]/2)/2};r===$r&&n===Qr?(c-=e[0],s=e[0]):n===$r?(c-=e[0],s=-e[0]):n===Qr&&(c-=e[0]);return{maxWidth:c,maxHeight:u,x:s}}(V,W,e,O,A,M,i,N),a={anchor:e===Qr?"start":e===$r?"end":"middle"};zw(t,t.selectAll(".nothing"),n,{width:0,height:0},a)}};return{titleSpec:Q,backgroundSpec:K,trackSpec:tt,axisSpec:nt,minmaxLabelSpec:at,connectorSpec:{config:g,data:F,align:S,bound:z,scale:d,brushScale:L,filterConfig:C,markerBound:D},alignSpec:J,selectionTrackSpec:et}}(t),n=e.titleSpec,a=e.backgroundSpec,r=e.trackSpec,o=e.axisSpec,i=e.minmaxLabelSpec,l=e.connectorSpec,c=e.selectionTrackSpec,d=Lr("group",".legendgroup"),h=Iw(),f=Ew(n),p=f_(r),g=f_(c),v=y_(o),m=g_(l),y=Lr("group",".".concat(Jl)),b=Gw(i),x=Mw(a);return h.onEnd=t.align,h.children=[f,p,g,v,m,y,b],d.children=[x,h],d._helper=e,d}function k_(t){var e=function(t,e){var n=t.config,a=t.bound,r=t.area,o=t.scaleComponent,i=t.globalFont,l=t.callbackArgs;Er("filter",n,null,function(t,e,n,a){var r={fillColor:hn},o={type:"lever",shadow:"0 0 2px rgba(0,0,0,0.2)",tooltip:_objectSpread(_objectSpread({},{enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)"}),{},{enabled:"continuous"===Wi(t,n)})};return{track:r,slider:Rn(Lp.apply(null,c_(t,e,a||n)),o,!0)}}(n,a,o.dataType,r),!0);var s=n.band||n.colorBand,c=l_(n),u=c.minmaxlabels,d=n.filter,h=s.padding,f=Da(h),p=fs(n),g="horizontal"===p.layout,v=us.isReversedColorAxis(n),m=us.getColorBandDimension(n,a,r),y=us.getOrient(n),b=d.enabled?s_(d.slider,m,0,p):[0,0],x=[];if(u.show)if(s.ranges&&s.ranges.length){var C=Ni(s,o.dataType);x=[C[0][0],C[C.length-1][C[C.length-1].length-1]]}else{var k=o.scale.domain();x=[k[0],k[k.length-1]]}a.maxWidth,f.left,f.right,a.maxHeight,f.top,f.bottom,c.orient;v&&x.reverse();var w={config:n.title,bound:a,margin:5},_={bound:a,config:s,dimension:m,patternSVG:t.chartObj.getPatternSvg(),defsPath:t.chartObj.defsLocation,reversed:v,isHorizontal:g,scale:o.scale},S={bound:a,scale:o.scale,config:c,orient:y,dimension:m,format:t.format,dataType:o.dataType,meta:Gn(o,"schema.data.meta",!0),bandConfig:s,isHorizontal:g,reversed:v,globalFont:i,callbackArgs:l,viewBound:{width:0,height:0},availableBound:{maxWidth:a.maxWidth-f.left-f.right-(g?0:m[0]),maxHeight:a.maxHeight-f.top-f.bottom}},O={config:n,margin:h},A={format:t.format,data:x,orient:y,dimension:m,sliderSize:b,config:u,trimText:function(t){}};return{titleSpec:w,backgroundSpec:O,viewSpec:_,axisSpec:S,minmaxLabelSpec:A,brushHandleSpec:e}}(t.spec,t.brushOptions),n=e.titleSpec,a=e.viewSpec,r=e.axisSpec,o=e.backgroundSpec,i=e.minmaxLabelSpec,s=e.brushHandleSpec,c=Lr("group",".legendgroup"),u=Mw(o),d=Iw(),h=Ew(n),f=function(t){var e=t.config,n=t.dimension,a=t.patternSVG,r=t.defsPath,o=Lr("_rect",".zc-band");return pa(o,"properties.styles.pointer-events","visible"),o.config=_objectSpread(_objectSpread({},e),{},{width:n[0],height:n[1],fillColor:_objectSpread(_objectSpread({_type:"gradient",gradient:"linear",context:a,dimension:[0,n[0]]},Rw(t)),{},{defsPath:r})}),o}(a),p=i_(s),g=Vw(r),v=Gw(i),m=Lr("group",".zc-band-brush");return d.children=[h,f,g,v,m,p],d.onEnd=t.align,d.onStart=function(){l(c.element.node().parentNode).selectAll("g.highlight").style("display","none")},c.children=[u,d],c}function w_(t,e,n,a,r){var o,i=t&&t.length,l=n.domain(),s=a.domain(),c=a.bandwidth?a.bandwidth()/2:0,u=a.singleDomainContinuous;if(i){if(e)o=r_(e,{scale_domain:l,datatype:r,ranges:t,scale:a});else o=[a(s[s.length-1])+c-1e-12,a(s[0])+c+1e-12];o.sort(B)}else o=(o=e||u||a.domain()).map((function(t){return a(t)})).sort(B);return o}function __(t,e,n,a){var r=n.domain();e===To&&(t.ranges||(t.ranges=r));var o,i=t.ranges;if(i&&i.length)o=b().domain(e===To?r:Ni(t,e)).range(a).padding(0);else{var l,s=[r[0],r[r.length-1]];s[0]===s[1]&&(l=[-1,1],s=[-sn,sn]),(o=m().domain(s).range(a).clamp(!0)).singleDomainContinuous=l}return o}var S_=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){var t=this;this.brushOptions=this.getBrushOptions(),this.encode=k_({spec:this.spec,align:function(e){t.align(e,t);var n=t.spec,a=n.config,r=n.chartObj,o=n.area,i=l_(a),l=hu(o,r,null,e,a),s=e.selectAll("g.zc-band-axis"),c=e.selectAll("g.zc-legend-minmaxlabels").selectAll("text");Hw(s,iu(s).translate,l,r,n,i,e,c),t.align(e,t)},brushOptions:this.brushOptions})}},{key:"align",value:function(t,e){var n=A_(e,"LegendTitleSvg"),a=A_(e,"Band"),r=A_(e,"Axis"),o=A_(e,"MinmaxLabel"),i=A_(e,"Brush"),l=A_(e,"BrushHandle"),s=Bn(n),c=Bn(a),u=Bn(o),d=Bn(r),h=Bn(i),f=this.brushOptions,p=f.isHorizontal,g=f.orient,v=(f.dimension,this.spec.config),m=v.band||v.colorBand,y=l_(v),b=y.show?wa(y.padding,3):0,x=wa(m.strokeWidth,1)/2,C=y.axisline,k=(C.show?wa(C.strokeWidth,1):0)-.5,w=0,_=0;(O_([0,0],n),p)?(g===Jr?(O_([w=Xe(0,d.x),(_=s.height+d.height+0+x)+x+k],a,i,l),O_([w,_],r,o)):(O_([w=-Xe(0,u.x),(_=s.height+0)-h.y],a,i,l),O_([w,_+c.height+b+x+k],r,o)),O_([Xe(0,Xe(Ga(o).left)-Ga(n).left),0],n)):g===$r?(O_([(w=d.width)+b+x,_=s.height+0+-Xe(0,u.y)],a,i,l),O_([w+c.x-k,_],r,o)):(O_([w,_=s.height+0-Xe(0,u.y)],a,i,l),O_([c.width+c.x+b+x+k,_],r),O_([c.width+c.x+x+k,_],o))}},{key:"getBrushOptions",value:function(){var t=this.spec,e=t.config,n=t.bound,a=t.area,r=t.format,o=e.ranges,i=this.spec.scaleComponent,l=i.dataType,s=i.scale,c=fs(e),u=c.layout===no,d=us.getColorBandDimension(e,n,a),h=us.getOrient(e),f=us.isReversedColorAxis(e),p=u?[0,d[0]]:[d[1],0],g=f?p.reverse():p,v=__(e,l,s,g),m={config:e,reversed:f,ranges:o,range:g,isHorizontal:u,initialExtent:w_(o,e.filter.range,s,v,l),align:c,format:r,brushScale:v,scale:v,colorScale:s,sizeScale:s,datatype:l,dataType:l,type:u?"x":"y",orient:h,dimension:d,scale_domain:s.domain(),singleDomainContinuous:v.singleDomainContinuous,encode:"clr"};return function(t){var e=t.config,n=t.dimension,a=t.isHorizontal,r=t.ranges,o=e.itemHoverStyle||{};if(o.type){var i=Lp(n,a,r&&r.length);e._itemHoverStyle=Rn(i,o,!0)}}(m),m}}]),e}(gf);function O_(t){for(var e="translate(".concat(t.join(" "),")"),n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];Oa(a,(function(t){return t.attr("transform",e)}))}function A_(t,e){return"LegendBackgroundSvg"===e?t.encode.children[0].element:t.encode.children[1].children[{LegendTitleSvg:0,Band:1,Axis:2,MinmaxLabel:3,Brush:4,BrushHandle:5}[e]].element}function T_(t,e){var n=e.type,a=e.selection,r=this.getData(t,n,a);this.associateBehaviours(t,n,r,a,e)}function P_(t,e,n,a){var r=t.instance.options.component.brushOptions,o=r.reversed,i=a_(r,n);return o?Yn(i).reverse():i}S_.encode="clr",S_.view="band",S_.domMode="svg",wn.setComponent("colorLegendBand",S_),zu(S_),wn.setComponent("_getLegendColorBandBrushArguments",(function(t){var e,n=t.legends.get("clr-0"),a=n.component,r=n.element,o=a.spec.config,i=a.brushOptions,l=i.type,s=[[0,0],i.dimension];return new(wn.getComponent("BrushD3Options"))({type:l,extent:s,component:a,behaviour:"resizeToMouse",element:(e=r,e.selectAll("g.zc-band-brush")),styles:{selection:{fillColor:hn,strokeColor:hn,fillOpacity:1},track:o.filter.track}})}));var E_=function(t){this.chartObj=t.chartObj,this.config=t.config,this.globalFont=Ma(t.globalFont||[]);var e=this.container=dc(t.container,"g",this.config.enabled?[1]:[],".","class","zc-svg-tooltip");e.style("pointer-events",dn).style("display",dn),this.boundBoxEle=dc(e,mr,[1]),this.textEle=dc(e,gr,[1]),this.styleText(),this.styleBoundBox()};function L_(t){var e=t.config,n=t.orient,a=t.chart,r=t.element,o=a.systemConf,i=_objectSpread(_objectSpread({},{enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)"}),{},{fontSize:a.globalProp.fontL1Size.l5,orient:n}),l={config:Rn(i,e,!0),container:r,globalFont:[o.chart,o.canvas]};return new E_(l)}function M_(t,e){var n,a,r,o,i,l,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],u=e.padding,d=e.margin,h=e.orient,f=Bn(t.node()),p=u+d;switch(s?(n=f.x,a=f.y,r=f.width,o=f.height):(n=f.y,a=f.x,r=f.height,o=f.width),h){case Kr:i=0,l=a-p;break;case Qr:i=n-p,l=0;break;case $r:i=n+r+p,l=0;break;case Jr:i=0,l=a+o+p}return[i+c[0],l+c[1]]}E_.prototype.show=function(t,e){yp(this.container),this.container.styles({opacity:pn,display:pn}),this.updateTextContent(t),this.positionTooltip(e),this.drawBoundBox()},E_.prototype.hide=function(t){var e=this.container;t?e.style("opacity",0).style("display",dn):e.transition().duration(t?0:250).style("opacity",0).on("end",(function(){l(this).style("display",dn)}))},E_.prototype.styleText=function(){var t=this.textEle,e=this.config.orient,n=this.globalFont,a=e===Jr||e===Kr;vc(t,[this.config].concat(_toConsumableArray(n),[wr])),t.attrs({"text-anchor":a?"middle":e===$r?"start":"end",dy:a?e===Jr?"0.9em":"-0.3em":"0.3em"})},E_.prototype.styleBoundBox=function(){var t=this.config;this.boundBoxEle.styles({fill:t.backgroundColor,stroke:t.borderColor,"stroke-width":t.borderWidth})},E_.prototype.updateTextContent=function(t){this.textEle.text(t)},E_.prototype.positionTooltip=function(t){t&&this.container.attr("transform","translate(".concat(t[0],",").concat(t[1],")"))},E_.prototype.drawBoundBox=function(){var t=this.textEle.nodes(),e=this.config,n=e.padding,a=Ia(e.borderRadius||0),r=0;this.boundBoxEle.attr("d",(function(){var e=Bn(t[r++]);return tC(e.x-n,e.y-n,e.width,e.height,a,n,Jr,{},0)}))};var D_={padding:5,margin:5};function I_(t,e,n,a,r,o,i){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},s=e.customHandles,c=r||{},u=c.systemConf,d={config:_objectSpread(_objectSpread(_objectSpread({},D_),t),{},{orient:n}),container:s,globalFont:i||[u.chart,u.canvas]},h=Gn(e.options,"component.spec",!0);this.dataFinder=a,this.chart=r;var f=this.super=new E_(d);this.container=f.container,this.boundBoxEle=f.boundBoxEle,this.tooltipOptions=f.config,this.customActions=o||{},this.options=l,this.positionTooltip(),h&&"clr"===h.encode&&!1===Gn(h.config,"events.enabled",!0)||this.addHoverEvents(e.parent_group)}function R_(t){var e=t.instance,n=e.options.component,a=n.spec,r=a.globalFont,o=a.encode,i=n.brushOptions,l=i.config,s=i.reversed,c=i.customActions,u=i.handles,d=al(l),h="clr"===o?d.slider.tooltip:d.tooltip,f=t.dataFinder.brush,p=us.getOrient(l),g="clr"===o?{}:{translate:function(t){return iu(t).translate},boxElement:function(t){return t.selectAll("path")},isHorizontal:u?void 0:function(t){return t===Jr||t===Kr}};return new I_(h,e,p,(function(n){var a=f(t,null,e.getSelection()),r=function(t,e,n){var a,r=t.ranges,o=t.reversed,i=t.config,l=t.sizeScale,s=t.datatype,c=t.singleDomainContinuous;if(e=e||i.filter.range,c)return l.domain();if(e){if(s===To){var u=[e[0],e[e.length-1]];a=o?Yn(u).reverse():u}else a=r&&r.length?u_(Yn(e).sort(B),r):n?Yn(e).reverse():e;return a}}(i,a,s);return function(t,e,n){var a,r,o=n.datatype,i=n.format,l=n.ranges,s=n.scale,c=n.reversed,u=n.isHorizontal,d=t;if(!(o!==Eo||l&&l.length)){var h=s.domain();r=[h[0],h[h.length-1]];var f=Ze(r[1]-r[0]);if(f){var p=Math.floor(Math.log(f)/Math.LN10)-2;a=Math.abs(Math.min(p,0))}}var g=e;"z"!==n.encode&&(g=u?e:+!e),c&&(g=!g);var v=d[g?d.length-1:0];return na(a)&&-1===r.indexOf(v)&&(v=ua(v)?v.map((function(t){return+t.toFixed(a)})):+v.toFixed(a)),i(v)}(r,n,i)}),null,c,r,g)}function z_(t,e,n){var a=this.chart,r=t.instance.options.component,o=r.brushOptions,i=o.config,l=o.singleDomainContinuous,s=r.spec.encode;if(n&&t.initialized&&!l){var c=a_(o,n);i.filter.range=c,ha(c)!==ha(t.previousRange)&&("clr"===s?a.addRemoveSeries():a.plot.renderer.draw(!0)),t.previousRange=c}}function j_(t,e,n){var a=t.instance.tooltip;a&&(a.positionTooltip(),a.show())}function F_(t,e,n,a,r){var o=t.instance.tooltip;o&&o.hide(r)}function B_(t,e,n){var a=this.options.highlightElement;n?a.style("opacity",0):a.transition().style("opacity",0)}function H_(){this.options.trackerElement.style("cursor",null)}function N_(t,e,n){this.options.tooltip.hide(n)}function W_(t,e){var n=this.chart,a=n.legendEvents,r=a&&a.eventManager,o=t.instance.options.component.spec.id,i=r&&r[pm(n,o)],l=i&&i.options;!Ja(i)&&l.enabled&&(B_.call(i,null,null,!0),H_.call(i),N_.call(i))}function V_(t,e,n,a){var r=a.sourceEvent;r&&r.preventDefault&&r.preventDefault()}function Y_(t,e,n){var a=t.instance,r=a.options.component.brushOptions;if(t.initialized){var o=a.getSelection(),i=function(t,e){var n,a=t.ranges,r=a&&a.length,o=t.scale;return r?n=r_(a_(t,e),t):t.singleDomainContinuous&&(n=t.singleDomainContinuous.map((function(t){return o(t)}))),n}(r,o),l=t.snapSelection,s=function(t){return parseInt(t)},c=l&&ha(o.map(s))===ha(l.map(s));ua(i)&&!c&&(i.sort(B),t.snapSelection=i,a.setSelection(i,250))}}function U_(){F_.call.apply(F_,[this].concat(Array.prototype.slice.call(arguments),[!0]))}function G_(t,e){var n=this.chart;n.cache.search={},n.cache.data={}}function X_(t,e,n,a){var r=[0,0],o=n.getSelection().slice(0),i="x"===t.type;if(t.scale.bandwidth){var l=t.scale.bandwidth();o[0]-=o[0]%l,o[1]+=l-o[1]%l}else if(t.singleDomainContinuous){var s=i?0:1;o[0]=r[s],o[1]=t.dimension[s]}kp.CLIP_TRACK(n,o,a,"colorband"),function(t,e,n,a,r){var o=wc("path",".zcbrushhighlighttracker",[1],t,":nth-child(2)"),i=n[0]+1,l=n[1]-1,s=r?"M".concat(i," ").concat(e[1],"L").concat(l," ").concat(e[1],"L").concat(l," ").concat(a[1],"L").concat(i," ").concat(a[1],"Z"):"M".concat(e[0]," ").concat(i,"L").concat(e[0]," ").concat(l,"L").concat(a[0]," ").concat(l,"L").concat(a[0]," ").concat(i,"Z");o.attr("d",s).styles({opacity:0,"stroke-width":0})}(e,r,o,t.dimension,i)}I_.prototype.show=function(){var t=this,e=0;t.super.show((function(){return t.dataFinder(e++)})),t.customActions.show&&t.customActions.show()},I_.prototype.hide=function(t){var e=this;e.super.hide(t),e.customActions.hide&&e.customActions.hide()},I_.prototype.positionTooltip=function(){var t=this.tooltipOptions,e=this.super.config.orient,n=this.options,a=n.translate,r=n.boxElement,o=void 0===r?function(t){return t}:r,i=n.isHorizontal;this.container.attr("transform",(function(){var n=o(l(this.parentNode));return lu(M_(n,t,$n(i,e),$n(a,n)))}))},I_.prototype.addHoverEvents=function(t){var e=this,n=!0;Iu(t,{mousemove:function(){"overlay"!==l(jt().srcElement||jt().target).attr("class")?(e.show(),n=!0):n&&(e.hide(),n=!1)},mouseleave:function(){e.hide(),n=!1}})};var Z_={LISTENER:{start:T_,brush:T_,end:T_},DATA_FINDER:{start:P_,brush:P_,end:P_},BEHAVIOUR:{start:[V_],brush:[U_,function(t,e){var n=t.instance,a=n.customHandles,r=n.options.component.brushOptions;!function(t,e,n){e.style("fill",(function(e,a){return function(t,e,n,a,r){var o=n?[0,t.length-1]:[t.length-1,0];return a&&o.reverse(),r(t[o[e]])}(n,a,t.isHorizontal,t.reversed,t.colorScale||t.scaleObj)}))}(r,a,a_(r,n.getSelection()))},z_,j_,W_,function(t,e,n){var a=this.chart,r=t.instance;X_(r.options.component.brushOptions,r.parent_group,r,a)}],end:[G_,F_,Y_]},LISTENER_TYPES:M(["start","brush","end"]),SUPPORTED:Ji(Ki),INIT:function(t){var e=this.chart,n=t.instance,a=n.options.component,r=a.spec.config,o=a.brushOptions.initialExtent,i=function(t){var e=t.instance.options,n=e.component,a=e.extent,r=n.brushOptions,o=r.type,i=r.config,l=(r.handles,i.filter.slider);return Fp(o,l.type,a,null,l[l.type]||{})}(t),l=function(t){var e=t.events,n=t.filter;return!(e&&0==Jn(e.enabled,!0))&&n.enabled}(r);t.initialized=!1;var s=n.addCustomHandle(i);n.setSelection(o),n.tooltip=R_(t),Xw(r.filter.slider,i,s,e),n.customHandles.style("visibility",l?null:"hidden"),l||(n.customHandles.attr("pointer-events","none"),n.destroy()),t.initialized=!0}};function q_(t,e,n,a){var r=this,o=jt(),i=Lu(r.tracker.node(),o),l=r.getData(a,i);r.associateBehaviours(a,l,i,o)}function $_(t,e){return t_(t,this.options)}function Q_(t,e){var n=this.chart,a=this.options,r=a.config,o=a.legendInstance.meta,i=o.encode,l=o.scaleComponent,s="clr"===i?l.scale:l.getScale(),c=n.dataset["clr"===i?"getClr":"getZ"](t),u="clr"===i&&n.axes.clr.indexScale;return function(t,e,n){var a=e.config,r=e.dataType,o=a.ranges,i=n.indexScale;if(r===To){var l=ua(o[0])?o.map((function(t){return t[0]})):o;return l.indexOf(t)}if(o&&o.length)return 1===o[0].length&&i?i(t):tl(t,o);var s=[t,t];return s.data=t,s}(c=ol(c,{config:r,scale:s,columnKey:n.dataset.getColumnIdx(i)}),a,{indexScale:u})}wn.setComponent("_legendColorBandBrushHandlers",Z_);var K_=wn.getComponent("BrushD3");function J_(t,e){var n,a=this.options,r=this.chart,o=a.config,i=a.highlightElement,l=nl(o,"clr"),s=l.type,c=Qw(e.point,a);(yp(i),i.style("opacity",null),s)&&(n=$w(l,a,c),K_.ADD_HANDLE(n,i),Xw(l,[n],i.selectAll("g.handle--custom"),r))}function tS(t,e,n){var a=this,r=a.chart,o=a.options,i=a.previousHighlightedItem,l=o.config,s=o.highlightManager,c=l.ranges,u=e.point,d=r.seriesdata;if((n||ha(i)!==ha(u))&&(!c||!c[u].disabled)){if(r.highlightContext=null,na(i)&&ha(i)!==ha(u)){var h=i;a.previousHighlightedItem=null,d.forEach((function(t,e){s.reset(l,e,h,d.length-1===e)}))}d.forEach((function(t,e){s.highlightSelectedSeries(l,e,u),s.highlightUnselectedSeries(l,e,u)})),a.previousHighlightedItem=u}}function eS(t,e){var n=this,a=n.chart,r=n.options,o=n.previousHighlightedItem,i=r.config,l=r.highlightManager,s=a.seriesdata;s.forEach((function(t,e){l.reset(i,e,o,s.length-1===e)})),n.previousHighlightedItem=null}function nS(){B_.call.apply(B_,[this].concat(Array.prototype.slice.call(arguments),[!0]))}function aS(){N_.call.apply(N_,[this].concat(Array.prototype.slice.call(arguments),[!0]))}function rS(t,e){var n,a=this.chart,r=this.options,o=r.highlightElement,i=r.legendInstance.component.brushOptions,l=i.ranges,s=i.colorScale,c=e.point;if(l&&l.length){var u=a.seriesColor;n=u[c%u.length]}else n=s(c.data);o.style("fill",n)}function oS(t,e){var n=this.options,a=this.targetEvent,r=n.trackerElement,o=n.config.events,i=void 0===o?{}:o,s=a.srcElement||a.target,c=l(s).classed(as)?l(s.parentNode).attr("cursor"):i.cursor||fn;r.style("cursor",c)}function iS(t,e){var n=this.options,a=n.tooltip,r=n.highlightElement,o=n.format,i=n.ranges,l=n.isHorizontal,s=n.handles,c=n.dataType,u=e.point,d=c===To?i[u][0]:i&&i.length?i[u]:u[0];a.show(o(d));var h,f=r.selectAll("g.handle--custom").selectAll(mr),p=f.node(),g=p?iu(p).translate:[0,0];h=M_(f,a.config,s?void 0:l,g),a.positionTooltip(h)}function lS(){jt().stopImmediatePropagation();var t=this.chart,e=this.options.legendInstance.meta,n=e.encode,a=e.view,r="LEGEND_".concat(Cf(n).toUpperCase(),"_").concat(a.toUpperCase(),"_BRUSH"),o=t.behaviouralEvents.eventManager.behaviours[r];o&&F_(o,0,0,0,!0)}var sS={LISTENER:{mousemove:q_,mouseout:q_},DATA_FINDER:{mousemove:$_,mouseout:$_},BEHAVIOUR:{mousemove:[lS,oS,J_,tS,rS,iS],mouseout:[H_,function(){var t=this;cS(t)?nS.call.apply(nS,[t].concat(Array.prototype.slice.call(arguments),[!0])):B_.call.apply(B_,[t].concat(Array.prototype.slice.call(arguments)))},eS,function(){var t=this;cS(t)?aS.call.apply(aS,[t].concat(Array.prototype.slice.call(arguments),[!0])):N_.call.apply(N_,[t].concat(Array.prototype.slice.call(arguments)))}]},REVERSE_DATA_FINDER:{mousemove:function(t,e){return Q_.apply(this,arguments)}},REVERSE_BEHAVIOUR:{mousemove:[J_,rS,iS],mouseout:[nS,aS]},SUPPORTED:Ji(Ki)};function cS(t){var e=t.targetEvent.relatedTarget;if(e)return l(e).classed(rs)}wn.setComponent("_legendColorBandHandlers",sS),wn.setComponent("_legendColorBandEventArguments",(function(t,e){var n=t.legends.get(e),a=n.component,r=n.meta,o=n.element,i=n.highlightManager,l=r.config,s=l.events,c=a.brushOptions,u=s&&0==wa(s.enabled,!0),d=nl(l,"clr"),h=n.enabled&&!u&&d.type&&"none"!==d.type,f=o.selectAll("g.zc-band-brush"),p=function(t,e){var n=e.filter.enabled?".selection,.zcbrushhighlighttracker":".zcbrushhighlighttracker";return t.selectAll(n).style("pointer-events","all")}(f,l),g=function(t){return wc("g",".".concat(es),[1],t).style("pointer-events","none").style("display",null).style("opacity",1)}(f),v=function(t,e,n){return L_({config:nl(n,"clr").tooltip,orient:us.getOrient(n),element:e,chart:t})}(t,g,r.config);return _objectSpread({enabled:h,config:l,trackerElement:p,highlightElement:g,highlightManager:i,tooltip:v,legendInstance:n},c)}));var uS=us.hexToRGB;function dS(t){return function(e){switch(t){case vi:case"gantt":case mi:case yi:return"M".concat(.5*-e," ").concat(.5*e," L").concat(.5*-e," ").concat(.2*-e," L").concat(.25*-e," ").concat(.2*-e," L").concat(.25*-e," ").concat(.5*e,"Z ")+" M".concat(.125*-e," ").concat(.5*e," L").concat(.125*-e," ").concat(.5*-e," L").concat(.125*e," ").concat(.5*-e," L").concat(.125*e," ").concat(.5*e,"Z ")+" M".concat(.25*e," ").concat(.5*e," L").concat(.25*e," ").concat(.1*e," L").concat(.5*e," ").concat(.1*e," L").concat(.5*e," ").concat(.5*e,"Z");case bi:case xi:return"M".concat(.5*-e," ").concat(.5*e," L").concat(.5*-e," ").concat(.28*e," L").concat(.24*-e," ").concat(.08*e," L").concat(.13*-e," ").concat(.19*e," L").concat(.07*e," ").concat(.14*-e," L").concat(.23*e," ").concat(.012*e," L").concat(.5*e," ").concat(.5*-e," L").concat(.5*e," ").concat(.5*e,"Z");case"areaLine":return"M".concat(.5*-e," ").concat(.28*e," L").concat(.24*-e," ").concat(.08*e," L").concat(.13*-e," ").concat(.19*e," L").concat(.07*e," ").concat(.14*-e," L").concat(.23*e," ").concat(.012*e," L").concat(.5*e," ").concat(.5*-e);case Ai:case Oi:case Di:case"geobubblepie":return"M".concat(.045*e," ").concat(.045*-e," L").concat(.5*e," ").concat(.045*-e," A ").concat(.455*e," ").concat(.455*e," 0 0 0 ").concat(.045*e," ").concat(.5*-e,"Z")+" M".concat(.045*-e," ").concat(.045*e," L").concat(.045*-e," ").concat(.41*-e," A ").concat(.455*e," ").concat(.455*e," 1 1 0 ").concat(.41*e," ").concat(.045*e,"Z");case Pi:return"M".concat(.5*-e," ").concat(.5*-e," L ").concat(.5*e," ").concat(.5*-e," L ").concat(.15*e," ").concat(.2*e," L ").concat(.15*e," ").concat(.5*e," L ").concat(.15*-e," ").concat(.5*e," L ").concat(.15*-e," ").concat(.2*e,"Z");case Ei:return"M0 ".concat(.5*-e," L").concat(.23*e," ").concat(.06*-e," L").concat(.23*-e," ").concat(.06*-e,"Z")+" M".concat(.5*-e," ").concat(.5*e," L").concat(.5*e," ").concat(.5*e," L").concat(.27*e," 0")+" L".concat(.27*-e," 0Z");case Li:return np("line")(e);case Ri:return np("square")(e);default:return np(t)(e)}}}function hS(t,e,n){var a,r=Kn([t,e],"dashStyle"),o=Gr(r,.75*n);if(o&&o.length){var i=Xr(Kn([t,e],"lineCap"),r);a="stroke-dasharray:".concat(o,";")+"stroke-linecap:".concat(i,";")}return a}function fS(t,e,n,a,r,o,i){var l=dS(t.symbol)(o),s="stroke:".concat(uS(t[r?"".concat(r,"StrokeColor"):"strokeColor"]||a),";")+"stroke-width:".concat(Jn(t[r?"".concat(r,"StrokeWidth"):"strokeWidth"],1),";")+"stroke-opacity:".concat(Jn(t[r?"".concat(r,"StrokeOpacity"):"strokeOpacity"],1),";")+"fill:".concat(i||uS(t[r?"".concat(r,"FillColor"):"fillColor"]||a),";")+"fill-opacity:".concat(Jn(t[r?"".concat(r,"FillOpacity"):"fillOpacity"],1),";");return"<path d='".concat(l,"' transform='translate(").concat(e/2,",").concat(n/2,")' style='").concat(s,"'></path>")}function pS(t,e,n,a,r,o,i){var l,s=t&&t.gradients?Rn(e.gradients||{},t.gradients,!0):e.gradients||{},c="",u=o.getPatternSvg();if("linear"===s.type||"radial"===s.type){var d=Nr(s,[n,a],r,1),h=Hr.get(Hr.svg_gradients,"svgGradientFill",d,{offset:i,chartObj:o}),f=(new XMLSerializer).serializeToString(u.select("#".concat(h)).node());f=f.replace(/"/g,"'"),c="<defs>".concat(f,"</defs>"),l="url(".concat(Ar.IE?"#":"%23").concat(h,")")}return{defs:c,fill:l}}Nt.getHTML4ChartTypeSymbol=function(t,e,n,a,r,o){var i=Bi.isQuantileColorScale(a),l=(a.isAxisCategory||a.dataObject.isPolarAxisCategory||a.dataObject.isHierarchy||a.isGeoMap)&&!i?r:0,s=a.chartTypes[l].name,c=a.systemConf.chart.plot.plotoptions[s],u=i?pn:a.seriesdata[l].plotoptions,d=dS(s)(t),h=Dn.getValueOfPlotOptions(u,c);switch(s){case bi:case xi:var f=Xe(wa(h("strokeWidth"),2),.15*e),p=pS(u,c,t,e,n,a,s),g=hS(u,c,f),v=u&&u.marker?Rn(c.marker,u.marker,!0):c.marker,m=o?n:p.fill||h("fillColor")||n,y=o?n:h("strokeColor")||n,b=wa(h("fillOpacity"),1),x=h("strokeOpacity"),C="",k="fill:".concat(uS(m),";fill-opacity:").concat(b,";"),w="stroke:".concat(uS(y),";stroke-width:").concat(f,";stroke-opacity:").concat(x,";fill:none;").concat(g||"");if(0!=v.enabled){C=fS(v,t,e,n,"outer",.5*Xe(t,e)),C+=fS(v,t,e,n,"inner",.35*Xe(t,e))}var _="<path d='".concat(d,"' transform='translate(").concat(t/2,",").concat(e/2,")' style='").concat(k,"'></path>"),S="<path d='".concat(dS("areaLine")(t),"' transform='translate(").concat(t/2,",").concat(e/2,")' style='").concat(w,"'></path>");return"".concat(p.defs)+_+S+C;case Ci:case Li:var O=Xe(wa(h("strokeWidth"),2),.15*e),A=u&&u.marker?Rn(c.marker,u.marker,!0):c.marker,T=o?n:h("strokeColor")||n,P=hS(u,c,O),E="",L="stroke:".concat(uS(T),";")+"stroke-width:".concat(O,";");if(P)L+=P;else if(0!=A.enabled){var M=s===Li?.5:.65,D=s===Li?.25:.45;E=fS(A,t,e,n,"outer",Xe(t,e)*M),E+=fS(A,t,e,n,"inner",Xe(t,e)*D)}return"<path d='".concat(d,"' transform='translate(").concat(t/2,",").concat(e/2,")' style='").concat(L,"'></path>").concat(E);case ki:case _i:case Si:case wi:if((A=u&&u.marker?Rn(c.marker,u.marker,!0):c.marker).imageUrl)return A.imageUrl;var I=Xe(t,e)-Jn(A.outerStrokeWidth,1),R=.5*Xe(t,e)-Jn(A.innerStrokeWidth,1),z=pS(u,c,I,I,A.outerFillColor||n,a,s),j=pS(u,c,R,R,A.innerFillColor||n,a,s);return z.defs+fS(A,t,e,n,"outer",I,z.fill)+j.defs+fS(A,t,e,n,"inner",R,j.fill);case Ii:return(B=pS(u,c,F=Xe(t,e)-Jn(c.strokeWidth,1),F,n,a,s)).defs+fS(c,t,e,n,null,F,B.fill);case Mi:var F;if(c.symbol&&np(c.symbol))return(B=pS(u,c,F=Xe(t,e)-Jn(c.strokeWidth,1),F,n,a,s)).defs+fS(c,t,e,n,null,F,B.fill);var B,H=t-(O=Jn(c.strokeWidth,1)),N=e-O;return(B=pS(u,c,H,N,n,a,s)).defs+function(t,e,n,a,r,o){var i=t.borderRadius;i&&(i=Xe(Xe(e,n)/4,i));var l=pc(-e/2,-n/2,e,n,r.dataObject.getTransRectValue("radius",null,null,null,null,i)),s="stroke:".concat(uS(t.strokeColor||a),";")+"stroke-width:".concat(Jn(t.strokeWidth,1),";")+"stroke-opacity:".concat(Jn(t.strokeOpacity,1),";")+"fill:".concat(o||uS(t.fillColor||a),";")+"fill-opacity:".concat(Jn(t.fillOpacity,1),";");return"<path d='".concat(l,"' transform='translate(").concat(e/2,",").concat(n/2,")' style='").concat(s,"'></path>")}(c,H,N,n,a,B.fill);default:var W=pS(u,c,t,e,n,a,s),V=wa(u&&u.fillOpacity,c.fillOpacity,1),Y="fill:".concat(W.fill||n,";")+"fill-opacity:".concat(V,";");return"".concat(W.defs,"<path d='").concat(d,"' transform='translate(").concat(t/2,",").concat(e/2,")' style='").concat(Y,"'></path>")}};var gS=us.getLegendData,vS=us.isDisabled,mS=us.isAllEnabled,yS=us.getClr,bS=us.toggleChartEvents,xS=us.updateData;Nt.selectAllBox=function(t,e,n,a){var r={show:!1,strokeColor:"#262626",strokeWidth:1,fillColor:hn,fontColor:"#262626",fillOpacity:1,strokeOpacity:1,disabledOpacity:.3,tooltip:{enabled:!0,color:"red",content:"Select atleast one legend"},events:{click:null,tap:null}};r.events.click=r.events.tap=T,e.legend.component&&(e.legend.component.toggleSelectAll=T);var o,i=gS(e,a),l=e.systemConf.legend,s=l.colorBox,c=Rn(r,l.selectAllBox,!0),u=al(l,"clr"),d=u.colorBox||{},h=[l,e.systemConf.canvas,wr],f=+Dn.getVal(l.fontSize||e.systemConf.canvas.fontSize),p=Kn(h,"fontColor"),g=(l.imagePallete&&du.imagePallete.get(l.imagePallete),Rn(s,c,!0)),v=us.getFilterBoxSize(g,f),m=v[0],y=v[1],b=Math.min(m,y)-(l.imagePallete||!na(l.shapes)||"square"===s.shape?0:+s.strokeWidth),x=e.container.node(),C=c.tooltip,k=c.disabledOpacity;n.allSelected=na(c.selected)?c.selected:n.allSelected;var w=t&&dc(t,"div",[1],".","class","selectAll"),_=wa(c.shape,s.shape),S="square"!==_,O={display:c.show?"inline-block":dn,width:"".concat(b,"px"),height:"".concat(b,"px"),float:"left",background:c.fillColor,position:"absolute","box-sizing":"border-box","text-align":"center","line-height":"".concat(b,"px"),"font-family":s.fontFamily,"font-size":"".concat(s.fontSize||f-2,"px"),color:function(t,e){return c.fontColor||(vS(t,n.allSelected,n.isFirstClickAfterDeselection)?d.fontColor:s.fontColor)}};if(S){var A=Ef(_objectSpread(_objectSpread({},c),{},{width:b,height:b,strokeColor:c.strokeColor,fillColor:c.fillColor,shape:_}));O.background=Lf(A,b,b),O.border="none"}else O.border="".concat(c.strokeWidth,"px solid ").concat(c.strokeColor);return w&&w.styles(O).html((function(t,e){return mS(i,n.allSelected)?wa(c.text,s.text)||"&#10003;":d.text||""})),t&&t.style("cursor",c.show?fn:null),{styles:O,html:function(){return mS(i,n.allSelected)?wa(c.text,s.text)||"&#10003;":d.text||""},element:w,options:c,size:b};function T(){if(function(){i||(i=gS(e,a));if(n.allSelected){if(vs(e))Do(e.dataObject).forEach((function(t,e){t.layer===a&&t.data.forEach((function(t,e){t.node.filtered=!n.allSelected}))})),i.forEach((function(t,e){return t.filtered=!n.allSelected}));else i.forEach((function(t,a){t.disabled=!n.allSelected,xS(t,a,e)}));e.addRemoveSeries(i,0,[0,0],!0)}}(),function(){var t,r,o=ms(e,"clr-".concat(a)),i=o.selectAll("div.legendfilterbox, div.zc-legend-legendfilterbox"),s=o.selectAll("span.legendlabel, span.legendlabel * , span.zc-legend-legendlabel, span.zc-legend-legendlabel * ");Nt.setColorBoxBackground(i,e,n,a),n.allSelected?(t=p,r=null):(t=yS(!0,p,u),r=JSON.parse(u.strikeout)?"line-through":null);s.styles({color:t,"text-decoration":r}),n.allSelected&&l.showAs&&o.selectAll("span.legendlabel, span.zc-legend-legendlabel").html((function(t,n){return fu(t,n,l,e)}))}(),bS(e,n.allSelected),us.fadeChart(n.allSelected,e,k),C.enabled){var t=e.eventHandler.tooltipElement;o||(o=t.element.selectAll("div#tooltipcontent").style("color"));var r=e.systemConf.tooltip,s=ia(na(r.borderWidth)?r.borderWidth:1);if(n.allSelected){P(t=e.eventHandler.tooltipElement,null,s,o),t.hide(t.element)}else{var c=Lu(x,jt());c={x:c[0],y:c[1]};var d=xl(jt()),h=Il(d,c,0,0,e,{},!1,!1,!1,!0,!1),f=c.x-d.clientX,g=c.y-d.clientY;h.dLeft=f,h.dTop=g,h.helpers.color=C.color,h.helpers.backgroundColor=C.backgroundColor,h.helpers.borderColor=C.borderColor,h.helpers.renderTo="legendTitle",P(t,"center",null,C.fontColor||o),t.show(e,h,C.content,!1,h.helpers),setTimeout((function(){var t=e.eventHandler.tooltipElement;P(t,null,s,o),t.hide(t.element)}),4e3)}}}function P(t,e,n,a){t.element.attr("align",e).styles({"border-width":n}),t.element.selectAll("div#tooltipcontent").style("color",a)}};var CS={SIZE_SLIDER:{_handlers:"_legendSizeSliderHandlers",_arguments:"_legendSizeSliderEventArguments"},SIZE_NESTED:{_handlers:"_legendSizeNestedHandlers",_arguments:"_legendSizeNestedEventArguments"},SIZE_LIST:{_handlers:"_legendSizeListHandlers",_arguments:"_legendSizeListEventArguments"},COLOR_BAND:{_handlers:"_legendColorBandHandlers",_arguments:"_legendColorBandEventArguments"},EXPANDABLE:{_handlers:"_legendExpandableHandlers",_arguments:"_legendExpandableEventArguments"},DISCRETE:{_handlers:"_legendDiscreteHandlers",_arguments:"_legendDiscreteEventArguments"}},kS=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"updateSelectionManager",value:function(t){this.selectionManager.point=t}},{key:"detachListeners",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this,r=a.tracker;r&&!r.empty()&&(Ru(r,t,e),Ru(r,t,n))}}]),e}(RC),wS="legend",_S=function(){function t(e){_classCallCheck(this,t),this.chart=e,this.eventManager={},this.reverseEventManager={},this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;t.chart.legends.forEach((function(e){Oa(CS,(function(n,a){t.initiateBehaviour(a,e)}))}))}},{key:"update",value:function(){this.init()}},{key:"initiateBehaviour",value:function(t,e){var n=this.chart,a=this.eventManager,r=this.reverseEventManager,o=CS[t],i=wn.getComponent(zn(o._handlers,[n])),l=e.id;if(!i._empty&&i.SUPPORTED(n,l)&&e.enabled){var s=wn.getComponent(zn(o._arguments,[n]))(n,l),c=i.BEHAVIOUR,u=i.DATA_FINDER,d=i.LISTENER,h=i.REVERSE_BEHAVIOUR,f=i.REVERSE_DATA_FINDER,p="".concat(t,"(").concat(l,")"),g=SS(p,a,n,s);if(OS(g,c,u),g.customBehaviour=function(t){var e=t.options,n=t.chart,a=e.config.events,r=void 0===a?{}:a;return function(e,a){var o=Ar.PHANTOMJS?{move:"mousemove",out:"mouseout"}:{move:"mouseenter",out:"mouseleave"},i="dblclick"===a?"doubleclick":a===o.out?"mouseout":a===o.move?"mouseover":a,l=r[i];if(l)return[{action:Vk(l,e.point,xl(t.targetEvent),null,n),type:"custom"}]}}(g),s.enabled){var v=function(t,e){var n={},a={};return Oa(e,(function(e,r){var o=function(){t.targetEvent=jt(),e.apply(t,[].concat(Array.prototype.slice.call(arguments),[r]))};qa(Eu,r)?a[r]=o:n[r]=o})),{mouseHandlers:n,touchHandlers:a}}(g,d),m=v.mouseHandlers,y=v.touchHandlers,b=s.trackerElement;g.bindTo(b),g.attachListeners(b,m,y,null,wS)}else{g.detachListeners(wS);var x="clr"===e.meta.encode&&nl(e.meta.config,"clr");if("clr"!==e.meta.encode||!x.type||"none"===x.type)return}OS(SS(p,r,n,s),h,f)}}}]),t}();function SS(t,e,n,a){e[t]=e[t]||new kS(n);var r=e[t];return r.init(),r.options=a,r}function OS(t,e,n){e&&(t.dataFinder(n),t.defaultBehaviour=e,t.customBehaviour=mn)}wn.setComponent("LegendEvents",_S);var AS=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{encode:"clr"},a={},r={},o=t.defsLocation,i=t.userdata,c=!t.nochartdata&&Bi.isQuantileColorScale(t),u=n.encode,d=n.order,h=void 0===d?0:d,f=pi.helpers,p=f.getChartType,g=us.filterSelectionByColor,v=us.isItemDisabled,m=function(e,n,a,r){var o=Ui(t,"0_0",r).value,i=_e.zaxis.indexOf(o)>-1&&!Al(o);return"z"!==u||i?g(e,n,a,t,u):n?s():e},y=n.config||t.systemConf.legend;function b(e){var n;if(t.dataObject.noofAreaEnabledSeries||t.dataObject.noofAreaRangeEnabledSeries){n=e.selectAll((function(){return this.childNodes})).filter((function(){return"g"==this.tagName}))}else n=t.dataObject.isFlowChartCategory?e.selectAll("g.sankey-links").selectAll("path.sankey-link"):e.selectAll("g.hierarchychart").selectAll("*");n.sort((function(t,e){return void 0!==t.stackIndex&&void 0!==e.stackIndex?t.stackIndex<=e.stackIndex?-1:1:t.index-e.index}))}function x(e,n,r){a.selSeriesObj=[],n.forEach((function(e){for(var n=k(e,r),o=a.getLegendHighlightEffect(e,"selectedSeries"),i=n.selectedSeries,s=n.charttypes,c=n.paneIDs,u=i.length,d=function(){var n,r=we.get(s[h]);t.dataObject.isFlowChartCategory?i[h].each((function(t){n=a.getEffect(o,r,null,null,e),S(l(this),n,t.point.itemIndex,"select")})):(n=a.getEffect(o,r,null,null,e),S(i[h],n,e,"select",c[h]))},h=0;h<u;h++)d();a.selSeriesObj.push(n)}))}function C(e,n,r){a.unselSeriesObj=w(n,r);for(var o=a.unselSeriesObj.unselectedSeries,i=a.unselSeriesObj.indices,s=a.unselSeriesObj.charttypes,c=a.unselSeriesObj.paneIDs,u=o.length,d=0;d<u;d++){var h=we.get(s[d]),f=a.getLegendHighlightEffect(i[d],"unselectedSeries");if(t.dataObject.isFlowChartCategory)o[d].each((function(t){p=a.getEffect(f,h,pn,pn,i[d]),S(l(this),p,t.point.itemIndex,"unselect")}));else{var p=a.getEffect(f,h,null,null,i[d]);S(o[d],p,i[d],"unselect",c[d])}}}function k(n,a){var r=e.selectAll("g.seriesholder"),o=p(null,"object",n,i).value,l=[],s=[],c=[],u=[];if(Ao(t))if(PS(t))g(o,n,r);else{var d=Do(t.dataObject),f=-1;d.forEach((function(e){var a=e.row,i=e.column,l=e.layer,s="".concat(a,"_").concat(i),c=r.selectAll("g.grid".concat(s));e.data.forEach((function(e,a){var r=!v(e);f++,t.userdata.facets.color.length&&l!==h||t.rendererConf[f].legendIndex()!==n||!r||g(o=Ui(t,s,a).value,a,c,s)}))}))}else g(o,n,r);return{selectedSeries:s,charttypes:l,parentSeries:c,paneIDs:u};function g(e,n,r){var o,d,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=n;if(t.seriesAddRemoveDetails&&(f=t.renderer[n].commonRendererProp().params.dynamicSeriesPosition),Al(e)){var p=r.selectAll("g.heatmapseries_".concat(n));o=p.selectAll("path")}else if(Cl(e)){var v=r.selectAll("g.barseries_".concat(f));o=v.selectAll("path.zc_bar"),s.push(t.staticPaneSVG.selectAll("g.medianSeries".concat(n)).selectAll("path.outer")),s.push(t.staticPaneSVG.selectAll("g.whiskerSeries".concat(n)).selectAll("path.outer")),l.push(Gt.scatter),l.push(Gt.scatter),u.push(h,h)}else if(e==Gt.line){var y=r.selectAll("g.lineseries_".concat(f));o=y.selectAll("path.line"),d=y}else if(Vi(e)||e==Gt.web){var b=r.selectAll("g.areaseries_".concat(f));o=b.selectAll("path.area"),d=b}else{if(kl(e)){var x=r.selectAll("g.scatterseries_".concat(f));o=x.selectAll("g.scatter");var C=(o=m(o,!0,a,n)).selectAll("path.outer"),k=o.selectAll("path.inner");return s.push(C,k),l.push(e,e),u.push(h,h),d=x,void c.push(d)}if(e===Gt.bubblepie||e===Gt.geobubblepie)o=r.selectAll("g.piegroup").selectAll("path#arc_".concat(f));else if(Tl(e)||e===Gt.dial){o=r.selectAll("g.piegroup").selectAll(na(a)?"path":"path#arc_".concat(n))}else if(e==Gt.funnel){var w=r.selectAll("g.funnelgroup"),_=w.selectAll("g.trapezoidgroup");o=_.selectAll(na(a)?"path":"path#funnel".concat(n))}else if(e==Gt.pyramid){var S=r.selectAll("g.pyramidgroup");o=S.selectAll(na(a)?"g":"g#section_".concat(n))}else if(e==Gt.wordcloud){var O=r.selectAll("g.wordcloudgroup");o=O.selectAll("text.series_".concat(f))}else if(-1!=_e.hierarchy.indexOf(e)){var A=r.selectAll("g.hierarchychart");o=A.selectAll(".series_".concat(n))}else if(e==Gt.sankey){var T=t.cache.sankey.legend[n];if(n=void 0!==a?a:n,t.systemConf.legend.ranges){var P=t.systemConf.legend.ranges,E=t.dataObject.sankeyLayout.completeGraph.nodes;a=P[n].disabled?a:void 0;var L=Array.isArray(P[0])?P[n][0]:P[n];n=E.findIndex((function(t){return t.name===L})),T=t.cache.sankey.legend[n]}var M=t.renderer[0].highlighter.getDependentLayoutPoints(T,!0,"legend");o=r.selectAll("path").filter((function(t){return qa(M,t)}))}}var D=Xi(t,e,"axis"),I=Xi(t,e,"nonAxisMultiSeries"),R=D||I||t.isGeoMap?n:0;o=m(o,!0,a,R),s.push(o),l.push(e),c.push(d),u.push(h),(Vi(e)||e==Gt.web)&&g(Gt.line,n,r,h);var z=!fa(i,"chart.plot.plotoptions.area.marker.useSVGMarkers");e==Gt.line&&(W(a)||z)&&g(Gt.scatter,n,r,h)}}function w(n,a){var r,o=[],i=[],s=[],c=[],u=e.selectAll("g.seriesholder"),d=0;Ao(t)?PS(t)?f(null,n,u,t.seriesdata):Do(t.dataObject).forEach((function(e){var a=e.row,r=e.column,o=e.layer,i=u.selectAll("g.grid".concat(a,"_").concat(r));t.userdata.facets.color.length&&o!==h?f(null,[-1],i,e.data,d,"".concat(a,"_").concat(r)):f(null,n,i,e.data,d,"".concat(a,"_").concat(r)),d+=e.data.length})):f(null,n,u,t.seriesdata);return{unselectedSeries:o,indices:i,charttypes:s,parentSeries:r,paneIDs:c};function f(e,n,u,d){var h,p,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,y=Ui(t,v,n[0]).value,b=Xi(t,y,"axis"),x=Xi(t,y,"nonAxisMultiSeries");if(b||x||t.isGeoMap)d.forEach((function(l,d){var f=PS(t)?d:t.rendererConf[g+d].legendIndex();if(1!=l.disabled&&(na(a)?qa(n,d):!qa(n,f))){p=e||Ui(t,v,d).value;var y=na(a)?n:d,b=y;if(t.seriesAddRemoveDetails&&(b=t.renderer[d].commonRendererProp().params.dynamicSeriesPosition),Al(p)){var x=u.selectAll("g.heatmapseries_".concat(y));h=x.selectAll("path")}else if(Cl(p)){var C=u.selectAll("g.barseries_".concat(b));h=C.selectAll("path.zc_bar");var k=t.renderer[y].commonRendererProp().params.whiskers;k&&k.enabled&&"overlay"==k.showOn&&(o.push(t.staticPaneSVG.selectAll("g.whiskerSeries".concat(y)).selectAll("path.outer")),s.push(Gt.scatter),i.push(y,y),c.push(v,v))}else if(p==Gt.line){var w=u.selectAll("g.lineseries_".concat(b));h=w.selectAll("path.line")}else if(Vi(p)||p==Gt.web){var _=u.selectAll("g.areaseries_".concat(b));h=_.selectAll("path.area"),r=_}else{if(kl(p)){var S=u.selectAll("g.scatterseries_".concat(b));h=S.selectAll("g.scatter");var O=(h=m(h,!1,a,d)).selectAll("path.outer"),A=h.selectAll("path.inner");return o.push(O,A),s.push(p,p),i.push(y,y),void c.push(v,v)}if(-1!=_e.hierarchy.indexOf(p)){var T=u.selectAll("g.hierarchychart");h=T.selectAll(".series_".concat(y))}else if(p==Gt.wordcloud){var P=u.selectAll("g.wordcloudgroup");h=P.selectAll(".series_".concat(y))}else _e.bubblePie.has(p)&&(h=u.selectAll("g.piegroup").selectAll("path#arc_".concat(d)))}h=m(h,!1,a,d),o.push(h),i.push(d),s.push(p),c.push(v)}}));else{var C,k=function(t,e){var r=l(this),u=+this.getAttribute("id").split(C).pop(),d=na(a)?!m(r,!1,a,0).empty():this.getAttribute("id")!=C+n;return!d||!na(a)&&qa(n,u)||(o.push(r),i.push(u),s.push(p),c.push(v)),d};if(Tl(p=e||y)||p===Gt.dial)C="arc_",h=u.selectAll("g.piegroup").selectAll("path").filter(k);else if(p==Gt.funnel)C="funnel",h=u.selectAll("g.trapezoidgroup").selectAll("path").filter(k),C="ellipse",h=u.selectAll("g.ellipsegroup").selectAll("path").filter(k);else if(p==Gt.pyramid){C="section_";var w=u.selectAll("g.pyramidgroup");h=w.selectAll("g").filter(k)}else if(p===Gt.sankey){if(n=void 0!==a?a:n,t.systemConf.legend.ranges){var _=t.systemConf.legend.ranges,S=t.dataObject.sankeyLayout.completeGraph.nodes;a=_[n].disabled?a:void 0;var O=Array.isArray(_[0])?_[n][0]:_[n];n=S.findIndex((function(t){return t.name===O}))}var A=0,T=t.cache.sankey.legend[n],P=t.renderer[A].highlighter.getDependentLayoutPoints(T,!0,"legend");h=u.selectAll("path").filter((function(t){return!qa(P,t)})),o.push(h),s.push(p),i.push(A),c.push(v)}}(Vi(p)||p==Gt.web)&&f(Gt.line,n,u,d,g,v),p==Gt.line&&W(a)&&f(Gt.scatter,n,u,d,g,v)}}function _(e,n,o,i,s,c){if(null!=o&&o.constructor==Object&&null!=e&&null!=e.node()){var u=O(e,i,s,c),d={},h=H(i),f=ps(e),p=t.cache.clickSelectionData;for(var g in o)if(o.hasOwnProperty(g)&&!qa(f,g)){h?(d[g]=d[g]||[],e.each((function(){if("selection"==s&&(1==(na(this.__data__.data)?this.__data__.data:this.__data__).clickSelection||!na(p[0])))return;d[g].push(l(this).style(g))}))):d[g]=e.style(g);var v=o[g];Ar.SAFARI||Ar.IE?e.attr(g,(function(t){if("selection"==s&&(1==(na(this.__data__.data)?this.__data__.data:this.__data__).clickSelection||!na(p[0])))return;return Dn.getVal(v,[t,i])})).style(g,(function(t){if("selection"==s&&(1==(na(this.__data__.data)?this.__data__.data:this.__data__).clickSelection||!na(p[0])))return;return Dn.getVal(v,[t,i])})):e.style(g,(function(t){if("selection"==s&&(1==(na(this.__data__.data)?this.__data__.data:this.__data__).clickSelection||!na(p[0])))return;return Dn.getVal(v,[t,i])}))}r[u]=r[u]||d,"select"===s&&a.raiseSelection(n||e,c)}}function S(t,e,n,a,o){if(null!=e&&e.constructor==Object&&null!=t&&null!=t.node()){var i=O(t,n,a,o),l=r[i],s=H(n),c=ps(t);for(var u in l)if(l.hasOwnProperty(u)&&!qa(c,u)){var d=l[u],h=function(){return s?d[f++]:d},f=0;Ar.SAFARI||Ar.IE?t.style(u,h).attr(u,h):t.style(u,h)}}}function O(t,e,n,a){var r=t.node(),o=r.localName,i=r.getAttribute("class"),l=r.getAttribute("id"),s="".concat(o,"_").concat(e);return null!=i&&(s+="_".concat(i)),null!=l&&(s+="_".concat(l)),null!==n&&(s+="_".concat(n)),null!==a&&(s+="_".concat(a)),s}function A(t,e){t.style("visibility",e?"visible":"hidden")}function P(e){return us.hasPatternPallete(t)?/(area|arearange)/.test(e)?"moody":"strokeEnlarge":/(bar|bullet|gantt|area|arearange|pie|funnel|pyramid|web|sunburst|waterfall|boxplot|sankey|barrange|dial)/.test(e)?"hatchfill":"heatmap"===e||"geoheatmap"===e?"tinyHatchfill":/(treemap|wordcloud)/.test(e)?"blackyBorder":"strokeEnlarge"}function E(t,e){return/(line|scatter)/.test(e)&&/(((\D)+fill$)|illuminate|moody|flip)/.test(t)}function L(e,n,r,o){a.selSeriesObj=[],(n=Ma(n)).forEach((function(e){var n=k(e,r);a.selSeriesObj.push(n);for(var i,s=n.selectedSeries,c=n.charttypes,u=n.parentSeries,d=n.paneIDs,h=s.length,f=0;f<h;f++){var p=a.getLegendHighlightEffect(e,o?"selection":"selectedSeries",void 0,d[f]),g=we.get(c[f]),v=a.baseClr||V(e,r);if(t.dataObject.isFlowChartCategory)s[f].each((function(n){v=t.renderer[0].getColor(n.point),i=a.getEffect(p,g,v,null,e,null,n),_(l(this),u[f],i,n.point.itemIndex,"select")}));else{var m=Ds(t.seriesdata[e],e,t);i=a.getEffect(p,g,v,m,e,null,null,null,s[f]),_(s[f],u[f],i,e,o?"selection":"select",d[f])}}}))}function M(t,e,n,r,o){var i=t.highlightContext||(t.highlightContext=Yt.canvasRenderer.updateCanvasContext(t,o?"selection-canvas":"highlight-canvas",null,t.canvasScrollGroup)),s=[0,0];t.canvasScrollGroup&&(l(i.canvas).styles({left:"0px",top:"0px"}),s=[-t.scrolledX,-t.scrolledY]),n=Ma(n);var d=function(e,n,l,d,h,f){var p=Ui(t,f,e),g=p.name,v=p.value,m=Xi(t,v,"axis"),y=Xi(t,v,"polarAxis"),b=Xi(t,v,"nonAxisMultiSeries"),x=a.getLegendHighlightEffect(e,o?"selection":"selectedSeries",void 0,f),C=a.getLegendHighlightEffect(e,"unselectedSeries",void 0,f);if(h=wa(h,m||b||t.isGeoMap?e:0),x!==dn||Fe.test(C)){var k=Yt.canvasRenderer.createCanvasRenderer(g),w=n[h],_=null,S=b&&!y||t.dataObject.isFlowChartCategory?0:e,O=t.systemConf.chart.plot.plotoptions[g].fillOpacity,A=null;if("z"!==u||_e.zaxis.indexOf(v)>-1&&!Al(v)){l=wa(l,S);var T=t.renderer[l].commonRendererProp().params,P=Ao(t)?T.legendIndex:e,E=Y(e,g)||V(P,r)||a.baseClr;if(Ee.setRendererProp(t,k,n,S,S,{labelQueue:[],labelArray:{}},l,pi.helpers.getChartType((Ao(t)?w.node.type:w.type)||t.userdata.seriesdata.type,Eo),d),c&&(Vi(v)||kl(v)))_=a.getEffect(x,v);else switch(g){case"bar":case"bullet":case"area":case"arearange":case"heatmap":case"treemap":case"web":(L=zr[x]?Fr(x):null)&&((A=Ds(w,e,t,t.plot.renderer.mode).gradient)&&(L.bgClr=L.bgClr.split(",").map((function(t){return"transparent"})).join(",")),_=TS(L,E,O,t),A&&(_={pattern:_,gradient:A}));break;case"sankey":case"wordcloud":var L;_=(L=zr[x]?Fr(x):null)?{fill:TS(L,E,O,t)}:a.getEffect(x,v);break;case"scatter":case"geoscatter":case"bubble":case"geobubble":case"line":_=a.getEffect(x,g)}var M=m||Ao(t)?n:w,D=T.bound,I=s[0]+(m?0:D.x+(y?D.polar.x:0)),R=s[1]+(m?0:D.y+(y?D.polar.y:0));i.translate(I,R),Yt.canvasRenderer.drawCanvas(t,M,k,i,_,r,u,"sankey"===p.name&&t.systemConf.legend.ranges?r:t.dataObject.isFlowChartCategory?e:h,o),i.translate(-I,-R)}}};n.forEach((function(e){if(Ao(t)){var n=Do(t.dataObject),a=0;n.forEach((function(n){var r=n.layer,o=n.row,i=n.column,l="".concat(o,"_").concat(i);n.data.forEach((function(o,i){var s=Ui(t,l,i).value,c=Xi(t,s,"axis"),u=Xi(t,s,"polarAxis");if(c||u)t.userdata.facets.color.length&&r!==h||t.rendererConf[a].legendIndex()!==e||d(i,n.data,a,o.layer,void 0,l);else if((!t.userdata.facets.color.length||r===h)&&t.rendererConf[a].legendIndex()===e){var f=a-i;d(e,n.data,f,o.layer,t.rendererConf[a].datasetIndex(),l)}a++}))}))}else d(e,t.seriesdata)}))}function D(t,e,n,r){if(a.previousFilterIndex!==r){var o=t.eventHandler.mapEvents,i=o.getPointsByIndex(n,r),l=t.dataObject.getMapFeaturesByDataPoint(i,"array"),s=o.getHighlightEffect(n,null,"selectedSeries","legend");o.highlightPoints(l,"feature",s),a.previousFilterIndex=r}}function I(e,n,r,o){for(var i=w(n=Ma(n),r),s=i.unselectedSeries,c=i.indices,u=i.charttypes,d=i.paneIDs,h=s.length,f=0;f<h;f++){var p=we.get(u[f]),g=a.getLegendHighlightEffect(c[f],o?"selection":"unselectedSeries",void 0,d[f]);if(t.dataObject.isFlowChartCategory)s[f].each((function(t){v=a.getEffect(g,p,pn,pn,c[f]),_(l(this),pn,v,t.point.itemIndex,"unselect")}));else{var v=a.getEffect(g,p,pn,pn,c[f]);_(s[f],pn,v,c[f],o?"selection":"unselect",d[f])}}}function R(e,n,r){var o=l(t.context.canvas),i=a.getLegendHighlightEffect(0,"unselectedSeries"),s=a.getEffect(i,pn,pn,pn,0);_(o,pn,s,0,"unselect")}function z(e,n,a){t.container.select(".highlight-canvas").style("visibility","hidden")}function j(e,n,r){var o=l(t.context.canvas),i=a.getLegendHighlightEffect(0,"unselectedSeries");S(o,a.getEffect(i,pn,pn,pn,0),0,"unselect")}function F(){a.previousFilterIndex=null,t.eventHandler.mapEvents.clearHighlightedPoints()}function B(e,n){if(a.getLegendHighlightEffect(n,"selectedSeries")!==dn){a.baseClr=Bs(t,n,null,h);var r=Ui(t,"0_0",n),o=r.name,i=r.value,l=k(n);if(l.selectedSeries[0].length>0)A(l.selectedSeries[0],!0);else if(t.chartRendered){t.systemConf.chart.plot.animation.enabled=!1,t.systemConf.chart.plot.plotoptions[o].animation.enabled=!1,t.seriesdata[n].plotoptions&&t.seriesdata[n].plotoptions.animation&&(t.seriesdata[n].plotoptions.animation.enabled=!1);var s=Tx(o,t),c=t.systemConf.seriesdata.chartdata[n],u=0;if(i===Gt.bar||i===Gt.stkdbar)for(var d=0;d<n;d++)i=(r=Ui(t,"0_0",d)).value,null!=t.seriesdata[d].disabled&&t.seriesdata[d].disabled||!Cl(i)||(u+=t.seriesdata[d].data.length);return Ee.setRendererProp(t,s,c,n,n,{labelQueue:[],barDatasetIndex:u}),Px(t,c,s),L(0,n),!0}}}function H(e){var n=p(null,Eo,e,i);return n!==Gt.sankey&&(-1!=_e.hierarchy.indexOf(n)||c||wl(n)||t.rendererConf&&t.rendererConf[t.isAxisCategory?e:0].thresholdType)}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0_0",n=Ui(t,e,0),r=t.dataObject;if(r.isFlowChartCategory)return!0;if(Xi(t,n.value,"hierarchy")){var o=a.getEffect(a.getLegendHighlightEffect(0,"selectedSeries"),n.name),i=Object.keys(o);return i.length>0&&i.some((function(t){return"fill"!==t}))}return!(!Xi(t,n.value,"axis")||!r.noofAreaEnabledSeries&&!r.noofAreaRangeEnabledSeries)||void 0}function W(t){return Ar.IE||Ar.SAFARI||na(t)}function V(e,n){if(na(n)&&"clr"===u){var a=t.systemConf.legend.colorBand.ranges;return a&&a.length?Bs(t,n,null,h):t.axes.clr.scale?t.axes.clr.scale((n[0]+n[1])/2):Bs(t,e,null,h)}return"z"===u?function(n,a){return Fs(t,a,n&&(n.data||n),e)}:Bs(t,e,null,h)}function Y(e,n){if(!Ao(t)&&qa([bi,xi,Li],n)){var a=t.seriesdata[e],r=t.systemConf.chart.plot.plotoptions[n];return Gn(a,"plotoptions.fillColor",!0)||r.fillColor}}return a.highlightSelectedSeries=function(e,n,r,o){if(a.baseClr=V(n,r),t.isGeoMap&&El(Ui(t,"0_0",n).value))D(t,e,n,r);else switch(t.plot.renderer.mode){case"svg":L(e,n,r,o);break;case"canvas":M(t,e,n,r,o);break;default:B(e,n)}},a.highlightUnselectedSeries=function(e,n,a,r){t.isGeoMap||"svg"===t.plot.renderer.mode?I(e,n,a,r):R(e,n,a)},a.reset=function(e,n,a,o){if(t.isGeoMap&&El(Ui(t,"0_0",n).value))F();else switch(n=Ma(n),t.plot.renderer.mode){case"svg":x(e,n,a),C(e,n,a);break;case"canvas":z(),j()}!1!==o&&(r={},this.resetSelection())},a.getLegendHighlightEffect=function(e,n,a,r){var o=Ui(t,r,e),i=o.name,l=o.value,s=Xi(t,l,"axis"),u=Xi(t,l,"nonAxisMultiSeries"),d=s||u||t.isGeoMap?(t.seriesdata[e]||t.seriesdata[0]).plotoptions:t.seriesdata[0].plotoptions,h=t.systemConf.chart.plot.plotoptions[i],f=y.highlightEffect[n],p=d&&d.legendHighlightEffect?Dn.getValueOfPlotOptions(d.legendHighlightEffect,h.legendHighlightEffect)(n):h.legendHighlightEffect&&h.legendHighlightEffect[n];if("plot"===a)return"unselectedSeries"!==n||y.highlightEffect.applyUnselectedSeriesToPlot?p||f||P(i):dn;var g="selectedSeries"===n&&c&&(Vi(l)||l===Gt.line)?"strokeEnlarge(6)":"selection"===n?"grayscale":P(i);return p||f||g},a.getEffect=function(e,n,r,i,l,s,u,d,h){if("waterfall"===n)r=function(e,n){return Fs(t,n,e,l)};else{var f=Y(l,d||n);r=f||r||a.baseClr}var p=hr(r),g=$n(e,t,r,zr,s||"legend",h,u);if(g&&g.constructor==Object)return g;e=null===e||E(e,n)||null===g?P(n):e;var v={};if(t.patternPallete&&/(flip|moody|illuminate)/.test(e)){var m=t.patternPallete[(l||0)%t.patternPallete.length],y=zr[m]?Fr(m):Br(m),b=function(n,a){var i=zn(r,[n,a]);if(y.ele)y.bgClr_base=Es(i,1,"darker",T);else{var l="flip"===e?i:Es(i,1,"moody"===e?"darker":"brighter",T);if(y.bgClr_base=l,y.stroke_base=l,y.customStaticClr=t.userdata.legend.customPatternColor,"flip"===e){var s=(y=Hn(y)).bgClr_base;y.bgClr_base=y.stroke_base,y.stroke_base=s;var c=Ca(y.bgClr),u=Ca(y.stroke);y.bgClr=u,y.stroke=c}}var d=Hr.get(Hr.svg_patterns,"svgPatternFill",y,{chartObj:t});return"url(".concat(o,"#").concat(d,")")};v.fill=p?b:b()}else if(/(saturate|grayscale|blur|glow|shadow|boxShadow)/.test(e)){var x,C=/(saturate|grayscale)/.test(e)?"colorMatrix":"dropShadow";switch(e){case"saturate":x={type:"saturate",values:"0.3"};break;case"grayscale":x={type:"matrix",values:".33 .33 .33 0 0 .33 .33 .33 0 0 .33 .33 .33 0 0 0 0 0 1 0"};break;case"blur":x={blur:2,source:"SourceGraphic"},v.opacity=.7;break;case"glow":x={blur:3,color:"gold"};break;case"shadow":x={dx:5,dy:5,blur:3};break;case"boxShadow":v.fill=r,v.stroke="white",x={dx:0,dy:0,blur:5,color:"rgba(0,0,0,0.3)"}}var k=Hr.get(Hr.svg_filters,C,x,{chartObj:t});v.filter="url(".concat(o,"#").concat(k,")")}else if(/(moody|illuminate)/.test(e)){var w="moody"===e,_=function(t,e){var n=zn(r,[t,e]);return $a(n,"url")?w?"grey":"silver":ua(n)?n.map((function(t){return Es(t,.6,w?"darker":"brighter",T)})):Es(n,.6,w?"darker":"brighter",T)};v.fill=p?_:_()}else if(e.indexOf("strokeEnlarge")>-1){var S=e.split(/(\d+)/g)[1];if(v["stroke-width"]=na(S)?+S:3,c&&(v.visibility=pn),i)for(var O in i)v[O]=i[O]}else if("fadeOut"===e)v.opacity=.3;else if("blackyBorder"===e)v.stroke="rgba(0,0,0,0.5)",v["stroke-width"]=1;else if("invert"===e)v.fill="white",v.stroke=r,v["stroke-width"]=1,v["paint-order"]=null;else if("ridge"===e)v.fill=r,v.stroke="white",v["stroke-width"]=7;else if(e!==dn){if(y=Fr(e)){_=function(n,a){var l=zn(r,[n,a]),s=Fr(e);s.bgClr_base=l,s.stroke="transparent,white,white",s.gradient=i&&i.gradient,s.bound=i&&i.bound;var c=s.gradient?"svgPatternWithGradientFill":"svgPatternFill",u=Hr.get(Hr.svg_patterns,c,s,{chartObj:t});return"url(".concat(o,"#").concat(u,")")};v.fill=p?_:_()}else v.fill=r}var A=n;if(("sankey"===n||36===n)&&e!==dn){A="".concat(A,".link");var L=fa(t.systemConf,"chart.plot.plotoptions.sankey.hoveroptions");v["fill-opacity"]=L.fillOpacity}var M=fa(t.systemConf,"chart.plot.plotoptions.".concat(A,".gradients"))||{};if(na(M.type)&&ua(r)&&n===ji){M.options[M.type].stopColor=r,!M.customGradient&&u&&uv(u,M);var D=[t.plotarea.width,t.plotarea.height];v.fill=Ms(M,D,r,"svg",1,n,!1,t)}return v},a.raiseSelection=function(t,e){N(e)&&t.raise()},a.resetSelection=function(){var n=e.selectAll("g.seriesholder");Ao(t)?Do(t.dataObject).forEach((function(t){var e=t.row,a=t.column,r="".concat(e,"_").concat(a),o=n.selectAll("g.grid".concat(r));N(r)&&b(o)})):N()&&b(n);n=null},a};function TS(t,e,n,a){var r=!a.container.select(".selection-canvas").empty();return t.bgClr_base=r?"rgba(0,0,0,0)":Ps(e,n),t.stroke="transparent,white,white",Hr.get(Hr.canvas_patterns,"canvasPatternFill",t,{chartObj:a})}function PS(t){return!Ao(t)||Ao(t)&&qa([Ai,Pi,Ei],t.chartTypes[0].name)&&!t.userdata.facets.color.length}function ES(t,e,n){var a=e.dataObject.sankeyLayout,r=L(e.cache.sankey.legendSankeyLayout.nodes,(function(t){return t.name})),o=!n.allSelected&&!n.isFirstClickAfterDeselection||t.disabled,i=e.renderer[0].getSankeyNodeByPoint(t,r),l=[];return o&&([].concat(_toConsumableArray(i.sourceLinks),_toConsumableArray(i.targetLinks)).forEach((function(t){l=[].concat(_toConsumableArray(l),_toConsumableArray(a.getConnectedNodes(t)))})),l=er(l.map((function(t){return t.point})))),l}function LS(t,e){var n=e.dataObject.sankeyLayout,a=e.renderer[0].getSankeyNodeByPoint(t),r=[];if(a){var o=n.getAllConnectedPoints(a,!0),i=o.filter((function(t){return"link"===t._type}));o.filter((function(t){return"node"===t._type})).forEach((function(t){t!==a&&(0===[].concat(_toConsumableArray(t.sourceLinks),_toConsumableArray(t.targetLinks)).filter((function(t){return!qa(i,t)})).length&&r.push(t.point))}))}return r}wn.setComponent("LegendHighlight",AS);var MS=us.getLegendData,DS=us.getLegendDataLength,IS=us.isHiddenItem,RS=us.isDisabled,zS=us.isItemDisabled,jS=us.isAllEnabled,FS=us.getClr,BS=us.updateData;function HS(t){var e=t.spec,n=e.chartObj,a=e.config,r=e.bound,o=a.border,i=a.title,l=a.list.expandable,c=void 0===l?{}:l,u=o&&o.show?o.size:0,d=r.maxWidth,h=r.maxHeight,f=fs(a).layout===no,p="z"===e.encode,g=!p&&n?us.getLegendData(n,e.order):e.data;!p&&n?us.getLegendDataLength(n,g):e.data.length;if(c.show){if(f&&!p){var v=+a.marginLeft+ +a.marginRight,m=n.canvasarea.width-v;d>m&&(d=m)}var y=wc("div",".temp_list_view",[1],s("div.__baseZC_Container__")),b=Ve(d-(p?2*u:0)),x=Ve(h-(p?2*u:0)),C=0,k=0,w=0,_=i.show,S=c._expanded;y.styles({display:"block",position:"fixed"}),c._expanded=!1;var O=_objectSpread(_objectSpread({},e),{},{data:n?us.getLegendData(n,e.order):t.viewScaleComponent().ticks}),A=new uO(O,t.viewScaleComponent);O.isPreRender=!0;for(var T,P,E,L,M,D,I,R,z,j,F,B,H=C,N=0,W=0,V=0,Y=!1,U=0;(j||!Y)&&++H<=e.data.length;)if(!e.data[H-1].hideInLegend){O.visibleItemCount=H,O.nonHidden_visibleItemCount=++U,A.create(),A.draw(y);var G=Ga(y);if(f?(k=Ve(G.width),w=Ve(G.height)):w=Ve(G.height),p)Y=Y||!0,D=k<b,I=w<x;else{i.keepAligned&&f&&(F=y.selectAll(".zc-header-legseries").style("display"),y.selectAll(".zc-header-legseries").style("display","none"),w=y.node().offsetHeight,y.selectAll(".zc-header-legseries").style("display",F));var X=y.selectAll("li.".concat(Zl)).nodes()[H-1],Z=e.data[H-1].hideInLegend?E:X.offsetTop,q=e.data[H-1].hideInLegend?L:X.offsetLeft,$=y.selectAll(".zc-expandable").node(),Q=Xn(Q)?$&&$.offsetHeight||0:Q,K=$&&$.offsetHeight||0;M=na(M)?M:X.offsetWidth,P=na(P)?P:X.offsetHeight,N=Z!=E?R:N,W=q!=L?z:W,R=w,z=k,D=k<b,I=w<x,E=na(E)?E:Z,L=na(L)?L:q;var J=Z!=E;if(J&&(B=N-Q),na(N)&&na(W)?(w===x&&N+P<=x&&(I=!0),k===b&&W+M<=b&&(D=!0),k<b&&k+M>b&&W<b&&W+M>b&&W!=k&&e.data.length!==H&&(D=!1),K||(N=B,Q=0),w<=x&&N<=x&&(J?N+P>x:K?!j:!(N+P<=x))&&(I=!1)):(W=z,N=R),q!=L&&(L=q),J)E=Z,V=j?V+1:V,Y=!(j&&!(f?p?D:D&&I||I:I))||undefined,na(T)||(T=H-1)}(j=f?p?D:D&&I||I:I)&&(C=H)}return p?(C=H,(f?k>=b:w>=x)&&C--):(j&&V++,T=na(T)?T:e.data.length,C=C||T,V=V||1),i.show=_,c._expanded=S,y.remove(),{visibleItemCount:Ge(C,1),itemCountInFirstrow:T,rowCount:V}}}function NS(t){var e=t.config,n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?hn:e,a=t.alpha,r=P(n.toString());return{"background-color":"rgba(".concat(r.r,",").concat(r.g,",").concat(r.b,",").concat(a,")")}}(e.background),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.show,n=t.size,a=t.style,r=t.color,o=t.radius;if(e)return{border:"".concat(+n,"px ").concat(a," ").concat(r),"border-radius":"".concat(o,"px")};return{border:pn}}(e.border),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.show,n=t.x,a=t.y,r=t.blur,o=t.color,i=t.inset;if(e)return{"box-shadow":"".concat(n,"px ").concat(a,"px ").concat(r,"px ").concat(o).concat(i?" inset":"")};return{"box-shadow":pn}}(e.shadow);return _objectSpread(_objectSpread(_objectSpread({},n),a),r)}function WS(t,e,n){return function(a){var r=e.width?e.width(a):e(a),o=e.height?e.height(a):e(a),i=function(t,e,n){var a=n.fillColor,r=void 0===a?hn:a,o=n.strokeColor,i=void 0===o?hn:o,l=n.shape,s=void 0===l?"square":l;return Ef(_objectSpread(_objectSpread({},n),{},{width:t,height:e,strokeColor:i,fillColor:r,shape:s}),!0)}(r,o,t);return n?Lf(i,r,o):i}}function VS(t,e,n,a,r){var o,i,l,s,c=function(t,e,n){if(t)return function(e){return[t(e),t(e)]};return function(){return us.getFilterBoxSize(e,n)}}(a,t,r),u=function(t,e,n){var a=t.width,r=t.height,o=t.overflow,i=void 0===o?"hidden":o;if((n.layout===no||!e.keepAligned)&&"visible"===i)return;if(r||a)return i}(t,e,n),d=t.width,h=t.height,f=t.shape;return u&&(o=d,i=h),"hidden"===u&&(l=d,s=h),{width:function(t){return l||c(t)[0]},height:"half-circle"===f?function(t){return(s||c(t)[1])/2}:function(t){return s||c(t)[1]},totalWidth:o,totalHeight:i,overflow:u,size:c}}function YS(t,e){return l(t.nodes()[e])}function US(t,e){var n=e.backgroundColor,a=e.borderRadius;t.styles({"background-color":n,"border-radius":na(a)?"".concat(a,"px"):null})}function GS(t,e,n,a){vc(t,[a,e.list.label,n,wr],!0)}function XS(t,e,n,a){if(a){t.styles({background:function(t){var r=e.width?e.width(t):e(t),o=e.height?e.height(t):e(t);return Lf(WS(n,e)(t)+(a?WS(a,e)(t):""),r,o)},border:"none","border-radius":null})}else t.styles(function(t,e){var n,a,r=t.fillColor,o=void 0===r?hn:r,i=t.strokeColor,l=void 0===i?hn:i,s=t.strokeWidth,c=t.borderRadius,u=t.shape,d=void 0===u?"square":u;return"square"!==d&&"rect"!==d?(a=WS(t,e,!0),n=dn,c=pn):(a=o,n=function(t,e){return"".concat(wa(s,1),"px solid ").concat($n(l,t,e))},c=na(c)?"".concat(c,"px"):pn),_defineProperty({background:a,border:n},"border-radius",c)}(n,e))}function ZS(t,e){var n=e.config,a=e.ticks,r=n.reversed,o=wa(t.point,t);return r?a.length-1-o:o}function qS(t){var e=function(t){var e=t.data,n=t.config,a=t.align,r=t.format,o=void 0===r?function(t){return t}:r,i=t.globalFont,s=void 0===i?{}:i,c=t.class,u=void 0===c?"":c,d=t.scales,h=void 0===d?{}:d,f=t.computedInfo,p=t.label.fontSize,g=n.list,v=n.show,m=void 0===v||v,y=g.marker,b=g.label,x=KS(y,b,a,h.size,p),C=function(t){var e,n=t.data,a=t.config,r=t.align,o=t.ticks,i=t.globalFont,s=t.scales,c=void 0===s?{}:s,u=t.computedInfo,d=t.unitTestObj,h=t.label.fontSize,f=a.list,p=a.ranges,g=f.marker,v=f.label,m=al(a),y=us.getFilterBoxSize(g,h),b=t.bound||{width:y[0],height:y[1]},x=KS(g,v,r,c.size,h),C=m.marker,k=Ja(C)?C:Rn(C,g),w=m.label,_=function(t,e){return a.filter&&a.filter.range&&p&&p.length&&p[ZS(e,{config:a,ticks:o||n})].disabled},S=g.hAlign,O=x.width,A=x.height,T=x.size,P=x.overflow,E=x.totalHeight,L=v.keepAligned,M=void 0===L||L,D=v.padding,I=void 0===D?0:D,R=v.showAs,z=r.layout===no,j=function(t){t.each((function(t,e){_(t,e)&&XS(l(this),x,g,k)})),e=t},F=function(t){if(t.each((function(t,e){_(t,e)&&GS(l(this),a,i,w)})),!z||u){var n=t.node(),r=n&&n.offsetHeight,o=function(t){return Mf(g?g.vAlign:qr,r,x.height(t),h,c.size?x.height(t):g.size,v.textOverflow)};e.style("margin-top",(function(t,e){return d&&(d.legend_grp.legend_nodes.colorBox.margin_top=o(t)),"".concat(o(t),"px")})),t.attr("title",(function(t,e){var n=v.tooltip?this.textContent:null;return d&&(d.legend_grp.legend_nodes.label.title=n),n}))}},B={},H={},N={};JS(g)||(I=0);if(M){var W,V=pn,Y=pn,U=pn,G=pn;if(z)V=function(t){return"".concat((Ge(h,b.height)-A(t))/2,"px")},Y=function(){return"".concat(I,"px")},W="".concat(b.height,"px");else{V=function(t){return"".concat(S===Qr?b.width-O(t):S===qr?(b.width-O(t))/2:0,"px")},Y=function(t){return"".concat((S===Qr?0:S===qr?(b.width-O(t))/2:b.width-O(t))+I,"px")},"visible"===P&&(U=function(t,e){var n=e?-(A(t)-E):0;return"".concat(n,"px 0 0 0")},T(n[0])[0]<T(n[n.length-1])[0]&&(G=function(t,e){return n.length-1-e}));var X=pn;W=function(t){return X||(X=gu([v,i,wr])),"".concat(Ge(X,A(t)),"px")}}B={float:$r,display:"inline-block",margin:function(t){return z?"".concat(V(t)," 0 0 0"):"0 0 0 ".concat(V(t))}},H={display:R?"inline-block":pn,margin:function(t){return"0 0 0 ".concat(Y(t))}},N={"line-height":W,margin:U,"z-index":G}}else{if(z){var Z=function(t){return"".concat(b.height/2-A(t)/2,"px")};B={margin:function(t){return"".concat(Z(t)," auto 0px 0px")}},B={margin:function(t){var e=Z(t);return"left"===S?"".concat(e," auto ").concat(I,"px 0"):"right"===S?"".concat(e," 0 ").concat(I,"px auto"):"".concat(e," auto ").concat(I,"px auto")}}}else N={"text-align":S},B={margin:"right"===S?"0 0 ".concat(I,"px auto"):"0 auto ".concat(I,S===qr?"px auto":"px 0")};B.float=pn,B.display=pn,H.display=pn,H.margin=pn,N=_objectSpread(_objectSpread({},N),{},{"line-height":pn,"z-index":pn,margin:pn})}var q=u&&u.marker,$=u&&u.label,Q=q&&u.marker.styles,K=$&&u.label.styles;return{marker:{styles:_objectSpread(_objectSpread({},B),Q),onEnd:q&&q.onEnd||j},label:{styles:_objectSpread(_objectSpread({},H),K),onEnd:$&&$.onEnd||F},li:{styles:N}}}(t),k=f&&f.marker?f.marker.config:y,w=f&&f.label?f.label.config:b;return{show:m,data:e,_class:u,ulSpec:_objectSpread(_objectSpread({},$S(n)),f&&f.ul&&f.ul.styles),liSpec:_objectSpread(_objectSpread({},QS(n,a,C.li)),f&&f.li&&f.li.styles),markerSpec:_objectSpread(_objectSpread({show:JS(y),config:_objectSpread(_objectSpread({},tO(h)),k),bound:x,_class:u},C.marker),{},{order:y.position?null:".".concat(u,"legendlabel")}),labelSpec:_objectSpread({config:_objectSpread({},w),format:o,globalFont:s,_class:u},C.label),liSpec_onEnd:f&&f.li&&f.li.onEnd,ulSpec_onEnd:f&&f.ul&&f.ul.onEnd}}(t),n=e._class,a=e.show,r=e.data,o=e.ulSpec,i=e.liSpec,s=e.markerSpec,c=e.labelSpec,u=e.liSpec_onEnd,d=e.ulSpec_onEnd,h=function(t){var e=t.show,n=t.bound,a=t.config,r=t._class,o=t.onEnd,i=t.styles,l=t.order,s={"background-repeat":"repeat","box-sizing":"border-box","text-align":qr},c=Lr("_div",".".concat(r,"legendfilterbox"),e?function(t){return[t]}:[]);return pa(c,"properties.styles",_objectSpread(_objectSpread({},s),i)),c.onEnd=o,c.depends=!0,c.config=_objectSpread(_objectSpread({},a),{},{width:n.width,height:n.height}),c.order=l,c}(s),f=function(t){var e=t._class,n=t.onEnd,a=t.config,r=t.format,o=void 0===r?function(t){return t}:r,i=t.styles,l=Lr("span",".".concat(e,"legendlabel"),(function(t){return[t]}));return pa(l,"properties.styles",i),l.onEnd=n,l.depends=!0,l.config=_objectSpread(_objectSpread({},a),{},{html:o}),l}(c),p=Lr("ul",".".concat(n,"legseries"));p.properties={styles:o};var g=Lr("li",".".concat(n,"series"),a?r:[]);return g.properties={styles:i},g.onEnd=u,g.children=[h,f],p.children=[g],p.onEnd=d,p}function $S(t){var e=t.layout===no;return _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({width:"",margin:0,padding:0,"white-space":e?"nowrap":pn},e?"overflow-x":"overflow-y","hidden"),"list-style-type",dn),"-webkit-overflow-scrolling","touch"),"vertical-align",Jr),"font-size","0px")}function QS(t,e,n){var a,r=t.list.label,o="number"==typeof r.itemWidth;return a="wrap"===r.textOverflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":Jr}:{"text-overflow":"ellipsis","vertical-align":io},_objectSpread(_objectSpread(_objectSpread(_objectSpread({"white-space":"nowrap",position:"relative",overflow:"hidden","text-align":$r,padding:ia(wa(t.itemMargin,3)),height:na(t.itemHeight)?"".concat(t.itemHeight,"px"):pn},a),{},{"vertical-align":Jr,display:function(t){return us.isHiddenItem(t)?dn:e.layout===no?"inline-block":"block"}},n.styles),{},{"font-size":"0px"},vc(pn,[r],!0)),{},{width:o?"".concat(r.itemWidth,"px"):null})}function KS(t,e,n,a,r){var o,i,l,s,c=function(t,e,n){if(t)return function(e){return[t(e),t(e)]};return function(){return us.getFilterBoxSize(e,n)}}(a,t,r),u=function(t,e,n){var a=t.width,r=t.height,o=t.overflow,i=void 0===o?"hidden":o;if((n.layout===no||!e.keepAligned)&&"visible"===i)return;if(r||a)return i}(t,e,n),d=t.width,h=t.height,f=t.shape;return u&&(o=d,i=h),"hidden"===u&&(l=d,s=h),{width:function(t){return l||c(t)[0]},height:"half-circle"===f?function(t){return(s||c(t)[1])/2}:function(t){return s||c(t)[1]},totalWidth:o,totalHeight:i,overflow:u,size:c}}function JS(t){return!1!==t.show}function tO(t){var e={};return Oa(t,(function(t,n){return e[n]={_type:"encode",scale:t}})),e}function eO(t){var e=this.chartObj,n=t.config,a=t.globalFont,r=t.computedInfo,o=t.onEnd,i=n.title||{},l=Rn(n.list.marker,n.selectAllBox,!0),s=_objectSpread(_objectSpread({},i),{},{keepAligned:!0,padding:n.textPadding}),c={show:i.show,itemMargin:i.margin,list:{marker:_objectSpread(_objectSpread({},l),{},{show:!(!n.selectAllBox||!n.selectAllBox.show)}),label:_objectSpread({},s)}},u="z"===t.encode;return qS({config:c,data:[i.text],align:{layout:eo},format:function(t){return hr(t)?t(e):Wn(t)},globalFont:a,label:{fontSize:+Dn.getVal(u?i.fontSize:n.fontSize||a.fontSize)},class:"zc-header-",computedInfo:r,onEnd:o,selectAllConf:n.selectAllBox})}Nt.events=function(t,e,n,a){var r,o,i,s,c,u,d=this,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=t.legend.component,p=t.systemConf.legend,g=nl(p,"clr"),v=al(p,"clr"),m=p.colorBox,y=[p,t.systemConf.canvas,wr],b=[g,p,t.systemConf.canvas,wr],x=Kn(y,"fontColor"),C=t.chartTypes[0].name,k=C===ji,w=[],_=t.systemConf.legend.events;if(null!=_&&(u=0==Jn(_.enabled,!0),_.click,_.doubleclick,_.mouseover,_.mouseout,c=_.cursor,_.tap,_.taphold,_.tapholdend),!u){e&&e.style("cursor",c||fn);var S=function(e,n,a,r,o){_&&_[e]&&$n(_[e],n,a,r,t,o)};if(nx){var O=Object.keys(nx),A=wn.getComponent("CustomGesture");O.map((function(t){A.call(d,t,e,"legend",S)}))}}function T(e,n,a){f.highlightSeries(e,n,a,p,t,!0),f.highlightItem(e,n,a,p,!0)}function P(e,n,a){f.highlightSeries(e,n,a,p,t),f.highlightItem(e,n,a,p)}function E(e,a,r,o,i,s){if(s||!RS(a,n.allSelected,n.isFirstClickAfterDeselection)){var c=nl(o,"clr");if(!Ja(c)){var u=l(e),d=u.selectAll(".legendlabel, .zc-legend-legendlabel"),h=(i?c:o).backgroundColor;u.style("background-color",h),!i&&na(o.showAs)&&d.html(fu(a,r,o,t)),vc(u.selectAll(i?".legendlabel, .legendlabel *, .zc-legend-legendlabel, .zc-legend-legendlabel *":".legendlabel, .zc-legend-legendlabel"),i?b:y,!0)}}}function L(e){var n=i[e],a=D(e),r=FS(zS(n),x,v),o=zS(n)&&v.strikeout?"line-through":null;a.selectAll(".legendlabel, .legendlabel *, .zc-legend-legendlabel, .zc-legend-legendlabel *").styles({color:r,"text-decoration":o}),!zS(n)&&p.showAs&&a.selectAll(".legendlabel, .zc-legend-legendlabel").html(fu(n,e,p,t))}function D(e){var n=t.legends[h].element.selectAll("li.".concat(Zl));return l(n.nodes()[e])}function I(){if(!i&&(i=MS(t,h),s=DS(t,i),vs(t))){var e=Do(t.dataObject),n=-1;e.forEach((function(e,a){var r=e.layer;e.data.forEach((function(e,a){if(n++,r===h){var o=t.rendererConf[n].legendIndex();w[o]=w[o]||[],w[o].push(e)}}))}))}}function R(){n.allSelected||n.isFirstClickAfterDeselection||(n.isFirstClickAfterDeselection=!0)}function z(e,r){var o,l,c=i[e[0]],u=!0===zS(c);k&&(o=ES(c,t,n),l=LS(c,t).filter((function(t){return!qa(o,t)})));var d=i.filter((function(e,i){return n.allSelected||n.isFirstClickAfterDeselection||(w&&w.length?w[i].forEach((function(t){return t.node.filtered=!n.allSelected})):e.disabled=k&&c!==e?!qa(o,e):!n.allSelected,BS(e,i,t),us.toggleChartEvents(t,!0),us.fadeChart(!0,t,a,!0,h),t.eventHandler.tooltipElement.hide()),k&&c!==e&&r&&(u?e.disabled&&(e.disabled=!qa(o,e)):e.disabled||(e.disabled=qa(l,e))),!IS(e)&&zS(e)})),f=e.filter((function(t){var e=i[t];return!IS(e)}));return d.length==s-f.length&&f.every((function(t){var e=i[t];return!zS(e)}))}function j(e){if(!n.allSelected&&!n.isFirstClickAfterDeselection)return!0;if(k&&!e.disabled){var a=t.renderer[0].getSankeyNodeByPoint(e),r=t.dataObject.sankeyLayout.linkLength,o=a.sourceLinks.length+a.targetLinks.length;if(t.systemConf.legend.ranges){var i=t.dataObject.sankeyLayout.nodeMatrix[a.layer],l=!1;return l=void 0!==i.find((function(t){if(t.index!==a.index)return l=!(t.sourceLinks.length>0)||void 0!==t.sourceLinks.find((function(t){return!0===t.point._visible})),l=t.targetLinks.length>0?void 0!==t.targetLinks.find((function(t){return!0===t.point._visible})):l}))}return r>o}return!0}function F(){n.allSelected||(n.allSelected=!n.allSelected),(o=o||ms(t,"clr-".concat(h)).selectAll("div.selectAll, div.zc-header-legendfilterbox")).empty()||(I(),o.html(jS(i,n.allSelected)?m.text||"&#10003;":(v.colorBox||{}).text||""))}function B(){return p.filter.enabled}function H(e){if(t.ismultiy){var n=M();return e.filter((function(t){var e=i[t],a=pi.helpers.getParsedYAxisOrder(e.yaxiscolumnorder);return!n.has(a)&&(n.add(a),!0)}))}return Ma(e[0])}function N(){return Ao(t)&&t.legends.get("clr-".concat(h)).highlightManager||t.legendHighlight}return f.filterSeriesNUpdate=function(t,e,a){var r=Ma(e),o=j(t);(I(),!z(r,o)&&o)&&(r.forEach((function(t){if(vs(a)){var e=Do(a.dataObject),n=-1;e.forEach((function(e,r){var o=e.layer;e.data.forEach((function(e,r){n++,a.userdata.facets.color.length&&o!==h||a.rendererConf[n].legendIndex()!==t||(e.node.filtered=!e.node.filtered),o===h&&(i[a.rendererConf[n].legendIndex()].filtered=e.node.filtered)}))}))}else{var r=i[t];r.disabled=!r.disabled,a.dataObject.hierarchical&&!Bi.isQuantileColorScale(a)&&(a.systemConf.seriesdata.chartdata[t].disabled=r.disabled),BS(r,t,a)}})),H(r).forEach((function(t){var e=i[t];a.addRemoveSeries(e,t,e.yaxiscolumnorder,!n.allSelected&&!n.isFirstClickAfterDeselection)})),R())},f.toggleItemNUpdateChart=function(e,a,o,l){var s=Ma(o);if(r=ms(t,"clr-".concat(h)).selectAll("div.legendfilterbox, div.zc-legend-legendfilterbox"),B()){N().resetSelection(),f.filterSeriesNUpdate(a,s,t);var c=s.filter((function(t){return zS(i[t])}));if(f.highlightItem(e,a,c,l,!1,!0),k){var u=i.map((function(t,e){return t.itemIndex?t.itemIndex:e}));f.updateLabel(u)}else f.updateLabel(s);if(Nt.setColorBoxBackground(r,t,n,h),jt()&&!jt().touches)"canvas"===t.plot.renderer.mode&&f.highlightSeries(e,a,s,l,t),(zS(i[s[0]])?P:T)(e,a,s)}F()},f.highlightItem=function(t,e,n,a,r,o){var l=Ma(n);I(),l.forEach((function(t){var e=i[t];E(D(t).node(),e,t,a,r,o)}))},f.highlightSeries=function(t,e,n,a,r,o,i){var l=N();if(r.highlightContext=null,f.handlePreviousHighlight.apply(f,arguments),Bi.isQuantileColorScale(r)){var s=n;Ao(r)?o?zS(e)||(l.highlightSelectedSeries(a,0,s),l.highlightUnselectedSeries(a,0,s)):l.reset(a,0,s):o?zS(e)||r.seriesdata.forEach((function(t,e){l.highlightSelectedSeries(a,e,s),l.highlightUnselectedSeries(a,e,s)})):i?l.highlightSelectedSeries(a,n,null,i):r.seriesdata.forEach((function(t,e){l.reset(a,e,s,r.seriesdata.length-1===e)}))}else o?zS(e)||(l.highlightSelectedSeries(a,n),l.highlightUnselectedSeries(a,n),"svg"==r.plot.renderer.mode&&na(r.cache.clickSelectionData)&&na(r.cache.clickSelectionData[0])&&l.highlightSelectedSeries(a,n,null,!0)):i?l.highlightSelectedSeries(a,n,null,i):l.reset(a,n)},f.updateLabel=function(t){Ma(t).forEach((function(t){return L(t)}))},f.handlePreviousHighlight=function(){var t=N(),e=t.prevData,n=5,a=arguments[n];a&&e&&(e[n]=!1,t.prevData=pn,f.highlightSeries.apply(f,e)),t.prevData=a?arguments:pn},f},wn.setComponent("listView.markerSize",VS);var nO=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e)}(Hu);function aO(t){var e=function(t){var e=t.config,n=(t.margin,t.bound),a=t.height,r=t.padding,o=void 0===r?3:r,i=t.target,l=t.remainingCount,s=t.callbackArgs,c=void 0===s?[]:s,u=t.expanded,d=void 0!==u&&u,h=t.isHorizontal,f=t.priorityArray,p=e.show,g=e.textAlign,v=e.ontoggle,m=e.text,y=e.keepAligned&&h,b=k,x=_objectSpread({display:y?"inline-block":"block",padding:"".concat(o,"px"),"text-align":y?null:g,"max-width":"".concat(n.maxWidth,"px"),"line-height":y&&a?function(){return"".concat(a(),"px")}:null,cursor:fn,overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},vc(null,[e].concat(_toConsumableArray(f)),!0)),C=function(t){var e=i(),n=h?"scrollLeft":"scrollTop";e.node()[n]=0,p?e.style("overflow","hidden"):t.empty()||(t.remove(),e.styles({"overflow-x":"hidden","overflow-y":"hidden"}))};return l=t.remainingCount,p&&l>0?{show:p,styles:x,html:b,expanded:d,config:e,onEnd:C}:{show:null,styles:null,html:null,expanded:null,config:null,onEnd:null};function k(t,e,n){return function(){if(t)return $n.apply(void 0,[v,this,t].concat(_toConsumableArray(c),[l,n]))||"Show less..";if(l>0){var a=e?$n.apply(void 0,[v,this,t].concat(_toConsumableArray(c),[l,n])):null,r=$n.apply(void 0,[m,l].concat(_toConsumableArray(c)));return a||r||"".concat(l," more...")}}}}(t),n=e.show,a=e.styles,r=e.html,o=e.expanded,i=e.config,l=e.onEnd,s=Lr(Cr,".".concat(ts),n?[1]:[]);return s.config=_objectSpread(_objectSpread({},i),{},{html:r&&r(o,null,t.order)}),s._parser=e,s._spec=t,s.onEnd=l,pa(s,"properties.styles",a),rO(s,o),s}function rO(t,e){if(!na(e))return wa(t&&t.cache&&t.cache.expanded,!1);pa(t,"cache.expanded",e)}function oO(t,e,n){var a=function(t,e,n){var a=t.config,r=t.globalFont,o=t.format,i=t.data,l=t.bound,s=t.callbackArgs,c=t.scales,d=void 0===c?{}:c,h=t.helpers,f=t.chartObj,p=t.computedInfo,g=a.title,v=a.list,m=v.expandable,y=void 0===m?{}:m,b=e.scale,x=e.bound,C=e.ticks,k=e.labelData,w=fs(a),_="z"===t.encode,S=!_&&f?us.getLegendData(f,t.order):i,O=!_&&f?us.getLegendDataLength(f,S):i.length,A=w.layout===no,T=wa(t.visibleItemCount,i.length),P=0;if(!t.isPreRender&&!_)for(var E=0,L=0;L<T;L++)t.data[L]&&!t.data[L].hideInLegend&&E++,L===T-1&&(P=E);t.nonHidden_visibleItemCount=t.isPreRender||_?t.nonHidden_visibleItemCount:P;var M=y._expanded?i.length:t.isPreRender||_||Ge(0,O-t.nonHidden_visibleItemCount)>0?T:i.length,D=function(t){var e=a.reversed?Yn(i).reverse():i;return na(t)?e.slice(0,t):e},I=D(M),R=b&&Ge(b(I[I.length-1]),b(I[0])),z=function(){var t=_objectSpread(_objectSpread({},X),{},{bound:{width:x.width,height:Xe(V,x.height)},data:D()}),e=new nO(t);e.create(),e.draw(n.encode.element)},j=g&&g.show&&g.keepAligned&&w.layout===no,F=function(e){var o=!y.show||rO(n.encode.children[2]);!function(t,e,n,a,r,o,i,l,s,c,u){"z"===s.encode?function(t,e,n,a,r,o,i,l,s,c,u){var d=t.selectAll("ul.".concat(Xl)),h=t.selectAll("li.".concat(Zl)),f=t.selectAll("ul.".concat(ql)),p=t.selectAll("".concat(Cr,".").concat(ts)),g=20,v=e.layout,m=r.title,y=r.border,b=void 0===y?{}:y,x=r.list.expandable,C=void 0===x?{}:x,k=b.show?b.size:0,w=a.maxWidth,_=a.maxHeight,S=C.show&&C.keepAligned,O=lO(n,S);w-=2*k,_-=2*k;var A=n?Ul:Gl,T=Xe(Xa(m.maxWidth||A,w),w);f.style("max-width","".concat(T,"px"));var P=Ga(f),E=Ga(p);n||(_=Xe(_-P.height,_));if(t.style("max-width","".concat(w,"px")),d.styles({"max-width":"".concat(w,"px"),"max-height":"".concat(_,"px")}),v===no){d.styles({width:pn,height:pn});var L=w-(n?P.width:0)-(S?E.width:0);L-=n||S?2:0;var M=_-(S?0:E.height);d.style("max-width","".concat(L,"px")),d.style("max-height","".concat(M,"px")),d.style("border","1px solid");var D=Ga(d);d.style("border",pn),d.style("width","".concat(D.width+2,"px"));var I=or(d,"width")?g:0;d.style("height","".concat(D.height+I+2,"px"));var R=d.node().scrollHeight-2>d.node().offsetHeight;d.style("overflow-x","auto"),d.style("overflow-y",R?"auto":"hidden")}else if(e.layout===no){d.styles({width:pn,height:pn}),h.style("max-width","".concat(w,"px")),t.style("max-width","".concat(w,"px")),d.styles({display:"inline","border-top":"1px solid"});var z=Ga(d).width;d.styles({display:O,"border-top":pn}),t.style("max-width","".concat(w,"px")),d.style("height","".concat(function(t,e){var n=0,a=0,r=0;return t.each((function(){var t=Ga(this);a+t.width>e&&(n+=r,r=0,a=0),a+=t.width,r=Ge(r,t.height)})),n+=r}(h,w)+2,"px"));var j=or(d)?g:0;d.style("width","".concat(z+j+2,"px")),d.style("overflow","auto")}else{var F=_-E.height;d.style("max-height","".concat(F,"px"));var B=or(d)?g:0;d.style("width",pn);var H=Ga(d.style("display","inline-block")).width;d.style("display",O),d.style("width","".concat(H+B+2,"px")),d.style("height",pn),d.style("overflow-x",o?"auto":"hidden"),d.style("overflow-y",o?"auto":"hidden")}}(t,e,n,a,r,o):function(t,e,n,a,r,o,i,l,s,c,u){var d=s.chartObj,h=t.selectAll("ul.".concat(Xl)),f=t.selectAll("li.".concat(Zl)),p=t.selectAll("ul.".concat(ql)),g=t.selectAll("".concat(Cr,".").concat(ts)),v=20,m=e.layout,y=r.title,b=r.border,x=void 0===b?{}:b,C=r.list.expandable,k=void 0===C?{}:C,w=x.show?x.size:0,_=(a.maxWidth,a.maxHeight,k.show&&k.keepAligned),S=lO(n,_),O="z"===s.encode,A=!O&&d?us.getLegendData(d,s.order):l,T=!O&&d?us.getLegendDataLength(d,A):l.length,P=d&&d.legend.unitTestObject["zc-legend"].clr[s.order],E=iO(t,e,n,a,r,i,l,s,c),L=E.wrapMaxWidth,M=E.maxW,D=E.expandableDimension,I=E.tempItemHeight,R=E.maxItemHeight,z=E.maxHeight;if(l.length!=s.visibleItemCount&&!O&&g.node()){var j=a.maxHeight,F=vu(k,a.maxWidth,j,c,e,r.itemMargin);z-=Ar.PHANTOMJS?D.height:Ge(F[1],D.height),z=Xe(j?j-F[1]:z,z)}M=M<0?0:M,z=I?Ge(I,z):z,h.styles({"max-width":"".concat(M,"px"),"max-height":"".concat(z,"px")}),P&&(P.legend_grp=_objectSpread(_objectSpread({},P.legend_grp),{},{maxWidth:M,maxHeight:z}));var B=r.showAs,H="auto"===r.itemWidth;if(B&&H){if(na(s.legendLabelMaxWidth))P&&(P.legend_grp.legend_nodes.label.width=s.legendLabelMaxWidth),t.selectAll(".zc-legend-legendlabel").style("width",s.legendLabelMaxWidth+un);else{var N=i.getMaxItemWidth(l),W=Xe(N,M),V=+Dn.getVal(r.fontSize||c.fontSize),Y=W-us.getFilterBoxSize(r.list.marker,V)[0]-2*r.itemMargin;na(Y)&&(f.selectAll(".zc-legend-legendlabel").style("width",Y+un),P&&(P.legend_grp.legend_nodes.label.width=Y))}if(Ar.WINDOWS&&m===no){var U=2;h.style("max-width","".concat(M+U,"px")),P&&(P.legend_grp.maxWidth=M+U)}}else f.selectAll(".zc-legend-legendlabel").style("width",null);if(h.styles({"max-width":"".concat(M,"px"),"max-height":"".concat(z,"px")}),m===no){h.styles({width:pn,height:pn}),f.style("max-width","".concat(M,"px")),P&&(P.legend_grp.legend_nodes.maxWidth=M);var G=p.style("display");t.style("max-width","".concat(M+2*w,"px")),s.isPreRender||(R?(p.styles({display:"block"}),h.styles({display:"inline","border-top":"1px solid"})):h.styles({display:null,border:"1px solid"}));var X=Ga(h);p.styles({display:G}),h.styles({display:y.keepAligned?"inline-block":null,border:pn,"border-top":pn}),t.style("max-width","".concat(L,"px"));var Z,q=or(h)||k.show&&s.nonHidden_visibleItemCount<T?v:0;h.style("width","".concat(X.width+q+2,"px")),f.style("max-width","".concat(M-q>.5*M?M-q:M,"px")),s.isPreRender||(Z=s.rowCount?s.rowCount:Ve(h.node().offsetHeight/R)||1),q=or(h,"width")?v:0,h.style("height","".concat(Z*R+q+2,"px")),s.isPreRender&&h.style("height","".concat(X.height+q,"px")),R||h.style("height","".concat(X.height+q+2,"px")),P&&(P.legend_grp=_objectSpread(_objectSpread({},P.legend_grp),{},{preCalculationStyle:{width:null,height:null,display:"inline","border-top":"1px solid"},width:X.width+q+2,height:Z*R+q+2,"border-top":null,display:y.keepAligned?"inline-block":null}))}else{s.nonHidden_visibleItemCount<T&&(z=Xe(s.nonHidden_visibleItemCount*I,z)),h.styles({"max-height":"".concat(z,"px")});var $=or(h)||k.show&&s.nonHidden_visibleItemCount<T?v:0;h.styles({width:pn});var Q=Ga(h.style("display","inline-block")).width;h.style("display",S),h.style("width","".concat(Q+$+2,"px")),h.style("height",pn),P&&(P.legend_grp=_objectSpread(_objectSpread({},P.legend_grp),{},{maxHeight:z,preCalculationStyle:{width:null,display:"inline-block"},width:Q+$+2,height:null,display:S}))}var K=!0===(k.show&&o||!k.show);Ar.IE&&K&&(K=h.node().scrollHeight-s.visibleItemCount>h.node().offsetHeight);s.addOverFlowY=K,P&&(P.legend_grp.addOverFlowY=K);var J=or(h,"width")?v:0;h.style("overflow-x",J?"auto":"hidden"),h.style("overflow-y",K?"auto":"hidden"),P&&(P.maxWidth=L);s.isPreRender||u&&g.styles({margin:"".concat(u.margin(),"px")})}(t,e,n,a,r,o,i,l,s,c,u)}(e,w,j,l,a,o,h,i,t,r,Z)},B=v.marker,H=v.label,N=+Dn.getVal(Kn([v.label,r,wr],"fontSize")),W=VS(B,H,w,b,N),V=b?u(I,(function(t){return W.height(t)})):x&&x.height,Y=f&&f.legend.unitTestObject["zc-legend"].clr[t.order],U={config:a},G={align:w,config:a,globalFont:r,encode:t.encode,computedInfo:t.computedInfo&&t.computedInfo.title,onEnd:t.titleOnEnd},X={bound:d.size&&(R?{width:R,height:V}:x),config:a,format:o&&function(t,e){return o(k?k[e]:t,e)},globalFont:r,data:I,ticks:C,scale:b,scales:d,align:w,label:{fontSize:+Dn.getVal(Kn([v.label,r,wr],"fontSize"))},class:"zc-legend-",computedInfo:t.computedInfo&&t.computedInfo.legend,onEnd:t.legSeriesOnEnd,unitTestObj:f&&f.legend&&f.legend.unitTestObject["zc-legend"].clr[t.order]},Z={show:!0,config:y,globalFont:r,callbackArgs:s,renderList:z,bound:l,priorityArray:[a,r,wr],height:function(){var t=Ga(sO(n,"LegendTitleHtml")).height;return j?Ge(t,Xe(V,wa(R,x.height))):Xe(V,wa(R,x.height))},isHorizontal:A,padding:a.itemMargin,expanded:y._expanded,remainingCount:_?t.data.length-T:O-t.nonHidden_visibleItemCount,margin:function(){if(j&&!y.keepAligned){var t=Ga(sO(n,"LegendTitleHtml")).width;return Y&&(Y.expandable=_objectSpread(_objectSpread({},Y.expandable),{},{"margin-left":t+"px"})),"0 0 0 ".concat(t)}return 0},order:t.order,setLegendDimension:function(){return F(n.encode.element)},alignLegend:t.computedInfo&&t.computedInfo.expandable&&t.computedInfo.expandable.alignLegend};return{titleSpec:G,backgroundSpec:U,viewSpec:X,expandableSpec:Z,keepTitleAligned:j,keepExpandableAligned:y.keepAligned,setDimension:F,initLegendComp:p&&p.initLegendComp}}(t,e,n),r=a.titleSpec,o=a.backgroundSpec,i=a.viewSpec,l=a.expandableSpec,s=a.keepTitleAligned,c=a.setDimension,d=a.keepExpandableAligned,h=a.initLegendComp,f=Lr(Cr,".legendgroup");f.onEnd=c,f.onStart=h,pa(f,"properties.styles",NS(o));var p=eO.call(t,r);pa(p,"properties.styles.display",lO(s));var g=qS(i);pa(g,"properties.styles.display",lO(s,d));var v=aO(_objectSpread(_objectSpread({},l),{},{target:function(){return g.element}}));return f.children=[p,g,v],f._helper=a,f}function iO(t,e,n,a,r,o,i,l,s){var c=l.chartObj,u=t.selectAll("ul.".concat(ql)),d=t.selectAll("".concat(Cr,".").concat(ts)),h=r.title,f=r.border,p=void 0===f?{}:f,g=r.list.expandable,v=void 0===g?{}:g,m=p.show?p.size:0,y=a.maxWidth,b=a.maxHeight,x=v.show&&v.keepAligned,C="horizontal"===e.layout,k=y,w="z"===l.encode,_=!w&&c?us.getLegendData(c,l.order):i,S=!w&&c?us.getLegendDataLength(c,_):i.length;if(l.isPreRender&&(y=Ve(y),b=Ve(b)),C&&c){var O=+r.marginLeft+ +r.marginRight,A=c.canvasarea.width-O;y>A&&(y=A),k=y}w||t.style("max-width","".concat(y,"px")),y-=2*m,b-=2*m,w&&t.style("max-width","".concat(y,"px"));var T,P=c&&c.legend.unitTestObject["zc-legend"].clr[l.order],E=o&&o.getItemDimension(i[0]),L=E&&E.label.height,M=E&&E.item.height,D=+Dn.getVal(r.fontSize||s.fontSize),I=us.getFilterBoxSize(r.colorBox||{},D)[1];T=wa(r.itemHeight&&+r.itemHeight,Ge(L,I)+2*+r.itemMargin),T=Ge(T,M),c&&(c.legend.hasScroll=S*T>b);var R=n?Ul:Gl,z=Xe(Xa(h.maxWidth||R,y),y);u.style("max-width","".concat(z<0?0:z,"px")),P&&(P.title_grp.maxWidth=z);var j=Ga(u),F=Ga(d);n||(b=Xe(b-j.height,b));var B=y-(n?j.width:0)-(x?F.width:0);return B-=w&&(n||x)?2:0,v.show&&d.styles({"max-width":"".concat(B,"px")}),P&&d.node()&&v.show&&(P.expandable=_objectSpread(_objectSpread({},P.expandable),{},{maxWidth:B})),{wrapMaxWidth:k,maxW:B,expandableDimension:F,tempItemHeight:M,isSizeLegend:w,maxItemHeight:T,maxHeight:b}}function lO(t,e){return t||e?"inline-block":pn}function sO(t,e){return t.encode.children[0].children[{LegendTitleHtml:0}[e]].element}nO.parser=qS,wn.setComponent("listView",nO),wn.setComponent("expandable.parser",aO);var cO=function(){return{}},uO=function(t){function e(t,n){var a;return _classCallCheck(this,e),(a=_callSuper(this,e,[t])).viewScaleComponent=n||cO,a}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){return this.encode=oO(this.spec,this.viewScaleComponent(),this)}}]),e}(Hu);wn.setComponent("listLegend",uO);var dO=us.getClr,hO=us.isDisabled,fO=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_callSuper(this,e,[t])).spec=t,n}return _inherits(e,t),_createClass(e,[{key:"get",value:function(){var t=this,e=this,n=this.spec,a=n.config,r=n.globalFont,o=n.chartObj,i=us.getLegendData(o,n.order),s=us.getLegendDataLength(o,i),c=[a,o.systemConf.canvas,wr],u=+Dn.getVal(a.fontSize||r.fontSize),d=Kn(c,"fontColor"),h=a.list.marker,f=a.selectAllBox||{},p=a.colorBox,g=us.getFilterBoxSize(h,u),v=us.isAllEnabled,m=g[0],y=g[1],b=fs(a),x=f&&f.disabledOpacity||.3,C=na(h.size)?"".concat(Ge(u,y),"px"):(Ar.OSX||Ar.LINUX)&&Ar.FIREFOX?"1.2":"normal",k=[a.title,o.systemConf.canvas,wr],w=n.order,_=us.getFilterBoxSize(Rn(h,f,!0),u),S=Math.min(_[0],_[1])-(a.imagePallete||!na(a.shapes)||"square"===p.shape?0:+p.strokeWidth);o.legend.state=o.legend.state||{};var O,A,T,E,L=o.legend.state["clr-".concat(w)]=o.legend.state["clr-".concat(w)]||{allSelected:!0,isFirstClickAfterDeselection:!1},M=al(a,"clr"),D=M.colorBox||{},I={fontColor:function(t){return dO(hO(t,L.allSelected,L.isFirstClickAfterDeselection),d,M)},textDecoration:function(t){return hO(t,L.allSelected,L.isFirstClickAfterDeselection)&&M.strikeout?"line-through":null}},R=n.config.colorBox,z=R.position||"left",j=n.config.showAs,F=a.expandable,B=mu(o,0,i,s,g,b,C,I),H=Nt.setColorBoxBackground(null,o,L,w),N=Nt.selectAllBox(null,o,L,w),W=N.styles,V=N.size,Y="padding-".concat(z),U=n.config.textPadding,G="margin-".concat(z),X=V,Z=a.title.keepAligned&&b.layout===no;f=N.options,o.legend.states=o.legend.state["clr-0"],E="wrap"===a.textOverflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":"top"}:{"text-overflow":"ellipsis","vertical-align":"middle"},L.allSelected=na(f.selected)?f.selected:L.allSelected,us.fadeChart(L.allSelected,o,f.disabledOpacity);var q,$=function(t){na(j)&&t.each((function(t,n){if(hO(t,L.allSelected,L.isFirstClickAfterDeselection)){var o=vc(l(this).selectAll(".zc-legend-legendlabel, .zc-legend-legendlabel *"),[{fontColor:I.fontColor(t),textDecoration:I.textDecoration(t)},a,r,wr],!0);(F.show&&na(e.spec.visibleItemCount)||!F.show)&&(st.legend_grp.legend_nodes.disabledStyles=o)}}))},Q={};Object.keys(H.styles).map((function(t){var e=H.styles[t];"function"==typeof e&&(e=function(e,n){var a=H.styles[t](e,n),r=st.legend_grp.legend_nodes.colorBox.seriesSpecificStyles;return r[n]=r[n]?r[n]:{},"background-size"===t?r[n].backgroundSize=a:r[n][t]=a,a}),Q[t]=e})),q=function(t,n){var a=H.html(t,n);if(F.show&&na(e.spec.visibleItemCount)||!F.show){var r=st.legend_grp.legend_nodes.colorBox.seriesSpecificStyles;r[n]=r[n]?r[n]:{},r[n].html=a}return a};var K=_objectSpread({},vc(null,[I,a,r,wr],!0));if(Ar.PHANTOMJS||(K["vertical-align"]="inherit"),K[Y]=U,K[G]=m,na(j)){var J={display:wa(n.config.showAsDisplay,"inline-block"),overflow:"hidden"};K=_objectSpread(_objectSpread({},K),J)}var tt=function(t){function n(){L.allSelected&&!v(i,L.allSelected)||(L.allSelected=!L.allSelected),L.isFirstClickAfterDeselection=!1,O.html(L.allSelected?wa(N.options.text,p.text)||"&#10003;":D.text||""),$n(N.options.events[o.zcEventType||"click"],jt(),L.allSelected,o)}t.style("line-height",(function(){var t=f.show?A:0,n=Math.max(T,t);return(F.show&&na(e.spec.visibleItemCount)||!F.show)&&(st.title_grp.title_nodes.lineHeight=n),"".concat(n,"px")}));var a={click:n},r={tap:n};f.show?Iu(t,a,r):(Ru(t,null,a),Ru(t,null,r))},et=function(t){O=t,A=t.node()?t.node().offsetHeight:A,t.styles({width:"".concat(S,"px"),height:"".concat(S,"px")})},nt=function(t){T=t.node()?t.node().offsetHeight:T,O.style("margin",(function(){var t="".concat(Ge(0,(T-A)/2),"px");return(F.show&&na(e.spec.visibleItemCount)||!F.show)&&(st.title_grp.title_nodes.selectAll.margin="".concat(t," 0px 0px 0px")),"".concat(t," 0px 0px 0px")}))},at=function(e){var a=n.bound,s=n.config,c=s.title,u=c&&c.show&&c.keepAligned&&b.layout===no,d=l(e.node().parentNode),h=s.showAs,f="auto"===s.itemWidth,p=iO(d,b,u,a,s,B,i,n,r).maxW,g=o.legend.component,v=t.discrete_encode;if(v.legendLabelMaxWidth=g.legendLabelMaxWidth=null,v.itemMaxWidth=g.itemMaxWidth=null,h&&f){var m=B.getMaxItemWidth(i),y=Xe(m,p),x=+Dn.getVal(s.fontSize||r.fontSize),C=us.getFilterBoxSize(s.list.marker,x);v.itemMaxWidth=g.itemMaxWidth=n.itemMaxWidth=y,v.legendLabelMaxWidth=g.legendLabelMaxWidth=n.legendLabelMaxWidth=y-C[0]-2*s.itemMargin,d.selectAll(".zc-legend-legendlabel").style("width",n.legendLabelMaxWidth+un)}},rt=function(t,n){var a=W.color(t,n);return(F.show&&na(e.spec.visibleItemCount)||!F.show)&&(st.title_grp.title_nodes.selectAll.color[n]=a),a},ot=function(t,n){var a=N.html(t,n);return(F.show&&na(e.spec.visibleItemCount)||!F.show)&&(st.title_grp.title_nodes.selectAll.html=a),a},it=_objectSpread({},vc(null,[a.title,r,wr],!0));function lt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,r=0,i=0;if(e){var l=systemconf.legend,s=o.legendarea.element.node().getBoundingClientRect();r=Xe(o.canvasarea.width-s.width,l.x),i=Xe(o.canvasarea.height-Xe(s.height,n),l.y)}else{var c=hu(a,o);r=c[0],i=c[1]}t.styles({left:"".concat(r,"px"),top:"".concat(i,"px")})}it[Y]=N.options.show?U+"px":null,it[G]=N.options.show?X+"px":null;var st=function(){o.legend.unitTestObject={"zc-legend":{clr:{}}};var t=o.legend.unitTestObject["zc-legend"].clr[w]={fontSize:u,fontColor:d,background_rgb:P(a.background.color.toString()),title_grp:{title_nodes:{selectAll:_objectSpread(_objectSpread({},W),{},{color:{},cursor:f.show?fn:null}),title:_objectSpread(_objectSpread({},it),{},{html_or_text:a.title.text})},display:Z?"inline-block":null},legend_grp:{legend_nodes:_objectSpread(_objectSpread({cursor:a.cursor||fn},E),{},{"vertical-align":"top",lineHeight:C,"font-family":Kn(c,"fontFamily"),"font-weight":Kn(c,"fontWeight"),seriesSpecificStyles:{},label:_objectSpread(_objectSpread({disabledStyles:{}},K),{},{color:d,"text-decoration":null,title:{}}),colorBox:{position:z,size:g,lineHeight:y-R.strokeWidth,seriesSpecificStyles:{},borderRadius:Q["border-radius"]}})}};a.title.show&&(t.title_grp.title_nodes.selectAll.html=N.html());return t}();K[Y]=K[Y]?K[Y]+"px":K[Y],K[G]=K[G]?K[G]+"px":K[G];var ct={initLegendComp:ut,expandable:{alignLegend:lt},title:{marker:{styles:_objectSpread(_objectSpread({},W),{},{color:rt,"background-repeat":null}),config:{background:W.background,border:W.border,html:ot},onEnd:et},label:{styles:_objectSpread({},it),config:{strokeColor:Kn(k,"strokeColor")},onEnd:nt},li:{styles:_objectSpread(_objectSpread({},vc(pn,[],!0)),{},{margin:null,"vertical-align":io,"text-overflow":"ellipsis",position:null,height:null,"word-wrap":null,display:null,cursor:f.show?fn:null,"font-size":null}),onEnd:tt},ul:{styles:{"white-space":"normal",display:Z?"inline-block":null,overflow:"hidden","-webkit-overflow-scrolling":null,"font-size":null,filter:null},onEnd:at}},legend:{marker:{styles:{"line-height":y-R.strokeWidth+un,"border-color":hn,"background-repeat":"repeat",color:Q.color,filter:Q.filter,opacity:Q.opacity,display:"inline-block",float:z,position:"absolute","box-sizing":"border-box","text-align":"center","font-family":R.fontFamily,"font-size":(R.fontSize||u)+un,margin:null},config:{background:Q.background,backgroundSize:Q["background-size"],border:Q.border,borderRadius:Q["border-radius"],html:q}},label:{styles:_objectSpread({margin:null},K),config:{order:null,tooltip:!!a.tooltip}},li:{styles:_objectSpread(_objectSpread({},vc(pn,[],!0)),{},{color:function(t,n){var a=dO(hO(t,L.allSelected,L.isFirstClickAfterDeselection),d,M);if(F.show&&na(e.spec.visibleItemCount)||!F.show){var r=st.legend_grp.legend_nodes.seriesSpecificStyles;r[n]=r[n]?r[n]:{},r[n].color=a}return a},"line-height":C,"font-size":"".concat(u,"px"),"font-family":Kn(c,"fontFamily"),"font-weight":Kn(c,"fontWeight"),"box-sizing":"border-box"}),onEnd:$},ul:{styles:{"white-space":"normal","overflow-x":"hidden"}}}};function ut(t){e.discrete_encode=e.spec.chartObj.legend.component=Nt.discrete.get(e.spec),Nt.selectAllBox(null,o,o.legend.state[n.id],w),Nt.events(o,t,o.legend.state[n.id],x,w)}return{ticks:i,format:B.getLegendItemText,color:function(t,e){return Bs(o,e,null,w)},computedInfo:ct,helpers:B}}}]),e}(gf);var pO=function(t){function e(t){var n;return _classCallCheck(this,e),n=_callSuper(this,e,[t]),t.config=_objectSpread(_objectSpread({},t.config),{},{list:{marker:_objectSpread({},t.config.colorBox),label:_objectSpread({},t.config),expandable:t.config.expandable}}),n.spec=t,n}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){var t=this,e=this.get();this.spec.data=e.ticks,this.spec.format=e.format,this.spec.scaleComponent={getScale:function(){return w().domain(t.spec.data)},schema:{domain:{ranges:this.spec.data},data:{meta:{datatype:"ordinal"},dataType:"ordinal"}}},this.spec.config.list.marker.fillColor=e.color,this.spec.computedInfo=e.computedInfo,this.spec.helpers=e.helpers;var n=HS(this);this.spec.visibleItemCount=n&&n.visibleItemCount,this.spec.itemCountInArow=n&&n.itemCountInArow,this.spec.rowCount=n&&n.rowCount;var a=new uO(this.spec,this.viewScaleComponent),r=this.encode=a.create();return this._parser=r._helper,function(t,e){var n=e.chartObj,a=n.legend.unitTestObject["zc-legend"].clr[e.order],r=new(wn.getComponent("markSelection"))(t),o=a.title_grp.title_nodes.selectAll,i=r.selectAll("selector",".zc-header-legendfilterbox").selection[0],l=i.config.width,s=i.config.height,c=a.title_grp.title_nodes.title,u=r.selectAll("selector",".zc-header-legendlabel").selection[0],d=u.config.html,h=a.title_grp.title_nodes,f=r.selectAll("selector",".zc-header-series").selection[0].properties.styles.padding,p=a.title_grp,g=r.selectAll("selector",".zc-header-legseries").selection[0].properties.styles["vertical-align"],v=a.legend_grp.legend_nodes.label,m=r.selectAll("selector",".zc-legend-legendlabel").selection[0],y=m.config.html,b=a.legend_grp.legend_nodes.colorBox,x=r.selectAll("selector",".zc-legend-legendfilterbox").selection[0],C=x.config.html,k=a.legend_grp.legend_nodes,w=r.selectAll("selector",".zc-legend-series").selection[0],_=w.properties.styles.width,S=w.properties.styles.height,O=w.properties.styles.display,A=a.legend_grp,T=r.selectAll("selector",".zc-legend-legseries").selection[0].properties.styles["vertical-align"];i.config.width=function(t,e){var n=l.call(this,t,e);return o.width=n+"px",n},i.config.height=function(t,e){var n=s.call(this,t,e);return o.height=n+"px",n},u.config.html=function(t,e){var a=d.call(this,t,e),r=a;return hr(a)&&(r=$n(a,n)),c.html_or_text=r,r},h.padding=f,p["vertical-align"]=g,v.seriesSpecificHTML={},m.config.html=function(t,e){var n=y.call(this,t,e);return v.seriesSpecificHTML[e]=n,n},b.seriesSpecificStyles=b.seriesSpecificStyles?b.seriesSpecificStyles:{},x.config.html=function(t,e){var n=C.call(this,t,e);return b.seriesSpecificStyles[e].html=n,n},k.width=_,k.height=S,k.seriesSpecificStyles=k.seriesSpecificStyles?k.seriesSpecificStyles:{},w.properties.styles.display=function(t,e){var n=O(t,e);return k.seriesSpecificStyles[e]=k.seriesSpecificStyles[e]?k.seriesSpecificStyles[e]:{},k.seriesSpecificStyles[e].display=n,n},A["vertical-align"]=T;var P=r.selectAll("selector",".zc-expandable").selection[0],E=P.config.html;P.config.html=function(t,e){var n=E.call(this,t,e);return a.expandable.html=n,n}}(r,this.spec),r}},{key:"draw",value:function(t){t.styles({display:"block",position:"absolute",left:pn,top:pn}),Kf(this.encode,t),this.parent=t}},{key:"resize",value:function(t,n){_get(_getPrototypeOf(e.prototype),"resize",this).call(this,t,n)}}]),e}(fO);function gO(t,e,n,a){this.associateBehaviours(a,this.selectionManager)}function vO(){var t=this.options,e=t.legendInstance,n=t.markParser,a=e.meta.config.list.expandable,r=rO(n);rO(n,!r),a._expanded=!r}function mO(){var t=this.chart,e=this.options,n=e.legendInstance,a=e.markParser,r=n.element,o=rO(a);n.meta.encode;if(!a.allRendered&&o){var i=a._spec.isHorizontal?"height":"width",l=_c(r),s=l?Bn(r):Ga(r),c=Hn(t.chartarea),u=Hn(t.plotarea);!function(t,e,n,a){var r=e._spec,o=r.renderList,i=r.setLegendDimension,l=r.alignLegend;t.styles({left:null,top:null}),$n(o),$n(i),n.legend.isSingleLayout?$n(l,t,null,null,null,n._chartarea):(n.chartarea=Hn(n._chartarea),n.plotarea=Hn(n._plotarea),Nt.align(n.legends,n,n.chartarea,n.plotarea))}(r,a,t);var d=l?Bn(r):Ga(r);if(Ze(d[i]-s[i])>1){var h=t.legends.get("clr-0");t.legendarea=kf(t,h),function(t){t.legend.isSingleLayout&&(t.updatePlotArea(),su(t));t.isAxisCategory?Ht.render(t,t.chartWidth,t.chartHeight,!0):t.dataObject.isPolarAxisCategory&&Ht.polar.render(t,"x");t.drawThreshold(!0),t.drawPlotareaClippath(),t.updatePlotareaProp(),t.plot.renderer.draw(!0),(t.isAxisCategory||t.dataObject.isPolarAxisCategory)&&t.positionEventTrackerElement()}(t)}else t.chartarea=c,t.plotarea=u;a.allRendered=!0}}function yO(){var t=this.options,e=t.markParser,n=t.trackerElement,a=t.expandableParser,r=rO(e),o=e._spec.isHorizontal,i=t.legendInstance.meta.addOverFlowY,l=o&&!i?"x":"y",s=o&&!i?"scrollLeft":"scrollTop",c=a.html,u=(0,e._spec.target)();n.html(c(r,!0,t.legendInstance.meta.order)),r?u.style("overflow-".concat(l),"auto"):(u.node()[s]=0,u.style("overflow-".concat(l),"hidden"))}function bO(){var t=this.chart,e=this.options.legendInstance;t.legendEvents.initiateBehaviour("SIZE_LIST",e),t.legendEvents.initiateBehaviour("DISCRETE",e)}pO.encode="clr",pO.view="list",pO.domMode="html",wn.setComponent("colorLegendList",pO),zu(pO);var xO={LISTENER:{click:gO,tap:gO},BEHAVIOUR:{click:[G_,vO,yO,mO,bO],tap:[G_,vO,yO,mO,bO]},SUPPORTED:function(t,e){return Ji(Qi)(t,e)}};function CO(t,e){return Q_.apply(this,arguments)}function kO(t,e){var n=this.options,a=n.trackerElement,r=n.config,o=n.globalFont,i=n.boxSize,l=r.ranges,s=nl(r),c=YS(a,ZS(e,n));if(!(Ja(s)||l&&l[e.point].disabled)){var u=r.list.marker,d=s.label,h=s.marker,f=Ja(h)?h:Rn(h,u),p=c.selectAll(".zc-legend-legendlabel, .zc-legend-legendlabel *"),g=c.selectAll(".zc-legend-legendfilterbox");US(c,s),GS(p,r,o,d),XS(g,i,u,f)}}function wO(t,e,n){var a=this.options,r=a.trackerElement,o=a.config,i=a.globalFont,l=a.boxSize,s=o.ranges,c=nl(o),u=YS(r,ZS(e,a));if(!Ja(c)&&(n||!s||!s[e.point].disabled)){var d=o.list.marker,h=u.selectAll(".zc-legend-legendlabel"),f=u.selectAll(".zc-legend-legendfilterbox");US(u,o),GS(h,o,i),XS(f,l,d)}}function _O(t,e){var n=this.chart,a=this.options,r=a.config,o=a.dataType,i=r.ranges,l=r.filter,s=i[e.point];if(l.enabled&&(!function(t){return t.filter((function(t){return t.disabled})).length==t.length-1}(i)||s.disabled)){s.disabled=!s.disabled;var c=i.filter((function(t){return!t.disabled}));o===To&&(c=c.map((function(t){return t[0]}))),r.filter.range=c,n.plot.renderer.draw(!0)}}function SO(t,e){var n=this.options,a=n.trackerElement,r=n.config,o=n.globalFont,i=n.boxSize,l=al(r),s=r.list.marker,c=l.label,u=l.marker,d=YS(a,ZS(e,n));Ja(c)||GS(d.selectAll(".zc-legend-legendlabel, .zc-legend-legendlabel *"),r,o,c);if(!Ja(u)){var h=Rn(u,s);XS(d.selectAll(".zc-legend-legendfilterbox"),i,s,h)}}function OO(t,e){var n=this,a=n.options,r=a.config,o=r.ranges,i=e.point,l=jt();o[i].disabled?(wO.call.apply(wO,[n].concat(Array.prototype.slice.call(arguments),[!0])),SO.apply(n,arguments)):l&&(l.touches?wO.call.apply(wO,[n].concat(Array.prototype.slice.call(arguments),[!0])):(kO.apply(n,arguments),tS.call.apply(tS,[n].concat(Array.prototype.slice.call(arguments),[!0]))))}function AO(t,e){Dk()}function TO(t,e,n,a){var r=this,o=jt(),i=Lu(r.tracker.node(),o),l=r.getData(a,i,[t,e,n[e]]);r.associateBehaviours(a,l,i,o)}function PO(t,e,n,a,r){return{data:n,i:a,ele:r,type:"legend"}}function EO(t,e){var n=this.options.legendInstance.component.discrete_encode,a=e.point,r=e.eventManager.options.config;jt()&&jt().touches&&Dk();var o=this.chart.racing;o&&!o.ended&&o.started?o.legendFilterInfo={callback:n.toggleItemNUpdateChart,args:[a.ele,a.data,a.i,r],isLegendFiltered:!0}:n.toggleItemNUpdateChart(a.ele,a.data,a.i,r)}function LO(t,e){var n=this.options.legendInstance.component.discrete_encode,a=e.point,r=e.eventManager.options.config;n.highlightSeries(a.ele,a.data,a.i,r,e.chart,!0),n.highlightItem(a.ele,a.data,a.i,r,!0)}function MO(t,e){var n=this.options.legendInstance.component.discrete_encode,a=e.point,r=e.eventManager.options.config;n.highlightSeries(a.ele,a.data,a.i,r,e.chart),n.highlightItem(a.ele,a.data,a.i,r)}wn.setComponent("_legendExpandableHandlers",xO),wn.setComponent("_legendExpandableEventArguments",(function(t,e){var n,a=t.legends.get(e),r=a.component,o=a.meta,i=a.element,l=o.globalFont,s=i.selectAll("div.".concat(ts)),c=a.enabled;return c&&(c=(n=r.encode.children[2]._parser).show),{enabled:c,trackerElement:s,config:n.config||{},globalFont:l,expandableParser:n,legendInstance:a,markParser:r&&r.encode&&r.encode.children[2]}}));var DO=Ar.PHANTOMJS?{move:"mousemove",out:"mouseout"}:{move:"mouseenter",out:"mouseleave"},IO={LISTENER:_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},DO.move,TO),DO.out,TO),"click",TO),"dblclick",TO),"taphold",TO),"tapholdend",TO),"tap",TO),DATA_FINDER:_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},DO.move,PO),DO.out,PO),"click",PO),"dblclick",PO),"taphold",PO),"tapholdend",PO),"tap",PO),BEHAVIOUR:_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},DO.move,[oS,LO]),DO.out,[H_,MO]),"click",[G_,EO]),"dblclick",[]),"taphold",[AO,oS,LO]),"tapholdend",[H_,MO]),"tap",[AO,G_,EO]),SUPPORTED:function(t,e){return!("z-0"===e||"shape-0"===e||el(t.legends,e)!==Qi)}};wn.setComponent("_legendDiscreteHandlers",IO),wn.setComponent("_legendDiscreteEventArguments",(function(t,e){var n,a,r=t.legends.get(e),o=r.component,i=r.element,l=r.meta,s=r.highlightManager,c=l.config,u=l.globalFont,d=l.scaleComponent,h=c.events,f=d.schema.data.dataType,p=i.selectAll("li.".concat(Zl)),g=o.viewScaleComponent(),v=g.ticks,m=g.scale,y=h&&0==Jn(h.enabled,!0),b=r.enabled&&!y;if(b){var x=o._parser.viewSpec,C=x.config.list;a=KS(C.marker,C.label,x.align,x.scale,x.label.fontSize),n=function(t,e){var n=t&&t.selectAll(".".concat(Xl)).node();if(n){var a=e.encode.children[2],r=n?n.children:[],o=!a._parser.show||rO(a),i=a._spec.isHorizontal,l=i?"Width":"Height";return{ulElement:n,liElement:r,available:n["client".concat(l)],isScrollable:n["scroll".concat(l)]>n["client".concat(l)]&&o,isHorizontal:i}}}(i,o)}var k=c.colorBand;return k.ranges&&k.ranges.length,{enabled:b,trackerElement:p,highlightManager:s,config:c,globalFont:u,dataType:f,legendInstance:r,scale:m,ticks:v,boxSize:a,scrollToItem:n,isDiscrete:!0,data:l.data}}));wn.setComponent("shapeListOptions",(function(t){return{marker:{hAlign:qr,vAlign:qr,fillColor:hn,strokeColor:"#808080"},label:{fontSize:t.fontL1Size.l5,padding:5,keepAligned:!0}}})),Tr.shapeLegend=function(t){var e=wn.getComponent("shapeListOptions")(t);return{enabled:!0,hAlign:Qr,vAlign:Jr,layout:eo,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,title:{show:!1,text:"Legend",fontSize:t.fontL1Size.l4},background:{color:hn,alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:hn},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},list:e,hoverOptions:{},filter:{enabled:!0}}};var RO=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){var t=this.viewScaleComponent();this.spec.data=t.ticks;var e=HS(this);this.spec.visibleItemCount=e&&e.visibleItemCount,this.spec.scales={shape:t.scale};var n=oO(this.spec,t,this);return this._parser=n._helper,this.encode=n}},{key:"draw",value:function(t){t.styles({display:"block",position:"absolute",left:pn,top:pn}),_get(_getPrototypeOf(e.prototype),"draw",this).call(this,t)}},{key:"resize",value:function(t,n){if(t||n){this.viewScaleComponent();var a=HS(this);this.spec.visibleItemCount=a&&a.visibleItemCount;var r=uu(t,n,this.spec.bound),o=r.w,i=r.h;this.updateScale(o,i),_get(_getPrototypeOf(e.prototype),"resize",this).call(this,o,i)}}}]),e}(pf);RO.encode="shape",RO.view="list",RO.domMode="html",wn.setComponent("shapeLegendList",RO),zu(RO);wn.setComponent("sizeListOptions",(function(t){return{marker:{shape:"circle",hAlign:qr,vAlign:qr,fillColor:hn,strokeColor:"#808080"},label:{fontSize:t.fontL1Size.l5,padding:5,keepAligned:!0}}})),Tr.sizeLegend=function(t){var e=wn.getComponent("sizeNestedOptions")(t),n=wn.getComponent("sizeListOptions")(t),a=wn.getComponent("sizeSliderOptions")(t);return{enabled:!0,hAlign:Qr,vAlign:Jr,layout:eo,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,title:{show:!1,text:"Legend",fontSize:t.fontL1Size.l4},background:{color:hn,alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:hn},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},list:n,nested:e,slider:a,hoverOptions:{slider:{tooltip:{fontSize:t.fontL1Size.l5}}},filter:{enabled:!0,slider:{track:{},tooltip:_objectSpread(_objectSpread({},{enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)"}),{},{fontSize:t.fontL1Size.l5})}}}};var zO=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"updateScale",value:function(t,e){var n=this.spec,a=this.encode,r=this.key,o=n.config,i=n.scaleComponent,l=n.callbackArgs,s=void 0===l?[]:l,c=i.d3_scale,u={maxWidth:t,maxHeight:e};i.config.range.operators=nd("size.rangeParser")(a,r,o,s[0],u),c.range=i._parseRange(),i.scale.range(c.range)}}]),e}(pf);var jO=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){var t=this.viewScaleComponent();this.spec.data=t.ticks,this.spec.scales={size:t.scale};var e=HS(this);this.spec.visibleItemCount=e&&e.visibleItemCount;var n=oO(this.spec,t,this);return this._parser=n._helper,this.encode=n}},{key:"draw",value:function(t){t.styles({display:"block",position:"absolute",left:pn,top:pn}),_get(_getPrototypeOf(e.prototype),"draw",this).call(this,t)}},{key:"resize",value:function(t,n){if(t||n){this.viewScaleComponent();var a=HS(this);this.spec.visibleItemCount=a&&a.visibleItemCount;var r=uu(t,n,this.spec.bound),o=r.w,i=r.h;this.updateScale(o,i),_get(_getPrototypeOf(e.prototype),"resize",this).call(this,o,i)}}}]),e}(zO);function FO(t,e,n,a){var r=this,o=jt(),i=Lu(r.tracker.node(),o),l=r.getData(a,i,[t,e]);r.associateBehaviours(a,l,i,o)}function BO(t,e,n,a){var r=this.options,o=r.config,i=r.ticks;return o.reversed?i.length-1-a:a}jO.adjustFactor=function(t,e,n,a){var r=fs(t),o=t.maxWidth,i=t.maxHeight,l=t.title,s=vu(t.list.expandable,e,n,a,r,t.itemMargin),c=function(t,e,n,a,r){var o=r.layout===no,i=t.show,l=t.keepAligned,s=[0,0];return i&&o&&l&&(s[0]+=.2*e),s}(l,e,0,0,r),u=[0,0];return r.layout===no?u[1]+=22:u[0]+=22,i||(u[1]+=s[1]+c[1]),o||(u[0]+=s[0]+c[0]),u},jO.encode="z",jO.view="list",jO.domMode="html",wn.setComponent("sizeLegendList",jO),zu(jO);var HO=Ar.PHANTOMJS?{move:"mousemove",out:"mouseout"}:{move:"mouseenter",out:"mouseleave"},NO={LISTENER:_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},HO.move,FO),HO.out,FO),"click",FO),"dblclick",FO),"taphold",FO),"tapholdend",FO),"tap",FO),DATA_FINDER:_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},HO.move,BO),HO.out,BO),"click",BO),"dblclick",BO),"taphold",BO),"tapholdend",BO),"tap",BO),BEHAVIOUR:_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},HO.move,[oS,tS,kO]),HO.out,[H_,eS,wO]),"click",[G_,_O,OO]),"dblclick",[]),"taphold",[AO,oS,tS,kO]),"tapholdend",[H_,eS,wO]),"tap",[AO,G_,_O,OO]),REVERSE_DATA_FINDER:{mousemove:function(){return CO.apply(this,arguments)}},REVERSE_BEHAVIOUR:{mousemove:[kO,function(t,e){var n=this.options,a=n.scrollToItem,r=ZS(e,n);if(a){var o=a.ulElement,i=a.liElement,l=a.available,s=a.isScrollable,c=a.isHorizontal,u=c?"offsetLeft":"offsetTop";s&&(o[c?"scrollLeft":"scrollTop"]=i[r][u]-l/2)}}],mouseout:[wO]},SUPPORTED:function(t,e){return"z-0"===e&&el(t.legends,e)===Qi}};wn.setComponent("_legendSizeListHandlers",NO),wn.setComponent("_legendSizeListEventArguments",(function(t,e){var n,a,r=t.legends.get(e),o=r.component,i=r.element,l=r.meta,s=r.highlightManager,c=l.config,u=l.globalFont,d=l.scaleComponent,h=c.events,f=d.schema.data.dataType,p=i.selectAll("li.".concat(Zl)),g=o.viewScaleComponent(),v=g.ticks,m=g.scale,y=h&&0==Jn(h.enabled,!0),b=r.enabled&&!y;if(b){var x=o._parser.viewSpec,C=x.config.list;a=KS(C.marker,C.label,x.align,x.scale,x.label.fontSize),n=function(t,e){var n=t&&t.selectAll(".".concat(Xl)).node();if(n){var a=e.encode.children[2],r=n?n.children:[],o=!a._parser.show||rO(a),i=a._spec.isHorizontal,l=i?"Width":"Height";return{ulElement:n,liElement:r,available:n["client".concat(l)],isScrollable:n["scroll".concat(l)]>n["client".concat(l)]&&o,isHorizontal:i}}}(i,o)}return{enabled:b,trackerElement:p,highlightManager:s,config:c,globalFont:u,dataType:f,legendInstance:r,scale:m,ticks:v,boxSize:a,scrollToItem:n}}));wn.setComponent("sizeNestedOptions",(function(t){return{marker:{shape:"circle",hAlign:qr,vAlign:Kr,fillColor:hn,strokeColor:"#C0C2C4"},axis:{show:!0,tickOrient:ao,ticklabel:{fontSize:t.fontL1Size.l8},tickmark:{show:!1,color:"#AAACAF",size:10}}}}));var WO="center-center";function VO(t){var e=t.data,n=t.config,a=t.bound,r=t.scale,o=t.align,i=t.format,l=t.shape,s=void 0===l?"square":l,c=t.availableBound,u=n.ticklabel,d=n.tickmark,h=n.show,f=XO(n),p=h&&f&&function(t,e,n,a,r){var o=GO(a),i=o.hAlign,l=o.vAlign,s=t.color,c=t.size,u=UO(e,n,i,l,void 0===c?3:c,r);return{config:_objectSpread(_objectSpread({strokeColor:s},u),t),styles:{display:null,fillColor:"none"}}}(d,a,r,o,s),g=h&&function(t,e,n,a,r,o,i,l){var s,c,u,d=GO(a),h=d.hAlign,f=d.vAlign,p=null,g=wa(t.margin,2),v=f===qr;if(l){var m=function(){var t=Zn(arguments).slice(0),e={top:0,right:0,bottom:0,left:0};return t.map((function(t){var n=Da(t);for(var a in e)e[a]+=n[a]})),nr(e).join(" ")}(wa(o.size,3),g),y=UO(e,n,h,f,m,i);s=y.x2,c=y.y2,u=v?"1em":"0.3em",p=v?io:null}else{var b=_slicedToArray(YO(e,n,h,f,g,i),2);s=b[0],c=b[1],u=function(t){switch(t){case Jr:return"1em";case Kr:case WO:return"-0.3em";default:return"0.3em"}}(f),p=function(t){switch(t){case $r:return null;case Qr:return lo;default:return io}}(h)}return{config:_objectSpread({text:r,transform:function(t){return lu([s(t),c(t)])},anchor:p,dy:u},t),styles:{display:null}}}(u,a,r,o,i,d,s,f),v=Lr("group",".".concat("zc-nested-axis"));if(!h)return v;var m=Lr("group",".".concat("zc-nested-axis-tickmark"));if(p){var y={mark:"line",data:e,config:p.config};pa(y,"properties.styles",p.styles),m.children=[y]}var b=Lr("group",".".concat("zc-nested-axis-ticklabel"));if(b){var x={mark:"text",data:e,config:g.config};pa(x,"properties.styles",g.styles),b.children=[x],b.onEnd=function(t){return e=t.selectAll("text"),n=m.element.selectAll("line"),zw(e,n,c,a,g.config);var e,n}}return v.children=[m,b],v}function YO(t,e,n,a,r,o,i){var l=function(t,e,n){var a=Da(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0),r=t.width;switch(n){case $r:return function(t){return e(t)+a.left};case Qr:return function(t){return r-e(t)-a.right};default:return function(){return r/2}}}(t,e,n,r),s=function(t,e,n){var a=Da(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0),r=t.height;switch(n){case Jr:return function(t){return e(t)+a.top};case Kr:return function(t){return r-e(t)-a.bottom};case WO:return function(t){return(r-e(t))/2-a.bottom};default:return function(){return r/2}}}(t,e,a,r),c=l,u=s;return"square"===o?i&&(a===qr?u=function(t){return s(t)+e(t)/2}:n===qr?c=function(t){return l(t)+e(t)/2}:n===Qr&&(c=function(t){return l(t)+e(t)})):a!==qr&&(n===$r?c=function(t){return l(t)-e(t)/2}:n===Qr&&(c=function(t){return l(t)+e(t)/2})),[c,u]}function UO(t,e,n,a,r,o){r=Da(r);var i=YO(t,e,n,a,0,o,!0),l=i[0],s=i[1],c=function(){return t.width+r.left},u=function(){return t.height+r.top};return a===qr?c=l:u=s,{x1:l,y1:s,x2:c,y2:u}}function GO(t){var e=t.hAlign,n=t.vAlign;return n===qr&&e===qr&&(n=WO),{vAlign:n,hAlign:e}}function XO(t){return t.tickOrient===ro}var ZO="zc-nested-view";function qO(t){var e=t.config,n=t.bound,a=t.data,r=void 0===a?[]:a,o=t.scale,i=void 0===o?function(t){return t}:o,l=$O(n,i,e.hAlign),s=QO(n,i,e.vAlign),c=Lr("group",".".concat(ZO)),u=Lr("point",null,r);return u.config=_objectSpread(_objectSpread({},e),{},{size:{_type:"encode",scale:i},x:{_type:"encode",scale:l},y:{_type:"encode",scale:s}}),c.children=[u],c}function $O(t,e,n){var a=t.width;switch(n){case $r:return function(t){return e(t)/2};case Qr:return function(t){return a-e(t)/2};default:return function(){return a/2}}}function QO(t,e,n){var a=t.height;switch(n){case Jr:return function(t){return e(t)/2};case Kr:return function(t){return a-e(t)/2};default:return function(){return a/2}}}function KO(t,e){var n=function(t,e){var n=t.config,a=t.bound,r=t.format,o=e.scale,i=e.bound,l=e.ticks,s=e.labels,c=n.nested,u=c.marker,d=c.axis,h=wa(c.padding,3),f=Da(h),p={data:[1],config:n.title,bound:a},g={bound:i,data:Yn(l).reverse(),scale:o,config:u},v={bound:i,data:s||l,scale:o,config:d,align:{hAlign:u.hAlign,vAlign:u.vAlign},format:r,shape:u.shape,availableBound:{maxWidth:a.maxWidth-f.left-f.right,maxHeight:a.maxHeight-f.top-f.bottom}};return{titleSpec:p,viewSpec:g,axisSpec:v,backgroundSpec:{data:[1],config:n,margin:h},axisEnd:function(t,e,n){var a=Bn(t.element),r=Bn(n.element),o=Ge(-a.y,0)+r.height+h;t.element.attr("transform","translate(0,".concat(o,")")),e.element.attr("transform","translate(0,".concat(o,")"))}}}(t,e),a=n.titleSpec,r=n.viewSpec,o=n.axisSpec,i=n.backgroundSpec,l=n.axisEnd,s=Lr("group",".legendgroup"),c=Mw(i),u=Iw(),d=Ew(a);pa(d,"as.height","title_height");var h=qO(r);pa(h,"config.y",{_type:"as",as:"title_height"});var f=VO(o);return f.onEnd=function(){return l(f,h,d)},u.children=[d,h,f],s.children=[c,u],s}qO.x=$O,qO.y=QO;var JO=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){this.encode=KO(this.spec,this.viewScaleComponent())}},{key:"resize",value:function(t,n){if(t||n){var a=uu(t,n,this.spec.bound),r=a.w,o=a.h,i=this.encode.children,l=Bn(i[0].element),s=Bn(i[1].children[1].element);r-=t?Ge(l.width-s.width,0):0,o-=n?Ge(l.height-s.height,0):0,this.updateScale(r,o),_get(_getPrototypeOf(e.prototype),"resize",this).call(this,t,n)}}},{key:"draw",value:function(t){this.element=t,Kf(this.encode,t);var e=this.spec,n=e.config,a=e.bound,r=n.maxWidth,o=n.maxHeight,i=a.maxWidth,l=a.maxHeight,s=Bn(t),c=s.width,u=s.height;(r||o)&&(c-i>1||u-l>1)&&(i-=r&&c>i?c-i:0,l-=o&&u>l?u-l:0,this.updateScale(i,l),this.create(),Kf(this.encode,t))}}]),e}(zO);function tA(t,e,n,a){var r=jt(),o=Lu(r.srcElement||r.target,r),i=this.getData(a,o,[t,e]);this.associateBehaviours(a,i,o,r)}function eA(t,e){var n=_slicedToArray(e,2),a=n[0],r=n[1],o=t.map((function(t){return vl.dist({x:t[0],y:t[1]},{x:a,y:r})}));return c(o)||0}function nA(t,e,n,a){var r=this.options,o=r.ticks,i=r.config,l=r.scale,s=r.viewBound,c=r.polygonPoints,u=i.ranges,d=i.nested.marker,h=d.hAlign,f=d.vAlign,p=d.shape,g=void 0===p?"circle":p,v=nl(i),y=Ge(wa(v.triggerOffset,5),.1),b=o.length-1-a;if(u&&u.length)return b;var x,C,k=o[b],w=wa(o[b-1],l.domain()[0]),_=qO.x(s,l,h),S=qO.y(s,l,f),O=[_(w),S(w)],A=[_(k),S(k)],T=[A[0]+t[0],A[1]+t[1]];if("circle"===g)x=fl([].concat(O,[l(w)/2]),T),C=fl([].concat(A,[l(k)/2]),T);else{var P=c[a+1]||[],E=c[a];x=eA(P.map((function(t){return[t[0]+O[0],t[1]+O[1]]})),T),C=eA(E.map((function(t){return[t[0]+A[0],t[1]+A[1]]})),T)}return e_(l(m().domain([0,x+C]).range([w,k])(x)),l,{triggerOffset:y,round:!0})}JO.adjustFactor=function(t,e,n,a){var r=[0,0],o=t.maxWidth,i=t.maxHeight,l=t.nested.axis;return l.show&&(i||(r[1]+=gu([l.ticklabel,a,wr])),o||(r[0]+=e*(XO(l)?.3:.2))),r},JO.encode="z",JO.view="nested",JO.domMode="svg",wn.setComponent("sizeLegendNested",JO),zu(JO),wn.setComponent("geometryUtils.polygon.closestToPolygon",eA);var aA=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e)}(Hu);function rA(t,e){var n=this.options,a=n.config,r=n.highlightElement,o=n.viewScale,i=n.viewBound,l=n.dataType,s=a.ranges,c=a.nested,u=nl(a),d=c.marker,h=u.marker,f=e.point;if(!Ja(h)){r.style("opacity",null);var p={bound:i,data:oA(f,s,l),scale:o,config:Rn(h,d)},g=new aA(p);g.create(),g.draw(r)}}function oA(t,e,n){return n===To?[e[t][0]]:e&&e.length?[e[t]]:na(t.data)?[t.data]:[]}function iA(){this.options.highlightElement.style("opacity",0)}function lA(t,e){var n=this.options,a=n.tooltip,r=n.format,o=n.config,i=n.highlightElement,l=n.dataType,s=o.ranges,c=e.point,u=l===To?s[c][0]:s&&s.length?s[c]:c[0],d=i.selectAll("g.".concat(ZO)).selectAll(mr),h=M_(d,a.config,void 0,iu(d).translate);a.show(r(u)),a.positionTooltip(h)}aA.parser=qO,wn.setComponent("nestedView",aA);var sA={LISTENER:{mousemove:tA,mouseout:tA,taphold:tA,tapholdend:tA},DATA_FINDER:{mousemove:nA,mouseout:nA,taphold:nA,tapholdend:nA},BEHAVIOUR:{mousemove:[oS,tS,rA,lA],mouseout:[H_,N_,eS,iA],taphold:[AO,oS,tS,rA,lA],tapholdend:[H_,N_,eS,iA]},REVERSE_DATA_FINDER:{mousemove:function(){return CO.apply(this,arguments)}},REVERSE_BEHAVIOUR:{mousemove:[rA,lA],mouseout:[aS,iA]},SUPPORTED:Ji($i)};wn.setComponent("_legendSizeNestedHandlers",sA),wn.setComponent("_legendSizeNestedEventArguments",(function(t,e){var n=t.legends.get(e),a=n.component,r=n.meta,o=n.element,i=n.highlightManager,l=r.config,s=r.scaleComponent,c=r.format,u=l.events,d=l.nested.marker.shape,h=s.schema.data.dataType,f=s.getScale(),p=o.select("g.".concat(ZO)).selectAll(mr).style("pointer-events","all"),g=function(t){var e=t.select("g.".concat(ZO));return wc("g",".".concat(es),[1],t).style("display",null).style("opacity",0).attr("transform",e.empty()?null:e.attr("transform"))}(o),v=a.viewScaleComponent(),m=v.ticks,y=v.scale,b=v.bound,x=u&&0==Jn(u.enabled,!0),C=!Ja(nl(l).marker),k="circle"!==d?function(t){var e=[];return t.each((function(){e.push(Ac(this))})),e}(p):null,w=n.enabled&&!x&&C,_=function(t,e,n){var a=nl(n).tooltip,r=a&&a.orient,o=r?qs(r):function(t){var e=t.nested.marker,n=e.hAlign,a=e.vAlign;return a!==qr?a:n!==qr?n:Kr}(n);return L_({config:_objectSpread(_objectSpread({},a),{},{orient:o}),orient:o,element:e,chart:t})}(t,g,l);return{enabled:w,trackerElement:p,highlightElement:g,highlightManager:i,config:l,ticks:m,viewScale:y,viewBound:b,scale:f,dataType:h,polygonPoints:k,legendInstance:n,tooltip:_,format:c}}));function cA(t,e,n,a,r){var o=r.layout===no,i=wa(t.padding,2),l=gu([t,a,wr]),s=t.align,c=[0,0];return t.show&&(o&&s!==qr||!o&&s===qr?c[1]+=2*(i+l):c[0]+=i+l+.2*e),c}wn.setComponent("sizeSliderOptions",(function(t){return{marker:{shape:"circle",hAlign:qr,vAlign:qr,fillColor:"#51545A",strokeColor:"white"},track:{show:!0,fillColor:"#F2F3F5"},connector:{show:!0,strokeColor:"#51545A"},axis:{show:!0,ticklabel:{fontSize:t.fontL1Size.l5},minmaxlabels:{padding:2,align:"center",fontSize:t.fontL1Size.l5},tickmark:{color:"rgb(97, 97, 97)",size:5},axisline:{show:!0,color:"rgb(97, 97, 97)"}}}})),wn.setComponent("minmaxLabel.adjust",cA);var uA=function(t){function e(){var t;return _classCallCheck(this,e),(t=_callSuper(this,e,arguments)).brushOptions=t.getBrushOptions(),t}return _inherits(e,t),_createClass(e,[{key:"create",value:function(){var t=this,e=this.viewScaleComponent();this.viewScale=e.scale,this.brushOptions=this.getBrushOptions();var n=C_({spec:this.spec,brushOptions:this.brushOptions,viewScaleComponent:e,align:function(){return t.align(t)}});return this._parser=n._helper,this.encode=n}},{key:"resize",value:function(t,n){if(t||n){var a=hA(this,"Tracker"),r=hA(this,"LegendBackgroundSvg"),o=Bn(a),i=Bn(r),l=uu(t,n,this.spec.bound),s=l.w,c=l.h;s-=t?Ge(i.width-o.width,0):0,c-=n?Ge(i.height-o.height,0):0,this.updateScale(s,c),_get(_getPrototypeOf(e.prototype),"resize",this).call(this,s,c)}}},{key:"align",value:function(t){var e,n,a=t._parser.alignSpec,r=a.isHorizontal,o=a.padding,i=a.axisPadding,l=a.axisOrient,s=a.markerSize,c=hA(t,"LegendTitleSvg"),u=hA(t,"Tracker"),d=hA(t,"SliderView"),h=hA(t,"SliderAxis"),f=hA(t,"MinmaxLabel"),p=hA(t,"Connector"),g=hA(t,"SelectionTracker"),v=Bn(c),m=Bn(u),y=Bn(h),b=Bn(f),x=s[0][0]/2;r?l===Jr?(dA([e=x-Xe(0,y.x),(n=v.height+y.height+o)+i-m.y],u,d,p,g),dA([e,n],h,f)):(dA([e=x,(n=v.height+o)-m.y],u,d,p,g),dA([e,n+m.height+i],h,f)):l===$r?(dA([(e=y.width)+i,n=v.height+o+Ge(-Xe(0,b.y),x)],u,d,p,g),dA([e+m.x,n],h,f)):(dA([e=0,n=v.height+o+Ge(-Xe(0,b.y),x)],u,d,p,g),dA([m.width+m.x+i,n],h),dA([m.width+m.x,n],f)),dA([Xe(0,f.node().getBoundingClientRect().left-c.node().getBoundingClientRect().left),0],c)}},{key:"getSliderArea",value:function(){var t,e,n=this.viewScale,a=this.spec,r=a.config,o=a.bound,i=a.area,l=o.maxWidth,s=o.maxHeight,c=r.slider,u=al(r),d=n.domain(),h=[n(d[0]),n(d[d.length-1])],f=fs(r).layout===no,p=u.type||f?c.width:null,g=u.type?c.height:f?null:c.height,v=h[0]+h[h.length-1],m=Ge(h[0],h[h.length-1]);return f?(t=1.5*v,e=m,l-=v/2):(t=m,e=1.5*v,s-=v/2),{width:Xe(Xa(p,i.width,t),l),height:Xe(Xa(g,i.height,e),s)}}},{key:"getBrushOptions",value:function(){this.viewScale=this.viewScale||this.viewScaleComponent().scale;var t=this.getSliderArea(),e=this.viewScale,n=this.spec,a=n.config,r=n.format,o=a.ranges,i=a.reversed,l=this.spec.scaleComponent.schema.data.dataType,s=fs(a),c=s.layout===no,u=c?[0,t.width]:[0,t.height],d=i?u.reverse():u,h=__(a,l,e,d),f={config:a,reversed:i,ranges:o,range:d,isHorizontal:c,initialExtent:w_(o,a.filter.range,e,h,l),align:s,format:r,brushScale:h,scale:h,sizeScale:e,datatype:l,type:c?"x":"y",orient:c?Kr:$r,dimension:[t.width,t.height],scale_domain:e.domain(),singleDomainContinuous:h.singleDomainContinuous,markerBound:VS(a.slider.marker,{},s,e,0),encode:"z"};return f.handles=function(t){var e,n=t.sizeScale,a=t.brushScale,r=t.config,o=t.dimension,i=t.align,l=t.isHorizontal,s={width:o[0],height:o[1]},c=r.slider,u=al(r),d=c.marker,h=nl(r),f=u.type,p=d.shape||"circle";if(h.type){var g=Lp(o,l);r.hoverOptions.slider=Rn(g,h,!0)}if(f){var v=Lp(o,l);r.filter.slider=Rn(v,u,!0)}if(!f){var m=d_(n,a,d,s,i);return{shape:np(p),position:e=i.layout===no?function(t){return[0,m.y(t)]}:function(t){return[m.x(t),0]},transform:function(t){return"translate(".concat(e(t).join(" "),") ")}}}}(f),f}}]),e}(zO);function dA(t){for(var e="translate(".concat(t.join(" "),")"),n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];Oa(a,(function(t){return t.attr("transform",e)}))}function hA(t,e){return"LegendBackgroundSvg"===e?t.encode.children[0].element:t.encode.children[1].children[{LegendTitleSvg:0,Tracker:1,SelectionTracker:2,SliderAxis:3,Connector:4,SliderView:5,MinmaxLabel:6}[e]].element}function fA(t,e){var n=e.type,a=e.selection,r=this.getData(t,n,a);this.associateBehaviours(t,n,r,a,e)}uA.adjustFactor=function(t,e,n,a,r){var o=t.maxWidth,i=t.maxHeight,l=t.slider.axis,s=l.minmaxlabels,c=fs(t),u=c.layout===no,d=function(t,e,n,a,r){var o=t.show,i=t.padding,l=t.tickmark,s=t.axisline,c=t.ticklabel,u=r.layout===no,d=wa(i,3),h=wa(l.size,6),f=s?wa(s.strokeWidth,1):0,p=wa(c.margin,3),g=gu([c,a,wr]),v=[0,0];return o&&(u?v[1]+=g+f+h+d+p:v[0]+=g+f+h+d+p+.2*e),v}(l,e,0,a,c),h=cA(s,e,0,a,c),f=[0,0];return i||(f[1]+=d[1]+h[1],u||(f[1]+=r[0]/2+r[r.length-1]/2)),o||(f[0]+=d[0]+h[0],u&&(f[0]+=r[0]/2+r[r.length-1]/2)),f},uA.encode="z",uA.view="slider",uA.domMode="svg",wn.setComponent("sizeLegendSlider",uA),zu(uA),wn.setComponent("_getLegendSizeSliderBrushArguments",(function(t){var e,n=t.legends.get("z-0"),a=n.component,r=n.element,o=a.brushOptions,i=o.type,l=function(t,e){var n=_slicedToArray(t,2),a=n[0],r=n[1],o=e.brushScale,i=e.isHorizontal,l=e.ranges,s=(l&&1===l.length?0:o.bandwidth?o.bandwidth():0)/2;return i?[[s,0],[a-s,r]]:[[0,s],[a,r-s]]}(o.dimension,o);return new(wn.getComponent("BrushD3Options"))({type:i,extent:l,component:a,behaviour:"resizeToMouse",element:(e=r,e.selectAll("g.".concat(Jl))),styles:{selection:{fillColor:hn,strokeColor:hn,fillOpacity:1},track:{fillColor:hn}}})}));var pA=N();function gA(t,e){var n=t.instance,a=n.customHandles,r=this.chart;if(a){var o=n.options.component.brushOptions,i=o.isHorizontal;o.handles&&a.each((function(t,e){var a=l(this).selectAll("".concat(mr,".").concat(rs)).nodes();if(a[1]){var o=function(t,e,n){var a,r=t.x,o=t.y,i=t.width,l=t.height,s=1,c=N().curve(g("linear-closed"));a=n?0===e?[[0,o-s],[r+i+s,o-s],[r+i+s,o+l+s],[0,o+l+s]]:[[r-s,o-s],[0,o-s],[0,o+l+s],[r-s,o+l+s]]:0===e?[[r-s,0],[r+i+s,0],[r+i+s,o+l+s],[r-s,o+l+s]]:[[r-s,o-s],[r+i+s,o-s],[r+i+s,0],[r-s,0]];return c(a)}(Bn(a[0]),e,i),s=kp.GET_CLIP(n,[0,0],r,"size_slider_brush_handle_".concat(e),{desc:o});l(a[1]).attr("clip-path",s).style("opacity",0).classed(as,!0)}}))}}var vA={LISTENER:{start:fA,brush:fA,end:fA},DATA_FINDER:{start:P_,brush:P_,end:P_},BEHAVIOUR:{start:[V_],brush:[U_,function(t,e){var n=t.instance,a=n.customHandles;if(a){var r=a.selectAll("path.".concat(rs)),o=n.options.component.brushOptions,i=o.handles,l=o.markerBound,s=l.width,c=l.height,u=h_(o,e.point);if(i){var d=i.shape,h=i.transform;r.attrs({d:function(t){return d(s(u[t.i]),c(u[t.i]))},transform:function(t){return h(u[t.i])}})}}},z_,j_,W_,function(t,e,n){var a=e.point,r=t.instance.options.component,o=r.element,i=r.brushOptions,l=o.selectAll("".concat(mr,".zc-connector-line")),s=h_(i,a);l.attr("d",pA(v_(r._parser.connectorSpec)(s,n)))},function(t,e,n){var a=this.chart,r=e.point,o=t.instance,i=o.options,l=i.component,s=i.extent,c=l.element,u=l.brushOptions,d=u.isHorizontal;if(al(u.config).track.fillColor){var h=c.selectAll("g.".concat(Kl,"-selection")),f=h.selectAll("".concat(mr,".").concat($l)),p=h.selectAll("".concat(mr,".").concat(Ql)),v=h_(u,r),m=Df(p_(l._parser.selectionTrackSpec).symbolSpec).config;p.attrs({d:function(t,e){return m.d(v[e])},transform:function(t,e){var a=m.transform(v[e]).replace("translate(","").replace(")","").split(" ").map((function(t){return+t}));return lu(d?[n[e],a[1]]:[a[0],n[e]])}});var y=function(t,e,n){var a=N().curve(g("linear-closed")),r=n?[[t[0],e[0][1]],[t[1],e[0][1]],[t[1],e[1][1]],[t[0],e[1][1]]]:[[e[0][0],t[0]],[e[1][0],t[0]],[e[1][0],t[1]],[e[0][0],t[1]]];return a(r)}(n,s,d),b=kp.GET_CLIP(o,[0,0],a,"size_slider_brush_selection-track",{desc:y});f.attr("clip-path",b)}}],end:[G_,F_,Y_,gA]},LISTENER_TYPES:M(["start","brush","end"]),SUPPORTED:Ji(qi),INIT:function(t){var e=this.chart,n=t.instance,a=n.options.component.getBrushOptions(),r=a.initialExtent,o=a.config,i=(a.handles,function(t){var e=t.instance.options,n=e.component,a=e.extent,r=n.brushOptions,o=r.type,i=r.config,l=r.markerBound,s=r.handles,c=l.width,u=l.height,d=h_(r),h=al(i),f=nl(i),p=i.slider.marker,g=h.type,v=p.shape||"circle";if(g)return Fp(o,g,a,null,h[g]||{});var m=s.transform,y=s.shape,b=function(t){return y(c(t),u(t))},x={shape:na(f.type)?[[b(d[0]),b(d[0])],[b(d[1]),b(d[1])]]:[[b(d[0])],[b(d[1])]],style:_objectSpread(_objectSpread({},Bf(p)),{},{transform:function(t){return m(d[t.i])}})};return Dp("marker-".concat(v),x),Fp(o,"marker-".concat(v),a,null,p)}(t)),l=function(t){var e=t.events,n=t.filter;return!(e&&0==Jn(e.enabled,!0))&&n.enabled}(o);t.initialized=!1,n.setSelection(r);var s=n.addCustomHandle(i);n.tooltip=R_(t),Xw(al(o),i,s,e),function(t,e){var n=t.instance,a=n.options.component.element.selectAll("g.".concat(Kl)).selectAll("".concat(mr,".").concat($l)).attr("d")||"",r=kp.CLIP_TRACK(n,[0,0],e,"size_slider_brush",{desc:a});n._selection.attr("clip-path",r)}(t,e),gA.call(this,t),l||(n.customHandles.attr("pointer-events","none"),n.destroy()),t.initialized=!0}};function mA(t,e,n,a){var r=this,o=jt(),i=Lu(r.tracker.node(),o),l=r.getData(a,i);r.associateBehaviours(a,l,i,o)}wn.setComponent("_legendSizeSliderBrushHandlers",vA);var yA={LISTENER:{mousemove:mA,mouseout:mA},DATA_FINDER:{mousemove:Jw,mouseout:Jw},BEHAVIOUR:{mousemove:[lS,oS,qw,tS,iS],mouseout:[H_,function(){var t=this;bA(t)?nS.call.apply(nS,[t].concat(Array.prototype.slice.call(arguments),[!0])):B_.call.apply(B_,[t].concat(Array.prototype.slice.call(arguments)))},eS,function(){var t=this;bA(t)?aS.call.apply(aS,[t].concat(Array.prototype.slice.call(arguments),[!0])):N_.call.apply(N_,[t].concat(Array.prototype.slice.call(arguments)))}]},REVERSE_DATA_FINDER:{mousemove:function(){return CO.apply(this,arguments)}},REVERSE_BEHAVIOUR:{mousemove:[qw,iS],mouseout:[nS,aS]},SUPPORTED:Ji(qi)};function bA(t){var e=t.targetEvent.relatedTarget;if(e)return l(e).classed(rs)}function xA(t,e,n,a,r,o){this.value=o,this.depth=a,this.depthbyrow=e,this.depthbycolumn=n,this.childIndexbyrow=0,this.childIndexbycolumn=0,this.tag=r,this.data=t.data,this.node=t}function CA(t,e){var n,a,r,o=t,i=[o];do{for(n=i;o=n.pop();)if(e(o),a=o.children)for(r=a.length-1;r>=0;r--)n.push(a[r])}while(i.length)}function kA(t,e,n){var a,r,o,i=t,l=[i];do{for(a=l;i=a.pop();)if(e(i),r=i.children)for(o=r.length-1;o>=0;o--)n(i,r[o]),a.push(r[o])}while(l.length)}function wA(){this.datatype="ordinal",this.nodes=[],this.inodes=[],this.domain=[],this.range=null,this.index=-1,this.list=new Ku}function _A(){this.datatype="numeric",this.nodes=new Array(0),this.domain=new Array(0),this.range=[],this.entries=L(),this.keys=[],this.index=0,this.count=0,this.list=new Ku}function SA(){this.list=new Ku,this.domain=new Array(0),this.nodes=new Array(0),this.prevNodesCount=null}function OA(){this.data=[],this.index=-1,this.row=-1,this.column=-1}function AA(t,e,n,a){this.value=t,this.depth=e,this.depthbyrow=n,this.depthbycolumn=a,this.datatype="numeric",this.data=[],this.index=0,this.count=0,this.name="Leaf"}function TA(t,e){this.value=e,this.children=new Array(0),this.layerNames=new Ku,this.leafNames=new Ku,this.list=new Ku,this.node=t}function PA(t){return new TA(t,t.value)}function EA(t){var e,n=this,a=t.tag,r=t.getDepth(),o="row"==a?"levelByRow":"levelByColumn",i="row"==a?"levelByColumn":"levelByRow";(e=n.branches[r])||(e=n.branches[r]=new wA)&&n.count++;var l="layer"==t.mainTag?"":t.point||t.value,s=e.list.indexOf(l);if(0==r&&na(s))t.index=s;else{e.list.add(t.value),e.index++,e.domain.push(l||""),e.nodes.push(t);var c=PA(t);!function(t,e){var n=t.tag;"row"==n?t.firstRow&&t.lastRow:t.firstColumn&&t.lastColumn,"row"==n?t.firstRow:t.firstColumn,("row"==n?t.lastRow:t.lastColumn)||(e.children=t.children)}(t,c),e.inodes.push(c),t.index=e.index}t.level="".concat(wa(t.parent&&t.parent.level,"")+t.index,"_"),t[o]="".concat(wa(t.parent&&t.parent[o],"")+t.index,"_"),t[i]="".concat(wa(t.parent&&t.parent[i],""))}function LA(t){var e=t.childIndex,n=this.clusters;n[e]||(n[e]=new _A)&&this.clustersCount++;var a=this.clusterMap.indexOf("".concat(t[this.name],"_").concat(e));Xn(a)?(this.clusterMap.add("".concat(t[this.name],"_").concat(e)),t.index=this.leafCount++):t.index=a}function MA(t){if(t.isDefined){var e,n=this.clusters,a=this.levelAttr,r=wa(t.parent&&t.parent[a],"");(e=n[0])||(e=n[0]=new _A)&&++this.leafCount&&++this.clustersCount&&(e.datatype="column"==this.name&&t.datatype._columns||"ordinal");var o,i=e.entries;o=i.has(r)||i.set(r,new SA);var l,s=(o=i.get(r)).list,c=s.indexOf(t.value,!0);if(Xn(c)){if(!this.missedNodes){var u=e.getPrevNodesCountBySetIdx(r);this.missedNodes=u+s.count!=e.count}l=function(t){var e=new AA(t.value,t.depth,t.depthbyrow,t.depthbycolumn);return e.data=[t.data],e.node=t,e.parent=t.parent,e}(t),l.index=e.count,c=s.count,o.domain[c]=t.value,o.nodes[c]=l,o.list.add(t.value,e.count++)}else o.nodes[c].data.push(t.data);(this.branches[t.depthbycolumn]?this.branches[t.depthbycolumn].inodes[t.column]:null)&&function(t,e,n){if(!t.rootLayer){var a,r=t.parent.value,o="".concat(r,"_").concat(n.value);"layer"==t.parent.tag?null==e.layerNames.indexOf(r)?(a=PA(t.parent),e.layerNames.add(r),a.children.push(n),e.children.push(a)):null==e.leafNames.indexOf(o)&&(a=e.children[e.layerNames.indexOf(r)]).children.push(n):(o="".concat(n.value),null==e.leafNames.indexOf(o)&&e.children.push(t)),e.leafNames.add(o)}}(t,this.branches[t.depthbycolumn].inodes[t.column],o.nodes[c]),Xn(e.list.indexOf(t.value))&&(e.list.add(t.value),e.keys.push(t.value)),t.data.index=t.index=s.indexOf(t.value),t.data.level="".concat(wa(t.parent&&t.parent.level,"")+t.index,"_"),t.data.levelByColumn="".concat(wa(t.parent&&t.parent.levelByColumn,"")+t.index,"_"),t.data.levelByRow="".concat(wa(t.parent&&t.parent.levelByRow,"")+t.index,"_"),l&&(l.level=t.data.level,l.levelByColumn=t.data.levelByColumn,l.levelByRow=t.data.levelByRow)}}function DA(t){var e,n=this.clusters,a="row"==this.name?t.childIndexbyrow:t.childIndexbycolumn;(e=n[a])||(e=n[a]=new _A)&&++this.leafCount&&++this.clustersCount,"column"==this.name&&(t.data.level="".concat(wa(t.parent&&t.parent.level,"")+t.index,"_"),t.data.levelByColumn="".concat(wa(t.parent&&t.parent.levelByColumn,"")+t.index,"_"),t.data.levelByRow="".concat(wa(t.parent&&t.parent.levelByRow,"")+t.index,"_")),e.nodes.push(t),n.count++}function IA(){return this.count}function RA(){return this.branches.length}function zA(){return("column"!=this.name||this.splitColumnLeaves)&&this.count?this.clustersCount*this.getDomainForBranch(0).length:this.leafCount}function jA(){return this.clustersCount}function FA(){return this.clustersCount>1}function BA(t){var e=this.branches[t];if(e)return e.domain}function HA(t){var e=this.branches[t];if(e)return e.range}function NA(t){var e=this.clusters[t],n=e.entries;if(e)return n.size()?E(n.values().map((function(t){return t.domain}))):e.domain}function WA(t,e){var n=this.clusters[t];if(n)return n.entries.values()[e].domain}function VA(t,e){var n=this.clusters[t];if(n)return n.entries.values()[e].nodes}function YA(t){var e=this.branches[t];if(e)return e.nodes}function UA(t){var e=this.clusters[t],n=e.entries;if(e)return n.size()?E(n.values().map((function(t){return t.nodes}))):e.nodes}function GA(t,e){return e=wa(e,[]),t.children?(t.children.forEach((function(t){"leaf"==t.tag&&t.isDefined?e.push(t.data):GA(t,e)})),e):t.data}function XA(t){var e=this.getLeavesCount();return t>e-1?this.getBranchNodes(t-e):this.getClusterNodes(0)}function ZA(t,e){for(var n=this.getClusterNodes(0)[t],a=null,r=this.getCount()+1;r--;){if(n.depth===e){a=n;break}if(0===n.depth)break;n=n.parent}return a}function qA(){this.count=0,this.clustersCount=0,this.leafCount=0,this.branches=[],this.clusters=[],this.name="row",this.levelAttr="levelByRow",this.clusterMap=new Ku}function $A(){this.count=0,this.clustersCount=0,this.leafCount=0,this.branches=[],this.clusters=[],this.name="column",this.levelAttr="levelByColumn",this.leafNodeMap=new Ku}function QA(){this.count=0,this.domain=new Ku,this.splitClusters=new Ku,this.groups=new Array(0),this.panes={}}function KA(t){if(!t.isEmpty){var e=t.tag;if("row"==e||"column"==e)if("ordinal"==t.datatype){if(this.getRootNodeList(t.tag).pushToBranch(t),"row"==e?t.row=t.index:t.column=t.index,!t.hasInnerChild){var n=this.layers.createDuplicateLayerNode(t);this.layers.pushToLayers(n,this.series),this.layers.createSeries(n,this.series)}}else this.getRootNodeList(t.tag).createCluster(t),"row"==e?t.row=t.index:t.column=t.index,"row"==e?t.childIndexbyrow=t.childIndex:t.childIndexbycolumn=t.childIndex,t.hasInnerChild?(t.levelByColumn="".concat(wa(t.parent&&t.parent.levelByColumn,"")),t.levelByRow="".concat(wa(t.parent&&t.parent.levelByRow,"")),this.layers.splitClusters.add(t.value)):this.layers.pushToLayers(t,this.series),this.layers.createSeries(t,this.series);else if("layer"==e)this.layers.pushToLayers(t,this.series),t.parent&&"ordinal"!=t.parent.datatype||this.layers.createSeries(t,this.series);else if("leaf"==e){var a=t.datatype,r=a.rows,o=a.columns;t.parent&&(t.childIndexbyrow=t.parent.childIndexbyrow,t.childIndexbycolumn=t.parent.childIndexbycolumn),"ordinal"==o||"time"==o?this.columns.pushToDiscreteCluster(t):this.columns.pushToContinuousCluster(t),this.layers.pushToSeries(t,this.series),"ordinal"==r||"time"==r?this.rows.pushToDiscreteCluster(t):this.rows.pushToContinuousCluster(t)}}}function JA(t,e){var n,a,r,o,i=e?"discrete":"continuous",l="row"==t?this.rows:this.columns,s=1,c="column"==t?l.splitColumnLeaves:null;if("discrete"==i){if(e._padding(l.getClusterNodes(0),l.getDomainForCluster(0)),l.leafScale=n=e._scale,c){var u=e._rangeInfo();r=u.startPos,s=u.sign,o=e._haUniformLeafScale}a=e.pointProperty}for(var d=l.count,h=0;h<d;h++){var f=l.branches[h].nodes,p=l.branches[h].range=new Array(f.length),g=l.branches[h].inodes,v=r;f.forEach((function(e,n){if(e.children){if(C(t,e.children)){var a=g[n].children,r=a&&a.length?a:e.children;e.rangeBand=y(l,r,i,n);var o="continuous"==i?e.rangeBand*n:c?v:m(r);v=o+s*e.rangeBand,e.range=[o,v]}else{e.rangeBand=e.children.reduce(k,0);var u=S(e.children);e.range=u?[u.range[0],e.rangeBand+u.range[0]]:[]}p[n]=e.range}}))}function m(t){var e;if(n){var r=x(t)?_(t):_(t[0].children);e=n(r[a])-w(r,!0,!0)}return e}function y(t,e,n,a){return"continuous"==n||c?function(t,e){if(!o&&t.nonUniformLeafSize)return t.nonUniformLeafSize[e]*t.clustersCount;return t.leafSize*t.clustersCount}(t,a):b(t,e)}function b(t,n){if(e._rangebandForFirstBranch)return e._rangebandForFirstBranch(n);if(x(n))return n.reduce(k,0);var a=function(t){var e=L();return t.map((function(t){t.children.map((function(t){if(!e.has(t.value)){var n=t.rootLayer?t:t.node||t;e.set(t.value,n)}}))})),e.values()}(n);return"discrete"==i&&e._hasDynamicLeafScale()&&e._padding(t.getClusterNodes(0),t.getDomainForCluster(0),a[0].index),a.reduce(k,0)}function x(t){return na(t[0])&&"leaf"===t[0].tag}function C(t,e){return e&&na(e[0])&&(e[0].tag!=t||"leaf"===e[0].tag||"numeric"==e[0].datatype)}function k(t,e){return!e.isDefined||e.isEmpty?0:e.rangeBand?t+e.rangeBand:t+n.bandwidth(e.index)+w(e,!0,n)+w(e,!1,n)}function w(t,e,a){var r="Leaf"==t.name?t.node:t;return e&&r===n.firstPt||!e&&r===n.lastPt?a?wa(n._outerPadding,n.outerPadding):n.outerPadding:a?wa(n._innerPadding,n.innerPadding):n.innerPadding}function _(t){var e;return t.some((function(t){var n="Leaf"==t.name?t.node:t;return n.isDefined&&(e=t),n.isDefined})),e}function S(t){var e;return t.some((function(t){return t.isEmpty||(e=t),!t.isEmpty})),e}}function tT(t,e,n){!function(t,e,n){if(t.count||t.leafCount){var a=150,r=t.count?t.branches[0].domain.length:1;e=$n(e,n),t.leafSize=e?e/(r*t.clustersCount):a}}(this.rows,t,n),function(t,e,n){if(e=$n(e,n),t.count||t.leafCount){var a=150,r=t.getClusterNodes(0).length,o=e?e/r:a/r,i=t.count?t.branches[0].domain.length:1;if(t.clusters[0].datatype==To){t.nonUniformLeafSize=new Array(0);for(var l=0;l<i;l++)t.nonUniformLeafSize[l]=o*t.getDomainForClusterSet(0,l).length}t.leafSize=e?e/(i*t.clustersCount):a}}(this.columns,e,n)}function eT(t){for(var e,n=t.parent,a=t,r=t.children;n;){if(e=n.children,0==r.length)aT(e,nT(e,a,"value"));r=(a=n).children,n=n.parent}}function nT(t,e,n){var a=-1;return t.some((function(t,r){if(t[n]==e[n])return a=r,!0})),a}function aT(t,e){e>-1&&t.splice(e,1)}function rT(t,e){var n,a,r,o,i=this,l=new xA(t,-1,-1,-1,"root",""),s=e.children||oT,c=e.nodeType||iT,u=e.dataType||lT,d=e.nodeName||sT,h=e.data,f=e.isDefined,p=e.isEmpty,g=e.hasSplitLeavesColumns();this.rows=new qA,this.columns=new $A,this.layers=new QA,this.series=[],CA(l,(function(t){if("leaf"!==t.tag&&(a=s(t))&&(o=a.length)){t.children=new Array(0);var e=!0;for(r=0;r<o;r++)(n=new xA(a[r])).parent=t,n.depth=t.depth+1,n.row=t.row||0,n.column=t.column||0,n.tag=c(n),n.datatype=u(n),n.depthbyrow="row"==n.tag?t.depthbyrow+1:t.depthbyrow,n.depthbycolumn="column"==n.tag?t.depthbycolumn+1:t.depthbycolumn,n.childIndex=t.children.length,n.childIndexbyrow=t.childIndexbyrow||0,n.childIndexbycolumn=t.childIndexbycolumn||0,n.isDefined="leaf"!=n.tag||f(n.node),n.value=d(n.node),n.data=h(n.node),n.isEmpty="leaf"==n.tag?!n.isDefined:p(n),e=e?n.isEmpty:e,n.isEmpty||t.children.push(n);t.isEmpty=e,t.isEmpty&&eT(t)}})),this.columns.splitColumnLeaves=g,kA(l,(function(t){i.process(t)}),this.postProcess),this.rows.branches.reverse(),this.columns.branches.reverse(),this.columns.missedNodes&&this.columns.setNodeIndexForClusters()}function oT(t){return t.children}function iT(t){}function lT(t){}function sT(t){}function cT(t,e,n){var a,r,o,i,l=new xA(t,-1,-1,-1,"root",""),s=n.children,c=n.nodeType,u=n.dataType,d=n.nodeName,h=n.layerName(t),f=n.data,p=n.isDefined,g=n.isEmpty,v=e||new xA({},-1,-1,-1,"root","");return CA(l,(function(e){if("leaf"!==e.tag&&(r=s(e))&&(i=r.length)){var n,l=e.main||v;l.children||(l.children=[]),e.children=new Array(0);var m=uT(l.children),y=!0;for(o=0;o<i;o++){(a=new xA(r[o])).parent=l,a.row=l.row||0,a.column=l.column||0,a.depth=l.depth+1,a.tag=c(a,a.depth+1),a.datatype=u(a,a.depth+1),a.depthbyrow="row"==a.tag?l.depthbyrow+1:l.depthbyrow,a.depthbycolumn="column"==a.tag?l.depthbycolumn+1:l.depthbycolumn,a.data=f(r[o]),a.childIndex=e.children.length,a.childIndexbyrow=l.childIndexbyrow||0,a.childIndexbycolumn=l.childIndexbycolumn||0,a.value=d(a.node),a.isDefined="leaf"!=a.tag||p(a.node),a.isEmpty="leaf"==a.tag?!a.isDefined:g(a),y=y?a.isEmpty:y;var b=new xA(r[o]);if(b.value=a.value,"leaf"==a.tag)uT(l.children)[h]&&n?n.children.push(a):((n=new xA(t)).disabled=t.disabled,n.value=h,l.children.push(n),n.children=[a]),n.isDefined=!0,n.tag="layer",a.seriesname=n.value,a.rootLayer=!0;else m[a.value]?b.main=m[a.value]:(l.children.push(a),b.main=a);b.parent=l,a.isEmpty||e.children.push(b)}e.isEmpty=l.isEmpty=y,e.isEmpty&&eT(e)}})),v}function uT(t){var e={};return t&&t.length&&t.forEach((function(t){e[t.value]=t})),e}function dT(t,e){var n,a=this,r=this;this.rows=new qA,this.columns=new $A,this.layers=new QA,this.series=[],t.forEach((function(t,r){a.layers.createSeries({node:t},a.series),a.layers.domain.add(t.seriesname),t.disabled||(n=new cT(t,n,e))})),this.columns.splitColumnLeaves=e.hasSplitLeavesColumns(),kA(n,(function(t){"layer"==t.tag&&(t.data=[t.children.map((function(t){return t.data}))]),r.process(t)}),this.postProcess),this.rows.branches.reverse(),this.columns.branches.reverse()}function hT(t,e){var n=this;this.rows=new qA,this.columns=new $A,this.layers=new QA,this.series=[];var a=new xA(t,-1,-1,-1,"root","");a.children=t.data,kA(a,(function(t){"layer"==t.type&&(t.data=[t.children.map((function(t){return t.data}))]),n.process(t)}),this.postProcess),this.rows.branches.reverse(),this.columns.branches.reverse()}wn.setComponent("_legendSizeSliderHandlers",yA),wn.setComponent("_legendSizeSliderEventArguments",(function(t,e){var n=t.legends.get(e),a=n.component,r=n.meta,o=n.element,i=n.highlightManager,l=r.scaleComponent.schema.data.dataType,s=a.brushOptions,c=s.config,u=c.events,d=nl(c),h=o.selectAll("g.".concat(Jl)),f=function(t,e){var n=e.filter.enabled?".selection,.".concat(as):".".concat($l,",.").concat(Ql);return t.selectAll(n).style("pointer-events","all")}(o,c),p=function(t){return wc("g",".".concat(es),[1],t).style("pointer-events","none").style("display",null).style("opacity",1)}(h),g=function(t,e,n){return L_({config:nl(n).tooltip,orient:us.getOrient(n),element:e,chart:t})}(t,p,n.meta.config),v=u&&0==Jn(u.enabled,!0);return _objectSpread(_objectSpread({enabled:n.enabled&&!v&&na(d.type),trackerElement:f,highlightElement:p,highlightManager:i,tooltip:g},s),{},{dataType:l,legendInstance:n})})),xA.prototype={getDepth:function(){var t=this;return"row"==t.tag?t.depthbyrow:t.depthbycolumn}},_A.prototype={constructor:_A,getPrevNodesCountBySetIdx:function(t){if(this.entries.get(t).prevNodesCount)return this.entries.get(t).prevNodesCount;for(var e=0,n=0;n<t;n++)e+=this.entries.has(n)?this.entries.get(n).list.count:0;return this.entries.get(t).prevNodesCount=e,e}},SA.prototype={constructor:SA},AA.prototype={constructor:AA},qA.prototype={constructor:qA,pushToBranch:EA,createCluster:LA,pushToDiscreteCluster:MA,pushToContinuousCluster:DA,getCount:IA,getBranchesCount:RA,getLeavesCount:zA,getClustersCount:jA,hasMultiCluster:FA,getDomainForBranch:BA,getRangesForBranch:HA,getDomainForCluster:NA,getDomainForClusterSet:WA,getNodesForClusterSet:VA,getClusterNodes:UA,getBranchNodes:YA,getNodesAtDepth:XA,getParent:ZA,getAllChildren:GA},$A.prototype={constructor:$A,pushToBranch:EA,createCluster:LA,pushToDiscreteCluster:MA,pushToContinuousCluster:DA,getCount:IA,getBranchesCount:RA,getLeavesCount:zA,getClustersCount:jA,hasMultiCluster:FA,getDomainForBranch:BA,getRangesForBranch:HA,getDomainForCluster:NA,getUniqueDomainForCluster:function(t){var e=this.clusters[t];if(e)return e.keys},getDomainForClusterSet:WA,getNodesForClusterSet:VA,getDynamicDomainForClusterSet:function(t,e){var n=this.clusters[t];if(n){var a,r=n.entries.values()[e].customDomain;return r?(r.values().map((function(t){a=t.values})),E([n.entries.values()[e].domain,a])):n.entries.values()[e].domain}},getMergedDomainForClusterSet:function(t,e){if(this.clusters[t]){var n=this.getDomainForClusterSet(t,e),a=this.getDynamicDomainForCluster(t,e);return E([n,a])}},getDynamicDomainForCluster:function(t){var e=this,n=this.clusters[t],a=n.entries;if(n)return a.size()?E(a.values().map((function(n,a){return e.getDynamicDomainForClusterSet(t,a)}))):n.domain},getClusterNodes:UA,getBranchNodes:YA,getNodesAtDepth:XA,getParent:ZA,getAllChildren:GA,setNodeIndexForClusters:function(){var t=this;t.clusters.map((function(e,n){t.getClusterNodes(n).map((function(t,e){t.index=e,t.data.map((function(n){n.index=e,t.level=n.level=n.level.split("_").slice(0,-2).concat([n.index]).join("_"),t.levelByColumn=n.levelByColumn=n.levelByColumn.split("_").slice(0,-2).concat([n.index]).join("_"),t.levelByRow=n.levelByRow=n.levelByRow.split("_").slice(0,-2).concat([n.index]).join("_")}))}))}))}},QA.prototype={constructor:QA,pushToLayers:function(t,e){var n,a,r,o=this,i=t.row,l=t.column,s="".concat(i,"_").concat(l),c=t.layer;n=t.layer=t.layer&&t.layer.length>1?t.layer.indexOf(t.layer[t.childIndexbyrow]):0,(a=o.groups[n])||(a=o.groups[n]=new Ku),(r=o.panes[s])||(r=o.panes[s]=new OA)&&o.count++,r.index=o.count-1,r.row=i,r.column=l,r.layer=n,r.data.push(t),o.domain.add(t.value),a.add(t.value),o.isLayerNode=c,t.levelByColumn="".concat(wa(t.parent&&t.parent.levelByColumn,"")),t.levelByRow="".concat(wa(t.parent&&t.parent.levelByRow,""))},createSeries:function(t,e){var n=this,a=t.node;if(!e[(n.splitClusters.count?n.splitClusters:n.domain).indexOf(t.value)]){var r={type:a.type,color:a.color,data:[[]],yaxiscolumnorder:a.yaxiscolumnorder,seriesname:a.seriesname,disabled:a.disabled,hideInLegend:a.hideInLegend,filtered:a.filtered};a.plotoptions&&(r.plotoptions=a.plotoptions),e.push(r)}},pushToSeries:function(t,e){var n=this,a=(n.splitClusters.count?n.splitClusters:n.domain).indexOf(function(t,e){var n=t.seriesname;if(!n)if("layer"==t.parent.tag)n=e?t.parent.parent.value:t.parent.value;else if("numeric"==t.parent.datatype)n=t.parent.value;else{var a="row"==t.parent.tag?t.childIndexbyrow:t.childIndexbycolumn;n="manual_".concat(a)}return n}(t,n.splitClusters.count))||0;e[a]&&e[a].data[0].push(t.data)},getLayersCount:function(){return this.count},getPanesCount:function(){return this.getPanes().length},getPanes:function(){return nr(this.panes)},createDuplicateLayerNode:function(t){var e="row"==t.tag?t.childIndexbyrow:t.childIndexbycolumn,n="layer"==t.mainTag?t.value:"manual_".concat(e),a=new xA(t,t.depthbyrow,t.depthbycolumn,t.depth,"layer",n);return a.node=t.node,a.row=t.row,a.column=t.column,a.childIndexbyrow=t.childIndexbyrow,a.childIndexbycolumn=t.childIndexbycolumn,this.noLayers="layer"!==t.mainTag,a}},rT.prototype={row:qA,column:$A,layer:QA,process:KA,getRootNodeList:function(t){return"row"==t?this.rows:"column"==t?this.columns:"layer"==t?this.layers:void 0},setRanges:JA,setRangesForLeaf:function(t,e){for(var n="row"==t?this.rows:this.columns,a=(e.domain(),e.bandwidth()),r=n.count?n.branches[0].domain.length:1,o=n.clusters[0],i=0,l=0,s=new Array(0),c=0;c<r;c++){var u=o.entries.values()[c].customDomain,d=n.getDomainForClusterSet(0,c);d.map((function(t,n){var r,o=i;u&&u.get(0)&&n==d.length-1?(r=o+u.get(0).count,s[l]=[e(o),e(r)+a],i=r):s[l]=[e(o),a+e(o)];i++,l++}))}return s},leafSize:tT,postProcess:function(t,e){var n=t.tag;e.row=t.row||0,e.column=t.column||0,"row"==n?e.childIndexbyrow=t.childIndexbyrow:"column"==n&&(e.childIndexbycolumn=t.childIndexbycolumn)}},wn.setComponent("PivotLayout",rT),cT.prototype={},dT.prototype={row:qA,column:$A,layer:QA,process:KA,preProcess:function(t){"layer"==t.tag&&(t.data=[t.children.map((function(t){return t.data}))]),this.process(t)},postProcess:function(t,e){e.row=t.row||0,e.column=t.column||0},getRootNodeList:function(t){return"row"==t?this.rows:"column"==t?this.columns:"layer"==t?this.layers:void 0},setRanges:JA,leafSize:tT,executor:cT},wn.setComponent("LayerHierarchyLayout",dT),hT.prototype={process:KA,preProcess:function(t){"layer"==t.tag&&(t.data=[t.children.map((function(t){return t.data}))]),this.process(t)},postProcess:function(t,e){e.row=t.row||0,e.column=t.column||0},getRootNodeList:function(t){return"row"==t?this.rows:this.columns},setRanges:JA,leafSize:tT},wn.setComponent("GroupByTimeDataLayout",hT);function fT(t,e,n){var a,r,o,i,l=tc(t,e,0).baseScale;if(0===n)return 2;if(l.bandwidth){var s=(a=l.domain()).length>1?1:0;a=[a[s],a[s]]}else{a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=[],o=t.dataset.getColumn(n,a).dataindex;return t.seriesdata.some((function(t){return t.data.some((function(t){return t.some((function(t){var n=t[o];if(na(n)&&!qa(r,n)&&r.length!==e)return r.push(n),r.length===e}))}))})),r}(t,2);var c=_slicedToArray(t.dataObject.getMinMaxX(0,!1),2);o=c[0],i=c[1]}var u=(r=Hp(t,a,0,"x",!0))[1]-r[0],d=l.range(),h=Ze(d[1]-d[0]);return r[0]===r[1]?h:(o===a[0]&&i===a[1]&&(u/=2),Xe(h,u*n))}function pT(t,e,n,a){var r=t.instance,o=this.behaviours,i=r.chart,l=e.point,s=l.x.domain,c=o.PLOT_BRUSH,u=o.PLOT_ZOOM,d=r.brushScale.range();i.axes.x.scale;i.viewPortExtent=s,r.lastScroll=n.map(r.scrollPositionScale.invert),i.cache.scroll.selection=n,i.cache.scroll.domain=s;var h=r.chart.phase;if((a.sourceEvent||h)&&(i.scrolling_=!0),!(i.zooming||i.scrolling&&!i.scrollEnd)){if(i.scrollEnd&&(i.scrollEnd=!1),i.scroll.scrollDomain=s,i.disableAnimation=!!a.sourceEvent,i.scrolling=!0,ua(s)){if(u){s=[s[0],s[s.length-1]];var f=Bp(i,s,"x",0,n);u.instance.zoomToIdentity(f,0)}else!0===r.settings.smooth?function(t,e,n,a,r){var o=Bp(a,t.x.domain,"x",0,e),i=tc(a,"x",0),l=i.scale,s=i.orient,c=i.reversed,u=Pv({scale:l,baseScale:n.brushScale,orient:s,reversed:c},a.axes.rotated?"y":"x",o,r),d=u.range,h=u.domain;n.transform=o,t.x.range=d,t.x.domain=h,zv.FILTER_CHART(t,a)}(l,n,r,i,d):zv.FILTER_CHART(l,r.chart);c&&c.instance.updateExtent([[0,0],[i.plotarea.width,i.plotarea.height]])}r.tooltip&&a.sourceEvent&&r.tooltip.show(),clearTimeout(r.timer),r.timer=setTimeout((function(){return i.scrolling=!1,i.disableAnimation=!1}),50)}}var gT=wn.getComponent("BrushD3"),vT=wn.getComponent("BrushD3Options"),mT=function(){function t(e,n){_classCallCheck(this,t),this.chart=e,this.rotated=this.chart.axes.rotated,this.settings=e.systemConf.chart.scroll,this.type=n}return _createClass(t,[{key:"initialize",value:function(){var t=this,e=t.chart,n=t.settings,a=t.rotated?"left":"bottom",r=!0===fa(e.systemConf,"chart.zoom.enabled"),o=r||n.smooth,i=t.brushScale=t.getScale(e,e.plotarea,t.type,a,!o),l={scrollType:this.type,scrollScale:i,chartObj:e};n.height=$n(n.height,n,e);var s=ua(n.selectionRange)?n.selectionRange.slice().sort(B):$n(n.selectionRange,l)||null,c=n.resizer||{},u=n.slider||{},d=!0===c.enabled,h=i.domain();!d&&u.enabled&&(d=!0,c=u,t.behaviour="slider"),t.updatePositionScale(),t.minimumVisiblePoints=wa(n.minimumVisiblePoints,3),t.resizerSettings=c,t.resizerEnabled=d,t.overviewEnabled=!0===fa(n,"overview.enabled"),t.isSmooth=o,r||t.fixScaleOuterPadding();var f=e.plotarea[t.rotated?"height":"width"],p=t.getInitialDomain(),g=s||t.getScrollSelection(p),v=Ze(g[1]-g[0]),m=e.systemConf.chart.brush.enabled,y=t.resizerEnabled||r||f-v>=1||m;(t.visible=y)&&(t.initialSelection=g,t.scrollDomain=p,t.isSmooth||t.resizerEnabled||(t.visiblePointCount=p.length),t.isSmooth||(e.viewPortExtent=d?h:p),t.updatePlotAreaByScroll())}},{key:"fixScaleOuterPadding",value:function(){var t=this,e=t.brushScale;if(!e.bandwidth){var n=sr(t.getInitialDomain()),a=t.chart.chartTypes[0].name,r=t.chart.systemConf.chart.plot.plotoptions[a],o=na(r.outerPadding)?r.outerPadding:.02,i=(n[1]-n[0])*o,l=t.brushScale.domain();l=function(t,e,n){var a=t[0]instanceof Date;if(a&&(t=t.map((function(t){return t.getTime()}))),ua(n))t=[t[0]-n[0],t[1]+n[1]];else{var r=Ze(t[1]-t[0])*e;t=[t[0]-r,t[1]+r]}return a&&(t=t.map((function(t){return new Date(t)}))),t}(l,null,[i,i]),e.domain(l),e.originalDomain=l}}},{key:"updatePositionScale",value:function(){var t,e=this.chart,n=e.systemConf.chart.scroll.orient;t="right"===n||"left"===n?[e.plotarea.height,0]:[0,e.plotarea.width],n||(t=e.axes.rotated?[e.plotarea.height,0]:[0,e.plotarea.width]),this.scrollPositionScale=m().range(t).domain([0,100])}},{key:"update",value:function(){if("redraw"===this.chart.phase)return this.settings=this.chart.systemConf.chart.scroll,void(this.rotated=this.chart.axes.rotated);if(this.visible){var t=this,e=t.chart,n=e.axes.x.scale,a=e.axes.x.baseScale.domain();t.updatePositionScale(),e.cache.scroll.selection=null,n.bandwidth&&(e.viewPortExtent=null),t.scrollDomain=e.cache.scroll.domain?e.cache.scroll.domain:t.scrollDomain,t.render(),e.racing||(t.brushScale.originalDomain=a,n.originalDomain=a)}}},{key:"render",value:function(){var t=this,e=t.chart,n=t.settings,a=t.rotated,r=n.overview||{};if(t.parent=wc("g",".brush-scroll",t.visible?[1]:[],e.staticPaneSVG,"g.legendarea"),!t.parent.empty()){var o="bottom"===this.settings.orient||"top"===this.settings.orient,i="right"===this.settings.orient||"left"===this.settings.orient;this.settings.orient?t.brushType=Av("x",a&&!o||!a&&i):t.brushType=Av("x",a),t.brushExtent=Xp(e,n),t.position=t.getPosition();var l=t.position;t.dimension=function(t,e){var n=e.settings,a=t.axes.rotated,r=t.plotarea;if(e.settings.orient)var o="left"===e.settings.orient||"right"===e.settings.orient?n.height:r.width,i="left"===e.settings.orient||"right"===e.settings.orient?r.height:n.height;else o=a?n.height:r.width,i=a?r.height:n.height;return{width:o,height:i,left:e.position.x,top:e.position.y}}(e,t),t.parent.attr("transform","translate(".concat(l.x,",").concat(l.y,")")),t.initialized=!1,r.enabled?function(t,e,n){Yp.apply(this,arguments)}(e,t.dimension,(function(e){Gp.call(t,e)})):t.addEvent(t.brushExtent),t.isRedraw=!0}}},{key:"getScrollSelection",value:function(t){var e,n=this,a=n.chart,r=a.behaviouralEvents&&a.behaviouralEvents.eventManager.behaviours||{},o=n.transform||r.PLOT_ZOOM&&r.PLOT_ZOOM.instance.getTransform();if((e=n.lastScroll?n.lastScroll.map(n.scrollPositionScale):oy(a,t,o)).sort(B),!n.isRedraw&&!n.overviewEnabled&&!n.resizerEnabled){var i=a.systemConf.chart.axes.xaxis.reversed,l=n.brushScale.bandwidth?n.brushScale.origRange[0]:n.brushScale(n.brushScale.originalDomain[0]);n.rotated?i?e[0]=l:e[1]=l:i?e[1]=l:e[0]=l}return e}},{key:"addEvent",value:function(t,e){var n=this,a=n.chart,r=n.settings,o=n.resizerSettings,i=n.resizerEnabled,l=r.tracker,s=r.thumb,c=a.cache.scroll=a.cache.scroll||{},u=function(t){return t.radius&&(t.rx=t.ry=t.radius)},d=a.overview&&[a.overview.plotarea.left,a.overview.plotarea.top],h={scrollType:this.type,scrollScale:r.brushScale,chartObj:a},f=(ua(r.selectionRange)?r.selectionRange.slice().sort(B):$n(r.selectionRange,h)||null)||n.getScrollSelection(c.domain||e||n.scrollDomain);u(s),u(l);var p=new vT({type:n.brushType,behaviour:n.behaviour||"scroll",extent:t,resizer:i&&"rectangle"===o.type,styles:{track:l,selection:s,slider:r.slider},brushSelection:r.selectionDomain,brushScale:r.brushScale}),g=n.brushInstance=new gT(p);if(g.bindTo(n.parent),Oa(n._hooks,(function(t,e){return n.brushInstance.addHook(e,t)})),i){var v=o[o.type]||{};u(v);var m=Fp(n.brushType,o.type,t,null,v,d);g.addCustomHandle(m),n.enableTooltip(o)}return n.initialized=!0,n.constrain(g),g.setSelection(f),g}},{key:"enableTooltip",value:function(){var t=this,e=t.settings.resizer.tooltip||{};if(!0===e.enabled){var n=t.chart,a=n.dataset.getColumn("x"),r=a.datatype,o=a[r]||{},i=t.rotated?"right":"bottom";t.tooltip=new I_(e,t.brushInstance,i,(function(t){var i=[n.viewPortExtent[0],n.viewPortExtent[n.viewPortExtent.length-1]];if(a.datatype===Po&&"auto"===(fa(o,"tooltipformat.specifier")||fa(o,"format.specifier"))){var l=ii(Ze(i[1]-i[0]));o={subfunction:{YEAR:"DATE",MONTH:"DATE"}[l.subFunction]||"DATETIME"}}return na(e.content)?$n(n,i[t],a):Wo(o,i[t],r,n,"tooltip",Oe,"-")}),t.chart)}}},{key:"on",value:function(t,e){this._hooks=this._hooks||{},this._hooks[t]=e}},{key:"getScale",value:function(t,e,n,a,r){return t.axes.x.scrollScale=Wt.getScale(t,t.dataObject,e,a,0,t.dataset,n,null,r,!1)}},{key:"constrain",value:function(t){var e,n=this,a=n.chart,r=fT(a,"x",n.minimumVisiblePoints),o=a.scroll.overviewEnabled;t.addHook("start",(function(t){e=t.selection,l=i=null})),t.addHook("brush",(function(t){("resize"===t.mode||o&&"move"===t.mode)&&!n.isSmooth&&(n.visiblePointCount=null)})),t.addHook("end",(function(t){"resize"!==t.mode&&"move"!==t.mode||n.isSmooth||(n.visiblePointCount=n.scrollDomain.length)}));var i=null,l=null;t.snap("brush",(function(t){var n=t.selection;if("move"===t.mode)return n;l||(l=+n[0]!=+e[0]?"left":"right"),"left"===l?n[1]=Xe(e[1],n[1]):n[0]=Ge(e[0],n[0]);var a=li(Ze(n[1]-n[0]),2);return"left"===l&&i&&n[0]>=e[1]-r||"right"===l&&i&&n[1]<=e[0]+r?i:a<r?i="right"===l?[n[0],n[0]+r]:[n[1]-r,n[1]]:n}))}},{key:"getInitialDomain",value:function(){return this.getCategoryPosScreen()}},{key:"getInitialSelection",value:function(t){return Hp(this.chart,t,0,"x",!1,!0,this.brushScale)}},{key:"getCategoryPosScreen",value:function(){var t,e=this,n=e.chart,a=this.settings,r=n.plotarea,o=a.visibleCategories,i=n.chartTypes[0].name,l=("gantt"==i||"bullet"==i||"bar"==i)&&n.systemConf.chart.plot.plotoptions[i].padding||.2,s=n.systemConf.chart.plot.plotoptions[i].outerPadding||.02;if(e.resizerEnabled){var c=n.dataObject.getCategories("x",0,!1);return c=c&&c.length?c:n.dataObject.findXCategories(),e.isSingleDomain=1===c.length,e.brushScale.domain()}return o?(o=Ge(e.minimumVisiblePoints,a.visibleCategories),t=this.getCategoryPosByCount(r,l,s,o)):t=this.getCategoryPosByThickness(r,l,s,a.categoryThickness||15),t}},{key:"getActualScreenValue",value:function(t,e,n){return t.bandwidth?t.ordinalRange[e]:t(n)}},{key:"getScrollBarLength",value:function(t,e,n){var a=this.rotated;return ua(n)?n[1]-n[0]:t.bandwidth?a?t.range()[0]-e:e+t.bandwidth():a?t.range()[0]-e:e}},{key:"getCategoryPosByCount",value:function(t,e,n,a){var r,o=this,i=o.chart,l=o.chart.axes.x.scrollScale,s=(r=(r=i.dataObject.getCategories("x",0,!1))&&r.length?r:i.dataObject.findXCategories()).length,c=i.dataObject.isWaterfallEnabled,u=Xe(a,s),d=i.behaviouralEvents&&i.behaviouralEvents.eventManager.behaviours,h=i.systemConf.chart.brush;if(o.allCategoriesVisible=u>=s,c&&(r=l.domain()),o.allCategoriesVisible)return o.lastScroll=null,i.cache.scroll&&(i.cache.scroll.domain=null),l.bandwidth&&!o.isSmooth&&"redraw"===i.phase&&(i.viewPortExtent=r),o.brushScale.domain();if(o.chart.cache.scroll&&o.chart.cache.scroll.domain){var f=o.chart.cache.scroll.domain;if(l.bandwidth){if(d.PLOT_BRUSH&&ua(h.x))return f;if(f.length!==u)return o.lastScroll=null,i.cache.scroll.domain=null,function(t,e,n){var a=t.length-e;if(n>a){var r=Math.max(e-(n-a),0);return t.slice(r)}return t.slice(e,e+n)}(r,r.indexOf(f[0]),u)}return o.chart.cache.scroll.domain}var p=r.slice(0,u);return l.bandwidth?p:sr(p)}},{key:"getCategoryPosByThickness",value:function(t,e,n,a){var r=this.chart.axes.x.scrollScale,o=(this.rotated?t.height:t.width,function(t,e){return t/(1-e)}(a,e)),i=this.getVisibleNumCategories(this.chart,t,n,o);n=r&&r.bandwidth?Ch(r.range(),i,e,n,o):o*n*2;i=this.getVisibleNumCategories(this.chart,t,n,o);return this.getCategoryPosByCount(t,e,n,i)}},{key:"getVisibleNumCategories",value:function(t,e,n,a){return this.rotated?Ye((e.height-n)/a):Ye((e.width-n)/a)}},{key:"updatePlotAreaByScroll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.plotarea,e=this,n=e.settings,a=e.rotated,r=Up(e,Xp(e.chart,n)),o=n.height+r,i=t.left,l=t.top,s=$s(n,0),c=n.orient;na(n.x)&&na(n.y)?(i=$n(n.x,e,this.chart),l=$n(n.y,e,this.chart)):c?"left"===c?(t.width-=o+s.left+s.right,t.left+=o+s.left+s.right,i+=s.left):"bottom"===c?(t.height-=o+s.top+s.bottom,t.bottom+=o+s.top+s.bottom,l+=t.height,l+=s.top):"right"===c?(t.width-=o+s.left+s.right,i+=t.width,i+=s.left):"top"===c&&(t.height-=o+s.top+s.bottom,t.bottom+=o+s.top+s.bottom,t.top+=o+s.top+s.bottom,l+=s.top):a?(t.width-=o+s.left+s.right,i+=t.width,i+=s.left):(t.height-=o+s.top+s.bottom,t.bottom+=o+s.top+s.bottom,l+=t.height,l+=s.top),l=n.thumb.strokeColor?l-1:l,e._position={x:i,y:l}}},{key:"getPosition",value:function(){var t=this.chart.plotarea,e="bottom"===this.settings.orient||"top"===this.settings.orient,n="right"===this.settings.orient||"left"===this.settings.orient;return na(this.settings.x)&&na(this.settings.y)?{x:this._position.x,y:this._position.y}:this.settings.orient?this.chart.axes.rotated&&!e||!this.chart.axes.rotated&&n?{x:this._position.x,y:t.top}:{x:t.left,y:this._position.y}:this.chart.axes.rotated?{x:this._position.x,y:t.top}:{x:t.left,y:this._position.y}}},{key:"destroy",value:function(){this.chart.overview&&this.chart.overview.destroy(),this.brushInstance&&this.brushInstance.destroy(),this.parent.remove()}}]),t}();function yT(t,e){var n=this,a=this.chart.eventHandler,r=a.oldBrushComponent,o=a.activeBrushComponent;null===r&&null===o||(a.oldBrushComponent=o,a.activeBrushComponent="scroll");var i=e.selection,l=n.getData(t,e.type,i);n.chart.cache.scroll.selection;n.associateBehaviours(t,e.type,l,e.selection,e)}function bT(t,e,n){var a=this,r=t.instance,o=a.chart.overview||a.chart,i=o.dataset.getDataType("x",0),l=o.axes.rotated,s=(o.axes.x.reversed,function(t,e,n,a){if(t=t.slice(0),e[0]>e[1]){var r=_slicedToArray(e,2),o=r[0];e=[r[1],o]}e=e.slice(0).sort(B);Xe(t[0]-e[0],0),Ge(t[1]-e[1],0);return t}(n,t.instance.brushScale.range())),c=Ov(s,r.brushScale,"x",i,l,o.axes.x.reversed,a.chart);if(r.actualScrollSelection=c.slice(0),!c.length){var u=jv(s,o.axes.x.scale,"x",i,l,o.axes.x.reversed,a.chart);a.chart.emptySelectionDomain=u||a.chart.emptySelectionDomain}na(r.visiblePointCount)&&c.length>r.visiblePointCount&&(c.length=r.visiblePointCount);var d=a.chart.systemConf.chart.axes.xaxis,h=d.minRange,f=d.maxRange,p=function(t){return c[0]instanceof Date?new Date(t):t};(na(f)||na(h))&&(a.chart.scrollView=c.slice(0));var g=c[1]>c[0]?{max:1,min:0}:{max:0,min:0};return na(f)&&(c[g.max]=p(f)),na(h)&&(c[g.min]=p(h)),{x:{domain:c,index:0,dataType:i}}}wn.setComponent("ChartBrushScroll",mT),Tr.scroll=function(){return{x:null,y:null,orient:null,enabled:!0,categoryThickness:null,visibleCategories:null,height:10,thumb:{fillColor:"#b3b6b7",fillOpacity:.3,strokeColor:"black",strokeOpacity:.3,cursor:fn},resizer:{enabled:!1,type:"lever",tooltip:{backgroundColor:"#b3b6b7",borderColor:"rgb(51, 51, 51)",fontSize:14}},tracker:{fillColor:"#ECF0F1",cursor:fn},overview:{show:!0,renderMode:"canvas"}}};var xT={LISTENER:{start:yT,brush:yT,end:yT},DATA_FINDER:{start:bT,brush:bT,end:bT},BEHAVIOUR:{brush:pT,end:[function(t,e,n,a){var r=t.instance.chart;r.scrolling=!1,r.scrolling_&&(r.scrolling_=!1,r.scrollEnd=!0,pT.call(this,t,e,n,a)),t.instance.tooltip&&t.instance.tooltip.hide(),"scroll"===r.eventHandler.oldBrushComponent&&"scroll"===r.eventHandler.oldBrushComponent&&(r.eventHandler.oldBrushComponent="",r.eventHandler.activeBrushComponent="")},ty]},LISTENER_TYPES:M(["start","brush","end"]),SUPPORTED:function(t){return t.isAxisCategory&&!t.isPolarAxisCategory}};wn.setComponent("_chartScrollHandlers",xT),(Ht.threshold=function(t,e){var n={},a=t.systemConf,r=a.chart.axes.xaxis,o=Gn(t.userdata,"chart.axes.xaxis")?t.userdata.chart.axes.xaxis:{};null!=o.threshold&&null!=o.threshold.line&&c(t.axes.x,r.threshold.line,0,e,"x","line",o.threshold.line),null!=o.threshold&&null!=o.threshold.range&&c(t.axes.x,r.threshold.range,0,e,"x","range",o.threshold.range);for(var i=a.chart.axes.yaxis,l=Gn(t.userdata,"chart.axes.yaxis")?t.userdata.chart.axes.yaxis:{},s=0;s<t.axes.y.count;s++)null!=l&&null!=l[s]&&null!=l[s].threshold&&null!=l[s].threshold.line&&c(tc(t,"y",s),i[s].threshold.line,s,e,"y","line",l[s].threshold.line),null!=l&&null!=l[s]&&null!=l[s].threshold&&null!=l[s].threshold.range&&c(tc(t,"y",s),i[s].threshold.range,s,e,"y","range",l[s].threshold.range);function c(e,a,r,o,i,l,s){var c=(s&&s.underlay?t.svg:t.staticPaneSVG).selectAll("g.threshold"),u=t.svg.selectAll("g.".concat(i,"-axis-").concat(r)),d=null==u||u.empty()||"none"===u.style("display")?"hidden":"visible",h=dc(c,"g",s.show&&"visible"==d?[a]:[],".","class","threshold".concat(l,"-").concat(i,"-axis-").concat(r));if(null!=e&&a.show){var f=o&&null!=e.threshold&&null!=e.threshold[l]?e.threshold[l]:function(t,e,n,a){return t?(t.threshold||(t.threshold={}),t.threshold[a]=e.show?"line"==a?Ht.threshold.line():Ht.threshold.range():null,t.threshold[a]):null}(e,a,0,l);f=function(e,a,r,o,i,l){var s;return n.axisObj=function(t){return arguments.length?(a=t,n):a},n.thresholdIndex=function(t){return arguments.length?(r=t,n):r},n.type=function(t){return arguments.length?(o=t,n):o},n.values=function(t){return arguments.length?(s=t,n):s},n.chartObj=function(e){return arguments.length?(t=e,n):t},n.thresholdIndex(r).type(o).values(l.values).chartObj(t),"line"==i&&n.axisObj(a),e.parentObj(n),e}(f,e,r,i,l,s),h.call(f)}}}).textAlign=function(t,e,n,a,r,o){var i;return r=r||0,"left"==t?i=a?"x"==e?r:n.height-r:"left"==o||"bottom"==o?"x"==e?n.height-r:r:"x"==e?r:n.width-r:"center"==t?i=a?"left"===o||"bottom"===o?"x"==e?(n.width+r)/2:(n.height-r)/2:"x"==e?(n.width-r)/2:(n.height+r)/2:"left"==o||"bottom"==o?"x"==e?(n.height-r)/2:(n.width+r)/2:"x"==e?(n.height+r)/2:(n.width-r)/2:"right"==t&&(i=a?"x"==e?n.width:0:"left"==o||"bottom"==o?"x"==e?0:n.width:"x"==e?n.height:0),i},Ht.threshold.overlay=function(t,e,n,a){var r=t.axes.rotated;if("discrete"==e){var o=a.values.slice(0),i=a.overlayRange||"below",l=a.defaultColor,s=tc(t,n,0).scale,c=s.domain(),u=s.bandwidth;u&&(o=o.map((function(t,e){return c.indexOf(t)})));var d=E([o]);return"below"==i||"equalandbelow"==i?o.sort(B):"equal"!==i&&o.sort(H),function(t,e,n,r){var s=t.color,h=u?c.indexOf(n):n;if(null==a.values||0==a.length)return r;for(var f=0;f<o.length;f++){var p,g=o[f];switch(i){case"equal":p=h===g;break;case"equalandbelow":p=h<=g;break;case"equalandabove":p=h>=g;break;case"below":p=h<g;break;default:p=h>g}if(p){var v=d.indexOf(g);return null==s||null==s[v]?l?r:"black":s[v]}}return r}}if("continous"==e)return function(e,n,a,o){var i=tc(t,o,0).scale,l=a,s=n.values;if(null==s||0==s.length)return e;var c=s.slice(),u=n.color,d=n.overlayRange||"below",h=n.defaultColor;d&&(d=d.replace("equaland",""));var f,p=t.dataset.getDataType(o,a);if("time"==p){var g=t.dataset.getColumn(o,a);f=null!=g.time?g.time:null}c=c.map((function(t,e){return"time"==p?Go(t,0,f).getTime():t})),"x"==o&&!r||"y"==o&&r?c.sort((function(t,e){return t<e?-1:t>e?1:0})):c.sort((function(t,e){return t>e?-1:t<e?1:0}));var v=i.domain().length,m="x"==o&&!r||"y"==o&&r?i(i.domain()[v-1])-i(i.domain()[0]):i(i.domain()[0])-i(i.domain()[v-1]),y=[];y.push(0);for(var b=0;b<c.length;b++){var x=(i(c[b])+(null!=i.bandwidth?i.bandwidth()/2:0))/m*100;x<100&&(y.push(x),y.push(x))}y.push(100);var C=[];("y"==o&&"below"==d&&!r||"x"==o&&"above"==d&&!r||"y"==o&&"above"==d&&r||"x"==o&&"below"==d&&r)&&C.push(e);for(b=0;b<c.length;b++){var k=s.indexOf(c[b]);C.push(null==u||null==u[k]?h?e:"black":u[k])}("y"==o&&"above"==d&&!r||"x"==o&&"below"==d&&!r||"y"==o&&"below"==d&&r||"x"==o&&"above"==d&&r)&&C.push(e);var w=[];for(b=0;b<y.length;b++){var _={};_.offset="".concat(y[b],"%"),_.color=b%2==0?C[b/2]:C[(b-1)/2],w.push(_)}var S={type:"thresholdLinear",options:{}},O=S.options,A=tc(t,"x",a),T=tc(t,"y",a),P=r?T.scale:A.scale,E=r?A.scale:T.scale,L="x"==o&&!r||"y"==o&&r;O.x1=L?P(P.domain()[0]):0,O.x2=L?P(P.domain()[v-1]):0,O.y1=L?0:E(E.domain()[v-1]),O.y2=L?0:E(E.domain()[0]),O.values=c,O.color=C,O.seriesclr=e,O.overlayRange=d;var M=(L?P:E).domain();O.scale="".concat(M[0],"_").concat(M[1]);var D=t.plot.renderer.mode,I=t.chartTypes[l].name,R=t.systemConf.chart.plot.plotoptions[I],z="line"===I?R.strokeOpacity:R.fillOpacity,j=[O.x1,O.x2,O.y1,O.y2],F=Nr(S,j,C,z),B={chartObj:t,offset:w,dimension:j,color:C},H="svg"==D?Hr.get(Hr.svg_gradients,"svgGradientFill",F,B):Hr.get(Hr.canvas_gradients,"canvasGradientFill",F,B);return"svg"==D?"url(".concat(t.defsLocation,"#").concat(H,")"):H}};Ht.threshold.overlay;Ht.threshold.line=function(){var t,e,n,a,r,o,i,s,c;function u(d){d.each((function(d){var h=l(this);u.update=function(){h.transition().call(u)},a=i.chartObj(),t=i.thresholdIndex(),o=i.type(),s=i.axisObj(),c=i.values(),e=a.plotarea;var f=s.scale,p=f.range();(p=p.slice(0,p.length)).sort((function(t,e){return t-e}));var g=null!=f.bandwidth?f.bandwidth()/2:0,v=d.label;v=yd(v,Gn(a.userdata,"chart.axes.".concat(o,"axis").concat("x"===o?"":".".concat(t),".threshold.line.label"),!0));var m=d.marker||{},y=wa(m.enabled,!0);r=a.axes.rotated,n=a.systemConf;var b=[],x=[],C=[],k={x:2,y:2},w=n.chart.axes.xaxis.axisline,_=n.chart.axes.yaxis[t].axisline,S=a.filterEffectsID;na(w)&&w.show&&(k.x+=+w.strokeWidth-1),na(_)&&_.show&&(k.y+=+_.strokeWidth-1);var O,A=0,T=[],P=[],E=[],L=[],M=[],D=[],I=[],R=[],z=a.dataset.getDataType(o,t),j=!1!==fa(d.events,"enabled"),F=a.dataset.getColumn(o,t),B=a.dataset.getColumnIdx(o,t);z==Po&&(O=fa(F,Po)||null);var H,N,W,V,Y=a.dataObject.hierarchical;if(Y){var U=Y.pivotLayout.getRootNodeList("row"),G=Y.pivotLayout.getRootNodeList("column");N=U.getCount(),W=G.getCount(),H=U.hasMultiCluster()}!H||N||W||(V="".concat(t,"_",0)),c.map((function(t,e){var n=null!=t&&""!=t?z==Po?Go(t,0,O).getTime():t:null;null!=t&&""!==t&&f(n)+g>=p[0]&&f(n)+g<=p[p.length-1]&&(b[A]=n,x[A]=Lx(fa(d,"label.text[".concat(e,"]"))||"",c,F,a),C[A]=(ua(d.color)?d.color[e]:d.color)||"black",T[A]=na(d.label)&&(ua(d.label.hAlign)?d.label.hAlign[e]:d.label.hAlign)||"center",E[A]=(ua(d.strokeWidth)?d.strokeWidth[e]:d.strokeWidth)||1,P[A]=ua(d.dashStyle)?d.dashStyle[e]:d.dashStyle,L[A]=na(d.marker)&&d.marker.enabled?(ua(d.marker.strokeWidth)?d.marker.strokeWidth[e]:d.marker.strokeWidth)||2:null,D[A]=d.marker&&d.marker.enabled?(ua(d.marker.size)?d.marker.size[e]:d.marker.size)||1:null,A++)}));var X=a.container.node().getBoundingClientRect(),Z={left:X.left+e.left,top:X.top+e.top,width:e.width,height:e.height,right:X.left+e.left+e.width,bottom:X.top+e.top+e.height},q=Z.left,$=Z.top,Q=s.component.orient(),K={top:0,left:0,right:0,bottom:0},J="threshold".concat(o).concat(t),tt=a.cache.thresholdCustomPoints=wa(a.cache.thresholdCustomPoints,{}),et=tt[J]=wa(tt[J],[]),nt=wa(function(t,e){return wa(fa(t,"events.triggerOffset"),jl(e,e.chartTypes[0].value))}(d,a),10);et.superKey="threshold",et.triggerOffset=nt,et.grid=V,h.attr("transform","translate(".concat(e.left,",").concat(e.top,")"));var at=dc(h,"g",[d],".","class","thresline-".concat(t)),rt=a.staticPaneSVG.selectAll("g.plotareaBorder-property").node(),ot=rt.border||rt["border-".concat(Q)],it=rt.border||rt["border-".concat(qs(Q))],lt=ot&&ot.clr!==hn?ot.size:0,st=it&&it.clr!==hn?it.size:0,ct=lt+st,ut=dc(at,"path",null!=m&&y?b:[],".","class","marker");ut.attr("d",(function(t,e){return np(ua(m.symbol)?m.symbol[e]:m.symbol)(10*D[e])})).style("stroke-width",(function(t,e){return L[e]||2})).style("stroke",(function(t,e){return(ua(m.strokeColor)?m.strokeColor[e]:m.strokeColor)||C[e]})).attr("fill",(function(t,e){var n=ua(m.fillColor)?m.fillColor[e]:m.fillColor;return n||(null===n?C[e]:"white")})),ut.attr("transform",(function(n,r){var i=L[r]/2,l=Bn(this);M[r]=l.width+lt;var s="bottom"==Q||"top"==Q?f(n)+g:"left"==Q?i+lt+l.width/2:e.width-(i+lt+l.width/2),u="bottom"==Q?e.height-l.width/2-lt-i:"top"==Q?i+l.height/2+lt:f(n)+g;if(j&&Vt.customPoints){et.push({_data:function(t,e){return function(){var n=t.cache.thresholdCustomPoints[J][e];return{_x:n&&n._x,_y:n&&n._y,_size:n&&n._size,_visible:!0}}}(a,r),_x:s,_y:u,_key:"threshold_".concat(a.id,"_").concat(o,"_").concat(t,"_").concat(r),width:M[r],height:M[r],color:C[r],text:x[r],type:"threshold-marker",triggerOffset:nt,_size:10*(D[r]||L[r])+L[r]/2,_mSize:D[r],marker:m,point:c[r],formattedValue:Wo(F[F.datatype],c[r],F.datatype,a,"threshold",!1),thresholdType:o,columnIndex:B,columnInfo:F,yColumnIndex:t,itemIndex:r,events:d.events||{},disabled:function(){return h.__data__!=pn||!a.cache.thresholdCustomPoints[J]},_defaultH:function(){return[{shape:"marker",path:function(){return a.eventHandler.CustomPoints.hoverPoint(this)},context:function(){return Jg.get("scatter").call(this,a)}}]}})}return"translate(".concat(s,",").concat(u,")")})),dc(at,"line",b).attr("x1",(function(t,e){return"bottom"==Q||"top"==Q?f(t)+g:"left"==Q?(M[e]||0)+L[e]:st})).attr("y1",(function(t,e){return"bottom"==Q?lt:"top"==Q?(M[e]||0)+L[e]:f(t)+g})).attr("x2",(function(t,n){var a="bottom"==Q||"top"==Q?f(t)+g:"left"==Q?e.width-st:e.width-L[n]-(M[n]||0);return S?a+1:a})).attr("y2",(function(t,n){var a="bottom"==Q?e.height-L[n]-(M[n]||0):"top"==Q?e.height-st:f(t)+g;return S?a+1:a})).attr("stroke",(function(t,e){return"    ".concat(C[e])})).attr("stroke-width",(function(t,e){return"".concat(E[e],"px")})).attr("shaperendering","crispedges").attr("stroke-dasharray",(function(t,e){return Gr(P[e],E[e])})),dc(at,"text",null!=v?b:[]).text((function(t,e){return Nn(x[e])})).attr("x",(function(t,n){var a=10*D[n]+k[o]+(L[n]||2);return"x"==o&&!r||"y"==o&&r?-Ht.threshold.textAlign(T[n]||"right",o,e,r,a,Q):Ht.threshold.textAlign(T[n]||"right",o,e,r,a,Q)})).attr("y",(function(t,e){return f(t)+g-5})).attr("transform","x"==o&&!r||"y"==o&&r?"rotate(-90)":"rotate(0)").styles({"font-family":function(t,e){return R[e]=(ua(v.fontFamily)?v.fontFamily[e]:v.fontFamily)||n.chart.fontFamily||n.canvas.fontFamily||wr.fontFamily,R[e]},"font-size":function(t,e){return I[e]=Dn.getVal((hr(v.fontSize)||ua(v.fontSize)?v.fontSize[e]:v.fontSize)||n.chart.fontSize||n.canvas.fontSize),"".concat(I[e],"px")},fill:function(t,e){return(ua(v.fontColor)?v.fontColor[e]:v.fontColor)||n.chart.fontColor||n.canvas.fontColor||wr.fontColor},"font-weight":function(t,e){return(ua(v.fontWeight)?v.fontWeight[e]:v.fontWeight)||n.chart.fontWeight||n.canvas.fontWeight||wr.fontWeight},"font-style":function(t,e){return(ua(v.fontStyle)?v.fontStyle[e]:v.fontStyle)||n.chart.fontStyle||n.canvas.fontStyle||wr.fontStyle},"text-Anchor":function(t,e){return"left"==Q||"bottom"==Q?"center"==T[e]?"middle":"right"==T[e]?"end":"start":"center"==T[e]?"middle":"right"==T[e]?"start":"end"}}).each((function(t,n){var a,r=Nn(x[n]),o=10*D[n],i=Dn.fontUtils.getTextWidth(r,I[n],R[n])+o,l="top"===Q||"bottom"===Q?e.height:e.width;i>l&&(a=Xe(i-l,o)+ct,Z.left=q+a,Z.top=$+a,hc(this,this.textContent,this.getBoundingClientRect(),Z,md(Q),"..",K))}))}))}return u.parentObj=function(t){return arguments.length?(i=t,u):i},u.getMetaInfo=function(t){return{itemIndex:t.itemIndex,point:t.point,data:Rn(a.systemConf.metadata.columns[t.columnIndex],{columnindex:t.columnIndex})}},u};Ht.threshold.line;Ht.threshold.range=function(){var t,e,n,a;function r(r){r.each((function(r){var o=l(this);e=a.chartObj(),t=a.thresholdIndex(),n=a.type();var i=e.systemConf,s=r.label;s=yd(s,Gn(e.userdata,"chart.axes.".concat(n,"axis").concat("x"===n?"":".".concat(t),".threshold.range.label"),!0));var c=[],u=[],d=[],h=[],f=[],p=[],g=[],v=[],m=[],y=[],b=[],x=[],C=e.container.node().getBoundingClientRect(),k=e.plotarea,w={left:C.left+k.left,top:C.top+k.top,width:k.width,height:k.height,right:C.left+k.left+k.width,bottom:C.top+k.top+k.height},_=e.axes[n].orient,S=a.axisObj().component.orient(),O={top:0,left:0,right:0,bottom:0},A=dc(o,"g",r.show?[r]:[],".","class","thresholdrangegroup-".concat(n)),T=e.axes.rotated;if(r.show){var P,E=e.dataset.getDataType(n,t),L=e.dataset.getColumn(n,t);E==Po&&(P=null!=L.time?L.time:null);var M=[],D=[],I={x:2,y:2},R=i.chart.axes.xaxis.axisline,z=i.chart.axes.yaxis[t].axisline;na(R)&&R.show&&(I.x+=+R.strokeWidth-1),na(z)&&z.show&&(I.y+=+z.strokeWidth-1);var j=tc(e,"x",t),F=tc(e,"y",t),B=T?F.scale:j.scale,H=T?j.scale:F.scale,N=e.dataObject.noofBarEnabledSeries,W=null!=B.bandwidth&&N?B.bandwidth():0,V=null!=H.bandwidth&&N?H.bandwidth():0,Y=null==B.bandwidth||N?0:B.bandwidth()/2,U=null==H.bandwidth||N?0:H.bandwidth()/2,G=0,X=("x"==n&&!T||"y"==n&&T?B:H).domain(),Z=X.length-1;r.values.map((function(t,n){D=null!=t&&""!=t?t.map((function(t){return E==Po?Go(t,0,P).getTime():t})):null;var a=E==To?-1!==X.indexOf(D[0])&&-1!==X.indexOf(D[1]):!(D[0]>X[Z]||D[1]<X[0]);D&&a&&(E!==To&&(D[0]=Ge(D[0],X[0]),D[1]=Xe(D[1],X[Z])),M[G]=D,c[G]=(ua(r.fillColor)?r.fillColor[n]:r.fillColor)||"grey",u[G]=Jn(ua(r.fillOpacity)?r.fillOpacity[n]:r.fillOpacity,"0.2"),d[G]=(ua(r.strokeColor)?r.strokeColor[n]:r.strokeColor)||"black",h[G]=ua(r.dashStyle)?r.dashStyle[n]:r.dashStyle,f[G]=ua(r.lineCap)?r.lineCap[n]:r.lineCap,p[G]=(ua(r.label.hAlign)?r.label.hAlign[n]:r.label.hAlign)||"center",g[G]=Lx(fa(r,"label.text[".concat(n,"]"))||"",r.values,L,e),v[G]=ua(s.fontColor)?s.fontColor[n]:s.fontColor,x[G]=ua(s.fontStyle)?s.fontStyle[n]:s.fontStyle,y[G]=ua(s.fontFamily)?s.fontFamily[n]:s.fontFamily,b[G]=ua(s.fontWeight)?s.fontWeight[n]:s.fontWeight,m[G]=s.fontSize instanceof Function||ua(s.fontSize)?s.fontSize[n]:s.fontSize,G++)}));var q=dc(A,"g",M,".","class","rangebox-".concat(t));q.append("rect"),q.append("text");var $=q.select("rect"),Q=q.select("text");$.attrs({x:function(t,a){return"x"==n&&!T||"y"==n&&T?B(t[0])+Y+e.plotarea.left:e.plotarea.left+I[n]},y:function(t,a){return"x"==n&&!T||"y"==n&&T?e.plotarea.top:H(t[1])+U+e.plotarea.top},width:function(t,a){return"x"==n&&!T||"y"==n&&T?B(t[1])-B(t[0])+W:e.plotarea.width-I[n]},height:function(t,a){return"x"==n&&!T||"y"==n&&T?e.plotarea.height-I[n]:H(t[0])-H(t[1])+V}}).styles({fill:function(t,e){return c[e]},"fill-opacity":function(t,e){return u[e]},stroke:function(t,e){return d[e]},"stroke-dasharray":function(t,e){return Gr(h[e])},"stroke-linecap":function(t,e){return Xr(f[e],h[e])}}),Q.attrs({transform:function(t,a){var r=Bn($.nodes()[a]),o=Ht.threshold.textAlign(p[a],n,e.plotarea,T,I[n],_);return"x"==n&&!T||"y"==n&&T?"translate(".concat(r.x+r.width/2,",").concat(o+e.plotarea.top,") rotate(-90)"):"translate(".concat(o+e.plotarea.left,",").concat(r.y+r.height/2,")")},dy:"0.3em"}).styles({"font-family":function(t,e){return y[e]||i.chart.fontFamily||i.canvas.fontFamily||wr.fontFamily},"font-size":function(t,e){return"".concat(Dn.getVal(m[e]||i.chart.fontSize||i.canvas.fontSize),"px")},fill:function(t,e){return v[e]||i.chart.fontColor||i.canvas.fontColor||wr.fontColor},"font-weight":function(t,e){return b[e]||i.chart.fontWeight||i.canvas.fontWeight||wr.fontWeight},"font-style":function(t,e){return x[e]||i.chart.fontStyle||i.canvas.fontStyle||wr.fontStyle},"text-Anchor":function(t,e){return"center"==p[e]?"middle":"right"==p[e]?"end":"start"}}).text((function(t,e){return Nn(g[e])})).each((function(){hc(this,this.textContent,this.getBoundingClientRect(),w,md(S),"..",O)}))}}))}return r.parentObj=function(t){return arguments.length?(a=t,r):a},r};Ht.threshold.range;var CT={relative:function(t,e,n,a,r,o,i,l,s,c){e.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":s+un,"max-height":c+un});var u=e.node(),d=u.offsetWidth,h=u.offsetHeight,f=n.canvasarea,p=n.chartarea,g=r+a+(t.distance||0),v=t.dTop||0,m=t.dLeft||0,y=n.systemConf.tooltip,b=(y.relative||{}).orient,x=(y.borderTop,p.width-p.left+p.right),C=p.height,k=yl.getSize(y,[x,C],[d,h],[s,c]),w=k.w,_=k.h,S={left:50,top:100,rotation:0},O={left:Ze(Xe(m,0))+(n.scrolledX||0),top:Ze(Xe(v,0))+(n.scrolledY||0),right:f.width-2-Ge(m,0)+Ze(Xe(m,0)),bottom:f.height-Ge(v,0)+Ze(Xe(v,0))},A={x:t.left-w/2,y:t.top-_-g,maxw:s+un,maxh:c+un};if(o&&!n.scrolledX&&!n.scrolledY){var T=t.top-_-g,P=t.left+w+g,E=t.left-w-g,L=t.top+_+g;(b=b||(T>O.top?Jr:P<O.right?Qr:E>O.left?$r:L<O.bottom?Kr:null))==Jr?(M(Jr),S.rotation=0,S.top=100):b==Qr?(A.x=t.left+g,M(Qr),S.rotation=90,S.left=0):b==$r?(A.x=t.left-g-w,M($r),S.rotation=-90,S.left=100):b==Kr&&(M(Kr),A.y=t.top+g,S.rotation=180,S.top=0)}return A.hookPosition=S,A;function M(e){var n;/(top|bottom)/.test(e)?t.left-w/2<O.left?(n=D(e==Jr?"blx":"tlx"),A.x=O.left,S.left=Ge(n,t.left-O.left)/w*100):t.left+w/2>O.right?(n=D(e==Jr?"brx":"trx"),A.x=O.right-w,S.left=100*(1-Ge(n,O.right-t.left)/w)):S.left=50:t.top-_/2<O.top?(n=D(e==$r?"trY":"tly"),A.y=O.top,S.top=Ge(n,t.top-O.top)/_*100):t.top+_/2>O.bottom?(n=D(e==$r?"bry":"bly"),A.y=O.bottom-_,S.top=100*(1-Ge(n,O.bottom-t.top)/_)):(A.y=t.top-_/2,S.top=50)}function D(t){return a+l[t]+$e(qe(i,2)+qe(i,2))}},fixed:function(t,e,n){e.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":null,"max-height":null}),e.style("border-width",0);var a,r=e.node(),o=r.offsetWidth,i=r.offsetHeight,l=n.canvasarea,s=t.dTop||0,c=t.dLeft||0,u=n.systemConf.tooltip,d=(u.fixed||{}).orient,h=u.borderTop||0,f=wa(u.borderWidth,1),p=Da(f),g=p.top,v=p.right,m=p.bottom,y=p.left,b=l.width-y-v,x=l.height-g-m,C=yl.getSize(u,[b,x],[o,i]),k=C.w,w=C.h,_=0,S=0,O=window.innerWidth,A=window.innerHeight,T={x:Ze(Xe(c,0)),y:Ze(Xe(s,0))},P=Ze(Xe(c,0)),E=Ze(Xe(s,0)),L=k,M=w,D=T.y-w,I=T.x+l.width+k,R=T.x-k,z=T.y+l.height+w,j=s<=0||s>0&&l.height-s>w;return d||(D>S?d=Jr:I<O&&j?d=Qr:R>_&&j?d=$r:z<A&&(d=Kr)),d===Jr?(T.y=E-w-g-m,L=b-(c>0?c:0),a="40%"):d===Qr?(T.x=P+l.width,M=x-(s>0?s:0)):d===$r?(T.x=P-k-v-y,M=x-(s>0?s:0)):d===Kr?(T.y=E+l.height-(s>0?s:0),L=b-(c>0?c:0),a="40%"):(T.y=E,L=b-(c>0?c:0),a="40%"),C=yl.getSize(u,[b,x],[L,M]),T.w=C.w+un,T.h=C.h-h+un,T.maxw=b-(c>0?c:0)+un,T.maxh=Xe(x-(s>0?s:0),Xn(u.height)&&Xn(u.maxHeight)&&na(a)?Xa(a,x):1/0)+un,e.style("border-width",ia(f)),T},block:function(t,e,n){var a=n.chartarea,r=n.plotarea,o=n.systemConf.tooltip,i=o.block||{},l=o.borderTop||0,s=Da(wa(o.borderWidth,1)),c=s.top,u=s.right,d=s.left,h=i.vAlign||Jr,f=i.hAlign,p=t.dTop||0,g=t.dLeft||0,v=a.width-d-u,m=a.height,y=yl.getSize(o,[v,m],["100%",n.tooltip.preCalculatedHeight]),b=y.w,x=Xe(y.h,Xa(Qv.MAXHEIGHT_BLOCK,m)),C={x:Ze(Xe(g,0))-Ge(g,0)+a.left,y:Ze(Xe(p,0))-Ge(p,0),w:b+un,h:x-l+un,align:f};return f===Qr?C.x+=v-b:f===qr&&(C.x+=(v-b)/2),C.y+=h===Kr?r.top+r.height+(r.bottom-Ge(a.bottom,0)-x)-c-u:a.top,C}},kT=Vt.tooltip=function(t,e,n){var a={element:t},r=n.systemConf,o=n.dataset,i=n.dataSplicer,l=i.getEncode(),s=i.getColumns(),c=l.tooltip||tt(s.length),u=r.tooltip,d=null,h=u.position||"relative",f=na(u.hook)?u.hook:"relative"===h,g={left:50,top:100,rotation:0};if(u.theme&&""!==u.theme){var v=Gn(window.$ZC,"tooltip.getTheme")&&$ZC.tooltip.getTheme(u.theme,n);null!==v&&(u=n.systemConf.tooltip=Rn(u,v.borderStyle,!0,!0),n.tooltip.content=[v.body],d=v.maxWidth)}var m,y,b,x,C,k,w=Jn(u.hookHeight,6),_=Jn(u.outerPadding,20),S=na(u.borderWidth)?u.borderWidth:1,O=na(u.borderRadius)?u.borderRadius:5,A=na(u.borderStyle)?u.borderStyle:"solid",T=na(u.padding)?"".concat(u.padding):"".concat(5),P=Jn(u.withinChart,!0),E=Jn(u.hookBorderWidth,/ /g.test(S)?1:+S),L=Ia(O),M=Xa(u.maxWidth||d||"40%",n.chartarea.width),D=Xa(u.maxHeight||"100%",n.chartarea.height),I=Ge(.05*n.chartarea.width,2*w),R=u.headerContent,z=u.footerContent,j=u.crosshair;function F(t,e,n,a,r){var o=t.staticPaneSVG.selectAll("line.".concat(r,"-crosshair")),i="x"==r&&!t.axes.rotated||"y"==r&&t.axes.rotated;o.attrs({x1:i?e:t.plotarea.left,y1:i?t.plotarea.top:n,x2:i?e:t.plotarea.left+t.plotarea.width,y2:i?t.plotarea.height+t.plotarea.top:n}).styles({"shape-rendering":"crispEdges",stroke:a.color,"stroke-width":a.strokeWidth,"stroke-dasharray":Gr(a.dashStyle,a.strokeWidth),"pointer-events":dn})}function B(t,e,a,i,l,u){if(Gn(window.$ZC,"tooltip.getTheme")&&na(r.tooltip.theme)&&""!==r.tooltip.theme&&na(n.tooltip.content))return o.getCustomizedVal(n,n.tooltip.content,t,e,a,l,"tooltip",i);var d,h=Ui(n,l&&l.paneid,t).name,f=Zi(h,n),p=o.getDataPoint(n,null,t,e,a,l),g=Fs(n,f?a:t,p,t),v=$n(u||c,null,p,n).filter((function(r){return!(s[r]&&Xn(o.getDataPoint(n,r,t,e,a,l)))}));if(h===ji&&"node"===l._type){var m=n.dataset.getColumnIdx(l._format||"x",0),y=n.dataset.getColumnIdx("z");d="{{col(".concat(m,")}} : {{val(").concat(m,")}}<br>{{col(").concat(y,")}} : {{val(").concat(y,")}}")}else d=$v.getContentTemplate(n,pn,v);return o.getCustomizedVal(n,d,t,e,a,l,"tooltip",g)}function H(t,e,a,r,i,l,s,u){var d=o.getColumnIdx("clr"),h=n.seriesdata[t].yaxiscolumnorder||[0,0],f=n.dataObject.pieWithAxis&&!n.dataObject.isCombinationalChart?yl.getPieColumnIndex(n):o.getColumnIdx("y",h),p=i.keys(),g=i.y_val_pattern,v=$n(c||c,null,r),m=$v.getRawSharedContent(n,i,v),y=0,b=function(t,e,a,r,i,l){if(n.ismultiy||null==d){var s=Wn(n.seriesdata[e].seriesname)||l.replace(/val/gi,"col");t=t.replace("{{val(null)}}",s)}return o.getCustomizedVal(n,t,e,a,r,pn,"tooltip",i,pn,u&&u>1?u:pn)},x=[];return m.forEach((function(c,u){var d=(ua(c)?c:[c]).some((function(t){return"string"==typeof t&&(-1!=t.indexOf("{{val(".concat(f,")}}"))||-1!=t.indexOf("{{per(".concat(f,")}}")))}));if(ua(c)||d){y%=n.seriesdata.length;var h=p[y];if(d&&y++,Xn(h))return void x.push(u);var v=la(h),C=la(i.get(h)),k=g,w=l;if(ua(w)){var _=o.getDataPoint(n,null,v,e,C,r);w=Fs(n,s?C:v,_,v)}ua(c)?c.forEach((function(t,n){c[n]=b(c[n],v,e,C,w,k)})):m[u]=b(m[u],v,e,C,w,k)}else{na(h=p[0])?(v=la(h),C=la(i.get(h))):(v=t,C=a),m[u]=o.getCustomizedVal(n,c,v,e,C,r,"tooltip",l,pn)}})),m=m.filter((function(t,e){return-1==x.indexOf(e)})),$v.getContentTemplate(n,m)}function N(t,e){return function(n,a){var r=J(parseInt(t),parseInt(e));return function(t){return"".concat(r(t),"px")}}}return a.initialize=function(){var e=$x(u,n),a=+e+.35*+e,r=null!=n.userdata.canvas?n.userdata.canvas.fontColor:null,o=ia(O),i=!1===u.useChartEffect,l=null;k=!1,!i&&n.filterEffectsID&&(l="url(#".concat(n.filterEffectsID,")"),k="dropShadow"!==n.systemConf.chart.effects.choice&&!Ar.PHANTOMJS),t.styles({width:"auto",opacity:u.opacity,"z-index":u.zindex,"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","pointer-events":u.pointerEvents}),C=dc(t,"div",k?[1]:[],".","class","zc-tooltip-background"),k?(t.styles({"box-shadow":null,background:null,border:"none",filter:null}),C.styles({position:"absolute",top:0,left:0,width:"100%",height:"100%","border-radius":o,"border-width":ia(S),"border-style":A,"box-shadow":u.shadow,filter:l,"z-index":-1}).lower(),t.selectAll("div#zctooltipbefore,div#zctooltipafter").remove()):t.styles({"box-shadow":u.shadow,"border-radius":o,"border-width":ia(S),"border-style":A,filter:l}),dc(t,"div",u.borderTop?[u.borderTop]:[],".","class","borderTop").styles({height:"".concat(u.borderTop,"px"),"border-radius":o,"border-bottom-left-radius":"1px","border-bottom-right-radius":"1px"}),(x=dc(t,"div",[1],"#","id","tooltipcontent")).styles({"box-sizing":"relative"===h?null:"border-box","max-width":"relative"===h?"".concat(M,"px"):null,"min-width":"relative"===h?"".concat(I,"px"):null,"line-height":"".concat(u.lineHeight||a,"px"),"word-wrap":"break-word","white-space":"normal","overflow-y":"auto",padding:ia(T)}),vc(x,[{fontColor:null==u.fontColor&&null==r?"white":u.fontColor||r},u,n.systemConf.canvas,wr],!0),(m=dc(k?C:t,"div",f?[1]:[],"#","id","zctooltipbefore")).styles({"margin-left":"".concat(-(w+2*E),"px"),border:"".concat(w+2*E,"px solid transparent"),filter:k?l:null}),(y=dc(k?C:t,"div",f?[1]:[],"#","id","zctooltipafter")).styles({"margin-left":"".concat(-w,"px"),border:"".concat(w,"px solid transparent"),filter:k?l:null}),(b=t.selectAll("div#zctooltipbefore,div#zctooltipafter")).styles({"border-color":hn,"border-top-color":"white",position:"absolute",top:"100%",left:"50%",width:0,height:0,content:" "})},a.show=function(e,n,a,r,i){t=e.tooltip.element,b=t.selectAll("div#zctooltipbefore,div#zctooltipafter"),na(i)||(i={});var l,s,d=i.color,f=i.svgFillFunc,v=i.seriesindex,S=i.subseriespos,O=i.subseriesLength,A=i.itempos,T=i.paneid,I=i.backgroundColor||u.backgroundColor,W=i.borderColor||u.borderColor,V=i.tooltipSharedInfo,Y=i.tooltipShared,U=null!=v&&Ui(e,T,v).name||i.chartType&&i.chartType.name,G=i.renderTo||"plot";((r=null==a&&!0===r)||i.inheritColors)&&(l=Zi(U,e));var X=d;if(r||i.inheritColors){var Z=l?A:v,q=o.getDataPoint(e,null,v,S,A,i.d);X=Fs(e,Z,q,v,T,q&&q.rendererIndex)}else ua(X)&&(X=X[v%X.length]);Y?("inherit"==I&&(I=i.nearest?X:"black"),"inherit"==W&&(W=i.nearest?X:"black"),X="black"):("inherit"==I&&(I=X),"inherit"==W&&(W=X)),W=null!=W?W:X,I=null!=I?I:X,t.style("visibility","visible"),(k?C:t).styles({"background-color":I,"border-color":W});var $=e.eventHandler.eventManager.selectionManager.nearest;if(!$||$&&3!=$.selected||"function"==typeof c||"string"==typeof c){var Q,K,J="",tt="",et="",nt=x.node();r&&null!=R&&(tt=$n(R,jt(),Q=dt(),e)),r?u.content?J+=$n(u.content,jt(),Q=Q||dt(),e):J+=Y?H(v,S,A,i.d,V,d,l,O):B(v,S,A,X,i.d):J+=a,r&&null!=z&&(et=$n(z,jt(),Q=Q||dt(),e)),x.html(J),La(tt)||((K=document.createElement("div")).innerHTML=tt,tt=K),La(et)||((K=document.createElement("div")).innerHTML=et,et=K),nt.insertBefore(tt,nt.firstChild),nt.appendChild(et)}var at,rt=t.node();rt.offsetWidth,rt.offsetHeight;if("plot"==G&&j.type!=dn&&e.isAxisCategory&&function(t,e,n,a){t.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible");var r=a.type;"x"!=r&&"xy"!=r||F(t,e,n,a,"x");"y"!=r&&"xy"!=r||F(t,e,n,a,"y")}(e,n.actLeft||n.left,n.actTop||n.top,j),"plot"==G&&n.helpers&&!n.helpers.isWithinPlot&&(s=!0),t.interrupt().transition(),t.transition().delay(0),"relative"===h){var ot=parseFloat(rt.style.left),it=parseFloat(rt.style.top);at=CT.relative(n,t,e,w,Ze(_),P,E,L,M,D),g=at.hookPosition,ot&&!isNaN(ot)&&it&&!isNaN(it)||t.styles({left:"".concat(at.x,"px"),top:"".concat(at.y,"px")}),ot=!ot||isNaN(ot)?at.x:(2*ot+at.x)/3,it=!it||isNaN(it)?at.y:(it+at.y)/2,t.transition().duration(100).ease(p).styleTween("left",N(ot,at.x)).styleTween("top",N(it,at.y))}else"fixed"===h?(at=CT.fixed(n,t,e),t.styles({left:"".concat(at.x,"px"),top:"".concat(at.y,"px")})):(at=CT.block(n,t,e),t.styles({left:"".concat(at.x,"px"),top:"".concat(at.y,"px")}).attr("align",at.align));if(x.styles({width:at.w,height:at.h,"max-width":at.maxw,"max-height":at.maxh}),u.borderTop){var lt=f?f(l?A:v,null,null,X,null,null,{width:Xe(+at.w,+at.maxw)},!0):W,st="object"===_typeof(lt)?"url(".concat(xs(lt,!0).url,")"):lt;t.selectAll("div.borderTop").styles({background:st})}if(Y||s)b.style("display",dn);else{var ct="rotate(".concat(g.rotation,"deg)"),ut="50% 0%";b.styles({display:"",left:"".concat(g.left,"%"),top:"".concat(g.top,"%"),transform:ct,"-webkit-transform":ct,"-ms-transform":ct,"transform-origin":ut,"-webkit-transform-origin":ut,"-ms-transform-origin":ut}),m.style("border-top-color",W),y.styles({"border-top-color":I,opacity:1})}function dt(){if(Y)return V.keys().map((function(t){var n=la(t),a=la(V.get(t)),r=o.getColumnIdx("clr"),i=e.seriesdata[n].yaxiscolumnorder||[0,0],l=e.ismultiy||null==r?o.getColumnIdx("y",i):r,s=o.getDataPoint(e,l,n,S,a);return{actData:s,metaInfo:o.getMetaInfoObj(e,s,n)}}));var t=o.getDataPoint(e,null,v,S,A,i.d),n=e.dataset.getMetaInfoObj(e,t,v);return{actData:t,point:i.d,metaInfo:n,seriesIndex:v,subseriesIndex:S,itemIndex:A}}},a.hide=function(t){(t=null==t?this.element:t).style("visibility","hidden"),n.systemConf.tooltip.crosshair.type!=dn&&n.staticPaneSVG.selectAll("g.crosshair").style("visibility","hidden")},a.destroy=function(){this.element&&this.element.remove(),this.element=m=y=null},a.getTooltipContent=function(){return B.apply(null,arguments)},a};function wT(t,e){var n=this.chart,a=t.instance.getTransform(),r=n.systemConf.chart.zoom.type;return function(t,e,n){var a={},r={x:1,y:n.axes.y.groups.length};return Oa(e,(function(e,o){if(!0===e)for(var i=0;i<r[o];i++){var l=tc(n,o,i);if(!l.disabled){var s=Pv(l,Av(o,n.axes.rotated),t),c=s.domain,u=s.range;(a[o]=a[o]||[]).push({domain:c,range:u,index:l.index}),l.domain=c,l.range=u}}})),a}(a,t.types=t.types||{x:$a(r,"x"),y:$a(r,"y")},n)}function _T(t,e){var n=this.getData(t,e.type,e.transform);this.associateBehaviours(t,e.type,n,e.transform,e)}function ST(t){var e,n,a=this.chart,r=t.instance.getTransform(),o=t.types||{};if(o.x&&(e=a.axes.x),o.y&&(n=a.axes.y.groups[0]),a.axes.rotated){var i=[n,e];e=i[0],n=i[1]}var l=Ev(r.k,e,n);t.instance.zoomToIdentity(l,0,!1)}wn.setComponent("tooltip",kT);var OT=[];Ar.isTouchDevice||(OT=[$m]);var AT={LISTENER:{start:_T,zoom:_T,end:_T},DATA_FINDER:{start:wT,zoom:wT,end:wT},BEHAVIOUR:{start:OT,zoom:[$m,function(t,e){var n=this.chart;n.zooming=!0;var a=e.point;n.disableAnimation=!0,a.x&&a.x[0].domain&&(n.viewPortExtent=a.x&&a.x[0].domain),zv.FILTER_CHART(a,n)},ry],end:[ay,ty]},LISTENER_TYPES:M(["start","zoom","end"]),SUPPORTED:function(t){return t.isAxisCategory&&!t.isPolarAxisCategory},UPDATE:ST};wn.setComponent("_chartZoomHandlers",AT),Tr.zoom=function(t){return{enabled:!1,type:"xy",minZoom:1,wheelZoom:!0,pan:!0,transitionDuration:1e3}};var TT=25;wn.setComponent("_getPlotZoomArguments",(function(t){var e=t.systemConf.chart.zoom,n=t.plotarea,a=[[0,0],[n.width,n.height]],r=wn.getComponent("ZoomD3Options"),o=t.isGeoMap||t.dataObject.isFlowChartCategory?"xy":e.type,i=e.maxZoom||function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"xy";if("xy"===n)return TT;var a=tc(t,n,0).scale,r=t.axes.rotated?"height":"width";if("x"===n||"y"===n&&a.bandwidth)return Ge(1,t.plotarea[r]/fT(t,n,e));return TT}(t,wa(e.minimumVisiblePoints,3),o);return new r({type:o,scaleExtent:[e.minZoom,i],translateExtent:a,extent:a,wheelZoom:!1!==e.wheelZoom,pan:!1!==e.pan,transitionDuration:e.transitionDuration,element:t.eventHandler.trackerGroup,metaKey:e.metaKey,filter:function(){if(Ar.isTouchDevice){var t=jt();return t.touches.length>1||t.changedTouches.length>1}return!0}})}));var PT=!1,ET=null,LT=L(),MT=0,DT=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"__INIT_EVENT",value:function(){if(!PT){var e=l(window);e.on("keydown.__META_KEY_ZC",(function(){ET=jt(),LT.each((function(e,n){var a=n.split(".").shift();t.TEST_KEY(a)&&e(!0)}))})),e.on("keyup.__META_KEY_ZC",(function(){LT.each((function(e,n){var a=n.split(".").shift();t.TEST_KEY(a)&&e(!1)})),ET=null})),PT=!0}}},{key:"TEST_KEY",value:function(e){return t.__INIT_EVENT(),!!ET&&!!ET[e]}},{key:"ADD_HOOK",value:function(e,n){t.__INIT_EVENT(),MT++;var a="".concat(e,".").concat(MT);return LT.set(a,n),a}},{key:"REMOVE_HOOK",value:function(t){LT.remove(t)}}]),t}(),IT={wheelZoom:!0,doubleClickZoom:!1,pan:!0,scaleExtent:[1,8],extent:[[0,0],[0,0]],translateExtent:[[0,0],[0,0]],metaKey:null,transitionDuration:750},RT=_createClass((function t(e){_classCallCheck(this,t),this.settings=_objectSpread(_objectSpread({},IT),e)})),zT=function(){function t(e){_classCallCheck(this,t),this.options=e.settings,this.initialize(),this.hookCount=0}return _createClass(t,[{key:"initialize",value:function(){var t=this,e=t.options;t._maxZoom=Ge.apply(void 0,_toConsumableArray(e.scaleExtent)),t._minZoom=Xe.apply(void 0,_toConsumableArray(e.scaleExtent)),t.d3_zoom=D().scaleExtent([t._minZoom,t._maxZoom]),t._signal=F("start","zoom","end"),t.enableSignals(),e.filter&&t.d3_zoom.filter(e.filter),e.element&&e.element.isD3Selection&&t.bindTo(e.element)}},{key:"enableSignals",value:function(){var t=this,e=t.d3_zoom,n=t._signal;e.on("start",(function(){!1!==t.__notify&&n.call("start",t,jt())})),e.on("zoom",(function(){!1!==t.__notify&&n.call("zoom",t,jt())})),e.on("end",(function(){!1!==t.__notify&&n.call("end",t,jt()),t.__notify=!0}))}},{key:"getSignals",value:function(){return this._signal}},{key:"addHook",value:function(t,e){this.hookCount++;var n="".concat(t,".").concat(this.hookCount);return this._signal.on(n,e),n}},{key:"removeHook",value:function(t){this._signal.on(t,null)}},{key:"bindTo",value:function(t){var e=this,n=this.d3_zoom,a=this.options;e._element=t,e._elementNode=t.node(),n.extent(e.__getExtent()),n.translateExtent(e.__getTranslateExtent()),a.metaKey?DT.ADD_HOOK(a.metaKey,(function(a){a?(t.call(n),e.constrainEvent()):t.on(".zoom",null)})):(t.call(n),e.constrainEvent())}},{key:"constrainEvent",value:function(){var t=this.options,e=this._element;!1===t.doubleClickZoom&&e.on("dblclick.zoom",null),!1===t.wheelZoom&&e.on("wheel.zoom",null),!1===t.pan&&e.on("mousedown.zoom",null),!1===t.touchZoom&&e.on("touchstart.zoom",null)}},{key:"getTransform",value:function(){return jt()&&jt().transform||this._element&&I(this._element.node())||R}},{key:"step",value:function(t,e){t=t<=0?1/-t:t,this.d3_zoom.scaleBy(this.__getZoomTransition(e),t)}},{key:"zoomToBounds",value:function(t,e,n){this.zoomToRect(tr(t),e,n)}},{key:"zoomToRect",value:function(e,n,a){this.zoomToPoint(t.centroid(e),wa(n,this.__getConstrainedScale(e)),a)}},{key:"zoomToPoint",value:function(t,e,n){var a=this;e=a.__limitScale(wa(e,a._maxZoom)),t=a.__constrainPoint(t,e),a.interpolateZoom(t,e,n)}},{key:"interpolateZoom",value:function(e,n,a){this.zoomToIdentity(t.getIdentity(e,n),a)}},{key:"zoomToIdentity",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this;a.__notify=n,a.__getZoomTransition(e).call(a.d3_zoom.transform,t)}},{key:"reset",value:function(){this._element.transition().duration(this.options.transitionDuration).call(this.d3_zoom.transform,R)}},{key:"invert",value:function(t){return this.getTransform().invert(t)}},{key:"update",value:function(t){var e=this,n=e.options=Rn(e.options,t,!0,!0);e.d3_zoom.scaleExtent(n.scaleExtent).translateExtent(e.__getTranslateExtent())}},{key:"updateExtent",value:function(t){ua(t)&&ua(t[0])&&ua(t[1])&&(this.options.extent=t,this.d3_zoom.extent(t),this.options.translateExtent=t,this.d3_zoom.translateExtent(t),this._element&&(this._element.call(this.d3_zoom),this.constrainEvent()))}},{key:"__getExtent",value:function(){return this.options.extent||[[0,0],[this._elementNode.clientWidth,this._elementNode.clientHeight]]}},{key:"destroy",value:function(){var t=this;t._signal=null,t._element&&t._element.on(".zoom",null),Oa(t,(function(e,n){t[n]=null,delete t[n]}))}},{key:"__getTranslateExtent",value:function(){return this.options.translateExtent||this.__getExtent()}},{key:"__getZoomTransition",value:function(t){return this._element.transition().duration(wa(t,this.options.transitionDuration))}},{key:"__getConstrainedScale",value:function(t){var e=tr(this.__getTranslateExtent());return Ge(1,Xe(this._maxZoom,1/Ge(t.width/e.width,t.height/e.height)))}},{key:"__constrainPoint",value:function(t,e){var n=tr(this.__getTranslateExtent());return[Xe(n.x,Ge(n.width/2-e*t[0],n.width-n.width*e)),Xe(n.y,Ge(n.height/2-e*t[1],n.height-n.height*e))]}},{key:"__limitScale",value:function(t){return Ge(this._minZoom,Xe(t,this._maxZoom))}}],[{key:"getIdentity",value:function(t,e){return R.translate(t[0],t[1]).scale(e)}},{key:"centroid",value:function(t){return[+t.x+ +t.width/2,+t.y+ +t.height/2]}}]),t}();function jT(t,e){this.associateBehaviours(t,e.type,{},e.transform,e)}zT.prototype.on=zT.prototype.addHook,wn.setComponent("ZoomD3",zT),wn.setComponent("ZoomD3Options",RT);var FT={getGeoBBox:function(t,e){return this.geoBoundToRect(e.bounds(t))},geoBoundToRect:function(t){return{x:t[0][0],y:t[0][1],width:Math.abs(t[1][0]-t[0][0]),height:Math.abs(t[1][1]-t[0][1])}},getFeatureGradientBBox:function(t,e,n){return this.getGeoBBox(t,n)},toLatLong:function(t,e,n){var a=[e,n];return t.geo.utils.projection.invert(a)},toXY:function(t,e,n){if("geoOrthographic"===(t.systemConf.map.projection||{}).name){var a=t.geo.utils.projection.rotate(),r=[-a[0],-a[1]];if(Lt([e,n],r)>Math.PI/2)return[null,null]}return t.geo.utils.projection([e,n])||[null,null]},clearContext:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)},applyTransform:function(t,e){e.canvas?(e.translate(t.x,t.y),e.scale(t.k,t.k)):e.attr("transform",t)},round:function(t,e){var n=Math.pow(10,e||0);return Math.round(t*n)/n}},BT=function(t,e){return{cartesian:Ot.cartesian(e),quaternion:Ot(t)}},HT=function(t,e){var n=Ot.cartesian(e),a=Ot.multiply(t.quaternion,Ot.delta(t.cartesian,n));return Ot.rotation(a)};function NT(t){var e=t.baseProjection=t.baseProjection=t.getProjection(t.geo.renderedLayer);return{scale:e.scale(),translate:e.translate()}}var WT={LISTENER:{start:jT,zoom:jT,end:jT},DATA_FINDER:{},BEHAVIOUR:{start:function(t,e,n){var a=this.chart;if(a.geo.isGlobeMap){var r=Pu(a.eventHandler.trackerElement.node()),o=FT.toLatLong(a,r[0],r[1]);t._baseRotate=a.geo.utils.projection.rotate(),t._basePosition=BT(t._baseRotate,o)}},zoom:function(t,e,n){var a=this.chart;a.geo.isGlobeMap?function(t,e,n){var a=t.geo.utils,r=NT(t);a.projection.scale(r.scale*e.k),a.projection.rotate(n._baseRotate);var o=Pu(t.eventHandler.trackerElement.node()),i=FT.toLatLong(t,o[0],o[1]),l=HT(n._basePosition,i);a.projection.rotate(l)}(a,n,t):function(t,e,n){var a=NT(t),r=t.geo.utils;r.projection.translate([e.x+a.translate[0]*e.k,e.y+a.translate[1]*e.k]),r.projection.scale(a.scale*e.k)}(a,n),function(t){t.eventHandler.mapEvents.handleMouseOut(),t.eventHandler.tooltipElement.hide(),t.addRemoveSeries()}(a)},end:function(t,e,n){var a=this.chart.eventHandler.mapEvents;a.outLine=a.getOutLine()}},LISTENER_TYPES:M(["start","zoom","end"]),SUPPORTED:function(t){return t.isGeoMap}};function VT(t,e,n){var a=n.x.toFixed(6),r=n.y.toFixed(6),o=n.k.toFixed(6),i=this.chart;i.wrap.selectAll("g.sankey-chart-main").attr("transform","translate("+a+","+r+") scale("+o+" "+o+")"),i.dataObject.sankeyLayout.zoomTransform={x:a,y:r,k:o},i.sankeyZoomTransform={x:a,y:r,k:o}}function YT(t,e,n){var a=this.chart,r=n.x.toFixed(6),o=n.y.toFixed(6),i=n.k.toFixed(6);a.staticPaneSVG.selectAll("g.labelClippathholder").selectAll("g.subseries_0").selectAll(".zc_label").attr("transform",(function(t){var e,n,a=l(this);if(na(a.attr("translateX")))e=parseFloat(a.attr("translateX")),n=parseFloat(a.attr("translateY"));else{var s=iu(this).translate;e=parseFloat(s[0]),n=parseFloat(s[1]),a.attrs({translateX:e,translateY:n})}return"translate("+(e=e*i+parseFloat(r))+","+(n=n*i+parseFloat(o))+")"}))}wn.setComponent("_mapZoomHandlers",WT);var UT={LISTENER:{start:_T,zoom:_T,end:_T},DATA_FINDER:{},BEHAVIOUR:{start:[VT,YT,function(){var t=this.chart,e=t.eventHandler.eventManager.selectionManager;AC.call(this,null,e),t.lastPoint=null,e.nearest=null}],zoom:[VT,YT],end:[VT,YT,function(){this.chart.cache.search={},this.chart.cache.data={}}]},LISTENER_TYPES:M(["start","zoom","end"]),SUPPORTED:function(t){return t.dataObject.isFlowChartCategory&&"svg"==t.plot.renderer.mode},UPDATE:ST};function GT(t,e,n,a,r,o){var i,l=t.chartObj,s=t.xscale,c=(t.yscale,t.stacked),u=t.datasetIndex,d=t.axisrotated,h=t.commonPlotOptions,f=t.hasNegValue,p=t.yaxiscolumnorder,v=t.dataset,m=l.systemConf,y=l.dataObject,b=m.chart.axes.yaxis[p].reversed,x=(l.seriesdata[u]||l.seriesdata[0]).plotoptions,C=Dn.getValueOfPlotOptions(x,h)("mode");if(y.isPolarAxisCategory){var k=b&&!c?t.yscale.domain().length-1:0,w=(O=pi.helpers).isCatNull(v,"x"),_=O.isCatNull(v,"y",p),S=function(e,n){var a;return a=c?0==e.y0?Xe(t.yscale.range()[0],t.yscale(f),e.y0):t.yscale(e.y0):t.yscale(t.yscale.domain()[k])+(null!=t.yscale.bandwidth?t.yscale.bandwidth()/2:0),Ge(a,t.yscale.range()[k])};i=Y().angle((function(t,e){return s(v.getX(t))})).outerRadius((function(e,n){if(e.isDummy)return S.apply(null,arguments);var a=c?t.yscale(e.y0+e.y):t.yscale(v.getY(e,p))+(null!=t.yscale.bandwidth?t.yscale.bandwidth()/2:0);return Ge(a,t.yscale.range()[k])})).innerRadius(S).curve(g(C)),i._defined=function(t,e){return!_(v.getY(t,p))&&!w(v.getX(t))}}else{var O,A=Ui(l,o,u).name===xi,T=A?1:null;w=(O=pi.helpers).isCatNull(v,"x"),_=O.isCatNull(v,"y",p);i=V().defined((function(t,e){return(c||!_(v.getY(t,p)))&&!w(v.getX(t))})).curve(g(C,t.axisrotated,h.tension)),d?i.x0((function(e,n){return c?0==u&&0==r&&0==n?Ge(t.yscale.range()[0],t.yscale(f)):t.yscale(e.y0):A?y.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"x",null,0):null!=t.yscale.bandwidth?t.yscale.origRange[0]+t.yscale.bandwidth():Ge(t.yscale.range()[0],t.yscale(f))})).x1((function(r,o){var i=y.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,r,"x",null,T);return isNaN(i)&&null!=n&&(i=y.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,a[a.length-1],"x",null,T)+e),i})).y((function(e,n){return y.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"y",null,T)})):i.x((function(e,r){var o=l.dataObject.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"x",null,T);null!=n&&(o+=Math.abs(l.dataObject.getXYvalue(t.axisrotated,t.stacked,l.renderer[u].oldXscale,t.yscale,t.yaxiscolumnorder,a[0],"x",null,T)-l.dataObject.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,a[0],"x",null,T)));return o})).y0((function(e,n){return c?0==u&&0==r&&0==n?Xe(t.yscale.range()[0],t.yscale(f)):t.yscale(e.y0):A?y.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"y",null,0):null!=t.yscale.bandwidth?t.yscale.origRange[0]+t.yscale.bandwidth():Xe(t.yscale.range()[0],t.yscale(f))})).y1((function(e,n){t.yscale;return y.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"y",null,T)}))}return i}function XT(t,e){this.chart=t,this.renderer=e}wn.setComponent("_sankeyZoomHandlers",UT),Ta(XT,rv);var ZT=XT.prototype;ZT._defaultH=function(){var t=this;return[{shape:"marker",path:Za(this).path,data:Za(this).data,context:Za(this).renderingContext,translate:this.translateContext},{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:function(e){return Kg.call(t,e,"inherit")}}]},ZT.data=function(t){var e=this.renderer.commonRendererProp().params,n=this.chart,a=this.renderer.layout[t.subSeriesIndex],r=a.innerRadius(),o=a._defined;return t._polydata=this.poly(t),function(){n.cache.data[t._key]||(n.cache.data[t._key]={});var a=n.cache.data[t._key];return a._x=t._x=a._x||n.dataObject.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"x")+e.bound.x,a._y=t._y=a._y||n.dataObject.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"y")+e.bound.y,a._y0=t._y0=a._y0||r(t,t.itemIndex),a._uid=t._uid=n.dataset.getX(t),a._defined=t._defined=na(a._defined)?a._defined:o(t),a._visible=t._visible=Fl(n,t),a._point=t,t}},ZT.poly=function(t){var e=this.chart,n=this.renderer;return function(){e.cache.data[t._key]||(e.cache.data[t._key]={});var a=e.cache.data[t._key];if(!a._poly){var r=n.seriesdataAfterUpdate[t.subSeriesIndex],o=sk(r,t),i=function(t){var e=[];return t.filter((function(t){t._data(),t._defined&&e.push([t._x,t._y])})),e}(r);o.points=i,a._poly=t._poly=o}return t._poly}},ZT.renderingContext=function(){return Jg.get("area").call(this,this.chart)},ZT.translateContext=function(){return[this.chart.plotarea.left+this.chart.plotarea_approx.x,this.chart.plotarea.top+this.chart.plotarea_approx.y]},ZT.options=function(t){var e=this.renderer.commonRendererProp().params,n=Za(this).commonOptions.call(this,t),a=(n.symbol,n._size||e.gvp("strokeWidth")),r=e.gvp("mode"),o=e.hoverOptions.fillOpacity||.2;return n.size={outer:.7*a,inner:.35*a},n.fillopacity=o,n.interpolation=r,n},ZT.path=function(t,e){var n,a=this.options(t),r=e.context.call(this),o=e.translate.call(this),i=this.renderer.commonRendererProp().params,l=this.renderer.layout[t.subSeriesIndex];return l.context(pn),r.style("display","").attr("transform","translate(".concat(o[0]+i.bound.x,",").concat(o[1]+i.bound.y,")")),(n=dc(r,"path",[1],".","class","highlight".concat(t.seriesIndex))).datum(this.renderer.seriesdataAfterUpdate[t.subSeriesIndex]).attr("d",l).attr("stroke","").styles({"fill-opacity":a.fillopacity,display:""}),n},Jp.area=function(){var t,e,n,a=Jp.line();function r(o,i,l,s){var c=t.params,u=c.chartObj,d=c.xscale,h=c.yscale,f=c.stacked,p=c.datasetIndex,g=c.legendOrderIndex,v=c.rendererIndex,m=c.axisrotated,y=c.commonPlotOptions,b=c.color,x=c.labelQueue,C=c.yaxiscolumnorder,k=i,w=(i=u.dataObject.categoryHierarchy?i[p]:u.seriesdata[p]).plotoptions,_=Ao(u)?"".concat(i.row,"_").concat(i.column):"0_0",S=t.params.gvp=Dn.getValueOfPlotOptions(w,y),O=S("fillOpacity"),A=S("strokeWidth"),T=S("strokeColor"),P=t.params.markerOptions=w&&w.marker?Rn(y.marker,w.marker,!0):y.marker,E=(t.params.hoverOptions=w&&w.hoveroptions?Rn(y.hoveroptions,w.hoveroptions,!0):y.hoveroptions,P.enabled),L=na(A)&&""!=A&&0!=la(A)||na(T)&&""!=T||E,M=u.dataset.getDataType("x"),D=u.dataset.getDataType("y",C),I=M==To?d.domain():null,R=D==To?h.domain():null,z=Ui(u,_,p).name,j=c.isRangeChart="arearange"==z,F=_s(u,p),B=(r.fillColorFunc=Ls(u,g,_,F,null,null,null,c),T=Is(u,g),l&&l.gradient);return na(l)&&(l=l.pattern||l,na(s)&&(E=!0,O=1e-8)),r.layout=[],r.seriesdataAfterUpdate=[],i.data.forEach((function(t,a){var v;v=M==To||D==To?u.dataObject.updateSeriesdatabyCategories(Yn(t),I,R,C):t,(u.renderVisiblePointsOnly||null!=e)&&(v=pi.helpers.filterPointsInViewport(u,v,"area","x",p)),r.seriesdataAfterUpdate[a]=v,n=null!=e?null==n||0==n?u.dataObject.getXYvalue(m,f,d,h,C,v[v.length-1],"x")-u.dataObject.getXYvalue(m,f,d,h,C,v[v.length-2],"x"):n:0;var y=GT(c,n,e,v,a,_);if(r.layout[a]=y,!i.disabled){var x=function(e,n){e.beginPath(),e.fillStyle=n,y.context(e)(t),e.fill(),e.restore()};if(u.imagePallete)Hr.canvas_patterns.imageFill({context:o,name:ul(u,g,_)},x);else{var k=na(l)&&Xn(s)?l:r.fillColorFunc(g,null,null,S("fillColor")||b,O,F,null,!1,a);B&&x(o,B),x(o,k)}}})),i.disabled||!L&&!E||i.disabled||(a.chartRendered=!1,a.commonRendererProp(t).shiftInfo(e),a(o,k,l,s)),!na(Me)||L||E||(j?(x.push({renderer:r,charttype:"scatter",chartObj:u,rendererIndex:v,paneid:_,args:[i,p,0,1]}),x.push({renderer:r,charttype:"scatter",chartObj:u,rendererIndex:v,paneid:_,args:[i,p,0,0]})):x.push({renderer:r,charttype:"scatter",chartObj:u,rendererIndex:v,paneid:_,args:[i,p,0,null]})),r.chartRendered=!0,r}return r.getHighlighter=function(t,e){return r.highlighter||(r.highlighter=t.dataObject.isPolarAxisCategory?new XT(t,r):new mk(t,r)),r.highlighter},r.commonRendererProp=function(e){return arguments.length?(t=e,r):t},r.shiftInfo=function(t){return arguments.length?(e=t,r):e},r},Tr.area=function(){return{strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1,useSVGMarkers:!0},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}}},Tr.arearange=function(){return{strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}}},Tr.web=function(){return{fillOpacity:.5,strokeWidth:2,mode:"linearClosed",outerPadding:10,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:0},hoveroptions:{innerStrokeWidth:2,innerStrokeOpacity:1,outerFillColor:"white"},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90,x:0,y:0}}}}},Pe.area=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f,p,g=0,v=!1,m=!1,y=!1,b=Pe.line(),x=Pe.line(),C=[];function k(w){w.each((function(w){var _=t.params;d=_.chartObj,e=_.xscale,n=_.yscale,v=_.stacked,g=_.datasetIndex,m=_.axisrotated,s=_.commonPlotOptions,o=_.color,i=_.labelQueue,u=_.hasNegValue,r=_.yaxiscolumnorder,a=_.dataset,c=d.systemConf;var S,O=_.renderingOrderIndex,A=_.legendOrderIndex,T=_.rendererIndex,P=d.defsLocation,E=d.dataObject.isPolarAxisCategory;d.viewFlow&&d.viewFlow.marks._default.chart.length&&(S=w[g].data);var L=S||w[g],M={data:L,index:O};v&&(M.stackIndex=0*w.length+O);var D=L.plotoptions,I=L.data,R=Ao(d)?"".concat(L.row,"_").concat(L.column):"0_0",z=Ui(d,R,g).name,j=t.params.gvp=Dn.getValueOfPlotOptions(D,s),F=j("fillOpacity"),B=j("strokeWidth"),H=j("strokeColor"),N=Bi.isQuantileColorScale(d),W=t.params.markerOptions=D&&D.marker?Rn(s.marker,D.marker,!0):s.marker,V=(t.params.hoverOptions=D&&D.hoveroptions?Rn(s.hoveroptions,D.hoveroptions,!0):s.hoveroptions,N||W.enabled),Y=null!=B&&""!=B&&0!=la(B)||null!=H&&""!=H||V,U=fp(s,D,d,z),G=U.enabled,X=U.easingType,Z=U.type;h=U.duration,Z=Z==Hc?Bc:Z;var q=d.dataset.getDataType("x"),$=d.dataset.getDataType("y",r),K=q==To?e.domain():null,J=$==To?n.domain():null,tt=q!=To||na(d.dataObject.hierarchical)?d.dataObject.getCategories("x"):K,et=c.chart.axes.yaxis[r].reversed;q!=To&&0==tt.length&&G&&Z==Yc&&(tt=d.dataObject.findXCategories());var nt=_.isRangeChart="arearange"==z,at=nt?1:null;k.seriesdataAfterUpdate=[],k.layout=[],I.forEach((function(t,a){var o;o=q==To||$==To?d.dataObject.updateSeriesdatabyCategories(Yn(t),K,J,r):t,(d.renderVisiblePointsOnly||null!=f)&&(o=pi.helpers.filterPointsInViewport(d,o,z,"x",g)),k.seriesdataAfterUpdate[a]=o,d.systemConf.chart.axes.xaxis.reversed&&(o=o.slice(0).reverse()),p=null!=f?null==p||0==p?d.dataObject.getXYvalue(m,v,e,n,r,o[o.length-1],"x")-d.dataObject.getXYvalue(m,v,e,n,r,o[o.length-2],"x"):p:0,C[a]=GT(_,p,f,o,a,R),k.layout[a]=C[a]}));var rt=l(this);k.update=function(){rt.transition().call(k)};var ot,it=_.dynamicSeriesPosition;if(void 0===it&&(it=g),E)g=it,(ot=rt.selectAll("g.areaseries_".concat(g)).data([M])).enter().insert("g",":first-child").merge(ot).attr("class","areaseries_".concat(g)),ot=rt.selectAll("g.areaseries_".concat(g));else{var lt;if(v){var st=this.querySelector("g.areaseries_".concat(it-1));lt=st?"g.".concat(st.className.baseVal," + *"):null}ot=dc(rt,"g",[M],".","class","areaseries_".concat(it),void 0,void 0,{insertBefore:lt})}Y||V?(b.commonRendererProp(t).shiftInfo(f),b.chartRendered=!1,nt&&(b.yrangePos(1),x.commonRendererProp(t).shiftInfo(f).yrangePos(0),x.chartRendered=!1,rt.call(x)),rt.call(b)):rt.selectAll("g.lineseries_".concat(it,",g.scatterseries_").concat(it)).remove(),I.forEach((function(t,i){var l,s=k.seriesdataAfterUpdate[i],c=s,p=0;if(G){if(Z==Yc)c=s.map((function(t,e){return Object.create(s[0])}));else{var b=Z==Wc?a.xidx:a.yidx(r),x=Z==Wc?e:n,w=E&&et&&!v?x.domain().length-1:0;c=s.map((function(t,e){var n=Object.create(t);if(t.isDummy&&p++,v&&Z!=Wc)n.y0=E&&Z===Vc?Xe(0,x.domain()[0]):0,n.y=E||null==u||null==x(u)?x.domain()[0]:Ge(u,x.domain()[0]);else if(nt&&Z==Bc){var a=new Array(2),o=d.dataset.getY(t,r,0);a[0]=o,a[1]=null==n[b]?null:null!=u&&null!=x(u)?Ge(u,o):o,n[b]=a}else n[b]=null==n[b]?null:E||null==u||null==x(u)?x.domain()[w]:Ge(u,x.domain()[0]);return n}))}l=Yn(c)}var S=L.disabled,O=dc(ot,"g",(function(t){return S?[]:[t]}),".","class","subseries_".concat(i)),T=O.selectAll("path.area").data((function(t){return S?[]:[t]})),M=T.enter().append("path").datum(c,(function(t){return a.getX(t)})).attr("class","area").style("opacity",F).style("fill",o).attr("d",C[i]);if(G)if(Z==Uc||Z==Yc)pp(c,l,s,tt,Z,X,h,_,(function(t){return{d:C[i](t)}}),M);else if(null!=M.node()&&Z==Vc)M.transition().duration(0).delay(h).attr("d",(function(t){return C[i](t)}));else{var D=!s.length||1==s.length&&!s[0].length;(D=v?s.length==p:D)?M.attr("d",(function(t){return C[i]([])})):M.transition().duration(h).ease(X).attrTween("d",(function(){var t=Q(C[i](c),C[i](s));return function(e){return t(e)}}))}var I=_s(d,g),B=k.fillColorFunc=Ls(d,g,R,I,null,null,null,_);if(null!=f&&y){var H=e(s[0][0])+(null!=e.bandwidth?e.bandwidth()/2:0),N=d.dataObject.getXYvalue(m,v,e,n,r,s[s.length-1],"x")-d.dataObject.getXYvalue(m,v,e,n,r,s[0],"x"),W={name:"rect",id:d.id,x:H,y:0,width:N,height:d.plotarea.height},V=Hr.get(Hr.svg_clips,"rect",W,{chartObj:d});ot.attr("clip-path","url(".concat(P,"#").concat(V,")"))}var Y=s,U=M.merge(T).datum(s,(function(t){return a.getX(t)})).styles({opacity:F,fill:B(A,null,null,j("fillColor")||o,pn,pn,pn,pn,i)});if(null!=f){var q=null!=f?Math.abs(d.dataObject.getXYvalue(m,v,k.oldXscale,n,r,s[0],"x",null,at)-d.dataObject.getXYvalue(m,v,e,n,r,s[0],"x",null,at)):null;T.datum(Y).attr("d",C[i]).attr("transform",null).transition().duration(h).ease(X).attr("transform",(function(){return null==q?null:"translate(-".concat(q,",0)")}))}else{var $=d.racing&&d.racing.syncTransition;null!=M.node()&&Z==Vc?$?U.datum(Y).style("fill-opacity",0).transition($).attr("d",C[i]).style("fill-opacity",null):U.datum(Y).style("fill-opacity",0).transition().duration(0).delay(h).attr("d",C[i]).style("fill-opacity",null):$?U.datum(Y).style("fill-opacity",null).transition($).attr("d",C[i]):U.datum(Y).style("fill-opacity",null).transition().delay(Z!=Uc&&Z!=Yc||null==M.node()?0:h).duration(h).ease(X).attr("d",C[i])}$k(U,d,z),d.dataObject.hierarchical&&(U.attr("levelbycolumn",(function(t,e){return t[0]&&t[0].levelByColumn})),d.dataObject.pivot&&U.attr("levelbyrow",(function(t,e){return t[0]&&t[0].levelByRow}))),T.exit().remove()})),k.getSymbolSize=b.getSymbolSize,Y||V||(nt?(i.push({renderer:k,charttype:"scatter",chartObj:d,paneid:R,args:[L,A,0,1]}),i.push({renderer:k,charttype:"scatter",chartObj:d,paneid:R,args:[L,A,0,0]})):i.push({renderer:k,charttype:"scatter",chartObj:d,rendererIndex:T,paneid:R,args:[L,A,0]}))}));var _=t.params.chartObj;return _.timerObj[_.timerObj.length]=k.renderedTimer=setTimeout((function(){k.chartRendered=!0,y=!0}),h),k.oldXscale=e,k}return k.getHighlighter=function(t,e){return k.highlighter||(k.highlighter=t.dataObject.isPolarAxisCategory?new XT(t,k):new mk(t,k)),k.highlighter},k.commonRendererProp=function(e){return arguments.length?(t=e,k):t},k.shiftInfo=function(t){return arguments.length?(f=t,k):f},k.destroy=function(){b.destroy(),x.destroy()},k},ed("marker-correction-evaluator",(function(t){var e=this,n=t.data,a=t.size,r=t.position,o=t.scale;o=$n(o,e)||function(t){return t};var i=$n(o.domain),l=$n(o.bandwidth)||0,s=hr(r)?[o(i[0]),o(i[i.length-1])+l]:[0,0],c=function(t,e){var n=e.scale,a=e.size,r=e.position,o=e._this,i=$n(n.bandwidth)||0;return t.map((function(t){var e=Ma(a).reduce((function(e,n){return e+$n(n,t)}),0),l=$n(!0,r,o,t,n),s=sa(l)?l.value:n(l)+i/2;return{x:s-e/2,y:s-e/2,width:e,height:e}}))}(n,{size:a,position:r,scale:o,_this:e}),d=j(E([j(c,(function(t){return t.x})),j(c,(function(t){return+(t.x+t.width).toFixed(12)})),[0]]));if(!Pn.scaleCorrection){var h=function(t,e,n){if("ordinal"===n.config.type){var a=t.range(),r=.5*u([a[0]-e[0],e[1]-a[1],0]),o=[e[0]-r,e[1]+r],i=u([o[1]-a[1],-o[0],0]);return[i,i]}}(o,d,e);if(h)return h}return[Ge(s[0]-d[0],0),Ge(d[1]-s[1],0)]}));var qT=function(t,e,n){this._base=0;this._extent=[],this._data=[],this._list=L(),t&&this.add.apply(this,arguments)},$T=qT.prototype;function QT(t){this.chart=t,this.originalSeries=t.seriesdata,this.initialize()}function KT(t){pi.HierarchicalDataAdapter.call(this,t),this.dataType=To,this.categoryTree=!0,this.gridOptions={},this.legendOptions={},this.update(!0)}$T.add=function(t,e,n){var a=this,r=a._list,o=a._extent,i=a._base;t.forEach((function(t){var a,l,s,c=e(t),u=n(t)||i,d=u instanceof Array,h=+(u>=i);r.has(c)?(a=r.get(c)).values.push(t):((a=[Oe,Oe]).key=c,a.values=[t],r.set(c,a)),d?(l=u[0],s=u[1],i=l,u=u[1]-u[0]):s=(l=a[h]||i)+u,t.y0=l,t.y=u,a[h]=s,o=j([].concat(_toConsumableArray(o),[s,i]))})),a._extent=o,a._data=a._data.concat(t)},$T.sort=function(t,e,n){var a=this,r=(a._list,n.call(null,a));a._list=L(),a.add(r,t,e)},$T.getExtent=function(){return this._extent},wn.setComponent("stackLayout",qT),qT.prototype.getAllExtents=function(){var t=this;if(t._keyExtents)return t._keyExtents;var e=t._list,n=[],a=function(t,e){var n=[t.key,e];return n.sum=(t[0]||0)+(t[1]||0),n};return e.each((function(t){t[1]>=0&&n.push(a(t,t[1])),t[0]<0&&n.push(a(t,t[0]))})),t._keyExtents=n},qT.prototype.toPercent=function(t,e){var n=this._list;t.forEach((function(t){var a=e(t),r=n.get(a),o=r&&r[1];isNaN(o)||null==o||0==o||(t.y0/=o/100,t.y/=o/100)}))},QT.prototype={initialize:function(){var t=this;t.hierarchyLayout=!0,t.dataCount=0,t.globalChartType=t.originalSeries.type},getCategories:function(){return this.categories},getPivotLayout:function(){return this.pivotLayout}},QT.is3D=function(t){return ua(t)&&ua(t[0])},QT.isArrayOfSeries=function(t){return QT.is3D(t.data)&&na(t.seriesname)},QT.keysObject=function(t){var e={};return t&&t.length&&t.forEach((function(t){e[t.value]=t})),e},pi.HierarchicalDataAdapter=QT;var JT={calculatePivotLayout:function(){var t=this.pivotHelpers(),e=this.pivot?wn.getComponent("PivotLayout"):new wn.getComponent("LayerHierarchyLayout"),n=this.pivot?new e({seriesname:"root",data:this.originalSeries},t):new e(this.originalSeries,t);this.pivotLayout=n},hasRows:function(){var t=this.pivotLayout.getRootNodeList("row"),e=t.getCount(),n=t.hasMultiCluster();return e||n},setScaleForRange:function(t){var e=this,n=this.chart;return{_padding:function(e,n,a){t.copy();var r=e[0].node,o=e[e.length-1].node,i=t.bandwidth,l=i?Wt._getDiscreteRangeBand(t,a):Wt.getContinuousRangeBand(t,n),s=i?l.rangeBand:l.rangeBand/2,c=l.outerPaddingInPixel;t.firstPt=r,t.lastPt=o,t.innerPadding=s,t.outerPadding=c,t.span=i?t.bandwidth():null,na(a)||(t._innerPadding=s,t._outerPadding=c)},_scale:t,pointProperty:t.bandwidth?"index":"point",_rangeInfo:function(){var t="top"==n.axes.x.orient||"bottom"==n.axes.x.orient;return{sign:t?1:-1,startPos:t?0:n.plotarea.height}},_hasDynamicLeafScale:function(){return e.dynamicLeafScale},_haUniformLeafScale:n.systemConf.chart.axes.xaxis.uniformLeafScale}},setGridOptions:function(){var t=this,e=t.chart,n=t.gridOptions,a=t.legendOptions,r=t.pivotLayout.layers,o=r.isLayerNode,i=t.pivotLayout.getRootNodeList("row").hasMultiCluster(),l=nr(r.panes),s=t.chart.seriesdata&&t.chart.userdata.seriesdata.type;e.dataObject.isAxisCategory||e.dataObject.isNonAxisMultiSeriesCategory;l.forEach((function(r,l){var c=new Array(0),u=new Array(0),d=new Array(0),h="".concat(r.row,"_").concat(r.column),f=e.systemConf.legend.color&&e.systemConf.legend.color[r.layer],p=f&&f.colors||[],g=r.layer,v=t.pivotLayout.layers.groups[g];r.data.forEach((function(e,n){var a=v.indexOf(e.value),r=i?o?a:l:a;c.push(e.node.color||p[n]||t.chart.mainSeriesColor[r%t.chart.mainSeriesColor.length]);t.chart.chartTypes[n]&&t.chart.chartTypes[n].value;u.push(pi.helpers.getChartType(wa(e.node.type,s),"object")),d.push(r)})),n[h]=n[h]||{},n[h].renderer=new Array(0),n[h].colors=c,n[h].chartTypes=u,n[h].legendOrder=r.layer,n[h].legendIndices=d,a[r.layer]||(a[r.layer]={colors:c})}))},setDummyDomainForClusters:function(t,e){var n=this,a=(n.chart,n.pivotLayout.getRootNodeList("column")),r=0,o=0;t.map((function(t){t&&"auto"!==t&&(r+=t,o++)}));var i=e.range(),l=Ze(i[1]-i[0])-r,s=b().domain(tt(e.domain().length-o)).range([0,l]).bandwidth();t.map((function(t,e){if(t&&"auto"!==t){var r=a.getNodesForClusterSet(0,e).length,o=s*r;n.dynamicLeafScale=!0;var i=0;if(t>o&&(i=Xe(Ue(t/o),5)),i){var l=a.clusters[0].entries.get("".concat(e,"_"));l.customDomain=L();var c=new Array(i),u={count:i,values:c};for(e=0;e<i;e++)c[e]="domain_".concat(e);l.customDomain.set(0,u)}}}))},getDynamicColumnSize:function(t,e){var n,a=this.chart,r=this.pivotLayout.getRootNodeList("column"),o=a.systemConf.facets.config.columns.leafSize;if((a.plotarea.width,r.count||r.leafCount)&&r.clusters[0].datatype==To){if(r.count){var i=r.branches[0].domain.map((function(t,e){return r.getNodesForClusterSet(0,e)})),l={nodes:i,count:i.length};n="default"==o?function(t,e,n){for(var a=n.systemConf.facets.config.columns.customLeafSizeColumns,r=M(a||[1]),o=new Array(t.count),i=0;i<t.count;i++)if(r.has(i)){var l=t.nodes[i],s="0_".concat(i),c=Ui(n,s,0),d=pi.helpers.getSeriesdata(n,s,0).plotoptions,h=Hd(n.systemConf.chart.plot.plotoptions[c.name],d,n,0,s),f=Kx(n,null,h,"datalabels",null,0,null,"".concat(i,"_0")),p=l.map((function(t){var e=vw(t.data,{config:h,accessor:f,chartObj:n});return u(e,(function(t){return t.width}))})),g=u(p);o[i]=g>0?g:null}else o[i]="auto";return o}(l,0,a):$n(o,l,t,a),this.setDummyDomainForClusters(n,t)}return}},getNodeValueByColumnIdx:function(t,e,n){var a,r,o,i,l=this.chart,s=(l.userdata.facets,l.dataset.rowIndices),c=l.dataset.columnIndices;if(l.dataObject.pivot){var u=s.indexOf(e);if(-1!=u)a="row",r=u,o=s.length-1-u,i=t.levelByRow.split("_")[r];else{var d=c.indexOf(e);a="column",r=d,o=c.length-1-d,i=t.levelByColumn.split("_")[r]}}else a="column",r=n-1,o=l.axes.x.count-1-n,i=t.levelByColumn.split("_")[r];return l.dataObject.hierarchical.pivotLayout.getRootNodeList(a).getDomainForBranch(o)[i]},pivotHelpers:function(){var t=this,e=this.chart,n=(e.distinctChartTypes||er(up(e.userdata))).map((function(t){return Gt[t]})),a={children:function(t){if(Uv.helpers.hasInnerSeries(t))return t.data;if(t.data){var e=pi.helpers.is3D(t.data),n=!e&&t.data.length&&t.data[0].constructor!==Array,r=e?E(t.data):n?[t.data]:t.data,o=!r.length||r.some((function(t){return a.isDefined(t)}));return!r.length||1==r.length&&!r[0].length||!o?null:r}return null},nodeType:function(n,a){var r=n?wa(a,n.depth):a,o=e.userdata.metadata.axes,i=E(o.y),l=e.userdata.metadata.columns,s=e.userdata.facets,c=function(t,e){var n={rows:[],columns:[],color:[]},a=["rows","columns","color"];t?a.map((function(a){t[a]&&t[a].map((function(t){n[a].push(e[t].levelindex)}))})):(n.color.push(0),e.map((function(t){t.levelindex&&n.columns.push(t.levelindex)})));return n}(s,l),u=s?e.dataset.rowIndices||s.rows.filter((function(t){return-1==i.indexOf(t)})):c.rows,d=s?e.dataset.columnIndices||s.columns.filter((function(t){return-1==o.x.indexOf(t)})):c.columns,h=c.columns.indexOf(r),f=c.rows.indexOf(r),p=-1!=h,g=-1!=f,v=-1!=c.color.indexOf(r);e.dataset.rowIndices=u,e.dataset.columnIndices=d;var m=!n||n.node.data;if(n){var y=Uv.helpers.hasInnerSeries(n);n.hasInnerChild=!0,t.pivot&&(n.hasInnerChild=y)}if(p&&m){var b=0==h,x=h==d.length-1;return n&&b&&(n.firstColumn=b),n&&x&&(n.lastColumn=x),"column"}if(g&&m){var C=0==f,k=f==u.length-1;return n&&C&&(n.firstRow=C),n&&k&&(n.lastRow=k),n&&!n.hasInnerChild&&c.color.length&&(n.mainTag="layer"),"row"}return v&&m?(n&&(n.layer=s&&s.color),"layer"):"leaf"},data:function(t){if(Uv.helpers.hasInnerSeries(t))return t.data;if(t.data){var e=pi.helpers.is3D(t.data),n=!e&&t.data.length&&t.data[0].constructor!==Array,a=e?t.data:n?[[t.data]]:[t.data];return t.data=a,a}return t},isEmpty:function(t){return!a.children(t)}};return a.dataType=function(t,a){var r=t.tag,o=wa(a,t.depth),i=e.userdata.metadata.axes,l=e.userdata.metadata.columns,s=function(t,e,n){var a=L(),r=["rows","columns","color"];t?r.map((function(n){t[n]&&t[n].map((function(t){a.set(e[t].levelindex,t)}))})):(a.set(0,n.clr[0]),e.map((function(t,e){t.levelindex&&a.set(t.levelindex,e)})));return a}(e.userdata.facets,l,i),c=l[s.get(o)||0].datatype,u=n.every((function(t){return qa(_e.discrete,t)}));if("leaf"==r){var d=l[i.y[0][0]],h=l[i.x[0]];c={rows:d.useDiscrete?To:d.datatype,columns:h.useDiscrete||u?To:h.datatype}}return c},a.nodeName=function(t){return t.seriesname||t[0]},a.layerName=function(t){return t.seriesname},a.isDisabledSeries=function(t){return t.disabled},a.isDefined=function(t){var n=wa(e.dataset.getColumn("x"),{}),a=n.datatype,r=wa(n.dataindex,0);return na(n[a])&&na(n[a].nullformatting)||na(t[r])},a.hasSplitLeavesColumns=function(){return e.systemConf?e.systemConf.chart.axes.xaxis.splitLeaves:fa(e.userdata,"chart.axes.xaxis.splitLeaves")},a},update:function(t){t||this.initialize(),this.pivot=this.isPivotModel(this.originalSeries),this.facetRendering=this.renderByFacet(),this.calculatePivotLayout()},isPivotModel:function(t){return"layer"!=this.pivotHelpers().nodeType(null,0)},renderByFacet:function(){return this.pivot||this.chart.userdata.facets&&this.chart.userdata.facets.renderByFacet},getSeries:function(t){return na(t)?this.pivotLayout.series[t]:this.pivotLayout.series}};function tP(t,e,n,a,r){pi.HierarchicalDataAdapter.call(this,t),this.dataType=Po,this.chart=t,this.columnInfo=r,a?this.groupByDiscreteTime=!0:this.groupByContinuousTime=!0,ua(n)?this.groupOrder=n.slice(0).reverse():"AUTO"===n&&(this.groupOrder=tP.getAutoGroupOrder(r.time.subfunction)),this.groupByTime=!0,this.update(e)}Ta(KT,pi.HierarchicalDataAdapter),Aa(KT.prototype,JT),pi.HierarchicalOrdinalDataAdapter=KT,wn.setComponent("_hierarchyOrdinal",pi.HierarchicalOrdinalDataAdapter);var eP=["January","February","March","April","May","June","July","August","September","October","November","December"],nP=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],aP=["YEAR","QUARTER","MONTH","WEEK","DAY"],rP={YEAR:"YEAR",ABSQUARTER:"QUARTER",QUARTER:"QUARTER",MONTH:"MONTH",ABSMONTH:"MONTH",WEEK:"WEEK",ABSWEEK:"WEEK",ABSDAY:"DAY"};function oP(t){return nP[t.getDay()]}function iP(t){var e=new Date(t.getFullYear(),0,1);return Ue(((t-e)/864e5+e.getDay()+1)/7)}function lP(t,e){var n=null;return t.reduce((function(t,a){return t[n=e.call(null,a)]=t[n]||[],t[n].push(a),t}),{})}function sP(t,e,n,a){var r=[];for(var o in t)if(t.hasOwnProperty(o)){var i=new xA(t[o],n,n,n);r.push(i),e?(i.leaf=!0,i.value=a?t[o].data.getTime():t[o].data,i.point=t[o].data.getTime(),i.tag=i.leaf?"leaf":"column",i.datatype={rows:"numeric",columns:a?"ordinal":"time",_columns:"time"},i.seriesname="manual",i.isDefined=!0):(i.value=o,i.point=t[o][0].data,i.children=t[o],i.tag=i.leaf?"leaf":"column",i.datatype="ordinal",i.depthbyrow="row"==i.tag?i.depthbyrow+1:i.depthbyrow,i.depthbycolumn=(i.tag,n),i.seriesname="manual",i.isDefined=!0)}return r}var cP={setScaleForRange:function(t){var e=this;return{_padding:function(e,n){t.copy();var a=e[0].node,r=e[e.length-1].node,o=t.bandwidth,i=o?Wt._getDiscreteRangeBand(t):Wt.getContinuousRangeBand(t,n),l=o?i.rangeBand:i.rangeBand/2,s=i.outerPaddingInPixel;t.firstPt=a,t.lastPt=r,t.innerPadding=l,t.outerPadding=s},_rangebandForFirstBranch:function(n){var a=n[0],r=n[n.length-1],o="point",i=t.bandwidth?t.bandwidth():null;if(e.groupByContinuousTime){if(i=0,na(e.tickValues[a.index+1])){e.tickValues[a.index],e.tickValues[a.index+1];var l=0==a.index?a.index:a.index-1,s=Wt.getContinuousRangeBand(t,e.tickValues,l).rangeBand;t.innerPadding=s}}else o="index";return t(r[o])-t(a[o])+this.getSpan(a,!0)+this.getSpan(r)+i},getSpan:function(e,n){return n&&e===t.firstPt||!n&&e===t.lastPt?t.outerPadding:t.innerPadding},_scale:t,pointProperty:t.bandwidth?"index":"point"}},update:function(t){var e=this;e.groupByDiscreteTime&&(t=wa(e.chart.dataObject.findXCategories(),t)),e.dataCount=0,e.tickValues=function(t,e){return t.map((function(t){return Go(t,0,e)}))}(t,e.columnInfo),e.process();var n=new wn.getComponent("GroupByTimeDataLayout");this.pivotLayout=new n({data:this.categories})},process:function(){var t=this,e=t.tickValues,n=wa(t.groupOrder,aP),a=t.groupByDiscreteTime,r=function(t){return t.map((function(t){return{YEAR:t.getFullYear(),QUARTER:si(t),MONTH:(e=t,eP[e.getMonth()]),WEEK:iP(t),DAY:oP(t),timestamps:t.getTime(),data:t};var e}))}(e),o=n.slice(0),i=o.shift(),l=sP(lP(r,(function(t){return t[i]})),!1,0,a);t.categories=function t(e,n,r){var o,i=n.shift();return e.forEach((function(e){i?(o=lP(e.children,(function(t){return t[i]})),e.children=sP(o,!1,r,a),t(e.children,n.slice(0),r+1)):e.children=sP(e.children,!0,r,a)})),e}(l,o.slice(0),1)},getPossibleGroupBy:function(t,e){var n=t[0],a=t[t.length-1],r=n.getFullYear()===a.getFullYear(),o=e[0],i=oi(t[t.length-1]-t[0]);for(var l in i)if(i.hasOwnProperty(l)&&(i[l]>1||"YEAR"===l&&!r)){o=l;break}return o}};tP.getAutoGroupOrder=function(t){var e=aP.indexOf(rP[t]);return aP.slice(0,e)},Ta(tP,pi.HierarchicalDataAdapter),Aa(tP.prototype,cP),pi.HierarchicalTimeDataAdapter=tP,pi.prototype.getMinMaxX=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(this.chartObj.systemConf,this.dataset.getColumn("x")),r={},o=uc("x",this.chartObj.axes.rotated);r.plotBound={dimension:o==Kr||o==Jr?"width":"height",customPlotBound:this.chartObj.systemConf.chart,plotSize:this.chartObj.plotarea,defaultPlotSize:this.chartObj.plotarea,boundExtreme:0};var i=uh("x",n,this.chartObj,t,null,e,!0),l={type:"numeric",field:a,scaleType:a.scaleType,reverse:this.xaxisData.reversed,data:[],domain:{operators:i,evaluator:ah},range:{operators:r,evaluator:od},outerPadding:t};this.chartObj.viewFlow&&this.chartObj.viewFlow.scales[a.id]&&Bu(l,this.chartObj.viewFlow.scales[a.id].conf);var s=new pd("x",n,l,this.chartObj),c=s._parseDomain();return this.xRange||(this.xRange=s.config.tempDomain),c},pi.prototype.getCategories=function(t,e){var n,a,r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,l=this,s=l.chartObj,c=l.hierarchical,u=l.categoriesStore,d=na(c)&&c.categoryTree&&"x"===t&&0===e||s.dataObject.isWaterfallEnabled,h=s.systemConf;if(e=e||0,o&&Gn(h,"chart.brush.".concat(t,"[").concat(e,"].categories"))&&(i=h.chart.brush[t][e].categories,!d))return i;if(h.viewParser&&h.viewParser.scales){var f,p=h.metadata,g=p.columns[p.axes[t][e]].id;h.viewParser.scales.map((function(t){t.id===g&&(f=t)}));var v=Gn(f,"domain.operators.extremes")&&f.domain.operators.extremes;if(v&&ua(v[0]))return Hn(v[0])}if(!(l.isAxisCategory||l.isPolarAxisCategory||s._isAxisCategory()))return[];if(c&&(a=c.pivotLayout.getRootNodeList("row"),r=c.pivotLayout.getRootNodeList("column")),"x"===t){if(na(c)&&c.groupByTime)n=e>0?r.getDomainForBranch(e-1):c.groupByDiscreteTime?wa(l.xaxisData.categories,u.x.sort(B)):r.getDomainForCluster(0);else if(c){var m=r.getLeavesCount(),y=r.getCount(),b=h.chart.axes.xaxis.uniformLeafScale;n=e>m-1?r.getDomainForBranch(e-m):m>1?b?r.getUniqueDomainForCluster(0):r.getDomainForClusterSet(0,e):y?r.getDomainForCluster(0):l.xaxisData.categories||r.getDomainForCluster(0)}else n=l.xaxisData.categories;e=""}else n=na(c)&&(a.getCount()||a.hasMultiCluster())?a.getCount()&&e>a.getLeavesCount()-1?a.getDomainForBranch(e-a.getLeavesCount()):a.getDomainForCluster(0):l.yaxesData[e].categories;return na(n)&&0!==n.length||(n=u[t+e]),"y"!==t||c||u["y".concat(e)].enabled||(n=["NoData","NoData"]),d&&ua(i)&&(n=i.map((function(t){return n[t]}))),n},pi.prototype.getXYvalue=function(t,e,n,a,r,o,i,l,s){var c=this.yaxesData,u=this.dataset,d=this.chartObj;if(this.isPolarAxisCategory){var h=c[r].reversed&&!e?a.domain().length-1:0,f=n(u.getX(o)),p=e?a(o.y+o.y0):a(u.getY(o,r))+(null!=a.bandwidth?a.bandwidth()/2:0),g=xx(p=Ge(p,a.range()[h]),f);return"x"===i?g[0]:g[1]}if(this.isFlowChartCategory){var v=o._centroid;if(!o._centroid||"legendFilter"===d.phase){var m=this.chartObj.renderer[0].highlighter.getPolygon(o);v=m.length>1?o._centroid=Ft(m):m[0]}return"x"===i?v[0]:v[1]}switch(i){case"x":if(t)return e?a(o.y+o.y0):a(u.getY(o,r,s))+(null!=a.bandwidth?a.bandwidth()/2:0);var y=u.getX(o);return n(y)+(null!=n.bandwidth?n.bandwidth(y)/2:0);case"y":if(t){var b=u.getX(o);return n(b)+(null!=n.bandwidth?n.bandwidth(b)/2:0)}return e?a(o.y+o.y0):a(u.getY(o,r,s))+(null!=a.bandwidth?a.bandwidth()/2:0);case"z":return mh(o,u,d)}},pi.prototype.getTransRectValue=function(t,e,n,a,r,o,i){var l=this.dataset,s=r&&r.yscale,d=r&&r.addRangeBand(s),h=r&&"waterfall"==r.charttype,f=r&&r.stacked||h,p=r&&l.getY(e,r.yaxiscolumnorder)instanceof Array,g=r&&(s.bandwidth?s.ordinalRange[0]+d:s.range()[0]),v=r&&s.range()[1];switch(this.dataset.yAccessor=this.isPercentChart?function(t){return t.y}:this.dataset.getY,t){case"x":if(r.axisrotated){var m=l.getY(e,r.yaxiscolumnorder);i=null!=i?i:p?m[0]<m[1]?0:1:null;var y=this.dataset.yAccessor(e,r.yaxiscolumnorder,i);return s.bandwidth?s.origRange[0]:s(f?Xe(e.y0,e.y+e.y0):null!=i||p?y:null!=r.hasNegValue?y<r.hasNegValue?y:r.hasNegValue:Xe(y,s.domain()[0]))}var b=l.getX(e);return(r.stacked?r.bandwidth1(b)+r.bandwidth2(r.stackGroupIndex):r.bandwidth1(b)+r.bandwidth2(r.barDatasetIndex+n))+r.padding;case"y":if(r.axisrotated){b=l.getX(e);return(r.stacked?r.bandwidth1(b)+r.bandwidth2(r.stackGroupIndex):r.bandwidth1(b)+r.bandwidth2(r.barDatasetIndex+n))+r.padding}m=l.getY(e,r.yaxiscolumnorder);i=null!=i?i:p?m[0]>m[1]?0:1:null;y=this.dataset.yAccessor(e,r.yaxiscolumnorder,i);return f?s(Ge(e.y0,e.y+e.y0))+d:s(null!=s.bandwidth||p?y:Ge(r.hasNegValue||0,y))+d;case"width":if(r.axisrotated){y=s(y=p?u(l.getY(e,r.yaxiscolumnorder)):this.dataset.yAccessor(e,r.yaxiscolumnorder,i));var x=null==r.hasNegValue?p?s(this.dataset.yAccessor(e,r.yaxiscolumnorder,0)):g:s(p?c(l.getY(e,r.yaxiscolumnorder)):r.hasNegValue);return i=p?1:null,s.bandwidth?y+d:f?Ze(s(e.y+e.y0)-s(e.y0))+d:(Ze(v-x-(v-y))||0)+d}return r.barWidth;case"height":if(r.axisrotated)return r.barWidth;y=s(y=p?u(l.getY(e,r.yaxiscolumnorder)):this.dataset.yAccessor(e,r.yaxiscolumnorder,i))+d;x=null==r.hasNegValue||p?p&&!f?s(c(l.getY(e,r.yaxiscolumnorder))):g:s(r.hasNegValue);return i=p?1:null,s.bandwidth?Ze(s.origRange[0]-y):f?Ze(x-s(e.y+e.y0)-(x-s(e.y0)))+d:Ze(x-y);case"radius":return Ia(o)}},pi.prototype.findXCategories=function(t){var e=this,n=e.categoriesStore,a=e.processedseriesData,r=e.dataset,o=n.x;return a.forEach((function(e,n){var a=e.disabled&&!t,i=e.data;a||null==i||i.constructor!=Array||i.map((function(t,e){if(null!=t&&t.constructor==Array)return t.map((function(t){var e=r.getX(t);null!=e&&-1==o.indexOf(e)&&o.push(e)}))}))})),o},pi.prototype.storeCategories=function(t,e,n,a,r,o,i,l){var s=this,c=s.dataset,u=s.categoriesStore,d=u.x,h=u["y".concat(i)],f=pi.helpers,p=f.isCatNull(c,"x"),g=f.isCatNull(c,"y",i);e?t.map((function(e,a){if(!t.disabled&&ua(e))return e.map((function(t){var a=c.getActualX(t),r=n.length>0?c.getGroupByValues(t,n):null;a>s.lastCategoryValue&&!s.needXCategoriesSorting?s.lastCategoryValue=a:s.needXCategoriesSorting||-1!=d.indexOf(a)||(s.needXCategoriesSorting=!0),!p(a)&&(-1==d.indexOf(a)||l)&&d.push(a),null!=r&&(e.groupByVal=r,t.groupByVal=r,-1==u.subseries.indexOf(r)&&u.subseries.push(r))}))})):r!==To&&o!==To||t.map((function(e,n){if(!t.disabled&&ua(e))return e.map((function(t){var e=c.getActualX(t),n=c.getY(t,i);r!==To||p(e)||(l||-1===d.indexOf(e))&&d.push(e),o===To&&(a===Gt.arearange||a===Gt.gantt?(na(n)&&-1===h.indexOf(n[0])&&h.push(n[0]),na(n)&&-1===h.indexOf(n[1])&&h.push(n[1])):!g(n)&&-1===h.indexOf(n)&&h.push(n))}))}))},pi.prototype.isstacked=function(t){var e=this.data,n=e.chart.plot.plotoptions,a=this.stackedChart,r=pi.helpers;if(na(t)){var o=r.getChartType(t,Eo);return n=n[t=r.getChartType(t,"string")],o===Gt.stkdarea||o===Gt.stkdbar||qa(_e.stacked,o)&&fa(n,"stacked.enabled")}if(Xn(a)){var i=this.allChartTypes||r.getAllChartTypes(e),l=this;this.stackedChart=a=i.some((function(t){return l.isstacked.call(l,t)}))}return a},pi.prototype.isStackedPercent=function(){var t=this.dataset.seriesTypes,e=this.data.chart.plot.plotoptions;return _e.stackedPercent.some((function(n){return t.has(n)&&e[we.get(n)].stacked.showAs===Ad}))},pi.prototype.isStackedSort=function(){var t,e=this.dataset.seriesTypes,n=this.data.chart.plot.plotoptions;return _e.stacked.some((function(a){if(e.has(a)&&n[we.get(a)].stacked.sort)return t=n[we.get(a)].stacked.sort,!0}))?t:null};var uP=pi.prototype;function dP(t,e,n){this.values=[],this.minmaxY=[],this.stackeddata=[],this.stackedChart=null,this.hasNegativeValue=[],this.baseline=[],this.xRange=null,this.yRange=[],this.domainCorrections={plotHeight:null,byDatalabels:{},forBubbles:{}},this.rangeCorrections={datalabels:{}},this.xaxisData=t.chart.axes.xaxis,this.yaxesData=t.chart.axes.yaxis,this.qualitativeRanges=null,this.groupedByStack=L(),this.categoriesStore=null,this.hierarchical=n.preProcessor.hierarchical,this.categoryHierarchy=this.hierarchical&&this.hierarchical.categoryTree,this.pivot=this.categoryHierarchy&&this.hierarchical.pivot,this.isHierarchy=n.preProcessor.isHierarchy,this.initialize=fr(pi.prototype.initialize,hP),pi.apply(this,arguments)}uP.getStackGroup=function(){var t=this;if(!t.isstacked())return pn;var e=t.cache;return e.stackGroup?e.stackGroup:e.stackGroup=t._createStackGroup()},uP._createStackGroup=function(){var t,e=this,n=e.chartObj.seriesdata,a=e.globalChartType,r=pi.helpers,o={},i=function(t,e){var n;e=Ma(e),o[t]=o[t]||[],(n=o[t]).push.apply(n,_toConsumableArray(e))},l=e.data.seriesdata.stackGroup;return l&&(t=E(l),l.forEach((function(t,e){i("user_".concat(e),t)}))),n.forEach((function(n,o){var l=r.getChartType(n.type||a,Eo);if(e.isstacked(l)&&(!t||!qa(t,o))){var s=r.getParsedYAxisOrder(n.yaxiscolumnorder),c="".concat(s,"_").concat(l);i(c,o)}})),nr(o)},wn.setComponent("cartesianDataProcessor",dP),Ta(dP,pi);var hP=function(t){var e=this,n=e.domainCorrections,a=e.yaxesData,r=e.allChartTypes,o=e.data,i=e.chartObj,l=e.globalChartType,s=i.dataSplicer,c=s.getEncode(),u=s.getColumns(),d=c.y.length,h=o.metadata,f=c,p=o.chart.plot.plotoptions,g=e.isstacked(),v=e.dataset,m=e.categoriesStore={},y=e.processedseriesData,b=pi.helpers;e.hierarchical&&!e.hierarchical.groupByTime&&na(t)&&(e.hierarchical.update(),e.chartObj.seriesdata=e.hierarchical.getSeries()),e.xRange=null,e.yRange=[],e.qualitativeRanges=null,e.cache={},n.plotHeight=null,n.forBubbles={},e.lastCategoryValue=0,e.isBubbleEnabled=!1,e.noofBarEnabledSeries=0,e.noofAreaEnabledSeries=0,e.noofAreaRangeEnabledSeries=0,e.noofBoxplotEnabledSeries=0,e.noofBarRangeEnabledSeries=0,e.noofGanttEnabledSeries=0,e.isContinousChart=!0,e.isPercentChart=!1,m.x=[],m.z=[[0]],m.subseries=[],v.hasNullFormatter={},e.seriesExtermes=[],e.seriesAssist=[];var x=i.axes.y.groups,C=i.axes.y.leaves;i.cache.data={},i.cache.search={},i.cache.customPoints={},i.cache.correction={};for(var k=0;k<d;k++)m["y".concat(k)]=[],e.seriesExtermes[k]=[],!na(a[k])&&(a[k]={}),x[k]=x[k]||{},x[k].disabled=!0,C[k]=C[k]||{},C[k].disabled=!1;if(ua(y)){var w,_,S=f.x?v.getColumn("x"):null,O=S?S.datatype:null,A=na(f.z),T=b.groupByDataIndices(h,i),P=function(t){return qa(r,t)},L=u[c.x].datatype;e.hasZaxis=na(v.zidx)&&_e.zaxis.some(P),e.isFlowChartCategory=_e.flow.some(P),e.needXCategoriesSorting=!1,(e.pivot?Do(e):[{data:y}]).forEach((function(t){t.data.forEach((function(t){var n=t.disabled,a=b.getChartType(t.node&&t.node.type||t.type||l,Eo);e.isBubbleEnabled=e.isBubbleEnabled||!n&&wl(a),e.isWaterfallEnabled=e.isWaterfallEnabled||!n&&_l(a),e.pieWithAxis=e.pieWithAxis||!n&&a==Gt.bubblepie,e.noofBarEnabledSeries+=Cl(a)&&!n?1:0,e.noofAreaEnabledSeries+=a!=Gt.area&&a!=Gt.stkdarea||n?0:1,e.noofAreaRangeEnabledSeries+=a!=Gt.arearange||n?0:1,e.noofBoxplotEnabledSeries+=a!=Gt.boxplot||n?0:1,e.noofBarRangeEnabledSeries+=a!=Gt.barrange||n?0:1,e.noofGanttEnabledSeries+=a!=Gt.gantt||n?0:1,e.isContinousChart=e.isContinousChart&&(a==Gt.line||Vi(a)||Sl(a))}))})),y.forEach((function(t,n){var a=t.disabled,o=t.data,s=b.getChartType(t.type||l,Eo),c=b.getParsedYAxisOrder(t.yaxiscolumnorder),u=v.getDataType("y",c);if(ua(o)&&na(v.zidx)&&qa(_e.zaxis,s)&&e.saveEncode("z",0,n),!a&&ua(o)){m["y".concat(c)].enabled=!0,x[c].disabled=!1,w=s===Gt.waterfall&&null==w,e.seriesAssist[n]={};var d=v.getDataType("x",null,r),h=v.getColumn("y",c);na(v.hasNullFormatter.x)||(v.hasNullFormatter.x=!(d!==To||!Gn(S[O],"nullformatting"))),na(v.hasNullFormatter["y".concat(c)])||(v.hasNullFormatter["y".concat(c)]=!(u!==To||!Gn(h[h.datatype],"nullformatting"))),e.saveEncode("x",0,n),e.saveEncode("y",c,n),Bi.isQuantileColorScale(i)&&e.saveEncode("color",0,n);var f,y=e.isstacked(s),C=Ll(we.get(s),vi)&&p.bar.showAs;if(y||C)if(!e.pivot){f=$d(e.getStackGroup(),n),e.saveEncode("stack",f,n),e.seriesAssist[n].layout=["stack"],e.seriesAssist[n].stackIndex=f;var k=e.getEncode("stack",f),P=wn.getComponent("stackLayout");k.layout=k.layout||new P,hm(e,o,n,f,s)}_=_||C,e.storeCategories(o,g,T,s,d,u,c,w),e.setExtremes(o,g,u,s,A,c)}}));var M=fa(i.userdata,"chart.axes.xaxis.categories");if(e.isAxisCategory&&L!==To&&e.needXCategoriesSorting&&(!na(M)||na(M)&&0===M.length)&&m.x.sort(B),e.isCombinationalChart=e.pivot?Gi(i).values().length>1:er(r,(function(t){return we.get(t)})).length>1,e.isStackedPercentChart=g&&e.isStackedPercent(),e.isPercentChart=e.isStackedPercentChart||_,e.pieWithAxis?e.bubblepieData=e.processBubblePieData():e.isFlowChartCategory&&e.processSankeyData(),(g||e.isPercentChart)&&!e.isWaterfallEnabled)if(e.pivot){var D=e.hierarchical.pivotLayout,I=D.getRootNodeList("row"),R=D.getRootNodeList("column"),z=D.getRootNodeList("layer").panes;I.hasMultiCluster(),R.getBranchesCount(0),I.getBranchesCount(0);nr(z).forEach((function(t,n){t.data.forEach((function(a,r){var o="".concat(t.row,"_").concat(t.column),i=n+r;e.saveEncode("stack",o,n,a.node),e.seriesAssist[i]=e.seriesAssist[i]||{},e.seriesAssist[i].layout=["stack"],e.seriesAssist[i].stackIndex=o;var s=e.getEncode("stack",o),c=wn.getComponent("stackLayout");s.layout=s.layout||new c;var u=b.getChartType(t.data.type||l,Eo);hm(e,t.data,i,o,u)})),um(t.data,v,e),dm(t.data,v,e)}))}else um(y,v,e),dm(y,v,e);if(e.isPercentChart)!function(t,e){Oa(t,(function(t,n){var a=t.seriesData,r=t.layout;a.map((function(t){var n=E(t.data);r.toPercent(n,(function(t){return e.getX(t)}))}))}))}(e.getEncode("stack"),v)}},fP=dP.prototype;function pP(t,e){this.chart=t,this.renderer=e}fP.getSeriesData=function(){var t=this,e=this.chartObj;if(na(t.hierarchical)&&t.hierarchical.categories){var n=t.hierarchical.getSeries();return e.seriesdata=n,n}return e.seriesdata},fP.containsNegativeData=function(t){return this.hasNegativeValue[t]},fP.saveBaseLine=function(t,e,n,a){var r=this,o=r.dataset.getDataType("y",t),i=pn;if(o===Eo){var l=r.baseline[t],s=r.isstacked()||r.isPercentChart;i=!na(l)||s||a&&!ea(l,e)?n<0||e[0]<0?0:pn:l}r.hasNegativeValue[t]=i},fP.getMinMaxZ=function(){return j(E(this.categoriesStore.z))},fP.updateSeriesdatabyCategories=function(t,e,n,a,r,o){var i=this.dataset,l=this.chartObj,s=pi.helpers,c=s.isCatNull(i,"x"),u=s.isCatNull(i,"y",a),d=M(),h=0,f="gantt"===l.chartTypes[0].name;return wa(l.systemConf.chart.plot.allowDuplicateCategories,f)?t:t=t.filter((function(t){var l=!0,s=i.getX(t);if(e&&(l=l&&!c(s)&&e.indexOf(s)>-1),n){var f=i.getY(t,a);l=l&&!u(f)&&n.indexOf(f)>-1}return e&&r&&l&&(d.has(s)?l=!1:d.add(s)),l?(t._filter=!1,t.counter=h++):t._filter=!0,t.subseriesIdx=o||0,l}))},fP.setExtremes=function(t,e,n,a,r,o){var i=this,l=i.dataset,s=i.categoriesStore.z;if(((n===Eo||n===Po)&&!e||r)&&!t.disabled&&ua(t)){var c=E(t);if(r){var u=j(c,(function(t){return l.getZ(t)}));s.push(u)}if(n===Eo||n===Po){var d;if(_e.rangePlot.has(a))if(c){var h=c.map((function(t){return l.getY(t,o)})),f=h.length&&h[0]?E(h):[];d=j(f)}else d=j([]);else d=j(c,(function(t){return l.getY(t,o)}));i.seriesExtermes[o].push(d)}}},fP.getDomain=function(t,e,n){var a,r;this.hierarchical&&(a=this.hierarchical.pivotLayout.getRootNodeList("row").getCount(),r=this.hierarchical.pivotLayout.getRootNodeList("column").getCount());var o="x"==e?r:a;return this.hierarchical&&o&&(!this.hierarchical.groupByDiscreteTime||!n)||this.isWaterfallEnabled?tt(t.length):t},pi.prototype.extendOuterpadding=function(t,e,n,a,r,o,i){var l=this.chartObj;e=j(e);var s=b().domain(t).range(e).paddingInner(a).paddingOuter(r),c=Object.keys(sh).map((function(t){return l.cache.correction[t+"-"+o+"-"+i]||[0,0]})),d=u(E(c));return d?d-(s(s.domain()[0])-s.range()[0]):0};var gP=pP.prototype;function vP(t,e){this.chart=t,this.renderer=e,Aa(vP.prototype,pP.prototype)}function mP(t,e){this.chart=t,this.renderer=e}gP._defaultH=function(){return[{shape:br,path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:Kg}]},gP.data=function(t){var e=this.chart,n=this.renderer,a=n.commonRendererProp().params;return function(){e.cache.data[t._key]||(e.cache.data[t._key]={});var r,o=e.cache.data[t._key];if(!na(o._x)){var i=e.dataObject.getTransRectValue("x",t,t.subSeriesIndex,0,n.commonOption),l=e.dataObject.getTransRectValue("y",t,t.subSeriesIndex,0,n.commonOption),s=e.dataObject.getTransRectValue("width",t,t.subSeriesIndex,0,n.commonOption),c=e.dataObject.getTransRectValue("height",t,t.subSeriesIndex,0,n.commonOption),u=n.commonRendererProp().parser,d=u&&u.helpers.positionComponent[u.KEY].coordinates;if(d){var h=d(t,a.datasetIndex,{x:i,y:l,width:s,height:c});h=fc(h.x,h.y,h.width,h.height,0,a.yaxisreversed,a.axisrotated),t.updatedCoordinates={x:h.x1,y:h.y1,widthT:h.x2,heightT:h.y2,width:h.width,height:h.height}}else delete t.updatedCoordinates;r=fc(i,l,s,c,0,a.yaxisreversed,a.axisrotated),o._x=t._x=o._x||r.x1,o._y=t._y=o._y||r.y1,o._width=t._width=o._width||s,o._height=t._height=o._height||c,o._widthT=t._widthT=o._widthT||r.x2,o._heightT=t._heightT=o._heightT||r.y2,o._uid=t._uid=e.dataset.getX(t),o._point=t}return o._visible=t._visible=Fl(e,t),t}},gP.options=function(t){var e=this.chart,n=this.renderer,a=n.commonRendererProp().params,r=a.gvp("border")||{},o=r.show?r.radius:0,i=Fs(this.chart,Ns(a.commonPlotOptions,this.chart)?wa(t.categoryIndex,t.sortedItemIndex):t.seriesIndex,t,t.seriesIndex),l=n.commonRendererProp().parser,s=l&&l.helpers.positionComponent[l.KEY].radius;return o=s?s(t,a.datasetIndex,o):o,{radius:e.dataObject.getTransRectValue("radius",null,null,null,n.commonOption,o),color:i}},gP.renderingContext=function(){return Jg.get("bar").call(this,this.chart)},gP.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},gP.path=function(t,e){var n,a=this.chart.systemConf.chart.axes.yaxis[t.yaxisOrder||0].reversed,r=(t=t._data())._x,o=t._y,i=t._widthT,l=t._heightT;t.updatedCoordinates&&(r=(n=t.updatedCoordinates).x,o=n.y,i=n.widthT,l=n.heightT);var s=pc(r,o,i,l,this.options(t).radius,a,this.chart.axes.rotated,!0),c=e.context.call(this),u=dc(c,"path",[1],".","class","highlight".concat(t.paneid).concat(t.seriesIndex).concat(t.subSeriesIndex).concat(t.itemIndex));return c.style("display",""),u.style("display","").attr("d",s).attr("transform","translate(".concat(this.chart.plotarea.left,",").concat(this.chart.plotarea.top,")")),u},vP.prototype.levelmarker=function(t){var e=this.chart,n=this.renderer,a=e.eventHandler.bulletEvents;if(!Vt.BulletEvent)return[];if(!a){var r=this.renderer.commonRendererProp().params;e.eventHandler.bulletEvents=new Vt.BulletEvent(e,n.commonOption,r.xscale,r.yscale)}var o=e.eventHandler.bulletEvents.getCurrentRectangles(t);return o.map((function(n,a){n._uid=e.dataset.getActualX(t),n._data=function(){var r=e.eventHandler.bulletEvents.getCurrentRectangles(t)[a];return r._uid=n._uid,r}})),o.disabled=function(){return e.seriesdata[t.seriesIndex].disabled},o},Ta(mP,pP);var yP=mP.prototype;function bP(t,e){this.chart=t,this.renderer=e}yP._defaultH=function(){var t=this;return[{shape:"rect",path:Za(this).path,data:Za(this).data,context:Za(this).renderingContext,translate:Za(this).translateContext,styles:Kg},{shape:"rect",path:this.levelMarker,context:this.renderingContext,translate:Za(this).translateContext,styles:function(e){return t.getStylesForLevelMarker.call(t,e)}},{shape:"marker",path:this.markerPath,context:this.markerContext,translate:Za(this).translateContext,type:"start"},{shape:"marker",path:this.markerPath,context:this.markerContext,translate:Za(this).translateContext,type:"end"}]},yP.levelMarker=function(t,e){this.chart;var n=this.renderer.commonRendererProp().params.levelMarker||{},a=this.renderer.getBarLevelMarkerProp(t,t.subSeriesIndex,t.itemIndex,this.renderer,this.renderer.commonOption),r=pc(a.x,a.y,a.width,a.height,this.chart.dataObject.getTransRectValue("radius",null,null,null,0),pn,this.chart.axes.rotated),o=e.context.call(this),i=dc(o,"path",n.enabled?[1]:[],".","id","levelMarkerpath");return o.style("display",""),i.style("display","").attr("d",r).attr("transform","translate(".concat(this.chart.plotarea.left,",").concat(this.chart.plotarea.top,")")),i},yP.markerPosition=function(t,e){this.renderer;var n,a,r=function(t,e){return e?"start"==t?"left":"right":"start"==t?"top":"bottom"}(e.type,this.chart.axes.rotated);switch(r){case"left":n=t._x,a=t._y+t._height/2;break;case"right":n=t._x+t._width,a=t._y+t._height/2;break;case"top":n=t._x+t._width/2,a=t._y;break;case"bottom":n=t._x+t._width/2,a=t._y+t._height}return{x:n,y:a}},yP.markerPath=function(t,e){var n=this.markerOptions(t,e.type),a=n.options,r=this.markerPosition(t,e);if(n.enabled){var o=e.context.call(this),i=e.translate.call(this),l=dc(o,"g",[1],".","class","yrangePos".concat(e.type));return ap(l,null,a,{color:n.color,symbolSize:{inner:n.size.inner,outer:n.size.outer},transform:[r.x,r.y],imageSize:15},this.chart),o.attr("transform","translate(".concat(i[0],",").concat(i[1],")")),l}},yP.markerOptions=function(t,e){this.chart;var n=this.renderer.commonRendererProp().params,a=n.commonPlotOptions.hoveroptions[e],r=(r=this.chart.seriesdata[t.seriesIndex].plotoptions)&&r.hoveroptions?r.hoveroptions[e]:{},o=Rn(a,r,!0),i=n.commonPlotOptions.marker[e],l=r&&r.marker?r.marker[e]:{},s=Rn(i,l,!0);o=Rn(s,o,!0);return{enabled:n.commonPlotOptions.marker&&n.commonPlotOptions.marker.enabled,options:o,symbol:o.symbol,_size:o.size,color:this.options(t).color,size:{outer:2*o.size,inner:1*o.size}}},yP.markerContext=function(){return Jg.get("scatter").call(this,this.chart)},yP.getStylesForLevelMarker=function(t){var e=this.renderer.commonRendererProp().params.levelMarker||{},n=this.options(t);return{fill:e.color||n.color}},Ta(bP,pP);var xP=bP.prototype;function CP(t,e,n,a,r,o){var i=t.dataObject.getTransRectValue("x",a,0,0,e),l=t.dataObject.getTransRectValue("y",a,0,0,e),s=t.dataObject.getTransRectValue("width",a,0,0,e),c=t.dataObject.getTransRectValue("height",a,0,0,e),u=fc(i,l,s,c,0,n.yaxisreversed,n.axisrotated);return{_data:function(){return{_x:u.x1,_y:u.y1,_width:s,_height:c,_widthT:u.x2,_heightT:u.y2,_point:r,type:o,_uid:a._uid}}}}function kP(t,e,n){var a=[],r=n.xidx,o=n.yidx(t.yaxisOrder),i=n.getX(t);return a[r]=i,a[o]=e,a.index=t.index,a}xP._defaultH=function(t){return[{shape:"whisker",data:xP.data,segments:xP.segments,path:this.whiskerPath,context:this.renderingContext,translate:this.translateContext},{shape:"median",data:xP.data,segments:xP.segments,path:this.medianPath,context:this.renderingContext,translate:this.translateContext},{shape:br,path:Za(this).path,data:Za(this).data,context:Za(this).renderingContext,translate:Za(this).translateContext,styles:Kg}]},xP.whiskerPath=function(t,e){Kf(Pm("boxplot.whisker").call(this.renderer.commonRendererProp().parser,{data:[t]},"highlight",!0),e.context.call(this))},xP.medianPath=function(t,e){Kf(Pm("boxplot.median").call(this.renderer.commonRendererProp().parser,{data:[t]},"highlight",!0),e.context.call(this))},xP.renderingContext=function(){var t=Jg.get("scatter").call(this,this.chart);return t.node().setAttribute("transform","translate(0,0)"),t},xP.box=function(t){var e,n,a=this.chart,r=this.renderer,o=this.renderer.commonRendererProp().params,i=this.chart.dataset,l=(i.getX(t),i.getY(t,t.yaxisOrder)),s=ua(l)?l[0]:o.yscale.domain()[0],c=ua(l)?l[1]:l,u=o.whiskers,d=(a.dataObject.getTransRectValue,r.commonOption);u.enabled&&(s=s<(e=t[u.dataindex][0])?s:e,c=c>(n=t[u.dataindex][1])?c:n),a.cache.data[t._key]||(a.cache.data[t._key]={});var h=a.cache.data[t._key];return h._box=t._box=h._box||(u.enabled?CP(a,d,o,kP(t,[s,c],i),t):CP(a,d,o,t,t)),t._box},xP.levels=function(t,e){var n=this.chart,a=this.renderer,r=this.renderer.commonRendererProp().params,o=r.median,i=r.whiskers,l=this.chart.dataset,s=(l.getX(t),l.getY(t,t.yaxisOrder)),c=t[o.dataindex],u=i.enabled&&t[i.dataindex][0],d=i.enabled&&t[i.dataindex][1],h=r.yscale(c),f=5*i.strokeWidth,p=r.axisrotated?-1:1,g=(n.dataObject.getTransRectValue,a.commonOption),v=kP,m=r.yscale.invert;n.cache.data[t._key]||(n.cache.data[t._key]={});var y=n.cache.data[t._key];if(!y._levels){if(!i.enabled&&!o.enabled)return y._levels=t._levels=null,t._levels;var b,x,C,k,w,_=[];C=CP(n,g,r,v(t,[s[0],m(h+f*p)],l),t,"high"),k=CP(n,g,r,v(t,[m(h-f*p),s[1]],l),t,"low"),_.push(C,k),(i.enabled||e)&&(b=CP(n,g,r,v(t,[u,s[0]],l),t,"whisker0"),x=CP(n,g,r,v(t,[s[1],d],l),t,"whisker1"),_.push(b,x)),(o.enabled||e)&&(w=CP(n,g,r,v(t,[m(h+f*p),m(h-f*p)],l),t,"median"),_.push(w)),y._levels=t._levels=_}return t._levels},pP.prototype.box=xP.box,pP.prototype.levels=xP.levels,Jp.bar=function(){var t,e,n,a,r,o;function i(r,o,l,s){var c=t.params,u=c.chartObj,d=c.xscale,h=c.stacked,f=c.datasetIndex,p=c.axisrotated,g=c.commonPlotOptions,v=(c.color,c.paneColor),m=c.labelQueue,y=(c.hasNegValue,c.yaxiscolumnorder),b=c.dataset,x=c.legendOrderIndex,C=c.rendererIndex,k=u.systemConf,w=(u.plotarea,u.dataObject),_=pi.helpers;o=u.dataObject.categoryHierarchy?o[f]:u.seriesdata[f];var S=Ao(u)?"".concat(o.row,"_").concat(o.column):"0_0",O=Ui(u,S,f);if(e&&n){a=c.yscale;var A=u.dataset.getDataType("y",y),T=d.domain(),P=A==To?a.domain():null,E=(na(w.hierarchical)&&w.getCategories("x"),O.name,null),L=c.yaxisreversed=u.systemConf.chart.axes.yaxis[y||0].reversed,M=(c.xaxisreversed=u.systemConf.chart.axes.xaxis.reversed,o.plotoptions),D=c.gvp=Dn.getValueOfPlotOptions(M,g),I=O.value===Gt.bullet,R=D("targetMarker")||{},z=M&&M.levelMarker?Rn(g.levelMarker,M.levelMarker,!0):g.levelMarker,j=M&&M.border?Rn(g.border,M.border,!0):g.border,F=Ns(g,u),B=Bi.isQuantileColorScale(u),H=(i.fillColorFunc=Ls(u,x,S,E,null,null,null,c),Is(u,f,S,null,c),D("fillOpacity")),N=i.getParamValue=function(){return u.dataObject.getTransRectValue.apply(u.dataObject,Zn(arguments))},W=Nm(u.rendererConf[C],C,x),V=W.levelMarkerWidth;z.overlayRange="below";var Y=z.color,U={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},G=0,X=null,Z=null,q=0;na(j)&&oa(j.show)&&(G=na(j.size)?j.size:1,X=j.color,Z=j.style,q=j.radius,U=N("radius",null,null,null,W,q));var $=Gr(Z,null==G?2:G),Q=k.legend,K=function(t){for(var e in t)if(t.hasOwnProperty(e))return!!t[e];return!1}(U),J=(Q.patternPallete,Q.patternPallete,wa(R.size,V-2*wa(R.padding,W.padding/2))),tt=I?d.bandwidth():V,et=R.size;R.size=J=na(et)?I?Xe(J,tt/10):J:J/10;var nt,at=l&&l.gradient;if(na(l)&&(l=l.pattern||l),h&&z.enabled&&!na(l)){var rt=$d(w.getStackGroup(),f),ot=u.dataObject.getEncode("stack",rt);nt=ot&&ot.seriesIndices[0]===f}return o.disabled||(i.seriesdataAfterUpdate=[],o.data.forEach((function(t,n){var o=u.dataObject.updateSeriesdatabyCategories(Yn(t),T,P,y,!0);B&&na(s)&&(o=us.filterSelectionByColor(o,!0,s,u)),u.renderVisiblePointsOnly&&(o=_.filterPointsInViewport(u,o,"bar","x",f,n)),i.seriesdataAfterUpdate[n]=o,u.systemConf.chart.axes.xaxis.reversed&&(o=o.slice(0).reverse()),h&&z.enabled&&!na(l)&&T.length!=o.length&&Yt.render.bulletHelpers.addDummyDataForLevelmarker(o,T,b,y),o.forEach((function(t,o){var s=!u.container.select(".selection-canvas").empty(),d="selection-canvas"==r.canvas.className,g=u.cache.clickSelectionData,m=Fs(u,F?o:x,t,f,S);if(!d||!s||1!=t.clickSelection&&na(g[0])){if(z.enabled&&!na(l)&&(h&&nt&&0===n||!h)){var y=Yt.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(t,z,u,W,c,n,f),C=p?y.y:y.x,k=p?y.x:y.y,w=y.width,_=y.height;r.save(),r.beginPath(),r.fillStyle=Yt.render.bulletHelpers.getBulletLevelMarkerGradient(t,z,u,m,Y)||Ps((ua(z.color)?z.color[0]:z.color)||m,z.fillOpacity),Cp.roundedRect(r,C,k,w,_,U,L,p),r.fill(),r.closePath(),r.restore()}C=N("x",t,n,o,W),k=N("y",t,n,o,W),w=N("width",t,n,o,W),_=N("height",t,n,o,W),L&&(p?C-=w:k-=_),E=[w,_];var O=function(t,e){t.save(),t.translate(C,k),t.strokeStyle=Ps(m,H),t.fillStyle=e,K?(t.beginPath(),Cp.roundedRect(t,0,0,w,_,U),t.fill()):(t.beginPath(),t.rect(0,0,w,_),t.fill()),function(t,e,n,a){e>0&&(t.lineWidth=e,ua(a)&&a.length&&na(t.setLineDash)&&t.setLineDash(a),t.strokeStyle=n,t.stroke())}(t,G,X||m,$),t.closePath(),t.restore()};if(u.imagePallete){var A=ul(u,F?o:x,S);Hr.canvas_patterns.imageFill({x:C,y:k,context:r,name:A},O)}else{var T=na(l)?l:i.fillColorFunc(F?o:x,t,null,v,H,E,{x:C,y:k,width:w,height:_,context:r},!1);at&&O(r,at),O(r,T)}I&&!0===R.enabled&&!t.isDummy&&(C=e(b.getX(t))+tt/2,k=a(t[R.dataindex]),function(t,e,n,a,r,o){var i=5*n,l=wa(e.outerStrokeWidth,1),s=wa(e.innerStrokeWidth,1),c=e.outerStrokeColor,u=e.innerStrokeColor,d=e.outerFillColor,h=e.innerFillColor;na(e.outerFillOpacity)&&d&&(d=Ps(d,e.outerFillOpacity));na(e.outerStrokeOpacity)&&c&&(c=Ps(c,e.outerStrokeOpacity));na(e.innerFillOpacity)&&h&&(h=Ps(h,e.innerFillOpacity));na(e.innerStrokeOpacity)&&u&&(u=Ps(u,e.innerStrokeOpacity));na(e.dashStyle)&&(e.outerDashStyle=e.innerDashStyle=e.dashStyle);var f=Jp.scatter.getCache(e.symbol,i,c,l,d,u,s,h,e),p=f.adjustPosition,g=f.canvas,v=f.width,m=i+l/2+p;t.save(),o?(t.translate(r,a),t.rotate(90*ln)):t.translate(a,r);t.drawImage(g,-m,-m,v,v),t.restore()}(r,R,J,C,k,p))}}))}))),R.size=et,m.push({renderer:i,charttype:"bar",chartObj:u,rendererIndex:C,paneid:S,args:[o,x,null,null,null,C]}),i.chartRendered=!0,i}i.chartRendered=!0}return i.getHighlighter=function(t,e,n){if(i.highlighter)return i.highlighter;var a=n||Ui(t,null,e).name,r="bullet"==a,o="gantt"==a,l="boxplot"==a;return i.highlighter=r?new vP(t,i):o?new mP(t,i):l?new bP(t,i):new pP(t,i),i.highlighter},i.commonRendererProp=function(e){return arguments.length?(t=e,i):t},i.bandwidth1=function(t){return arguments.length?(e=t,i):e},i.bandwidth2=function(t){return arguments.length?(n=t,i):n},i.barDatasetIndex=function(t){return arguments.length?(r=t,i):r},i.shiftInfo=function(t){return arguments.length?(o=t,i):o},i},Tr.bar=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},levelMarker:{enabled:!1,color:["#d8d8d8"],fillOpacity:.9},datalabels:{animation:{enabled:!1},showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}},whiskers:{enabled:!1,columnindex:3,dataindex:2,size:"50%",color:"#d8d8d8",opacity:.9,strokeWidth:1,showOn:"overlay",events:{enabled:!0},hoveroptions:{strokeWidth:2,opacity:.9,color:"#d8d8d8"}}}},Yt.render.bulletHelpers=function(){},Yt.render.bulletHelpers.getLevelMarkerParams=function(t,e,n,a,r){var o,i,l,s,c=a.commonRendererProp().params,u=c.chartObj,d=c.yaxiscolumnorder,h=c.axisrotated,f=c.dataset,p=r&&r.yscale.range()[1],g=t[r.levelMarker.dataindex],v=f.getY(t,d),m=v[0],y=(v[1]-m)*g/100,b=r.yscale(m+y),x=h?0:r.levelMarkerPadding,C=h?r.levelMarkerPadding:0;o=u.dataObject.getTransRectValue("x",t,e,n,r)+x;var k=null==r.hasNegValue?r.yscale(f.getY(t,r.yaxiscolumnorder,0)):r.yscale(r.hasNegValue);return r.axisrotated?(i=a.getParamValue("y",t,e,n,r)+C,l=r.stacked?Ze(r.yscale(t.y+t.y0)-r.yscale(t.y0))+r.addRangeBand(r.yscale):(Ze(p-k-(p-b))||0)+r.addRangeBand(r.yscale),s=r.levelMarkerWidth||r.barWidth):(i=b,l=r.levelMarkerWidth||r.barWidth,s=r.stacked?Ze(k-r.yscale(t.y+t.y0)-(k-r.yscale(t.y0)))+r.addRangeBand(r.yscale):Ze(k-b)+r.addRangeBand(r.yscale)),{x:o,y:i,width:l,height:s}},Yt.render.bulletHelpers.getBulletLevelMarkerGradient=function(t,e,n,a,r){var o=t[e.dataindex]||[];if(null!=o&&!(o instanceof Array))return null;if(!o.length)return null;var i=e.color;if(r)r.constructor!=Array&&(e.color=[r]);else{e.color=[];var l=e.colorGamma||[.3,.9],s=Fn(a,[0,o.length-1],[+l[0],+l[1]]);e.color=o.map((function(t,e){return s(e)}))}var c,u=o.filter((function(t){return t<0}));if(u.length>0){var d=(c=o.slice()).indexOf(0);d>-1&&c.splice(d,1);var h=e.color;c=c.sort(H);for(var f=[],p=0;p<c.length;p++){var g=o.indexOf(c[p]);f.push(h[g])}e.color=f,c.splice(c.length-u.length,0,0),o=c}e.values=o;var v=Ht.threshold.overlay(n,"continous")(hn,e,0,"y");return u.length>0&&(o=c),e.color=i,v},Yt.render.bulletHelpers.ZC_BAR_getLevelMarkerRect=function(t,e,n,a,r,o,i){var l,s,d=t[e.dataindex]||[],h=na(e.dataindex),f=n.datalabels.hasFixedPosition,p=n.systemConf.chart.axes.yaxis[r.yaxiscolumnorder||0].reversed,g=a.stackGroupIndex,v=n.plotarea,m=r.stacked,y=r.axisrotated,b=r.hasNegValue,x=r.yaxiscolumnorder,C=r.dataset,k=r.yscale;n.eventHandler&&!n.eventHandler.bulletEvents&&Vt.BulletEvent&&(n.eventHandler.bulletEvents=new Vt.BulletEvent(n,a,r.xscale,r.yscale)),null==d||d instanceof Array||(d=[d]),h&&!d.length?l=s=0:(l=c(d),s=u(d));var w=C.getX(t),_=(m?a.bandwidth1(w)+(a.bandwidth2(g)||0):a.bandwidth1(w)+a.bandwidth2(a.barDatasetIndex+o))+a.levelMarkerPadding,S=h?k(y?Xe(0,l):Ge(0,s)):y&&null!=b?k(b):0,O=y?h?Ze(k(Ge(0,s))-k(Xe(0,l))):null!=b?Ze(v.width-k(b)):v.width:a.levelMarkerWidth,A=y?a.levelMarkerWidth:h?Ze(k(Xe(0,l))-k(Ge(0,s))):null!=b?k(b):v.height;if(!h)if(k.bandwidth){var T=k.ordinalRange,P=k.bandwidth()/2;y?(S=k.origRange[0],O=T[p?0:T.length-1]+P):(S=T[T.length-1]+P,A=T[p?T.length-1:0]+P)}else{var E,L,M;if(M=C.getY(t,a.yaxiscolumnorder),f){var D=n.dataObject.ZC_BAR_getRangeY(x);E=D[0],L=D[1]}else E=k.domain()[0],L=k.domain()[1];var I=[k(L),k(na(b)?b:E)];M<0&&(I=[k(na(b)?b:L),k(E)]),y?(I.reverse(),S=I[0],O=Ze(I[1]-I[0])):(S=I[0],A=Ze(I[1]-I[0]))}return{x:_,y:S,width:O,height:A}},Yt.render.bulletHelpers.addDummyDataForLevelmarker=function(t,e,n,a){var r=t.map((function(t){return n.getX(t)}));e.forEach((function(e,o){var i=e;if(r.indexOf(i)<0){var l=[];l.splice(n.xidx,0,i),l.splice(n.yidx(a),0,0),l.isDummy=!0,l.y=0,l.y0=0,l.index=o,t.splice(o,0,l)}}))};Yt.render.bulletHelpers;function wP(t,e,n,a){var r=a.chart.racing,o=r.jumpDuration,i=r.duration;return o=o>i?i:o,function(r,l){var s=a.chart.dataset.getX(r),c=$ZC.getComponent("utils.roundedRect"),u=a.helpers.position[e].end(r),d=n.get(s);d||(d=a.helpers.position[e].start(r),n.set(s,d));var h=d3.interpolate(d.x1,u.x1),f=d3.interpolate(d.y1,u.y1),p=d3.interpolate(d.x2,u.x2),g=d3.interpolate(d.y2,u.y2);n.set(s,u);var v,m,y,b,x=1*o/i,C=a.chart.dataObject.categoriesStore.x,k=a.chart.racing.prevFrameCategories,w=C.indexOf(k&&k[l]),_=s,S=t.data[0][w],O=S&&a.chart.dataset.getX(S),A=k&&k.indexOf(_),T=C.indexOf(_);O&&(y=k&&k.indexOf(O),b=C.indexOf(O)),m=y===T&&A===b;var P=u,E=S&&a.helpers.position[e].end(S),L=d,M=n.get(k[l]);if(m&&k.length===C.length){var D=L.x2,I=M.x2,R=(L.x2-P.x2)/i,z=(M.x2-E.x2)/i,j=M.meetingTime||(D-I)/(R-z);if(O!=_&&(P.meetingTime=j),(v=j/i>1?1:j/i)+x>1)v-=v+x-1;u.jumpStartTVal=v}return function(t){var e;if(M&&(M.meetingTime=null),P&&(P.meetingTime=null),na(v)){var n=t<=v+x;if(e=n?0:1,t>v&&n&&t<=1){e=(t-v)/((v+x>1?1:v+x)-v)}}else e=1,t<=x&&(e=1*t/x);return c(h(t),f(e),p(t),g(e),Ia(0),null,null,!0)}}}function _P(t){this.sampling=t.sampling}function SP(t,e,n,a){var r,o=[],i=0,l=0;for(r=a?i:l;r<n;)o.push(e.getPointAtLength(i)),i+=t,l++,r=a?i:l;return o}function OP(t,e,n){return{enabled:t.enabled,dataindex:t.dataindex,columnindex:t.columnindex,size:t.size,symbol:t.symbol||n||"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:t.color,outerStrokeOpacity:t.opacity,outerStrokeWidth:t.strokeWidth,outerStrokeColor:t.color,animation:e,hoveroptions:{size:t.hoveroptions.size||t.size,symbol:t.symbol||n||"line",innerFillColor:t.hoveroptions.innerFillColor||"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:t.hoveroptions.color||t.color,outerStrokeOpacity:t.hoveroptions.opacity||t.opacity,outerStrokeWidth:t.hoveroptions.strokeWidth||t.strokeWidth,outerStrokeColor:t.hoveroptions.color||t.color}}}function AP(t,e){this.chart=t,this.renderer=e}pi.prototype.overLevelMarker=function(t){var e=this;e.qualitativeRanges||(e.qualitativeRanges=[]);var n,a,r,o=pi.helpers,i=e.qualitativeRanges[t],l=e.getEncode("y",t).seriesData,s=o.getChartType(l[0].type||e.globalChartType,"string"),c=e.data.chart.plot.plotoptions[s],u=c.levelMarker,d=c.targetMarker,h=c.whiskers;return i||(i=e.qualitativeRanges[t]=[],l.forEach((function(t){var e=t.plotoptions||{};u=Rn(u,e.levelMarker),d=Rn(d,e.targetMarker),h=Rn(h,e.whiskers),n=u.dataindex,a=d.dataindex,r=h.dataindex,(u.enabled||d.enabled||h.enabled)&&(n||a||r?t.data.forEach((function(t){t.forEach((function(t){d.enabled&&na(t[a])&&i.push(t[a]),u.enabled&&na(t[n])&&(ua(t[n])?i=i.concat(t[n]):i.push(t[n])),h.enabled&&na(t[r])&&(i=i.concat(t[r]))}))})):u.enabled&&(ua(u.ranges)?i=E(u.ranges):na(u.values)&&(i=i.concat(u.values))))}))),h.enabled&&(e.hasWhiskers=!0),i.length||e.hasLevelMarker?j([].concat(_toConsumableArray(i),[0])):[]},pi.prototype.getLevelMarkerIndices=function(t){var e=this;e.qualitativeRanges||(e.qualitativeRanges=[],e.qualitativeRangesIndex=[]);var n,a,r,o=pi.helpers,i=e.qualitativeRanges[t],l=e.qualitativeRangesIndex[t],s=e.getEncode("y",t).seriesData,c=o.getChartType(s[0].type||e.globalChartType,"string"),u=e.data.chart.plot.plotoptions[c],d=u.levelMarker,h=u.targetMarker,f=u.whiskers,p=new Array(0);return l||(i=e.qualitativeRanges[t]=[],l=e.qualitativeRangesIndex[t]=[],s.forEach((function(t){var o=t.plotoptions||{};d=Rn(d,o.levelMarker),h=Rn(h,o.targetMarker),f=Rn(f,o.whiskers),n=d.dataindex,a=h.dataindex,r=f.dataindex,d.enabled&&(na(n)?p.push(n):ua(d.ranges)?i=E(d.ranges):na(d.values)&&(i=i.concat(d.values))),h.enabled&&na(a)&&p.push(a),f.enabled&&(e.hasWhiskers=!0),f.enabled&&na(r)&&p.push(r)})),e.qualitativeRangesIndex[t]=l=p,e.qualitativeRanges[t].values=i),{indices:l,values:e.qualitativeRanges[t].values}},pi.prototype.getStackingIndices=function(t){var e=this,n=e.getEncode("y",t),a=n.seriesData,r=n.seriesIndices,o=new Array(0),i=new Array(0),l=new Array(0),s=new Array(0);e.pivot&&(a=nr(e.hierarchical.pivotLayout.layers.panes));return a.map((function(t,n){var a=e.pivot?n:r[n],c=e.seriesAssist[a];if(qa(c.layout||[],"stack")){var u=e.pivot?"".concat(t.row,"_").concat(t.column):c.stackIndex;o.push(u),l.push(t)}else i.push(a),s.push(t)})),{_stackData:l,_nonStackData:s,stackIndices:o,nonStackseriesIndices:i}},Tm("bar.default",(function(t){var e,n,a,r=this,o=this,i=(t.data,this.builderC),l=i.animationOptions,s=this.chart.racing&&this.chart.racing.syncTransition,c=this.chart.systemConf.chart.plot.morph.enabled&&this.chart.oldSeriesInfo,u=i.liveUpdate,d={},h=this.chart.renderer[i.rendererIndex].commonRendererProp().datasetIndex(),f="bar";e={d:function(t){return o.helpers.position[f].start(t)}};var p=this.chart.racing&&this.chart.racing.racingBarInfoMap;p||(p=[]);var g=p[h];if(g=p[h]=g||L(),this.chart.racing)this.chart.racing.racingBarInfoMap||(this.chart.racing.racingBarInfoMap=p);else var v=setInterval((function(){r.chart.racing&&(r.chart.racing.racingBarInfoMap=p,clearInterval(v))}),10);if(s){var m=this.chart.racing,y=m.jumpDuration,b=m.duration;f="bar_racing",e={d:function(t){var e=o.helpers.position[f].start(t);if(y){var n=o.chart.dataset.getX(t);g.set(n,e)}return e}},n=[{transition:s,d:(y=y>b?b:y)?{property:"attrTween",to:wP(t,f,g,o)}:function(t){return o.helpers.position[f].end(t)}}],a={transition:s,d:y?{property:"attrTween",to:function(t,e){var n=o.chart.dataset.getX(t),a=$ZC.getComponent("utils.roundedRect"),r=o.helpers.position[f].exit(t),i=g.get(n);i||(i=o.helpers.position[f].start(t),g.set(n,i)),r.x1=i.x1,r.x2=i.x2;var l=d3.interpolate(i.x1,r.x1),s=d3.interpolate(i.y1,r.y1),c=d3.interpolate(i.x2,r.x2),u=d3.interpolate(i.y2,r.y2);g.set(n,r);var d=1*y/b;return function(t){var e=1;return t<=d&&(e=1*t/d),a(l(t),s(e),c(t),u(e),Ia(0),null,null,!0)}}}:function(t){return o.helpers.position[f].exit(t)}}}else c?n=[{duration:l._duration,d:{property:"attrTween",to:function(t,e){var n=o.helpers.position.bar_morphing.interpolator[e];return function(t){return o.helpers.position.bar_morphing.line_d3(n.map((function(e){return e(t)})))}}}},{duration:0,d:function(t){return o.helpers.position[f].end(t)}}]:u?n=[{duration:"redraw"==o.phase?l._duration:0,d:function(t){return o.helpers.position[f].end(t)}}]:(n=[{duration:"redraw"==o.phase?l._duration:0,delay:l._delay,d:function(t){return o.helpers.position[f].stop_1(t)}},{duration:l._duration,delay:l._delay,easing:l.easingType,d:function(t,e){var n=o.chart.dataset.getX(t),a=o.helpers.position[f].end(t);return g.set(n,a),a}}],a={duration:o.builderC.animationOptions._exitduration,d:function(t){return o.helpers.position[f].exit(t)}});this.chart.dataObject.hierarchical&&(d={levelbycolumn:function(t){return t.levelByColumn},levelbyrow:function(t){return t.levelByRow}});var x={mark:"g",selector:".subseries",data:function(){return t.disabled?[]:t.data},properties:{attrs:{class:function(t,e){return t.subseriesIdx=e,"subseries subseries_".concat(e)}}},anime:{exit:{delay:l._exitduration}},children:[{mark:"_rect",selector:".zc_bar",data:function(e,n){return t.disabled?[]:o.helpers.filterData(e)},dataAccessor:function(t){return o.chart.dataset.getX(t)},config:{enter:e,strokeWidth:o.helpers.styles.bar.strokeWidth,dashStyle:o.helpers.styles.bar.strokeDasharray,lineCap:"none"},anime:{update:n,exit:a},properties:{attrs:d,styles:{fill:function(t,e){return o.helpers.styles.bar.fill(t,e)},stroke:function(t,e){return o.helpers.styles.bar.stroke(t,e)},"fill-opacity":o.helpers.styles.bar.fillOpacity,opacity:o.helpers.styles.bar.opacity}}}]};return x})),Tm("bar.subdivider",(function(t){var e=this;return t.data,{mark:"g",selector:".subdividerseries",data:function(){return t.disabled||!e.builderC.stacked?[]:t.data},properties:{attrs:{class:function(t,e){return"subdividerseries subdividerseries_".concat(e)}}},children:[{mark:"_rect",selector:".zc-bar",data:function(t,n){return n>0?e.helpers.filterData(t):[]},config:{update:{d:function(t){return e.helpers.position.subdivider.end(t)}}},properties:{styles:{fill:"white",opacity:.7,"shape-rendering":"crispedges"}}}]}})),Tm("bullet.levelmarker",(function(t,e,n){var a,r=this;this.chart.dataObject.hierarchical&&(a={levelbycolumn:function(t){return t.levelByColumn},levelbyrow:function(t){return t.levelByRow}});var o={mark:"g",order:":first-child",selector:".subseries_levelMarker",properties:{attrs:{class:function(t,e){return t.subseriesIdx=e,"subseries_levelMarker subseries_levelMarker_".concat(e)}}},data:function(e){return n?r.builderC.stacked?t.data:t.disabled?[]:t.data:[]},children:[]};return n&&o.children.push({mark:"_rect",selector:".zc_levelMarker",data:function(t,e){return r.helpers.filterData(t)},dataAccessor:function(t){return r.chart.dataset.getX(t)},config:{d:function(t){return r.helpers.position.levelMarker.end(t)}},properties:{attrs:a,styles:{fill:function(t,e){return r.helpers.styles.levelMarker.fill(t,e)},"fill-opacity":r.helpers.styles.levelMarker.fillOpacity,opacity:r.helpers.styles.levelMarker.opacity}}}),o})),_P.prototype.interpolate=function(t,e){var n=this.sampling,a=t.path,r=e.path;if(a.getTotalLength()>r.getTotalLength())var o=SP(n,a,a.getTotalLength(),!0),i=SP(r.getTotalLength()/o.length,r,o.length,!1);else i=SP(n,r,r.getTotalLength(),!0),o=SP(a.getTotalLength()/i.length,a,i.length,!1);for(var l=[],s=0;s<o.length;s++){var c=d3.interpolate([o[s].x+t.xOffset,o[s].y+t.yOffset],[i[s].x+e.xOffset,i[s].y+e.yOffset]);l.push(c)}return l},Tm("bar.morph",(function(){var t=this,e=this.builderC,n=this.chart,a=n.systemConf.chart.plot.morph,r=new _P({sampling:a.samplingDistance}),o=n.oldSeriesInfo.get(e.datasetIndex),i={seriesIdx:o.seriesIndex,color:o.color,transform:o.transformationInfo},l=_v(n,i.seriesIdx),s=(a.duration,{}),c=N();return this.helpers.filterData(this.data.data[0]).map((function(a,o){var c=t.helpers.position.bar.end(a);if(isNaN(c.x1)||isNaN(c.y1))return c.x1=-1,null;var u=e.border&&e.border.show?e.border.radius:0,d=pc(c.x1,c.y1,c.x2,c.y2,Ia(u),null,null,!0),h=n.oldSeriesInfo.get(i.seriesIdx).pathData[o],f=h.getAttribute("d");h.setAttribute("d",d);var p=h.cloneNode();h.setAttribute("d",f),s[o]=r.interpolate({path:h,xOffset:l.x+i.transform[o].x,yOffset:l.y+i.transform[o].y},{path:p,xOffset:0,yOffset:0})})),t.helpers.position.bar_morphing={interpolator:s,line_d3:c},s})),Ta(AP,pP);var TP=AP.prototype;function PP(t,e,n,a){if("redraw"==n.phase){var r=n.scales.x(a.dataset.getX(t[0])),o={name:"rect",id:a.id,x:r,y:0,width:a.plotarea.width,height:a.plotarea.height},i=Hr.get(Hr.svg_clips,"rect",o,{chartObj:a});e.attr("clip-path","url(".concat(a.defsLocation,"#").concat(i,")"))}}TP._defaultH=function(t){return"segment"==t._type?[{shape:"whisker",data:TP.data,segments:TP.segments,path:this.path,context:this.renderingContext,translate:this.translateContext}]:[{shape:br,path:Za(this).path,data:Za(this).data,context:Za(this).renderingContext,translate:Za(this).translateContext,styles:Kg}]},TP.renderingContext=function(){return Jg.get("scatter").call(this,this.chart)},TP.segments=function(t){var e=this.chart,n=this.renderer.commonRendererProp().params;return function(){e.cache.data[t._key]||(e.cache.data[t._key]={});var a=e.cache.data[t._key];if(!na(a._segments)){var r=t._data(),o=ip("horizontal-whisker",n.whiskers.size,r._x,r._y,qc(t,n.yscale,null,null,null,n.whiskers.dataindex));a._segments=o}return t}},TP._options=function(t){this.chart;return this.renderer.commonRendererProp().params.whiskersOptionsMerged.hoveroptions},TP.whiskerY=function(t){var e=this.renderer.commonRendererProp().params,n=e.whiskers.dataindex;return(e.yscale(t[n][0])+e.yscale(t[n][1]))/2},TP.path=function(t,e){t=t._data&&t._data()||t;this.chart;var n=this.renderer,a=n.commonRendererProp().params,r=n.commonOption,o=this._options(t),i=e.context.call(this),l=e.translate.call(this),s=t,c=s.seriesIndex,u=(s.paneid,dc(i,"g",[1],".","class","highlight".concat(t.paneid).concat(c).concat(t.itemIndex).concat(e.type)||"_")),d=a.axisrotated?[this.whiskerY(t),t._y+r.barWidth/2]:[t._x+r.barWidth/2,this.whiskerY(t)],h=qc(t,a.yscale,null,null,null,a.whiskers.dataindex);return"string"==typeof o.size&&o.size.indexOf("%")>-1&&(o.size=parseFloat(o.size)/100*r.barWidth/10),ap(u,null,o,{color:o.color,symbolSize:{inner:0,outer:1},symbol:"horizontal-whisker",transform:d,rotate:a.axisrotated?90:0,imageSize:15,size2d:h},this.chart),i.style("display",""),i.attr("transform","translate(".concat(l[0],",").concat(l[1],")")),u};var EP=function(){var t=this,e=this.chart,n=e.dataObject,a=e.dataset,r={column:function(t,n){var r=a.getColumnIdx(t,n);return e.systemConf.metadata.columns[r]},datatype:function(t,e){return a.getDataType(t,e)},filterData:function(r){var o=r.subseriesIdx||0,i=t.builderC.liveUpdate;if(t.seriesdataAfterUpdate[o]&&!i)return t.seriesdataAfterUpdate[o];if(i)return PP(r,t.placeHolder,t,e),pi.helpers.getDynamicData(r,t.chart);var l=e.dataset.getDataType("y",t.commonOption.yaxiscolumnorder),s=t.scales.x.domain(),c=l==To?t.scales.y.domain():null,u=pi.helpers,d=n.updateSeriesdatabyCategories(Yn(r),s,c,t.commonOption.yaxiscolumnorder,!0,o);e.renderVisiblePointsOnly&&(d=u.filterPointsInViewport(e,d,"bar","x",t.rendererIndex,o||0)),t.seriesdataAfterUpdate[o||0]=d;var h=t.seriesdataAfterUpdate[o||0];return t.oldRenderer.seriesdataAfterUpdate[o||0]=d,t.builderC.xcategoriesReversed=s,t.builderC.xaxisreversed&&(d=d.slice(0).reverse(),t.builderC.xcategoriesReversed=s.slice(0).reverse()),t.builderC.levelMarker&&t.builderC.levelMarker._zc_enabled&&t.builderC.stacked&&s.length!=h.length&&Yt.render.bulletHelpers.addDummyDataForLevelmarker(h,s,a,t.commonOption.yaxiscolumnorder),t.seriesdataAfterUpdate[o||0]},position:{},styles:{},styleComponent:{}};return r};function LP(){var t=this,e=this.builderC,n=this.config.series,a=this.config.common,r=fp(a,n,this.chart,"bar"),o=this.chart.systemConf.chart.plot.morph.enabled&&this.chart.oldSeriesInfo;r.enabled?o?r._duration=this.chart.systemConf.chart.plot.morph.duration||r.duration:r.type==Fc?r._duration=r.duration:r._duration=function(n,a){return r.duration/(t.seriesdataAfterUpdate[n.subseriesIdx||0].length*e.barSeriesCount)}:r._duration=0,r._delay=function(n,a){if(r.type==Fc||"redraw"==t.phase)return 1;var o=r.duration/(t.seriesdataAfterUpdate[n.subseriesIdx||0].length*e.barSeriesCount);return(a*e.barSeriesCount+e.datasetIndex)*o},r._exitduration=r.enabled?100:0,this.builderC.animationOptions=r,this.builderC.barSeriesCount=this.chart.dataObject.noofBarEnabledSeries,this.builderC.border=n&&n.border?Rn(a.border,n.border,!0):a.border,this.builderC.levelMarker=n&&n.levelMarker?Rn(a.levelMarker,n.levelMarker,!0):a.levelMarker;var i=t.builderC.stacked?$d(t.chart.dataObject.getStackGroup(),t.builderC.datasetIndex):null;if(t.builderC.stackIndex=i,this.builderC.levelMarker&&(this.builderC.levelMarker._zc_enabled=t.builderC.levelMarker&&t.builderC.levelMarker.enabled,t.builderC.stacked&&(this.builderC.levelMarker._zc_enabled=this.builderC.levelMarker._zc_enabled&&(t.builderC.stacked&&t.chart.dataObject.noofBarEnabledSeries>0||!this.data.disabled)&&!t.chart.dataObject.isStackedPercentChart&&(!t.builderC.stacked||!!t.chart.dataObject.getEncode("stack",i)))),this.builderC.whiskers=n&&n.whiskers?Rn(a.whiskers,n.whiskers,!0):a.whiskers,this.builderC.whiskers){var l="edges"==this.builderC.whiskers.showOn?"whiskers":"horizontal-whisker";this.builderC.whiskersOptionsMerged=OP(this.builderC.whiskers,r,l)}}var MP=function(){var t=this,e=this;return{bar:{operator:Pm("bar.default")},subdivider:{operator:Pm("bar.subdivider")},levelmarker:{condition:function(){return e.builderC.levelMarker&&e.builderC.levelMarker._zc_enabled},operator:Pm("bullet.levelmarker"),holder:function(){if(e.builderC.stacked){var n=$d(e.chart.dataObject.getStackGroup(),e.builderC.datasetIndex);return wc("g",".levelMarkerSeries_".concat(n),[t.chart.seriesdata],e.container,":first-child")}}},targetmarker:{condition:function(){return e.builderC.targetMarker&&e.builderC.targetMarker.enabled},operator:Pm("bullet.targetmarker"),holder:function(){return e.chart.staticPaneSVG.selectAll("g.qualitativeGroup")}},whisker:{condition:function(){return e.builderC.whiskers&&e.builderC.whiskers.enabled},operator:Pm("boxplot.whisker"),holder:function(){return e.chart.staticPaneSVG.selectAll("g.qualitativeGroup")}},median:{condition:function(){return e.builderC.median&&e.builderC.median.enabled},operator:Pm("boxplot.median"),holder:function(){return e.chart.staticPaneSVG.selectAll("g.qualitativeGroup")}}}},DP=function(){var t=this,e="bar";this.KEY=e;var n=this.builderC.border;return this.helpers.position.bar={},this.helpers.position.bar.start=function(e,a){var r,o,i,l,s=t.builderC,c=s.stacked,u=s.hasNegValue,d=t.chart.phase,h=n&&n.show?n.radius:null;h=t.helpers.positionComponent.bar.radius(e,t.builderC.datasetIndex,h);var f=t.chart.dataset.getX(e),p=t.scales.y.range()[0],g=null!=u?t.scales.y(u):null,v=t.rangeYType?t.scales.y(t.chart.dataset.getY(e,0,0)):null,m=wa(v,g);if(r=c?t.scales.x(f)+t.scales.interX(t.commonOption.stackGroupIndex)+t.commonOption.padding:t.scales.x(f)+t.scales.interX(t.barDatasetIndex+(e.subseriesIdx||0))+t.commonOption.padding,t.scales.y.bandwidth)o=t.scales.y.origRange[0];else if(null!=m)o=m;else{c&&"legendFilter"==d&&(p=t.scales.y(e.y0));var y=t.scales.y(0);o=t.chart.axes.rotated||c?p:null!=y?Xe(y,p):p}i=t.chart.axes.rotated?0:t.commonOption.barWidth,l=t.chart.axes.rotated?t.commonOption.barWidth:0;var b=t.helpers.positionComponent.bar.coordinates(e,t.builderC.datasetIndex,{x:r,y:o,width:i,height:l});r=b.x,o=b.y,i=b.width,l=b.height;var x=t.chart.axes.rotated?{x:o,y:r,width:i,height:l,radius:h}:{x:r,y:o,width:i,height:l,radius:h};return isNaN(r)?zP(x,t.builderC.yaxisreversed,t.chart.axes.rotated,t.chart.axes.rotated?"y":"x"):isNaN(o)?zP(x,t.builderC.yaxisreversed,t.chart.axes.rotated,t.chart.axes.rotated?"x":"y"):a?void 0:RP(x,t.builderC.yaxisreversed,t.chart.axes.rotated)},this.helpers.position.bar.end=function(e,a,r,o){t.chart.dataObject.getTransRectValue;var i,l,s,c,u=n&&n.show?n.radius:null;if(u=t.helpers.positionComponent.bar.radius(e,t.builderC.datasetIndex,u),a)return"radius"==a?u:t.chart.dataObject.getTransRectValue(a,e,e.subseriesIdx||0,null,t.commonOption,null,r);if(i=t.chart.dataObject.getTransRectValue("x",e,e.subseriesIdx||0,null,t.commonOption),l=t.chart.dataObject.getTransRectValue("y",e,e.subseriesIdx||0,null,t.commonOption,r),s=t.chart.dataObject.getTransRectValue("width",e,e.subseriesIdx||0,null,t.commonOption),c=t.chart.dataObject.getTransRectValue("height",e,e.subseriesIdx||0,null,t.commonOption),"log"===t.chart.dataset.getColumn("y",t.builderC.yaxiscolumnorder).scaleType){var d=t.scales.y.range();c=t.scales.y.invert(d[0])===t.scales.y.invert(d[d.length-1])?0:c}var h=t.helpers.positionComponent.bar.coordinates(e,t.builderC.datasetIndex,{x:i,y:l,width:s,height:c});return i=h.x,l=h.y,s=h.width,c=h.height,o?{x:i,y:l,width:s,height:c}:RP({x:i,y:l,width:s,height:c,radius:u},t.builderC.yaxisreversed,t.chart.axes.rotated)},this.helpers.position.bar.stop_1=function(e,n,a){t.helpers.position.bar.start(e);var r=t.helpers.position.bar.end(e);return t.chart.axes.rotated?{y1:r.y1,y2:r.y2}:{x1:r.x1,x2:r.x2}},this.helpers.position.bar.exit=this.helpers.position.bar.start,{}};function IP(){var t=this,e="bar_racing",n=this.builderC.border;n&&n.show&&n.radius;this.helpers.position[e]={},this.helpers.position[e].start=function(e,n,a){var r=t.chart.axes.y.groups[0].prerenderComp.orient;if(t.chart.axes.rotated&&"bottom"===r){var o=t.helpers.position.bar.end(e);return o.y1=-t.chart.plotarea.top,o.y2=t.scales.x.bandwidth()-t.chart.plotarea.top,o}var i=t.helpers.position.bar.end(e);return i.y1=t.chart.plotarea.height+20,i.y2=t.scales.x.bandwidth()+t.chart.plotarea.height+20,i},this.helpers.position[e].end=function(e,n,a){return t.helpers.position.bar.end(e)},this.helpers.position[e].exit=function(e,n,a){var r=t.chart.axes.y.groups[0].prerenderComp.orient;return t.chart.axes.rotated&&"bottom"===r?{y1:-t.chart.plotarea.top,y2:t.scales.x.bandwidth()-t.chart.plotarea.top}:{y1:t.chart.plotarea.height+20,y2:t.scales.x.bandwidth()+t.chart.plotarea.height+20}}}function RP(t,e,n){var a=t.radius?gc(Ia(t.radius),t.width,t.height):0;return{x1:e&&n?t.x-t.width:t.x,y1:e&&!n?t.y-t.height:t.y,x2:e&&n?t.x:t.x+t.width,y2:e&&!n?t.y:t.y+t.height,radius:a}}function zP(t,e,n,a){t.radius&&gc(Ia(t.radius),t.width,t.height);return"x"==a?{y1:e&&!n?t.y-t.height:t.y,y2:e&&!n?t.y:t.y+t.height}:{x1:e&&n?t.x-t.width:t.x,x2:e&&n?t.x:t.x+t.width}}var jP=function(){var t=this,e=this.chart,n=FP.call(this),a=Is(this.chart,this.builderC.datasetIndex,this.paneid,this.builderC),r=this.builderC.border||{},o=Ns(this.config.common,this.chart),i=this.chart.patternPallete&&this.chart.patternPallete.length;this.oldRenderer.fillColorFunc=n,this.helpers.styleComponent.bar={fillComponent:n},this.helpers.positionComponent={},this.helpers.positionComponent.bar={radius:function(t,e,n){return n},coordinates:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:x,y:y,width:width,height:height};return n}},this.helpers.styles.bar={fill:function(e,a){var r=t.chart.systemConf.chart.plot.allowDuplicateCategories?t.builderC.xcategoriesReversed.indexOf(t.chart.dataset.getX(e)):wa(e.sortedItemIndex,a),l=o?r:t.legendOrder,s=i?t.helpers.position.bar.end(e,null,null,!0):null;return n(l,e,null,t.builderC.paneColor,null,null,s)},stroke:function(e,n){var i=t.chart.systemConf.chart.plot.allowDuplicateCategories?t.builderC.xcategoriesReversed.indexOf(t.chart.dataset.getX(e)):wa(e.sortedItemIndex,n),l=o?i:t.legendOrder;return a(l,e,r.color||t.builderC.paneColor)},strokeWidth:r.show?wa(r.size,1):0,strokeDasharray:r.show?r.style:null,fillOpacity:this.builderC.gvp("fillOpacity"),opacity:function(t,n){var a=Qk(t,n,e,"bar");return l(this).attr("filtered-opacity",a),a}}};function FP(){var t=_s(this.chart,this.builderC.datasetIndex,this.paneid);return Ls(this.chart,this.builderC.datasetIndex,this.paneid,t)}var BP=function(){var t=this,e="subdivider";this.helpers.position[e]={},this.helpers.position[e].end=function(e,n){var a,r,o,i,l=t.helpers.position.bar.end(e);return t.chart.axes.rotated?(a=t.scales.y(e.y0),r=l.y1,o=1,i=t.commonOption.barWidth):(a=l.x1,r=t.scales.y(e.y0),o=t.commonOption.barWidth,i=1),RP({x:a,y:r,width:o,height:i},t.builderC.yaxisreversed,t.chart.axes.rotated)}};function HP(t,e,n,a,r){var o=this,i=function(t,e,n,a,r){var o,i=_objectSpread({},n);if(i.outerStrokeColor=function(e){return Rs(t.chart.dataset.getClr(e),t.chart)?n.outerStrokeColor:"transparent"},i.strokeWidth=n.strokeWidth||0,"inner"==r){var l=null!=n.imageUrl&&""!==n.imageUrl,s=n.innerFillColor||n.color;o=l||0===n.innerStrokeWidth&&(0===n.innerFillOpacity||"transparent"===s)?[]:[1]}var c=Mr({data:function(t){return"inner"==r?o:[t]},prefix:r||"outer",selection:r?".".concat(r):".outer",config:_objectSpread(_objectSpread({x:0,y:0,rotate:function(n){return t.helpers.position[e].end(n).rotate}},i),{},{shape:n.symbol,color:null,size:function(n,o){return t.helpers.position[e].end(n,"size",a,r)}}),context:t.chart.getPatternSvg(),defsPath:t.chart.defsLocation});n.animation&&n.animation.enabled&&(delete c.config.strokeOpacity,c.config.enter={strokeOpacity:0},c.anime={update:{duration:n.animation.duration,delay:n.animation.duration,strokeOpacity:n.outerStrokeOpacity}});return c}(o,t,n,a,r);return{mark:"g",selector:".markers".concat(a),data:function(t){return t},properties:{attrs:{transform:"translate(".concat(o.chart.plotarea.left,",").concat(o.chart.plotarea.top,")")}},children:[{mark:"g",data:function(t){return e||o.helpers.filterData(t)},properties:{attrs:{transform:function(e){var n=o.chart.axes.rotated,r=o.helpers.position[t].end(e).x,i=o.helpers.position[t].end(e,"y",a).y;o.helpers.position[t].end(e).rotate;return isNaN(i)?null:"translate(".concat(n?i:r,",").concat(n?r:i,") rotate(").concat(n?90:0,")")}},styles:{display:function(e){return o.helpers.styles[t]&&o.helpers.styles[t].display?o.helpers.styles[t].display(e):""}}},children:[_objectSpread({},i)]}]}}function NP(t,e){var n=this.builderC[t];void 0!==n._size?n.size=n._size:n._size=n.size||null;var a=this.builderC[t],r=(null!=a.imageUrl&&a.imageUrl,a.size);return r=na(r)?r:this.commonOption.levelMarkerWidth-2*Jn(a.padding,this.commonOption.padding/2),na(a.size)&&"string"==typeof r&&r.indexOf("%")>-1&&(r=parseFloat(r)/100*this.commonOption.levelMarkerWidth/10),na(a.size)&&"targetMarker"==t&&(r=Xe(r,this.scales.x.bandwidth()/10)),this.builderC[t].size=na(a.size)?r:r/10,(r=wa(a.size,1))*{outer:1,inner:.6}[e||"outer"]*10}var WP=function(){var t=this,e="whiskers",n="whiskersOptionsMerged";if(this.builderC[e]&&this.builderC[e].enabled){var a=this.builderC,r=a[n],o=this.chart.dataset.yidx(this.commonOption.yaxiscolumnorder),i=r.dataindex,l="edges"==a.whiskers.showOn,s=NP.call(this,n);this.helpers.position[e]={start:function(t,e){},end:function(e,n,a){var r=t.scales.x(t.chart.dataset.getX(e))+t.commonOption.levelMarkerWidth/2;r=r+t.scales.interX(t.commonOption.barDatasetIndex)+t.commonOption.padding;var c,u=na(a)?t.scales.y(e[i][a]):(t.scales.y(e[i][0])+t.scales.y(e[i][1]))/2;return"size"==n?(l?(c=qc(e,t.builderC.yscale,i,o,a),c=t.chart.axes.rotated?-c:c):c=qc(e,t.builderC.yscale,null,null,null,i),[s,c,{symbol:"vertical-line-z",size:c}]):{x:r,y:u,rotate:t.chart.rotated?90:0}}}}return{}};function VP(){var t="whiskers",e=this.builderC.whiskersOptionsMerged;this.builderC[t]&&this.builderC[t].enabled&&(this.helpers.styles[t]={fill:e.color,stroke:e.color,strokeWidth:wa(e.strokeWidth,1),strokeDasharray:e.dashStyle,strokeLinecap:e.lineCap,display:function(t,e){return""}})}var YP=function(){var t=this,e="levelMarker";this.builderC;return this.builderC[e]&&this.builderC[e].enabled&&(this.helpers.position[e]={start:function(t,e){},end:function(e,n){var a,r=Yt.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(e,t.builderC.levelMarker,t.chart,t.commonOption,t.builderC,e.subseriesIdx||0,t.builderC.datasetIndex);return a=t.chart.axes.rotated?{x:r.y,y:r.x,width:r.width,height:r.height}:r,n?a:(a.radius=t.helpers.position.bar.end(null,"radius"),RP(a,t.builderC.yaxisreversed,t.chart.axes.rotated))}}),{}},UP=function(){var t=this,e="levelMarker",n=this.chart,a=this.builderC[e],r=Ns(this.config.common,this.chart),o=this.chart.patternPallete&&this.chart.patternPallete.length;this.builderC[e]&&this.builderC[e].enabled&&(a.overlayRange="below",this.helpers.styles[e]={fill:function(e,n){var i=t.chart.systemConf.chart.plot.allowDuplicateCategories?t.builderC.xcategoriesReversed.indexOf(t.chart.dataset.getX(e)):wa(e.sortedItemIndex,n),l=r?i:t.legendOrder,s=r?t.chart.seriesColor[l%t.chart.seriesColor.length]:t.builderC.color,c=o?t.helpers.position.levelMarker.end(e,!0):null,u=ua(a.color)?a.color[0]:a.color;return o?t.helpers.styleComponent.bar.fillComponent(l,null,null,u,null,null,c):Yt.render.bulletHelpers.getBulletLevelMarkerGradient(e,a,t.chart,s,a.color)||u||s},fillOpacity:a.fillOpacity,opacity:function(t,e){var a=Qk(t,e,n,"bar");return l(this).attr("filtered-opacity",a),a}})};function GP(){DP.call(this),BP.call(this),WP.call(this),YP.call(this),IP.call(this),jP.call(this),this.chart.systemConf.chart.plot.morph.enabled&&this.chart.oldSeriesInfo&&Pm("bar.morph").call(this),UP.call(this)}var XP=function(){function t(e){_classCallCheck(this,t);var n=e.data,a=e.config,r=e.rendererIndex,o=e.legendOrder,i=e.paneid,l=e.chart,s=e.builderC,c=e.barDatasetIndex,u=e.phase,d=e.type;this.data=n,this.config=a,this.paneid=i,this.rendererIndex=r,this.barDatasetIndex=c,this.conf=l.rendererConf[r],this.legendOrder=o,this.builderC=s,this.chart=l,this.type=d,this.phase=u,this.oldRenderer=e.oldRenderer,this.markOperator=e.operator,this.setMarkMapping()}return _createClass(t,[{key:"initialize",value:function(t){this.rangeYType=this.type==Fi,this.container=t,this.commonOption=Nm(this.conf,this.rendererIndex,this.legendOrder,this.paneid),LP.call(this),this.seriesdataAfterUpdate=new Array(0),this.oldRenderer.seriesdataAfterUpdate=new Array(0),this.scales={x:this.commonOption.bandwidth1,interX:this.commonOption.bandwidth2,y:this.commonOption.yscale},this.helpers=EP.call(this),this.collectEncode()}},{key:"collectEncode",value:function(){GP.call(this)}},{key:"getAllowedMarkOperator",value:function(){return["levelmarker","bar","subdivider","whisker"]}},{key:"setMarkMapping",value:function(t){this.markMapping=(t||MP).call(this)}},{key:"getDefaultMarkParser",value:function(){var t=this.getAllowedMarkOperator(),e=this.markMapping,n=this.markOperator;this._mark=Jk.call(this,this.data,e,t,n)}},{key:"render",value:function(t){var e=this,n=wa(this.builderC.dynamicSeriesPosition,this.builderC.datasetIndex);this.placeHolder=wc("g",".barseries_".concat(n),[{data:this.data,index:this.conf.renderingOrderIndex()}],t),this._mark.map((function(t){Kf(t.mark,t.holder||e.placeHolder)}))}},{key:"destroy",value:function(){this.container=this.placeHolder=this._mark=null}}]),t}();function ZP(){var t=this.config.series,e=this.config.common,n=this.builderC.animationOptions;this.builderC.median=t&&t.median?Rn(e.median,t.median,!0):e.median,this.builderC.medianOptionsMerged=OP(this.builderC.median,n)}var qP=function(){var t=this,e="median",n=this.builderC.medianOptionsMerged.dataindex,a=NP.call(this,"medianOptionsMerged");return this.builderC[e]&&this.builderC[e].enabled&&(this.helpers.position[e]={start:function(t,e){},end:function(e,r){var o=t.scales.x(t.chart.dataset.getX(e))+t.commonOption.levelMarkerWidth/2;o=o+t.scales.interX(t.commonOption.barDatasetIndex)+t.commonOption.padding;var i=t.scales.y(e[n]);return"size"==r?[a,null,null]:{x:o,y:i,rotate:t.chart.rotated?90:0}}}),{}};function $P(){var t="median",e=this.builderC.medianOptionsMerged;this.builderC[t]&&this.builderC[t].enabled&&(this.helpers.styles[t]={fill:e.color,stroke:e.color,strokeWidth:wa(e.strokeWidth,1),strokeDasharray:e.dashStyle,strokeLinecap:e.lineCap,display:function(t,e){return""}})}function QP(){DP.call(this),YP.call(this),WP.call(this),qP.call(this),jP.call(this),UP.call(this),VP.call(this),$P.call(this)}function KP(){var t=this.config.series,e=this.config.common;fp(e,t,this.chart,"bullet");this.builderC.targetMarker=t&&t.targetMarker?Rn(e.targetMarker,t.targetMarker,!0):e.targetMarker}var JP=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"initialize",value:function(t){_get(_getPrototypeOf(e.prototype),"initialize",this).call(this,t),this.rangeYType=!0}},{key:"collectEncode",value:function(){KP.call(this),ZP.call(this),QP.call(this)}},{key:"getAllowedMarkOperator",value:function(){return["levelmarker","bar","median","whisker"]}}]),e}(XP),tE=function(){var t=this,e="targetMarker",n=this.builderC[e].dataindex,a=NP.call(this,e,"outer"),r=NP.call(this,e,"inner");return this.builderC[e]&&this.builderC[e].enabled&&(this.helpers.position[e]={start:function(t,e){},end:function(e,o,i,l){return"size"==o?"outer"==l?[a,null,null]:[r,null,null]:{x:t.scales.x(t.chart.dataset.getX(e))+t.scales.x.bandwidth()/2,y:t.scales.y(e[n]),rotate:t.chart.rotated?90:0}}}),{}};function eE(){var t="targetMarker",e=this.builderC[t],n=e.dataindex;this.builderC[t]&&this.builderC[t].enabled&&(this.helpers.styles[t]={fill:e.color,stroke:e.color,strokeWidth:wa(e.strokeWidth,1),strokeDasharray:e.dashStyle,strokeLinecap:e.lineCap,display:function(t,e){return na(t[n])&&null!=t[n]?"":"none"}})}function nE(){DP.call(this),YP.call(this),tE.call(this),jP.call(this),UP.call(this),eE.call(this)}var aE=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"collectEncode",value:function(){KP.call(this),nE.call(this)}},{key:"getAllowedMarkOperator",value:function(){return["levelmarker","bar","targetmarker"]}}]),e}(XP);Pe.bar=function(){var t,e,n,a,r,o,i,s,c=!1,u=pi.helpers,d=!1;function h(f){f.each((function(p){var g=l(this);h.update=function(){g.transition().call(h)};var v,m,y=t.params,b=y.chartObj,x=y.xscale,C=y.stacked,k=y.datasetIndex,w=y.renderingOrderIndex,_=y.legendOrderIndex,S=y.rendererIndex,O=y.axisrotated,A=y.commonPlotOptions,T=y.color,P=y.paneColor,E=y.labelQueue,L=y.hasNegValue,M=y.yaxiscolumnorder,D=y.dataset,I=b.systemConf,R=(b.plotarea,b.dataObject),z=(y.threshold,y.colorOverlay,ec(b,"x",0,!1)),j=ec(b,"y",y.yaxiscolumnorder,!1),F=y.yaxisreversed=j.reversed,B=y.xaxisreversed=z.reversed,H=I.chart.plot.allowDuplicateCategories;a=y.yscale,b.viewFlow&&b.viewFlow.marks._default.chart.length&&(m=(v=p[k]).data);var W=m||p[k],V={data:W,index:w},Y=b.defsLocation,U=W.plotoptions,G=W.data,X=Ao(b)?"".concat(W.row,"_").concat(W.column):"0_0",Z=Ui(b,X,k),q=Z.name,$=b.dataSplicer.getPlotConfig(v||W,k),Q=y.gvp=Dn.getValueOfPlotOptions($,A),K=_s(b,k,X),J=b.patternPallete&&b.patternPallete.length,tt=b.dataObject.noofBarEnabledSeries,et="bullet"==q,nt="gantt"==q,at="waterfall"==q,rt="boxplot"==q,ot=_e.rangePlot.has(Z.value),it=_e.whiskerPlot.has(Z.value),lt=b.dataset.getDataType("y",M),st=x.domain(),ct=lt==To?a.domain():null,ut=(na(R.hierarchical)&&R.getCategories("x"),st),dt=y.dynamicSeriesPosition;if(void 0===dt&&(dt=k),"gantt"==q||"waterfall"==q){var ht=dc(g,"g",[V],".","class","barseries_".concat(dt));if(!e||!n)return c=!0,void(h.chartRendered=!0);var ft,pt=y.levelMarker=U&&U.levelMarker?Rn(A.levelMarker,U.levelMarker,!0):A.levelMarker,gt=U&&U.border?Rn(A.border,U.border,!0):A.border,vt=Ns(A,b),mt=fp(A,U,b,"bar"),yt=mt.enabled,bt=mt.easingType,xt=mt.type,Ct=yt?100:0;i=c?yt?300:0:mt.duration;b.syncTransition||f.transition().duration(i);var kt=Nm(b.rendererConf[S],S,_,X),wt=kt.barWidth,_t=kt.addRangeBand,St=$d(R.getStackGroup(),k);h.getParamValue=function(){return b.dataObject.getTransRectValue.apply(b.dataObject,Zn(arguments))};var Ot,At,Tt,Pt,Et,Lt=function(t,e){return H&&(t.categoryIndex=e=ut.indexOf(D.getX(t))),e},Mt=function(t,e){return vt?(e=Lt(t,e),b.seriesColor[e%b.seriesColor.length]):T};if(pt&&(Tt=pt.color,pt.overlayRange="below"),et||ot&&"barrange"!==q){var Dt=nt?"marker":rt?"median":"targetMarker",It=rt?"threshold":"qualitativeGroup";t.params.targetMarker=Ot=U&&U[Dt]?Rn(A[Dt],U[Dt],!0):A[Dt],Ot=rt?OP(Ot,mt):Ot,At=dc(b.staticPaneSVG.selectAll("g.".concat(It)),"g",!0!==Ot.enabled||W.disabled?[]:[k],".","class",nt||rt?"markerSeries".concat(k):"markerSeries")}if(it){It=rt?"threshold":"qualitativeGroup";t.params.whiskers=Pt=U&&U.whiskers?Rn(A.whiskers,U.whiskers,!0):A.whiskers;var Rt="edges"==t.params.whiskers.showOn?"whiskers":"horizontal-whisker";Pt=OP(Pt,mt,Rt),t.params.whiskersOptionsMerged=Pt,Et=dc(b.staticPaneSVG.selectAll("g.".concat(It)),"g",!0!==Pt.enabled||W.disabled?[]:[k],".","class","whiskerSeries".concat(k))}var zt={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},jt=zt,Ft=0,Bt=null,Ht=null,Nt=zt;na(gt)&&oa(gt.show)&&(Ft=gt.size,Bt=gt.color,Ht=gt.style,jt=h.getParamValue("radius",null,null,null,kt,gt.radius));var Wt=Gr(Ht,null==Ft?2:Ft),Vt=h.fillColorFunc=Ls(b,k,X,K,null,null,null,null),Ut=Is(b,k,X,y);if(h.seriesdataAfterUpdate=[],G.forEach((function(s,d){var f,p,v,m,w,T;h.getBarLevelMarkerProp=nt?Yt.render.bulletHelpers.getLevelMarkerParams:null;var E,I=W.disabled,z=b.dataObject.updateSeriesdatabyCategories(Yn(s),st,ct,M,!0);if(b.renderVisiblePointsOnly&&(z=u.filterPointsInViewport(b,z,"bar","x",k,d)),h.seriesdataAfterUpdate[d]=z,B&&(z=z.slice(0).reverse(),ut=ut.slice(0).reverse()),null!=o){E=Yn(s);for(var j=o.count,H=0;H<=j;H++)E.splice(H,0,[null,null]);if(c){var V=x(D.getX(s[0])),G={name:"rect",id:b.id,x:V,y:0,width:b.plotarea.width,height:b.plotarea.height},Z=Hr.get(Hr.svg_clips,"rect",G,{chartObj:b});ht.attr("clip-path","url(".concat(Y,"#").concat(Z,")"))}}var $=null!=o?E:h.seriesdataAfterUpdate[d];ft=xt==Fc||c?i:i/($.length*tt);var K=pt&&!0===pt.enabled&&(C&&tt>0||!I)&&!b.dataObject.isStackedPercentChart&&(!C||!!b.dataObject.getEncode("stack",St)),lt=(C?g:ht).selectAll(C?"g.levelMarkerSeries_".concat(St):"g.subseries_levelMarker_".concat(d)).data((function(t){return K?[t]:[]}));(C?ht:g).selectAll(C?"g.subseries_levelMarker_".concat(d):"g.levelMarkerSeries_".concat(St)).remove(),lt.exit().selectAll("path.levelMarker").transition().duration(Ct).attr("d",(function(t,e){if(nt){var n=bc(l(this).attr("d")),r=n[0].moves[0],o=n[3].moves[1],i=Yt.render.bulletHelpers.getLevelMarkerParams(t,d,e,h,kt);return pc(i.x||r,i.y+(O?0:i.height*(F?-1:1))||o,O?0:i.width,O?i.height:0,jt,F,O)}return pc(h.getParamValue("x",t,d,e,kt)||bc(l(this).attr("d"))[0].moves[0],a(a.domain()[0]),O?0:h.getParamValue("width",t,d,e,kt),O?h.getParamValue("height",t,d,e,kt):0,jt,F,O)})).remove();var dt=ht.selectAll("g.subseries_".concat(d)).data((function(t){return I?[]:[t]}));dt.exit().selectAll("path.zc_bar").transition().duration(Ct).attr("d",(function(t,e){var n=bc(l(this).attr("d")),r=n[0].moves[0],o=n[3].moves[1];return pc(h.getParamValue("x",t,d,e,kt)||r,(O?h.getParamValue("y",t,d,e,kt):ot?h.getParamValue("y",t,d,e,kt,null,0):(C?a(t.y0):null!=L?a(L):null!=a(0)?Xe(a(0),a.range()[0]):a.range()[0])+2*_t())||o,O?0:h.getParamValue("width",t,d,e,kt),O?h.getParamValue("height",t,d,e,kt):0,jt,F,O)})).remove();var gt=dt.enter().append("g").merge(dt).attr("class","subseries_".concat(d));if(at){var mt=dc(C?g:ht,"g",C||!I?[1]:[],".","class","connectorLines",null);Pe.waterfallHelpers.drawConnectorLines(mt,$,{chart:b,yaxiscolumnorder:M,axisrotated:O,stacked:C,xscale:x,yscale:a,renderer:h,seriesindex:d,plotoptions:U,commonPlotOptions:A});var yt=dc(C?g:ht,"g",C||!I?[1]:[],".","class","comparisonLines",null);Pe.waterfallHelpers.drawComparisonLine(yt,$,{chart:b,yaxiscolumnorder:M,axisrotated:O,stacked:C,xscale:x,yscale:a,renderer:h,seriesindex:d,plotoptions:U,commonPlotOptions:A})}var Dt=nt?lt.enter().append("g").merge(lt):lt.enter().insert("g",":first-child").merge(lt);Dt.attr("class",C?"levelMarkerSeries_".concat(St):"subseries_levelMarker_".concat(d)),K&&C&&st.length!=$.length&&Yt.render.bulletHelpers.addDummyDataForLevelmarker($,st,D,M);var It=Dt.selectAll("path.levelMarker").data($,(function(t){return nt?t:D.getX(t)})),Rt=It.enter().append("path").merge(It).attr("class","levelMarker");Rt.styles({fill:function(t,e){if(nt)return pt.color||Mt(t,e);if(!Yt.render.bulletHelpers.ZC_BAR_getLevelMarkerRect||!Yt.render.bulletHelpers.getBulletLevelMarkerGradient)throw"Level marker or bullet module was not loaded";var n=Mt(t,e),a=ua(pt.color)?pt.color[0]:pt.color;if(J){var r=nt?Yt.render.bulletHelpers.getLevelMarkerParams(t,d,e,h,kt):Yt.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(t,pt,b,kt,y,d,k),o=r.x,i=r.y,l=r.width,s=r.height;a=Vt(vt?Lt(t,e):_,null,null,a,null,null,{x:o,y:i,width:l,height:s})}return Yt.render.bulletHelpers.getBulletLevelMarkerGradient(t,pt,b,n,Tt)||a||n},"fill-opacity":pt?pt.fillOpacity:null}).attr("d",(function(t,e){var n=nt?Yt.render.bulletHelpers.getLevelMarkerParams(t,d,e,h,kt):Yt.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(t,pt,b,kt,y,d,k),a=n.x,r=n.y,o=n.width,i=n.height;return nt?pc(a,r,o,i,Nt,F,O):O?pc(r,a,o,i,jt,F,O):pc(a,r,o,i,jt,F,O)})),$k(Rt,b,q),R.hierarchical&&(Rt.attr("levelbycolumn",(function(t,e){return t.levelByColumn})),R.pivot&&Rt.attr("levelbyrow",(function(t,e){return t.levelByRow}))),pt&&(pt.color=Tt),It.exit().remove(),et?(Pe.ganttHelpers.addMarker(At,$,h,d,Ot,vt,""),Wu("bullet").call(b,Ot,h,$,{paneid:X,rendererIndex:S,subIndex:d})):nt?(Pe.ganttHelpers.addMarker(At,$,h,d,Ot.start,vt,0),Pe.ganttHelpers.addMarker(At,$,h,d,Ot.end,vt,1)):it&&(rt&&Pe.ganttHelpers.addMarker(At,$,h,k,Ot,vt,""),"edges"==t.params.whiskers.showOn?(Pe.ganttHelpers.addMarker(Et,$,h,k,Pt,vt,0),Pe.ganttHelpers.addMarker(Et,$,h,k,Pt,vt,1)):Pe.ganttHelpers.addMarker(Et,$,h,k,Pt,vt,0));var Ht=gt.selectAll("path.zc_bar").attr("class","zc_bar").data($,(function(t){return nt?t:D.getX(t)})),Gt=Ht.enter().append("path").style("fill-opacity",Q("fillOpacity")).attrs({class:"zc_bar",height:function(t,e){if(b.syncTransition){var n=O?"width":"height";return h.getParamValue(n,t,d,e,kt)}return 0},d:function(t,o){var i=function(t){var o=D.getX(t);return f=C?e(o):e(o)+n(r+d),p=a.bandwidth?a.origRange[0]:O||C?null!=L?a(L):a.range()[0]:null!=L?a(L):null!=a(0)?Xe(a(0),a.range()[0]):a.range()[0],p=at?a(t.y0):p,{x:f,y:p,width:O?0:wt,height:O?wt:0}}(t);return b.syncTransition&&(O||b.axes.x.reversed)&&(i.x=b.plotarea.height+20,i.y=h.getParamValue("x",t,d,o,kt),i.width=h.getParamValue("width",t,d,o,kt),i.height=h.getParamValue("height",t,d,o,kt)),l(this).attr("y",i.y),O?pc(i.y,i.x,i.width,i.height,zt,F,O):pc(i.x,i.y,i.width,i.height,zt,F,O)}}).merge(Ht),Xt=Gt.attrs({stroke:function(t,e){return Ut(vt?Lt(t,e):_,t,Bt||P)},"stroke-width":Ft,"stroke-dasharray":Wt}).styles({fill:function(t,e){return J?Vt(vt?Lt(t,e):_,t,null,null,null,null,{x:h.getParamValue("x",t,d,e,kt),y:h.getParamValue("y",t,d,e,kt),width:h.getParamValue("width",t,d,e,kt),height:h.getParamValue("height",t,d,e,kt)}):Vt(vt?Lt(t,wa(t.sortedItemIndex,e)):_,t,null,P)},"fill-opacity":Q("fillOpacity"),transition:"opacity ease 0.2s"});if($k(Xt,b,q),R.hierarchical&&(Gt.attr("levelbycolumn",(function(t,e){return t.levelByColumn})),R.pivot&&Gt.attr("levelbyrow",(function(t,e){return t.levelByRow}))),null==o)if(b.syncTransition)Gt.transition(b.syncTransition).attr("d",(function(t,e){var n=ie(t,e);return isNaN(n.x)||isNaN(n.y)?(n.x=-1,null):pc(n.x,n.y,n.width,n.height,jt,F,O)})).attrs({y:function(t,e){var n=O?"x":"y";return h.getParamValue(n,t,d,e,kt)},height:function(t,e){var n=O?"width":"height";return h.getParamValue(n,t,d,e,kt)}});else if(b.systemConf.chart.plot.morph.enabled&&null!=b.oldSeriesInfo){var Zt=new _P({sampling:b.systemConf.chart.plot.morph.samplingDistance}),qt=b.oldSeriesInfo.get(k),$t=qt.seriesIndex,Qt=qt.color,Kt=_v(b,$t),Jt=Ns(A,b),te=qt.transformationInfo;i=b.systemConf.chart.plot.morph.duration;var ee={},ne=N();Gt.each((function(t,e){var n=ie(t,e);if(isNaN(n.x)||isNaN(n.y))return n.x=-1,null;var a=pc(n.x,n.y,n.width,n.height,jt,F,O),r=b.oldSeriesInfo.get($t).pathData[e],o=r.getAttribute("d");r.setAttribute("d",a);var i=r.cloneNode();r.setAttribute("d",o),ee[e]=Zt.interpolate({path:r,xOffset:Kt.x+te[e].x,yOffset:Kt.y+te[e].y},{path:i,xOffset:0,yOffset:0})})),Gt.style("fill",(function(t,e){return Qt[e]})).transition().duration(i).ease(bt).style("fill",(function(t,e){return Fs(b,Jt?e:0,t,$t,null)})).attrTween("d",(function(t,e){var n=ee[e];return function(t){return ne(n.map((function(e){return e(t)})))}})).on("end",(function(t,e){b.oldSeriesInfo&&delete b.oldSeriesInfo,l(this).style("fill",(function(){return Vt(Jt?e:0,t,null)})),Gt.attrs({y:function(t,n){var a=O?"x":"y";return h.getParamValue(a,t,e,n,kt)},height:function(t,n){var a=O?"width":"height";return h.getParamValue(a,t,e,n,kt)}});var n=ie(t,e);if(isNaN(n.x)||isNaN(n.y))return n.x=-1,null;var a=pc(n.x,n.y,n.width,n.height,jt,F,O);this.setAttribute("d",a)}))}else Gt.transition().duration(c?ft:0).delay((function(t,e){return xt==Fc||c?0:(e*tt+k)*ft})).attr("d",(function(t,e){var n=l(this),a=parseFloat(n.attr("height"));return v=O&&!ot?parseFloat(n.attr("y")):h.getParamValue("x",t,d,e,kt),m=O?h.getParamValue("y",t,d,e,kt):ot&&!a?h.getParamValue("y",t,d,e,kt,null,0):parseFloat(n.attr("y")),w=O?parseFloat(n.attr("height")):h.getParamValue("width",t,d,e,kt),T=O?h.getParamValue("height",t,d,e,kt):a,pc(v,m,w,T,jt,F,O)})).on("end",(function(t,e){l(this).transition().delay((function(t,n){return xt==Fc||c?0:(e*tt+k)*ft})).duration(ft).ease(bt).attr("d",(function(t){var n=ie(t,e);return isNaN(n.x)||isNaN(n.y)?(n.x=-1,null):pc(n.x,n.y,n.width,n.height,jt,F,O)}))})).attrs({y:function(t,e){var n=O?"x":"y";return h.getParamValue(n,t,d,e,kt)},height:function(t,e){var n=O?"width":"height";return h.getParamValue(n,t,d,e,kt)}});else Gt.transition().duration(c?ft:0).attrs({d:function(t,e){var n=ie(t,e);return pc(n.x,n.y,n.width,n.height,jt,F,O)},y:function(t,e){var n=O?"x":"y";return h.getParamValue(n,t,d,e,kt)},height:function(t,e){var n=O?"width":"height";return h.getParamValue(n,t,d,e,kt)}});if(b.syncTransition?Ht.exit().remove():Ht.exit().transition().duration(ft).remove(),d>0&&C){var ae=dc(ht,"g",I?[]:[1],".","class","subdividerseries_".concat(d)).selectAll("rect").data($,(function(t){return D.getX(t)})),re=ae.enter().append("rect").merge(ae).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:oe("width"),height:oe("height"),x:function(t,e){return oe("x",t,d,e,kt)},y:function(t,e){return oe("y",t,d,e,kt)}});re.transition().duration(ft).ease(bt).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:oe("width"),height:oe("height"),x:function(t,e){return oe("x",t,d,e,kt)},y:function(t,e){return oe("y",t,d,e,kt)}}),re.exit().remove()}function oe(t,e,n,r,o){switch(t){case"x":return O?a(e.y0):h.getParamValue("x",e,n,r,o);case"y":return O?h.getParamValue("y",e,n,r,o):a(e.y0);case"width":return O?1:wt;case"height":return O?wt:1}}function ie(t,e){return v=h.getParamValue("x",t,d,e,kt),m=h.getParamValue("y",t,d,e,kt),w=h.getParamValue("width",t,d,e,kt),T=h.getParamValue("height",t,d,e,kt),{x:v,y:m,width:w,height:T}}nt&&Pe.ganttHelpers.showDependencies(h,$,ht,d),h.getMarkerPosition=nt?Pe.ganttHelpers.getMarkerPosition:null})),rt){Kt=b.dataset.getColumnIdx("y",M),Jt=Ot.columnindex,te=Pt.columnindex,ee=[];if((Qt=($t=b.datalabels.renderer)?$t[k]:{})&&Qt.show){if("Map"==(ne=Qt.labeltype).constructor.name)(re=ne.get("val"))&&1==re.length?(ae=re[0])==Jt?ee.push(ae):ae==te||ae==Kt?ee.push(ae,ae):ee.push("others"):ee.push("others");else"y"==ne?ee.push(Kt,Kt):ee.push("others");ee.map((function(t,e){var n=t==Jt||"others"==t?null:e%2,a="others"==t?null:t;E.push({renderer:h,charttype:"bar",chartObj:b,rendererIndex:S,paneid:X,args:[W,k,0,n,a]})}))}}else"barrange"==q?(E.push({renderer:h,charttype:"bar",chartObj:b,paneid:X,args:[W,k,0,1]}),E.push({renderer:h,charttype:"bar",chartObj:b,paneid:X,args:[W,k,0,0]})):E.push({renderer:h,charttype:"bar",chartObj:b,rendererIndex:S,paneid:X,args:[W,_,null,null,null,S]})}else{d=!0,y.liveUpdate=o,r=wa(v&&v.datasetIndex,r);var Gt={type:q,chart:b,oldRenderer:h,data:m||p[k],operator:v?v.operator:null,paneid:X,legendOrder:_,rendererIndex:S,barDatasetIndex:r,config:{common:A,series:$,merged:Q},builderC:y,phase:c?"redraw":"draw"},Xt="boxplot"==q?new JP(Gt):"bullet"==q?new aE(Gt):new XP(Gt);if(t.parser=s=Xt,Xt.initialize(g),!e||!n)return c=!0,void(h.chartRendered=!0);Xt.getDefaultMarkParser(),Xt.render(g);var Zt=Xt.builderC,qt=Xt.seriesdataAfterUpdate;if(rt){var $t,Qt,Kt=b.dataset.getColumnIdx("y",M),Jt=Zt.median.columnindex,te=Zt.whiskers.columnindex,ee=[];if((Qt=($t=b.datalabels.renderer)?$t[k]:{})&&Qt.show){var ne,ae,re;if("object"==_typeof(ne=Qt.labeltype))(re=ne.get("val"))&&1==re.length?(ae=re[0])==Jt?ee.push(ae):ae==te||ae==Kt?ee.push(ae,ae):ee.push("others"):ee.push("others");else"y"==ne?ee.push(Kt,Kt):ee.push("others");ee.map((function(t,e){var n=t==Jt||"others"==t?null:e%2,a="others"==t?null:t;E.push({renderer:h,charttype:"bar",chartObj:b,rendererIndex:S,paneid:X,args:[W,k,0,n,a]})}))}}else"barrange"==q?(E.push({renderer:h,charttype:"bar",chartObj:b,paneid:X,args:[W,k,0,1]}),E.push({renderer:h,charttype:"bar",chartObj:b,paneid:X,args:[W,k,0,0]})):("bullet"==q&&Wu("bullet").call(b,Zt.targetMarker,h,qt[0],{paneid:X,rendererIndex:S,subIndex:0}),E.push({renderer:h,charttype:"bar",chartObj:b,rendererIndex:S,paneid:X,args:[W,_,null,null,null,S]}))}})),h.getSegments=function(e){var n=e._data(),r=t.params.whiskers.size;"string"==typeof t.params.whiskers.size&&t.params.whiskers.size.indexOf("%")>-1&&(r=parseFloat(t.params.whiskers.size)/100*t.params.xscale.bandwidth()/10);var o=t.params.whiskers.dataindex,i=(a(e[o][0])+a(e[o][1]))/2;return ip("horizontal-whisker",r,n[t.params.axisrotated?"_y":"_x"]+h.commonOption.barWidth/2,i,qc(e,a,null,null,null,o),t.params.axisrotated)};var p=t.params.chartObj;return i=d?s.builderC.animationOptions._duration:i,p.timerObj[p.timerObj.length]=h.renderedTimer=setTimeout((function(){c=!0,h.chartRendered=!0}),2*i+10),h}return h.getHighlighter=function(e,n,a){if(!h.highlighter){var r=a||Ui(e,null,n).name,o="bullet"==r,i="gantt"==r,l="boxplot"==r,s=t.params.whiskers&&t.params.whiskers.enabled&&"overlay"==t.params.whiskers.showOn;h.highlighter=o?new vP(e,h):i?new mP(e,h):s?new AP(e,h):l?new bP(e,h):new pP(e,h)}return h.highlighter},h.commonRendererProp=function(e){return arguments.length?(t=e,h):t},h.bandwidth1=function(t){return arguments.length?(e=t,h):e},h.bandwidth2=function(t){return arguments.length?(n=t,h):n},h.barDatasetIndex=function(t){return arguments.length?(r=t,h):r},h.shiftInfo=function(t){return arguments.length?(o=t,h):o},h.destroy=function(){t.parser&&t.parser.destroy()},h},Tm("boxplot.whisker",(function(t,e,n){var a="whiskers",r="whiskersOptionsMerged",o="edges"==this.builderC[a].showOn,i="highlight"===e,l=i?this.builderC[r].hoveroptions:this.builderC[r],s={mark:"g",selector:".whiskerSeries".concat(this.builderC.datasetIndex),data:t.disabled||!n?[]:[t.data],children:[]};if(n){var c=i?t.data:null;if(o){var u=HP.call(this,a,c,l,0),d=HP.call(this,a,c,l,1);s.children.push(u,d)}else{var h=HP.call(this,a,c,l);s.children.push(h)}}return s})),Tr.boxplot=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},whiskers:{enabled:!0,columnindex:3,dataindex:3,size:"50%",color:"#d8d8d8",opacity:.9,strokeWidth:1,showOn:"edges",events:{enabled:!0},hoveroptions:{strokeWidth:2,opacity:.9,color:"#d8d8d8",size:"60%"}},median:{enabled:!0,dataindex:2,columnindex:2,color:"#d8d8d8",opacity:.9,strokeWidth:1,hoveroptions:{strokeWidth:2,opacity:.9,color:"#d8d8d8",size:"60%"}},datalabels:{showAs:"y"},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},Tm("boxplot.median",(function(t,e,n){var a="medianOptionsMerged",r="highlight"===e,o=r?this.builderC[a].hoveroptions:this.builderC[a],i={mark:"g",selector:".medianSeries".concat(this.builderC.datasetIndex),data:!n||t.disabled?[]:[t.data],children:[]};if(n){var l=r?t.data:null,s=HP.call(this,"median",l,o);i.children.push(s)}return i})),pi.prototype.processBubblePieData=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.chartType||Gt.bubblepie,a=e.keyAccessor||Hv.getKey,r=e.dataIndex,o=this,i=t||o.processedseriesData,l=o.chartObj,s=o.dataset,c=o.data.chart.plot.plotoptions[we.get(n)],u=wa(r,Jn(c&&c.dataindex,3)),d=[],h=[],f={x:pn,y:[]},p=fa(l.userdata,"chart.axes.xaxis.categories"),g=s.getDataType("x")==To&&p&&p.length&&!Ao(l);return g&&(f.x=p),i.forEach((function(t,e){var n=pi.helpers.getParsedYAxisOrder(t.yaxiscolumnorder),r=fa(l.userdata,"chart.axes.yaxis[".concat(n,"].categories")),o=s.getDataType("y",n)==To&&r&&r.length&&!Ao(l),i=Ui(l,"".concat(t.row,"_").concat(t.column),e).value;o&&(f.y[n]=r),t.data.forEach((function(t,r){t.forEach((function(t){var o=v(t,e,i);if(h[r]=h[r]||[],d[r]=d[r]||[],!o){var s=a(t,e,l),c=h[r].indexOf(s);-1===c&&(c=h[r].length,d[r][c]=b(t,n)),d[r][c][e]=t,h[r].push(s)}t.disabled=t.dummy=o})),d[r]=d[r]||[]}))})),m(),d;function v(t,e,n){var a=i[e],r=pi.helpers.getParsedYAxisOrder(a.yaxiscolumnorder),c=a.disabled||!(Pl(n)||!qa(_e.axis,n)),u=s.getX(t),d=s.getY(t,r);return f.x&&(c=c||-1===f.x.indexOf(u)),f.y[r]&&(c=c||-1===f.y[r].indexOf(d)),l.isGeoMap&&!c&&(c=!o.isValidPoint(t)),c}function m(){d.forEach((function(t){t.forEach((function(t){i.forEach((function(e,n){t[n]||(t[n]=y(t,n))}))}))}))}function y(t,e){var n=pi.helpers.getParsedYAxisOrder(i[e].yaxiscolumnorder),a=l.dataset,r=[];return r[a.xidx]=t.x,hr(a.yidx)&&(r[a.yidx(n)]=t.y),r[a.zidx]=t.z,r[u]=null,r.dummy=!0,r}function b(t,e){var n=[];return n.x=s.getX(t),n.y=s.getY(t,e),n.z=s.getZ(t),n.reference=t,n}};var rE=pi.prototype.processBubblePieData;function oE(t,e,n,a){t.attrTween("d",(function(t,r){var o=Q(a[0],a[1]),i=Q(n[0],n[1]);return function(n){return e.outerRadius(o(n)),e.innerRadius(i(n)),e(t)}}))}function iE(t,e){t.selected=e.selected}wn.setComponent("size.isWithinSizeEncode",(function(t,e){var n=Fa(e.scales,(function(t){return"z-0"===t.id})),a=n.scale,r=n.schema.data,o=r.dataType,i=r.meta,l=ys(n.encode,n.key,e),s=l.nullAs;return ll(e.dataset.getZ(t),"z",e,a,l,{condition:function(t){return!Xn(t)||(na(s)||o===To&&Gn(i[i.datatype],"nullformatting"))}})}));var lE=wn.getComponent("annotation");Pe.pie=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f,v,y,b,x,C,k,w,_,S,O,A,T,P,E,L,M,D,I,R,z,j,F,B,H,V,Y,G,X,q=Z().sort(pn),$=U(),K=!1;function J(t){return t.each((function(t){var e=v.params;y=e.chartObj,L=e.commonPlotOptions,k=e.color,M=e.notesArray,y.systemConf;var n=e.labelQueue,a=e.yaxiscolumnorder,r=e.dataset,Z=e.datasetIndex||0,Q=e.bound,rt=e.rendererIndex,ot=void 0===rt?Z:rt,it=y.defsLocation,lt="".concat(L.maxRadius," _ ").concat(L.outerPadding," _ ").concat(L.innerRadius);T=Ao(y)?"".concat(Kn([t,t[Z]],"row"),"_").concat(Kn([t,t[Z]],"column")):null;var st=Ui(y,T,Z).name,ct=st===Ai,ut=!(D=st===Ti)&&!ct,dt=ut||Ao(y)&&Ys(y)?t:t[Z];X=ut?Jn(L.dataindex,3):r.yidx(a),G=D?_objectSpread(_objectSpread({},y.plotarea_approx),Q&&Q.polar):_objectSpread(_objectSpread({},Q),Y),O=G.width,S=G.height,b=Jn(G.radius,Xe(O,S)/2),s=!1;var ht,ft=dt.plotoptions,pt=L.datalabels,gt=Dn.getValueOfPlotOptions(ft,L),vt=L.mode,mt=void 0===vt?"radial":vt,yt=Jn(gt("maxRadius"),250),bt=L.levelMarker,xt=ct?+gt("outerPadding"):0,Ct=gt("strokeWidth"),kt=gt("cornerRadius")||0,wt=gt("padAngle")||0,_t=function(t){return t.data.disabled||t.startAngle===t.endAngle||!t.value?dn:pn};Ao(y)&&xt>b&&(xt=0),f=void 0!==L.baseValue?L.baseValue:0;var St=y.datalabels.moduleExists&&Ud(pt,y),Ot=St?+(pt.padding||0)+(Dd(pt,y)?2*(Id(pt,y)+Rd(pt,y)):0):0,At={},Tt=0;if(c=y.datalabels.moduleExists&&Dd(pt,y),I=Xe(yt,b-(xt+=ct?Ot:0)),ct&&St){var Pt=.3*O,Et=O-2*I;Et<Pt&&(Ot=At.padding=5,Tt=Ge(Pt-Et,0),I-=Tt/2)}if(x=Ox(L,I),Ct=Jn(Ct,1),D&&bt.enabled){var Lt,Mt;if(na(L.bandWidth)||na(L.maxBandWidth)){var Dt=Jn(L.maxBandWidth,I),It=Xe(Xa(L.bandWidth,I,I-x),Dt);Lt=-(I-x-It)/2,Mt=-(I-x-It)/2,ht=0===It?"hidden":pn}else Lt=Xe(0,Xa(bt.innerPadding,b,0)),Mt=Xe(0,Xa(bt.outerPadding,b,0));I+=Mt,x-=Lt}R=Ge(x,I-=.5*Ct),B=(ft&&ft.models?Rn(L.models,ft.models,!0):L.models)||{};var Rt=fp(L,ft,y,st),zt=Rt.enabled?K?200:Rt.duration:0,Ft=K?p:Rt.easingType,Bt=Rt.type,Ht=function(){l(this).style("display",_t)},Nt=0==Jn(bl(ft,L,y,"enabled"),!0),Wt=Nt?pn:bl(ft,L,y,"cursor")||fn;w=l(this),(_=dc(w,"g",[t],".","class","piegroup")).styles({"stroke-width":Ct,"fill-opacity":gt("fillOpacity"),"stroke-opacity":L.strokeOpacity,cursor:Wt,visibility:ht}),q.startAngle(L.startAngle).endAngle(L.endAngle).value((function(t){return t.disabled?0:Ze(t[X]||0)}));var Vt=q(t=ut||Ao(y)&&Ys(y)?t:dt.data[0]);if(J.data=Vt,j=Vt.reduce((function(t,e,n){return t+(e.value?1:0)}),0),J.total=C=Vt.reduce((function(t,e,n){return t+e.value}),0),J.arc=$,"radial"===mt)$.outerRadius(R).innerRadius(x);else{var Yt=Xa(L.interPadding,R,10),Ut=t.reduce((function(t,e){return t+(e.disabled||e.dummy?0:1)}),0),Gt=(R-x-(Ut-1)*Yt)/Ut,Xt=-1;Vt.forEach((function(t){t.data.disabled||t.data.dummy||Xt++,t.innerRadius=Xt*(Gt+Yt)+x,t.outerRadius=(Xt+1)*Gt+Xt*Yt+x})),$.startAngle(L.startAngle)}E=U().innerRadius(R).outerRadius(R+Ot);var Zt=U().innerRadius(R).outerRadius(R);z=Ct;var qt=at(_),$t=(qt.height+Ct)/I,Qt=(qt.width+Ct)/I,Kt=I+Xe((O-2*xt-Tt-(qt.width+Ct))/Qt,(S-2*xt-Tt-(qt.height+Ct))/$t);if(Kt=Xe(yt,Ge(I,Kt)),D){lt+=" _ ".concat(L.bandWidth," _ ").concat(bt.bandWidth," _ ").concat(bt.innerPadding," _ ").concat(bt.outerPadding);var Jt=e.yscale||y.axes.y.groups[0].scale,te=Jt.domain();Vt.forEach((function(t){var e=t.data[X];i=o,(o=e<0)?(t.startAngle=Jt(f!=pn?Math.min(f,te[1]):te[1]),t.endAngle=Jt(Math.max(e,te[0]))):(t.startAngle=Jt(f!=pn?Math.max(f,te[0]):te[0]),t.endAngle=Jt(Math.min(t.value,te[1])))}))}else Kt!=I&&(x=Ox(L,I=Kt),R=Ge(x,I),$.outerRadius(R).innerRadius(x),E=U().innerRadius(R).outerRadius(R+Ot),Zt=U().innerRadius(R).outerRadius(R),at(_));$.cornerRadius(kt).padAngle(wt);var ee,ne,ae=!D&&B.type?"url(".concat(it,"#").concat((ee=function(){var t=-1,e=B.count,n="zigzag"==B.type?x/5-50:"sun"==B.type?-1:-10,a=function(t){for(var e=[],n=[],a=0,r=0;r<t;r++)"gear1"==B.type?n.push([a++,0],[a++,1],[a++,1]):n.push([a,0],[a++,1],[a,1],[a++,0]);return e.push(n),e}(e),r=m().range([0,2*on]).domain([0,"gear1"==B.type?3*e:2*e]),o=m().range([x,R]).domain([n,1]);return W().curve(g("linearClosed")).radius((function(t){return o(t[1])})).angle((function(e,n){return t="gear"==B.type?n%2==0?t+1:t:"gear1"!=B.type&&n%2!=0?t+1:t,r("gear1"==B.type?t++:t)}))(a[0])}(),ne={name:"pieModels",id:y.id,d:ee},Hr.get(Hr.svg_clips,"polygon",ne,{chartObj:y})),")"):pn,re=[R,R],oe=J.fillColorFunc=Ls(y,Z,T,re),ie=Is(y,Z,T);if(F=2*Xa(gt("sliceOutHeight"),I,0),P=_.selectAll(mr).data(),yp(A=dc(_,mr,Vt)),A.attrs({"clip-path":ae,class:"zc_pie",id:function(t,e){return"arc_".concat(e)}}).styles({display:function(t){var e=l(this).style("display"),n=_t(t);return!K||e===dn&&n===dn||!il(t,y,Z)||"radial"!==mt&&(t.data.disabled||t.data.dummy)?n:pn},fill:function(t,e){return Ao(y)?Ls(y,e,T,re)(e,t.data):oe(e,t.data,null)},stroke:function(t,e){return Ao(y)?Is(y,e,T)(e,t.data,L.strokeColor):ie(e,t.data,L.strokeColor)}}),Xk(A,y,"pie"),$k(A,y,"pie"),Dl(y,A,Nt,T),y.cache.search||(y.cache.search={}),!Nt){var le=function(t,e){var n=we(t,e);y.eventHandler.handlers.mousemove.call(y.eventHandler,n),iE(t,n),y.cache.search.lastPane=T},se=function(t,e){var n=we(t,e);y.eventHandler.handlers.mouseout.call(y.eventHandler,n),iE(t,n),y.cache.search.lastPane=null},ce=function(t,e){var n=we(t,e);y.eventHandler.handlers.click.call(y.eventHandler,n,J,0,e,t),iE(t,n),y.cache.search.lastPane=T},ue=function(t,e){var n=lE._empty?t.data:Wm(t.data,pn),a=E.centroid(t);a=[a[0]+H,a[1]+V];var r=we(t,e);r.coordinate=a,r.basedOn="plot",r.data=n,y.eventHandler.handlers.doubleclick.call(y.eventHandler,r,e,r),iE(t,r),y.cache.search.lastPane=T};Iu(A,{mousemove:le,mouseout:se,click:ce,dblclick:ue},{singletouchmove:le,touchend:se,tap:ce,dbltap:ue},{target:"plot",touchleave:!0,chartObj:y})}if(/(\D)+onebyone/.test(Bt)&&!K){var de="fanonebyone"==Bt,he=de?zt:zt/j,fe=0;A.transition().ease(Ft).duration((function(t){return de?he*(t.value/C):he})).delay((function(t){var e=he*fe;return fe+=de?t.value/C:1,e})).call(de?et:tt).on("end",Ht)}else{var pe;if(pe=K?lt!=u?tt:nt:"fanAll"==Bt?nt:"inner"==Bt?tt:et,y.systemConf.chart.plot.morph.enabled&&null!=y.oldSeriesInfo){var ge=new _P({sampling:y.systemConf.chart.plot.morph.samplingDistance}),ve=y.oldSeriesInfo.get(Z),me=ve.seriesIndex,ye=ve.color,be=_v(y,me),xe=ve.transformationInfo;zt=y.systemConf.chart.plot.morph.duration;var Ce=N(),ke={};A.each((function(t,e){var n=y.oldSeriesInfo.get(me).pathData[e],a=n.getAttribute("d");n.setAttribute("d",$(t));var r=n.cloneNode();n.setAttribute("d",a),ke[e]=ge.interpolate({path:n,xOffset:be.x+xe[e].x,yOffset:be.y+xe[e].y},{path:r,xOffset:0,yOffset:0})})),A.style("fill",(function(t,e){return ye[e]})).transition().duration(zt).ease(Ft).style("fill",(function(t,e){return Fs(y,e,t.data,me,null)})).attrTween("d",(function(t,e){var n=ke[e];return function(t){return Ce(n.map((function(e){return e(t)})))}})).on("end",(function(t,e){y.oldSeriesInfo&&delete y.oldSeriesInfo,l(this).style("fill",(function(){return oe(e,t.data,null)})),this.setAttribute("d",$(t))}))}else A.transition().duration(zt).ease(Ft).call(pe).on("end",Ht)}function we(t,e){var n=xl(jt());return{renderer:J,seriesIndex:Ys(y)?e:0,subSeriesIndex:0,itemIndex:e,paneid:T,rendererIndex:ot,color:k[e%k.length],coordinates:[n.pageX,n.pageY],element:this,data:t,selected:t.selected,_key:pi.helpers.generatePointKey(y.id,T,0,0,e)}}y.timerObj[y.timerObj.length]=J.renderedTimer=setTimeout((function(){if(u=lt,d=x,h=R,D)y.renderer[ot].endFunctions();else if(Me&&!ut){var t=Ys(y)?[H+G.translate[0],V+G.translate[1]]:[H,V],a=[_.datum(),0,Vt,R,C,E,Zt,$,t,At,J.subSeriesIndex||0];n.push({renderer:J,charttype:Ai,chartObj:y,rendererIndex:ot,paneid:wa(T,Z),args:a}),n.push({renderer:J,charttype:"pieInnerLabels",chartObj:y,rendererIndex:ot,paneid:wa(T,Z),args:a})}var r=y.systemConf.notes;na(r)&&r.enabled&&!ut&&!lE._empty&&(M=lE.preprocessAnnotations(y.seriesdata,0,(function(t,e,n){var a=E.centroid(Vt[n]);return[a[0]+H,a[1]+V]}),M,y,e)),J.chartRendered=!0,K=!0,Ys(y)&&y.renderer[ot].endFunctions()}),zt+1e3/60)})),J}function tt(t){oE(t,$,[K?d:x,x],[K?h:x,R])}function et(t){t.attrTween("d",(function(t,e){var n=Q(t.startAngle,t.endAngle);return function(e){return t.endAngle=n(e),$(t)}}))}function nt(t){t.attrTween("d",(function(t,e){var n,a,r=P[e]||P[P.length-1];o?(n=K&&r&&i?r.endAngle:t.startAngle,a=K&&r&&i?r.startAngle:t.startAngle):(n=K&&r&&!i?r.endAngle:D?t.startAngle:L.startAngle,a=K&&r&&!i?P[e]?r.startAngle:r.endAngle:D?t.startAngle:L.startAngle);var l=Q(n,t.endAngle),s=Q(a,t.startAngle);return function(n){return t.endAngle=l(n)||0,t.startAngle=s(n)||0,$(t,e)}}))}function at(t){var e=[];e[X]=1;var n=q([e])[0];n.innerRadius=0,n.outerRadius=b;var a=w.append(mr).attr("d",$(n,J.data.length-1)).styles({fill:dn,stroke:dn}),r=Bn(a.node());a.remove();var o=kx(r,O,S,I,z);return H=D?G.x:o[0],V=D?G.y:o[1],y.plotarea.centerX=H,y.plotarea.centerY=V,t.attr("transform",(function(t,e){return"translate(".concat(H,",").concat(V,")")})),r}function rt(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=J.subSeriesIndex||0,l=Ao(y)?y.staticPaneSVG.selectAll("g.grid".concat(T)):y.staticPaneSVG;t=t||l.selectAll("g.".concat(Fo,"_").concat(o," g.subseries_").concat(i)),e=e||l.selectAll("g.link_".concat(o," g.subseries_").concat(i)),n=n||l.selectAll("g.label_".concat(o," g.subseries_").concat(i)),r=r||l.selectAll("g.boundboxseries_".concat(o," g.subseries_").concat(i)),a=a||l.selectAll("g.innerboundboxseries_".concat(o," g.subseries_").concat(i)),s=!0}return J.commonRendererProp=function(t){return arguments.length?(v=t,J):v},J.plotarea=function(t){return arguments.length?(Y=t,J):Y||G},J.innerRadius=function(t){return arguments.length?(x=t,J):x},J.defaultMouseOverFunc=function(o,i,l){if(1!=j){s||rt(v.params.rendererIndex);var u=function(t){return xx(F,(t.startAngle+t.endAngle)/2)}(o),d=J.subSeriesIndex||0,h={transform:"translate(".concat(u[0],",").concat(u[1],")")};A.transition().ease(p).attr("transform","translate(0,0)"),_.selectAll("#arc_".concat(l)).transition().ease(p).attrs(h),t.selectAll("#innerlbl0_".concat(d,"_").concat(l)).transition().ease(p).attrs(h),c||e.selectAll("#link0_".concat(d,"_").concat(l)).style("stroke-width",3*J.lineStrokeWidth);var f=n.selectAll("#lbl0_".concat(d,"_").concat(l)).node(),g=f?{transform:"translate("+(Number(f.getAttribute("x"))+u[0])+","+(Number(f.getAttribute("y"))+u[1])+")"}:h,m=t.selectAll("#innerlbl0_".concat(d,"_").concat(l)).node(),y=m?{transform:"translate("+(Number(m.getAttribute("x"))+u[0])+","+(Number(m.getAttribute("y"))+u[1])+")"}:h;"circular"==J.showlabel&&(n.selectAll("#lbl0_".concat(d,"_").concat(l)).transition().ease(p).attrs(h),r.selectAll("#boundboxlbl0_".concat(d,"_").concat(l)).transition().ease(p).attrs(g)),n.selectAll("#lbl0_".concat(d,"_").concat(l)).style("text-shadow","0 0 0 rgba(0,0,0,1)"),a.selectAll("#boundboxinnerlbl0_".concat(d,"_").concat(l)).transition().ease(p).attrs(y)}},J.defaultMouseOutFunc=function(o,i,l){s||rt(v.params.rendererIndex);var u={transform:"translate(0,0)"};n.selectAll(gr).style("text-shadow",pn),c||e.selectAll(mr).style("stroke-width",J.lineStrokeWidth);var d=J.subSeriesIndex||0,h=n.selectAll("#lbl0_".concat(d,"_").concat(o.itemIndex)).node(),f=h?{transform:"translate("+h.getAttribute("x")+","+h.getAttribute("y")+")"}:u,g=t.selectAll("#innerlbl0_".concat(d,"_").concat(o.itemIndex)).node(),m=g?{transform:"translate("+g.getAttribute("x")+","+g.getAttribute("y")+")"}:u;if(!wr.clickedTime&&l)return A.attrs(u),t.selectAll(gr).attrs(u),a.selectAll("#boundboxinnerlbl0_".concat(d,"_").concat(o.itemIndex)).transition().ease(p).attrs(m),void("circular"==J.showlabel&&(n.selectAll(gr).attrs(u),r.selectAll("#boundboxlbl0_".concat(d,"_").concat(o.itemIndex)).transition().ease(p).attrs(f)));A.transition().ease(p).attrs(u),t.selectAll(gr).transition().ease(p).attrs(u),"circular"==J.showlabel&&(n.selectAll(gr).transition().ease(p).attrs(u),r.selectAll("#boundboxlbl0_".concat(d,"_").concat(o.itemIndex)).transition().ease(p).attrs(f)),a.selectAll("#boundboxinnerlbl0_".concat(d,"_").concat(o.itemIndex)).transition().ease(p).attrs(m)},J.destroy=function(){w=A=_=null},J};var sE=Pe.pie;function cE(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=m(),n=k(),a=t.dim,r=t.bound,o=t.correction,i=void 0===o?function(t){return t}:o,l=this.chartObj,s=this.getConfig(),c=s.sizes,u=this.schema.domain,d=this.d3_scale.domain,h=this.schema.data.meta.datatype,f=u.ranges,p=function(t){return Xa(t,a)};if(c)return(c=$n(c,l,r,this)).map(p);var g=i(uE(s,l,this,r).map(p),r,this,l);if(f||h===To){var v=f||d;return n.domain(v).range(g),v.map((function(t){return n(t)}))}var y=[d[0],d[d.length-1]],b=g[0]+(g[1]-g[0])/2;return e.domain(y).range(y[0]==y[1]?[b,b]:g),d.map((function(t){return e(t)}))}function uE(t,e,n,a){var r=function(t,e){if(function(t){return Al(t.chartTypes[0].value)}(t))return["25%","100%"];if(t.systemConf.legend.singleLayout&&"z"===e.encode)return["2.5%","25%"];return["2%","20%"]}(e,n),o=$n(t.minSize,e,a,n),i=$n(t.maxSize,e,a,n);return[wa(o,r[0]),wa(i,r[1])]}wn.setComponent("svgRenderer.pie",sE),Tr.pie=function(t){var e={startAngle:0,endAngle:2*on,innerRadius:0,outerPadding:10,datalabels:{type:"circular",padding:5,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"fanAll"},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90}}},models:{count:50}};return"bubblepie"===t||"geobubblepie"===t?(e.strokeColor="transparent",e.outerPadding=.02,e.datalabels.showAs="percent",e.hoveroptions={innerFillColor:"transparent",innerStrokeColor:"transparent",outerFillColor:"transparent",outerStrokeWidth:3}):(e.strokeColor="white",e.sliceOutHeight=5,e.maxRadius=250,e.datalabels.showAs="x"),e};var dE=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"init",value:function(){_get(_getPrototypeOf(e.prototype),"init",this).call(this),this.d3_scale.clamp=!0;var t=this.getConfig(),n=t.base,a=this.chartObj,r=this.schema.domain,o=r.ranges,i=this.schema;o&&o._dummy&&(r.ranges=null),this.schema.data.dataType===Eo&&(a.isGeoMap||(this.schema.domain.base=n!==Oe?n:0),a.systemConf.legend.singleLayout&&(i.data.source=function(){return a.dataObject.getMinMaxZ()},i.data.condition=null,i.domain.key=[0,1]));var l=i.domain.key,s={config:t,columnKey:a.dataset.getColumnIdx("z")},c=function(t){return function(e){var n=e[t];return n=ol(n,s)}};i.domain.key=ua(l)?l.map(c):c(l)}},{key:"create",value:function(){var t=_get(_getPrototypeOf(e.prototype),"create",this).call(this),n=this.config,a=this.schema,r=Sv(n,a,t,yf("z",{config:n,dataType:a.data.dataType}));return r&&(n.ranges=r,a.domain.ranges=r,t=_get(_getPrototypeOf(e.prototype),"create",this).call(this)),this.scale=t}},{key:"parseRange",value:function(t){var e=this.chartObj,n=function(t){if(function(t){return Al(t.chartTypes[0].value)}(t))return 1;var e=t.plotarea;return Xe(e.width,e.height)}(e),a={dim:n,bound:cu(this.getConfig(),e.chartarea,t),correction:Py};return cE.call(this,a)}}]),e}(pd);wn.setComponent("sizeScale",dE),Tr.bullet=function(t){return{strictBandWidth:!0,outerPadding:1e-8,levelMarker:{enabled:!0,dataindex:2,color:[],colorGamma:[.3,.9],fillOpacity:.9,maxBandWidth:200},targetMarker:{enabled:!0,dataindex:3,symbol:"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:"rgba(0, 0, 0, 0.6)",outerStrokeOpacity:1,outerStrokeWidth:5,outerStrokeColor:"rgba(0, 0, 0, 0.6)",label:{fontSize:t.datalabels.fontSize.l5}},animation:{type:"verticalAll"},datalabels:{textOverlap:"none",showAs:"y",stackLabels:{show:!1,showAs:"y"}},gradients:{options:{linear:{y2:50}}},stacked:{enabled:!0}}},Tm("bullet.targetmarker",(function(t,e,n){var a="targetMarker",r=this.builderC[a],o={mark:"g",selector:".targetMarkerSeries",data:t.disabled||!n?[]:[t.data],children:[]};if(n){var i=HP.call(this,a,null,r,null,"outer"),l=HP.call(this,a,null,r,null,"inner");o.children.push(i),o.children.push(l)}return o})),Tr.dial=function(t){return{startAngle:-on/2,endAngle:on/2,innerRadius:"65%",maxRadius:500,outerPadding:20,padding:0,interPadding:10,strokeColor:"rgba(0,0,0,0.1)",mode:"radial",animation:{type:"fanAll"},needle:{show:!0,type:"round",strokeColor:"black",fillColor:"grey",width:15,padding:15},minmaxlabels:{show:!0,fontSize:t.datalabels.fontSize.l5},datalabels:{show:!0,showAs:"y",padding:2},levelMarker:{enabled:!0,strokeColor:"rgba(0,0,0,0.1)",innerPadding:0,outerPadding:0,colorGamma:[.3,.9]},targetMarker:{outerStrokeWidth:3,symbol:"line",innerFillOpacity:0,innerStrokeOpacity:0,outerFillColor:"grey",outerStrokeColor:"#000"},gradients:{options:{linear:{x2:2,y2:2,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:16.5,spreadMethod:"reflect"}}},events:{enabled:!1}}},Ax.handleEvents=function(t,e,n,a,r){var o,i,l,s=r[0].data[0][0],c="levelmarker"===a,u=t.renderer[0].levelMarker,d=u&&u.values.length,h=t.systemConf.chart.plot.plotoptions.dial,f=t.systemConf.tooltip.enabled,p=n.events||{},g=Jn(p.enabled,h.events.enabled),v=g?p.cursor||fn:null;if(e.style("cursor",v),g){var m=t.dataset,y=t.userdata.metadata.columns,b=r[0].data[0].length,x=y.filter((function(t){return t.dataindex===n.dataindex})),C=x.length?x[0]:y[m.getColumnIdx("y",0)],k=function(e,a){c?e[1]:e[n.dataindex];var r,o,i,l,s,u,d=P(e),h=Il(jt(),{x:0,y:0},0,0,t,{seriesIndex:0,subseriesIndex:0,itemIndex:a});if(e._color&&(h.helpers.color=e._color),f){var g=$n(p.tooltipContent,d,t)||(c?"Range: ":"Target: ")+d.formattedValue;t.eventHandler.tooltipElement.show(t,(r=Lu(t.svg.node(),jt()),o={x:r[0],y:r[1]},i={left:o.x,top:o.y},l=xl(jt()),s=o.x-l.clientX,u=o.y-l.clientY,i.left-=s,i.top-=u,i.dLeft=s,i.dTop=u,i),g,!1,h.helpers)}},w=function(){if(f){var e=t.eventHandler.tooltipElement;e.hide(e.element)}};l=C.datatype,i=C[l];var _=function(e,n){var a=t.eventHandler.tooltipElement;a&&a.timeout&&clearTimeout(a.timeout),!1!==t.stopPropogate&&jt().stopPropagation();var r=t.zcEventType||"mousemove";T(s,r,jt(),e),k(e,n)},S=function(e,n){var a=t.zcEventType||"mouseout";T(s,a,jt(),e),w()},O=function(e,n){var r=jt()&&jt().touches,o=t.zcEventType||"click",i=b+n+1+("targetmarker"===a?d:0);if(T(s,o,jt(),e),r&&"taphold"!==o){Dk(t);(new Date).getTime(),t.renderer[0];var l=t.eventHandler.tapOldInfo;l&&l.itemPos==i?(w(),t.eventHandler.tapOldInfo=null):(k(e,n),t.eventHandler.tapOldInfo={seriesPos:0,subseriesindex:0,itemPos:i,type:a})}},A=function(e,n){var a=t.zcEventType||"doubleclick";T(s,a,jt(),e)};Iu(e,{mousemove:_,mouseout:S,click:O,dblclick:A},{singletouchmove:_,touchend:S,tap:O,dbltap:A},{target:"plot",touchleave:!0,chartObj:t})}function T(e,n,a,r){return $n(p[n],a,P(r),t)}function P(e){var a=c?e[1]:e[n.dataindex];return{value:a,formattedValue:Wo(i,a,l,t),actualData:s,data:o=o||t.dataset.getMetaInfoObj(t,s,0)}}},Ax.targetMarker=function(t,e,n,a,r,o,i){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=a.systemConf,u=c.chart.plot.plotoptions.dial,d=a.dataset,h=0,f=s.paneid,p=s.bound,g=a.axes.y.groups[0].scale,v=g.domain(),m=r[0].data[0],y=u.targetMarker,b=y.align,x=y.dAlign,C=+(y.padding||0),k=/line/.test(y.symbol)?90:0,w=!/(outer|inner)/g.test(b)&&/line/.test(y.symbol)?(e-n-2*C)/10:1,_=10*Jn(y.size,w),S={symbolSize:{outer:1,inner:.5},color:a.seriesColor[0],strokeWidth:w},O=x===ro?_/2+C:x===ao?-_/2-C:0,A=b===ro?e+O:b===ao?n+O:(e+n)/2,T=dc(t,"g",y.enabled?m:[],".","class","targetmarker"),P=dc(t,"g",y.enabled&&o?m:[],".","class","targetmarker-eventhandler");T.attr("transform",H).styles({display:N,"stroke-dasharray":Gr(y.dashStyle,Jn(y.outerStrokeWidth,1)),"stroke-linecap":Xr(y.lineCap,y.dashStyle)}).each((function(){ap(l(this),null,y,S,a)})),V(P),Ax.handleEvents(a,P,y,"targetmarker",r);var E=y.label||{},L=Jn(E.padding,2),M=b===ro?A+_/2+L:b===ao?(x===ro?n:A-_/2)-L:e+L;if(!i){var D=a.staticPaneSVG.selectAll("g.labelholder"),I=wc("g",".targetSeries",[1],D),R=a.plotarea_approx;Ao(a)?(i=wc("g",".target_grid"+f,[1],I)).attr("transform","translate(".concat(p.x+R.x||0,",").concat(p.y+R.y||0,")")):(i=wc("g",".target_0",[1],I)).attr("transform","translate(".concat(R.x||0,",").concat(R.y||0,")"))}var z=dc(i,"text",y.enabled&&wa(E.enabled,!0)&&!a.renderer[0].firedList.targetSeries?m:[]);vc(z,[E,c.chart,c.canvas,wr]),z.each((function(t){var e=l(this);e.style("display",dn);var n=t[y.dataindex];if(na(n)){if(n=Ax.getValueWithinRange(n,v),JSON.parse(u.minmaxlabels.show)&&-1!=v.indexOf(n)||W(t))return;var r=g(n),o=Cx(r),i=xx(M,r),s=a.userdata.metadata.columns,c=s.filter((function(t){return t.dataindex===y.dataindex})),f=c.length?c[0]:s[d.getColumnIdx("y",0)],p=f.datatype,m=f[p],x=0===o?"middle":b===ao?o<0||o>on?null:"end":o<0||o>on?"end":null,C=b===ao?o>on/2&&o<3*on/2?null:"".concat(-wx(o),"em"):o>on/2&&o<3*on/2?"".concat(wx(o),"em"):null,k=na(E.text)?d.getCustomizedVal(a,E.text,h,null,null,t,"targetLabel"):Wo(m,n,p,a,"targetLabel");e.text(k).style("display",null).attrs({"text-anchor":x,dy:C,transform:"translate(".concat(i[0],",").concat(i[1],")")})}}));var j=z.filter((function(){return l(this).style("display")!==dn})).nodes().reverse(),F=Fw(j),B=function(t,e){l(t).style("display",dn),F[e]={x1:0,y1:0,x2:0,y2:0}};function H(t){var e=t[y.dataindex];if(na(e)){e=Ax.getValueWithinRange(e,v);var n=g(e),a=xx(A,n),r=Sx(n)+k;return"translate(".concat(a[0],",").concat(a[1],") rotate(").concat(r,",0,0)")}}function N(t){return!na(t[y.dataindex])||W(t)?dn:null}function W(t){return t.disabled}function V(t){var r=y.events&&y.events.triggerOffset||0;S.strokeWidth=(_+2*r)/10,t.attrs({transform:H,id:function(t,e){return"ZCtargetmarker_eventhandler_".concat(e)}}).styles({display:N,opacity:0}).each((function(){var t=l(this);if(ap(t,null,y,S,a),"line"===y.symbol){var o=_>=e-n?_:Ge(_+r,e-n),i=r||1;t.selectAll("*").attr("d",np("rect")(o,i))}}))}jw(j,F,B)},Pe.dial=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f,g,v,m,y,b=!1,x=Pe.pie(),C=function(t){return r.getY(t,o)};function k(_){return _.each((function(_){var S=t.params,O=S.bound;e=S.chartObj,a=S.commonPlotOptions,S.color,r=S.dataset,o=S.yaxiscolumnorder,e.systemConf,y=_[0].data[0];var A=_[0].plotoptions,T=_[0],P=y.length,E=Ao(e)?"".concat(T.row,"_").concat(T.column):null;i=C(y),d=i<0;var L=e.defsLocation,M=S.labelQueue,D=S.rendererIndex;c=S.yscale||e.axes.y.groups[0].scale,u=c.domain(),s=O.polar;var I=fp(a=A?Rn(a,A,!0):a,A,e,Ti),R=I.enabled,z=I.easingType,j=b?R?200:0:I.duration,F=function(t){if(Ao(e)){var n=t[0].data[0];t[0].data[0]=[n[0]]}return[t]}(_),B=l(this).data(F);B.selectAll("".concat(mr,".dial")).data();var N=a.levelMarker;v="".concat(a.innerRadius," _ ").concat(a.outerPadding," _ ").concat(a.maxRadius," _ ").concat(a.bandWidth," _ ").concat(N.bandWidth," _ ").concat(N.innerPadding," _ ").concat(N.outerPadding);var W,V=s.radius,Y=Jn(N.strokeWidth,1),G=wa(N.cornerRadius,a.cornerRadius),X=wa(N.padAngle,a.padAngle),Z=a.mode,q=void 0===Z?"radial":Z,$=Ox(a,V);m=U().endAngle((function(t){return c(t[1])})).cornerRadius(G).padAngle(X);var Q=k.levelMarker=Ax.createLevelsNColors(_,N,Bs(e,0,E),u),K=Q.colors;if("radial"===q){var J,tt;if(na(N.bandWidth)||na(N.maxBandWidth)){var et=Jn(N.maxBandWidth,V),nt=Math.min(Xa(N.bandWidth,V,V-$),et);J=(V-$-nt)/2,tt=(V-$-nt)/2,W=0===nt?"hidden":null}else J=Ge(0,Xa(N.innerPadding,V,0)),tt=Ge(0,Xa(N.outerPadding,V,0));m.innerRadius($+J).outerRadius(V-tt-.5*Y).startAngle((function(t){return c(t[0])}))}else{var at=y.reduce((function(t,e){return t+(e.disabled?0:1)}),0),rt=Xa(a.interPadding,V,10),ot=(V-$-(at-1)*rt)/at,it=-1;Q.values.forEach((function(t,e){y[e].disabled||it++,t.innerRadius=it*(ot+rt)+$,t.outerRadius=(it+1)*ot+it*rt+$})),m.startAngle(a.startAngle),W=function(t,e){return y[e].disabled?"hidden":null}}var lt=dc(B,"g",[1],".","class","levelmarkerSeries"),st=dc(lt,mr,N.enabled?Q.values:[]);st.attr("class",(function(t,e){return"ZClevelmarker_".concat(e)})).attr("transform","translate(".concat(s.x,",").concat(s.y,")")).styles({stroke:function(t,e){return N.strokeColor||K[e]},"stroke-width":Y,"stroke-opacity":N.strokeOpacity,"fill-opacity":N.fillOpacity,fill:function(t,n){var r=K[n],o=Nr(a.gradients,[V,V],r),i=o?Hr.get(Hr.svg_gradients,"svgGradientFill",o,{offset:"pie",chartObj:e}):null;return i?"url(".concat(L,"#").concat(i,")"):r},visibility:W}),b&&v!=h?st.transition().duration(j).ease(p).call((function(t){oE(t,m,[g,m.innerRadius()()],[f,m.outerRadius()()])})):st.attr("d",m),Ax.handleEvents(e,st,N,"levelmarker",_),P>1&&"radial"===q&&B.selectAll("g.piegroup path").sort((function(t,e){return t.index-e.index})),t.commonPlotOptions(a),x.commonRendererProp(t),x.chartRendered=!1,B.call(x),P>1&&"radial"===q&&B.selectAll("g.piegroup path").sort((function(t,e){return H(C(t.data),C(e.data))})),n=x.innerRadius();var ct=dc(B,"g",[1],".","class","targetSeries");Ax.targetMarker(ct,s.actualRadius,s.innerRadius,e,_,!0,void 0,{paneid:E,bound:O}),ct.attr("transform","translate(".concat(s.x,",").concat(s.y,")"));var ut=a.needle,dt=F[0][0].data[0],ht=ut.fillColor,ft=ut.strokeColor;dc(B,mr,ut.show?dt:[],".","class","dial").attr("d",Ax.getNeedlePolygon(ut,s,n)).styles({stroke:null===ft?function(t,n){return Bs(e,n,E)}:ft||"black",fill:null===ht?function(t,n){return Bs(e,n,E)}:ht||dn,"stroke-width":ut.strokeWidth,visibility:function(t){return function(t){return t.disabled}(t)?"hidden":null}}).transition().duration(j).ease(z).call(w),Me&&M.push({renderer:k,charttype:Ti,chartObj:e,args:[_,0],rendererIndex:D,paneid:wa(E,0)})})),k}function w(t){var e,n,r,o,i=s.x,l=s.y,h=void 0!==a.baseValue?a.baseValue:0;t.attrTween("transform",(function(t,a){b?o=iu(this).rotate:(n=d?u[1]:u[0],null!=h&&(n=d?Xe(h,n):Ge(h,n)),o=Sx(c(n))),e=Xe(Ge(C(t),u[0]),u[1]),r=Sx(c(e));var s=Q(o,r);return function(t){return"translate(".concat(i,",").concat(l,") rotate(").concat(s(t),",0,0)")}}))}return k.commonRendererProp=function(e){return arguments.length?(t=e,k):t},k.endFunctions=function(){h=v,f=m.outerRadius()(y[0]),g=m.innerRadius()(y[0]),k.chartRendered=!0,b=!0},k.defaultMouseOutFunc=function(){if(e.systemConf.tooltip.enabled){var t=e.eventHandler.tooltipElement;t.hide(t.element)}},k},Tr.funnel=function(){return{weighted:"height",split:!1,canOverlap:!0,threeDimension:!0,outerPadding:"2%",stemHeight:"20%",stemWidth:"20%",stemRadius:"0",borderRadius:"0 0 0 0",coneWidth:"100%",strokeColor:"transparent",emptyFunnel:{show:!1,color:"#FAFAFA"},datalabels:{showAs:"x",type:"strokeddoubleside",padding:30,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.6,0]}}},animation:{type:"vertical"}}};var hE=wn.getComponent("annotation");function fE(t,e,n,a){return{start:pE(t.source,n,a),end:pE(t.target,n,a),type:e.link.type.toUpperCase()||"ES"}}function pE(t,e,n){var a=e.commonOption;return{x:e.getParamValue("x",t,n,null,a),y:e.getParamValue("y",t,n,null,a),width:e.getParamValue("width",t,n,null,a),height:e.getParamValue("height",t,n,null,a)}}Pe.funnel=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f,g,v,y,b,x,C,k,w,_,S,O,A,T,P,E,L,M,D,I,R,z,j,F,B,H,W,V,Y,U,G,X,Z,q,$,K={},J=!1,tt=[];function et(T){T.each((function(T){X=t.params,e=X.chartObj,I=X.commonPlotOptions,g=X.color,z=X.notesArray,M=X.yaxiscolumnorder,c=X.dataset,R=e.systemConf;var P=X.labelQueue,Q=X,ot=Q.bound,lt=Q.rendererIndex,ut=Ao(e)&&Ys(e)?T:T[0];$=Ao(e)?"".concat(ut.row,"_").concat(ut.column):null,G=e.defsLocation;var dt=_objectSpread(_objectSpread({},ot),q);u=dt.width,f=dt.height,Z=!1,D=T[0].plotoptions;var ht=Dn.getValueOfPlotOptions(D,I);W=R.legend.imagePallete||us.hasPatternPallete(e),K.canOverlap=ht("canOverlap"),F=ht("split"),b=ht("threeDimension");var ft=I.emptyFunnel;j=I.datalabels.padding;var pt=e.datalabels.moduleExists&&Ud(I.datalabels,e),gt=Is(e,0);w=wa(I.minPadding,b?4:1),_=wa(I.maxPadding,10);var vt=fp(I,D,e,Pi),mt=vt.type,yt=vt.easingType,bt=vt.enabled,xt=vt.duration,Ct=bt?200:0;B=Xa(ht("outerPadding"),f,0)/2,i=ht("stemHeight"),s=ht("stemWidth");var kt=ht("borderRadius"),wt=ht("stemRadius"),_t={};if(Y="width"===ht("weighted"),U=ht("weighted")===dn,Y&&(i=s=0,F=!0),null!==kt)if(0!=i&&"0%"!=i)kt=null,wt=null;else if("number"==typeof kt)_t.topLeft=_t.topRight=_t.bottomLeft=_t.bottomRight=kt;else if(Array.isArray(kt)||"string"==typeof kt){var St="string"==typeof kt?kt.split(" ").map(Number):kt;_t.bottomLeft=St[0],_t.bottomRight=St[1],_t.topRight=St[2],_t.topLeft=St[3]}else"object"===_typeof(kt)&&(_t.bottomLeft=kt.bottomLeft,_t.bottomRight=kt.bottomRight,_t.topRight=kt.topRight,_t.topLeft=kt.topRight);n=T=Ys(e)?T:T[0].data[0],a=n.reduce((function(t,e,n){return t+(c.getY(e,M)&&!e.disabled?1:0)}),0),o=a-1;var Ot=function(){var t=f-2*B,e=.05*t,a=it(t);return e=(e-n.length)/n.length,e=Ge(1,e),e=b?K.canOverlap?e+_/2:a/2-0:0}();K.height=f-2*Ot-.01*f-2*B;var At=ht("coneWidth");if(At=Xa(At,K.height,.95*K.height),K.width=Xe(u,At),k=it(K.height),K.gapHeight=!bt||F||J||mt==Nc?k:0,(Y||U)&&na(I.maxSliceHeight)&&(K.height-=Ge(0,K.height-k*o-Xa(I.maxSliceHeight,K.height)*a)),pt){var Tt=.3*u,Pt=u-K.width;Pt<Tt&&(j=K.datalabelPadding=5,K.width-=Ge(Tt-Pt,0))}i=Xa(i,K.height,.2*K.height),s=Xa(s,K.width,i*K.width/K.height)/2,r=K.height-i,x=.05*K.height,x=Ge(1,(x-n.length)/n.length),C=x=b?K.canOverlap?x+_/2:k/2-0:0,et.total=d=n.reduce((function(t,e,a){return t+(n[a].disabled?0:Ze(c.getY(n[a],M)||0))}),0),V=Ge.apply(null,n.map((function(t,e){return n[e].disabled?0:Ze(c.getY(n[e],M))/d}))),L=m().domain(Y?[0,V]:[i,K.height]).range([K.width/2-s,0]),E=m().domain(Y?[0,V]:[i,K.height]).range([K.width/2+s,K.width]),h=nt(n,{border:_t,stemRadius:wt}),H=[K.width,K.height],et.fillColorFunc=Ls(e,0,null,H),Ao(e)?n.forEach((function(t,n){tt[n]=Ls(e,n,$,H)})):tt[0]=et.fillColorFunc;var Et=0==Jn(bl(D,I,e,"enabled"),!0),Lt=Et?null:bl(D,I,e,"cursor")||fn,Mt=Xa($n(ht("x"),e,K),u,u/2-K.width/2),Dt=Xa($n(ht("y"),e,K),f,x+2+B);e.plotarea.centerX=Mt,e.plotarea.centerY=Dt;var It=l(this);if((S=dc(It,"g",[T],".","class","funnelgroup")).attr("transform","translate(".concat(Mt,",").concat(Dt,")")).styles({cursor:Lt,"stroke-opacity":ht("strokeOpacity"),"stroke-width":ht("strokeWidth")}),O=dc(S,"g",[1],".","class","ellipsegroup"),A=dc(S,"g",[1],".","class","trapezoidgroup"),re(v=dc(A,mr,n)),v.attrs({class:"zc_funnel",id:function(t,e){return"funnel".concat(e)}}).styles({"fill-opacity":I.fillOpacity,fill:function(t,n){return Ao(e)?tt[n](n,t):tt[0](n,t)},stroke:function(t,n){return Ao(e)?Is(e,n,$)(n,t,I.strokeColor):gt(n,t,I.strokeColor)},"stroke-width":function(t){return t&&t.disabled?0:null}}),re(y=dc(O,mr,b?n:[])),y.attrs({class:"zc_funnel",id:function(t,e){return"ellipse".concat(e)}}).styles({"fill-opacity":I.fillOpacity,fill:function(t,n){return Ao(e)?tt[n](n,t,.5):tt[0](n,t,.5)},stroke:function(t,n){return Ao(e)?Is(e,n,$)(n,t,I.strokeColor,.5):gt(n,t,I.strokeColor,.5)}}),Xk(v,e),Xk(y,e),$k(v,e,"funnel"),$k(y,e,"funnel"),Dl(e,v,Et,$),Dl(e,y,Et,$),e.cache.search||(e.cache.search={}),!Et){var Rt=function(t,n){var a=oe(t,n);e.eventHandler.handlers.mousemove.call(e.eventHandler,a),iE(t,a),e.cache.search.lastPane=$},zt=function(t,n){var a=oe(t,n);e.eventHandler.handlers.mouseout.call(e.eventHandler,a,n),iE(t,a),e.cache.search.lastPane=null},Ft=function(t,n){var a=oe(t,n);e.eventHandler.handlers.click.call(e.eventHandler,a,t,0,n,et),iE(t,a),e.cache.search.lastPane=$},Bt=function(t,n){var a=hE._empty?t:Wm(t,null),r=h[T.length-1-n].bottomLeft;r=[r[0]+(u/2-K.width/2),r[1]+(x+2+B)];var o=oe(t,n);o.coordinate=r,o.basedOn="plot",o.data=a,e.eventHandler.handlers.doubleclick.call(e.eventHandler,o,n,t),iE(t,o),e.cache.search.lastPane=$},Ht={target:"plot",touchleave:!0,chartObj:e},Nt={mousemove:Rt,mouseout:zt,click:Ft,dblclick:Bt},Wt={singletouchmove:Rt,touchend:zt,tap:Ft,dbltap:Bt};Iu(v,Nt,Wt,Ht),Iu(y,Nt,Wt,Ht)}var Vt=K.canOverlap?2*s/K.width*x:x+0,Yt="M0,0L".concat(K.width/2-s,",").concat(r,"L").concat(K.width/2-s,",").concat(K.height,"A").concat(s,",").concat(Vt,",0,0,0,").concat(K.width/2+s,",").concat(K.height,"L").concat(K.width/2+s,",").concat(r,"L").concat(K.width,",0A").concat(K.width/2,",").concat(x,",0,0,0,0,0")+"A".concat(K.width/2,",").concat(x,",0,0,0,").concat(K.width,",0");if(dc(S,mr,!J&&ft.show&&bt?[1]:[],"#","id","emptyFunnel").attr("d",Yt).styles({stroke:ft.color||"grey",fill:dn}),e.systemConf.chart.plot.morph.enabled&&null!=e.oldSeriesInfo||function(t){var n;if(Y)n=null;else{var a={name:"FunnelClipPath",id:e.id,d:t};n=Hr.get(Hr.svg_clips,"polygon",a,{chartObj:e})}S.attr("clip-path",n?"url(".concat(G,"#").concat(n,")"):null)}(Yt),J)v.transition().duration(Ct).ease(p).attr("d",(function(t,e){return st(h[n.length-1-e])})),y.transition().duration(Ct).ease(p).attr("d",(function(t,e){return ct(h[n.length-1-e])})),rt(T,Ct),ae();else{rt(T,0);var Ut=0,Gt=0;if(e.systemConf.chart.plot.morph.enabled&&null!=e.oldSeriesInfo){var Xt=new _P({sampling:e.systemConf.chart.plot.morph.samplingDistance}),Zt=e.oldSeriesInfo.get(0),qt=Zt.seriesIndex,$t=Zt.color,Qt=_v(e,qt),Kt=e.systemConf.chart.plot.morph.duration,Jt=Zt.transformationInfo,te=N(),ee={};v.each((function(t,a){var r=e.oldSeriesInfo.get(qt).pathData[a],o=r.getAttribute("d");r.setAttribute("d",st(h[n.length-1-a]));var i=r.cloneNode();r.setAttribute("d",o),ee[a]=Xt.interpolate({path:r,xOffset:Qt.x+Jt[a].x,yOffset:Qt.y+Jt[a].y},{path:i,xOffset:0,yOffset:0})})),v.style("fill",(function(t,e){return $t[e]})).transition().duration((function(){return Kt})).ease(yt).style("fill",(function(t,n){return Fs(e,n,t.data,qt,null)})).attrTween("d",(function(t,e){var n=ee[e];return function(t){return te(n.map((function(e){return e(t)})))}})).on("end",(function(t,a){e.oldSeriesInfo&&delete e.oldSeriesInfo,l(this).style("fill",(function(){return(Ao(e)?tt[a]:tt[0])(a,t,null)})),Gt++,this.setAttribute("d",st(h[n.length-1-a]))}))}else v.transition().duration((function(t,e){var n=c.getY(t,M);return mt==jc?t.disabled||!n?0:Y||U?xt/a:Ze(n)/d*xt:xt})).delay((function(t,e){var n=c.getY(t,M);return Ut+=t.disabled||!n?0:Y||U?xt/a:Ze(n),(mt==jc?Y||U?xt-Ut:(d-Ut)/d*xt:0)||0})).ease(yt).attrTween("d",(function(t,e){return at(t,n.length-1-e,"funnel",mt)})).on("end",(function(t,e){Gt++})),Ut=0,y.transition().duration((function(t,e){var n=c.getY(t,M);return mt==jc?t.disabled||!n?0:Y||U?xt/a:Ze(n)/d*xt:xt})).delay((function(t,e){var n=c.getY(t,M);return Ut+=t.disabled||!n?0:Y||U?xt/a:Ze(n),(mt==jc?Y||U?xt-Ut:(d-Ut)/d*xt:0)||0})).ease(yt).attrTween("d",(function(t,e){return at(t,n.length-1-e,"ellipse",mt)}));var ne=setInterval((function(){Gt==n.length&&(mt!=Nc&&(K.gapHeight=k,h=nt(n,{border:_t,stemRadius:wt}),v.transition().duration(bt?250:0).delay(50).ease(p).attr("d",(function(t,e){return st(h[n.length-1-e])})),y.transition().duration(bt?250:0).delay(50).ease(p).attr("d",(function(t,e){return ct(h[n.length-1-e])}))),ae(),S.selectAll("".concat(mr,"#emptyFunnel")).transition().duration(50).delay(310).style("stroke-opacity",0).remove(),clearInterval(ne))}),10)}function ae(){et.renderedTimer=setTimeout((function(){var t=function(t,e){var n=[],o=0,i=0,l=function(t,e){return e?t>=r?K.width/2-s:L(K.height-t):t>=r?K.width/2+s:E(K.height-t)};return t.forEach((function(u,h){var f=t[t.length-1-h],p=c.getY(f,M),g=f.disabled,v=e[h],m=i=(i=(g?0:Y||U?p?1/a:0:Ze(p)/d)*(K.height-(a-1)*K.gapHeight)/2)||0;i=o+i;var y=p/d;y=y||0;var b=Y?L(y):K.height-i>=r?K.width/2-s:L(i),x=Y?E(y):K.height-i>=r?K.width/2+s:E(i);n.push({rightx:x+j,leftx:b-j,y:Ze(K.height-i),y0:Ze(K.height-i+m),polygon:[v.bottomRight,v.middleRight,v.topRight,v.topLeft,v.middleLeft,v.bottomLeft],_x:l}),i+=m,o=!p||g?i:i+K.gapHeight})),n}(n,h);if(Me){var o=Ys(e)?[Mt+dt.translate[0],Dt+dt.translate[1]]:[Mt,Dt],i=[e.seriesdata,0,n,a,x+2+B,d,K,t,et.subSeriesIndex||0,o];P.push({renderer:et,charttype:Pi,chartObj:e,args:i,rendererIndex:lt,paneid:$}),P.push({renderer:et,charttype:"funnelInnerLabels",chartObj:e,args:i,rendererIndex:lt,paneid:wa($,0)})}hE._empty||(z=hE.preprocessAnnotations(e.seriesdata,0,(function(t,e,n){return[h[h.length-1-n].bottomLeft[0]+(u/2-K.width/2),h[h.length-1-n].bottomLeft[1]+(x+2+B)]}),z,e,X)),J=!0,et.chartRendered=!0,Ys(e)&&e.renderer[lt].endFunctions()}),bt?J?Ct:300:0),e.timerObj&&(e.timerObj[e.timerObj.length]=et.renderedTimer)}function re(t){t._groups[0].reverse(),t.data(n)}function oe(t,n){var a=xl(jt());return{renderer:et,seriesIndex:Ys(e)?n:0,subSeriesIndex:0,itemIndex:n,paneid:$,rendererIndex:lt,color:g[n%g.length],coordinates:[a.pageX,a.pageY],element:this,data:t,selected:t.selected,_key:"ZC_".concat(e.id,"_0_0_").concat(n)}}}))}function nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{border:null,stemRadius:null},n=0,o=K.height,i=0,l=0;h=[],s;t.length;return t.forEach((function(u,f){var p=t[t.length-1-f],g=c.getY(p,M),v=p.disabled;l=d?(v?0:Y||U?g?1/a:0:Ze(g)/d)*(K.height-(a-1)*K.gapHeight):0,l=i+(l=l||0);var m=g/d;m=m||0;var y={};(n+=v?0:g)!=d||0!=g&&!v?Y?(y.bottomLeft=[L(m),K.height-l],y.topLeft=[L(m),o],y.middleLeft=[L(m),K.height-l],y.bottomRight=[E(m),K.height-l],y.topRight=[E(m),o],y.middleRight=[E(m),K.height-l]):(y.bottomLeft=[K.height-l>=r?K.width/2-s:L(l),K.height-l],y.topLeft=[o>=r?K.width/2-s:L(i),o],y.middleLeft=[o>=r?K.width/2-s:y.bottomLeft[0],o>=r&&K.height-l<=r?r:K.height-l],y.bottomRight=[K.height-l>=r?K.width/2+s:E(l),K.height-l],y.topRight=[o>=r?K.width/2+s:E(i),o],y.middleRight=[o>=r?K.width/2+s:y.bottomRight[0],o>=r&&K.height-l<=r?r:K.height-l]):(y.topLeft=y.bottomLeft=y.middleLeft=[L(Y?V:K.height),0],y.topRight=y.bottomRight=y.middleRight=[E(Y?V:K.height),0]),y=_objectSpread(_objectSpread(_objectSpread({},e),y),{},{index:f,disabled:u.disabled}),h.push(y),o=!g||v?K.height-l:K.height-l-K.gapHeight,i=!g||v?l:l+K.gapHeight})),h}function at(t,e,n,a){var r=function(t,e){var n=Hn(h[t==Fc?0:e]);t===Nc?n.topLeft[0]=n.middleLeft[0]=n.bottomLeft[0]=n.topRight[0]=n.middleRight[0]=n.bottomRight[0]=K.width/2:(n.middleLeft=n.bottomLeft=n.topLeft,n.middleRight=n.bottomRight=n.topRight);return n}(a,e),o=h[e],i="funnel"==n?Q(st(r),st(o)):Q(ct(r),ct(o));return function(t){return i(t)}}function rt(t,e){y.each((function(a,r){var o=t[r].disabled||!c.getY(n[r],M),i=o?e:0;i?setTimeout((function(){ot(r,o)}),i):ot(r,o)}))}function ot(t,e){var n=e?dn:null;O.selectAll("#ellipse".concat(t)).style("display",n),A.selectAll("#funnel".concat(t)).style("display",n)}function it(t){var n=I.padding;return na(n)?$n(n,t,o,e):Xe(_,Ge(w,.375*t/o))}function lt(t,e,n){var a=_slicedToArray(t,2),r=a[0],o=a[1],i=_slicedToArray(e,2),l=i[0],s=i[1],c=Math.sqrt(Math.pow(l-r,2)+Math.pow(s-o,2));return[r+n*((l-r)/c),o+n*((s-o)/c)]}function st(t){var e=(t.topRight[0]-t.topLeft[0])/2,n=(t.bottomRight[0]-t.bottomLeft[0])/2,a=K.canOverlap?2*e/K.width*x:C,r=K.canOverlap?2*n/K.width*x:C;if(!b&&(Object.keys(t.border).length>0||0===t.index&&null!==t.stemRadius)){var o=t.topLeft,i=t.topRight,l=t.bottomLeft,s=t.bottomRight,c=Ze(i[0]-s[0])>.01,u=t.stemRadius,d=c?0===t.index&&null!==u?u:t.border.topLeft||0:0,h=c?0===t.index&&null!==u?u:t.border.topRight||0:0,f=c&&t.border.bottomLeft?t.border.bottomLeft:0,p=c&&t.border.bottomRight?t.border.bottomRight:0,g=(u||(d||(h||0)))-Ze(i[0]-o[0])>=0,v=c?lt(o,l,d):o,m=c?lt(i,s,h):i,y=c?lt(l,o,f):l,k=c?lt(s,i,p):s;return"M ".concat(g?"".concat(v[0]," ").concat(v[1]):"".concat(o[0]+d," ").concat(o[1]),"\n                    A").concat(e," ").concat(a," 0 0 0  ").concat(g?"".concat(v[0]," ").concat(v[1]):"".concat(i[0]-h," ").concat(i[1]),"\n                    A").concat(h/2*(g?1:3)," ").concat(h/2*(g?1:3)," 0 0 0 ").concat(m[0]," ").concat(m[1],"\n                    L").concat(k[0]," ").concat(k[1]," \n                    A").concat(p/3*2," ").concat(p/3*2," 0 0 0 ").concat(s[0]-p," ").concat(s[1],"\n                    A").concat(n," ").concat(r," 0 0 1 ").concat(l[0]+f," ").concat(l[1]," \n                    A").concat(f/3*2," ").concat(f/3*2," 0 0 0 ").concat(y[0]," ").concat(y[1],"\n                    L").concat(v[0]," ").concat(v[1],"\n                    A").concat(3*d/2," ").concat(3*d/2," 0 0 0 ").concat(g?"".concat(v[0]," ").concat(v[1]):"".concat(o[0]+d," ").concat(o[1]),"\n                    L ").concat(g?"".concat(v[0]," ").concat(v[1]):"".concat(i[0]-h," ").concat(i[1]),"\n                    Z")}return"M".concat(t.topLeft[0]," ").concat(t.topLeft[1]," \n                A").concat(e," ").concat(a," 0 0 0 ").concat(t.topRight[0]," ").concat(t.topRight[1]," \n                L").concat(t.middleRight[0]," ").concat(t.middleRight[1]," \n                L").concat(t.bottomRight[0]," ").concat(t.bottomRight[1]," \n                A").concat(n," ").concat(r," 0 0 1 ").concat(t.bottomLeft[0]," ").concat(t.bottomLeft[1]," \n                L").concat(t.middleLeft[0]," ").concat(t.middleLeft[1],"\n                Z")}function ct(t){var e=(t.bottomRight[0]-t.bottomLeft[0])/2,n=K.canOverlap?2*e/K.width*x+0:C;return"M".concat(t.bottomLeft[0]," ").concat(t.bottomLeft[1]," A").concat(e," ").concat(n," 0 0 1 ").concat(t.bottomRight[0]," ").concat(t.bottomRight[1],"\n                A").concat(e," ").concat(K.canOverlap?n:n+0," 0 0 1 ").concat(t.bottomLeft[0]," ").concat(t.bottomLeft[1])}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=et.subSeriesIndex||0,a=Ao(e)?e.staticPaneSVG.selectAll("g.grid".concat($)):e.staticPaneSVG;P=P||a.selectAll("g.link_".concat(t," g.subseries_").concat(n)),T=T||a.selectAll("g.label_".concat(t," g.subseries_").concat(n)),Z=!0}return et.commonRendererProp=function(e){return arguments.length?(t=e,et):t},et.plotarea=function(t){return arguments.length?(q=t,et):q},et.defaultMouseOverFunc=function(a,r,o){Z||ut(t.params.rendererIndex),W?(v.style("opacity",(function(t,e){return e===o?null:.4})),y.style("opacity",(function(t,e){return e===o?null:.4}))):(v.style("fill",(function(t,n){return(Ao(e)?tt[n]:tt[0])(n,t,n===o?.6:null)})),y.style("fill",(function(t,n){return(Ao(e)?tt[n]:tt[0])(n,t,n===o?1:.5)})));var i=et.subSeriesIndex||0;T.selectAll("text").style("text-shadow",null),P.selectAll(mr).style("stroke-width",null),T.selectAll("#lbl0_".concat(i,"_").concat(n.length-1-o)).style("text-shadow","0 0 0 rgba(0,0,0,1)"),P.selectAll("#link0_".concat(i,"_").concat(n.length-1-o)).style("stroke-width",1)},et.defaultMouseOutFunc=function(n,a){Z||ut(t.params.rendererIndex),W?(v.style("opacity",null),y.style("opacity",null)):(v.style("fill",(function(t,n){return(Ao(e)?tt[n]:tt[0])(n,t)})),y.style("fill",(function(t,n){return(Ao(e)?tt[n]:tt[0])(n,t,.5)}))),T.selectAll("text").style("text-shadow",null),P.selectAll(mr).style("stroke-width",null)},et},Tr.gantt=function(){return{outerPadding:.04,padding:0,interPadding:.05,maxBandWidth:200,levelMarker:{enabled:!1,dataindex:2,fillOpacity:.3,bandWidth:4},hoveroptions:{enabled:!1,start:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},end:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2}},marker:{enabled:!1,start:{size:1,innerStrokeWidth:0,outerStrokeWidth:2},end:{size:1,innerStrokeWidth:0,outerStrokeWidth:2}},border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},animation:{type:"verticalAll"},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:50}}},dependency:{enabled:!1,targetIndex:0,link:{type:"ES",strokeWidth:2,strokeColor:"#111111",errorStyle:"red",padding:20},marker:{enabled:!0,padding:10,size:1.5,innerFillColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerStrokeOpacity:0,outerStrokeColor:"red",outerFillColor:"blue"}}}},Pe.ganttHelpers=function(){},Yt.render.ganttHelpers=function(){},Pe.ganttHelpers.showDependencies=function(t,e,n,a){var r=t.commonRendererProp().params,o=t.commonOption,i=r.chartObj,s=(i.plotarea,r.dataset),c=r.axisrotated,u=r.commonPlotOptions,d=o.yaxiscolumnorder,h=(r.color,u.dependency),f=!0===h.enabled,p=null,v=n.selectAll("g.dependencySeries").data(f?[e]:[]),m=v.enter().insert("g",":first-child").attr("class","dependencySeries").merge(v);if(m.exit().remove(),f&&na(h.sourceIndex)&&na(h.targetIndex)&&(p=function(t,e,n){var a=[];if(t.forEach((function(r){var o=r[e];t.forEach((function(t){t!==r&&na(o)&&ua(o)&&-1!==o.indexOf(t[n])&&a.push({source:r,target:t})}))})),a.length)return a}(e,+h.sourceIndex,+h.targetIndex)),p){var y=h.marker,b=h.link,x=na(b.padding)?b.padding:1,C=na(y.padding)?y.padding:x;C=Xe(x,C);var k=dc(m,"g",[1],".","class","links"),w=dc(m,"g",[1],".","class","symbol");dc(k,"path",p,".","class","link").attr("d",(function(e,n){var o=fE(e,h,t,a);return function(t,e,n,a,r,o){t=t.toUpperCase();var i=o.chartObj,l=o.axisrotated,s=i.systemConf.chart.axes.xaxis.reversed,c=null,u=null,d=null,h=function(t,e,n,a,r){var o=!1;switch(t){case"SS":case"EE":o=!0;break;case"SE":o=e?n.x>a.x+a.width:n.y+n.height<a.y;break;case"ES":o=e?n.x+n.width<a.x-2*r:n.y>a.y+a.height}return!o}(t,l,e,n,a);return N().x((function(o,i){switch(i){case 0:case 1:case 2:if(d=e,0==i)"SS"==t||"SE"==t?c=l?d.x:d.x+d.width/2:"EE"!=t&&"ES"!=t||(c=l?d.x+d.width:d.x+d.width/2);else if(1==i)"SS"==t||"SE"==t?c=l?d.x-a:c:"EE"!=t&&"ES"!=t||(c=l?d.x+d.width+a:c);else{var f;"SS"==t?(f=(f=e.x-n.x)<0?0:f,c=l?d.x-f-a:c):"EE"==t?(f=(f=e.x+e.width-(n.x+n.width))>0?0:f,c=l?d.x+d.width+a-f:c):"SE"==t?l?(c=d.x-a,u=h?d.y+d.height:n.y):c=s?c-d.width:c+d.width:"ES"==t&&(l?(c=d.x+a+d.width,u=h?d.y+d.height:n.y):c=s?c-d.width:c+d.width)}break;default:l&&(u=null),d=n,3==i?(l&&h&&(u=e.y+e.height),"SS"==t||"EE"==t?c=l?c:d.x+d.width/2:"SE"==t?c=l?d.x+d.width+a:c:"ES"==t&&(c=l?d.x-a:c)):4==i?"SE"==t?c=l?d.x+d.width+a:d.x+d.width/2:"ES"==t&&(c=l?c:d.x+d.width/2):"SS"==t||"ES"==t?c=l?d.x-r:c:"EE"!=t&&"SE"!=t||(c=l?d.x+d.width+r:c)}return c})).y((function(o,i){return l?(u||d.y)+d.height/2:(0==i?"SS"==t||"SE"==t?u=e.y+e.height:"EE"!=t&&"ES"!=t||(u=e.y):1==i?"SS"==t||"SE"==t?u+=a:"EE"!=t&&"ES"!=t||(u=e.y-a):2==i?"SS"==t?u=e.y+e.height<n.y+n.height?n.y+n.height+a:u:"EE"==t&&(u=e.y>n.y?n.y-a:u):3==i?"SE"==t?u=h?n.y-a:u:"ES"==t&&(u=h?n.y+n.height+a:u):4==i?u+=0:"SS"==t||"ES"==t?u=n.y+n.height+r:"EE"!=t&&"SE"!=t||(u=n.y-r),u)})).curve(g("linear"))}(o.type,o.end,o.start,x,C,r)(new Array(6))})).attr("stroke",(function(t){return s.getY(t.source,d)[0]<s.getY(t.target,d)[1]?b.errorStyle:b.strokeColor})).attr("stroke-width",b.strokeWidth).attr("fill","none");var _=dc(w,"g",!0===h.marker.enabled?p:[],".","class","arrow");h.marker.enabled&&_.each((function(e,n){y.symbol;var r,o=l(this);o.attr("transform",(function(e){var n,o,i=fE(e,h,t,a),l=i.type;return"SS"==l||"ES"==l?(n=c?i.start.x-C:i.start.x+i.start.width/2,o=c?i.start.y+i.start.height/2:i.start.y+i.start.height+C,r=c?"triangle-right":"triangle-up"):"EE"!=l&&"SE"!=l||(n=c?i.start.x+i.start.width+C:i.start.x+i.start.width/2,o=c?i.start.y+i.start.height/2:i.start.y-C,r=c?"triangle-left":"triangle-down"),"translate(".concat(n,",").concat(o,")")})),ap(o,null,y,{symbolSize:{inner:.4,outer:.7},color:null,symbol:r},i)}))}},Pe.ganttHelpers.addMarker=function(t,e,n,a,r,o,i){var s=n.commonRendererProp().params,c=n.commonOption,u=s.chartObj,d=u.plotarea,h=s.dataset,f=s.axisrotated,p=s.color,g=c.levelMarkerWidth,v=c.charttype,m="bullet"==v,y="gantt"==v,b=_e.whiskerPlot.has(Gt[v]),x="whiskers"==r.symbol||"horizontal-whisker"==r.symbol,C=x&&"edges"==s.whiskers.showOn,k=m?s.xscale.bandwidth():g,w=n.bandwidth1(),_=r.size,S=na(_),O=S?_:g-2*Jn(r.padding,c.padding/2),A=dc(t,"g",[e],".","class","markers".concat(i),null,(function(t){return[h.getX(t)]}));S&&"string"==typeof O&&O.indexOf("%")>-1&&(O=parseFloat(O)/100*k/10);var T=wa(r.strokeWidth,1);A.attrs({class:"markers".concat(i),transform:"translate(".concat(d.left,",").concat(d.top,")"),"stroke-width":T,"stroke-dasharray":Gr(r.dashStyle,Jn(r.outerStrokeWidth,1)),"stroke-linecap":Xr(r.lineCap,r.dashStyle),fill:r.color,stroke:r.color});var P=dc(A,"g",e,null,null,null,null,(function(t){return h.getX(t)}));P.enter().append("g");var E="line"===r.symbol?{inner:0,outer:1}:{inner:.6,outer:1};P.each((function(t,e){var d,g,v,_=l(this),A=o?u.seriesColor[e%u.seriesColor.length]:p;_.attrs({transform:function(t,e){var o=0,l=0;if(y){var u=Pe.ganttHelpers.getMarkerPosition(t,a,e,n);return 0===i?(o=u.x+u.width/2,l=u.y-10*r.size/2):(o=u.x+u.width/2,l=u.y+u.height+10*r.size/2),"translate(".concat(f?l:o,",").concat(f?o:l,")")}return o=w(h.getX(t))+k/2,o=b?o+c.bandwidth2(c.barDatasetIndex)+c.padding:o,l=x?C?s.yscale(t[r.dataindex][i]):(s.yscale(t[r.dataindex][0])+s.yscale(t[r.dataindex][1]))/2:s.yscale(t[r.dataindex]),null==t[r.dataindex]?null:"translate(".concat(f?l:o,",").concat(f?o:l,") rotate(").concat(f?90:0,")")}}).style("display",(function(t){return null==t[r.dataindex]&&m?"none":null})),r.size=S?m?Xe(O,k/10):O:O/10,b&&x&&(C?(v=qc(t,s.yscale,r.dataindex,h.yidx(c.yaxiscolumnorder),i),g={symbol:"vertical-line-z",size:v=f?-v:v}):v=qc(t,s.yscale,null,null,null,r.dataindex)),Rs(h.getClr(t),u)||((d=_objectSpread({},r)).outerStrokeColor="transparent"),ap(_,null,d||r,{symbolSize:E,color:y?A:null,custom:g,size2d:v},u)})),r.size=_,y&&(n.markerProperties={subseriesIndex:a})},Pe.ganttHelpers.getMarkerPosition=function(t,e,n,a){var r=a.commonOption;return{x:a.getParamValue(r.axisrotated?"y":"x",t,e,n,r),y:a.getParamValue(r.axisrotated?"x":"y",t,e,n,r),width:a.getParamValue(r.axisrotated?"height":"width",t,e,n,r),height:a.getParamValue(r.axisrotated?"width":"height",t,e,n,r)}};Yt.render.ganttHelpers;function gE(t,e){this.chart=t,this.renderer=e}Ta(gE,pP);var vE=gE.prototype;function mE(t,e,n,a,r,o){this.layer=t,this.utils=e,this.layerContainer=n,this.styles=a,this.geoMap=r,this.useMesh=o,this.initialize()}function yE(t,e){this.x=t,this.y=e}function bE(t,e){this.longitude=t,this.latitude=e}function xE(t,e,n,a){this.text=t,this.latLong=e,this.styles=n,this.geoMap=a}function CE(t){this.geoMap=t,this.initialize()}function kE(t){this.geoMap=t,this.initialize()}function wE(t,e,n,a,r,o){var i=(e.systemConf.notes||{}).dataIndex;Xn(i)||t[i]&&n.push({data:t,seriesIndex:a,subSeriesIndex:r,itemIndex:o})}function _E(t){this.geoMap=t,this.initialize()}function SE(t){this.geoMap=t,this.initialize()}vE.data=function(t){var e=this.renderer.commonRendererProp().params,n=this.chart;return function(){n.cache.data[t._key]||(n.cache.data[t._key]={});var a=n.cache.data[t._key];return a.rect=a.rect||Ml(n,t,e.xscale,e.yscale,e.yaxiscolumnorder),t._x=a.rect.x,t._y=a.rect.y,t._width=a.rect.width,t._height=a.rect.height,a._uid=t._uid=n.dataset.getX(t),a._visible=t._visible=Fl(n,t),t}},vE.options=function(t){var e=this.chart,n=this.renderer,a=n.commonRendererProp().params,r=a.gvp("borderRadius"),o=Fs(this.chart,Ns(a.commonPlotOptions,this.chart)?t.itemIndex:t.seriesIndex,t,t.seriesIndex);return{radius:e.dataObject.getTransRectValue("radius",null,null,null,n.commonOption,r),color:o}},vE.renderingContext=function(){return Jg.get("bar").call(this,this.chart)},vE.path=function(t,e){var n,a=this.renderer.commonRendererProp().params,r=e.translate.call(this),o=r[0],i=r[1],l=(n=a.gvp("symbol"))&&np(n);this.chart.systemConf.chart.axes.yaxis[t.yaxisOrder||0].reversed;l?(n=l(Xe(t._width,t._height)),o+=t._x+t._width/2,i+=t._y+t._height/2):n=pc(t._x,t._y,t._x+t._width,t._y+t._height,this.options(t).radius,pn,this.chart.axes.rotated,!0);var s=e.context.call(this),c=dc(s,"path",[1],".","class","highlight".concat(t.seriesIndex).concat(t.subSeriesIndex));return s.style("display",""),c.style("display","").attr("d",n).attr("transform","translate(".concat(o,",").concat(i,")")),c},Jp.heatmap=function(){var t;function e(n,a,r,o){var i=t.params,l=i.chartObj,s=i.xscale,c=i.yscale,u=i.datasetIndex,d=i.commonPlotOptions,h=i.labelQueue,f=i.yaxiscolumnorder,p=l.dataset.getDataType("y",f),g=s.domain(),v=p==To?c.domain():null,m=d.symbol&&np(d.symbol),y=l.dataObject.getTransRectValue("radius",null,null,null,null,d.borderRadius),b=(e.fillColorFunc=Ls(l,u),Is(l,u)),x=Bi.isQuantileColorScale(l);a=l.dataObject.categoryHierarchy?a[u]:l.seriesdata[u];var C=r&&r.gradient;r=na(r)&&r.pattern||r;var k=a.plotoptions;i.gvp=Dn.getValueOfPlotOptions(k,d);return a.disabled||(e.seriesdataAfterUpdate=[],a.data.forEach((function(t,a){var i=l.dataObject.updateSeriesdatabyCategories(Yn(t),g,v,f);e.seriesdataAfterUpdate[a]=i,x&&na(o)&&(i=us.filterSelectionByColor(i,!0,o,l)),i.forEach((function(t,a){var o=Ml(l,t,s,c,f),i=o.x,h=o.y,p=o.width,g=o.height,v=function(e,n){if(e.save(),e.translate(i+p/2,h+g/2),e.beginPath(),e.lineWidth=d.strokeWidth,e.strokeStyle=b(u,t,d.strokeColor,pn,d.strokeOpacity),e.fillStyle=n,m){var a=Xe(p,g)/2;if("circle"===d.symbol)e.arc(0,0,a,0,2*on);else{var r=m(2*a);Cp.drawPath(e,r)}}else Cp.roundedRect(e,-p/2,-g/2,p,g,y);e.fill(),e.stroke(),e.closePath(),e.restore()};if(l.imagePallete&&Rs(l.dataset.getClr(t),l))Hr.canvas_patterns.imageFill({x:i,y:h,context:n,name:Fs(l,u,t,u)},v);else{var x=na(r)?r:e.fillColorFunc(u,t,null,null,d.fillOpacity,[p,g]);C&&v(n,C),v(n,x)}}))}))),Me&&h.push({renderer:e,charttype:"hierarchy",chartObj:l,args:[a,u,null,null,null,a.disabled?[]:E(e.seriesdataAfterUpdate)]}),e.chartRendered=!0,e}return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=new gE(t,e)),e.highlighter},e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e},Tr.heatmap=function(){return{strokeColor:"white",animation:{},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:100},radial:{radius:100}}}}},Pe.heatmap=function(){var t,e=!1;function n(a){return a.each((function(a){var r=t.params,o=r.chartObj,i=r.xscale,s=r.yscale,c=r.datasetIndex,u=r.commonPlotOptions,d=r.labelQueue,h=r.yaxiscolumnorder,f=a[c],p=f.data,g=f.plotoptions,v=r.gvp=Dn.getValueOfPlotOptions(g,u),m=fp(u,null,o,Mi),y=m.enabled,b=m.type,x=m.easingType,C=e?y?200:0:m.duration,k=b===Rc||b===Mc,w=e?0:k?function(){return rn()*(3*C/5)}:0,_=e?C:k?2*C/5:C,S=n.fillColorFunc=Ls(o,c),O=Is(o,c),A=o.dataObject.getTransRectValue("radius",null,null,null,null,u.borderRadius),T=v("symbol"),P=T&&np(T),L=i.domain(),M=s.domain(),D=Bi.isQuantileColorScale(o),I=dc(l(this),"g",[1],".","class","heatmapseries_".concat(c));n.seriesdataAfterUpdate=[],p.forEach((function(t,a){var r=n.seriesdataAfterUpdate[a]=o.dataObject.updateSeriesdatabyCategories(Yn(t),L,M,h),d=dc(I,"g",!D&&f.disabled?[]:[1],".","class","subseries_".concat(a)),p=dc(d,mr,r);p.styles({fill:function(t,e){var n=Ml(o,t,i,s,h);return S(c,t,null,null,null,[n.width,n.height])},"fill-opacity":u.fillOpacity,stroke:function(t){return O(c,t,u.strokeColor)},"stroke-width":u.strokeWidth,"stroke-opacity":u.strokeOpacity}).attr("transform",(function(t){var e=Ml(o,t,i,s,h);return"translate(".concat(e.x+e.width/2,",").concat(e.y+e.height/2,")")})).attr("d",(function(t){var e=Ml(o,t,i,s,h);return P?P(Xe(e.width,e.height)):pc(-e.width/2,-e.height/2,e.width,e.height,A)})),e||(yp(p),p.attr("opacity",0).transition().delay(w).duration(_).ease(x).on("start",(function(){l(this).attr("opacity",null)})).call(k?vp:function(){}).call(b===Ic||b===Rc?mp:b===Dc||b===Mc?vp:gp))})),Me&&d.push({renderer:n,charttype:"hierarchy",chartObj:o,args:[f,c,null,null,null,E(n.seriesdataAfterUpdate)]}),o.timerObj[o.timerObj.length]=n.renderedTimer=setTimeout((function(){e=!0,n.chartRendered=!0}),C+17)})),n}return n.getHighlighter=function(t,e){return n.highlighter||(n.highlighter=new gE(t,n)),n.highlighter},n.commonRendererProp=function(e){return arguments.length?(t=e,n):t},n},Tr.map=function(){return{allAreas:!0,renderingMode:window.rendererMode||"svg",fillColor:"#dddddd",strokeColor:"#444",strokeWidth:.6,gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}},globe:{strokeWidth:1.5},labels:{strokeWidth:1.5},extent:{top:10,right:10,bottom:10,left:10},layerName:"source",useMeshOutline:!0,textStrokeWidth:2,animation:{enabled:!0,type:"fade",duration:500,easingType:"cubic"}}},mE.GEO_FORMATS=M(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection","Topology"]),mE.getMapFeatures=function(t){return"FeatureCollection"===t.type?t.features:Ma(t)},mE.prototype.getStyle=function(t,e,n){var a=this,r=a.styles||{},o=t.styles||{},i=t.properties||{},l=wa(r[e],o[e],i[e],a.defaultStyles[e]);if("function"==typeof l)return l.call(this,t,l);if(n)if(a._gradient)l=a._gradient;else{var s=wa(r.gradients,o.gradients,i.gradients,{});if("linear"===s.type||"radial"===s.type){var c=FT.getFeatureGradientBBox(t,s.type,a.utils.geoPath);l=Ms(s,[c.width,c.height],a.getStyle(t,"fillColor"),a.renderingMode,a.fillOpacity,"area",null,a.geoMap),t.transform={x:c.x,y:c.y},a.isCanvasMode||"linear"!==s.type||(a._gradient=l)}}else"dashStyle"===e&&na(l)&&(l=Gr(l,a.getStyle("strokeWidth")));return l},mE.prototype.initialize=function(){var t=this,e=t.layerContainer.isD3Selection?"svg":"canvas";t.defaultStyles={fillColor:"transparent",strokeColor:"#333",strokeWidth:.6,dashStyle:null},t.renderingMode=e,t.isCanvasMode=!0!==t.layerContainer.isD3Selection,t.renderingModeCapitialized=za(e),t.paintLayer()},mE.prototype.update=function(t){t&&(this.layer=t),this.paintLayer(!0)},mE.prototype.paintLayer=function(t){this["paint".concat(this.renderingModeCapitialized,"Layer")](t)},mE.prototype.paintSvgLayer=function(t){var e=this,n=mE.getMapFeatures(e.layer),a=function(t){t.attrs({stroke:function(t){return e.getStyle(t,"strokeColor")},"stroke-width":function(t){return e.getStyle(t,"strokeWidth")},"stroke-dasharray":function(t){return e.getStyle(t,"dashStyle")},"stroke-opacity":function(t){return e.getStyle(t,"strokeOpacity")}})},r=wc("path",".map-feature",mE.getMapFeatures(n),e.layerContainer).attrs({fill:function(t){return e.getStyle(t,"fillColor",!0)},"fill-opacity":function(t){return e.getStyle(t,"fillOpacity")||1},d:e.utils.geoPath});if(e.useMesh&&e.layer.length){var o=e.geoMap.dataObject.getFeatureMesh(mE.getMapFeatures(e.layer));e.mesh=r=wc("path",".map-feature-outline",[n[0]],e.layerContainer).attrs({fill:"none",d:e.utils.geoPath(o)}),r.raise(),a(r)}else e.mesh&&e.mesh.remove(),a(r)},mE.prototype.paintCanvasLayer=function(t){var e=this,n=e.layerContainer,a=mE.getMapFeatures(e.layer);if(e.utils.geoPath.context(n),Oa(a,(function(t){n.save(),n.fillStyle=e.getStyle(t,"fillColor",!0),n.strokeStyle=e.getStyle(t,"strokeColor"),n.lineWidth=e.getStyle(t,"strokeWidth");var a=e.getStyle(t,"dashStyle");a&&na(n.setLineDash)&&n.setLineDash(a),n.beginPath(),e.utils.geoPath(t),t.transform&&n.translate(t.transform.x,t.transform.y),n.fill(),e.useMesh||n.stroke(),n.closePath(),n.restore()})),e.useMesh&&a.length){var r=e.geoMap.dataObject.getFeatureMesh(mE.getMapFeatures(e.layer));if(!r)return;n.save(),n.fillStyle=e.getStyle(a[0],"fillColor",!0),n.strokeStyle=e.getStyle(a[0],"strokeColor"),n.lineWidth=e.getStyle(a[0],"strokeWidth");var o=e.getStyle(r,"dashStyle");o&&na(n.setLineDash)&&n.setLineDash(o),n.beginPath(),e.utils.geoPath(r),n.stroke(),n.closePath(),n.restore()}},mE.prototype.destroy=function(){var t=this;t.update([]),Oa(t,(function(e,n){t[n]=null,delete t[n]}))},yE.prototype.toJSON=function(){return{x:this.x,y:this.y}},yE.prototype.toArray=function(){return[this.x,this.y]},bE.prototype.toJSON=function(){return{latitude:this.latitude,longitude:this.longitude}},bE.prototype.toArray=function(){return[this.longitude,this.latitude]},bE.prototype.toXY=function(t){var e=FT.toXY(t,this.longitude,this.latitude)||[null,null];return new yE(e[0],e[1])},yE.prototype.toLatLong=function(t){var e=FT.toLatLong(t,this.x,this.y)||[null,null];return new bE(e[0],e[1])},xE.prototype.getXY=function(){var t=this,e=t._coordinates;return e||(e=t._coordinates=t.latLong.toXY(t.geoMap)),e},xE.prototype.getDimension=function(){var t=this,e=t.styles,n=t._dimension;return n||(n=t._dimension={width:Dn.fontUtils.getTextWidth(t.text,e.fontSize,e.fontFamily,e.fontStyle,e.fontWeight),height:Dn.fontUtils.getTextHeight(t.text,e.fontSize,e.fontFamily,e.fontStyle,e.fontWeight)}),n},xE.prototype.getBBox=function(){var t=this,e=t._bbox,n=2.5;if(!e){var a=t.getXY(),r=t.getDimension();e=t._bbox={x:a.x-r.width/2-n,y:a.y-r.height/2-n,width:r.width+n,height:r.height+n}}return e},xE.prototype.overlapsWith=function(t){var e=this.getBBox(),n=t.getBBox();return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.height+e.y>n.y},xE.prototype.insideRect=function(t){var e=this.getBBox();return e.x+e.width<t.x+t.width&&e.x>t.x&&e.y>t.y&&e.y+e.height<t.y+t.height},xE.prototype.clearCache=function(){this._bbox=this._coordinates=this._dimension=null},CE.prototype.initialize=function(){var t=this,e=t.geoMap,n=e.systemConf.map.labels||{},a=t.geoLabelStyles=Object.create(n),r=t.labels=[],o={x:0,y:0,width:e.plotarea.width,height:e.plotarea.height};!0===a.show&&(a.fontFamily=Qx(n,e),a.fontSize=$x(n,e),a.fontWeight=n.fontWeight||"normal",a.fontStyle=n.fontStyle||"normal",a.fontColor=n.fontColor||"#333",a.textShadow=n.textShadow,a.strokeColor=n.strokeColor,a.strokeWidth=n.strokeWidth,a.type="background",!0===e.systemConf.map.allAreas&&e.dataObject.userUnmatchedMapFeatures.each((function(t,i){var l=t.properties,s=$n(!0,n.showAs,t,e);!function(t){t.insideRect(o)&&!r.some((function(e){return t.overlapsWith(e)}))&&r.push(t)}(new xE(wa(l[s],s,l.name),new bE(l.longitude,l.latitude),a,e))}))),t.render()},CE.prototype.render=function(t){var e=this;e.geoMap;this.geoMap.geo.isCanvasMode?e.renderCanvasLabel(t):e.renderSvgLabel(t)},CE.prototype.renderCanvasLabel=function(){var t=this.geoMap.geo.geoLabelLayer,e={};this.labels.forEach((function(n){var a,r,o,i,l=n.styles,s=wa(n.fontColor,l.fontColor),c=l.strokeColor||ma(s),u=n.getXY();if(na(u.x)&&na(u.y)){if(t.save(),l.textShadow&&!na(e[n.type])&&(e[n.type]=eC.parseTextShadow(l.textShadow)),e[n.type]){var d=e[n.type];na(d)&&(t.shadowOffsetX=d[0],t.shadowOffsetY=d[1],t.shadowBlur=d[2],t.shadowColor=d[3])}t.textAlign="center",t.textBaseline="middle",t.fillStyle=s,t.strokeStyle=c,t.font=(a=l.fontStyle,r=l.fontWeight,o=l.fontSize,i=l.fontFamily,"".concat(a," ").concat(r," ").concat(o,"px ").concat(i)),l.strokeWidth>0&&(t.lineWidth=l.strokeWidth,t.strokeText(n.text,u.x,u.y)),t.fillText(n.text,u.x,u.y),t.restore()}}))},CE.prototype.renderSvgLabel=function(){var t=this,e=t.geoMap.geo.geoLabelLayer;t.labelElements=wc("text",".geo-labels",t.labels,e).each((function(t){var e=l(this),n=t.getXY(),a=t.styles,r=wa(t.fontColor,a.fontColor),o=a.strokeColor||ma(r);na(n.x)&&na(n.y)&&(e.attrs({"font-family":a.fontFamily,"font-size":a.fontSize,"font-style":a.fontStyle,"font-weight":a.fontWeight,"text-anchor":"middle","dominant-baseline":"middle",transform:"translate(".concat(n.x,",").concat(n.y,")")}),a.textShadow&&e.style("text-shadow",a.textShadow),a.strokeWidth>0&&wc("tspan",".stroke-text",[1],e).text(t.text).attrs({stroke:o,"stroke-width":a.strokeWidth,x:0,y:0}),wc("tspan",".fill-text",[1],e).text(t.text).attrs({fill:r,x:0,y:0}))}))},CE.prototype.update=function(){var t=this;t.geoMap;t.labels.forEach((function(t){t.clearCache()})),t.initialize(!0)},kE.prototype.initialize=function(){var t,e=this,n=e.geoMap,a=n.geo,r=n.dataset,o=n.seriesdata,i=n.systemConf.map,l=M(i.excludeAreas||[]),s=M(i.includeAreas||[]),c=e.mapFeatures=a.defaultLayer.layerGeojson.features,u=e.joinByKey=r.getMapByKey(),d=e.hasLatLongJoinBy=r.latLongJoinByKeys.has(u),h=d?"zc-key":u,f=e.mapFeaturesHashed=kE.helpers.hashFeaturesByProperty(c,h,s,l,!0),p=e.userDataHashed=L(),g=e.userUnmatchedMapFeatures=L(),v=e.userMapFeatures=L(),m=e.userUnmatchedData=M();e.totalDataCount=0,e.extents=L(),e.hasPointChart=!1,e.isCombinationalChart=M(),e.flattenPoints=t=L(),e.hasHeatmap=e.hasBubblePie=e.hasPointChart=!1,e.encodes={},e.markerSize={},e.processedseriesData=o,e.annotation=[],n.cache.data={},n.cache.search={},n.isGeoMap=!0,n.hasColorScale=Bi.isQuantileColorScale(n),e.hasZaxis=na(r.zidx)&&_e.zaxis.some((function(t){return e.containsChartType(t)}));var y=function(t,e,n){return function(){return n.renderer[e].highlighter.data(t)}},b=[];Oa(o,(function(a,o){kE.helpers.convertTo3DArray(a);var i=n.chartTypes[o];e.isCombinationalChart.add(i.name),a.disabled||(e.hasHeatmap||Gt.geoheatmap!==i.value||(e.hasHeatmap=e.containsChartType("geoheatmap")),e.hasBubblePie||Gt.geobubblepie!==i.value||(e.hasBubblePie=!0),e.isBubbleEnabled=e.isBubbleEnabled||wl(i.value),e.hasPointChart||Gt.geoheatmap===i.value||(e.hasPointChart=!0),Oa(a.data,(function(a,i){Oa(a,(function(a,l){!function(a,o,i,l){var s=r.getGeo(a),c=n.chartTypes[o].name,u=t.get(c);a.seriesIndex=o,a.subSeriesIndex=i,a.itemIndex=l,a.rendererIndex=o,a._key=pi.helpers.generatePointKey(n.id,"0_0",o,i,l),a._data=y(a,o,n),na(u)||(u=[],t.set(c,u)),u.push(a),d&&!e.isValidPoint(a)||(f.has(s)?(v.set(s,f.get(s)),p.has(s)?p.get(s).push(a):p.set(s,[a]),e.totalDataCount++,wE(a,n,e.annotation)):d?(e.totalDataCount++,wE(a,n,e.annotation)):m.add(s))}(a,o,i,l)})),e.hasZaxis&&(e.saveEncode("z",0,o),b.push(j(a,(function(t){return r.getZ(t)}))))}))),Oa(a.data,(function(t,a){Oa(t,(function(t,i){!function(t,a,o,i){var l=r.getGeo(t);d&&!e.isValidPoint(t)||(f.has(l)||d)&&wE(t,n,e.annotation,a,o,i)}(t,o,a,i)}))}))})),t.each((function(n,a){t.set(a,n.filter((function(t){if(e.isValidPoint(t))return t})))})),e.hasZaxis&&e.extents.set("z",j(E(b))),d?e.userUnmatchedMapFeatures=f:f.keys().forEach((function(t){v.has(t)||l.has(t)||g.set(t,f.get(t))})),e.hasBubblePie&&(e.data=n.systemConf,e.chartObj=n,e.dataset=r,e.processedseriesData=n.seriesdata,e.bubblepieData=e.processBubblePieData(null,{chartType:Gt.geobubblepie})),e.isCombinationalChart=e.isCombinationalChart.values().length>1,e.userMapFeaturesArray=v.values(),e.totalnoofdatas=e.totalDataCount},kE.prototype.getFeatureMesh=function(t){var e=this,n=M(),a=e.geoMap.geo.defaultLayer.layerOriginal,r=null,o=e.geoMap.systemConf.map.layerName,i=e.hasLatLongJoinBy?"zc-key":e.joinByKey;return"Topology"===a.type&&(t.forEach((function(t){t.properties&&t.properties[i]&&n.add(t.properties[i])})),r=St.mesh(a,a.objects[o],(function(t,e){return n.has(t.properties[i])||n.has(e.properties[i])}))),r},kE.prototype.getAxisRotated=function(){return!1},kE.prototype.containsChartType=function(t){return this.geoMap.chartTypes.some((function(e){return e.name===t||e.value===t}))},kE.prototype.getXYPoint=function(t){return this.getLatLonPoint(t).toXY(this.geoMap)},kE.prototype.getFeatureByPoint=function(t){var e=this.userMapFeatures,n=this.geoMap.dataset.getGeo(t);return e.has(n)?e.get(n):null},kE.prototype.getLatLonPoint=function(t){var e=this,n=e.geoMap.dataset,a=e.userMapFeatures,r=n.getGeo(t),o=[0,0];if(a.has(r)){var i=a.get(r),l=i.properties;o=na(l.latitude)&&na(l.longitude)?[+l.longitude,+l.latitude]:Pt(i)}else e.hasLatLongJoinBy&&(o=[n.getLongitude(r),n.getLatitude(r)]);return new bE(o[0],o[1])},kE.prototype.getXYvalue=function(t,e,n,a,r,o,i){return"z"===i?this.getZFromPoint(o):this.getXYPoint(o)[i]},kE.prototype.getZFromPoint=function(t){var e=this.geoMap;return mh(t,e.dataset,e)},kE.prototype.getXYFromLatLng=function(t){var e=FT.toXY(this.geoMap,t.longitude,t.latitude);return new yE(e[0],e[1])},kE.prototype.getUserMapFeatures=function(t){var e=this;return"geojson"===t?kE.helpers.arrayToGeojson(e.userMapFeaturesArray):"array"===t?e.userMapFeaturesArray:e.userMapFeatures},kE.prototype.getMapFeaturesByDataPoint=function(t,e){var n=this,a=n.geoMap.dataset,r=L();return t[0]instanceof Array||(t=[t]),t.forEach((function(t){var e=t[a.geoidx];n.userMapFeatures.has(e)&&r.set(e,n.userMapFeatures.get(e))})),"geojson"===e?kE.helpers.arrayToGeojson(r.values()):"array"===e?r.values():r},kE.prototype.getMapFeatures=function(t){var e=this,n=L(e.userMapFeatures);return e.userUnmatchedMapFeatures.keys().forEach((function(t){n.set(t,e.userUnmatchedMapFeatures.get(t))})),"geojson"===t?kE.helpers.arrayToGeojson(n.values()):n},kE.prototype.getMinMaxZ=function(){return this.extents.get("z")},kE.prototype.isstacked=function(){return!1},kE.prototype.containsNegativeData=function(t){return!1},kE.prototype.getScaleProxy=function(){var t=this;t.geoMap;return{xScale:function(e){return t.getXYPoint(e).x},yScale:function(e){return t.getXYPoint(e).y}}},kE.prototype.isValidLatLong=function(t,e){return Qa(t,[-90,90])&&Qa(e,[-180,180])},kE.prototype.isValidPoint=function(t){var e=this,n=e.geoMap.dataset.getGeo(t);if(!t.length||!na(n)||!n.length)return!1;if(e.hasLatLongJoinBy){var a=e.geoMap.dataset.getLatitude(n),r=e.geoMap.dataset.getLongitude(n);return na(a)&&na(r)&&e.isValidLatLong(a,r)}return e.userDataHashed.has(n)},kE.prototype.updateSeriesdatabyCategories=function(t){var e=this,n=0;return t.filter((function(t){var a=e.isValidPoint(t);return a&&(t.itemIndex=n++),a}))},kE.prototype.processBubblePieData=rE,kE.helpers={is3D:function(t){return ua(t)&&ua(t[0])&&ua(t[0][0])},convertTo3DArray:function(t){this.is3D(t.data)||(t.data=[t.data])},arrayToGeojson:function(t){return{type:"FeatureCollection",features:t}},hashFeaturesByProperty:function(t,e,n,a,r){var o=L();return Oa(t,(function(t,i){var l=t.properties[e]||i;!n.empty()&&!n.has(l)||!a.empty()&&a.has(l)||o.set(l,r?Object.create(t):t)})),o}},Aa(kE.prototype,Mo),_E.prototype.initialize=function(){var t,e=this,n=e.geoMap.userdata.metadata,a=e.columns=wa(n.columns,{}),r=e.axes=wa(n.axes,{geo:[0],clr:[1],z:[1]}),o=wa(a[r.clr],{}),i=wa(a[r.geo],{}),l=wa(a[r.z],{});e.latLongJoinByKeys=M(["lat-long","long-lat"]),e.clridx=wa(o.dataindex),e.zidx=wa(l.dataindex),e.geoidx=wa(i.dataindex,0),e.geoMapByKey=t=e.getJoinByKey(i),r.label&&a[r.label]&&(e.labelIndex=a[r.label].dataindex),e.latLongJoinByKeys.has(e.geoMapByKey)&&("lat-long"===t?(e.latitudeIndex=0,e.longitudeIndex=1):(e.latitudeIndex=1,e.longitudeIndex=0))},_E.prototype.getJoinByKey=function(t){var e=this,n=wa(t,e.columns[e.axes.geo],{}),a=wa(n.joinBy,"zc-key");"zc-key"===a||e.latLongJoinByKeys.has(a)||(na(e.geoMap.geo.defaultLayer.layerGeojson.features[0].properties[a])||(a="zc-key"));return a},_E.prototype.getColumnIdx=function(t){return ua(this.axes[t])?this.axes[t][0]:null},_E.prototype.getDataType=function(t){var e=this,n=e.getColumnIdx(t);return na(e.columns[n])?e.columns[n].datatype:To},_E.prototype.getZ=function(t){return t[this.zidx]},_E.prototype.getClr=function(t){return t[this.clridx]},_E.prototype.getGeo=function(t){return t[this.geoidx]},_E.prototype.getLatitude=function(t){return t[this.latitudeIndex]},_E.prototype.getLongitude=function(t){return t[this.longitudeIndex]},_E.prototype.getMapByKey=function(){return this.geoMapByKey},_E.prototype.getColumn=function(t){return this.columns[this.getColumnIdx(t)]},_E.prototype.getX=_E.prototype.getY=_E.prototype.getGeo,_E.prototype.getDataPointValue=function(t,e,n,a,r,o,i,l,s){n&&(n=+n),Xn(l)&&(l=!/(tooltip|legend)/.test(o));var c=this.axes,u=this.columns[n]||{},d=u.datatype,h=u.dataindex,f=u[d];if(null!=e){if(null==c.clr&&"legend"!==o||n!=c.clr){var p,g=r?Xo:Wo;if(s){for(var v=0,m=0;m<s;m++)v+=this.getDataPointUnformattedValue(d,a,m,n,e,o,r,h);p=v}else p=this.getDataPointUnformattedValue(d,a,i,n,e,o,r,h);return""===p&&r?p:g(f,p,d,t,o,l)}return na(this.clridx)&&Bi.isQuantileColorScale(t)?"legend"===o?Wo(f,e,d,t,o,l,"-"):Wo(f,this.getClr(e),d,t,o,l):Wo(f,this.geoMap.seriesdata[a].seriesname,d,t,o,l)}return null},_E.prototype.getDataPointUnformattedValue=function(t,e,n,a,r,o,i,l){var s,c=this.geoMap;if(i&&(t===Eo&&na(s=Vv(c,e,n,a,r,i,o))))return wa((o===jo?r:r[l])/s*100,0);return o===jo?r:r[l]},_E.prototype.getDataPoint=function(t,e,n,a,r,o){if(na(o))return o;var i=t.seriesdata[n].data,l=t.renderer[n].seriesdataAfterUpdate;return l?l[a][r]:i[a][r]},_E.prototype.getCustomizedVal=function(t,e,n,a,r,o,i,l,s,c){var u=this;return Xn(s)&&(s=!/(tooltip|legend)/.test(i)),e.toString().replace(Re,(function(){var e,d=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3],g=arguments[4],v=arguments[5],m=arguments[6],y=h||f||p||g||v;if(-1!==d.indexOf("{{clr}}"))return l;if(null!=u.columns[y]){if(null==(e=i===jo?o:u.getDataPoint(t,y,n,a,r,o)))return"";var b=d.match(/[a-z]+/gi)[0];switch(b){case"col":return u.getColumnName(f,s);case"val":return u.getDataPointValue(t,e,h,n,!1,i,a,s,c);case _d:case Sd:case Od:return u.getDataPointValue(t,e,p||g||v,n,b,i,a,s,c)}}else{if(!m)return d;e=u.getDataPoint(t,y,n,a,r,o);var x=t.dataObject.getMapFeaturesByDataPoint(e,"array");if(x.length)return x[0].properties[m]||d}}))},_E.prototype.getColumnName=function(t,e){return e?Wn(this.columns[t].columnname):Nn(this.columns[t].columnname)},_E.prototype.getMetaInfoObj=function(t,e,n){var a=this,r=a.axes,o=a.columns,i=a.geoMap.seriesdata,l=[],s=function(t,e){var n=Hn(o[t]||{});return n.value=e,n.columnindex=t,n};if(ua(e)&&e.forEach((function(t,e){var n=o.indexOf(o.filter((function(t,n){return t.dataindex===e}))[0]);l.push(s(n,t))})),na(r.clr)){var c=ua(r.clr)?r.clr[0]:r.clr;l.push(s(c,i[n].seriesname))}return l},SE.prototype.initialize=function(){var t=this,e=t.geoMap,n=e.systemConf.chart.plot.renderer.mode.toLowerCase();Oa(e.chartTypes,(function(t){"canvas"===n&&qa(_e.svgOnly,t.value)&&(n="svg",Be.warn("Fallback: ".concat(t.name," was rendered on svg mode")))})),e.renderer=[],e.rendererConf=[],t.mode=n,t.MODE=n.toUpperCase(),e.extraParams={labelQueue:[],notesArray:[],labelArray:{},barDatasetIndex:0}},SE.prototype.draw=function(){var t=this,e=t.geoMap,n=e.systemConf;e.chartRendered=!1,Du(e,n.chart.plot.events,0,"init"),e.setupZScale(),t.renderSeries(),t.transformWrap(),Ee.renderCompletedEvents(e,e.updating,e.extraParams,(function(){e.updating?e.chartRendered=!0:(e.animate(),e.updating=!1)}))},SE.prototype.update=function(){this.draw()},SE.prototype.renderSeries=function(){var t,e=this.geoMap,n=(e.systemConf,Ee.arrangeSeriesRenderingOrder(e)||[]),a=m();e.rendererArranged=[],Oa(n,(function(n,r){var o=wa(n.seriesidx,r),i=e.chartTypes[o];Xn(e.bubblePieRendererIndex)&&i.value===Gt.geobubblepie&&(e.bubblePieRendererIndex=o),!na(t=e.renderer[o])&&Ie.has(i.name)&&(t=new(Ie.get(i.name))(n,e,o),e.renderer[o]=t,e.rendererConf[o]=new Yt.rendererConf),"geoheatmap"===i.name&&Ee.setRendererProp(e,t,n,o,0,e.extraParams),e.rendererArranged.push(t),a.origRange=[0,0],e.rendererConf[o].xscale(a).yscale(a).datasetIndex(o).legendOrderIndex(o).rendererIndex(o),clearTimeout(t.renderedTimer),t.render(e.updating)})),e.rendererArrangedReveresd=e.rendererArranged.slice(0).reverse()},SE.prototype.triggerChartRendering=function(t){var e=this,n=e.geoMap,a=t.series,r=t.index,o=n.chartTypes[r].name;na(t.chartRenderer)||(t.chartRenderer="CANVAS"===e.MODE?Yt.canvasRenderer.createCanvasRenderer(o):Yt.svgRenderer.createSVGRenderer(o,n)),n.container.select(".highlight-canvas").style("visibility","hidden"),t.commonRendererProp=t.chartRenderer.commonRendererProp,Ee.setRendererProp(n,t.chartRenderer,a,r,0,n.extraParams),t.hasOwnProperty("chartRendered")||Object.defineProperty(t,"chartRendered",{get:function(){return t.chartRenderer.chartRendered}}),e["render".concat(e.MODE)](t),t.hasOwnProperty("seriesdataAfterUpdate")||Object.defineProperty(t,"seriesdataAfterUpdate",{get:function(){return wa(t.chartRenderer.seriesdataAfterUpdate)}})},SE.prototype.renderSVG=function(t){var e=this.geoMap;t.series;Yt.svgRenderer.drawSVG(e,e.seriesdata,t.chartRenderer)},SE.prototype.renderCANVAS=function(t){var e=this.geoMap,n=t.series;Yt.canvasRenderer.drawCanvas(e,n,t.chartRenderer)},SE.prototype.transformWrap=function(){var t=this.geoMap,e=t.plotarea;t.staticPaneSVG.select(".labelholder").attr("transform","translate(".concat(e.left,",").concat(e.top,")"))};var OE=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"init",value:function(){_get(_getPrototypeOf(e.prototype),"init",this).call(this),this.addListeners(this.tracker),this.eventManager.dataFinder({mousemove:e.findGeoData,click:e.findGeoData,doubleclick:e.findGeoData}),this.eventManager.defaultBehaviour=DC(),this.eventManager.customBehaviour=Uk.getCustomBehaviour}},{key:"addListeners",value:function(t,n){_get(_getPrototypeOf(e.prototype),"addListeners",this).call(this,t,n)}}],[{key:"findGeoData",value:function(t){this.chart;var e=this.chart.eventHandler.mapEvents,n=new yE(t.x,t.y),a=e.getPoint(n),r=a?a.point:null;return r&&(a.seriesIndex=r.seriesIndex,a.itemIndex=r.itemIndex),{nearest:a}}}]),e}(Uk);function AE(t,e,n,a,r){var o,i=r.eventHandler.dataAccesor(n),l=r.cache.search;if("QUADTREE"==a){var s=t,c=i.radius(e),u=i.sizeOffset(e),d=i.extent(),h=i.size(e);o=(l["".concat("0_0","_").concat(e,"_").concat(a)]||new ev(s,h,c,d,u)).find(n)}return o}var TE=wn.getComponent("ZoomD3"),PE={};function EE(t,e){this.axes={x:{},y:{}},Mv.call(this,t,e),this.initialize()}function LE(t){this.geoMap=t,this.initialize()}function ME(t,e){this.chart=t,this.renderer=e}function DE(t,e,n){this.series=t,this.geoMap=e,this.index=n,this.initialize()}Ta(EE,Mv),EE.helpers=Mv.helpers,EE.SeriesTypes=Ie,EE.getDefaultProjection=function(){return{name:"geoMercator"}},EE.getGeoJSON=function(t,e){if(na(t)&&mE.GEO_FORMATS.has(t.type)&&"Topology"===t.type){var n=t.projection;t=St.feature(t,t.objects[e]),na(n)&&(t.projection=n)}return t},EE.prototype.initialize=function(){var t=this,e=(t.userdata.map,t.chartTypes.some((function(t){return qa(_e.svgOnly,t.value)})));t.id="ZC_GEO_".concat(t.idNumeric),Ar.IE&&parseFloat(Ar.VERSION)<11&&(t.fixIE=!0),t.geo={layerCount:0,extraLayers:{},extraLayersRenderingOrder:["globe","graticule","allAreas","backgroundLayer"],utils:{},highlightUtils:{},rawLayers:[],customLayers:L()},t.timerObj=new Array(0),t.processUserData(t.themeoptions),t.plot={},t.geo.isCanvasMode="svg"!==t.systemConf.map.renderingMode.toLowerCase(),t.geo.isPlotCanvasMode="svg"!==t.systemConf.chart.plot.renderer.mode.toLowerCase()&&!e,EE.helpers.constructChartGroups(t),t.seriesContainer=t.wrap.select(".seriesholder"),t.chartGroup=t.svg.select(".chartgroup");var n=wn.getComponent("LegendHighlight");t.legendHighlight=n(this,this.wrap),t.render()},EE.prototype.render=function(){var t=this,e=t.systemConf,n=e.map.animation.enabled&&!t.updating;if(n=n&&(t.dataObject.hasHeatmap&&!t.dataObject.hasPointChart||!t.seriesdata.length),t.seriesContainer=t.wrap.select(".seriesholder"),t.chartGroup=t.svg.select(".chartgroup"),t.setChartDimension(),t.updateCanvasArea(),t.applyChartProperties(),!t.hasGeoLayer||!e.map.allAreas&&!t.dataObject.totalDataCount)return t.flushed=!0,t.clearMap(),t.hideLoading(t.container),t.handleNoData(e.noDataHandler),t.chartRendered=!0,t.handleHiddenContainer(!0),void Du(t,e.canvas.events,0,t.updating?"onreload":"onload");t.dataObject.totalDataCount||(t.flushed=!0,t.clearMap(),t.clearChart(null,null,!0)),t.clearNoData(e.noDataHandler),t.getChartSeriesColor(),t.parseScale(),t.hasSeriesPoints&&(wn.getComponent("legend.render")(t),Qv.updatePlotarea4BlockTooltip(t));var a=wn.getComponent("annotation");a._empty||a.addBlockAnnotations(t),t.updatePlotareaProp(),t.setupFeatureContainerLayer(),t.setUpMapLayer(),n&&(t.animateSelection=t.container.selectAll(".geomap-features-series,.geomap-features-extras,.xychart,.static,.label-container,.labelholder").style("opacity",0)),Du(t,e.map.events,0,"init"),t.renderGlobe(),t.renderGraticule(),t.renderMapLayer(),Du(t,e.map.events,0,t.updating?"onreload":"onload"),t.geo.customLayers.size()&&t.geo.customLayers.each((function(t){return t&&t.update()})),t.plot.renderer?t.plot.renderer.draw(!0):t.hasSeriesPoints&&(t.plot={renderer:new SE(t)},t.plot.renderer.draw()),t.drawPlotBorder(),t.renderLabels(),t.handleEvent(),t.drawPlotareaClippath(),t.plot.renderer||(t.animate(),Du(t,e.canvas.events,0,t.updating?"onreload":"onload"),t.updating=!1),t.flushed=!1},EE.prototype.setupFeatureContainerLayer=function(){var t=this,e=t.geo,n=(za(e.isCanvasMode?"canvas":"svg"),e.isCanvasMode),a=e.isPlotCanvasMode,r=e.mapArea=Object.create(t.plotarea);t.seriesContainer.attr("transform","translate(".concat(r.left,",").concat(r.top,")")),n?(e.featureLayerExtra=Yt.canvasRenderer.updateCanvasContext(t,"geomap-features-extras",".static",t.chartParentElement),e.geoLabelLayer=e.featureSeriesLayer=Yt.canvasRenderer.updateCanvasContext(t,"geomap-features-series",".static",t.chartParentElement)):(e.featureSeriesLayer=wc("g",".feature-layer-series",[1],t.seriesContainer),e.geoLabelLayer=wc("g",".geo-label-layer",[1],t.seriesContainer)),a?(e.pointLabelLayer=t.labelHolderContext=Yt.canvasRenderer.updateCanvasContext(t,"label-container",t.fixIE?".static":"div.legendarea",t.chartParentElement),e.pointLayer=Yt.canvasRenderer.updateCanvasContext(t,"zc-canvas",".static",t.chartParentElement)):e.labelLayer=t.staticPaneSVG.select(".labelholder").attr("transform","translate(".concat(r.left,",").concat(r.top,")"))},EE.prototype.setupLayerSettings=function(t){var e=this,n=e.geo,a=n.utils.projection,r=a&&a.rotate&&a.rotate(),o=(e.behaviouralEvents&&e.behaviouralEvents.eventManager.behaviours||{}).PLOT_ZOOM;if(a=n.utils.projection=n.highlightUtils.projection=e.getProjection(t),o){var i=e.getProjectionExtent(),l=o.instance.getTransform(),s=NT(e),c=TE.centroid(FT.geoBoundToRect(i)),u=s.translate,d=s.scale;e.geo.isGlobeMap?(a.scale(s.scale*l.k),a.translate(c),a.rotate(r)):(a.scale(d*l.k),a.translate([l.x+u[0]*l.k,l.y+u[1]*l.k]))}n.utils.geoPath=At().projection(a),n.highlightUtils.geoPath=At().projection(a),n.isCanvasMode&&n.utils.geoPath.context(n.featureSeriesLayer)},EE.prototype.getProjection=function(t){var e,n=this,a=n.geo.defaultLayer.layerGeojson,r=n.systemConf.map,o=wa(r.projection,t.projection,a.projection),l=t,s=n.getProjectionExtent();for(var c in n.geo.isGlobeMap=o&&"geoOrthographic"===o.name,na(o)?n.geo.isGlobeMap&&(l={type:"Sphere"}):o=EE.getDefaultProjection(),e=i[o.name](),o)o.hasOwnProperty(c)&&"name"!==c&&e[c]&&e[c](o[c]);return e.fitExtent(s,l),e},EE.prototype.getProjectionExtent=function(){var t=this.geo.mapArea,e=this.systemConf.map.extent;return[[e.left,e.top],[t.width-e.right,t.height-e.bottom]]},EE.prototype.addLayer=function(t,e,n,a,r){var o=this.geo,i=o.layerCount++,l={series:o.featureSeriesLayer,extra:o.featureLayerExtra,highlight:o.highlightLayer}[a];return n=n||"map-layer-".concat(i),o.isCanvasMode||(l=wc("g",".".concat(n),[n],o.featureSeriesLayer)),new mE(t,o.utils,l,e,this,r)},EE.prototype.addGeoLayer=function(t,e){var n=this,a=n.geo.customLayers,r="custom-geo-layer-".concat(n.geo.layerCount++),o=n.addLayer(t,e,r,"extra",!1);return a.set(r,o),r},EE.prototype.removeGeoLayer=function(t){var e=this;e.geo.customLayers.has(t)&&(e.geo.customLayers.get(t).destroy(),e.geo.customLayers.remove(t)),FT.clearContext(e.geo.featureLayerExtra),e.repaintGeoLayer()},EE.prototype.setupSvgLayer=function(t){var e=this,n=e.geo,a=n.mapArea;e.systemConf.map;n.featureSeriesLayer=wc("g",".feature-layer-series",[1],e.seriesContainer),e.seriesContainer.attr("transform","translate(".concat(a.left,",").concat(a.top,")")),n.labelLayer=e.staticPaneSVG.select(".labelholder").attr("transform","translate(".concat(a.left,",").concat(a.top,")")),"canvas"===e.systemConf.chart.plot.renderer.mode&&(e.labelHolderContext=Yt.canvasRenderer.updateCanvasContext(e,"label-container",e.fixIE?".static":"div.legendarea",e.chartParentElement),n.pointLayer=Yt.canvasRenderer.updateCanvasContext(e,"zc-canvas",".static",e.chartParentElement))},EE.prototype.setupCanvasLayer=function(){var t=this,e=t.geo;e.featureLayerExtra=Yt.canvasRenderer.updateCanvasContext(t,"geomap-features-extras",".static",t.chartParentElement),e.featureSeriesLayer=Yt.canvasRenderer.updateCanvasContext(t,"geomap-features-series",".static",t.chartParentElement),t.dataObject.hasPointChart&&(e.pointLayer=Yt.canvasRenderer.updateCanvasContext(t,"zc-canvas",".static",t.chartParentElement)),e.labelLayer=t.labelHolderContext=Yt.canvasRenderer.updateCanvasContext(t,"label-container",t.fixIE?".static":"div.legendarea",t.chartParentElement)},EE.prototype.getLayerData=function(t){var e=PE;if(na(e[t]))return this.emptyMapLayer=!1,e[t];this.emptyMapLayer=!0},EE.prototype.setUpMapLayer=function(){var t,e=this,n=e.systemConf,a=e.dataObject;n.map.allAreas?t="FeatureCollection"!==e.geo.defaultLayer.layerGeojson.type?e.geo.defaultLayer.layerGeojson:a.getMapFeatures("geojson"):t=a.getUserMapFeatures("geojson");e.geo.renderedLayer=t,e.setupLayerSettings(t)},EE.prototype.setupZScale=function(){var t=this;t.dataObject.hasZaxis&&(t.zscale=t.scales[0].create())},EE.prototype.renderGraticule=function(){var t=this,e=t.systemConf.map.graticule||{},n=!0===e.show,a=t.geo.extraLayers;if(n)if(t.updating&&a.graticule)a.graticule.update();else{var r=Tt();a.graticule=t.addLayer(r(),e,"graticule","extra")}else na(a.graticule)&&(a.graticule.destroy(),a.graticule=null)},EE.prototype.renderGlobe=function(){var t=this,e=t.systemConf.map,n="geoOrthographic"===(e.projection||{}).name&&!na(e.globe.show),a=t.geo.extraLayers;n||e.globe.show?t.updating&&a.globe?a.globe.update():a.globe=t.addLayer({type:"Sphere"},e.globe,"sphere","extra"):na(a.globe)&&(a.globe.destroy(),a.globe=null)},EE.prototype.renderMapLayer=function(){var t=this,e=t.systemConf,n=t.dataObject,a=e.map,r=n.userUnmatchedMapFeatures.values();if(!n.hasHeatmap){var o,i=t.geo.defaultLayer.layerGeojson;((o="FeatureCollection"!==i.type?i:n.userMapFeatures.values()).length||o.type)&&(t.geo.extraLayers.backgroundLayer=t.addLayer(o,a,"background-layer","extra",a.useMeshOutline))}t.updating&&t.geo.extraLayers.allAreas&&!t.flushed?t.geo.extraLayers.allAreas.update(r):a.allAreas&&(n.userUnmatchedMapFeatures.empty()||(t.geo.extraLayers.allAreas=t.addLayer(r,a,"all-areas-layer","extra",a.useMeshOutline)))},EE.prototype.renderLabels=function(){this.geo.geoLabels=new CE(this)},EE.prototype.handleEvent=function(){var t=this,e=t.geo;if(t.updating&&t.eventHandler||!t.dataObject.totalDataCount){if(!t.eventHandler)return!1}else{t.createEventGroups();var n=wc("g",".trackerGroup",[1],t.eventWrap).attr("pointer-events","all"),a=wc("rect",".eventhandler",[1],n),r=t.eventHandler=new OE(t,n);t.eventHandler.trackerGroup=n,t.eventHandler.trackerElement=a,r.init(),r.mapEvents=new Ut.mapEvents(t),tm(t),e.eventLayer=r.trackerElement.styles({"pointer-events":"visible"})}t.eventHandler.mapEvents.cache=L(),t.positionEventTrackerElement(),t.behaviouralEvents?t.behaviouralEvents.update():t.behaviouralEvents=new om(t),t.handleLegendEvents()},EE.prototype.clearMap=function(){var t=this;FT.clearContext(t.geo.featureLayerExtra),FT.clearContext(t.geo.featureSeriesLayer),FT.clearContext(t.geo.geoLabelLayer),FT.clearContext(t.geo.pointLayer),FT.clearContext(t.geo.pointLabelLayer),na(t.eventHandler)&&t.eventHandler.mapEvents.clearHighlightedPoints()},EE.prototype.processUserData=function(t){var e,n=this,a=n.systemConf=Rn(t,n.userdata,!0,!0),r=a.map,o=n.getLayerData(r.scope,r.layerName),i=wn.getComponent("dataSplicer");if(n.userdata.viewParser||n.userdata._viewParser){var l=wn.getComponent("viewParser");n.viewFlow=new l(n.userdata.viewParser||n.userdata,n.userdata),i=wn.getComponent("dataSplicer4ViewParser"),n.parserConfig=n.viewFlow.init()}n.dataSplicer=new i(n.userdata,n.systemConf,n),n.updating||Du(n,n.systemConf.canvas.events,0,"init"),e=fa(a,"seriesdata")||{},n.seriesdata=e.chartdata||[],(n.geo.defaultLayer={layerGeojson:EE.getGeoJSON(o,r.layerName),layerOriginal:o}).layerGeojson?(n.hasGeoLayer=!0,n.dataset=new _E(n),n.dataObject=new kE(n),n.hasSeriesPoints=n.dataObject.totalDataCount>0,n.nochartdata=!n.hasSeriesPoints&&n.emptyMapLayer):(n.hasGeoLayer=!1,n.nochartdata=!0)},EE.prototype.addRemoveSeries=function(){var t=this;t.eventHandler;t.updating=!0,t.clearMap(),t.dataObject.initialize(),t.updatePlotareaProp(),t.drawPlotareaClippath(),t.repaintChart()},EE.prototype.repaintChart=function(){var t=this;t.repaintGeoLayer(),t.eventHandler.mapEvents.cache.clear(),t.eventHandler.oldInfo=null,t.plot.renderer.draw()},EE.prototype.repaintGeoLayer=function(){var t=this;Oa(t.geo.extraLayers,(function(t){return t&&t.update()})),t.geo.customLayers.each((function(t){return t&&t.update()})),t.geo.geoLabels.update(!0)},EE.prototype.zoomToPoint=function(t,e){this.__enableZoom();var n=this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance;!function(t,e,n){switch(t.type){case"bound":n.zoomToBounds(t[t.type],e);break;case"rect":n.zoomToRect(t.rect,e);break;case"point":n.zoomToPoint(t.point,e);break;case"rotate":n.rotateTo(t.rotate,e)}}(this.renderer[t.seriesIndex].getZoomPosition(t),e,n)},EE.prototype.animate=function(){var t=this,e=t.systemConf.map.animation,n=t.animateSelection;n&&!t.updating?n.transition().duration(e.duration).ease(f(e.easingType)).on("start",(function(){n.style("opacity",0)})).on("end",(function(){t.chartRendered=!0})).attrTween("tween",(function(){return function(t){return n.style("opacity",t),t}})):t.chartRendered=!0},Op.GeoMap=EE,LE.fixMouseCoordinates=function(t,e){return e?{x:e[0],y:e[1]}:{x:null,y:null}},LE.fixEventArguments=function(t){return{seriesPos:t.seriesIndex,itemPos:t.itemIndex,subseriespos:t.subSeriesIndex,data:t}},LE.prototype.initialize=function(){var t=this,e=t.geoMap,n=e.geo,a=t.utils=n.utils;e.systemConf.map;t.eventConfig=wa(e.systemConf.map.events,{}),t.outerGeoBounds=a.geoPath.bounds(n.defaultLayer.layerGeojson);var r=wc("g",".zcMapClipHighlight",[1],e.staticPaneSVG,":first-child").attr("clip-path","url(".concat(e.defsLocation,"#highlight_group_clip_").concat(e.id));t.highlightElement=wc("g",".map-highlight",[1],r).attr("transform","translate(".concat(e.plotarea.left,",").concat(e.plotarea.top,")")),t.timers={},t.highlightCache={},t.outLine=t.getOutLine()},LE.prototype.showTooltip=function(t,e,n,a,r){var o,i,l=this.geoMap,s={x:0,y:0},c=!0,u=a.point.seriesIndex,d=l.chartTypes[u].value,h=l.renderer[u].plotOptions;"feature"!==a.type&&r||("point"===a.type&&(c=!1,s=l.dataObject.getXYPoint(e)),i=(o=Il(xl(n),t,s.x,s.y,l,e,!1,!1,{},c,!1,!1)).helpers,wl(d)?o.distance=l.dataObject.getXYvalue(!1,!1,null,null,null,e,"z")/2:"point"===a.type&&(o.distance=10*(h.marker.size-1)),i.itempos=e.itemIndex,i.subseriespos=e.subSeriesIndex,i.seriesindex=e.seriesIndex,l.eventHandler.tooltipElement.show(l,o,null,!0,o.helpers))},LE.prototype.hideTooltip=function(t){var e=this,n=e.geoMap.systemConf.tooltip.hideDelay,a=e.geoMap.eventHandler.tooltipElement;t?a.hide(a.element):(clearTimeout(e.timers.tooltipDelay),e.timers.tooltipDelay=setTimeout((function(){a.hide(a.element)}),wa(n,150)))},LE.prototype.getPoint=function(t){var e,n=this,a=n.geoMap,r=null;return t instanceof yE?(e=t.toArray(),t=t.toLatLong(n.geoMap).toArray()):t instanceof bE&&(e=t.toXY(a),t=t.toArray()),n.outLine.some((function(t){return Et(t,e)}))&&a.rendererArrangedReveresd.some((function(n){if(!a.eventHandler.eventDisabled(n.series)&&n.getPoint)return r=n.getPoint(t,e,n.index)})),r},LE.prototype.getPointsByIndex=function(t,e){var n=this.geoMap,a=[];if(na(e)){var r=n.dataObject.flattenPoints.get("geoheatmap");a=us.filterSelectionByColor(r,!0,e,n)}else na(t)&&n.seriesdata[t].data.forEach((function(t){a=a.concat(t)}));return a},LE.prototype.getHighlightEffect=function(t,e,n,a){var r=this.geoMap,o=r.legendHighlight.getLegendHighlightEffect(t,n,a),i={fillColor:hn};return o!==dn&&(r.fixIE&&(e="transparent"),i=_objectSpread(_objectSpread({},i=r.legendHighlight.getEffect(o,"area",e,{fill:hn,stroke:e},0,a,null,Ui(r,"0_0",t).name)),{},{strokeWidth:wa(i.strokeWidth,2),fillColor:i.fill})),i},LE.prototype.highlightPoints=function(t,e,n){var a=this.geoMap,r=a.eventWrap.selectAll("#zcscatterhighlight"),o=a.staticPaneSVG.selectAll("g.map-highlight");switch(tv(a),e){case"feature":r.attr("visibility","hidden"),o.attr("visibility","visible"),this.highlightGeoFeature(t,n);break;case"point":r.attr("visibility","visible"),o.attr("visibility","hidden"),r.selectAll("*").remove(),r.attr("visibility","visible");var i=t.seriesIndex,l=(t.subSeriesIndex,t.itemIndex,a.chartTypes[i]),s=a.dataObject.getXYPoint(t),c=(a.seriesdata[i].plotoptions,a.systemConf.chart.plot.plotoptions[l.name],dc(r,"g",[1],".","class","highlight".concat(i)),"geobubblepie"==l.name?a.renderer[a.bubblePieRendererIndex]:a.renderer[i]),u=c.chartRenderer.getHighlighter(a),d=u._defaultH();t._x=s.x,t._y=s.y,t._size=c.chartRenderer.getSymbolSize(t),d[0].path.call(u,t,d[0])}},LE.prototype.highlightGeoFeature=function(t,e){var n=this,a=n.geoMap;n.highlightLayer=new mE(t,a.geo.highlightUtils,n.highlightElement,e,a)},LE.prototype.clearHighlightedPoints=function(){this.geoMap.staticPaneSVG.selectAll("g#zcscatterhighlight, g.map-highlight").attr("visibility","hidden")},LE.prototype.getTransform=function(){return I(this.geoMap.geo.eventLayer.node())},LE.prototype.handleEvent=function(t,e,n){t=LE.fixMouseCoordinates(this.geoMap,t),n=n||jt();var a=this,r=a.geoMap,o=new yE(t.x,t.y),i=a.getPoint(o),l=!1!==r.systemConf.tooltip.enabled,s=wa(r.zcEventType,e),c=r.eventHandler.oldInfo,u=!(!c||c.point!==(i&&i.point));if("mouseout"===e)i=r.eventHandler.oldInfo;else if(na(r.eventHandler.oldInfo)&&!na(i)||("doubletap"===s||"tap"===s&&u)&&"mouseout"!==e)return r.eventHandler.mapEvents.handleEvent(null,"mouseout",r.eventHandler.targetEvent);if(na(i)){var d=i.point,h=d.seriesIndex,f=r.renderer[h],p=bl(null,f.plotOptions,r,s),g=r.eventHandler,v=!1,m=e,y={mousemove:"handleMouseMove",click:"handleMouseClick",mouseout:"handleMouseOut"};if(Ar.isTouchDevice&&(v=!0,"click"===e&&(Fk(s,r),m="mousemove")),na(p)){var b=Vk(p,i,0,null,r);$n(b.callback,r.eventHandler.targetEvent,b.args,r)}g.eventManager.isDefaultAllowed(p,n)&&na(a[y[m]])&&a[y[m]](i,u),"mousemove"===m?(l&&(clearTimeout(a.timers.tooltipDelay),a.showTooltip(t,d,n,i,u)),u||(CC.call(r.eventHandler.eventManager,t,{nearest:d},bl(null,f.plotOptions,r,"cursor")),r.eventHandler.eventManager.selectionManager.nearest=d,r.eventHandler.oldInfo=i,r.eventHandler.oldInfo.nearestPoint=LE.fixEventArguments(d)),r.eventHandler.reverseLegendHighlight.highlight(d),r.eventHandler.unselectedHighlight.highlight(d)):"mouseout"===m&&(l&&a.hideTooltip(v),kC.call(r.eventHandler.eventManager),r.eventHandler.reverseLegendHighlight.reset(),r.eventHandler.oldInfo=null)}},LE.prototype.getOutLine=function(){var t=this.geoMap,e=document.createElementNS(It("svg").space,"path");return l(e).datum({type:"Sphere"}).attr("d",t.geo.highlightUtils.geoPath).attr("d").split("M").slice(1).map((function(t){return(t=t.slice(0,t.length-1)).split("L").map((function(t){return t.trim().split(/[,\s]/).map((function(t){return parseInt(t)}))}))}))},LE.prototype.getTreeDiagram=function(t){var e=this.geoMap;return Dt().x((function(t){return e.dataObject.getXYPoint(t).x})).y((function(t){return e.dataObject.getXYPoint(t).y})).extent([[0,0],[e.plotarea.width,e.plotarea.height]]).addAll(t)},LE.prototype.handleMouseMove=function(t,e){var n=this,a=n.geoMap,r=t.point,o=r.seriesIndex;if(!e){var i=Fs(a,o,r),l=n.getHighlightEffect(o,i,"selectedSeries","plot");"feature"===t.type&&(r=t.feature),n.highlightPoints(r,t.type,l)}},LE.prototype.handleMouseOut=function(t){var e=this.geoMap;this.clearHighlightedPoints(),kC.call(e.eventHandler.eventManager)},LE.prototype.handleMouseClick=function(t){this.geoMap.eventHandler.mapEvents.hideTooltip(!0)},Ut.mapEvents=LE,ME.prototype.data=function(t){var e=this.chart;e.cache.data[t._key]||(e.cache.data[t._key]={});var n=e.cache.data[t._key];if(!na(n._x)){var a=e.dataObject.getXYPoint(t);n._x=t._x=n._x||a.x,n._y=t._y=n._y||a.y,e.dataObject.hasZaxis&&(n._size=t._size=n._size||e.dataObject.getZFromPoint(t)),t._visible=!0,n._point=t}return t},DE.getPlotOptions=function(t,e){return fa(t.systemConf,"chart.plot.plotoptions.".concat(e))},DE.prototype.initialize=function(){var t=this,e=t.geoMap,n=e.chartTypes[t.index],a=_s(e,t.index);return e.context=wa(e.geo.pointLayer,e.geo.featureLayer),t.isCanvasMode=e.geo.isCanvasMode,t.plotOptions=Rn(DE.getPlotOptions(e,n.name),wa(t.series.plotoptions,{}),!0),t.fillColor=Ls(e,t.index,null,a,null,t.renderingMode),t.strokeColor=Is(e,t.index,a),this.getHighlighter(),t},DE.prototype.update=function(){this.render(!0)},DE.prototype.getHighlighter=function(){this.highlighter=new ME(this.geoMap,this)};var IE=function(){function t(e,n){_classCallCheck(this,t),this.type=e,this[e]=n}return _createClass(t,[{key:"getPosition",value:function(){return this[this.type]}}]),t}();function RE(t,e,n){DE.call(this,t,e,n)}function zE(t,e,n){RE.call(this,t,e,n)}function jE(t,e,n){zE.call(this,t,e,n)}function FE(t,e,n){this.renderingMode=e.systemConf.map.renderingMode,DE.call(this,t,e,n)}function BE(t,e,n){this.data=t,this.dataset=e,this.chartObj=n,this.globalChartType=null,this.processedseriesData=n.seriesdata,this.initialize()}Ta(RE,DE),Op.GeoMap.SeriesTypes.set("geoscatter",RE),RE.prototype.render=function(){this.geoMap.plot.renderer.triggerChartRendering(this)},RE.prototype.getZoomPosition=function(t){var e=this.geoMap,n=e.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.getTransform();return new IE("point",n.invert(e.dataObject.getXYPoint(t).toArray()))},Ta(zE,RE),Op.GeoMap.SeriesTypes.set("geobubble",zE),zE.prototype.getPoint=function(t,e,n){var a=this.geoMap,r=a.dataObject,o=a.chartTypes[this.index].name,i=r.flattenPoints.get(o);if(!i)return null;var l=av(AE(i,"geobubble",e,"QUADTREE",a),{x:e[0],y:e[1]},a,"bubble");return l&&(n||il(l,a))?{type:"point",point:l}:void 0},Ta(jE,zE),Op.GeoMap.SeriesTypes.set("geobubblepie",jE),jE.prototype.getPoint=function(t,e){var n=this.geoMap,a=n.dataObject,r=n.chartTypes[this.index].name,o=AE(a.flattenPoints.get(r),"geobubblepie",e,"QUADTREE",n);if(o){var i=kk(o,{x:e[0],y:e[1]},n,"bubblepie");if(i&&il(i,n))return{type:"point",point:i}}return null},Tr.geoheatmap=function(){return{animation:{enabled:!1},datalabels:{showAs:"geo",fontWeight:"bold",strokeColor:"contrast",strokeWidth:1.5,textOverlap:"hidden"},gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}}}},Ta(FE,DE),Op.GeoMap.SeriesTypes.set("geoheatmap",FE),FE.prototype.render=function(t){var e=this.initialize(),n=e.geoMap,a=null,r=n.dataObject.getUserMapFeatures(),o=e.plotOptions,i=o.gradients,l=n.systemConf.map,s=M(["radial","linear"]).has(i.type);e.features=[],e.seriesdataAfterUpdate=[],e.series.disabled||Oa(e.series.data,(function(t,c){t=n.dataObject.updateSeriesdatabyCategories(Yn(t)),e.seriesdataAfterUpdate[c]=t,Oa(t,(function(t,n){var c=e.geoMap.dataset.getGeo(t);if(r.has(c)){var u=r.get(c),d=a;if(s){var h=FT.getFeatureGradientBBox(u,i.type,e.geoMap.geo.utils.geoPath);d=[h.width,h.height],u.transform={x:h.x,y:h.y}}u.styles={fillColor:e.fillColor(e.index,t,a,a,e.plotOptions.fillOpacity,d),strokeColor:e.strokeColor(e.index,t,wa(o.strokeColor,l.strokeColor),a,o.strokeOpacity,n),strokeWidth:o.strokeWidth,strokeStyle:o.strokeStyle,fillOpacity:wa(o.fillOpacity,1),strokeOpacity:wa(o.strokeOpacity,1)},e.features.push(u)}}))})),t?e.mapLayer.update(e.features):e.mapLayer=e.geoMap.addLayer(e.features,a,"series-".concat(e.index),"series",l.useMeshOutline),Me&&n.extraParams.labelQueue.push({renderer:e,charttype:"scatter",chartObj:n,args:[e.series,e.index]}),n.timerObj[n.timerObj.length]=e.renderedTimer=setTimeout((function(){e.chartRendered=!0}),17)},FE.prototype.commonRendererProp=function(){return this.geoMap.rendererConf[this.index]},FE.prototype.getZoomPosition=function(t){var e=this.geoMap,n=e.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.getTransform();return e.geo.isGlobeMap?new IE("rotate",e.dataObject.getLatLonPoint(t)):new IE("bound",e.geo.utils.geoPath.bounds(e.dataObject.getFeatureByPoint(t)).map((function(t){return n.invert(t)})))},FE.prototype.getPoint=function(t,e,n){var a=this.features,r=this.geoMap,o=r.dataObject,i=Fa(a,(function(e){return Mt(e,t)}));if(i){for(var l,s=o.userDataHashed.get(i.properties[o.joinByKey]),c=s.length;c--;){var u=s[c].seriesIndex;if(u===n&&!r.seriesdata[u].disabled){l=s[c];break}}if(!r.hasColorScale||r.hasColorScale&&Rs(r.dataset.getClr(l),r))return{type:"feature",feature:i,point:l}}return null},RE.prototype.getPoint=function(t,e){var n=this,a=n.geoMap,r=a.plotarea,o=a.dataObject,i=a.chartTypes[n.index].name,l=o.flattenPoints.get(i),s=n.plotOptions,c=e[0],u=e[1];if(ua(l)){Zc.has(s.marker.symbol)&&(u+=10*s.marker.size/2);var d=AE(l,"geoscatter",[c,u],"QUADTREE",a);return d&&zl(d._x,d._y,{x:0,y:0,width:r.width,height:r.height})&&(!a.hasColorScale||a.hasColorScale&&il(d,a))?{type:"point",point:d}:null}},Tr.line=function(){return{mode:"linear",strokeWidth:2,outerPadding:.02,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeWidth:2,outerFillColor:"transparent",outerStrokeColor:"transparent",useSVGMarkers:!0},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:10,spreadMethod:"reflect"}}}}},Pe.line=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f,p,g,v,m,y,b,x,C,k,w,_,S=[],O=Pe.scatter(),A=!1;function T(E){E.each((function(E){var L=t.params;x=L.chartObj,e=L.xscale,n=L.yscale,g=L.stacked,a=L.datasetIndex,o=L.axisrotated,m=L.commonPlotOptions,s=L.color,v=L.labelQueue,b=L.hasNegValue,i=L.yaxiscolumnorder,r=L.dataset,y=x.systemConf;var M,D=L.renderingOrderIndex,I=L.legendOrderIndex,R=L.rendererIndex,z=L.shapescale,j=x.defsLocation;x.viewFlow&&x.viewFlow.marks._default.chart.length&&(M=E[a].data);var F=M||E[a],B={data:F,index:D};g&&(B.stackIndex=1*E.length+D);var H=F.plotoptions,N=F.data,W=Ao(x)?"".concat(F.row,"_").concat(F.column):"0_0",V=Ui(x,W,a),Y=V.name,U=(V.value,t.params.gvp=Dn.getValueOfPlotOptions(H,m)),G="arearange"==Y,X=x.dataObject.isPolarAxisCategory,Z=_s(x,a),q=x.canvasarea,$=U("mode"),K=U("dashStyle"),J=Jn(U("strokeWidth"),2),tt=U("strokeOpacity"),et=Is(x,a,W,Z,L),nt=Bi.isQuantileColorScale(x),at=t.params.markerOptions=H&&H.marker?Rn(m.marker,H.marker,!0):m.marker,rt=(t.params.hoverOptions=H&&H.hoveroptions?Rn(m.hoveroptions,H.hoveroptions,!0):m.hoveroptions,fp(m,H,x,Y)),ot=rt.enabled,it=rt.easingType;w=rt.duration,_=(_=rt.type)==Hc?Bc:_;var lt=H&&H.animation&&H.animation.blink?Rn(m.animation.blink,H.animation.blink,!0):m.animation.blink,st=x.racing&&x.racing.syncTransition,ct=x.racing&&x.racing.keyFramedRace,ut=nt||!(!Wl(x,"marker")||!Nl(x,"marker",Xe(q.width,q.height)))&&at.enabled,dt=Xr(U("lineCap"),K),ht=Ar.IE||Ar.SAFARI||"stepBefore"==$||"stepAfter"==$||"step-before"==$||"step-after"==$||L.thresholdType||nt||z||Ar.FIREFOX&&lt.enabled||!1===at.useSVGMarkers;d=Gr(K,J);var ft=H&&H.animation&&H.animation.marquee?Rn(m.animation.marquee,H.animation.marquee,!0):m.animation.marquee;h=ft.enabled,f=ft.duration;var pt=x.dataset.getDataType("x"),gt=x.dataset.getDataType("y",i),vt=pt==To?e.domain():null,mt=gt==To?n.domain():null,yt=pt!=To||na(x.dataObject.hierarchical)?x.dataObject.getCategories("x"):vt,bt=y.chart.axes.yaxis[i].reversed;pt!=To&&0==yt.length&&ot&&_==Yc&&(yt=x.dataObject.findXCategories()),T.seriesdataAfterUpdate=[],N.forEach((function(t,e){var n;n=pt==To||gt==To?x.dataObject.updateSeriesdatabyCategories(Yn(t),vt,mt,i):t,T.seriesdataAfterUpdate[e]=n,S[e]=Cm(L,n,C,k,W)}));var xt=l(this);T.update=function(){xt.transition().call(T)};var Ct,kt=L.dynamicSeriesPosition;if(void 0===kt&&(kt=a),g){var wt=this.querySelector("g.lineseries_".concat(kt-1));Ct=wt?"g.".concat(wt.className.baseVal," + *"):null}(c=dc(xt,"g",[B],".","class","lineseries_".concat(kt),void 0,void 0,{insertBefore:Ct})).node().index=a,G&&(c=dc(c,"g",[B],".","class","rangePos_".concat(k)));var _t,St,Ot,At=X?{inner:.32,outer:.56}:{inner:.4,outer:.7};if(ut&&!ht){at.color=F.color||Fs(x,I,F,a,W,R);var Tt=((Ot=Hn(St=at)).outerStrokeColor=$n(Ot.outerStrokeColor,St.color,Ot,x),Ot.innerStrokeColor=$n(Ot.innerStrokeColor,St.color,Ot,x),Ot.outerFillColor=$n(Ot.outerFillColor,St.color,Ot,x),Ot.innerFillColor=$n(Ot.innerFillColor,St.color,Ot,x),Ot);_t=jn(at,"marker")+jn(lt,"blink"),p=ap(c,_t,Tt,{color:Tt.color,symbolSize:At,strokeWidth:J},x),delete at.color}ut&&!ht&&op(p.selectAll(".outer,.inner"),lt,x),ut&&ht?(O.commonRendererProp(t).shiftInfo(C).yrangePos(k),O.chartRendered=!1,xt.call(O)):xt.selectAll("g.scatterseries_".concat(kt)).remove(),xt=null,N.forEach((function(t,h){var f=F.disabled;x.renderVisiblePointsOnly&&(T.seriesdataAfterUpdate[h]=pi.helpers.filterPointsInViewport(x,T.seriesdataAfterUpdate[h],"line","x",a));var p=T.seriesdataAfterUpdate[h];x.systemConf.chart.axes.xaxis.reversed&&(p=p.slice(0).reverse());var v,m=p,y=0,O=dc(c,"g",(function(t){return f?[]:[t]}),".","class","subseries_".concat(h));if(u=O.selectAll("path.line").data((function(t){return f?[]:[t]})),ot&&_!=Vc){if(_==Yc)m=p.map((function(t,e){return Object.create(p[0])}));else{var E=_==Wc?r.xidx:r.yidx(i),M=_==Wc?e:n,D=X&&bt&&!g?M.domain().length-1:0;m=p.map((function(t,e){var n=Object.create(t);if(t.isDummy&&y++,g&&_!=Wc)n.y0=0,n.y=X||null==b||null==M(b)?M.domain()[0]:Ge(b,M.domain()[0]);else if(G&&_==Bc){var a=new Array(2),r=x.dataset.getY(t,i,0);a[0]=r,a[1]=null==n[E]?null:null!=b&&null!=M(b)?Ge(b,r):r,n[E]=a}else n[E]=null==n[E]?null:X||null==b||null==M(b)?M.domain()[D]:Ge(b,M.domain()[0]);return n}))}v=Yn(m)}if(null!=C&&A){var I=e(p[0][0])+(null!=e.bandwidth?e.bandwidth()/2:0),R=x.dataObject.getXYvalue(o,g,e,n,i,p[p.length-1],"x",null,k)-x.dataObject.getXYvalue(o,g,e,n,i,p[0],"x",null,k),z={name:"rect",id:x.id,x:I,y:0,width:R,height:x.plotarea.height},B=Hr.get(Hr.svg_clips,"rect",z,{chartObj:x});c.attr("clip-path","url(".concat(j,"#").concat(B,")"))}var H=u.enter().append("path").attr("class","line").datum(m,(function(t){return r.getX(t)})).attr("d",S[h]).style("stroke",F.color||s).style("fill",dn).style("stroke-width",J).style("stroke-opacity",null==tt||""===tt?1:tt);if(ot)if(_==Uc||_==Yc)pp(m,v,p,yt,_,it,w,L,(function(t){return{d:S[h](t)}}),H);else if(_==Vc)!function(t,e,n){t.styles({"stroke-dasharray":function(){return"".concat(this.getTotalLength()," ").concat(this.getTotalLength())},"stroke-dashoffset":function(){return this.getTotalLength()}}).transition().duration(n).ease(e).style("stroke-dashoffset",0).on("end",(function(){P(l(this))}))}(H,it,w);else{var N=!p.length||1==p.length&&!p[0].length;(N=g?p.length==y:N)?H.attr("d",(function(t){return S[h]([])})):st?H.transition(st).attrTween("d",nt):H.transition().duration(w).ease(it).attrTween("d",nt)}var W=H.merge(u).datum(p,(function(t){return r.getX(t)})).attrs({id:"line_".concat(a),"stroke-dasharray":d}).styles({"stroke-linecap":dt,"stroke-width":J,"stroke-opacity":Jn(tt,1),fill:dn,stroke:et(a,pn,U("strokeColor")||s,pn,tt,h)}),V=p;if(null!=C){var Y=null!=C?Math.abs(x.dataObject.getXYvalue(o,g,T.oldXscale,n,i,p[0],"x",null,k)-x.dataObject.getXYvalue(o,g,e,n,i,p[0],"x",null,k)):null;u.datum(V).attr("d",S[h]).transition().duration(w).ease(it).attr("transform",(function(){return null==Y?null:"translate(-".concat(Y,",0)")})),P(u)}else if(null==H.node())if(st&&!ct&&u.node()){var Z=u.node().getTotalLength();u.datum(V).attr("transform",null).attr("d",S[h]),u.styles({"stroke-dashoffset":function(){return this.getTotalLength()-Z||-1},"stroke-dasharray":function(){return"".concat(this.getTotalLength()," ").concat(this.getTotalLength())}}),u.transition(st).style("stroke-dashoffset",(function(){return 0})).on("end",(function(){P(l(this))}))}else st?(u.datum(V).attr("transform",null).transition(st).attr("d",S[h]),P(u)):(u.datum(V).attr("transform",null).transition().duration(w).ease(it).attr("d",S[h]),P(u));var q=ut&&!ht?"url(".concat(j,"#").concat(_t,")"):pn,$=at.position,K=$?{"marker-start":$.indexOf(oo)>-1?q:pn,"marker-mid":$.indexOf(io)>-1?q:pn,"marker-end":$.indexOf(lo)>-1?q:pn}:{marker:q};function nt(){var t=Q(S[h](m),S[h](p));return function(e){return t(e)}}W.styles(K),$k(W,x,"line"),x.dataObject.hierarchical&&(W.attr("levelbycolumn",(function(t,e){return t[0]&&t[0].levelByColumn})),x.dataObject.pivot&&W.attr("levelbyrow",(function(t,e){return t[0]&&t[0].levelByRow}))),H.exit().remove()}));var Pt=0;ht&&ut||(Pt=ut?.5*(at.size||J)*10+J/2:0,v.push({renderer:T,charttype:"scatter",chartObj:x,rendererIndex:R,paneid:W,args:[F,a,Pt,k]}),x.dataObject.markerSize[Y]&&x.dataObject.markerSize[Y].add(Pt)),T.getSymbolSize=O.getSymbolSize||function(){return Pt}}));var L=t.params.chartObj;return L.timerObj[L.timerObj.length]=T.renderedTimer=setTimeout((function(){h&&Zr(c.selectAll("#line_".concat(a)),f,d,T),T.chartRendered=!0,A=!0}),A?2*w+20:w+20),T.oldXscale=e,T}function P(t){t.styles({"stroke-dasharray":d,"stroke-dashoffset":null})}return T.getHighlighter=function(t,e){return T.highlighter||(T.highlighter=new km(t,T)),T.highlighter},T.commonRendererProp=function(e){return arguments.length?(t=e,T):t},T.shiftInfo=function(t){return arguments.length?(C=t,T):C},T.yrangePos=function(t){return arguments.length?(k=t,T):k},T.destroy=function(){c=u=v=null,O.destroy()},T},BE.prototype.flattenData=pi.prototype.flattenData,BE.prototype.getFlattenedSeriesData=pi.prototype.getFlattenedSeriesData,BE.prototype.removeFlattenData=pi.prototype.removeFlattenData,BE.prototype.initialize=function(t){var e=this,n=e.data,a=e.dataset,r=e.chartObj,o=e.processedseriesData,i=e.globalChartType=n.seriesdata&&n.seriesdata.type,l=pi.helpers;a.seriesTypes=M(),e.totalnoofdatas=0,e.isNonAxisMultiSeriesCategory=!0,e.isHierarchy=!0,e.hasHierarchyData=r.preProcessor.hasHierarchyData,e.seriesExtermes=[[]],e.annotation=[],r.cache.data={},r.cache.search={},r.cache.customPoints={},r.cache.correction={},o&&ua(o)&&(WE(o),function t(o){o.forEach((function(o,i){if(ua(o[0]))t(o);else{var s=+o.level.split("_")[0],c=n.seriesdata.chartdata[s],u=l.getParsedYAxisOrder(c.yaxiscolumnorder);if(!c.disabled){var d=j([o],(function(t){return a.getY(t,u)}));e.seriesExtermes[0].push(d),e.totalnoofdatas++}!function(t,e,n,a){var r=(e.systemConf.notes||{}).dataIndex;Xn(r)||(t.data||t)[r]&&n.push({data:t,subSeriesIndex:0,itemIndex:0,seriesIndex:a})}(o,r,e.annotation,s)}}))}(o),o.forEach((function(t,n){var r=l.getChartType(t.type||i,Eo);e.singleSourceEvent=e.singleSourceEvent||qa(_e.singleSourceEvent,r),a.seriesTypes.add(r)})))};var HE=function(){function t(e,n){_classCallCheck(this,t),e&&ua(e)?(this.data=this.convert(e,n),WE(this.data)):this.data=e}return _createClass(t,[{key:"convert",value:function(t,e){return NE(t,e)}},{key:"getData",value:function(){return this.data}}]),t}();function NE(t,e){return t.map((function(t){var n;if(t.data&&t.data[0]&&ua(t.data[0])){n=e.hierarchical&&e.hierarchical.facetRendering?Hn(t.data):t.data;var a=t.leafColors;a&&n.forEach((function(t,e){return t.color=a[e%a.length]}))}else t.data?(e.hasHierarchyData=!0,n=NE(t.data,e)):n=t;for(var r in t)(t.hasOwnProperty(r)&&"data"!==r&&n.constructor==Array||n.constructor==Object)&&(n[r]=t[r]);return n}))}function WE(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t.forEach((function(t,n){t.level=-1!=e?"".concat(e,"_").concat(n):"".concat(n),ua(t[0])&&WE(t,t.level)}))}function VE(t,e){return e||(e=0),t.forEach((function(t){ua(t[0])?e=VE(t,e):e++})),e}wn.setComponent("hierarchyDataProcessor",BE),wn.setComponent("hierarchyDataAdapter",HE),Tr.packedbubble=function(){return{fillOpacity:.2,outerPadding:5,animation:{type:"sizing"},datalabels:{showAs:"y"}}};var YE=wn.getComponent("annotation");Pe.packedbubble=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f=X(),g=!1,v=[];function m(s){return s.each((function(c){var y=t.params;a=y.chartObj;var b=y.color,_=y.notesArray,S=y.yaxiscolumnorder,O=y.dataset,A=(a.systemConf,y.labelQueue),T=y.bound,P=y.rendererIndex,E=void 0===P?0:P;r=y.commonPlotOptions;var L=Ao(a)&&"".concat(c[0].row,"_").concat(c[0].column),M=[],D=[],I=c.filter((function(t,e){var n=a.rendererConf[E+e];return t.seriesIndex=e,v[e]=[],M[e]=m.fillColorFunc=Ls(a,e,L,null,null,null,null,n.params),D[e]=Is(a,e,L,null,n.params),!t.disabled})),R=T.width,z=T.height,j=1===I.length,F=us.hasPatternPallete(a)||a.patternPallete,B=a.systemConf.notes,H=B&&!0===B.enabled&&B.plotValues;o=r.mode,u=Ns(r,a);var N="absolute"===r.showAsNegative,W=+r.interPadding||0,V=+r.outerPadding||0,Y=Xe(R,z)-V;i=[a.plotarea.left+(R-Y)/2+y.bound.x,a.plotarea.top+(z-Y)/2+y.bound.y],d=function(t){if(!h&&k(c,t))return 0;var e=O.getY(t,S)||0;return e<0?N?Ze(e):0:e};var U=function(t){return t.depth&&c[x(t)].plotoptions},G=function(t){return Jn(bl(U(t),r,a,"enabled"),!0)},X=fp(r,null,a,Ii),Z=X.enabled,q=X.type,$=X.easingType,Q=g?Z?200:0:X.duration,K=function(t){return"translate(".concat(t.x,",").concat(t.y,")")},J=function(t){return t.r},tt=function(t,e){return r.fillOpacity},et=function(t,e){return r.strokeOpacity},nt=!g&&(q===Dc||q===Ec);f.size([Y,Y]).padding(W),(e=dc(s,"g",[1],".","class","hierarchychart")).attr("transform","translate(".concat((R-Y)/2,",").concat((z-Y)/2,")")),(n=dc(e,yr,w(c,!0))).attrs({class:function(t){return"zc_packedbubble series_".concat(x(t))}}).style("visibility",(function(t){return k(c,t)?"hidden":null})),n=n.filter((function(t){return!k(c,t)}));var at=w(I);m.total=at[0].value,(n=n.data(at)).attrs({transform:nt?K:function(t){var e=l(this).attr("transform");return null!=e?e:"translate(".concat(Y/2,",").concat(Y/2,")")},r:nt?J:function(t){var e=l(this).attr("r");return null!=e?e:0}}).styles({fill:function(t,e){var n=x(t);t.index=e,t.data.paneid=L,t.r=t.r||0,t.x=t.x||0,t.y=t.y||0,Ao(a)?t.data._parent=t.parent:t.data.parent=t.parent,H&&(t.data.x=t.x,t.data.y=t.y),!t.children&&t.parent&&v[n].push(t),t.depth?"flat"!==o&&1===t.depth&&u?t.arcColor="grey":t.arcColor=Ao(a)?Fs(a,u?C(t):n,t.data,n,L):b[(u?C(t):n)%b.length]:t.arcColor="flat"==o||u||j?dn:"grey";var r=function(t,e){return t.children?t.arcColor:e}(t);return t.fillColor=!t.depth&&F||r===dn?dn:M[n||0](u?C(t):n,t.data,null,r)},"fill-opacity":nt?0:tt,"stroke-opacity":nt?0:et,stroke:function(t){var e=x(t);return t.arcColor===dn?dn:r.strokeColor?r.strokeColor:t.children?t.arcColor:D[e||0](u?C(t):e,t.data)},"stroke-width":function(t){return r.strokeWidth},cursor:function(t){var e=U(t);return G(t)?bl(e,r,a,"cursor")||fn:pn},"pointer-events":function(t){return G(t)&&!t.children?null:dn}});var rt=n.size(),ot=g||q!==Dc?Q:Q/rt,it=q===Dc?ot:0;n.transition().delay((function(t,e){return g?0:e*it})).duration(ot).ease(g?p:$).attrs({transform:K,r:J}).styles({"fill-opacity":tt,"stroke-opacity":et}),Xk(n,a,"packedbubble"),$k(n,a,"packedbubble"),Dl(a,n,(function(t){return!G(t)}),L),a.cache.search||(a.cache.search={});var lt=function(t,e){var n=pt(t,e);a.eventHandler.handlers.mousemove.call(a.eventHandler,n),iE(t,n),a.cache.search.lastPane=L},st=function(t,e){var n=pt(t,e);n.point=t.data,a.eventHandler.handlers.mouseout.call(a.eventHandler,n,x(t)),iE(t,n),a.cache.search.lastPane=null},ct=function(t,e){var n=pt(t,e);a.eventHandler.handlers.click.call(a.eventHandler,n,t,x(t),C(t),m),iE(t,n),a.cache.search.lastPane=L},ut=function(t,e){if(m.chartRendered){var n=YE._empty?t.data:Wm(t.data,c.length>1?c[x(t)].seriesname:null),r=[t.x,t.y];r=[r[0]+(R-Y)/2,r[1]+(z-Y)/2];var o=pt(t,e);o.coordinate=r,o.basedOn="plot",o.data=n,o.point=t.data,a.eventHandler.handlers.doubleclick.call(a.eventHandler,o,x(t),t),iE(t,o),a.cache.search.lastPane=L}},dt={target:"plot",touchleave:!0,chartObj:a},ht={mousemove:lt,mouseout:st,click:ct,dblclick:ut},ft={singletouchmove:lt,touchend:st,tap:ct,dbltap:ut};function pt(t,e){var n=xl(jt()),r=x(t),o=C(t);return{renderer:m,seriesIndex:r,subSeriesIndex:0,itemIndex:o,paneid:L,rendererIndex:E,coordinates:[n.pageX,n.pageY],element:this,data:t,selected:t.selected,_key:"ZC_".concat(a.id,"_").concat(r,"_").concat(0,"_").concat(o)}}Iu(n.filter((function(t){return!t.children})),ht,ft,dt),a.timerObj[a.timerObj.length]=m.renderedTimer=setTimeout((function(){if(YE._empty||c.forEach((function(t,e){_=YE.preprocessAnnotations(c,e,(function(t,e,n){var a=[t.x,t.y];return[a[0]+(R-Y)/2,a[1]+(z-Y)/2]}),_,a,y)})),Me){var t=[(R-Y)/2,(z-Y)/2],e=function(t,e){return e===Ad?m.total:t.parent.value};c.forEach((function(n,r){var o=a.renderer[Ao(a)?E+r:0],i=Ao(a)?E+r:r,l=Ao(a)?"".concat(n.row,"_").concat(n.column):r;A.push({renderer:o,charttype:"hierarchy",chartObj:a,rendererIndex:i,paneid:l,args:[c[r],r,null,null,e,v[r],t]})}))}g=!0,m.chartRendered=!0}),Q+17)})),m}function y(){if(!s){var t=a.staticPaneSVG.selectAll("g#zchierarchyhighlight");t.empty()||(c=dc(s=t,mr,[1]))}}function b(t){var e=t.level&&t.level.split("_").length;return!a.dataObject.hasHierarchyData&&1==e&&t.length<2&&t[0]&&ua(t[0][0])?t[0]:ua(t[0])?ua(t[0][0])?t:t.filter((function(t){return ua(t[0])||d(t)>0})):null}function x(t){var e=t.level||t.data&&t.data.level;if(e)return+e.split("_")[0]}function C(t){return t.data.itemPos}function k(t,e){var n=x(e);return na(n)&&t[n].disabled}function w(t,e){h=e;var n=r.order||B;"string"==typeof n&&(n=fa(window,n));var a=G(function(t){var e=[];function n(t,e){var n=e.split(/_/);t.seriesPos=+n[0],t.itemPos=+n[n.length-1]}return function t(a,r){var i=b(a);i?i.forEach((function(e,a){var o=na(r)?"".concat(r,"_").concat(a):"".concat(e.seriesIndex);n(e,o),t(e,o)})):(n(a,r),"flat"==o&&e.push(a))}(t),"flat"==o?e:t}(t),b).sum(d).sort(n);return f(a),a.descendants()}return m.commonRendererProp=function(e){return arguments.length?(t=e,m):t},m.defaultMouseOverFunc=function(t,e,r,o){y();var d=l(n.nodes()[t.index]),h=iu(d).translate,f=a.legendHighlight.getLegendHighlightEffect(e,"selectedSeries","plot",o),p=Fs(a,u?r:e,t.data,e,o);s.style("opacity",null),c.attrs({transform:"translate(".concat(i[0]+h[0],",").concat(i[1]+h[1],")"),d:np("circle")(2*+d.attr("r"))}).styles(a.legendHighlight.getEffect(f,Ii,je.test(f)?p:hn,{fill:hn,stroke:p},u?r:e,"plot"))},m.defaultMouseOutFunc=function(t,e){y(),s.style("opacity",0)},m},Tr.pyramid=function(){return{threeDimension:!0,strokeColor:"black",strokeWidth:null,strokeOpacity:.5,fillOpacity:.8,gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.8,0]}}},datalabels:{showAs:"y",type:"singleside",padding:10,relativeX:!0,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"vertical"}}};var UE=wn.getComponent("annotation");function GE(){var t=this,e=this.chart,n=this.builderC,a=e.systemConf,r=this.config.series,o=this.config.common,i=fp(o,r,this.chart,this.type),l=this.chart.systemConf.chart.plot.morph.enabled&&this.chart.oldSeriesInfo,s=i.type,c=i.duration,u=0,d=this.commonOption.scatterOrBubble,h=this.data.data[0],f=h.length,p=h.plotoptions,g=n.hasNegValue,v=n.xscale,m=n.yscale,y=n.axisrotated,b=n.stacked,x=n.yaxiscolumnorder,C=(n.yrangePos,e.dataset.getDataType("x")),k=C==To?v.domain():null,w=C!=To||null==v.domain||na(e.dataObject.hierarchical)?e.dataObject.getCategories("x"):k;s=d?s==Ec?Dc:s:s==Bc||s==Hc?Fc:s==Wc?Nc:s,i.type=s,i.enabled?l?i._duration=this.chart.systemConf.chart.plot.morph.duration||i.duration:(u=s==Yc?Ve(c/(w.length-1)):[Uc,Xc].includes(s)?c/f:c,i._duration=u,i._pathDuration=s===Rc?2*c/5:u,i._pathDelay=s===Rc?function(){return rn()*(3*c/5)}:0):(i._duration=0,i._pathDuration=0,i._pathDelay=0),i._delay=function(t,e,n){switch(s){case Uc:return n[0]?e*u:0;case Yc:return this.previousElementSibling?(e-1)*u:0;case Xc:return e*u;default:return 0}},i._exitduration=0,this.builderC.animationOptions=i,this.builderC.blinkOptions=(p&&p.animation&&p.animation.blink?Rn(o.animation.blink,p.animation.blink,!0):o.animation.blink)||{};var _=this.builderC.renderingOrder=this.conf.renderingOrderIndex();t.builderC.stackIndex=t.builderC.stacked?2*e.seriesdata.length+_:void 0,t.builderC.yrangePos=this.oldRenderer.yrangePos();var S=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=n.xscale,o=n.yscale,i=n.zscale,l=n.axisrotated,s=n.stacked,c=n.yaxiscolumnorder,u=n.yrangePos;return e.dataObject.getXYvalue(l,s,r,o,c,t,a,i,u)},O=n.xReversed=a.chart.axes.xaxis.reversed,A=n.yReversed=a.chart.axes.yaxis[x].reversed,T=e.dataObject.isPolarAxisCategory;n._getXYvalue=S,n.getInitialX=function(t){switch(s){case Fc:return y?null!=g&&null!=m(g)?m(Ge(g,m.domain()[0])):m.origRange[0]:S(t,"x");case Nc:return y?S(t,"x"):(null!=g&&null!=v(g)?v(Ge(g,v.domain()[0])):v.origRange[0])+(null!=v.bandwidth?v.bandwidth()/2:0);case Dc:case Ic:case Rc:case Yc:case Uc:case Vc:return S(t,"x");default:var e=(y?m:v).origRange;return e[y&&A||!y&&O?e.length-1:0]}},n.getInitialY=function(t){switch(s){case Fc:return y?S(t,"y"):null!=g&&null!=m(g)?m(Ge(g,m.domain()[0])):m.origRange[0];case Nc:return y?(null!=g&&null!=v(g)?v(Ge(g,v.domain()[0])):v.origRange[0])+(null!=v.bandwidth?v.bandwidth()/2:0):S(t,"y");case Dc:case Ic:case Rc:case Vc:case Yc:return S(t,"y");case Uc:var n=[],a=e.dataset.yidx(x),r=T&&A&&!b?m.domain().length-1:0,o=T||null==g||null==m(g)?m.domain()[r]:Ge(g,m.domain()[0]);return b&&(n.y=0,n.y0=o),n[a]=o,S(n,"y");default:var i=(y?v:m).origRange;return i[y&&O||!y&&A?i.length-1:0]}}}Pe.pyramid=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f,g,v,y,b,x,C,k,w,_,S,O,A,T,P,E,L,M={},D=!1,I=[];function R(B){B.each((function(B){var H=e.params;_=H.chartObj,i=H.commonPlotOptions,k=H.color,c=H.notesArray,a=H.yaxiscolumnorder,n=H.dataset,s=_.systemConf;var W=H.labelQueue,V=H.bound,Y=H.rendererIndex,U=Ao(_)&&Ys(_)?B:B[0],G=Ao(_)?"".concat(U.row,"_").concat(U.column):null;_.defsLocation;var X=_objectSpread(_objectSpread({},V),L);r=X.width,o=X.height;var Z=Xe(r,o);if(E=i.datalabels.padding,_.datalabels.moduleExists&&Ud(i.datalabels,_)){var q=.3*r,$=r-Z;$<q&&(E=M.datalabelPadding=5,Z-=Ge(q-$,0))}M.width=Z,M.height=4*Z/5;var K=B[0].plotoptions,J=Dn.getValueOfPlotOptions(K,i);u=s.legend.imagePallete||us.hasPatternPallete(_);var tt=J("strokeWidth"),et=J("strokeOpacity"),nt=J("threeDimension"),at=J("fillOpacity"),rt=fp(i,K,_,Ei),ot=rt.enabled,it=rt.easingType,lt=D?ot?200:0:rt.duration;t=rt.type;var st=0==Jn(bl(K,i,_,"enabled"),!0),ct=st?null:bl(K,i,_,"cursor")||"pointer",ut=r/2-M.width/2,dt=o/2-M.height/2,ht=Ys(_)?[ut+X.translate[0],dt+X.translate[1]]:[ut,dt];_.plotarea.centerX=ut,_.plotarea.centerY=dt;var ft=l(this);(S=dc(ft,"g",[B],".","class","pyramidgroup")).attr("transform","translate(".concat(ut,",").concat(dt,")")).style("cursor",ct),P=B=Ys(_)?B:B[0].data[0],T=B.length,w=[],d=M.height,f=M.width,g=nt?M.height/6:0;var pt=$e(qe(g/Ke(25*on/180),2)-qe(g,2));f-=pt,v=m().range([(f+pt)/2,0]).domain([0,d]),y=m().range([(f+pt)/2,f]).domain([0,d]),b=m().range([(f+pt)/2,f+pt]).domain([0,d]),x=m().range([(f+pt)/2,pt]).domain([0,d]),C=m().range([0,g]).domain([0,d-g/2]),O=[M.width,M.height],R.fillColorFunc=Ls(_,0,G,O);var gt=Is(_,0,G);Ao(_)?B.forEach((function(t,e){var n=T-1-e;I[n]=Ls(_,n,G)})):I[0]=R.fillColorFunc;var vt=0;R.total=h=B.reduce((function(t,e){return t+(F(e)?0:(vt++,Ze(n.getY(e,a)||0)))}),0);var mt=0;if(B.forEach((function(t,e){t._acutalData=function(){return B[T-1-e]},w.push({height:(mt+(F(t)?0:Ze(n.getY(t,a))))/h*(d-g/2)||0,previousHeight:mt/h*(d-g/2)||0}),mt+=F(t)?0:Ze(n.getY(t,a))})),(A=dc(S,"g",B,".","class","pyramidsection")).attr("id",(function(t,e){return"section_".concat(T-1-e)})).styles({stroke:function(t,e){return Ao(_)?Is(_,T-1-e,G)(T-1-e,B[T-1-e],i.strokeColor):gt(T-1-e,B[T-1-e],i.strokeColor)},"stroke-opacity":et,"stroke-width":tt,"fill-opacity":at,fill:function(t,e){return Ao(_)?I[T-1-e](T-1-e,B[T-1-e]):I[0](T-1-e,B[T-1-e])}}).each((function(t,e){dc(l(this),mr,[t,t,t,t]).attr("class","section_".concat(T-1-e))})),Xk(A,_),$k(A,_,"pyramid"),Dl(_,A,st,G),_.cache.search||(_.cache.search={}),!st){var yt=function(t,e){var n=this.parentNode,a=la(l(n).attr("id").replace(/section_/gi,"")),r=Ot(n,a);_.eventHandler.handlers.mousemove.call(_.eventHandler,r),iE(B[a],r),_.cache.search.lastPane=G},bt=function(t,e){var n=this.parentNode,a=la(l(n).attr("id").replace(/section_/gi,"")),r=Ot(t,a);_.eventHandler.handlers.mouseout.call(_.eventHandler,r,a),iE(B[a],r),_.cache.search.lastPane=null},xt=function(){var t=this.parentNode,e=la(l(t).attr("id").replace(/section_/gi,"")),n=Ot(t,e);_.eventHandler.handlers.click.call(_.eventHandler,n,R,0,e,B[e]),iE(B[e],n),_.cache.search.lastPane=G},Ct=function(t,e){var n=this.parentNode,a=la(l(n).attr("id").replace(/section_/gi,"")),i=UE._empty?B[a]:Wm(B[a],null),s=w[a].previousHeight,c=[v(s+C(s)/2)+(r/2-M.width/2),C(s)/2+s+(o/2-M.height/2)],u=Ot(n,a);u.coordinate=c,u.basedOn="plot",u.data=i,_.eventHandler.handlers.doubleclick.call(_.eventHandler,u,a,t),iE(B[a],u),_.cache.search.lastPane=G},kt={target:"plot",touchleave:!0,chartObj:_},wt={mousemove:yt,mouseout:bt,click:xt,dblclick:Ct},_t={singletouchmove:yt,touchend:bt,tap:xt,dbltap:Ct};Iu(A.selectAll(mr),wt,_t,kt)}var St=0;function Ot(t,e){var n=xl(jt());return{renderer:R,seriesIndex:Ys(_)?e:0,subSeriesIndex:0,itemIndex:e,paneid:G,rendererIndex:Y,color:k[e%k.length],coordinates:[n.pageX,n.pageY],element:t,data:B[e],selected:B[e].selected,_key:"ZC_".concat(_.id,"_0_0_").concat(e)}}function At(t,e){var n=e?"none":null;S.selectAll("#section_".concat(t)).style("display",n)}A.each((function(e,r){var o=S.selectAll("#section_".concat(r)).selectAll(mr);if(D)o.transition().duration(lt).ease(p).attr("d",(function(t,e){return z(r,e)}));else{var i=n.getY(e,a),s=t==jc?(F(e)||!i?0:Ze(i))/h*lt:lt;St+=F(e)||!i?0:Ze(i);var c=t==jc?(h-St)/h*lt:0;if(_.systemConf.chart.plot.morph.enabled&&null!=_.oldSeriesInfo){var u=new _P({sampling:_.systemConf.chart.plot.morph.samplingDistance}),d=_.oldSeriesInfo.get(0),f=d.seriesIndex,g=d.color,m=_v(_,f),x=d.transformationInfo;lt=_.systemConf.chart.plot.morph.duration;var k=w[r].height,O=w[r].previousHeight,A="M".concat(v(O+C(O)/2)," ").concat(C(O)/2+O," L").concat(y(O+C(O)/2)," ").concat(C(O)/2+O," L").concat(b(O+C(O)/2)," ").concat(-C(O)/2+O," L").concat(b(k+C(k)/2)," ").concat(-C(k)/2+k," L").concat(y(k+C(k)/2)," ").concat(C(k)/2+k," L").concat(v(k+C(k)/2)," ").concat(C(k)/2+k),P=N(),E=_.oldSeriesInfo.get(f).pathData[r],L=E.getAttribute("d");E.setAttribute("d",A);var M=E.cloneNode();E.setAttribute("d",L);var R=u.interpolate({path:E,xOffset:m.x+x[r].x,yOffset:m.y+x[r].y},{path:M,xOffset:0,yOffset:0});o.each((function(t,e){if(0===e){var n=S.selectAll("#section_".concat(r));n.style("fill",(function(){return g[r]})).transition().duration(lt).ease(it).style("fill",(function(){return Fs(_,r,t.data,f,null)})),l(this).transition().duration(lt).ease(it).attrTween("d",(function(t,e){return function(t){return P(R.map((function(e){return e(t)})))}})).on("end",(function(t,e){_.oldSeriesInfo&&delete _.oldSeriesInfo,0===e&&(o.each((function(t,e){l(this).attr("d",z(r,e))})),n.style("fill",(function(){return Ao(_)?I[r](r,B[r]):I[0](r,B[r])})))}))}}))}else o.transition().duration(s).delay(c).ease(it).attrTween("d",(function(e,n){return function(e,n,a){var r=Q(z(t==jc?n:T-1,a,"down"),z(n,a));return function(t){return r(t)}}(0,r,n)}))}})),function(){if(!Ao(_))return;var t=D?lt:0;A.each((function(e,r){var o=e.dummy||!n.getY(e,a),i=o?t:0;i?setTimeout((function(){At(r,o)}),i):At(r,o)}))}(),_.timerObj[_.timerObj.length]=R.renderedTimer=setTimeout((function(){if(Me){var t=[_.seriesdata,0,B,vt,0,h,M,j(B),R.subSeriesIndex||0,ht];W.push({renderer:R,charttype:Pi,chartObj:_,args:t,rendererIndex:Y,paneid:G}),W.push({renderer:R,charttype:"funnelInnerLabels",chartObj:_,args:t,rendererIndex:Y,paneid:G})}UE._empty||(c=UE.preprocessAnnotations(_.seriesdata,0,(function(t,e,n){var a=w[n].previousHeight;return[v(a+C(a)/2)+(r/2-M.width/2),C(a)/2+a+(o/2-M.height/2)]}),c,_,H)),D=!0,R.chartRendered=!0,Ys(_)&&_.renderer[Y].endFunctions()}),lt+10)}))}function z(t,e,n){var a=w[t].height,r="down"==n?a:w[t].previousHeight;switch(e){case 0:return function(t,e){return"M".concat(b(t+C(t)/2)," ").concat(-C(t)/2+t," L").concat(x(t+C(t)/2)," ").concat(-C(t)/2+t," L").concat(x(e+C(e)/2)," ").concat(-C(e)/2+e," L").concat(b(e+C(e)/2)," ").concat(-C(e)/2+e," L").concat(b(t+C(t)/2)," ").concat(-C(t)/2+t)}(a,r);case 1:return function(t,e){return"M".concat(x(t+C(t)/2)," ").concat(-C(t)/2+t," L").concat(v(t+C(t)/2)," ").concat(C(t)/2+t," L").concat(v(e+C(e)/2)," ").concat(C(e)/2+e," L").concat(x(e+C(e)/2)," ").concat(-C(e)/2+e," L").concat(x(t+C(t)/2)," ").concat(-C(t)/2+t)}(a,r);case 2:return function(t,e){return"M".concat(v(t+C(t)/2)," ").concat(C(t)/2+t," L").concat(y(t+C(t)/2)," ").concat(C(t)/2+t," L").concat(y(e+C(e)/2)," ").concat(C(e)/2+e," L").concat(v(e+C(e)/2)," ").concat(C(e)/2+e," L").concat(v(t+C(t)/2)," ").concat(C(t)/2+t)}(a,r);case 3:return function(t,e){return"M".concat(y(t+C(t)/2)," ").concat(C(t)/2+t," L").concat(b(t+C(t)/2)," ").concat(-C(t)/2+t," L").concat(b(e+C(e)/2)," ").concat(-C(e)/2+e," L").concat(y(e+C(e)/2)," ").concat(C(e)/2+e," L").concat(y(t+C(t)/2)," ").concat(C(t)/2+t)}(a,r)}}function j(t){var e=[];return t.forEach((function(n,a){var r=t.length-1-a,o=w[r].height,i=w[r].previousHeight,l=(o+i)/2,s=b(o+C(o)/2),c=-C(o)/2+o,u=b(i+C(i)/2),d=-C(i)/2+i,h=v(o+C(o)/2),f=C(o)/2+o,p=(s+u)/2,g=(c+d)/2,m=(h+v(i+C(i)/2))/2,x=(f+(C(i)/2+i))/2,k=(v(l+C(l)/2)+y(l+C(l)/2))/2;e.push({rightx:p+E,leftx:m-E,y:g,y0:o+C(o)/2,midX:k,leftY:x})})),e}function F(t){return t.disabled||t.dummy}return R.commonRendererProp=function(t){return arguments.length?(e=t,R):e},R.plotarea=function(t){return arguments.length?(L=t,R):L},R.defaultMouseOverFunc=function(t,e,n){u?A.style("opacity",(function(t,e){return T-1-e==n?null:.2})):A.style("fill",(function(t,e){return(Ao(_)?I[T-1-e]:I[0])(T-1-e,P[T-1-e],T-1-e==n?.5:null)}))},R.defaultMouseOutFunc=function(t,e){u?A.style("opacity",null):A.style("fill",(function(t,e){return(Ao(_)?I[T-1-e]:I[0])(T-1-e,P[T-1-e])}))},R.destroy=function(){S=A=null},R},Jp.scatter=function(){var t,e,n,a=pi.helpers;function r(t,o,i,l){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"clr",c=e.params,u=c.chartObj,d=c.xscale,h=c.yscale,f=c.stacked,p=c.datasetIndex,g=c.legendOrderIndex,v=c.rendererIndex,m=c.axisrotated,y=c.commonPlotOptions,b=c.color,x=c.labelQueue,C=c.yaxiscolumnorder,k=c.dataset,w=c.threshold,_=c.shapescale,S=u.dataObject.categoryHierarchy?o[p]:u.seriesdata[p],O=S.plotoptions||{},A=O?Rn(y,O,!0):y,T=S.data,E=Ao(u)?"".concat(S.row,"_").concat(S.column):"0_0",L=Ui(u,E,p),M=L.value,D=L.name,I=kl(M),R=_e.bubble.has(M),z=u.dataObject.isPolarAxisCategory,j=u.systemConf.legend,F=e.params.markerOptions=O&&O.marker?Rn(y.marker,O.marker,!0):y.marker,B=(e.params.hoverOptions=O&&O.hoveroptions?Rn(y.hoveroptions,O.hoveroptions,!0):y.hoveroptions,F.symbol||"circle"),H=F.size,N=F.imageUrl,W=I&&Ns(A,u),V=j.patternPallete,Y=Bi.isQuantileColorScale(u);I?H=wa(H,1):(Xn(H)&&(H=wa(A.strokeWidth,2)),N||(H*=z?.56:.7),b=wa(S.color,b));var U=Ao(u)?Fs(u,g,S,g,E):b,G=5*H,X=F.outerFillOpacity,Z=F.outerStrokeOpacity,q=F.innerFillOpacity,$=F.innerStrokeOpacity,Q=wa(F.outerStrokeWidth,1),K=wa(F.innerStrokeWidth,1),J=wa($n(F.outerStrokeColor,U,F,u),U),tt=wa($n(F.innerStrokeColor,U,F,u),U),et=wa($n(F.outerFillColor,U,F,u),U),nt=wa($n(F.innerFillColor,U,F,u),U),at=Gr(F.outerDashStyle,Q),rt=Gr(F.innerDashStyle,K),ot=Xr(F.outerLineCap,F.outerDashStyle),it=Xr(F.innerLineCap,F.innerDashStyle),lt=F.position;function st(t){return(!z||t&&!t.isDummy)&&(z||M===M.stkdarea||!kt(k.getX(t))&&!wt(k.getY(t,C)))&&(z||M!=M.stkdarea||t&&!t.isDummy)?R?u.dataObject.getXYvalue(m,f,d,h,C,t,"z",u.zscale,n):2*G:0}function ct(t){var e=st(t)/2;return e>0&&("line"==B||"vertical-line"==B)?"line"==B?{width:e,height:Tt||1}:"vertical-line"==B?{width:Tt||1,height:e}:void 0:null}function ut(t){var e=st(t);if("line"==B||"vertical-line"==B){var n=t._data(),a=ip(B,e,n._x,n._y);return"line"==B||"vertical-line"==B?[a]:a}}na(i)&&(Q=wa(i["stroke-width"],Q),!na(l)||Z&&P(J).opacity||(K=wa(i["stroke-width"],K))),na(X)&&et&&(et=Ps(et,X)),na(Z)&&J&&(J=Ps(J,Z)),na(q)&&nt&&(nt=Ps(nt,q)),na($)&&tt&&(tt=Ps(tt,$)),I&&(r.highlighter=R?new bk(u,r):new rv(u,r)),r.getSymbolSize=st,r.getSymbolBBox=ct,r.getSegments=ut;var dt,ht,ft=!(na(w)||W||"scatter"!==D&&"line"!==D&&"area"!==D||V||N||Y||_),pt=(r.fillColorFunc=Ls(u,g,E,null,!I),Is(u,g,E)),gt=Ls(u,g,E,null,!0);if(ft){yt=r.fillColorFunc(g,S,null,et,null,I?[G,G]:null,!1),dt=Jp.scatter.getCache(B,G,J,Q,yt,tt,K,nt,F),ht=dt.canvas;var vt=dt.adjustPosition,mt=dt.width}if(!S.disabled){var yt,bt,xt=u.dataset.getDataType("x"),Ct=u.dataset.getDataType("y",C),kt=a.isCatNull(k,"x"),wt=a.isCatNull(k,"y",C),_t=xt==To?d.domain():null,St=Ct==To?h.domain():null;(xt!=To||null==d.domain||na(u.dataObject.hierarchical))&&u.dataObject.getCategories("x");if(u.dataObject.markerSize[D]){var Ot="line"==B||"vertical-line"==B?Tt||1:2*G;u.dataObject.markerSize[D].add(Ot)}r.seriesdataAfterUpdate=[],T.forEach((function(e,n){var a;if(a=xt==To||Ct==To?u.dataObject.updateSeriesdatabyCategories(Yn(e),_t,St,C):e,u.renderVisiblePointsOnly){var o="scatter"===D||"bubble"===D?"xy":"x";a=pi.helpers.filterPointsInViewport(u,a,D,o,p)}r.seriesdataAfterUpdate[n]=a,Y&&na(i)&&"clr"===s&&(a=us.filterSelectionByColor(a,!0,l,u)),R&&na(i)&&"z"===s&&(a=us.filterSelectionByColor(a,!0,l,u,"z")),a.forEach((function(e,n){var o,i="z"===s?wa(e.sortedItemIndex,n):n,l=0===n?oo:n===a.length-1?lo:io;if(z||M===Gt.stkdarea||e&&!e.isDummy&&!kt(k.getX(e))&&!wt(k.getY(e,C))){if(!z&&M==Gt.stkdarea&&(!e||e.isDummy))return;if(lt&&lt.indexOf(l)<=-1)return;var c=u.dataObject.getXYvalue(m,f,d,h,C,e,"x"),p=u.dataObject.getXYvalue(m,f,d,h,C,e,"y"),v=st(e)/2,y=_?_(e[k.shapeidx]):B;if(ft){t.beginPath();var b=v+Q/2+vt;t.drawImage(ht,c-b,p-b,mt-1,mt-1),t.closePath()}else{if(et||J){o=pt(W?i:g,e,u.imagePallete?null:$n(F.outerStrokeColor,U,F,u),pn,Z);var x=function(t,e,n){Jp.scatter.drawPath(y,t,c,p,v,Q,o,e,at,ot,N,n,X)};if(N){var w={x:c,y:p,width:2*v,height:2*v,context:t,name:N,repeatMode:"no-repeat"};Hr.canvas_patterns.imageFill(w,x)}else if(u.imagePallete){w={x:c,y:p,context:t,name:u.imagePallete[W?i:g]};Hr.canvas_patterns.imageFill(w,x)}else{var S=r.fillColorFunc(W?i:g,e,null,$n(F.outerFillColor,U,F,u),X,I?[v,v]:null,!1);x(t,S)}}var O=!0;(N||0===K&&(0===q||"transparent"===$n(F.innerFillColor,U,F,u)))&&(O=!1),O&&(S=gt(W?i:g,e,null,$n(F.innerFillColor,U,F,u),q,null,!1),bt=Ps(pt(W?i:g,e,u.imagePallete?null:$n(F.innerStrokeColor,U,F,u)),$),Jp.scatter.drawPath(y,t,c,p,v/2,K,bt,S,rt,it,null,null,null,"inner"))}}}))}))}if(na(Me)){var At;if(I)At=2*G+F.outerStrokeWidth;else{var Tt=wa(A.strokeWidth,2);At=wa(F.size,Tt)*G+Tt/2}x.push({renderer:r,charttype:"scatter",chartObj:u,rendererIndex:v,paneid:E,args:[S,g,At,n]})}return r.chartRendered=!0,t=ht=null,r}return r.getHighlighter=function(t,e){if(!r.highlighter){var n=_e.bubble.has(Ui(t,null,e).value);r.highlighter=n?new bk(t,r):new rv(t,r)}return r.highlighter},r.commonRendererProp=function(t){return arguments.length?(e=t,r):e},r.shiftInfo=function(e){return arguments.length?(t=e,r):t},r.yrangePos=function(t){return arguments.length?(n=t,r):n},r},Jp.scatter.drawPath=function(t,e,n,a,r,o,i,l,s,c,u,d,h,f){if(e.save(),e.translate(n,a),e.beginPath(),e.lineWidth=o,e.strokeStyle=i,"circle"===t)e.arc(0,0,r,0,2*on);else{var p=np(t)(2*r,null,null,f);Cp.drawPath(e,p)}u&&(e.globalAlpha=h,e.translate(-r+d.x,-r+d.y)),e.fillStyle=l,l&&e.fill(),u&&(e.globalAlpha=1),s&&s.length&&"object"===_typeof(s)&&na(e.setLineDash)&&(e.setLineDash(s),e.lineCap=c),o&&i&&e.stroke(),e.closePath(),e.restore()},Jp.scatter.getCache=function(t,e,n,a,r,o,i,l,s){var c=1.5*vn,u=document.createElement("canvas"),d=(e+a/2)*c+5,h=u.getContext("2d"),f=(2*e+a+10)*c,p=f/c;return u.height=u.width=f,this.drawPath(t,h,d,d,e*c,a*c,n,r,Gr(s.outerDashStyle,a,c),Xr(s.outerLineCap,s.outerDashStyle)),this.drawPath(t,h,d,d,e/2*c,i*c,o,l,Gr(s.innerDashStyle,i,c),Xr(s.innerLineCap,s.innerDashStyle),null,null,null,"inner"),{canvas:h.canvas,width:p,adjustPosition:5/c}},Tr.scatter=function(t){var e={outerPadding:.02,multiColoring:!1,marker:{size:1,innerFillColor:"white",innerStrokeColor:"white",innerStrokeWidth:0,innerStrokeOpacity:1,outerFillColor:"white",outerStrokeOpacity:1,outerStrokeWidth:2},hoveroptions:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},datalabels:{showAs:"y"},animation:{type:"allseries"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[2,0]},radial:{radius:90,colorGamma:[2,0]}}}};return"geoscatter"===t&&(e.animation.type="sizing",e.datalabels.showAs="geo",e.datalabels.orient="bottom",e.datalabels.textOverlap="hidden"),e},Tm("scatter.default",(function(t){var e,n,a,r,o,i=this,l=this.chart,s=this.builderC,c=s.markerOptions,u=s.animationOptions,d=this.chart.racing&&this.chart.racing.syncTransition,h=this.chart.systemConf.chart.plot.morph.enabled&&this.chart.oldSeriesInfo,f=s.liveUpdate,p={},g=this.oldRenderer,v="redraw"===this.phase,m=c.imageUrl,y=l.dataset.getDataType("x",0)===To,b="scatter";e={transform:function(t,e){return i.helpers.position[b].start.call(this,{data:t,index:e})}},n={visibility:this.helpers.styles[b].visibility},v&&m&&(n.transform=function(t,e){return i.helpers.position[b].stop_1.call(this,{data:t,index:e})}),a={transition:d,transform:function(t,e){return i.helpers.position[b].start.call(this,{data:t,index:e})}},r=[{transition:d,delay:u._delay,duration:u._duration,easing:u.easingType,transform:function(t,e){return i.helpers.position[b].end.call(this,{data:t,index:e})}}],o={duration:u._exitduration},u.type==Yc&&(a=n=null,v?(r[0].delay=null,r[0].duration=u.duration):(e.visibility="hidden",r[0].visibility="visible")),d&&(o={transition:d,duration:u._exitduration,transform:function(t,e){return i.helpers.position[b].exit.call(this,{data:t,index:e})}}),h?(e={transform:function(t,e){return i.helpers.position[b].end.call(this,{data:t,index:e})}},a=null):f&&(r=[{duration:"redraw"==i.phase?u._duration:0,transform:function(t,e){return i.helpers.position[b].end.call(this,{data:t,index:e})}}]),this.chart.dataObject.hierarchical&&(p={levelbycolumn:function(t){return t.levelByColumn},levelbyrow:function(t){return t.levelByRow}});var x={mark:"g",selector:".subseries",data:function(){return t.disabled?[]:t.data},properties:{attrs:{class:function(t,e){return t.subseriesIdx=e,"subseries subseries_".concat(e)}}},anime:{exit:{delay:u._exitduration}},children:[{mark:"g",selector:".scatter",data:function(e,n){return t.disabled?[]:i.helpers.filterData(e)},dataAccessor:d&&y?function(t){return l.dataset.getX(t)}:null,config:{enter:e,update:n,exit:undefined},anime:{enter:a,update:r,exit:o},properties:{attrs:_objectSpread(_objectSpread({},p),{},{class:"scatter zc_scatter"}),styles:{transition:"opacity ease .2s"}},onEnd:function(t){$k(t,l,"scatter"),op(t.selectAll(".outer,.inner"),i.builderC.blinkOptions,l),t.attr("size",(function(t){return g.getSymbolSize(t)})),h&&l.oldSeriesInfo&&delete l.oldSeriesInfo},children:[Pm("scatter.outer").call(this,t),Pm("scatter.inner").call(this,t)]}]};return x})),Tm("scatter.outer",(function(t){var e,n,a,r,o=this,i=this.chart,l=this.builderC,s="redraw"===this.phase,c=l.animationOptions,u=this.chart.racing&&this.chart.racing.syncTransition,d=this.chart.systemConf.chart.plot.morph,h=d.enabled&&this.chart.oldSeriesInfo,f=l.liveUpdate,p=l.rendererIndex,g=this.oldRenderer,v=g.commonRendererProp().datasetIndex(),m="outer";if(s||(e={fillOpacity:o.helpers.styles[m].initialFillOpacity,strokeOpacity:o.helpers.styles[m].initialStrokeOpacity,visibility:o.helpers.styles[m].visibility}),n={d:function(t,e){return o.helpers.position[m].start.call(this,t)},strokeWidth:this.helpers.styles[m].strokeWidth,fill:this.helpers.styles[m].fill,stroke:this.helpers.styles[m].stroke,dashStyle:this.helpers.styles[m].strokeDasharray,lineCap:this.helpers.styles[m].strokeLinecap,visibility:o.helpers.styles[m].visibility},a=[{delay:c._pathDelay,duration:c._pathDuration,easing:c.easingType,d:function(t,e){return o.helpers.position[m].end.call(this,t)},fillOpacity:this.helpers.styles[m].fillOpacity,strokeOpacity:this.helpers.styles[m].strokeOpacity}],r={duration:c._exitduration},u);else if(h){var y=i.oldSeriesInfo.get(v).color,b=d.duration,x=o.commonOption.multiColoring;a=[{duration:b,easing:c.easingType,fill:function(t,e){return Fs(i,x?t.index:0,t.data,v,null,p)},d:{property:"attrTween",to:function(t,e){var n=o.helpers.position.scatter_morphing.interpolator[t.data.itemIndex];return function(t){return o.helpers.position.scatter_morphing.line_d3(n.map((function(e){return e(t)})))}}}},_objectSpread(_objectSpread({},n),{},{duration:0})],n={fill:function(t,e){return y[t.index]}}}else f&&(a=[{duration:"redraw"==o.phase?c._duration:0,d:function(t,e){return o.helpers.position[m].end.call(this,t)}}]);return{mark:"point",selector:".outer",data:g.pathData,properties:{attrs:{class:function(t,e){return"outer scatter-outer"}}},config:{enter:e,update:n},anime:{update:a,exit:r}}})),Tm("scatter.inner",(function(t){var e,n,a,r,o=this,i=(this.chart,this.builderC),l=i.animationOptions,s=this.chart.racing&&this.chart.racing.syncTransition,c=this.chart.systemConf.chart.plot.morph,u=c.enabled&&this.chart.oldSeriesInfo,d=i.liveUpdate,h=this.oldRenderer,f=i.markerOptions,p=f.imageUrl,g=f.innerStrokeWidth,v=f.innerFillOpacity,m=f.innerFillColor,y=p||0===g&&(0===v||"transparent"===m),b="inner";if(e={fillOpacity:o.helpers.styles[b].initialFillOpacity,strokeOpacity:o.helpers.styles[b].initialStrokeOpacity,visibility:o.helpers.styles[b].visibility},n={d:function(t,e){return o.helpers.position[b].start.call(this,t)},fill:o.helpers.styles[b].fill,stroke:o.helpers.styles[b].stroke,strokeWidth:o.helpers.styles[b].strokeWidth,dashStyle:o.helpers.styles[b].strokeDasharray,lineCap:o.helpers.styles[b].strokeLinecap,visibility:o.helpers.styles[b].visibility},a=[{delay:l._pathDelay,duration:l._pathDuration,easing:l.easingType,d:function(t,e){return o.helpers.position[b].end.call(this,t)},fillOpacity:o.helpers.styles[b].fillOpacity,strokeOpacity:o.helpers.styles[b].strokeOpacity}],r={duration:l._exitduration},s);else if(u){var x=c.duration;n={strokeWidth:o.helpers.styles[b].strokeWidth,fill:o.helpers.styles[b].fill,stroke:o.helpers.styles[b].stroke,dashStyle:o.helpers.styles[b].strokeDasharray,lineCap:o.helpers.styles[b].strokeLinecap,visibility:o.helpers.styles[b].visibility},a=[{delay:x,d:function(t,e){return o.helpers.position[b].end.call(this,t)},fillOpacity:o.helpers.styles[b].fillOpacity,strokeOpacity:o.helpers.styles[b].strokeOpacity}]}else d&&(a=[{duration:"redraw"==o.phase?l._duration:0,d:function(t,e){return o.helpers.position[b].end.call(this,t)}}]);return{mark:"point",selector:".inner",data:y?[]:h.pathData,properties:{attrs:{class:function(t,e){return"inner scatter-inner"}}},config:{enter:e,update:n},anime:{update:a,exit:r}}})),Tm("scatter.morph",(function(){var t=this.builderC,e=this.chart,n=new _P({sampling:e.systemConf.chart.plot.morph.samplingDistance}),a=e.oldSeriesInfo.get(t.datasetIndex),r={seriesIdx:a.seriesIndex,color:a.color,transform:a.transformationInfo},o=_v(e,r.seriesIdx),i=t._getXYvalue,l=t.markerOptions,s=l.symbol,c=(l.size,np(s)),u=this.oldRenderer.getSymbolSize,d={},h=N();return this.helpers.filterData(this.data.data[0]).map((function(t,a){var l=i(t),s=i(t,"y"),h=e.oldSeriesInfo.get(r.seriesIdx).pathData[a],f=h.getAttribute("d");h.setAttribute("d",c(u(t)));var p=h.cloneNode();h.setAttribute("d",f),d[a]=n.interpolate({path:h,xOffset:-l+o.x+r.transform[a].x,yOffset:-s+o.y+r.transform[a].y},{path:p,xOffset:0,yOffset:0})})),this.helpers.position.scatter_morphing={interpolator:d,line_d3:h},d}));var XE=function(){var t=this.KEY="scatter",e=this,n=this.chart,a=this.builderC,r=a.markerOptions,o=a.animationOptions,i=a.axisrotated,s=r.imageUrl,c=o.type,u=n.racing&&n.racing.syncTransition,d=fa(n,"axes.y.groups[0].prerenderComp.orient")===Kr;this.helpers.position[t]={};var h=this.builderC,f=h.getInitialX,p=h.getInitialY,g=h._getXYvalue,v=this.oldRenderer.getSymbolSize;return this.helpers.position[t].start=function(t,e){var a=c==Yc&&this.previousElementSibling?this.previousElementSibling.__data__:t.data;return u?lu([g(a),i&&d?-n.plotarea.top:chartObj.plotarea.height+20]):lu([f(a),p(a)])+" ".concat(s&&c===Ic?" scale(0)":"")},this.helpers.position[t].end=function(n,a){var r=n.data,o=g(r),i=g(r,"y"),l=e.helpers.positionComponent[t].transform(r,n.index,{x:o,y:i});return lu([l.x,l.y],l.angle)},this.helpers.position[t].stop_1=function(t,e){var n=t.data,a=l(this).attr("transform"),r=v(n),o=l(this).attr("size");if(a)return"".concat(a," scale(").concat(o/r,")")},this.helpers.position[t].exit=function(a,r){var o=a.data;if(u){var l=g(o);return lu(i&&d?[l,-n.plotarea.top]:[l,n.plotarea.height+20])}return e.helpers.position[t].start(a,r)},{}},ZE=function(){var t="scatter",e=(this.chart,this.data,this.seriesdataAfterUpdate),n=this.builderC,a=qE.call(this),r=Is(this.chart,this.builderC.datasetIndex,this.paneid,null,this.conf.params),o=n.markerOptions.position;this.oldRenderer.fillColorFunc=a,this.helpers.styleComponent[t]={fillComponent:a,strokeComponent:r},this.helpers.positionComponent[t]={transform:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:x,y:y,angle:angle};return n}},this.helpers.styles[t]={visibility:function(t,n){if(!o)return pn;var a=0===n?oo:n===e[t.subseriesIdx||0].length-1?lo:io;return o.indexOf(a)>-1?pn:"hidden"}}};function qE(){return this.oldRenderer.fillColorFunc=Ls(this.chart,this.scatterDatasetIndex,this.paneid,null,!this.commonOption.scatterOrBubble||null,null,null,this.conf.params)}var $E=function(){var t="inner",e=this;this.helpers.position[t]={};var n=this.oldRenderer.getSymbolSize,a=this.conf.params,r=a.shapescale,o=a.dataset,i=this.builderC,s=i.markerOptions,c=s.imageUrl,u=s.symbol,d=i.animationOptions.type;this.helpers.position[t].start=function(a,i){var s=r?r(a.data[o.shapeidx]):u,h=e.helpers.positionComponent[t].shape.call(this,a,a.index,s),f=l(this.parentNode).attr("size"),p=n(a.data),g=c?p:f;return g=null!=f?g:d!=Ic&&d!==Rc||c?p:0,{shape:h,size:[g=e.helpers.positionComponent[t].size.call(this,a,a.index,g/2),null,null,t]}},this.helpers.position[t].end=function(a,i){var l=r?r(a.data[o.shapeidx]):u,s=e.helpers.positionComponent[t].shape.call(this,a,a.index,l),c=n(a.data);return{shape:s,size:[c=e.helpers.positionComponent[t].size.call(this,a,a.index,c/2),null,null,t]}},this.helpers.position[t].exit=this.helpers.position[t].start},QE=function(){var t="inner",e=this.chart,n=this.builderC,a=this.conf.params,r=a.shapescale,o=a.dataset,i=n.color,l=n.markerOptions,s=n.animationOptions,c=l.size,u=l.symbol,d=this.oldRenderer.getSymbolSize,h=this.commonOption.scatterOrBubble,f=this.helpers.styleComponent.scatter.fillComponent,p=this.helpers.styleComponent.scatter.strokeComponent,g=Bi.isQuantileColorScale(e),v=s.type,m=np(u);this.helpers.styleComponent[t]={_symbolPath:function(t){return r?np(r(t.data[o.shapeidx])):m}},this.helpers.positionComponent[t]={shape:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return n},size:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;return n}},this.helpers.styles[t]={initialFillOpacity:v==Dc?0:l.innerFillOpacity,fillOpacity:wa(l.innerFillOpacity,1),initialStrokeOpacity:v==Dc?0:l.innerStrokeOpacity,strokeOpacity:l.innerStrokeOpacity,strokeWidth:l.innerStrokeWidth,fill:function(n,a){var r=d(n.data)/4;return f(n.index,n.data,null,$n(l["".concat(t,"FillColor")],i,l,e),null,h?[r,r]:null)},stroke:function(n,a){var r=p(n.index,n.data,null);return p(n.index,n.data,$n(l["".concat(t,"StrokeColor")],r,l,e))},strokeDasharray:Gr(l["".concat(t,"DashStyle")],l["".concat(t,"StrokeWidth")]),strokeLinecap:Xr(l["".concat(t,"LineCap")],l["".concat(t,"DashStyle")]),visibility:g&&!1===l.enabled?"hidden":pn}},KE=function(){var t="outer",e=this;this.helpers.position[t]={};var n=this.oldRenderer.getSymbolSize,a=this.conf.params,r=a.shapescale,o=a.dataset,i=this.builderC,s=i.markerOptions,c=s.imageUrl,u=s.symbol,d=i.animationOptions.type;this.helpers.position[t].start=function(a,i){var s=r?r(a.data[o.shapeidx]):u,h=e.helpers.positionComponent[t].shape.call(this,a,a.index,s),f=n(a.data),p=l(this.parentNode).attr("size"),g=c?f:p;return g=null!=p?g:d!=Ic&&d!==Rc||c?f:0,{shape:h,size:g=e.helpers.positionComponent[t].size.call(this,a,a.index,g)}},this.helpers.position[t].end=function(a,i){var l=r?r(a.data[o.shapeidx]):u,s=e.helpers.positionComponent[t].shape.call(this,a,a.index,l),c=n(a.data);return{shape:s,size:c=e.helpers.positionComponent[t].size.call(this,a,a.index,c)}},this.helpers.position[t].exit=this.helpers.position[t].start},JE=function(){var t="outer",e=this.chart,n=this.builderC,a=this.conf.params,r=a.shapescale,o=a.dataset,i=n.color,l=e.defsLocation,s=n.markerOptions,c=n.animationOptions,u=s.imageUrl,d=s.size,h=s.symbol,f=this.oldRenderer.getSymbolSize,p=this.commonOption.scatterOrBubble,g={name:u},v=this.helpers.styleComponent.scatter.fillComponent,m=this.helpers.styleComponent.scatter.strokeComponent,y=Bi.isQuantileColorScale(e),b=c.type,x=np(h);this.helpers.styleComponent[t]={_symbolPath:function(t){return r?np(r(t.data[o.shapeidx])):x}},this.helpers.positionComponent[t]={shape:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return n},size:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return n}},this.helpers.styles[t]={initialFillOpacity:b==Dc?0:s.outerFillOpacity,fillOpacity:wa(s.outerFillOpacity,1),initialStrokeOpacity:b==Dc?0:s.outerStrokeOpacity,strokeOpacity:s.outerStrokeOpacity,strokeWidth:s.outerStrokeWidth,fill:function(n,a){var r=f(n.data),o=r/2;return u?(g.width=g.height=parseFloat(r),g.x=g.y=-parseFloat(r)/2,"url(".concat(l,"#").concat(Hr.get(Hr.svg_patterns,"imageFill",g,{chartObj:e}),")")):v(n.index,n.data,null,$n(s["".concat(t,"FillColor")],i,s,e),null,p?[o,o]:null)},stroke:function(n,a){var r=m(n.index,n.data,null);return m(n.index,n.data,$n(s["".concat(t,"StrokeColor")],r,s,e))},strokeDasharray:Gr(s["".concat(t,"DashStyle")],s["".concat(t,"StrokeWidth")]),strokeLinecap:Xr(s["".concat(t,"LineCap")],s["".concat(t,"DashStyle")]),visibility:y&&!1===s.enabled?"hidden":pn}};function tL(){ZE.call(this),XE.call(this),JE.call(this),KE.call(this),QE.call(this),$E.call(this),this.chart.systemConf.chart.plot.morph.enabled&&this.chart.oldSeriesInfo&&Pm("scatter.morph").call(this)}var eL=function(){return{scatter:{operator:Pm("scatter.default")},bubble:{operator:Pm("scatter.default")},"line-marker":{operator:Pm("scatter.default")},"area-marker":{operator:Pm("scatter.default")},"arearange-marker":{operator:Pm("scatter.default")},geoscatter:{operator:Pm("scatter.default")},geobubble:{operator:Pm("scatter.default")}}},nL=function(){var t=this,e=this.chart,n=e.dataObject,a=e.dataset,r={column:function(t,n){var r=a.getColumnIdx(t,n);return e.systemConf.metadata.columns[r]},datatype:function(t,e){return a.getDataType(t,e)},filterData:function(a){var r=a.subseriesIdx||0,o=t.builderC.liveUpdate;if(t.seriesdataAfterUpdate[r]&&!o)return t.seriesdataAfterUpdate[r];if(o)return PP(a,t.placeHolder,t,e),pi.helpers.getDynamicData(a,t.chart);var i,l=t.scales.x,s=t.scales.y,c=t.commonOption.yaxiscolumnorder,u=pi.helpers,d=e.dataset.getDataType("x"),h=e.dataset.getDataType("y",c),f=d==To?l.domain():null,p=h==To?s.domain():null;(d!=To||null==l.domain||na(n.hierarchical))&&n.getCategories("x");return i=d==To||h==To?n.updateSeriesdatabyCategories(Yn(a),f,p,c):a,e.renderVisiblePointsOnly&&(i=u.filterPointsInViewport(e,i,"scatter","xy",t.builderC.datasetIndex)),t.seriesdataAfterUpdate[r]=i,t.oldRenderer.seriesdataAfterUpdate[r]=i,t.builderC.xcategoriesReversed=f,t.builderC.xaxisreversed&&(i=i.slice(0).reverse(),t.builderC.xcategoriesReversed=f?f.slice(0).reverse():f),t.seriesdataAfterUpdate[r]},position:{},styles:{},positionComponent:{},styleComponent:{}};return r};function aL(){var t=this.chart,e=this.builderC,n=e.yaxiscolumnorder,a=e.rendererIndex,r=e.paneid,o=this.conf.params,i=o.dataset,l=o.commonPlotOptions,s=this.data.plotoptions,c=this.builderC,u=this.legendOrder,d=this.oldRenderer,h=this.data,f=c._getXYvalue,p=o.color,g=pi.helpers,v=g.isCatNull(i,"x"),m=g.isCatNull(i,"y",n),y=Ui(t,r,a),b=y.value,x=y.name,C=this.commonOption,k=C.isBubbleChart,w=C.scatterOrBubble,_=C.multiColoring,S=t.dataObject.isPolarAxisCategory,O=this.builderC.markerOptions=o.markerOptions=s&&s.marker?Rn(l.marker,s.marker,!0):l.marker,A=(this.builderC.hoverOptions=o.hoverOptions=s&&s.hoveroptions?Rn(l.hoveroptions,s.hoveroptions,!0):l.hoveroptions,O.symbol),T=O.size,P=O.imageUrl;w?T=Jn(T,1):(Xn(T)&&(T=(s?Dn.getValueOfPlotOptions(s,l)("strokeWidth"):l.strokeWidth)||2),P||(T*=S?.56:.7),p=h.color);var E=O.outersize=10*T,L=Jn(Dn.getValueOfPlotOptions(s,l)("strokeWidth"),2);if(t.dataObject.markerSize[x]){var M="line"==A||"vertical-line"==A?L||1:E;t.dataObject.markerSize[x].add(M)}function D(t){return(!S||t&&!t.isDummy)&&(S||b===Gt.stkdarea||!v(i.getX(t))&&!m(i.getY(t,n)))?k?f(t,"z"):E:0}d.getSymbolSize=D,d.getSymbolBBox=function(t){var e=D(t);return e>0&&("line"==A||"vertical-line"==A)?"line"==A?{width:e,height:L||1}:"vertical-line"==A?{height:L||1,width:e}:void 0:null},d.getSegments=function(t){var e=D(t);if("line"==A||"vertical-line"==A){var n=t._data(),a=ip(A,e,n._x,n._y);return"line"==A||"vertical-line"==A?[a]:a}},d.pathData=function(e,a){return(!S||e&&!e.isDummy)&&(S||b===Gt.stkdarea||e&&!e.isDummy&&!v(i.getX(e))&&!m(i.getY(e,n)))&&(S||b!=Gt.stkdarea||e&&!e.isDummy)?[{color:_?t.seriesColor[a%t.seriesColor.length]:p,index:_?a:u,data:e}]:[]}}var rL=function(){function t(e){_classCallCheck(this,t);var n=e.data,a=e.config,r=e.rendererIndex,o=e.legendOrder,i=e.paneid,l=e.chart,s=e.builderC,c=e.scatterDatasetIndex,u=e.phase,d=e.type;this.data=n,this.config=a,this.paneid=i,this.rendererIndex=r,this.scatterDatasetIndex=c,this.conf=l.rendererConf[r],this.legendOrder=o,this.builderC=s,this.chart=l,this.type=d,this.phase=u,this.oldRenderer=e.oldRenderer,this.markOperator=e.operator,this.setMarkMapping()}return _createClass(t,[{key:"initialize",value:function(t){this.container=t,this.commonOption=function(t,e,n,a){n=wa(n,e);var r,o=t.params,i=o.stacked,l=o.chartObj,s=o.xscale,c=o.yscale,u=o.hasNegValue,d=l.dataObject,h=o.commonPlotOptions,f=l.renderer[e].datasetIndex?l.renderer[e].datasetIndex():0,p=Ui(l,a,n),g=p.name,v=p.value,m=_e.bubble.has(v),y=kl(v),b=y&&Ns(h,l),x=(null!=u&&null!=s(u)?s(Ge(u,s.domain()[0])):s.origRange[0])+(null!=s.bandwidth?s.bandwidth()/2:0);if(i){var C=d.allChartTypes,k=d.getStackGroup().filter((function(t){return t.some((function(t){return!l.seriesdata[t].disabled&&kl(C[t])}))}));r=d.categoryHierarchy?0:$d(k,e)}else r=0;var w={stacked:i,categories:o.xscale.domain(),axisrotated:o.axisrotated,bandwidth1:o.xscale,bandwidth2:l.barscale2,datasetIndex:f,padding:x,yscale:c,hasNegValue:o.hasNegValue,yaxiscolumnorder:o.yaxiscolumnorder,addRangeBand:function(){return c.bandwidth?c.bandwidth()/2:0},charttype:g,isBubbleChart:m,scatterOrBubble:y,multiColoring:b,stackGroupIndex:r};return l.renderer[e].commonOption=w,w}(this.conf,this.rendererIndex,this.legendOrder,this.paneid),GE.call(this),aL.call(this),this.seriesdataAfterUpdate=new Array(0),this.oldRenderer.seriesdataAfterUpdate=new Array(0),this.scales={x:this.commonOption.bandwidth1,interX:this.commonOption.bandwidth2,y:this.commonOption.yscale},this.helpers=nL.call(this),this.collectEncode()}},{key:"collectEncode",value:function(){tL.call(this)}},{key:"getAllowedMarkOperator",value:function(){return["scatter"]}},{key:"setMarkMapping",value:function(t){this.markMapping=(t||eL).call(this)}},{key:"getDefaultMarkParser",value:function(){var t=this.getAllowedMarkOperator(),e=this.markMapping,n=this.markOperator;this._mark=Jk.call(this,this.data,e,t,n)}},{key:"render",value:function(t){var e,n=this,a=this.builderC,r=a.dynamicSeriesPosition,o=a.datasetIndex,i=a.renderingOrder,l=a.stacked,s=a.stackIndex,c=a.yrangePos,u=wa(r,o),d={data:this.data,index:i,stackIndex:s};if(l){var h=this.container.node().querySelector("g.scatterseries_".concat(r-1));e=h?"g.".concat(h.className.baseVal," + *"):null}this.placeHolder=wc("g",".scatterseries_".concat(u),[d],t,e),"arearange"===this.type&&(this.placeHolder=dc(this.placeHolder,"g",[d],".","class","rangePos_".concat(c))),this._mark.map((function(t){Kf(t.mark,t.holder||n.placeHolder)}))}},{key:"destroy",value:function(){this.container=this.placeHolder=this._mark=null}}]),t}(),oL=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"initialize",value:function(t){_get(_getPrototypeOf(e.prototype),"initialize",this).call(this,t)}},{key:"getAllowedMarkOperator",value:function(){return["bubble"]}}]),e}(rL),iL=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"initialize",value:function(t){_get(_getPrototypeOf(e.prototype),"initialize",this).call(this,t)}},{key:"getAllowedMarkOperator",value:function(){return["".concat(this.type,"-marker")]}}]),e}(rL),lL=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"initialize",value:function(t){_get(_getPrototypeOf(e.prototype),"initialize",this).call(this,t)}},{key:"getAllowedMarkOperator",value:function(){return["".concat(this.type,"-marker")]}}]),e}(rL),sL=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"initialize",value:function(t){_get(_getPrototypeOf(e.prototype),"initialize",this).call(this,t)}},{key:"getAllowedMarkOperator",value:function(){return["geoscatter"]}}]),e}(rL),cL=function(t){function e(){return _classCallCheck(this,e),_callSuper(this,e,arguments)}return _inherits(e,t),_createClass(e,[{key:"initialize",value:function(t){_get(_getPrototypeOf(e.prototype),"initialize",this).call(this,t)}},{key:"getAllowedMarkOperator",value:function(){return["geobubble"]}}]),e}(rL);Pe.scatter=function(){var t,e,n,a,r,o,i,s,c,u,d=!1;function h(o){return o.each((function(o){var f=i.params,p=f.legendOrderIndex,g=f.rendererIndex;t=f.chartObj,e=f.datasetIndex,a=f.commonPlotOptions,n=f.labelQueue;var v,m,y=l(this);h.update=function(){y.transition().call(h)},t.viewFlow&&t.viewFlow.marks._default.chart.length&&(m=(v=o[e]).data);var b=m||o[e],x=b.plotoptions,C=t.dataSplicer.getPlotConfig(v||b,e),k=f.gvp=Dn.getValueOfPlotOptions(C,a),w=Ao(t)?"".concat(b.row,"_").concat(b.column):"0_0",_=Ui(t,w,e).name;c=e;var S=function(t,e){switch(e){case"bubble":return new oL(t);case"line":return new iL(t);case"area":case"arearange":return new lL(t);case"geoscatter":return new sL(t);case"geobubble":return new cL(t);default:return new rL(t)}}({type:_,chart:t,oldRenderer:h,data:m||o[e],operator:v?v.operator:null,paneid:w,legendOrder:p,rendererIndex:g,scatterDatasetIndex:c,config:{common:a,series:C,merged:k},builderC:f,phase:d?"redraw":"draw"},_);i.parser=u=S,S.initialize(y),S.getDefaultMarkParser(),S.render(y);var O=S.builderC,A=O.animationOptions,T=O.markerOptions,P=T.outersize,E=S.commonOption.isBubbleChart,L=S.commonOption.scatterOrBubble;if(r=A.duration,L&&(h.highlighter=E?new bk(t,h):new rv(t,h)),null!=Me){var M;if(L||E)M=P+T.outerStrokeWidth;else{var D=Jn(Dn.getValueOfPlotOptions(x,a)("strokeWidth"),2);M=(T.size||D)*P*.5+D/2}n.push({renderer:h,charttype:"scatter",chartObj:t,rendererIndex:g,paneid:w,args:[b,e,M,s]})}var I=i.params.chartObj;I.timerObj[I.timerObj.length]=h.renderedTimer=setTimeout((function(){d=!0,h.chartRendered=!0}),r),y=null})),h}return h.getHighlighter=function(t,e){if(!h.highlighter){var n=_e.bubble.has(Ui(t,null,e).value);h.highlighter=n?new bk(t,h):new rv(t,h)}return h.highlighter},h.commonRendererProp=function(t){return arguments.length?(i=t,h):i},h.shiftInfo=function(t){return arguments.length?(o=t,h):o},h.yrangePos=function(t){return arguments.length?(s=t,h):s},h.destroy=function(t){u&&u.destroy()},h},Tr.bubble=function(){return{outerPadding:.02,multiColoring:!1,marker:{innerFillOpacity:0,innerStrokeWidth:0,innerStrokeOpacity:0,outerFillOpacity:.4,outerStrokeOpacity:1},hoveroptions:{innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeOpacity:1,innerStrokeWidth:0,outerFillOpacity:.3,outerStrokeOpacity:.5},datalabels:{showAs:"y"},animation:{type:"sizing"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[1.5,0]},radial:{radius:90,colorGamma:[1.5,0]}}}}},Tr.sunburst=function(){return{strokeColor:"white",innerRadius:30,outerPadding:20,animation:{type:"fan"},datalabels:{showAs:"y",type:"circular",padding:10,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"splitpercent",parentLabel:{}}},colorScheme:"tints"}};var uL=wn.getComponent("annotation");function dL(t,e){this.chart=t,this.renderer=e}Pe.sunburst=function(){var t,e,n,a,r,o,i,s,c,u,d,h,f,g,v,y,b,x,C,k,w,_,S,O,A,T,P,E=!1,L={};function M(_){return _.each((function(P){var D=t.params;h=D.chartObj,y=D.commonPlotOptions,D.color,f=D.notesArray,c=D.yaxiscolumnorder,o=D.dataset,h.systemConf;var W=D.labelQueue,V=D.bound,Y=D.rendererIndex,X=y.colorScheme||"tints";u=V.width,d=V.height;var Z,$=Ao(h)?"".concat(P[0].row,"_").concat(P[0].column):null,Q=Dn.getValueOfPlotOptions,K=y.datalabels,J=+y.outerPadding||0,tt="absolute"===y.showAsNegative,et=function(t){return H(P,t)||b(t)===x(t)||!t.value?dn:pn};w=null,O=0,T=[];var nt=h.datalabels.moduleExists&&Ud(K,h)&&Dd(K,h)?Id(K,h)+Rd(K,h):0;S=y.events&&y.events.highlightHierarchy;var at=fp(y,null,h,Di),rt=at.enabled,ot=at.type,it=at.easingType,lt=E?rt?200:0:at.duration;r=Xe(u,d)/2-J-2*nt;var st=Xe(Ge(0,Xa(y.innerRadius,r)),Xa("95%",r)),ct=[],ut=[];b=function(t){return Ge(0,Xe(2*on,e(t.x0)))},x=function(t){return Ge(0,Xe(2*on,e(t.x1)))},C=function(t){return n(t.y0)+Z/2},k=function(t,e){return e=e||0,function(t){return n(t.y1)+e-Z/2}},A=function(t){if(H(P,t))return 0;var e=o.getY(t,c)||0;return e<0?tt?Ze(e):0:e},a=U().startAngle(b).endAngle(x).innerRadius(C).outerRadius(k(n)),i=U().startAngle(b).endAngle(x).innerRadius(C).outerRadius(k(n)),(v=dc(_,"g",[P],".","class","hierarchychart")).attr("transform","translate(".concat(u/2,",").concat(d/2,")")),s=[],v.selectAll(mr).each((function(t){s.push({x0:t.x0,x1:t.x1})}));var dt=function(t){var e=q(),n=G(t,N).sum(A).sort(B);return e(n),n.descendants()}(P);M.total=dt[0].value,yp(g=dc(v,mr,dt));var ht=[],ft=[],pt=[];P.forEach((function(t,e){ct[e]=M.fillColorFunc=Ls(h,e,$,[r,r]),ut[e]=Is(h,e,$),ft[e]=[[]],ft[e].disabled=t.disabled,ft[e].plotoptions=t.plotoptions,pt[e]=[],pt[e].disabled=t.disabled,pt[e].plotoptions=t.plotoptions;var n=Bs(h,e,$);ht[e]=m().domain([0,VE(t)]).range([n,Es(n,"solid"==X?0:"shades"==X?-1.5:1.5,"brighter")])}));var gt=function(t){return t.depth&&pt[j(t)].plotoptions},vt=function(t){return Jn(bl(gt(t),y,h,"enabled"),!0)};g.attr("class",(function(t){return null!=F(t)?"zc_sunburst series_".concat(j(t)):"zc_sunburst"})).attr("id",(function(t){return"arcPath_".concat(F(t))})).each((function(t,e){t.index=e;var n=j(t),a=F(t);if(O=Ge(O,t.depth),t.data._seriesIndex=n,t.data.paneid=$,t.depth){if(t.data.color)t.data.arcColor=t.data.color;else{var r=P[n].plotoptions,o=null!=r?Q(r,y)("childrenColors"):y.childrenColors;if(t.children||null==o){var i=ht[n](L[a]);t.data.arcColor=i}else t.data.arcColor=o[L[a]%o.length]}t.children||ft[n][0].push(t),pt[n].push(t),T[a]=t}else t.data.arcColor=hn})),e=m().range([0,2*on]),n=m().range([st,r]).domain([dt[0].y1,1]),Z=Xe(Ge(0,Xa(y.padding,r,0)),.9*(r-st)/O),g.style("display",(function(t){var e=l(this).style("display"),n=et(t);return!E||e===dn&&n===dn?n:pn})).transition().duration(lt).ease(E?p:it).attrTween("d",E||"fan"===ot?I:"wheel"===ot?z:R).on("end",(function(){l(this).style("display",et)})),g.styles({fill:function(t){var e=j(t);return t.fillColor=ct[e||0](e,t.data)},stroke:function(t){var e=j(t);return t.depth?y.strokeColor?y.strokeColor:ut[e||0](e,t.data):"white"},"stroke-opacity":function(t){return t.depth?Q(P[j(t)].plotoptions,y)("strokeOpacity"):1},"fill-opacity":function(t){return t.depth?Q(P[j(t)].plotoptions,y)("fillOpacity"):0},"stroke-width":function(t){return t.depth?Q(P[j(t)].plotoptions,y)("strokeWidth"):0},cursor:function(t){var e=gt(t);return vt(t)?bl(e,y,h,"cursor")||fn:pn},"pointer-events":function(t){return t.depth&&vt(t)?null:"none"}}),Xk(g,h,"sunburst"),$k(g,h,"sunburst"),Dl(h,g,(function(t){return!vt(t)}),$),h.cache.search||(h.cache.search={});var mt=function(t,e){var n=_t(t,e);h.eventHandler.handlers.mousemove.call(h.eventHandler,n),iE(t,n),h.cache.search.lastPane=$},yt=function(t,e){var n=_t(t,e);h.eventHandler.handlers.mouseout.call(h.eventHandler,n),iE(t,n),h.cache.search.lastPane=null},bt=function(t,e){var n=_t(t,e);h.eventHandler.handlers.click.call(h.eventHandler,n),iE(t,n),h.cache.search.lastPane=$},xt=function(t,e){if(M.chartRendered){var n=null==t.children?uL._empty?t:Wm(t,P.length>1?t.parent.data.seriesname:null):[t.data.seriesname,t.value],a=i.centroid(t);a=[a[0]+u/2,a[1]+d/2];var r=_t(t,e);r.coordinate=a,r.basedOn="plot",r.data=n,h.eventHandler.handlers.doubleclick.call(h.eventHandler,r,j(t),t),iE(t,r),h.cache.search.lastPane=$}},Ct={target:"plot",touchleave:!0,chartObj:h},kt={mousemove:mt,mouseout:yt,click:bt,dblclick:xt},wt={singletouchmove:mt,touchend:yt,tap:bt,dbltap:xt};function _t(t,e){var n=xl(jt()),a=F(t);return{renderer:M,seriesIndex:j(t),paneid:$,rendererIndex:Y,coordinates:[n.pageX,n.pageY],element:this,data:t.data,level:a,selected:t.selected,_key:"ZC_".concat(h.id,"_").concat(a)}}Iu(g.filter((function(t){return t.depth&&vt(t)})),kt,wt,Ct),h.timerObj[h.timerObj.length]=M.renderedTimer=setTimeout((function(){if(null!=Me){var t=U().startAngle(b).endAngle(x).innerRadius(k(n)).outerRadius(k(n)),e=y.datalabels.padding+nt,a=U().startAngle(b).endAngle(x).innerRadius(k(n,e)).outerRadius(k(n,e));P.forEach((function(e,n){var o=h.renderer[Ao(h)?Y+n:0],l=Ao(h)?Y+n:n,s=Ao(h)?"".concat(e.row,"_").concat(e.column):n,c=function(e,o){return[ft,n,e,r,function(t,e){return e===Ad?M.total:M.getProcessedNode(t).parent.value},a,t,i,[u/2,d/2],o]};W.push({renderer:o,chartObj:h,charttype:Ai,rendererIndex:l,paneid:s,args:c(pt[n])}),W.push({renderer:o,chartObj:h,charttype:"pieInnerLabels",rendererIndex:l,paneid:s,args:c(ft[n][0])}),W.push({renderer:o,chartObj:h,charttype:"pieInnerLabels",rendererIndex:l,paneid:s,args:c(pt[n].filter((function(t){return t.children})),!0)})}))}uL._empty||P.forEach((function(t,e){f=uL.preprocessAnnotations(P,e,(function(t,e,n){var a=M.getProcessedNode(t),r=i.centroid(a);return[r[0]+u/2,r[1]+d/2]}),f,h,D)})),E=!0,M.chartRendered=!0}),lt+1e3/60)})),M}function D(){if(!w){var t=h.staticPaneSVG.selectAll("g#zchierarchyhighlight");t.empty()||((w=t).attr("transform","translate(".concat(h.plotarea.left+u/2,",").concat(h.plotarea.top+d/2,")")),_=dc(w,mr,tt(S?O:1)))}}function I(t,e){var n=Q(E&&s[e]?b(s[e]):0,b(t)),r=Q(E&&s[e]?x(s[e]):0,x(t));return function(e){return a.startAngle(n(e)).endAngle(r(e)),a(t)}}function R(t){var e=Q(0,C(t)),r=Q(0,k(n)(t));return function(n){return a.innerRadius(e(n)).outerRadius(r(n)),a(t)}}function z(t){var e=Q(b(t),x(t));return function(n){return a.endAngle(e(n)),a(t)}}function j(t){var e=F(t);if(e)return+e.split("_")[0]}function F(t){return t.level||t.data&&t.data.level}function H(t,e){var n=j(e);return na(n)&&t[n].disabled}function N(t){var e=F(t),n=e&&e.split("_").length;return L[e]=1===n?P=0:P,!h.dataObject.hasHierarchyData&&1==n&&t.length<2&&t[0]&&ua(t[0][0])?t[0]:ua(t[0])?t:(P++,null)}return M.commonRendererProp=function(e){return arguments.length?(t=e,M):t},M.defaultMouseOverFunc=function(e,n,a,r){D();var o=h.legendHighlight.getLegendHighlightEffect(n,"selectedSeries","plot",r),i=function(t){var e=[],n="".concat(mr,"#arcPath");if(S){t.split("_").forEach((function(t){n="".concat(n,"_").concat(t),e.push(n)}))}else e.push("".concat(n,"_").concat(t));return e}(F(e));if(o!==dn){w.style("opacity",null);var s=[t.params.bound.x,t.params.bound.y],c=v.selectAll(i.join()).nodes();_.each((function(t,e){var a=l(this);if(c[e]){var i=l(c[e]),u=Fs(h,n,i.datum(),n,r);a.attr("d",i.attr("d")).styles(h.legendHighlight.getEffect(o,Di,je.test(o)?u:hn,{fill:hn,stroke:u},n,"plot")),a.attr("transform","translate(".concat(s[0],",").concat(s[1],")"))}else a.attr("d",null)}))}},M.defaultMouseOutFunc=function(t,e){D(),w.style("opacity",0)},M.getProcessedNode=function(t){return T[F(t)]},M},Ta(dL,pP);var hL=dL.prototype;function fL(t,e,n){return t?e.renderer[Yv(t,e)]:n}function pL(t,e){var n=t.getProcessedNode(e),a=t.layout;return nC.getTileBound(a,n)}hL.renderingContext=function(){return Jg.get("nonaxis").call(this,this.chart)},hL.translateContext=function(t){var e=this.chart,n=fL(t,e,this.renderer),a=n.layout.dimension,r=n.commonRendererProp().bound(),o=e.plotarea;return[o.left+a.x+r.x,o.top+a.y+r.y]},hL.data=function(t){var e=this.chart,n=fL(t,e,this.renderer),a=n.layout,r=a.dimension,o=n.commonRendererProp().bound();return function(){e.cache.data[t._key]||(e.cache.data[t._key]={});var i=e.cache.data[t._key],l=n.getProcessedNode(t),s=nC.getTileBound(a,l);return i._x=t._x=i._x||s.x+r.x+o.x+s.width/2,i._y=t._y=i._y||s.y+r.y+o.y+s.height/2,i._width=t._width=i._width||s.width,i._height=t._height=i._height||s.height,t._centric=!0,i._size=t._size=2*dl({x:t._x,y:t._y},{x:t._x-s.width/2,y:t._y-s.height/2}),i._uid=t._uid=e.dataset.getX(t),i._visible=t._visible=Fl(e,t),i._point=t,t}},hL.options=function(t){var e=this.chart,n=fL(t,e,this.renderer),a=n.layout,r=n.commonRendererProp().params,o=a.dimension,i=t.seriesIndex,l=pL(n,t),s=Ia(r.commonPlotOptions.borderRadius),c=Ns(r.commonPlotOptions,e),u=Fs(e,c?t.itemIndex:i,t,i);return"canvas"===e.plot.renderer.mode&&(s=gc(s,l.width,l.height,!0)),{radius:s,color:u,strokeColor:hn,fillColor:Ls(e,i,null,[o.width,o.height],null,"svg")(i,t,null,null,null,[l.width,l.height])}},hL.path=function(t,e){var n=e.context.call(this),a=e.translate.call(this,t),r=fL(t,this.chart,this.renderer),o=r.commonRendererProp().params,i=pL(r,t),l=pc(i.x,i.y,i.width,i.height,Ia(o.commonPlotOptions.borderRadius));n.style("display","").style("opacity",null);var s=wc("g",".treemap-highlight".concat(t.paneid).concat(t.seriesIndex).concat(t.subSeriesIndex),[t],n);return s.attr("transform","translate(".concat(a[0],",").concat(a[1],")")),wc("path",".treemap-highlight",[t],s).attr("d",l)};var gL=function(t,e){var n=this;n.data=e;var a=n.rp=t.params,r=a.bound;n.chartObj=a.chartObj,n.commonRendererProp=t,n.dimension=Sb.getAvailableBound(r,a.commonPlotOptions),n.createScale(),n.layout=n.getLayout(),n.processData()};function vL(t,e){var n=t.data,a=t.chartObj,r=nC.getSeriesIndex(e)||0;return Ao(a)?n[r].node:a.seriesdata[r]}gL.prototype.createScale=function(){var t=this.dimension,e=m().domain([0,t.width]).range([0,t.width]),n=m().domain([0,t.height]).range([0,t.height]);this.xScale=e,this.yScale=n},gL.prototype.getLayout=function(){var t=this.dimension,e=this.rp.commonPlotOptions,n=e.parent,a=Da(e.padding),r=e.mode;return $().size([t.width,t.height]).tile(v(r)).round(!0).paddingInner((function(t){return t.value&&(t.children[0]&&t.children[0].children?n:e).interPadding||0})).paddingTop((function(t){return t.depth&&t.value?a.top:0})).paddingBottom((function(t){return t.depth&&t.value?a.bottom:0})).paddingLeft((function(t){return t.depth&&t.value?a.left:0})).paddingRight((function(t){return t.depth&&t.value?a.right:0}))},gL.prototype.getValue=function(t){var e=this,n=e.chartObj,a=e.rp,r=vL(e,t),o=pi.helpers.getParsedYAxisOrder(r.yaxiscolumnorder),i=n.dataset.getY(t,o)||0,l="absolute"===a.commonPlotOptions.negativeAs;return nC.isDisabled(r,t)?0:i<0?l?Ze(i):0:i},gL.prototype.getChildren=function(t){var e=nC.getLevel(t),n=e&&e.split("_").length;return!this.chartObj.dataObject.hasHierarchyData&&1==n&&t.length<2&&t[0]&&ua(t[0][0])?t[0]:ua(t[0])?t:pn},gL.prototype.processData=function(){var t=this,e=t.data,n=t.chartObj,a=t.commonRendererProp,r=t.dimension,o=t.rp,i=o.commonPlotOptions,l=o.color,s=o.rendererIndex,c=void 0===s?0:s,u=i.colorScheme||"solid",d=0,h={},f=[],p=[],g=[],v=[],y=[],b=[],x=[],C=G(e,(function(e){return t.getChildren(e)})).sum((function(e){return t.getValue(e)})),k=t.layout(C).descendants(),w="".concat(e[0].row,"_").concat(e[0].column);e.forEach((function(t,e){var a=n.rendererConf[c+e],o=Fs(n,e,null,e,w);b[e]=Ls(n,e,w,[r.width,r.height],null,null,null,a.params),x[e]=Is(n,e,w,null,a.params),p[e]=0,g[e]=[],g[e].disabled=t.disabled,g[e].plotoptions=t.plotoptions,f[e]=m().domain([0,VE(t)]).range([o,Es(o,"solid"===u?0:"shades"===u?-1:1,"brighter",T)])})),k.forEach((function(e,r){var o=nC.getLevel(e),s=nC.getSeriesIndex(e),c=nC.getItemIndex(e),u=vL(t,e);if(e.index=r,e.data.paneid=w,e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var m=Ns(i,n)?l[c%l.length]:f[s](p[s]);e.data.arcColor=m}y[o]=e}e.children?e.data.arcColor=nC.getParentColor(a,e,w):(v[s]||(v[s]=[]),v[s].push(e),p[s]++),e.depth&&g[s].push(e),nC.isDisabled(u,e)||(h[o]=d++)})),n.renderer[0].fillColorFunc=b[0],t.processedData=k,t.previousSiblingsCount=h,t.seriesWiseNodes=g,t.leafNodes=v,t.nodes=y,t.fillColor=b,t.strokeColor=x};var mL=wn.getComponent("annotation");Jp.treemap=function(){var t,e,n=nC.getLevel,a=nC.getSeriesIndex,r=nC.getItemIndex;function o(n,i,l,s,c,u){var d=t.params,h=d.chartObj,f=d.commonPlotOptions,p=d.notesArray,g=d.labelQueue,v=d.rendererIndex;o.layout=e=O?e:new gL(t,Ao(h)||h.isAxisedHierarchyChart?i:h.seriesdata);var m=Bi.isQuantileColorScale(h),y=Ns(f,h),b=Ia(f.borderRadius),x=f.parent,C=e.dimension,k=e.leafNodes,w=e.seriesWiseNodes,_=e.processedData,S=e.fillColor,O="highlight-canvas"===n.canvas.className;if(n.save(),n.translate(C.x,C.y),o.total=_[0].value,O){var A=u;_=_.filter((function(t){return a(t)===A&&!(m&&t.children)})),m&&(_=us.filterSelectionByColor(_,!0,s,h))}if(_.forEach((function(t,o){var i,s=a(t),c=r(t),u=nC.getTileBound(e,t),d=u.x,p=u.y,g=u.width,v=u.height,m=(t.children?x.strokeColor:pn)||f.strokeColor;t.depth?O&&Xn(l)&&h.legendHighlight.getLegendHighlightEffect(A,"selectedSeries",t.data.paneid)!==dn?i="black":m?i=m:t.children&&(i=t.data.arcColor):i=hn;var C,k=function(e,n){e.save(),e.translate(d+g/2,p+v/2),e.beginPath(),e.lineWidth=(t.children?x.strokeWidth:pn)||f.strokeWidth,e.strokeStyle=Ps(i,(t.children?x.strokeOpacity:pn)||f.strokeOpacity),e.fillStyle=n,Cp.roundedRect(e,-g/2,-v/2,g,v,b),e.fill(),e.stroke(),e.closePath(),e.restore()};h.imagePallete&&Rs(h.dataset.getClr(t),h)&&t.depth?Hr.canvas_patterns.imageFill({x:d,y:p,context:n,name:Fs(h,y?c:s,t,s)},k):(C=na(l)?l:t.children?Ps(t.data.arcColor,x.fillOpacity):S[s](s,t.data,pn,pn,f.fillOpacity,[g,v]),k(n,C))})),n.restore(),Me){var T=[C.x,C.y],P=function(t,e){return e===Ad?o.total:o.getProcessedNode(t).parent.value};i.forEach((function(t,e){var n=Ao(h)?v+e:e,a=Ao(h)?"".concat(t.row,"_").concat(t.column):e;g.push({renderer:o,charttype:"hierarchy",chartObj:h,rendererIndex:n,paneid:a,args:[w[e],e,pn,pn,P,k[e],T]}),g.push({renderer:o,charttype:"hierarchy",chartObj:h,rendererIndex:n,paneid:a,args:[w[e],e,pn,pn,P,[w[e][0]],T,!0]})}))}return mL._empty||O||h.seriesdata.forEach((function(t,n){p=mL.preprocessAnnotations(h.seriesdata,n,(function(t,n,a){var r=o.getProcessedNode(t),i=nC.getTileBound(e,r);return[i.x+C.x,i.y+C.y]}),p,h,d)})),o.chartRendered=!0,o}return o.commonRendererProp=function(e){return arguments.length?(t=e,o):t},o.getProcessedNode=function(t){return e.nodes[n(t)]},o.getHighlighter=function(t,e){return o.highlighter=new dL(t,o)},o},Tr.treemap=function(){return{outerPadding:5,strokeColor:"rgba(255,255,255,0.7)",animation:{type:"fadeOneByOne"},axis:{enabled:!1},datalabels:{showAs:"y",vAlign:"bottom",hAlign:"left"},gradients:{options:{linear:{y2:100,x2:100,colorGamma:[.5,0]},radial:{radius:100}}},parent:{strokeOpacity:0,datalabels:{position:"inset",vAlign:"center",hAlign:"center",showAs:"y",show:!1},events:{}}}};var yL=wn.getComponent("annotation");function bL(t,e){return e?xL(t,e):t.y+t.y0}function xL(t,e){var n=t.index,a=e.filter((function(t,e){return t[0]==n}))[0];if(!a||!a.length)return 0;var r=a[1],o=a[2];return aa(r)?o:o+Ze(r)}function CL(t,e,n,a){var r=n.renderer,o=n.axisrotated,i=n.seriesindex;if(a){if(o&&"width"==e)return 0;var l=xL(t,a);return o&&"x"==e||!o&&"y"==e?r.commonOption.yscale(l):r.getParamValue(e,t,i,null,r.commonOption)}return r.getParamValue(e,t,i,null,r.commonOption)}Pe.treemap=function(){var t,e,n,a,r,o,i,s,c,u=!1,d=nC.getLevel,h=nC.getSeriesIndex;function f(g){return g.each((function(v){var m=t.params;a=m.chartObj,r=m.commonPlotOptions;var y=m.notesArray,b=a.systemConf,x=m.labelQueue,C=m.rendererIndex;f.layout=o=new gL(t,v),i=o.dimension,o.nodes,s=o.leafNodes,c=o.seriesWiseNodes;var k=r.strokeWidth,w=r.strokeOpacity,_=r.fillOpacity,S=o.fillColor,O=o.strokeColor,A=Ia(r.borderRadius),T=[i.x,i.y],P=fp(r,pn,a,"treemap"),E=P.enabled,L=P.type,M=u?p:P.easingType,D=u?E?200:0:P.duration,I=a.dataObject.totalnoofdatas,R=u?D:L===Lc?D/I:D,z=u?0:L===Lc?function(t){return o.previousSiblingsCount[d(t)]*(D/I)}:L===Mc?function(){return rn()*I*(D/I)}:0,j=L===Ec||L===Mc||L===Lc?0:pn,F=r.events?r.events.cursor||fn:b.chart.plot.events.cursor||fn,B=r.parent,H=B.events.cursor;(e=dc(g,"g",[v],".","class","hierarchychart")).attr("transform","translate(".concat(i.x,",").concat(i.y,")")).styles({"stroke-width":k,"stroke-opacity":w,"fill-opacity":_,cursor:F});var N=o.processedData;f.total=N[0].value,n=dc(e,mr,N),f.total||n.remove(),n.styles({fill:function(t){if(t.children)return t.fillColor=t.data.arcColor;var e=nC.getTileBound(o,t),n=h(t);return t.fillColor=S[n](n,t.data,pn,pn,pn,[e.width,e.height])},stroke:function(t){var e=(t.children?B.strokeColor:pn)||r.strokeColor,n=h(t);return t.depth?e||(t.children?t.data.arcColor:O[n](n,t.data)):hn},visibility:function(t){return t.value?pn:"hidden"}}).attr("class",(function(t){return na(d(t))?"zc_treemap series_".concat(h(t)).concat(t.children?" zchierarchyparent":""):"zc_treemap"})).attr("id",(function(t){return"tree_".concat(d(t))})),e.selectAll("".concat(mr,".zchierarchyparent")).styles({"stroke-width":B.strokeWidth,"stroke-opacity":B.strokeOpacity,"fill-opacity":B.fillOpacity,cursor:H}),u||n.attr("transform",(function(t){var e=nC.getTileBound(o,t),n=e.x+e.width/2,a=e.y+e.height/2;return L===zc?(n=i.width/2,a=i.height/2):L===Nc?n=e.width/2:L===Fc&&(a=e.height/2),"translate(".concat(n,",").concat(a,")")})).attr("d",(function(t){var e=nC.getTileBound(o,t),n=-e.width/2,a=-e.height/2,r=e.width,i=e.height;return L===Nc?r=0:L===Fc&&(i=0),pc(n,a,r,i,A)})).style("opacity",j),Xk(n,a,"treemap"),$k(n,a,"treemap"),n.transition().duration(R).delay(z).ease(M).attr("transform",(function(t){var e=nC.getTileBound(o,t);return"translate(".concat(e.x+e.width/2,",").concat(e.y+e.height/2,")")})).attr("d",(function(t){var e=nC.getTileBound(o,t);return pc(-e.width/2,-e.height/2,e.width,e.height,A)})).style("opacity",Ao(a)?function(){return l(this).attr("filtered-opacity")||1}:pn),a.timerObj[a.timerObj.length]=f.renderedTimer=setTimeout((function(){if(Me){var t=function(t,e){return e===Ad?f.total:f.getProcessedNode(t).parent.value};v.forEach((function(e,n){var r=a.renderer[Ao(a)||a.isAxisedHierarchyChart?C+n:0],o=Ao(a)?C+n:n,i=Ao(a)?"".concat(e.row,"_").concat(e.column):n;x.push({renderer:r,charttype:"hierarchy",chartObj:a,rendererIndex:o,paneid:i,args:[c[n],n,pn,pn,t,s[n],T]}),x.push({renderer:r,charttype:"hierarchy",chartObj:a,rendererIndex:o,paneid:i,args:[c[n],n,pn,pn,t,[c[n][0]],T,!0]})}))}yL._empty||v.forEach((function(t,e){y=yL.preprocessAnnotations(v,e,(function(t,e,n){var a=f.getProcessedNode(t),r=nC.getTileBound(o,a);return[r.x+i.x,r.y+i.y]}),y,a,m)})),u=!0,f.chartRendered=!0}),D+17+(z?4*I:0))})),f}return f.commonRendererProp=function(e){return arguments.length?(t=e,f):t},f.getProcessedNode=function(t){return o.nodes[d(t)]},f.getHighlighter=function(t,e){return f.highlighter=new dL(t,f)},f.destroy=function(){n=e=null},f},Ee.getWaterfallCategoriesConfig=function(t,e){return{cascaded:t&&t.cascadeCategories?Rn(e.cascadeCategories,t.cascadeCategories,!0):e.cascadeCategories,rising:t&&t.risingCategories?Rn(e.risingCategories,t.risingCategories,!0):e.risingCategories,falling:t&&t.fallingCategories?Rn(e.fallingCategories,t.fallingCategories,!0):e.fallingCategories}},Bi.getWaterfallColor=function(t,e,n){return t.isCascaded?e.cascaded.color||n:t.isPositive?e.rising.color||n:e.falling.color||n},Pe.waterfallHelpers=function(){},Pe.waterfallHelpers.drawComparisonLine=function(t,e,n){var a=n.chart,r=function(t,e){var n=e.chart,a=e.renderer,r=n.dataset,o=e.seriesindex,i=e.yaxiscolumnorder,l=e.stacked,s=n.dataObject.waterfall.layout._keys,c=(pi.helpers.isCatNull(r,"y",i),t.length,e.axisrotated?a.getParamValue("height",t[0],o,null,a.commonOption):a.getParamValue("width",t[0],o,null,a.commonOption)),u=(Xe(c/10,1),e.chart.dataObject.stackedChart?e.chart.dataObject.waterfall.stackExtent[0]:null),d=(function(t){t.filter((function(t,e){return t.isCascaded}))}(t),0),h=[];return t.map((function(n,r){var i=t[r];if(i.isCascaded&&t[r+1]){var c=function(t,e,n){var a=t[e],r=n.chart.dataObject.stackedChart?n.chart.dataObject.waterfall.stackExtent[0]:null,o=0,i=a;if(!a)return;for(;!a.isCascaded;){var l=bL(a,r);if(l>o&&(i=a,o=l),!(a=t[++e]))return}return{point:a,maxPt:i}}(t,r+1,e);if(c){var f=c.maxPt,p=(CL(i,"x",e,u),CL(f,"x",e,u)),g=CL(f,"y",e,u),v=CL(i,"x",e,u),m=CL(i,"y",e,u),y=CL(i,"width",e,u),b=CL(i,"height",e,u),x=0==i.index||i.index==t.length-1,C=c.point,k=function(t,e,n,a,r){var o,i,l,s,c=r.axisrotated,u=r.chart.dataObject.stacked,d=r.chart.dataObject.waterfall.datalabelPadding,h=30,f=Ge(n.x,u?e.x:e.x+e.width),p=Xe(n.y,e.y),g=t.unshared?t.width/2:t.width/2+t.width/4,v=e.unshared?e.width/2:e.width/4,m=t.unshared?t.height/2:t.height/4,y=e.unshared?e.height/2:e.height/2+e.height/4;c?(o=[t.x+t.width+d,t.y+m],i=[f+d+h,t.y+m],l=[f+d+h,e.y+y],s=[e.x+e.width+d,e.y+y]):(o=[t.x+g,t.y-d],i=[t.x+g,p-d-h],l=[e.x+v,p-d-h],s=[e.x+v,e.y-d]);return[o,i,l,s]}({x:v,y:m,width:y,height:b,unshared:x},{x:CL(C,"x",e,u),y:CL(C,"y",e,u),width:CL(C,"width",e,u),height:CL(C,"height",e,u),unshared:0==C.index||C.index==t.length-1},{x:p,y:g},0,e);if(l){var w=s[i.index],_=s[C.index];k.y=(_.stackedValue-w.stackedValue)/Ge(w.stackedValue,_.stackedValue)*100}else k.y=(C.y-i.y)/i.y*100;if(C.percent=k.y,0==d&&0!=r){a.getParamValue("y",t[0],o,null,a.commonOption);i.percent=(i.y-t[0].y)/i.y*100}h.push(k)}d++}})),h}(e,n),o=n.plotoptions,i=n.commonPlotOptions,s=fp(i,o,a,"waterfall"),c=s.enabled,u=o&&o.comparisonLine?Rn(i.comparisonLine,o.comparisonLine,!0):i.comparisonLine;n.animationOptions=s;var d=N().x((function(t,e){return t[0]})).y((function(t,e){return t[1]})),h=dc(t,"g",u.enabled?[1]:[],".","class","zccomparisonLines");dc(h,"path",r,".","class","lines",null,(function(t){return t.y})).attr("d",(function(t,e){return d(t)})).styles({fill:"none",stroke:u.strokeColor||"black","stroke-width":u.strokeWidth||1,"stroke-dasharray":Gr(u.dashStyle,u.strokeWidth||1),"stroke-opacity":0}).transition().duration(c?s.duration:0).styles({"stroke-opacity":u.strokeOpacity||1}),function(t,e,n,a,r){var o=r.chart,i=r.animationOptions.enabled,s=r.axisrotated,c=r.renderer,u=r.seriesindex,d=s?c.getParamValue("height",e[0],u,null,c.commonOption):c.getParamValue("width",e[0],u,null,c.commonOption),h=Xe(d/10,1),f=function(t){return t.map((function(e,n){return t[n][3]}))}(n),p={inner:0,outer:1},g=s?"triangle-left":"triangle-down",v=dc(t,"g",a.enabled?[1]:[],".","class","zcmarkerPointers");dc(v,"g",f,".","class","markers",null,(function(t,e){return n[e]&&n[e].y})).each((function(t,e){var n=l(this);n.attrs({transform:function(t){return"translate(".concat(t[0],",").concat(t[1],")")}}).style("opacity",0).transition().duration(i?r.animationOptions.duration:0).style("opacity",1),ap(n,null,{size:h,symbol:g,outerFillOpacity:a.strokeOpacity,outerStrokeOpacity:a.strokeOpacity,outerStrokeWidth:0},{symbolSize:p,color:a.strokeColor||"black"},o)}))}(t,e,r,u,n),function(t,e,n,a){var r=a.chart,o=r.systemConf,i=a.axisrotated,l=a.animationOptions.enabled,s=10,c=n.label||{},u=c.labelPos,d=Dn.getVal(Kn([c,o.chart,o.canvas,wr],"fontSize")),h="fixedTop"==u?i?r.plotarea.width:d:null,f={format:{decimalPlaces:"2",signEnabled:!0,suffix:"%"}},p=dc(t,"g",n.enabled?[1]:[],".","class","zccomparisonLabels");dc(p,"text",e,".","class","labels",null,(function(t){return t.y})).attrs({x:function(t,e){return i?h||t[1][0]+s:t[0][0]+(t[2][0]-t[0][0])/2},y:function(t,e){return i?t[1][1]+(t[2][1]-t[1][1])/2:h||t[1][1]-10}}).text((function(t,e){return Wo(f,t.y,Eo,r)})).styles({"text-anchor":i?"fixedTop"==u?"end":"start":"middle",opacity:0}).transition().duration(l?a.animationOptions.duration:0).styles({opacity:1}),vc(p,[c,o.chart,o.canvas,wr])}(t,r,u,n)};Pe.waterfallHelpers.drawComparisonLine;var kL=function t(e){Aa(t.prototype,qT.prototype);var n=this._base=0;this._stack=!1,this._extent=[n,n],this._data=[],this._rows={},this._keys={},this._sum=n,e&&this.add.apply(this,arguments)},wL=kL.prototype;wL.add=function(t,e,n,a,r){var o=this,i=o._stack,l=o._keys,s=o._rows,c=o._extent,u=o._base,d=o._sum,h=u,f=u,p=l[e];l[e]=p={},p.runningTotal=[pn,pn],p.absoluteTotal=[u,u],t.forEach((function(t,o){n(t);var p=a(t)||u,g=r(t),v=+(p>=u),m=i?e:o,y=i?o:e,b=l[e].runningTotal,x=l[e].absoluteTotal;g&&(v=+((p=p||s[y]||h)>=u),h=d=u,s[y]=u,a(t,p)),i&&(h=b[v]||d||u,b[v]=h+p,x[v]+=p,s[y]=(s[y]||u)+p,f+=p),t.y0=h,t.y=p,t.index=m,t.isPositive=v,t.isCascaded=g,h+=p,c=j([].concat(_toConsumableArray(c),[h,u]))})),o._extent=c,o._data=o._data.concat(t),o._sum=p.runningTotal[+(f>u)]},wL.stack=function(t){this._stack=t},pi.prototype.processDataForWaterFall=function(){var t,e=this,n=e.dataset,a=e.data,r=e.chartObj,o=r.dataObject,i=e.processedseriesData,l=i.length,s=o.getCategories("x"),c=s.length,u=e.isstacked("waterfall"),d=Jn(a.chart.plot.plotoptions.waterfall.cascadeCategories.dataindex,2),h=[];e.waterfall={};var f=function(t){return n.getActualX(t)},p=function(e,a){return a&&(e[n.yidx(t)]=a),n.getY(e,t)},g=function(t){return t[d]},v=new kL;if(u){v.stack(!0);for(var m=[],y=0;y<c;y++){for(var b=s[y],x=(a=[],0);x<l;x++){var C=i[x],k=C.disabled,w=C.data,_=w.length;if(t=pi.helpers.getParsedYAxisOrder(C.yaxiscolumnorder),!k)for(var S=0;S<_;S++){var O=w[S];if(n.getActualX(O[y])==b)O[y].dummy||a.push(O[y]);else{var T=[];T[n.xidx]=b,T.dummy=!0,O.splice(y,0,T)}}}var P=v._sum||0;if(a.length){v.add(a,y,f,p,g);var E=v._keys[y];E.index=y,E.stackedValue=A(E.absoluteTotal),E.isPositive=+(E.stackedValue>0),E.isCascaded=g(a[0]),E.y=E.absoluteTotal[E.isPositive],E.y0=E.isCascaded?0:P;for(x=E.absoluteTotal.length-1;x>=0;x--)E.absoluteTotal[x]&&m.push([y,E.absoluteTotal[x],E.runningTotal[x]])}h=v._extent}e.waterfall.stackExtent=[],Oa(e.getEncode("stack"),(function(t,n){e.waterfall.stackExtent[n]=m,t.layout.getAllExtents=function(){return m}}))}else i.forEach((function(e,a){var r=e.data;t=pi.helpers.getParsedYAxisOrder(e.yaxiscolumnorder),r.forEach((function(t,e){s.forEach((function(e,a){var r=e,o=t[a];if((o?n.getActualX(o).toString():null)!==r.toString()){var i=[];return i[n.xidx]=r,i.dummy=!0,void t.splice(a,0,i)}})),v.add(t,a,f,p,g),h=v._extent}))}));return r.dataObject.waterfall.layout=v,j(h)},pi.prototype.getCorrectionForWaterfall=function(t,e,n,a,r){var o=function(t,e){var n=t.dataObject.getEncode("y",e).seriesData,a=t.systemConf.chart.plot.plotoptions.waterfall;return n.some((function(t){var e=t.plotoptions;return(e&&e.comparisonLine?Rn(a.comparisonLine,e.comparisonLine,!0):a.comparisonLine).enabled}))}(a,n);r=!a.datalabels.hasFixedPosition&&r;var i=a.systemConf.chart.plot.datalabels.handleOverlapping,l=a.datalabels.isStackedLabels||a.datalabels.hasFixedPosition||!i,s=r?l?10:0:10;a.dataObject.waterfall.datalabelPadding=r?a.cache.correction["label-y-0"][1]+s:s;var c,u=(t=function(t){t[1]<0&&(t[1]=0);return t}(t))[1]-t[0],d=a.axes.y.orient,h=a.plotarea["left"==d?"height":"width"],f=5,p=u/(h-f)*f;if(o){var g=function(t,e){var n=t.systemConf.chart.plot.plotoptions.waterfall,a=t.axes.rotated,r=t.systemConf,o=0,i=dc(t.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText");return t.seriesdata.forEach((function(t,e){if(t.plotoptions||!o){var l=t.plotoptions,s=(l&&l.comparisonLine?Rn(n.comparisonLine,l.comparisonLine,!0):n.comparisonLine).label;i.text("800%").style("fill","none"),vc(i,[s,r.chart,r.canvas,wr]);var c=Bn(i.node());o=Ge(a?c.width:c.height,o)}})),i.remove(),o+10}(a);c=u/(h-(f+=g+30+s))*f}return t[1]+=o?c:p,t[0]-=a.dataObject.waterfall.hasNegativeCascaded?p:0,t};pi.prototype.processDataForWaterFall;function _L(t,e,n,a,r,o,i){return"x"==a?o?r||n.isCascaded?n.isPositive?t+e:t:n.isPositive?t:t+e:r?t+e:t:o?r?t:t+e:r||n.isCascaded?n.isPositive?t:t+e:n.isPositive?t+e:t}function SL(t){return t.y}Tr.waterfall=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},connector:{},comparisonLine:{},cascadeCategories:{dataindex:2},risingCategories:{},fallingCategories:{},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},Pe.waterfallHelpers.drawConnectorLines=function(t,e,n,a){var r=n.chart,o=r.dataset,i=n.axisrotated,l=n.stacked,s=(n.xscale,n.yscale,n.yaxiscolumnorder),c=n.renderer,u=n.seriesindex,d=l?r.dataObject.waterfall.layout._keys:e,h=(r.systemConf.chart.axes.yaxis[s||0].reversed,r.systemConf.chart.axes.xaxis.reversed),f=n.plotoptions,p=n.commonPlotOptions,g=f&&f.connector?Rn(p.connector,f.connector,!0):p.connector,v=g.enabled?function(t,e){for(var n=e.chart.dataset,a=e.yaxiscolumnorder,r=(e.stacked,pi.helpers.isCatNull(n,"y",a)),o=SL,i=Object.keys(t),l=i.length-1,s=[],c=0;c<l;c++){var u=t[i[c]],d=t[i[c+1]],h=o(u,a),f=o(d,a),p=r(h),g=r(f);if(p)s.push([]);else if(g){for(var v=c+2,m=t[v],y=m&&o(m,a),b=!r(y);v<l&&!b;)b=!r(y=(m=t[++v])&&o(m,a));b&&s.push([u,m])}else s.push([u,d])}return s}(d,n):[],m=N().x((function(t,e){return _L(c.getParamValue("x",t,u,null,c.commonOption),c.getParamValue("width",t,u,null,c.commonOption),t,"x",h?1==e:0==e,i)})).y((function(t,e){return _L(c.getParamValue("y",t,u,null,c.commonOption),c.getParamValue("height",t,u,null,c.commonOption),t,"y",0==e,i)}));dc(t,"path",v,".","class","zcconnectorLine",null,(function(t){return o.getX(t)})).attr("d",(function(t,e){return m(t)})).styles({fill:"none",stroke:g.strokeColor||"black","stroke-width":g.strokeWidth||1,"stroke-dasharray":Gr(g.dashStyle,g.strokeWidth||1),"stroke-opacity":0}).transition().duration(1e3).styles({"stroke-opacity":g.strokeOpacity||1})};Pe.waterfallHelpers.drawConnectorLines;function OL(t,e,n,a){var r=a.dataset.getDataType(t,e),o=n.ranges,i=n.sizes,l=Sb.getAvailableBound(a.plotarea,n),s={};return i?(s.userRanges={size:i,plotBound:l,callbackArgs:[a,l]},s):(s.baseSize={config:n,size:["2%","20%"],plotBound:l,callbackArgs:[a,l]},o||r===To?s.mapDiscreteDomainToRange={ranges:o}:s.mapContinuousDomainToRange={},s)}function AL(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=n.dataset,o=r.getDataType(t,e),i=r.getColumn(t,e),l={type:o,dataType:o,scaleType:o===To?"_ordinal":o,field:i,reverse:a.reversed,clamp:!0,data:[],domain:{operators:nd("size.domainParser")(t,e,a,n),evaluator:nd("size.evalDomain")},range:{operators:OL(t,e,a,n),evaluator:nd("size.evalRange")}};return l}ed("wordcloud.font.parser",AL);var TL=!0,PL=!1,EL=Ar.CHROME||Ar.FIREFOX?32e3:Ar.IE&&Ar.isTouchDevice?4e3:8e3,LL=function(){return document.createElement("canvas")},ML=function(t){return t.getContext("2d")},DL=function(t){return t.nodeName===vr},IL=function(t,e){var n,a,r,o,i,l,s,c,u,d,h,f=e.width,p=e.height,g=e.textOverflow,v=(e.textOverlap,e.mask),y=e.invert||PL,b=e.fontScale,x=na(e.maxWidth)?Xa(e.maxWidth,f):pn,C=e.fontFamily,w=e.fontStyle,_=e.fontWeight,S=e.fontSize,O=e.content,A=e.rotation,T=e.container,E=e.maxSizeFactor,L=[],M=Xe(8,Ge(4,Ve(16*Xe(f,p)/1024))),D=[],I=[],R=[0,0],z=e.preCalculation||{},j=z.singleNode,F=void 0===j||j,B=z.timeOut,H=void 0===B?0:B,N=z.adjust,W=F?function(t){return t()}:function(t){return setTimeout(t,H)},V=F?dc(T,gr,[1],".","class","dummyText"):dc(T,gr,t,".","class","dummyWord").attr("id",(function(t,e){return"dummyWord_"+e})),Y=function(t){return F?V:T.selectAll("text#dummyWord_"+t)},U=Ue(f/M),G=Ue(p/M),X=Xe(1,U/G),Z=Xe(1,G/U),q=(q=e.origin)?[q[0]/M,q[1]/M]:[U/2,G/2],$=Ye($e(U*U+G*G)),Q=t.length<100?8:1,K=function(t){var e=LL();e.setAttribute("width",t.width),e.setAttribute("height",t.height),t.context=ML(e)},J=function(t){var e=t.constructor===Object?t.canvasIndex:t;return d[e].context},tt=function(t,e){c[e]=J(e).getImageData(0,0,t.width,t.height).data},et=function(t){return e.strokeWidth(t)+e.padding(t)},nt=function(t){return{fontStyle:w(t),fontWeight:_(t),fontSize:S(t),fontFamily:C(t)}},at=function(t){return"".concat(w(t)," ")+"normal"+" ".concat(_(t)," ").concat(S(t).toString(10)).concat(un," ").concat(C(t))},rt=function(t,e){return S(e)-S(t)},ot=function(t,e,n){t[0]=Xe(t[0],e[0]),t[1]=Xe(t[1],e[1]),t[2]=Ge(t[2],n[0]),t[3]=Ge(t[3],n[1])},it=function(t,n,a,r){var o=t.node(),i=o.childElementCount?t.selectAll("*").filter((function(){return DL(this)&&!this.childElementCount})).nodes():[o],l=Sx(a)%360,s=l>90?180-l:l;t.attr("dy","1em").attr("transform","rotate(".concat(s," 0 0)"));var c,u,d,h,v,m="ellipsis"===g?"..":"",y=m.length,b=Ir(o),x=e.padding(n),C=(na(r)?r:f)-x-(N?M:0),k=p-x,w=b.left,_=b.top,S=b.left+C,O=b.top+k,A=C,T=k,P=function(t){var e=(DL(t)?Dr:Ir)(t,1);return DL(t)&&(d=A-Ge(0,e.left-w)-Ge(0,S-e.right),h=T-Ge(0,e.top-_)-Ge(0,O-e.bottom)),{width:e.width,height:e.height}};i.forEach((function(t){d=C,h=k,(v=P(t)).width-d>1&&(c=(v.width-d)/v.width,u=Ue((1-c)*t.textContent.length),t.textContent=t.textContent.substring(0,u-y)+m,v=P(t)),v.height-h>1&&(c=(v.height-h)/v.height,u=Ue((1-c)*t.textContent.length),t.textContent=t.textContent.substring(0,u-y)+m,v=P(t)),(v.width-d>1||v.height-h>1)&&yc(t,t,t.textContent,v.width,v.height,v,m),t.textContent===m&&(t.textContent="")}))},lt=function(t,e,n){var a=O(t),r=a.value,o=a.type,i=I[e],l=Y(e);l[o](r),vc(l,[nt(t)]),n&&l.style("font-size",n+un),wk.isMultiLine(a)&&ho(l,0),n||"none"===g||(x&&it(l,t,0,x),it(l,t,i)),l.attr("text-anchor",io).attr("dy","".concat(wk.getDy(a),"em")).attr("transform","rotate(".concat(Sx(i)," 0 0)"))},st=function(t,e){var n=S(t),a=O(t),r=et(t),c=a.type,u=I[e],h=[],f=Y(e),p=Bn(f.node()),g=p.width+r,v=p.height+r,m=Ue((g*Ze(Ke(u))+v*Ze(Qe(u)))/M),y=Ue((g*Ze(Qe(u))+v*Ze(Ke(u)))/M),b=y*M,x=m*M;if(h.innerSVG=f[c]().trim(),h.contentType=c,h.format=a.format,"html"===c){var C=go(f,n);Array.prototype.push.apply(h,C)}var k={gw:y,gh:m,width:g,height:v,size:n,rotation:u,nodeList:h,bb:p};return o+b>EL&&(o=0,i+=l,l=0),i+x>EL&&(d[++s]={width:1,height:1},o=i=l=0),k.canvasBound=[o,i,b,x],k.canvasIndex=s,o+=b,l=Ge(l,x),d[s].width=Ge(d[s].width,o),d[s].height=i+l,k},ct=function(t,a){var r=n[a];if(r){var o=J(r),i=r.canvasBound;o.save(),o.translate(i[0]+i[2]/2,i[1]+i[3]/2),o.rotate(r.rotation),e.boundBox?o.fillRect(-r.width/2,-r.height/2,r.width,r.height):function(t,e){var n=e.size,a=at(t),r=e.bb,o=e.nodeList,i=wk.getDy(o),l=0,s=0,c=J(e);c.strokeStyle="#000",c.lineWidth=et(t),c.lineJoin="bevel",c.fillStyle="#000","html"===o.contentType?(c.textAlign=qr,o.forEach((function(e){var u,d=e.style;d.length&&(u=pu(vc(pn,[nt(t)]),d),parseFloat(d["font-size"])),l=e.dx||0,s=(e.dy||0)*n+n*i-(wk.isMultiLine(o)?r.height/2:0),c.font=u||a,c.strokeText(e.text,l,s),c.fillText(e.text,l,s)}))):(s=n*i,c.textAlign=qr,c.font=a,c.strokeText(o.innerSVG,l,s),c.fillText(o.innerSVG,l,s))}(t,r),o.restore()}},ut=function(t,e){return t>=U||e>=G||t<0||e<0},dt=function(){for(var t,e,n,r=U;r--;)for(D[r]=[],t=G;t--;)if(v){D[r][t]=!y,n=M;t:for(;n--;)for(e=M;e--;)if(!a[4*((t*M+n)*U*M+(r*M+e))+3]){D[r][t]=y;break t}}else D[r][t]=TL},ht=function(t){var e=this,n=Ye(t[0]-e.gw/2),a=Ye(t[1]-e.gh/2+R[1]);return function(t,e,n){return!n.some((function(n){var a=t+n[0],r=e+n[1];if(ut(a,r)||!D[a][r])return TL}))}(n,a,e.occupied)?(function(t,e){e.occupied.forEach((function(e){var n=t[0]+e[0],a=t[1]+e[1];ut(n,a)||(D[n][a]=PL)}))}(u=[n,a],e),TL):PL},ft=function(t,e){var a=n[e];if(t.layout=pn,!a)return PL;var r=function(t){for(var e,n,a,r=t.gw,o=t.gh,i=t.canvasBound[0],l=t.canvasBound[1],s=t.canvasIndex,u=d[s].width,h=c[s],f=[],p=[r/2,o/2,r/2,o/2],g=r;g--;)for(e=o;e--;){a=M;t:for(;a--;)for(n=M;n--;)if(h[4*((e*M+a+l)*u+(g*M+n+i))+3]){f.push([g,e]),ot(p,[g,e],[g,e]);break t}}return{occupied:f,bound:p}}(a);if(a.occupied=r.occupied,(s=a.bound=r.bound)[2]-s[0]+1>U||s[3]-s[1]+1>G)return PL;for(var o,i,l,s,f,p=$+1,g=function(){if(o=function(t){if(L[t])return L[t];var e=t*Q,n=e,a=[];for(0===t&&a.push([q[0],q[1]+R[1],0]);n--;){var r=n/e*2*on;a.push([q[0]+t*Qe(-r)*X,q[1]+R[1]+t*Ke(-r)*Z,r])}return L[t]=a}($-p),o.some(ht,a)){i=u[0],l=u[1],s=a.bound;var e=[];return a.occupied.forEach((function(t){t[0]&&t[1]&&e.push([t[0]*M,t[1]*M])})),t.layout={x:(i+a.gw/2)*M,y:(l+a.gh/2)*M,width:a.width,height:a.height,rotation:a.rotation,size:a.size,nodeList:a.nodeList,bb:a.bb,tightBound:{x:s[0]*M,y:s[1]*M,width:(s[2]-s[0]+1)*M,height:(s[3]-s[1]+1)*M},polygon:e},ot(h,[i*M,l*M],[(i+a.gw)*M,(l+a.gh)*M]),{v:TL}}};p--;)if(f=g())return f.v;return PL},pt=function(t,e,n){n&&(t[e]=n.r,t[e+1]=n.g,t[e+2]=n.b,t[e+3]=Ge(1,Ye(255*n.opacity)))},gt=function(){o=i=s=l=0,d=[{width:1,height:1}],c=[],h=[f/2,p/2,f/2,p/2],function(){var n,o=a?r:vl.areaOfEllipse(f/2,p/2),i=0,l=0,s=0,c=0,u=0,d=0,h=b.range(),g=b.domain(),v=h[h.length-1],m={};I=t.map(A);var y=function(t,e){var n=S(t),a="html"===O(t).type?n:10;m[n]=n,lt(t,e,a)},x=function(t,e){var n=S(t),a=et(t),r=n/("html"===O(t).type?n:10),o=I[e],h=Bn(Y(e).node()),g=h.width+a,m=h.height+a,y=g*m,b=g*r*Ze(Qe(o))+m*r*Ze(Ke(o)),x=g*r*Ze(Ke(o))+m*r*Ze(Qe(o));c=Ge(c,b),u=Ge(u,x),s=Ge(s,x-p),l=Ge(l,b-f),i+=y*qe(r,2),d+=y*qe(r,2)/(n/v)};F?t.forEach((function(t,e){y(t,e),x(t,e)})):(t.forEach(y),t.forEach(x)),(l||s)&&i<o?(n=Ge(l?l/f:0,s?s/p:0),n=1-Xe(n,wa(E,.2))):(n=Xe($e(o/i),f/c,p/u,$e(o/d))*(e.boundBox?.5:1),n=Ge(n,wa(E,.4)));var C=nr(m),w=wa(e.size.min,Ge(1===C.length&&C[0]===h[0]?h[0]*n:h[0],3)),_=wa(e.size.max,Ge(h[h.length-1]*n,w+2)),T=k();T.domain(g).range([w,_]),b.range(g.map(T))}(),dt(),F?(n=t.map((function(t,e){return lt(t,e),st(t,e)})),d.forEach(K),t.forEach(ct),d.forEach(tt),t.filter(ft),mt()):(t.forEach((function(t,e){return lt(t,e)})),W((function(){n=t.map(st),W((function(){d.forEach(K),t.forEach(ct),d.forEach(tt),W((function(){t.filter(ft).length<t.length&&N&&W(vt),W(mt)}))}))})))},vt=function(){R[1]=Ge(0,(p-h[3])/M),R[1]&&(h=[f/2,p/2,f/2,p/2],L=[],D=[],dt(),t.filter(ft))},mt=function(){var t=a||na(e.size.min)&&na(e.size.max)?1:function(){if(e.boundBox){var t=Xe(h[0]-0,h[1]-0,f-h[2],p-h[3]);return Xe(f,p)/(Xe(f,p)-t)}var n=m(),a=n.domain([f/2,h[0]])(0),r=n.domain([p/2,h[1]])(0),o=n.domain([f/2,h[2]])(f),i=n.domain([p/2,h[3]])(p);return Xe(a,r,o,i)}();e.onload({mask:xt,scaleFactor:t}),V.remove(),a=pn},yt=function(){t.sort(rt),N&&t.length&&"html"!==O(t[0]).type&&t.sort((function(t,e){return S(t)===S(e)?function(t,e){return O(e).value.length-O(t).value.length}(t,e):1})),W(gt)},bt=function(){var t=wt.getImageData(0,0,Ct,kt),n=e.maskBackground,o=n&&"inherit"!==n&&P(n);a=t.data,r=0;for(var i=0;i<a.length;i+=4)a[i+3]&&(r++,pt(a,i,o));o&&wt.putImageData(t,0,0),yt()};if(v){var xt=LL(),Ct=U*M,kt=G*M;xt.width=Ct,xt.height=kt;var wt=ML(xt),_t=function(t){var e=Xe(Ct,kt),n="rect"===t._name?[Ct,kt]:[e,e],a=t.apply(pn,n);wt.translate(Ct/2,kt/2),wt.scale(Ct/n[0],kt/n[1]),Cp.drawPath(wt,a),wt.fillStyle="#000",wt.fill(),bt()};if("function"==typeof v)_t(v);else{var St=new Image;St.crossOrigin="Anonymous",St.onload=function(){wt.drawImage(St,0,0,Ct,kt),bt()},St.onerror=function(){xt=pn,_t(np())},St.src=v}}else yt()};wn.setComponent("wordcloud.layout",IL);var RL=function(t,e){var n,a,r,o,i,l,s,c,u,d,h,f,p,g,v,m,y,b,x,C=wk.getSeriesIndex,k=function(t){var n=pi.helpers.getParsedYAxisOrder(e[C(t)].yaxiscolumnorder);return a.dataset.getY(t,n)},w="".concat(e[0].row,"_").concat(e[0].column),_=!0,S=[],O=function(){var t,e=r.mask,n=!Ar.IE&&!Ar.PHANTOMJS&&e.htmlEl,a=e.imageUrl,o=e.symbol;return n?t="data:image/svg+xml;".concat(Ar.IE?"base64":"utf8",",").concat(Ar.IE?Ln(unescape(encodeURIComponent(n))):n):a?t=a:o&&((t=np(o))._name=o),t};return n=t.params,a=n.chartObj,r=n.commonPlotOptions,i=Sb.getAvailableBound(n.bound,r),l=0,o=[],c=[],u=[],d=[],h=[],f=[],p=[],y=[],b=[],v=ua(v=r.rotation||[0])?v:[v],m=0,a.showLoading(a.container),e.forEach((function(t,e){var n=t.plotoptions,a=n&&n.gradients?Rn(r.gradients,n.gradients,!0):r.gradients,i=[];_=_&&!qa(["linear","radial"],a.type),t.disabled||t.data.forEach((function(t,n){t.forEach((function(t,a){t.seriesIndex=e,t.subSeriesIndex=n,t.itemIndex=a,t.layout=pn,t.paneid=w,t.level="".concat(e,"_").concat(n,"_").concat(a);var s=k(t);(na(r.nullAs)||na(s))&&(l+=s,p.push(s),o.push(t),i.push(t))}))})),S.push({data:[i]})})),s=function(){var t=_objectSpread(_objectSpread({},r),{},{_data:S}),e=t.ranges,n=t.stops,o=t.minRange,i=t.maxRange,l=t.base,s=t.nullAs,c=AL("y",0,a,t);return new pd("y",0,_objectSpread({ranges:e,stops:n,minRange:o,maxRange:i,base:l,nullAs:s},c),a).getScale()}(),x=function(t,e){return e===Ad?l:s.domain()[1]},e.forEach((function(t,e){var o=Hd(r,t.plotoptions,a,e,w),i=Nd(pn,o,a);d.push(i["font-family"]),h.push(i["font-style"]),f.push(i["font-weight"]),c.push(o),u.push(Kx(a,n,o,zo,x,e,void 0,w)),g=g||Dd(o,a);var l=t.plotoptions&&t.plotoptions.rotation;na(l)&&(y[e]=ua(l)?l:[l],b[e]=0)})),{rp:n,processedData:o,dimension:i,sum:l,fontScale:s,datalabelOptions:c,fontFamily:d,fontStyle:h,fontWeight:f,drawLayout:function(t){var n=this,l=r.mask,p=r.datalabels,x={width:i.width,height:i.height,rotation:function(t){var e,n=C(t);return e=y[n]?y[n][b[n]++%y[n].length]:v[m++%v.length],vl.degreeToRadian(e)},fontSize:function(t){var e=k(t);na(r.nullAs)&&Xn(e)&&(e=ol(e,{config:r,scale:s,columnKey:a.dataset.getColumnIdx("y",0)}));return na(e)?s(e):0},fontFamily:function(t){return d[C(t)]},fontStyle:function(t){return h[C(t)]||"normal"},fontWeight:function(t){return f[C(t)]||"normal"},content:function(t){k(t);var e=u[C(t)];return{type:e.contentType,value:e(t),format:e}},padding:function(t){var e=c[C(t)],n=Jn(r.padding,2),o=0;return Dd(e,a)&&(o=2*Id(e,a)+Rd(e,a)),n+o},strokeWidth:function(t){var n=e[C(t)].plotoptions;return Jn(n&&na(n.strokeWidth)?n.strokeWidth:r.strokeWidth,1)},onload:function(e){a.hideLoading(a.container),a.svg.selectAll("g.zc-wordcloud-dummy").remove(),n.output=e,t()},origin:pn,mask:O(),maskBackground:l.background.color,invert:l.invert,textOverflow:p.textOverflow||"ellipsis",textOverlap:p.textOverlap||"adjust",maxWidth:p.maxWidth,fontScale:s,container:!1===Gn(p,"preCalculation.singleNode",!0)?wc("g",".zc-wordcloud-dummy",[1],a.svg).style("visibility","hidden"):a.getPatternSvg(),size:"auto"===r.size?{}:{min:r.minSize,max:r.maxSize},boundBox:g,maxSizeFactor:r.maxSizeFactor,preCalculation:p.preCalculation};IL(o,x)},hasBoundBox:g,data:e,isScalable:!Ar.PHANTOMJS||"canvas"===a.plot.renderer.mode||_}};function zL(t,e){this.chart=t,this.renderer=e}Ta(zL,pP);var jL=zL.prototype;function FL(t,e,n){return t?e.renderer[Yv(t,e)]:n}jL._defaultH=function(){return[{shape:gr,path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:Kg}]},jL.renderingContext=function(){return Jg.get("nonaxis").call(this,this.chart)},jL.translateContext=function(t){var e=this.chart,n=FL(t,e,this.renderer),a=n.commonRendererProp().bound(),r=n.layout,o=r.dimension,i=wk.getContainerTransformation(r,o),l=i.translate,s=e.plotarea;return[s.left+l[0]+a.x,s.top+l[1]+a.y,i.scale]},jL.data=function(t){var e=this.chart,n=FL(t,e,this.renderer),a=n.layout,r=a.dimension,o=n.commonRendererProp().bound();return function(){e.cache.data[t._key]||(e.cache.data[t._key]={});var n=e.cache.data[t._key];if(n._point=t,!t.layout)return n._visible=t._visible=!1,t;var i=wk.getContainerTransformation(a,r).translate,l=a.output.scaleFactor,s=t.layout,c=s.x,u=s.y,d=s.width,h=s.height,f=s.rotation;return c*=l,u*=l,d*=l,h*=l,n._x=t._x=n._x||c+i[0]+o.x,n._y=t._y=n._y||u+i[1]+o.y,n._width=t._width=n._width||d,n._height=t._height=n._height||h,n._centric=t._centric=n._centric||!0,n._rotation=t._rotation=n._rotation||f,n._size=t._size=2*dl({x:t._x,y:t._y},{x:t._x-d/2,y:t._y-h/2}),n._uid=t._uid=e.dataset.getX(t),n._visible=t._visible=Fl(e,t),t}},jL.options=function(t){var e,n,a=t.seriesIndex,r=t.itemIndex,o=t.paneid,i=this.chart,l=FL(t,i,this.renderer),s=l.commonRendererProp().params,c=Ns(s.commonPlotOptions,i),u=l.layout,d=u.dimension,h=u.output.scaleFactor,f=u.isScalable?1:h,p=Fs(i,c?r:a,t,a,o),g=t.layout,v=wk.isMultiLine(g),m=g.x*f,y=g.y*f,b=d.width,x=d.height;return Ao(i)?(e=Ls(i,a,o,{x1:0,x2:b,y1:0,y2:x,r:Xe(b,x)},pn,"svg"),n=Is(i,a,o)):(e=Ls(i,0,null,{x1:0,x2:b,y1:0,y2:x,r:Xe(b,x)},pn,"svg"),n=Is(i,0)),{x:m,y:y-(v?g.height*f/2:0),dy:wk.getDy(g),rotation:[Sx(g.rotation),m,y],fontSize:g.size*f,font:u.datalabelOptions[a],contentType:g.nodeList.contentType,innerSVG:g.nodeList.innerSVG,color:p,fillColor:e(c?r:a,t),strokeColor:n(c?r:a,t,s.commonPlotOptions.strokeColor)}},jL.path=function(t,e){var n=e.context.call(this),a=e.translate.call(this,t),r=this.options(t),o=r.x,i=r.y,l=r.dy,s=r.rotation,c=r.fontSize,u=r.font,d=r.contentType,h=r.innerSVG,f=t.layout,p=wk.isMultiLine(f),g=this.chart;n.style("display","").style("opacity",null);var v=wc("g",".wordcloud-highlight".concat(t.paneid).concat(t.seriesIndex).concat(t.subSeriesIndex),[t],n);v.attr("transform","translate(".concat(a[0],",").concat(a[1],") scale(").concat(a[2],")"));var m=wc(gr,".wordcloud-highlight",[t],v);return Nd(m,u,g),m[d](h),m.attrs({x:o,y:i,dy:"".concat(l,"em"),transform:"rotate(".concat(s[0]," ").concat(s[1]," ").concat(s[2],")"),"text-anchor":io}).styles({"font-size":c+un,"paint-order":"stroke","stroke-linejoin":"round"}),p&&ho(m,f.x),m};var BL=wn.getComponent("annotation");Jp.wordcloud=function(){var t,e=wk.getSeriesIndex,n=wk.getItemIndex,a=eC;function r(o,i,l,s,c,u){var d,h,f,p,g=t.params,v=g.chartObj,m=g.commonPlotOptions,y=g.notesArray,b=v.renderer[g.rendererIndex||0],x="legendFilter-colorScale"!==v.phase&&!l,C=x?new RL(t,i):b.layout,k=C.dimension,w=k.width,_=k.height,S=C.processedData,O=[],A=[],T=Bi.isQuantileColorScale(v),P=Ns(m,v),E=[],L=[],M=Ao(v)&&"".concat(i[0].row,"_").concat(i[0].column);function D(){var c=wk.getContainerTransformation(C,k),u=C.output.scaleFactor,b=C.isScalable?1:u;o.save(),o.translate(c.translate[0],c.translate[1]),o.scale(c.scale,c.scale),function(t,e,n,a){var r=e.mask.background,o=n.output.mask;a&&o&&r.color&&(t.globalAlpha=Jn(r.opacity,1),t.drawImage(o,0,0),t.globalAlpha=1)}(o,m,C,x),na(p)&&(S=S.filter((function(t){return e(t)===p})),T&&(S=us.filterSelectionByColor(S,!0,s,v))),S.forEach((function(r,s){var c=r.layout;if(c){c.text;var u,p,g=c.x*b,y=c.y*b,x=wk.getDy(c),k=e(r),w=n(r),_=C.datalabelOptions[k],S=(l?i:i[k]).plotoptions||{};E[k]=E[k]||Cp.getFontStyles(v,_),L[k]=L[k]||a.parseTextShadow(_.textShadow);var T=wa(d,S.strokeWidth,m.strokeWidth,1),D=wa(h,S.strokeColor!==Oe?S.strokeColor:m.strokeColor),I=wa(S.strokeOpacity,m.strokeOpacity),R=wa(S.fillOpacity,m.fillOpacity),z=O[k].gradientOptions,j=function(e,n){if(E[k]["font-size"]=c.size*b+un,e.save(),c.rotation&&(e.translate(g,y),e.rotate(c.rotation),e.translate(-g,-y)),!l&&wk.hasBoundBox(r)&&function(t,e,n,a){var r=a.params,o=r.chartObj,i=r.commonPlotOptions,l=e.layout,s=wk.getSeriesIndex(e),c=n.datalabelOptions[s],u=Md(c,o),d=na(u.strokeWidth)?+u.strokeWidth:1,h=Gr(u.dashStyle,d),f=Xr(u.lineCap,u.dashStyle),p=wk.getBoundBoxSize(l,c,i,o,n);Dd(c,o)&&(t.beginPath(),t.lineWidth=d,ua(h)&&h.length&&na(t.setLineDash)&&(t.setLineDash(h),t.lineCap=f),t.strokeStyle=Ps(u.strokeColor||hn,u.strokeOpacity),t.fillStyle=Ps(u.fillColor||"#000",u.fillOpacity),Cp.roundedRect(t,p.x,p.y,p.width,p.height,p.r),t.stroke(),t.fill(),t.closePath())}(e,r,C,t),a.addTextShadow(e,L[k]),e.font=pu(E[k]),e.textAlign=qr,"html"===c.nodeList.contentType)c.nodeList.forEach((function(t){var a,o,i=t.style,l=t.text;i.length&&(a=pu(E[k],i),parseFloat(i["font-size"]),o=i.fill),u=g+(t.dx||0),p=y+(t.dy||0)*c.size*b+c.size*b*x-(wk.isMultiLine(c)?c.height*b/2:0),e.font=a||pu(E[k]),e.strokeStyle=A[k](P?w:k,r,D,pn,m.strokeOpacity),e.lineWidth=T,e.strokeText(l,u,p),e.fillStyle=o||n,e.fillText(l,u,p)}));else{var o=c.nodeList.innerSVG;u=g,p=y+c.size*b*x,e.strokeStyle=A[k](P?w:k,r,D,pn,I),e.lineWidth=T,e.lineJoin="round",e.strokeText(o,u,p),e.fillStyle=n,e.fillText(o,u,p)}e.restore()},F=pn;if("linear"===z.type&&"userSpaceOnUse"!==z.options[z.type].gradientUnits&&(F={x1:g-c.width*b/2,x2:g+c.width*b/2,y1:y-c.height*b/2,y2:y+c.height*b/2}),v.imagePallete&&Rs(v.dataset.getClr(r),v))Hr.canvas_patterns.imageFill({x:g,y:y,context:o,name:Fs(v,P?w:k,r,k,M)},j);else{var B=f||O[k](P?w:k,r,pn,pn,R,F);j(o,B)}}})),o.restore(),BL._empty||l||v.seriesdata.forEach((function(t,e){y=BL.preprocessAnnotations(v.seriesdata,e,(function(t,e,n){var a=t.layout;return[c.translate[0]+(a.x-a.width/2)*u,c.translate[1]+(a.y-a.height*wk.getDy(a))*u]}),y,v,g)})),r.chartRendered=!0}return l&&(p=u,d=l["stroke-width"],h=l.stroke,f=l.fill),r.total=C.sum,r.extentY=C.fontScale.domain(),C.data.forEach((function(t,e){O[e]=r.fillColorFunc=Ls(v,e,M,{x1:0,x2:w,y1:0,y2:_,r:Xe(w,_)}),A[e]=Is(v,e,M)})),x?(C.drawLayout(D),b.layout=C):D(),r.layout=C,C.paneid=Ao(v)?"".concat(i[0].row,"_").concat(i[0].column):0,r}return r.commonRendererProp=function(e){return arguments.length?(t=e,r):t},r.getHighlighter=function(t,e){return r.highlighter=new zL(t,r)},r},Tr.wordcloud=function(){return{base:0,strokeColor:"transparent",size:"auto",animation:{type:"fadeOneByOne"},datalabels:{showAs:"x"},gradients:{options:{linear:{x2:100,y2:100,colorGamma:[0,1.5]},radial:{x:50,y:50,radius:100,colorGamma:[1,0]}}},mask:{background:{}}}};var HL=wn.getComponent("annotation");Pe.wordcloud=function(){var t,e,n=!1,a=wk.getSeriesIndex,r=wk.getItemIndex,o=function(t){return l(this).style("opacity",t.layout?pn:0),t.layout};function i(c){return c.each((function(c){var u,d=t.params,h=d.chartObj,f=d.commonPlotOptions,g=d.notesArray,v="legendFilter-colorScale"!==h.phase,m=fp(f,pn,h,"wordcloud"),y=m.enabled,b=m.type,x=n?p:m.easingType,C=n?y?200:0:m.duration,k=h.dataObject.totalnoofdatas,w=n?C:b===Lc||b===Mc?C/k:C,_=n?0:b===Lc?function(t,e){return e*(C/k)}:b===Mc?function(){return rn()*k*(C/k)}:0,S=b===Ec||b===Mc||b===Lc?0:pn,O=dc(l(this),"g",[c],".","class","wordcloudgroup"),A=Ao(h)&&"".concat(c[0].row,"_").concat(c[0].column);i.layout=e=v?new RL(t,c):e;var T=e.dimension,P=T.width,E=T.height,L=[],M=[],D=Ns(f,h);function I(){!function(t,e,n){var a=e.mask.background,r=n.output.mask,o=n.dimension,i=wc("image",".mask-background",r&&a.color?[1]:[],t,":first-child");r&&i.attrs({width:o.width,height:o.height,"xlink:href":r.toDataURL()}).style("opacity",a.opacity)}(O,f,e),u=e.output.scaleFactor;var p=wk.getContainerTransformation(e,T),v=e.isScalable?1:u;c.forEach((function(t,n){var a=h.seriesdata[n].plotoptions,r=a&&a.gradients?Rn(f.gradients,a.gradients,!0):f.gradients;L[n]=i.fillColorFunc=Ls(h,n,A,{x1:0,x2:P,y1:0,y2:E,r:Xe(P,E),transform:e.isScalable||"radial"!==r.type||"objectBoundingBox"===r.options.radial.gradientUnits?null:"translate(".concat(-p.translate[0],", ").concat(-p.translate[1],")")}),M[n]=Is(h,n)})),O.attrs({transform:"translate(".concat(p.translate,") scale(").concat(p.scale,")"),"text-anchor":io});var m=dc(O,"g",[1],".","class","boundBoxes"),y=dc(O,"g",[1],".","class","words"),k=dc(m,mr,e.hasBoundBox?e.processedData:[]);(k=k.filter(o)).each((function(n){wk.hasBoundBox(n)&&function(t,e,n,a){var r=a.params,o=r.chartObj,i=r.commonPlotOptions,l=e.layout,s=wk.getSeriesIndex(e),c=n.datalabelOptions[s],u=Md(c,o),d=na(u.strokeWidth)?+u.strokeWidth:1,h=Gr(u.dashStyle,d),f=Xr(u.lineCap,u.dashStyle),p=wk.getBoundBoxSize(l,c,i,o,n),g=n.output.scaleFactor,v=n.isScalable?1:g;t.attrs({transform:"rotate(".concat(Sx(l.rotation)," ").concat(l.x*v," ").concat(l.y*v,")"),d:tC(p.x,p.y,p.width,p.height,p.r,0,pn,{})}).styles({visibility:Dd(c,o)?pn:"hidden",fill:u.fillColor,"fill-opacity":u.fillOpacity,stroke:u.strokeColor,"stroke-opacity":u.strokeOpacity,"stroke-width":d,"stroke-dasharray":h,"stroke-linecap":f})}(l(this),n,e,t)}));var I=dc(y,gr,e.processedData);I=I.filter(o),s(O,f),I.each((function(t){var n=l(this),o=a(t),i=r(t),u=t.layout,d=wk.isMultiLine(u),p=c[o].plotoptions,g=p&&p.strokeColor,m=M[o](D?i:o,t,g!==Oe?g:f.strokeColor),y=e.datalabelOptions[o];Nd(n,y,h),n[u.nodeList.contentType](u.nodeList.innerSVG),n.styles({"font-size":u.size*v+un,fill:L[o](D?i:o,t),stroke:m,filter:pn,"stroke-linejoin":"round"}).attrs({x:u.x*v,y:u.y*v-(d?u.height*v/2:0),dy:"".concat(wk.getDy(u),"em"),transform:"rotate(".concat(Sx(u.rotation)," ").concat(u.x*v," ").concat(u.y*v,")"),id:"word_".concat(o,"_").concat(t.subSeriesIndex,"_").concat(i),class:"zc_wordcloud series_".concat(o)}),n.styles(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(Ar.FIREFOX&&n&&e)return t===hn?{stroke:null}:{stroke:null,"text-shadow":Wd(t,e,n)}}(m,wa(p&&p.strokeWidth,f.strokeWidth),y.textShadow)),d&&ho(n,u.x*v),p&&s(n,p)})),Xk(I,h),$k(I,h,"wordcloud"),n||I.style("opacity",S).each((function(t){var e,n,a=t.layout;if(b===Ic)e=T.width/2,n=T.height/2;else if(b===zc){var r=P/u,o=E/u;e=rn()*(r-a.width*v)-T.x+a.width*v/2+(P-r)/2,n=rn()*(o-a.height*v)-T.y+a.height*v/2+(E-o)/2}else e=a.x*v,n=a.y*v;l(this).attrs({x:e,y:n-(wk.isMultiLine(a)?a.height*v/2:0),transform:"rotate(".concat(Sx(a.rotation)," ").concat(e," ").concat(n,")")})})),I.transition().duration(w).delay(_).ease(x).style("opacity",Ao(h)?function(){return l(this).attr("filtered-opacity")||1}:pn).attrs({x:function(t){return t.layout.x*v},y:function(t){var e=t.layout;return e.y*v-(wk.isMultiLine(e)?e.height*v/2:0)},transform:function(t){var e=t.layout;return"rotate(".concat(Sx(e.rotation)," ").concat(e.x*v," ").concat(e.y*v,")")}}),h.timerObj[h.timerObj.length]=i.renderedTimer=setTimeout((function(){e.paneid=Ao(h)?"".concat(c[0].row,"_").concat(c[0].column):0,HL._empty||c.forEach((function(t,e){g=HL.preprocessAnnotations(c,e,(function(t,e,n){var a=t.layout;return[p.translate[0]+(a.x-a.width/2)*u,p.translate[1]+(a.y-a.height*wk.getDy(a))*u]}),g,h,d)})),i.chartRendered=!0,n=!0}),C+1e3/60)}c.forEach((function(t,e){L[e]=i.fillColorFunc=Ls(h,e,A,{x1:0,x2:P,y1:0,y2:E,r:Xe(P,E)}),M[e]=Is(h,e,A)})),i.total=e.sum,i.extentY=e.fontScale.domain(),v?e.drawLayout(I):I()})),i}function s(t,e){t.styles({"paint-order":"stroke","fill-opacity":e.fillOpacity,"stroke-width":e.strokeWidth,"stroke-opacity":e.strokeOpacity})}return i.commonRendererProp=function(e){return arguments.length?(t=e,i):t},i.getHighlighter=function(t,e){return i.highlighter=new zL(t,i)},i};var NL=function(){function t(e,n,a,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:L();_classCallCheck(this,t);var l=[],s=[],c=M(),u=M(),d=[],h=[];e.forEach((function(e){var f=n(e),p=a(e),g=o(e),v=r(e);if(t.isValidPoint(f,p,v,g)){var m={name:"".concat(f),nameOriginal:f,point:e,_type:"node",_format:"x"},y={name:"".concat(p),nameOriginal:p,point:e,_type:"node",_format:"y"},b={_type:"link",source:"".concat(f),target:"".concat(p),value:g,exit:!p,point:e};i.has(f)||i.has(p)?i.has(f)?!i.has(p)&&p&&(l.push(y),u.add(p)):(u.add(f),l.push(m)):(s.push(b),c.add(f),c.add(p),u.add(f),l.push(m),p?(u.add(p),l.push(y)):b.exit=!0),h.push(_objectSpread({},b)),d.push(_objectSpread({},m)),p&&d.push(_objectSpread({},y))}}));var f=j(s,(function(t){return t.value}));l=WL(l,(function(t){return t.name})),d=WL(d,(function(t){return t.name})),l.forEach((function(t){c.has(t.name)||(t.fixedValue=f[0]||1e-4),t._type="node"})),this.extent=f,this.nodeLength=l.length,this.linkLength=s.length,this.graph={nodes:l,links:s},this.completeGraph={nodes:d,links:h}}return _createClass(t,[{key:"getConnectedLinks",value:function(t){return[].concat(_toConsumableArray(t.sourceLinks),_toConsumableArray(t.targetLinks))}},{key:"getConnectedNodes",value:function(t){return[t.source,t.target]}},{key:"getAllConnectedPoints",value:function(t,e){var n,a=this;if("link"===t._type)n=e?[].concat(_toConsumableArray(a.getConnectedNodes(t)),[t]):{nodes:a.getConnectedNodes(t),links:[t]};else if("node"===t._type){var r=t.sourceLinks.map((function(t){return t.target})),o=t.targetLinks.map((function(t){return t.source})),i=a.getConnectedLinks(t),l=er([].concat(_toConsumableArray(o),_toConsumableArray(r),[t]));n=e?[].concat(_toConsumableArray(i),_toConsumableArray(l)):{nodes:l,links:i}}return n}}],[{key:"isValidPoint",value:function(t,e,n,a){return na(a)&&a>0&&na(t)&&na(n)&&t!==e}}]),t}();function WL(t,e){var n,a={},r=[],o=t.length;for(n=0;n<o;n++){var i=e(t[n]);a[i]||(a[i]=!0,r.push(t[n]))}return r}wn.setComponent("sankeyLayout",NL),Tr.sankey=function(){return{datalabels:{showAs:"x",strokeWidth:1.5,strokeColor:"contrast",fontWeight:"bold",padding:5},link:{curve:"bezier",fillOpacity:.5,gradients:{show:!1,options:{linear:{}}},exit:{enabled:!1,color:"red"},strokeWidth:0},node:{width:20,padding:5,strokeWidth:0},animation:{easingType:"cubic",duration:1e3},hoveroptions:{fillOpacity:1},showAsNegative:"absolute"}},Me.sankey=function(){var t,e;function n(n,a){n.each((function(){var n,r=_slicedToArray(e,4),o=r[0],i=r[1],l=r[2],s=_slicedToArray(r[3],2),c=(s[0],s[1]),u=a.paneid,d=t.commonRendererProp().params,h=d.chartObj,f=h.systemConf,p=d.commonPlotOptions,g=(d.dataset,d.yaxiscolumnorder,qd(d,u)),v=(h.chartTypes[0].name,(o=o[i]).plotoptions,0),m=0,y=0,b=0,x=p.node;p.link;if(Dd(n=p.node.datalabels,h)){var C=Md(n,h),k=jd(C.hook);v=Id(n,h),m=v+Rd(n,h)+k.height,y=k.width,b=C.radius}var w=n.padding||0,_=n.type,S=!0===f.chart.plot.datalabels.handleOverlapping,O=$x(n,h),A=Kx(h,d,n,zo,null,i,void 0,u),T=A.contentType||"text",P="html"===T,E=P&&A.multiLine,L=Ud(n,h);n.relativeX;if(L){L=L?_:"hidden";var M=[0,0],D=dc(h.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");Nd(D,n,h,d.color),D.attr("transform","").style("opacity",0);var I=a.add;o.data.forEach((function(t,e){var r,o,s,u,h,f,p=l.nodes,C=[],k=(r=l.nodes,o=cr(r,"layer"),s=Object.keys(o).map(parseFloat).sort(B),u=s.shift(),h=s.pop(),f=[],s.forEach((function(t){f=[].concat(_toConsumableArray(f),_toConsumableArray(o[t]))})),{start:o[u],center:f,end:o[h]||[]});p.forEach((function(t,n){var r,o,l=0,s=x.width,c=t.y0+(t.y1-t.y0)/2,u=E?"0.9em":"0.3em";r=k.center.includes(t)||k.end.includes(t)?t.x0+s/2:t.x1-s/2,o=E||k.center.includes(t)?"middle":k.end.includes(t)?"end":"start";var d,h=t.name;(D[T](h).attrs({x:r,y:c,"text-anchor":o,dy:u}),E)&&(ho(D,r),c-=(d=Bn(D.node())).height/2,r+=d.width/2*-1,ho(D,r),D.attr("y",c));if(S){l=zd((d=Bn(D.node())).height,v,b,y);var f=-(0+w+m);E&&(f+=d.width/2*-1);var p={id:"lbl".concat(i,"_").concat(e,"_").concat(n),x1:d.x-m,x2:d.x+d.width+m,y1:d.y-5-m-l/2,isLeft:true,y2:d.y+d.height+5+m+l/2,DX:f-r,overlap:"hidden",translateFunction:a.update};g.push(p)}else l=zd((d=Bn(D.node())).height,v,b,y);var _={X:r,Y:c,ANCHOR:o,DY:u,text:h,display:!0,ID:"lbl".concat(i,"_").concat(e,"_").concat(n),width:d.width,height:d.height+l,hookPosition:Qr};P&&(_.isLeft=true),C.push(_)})),I(C,i,e).properties={type:ji,dataLabels:n,dataUpdate:p,showlabel:L,rp:d,translation:"",trans:M,txtHgt:O,reverseColor:!0,onOverlap:function(){},contentType:T,isMultiLine:E},g.TOP=-M[1],g.BOTTOM=c+M[1],g.actualType=ji}))}}))}return n.renderer=function(e){return arguments.length?(t=e,n):t},n.args=function(t){return arguments.length?(e=t,n):e},n};var VL=wn.getComponent("sankeyLayout");pi.prototype.processSankeyData=function(){var t,e,n,a,r=this,o=r.processedseriesData,i=r.dataset,l=r.dataset.xidx,s=r.dataset.yidx(0),c=r.dataset.zidx,u=r.chartObj,d=u.cache,h="legendFilter"!==u.phase,f=d.disabledItems=M(),p=d.sankey=d.sankey||{legend:[],legendItemsMap:L()},g=p.legend,v=p.legendItemsMap;if(g.length&&g.forEach((function(t){t.disabled&&f.add(t[l])})),null!=o&&ua(o)){if(o.forEach((function(e,n){var a=pi.helpers.getChartType(null,null,n,r.data),o=a.name,l=a.type,s=(fa(r.data,"chart.plot.plotoptions.".concat(o,".link.renderEmpty")),"absolute"===fa(r.data,"chart.plot.plotoptions.".concat(o,".showAsNegative"))),c=fa(r.data,"chart.plot.plotoptions.".concat(o,".link")).exit.enabled;i.seriesTypes.add(l),ua(e.data)&&!pi.helpers.is3D(e.data)&&(e.data=[e.data]);var d=function(t,e){var n=i.getColumn(e,0);return Wo(n[n.datatype],t,n.datatype,u)};e.data.forEach((function(e,a){var o=function(t){return d(i.getX(t,0),"x")},l=function(t){return d(i.getY(t,0),"y")},h=function(t){return!!c||d(i.getY(t,0),"y")},p=function(t){var e=i.getZ(t);return e<0?s?Ze(e):0:e},g=r.sankeyLayout?r.sankeyLayout.zoomTransform:u.sankeyZoomTransform?u.sankeyZoomTransform:null;(t=r.sankeyLayout=new VL(e,o,l,h,p,f)).zoomTransform=g,e.forEach((function(t,e){VL.isValidPoint(o(t),l(t),h(t),p(t))&&(t._key=pi.helpers.generatePointKey(u.id,"pane0_0",n,a,e),t._type="link",l(t)||(t.exit=!0))}))}))})),t.nodeLength||t.linkLength){var m,y;u.systemConf.chart.width&&(m=$n(u.systemConf.chart.width,u)),u.systemConf.chart.height&&(y=$n(u.systemConf.chart.height,u));var b=Qg({node:{width:1},link:{}},[[0,0],[m||u.canvasarea.width,y||u.canvasarea.height]]),x=b(t.graph),C=p.legendSankeyLayout=b(t.completeGraph),k=function(t,e){return B(t.layer,e.layer)};r.sankeyLayout.layout=x,x.nodes.sort(k),C.nodes.sort(k),e=C.nodes,n=x.nodes,a=L(n,(function(t){return t.name})),h?(v.clear(),g.length=0,e.forEach((function(t,e){var n=a.get(t.name),r=[];r[l]=r[s]=t.nameOriginal,r[c]=t.value,r._type="node",r.itemIndex=e,r.seriesIndex=0,r.disabled=f.has(t.name),r._format=t._format,r._value="y"===t._format?t.point[s]:t.point[l],g.push(r),t.point=r,t.index=e,n&&(n.index=e,n.point=r),v.set(t.name,{index:e,point:r})}))):e.forEach((function(t){var e=v.get(t.name),n=e.point,r=e.index,o=a.get(t.name);t.index=r,t.point=n,o&&(o.index=r,o.point=n),n.disabled=f.has(t.name)}))}return p}};function YL(t,e){this.chart=t,this.helpers=e}Ta(YL,rv);var UL=YL.prototype;function GL(t,e,n){t=t||n.seriesdata[0].data[0];var a,r=(a={format:{decimalPlaces:0,suffix:"%"}},{conversionLine:{marker:{shape:"arrow-line",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeColor:"grey",fillColor:"none",x:function(t,e,n){return-n.bandGap/2+n.addExtraBW},y:function(t,e,n){return 0},events:{enabled:!0}},label:{x:function(t,e,n){return-n.bandGap/2+n.addExtraBW},y:function(t,e,n){return 20*n.labelPaddingUnit},text:function(t,e,n){var r=t.current/t.base*100;return Wo(a,r,Eo)}}}}),o=n.axes.rotated,i=n.systemConf.chart.axes.xaxis.reversed,l=n.axes.x.scale,s=n.axes.y.groups[0].scale,c=Math.min(l.bandwidth(),l.maxBandWidth),u=wh(l),d=l.domain().length>1?Ze(u[1]-u[0])+-1*c:0,h=o&&!i?-d:d,f=(.35*d).toFixed(2),p=n.dataObject.noofBarRangeEnabledSeries>0,g=p?1:null,v={x:l,y:s,bandGap:h,bandwidth:c,addExtraBW:o&&!i?c:0,padding:f,labelPaddingUnit:o?1:-1,isRangeChart:p,diffBand:d},m=e?$n(e,v):{},y=Rn(r,m,!0).conversionLine,b=y.marker,x=y.label,C=na(b.size)?b.size:d-2*f,k=b.angle?b.angle:o?i?90:-90:i?-180:0,w=fp(n.renderer[0].commonRendererProp().params.commonPlotOptions,n.seriesdata[0].plotoptions,n,"bar"),_=(n.dataset.getX,n.dataset.getY,function(t,e){return o?b.y(n.dataset.getY(t,0),e,v):b.x(n.dataset.getX(t),e,v)}),S=function(t,e){return o?b.x(n.dataset.getX(t),e,v):b.y(n.dataset.getY(t,0),e,v)},O={size:C,shape:b.shape,fillOpacity:b.fillOpacity,strokeOpacity:b.strokeOpacity,strokeWidth:b.strokeWidth,fillColor:b.fillColor,strokeColor:b.strokeColor||"black",animation:w,angle:k},A={segment:o?"line":"vertical-line"},T=vc(null,[x,n.systemConf.chart,n.systemConf.canvas,wr]),P=function(e,a){var r=n.dataset.getY(e,0,g),o=0==a.cur?r:n.dataset.getY(t[a.cur-1],0,g),i=0==a.cur?r:n.dataset.getY(t[0],0,g);return x.text({current:r,previous:o,base:i},a.cur,v)};T["text-anchor"]=o?"start":"middle";var E={x:function(t,e){return o?x.y(n.dataset.getY(t,0),e,v):x.x(n.dataset.getX(t),e,v)},y:function(t,e){return o?x.x(n.dataset.getX(t),e,v):x.y(n.dataset.getY(t,0),e,v)},formatter:P,styles:T},L={},M=new YL(n,{x:_,y:S,options:O,highlightOptions:A});return M.options({options:O}),b.events.enabled&&(L={config:b.events,highlighter:M,tooltipContent:function(e,a){var r=n.dataset.getX(e,0,g),o=0==a?r:n.dataset.getX(t[a-1],0,g),l=a==t.length-1?r:n.dataset.getX(t[a+1],0,g);return i?"".concat(r,"->").concat(l,": ").concat(P(e,a)):"".concat(o,"->").concat(r,": ").concat(P(e,a))}}),{markerInfo:{x:_,y:S,options:O,eventsInfo:L},labelInfo:E,display:function(t,e){return i&&!o?e==t.length-1?"none":"show":"0"==e?"none":"show"}}}function XL(t){var e=arguments.length>2?arguments[2]:void 0,n=t.data,a=e.conversionH,r=e.seriesdata[0].data[0];e.conversionH=a=GL(null,t.config,e);var o=a.markerInfo.eventsInfo,i=o.highlighter,l=o.tooltipContent,s=a,c=s.markerInfo,u=s.labelInfo,d=(s.display,Mr({selection:".outer",data:[n],config:_objectSpread({x:function(t,e){return c.x(t,e)},y:function(t,e){return c.y(t,e)}},c.options),event:_objectSpread({type:"zc-marker",id:"cLine",superKey:"segment",size:10*c.options.size/2,data:function(t,e,n,a){var o=_toConsumableArray(t);return(o=pC(o,e,t.seriesIndex,t.itemIndex,"zc-marker",t._key))._dependents={from:r[a.conf.prev],to:r[a.conf.cur]},o._data=function(){if(void 0===i)return[];var t=i.data().call(this),n=e.annotation.events.find((function(e){return e.data._key===t.__key}));return t._x=n.xy[0]-e.plotarea.left,t._y=n.xy[1]-e.plotarea.top,t},o},highlighter:i,tooltipContent:l},o.config||{})})),h={mark:{mark:"g",selector:".conversion-line",data:[1],properties:{attrs:{}},children:[_objectSpread({},d),{name:"label",selector:".conversion-label",mark:"text",data:[n],properties:{text:function(e,n){return u.formatter(e,t)},attrs:{x:function(t,e){return u.x(t,e)},y:function(t,e){return u.y(t,e)},dy:u.dy},styles:_objectSpread({},u.styles)}}]}};return h.mark}UL.options=function(t){this.optionsInfo=t},UL.data=function(){var t=this.chart,e=this.helpers;return function(n){var a=this;t.cache.data[a._key]||(t.cache.data[a._key]={});var r=t.cache.data[a._key];return r._x=a._x=e.x(a),r._y=a._y=e.y(a),r._size=a._size=e.options.size,r._visible=a._visible=!(a._dependents&&a._dependents.to&&a._dependents.to._x)||a._dependents.to._x>0,a}},UL.getSegments=function(t){var e=t._data();return[ip(this.helpers.highlightOptions.segment||this.helpers.options.shape,e._size,e._x,e._y)]},UL.path=function(t,e){t=t._data&&t._data()||t;var n=this.optionsInfo,a=e.context.call(this),r=e.translate.call(this),o=t,i=o.seriesIndex;o.paneid;n.options.strokeWidth=2,a.style("display",""),a.attr("transform","translate(".concat(r[0],",").concat(r[1],")"));var l=Mr({selection:".outer",data:[t],config:_objectSpread({x:t._x,y:t._y},n.options)});Kf({mark:{mark:"g",selector:".highlight".concat(t.paneid).concat(i).concat(t.itemIndex).concat(e.type)||"_",data:[t],properties:{attrs:{display:""}},children:[_objectSpread({},l)]}}.mark,a)},wn.setComponent("events.markerhighlighter",YL),wn.setComponent("conversionLineParser",XL),wn.setComponent("conversionLine",(function(t,e,n){var a,r=t[0].data[0],o=GL(r,e,n);if(Kf(XL(r,o,n).mark,n.staticPaneSVG.selectAll("g.qualitativeGroupHolder")),o.markerInfo.eventsInfo.config.enabled){var i="cLine",l=o.markerInfo.eventsInfo.highlighter;a={type:Kv,id:i,config:_defineProperty(_defineProperty(_defineProperty({},i,r.map((function(t,e){var a=_toConsumableArray(t);return(a=pC(a,n,0,e,Kv))._data=l.data(),a._dependents=function(t,e,n){return e>0?{from:n[e-1],to:n[e]}:null}(0,e,r),a}))),"superKey","segment"),"componentIndex",0)},a.config[i].disabled=function(t){return!1},n.components=[{name:"conversionLine",events:a,markerH:o.markerInfo,highlighter:l}]}})),t.version="2.32",t.versionName="Ortelius",t.d3Version="4.12.0",t.chartcategory=_e,t.charttypenames=we,t.charttype=Gt,t.setTheme=function(t,e){var n=Ne();n&&n.$ZC&&(n.$ZC[t]=e),Te[t]=e},t.getTheme=function(t){return Te[t]||window&&window.$ZC&&window.$ZC[t]},t.rename=function(t){if(null!=t&&""!=t&&"string"==typeof t){var e=Ne();if(e&&e.$ZC)return e[t]=$ZC,e.$ZC=null,delete e.$ZC,!0}return!1},t.tempCanvasContext=He,t.scale=Wt,t.requireXDataSorting=function(t){if(!arguments.length)return On;On=t},t.imageFilePath=function(t){if(!arguments.length)return _n;_n=t},t.dataEncoded=Tn,t.setGlobalPropByUserdata=Sr,t.createHelperElements=Rv,t.getComponent=bn,t.get=Cn,t.set=kn,t.setComponent=xn,t.getDefaultOptions=Pr,t.setDefaultOptions=Er,t.setGlobalPatternSVG=function(t){wr.patternSVG=t},t.utils=Dn,t.appendElement=dc,t.getRawColor=Fs,t.CHART_DOMAIN_HELPERS=zv,t.charts=Sp,t.maps=Op,t.setLegendColorPallete=function(t,e){du.colorpallete.set(t,e)},t.getLegendColorPallete=function(t){return du.colorpallete.get(t)},t.setLegendPatternPallete=function(t,e){du.patternPallete.set(t,e)},t.getLegendPatternPallete=function(t){return du.patternPallete.get(t)},t.setLegendImagePallete=function(t,e){du.imagePallete.set(t,e)},t.getLegendImagePallete=function(t){return du.imagePallete.get(t)},t.annotation=Hm,t.BrushD3=by,t._legendSizeSliderBrushD3=by,t.setCustomBrushHandle=Dp,t.tickFilterMap=tx,t.effects=Hr,t.addPattern=jr,t.getPattern=Fr,t.PlotHighlighter=vC,t.setPlotDefaultBehaviour=MC,t.getPlotDefaultBehaviour=DC,t.getFormattedValue=Wo,t.generateFormatSpecifier=Yo,t.setLocale=function(){if(arguments.length>1){var t=Array.prototype.slice.call(arguments),e=t[0],n=t[1];Ho[e]=n}else Ro=arguments[0]},t.legendHighlight=AS,t.getTooltipPosition=Il,t.mapCollections=PE,t.sankey=Gg,t.sankeyCenter=zg,t.sankeyJustify=Rg,t.sankeyLeft=Dg,t.sankeyRight=Ig,Object.defineProperty(t,"__esModule",{value:!0})}));var ZChartRenderer={isDarkThemeEnabled:function(){if("undefined"!=typeof featuresAvailable&&featuresAvailable.NEXTGENUI_ENABLED){var t=$L("crm-left-menu")[0],e="default";(t=t?t.component:null)&&(e=t.getData("dataMode"));const n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return"dark"===e||"system_setting"===e&&!0===n}return!1},renderComponent:function(t,e,n){delete t.colors;var a=n?$("#"+n):$("#chartdiv_"+e);if(!this.validateComponentChunk(t))return t.isWebform?"data_unavailable":void this.renderNoDataContent(t,a);if("funnel"!==t.component_props.visualization_props.type&&"pie"!==t.component_props.visualization_props.type&&"donut"!==t.component_props.visualization_props.type||0!==t.component_chunks[0].data_map.T.aggregates[0].value&&null!==t.component_chunks[0].data_map.T.aggregates[0].value){if(t.component_props&&"table"===t.component_props.visualization_props.type)return a.html(Handlebars.templates.TabularChart(t)),void CrmChartRenderer.renderTabularChart(t,e)}else{var r=!1;for(var o in t.component_chunks[0].data_map){var i=t.component_chunks[0].data_map[o];if(i.value&&i.value>0){r=!0;break}}if(!r){var l=t.msg?t.msg:"crm.label.insufficient.chart.data";return void a.html("<div class='noDataDiv mT30'><span></span><h4>"+I18n.getMsg(l)+"</h4></div>")}}if("heatmap"===t.component_props.visualization_props.type){const e=ZChartRenderer.isDarkThemeEnabled()?"darkColorThemes":"colorThemes";var s=CrmChartRenderer[e].basic[0];if(t.component_props.visualization_props.color_palette){var c=t.component_props.visualization_props.color_palette?t.component_props.visualization_props.color_palette.name:"basic";s=CrmChartRenderer[e][c+""][t.component_props.visualization_props.color_palette.starting_index]}t.colors=["#fff",s]}else CrmChartRenderer.setChartColorTheme(t,e);if("quadrant"===t.component_type){const e=ZChartRenderer.isDarkThemeEnabled()?"#126C1A":"#2d3";this.setComponentPropertiesForQuadrant(t),this.setSeriesDataForQuadrant(t),"standard"===t.component_props.visualization_props.type&&(t.chart.plot.plotoptions.bubble.marker={innerFillColor:e,outerFillColor:e,innerFillOpacity:1,outerFillOpacity:1,outerStrokeWidth:0},t.chart.plot.plotoptions.bubble.hoveroptions={innerFillColor:e,outerFillColor:e,innerFillOpacity:0,outerStrokeOpacity:0,innerStrokeWidth:0,outerFillOpacity:.5}),t.chart.plot.datalabels.handleOverlapping=!0,(!t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data||t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data.length<=1)&&(0===t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data.length&&(t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data=[["",null,null]],t.chart.axes.yaxis[0].minRange=0,t.chart.axes.yaxis[0].maxRange=10,t.chart.axes.xaxis.minRange=0,t.chart.axes.xaxis.maxRange=10),t.chart.axes.yaxis[0].axisline={color:"var(--chartYAxisline)",show:!0},t.chart.axes.xaxis.axisline={color:"var(--chartXAxisline)",show:!0})}else if("zone"===t.component_type){this.setComponentPropertiesForQuadrant(t),this.setSeriesDataForZone(t),t.chart.plot.datalabels.handleOverlapping=!0,(!t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data||t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data.length<=1)&&(0===t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data.length&&(t.chart.axes.yaxis[0].minRange=0,t.chart.axes.yaxis[0].maxRange=10,t.chart.axes.xaxis.minRange=0,t.chart.axes.xaxis.maxRange=10),t.chart.axes.yaxis[0].axisline={color:"var(--chartYAxisline)",show:!0},t.chart.axes.xaxis.axisline={color:"var(--chartXAxisline)",show:!0}),t.chart.axes.yaxis[0].grid=!1}else if("stage"===t.component_type){if(t.divId=n||e,this.setComponentPropertiesForStage(t),this.setSeriesDataForStage(t),"staircase_basic"===(y=t.component_props.visualization_props.type)||"staircase_advanced"===y)(t.component_chunks[2]?t.component_chunks[2]:void 0)&&this.setMovedCountData(t)}else this.setComponentProperties(t),this.setSeriesData(t);this.setChartSpecificProps(t);for(var u=t.chart.axes.yaxis.length,d=0;d<u;d++)if("Blueprints.Time_taken_for_Transition"===t.component_chunks[0].aggregate_column_info[d].name&&(t.chart.axes.yaxis[d].ticklabel.showAs=this.convertMilliSecondsToTime,"pie"!==t.component_props.visualization_props.type&&"donut"!==t.component_props.visualization_props.type||(t.metadata.columns[2].datatype="ordinal")),t.component_props.visualization_props.aggregate_format&&t.component_props.visualization_props.aggregate_format.length){var h=t.component_props.visualization_props.aggregate_format,f=t.component_props.visualization_props.type,p=h.length;if("heatmap"!==f)for(var g=0;g<p;g++){var v=h[g].function_index;"quadrant"===t.component_type||"zone"===t.component_type?1===v?t.chart.axes.yaxis[d].ticklabel.showAs=this.formatTickLabels:0===v&&(t.chart.axes.xaxis.ticklabel.showAs=this.formatTickLabels):v===d&&(t.chart.axes.yaxis[d].ticklabel.showAs=this.formatTickLabels)}}if(t.component_chunks[0].grouping_column_info.length>1&&(ZChartRenderer.setStackedSeriesData(t,2===t.component_type.split("_").length),"stage"===t.component_type&&ZChartRenderer.setPivotDataForStage(t,e),t.isColorEnabledField)){var m=t.seriesdata.chartdata.length;for(d=0;d<m;d++){o=t.seriesdata.chartdata[d].seriesname;o=ZChartRenderer.getEncodedHtmlText(o);s=t.colors&&t.colors[o]&&"#ffffff"!==t.colors[o]?t.colors[o]:"#ebebeb";t.seriesdata.chartdata[d].color=s}delete t.colors}if(t.isFromReviewProcess&&rpModifyAnalyticsData.updateSeriesData(t),t.isOrchestrationAvgTimeChart&&orchAnalyticsComponentData.updateTimeForYAxis(t),t.isWebform&&Lyte.registeredMixins["webform-analytics-util"].configureDataAvailableForChart(t,a),"quadrant"===t.component_type&&(ZChartRenderer.setThresholdValues(t),t.chart.axes.yaxis[0].grid=!1),"heatmap"===t.component_props.visualization_props.type&&"undefined"==typeof CrmAnalyticsEmbedUrl&&(t.chart.height="auto",t.chart.width="auto",t.chart.plot.datalabels.handleOverlapping=!0),t.showChart=void 0===t.showChart||t.showChart,t.showChart){a.empty();var y=t.component_props.visualization_props.type;if("zone"===t.component_type&&0===t.seriesdata.chartdata[t.seriesdata.chartdata.length-1].data.length){l=t.msg?t.msg:"crm.data.not.available";var b=t.component_type+"_"+y+"_nodata_bg";return void a.html("<div class='noDataCont'><div class=''><span class='"+b+" noDataImg'></span></div><p class='noDataText'>"+I18n.getMsg(l)+"</p></div>")}if("stage"!==t.component_type||"staircase_basic"!==y&&"staircase_advanced"!==y)CrmChartUtil.renderChart(a[0],t,!0);else{t.canvas.events={onload:ZChartRenderer.canvasOnLoadForStage,onreload:ZChartRenderer.canvasOnLoadForStage};for(var x=t.component_chunks[0].vertical_groupings,C=t.component_chunks[1]?t.component_chunks[1]:void 0,k=C.vertical_groupings,w=C.data_map,_=k&&k.length>0?k.length:0,S=!1,O=t.component_props.visualization_props.aggregate_format,A=O&&O[0]?O[0].type:void 0,T=0;T<_;T++)if("won"===k[T].label){S=!0;var P=w[k[T].key].aggregates[0].value>0;t.totalwonCount={label:P?w[k[T].key].aggregates[0].label:A?ZChartRenderer.applyFormatSuccessor(0,0,A):0,value:P?w[k[T].key].aggregates[0].value:0}}S||(t.totalwonCount={label:A?ZChartRenderer.applyFormatSuccessor(0,0,A):0,value:0});var E=t.wonCount?t.wonCount:0,L=t.totalwonCount&&t.totalwonCount.value?t.totalwonCount.value:0;if(C&&x.length>1&&(L>0||E>0)){t.isConversionRate=!0;var M=w&&w.T&&w.T.aggregates[0].value?w.T.aggregates[0].value:0;t.totalValueCount=M;var D="stagechart_"+t.divId;t.renderId=D,a.html("<div class='stageCustomChart h100_per dF'><div class='stage_chartCustom' id='"+D+"'></div></div>");var I=$("#"+D);CrmChartUtil.renderChart(I[0],t,!0)}else{t.renderId="chartdiv_"+t.divId;var R=t.notes.batch;for(var o in R)R.hasOwnProperty(o)&&(R[o].parent="#chartdiv_"+t.divId+" .qualitativeGroupHolder");CrmChartUtil.renderChart(a[0],t,!0)}}}t.report_id&&(e||e&&!e.startsWith("drill_"))&&"crm.tab.newReports.view"!==Lyte.Router.getRouteInstance().transition.info.route&&(a.unbind("click"),a.addClass("cP").click((function(e){if(!$("#analyticalPageContainer").hasClass("grid_editMode")&&!$("#editPageHeader").hasClass("editPageHeader")&&""!==e.target.className&&"legendlabel"!==e.target.className&&"legendfilterbox"!==e.target.className&&"expandable"!==e.target.className){var n=Lyte.Router.getURL({route:"crm.tab.newReports.view",dynamicParams:[t.report_id]});networkUtils.openUrl(n,"_blank","")}})))},convertMilliSecondsToTime:function(t){return Utils.convertTimeInDoubleToReadableForm(t/6e4)},formatTickLabels:function(t,e,n,a,r,o){if(a){var i=a.userdata;r=i.component_props.visualization_props.aggregate_format[0].type,o=i.component_props.visualization_props.aggregate_format[0].decimal_places}var l=t;if(null!==r)switch(r){case"K":l=ZChartRenderer.formatthousands(l,3);break;case"L":l=ZChartRenderer.formatthousands(l,5);break;case"C":l=ZChartRenderer.formatthousands(l,7);break;case"M":l=ZChartRenderer.formatthousands(l,6);break;case"B":l=ZChartRenderer.formatthousands(l,9);break;case"K-L-C":if(l<Math.pow(10,3))break;if(l<Math.pow(10,5)){l=ZChartRenderer.formatthousands(l,3);break}if(l<Math.pow(10,7)){l=ZChartRenderer.formatthousands(l,5);break}l=ZChartRenderer.formatthousands(l,7);break;case"K-M-B":if(l<Math.pow(10,3))break;if(l<Math.pow(10,6)){l=ZChartRenderer.formatthousands(l,3);break}if(l<Math.pow(10,9)){l=ZChartRenderer.formatthousands(l,6);break}l=ZChartRenderer.formatthousands(l,9)}return null!==o&&(l=l.toFixed(o)),l=l.includes(".")&&null!==r?ZChartRenderer.removeZeroAtEnd(l):l,a&&(l=ZChartRenderer.applyFormatSuccessor(t,l,r)),l},formatthousands:function(t,e){return t/Math.pow(10,e)},applyFormatSuccessor:function(t,e,n){var a=t;if(null!==n)switch(n){case"K":e+=" K";break;case"L":e+=" L";break;case"C":e+=" C";break;case"M":e+=" M";break;case"B":e+=" B";break;case"K-L-C":if(a<Math.pow(10,3))break;if(a<Math.pow(10,5)){e+=" K";break}if(a<Math.pow(10,7)){e+=" L";break}e+=" C";break;case"K-M-B":if(a<Math.pow(10,3))break;if(a<Math.pow(10,6)){e+=" K";break}if(a<Math.pow(10,9)){e+=" M";break}e+=" B"}return e},removeZeroAtEnd:function(t){for(var e=t.split("."),n=e[1]?e[1].length:-1,a=0;a<=n;a++){var r=t.length;if(!t.endsWith("0")&&!t.endsWith("."))break;t=t.substr(0,r-1)}return t},getFormateDecimal:function(t){var e=t+"";if(e.includes(".")){var n=e.split(".");return n.length>1?n[1].length:0}return 0},compactNumberLabelShowAs:function(t){return t[2]?t[2]:t[1]},validateComponentChunk:function(t){return!(validationUtils.isEmpty(t.component_chunks[0].data_map)||1===Object.keys(t.component_chunks[0].data_map).length&&"T"===Object.keys(t.component_chunks[0].data_map)[0])},renderNoDataContent:function(t,e){var n=t.msg?t.msg:"crm.data.not.available";if(t.component_props&&t.component_props.visualization_props){var a=t.component_type+"_"+t.component_props.visualization_props.type+"_nodata_bg";e.html("<div class='noDataCont'><div class=''><span class='"+a+" noDataImg'></span></div><p class='noDataText'>"+I18n.getMsg(n)+"</p></div>")}else e.html("<div class='noDataDiv mT30'><span></span><h4>"+I18n.getMsg(n)+"</h4></div>")},setEventMouseMoveMethodForPie:function(t,e,n){var a=n.container.selectAll("svg.static").selectAll("g.customHighlight").data([1]);a.enter().append("g").merge(a).attr("class","customHighlight");var r=a.selectAll("path").data([1]),o=r.enter().append("path").merge(r),i=$ZC.get("domUtils.getSvgTransform")(n.container.selectAll("g.piegroup")).translate,l=$ZC.get("domUtils.getSvgTransform")(n.container.selectAll("g.seriesholder")).translate,s=n.renderer[0].arc.outerRadius()(),c=d3.arc().innerRadius(s).outerRadius(s+10),u=n.renderer[0].data[e.itemIndex];o.style("fill",n.seriesColor[e.itemIndex%n.seriesColor.length]).style("opacity",.3).attr("transform","translate("+(l[0]+i[0])+","+(l[1]+i[1])+")").attr("d",c(u))},setEventMouseOutMethodForPie:function(t,e,n){n.container.selectAll("svg.static").selectAll("g.customHighlight path").style("opacity",0)},setEventInitMethodForPie:function(t,e){if(!e.phase||"redraw"===e.phase){var n=e.systemConf.chart.plot.plotoptions,a=n.pie,r=e.plotarea,o=Math.min(r.width,r.height)/2,i=a.outerPadding,l=a.datalabels.padding,s=o-l-i,c=e.userdata.seriesdata.chartdata[0].data[0],u=$ZC.get("dataLabel.measureText")(c,{config:a.datalabels,chartObj:e}),d=Math.max.apply(null,u.map((function(t){return t.width})));r.width/2-o<d?n.pie.maxRadius=Math.max(.4*s,s-Math.max(0,d-(r.width/2-o))-l-i):n.pie.maxRadius=250}},setMouseMoveForStackedChart:function(t,e,n){var a=n.eventHandler.eventManager.selectionManager,r=a.nearest,o=a.oldSelectionSet[0];!n.goneOut&&r&&3==r.selected||r&&o&&r._uid==o._uid?"hidden"===n.tooltip.element.style("visibility")?(t.allowDefault=!0,$ZC.getPlotDefaultBehaviour().mousemove[4].allowDefault=!0):(t.allowDefault=!1,$ZC.getPlotDefaultBehaviour().mousemove[4].allowDefault=!1):(t.allowDefault=!0,$ZC.getPlotDefaultBehaviour().mousemove[4].allowDefault=!0),n.goneOut&&(n.goneOut=!1),r?n.tooltip.element.style("position","fixed"):(n.tooltipDisplay=n.tooltipDisplay?n.tooltipDisplay:n.tooltip.element.style("display"),n.tooltip.element.style("position",null))},setMouseOutForStackedChart:function(t,e,n){var a=n.eventHandler.eventManager.selectionManager;$ZC.getPlotDefaultBehaviour().mousemove[4].allowDefault=!0,t.toElement!==n.svg.node()&&t.target!==t.toElement||(n.goneOut=!0,a.nearest=void 0,a.oldSelectionSet=[],a.newSelectionSet=[]),t.allowDefault=!0},setComponentProperties:function(t,e){var n,a=[],r=[],o=[],i=t.component_chunks[0].grouping_column_info,l=[],s={dataindex:0,columnname:$ESAPI.encoder().encodeForHTML(i[0].label),datatype:"ordinal",ordinal:{nullformatting:"None"}};a.push(0),o.push(0),l.push(s);for(var c=t.component_chunks[0].aggregate_column_info,u=c.length,d=u>3,h=0;h<u;h++){s={dataindex:1,columnname:$ESAPI.encoder().encodeForHTML(c[h].label),datatype:"numeric"};e||"trends"===t.component_type&&!d?(0==r.length&&(r[0]=[]),r[0].push(h+1)):"trends"===t.component_type&&d?(0===h&&(r[0]=[],r[1]=[]),h<2?r[1].push(h+1):r[0].push(h+1)):(r[h]=[],r[h].push(h+1)),o.push(h+1),l.push(s)}if(i.length>1){s={columnname:$ESAPI.encoder().encodeForHTML(i[1].label),datatype:"ordinal",ordinal:{nullformatting:"None"}};if("heatmap"===t.component_props.visualization_props.type){var f=l[1];t.component_props.visualization_props.aggregate_format&&t.component_props.visualization_props.aggregate_format.length&&(f.numeric={format:{customFormat:ZChartRenderer.HeatMapLengendToolTipShowAs}}),s.dataindex=1,l[1]=s,(s=f).dataindex=2}l.push(s),o.push(h+1),n=[2]}var p=t.component_props.visualization_props.type;if("pie"===p||"donut"===p)l[1].numeric={percentformat:{decimalPlaces:2,suffix:" %"}},l.push({dataindex:2}),l.push({dataindex:3,columnname:"CategoryLabel",datatype:"ordinal"}),l.push({dataindex:4,columnname:"EncodedCategoryLabel",datatype:"ordinal"});else if("funnel"===p){s={dataindex:2,columnname:$ESAPI.encoder().encodeForHTML("label"),datatype:"ordinal"};l.push(s),l.push({dataindex:3,columnname:"CategoryLabel",datatype:"ordinal"}),l.push({dataindex:4,columnname:"EncodedCategoryLabel",datatype:"ordinal"})}else if("heatmap"===p){l.push({dataindex:3,columnname:"DummyColumn",datatype:"ordinal"});s={dataindex:4,columnname:$ESAPI.encoder().encodeForHTML("label"),datatype:"ordinal"};l.push(s)}t.metadata=CrmChartUtil.getMetaData(a,r,l,o,n).metadata,t.is_pitch_prescriptor&&(t.metadata.columns[0].datatype="time",t.metadata.columns[0].time={inputformat:"YYYY-MM-dd",subfunction:"DATE"})},setComponentPropertiesForQuadrant:function(t){var e=[],n=[],a=[],r=[],o=[],i=[],l={dataindex:0,columnname:t.component_chunks[0].grouping_column_info[0].label};o=[];r.push(0),i.push(l);var s=t.component_chunks[0].aggregate_column_info;e.push(1),r.push(1),n[0]=[],n[0].push(2),a.push(3),r.push(2),i.push({dataindex:1,columnname:s[0].label,datatype:"numeric"});for(var c=s.length,u=1;u<c;u++){l={dataindex:u+1,columnname:s[u].label,datatype:"numeric"};i.push(l)}c>2?(r.push(3),o.push(5)):o.push(4),i.push({dataindex:u+1,columnname:s[u-1].label,datatype:"numeric"}),i.push({dataindex:u+2,columnname:"categoryLabel",datatype:"ordinal"}),t.metadata=CrmChartUtil.getMetaData(e,n,i,r,undefined,a,o).metadata},setComponentPropertiesForStage:function(t){var e=t.component_props.visualization_props.type,n=[],a=[],r=[];if("stacked_bar"===e){r.push(5);t.facets=CrmChartUtil.getFacets([1,2,3,4],void 0,[5,6,7,8],!0)}else r.push(2),a[0]=[],a[0].push(1);var o=t.component_chunks[0].grouping_column_info,i=[],l={dataindex:0,columnname:o[0].label,datatype:"ordinal"};i.push(l);var s=t.component_chunks[0].aggregate_column_info;if(n.push(0),"stacked_bar"===e)i.push({levelindex:0,dataindex:1,columnname:"col2",datatype:"numeric"}),i.push({levelindex:0,dataindex:1,columnname:"col3",datatype:"numeric"}),i.push({levelindex:0,dataindex:1,columnname:"col4",datatype:"numeric"}),i.push({levelindex:0,dataindex:1,columnname:"col5",datatype:"numeric"}),i.push({levelindex:1,columnname:"col6",datatype:"ordinal"}),i.push({levelindex:1,columnname:"col7",datatype:"ordinal"}),i.push({levelindex:1,columnname:"col8",datatype:"ordinal"}),i.push({levelindex:1,columnname:"col9",datatype:"ordinal"}),i.push({dataindex:3,columnname:"col10",datatype:"ordinal"});else{i.push({dataindex:1,columnname:s[0].label,datatype:"numeric",numeric:{format:{thousandSeperator:""}}});l={levelindex:0,columnname:o[1].label,datatype:"ordinal"};i.push(l)}t.metadata=CrmChartUtil.getMetaData(n,a,i,[],r).metadata},setChartSpecificProps:function(t){t.canvas=CrmChartUtil.getCanvasData().canvas;var e=t.component_type,n=t.component_props.visualization_props.type,a=n.split("_"),r=!!("trends"===e||a[0]&&"spline"===a[0]||a.length>1&&"stacked"===a[1]&&("bar"===a[0]||"column"===a[0])||"stage"===e&&"stacked_bar"!==n)||void 0;t.tooltip=CrmChartUtil.getTooltipData(!0,!1,"#fff","black",r,ZChartRenderer.getToolTipBasedOnComponentType(t),ZChartRenderer.getToolTipBorderColor(t),t.is_pitch_prescriptor).tooltip},getToolTipBasedOnComponentType:function(t){var e=t.component_type,n=t.component_props.visualization_props.type;switch(e){case"quadrant":case"zone":return ZChartRenderer.customToolTipForQuadrant;case"trends":return ZChartRenderer.customToolTipForTrends;case"stage":return ZChartRenderer.customToolTipForStage;default:return"heatmap"===n?ZChartRenderer.customToolTipForHeatmap:"spline"===n&&t.component_chunks[0].aggregate_column_info.length>1?ZChartRenderer.customToolTipForLine:t.isFromReviewProcess&&"Field status history"===t.name?rpModifyAnalyticsData.tooltipForFieldStatusHistory:ZChartRenderer.tooltipContent}},customToolTipForTrends:function(t,e,n){var a=e.length,r=n.userdata.seriesdata.chartdata.length;if(r>3&&a>2||r<=3){n.tooltip.element.style("display","");for(var o='<div id="tooltipcontent" class="analytics_trendsTooltip crm-font-regular p5 crm-small-font-size crmBaseColor"><div></div><b>'+e[0].actData[3]+"</b><br>",i=0;i<a;i++)o=o+'<div style="margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:'+n.seriesdata[e[i].actData.seriesIndex].color+'" =""></div>'+e[i].metaInfo[1].columnname+" : "+e[i].actData[2]+"<br>";return o}n.tooltip.element.style("display","none")},customToolTipForStage:function(t,e,n){var a=n.userdata.component_props.visualization_props.type;if("stacked_bar"!==a&&Array.isArray(e)){var r=n.userdata,o=r.seriesNameObj,i=r.totalCountObj[e[0].actData[3]],l="<b>"+$ESAPI.encoder().encodeForHTML(e[0].actData[3])+"</b>";l+='<div class="pR pR15 " style="width:auto;"><table><tbody>';for(var s=e.length-1;s>=0;s--){var c=e[s];if(c.actData[1]>0){c.actData[1]=c.actData[1]?c.actData[1]:0;var u=c.metaInfo[c.metaInfo.length-1].value;l+='<tr><td class="vaT"><span style="color:'+n.seriesColor[c.actData.seriesIndex]+'" class="p0 mR3"></span></td><td class="vaT"><span class="dIB maxW300 crmEllipticText p0 vaT">'+u+' : </span><span class="dIB p0 mL5 vaT">'+c.actData[2]+(c.actData[1]>0&&o.won===u||c.actData[1]>0&&o.lost===u?" ("+Math.trunc(100*c.actData[1]/i)+"%)":"")+"</span></td></tr>"}}return l+="</tbody></table></div>"}if("stacked_bar"===a){var d=n.userdata.pivotIndexToLabel,h=e.actData.rendererIndex,f=$ESAPI.encoder().encodeForHTML(d[h]);u=e.actData[2];return"<b>"+ZChartRenderer.getEncodedHtmlText(f)+"</b></br>"+$ESAPI.encoder().encodeForHTML(e.actData[3])+" : "+u}},getToolTipBorderColor:function(t){if(t.is_pitch_prescriptor)return"var(--br_D2D9E0)";{const e=ZChartRenderer.isDarkThemeEnabled();switch(t.component_type){case"quadrant":return e?"#126C1A":"#2d3";case"zone":return"standard"===t.component_props.visualization_props.type?e?"#B22B21":"#FF4032":e?"#395D34":"#8DE683";default:return}}},HeatMapLengendToolTipShowAs:function(t,e,n,a,r){return ZChartRenderer.formatTickLabels(t,void 0,void 0,r)},xAxisShowAs:function(t,e,n,a){for(var r=a.userdata.component_chunks[0].vertical_groupings,o=r.length,i=0;i<o;i++){var l,s=I18n.getMsg("None"),c=r[i].value||0===r[i].value?r[i].value:""===r[i].label||null===r[i].value?null:r[i].label,u=null!==c?$ESAPI.encoder().encodeForHTML(c+""):c;if((u=u&&u.includes("&#x25;")?u.replaceAll("&#x25;","%"):u)===t||!1===c&&(t===s||t===$ESAPI.encoder().encodeForHTML(s)))return!0===c?l="true":(l=(l=""===r[i].label||null===r[i].value?s:r[i].label+"").replaceAll(/\s\s+/g," ").replaceAll(/\n/g,""),l=!1===c?s:$("<div/>").text(l).html()),"<tspan>"+l+"</tspan>"}},xAxisShowAsInPrescriptor:function(t,e,n,a,r){if(r<a.userdata.component_chunks[0].vertical_groupings.length)return a.userdata.component_chunks[0].vertical_groupings[r].label},setSeriesData:function(t,e){var n=t.component_props.visualization_props.type,a=n.split("_"),r="trends"===t.component_type;n=a[0];var o,i=t.component_chunks[0].vertical_groupings.length,l=I18n.getMsg("None"),s="bar"===n,c=[],u={column:"bar",spline:"line",areaspline:"area",donut:"pie"};n=u[n]?u[n]:n,o=this.getChartData(t,n,e),this.setCategoriesForChart(t,l,i,c),r&&this.processDataForTrends(o,t.component_props.objective),t.seriesdata=CrmChartUtil.getSeriesData(o).seriesdata;var d=this.setPlotOptions(n,a,t),h="pie"===n||"donut"===n?ZChartRenderer.setEventInitMethodForPie:void 0,f="pie"===n||"donut"===n?ZChartRenderer.setEventMouseMoveMethodForPie:a[1]&&"stacked"===a[1]||"spline"===a[0]?ZChartRenderer.setMouseMoveForStackedChart:void 0,p="pie"===n||"donut"===n?ZChartRenderer.setEventMouseOutMethodForPie:a[1]&&"stacked"===a[1]||"spline"===a[0]?ZChartRenderer.setMouseOutForStackedChart:void 0,g="pie"===n||"donut"===n||"funnel"===n?ZChartRenderer.datalabelEvents:void 0,v=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].grouping_column_info[0].label+""),m=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[0].label+""),y=!!t.component_props.visualization_props.type.includes("bar");if("funnel"===n&&"undefined"!=typeof CrmAnalyticsEmbedUrl&&(t.animationNeeded=!1),t.chart=CrmChartUtil.getChartAxesData(!1,!0,!0,this.getEncodedHtmlText(v),void 0,!0,!0,!1,this.getEncodedHtmlText(m),!0,void 0,void 0,void 0,c,d,void 0,s,void 0,r?void 0:t.is_pitch_prescriptor?ZChartRenderer.fetchReasons:ZChartRenderer.fetchRecords,!(!g&&"heatmap"!==n)||void 0,t.animationNeeded,h,f,p,g,t.is_pitch_prescriptor?ZChartRenderer.xAxisShowAsInPrescriptor:"pie"===n||"donut"===n?void 0:ZChartRenderer.xAxisShowAs,y).chart,t.is_pitch_prescriptor){for(var b=(c=t.chart.axes.xaxis.categories).length,x=[],C=0;C<b;C++)x[C]=Date.parse($L.moment(c[C])._dateObj);t.chart.axes.xaxis.tickCount=b,t.chart.axes.xaxis.ticks=x,t.chart.plot.events.onload=ZChartRenderer.pointHighlighter,t.chart.axes.xaxis.ticklabel.alignMode="rotate(-45)"}r&&(t.chart.plot.plotoptions.line.events={cursor:"default"}),y&&"undefined"==typeof CrmAnalyticsEmbedUrl&&(t.chart.width="auto");var k=t.component_chunks[0].aggregate_column_info.length;if(k>=1&&!r)for(var w=1;w<k;w++)t.chart.axes.yaxis.push(CrmChartUtil.getYaxisData(!0,!0,t.component_chunks[0].aggregate_column_info[w].label,!0,void 0,void 0,void 0,void 0,void 0,void 0));if(r&&k>3&&(t.chart.axes.yaxis.push({}),t.chart.axes.yaxis[1].show=!1,t.chart.axes.yaxis[1].minRange=-2,t.chart.axes.yaxis[1].maxRange=-1,t.chart.axes.yaxis[0].label.text=I18n.getMsg("crm.label.returntype.ratio")),t.component_markers&&t.component_markers.length>0){var _,S=t.component_markers[0],O=S.y.hasOwnProperty("value")?S.y.value:S.y;if(t.component_props.visualization_props&&t.component_props.visualization_props.aggregate_format&&t.component_props.visualization_props.aggregate_format.length){var A=t.component_props.visualization_props.aggregate_format[0].type,T=t.component_props.visualization_props.aggregate_format[0].decimal_places;_=parseFloat(ZChartRenderer.formatTickLabels(O,void 0,void 0,void 0,A,T)),_=ZChartRenderer.applyFormatSuccessor(O,_,A)}_=_||O,t.chart.axes.yaxis[0].threshold.line.show=!0,t.chart.axes.yaxis[0].threshold.line.values=[O],t.chart.axes.yaxis[0].threshold.line.marker.enabled=!1,t.chart.axes.yaxis[0].threshold.line.label.text=[I18n.getMsg("crm.dashboard.label.benchmark")+": "+_]}var P,E=t.component_chunks[0].aggregate_column_info.length,L=0;if("line"===n||("column"===n||"bar"===n)&&E>1||"heatmap"===n){var M=t.component_chunks[0].vertical_groupings.length,D=Number.POSITIVE_INFINITY,I=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(w=0;w<M;w++){var R=t.component_chunks[0].vertical_groupings[w],z=R.groupings,j=z?z.length:void 0;if(j)for(var F=0;F<j;F++)for(var B=z[F],H=0;H<E;H++){(N=t.component_chunks[0].data_map[B.key].aggregates[H])&&(N.value="-"===N.label&&null===N.value?0:N.value,N.value<D&&(D=N.value),N.value>I[H]&&("heatmap"===n||"line"===n)&&(I[H]=N.value))}else for(H=0;H<E;H++){var N,W=t.component_chunks[0].aggregate_column_info[H];if(!(r&&W.value&&"Anomaly"===W.value||r&&E>3&&H<2))(N=t.component_chunks[0].data_map[R.key].aggregates[H])&&(N.value="-"===N.label&&null===N.value?0:N.value,N.value<D&&(D=N.value),N.value>I[H]&&(I[H]=N.value))}}var V=t.component_markers?t.component_markers[0].y.value:void 0;if(V&&V<D&&(D=V),"line"===n){for(H=0;H<E;H++){C=r?0:H;var Y=t.chart.axes.yaxis[0].maxRange,U=r&&Y&&Y>I[H]?Y:I[H];if(r&&E>3&&1==H||(t.chart.axes.yaxis[C].minRange=D,U>D&&(t.chart.axes.yaxis[C].maxRange=U)),e)break}t.chart.axes.xaxis.axisline.zindex="back",t.chart.clip="none"}if(!t.is_pitch_prescriptor&&E>1&&!r){2===E&&I.pop(0);var G=V&&V>I[0],X=Math.max.apply(null,I),Z=Math.min.apply(null,I);10*Z>=X&&G?(I[0]=V+.1*V,I[1]=V+.1*V,I[2]=V+.1*V):10*Z>=X||X-Z<=25?(I[0]=X+.1*X,I[1]=X+.1*X,I[2]=X+.1*X):G&&(I[0]=V+.3*V);for(H=0;H<E;H++)I[H]=X===I[H]?X+.1*X:I[H],I[H]>D&&(t.chart.axes.yaxis[H].maxRange=I[H])}"heatmap"===n&&(P=Math.max.apply(null,I),L=D||0)}t.chart.plot.datalabels.fontSize=13;var q=t.isColorEnabledField||t.component_chunks[0].aggregate_column_info.length>1||t.component_chunks[0].grouping_column_info.length>1?void 0:ZChartRenderer.legendHighlightMethod;if("pie"===n||t.component_chunks[0].grouping_column_info.length<=1&&o.length<=1)t.legend=CrmChartUtil.getLegendData(!1,void 0,void 0,void 0,void 0,t.colors,0,"heatmap"===n,void 0,q).legend;else if(t.legend=CrmChartUtil.getLegendData("true",!1,void 0,"center","bottom",t.colors,0,!0,void 0,q,void 0,void 0,ZChartRenderer.legendShowAs).legend,"heatmap"===n){if(t.legend.events={enabled:!1},t.legend.filter={enabled:!1},t.component_props.visualization_props.aggregate_format&&t.component_props.visualization_props.aggregate_format.length&&(P||0===P)){A=t.component_props.visualization_props.aggregate_format[0].type,T=t.component_props.visualization_props.aggregate_format[0].decimal_places;t.legend.colorBand={stops:[L,P]};var $=parseFloat(ZChartRenderer.formatTickLabels(P,void 0,void 0,void 0,A,T));$=ZChartRenderer.applyFormatSuccessor(P,$,A);var Q=parseFloat(ZChartRenderer.formatTickLabels(L,void 0,void 0,void 0,A,T));Q=ZChartRenderer.applyFormatSuccessor(L,Q,A),t.legend.colorBand.labels=[Q,$],L!==P&&(t.legend.colorBand.minRange=L)}t.legend.colorAxis={reversed:!0},t.legend.hAlign="right",t.legend.vAlign="center",t.legend.layout="vertical",t.legend.itemHoverStyle={type:"triangleUp",showOnDataHover:!0,toolTip:{enabled:!1}},t.chart.plot.datalabels.fontSize=10,t.chart.axes.xaxis.ticklabel.alignMode="rotate(-45)"}t.is_pitch_prescriptor&&(t.legend.events={click:ZChartRenderer.legendClickForPrescriptor})},setCategoriesForChart:function(t,e,n,a){for(var r=0;r<n;r++){var o=t.component_chunks[0].vertical_groupings[r],i=o.value||0===o.value?"null"===o.value&&"null"===o.label?'"null"':o.value:""===o.label||null===o.value?null:o.label,l=null!==i?$ESAPI.encoder().encodeForHTML(i+""):null;l=l&&l.includes("&#x25;")?l.replaceAll("&#x25;","%"):l,a.push(l)}},legendHighlightMethod:function(t){var e=t.seriesColor[0];return{fill:$ZC.get("color.toneColor")(e,.3,"brighter",d3.hsl)}},legendShowAs:function(t,e,n){var a=I18n.getMsg("None"),r=n.userdata.seriesLabels,o=ZChartRenderer.getEncodedHtmlText(t.seriesname+"");return o=r&&r[o]?r[o]:o,"<tspan>"+(o=null===t.seriesValue||"false"===o||""===o?a:$("<div/>").text(o).html())+"</tspan>"},datalabelEvents:function(t,e){var n={highlighter:{pie:{highlight:function(t,e,n){ZChartRenderer.setEventMouseMoveMethodForPie(t,e,n)},reset:function(t,e,n){ZChartRenderer.setEventMouseOutMethodForPie(t,e,n)}},funnel:{highlight:function(t,e,n){n.renderer[0].defaultMouseOverFunc(e,0,e.itemIndex)},reset:function(t,e,n){n.renderer[0].defaultMouseOutFunc(e,0,e.itemIndex)}}},tooltipShow:function(t,e){var n=e.seriesColor[t.itemIndex%e.seriesColor.length],a=d3.mouse(e.svg.node()),r=event.clientX,o=event.clientY,i={left:r,top:o,dLeft:a[0]-r,dTop:a[1]-o},l=ZChartRenderer.tooltipContent(event,t,e);e.eventHandler.tooltipElement.show(e,i,l,!1,{color:n})},tooltipHide:function(t,e){e.eventHandler.tooltipElement.hide()},getData:function(t,e,n){return"pie"===n.chartTypes[0].name?{actData:$ZC.get("utils.simpleClone")(n.renderer[0].data[e].data),metaInfo:n.userdata.metadata.columns,itemIndex:e}:{actData:$ZC.get("utils.simpleClone")(t.data),metaInfo:n.userdata.metadata.columns,itemIndex:n.seriesdata[0].data[0].length-1-e}}},a={mousemove:function(a,r){var o=$L("crm-chart-view")[0];if($("#analyticalPageContainer").hasClass("grid_editMode")||$("#editPageHeader").hasClass("editPageHeader"))e.staticPaneSVG.select(".labelholder").selectAll("text").style("cursor","default");else{var i=n.getData(a,r,e),l=e.chartTypes[0].name;n.highlighter[l].highlight(t,i,e),n.tooltipShow(i,e),!o||o.getData("isAvailable")||e.staticPaneSVG.select(".labelholder").selectAll("text").style("cursor","default")}},mouseout:function(a,r){var o=n.getData(a,r,e),i=e.chartTypes[0].name;n.highlighter[i].reset(t,o,e),n.tooltipHide(o,e)},click:function(a,r){if(!$("#analyticalPageContainer").hasClass("grid_editMode")&&!$("#editPageHeader").hasClass("editPageHeader")){var o=n.getData(a,r,e),i=e.chartTypes[0].name;n.highlighter[i].reset(t,o,e),n.tooltipHide(o,e);var l=o.metaInfo.length;for(r=0;r<l;r++)o.metaInfo[r].value=o.actData[r];var s={data:o.metaInfo,point:o.actData,itemIndex:o.itemIndex},c=$L("crm-chart-view")[0];if(c)c.getData("isAvailable")&&c.component.getListReport(c.component,s,e,!0);else ZChartRenderer.fetchRecords(e.eventHandler.targetEvent,s,e,!0)}}};e.staticPaneSVG.select(".labelholder").selectAll("text").style("pointer-events",e.userdata.onLoadEventState?"all":"none").style("cursor",e.userdata.onLoadEventState?"pointer":"default").on("mousemove",e.userdata.onLoadEventState?a.mousemove:{}).on("mouseout",e.userdata.onLoadEventState?a.mouseout:{}).on("click",e.userdata.onLoadEventState?a.click:{})},getEncodedHtmlText:function(t){var e=$(".AD_runTimeTextUse");return e.length>1?e.eq(0).html(t).text():e.length>0?e.html(t).text():t},getChartData:function(t,e,n){for(var a=[],r=I18n.getMsg("None"),o=t.component_chunks[0].vertical_groupings.length,i=t.component_chunks[0].aggregate_column_info.length,l=i>3,s=0;s<o;s++){var c=t.component_chunks[0].vertical_groupings[s],u=c.label&&"-"===c.label&&null===c.value?r:c.label+"",d=c.value||0===c.value?"null"===c.value&&"null"===u?'"null"':c.value:""===c.label||null===c.value?null:c.label;d=null!==d?$ESAPI.encoder().encodeForHTML(d+""):null;for(var h=0;h<i;h++){if(!a[h]){var f=[h,0];n?f=[0,h]:"trends"===t.component_type&&(f=l?h<2?[1,h]:[0,h-2]:[0,h]);var p=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[h].label+"");a[h]={seriesname:i>1?p:this.getEncodedHtmlText(p),type:e,data:[],yaxiscolumnorder:f},a[h].data[0]=[]}var g,v,m=t.component_chunks[0].data_map[c.key].aggregates[h];"Blueprints.Time_taken_for_Transition"===t.component_chunks[0].aggregate_column_info[h].name&&(m.label=Utils.convertTimeInDoubleToReadableForm(m.value/6e4)),m?null===m.value?(g=0,v=m.label):(g=m.value,v=m.label):(g=0,v=0);var y=[d=d&&d.includes("&#x25;")?d.replaceAll("&#x25;","%"):d,g,v,u],b=$ESAPI.encoder().encodeForHTML(u+"");"pie"!==e&&"donut"!==e&&"funnel"!==e||(b=(b=this.getEncodedHtmlText(b)).replaceAll(/\s\s+/g," "),y.push($("<div/>").text(b).html())),a[h].data[0].push(y)}}return a},processDataForTrends:function(t,e){for(var n="decrease"===e,a=t.length,r=a>3,o=0;o<a;o++){var i=r?o:o+2;r&&o<2&&(t[o].hideInLegend=!0),t[o].color=CrmChartRenderer.trendsColor[i]}for(var l=t[a-1].data[0],s=t[r?2:0].data[0],c=l.length,u=0;u<c;u++){var d=l[u][1];(n?d>30:d<-30)?(l[u][1]=s[u][1],l[u][2]=s[u][2]):(l[u][1]=null,l[u][2]=null)}},setPlotOptions:function(t,e,n){var a;switch(t){case"bar":a=CrmChartUtil.getPlotOptionForBar("stacked"===e[1],3===e.length?"percent":void 0,"stacked"!==e[1],3===e.length?"percent":function(t){return t[t.length-2]},!!n.isColorEnabledField);break;case"line":a=CrmChartUtil.getPlotOptionForLine("monotone",(function(t){return t[t.length-2]}));break;case"funnel":a=CrmChartUtil.getPlotOptionForFunnel();break;case"area":a=CrmChartUtil.getPlotOptionForArea("monotone","pointTween",(function(t){return t[t.length-2]}));break;case"heatmap":a=CrmChartUtil.getPlotOptionForHeatMap("{{val(4)}}",n.colors[1],!1);break;case"pie":case"donut":a=CrmChartUtil.getPlotOptionForPie("donut"===e[0]?"65%":void 0,!0,!1,["{{val(4)}}","{{val(2)}} ({{per(1)}})"],0);break;case"bullet":a=CrmChartUtil.getPlotOptionForBullet(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,(function(t){return t[t.length-2]}));break;case"bubble":a=CrmChartUtil.getPlotOptionForBubble(!1)}return a},tooltipContent:function(t,e,n){var a,r=n.userdata.component_props.visualization_props.type,o=I18n.getMsg("None"),i=n.userdata.seriesLabels;if(Array.isArray(e)){var l=3===r.split("_").length;a=null===e[0].actData[0]?ZChartRenderer.getEncodedHtmlText(e[0].actData[3]):e[0].actData[3];for(var s="<b>"+(a=null===e[0].actData[0]?o:$ESAPI.encoder().encodeForHTML(a))+'</b><div class="pR pR15 oA" style="width:auto;"><table><tbody>',c=e.length-1;c>=0;c--){var u=e[c];if("spline"===r&&n.userdata.component_chunks[0].grouping_column_info.length<2)u.actData[2]=u.actData[2]?u.actData[2]:0,s+='<tr><td class="vaT"><span style="color:'+n.seriesColor[u.actData.seriesIndex]+'" class="p0 mR3"></span></td><td class="vaT"><span class="dIB maxW300 crmEllipticText p0 vaT">'+u.metaInfo[1].columnname+' : </span><span class="dIB p0 mL5 vaT">'+u.actData[2]+(l?" ("+u.actData.y.toFixed(1)+"%)":"")+"</span></td></tr>";else if(u.actData[2]||"spline"===r){u.actData[2]=u.actData[2]?u.actData[2]:0,h=i[h=u.metaInfo[u.metaInfo.length-1].value]?$ESAPI.encoder().encodeForHTML(i[h]):h,a=null===(a=ZChartRenderer.getEncodedHtmlText(h))||"false"===a||""===a?o:$ESAPI.encoder().encodeForHTML(a),s+='<tr><td class="vaT"><span style="color:'+n.seriesColor[u.actData.seriesIndex]+'" class="p0 mR3"></span></td><td class="vaT"><span class="dIB maxW300 crmEllipticText p0 vaT">'+a+' : </span><span class="dIB p0 mL5 vaT">'+u.actData[2]+(l?" ("+u.actData.y.toFixed(1)+"%)":"")+"</span></td></tr>"}}return s+="</tbody></table></div>"}var d=e.metaInfo[1].columnname,h=e.actData[2];if("areaspline"===r){var f=ZChartRenderer.getEncodedHtmlText(e.metaInfo[e.metaInfo.length-1].value+"");d=$ESAPI.encoder().encodeForHTML(i[f])}return d=null===d?o:ZChartRenderer.getEncodedHtmlText(d)===e.metaInfo[1].columnname?d:$ESAPI.encoder().encodeForHTML(d),h=h||0,"<b>"+ZChartRenderer.getEncodedHtmlText(d)+"</b></br>"+$ESAPI.encoder().encodeForHTML(e.actData[3])+" : "+h},customToolTipForLine:function(t,e,n){if(Array.isArray(e)){var a=3===n.userdata.component_props.visualization_props.type.split("_").length,r="<b>"+$ESAPI.encoder().encodeForHTML(e[0].actData[3])+"</b>";r+='<div class="pR pR15 " style="width:auto;"><table><tbody>';for(var o=e.length-1;o>=0;o--){var i=e[o];void 0===i.actData[2]?(i.actData[2]=0,r+='<tr><td class="vaT"><span style="color:'+n.seriesColor[i.actData.seriesIndex]+'" class="p0 mR3"></span></td><td class="vaT"><span class="dIB maxW300 crmEllipticText p0 vaT">'+i.metaInfo[1].columnname+' : </span><span class="dIB p0 mL5 vaT">'+i.actData[2]+(a?" ("+i.actData.y.toFixed(1)+"%)":"")+"</span></td></tr>"):r+='<tr><td class="vaT"><span style="color:'+n.seriesColor[i.actData.seriesIndex]+'" class="p0 mR3"></span></td><td class="vaT"><span class="dIB maxW300 crmEllipticText p0 vaT">'+i.metaInfo[1].columnname+' : </span><span class="dIB p0 mL5 vaT">'+i.actData[2]+(a?" ("+i.actData.y.toFixed(1)+"%)":"")+"</span></td></tr>"}return r+="</tbody></table></div>"}var l=e.metaInfo[1].columnname;return"<b>"+$ESAPI.encoder().encodeForHTML(l)+"</b></br>"+$ESAPI.encoder().encodeForHTML(e.actData[3])+" : "+$ESAPI.encoder().encodeForHTML(e.actData[e.actData.length-2])},pointHighlighterJson:{mark:"point",selector:".point1",config:{},properties:{styles:{}},anime:{enter:{size:{from:0,to:5}},update:{duration:100,size:{from:5,to:15}}}},pointHighlighter:function(t,e){if(e.userdata.needToLoad&&null!==e.userdata.actualLastPoint){var n=e.userdata.seriesIndex,a=e.plotarea.left+e.seriesdata[n].data[0][e.userdata.actualLastPoint]._data()._x,r=e.plotarea.top+e.seriesdata[n].data[0][e.userdata.actualLastPoint]._data()._y;ZChartRenderer.pointHighlighterJson.config.x=function(){return a},ZChartRenderer.pointHighlighterJson.config.y=function(){return r},ZChartRenderer.pointHighlighterJson.properties.styles.fill=0===n?"#FFA500":1===n?"#338CF0":"#FD79A8";var o=d3.selectAll(".qualitativeGroupHolder");$ZC.get("mark.render")(ZChartRenderer.pointHighlighterJson,o)}},legendClickForPrescriptor:function(t,e,n){var a=e.data,r=e.index,o=n.isAxisCategory||n.isNonAxisMultiSeriesCategory||n.dataObject.isPolarAxisCategory?n.seriesdata[r]:n.seriesdata[0].data[0][r];n.legend.component.toggleItemNUpdateChart(null,o,r,n.systemConf.legend),a.seriesname===n.userdata.selectedPoint?n.userdata.legendCliked?(ZChartRenderer.pointHighlighter(t,n),n.staticPaneSVG.selectAll(".qualitativeGroupHolder").style("display",null),n.userdata.legendCliked=!1):(n.staticPaneSVG.selectAll(".qualitativeGroupHolder").style("display","none"),n.userdata.legendCliked=!0):n.userdata.legendCliked||(ZChartRenderer.pointHighlighter(t,n),n.staticPaneSVG.selectAll(".qualitativeGroupHolder").style("display",null)),n.userdata.prevClick=a.seriesname},fetchReasons:function(t,e,n){n.userdata.actualLastPoint=e.itemIndex,n.userdata.seriesIndex=e.seriesIndex;var a=e.data[4].value;n.userdata.selectedPoint=a;var r=n.plotarea.left+e.x,o=n.plotarea.top+e.y;ZChartRenderer.pointHighlighterJson.config.x=function(){return r},ZChartRenderer.pointHighlighterJson.config.y=function(){return o},ZChartRenderer.pointHighlighterJson.properties.styles.fill="Actual"===a?"#338CF0":"Boosting"===a?"#FD79A8":"#FFA500";var i=d3.selectAll(".qualitativeGroupHolder");$ZC.get("mark.render")(ZChartRenderer.pointHighlighterJson,i);var l=$L("crm-analytics-pitch-prescriptor")[0];l.component.methods.showFullDetailsForPoint(e.point[3],a,l,e.itemIndex,e.seriesIndex)},fetchRecords:function(t,e,n,a){var r=a?$L(n.container._groups[0]):$L(renderingUtils.getTargetElem(t)),o=r.closest("div.analyticComponent");o=o.length?o:r.closest("div.dashBrdContent");var i,l,s,c=!($("#homePageView").length>0)&&newDashbordsEnabled,u=c?r.closest(".analytics_hierarchyChartSec"):r.closest(".heirachicalContent"),d=!1;if(!o.length&&u.length){var h=u.attr("data-compid");o=(o=$("#"+h)).length?o:$('[data-dashletid="'+h+'"]'),d=!0,i=c?$L(".analytics_herirar_tabHead").attr("data-type"):$L(".AD_HD_chartBtnSlct").attr("data-type"),l=(I=c?JSON.parse($L(".analytics_hierarchyTreeSec_inner").attr("data-params")):JSON.parse($L(".selectedProfile").attr("data-params"))).userId,s=I.name?I.name:I.userId}else if(!o.length)return;var f,p=[],g=n.userdata,v=g.report_id,m="heatmap"===g.component_props.visualization_props.type;f=m?{label:e.point[e.point.length-1],value:null!==e.point[3].group_values[0]?ZChartRenderer.getEncodedHtmlText(e.point[3].group_values[0]):null}:g.component_chunks[0].vertical_groupings[e.itemIndex];var y=CrmChartRenderer.get_filter_json(g,0,f),b=g.component_chunks[0].aggregate_column_info[0].aggregations[0]+"##"+g.component_chunks[0].aggregate_column_info[0].name;("bucket"!==y._custom_type&&(v||newDashbordsEnabled)&&(y.label=f.label),p.push(y),"zone"===g.component_type||"quadrant"===g.component_type)&&n.eventHandler.eventManager.selectionManager.surround.forEach((t=>{e.itemIndex!==t.itemIndex&&(f=g.component_chunks[0].vertical_groupings[t.itemIndex],y=CrmChartRenderer.get_filter_json(g,0,f),(v||newDashbordsEnabled)&&(y.label=f.label),p.push("or"),p.push(y))}));var x,C=e.data,k=g.component_props.visualization_props.type,w=g.seriesLabels;if(C.length>3&&(-1!=C[C.length-1].columnindex||m)&&"zone"!==g.component_type&&"quadrant"!==g.component_type&&"donut"!==k&&"pie"!==k&&"funnel"!==k){var _;if(m)f={label:e.point[e.point.length-1],value:"-"!==e.point[3].group_values[0]?ZChartRenderer.getEncodedHtmlText(e.point[3].group_values[0]):null},_={label:x=w&&w[e.point[1]]?w[e.point[1]]:e.point[1],value:null===e.point[3].group_values[1]||""===e.point[3].group_values[1]?null:e.point[3].group_values[1]};else{var S=n.userdata.seriesdata.chartdata[e.seriesIndex].seriesValue;x=C[C.length-1].value,_={label:x=w&&w[x]?w[x]:x,value:null===S||""===S?null:ZChartRenderer.getEncodedHtmlText(S)}}'"null"'===_.value&&(_={label:"null",value:"null"}),y=CrmChartRenderer.get_filter_json(g,1,_),p.push("and"),"bucket"!==y._custom_type&&(v||newDashbordsEnabled)&&(y.label=_.label),p.push(y)}var O=C[2].value;if(v&&g.id){P=3===p.length?{group_operator:"AND",group:[p[0],p[2]]}:y;var A={column:g.component_chunks[0].aggregate_column_info.length<=1?g.component_chunks[0].aggregate_column_info[0].label:g.component_chunks[0].aggregate_column_info[e.seriesIndex].label,value:O};ZChartRenderer.setForumulaInParams(P,A,!0),A.criteria=JSON.stringify(P);var T=Lyte.Router.getURL({route:"crm.tab.newReports.records",dynamicParams:[g.report_id],queryParams:A});return networkUtils.openUrl(T,"_blank",""),void window.event.stopPropagation()}if(v&&!g.id){var P,E;d&&"personal"===i&&(E={field:{api_name:"Owner",ui_type:8},comparator:"equal",value:{name:s,id:l},label:s});var L=[];if(3===p.length){if(P={group_operator:"AND",group:L=[p[0],p[2]]},E){P={group_operator:"AND",group:[P,E]}}}else 1===p.length&&E?(L=[p[0]],E&&L.push(E),P=2===L.length?{group_operator:"AND",group:L}:y):P=y;var M={column:g.component_chunks[0].aggregate_column_info.length<=1?g.component_chunks[0].aggregate_column_info[0].label:g.component_chunks[0].aggregate_column_info[e.seriesIndex].label,value:O};ZChartRenderer.setForumulaInParams(P,M,!0),M.criteria=JSON.stringify(P),d&&"team"===i&&(M.hierarchy_id=l);var D=document.querySelector("crm-report-view");D&&(D=D.component,M.date_filter=JSON.stringify(D.getData("report").sub_reports[0].date_filter),M.apply_date_filter=!0);T=Lyte.Router.getURL({route:"crm.tab.newReports.records",dynamicParams:[g.report_id],queryParams:M});return networkUtils.openUrl(T,"_blank",""),void window.event.stopPropagation()}if(g.report_id){if(v){var I={};m||(O=C[1].value),I.module=g.component_chunks[0].aggregate_column_info[0].name.split(".")[0],I.criteria=JSON.stringify(p),I.summaryCol=b,I.summaryValue=O,I.action="getDetails";var R=o.attr("id");if(R&&"chartdiv"!==R&&"parentChartDiv"!==R)I.dbItemId=R;else if(document.NewReport&&validationUtils.formValidate()){var z=commonUtils.formData2QueryString(document.NewReport),j=objectUtils.parseURLParamString(z);if(j.stdDateFilterField){var F;if("Age in Days"===j.stdDateFilter||"Due in Days"===j.stdDateFilter){var B=j.stdageindays;B&&(F="stdDateFilter="+(B=j.stdageindayscondition+"###${AGE"+("Age in Days"===j.stdDateFilter?B:"+"+B)+"}"))}else j.startdate&&j.enddate&&(F="startDate="+j.startdate+",endDate="+j.enddate+",stdDateFilter="+crmReports.escapeSplChars(j.stdDateFilter));F&&(I.stdDateFilter=F+",stdDateFilterField="+crmReports.escapeSplChars(j.stdDateFilterField))}}T=Lyte.Router.getURL({route:"crm.tab.reports.records",dynamicParams:[g.report_id?g.report_id:1],queryParams:I})}else{d&&"personal"===i&&(p.push("and"),p.push({api_name:"Owner",comparator:"equal",value:l}));I={action:"fetchRecords",dbItemId:o.attr("id"),criteria:JSON.stringify(p),summaryCol:b,summaryValue:O};d&&"team"===i&&(I.drill_ll_down=JSON.stringify({drill_by:"user",hierarchy_filter_id:l})),d&&(I.from_hierarchy=!0);T=Lyte.Router.getURL({route:"crm.tab.reports.records",dynamicParams:[g.report_id?g.report_id:1],queryParams:I})}networkUtils.openUrl(T,"_blank","")}else{var H,N,W=o.data("params");W.dashboardId?(H=W.dashboardId,N=W.dashletId):(H=W.dbId,N=o.attr("id"),"undefined"===H&&(H=Lyte.registeredMixins["crm-new-analytics-utils"].getAnalyticsIdFromCache(N))),d&&"personal"===i&&(p.push("and"),p.push({api_name:"Owner",comparator:"equal",value:l,label:s}));var V;I={};d&&"team"===i&&(I.drill_down=JSON.stringify({drill_by:"user",hierarchy_filter_id:l})),newDashbordsEnabled&&void 0!==g.compFltrOptionSaved&&!g.compFltrOptionSaved&&g.component_preferences&&null!==g.component_preferences.filters&&localStorage.setItem("component_filter_"+g.id,JSON.stringify(g.component_preferences.filters)),V=3===p.length?{group_operator:"AND",group:[p[0],p[2]]}:y,ZChartRenderer.setForumulaInParams(V,I,!1),p=ZChartRenderer.optimizeFilterArray(p),I.criteria=JSON.stringify(p);T=Lyte.Router.getURL({route:newDashbordsEnabled?"crm.tab.newDashboards.dashboardId.records":"crm.tab.dashboards.dashboardId.records",dynamicParams:[H,N],queryParams:I});networkUtils.openUrl(T,"","")}window.event.stopPropagation()},optimizeFilterArray:function(t){var e=[];if(t.length<1)return t;for(var n=t.length,a=0;a<n;a++){if("string"!=typeof t[a])if(t[a].group)e=e.concat(ZChartRenderer.breakDownCriteriaIntoArray(t[a]));else{var r={api_name:t[a].api_name,comparator:t[a].comparator,label:t[a].label?""+t[a].label:""+t[a].value,value:t[a].value,field_label:t[a].field_label};"formula"===t[a]._custom_type&&(r._custom_type=t[a]._custom_type),e=e.concat([r])}else"string"==typeof e[e.length-1]&&e.pop(),e=e.concat([t[a]]);"string"!=typeof e[e.length-1]&&(e[e.length]="AND")}return"string"==typeof e[e.length-1]&&e.pop(),e},breakDownCriteriaIntoArray:function(t){var e=[];if(t.group)for(var n=t.group.length,a=0;a<n;a++){var r=ZChartRenderer.breakDownCriteriaIntoArray(t.group[a]);a%2==0&&(r[r.length]=t.group_operator),e=e.concat(r)}else if("string"==typeof t)e[0]=t;else{var o={api_name:t.api_name,comparator:t.comparator,label:t.label?""+t.label:""+t.value,value:t.value,field_label:t.field_label};"formula"===t._custom_type&&(o._custom_type=t._custom_type),e[0]=o}return e},setForumulaInParams:function(t,e,n,a){if(t.group){l=[];for(var r=(t=a?t[0]:t).group.length,o=0;o<r;o++){var i=t.group[o];if(i.group)this.setForumulaInParams(i,e,n,a);else if(n?i.field._custom_type&&i.field._custom_type.includes("formula"):i._custom_type&&i._custom_type.includes("formula")){s=i.label!==i.value?"MONTH_IN_YEAR":"DAY_IN_MONTH";l.push({reference_id:i.field?i.field.api_name:i.api_name,expression:`${s}(\${${i.formula_api_name}})`}),delete i.formula_api_name}}l.length&&(e.formula=JSON.stringify(l))}else if(t=a?t[0]:t,n?t.field._custom_type&&t.field._custom_type.includes("formula"):t._custom_type&&t._custom_type.includes("formula")){var l=[],s=t.label!==t.value?"MONTH_IN_YEAR":"DAY_IN_MONTH";l.push({reference_id:t.field?t.field.api_name:t.api_name,expression:`${s}(\${${t.formula_api_name}})`}),delete t.formula_api_name,l.length&&(e.formula=JSON.stringify(l))}},setForumulaInParamsForTable:function(t,e){var n=t.length,a=[];if(n<=1){if((t=t[0])._custom_type&&t._custom_type.includes("formula")){var r=t.label!==t.value?"MONTH_IN_YEAR":"DAY_IN_MONTH";a.push({reference_id:t.api_name,expression:`${r}(\${${t.formula_api_name}})`}),t._custom_type="formula",delete t.formula_api_name}}else for(var o=0;o<n;o++){var i=t[o];if(i._custom_type&&i._custom_type.includes("formula")){r=i.label!==i.value?"MONTH_IN_YEAR":"DAY_IN_MONTH";a.push({reference_id:i.api_name,expression:`${r}(\${${i.formula_api_name}})`}),i._custom_type="formula",delete i.formula_api_name}}a.length&&(e.formula=JSON.stringify(a))},setSeriesDataForQuadrant:function(t){for(var e=[],n=t.component_chunks[0].vertical_groupings.length,a=t.component_chunks[0].aggregate_column_info.length,r=t.component_props.visualization_props.type,o="bubble",i=$ESAPI.encoder().encodeForHTML(I18n.getMsg("None")),l=[],s=["x","y","z"],c=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[1].label+""),u=0;u<n;u++){for(var d=t.component_chunks[0].vertical_groupings[u],h=0;h<a;h++){e[0]||(e[0]={seriesname:this.getEncodedHtmlText(c),type:o,data:[]});var f=t.component_chunks[0].data_map[d.key].aggregates,p=null!==f[0].value&&null!==f[1].value&&(void 0===f[2]||null!==f[2].value);if(p){if(!e[0].data[u]){var g=d.label&&"-"!==d.label?$ESAPI.encoder().encodeForHTML(d.label+""):i;g=this.getEncodedHtmlText(g);var v=d.value?d.value:g;e[0].data[u]=[v]}e[0].data[u].push(f[h].value),e[0].data[u][s[h]+"_label"]=f[h].label}else if(0===h&&!p){t.component_chunks[0].vertical_groupings=t.component_chunks[0].vertical_groupings.slice(0,u).concat(t.component_chunks[0].vertical_groupings.slice(u+1,t.component_chunks[0].vertical_groupings.length)),n--,u--;break}}p&&(e[0].data[u].push(1),e[0].data[u].push(g),l.push(v))}var m=this.setPlotOptions(o,void 0,t),y=ZChartRenderer.getThresholdValuesForQuadrant(t,e);t.seriesdata=CrmChartUtil.getSeriesData(e).seriesdata;var b=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[0].label+""),x=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[1].label+"");t.chart=CrmChartUtil.getChartAxesData(!1,!0,!0,this.getEncodedHtmlText(b),void 0,!0,!0,!1,this.getEncodedHtmlText(x),!1,!0,y,void 0,l,m,void 0,void 0,!1,ZChartRenderer.fetchRecords,void 0,t.animationNeeded).chart,"advanced"===r&&(t.seriesdata.chartdata[0].color=ZChartRenderer.isDarkThemeEnabled()?"#126C1A":"#2d3",t.chart.plot.datalabels.handleOverlapping=!1),t.legend=CrmChartUtil.getLegendData(!1,!1,void 0,"center","bottom",0).legend,"advanced"===t.component_props.visualization_props.type?t.legend.size={enabled:!1}:t.legend.size={enabled:!1,minSize:1,maxSize:8}},setSeriesDataForZone:function(t){var e=[],n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,i=t.component_chunks[0].vertical_groupings.length,l=t.component_chunks[0].aggregate_column_info.length,s="bubble",c=$ESAPI.encoder().encodeForHTML(I18n.getMsg("None")),u=[],d=["x","y","z"];const h=ZChartRenderer.isDarkThemeEnabled();for(var f=0;f<i;f++){for(var p=t.component_chunks[0].vertical_groupings[f],g=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[1].label+""),v=0;v<l;v++){e[0]||(e[0]={seriesname:this.getEncodedHtmlText(g),type:s,data:[]});var m=t.component_chunks[0].data_map[p.key].aggregates,y=null!==m[0].value&&null!==m[1].value&&(void 0===m[2]||null!==m[2].value);if(0===v&&y?(m[v].value>n&&(n=m[v].value),m[v].value<a&&(a=m[v].value)):1===v&&y&&(m[v].value>r&&(r=m[v].value),m[v].value<o&&(o=m[v].value)),y){if(!e[0].data[f]){var b=p.label&&"-"!==p.label?$ESAPI.encoder().encodeForHTML(p.label+""):c;b=this.getEncodedHtmlText(b);var x=p.value?p.value:b;e[0].data[f]=[x]}e[0].data[f].push(m[v].value),e[0].data[f][d[v]+"_label"]=m[v].label}else if(0===v&&!y){t.component_chunks[0].vertical_groupings=t.component_chunks[0].vertical_groupings.slice(0,f).concat(t.component_chunks[0].vertical_groupings.slice(f+1,t.component_chunks[0].vertical_groupings.length)),i--,f--;break}}y&&(e[0].data[f].push(1),e[0].data[f].push(b),u.push(x))}var C,k,w,_,S,O=[],A=["Low performer","Avg performer","Top performer","Game changer"],T=h?[[["#375179","#2D3D58","#293240","#2B2B2B"],["#696025","#655F38","#4E4E37","#2B2B2B"]],[["#2B2B2B","#293240","#2D3D58","#375179"],["#2B2B2B","#4E4E37","#655F38","#696025"]]]:[[["#76ABFF","#A1C4FC","#DBE8FD","#F7F7F7"],["#FFEA61","#FFF192","#FFFFB7","#F7F7F7"]],[["#F7F7F7","#DBE8FD","#A1C4FC","#76ABFF"],["#F7F7F7","#FFFFB7","#FFF192","#FFEA61"]]],P="custom"===t.component_props.zone_split.type?t.component_props.zone_split.x:(n-a)/4,E="custom"===t.component_props.zone_split.type?t.component_props.zone_split.y:(r-o)/4,L=t.component_props.zone_split.objective.x,M=t.component_props.zone_split.objective.y;"increase"===L?(C=n-4*P<a?n-4*P:a,k=n):(C=a,k=a+4*P>n?a+4*P:n),"increase"===M?(w=r-4*E<o?r-4*E:o,_=r):(w=o,_=o+4*E>r?o+4*E:r);for(f=1;f<=4;f++)for(v=0;v<=1;v++){var D=[];if("increase"===L&&"increase"===M){S=0==v?f-1:f;var I=[.99,.9,.81,.7,.45,.05],R=[.02,.2,.4,.6,.88,.99];D.push(["",C,w]),D.push(["",C,_]),D.push(["",k-this.findValueByOpr(f,P,L),_]),D.push(["",k-this.findValueByOpr(S,P,L),_]);for(var z=0;z<=5;z++)D.push(["",k-I[z]*this.findValueByOpr(S,P,L),_-R[z]*this.findValueByOpr(S,E,M)]);D.push(["",k,_-this.findValueByOpr(S,E,M)]),D.push(["",k,w]),D.push(D[0])}if("decrease"===L&&"increase"===M){S=0==v?f-1:f;I=[.05,.2,.72,.98],R=[.99,.96,.55,.05];D.push(["",C,w]),D.push(["",C,_-this.findValueByOpr(S,E,M)]),D.push(["",C,_-this.findValueByOpr(S,E,M)]);for(z=0;z<=3;z++)D.push(["",C+I[z]*this.findValueByOpr(S,P,M),_-R[z]*this.findValueByOpr(S,E,M)]);D.push(["",C-this.findValueByOpr(S,P,L),_]),D.push(["",k,_]),D.push(["",k,w]),D.push(D[0])}if("decrease"===L&&"decrease"===M&&0===v){S=5-f;I=[.55,.99],R=[.75,.02];if(1===f&&P&&E)D.push(["",C,w]),D.push(["",C,_]),D.push(["",k,_]),D.push(["",k,w]);else{D.push(["",C,w-this.findValueByOpr(S,E,M)]);for(z=0;z<=1;z++)D.push(["",C-I[z]*this.findValueByOpr(S,P,L),w-R[z]*this.findValueByOpr(S,E,M)]);D.push(["",C-this.findValueByOpr(S,P,L),w])}D.push(["",C,w]),D.push(D[0])}if("increase"===L&&"decrease"===M&&0===v){S=4-f+1;I=[.55,.05],R=[.75,.99];if(1===f&&P&&E)D.push(["",C,w]),D.push(["",C,_]),D.push(["",k,_]),D.push(["",k,w]);else{D.push(["",k-this.findValueByOpr(S,P,L),w]);for(z=0;z<=1;z++)D.push(["",k-I[z]*this.findValueByOpr(S,P,L),w-R[z]*this.findValueByOpr(S,E,M)]);D.push(["",k,w-this.findValueByOpr(S,E,M)])}D.push(["",k,w]),D.push(D[0])}var j="decrease"===M?1:0;1===f&&0===v?O=[{data:D,name:A[f-1],datalabels:{show:!1},type:"area",color:T[j][l-2][f-1],marker:{enabled:!0,states:{hover:{enabled:!1}}}}]:1===v&&"decrease"!==M?(O.push({data:D,type:"area",datalabels:{show:!1},color:T[0][l-2][3],marker:{enabled:!0,states:{hover:{enabled:!1}}}}),O.push({data:D,type:"area",datalabels:{show:!1},color:T[0][l-2][3],marker:{enabled:!0,states:{hover:{enabled:!1}}}})):0===v&&P&&E&&O.push({data:D,name:A[f-1],datalabels:{show:!1},type:"area",color:T[j][l-2][f-1],marker:{enabled:!0,states:{hover:{enabled:!1}}}})}O.push(e[0]);var F=t.component_props.visualization_props.type,B=this.setPlotOptions(s,void 0,t);t.seriesdata=CrmChartUtil.getSeriesData(O).seriesdata;var H=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[0].label+""),N=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[1].label+"");if(t.chart=CrmChartUtil.getChartAxesData(!1,!0,!0,this.getEncodedHtmlText(H),void 0,!0,!0,!1,this.getEncodedHtmlText(N),!1,!1,void 0,void 0,u,B,void 0,void 0,!1,ZChartRenderer.fetchRecords,void 0,t.animationNeeded).chart,t.chart.plot.plotoptions.area={mode:"monotone",events:{enabled:!1},datalabels:{show:!1},fillOpacity:1},"advanced"===F){const e=h?"#395D34":"#8DE683";t.chart.plot.plotoptions.bubble.marker={innerFillColor:e,outerFillColor:e,outerStrokeWidth:0},t.chart.plot.plotoptions.bubble.hoveroptions={innerFillColor:e,outerFillColor:e,innerFillOpacity:0,outerStrokeOpacity:0,innerStrokeWidth:0}}else{const e=h?"#B22B21":"#FF4032";t.chart.plot.plotoptions.bubble.marker={innerFillColor:e,outerFillColor:e,innerFillOpacity:1,outerFillOpacity:1,outerStrokeWidth:0},t.chart.plot.plotoptions.bubble.hoveroptions={innerFillColor:e,outerFillColor:e,innerFillOpacity:0,outerStrokeOpacity:0,innerStrokeWidth:0,outerFillOpacity:.5}}t.chart.clip="none",t.chart.marginTop=30,t.chart.axes.yaxis[0].minRange=w,t.chart.axes.xaxis.axisline={show:!1},t.chart.plot.plotoptions.area.animation={enabled:!1},t.legend=CrmChartUtil.getLegendData(!1,!1,void 0,"center","bottom",0).legend,"advanced"===t.component_props.visualization_props.type?t.legend.size={enabled:!1}:t.legend.size={enabled:!1,minSize:1,maxSize:8}},setSeriesDataForStage:function(t){var e=t.component_chunks[0].vertical_groupings.length,n=$ESAPI.encoder().encodeForHTML(I18n.getMsg("None")),a=[],r=this.getChartData(t,"bar");this.setCategoriesForChart(t,n,e,a);for(var o={},i=0;i<e;i++){var l=t.component_chunks[0].vertical_groupings[i],s=l.label&&"-"!==l.label?l.label:n,c=l.value||0===l.value?l.value:s;o[$ESAPI.encoder().encodeForHTML(c+"")]=$ESAPI.encoder().encodeForHTML(s)}t.categoryMap=o;var u=t.component_props.visualization_props.type;t.seriesdata=CrmChartUtil.getSeriesData(r).seriesdata,t.totalRecord=JSON.parse(JSON.stringify(t.seriesdata)).chartdata[0];var d,h={},f=t.totalRecord.data[0],p=f.length;for(i=0;i<p;i++)h[f[i][3]]=f[i][1];t.totalCountObj=h;const g=ZChartRenderer.isDarkThemeEnabled();if("stacked_bar"!==u){(d={show:!0,maxWidth:95,padding:15,fontSize:13}).showAs=function(t,e,n){let a=n.userdata,r=a.categoryMap,o=t[0];a.component_props.visualization_props.type;return"<tspan>"+r[o]+"</tspan>"}}var v=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].grouping_column_info[0].label+""),m=$ESAPI.encoder().encodeForHTML(t.component_chunks[0].aggregate_column_info[0].label+""),y="stacked_bar"!==u,b="stacked_bar"===u;if("stacked_bar"===u){(w=CrmChartUtil.getPlotOptionForBar(!0,"values",!0,void 0,!1,"middle",d)).bar.border.show=!1;var x=g?["6A5329"]:["#FDCB6E"];t.legend=CrmChartUtil.getLegendData("true",!1,void 0,"center","bottom",x,0,!0,void 0,void 0,!1).legend;t.chart=CrmChartUtil.getChartAxesData(!1,!0,!1,this.getEncodedHtmlText(v),void 0,!0,b,null,this.getEncodedHtmlText(m),!0,void 0,void 0,void 0,a,w,void 0,!0,void 0,void 0,void 0,t.animationNeeded,void 0,void 0,void 0,void 0,ZChartRenderer.xAxisShowAs,!0,y,{show:!0,color:"var(--stage_chart_110F0F)"},!1).chart,t.chart.height="auto"}else{var C=ZChartRenderer.setMouseMoveForStackedChart,k=ZChartRenderer.setMouseOutForStackedChart,w=CrmChartUtil.getPlotOptionForBar(!0,"values",!0,void 0,!1,"middle",d,.6);x="staircase_advanced"===u?g?["#1e1f22","#AE5152","#3B6A45","#1e1f22","#366363","#2F4E5A","#394E65","#1E5594"]:["white","#FD7778","#7CDF92","white","#85ECEB","#63A3BB","#82BBF8","#398EED"]:g?["#1e1f22","#AE5152","#3B6A45","#1e1f22","#6A5329"]:["white","#FD7778","#7CDF92","white","#FDCB6E"];t.legend=CrmChartUtil.getLegendData("true",!1,void 0,"center","bottom",x,0,!0,void 0,void 0,!1,7).legend,t.chart=CrmChartUtil.getChartAxesData(!1,!0,!1,void 0,void 0,!1,b,null,this.getEncodedHtmlText(m),!1,void 0,void 0,void 0,a,w,void 0,!0,void 0,void 0,void 0,t.animationNeeded,void 0,C,k,void 0,void 0,!0,y).chart,t.chart.axes.xaxis.ticklabel.fontSize=0,t.chart.width="auto",t.chart.scroll={categoryThickness:60}}t.chart.plot.plotoptions.bar.datalabels.showAs=ZChartRenderer.compactNumberLabelShowAs,t.chart.plot.events.cursor="default"},setPivotDataForStage:function(t){delete t.colors,delete t.chart.axes.xaxis.threshold;var e={"Record Count":I18n.getMsg("totalrecords"),won:I18n.getMsg("crm.livedesk.pot.won"),lost:I18n.getMsg("crm.livedesk.pot.lost"),delayedAndMoved:I18n.getMsg("crm.dashboard.moved.with.delay"),moved:I18n.getMsg("crm.dashboard.stage.moved"),current:I18n.getMsg("crm.dashboard.stage.stalled"),waiting:I18n.getMsg("Waiting"),unaccounted:I18n.getMsg("crm.pipeline.label.unaccounted")};t.seriesNameObj=e;var n=t.component_chunks&&t.component_chunks[1]&&t.component_chunks[1].vertical_groupings?t.component_chunks[1].vertical_groupings:void 0,a=n&&n.length>0?n.length:0,r=0,o=[],i=t.chart.axes.xaxis.categories,l=t.categoryMap;if(a>0)for(var s=t.component_chunks[1].data_map,c=0;c<a;c++)if("unaccounted"===n[c].value){var u=$ESAPI.encoder().encodeForHTML(e.unaccounted),d=s[n[c].key].aggregates[0];r=d.value?d.value:0;var h=d.label?d.label:0;o.push(u),i.push(u),l[u]=e.unaccounted,o.push(r),o.push(h),o.push(e.unaccounted);break}var f=t.seriesdata.chartdata,p=f.length,g={};for(c=0;c<p;c++){g[f[c].seriesname]=f[c]}var v=[],m={},y=0,b=t.component_props.visualization_props.type;const x=ZChartRenderer.isDarkThemeEnabled();if("stacked_bar"===b){delete t.tooltip.sharedSeriesInfo;var C=["Record Count","current","waiting","delayedAndMoved","moved","won","lost"],k=x?["#6A5329","#1E5594","#394E65","#2F4E5A","#366363","#3B6A45","#AE5152"]:["#FDCB6E","#398EED","#82BBF8","#63A3BB","#85ECEB","#7CDF92","#FD7778"],w=0,_=0;if(f){for(c=0;c<4;c++)if(0===w){(A={}).seriesname="col"+_;var S=[],O=t.totalRecord;O&&(delete O.yaxiscolumnorder,O.color=k[w],O.seriesname=e["Record Count"],S.push(O),o&&o.length>0&&S[0].data[0].push(o),A.data=S,A.yaxiscolumnorder=[_,0],_++,m[y]=e["Record Count"],y++,v.push(A)),w+=1,delete t.totalRecord}else{var A;(A={}).seriesname="col"+_;S=[];var T=C[w],P=C[w+1],E=g[T],L=g[P];if(E&&(E.color=k[w],E.seriesname=e[T],E.seriesValue=e[T],m[y]=e[T],y++,S.push(E)),L)L.color=k[w+1],L.seriesname=e[P],L.seriesValue=e[P],"waiting"===P&&o&&o.length>0&&L.data[0].push(o),m[y]=e[P],y++,S.push(L);else if("waiting"===P&&o&&o.length>0){var M={};M.seriesValue=e[P],M.seriesname=e[P],M.type=10,M.data=[];var D=[];D.push(o),M.data.push(D),M.color=k[w+1],m[y]=e[P],y++,S.push(M)}S&&S.length>0&&(A.data=S,A.yaxiscolumnorder=[_,0],_++,v.push(A)),w+=2}t.pivotIndexToLabel=m;var I=[];for(c=1;c<=_;c++)I.push([c]);t.metadata.axes.y=I}}else{var R=function(t,e){let n=e.userdata,a=t._data()._width,r=n.categoryMap,o=t[0],i=r[o],l=ZChartRenderer.getEncodedHtmlText(i),s=n.totalCountObj&&n.totalCountObj[l]?n.totalCountObj[l]:0,c=n.chart.axes.xaxis.categories,u=c.indexOf(o),d=u>=0?c[u+1]:void 0,h=d?r[d]:void 0,f=ZChartRenderer.getEncodedHtmlText(h),p=n.nextMovedObj&&n.nextMovedObj[l]&&n.nextMovedObj[l][f]?n.nextMovedObj[l][f]:void 0,g=p?p.value:0,v=Math.trunc(100*g/s),m=n.component_props.visualization_props.aggregate_format,y=m&&m[0]?m[0].type:void 0,b=p?p.label:y?ZChartRenderer.applyFormatSuccessor(0,0,y):0;return{batch:"conversionLinenotes",config:{conversionLine:{marker:{y:()=>-a-30,x:(e,n,a)=>(a.bandGap+t._data()._height)/2+10,angle:90,shape:"arrow-line",fillColor:"var(--stage_chart_48bae8)",strokeColor:"var(--stage_chart_48bae8)",dashStyle:"solid",lineCap:"round",events:{tooltipContent:function(){return i+" -> "+h+" : "+b+" ("+v+"%)"}}},label:{fontSize:13,y:()=>{let t=$ZC.utils.fontUtils.getTextWidth(b+" ("+v+"%)",13);return-a-50-t},x:()=>t._data()._height+24,text:()=>b+" ("+v+"%)"}}}}};if("staircase_basic"===b)e[(C=["Empty1","lost","won","Empty2","current"])[4]]=I18n.getMsg("totalrecords");else C=["Empty1","lost","won","Empty2","moved","delayedAndMoved","waiting","current"];v=[];var z=C.length;if(f){var j=t.maxScaleWinLossObj,F=t.maxScaleOfWinLoss,B=t.maxScaleOfBarChart,H=t.maxScaleOfleftBarObj;for(c=0;c<z;c++){var N=C[c];if("current"===N&&"staircase_basic"===b){var W=t.totalRecord;delete W.yaxiscolumnorder,W.seriesname=e[N],W.type="10",o&&o.length>0&&W.data[0].push(o),v.push(W)}else if("waiting"===N&&"staircase_advanced"===b)if(g[N]){g[N].seriesname=e[N],g[N].seriesValue=e[N];var V=g[N].data[0];o&&o.length>0&&V.push(o),v.push(g[N])}else{var Y={type:10,seriesname:e[N]?e[N]:N,seriesValue:e[N]?e[N]:N,data:[]};o&&o.length>0?Y.data.push(o):(Y.hideInLegend=!0,Y.plotoptions={events:{enabled:!1},datalabels:{show:!1}}),v.push(Y)}else if(g[N])g[N].seriesname=e[N],g[N].seriesValue=e[N],v.push(g[N]);else if("Empty1"===N||"Empty2"===N)this.populateEmptySeries(N,v,t,F,j,B,b,R,H,r);else{var U={type:10,seriesname:e[N]?e[N]:N,data:[],hideInLegend:!0,plotoptions:{events:{enabled:!1},datalabels:{show:!1}}};v.push(U)}}if(o&&o.length>0)H[e.unaccounted]=r}var G={},X="#chartdiv_"+t.divId;G.rightArrowParser={parent:X+" .qualitativeGroupHolder",parser:function(t,e){let n=e.data._data()._width,a={config:{x:()=>-n/2,y:()=>e.data._data()._height/2,angle:0,size:()=>.4*n>20?25:.4*n<15?15:.4*n,shape:"arrow-line",fillColor:"var(--stage_chart_48bae8)",strokeColor:"var(--stage_chart_48bae8)",dashStyle:"solid",lineCap:"round"}};return $ZC.get("marker.parser")(a)}},G.downArrowParser={parent:X+" .qualitativeGroupHolder",parser:function(t,e){let n=e.data._data()._width,a={config:{x:()=>-n-n,y:()=>e.data._data()._height+18,angle:90,size:20,shape:"arrow-line",fillColor:"var(--stage_chart_48bae8)",strokeColor:"var(--stage_chart_48bae8)",dashStyle:"solid",lineCap:"round"}};return $ZC.get("marker.parser")(a)}},G.conversionLinenotes={parent:X+" .qualitativeGroupHolder",parser:function(t,e){return $ZC.getComponent("conversionLineParser")(e,{},t)}},"staircase_advanced"===b&&(G.sideLineParser={parent:X+" .qualitativeGroupHolder",parser:function(t,e){let n={config:{x:()=>8-e.data._data()._width,y:()=>e.data._data()._height/2,size:()=>e.data._data()._height+8,angle:90,shape:"line",dashStyle:"longdash",strokeColor:"var(--stage_chart_48bae8)",strokeWidth:1}};return $ZC.get("marker.parser")(n)}},G.downLineParser={parent:X+" .qualitativeGroupHolder",parser:function(t,e){let n=t.userdata.maxScaleOfleftBarObj,a=e.data._data()._width,r=e.data._data()._height,o=a*n[e.data[3]]/e.data[1],i={config:{x:()=>-o/2-a+8,y:()=>r+8,size:()=>o,shape:"line",dashStyle:"longdash",strokeColor:"var(--stage_chart_48bae8)",strokeWidth:1}};return $ZC.get("marker.parser")(i)}}),t.notes=CrmChartUtil.getNotes(!0,4,"customNote",G)}t.seriesdata.chartdata=v,t.seriesdata.type="bar",t.tooltip.maxWidth="90%",t.chart.axes.xaxis.ticklabel.maxWidth=90,delete t.maxScaleOfWinLoss,delete t.maxScaleOfBarChart},populateEmptySeries:function(t,e,n,a,r,o,i,l,s,c){for(var u=n.chart.axes.xaxis.categories,d=n.categoryMap,h=u.length,f=[],p=[],g=0;g<h;g++){var v=u[g],m=u[g+1],y=this.getEncodedHtmlText(d[v]),b=[];if(b.push(v),"Empty1"===t){if(r&&r[y])var x=a-r[y];else x=a;var C=a&&a>0?.01*(o+a):0;b.push(x+C),b.push(x+C),b.push(y)}else if("Empty2"===t){var k=o;c>k&&(k=c);x=a&&a>0?.08*(k+a):.1*(k+a);b.push(x),b.push(x),b.push(y);var w=[];r&&r[y]&&r[y]>0&&w.push({batch:"rightArrowParser"}),g<h-1&&s[this.getEncodedHtmlText(d[m])]&&s[this.getEncodedHtmlText(d[m])]>0&&w.push(l),"staircase_advanced"===i&&(w.push({batch:"downLineParser"}),w.push({batch:"sideLineParser"})),b.push(w)}x=x||0,p.push(b)}f.push(p);var _={type:10,seriesname:t,data:f,hideInLegend:!0,plotoptions:{events:{enabled:!1},datalabels:{show:!1}}};e.push(_)},setMovedCountData:function(t){for(var e=t.component_chunks[2].vertical_groupings?t.component_chunks[2].vertical_groupings:void 0,n=t.component_chunks[2].data_map?t.component_chunks[2].data_map:void 0,a=e.length,r=$ESAPI.encoder().encodeForHTML(I18n.getMsg("None")),o={},i=0;i<a;i++){var l={},s=e[i],c=$ESAPI.encoder().encodeForHTML(s.label);c=c&&"-"!==c?c:r;var u=s.groupings.length;if(c!==r){for(var d=0;d<u;d++){var h=s.groupings[d],f=$ESAPI.encoder().encodeForHTML(h.label);f=f&&"-"!==f?f:r;var p=n&&n[h.key]?n[h.key].aggregates[0]:void 0;if(p&&f!==r){var g=this.getEncodedHtmlText(f),v={label:p.label,value:p.value};l[g]=v}}o[g=this.getEncodedHtmlText(c)]=l}}t.nextMovedObj=o},canvasOnLoadForStage:function(t,e){var n=e.userdata,a=$("#"+n.renderId+" .zohocharts_scroll");if(n.isConversionRate){var r=n.component_chunks[0].vertical_groupings,o=r.length,i=r[0].label,l=r[o-1].label,s=n.totalwonCount?n.totalwonCount.value:0,c=n.totalwonCount?n.totalwonCount.label:0,u=n.totalValueCount,d=Math.trunc(100*s/u);if(a&&a.length>0){var h=a.find(".child").height(),f=$("#"+n.renderId+"stageConversion");f.length&&f.remove(),a.append("<div class='boxBB pA pB30 pT30 right0 pL10 pR15 stageCustomChartTextCont top0 maxW175 oH' id='"+n.renderId+"stageConversion' style='height: "+h+"px;'><div class='aiCenter dF flexDC pR spaceBetween stage_chartCustom_text h100_per w150'><lyte-text class='bg_white pB2 zi1' lt-prop-value = '"+$ESAPI.encoder().encodeForHTML(i)+"' lt-prop-tooltip-config = '{ \"position\" : \"bottom\" }' lt-prop-tooltip-class='w200'> </lyte-text><div class='aligncenter bg_white pT2 pB2 zi1'><div>"+I18n.getMsg("crm.dashboard.overall.win.rate")+"</div><div class='mT3'><span class='crm-font-bold'>"+c+"</span><span> ("+d+"%)</span></div></div><lyte-text class='bg_white pT2 zi1' lt-prop-value = '"+$ESAPI.encoder().encodeForHTML(l)+"' lt-prop-tooltip-config = '{ \"position\" : \"bottom\" }' lt-prop-tooltip-class='w200'> </lyte-text></div></div>")}}a[0].scroll(0,0)},findValueByOpr:function(t,e,n){return"increase"===n?t*e:-t*e},getThresholdValuesForQuadrant:function(t,e){if(t.component_markers)return{x:[t.component_markers[0].x],y:[t.component_markers[0].y.value]};for(var n=[],a=[],r=e[0].data.length,o=0;o<r;o++)n.push(e[0].data[o][1]),a.push(e[0].data[o][2]);var i={x:[],y:[]};return i.x[0]=(Math.max.apply(Math,n)+Math.min.apply(Math,n))/2,i.y[0]=(Math.max.apply(Math,a)+Math.min.apply(Math,a))/2,i},customToolTipForHeatmap:function(t,e,n){var a=I18n.getMsg("None"),r=e.actData[e.actData.length-1];r=null===e.actData[0]||"false"===e.actData[0]||""===e.actData[0]?a:$ESAPI.encoder().encodeForHTML(r);var o=null===e.actData[1]||"false"===e.actData[1]||""===e.actData[1]?a:e.actData[1],i=n.userdata.seriesLabels;return"<b>"+r+"</b></br>"+(o=i&&i[o]?i[o]:o)+" : "+(e.actData[4]?e.actData[4]:0)},customToolTipForQuadrant:function(t,e,n){var a='<div class="pR pR15 " style="pointer-events: all !important;"><table><tbody>';return n.eventHandler.eventManager.selectionManager.surround.forEach((t=>{a+='<tr></tr><tr><td class="vaT"><b>'+$ESAPI.encoder().encodeForHTML(e.metaInfo[0].columnname)+" : "+$ESAPI.encoder().encodeForHTML(t[t.length-1])+"</b></td></tr>",a+='<tr><td class="vaT"><span calss="dIB">'+$ESAPI.encoder().encodeForHTML(e.metaInfo[1].columnname)+' : </span><span class="dIB"> '+t.x_label+'</span></td></tr><tr><td class="vaT"><span calss="dIB">'+$ESAPI.encoder().encodeForHTML(e.metaInfo[2].columnname)+' : </span><span class="dIB">'+t.y_label+"</span></td></tr>","advanced"===n.userdata.component_props.visualization_props.type&&(a+='<tr><td class="vaT"><span calss="dIB">'+$ESAPI.encoder().encodeForHTML(e.metaInfo[3].columnname)+' : </span><span class="dIB">'+$ESAPI.encoder().encodeForHTML(t.z_label+"")+"</span></td></tr>")})),a},setStackedSeriesData:function(t){for(var e,n=!(t.component_chunks[0].grouping_column_info.length<=1)&&("DateTime"===t.component_chunks[0].grouping_column_info[1].type||"Date"===t.component_chunks[0].grouping_column_info[1].type),a=this.getSeriesDataMapping(t),r=a.seriesVsDataMapping,o=a.seriesLabel,i=t.component_chunks[0].vertical_groupings,l=t.is_pitch_prescriptor?Object.keys(o):n?CrmChartRenderer.sortByValue(r):Object.keys(o).sort(),s=l.length,c="heatmap"===t.component_props.visualization_props.type,u=[],d={},h=I18n.getMsg("None"),f=0;f<s;f++)for(var p=n?[l[f]]:o[l[f]],g=p.length,v=0;v<g;v++){var m=r[p[v]],y=m.duplicates?m.duplicates:{},b=Object.keys(y),x=b.length,C=-1;do{if(c){u[0]||u.push({type:"heatmap",data:[]});var k=m.data.length;e=(e=null===m.value?null:$ESAPI.encoder().encodeForHTML(m.value))&&e.includes("&#x25;")?e.replaceAll("&#x25;","%"):e;for(var w=[],_=0;_<k;_++){var S=m.data[_][0];"null"===m.data[_][0]&&"null"===m.data[_][3]&&(S=$ESAPI.encoder().encodeForHTML('"null"')),u[0].data.push([S,e,null==m.data[_][1]?0:m.data[_][1],{group_values:[m.data[_][0],m.value,m.dataLabel]},m.data[_][2],m.data[_][3]]),w.push(m.data[_][0])}var O=i.length;for(_=0;_<O;_++){if(L=(L=(L=i[_].value||0===i[_].value?i[_].value:null===i[_].value?null:i[_].label)||0===L?$ESAPI.encoder().encodeForHTML(L+""):L)&&L.includes("&#x25;")?L.replaceAll("&#x25;","%"):L,!w.includes(L)){var A=i[_].label;A=null===L?h:A,L=L||0===L?"null"===L&&"null"===A?$ESAPI.encoder().encodeForHTML('"null"'):L+"":null===L?null:A,u[0].data.push([L,e,0,{group_values:[i[_].value,m.value]},0,A])}}}else{var T={seriesValue:""===(e=$ESAPI.encoder().encodeForHTML(m.value))?m.value+"":e,seriesname:e,type:"bar"===t.seriesdata.chartdata[0].type?10:t.seriesdata.chartdata[0].type,data:[]};t.is_pitch_prescriptor&&"actual"!==m.value&&(T.plotoptions={dashStyle:"dashed"}),T.data[0]=[];O=i.length,k=m.data.length,w=[];var P=!1;for(_=0;_<O;_++){L=(L=null!==(L=i[_].value||0===i[_].value?i[_].value:""===i[_].label||null===i[_].value?null:i[_].label)?$ESAPI.encoder().encodeForHTML(L+""):null)&&L.includes("&#x25;")?L.replaceAll("&#x25;","%"):L;for(var E=0;E<k;E++)if(m.data[E][0]===L){P=!0;A=i[_].label?i[_].label:h;var L=L||0===L?"null"===L&&"null"===A?'"null"':L:null!==L?A:null;t.is_pitch_prescriptor&&(m.data[E][0]=Date.parse($L.moment(m.data[E][0])._dateObj)),'"null"'===L&&(m.data[E][0]=$ESAPI.encoder().encodeForHTML('"null"')),null!==m.data[E][1]||t.is_pitch_prescriptor?T.data[0].push(m.data[E]):T.data[0].push([L,0,0,A]);break}if(!P){var M=t.chart.axes.yaxis[0].minRange;"spline"===t.component_props.visualization_props.type&&0!==M&&(t.chart.axes.yaxis[0].minRange=M>0?0:M);A=i[_].label?$ESAPI.encoder().encodeForHTML(i[_].label):h;A=this.getEncodedHtmlText(A);L=L||0===L?"null"===L&&"null"===A?'"null"':L:null!==L?A:null;T.data[0].push([L,0,0,A])}P=!1}u.push(T)}C++,d[p[v]]=null===m.value?null:m.dataLabel,m=x?y[b[C]]:m}while(C<x)}t.seriesLabels=d,t.seriesdata=CrmChartUtil.getSeriesData(u).seriesdata},getSeriesDataMapping:function(t){for(var e={},n={},a=t.component_chunks[0].vertical_groupings,r=t.component_chunks[0].vertical_groupings.length,o=null,i=$ESAPI.encoder().encodeForHTML(I18n.getMsg("None")),l=0,s={},c={},u={},d={},h=0;h<r;h++)for(var f=a[h],p=$ESAPI.encoder().encodeForHTML(f.label),g=f.groupings.length,v=0;v<g;v++){var m=f.groupings[v],y=m.label,b=m.value||0===m.value?"null"===m.value&&"null"===y?'"null"':m.value+"":null===m.value?null:m.label+"",x=null!==b?Object.keys(e).find((t=>t.toLowerCase()===b.toLowerCase())):null,C=t.component_chunks[0].grouping_column_info[1].type,k=t.component_chunks[0].grouping_column_info[1].ui_type;e[b]||("Text"===C||"CHAR"===C&&1===k)&&e[x]?(o=e[x],null!==b&&o.value.toLowerCase()!==b.toLowerCase()&&(o.duplicates=o.duplicates?o.duplicates:{},o.duplicates[b]||(o.duplicates[b]={data:Array(r).fill(0),labels:Array(r).fill(0),value:b,dataLabel:y}),o=o.duplicates[b])):(o={data:[],labels:Array(r).fill(0),value:b,dataLabel:y,color_code:m.color_code},e[b]=o,n[y]?n[y].push(b):n[y]=[b]);var w=t.component_chunks[0].data_map[m.key].aggregates[0];if(w){var _=[""===(I=(I=f.value||0===f.value?$ESAPI.encoder().encodeForHTML(f.value):""===f.label||null===f.value?null:f.label+"")&&I.includes("&#x25;")?I.replaceAll("&#x25;","%"):I)?f.value+"":I,w.value,w.label,!1!==f.label&&""!=f.label?!0===f.label?"true":this.getEncodedHtmlText(p):i];if(o.data.push(_),"stage"===t.component_type)c[L=this.getEncodedHtmlText(p)]=c[L]?c[L]+w.value:w.value,"won"!==y&&"lost"!==y||(s[L]=s[L]?s[L]+w.value:w.value,"won"===y&&(l+=w.value))}if("stage"===t.component_type)for(var S=m.groupings,O=m.groupings.length,A=0;A<O;A++){var T=S[A],P=T.label;if("won"===(P=P&&"-"!==P?T.label:i)||"lost"===P){var E=T.value||0===T.value?T.value:T.label;e[P]?(o=e[P]).value!==E&&(o.duplicates=o.duplicates?o.duplicates:{},o.duplicates[E]||(o.duplicates[E]={data:Array(r).fill(0),labels:Array(r).fill(0),value:E,dataLabel:P}),o=o.duplicates[E]):(o={data:[],labels:Array(r).fill(0),value:E,dataLabel:P},e[P]=o,n[P]?n[P].push(E):n[P]=[E]);var L=this.getEncodedHtmlText(p),M=t.component_chunks[0].data_map[T.key].aggregates[0];if(M){var D="won"===P?u:d;if(D[L])this.setValueForDuplicateSeries(t,D,L,o,M);else{var I;_=[""===(I=f.value||0===f.value?$ESAPI.encoder().encodeForHTML(f.value):i)?f.value+"":I,M.value,M.label,"-"!==f.label&&!1!==f.label&&""!==f.label?!0===f.label?"true":this.getEncodedHtmlText(p):i];o.data.push(_)}}s[L]=s[L]?s[L]+M.value:M.value,"won"===P?(l+=M.value,u[L]=u[L]?u[L]+M.value:M.value):d[L]=d[L]?d[L]+M.value:M.value}}}if("stage"===t.component_type){t.wonCount=l,t.maxScaleOfleftBarObj=c&&Object.keys(c).length>0?c:void 0,t.maxScaleWinLossObj=s&&Object.keys(s).length>0?s:void 0;var R,z=(R=t.maxScaleWinLossObj?Object.values(s):[])&&R.length>0?Math.max(...R):0;t.maxScaleOfWinLoss=z;var j,F=(j=c?Object.values(c):[]).length>0?Math.max(...j):0;t.maxScaleOfBarChart=F}return{seriesVsDataMapping:e,seriesLabel:n}},setValueForDuplicateSeries:function(t,e,n,a,r){for(var o=a.data,i=o.length,l=0;l<i;l++)if(o[l][3]===n){var s=r.value+e[n];if(o[l][1]=s,t.component_props.visualization_props.aggregate_format&&t.component_props.visualization_props.aggregate_format.length){var c=t.component_props.visualization_props.aggregate_format[0].type,u=t.component_props.visualization_props.aggregate_format[0].decimal_places,d=parseFloat(ZChartRenderer.formatTickLabels(s,void 0,void 0,void 0,c,u));d=ZChartRenderer.applyFormatSuccessor(s,d,c),o[l][2]=d}else o[l][2]=s+"";break}},renderChartPreview:function(t,e,n){if(t){var a={},r=$("#stackingOptions"),o=$("#createChartContainer");switch((e=void 0===e&&r.parent().is(":visible")?r.val():e)&&"0"!==e&&(t=e+"_"+t),t){case"table":a={name:"jsdcbxm",component_type:"chart_table",component_props:"null",component_chunks:[{data_map:{0:{aggregates:[{label:9,value:9}]},1:{aggregates:[{label:1,value:1}]},T:{aggregates:[{label:10,value:10}]}},aggregate_column_info:[{label:""+I18n.getMsg("crm.report.record.count"),type:null,aggregations:["COUNT"]}],grouping_column_info:[{label:""+I18n.getMsg("CREATEDBY"),type:"DateTime"}],vertical_groupings:[{label:"Charles",value:"2018-01-01",key:"0",groupings:[]},{label:"Mary",value:"2018-02-01",key:"1",groupings:[]}]}]};break;case"bar":a={canvas:{theme:"flatui"},seriesdata:{chartdata:[{type:"bar",data:[[["Charles",1],["Mary",2]]]}]},metadata:{axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"Created By",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Sales)",datatype:"numeric"}]},chart:{axes:{rotated:!0,xaxis:{label:{text:""+I18n.getMsg("CREATEDBY")},ticklabel:{rotation:"auto"},axisline:{color:"var(--chartXAxisline)"}},yaxis:[{label:{text:""+I18n.getMsg("crm.report.record.count")}}]},plot:{plotoptions:{bar:{multiColoring:!0,events:{enabled:!1}}}}},legend:{colors:["#ff7f4f","#ffa500"]}};break;case"column":a={canvas:{theme:"flatui"},seriesdata:{chartdata:[{type:"bar",data:[[["Charles",1],["Mary",2]]]}]},metadata:{axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"Created By",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Sales)",datatype:"numeric"}]},chart:{axes:{xaxis:{label:{text:""+I18n.getMsg("CREATEDBY")},ticklabel:{rotation:"auto"},axisline:{color:"var(--chartXAxisline)"}},yaxis:[{label:{text:""+I18n.getMsg("crm.report.record.count")}}]},plot:{plotoptions:{bar:{multiColoring:!0,events:{enabled:!1}}}}},legend:{colors:["#ff7f4f","#ffa500"]}};break;case"pie":a={legend:{enabled:!1,colors:["#02cec9","#81ecec","#75b8ff"]},chart:{plot:{plotoptions:{pie:{events:{enabled:!1},datalabels:{show:!0}}}}},metadata:{axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"Created By",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Sales)",datatype:"numeric"}]},seriesdata:{chartdata:[{type:"pie",data:[[["Charles",1],["Mary",1],["Ricky",2]]]}]},canvas:{title:{text:"Simple pie"}}};break;case"donut":a={legend:{enabled:!1,colors:["#02cec9","#81ecec","#75b8ff"]},chart:{plot:{plotoptions:{pie:{innerRadius:"65%",events:{enabled:!1},datalabels:{show:!0}}}}},metadata:{axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"Created By",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Sales)",datatype:"numeric"}]},seriesdata:{chartdata:[{type:"pie",data:[[["Charles",1],["Mary",1],["Ricky",2]]]}]},canvas:{title:{text:"Simple pie"}}};break;case"line":case"spline":a={metadata:{axes:{x:[0],y:[[1]],clr:[2],tooltip:[0,1,2]},columns:[{dataindex:0,columnname:"Created By",datatype:"ordinal"},{dataindex:1,columnname:"Record Count",datatype:"numeric"}]},seriesdata:{chartdata:[{type:"line",seriesname:"Consumables",data:[[["Charles",2],["Mary",.5],["Ricky",1]]]},{type:"line",seriesname:"Furniture",data:[[["Charles",1],["Mary",2],["Ricky",.5]]]}]},legend:{enabled:!1,colors:["#81ecec","#75b8ff"]},chart:{axes:{rotated:!1,xaxis:{label:{text:"Year(StockDT)"},ticklabel:{alignMode:"rotate"}},yaxis:[{label:{text:"Sum(Profit)"}}]},plot:{plotoptions:{line:{mode:"cardinal",marker:{symbol:"circle"},events:{enabled:!1}}}}},canvas:{title:{text:"Line with different markers"}}};break;case"stacked_bar":a={seriesdata:{chartdata:[{type:10,seriesname:"Advertisement",data:[[["Charles",1],["Mary",0]]]},{type:10,seriesname:"Trade Show",data:[[["Charles",1],["Mary",1]]]},{type:10,seriesname:"Referral",data:[[["Charles",1],["Mary",1]]]}]},metadata:{axes:{x:[0],y:[[1]],clr:[2],tooltip:[0,1,2]},columns:[{dataindex:0,columnname:"Year(Date)",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Cost)",datatype:"numeric"},{columnname:"Region"}]},chart:{axes:{rotated:!0,xaxis:{categories:["Charles","Mary"],label:{text:""+I18n.getMsg("CREATEDBY")}},yaxis:[{label:{text:""+I18n.getMsg("crm.report.record.count")}}]},plot:{plotoptions:{bar:{events:{enabled:!1}}}}},legend:{layout:"horizontal",colors:["#02cec9","#81ecec","#75b8ff"],events:{enabled:!1}},canvas:{title:{text:"Multiple series - Stacked"}}};break;case"stacked_100percent_bar":a={seriesdata:{chartdata:[{type:10,seriesname:"Advertisement",data:[[["Charles",1],["Mary",0]]]},{type:10,seriesname:"Trade Show",data:[[["Charles",1],["Mary",1]]]},{type:10,seriesname:"Referral",data:[[["Charles",1],["Mary",1]]]}]},metadata:{axes:{x:[0],y:[[1]],clr:[2],tooltip:[0,1,2]},columns:[{dataindex:0,columnname:"Year(Date)",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Cost)",datatype:"numeric"},{columnname:"Region"}]},chart:{axes:{rotated:!0,xaxis:{categories:["Charles","Mary"],label:{text:""+I18n.getMsg("CREATEDBY")}},yaxis:[{label:{text:""+I18n.getMsg("crm.report.record.count")}}]},plot:{plotoptions:{bar:{stacked:{enabled:!0,showAs:"percent"},datalabels:{show:!1,labelPos:"middle"},events:{enabled:!1}}}}},legend:{layout:"horizontal",colors:["#02cec9","#81ecec","#75b8ff"],events:{enabled:!1}},canvas:{title:{text:"Multiple series - Stacked"}}};break;case"stacked_column":a={seriesdata:{chartdata:[{type:10,seriesname:"Advertisement",data:[[["Charles",1],["Mary",0]]]},{type:10,seriesname:"Trade Show",data:[[["Charles",1],["Mary",1]]]},{type:10,seriesname:"Referral",data:[[["Charles",1],["Mary",1]]]}]},metadata:{axes:{x:[0],y:[[1]],clr:[2],tooltip:[0,1,2]},columns:[{dataindex:0,columnname:"Year(Date)",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Cost)",datatype:"numeric"},{columnname:"Region"}]},chart:{axes:{rotated:!1,xaxis:{categories:["Charles","Mary"],label:{text:""+I18n.getMsg("CREATEDBY")}},yaxis:[{label:{text:""+I18n.getMsg("crm.report.record.count")}}]},plot:{plotoptions:{bar:{events:{enabled:!1}}}}},legend:{layout:"horizontal",colors:["#02cec9","#81ecec","#75b8ff"],events:{enabled:!1}},canvas:{title:{text:"Multiple series - Stacked"}}};break;case"stacked_100percent_column":a={seriesdata:{chartdata:[{type:10,seriesname:"Advertisement",data:[[["Charles",1],["Mary",0]]]},{type:10,seriesname:"Trade Show",data:[[["Charles",1],["Mary",1]]]},{type:10,seriesname:"Referral",data:[[["Charles",1],["Mary",1]]]}]},metadata:{axes:{x:[0],y:[[1]],clr:[2],tooltip:[0,1,2]},columns:[{dataindex:0,columnname:"Year(Date)",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Cost)",datatype:"numeric"},{columnname:"Region"}]},chart:{axes:{rotated:!1,xaxis:{categories:["Charles","Mary"],label:{text:""+I18n.getMsg("CREATEDBY")}},yaxis:[{label:{text:""+I18n.getMsg("crm.report.record.count")}}]},plot:{plotoptions:{bar:{stacked:{enabled:!0,showAs:"percent"},datalabels:{show:!1,labelPos:"middle"},events:{enabled:!1}}}}},legend:{layout:"horizontal",colors:["#02cec9","#81ecec","#75b8ff"],events:{enabled:!1}},canvas:{title:{text:"Multiple series - Stacked"}}};break;case"areaspline":a={metadata:{axes:{x:[0],y:[[1]],clr:[2],tooltip:[0,1,2]},columns:[{dataindex:0,columnname:"Created By",datatype:"ordinal"},{dataindex:1,columnname:"Record Count",datatype:"numeric"},{columnname:"Market"}]},seriesdata:{chartdata:[{type:"area",seriesname:"Advertisement",data:[[["Charles",1],["Mary",.5],["Ricky",.75]]]},{type:"area",seriesname:"Trade Show",data:[[["Charles",0],["Mary",1],["Ricky",1.25]]]}]},canvas:{theme:"flatui",title:{text:"Multi series area"}},chart:{plot:{plotoptions:{area:{mode:"cardinal",fillOpacity:.5,strokeWidth:3,marker:{enabled:!0,size:2,innerStrokeWidth:.5,outerStrokeOpacity:.5},events:{enabled:!1}}}},axes:{rotated:!1,xaxis:{label:{text:""+I18n.getMsg("CREATEDBY")}},yaxis:[{label:{text:""+I18n.getMsg("crm.report.record.count")}}]}},legend:{layout:"horizontal",colors:["#81ecec","#75b8ff"],events:{enabled:!1}}};break;case"heatmap":a={seriesdata:{chartdata:[{type:"heatmap",data:[[["Charles","Jan",10],["Charles","Feb",19],["Charles","Mar",8],["Charles","Apr",24],["Mary","Jan",5],["Mary","Feb",13],["Mary","Mar",18],["Mary","Apr",3],["Ricky","Jan",20],["Ricky","Feb",15],["Ricky","Mar",13],["Ricky","Apr",5]]]}]},metadata:{axes:{x:[0],y:[[1]],clr:[2],tooltip:[0,1,2]},columns:[{dataindex:0,columnname:"Region",datatype:"ordinal"},{dataindex:1,columnname:"Product Category",datatype:"ordinal"},{dataindex:2,columnname:"Count",datatype:"numeric"}]},legend:{colors:["#fff","#72defd"],colorBand:{minRange:0},hAlign:"right",vAlign:"center",marginTop:0,filter:{enabled:!1},events:{enabled:!1},colorAxis:{reversed:!0}},canvas:{subtitle:{show:!1},title:{text:"Simple Heatmap"}},chart:{axes:{xaxis:{orient:"bottom",label:{show:!1},ticklabel:{fontSize:13,marginLeft:0,marginRight:0}},yaxis:[{label:{show:!1},grid:{color:"transparent"},ticklabel:{fontSize:13}}]},plot:{plotoptions:{heatmap:{strokeColor:"#fff",events:{enabled:!1},datalabels:{show:!0,showAs:"{{val(2)}}"}}}}}};break;case"funnel":a={metadata:{axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"Year(Date)",datatype:"ordinal"},{dataindex:1,columnname:"Sum(Sales)",datatype:"numeric"}]},seriesdata:{chartdata:[{type:"funnel",data:[[["Charles",2],["Mary",1]]]}]},legend:{enabled:!1,colors:["#81ecec","#75b8ff"],events:{enabled:!1}},canvas:{title:{text:"Simple funnel chart"}},chart:{plot:{plotoptions:{funnel:{datalabels:{show:!0},threeDimension:!1,padding:0,events:{enabled:!1}}}}}}}if("table"==t)o.html(Handlebars.templates.TabularChart(a));else{if("pie"!==t&&"donut"!==t&&"funnel"!==t&&"heatmap"!==t&&"table"!==t&&a.chart.axes.yaxis){var i="stacked_100percent_bar"===t||"stacked_100percent_column"===t?75:"areaspline"===t?1:2;a.chart.axes.yaxis[0].threshold={line:{show:n,values:[i],color:["black"],label:{text:[I18n.getMsg("crm.dashboard.label.benchmark")+": "+i],hAlign:"center",fontFamily:null,fontSize:"12",fontColor:"black"},events:{enabled:!1},marker:{enabled:!1}}}}a.canvas=CrmChartUtil.getCanvasData(!1).canvas,a.chart.axes&&(a.chart.axes.yaxis[0].axisline={color:"var(--chartYAxisline)"}),o.empty(),$ZC.charts(o[0],a)}}},drawBenchmarkInPreview:function(t,e){if(t){var n=t.find(".d3container");if(n&&n.length>0){var a=n[0].__data__;a.userdata.chart.axes.yaxis[0].threshold.line.show=e,a.redraw()}}},setThresholdValues:function(t){t.component_markers||(t.canvas.events={onload:function(t,e){var n=e.axes.x.scale.domain()[1]/2,a=e.axes.y.groups[0].scale.domain()[1]/2;e.userdata.chart.axes.xaxis.threshold.line.values[0]=n,e.userdata.chart.axes.yaxis[0].threshold.line.values[0]=a,e.userdata.chart.axes.xaxis.threshold.line.show=!0,e.userdata.chart.axes.yaxis[0].threshold.line.show=!0,e.redraw()}})},eventsChangeMethod:function(t,e){(e?$(".lyteGridStackItem"):$(".grid-stack-item")).each((function(){var e=$(this),n=e.find(".zohocharts_scroll");n&&n.length>0&&n[0].scroll(0,0);var a=e.find(".d3container");if(a&&a.length>0){var r=a[0].__data__,o=r.userdata,i=o.component_type?o.component_type:"",l=o.component_props&&o.component_props.visualization_props&&o.component_props.visualization_props.type?o.component_props.visualization_props.type:"",s=r.userdata.chart.plot.plotoptions;r.userdata.chart.plot.plotoptions[Object.keys(s)[0]].events?r.userdata.chart.plot.plotoptions[Object.keys(s)[0]].events.enabled=t:r.userdata.chart.plot.plotoptions[Object.keys(s)[0]].events={enabled:t},"chart"!==i||"pie"!==l&&"donut"!==l&&"funnel"!==l||(o.onLoadEventState=t),r.redraw()}}))}},CrmChartUtil={init:function(){CrmChartUtil.colors=["#F26E6E","#FF92BE","#8C79DE","#2C97DE","#0AD3FF","#38E4AE","#63D471","#ADD463","#ED7F65","#E99E5B","#FCE970","#C39878","#EBDCB5"]},getCanvasData:function(t,e,n){return{canvas:{intelligence:{dataCount:{datalabels:25e3}},title:{show:!1},subtitle:{show:!1},border:{show:!1},shadow:{show:!1},fontWeight:"normal",fontStyle:"normal",fontFamily:t=t||"Zoho_Puvi_Regular, sans-serif",fontSize:e=e||18,fontColor:n=n||"var(--chartTicklabel)"}}},getChartAxesData:function(t,e,n,a,r,o,i,l,s,c,u,d,h,f,p,g,v,m,y,b,x,C,k,w,_,S,O,A,T,P){i=null==i||i,l=void 0===l||l,s=null!=s?s:"",h=void 0!==h?h:["var(--chartThresholdLineColor)"],p=null!=p?p:{},g=void 0!==g?g:"var(--paragraphColor)";var E={chart:{effects:{choice:t=null!=t?t:"dropShadow",options:{dropShadow:{color:"#CACACA",dy:3,dx:3,blur:1.5}}},axes:{rotated:!0===v,xaxis:{show:e=null==e||e,reversed:O,label:{show:n=null==n||n,text:a=null!=a?a:"",fontWeight:"bold",fontSize:15},ticklabel:{alignMode:["rotate(-45)"],tooltip:!0,fontColor:r=null!=r?r:"",fontSize:10,marginTop:13,maxHeight:90,maxWidth:90,events:{enabled:!1}},axisline:{show:o=null==o||o,color:"var(--chartXAxisline)"},tickmark:{color:"var(--bg_white)"},threshold:{line:{show:u=null!=u&&u,values:(d=null!=d?d:{x:[],y:[]}).x,color:h,dashStyle:["solid"],strokeWidth:1,marker:{enabled:m,symbol:"circle",fillColor:h,strokeColor:h,strokeWidth:.75},label:{text:"",hAlign:"center"}}},categories:f},yaxis:[]},plot:{plotoptions:p,datalabels:{show:!!b||void 0,events:{onload:_,onreload:_}},events:{},border:{show:!!P}},fontColor:g,marginRight:20}};return y&&(E.chart.plot.events.click=y),C&&(E.chart.plot.events.init=C),k&&(E.chart.plot.events.mousemove=k),w&&(E.chart.plot.events.mouseout=w),void 0!==x&&(E.chart.plot.animation={enabled:x}),E.chart.axes.yaxis.push(CrmChartUtil.getYaxisData(i,l,s,c,r,u,d,h,m,A,T)),f&&f.length<=5&&(E.chart.axes.xaxis.ticklabel.alignMode="rotate(0)",E.chart.axes.xaxis.ticklabel.maxWidth="15%"),S&&(E.chart.axes.xaxis.ticklabel.showAs=S),E},getYaxisData:function(t,e,n,a,r,o,i,l,s,c,u){l=l||[];var d={show:t=null==t||t,label:{show:e=null!==e,text:n=n||"",fontWeight:"normal",fontSize:15,marginRight:15,fontWeight:"bold",tooltip:!0},grid:{color:"var(--chartYAxisline)",style:"longdash",strokeWidth:1},axisline:{color:"var(--chartYAxisline)",show:!0===a},tickmark:{color:"var(--bg_white)"},ticklabel:{rotation:"auto",fontColor:r=r||"",fontSize:11,events:{enabled:!1},showAs:function(t,e,n,a){var r=I18n.getMsg("None"),o=a.userdata.seriesLabels;t=(t=null===(t=o&&o[t]&&null!==t?o[t]:t)||"false"===t||""===t?r:ZChartRenderer.getEncodedHtmlText(t+"")).replace(/\s\s+/g," ");var i=a.userdata.component_props?a.userdata.component_props.visualization_props.type:void 0;return"column_stacked_100percent"===i||"bar_stacked_100percent"===i?"<tspan>"+$("<div/>").text(t).html()+"%</tspan>":"<tspan>"+$("<div/>").text(t).html()+"</tspan>"},maxHeight:90,maxWidth:90},threshold:{line:{show:o=o||!1,values:(i=i||{x:[],y:[]}).y,color:l,dashStyle:["solid"],strokeWidth:1,marker:{enabled:s,symbol:"circle",fillColor:l,strokeColor:l,strokeWidth:.75},label:{text:"",hAlign:"center"}}}};return c&&(d.reversed=c),u&&(d.baseline=u),d},getPlotOptionForBar:function(t,e,n,a,r,o,i,l){var s={bar:{stacked:{enabled:!0===t,showAs:e=e||"values"},datalabels:{show:!0===n,showZeros:!0,textOverlap:"hidden"},multiColoring:r,border:{show:!1,color:"var(--fff)"}}};return t&&"percent"===e&&(s.bar.datalabels.show=!0,s.bar.datalabels.labelPos="middle"),a&&(s.bar.datalabels.showAs=a),o&&(s.bar.datalabels.labelPos=o),i&&(s.bar.datalabels.stackLabels=i),l&&(s.bar.padding=l),s},getPlotOptionForLine:function(t,e){var n={line:{mode:t=t||"monotone",marker:{innerFillOpacity:1,innerStrokeOpacity:1,outerFillOpacity:.5,outerStrokeOpacity:1},datalabels:{show:!0}}};return e&&(n.line.datalabels.showAs=e),n},getPlotOptionForArea:function(t,e,n){var a={area:{fillOpacity:"0.2",size:1.5,mode:t=t||"monotone",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerFillOpacity:1,innerStrokeOpacity:1,outerFillOpacity:.5,outerStrokeOpacity:3},animation:{type:e=e||"pointTween"}}};return n&&(a.area.datalabels={showAs:n}),a},getPlotOptionForFunnel:function(){return{funnel:{threeDimension:!1,padding:2,x:"1%",datalabels:{show:!0,type:"singleside",relativeX:!0,line:{strokeColor:null,strokeWidth:1},textOverflow:"ellipsis",showAs:"{{val(4)}} : {{val(2)}}"}}}},getPlotOptionForPie:function(t,e,n,a,r){var o={pie:{innerRadius:t=t||0,datalabels:{show:e=e||!1,padding:1,boundBox:{show:!0,padding:1,strokeColor:"transparent"},type:"doubleside",innerLabel:{show:n=n||!1},line:{strokeColor:null,strokeWidth:1},preCalculation:{useBBox:!0},fontColor:"var(--chartTicklabel)"},sliceOutHeight:r=null!=r?r:5,strokeWidth:0}};return a&&(o.pie.datalabels.showAs=a),o},getPlotOptionForDial:function(t,e,n,a,r,o,i,l,s,c,u,d,h,f,p,g,v,m,y,b,x,C,k,w,_,S,O,A,T,P,E){return{dial:{fillOpacity:x=null!=x?x:1,strokeWidth:C=null!=C?C:1,startAngle:t,endAngle:e,innerRadius:n,outerPadding:0,bandWidth:a=null!=a?a:null,needle:{show:s,padding:c=null!=c?c:0,strokeWidth:u=null!=u?u:1,fillColor:d=null!=d?d:"grey"},minmaxlabels:{show:h,text:p=p||null,align:f=f||"outer"},datalabels:{fontSize:r,fontColor:o,showAs:i,padding:P=null!=P?P:2},levelMarker:{values:m=null!=m?m:[],strokeColor:l,outerPadding:y=null!=y?y:5,padAngle:b=null!=b?b:0,color:v=null!=v?v:[],ColorGamma:{outerPadding:0},events:{tooltipContent:T=null!=T?T:null}},events:{enabled:g},targetMarker:{enabled:k=null!=k&&k,dataindex:w=null!=w?w:1,outerStrokeColor:_=void 0!==_?_:"var(--bg_white)",size:S=null!=S?S:null,outerStrokeWidth:E=null!=E?E:1,label:{enabled:O=null!=O&&O,text:A=null!=A?A:null}}}}},getPlotOptionForBullet:function(t,e,n,a,r,o,i,l,s,c,u,d,h,f,p,g,v,m,y,b){var x={bullet:{fillOpacity:t=null!=t?t:.5,padding:a=null!=a?a:0,outerPadding:r=null!=r?r:0,bandWidth:i=null!=i?i:null,maxBandWidth:l=null!=l?l:null,levelMarker:{values:e=null!=e?e:[],strokeColor:n,outerPadding:o=null!=o?o:0,color:u=null!=u?u:[],events:{tooltipContent:d=null!=d?d:null},bandWidth:s=null!=s?s:null,maxBandWidth:c=null!=c?c:null},events:{enabled:y},targetMarker:{enabled:h=null!=h&&h,dataindex:f=null!=f?f:1,outerStrokeColor:p=void 0!==p?p:"var(--bg_white)",outerStrokeWidth:1,padding:0,size:g=null!=g?g:null,label:{enabled:v=null!=v&&v,text:m=null!=m?m:null,hAlign:"right",vAlign:"center",textOverlap:"adjust"},events:{enabled:!1}}}};return b&&(x.bullet.datalabels={showAs:b}),x},getPlotOptionForHeatMap:function(t,e,n){n=n||!1;var a={heatmap:{strokeOpacity:1,fillOpacity:.8}};return t&&(a.heatmap.datalabels={showAs:t}),e&&(a.heatmap.strokeColor=e),a.heatmap.animation={enabled:n},a},getLegendData:function(t,e,n,a,r,o,i,l,s,c,u,d,h){var f={legend:{enabled:"true"===t,title:{show:e=e||!1,text:n,fontWeight:"bold"},hAlign:a||"center",vAlign:r||"bottom",layout:"horizontal",fontColor:"var(--baseColor)",colorBox:{shape:s||"circle",strokewidth:1},highlightEffect:{selectedSeries:c||"moody"},marginBottom:i=null!=i?i:null,marginTop:i,filter:{enabled:l},expandable:{show:!0,ontoggle:function(t,e,n,a){return e?I18n.getMsg("crm.dashboard.chart.less"):I18n.getMsg("crm.dashboard.chart.more",[a])},text:function(t){return I18n.getMsg("crm.dashboard.chart.more",[t])}}}};return o&&(f.legend.colors=o),!1===u&&(f.legend.events={enabled:!1}),d>0&&(f.legend.itemMargin=d),h&&(f.legend.showAs=h),f},getTooltipData:function(t,e,n,a,r,o,i,l,s){e=e||!1;var c={tooltip:{enabled:t=t||!0,crosshairColor:"#0f7369",sharedSeriesInfo:r,fontColor:a=a||"#000",fontSize:13,backgroundColor:n=n||"",content:o,borderWidth:2,borderRadius:0,opacity:1,pointerEvents:"none"==s?"none":"auto",hideDelay:100,focusOnTooltipEvent:!0}};return void 0!==i&&(c.tooltip.borderColor=i||null),e&&(c.tooltip.crosshair=e),l&&(c.tooltip.crosshair={type:"x",strokeWidth:30,color:"#50b3f012"}),c},getFacets:function(t,e,n,a){var r={rows:t=t||[],columns:e=e||[],color:n=n||[]};return void 0!==a&&(r.hierarchy=a),r},getMetaData:function(t,e,n,a,r,o,i,l){a=a||[3,1],t=t||[0],e=e||[[1]],n=n||[{dataindex:0,columnname:"xaxis",datatype:"ordinal"},{dataindex:1,columnname:"yaxis",datatype:"numeric"}],l&&(n.push({}),n.push({dataindex:3,columnname:"xAxisDataLabel",datatype:"ordinal"}));var s={metadata:{axes:{x:t,y:e,tooltip:a},columns:n}};return o&&(s.metadata.axes.z=o),r&&(s.metadata.axes.clr=r),i&&(s.metadata.axes.label=i),s},getSeriesData:function(t){return{seriesdata:{chartdata:t}}},getNotes:function(t,e,n,a){return{enabled:t,dataIndex:e,type:n,batch:a}},renderChart:function(t,e,n){if(e.chart.plot&&e.chart.plot.plotoptions){var a=e.chart.plot.plotoptions,r=!1,o=!1;if(newDashbordsEnabled){var i=$L("crm-analytics-components-layout")[0];i&&(r=i.getData("isEditorMode"),o=i.getData("editable"))}var l=e.component_type?e.component_type:"",s=e.component_props&&e.component_props.visualization_props&&e.component_props.visualization_props.type?e.component_props.visualization_props.type:"";if("chart"!==l||"pie"!==s&&"donut"!==s&&"funnel"!==s||(e.onLoadEventState=!r&&!o),($("#analyticalPageContainer").hasClass("grid_editMode")||$("#editPageHeader").hasClass("editPageHeader")||r||o)&&a)e.chart.plot.plotoptions[Object.keys(a)[0]].events?e.chart.plot.plotoptions[Object.keys(a)[0]].events.enabled=!1:e.chart.plot.plotoptions[Object.keys(a)[0]].events={enabled:!1}}return n||(n=!0),$ZC.dataEncoded(n),$ZC.charts(t,e)},getPlotOptionForBubble:function(t){return{bubble:{animation:{enabled:t=void 0!==t&&t},datalabels:{showAs:"z",textOverlap:"adjust"}}}}};