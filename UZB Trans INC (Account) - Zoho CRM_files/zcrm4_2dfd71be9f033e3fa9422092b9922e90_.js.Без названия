var validationUtils={emailRegex:/^[\p{L}\p{M}\p{N}_\-]([\p{L}\p{M}\p{N}!#$%&'*+\-/=?^_`{|}~.]*)@(?=.{4,256}$)(([\p{L}\p{N}\p{M}]+)(([-_]*[\p{L}\p{M}\p{N}])*)[.])+[\p{L}\p{M}]{2,22}$/,emailRegexOfUser:/^[\w](['A-Za-z0-9._%\-+]*@[A-Za-z0-9-]+(\.[a-zA-Z0-9-]{1,30}){0,9}\.[a-zA-Z]{2,22})$/,isEmpty:function(e){try{var t=null;if(!e||"null"===e||"NULL"===e||"empty"===e||"EMPTY"===e||"undefined"===e||"UNDEFINED"===e)return!0;if("object"!=typeof e&&"string"==typeof e)t=e.replace(/[ ]/g,"");else if("object"==typeof e)return Object.keys(e).length<1;return""===t}catch(e){return!0}},isNotEmpty:function(e){return!this.isEmpty(e)},isUndefined:function(e,t){if(void 0===e||!e)return!0;if("object"==typeof e){var r=e[t];return void 0===r||!r}return!1},isFieldEmpty:function(e){var t=e.prop("type");if(null==(r=commonUtils.getValue(e))&&e[0]&&e[0].component&&"single"===e[0].getAttribute("type"))var r=e[0].component.data.userId;if("text"===t&&e.data("contentType")&&-1!==e.data("contentType").toLowerCase().indexOf("date"))r=r.replace(Crm.userDetails.DATE_PATTERN,"");else if("radio"===t){var n=e.prop("name");r=commonUtils.getRadioValue(n)}else"checkbox"===t?r=e.is(":checked")?"true":"false":"combo"!==t&&"select-one"!==t&&"select"!==t||r&&(r=r.replace(/-None-|none|None/g,""));return validationUtils.isEmptyString(r)},isValidEmail:function(e){if(""==e)return!0;if(null==e)return!1;var t=new XRegExp(validationUtils.emailRegex.source,"i");return XRegExp.test(e.trim(),t)},isValidEmailOfUser:function(e){return""==e||validationUtils.emailRegexOfUser.test(e)},validatePattern:function(e,t){if(""==t)return!0;if(null==t)return!1;var r=new XRegExp(e.source,"i");return XRegExp.test(t.trim(),r)},isValidTwitter:function(e){if(""===e)return!0;if(e.trim().length<=50&&e.trim().length>0){return/^[a-zA-Z0-9_]*$/.test(e)}},isValidDomain:function(e){return""===e||new RegExp("^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?.)+[a-zA-Z]{2,22}$").test(e)},isValidWebUrl:function(e){if(""===e)return!0;return new RegExp('^(http:\\/\\/www.|https:\\/\\/www.|ftp:\\/\\/www.|www.|http:\\/\\/|https:\\/\\/|ftp:\\/\\/|){1}[^\0-"-\'*-,.-/:-?[-^`{}-]+(\\.[^\0-"$-,.-/<>@[-^`{}-]+)+([/?].*)*$').test(e)},isValidWebURL_extended:function(e,t,r,n){if(new RegExp('^(http:\\/\\/www.|https:\\/\\/www.|ftp:\\/\\/www.|www.|http:\\/\\/|https:\\/\\/|ftp:\\/\\/|){1}[^\0-"-,.-/:-@[-^`{-]+(\\.[^\0-"$-,.-/<->@[-^`{-]+)+(/[^\0-"(-)<>^{-}]*)*$').test(t))return!0;var i=e.replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,"."),a=I18n.getValueForFields("crm.field.valid.check",i);return"inline"===r?$(n).closest(".labelValCreate").length?commonUtils.showErrorMsg(a,$(n)):renderingUtils.displayErrorDiv(e,void 0,a,n):"Link"===e?$("#invalid_webUrl").text(a).show().closest("td").addClass("crmNegativeColor"):alert(a),!1},isValidInteger:function(e){if(""===e)return!0;return!(isNaN(e)||-1!==e.indexOf(".")||!/^-?\d+(,(\d)+)*$/.test(e))},isValidNumber:function(e,t){var r=/^-?(\d+)(\.)*(\d+)*$/.exec(e);if(!r)return!1;var n=r[3];return!(n&&t&&n.length>t)},isValidDecimal:function(e,t,r,n){if(""===e)return!0;if(-1!==(e+="").indexOf(".")){var i=e.split(".");if(""===i[0]&&""===i[1])return!1}0===e.split(".")[0].length&&(e=0+e);var a=/^-?(\d+)?(\.){0,1}(\d+)*$/.exec(e);if(!a)return!1;var o=a[1],s=a[3];if(null==o&&null==s)return!1;if((o?o.length:0)+(s?s.length:0)<=t+r&&(o&&(t=o.length),s&&(r=s.length)),s||(t+=r),o){if(!validationUtils.isValidInteger(o))return!1;if(o.length>t)return n&&(n.maxlengthFailed=!0),!1}if(s){if(!validationUtils.isValidInteger(s))return!1;if(s.length>r)return n&&(n.decimalLengthCheckFailed=!0),!1}return!0},decimalLengthCheck:function(e,t){if(""===e)return!0;var r=/^-?(\d+)?(\.){0,1}(\d+)*$/.exec(e);if(!r)return!1;var n=r[3];return!(n&&n.length>t)},validateCommaSepEmails:function(e){var t=$("#"+e),r=t.val();if(!r)return!0;if(""!==r)for(var n=(o=r.split(",")).length,i=0;i<n;i++){var a=trimBoth(o[i]);if(!validationUtils.isValidEmail(a)){var o=r.split(",");return renderingUtils.showCustomAlert(I18n.getMsg("crm.email.comma")),t.focus(),!1}}return!0},checkEmailLimitExceed:function(e,t,r,n){var i=e.split(","),a=[],o=[];return n=n||50,"null"!==t&&(a=t.split(",")),"null"!==r&&(o=r.split(",")),i.length+a.length+o.length>n},isInteger:function(e){return!isNaN(e)&&parseFloat(e)%1==0},isValidPhoneNo:function(e,t){if(t){"undefined"!=typeof Crm&&Crm.userDetails.isPhoneNoNewView&&"undefined"!=typeof CrmPhoneNumberInput&&(t=CrmPhoneNumberInput.getValueFromPhoneFieldComp(e,t));var r=e.attr("maxlength"),n=t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/[\u202c]/g,"")).replace(/[,](?!.)/,"")).replace(/\s{2,}/g," ")).replace(/\s-/g,"-")).replace(/-\s/g,"-")).replace(/\s[.]/g,"[.]")).replace(/\s;/g,";")).replace(/;\s/g,";")).replace(/\s,/g,",")).replace(/,\s/g,",")).replace(/\s#/g,"#")).replace(/#\s/g,"#")).replace(/\(\s/g,"(")).replace(/\s\)/g,")"),i=(n=n.replace(/\)(?![\s;,\-\/])/g,") ")).length;if(""===n)return!1;for(var a=n[0],o=1;o<i;o++)"("===n[o]&&" "!==n[o-1]?a=a+" "+n[o]:a+=n[o];return(a=(a=a.replace(/^\s+/,"")).replace(/\s+$/,"")).length<=r&&(t=a),!!/^([\+]?)(?![\.-])((?=([\.-]?[ ]?[\da-zA-Z]+))\3+|([ ]?\((?![\.-])(?=[ \.-]?[\da-zA-Z]+)([ \.-]?[\da-zA-Z]+)+\)(?!\.)([ -][\da-zA-Z]+)?)+)+((([,]+)?[;]?[\da-zA-Z]+)+(([#][\da-zA-Z]+)+)?)?[#;]?$/.test(t)&&("undefined"!=typeof Crm&&Crm.userDetails.isPhoneNoNewView&&"undefined"!=typeof CrmPhoneNumberInput?CrmPhoneNumberInput.validatePhoneNumber(e):(e.val(t),!0))}return!0},isJson:function(e){try{if("object"==typeof e||JSON.parse(e))return!0}catch(e){}return!1},isJsonCheck:function(e){try{if("object"==typeof e||(JSON.parse(e),0))return!0}catch(e){}return!1},IsJsonString:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},isEmptyString:function(e){return null==e||"string"==typeof e&&0===e.trim().length},patternValidate:function(e,t,r,n,i,a,o,s,l=!0,c=!1){n||a||null==(a=getElm(i,e))&&(a=getElm(i,"property('+fldLabel+')"));var d=t.replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,".");if(n)u=e;else var u=a.value;if("EMAIL"==r.toUpperCase()){var m=validationUtils.emailRegex;null!=s&&"User"==s&&(m=validationUtils.emailRegexOfUser)}if("DATE"==r.toUpperCase()){var p=Crm.userDetails.DATE_PATTERN?Crm.userDetails.DATE_PATTERN.toUpperCase():userDateFrmtinCE;try{return new CrmDate(CrmDateUtils.getDateObjectFromString(u,p,c)).validate()}catch(e){return!1}}if("TIME"==r.toUpperCase())m=/^\d{1,2}(:\d{1,2})*$/;var g=I18n.getValueForFields("crm.field.valid.check",d);if("PHONE"==r.toUpperCase()){if(!validationUtils.isValidPhoneNo($(a),u))return l&&(Search.isVRCriteria?$(".validationRuleCongureWarningMsg").text(g).show():renderingUtils.displayAlert(e,void 0,g,a,o),n||(a.setAttribute("autocomplete","off"),a.focus())),!1}else{if(!validationUtils.validatePattern(m,trimBoth(u)))return l&&(Search.isVRCriteria?$(".validationRuleCongureWarningMsg").text(g).show():renderingUtils.displayAlert(e,void 0,g,a,o),n||(a.setAttribute("autocomplete","off"),a.focus())),!1;var f=$(a).parent();f.length>0&&f.find(".form_err_msg").remove()}},emailValidate:function(e,t,r,n,i,a=!0){return 0!=validationUtils.patternValidate(e,t,"EMAIL",void 0,r,void 0,n,i,a)},decimalValidate:function(e,t,r,n,i,a=!0){var o=e;null!=e&&"string"==typeof e&&((o=getElm(n,e))||(e="property("+t+")",o=getElm(n,e)));var s=t.replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,".");if(null!=o&&0!=o.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){var l=o.value.replace(/^\s+/g,"").replace(/\s+$/g,"");if(0==l.split(".")[0].length&&(l=0+l),/^-?\d+(\.\d\d*)*$/.test(l)){if(validationUtils.decimalLengthCheck(l,r))return!0;c=I18n.getValueForFields("crm.field.valid.decimal.cal.check",[s,r]);return renderingUtils.displayAlert(e,t,c,o,i),o.setAttribute("autocomplete","off"),o.focus(),!1}if(a){var c=I18n.getValueForFields("crm.field.valid.check",s);renderingUtils.displayAlert(e,t,c,o,i),o.setAttribute("autocomplete","off"),o.focus()}return!1}return!0},numValidate:function(e,t,r,n,i,a=!0){var o=getElm(n,e),s=o.value.replace(/^\s+/g,"").replace(/\s+$/g,"");if(null!=o&&0!=o.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){if("any"!=r&&0!=parseInt(r))var l="^-?\\d+((\\d)+)*(\\.\\d{1,"+(r=r.split(","))[0]+"})?$",c=new RegExp(l);else c=/^-?\d+((\d)+)*(\.\d{1,2})?$/;return c.test(s)?(a&&(o.value=s),!0):(a&&("inline"==$("#fieldUpdateValidationType").val()||"inline"==i?renderingUtils.displayErrorDiv(e,t,I18n.getValueForFields("crm.field.valid.check",t)):_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getValueForFields("crm.field.valid.check",t)}}),o.setAttribute("autocomplete","off"),o.focus()),!1)}return!0},phoneValidate:function(e,t,r,n,i=!0){return 0!=validationUtils.patternValidate(e,t,"PHONE",void 0,r,void 0,n,void 0,i)},intValidate:function(e,t,r,n,i=!0){var a=getElm(r,e);if(null!=a&&0!=a.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){var o=getElm(r,e).value.replace(/^\s+/g,"").replace(/\s+$/g,""),s=I18n.getValueForFields("crm.field.valid.check",t);if(validationUtils.isValidInteger(o))return a.value=a.value.replace(/^\s+/g,"").replace(/\s+$/g,""),!0;if(i){null!=n&&(s=I18n.getValueForFields("crm.field.valid.check",$ESAPI.encoder().encodeForHTML(t))),renderingUtils.displayAlert(e,t,s,a,n),a.setAttribute("autocomplete","off");try{a.focus()}catch(e){murphy.error(e)}}return!1}return!0},numConstComp:function(e,t,r,n,i,a,o=!0){var s=getElm(i,e);if(!(s||(e="property("+t+")",s=getElm(i,e))))return!0;var l=parseFloat(getElm(i,e).value.replace(/^\s+/g,"").replace(/\s+$/g,""));n=parseFloat(n);var c=t.replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,"."),d=!0;switch(r){case"L":if(l>=n){if(o){var u=I18n.getValueForFields("crm.custom.field.less.than",[c,n]);renderingUtils.displayAlert(e,t,u,s,a)}d=!1}break;case"LE":if(l>n){if(o){u=I18n.getValueForFields("crm.custom.field.less.than.equalto",[c,n]);renderingUtils.displayAlert(e,t,u,s,a)}d=!1}break;case"E":l!=n&&(o&&_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getValueForFields("crm.custom.field.equalto",[c,n])}}),d=!1);break;case"NE":if(l==n){if(o){u=I18n.getValueForFields("crm.custom.field.not.equalto",[c,n]);renderingUtils.displayAlert(e,t,u,s,a)}d=!1}break;case"G":if(l<=n){if(o){u=I18n.getValueForFields("crm.custom.field.greater.than",[c,n]);renderingUtils.displayAlert(e,t,u,s,a)}d=!1}break;case"GE":if(l<n){if(o){u=I18n.getValueForFields("crm.field.comparision.check",[c,n]);renderingUtils.displayAlert(e,t,u,s,a),s.setAttribute("autocomplete","off")}d=!1}}return 0!=d||(o&&s.focus(),!1)},formValidate:function(e,t,r,n,i,a,o,s=!0){for(var l=!0,c=t||window.fieldname,d=r||window.fieldlabel,u=n||window.fielddatatype,m=$("#quick_module").val(),p=$("#leContModSel").val(),g=$("#leContModId").val(),f=0;f<c.length;f++){var h=u[f].split("~");if(e&&"null"!==e&&"undefined"!==e){var v=c[f].replace(/'/g,"\\'");C=$("[name='"+e+"'] [name='"+v+"']")[0]}else var C=getObj(c[f]);c[f].indexOf("Products in Bundle")>-1&&C.className.indexOf("MXNDUMMYCOLUMNBUNDLE")>-1&&(C.classList.contains("errorFieldP")&&C.classList.remove("errorFieldP"),C="#"+C.className);var y=c[f];if(!C&&v&&-1!==v.indexOf("Owner")){C=$("[name='"+e+"'] [name='property(ownerId)']")[0];var E=$(C).data();E&&8===E.uitype?y="property(ownerId)":C=void 0,$(C).closest("#call_qowner").hasClass("changeOwnerDisabled")&&(i="inline",$("#call_qowner").focus())}C&&a&&(c[f].indexOf("Products in Bundle")>-1&&"string"==typeof C&&C.indexOf("MXNDUMMYCOLUMNBUNDLE")>-1?Crm.checkIfLookUpAndLookUpValue($L(C)):Crm.checkIfLookUpAndLookUpValue($(C)));var L="M"===h[1],w=$(C).data();if(c[f].indexOf("Products in Bundle")>-1&&"string"==typeof C&&C.indexOf("MXNDUMMYCOLUMNBUNDLE")>-1&&(w=$L(C).data()),w&&"Currency"===w.sysrefname&&!Crm.userDetails.CURRENCY_DETAILS[w.previso].isActive&&(commonUtils.showErrorMsg($ESAPI.encoder().encodeForHTML(I18n.getMsg("crm.currency.active.check")),$(getElm(e,y))),l=!1),Crm.userDetails.LITE.IS_LITE_USER&&w&&8===w.uitype&&(L=!0),CFRExec&&validationUtils.isNotEmpty(CFRExec.QCObj)&&w){if(w.colname&&CFRExec.isLayoutRuleHiddenElem(w.colname))continue;L||!0!==w.mandate&&"true"!==w.mandate?L&&w.colname&&CFRExec.isLayoutRuleHiddenElem(w.colname)&&(L=!1):L=!0}if(L)if("property(DurationInMinute)"===c[f]||"property(DurationInSecond)"===c[f]||"property(Call Duration)"===c[f]){var b=0!=jQuery("input[name=whichCall]:checked").length?jQuery("input[name=whichCall]:checked").val():"",U=$("#Crm_Calls_CALLTYPE").children("option:selected").attr("actualvalue");"ScheduleCall"!==b&&"CurrentCall"!==b&&"Missed"!==U&&(commonUtils.emptyCheck(c[f],d[f],void 0,e,i,void 0,s)||(l=!1))}else commonUtils.emptyCheck(y,d[f],void 0,e,i,void 0,s)||(l=!1);switch(h[0]){case"O":case"V":case"C":break;case"E":C&&null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length&&(validationUtils.emailValidate(c[f],d[f],e,i,o,s)||(l=!1));break;case"DT":if(null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){if(void 0===h[3])var T="OTH";else T=h[3];CrmDateUtils.dateTimeValidate(c[f],h[2],d[f],T,e,i,s)||(l=!1),h[4]&&(CrmDateUtils.dateTimeComparison(c[f],h[2],d[f],h[5],h[6],h[7],h[4],e,i,s)||(l=!1))}break;case"D":if(null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){if(void 0===h[2])T="OTH";else T=h[2];CrmDateUtils.dateValidate(c[f],d[f],T,e,void 0,i,s)||(l=!1),h[3]&&(CrmDateUtils.dateComparison(c[f],d[f],h[4],h[5],h[3],i,s)||(l=!1))}break;case"T":if(null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){if(void 0===h[2])var M="OTH";else M=h[2];CrmDateUtils.timeValidate(c[f],d[f],M,e,i,s)||(l=!1),h[3]&&(CrmDateUtils.timeComparison(c[f],d[f],h[4],h[5],h[3],e,i,s)||(l=!1))}break;case"I":null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length&&(validationUtils.intValidate(c[f],d[f],e,i,s)||(l=!1),h[2]&&(validationUtils.numConstComp(c[f],d[f],h[2],h[3],e,i,s)||(l=!1)),"property(Probability)"==c[f]&&(C.value>100?(s&&renderingUtils.displayAlert(c[f],d[f],I18n.getMsg("crm.criteria.editor.probability.value.exceed"),C,i),l=!1):C.value<0&&(s&&renderingUtils.displayAlert(c[f],d[f],I18n.getValueForFields("crm.field.valid.check",$ESAPI.encoder().encodeForHTML(d[f])),C,i),l=!1)));break;case"B":null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length&&(validationUtils.intValidate(c[f],d[f],e,i,s)||(l=!1),h[2]&&(validationUtils.numConstComp(c[f],d[f],h[2],h[3],e,i,s)||(l=!1)));break;case"DE":if(null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){if(void 0===h[2])var A="any";else A=h[2];validationUtils.decimalValidate(c[f],d[f],A,e,i,s)||(l=!1),h[3]&&(validationUtils.numConstComp(c[f],d[f],h[2],h[3],e,i,s)||(l=!1))}break;case"N":if(null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){if(void 0===h[2])A="any";else A=h[2];validationUtils.numValidate(c[f],d[f],A,e,i,s)||(l=!1),h[3]&&(validationUtils.numConstComp(c[f],d[f],h[3],h[4],e,i,s)||(l=!1))}break;case"P":null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length&&(validationUtils.phoneValidate(c[f],d[f],e,i,s)||(l=!1));break;case"W":if(null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length){if(e)var I=document[e][c[f]];else I=document.getElementsByName(c[f])[0];if(!validationUtils.isValidWebUrl(I.value)){if(s){var x=I18n.getValueForFields("crm.field.valid.check","Website");renderingUtils.displayAlert("url","Website",x,I,i)}l=!1}}break;case"CL":null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length&&(checkSplChars(c[f],d[f],void 0,s)||(l=!1));break;case"R":null!=C&&0!=C.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length&&(checkMatchForRegex(c[f],d[f])||(l=!1));break;case"L":if(C){var R=(C=$(C)).data(),S=C.val();if(!(R&&R.id&&R.hasOwnProperty("selectedlookupvalue")&&""!=C.attr("data-selectedlookupvalue"))||""===S&&void 0===C[0].value||C.attr("data-old-value")==S||S==C[0].value&&C.attr("data-old-value")!=S&&S==C.attr("data-selectedlookupvalue")||(R.id=null,s&&($("#"+C[0].id).data("id",null),C.data("id",null))),R&&!R.id&&S&&S.trim()&&R.lookupModule){if(s){var _=moduleRecordMapping[R.lookupModule].singular_label;renderingUtils.displayAlert(c[f],d[f],I18n.getMsg("crm.label.lookup.norecord",_),C,i)}l=!1}else if(R&&S&&!R.id&&"property(Account Name)"===c[f]&&"Potentials"!==m){if(s){var D=I18n.getMsg("crm.label.lookup.norecord",moduleRecordMapping.Accounts.singular_label);crmui.showMsgBand("error",$ESAPI.encoder().encodeForHTML(D,C,i),3e3,"")}l=!1}if("Tasks"===m&&"property(modname)"===c[f]&&"Leads"===p&&""!==R.id&&""!==g){if(s){D=I18n.getMsg("crm.import.error.invalid.data");crmui.showMsgBand("error",$ESAPI.encoder().encodeForHTML(D,C,i),3e3,"")}l=!1}}}}var N=$("[name='"+e+"'] #quick_module").val();"Calls"===N&&(!1===validateCallTime2(e)&&(l=!1));if(N||(N=$("[name='"+e+"'] input[name=searchModule]").val()),"Campaigns"===N){var k=$("input[name=zohoSurveyCampaign]");if(k&&"true"===k.val())!1===ZSurvey.validateQCreateCampSurveyExtraFields(e,s)&&(l=!1)}return l},validateNumberFields:function(e){var t=e||window.event,r=t.which||t.keyCode;return!(r>31&&(r<48||r>57))}},cookieUtils={setCookie:function(e,t,r,n,i,a){var o=new Date;o.setDate(o.getDate()+r);var s=e+"="+t+"; ";r&&(s+="expires="+o.toUTCString()+"; "),i&&(s+="domain="+i+"; "),n&&(s+="path="+n+";"),a&&(s+=" secure"),document.cookie=s},updateCookie:function(e,t,r){var n=this.getCookie(e),i=t;i=i.replace(/\./gi,"\\."),i=new RegExp(i),n?n=n.search(i)>-1||r?(n=(n=(n=n.replace(i,"","g")).replace(/,{2,}/gi,",")).replace(/^,/,"")).replace(/,$/,""):n+","+t:r||(n=t),n?this.setCookie(e,n):this.deleteCookie(e)},getCookie:function(e){var t=document.cookie,r=t.indexOf(" "+e+"=");if(-1===r&&(r=t.indexOf(e+"=")),-1===r)t=null;else{r=t.indexOf("=",r)+1;var n=t.indexOf(";",r);-1===n&&(n=t.length),t=unescape(t.substring(r,n))}return t},deleteCookie:function(e,t,r){var n=new Date;n.setTime(n.getTime()-1);var i=e+"= ; expires="+n.toGMTString()+"; ";t&&(i+="path="+t+";"),r&&(i+="domain="+r+";"),document.cookie=i}},currencyUtils={ROUNDINGOPTION:{NORMAL:0,ROUND_OFF:1,ROUND_UP:2,ROUND_DOWN:3},getPresentCurrencySepartor:function(){var e=$("#subvalue_CURRENCYISOCODE").text();return""===e&&(e=Crm.userDetails.BASE_CURRENCY),Crm.userDetails.CURRENCY_DETAILS&&Crm.userDetails.CURRENCY_DETAILS[e]?Crm.userDetails.CURRENCY_DETAILS[e]?Crm.userDetails.CURRENCY_DETAILS[e].format.split("|")[0]:",":Crm.userDetails.defaultOrgCurrency&&Crm.userDetails.DEFAULT_ORG_CURRENCY&&Crm.userDetails.DEFAULT_ORG_CURRENCY.format?Crm.userDetails.DEFAULT_ORG_CURRENCY.format.split("|")[0]:","},applyRounding:function(e,t,r,n){if(!isNaN(e)&&r>-1){var i=e.toString().split(".");return i&&i[1]&&i[1].length>r&&(e=Number(e).toFixed(16),currencyUtils.ROUNDINGOPTION.ROUND_OFF===n?e=Math.round(e*Math.pow(10,r))/Math.pow(10,r):currencyUtils.ROUNDINGOPTION.ROUND_DOWN===n?e=Math.floor(e*Math.pow(10,r))/Math.pow(10,r):currencyUtils.ROUNDINGOPTION.ROUND_UP===n&&(e=Math.ceil(e*Math.pow(10,r))/Math.pow(10,r))),e}return e},returnValueInDefaultCurrency:function(e,t,r,n,i,a,o,s,l){o=0!=o;var c,d,u=Crm.userDetails;e||(e=u.IS_MULTI_CURRENCY_ENABLED?Crm.userDetails.BASE_CURRENCY:u.defaultCurrencyISOCode);var m=currencyUtils.isIndianFormatSupportCurrency(e);if(isNaN(a)||(t=currencyUtils.applyRounding(t,i,a,s)),!u.CURRENCY_DETAILS[u.BASE_CURRENCY]&&m)d=Crm.userDetails.DECIMAL_SEPARATOR.replace("_","-"),c=currencyUtils.formatCurrencyValue(t,d,null,null,r),c=""!==u.BASE_CURRENCY&&e==u.BASE_CURRENCY&&u.CURRENCY_DETAILS&&u.CURRENCY_DETAILS[u.BASE_CURRENCY]?o?u.CURRENCY_DETAILS[e].symbol+" "+c:c:o?u.defaultOrgCurrency+" "+c:c;else{var p=parseFloat(t),g=void 0!==r?r:void 0!==u.defaultRoundOff?parseInt(u.defaultRoundOff):2,f=currencyUtils.decimalLengthCheck(p,g);c=currencyUtils.getNumberWithCommas(f,",",".");var h=currencyUtils.decimalLengthCheck(p,g);if(u.CURRENCY_DETAILS[u.BASE_CURRENCY]&&e){g=l?r:parseInt(u.CURRENCY_DETAILS[u.BASE_CURRENCY].decimals);var v=l?r:parseInt(u.CURRENCY_DETAILS[e].decimals),C=(n?t/parseFloat(n):t/parseFloat(u.CURRENCY_DETAILS[e].er))+"",y=u.CURRENCY_DETAILS[e].format.split("|"),E=u.CURRENCY_DETAILS[u.BASE_CURRENCY].format.split("|");if(e&&m)d="en-IN",L=currencyUtils.formatCurrencyValue(f,d,y[0],y[1],l?r:u.CURRENCY_DETAILS[e].decimals);else var L=currencyUtils.getNumberWithCommas(Number(currencyUtils.decimalLengthCheck(p,v)).toFixed(v),y[0],y[1]);if(e==u.BASE_CURRENCY)c=o?u.CURRENCY_DETAILS[e].symbol+" "+L:L;else{var w=currencyUtils.decimalLengthCheck(parseFloat(C),g);if(u.BASE_CURRENCY&&currencyUtils.isIndianFormatSupportCurrency(u.BASE_CURRENCY)){d="en-IN";var b=L+" ("+u.CURRENCY_DETAILS[u.BASE_CURRENCY].symbol+" "+currencyUtils.formatCurrencyValue(w,d,E[0],E[1],u.CURRENCY_DETAILS[u.BASE_CURRENCY].decimals)+")";c=o?u.CURRENCY_DETAILS[e].symbol+" "+b:b}else{b=L+" ("+u.CURRENCY_DETAILS[u.BASE_CURRENCY].symbol+" "+currencyUtils.getNumberWithCommas(w,E[0],E[1])+")";c=o?u.CURRENCY_DETAILS[e].symbol+" "+b:b}}}else if(u.defaultOrgCurrency){y=u.DEFAULT_ORG_CURRENCY&&u.DEFAULT_ORG_CURRENCY.format?u.DEFAULT_ORG_CURRENCY.format.split("|"):[",","."];"SFr."==u.defaultOrgCurrency&&(u.defaultOrgCurrency="CHF"),c="EUR"===e?o?currencyUtils.getNumberWithCommas(h,y[0],y[1])+" "+u.defaultOrgCurrency:currencyUtils.getNumberWithCommas(h,y[0],y[1]):o?u.defaultOrgCurrency+" "+currencyUtils.getNumberWithCommas(h,y[0],y[1]):currencyUtils.getNumberWithCommas(h,y[0],y[1])}else if(u.CURRENCY_DETAILS&&u.BASE_CURRENCY&&u.CURRENCY_DETAILS[u.BASE_CURRENCY]){g=parseInt(u.CURRENCY_DETAILS[u.BASE_CURRENCY].decimals),h=currencyUtils.decimalLengthCheck(p,g);y=u.CURRENCY_DETAILS[u.BASE_CURRENCY].format.split("|");c=o?u.CURRENCY_DETAILS[u.BASE_CURRENCY].symbol+" "+currencyUtils.getNumberWithCommas(h,y[0],y[1]):currencyUtils.getNumberWithCommas(h,y[0],y[1])}}return c},returnValueInDefaultCurrencyAsArray:function(e,t,r,n,i,a,o){var s=Crm.userDetails;isNaN(a)||(t=currencyUtils.applyRounding(t,i,a,o));var l=[];l[0]=currencyUtils.getNumberWithCommas(parseFloat(t),",",".");var c=void 0!==r?r:void 0!==s.defaultRoundOff?parseInt(s.defaultRoundOff):2,d=parseFloat(t),u=Number(currencyUtils.decimalLengthCheck(d,c)).toFixed(c);if(s.CURRENCY_DETAILS[s.BASE_CURRENCY]&&e){c=parseInt(s.CURRENCY_DETAILS[s.BASE_CURRENCY].decimals);var m=parseInt(s.CURRENCY_DETAILS[e].decimals),p=(n?t/parseFloat(n):t/parseFloat(s.CURRENCY_DETAILS[e].er))+"",g=s.CURRENCY_DETAILS[e].format.split("|"),f=(s.CURRENCY_DETAILS[s.BASE_CURRENCY].format.split("|"),currencyUtils.getNumberWithCommas(Number(currencyUtils.decimalLengthCheck(d,m)).toFixed(m),g[0],g[1]));if(e==s.BASE_CURRENCY)l[0]=f;else{var h=Number(currencyUtils.decimalLengthCheck(parseFloat(p),c)).toFixed(c);l[0]=currencyUtils.getWholeOrDecimalValue(h,c)+"",l[1]=f}}else if(s.defaultOrgCurrency){g=s.DEFAULT_ORG_CURRENCY&&s.DEFAULT_ORG_CURRENCY.format?s.DEFAULT_ORG_CURRENCY.format.split("|"):[",","."];l[0]=currencyUtils.getNumberWithCommas(u,g[0],g[1])}else if(s.CURRENCY_DETAILS&&s.BASE_CURRENCY&&s.CURRENCY_DETAILS[s.BASE_CURRENCY]){c=parseInt(s.CURRENCY_DETAILS[s.BASE_CURRENCY].decimals),u=Number(currencyUtils.decimalLengthCheck(d,c)).toFixed(c);g=s.CURRENCY_DETAILS[s.BASE_CURRENCY].format.split("|");l[0]=currencyUtils.getNumberWithCommas(u,g[0],g[1])}return l},isValidCurrency:function(e,t,r,n){return validationUtils.isValidDecimal(e,t,r,n)},decimalLengthCheck:function(e,t){if(""===e)return e;var r=/^-?(\d+)?(\.){0,1}(\d+)*$/.exec(e);if(!r)return e;var n=r[3];if(n&&e.toString().length>16&&1==n.length)return e+"0";var i=Crm.userDetails.IS_MULTI_CURRENCY_ENABLED;return!n&&!i&&t>0&&Crm.userDetails.defaultRoundOff&&Crm.userDetails.defaultRoundOff>0?e.toFixed(Crm.userDetails.defaultRoundOff):!n&&i&&t>0||n&&i&&n.length<3?e.toFixed(t):n&&!i&&1==n.length&&t>1?(t=2,e.toFixed(t)):n&&n.length>t?e.toFixed(t):e},getCurrencyWithoutSeperator:function(e){if(e=e.replace(/\u00a0/g,""),!((e=/[0-9\.,]+/g.exec(e))&&e.length>0))return"";e=(e=e[0]).replace(/^\./g,"");var t=currencyUtils.getPresentCurrencySepartor();if("."===t){for(e=e.replace(/\./g,"");e.search(/,(\d+)?0$/)>-1;)e=e.replace(/0$/,"");e=(e=e.replace(/,$/,"")).replace(/,(\d+$)/,".$1")}else if(""===t.trim()){for(e=e.replace(/\ /g,"");e.search(/,(\d+)?0$/)>-1;)e=e.replace(/0$/,"");e=(e=e.replace(/,$/,"")).replace(/,(\d+$)/,".$1")}else{for(e=e.replace(/,/g,"");e.search(/\.(\d+)?0$/)>-1;)e=e.replace(/0$/,"");e=e.replace(/\.$/,"")}return e},formatCurrencyValue:function(e,t,r,n,i){","===r&&"."===n||(r=",",n=".");var a,o=Crm.userDetails,s=o.DEFAULT_ORG_CURRENCY&&o.DEFAULT_ORG_CURRENCY.format?o.DEFAULT_ORG_CURRENCY.format.split("|"):[",","."];i=void 0!==i?i:void 0!==o.defaultRoundOff?parseInt(o.defaultRoundOff):2,r=void 0!==r&null!==r?r:s[0],n=void 0!==n&null!==n?n:s[1],"string"!=typeof e&&(e=e.toString()),a=-1==i||0==i?2:i;var l=e;e=-1!==e.indexOf(".")?Intl.NumberFormat(t,{minimumFractionDigits:1,maximumFractionDigits:a}).format(e):Intl.NumberFormat(t,{maximumFractionDigits:a}).format(e);var c,d,u=new Intl.NumberFormat(t).format(11111).replace(/1/g,""),m=new Intl.NumberFormat(t).format(1.1).replace(/1/g,""),p=(l=Intl.NumberFormat("en-IN",{maximumFractionDigits:a}).format(l)).split(u).join(u);if(Crm.userDetails.IS_MULTI_CURRENCY_ENABLED||""!=Crm.userDetails.BASE_CURRENCY)if(c=(p=(p=(p=p.replaceAll(m,"/")).replaceAll(u,r)).replaceAll("/",n)).split(n),0===i)p=c[0];else if(c.length<=1){let e="";c[1]=e.padEnd(i,"0"),p=c[0]+n+c[1]}else(d=c[c.length-1]).length<i&&(d=d.padEnd(i,"0"),p=c[0]+n+d);else c=(p=(p=(p=p.replaceAll(".","/")).replaceAll(",",r)).replaceAll("/",n)).split(n),0===i?p=c[0]:c.length<=1&&i>1?p=p+n+"00":c.length<=1&&1==i?p=p+n+"0":1===(d=c[c.length-1]).length&&i>1&&(p+="0");return p},getNumberWithCommas:function(e,t,r){t=t||",",r=r||".";var n=e.toString().split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),n.join(r)},getWholeOrDecimalValue:function(e,t){return isNaN(e)||0===e.toString().length?void 0:e-Math.floor(e)==0?parseFloat(e):Number(e).toFixed(t)},getCurrencySymbol:function(e){switch(e){case"USD":case"AUD":case"SGD":case"MXN":default:return"$";case"CNY":return"¥ /元";case"INR":return decodeURI("₹");case"JPY":return"¥";case"GBP":return"£";case"EUR":return"€"}},getCurrencyValue:function(e,t,r){if(""===e)return e;var n=Crm.userDetails.CURRENCY_DETAILS,i=parseFloat(n[t].er),a=n[r].er,o=e/i,s=parseFloat(a),l=parseInt(n[r].decimals);return commonUtils.roundNumber(o*s,l)},populateCurrencyDetails:function(e,t,r){var n=$ESAPI.encoder().encodeForHTML(e.value),i=e.options[e.selectedIndex],a=i.getAttribute("symbol"),o=document.getElementById("confirm_bbtn");if(""==n)return showHideDivSpan("active_spn;exchangeRate_div;currencyFormatDiv_"+t,"none"),void("setup"==r&&o.setAttribute("disabled","disabled"));document.getElementById("currencyName_"+t).value=i.innerHTML,document.getElementById("currencySymbol_"+t).value=i.getAttribute("symbol"),document.getElementById("currFrmtDiv_"+t).style.display="none";for(var s=document.getElementById("currencySymbol_front");s.hasChildNodes();)s.removeChild(s.lastChild);var l=document.createElement("OPTION");l.setAttribute("value",a),l.innerHTML=a,s.appendChild(l),n!=a&&((l=document.createElement("OPTION")).setAttribute("value",n),l.innerHTML=n,s.appendChild(l));var c=i.getAttribute("decimalplace");currencyUtils.setCurrencyCustomValue("decimalPlace_"+t,c);var d=i.getAttribute("decimalSep");currencyUtils.setCurrencyCustomValue("decimalSeparator_"+t,d);var u=i.getAttribute("thousandSep");currencyUtils.setCurrencyCustomValue("thousandSeparator_"+t,u),currencyUtils.selectCurrencyFormat(t),showHideDivSpan("active_spn;exchangeRate_div","table-row"),"DIV"===$("#currencyFormatDiv_"+t).prop("tagName")?showHideDivSpan("currencyFormatDiv_"+t,"block"):showHideDivSpan("currencyFormatDiv_"+t,"table-row");var m=getObj("exchangeRate_"+t);m&&m.focus(),"setup"==r&&o.removeAttribute("disabled")},selectCurrencyFormat:function(e){var t=$L("#currencySymbol_"+e)[0].value;if(currencyUtils.validateCurrencySeparators(e)){""===t&&(t=Crm.userDetails.CURRENCY_DETAILS[Crm.userDetails.BASE_CURRENCY].symbol);var r=$L("#decimalPlace_"+e)[0].value,n="1#234#567@899999",i=!1,a=base.CURRENCY_DETAILS[isoCode].format.split("|");a[2]&&"2"===a[2]&&(","===a[0]&&"."===a[1]?i=!0:!["INR","BDT","MMK","PKR"].includes(isoCode)||","===a[0]&&"."===a[1]||(i=!0)),i&&(n="12#34#567@899999");var o=getObj("decimalSeparator_"+e).value,s=getObj("thousandSeparator_"+e).value;return n=n.replace(/#/g,s),n="0"==r?n.substring(0,n.indexOf("@")):(n=n.replace("@",o)).substring(0,n.length-(6-r)),$("#dispCurrencySymbol_"+e).empty(),document.getElementById("dispCurrencySymbol_"+e).innerHTML=t,$("#dispCurrencyFormat_"+e).empty(),document.getElementById("dispCurrencyFormat_"+e).innerHTML=$ESAPI.encoder().encodeForHTML(n),currencyUtils.setHiddenCurrencyFormat(e),!0}return!1},setCurrencyCustomValue:function(e,t){for(var r=getObj(e),n=r.options.length,i=0;i<n;i++)r.options[i].value==t&&(r.options[i].selected=!0)},setHiddenCurrencyFormat:function(e){var t=getObj("decimalSeparator_"+e).value,r=getObj("thousandSeparator_"+e).value;getObj("currencyFormat_"+e).value=r+"|"+t},validateCurrencySeparators:function(e){var t=getObj("decimalPlace_"+e).value;getObj("decimalSeparator_tr_"+e).style.display=0==t?"none":"";var r=getObj("decimalSeparator_"+e).value,n=getObj("thousandSeparator_"+e).value;return 0!=t&&r==n?(document.getElementById("customize_err_"+e).style.visibility="visible",document.getElementById("ok_btn_"+e).setAttribute("disabled","disabled"),!1):(document.getElementById("customize_err_"+e).style.visibility="hidden",document.getElementById("ok_btn_"+e).removeAttribute("disabled"),!0)},isIndianFormatSupportCurrency:function(e){var t=["INR","BDT","MMK","PKR"],r=Crm.userDetails;if(r.IS_MULTI_CURRENCY_ENABLED&&r.CURRENCY_DETAILS[e]){var n=r.CURRENCY_DETAILS[e].format.split("|");if(n[2]){if("2"===n[2]&&","===n[0]&&"."===n[1])return!0;if("2"===n[2]&&t.includes(e)&&(","!==n[0]||"."!==n[1]))return!0}else if(t.includes(e))return!0}else if(t.includes(e)||t.includes(r.defaultCurrencyISOCode))return!0;return!1},isCurrencyField:function(e){return e==CrmField.UITYPES.CURRENCY||e==CrmField.UITYPES.CURRENCY_ROUND_OFF||e==CrmField.UITYPES.CURRENCY_ROUND_DOWN||e==CrmField.UITYPES.CURRENCY_ROUND_UP},getOperatorsLen:function(e){var t=e.match(new RegExp("[+-/*.]","g"));return t?t.length:0}},networkUtils={filesArray:[],constructUrl:function(e,t){var r=e,n=0;for(var i in t)r+=0==n?"?"+i+"="+t[i]:"&"+i+"="+t[i],n++;return r},constructEncodedUrl:function(e,t,r){var n=e,i=0;for(var a in t)r&&/\b(calleeObj|clickId)\b/.test(a)||(n+=0==i?"?"+a+"="+encodeURIComponent(t[a]):"&"+a+"="+encodeURIComponent(t[a]),i++);return n},setCsrfParam:function(e){e[csrfParamName]=csrfToken},openUrl:function(e,t,r){if(null==r&&null!=t&&"_top"!==t&&"_self"!==t&&"_parent"!==t)t=t||"",r="noopener noreferrer",window.open(e,t,r);else{"_self"===t&&(e=Utils.getUpdatedFrameOriginURL(e));var n=window.open(e,t,r);"widgetConnectorAuthorize"!==t&&n&&(n.opener=null)}},openUrlwithpopBlockerHandle:function(e,t){var r,n=window.open(e);return null==n?(renderingUtils.showCustomAlert(t,"",!0),r=!0):(n.opener=null,r=!1),r},getCdnUrl:function(e){var t=FingerPrint.primaryCdnUrl;return crmConstants.isCNCDN&&(t=FingerPrint.dynamicCdnUrl),t},constructScriptPath:function(e,t,r){var n,i,a,o=""===(t="CRM"===t?"":t)?"":t+"/";if(i=FingerPrint.basePathUrl+o,r)if(r===ResourceConstants.ADDONS)i+=r+"/";else{e="compiled-css/"+r+"/"+(Crm.userDetails.RTL_ENABLED?"rtl":"ltr")+"/"+e,i+="css/"}else{var s=e.match(".[0-9a-z]+$")[0];".css"===s?r=ResourceConstants.CSS:(".js"===s||e.includes("lux")&&".json"===s)&&(r=ResourceConstants.JAVASCRIPT),i+=r+"/"}return FingerPrint.isCdnEnabled?(networkUtils.cdnUrl=networkUtils.getCdnUrl(t),a=r!==ResourceConstants.ADDONS?""===t?commonUtils.getfingerPrintProperties(e):commonUtils.getfingerPrintProperties(e,t):commonUtils.getfingerPrintProperties(e,t,r),n=networkUtils.cdnUrl+i+a):n=i+e,n},returnDependencyFiles:function(e,t,r){var n;if(crmConstants.compression)n=e;else if(Array.isArray(e)){e=commonUtils.getArrayList(e);var i=networkUtils.fetchUncompressedFiles(e);n=[];for(var a=i.length,o=0;o<a;o++){var s=i[o];if("string"==typeof s)n=n.concat(s);else{var l=s.length,c={};c.parent=s[l-2],c.child=s[l-1];for(var d=l-3;d>=0;d--){var u={};u.parent=s[d],u.child=c,c=u}n=n.concat(c)}}}else n=e;var m=!1;Array.isArray(n)||(n=[n],m=!0);l=n.length;for(var p=0;p<l;p++)"object"==typeof n[p]?(n[p].parent=networkUtils.returnDependencyFiles(n[p].parent,t,r),n[p].child=networkUtils.returnDependencyFiles(n[p].child,t,r)):n[p]=networkUtils.constructScriptPath(n[p],t,r);return m?n[0]:n},returnFilesWithPath:function(e){for(var t=[],r=e.length,n=0;n<r;n++){var i,a=commonUtils.getfingerPrintProperties(e[n]);i=e[n]!=a?(i=(i=FingerPrint.basePathUrl+ResourceConstants.JAVASCRIPT+"/"+a).split(/crm(.+)/)[1]).replace(/\/+/g,"/"):(i=(i=FingerPrint.basePathUrl+ResourceConstants.JAVASCRIPT+"/"+e[n]).split(/crm(.+)/)[1]).replace(/\/+/g,"/"),t.push(i)}return t},loadFeatureScripts:function(e,t,r){if(!crmConstants.compression){for(var n=networkUtils.fetchUncompressedFiles(e),i=[],a=n.length,o=0;o<a;o++)i=i.concat(n[o]);e=i}var s=networkUtils.returnFilesWithPath(e),l=networkUtils.returnUnloadedFiles(e,s);0!==l.length?networkUtils.loadScripts(l,t,r):t&&t()},loadScripts:function(e,t,r){if(e.length){var n=FingerPrint.basePathUrl+ResourceConstants.JAVASCRIPT+"/"+e[0],i=[];i.push(e[0]);var a=networkUtils.returnFilesWithPath(i);CJS.execScript(n,(function(){networkUtils.filesArray.push(a[0]);var n=e.splice(1,e.length);networkUtils.loadScripts(n,t,r)}),void 0,void 0,r)}else t&&t()},fetchUncompressedFiles:function(e){for(var t=e.length,r=[],n=0;n<t;n++){if(CRM_COMPRESSION_LIST[e[n]])1!==(o=CRM_COMPRESSION_LIST[e[n]]).length?r[n]=o:r=r.concat(o);else if("object"==typeof e[n]){for(var i=e[n].length,a=e[n],o=[],s=0;s<i;s++)o=CRM_COMPRESSION_LIST[a[s]]?o.concat(CRM_COMPRESSION_LIST[a[s]]):o.concat(a[s]);r[n]=o}else r=r.concat(e[n])}return r},returnUnloadedFiles:function(e,t){for(var r=Object.keys(Lyte.injectResources.availableTags),n=r.length,i=[],a=[],o=0;o<n;o++)r[o]=r[o].replace(/\/+/g,"/"),r[o]=r[o].split(/crm(.+)/)[1],r[o]&&(r[o]=r[o].split(".js")[0]+".js"),r[o]&&!networkUtils.filesArray.contains(r[o])&&networkUtils.filesArray.push(r[o]);if(networkUtils.filesArray.length>0){var s=e.length;for(o=0;o<s;o++)networkUtils.filesArray.contains(t[o])||(i.push(e[o]),a.push(t[o]));return i}return e},checkscriptSource:function(){for(var e,t=$("script"),r=t.length,n=0;n<r;n++)(e=t[n].src)&&(e=(e=e.replace(/\/+/g,"/")).split(/crm(.+)/)[1])&&(e=e.split(".js")[0]+".js"),e&&!networkUtils.filesArray.contains(e)&&networkUtils.filesArray.push(e)},makeRequest:function(e,t,r){var n=r.params||{},i=r.headers||{},a=!r.skip_load_tab,o=r.success_callback,s=r.failure_callback,l=r.data_type,c=r.content_type,d=t;t="PUT"===t||"PATCH"===t||"DELETE"===t?"POST":t,a&&commonUtils.showHideLoadingDiv(!0),i["X-ZCSRF-TOKEN"]=csrfParamName+"="+cookieUtils.getCookie("crmcsr"),window.clientPortalName&&(i["X-CRMPORTAL"]=window.clientPortalName),d!=t&&(i["X-HTTP-Method-Override"]=d);var u=new crmRequestPool,m={action:e,type:t,data:n,dataType:l,contentType:c,headers:i,crossDomain:r.crossDomain,success:function(e){a&&commonUtils.showHideLoadingDiv(!1),"function"==typeof o&&o(e)},error:function(e){if(a&&commonUtils.showHideLoadingDiv(!1),s){if(555===e.status&&"Duplicate report Name"===e.responseText){var t=I18n.getMsg("crm.label.name.already.exist");$("#reportName").focus().next().removeClass("dN").text(t).show()}s(e)}else o(e.responseJSON)}};u.initiate(m)},getUrlParamKey:function(e,t){for(var r=t?Object.keys(t):[],n="",i=r.length,a=0;a<i;a++){var o=r[a];n=n?n.concat("_"+t[o]):t[o]+""}return e+"_"+n},lyteInitiateRequest:function(e,t,r,n){if(n){var i=networkUtils.getUrlParamKey(e,r.params),a=app.reqCache[i];if(a)return a}var o=new Promise((function(n,i){(r=r||{}).success_callback=n,r.failure_callback=i,networkUtils.makeRequest(e,t,r)}));return n&&(app.reqCache[i]=o),o},parseUrl:function(e){var t=document.createElement("a");t.href=e;var r=e.indexOf("?");r<0&&(r=e.length);var n=e.substring(0,r),i=(n=n.replace(".do","")).lastIndexOf("/");n=n.substring(i+1);var a=e.substring(r+1),o={};if(0!==a.length)for(var s=(a=a.replace(t.hash,"")).split("&"),l=s.length,c=0;c<l;c++){var d=s[c].indexOf("="),u=s[c].substring(0,d);if(s[c].indexOf("#")>0)var m=s[c].substring(d+1,s[c].indexOf("#"));else m=s[c].substring(d+1);o[u]=m}return{action:n,params:o,hash:t.hash}},sendxhr:function(e,t,r,n){return new Promise((function(i,a){var o=new XMLHttpRequest;for(var s in o.open(t,e,!0),(r=r||{})["X-ZCSRF-TOKEN"]=csrfParamName+"="+csrfToken,r["X-CRM-ORG"]=crmZgid,window.clientPortalName&&(r["X-CRMPORTAL"]=window.clientPortalName),"undefined"!=typeof crmZgid&&crmZgid&&(r["X-CRM-ORG"]=crmZgid),r)o.setRequestHeader(s,r[s]);o.send(n),o.onreadystatechange=function(){if(4===o.readyState)return"2"===o.status.toString()[0]||"3"===o.status.toString()[0]?i(o):a(o)}}))},getI18nJSUrl:function(e){return"i18n/"+Crm.userDetails.jsLocation+e.toLowerCase()+"/zohocrm_"+$ESAPI.encoder().encodeForJavaScript(Crm.userDetails.RELEVANT_LOCALE)+".js"},getQueryVariable:function(e){for(var t=window.location.search.substring(1).split("&"),r=t.length,n=0;n<r;n++){var i=t[n].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}},getDomainNameFromUrl:function(e){var t=/([a-zA-Z]+):\/\/([\-\w\.]+)(?:\:(\d{0,5}))?/.exec(e);if(null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0){var r=t[2];return t.length>3&&"string"==typeof t[3]&&t[3].length>0&&(r=r+":"+t[3]),r}return null},darkLightSwitch:function(e,t){var r="lightmode"===t?"darkmode":"lightmode",n=e.lastIndexOf("_"+t),i=[];return i.push(e.substr(0,n)),i.push(e.substr(n)),e="lightmode"===t?"dark/"+i[0]+i[1].replace("_"+t,"_"+r):i[0].replace("dark/","")+i[1].replace("_"+t,"_"+r)},getImageUrl:function(e,t){var r=document.querySelector('[data-mode="dark"]'),n=null!==r&&"dark"===r.getAttribute("data-mode");if(n&&e.includes("_lightmode")?e=networkUtils.darkLightSwitch(e,"lightmode"):!n&&e.includes("_darkmode")&&(e=networkUtils.darkLightSwitch(e,"darkmode")),"object"==typeof FingerPrint&&"object"==typeof FingerPrint.config_image_properties){var i=networkUtils.getCdnUrl(t),a=ResourceConstants.CRM===t?"default":t,o=objectUtils.getValueFromObj(FingerPrint.config_image_properties[a].images,e.split("/")),s=[],l=e.lastIndexOf(".");s.push(e.substr(0,l)),s.push(e.substr(l));var c=o?s[0]+"_"+o+"_"+s[1]:e;return i+ResourceConstants.IMAGES[t]+"/"+c}return ResourceConstants.IMAGES[t]+"/"+e},replaceImageUrlsToDark:function(e){var t=document.querySelectorAll('img[data-image-mode="true"]');t.forEach((function(e){var t,r=e.src;if(r.includes("_lightmode")||r.includes("_darkmode")){if("object"==typeof FingerPrint&&"object"==typeof FingerPrint.config_image_properties){t=networkUtils.getCdnUrl();var n=r.lastIndexOf("."),i=[];i.push(r.substr(0,n-34)),i.push(r.substr(n)),r=i.join("")}else t=window.location.origin,r.includes(t)||(t="");r.includes("_darkmode")&&(r=r.replace("dark/","")),r.includes(ResourceConstants.IMAGES.CRM)?(r=r.replace(t+ResourceConstants.IMAGES.CRM+"/",""),e.src=networkUtils.getImageUrl(r,ResourceConstants.CRM)):r.includes(ResourceConstants.IMAGES.CRMClient)?(r=r.replace(t+ResourceConstants.IMAGES.CRMClient+"/",""),e.src=networkUtils.getImageUrl(r,ResourceConstants.CRMClient)):r.includes(ResourceConstants.IMAGES.CRMOrganization)&&(r=r.replace(t+ResourceConstants.IMAGES.CRMOrganization+"/",""),e.src=networkUtils.getImageUrl(r,ResourceConstants.CRMOrganization))}})),(t=document.querySelectorAll('img[data-image-getlogo="true"]')).forEach((function(t){t.src="dark"===e?Crm.Logo.Logo_url_white:Crm.Logo.Logo_url}))},initChart:function(){"undefined"!=typeof Highcharts&&CrmDashboard.initChart()},includeChartFiles:function(){return Crm.isZohoChartsEnabled?["zohocrm_chart.js"]:["highcharts.js"]},getPortalURL:function(e){return Crm.userDetails.CLIENT_ACCOUNT&&-1===e.indexOf(Crm.userDetails.CLIENT_PORTAL_URL_CONTEXT)&&-1===e.indexOf("/crm/v2/")&&-1===e.indexOf("/crm/v2.1/")&&-1===e.indexOf("/crm/v2.2/")&&-1===e.indexOf("/crm/v5/")&&(e="/"===e[0]?Crm.getCrmBasePath()+e:Crm.getCrmBasePath()+"/"+e),e},getOrgSpecificURL:function(e){if("undefined"!=typeof crmPortal&&crmPortal&&-1===e.indexOf("/crm/"+crmPortal+"/")){var t=e.indexOf("/crm/");if(0==t||-1!=t&&(e.startsWith(document.domain)||e.startsWith(location.protocol+"//"+document.domain))){var r=t+5;e=e.substring(0,r)+crmPortal+"/"+e.substring(r)}}return e},constructScriptOrLinkTagForUrl:function(e,t){var r=e.match(".[0-9a-z]+$")[0];if(t&&"function"==typeof t)var n=function(){this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onload=this.onreadystatechange=null,t())};if(".js"===r){var i=document.createElement("script");i.onload=i.onreadystatechange=n,i.src=e,document.head.appendChild(i)}else if(".css"===r){var a=document.createElement("link");a.onload=a.onreadystatechange=n,a.href=e,a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),document.head.appendChild(a)}}},renderingUtils="object"!=typeof renderingUtils?{}:renderingUtils;renderingUtils.fieldsJSONArray=[],$(document).ready((function(){renderingUtils.windowHeight=$(window).height(),renderingUtils.windowWidth=$(window).width(),renderingUtils.windowOuterHeight=$(window).outerHeight(),renderingUtils.windowOuterWidth=$(window).outerWidth()})),renderingUtils.getTargetElem=function(e){return e?e.target||e.srcElement:void 0},renderingUtils.positionArrow=function(e,t,r,n,i){var a=window.innerWidth?window.innerWidth:document.body.clientWidth,o=window.innerHeight?window.innerHeight:document.body.clientHeight,s=$("#"+t),l=s.outerWidth(),c=i.mouseclientY,d=i.mouseclientX,u=i.mousepageY,m=i.mousepageX,p=o-c,g=0,f=0,h="arrwLeft",v=s.outerHeight(),C=$("#eventViewPopup"),y=Lyte.registeredMixins["crm-emailconversation-view-mixin"]&&Lyte.registeredMixins["crm-emailconversation-view-mixin"].isEmailViewOpen();if(a-d-15>l?(g="wid_calCreate_opts_menu"==t?p>v+40?u-60:u-(v-p+150):p>v?u-30:u-(v-p+25),f=m+20,h="arrwRight"):(f=m-s.outerWidth()-20,g="wid_calCreate_opts_menu"==t?p>v+40?u-60:u-(v-p+150):p>v?u-30:u-(v-p+25),h="arrwLeft"),y&&(h=""),g=g<0?0:g,f=f<0?0:f,s.css({top:g-6,left:f}),"qcpopuparrow"===(n=n||"posArrow")){var E=$("."+n);E.removeClass("qcRight"),$(".ziaCallAnalyticswrapper").length||$(".etTrendsWrapper").length||E.attr({class:h}).css({left:"",top:u-g-3})}else $("#"+n).attr({class:h}).css({left:"",top:u-g-8});C.hide(),s.show();var L=$(e).parent();(L.hasClass("eventActionsMenu")||L.hasClass("quickCreateLink"))&&($(".eventActionsMenu a, .quickCreateLink a").removeClass("quickCreateLinkAct"),$(".eventActionsMenu span, .quickCreateLink span").removeClass("quickCreateLinkAct"),$(e).addClass("quickCreateLinkAct"))},renderingUtils.triggerEvent=function(e,t,r){t[0]&&(t[0][e]?t[0][e]():r?t.eq(0).trigger(e,r):t.eq(0).trigger(e))},renderingUtils.sectionSorting=function(){var e=!1,t=$(".connectedSortable");t.multiselectable({selectedClass:"selectedElem",cancel:".nosort",mousedown:function(e,t){"searchField"===document.activeElement.id&&$("#searchField").blur(),t.hasClass("nosort")&&t.removeClass("selectedElem"),t.hasClass("pinField")?$("ul#selectedColumns li.unPinField.selectedElem").removeClass("selectedElem"):t.hasClass("unPinField")&&$("ul#selectedColumns li.pinField.selectedElem").removeClass("selectedElem")}}),t.multisortable({items:"> li:not(.restrictSort)",selectedClass:"selectedElem",cancel:".nosort",start:function(t,r){var n=$(r.item).parent().attr("id");$("#"+("availableList"===n?"selectedColumns":"availableList")).children(".selectedElem").removeClass("selectedElem");var i=$(".selectedElem"),a=i.first(),o=document.createElement("span");a.hasClass("pinField")||$(o).addClass("multiMove"),a.append(o);var s=a.parent().attr("id");"availableList"===s?a.children(".addArrw").hide():a.children(".lArrowIcon").hide(),"selectedColumns"!==s||a.hasClass("pinField")||a.children(".pinIcon").hide(),i.addClass("cvSelected"),e=!1},beforeStop:function(t,r){var n=t.target.getAttribute("data-cid"),i=r.placeholder.parents("li").eq(0),a=i.attr("data-cid")?i.attr("data-cid"):r.placeholder[0].parentNode.getAttribute("data-cid"),o=$(".cvSelected");if("availableList"===n&&"availableList"===a)o.children(".multiMove").remove(),o.children("#add").hide(),o.filter(".selectedElem").removeClass("cvSelected").removeClass("selectedElem"),o.stop(!0,!0).animate({backgroundColor:"#fff3ad"}),o.stop(!0,!0).animate({backgroundColor:"white"},{duration:500,complete:function(){o.attr("style","margin-left: 11px; margin-right: 11px;")}}),e=!0;else if("selectedColumns"===n&&"availableList"===a){var s;$("#noRecords:visible").length>0&&renderingUtils.emptySearchBox(),o.removeClass("selectedElem").css({position:"",left:"",top:""}),o.children(".multiMove").remove();var l=$("li.noFields"),c=$("#selectedColumns"),d=$("#availableList"),u=d.find("li"),m=$(".pinField"),p=m.last(),g=m.length;$.each(o,(function(e){var t=$(o[e]);t.removeClass("selectedElem"),t.attr("mandatory")&&t.removeClass("cvSelected multiselectable-previous pR"),t.css({position:"",left:"",top:""});var r=t.children(".multiMove");if(r&&r.remove(),t.hasClass("pinField")||crmListView.originalOrder.splice(crmListView.originalOrder.indexOf(t.attr("field_id")),1),t.attr("mandatory")||t.hasClass("pinField"))c[0].classList.contains("pinnedUl")?t.hasClass("pinField")&&1===g?c.prepend(t):p.after(t):c.prepend(t),t.attr("mandatory")&&!t.hasClass("pinField")&&crmListView.originalOrder.unshift(t.attr("field_id"));else{l.length>0&&l.remove();var n=t.children(".SelectedElement").text();renderingUtils.fieldsJSONArray.push(n),renderingUtils.fieldsJSONArray.sort();var i=renderingUtils.fieldsJSONArray.indexOf(n);0!==i?u.eq(i-1).after(t):d.prepend(t[0]),t.children("#remove").hide(),t.removeClass("unPinField"),t.children().filter(".pinIcon").empty(),t.children(".pinIcon").attr({class:"pinIcon dIB fR pR",id:"pin",onClick:"crmListView.pinUnpinAction(this,event)",style:"display : none; cursor : pointer"}),s=t,t.attr("style","margin-left : 11px; margin-right : 11px;")}commonUtils.addToMandatory()})),s&&$L(".availableCol").scrollTo(s)}else if("availableList"===n&&"selectedColumns"===a){var f=$("#KanbanViewPopup");c=$("#selectedColumns");$.each(o,(function(e){var t=$(o[e]),r=t.children().find(".selectionClass");if(r.length>0&&$.each(r,(function(e){var t=$(r[e]),n=t.text();t.replaceWith($ESAPI.encoder().encodeForHTML(n))})),!f.length){var n=t.find(".pinIcon");t.addClass("unPinField"),n.html("<crmutil-icon icon-name='thumbtack' icon-class='zcicn-thumbtack crmBaseIcon '></crmutil-icon>"),c[0].classList.contains("pinnedUl")&&(n.addClass("pinDisabled"),n.attr("style","display : none; opacity: 0.5; cursor: default;"))}})),commonUtils.removeFromMandatory()}o.stop(!0,!0).animate({backgroundColor:"#fff3ad"}),o.stop(!0,!0).animate({backgroundColor:"white"},500)},update:function(){!0===e&&$(this).sortable("cancel")},stop:function(e,t){var r=e.target.getAttribute("data-cid"),n=$(".cvSelected"),i=!1,a=$(t.item),o=$("#availableList");a.hasClass("selectedElem")&&(a.removeClass("selectedElem"),"selectedColumns"===r&&(i=!0)),n.removeClass("cvSelected selectedElem").children(".multiMove").remove();var s=n.parent().attr("data-cid");if(i||"availableList"===r&&"selectedColumns"===s){for(var l=$("ul#selectedColumns").children()[n.index()>0?n.index()-1:0],c=0===n.index()?0:crmListView.originalOrder.indexOf($(l).attr("field_id"))+1,d=n.length,u=[],m=0;m<d;m++)n[m].classList.contains("pinField")||(-1!==crmListView.originalOrder.indexOf(n[m].getAttribute("field_id"))&&crmListView.originalOrder.splice(crmListView.originalOrder.indexOf(n[m].getAttribute("field_id")),1),u.push(n[m].getAttribute("field_id")));crmListView.originalOrder=crmListView.originalOrder.slice(0,c).concat(u,crmListView.originalOrder.slice(c))}if(n.children("#remove").hide(),n.children("#add").hide(),0===o.children("li").length){var p=document.createElement("li");p.setAttribute("class","nosort noFields"),$(p).html(I18n.getMsg("crm.customview.nofields")),o.append(p)}n.stop(!0,!0).animate({backgroundColor:"#fff3ad"}),n.stop(!0,!0).animate({backgroundColor:"white"},1e3),i||n.removeClass("multiselectable-previous multiselectable-shift")},receive:function(e,t){var r=e.target.getAttribute("data-cid"),n=$("li.noFields"),i=$("#availableList"),a=$(t.item);if("selectedColumns"===r&&$("#selectedColumns").find("li.sorl:not(.cvSelected)").length>=Search.MAX_COL_CNT){$(t.sender).sortable("cancel"),n.length>0&&n.remove();var o=a.children(".SelectedElement").text();renderingUtils.fieldsJSONArray.push(o),renderingUtils.fieldsJSONArray.sort();var s=renderingUtils.fieldsJSONArray.indexOf(o);0!==s?i.find("li").eq(s-1).after(a):i.prepend(t.item),a.children("#remove").hide(),a.attr("style","margin-left : 11px; margin-right : 11px;")}}}),t.sortable({items:"> li:not(.restrictSort)",connectWith:".connectedSortable",cancel:".nosort"})},renderingUtils.showCustomConfirmMessageNewModel=function(e,t,r){var n=$("#customConfirmationPop");n.find(".confirmWarning").html(e);var i=n.find(".confirmBtn").val(t.val),a=n.find(".cancelBtn").val(r.val);$("#diNotificationDiv").css("z-index",20);var o=function(e,t){e.fn&&e.fn(),$("#diNotificationDiv").css("z-index",""),renderingUtils.stopEvent(t);var r=$("#customConfirmationPop");hideAnimatePopup(r.attr("id")),setTimeout((function(){var e=r.find("[data-zcqa='confirm_cancelbtn']"),t=r.find("[data-zcqa='confirm_deletebtn']");e.attr("class","newgraybtn cancelBtn"),t.attr("class","primarybtn confirmBtn"),r.removeClass("bpLicenseErr")}),500)};i.off("click").click((function(e){o(t,e),featuresAvailable.NEXTGENUI_ENABLED&&"Back to Settings"===t.val&&Lyte.Router.getRouteInstance().transitionTo(Lyte.registeredMixins["crm-setup-mixin"].getFirstAvailableRouter())})),a.off("click").click((function(e){o(r,e),featuresAvailable.NEXTGENUI_ENABLED&&"Back to Home"===r.val&&Lyte.Router.transitionTo("crm.tab.module.begin","Home")})),showAnimatePopup(n.attr("id"))},renderingUtils.showCustomConfirmMessage=function(e,t,r){if($("#"+e).remove(),0===$("#"+e).length){var n=$("#confirmMsg1")[0].cloneNode(!0);n.id=e;for(var i=t.length,a=0;a<i;a++)$(n).find("#confirmMessage"+a).html(t[a]);i=r.length;for(a=0;a<i;a++)$(n).find("#confirmButton"+a).val(r[a].val),r[a].fn&&$(n).find("#confirmButton"+a).click(r[a].fn);$(n).addClass("w100_per"),document.body.appendChild(n)}else n=$("#"+e)[0];return renderingUtils.positionCenter(e),crmui.modalZIndex("nonLyte",n,"open"),n},renderingUtils.positionCenter=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.scrollLeft||document.body.scrollLeft,n=$("#"+e);if(renderingUtils.windowHeight>n.height())n.css({display:"block",position:"absolute",left:"50%",top:"50%","margin-left":-n.width()/2+r,"margin-top":-n.height()/2+t});else{var i=t+10;n.css({display:"block",position:"absolute",left:"50%",top:i,"margin-left":-n.width()/2+r,"margin-top":"0px"})}$(".eventPop").hasClass("ziaForEmailsCheck")&&n.css("z-index","316")},renderingUtils.constructList=function(e,t,r){var n=$("<div>",{style:"z-index:1000;#padding-right:20px;display:none"}),i=$("<ul>",{class:"timeList"});n.append(i);for(var a=e.length,o=0;o<a;o++){var s=e[o],l=$("<li>");if(i.append(l),r&&l.click((function(){r(this),n.hide()})),s.length)for(var c=s.length,d=0;d<c;d++)l.append(renderingUtils.createHTML(s[d]));else l.append(renderingUtils.createHTML(s));t&&t(l)}return n[0]},renderingUtils.stopEvent=function(e){if(!e)e=window.event;"yes"!=$("#isCFS").val()&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())},renderingUtils.bindEventForCreateHTML=function(e){var t=[],r=$(this);r.data("args_"+e.type)&&(t=t.concat(r.data("args_"+e.type)));var n=r.data("fn_"+e.type);"function"==typeof n?(t.unshift(e,this),n.apply(window,t)):(t.unshift(n,window,e,this),Lyte.registeredMixins["crm-utilities"].executeFunctionByName.apply("Utils",t))},renderingUtils.createHTML=function(e){e.length||(e=[e]);for(var t=document.createDocumentFragment(),r=e.length,n=0;n<r;n++){var i=e[n];if("text"!==i.name)var a=document.createElement(i.name);else{var o=i.content?i.content:i.html?i.html:i.textContent?i.textContent:"";a=document.createTextNode(o)}for(var s in i)/events|child|name|content|textContent/.test(s)||$(a)[s](i[s]);var l=i.events;if(l)for(var c=l.length,d=0;d<c;d++){var u=l[d],m=u.name,p=$(a);p.data("args_"+m,u.args),p.data("fn_"+m,u.fn),p[m](renderingUtils.bindEventForCreateHTML)}if(i.child){var g=i.child;for(c=g.length,d=0;d<c;d++)a.appendChild(this.createHTML(g[d]))}if(1===e.length)return a;t.appendChild(a)}return t},renderingUtils.setTooltip=function(e,t){var r=commonUtils.calculateAcceptableCharCount(e,t),n=t;t.length>r&&(t=t.substring(0,r-1)+"..."),$(e).empty(),e.innerHTML=revertSplChrs(t),e.title=n},renderingUtils.createSelectBox=function(e,t,r,n){var i=document.createElement("select");if($(i).addClass("select"),n&&$(i).attr(n),t&&$(i).attr("multiple","multiple"),"function"==typeof e)for(var a=0;;){var o=document.createElement("option"),s=e(a);if(!s)break;var l=s.content?s.content:s.html,c=s.value?s.value:l;$(o).html(l).val(c),"true"===s.defaultVal&&$(o).prop("selected",!0),i.appendChild(o),a++}else{a=0;for(var d=e.length;a<d;a++){o=document.createElement("option");var u=$(o);if("object"==typeof e[a]){e[a].attr&&u.attr(e[a].attr),"true"===e[a].default&&u.prop("selected",!0);l=e[a].content?e[a].content:e[a].html,c=e[a].value?e[a].value:l;u.html(l).val(c)}else u.html(I18n.getMsg(e[a])).val(e[a]);i.appendChild(o)}}return r&&$(i).change((function(){var e=this.getSelectedNode(this);r(e)})),i},renderingUtils.targetElement=function(e){return e?e.target?e.target:e.srcElement:void 0},renderingUtils.ShakeDivInfreeze=function(e,t,r,n,i){i=i||$("#FreezeLayer");var a=$("#sdiv"),o=a.is(":visible");i&&(i.click((function(){var n=$("#"+e),i=$L(window);!QuickActionSelObj&&(i.scrollTop()+renderingUtils.windowHeight-parseInt(n.css("top"))<0||i.scrollTop()-(parseInt(n.css("top"))+parseInt(n.height()))>0)?$L("#"+e).scrollTo({axis:"y",duration:1e3,offset:-80,onAfter:function(){renderingUtils.shakeAnimation(e,t,r)}}):renderingUtils.shakeAnimation(e,t,r)})),o&&a.hide(),$(".dItimesdiv").length&&($(".dItimesdiv #sdiv").hide(),$(".bestTimeListFilter").hide(),$(".tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask")))},renderingUtils.shakeAnimation=function(e,t,r){for(var n=r,i=document.getElementById(e),a=$("#sdiv"),o=a.is(":visible"),s=0;s<4;s++)switch(n=parseInt(-1*n),t){case"left":if(-1!==i.style.left.indexOf("%")){var l=parseInt(n/10);$("#"+e).animate({left:"+="+l+"%"},100)}else $("#"+e).animate({left:"+="+n},100);break;case"right":if(-1!==i.style.right.indexOf("%")){l=parseInt(n/10);$("#"+e).animate({right:"+="+l+"%"},100)}else $("#"+e).animate({right:"+="+n},100);break;case"up":$("#"+e).animate({top:"+="+n},100)}o&&a.hide(),$(".dItimesdiv").length&&(a.hide(),$(".bestTimeListFilter").hide(),$(".tA").removeClass("tA"),crmBstTime.hideBestTimeSuggestion("QuickCreateTask"))},renderingUtils.handleDummyLayer=function(e,t){var r=$("#Calendar");e?(hideMenu(event),renderingUtils.removeDummyBackground()):r.is(":visible")||renderingUtils.shakeAnimation(t,"left",30),$("#gotoDateContDiv").is(":visible")&&r.is(":visible")&&r.hide()},renderingUtils.dummyBackground=function(e,t){var r=$("#emptyLayer");if(r[0])return!0;var n=$L(window).scrollTop(),i=renderingUtils.windowHeight,a=renderingUtils.windowWidth;document.documentElement.style.overflow="hidden";var o=document.createElement("DIV");o.id="emptyLayer",o.className="emptyLayer",o.onclick=function(){renderingUtils.handleDummyLayer(e,t)},$(o).css({width:a,height:i,top:n}).appendTo("body"),!Crm.isHeadless&&crmNTC.isSignalDetailViewVisible()&&(r.css({"z-index":32}),$(".temp_freezelayer").length>0&&$("#duplicateEventMsg").css({"z-index":34})),$("#saveEventsBtn").attr("disabled","disabled")},renderingUtils.removeDummyBackground=function(){var e=$("#emptyLayer");$("#saveEventsBtn").removeAttr("disabled"),e.remove(),$("#FreezeLayer")[0]||(document.documentElement.style.overflow=""),e.css({"z-index":""});var t=$L("#createEditCallDiv"),r=$L("#eventCreatePopup");t&&0!==t.length&&"none"!==t[0].style.display||r&&0!==r.length&&"none"!==r[0].style.display||$("#duplicateEventMsg").css({"z-index":""})},renderingUtils.setEndToInputBox=function(e){(e=$(e).get(0)).focus();var t=e.value.length;e.setSelectionRange(t,t)},renderingUtils.displayErrorDiv=function(e,t,r,n){var i=$("#bulkUpdateFldsListForScheduler").is(":visible"),a=$(".depField").is(":visible"),o=$("#sIlookupFieldAddNew").is(":visible")||Crm.isFromSalesInbox,s="displayContent_"+e,l=$("[id='"+s+"']").length>0?document.getElementById(s):document.createElement("div");l.id=s,l.className="form_err_msg";var c=$("#quickConfig"),d=$("#imap_config_page"),u=c.length>0&&"true"===c.val(),m=d.length>0&&"true"===d.val();if(n&&0!==$(n).length||(n=getObj(e)),i&&!a&&!o){var p=$("#error_status_alert");return p.text(I18n.getValueForFields(r,t)),p.removeClass("dN").addClass("top30").show(),!1}if("pipelineStage"!=t&&"pipelineName"!=t||(l.style.top="auto",l.style.position="relative"),u||m?($(n).closest(".tabDivCreate").addClass("errorFieldP"),l.className="validateConfiguration form_err_msg",l.style.height="5%"):l.style.height="10%",!m&&!u||"displayContent_imapPort"!==l.id&&"displayContent_smtp_port"!==l.id||(l.style.cssText="left:"+parseInt($("#"+e+"_cont").position().left)+"px !important",l.style.bottom="-17px"),m&&"displayContent_imapServer"===l.id&&(l.style.top="25px"),"displayContent_appCmntsArea"===l.id&&(l.style.top="200px"),$(l).empty(),l.textContent=I18n.getValueForFields(r,t),"displayContent_days"===l.id&&(l.style.left=$("#ruleName").outerWidth()+$("#sign").outerWidth()+"px"),"displayContent_predictionCreationName"!==l.id&&"displayContent_recNameContri"!==l.id||($(n).parent().append(l),$(n).find("input").focus(),$(n).addClass("errorFieldP specialCharExcep"),$("#displayContent_predictionCreationName").show()),"displayContent_similarityCreationName"===l.id){$(n).parent().append(l);var g=$("#displayContent_similarityCreationName");g.css("top","130%"),g.parents(".similarityValidation").addClass("mB25")}$(n).addClass("err_fld"),"displayContent_imapServer"===l.id||"displayContent_smtp_server"===l.id||"displayContent_smtp_emails"===l.id||"displayContent_roleName"===l.id||"displayContent_reportsTo"===l.id||"displayContent_taskSubject"===l.id||"displayContent_days"===l.id||"displayContent_assignTo"===l.id?$(n).parent().append(l):"displayContent_sharingSrc_G"===l.id||"displayContent_sharingTo_G"===l.id||"displayContent_sharingSrc_R"===l.id||"displayContent_sharingTo_R"===l.id||"displayContent_emailTemplateId"===l.id||"displayContent_fieldOption1"===l.id||"displayContent_fieldValue1"===l.id?("displayContent_fieldValue1"===l.id&&(l.style.left=$("#fieldOption1").outerWidth()+"px"),$(n).closest("td").append(l),$(n).closest(".newSelect,.wf_chosen_ui"),$(n).parent().css("display","inline-block")):"displayContent_WFDateFieldsdd"===l.id||"displayContent_ruleName"===l.id?($(n).closest("tr").addClass("form_err_fld"),$(n).parent().append(l)):-1!==e.indexOf("noOfUnits")?$(n).closest(".wf_form_row").append(l):"WFTriggerFieldId0"===e?"SameFieldName"===t?$("#WFTriggerFieldsDIV").find(".wsNowrap").eq(0).append(l):($("#WFTriggerFieldsDIV").find(".wsNowrap").eq(0).append(l),$("#displayContent_"+e).css({position:"static",display:""})):"displayContent_appname"===l.id?($(n).closest("tr,.tabDivCreate").addClass("form_err_fld"),$("#authsubmit").after(l)):"displayContent_selectedProfileIds"===l.id?($(n).next().css({width:"90%"}),$(n).next().append(l)):"SELECT"===$(n).prop("tagName")?$(n).closest(".newSelect,.wf_chosen_ui").after(l):$(n).after(l),"ruleName"===e||"ruleDesc_inp"===e||"WFDateFieldsdd"===e||"showOnDateTime"===e||-1!==e.indexOf("noOfUnits")||"WFTriggerFieldId0"===e&&"SameFieldName"===t?$("#displayContent_"+e).css({position:"static",display:""}):$(n).closest("tr").addClass("form_err_fld"),e.indexOf("modOpt")>=0&&$("#wfDelugeEditorDIV").length>0&&$("#displayContent_"+e).css({position:"relative"}),$(n).parent().hasClass("newSelect")&&$(l).addClass("alter_err_pos"),$(n).parent().hasClass("wf_chosen_ui")&&$(l).addClass("alter_err_pos"),"relatedField_Stage"!==t&&"relatedField_Pipeline"!==t||$("#"+t).addClass("form_err_fld")},renderingUtils.displayAlert=function(e,t,r,n,i){"inline"===i?renderingUtils.displayErrorDiv(e,t,r,n):"custom"===i?setTimeout((function(){renderingUtils.showCustomAlert(r)}),70):renderingUtils.showCustomAlert(r)},renderingUtils.displayPermissionDenied=function(e,t,r,n,i,a,o){var s=document.querySelector("crm-left-menu");s&&s.component&&s.component.methods.hideContentLoader();var l,c=Lyte.Router.getRouteInstance().transition;i=null==i&&!0;if(200!==c.state&&app.prevTransition.route&&app.prevTransition.route.indexOf("crm.tab.module")>-1)for(var d=app.listViewLinkedRoutes.length,u=0;u<d;u++)if(c.info.route.indexOf(app.listViewLinkedRoutes[u])>-1){-1==c.info.route.indexOf("crm.settings.section")&&(crmHistory.doNotReload=!0),crmHistory.handleAjaxErrorLyte=!0;break}if(e&&void 0!==e)try{r=$(e.responseText).filter("#errorMsg").html()}catch(e){murphy.error(e)}commonUtils.showHideLoadingDiv(),r&&(I18n.getMsg("error.database.problem")===r&&(r=I18n.getMsg("error.database.problem"),l=I18n.getMsg("error.unknown.problem"),i=!1),"MODULE_NOT_FOUND"===r&&(r=I18n.getMsg("crm.workflow.alert.moduleNotPresent"),l=I18n.getMsg("crm.followsettings.sandbox.module.not.available"),i=!0),"COMMANDCENTER_PROCESS_JOURNEY_DOES_NOT_EXIST"===r&&(l=I18n.getMsg("crm.cc.process.not.exist"),r=I18n.getMsg("crm.cc.journey.not.exist"),i=!0),"COMMANDCENTER_PROCESS_PATHFINDER_DOES_NOT_EXIST"===r&&(l=I18n.getMsg("crm.cc.process.not.exist"),r=I18n.getMsg("crm.cc.pathfinder.not.exist"),i=!0));var m=$L("crux-permission-denied-alert")[0];m&&(m.eventLis&&Lyte.removeEventListener(m.eventLis),m.remove());var p={cxPropReason:r,cxPropTitle:l,cxPropIcon:i,cxPropZindex:n};if(o)for(var g in o)p[g]=o[g];var f=Lyte.Component.render("crux-permission-denied-alert",p,"body");f.setMethods({onShow:function(){t&&t.call(this.$node)},onAccept:function(){renderingUtils.ajaxErrorBackForLyte()},onClose:function(){var e=$L("crux-permission-denied-alert")[0];e&&(e.eventLis&&Lyte.removeEventListener(e.eventLis),e.remove(),a&&a.call(this.$node)),$L("#FreezeLayer")[0]&&renderingUtils.removeFreezeLayerPD()}}),f.setData("cxPropShow",!0),f.eventLis=Lyte.addEventListener("beforeRouteTransition",(function(e){var t=$L("crux-permission-denied-alert")[0];if(t&&t.getData("cxPropShow")){if(e&&e.history&&e.history.fromHistory&&e.prevTrans&&["crm.tab.module.custom-view.list","crm.tab.module.custom-view.zia","crm.tab.module.custom-view.kanban","crm.tab.module.custom-view.canvas"].contains(e.prevTrans.target))return void t.setData("cxPropShow",!1);var r=!($L(".commonRightPanel").length||!Lyte.Router.getRouteInstance())&&Lyte.Router.getRouteInstance().transition.preservePopup,n=document.getElementById("iskanbanview");r||n&&"true"===n.value||t.setData("cxPropShow",!1)}})),$L("#Warningdiv").hide(),$L("#appointmentCreate").is(":visible")||$L("#serviceAjaxEdit").is(":visible")||$L("#appointmentRescheduleDiv").is(":visible")||$L("#appointmentCancelDiv").is(":visible")||$L("#appointmentCompletePopup").is(":visible")||void 0===n&&$L("#sbl_subformBulkCreate").is(":visible")?$L("#freezeBackGround").show():$L("#freezeBackGround").hide()},renderingUtils.removeFreezeLayerPD=function(){if($L("#topBandPopup").is(":visible")||$L("#appointmentCreate").is(":visible")||$L("#serviceAjaxEdit").is(":visible")||$L("#appointmentRescheduleDiv").is(":visible")||$L("#appointmentCancelDiv").is(":visible")||$L("#appointmentCompletePopup").is(":visible")){if($L("#freezeBackGround").hide(),$L("#topBandPopup:visible").length){var e=$L("#FreezeLayer")[0];e&&(e.style.zIndex="")}}else renderingUtils.removeFreezeLayer()},renderingUtils.ajaxErrorBackForLyte=function(){!Lyte.Router.getRouteInstance().transition.preservePopup&&crmHistory.loaded&&crmHistory.handleAjaxErrorLyte&&(crmHistory.handleAjaxErrorLyte=!1,Lyte.Router.getRouteInstance().transition.abort&&Lyte.Router.getRouteInstance().transition.abort(),!app.prevTransition.route||app.historyLength<=1?featuresAvailable.NEXTGENUI_ENABLED?document.querySelector("crm-left-menu").component.actions.renderModules():clientPortalName?Lyte.Router.getRouteInstance().replaceWith("crm.tab.module",Crm.userDetails.CLIENT_TYPE):Lyte.Router.getRouteInstance().replaceWith("crm.tab.module.begin","Home"):history.go(-1));$("#popupnew").removeClass("mxnPermDeniedCheck")},renderingUtils.popUpWithFreeze=function(e){var t=e,r=$("#popupnew");r.html(t).css("z-index","250"),mailsetCenter("popupnew"),$("#Warningdiv").hide(),renderingUtils.freezeBackground(),commonUtils.showHideLoadingDiv(),$("#popupok").length>0&&document.getElementById("popupok").focus(),r.click((function(){sE(event)}))},renderingUtils.getHeightFromTabLayer=function(){var e=renderingUtils.windowHeight-renderingUtils.tabLayerOuterHeight();isChatEnabled&&(e-=26);var t=$("#annoncement");return e=t.length?e-t.outerHeight():e},renderingUtils.matchStart=function(e,t){if(t.parentText=t.parentText||"",""===$.trim(e.term))return t;var r=t.children;if(r&&r.length>0){for(var n=$.extend(!0,{},t),i=n.children,a=r.length-1;a>=0;a--){var o=r[a];o.parentText+=t.parentText+" "+t.text,null==renderingUtils.matchStart(e,o)&&i.splice(a,1)}return i.length>0?n:renderingUtils.matchStart(e,n)}var s=(t.parentText+" "+t.text).toUpperCase(),l=e.term.toUpperCase();return s.indexOf(l)>-1?t:null},renderingUtils.getScrollBarWidth=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;r==n&&(n=t.clientWidth),document.body.removeChild(t),renderingUtils.getScrollBarWidthValue=r-n},$(document).ready((function(){renderingUtils.getScrollBarWidth()})),renderingUtils.resizeWindowHW=function(){renderingUtils.windowHeight=$(window).height(),renderingUtils.windowWidth=$(window).width(),renderingUtils.windowOuterHeight=$(window).outerHeight(),renderingUtils.windowOuterWidth=$(window).outerWidth()},renderingUtils.listviewFixedColumn=function(){var e=["list","users","list-view"].contains(Lyte.Router.getRouteInstance().routeName),t=renderingUtils.windowOuterHeight;if(e){var r=$(".cvpadding");renderingUtils.listviewTable=r.offset().top+r.outerHeight()}else{var n=$("#cvpadding");renderingUtils.listviewTable=n.offset().top+n.outerHeight();var i=$(".fixedheadercolumn")}renderingUtils.listviewTableHeightVal=t-(renderingUtils.listviewTable+88),getElemById("listviewtablescroll").style.maxHeight=renderingUtils.listviewTableHeightVal+"px";var a=$("#listviewtablescroll").height(),o=41;if($(".mac.chrome,.mac.safari,.safari").length>0&&(o=42),!e){var s=getElemById("fixedRowHeader");s.style.left=renderingUtils.lvLeftFilterWidth+"px",s.style.top=renderingUtils.listviewTable+o+"px",s.style.height=a-44+"px"}"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?i.css({left:renderingUtils.lvLeftFilterWidth,top:renderingUtils.listviewTable}):e||i.css({left:renderingUtils.lvLeftFilterWidth,top:renderingUtils.listviewTable})},renderingUtils.listviewFixedColumnRTL=function(){var e=renderingUtils.windowOuterHeight,t=$("#fixedRowHeader"),r=$("#cvpadding");renderingUtils.listviewTable=r.offset().top+r.outerHeight(),renderingUtils.listviewTableHeightVal=e-(renderingUtils.listviewTable+88);var n=$("#listviewtablescroll"),i=$(".fixedheadercolumn");$("#fixedheadercolumn").outerHeight();renderingUtils.fixedRowHeaderTableTD=$("#fixedRowHeaderTable > .tr > .td").height(),n.css({"max-height":renderingUtils.listviewTableHeightVal});var a=42;$(".chrome,.safari").length>0?$(".fixedrowTd").find("td").css("display","inline-table"):a=42,t.css({top:renderingUtils.listviewTable+a,height:n.height()-44}),i.css({top:renderingUtils.listviewTable})},renderingUtils.listviewCustomizationtable=function(){var e=$("#canvasview-tablescroll"),t=$("#bottomTotalCountBar").outerHeight();if(e.length){var r=e.offset().top,n=renderingUtils.windowOuterHeight;renderingUtils.listviewTable=r+t+28,renderingUtils.listviewTableHeightVal=n-renderingUtils.listviewTable,e.css({"max-height":renderingUtils.listviewTableHeightVal})}},renderingUtils.listviewFixedTable=function(){var e=$L("#listviewtablescroll"),t=e.scrollLeft(),r=$("#fixedHeaderTable"),n=r.css("right"),i=$("#lvTred .LVFirstCol"),a=$("#lvTred .LVSecondCol"),o=0===i.length?void 0:i.eq(0).outerWidth(),s=0===a.length?void 0:a.eq(0).outerWidth(),l=$("#listviewHeaderRow").height(),c=$("#fixedHeader"),d=c.outerWidth(),u=c.height(),m=$("#fixedRowHeader");if($("body").css("overflow",""),$(".listviewtablescroll").length){renderingUtils.lvLeftFilterWidth=customViewObject.isPrivacyListView||customViewObject.isCampaignAddMemberListView?"260px":"0px";var p=document.getElementById("lv_left_filter").style.display;"block"!==p&&""!==p||(renderingUtils.lvLeftFilterWidth=customViewObject.isPrivacyListView||customViewObject.isCampaignAddMemberListView?"560px":"300px");var g=$(".fixedheadercolumn");if(g.show(),c.hide(),0===$("#lvNoRecordsFound").length){Crm.userDetails.RTL_ENABLED?(renderingUtils.listviewFixedColumnRTL(),r.css("right","-"+n+"px")):(renderingUtils.listviewFixedColumn(),r.css("left","-"+t+"px")),c.show(),renderingUtils.generateColumnHeader(),getElemById("fixedRowHeader").style.width=o+s+"px";var f=o+s;g.css("width",f),$(".LVFirstFixedHeaderCol").css("width",o),$(".LVSecondFixedHeaderCol").css("width",s),m.removeClass("fixedRowHeaderHide"),renderingUtils.setRowH(o),renderingUtils.setColW(),renderingUtils.setColumnHeaderPosition(),thirdPartyUtils.bindTableScroll(),renderingUtils.fixedRowHeaderWheelBind(),renderingUtils.freezeBody(),Crm.userDetails.RTL_ENABLED?(t=10,thirdPartyUtils.scrollLeftpos!=d&&g.show()):t>0&&m.show(),Crm.userDetails.RTL_ENABLED&&(l=u-1,l-=20),$("#fixedheadercolumn").find("td").css("height",l),c.find("td").css("height",l-2)}else renderingUtils.lvLeftFilterWidth=0,"block"!==p&&""!==p||(renderingUtils.lvLeftFilterWidth="300px"),Crm.userDetails.RTL_ENABLED?renderingUtils.listviewFixedColumnRTL():renderingUtils.listviewFixedColumn(),m.addClass("fixedRowHeaderHide"),g.hide(),Crm.userDetails.RTL_ENABLED||e.scrollLeft(0);e.scrollTop(0)}},renderingUtils.tableSorter=function(){var e=Lyte.Router.getRouteInstance().routeName;1==customViewObject.isCustomizedView?renderingUtils.listviewCustomizationtable():"list"!==e&&renderingUtils.listviewFixedTable()},renderingUtils.generateColumnHeader=function(){var e,t=$("#listViewTable").find("#listviewHeaderRow td"),r=$("#fixedHeader .tr"),n=document.createDocumentFragment();r.empty();for(var i=0;i<t.length;i++)(e=$(t[i]).clone()).removeClass("th").addClass("td fixedHeaderTd"),$(n).append(e);r.append(n)},renderingUtils.setRowH=function(e){for(var t=$("#lvTred").find("tr"),r=$(".fixedrowTd").find("tr"),n=[],i=[],a=t.length,o=0;o<a;o++){var s=t.eq(o);n[o]={},n[o].height=s[0].getBoundingClientRect().height,n[o].maxHeight=s.outerHeight(),i[o]={};var l=r.eq(o);i[o].dom=l,i[o].td=l.find("td"),i[o].LVFirstFixedCol=l.find(".LVFirstFixedCol > div")}for(o=0;o<a;o++)i[o].dom.css({"max-height":n[o].maxHeight,height:n[o].height}),i[o].td.css({height:n[o].height-23}),i[o].LVFirstFixedCol.css({width:e-13})},renderingUtils.setColW=function(){var e=$("#fixedHeader").find("td"),t=[],r=$("#listviewHeaderRow").find("td"),n=e.length;if(Crm.userDetails.RTL_ENABLED){n=e.length;for(var i=0;i<n;i++)t[i]=r.eq(i).width()-10}else for(i=0;i<n;i++)t[i]=r.eq(i).width();var a=document.getElementsByClassName("fixedHeaderTd");for(i=0;i<n;i++)a[i].style.minWidth=t[i]+"px",a[i].style.maxWidth=t[i]+"px"},renderingUtils.setColumnHeaderPosition=function(){if($("#listviewtablescroll").length){var e=$("#fixedHeader"),t=$("#listViewTable"),r=t.parent().offset(),n=r.left,i=r.top;0==n&&(n=2);var a=t.width();Crm.userDetails.RTL_ENABLED?e.css({top:i,width:a}):e.css({top:i,left:n+1,width:a})}},renderingUtils.freezeBody=function(){var e=$("#fixedRowHeaderTable");$("html").hasClass("firefox")||(e.on("mouseover",(function(){$("body").css({overflow:"hidden"})})),e.on("mouseout",(function(){$("body").css({overflow:""})})))},renderingUtils.fixedRowHeaderWheelBind=function(){var e=$("#fixedRowHeader"),t=$("#fixedRowHeaderTable").height();e.show();var r=renderingUtils.listviewTableHeightVal-44;e.hide();var n=-1*t+r;e.off("wheel"),n<0&&e.on("wheel",(function(e){var t=$("#fixedRowHeaderTable"),r=$L("#listviewtablescroll");e.stopPropagation();var i=t.position().top-e.originalEvent.deltaY;i>0?i=0:i<n&&(i=n),t.css({top:i}),r.scrollTop(-1*i)}))},renderingUtils.scrollPrevent=function(e){$(e).on("wheel",(function(t){if($(e).width()<$(e).closest(".zcrm-modal").width()){var r=t.originalEvent,n=r.wheelDelta||-r.detail;this.scrollTop+=10*(n<0?1:-1),t.preventDefault()}}))},renderingUtils.saveValtoopt=function(e,t,r){var n=$($("#"+e).html());n.eq(0).attr("data-value",r),""!==t?(n.eq(0).attr("value",t),n.eq(0).show()):n.eq(0).hide();var i=$("<div>").append(n[0]).html()+"<div class='selectOpt dIB vaM' onmouseenter='$(this).parent(&#39;.selectBoxInput&#39;).css(&#39;border&#39;,&#39;1px solid #ddd&#39;);' onmouseleave='$(this).parent(&#39;.selectBoxInput&#39;).css(&#39;border&#39;,&#39;&#39;);sE(event);'>";return i+="<span class='slctOptVal'",1==Events.setPadding(t)&&(i+="style='padding-left:10px'"),i+=">"},renderingUtils.isElementInViewport=function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},renderingUtils.freezeProperty=function(e,t){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1})},renderingUtils.forceTransitionTo=function(e){var t=!1,r=Lyte.Router.getRouteInstance().transition.info;if(e.route==r.route){t=!0,e.queryParams||(e.queryParams={}),e.dynamicParams||(e.dynamicParams=[]);var n=$u.isEqual(e.queryParams,r.queryParams),i=$u.isEqual(e.dynamicParams,r.dynamicParams);t=!(!n||!i)}t?Lyte.Router.getRouteInstance().refresh():Lyte.Router.transitionTo({route:e.route,dynamicParams:e.dynamicParams,queryParams:e.queryParams})},renderingUtils.getSingularLabel=function(e){return I18n.getMsg(Crm.moduleInfo[e].translatedSingularLabel)},renderingUtils.getPluralLabel=function(e){return I18n.getMsg(Crm.moduleInfo[e].translatedPluralLabel)},renderingUtils.showLyteErrorMessage=function(e,t,r){r&&(r=r.replace("#",""));var n=t.attr("id");n=null!=n?n:r,$("#lyteerrorMsg_"+n).remove();var i=document.createElement("span"),a=$(i);n?a.html(e).attr({class:"lyteErrorMsg",id:"lyteerrorMsg_"+n}):a.html(e).attr({class:"lyteErrorMsg"}),t.addClass("lyteErrorBorder"),t.append(i),t.outerWidth()<200&&a.css("whiteSpace","nowrap")},renderingUtils.hideLyteErrorMessages=function(e){$(e).find(".lyteErrorMsg").remove(),$(e).find(".lyteErrorBorder").removeClass("lyteErrorBorder")},renderingUtils.getClipBoardData=function(e){return e.clipboardData&&e.clipboardData.getData("text/plain")?e.clipboardData.getData("text/plain"):window.clipboardData&&window.clipboardData.getData("text")?window.clipboardData.getData("text"):e.originalEvent.clipboardData.getData("text/plain")},renderingUtils.restrictPaste=function(e,t,r){t.preventDefault();var n=renderingUtils.getClipBoardData(t),i=$(e).text();if(r&&i.length+n.length>r){var a=r-i.length;n=n.substring(0,a)}n.length>0&&document.execCommand("insertHTML",!1,$ESAPI.encoder().encodeForHTML(n))},renderingUtils.showAlertMsg=function(e,t,r,n){r||(r=[{type:"accept",text:I18n.getMsg("crm.mb.newversion.msg4"),appearance:"primary"}]),n||(n={}),n.params={ltPropPrimaryMessage:"",ltPropContentAlign:"center",ltPropWrapperClass:"utilsAlertMsg",ltPropSecondaryMessage:"X",ltPropButtons:r},t&&(n.params.ltPropType=t),n.show=function(t){$L(".utilsAlertMsg").find("lyte-button").focus();var r=t.childComp.querySelector(".alertSecondaryMsg");r.innerHTML=e,r.classList.add("crm-font-regular")},_cruxUtils.showCustomAlert(n)},renderingUtils.RemoveFromCache=function(){var e=Lyte.removeFromCache.assign;Lyte.removeFromCache.assign=function(t){return void 0!==t?(t=commonUtils.getArrayList(t),e(t[0])):void 0}},renderingUtils.emptySearchBox=function(){$("#searchField").val("").trigger("keyup")},renderingUtils.searchKey=function(e,t){t?($("#emptySearch").css("display",e.value?"block":"none"),showMacroSuggest(e,t,"availableList","li","noRecords","","","",void 0,void 0,"false",!0)):($("#emptySearch").css("display",e?"block":"none"),commonUtils.searchedFields(moduleJSON,e))},renderingUtils.removeMultiSpacestoSingleSpace=function(e){return"string"==typeof e?e.replace(/  +/g," "):e},renderingUtils.getFirstChild=function(e){for(var t=e.firstChild;null!=t&&3===t.nodeType;)t=t.nextSibling;return t},renderingUtils.getPickListDisplayValuebyDomAndSysValue=function(e,t){for(var r=$("#"+e).data().picklistmap,n=r.length,i=0;i<n;i++)if(r[i].systemvalue==t)return r[i].uservalue;return null},renderingUtils.getPickListDefaultValToActualValDetailView=function(e){for(var t=e.defaultvalue,r=e.picklistmap,n=r.length,i=0;i<n;i++)if(r[i].uservalue==t)return r[i].systemvalue},renderingUtils.highlightUrlInText=function(e){if(e){return e.replace(/((https?|ftp)(:|&#x3a;)(\/\/|&#x2f;&#x2f;))((www\.){0,1}[a-zA-Z0-9-_]+(\.[a-z0-9-_]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)|www\.([a-zA-Z0-9-_]+(\.[a-z0-9-_]+)+)((:|&#x3a;)[0-9]*(\.[a-z0-9]+)*)*(((\/|&#x2f;)[^\s]*)*)/g,(function(e){var t="";return-1===e.indexOf("http")&&-1===e.indexOf("ftp")&&(t="//"),'<a class="link" rel="noopener noreferrer" href="'+t+e+'" target="_blank">'+e+"</a>"}))}return""},renderingUtils.showLyteErrorMessageWithParentScope=function(e,t,r){t&&(t=t.replace("#",""));var n=t,i=$(r).find("#"+t);if(!(a=i.find("lyte-drop-button")).length)var a=i.find(".lyteField");if(!a.length)a=i.find(".cxFakeDropButton");r?$("#lyteerrorMsg_"+n,r).remove():$("#lyteerrorMsg_"+n).remove();var o=document.createElement("span"),s=$(o);n?s.html(e).attr({class:"lyteErrorMsg",id:"lyteerrorMsg_"+n}):s.html(e).attr({class:"lyteErrorMsg"}),a.addClass("lyteErrorBorder"),a.append(o),a.outerWidth()<200&&s.css("whiteSpace","nowrap")},renderingUtils.tabLayerTop=function(){var e=$L("#tabLayer"),t=0;return e.length>0&&(t=e[0].getBoundingClientRect().top),t},renderingUtils.tabLayerOuterHeight=function(){var e=$L("#tabLayer"),t=0;return e.length>0&&(t=e.outerHeight()),t},renderingUtils.findPosX=function(e){var t=0;if(document.getElementById||document.all){if(e)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent}else document.layers&&(t+=e.x);return t},renderingUtils.findPosY=function(e){var t=0;if(document.getElementById||document.all)for(;e&&e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else document.layers&&(t+=e.y);return t},renderingUtils.loadToolTip=function(e){var t=window.event||event;e||(e=t.target||t.srcElement);var r="";if(e.hasAttribute("data-toolTip"))r=e.getAttribute("data-toolTip");else{var n=history.state;n.backOneLevel&&(r=Crm.newHistoryArr[n.backOneLevel.historyIndex]?Crm.newHistoryArr[n.backOneLevel.historyIndex].toolTip:""),r?(r=I18n.getMsg("BackButton.back.to.name",decodeURIComponent(r)),e.hasAttribute("data-toolTip")||e.setAttribute("data-toolTip",r)):r=I18n.getMsg("BackButton.back")}renderingUtils.zctt.showtt(revertSplChrs(r),void 0,void 0,void 0,"false")},renderingUtils.zctt=function(){var e,t,r=document,n=0,i=!!r.all;return{showtt:function(a,o,s,l,c,d,u,m,p){void 0===p&&(p=!0),null==e&&((e=r.createElement("div")).setAttribute("id","tooltip-zc"),e.setAttribute("data-zcqa","tooltip-zc"),u?u.appendChild(e):r.body.appendChild(e));var g=d||"tooltipzcdefault";e.setAttribute("class",g),e.style.display="block",e.style.position="absolute",e.style.zIndex="16",e.innerHTML=a,e.style.width=o?o+"px":"auto",!o&&i&&(e.style.width=e.offsetWidth),e.offsetWidth>400&&(e.style.width="400px"),h=parseInt(e.offsetHeight)+0,w=parseInt(e.offsetWidth)+0+20,0!=n&&clearTimeout(n);var f=document.getElementById("tooltip-zc");addEventInCrm(f,"mouseenter",(function(){e.style.display="block",clearTimeout(n)})),addEventInCrm(f,"mouseleave",(function(){m?n=setTimeout((function(){e.style.display="none"}),m):e.style.display="none",p&&(l?renderingUtils.zctt.setpos(l,s):(t=c||void 0,r.onmousemove=renderingUtils.zctt.setpos))})),l?renderingUtils.zctt.setpos(l,s):(t=c||void 0,r.onmousemove=renderingUtils.zctt.setpos)},hidett:function(t=!0){e&&(n=setTimeout((function(){e.style.display="none"}),1==t?0:500),r.onmousemove=null)},setpos:function(n,a){if("block"==e.style.display){i&&(n=n||event);var o=i?n.clientY+$(document).scrollTop():n.pageY,s=i?n.clientX+$(document).scrollLeft():n.pageX;if(a){var l=renderingUtils.getTargetElem(n);s=$(l).offset().left}var c=r.body.clientWidth,d=r.body.clientHeight;s<0?(e.style.left="0px",e.style.right=""):s+w+0>c?(e.style.left="",e.style.right=c-s+0+"px"):(e.style.right="",e.style.left=s+0+"px"),o<0?(e.style.top="0px",e.style.bottom=""):t&&"true"==t?(e.style.top="",e.style.bottom=d-o+0+"px"):t&&"false"==t?(e.style.bottom="",e.style.top=o+0+"px"):o+h+0>d?(o+=50,e.style.top="",e.style.bottom=d-o+0+"px"):(e.style.bottom="",e.style.top=o+0+"px")}}}}(),renderingUtils.showFreezeLayer=function(){var e=$("#freezeBackGround");e.css({display:"block"}),$L("crm-twitter-post-create").length&&e.css("z-index","301")},renderingUtils.hideFreezeLayer=function(){if($(".temp_freezelayer")&&!$(".ziaCallAnalyticswrapper").length&&!$(".etTrendsWrapper").length){var e=$(".temp_freezelayer.emailAI");e&&e.remove()}$("#freezeBackGround").css({display:"none",zIndex:"30"})},renderingUtils.labelWidthFixed=function(e,t){var r,n=[],i=[];if(void 0===t)var a=$(".columnCal1"),o=$(".columnCal2");else a=$("#"+t+" .columnCal1"),o=$("#"+t+" .columnCal2");for(var s=a.length,l=o.length,c=0;c<s;c++){var d=a.eq(c).outerWidth();n.push(d)}for(c=0;c<l;c++){d=o.eq(c).outerWidth();i.push(d)}var u=Math.max.apply(null,n),m=Math.max.apply(null,i);u>=(r="list"===e?230:"detail"===e?190:210)&&(u=r),m>=r&&(m=r),a.css("width",u+"px"),o.css("width",m+"px")},renderingUtils.freezeBackground=function(){$("#ajax_load_tab").css({top:"0",position:"fixed"});var e=document.createElement("DIV");e.id="FreezeLayer",e.className="freezeLayer";var t=0;document.body&&(document.body.scrollLeft||document.body.scrollTop)?t=document.body.scrollWidth:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(t=document.documentElement.scrollWidth);var r=renderingUtils.windowHeight;document.body.offsetHeight>r?e.style.height=document.body.offsetHeight+"px":e.style.height=r+"px",e.style.width=0!==t?t+"px":document.body.offsetWidth+"px",getObj("FreezeLayer")||document.body.appendChild(e),"undefined"!=typeof oDialog&&(oDialog.style.zIndex="30"),renderingUtils.scrollPrevent($("#FreezeLayer"))},renderingUtils.newcloseFreez=function(e){$("#"+e).css({width:"",display:"none",bottom:""}),$("#FreezeLayer").remove(),$("body.oH").removeClass("oH")},renderingUtils.removeFreezeLayer=function(){var e=$(".temp_freezelayer");e.length>0&&!$(".ziaCallAnalyticswrapper").length?e.remove():$(".ziaCallAnalyticswrapper").length||$(".etTrendsWrapper").length||$(".etTrendsWrapperCNS").length||$(".freezeLayer").remove()};var storageUtils={removeLocalStorageValue:function(e){"undefined"!=typeof Storage?localStorage.removeItem(e):cookieUtils.deleteCookie(e)},setLocalStorage:function(e,t){"undefined"!=typeof Storage?localStorage.setItem(e,t):cookieUtils.setCookie(e,t)},getLocalStorageValue:function(e){return"undefined"!=typeof Storage?localStorage.getItem(e):cookieUtils.getCookie(e)}},ResourceConstants={};function CrmDate(e,t){"string"!=typeof e&&"number"!=typeof e||(e=new Date(e));var r=e||new Date,n=r.getUTCMinutes(),i=t?n+CrmDateUtils.getTimeOffsetInMins(Crm.userDetails.ORGTIME_ZONE):n+CrmDateUtils.getTimeOffsetInMins(Crm.userDetails.TIME_ZONE);this.primitiveDateObject=new Date(r.getTime()),r.setUTCMinutes(i),this.userDisplayDate=r.getUTCDate(),this.userDisplayMonth=r.getUTCMonth()+1,this.userDisplayYear=r.getUTCFullYear(),this.userHourIn24hrFmt=r.getUTCHours(),this.userDisplayMinute=r.getUTCMinutes(),this.userDisplayDay=I18n.getMsg(["ssun","smon","stue","swed","sthu","sfri","ssat"][r.getUTCDay()]),this.userDisplayMonthName=I18n.getMsg(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getUTCMonth()]),this.dateObject=r}ResourceConstants.CRM="CRM",ResourceConstants.CRMClient="CRMClient",ResourceConstants.CRMOrganization="CRMOrganization",ResourceConstants.JAVASCRIPT="javascript",ResourceConstants.ADDONS="addons",ResourceConstants.CSS="css",ResourceConstants.IMAGE="images",ResourceConstants.LESSDEFAULT="default",ResourceConstants.LESSFEATURE="feature-black",ResourceConstants.LESSFEATUREBlUE="feature-blue",ResourceConstants.LESSFEATUREBLACKPLUS="feature-black-plus",ResourceConstants.IMAGES={},ResourceConstants.IMAGES.CRM=FingerPrint.basePathUrl+ResourceConstants.IMAGE,ResourceConstants.IMAGES.CRMClient=FingerPrint.basePathUrl+ResourceConstants.CRMClient+"/"+ResourceConstants.IMAGE,ResourceConstants.IMAGES.CRMOrganization=FingerPrint.basePathUrl+ResourceConstants.CRMOrganization+"/"+ResourceConstants.IMAGE,CrmDate.prototype.getDateTimeInUserPattern=function(e=!1){return this.getDateInUserPattern(e)+" "+this.getTimeInUserPattern()},CrmDate.prototype.getDateInUserPattern=function(e=!1){var t=Crm.userDetails.DATE_PATTERN;return this.getDateInPattern(t,e)},CrmDate.prototype.getDateTimeInDefault=function(){return this.getDateInPattern("YYYY-MM-DD")+" "+this.userHourIn24hrFmt+":"+this.userDisplayMinute},CrmDate.prototype.getDateInPattern=function(e,t=!1){return e=(e=e.toUpperCase()).replace("EEE","ddd"),t?$L.moment(new Date(this.userDisplayYear,this.userDisplayMonth-1,this.userDisplayDate)).i18N(e):$L.moment(new Date(this.userDisplayYear,this.userDisplayMonth-1,this.userDisplayDate)).format(e)},CrmDate.prototype.validate=function(){try{return $L.moment(this.dateObject).validate()}catch(e){return!1}},CrmDate.prototype.getTimeInUserPattern=function(e){var t;if("HH:mm"===Crm.userDetails.TIME_FORMAT)t=Utils.formatTimeVal(this.userHourIn24hrFmt)+":"+Utils.formatTimeVal(this.userDisplayMinute);else{var r=null;12==this.userHourIn24hrFmt||this.userHourIn24hrFmt>12?r="PM":this.userHourIn24hrFmt<12&&(r="AM");var n=Utils.convertTimeTo12HoursFormat(this.userHourIn24hrFmt,r),i=e?r:I18n.getMsg(r);t=Utils.formatTimeVal(n)+":"+Utils.formatTimeVal(this.userDisplayMinute)+" "+i}return t},CrmDate.prototype.getFormattedTime=function(){return this.isToday()?this.getTimeInUserPattern():this.isCurrentYear()?this.getDateInPattern("MMM DD"):this.getDateInPattern("MMM DD,YYYY")},CrmDate.prototype.isToday=function(){return this.getDateInUserPattern()==(new CrmDate).getDateInUserPattern()},CrmDate.prototype.isCurrentYear=function(){return this.userDisplayYear==(new CrmDate).userDisplayYear},CrmDate.prototype.isFutureTime=function(){return this.dateObject>(new CrmDate).dateObject},CrmDate.prototype.leadingTimeInMins=function(e){var t=e||new CrmDate,r=this.dateObject.getTime()-t.dateObject.getTime();return Math.round(r/6e4)},CrmDate.prototype.leadingTimeInDays=function(e){var t=e||new CrmDate,r=new Date(this.userDisplayYear,this.userDisplayMonth-1,this.userDisplayDate),n=new Date(t.userDisplayYear,t.userDisplayMonth-1,t.userDisplayDate),i=(r.getTime()-n.getTime())/1e3;return i/=86400,Math.round(i)};var CrmDateUtils={getTimeOffsetInMins:function(e){var t=e.split("."),r=t[0],n=t[1],i=Math.abs(60*r)+Number(n);return i=Number(r)>=0?i:-1*i},getCrmDateFromUserTime:function(e,t,r,n,i,a,o){a=a||"00";var s=Utils.getTimezoneOffset(),l=parseInt(s/60),c=parseInt(s%60),d=l<0?"GMT+":"GMT-";c=(c=c<0?-1*c:c)<10?"0"+c:c,l=l<0?-1*l:l;var u=e+"/"+t+"/"+r+" "+n+":"+i+":"+a;if("HH:mm"!=Crm.userDetails.TIME_FORMAT&&o){-1!=["AM","PM","am","pm"].indexOf(o)?u=u+" "+o:I18n.getMsg("AM")==o||I18n.getMsg("am")==o?u+=" AM":I18n.getMsg("PM")!=o&&I18n.getMsg("pm")!=o||(u+=" PM")}return u=u+" "+d+l+c,new CrmDate(new Date(u))},getCrmDateAfterMins:function(e){var t=(new Date).getTime()+6e4*e;return new CrmDate(new Date(t))},getCrmDateAfterMillis:function(e,t){var r=(t=t||new Date).getTime()+e;return new CrmDate(new Date(r))},getAfterMinsByCrmdate:function(e,t){var r=t.primitiveDateObject.getTime()+6e4*e;return new CrmDate(new Date(r))},isValidDate:function(e,t){if(!e)return!1;t||(t=Crm.userDetails.DATE_PATTERN.toUpperCase());try{return $L.moment(e,t).validate()}catch(e){return!1}},getDateObjectFromString:function(e,t,r){if(!e)return new Date;if(!e.getMonth){var n;if(!t)if(t=Crm.userDetails.DATE_PATTERN.toUpperCase(),e.indexOf(":")>-1){var i=Crm.userDetails.TIME_FORMAT;(e.indexOf("AM")>1||e.indexOf("PM")>1)&&(i=i.replace("a","A")),t+=" "+i}try{n=r?$L.moment(e.trim(),t.trim(),{i18n:!0}).getDObj():$L.moment(e.trim(),t.trim()).getDObj()}catch(e){murphy.error(e)}return n||(n=new Date),n}return e},convertDateToUserPattern:function(e,t,r=!1){return t||(t=Crm.userDetails.DATE_PATTERN.toUpperCase()),r?$L.moment(new Date(e)).i18N(t):$L.moment(new Date(e)).format(t)},getFormattedDate:function(e){return $L.moment(new Date(e)).format("YYYY-MM-DD")},getDateInPattern:function(e,t){return $L.moment(new Date(e)).format(t)},convertDateToISO:function(e,t,r,n=!1){return void 0===t&&(t="DD/MM/YYYY"),void 0===r&&(r="T00:00:00%2B00:00"),e&&""!=e?CrmDateUtils.getFormattedDate(this.getDateObjectFromString(e,t,n))+r:""},convertDateTimetoISOFormat:function(e,t=!1){var r=e.indexOf(":"),n=e.substring(0,r-3),i=e.substring(r-2,r+3),a=e.substring(r+3,e.length).trim(),o=[];o.push(n);var s=i.split(" ");o.push(s[0]),a.length>1&&o.push(a);var l=CrmDateUtils.convertdateToDBformat(o[0],t),c=o[1].split(":"),d=Crm.userDetails.TIME_ZONE.replace(".",":"),u=parseInt(c[0]);u="HH:mm"==Crm.userDetails.TIME_FORMAT?u:Utils.convertTimeTo24HoursFormat(u,o[2]);var m=parseInt(c[1]);u<10&&(u="0"+u),m<10&&(m="0"+m);return l+"T"+(u+":"+m+":00")+d},convertdateToDBformat:function(e,t=!1){var r=t?CrmDateUtils.getDateObjectFromString(e,void 0,t):CrmDateUtils.getDateObjectFromString(e);return $L.moment(new Date(r)).format("YYYY-MM-DD")},convertDateAndTimeApiFormatToUserViewFormat:function(e){var t,r,n,i=null,a=null,o=null,s=null;return i=new Date(e),(s=(o=e).substring(o.length-6).split(":"))[0].substring(0,1),s[1]=parseInt(s[1]),t=(i=new Date(o.substr(0,o.length-6))).getMonth(),r=i.getDate(),n=i.getFullYear(),a=Utils.getTimeStringWithAmPm(i),"HH:mm"!==Crm.userDetails.TIME_FORMAT?I18n.getMsg(CrmTags.shortMonth[t])+" "+r+", "+n+" "+a.hrs+":"+a.mins+" "+I18n.getMsg(a.meridiem.toUpperCase()):I18n.getMsg(CrmTags.shortMonth[t])+" "+r+", "+n+" "+a.hrs+":"+a.mins},convertTimeTo12HourFormat:function(e){var t=e.split(":"),r=t[0],n=t[1],i=I18n.getMsg("AM");return r>12&&(r=Number(r)-12,i=I18n.getMsg("PM")),0==r?(r=12,i=I18n.getMsg("AM")):12==r&&(i=I18n.getMsg("PM")),r<10&&r.toString().length<2&&(r="0"+r),r+":"+n+" "+i},compareTime:function(e,t,r){var n=CrmDateUtils.timeTomilliseconds(e),i=CrmDateUtils.timeTomilliseconds(t)-n;return r?i>=0:i>=1e3},timeTomilliseconds:function(e){var t=e.split(":");return 60*t[0]*60*1e3+60*t[1]*1e3},getDayNumber:function(e){switch(e){case"Monday":return 1;case"Tuesday":return 2;case"Wednesday":return 3;case"Thursday":return 4;case"Friday":return 5;case"Saturday":return 6;default:return 0}},checkTimeValue:function(e){var t=e.split(":");if(t.length<=1)return!0;if(!t[0]||isNaN(Number(t[0]))&&Number(t[0])>24)return!0;var r=t[1].split(" ");if(r.length>0){if(!r[0]||isNaN(Number(r[0])&&Number(r[0]))>60)return!0;if("hh:mm a"==Crm.userDetails.TIME_FORMAT&&(!r[1]||r[1].toUpperCase()!=I18n.getMsg("AM")&&r[1].toUpperCase()!=I18n.getMsg("PM")))return!0}return!1},splitDateVal:function(e,t=!1){var r=new Array(3),n=Crm.userDetails.DATE_PATTERN?Crm.userDetails.DATE_PATTERN.toUpperCase():userDateFrmtinCE,i=CrmDateUtils.getDateObjectFromString(e,n,t);return r[0]=i.getDate(),r[1]=i.getMonth()+1,r[2]=i.getFullYear(),r},comparingDates:function(e,t,r,n,i,a,o){var s;switch(i){case"L":e>=r&&(s=I18n.getValueForFields("crm.custom.field.less.than",[t,n]));break;case"LE":e>r&&(s=I18n.getValueForFields("crm.custom.field.less.than.equalto",[t,n]));break;case"E":e!=r&&(s=I18n.getValueForFields("crm.custom.field.equalto",[t,n]));break;case"G":e<=r&&(s=I18n.getValueForFields("crm.custom.field.greater.than",[t,n]));break;case"GE":e<r&&(s=I18n.getValueForFields("crm.field.comparision.check",[t,n]))}if(s){var l=getObj(t)?getObj(t):o?getObj(o):void 0;return renderingUtils.displayAlert(t,t,s,l,a),!1}return!0},dateTimeValidate:function(e,t,r,n,i,a,o,s=!0){var l=getElm(i,e),c=r.replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,".");l||(e="property("+r+")",t=r);var d=getElm(i,e).value.replace(/^\s+/g,"").replace(/\s+$/g,""),u=I18n.getValueForFields("crm.field.valid.check",c);if(!Utils.isValidDate(Crm.userDetails.DATE_PATTERN,d))return s&&renderingUtils.displayAlert(e,r,u,l,a),!1;if(getElm(i,t+"hour"))var m=getElm(i,t+"hour").value.replace(/^\s+/g,"").replace(/\s+$/g,"");else m=getElm(i,"property("+t+"hour)").value.replace(/^\s+/g,"").replace(/\s+$/g,"");if(getElm(i,t+"minute"))var p=getElm(i,t+"minute").value.replace(/^\s+/g,"").replace(/\s+$/g,"");else p=getElm(i,"property("+t+"minute)").value.replace(/^\s+/g,"").replace(/\s+$/g,"");if("HH:mm"!==Crm.userDetails.TIME_FORMAT){if(getElm(i,t+"ampm"))var g=getElm(i,t+"ampm").value.replace(/^\s+/g,"").replace(/\s+$/g,"");else g=getElm(i,"property("+t+"ampm)").value.replace(/^\s+/g,"").replace(/\s+$/g,"");if("PM"==g&&m>12||"AM"==g&&m>12||"AM"!=g&&"PM"!=g)return s&&renderingUtils.displayAlert(timefldName,r,u,l,a),!1;"PM"==g&&m<12&&m>=0?m=parseInt(m)+12:"AM"===g&&"12"===m&&(m=0)}if(m>23||m<0||p>59||p<0)return s&&renderingUtils.displayAlert(t,r,u,l,a),!1;var f=m+":"+p;if(0==validationUtils.patternValidate(f,r,"TIME",!0,i,void 0,a,void 0,s))return!1;var h=$L.moment().toDate(),v=Utils.convertUsrtoDefaultDatePattern(d);v.setHours(m),v.setMinutes(p);var C=I18n.getMsg("currentDateTime");return!("OTH"!=n&&!o)||(!!CrmDateUtils.comparingDates(v,r,h,C,n,a,s)||(s&&(getElm(i,e).setAttribute("autocomplete","off"),getElm(i,e).focus()),!1))},dateTimeComparison:function(e,t,r,n,i,a,o,s,l,c=!0){var d,u,m=getElm(s,e).value.replace(/^\s+/g,"").replace(/\s+$/g,"");if(getElm(s,n))var p=getElm(s,n).value.replace(/^\s+/g,"").replace(/\s+$/g,"");else if(getElm(s,a))p=getElm(s,a).value.replace(/^\s+/g,"").replace(/\s+$/g,"");if(getElm(s,t+"hour")&&getElm(s,t+"minute")){var g=getElm(s,t+"hour").value.replace(/^\s+/g,"").replace(/\s+$/g,""),f=getElm(s,t+"minute").value.replace(/^\s+/g,"").replace(/\s+$/g,"");"HH:mm"!=timeFrmat&&(d=getElm(s,t+"ampm").value.replace(/^\s+/g,"").replace(/\s+$/g,""))}else if(getElm(s,"property("+r+"hour)")&&getElm(s,"property("+r+"minute)")){g=getElm(s,"property("+r+"hour)").value.replace(/^\s+/g,"").replace(/\s+$/g,""),f=getElm(s,"property("+r+"minute)").value.replace(/^\s+/g,"").replace(/\s+$/g,"");"HH:mm"!==Crm.userDetails.TIME_FORMAT&&(d=getElm(s,"property("+r+"ampm)").value.replace(/^\s+/g,"").replace(/\s+$/g,""))}else{var h=(m=getElm(s,"value_"+r).innerHTML).indexOf(":"),v=m.substring(0,h-3),C=m.substring(h-2,m.length);m=v;g=(w=(L=C.split(" "))[0].split(":"))[0],f=w[1];"HH:mm"!==Crm.userDetails.TIME_FORMAT&&(d=L[1])}if("HH:mm"!==Crm.userDetails.TIME_FORMAT&&("PM"==d?(0==g.indexOf("0")&&(g=g.substr(1)),g<12&&(g=parseInt(g)+12)):"AM"==d&&12==g&&(g=0)),getElm(s,i+"hour")&&getElm(s,i+"minute")){var y=getElm(s,i+"hour").value.replace(/^\s+/g,"").replace(/\s+$/g,""),E=getElm(s,i+"minute").value.replace(/^\s+/g,"").replace(/\s+$/g,"");"HH:mm"!==Crm.userDetails.TIME_FORMAT&&(u=getElm(s,i+"ampm").value.replace(/^\s+/g,"").replace(/\s+$/g,""))}else if(getElm(s,"property("+a+"hour)")&&getElm(s,"property("+a+"minute)")){y=getElm(s,"property("+a+"hour)").value.replace(/^\s+/g,"").replace(/\s+$/g,""),E=getElm(s,"property("+a+"minute)").value.replace(/^\s+/g,"").replace(/\s+$/g,"");"HH:mm"!==Crm.userDetails.TIME_FORMAT&&(u=getElm(s,"property("+a+"ampm)").value.replace(/^\s+/g,"").replace(/\s+$/g,""))}else{var L;h=(p=getElm(s,"value_"+a).innerHTML).indexOf(":"),v=p.substring(0,h-3),C=p.substring(h-2,p.length);p=v;var w;y=(w=(L=C.split(" "))[0].split(":"))[0],E=w[1];"HH:mm"!==Crm.userDetails.TIME_FORMAT&&(u=L[1])}"HH:mm"!==Crm.userDetails.TIME_FORMAT&&("PM"==u?(0==y.indexOf("0")&&(y=y.substr(1)),y<12&&(y=parseInt(y)+12)):"AM"==u&&12==y&&(y=0));var b=CrmDateUtils.splitDateVal(m),U=CrmDateUtils.splitDateVal(p);dd1=b[0],mm1=b[1],yyyy1=b[2],dd2=U[0],mm2=U[1],yyyy2=U[2];var T=$L.moment().toDate(),M=$L.moment().toDate();return T.setYear(yyyy1),T.setMonth(mm1-1),T.setDate(dd1),T.setHours(g),T.setMinutes(f),M.setYear(yyyy2),M.setMonth(mm2-1),M.setDate(dd2),M.setHours(y),M.setMinutes(E),"OTH"==o||(!!CrmDateUtils.comparingDates(T,r,M,a,o,alerType,c)||(c&&(getElm(s,e).setAttribute("autocomplete","off"),getElm(s,e).focus()),!1))},dateValidate:function(e,t,r,n,i,a,o=!0,s=!1){(i=i||getElm(n,e))||(e="property("+t+")",i=getElm(n,e));var l=t.replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,"."),c=i.value.replace(/^\s+/g,"").replace(/\s+$/g,""),d=I18n.getValueForFields("crm.field.valid.check",l);return!!Utils.isValidDate(Crm.userDetails.DATE_PATTERN,c,void 0,s)||(o&&renderingUtils.displayAlert(e,t,d,i,a),!1)},dateComparison:function(e,t,r,n,i,a,o){var s=getObj(e).value.replace(/^\s+/g,"").replace(/\s+$/g,"");if(getObj(r))var l=getObj(r).value.replace(/^\s+/g,"").replace(/\s+$/g,"");else l=getObj("value_"+n).innerHTML.replace(/^\s+/g,"").replace(/\s+$/g,"");var c=CrmDateUtils.splitDateVal(s),d=CrmDateUtils.splitDateVal(l);dd1=c[0],mm1=c[1],yyyy1=c[2],dd2=d[0],mm2=d[1],yyyy2=d[2];var u=new Date(yyyy1,mm1-1,dd1),m=new Date(yyyy2,mm2-1,dd2);return"OTH"==i||(!!CrmDateUtils.comparingDates(u,t,m,n,i,a,e,o)||(o&&(getObj(e).setAttribute("autocomplete","off"),getObj(e).focus()),!1))},timeValidate:function(e,t,r,n,i,a=!0){if(0==validationUtils.patternValidate(e,t,"TIME",void 0,n,void 0,i,a))return!1;var o=t.replace(/_____/g,")").replace(/____/g,"(").replace(/___/g,"."),s=getElm(n,e).value.replace(/^\s+/g,"").replace(/\s+$/g,""),l=parseInt(s.substring(0,s.indexOf(":"))),c=parseInt(s.substring(s.indexOf(":")+1,s.length)),d=getElm(n,e),u=I18n.getValueForFields("crm.field.valid.check",o);if(l>23||c>59)return a&&(renderingUtils.displayAlert(e,t,u,d,i),d.setAttribute("autocomplete","off"),d.focus(),l>23&&selInvalidText(getElm(n,e),l),c>59&&selInvalidText(getElm(n,e),c)),!1;var m=$L.moment().toDate(),p=$L.moment().toDate();return p.setHours(l),p.setMinutes(c),"OTH"==r||(!!CrmDateUtils.comparingDates(p,t,m,"current time",r,i)||(a&&(getElm(n,e).setAttribute("autocomplete","off"),getElm(n,e).focus()),!1))},timeComparison:function(e,t,r,n,i,a,o,s=!0){var l=getElm(a,e).value.replace(/^\s+/g,"").replace(/\s+$/g,""),c=getElm(a,r).value.replace(/^\s+/g,"").replace(/\s+$/g,""),d=l.substring(0,l.indexOf(":")),u=l.substring(l.indexOf(":")+1,l.length),m=c.substring(0,c.indexOf(":")),p=c.substring(c.indexOf(":")+1,c.length),g=$L.moment().toDate(),f=$L.moment().toDate();return g.setHours(d),g.setMinutes(u),f.setHours(m),f.setMinutes(p),"OTH"==i||(!!CrmDateUtils.comparingDates(g,t,f,n,i,o,s)||(s&&(getElm(a,e).setAttribute("autocomplete","off"),getElm(a,e).focus()),!1))}},thirdPartyUtils={unbindChildSelect2:function(e){var t=e.find(".select2-hidden-accessible");if(t.length)try{t.select2("destroy")}catch(e){murphy.error(e)}},unbindChildPerfectScroll:function(e){var t=(e=$L(e)).find(".ps-container"),r=null!=t?t.length:0;if(r>0)try{for(var n=0;n<r;n++)$.isFunction(t.eq(n).perfectScrollbar)&&t.eq(n).perfectScrollbar("destroy")}catch(e){murphy.error(e)}},unbindHighcharts:function(e){for(var t=e.find(".highcharts-container"),r=t.length,n=0;n<r;n++)try{var i=t.eq(n).parent().highcharts();i&&i.destroy()}catch(e){murphy.error(e)}},unbindZohoCharts:function(e){for(var t=e.find(".d3container"),r=t.length,n=0;n<r;n++)try{var i=t[n].__data__;i&&i.destroy()}catch(e){murphy.error(e)}},unbindGridstack:function(e){var t=e.find(".grid-stack").data("gridstack");if(t)try{t.destroy()}catch(e){murphy.error(e)}},removeDropzoneInstances:function(){var e=FileUploader.instances.length;if(FileUploader&&e)for(;e;)try{FileUploader.instances[e-1].instance.clean(),e--}catch(t){e--,murphy.error(t)}e=Dropzone.instances.length;if(Dropzone&&e)for(var t=0;t<e;t++)try{Dropzone.instances[t].destroy()}catch(e){murphy.error(e)}},unbindAutoComplete:function(e){for(var t=e.find(".ui-autocomplete-input"),r=t.length,n=0;n<r;n++)try{t.eq(n).autocomplete("destroy")}catch(e){murphy.error(e)}},unbindFullcalendar:function(e){var t=e.find("#calendarBd");if(t.length)try{t.fullCalendar("destroy")}catch(e){murphy.error(e)}},unbindChildEvents:function(e){if(e instanceof $||(e=$(e)),0!==e.length)try{thirdPartyUtils.unbindAutoComplete(e),thirdPartyUtils.unbindChildPerfectScroll(e),thirdPartyUtils.unbindChildSelect2(e),thirdPartyUtils.unbindHighcharts(e),thirdPartyUtils.unbindZohoCharts(e),thirdPartyUtils.unbindGridstack(e),thirdPartyUtils.unbindFullcalendar(e),(e.find("[batchid]").length||e.find(".dropzone").length)&&thirdPartyUtils.removeDropzoneInstances()}catch(e){return}},unbindPerfectScroll:function(e){e&&$(e).length&&(e=$(e)).perfectScrollbar("destroy")},bindPerfectScrollUpdate:function(e){e&&$(e).length&&(e=$(e)).perfectScrollbar("update")},bindPerfectScroll:function(e,t){if(e&&$(e).length){if(e=$(e),(t=t||{}).start){var r=$(t.start).position().top;delete t.start}e.perfectScrollbar(t),r&&(e.scrollTop(r),e.perfectScrollbar("update"))}},bindLyteScroll:function(e,t){e&&$L(e).length&&(t=t||{},(e=$L(e)).scroll(t))},selectTempResult:function(e){var t=e.text,r=e.element;if(void 0!==r){var n=$(r.parentElement).data("colorcode_enabled"),i=$(r.parentElement).attr("data-picklistmap")?$(r.parentElement).attr("data-picklistmap"):$(r.parentElement).attr("data-values"),a=void 0!==i&&Crm.isValidJSON(i);if($(".select2-container").removeClass("dropdown_eventcolor"),a){var o=$(r).data("colorcode");if(o||!o&&n){var s=$(r).attr("actualvalue")?$(r).attr("actualvalue"):$(r).val(),l="-None-"===s||""===s?" colorEnabledSelect2None":"";return t="<span class='disable"+e.disabled+l+"'><span class='dIB activitesColor' data-zcqa='option_"+$ESAPI.encoder().encodeForHTMLAttribute(t)+"' style='background:"+$ESAPI.encoder().encodeForHTMLAttribute(o)+"'></span><span>"+$ESAPI.encoder().encodeForHTML(e.text)+"</span></span>",$(".select2-container").addClass("dropdown_eventcolor"),t}$(".select2-container").removeClass("dropdown_eventcolor")}}return"<span class='disable"+e.disabled+"'>"+$ESAPI.encoder().encodeForHTML(t)+"</span>"},selectEmptyVal:function(e,t){var r=e.text,n=e.id;if((""===n||"-None-"===n&&!t)&&null!=t){var i=t.attr("id");$("#"+i).parents(".select2-container").parent().addClass("selectEmptyVal")}return"<span class='disable"+e.disabled+"'>"+$ESAPI.encoder().encodeForHTML(r)+"</span>"},bindSelect2:function(e,t){setTimeout((function(){if(e&&$(e).length){e=$(e),t=t||{};var r=$("#commonActionPage"),n=r.find(".pp-content"),i=t.disable_search_threshold||0,a=t.dropdownParent||"",o=t.no_results_text||I18n.getMsg("crm.label.no.options.found"),s=t.placeholder_text_multiple||t.placeholder_text_single||I18n.getMsg("crm.label.picklist.none"),l=Crm.userDetails.RTL_ENABLED?"rtl":"ltr",c=$("#commonSummary").length,d=t.maximumSelectionLength||"",u=t.maximum_result_text||I18n.getMsg("crm.chosen.maximum.option"),m=t.minimumInputLength||0===t.minimumInputLength?t.minimumInputLength:1,p=t.input_too_short_func||function(e){return I18n.getMsg("crm.chosen.minimum.input.text",e.minimum-e.input.length)},g=t.searching_text||I18n.getMsg("crm.chosen.searching.text"),f=t.error_loading_func||I18n.getMsg("crm.chosen.error.loading.text"),h=t.width_auto||"",v=t.closeOnSelect,C=e.closest(".wf_chosen_ui"),y=C.find(".sltSetVal"),E=[];e.each((function(e){E[e]=0===c?"none"!==$(this).css("display"):$(this).is(":visible")})),e.each((function(e){if(E[e]){var c={minimumResultsForSearch:i,dir:l,dropdownParent:a,maximumSelectionLength:d,language:{noResults:function(){return o},maximumSelected:function(){return u}},width:h},L=$(this).attr("multiple");L&&(c.placeholder=s);var w=$(this),b=$(this).attr("id");if(null!=b&&-1!==b.indexOf("ATTACHMENTID"))return $(this).on("focus",(function(){$(this).parent().trigger("mouseover")})),void $(this).on("blur",(function(){$(this).parent().trigger("mouseleave")}));if(t.ajax&&(c.ajax=t.ajax,c.minimumInputLength=m,null!=v&&(c.closeOnSelect=v),c.language.searching=function(){return g},c.language.errorLoading=function(){return f},c.language.inputTooShort=p),t.templateResult?c.templateResult=t.templateResult:c.templateResult=b&&"userDateFormat"===b?function(e){var t=e.element,r='<span class="crmBaseColor  crm-font-bold mR5 wbBreakWord">';return r+=e.text,r+='</span><span class="crmNotFoundColor crm-small-font-size dIB">(',r+=$(t).data("desp"),r+=")</span>",$(r)}:thirdPartyUtils.selectTempResult,c.templateSelection=w.hasClass("ccPhoneNumber")?CrmPhoneNumberInput.countryCodeSelect:thirdPartyUtils.selectEmptyVal,c.matcher=renderingUtils.matchStart,c.escapeMarkup=function(e){return e},"searchcriteria0"===$(this).parent().parent().parent().parent().attr("id"))return;var U=$(this).parent().parent();if(!w.data("colorcode_enabled")&&void 0!==U&&U.hasClass("colorEnabledPicklist")&&U.removeClass("colorEnabledPicklist"),$(this).select2(c),L){var T=$(this).next(".select2").find(".select2-search__field");T.on("focus",(function(){var e=$(this).closest(".select2"),t=e.closest("td"),r=e.closest(".labelValCreate");r.length?r.addClass("focusEleField"):e.closest(".labelValTwo").length?e.closest(".tabDiv").addClass("focusEleField"):t.length&&($(".wf_setFocus").removeClass("wf_setFocus"),t.addClass("wf_setFocus"))})),T.on("blur",(function(){var e=$(this).closest(".select2"),t=e.closest("td"),r=e.closest(".labelValCreate");if(r.length)r.removeClass("focusEleField");else if(e.closest(".labelValTwo").length)e.closest(".tabDiv").removeClass("focusEleField");else if(t.length){0===$(".select2-container--open").eq(0).length&&t.removeClass("wf_setFocus")}}))}else{var M=$(this).next(".select2").find(".select2-selection");M.on("focus",(function(){var e=$(this),t=e.closest(".select2"),r=t.closest("td");e.on("keydown",(function(e){40==e.keyCode&&($(this).trigger("click"),e.preventDefault())}));var n=t.closest(".labelValCreate");n.length?($(".labelValCreate").removeClass("focusEleField"),n.addClass("focusEleField")):t.closest(".labelValTwo").length?t.closest(".tabDiv").addClass("focusEleField"):r.length&&($(".wf_setFocus").removeClass("wf_setFocus"),r.addClass("wf_setFocus")),t.closest("crm-phone-field").length>0&&(t.closest("tr.topband_dv_row").addClass("txtFldFocusedRow"),t.closest("crm-create-subformfields").length>0&&t.closest(".crm_phone_field").addClass("LyteSForm_focus")&&t.closest("lyte-tr").addClass("selectedSubformRow"))})),M.on("blur",(function(){var e=$(this),t=e.closest(".select2"),r=t.closest("td");e.off("keydown",(function(e){40==e.keyCode&&($(this).trigger("click"),e.preventDefault())}));var n=t.closest(".labelValCreate"),i=!0,a=$(".select2-container--open").eq(0);if(t.closest(".businesscall")&&0!==a.length&&(i=!1),n.length)$(".select2-container--open").length<=0&&n.removeClass("focusEleField");else if(t.closest(".labelValTwo").length&&i)t.closest(".tabDiv").removeClass("focusEleField");else if(r.length){0===a.length&&r.removeClass("wf_setFocus")}t.closest("crm-phone-field").length>0&&t.closest("crm-create-subformfields").length>0&&t.closest(".crm_phone_field").removeClass("LyteSForm_focus")&&t.closest("lyte-tr").removeClass("selectedSubformRow")}))}$(this).next("span.select2.select2-container.select2-container--default").attr("data-zcqa",$(this).attr("data-zcqa")),$(this).off("select2:opening"),$(this).on("select2:opening",(function(e){var r=$(this),n=$("#dvinner"),i=n.is(":visible");if(r.data()&&r.data("colorcode_enabled")){var a=r.parent(),o=a.find(".activitesColor");""===r.val()&&o.length>0&&(o.remove(),a.parent().addClass("colorEnabledPKNone"))}if(1!==$("#analyticalPageContainer").length&&1!==$("#createDashboardPanel").length||AnalyticsChart.freezePopScroll(r),$L(".crmcanvasquicksavepop").length&&Lyte.registeredMixins["crm-formview-mixin"]&&Lyte.registeredMixins["crm-formview-mixin"].freezeQuickSavepopScroll(),$("#commonActionPage").hasClass("showPpTop")&&$("#commonActionPage .pp-content").css("overflow","hidden"),r.hasClass("ccPhoneNumber")){var s=$L("crm-create-fields")[0];if(s&&s.component.processLayoutRules(s),!r.is(":visible"))return!1;r.data("select2").dataAdapter.query("",(function(e){r.data("select2").trigger("results:all",{data:e,query:""})}))}if(!r.hasClass("dataPopulated")&&r.hasClass("ccPhoneNumber"))return sE(e),CrmPhoneNumberInput.populatePhoneNumberCountryCodes(r),!1;if(!r.hasClass("dataPopulated")&&(r.data("values")||r.data("mapval")))return sE(e),populatePicklist(r),!1;if($(".select2-selection__rendered").height()<300){var l=$("#layout_landing_right"),c=renderingUtils.windowHeight>=$(document).height()?0:renderingUtils.getScrollBarWidthValue;$("html,#setup_new_ContentDiv").css({overflow:"hidden","margin-right":c});var d=$("#searchCreateDiv").find(".popup-model-content");d.is(":visible")&&setTimeout((function(){d.addClass("oHimp")}),200);var u=$(".mmCriteriaContainer");u.is(":visible")&&u.css({overflow:"hidden"}),l.is(":visible")&&l.addClass("oH"),i&&n.addClass("oHimp")}setTimeout((function(){var e=$("body > .select2-container--open");e.on("click",(function(){sE(event)}));var t=$("body > .select2-container--open .select2-results").width();e.length&&e.offset().left+t>renderingUtils.windowWidth&&e.css({left:"auto",right:t+30}),$(".select2-results__option").length<10&&$(".select2-container--open").find(".select2-search--dropdown").css({height:"0px",overflow:"hidden"})}),10),t.onOpenCallback&&Lyte.registeredMixins["crm-utilities"].executeFunctionByName(t.onOpenCallback,window,r),setTimeout((function(){var e=$(".select2-container--open").eq(0);e.closest("td").addClass("wf_setFocus"),e.closest("crm-phone-field").length>0&&e.closest("crm-create-subformfields").length>0&&e.closest(".crm_phone_field").addClass("LyteSForm_focus")&&e.closest("lyte-tr").addClass("selectedSubformRow")}),50)})),t.afterOpenCallback&&$(this).off("select2:open").on("select2:open",(function(){Lyte.registeredMixins["crm-utilities"].executeFunctionByName(t.afterOpenCallback,window,$(this));var e=$(".select2-container--open").eq(0);e.closest(".labelValCreate").addClass("focusEleField"),e.closest("td").addClass("wf_setFocus")})),!1!==v&&L&&$(this).on("select2:select",(function(){$(this).select2("open")})),$(this).on("select2:close",(function(){var e=$("#layout_landing_right"),r=$("#dvinner"),n=r.is(":visible");$("html,#setup_new_ContentDiv").css({overflow:"","margin-right":""});var i=$("#searchCreateDiv").find(".popup-model-content");i.is(":visible")&&i.removeClass("oHimp"),$("#createEditCallDiv").is(":visible")&&$("#createEditCallPopup").off("scroll.select2.select2-Crm_Calls_CALLTYPE"),$(".select2-container--open").find(".select2-search--dropdown").css({height:"",overflow:""});var a=$(".mmCriteriaContainer");a.is(":visible")&&a.css({overflow:"auto"}),e.is(":visible")&&e.removeClass("oH"),n&&r.removeClass("oHimp"),t.onCloseCallback&&t.onCloseCallback($(this))})),$(this).on("select2:closing",(function(){if(1===$("#analyticalPageContainer").length||1===$("#createDashboardPanel").length){var e=$(this);AnalyticsChart.rm_freezePopScroll(e)}$L(".crmcanvasquicksavepop").length&&Lyte.registeredMixins["crm-formview-mixin"]&&Lyte.registeredMixins["crm-formview-mixin"].rm_freezeQuickSavepopScroll();var t=$(".select2-container--open"),i=t.eq(0),a=t.length,o=r,s=n;i.closest(".labelValCreate").removeClass("focusEleField"),i.closest("td").removeClass("wf_setFocus"),o.hasClass("showPpTop")&&(a>2?s.css("overflow","hidden"):s.css("overflow","auto"))})),C&&y.length>0&&y.on("click",(function(){$(this).next("select").select2("open")}))}})),$(".select2-selection__rendered").attr("title","");var L=$("#reportingSelect"),w=$("#addUserReporting");(L.length>0||w.length>0||$("#roleChangePopUp").length>0||$("#branchChangePopup").length>0)&&$("#userDD,#userReportingDD,#subUserDD").add(L).add(w).select2({templateResult:formatState,templateSelection:formatState}),e=null}}),1)},unbindSelect2:function(e){e&&$(e).length&&((e=$(e)).select2("destroy"),e.closest(".wf_chosen_ui").find(".sltSetVal").off("click"))},titleForEllipsis:function(e){$(e).off("mouseenter").on("mouseenter",(function(){var e=$(this);e.removeAttr("title"),this.offsetWidth<Math.floor(this.scrollWidth)&&this.offsetWidth!=Math.floor(this.scrollWidth)&&("INPUT"===e.prop("tagName")?e.attr("title",$.trim(e.val())):e.attr("title",$.trim(e.text())))}))},bindTableScroll:function(){var e=$("#listViewTable"),t=e.parent();thirdPartyUtils.tabContLeftPos=e.outerWidth()-t.outerWidth(),0==t.scrollLeft()&&$("#fixedRowHeader").hide(),t.scroll((function(){var e=$L("#listViewTable"),t=e.parent(),r=t.scrollTop(),n=t.scrollLeft(),i=$(".fixedheadercolumn"),a=$("#fixedRowHeader"),o=$("#fixedRowHeaderTable"),s=$("#fixedHeaderTable"),l=$("#fixedHeader"),c=$("#listviewtablescroll").scrollLeft();if(Crm.userDetails.RTL_ENABLED)thirdPartyUtils.scrollLeftpos=thirdPartyUtils.scrollLeftpos+renderingUtils.windowWidth-Utils.lvLeftFilterWidth.replace("px","")+1,$(".firefox").length>0?(thirdPartyUtils.scrollLeftpos=Math.abs(c),0!=thirdPartyUtils.scrollLeftpos?(i.show(),a.show(),i.addClass("boxShadowFixedColunm"),o.css({top:-1*r}),e.addClass("ls")):(a.hide(),e.removeClass("ls"),i.removeClass("boxShadowFixedColunm")),s.css({right:-Math.abs(c)})):thirdPartyUtils.scrollLeftpos!=l.outerWidth()?(i.show(),a.show(),i.addClass("boxShadowFixedColunm"),o.css({top:-1*r}),s.css({right:-1*Math.abs(thirdPartyUtils.tabContLeftPos-Math.abs(c))}),e.addClass("ls")):(a.hide(),e.removeClass("ls"),i.removeClass("boxShadowFixedColunm"),s.css({right:-1*Math.abs(thirdPartyUtils.tabContLeftPos-Math.abs(c))})),r>0&&l.show();else if(r>0?(l.show(),s.css({left:-1*n-1})):l.hide(),n>0){i.show(),a.show(),i.addClass("boxShadowFixedColunm");var d=-1*r;o.css({top:d}),e.addClass("ls")}else a.hide(),e.removeClass("ls"),i.removeClass("boxShadowFixedColunm");var u=$("#sort_div");u.length&&"block"===u.css("display")&&u.hide()}))},select2HandleBackspace:function(){$.fn.select2.amd.require(["select2/selection/search"],(function(e){if(this.$element&&this.$element.data("removeElement"))this.trigger("unselect",{data:arguments[1]});else{var t=e.prototype.searchRemoveChoice;e.prototype.searchRemoveChoice=function(){t.apply(this,arguments),this.$search.val(""),this.handleSearch()}}}))},removeSelect2Hover:function(e,t){$(t).closest(".select2-results").find("li").removeClass("select2-results__option--highlighted")},closeSelect2:function(e){e&&$("#"+e).select2("close")},enablePerfectScroll:function(e){thirdPartyUtils.bindPerfectScroll("#"+e,{wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1})}},commonUtils={ms_ie:!1,getPhotoURL:function(e){return crmConstants.contactsPhotoURL+"/file?ID="+e+"&fs=thumb"},getFromToIndexes:function(e,t){var r=parseInt(parseInt(e)/parseInt(t)),n=[];return n.push(r*t+1),n.push((r+1)*t),n},isInViewport:function(e){var t=e.offset().top,r=e.offset().top+e.outerHeight(),n=$L(window).scrollTop()+$(window).innerHeight(),i=$L(window).scrollTop()+$(".cvpadding").outerHeight();return n>t&&i<r}};commonUtils.checkErrorMsg=function(e,t,r,n,i){t=t||"show";var a=$("#twtInptDiv");if("object"==typeof e){if("true"===e.error&&"crm.process.criteria.pop.info"===e.errMsg)return crmui.showMsgBand("error",I18n.getMsg(e.errMsg),3e3),commonUtils.showHideLoadingDiv(),!0;if("LOOKUPFILTER_CRITERIA_NOTMATCHED"===e.STATUS){var o=(E=["(",")","+","-","_","/"]).length,s=e.INFO.length;if(s>0)for(var l=0;l<s;l++){var c="1"===(le=e.INFO[l]).ISCF?le.COLUMNNAME:le.FIELDLABEL;for(M=0;M<o;M++)c=commonUtils.replaceSpSymbols(c,E[M]);(U=$L("#property\\("+c+"\\)"))&&0!==U.length||(U=$L(n)?$L("#"+le.COLUMNNAME):$("#Crm_"+i+"_"+le.COLUMNNAME))&&0!==U.length||(U=$("input[name=property\\("+c+"\\)]")),commonUtils.showErrorMsg(I18n.getMsg("crm.lookupfilter.entity.errormsg",le.SINGULARTABLABEL),U,i,n),n||commonUtils.isInViewport(U)||$L(U).scrollTo({axis:"y",duration:1e3,offset:-100})}else if(Object.keys(e.INFO))for(var d=Object.keys(e.INFO),u=d.length,m=0;m<u;m++)for(var p=d[m],g=p.split("_")[1],f=p.split("_")[2],h=e.INFO[p],v=h.length,C=0;C<v;C++){var y="Users"===(le=h[C]).MODULE;let e=Crm.requestSubformBitMap[f],t=0,r=0;for(;t<g&&r<1e3;)"1"===e.charAt(r)&&t++,r++;let a=$("#subform_"+f).find("tr")[r],o=0!==$(a.querySelector(" input[data-colname="+le.COLUMNNAME+"]")).length?$(a.querySelector(" input[data-colname="+le.COLUMNNAME+"]")):y?$(a.querySelector("crm-user-wrapper[data-colname="+le.COLUMNNAME+"]")):$(a.querySelector(" textarea[data-colname="+le.COLUMNNAME+"]"));commonUtils.showErrorMsg(I18n.getMsg("crm.lookupfilter.entity.errormsg",le.SINGULARTABLABEL),o,i,n),commonUtils.isInViewport(o)||$L(o).scrollTo({axis:"y",duration:1e3,offset:-100})}return commonUtils.showHideLoadingDiv(),!0}if("DUPLICATE"===e.STATUS){if(commonUtils.hideDuplicateErrorMsg(),e.TYPE)return renderingUtils.showCustomAlert(e.INFO,"",!0),commonUtils.showHideLoadingDiv(),!0;o=(E=["(",")","+","-","_","/"]).length;for(var E,L=e.INFO.length,w=0,b=0;b<L;b++,w++){var U,T=e.INFO[b],M=0,A=T.FIELDLABEL;i=T.MODULE,c="1"==T.ISCF?T.COLUMNNAME:A;for(M=0;M<o;M++)c=commonUtils.replaceSpSymbols(c,E[M]);(U="TWITTER"===T.COLUMNNAME?a:$("#property\\("+c+"\\)"))&&0!==U.length||(U=!0===n?$("#Crm_"+i+"_"+T.COLUMNNAME+".Crm_"+i+"_"+T.COLUMNNAME):$("#Crm_"+i+"_"+T.COLUMNNAME));var I=commonUtils.getDuplicateErrorMsg(T,!1,void 0,w);commonUtils.showErrorMsg(I,U,i,n),U.focus()}return commonUtils.showHideLoadingDiv(),!0}if("REPORTINGTO_COUNT_EXCEEDED"===e.STATUS){var x="<span id='errorMsg_Crm_Contacts_REPORTINGTOCONTACTID' class='errMsg errorMsgDesc'>"+e.INFO+"</span>",R=$("#Contacts_fldRow_REPORTINGTOCONTACTID");return R.addClass("errorFieldP"),R.find(".labelValCreate").append(x),commonUtils.showHideLoadingDiv(),!0}if("ACCOUNT_PERMISSION_DENIED"===e.STATUS){x="<span id='errorMsg_Crm_Contacts_ACCOUNTID' class='errMsg errorMsgDesc'>"+e.INFO+"</span>";var S="#Contacts_fldRow_ACCOUNTID";return $(S).addClass("errorFieldP"),$(S).find(".labelValCreate").append(x),commonUtils.showHideLoadingDiv(),!0}if("PRODUCT_DOES_NOT_EXIST"===e.STATUS){var _,D="object"==typeof e.DelProd?e.DelProd:JSON.parse(e.DelProd);for(M=0;M<e.ProdCount;M++){var N=productDetails.sfFldIdSuffix.substr(1)+"PRODUCTID_"+(M+1),k=productDetails.sfFldIdSuffix+"PRODUCTID_"+(M+1);if($("#errorMsg_product_"+N).remove(),D.includes(M+1)){x="<div id='errorMsg_product_"+N+"' style='clear:both; padding-bottom:10px;color: var(--negativeColor); font-size: var(--crm-extra-medium-font-size) !important; display:block;'>"+I18n.getMsg("crm.select.product.deleted")+"</div>";$(x).insertAfter(k),_=$("#"+N).offset()}}return $L(window).scrollTo(0,_.top-200),commonUtils.showHideLoadingDiv(),!0}if("INVALID_INVENTORY_REQUEST"==e.STATUS)return renderingUtils.showCustomAlert(I18n.getMsg("crm.email.message.invalid.data")+". "+I18n.getMsg("crm.refresh.page")),commonUtils.showHideLoadingDiv(),!0;if("FILEUPLOAD_FIELD_LIMITEXCEEDED"===e.STATUS)return crmui.showMsgBand("error",I18n.getMsg("crm.attachment.fileUploadField.Maxlen.check.field",[e.MAXLEN,e.LABEL]),3e3),commonUtils.showHideLoadingDiv(),!0;if("IMAGEUPLOAD_FIELD_LIMITEXCEEDED"===e.STATUS)return crmui.showMsgBand("error",I18n.getMsg("crm.imageupload.allowed.length",[e.MAXLEN,e.LABEL]),3e3),commonUtils.showHideLoadingDiv(),!0;if("SHOW_INFO_KEY_ERROR"===e.STATUS)return crmui.showMsgBand("error",e.INFO,3e3),commonUtils.showHideLoadingDiv(),!0;if("NO_PERMISSION_FOR_EMAILID"===e.STATUS){commonUtils.showHideLoadingDiv();for(var O=(Y=e.DETAILS.fields).length,F=0;F<O;F++){A=Y[F].field_label;var P=$L(n?"#createEntityForm":"#secDiv_Native__Campaigns__Extn__Zoho_Campaign_Details").find('[data-label="'+A+'"]');commonUtils.showErrorMsg(I18n.getMsg("crm.zcampaign.emailid.permission.denied"),P,i)}return!0}if("NOT_ALLOWED"===e.STATUS&&e.DETAILS&&e.DETAILS.api_name)return commonUtils.showHideLoadingDiv(),"A portal user with same email address already exists."===e.message&&crmui.showMsgBand("error",I18n.getMsg("custmr.prtl.email.already.used"),3e3),"A portal user with the same phone number already exists."===e.message&&_cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("custmr.prtl.phone.already.used"),ltPropType:"error"}}),!0;if("INVALID_DATA"===e.STATUS&&e.DETAILS)return commonUtils.showHideLoadingDiv(),"You cannot assign this email address to this portal user type, since the domain matches the super admin's domain."===e.message&&crmui.showMsgBand("error",I18n.getMsg("custmr.prtl.email.domain.check.failed"),3e3),"You cannot send the portal invitation since the email address has the following characters"===e.message&&crmui.showMsgBand("error",I18n.getMsg("portal_invite_email_is_not_supported")+" "+e.DETAILS.inValidChars,4e3),"Email address cannot contain the + character"===e.message&&crmui.showMsgBand("error",I18n.getMsg("custm.prtl.plus.email"),4e3),!0;if("LOOKUP_RECORD_ENTERS_INTO_REVIEW"===e.STATUS)return crmui.showMsgBand("error",e.INFO,3e3),commonUtils.showHideLoadingDiv(),!0;if(e.message&&-1!==e.message.indexOf("cf validation rule execution failed"))return CVRExec.showAlertOnError(i,e);if(e.message&&-1!==e.message.indexOf("validation rule execution failed")){if("error"===e.status){if(e.validation_rule_error_fields)for(var V=(Y=e.validation_rule_error_fields).length,H={},B={},z=0;z<V;z++)H=Y[z],B=$("#"+CVRExec.getElemId("edit",H.column_name,i)),commonUtils.showErrorMsg($ESAPI.encoder().encodeForHTML(H.alert),B,i),B.focus();return!0}}else if(e.message&&-1!==e.message.indexOf("Service Module Check for Service Availability")||e.message&&-1!==e.message.indexOf("Appointment Module Check for Service Availability")){if("error"===e.status){if(e.service_availability_error_fields){var Y;for(V=(Y=e.service_availability_error_fields).length,H={},B={},z=0;z<V;z++)H=Y[z],B=$("#"+CVRExec.getElemId("edit",H.column_name,i)),commonUtils.showErrorMsg($ESAPI.encoder().encodeForHTML(H.alert),B,i),B.focus()}return!0}}else{if(e.message&&("crm.error.services.limit"==e.message||"crm.error.active.services.limit"==e.message))return"error"===e.status&&_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg(e.message),ltPropWrapperClass:"crmCenterAlert",ltPropContentAlign:"center",ltPropButtonPosition:"center",ltPropButtons:[{type:"accept",text:I18n.getMsg("crm.nsocial.onboard.got.it"),appearance:"primary"}]}}),!0;if(e&&e.STATUS&&"FAILURE"===e.STATUS&&e.INFO&&e.INFO.MSG)return renderingUtils.showCustomAlert(e.INFO.MSG,"",!0),commonUtils.showHideLoadingDiv(),!0;if("SUBFORM_RECORD_MAX_ROW_EXCEEDED"===e.STATUS){var j=e.INFO.split(":::"),W=I18n.getMsg(j[0],[j[1],j[2]]);return crmui.showMsgBand("error",W,3e3),commonUtils.showHideLoadingDiv(),!0}if(e&&e.STATUS&&"ZIAFAILURE"===e.STATUS&&e.INFO){var q=$L(".photoUploadSec"),G=$("#wmstoolbar"),Z=28;G&&(Z=G.outerHeight());var J=$("#createFixedButtonDiv"),X=q.offset().top+q.outerHeight(),K=q.offset().top,Q=$L(window),ee=Q.scrollTop()+J.outerHeight(),te=ee+renderingUtils.windowHeight-Z-J.outerHeight();if(!(K>ee&&X<te)){var re=q.offset().top-Z-J.outerHeight();Q.scrollTop(re)}var ne=Crm.getVisionMyJobsDependency();return Lyte.injectResources(ne,void 0,(function(){if("PRODUCTID_INVALID"===e.STATUS){var t=$('[data-colname="PRODUCTID"]')[e.prdId].closest("div");if(0===t.getElementsByClassName("prdError").length){var r=document.createElement("span");r.setAttribute("class","prdError errMsg errorMsgDesc"),r.innerText=I18n.getMsg(e.errMsg),t.append(r)}return commonUtils.showHideLoadingDiv(),!0}!function(){var t=$("crm-zia-vision-error-popup");0!=t.length&&t.remove();Crm.client_tracking("Zia Vision Entity Validation Failure",{type:e.INFO});var r=$L(".lnPhoto");r.find("img").hide();var n=$L("#imgContainer").find("img")[0].src;Lyte.Component.render("crm-zia-vision-error-popup",{moduleName:i,createImgSrc:n,action:e.INFO,visionId:e.VISIONID},"#zia-vision-popup"),r.addClass("lnPhoto_ziaVision"),q.addClass("cP"),q.attr("onclick",'$("#visionModal")[0].ltProp("show", true);')}(model)})),!0}$L(".lnPhoto").removeClass("lnPhoto_ziaVision")}}else if(void 0!==e.indexOf){if(e.indexOf("NAVMESG::::")>-1){var ie=e.substring(e.indexOf("NAVMESG::::")+11,e.indexOf("::::NAVMESG"));return renderingUtils.showCustomAlert(I18n.getMsg(ie,I18n.getMsg(singularModule))),commonUtils.showHideLoadingDiv(),!0}if(e.indexOf("INVALIDTICKET:::")>-1)return commonUtils.showHideLoadingDiv(),renderingUtils.showCustomAlert(I18n.getMsg("crm.project.portal.zsckeyisregenerated.admin")),!0;if(e.indexOf("Cannot_Create_Anymore_Projects")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.limit.projectcreation")),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("Portal_owner_changed")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.portalownerchanged")),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("Insufficient_Privileges_Project")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.noproceed.insuff.projects")),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("Not_A_User_In_Projects")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.noproceed.notinprojects")),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("No_Permission_For_User_Profile")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.noproceed.insuff.crm")),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("NOPROJECTTOASSOCIATE")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.noprojavailable")),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("NOPROJASSOCIATION:::")>-1)return commonUtils.showHideLoadingDiv(),renderingUtils.showCustomAlert(I18n.getMsg("crm.project.nomoretoassociate","")),!0;if(e.indexOf("TWOCONTACTSWITHSAMEEMAIL")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.sameemail")),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("SECURITY::::")>-1||-1!==e.indexOf("SECURITY_ERROR_403::::INSUFFICIENT")||-1!==e.indexOf("SECURITY_ERROR_403::::INSUFFICIENT_PRIVILEGES"))return 1===(le=e.split("SECURITY::::")).length&&(le[1]=e),$(t).html(le[1]),commonUtils.showHideLoadingDiv(),!0;if(e.indexOf("CRM_ERROR_PAGE_500::::EXCEPTION")>-1){if(r&&(r.indexOf("CreateCommonModule")>-1||r.indexOf("EditCommonModule")>-1))if(e.indexOf("MaxLenField")>-1){var ae=e.substring(e.indexOf("MaxLenField"),e.lastIndexOf("&#x3a;&#x3a;"));ae=(ae=ae.split("&#x3a;&#x3a;")).splice(1,2);var oe=$("#Crm_"+i+"_"+ae[1].toUpperCase().replace(/ /g,""));oe.data()?ae[1]=oe.data().displaylabel:ae[1]=I18n.getMsg(ae[1],I18n.getMsg(moduleRecordMapping[i].singular_label)),ae.toString().indexOf("txtListPrice")>-1?ae[1]=I18n.getMsg("List Price"):ae.toString().indexOf("txtQty")>-1?ae[1]=I18n.getMsg("Qty"):ae.toString().indexOf("hdnTotal")>-1?ae[1]=I18n.getMsg("Amount"):ae.toString().indexOf("hdnDiscount")>-1||ae.toString().indexOf("hdnDiscPc")>-1?ae[1]=I18n.getMsg("Discount"):ae.toString().indexOf("hdnTax")>-1?ae[1]=I18n.getMsg("Tax"):ae.toString().indexOf("hdnNetTotal")>-1&&(ae[1]=I18n.getMsg("Total")),renderingUtils.showCustomAlert(I18n.getMsg("crm.iamexception.maxlen",ae))}else!Crm.isHeadless&&productDetails.isListPriceEmpty()?crmui.showMsgBand("error",I18n.getMsg("crm.label.alert.listprice",""),4e3):Crm.userDetails.isStorageLimitReached?Crm.showStorageExceedPopup():renderingUtils.showCustomAlert(I18n.getMsg("crm.unable.to.process.request",""));else{var se=$(t);se.html(e),EvalInnerScript(se),$L("#basic").scrollTo(0)}return commonUtils.showHideLoadingDiv(),!0}if(e.indexOf("SECURITY::::")>-1){var le=e.split("SECURITY::::");return $("#show").html(le[1]),commonUtils.showHideLoadingDiv(),!0}if(e.indexOf("NOT UNIQUE:::")>-1){le=e.split("NOT UNIQUE:::");return $("#unique").html($ESAPI.encoder().encodeForHTML(le)).show(),commonUtils.showHideLoadingDiv(),!0}if(e.indexOf("NOT UNIQUE ACCOUNT:::")>-1){var ce=$("#Crm_"+i+"_ACCOUNTID");return commonUtils.showErrorMsg(e.split("NOT UNIQUE ACCOUNT:::"),ce,i,n),ce.focus(),commonUtils.showHideLoadingDiv(),!0}if(e.indexOf("UNAUTHORIZED TO ASSOCIATE ACCOUNT:::")>-1){ce=$("#Crm_"+i+"_ACCOUNTID");return commonUtils.showErrorMsg(e.split("UNAUTHORIZED TO ASSOCIATE ACCOUNT:::"),ce,i,n),ce.focus(),commonUtils.showHideLoadingDiv(),!0}if(e.indexOf("Why does my session expire")>-1||e.indexOf("Affordable for Medium Business")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.reauth.login.expired",I18n.getMsg(singularModule))),document.location.href=Crm.getCrmBasePath()+"/ShowHomePage.do",!0;if(e.indexOf("CRM_ERROR_PAGE_500::::EXCEPTION")>-1)return!0;if(["crm.zsurvey.error.create.survey.campaign.brandchange","crm.zsurvey.error.invalid.survey.type","crm.zsurvey.error.create.new.survey"].contains(e))return crmui.showMsgBand("error",I18n.getMsg("crm.zsurvey.error.create.survey.campaign.brandchange",Crm.integrationsAppName.ZOHO_SURVEY),3e3),!0;if(e.indexOf("SHOW_RECURRING_ERROR_ALERT")>-1)return renderingUtils.showCustomAlert(I18n.getMsg("crm.event.no.create")),!0}return!1},commonUtils.getPlainPhoneNo=function(e){var t=e.trim(),r=t.length,n="";if(r<0)return n;if(/^\d+(,(\d)+)*(\.\d{1,2})*$/.test(t))return t;if(14===r){if(t.startsWith("(")&&t.indexOf("-")&&t.indexOf(")")&&t.indexOf(" ")){n=t;var i=t.indexOf(")"),a=t.indexOf(" "),o=t.indexOf("-");return 4===i&&5===a&&9===o&&10===(t=(t=(t=(t=t.replace(" ","")).replace("(","")).replace(")","")).replace("-","")).length?t.replace(" ","").replace("(","").replace(")","").replace("-","").length<10?n:t:n}return t}if(12===r){if(-1!==t.indexOf(" "))return t;if(t.startsWith("(")&&t.indexOf(")")&&t.indexOf("-")){n=t;var s=t.indexOf(")"),l=t.indexOf("-");return 6===s&&7===l&&9===(t=(t=(t=t.replace("-","")).replace("(","")).replace(")","")).length?t.replace("-","").replace("(","").replace(")","").length<9?n:t:n}return t}return t},commonUtils.getFormatPhoneNo=function(e){var t=e.trim();return"en_US"===Crm.userDetails.COUNTRY_LOCALE&&t.match(/[0-9]/)&&(t="(",10==e.length?t+=e.substring(0,3)+") "+e.substring(3,6)+"-"+e.substring(6,10):9==e.length?t+=e.substring(0,5)+")-"+e.substring(5,9):t=e),t},commonUtils.compareNumber=function(e,t){var r=!0;return(e===t||parseInt(e)>parseInt(t))&&(r=!1),r},commonUtils.calculateAcceptableCharCount=function(e,t){var r=document.createElement("div"),n=$(e).width();r.innerText=t+"...",r.style.display="none",document.body.appendChild(r);var i=$(r).width();if(document.body.removeChild(r),(n=n||200)>i)return t.length;for(;n<i;)t=t.substring(0,t.length-2),r.innerText=t+"...",r.style.display="none",document.body.appendChild(r),i=$(r).outerWidth(),document.body.removeChild(r);return t.length},commonUtils.cleanWhitespace=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];3!==r.nodeType||/\S/.test(r.nodeValue)||(e.removeChild(r),t--),1===r.nodeType&&commonUtils.cleanWhitespace(r)}return e},commonUtils.destroyCanvasElem=function(){commonUtils.getTextWidthUsingCanvas.canvasElem=null},commonUtils.getTextWidthUsingCanvas=function(e,t){var r,n,i=getComputedStyle(document.querySelector(":root"));if(r=(commonUtils.getTextWidthUsingCanvas.canvasElem||(commonUtils.getTextWidthUsingCanvas.canvasElem=document.createElement("canvas"))).getContext("2d"),t){var a=/var\(--[a-zA-Z_-]+\)/g;if((n=t.font.split(" "))[0].match(a)){var o=n[0].match(/--[a-zA-Z_-]+/g);n[0]=n[0].replace(a,i.getPropertyValue(o[0])).trim()}-1!==n[0].search("rem")&&(n[0]=16*n[0].split("rem")[0]+"px"),t.font=n.join(" "),r.font=t.font}else r.font="16px "+i.getPropertyValue("--crm-font-regular");return r.measureText(e).width},commonUtils.openCustomLookup=function(e,t,r,n,i,a,o,s,l,c,d){if(d){if(Crm.userDetails.CLIENT_ACCOUNT&&t&&t.searchmodule){var u=Crm.moduleInfo?Crm.moduleInfo[t.searchmodule]:void 0;if(u)store.peekRecord("module",u.Id).fields||store.findAll("field",{module:u.apiname})}if(commonUtils.showHideLoadingDiv(!0),(e.includes("/Search.do")||e.includes("/EditCompetitor.do")||e.includes("/ViewCompetitor.do")||e.includes("/ShowMultiValuesForAdd.do"))&&(t||(t={}),"string"==typeof t?-1===t.indexOf(csrfParamName)&&(t=t+"&"+csrfParamName+"="+csrfToken):t[csrfParamName]=csrfToken,e.includes("/EditCompetitor.do"))){var m=$L("crm-detailview-header")[0],p=(void 0===m?$L("crm-detailview-canvas")[0].component.data.record:m.component.data.record).$sharing_permission;if(e.includes("/EditCompetitor.do")&&"read_only"===p)return renderingUtils.displayPermissionDenied(),void commonUtils.showHideLoadingDiv(!1)}if(t&&t.lookuprel&&"true"===t.lookuprel){for(var g in t)if(t.hasOwnProperty(g)){var f=t[g];"true"===f?f=!0:"false"===f&&(f=!1),e+="&"+g+"="+f}t=null}(new crmRequestPool).initiate({action:e,type:"POST",data:t,success:function(e){if(e.showField_Not_Available_Popup)return multiLookupsView.createLookupUpdateWarningPopup(I18n.getMsg("crm.label.error.field_not_available"),1,I18n.getMsg("crm.label.error.field_is_deleted",$ESAPI.encoder().encodeForHTML($("#"+e.fldName+"_label").text())),null,2,null,"POST"),commonUtils.showHideLoadingDiv(),void renderingUtils.freezeBackground();var t=$("#searchCreatePopup"),i=$("#topBandPopup"),a=$("#freezeBackGround"),d=$("#relatedListCols"),u=$("#qCreate"),m=u.is(":visible"),p=t.is(":visible"),g=d.is(":visible");$("#sIlookupFieldAddNew").is(":visible"),$(".eventCreatePopup");commonUtils.showHideLoadingDiv();var f=!(!Lyte.Router.getRouteInstance()||"canvas"!=Lyte.Router.getRouteInstance().routeName),h=$L("crm-bulklookup-addition")[0];if(h&&h.component.data.showCopy&&i.css("z-index",""),validationUtils.isJson(e)&&"object"!=typeof e&&"crm.campaign.integ.sandbox.not.supported"===JSON.parse(e).error)crmui.showMsgBand("error",I18n.getMsg("crm.campaign.integ.sandbox.not.supported",crmTab.getDisplayName("Campaigns",!1).toLowerCase()),3e3);else if(validationUtils.isJson(e)&&"object"==typeof e&&"PARENT_RECORD_DELETED"===e.STATUS)crmui.showMsgBand("error",I18n.getMsg("crm.record.perform.deleted.revoked"),5e3);else{var v=$("#"+r),C=$(".etTrendsWrapper"),y=$(".ziaCallAnalyticswrapper").length;(y||C.length)&&"searchCreatePopup"===r?v.css("z-index","317"):"topBandPopup"===r&&$(".temp_freezelayer").css({zIndex:315});var E=v.is(":visible");if($.isPlainObject(e)){var L=!1;if(!1===e.lookupFilterNotSatisfied)return void crmui.showMsgBand("error",e.lookupFilterErrorMsg,"4000","");let t=e.body;if(t){let e=t.length;multiLookupsView.LinkingRecordIds=multiLookupsView.LinkingRecordIds?multiLookupsView.LinkingRecordIds:{};for(let r=0;r<e;r++)multiLookupsView.LinkingRecordIds[t[r].ENTITYID]=t[r].LINKINGMODULE_ID}if(1==e.scheduled&&(multiLookupsView.permissionIssueWarningShow(null,null,e.searchmodule,7),L=!0),e.unassignallscheduler_running)return void(e.islookup?multiLookupsView.permissionIssueWarningShow(null,null,e.searchmodule,17,null,e.unassignallscheduler_runningmsg,e.unassignallscheduler_runningtitle):multiLookupsView.permissionIssueWarningShow(null,null,e.searchmodule,13,null,e.unassignallscheduler_runningmsg));if(e.mxnconvertscheduler_running)return void multiLookupsView.permissionIssueWarningShow(null,null,e.searchmodule,18,null,e.mxnconvertscheduler_runningmsg);if(e.clonescheduler_running)return void multiLookupsView.permissionIssueWarningShow(null,null,e.searchmodule,11,null,e.clonescheduler_runningmsg);if(1==e.isEditPermissionDenied&&1==e.isconfirm)return multiLookupsView.closeMLPopup(e.fldName),void multiLookupsView.permissionIssueWarningShow(null,null,e.searchmodule,1);var w=!1;if(multiLookupsView.multiLookups&&multiLookupsView.multiLookups[e.fldId]||(w=!0),e.relid){if((B={}).id=e.entityId,B.rid=e.relid,Crm.userDetails.isRelatedListLyteEnabled)var b=store.peekRecord("related_list",e.relid);else b=f?store.peekRecord("related_list",e.relid):crmRelatedList.EachModuleData[e.relid];var U=$L("#module")[0],T=b.parentModule?b.parentModule:U?U.value:Lyte.Globals.get("relatedList.module");if(e.parentModule&&(T=e.parentModule),w||(T&&""!==T&&"null"!=T||(multiLookupsView.multiLookups[e.fldId].parentModule=e.parentModule),e&&e.page&&(multiLookupsView.multiLookups[e.fldId].page=e.page),multiLookupsView.currentMultiLookup.isMandatory||e.select&&"true"===e.select&&e.body&&0===e.body.length||(multiLookupsView.multiLookups[e.fldId].variedLookupValues=null,multiLookupsView.multiLookups[e.fldId]=null)),B.actModule=T,B.module=T,B.actId=e.entityId,B.pname=b.name,B.isSortRequest=!1,Lyte.triggerEvent("relatedList",{id:e.relid}),Crm.userDetails.isRelatedListLyteEnabled||crmRelatedList.ajaxReq(B),!1===B.isSortRequest&&!e.lookuprel){Crm.userDetails.isRelatedListLyteEnabled||multiLookupsView.updateMXNFieldValue(void 0,B.rid,e.defaultvalue);var M=$("crm-detail-view");if(M.length){var A=(x=document.querySelector('[data-key="subvalue'+e.fldId+'"]')).getData("cxPropField"),I=Customization.updateMXNFieldValuetoAPIFormat(e,A.api_name);x.setData("cxPropFieldArr",I),M[0].component.setData("ajax_edit_in_progress",!1),multiLookupsView.closeMLPopup(e.fldName)}var x=document.querySelector('[data-key="subvalue'+e.fldId+' "]');if(f&&x){var R=$L("crm-detailview-canvas")[0];if(R){A=x.getData("cxPropField");if((I=Customization.updateMXNFieldValuetoAPIFormat(e,A.api_name)).length){var S=A.api_name,_=x.getData("cxFieldLabel");I.forEach((function(e){_!==S&&(e[_]=e[S],delete e.prevFieldLabel)}));var D=I&&I[0]&&I[0][_]&&I[0][_].module;x.setData("module",D)}R.getData("originalRecord")[A.api_name]=I.reverse(),multiLookupsView.closeMLPopup(e.fldName),R.component.setData("record",objectUtils.cloneObject(R.getData("originalRecord")))}}}!L&&e.successmsg&&crmui.showMsgBand("success",$ESAPI.encoder().encodeForHTML(e.successmsg),"2000","")}else{multiLookupsView.multiLookups&&multiLookupsView.multiLookups[e.fldName]&&(e&&e.parentModule&&(multiLookupsView.multiLookups[e.fldName].parentModule=e.parentModule),e&&e.page&&(multiLookupsView.multiLookups[e.fldName].page=e.page)),Crm.userDetails.isRelatedListLyteEnabled?e.fldName&&e.defaultvalue&&Lyte.registeredMixins["crm-related-list-utils"].updateMXNlookupFieldValue(void 0,void 0,void 0,e.fldName,e.defaultvalue):multiLookupsView.updateMXNFieldValue(e.fldName,void 0,e.defaultvalue);var N=$("#mxnEntityLookupdiv"),k=$("#popupClose");if(p&&(e.fromSearchCreate&&("true"==e.fromSearchCreate||1==e.fromSearchCreate)||c)){var O=!0;if(N)if(k)(V=k.attr("href"))&&V.indexOf("javascript:multiLookupsView.closeMLPopup(")>-1&&(V=V.replace("javascript:multiLookupsView.closeMLPopup('","").replace("');",""))!==e.fldName&&multiLookupsView.multiLookups[V]&&multiLookupsView.multiLookups[V].lookuprel&&(O=!1);if(!O){multiLookupsView.multiLookups[V].currentDom=i.html();var F=i.attr("style");multiLookupsView.multiLookups[V].currentDomstyle=F;var P=multiLookupsView.callMultiLookupPopup(e);v.html(P)}}if(m){var V;O=!0;if(N)if(k)(V=k.attr("href"))&&V.indexOf("javascript:multiLookupsView.closeMLPopup(")>-1&&(V=V.replace("javascript:multiLookupsView.closeMLPopup('","").replace("');",""))!==e.fldName&&multiLookupsView.multiLookups[V]&&multiLookupsView.multiLookups[V].lookuprel&&(O=!1);if(!O){multiLookupsView.multiLookups[V].currentDom=i.html();F=i.attr("style");multiLookupsView.multiLookups[V].currentDomstyle=F;P=multiLookupsView.callMultiLookupPopup(e);v.html(P)}}crmui.modalZIndex("nonLyte",v[0],"open")}if("{}"===e.body)return void(w?(i.css("z-index",""),hideAnimatePopup("deletepopup",!1),multiLookupsView.fieldStatusUpdate(e.fldName)):multiLookupsView.currentMultiLookup.isMandatory||multiLookupsView.closeMLPopup(e.fldName));P="";if(a.removeClass("zindex250"),e.isPartialLoad)multiLookupsView.partialCallBodyMultiLookupPopup(e);else{if(multiLookupsView.currentMultiLookup&&multiLookupsView.currentMultiLookup.isMandatory){if(e&&e.fldName&&-1===e.fldName.indexOf("_")){P=multiLookupsView.callMultiLookupPopup(e),v.html(P),n=renderingUtils.windowWidth-400,v.width(n),v.find(".pp-footer").removeClass("box-sh");var H=moduleRecordMapping[e.searchmodule].singular_label.toLowerCase();if(Crm.userDetails.isRelatedListLyteEnabled)Lyte.triggerEvent("relatedList",{module:e.parentModule});else{var B;(B={}).id=e.entityId;b=crmRelatedList.EachModuleData[e.fldName];B.rid=e.fldName,B.actModule=e.parentModule,B.module=e.parentModule,B.actId=e.entityId,b&&(B.pname=b.name),B.isSortRequest=!1,crmRelatedList.ajaxReq(B)}"addmore"==e.page&&crmui.showMsgBand("success",I18n.getMsg("crm.mxnlookup.lookuprel.mandatory.quickcreate",[H,multiLookupsView.currentMultiLookup.associatedRecordLabel?$ESAPI.encoder().encodeForHTML(multiLookupsView.currentMultiLookup.associatedRecordLabel):""]),3e3)}}else{P=multiLookupsView.callMultiLookupPopup(e),v.html(P),n=renderingUtils.windowWidth-400,v.width(n),v.find(".pp-footer").removeClass("box-sh");var z=$(".mlSelectedRecord"),Y=z.text(),j=$("#removeAllBtn"),W=$("#selected-records");if(("true"===e.select||!0===e.select)&&e.selectedCount>0)j.css({visibility:"hidden",display:"none"}),document.getElementsByName("AddMore")[0].setAttribute("style","display:none;visibility:hidden"),z.text(e.selectedCount),W.css("visibility","visible");if("false"!==e.select&&!1!==e.select||(""!==Y&&Y>0?($("#nextStep").prop("disabled",!1),$(".animateMl").css("visibility","hidden").addClass("cvTableAct"),W.css("visibility","visible")):($("#nextStep").prop("disabled",!0),$(".animateMl").css("visibility","visible").removeClass("cvTableAct"),W.css("visibility","hidden"))),e.select&&"true"==e.select&&0===e.body.length&&j.css("visibility","hidden"),$("#mxnlistViewTable tbody").find(".customCheckBox").length>0?$("#mxnlistViewTable #checkAll").attr("class","customCheckBox"):$("#mxnlistViewTable #checkAll").attr("class","customCheckBoxChecked"),multiLookupsView.mlSearchCloseIcon(".mlSearch"),o&&$(o.target).filter("input[type=button]").prop("disabled",!1),multiLookupsView.currentMultiLookup.associatedRecordLabel){if(!Crm.userDetails.isRelatedListLyteEnabled)var q={};if(null==H&&e&&(H=Crm.moduleInfo[e.module].translatedSingularLabel),e&&e.entityId&&e.refreshid){if(Crm.userDetails.isRelatedListLyteEnabled)Lyte.triggerEvent("relatedList",{id:e.refreshid});else{if(q.id=e.entityId,q.rid=e.refreshid,b=crmRelatedList.EachModuleData[e.refreshid]){T=b.parentModule;q.pname=b.name}q.actModule=T,q.module=T,q.actId=e.entityId,q.isSortRequest=!1,crmRelatedList.ajaxReq(q)}crmui.showMsgBand("success",I18n.getMsg("crm.mxnlookup.lookuprel.mandatory.quickcreate",[H,$ESAPI.encoder().encodeForHTML(multiLookupsView.currentMultiLookup.associatedRecordLabel)]),3e3),delete multiLookupsView.currentMultiLookup.associatedRecordLabel}}}multiLookupsView.currentMultiLookup&&(multiLookupsView.currentMultiLookup.isMandatory=!1),!e.relid&&e.select&&"true"==e.select&&0===e.body.length&&Crm.userDetails.permissions["Crm_Implied_Create_"+e.linkingmodule]&&multiLookupsView.openAddMorePopup(e.fldName)}}else"block"===$("#subSecondaryPopup").css("display")&&(a.addClass("zindex248"),i.css("z-index","300")),s&&"null"!==s?deskInteg.editPotentialLookUp(v,e):(Crm.isHeadless||"undefined"!=typeof crmNTC&&crmNTC.isSignalDetailViewVisible()&&"undefined"!=typeof crmNTCGlobal&&crmNTCGlobal&&crmNTCGlobal.showFreezeLayerForSignals(),v.html(e));if(($.trim($("#diNotificationDiv").html()).length||y)&&(C.length||y)&&i.css("z-index","316"),E){var G=$("#camp_status");G&&G.length&&thirdPartyUtils.bindSelect2(G)}else{n&&v.width(n),showAnimatePopup(r,(function(){"topBandPopup"===r&&(v.on("keydown",(function(e){var t=document.activeElement,r=$(t).closest("tr"),n=$("tr.bg_crmSelectBg");if(-1!==t.id.indexOf("radio_")){if(n.length>0&&(t=n.find("input")),40==e.keyCode)r.next().attr("class","bg_crmSelectBg"),e.preventDefault();else if(38==e.keyCode){var i=r.prev();i.find("input").length>0&&i.attr("class","bg_crmSelectBg"),e.preventDefault()}else 32==e.keyCode&&(renderingUtils.triggerEvent("click",t),e.preventDefault());r.removeClass("bg_crmSelectBg")}})),crmLayout.Resize.PopupHeightResize()),"searchCreatePopup"===r&&(t.find(".popup-model-footer").removeClass("scroll-sh"),crmLayout.Resize.PopupHeightResize())}));var Z=$L("#topBandPopup"),J=Z.find("table.newtable");J[0]&&(Z.trapFocus("destroy"),J[0].setAttribute("cx-prop-aria","true")),Z.length>0&&Z.trapFocus({focusTarget:".setupsearch"}),Crm.userDetails.isAccessibilityConfigSupported&&(Z.bindAria=Lyte.registeredMixins["crux-aria-table-mixin"].bindEventForAria.bind(Z[0]),Z.bindAria()),Crm.isFromSalesInbox&&u[0].childElementCount>0&&Crm.isFromSalesInbox&&$(".freezeLayer").attr("style","z-index : 35 !important")}setTimeout((function(){if(p=t.is(":visible"))p&&m&&Crm.isFromSalesInbox&&t.css("z-index","40");else{$("#fldValue").focus();var e=$("[name=fldValue]"),r=e.val();e.focus().val("").val(r)}p&&$L("#feedParentDiv").is(":visible")&&t.css("z-index","")}),100),g&&d.css("display","none"),p&&e.fromSearchCreate&&setTimeout((function(){var e=$("[data-zcqa=mxnsearchString]"),t=e.val();e.focus().val("").val(t)}),100),"function"==typeof l&&l(),Lyte.registeredMixins["crm-canvas-form-design-config-mixin"]&&Lyte.registeredMixins["crm-canvas-form-design-config-mixin"].isRightSideModalOpened()&&($("#btn_SaveAndAssociate")[0].onclick=function(){handleQuickCreatePopup(D,"null","true","null")},$("#btn_Save.primarybtn")[0].removeAttribute("onclick"))}},error:function(e){(commonUtils.showHideLoadingDiv(),"crm.tab.module.entity.canvas"===Lyte.Router.getRouteInstance().transition.info.route)&&($(".zc_ajax_pop_wrapper").eq(0).removeClass("dNImp"),"function"==typeof l&&l(!0));if(555===e.status&&e.responseText){if(renderingUtils.showCustomAlert(e.responseText),a){var t=$("#navig_next"),r=t.hasClass("vaM")?"nextDisabled vaM":"nextDisabled";t.after('<img hspace="2" src='+networkUtils.getImageUrl("spacer.gif",ResourceConstants.CRM)+'" class="'+r+'" align="middle">'),t.remove()}}else 558===e.status&&e.responseText?crmui.showMsgBand("warning",e.responseText,1e4):e.status!==crmConstants.errorStatusCode?renderingUtils.showCustomAlert("Unable to process request"):e.status===crmConstants.errorStatusCode&&$L(window).scrollTo({top:0})}})}else Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-quick-create-less.css"],ResourceConstants.CRMClient,ResourceConstants.LESSDEFAULT),void 0,(function(){commonUtils.openCustomLookup(e,t,r,n,i,a,o,s,l,c,!0)}))},commonUtils.formatDecimalValue=function(e,t,r){var n=void 0!==t?t:0,i=parseFloat(e),a=(parseInt(i+"")+"").length,o=parseFloat(e).toPrecision(a+n);return o&&-1!==o.indexOf("e")&&(o=parseFloat(e).toPrecision(a+n+2)),!0===r?o:currencyUtils.getNumberWithCommas(o,",",".")},commonUtils.enableErrorLogging=function(){var e;murphy.setTags((function(){var e=cookieUtils.getCookie("ZCRM_QA_AUTOMATION_MACHINEINFO"),t=e&&parseInt(e.split(":")[1])?parseInt(e.split(":")[1]):null;return{jsVersion:crmConstants.staticVersion.replace("v",""),buildId:crmConstants.buildId,zuid:Crm.userDetails.ZUID,zgid:Crm.userDetails.ZGID,screen:Crm.userDetails.screen,viewPort:Crm.userDetails.viewPort,lastRefresh:Crm.userDetails.lastRefresh,automation_id:cookieUtils.getCookie("ZCRM_QA_AUTOMATION_ID"),automation_case_id:cookieUtils.getCookie("ZCRM_QA_AUTOMATION_CASE_ID"),automation_case_info:e,aalam_case_url_key:cookieUtils.getCookie("CaseInfo"),case_rerun_count:t,userAgent:navigator.userAgent,releaseDetails:{releaseName:crmConstants.buildName,releaseRevision:crmConstants.buildChangeset}}}),!0),Lyte.addEventListener("error",(function(e){commonUtils.murphyLyteErrorHandler.proccessError(e)})),murphy.beforeTrack((function(e){if("xhr"===e.category){if(e.data.url.includes("tracking")||e.data.url.includes("spotlight"))return;return e}return e})),window.addEventListener("offline",(function(){murphy.addCustomTracking({message:"User went offline",name:"Network Status",type:"custom event"})})),window.addEventListener("online",(function(){murphy.addCustomTracking({message:"User Back online",name:"Network Status",type:"custom event"})})),document.createElement=(e=document.createElement,function(){var t=e.apply(this,arguments);return"script"!==t.tagName.toLowerCase()&&"link"!==t.tagName.toLowerCase()||(t.setAttribute("X-MURPHY-LOAD-START",Date.now()),t.addEventListener("error",(function(){var e=this.getAttribute("src")||this.getAttribute("href");e=e.includes("https")?e:"https:"+e,murphy.addCustomTracking({type:"http",category:"xhr",data:{method:this.tagName.toLowerCase(),url:e,startimestamp:this.getAttribute("X-MURPHY-LOAD-START"),timeTaken:Date.now()-this.getAttribute("X-MURPHY-LOAD-START"),status_code:404}})}))),t})},commonUtils.murphyClientmetricsInstallation=function(e,t){if(murphy&&murphy.clientmetrics&&murphy.clientmetrics.isClientMetricsInstalled())return;crmConstants.isLoadCompleted=!0;let r=RebrandLinkUtil.getProperty("DeploymentLocation"),n=-1===window.location.hostname.indexOf("localzoho.com"),i=crmConstants.isClientMetricsEnabledZgid;if(crmConstants.isClientMetricsLZEnabled||n&&Crm.env&&!Crm.env.isDevelopment&&(["US","IN"].includes(r)||i)){let r=t&&t.url?(t.url+"").split("/"):[],n=r.findIndex((e=>"tab"===e||"settings"===e)),i=n>-1?r[n+1]:"";i=i&&i.includes("?")?i.split("?")[0]:i,murphy.clientmetrics.setCustomTags({zuid:Crm.userDetails.ZUID,zgid:Crm.userDetails.ZGID,buildId:crmConstants.buildId,automation_id:cookieUtils.getCookie("ZCRM_QA_AUTOMATION_ID"),automation_case_id:cookieUtils.getCookie("ZCRM_QA_AUTOMATION_CASE_ID"),automation_case_info:cookieUtils.getCookie("ZCRM_QA_AUTOMATION_MACHINEINFO"),lyteHookTime:e,routeName:t.target,routeState:t.state,moduleName:i}),murphy.clientmetrics.setUserEnvInfo({releaseDetails:{buildId:crmConstants.buildId,releaseName:crmConstants.buildName,releaseRevision:crmConstants.buildChangeset}});let a=murphy.sendUserInfo();a.isMonitoringEnabled=crmConstants.isClientMetricsMonitoringEnabled,a.clientmetricsWorkerUrl=window.location.protocol+"//"+window.location.host+"/crm/javascript/murphy/clientmetrics/murphy_clientmetrics_worker.min.js",a.initialLoadCdnUrl=networkUtils.returnDependencyFiles(["ui-transition-min.css"],ResourceConstants.CRM)[0],a.cdn_urls=networkUtils.returnDependencyFiles(["zohocrm_rightpanel_new.js"],ResourceConstants.CRM),murphy.clientmetrics.install(a),murphy.clientmetrics.setInteractivePoint(e)}else murphy.clientmetrics.stopPerformaceObserver()},commonUtils.getModuleNameFromUrl=function(e){let t=e?(e+"").split("/"):[],r=t.findIndex((e=>"tab"===e||"settings"===e)),n=r>-1?t[r+1]:"";return n=n&&n.includes("?")?n.split("?")[0]:n,n},commonUtils.getfingerPrintProperties=function(e,t,r){if(null==t&&(t="default"),!r&&(r="javascript",e.includes(".css")))r="css";if(FingerPrint.isEnabled&&crmConstants.compression){var n=objectUtils.getValueFromObj(FingerPrint.config_properties[t][r],e.split("/")),i=[],a=e.lastIndexOf(".");return i.push(e.substr(0,a)),i.push(e.substr(a)),n?i[0]+"_"+n+"_"+i[1]:e}return e},commonUtils.getCharacterCode=function(e){return e.which},commonUtils.getArrayList=function(e){var t,r=0;Array.isArray(e)?t=e:(t=[e],r=1);for(var n=[],i=[],a=0,o=t.length,s=0;s<o;s++)"object"==typeof t[s]?(i.push(t[s].parent),"object"!=typeof t[s].child?(i.push(t[s].child),n[a]=i,s=a):(t=[t[s].child],s=-1)):(a++,n[s]=r?e:e[s]);return n},commonUtils.getHeadLessCallbackCode=function(){return Crm.isHeadless?Lyte.Router.getRouteInstance("crm").getQueryParams().callbackcode:null},commonUtils.HandleCommaInFileName=function(e){return e.indexOf(",")>-1&&(e=e.indexOf("[comma]")>-1?e.replace(/\[comma\]/gi,"[Comma]"):e.replace(/,/g,"[comma]")),e},commonUtils.replaceSpSymbols=function(e,t){return e="("===t||")"===t||"+"===t?e.replace(new RegExp("\\"+t,"g"),"\\"+t):e.replace(new RegExp(t,"g"),"\\"+t)},commonUtils.getValue=function(e){var t,r=e.prop("type"),n=e.data("uitype");if("photoID"===e.prop("name")&&(r="text"),"text"===r||"combo"===r||"select-one"===r||"textarea"===r)t=e.val();else if("select-multiple"===r)"object"==typeof(t=e.val())&&0===t.length&&(t=null);else if("radio"===r){var i=e.attr("name");t=commonUtils.getRadioValue(i)}else"checkbox"===r&&(t=e.is(":checked")?"1":"");return 33==n&&Crm.userDetails.isPhoneNoNewView&&(t=CrmPhoneNumberInput.getValueFromPhoneFieldComp(e,t)),250!==n&&"250"!==n||(t=e[0].component.getValue()),t},commonUtils.getRadioValue=function(e){return $("input[type='radio'][name='"+e+"']:checked").val()},commonUtils.showHideLoadingDiv=function(e){var t=$("#ajax_load_tab"),r=t.data("dispCount");if(e){var n=$L("crm-left-menu-loader");if(n&&n.length>0&&n[0].component)if((n=n[0].component).getData("isLoaderInView"))return}r||(r=0),"undefined"!=typeof CrmPlusLib&&CrmPlusLib.isLoadedInCrmplusFrame?(t.is(":visible")&&t.hide(),e?(r++,t.data("dispCount",r),CrmPlusLib.showLoading()):(r>0&&r--,t.data("dispCount",r),CrmPlusLib.hideLoading())):e?(r++,t.data("dispCount",r).show()):(r>0&&r--,t.data("dispCount",r),t.hide())},commonUtils.clearTextSelection=function(e){var t=(e=e||window).document;if(e.getSelection)e.getSelection().removeAllRanges();else if(t.getSelection){var r=t.getSelection();r.collapse&&r.collapse(!0),r.removeAllRanges&&r.removeAllRanges()}else t.selection&&t.selection.empty()},commonUtils.addToMandatory=function(){var e=!1,t=!1,r=$("#selectedColumns").find("li");r.each((function(){($(this).attr("value").indexOf("LASTNAME")>-1||"Last_Name"===$(this).attr("value"))&&(e=!0),($(this).attr("value").indexOf("FULLNAME")>-1||"Full_Name"===$(this).attr("value"))&&(t=!0)})),e&&t||r.each((function(){var e=$(this).attr("value");(e.indexOf("LASTNAME")>-1||e.indexOf("FULLNAME")>-1||"Last_Name"===e||"Full_Name"===e)&&($(this).children("#remove").remove(),$(this).children("#add").remove(),$(this).attr("mandatory","true"),$(this).find(".pinIcon").addClass("noRemovedItem"),$(this).removeAttr("ondblclick onclick"))}))},commonUtils.removeFromMandatory=function(e){var t=!1,r=!1,n=$("#selectedColumns").find("li");n.each((function(){$(this).attr("value")&&($(this).attr("value").indexOf("LASTNAME")>-1||"Last_Name"===$(this).attr("value"))&&(t=!0),$(this).attr("value")&&($(this).attr("value").indexOf("FULLNAME")>-1||"Full_Name"===$(this).attr("value"))&&(r=!0)})),t&&r&&n.each((function(){var t=$(this).attr("value");if($(this).attr("value")&&(t.indexOf("LASTNAME")>-1||t.indexOf("FULLNAME")>-1||"Full_Name"===t||"Last_Name"===t)){$(this).children("#remove").remove(),$(this).children("#add").remove();var r=document.createElement("span");$(r).attr({class:"lArrowIcon dIB fR pR",id:"remove",onClick:"commonUtils.moveToList(event,"+e+")",style:"display:none;"}),$(this).prepend(r);var n=document.createElement("span");$(n).attr({id:"add",class:"addArrw dIB fR pA",style:"display:none;",onClick:"commonUtils.moveToSelectedList(event,"+e+")","data-zcqa":"moveToUnselected"}),$(this).append(n),$(this).attr({ondblclick:"commonUtils.moveToListOnDoubleClick(this,"+e+")",onclick:"commonUtils.checkSelectedElements(this,event)"}),$(this).find(".pinIcon").removeClass("noRemovedItem"),$(this).removeAttr("mandatory")}}))},commonUtils.moveToList=function(e){e.stopPropagation();var t=$("#availableList"),r=e.target;if(!$("#KanbanViewPopup").length){var n=r.parentElement,i=$(n.children).filter(".pinIcon");if(i[0].classList.contains("pinIconActive")){n.parentElement.classList.remove("pinnedUl"),n.removeAttribute("pin-index");var a=$(".pinDisabled");a.attr("style","display : none; cursor : pointer;"),a.removeClass("pinDisabled")}i.empty(),$(n).children().filter(".pinIcon").attr({class:"pinIcon dIB fR pR",id:"pin",onClick:"crmListView.pinUnpinAction(this,event)",style:"display : none; cursor : pointer",value:"Pin Column"})}n=$(r.parentNode).removeAttr("class");r.setAttribute("style","display : none"),$("li.noFields").length>0&&$(".li.noFields").remove();var o=n.attr("data-index")?n.attr("data-index"):0;crmListView.originalOrder.splice(crmListView.originalOrder.indexOf(n.attr("field_id")),1);var s=n.children(".SelectedElement").text(),l=t.find("li"),c=l.length;renderingUtils.fieldsJSONArray.push(s),renderingUtils.fieldsJSONArray.sort(),o=renderingUtils.fieldsJSONArray.indexOf(s),n.addClass("sorl"),o>c&&(o=c),0!=o?l.eq(o-1).after(n):t.prepend(n),$L(".availableCol").scrollTo(n),n.stop(!0,!0).animate({backgroundColor:"#fff3ad"}),n.stop(!0,!0).animate({backgroundColor:"white"},{duration:1e3,complete:function(){n.attr("style","margin-left : 11px; margin-right : 11px;")}}),commonUtils.addToMandatory()},commonUtils.moveToSelectedList=function(e,t){e.stopPropagation();var r=e.target,n=$("#selectedColumns");if($(r.parentNode).removeClass("selected"),!(Lyte.Router.getRouteInstance().routeName.includes("custom-view")&&n.find("li").length>=Search.MAX_COL_CNT)){r.setAttribute("style","display:none;");var i=r.parentNode;if(!$("#KanbanViewPopup").length){var a=$(i).find(".pinIcon");$(i).addClass("unPinField"),a.html("<crmutil-icon icon-name='thumbtack' icon-class='zcicn-thumbtack crmBaseIcon '></crmutil-icon>"),n[0].classList.contains("pinnedUl")&&(a.addClass("pinDisabled"),a.attr("style","display : none; opacity: 0.5; cursor: default;"))}crmListView.originalOrder.push($(i).attr("field_id")),n.append(i),$L(".selectedCol").scrollTo(i),$(i).removeClass("multiselectable-previous selectedElem"),$(i).stop(!0,!0).animate({backgroundColor:"#fff3ad"}),$(i).stop(!0,!0).animate({backgroundColor:"white"},{duration:500,complete:function(){$(i).attr("style","margin-left:11px;margin-right:11px")}});var o=$("#availableList");if(0===o.children().not(".sectionHd").length){var s=document.createElement("li");s.setAttribute("class","nosort noFields"),$(s).html(I18n.getMsg("crm.customview.nofields")),o.append(s)}var l=$(i).children().find(".selectionClass");l.length>0&&$.each(l,(function(e){var t=l[e],r=$(t).text();$(t).replaceWith($ESAPI.encoder().encodeForHTML(r))})),commonUtils.removeFromMandatory(t)}},commonUtils.checkSelectedElements=function(e){var t=$("#availableList"),r=t.children().children(".multiMove");r&&r.remove();var n=e.parentNode;if($(e).hasClass("selectedElem")&&!$(e).hasClass("multiselectable-previous")&&!$(e).hasClass("multiselectable-shift")){var i=$(n).attr("id");$("#"+i).children(".selectedElem").not(e).removeClass("multiselectable-previous multiselectable-shift selectedElem")}var a="availableList"===$(n).attr("id")?"selectedColumns":"availableList",o=$("#"+a).children(".selectedElem");if(o.length>0&&o.removeClass("multiselectable-previous multiselectable-shift selectedElem"),"availableList"===$(e).closest("ul").attr("id")){var s=t.find("li.selectedElem"),l=s.length,c=$("#selectedColumns").find("li").length;if(l+c>Search.MAX_COL_CNT)for(var d=Search.MAX_COL_CNT-c;d<l;d++)s.eq(d).removeClass("multiselectable-previous").removeClass("multiselectable-shift").removeClass("selectedElem")}},commonUtils.moveToListOnDoubleClick=function(e){var t=0!==$("#KanbanViewPopup").length;if(t||"selectedColumns"!==e.parentNode.id||!$(e).children(".pinIcon")[0].classList.contains("pinIconActive")){var r=$("#availableList"),n=$("#selectedColumns");if($(e).stop(!0,!0).animate({backgroundColor:"#fff3ad"}),"selectedColumns"===e.parentNode.id){if(e.removeAttribute("class"),e.children.remove.setAttribute("style","display : none;"),!t){if((d=$(e.children).filter(".pinIcon"))[0].classList.contains("pinIconActive")){e.parentElement.classList.remove("pinnedUl"),e.removeAttribute("pin-index");var i=$(".pinDisabled");i.attr("style","display : none; cursor : pointer;"),i.removeClass("pinDisabled")}d.empty(),d.removeAttr("lt-prop-title"),$(e).children().filter(".pinIcon").attr({class:"pinIcon dIB fR pR",id:"pin",onClick:"crmListView.pinUnpinAction(this,event)",style:"display : none; cursor : pointer",value:"Pin Column"})}var a=$("li.noFields");a.length>0&&a.remove();var o=$(e).children(".SelectedElement").text();renderingUtils.fieldsJSONArray.push(o),renderingUtils.fieldsJSONArray.sort();var s=renderingUtils.fieldsJSONArray.indexOf(o);if(""!==$("#searchField").val()){var l=[];renderingUtils.fieldsJSONArray.filter((function(e){e.search(new RegExp($("#searchField").val(),"i"))>-1&&l.push(e)})),s=l.indexOf(o)}var c=r.find("li");s>c.length&&(s=c.length),0!==s?c.eq(s-1).after(e):r.prepend(e),crmListView.originalOrder.splice(crmListView.originalOrder.indexOf(e.getAttribute("field_id")),1),$L(".availableCol").scrollTo(e),commonUtils.addToMandatory()}else{if(n.find("li").length>=Search.MAX_COL_CNT)return void $(e).removeClass("multiselectable-previous selectedElem");if(!t){var d=$(e).find(".pinIcon"),u=Crm.userDetails.customViewPinLimit?Crm.userDetails.customViewPinLimit:"1";if(n[0].classList.contains("pinnedUl")&&$(e).attr("_pinned")){$(e).addClass("pinField"),d.html("<crmutil-icon icon-name='thumbuntack' icon-class='zcicn-thumbuntack crmBaseIcon '></crmutil-icon>"),d.addClass("pinIconActive noRemovedItem");var m=$("#cv_ctn");m&&m[0].classList.contains("cv_noEditPermission")?(d.attr({value:"unPin Column",style:"display : inline; opacity: 0.4; cursor : default; pointer-events:auto;"}),$(e).addClass("DisablePinFieldAction")):d.attr({value:"unPin Column",style:"display : inline; cursor : pointer"})}else $(e).addClass("unPinField"),d.html("<crmutil-icon icon-name='thumbtack' icon-class='zcicn-thumbtack crmBaseIcon '></crmutil-icon>"),n[0].classList.contains("pinnedUl")&&n[0].querySelectorAll(".pinField").length>=u&&(d.addClass("pinDisabled"),d.attr("style","display : none; opacity: 0.5; cursor: default;"))}if(e.children.add.setAttribute("style","display : none;"),-1===crmListView.originalOrder.indexOf($(e).attr("field_id"))&&crmListView.originalOrder.push($(e).attr("field_id")),n.append(e),0===r.children("li").length){var p=document.createElement("li");p.setAttribute("class","nosort noFields"),$(p).html(I18n.getMsg("crm.customview.nofields")),r.append($(p))}$L(".selectedCol").scrollTo(e);var g=$(e).children(".SelectedElement").text();renderingUtils.fieldsJSONArray.removeFirstOccurenceOfElement(g),commonUtils.removeFromMandatory()}$(e).removeClass("multiselectable-previous selectedElem"),$(e).stop(!0,!0).animate({backgroundColor:"white"},{duration:500,complete:function(){$(e).attr("style","margin-left: 11px; margin-right: 11px;")}});var f=$(e.parentNode).children().find(".selectionClass");f.length>0&&$.each(f,(function(e){var t=f[e],r=$(t).text();$(t).replaceWith($ESAPI.encoder().encodeForHTML(r))}))}},commonUtils.searchedFields=function(e,t){for(var r=[],n=$(".selectedElem"),i=$("#selectedColumns").find("li").children(".SelectedElement"),a=[],o=i.length,s=0;s<o;s++)a.push(i.eq(s).text());if(t=(t=t.replace(/\(/g,"\\(")).replace(/\)/g,"\\)"),renderingUtils.fieldsJSONArray.filter((function(e){e.search(new RegExp(t,"i"))>-1&&r.push(e)})),n)for(var l={},c=(o=n.length,0);c<o;c++){var d=n.eq(c),u=d.children(".SelectedElement").text();r.contains(u)&&(l[u]=d.attr("class"))}var m=JSON.parse(JSON.stringify(e)),p=!0;if($.each(m[0],(function(e,t){for(var n=function(e){r.contains(e)&&a.indexOf(e)<=-1?p=!1:(t.splice(o,1),o--)},i=t.length,o=0;o<i;o++)$.each(t[o],n)})),commonUtils.setColumnValues(m,!0,l),p){var g=document.createElement("li");$(g).attr({class:"nosort",id:"noRecords"}),$(g).attr("style","font-size: var(--crm-base-font-size);text-align: center;margin-top: 12px;"),$(g).html(I18n.getMsg("crm.customview.nofields.found")),$("#availableList").html(g)}},commonUtils.setColumnValues=function(e,t){var r=document.getElementById("ColumnsListtr");if(!t){var n=document.createElement("div");$(n).attr({class:"relList",style:"width:280px"});var i=document.createElement("div");i.setAttribute("class","pR");var a=document.createElement("input");$(a).attr({style:"width:228px;height:25px; padding: 4px 30px 4px 20px; background: var(--bg_white) url("+networkUtils.getImageUrl("svgicons.svg",ResourceConstants.CRM)+") no-repeat 7px -173px;text-indent: 15px;",id:"searchField","data-zcqa":"dash_searchField_chooseColumns",type:"text",autocomplete:"off",onkeyup:"renderingUtils.searchKey(this.value)"});var o=document.createElement("i");$(o).attr({id:"emptySearch",class:"inputDel",style:"display:none;",onclick:"renderingUtils.emptySearchBox()"}),i.appendChild(a),i.appendChild(o),n.appendChild(i);var s=document.createElement("div");s.className="relList";var l=document.createElement("div");l.className="sectionsort selectedCol";var c=document.createElement("ul");$(c).attr({class:"connectedSortable",id:"selectedColumns","data-cid":"selectedColumns"})}if(!n){var d=$("#searchField");d.length>0&&(n=d.parents(".relList")[0])}var u=document.createElement("ul");$(u).attr({class:"sectionsort connectedSortable availableCol","data-cid":"availableList",id:"availableList"});if($.each(e[0],(function(e,r){if(t){if($.isEmptyObject(r[0]))return;$("#availableList").remove()}for(var i=function(e,r){t||renderingUtils.fieldsJSONArray.push(e);var n=r.join(":"),i=document.createElement("li");$(i).attr({class:"sorl",value:n,onclick:"commonUtils.checkSelectedElements(this, event);",ondblclick:"commonUtils.moveToListOnDoubleClick(this, "+t+");",style:"margin-left : 11px; margin-right : 11px;"});var a=document.createElement("span");$(a).attr({class:"SelectedElement",style:"margin-left:0",title:e}),$(a).text(e);var o=document.createElement("span");$(o).attr({class:"lArrowIcon dIB fR pR",id:"remove",onClick:"commonUtils.moveToList(event, "+t+");",style:"display : none;"}),i.appendChild(o),i.appendChild(a);var s=document.createElement("span");if($(s).attr({id:"add",class:"addArrw dIB fR pA",onClick:"commonUtils.moveToSelectedList(event, "+t+");",style:"display : none;","data-zcqa":"movetoSelected"}),i.appendChild(a),i.appendChild(s),u.appendChild(i),e.indexOf("Last Name")>-1||e.indexOf("Full Name")>-1){var l=document.createElement("sup");$(l).attr({class:"crmNegativeColor mL3 top8"}),$(l).html("*"),i.appendChild(l)}},a=r.length,o=0;o<a;o++)null!=r[o]?$.each(r[o],i):(r.splice(o,1),o--);n.appendChild(u)})),!t){for(var m=function(e,r){var n=r.join(":");n=n.substring(0,n.lastIndexOf(":"));var i=document.createElement("li");$(i).attr({class:"pR sorl",value:n,onclick:"commonUtils.checkSelectedElements(this, event);",style:"margin-left : 11px; margin-right : 11px;"});var a=document.createElement("span");if($(a).attr({class:"SelectedElement sdasd",style:"margin-left:0"}),$(a).text(e),i.appendChild(a),n.indexOf(mandatoryfield)>-1||n.indexOf("ACTIVITYTYPE")>-1||n.indexOf("FULLNAME")>-1){i.setAttribute("mandatory","true");var o=document.createElement("sup");$(o).attr({class:"crmNegativeColor mL3 top8"}),$(o).html("*"),i.appendChild(o)}else{var s=document.createElement("span");$(s).attr({class:"lArrowIcon dIB fR pR",id:"remove",onClick:"commonUtils.moveToList(event,"+t+")",style:"display:none;"}),i.appendChild(s);var l=document.createElement("span");$(l).attr({id:"add",class:"addArrw dIB fR pA",style:"display:none;",onClick:"commonUtils.moveToSelectedList(event,"+t+")","data-zcqa":"moveToUnselected"}),i.appendChild(l),i.setAttribute("ondblclick","commonUtils.moveToListOnDoubleClick(this,"+t+")"),i.setAttribute("onclick","commonUtils.checkSelectedElements(this,event)")}c.appendChild(i)},p=e[e.length-1].selectedFieldsJSON,g=p.length,f=0;f<g;f++)p[f]&&$.each(p[f],m);l.appendChild(c),s.appendChild(l);var h=document.createElement("td");h.appendChild(n),r.appendChild(h);var v=document.createElement("td");r.appendChild(v).setAttribute("style","width:15px;");var C=document.createElement("td");C.appendChild(s),r.appendChild(C),commonUtils.removeFromMandatory(t)}renderingUtils.sectionSorting(),$("ul.connectedSortable").find("li").not(".nosort").hover((function(){var e=$(this);e.hasClass("selectedElem")||(e.css({background:"var(--menuHover)"}),"selectedColumns"===this.parentNode.id?e.children().filter(".lArrowIcon").show():"availableList"===this.parentNode.getAttribute("data-cid")&&e.find(".addArrw").attr("style","display:inline"))}),(function(){var e=$(this);e.css({background:""}),"selectedColumns"===this.parentNode.id?e.children().filter(".lArrowIcon").hide():"availableList"===this.parentNode.getAttribute("data-cid")&&e.find(".addArrw").attr("style","display:none")}))},commonUtils.setColumnValues1=function(e,t,r){var n=document.getElementById("ColumnsListtr"),i=document.createElement("div");$(i).attr({class:"relList",style:"width:280px"});var a=document.createElement("div");a.setAttribute("class","pR");var o=document.createElement("input");$(o).attr({style:"width:228px;height:25px; padding: 4px 30px 4px 20px; background: var(--bg_white) url("+networkUtils.getImageUrl("svgicons.svg",ResourceConstants.CRM)+") no-repeat 7px -173px;text-indent: 15px;",id:"searchField","data-zcqa":"dash_searchField_chooseColumns",type:"text",autocomplete:"off",onkeyup:"renderingUtils.searchKey(this, event)"});var s=document.createElement("i");$(s).attr({id:"emptySearch",class:"inputDel",style:"display:none;",onclick:"renderingUtils.emptySearchBox()"}),a.appendChild(o),a.appendChild(s),i.appendChild(a);var l=document.createElement("div");l.className="relList";var c=document.createElement("div");c.className="sectionsort selectedCol";var d=document.createElement("ul");$(d).attr({class:"connectedSortable",id:"selectedColumns","data-cid":"selectedColumns"});var u=t.length,m={},p={};crmListView.originalOrder=[];for(var g=0;g<u;g++)p[t[g].id]=g,t[g]&&!0===t[g].pinned&&($(d).addClass("pinnedUl"),m[t[g].id]=g);if(!i){var f=$("#searchField");f.length>0&&(i=f.parents(".relList")[0])}var h=document.createElement("ul");$(h).attr({class:"sectionsort connectedSortable availableCol","data-cid":"availableList",id:"availableList"});$.each(e[0],(function(e,t){$.each(t,(function(e,t){if(t&&2!==t.display_type&&"PROCESSINGBASIS"!==t.columnname&&"DATASOURCE"!==t.columnname&&"ISCALLBILLABLE"!==t.columnname&&"PRICINGDETAILS"!==t.columnname&&"DISCOUNT_TYPE"!==t.columnname&&"DISCOUNT_PERCENTAGE"!==t.columnname){var r=t.field_label;renderingUtils.fieldsJSONArray.push(r);r=t.field_label;"Full_Name"!==t.sys_ref_name||"Contacts"!==t.module&&"Leads"!==t.module||(r=I18n.getMsg("custommodule.crmfield.fl.name","Lead"===moduleName?moduleRecordMapping.Leads.singular_label:moduleRecordMapping.Contacts.singular_label));var n=t.table_name+":"+t.columnname+":"+t.actual_label,i=document.createElement("li");$(i).attr({"data-index":e,class:"sorl cv_sotableList",value:n,field_id:t.id,onclick:"commonUtils.checkSelectedElements(this, event);",ondblclick:"commonUtils.moveToListOnDoubleClick(this, undefined);",style:"margin-left : 11px; margin-right : 11px;"});var a=document.createElement("span");$(a).attr({class:"SelectedElement",style:"margin-left:0",title:r}),$(a).text(r);var o=document.createElement("span");$(o).attr({class:"lArrowIcon dIB fR pR",id:"remove",onClick:"commonUtils.moveToList(event, undefined);",style:"display : none;"});var s=document.createElement("span");$(s).attr({class:"pinIcon dIB fR pR",id:"pin",onClick:"crmListView.pinUnpinAction(this,event)",style:"display : none; cursor : pointer",value:"Pin Column"}),i.appendChild(o),i.appendChild(a),i.appendChild(s);var l=document.createElement("span");if($(l).attr({id:"add",class:"addArrw dIB fR pA",onClick:"commonUtils.moveToSelectedList(event, undefined);",style:"display : none;","data-zcqa":"movetoSelected"}),i.appendChild(a),i.appendChild(l),n.indexOf("LASTNAME")>-1||n.indexOf("FULLNAME")>-1){var c=document.createElement("sup");$(c).attr({class:"crmNegativeColor mL3 top8"}),$(c).html("*"),s.classList+=" noRemovedItem",i.appendChild(c)}h.appendChild(i)}}));var r=document.createElement("li");$(r).attr({class:"nosort",id:"noRecords"}),$(r).attr("style","font-size: var(--crm-base-font-size);text-align: center;margin-top: 12px;display:none;"),$(r).html(I18n.getMsg("crm.customview.nofields.found")),h.appendChild(r),i.appendChild(h)})),c.appendChild(d),l.appendChild(c);var v=document.createElement("td");v.appendChild(i),n.appendChild(v);var C=document.createElement("td");n.appendChild(C).setAttribute("style","width:15px;");var y=document.createElement("td");y.appendChild(l),n.appendChild(y),renderingUtils.sectionSorting();var E=$("ul.connectedSortable").find("li");E.not(".nosort").mousemove((function(){var e=$(this);e.hasClass("selectedElem")||e.hasClass("DisablePinFieldAction")||(e.css({background:"var(--menuHover)"}),"selectedColumns"===this.parentNode.id?this.classList.contains("unPinField")&&(e.children().filter(".pinIcon").show(),e.children().filter(".lArrowIcon").show()):"availableList"===this.parentNode.getAttribute("data-cid")&&e.find(".addArrw").attr("style","display:inline"))})),E.not(".nosort").mouseleave((function(){var e=$(this);e.css({background:""}),"selectedColumns"===this.parentNode.id?(this.classList.contains("unPinField")&&e.children().filter(".pinIcon").hide(),e.children().filter(".lArrowIcon").hide()):"availableList"===this.parentNode.getAttribute("data-cid")&&e.find(".addArrw").attr("style","display:none")}));var L=I18n.getMsg("crm.customview.pin.column"),w=I18n.getMsg("crm.customview.unpin.column"),b=Crm.userDetails.customViewPinLimit?Crm.userDetails.customViewPinLimit:"1",U=I18n.getMsg("crm.customview.pin.unpin.maximum.limit.new",b),T=$("#cv_ctn");T&&T[0].classList.contains("cv_noEditPermission")&&(w=I18n.getMsg("crm.customview.lock.unpin.disable"));var M='{"showdelay":600}';$(".pinIcon").on("mousemove",(function(){var e=this.parentElement.parentElement,t=e.classList.contains("pinnedUl"),r=e.querySelectorAll(".pinField").length;t?this.classList.contains("pinIconActive")?$(this).attr({"lt-prop-title":w,"lt-prop-tooltip-config":M}):r<b?$(this).attr({"lt-prop-title":L,"lt-prop-tooltip-config":M}):$(this).attr({"lt-prop-title":U,"lt-prop-tooltip-config":M}):$(this).attr({"lt-prop-title":L,"lt-prop-tooltip-config":M})})).on("mouseleave",(function(){$(this).removeAttr("lt-prop-title")})),$(".sorl").on("mousedown",(function(){var e=this.classList.contains("pinField");$("#selectedColumns li"+(e?".unPinField":".pinField")).addClass("restrictSort"),$("#selectedColumns li"+(e?".pinField":".unPinField")).removeClass("restrictSort")}));var A=$("#ColumnsListtr"),I=A.find('li[value="CrmActivity:TAGMODULEREFID:Tag"]');if(I&&I.length>1&&(I.eq(1).remove(),I.eq(2).remove()),"create-custom-view"!==Lyte.Router.getRouteInstance().routeName){var x=t.length;for(g=0;g<x-1;g++)for(var R=0;R<x-g-1;R++)if(!t[R].pinned_order&&t[R+1].pinned_order||t[R].pinned_order>t[R+1].pinned_order){var S=t[R];t[R]=t[R+1],t[R+1]=S}}var _=t.length;for(g=0;g<_;g++){var D=t[g];if(D){var N=D.table_name+":"+D.columnname+":"+D.actual_label,k=A.find('li[value="'+N+'"]');D.pinned&&k.attr({_pinned:!0}),k.trigger("dblclick"),k.removeAttr("_pinned");var O=$('li[value="'+N+'"]');if(D.pinned&&O[0].classList.contains("pinField")&&O[0].parentElement.classList.contains("pinnedUl")&&O.attr("pin-index",m[D.id]),N.indexOf(r)>-1||N.indexOf("ACTIVITYTYPE")>-1||N.indexOf("FULLNAME")>-1){if(O.attr("mandatory","true"),!(N.indexOf("FULLNAME")>-1||N.indexOf("LASTNAME")>-1)){var F=document.createElement("sup");$(F).attr({class:"crmNegativeColor mL3 top8"}),$(F).html("*"),O.find(".pinIcon").addClass("noRemovedItem"),O.append(F)}O.find("#remove").remove(),O.removeAttr("onclick").removeAttr("ondblclick").find("#add").remove()}}}},commonUtils.checkUsernameNeeded=function(e,t,r){var n=Crm.getCrmBasePath()+"/UpdateUsername.do";(new crmRequestPool).initiate({type:"POST",url:n,data:"action=checkUsernameNeeded&service="+t,success:function(n){var i=n.replace(/^\s+|\s+$/g,""),a=$("#shownotes");if(i.length>0){a.html(n),a.addClass("newPopup p30 crm-subheading-font-size").css({zindex:" 100",position:"absolute"}),renderingUtils.freezeBackground();var o=$("#usernameUpdateBtn");o&&"undefined"!==o&&o.click((function(){commonUtils.updateUsername(e,t)}));var s=$("#closeUpdateUsernameId");s&&"undefined"!==r&&"undefined"!==s&&s.click((function(){commonUtils.closeUpdateUsernameDiv(r)})),a.show(),mailsetCenter("shownotes")}else usernameNotNeeded.push(t),e()}})},commonUtils.checkUsernameAvailability=function(){var e=$("#username").val(),t=$("#alertForShortUsername");if(t.hide(),$("#usernameAlerts").hide().removeClass("green mT15 crmNegativeColor"),$("#usernamePatternFailed").hide(),e.length<6||e.length>30||!/^[A-Za-z0-9](.*[A-Za-z0-9])?$/.test(e))return t.show(),!1;var r=Crm.getCrmBasePath()+"/UpdateUsername.do?action=checkUsernameAvailability",n="username="+escape(e);commonUtils.showHideLoadingDiv(!0),(new crmRequestPool).initiate({type:"POST",url:r,data:n,dataType:"json",success:function(t){commonUtils.showHideLoadingDiv();var r=$("#usernameAlerts");"1004"==t.result?(r.html('"'+$ESAPI.encoder().encodeForHTML(e)+'" '+$("#usernameAlreadyTaken").html()),r.addClass("crmNegativeColor mT15"),r.show()):"1007"==t.result?(r.html('"'+$ESAPI.encoder().encodeForHTML(e)+'" '+$("#usernameAlreadyNotTaken").html()),r.addClass("green mT15"),r.show()):"1008"==t.result&&$("#usernameAlreadyTakenError").show()},error:function(){commonUtils.showHideLoadingDiv(),$("#shownotes").css("display","none"),renderingUtils.removeFreezeLayer(),renderingUtils.freezeBackground(),mailsetCenter("shownotes")}})},commonUtils.showUserNameHints=function(){var e=$("#usernameTable").get(0).offsetWidth+8;$("#tempdiv").css({left:e}).show()},commonUtils.closeUpdateUsernameDiv=function(e){$("#shownotes").hide(),renderingUtils.removeFreezeLayer(),void 0!==e&&e()},commonUtils.updateUsername=function(e,t){var r=$("#alertForShortUsername"),n=$("#usernameAlerts");r.hide(),$("#usernamePatternFailed").hide(),n.hide().removeClass("green mT15 crmNegativeColor");var i=$("#username").val();if(i.length<6||i.length>30||!/^[A-Za-z0-9](.*[A-Za-z0-9])?$/.test(i))return r.show(),!1;var a=Crm.getCrmBasePath()+"/UpdateUsername.do?action=updateUsername",o="username="+escape(i)+"&"+csrfParamName+"="+encodeURIComponent(csrfToken)+"&service="+t;commonUtils.showHideLoadingDiv(!0),(new crmRequestPool).initiate({type:"POST",url:a,data:o,async:!0,dataType:"json",success:function(t){commonUtils.showHideLoadingDiv();var r=$("#shownotes");r.css("display","none"),renderingUtils.removeFreezeLayer(),"1002"==t.result?e():"1004"==t.result||"1005"==t.result?(n.html('"'+$ESAPI.encoder().encodeForHTML(i)+'" '+$("#usernameAlreadyTaken").html()),n.addClass("crmNegativeColor mT15").show(),renderingUtils.freezeBackground(),mailsetCenter("shownotes")):"1003"==t.result&&(r.html($("#usernameUpdationFailedMsg").html()),r.addClass("newPopup p30 crm-subheading-font-size").css({zIndex:"21",position:"absolute"}),renderingUtils.freezeBackground(),mailsetCenter("shownotes"))},error:function(){var e=$("#shownotes");commonUtils.showHideLoadingDiv(),e.css("display","none"),renderingUtils.removeFreezeLayer(),renderingUtils.freezeBackground(),mailsetCenter("shownotes")}})},commonUtils.getArrayOfIdsAsCommaSeperatedString=function(e){for(var t=e.length,r="",n=0;n<t;n++)r+=e[n],n!==t-1&&(r+=",");return r},commonUtils.getOrgNameOrSandboxName=function(){return Crm.userDetails.isSandbox?Crm.userDetails.sandboxName:commonUtils.getOrgNameForDisplay(Crm.userDetails.orgName,Crm.currentZgid)},commonUtils.getOrgNameForDisplay=function(e,t){return void 0===e||e.length<0||"-"===e?"org"+t:e},commonUtils.toCamelCase=function(e){if(!e)return e;if('"'===e.charAt(0)&&(e=e.substring(1,e.length)),'"'===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),-1!==e.indexOf("("))return e;if(-1===e.indexOf(" "))return e.charAt(0).toUpperCase()+e.substring(1,e.length).toLowerCase();var t=e.split(" "),r=t.length;e="";for(var n=0;n<r;n++)n>0&&(e+=" "),e=e+t[n].charAt(0).toUpperCase()+t[n].substring(1,t[n].length).toLowerCase();return e},commonUtils.copyTextToClipBoard=function(e,t){var r=document.createElement("input");document.getElementById(e).appendChild(r),r.value=t,r.select(),document.execCommand("copy"),r.remove()},commonUtils.unloadModuleRecords=function(e){if(moduleRecordMapping&&e&&moduleRecordMapping[e]){var t=store.peekRecord("module",moduleRecordMapping[e].id).fields;(t=t&&Array.isArray(t)?Array.from(t):t)&&t.forEach((function(e){store.unloadRecord("field",e.id)}))}},commonUtils.removeElements=function(e){for(var t=e.length,r=0;r<t;r++)e[r].remove()},commonUtils.base64ToblobURL=function(e,t=""){for(var r=atob(e),n=[],i=r.length,a=0;a<i;a+=512){var o=r.slice(a,a+512),s=new Array(o.length),l=o.length;for(let e=0;e<l;e++)s[e]=o.charCodeAt(e);var c=new Uint8Array(s);n.push(c)}var d=new Blob(n,{type:t});return URL.createObjectURL(d)},commonUtils.getHelpUrl=function(e){return crmConstants.helpUrl["help.domain.url"]+crmConstants.helpUrl[e]},commonUtils.getDeveloperDoc=function(e){return crmConstants.helpUrl["help.developer.docs.domain.url"]+crmConstants.helpUrl[e]},commonUtils.getOldHelpUrl=function(e){return crmConstants.helpUrl["help.old.domain.url"]+crmConstants.helpUrl[e]},commonUtils.getRouteObject=function(e){var t=Object.assign({},e.info);return t.data=e.data,t},commonUtils.registerAjaxSendForOrgHeader=function(){$(document).ajaxSend((function(e,t,r){t.requestUrl=r.url;var n=-1!==t.requestUrl.indexOf("sandbox/diff")||-1!==t.requestUrl.indexOf("production/diff");r.crossDomain||"undefined"==typeof crmZgid||!crmZgid||n||t.setRequestHeader("X-CRM-ORG",crmZgid)}))},commonUtils.bindDocumentEvents=function(){$(document).click((function(e){if(!(Lyte.registeredMixins["business-hours-utils"]&&Lyte.Router.getRouteInstance()&&Lyte.registeredMixins["business-hours-utils"].CrmBusinessHours.routers.contains(Lyte.Router.getRouteInstance().routeName)||Lyte.Router.getRouteInstance()&&"crm.settings.section.modules.module.custom-link.index-custom-link"===Lyte.Router.getRouteInstance().routeName||"undefined"!=typeof customFunctionsObj&&customFunctionsObj.delugeEditor.v2&&"deluge"===customFunctionsObj.language&&customFunctionsObj.isEditorOpen())){var t=e.target?e.target:e.srcElement,r=!$L.userAgent||"Mozilla"!==$L.userAgent.browser&&"Firefox"!==$L.userAgent.browser||1===e.which;if((void 0===e||!Lyte.Router.getRouteInstance()||"edit-map-dependency"!==Lyte.Router.getRouteInstance().routeName&&"create-map-dependency"!==Lyte.Router.getRouteInstance().routeName||void 0===e.target||!(void 0!==e.target.name&&e.target.name.startsWith("depFields")||void 0!==e.target.id&&("next"===e.target.id||"previous"===e.target.id)||void 0!==e.target.parentElement&&void 0!==e.target.parentElement.name&&e.target.parentElement.name.startsWith("depFields")))&&(!Lyte.Router.getRouteInstance()||"detail"!==Lyte.Router.getRouteInstance().routeName||void 0===e||void 0===e.target||void 0===e.target.dataset||void 0===e.target.dataset.name||"subform_timeline"!==e.target.dataset.name)&&r)if(1!=e.ctrlKey&&1!=e.metaKey&&2!=e.which||null==$(t).attr("href")){if(0==window.getSelection().isCollapsed&&"customCheckBox"!==e.target.className&&"customCheckBoxChecked"!==e.target.className&&e.target instanceof Element&&!e.target.closest(".crm_custom_checkbox"))return renderingUtils.stopEvent(e),!1;var n=$(t).attr("data-cid");if(n||$(t).parents().each((function(e,r){if(n=$(r).attr("data-cid"))return t=r,!1})),"false"==$(t).attr("data-permission"))return t.classList.contains("setting-list-td")&&featuresAvailable.NEXTGENUI_ENABLED?renderingUtils.displayPermissionDenied(null,null,I18n.getMsg("crm.security.error"),void 0,void 0,(function(){Lyte.Router.getRouteInstance().transitionTo(Lyte.registeredMixins["crm-setup-mixin"].getFirstAvailableRouter())})):renderingUtils.displayPermissionDenied(),renderingUtils.stopEvent(e),permissionDenied=!0,!1;var i=$(t).attr("crm-tracking-message");if(i)if(i.includes(","))try{var a=i.substring(i.indexOf(",")+1,i.length);a=a.replace(/'/g,'"');var o=JSON.parse(a),s=i.substring(0,i.indexOf(","));Crm.trackSpotLightAction(s,o)}catch(e){JS_LOGGER.log("Invalid JSON Parsing")}else Crm.trackSpotLightAction(i);else $(t).parents().each((function(e,t){var r=$(t).attr("crm-tracking-message");if(r)if(r.includes(","))try{var n=r.substring(r.indexOf(",")+1,r.length);n=n.replace(/'/g,'"');var i=JSON.parse(n),a=r.substring(0,r.indexOf(","));Crm.trackSpotLightAction(a,i)}catch(e){JS_LOGGER.log("Invalid JSON Parsing")}else Crm.trackSpotLightAction(r)}));if(n){var l=$(t).data("params"),c={};if(c.data=l,c.targetElem=t,c.clickId=n,c.ev=e,$("#next_action_activity_id").addClass("peNone"),"undefined"==typeof crmSetup&&("tab"==n&&l&&"Setup"==l.module||l&&"crmSetup"==l.calleeObj))return networkUtils.loadFeatureScripts(["zohocrm_setup.js"],(function(){commonUtils.triggerClickHandlerBasedOnCalee(c)})),!1;if(!commonUtils.triggerClickHandlerBasedOnCalee(c)&&"dummy"!==n)return!1}checkForWindowOpener(t,e),getElemById("FreezeLayer")!=t&&hideMenu(e,!1)}else checkForWindowOpener(t,e),renderingUtils.stopEvent(e)}}))},commonUtils.triggerClickHandlerBasedOnCalee=function(e){var t=e.data,r=e.targetElem,n=e.clickId;if(t&&t.calleeObj){var i=t.calleeObj;"crmSetup"!==i?window[i].clickHandler?window[i].clickHandler(e.ev,r,n):(t.clickId=n,$(r).attr("data-params",JSON.stringify(t)),Lyte.registeredMixins["crm-utilities"].executeFunctionByName(window[i].clickEventIdVsMethodMapping[n],window,e.ev,r)):(t.clickId=n,$(r).attr("data-params",JSON.stringify(t))),!1}else for(var a=Crm.defaultObj,o=a.length,s=0;s<o&&(!window[a[s]]||!window[a[s]].hasOwnProperty("clickHandler")||window[a[s]].clickHandler(e.ev,r,n));s++);},commonUtils.setErrVerifyContHeightToParent=function(e,t,r,n="margin-bottom"){let i,a="vr_mBAdded";e&&(e=$(e));let o=e;"padding-bottom"===n&&(a="vr_pBAdded"),o?i=o.find(".vr_err_verify_container"):(o=!1,i=$(".vr_err_verify_container")),i.toArray().forEach((function(i){$(i).css("top","");let o=$(i).closest("#moreFieldSlider"),s=o.length;s>0&&"none"===o.css("display")&&o.css("display","block").addClass("vr_madeAsBlock");let l=$L(i).closest("#secDiv_Event_Additional_Information"),c=l.length;if(c>0&&"none"===l.css("display")&&l.css("display","block").addClass("vr_madeAsBlock"),!1===r){t||(e=$(i).parent());let r={};r[n]="";let o=e.closest(".vr_mBAdded");o.length>0&&(e=o.eq(0));let s=e.closest("#searchCreatePopup").length>0;e.css(r);let l=$(i).innerHeight();if(l>0){e.addClass(a);let t=0;s||(t=parseInt(e.css(n))),t+=l,e.css(n,""),e.attr("style",(e.attr("style")||"")+n+":"+t+"px !important;")}}else{let e=$(i).parents(".vr_mBAdded");e.length>0&&e.toArray().forEach((function(e){let t=(e=$(e)).closest(".vr_mBAdded");t.length>0&&(e=t.eq(0)),e.css({"margin-bottom":""})}));let t=$(i).parents(".vr_pBAdded");t.length>0&&t.toArray().forEach((function(e){let t=(e=$(e)).closest(".vr_pBAdded");t.length>0&&(e=t.eq(0)),e.css({"padding-bottom":""})}))}let d=$(i).closest(".vr_mBAdded,.vr_pBAdded"),u="margin-bottom";d.hasClass(".vr_pBAdded")&&(u="padding-bottom");let m=parseInt(d.css(u)),p=d.find(".errMsg:not(.vr_err_verify_container .errMsg):visible"),g=d.find(".form_err_msg:visible"),f=p.closest(".DetailViewInnerPage,.dvScrollContainier").length>0,h=p.closest("#searchCreateDiv").length>0,v=0,C=0;p.length&&(C=f||h?p.eq(0).outerHeight(!0):p.eq(0).height()),g.length&&(v=g[0].scrollHeight),m=m+C+v;let y=C+v;if(y>0){let e="calc( 100% + "+y+"px )",t=$(i);t.css("top",e),t.addClass("vr_topAdded"),d.css(u,""),d.attr("style",(d.attr("style")||"")+u+":"+m+"px !important;")}else d.css("top","");s>0&&o.hasClass("vr_madeAsBlock")&&o.css("display","none").removeClass("vr_madeAsBlock"),c>0&&l.hasClass("vr_madeAsBlock")&&l.css("display","none").removeClass("vr_madeAsBlock")}))},commonUtils.showErrorMsg=function(e,t,r,n,i,a,o){setTimeout((function(){var s=t.closest("tr");CVRExec.showVerifyBtn(s);var l=t.closest("div");t.length>0&&"CRM-RICHTEXT-COMPONENT"===t[0].tagName&&t[0].component.setData("cxPropMaxErrorMsg",e),i?t&&$("[id='errorMsg_"+t.attr("id")+"']").remove():($(document.getElementById("errorMsg_"+t.attr("id"))).remove(),$(document.getElementById("errorMsg_"+t.attr("id")+"_label")).remove());var c=t.closest(".tabDiv,.tabDivCreate,.customDatefield");"businesscardDtls"===l.attr("id")&&(c=t.closest(".tabdiv")),0===c.length&&(c=t),c.removeClass("errorFieldP");var d=document.createElement("span");if(($(d).html(e).css({clear:"both","padding-bottom":"0px !important",color:"var(--formBorderError)","font-size":"11px",display:"block","margin-top":"1px","padding-top":"0px !important"}).attr({class:"errMsg errorMsgDesc",id:"errorMsg_"+t.attr("id")}),Crm.userDetails.isAccessibilityConfigSupported)&&Lyte.Service.getInjected("globalAccessibilityServices").getVariable("accessibility").accessibility.vision.custom_error.alert_icon){var u=document.createElement("span");$(u).attr({class:"zcicncss-warning-triangle zcicn-cssIcons pR top2 mR3 customErrorNegativeIcon"}),d.insertBefore(u,d.firstChild)}if("Events"===r&&$("#saveEventsBtn").removeAttr("disabled"),c.length)c.addClass("errorFieldP");else if(t.closest(".aggFldTabl").length)s.addClass("errorFieldP");else if(!0===n){s.addClass("form_err_fld"),(t.hasClass("cvFilter")?l:s).append(d)}var m=t.parents("span"),p=m.attr("id");if(p&&-1!==p.indexOf("header")){var g=m.parents("td").eq(0);t.closest(".businesscall.editModeEnable").length&&(g=m.parents("lyte-td").eq(0)),$(d).removeClass("errorMsgDesc"),t.addClass("errorHighlight"),g[0].appendChild(d)}else{var f=t.closest(".labelValCreate,.labelValTwo,.validErrMsg,.FValue.uploadDoc");if(0===f.length&&a&&(f=t.closest(".tabDiv,.tabDivCreate").find(".labelValCreate")),0===f.length&&(f=t.find("td"),$(d).css("position","relative")),$("#multipleFieldsEditPop").length>0)if(1==f.hasClass("labelValCreate"))f.append(d).parent().addClass("form_err_fld");else{var h=f.find(".labelValCreate");h.length>0?h.append(d).parent().addClass("form_err_fld"):f.append(d).parent().addClass("form_err_fld")}else t.attr("id")&&t.attr("id").includes("ATTACHMENTID")&&Lyte.registeredMixins["crm-create-init-mixin"].checkLyteConvertionSupport(r)&&"hidden"!==t.attr("type")?(t.append(d),f.parent().addClass("form_err_fld")):t.attr("id")&&t.attr("id").includes("MXNDUMMYCOLUMNBUNDLE")?f.append(d):f.append(d).parent().addClass("form_err_fld");o&&crmTemplate.setSubformFocusBlurEvent(f),"coborgName"==r&&t.closest(".labelValCreate").append(d)}t=null,commonUtils.setErrVerifyContHeightToParent(!1,!1,!1)}),500)},commonUtils.getDuplicateErrorMsg=function(e,t,r,n){n=null==n?0:n;var i=e.FIELDLABEL,a=e.OWNERNAME,o=(e.MODULE,void 0!==e.DUPCHKMODULE?e.DUPCHKMODULE:e.MODULE),s="Leads"!==o&&"Contacts"!==o?e.hasOwnProperty("RECORDS")?e.RECORDS[0].ENTITYNAME:e.CONVERTEDRECORDS[0].ENTITYNAME:e.hasOwnProperty("RECORDS")?e.RECORDS[0].ENTITYNAMEFORPOPOVER:e.CONVERTEDRECORDS[0].ENTITYNAMEFORPOPOVER;s="string"!=typeof s?"null":s;var l="",c="";l=Crm.userDetails.MODULE_LIST[o].plural_label?Crm.userDetails.MODULE_LIST[o].plural_label:Crm.userDetails.MODULE_LIST[o].pluralLabel,c=Crm.userDetails.MODULE_LIST[o].singular_label?Crm.userDetails.MODULE_LIST[o].singular_label:Crm.userDetails.MODULE_LIST[o].singularLabel;var d="1"==e.ISCF?i:I18n.getMsg(i,[c]);e.hasOwnProperty("i18nFieldLabel")&&(d=e.i18nFieldLabel);var u=t?"":I18n.getMsg("crm.duplicate.value.not.allowed")+" ",m=e.RECORDS[0].ENTITYID,p=moduleRecordMapping[o]?moduleRecordMapping[o].id:void 0;if(p){var g=store.peekRecord("module",p).display_field,f=store.peekRecord(p,m);f?s="Full_Name"==g.api_name&&f.Salutation?f.Salutation+" "+f[g.api_name]:f[g.api_name]:store.findRecord(p,m,{approved:"both",converted:"both"}).then((function(e){s=e[0]?"Full_Name"==g.api_name&&e[0].Salutation?e[0].Salutation+" "+e[0][g.api_name]:e[0][g.api_name]:s}))}if("1"==e.COUNT||"1"!=e.COUNT&&!Crm.userDetails.permissions["Crm_Implied_Merge_"+o]){if(u+=I18n.getMsg("crm.duplicate.value.available",[I18n.getMsg(c).toLowerCase(),d]),u=$ESAPI.encoder().encodeForHTML(u),!r){var h=Crm.getCrmBasePath()+"/EntityInfo.do?module="+o+"&id="+m;h=networkUtils.getPortalURL(h),u+=" <a data-zcqa='viewExistingRecord' class='viewExistingRecordQuickInfo' id='viewExistingRecordQuickInfo"+n+'\' onmouseleave="Crm.dontHideQuickInfoPop(event);" onmouseenter="Crm.showExistingEmailQuickInfo(\''+$ESAPI.encoder().encodeForJavaScript(s)+"','"+$ESAPI.encoder().encodeForJavaScript(a)+"','"+$ESAPI.encoder().encodeForJavaScript(e.ZUID)+"','"+$ESAPI.encoder().encodeForJavaScript(c)+"','"+n+"',this)\" rel='noopener noreferrer' target='_blank' href='"+h+"'>"+I18n.getMsg("crm.view.record",I18n.getMsg($ESAPI.encoder().encodeForHTML(c)))+"</a>"}}else u+=I18n.getMsg("crm.duplicate.value.available.multiple",[I18n.getMsg(c).toLowerCase(),d]),u=$ESAPI.encoder().encodeForHTML(u),r||(u+=' <link-to lt-prop-target="_blank" lt-prop-route="crm.tab.module.entity.find-and-merge" lt-prop-qp=\'{"findDupFldName" :"'+$ESAPI.encoder().encodeForHTML(i)+"\"}'    lt-prop-dp='[\""+o+'","'+m+"\"]'>"+I18n.getMsg("crm.label.module.merge",I18n.getMsg($ESAPI.encoder().encodeForHTML(l)))+"</link-to>");return u},commonUtils.hideDuplicateErrorMsg=function(e){var t;if((t=e?$("form[name="+e+"] [id^='errorMsg_']"):$("[id^='errorMsg_']")).length>0)for(var r=0;r<t.length;r++){var n=t[r].id;$("#"+n.replace("(","\\(").replace(")","\\)")).remove();var i=n.substring(n.indexOf("_")+1).replace("(","\\(").replace(")","\\)"),a=$("#"+i);a&&0!==a.length||(a=$("[name='"+i+"']")),a.removeClass("errorHighlight").css({"border-color":""})}},commonUtils.getLookupIdName=function(e){var t=null,r={Accounts:"actName",Contacts:"contactName",Potentials:"potentialName",Campaigns:"campName",Products:"prodName",Solutions:"solutionName",PriceBooks:"priceName",Cases:"caseName",Leads:"leadName",Vendors:"vendorName",Invoices:"invoiceName",PurchaseOrders:"purchaseorder",SalesOrders:"salesorder",Quotes:"quoteName",Services:"ServiceName",Appointments:"AppointmentName",Unknown:"UnknownName"};return-1!==e.indexOf("CustomModule")?t="customModule":r[e]&&(t=r[e]),t},commonUtils.roundNumber=function(e,t){return(Math.round((e*Math.pow(10,t)).toFixed(t))/Math.pow(10,t)).toFixed(t)},commonUtils.escapeSingleQuote=function(e){return e.replace(/'/g,"\\'")},commonUtils.emptyCheck=function(e,t,r,n,i,a,o=!0){var s=e;if(null!=e&&"string"==typeof e&&(s=getElm(n,e)),null!=s&&s.length>1&&"radio"==s[0].type)for(var l=0;l<s.length;l++)s[l].checked&&(s=s[l]);if(s&&s.className&&s.className.indexOf("MXNDUMMYCOLUMNBUNDLE")>-1){var c=$L("#"+s.className),d=c.data("finalResponse")?c.data("finalResponse"):[];if(d&&d.length<2){if(o){var u=d.length>0?I18n.getMsg("bundles.minimum.product.check",["2",moduleRecordMapping.Products.plural_label,moduleRecordMapping.Bundles.singular_label]):I18n.getValueForFields("crm.field.empty.check",t);commonUtils.showErrorMsg($ESAPI.encoder().encodeForHTML(u),$(s))}return!1}s=c}if(s&&s.className&&s.className.indexOf("BUNDLECODE")>-1){var m=s.value;if(m&&m.includes(" "))return o&&commonUtils.showErrorMsg($ESAPI.encoder().encodeForHTML(I18n.getValueForFields("bundles.field.space.alert",t)),$("."+s.id)),!1}if(null!=s&&r&&(""==s.value||"CRM-RICHTEXT-COMPONENT"===s.tagName&&0===s.component.getTextValue().replace(/^\s+/g,"").replace(/\s+$/g,"").length||"combo"==r&&"none"==s.value)&&!s.disabled){if(o){a||_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getValueForFields("crm.field.none.check",t)}}),s.setAttribute("autocomplete","off");try{s.focus()}catch(e){murphy.error(e)}}return!1}if(null!=s&&(null!=s.value&&0==s.value.replace(/^\s+/g,"").replace(/\s+$/g,"").length||"CRM-RICHTEXT-COMPONENT"===s.tagName&&0===s.component.getTextValue().replace(/^\s+/g,"").replace(/\s+$/g,"").length)&&!s.disabled){if(o){if(!a){var p=I18n.getValueForFields("crm.field.empty.check",t);"inline"===i?$(s).closest(".labelValCreate").length||$(s).closest(".validErrMsg").length?commonUtils.showErrorMsg($ESAPI.encoder().encodeForHTML(p),$(s)):renderingUtils.displayErrorDiv("string"==typeof e?e:t,void 0,p,s):crmui.showMsgBand("error",$ESAPI.encoder().encodeForHTML(p),3e3,"")}s.setAttribute("autocomplete","off");try{s.focus()}catch(e){murphy.error(e)}}return!1}return!0},commonUtils.formData2QueryString=function(e,t,r,n){var i,a="",o="Home";null!=t&&(o=t.toUpperCase().substring(0,t.length-1)+"CF");for(var s=new RegExp("^"+o),l=new RegExp("^comboValue"),c=0;c<e.elements.length;c++){if(i=e.elements[c],n){var d=$(i).data();if(CFRExec&&validationUtils.isNotEmpty(CFRExec.QCObj)&&d&&d.colname&&CFRExec.isLayoutRuleHiddenElem(d.colname))continue}var u=!0;if(r)u=""!=i.name;else{if("property(Products in Bundle)"!==i.name&&"property(prodName:Products in Bundle)"!==i.name||"Crm_Bundles_MXNDUMMYCOLUMNBUNDLE"!==i.className)u="gsitesList"!=i.name&&"gsitesName"!=i.name&&"isShareGsite"!=i.name&&"fieldname"!=i.name&&"dateFields"!=i.name&&"fieldlabel"!=i.name&&"fielddatatype"!=i.name&&"picklistFields"!=i.name&&"fieldvalues"!=i.name&&"mapValues"!=i.name&&"fieldName"!=i.name&&"fieldLabel"!=i.name&&"fieldDatatype"!=i.name&&"fieldUitype"!=i.name&&"fieldId"!=i.name&&"fieldTableName"!=i.name&&"fieldLen"!=i.name&&"dtPtn"!=i.name&&"hdnRowStatus1"!=i.name&&"focusid"!=i.name&&i.name.indexOf("uiType_")<0&&""!=i.name&&"radiobtn"!=i.name&&"hostSearch"!=i.name&&"territoryOwnerName"!=i.name&&"banner_countrySelect"!=i.name&&"banner_editionSelect"!=i.name&&!i.name.endsWith("_visible")&&"servstatcat"!==i.name&&"skipSubmission"!=i.name;else{var m=$L("#"+i.className).data();i.value="property(Products in Bundle)"===i.name?JSON.stringify(m.finalResponse):m.selectedid}null!=t&&(u="gsitesList"!=i.name&&"gsitesName"!=i.name&&"isShareGsite"!=i.name&&"fieldname"!=i.name&&"dateFields"!=i.name&&"fieldlabel"!=i.name&&"fielddatatype"!=i.name&&"picklistFields"!=i.name&&"fieldvalues"!=i.name&&"mapValues"!=i.name&&"fieldName"!=i.name&&"fieldLabel"!=i.name&&"fieldDatatype"!=i.name&&"fieldUitype"!=i.name&&"fieldId"!=i.name&&"fieldTableName"!=i.name&&"fieldLen"!=i.name&&"dtPtn"!=i.name&&"hdnRowStatus1"!=i.name&&"focusid"!=i.name&&i.name.indexOf("uiType_")<0&&!s.test(i.name)&&!l.test(i.name)&&""!=i.name&&!i.name.endsWith("_visible"))}if(u)switch(i.type){case"number":case"text":case"select-one":case"password":case"textarea":var p=i.value,g=$(i);if(33==g.data("uitype")&&(p=commonUtils.getValue(g)),void 0!==i.name.match(/[0123456789]/)&&null!==i.name.match(/[0123456789]/)){var f=i.name.indexOf(i.name.match(/[0123456789]/)[0]);if(i.name.startsWith("searchfield")||i.name.startsWith("property")||void 0===$("#searchfield"+i.name.substring(f)).find(":selected").attr("data-enc")||"true"!==$("#searchfield"+i.name.substring(f)).find(":selected").attr("data-enc"))a+=encodeURIComponent(i.name)+"="+encodeURIComponent(trimBoth(p))+"&";else if(i.name.startsWith("enc_")){var h=i.name.substring(i.name.indexOf("enc_")+4);a+=encodeURIComponent(h)+"="+encodeURIComponent(trimBoth(p))+"&"}else i.name.indexOf("condition")>-1||i.name.indexOf("search")>-1||(a+=encodeURIComponent(i.name)+"="+encodeURIComponent(trimBoth(p))+"&")}else a+=encodeURIComponent(i.name)+"="+encodeURIComponent(trimBoth(p))+"&";break;case"hidden":a+=encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)+"&";break;case"checkbox":case"radio":i.checked&&("zloginForm"==e.name?a+=i.name+"="+encodeURIComponent(i.value)+"&":a+=encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)+"&")}}return a},commonUtils.changeToPreviousRoute=function(){if(featuresAvailable&&featuresAvailable.NEXTGENUI_ENABLED&&Lyte.registeredMixins["crm-setup-mixin"]){let e=Lyte.registeredMixins["crm-setup-mixin"].getLastAccessedRouter();Lyte.Router.getRouteInstance().transitionTo(e)}},commonUtils.murphyLyteErrorRegex={},commonUtils.murphyLyteErrorMsg={},commonUtils.murphyLyteErrorMsg.lyteErrorMessages={LD01:"Primary key value might be missing in the response data that is received, {0}",LD02:"{0} - {1} is not registered",LD03:"Cannot set the error {0} for {1}",LD04:"No such record to merge, {0}",LD05:"Model( {0} ) of related property - {1} not found in model - {2}",LD06:"Backward relation not present in model( {0} ), for the property {1} of model( {2} )",LD07:"{0} type not handled in handleArrayOperations",LD08:"{0} {1} will be deprecated from next version {2}",LD09:"deserializeKey cannot be processed for payload with more than two keys. Please use payloadKey callback instead or try modifying the same in normalizeResponse callback",LD10:"Response data not in a format lyte data store expects",LD11:"Deprecation Warning! findRecord response payload will not accept an array. It will be deprecated from the next version",LD12:"Response ( {0} ) is not in a format, lyte data store expects",LD13:"Response processing failed in {0} for model-{1} {2}, since invalid data is received in {1}(modelName) key of the data",LD14:"Cannot register {0} - {1}, as it already exists.",LD15:"Primary key value might be missing in the response data that is received, {0}",LD16:"Record merge failed for the record in model - {0} with primaryKey value - {1}, since either the persisted(saved) primary key value for a newly created record is not received from server or not in the proper structure to merge",LD17:"Record with the primary key value already exists",LD18:"No { 0 } present",LD19:"Deprecation Warning! findAll will not accept response payload values other than an array or any empty value. Current implementation which allows this will be deprecated from the next version",LD20:"Record cannot be saved as a state, when it is not either a new or a modified record or in a error state.",LD21:"No such state ( {0} ) saved for the record.",LD22:"For create / createRecord, response with a primary key value should be received",LD23:"PrimaryKey field {1} in {0} cannot have default value",LD24:"Response couldn't be parsed, {0}",LD25:"Cannot create record for the data - {0}",LD26:"Only one baseKey is allowed for a model",LD27:"Record merge failed, since the data passed is invalid - {0}",LD28:"Record merge failed for the model - {0}, since a valid primary key value is not found in the data to be merged - {1}",LD29:"Unloaded record-{0} of the model-{1} is being saved",LD30:"Variable value in query is mandatory for {0}",LD31:"Datatype defined for {0} is mismatch with the value's datatype",LD32:"Query '{0}' was not registered for the model '{1}'",LR400:"url '{0}' is not defined in router.",LR400A:"Base path of url is not specified.",LR422:"There is no route definition for the route {0}.",LR498:"Invalid argument {0}",LR498A:"Invalid argument {0} provided in {1}.",LR499:"Dynamic params for the route {0} is not provided.",LR499A:"Dynamic params for the route {0} is not provided {1}.",LR499B:"Transition tried without arguments.",LR405:"Method invocation before Router initialized.",LR428:"There is no outlet named {0}.",LR420A:"Error in {0} of route {1}.",LR420:"Promise rejected",LR424:"File not loaded in getDependencies of route {0}",LC001:"Error while parsing custom prop handler attribute {0}. Check if the value provided is a valid JSON",LC002:"{0} Component is not compiled. Please compile using Lyte CLI",LC003:"Helper named {0} is not defined",LC004:"Action named {0} doesn't exists",LC005:"Lyte.objectUtils doesn't support {0} function",LC006:"Lyte.arrayUtils doesn't support {0} function",LC007:"Component name not specified in Lyte.Component.render",LC008:"Specified outlet {0} doesn't exists - Lyte.Component.render",LC009:"Method named {0} doesn't exists in {1} component",LC010:"Parent Node / reference Node not provided for insertBefore method",LC011:"Error in promise provided in initialize function of data '{0}' of {1} component"},commonUtils.murphyLyteErrorRegex.LRArray=[{code:"LR400",msg:/url (.*?) is not defined in router\.$/},{code:"LR400A",msg:/Base path of url is not specified\.$/},{code:"LR422",msg:/There is no route definition for the route (.*?)\.$/},{code:"LR424",msg:/File not loaded in getDependencies of route (\S+)\s*(.*)$/},{code:"LR498A",msg:/Invalid argument (.*?) provided in (.*?)$/},{code:"LR498",msg:/Invalid argument (.*?)\.$/},{code:"LR499",msg:/Dynamic params for the route (.*?) is not provided\.$/},{code:"LR499A",msg:/Dynamic params for the route (.*?) is not provided in (.*?)$/},{code:"LR499B",msg:/Transition tried without arguments\.$/},{code:"LR405",msg:/Method invocation before Router initialized\.$/},{code:"LR428",msg:/There is no outlet named (.*?)\.$/},{code:"LR420A",msg:/Error in (.*?) of route (.*?)\.$/},{code:"LR420",msg:/Promise rejected\.$/}],commonUtils.murphyLyteErrorRegex.LDArray=[{code:"LD01",msg:/Primary key value might be missing in the response data that is received, (.*?)\.?$/},{code:"LD02",msg:/(.*?) - (.*?) is not registered\.?$/,errorCodeHasStartArgument:!0},{code:"LD03",msg:/Cannot set the error (.*?) for (.*?)\.?$/},{code:"LD04",msg:/No such record to merge, (.*?)\.?$/},{code:"LD05",msg:/Model\( (.*?) \) of related property - (.*?) not found in model - (.*?)\.?$/},{code:"LD06",msg:/Backward relation not present in model\( (.*?) \), for the property (.*?) of model\( (.*?) \)\.?$/},{code:"LD07",msg:/(.*?) type not handled in handleArrayOperations\.?$/,errorCodeHasStartArgument:!0},{code:"LD08",msg:/(.*?) (.*?) will be deprecated from next version (.*?)\.?$/,errorCodeHasStartArgument:!0},{code:"LD09",msg:/deserializeKey cannot be processed for payload with more than two keys. Please use payloadKey callback instead or try modifying the same in normalizeResponse callback\.?$/},{code:"LD10",msg:/Response data not in a format lyte data store expects\.?$/},{code:"LD11",msg:/Deprecation Warning! findRecord response payload will not accept an array. It will be deprecated from the next version\.?$/},{code:"LD12",msg:/Response \( (.*?) \) is not in a format, lyte data store expects\.?$/},{code:"LD13",msg:/Response processing failed in (.*?) for model-(.*?) (.*?), since invalid data is received in (.*?)\(modelName\) key of the data\.?$/},{code:"LD14",msg:/Cannot register (.*?) - (.*?), as it already exists\.?$/},{code:"LD15",msg:/Primary key value might be missing in the response data that is received, (.*?)\.?$/},{code:"LD16",msg:/Record merge failed for the record in model - (.*?) with primaryKey value - (.*?), since either the persisted\(saved\) primary key value for a newly created record is not received from server or not in the proper structure to merge\.?$/},{code:"LD17",msg:/Record with the primary key value already exists\.?$/},{code:"LD18",msg:/No (.*?) present\.?$/},{code:"LD19",msg:/Deprecation Warning! findAll will not accept response payload values other than an array or any empty value. Current implementation which allows this will be deprecated from the next version\.?$/},{code:"LD20",msg:/Record cannot be saved as a state, when it is not either a new or a modified record or in a error state\.?$/},{code:"LD21",msg:/No such state \( (.*?) \) saved for the record\.?$/},{code:"LD22",msg:/For create \/ createRecord, response with a primary key value should be received\.?$/},{code:"LD23",msg:/PrimaryKey field (.*?) in (.*?) cannot have default value\.?$/},{code:"LD24",msg:/Response couldn't be parsed, (.*?)\.?$/},{code:"LD25",msg:/Cannot create record for the data - (.*?)\.?$/},{code:"LD26",msg:/Only one baseKey is allowed for a model\.?$/},{code:"LD27",msg:/Record merge failed, since the data passed is invalid - (.*?)\.?$/},{code:"LD28",msg:/Record merge failed for the model - (.*?), since a valid primary key value is not found in the data to be merged - (.*?)\.?$/},{code:"LD29",msg:/Unloaded record-(.*?) of the model-(.*?) is being saved\.?$/},{code:"LD30",msg:/Variable value in query is mandatory for (.*?)\.?$/},{code:"LD31",msg:/Datatype defined for (.*?) is mismatch with the value's datatype\.?$/},{code:"LD32",msg:/Query '(.*?)' was not registered for the model '(.*?)\.?$/}],commonUtils.murphyLyteErrorRegex.LCArray=[{code:"LC001",msg:/Error while parsing custom prop handler attribute (.*?). Check if the value provided is a valid JSON$/},{code:"LC002",msg:/(.*?) Component is not compiled. Please compile using Lyte CLI\.$/,errorCodeHasStartArgument:!0},{code:"LC003",msg:/Helper named (.*?) is not defined$/},{code:"LC004",msg:/Action named (.*?) doesn\'t exists$/},{code:"LC005",msg:/Lyte.objectUtils doesn\'t support (.*?) function$/},{code:"LC006",msg:/Lyte.arrayUtils doesn\'t support (.*?) function$/},{code:"LC007",msg:/Component name not specified in Lyte.Component.render$/},{code:"LC008",msg:/Specified outlet (.*?) doesn\'t exists - Lyte.Component.render$/},{code:"LC009",msg:/Method named (.*?) doesn\'t exists in (.*?) component$/},{code:"LC010",msg:/Parent Node \/ reference Node not provided for insertBefore method$/},{code:"LC011",msg:/Error in promise provided in initialize function of data (.*?) of (.*?) component\\.$/}],commonUtils.murphyLyteErrorHandler={},commonUtils.murphyLyteErrorHandler.proccessError=function(e){try{if(!(e instanceof Error||e instanceof Event&&e.error))return;var t=e.message,r=commonUtils.murphyLyteErrorHandler.normalize(t),n={};commonUtils.murphyLyteErrorHandler.setDynamicCustomTagForLyteErrors(r,n);var i={};i.frameworkData=n,murphy.error(e,void 0,i)}catch(e){murphy.error(e)}},commonUtils.murphyLyteErrorHandler.setDynamicCustomTagForLyteErrors=function(e,t){if(null!==e&&"normalizedMsg"in e){var r=e.normalizedMsg,n=e.msgThatNotMatched;if(void 0!==n&&n.length>20){var i=n,a=commonUtils.murphyLyteErrorHandler.proccessAddtionalMessage(n,"LR");return null===a&&(a=commonUtils.murphyLyteErrorHandler.proccessAddtionalMessage(n,"LD")),null===a&&(a=commonUtils.murphyLyteErrorHandler.proccessAddtionalMessage(n,"LC")),null===a&&(a=i),t.finalMsg=a,void(t.isFrameworkError=!0)}if("match"in e)for(var o=e.match,s=o.length,l=1;l<s;l++){var c=commonUtils.murphyLyteErrorHandler.truncateMessage(o[l]);""!==c&&(t[`arg${l}`]=c)}t.finalMsg=r,t.lyteErrorCode=e.code,t.isFrameworkError=!0}},commonUtils.murphyLyteErrorHandler.truncateMessage=function(e){return e.length>255?e.slice(0,250)+"...":e},commonUtils.murphyLyteErrorHandler.proccessAddtionalMessage=function(e,t){try{var r=commonUtils.murphyLyteErrorHandler.matchAddtionalMessage(e,t);if(""!==r.code)if(commonUtils.murphyLyteErrorHandler.doesCodeMatch(r.code))return r.balanceMessage}catch(e){return null}return null},commonUtils.murphyLyteErrorHandler.matchAddtionalMessage=function(e,t){try{const r=e.lastIndexOf(t);if(-1===r)return{code:"",balanceMessage:e};const n=e.slice(r).replace(/[^a-zA-Z0-9]/g,"");return{code:n,balanceMessage:e.slice(0,r).trim()}}catch(t){return{code:"",balanceMessage:e}}},commonUtils.murphyLyteErrorHandler.getAllRegexArr=function(){var e=[];for(const t in commonUtils.murphyLyteErrorRegex)e=e.concat(commonUtils.murphyLyteErrorRegex[t]);return e},commonUtils.murphyLyteErrorHandler.doesCodeMatch=function(e){try{for(var t=commonUtils.murphyLyteErrorHandler.getAllRegexArr(),r=t.length,n=0;n<r;n++){if(t[n].code===e)return!0}}catch(e){return!1}return!1},commonUtils.murphyLyteErrorHandler.normalize=function(e){var t=[],r=!1,n=!1,i=!1;e.includes("LD")&&(t=t.concat(commonUtils.murphyLyteErrorRegex.LDArray),r=!0),e.includes("LR")&&(t=t.concat(commonUtils.murphyLyteErrorRegex.LRArray),n=!0),e.includes("LC")&&(t=t.concat(commonUtils.murphyLyteErrorRegex.LCArray),i=!0),0===t.length&&(r=!0,n=!0,i=!0,t=commonUtils.murphyLyteErrorHandler.getAllRegexArr());var a=commonUtils.murphyLyteErrorHandler.matchPatter(e,t);return null!==a&&"normalizedMsg"in a||(t=[],r||(t=t.concat(commonUtils.murphyLyteErrorRegex.LDArray)),n||(t=t.concat(commonUtils.murphyLyteErrorRegex.LRArray)),i||(t=t.concat(commonUtils.murphyLyteErrorRegex.LCArray)),0!==t.length&&(a=commonUtils.murphyLyteErrorHandler.matchPatter(e,t))),a},commonUtils.murphyLyteErrorHandler.normalizeFirstArg=function(e){return e.replace("Error:","").trim()},commonUtils.murphyLyteErrorHandler.handleSplErrors=function(e,t){"LD13"===t&&e.length>=4&&e.splice(4,1)},commonUtils.murphyLyteErrorHandler.matchPatter=function(e,t){for(var r=[],n=t.length,i=0;i<n;i++){var a=t[i].msg;if(r=e.match(a)){if("errorCodeHasStartArgument"in t[i]&&t[i].errorCodeHasStartArgument&&r.length>=1){var o=r[1];r[1]=commonUtils.murphyLyteErrorHandler.normalizeFirstArg(o)}commonUtils.murphyLyteErrorHandler.handleSplErrors(r,t[i].code);var s=commonUtils.murphyLyteErrorMsg.lyteErrorMessages[t[i].code],l=l=e.slice(0,r.index);return l=l.trim(),{match:r,code:t[i].code,regPattern:a,normalizedMsg:s,msgThatNotMatched:l}}}return r},RebrandLinkUtil={properties:void 0,setProperties:function(e){this.properties=e},getProperties:function(){return this.properties},getProperty:function(e){if(this.properties)return this.properties[e]}};var $namespace=function(e,t,r){var n,i,a=e.split(t||"."),o=r||window;for(n=0,i=a.length;n<i;n++)o=o[a[n]]=o[a[n]]||{};return o},$type=function(e,t){if(!e instanceof t)throw new SyntaxError};if(Array.prototype.each||(Array.prototype.each=function(e){if("function"!=typeof e)throw"Illegal Argument for Array.each";for(var t=0;t<this.length;t++)e(this[t])}),Array.prototype.contains||(Array.prototype.contains=function(e){var t=!1;return this.each((function(r){(e.equals&&e.equals(r)||r==e)&&(t=!0)})),t}),Array.prototype.containsKey||(Array.prototype.containsKey=function(e){for(var t in this)if(t.toLowerCase()==e.toLowerCase())return!0;return!1}),Array.prototype.getCaseInsensitive||(Array.prototype.getCaseInsensitive=function(e){for(var t in this)if(t.toLowerCase()==e.toLowerCase())return this[t];return null}),String.prototype.charCodeAt||(String.prototype.charCodeAt=function(e){for(var t=this.charAt(e),r=0;r<65536;r++){if(String.fromCharCode(r)==t)return r}return 0}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.substr(this.length-e.length,e.length)==e}),!Exception){var Exception=function(e,t){this.cause=t,this.errorMessage=e};Exception.prototype=Error.prototype,Exception.prototype.getCause=function(){return this.cause},Exception.prototype.getMessage=function(){return this.message},Exception.prototype.getStackTrace=function(){if(this.callstack)return this.callstack;if(this.stack){for(var e=0,t=(r=stack.split("\n")).length;e<t;e++)r[e].match(/^\s*[A-Za-z0-9\=+\$]+\(/)&&this.callstack.push(r[e]);return this.callstack.shift(),this.callstack}if(window.opera&&this.message){var r;for(e=0,t=(r=this.message.split("\n")).length;e<t;e++)if(r[e].match(/^\s*[A-Za-z0-9\=+\$]+\(/)){var n=r[e];r[e+1]&&(n+=" at "+r[e+1],e++),this.callstack.push(n)}return this.callstack.shift(),this.callstack}for(var i=arguments.callee.caller;i;){var a=i.toString(),o=a.substring(a.indexOf("function")+8,a.indexOf("("))||"anonymous";this.callstack.push(o),i=i.caller}return this.callstack},Exception.prototype.printStackTrace=function(e){var t=this.getMessage()+"|||"+this.getStackTrace().join("|||");return this.cause&&this.cause.printStackTrace&&(t+="||||||Caused by "+this.cause.printStackTrace().replace("\n","|||")),e?void(e.value?e.value=t.replace("|||","\n"):e.writeln?e.writeln(t.replace("|||","\n")):e.innerHTML?e.innerHTML=t.replace("|||","<br/>"):e.innerText?e.innerText=t.replace("|||","<br/>"):e.append?e.append(t.replace("|||","\n")):e instanceof Function&&e(t.replace("|||","\n"))):e.replace("|||","\n")}}if(!RuntimeException)var RuntimeException=Exception;if(!IllegalArgumentException)var IllegalArgumentException=Exception;if(!DateFormat){var DateFormat=function(e){var t=e,r={longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d:function(e){return(e.getDate()<10?"0":"")+e.getDate()},D:function(e){return r.shortDays[e.getDay()]},j:function(e){return e.getDate()},l:function(e){return r.longDays[e.getDay()]},N:function(e){return e.getDay()+1},S:function(e){return e.getDate()%10==1&&11!=e.getDate()?"st":e.getDate()%10==2&&12!=e.getDate()?"nd":e.getDate()%10==3&&13!=e.getDate()?"rd":"th"},w:function(e){return e.getDay()},z:function(e){return"Not Yet Supported"},W:function(e){return"Not Yet Supported"},F:function(e){return r.longMonths[e.getMonth()]},m:function(e){return(e.getMonth()<9?"0":"")+(e.getMonth()+1)},M:function(e){return r.shortMonths[e.getMonth()]},n:function(e){return e.getMonth()+1},t:function(e){return"Not Yet Supported"},L:function(e){return e.getFullYear()%4==0&&e.getFullYear()%100!=0||e.getFullYear()%400==0?"1":"0"},o:function(e){return"Not Supported"},Y:function(e){return e.getFullYear()},y:function(e){return(""+e.getFullYear()).substr(2)},a:function(e){return e.getHours()<12?"am":"pm"},A:function(e){return e.getHours()<12?"AM":"PM"},B:function(e){return"Not Yet Supported"},g:function(e){return e.getHours()%12||12},G:function(e){return e.getHours()},h:function(e){return((e.getHours()%12||12)<10?"0":"")+(e.getHours()%12||12)},H:function(e){return(e.getHours()<10?"0":"")+e.getHours()},i:function(e){return(e.getMinutes()<10?"0":"")+e.getMinutes()},s:function(e){return(e.getSeconds()<10?"0":"")+e.getSeconds()},e:function(e){return"Not Yet Supported"},I:function(e){return"Not Supported"},O:function(e){return(-e.getTimezoneOffset()<0?"-":"+")+(Math.abs(e.getTimezoneOffset()/60)<10?"0":"")+Math.abs(e.getTimezoneOffset()/60)+"00"},P:function(e){return(-e.getTimezoneOffset()<0?"-":"+")+(Math.abs(e.getTimezoneOffset()/60)<10?"0":"")+Math.abs(e.getTimezoneOffset()/60)+":"+(Math.abs(e.getTimezoneOffset()%60)<10?"0":"")+Math.abs(e.getTimezoneOffset()%60)},T:function(e){var t=e.getMonth();e.setMonth(0);var r=e.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return e.setMonth(t),r},Z:function(e){return 60*-e.getTimezoneOffset()},c:function(e){return e.format("Y-m-d")+"T"+e.format("H:i:sP")},r:function(e){return e.toString()},U:function(e){return e.getTime()/1e3}};return{format:function(e){for(var n="",i=0;i<t.length;i++){var a=t.charAt(i);n+=r[a]?r[a].call(e):a}return n}}};DateFormat.getDateInstance=function(){return new DateFormat("M/d/y h:i a")}}$namespace("org.owasp.esapi"),org.owasp.esapi.ESAPI=function(e){var t=e;if(!t)throw new RuntimeException("Configuration Error - Unable to load $ESAPI_Properties Object");var r=null,n=null,i=null,a=null,o=null;return{properties:t,encoder:function(){if(!r){if(!t.encoder.Implementation)throw new RuntimeException("Configuration Error - $ESAPI.properties.encoder.Implementation object not found.");r=new t.encoder.Implementation}return r},logFactory:function(){if(!i){if(!t.logging.Implementation)throw new RuntimeException("Configuration Error - $ESAPI.properties.logging.Implementation object not found.");i=new t.logging.Implementation}return i},logger:function(e){return this.logFactory().getLogger(e)},locale:function(){return org.owasp.esapi.i18n.Locale.getLocale(t.localization.DefaultLocale)},resourceBundle:function(){if(!a){if(!t.localization.StandardResourceBundle)throw new RuntimeException("Configuration Error - $ESAPI.properties.localization.StandardResourceBundle not found.");a=new org.owasp.esapi.i18n.ObjectResourceBundle(t.localization.StandardResourceBundle)}return a},validator:function(){if(!n){if(!t.validation.Implementation)throw new RuntimeException("Configuration Error - $ESAPI.properties.validation.Implementation object not found.");n=new t.validation.Implementation}return n},httpUtilities:function(){return o||(o=new org.owasp.esapi.HTTPUtilities),o}}};var $ESAPI=null;with(org.owasp.esapi.ESAPI.initialize=function(){$ESAPI=new org.owasp.esapi.ESAPI(Base.esapi.properties)},$namespace("org.owasp.esapi"),org.owasp.esapi.Encoder=function(){},$namespace("org.owasp.esapi"),org.owasp.esapi.EncoderConstants={CHAR_LOWERS:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],CHAR_UPPERS:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],CHAR_DIGITS:["0","1","2","3","4","5","6","7","8","9"],CHAR_SPECIALS:["!","$","*","+","-",".","=","?","@","^","_","|","~"],CHAR_LETTERS:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],CHAR_ALNUM:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"]},$namespace("org.owasp.esapi"),org.owasp.esapi.EnterpriseSecurityException=function(e,t,r){var n=t,i=new Exception(e,r);return{getMessage:i.getMessage,getUserMessage:i.getMessage,getLogMessage:function(){return n},getStackTrace:i.getStackTrace,printStackTrace:i.printStackTrace}},$namespace("org.owasp.esapi"),org.owasp.esapi.HTTPUtilities=function(){var e=$ESAPI.logger("HTTPUtilities"),t=$ESAPI.resourceBundle(),r=org.owasp.esapi.Logger.EventType;return{addCookie:function(n){if($type(n,org.owasp.esapi.net.Cookie),"http:"!=window.top.location.protocol||"https:"!=window.top.location.protocol)throw new RuntimeException(t.getString("HTTPUtilities.Cookie.Protocol",{protocol:window.top.location.protocol}));var i=n.getName(),a=n.getValue(),o=n.getMaxAge(),s=n.getDomain(),l=n.getPath(),c=n.getSecure(),d=new org.owasp.esapi.ValidationErrorList;if($ESAPI.validator().getValidInput("cookie name",i,"HttpCookieName",50,!1,d),$ESAPI.validator().getValidInput("cookie value",a,"HttpCookieValue",5e3,!1,d),0==d.size()){var u=i+"="+escape(a);u+=o?";expires="+new Date((new Date).getTime()+1e3*o).toGMTString():"",u+=l?";path="+l:"",u+=s?";domain="+s:"",u+=c||$ESAPI.properties.httputilities.cookies.ForceSecure?";secure":"",document.cookie=u}else e.warning(r.SECURITY_FAILURE,t.getString("HTTPUtilities.Cookie.UnsafeData",{name:i,value:a}))},getCookie:function(e){for(var t=document.cookie.split("; "),r=0,n=t.length;r<n;r++){var i=t[r].split("=");if(i[0]==escape(e))return new org.owasp.esapi.net.Cookie(e,i[1]?unescape(i[1]):"")}return null},killAllCookies:function(){for(var e=document.cookie.split("; "),r=0,n=e.length;r<n;r++){var i=e[r].split("="),a=unescape(i[0]);if(!this.killCookie(a))throw new RuntimeException(t.getString("HTTPUtilities.Cookie.CantKill",{name:a}))}},killCookie:function(e){var r=this.getCookie(e);if(r){if(r.setMaxAge(-10),this.addCookie(r),this.getCookie(e))throw new RuntimeException(t.getString("HTTPUtilities.Cookie.CantKill",{name:e}));return!0}return!1},getRequestParameter:function(e){var t=window.top.location.search.substring(1),r=t.indexOf(e);if(r<0)return null;r+=e.length;var n=t.indexOf("&",r);return n<0&&(n=t.length),unescape(t.substring(r,n))}}},$namespace("org.owasp.esapi"),org.owasp.esapi.IntrusionException=function(e,t,r){var n=new org.owasp.esapi.EnterpriseSecurityException(e,t,r);return{getMessage:n.getMessage,getUserMessage:n.getMessage,getLogMessage:n.getLogMessage,getStackTrace:n.getStackTrace,printStackTrace:n.printStackTrace}},$namespace("org.owasp.esapi"),org.owasp.esapi.LogFactory=function(){return{getLogger:!1}},$namespace("org.owasp.esapi"),org.owasp.esapi.Logger=function(){return{setLevel:!1,fatal:!1,error:!1,isErrorEnabled:!1,warning:!1,isWarningEnabled:!1,info:!1,isInfoEnabled:!1,debug:!1,isDebugEnabled:!1,trace:!1,isTraceEnabled:!1}},org.owasp.esapi.Logger.EventType=function(e,t){var r=e,n=t;return{isSuccess:function(){return n},toString:function(){return r}}},org.owasp.esapi.Logger)EventType.SECURITY_SUCCESS=new EventType("SECURITY SUCCESS",!0),EventType.SECURITY_FAILURE=new EventType("SECURITY FAILURE",!1),EventType.EVENT_SUCCESS=new EventType("EVENT SUCCESS",!0),EventType.EVENT_FAILURE=new EventType("EVENT FAILURE",!1),OFF=Number.MAX_VALUE,FATAL=1e3,ERROR=800,WARNING=600,INFO=400,DEBUG=200,TRACE=100,ALL=Number.MIN_VALUE;$namespace("org.owasp.esapi"),org.owasp.esapi.PreparedString=function(e,t,r){var n=[],i=[];return r||(r="?"),function(e){for(var t=0,a=0,o=0;o<e.length;o++)e.charAt(o)==r&&(a++,n.push(e.substr(t,o)),t=o+1);n.push(e.substr(t)),i=new Array(a)}(e),{set:function(e,r,n){if(e<1||e>i.length)throw new IllegalArgumentException("Attempt to set parameter: "+e+" on a PreparedString with only "+i.length+" placeholders");n||(n=t),i[e-1]=n.encode([],r)},toString:function(){for(var e=0;e<i.length;e++)if(null==i[e])throw new RuntimeException("Attempt to render PreparedString without setting parameter "+(e+1));for(var t="",r=0,a=0;a<n.length;a++)t+=n[a],r<i.length&&(t+=i[r++]);return t}}},$namespace("org.owasp.esapi"),org.owasp.esapi.ValidationErrorList=function(){var e=Array();return{addError:function(t,r){if(null==t)throw new RuntimeException("Context cannot be null: "+r.getLogMessage(),r);if(null==r)throw new RuntimeException("Context ("+t+") - Error cannot be null");if(e[t])throw new RuntimeException("Context ("+t+") already exists. must be unique.");e[t]=r},errors:function(){return e},isEmpty:function(){return 0==e.length},size:function(){return e.length}}},$namespace("org.owasp.esapi"),org.owasp.esapi.ValidationRule=function(){return{getValid:!1,setAllowNull:!1,getTypeName:!1,setTypeName:!1,setEncoder:!1,assertValid:!1,getSafe:!1,isValid:!1,whitelist:!1}},$namespace("org.owasp.esapi"),org.owasp.esapi.Validator=function(){return{addRule:!1,getRule:!1,getValidInput:!1,isValidDate:!1,getValidDate:!1,isValidSafeHTML:!1,getValidSafeHTML:!1,isValidCreditCard:!1,getValidCreditCard:!1,isValidFilename:!1,getValidFilename:!1,isValidNumber:!1,getValidNumber:!1,isValidPrintable:!1,getValidPrintable:!1}},$namespace("org.owasp.esapi.codecs.Base64"),org.owasp.esapi.codecs.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){if(!e)return null;for(var t,r,n,i,a,o,s,l="",c=0,d=org.owasp.esapi.codecs.UTF8.encode(e);c<d.length;)i=(t=d.charCodeAt(c++))>>2,a=(3&t)<<4|(r=d.charCodeAt(c++))>>4,o=(15&r)<<2|(n=d.charCodeAt(c++))>>6,s=63&n,isNaN(r)?o=s=64:isNaN(n)&&(s=64),l+=this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(s);return l},decode:function(e){if(!e)return null;for(var t,r,n,i,a,o,s="",l=0,c=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<c.length;)t=this._keyStr.indexOf(c.charAt(l++))<<2|(i=this._keyStr.indexOf(c.charAt(l++)))>>4,r=(15&i)<<4|(a=this._keyStr.indexOf(c.charAt(l++)))>>2,n=(3&a)<<6|(o=this._keyStr.indexOf(c.charAt(l++))),s+=String.fromCharCode(t),64!=a&&(s+=String.fromCharCode(r)),64!=o&&(s+=String.fromCharCode(n));return org.owasp.esapi.codecs.UTF8.decode(s)}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.CSSCodec=function(){var e=new org.owasp.esapi.codecs.Codec;return{encode:e.encode,decode:e.decode,encodeCharacter:function(e,t){if(e.contains(t))return t;var r=org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(t);return null==r?t:"\\"+r+" "},decodeCharacter:function(e){e.mark();var t=e.next();if(null==t)return e.reset(),null;if("\\"!=t)return e.reset(),null;var r=e.next();if(null==r)return e.reset(),null;if(e.isHexDigit(r)){for(var n=r,i=0;i<6;i++){var a=e.next();if(null==a||32==a.charCodeAt(0))break;if(!e.isHexDigit(a)){input.pushback(a);break}n+=a}try{var o=parseInt(n,16);return String.fromCharCode(o)}catch(t){return e.reset(),null}}return r}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.Codec=function(){return{encode:function(e,t){for(var r="",n=0;n<t.length;n++){var i=t.charAt(n);r+=this.encodeCharacter(e,i)}return r},encodeCharacter:function(e,t){return t},decode:function(e){for(var t="",r=new org.owasp.esapi.codecs.PushbackString(e);r.hasNext();){var n=this.decodeCharacter(r);t+=null!=n?n:r.next()}return t},decodeCharacter:function(e){return e.next()}}},org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric=function(e){return e.charCodeAt(0)<256?org.owasp.esapi.codecs.Codec.hex[e.charCodeAt(0)]:e.charCodeAt(0).toString(16)},org.owasp.esapi.codecs.Codec.hex=[];for(var c=0;c<255;c++)org.owasp.esapi.codecs.Codec.hex[c]=c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?null:c.toString(16);var entityToCharacterMap=[];entityToCharacterMap["&quot"]="34",entityToCharacterMap["&amp"]="38",entityToCharacterMap["&lt"]="60",entityToCharacterMap["&gt"]="62",entityToCharacterMap["&nbsp"]="160",entityToCharacterMap["&iexcl"]="161",entityToCharacterMap["&cent"]="162",entityToCharacterMap["&pound"]="163",entityToCharacterMap["&curren"]="164",entityToCharacterMap["&yen"]="165",entityToCharacterMap["&brvbar"]="166",entityToCharacterMap["&sect"]="167",entityToCharacterMap["&uml"]="168",entityToCharacterMap["&copy"]="169",entityToCharacterMap["&ordf"]="170",entityToCharacterMap["&laquo"]="171",entityToCharacterMap["&not"]="172",entityToCharacterMap["&shy"]="173",entityToCharacterMap["&reg"]="174",entityToCharacterMap["&macr"]="175",entityToCharacterMap["&deg"]="176",entityToCharacterMap["&plusmn"]="177",entityToCharacterMap["&sup2"]="178",entityToCharacterMap["&sup3"]="179",entityToCharacterMap["&acute"]="180",entityToCharacterMap["&micro"]="181",entityToCharacterMap["&para"]="182",entityToCharacterMap["&middot"]="183",entityToCharacterMap["&cedil"]="184",entityToCharacterMap["&sup1"]="185",entityToCharacterMap["&ordm"]="186",entityToCharacterMap["&raquo"]="187",entityToCharacterMap["&frac14"]="188",entityToCharacterMap["&frac12"]="189",entityToCharacterMap["&frac34"]="190",entityToCharacterMap["&iquest"]="191",entityToCharacterMap["&Agrave"]="192",entityToCharacterMap["&Aacute"]="193",entityToCharacterMap["&Acirc"]="194",entityToCharacterMap["&Atilde"]="195",entityToCharacterMap["&Auml"]="196",entityToCharacterMap["&Aring"]="197",entityToCharacterMap["&AElig"]="198",entityToCharacterMap["&Ccedil"]="199",entityToCharacterMap["&Egrave"]="200",entityToCharacterMap["&Eacute"]="201",entityToCharacterMap["&Ecirc"]="202",entityToCharacterMap["&Euml"]="203",entityToCharacterMap["&Igrave"]="204",entityToCharacterMap["&Iacute"]="205",entityToCharacterMap["&Icirc"]="206",entityToCharacterMap["&Iuml"]="207",entityToCharacterMap["&ETH"]="208",entityToCharacterMap["&Ntilde"]="209",entityToCharacterMap["&Ograve"]="210",entityToCharacterMap["&Oacute"]="211",entityToCharacterMap["&Ocirc"]="212",entityToCharacterMap["&Otilde"]="213",entityToCharacterMap["&Ouml"]="214",entityToCharacterMap["&times"]="215",entityToCharacterMap["&Oslash"]="216",entityToCharacterMap["&Ugrave"]="217",entityToCharacterMap["&Uacute"]="218",entityToCharacterMap["&Ucirc"]="219",entityToCharacterMap["&Uuml"]="220",entityToCharacterMap["&Yacute"]="221",entityToCharacterMap["&THORN"]="222",entityToCharacterMap["&szlig"]="223",entityToCharacterMap["&agrave"]="224",entityToCharacterMap["&aacute"]="225",entityToCharacterMap["&acirc"]="226",entityToCharacterMap["&atilde"]="227",entityToCharacterMap["&auml"]="228",entityToCharacterMap["&aring"]="229",entityToCharacterMap["&aelig"]="230",entityToCharacterMap["&ccedil"]="231",entityToCharacterMap["&egrave"]="232",entityToCharacterMap["&eacute"]="233",entityToCharacterMap["&ecirc"]="234",entityToCharacterMap["&euml"]="235",entityToCharacterMap["&igrave"]="236",entityToCharacterMap["&iacute"]="237",entityToCharacterMap["&icirc"]="238",entityToCharacterMap["&iuml"]="239",entityToCharacterMap["&eth"]="240",entityToCharacterMap["&ntilde"]="241",entityToCharacterMap["&ograve"]="242",entityToCharacterMap["&oacute"]="243",entityToCharacterMap["&ocirc"]="244",entityToCharacterMap["&otilde"]="245",entityToCharacterMap["&ouml"]="246",entityToCharacterMap["&divide"]="247",entityToCharacterMap["&oslash"]="248",entityToCharacterMap["&ugrave"]="249",entityToCharacterMap["&uacute"]="250",entityToCharacterMap["&ucirc"]="251",entityToCharacterMap["&uuml"]="252",entityToCharacterMap["&yacute"]="253",entityToCharacterMap["&thorn"]="254",entityToCharacterMap["&yuml"]="255",entityToCharacterMap["&OElig"]="338",entityToCharacterMap["&oelig"]="339",entityToCharacterMap["&Scaron"]="352",entityToCharacterMap["&scaron"]="353",entityToCharacterMap["&Yuml"]="376",entityToCharacterMap["&fnof"]="402",entityToCharacterMap["&circ"]="710",entityToCharacterMap["&tilde"]="732",entityToCharacterMap["&Alpha"]="913",entityToCharacterMap["&Beta"]="914",entityToCharacterMap["&Gamma"]="915",entityToCharacterMap["&Delta"]="916",entityToCharacterMap["&Epsilon"]="917",entityToCharacterMap["&Zeta"]="918",entityToCharacterMap["&Eta"]="919",entityToCharacterMap["&Theta"]="920",entityToCharacterMap["&Iota"]="921",entityToCharacterMap["&Kappa"]="922",entityToCharacterMap["&Lambda"]="923",entityToCharacterMap["&Mu"]="924",entityToCharacterMap["&Nu"]="925",entityToCharacterMap["&Xi"]="926",entityToCharacterMap["&Omicron"]="927",entityToCharacterMap["&Pi"]="928",entityToCharacterMap["&Rho"]="929",entityToCharacterMap["&Sigma"]="931",entityToCharacterMap["&Tau"]="932",entityToCharacterMap["&Upsilon"]="933",entityToCharacterMap["&Phi"]="934",entityToCharacterMap["&Chi"]="935",entityToCharacterMap["&Psi"]="936",entityToCharacterMap["&Omega"]="937",entityToCharacterMap["&alpha"]="945",entityToCharacterMap["&beta"]="946",entityToCharacterMap["&gamma"]="947",entityToCharacterMap["&delta"]="948",entityToCharacterMap["&epsilon"]="949",entityToCharacterMap["&zeta"]="950",entityToCharacterMap["&eta"]="951",entityToCharacterMap["&theta"]="952",entityToCharacterMap["&iota"]="953",entityToCharacterMap["&kappa"]="954",entityToCharacterMap["&lambda"]="955",entityToCharacterMap["&mu"]="956",entityToCharacterMap["&nu"]="957",entityToCharacterMap["&xi"]="958",entityToCharacterMap["&omicron"]="959",entityToCharacterMap["&pi"]="960",entityToCharacterMap["&rho"]="961",entityToCharacterMap["&sigmaf"]="962",entityToCharacterMap["&sigma"]="963",entityToCharacterMap["&tau"]="964",entityToCharacterMap["&upsilon"]="965",entityToCharacterMap["&phi"]="966",entityToCharacterMap["&chi"]="967",entityToCharacterMap["&psi"]="968",entityToCharacterMap["&omega"]="969",entityToCharacterMap["&thetasym"]="977",entityToCharacterMap["&upsih"]="978",entityToCharacterMap["&piv"]="982",entityToCharacterMap["&ensp"]="8194",entityToCharacterMap["&emsp"]="8195",entityToCharacterMap["&thinsp"]="8201",entityToCharacterMap["&zwnj"]="8204",entityToCharacterMap["&zwj"]="8205",entityToCharacterMap["&lrm"]="8206",entityToCharacterMap["&rlm"]="8207",entityToCharacterMap["&ndash"]="8211",entityToCharacterMap["&mdash"]="8212",entityToCharacterMap["&lsquo"]="8216",entityToCharacterMap["&rsquo"]="8217",entityToCharacterMap["&sbquo"]="8218",entityToCharacterMap["&ldquo"]="8220",entityToCharacterMap["&rdquo"]="8221",entityToCharacterMap["&bdquo"]="8222",entityToCharacterMap["&dagger"]="8224",entityToCharacterMap["&Dagger"]="8225",entityToCharacterMap["&bull"]="8226",entityToCharacterMap["&hellip"]="8230",entityToCharacterMap["&permil"]="8240",entityToCharacterMap["&prime"]="8242",entityToCharacterMap["&Prime"]="8243",entityToCharacterMap["&lsaquo"]="8249",entityToCharacterMap["&rsaquo"]="8250",entityToCharacterMap["&oline"]="8254",entityToCharacterMap["&frasl"]="8260",entityToCharacterMap["&euro"]="8364",entityToCharacterMap["&image"]="8365",entityToCharacterMap["&weierp"]="8472",entityToCharacterMap["&real"]="8476",entityToCharacterMap["&trade"]="8482",entityToCharacterMap["&alefsym"]="8501",entityToCharacterMap["&larr"]="8592",entityToCharacterMap["&uarr"]="8593",entityToCharacterMap["&rarr"]="8594",entityToCharacterMap["&darr"]="8595",entityToCharacterMap["&harr"]="8596",entityToCharacterMap["&crarr"]="8629",entityToCharacterMap["&lArr"]="8656",entityToCharacterMap["&uArr"]="8657",entityToCharacterMap["&rArr"]="8658",entityToCharacterMap["&dArr"]="8659",entityToCharacterMap["&hArr"]="8660",entityToCharacterMap["&forall"]="8704",entityToCharacterMap["&part"]="8706",entityToCharacterMap["&exist"]="8707",entityToCharacterMap["&empty"]="8709",entityToCharacterMap["&nabla"]="8711",entityToCharacterMap["&isin"]="8712",entityToCharacterMap["&notin"]="8713",entityToCharacterMap["&ni"]="8715",entityToCharacterMap["&prod"]="8719",entityToCharacterMap["&sum"]="8721",entityToCharacterMap["&minus"]="8722",entityToCharacterMap["&lowast"]="8727",entityToCharacterMap["&radic"]="8730",entityToCharacterMap["&prop"]="8733",entityToCharacterMap["&infin"]="8734",entityToCharacterMap["&ang"]="8736",entityToCharacterMap["&and"]="8743",entityToCharacterMap["&or"]="8744",entityToCharacterMap["&cap"]="8745",entityToCharacterMap["&cup"]="8746",entityToCharacterMap["&int"]="8747",entityToCharacterMap["&there4"]="8756",entityToCharacterMap["&sim"]="8764",entityToCharacterMap["&cong"]="8773",entityToCharacterMap["&asymp"]="8776",entityToCharacterMap["&ne"]="8800",entityToCharacterMap["&equiv"]="8801",entityToCharacterMap["&le"]="8804",entityToCharacterMap["&ge"]="8805",entityToCharacterMap["&sub"]="8834",entityToCharacterMap["&sup"]="8835",entityToCharacterMap["&nsub"]="8836",entityToCharacterMap["&sube"]="8838",entityToCharacterMap["&supe"]="8839",entityToCharacterMap["&oplus"]="8853",entityToCharacterMap["&otimes"]="8855",entityToCharacterMap["&perp"]="8869",entityToCharacterMap["&sdot"]="8901",entityToCharacterMap["&lceil"]="8968",entityToCharacterMap["&rceil"]="8969",entityToCharacterMap["&lfloor"]="8970",entityToCharacterMap["&rfloor"]="8971",entityToCharacterMap["&lang"]="9001",entityToCharacterMap["&rang"]="9002",entityToCharacterMap["&loz"]="9674",entityToCharacterMap["&spades"]="9824",entityToCharacterMap["&clubs"]="9827",entityToCharacterMap["&hearts"]="9829",entityToCharacterMap["&diams"]="9830";var characterToEntityMap=[];for(var entity in entityToCharacterMap)characterToEntityMap[entityToCharacterMap[entity]]=entity;$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.ZCodecForHTMLUnicode=function(){return new org.owasp.esapi.codecs.Codec,{encode:function(e,t){for(var r="",n=0;n<t.length;){var i=t.charAt(n);void 0!==String.prototype.codePointAt&&(i=t.codePointAt(n)),r+=this.encodeCharacter(e,i),n+=i>65535?2:1}return r},encodeCharacter:function(e,t){return t}}},org.owasp.esapi.codecs.ZCodecForHTMLUnicode.getHexForNonAlphanumeric=function(e,t){return e.charCodeAt(0)<256?org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(e):t.toString(16)},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.HTMLEntityCodec=function(){var e=new org.owasp.esapi.codecs.ZCodecForHTMLUnicode,t=function(e){var t=e.peek();return null==t?null:"x"==t||"X"==t?(e.next(),n(e)):r(e)},r=function(e){for(var t="";e.hasNext();){var r=e.peek();if(!r.match(/[0-9]/)){if(";"==r){e.next();break}break}t+=r,e.next()}try{return parseInt(t)}catch(e){return null}},n=function(e){for(var t="";e.hasNext();){var r=e.peek();if(!r.match(/[0-9A-Fa-f]/)){if(";"==r){e.next();break}break}t+=r,e.next()}try{return parseInt(t,16)}catch(e){return null}};return{encode:e.encode,decode:e.decode,encodeCharacter:function(e,t){var r=t;if(void 0!==String.fromCodePoint){r=String.fromCodePoint(t);if(e.contains(r))return r;var n=org.owasp.esapi.codecs.ZCodecForHTMLUnicode.getHexForNonAlphanumeric(r,t)}else{if(e.contains(r))return r;n=org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(t)}if(null==n)return r;if("\t"==r||"\n"==r||"\r"==r)return""+r;var i=r.charCodeAt(0);if(i<=31&&"\t"!=r&&"\n"!=r&&"\r"!=r||i>=127&&i<=159)return" ";var a=characterToEntityMap[i];return null!=a?a+";":"&#x"+n+";"},decodeCharacter:function(e){var r=e;r.mark();var n=r.next();if(null==n||"&"!=n)return r.reset(),null;var i=r.next();if(null==i)return r.reset(),null;if("#"==i){var a=t(r);if(null!=a)return a}else if(i.match(/[A-Za-z]/)&&(r.pushback(i),a=function(e){for(var t="";e.hasNext();){var r=e.peek();if(r.match(/[A-Za-z]/)){if(t+=r,e.next(),entityToCharacterMap.containsKey("&"+t)){e.peek(";")&&e.next();break}}else{if(";"!=r)break;e.next()}}return String.fromCharCode(entityToCharacterMap.getCaseInsensitive("&"+t))}(r),null!=a))return a;return r.reset(),null}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.JavascriptCodec=function(){return{encode:function(e,t){for(var r="",n=0;n<t.length;n++){var i=t.charAt(n);if(e.contains(i))r+=i;else if(null==org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(i))r+=i;else{var a=i.charCodeAt(0).toString(16);if(i.charCodeAt(0)<256){var o="00".substr(a.length);r+="\\x"+o+a.toUpperCase()}else r+="\\u"+(o="0000".substr(a.length))+a.toUpperCase()}}return r},decode:(new org.owasp.esapi.codecs.Codec).decode,decodeCharacter:function(e){e.mark();var t=e.next();if(null==t)return e.reset(),null;if("\\"!=t)return e.reset(),null;var r=e.next();if(null==r)return e.reset(),null;if("b"==r)return 8;if("t"==r)return 9;if("n"==r)return 10;if("v"==r)return 11;if("f"==r)return 12;if("r"==r)return 13;if('"'==r)return 34;if("'"==r)return 39;if("\\"==r)return 92;if("x"==r.toLowerCase()){o="";for(var n=0;n<2;n++){var i=e.nextHex();if(null==i)return input.reset(),null;o+=i}try{return a=parseInt(o,16),String.fromCharCode(a)}catch(t){return e.reset(),null}}else if("u"==r.toLowerCase()){for(o="",n=0;n<4;n++){if(null==(i=e.nextHex()))return input.reset(),null;o+=i}try{var a=parseInt(o,16);return String.fromCharCode(a)}catch(t){return e.reset(),null}}else if(e.isOctalDigit(r)){var o=r,s=e.next();if(e.isOctalDigit(s)){o+=s;var l=e.next();e.isOctalDigit(l)?o+=l:e.pushback(l)}else e.pushback(s);try{return a=parseInt(o,8),String.fromCharCode(a)}catch(t){return e.reset(),null}}return r}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.PercentCodec=function(){var e=new org.owasp.esapi.codecs.Codec,t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=function(e){var t="";if(e<-128||e>127)throw new IllegalArgumentException("b is not a byte (was "+e+")");return(e&=255)<16&&(t+="0"),t+e.toString(16).toUpperCase()};return{encode:e.encode,decode:e.decode,encodeCharacter:function(e,n){if(t.indexOf(n)>-1)return n;for(var i=org.owasp.esapi.codecs.UTF8.encode(n),a="",o=0;o<i.length;o++)a+="%"+r(i.charCodeAt(o));return a},decodeCharacter:function(e){e.mark();var t=e.next();if(null==t||"%"!=t)return e.reset(),null;for(var r="",n=0;n<2;n++){var i=e.nextHex();null!=i&&(r+=i)}if(2==r.length)try{var a=parseInt(r,16);return String.fromCharCode(a)}catch(e){}return e.reset(),null}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.PushbackString=function(e){var t=e,r="",n="",i=0,a=0;return{pushback:function(e){r=e},index:function(){return i},hasNext:function(){return null!=r||!(null==t||0==t.length||i>=t.length)},next:function(){if(null!=r){var e=r;return r=null,e}return null==t||0==t.length||i>=t.length?null:t.charAt(i++)},nextHex:function(){var e=this.next();return this.isHexDigit(e)?e:null},nextOctal:function(){var e=this.next();return this.isOctalDigit(e)?e:null},isHexDigit:function(e){return null!=e&&(e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F")},isOctalDigit:function(e){return null!=e&&e>="0"&&e<="7"},peek:function(e){return e?null!=r&&r==e||!(null==t||0==t.length||i>=t.length)&&t.charAt(i)==e:null!=r?r:null==t||0==t.length||i>=t.length?null:t.charAt(i)},mark:function(){n=r,a=i},reset:function(){r=n,i=a},remainder:function(){var e=t.substr(i);return null!=r&&(e=r+e),e}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.UTF8={encode:function(e){for(var t=e.replace(/\r\n/g,"\n"),r="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?r+=String.fromCharCode(i):i>127&&i<2048?(r+=String.fromCharCode(i>>6|192),r+=String.fromCharCode(63&i|128)):(r+=String.fromCharCode(i>>12|224),r+=String.fromCharCode(i>>6&63|128),r+=String.fromCharCode(63&i|128))}return r},decode:function(e){for(var t="",r=c=c1=c2=0;r<e.length;)(c=e.charCodeAt(r))<128?(t+=String.fromCharCode(c),r++):c>191&&c<224?(c2=e.charCodeAt(r+1),t+=String.fromCharCode((31&c)<<6|63&c2),r+=2):(c2=utftext.charCodeAt(r+1),c3=utftext.charCodeAt(r+2),string+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),r+=3);return t}},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.ArrayResourceBundle=function(sName,oLocale,aMessages,oParent){with(org.owasp.esapi.i18n)var _super=new ResourceBundle(sName,oLocale,oParent);var messages=aMessages;return{getParent:_super.getParent,getLocale:_super.getLocale,getName:_super.getName,getString:_super.getString,getMessage:function(e){return messages[e]}}},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.Locale=function(e,t,r){var n=e,i=t,a=r;return{getLanguage:function(){return n},getCountry:function(){return i},getVariant:function(){return a},toString:function(){return n+(i?"-"+i+(a?"-"+a:""):"")}}},org.owasp.esapi.i18n.Locale.US=new org.owasp.esapi.i18n.Locale("en","US"),org.owasp.esapi.i18n.Locale.GB=new org.owasp.esapi.i18n.Locale("en","GB"),org.owasp.esapi.i18n.Locale.getLocale=function(e){var t=e.split("-");return new org.owasp.esapi.i18n.Locale(t[0],t.length>1?t[1]:"",t.length>2?t.length[2]:"")},org.owasp.esapi.i18n.Locale.getDefault=function(){var e=(navigator.language?navigator.language:navigator.userLanguage?navigator.userLanguage:"en-US").split("-");return new org.owasp.esapi.i18n.Locale(e[0],e.length>1?e[1]:"",e.length>2?e.length[2]:"")},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.ObjectResourceBundle=function(e,t){var r=new org.owasp.esapi.i18n.ResourceBundle(e.name,org.owasp.esapi.i18n.Locale.getLocale(e.locale),t),n=e.messages;return{getParent:r.getParent,getLocale:r.getLocale,getName:r.getName,getString:r.getString,getMessage:function(e){return n[e]}}},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.ResourceBundle=function(e,t,r){var n=r,i=t,a=e;if(!a)throw new SyntaxError("Name required for implementations of org.owasp.esapi.i18n.ResourceBundle");if(!i)throw new SyntaxError("Locale required for implementations of org.owasp.esapi.i18n.ResourceBundle");return{getParent:function(){return n},getLocale:function(){return i},getName:function(){return a},getMessage:function(e){return e},getString:function(e,t){if(arguments.length<1)throw new IllegalArgumentException("No key passed to getString");var r=this.getMessage(e);if(!r)return n?n.getString(e,t):e;if(!r.match(/\{([A-Za-z]+)\}/)||!t)return r;for(var i="",a=0;;){var o=r.indexOf("{",a),s=r.indexOf("}",o);if(o<0){i+=r.substr(a,r.length-a);break}if(o>=0&&s<-1)throw new SyntaxError("Invalid Message - Unclosed Context Reference: "+r);i+=r.substring(a,o);var l=r.substring(o+1,s);i+=t[l]?t[l]:r.substring(o,s+1),a=s+1}return i}}},org.owasp.esapi.i18n.ResourceBundle.getResourceBundle=function(sResource,oLocale){var classname=sResource+"_"+oLocale.toString().replace("-","_");with(org.owasp.esapi.i18n)return ResourceBundle[classname]instanceof Object?ResourceBundle[classname]:new ResourceBundle[classname]},$namespace("org.owasp.esapi.net"),org.owasp.esapi.net.Cookie=function(e,t){var r,n,i,a,o,s,l,c,d=$ESAPI.resourceBundle();if(!function(e){for(var t=0,r=e.length;t<r;t++){var n=e.charCodeAt(t),i=e.charAt(t);if(n<32||n>=127||-1!=",; ".indexOf(i))return!1}return!0}(e)||"comment"==e.toLowerCase()||"discard"==e.toLowerCase()||"domain"==e.toLowerCase()||"expires"==e.toLowerCase()||"max-age"==e.toLowerCase()||"path"==e.toLowerCase()||"secure"==e.toLowerCase()||"version"==e.toLowerCase()||"$"==e.charAt(0)){var u=d.getString("Cookie.Name",{name:e});throw new IllegalArgumentException(u)}return r=e,n=t,{setComment:function(e){i=e},getComment:function(){return i},setDomain:function(e){a=e.toLowerCase()},getDomain:function(){return a},setMaxAge:function(e){o=e},getMaxAge:function(){return o},setPath:function(e){s=e},getPath:function(){return s},setSecure:function(e){l=e},getSecure:function(){return l},getName:function(){return r},setValue:function(e){n=e},getValue:function(){return n},setVersion:function(e){if(e<0||e>1)throw new IllegalArgumentException(d.getString("Cookie.Version",{version:e}));c=e},getVersion:function(){return c}}},$namespace("org.owasp.esapi.reference.encoding"),org.owasp.esapi.reference.encoding.DefaultEncoder=function(e){var t=[],r=new org.owasp.esapi.codecs.HTMLEntityCodec,n=new org.owasp.esapi.codecs.JavascriptCodec,i=new org.owasp.esapi.codecs.CSSCodec,a=new org.owasp.esapi.codecs.PercentCodec;e?t=e:(t.push(r),t.push(n),t.push(i),t.push(a));var o=new Array(",",".","-","_"," "),s=new Array(",",".","-","_"),l=new Array,c=new Array(",",".","_");return{cananicalize:function(e,r){if(!e)return null;for(var n=e,i=null,a=1,o=0,s=!1;!s;)s=!0,t.each((function(e){n!=(n=e.decode(n))&&(null!=i&&i!=e&&a++,i=e,s&&o++,s=!1)}));if(o>=2&&a>1){if(r)throw new org.owasp.esapi.IntrusionException("Input validation failure","Multiple ("+o+"x) and mixed encoding ("+a+"x) detected in "+e)}else if(o>=2){if(r)throw new org.owasp.esapi.IntrusionException("Input validation failure","Multiple ("+o+"x) encoding detected in "+e)}else if(a>1&&r)throw new org.owasp.esapi.IntrusionException("Input validation failure","Mixed ("+a+"x) encoding detected in "+e);return n},normalize:function(e){return e.replace(/[^\x00-\x7F]/g,"")},encodeForHTML:function(e){return null==e?null:r.encode(o,e)},decodeForHTML:function(e){return null==e?null:r.decode(e)},encodeForHTMLAttribute:function(e){return null==e?null:r.encode(s,e)},encodeForCSS:function(e){return null==e?null:i.encode(l,e)},encodeForJavaScript:function(e){return null==e?null:n.encode(c,e)},encodeForJavascript:this.encodeForJavaScript,encodeForURL:function(e){var t=null==e?null:escape(e);return null!=t?t.replace(/\*/g,"%2a").replace(/@/g,"%40").replace(/-/g,"%2d").replace(/_/g,"%5f").replace(/\+/g,"%2b").replace(/\./g,"%2e").replace(/\//g,"%2f"):null},decodeFromURL:function(e){return null==e?null:unescape(e)},encodeForBase64:function(e){return e?org.owasp.esapi.codecs.Base64.encode(e):null},decodeFromBase64:function(e){return e?org.owasp.esapi.codecs.Base64.decode(e):null}}},$namespace("org.owasp.esapi.reference.logging"),org.owasp.esapi.reference.logging.Log4JSLogFactory=function(){var e=Array(),t=function(e){var t=null,r=e||null,n=Log4js.Level,i=!1,a=!1,o=!1,s=$ESAPI.encoder().encodeForHTML;t=Log4js.getLogger(r);return{setLevel:function(e){try{t.setLevel(function(e){var t=org.owasp.esapi.Logger;switch(e){case t.OFF:return Log4js.Level.OFF;case t.FATAL:return Log4js.Level.FATAL;case t.ERROR:return Log4js.Level.ERROR;case t.WARNING:return Log4js.Level.WARN;case t.INFO:return Log4js.Level.INFO;case t.DEBUG:return Log4js.Level.DEBUG;case t.TRACE:return Log4js.Level.TRACE;case t.ALL:return Log4js.Level.ALL}}(e))}catch(e){this.error(org.owasp.esapi.Logger.SECURITY_FAILURE,"",e)}},trace:function(e,t,r){this.log(n.TRACE,e,t,r)},debug:function(e,t,r){this.log(n.DEBUG,e,t,r)},info:function(e,t,r){this.log(n.INFO,e,t,r)},warning:function(e,t,r){this.log(n.WARN,e,t,r)},error:function(e,t,r){this.log(n.ERROR,e,t,r)},fatal:function(e,t,r){this.log(n.FATAL,e,t,r)},log:function(e,r,l,c){switch(e){case n.TRACE:if(!t.isTraceEnabled())return;break;case n.DEBUG:if(!t.isDebugEnabled())return;break;case n.INFO:if(!t.isInfoEnabled())return;break;case n.WARNING:if(!t.isWarnEnabled())return;break;case n.ERROR:if(!t.isErrorEnabled())return;break;case n.FATAL:if(!t.isFatalEnabled())return}l||(l="");var d=(l="["+r.toString()+"] - "+l).replace("\n","_").replace("\r","_");o&&((d=s(d))!=l&&(d+=" [Encoded]"));var u=(i?window.location.href:"")+(a?"/"+$ESAPI.properties.application.Name:"");t.log(e,(""!=u?"["+u+"] ":"")+d,c)},addAppender:function(e){t.addAppender(e)},isLogUrl:function(){return i},setLogUrl:function(e){i=e},isLogApplicationName:function(){return a},setLogApplicationName:function(e){a=e},isEncodingRequired:function(){return o},setEncodingRequired:function(e){o=e},setEncodingFunction:function(e){s=e},isDebugEnabled:function(){return t.isDebugEnabled()},isErrorEnabled:function(){return t.isErrorEnabled()},isFatalEnabled:function(){return t.isFatalEnabled()},isInfoEnabled:function(){return t.isInfoEnabled()},isTraceEnabled:function(){return t.isTraceEnabled()},isWarningEnabled:function(){return t.isWarnEnabled()}}};return{getLogger:function(r){var n="string"==typeof r?r:r.constructor.toString(),i=e[n];if(!i){i=new t(n);var a=function(e){var t=$ESAPI.properties.logging;return t[e]&&(t=t[e]),t}(r);i.setLevel(a.Level),i.setLogUrl(a.LogUrl),i.setLogApplicationName(a.LogApplicationName),i.setEncodingRequired(a.EncodingRequired),a.EncodingFunction&&i.setEncodingFunction(a.EncodingFunction),a.Appenders.each((function(e){a.Layout&&e.setLayout(a.Layout),i.addAppender(e)})),e[n]=i}return i}}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.BaseValidationRule=function(e,t,r){var n,i=$ESAPI.logger("Validation"),a=org.owasp.esapi.Logger.EventType,o=e,s=t||$ESAPI.encoder(),l=!1,c=org.owasp.esapi.i18n.ResourceBundle,d=r||$ESAPI.locale();return $ESAPI.properties.validation.ResourceBundle&&(n=c.getResourceBundle($ESAPI.properties.validation.ResourceBundle,d)),n||(n=$ESAPI.resourceBundle(),i.info(a.EVENT_FAILURE,"No Validation ResourceBundle - Defaulting to "+n.getName()+"("+n.getLocale().toString()+")")),i.info(a.EVENT_SUCCESS,"Validation Rule Initialized with ResourceBundle: "+n.getName()),{setAllowNull:function(e){l=e},isAllowNull:function(){return l},getTypeName:function(){return o},setTypeName:function(e){o=e},setEncoder:function(e){s=e},getEncoder:function(){return s},assertValid:function(e,t){this.getValid(e,t)},getValid:function(e,t,r){var n=null;try{n=this.getValidInput(e,t)}catch(r){return this.sanitize(e,t)}return n},getValidInput:function(e,t){return t},getSafe:function(e,t){var r=null;try{r=this.getValidInput(e,t)}catch(r){return this.sanitize(e,t)}return r},sanitize:function(e,t){return t},isValid:function(e,t){var r=!1;try{this.getValidInput(e,t),r=!0}catch(e){return!1}return r},whitelist:function(e,t){for(var r="",n=0;n<e.length;n++){var i=e.charAt(n);t.contains(i)&&(r+=i)}return r},getUserMessage:function(e,t,r){return this.getMessage(e+".Usr",t+".Usr",r)},getLogMessage:function(e,t,r){return this.getMessage(e+".Log",t+".Log",r)},getMessage:function(e,t,r){return n.getString(e,r)?n.getString(e,r):n.getString(t,r)},validationException:function(e,t,r,n){throw new org.owasp.esapi.reference.validation.ValidationException(this.getUserMessage(e+"."+r,t+"."+r,n),this.getLogMessage(e+"."+r,t+"."+r,n),e)}}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.CreditCardValidationRule=function(e,t,r){var n=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,r),i="CreditCard",a=19;ccRule=function(){var e=new RegExp($ESAPI.properties.validation.CreditCard),t=new org.owasp.esapi.reference.validation.StringValidationRule("ccrule",n.getEncoder(),r,e);return t.setMaxLength(a),t.setAllowNull(!1),t}();return{getMaxCardLength:function(){return a},setMaxCardLength:function(e){a=e},setAllowNull:n.setAllowNull,isAllowNull:n.isAllowNull,getTypeName:n.getTypeName,setTypeName:n.setTypeName,setEncoder:n.setEncoder,getEncoder:n.getEncoder,assertValid:n.assertValid,getValid:n.getValid,getValidInput:function(e,t){if(!t||""==t.trim()){if(this.isAllowNull())return null;n.validationException(e,i,"Required",{context:e,input:t})}var r=undefined.getValid(e,t);return function(e){for(var t,r="",n=0;o<e.length;n++)(t=e.charAt(n)).match(/[0-9]/)&&(r+=t);for(var i=0,a=0,s=0,l=!1,c=r.length-1;c>=0;c--)a=parseInt(r.substring(c,n+1)),l?(s=2*a)>9&&(s-=9):s=a,i+=s,l=!l;return i%10==0}(r)||n.validationException(e,i,"Invalid",{context:e,input:t}),r},getSafe:n.getSafe,sanitize:function(e,t){return this.whitelist(t,org.owasp.esapi.EncoderConstants.CHAR_DIGITS)},isValid:n.isValid,whitelist:n.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.DateValidationRule=function(e,t,r){var n=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,r),i="Date",a=DateFormat.getDateInstance(),o=function(e,t){if(!e||""==e.trim()){if(n.isAllowNull())return null;n.validationException(e,i,"Required",{context:e,input:t,format:a})}var r=n.getEncoder().cananicalize(t);try{return a.parse(r)}catch(r){n.validationException(e,i,"Invalid",{context:e,input:t,format:a})}};return{setDateFormat:function(e){if(!e)throw new IllegalArgumentException("DateValidationRule.setDateFormat requires a non-null DateFormat");a=e},setAllowNull:n.setAllowNull,isAllowNull:n.isAllowNull,getTypeName:n.getTypeName,setTypeName:n.setTypeName,setEncoder:n.setEncoder,getEncoder:n.getEncoder,assertValid:n.assertValid,getValid:n.getValid,getValidInput:function(e,t){return o(e,t)},getSafe:n.getSafe,sanitize:function(e,t){var r=new Date(0);try{r=o(e,t)}catch(e){}return r},isValid:n.isValid,whitelist:n.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.DefaultValidator=function(e,t){var r=Array(),n=e||$ESAPI.encoder(),i=t||org.owasp.esapi.i18n.Locale.getDefault(),a=org.owasp.esapi.reference.validation;return{addRule:function(e){r[e.getName()]=e},getRule:function(e){return r[e]},isValidInput:function(e,t,r,n,i){try{return this.getValidInput(e,t,r,n,i),!0}catch(e){return!1}},getValidInput:function(e,t,r,a,o,s){var l=new org.owasp.esapi.reference.validation.StringValidationRule(r,n,i),c=new RegExp($ESAPI.properties.validation[r]);if(!(c&&c instanceof RegExp))throw new IllegalArgumentException("Invalid Type: "+r+" not found.");l.addWhitelistPattern(c),l.setMaxLength(a),l.setAllowNull(o);try{return l.getValid(e,t)}catch(t){throw t instanceof c.ValidationErrorList&&s&&s.addError(e,t),t}},isValidDate:function(e,t,r,n){try{return this.getValidDate(e,t,r,n),!0}catch(e){return!1}},getValidDate:function(e,t,r,o,s){var l=new a.DateValidationRule(e,n,i);l.setAllowNull(o),l.setDateFormat(r);try{return l.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&s&&s.addError(e,t),t}},getValidCreditCard:function(e,t,r,o){var s=new a.CreditCardValidationRule(e,n,i);s.setAllowNull(r);try{return s.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&o&&o.addError(e,t),t}},isValidCreditCard:function(e,t,r){try{return this.getValidCreditCard(e,t,r),!0}catch(e){return!1}},getValidNumber:function(e,t,r,o,s,l){var c=new a.NumberValidationRule(e,n,i,o,s);c.setAllowNull(r);try{return c.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&l&&l.addError(e,t),t}},isValidNumber:function(e,t,r,n,i){try{return this.getValidNumber(e,t,r,n,i),!0}catch(e){return!1}},getValidInteger:function(e,t,r,o,s,l){var c=new a.IntegerValidationRule(e,n,i,o,s);c.setAllowNull(r);try{return c.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&l&&l.addError(e,t),t}},isValidInteger:function(e,t,r,n,i){try{return this.getValidInteger(e,t,r,n,i),!0}catch(e){return!1}}}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.IntegerValidationRule=function(e,t,r,n,i){var a=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,r),o="Integer",s=n||Number.MIN_VALUE,l=i||Number.MAX_VALUE;if(s>=l)throw new IllegalArgumentException("minValue must be less than maxValue");var c=function(e,t){if(!t||""==t.trim()){if(a.allowNull())return null;a.validationException(e,o,"Required",{context:e,input:t,minValue:s,maxValue:l})}var r=a.getEncoder().cananicalize(t),n=parseInt(r);return"NaN"==n&&a.validationException(e,o,"NaN",{context:e,input:t,minValue:s,maxValue:l}),n<s&&a.validationException(e,o,"MinValue",{context:e,input:t,minValue:s,maxValue:l}),n>l&&a.validationException(e,o,"MaxValue",{context:e,input:t,minValue:s,maxValue:l}),n};return{setMinValue:function(e){s=e},getMinValue:function(){return s},setMaxValue:function(e){l=e},getMaxValue:function(){return l},setAllowNull:a.setAllowNull,isAllowNull:a.isAllowNull,getTypeName:a.getTypeName,setTypeName:a.setTypeName,setEncoder:a.setEncoder,getEncoder:a.getEncoder,assertValid:a.assertValid,getValid:a.getValid,getValidInput:function(e,t){return c(e,t)},getSafe:a.getSafe,sanitize:function(e,t){var r=0;try{r=c(e,t)}catch(e){}return r},isValid:a.isValid,whitelist:a.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.NumberValidationRule=function(e,t,r,n,i){var a=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,r),o="Number",s=n||Number.MIN_VALUE,l=i||Number.MAX_VALUE;if(s>=l)throw new IllegalArgumentException("MinValue must be less that MaxValue");var c=function(e,t){if(!t||""==t.trim()){if(a.isAllowNull())return null;a.validationException(e,o,"Required",{context:e,input:t,minValue:s,maxValue:l})}var r=a.getEncoder().cananicalize(t),n=0;try{n=parseFloat(r)}catch(r){a.validationException(e,o,"Invalid",{context:e,input:t,minValue:s,maxValue:l})}return"NaN"==n&&a.validationException(e,o,"NaN",{context:e,input:t,minValue:s,maxValue:l}),n<s&&a.validationException(e,o,"MinValue",{context:e,input:t,minValue:s,maxValue:l}),n>l&&a.validationException(e,o,"MaxValue",{context:e,input:t,minValue:s,maxValue:l}),n};return{setMinValue:function(e){s=e},getMinValue:function(){return s},setMaxValue:function(e){l=e},getMaxValue:function(){return l},setAllowNull:a.setAllowNull,isAllowNull:a.isAllowNull,getTypeName:a.getTypeName,setTypeName:a.setTypeName,setEncoder:a.setEncoder,getEncoder:a.getEncoder,assertValid:a.assertValid,getValid:a.getValid,getValidInput:function(e,t){return c(e,t)},getSafe:a.getSafe,sanitize:function(e,t){var r=0;try{r=c(e,t)}catch(e){}return r},isValid:a.isValid,whitelist:a.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.StringValidationRule=function(e,t,r,n){var i=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,r),a="String",o=Array(),s=Array(),l=0,c=Number.MAX_VALUE,d=!0;if(n)if(n instanceof String)o.push(new RegExp(n));else{if(!(n instanceof RegExp))throw new IllegalArgumentException("sWhiteListPattern must be a string containing RegExp or a RegExp Object");o.push(n)}var u=function(e,t,r){o.each((function(n){t.match(n)&&i.validationException(e,a,"Whitelist",{context:e,input:t,orig:r,pattern:n.toString(),minLength:l,maxLength:c,validateInputAndCanonical:d})}))},m=function(e,t,r){s.each((function(n){t.match(n)&&i.validationException(e,a,"Blacklist",{context:e,input:t,orig:r,pattern:n.toString(),minLength:l,maxLength:c,validateInputAndCanonical:d})}))},p=function(e,t,r){return t.length<l&&i.validationException(e,a,"MinLength",{context:e,input:t,orig:r,minLength:l,maxLength:c,validateInputAndCanonical:d}),t.length>c&&i.validationException(e,a,"MaxLength",{context:e,input:t,orig:r,minLength:l,maxLength:c,validateInputAndCanonical:d}),t},g=function(e,t,r){if(!t||""==t.trim()){if(i.isAllowNull())return null;i.validationException(e,a,"Required",{context:e,input:t,orig:r,minLength:l,maxLength:c,validateInputAndCanonical:d})}};return{addWhitelistPattern:function(e){if(e instanceof String)o.push(new RegExp(e));else{if(!(e instanceof RegExp))throw new IllegalArgumentException("p must be a string containing RegExp or a RegExp Object");o.push(e)}},addBlacklistPattern:function(e){if(e instanceof String)s.push(new RegExp(e));else{if(!(e instanceof RegExp))throw new IllegalArgumentException("p must be a string containing RegExp or a RegExp Object");s.push(e)}},setMinLength:function(e){l=e},getMinLength:function(){return l},setMaxLength:function(e){c=e},getMaxLength:function(){return c},setValidateInputAndCanonical:function(e){d=e},isValidateInputAndCanonical:function(){return d},setAllowNull:i.setAllowNull,isAllowNull:i.isAllowNull,getTypeName:i.getTypeName,setTypeName:i.setTypeName,setEncoder:i.setEncoder,getEncoder:i.getEncoder,assertValid:i.assertValid,getValid:i.getValid,getValidInput:function(e,t){var r=null;return null==g(e,t)?null:(d&&(p(e,t),u(e,t),m(e,t)),r=this.getEncoder().cananicalize(t),null==g(e,r,t)?null:(p(e,r,t),u(e,r,t),m(e,r,t),r))},getSafe:i.getSafe,sanitize:function(e,t){return this.whitelist(t,org.owasp.esapi.EncoderConstants.CHAR_ALNUM)},isValid:i.isValid,whitelist:i.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.ValidationException=function(e,t){var r,n;arguments[2]&&arguments[2]instanceof Exception?(r=arguments[2],arguments[3]&&arguments[3]instanceof String&&(n=arguments[3])):arguments[2]&&arguments[2]instanceof String&&(n=arguments[2]);var i=new org.owasp.esapi.EnterpriseSecurityException(e,t,r);return{setContext:function(e){n=e},getContext:function(){return n},getMessage:i.getMessage,getUserMessage:i.getMessage,getLogMessage:i.getLogMessage,getStackTrace:i.getStackTrace,printStackTrace:i.printStackTrace}};var ESAPI_Standard_en_US={name:"ESAPI Standard Messages - US English",locale:"en-US",messages:{Test:"This is test #{testnumber}","CreditCard.Required.Usr":"{context}: Input credit card required","CreditCard.Required.Log":"Input credit card required: context={context}, input={input}","CreditCard.Invalid.Usr":"{context}: Invalid credit card input","CreditCard.Invalid.Log":"Invalid credit card input: context={context}, input={input}","Date.Required.Usr":"{context}: Input date required in {format} format","Date.Required.Log":"Date required: context={context}, input={input}, format={format}","Date.Invalid.Usr":"{context}: Invalid date, please use {format} format","Date.Invalid.Log":"Invalid date: context={context}, input={input}, format={format}","Integer.Required.Usr":"{context}: Input number required","Integer.Required.Log":"Input number required: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Integer.NaN.Usr":"{context}: Invalid number","Integer.NaN.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Integer.MinValue.Usr":"{context}: Invalid number - Must be greater than {minValue}","Integer.MinValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Integer.MaxValue.Usr":"{context}: Invalid number - Must be less than {maxValue}","Integer.MaxValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.Required.Usr":"{context}: Input number required","Number.Required.Log":"Input number required: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.NaN.Usr":"{context}: Invalid number","Number.NaN.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.MinValue.Usr":"{context}: Invalid number - Must be greater than {minValue}","Number.MinValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.MaxValue.Usr":"{context}: Invalid number - Must be less than {maxValue}","Number.MaxValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","String.Required.Usr":"{context}: Input required","String.Required.Log":"Input required: context={context}, input={input}, original={orig}","String.Whitelist.Usr":"{context}: Invalid input - Conform to regex {pattern}","String.Whitelist.Log":"Invalid input - Whitelist validation failed: context={context}, input={input}, original={orig}, pattern={pattern}","String.Blacklist.Usr":"{context}: Invalid input - Dangerous input matching {pattern} detected","String.Blacklist.Log":"Invalid input - Blacklist validation failed: context={context}, input={input}, original={orig}, pattern={pattern}","String.MinLength.Usr":"{context}: Invalid input - Minimum length is {minLength}","String.MinLength.Log":"Invalid input - Too short: context={context}, input={input}, original={orig}, minLength={minLength}","String.MaxLength.Usr":"{context}: Invalid input - Maximum length is {maxLength}","String.MaxLength.Log":"Invalid input - Too long: context={context}, input={input}, original={orig}, maxLength={maxLength}","HTTPUtilities.Cookie.Protocol":"Cookies disallowed on non http[s] requests. Current protocol: {protocol}","HTTPUtilities.Cookie.UnsafeData":"Attempt to add unsafe data to cookie (skip mode) - Cookie: {name}={value}","HTTPUtilities.Cookie.CantKill":"Unable to kill cookie named {name}","Cookie.Name":'Cookie name "{name}" is a reserved token',"Cookie.Version":'Cookie version "{version}" is not a valid version. Version must be 0 or 1.'}};$namespace("Base.esapi.properties"),Base.esapi.properties={application:{Name:"ESAPI4JS Base Application"},httputilities:{cookies:{ForceSecure:!0}},logging:{Implementation:org.owasp.esapi.reference.logging.Log4JSLogFactory,Level:org.owasp.esapi.Logger.ERROR,Appenders:[],LogUrl:!1,LogApplicationName:!1,EncodingRequired:!0},encoder:{Implementation:org.owasp.esapi.reference.encoding.DefaultEncoder,AllowMultipleEncoding:!1},localization:{StandardResourceBundle:ESAPI_Standard_en_US,DefaultLocale:"en-US"},validation:{Implementation:org.owasp.esapi.reference.validation.DefaultValidator,AccountName:"^[a-zA-Z0-9]{3,20}$",SafeString:"[a-zA-Z0-9\\-_+]*",Email:"^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[a-zA-Z]{2,4}$",IPAddress:"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",URL:"^(ht|f)tp(s?)\\:\\/\\/[0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*(:(0-9)*)*(\\/?)([a-zA-Z0-9\\-\\.\\?\\,\\:\\'\\/\\\\\\+=&amp;%\\$#_]*)?$",CreditCard:"^(\\d{4}[- ]?){3}\\d{4}$",SSN:"^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$",HttpScheme:"^(http|https)$",HttpServerName:"^[a-zA-Z0-9_.\\-]*$",HttpParameterName:"^[a-zA-Z0-9_]{1,32}$",HttpParameterValue:"^[a-zA-Z0-9.\\-\\/+=_ ]*$",HttpCookieName:"^[a-zA-Z0-9\\-_]{1,32}$",HttpCookieValue:"^[a-zA-Z0-9\\-\\/+=_ ]*$"}};