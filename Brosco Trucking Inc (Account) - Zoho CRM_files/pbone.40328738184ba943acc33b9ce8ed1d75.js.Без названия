var ZPB=ZPB||{};ZPB=function(){var e=void 0,t=void 0,n=void 0,i=void 0,a=void 0,o=["zoho.com","zoho.com.au","zoho.com.cn","zoho.in","zoho.eu","zoho.jp","localzoho.com","zoho.uk","zohocloud.ca","zoho.sa"],r=["zcrm","newcrmplus"],s=["SDPOnDemand"];Object.freeze(o),Object.freeze(r),Object.freeze(["ZohoCRM","ZohoBigin","ZohoRecruit","VirtualOffice","ZohoCliq","ZohoSign","ZohoProjects","ZohoBooks","ZohoInvoice","ZohoSprints","ZohoCampaigns","ZohoReports"]),Object.freeze(s);var l="cross",c=null,d=!1,p=null,u=!1,m=[],g={},b=!1,y=!1,v=!1,f=!1,h=["ZohoCRM","ZohoRecruit","Solution","VCRM"],B={integEnabled:null,missedCallEnabled:!1,isEnabled:function(){return B.integEnabled},isInbuiltMissedCallEnabled:function(){return B.missedCallEnabled},isMissedCallEnabled:function(){return B.missedCallEnabled}};var P={callAllowed:null,overrideCRMC2D:!1,isEnabled:function(){return P.callAllowed},trigger:function(e,i,a,o,r,s){var l={};"object"==typeof e?l=e:(l.number=e,l.module=i,l.recordid=a,l.callbackparam=o,l.name=r,l.companyname=s),l.action="clicktodial",u?(l.serviceName=n,l.serviceID=t,parent.postMessage(l,_())):T("zpbsdk",l)}},k={currentcallsarray:[],setCurrentCallDetails:function(e){k.currentcallsarray=e},getCurrentCallDetails:function(){return k.currentcallsarray}};function D(){return statusJson={has_access:y,preference_option:b,currentstatus:g,statuslist:m}}function z(){if(null!==PB.getPhoneBridgeContainer()){if(!document.getElementById("zpbstatusicon")){var e=PB.getPhoneBridgeContainer();PB.serviceData.zpbContainerId&&(e.className="",e.style.padding="0px");var t=document.createElement("div");t.setAttribute("id","zpbdialpadicon"),t.style.display="none",t.style.padding="5px 8px",t.style.borderTop="1px solid #c0c6cc",t.style.verticalAlign="top";var n=document.createElement("span");n.setAttribute("class","zpbdialpadInnericon"),n.style.height="16px",n.style.width="14px",n.style.display="inline-block",n.setAttribute("class","pbDialerIco"),n.style.maskImage="url("+PB.cdnUrl+"images/footer/DialerIcon.svg)",n.style.maskRepeat="no-repeat",n.style.backgroundColor="#313949",t.appendChild(n),e.appendChild(t),t.addEventListener("click",(function(){ZPB.toggleCTDialpad()}));var a=document.createElement("div");a.setAttribute("id","zpbstatusicon"),a.style.display="none",a.style.padding="3px 5px",a.style.borderLeft="1px solid #ddd",a.style.borderTop="1px solid #c0c6cc";var o=document.createElement("span");o.style.height="22px",o.style.width="35px",o.style.display="inline-block",o.setAttribute("class","pbSettingIco"),o.style.maskImage="url("+PB.cdnUrl+"images/footer/SettingsIcon.svg)",o.style.maskRepeat="no-repeat",o.style.backgroundColor="#313949",a.appendChild(o),e.appendChild(a),a.addEventListener("click",(function(){ZPB.showPreference()}))}}else if(PB.serviceData.zpbContainerId)setTimeout(z,1e3);else if("CRMPlus"===i||"VCRM"===PB.serviceData.serviceName){var r=document.createElement("div");r.id="wmsphonebridge",r.classList=["wms_phonebridgecontainer"];var s=document.getElementById("wms_notebook_icon"),l=document.getElementById("wmsglobalsearch");if(s)s.insertAdjacentElement("afterend",r);else if(l)l.insertAdjacentElement("afterend",r);else{var c=document.getElementById("wmsstatusbar");c&&c.insertAdjacentElement("beforebegin",r)}setTimeout(z,1e3)}}function I(e){if(null!==PB.getPhoneBridgeContainer()&&!document.getElementById("zpbwidgeticon")){var t=PB.getPhoneBridgeContainer(),n=document.createElement("div");n.setAttribute("id","zpbwidgeticon"),n.style.display="none",n.style.padding="3px 5px",n.style.borderLeft="1px solid #ddd";var i=document.createElement("span");i.style.height="22px",i.style.width="35px",i.style.display="inline-block",e=function(e){var t="",n=!1;if(e){if(!PB.imgurl){var i=new URL(PB.jsurl);i.host=i.host.replace("js","img"),i.pathname=i.pathname.replace("javascript","images"),PB.imgurl=i.href}t=-1===(t=(n="object"==typeof e)?JSON.stringify(e):e).indexOf(PB.imgurl)?t.replace("{static_img_path}",PB.imgurl):t}return n?JSON.parse(t):t}(e=e||{}),Object.assign(i.style,e),n.appendChild(i),t.appendChild(n),n.addEventListener("click",(function(){ZPB.showWidget()}))}}function w(){if(null!==PB.getPhoneBridgeContainer()){var e=PB.getPhoneBridgeContainer();"hidden"===e.style.visibility&&(e.style.visibility=null),e.style.display="block"}}function C(e){var t=document.getElementById("zpbdialpadicon");null!==PB.getPhoneBridgeContainer()&&null!==t?e.showCTDIcon&&(e.currentStatus&&("Online"===e.currentStatus.statuskey||"Busy"===e.currentStatus.statuskey)||"online"===e.userStatus||e.isLoggedIn)?(w(),t.style.display="inline-block",v=!0):(t.style.display="none",v=!0):(PB.serviceData.zpbContainerId||"CRMPlus"===i||"VCRM"===PB.serviceData.serviceName)&&setTimeout(C,2e3,e)}function x(e){var t=document.getElementById("zpbstatusicon");null!==PB.getPhoneBridgeContainer()&&null!==t?(w(),t.style.display="inline-block",e.currentStatus&&e.currentStatus.statuskey&&(t.title=e.currentStatus.label),f=!0):(PB.serviceData.zpbContainerId||"CRMPlus"===i||"VCRM"===PB.serviceData.serviceName)&&setTimeout(x,2e3,e)}function E(e){null!==PB.getPhoneBridgeContainer()?(I(e.widgetIcon),w(),document.getElementById("zpbwidgeticon").style.display="inline-block"):(PB.serviceData.zpbContainerId||"CRMPlus"===i)&&setTimeout(E,2e3,e)}function A(){var s;if(s=document.domain,-1!=r.indexOf(s.substr(0,s.indexOf(".")))&&-1!=o.indexOf(s.substr(s.indexOf(".")+1,s.length))&&"CRMPlus"===i&&(u=!1),document.getElementById("zpbsdk")||u)if(u){if(u){window.callbackZPB&&callbackZPB();g={serviceID:t,serviceName:n,bundleService:i,bundleOrgId:a,action:"setclicktodial"};parent.postMessage(g,_())}}else{(p=document.getElementById("zpbsdk")).src=p.src}else{var p=document.createElement("iframe");if("SDPOnPremise"===PB.serviceData.serviceName)p.setAttribute("src",e+"/phonebridge/viewcomponent/fetchpopup?frameorigin="+document.location.origin+"&serviceName="+n+"&serviceID="+t+"&bundleService="+i+"&bundleOrgId="+a+"&accesstoken="+PB.accesstoken);else if(PB.isVerticalService){var m="";PB.serviceData.zaid&&(m="zaid_"+PB.serviceData.zaid),PB.serviceData.pbzaaid&&(m="zaaid_"+PB.serviceData.pbzaaid+"_"+m),p.setAttribute("src",e+"/phonebridge/viewcomponent/popup/"+m+"?frameorigin="+document.location.origin+"&serviceName="+n+"&serviceID="+t)}else i&&""!==i?p.setAttribute("src",e+"/phonebridge/viewcomponent/popup?frameorigin="+document.location.origin+"&serviceName="+n+"&serviceID="+t+"&bundleService="+i+"&bundleOrgId="+a):p.setAttribute("src",e+"/phonebridge/viewcomponent/popup?frameorigin="+document.location.origin+"&serviceName="+n+"&serviceID="+t+"&darkmode="+PB.darkmode);p.setAttribute("allow","microphone"),p.setAttribute("id","zpbsdk"),p.setAttribute("name","zpbsdk"),p.style.cssText="color-scheme:none; border-width:0px; position:fixed; z-index:400; bottom:26px; right:0px; width:0px; height:0px;",p.style.visibility="hidden";var g={serviceID:t,serviceName:n,bundleService:i,bundleOrgId:a,doNotDisturb:u,clickToDial:l,isDesktopApp:d,customStyle:c,accessToken:PB.accesstoken,pbzaaid:PB.serviceData.pbzaaid,action:"documentReady",orgtype:PB.integRest,darkmode:PB.darkmode};p.onload=function(){T("zpbsdk",g)},document.body.appendChild(p)}}function T(t,n){document.getElementById(t).contentWindow.postMessage(n,e)}function S(t,n){var o=t.providerID,r=t.providerName,l=t.serviceName,c=t.serviceID,d=document.createElement("IFRAME");if(PB.isVerticalService){var p="";PB.serviceData.zaid&&(p="zaid_"+PB.serviceData.zaid),PB.serviceData.pbzaaid&&(p="zaaid_"+PB.serviceData.pbzaaid+"_"+p);var u=e+"/phonebridge/viewcomponent/users/select/"+p+"?frameorigin="+document.location.origin+"&providerID="+o+"&providerName="+r+"&serviceID="+c+"&serviceName="+l;t.hasOwnProperty("integID")&&(u+="&integID="+t.integID),d.setAttribute("src",u)}else"SDPOnPremise"===PB.serviceData.serviceName?t.hasOwnProperty("integID")?d.setAttribute("src",e+"/phonebridge/viewcomponent/fetchusersframe?frameorigin="+document.location.origin+"&providerID="+o+"&providerName="+r+"&serviceID="+c+"&serviceName="+l+"&integID="+t.integID+"&showAuth="+t.isCookieAvailable+"&accesstoken="+PB.accesstoken):d.setAttribute("src",e+"/phonebridge/viewcomponent/fetchusersframe?frameorigin="+document.location.origin+"&providerID="+o+"&providerName="+r+"&serviceID="+c+"&serviceName="+l+"&showAuth="+t.isCookieAvailable+"&accesstoken="+PB.accesstoken):i?t.hasOwnProperty("integID")?d.setAttribute("src",e+"/phonebridge/viewcomponent/users/select?frameorigin="+document.location.origin+"&providerID="+o+"&providerName="+r+"&serviceID="+c+"&serviceName="+l+"&integID="+t.integID+"&bundleService="+i+"&bundleOrgId="+a):d.setAttribute("src",e+"/phonebridge/viewcomponent/users/select?frameorigin="+document.location.origin+"&providerID="+o+"&providerName="+r+"&serviceID="+c+"&serviceName="+l+"&bundleService="+i+"&bundleOrgId="+a):t.hasOwnProperty("integID")?d.setAttribute("src",e+"/phonebridge/viewcomponent/users/select?frameorigin="+document.location.origin+"&providerID="+o+"&providerName="+r+"&serviceID="+c+"&serviceName="+l+"&integID="+t.integID+"&darkmode="+PB.darkmode):d.setAttribute("src",e+"/phonebridge/viewcomponent/users/select?frameorigin="+document.location.origin+"&providerID="+o+"&providerName="+r+"&serviceID="+c+"&serviceName="+l+"&darkmode="+PB.darkmode);t.isDisable&&(d.src=d.src+"&isDisable=true"),d.setAttribute("id","zpbusers"),d.setAttribute("name","zpbusers"),d.style.setProperty("width","100%","important"),d.style.setProperty("height","100%","important"),d.style.setProperty("position","fixed"),d.style.setProperty("top","0"),d.style.setProperty("left","0"),-1!==s.indexOf(l)?d.style.setProperty("z-index","101"):d.style.setProperty("z-index","60"),d.style.setProperty("border","none"),document.body.appendChild(d),n&&d.addEventListener("load",n)}function O(e,t){if(null!==P.callAllowed){var n={serviceID:e.serviceID,serviceName:e.serviceName,bundleService:e.bundleService,bundleOrgId:e.bundleOrgId,callbuttonallowed:P.callAllowed,overrideCRMC2D:P.overrideCRMC2D,action:"defineZPBCustomTag"};t.source.postMessage(n,t.origin)}else setTimeout(O,1e3,e,t)}function M(){document.getElementById("zpbsuccess").style.display="none"}function N(){var e=document.getElementById("zpbsuccess-popup");e&&e.remove()}function _(){var e=window.location!==window.parent.location?document.location.ancestorOrigins&&document.location.ancestorOrigins[0]||document.referrer:document.location.href,t=document.createElement("a");return t.href=e,e=t.origin}function L(e,t){var n=document.getElementById("apimsg");n.style.display="block";var i=n.insertRow(-1).insertCell(0);i.setAttribute("data-zcqa",e),i.innerText=t}function Z(){Lyte.Component.register("zpb-phone",{_template:'<template tag-name="zpb-phone"> <template is="if" value="{{isCTD}}"><template case="true"> <a class="zpbCallIconOuter" onmouseover="{{action(\'show_zpblabel\',this)}}" onmouseout="{{action(\'hide_zpblabel\',this)}}" onclick="{{action(\'clicktodial\',event,number,module,recordid,callbackparam,name,companyname,callbackparamfn)}}"> <i class="zpbCallIcon"></i><span style="display:none" id="zpbCallLabel" class="zpbCallLabelTxt">Call</span> </a> </template><template case="false"> <a class="telIcon" title="Call" onclick="{{action(\'telcall\',event,number)}}"></a> </template></template> </template>\n<style>/* $Id$ */\n.zpbCallIconOuter,.DetailsPageBox zpb-phone .zpbCallIconOuter{\n\tbackground: #41b232 !important;\n    transition: all 1.5s ease-in-out; \n    margin-left: 5px !important;\n    border-radius: 30px !important;\n    cursor: pointer !important;\n    text-decoration: none !important;\n    padding: 3px !important;\n    display: inline-block;\n    line-height: 0 !important;\n}\n.zpbCallIconOuter:hover{\n\ttext-decoration: none !important;\n}\n.zpbCallIcon{\n\t-webkit-mask-image: url('+PB.cdnUrl+"images/sprite_telephony.svg);\n    mask-image: url("+PB.cdnUrl+"images/sprite_telephony.svg);\n    -webkit-mask-repeat: no-repeat;\n    mask-repeat: no-repeat;\n    background-color: #fff !important;\n\tdisplay: inline-block !important;\n}\n.zpbCallIcon{\n\t-webkit-mask-position: -7px -8px;\n\twidth: 16px !important;\n\theight: 16px !important;\n\ttransform: scale(0.9);\n    vertical-align: middle !important;\t\n}\nzpb-phone .zpbCallIconOuter .zpbCallIcon {\n    vertical-align: middle!important;\n    margin-top: 0;\n}\n.zpbCallLabelTxt{\n    padding: 0 5px 0 5px !important;\n    color: #fff !important;\n    vertical-align: middle !important;\n    line-height: 0 !important;\n}\n.DetailsPageBox zpb-phone .zpbCallIconOuter{\n    height: auto;\n    min-width: auto;\n    margin-right: 5px!important;\n    margin-left: 0 !important;\n}\n.DetailsPageBox  zpb-phone .zpbCallIcon {\n    margin:0 !important;\n}\n\n.telIcon{\n\tdisplay: inline-block;\n\twidth: 16px;\n\theight: 19px;\n\tbackground: transparent url("+PB.cdnUrl+"images/svgicons.svg) no-repeat -160px -471px;\n\tmargin-right: 6px;\n\tcursor: pointer;\n}</style>",_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}],_observedAttributes:["number","module","recordid","callbackparam","callbackparamfn","name","companyname","isCTD","lyteUnbound"],data:function(){return{number:Lyte.attr("string"),module:Lyte.attr("string"),recordid:Lyte.attr("string"),callbackparam:Lyte.attr("string"),callbackparamfn:Lyte.attr("string"),name:Lyte.attr("string"),companyname:Lyte.attr("string"),isCTD:Lyte.attr("boolean"),lyteUnbound:Lyte.attr("boolean",{default:!1})}},init:function(){this.setData("isCTD",ZPB.clickToDial.isEnabled())},actions:{telcall:function(e,t){e.stopPropagation(),window.location.href="tel:"+t},clicktodial:function(e,t,n,i,a,o,r,s){if(e.stopPropagation(),s&&(s.startsWith("syncFn(")||s.startsWith("asyncFn("))&&s.endsWith(")")){var l=s.indexOf("(")+1,c=s.substring(l,s.length-1),d=c.indexOf(","),p=c.substring(0,d),u=c.replace(p+",","");try{var m=new Function("return "+p+"("+u+")");if(s.startsWith("asyncFn("))return void m().then((function(e){ZPB.clickToDial.trigger(t,n,i,e,o,r)}));a=m()}catch(e){var g=c.split(","),b=g[0];if(g.splice(0,1),s.startsWith("asyncFn("))return void F(b,window,g).then((function(e){ZPB.clickToDial.trigger(t,n,i,e,o,r)}));a=F(b,window,g)}}ZPB.clickToDial.trigger(t,n,i,a,o,r)},show_zpblabel:function(e){e.getElementsByTagName("span")[0].style.display="inline",this.getMethods("zpbCtdOnMouseOver")&&this.executeMethod("zpbCtdOnMouseOver")},hide_zpblabel:function(e){e.getElementsByTagName("span")[0].style.display="none",this.getMethods("zpbCtdOnMouseOut")&&this.executeMethod("zpbCtdOnMouseOut")}}}),ZPB.clickToDial.isEnabled()&&window.jQuery&&jQuery(".zpbphone").show(),ZPB.clickToDial.isEnabled()&&P.overrideCRMC2D&&window.ctiApiNotifier&&(ctiApiNotifier.click2Call=function(e,t,n,i,a,o){var r="";null!=a&&""!=a&&(r=JSON.stringify({callActivityId:a})),ZPB.clickToDial.trigger(e,o,i,r)})}function F(e,t,n){for(var i=e.split("."),a=i.pop(),o=0;o<i.length;o++)t=t[i[o]];return t[a].apply(t,n)}function R(){ZPB.sendMessage("zpbsetup",{action:"initiatePayment"})}return{clickToDial:{isEnabled:P.isEnabled,trigger:P.trigger},integration:{isEnabled:B.isEnabled,isInbuiltMissedCallEnabled:B.isInbuiltMissedCallEnabled,isMissedCallEnabled:B.isMissedCallEnabled},callDetails:{getCurrentCallDetails:k.getCurrentCallDetails},initPlatform:function(r){!function(t){var n=location.hostname.split("."),i=(n.shift(),n.join("."));e=i.includes("tsi")?"https://phonebridge.csez.zohocorpin.com":"https://phonebridge."+i,location.hostname.includes("desktelephony")&&(e="https://phonebridgetest.localzoho.com"),null!=t.pbDomain&&""!=t.pbDomain&&(e=t.pbDomain)}(r),function(o){o&&(t=o.serviceId,n=o.serviceName,u="SDPOnPremise"!==n&&window.location!==window.parent.location,null!=o.bundleService&&(i=o.bundleService,a=o.bundleOrgId),z(),null!=o.doNotDisturb&&(u=window.location!==window.parent.location||o.doNotDisturb),null!=o.clickToDial&&(l=o.clickToDial),null!=o.pbdomain&&""!=o.pbdomain&&(e=o.pbdomain),null!=o.serviceData&&o.serviceData,null!=o.customStyle&&(c=o.customStyle),void 0!==o.whitelistFunc&&(p=o.whitelistFunc),void 0!==o.isDesktopApp&&(d=o.isDesktopApp))}(r),A(),window.addEventListener("message",(function(r){if(r.origin===document.location.origin||r.origin===e||(s=new URL(r.origin).hostname,-1!=o.indexOf(s.substr(s.indexOf(".")+1,s.length)))){var s,v,f,z,I,w=r.data;if(w.action)switch(w.action){case"get_PBSDK_Init_Data":T("zpbsdk",{serviceID:t,serviceName:n,bundleService:i,bundleOrgId:a,doNotDisturb:u,clickToDial:l,isDesktopApp:d,customStyle:c,accessToken:PB.accesstoken,pbzaaid:PB.serviceData.pbzaaid,action:"documentReady",orgtype:PB.integRest,darkmode:PB.darkmode});break;case"get_Setup_Init_Data":var A={action:"setupPageReady",serviceID:PB.serviceData.serviceId,serviceName:PB.serviceData.serviceName,serviceData:PB.serviceData.serviceData,bundleService:PB.serviceData.bundleService,bundleOrgId:PB.serviceData.bundleOrgId,bundleOrgId:PB.serviceData.bundleOrgId,accessToken:PB.accesstoken,pbzaaid:PB.serviceData.pbzaaid,PBServer:PB.server,planId:PB.serviceData.planId};ZPB.sendMessage("zpbsetup",A);break;case"sendData":var F={};PBClient.log("Zaaid ::"+w.zaaid),F.pbzaaid=w.zaaid,updateBridgeOrgInfoInVCRM(F),T("zpbsetup",w);break;case"openpopup":!function(e){var t=document.getElementById("zpbsdk");t&&("callpopupdraggable"===e.type?(t.style.cssText=e.cssText,T("zpbsdk",{action:"enabledrag"})):"callpopup"===e.type?(t.style.height=e.height,t.style.width=e.width,!0===e.isHebrew?(t.style.left=PBDrag.frameLeft?PBDrag.frameLeft+"px":"0px",t.style.right=""):(t.style.left=PBDrag.frameLeft?PBDrag.frameLeft+"px":"",t.style.right="0px"),t.style.top="",t.style.bottom="26px",t.style.visibility="visible"):"preferencelist"===e.type?"0px"==t.style.width&&(t.style.cssText=e.cssText):t.style.cssText=e.cssText)}(w);break;case"closepopup":document.getElementById("zpbsdk").style.cssText="color-scheme:none; border-width:0px; position:fixed; z-index:400; right:0px; bottom:26px; width:0px; height:0px; visibility:hidden";break;case"dragpopup":dragPopupIframe(w);break;case"setDefaultOrg":w.orgId;break;case"clicktodial":u||T("zpbsdk",w);break;case"whitelistDomain":var j=[];j.push(w.domain),p(j),T("zpbsdk",w);break;case"integEnabled":B.integEnabled=!!w.integEnabled;break;case"callbackZPB":window.callbackZPB&&callbackZPB();break;case"enableMissedCall":B.missedCallEnabled=w.missedCallFlag;break;case"showDefaultStatusIcon":x(w);break;case"showStatusIcon":x(w),v=w.currentStatus,f=w.statusList,z=w.has_access,I=w.preference_option,g=v,m=f,y=z,b=I,window.callbackZPBUserStatus&&callbackZPBUserStatus(D());break;case"hideStatusIcon":null!==PB.getPhoneBridgeContainer()&&(document.getElementById("zpbstatusicon").style.display="none"),y=!1,window.callbackZPBUserStatus&&callbackZPBUserStatus(D());break;case"showCTDialpadIcon":C(w);break;case"showWidgetIcon":E(w);break;case"setcurrentcall":k.setCurrentCallDetails(w.currentcalls);break;case"defineZPBCustomTag":if(P.callAllowed=w.callbuttonallowed,P.overrideCRMC2D=w.overrideCRMC2D,"CRMPlus"===i&&i!==n&&window.self===window.top){A={serviceName:"ZohoCRM",callbuttonallowed:P.callAllowed,overrideCRMC2D:P.overrideCRMC2D,action:"defineZPBCustomTag"};var U="crmLoadFrame",W=document.getElementById(U),X=W&&W.contentWindow;return void(X&&X.postMessage(A))}if(window.callbackZPBSuccess&&callbackZPBSuccess(),h.includes(n)){if(window.Lyte)Z();else{var V=document.createElement("script");V.src=wmsUserConfig.phonebridgejsurl.substring(0,wmsUserConfig.phonebridgejsurl.lastIndexOf("/"))+"/lyte-parent-dom.js",V.type="text/javascript",V.onload=function(){Z()},document.head.appendChild(V)}localStorage.setItem("registerCustomTag",Date.now())}break;case"showSuccessMessage":ae=w.data,(oe=document.getElementById("zpbsuccess"))&&oe.remove(),(oe=document.createElement("div")).setAttribute("id","zpbsuccess"),oe.setAttribute("name","zpbsuccess"),oe.setAttribute("data-zcqa","zpb-success"),oe.style.cssText="position: absolute; text-align: center; top: 20px;left: 42%;display: flex;align-items: center;padding: 10px 25px 10px 15px; background: #F5FAF5; border: 1px solid #A9D3AB;color: #fff;border-radius: 6px;box-shadow:0 2px 6px 0 rgba(0,0,0,0.25);z-index: 500;",oe.innerHTML="<div class='zpbSuccessTickBg' style='position: relative;background: #00B01D;border-radius: 100%;height: 22px;width: 22px;display: inline-flex;justify-content: center;align-items: center;'><div class='zpbSuccessTick' style='transform:rotate(50deg);height: 10px;width: 4px;border-bottom: 2px solid #fff;border-right: 2px solid #fff;margin-top:-2px;'></div></div><div class='zpbSuccessText' style='margin-left:10px;color:#132C14;font-size: 14px;'>"+ae+"</div>",document.body.appendChild(oe),setTimeout(M,2e3);break;case"showSuccessPopup":!function(e){var t=document.getElementById("zpbsuccess-popup");t&&t.remove(),(t=document.createElement("div")).setAttribute("id","zpbsuccess-popup"),t.style.cssText="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; padding: 10px 25px; background: #F5FAF5; border: 1px solid #A9D3AB; color: #132C14; border-radius: 6px; box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.25); z-index: 500;";var n=document.createElement("button");n.setAttribute("id","zpbsuccess-popup-close"),n.innerHTML="&times;",n.style.cssText="background: none; border: none; font-size: 20px; cursor: pointer; color: #132C14; margin-left: auto;",n.addEventListener("click",N);var i=document.createElement("div");i.setAttribute("id","zpbsuccess-popup-message"),i.style.cssText="margin-left: 10px; color: #132C14; font-size: 15px; flex-grow: 1;",i.innerText=e,t.appendChild(n),t.appendChild(i),document.body.appendChild(t)}(w.data);break;case"CrmProviderDetailPage":Lyte.Router.transitionTo("crm.settings.section.telephony.summary",w.providername);break;case"RecruitDetailPage":redirectFromZPB(w.providername);break;case"DeskDetailPage":redirectFromZPB(w.DeskProviderInfo);break;case"reloadpopup":if(u){var Y={action:"reloadpopup"};parent.postMessage(Y,_())}else{var J=document.getElementById("zpbsdk");J.src=J.src}break;case"reloadsetup":var H=document.getElementById("zpbsetup");if(null!=w.target&&""!=w.target){H.src=H.src.replace(PB.target,w.target),PB.target=w.target;var q=-1!==H.src.indexOf("darkmode=true")?"true":"false";H.src=H.src.replace("darkmode="+q,"darkmode="+PB.darkmode)}else H.src=H.src;break;case"showOrHideParentFreeze":var G=$("#zpbsetup");G.css("position","relative"),w.showFreeze?G.css("z-index","1000"):G.css("z-index","0"),"ZohoOne"===PB.serviceData.serviceName?ZOCommon.showBackdropForTelephony(w.showFreeze):"ZohoCRM"===PB.serviceData.serviceName?w.showFreeze?renderingUtils.freezeBackground():renderingUtils.removeFreezeLayer():"ZohoBigin"===PB.serviceData.serviceName?IMMI.UiUtils.fn_ToggleFreezeLayer_telephony():"ZohoRecruit"===PB.serviceData.serviceName&&(w.showFreeze?redirectFromZPB(null,"showFreezeLayer"):redirectFromZPB(null,"hideFreezeLayer"));break;case"extensionlist":T("zpbsetup",w);break;case"openHelp":openHelp(w.link);break;case"payment":R(w.data);break;case"changePreferenceIcon":"5"===w.data?document.getElementById("zpbstatusicon").style["background-position"]="-41px -1345px":"1"===w.data?document.getElementById("zpbstatusicon").style["background-position"]="-21px -1344px":document.getElementById("zpbstatusicon").style["background-position"]="-160px -474px";break;case"negativeBalance":log("Negative balance");break;case"showErrorInFrame":document.getElementById(w.frameid).srcdoc=w.dispcontent;break;case"setclicktodial":O(w,r);break;case"showIntegrationPopup":document.getElementById("zpbusers")||S(JSON.parse(w.data));break;case"closeIntegrationPopup":var K=document.getElementById("zpbusers");K.parentNode.removeChild(K),w.integID&&T("zpbsetup",{action:"IntegrationSuccess",providerID:w.providerId,integID:w.integID+""});break;case"loadCFBuilder":var Q=document.getElementById("zpb_callflow_builder");Q&&Q.parentNode.removeChild(Q),function(t){var n=t.serviceName,i=t.serviceID,a=t.callFlowID,o=document.createElement("IFRAME");o.setAttribute("src",e+"/phonebridge/viewcomponent/callflow-builder?frameorigin="+document.location.origin+"&serviceID="+i+"&serviceName="+n+"&call_flow_id="+a),o.setAttribute("id","zpb_callflow_builder"),o.setAttribute("name","zpb_callflow_builder"),o.style.setProperty("width","100%","important"),o.style.setProperty("height","100%","important"),o.style.setProperty("position","fixed"),o.style.setProperty("top","0"),o.style.setProperty("z-index","1001"),o.style.setProperty("border","none"),o.style.setProperty("display","none");var r={serviceID:i,serviceName:n,action:"CF_Builder_Ready"};o.onload=function(){T("zpb_callflow_builder",r),T("zpbsetup",{action:"CF_Builder_Success"}),T("zpb_callflow_builder",{action:"toggleDarkmode",isDarkmode:PB.darkmode})},o.onerror=function(){T("zpbsetup",{action:"CF_Builder_Error"})},document.body.appendChild(o)}(JSON.parse(w.data));break;case"showCFBuilder":var ee=document.getElementById("zpb_callflow_builder");ee&&(ee.style.display="block");break;case"closeCFBuilder":var te=document.getElementById("zpb_callflow_builder");te.parentNode.removeChild(te),T("zpbsetup",{action:"CF_Builder_Closed"});break;case"searchapi":document.getElementById("apimsg").style.display="block";var ne=document.getElementById("searchapi");ne.style.display="block",ne.innerText=w.apimsg;break;case"kafkaproducer":case"kafkaconsumer":case"kafkaconsumerresp":L(w.service,w.apimsg);break;case"recruitFreezelayer":redirectFromZPB(null,w.freezeStatus);break;case"showConfirmationPrompt":if(!document.getElementById("zpbusers")){var ie=w.meta;ie.isDisable=!0,S(ie,(function(){T("zpbusers",{value:w.value})}))}break;case"processConfirmationPrompt":T("zpbsetup",{action:"processConfirmationPrompt",value:w.value});break;case"hide_icons_in_wmsbar":window.Lyte?($L("#zpbstatusicon")[0].style.display="none",$L("#zpbdialpadicon")[0].style.display="none"):(document.getElementById("zpbstatusicon").style.display="none",document.getElementById("zpbdialpadicon").style.display="none")}}var ae,oe}),!1)},reloadFooter:function(){if(z(),v||f){if(w(),f)document.getElementById("zpbstatusicon").style.display="inline-block";if(v)document.getElementById("zpbdialpadicon").style.display="inline-block"}},showPreference:function(){document.getElementById("zpbsdk"),T("zpbsdk",{action:"showPreference"})},showPreferencePopup:function(){document.getElementById("zpbsdk"),T("zpbsdk",{action:"showPreferencePopup"})},renderStatusIcon:function(e){var t=document.getElementById(e),n=document.createElement("div");n.setAttribute("id","zpbdialpadicon_copy"),n.style.display="inline-block",n.style.padding="5px 8px",n.style.verticalAlign="top";var i=document.createElement("span");i.setAttribute("class","zpbdialpadInnericon_copy"),i.style.height="16px",i.style.width="14px",i.style.display="inline-block",i.setAttribute("class","pbDialerIco"),i.style.maskImage="url("+PB.cdnUrl+"images/footer/DialerIcon.svg)",i.style.maskRepeat="no-repeat",i.style.backgroundColor="#313949",n.appendChild(i),t.appendChild(n);var a=document.createElement("div");a.setAttribute("id","zpbstatusicon_copy"),a.style.display="inline-block",a.style.padding="3px 5px",a.style.borderLeft="1px solid #ddd";var o=document.createElement("span");o.style.height="22px",o.style.width="35px",o.style.display="inline-block",o.setAttribute("class","pbSettingIco"),o.style.maskImage="url("+PB.cdnUrl+"images/footer/SettingsIcon.svg)",o.style.maskRepeat="no-repeat",o.style.backgroundColor="#313949",a.appendChild(o),t.appendChild(a)},toggleCTDialpad:function(){T("zpbsdk",{action:"toggleCTDialpad",isDarkmode:PB.darkmode})},showWidget:function(){document.getElementById("zpbsdk"),T("zpbsdk",{action:"showWidget"})},showLoginForm:function(){document.getElementById("zpbsdk"),T("zpbsdk",{action:"showLoginForm"})},updateStatus:function(e){document.getElementById("zpbsdk"),T("zpbsdk",{action:"updateStatus",statusKey:e})},sendMessage:T,registerCustomTag:Z,initiatePayment:R,getAgentStatus:D,updateCurrentCallCBP:function(e){null!=e&&null!=e&&T("zpbsdk",{action:"updateCurrentCallCBP",callBackParam:"object"==typeof e?JSON.stringify(e):e,serviceName:n,serviceID:t})},updateAutoRecharge:function(e,t,n){var i={action:"updateAutoRecharge"};i.by=e,i.when=t,i.callback=n,T("zpbsdk",i)},loadRecording:function(){const e=new Promise((function(e,t){new URL(PB.jsurl);var n=document.createElement("LINK");n.rel="stylesheet";var i=window.Lyte?"audio-tag.css":"laudio-tag.css",a=PBClient.getFingerprintAndCSForFileName(i);n.href=a.cdnurl,PBClient.isIntegrityEnabled&&(n.integrity=a.integrity),n.crossOrigin="anonymous",n.onload=function(){e()},document.head.appendChild(n);setTimeout(function(){t()}.bind(this),4e3)})),t=new Promise((function(e,t){var n=document.createElement("SCRIPT");n.type="text/javascript";var i=window.Lyte?"audio.js":"lyte-audio.js",a=PBClient.getFingerprintAndCSForFileName(i);n.src=a.cdnurl,PBClient.isIntegrityEnabled&&(n.integrity=a.integrity),n.crossOrigin="anonymous",n.onload=function(){e()},document.head.appendChild(n);setTimeout(function(){t()}.bind(this),4e3)}));return Promise.all([e,t])},bundleUserInfo:function(e){}}}();var PBDrag={};function PBIFrameMousemove(e,t){var n=document.getElementById("zpbsdk");PBDrag.frameTop+=t,PBDrag.frameLeft+=e,n.style.left=PBDrag.frameLeft+"px",PBDrag.pageMouseX+=e,PBDrag.pageMouseY+=t}function PBPageMousemove(e){var t=document.getElementById("zpbsdk");PBDrag.frameTop+=e.clientY-PBDrag.pageMouseY,PBDrag.frameLeft+=e.clientX-PBDrag.pageMouseX,t.style.left=PBDrag.frameLeft+"px",PBDrag.pageMouseX=e.clientX,PBDrag.pageMouseY=e.clientY}function PBDragEnd(){document.removeEventListener("mouseup",PBDragEnd),document.removeEventListener("mousemove",PBPageMousemove)}function PBDragStart(e,t){var n=document.getElementById("zpbsdk");PBDrag.frameLeft=n.offsetLeft,PBDrag.frameTop=n.offsetTop,PBDrag.pageMouseX=PBDrag.frameLeft+e,PBDrag.pageMouseY=PBDrag.frameTop+t,document.addEventListener("mouseup",PBDragEnd),document.addEventListener("mousemove",PBPageMousemove)}function dragPopupIframe(e){document.getElementById("zpbsdk")&&("DRAG_START"===e.type?PBDragStart(e.mouseX,e.mouseY):"DRAG_MOVE"===e.type?PBIFrameMousemove(e.offsetX,e.offsetY):"DRAG_END"===e.type&&PBDragEnd())}PBDrag.pageMouseX=0,PBDrag.pageMouseY=0,PBDrag.frameTop="",PBDrag.frameLeft="";