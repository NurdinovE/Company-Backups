Lyte.Component.register("crux-lookupfilter-component",{_template:'<template tag-name="crux-lookupfilter-component"> <template is="if" value="{{cxPropShowFilter}}"><template case="true"> <template is="for" items="{{cxPropDisplayFields}}" item="field" index="index"> <template is="if" value="{{checkNoFilter(field,cxPropOnlyFilterable)}}"><template case="true"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}} {{if(field.cxNoFilter,\'cxLookupFieldList\')}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <div class="{{if(field.customWidth,\'\',\'w150\')}} mT20"> </div> </lyte-th> </template><template case="false"><template is="if" value="{{expHandlers(field.yield,\'===\',true)}}"><template case="true"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{field.cxPropClass}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <template is="if" value="{{expHandlers(expHandlers(field.yieldName,\'===\',\'filter\'),\'&amp;&amp;\',cxPropEndFilter)}}"><template case="true"> <lyte-button data-zcqa="{{applyZcqa}}" lt-prop-appearance="primary" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="{{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'true\',\'false\')}}" onclick="{{action(\'onClickApply\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropApplyText}} </template> </lyte-button> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <lyte-button data-zcqa="{{clearZcqa}}" lt-prop-class="{{cxPropClearClass}}" onclick="{{action(\'clearFilter\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropClearText}} </template> </lyte-button> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(filterAtfirst,\'&amp;&amp;\',expHandlers(index,\'===\',0))}}"><template case="true"> <div class="mT20 cxLookupFilterButtonWrap"> <lyte-button class="dIB cxVam {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'disabled\',\'\')}}" data-zcqa="" lt-prop-appearance="primary" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="true" onclick="{{action(\'onClickApply\',event)}}"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.apply.filter\')}} </template> </lyte-button> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <lyte-button class="dIB cxVam mL10 {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableClear,\'!\')),\'disabled\',\'\')}}" data-zcqa="" lt-prop-appearance="default" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="\'rue" onclick="{{action(\'clearFilter\',event)}}"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.title.clear.name\')}} </template> </lyte-button> </template></template> </div> </template></template> </template></template> </lyte-th> </template><template case="false"> <lyte-th resize="{{field.cxPropResize}}" fixed="{{field.fixed}}" lt-prop-width="{{field.width}}" style="{{field.style}}" class="{{if(field.cxNoFilter,\'cxLookupFieldList\')}} {{field.cxPropClass}}" data-zcqa="{{field[cxPropZcqaSelector]}}"> <div class="cxLookupCriteriaFilter"> <template is="if" value="{{cxPropComparator}}"><template case="true"> <crux-dropdown id="cruxComparator{{index}}" cx-prop-class="{{if(field.customWidth,\'\',\'w150\')}} cxLookupFilterscomparator cxBoxDropdown" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,expHandlers(\'comparator_\',\'+\',field.cxPropFilterZcqa),expHandlers(\'comparator_\',\'+\',index))}}" cx-prop-tabindex="1" cx-prop-maxsearch="{{maxSearchComparator}}" cx-prop-options="{{cruxLookupFilterComparator(field,cxPropFormulaUitypes,cxPropContent)}}" cx-prop-user-value="name" cx-prop-system-value="api_val" on-option-select="{{method(\'queryBuild\',expHandlers(index,\'-\',firstIndex),this)}}" on-show="{{method(\'lookupFilterDropdownOpened\')}}" on-hide="{{method(\'lookupFilterDropdownClosed\')}}" cx-prop-placeholder="{{if(cxPropComparatorPlaceholder,cxPropComparatorPlaceholder,field.comparatorPlaceholder)}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,true)}}"> </crux-dropdown> </template></template> <div class="{{if(field.customWidth,\'\',\'w150\')}} cxCriteriaInputSection mT20"> <template is="if" value="{{reRender}}"><template case="true"> <template is="if" value="{{field.noOverride}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-{{field.cxTypeMapping}}-component" cx-prop-allow-negative-value="{{if(ifEquals(field.cxPropAllowNegativeValue,false),false,true)}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" on-calendar-open="{{method(\'show\')}}" on-calendar-close="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" cx-prop-time-zone="" model-req="{{field.modelReq}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" on-before-add="{{method(\'onBeforeAdd\',field.cxTypeMapping)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" max-user-drop-limit-err="{{method(\'userCompMaxLimitErr\',field.maxLimit)}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'===\',\'lookup\'),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'text\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'email\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'twitter\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'phone\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'text-area\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'website\')),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'multi-picklist\')),\'||\',expHandlers(field.ui_type,\'===\',\'100\'))}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-text-component" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-appearance="box" cx-prop-direction="vertical" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-ignore-empty-value="true" cx-prop-type="single" onkeyup="{{action(&quot;filterSetValue&quot;,&quot;text&quot;,event)}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(field.cxTypeMapping,\'===\',\'tag\')}}"><template case="true"> <template is="component" id="cruxElem{{index}}" component-name="crux-tag-component" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-appearance="box" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-ignore-empty-value="true" onkeyup="{{action(&quot;filterSetValue&quot;,event)}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(field.cxTypeMapping,\'===\',\'date\'),\'||\',expHandlers(field.cxTypeMapping,\'===\',\'date-time\')),\'&amp;&amp;\',cruxDateFilterComparator(filterQuery,index,firstIndex))}}"><template case="true"> <template is="component" id="cruxElem{{index}}Number" component-name="crux-number-component" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" model-req="{{field.modelReq}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" cxpropmaxlength="4" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> <template is="component" id="cruxElem{{index}}Time" component-name="crux-picklist-component" cx-prop-picklist-values="{{cxPropTimeOptions}}" cx-prop-user-value="name" cx-prop-system-value="api_val" cx-prop-value="{{cxPropTimeOptions[0].name}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="create" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> </template><template case="false"> <template is="component" id="cruxElem{{index}}" component-name="{{if(ifEquals(field.cxTypeMapping,\'date-time\'),\'crux-date-component\',expHandlers(expHandlers(\'crux-\',\'+\',field.cxTypeMapping),\'+\',\'-component\'))}}" cx-prop-allow-negative-value="{{if(ifEquals(field.cxPropAllowNegativeValue,false),false,true)}}" on-calendar-open="{{method(\'show\')}}" on-calendar-close="{{method(\'hide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-from="filter" cx-prop-field="{{field}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" model-req="{{field.modelReq}}" cx-prop-time-zone="" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" on-before-add="{{method(\'onBeforeAdd\',field.cxTypeMapping)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" max-user-drop-limit-err="{{method(\'userCompMaxLimitErr\',field.maxLimit)}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}"></template> <template is="if" value="{{isBetweenCheck(isBetween,isBetweenArr,index,firstIndex)}}"><template case="true"> <p>and</p> <template is="component" id="cruxElem{{index}}" component-name="{{if(ifEquals(field.cxTypeMapping,\'date-time\'),\'crux-date-component\',expHandlers(expHandlers(\'crux-\',\'+\',field.cxTypeMapping),\'+\',\'-component\'))}}" cx-prop-allow-negative-value="{{if(ifEquals(field.cxPropAllowNegativeValue,false),false,true)}}" cx-prop-prevent-parent-scroll="true" data-zcqa="{{if(field.cxPropFilterZcqa,field.cxPropFilterZcqa,expHandlers(\'filter_\',\'+\',index))}}" cx-prop-module="{{cxPropModuleName}}" cx-prop-class="cxLookupFiltersInput preventWheel {{field.filterClass}}" cx-prop-appearance="box" cx-prop-ignore-empty-value="true" cx-prop-time-zone="" cx-prop-from="filter" cx-prop-field="{{field}}" on-value-change="{{method(\'queryBuildComp\',expHandlers(index,\'-\',firstIndex),this)}}" onkeyup="{{action(\'filterSetValue\',field.cxTypeMapping,event)}}" cx-prop="{{field.filterProperties}}" cx-prop-disabled="{{cruxFilterDisabled(filterQuery,index,firstIndex,cxPropMaxFilter,false)}}" on-calendar-open="{{method(\'show\')}}" on-calendar-close="{{method(\'hide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-dropdown-hide="{{method(\'hide\')}}" on-before-dropdown-open="{{method(\'beforeShow\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}"></template> </template></template> </template></template> </template></template></template></template></template></template> </template></template> </div> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(filterAtfirst,\'!\'),\'&amp;&amp;\',expHandlers(index,\'===\',firstIndex)),\'&amp;&amp;\',expHandlers(cxPropEndFilter,\'!\'))}}"><template case="true"> <div class="cxLookupFilterButtonWrap"> <template is="if" value="{{cxPropFilterButton}}"><template case="true"> <lyte-button lt-prop-size="small" data-zcqa="{{applyZcqa}}" lt-prop-tab-index="0" lt-prop-appearance="primary" lt-prop-class="{{cxPropApplyClass}}" lt-prop-disabled="{{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'true\',\'false\')}}" onclick="{{action(\'onClickApply\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropApplyText}} </template> </lyte-button> </template><template case="false"> <a data-zcqa="{{applyZcqa}}" class="cxLookupApplyFilter cP dIB {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableFilter,\'!\')),\'disabled eventNone\',\'\')}} {{cxPropApplyClass}}" onclick="{{action(\'onClickApply\',event)}} ">{{cxPropApplyText}}</a> </template></template> <template is="if" value="{{cxPropShowClear}}"><template case="true"> <template is="if" value="{{cxPropClearButton}}"><template case="true"> <lyte-button lt-prop-size="small" data-zcqa="{{clearZcqa}}" lt-prop-tab-index="0" lt-prop-class="{{cxPropClearClass}}" lt-prop-disabled="{{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableClear,\'!\')),\'lyte-true\',\'false\')}}" onclick="{{action(\'clearFilter\',event)}}"> <template is="registerYield" yield-name="text"> {{cxPropClearText}} </template> </lyte-button> </template><template case="false"> <a data-zcqa="{{clearZcqa}}" class="cxLookupClearFilter {{if(expHandlers(cxPropDisableFilter,\'&amp;&amp;\',expHandlers(enableClear,\'!\')),\'disabled eventNone\',\'\')}} {{cxPropClearClass}}" onclick="{{action(\'clearFilter\',event)}} ">{{cxPropClearText}}</a> </template></template> </template></template> </div> </template></template> </lyte-th> </template></template></template></template> </template></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"field.style"}}},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]},{type:"attr",position:[3]},{type:"component",position:[3],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[3]},{type:"component",position:[3],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}]}},default:{}}],_observedAttributes:["module","cxPropModuleName","cxPropShowFilter","currentQuery","cxPropHeaderFields","cxPropDisplayFields","cxPropContent","cxPropNoValidation","cxPropEndFilter","cxPropFormulaUitypes","cxPropComparator","cxPropOnlyFilterable","cxPropDefaultComparator","cxPropDatatypeComparator","cxPropDatePattern","cxPropPlaceHolder","cxPropDisableFilter","cxPropApplyText","cxPropClearText","cxPropApplyClass","cxPropClearClass","cxPropComparatorPlaceholder","cxPropMaxFilter","cxPropUnselectComparator","cxPropDateComparaTors","cxPropTimeOptions","cxPropEncryptFldComparator","enableFilter","enableClear","filterQuery","cxPropShowClear","getBackfilter","firstIndex","reRender","isBetween","filterAtfirst","cxPropFilterButton","cxPropClearButton","clearZcqa","applyZcqa","head","maxSearchComparator","isBetweenArr","cxPropAria"],data:function(){return{module:Lyte.attr("object",{default:{}}),cxPropModuleName:Lyte.attr("string",{default:""}),cxPropShowFilter:Lyte.attr("boolean",{default:!1}),currentQuery:Lyte.attr("object",{default:{}}),cxPropHeaderFields:Lyte.attr("array",{default:[],hideAttr:!0}),cxPropDisplayFields:Lyte.attr("array",{default:[],hideAttr:!0}),cxPropContent:Lyte.attr("object",{default:{786:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],200:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],24:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],333:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],14:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is after"),api_val:"greater_than"},{name:_cruxUtils.getI18n("is before"),api_val:"less_than"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],209:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],35:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],52:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],32:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],36:[{name:"=",api_val:"equal"},{name:"!=",api_val:"not_equal"},{name:">",api_val:"greater_than"},{name:">=",api_val:"greater_equal"},{name:"<",api_val:"less_than"},{name:"<=",api_val:"less_equal"},{name:_cruxUtils.getI18n("between"),api_val:"between"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}],2:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],26:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],8:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],20:[{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"}],300:[{name:_cruxUtils.getI18n("is"),api_val:"equal"}],301:[{name:_cruxUtils.getI18n("is"),api_val:"equal"}],0:[{name:_cruxUtils.getI18n("starts with"),api_val:"starts_with"},{name:_cruxUtils.getI18n("contains"),api_val:"contains"},{name:_cruxUtils.getI18n("doesn't contain"),api_val:"not_contains"},{name:_cruxUtils.getI18n("is"),api_val:"equal"},{name:_cruxUtils.getI18n("isn't"),api_val:"not_equal"},{name:_cruxUtils.getI18n("is empty"),api_val:"empty"},{name:_cruxUtils.getI18n("is not empty"),api_val:"notempty"}]}}),cxPropNoValidation:Lyte.attr("boolean",{default:!1}),cxPropEndFilter:Lyte.attr("boolean",{default:!1}),cxPropFormulaUitypes:Lyte.attr("object",{default:{}}),cxPropComparator:Lyte.attr("boolean",{default:!0}),cxPropOnlyFilterable:Lyte.attr("string",{default:""}),cxPropDefaultComparator:Lyte.attr("object",{default:{starts_with:[0]}}),cxPropDatatypeComparator:Lyte.attr("object",{default:{}}),cxPropDatePattern:Lyte.attr("string",{default:Crm.userDetails.DATE_PATTERN}),cxPropPlaceHolder:Lyte.attr("object",{default:{}}),cxPropDisableFilter:Lyte.attr("boolean",{default:!1}),cxPropApplyText:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.button.apply.filter")}),cxPropClearText:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.title.clear.name")}),cxPropApplyClass:Lyte.attr("string",{default:""}),cxPropClearClass:Lyte.attr("string",{default:""}),cxPropComparatorPlaceholder:Lyte.attr("string",{default:""}),cxPropMaxFilter:Lyte.attr("number",{default:-1}),cxPropUnselectComparator:Lyte.attr("boolean",{default:!1}),cxPropDateComparaTors:Lyte.attr("object",{default:{today:"${TODAY}",tomorrow:"${TOMORROW}",tommorow_onwards:"${TOMORROWPLUS}",yesterday:"${YESTERDAY}",this_week:"${THISWEEK}",this_month:"${THISMONTH}",last_week:"${LASTWEEK}",last_month:"${LASTMONTH}",this_year:"${THISYEAR}",current_fy:"${THISFY}",current_fq:"${THISFQ}",last_year:"${LASTYEAR}",previous_fy:"${PREVFY}",previous_fq:"${PREVFQ}",next_year:"${NEXTYEAR}",next_fy:"${NEXTFY}",next_fq:"${NEXTFQ}"}}),cxPropTimeOptions:Lyte.attr("array",{default:[{name:_cruxUtils.getI18n("days"),api_val:"DAYS"},{name:_cruxUtils.getI18n("weeks"),api_val:"WEEKS"},{name:_cruxUtils.getI18n("months"),api_val:"MONTHS"}]}),cxPropEncryptFldComparator:Lyte.attr("object",{default:{}}),enableFilter:Lyte.attr("boolean",{default:!1}),enableClear:Lyte.attr("boolean",{default:!1}),filterQuery:Lyte.attr("array",{default:[]}),cxPropShowClear:Lyte.attr("boolean",{default:!1}),getBackfilter:Lyte.attr("array",{default:[]}),firstIndex:Lyte.attr("number",{default:0}),reRender:Lyte.attr("boolean",{default:!0}),isBetween:Lyte.attr("boolean",{default:!1}),filterAtfirst:Lyte.attr("boolean",{default:!1}),cxPropFilterButton:Lyte.attr("boolean",{default:!1}),cxPropClearButton:Lyte.attr("boolean",{default:!1}),clearZcqa:Lyte.attr("string",{default:"clear_filter"}),applyZcqa:Lyte.attr("string",{default:"apply_filter"}),head:Lyte.attr("object",{default:"undefined"!=typeof crmConstants?crmConstants.moduleDisplayField:{Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"]}}),maxSearchComparator:Lyte.attr("string",{default:void 0}),isBetweenArr:Lyte.attr("array",{default:[]}),cxPropAria:Lyte.attr("boolean",{default:!1})}},showFilter:function(e){e.newValue?this.initialSetup():this.setData({isBetween:!1,isBetweenArr:[],addSearch:!1,filterQuery:[],currentQuery:[]})}.observes("cxPropShowFilter"),didConnect:function(){this.initialSetup()},initialSetup:function(){this.getMethods("setLookupFilterConditions")&&(a=this.executeMethod("setLookupFilterConditions",this),this.setData("cxPropContent",Object.assign(this.data.cxPropContent,a))),this.displayChanged()},displayChanged:function(){for(var e=this.getData("cxPropDisplayFields").slice(),t=this.getData("cxPropPlaceHolder"),a=this.getData("cxPropOnlyFilterable"),i=0,r=e.length;i<r;i++)if(e[i].id&&!e[i].yield&&(116!==e[i].ui_type||!e[i].formula||!e[i].formula.dynamic)&&!e[i].noFilter&&!e[i].cxNoFilter&&(!a.length||!1!==e[i][a])){this.setData({firstIndex:i,cxPropHeaderFields:e.slice(i)});break}for(i=0,r=(e=this.getData("cxPropHeaderFields")).length;i<r;i++){var o="object"==typeof e[i].filterProperties?e[i].filterProperties:{};t[e[i].ui_type]?o.placeholder=t[e[i].ui_type]:t[e[i].cxTypeMapping]&&(o.placeholder=t[e[i].cxTypeMapping]),e[i].cxPropType&&(o.type=e[i].cxPropType),e[i].maxLimit&&(o.maxLimit=e[i].maxLimit),e[i].maxLength&&(o.maxlength=e[i].maxLength),void 0!==e[i].disableExtraValue&&(o.disableExtraValue=e[i].disableExtraValue),void 0!==e[i].cxPropDecimalAllowed&&(o.decimalAllowed=e[i].cxPropDecimalAllowed),void 0!==e[i].freeze&&(o.freeze=e[i].freeze),e[i].maxValue&&(o.maxvalue=e[i].maxValue),"boolean"===e[i].cxTypeMapping&&(o.noneSelected=!0),e[i].userQueryParams&&(o.queryParam=e[i].userQueryParams),e[i].filterProperties=JSON.stringify(o)}this.setData("cxPropHeaderFields",e),this.displayFilter()},fieldChanged:function(){this.displayChanged()}.observes("cxPropDisplayFields"),onOpenFilter:function(){if(this.getData("cxPropShowFilter")){var e=$L(this.$node).parents("lyte-table");e&&e[0]&&e[0].scrollTable()}}.observes("cxPropShowFilter"),methods:{beforeShow:function(e,t){if(this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",e,t)},beforeHide:function(e,t){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",e,t)},show:function(e,t){this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},hide:function(e,t){this.getMethods("onHide")&&this.executeMethod("onHide",e,t)},queryBuild:function(e,t,a,i){var r,o=this.getData("firstIndex")+e,l=this.getData("cxPropHeaderFields"),p=this.getData("head"),n=JSON.parse(JSON.stringify(this.getData("filterQuery"))),s=this.getData("isBetweenArr").slice(),c=n[e]?n[e]:{},d=l[e].cxTypeMapping,m=this.getData("cxPropDatePattern"),u=l[e].noOverride,x=this.getData("cxPropDateComparaTors");if(u||("lookup"===d||"text"===d||"email"===d||"multi-picklist"===d||"twitter"===d||"phone"===d||"text-area"===d||"website"===d||"100"===l[e].ui_type?d="text":"date-time"===d&&(d="date")),"lookup"===l[e].data_type||"lookup"===l[e].cxTypeMapping){var f="object"==typeof l[e].lookup.module?l[e].lookup.module.api_name:l[e].lookup.module,y=p[f]&&p[f][0]?p[f][0]:"Name";r=l[e].api_name+"."+y}else r=l[e].api_name;"in_the_last"!==i&&"due_in"!==i&&(delete c.ageIn,n[e]=c,this.setData("filterQuery",n),Lyte.Component.registeredHelpers.cruxDateFilterComparator.bind(this,n,o,this.getData("firstIndex"))());var h=t.parentElement.querySelectorAll("crux-"+d+"-component");if("in_the_last"===i||"due_in"===i)c.ageIn=i,n[e]=c,this.setData("filterQuery",n),Lyte.Component.registeredHelpers.cruxDateFilterComparator.bind(this,n,o,this.getData("firstIndex"))(),$L("#cruxElem"+o+"Number")[0].cxProp("disabled",!1),$L("#cruxElem"+o+"Time")[0].cxProp("disabled",!1);else if("empty"===i||"notempty"===i||"blocked"===i||"notblocked"===i||x[i]){c.field={api_name:r,id:l[e].id},"blocked"===i||"notblocked"===i?(c.comparator="blocked"===i?"equal":"not_equal",c.value="${BLOCKED}"):"empty"===i||"notempty"===i?(c.comparator="equal",c.value="notempty"===i?"${NOTEMPTY}":"${EMPTY}"):(c.comparator="equal",c.value=x[i]),s[o]=!1,this.setData({isBetweenArr:s,cxPropHeaderFields:l}),c.empty=!0;for(var g=h.length,v=0;v<g;v++)h[v].cxProp("disabled",!0)}else if("between"===i||"not_between"===i){c.field={api_name:r,id:l[e].id},c.comparator=i,s[o]=!0;g=h.length;var _=[];("${EMPTY}"===c.value||"${NOTEMPTY}"===c.value||"${BLOCKED}"===c.value||Object.values(x).contains(c.value))&&(c.value="");for(v=0;v<g;v++){var P=h[v];if("datetime"===l[e].data_type||"date-time"===l[e].cxTypeMapping){var b=$L.moment(P.component.getValue(),m.toUpperCase()).validate();_[v]=b?u?this.getStartMinute(P.component.getValue(),m.toUpperCase()):this.getISODateTime(P.component.getValue(),m,"start"):P.component.getValue()}else if("date"===l[e].data_type||"date"===l[e].cxTypeMapping){b=$L.moment(P.component.getValue(),m.toUpperCase()).validate();_[v]=b?this.getDate(P.component.getValue()):P.component.getValue()}else _[v]=P.component.getValue();P.cxProp("disabled",!1)}c.value=_,this.setData({isBetweenArr:s,isBetween:!0,cxPropHeaderFields:l}),this.displayFilter(e)}else{var D;if(c.field={api_name:r,id:l[e].id},"datetime"===l[e].data_type||"date-time"===l[e].cxTypeMapping)if("equal"===i?(c.comparator="between",D=!0):"not_equal"===i?(c.comparator="not_between",D=!0):c.comparator=i,D&&c.value){var C="string"!=typeof(C=h[0].component.getValue())?C[0]:C,F=[];b=$L.moment(C,m.toUpperCase()).validate();F[0]=b?u?this.getStartMinute(C):this.getISODateTime(C,m,"start"):C,F[1]=b?u?this.getEndMinute(C,m.toUpperCase()):this.getISODateTime(C,m,"end"):C,c.value=F}else{var w=h[0].component.getValue();b=$L.moment(w,m.toUpperCase()).validate();c.value="greater_than"===i?Array.isArray(w)&&w.length?w[0]:b?u?this.getEndMinute(w,m.toUpperCase()):this.getISODateTime(w,m,"end"):w:"less_than"===i?Array.isArray(w)&&w.length?w[1]:b?u?this.getStartMinute(w,m.toUpperCase()):this.getISODateTime(w,m,"start"):w:"string"!=typeof w&&c.value?c.value[0]:b?u?this.getStartMinute(w,m.toUpperCase()):this.getISODateTime(w,m,"start"):w}else if("date"===l[e].data_type||"date"===l[e].cxTypeMapping){c.comparator=i;b=$L.moment(h[0].component.getValue(),m.toUpperCase()).validate();c.value=b?this.getDate(h[0].component.getValue()):h[0].component.getValue()}else c.comparator=i;("${EMPTY}"===c.value||"${NOTEMPTY}"===c.value||"${BLOCKED}"===c.value||Object.values(x).contains(c.value))&&(c.value=""),s[o]=!1,this.setData({isBetweenArr:s,cxPropHeaderFields:l}),c.value="date"===l[e].cxTypeMapping||"date-time"===l[e].cxTypeMapping?c.value:h[0].component.getValue();for(g=h.length,v=0;v<g;v++)h[v].cxProp("disabled",!1)}this.getData("cxPropUnselectComparator")&&"-1"===i?delete n[e]:n[e]=c,this.dispFilterApply=!1,this.setData("filterQuery",n);var I=this.getFilterQuery();this.setData("enableFilter",this.getData("cxPropDisableFilter")&&(I.comparator||I.group_operator)),this.setData("enableClear",this.getData("cxPropDisableFilter")&&(I.comparator||I.group_operator))},queryBuildComp:function(e,t,a,i){var r,o=this.getData("firstIndex")+e,l=JSON.parse(JSON.stringify(this.getData("filterQuery"))),p=l[e]?l[e]:{},n=this.getData("cxPropComparator"),s=(this.getData("cxPropContent"),this.getData("cxPropHeaderFields")),c=this.getData("isBetweenArr"),d=this.getData("cxPropDatePattern"),m=s[e].noOverride;if(!l[e]){var u={Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"]};if("lookup"===s[e].data_type||"lookup"===s[e].cxTypeMapping){var x=u[s[e].lookup.module.api_name]?u[s[e].lookup.module.api_name][0]:"Name";r=s[e].api_name+"."+x}else r=s[e].api_name;if(n)var f=this.getData("cxPropFormulaUitypes"),y=this.getData("cxPropContent"),h=Lyte.Component.registeredHelpers.cruxLookupFilterComparator.call(this,s[e],f,y)[0].api_val;p.field={api_name:r,id:s[e].id},"in_the_last"!==h&&"due_in"!==h||(p.ageIn=h,h="equal"),p.comparator=h}if(!n){var g=this.getData("cxPropDatatypeComparator"),v=Object.keys(g),_=v.length;if(_)for(var P=0;P<_;P++){var b="formula"===s[e].data_type?s[e].formula.return_type:"rollup_summary"===s[e].data_type?s[e].rollup_summary.return_type:s[e].data_type;if(g[v[P]].indexOf(b)>-1){h=v[P];break}}else{var D=this.getData("cxPropDefaultComparator");_=(v=Object.keys(D)).length;for(P=0;P<_;P++)if(D[v[P]].indexOf(s[e].ui_type)>-1){h=v[P];break}}p.comparator=h}var C=this.getData("cxPropDateComparaTors");if(p.ageIn){Object.values(C).contains(p.value);var F=$L("#cruxElem"+o+"Time")[0].component.getValue(),w=$L("#cruxElem"+o+"Number")[0].component.getValue();p.value="in_the_last"===p.ageIn?"${AGEIN":"${DUEIN",p.value=p.value+F.toUpperCase()+"}+"+w}else if(c[o]){var I=(t=this.$node.querySelectorAll(".cxCriteriaInputSection")[e]).firstElementChild.tagName,q=t.querySelectorAll(I),N=[];if("datetime"===s[e].data_type||"date-time"===s[e].cxTypeMapping){var S=$L.moment(q[1].component.getValue(),d.toUpperCase()).validate();N[1]=S?m?this.getEndMinute(q[1].component.getValue(),d.toUpperCase()):this.getISODateTime(q[1].component.getValue(),d,"end"):q[1].component.getValue(),S=$L.moment(q[0].component.getValue(),d.toUpperCase()).validate(),N[0]=S?m?this.getStartMinute(q[1].component.getValue(),d.toUpperCase()):this.getISODateTime(q[0].component.getValue(),d,"start"):q[0].component.getValue()}else if("date"===s[e].data_type||"date"===s[e].cxTypeMapping){S=$L.moment(q[1].component.getValue(),d.toUpperCase()).validate();N[1]=S?this.getDate(q[1].component.getValue()):q[1].component.getValue(),S=$L.moment(q[0].component.getValue(),d.toUpperCase()).validate(),N[0]=S?this.getDate(q[0].component.getValue()):q[0].component.getValue()}else N[1]=q[1].component.getValue(),N[0]=q[0].component.getValue();p.value=N}else if("date"===s[e].data_type||"date"===s[e].cxTypeMapping){S=$L.moment(t.component.getValue(),d.toUpperCase()).validate();p.value=S?this.getDate(t.component.getValue()):a||""}else if("datetime"===s[e].data_type||"date-time"===s[e].cxTypeMapping){if(S=$L.moment(t.component.getValue(),d.toUpperCase()).validate())if("equal"===p.comparator||"not_equal"===p.comparator||"between"===p.comparator||"not_between"===p.comparator)"equal"===p.comparator?p.comparator="between":"not_equal"===p.comparator&&(p.comparator="not_between"),(N=[])[0]=m?this.getStartMinute(a,d.toUpperCase()):this.getISODateTime(a,d,"start"),N[1]=m?this.getEndMinute(a,d.toUpperCase()):this.getISODateTime(a,d,"end"),p.value=N;else"less_than"===p.comparator?p.value=m?this.getStartMinute(a,d.toUpperCase()):this.getISODateTime(a,d,"start"):p.value=m?this.getEndMinute(a,d.toUpperCase()):this.getISODateTime(a,d,"end");else p.value=a}else"boolean"===s[e].data_type||"boolean"===s[e].cxTypeMapping?p.value=-1===a?void 0:a?"true":"false":p.value=a;l[e]=p,this.dispFilterApply=!1,this.setData("filterQuery",l);var T=this.getFilterQuery();this.setData("enableFilter",this.getData("cxPropDisableFilter")&&(T.comparator||T.group_operator)),this.setData("enableClear",this.getData("cxPropDisableFilter")&&(T.comparator||T.group_operator))},lookupFilterDropdownOpened:function(e,t){$L(t.childComp).addClass("cxDropbox"),this.getMethods("onShow")&&this.executeMethod("onShow",e,t)},lookupFilterDropdownClosed:function(){this.getMethods("onHide")&&this.executeMethod("onHide")},onBeforeAdd:function(e,t,a){return"picklist"!==e&&"user"!==e||!this.getMethods("picklistAdd")||this.executeMethod("picklistAdd",e,t,a)},userCompMaxLimitErr:function(e){_cruxUtils.showCustomMessage({params:{ltPropType:"error",ltPropMessage:_cruxUtils.getI18n("crux.comboBox.max.limit",e,_cruxUtils.getI18n("crm.label.users")),ltPropDuration:"2000",ltPropShow:!0}})}},actions:{filterSetValue:function(e,t){if(13===t.keyCode&&this.getMethods("applyFilter")){if("text"!==e&&"number"!==e&&"phone"!==e&&"date"!==e&&"twitter"!==e&&"phone"!==e&&"website"!==e&&"email"!==e&&"text-area"!==e)return;if(!this.getData("cxPropNoValidation"))var a=this.validate();this.getData("cxPropDisableFilter")&&(this.setData("enableFilter",!1),this.setData("enableClear",!1)),this.executeMethod("applyFilter",this,t,a)}},clearFilter:function(){this.clearFilter()},onClickApply:function(e,t){if(this.getMethods("applyFilter")){if(!this.getData("cxPropNoValidation"))var a=this.validate();this.getData("cxPropDisableFilter")&&this.setData("enableFilter",!1),this.executeMethod("applyFilter",this,t,a)}}},clearFilter:function(){this.getMethods("clearFilter")&&this.executeMethod("clearFilter",this,event),this.getData("cxPropDisableFilter")&&(this.setData("enableFilter",!1),this.setData("enableClear",!1));for(var e=this.getData("firstIndex"),t=this.getData("cxPropDisplayFields").length,a=0,i=this.getData("cxPropHeaderFields"),r=this.getData("cxPropContent"),o=this.getData("filterQuery");a<t;a++)if(o[a-e]){if(this.setData({isBetweenArr:[],isBetween:!1}),this.getData("cxPropComparator")){var l=this.$node.querySelector("#cruxComparator"+a),p=this.getData("cxPropFormulaUitypes"),n=(r=this.getData("cxPropContent"),Lyte.Component.registeredHelpers.cruxLookupFilterComparator.call(this,i[a],p,r)[0].api_val);l.cxProp("selected",n)}this.setData("reRender",!1),this.setData("reRender",!0)}this.displayFilter(),this.setData("filterQuery",[])},getFilterQuery:function(){var e=this.getData("filterQuery"),t=[],a={},i=0,r=this.getData("cxPropComparator");return e.forEach((function(e){if(e&&e.field&&(e.comparator||!r)&&e.value&&(e.value="string"==typeof e.value?e.value.trim(" "):e.value,Array.isArray(e.value)&&e.value.length&&""!==e.value[0]&&""!==e.value[1]||!Array.isArray(e.value)&&(e.value||e.empty||e.ageIn))){if("object"==typeof e.value)e.value=e.value&&e.value.id?e.value.id:e.value,null===e.value&&(e.value="");else if(e.ageIn&&!e.value[e.value.indexOf("+")+1])return void(e.value="");delete e.empty,t[i]=e,i++}})),t.length>=1?1===t.length?a=t[0]:(a.group_operator="AND",a.group=t):a={},this.setData("currentQuery",a),a},elemsValidate:function(){for(var e=this.getData("cxPropDisplayFields"),t=!0,a=e?e.length:0,i=this.getFilter(),r=this.getData("firstIndex"),o=0;o<a;o++)for(var l=this.$node.querySelectorAll("#cruxElem"+(o+r)+":not(template)"),p=l.length,n=0;n<p;n++){var s=l[n].component.getValue();if(s=Array.isArray(s)?s.length:s,i[o]&&s&&!(t=l[n].component.validate()))return t}return t},getFilter:function(){return this.getData("filterQuery").slice()},validate:function(){var e=this.betweenValidate();return!(!this.elemsValidate()||e&&!e.bool)},betweenValidate:function(){var e,t,a=this.getData("filterQuery"),i=this.getData("cxPropHeaderFields"),r={field:"",bool:!0},o=this,l=this.getData("firstIndex");return a.forEach((function(a,p){if(null!=a&&("between"===a.comparator||"not_between"===a.comparator)&&"string"!=typeof a.value){if("date-time"==i[p].cxTypeMapping||"date"==i[p].cxTypeMapping){if(e=new Date(a.value[0]),t=new Date(a.value[1]),null==e.toJSON()||null==t.toJSON())return!1}else if("number"==i[p].cxTypeMapping){if(e=Number(a.value[0]),t=Number(a.value[1]),NaN===e||NaN===t)return!1}else if(e=a.value[0],t=a.value[1],!e||!t){var n=_cruxUtils.getI18n("crm.field.valid.check",i[p].display_label);return!1}if(e>=t){r.field=i[p],r.bool=!1;var s=o.$node.querySelector("#cruxElem"+(p+l));if(s)var c=s.querySelector("input");if("datetime"==r.field.data_type||"date"==r.field.data_type)n=_cruxUtils.getI18n("crm.custom.field.less.than.equalto","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate")+"'","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.toDate")+"'");else n=_cruxUtils.getI18n("crm.custom.field.less.than.to1");return s&&s.component&&s.component.showAlert(n,c),!1}}})),r},displayFilter:function(e){var t=this.getData("firstIndex"),a=t+e,i=this.getData("cxPropDisplayFields"),r=this.getData("getBackfilter"),o=[],l=r.length,p=i.length,n=void 0!==a?a:0,s=(this.getData("cxPropHeaderFields"),[]);p=void 0!==e?a+1:p;for(var c=this.getData("cxPropComparator"),d=0;d<l;d++)o[d]=r[d].id;for(;n<p;n++){var m=this.getData("isBetweenArr").slice();a&&(m[a]=!0);var u=o.length?o.indexOf(i[n].id):-1;!r[u]||"between"!==r[u].comparator&&"not_between"!==currentItem||c||(m[n]=!0),this.setData("isBetweenArr",m);var x=this.$node.querySelector("#cruxComparator"+a);if(x&&x.classList.add("cxBoxDropdown"),-1!==u){var f=this.$node.querySelector("#cruxElem"+a);if(c)this.$node.querySelector("#cruxComparator"+u).ltProp("selected",r[u].comparator);for(var y=f.length,h=0;h<y;h++){var g=f[h];if("empty"===r[u].comparator||"notempty"===r[u].comparator||"blocked"===r[u].comparator||"notblocked"===r[u].comparator)f.cxProp("disabled",!0);else if("CRUX-USER-COMPONENT"===g.tagName){var v=r[u].value[h];g.component.setData("cxPropValue",{users:v})}else"CRUX-DATE-COMPONENT"===g.tagName?g.querySelector("lyte-input").ltProp("value",r[u].value[h]):"CRUX-PICKLIST-COMPONENT"===g.tagName?(g.cxProp("value",r[u].value[h]),g.cxProp("displayValue",r[u].value[h])):g.cxProp("value",r[u].value[h])}s[n-t]=r[u].filterQuery}}this.setData("filterQuery",s),this.setData("getBackfilter",[])},getBackupFilter:function(e){this.$node;for(var t=e.length,a=this.getData("filterQuery"),i=this.getData("cxPropComparator"),r=l.length,o=[],l=this.getData("cxPropDisplayFields"),p=[],n=this.getData("firstIndex"),s=this.getData("cxPropDateComparaTors"),c=0;c<t;c++)p[c]=e[c].id;c=0;for(var d=0;c<r;c++)if(a[c-n]&&-1!==p.indexOf(l[c].id)){var m=this.$node.querySelectorAll("#cruxElem"+c+":not(template)"),u=[],x=this.$node.querySelector("#cruxComparator"+c);m.forEach((function(e,t){"CRUX-DATE-COMPONENT"===e.tagName?u[t]=e.querySelector("lyte-input").ltProp("value"):u[t]=e.component.getValue()})),o[d]={filterQuery:a[c-n],value:u,id:l[c].id},"${NOTEMPTY}"===a[c].value?o[d].comparator="notempty":"${EMPTY}"===a[c].value?o[d].comparator="empty":"${BLOCKED}"===a[c].value||Object.values(s).contains(filter.value)?o[d].comparator="blocked":"between"===a[c].comparator||"not_between"===a[c-n].comparator?o[d].comparator=x&&i?x.ltProp("selected"):a[c-n].comparator:o[d].comparator=a[c-n].comparator,d++}return this.setData("getBackfilter",o),o},getDate:function(e){var t=this.getData("cxPropDatePattern"),a=this.convertUsrtoDefaultDatePattern(e,t);function i(e){return e<10?"0"+e:e}return a?a.getFullYear()+"-"+i(a.getMonth()+1)+"-"+i(a.getDate()):""},getStartMinute:function(e,t){var a=$L.moment(e,t).getDObj();return a.setSeconds("00"),$L.moment(a).format()},getEndMinute:function(e,t){var a=$L.moment(e,t).getDObj();return a.setSeconds("59"),$L.moment(a).format()},keyDownEvent:function(){this.$node.cxProp("aria")&&this.bindEventForAriaLookUpFilter()}.observes("cxPropShowFilter","cxPropContent","cxPropAria").on("didConnect")},{mixins:["crux-filter-utils","crux-element-validation","crux-aria-lookup-filter-mixin"]}),Lyte.Component.registerHelper("checkNoFilter",(function(e,t){return!!(e.noFilter||e.cxNoFilter||t.length&&!1===e[t])||!(116!==e.ui_type||!e.formula||!e.formula.dynamic)}));
