Lyte.Mixin.register("crm-cscript-global-mixin",{viewSnippets:function(e,t,s){if(CScriptComp){const i=CScript.Utils.get_config_by_apiname(e);_cscript._info=store.peekAll("cscript").filterBy(this.validate_selectors(i,t))[0],Lyte.injectResources([networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("cscript")],ResourceConstants.CRM)[0]],void 0,(function(){const e=document.querySelector("crm-cscript").component;if(s){e.setData({page_uuid:void 0});const t=document.querySelector("crm-cscript-record-view");t&&t.component&&t.component.setData({is_force_reload:s})}e.setData({cscriptTagShow:!1,available:CScript.Utils.is_cscript_available(),cscriptPaneShow:!0,page_uuid:_cscript._info?_cscript._info.uuid:_cscript._info,is_proxy:Lyte.Router.getRouteInstance().transition.target!==i.route_name})}))}},getDxStaticPath:function(e,t){return"lux"!==t||e?"vs-light"===e?ResourceConstants.LESSDEFAULT||"default":"vs-blue"===e?ResourceConstants.LESSFEATUREBlUE||"feature-blue":"vs-darkplus"===e?ResourceConstants.LESSFEATUREBLACKPLUS||"feature-black-plus":ResourceConstants.LESSFEATURE||"feature-black":ResourceConstants.LESSDEFAULT},renderEditor:async function(e,t,s,i,n,r,a){if(!_cscript._is_preview_frame){let o=document.querySelector("crm-cscript-editor");const c=await e.events(),l=Crm.userDetails.CUSTOMIZE_INFO.cscript_editor&&JSON.parse(Crm.userDetails.CUSTOMIZE_INFO.cscript_editor);l&&"vs"===l.theme&&(l.theme="vs-light",Crm.userDetails.CUSTOMIZE_INFO.cscript_editor=JSON.stringify(l)),Lyte.injectResources([...networkUtils.returnDependencyFiles(["dx-editor/dx-editor.js","lyte-shortcut.js","cscript/crm-cscript-editor.js","lyte-editor.js","crm-lyte-slider.js","cscript/convert-to-asyncawait.js"],ResourceConstants.CRMClient),networkUtils.returnDependencyFiles(["dx-editor/dx-editor-themeing.css"],ResourceConstants.CRMClient,this.getDxStaticPath(l&&l.theme))[0],networkUtils.returnDependencyFiles(["cscript/dx-editor-dep.css"],ResourceConstants.CRMClient)[0],...networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("dxeditor"),networkUtils.getI18nJSUrl("cscript")],ResourceConstants.CRM)],void 0,async function(){let l;if(o||(Lyte.Component.render("crm-cscript-editor",{},"body"),o=document.querySelector("crm-cscript-editor")),o.setData({page_config:e,add_script_promise:a,is_dynamic_save:r,script_arguments:!0===e.hide_event_type?"commands"===e.unique_name?[]:(await c.list()).find((e=>e.event===s.event)).args:(await c[s.type].list()).find((e=>e.event===s.event)).args,snippet_info:n,page_info:{uuid:i&&i.uuid,category:e.category,page:e.name,unique_name:e.unique_name,selectors:t},event_info:{event:s.event,label:s.event_label,child_label:!0===e.hide_event_type?c.child_label:c[s.type].child_label,type:!0===e.hide_event_type?null:{name:s.type,label:c[s.type].name},...s.child&&{child:{...s.child}}},snippet_info_version_backup:$L.extend(!0,{},n),duplicate_name_check:e.duplicate_name_check}),o.setData("show",!0),n.temp_id&&r)l=_cscript._snippet_records[n.temp_id].content.source_code;else{let e;e=n.uuid?store.peekRecord("cscript_snippets",n.uuid).content.source_code_url:networkUtils.returnDependencyFiles(["devex/cscript-code-stubs/"+s.template],ResourceConstants.CRMClient)[0];const t=await fetch(e),i=t.headers.get("content-type");i&&i.includes("javascript")?l=(await t.text()).replace("//$Id$",""):o.setData("deleted_alert_show",!0)}l&&o.setData({source_code:l,source_code_is_loaded:!0,original_source_code:l})}.bind(this))}},validate_selectors:function(e,t){const s={$route:e.route_name,definition_name:e.unique_name};for(const i of e.selectors){if(!t[i.name])throw new Error("Selectors mismatch for the page");s["$"+i.name]=t[i.name]}return s},validate_event_info:async function(e,t,s){if("commands"===e.unique_name)return;let i=await e.events();if(!(Object.keys(i).includes(""+t.type)||i.list&&e.hide_event_type))throw new Error("Invalid event type: "+t.type);if(e.hide_event_type&&!(await i.list(t.child&&t.child.id)).map((e=>e.event)).includes(t.event))throw new Error("Invalid event : "+t.event);if(!(await i[t.type].list(t.child&&t.child.id)).map((e=>e.event)).includes(t.event))throw new Error("Invalid event : "+t.event);if(!0===e.hide_event_type?!t.child!=!i.child:!t.child!=!i[t.type].child)throw new Error("Invalid event child : "+t.child);if(t.child&&t.child.id&&(!0===e.hide_event_type?"function"==typeof i.child:"function"==typeof i[t.type].child)){let n=!0===e.hide_event_type?(await i.child(s)).find((e=>e.value===t.child.id)):(await i[t.type].child(s)).find((e=>e.value===t.child.id));if(!n||!n.value)throw new Error("Invalid event child : "+t.child);t.child.label=n.name}},validate_snippet_record:function(e){if(!e||!e.temp_id||!_cscript._snippet_records[e.temp_id])throw new Error("Invalid snippet record");return _cscript._snippet_records[e.temp_id]},saveScript:async function(e,t){const s=this.validate_snippet_record(e),{rsc_delta:i,commit_message:n}=s,r=CScript.Utils.get_config_by_apiname(s.cscript_page.definition_name),a={};s.cscript_page.selectors&&Object.keys(s.cscript_page.selectors).forEach((e=>a[e]=s.cscript_page.selectors[e].id)),t&&(s.script_event.child={id:t}),await this.validate_event_info(r,s.script_event,a),delete s.rsc_delta,delete s.commit_message;try{const t=(await store.create("cscript_snippets",s,{commit_message:n})).cscript_snippets[0].uuid,r=(await store.findRecord("cscript_snippets",t))[0].cscript_page.uuid,a=(await store.findRecord("cscript",r,{include_extra_details:"crm-cscript"===Lyte.Router.getRouteInstance().routeName&&0===i.length}))[0];return i.length>0&&(a.$.set("static_resources",i),await a.$.save(),await store.findRecord("cscript",r,{include_extra_details:"crm-cscript"===Lyte.Router.getRouteInstance().routeName})),await this.engineHandling(a.definition_name),delete _cscript._snippet_records[e.temp_id],{snippet_uuid:t,page_uuid:r}}catch(e){throw t}},engineHandling:async function(e){if("commands"===e)_cscript._hotEngine._engine?await CScript.Engine.Hot.Restart():await CScript.InitializeHot();else _cscript._definition&&await CScript.Engine.Global.Restart()},addScript:async function(e,t){const s=this,{selector_info:i={},event_info:n={},snippet_info:r={},page_unique_name:a,page_uuid:o}=e,c=CScript.Utils.get_config_by_apiname(a),l=await c.events();n.template=l.template||l[n.type].list().filter((e=>e.event===n.event))[0].template||"common-sample.js",!t&&!r.uuid&&await s.validate_event_info(c,n,i),c.duplicate_name_check=!e.uuid&&e.duplicate_name_check,c.delay_save=!!e.is_from_commands_palette;const d=o?store.peekRecord("cscript",o):i?store.peekAll("cscript").filterBy(s.validate_selectors(c,i))[0]:null,p=d?null:await Promise.all(Object.keys(i).map((e=>c.selectors.find((t=>t.name===e)).definition(i))));return new Promise(((e,a)=>{s.renderEditor(c,c.selectors&&c.selectors.map(((e,t)=>({...e,value:{id:i[e.name],label:d?d.selectors[e.name].value:p[t].find((t=>t.value===i[e.name])).name}}))),n,d,r,t,{resolve:e,reject:a})}))},get_selectors_info:async function(e){let t;var s={},i={},n={},r=[];if(e){const o=store.peekRecord("cscript",e);t=CScript.Utils.get_config_by_apiname(o.definition_name),s=o.selectors;var a={};t.selectors.forEach((e=>{a[e.name]=e.label})),Object.keys(a).forEach((e=>{i[e]=s[e].id,n[e]=s[e].value,r.push({name:e,label:a[e]})}))}else{t=_cscript._definition;const e=Lyte.Router.getRouteInstance().transition;for(sel of t.selectors){var o,c=sel.key.split(":"),l=c[0],d=c[1],p=c[2];if("$dynamicParam"===l)o=Lyte.Router.getRouteInstance(d).transition.info.dynamicParams[p];else if("$queryParam"===l)o=e.info.queryParams[d];else if("$transitionData"===l)o=e.data[d];else if("$layoutId"===l){const t=moduleRecordMapping[e.info.dynamicParams[0]].id,s=store.peekRecord(t,e.info.dynamicParams[1]);o=s.$layout_id?s.$layout_id.id:s.Layout?s.Layout.id:store.peekRecord("module",t).layouts[0].id}if(!o)break;s[sel.name]={value:"",id:o,label:sel.label},i[sel.name]=o}let a=await Promise.all(Object.keys(i).map((e=>t.selectors.find((t=>t.name===e)).definition(i))));Object.keys(s).forEach(((e,t)=>{var i=s[e].id;n[e]=a[t].find((e=>e.value===i)).name,r.push({name:e,label:s[e].label})}))}return{selector_ids:i,selector_labels:n,config:t,selectors_list:r}},render_create_popup:async function(e,t){if(CScriptLib&&"undefined"!=typeof _cscript&&_cscript&&_cscript._is_preview_frame)return void _cruxUtils.showCustomMessage({params:{ltPropMessage:I18n.getMsg("dxeditorpreview.settings.notsupported"),ltPropType:"error",ltPropDuration:"4000"}});const{selector_ids:s,selector_labels:i,config:n,selectors_list:r}=await this.get_selectors_info(e);let a=document.querySelector("crm-cscript-create");Lyte.injectResources([networkUtils.returnDependencyFiles(["cscript/crm-cscript-create.css"],ResourceConstants.CRMClient)[0],networkUtils.returnDependencyFiles(["cscript/crm-cscript-create.js"],ResourceConstants.CRMClient)[0],networkUtils.returnDependencyFiles(["lytecombobox.js"],ResourceConstants.CRMClient)[0]],void 0,function(){a||(Lyte.Component.render("crm-cscript-create",{},"body"),a=document.querySelector("crm-cscript-create")),a.component.flush_all(),a.setData({is_addscript_mode:!0,selectors:s,selector_labels:i,category:n.category.value,selectors_list:r,page:n.unique_name,is_setup:t.getData("is_setup"),page_config:n,event_type_list:Object.keys("function"==typeof n.events?n.events():n.events).filter((e=>!("function"==typeof n.events?n.events():n.events)[e].hasOwnProperty("is_event_enabled")||("function"==typeof n.events?n.events():n.events)[e].is_event_enabled())).map((e=>({value:e,name:("function"==typeof n.events?n.events():n.events)[e].name}))),show_create_popup:!0})}.bind(this))},momentFromNow:function(e){const t={seconds:{singular:I18n.getMsg("crm.schedules.justnow"),plural:()=>I18n.getMsg("crm.schedules.justnow")},minutes:{singular:I18n.getMsg("crm.schedules.minute.ago"),plural:e=>`${e} ${I18n.getMsg("crm.schedules.minutes.ago")}`},hours:{singular:I18n.getMsg("crm.schedules.hour.ago"),plural:e=>`${e} ${I18n.getMsg("crm.schedules.hours.ago")}`},days:{singular:I18n.getMsg("Yesterday"),plural:e=>`${e} ${I18n.getMsg("crm.label.days.ago")}`},months:{singular:I18n.getMsg("crm.label.checkintime.amonthago"),plural:e=>I18n.getMsg("crm.label.checkintime.monthsago",e)},years:{singular:I18n.getMsg("crm.label.checkintime.yearago"),plural:e=>I18n.getMsg("crm.label.checkintime.yearsago",e)}},s=$L.moment(e).fromNow();return 1===s.value?t[s.property].singular.toLowerCase():t[s.property].plural(s.value).toLowerCase()},build_json_tree:function(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};let s=Math.floor(9e4*Math.random())+1e4;const i=()=>"jsTree_"+s,n=e=>e.replace(/[&<>'"]/g,(function(e){return t[e]})),r=function(e){switch(typeof e){case"boolean":return m(e);case"number":return u(e);case"string":return p(e);default:return null===e?_():e instanceof Array?d(e):a(e)}},a=function(e){var t=i(),s=Object.keys(e).length;return l(h("{",t),Object.keys(e).map(((t,i)=>{var n=[];return n.push('<li class="dxConsoleTreeItem">'),c(e)&&n.push(o()),n.push(g(t,e[t])),i!==s-1&&n.push(f()),n.push("</li>"),n.join("")})).join(""),v("}",t))},o=function(){return'<span class="dxConsoleTreeCollapse" onclick="this.click(this); return false;"></span>'},c=function(e){return!["boolean","number","string"].includes(typeof e)&&(null!==e&&(e instanceof Array?e.length>0:Object.keys(e).length>0))},l=(e,t,s)=>t.length>0?[e,'<ul class="dxConsoleTreeList">',t,"</ul>",s].join(""):e+s,d=function(e){var t=i(),s=[];e.forEach((function(t,i){var n=['<li class="dxConsoleTreeItem">'];c(t)&&n.push(o()),n.push(r(t)),i!==e.length-1&&n.push(f()),n.push("</li>"),s.push(n.join(""))}));var n=s.join("");return l(h("[",t),n,v("]",t))},p=e=>y(n(JSON.stringify(e)),{class:"dxConsoleTreeStr"}),u=e=>y(e,{class:"dxConsoleTreeNum"}),m=e=>y(e,{class:"dxConsoleTreeBool"}),_=()=>y("null",{class:"dxConsoleTreeNull"}),f=()=>y(",",{class:"dxConsoleTreeComma"}),g=(e,t)=>[y(n(JSON.stringify(e)),{class:"dxConsoleTreeProperty"})+y(": ",{class:"dxConsoleTreeColon"}),r(t)].join(""),y=(e,t)=>"<span"+Object.keys(t).map((e=>" "+e+'="'+t[e]+'"')).join("")+">"+e+"</span>",h=(e,t)=>y(e,{id:"opening_"+t,class:"dxConsoleTreeBracket"}),v=(e,t)=>y(e,{id:"opening_"+t+"_end",class:"dxConsoleTreeBracket"});return'<div class="dxConsoleTreeTree">'+r(e)+"</div>"},get_delta_resource:function(){const{page_info:e,page_resources:t,page_zdk_version:s}=this.data;if(e.uuid){const i=[],n=store.peekRecord("cscript",e.uuid).static_resources.map((e=>store.peekRecord("static_resources",e.id))),r=new Set(n.map((e=>e.id))),a=new Set(t.map((e=>e.id))),o=n.find((e=>"crm"===e.source)).id;return s.id!==o&&(i.push({id:s.id}),i.push({id:o,_delete:null})),i.push(...t.filter((e=>!r.has(e.id))).map((e=>({id:e.id})))),i.push(...n.filter((e=>!a.has(e.id))).map((e=>({id:e.id,_delete:null})))),i}return t.map((e=>({id:e.id})))},get_fields:async function(e){let t=["text","picklist","ownerlookup","email","phone","website","integer","currency","textarea","lookup","date","bigint","double","boolean"];Crm.userDetails.USERLOOKUP_CSCRIPT&&(t=t.concat("userlookup"));const s=store.peekAll("module").find((t=>t.module_name===e.Module)).api_name,i=store.peekRecord("layout",e.Layout);return(i&&i.sections||(await store.findRecord("layout",e.Layout,{module:s}))[0].sections).map((e=>"used"!==e.type?[]:e.fields.filter((s=>(!e.isSubformSection||s.subform)&&(CScript.Utils.is_uploadfields_event_enabled()?t.concat(["fileupload","imageupload"]).includes(s.data_type):t.includes(s.data_type))&&![51,208,207].includes(s.ui_type)&&!["Salutation","Adjustment","Discount","Product_Details"].includes(s.api_name)&&null===s.refer_from_field&&s.view_type.edit&&s.visible&&!s.read_only)).map((e=>({name:e.field_label,value:e.id}))))).flat()},get_subform:async function(e){const t=store.peekAll("module").find((t=>t.module_name===e.Module)).api_name,s=store.peekAll("layout").find((s=>s.module.api_name===t&&s.id===e.Layout));return(s&&s.fields?s:(await store.findRecord("layout",e.Layout,{module:t}))[0]).fields.filter((e=>"subform"===e.data_type||Crm.userDetails.isStaticSubFormEnabled&&"static_subform"===e.data_type)).map((e=>({name:e.display_label,value:e.id})))},get_module_definitions:function(){return store.peekAll("module").filter((e=>e.api_supported&&"team_based"!==e.access_type&&e.visible&&e.show_as_tab&&e.presence_sub_menu&&!_cscript._unsupported_modules.includes(e.api_name)&&!crmTab.isZBCustomModule(e.api_name)&&!crmTab.isZECustomModule(e.api_name)&&!crmTab.isZSCustomModule(e.api_name))).map((e=>({name:e.plural_label,value:e.module_name})))},get_layout_definitions:async function(e){const t=store.peekAll("module").find((t=>t.module_name===e.Module)).api_name,s=store.peekAll("layout").filter((e=>(e.module&&e.module.api_name)===t));return(s.length?s:await store.findAll("layout",{module:t})).map((e=>({name:"Standard"===e.name?I18n.getMsg("Standard"):e.name,value:e.id})))},get_events_list:function(e,t,s){switch(e){case"page":return[{event:"onLoad",args:[]},{event:"onChange",args:["field_name"]},{event:"onSave",args:[]}];case"field":const e=store.peekRecord("field",s);return[{event:"onChange",args:["value"]},...!s||s&&crmTemplate.onTypesSupportedFields.has(`${e&&e.ui_type}`)?[{event:"onType",args:["value"]}]:[]];case"wizard":const t=[{event:"onLoad",args:[]},{event:"onChange",args:["field_name"]},{event:"onTransition",args:["screen"]},{event:"onBeforeTransition",args:["source_screen","target_screen"]},{event:"onBeforeSave",args:[]}];return Crm.userDetails.WIZARD_CSCRIPT_TRANSITION_BEGIN&&t.splice(2,0,{event:"onTransitionBegin",args:["screen"]}),t}},is_cscript_enabled:function(){const e=Lyte.Router.getRouteInstance();return!e.transition.info.queryParams.wizardId&&store.peekAll("module").filter((e=>e.api_supported&&"team_based"!==e.access_type&&e.visible&&e.show_as_tab&&e.presence_sub_menu&&!_cscript._unsupported_modules.includes(e.api_name)&&!crmTab.isZBCustomModule(e.api_name)&&!crmTab.isZECustomModule(e.api_name)&&!crmTab.isZSCustomModule(e.module_name))).filter((t=>t.module_name===e.transition.info.dynamicParams[0]||"crm-cscript"===e.routeName)).length>0},isLoaderPresent:function(e){if($L("crm-cscript-loader").length>0)throw CScript.Error(`unsupported action - cannot show ${e} when loader is active`)},description_showmore:function(){let e=$L("dx-editor")[0];e.setData("show_more_flag",!1);var t=$L(".dxIDE_info_descCont");t.length&&e.setData("show_more_flag",t.height()>36)},client_refresh:function(e,t){const s=Lyte.Router.getRouteInstance().transition;(s.data||(s.data={})).skipDirtyCheck=!0;var i=Lyte.Router.getRouteInstance().refresh({refreshTemplate:!0});i.prevent_cscript_onLoad=!e.triggerOnLoad,t&&i&&(i.data=t)},toggle_command_palette:function(){if(!Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].freezeBgCheck()){let e=JSON.parse(JSON.stringify(_cscript._hotEngine._list));e=e.sort(((e,t)=>{const s=e.scriptName.toUpperCase(),i=t.scriptName.toUpperCase();return s<i?-1:s>i?1:0}));let t=store.peekAll("keyboard_shortcuts");if(t&&t.length>0){let s=t.find((e=>"Commands"===e.category));(s&&s.components||[]).forEach((t=>{let s=e.find((e=>e.scriptId===t.cscript_snippet.uuid));s&&(s.key_combination=t.key_combination)}))}let s={show:!0,scriptJSON:e,isShortcutEnabled:Crm.userDetails.isKeyboardShortcutsEnabled,hasDevAccess:Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Advanced_Dev_Access")&&Crm.userDetails.permissions.Crm_Implied_Advanced_Dev_Access},i=$L("crm-cscript-hotkeys")[0];i&&i.component?(i.setData(s),i.component.setup.call(i.component)):Lyte.Component.render("crm-cscript-hotkeys",s,"body");let n=$L("#wmscsdiv .zcicncss-command");n[0]&&n.addClass("cs_commnd_active")}},getWMSElem:function(){let e=document.createElement("div");e.classList.add("crm-wms-icon","crm-font-bold","dF","jcCenter","flexDC","cP"),e.id="wmscsdiv",e.setAttribute("lt-prop-title",I18n.getMsg("Commands")),e.setAttribute("data-zcqa","open_commands_palette"),e.setAttribute("onclick",'Lyte.registeredMixins["crm-cscript-global-mixin"].toggle_command_palette()');let t=document.createElement("crmutil-icon");t.setAttribute("icon-class","zcicncss-command zcicn-cssIcons"),t.style="text-align:center;",t.classList.add("h16"),e.appendChild(t);let s=document.createElement("td");return s.setAttribute("onmouseover",'Lyte.registeredMixins["crm-cscript-global-mixin"].change_pointer_over_commandsIcon()'),s.appendChild(e),s},addCSDivInWMS:function(){if(!$L("#wmscsdiv")[0]){let e=$L("#wmsstatusbar")[0];if(e){e=e.firstChild.firstChild.firstChild;let t=Lyte.registeredMixins["crm-cscript-global-mixin"].getWMSElem();e.children[0]?e.insertBefore(t,e.children[0]):e.appendChild(t),"undefined"!=typeof CrmPlusImpl&&("undefined"!=typeof isCrmPlusUser&&"true"===isCrmPlusUser||"undefined"!=typeof isZohoOneUser&&"true"===isZohoOneUser)&&!_cscript._is_preview_frame&&CrmPlusImpl.trigger("modifyUI",["chatBarNotification",{commands:!0,isupdate:!0}])}}},removeCSDivInWMS:function(){const e=$L("#wmscsdiv")[0];if(e&&(!Crm.userDetails.permissions.hasOwnProperty("Crm_Implied_Advanced_Dev_Access")||!Crm.userDetails.permissions.Crm_Implied_Advanced_Dev_Access)){const t=store.peekAll("cscript").filterBy({definition_name:"commands"});if(t&&0===t.length){const t="undefined"!=typeof isCrmPlusUser&&"true"===isCrmPlusUser,s="undefined"!=typeof isZohoOneUser&&"true"===isZohoOneUser;"undefined"==typeof CrmPlusImpl||!t&&!s||_cscript._is_preview_frame||CrmPlusImpl.trigger("modifyUI",["chatBarNotification",{commands:!1,isupdate:!0}]),e.remove()}}},cscriptChangesPostSandboxDeployment:async function(){let e=await store.findAll("cscript");if(featuresAvailable.CSCRIPT_COMMANDS){let t=e.filter((e=>"commands"===e.definition_name));t&&t.length>0?_cscript._hotEngine._engine?await CScript.Engine.Hot.Restart():await CScript.InitializeHot():_cscript._hotEngine._info&&CScript.Engine.Hot.Utils.onLastDeleted()}},change_pointer_over_commandsIcon:function(){let e=Lyte.registeredMixins["crm-keyboard-shortcutsmixin"],t=$L("#wmscsdiv");t&&(e.freezeBgCheck(!0)?t.addClass("cNotAllowed"):t.removeClass("cNotAllowed"))},checkDuplicateName:async function(e,t){let{scriptName:s,definitionName:i,is_from_create_popup:n,scriptRecords:r}=e;s=s.toLowerCase();try{let a={};const o=store.peekAll("cscript").filterBy({definition_name:i});if(o.length>0){(r||await store.findAll("cscript_snippets",{page_uuid:o[0].uuid})).some((({name:e})=>e.toLowerCase()===s))?(n&&(e.createModal=$L("#csCreateModal")[0],e.createModal&&e.createModal.component.setData("ltPropAllowMultiple",!0)),a={...await new Promise(((s,i)=>{_cruxUtils.showCustomAlert({params:{ltPropType:"warning",ltPropPrimaryMessage:I18n.getMsg("crm.cscript.duplicate.name.warning"),ltPropSecondaryMessage:I18n.getMsg("crm.cscript.duplicate.name.description"),ltPropButtons:[{type:"reject",appearance:"default",text:I18n.getMsg("crm.button.cancel")},{type:"accept",appearance:"primary",text:I18n.getMsg("crm.yes.proceed"),cxPropZcqa:"button_2"}],...t&&{...t}},accept:()=>{n&&e.createModal&&e.createModal.component.setData("ltPropAllowMultiple",!1),s({is_from_duplicate_alert:!0})},reject:()=>{n&&e.createModal&&e.createModal.component.setData("ltPropAllowMultiple",!1),i({is_from_duplicate_alert:!1})}})}))}):a.is_duplicate_script=!1}return a}catch(e){return{is_from_duplicate_alert:!1}}}});
