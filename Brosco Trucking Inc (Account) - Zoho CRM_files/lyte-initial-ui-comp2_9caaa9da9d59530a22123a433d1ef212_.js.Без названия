function measureFont(t){var e=[];return["fontStyle","fontVariant","fontWeight","fontSize","fontFamily"].forEach((function(a){var o=t[a];o&&e.push(o)})),e.join(" ")}function check4ellipsis(t,e,a,o){var l=o?"Height":"Width",i=t["offset"+l],n=t["scroll"+l],r=n>i;if(n==i&&a&&!o){var s=t.getBoundingClientRect().width;if(i-s<=.5){var d=window.getComputedStyle(t),c=d.font,p=document.createElement("canvas").getContext("2d");p.font=c||measureFont(d),p.measureText(e).width-s>=.015&&(r=!0)}}return r}!function(){if($L){var t=navigator.userAgent,e={uA:t,isUbuntu:/ubuntu/gi.test(t),isIpad:/ipad/gi.test(t),safari:/safari/gi.test(t),isIE11Lyte:/rv:11/gi.test(t),isEdgeLyte:/Edge/gi.test(t),mode:{},chrome:!!window.chrome,firefox:/firefox/gi.test(t)};function a(t,e,a,o){var l,i=document.createElement("div"),n=this;return i.className=t,i._scrolldiv=this,i.style.visibility="hidden",(l=document.createElement("div")).classList.add("lyteScrollDiv"),e.handlerClass&&l.classList.add(e.handlerClass),e.containerClass&&i.classList.add(e.containerClass),e.aria&&$L(i).attr({role:"scrollbar","aria-orientation":a?"horizontal":"vertical","aria-controls":this.id,"aria-live":"assertive",tabindex:Math.max(this.tabIndex,e.tabIndex||0)}).on("blur",(function(t){var e=t.relatedTarget;document.activeElement!=document.body||e||$L(this).hasClass("visible")||n.focus({preventScroll:!0})})),i.appendChild(l),a?(l._direction=a,e.horizontalContainerClass&&i.classList.add(e.horizontalContainerClass),e.horizontalHandlerClass&&l.classList.add(e.horizontalHandlerClass),this._horiDiv=i):(e.verticalContainerClass&&i.classList.add(e.verticalContainerClass),e.verticalHandlerClass&&l.classList.add(e.verticalHandlerClass),this._vertDiv=i),(o?this.parentElement:this).appendChild(i),i.addEventListener("click",u,!0),l.addEventListener("mousedown",h),this._infiniteScroll||l.addEventListener("touchstart",h),i}function o(t){var e=t.getBoundingClientRect(),a=t.offsetWidth,o=t.offsetHeight,l=e.width,i=e.height,n=a-Math.round(l),r=o-Math.round(i),s=l/a,d=i/o,c={left:e.left-n,right:e.right+n,top:e.top-r,bottom:e.bottom+r,width:a,height:o,measuredWidth:l,measuredHeight:i,scaleX:s,scaleY:d,bcr:e};return c.x=c.left,c.y=c.top,c}function l(t,e,a){t.style[e]!=a&&(t.style[e]=a)}function i(t){var e,a=(t=t||{target:this}).target.correspondingElement||t.target;if(a.closest(".lyteConnectWrapper.preventWheel"))return!0;for(;a&&a!=this;){if(a.classList.contains("preventWheel")){e=!0;break}a=a.parentElement}return e}function n(t,e,a,o,i){var n;if(i=i||{},fn=function(t){l(t,"visibility","hidden"),t.classList.remove("visible")},t.scroll)e&&fn(e);else{var r="scroll"==this._scrollData.showOn;if(-1==["mouseenter","touchstart"].indexOf(i.type)||!r){var s=this._enableScroll=!t.frm_reset,d=$L(this).hasClass("eventBinded");if(e&&(!r||!t.frm_reset))if(clearTimeout(e._entertimeout),clearTimeout(e._leavetimeout),delete e._entertimeout,delete e._leavetimeout,t.scrollbar)fn(e);else{if(!s&&!d)return;"touchstart"==i.type?e._entertimeout=setTimeout(l.bind(this,e,"visibility","visible"),150):l(e,"visibility","visible"),e.classList.add("visible"),w.call(this,o,void 0,{},a)}}n=!0}return n}function r(t){(this.removeEventListener("wheel",r,!0),this.classList.contains("eventBinded"))||(this.closest("lyte-connect")||d.call(this,{type:"mouseenter"}));t.preventDefault()}function s(t){var e={};return["x","y","bottom","height","top","width","left","right"].forEach((function(a){e[a]=Math.round(t[a])})),e}function d(t,e){if(!(this.classList.contains("eventBinded")&&1!=t||"mouseenter"==t.type&&this._prtmseenr)){var a,l={scrollLeft:Math.round(this.scrollLeft),scrollTop:Math.round(this.scrollTop),scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:s(o(this))},i=this._scrollData;if(this._wheelObj=l,this.classList.contains("lyteTableScroll")&&L.call(this,l),this._direction=getComputedStyle(this).direction,l.vertbcr=this._vertDiv?o(this._vertDiv):{},l.horbcr=this._horiDiv?o(this._horiDiv):{},a=n.call(this,y.call(this,!0,l,e),this._vertDiv,l,!0,t),(a=n.call(this,y.call(this,!1,l,e),this._horiDiv,l,!1,t)||a)&&t){if(this._mouseleave=this._mouseleave||p.bind("parent"==i.appendTo?this.parentElement:this),"touchstart"==t.type){if(1!=t.touches.length)return;clearTimeout(this._tchtime),document.addEventListener("touchcancel",this._mouseleave,!0)}else this.addEventListener("wheel",v,!0),this.addEventListener("keydown",c,!0),"scroll"==this._scrollData.showOn&&this.addEventListener("mousemove",_,!0);this._allowTouch=!0,document.addEventListener("touchend",this._mouseleave,!0),this.classList.add("eventBinded"),this._tabindex=null==this._tabindex?this.tabIndex:this._tabindex,-1==this.tabIndex&&(this.tabIndex=i.tabIndex||0)}}}function c(t){var e=t.target,a=$L(e),l=a.hasClass("lyteScrollContainer"),i=l?a.hasClass("lyteScrollContainerY"):void 0;if(e==this||l){var n,r,s=t.key,d=this,c=Math.round(d.scrollLeft),p=Math.round(d.scrollTop),u=d.offsetWidth,h=d.offsetHeight,m=d.scrollWidth,f=d.scrollHeight,y={scrollLeft:c,scrollTop:p,scrollWidth:m,scrollHeight:f,bcr:o(d)},v=this._scrollData.keyStep,b="rtl"==this._direction,P=b&&(!_lyteUiUtils||_lyteUiUtils.isNegativeScroll()),D=t.metaKey||t.ctrlKey;switch(s){case"ArrowLeft":n=!1,D?r=b?P?u-m:m-u:0:(b&&P&&(b=!1),r=c-v*(b?-1:1)),l&&i&&(n=void 0);break;case"ArrowRight":n=!1,D?r=b?P?0:u-m:m-u:(b&&P&&(b=!1),r=c+v*(b?-1:1)),l&&i&&(n=void 0);break;case"ArrowDown":r=Math.min(p+v,f-h),n=!0,l&&!i&&(n=void 0);break;case"ArrowUp":r=Math.max(0,p-v),n=!0,l&&!i&&(n=void 0);break;case"PageDown":r=Math.min(p+h,f-h),n=!0,l&&!i&&(n=void 0);break;case"PageUp":r=Math.max(p-h,0),n=!0,l&&!i&&(n=void 0);break;case"Home":r=0,n=!0,l&&!i&&(n=void 0);break;case"End":r=f-h,n=!0,l&&!i&&(n=void 0)}null!=n&&g.call(d,y,n,r-(n?p:c))&&(d[n?"scrollTop":"scrollLeft"]=r,C.call(d,t),t.preventDefault())}}function p(t){if(!((t=t||{}).relatedTarget&&this.contains(t.relatedTarget)||document._scrollmouseup)){if("touchend"==t.type){var e=t.target.correspondingElement||t.target;if(e&&e.classList.contains("lyteScrollContainer"))return}var a=$L(this).children(".lyteScrollContainer"),o=this._scrolldiv||this;if(a.length){for(var i=0;i<a.length;i++){var n=a[i];clearTimeout(n._entertimeout),clearTimeout(n._leavetimeout),delete n._entertimeout,delete n._leavetimeout,n.classList.remove("visible"),"touchend"==t.type?n._leavetimeout=setTimeout(l.bind(this,n,"visibility","hidden"),150):n.style.visibility="hidden"}"mouseleave"==t.type?(o.removeEventListener("wheel",v,!0),o.removeEventListener("keydown",c,!0),o.removeEventListener("mousemove",_,!0),o.addEventListener("wheel",r,!0)):"touchend"!=t.type&&"touchcancel"!=t.type||(o._prtmseenr=!0,o._tchtime=setTimeout((function(){delete o._prtmseenr}),500),document.removeEventListener("touchcancel",o._mouseleave,!0)),t.type&&(document.removeEventListener("touchend",o._mouseleave,!0),delete o._allowTouch,o.classList.remove("eventBinded"),delete o._wheelObj,delete o._prevPosY,delete o._mouseleave,delete o._prevPosX,delete o._wheelEvt),delete o._enableScroll}}}function u(t){if(this.classList.contains("visible")){if("touchmove"==t.type){if(t.touches.length>1)return;t.preventDefault(),t=t.touches[0]}var e,a=this._scrolldiv,l=this.children[0],i=o(this),n=o(l),r={scrollLeft:Math.round(a.scrollLeft),scrollTop:Math.round(a.scrollTop),scrollWidth:a.scrollWidth,scrollHeight:a.scrollHeight,bcr:o(a)},s="width",d="left",c="scrollLeft",p="scrollWidth",u="clientX";this.classList.contains("lyteTableScroll")&&!r.$nodeClient&&L.call(this,r),r.vertbcr=this._vertDiv?o(this._vertDiv):{},r.horbcr=this._vertDiv?o(this._horiDiv):{},l._direction||(!0,s="height",d="top",c="scrollTop",p="scrollHeight","bottom",u="clientY"),e=("click"!=t.type?t[u]-(this.prev||t[u]):t[u]-(n[d]+n[s]/2))/(r.bcr[s]+r.bcr[d]-i[d])*r[p],a[c]+=e,C.call(a,t),this.prev=t[u]}}function h(t){var e="touchstart"==t.type,a=this.parentNode,o=document,l="addEventListener";o[l](e?"touchmove":"mousemove",o._scrollmousemove=u.bind(a),!0),o[l](e?"touchend":"mouseup",o._scrollmouseup=m.bind(a),!0),t.preventDefault(),t.stopPropagation()}function m(t){var e="touchend"==t.type,a=document,o="removeEventListener",l=this._scrolldiv||this,i=t.target,n=l._scrollData;a[o](e?"touchmove":"mousemove",a._scrollmousemove,!0),a[o](e?"touchend":"mouseup",a._scrollmouseup,!0),delete a._scrollmousemove,delete a._scrollmouseup,delete this.prev,l.contains(i.correspondingElement||i)||"always"==n.showOn||p.call("parent"==n.appendTo?l.parentNode:l,{type:"mouseleave"})}function f(t){var e=this._scrollData,a=document;a._scrollmouseup||a.addEventListener("mouseup",a._scrollmouseup=m.bind("parent"==e.appendTo?this.parentElement:this),!0)}function y(t,e,a){var o="scrollTop",l="scrollHeight",i="height",r=t?this._vertDiv:this._horiDiv,s=this._scrollData,d=s.scrollYMarginOffset;return t||(o="scrollLeft",l="scrollWidth",i="width",d=s.scrollXMarginOffset),e[o]+e.bcr[i]>=e[l]&&0==e[o]?(r&&r.classList.contains("visible")&&n.call(this,{scroll:!0,scrollbar:!0},r),{scroll:!0,scrollbar:!0,frm_reset:a}):{scroll:!1,scrollbar:e[l]-e.bcr[i]<=d,frm_reset:a}}function v(t){if(!i.call(this,t))if("touchmove"==t.type){if(this._allowTouch&&1==t.touches.length){var e=t.touches[0];D.call(this,t,[(this._prevPosX||e.clientX)-e.clientX,(this._prevPosY||e.clientY)-e.clientY]),this._prevPosY=e.clientY,this._prevPosX=e.clientX}}else D.call(this,t)}function g(t,a,o){var l="scrollTop",i="scrollHeight",n="height";a?this._vertDiv:this._horiDiv;if(a||(l="scrollLeft",i="scrollWidth",n="width"),a){if(o>0&&Math.round(t[l]+t.bcr[n])>=t[i]||o<0&&0==t[l])return!1}else{if(o>0&&Math.round(t[l]+t.bcr[n])>=t[i]||o<0&&Math.round(-t[l]+t.bcr[n])>=t[i])return!1;if(!a&&e.firefox&&"rtl"==this._direction&&o<0&&0==t[l])return!0;if(o<0&&0==t[l]&&!(o<0&&e.safari&&"rtl"==this._direction&&0==t[l]))return!1}return!0}function b(t){var a=this._scrollData,o=a.min,l=a.max,i=a.wheelSpeed,n=i,r=e.uA.toLowerCase(),s=this._infiniteScroll,d=e.isIE11Lyte;-1==r.indexOf("edge")&&-1==r.indexOf("trident")&&-1==r.indexOf("msie")||"rtl"!=this._direction||(i*=-1);var c,p,u=t.deltaMode&&1==t.deltaMode,h=t.deltaX,m=t.deltaY;if(t.shiftKey){var f=h;h=m,m=f}return h>0?c=Math.max(u?6*h:h,s?0:4):h<0&&(c=Math.min(s?0:-4,u?6*h:h)),m>0?p=Math.min(l,Math.max(u?6*m:m,s?0:4),d?20:1/0):m<0&&(p=Math.max(o,Math.min(s?0:-4,u?6*m:m),d?-20:-1/0)),[c*i,p*n]}function P(t,e){for(var a=t.target;a!=this;){var o=Math.round(a.scrollTop),l=a.scrollHeight,i=a.offsetHeight,n=getComputedStyle(a),r=/scroll|auto/i.test(n.overflowY)||a.classList.contains("lyteScrollBar")&&/hidden/i.test(n.overflowY);if(i<l)if(e){if(i+o<l&&r)return!0}else if(o&&r)return!0;a=a.parentNode}}function D(t,a){var l,i,n=a||b.call(this,t),r=n[0]||0,c=n[1]||0,u=!1,h=this._wheelObj||{},m=this.classList.contains("lyteTableScroll"),f=t.deltaX,v=t.deltaY,D=this._scrollData;if(t.shiftKey){var C=f;f=v,v=C}if(Math.abs(a?r:f||0)<=Math.abs(a?c:v||0)&&(u=!0),!(D.nested&&u&&P.call(this,t,c>0))){if("scroll"==D.showOn){if(!this._enableScroll)return d.call(this,!0),void t.preventDefault();clearTimeout(this._scrollplugin),this._scrollplugin=setTimeout(p.bind("parent"==D.appendTo?this.parentElement:this,{}),D.tOut)}if(this._scrollEnd&&(h={scrollLeft:Math.round(this.scrollLeft),scrollTop:Math.round(this.scrollTop),scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:s(o(this))},this._wheelObj=h,this.classList.contains("lyteTableScroll")&&L.call(this,h)),this._wheelObj){if((l=y.call(this,u,h)).scroll&&u&&(!this._vertDiv||this._vertDiv&&!this._vertDiv.classList.contains("visible"))||l.scroll&&!u&&(!this._horiDiv||this._horiDiv&&!this._horiDiv.classList.contains("visible")))return;i=g.call(this,h,u,u?c:r);var _=this._infiniteScroll;!!_&&this.comp._stopScroll;if(!(_&&c>0||i))return void(D.preventOnEnd&&t.preventDefault());t.preventDefault(),!i&&m&&u&&this.comp.scrollTable.call(this.comp,{yScroll:c},this._wheelObj)}u?e.isIE11Lyte?this._wheelObj&&(this._wheelObj.scrollTop=Math.max(Math.min(this._wheelObj.scrollTop+c,this._wheelObj.scrollHeight-this._wheelObj.bcr.height),0),m&&(t.yScroll=c,this.comp.scroll.call(this,t)),this.scrollTop+=c):e.isIE11Lyte||(this.scrollTop+=c):e.isIE11Lyte?this._wheelObj&&(this._wheelObj.scrollLeft=Math.max(Math.min(this._wheelObj.scrollLeft+r,this._wheelObj.scrollWidth-this._wheelObj.bcr.width),0),m&&(t.xScroll=r,this.comp.scroll.call(this,t)),this.scrollLeft+=r):this.scrollLeft+=r,(e.safari||e.isIE11Lyte||e.isIpad)&&(this._alive=!0,clearTimeout(this._alivetime),this._alivetime=setTimeout(function(){delete this._alive,delete this._alivetime}.bind(this),16),this._scrollFun.call(this,t))}}function C(t){var a,l,i=e.isIE11Lyte||e.safari||e.isIpad,n=e.isIE11Lyte;if(i&&t&&"scroll"==t.type&&this._alive&&!t._byFunc)x.call(this,e.mode.a,e.mode.b,this._wheelObj||{bcr:{}},t);else{var r={scrollLeft:Math.round(this.scrollLeft),scrollTop:Math.round(this.scrollTop),scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:o(this)};this._wheelObj=r,this.classList.contains("lyteTableScroll")&&L.call(this,r),this.prevScrlLeft!=r.scrollLeft&&(a=r.scrollLeft-(this.prevScrlLeft||0),l=0,w.call(this,!1,a,t,r)),this.prevScrlTop!=r.scrollTop&&(l=r.scrollTop-(this.prevScrlTop||0),a=0,w.call(this,!0,l,t,r)),e.mode.b=l,e.mode.a=a,n&&(!i||this._alive&&!t._byFunc)||this.classList.contains("lyteTableScroll")&&this.comp.scroll.call(this,t)}}function _(t){clearTimeout(this._scrollplugin),this._scrollplugin=setTimeout(p.bind("parent"==this._scrollData.appendTo?this.parentElement:this),500)}function L(t){var e=this.comp.$node.getElementsByTagName("lyte-th");if(this._infiniteScroll){t.$nodeClient=this.parentElement.getBoundingClientRect();var a=this.getElementsByClassName("lytePreventInfiniteScroll");t.neglected=[];for(var o=0;o<a.length;o++)a[o].classList.contains("lyteHidden")||t.neglected.push(a[o]);if(t.compNeg=a,null!=this.comp._top){t.topElem=[];for(var l=this.getElementsByTagName("lyte-tbody")[0],i=l.getElementsByTagName("lyte-tr"),n=0;n<i.length;n++)i[n].classList.contains("dummy")||t.topElem.push(i[n]);t.topElem=t.topElem[this.comp._top+t.compNeg.length],t.topElemClient=t.topElem?this.comp.topElem(t.topElem):{},t.bottmElem=l.querySelector("lyte-tr:nth-of-type("+(this.comp._bottom+1+t.compNeg.length)+")"),t.bottmElemClient=t.bottmElem?this.comp.topElem(t.bottmElem):{},t.tbody=l,t.tbodyClient=t.tbody?t.tbody.getBoundingClientRect():{}}}t.scrollDivClient=t.bcr;for(var r=0;r<e.length;r++)e[r].property=e[r].getBoundingClientRect(),e[r].order=r;t.calculated=!0}function x(t,a,o,l){delete this._scrollEnd;var i=this._scrollData.offset,n="rtl"==this._direction;(Math.ceil(o.scrollLeft+o.bcr.width+i.x)>=o.scrollWidth&&(!n||!e.chrome)||(e.firefox||e.safari)&&n&&Math.ceil(-o.scrollLeft+o.bcr.width+i.x)>=o.scrollWidth||n&&e.chrome&&o.scrollLeft==i.x)&&(l.horiScrollEnd=!0),Math.ceil(o.scrollTop+o.bcr.height+i.y)>=o.scrollHeight&&(this._scrollEnd=l.vertScrollEnd=!0),l.yScroll=a,l.xScroll=t,l._byPlugin=!0,this._wheelObj=o}function w(t,a,i,n){var r=this,s=r._vertDiv,d=r._horiDiv;if(0!=parseInt(Math.abs(a))&&(!t||s)&&(t||d)){var c=t?s:d,p=n[(t?"vert":"hori")+"bcr"]||o(c),u=c.children[0],h="scrollTop",m="scrollHeight",f="height",y="top",v="rtl"==r._direction,g=r._scrollData,b=n.bcr,P="parent"!=g.appendTo,D=t&&g.topOffset||0;P&&(p=b),t||(h="scrollLeft",m="scrollWidth",f="width",y="left");var C,_=b[f],L=p[y],w=(_-(L+D-b[y]))/n[m],E=n[h]/n[m],T=g.minLength,k=T?"auto"!=T?T:0:.1*_,S={"aria-valuenow":n[h],"aria-valuemax":n[m]-_,"aira-valuemin":0};if(l(u,f,Math.max(w*_,k).toFixed(3)+"px"),C=v&&u._direction?"translateX("+(C=e.safari&&(_lyteUiUtils.isNegativeScroll()||!window.chrome)||e.firefox?n[h]/n[m]*100*n.bcr[f]/parseFloat(Math.max(w*_,k).toFixed(3)):-(n[m]-_-n[h])/n[m]*100*_/parseFloat(Math.max(w*_,k).toFixed(3)))+"%)":(t?"translateY":"translateX")+"("+E*(_-(L-b[y])-Math.max(0,k-w*_))+"px)",$L(c).attr(S),l(u,"transform",C),P){l(c,f,_+"px");var I=t?d:s,A="translate("+n.scrollLeft+"px,"+n.scrollTop+"px)";l(I,"transform",A),l(c,"transform",A)}r.prevScrlLeft=n.scrollLeft,r.prevScrlTop=n.scrollTop,i.type&&x.call(r,t?0:a,t?a:0,n,i)}}function E(){for(var t=0;t<this.length;t++){var e=this[t],a=e.parentElement;if(a){var o=e._scrollData;o&&("parent"!=o.appendTo&&(a=e),delete e._scrollData);for(var l=a.querySelectorAll("div.lyteScrollContainer"),i=0;i<l.length;i++)l[i].parentElement==a&&(delete l[i]._entertimeout,delete l[i]._leavetimeout,a.removeChild(l[i]));e.classList.remove("lyteScrollBar"),e.removeEventListener("mouseenter",d,!0),e.removeEventListener("wheel",r,!0),e.removeEventListener("touchstart",d,!0),a.removeEventListener("mouseleave",p,!0),e.removeEventListener("mousedown",f),e.removeEventListener("touchmove",v,{passive:!1}),e.removeEventListener("scroll",C,!0),clearTimeout(e._tchtime),e._mouseleave&&(document.removeEventListener("touchcancel",e._mouseleave,!0),document.removeEventListener("touchend",e._mouseleave,!0)),delete e._wheelObj,delete e._vertDiv,delete e._horiDiv,delete e._scrollFun,delete e._alivetime,delete e._alive,delete e._wheelObj,delete e.resetScrollbar,delete a._scrolldiv,delete e._tchtime,delete e._allowTouch,e.classList.contains("eventBinded")&&(e.classList.remove("eventBinded"),e.removeEventListener("wheel",v,!0),e.removeEventListener("keydown",c,!0),e.removeEventListener("mousemove",_,!0)),e.tabIndex=e._tabindex,delete e._tabindex,delete e._wheelObj,delete e._prevPosY,delete e._mouseleave,delete e._prevPosX,delete e._wheelEvt}}return this}function T(){return $L(".lyteScrollBar").scroll("destroy"),window.removeEventListener("scroll",S,!0),this}function k(){for(var t=0;t<this.length;t++){var e=this[t],a=e._scrollData;if(a){if("parent"!=a.appendTo){var o={transform:"",width:"",height:""};$L(e._horiDiv).css(o),$L(e._vertDiv).css(o)}e.resetScrollbar(!0,!0)}}return this}function S(t){var e=t.target.correspondingElement||t.target;document.contains(e)&&(e!=document&&e!=document.body&&e._scrollFun&&e._scrollFun.call(e,t),t._byFunc&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()))}$L.prototype.removeScroll=function(){return E.call(this)},$L.prototype.scroll=function(t){if(t&&t.constructor==String)return"destroy"==t?E.call(this):void("destroyScroll"==t?T.call(this):"reset"==t&&k.call(this));var o=function(t,e,a){var o=t[e];null==o&&(o=a),t[e]=o};(t=t||{}).showOn=t.showOn||"hover",t.keyStep=t.keyStep||30,t.wheelSpeed=t.wheelSpeed||1,o(t,"preventOnEnd",!1),t.offset=t.offset||{x:0,y:0},t.tOut=t.scrollTimeout||500,t.nested=t.nested||!1,t.min=t.min||-1/0,t.max=t.max||1/0,t.aria=t.aria||!1,t.appendTo=t.appendTo||"parent",o(t,"scrollYMarginOffset",5),o(t,"scrollXMarginOffset",5),t.preventXScroll&&(t.preventHorizontal=!0),t.preventYScroll&&(t.preventVertical=!0);for(var i=this,n="parent"==t.appendTo,s=0;s<i.length;s++){var c,u=i[s],h=u.parentElement,m=u.id;m||(u.id=m="LyteScrollbar_"+Date.now()),n&&l(h,"position","relative"),u._scrollData&&$L(u).removeScroll(),u.resetScrollbar=d.bind(i[s]),n&&(h._scrolldiv=u),u._scrollData=t,t.preventVertical||(c=a.call(u,"lyteScrollContainer lyteScrollContainerY",t,void 0,n),"left"==t.verticalPosition&&c.classList.add("left")),t.preventHorizontal||(c=a.call(u,"lyteScrollContainer lyteScrollContainerX",t,!0,n),"top"==t.horizontalPosition&&c.classList.add("top")),e.firefox&&(u.scrollLeft=0,u.scrollTop=0),u.addEventListener("mouseenter",d,!0),u.addEventListener("touchstart",d,!0),u.addEventListener("touchmove",v,{passive:!1}),u.addEventListener("mousedown",f),u.addEventListener("wheel",r,!0),"always"!=t.showOn?(n?h:u).addEventListener("mouseleave",p,!0):setTimeout(d.bind(u),100,{}),u.classList.add("lyteScrollBar"),u._scrollFun=C}return this},$L.prototype.destroyLyteScroll=function(){return T.call(this)},$L.prototype.resetScrollbar=function(){return k.call(this)},window.addEventListener("scroll",S,!0)}}(window),function(t){"undefined"!=typeof $L&&($L.prototype.manageSortable={keyPressed:!1,keyValue:0,countSortable:0,init:!1,prevSortable:!1,mousedownTriggered:!1,draggedEle:null,_ssData:{},measureQueue:[],mutateQueue:[],isEqual:function(t,e){if(t.length!=e.length)return!1;for(var a=0;a<t.length;a++)if(-1==e.indexOf(t[a]))return!1;return!0},convertToArrayOfItems:function(t,e){if("string"!=typeof t&&t.length>0)return t;var a=t.split(","),o=[];return a.forEach((function(t,a){var l=$L(t.trim(),e);if(l.length)for(var i=0;i<l.length;i++)-1==o.indexOf(l[i])&&"TEMPLATE"!=l[i].tagName&&o.push(l[i]);else-1==o.indexOf(l)&&"TEMPLATE"!=l.tagName&&o.push(l)})),o},destroy:function(t){if(t.classList.contains("sortable-parent")){for(var e=Array.from(t.children).filter((function(t){return"TEMPLATE"!=t.tagName})),a=t.getSortableClass(),o=0;o<e.length;o++)e[o].classList.remove("sortable-element",a),e[o]._sortableChildData&&(e[o]._sortableChildData=null);t._mousedown&&(t.removeEventListener("mousedown",t.__mouseDownEvent),t.removeEventListener("touchstart",t.__mouseDownEvent,!0),t._mousedown=!1),t.classList.remove("sortable-parent"),t._sortableParentData.multiSortable&&(t._sortableParentData.allSortableClass=null),delete t._sortableParentData,delete t.getSortableClass}else console.info("ALERT! - U have already destroyed its sortable behaviour.")},cancel:function(t){if(t.classList.contains("sortable-parent")){for(var e=this.getChildElements(t),a=e.length-1;a>=0;a--)if(e[a]._pos!=a){for(var o=void 0,l=a;l>=0;l--)if(e[l]._pos==a){o=e[l];break}o&&(a==e.length-1?_lyteUiUtils.appendChild(t,o):_lyteUiUtils.insertBefore(e[a+1],o)),e=this.getChildElements(t)}}else console.info("ALERT! - The element is not a sortable parent.")},getChildElements:function(t){return Array.from(t.children).filter((function(t){return"TEMPLATE"!=t.tagName}))},disable:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(a.classList.contains("sortable-element")){var o={class:"sortable-element",data:Object.assign({},a._sortableChildData)};a.classList.add("sort-disabled-element"),a.classList.remove("sortable-element",a._sortableChildData.sortableElemClass),a._disabledData=o,a._sortableChildData=null}else console.info(a," cannot be disabled as it is not a sortable element.")}},enable:function(t){for(var e=0;e<t.length;e++){var a=t[e];a._disabledData||a.classList.contains("sort-disabled-element")?(a._sortableChildData=Object.assign({},a._disabledData.data),a.classList.remove("sort-disabled-element"),a.classList.add("sortable-element",a._sortableChildData.sortableElemClass),delete a._disabledData):console.info(a," cannot be enabled as it is not a disabled sortable element.")}},alreadySortable:function(t){for(var e=0;e<t.length;e++)if($L(t[e]).hasClass("sortable-parent")&&t[e]._sortableParentData)return{found:!0,class:t[e]._sortableParentData.sortableElemClass};return{found:void 0}},isOver:function(t,e,a){var o,l,i=$L.prototype.manageSortable,n=void 0!==t.clientX?t.clientX:t.touches[0].clientX,r=void 0!==t.clientY?t.clientY:t.touches[0].clientY;if(a){if((o=i.prevSortable?i.prevSortable.getBoundingClientRect():null)&&(n<o.left||n>o.right||r<o.top||r>o.bottom))i.prevSortable&&i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onLeave&&i.prevSortable._sortableParentData.onLeave(t,{element:e._element,sortable:i.prevSortable,placeholder:e._placeholder}),i.prevSortable=!1;else if((l=document.querySelectorAll(e.connectToSortable+".sortable-parent")).length)for(var s=l.length-1;s>=0;s--){var d=l[s].getBoundingClientRect();if(l[s]._sortableParentData.droppable&&n>=d.left&&n<=d.right&&r>=d.top&&r<=d.bottom){(!i.prevSortable||i.prevSortable&&i.prevSortable!=l[s])&&(i.prevSortable=l[s],i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onEnter&&i.prevSortable._sortableParentData.onEnter(t,{element:e._element,sortable:i.prevSortable,placeholder:e._placeholder}));break}}}else if((o=i.prevSortable?i.prevSortable.getBoundingClientRect():null)&&(n<o.left||n>o.right||r<o.top||r>o.bottom))i.prevSortable&&i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onLeave&&i.prevSortable._sortableParentData.onLeave(t,{element:e._div,sortable:i.prevSortable,placeholder:e._placeholder}),i.prevSortable=!1;else if((l=e.connectedWith.length?e.connectedWith:[e._parentElem]).length)for(s=l.length-1;s>=0;s--){d=l[s].getBoundingClientRect();if(l[s]._sortableParentData.droppable&&n>=d.left&&n<=d.right&&r>=d.top&&r<=d.bottom){(!i.prevSortable||i.prevSortable&&i.prevSortable!=l[s])&&(i.prevSortable=l[s],i.prevSortable._sortableParentData&&i.prevSortable._sortableParentData.onEnter&&i.prevSortable._sortableParentData.onEnter(t,{element:e._div,sortable:i.prevSortable,placeholder:e._placeholder}));break}}},getSortableClasses:function(t,e){var a=e||{};return t.forEach((function(t){if(t&&t._sortableParentData){var e=t._sortableParentData.sortableElemClass;a.hasOwnProperty(e)||(a[e]=t)}})),a},enableDroppable:function(t){$L(t).hasClass("sortable-parent")&&(t[0]._sortableParentData.droppable=!0)},disableDroppable:function(t){$L(t).hasClass("sortable-parent")&&(t[0]._sortableParentData.droppable=!1)}},$L.prototype.sortable=function(e){var a,o,l,i,n=$L.prototype.manageSortable;if(n.init||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),a=e.length-1;a>=0&&e.item(a)!==this;)--a;return a>-1}),Array.from||(Array.from=(a=Object.prototype.toString,o=function(t){return"function"==typeof t||"[object Function]"===a.call(t)},l=Math.pow(2,53)-1,i=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),l)},function(t){var e=this,a=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var l,n=arguments.length>1?arguments[1]:void 0;if(void 0!==n){if(!o(n))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(l=arguments[2])}for(var r,s=i(a.length),d=o(e)?Object(new e(s)):new Array(s),c=0;c<s;)r=a[c],d[c]=n?void 0===l?n(r,c):n.call(l,r,c):r,c+=1;return d.length=s,d})),n.init=!0),"string"!=typeof e){var r=e||{},s=function(){return navigator.userAgent.search("rv:11")>=0?"ie":navigator.userAgent.search("Edge")>=0?"edge":navigator.userAgent.search("Chrome")>=0?"chrome":navigator.userAgent.search("Firefox")>=0?"firefox":navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?"safari":void 0},d=function(){var e=t.navigator.userAgent,a=t.navigator.platform,o=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?o="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(a)?o="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(a)?o="Windows":/Android/.test(e)?o="Android":!o&&/Linux/.test(a)&&(o="Linux"),o};if(!(this.length>1)){var c=null==this.length?this:this[0];if(c._sortableParentData){var p=c._sortableParentData;r._parentElem=null==r._parentElem?p._parentElem:r._parentElem,r.containment=r.containment?r.containment:p.containment,r.containmentBoundaries=r.containmentBoundaries?r.containmentBoundaries:p.containmentBoundaries,r.connected=r.connectedWith?n.isEqual(r.connectedWith,p.connectedWith):p.connected,r.connectedWith=r.connectedWith?r.connectedWith:p.connectedWith,r.orientation=r.orientation?r.orientation:p.orientation,r.droppable=null==r.droppable?p.droppable:r.droppable,r.draggable=null==r.draggable?p.draggable:r.draggable,r.sortableElemClass=r.sortableElemClass?r.sortableElemClass:p.sortableElemClass,r.selectedClass=r.selectedClass?r.selectedClass:p.selectedClass,r.placeholder=r.placeholder?r.placeholder:p.placeholder,r.disabled=r.disabled?r.disabled:p.disabled,r.onReady=r.onReady?r.onReady:p.onReady,r.onSelect=r.onSelect?r.onSelect:p.onSelect,r.onDragStart=r.onDragStart?r.onDragStart:p.onDragStart,r.onDrag=r.onDrag?r.onDrag:p.onDrag,r.onPlaceholder=r.onPlaceholder?r.onPlaceholder:p.onPlaceholder,r.onBeforeDrop=r.onBeforeDrop?r.onBeforeDrop:p.onBeforeDrop,r.onDrop=r.onDrop?r.onDrop:p.onDrop,r.cancel=null==r.cancel?p.cancel:r.cancel instanceof Array?r.cancel:r.cancel.split(","),r.cancelRemove=!(!p.cancelRemove&&1!=r.cancelRemove),r.tolerance=r.tolerance?r.tolerance:p.tolerance,r.items=null==r.items?p.items:r.items instanceof Array?r.items:r.items.split(","),r.cursorAt=null==r.cursorAt?p.cursorAt:r.cursorAt,r.restrict=null==r.restrict?p.restrict:r.restrict instanceof Array?r.restrict:r.restrict.split(","),r.scrollDivX=null==r.scrollDivX?p.scrollDivX:"string"==typeof r.scrollDivX?document.querySelector(r.scrollDivX):r.scrollDivX,r.scrollDivY=null==r.scrollDivY?p.scrollDivY:"string"==typeof r.scrollDivY?document.querySelector(r.scrollDivY):r.scrollDivY,r.scrollBoundaries=r.scrollBoundaries?r.scrollBoundaries:p.scrollBoundaries,r.preventScrollY=null==r.preventScrollY?p.preventScrollY:r.preventScrollY,r.omitRestricted=null==r.omitRestricted?p.omitRestricted:r.omitRestricted,r.onEnter=r.onEnter?r.onEnter:p.onEnter,r.onLeave=r.onLeave?r.onLeave:p.onLeave,r.clone=r.clone?r.clone:p.clone,r.preventDefault=r.preventDefault?r.preventDefault:p.preventDefault,r.appendTo&&"body"==r.appendTo.toLowerCase()&&(r.appendTo=document.body),r.appendTo=r.appendTo?"parent"!=r.appendTo?$L(r.appendTo)[0]:"parent":p.appendTo,r.helper=r.helper?r.helper:p.helper,r.preventDropAtEnd=null==r.preventDropAtEnd?p.preventDropAtEnd:r.preventDropAtEnd,r.preventDropAtStart=null==r.preventDropAtStart?p.preventDropAtStart:r.preventDropAtStart,r.onMultiSelectDrag=r.onMultiSelectDrag?r.onMultiSelectDrag:p.onMultiSelectDrag,r.gridView=r.gridView?r.gridView:p.gridView,r.multiSortable=r.multiSortable?r.multiSortable:p.multiSortable,r.context=r.context?r.context:p.context,r.isSameClass=r.isSameClass?r.isSameClass:p.isSameClass,r.preventScroll=r.preventScroll?r.preventScroll:p.preventScroll,r.threshold=r.threshold?r.threshold:p.threshold,r.dblTouchEvent=r.dblTouchEvent?r.dblTouchEvent:p.dblTouchEvent,r.placeholderAppendTo=r.placeholderAppendTo?r.placeholderAppendTo:p.placeholderAppendTo,r.transitionEnabled=r.transitionEnabled?r.transitionEnabled:p.transitionEnabled,r.transitionDuration=r.transitionDuration?r.transitionDuration:p.transitionDuration,r.aria=r.aria?r.aria:p.aria,r.multiSortable&&r.connectedWith&&(r.allSortableClass=p.allSortableClass?p.allSortableClass:n.getSortableClasses(r.connectedWith,p.allSortableClass)),$L(c).hasClass("sortable-parent")||$L(c).addClass("sortable-parent","lyteSortableParent"),r.executeOnReady&&(r._parentElem.executedOnReady=!1),r.aria&&r._parentElem.setAttribute("tabIndex",0)}else r.connected||r.changed||(++n.countSortable,r.changed=!0),r._parentElem=c,$L(r._parentElem).addClass("sortable-parent","lyteSortableParent"),r.containment=r.containment,r.containmentBoundaries=r.containmentBoundaries?r.containmentBoundaries:{top:0,left:0,right:0,bottom:0},r.connectedWith=r.connectedWith?r.connectedWith:[],r.orientation=r.orientation?r.orientation:"default",r.selectedClass=r.selectedClass?r.selectedClass:"",r.droppable=null==r.droppable||r.droppable,r.draggable=null==r.draggable||r.draggable,r.sortableElemClass=r.sortableElemClass?r.sortableElemClass:c.parentElement&&c.parentElement._sortableParentData?c.parentElement._sortableParentData.sortableElemClass:"horizontal"===r.orientation?"sortable-element-h"+n.countSortable:"vertical"===r.orientation?"sortable-element-v"+n.countSortable:"sortable-element-d"+n.countSortable,r.placeholder=r.placeholder?r.placeholder:"lyteSortablePlaceholder",r.disabled=r.disabled?r.disabled:"lyteSortableDisabledPlaceholder",r.cancel=null==r.cancel?[]:r.cancel instanceof Array?r.cancel:r.cancel.split(","),r.tolerance=r.tolerance?r.tolerance:"intersect",r.items=null==r.items?[]:r.items instanceof Array?r.items:r.items.split(","),r.cursorAt=r.cursorAt,r.restrict=null==r.restrict?[]:r.restrict instanceof Array?r.restrict:r.restrict.split(","),r.scrollDivX=r.scrollDivX?"string"==typeof r.scrollDivX?document.querySelector(r.scrollDivX):r.scrollDivX:void 0,r.scrollDivY=r.scrollDivY?"string"==typeof r.scrollDivY?document.querySelector(r.scrollDivY):r.scrollDivY:void 0,r.scrollBoundaries=r.scrollBoundaries?r.scrollBoundaries:{top:0,left:0,right:0,bottom:0},r.omitRestricted=null!=r.omitRestricted&&r.omitRestricted,r.clone=!!r.clone,r.context=r.context?r.context:document.body,r.preventDefault=null==r.preventDefault?{mousedown:!function(){var e,a=!1;return e=navigator.userAgent||navigator.vendor||t.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(a=!0),a}(),mousemove:!0}:r.preventDefault,r.appendTo&&"body"==r.appendTo.toLowerCase()&&(r.appendTo=document.body),r.appendTo=r.appendTo&&"parent"!=r.appendTo?$L(r.appendTo)[0]:"parent",r.preventDropAtEnd=null==r.preventDropAtEnd||r.preventDropAtEnd,r.preventDropAtStart=null==r.preventDropAtStart||r.preventDropAtStart,r.gridView=!!r.gridView,r.isSameClass=!!r.isSameClass&&r.isSameClass,r.preventScrollY=!!r.preventScrollY&&r.preventScrollY,r.preventScroll=!!r.preventScroll&&r.preventScroll,r.threshold=r.threshold?r.threshold:0,r.dblTouchEvent=!!r.dblTouchEvent&&r.dblTouchEvent,r.placeholderAppendTo=r.placeholderAppendTo?r.placeholderAppendTo:"null",r.transitionEnabled=!!r.transitionEnabled&&r.transitionEnabled,r.transitionDuration=void 0!==r.transitionDuration?r.transitionDuration:500,r.aria=!!r.aria&&r.aria,r.aria&&r._parentElem.setAttribute("tabIndex",0);var u,h,m,f,y,v,g=[0,0],b=0,P=0,D="",C="",_=0,L=0,x=null,w=null,E=!1,T=!1,k=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,S=t.cancelAnimationFrame||t.mozCancelAnimationFrame,I=0,A=0,M=null;r.containmentBoundaries&&(r.containmentBoundaries.top=r.containmentBoundaries.top?r.containmentBoundaries.top:0,r.containmentBoundaries.bottom=r.containmentBoundaries.bottom?r.containmentBoundaries.bottom:0,r.containmentBoundaries.left=r.containmentBoundaries.left?r.containmentBoundaries.left:0,r.containmentBoundaries.right=r.containmentBoundaries.right?r.containmentBoundaries.right:0),r.scrollBoundaries&&(r.scrollBoundaries.top=r.scrollBoundaries.top?r.scrollBoundaries.top:0,r.scrollBoundaries.bottom=r.scrollBoundaries.bottom?r.scrollBoundaries.bottom:0,r.scrollBoundaries.left=r.scrollBoundaries.left?r.scrollBoundaries.left:0,r.scrollBoundaries.right=r.scrollBoundaries.right?r.scrollBoundaries.right:0);var $=function(t,e,a,o,l,i,n){if(function(t,e,a,o,l){return t+e.top>=a.containmentDimensions.top+l&&t+e.top<=a.containmentDimensions.top+(a.containmentDimensions.height-o.height)+l}(t,e,a,o,l))i.style.top=t+"px";else{var r={top:t+e.top,bottom:t+e.top};q(n,r,"top",a.containment)?q(n,r,"bottom",a.containment)||(i.style.top=n.bottom-e.top+"px"):i.style.top=n.top-e.top-l+"px"}},N=function(e){if("Windows"===d()&&n.mouseMoveTriggered)n.mouseMoveTriggered=!1;else if("touchmove"==e.type&&e.preventDefault(),E&&x&&(S(x),E=!1,x=null),T&&w&&(S(w),T=!1,w=null),n.draggedEle&&n.draggedEle.classList.contains("sortable-element-selected")&&n.draggedEle._sortableChildData._isDown){if(v=n.draggedEle){var a=v._sortableChildData;if(Math.abs(u-e.clientX)<=a.threshold&&Math.abs(h-e.clientY)<=a.threshold)return;if(a&&a._isDown){(null==a.preventDefault.mousemove||a.preventDefault.mousemove)&&e.preventDefault(),a.selectedClass&&$L("."+a.selectedClass,a._parentElem).removeClass(a.selectedClass),void 0!==document.body.style.MozUserSelect&&(document.body.style.MozUserSelect="none"),C=a._div,D=a._placeholder,g=a._offset,b=a._marginTop,P=a._marginLeft,y=a.sortableElemClass;var o,l=v.getBoundingClientRect(),i=0;a.scrollDivY?o=a.scrollDivY:a.preventScrollY||(o="horizontal"!=a.orientation&&ht(a._placedPlaceholder?D:C)),o&&(!M||M&&M!=o)&&(A=o.scrollHeight-o.offsetHeight,M=o);var r=!1;if(!function(e,a){return e&&("relative"==t.getComputedStyle(e).position||"fixed"==t.getComputedStyle(e).position||"absolute"==t.getComputedStyle(e).position)&&(!Et(a)||Et(a)&&e.contains(a))}(o,C)?L=0:(r=!0,L=o.scrollTop),!a._placedPlaceholder){I=a.scrollDivX?a.scrollDivX.scrollWidth-a.scrollDivX.clientWidth:0,a._maxScrollWidth=I,a.onDragStart&&lt(a,e),l=Et(v)?v._origin.getBoundingClientRect():v.getBoundingClientRect(),a.containment?a.containmentDimensions=ut(a,v,a.containmentBoundaries):a.containmentDimensions=null;var c=l.width,p=l.height,_=0,N=v.offsetParent;for(a._isRelative&&a.scrollDivX.contains(C)&&(i=a.scrollDivX.scrollLeft),!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==s()&&a._isRelative&&a.scrollDivX.contains(C)&&(i=a.scrollDivX.scrollLeft-a._maxScrollWidth),"table"==N.tagName.toLowerCase()&&""==(_=N.cellSpacing)&&(_=2);("table"==N.tagName.toLowerCase()||"lyte-table-structure"==N.tagName.toLowerCase())&&""==N.style.position;)N=N.offsetParent;var R=ft(C);R&&N!=R&&(N=R),p||(p=v.getBoundingClientRect().height);var B=N.getBoundingClientRect();return a.cancelRemove||(C.style.top=l.top-(B.top+parseInt(_)+parseInt(b))+L+"px"),C.style.left=l.left-(B.left+parseInt(P))+i+"px",C.style.boxSizing="border-box",C.style.zIndex=3001,C.style.width=c+"px",C.style.height=p+"px",Et(C)&&(C.style.visibility=""),"tr"!=v.tagName.toLowerCase()&&"lyte-tr"!=v.tagName.toLowerCase()||mt(v),function(t,e,a,o,l){$L(t).attr("id","dummy"),t.style.width=a+"px",t.style.height=o+"px",e.classList.add("lyteSortableElem"),t.style.padding="0px",t.classList.add(l.placeholder),_lyteUiUtils.insertBefore(Et(e)?e._origin:e,t),t._origin=Et(e)?e._origin.parentElement:e.parentElement}(D,C,c,p,a),U(a,C.parentElement),C.style.position="absolute",C.classList.add("lyteSortableDisablePE"),a._placedPlaceholder=!0,a._div=C,a._placeholder=D,a._prevTop=e.clientY,a._prevLeft=e.clientX,a.onDrag&&it(a,e),n.isOver(e,a),void(a._isMoved=!0)}var V=$L.fastdom.measure((function(){if(n.measureQueue.shift(),v){a.containment&&(a.containmentDimensions=ut(a,v,a.containmentBoundaries)),"mousemove"==e.type?m={x:e.clientX,y:e.clientY}:"touchmove"==e.type&&(m={x:e.touches[0].clientX,y:e.touches[0].clientY});var t=C.offsetParent,d=ft(C);d&&t!=d&&(t=d);var c,p,u=t.getBoundingClientRect();a._isRelative&&a.scrollDivX.contains(C)&&(i=a.scrollDivX.scrollLeft),!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==s()&&a._isRelative&&a.scrollDivX.contains(C)&&(i=a.scrollDivX.scrollLeft-a._maxScrollWidth),l=C.getBoundingClientRect();var h,_,S=o?o.getBoundingClientRect():0;o&&l.left<=S.right&&l.right>=S.left&&(x=k(H.bind(this,a,o,S,A,null,r,m,g,u)),E=!0),a.scrollDivX&&(S=a.scrollDivX.getBoundingClientRect(),(l.left<=S.left||l.right>=S.right-3)&&(w=k(F.bind(this,a,S,m,g,u,a._isRelative)),T=!0));var I=$L.fastdom.mutate((function(){if(n.mutateQueue.shift(),v){if(c=m.x-g[0]-u.left-parseInt(P)+i,p=m.y-g[1]-u.top-parseInt(b)+L,a.containment){var t={top:a.containmentDimensions.top+L,bottom:a.containmentDimensions.top+(a.containmentDimensions.height-l.height)+L,left:a.containmentDimensions.left,right:a.containmentDimensions.left+(a.containmentDimensions.width-l.width)+i};"vertical"==a.orientation||(a.transitionEnabled&&(C.style.transition="left 0.1s ease",a._oldLeft=C.getBoundingClientRect().left),function(t,e,a,o,l,i,n){t+e.left>=a.containmentDimensions.left&&t+e.left<=a.containmentDimensions.left+(a.containmentDimensions.width-o.width)+l?i.style.left=t+"px":t+e.left<n.left?i.style.left=n.left-e.left+"px":t+e.left>n.right&&(i.style.left=n.right-e.left+"px")}(c,u,a,l,i,C,t)),$(p,u,a,l,L,C,t)}else"vertical"==a.orientation?C.style.top=p+"px":"horizontal"==a.orientation?(a.transitionEnabled&&(C.style.transition="left 0.1s ease",a._oldLeft=C.getBoundingClientRect().left),C.style.left=c+"px"):(C.style.left=c+"px",C.style.top=p+"px");l={left:u.left+(c-i),top:u.top+(p-L),right:u.left+(c-i)+l.width,bottom:u.top+(p-L)+l.height},a.onMultiSelectDrag&&st(a,e);var s=$L.fastdom.measure((function(){if(n.measureQueue.shift(),v){if(f=document.elementFromPoint(m.x,m.y),a.multiSortable)if(f){var t=a.allSortableClass;for(var i in t)if(_=$L(f).closest("."+i,t[i])[0])break;!_&&$L(f).hasClass("sortable-parent")&&(_=f)}else _=null;else _=f?f.closest("."+y):null,f&&$L(f).hasClass("sortable-parent")&&(_=f),_&&$L(_).hasClass("sortable-parent")?_._sortableParentData.droppable||(_=!1):_&&_.parentElement._sortableParentData&&!_.parentElement._sortableParentData.droppable&&(_=!1);if(h=_?_.getBoundingClientRect():{},f){var s=$L.fastdom.mutate((function(){if(n.mutateQueue.shift(),v){_&&$L(_).hasClass("sortable-parent")&&0===_.querySelectorAll("."+y).length&&a.droppable&&-1!==a.connectedWith.indexOf(_)&&(_lyteUiUtils.appendChild(_,D),U(a,f,_));var t=void 0!==e.clientX?e.clientX:e.touches[0].clientX,i=void 0!==e.clientY?e.clientY:e.touches[0].clientY;if(_&&yt(_,v.parentElement,v,a.connectedWith,a.containmentDimensions,m))if($L(f).hasClass("sortable-parent")&&vt(f,v.parentElement,v,a.connectedWith,a.containmentDimensions,m)&&bt(f,m)&&Pt(f,m,v))_lyteUiUtils.appendChild(f,D),U(a,f,_);else{if("pointer"==a.tolerance)if("horizontal"===a.orientation){if(t<a._prevLeft){var s=h.x;if(_lyteUiUtils.insertBefore(_,D),a.transitionEnabled){var d=_.getBoundingClientRect().x-s;a._deltaX=d,0!==d&&(a._timeoutId&&(clearTimeout(a._timeoutId),a._droppablePlace.style.transition="none",a._droppablePlace.style.transform="translateX(0px)",a._droppablePlace.offsetHeight),a._droppablePlace=_,a._placeholder=D,_.style.transform=`translateX(-${a._deltaX}px)`,_.offsetHeight,_.style.transition="transform ease",_.style.transitionDuration=a.transitionDuration+"ms",_.style.transform="translateX(0px)",a._timeoutId=setTimeout((()=>{_.style.transition="",_=null}),a.transitionDuration))}U(a,f,_)}else if(t>a._prevLeft){s=h.x;if(_lyteUiUtils.insertAfter(_,D),a.transitionEnabled){d=_.getBoundingClientRect().x-s;a._deltaX=d,0!==d&&(a._deltaX<0&&(a._deltaX=-1*a._deltaX),a._timeoutId&&(clearTimeout(a._timeoutId),a._droppablePlace.style.transition="none",a._droppablePlace.style.transform="translateX(0px)",a._droppablePlace.offsetHeight),a._droppablePlace=_,a._placeholder=D,_.style.transform=`translateX(${a._deltaX}px)`,_.offsetHeight,_.style.transition="transform ease",_.style.transform="translateX(0px)",_.style.transitionDuration=a.transitionDuration+"ms",a._timeoutId=setTimeout((()=>{_.style.transition="",_=null}),a.transitionDuration))}U(a,f,_)}a._prevLeft=t}else(a.gridView&&t<a._prevLeft||i<a._prevTop)&&_.previousElementSibling!=D?(_lyteUiUtils.insertBefore(_,D),U(a,f,_)):(a.gridView&&t>a._prevLeft||i>a._prevTop)&&_.nextElementSibling!=D&&(_lyteUiUtils.insertAfter(_,D),U(a,f,_)),a._prevTop=e.clientY;if("intersect"==a.tolerance)if(a._newLeft=C.getBoundingClientRect().left,"horizontal"===a.orientation){if(l.left<h.left){if(a.transitionEnabled)if(a._newLeft-a._oldLeft<0){var c=h.x;_lyteUiUtils.insertBefore(_,D);d=_.getBoundingClientRect().x-c;a._deltaX=d,0!==d&&0!==d&&(a._timeoutId&&(clearTimeout(a._timeoutId),a._droppablePlace.style.transition="none",a._droppablePlace.style.transform="translateX(0px)",a._droppablePlace.offsetHeight),a._droppablePlace=_,a._placeholder=D,_.style.transform=`translateX(-${a._deltaX}px)`,_.offsetHeight,_.style.transition="transform ease",_.style.transitionDuration=a.transitionDuration+"ms",_.style.transform="translateX(0px)",a._timeoutId=setTimeout((()=>{_.style.transition="",_=null}),a.transitionDuration))}else _lyteUiUtils.insertBefore(_,D);else _lyteUiUtils.insertBefore(_,D);U(a,f,_)}else if(l.right>h.right){if(a.transitionEnabled)if(a._newLeft-a._oldLeft>0){c=h.x;_lyteUiUtils.insertAfter(_,D);d=_.getBoundingClientRect().x-c;a._deltaX=d,0!==d&&(a._deltaX<0&&(a._deltaX=-1*a._deltaX),a._timeoutId&&(clearTimeout(a._timeoutId),a._droppablePlace.style.transition="none",a._droppablePlace.style.transform="translateX(0px)",a._droppablePlace.offsetHeight),a._droppablePlace=_,a._placeholder=D,_.style.transform=`translateX(${a._deltaX}px)`,_.offsetHeight,_.style.transition="transform ease",_.style.transitionDuration=a.transitionDuration+"ms",_.style.transform="translateX(0px)",a._timeoutId=setTimeout((()=>{_.style.transition="",_=null}),a.transitionDuration))}else _lyteUiUtils.insertAfter(_,D);else _lyteUiUtils.insertAfter(_,D);U(a,f,_)}}else(a.gridView&&l.left<h.left||l.top<h.top)&&_.previousElementSibling!=D?(_lyteUiUtils.insertBefore(_,D),U(a,f,_)):(a.gridView&&l.right>h.right||l.bottom>h.bottom)&&_.nextElementSibling!=D&&(_lyteUiUtils.insertAfter(_,D),U(a,f,_))}else!f||$L(f).hasClass("sortable-parent")||Q(a,f)||(f=f.closest(".sortable-parent")),f&&$L(f).hasClass("sortable-parent")&&bt(f,m)&&vt(f,v.parentElement,v,a.connectedWith,a.containmentDimensions,m)&&!a.preventDropAtStart&&!J(a,f)&&O(a,f,v)?(_lyteUiUtils.insertBefore(X(a,f)[0],D),U(a,f,_)):f&&$L(f).hasClass("sortable-parent")&&vt(f,v.parentElement,v,a.connectedWith,a.containmentDimensions,m)&&bt(f,m)&&Pt(f,m,v,r,o)&&(!a.preventDropAtEnd||G(a,f))&&(_lyteUiUtils.appendChild(f,D),U(a,f,_));a._belowElem=null!=f?f:a._belowElem,a.onDrag&&it(a,e),n.isOver(e,a),a._isMoved=!0,a.transitionEnabled||(_=null),f=null}}));n.mutateQueue.push(s)}}}));n.measureQueue.push(s)}}));n.mutateQueue.push(I)}}));n.measureQueue.push(V)}}}else v=null},O=function(t,e,a){var o=X(t,e)[0];return"horizontal"==t.orientation?o&&o.getBoundingClientRect().left>=a.getBoundingClientRect().left:"vertical"==t.orientation?o&&o.getBoundingClientRect().top>=a.getBoundingClientRect().top:o&&o.getBoundingClientRect().top>=a.getBoundingClientRect().top&&o.getBoundingClientRect().left>=a.getBoundingClientRect().left},R=function(e){e.target;if(E&&x&&(S(x),E=!1,x=null),T&&w&&(S(w),T=!1,w=null),n.measureQueue.length)for(;n.measureQueue.length;)$L.fastdom.clear(n.measureQueue.shift());if(n.mutateQueue.length)for(;n.mutateQueue.length;)$L.fastdom.clear(n.mutateQueue.shift());if("mouseup"==e.type&&(document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",R)),"touchend"==e.type&&(document.removeEventListener("touchmove",N,{capture:!0,passive:!1}),document.removeEventListener("touchend",R,!0)),n.prevSortable&&(n.prevSortable=!1),!(n.draggedEle&&$L(n.draggedEle).hasClass("sortable-element-selected")&&n.draggedEle._sortableChildData._isDown))return B(e),v=null,n.draggedEle=null,void(n.mousedownTriggered=!1);if((v=n.draggedEle).classList.remove("lyteSortableDisablePE"),v){var a=v._sortableChildData;v.parentElement;if(a._isDown){a._isDown=!1,C=a._div;var o=(D=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:a._placeholder).parentElement;if(a._isMoved){a._isMoved=!1,a._toIndex=tt(a,D,Array.from(o.children).filter((function(t){return"TEMPLATE"!=t.tagName&&!$L(t).hasClass("sortable-element-selected")})));var l=!0;if(a.onBeforeDrop&&(l=nt(a,e,D,o)),$L(D).hasClass(a.disabled))return Dt(a),n.draggedEle=null,void(n.mousedownTriggered=!1);if(!l)return Dt(a),Et(C)&&C.remove(),C.preventScrollX&&delete C.preventScrollX,n.draggedEle=null,void(n.mousedownTriggered=!1);var i=_t(D)?_t(D):Lt(D),r=i&&i._sortableChildData?Object.assign({},i._sortableChildData):Object.assign({},D.parentElement._sortableParentData);a._fromIndex==a._toIndex&&a._parentElem==o?D.remove():_lyteUiUtils.replaceWith(D,C),Ct(C),D=null,C._sortableChildData=r,a.onDrop&&rt(a,e),Et(C)&&delete C._origin}else Ct(C),Et(C)&&(delete C._origin,C.remove()),"a"==v.tagName.toLowerCase()&&(t.location.href=v.href);a._div=null,a._placeholder=null,a._placedPlaceholder=!1,a._returnElemBelow=null,a._belowElem=null,a._source=null,a._fromIndex=null}a.selectedClass&&$L("."+a.selectedClass,a._parentElem).removeClass(a.selectedClass),$L(v).removeClass("sortable-element-selected"),g=null,null,null,m=null,f=null,null,b=null,P=null,y=null,v=null,D=null,C=null,M=null}B(e),n.draggedEle=null,n.mousedownTriggered=!1},B=function(t){for(var e=t.target.ownerDocument.querySelectorAll(".lyteSortablePlaceholder"),a=0;a<e.length;a++)if(e[a]._callee){var o=e[a]._callee;_lyteUiUtils.replaceWith(e[a],o),$L(o).removeClass("sortable-element-selected"),Ct(o),Et(o)&&o.remove()}else e[a].remove();var l=t.target.ownerDocument.querySelectorAll(".sortable-element-selected");for(a=0;a<l.length;a++)$L(l[a]).removeClass("sortable-element-selected"),Ct(l[a]),Et(l[a])&&l[a].remove()};c.changeScrollBoundaries=function(t){t&&(t.top=void 0!==t.top?t.top:c._sortableParentData.scrollBoundaries.top,t.bottom=void 0!==t.bottom?t.bottom:c._sortableParentData.scrollBoundaries.bottom,t.left=void 0!==t.left?t.left:c._sortableParentData.scrollBoundaries.left,t.right=void 0!==t.right?t.right:c._sortableParentData.scrollBoundaries.right);var e=c.querySelector(".sortable-element-selected");e&&(e._sortableChildData.scrollBoundaries=t),c._sortableParentData.scrollBoundaries=t},c.addToSortable=function(t){t._sortableChildData=c._sortableParentData,$L(t).addClass("sortable-element "+c._sortableParentData.sortableElemClass)},c.getSortableClass=function(){return c._sortableParentData.sortableElemClass},c.removeFromSortable=function(t){delete t._sortableChildData,$L(t).removeClass("sortable-element "+c._sortableParentData.sortableElemClass)},c.addToConnectedWith=function(t,e){var a=c._sortableParentData.connectedWith?c._sortableParentData.connectedWith:[];if(void 0!==t.length)for(var o=0;o<t.length&&-1===a.indexOf(t[o]);o++)a.push(t[o]);else a.push(t);var l=a.indexOf(c);a.splice(l,1),a.push(c),c._sortableParentData.connectedWith=a;var i=c.querySelector(".sortable-element-selected"),n=0;if(i){var s=c._sortableParentData.scrollDivX,d=s.children;n=(n=i.getBoundingClientRect().right-d[d.length-1].getBoundingClientRect().right)>0?n:0,I=c._sortableParentData&&s?s.scrollWidth-s.clientWidth:0,i._sortableChildData.connectedWith=a,i._sortableChildData._maxScrollWidth=I-n,i.parentElement._sortableParentData._maxScrollWidth=I-n,c._sortableParentData._maxScrollWidth=I-n}var p=$L(t).not(".sortable-parent");p.length&&((e=e||{}).isSameClass&&(e.connectedWith=a,e.connected=!0),e.restrict=e.restrict?e.restrict:r.restrict,e.sortableElemClass=r.sortableElemClass,e._parentElem=$L(t)[0],$L(p).sortable(Object.assign({},e)))},c.addScrollDivXY=function(t,e){t=t?"string"==typeof t?document.querySelector(t):t:void 0;(e=e?"string"==typeof e?document.querySelector(e):e:void 0)&&e!==r.scrollDivY&&(r.scrollDivY=e,c._sortableParentData.scrollDivY=r.scrollDivY),t&&t!==r.scrollDivX&&(r.scrollDivX=t,c._sortableParentData.scrollDivX=r.scrollDivX)};var U=function(t,e,a){!t.onPlaceholder||dt(t,e||a.parentElement)?(D.classList.contains(t.disabled)&&D.classList.remove(t.disabled),D.classList.add(t.placeholder)):(D.classList.contains(t.placeholder)&&D.classList.remove(t.placeholder),D.classList.add(t.disabled)),t._returnElemBelow=a||e},F=function(t,e,a,o,l,i){if(t._div){var n=t._div.getBoundingClientRect();if(_=t.scrollDivX.scrollLeft,I=t._maxScrollWidth,!_lyteUiUtils.getRTL()||!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==s()&&!i)if(n.right>=e.right+t.scrollBoundaries.right&&_<I)I-_>=5?(t.scrollDivX.scrollLeft+=5,i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left+5+_+"px")):(t.scrollDivX.scrollLeft+=(I-_)%5,i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left+(I-_)%5+_+"px"));else{if(!(n.left<=e.left-t.scrollBoundaries.left&&_>0))return S(w),T=!1,void(w=null);i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left-(I-_>5?5:5-(I-_))+_+"px"),t.scrollDivX.scrollLeft-=5}else if(!_lyteUiUtils.isNegativeScroll()&&"chrome"==s()&&i)if(n.right>=e.right+t.scrollBoundaries.right&&_<I)I-_>=5?(t.scrollDivX.scrollLeft+=5,i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left+5+(_-I)+"px")):(t.scrollDivX.scrollLeft+=5-(I-_),i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left+(5-(I-_))+_+"px"));else{if(!(n.left<=e.left-t.scrollBoundaries.left&&_>0))return S(w),T=!1,void(w=null);i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left-(I-_+5)+"px"),t.scrollDivX.scrollLeft-=5}else if(_lyteUiUtils.isNegativeScroll()&&"chrome"==s()||"firefox"==s()||"safari"==s())if(n.right>=e.right+t.scrollBoundaries.right&&_<0)I+_>=5?(t.scrollDivX.scrollLeft+=5,i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left+5+_+"px")):(t.scrollDivX.scrollLeft+=5-(I+_),i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left+(5-(I+_))+_+"px"));else{if(!(n.left<=e.left-t.scrollBoundaries.left&&_>-I))return S(w),T=!1,void(w=null);i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left+(_-5)+"px"),t.scrollDivX.scrollLeft-=5}else if("ie"==s()||"edge"==s())if(n.right>=e.right&&_>0)t.scrollDivX.scrollLeft-=_>=5?5:_;else{if(!(n.left<=e.left-t.scrollBoundaries.left&&_<I))return S(w),T=!1,void(w=null);i&&t.scrollDivX.contains(t._div)&&(t._div.style.left=a.x-o[0]-l.left-_-5+"px"),t.scrollDivX.scrollLeft+=5}w=k(F.bind(this,t,e,a,o,l,i))}},H=function(t,e,a,o,l,i,n,r,s){$L.fastdom.measure((function(){if(t._div){t.containment?t.containmentDimensions=ut(t,t._div,t.containmentBoundaries):t.containmentDimensions=null;var d=e===document.documentElement,c=(d?0:e.getBoundingClientRect().top)-t.scrollBoundaries.top,p=e!==document.documentElement?e.offsetHeight:e.clientHeight;if(p<=$L(t._div)[0].parentElement.offsetHeight&&!d){var u=$L(t._div)[0].parentElement.querySelectorAll("."+t.sortableElemClass);u=u[u.length-1];var h=!1}else h=!0;o=e.scrollHeight-p,$L.fastdom.mutate((function(){var m=t._div.getBoundingClientRect(),f=e.scrollTop;if(t._div){if(z(t,m,c)&&f>0&&(q(t.containmentDimensions,m,"top")||!Y(t,e,d,p,"top")))i&&e.contains(t._div)?q(t.containmentDimensions,m,"top",t.containment)?t._div.style.top=n.y-r[1]-s.top-(o-f>=10?10:o-f)+f+"px":t._div.style.top=t.containmentDimensions.top-s.top-(o-f>=10?10:o-f)+f+"px":e===document.documentElement&&q(t.containmentDimensions,m,"top",t.containment)&&(t._div.style.top=t._div.offsetTop-(o-f>=10?10:o-f)+"px"),e.scrollTop-=10;else{if(!(W(t,m,c,p)&&f<o)||!q(t.containmentDimensions,m,"bottom",t.containment)&&Y(t,e,d,p,"bottom")||!h&&!V(t,p,u,c))return d?!j(t,"first")&&(t.containmentDimensions&&t.containmentDimensions.top>=m.top||m.top-parseInt(t._marginTop)<=c&&0==f)?K(t,"first"):!j(t,"last")&&(t.containmentDimensions&&t.containmentDimensions.bottom<=m.bottom||f==o&&m.bottom>=c+t.scrollBoundaries.top+p+t.scrollBoundaries.bottom-3)&&K(t,"last"):0==f&&m.top-parseInt(t._marginTop)<=c&&!j(t,"first")?K(t,"first"):f>=o&&m.bottom>=c+t.scrollBoundaries.top+p+t.scrollBoundaries.bottom-3&&!j(t,"last")&&K(t,"last"),S(x),E=!1,void(x=null);o-f>10?(i&&e.contains(t._div)?q(t.containmentDimensions,m,"bottom",t.containment)?t._div.style.top=t._div.offsetTop+10+"px":t._div.style.top=t.containmentDimensions.bottom-t._div.offsetHeight-s.top+(o-f>=10?10:o)+f+"px":e===document.documentElement&&q(t.containmentDimensions,m,"bottom",t.containment)&&(t._div.style.top=t._div.offsetTop+10+"px"),e.scrollTop+=10):(i&&e.contains(t._div)?t._div.style.top=n.y-r[1]-s.top+o-f+f+"px":e===document.documentElement&&(t._div.style.top=t._div.offsetTop+o-f+"px"),e.scrollTop+=o-f)}x=k(H.bind(this,t,e,a,o,l,i,n,r,s))}}))}}))},V=function(t,e,a,o){return a.getBoundingClientRect().bottom>o+t.scrollBoundaries.top+t.scrollBoundaries.bottom+e},W=function(t,e,a,o,l){return e.bottom>=a+o+t.scrollBoundaries.top+t.scrollBoundaries.bottom-3},Y=function(t,e,a,o,l){if(t.containment){var i=(a?0:e.getBoundingClientRect().top)-t.scrollBoundaries.top,n=t._div.parentElement.getBoundingClientRect();return"top"==l?n.top>i:n.bottom<i+o+t.scrollBoundaries.top-t.scrollBoundaries.bottom}},q=function(t,e,a,o){if(o){if("top"==a)return t.top<e.top;if("bottom"==a)return t.bottom>e.bottom}return!0},z=function(t,e,a){return e.top-parseInt(t._marginTop)<=a},j=function(t,e){var a=t._placeholder,o=a.parentElement,l=X(t,o);return"first"===e?l[0]==a:l[l.length-1]==a},X=function(t,e){return t&&t.omitRestricted?Array.from(e.children).filter((function(e){return"TEMPLATE"!=e.tagName&&Q(t,e)})):Array.from(e.children).filter((function(t){return"TEMPLATE"!=t.tagName}))},K=function(t,e){var a=t._placeholder,o=a._origin,l=X(t,o);if(!t.gridView)if("first"===e){for(var i=0;i<l.length;i++)if(!t.preventDropAtStart||Q(t,l[i])&&!l[i].classList.contains("sort-disabled-element")){_lyteUiUtils.insertBefore(l[i],a);break}}else for(i=l.length-1;i>=0;i--)if(!t.preventDropAtEnd||Q(t,l[i])&&!l[i].classList.contains("sort-disabled-element")){_lyteUiUtils.insertAfter(l[i],a);break}},Q=function(t,e){for(var a=0;a<t.restrict.length;a++)if(e.matches(t.restrict[a]))return!1;return!0},G=function(t,e){var a=X(null,e);return!a.length||Q(t,a[a.length-1])},J=function(t,e){var a=X(null,e);return!a.length||Q(t,a[0])},Z=function(t,e){if(!t.draggable)return!1;for(var a=0;a<t.cancel.length;a++)for(var o=e;o.parentElement;){if(o.matches(t.cancel[a]))return!1;if($L(o).hasClass("sortable-element"))break;o=o.parentElement}return!0},tt=function(t,e,a){if(t.omitRestricted)for(var o=0;o<a.length;o++)Q(t,a[o])||(a.splice(o,1),--o);for(var l=0;l<a.length;l++)if("TEMPLATE"!=a[l].tagName&&e==a[l])return l},et=function(t){var e=Et(t._div)?t._div._origin:t._div;if(t.omitRestricted){for(var a=Array.from(t._source.children).filter((function(t){return"TEMPLATE"!=t.tagName})),o=0;o<a.length;o++)Q(t,a[o])||(a.splice(o,1),--o);return a.indexOf(e)}return Array.from(t._source.children).filter((function(t){return"TEMPLATE"!=t.tagName})).indexOf(e)},at=function(t){var e=Et(t._div)?t._div._origin:t._div,a=t._parentElem;return e.classList.contains("sortable-parent")&&e.parentElement.classList.contains("sortable-parent")&&(a=e.parentElement),a},ot=function(t,e){t._div.preventScrollX=function(e){t._div._sortableChildData.preventScroll=e,t._parentElem._sortableParentData.preventScroll=e};var a=t.onSelect(t._div,t._fromIndex,t._source,e);return null==a||1==a||(delete t._div.preventScrollX,!1)},lt=function(t,e){t.onDragStart(t._div,t._source,e,t._div._origin)},it=function(t,e){var a=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:t._placeholder;t.onDrag(t._div,t._returnElemBelow,e,a,t._belowElem)},nt=function(t,e,a){var o=t.onBeforeDrop(t._div,t._returnElemBelow,a,t._fromIndex,t._toIndex,t._source,a?a.parentElement:null,e);return null==o||o},rt=function(t,e){t.onDrop(t._div,t._div._sortableChildData._parentElem,t._returnElemBelow,t._fromIndex,t._toIndex,t._source,e)},st=function(t,e){var a=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:t._placeholder;t.onMultiSelectDrag(t._div,e,a,a.parentElement)},dt=function(t,e){if(e.id&&"dummy"==e.id)e=e.parentElement;else for(;e&&!$L(e).hasClass("sortable-parent");)e=e.parentElement;var a=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:t._placeholder,o=t.onPlaceholder(t._div,a,t._parentElem,a?a.parentElement:null);return null==o||o},ct=X(r,r._parentElem);if(r.dblTouchEvent){var pt=0;r._parentElem.__mouseDownEvent=function(t){if("mousedown"==t.type)Mt(t);else{var e=(new Date).getTime(),a=t.touches;t.touches[0].clientY;const o=200;1==a.length&&(Z(r._parentElem._sortableParentData,t.target)&&$L(t.target).one("touchend",(function(t){t.preventDefault()})),e-pt<o&&1==a.length&&(pt=0,t.preventDefault(),Mt(t))),pt=e}}}else r._parentElem.__mouseDownEvent=Mt;r._parentElem.__mouseMoveEvent=N,r._parentElem.__mouseUpEvent=R,r._parentElem.__keydownEvent=function(t){var e=r.sortableElemClass,a=t.target,o=r._parentElem.children,l="Mac OS"==d()?t.metaKey:t.ctrlKey;if(13==t.keyCode&&a.classList.contains("sortable-parent")&&(o[0].focus(),r.focusIndex=0,o[0].tabIndex=0),27==t.keyCode){var i=a.closest("."+e),n=r.restrict;if(!i&&n.length)for(var s=0;s<n.length&&!(i=a.closest(n[s]));s++);if(i){o[r.focusIndex]&&(o[0].tabIndex=-1);var c=Array.from(o).findIndex((function(t){return t==i}));r.focusIndex=c,i.focus()}}var p=Q(r,a);!a.classList.contains(e)&&p||(40==t.keyCode||39==t.keyCode?(l&&p?It(o,r,1,t):At(o,r,1),t.preventDefault()):38!=t.keyCode&&37!=t.keyCode||(l&&p?It(o,r,-1,t):At(o,r,-1),t.preventDefault()))},r._parentElem._sortableParentData=r;for(St=0;St<ct.length;St++)ct[St]._pos=St,r.aria&&$L(ct[St]).attr("tabIndex",-1),Q(r,ct[St])&&!ct[St].classList.contains("sortable-element-selected")&&(ct[St]._sortableChildData=r,$L(ct[St]).addClass("sortable-element "+r.sortableElemClass));r.draggable&&!r._parentElem._mousedown&&(r.aria&&r._parentElem.addEventListener("keydown",r._parentElem.__keydownEvent),r._parentElem.addEventListener("mousedown",r._parentElem.__mouseDownEvent),r._parentElem.addEventListener("touchstart",r._parentElem.__mouseDownEvent,!0),r._parentElem._mousedown=!0),!r.connected&&r.connectedWith.length>0&&(r.connectedWith=n.convertToArrayOfItems(r.connectedWith,r.context),r.connectedWith.forEach((function(t){var e=r.connectedWith.concat(),a=e.indexOf(t);e.splice(a,1),e.push(t),r.multiSortable&&p&&p.connectedWith?r.connectedWith=p.connectedWith:$L(t).sortable({_parentElem:$L(t)[0],connectedWith:e,connected:!0,restrict:r.restrict,sortableElemClass:r.sortableElemClass,dblTouchEvent:r.dblTouchEvent})}))),r.onReady&&!r._parentElem.executedOnReady&&(!function(t){t.onReady(t._parentElem)}(r),r._parentElem.executedOnReady=!0);var ut=function(t,e,a){if("parent"==t.containment)return{left:(o=Et(e)?e._origin.parentElement.getBoundingClientRect():e.parentElement.getBoundingClientRect()).left-a.left,right:o.right+a.right,top:o.top-a.top,bottom:o.bottom+a.bottom,height:o.height+a.top+a.bottom,width:o.width+a.left+a.right,offsetLeft:Et(e)?e._origin.parentElement.offsetLeft-a.left:e.parentElement.offsetLeft-a.left,offsetTop:Et(e)?e._origin.parentElement.offsetTop-a.top:e.parentElement.offsetTop-a.top};var o,l=null==$L(t.containment).length?null:$L(t.containment)[0];return{left:(o=l.getBoundingClientRect()).left-a.left,right:o.right+a.right,top:o.top-a.top,bottom:o.bottom+a.bottom,height:o.height+a.top+a.bottom,width:o.width+a.left+a.right,offsetLeft:l.offsetLeft-a.left,offsetTop:l.offsetTop-a.top}},ht=function(e){for(var a=e.parentElement;e.parentElement;)if(e=e.parentElement,a.scrollHeight>e.clientHeight&&("hidden"!=t.getComputedStyle(e).overflowY&&"visible"!=t.getComputedStyle(e).overflow||e.matches(".lyteScrollBar")/*!(elem.style.overflow && elem.style.overflow == 'hidden')*/))return e;return null},mt=function(t){for(var e=t.children,a=[],o=0;o<e.length;o++)"td"!=e[o].tagName.toLowerCase()&&"lyte-td"!=e[o].tagName.toLowerCase()||(e[o].__prevWidth=e[o].style.width,a[o]=e[o].__prevWidth||e[o].getBoundingClientRect().width+"px");for(o=0;o<e.length;o++)"td"!=e[o].tagName.toLowerCase()&&"lyte-td"!=e[o].tagName.toLowerCase()||(e[o].style.width=a[o])},ft=function(t){for(;t.parentElement;){t=t.parentElement;var e=getComputedStyle(t);if("relative"==e.position||"absolute"==e.position)return t}return null},yt=function(t,e,a,o,l,i){if("dummy"!=t.id){if(l&&(i.x<l.left||i.x>l.right||i.y<l.top||i.y>l.bottom))return!1;if(a.parentElement==t.parentElement||t.parentElement==a._sortableChildData._parentElem)return!0;if(-1!=o.indexOf(t.parentElement)&&t._sortableChildData.droppable)return!0}return!1},vt=function(t,e,a,o,l,i){return(!l||!(i.x<l.left||i.x>l.right||i.y<l.top||i.y>l.bottom))&&(a.parentElement==t||t==e||!(-1==o.indexOf(t)||!gt(t)))},gt=function(t){for(var e,a=t.children,o=0;o<a.length;o++)if(a[o]!=t.querySelector("#dummy")&&"TEMPLATE"!=a[o].tagName&&$L(a[o]).hasClass("sortable-element")){e=a[o];break}return e&&e._sortableChildData?e._sortableChildData.droppable:t._sortableParentData.droppable},bt=function(e,a){var o=t.getComputedStyle(e),l=e.getBoundingClientRect();return a.x>l.left+parseFloat(o.paddingLeft||0)&&a.x<l.right-parseFloat(o.paddingRight||0)&&a.y>l.top+parseFloat(o.paddingTop||0)&&a.y<l.bottom-parseFloat(o.paddingBottom||0)},Pt=function(t,e,a,o,l){for(var i=t.children,n=0,r=[],s=0;s<i.length;s++)"TEMPLATE"!=i[s].tagName&&"dummy"!=i[s].id&&Q(t._sortableParentData,i[s])?r.push(i[s]):n++;return n==i.length||(1==r.length&&r[r.length-1]==a||r.length>1&&r[r.length-1]==a&&a.getBoundingClientRect().top>r[r.length-2].getBoundingClientRect().bottom+(o?l.scrollTop:0)||a.getBoundingClientRect().top>r[r.length-1].getBoundingClientRect().bottom+(o?l.scrollTop:0))},Dt=function(t){$L(t._div).removeClass("sortable-element-selected"),Ct(t._div),t._placeholder.remove()},Ct=function(t){r.transitionEnabled&&(t.style.transition=""),t.style.position="",t.style.top="",t.style.left="",t.style.width="",t.style.height="",t.style.zIndex="",t.style.boxSizing="",$L(t).removeClass("lyteSortableElem"),$L(t).removeClass("lyteSortableDisablePE"),Et(t)&&$L(t).removeClass("sortable-helper"),"tr"!=t.tagName.toLowerCase()&&"lyte-tr"!=t.tagName.toLowerCase()||function(t){for(var e=t.children,a=0;a<e.length;a++)"td"!=e[a].tagName.toLowerCase()&&"lyte-td"!=e[a].tagName.toLowerCase()||(e[a].style.width=e[a].__prevWidth)}(t)},_t=function(t){for(;t.previousElementSibling;)if("TEMPLATE"!=(t=t.previousElementSibling).tagName&&$L(t).hasClass("sortable-element"))return t;return null},Lt=function(t){for(;t.nextElementSibling;)if("TEMPLATE"!=(t=t.nextElementSibling).tagName&&$L(t).hasClass("sortable-element"))return t;return null},xt=function(t,e){if(!(t.items.length>0))return!0;for(var a=0;a<t.items.length;a++)for(var o=document.querySelectorAll(t.items[a]),l=0;l<o.length;l++)if(o[l]==e)return!0;return!1},wt=function(t,e){var a;if(e)for(var o=(a=t.cloneNode(e)).children,l=t.children,i=0;i<o.length;i++){var n=l[i].getBoundingClientRect();o[i].style.width=n.width+"px",o[i].style.height=n.height+"px",o[i].classList.add("lyteSortableDummyTr")}else(a=t.cloneNode()).innerHTML="",a.style.boxSizing="border-box";return a._callee=t,a.classList.remove("sortable-element-selected","sortableElem"),Et(t)&&(a.style.visibility=""),a},Et=function(t){return t.classList.contains("sortable-helper")||t._isHelper};return this}kt=this;r.changed||(++n.countSortable,r.changed=!0);var Tt=n.alreadySortable(this);Tt.found&&(r.sortableElemClass=Tt.class);for(St=0;St<kt.length;St++)kt[St]._sortableParentData&&r.isSameClass&&(kt[St]._sortableParentData.connectedWith.length!==$L(r.connectedWith,r.context).length?r.connectedWith=n.convertToArrayOfItems(r.connectedWith,r.context):r.connectedWith=kt[St]._sortableParentData.connectedWith),$L(kt[St]).sortable(Object.assign({},r))}else if("destroy"===e)if(this.length>1)for(var kt=this,St=0;St<kt.length;St++)n.destroy(kt[St]);else n.destroy(this[0]);else if("cancel"===e)if(this.length>1)for(var kt=this,St=0;St<kt.length;St++)n.cancel(kt[St]);else n.cancel(this[0]);else"disable"===e?n.disable(this):"enable"===e?n.enable(this):"disableDroppable"===e?n.disableDroppable(this):"enableDroppable"===e&&n.enableDroppable(this);function It(t,e,a,o){var l=t[e.focusIndex],i=e.focusIndex;e.focusIndex+=a;for(var n=t[e.focusIndex];n&&!Q(e,n)&&e.focusIndex>=0;)n=t[e.focusIndex+a],e.focusIndex+=a;n&&n!==l?(a>0?Lyte.Component.insertAfter(n,l):Lyte.Component.insertBefore(n,l),e._div=l,e._fromIndex=i,e._toIndex=e.focusIndex,e.onDrop&&rt(e,o),e._div=null,e._fromIndex=null,e._toIndex=null,l.focus()):e.focusIndex=i}function At(t,e,a){t[e.focusIndex].tabIndex=-1,e.focusIndex+=a,e.focusIndex<0&&(e.focusIndex=t.length-1),e.focusIndex>=t.length&&(e.focusIndex=0),t[e.focusIndex].tabIndex=0,t[e.focusIndex].focus()}function Mt(e){if(3!=e.which)if(u=e.clientX,h=e.clientY,n.mousedownTriggered)n.mousedownTriggered=!1;else{var a=e.target;if(v=function(t){for(;t;){if($L(t).hasClass("sortable-element")){v=t;break}t=t.parentElement}return t||(v=null,n.draggedEle=null),v}(a),function(t,e){return t&&Z(t._sortableChildData||t.parentElement._sortableParentData,e)&&xt(t._sortableChildData||t.parentElement._sortableParentData,e)}(v,a)){n.draggedEle=v;var o=v._sortableChildData||v.parentElement._sortableParentData;(null==o.preventDefault.mousedown||o.preventDefault.mousedown)&&e.preventDefault(),v.parentElement&&!v.classList.contains(v.parentElement._sortableParentData.sortableElemClass)&&v.classList.add(v.parentElement._sortableParentData.sortableElemClass),"function"==typeof o.helper&&(o=function(t){var e=t.helper(v);return e&&(e._isHelper=!0,e.classList.add("sortable-helper"),e._sortableChildData=Object.assign({},v._sortableChildData),e.classList.add(v.parentElement._sortableParentData.sortableElemClass),e._origin=v,n.draggedEle=e,"parent"==t.appendTo?_lyteUiUtils.appendChild(v.parentElement,e):_lyteUiUtils.appendChild($L(t.appendTo)[0],e),t=e._sortableChildData,e.style.visibility="hidden"),t}(o)),D=wt(n.draggedEle,o.clone),o._div=C=n.draggedEle;var l=!0;if(o._source=at(o),o._fromIndex=et(o),o.onSelect&&(l=ot(o,e)),l){o.selectedClass&&v.classList.add(o.selectedClass),C.classList.add("sortable-element-selected");var i=t.getComputedStyle(C),r=Et(C)?C._origin.getBoundingClientRect():C.getBoundingClientRect();o.scrollDivX&&"relative"==t.getComputedStyle(o.scrollDivX).position?o._isRelative=!0:o._isRelative=!1,i.marginTop&&(b=i.marginTop),i.marginLeft&&(P=i.marginLeft),function(t,e,a){"mousedown"==t.type?(g=[e.cursorAt&&e.cursorAt.left||t.clientX-a.left,e.cursorAt&&e.cursorAt.top||t.clientY-a.top],document.addEventListener("mousemove",N),document.addEventListener("mouseup",R),n.mousedownTriggered=!0,"Windows"===d()&&(n.mouseMoveTriggered=!0)):"touchstart"==t.type&&(g=[e.cursorAt&&e.cursorAt.left||t.touches[0].clientX-a.left,e.cursorAt&&e.cursorAt.top||t.touches[0].clientY-a.top],document.addEventListener("touchmove",e._parentElem.__mouseMoveEvent,{capture:!0,passive:!1}),document.addEventListener("touchend",e._parentElem.__mouseUpEvent,!0))}(e,o,r),o._isDown=!0,o._placeholder=D,o._offset=g,o._marginTop=b,o._marginLeft=P,o._event=e,o._placedPlaceholder=!1,n.draggedEle._sortableChildData||(n.draggedEle._sortableChildData=o),D=null,C=null,v=null}else o.cancelRemove||(o.helper&&n.draggedEle.remove(),n.draggedEle=null,v=null)}else v=null}}})}(window),function(t){if($L){var e=(a=new Map,o=new Map,l=0,i={fnId:0},document.addEventListener("message",(function(t){var e=t.data.fnId;e&&o[e]()})),function(t){a[t]||(l++,a[t]=l,o[l]=t),i.fnId=a[t],postMessage(i,"*")});$L.prototype.mIManager={KEY:{BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,SPACE:32,HOME:36,END:35},inputBuffer:[],currentDataQuery:null,textarea:null,escapeMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},bindResize:!1,id:null,bindScroll:!1,bindClick:!1,searchTriggeredId:!1,mentionRegex:new RegExp("\\@\\[\\d+\\:\\w+\\]","gi"),encodeMsg:function(t,e){var a=$L.prototype.mIManager,o="",l=0;return e.forEach((function(e){-1!=t.indexOf(e)&&(o+=a.htmlEncode(t.substring(0,t.indexOf(e)))+e,l=t.indexOf(e)+e.length,t=t.substring(l))})),o+=a.htmlEncode(t)},htmlEncode:function(t){var e=$L.prototype.mIManager,a="(?:"+Object.keys(e.escapeMap).join("|")+")",o=RegExp(a),l=RegExp(a,"g");return t=null==t?"":""+t,o.test(t)?t.replace(l,(function(t){return e.escapeMap[t]})):t},mentionsSyntax:function(t){return"["+t.value+":"+t.id+"]"},createElement:function(t,e,a){var o=document.createElement(t);return e&&(o.id=e),a&&$L(o).addClass(a),o},setCaratPosition:function(t,e){if(t.createTextRange){var a=t.createTextRange();a.move("character",e),a.select()}else if(t.selectionStart){if("LYTE-INPUT"===t.tagName)t.querySelector("INPUT").setSelectionRange(e,e);else t.setSelectionRange(e,e);t.focus()}else t.focus()},init:function(e){var a=$L.prototype.mIManager,o=a.createElement("div",null,"lyteMIWrapper");_lyteUiUtils.insertBefore(e,o),_lyteUiUtils.appendChild(o,e);var l=a.createElement("div",null,"lyteMIDropdown");_lyteUiUtils.insertAfter(e,l),a.copyTextarea(e);var i=t.getComputedStyle(e),n=a.createElement("div",null,"lyteMentions");n.style.fontFamily=i.fontFamily,n.style.fontSize=i.fontSize,n.style.fontWeight=i.fontWeight;var r=a.createElement("div",null,"lyteMentionsInnerDiv");return _lyteUiUtils.appendChild(n,r),_lyteUiUtils.insertBefore(e,n),l},rtrim:function(t){return t.replace(/\s+$/,"")},ltrim:function(t){return t.replace(/^\s+/,"")},highlightContent:function(t,e){return e||e.length?t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>"):t},copyTextarea:function(t){var e=$L.prototype.mIManager,a=["paddingTop","paddingRight","paddingBottom","paddingLeft","marginTop","marginRight","marginBottom","marginLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor","box-sizing","-moz-box-sizing","-webkit-box-sizing"];if("textarea"!==t.type&&"text"!==t.type)return!1;var o=$L(t),l=$L(e.createElement("div")).css({display:"none","word-wrap":"break-word"}),i=parseInt(o.css("line-height"),10)||parseInt(o.css("font-size"),"10"),n=(parseInt(o.css("height"),10),parseInt(o.css("max-height"),10)||Number.MAX_VALUE);function r(t,e){var a=Math.floor(parseInt(t||o.outerWidth(),10));o[0]._mIData&&o[0]._mIData._overlayDiv&&$L(o[0].previousElementSibling).css("fontSize",o.css("fontSize")),(e||l.outerWidth())!==a&&(l.css({width:a+"px",fontSize:o.css("fontSize")}),"true"===l[0].getAttribute("setHeight")?l[0].setAttribute("setHeight","false"):d(!0))}function s(t,e,a){var l=Math.floor(parseInt(t,10));a!==l&&(o.css({height:l+"px",overflow:e}),r())}l.addClass("lyteMIOffsetDiv");var d=function(t){var e=parseInt(o.css("height"),10)||3*i;l[0].style.display="block";var a=o[0].value.replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),d=l[0].innerHTML.replace(/<br>/gi,"<br />");if(t||o[0].value+"&nbsp;"!==d){l[0].innerHTML=" ",l[0].innerHTML=a+"&nbsp;";var c=l.outerHeight(),p=o.outerHeight();if(Math.abs(c+i-p)>=3||""===a){l[0].setAttribute("setHeight","true");var u=c;u>=n?s(n,"auto",p):s(u<=e?e:u,"hidden",p)}var h=l.outerWidth(),m=o.outerWidth();m!=h&&(l[0].setAttribute("setHeight","true"),r(m,h)),l[0].style.display=""}};n<0&&(n=Number.MAX_VALUE),_lyteUiUtils.insertAfter(o[0],l[0]);for(var c=a.length;c--;)"width"===a[c].toString()&&"0px"===o.css(a[c].toString())?r():l.css(a[c].toString(),o.css(a[c].toString()));d(!0),o[0]._closureEvnt=d,o[0].addEventListener("input",o[0]._closureEvnt),o[0].addEventListener("change",o[0]._closureEvnt)},callAtTheEndOfResize:function(t){var e=$L.prototype.mIManager;clearTimeout(e.id),e.id=setTimeout((function(){var t=document.querySelectorAll('textarea[data-lyte-mentions="true"]');if(t.length>0)for(var e=0;e<t.length;e++){var a,o=$L(t[e]),l=$L(t[e].nextElementSibling),i=Math.floor(parseInt(o.outerWidth(),10));if(o[0]._mIData&&o[0]._mIData._overlayDiv&&$L(o[0].previousElementSibling).css("fontSize",o.css("fontSize")),l.outerWidth()!==i)if(l.css({width:i+"px",fontSize:o.css("fontSize")}),"true"===l[0].getAttribute("setHeight"))l[0].setAttribute("setHeight","false");else"function"==typeof Event?a=new Event("change"):(a=document.createEvent("Event")).initEvent("change",!0,!0),o[0].dispatchEvent(a)}}),200)}},$L.prototype.mentionsInput=function(a){var o=$L.prototype.mIManager;o.bindResize||(Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),a=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o=arguments[1],l=0;l<a;){var i=e[l];if(t.call(o,i,l,e))return l;l++}return-1},configurable:!0,writable:!0}),document.addEventListener("resize",o.callAtTheEndOfResize),o.bindResize=!0);var l,i,n=[],r=[],s="",d=function(){o.inputBuffer=[]},c=function(t,e,a){return t.onBeforeAdd(e,a)},p=function(t,e){t.onAdd(e)},u=function(t,e){t.onRemove&&t.onRemove(e)},h=function(t,e){for(var a=0;a<e.length;a++)for(var o=0;o<t.length;o++)e[a].id==t[o].id&&t.splice(o,1);return t},m=function(t,e){return t.indexOf(e)+e.length},f=function(t){var e=i._mIData.lyteMICollection,a=i._mIData.searchBy;e.forEach((function(o,l){if(t.start<=o.position.start){var i=t.currentEnd-t.end;o.position.start+=i,o.position.end=o.position.start+o[a].length-1}e[l]=o})),i._mIData.lyteMICollection=e},y=function(){if("LYTE-INPUT"===i.tagName){var t=i.querySelector("INPUT"),e=t.value,a=t.value;i.selectionStart=t.selectionStart,i.value=t.value}else e=i.value||"",a=i.value||"";for(var l=i._mIData.searchBy,n=0,r="",s=[],d=0,c=(i.selectionStart,0);c<i._mIData.lyteMICollection.length;c++){var p=i._mIData.lyteMICollection[c],u=i._mIData.triggerChar+o.mentionsSyntax({id:p.id,value:p[i._mIData.searchBy]});s.push(u);var h=i.value.substring(p.position.start,p.position.start+p[l].length);if(d+=a.indexOf(p[i._mIData.searchBy]),h==p[l]){var f=p.position.start-d;p.position.start!==d&&(n+=p.position.start-d,d+=p.position.start-d),r=e.substring(0,n),e=r+e.substring(n).replace(p[i._mIData.searchBy],u),n+=m(e.substring(n),u),d+=h.length,a=a.substring(a.indexOf(p[i._mIData.searchBy])+f+h.length)}else{if(d-=a.indexOf(p[i._mIData.searchBy]),i._mIData.removeEntireMentionOnBackspace){var y=p[i._mIData.searchBy],v=p.position.start,P=p.position.end,D=i.value.substring(v,P);if(D!==y){var C=i.value,_=C.slice(0,v),L=C.slice(P);if(C=_+L,i.value=C,"LYTE-INPUT"===i.tagName&&i.setData("ltPropValue",C),n>0){r=e.substring(0,n+1);var x=e.substring(n+D.length+1);y.length;e=r+x,a=x}else e=C,a=C;g(p,"modifyNodeContent"),c--}}}}a=o.htmlEncode(e),a=o.encodeMsg(e,s);var w=i._mIData.closeButton;i._mIData.lyteMICollection.forEach((function(t){var e=i._mIData.triggerChar+o.mentionsSyntax({id:t.id,value:t[i._mIData.searchBy]});if(w)var l="<strong class='lyteMentionsStrongDiv'><span>"+t[i._mIData.searchBy].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span><span class='lyteCloseIcon' id='lyteMentionClose-"+t.id+"'></span></strong>";else l="<strong class='lyteMentionsStrongDiv'><span>"+t[i._mIData.searchBy].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></strong>";a=a.replace(e,l)})),a=(a=a.replace(/\n/g,"<br/>")).replace(/ {2}/g,"&nbsp; "),i._mIData.syntaxMessage=e,i._mIData._overlayDiv.innerHTML=a,i._mIData.lyteMICollection.forEach((function(t){document.getElementById("lyteMentionClose-"+t.id)&&(document.getElementById("lyteMentionClose-"+t.id).onclick=function(t){return function(){b(t)}}(t.id))}))},v=function(t,e){if("modifyNodeContent"===e)var a=t.position.start,o=t.position.end-a;else if("handleCloseButtonClick"===e){var l=i._mIData.searchBy;a=t.position.start,o=t[l].length}return o},g=function(t,e){for(var a=t.id,o=t.position.start,l=v(t,e),n=0;n<i._mIData.lyteMICollection.length;n++){var r=i._mIData.lyteMICollection[n],s=r.position.start,d=r.position.end;s>o&&(i._mIData.lyteMICollection[n].position.start=s-l,i._mIData.lyteMICollection[n].position.end=d-l),r.id===a&&(i._mIData.lyteMICollection.splice(n,1),n--)}},b=function(t){var e=i._mIData.appendSpaceOnAdd,a=i._mIData.lyteMICollection.find((function(e){return e.id===t}));i._mIData.lyteMICollection=i._mIData.lyteMICollection.filter((function(e){return e.id!==t}));var o=i.value,l=a.position.start,n=a.position.end,r=o.slice(0,l),s=o.slice(n+1);s&&e&&s.startsWith(" ")&&(s=s.slice(1));var d=r+s;"LYTE-INPUT"===i.tagName?i.setData("ltPropValue",d):i.value=d,g(a,"handleCloseButtonClick"),y(),J(i)},P=function(t){var e=i._mIData.appendSpaceOnAdd,a=i._mIData.lyteMICollection.find((function(e){return e.id===t}));i._mIData.lyteMICollection=i._mIData.lyteMICollection.filter((function(e){return e.id!==t}));var o=i.value,l=a.position.start,n=a.position.end,r=o.slice(0,l),s=o.slice(n);s&&e&&s.startsWith(" ")&&(s=s.slice(1));var d,c=r+s;"LYTE-INPUT"===i.tagName&&i.setData("ltPropValue",c),i.value=c;var p=i._valueMap;p.undoAndRedo&&(p.oldText===i.value&&(d=!0),delete p.undoAndRedo);var u={start:n,end:n,currentEnd:n-1},h=d?{newValue:p.oldSyntax}:Et(i.value,u),m=h.newValue,f=h.selectionEnd;p.newSyntax=m;var y=xt(m),v=w(m);T(y),v&&(i.value=y,I(f)),_t(i),(i._mIData.dropbody||i._mIData.validateCollections||ht.alwaysCallOnReomve)&&!ht.removeHighlightCompletely&&D()},D=function(){var t=i.value,e=i._mIData.syntaxMessage,a=i._mIData.searchBy;r=i._mIData.lyteMICollection;for(var o=[],l=[],n=0,s=0;s<r.length;s++){n+=t.indexOf(r[s][a]);var d=r[s][a]+":"+r[s].id,c=r[s].position.start;if(r[s][a]&&-1!==e.indexOf(d)){var p=i.value.substring(c,c+r[s][a].length);n===c?(o.push(r[s]),e=e.substring(e.indexOf(d)+1+d.length),n+=r[s][a].length,t=t.substring(t.indexOf(r[s][a])+r[s][a].length)):p===r[s][a]?(o.push(r[s]),e=e.substring(e.indexOf(d)+1+d.length),n=c+r[s][a].length,t=t.substring(t.indexOf(r[s][a])+r[s][a].length)):(l.push(r[s]),n-=t.indexOf(r[s][a]))}else l.push(r[s])}i._mIData.lyteMICollection=o,l.length&&u(i._mIData,l)},C=function(t,e){for(var a=0,o=0,l=i._mIData.searchBy,n=i._mIData.lyteMICollection,r=0;r<n.length;r++){if(-1==e.substring(a).indexOf(n[r][l]))break;a+=m(e.substring(a),n[r][l]),++o}i._mIData.lyteMICollection.splice(o,0,t)},_=function(t){if(i._addedMentions=!0,"LYTE-INPUT"===i.tagName){var e=i.querySelector("INPUT");i.value=e.value,i.selectionEnd=e.selectionEnd}var a=i.value,l=i._mIData.appendSpaceOnAdd,n=t[i._mIData.searchBy],r=i.selectionEnd-o.currentDataQuery.length-1,u=i.selectionEnd;if(a.substring(r,u)!==i._mIData.triggerChar+o.currentDataQuery){var h=new RegExp("\\"+i._mIData.triggerChar+o.currentDataQuery,"gi");h.exec(a),r=h.lastIndex-s.length-1,u=h.lastIndex}var m=a.substr(0,r),v=a.substr(u,a.length),g=(m+n).length+(l?1:0),b=m+n+(l?" ":"")+v;t.position={start:r,end:r+n.length-1};var P=i._selection,D={start:P.end,end:P.end,currentEnd:u+(n.length-(u-r))};f(D),i._mIData.onBeforeAdd&&!1===c(i._mIData,t,b)?L():(C(t,m),d(),o.currentDataQuery="",L(),"LYTE-INPUT"===i.tagName?i.setData("ltPropValue",b):i.value=b,y(),J(i),setTimeout((function(){o.setCaratPosition(i,g)}),50),i._mIData.onAdd&&p(i._mIData,t))},L=function(t,e){var a=t||i;n=[],(e=e||l)||(e=a._mIData.lyteMIList),a._mIData.onHide&&a._mIData.onHide(e,a),a._mIData.dropbody&&(e.innerHTML=""),a._mIData.preventParentScroll&&a._scrollDisabled&&U(a),e.classList.remove("lyteMIDisplayBlock","lyteMIAddOverflow","lyteMIListAppended","lyteMIDropdown__Down","lyteMIDropdown__Up"),a._mIData.dropdownClass&&e.classList.remove(a._mIData.dropdownClass),e.style=""},x=function(t){var e=o.createElement("lyte-mentions-item");e._mentionsData=t;var a=$L.texthighlighter(t[i._mIData.searchBy],o.currentDataQuery,"b"),l=o.createElement("span","","lyteMIItemContent");return l.appendChild(a),e.appendChild(l),e},w=function(t){r=i._mIData.lyteMICollection;for(var e,a=[],l=[],n=i._mIData.searchBy,s=o.mentionsSyntax,d=i._mIData.triggerChar,c=new RegExp(i._mIData.triggerChar+"\\[(.+?)\\:(.+?)\\]","gi"),p=0,h=0,m=0;m<r.length;m++){var f=r[m][n],y=d+s({id:r[m].id,value:f}),v=t.indexOf(y),g=t.substring(0,v);null===c.exec(g)&&-1!=v?(p+=v+f.length,h=v+y.length,r[m].position={start:p-f.length,end:p},a.push(r[m]),t=t.substring(h)):(l.push(r[m]),e=r[m].position.end)}if(i._mIData.lyteMICollection=a,l.length)return u(i._mIData,l),{end:e}},E=function(t,e){for(var a=0,o=i._mIData.lyteMICollection;a<o.length&&!(o[a].position.end>e);a++);i._mIData.lyteMICollection.splice(a,0,t)},T=function(t){var e=i._valueMap.newSyntax,a=[];i._mIData.lyteMICollection.forEach((function(t){a.push(i._mIData.triggerChar+o.mentionsSyntax({id:t.id,value:t[i._mIData.searchBy]}))}));var l=o.encodeMsg(e,a),n=i._mIData.closeButton;i._mIData.lyteMICollection.forEach((function(t,e){var o=a[e];if(n)var r="<strong class='lyteMentionsStrongDiv'><span>"+t[i._mIData.searchBy].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span><span class='lyteCloseIcon' id='lyteMentionClose-"+t.id+"'></span></strong>";else r="<strong class='lyteMentionsStrongDiv'><span>"+t[i._mIData.searchBy].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></strong>";l=l.replace(o,r)})),l=(l=l.replace(/\n/g,"<br />")).replace(/ {2}/g,"&nbsp; "),i._valueMap={oldSyntax:e,oldText:t},i._mIData.syntaxMessage=e,i._mIData._overlayDiv.innerHTML=l,i._mIData.lyteMICollection.forEach((function(t){document.getElementById("lyteMentionClose-"+t.id)&&(document.getElementById("lyteMentionClose-"+t.id).onclick=function(t){return function(){P(t)}}(t.id))}))},k=function(t){return Object.assign({},t)},S=function(t){t=k(t),i._addedMentions=!0;var e=ht.appendSpaceOnAdd,a=i._valueMap.oldSyntax,l=i.selectionEnd-o.currentDataQuery.length-1,n=i.selectionEnd,r=wt(a,l,"start"),s=r+n-l,u=i._mIData.triggerChar+o.mentionsSyntax({id:t.id,value:t[i._mIData.searchBy]})+(e?" ":""),h=a.substring(0,r)+u+a.substring(s),m=xt(h);i._mIData.onBeforeAdd&&!1===c(i._mIData,ht,m)?L():(i._valueMap.newSyntax=h,E(t,l),d(),o.currentDataQuery="",L(),i.value=m,"LYTE-INPUT"===i.tagName&&i.component.setData("ltPropValue",m),w(h),T(m),I(t.position.end+(e?1:0)),i._mIData.onAdd&&p(i._mIData,ht))},I=function(t){J(i),setTimeout((function(){o.setCaratPosition(i,t),_t(i)}),10)},A=function(t){var e=$L(this);l||(l=this.closest(".lyteMIDropdown")),i=l._textarea,ht.removeHighlightCompletely?S(e[0]._mentionsData):_(e[0]._mentionsData),t.stopPropagation()},M=function(t){t&&($L("lyte-mentions-item",l).length&&$L("lyte-mentions-item",l).removeClass(i._mIData.activeItem),$L(t).addClass(i._mIData.activeItem),(n=[]).push(t))},$=function(e,a){var l=document.createElement("div"),i=getComputedStyle(e),n=e.value,r={};for(var s in i)/[\d -]+/g.test(s)||"function"==typeof i[s]||("lineHeight"==s&&(r[s]=i[s]),"letterSpacing"==s&&(r[s]=i[s]),"height"==s&&(r[s]="auto"),"width"==s&&(r[s]=i[s]),"fontSize"==s&&(r[s]=i[s]),"paddingLeft"==s&&(r[s]=i[s]),"paddingRight"==s&&(r[s]=i[s]),"paddingTop"==s&&(r[s]=i[s]),"paddingBottom"==s&&(r[s]=i[s]),"marginLeft"==s&&(r[s]=i[s]),"marginRight"==s&&(r[s]=i[s]),"marginTop"==s&&(r[s]=i[s]),"marginBottom"==s&&(r[s]=i[s]),"borderLeft"==s&&(r[s]=i[s]),"borderRight"==s&&(r[s]=i[s]),"borderTop"==s&&(r[s]=i[s]),"borderBottom"==s&&(r[s]=i[s]),"boxSizing"==s&&(r[s]=i[s]),"whiteSpace"==s&&(r[s]=i[s]),"fontWeight"==s&&(r[s]=i[s]),"fontFamily"==s&&(r[s]=i[s]),"testAlign"==s&&(r[s]=i[s]),"display"==s&&(r[s]=i[s]),"direction"==s&&(r[s]=i[s]),"wordBreak"==s&&(r[s]=i[s]),"wordWrap"==s&&(r[s]=i[s]),"wordSpacing"==s&&(r[s]=i[s]),"position"==s&&(r[s]="relative"));for(var s in r)l.style[s]=i[s];var d=(a?e._prevSelectionStart:e.selectionStart)-(o.currentDataQuery.length+1),c=n.substr(0,d);l.textContent=c;var p=document.createElement("span");p.textContent=n.substr(d,o.currentDataQuery.length+1)||".",l.appendChild(p);var u=document.createElement("div");u.className="lyteMentionsCustomWrapper",u.appendChild(l),document.body.appendChild(u);var h=e.getBoundingClientRect(),m=p.getBoundingClientRect(),f=t.pageXOffset||document.documentElement.scrollLeft,y=t.pageYOffset||document.documentElement.scrollTop,v={x:h.left+f+p.offsetLeft-e.scrollLeft,y:h.top+y+p.offsetTop-e.scrollTop,height:m.height,width:m.width};return u.remove(),v},N=function(t){var e=$L(this).data("lyte-scrollTop"),a=$L(this).data("lyte-scrollLeft");this.scrollTop=e,this.scrollLeft=a},O=function(t){t.stopPropagation()},R=function(t,e){var a=$L(e).css("overflow-y"),o=$L(e).css("overflow-x"),l=["scroll","auto"];return e.clientWidth<e.scrollWidth&&l.indexOf(o)>-1||e.clientHeight<e.scrollHeight&&l.indexOf(a)>-1},B=function(t,e){return e.classList.contains("lyteScrollBar")},U=function(t){var e=t._scrollableParents,a=t._lyteScrollBarParents;e&&(e.off("scroll",t._resetScrollFunc),delete t._scrollableParents,delete t._resetScrollFunc),a&&(a.each((function(e,a){a&&(a.removeEventListener("touchmove",t._disableLyteScrollBar,!0),a.removeEventListener("wheel",t.disableLyteScrollBar,!0))})),delete t._lyteScrollBarParents,delete t._disableLyteScrollBar),delete t._scrollDisabled},F=function(t,e){var a,o=$L(e).parents();a=(a=(o=o.filter(R)).filter(B)).map((function(t,e){return e.parentNode})),o.each((function(t,e){$L(e).data("lyte-scrollTop",e.scrollTop),$L(e).data("lyte-scrollLeft",e.scrollLeft)})),e._disableLyteScrollBar=O,a.each((function(t,a){a&&(a.addEventListener("touchmove",e._disableLyteScrollBar,!0),a.addEventListener("wheel",e._disableLyteScrollBar,!0))})),e._scrollableParents=o,e._lyteScrollBarParents=a,e._scrollDisabled=!0,e._resetScrollFunc=N,o.on("scroll",e._resetScrollFunc),document.body.classList.add("lyteBodyWrapper")},H=function(e,a){var o=e._textarea;if(!a||!o._mIData.preventParentScroll){var l=o.getBoundingClientRect(),i=e.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,t.innerHeight||0),r=Math.max(document.documentElement.clientWidth,t.innerWidth||0);t.pageXOffset||document.documentElement.scrollLeft;n+=t.pageYOffset||document.documentElement.scrollTop;var s=$(o,a);if(i.height<n-(s.y+s.height+5))e.style.top=s.y+s.height+5+"px",$L(e).removeClass("lyteMIDropdown__Up"),$L(e).addClass("lyteMIDropdown__Down");else if(i.height<s.y)e.style.top=s.y-i.height+"px",$L(e).removeClass("lyteMIDropdown__Down"),$L(e).addClass("lyteMIDropdown__Up");else{"up"==V(n,s.y,s.height)?(e.style.top="5px",$L(e).height(s.y-5),$L(e).addClass("lyteMIAddOverflow","lyteMIDropdown__Up")):(e.style.top=s.y+s.height+5+"px",$L(e).height(n-(s.y+s.height+5)-5),$L(e).addClass("lyteMIAddOverflow","lyteMIDropdown__Down"))}if(s.x+i.width<l.right)e.style.left=s.x+"px";else{var d=s.x+s.width-i.width;d<0?s.x+s.width<=l.left+l.width/2?(e.style.maxWidth=l.right-s.x+"px",d=s.x):(e.style.maxWidth=i.width+d-10+"px",d=10):d>l.right&&(d=l.left);var c=d+i.width;c>r&&(d+=r-c),e.style.left=d+"px"}a||($L(e).addClass("lyteMIListAppended"),o._mIData.preventParentScroll&&!o._scrollDisabled&&F(e,o),o._mIData.onBeforeShow&&o._mIData.onBeforeShow(e,o),o._prevSelectionStart=o.selectionStart)}},V=function(t,e,a){return e-5>t-(e+a+5)?"up":"down"},W=function(t){if("none"===getComputedStyle(t).maxWidth){var e=getComputedStyle(t._textarea);t.style.maxWidth=parseFloat(e.width)-(parseFloat(e.paddingLeft)+parseFloat(e.paddingRight))+"px"}},Y=function(t){if(t.length){for(var e=o.createElement("ul"),a=0;a<t.length;a++){var n=x(t[a]);if(n.addEventListener("click",A,!0),i._mIData.avatars&&t[a].avatar){var r=new Image;r.src=t[a].avatar,n.prepend(r)}e.append(n),n=null}l.append(e),l._appended||(_lyteUiUtils.appendChild(document.body,l),l._appended=!0),M(e.children[0]),i._mIData.dropdownClass&&$L(l).addClass(i._mIData.dropdownClass),$L(l).addClass("lyteMIHide"),$L(l).addClass("lyteMIDisplayBlock"),W(l),H(l),$L(l).removeClass("lyteMIHide")}},q=function(t){var e=i._mIData.mode,a=i._mIData.searchBy,l=o.currentDataQuery,n=[];if(t.length){for(var r=0;r<t.length;r++)switch(e){case"contains":t[r][a].trim().toLowerCase().indexOf(l.toLowerCase())>=0&&n.push(t[r]);break;case"startsWith":t[r][a].trim().toLowerCase().startsWith(l.toLowerCase())&&n.push(t[r]);break;case"endsWith":t[r][a].trim().toLowerCase().endsWith(l.toLowerCase())&&n.push(t[r])}Y(i._mIData.allowDuplicates?n:h(n,i._mIData.lyteMICollection))}},z=function(){var t=o.currentDataQuery;if((0==i._mIData.minChars||t&&t.length&&t.length>=i._mIData.minChars)&&(i._mIData.maxChars===1/0||t&&t.length&&t.length<=i._mIData.maxChars)){var e=i._mIData.onDataRequest(t);e&&(e.then?Promise.resolve(e).then((function(e){if(!1===ht.dropbody){l._appended||(_lyteUiUtils.appendChild(document.body,l),l._appended=!0);var a=ht.displayMentions(e,t,l),o=$L(i._mIData.dropdown);if(o.length)o.addClass("lyteMIHide"),o[0]._textarea=l._textarea,H(o[0]),o.removeClass("lyteMIHide");else if(void 0===a||a){if("bindClick"===a){i._mIData.validateCollections=!0;for(var n=$L("lyte-mentions-item",l),r=0;r<n.length;r++)n[r].addEventListener("click",A,!0)}M(l.querySelector("lyte-mentions-item")),$L(l).addClass("lyteMIHide"),$L(l).addClass("lyteMIDisplayBlock"),W(l),H(l),$L(l).removeClass("lyteMIHide")}}else Y(e)}),(function(t){console.error(t)})):q(e))}},j=function(t,e,a){var o=e.offsetTop,l=t.scrollTop,i=t.getBoundingClientRect().height,n=e.getBoundingClientRect().height;"down"===a&&l+i<o+n?t.scrollTop=t.scrollTop+o+n-(i+l):"up"===a&&o<l&&(t.scrollTop=o)},X=function(t,e){var a=null,o=t.tagName;if("next"==e)for(;t.nextElementSibling;){if(t.nextElementSibling.tagName===o){a=t.nextElementSibling;break}t=t.nextElementSibling}if("prev"==e)for(;t.previousElementSibling;){if(t.previousElementSibling.tagName===o){a=t.previousElementSibling;break}t=t.previousElementSibling}return a},K=function(t,e){for(var a,o=(t.match(new RegExp(e,"g"))||[]).length,l=ht.triggerWithSpace;o>0&&t;){if(0==(a=t.lastIndexOf(e)))return a;if(a>0&&(!l||" "==t.charAt(a-1)||"\n"==t.charAt(a-1)))return a;o=((t=t.substring(0,a)).match(new RegExp(e,"g"))||[]).length}return-1},Q=function(t){var e=i._mIData.lyteMICollection;if(e.length>0)for(var a=e.length-1;a>=0;a--)if(e[a].position.end<=t.length)return t.substring(e[a].position.end);return t},G=function(t){return!(" "==t.charAt(0)||"\n"==t.charAt(0)||t.indexOf("\n")>-1)},J=function(t){var e;"function"==typeof Event?e=new Event("change"):(e=document.createEvent("Event")).initEvent("change",!0,!0),t.dispatchEvent(e)},Z=function(t,e,a){var o,l=new RegExp(i._mIData.triggerChar+"\\[(.+?)\\:(.+?)\\]","gi");l=new RegExp(l);var n=0,r=0;for(i._mIData.triggerChar.length;null!==(o=l.exec(t));){var s=o[2],d=o[1],c=t.substring(n,o.index);a(c,n,r),r+=c.length,e(o[0],o.index,r,s,d),r+=d.length,n=l.lastIndex}n<t.length&&a(t.substring(n),n,r)},tt=function(t){var e="";return Z(t,(function(t,a,o,l,i){e+=i}),(function(t){e+=t})),e},et=function(t,e,a){if("number"!=typeof e)return e;var o;return Z(t,(function(t,l,i,n,r){void 0===o&&i+r.length>e&&(o=a?l+("end"===a?t.length:0):null)}),(function(t,a,l){void 0===o&&l+t.length>=e&&(o=a+e-l)})),void 0===o?t.length:o},at=function(t){var e=i.value;if("LYTE-INPUT"===i.tagName){var a=i.querySelector("INPUT");i._selection={start:a.selectionStart,end:a.selectionEnd},i.selectionEnd=a.selectionEnd,i.selectionStart=a.selectionStart,i.value=a.value}else i._selection={start:i.selectionStart,end:i.selectionEnd};var l,n=t[i._mIData.searchBy],r=i._selection.end,s=-1,u=i._mIData.triggerChar;for(let t=r-1;t>=0;t--)e[t]===u&&(s=t);if(s>-1){var h=i._mIData.removeHighlightCompletely,m=e.substring(s+1,r),f=e.slice(0,s),y=e.slice(s+1+m.length);if(e=f+n+y,o.currentDataQuery=m,h){mention=k(t),i._addedMentions=!0;var v=i._mIData.appendSpaceOnAdd,g=i._valueMap.oldSyntax,b=i.selectionEnd-o.currentDataQuery.length-1,P=i.selectionEnd,D=et(g,b,"start"),C=D+P-b,L=i._mIData.triggerChar+o.mentionsSyntax({id:mention.id,value:mention[i._mIData.searchBy]})+(v?" ":""),x=g.substring(0,D)+L+g.substring(C),S=tt(x);if(i._mIData.onBeforeAdd&&!1===c(i._mIData,ht,S))return;i._valueMap.newSyntax=x,E(mention,b),d(),o.currentDataQuery="",i.value=S,"LYTE-INPUT"===i.tagName&&i.component.setData("ltPropValue",S),w(x),T(S);C=mention.position.end+(v?1:0);J(i),setTimeout((function(){if(o.setCaratPosition(i,C),"LYTE-INPUT"===i.tagName){var t=i.querySelector("INPUT");i._selection={start:t.selectionStart,end:t.selectionEnd},i.selectionEnd=t.selectionEnd,i.selectionStart=t.selectionStart,i.value=t.value}else i._selection={start:i.selectionStart,end:i.selectionEnd}}),10),i._mIData.onAdd&&p(i._mIData,ht)}else _(t)}J(i),"function"==typeof Event?l=new Event("change"):(l=document.createEvent("Event")).initEvent("change",!0,!0),i.dispatchEvent(l),i.focus()};if("string"==typeof a){if("setMessage"===a){if(!(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)||!i.getAttribute("data-lyte-mentions"))return console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null;if("object"!=typeof arguments[1])return i?(console.error("Inappropriate arguments passed. Please pass an object containing a message and a collection to be set."),null):(console.error("Element doesnt exist.Please check."),null);i.value&&this.mentionsInput("reset");var ot=arguments[1].message,lt=ot,it=arguments[1].collection?arguments[1].collection:i._mIData.onDataRequest(),nt=[],rt=[],st=ot;it.forEach((function(t){var e={id:(t=k(t)).id,value:t[i._mIData.searchBy]},a=i._mIData.triggerChar+o.mentionsSyntax(e),l=ot.indexOf(a);if(-1!=l){var n=st.indexOf(a);rt.push(st.substring(0,n)),st=st.substring(n+a.length),t.position={start:l,end:l+e.value.length},nt.push(t);var r="<strong class='lyteMentionsStrongDiv'><span>"+e.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></strong>";ot=ot.replace(a,e.value),lt=lt.replace(a,r),rt.push(r)}})),rt.push(st),lt=(lt=lt.replace(/\n/g,"<br />")).replace(/ {2}/g,"&nbsp; "),i._callee&&"LYTE-INPUT"==i._callee.tagName?i._callee.ltProp("value",ot):i.value=ot,i._mIData.syntaxMessage=arguments[1].message+" ",rt.forEach((function(t,e){if(e%2==0){var a=document.createTextNode(t);i._mIData._overlayDiv.appendChild(a)}else i._mIData._overlayDiv.innerHTML=i._mIData._overlayDiv.innerHTML+t})),i._mIData.lyteMICollection=nt,J(i),i._mIData.removeHighlightCompletely&&(i._valueMap={oldSyntax:arguments[1].message,oldText:ot}),i.focus()}if("getMessage"===a)return(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)&&i.getAttribute("data-lyte-mentions")?i._mIData.syntaxMessage?i._mIData.syntaxMessage:i.value:i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);if("getCollection"===a)return(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)&&i.getAttribute("data-lyte-mentions")?i._mIData.lyteMICollection:i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);if("destroy"===a){if(!(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)||!i.getAttribute("data-lyte-mentions"))return i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);i.removeAttribute("data-lyte-mentions"),i._mIData.removeHighlightCompletely&&(i.removeEventListener("mouseup",i._lyteMenIpMouseUpEvent),delete i._lyteSetSelection,delete i._lyteMenIpMouseUpEvent),i.scrollableParents&&i._scrollDisabled&&U(i);var dt=i.parentElement;_lyteUiUtils.insertBefore(dt,i),i._mIData._overlayDiv=null,i._mIData.lyteMIList.removeEventListener("scroll",i._mIData.lyteMIList._lyteMentionScrollDropDown),delete i._mIData.lyteMIList._lyteMentionScrollDropDown,i._mIData.lyteMIList._textarea=null,i._mIData.element=null,i._mIData.lyteMIList.remove(),i._mIData.lyteMIList=null,i._mIData=null,dt.remove(),i.removeEventListener("keydown",i._lyteMenIpKeydownEvent),i.removeEventListener("keypress",i._lyteMenIpKeypressEvent),i.removeEventListener("input",i._lyteMenIpInputEvent),i.removeEventListener("click",i._lyteMenIpOnClickEvent),i.removeEventListener("paste",i._lyteMenIpPasteEvent),i.removeEventListener("input",i._closureEvnt),i.removeEventListener("change",i._closureEvnt),delete i._prevSelectionStart,delete i._lyteMenIpKeydownEvent,delete i._lyteMenIpKeypressEvent,delete i._lyteMenIpInputEvent,delete i._lyteMenIpOnClickEvent,delete i._lyteMenIpClickEvent,delete i._lyteMenIpBlurEvent,delete i._closureEvnt,delete i._lyteMenIpPasteEvent,delete i._valueMap,delete i._selection,delete i._mIData,delete i._lytePosDropdown,delete i._lyteHideDropdown,delete i.triggerInputEvent,delete i._lyteDisableParentScrollListeners,o.bindResize&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(document.removeEventListener("resize",o.callAtTheEndOfResize),o.bindResize=!1),o.bindClick&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(document.body.removeEventListener("click",o.onClick,!0),o.onClick=null,o.bindClick=!1),o.bindScroll&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(document.removeEventListener("scroll",o.onScroll,!0),o.onScroll=null,o.bindScroll=!1),o.bindSelect&&0==document.querySelectorAll('textarea[data-lyte-mentions="true"]').length&&(document.body.removeEventListener("selectionchange",o.onSelection,!0),o.onSelection=null,o.bindSelect=!1)}if("reset"===a){if(!(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)||!i.getAttribute("data-lyte-mentions"))return i?(console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null):(console.error("Element doesnt exist.Please check."),null);i._callee&&"LYTE-INPUT"==i._callee.tagName?i._callee.ltProp("value",""):i.value="",i._mIData.removeHighlightCompletely?(i._valueMap={newText:"",newSyntax:""},w(""),T("")):(y(),D()),J(i)}if("setMention"===a){if(!(i=this.length>0?"LYTE-INPUT"===this[0].tagName&&"textarea"==this[0].ltProp("type")?this[0].querySelector("textarea"):this[0]:null)||!i.getAttribute("data-lyte-mentions"))return console.error(this+" is not Initialized using lyte-mentions plugin.Please check."),null;if("object"!=typeof arguments[1])return i?(console.error("Inappropriate arguments passed. Please pass an object containing a message and a collection to be set."),null):(console.error("Element doesnt exist.Please check."),null);var ct=arguments[1].id,pt=i._mIData.onDataRequest();if(pt.then)try{Promise.resolve(pt).then((function(t){var e=t.find((t=>t.id==ct));e&&at(e)}))}catch(t){return void console.error(t)}else mentionObj=pt.find((t=>t.id==ct)),mentionObj&&at(mentionObj)}return!0}var ut,ht=a||{};if(!(this.length>1)){if("LYTE-INPUT"==this[0].tagName?"textarea"==this[0].ltProp("type")?(ut=this[0].querySelector("textarea"),ht.isLyteInput=!0):"input"==this[0].ltProp("type")&&(ut=this[0].querySelector("input"),ht.isLyteInput=!0):ut=this[0],ut.getAttribute("data-lyte-mentions"))return ut._mIData?(ut._mIData.mode=ht.mode?ht.mode:ut._mIData.mode,ut._mIData.activeItem=ht.activeItem?ht.activeItem:ut._mIData.activeItem,ut._mIData.triggerChar=ht.triggerChar?ht.triggerChar:ut._mIData.triggerChar,ut._mIData.minChars=null==ht.minChars?ut._mIData.minChars:parseInt(ht.minChars),ut._mIData.maxChars=void 0===ht.maxChars?ut._mIData.maxChars:parseInt(ht.maxChars),ut._mIData.avatars=null==ht.avatars?ut._mIData.avatars:ht.avatars,ut._mIData.searchBy=ht.searchBy?ht.searchBy:ut._mIData.searchBy,ut._mIData.dropbody=null==ht.dropbody?ut._mIData.dropbody:ht.dropbody,ut._mIData.listItemTag=null==ht.listItemTag?ut._mIData.listItemTag:ht.listItemTag,ut._mIData.interval=ht.interval?parseInt(ht.interval):ut._mIData.interval,ut._mIData.onDataRequest=ht.onDataRequest?ht.onDataRequest:ut._mIData.onDataRequest,ut._mIData.onAdd=ht.onAdd?ht.onAdd:ut._mIData.onAdd,ut._mIData.onBeforeAdd=ht.onBeforeAdd?ht.onBeforeAdd:ut._mIData.onBeforeAdd,ut._mIData.onRemove=ht.onRemove?ht.onRemove:ut._mIData.onRemove,ut._mIData.alwaysCallOnReomve=ht.alwaysCallOnReomve?ht.alwaysCallOnReomve:ut._mIData.alwaysCallOnReomve,ut._mIData.displayMentions=ht.displayMentions?ht.displayMentions:ut._mIData.displayMentions,ut._mIData.onHide=ht.onHide?ht.onHide:ut._mIData.onHide,ut._mIData.removeEntireMentionOnBackspace=ht.removeEntireMentionOnBackspace?ht.removeEntireMentionOnBackspace:ut._mIData.removeEntireMentionOnBackspace,ut._mIData.dropdown=ht.dropdown?ht.dropdown:""):(ut._mIData=ht,console.error("ALERT ! You are trying to bind mentions behaviour to a textarea which already has it enabled. Please don't call it twice to avoid abnormal behaviour.")),this;ut.setAttribute("data-lyte-mentions",!0),ht.element=ut,ht.mode=ht.mode?ht.mode:"contains",ht.activeItem=ht.activeItem?ht.activeItem:"lyteMIActive",ht.triggerChar=ht.triggerChar?ht.triggerChar:"@",ht.minChars=null==ht.minChars?1:parseInt(ht.minChars),ht.maxChars=void 0===ht.maxChars?1/0:parseInt(ht.maxChars),ht.avatars=null==ht.avatars||ht.avatars,ht.searchBy=ht.searchBy?ht.searchBy:"name",ht.lyteMICollection=[],ht.dropbody=null==ht.dropbody||ht.dropbody,ht.listItemTag=null==ht.listItemTag?"li":ht.listItemTag,ht.interval=ht.interval?parseInt(ht.interval):0,ht.allowDuplicates=!!ht.allowDuplicates,ht.removeHighlightCompletely=!!ht.removeHighlightCompletely,ht.triggerWithSpace=void 0===ht.triggerWithSpace||ht.triggerWithSpace,ht.appendSpaceOnAdd=void 0===ht.appendSpaceOnAdd||ht.appendSpaceOnAdd,ht.dropdownClass=void 0===ht.dropdownClass?"":ht.dropdownClass,ht.preventParentScroll=void 0!==ht.preventParentScroll&&ht.preventParentScroll,ht.onEscapeClose=null==ht.onEscapeClose||ht.onEscapeClose,ht.alwaysCallOnReomve=null!=ht.alwaysCallOnReomve&&ht.alwaysCallOnReomve,ht.removeEntireMentionOnBackspace=!!ht.removeEntireMentionOnBackspace,ht.dropdown=ht.dropdown?ht.dropdown:"";var mt=function(t){d()},ft=function(t){i=this;for(var e,a=t.target.selectionStart,o=0;o<i._mIData.lyteMICollection.length;o++){var l=i._mIData.lyteMICollection[o],n=l.position,r=n.start;a<=n.end&&a>=r&&(e=l)}return i._mIData.onClick&&i._mIData.onClick(t,e),!0},yt=function(t){var e;if(i=this,"LYTE-INPUT"===this.tagName&&(e=this.querySelector("INPUT"),i.selectionEnd=e.selectionEnd,i.selectionStart=e.selectionStart,i.value=e.value),l=i._mIData.lyteMIList,i._mIData.removeHighlightCompletely){var a,n=i._valueMap;n.undoAndRedo&&(n.oldText===i.value&&(a=!0),delete n.undoAndRedo);var r={start:(m=i._selection).start,end:m.end,currentEnd:i.selectionEnd},d=a?{newValue:n.oldSyntax}:Et(i.value,r),c=d.newValue,p=d.selectionEnd;n.newSyntax=c;var u=xt(c),h=w(c);T(u),h&&(i.value=u,"LYTE-INPUT"===this.tagName&&this.setData("ltPropValue",u),I(p)),_t(i)}else{var m;r={start:(m=i._selection).start,end:m.end,currentEnd:i.selectionEnd};f(r),y()}(i._mIData.dropbody||i._mIData.validateCollections||ht.alwaysCallOnReomve)&&!ht.removeHighlightCompletely&&D(),L(),vt(i);var v=K(o.inputBuffer.join(""),i._mIData.triggerChar);v>-1&&G(o.inputBuffer.slice(v+1).join(""))?(o.searchTriggeredId&&(clearTimeout(o.searchTriggeredId),o.searchTriggeredId=!1),o.searchTriggeredId=setTimeout((function(){o.searchTriggeredId=!1,s=o.inputBuffer.slice(v+1).join(""),o.currentDataQuery=s,z()}),i._mIData.interval)):o.searchTriggeredId&&(clearTimeout(o.searchTriggeredId),o.searchTriggeredId=!1)},vt=function(t){var e=t.value||"";o.inputBuffer=[],t.selectionStart<t.selectionEnd&&(e=e.substring(0,t.selectionStart)),e=Q(e.substring(0,t.selectionEnd));var a=K(e,t._mIData.triggerChar);if(a>-1){var l=e.substring(a);o.inputBuffer=l.split("")}},gt=function(){o.bindSelect||(o.onSelection=function(){var t=document.activeElement;t.getAttribute("data-lyte-mentions")&&t._lyteSetSelection(t)},document.body.addEventListener("selectionchange",o.onSelection,!0),o.bindSelect=!0)},bt=function(t){i=this;var e=o.KEY;if(!(t.keyCode===e.LEFT&&"%"!==t.key||t.keyCode===e.RIGHT&&"'"!==t.key||t.keyCode===e.HOME&&"$"!==t.key||t.keyCode===e.END&&"#"!==t.key||t.keyCode===e.UP&&"&"!==t.key||t.keyCode===e.DOWN&&"("!==t.key||t.keyCode===e.BACKSPACE||t.keyCode===e.TAB||t.keyCode===e.RETURN||t.keyCode===e.ESC||"Shift"===t.key||"Control"==t.key||"Alt"==t.key||"Meta"==t.key)){var a=i.value||"",l=t.key;i.selectionStart<i.selectionEnd&&l&&(a=a.substring(0,i.selectionStart)+l,o.inputBuffer=[]),a=Q(a.substring(0,i.selectionStart))+l;var n=K(a,i._mIData.triggerChar);if(n>-1){var r=a.substring(n);o.inputBuffer=r.split("")}}},Pt=function(t){i=this;var a=o.KEY;if(ht.onEscapeClose&&t.keyCode==a.ESC&&L(t.target),t.keyCode!==a.LEFT&&t.keyCode!==a.RIGHT&&t.keyCode!==a.HOME&&t.keyCode!==a.END){if(_t(i),t.keyCode===a.BACKSPACE||(t.metaKey||t.ctrlKey)&&88==t.keyCode){var r=i.selectionStart-i.selectionEnd;Math.abs(r)>o.inputBuffer.length||t.metaKey&&t.keyCode===a.BACKSPACE?o.inputBuffer=[]:o.inputBuffer=o.inputBuffer.slice(0,(0==r?-1:r)+o.inputBuffer.length)}else if((t.metaKey||t.ctrlKey)&&90==t.keyCode&&(ht.removeHighlightCompletely&&(i._valueMap.undoAndRedo=!0),d()),l||(l=i._mIData.lyteMIList),"block"==$L(l).css("display"))switch(t.keyCode){case a.UP:case a.DOWN:var s,c=null;t.keyCode===a.DOWN?n&&n.length?(c=X(n[0],"next"),s="down"):(c=l.querySelector("lyte-mentions-item"),s="up"):(c=X(n[0],"prev"),s="up"),c&&(M(c),j(l,c,s)),t.preventDefault(),t.stopPropagation();break;case a.RETURN:case a.TAB:n&&n.length&&(n[0].dispatchEvent(new Event("click")),t.preventDefault(),t.stopPropagation())}}else e(d)},Dt=function(t){L(t.target)},Ct=function(t){i=_lyteUiUtils.getCurrentTarget(t)._textarea;var e=t.target.closest("lyte-mentions-item");M(e)},_t=function(t){if("LYTE-INPUT"===t.tagName){var e=t.querySelector("INPUT");t._selection={start:e.selectionStart,end:e.selectionEnd},t.selectionEnd=e.selectionEnd,t.selectionStart=e.selectionStart,t.value=e.value}else t._selection={start:t.selectionStart,end:t.selectionEnd}},Lt=function(t,e,a){var o,l=new RegExp(i._mIData.triggerChar+"\\[(.+?)\\:(.+?)\\]","gi");l=new RegExp(l);var n=0,r=0;for(i._mIData.triggerChar.length;null!==(o=l.exec(t));){var s=o[2],d=o[1],c=t.substring(n,o.index);a(c,n,r),r+=c.length,e(o[0],o.index,r,s,d),r+=d.length,n=l.lastIndex}n<t.length&&a(t.substring(n),n,r)},xt=function(t){var e="";return Lt(t,(function(t,a,o,l,i){e+=i}),(function(t){e+=t})),e},wt=function(t,e,a){if("number"!=typeof e)return e;var o;return Lt(t,(function(t,l,i,n,r){void 0===o&&i+r.length>e&&(o=a?l+("end"===a?t.length:0):null)}),(function(t,a,l){void 0===o&&l+t.length>=e&&(o=a+e-l)})),void 0===o?t.length:o},Et=function(t,e){var a=i._valueMap,o=a.oldText,l=a.oldSyntax,n=e.start,r=e.end,s=e.currentEnd,d=o.length-t.length;void 0===n&&(n=s+d),void 0===r&&(r=n),n===r&&r===s&&o.length===t.length&&(n-=1);var c=t.slice(n,s),p=Math.min(n,s),u=r;n===s&&(u=Math.max(r,n+d));var h=wt(l,p,"start"),m=wt(l,u,"end"),f=wt(l,p),y=wt(l,u),v=null===f||null===y,g=l.substring(0,h)+c+l.substring(m),b={},P=xt(l.substring(0,h));if(b.selectionEnd=P.length+c.length,!v){for(var D=xt(g),C=0;D!==t&&C<=50;){for(p=0;t[p]===D[p];)p++;c=t.slice(p,s),u=o.lastIndexOf(t.substring(s)),h=wt(l,p,"start"),m=wt(l,u,"end"),g=l.substring(0,h)+c+l.substring(m),D=xt(g),C++}C>50&&console.warn("lyte mentionsInput match failed")}return b.newValue=g,b},Tt=function(t){_t(t.target)},kt=function(e){if((i=this).selectionStart==i.selectionEnd)var a=Q(i.value)+(e.clipboardData||t.clipboardData).getData("text");else{a=i.value.substring(0,i.selectionStart)+(e.clipboardData||t.clipboardData).getData("text");var l=i.value.substring(i.selectionEnd);if(l.length>0){var n=l.indexOf(" ");a+=l.substring(0,n>-1?n:l.length)}}o.inputBuffer=a.split("")},St=function(){var t;"function"==typeof Event?t=new Event("input"):(t=document.createEvent("Event")).initEvent("input",!0,!0),ut.dispatchEvent(t)},It=function(t){var e=t.target,a=e.scrollHeight;if(e.getBoundingClientRect().height+e.scrollTop>=a&&ht.onScrollEnd){var o=ht.onScrollEnd();o&&(o.then?o.then((function(t){At(t)})):At(o))}},At=function(t){t.forEach((function(t){var e=x(t);if(l.appendChild(e),e.addEventListener("click",A,!0),i._mIData.avatars&&t.avatar){var a=new Image;a.src=t.avatar,e.prepend(a)}}))};return ht.lyteMIList=o.init(ut),ht.lyteMIList._textarea=ut,ht._overlayDiv=ut.previousElementSibling.children[0],ht._overlayDiv||(ht._overlayDiv=ut.children[0].children[0].children[1].children[0]),ht.isLyteInput||$L(ut.previousElementSibling).addClass("lyteMentionsNormalTextarea"),ut._mIData=ht,ut._lyteMenIpKeydownEvent=Pt,ut._lyteMenIpKeypressEvent=bt,ut._lyteMenIpInputEvent=yt,ut._lyteMenIpClickEvent=mt,ut._lyteMenIpOnClickEvent=ft,ut._lyteMenIpBlurEvent=Dt,ut._lyteMenIpPasteEvent=kt,ut._lyteHideDropdown=L,ut._lytePosDropdown=H,ht.lyteMIList._lyteMentionScrollDropDown=It,ut._valueMap={oldText:"",oldSyntax:""},ut._selection={},ut._lyteDisableParentScrollListeners=U,ht.lyteMIList.addEventListener("scroll",ht.lyteMIList._lyteMentionScrollDropDown),ut.addEventListener("keydown",ut._lyteMenIpKeydownEvent),ut.addEventListener("input",ut._lyteMenIpInputEvent),ut.triggerInputEvent=St,ut.addEventListener("click",ut._lyteMenIpOnClickEvent,!0),ut.addEventListener("paste",ut._lyteMenIpPasteEvent),ht.lyteMIList.addEventListener("mouseover",Ct),ut._mIData.removeHighlightCompletely&&(ut._lyteSetSelection=_t,ut._lyteMenIpMouseUpEvent=Tt,ut.addEventListener("mouseup",ut._lyteMenIpMouseUpEvent),gt()),o.bindScroll||(o.onScroll=function(t){if(t&&t.target&&"#document"!=t.target.nodeName&&"HTML"!=t.target.tagName&&!t.target.closest(".lyteMIDropdown")){var e=document.querySelectorAll(".lyteMIListAppended");if(e.length>0)for(var a=0;a<e.length;a++)H(e[a],!0)}},document.addEventListener("scroll",o.onScroll,!0),o.bindScroll=!0),o.bindClick||(o.onClick=function(t){for(var e=t.target;e&&("TEXTAREA"!==e.tagName||"true"!==e.getAttribute("data-lyte-mentions"))&&"HTML"!=e.tagName;)e=e.parentElement;if(e&&"TEXTAREA"===e.tagName){e._lyteMenIpClickEvent(t);for(var a=document.querySelectorAll(".lyteMIDropdown.lyteMIDisplayBlock"),o=0;o<a.length;o++){if(!e._mIData.lyteMIList.isEqualNode(a[o]))(l=a[o]._textarea)._lyteHideDropdown(a[o]._textarea)}e._addedMentions=!1}else if(e&&"HTML"===e.tagName)for(a=document.querySelectorAll(".lyteMIDropdown.lyteMIDisplayBlock"),o=0;o<a.length;o++){var l;(l=a[o]._textarea)._lyteHideDropdown(l,a[o])}},document.body.addEventListener("click",o.onClick,!0),o.bindClick=!0),this}for(var Mt=this,$t=0;$t<Mt.length;$t++)if("LYTE-INPUT"==Mt[$t].tagName&&"textarea"==Mt[$t].ltProp("type")){var Nt=Mt[$t].querySelector("textarea"),Ot=Object.assign({},ht);Ot.isLyteInput=!0,$L(Nt).mentionsInput(Object.assign({},Ot))}else $L(Mt[$t]).mentionsInput(Object.assign({},ht))}}var a,o,l,i}(window),function(){var t={line_break:/(\n|\r\n|\r)/,special:/[*#\-_~!`()\\\[\]\.|"]/,spl_except_forw_slsh:/[*_~!`]|^www|^ht' + 'tps:|^ht' + 'tp:/,space:/[ ]/,number:/\d/},e=0,a=0,o={b:"bold",i:"italics",u:"underline",s:"strike",div:"para",table:"table",thead:"thead",tbody:"tbody",tr:"tr",td:"td",th:"th",img:"image",a:"hyperlink",ul:"ul",ol:"ol",li:"li",mark:"mark",blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5"};function l(t){var e=t.flush();if(e)return new i(e,"text")}function i(t,e){var a={value:t,type:e};return this.get=function(t){return a[t]||""},this}function n(){var t=[];this.push=function(e){t.push(e)},this.flush=function(){var e=t;return t=[],e.join("")}}function r(){var t=[],e=0;this.push=function(e){e&&t.push(e)},this.peek=function(){return t[e]||new i},this.peekback=function(){return t[e-1]||new i},this.peekbacktwice=function(){return t[e-2]||new i},this.eat=function(){return t[e++]||new i},this.pointer=function(t){return isNaN(t)?e:e=t},this.moveback=function(){e--},this.flush=function(){e=0,t=[]},this.getTokens=function(){return t}}function s(){var t=[];this.push=function(e){return t.push(e),e},this.pop=function(){t.pop()},this.callStackContains=function(e){return!!~t.indexOf(e)},this.isEmpty=function(){return 0===t.length}}function d(e){return t.space.test(e)}function c(e){return t.line_break.test(e)}function p(e){return e.match(t.special)}function u(t){var e=t||{};return this.getAttribute=function(t){return e[t]},this.getAllAttributes=function(){return e},this}function h(l,i){var n,r=new s,d=function(t){var e={};return t=t||{},["bold","italics","strike","underline","blockquote","mark","para","hyperlink","image","header","h1","h2","h3","h4","h5","ol","ul","li","table","thead","tbody","tr","th","td"].forEach((function(a){e[a]=new u(t[a])})),{getAllAttributes:function(t){return e[t].getAllAttributes()},getAttribute:function(t,a){return e[t].getAttribute(a)||""}}}(i),c=(i||{}).onBeforeAppend;function p(t,e){var a,o,l,i,n,r=$L(t);for(o in~["h1","h2","h3","h4","h5"].indexOf(e)?(l=d.getAllAttributes(e),i=d.getAllAttributes("header"),n={},$L.extend(n,i),$L.extend(n,l),a=n):a=d.getAllAttributes(e),a)"ltPropPreventSecurityPrefix"!==o&&r.attr(o,a[o])}function h(){return!0===d.getAttribute("hyperlink","ltPropPreventSecurityPrefix")}var m=function(){return l.pointer()},f=function(t){l.pointer(t)},y=function(t){return"boolean"==typeof t||!t.querySelector("*")&&!t.textContent.trim()},v=function(){return!d.getAttribute("header","ignoreWhiteSpaceJoiner")},g=function(){for(var t=m();!V();){if(!Nt())return f(t),!0;l.eat()}return f(t),!1},b=function(){for(var t=0;"special#"===l.peek().get("type");)t++,l.eat();return t},P=function(t){var e,a=function(t){return o[t]}(t.tagName.toLowerCase());return c&&(e=c.call(window,t,a)),e||t},D=function(t,e){t&&e&&(1===e.nodeType&&(e=P(e)),t.appendChild(e))},C=function(){var t,o,i,n,r=document.createElement("div");return p(r,"para"),t=m(),_()?(t=m(),i=function(){var t,e;if((t=b())<=5&&(!v()&&!Nt()||v()&&Nt(l.eat()))&&g())return p(e=document.createElement("h"+t),"h"+t),ot(e),e}(),i?D(r,i):(f(t),ot(r))):L()?(n=l.eat(),token_aft=l.peek(),t=m(),(i=pt())?(D(r,i),ot(r)):(f(t),i=function(){var t;if(g())return p(t=document.createElement("blockquote"),"blockquote"),ot(t),t}(),i?D(r,i):(f(t),dt(r,n,token_aft),ot(r)))):X()?(D(r,W()),e=0,a=0):K()?(D(r,Y()),e=0,a=0):w()&&(o=E())?(D(r,o),l.moveback()):(f(t),ot(r)),r},_=function(){var t=m();return x(),"special#"===l.peek().get("type")||(f(t),!1)},L=function(){var t=m();return x(),!!yt()||(f(t),!1)},x=function(){for(var t=0;Nt();)t++,l.eat();return t},w=function(){var t=m();return x(),"special|"===l.peek().get("type")||(f(t),!1)},E=function(){var t,e=document.createElement("table"),a=B();return!!a&&(!!(t=R(a.column_count))&&(D(e,a.header),!!(t=T(a.column_count))&&(D(e,t),p(e,"table"),e)))},T=function(t){for(var e,a=document.createElement("tbody");S(k());){if(!(e=I(t)))return!1;D(a,e)}return 0!==a.children.length&&(p(a,"tbody"),a)},k=function(){for(var t=m(),e="";!V();)e+=l.eat().get("value");return f(t),e},S=function(t){return!!~t.indexOf("|")},I=function(t){var e,a=document.createElement("tr"),o=(m(),0);for(x();"special|"===l.eat().get("type");)(e=M())&&(o++,D(a,e));return o<t&&A(a,o,t),!(o>t)&&(p(a,"tr"),a)},A=function(t,e,a){for(var o,l=e;l<a;l++)o=document.createElement("td"),D(t,o),p(o,"td")},M=function(){var t=document.createDocumentFragment(),e=document.createElement("td");return n=!0,ot(t),n=!1,$(t),!y(t)&&(e.appendChild(t),p(e,"td"),e)},$=function(t){N(t),O(t)},N=function(t){var e,a=t.childNodes[0];a&&3===a.nodeType&&(e=(e=a.nodeValue).replace(/^\s+/g,""),a.nodeValue=e)},O=function(t){var e,a=t.childNodes.length,o=t.childNodes[a-1];o&&3===o.nodeType&&(e=(e=o.nodeValue).replace(/\s+$/g,""),o.nodeValue=e)},R=function(t){var e=0;for(x();!V()&&!H();){if("special|"!==l.peek().get("type")&&"special-"!==l.peek().get("type"))return!1;"special|"===l.eat().get("type")&&"special-"===l.peek().get("type")&&e++}return!F()&&e===t},B=function(){for(var t,e,a=document.createElement("thead"),o=document.createElement("tr");"special|"===l.peek().get("type");)l.eat(),(e=U())&&D(o,e);return 0!==(t=o.children.length)&&(D(a,o),!F()&&(p(a,"thead"),p(o,"tr"),{column_count:t,header:a}))},U=function(){var t=document.createDocumentFragment(),e=document.createElement("th");return n=!0,ot(t),n=!1,$(t),!y(t)&&(e.appendChild(t),p(e,"th"),e)},F=function(){for(;!V();){if(!H())return!1;l.eat()}l.eat()},H=function(){return"line_break"===l.peek().get("type")||""===l.peek().get("type")||Nt()},V=function(){return"line_break"===l.peek().get("type")||""===l.peek().get("type")},W=function(t){var o,l,i=document.createElement("ol");do{if(t&&e-t<0)return f(o),p(i,"ol"),i;var n=$L(i).find("li").eq(-1);e-a>1&&n.length>0?D(n[0],q(l)):(D(i,z()),F()),o=m()}while(l=j());return p(i,"ol"),i},Y=function(t){var o,l,i=document.createElement("ul");do{if(t&&e-t<0)return f(o),p(i,"ul"),i;var n=$L(i).find("li").eq(-1);e-a>1&&n.length>0?D(n[0],q(l)):(D(i,z()),F()),o=m()}while(l=j());return p(i,"ul"),i},q=function(t){return"ord"===t?W(e):"unord"===t?Y(e):null},z=function(){var t=document.createElement("li"),e=document.createDocumentFragment();return ot(e),t.appendChild(e),t},j=function(){var t,e=m();return X()?t="ord":(f(e),K()?t="unord":(t=!1,f(e))),t},X=function(){var t,o,i,n=m(),r=x();return o=(t=l.eat()).get("value"),"text"!==t.get("type")||isNaN(o)||(i="special."===l.eat().get("type")&&"space"===l.eat().get("type")),i?(a=e,e=r):f(n),i},K=function(){var t,o,i,n=m(),r=x();return(t=l.eat()).get("value"),"special*"!==(o=t.get("type"))&&"special-"!==o||(i="space"===l.eat().get("type")),i?(a=e,e=r):f(n),i},Q=function(){var t,e=m();return!!r.callStackContains("italics")||(!r.callStackContains("italics")&&(e=m(),t=Z())&&!y(t)?t:(f(e),l.eat(),t=document.createTextNode("_")))},G=function(){var t,e=m();return!!r.callStackContains("underline")||(!r.callStackContains("underline")&&(e=m(),t=tt())&&!y(t)?t:(f(e),l.eat(),t=document.createTextNode("_")))},J=function(){var t=l.eat(),e=l.eat();return"special_"===t.get("type")&&"special_"===e.get("type")},Z=function(){var t,e;return l.eat(),m(),r.push("italics"),Nt()||!ot(t=document.createDocumentFragment())||Nt(l.peekback())||"special_"!==l.eat().get("type")?(r.pop(),!1):((e=document.createDocumentFragment()).appendChild(t),r.pop(),kt(e))},tt=function(){var t,e;return l.eat(),l.eat(),m(),r.push("underline"),Nt()||!ot(t=document.createDocumentFragment())||Nt(l.peekback())||"special_"!==l.eat().get("type")||"special_"!==l.eat().get("type")?(r.pop(),!1):((e=document.createDocumentFragment()).appendChild(t),r.pop(),Tt(e))},et=function(){var t,e;return l.eat(),m(),r.push("bold"),Nt()||!ot(t=document.createDocumentFragment())||Nt(l.peekback())||"special*"!==l.eat().get("type")?(r.pop(),!1):((e=document.createDocumentFragment()).appendChild(t),r.pop(),Et(e))},at=function(){var t,e;return l.eat(),m(),r.push("strike"),Nt()||!ot(t=document.createDocumentFragment())||Nt(l.peekback())||"special~"!==l.eat().get("type")?(r.pop(),!1):((e=document.createDocumentFragment()).appendChild(t),r.pop(),St(e))},ot=function(t){var e,a,o=l.peek();o.get("type");if(lt())return a=m(),e=it(),D(t,e),ft(t),e;if(At()||Nt())return e=vt(t),ft(t),e;if(yt())return o=l.eat(),token_aft=l.peek(),a=m(),(e=pt())?(D(t,e),ft(t),e):(f(a),dt(t,o,token_aft),ft(t),o.get("value"));if(gt()){if(e=function(){var t,e,a=l.peek().get("value");switch(l.peek().get("type"),a){case"*":return!!r.callStackContains("bold")||(!r.callStackContains("bold")&&(e=m(),t=et())&&!y(t)?t:(f(e),l.eat(),t=document.createTextNode("*")));case"_":return e=m(),J()?(f(e),!!r.callStackContains("underline")||G()):(f(e),!!r.callStackContains("italics")||Q());case"~":return!!r.callStackContains("strike")||(!r.callStackContains("strike")&&(e=m(),t=at())&&!y(t)?t:(f(e),l.eat(),t=document.createTextNode("~")))}}(),e)return"object"==typeof e&&(D(t,e),ft(t)),t}else{if(ht())return o=l.eat(),token_aft=l.peek(),a=m(),(e=ut())?(D(t,e),ft(t),e):(f(a),dt(t,o,token_aft),ft(t),o.get("value"));if(ct())return o=l.eat(),token_aft=l.peek(),a=m(),(e=rt())?(D(t,e),ft(t),e):(f(a),dt(t,o,token_aft),ft(t),o.get("value"));if(xt())return!1;if(!wt(l))return o=l.eat(),token_aft=l.peek(),a=m(),dt(t,o,token_aft),ft(t),o.get("value")}return wt(l)?t:void 0},lt=function(){var t=m(),e=l.peekback(),a=l.eat(),o=a.get("value"),i=a.get("type"),n=l.peek();return f(t),"text"===i&&(o.startsWith("https://")||o.startsWith("http://")||o.startsWith("www")&&"special."===n.get("type"))&&"\\"!==e.get("value")},it=function(){var t,e,a,o;return t=e=nt(),a=document.createElement("a"),t=t.trim(),h()||t.startsWith("https://")||t.startsWith("http://")||(t="https://"+t),a.href=t,a.setAttribute("target","_blank"),a.setAttribute("rel","noopener noreferrer"),o=document.createTextNode(e),a.appendChild(o),p(a,"hyperlink"),a},nt=function(){for(var t="";!Nt()&&!xt();)t+=l.eat().get("value");return t},rt=function(){var t,e,a,o,i;return!r.callStackContains("link")&&(t=Lt(),"special]"===l.eat().get("type")&&("special("===l.eat().get("type")&&(0!==((a=bt())||"").trim().length&&(('special"'!==l.peek().get("type")||(l.eat(),i=Pt(),'special"'===l.eat().get("type")))&&("special)"===l.eat().get("type")&&((o=document.createElement("a")).href=st(a.trim()),o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer"),0===t.trim().length&&(t=a.trim()),e=document.createTextNode(t),o.appendChild(e),i&&o.setAttribute("title",i),p(o,"hyperlink"),o))))))},st=function(t){return h()||t.startsWith("http")||t.startsWith("https")?t:"https://"+t},dt=function(e,a,o){var l=a.get("value"),i=o.get("value");if("\\"!=l||!i.match(t.spl_except_forw_slsh)){var n=document.createTextNode(l);e.appendChild(n)}},ct=function(){var t=l.peek(),e=l.peekback();return"special["===t.get("type")&&"special!"!==e.get("type")},pt=function(){var t,e,a="";return!mt()&&("special["===l.eat().get("type")&&(a=Ct(),"special]"===l.eat().get("type")&&("special("===l.eat().get("type")&&(t=Dt(),"special)"===l.peek().get("type")&&(l.eat(),0!==(t||"").trim().length&&((e=document.createElement("img")).alt=a,e.src=t,p(e,"image"),e))))))},ut=function(){var t,e;return!(!r.isEmpty()||0===(e=_t()||"").trim().length||!ht())&&(l.eat(),(t=document.createElement("mark")).appendChild(document.createTextNode(e)),p(t,"mark"),t)},ht=function(){var t=l.peekback();return"special`"===l.peek().get("type")&&"\\"!==t.get("value")},mt=function(){return r.callStackContains("link")},ft=function(t){var e=m();ot(t)||f(e)},yt=function(){var t=l.peek(),e=l.peekback();return"special!"===t.get("type")&&"special\\"!==e.get("type")},vt=function(t){var e=It();return t.appendChild(document.createTextNode(e)),e},gt=function(){var t=l.peekback(),e=l.peekbacktwice(),a=t.get("value"),o=l.peek().get("type"),i=!0;return"special_"===t.get("type")&&(i="\\"!==e.get("value")),("special*"===o||"special_"===o||"special~"===o)&&"\\"!==a&&i},bt=function(){for(var t="";"special)"!==l.peek().get("type")&&'special"'!==l.peek().get("type")&&!xt();)t+=l.eat().get("value");return t},Pt=function(){for(var t="";'special"'!==l.peek().get("type")&&!xt();)t+=l.eat().get("value");return t},Dt=function(){for(var t="";"special)"!==l.peek().get("type")&&!xt();)t+=l.eat().get("value");return t},Ct=function(){for(var t="";"special]"!==l.peek().get("type")&&!xt();)t+=l.eat().get("value");return t},_t=function(){for(var t="";"special`"!==l.peek().get("type")&&!xt();)t+=l.eat().get("value");return t},Lt=function(){for(var t="";"special]"!==l.peek().get("type")&&!xt();)t+=l.eat().get("value");return t},xt=function(){var t=l.peek();return n?""===t.get("type")||"line_break"===t.get("type")||"special|"===t.get("type"):"line_break"===t.get("type")||""===t.get("type")},wt=function(t){return xt()},Et=function(t){var e=document.createElement("b");return e.appendChild(t),p(e,"bold"),e},Tt=function(t){var e=document.createElement("u");return e.appendChild(t),p(e,"underline"),e},kt=function(t){var e=document.createElement("i");return e.appendChild(t),p(e,"italics"),e},St=function(t){var e=document.createElement("s");return e.appendChild(t),p(e,"strike"),e},It=function(){for(var t="";At()||Nt();)t+=l.eat().get("value");return t},At=function(t){return t=t||l.peek(),n?Mt(t):$t(t)},Mt=function(t){return(Ot(t)||"special."===t.get("type")||'special"'===t.get("type"))&&!lt()},$t=function(t){return(Ot(t)||"special."===t.get("type")||"special|"===t.get("type")||'special"'===t.get("type"))&&!lt()},Nt=function(t){return"space"===(t=t||l.peek()).get("type")},Ot=function(t){return"text"===(t=t||l.peek()).get("type")};return function(){for(var t,e=document.createElement("div");""!==l.peek().get("type");)t=C()||document.createDocumentFragment(),"line_break"===l.peek().get("type")&&l.eat(),D(e,t);return e}()}var m=function(t,e){return"dom"===(t=(t||"dom").toLowerCase())?e:"domstring"===t?function(t){var e=document.createElement("div");return e.appendChild(t),e.innerHTML}(e):e};$L.markdown=function(t,e){var a,o,s,u;return u=(e=e||{}).type,s=function(t){return"string"!=typeof t?$L._lyteHTMLToText(t):t}(t),o=function(t){for(var e,a,o=0,s=t.length,u=new n,h=new r;o<s;o++)c(e=t.charAt(o))?(h.push(l(u)),h.push(new i(e,"line_break"))):(a=p(e))?(h.push(l(u)),h.push(new i(e,"special"+a[0]))):d(e)?(h.push(l(u)),h.push(new i(e,"space"))):u.push(e);return h.push(l(u)),h}(s),a=h(o,e),o.flush(),m(u,a)}}(),function(){var t={b:{start:"*",end:"*"},p:{start:"",end:"\n"},div:{start:"",end:"\n"},br:{start:"",end:"\n"},span:{start:"",end:""}};function e(o,l){var i="",n=o.childNodes;return $L(n).each((function(o,r){(l=l&&0===o)?1===r.nodeType?i+=e(r)+(a(n)?"\n":""):3===r.nodeType&&(i+=r.nodeValue+(a(n)?"\n":"")):1===r.nodeType?i+=function(e,a){var o,l=e.nodeName.toLowerCase(),i=t[l];return o=function(t){var e=t.parentNode,a="br"===t.nodeName.toLowerCase(),o="div"===e.nodeName.toLowerCase()||"p"===e.nodeName.toLowerCase(),l=1===e.childNodes.length;return!a||!o||!l}(e)?i.start+a+i.end:a,o}(r,e(r)):3===r.nodeType&&(i+=r.nodeValue)})),i}function a(t){return t.length>1}$L._lyteHTMLToText=function(t){return e(t,!0)}}(),document.addEventListener("keydown",(function(t){var e,a=document.activeElement,o=!1;if(a.hasAttribute("aria-activedescendant")&&a.getAttribute("aria-activedescendant")){let t=document.querySelector("#"+a.getAttribute("aria-activedescendant"));a&&t&&(a=(e=t).offsetWidth||e.offsetHeight||e.getClientRects().length?t:a)}if(a&&function(t){var e=t.getAttribute("lt-prop-aria-keydown");return null===e||"false"===e?e=!1:""!==e&&"true"!==e||(e=!0),e}(a)&&a.hasAttribute("role")){if(a.hasAttribute("continue-propagation")&&(o=!0),"Enter"===t.key&&"combobox"!==a.getAttribute("role").toLowerCase())return["listbox","combobox","menu"].indexOf(a.getAttribute("role"))>-1&&"true"===a.getAttribute("aria-expanded")?void 0:(o||t.stopImmediatePropagation(),t.preventDefault(),void a.click());switch(a.getAttribute("role").toLowerCase()){case"checkbox":case"button":case"switch":" "===t.key&&(o||t.stopImmediatePropagation(),t.preventDefault(),a.click());break;case"radiogroup":{const e=Array.from(a.querySelectorAll("[role='radio']"));var l,i=!1;e.map((function(t,e){"true"===t.getAttribute("aria-checked")&&(i=!0,l=e)})),"ArrowDown"!==t.code&&"ArrowRight"!==t.code||(o||t.stopImmediatePropagation(),t.preventDefault(),i&&(e[l].setAttribute("aria-checked","false"),l+1>=e.length?l=0:l+=1,e[l].setAttribute("aria-checked","true"))),"ArrowUp"!==t.code&&"ArrowLeft"!==t.code||(o||t.stopImmediatePropagation(),t.preventDefault(),i&&(e[l].setAttribute("aria-checked","false"),l-1<0?l=e.length-1:l-=1,e[l].setAttribute("aria-checked","true"))),"Space"===t.code&&(o||t.stopImmediatePropagation(),t.preventDefault(),e[0].click())}break;case"link":if("Enter"===t.key){o||t.stopImmediatePropagation(),t.preventDefault();const e=t.target;e&&window.open(e.getAttribute("data-href"))}break;case"menuitem":let e,n,r;if("right"===a.getAttribute("lt-prop-popup-position")?(e="ArrowRight",n="ArrowLeft"):(e="ArrowLeft",n="ArrowRight"),a.hasAttribute("lt-prop-query")&&(r=a.getAttribute("lt-prop-query")),t.key===e){if(o||t.stopImmediatePropagation(),a.hasAttribute("aria-expanded")&&"false"===a.getAttribute("aria-expanded")&&(t.preventDefault(),a.click(),a.setAttribute("aria-expanded","true")),a.hasAttribute("lt-prop-aria-event")&&"click"===a.getAttribute("lt-prop-aria-event"))return void a.click();a.hasAttribute("lt-prop-query")&&("LYTE-MENU"!==$L(r)[0].tagName&&"LYTE-POPOVER"!==$L(r)[0].tagName||!1===$L(r)[0].getData("ltPropShow")&&$L(r)[0].setData("ltPropShow",!0))}else if(t.key===n){if(o||t.stopImmediatePropagation(),a.hasAttribute("aria-expanded")&&"true"===a.getAttribute("aria-expanded")&&(t.preventDefault(),a.click(),a.setAttribute("aria-expanded","false")),a.hasAttribute("lt-prop-aria-event")&&"click"===a.getAttribute("lt-prop-aria-event"))return void a.click();a.hasAttribute("lt-prop-query")&&("LYTE-MENU"!==$L(r)[0].tagName&&"LYTE-POPOVER"!==$L(r)[0].tagName||!0===$L(r)[0].getData("ltPropShow")&&$L(r)[0].setData("ltPropShow",!1))}break;case"combobox":if("Enter"===t.key&&"false"===a.getAttribute("aria-expanded"))o||t.stopImmediatePropagation(),t.preventDefault(),a.click();else if("Tab"===t.key&&"true"===a.getAttribute("aria-expanded")){if(a.hasAttribute("lt-prop-tab-click")&&"false"===a.getAttribute("lt-prop-tab-click"))break;o||t.stopImmediatePropagation(),t.preventDefault(),a.click()}" "===t.key&&(o||t.stopImmediatePropagation(),t.preventDefault(),a.click());break;case"option":{let e,o=Array.from($L($L(a).parent()).children("[role=option]")),l=$L(a).parent().attr("id"),i=document.querySelector("[aria-controls="+l+"]");e=o.indexOf(a),"ArrowDown"===t.key?(e++,e===o.length&&(e=0),$L(o[e]).focus()):"ArrowUp"===t.key&&(t.altKey?i.focus():(e--,-1===e&&(e=o.length-1),$L(o[e]).focus()))}}}}),!0),function(){if($L){$L.landmark={};var t,e,a,o=!1,l=null,i=0;function n(t,e){if(t.getAttribute("lt-landmark-label"))return t.getAttribute("lt-landmark-label");var a=e||""+i++;return t.setAttribute("lt-landmark-label",a),a}function r(t){var e;return t&&t.extraAttributes&&t.extraAttributes[0]&&(e=t.extraAttributes[0]),e}function s(t){var e=[],a=[];if(t&&t.menuOptionsOrder&&t.menuOptionsOrder.length>0)t.menuOptionsOrder.forEach((function(o){var l=Array.from(document.querySelectorAll("[role='"+o+"'][lt-prop-landmark='true']"));d(e,l,a,t)}));else{var o=Array.from(document.querySelectorAll('[role][lt-prop-landmark="true"]'));d(e,o,a,t)}return e}function d(t,e,a,o){(e=e.filter((function(t){return $L(t).is(":visible")}))).forEach((function(t){var e=t.getAttribute("role"),l=r(o);l&&(e=t.getAttribute(l)),a.push(e)}));let l=new Set(a.filter(((t,e,a)=>a.indexOf(t)!==e)));e.forEach((function(e){var a=e.getAttribute("role"),i=r(o),s=a;i&&(s=a=e.getAttribute(i)),o&&o.elemProps&&o.elemProps.hasOwnProperty(a)&&((s=o.elemProps[a].label)||(s=a));var d={};if(l.has(a)){var c=e.getAttribute("aria-label"),p=e.getAttribute("aria-labelledby"),u=c?function(t,e){return n(e,t),t}(c,e):p?function(t,e){var a=document.querySelector(`#${t}`),o=a.innerText||a.textContent||"";return n(e,o),o}(p,e):n(e);s=s.trim()+": "+u,a=a.trim()+": "+u}null===e.getAttribute("lt-prop-landmark-label")&&e.setAttribute("lt-prop-landmark-label",s),d.value=a,d.name=s,a&&s&&t.push(d)}))}$L.landmark.enable=function(i){l&&$L.landmark.disable();var n=3;i&&i.borderSize&&!isNaN(i.borderSize)&&(n=parseInt(i.borderSize)),(l=document.createElement("div")).id="aria-landmark-dropdown",l.classList.add("lyteLandmarkMenuButtonWrap"),(a=document.createElement("span")).id="aria-landmark-span",a.classList.add("lyteLandmarkDragIcon"),i&&i.spanClass&&Array.isArray(i.spanClass)&&a.classList.add(...i.spanClass),t=function(t){if(t)var e=t.displayValue;var a=document.createElement("lyte-button");a.setAttribute("id","lyteLandmarkButton"),a.classList.add("lyteLandmarkButton");var o=document.createElement("template");o.setAttribute("is","registerYield"),o.setAttribute("yield-name","text"),o.innerHTML=e||"Select Landmark",o.innerHTML+="<lyte-icon class='dropdown'></lyte-icon>",t&&!isNaN(t.tabindex)&&a.setData("lt-prop-tabindex",t.tabindex);return a.appendChild(o),a}(i),e=document.createElement("lyte-menu");var d=s(i);if(e.setData({ltPropQuery:"lyte-button#lyteLandmarkButton",ltPropEvent:"click",ltPropContent:d,ltPropUserValue:"name"}),e.setMethods({onMenuClick:function(t){if(t.value){var e=t.value,a="role",o=r(i);if(o&&(a=o),e.includes(":"))var l=e.split(":"),n=document.querySelector("["+a+'="'+l[0].trim()+'"][lt-prop-landmark="true"][lt-landmark-label="'+l[1].trim()+'"]');else n=document.querySelector("["+a+'="'+e+'"][lt-prop-landmark="true"]');if(n){var s=document.querySelector(".landmarkActiveElement");s&&s.classList.remove("landmarkActiveElement"),n.classList.add("landmarkActiveElement"),n&&(!n.disabled&&$L(n).is(":visible")||i&&i.standardNavigationOrder)&&n.focus()}}},onBeforeOpen:function(t,e,a){if(i&&!i.observeMenuBeforeOpen)return;var o=s(i);if(t.component.getData("ltPropContent").length===o.length)return;t.component.setData("ltPropContent",o)}}),_lyteUiUtils.appendChild(l,a),_lyteUiUtils.appendChild(l,t),_lyteUiUtils.appendChild(l,e),0!==d.length&&_lyteUiUtils.appendChild(document.body,l),shortcut){i&&i.shortcutKey?shortcut.registerKey(i.shortcutKey,(function(){var t=document.querySelector("#lyteLandmarkButton");t&&(t.classList.add("lyteLandmarkButtonHighlight"),t.focus())})):i&&i.shortcutCode?shortcut.registerCode(i.shortcutCode,(function(){var t=document.querySelector("#lyteLandmarkButton");t&&(t.classList.add("lyteLandmarkButtonHighlight"),t.focus())})):shortcut.registerCode("shift + keyl",(function(){var t=document.querySelector("#lyteLandmarkButton");t&&(t.classList.add("lyteLandmarkButtonHighlight"),t.focus())}));var c=document.querySelector("#lyteLandmarkButton>button");c&&c.addEventListener("blur",(function(t){var e=$L(t.target).closest("lyte-button")[0];e&&e.classList.contains("lyteLandmarkButtonHighlight")&&e.classList.remove("lyteLandmarkButtonHighlight")}))}if(!o){var p="role",u=r(i);u&&(p=u);var h=document.querySelectorAll("["+p+'][lt-prop-landmark="true"]');if(i&&i.elemProps){m=i.elemProps;$L.landmark.setColor(i.elemProps,"3")}else{var m={banner:{color:"grey"},complementary:{color:"#E74C3C"},contentinfo:{color:"#F2A62E"},form:{color:"brown"},main:{color:"#0984E3"},navigation:{color:"green"},region:{color:"violet"},search:{color:"darkcyan"}};$L.landmark.setColor(null,"3")}h.forEach((function(t){var e=t.getAttribute("role"),a=r(i);if(a&&(e=t.getAttribute(a)),m.hasOwnProperty(e)){var o=m[e].color;o||(o="black");var l=document.createElement("div"),s=document.createElement("div");s.style.position="absolute",s.style.top="0",s.style.right="0",s.style.border="1px solid "+o,s.style.color="white",s.style.backgroundColor=o,s.innerHTML=e,l.style.position="absolute",l.style.top=(t.offsetTop-n<0?0:t.offsetTop-n)+"px",l.style.left=t.offsetLeft<0?0:t.offsetLeft+"px",l.style.width=(t.offsetWidth-2*n<0?0:t.offsetWidth-2*n)+"px",l.style.height=(t.offsetHeight-n<0?0:t.offsetHeight-n)+"px",l.style.border=`${n}px solid `+o,l.style.pointerEvents="none",l.style.zIndex="14",t.offsetParent&&t.offsetParent.offsetParent&&"relative"==window.getComputedStyle(t.offsetParent.offsetParent).position&&(l.style.top="0px",l.style.left="0px"),l.classList.add("lytelandmarkhighlightdiv"),t.classList.add("ltCustomLandmark"),l=null,s=null}})),o=!0}l&&$L(l).length>0&&$L(l).draggable({containment:"body",hasContainment:!0,onDragStart:function(t){t.style.top=parseFloat(t.style.top?t.style.top:0)+parseFloat(document.documentElement.scrollTop?document.documentElement.scrollTop:0)+"px"},onStop:function(t){t.style.position="fixed",t.style.top=parseFloat(t.style.top?t.style.top:0)-parseFloat(document.documentElement.scrollTop?document.documentElement.scrollTop:0)+"px",t.style.zIndex=20},handle:["#aria-landmark-span"]})},$L.landmark.disable=function(){if(shortcut&&shortcut.unregisterAll(),l&&$L(l).length>0&&($L(l).draggable("destroy"),l.remove(),l=null,t=null,e=null,a=null),o){var i=document.querySelectorAll("div.lytelandmarkhighlightdiv"),n=document.querySelectorAll(".ltCustomLandmark");i.forEach((function(t){t.remove()})),n.forEach((function(t){t.classList.remove("ltCustomLandmark")})),o=!1}var r=document.querySelector(".landmarkActiveElement");r&&r.classList.remove("landmarkActiveElement")},$L.landmark.setColor=function(t,e){var a=document.documentElement;if(t)for(var o in t)a.style.setProperty(`--lyte-landmark-${o}-role-color`,`${t[o].color}`);e&&a.style.setProperty("--lyte-landmark-border-size",`${e}px`)}}}(),function(){var t=[],e=[],a=0;function o(t,e,a){var o=[],l=[];if(e){t&&(o=$L(t).find("."+e)),a&&(l=$L(a).find("."+e));for(var i=0;i<o.length;i++)o[i].classList.remove(e);for(i=0;i<l.length;i++)l[i].classList.remove(e)}}function l(t){var e=document.querySelector(t.scope),a=t.child,o=t.skipElements,l=Array.from(e.querySelectorAll(a)),i=Array.from(e.querySelectorAll(o));if(firstElem=l[0],t.standardNavigationOrder)for(var n=0;null!=firstElem&&i&&i.includes(firstElem)&&!(n>=l.length);)firstElem=l[++n];else for(n=0;null!=firstElem&&(i&&i.includes(firstElem)||firstElem.disabled)&&!(n>=l.length);)firstElem=l[++n];return firstElem}function i(t){var e=l(t);if(e)return e.classList.add(t.selectedClass),e}function n(t){let e,o=u(document.activeElement),l=o.parent,n=o.configObj,r=o.currentElement;if(null==l)return!1;if(o&&o.configObj&&o.configObj.ariaExpand&&!D(o.parCalled,o.configObj.ariaExpand))return;if(o&&o.configObj&&o.configObj.dropdown&&!b(o.configObj.dropdown))return;if(o&&o.configObj&&o.configObj.customDropdownSel&&o.configObj.customDropdownClass&&!P(o.configObj.customDropdownSel,o.configObj.customDropdownClass))return;if(r?e=t&&"row"===t?function(){let t,e,a=u(document.activeElement),o=a.configObj,l=a.listOfChildren,i=a.elementsToSkip,n=a.currentElement;var r=a.listOfRows,s=$L(n).closest(o.row)[0],d=r.indexOf(s),c=Array.from($L(s).find(o.child)).indexOf(n);d>0&&d<r.length?e=r[--d]:0==d&&!0===o.ifCycle&&(e=r[r.length-1]);if(e){var p=$L(e).find(o.child);t=p[c<p.length?c:p.length-1]}var h=l.indexOf(t);if(t)if(o.standardNavigationOrder)for(;null!=t&&i&&i.includes(t);)t=l[--h];else for(;null!=t&&(i&&i.includes(t)||t.disabled);)t=l[--h];return t}():function(){let t,e=u(document.activeElement),a=e.configObj,o=e.listOfChildren,l=e.elementsToSkip,i=e.currentElement,n=o.indexOf(i);n>0&&n<o.length?t=o[--n]:0==n&&!0===a.ifCycle&&(t=h());if(t)if(a.standardNavigationOrder)for(;null!=t&&l&&l.includes(t);)t=o[--n];else for(;null!=t&&(l&&l.includes(t)||t.disabled);)t=o[--n];return t}():(r=i(n),l.scrollTop=0,e=r),void 0===e)return;let s=o.parCalled;n&&n.onBeforeHighlight&&(n.comp?n.onBeforeHighlight.call(n.comp,r,e,"keyboard"):n.onBeforeHighlight(r,e,"keyboard")),r.classList.remove(n.selectedClass),e.classList.add(n.selectedClass),n&&n.onAfterHighlight&&(n.comp?n.onAfterHighlight.call(n.comp,r,e,"keyboard"):n.onAfterHighlight(r,e,"keyboard")),function(t){let e=u(document.activeElement),a=e.parent,o=e.configObj,l=Array.from(a.querySelectorAll(o.child));if(t==l[0])return void(a.scrollTop=0);d(t,a)}(e);let c=e.id;c||(c="LyteHighlightElement_"+a++,e.id=c),s.setAttribute("aria-activedescendant",e.id)}function r(t){let e,o=u(document.activeElement),l=o.parent,n=o.configObj,r=o.currentElement;if(null==l)return!1;if(o&&o.configObj&&o.configObj.ariaExpand&&!D(o.parCalled,o.configObj.ariaExpand))return;if(o&&o.configObj&&o.configObj.dropdown&&!b(o.configObj.dropdown))return;if(o&&o.configObj&&o.configObj.customDropdownSel&&o.configObj.customDropdownClass&&!P(o.configObj.customDropdownSel,o.configObj.customDropdownClass))return;if(r?e=t&&"row"===t?function(){let t,e,a=u(document.activeElement),o=a.configObj,l=a.listOfChildren,i=a.elementsToSkip,n=a.currentElement;var r=a.listOfRows,s=$L(n).closest(o.row)[0],d=r.indexOf(s),c=Array.from($L(s).find(o.child)).indexOf(n);d>=0&&d<r.length-1?e=r[++d]:0==d&&!0===o.ifCycle&&(e=r[0]);if(e){var p=$L(e).find(o.child);t=p[c<p.length?c:p.length-1]}var h=l.indexOf(t);if(t)if(o.standardNavigationOrder)for(;null!=t&&i&&i.includes(t);)t=l[++h];else for(;null!=t&&(i&&i.includes(t)||t.disabled);)t=l[++h];return t}():function(){let t,e=u(document.activeElement),a=(e.parent,e.configObj),o=e.listOfChildren,l=e.elementsToSkip,i=e.currentElement,n=o.indexOf(i);n>=0&&n<o.length-1?t=o[++n]:n==o.length-1&&!0===a.ifCycle&&(t=m());if(t)if(a.standardNavigationOrder)for(;null!=t&&l&&l.includes(t);)t=o[++n];else for(;null!=t&&(l&&l.includes(t)||t.disabled);)t=o[++n];return t}():(r=i(n),l.scrollTop=0,e=r),void 0===e)return;let s=o.parCalled;n&&n.onBeforeHighlight&&(n.comp?n.onBeforeHighlight.call(n.comp,r,e,"keyboard"):n.onBeforeHighlight(r,e,"keyboard")),r.classList.remove(n.selectedClass),e.classList.add(n.selectedClass),n&&n.onAfterHighlight&&(n.comp?n.onAfterHighlight.call(n.comp,r,e,"keyboard"):n.onAfterHighlight(r,e,"keyboard")),function(t){let e=u(document.activeElement).parent;d(t,e)}(e);let c=e.id;c||(c="LyteHighlightElement_"+a++,e.id=c),s.setAttribute("aria-activedescendant",e.id)}function s(a){var l,i=0;for(let o of e)o===a&&(l=t[i]),i+=1;return!!l&&(o(a,l.selectedClass,l.scope),!0)}function d(t,e){(function(t,e){if(t.offsetTop>=e.scrollTop&&t.offsetTop+t.offsetHeight<=e.scrollTop+e.offsetHeight)return!0;return!1})(t,e)||(t.offsetTop<=e.scrollTop?e.scrollTop=t.offsetTop:e.scrollTop=t.offsetTop+t.offsetHeight-e.offsetHeight)}function c(){if(0===t.length)return!0}function p(){for(let t of e)if(t==document.activeElement||t==document.activeElement.parentElement)return!0;return!1}function u(a,o){let l,i,n,r=0;for(let o of e){if(a&&(a===o||a.parentElement&&a.parentElement===o)){l=o,n=o,i=t[r];break}r+=1}let s,d=[],c=[],p=[],u=[];if(null!=l)if(i&&i.changeScope){if(i.scope){let t=i.scope.split(","),e=document.querySelector('[lt-prop-active-scope="true"]'),a=[];if(t.forEach((function(t){a.push(document.querySelector(t))})),!e||!a.includes(e))return;l=e,d=Array.from(e.querySelectorAll(i.child)),i.row&&(c=Array.from(e.querySelectorAll(i.row))),p=Array.from(e.querySelectorAll(i.skipElements)),s||(s=e.querySelector("."+i.selectedClass)),s||i.preventHighlightWhenResetted||(d[0].classList.add(i.selectedClass),s=e.querySelector("."+i.selectedClass))}}else if(i&&i.scope){let t=i.scope.split(",");l=document.querySelector(t[0]);for(let e=0;e<t.length;e++)if(t[e]){let a=document.querySelector(t[e]);u.push(a),d=d.concat(Array.from(a.querySelectorAll(i.child))),i.row&&(c=c.concat(Array.from(a.querySelectorAll(i.row)))),p=p.concat(Array.from(a.querySelectorAll(i.skipElements))),s||(s=a.querySelector("."+i.selectedClass))}if(!s&&!i.preventHighlightWhenResetted){for(var h=0,m=d[h];null!=m&&(p&&p.includes(m)||m.disabled);)m=d[++h];m&&(m.classList.add(i.selectedClass),s=l.querySelector("."+i.selectedClass))}}return{parent:l,parents:u,configObj:i,listOfChildren:d,listOfRows:c,elementsToSkip:p,currentElement:s,parCalled:n}}function h(){let t=u(document.activeElement),e=t.parent,a=t.listOfChildren,o=a[a.length-1];return e.scrollTop=o.offsetHeight*a.length,o}function m(){let t=u(document.activeElement),e=t.parent,a=t.listOfChildren[0];return e.scrollTop=0,a}function f(){let t=u(document.activeElement);return!(!t||!t.configObj||"horizontal"!==t.configObj.orientation)}function y(){let t=u(document.activeElement);return!!(t&&t.configObj&&t.configObj.row)}function v(){let t=u(document.activeElement);return t&&t.configObj?t.configObj.options:void 0}function g(t){var e=t.configObj;e&&e.onBeforeTriggerClick&&(e.comp?e.onBeforeTriggerClick.call(e.comp,t.currentElement,"keyboard"):e.onBeforeTriggerClick(t.currentElement,"keyboard")),t.currentElement.click(),e&&e.onAfterTriggerClick&&(e.comp?e.onAfterTriggerClick.call(e.comp,t.currentElement,"keyboard"):e.onAfterTriggerClick(t.currentElement,"keyboard"))}function b(t){return!!(t&&$L(t).length>0&&$L(t)[0].getData("ltPropIsOpen"))}function P(t,e){return!!(t&&e&&$L(t).length>0&&$L(t)[0].classList.contains(e))}function D(t,e){return!!(t&&e&&$L(t).length>0&&"true"===$L(t)[0].getAttribute(e))}document.addEventListener("keydown",(function(t){if(!c())if("ArrowUp"===t.key){let e=v();if(e&&!e.includes("ArrowUp"))return;f()||(p()&&t.preventDefault(),n())}else if("ArrowDown"===t.key){let e=v();if(e&&!e.includes("ArrowDown"))return;f()||(p()&&t.preventDefault(),r())}else if("PageUp"===t.key){let e=v();if(e&&!e.includes("PageUp"))return;p()&&t.preventDefault(),function(){let t=u(document.activeElement),e=t.parent,o=t.listOfChildren,l=t.currentElement;l||(l=i(r));let n,r=t.configObj,s=t.elementsToSkip,d=o.indexOf(l),c=t.parCalled;if(null==e||null==l)return!1;if(d>Math.floor(o.length/2)&&d<o.length)n=o[Math.floor(o.length/2)];else if(d<=Math.floor(o.length/2)&&d>=0)for(n=o[0],d=0;null==n||s&&s.includes(n);)n=o[++d];if(d=o.indexOf(n),n)for(;null!=n&&s&&s.includes(n);)n=o[--d];if(!n||!l)return!1;l.classList.remove(r.selectedClass),n.classList.add(r.selectedClass),e.scrollTop=n.offsetTop;let p=n.id;p||(p="LyteHighlightElement_"+a++,n.id=p);c.setAttribute("aria-activedescendant",n.id)}()}else if("PageDown"===t.key){let e=v();if(e&&!e.includes("PageDown"))return;p()&&t.preventDefault(),function(){let t=u(document.activeElement),e=t.parent,o=t.listOfChildren,l=t.currentElement;l||(l=i(r));let n,r=t.configObj,s=t.elementsToSkip,d=o.indexOf(l),c=t.parCalled;if(null==e||null==l)return!1;d<Math.floor(o.length/2)&&d>=0?n=o[Math.floor(o.length/2)]:d>=Math.floor(o.length/2)&&d<o.length&&(n=o[o.length-1]);if(d=o.indexOf(n),n)for(;null!=n&&s&&s.includes(n);)n=o[++d];if(!n||!l)return!1;l.classList.remove(r.selectedClass),n.classList.add(r.selectedClass),e.scrollTop=n.offsetTop;let p=n.id;p||(p="LyteHighlightElement_"+a++,n.id=p);c.setAttribute("aria-activedescendant",n.id)}()}else if("Home"===t.key){let t=v();if(t&&!t.includes("Home"))return;!function(){let t=u(document.activeElement),e=t.parent,o=t.listOfChildren,l=t.currentElement;l||(l=i(r));let n,r=t.configObj,s=t.elementsToSkip,d=o.indexOf(l);if(null==e||null==l)return!1;let c=t.parCalled;if(n=m(),d=o.indexOf(n),n)for(;null!=n&&s&&s.includes(n);)n=o[++d];if(!n||!l)return!1;l.classList.remove(r.selectedClass),n.classList.add(r.selectedClass),e.scrollTop=n.offsetTop;let p=n.id;p||(p="LyteHighlightElement_"+a++,n.id=p);c.setAttribute("aria-activedescendant",n.id)}()}else if("End"===t.key){let t=v();if(t&&!t.includes("End"))return;!function(){let t=u(document.activeElement),e=t.parent,o=t.listOfChildren,l=t.currentElement;l||(l=i(r));let n,r=t.configObj,s=t.elementsToSkip,d=o.indexOf(l);if(null==e||null==l)return!1;let c=t.parCalled;if(n=h(),d=o.indexOf(n),n)for(;null!=n&&s&&s.includes(n);)n=o[--d];if(!n||!l)return!1;l.classList.remove(r.selectedClass),n.classList.add(r.selectedClass),e.scrollTop=n.offsetTop;let p=n.id;p||(p="LyteHighlightElement_"+a++,n.id=p);c.setAttribute("aria-activedescendant",n.id)}()}else if("ArrowLeft"==t.key){let e=v();if(e&&!e.includes("ArrowLeft"))return;f()?(p()&&t.preventDefault(),n()):y()&&(p()&&t.preventDefault(),n("row"))}else if("ArrowRight"==t.key){let e=v();if(e&&!e.includes("ArrowRight"))return;f()?(p()&&t.preventDefault(),r()):y()&&(p()&&t.preventDefault(),r("row"))}else"Enter"==t.key&&function(){let t=u(document.activeElement);t&&t.configObj&&t.configObj.triggerClick&&t.currentElement&&(t.configObj.ariaExpand?D(t.parCalled,t.configObj.ariaExpand)&&g(t):t.configObj.dropdown?b(t.configObj.dropdown)&&g(t):t.configObj.customDropdownSel&&t.configObj.customDropdownClass?P(t.configObj.customDropdownSel,t.configObj.customDropdownClass)&&g(t):g(t))}()})),document.addEventListener("mousemove",(function(t){c()||function(t){let e=u(document.activeElement,"mouse");if(!e||!e.configObj||!e.listOfChildren.includes(t.target)){e=u(t.target.parentElement,"mouse");let a=t.target.parentElement;for(;e&&(null==e.configObj||null==e.configObj)&&null!=a&&null!=a&&"BODY"!=a.tagName&&"HTML"!=a.tagName;)e=u(a=a.parentElement,"mouse");if(!e||!e.configObj)return!1}if(e.configObj.ignoreMouseMove)return;let o,l=e.parent,n=e.configObj,r=e.listOfChildren,s=e.elementsToSkip,d=e.currentElement;if(null==l)return!1;if(o=e.parCalled,!s.includes(t.target)&&r.includes(t.target)){for(let t=0;t<e.parents;t++)d||(d=e.parents[t].querySelector("."+n.selectedClass));if(d||(d=i(n)),!d)return;d!=t.target&&n&&n.onBeforeHighlight&&(n.comp?n.onBeforeHighlight.call(n.comp,d,t.target,"mouse"):n.onBeforeHighlight(d,t.target,"mouse")),d.classList.remove(n.selectedClass),t.target.classList.add(n.selectedClass),d!=t.target&&n&&n.onAfterHighlight&&(n.comp?n.onAfterHighlight.call(n.comp,d,t.target,"mouse"):n.onAfterHighlight(d,t.target,"mouse"));let l=t.target.id;l||(l="LyteHighlightElement_"+a++,t.target.id=l),o.setAttribute("aria-activedescendant",t.target.id)}}(t)})),$L.prototype.keyboardNavigator=function(i){if("destroy"===i)return void function(a){for(let l=0;l<e.length;l++)e[l]===a&&(o(e[l],t[l].selectedClass,t[l].scope),e.splice(l,1),t.splice(l,1),l--)}(this[0]);if("presence"===i)return function(t){let a=0;for(let o of e){if(o===t)return!0;a+=1}return!1}(this[0]);if("reset"===i)return s(this[0]);if("resetToFirst"===i)return function(a){var o,i=0;for(let l of e)l===a&&(o=t[i]),i+=1;if(!o)return!1;return!!s(a)&&function(t,e){var a=l(e),o=document.querySelector(e.scope);if(a)return o.scrollTop=0,a.classList.add(e.selectedClass),!0;return!1}(0,o)}(this[0]);t.push(i),e.push(this[0]);let n=document.querySelector(i.scope);var r;r=i.highlightValue?n.querySelector(i.highlightValue):l(i),o(this[0],i.selectedClass,i.scope),r.classList.add(i.selectedClass);let d=this[0],c=r.id;c||(c="LyteHighlightElement_"+a++,r.id=c),d.setAttribute("aria-activedescendant",r.id)}}(),$L&&($L.prototype.trapFocus=function(t){var e=!1;t&&t.preventDefault&&(e=t.preventDefault),_lyteUiUtils.trappingFocus&&$L("#"+_lyteUiUtils.focusParent)[0]&&($L(this[0]).data("trapFocusActiveIndex",0),document.removeEventListener("keydown",_lyteUiUtils.trapFocusFun),$L("#"+_lyteUiUtils.focusParent)[0].removeEventListener("keydown",_lyteUiUtils.trapFocusFun),_lyteUiUtils.trappingFocus=!1,_lyteUiUtils.focusParent="");var a=this[0];if(a){if("destroy"===t||"Destroy"===t)return $L(this[0]).data("trapFocusActiveIndex",0),document.removeEventListener("keydown",_lyteUiUtils.trapFocusFun),$L(a)[0].removeEventListener("keydown",_lyteUiUtils.trapFocusFun),_lyteUiUtils.trappingFocus=!1,_lyteUiUtils.focusParent="",void document.addEventListener("keydown",LytePopup.onEscape,!0);document.removeEventListener("keydown",LytePopup.onEscape,!0);var o='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), *[contenteditable]',l=[];(l=$L(a).find(o).filter((function(t,e){return $L(e).is(":visible")&&-1!=e.tabIndex&&!e.disabled}))).length<1&&($L(this).attr("tabindex")||$L(this).attr("tabindex",0),l.push($L(this)[0])),l.indexOf(document.activeElement)<0&&($L(l[0]).hasClass("lyteModalClose")?l[1]&&l[1].focus():t&&t.focusTarget&&$L(t.focusTarget)[0]?l[l.indexOf($L(t.focusTarget)[0])].focus():l[0].focus()),e?($L(a).data("trapFocusActiveIndex",0),_lyteUiUtils.trapFocusFun=function(e){var l,i=$L(a).data("trapFocusActiveIndex");if(l=$L(a).find(o).filter((function(t,e){return $L(e).is(":visible")&&-1!=e.tabIndex&&!e.disabled})).toArray(),t&&t.attachItems)for(var n=t.attachItems.join(","),r=$L(n).toArray(),s=0;s<r.length;s++)l.push(r[s]);l.indexOf(document.activeElement)!==i&&(i=l.indexOf(document.activeElement)),e.shiftKey&&9==e.keyCode?((i-=1)<0&&(i=l.length-1),l[i].focus(),e.preventDefault(),$L(a).data("trapFocusActiveIndex",i)):9==e.keyCode&&((i+=1)>l.length-1&&(i=0),l[i].focus(),e.preventDefault(),$L(a).data("trapFocusActiveIndex",i))},document.addEventListener("keydown",_lyteUiUtils.trapFocusFun)):(_lyteUiUtils.trapFocusFun=function(t){var e;if(_lyteUiUtils.trappingFocus=!0,_lyteUiUtils.focusParent=$L(a).attr("id"),(e=$L(a).find(o).filter((function(t,e){return $L(e).is(":visible")&&-1!=e.tabIndex&&!e.disabled}))).length<1&&e.push($L(a)[0]),e.indexOf(document.activeElement)<0&&e[0].focus(),9===t.keyCode||16===t.keyCode){if(0==e.length)return;var l,i=document.activeElement;if(!a.contains(i)&&((l=$L(i).closest("lyte-drop-box")[0])&&(l=l.origindd),!a.contains(l)))return LytePopup.initializeFocus(a),void(t&&t.preventDefault());for(var n,r=e.length,s=0;s<e.length;s++)if(e[s]==i){n=s;break}t.shiftKey&&9==t.keyCode?0==n&&(e.get(r-1).focus(),t.preventDefault()):9==t.keyCode&&n==r-1&&(e.get(0).focus(),t.preventDefault())}},a.addEventListener("keydown",_lyteUiUtils.trapFocusFun))}}),Lyte.Component.register("lyte-text",{_template:'<template tag-name="lyte-text" lt-prop-title="" onmouseenter="{{action(\'mouse\')}}" onmouseover="{{action(\'over\',event)}}"><template is="if" value="{{ltPropText}}"><template case="true"><template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield class="lyteTextYield" yield-name="lyte-text" lt-prop-value="{{ltPropValue}}"></lyte-yield> </template><template case="false"><template is="if" value="{{ltPropTail}}"><template case="true"> <span class="lyteTextWrapper" onmouseenter="{{action(\'tailmouse\',this)}}" lt-prop-tooltip-class="lyteTextTooltip" lt-prop-tooltip-config="{{ltPropTooltipConfig}}">{{dummyText}}</span> <span class="lyteTextTail">{{tailText}}</span> </template><template case="false">{{ltPropValue}}</template></template></template></template></template><template case="false"> <template is="if" value="{{ltPropTag}}"><template case="true"><div class="lyteTextTagWrapper"> <template items="{{renderArray}}" item="item" index="index" is="for"><div data-index="{{index}}" class="lyteTextTagElement {{item.class}}" id="{{item.id}}" style="{{item.style}}" tabindex="{{ltPropTabindex}}">{{expHandlers(item.text,\'||\',item)}}</div></template> </div></template><template case="false"><span class="lyteTextWrapper" onmouseenter="{{action(\'submouse\',this)}}" lt-prop-tooltip-class="lyteTextTooltip" lt-prop-tooltip-config="{{ltPropTooltipConfig}}">{{ltPropValue}}</span></template></template> <template is="if" value="{{suffix}}"><template case="true"> <span class="lyteTextSuffix" onclick="{{action(\'over\',event)}}" onkeydown="{{action(\'over\',event)}}" onfocusout="{{action(\'focusout\',event)}}">{{unescape(suffix)}}</span> </template></template><template is="if" value="{{renderHover}}"><template case="true"> <lyte-hovercard lt-prop="{{ltPropHovercard}}" lt-prop-hide-on-click="{{ltPropShowHovercardOnClick}}" lt-prop-origin-elem="{{originElem}}" lt-prop-show="{{lbind(show)}}" on-hovercard-before-hide="{{method(\'beforeHide\')}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content> <template lyte-if="{{ltPropTag}}" items="{{hoverCardArray}}" item="item" index="index" is="for"> <div class="lyteTextHovercardList {{item.class}}" tabindex="{{ltPropTabindex}}" id="{{item.id}}" style="{{item.style}}">{{expHandlers(item.text,\'||\',item)}}</div> </template> <template lyte-else="" lyte-for="{{hoverCardArray}} as item"> <div class="lyteTextHovercardList">{{item}}</div> </template> </lyte-hovercard-content> </template> </lyte-hovercard> </template></template></template></template><template is="if" value="{{render}}"><template case="true"> <div class="lyteTextRenderDiv"> <template is="for" items="{{ltPropArray}}" item="item" index="index"> <div class="lyteTextIndividual"> <template is="if" value="{{ltPropTag}}"><template case="true"><div class="lyteTextTagElement {{item.class}}" id="{{item.id}}" style="{{item.style}}">{{expHandlers(item.text,\'||\',item)}}</div></template><template case="false"> <span class="lyteTextWord">{{item}}</span> <span class="lyteTextComma">{{unescape(ltPropSeparator)}}</span> </template></template> </div> </template> </div> <div class="lyteTextSuffix"> <span>{{unescape(ltPropSuffix)}}</span> </div> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[3,0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"for",position:[0,1],dynamicNodes:[{type:"attr",position:[0],attr:{style:{name:"style",dynamicValue:"item.style"}}},{type:"text",position:[0,0]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item.style"}}},{type:"text",position:[1,0]}]},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0],attr:{style:{name:"style",dynamicValue:"item.style"}}},{type:"text",position:[0,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}}]},{type:"text",position:[3,1,0]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropValue","ltPropShow","ltPropYield","ltPropText","ltPropArray","ltPropSuffix","ltPropHovercard","ltPropSeparator","ltPropWidth","ltPropMinCount","ltPropTooltipConfig","ltPropRerender","ltPropTail","ltPropFillAvailable","ltPropShowHovercardOnClick","ltPropHovercardKey","ltPropTag","ltPropAdditionalSpace","ltPropTabindex","ltPropMultiLine","renderHover","lyteUnbound","hoverCardArray","render","show","originElem","suffix","dummyText","tailText","renderArray"],data:function(){var t=_lyteUiUtils.getDefault("lyte-text");return{ltPropValue:Lyte.attr("string",{default:""}),ltPropShow:Lyte.attr("boolean",{default:0!=t.show}),ltPropYield:Lyte.attr("boolean",{default:t.yield||!1}),ltPropText:Lyte.attr("boolean",{default:0!=t.text}),ltPropArray:Lyte.attr("array"),ltPropSuffix:Lyte.attr("string",{default:t.suffix||""}),ltPropHovercard:Lyte.attr("string",{default:t.hovercard||"{}"}),ltPropSeparator:Lyte.attr("string",{default:t.separator||", "}),ltPropWidth:Lyte.attr("number",{default:t.width||0}),ltPropMinCount:Lyte.attr("number",{default:t.minCount||0}),ltPropTooltipConfig:Lyte.attr("string",{default:t.tooltipConfig||"{}"}),ltPropRerender:Lyte.attr("boolean",{default:!1}),ltPropTail:Lyte.attr("string",{default:t.tail||""}),ltPropFillAvailable:Lyte.attr("boolean",{default:t.fillAvailable||!1}),ltPropShowHovercardOnClick:Lyte.attr("boolean",{default:t.showHovercardOnClick||!1}),ltPropHovercardKey:Lyte.attr("string",{default:t.hovercardKey||" "}),ltPropTag:Lyte.attr("boolean",{default:t.hoverCardArray||!1}),ltPropAdditionalSpace:Lyte.attr("number",{default:0}),ltPropTabindex:Lyte.attr("string",{default:"-1"}),ltPropMultiLine:Lyte.attr("boolean",{default:t.multiLine||!1}),renderHover:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),hoverCardArray:Lyte.attr("array",{default:[]}),render:Lyte.attr("boolean"),show:Lyte.attr("boolean",{default:!1}),originElem:Lyte.attr("string",{default:""}),suffix:Lyte.attr("string",{default:""}),dummyText:Lyte.attr("string",{default:""}),tailText:Lyte.attr("string",{default:""}),renderArray:Lyte.attr("array",{default:[]})}},value_obs:function(t){var e=this.data.ltPropValue,a=this.data.ltPropTail;if(a){var o=new RegExp(a),l=e.match(o)[0]||"";this.setData({dummyText:e.slice(0,-l.length),tailText:l}),t||this.$node.classList.add("lyteTextNoSpace")}}.observes("ltPropValue").on("init"),init:function(){var t,e=this.data,a=e.ltPropArray;if(a){var o=this.$node,l=JSON.parse(e.ltPropHovercard);e.ltPropText=!a,e.originElem=l.originElem||((t=o.id)||(t=o.id="lyteText_"+parseInt(1e4*Math.random())),"#"+t+" .lyteTextSuffix>span")}},rerender_obs:function(t){t.newValue&&this.data.ltPropArray&&(this.render_array(),this.setData(t.item,!1))}.observes("ltPropRerender"),didCnt:function(t){if(this.data.ltPropArray)this.render_array();else if(!t&&this.data.ltPropMultiLine){var e=this.$node,a="lt-prop-tooltip-style",o=e.getAttribute(a);e.classList.add("lyteTextWithMultipleLineContent"),!o&&(o="width:50%;")&&e.setAttribute(a,o)}}.observes("ltPropSuffix","ltPropArray","ltPropArray.[]","ltPropWidth").on("didConnect"),didDestroy:function(){$L.fastdom.clear(this.prev_fast)},render_array:function(){var t=this,e=t.data,a=e.ltPropArray,o=e.ltPropSuffix,l=$L.fastdom,i=a.length,n=[],r=e.ltPropSeparator,s="prev_fast";t.setData("render",!0),l.clear(t[s]),t[s]=l.measure((function(){delete t[s];var d=t.$node,c=d.getElementsByClassName("lyteTextRenderDiv")[0];if(c){for(var p,u=c.children,h="getBoundingClientRect",m=e.ltPropTag,f=e.ltPropAdditionalSpace,y=c.nextElementSibling.children[0][h]().width,v=e.ltPropWidth||d.offsetWidth,g=0,b=0;b<i;b++){var P,D=u[b].children,C=D[0],_=C[h]().width;if(m){var L=getComputedStyle(C);_+=parseFloat(L.marginInlineStart)+parseFloat(L.marginInlineEnd),P=0,b+1!=i&&(_+=f)}else P=D[1][h]().width;if(n.push({width:_,comma:P}),(g+=_+P)>v){for(p=!0,v-=y;g>v;){var x=n.pop();if(!x)break;g-=x.width+x.comma-f,b--}break}}l.mutate((function(){var l="",n=[],s="",c=[];if(p){var u="remove";e.ltPropFillAvailable&&!m?(b++,u="add"):-1==b&&(b=Math.min(i,e.ltPropMinCount)-1,u="add"),$L(d)[u+"Class"]("lyteTextNoSpace");for(var h=0;h<i;h++){var f=a[h];h<=b?m?c.push(f):l+=(h?r:"")+f:n.push(f)}b+1!=i&&(s=o.replace("{0}",i-++b))}else m&&(c=a),l=a.join(r);t.setData({ltPropValue:l,suffix:s,render:!1,hoverCardArray:n,renderHover:p&&e.ltPropShow,renderArray:c})}))}}))},reset:function(t,e,a){var o=t||this.$node,l=this.data;if(l.ltPropText||t){var i="",n=check4ellipsis(o,e||l.ltPropValue,!l.ltPropYield,l.ltPropMultiLine);n&&l.ltPropShow&&(i=e||l.ltPropValue),o.setAttribute("lt-prop-title",a?n&&l.ltPropShow?l.ltPropValue:"":i)}},over:function(t){var e=this.data,a=e.ltPropShowHovercardOnClick;switch(t.type){case"click":if(!a)return;break;case"keydown":var o=!0;if(a)(e.ltPropHovercardKey||"").split(/\,|\|/g).indexOf(t.key)+1&&(t.preventDefault(),o=!1);if(o)return;break;default:if(a)return}t.target.closest(".lyteTextSuffix")&&(a?window.requestAnimationFrame(function(){this.setData("show",e.ltPropShow)}.bind(this)):this.setData("show",e.ltPropShow))},actions:{focusout:function(){var t=this.data;t.ltPropShowHovercardOnClick&&t.show&&this.setData("show",!1)},mouse:function(){this.data.ltPropTail||this.reset()},over:function(t){this.data.ltPropArray&&this.over(t)},submouse:function(t){$L(this.$node).hasClass("lyteTextNoSpace")&&this.reset(t,this.data.ltPropValue)},tailmouse:function(t){this.reset(t,this.data.dummyText,!0)}},methods:{beforeHide:function(t,e){return!this.data.ltPropShowHovercardOnClick||"mouseleave"!=(e||{}).type}}}),window.addEventListener("resize",(function(){clearTimeout(window.__lyteTextTimeout),__lyteTextTimeout=setTimeout((function(){__lyteTextTimeout=void 0;for(var t=document.getElementsByTagName("lyte-text"),e=t.length,a=0;a<e;a++){var o=t[a];o.ltProp("array")&&o.component.render_array()}}),100)}),!0),document.addEventListener("mouseover",(function(t){var e=t.target;if($L(e).hasClass("lyteTextEllipsisNode")){var a="lt-prop-title",o=e.getAttribute("data-lyte-text-tooltip")||e.textContent.trim();check4ellipsis(e,o,!0,!1)?e.setAttribute(a,o):e.removeAttribute(a)}}),!0);var _lyteCbox={checkedClass:"lyteCboxChecked",uncheckedClass:"lyteCboxUnchecked"};function _lyteInput(t){for(var e=_lyteUiUtils.input,a=Object.keys(e||{}),o=0;o<a.length;o++){var l=e[a[o]].component;"click"==t.type?l.calenderClickHide.call(l,t):l.scrollFunc.call(l,t)}}Lyte.Component.register("lyte-checkbox",{_template:'<template tag-name="lyte-checkbox" onkeydown="{{action(\'preventInputClick\',event)}}" onkeyup="{{action(\'preventInputClick\',event)}}"> <template value="{{ltPropType}}" is="switch">     <template case="default"><label class="lyteCheckbox lyteDefault" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}" lyte-label=""> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template><template case="primary"><label class="lyteCheckbox lytePrimary" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" id="{{randomId}}" aria-hidden="true" lyte-label=""> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template><template case="switch"><label class="" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide on-off-sw" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="on-btn"></span> <template is="if" value="{{ltPropAria}}"><template case="true"> <span class="lyteCheckboxOffStateLabel lyteCheckboxStateLabel">{{lyteUiI18n(\'lyte.checkbox.off\')}}</span> <span class="lyteCheckboxOnStateLabel lyteCheckboxStateLabel">{{lyteUiI18n(\'lyte.checkbox.on\')}}</span> </template></template> </span> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}" lyte-label=""> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label></template><template case="slider"><label class="lyteCheckSliderLabel" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}" lyte-label=""> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},primary:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,3]},{type:"if",position:[0,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}},{type:"attr",position:[0,5]},{type:"attr",position:[0,5,1]},{type:"if",position:[0,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropType","ltPropId","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropName","ltPropValue","ltPropReadonly","ltPropFireOnInit","ltPropClass","ltPropLabelClass","ltPropTabindex","lyteUnbound","ltPropYield","ltPropAriaCheckbox","ltPropFocus","ltPropPreventCallbackObservers","ltPropDataTabindex","ltPropShowTooltip","ltPropTooltipConfig","ltPropTooltipClass","ltPropAria","randomId"],data:function(){return{ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","type","default")}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","fireOnInit",!1)}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","class","")}),ltPropLabelClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","labelClass","")}),ltPropTabindex:Lyte.attr("number",{default:0}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAriaCheckbox:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","ariaCheckbox",{}),watch:!0}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropPreventCallbackObservers:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:""}),ltPropShowTooltip:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","showTooltip",!1)}),ltPropTooltipConfig:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","tooltipConfig",{position:"bottom",appearance:"box",margin:5,keeptooltip:!0})}),ltPropTooltipClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","tooltipClass","")}),ltPropAria:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","aria",!1)}),randomId:Lyte.attr("string")}},ariaObserver:function(t){var e,a=t.type;"change"===a?e=t.newValue:"deepChange"===a&&(e=t.data),this.addAriaValues({},e)}.observes("ltPropAriaCheckbox.*"),didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteCheckDisabled"):this.$node.classList.remove("lyteCheckDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),setDefaults:function(){var t=this.getData("ltPropType"),e=this.getData("ltPropClass"),a=this.getData("ltPropLabelClass"),o=this.getData("ltPropAria");"switch"===t?this.setData("ltPropFinalClass",e||this.getDefaultSwitchClass()):"default"===t?this.setData("ltPropFinalClass",e||"lyteCheckBoxDefault"):"primary"===t?this.setData("ltPropFinalClass",e||"lyteCheckBoxPrimary"):"slider"===t&&this.setData("ltPropFinalClass",e||"lyteCheckSlider"),"slider"===t?this.setData("ltPropFinalLabelClass",a||"lyteCheckSliderText"):this.setData("ltPropFinalLabelClass",a||""),o&&"switch"===t&&this.$node.classList.add("lyteCheckboxAriaTextEnabled")},getDefaultSwitchClass:function(){return"lyteCheckSwitch"+(this.getData("ltPropAria")?" lyteCheckboxSwitchWithStateLabel":"")},typeObs:function(){this.setDefaults(),this.setRandomId()}.observes("ltPropType","ltPropClass","ltPropLabelClass").on("init"),setTooltip:function(){var t=this.getData("ltPropShowTooltip"),e=this.getData("ltPropLabel"),a=this.getData("ltPropTooltipConfig"),o=this.getData("ltPropTooltipClass"),l=this.$node.querySelector("[lyte-label]");t&&this.$node.classList.add("lyteCheckboxLabelEllipsis"),t&&l&&l.offsetWidth<l.scrollWidth&&(l.setAttribute("lt-prop-title",e),l.setAttribute("lt-prop-tooltip-config",JSON.stringify(a)),l.setAttribute("lt-prop-tooltip-class",o))},labelChangedObserver:function(){this.setTooltip()}.observes("ltPropLabel","ltPropTooltipClass","ltPropShowTooltip","ltPropTooltipConfig").on("didConnect"),setRandomId:function(){this.setData("randomId","lyte-checkbox-label-"+_lyteUiUtils.cboxId++)},didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},focusInput:function(){var t=this.$node.querySelector("input");document.activeElement!==t&&t.focus()},didConnect:function(){var t=this,e=this.getData("ltPropAriaCheckbox"),a=this.getData("ltPropDataTabindex");this.$node.setAttribute("data-tabindex",a),this.reduceOpacity(),this.$node.click=function(){var e=new Event("click",{bubbles:!0,cancelable:!0}),a=t.$node,o=a.ltProp("checked"),l=a.ltProp("disabled"),i=a.ltProp("readonly"),n=(t.getData("lyteUnbound"),t.$node.querySelector("input"));l||i||(t.setData("eventCache",e),t.setData("internalChange",!0),t.clickFn=!0,o?a.ltProp("checked",!1):a.ltProp("checked",!0),t.$node._fR&&(t.setData("internalChange",!1),n.checked=a.ltProp("checked"),n.checked?n.setAttribute("checked",""):n.removeAttribute("checked"),t.fireCallBacksFunction({},!1)),t.clickFn=!1,a.dispatchEvent(e))},this.$node.focus=function(){var e=t.$node,a=e.querySelector("input"),o=e.ltProp("disabled"),l=e.ltProp("readonly");o||l||a.focus()},this.$node.blur=function(){var e=t.$node,a=e.querySelector("input"),o=e.ltProp("disabled"),l=e.ltProp("readonly");o||l||a.blur()},this.fireCallBacksFunction.call(this,void 0,!0),this.addAriaValues({},e)},addAriaValues:function(t,e){var a=this.getCheckboxWidget();_lyteUiUtils.setAttribute(a,e,t)},getCheckboxWidget:function(){return this.$node.querySelector("input")},fireCallbacks:function(t,e){var a=this.getData("ltPropPreventCallbackObservers"),o=this.getData("internalChange"),l=this.getData("ltPropChecked")?_lyteCbox.checkedClass:_lyteCbox.uncheckedClass;if(this.setData("internalChange",!1),!this.getData("preventRefire")&&!this.getData("preventObs")){if(o||!a)return this.getData("handleLbind")?(this.setData("preventObs",!0),this.setData("internalChange",!0),this.setData("ltPropChecked",!this.getData("ltPropChecked")),this.setData("preventObs",!1),void this.setData("handleLbind",!1)):void this.fireCallBacksFunction.call(this,t,e);this.toggleClass(l)}}.observes("ltPropChecked"),focusCheckbox:function(){this.getData("ltPropFocus")&&this.$node.focus(),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),fireCallBacksFunction:function(t,e){var a=this.getData("ltPropChecked"),o=this.getData("ltPropFireOnInit"),l=this.getData("eventCache");if(this.$node.checked=a||!1,a&&e){if(!o)return;var i=this.$node.querySelector("input");this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",i,this,l,"script"),this.getMethods("onChecked")&&this.executeMethod("onChecked",i,this,l,"script"),this.getMethods("onChanged")&&this.executeMethod("onChanged",i,this,l,"script",this.getData("ltPropChecked"))}else if(this.$node.checked&&!e){i=this.$node.querySelector("input");if(!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeChecked")){if(this.data.ltPropChecked=!1,i.checked=!1,!1===this.executeMethod("onBeforeChecked",i,this,l,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!0,this.setData("internalChange",!0),this.setData("ltPropChecked",!1)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!0,i.checked=!0}this.setData("preventRefire",!1)}this.getMethods("onChecked")&&this.executeMethod("onChecked",i,this,l,this.eventType()),this.toggleClass(_lyteCbox.checkedClass),this.getMethods("onChanged")&&this.executeMethod("onChanged",i,this,l,this.eventType(),this.getData("ltPropChecked")),_lyteUiUtils.dispatchEvent("checkboxchange",this.$node,{originalEvent:l})}else if(!this.$node.checked&&!e){i=this.$node.querySelector("input");if(!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeUnchecked")){if(this.data.ltPropChecked=!0,i.checked=!0,!1===this.executeMethod("onBeforeUnchecked",i,this,l,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!1,this.setData("internalChange",!0),this.setData("ltPropChecked",!0)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!1,i.checked=!1}this.setData("preventRefire",!1)}this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",i,this,l,this.eventType()),this.toggleClass(_lyteCbox.uncheckedClass),this.getMethods("onChanged")&&this.executeMethod("onChanged",i,this,l,this.eventType(),this.getData("ltPropChecked")),_lyteUiUtils.dispatchEvent("checkboxchange",this.$node,{originalEvent:l})}},toggleClass:function(t){var e=t===_lyteCbox.checkedClass?_lyteCbox.uncheckedClass:_lyteCbox.checkedClass;this.$node.classList.remove(e),this.$node.classList.add(t)},eventType:function(){var t=this.clicked||this.clickFn,e=this.eveType;return t?e||"click":"script"},isCheckedLbound:function(){return!!this.$node._attributeDetails&&(!!this.$node._attributeDetails["lt-prop-checked"]&&!!this.$node._attributeDetails["lt-prop-checked"].isLbind)},isNodeDestroyed:function(){return!this.$node},fireClick:function(t){var e,a,o=this.getData("sendEvent"),l=this.getData("ltPropDisabled");this.isTimeoutInitiated=!1,this.isNodeDestroyed()||o||l||!this.metaOrShiftPressed||((e=this.$node.querySelector("input")).checked=!e.checked,(a=new Event("click")).shiftKey=!0,e.dispatchEvent(a))},actions:{preventInputClick:function(t){32===t.keyCode&&t.preventDefault()},mup:function(t){var e,a=this.getData("ltPropReadonly");if(this.metaOrShiftPressed=t.metaKey||t.shiftKey,this.setData("prevented",!1),this.setData("sendEvent",!1),!this.getData("ltPropDisabled"))if(a)t.preventDefault();else{var o=this.$node.querySelector("input");e=o.checked,this.getMethods("onBeforeChecked")&&!e?0!=this.executeMethod("onBeforeChecked",o,this,t,"click")||(this.setData("prevented",!0),t.preventDefault()):this.getMethods("onBeforeUnchecked")&&e&&(0!=this.executeMethod("onBeforeUnchecked",o,this,t,"click")||(this.setData("prevented",!0),t.preventDefault()))}},prevent:function(t){var e=this.getData("sendEvent"),a=!!~window.navigator.userAgent.indexOf("Firefox"),o=this.isTimeoutInitiated;e||t.stopPropagation(),a&&!o&&(this.isTimeoutInitiated=!0,setTimeout(this.fireClick.bind(this,t),0))},checkBoxClicked:function(t){if(!this.getData("ltPropReadonly")){var e,a;if(this.setData("sendEvent",!0),this.setData("eventCache",t),this.clicked=!0,this.focusInput(),this.getData("prevented"))return e=this.$node.querySelector("input"),this.setData("prevented",!1),this.setData("preventRefire",!0),e.checked?e.checked=!1:e.checked=!0,this.setData("preventRefire",!1),this.clicked=!1,void this.setData("eventCache",{});if(this.getData("ltPropDisabled"))return this.clicked=!1,t.preventDefault(),void this.setData("eventCache",{});a=t.target.checked,this.setData("internalChange",!0),a?this.setData("ltPropChecked",!0):this.setData("ltPropChecked",!1),this.$node._fR&&(this.setData("internalChange",!1),this.getData("ltPropChecked")?this.$node.querySelector("input").setAttribute("checked",""):this.$node.querySelector("input").removeAttribute("checked"),this.fireCallBacksFunction({},!1)),this.setData("eventCache",{}),this.clicked=!1}}}}),document.addEventListener("keyup",(function(t){var e;if(document.contains(t.target)&&32===t.keyCode){if("INPUT"!==(e=document.activeElement).tagName)return;for(;e&&"LYTE-CHECKBOX"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentNode;if(!e)return;"LYTE-CHECKBOX"===e.tagName&&(e.component.eveType="key",e.click(),e.component.eveType="")}}),!0),Lyte.Component.register("lyte-input",{_template:'<template tag-name="lyte-input"> <template is="switch" value="{{ltPropType}}"> <template case="password"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel {{ltPropLabelClass}}">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{if(ltPropValue,\'ltIconShow\',\'\')}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="{{ltPropType}}" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" style="{{ltPropStyle}}" readonly="{{ltPropReadonly}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}"> <template is="if" value="{{ltPropPasswordIcon}}"><template case="true"> <span role="button" aria-label="{{passwordTooltip}}" data-tabindex="{{if(ltPropAria,ltPropDataTabindex,false)}}" tabindex="{{if(ltPropAria,ltPropTabIndex,false)}}" class="lyteInputPasswordToggleIcon {{passwordClass}}" lt-prop-tooltip-config="{{ltPropTooltipConfig}}" lt-prop-title="{{passwordTooltip}}" onclick="{{action(\'togglePassword\')}}" onkeydown="{{action(\'togglePassword\',event)}}"></span> </template></template><template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span role="button" onkeyup="{{action(\'closeKey\',event)}}" aria-label="{{ltPropAriaLabel.closeIcon}}" disabled="{{ltPropDisabled}}" onkeydown="{{action(\'clsIcon\',event)}}" data-tabindex="{{if(ltPropAria,ltPropDataTabindex,expHandlers(1,\'-\'))}}" tabindex="{{if(ltPropAria,ltPropTabIndex,expHandlers(1,\'-\'))}}" class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div> </template> <template case="number"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel {{ltPropLabelClass}}">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{if(ltPropValue,\'ltIconShow\',\'\')}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="number" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" onkeydown="{{action(\'numberKeydown\',event,this)}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" step="{{ltPropStep}}" max="{{ltPropMax}}" min="{{ltPropMin}}" title="{{ltPropInputTitle}}" onpaste="{{action(\'numberPaste\',event,this)}}" oninput="{{action(\'input\',event,this)}}"> <template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span role="button" onkeyup="{{action(\'closeKey\',event)}}" aria-label="{{ltPropAriaLabel.closeIcon}}" disabled="{{ltPropDisabled}}" onkeydown="{{action(\'clsIcon\',event)}}" data-tabindex="{{if(ltPropAria,ltPropDataTabindex,expHandlers(1,\'-\'))}}" tabindex="{{if(ltPropAria,ltPropTabIndex,expHandlers(1,\'-\'))}}" class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div> </template> <template case="textarea"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel {{ltPropLabelClass}}">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <textarea autocomplete="{{ltPropAutocomplete}}" pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" id="{{ltPropId}}" class="{{ltPropClass}}" value="{{lbind(ltPropValue)}}" rows="{{ltPropRows}}" cols="{{ltPropCols}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}"></textarea> <template is="if" value="{{resize}}"><template case="true"> <span class="{{resizeClass}}" onmousedown="{{action(\'resizeSelect\',event)}}" ontouchstart="{{action(\'resizeSelect\',event)}}"></span> </template></template> </div> </template> <template case="date"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel {{ltPropLabelClass}}">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" id="{{ltPropId}}" class="{{ltPropClass}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" value="{{lbind(ltPropCurrentDate)}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onkeydown="{{action(\'calendarKeydown\',event,this)}}" onclick="{{action(\'calendarClick\',event,this)}}" onfocus="{{action(\'showcalendar\',event,this)}}" onblur="{{action(\'blurThrow\',event)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}" ondragstart="{{action(\'preventDrag\',event)}}"> <template is="if" value="{{ltPropAria}}"><template case="true"> <span aria-haspopup="true" aria-label="{{ltPropAriaLabel.button}}" disabled="{{ltPropDisabled}}" aria-expanded="{{isExpanded}}" aria-controls="#{{randomId}}" class="lyteInputCalendarIcon" onclick="{{action(\'calIconClick\',event,this)}}" onfocus="{{action(\'calIconFocus\',event,this)}}" onblur="{{action(\'calIconBlur\',event,this)}}" tabindex="{{ltPropTabIndex}}" data-tabindex="{{ltPropDataTabindex}}" onkeydown="{{action(\'calIconKey\',event)}}"></span> </template></template> </div> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole on-before-append="{{method(\'wormholeAppend\')}}" role="dialog" aria-modal="true" aria-label="{{ltPropAriaLabel.modal}}"> <template is="registerYield" yield-name="lyte-content"> <div id="lyteCalendar" class="lyteInputCalendar lyteCalendarHidden {{ltPropCalendarClass}}" onmousedown="{{action(\'calmsdown\',event,this)}}" onkeydown="{{action(\'calendarKey\',event)}}"> <lyte-calendar lt-prop-iso="{{lbind(ltPropIso)}}" id="{{randomId}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-number-of-rows="{{ltPropNumberOfRows}}" lt-prop-yield="{{ltPropYield}}" lt-prop-format="{{ltPropFormat}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" lt-prop-year="{{lbind(ltPropYear)}}" lt-prop-month-header-format="{{ltPropMonthHeaderFormat}}" on-date-selected="{{method(\'on-dateselected\')}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" lt-prop-header-type="{{ltPropHeaderType}}" on-navigate="{{method(\'calendarNavigate\')}}" on-viewdate-change="{{method(\'viewDateChange\')}}" on-view-change="{{method(\'viewChange\')}}" lt-prop="{{stringify(ltPropCalendarProperties)}}" lt-prop-activate-navigation="{{lbind(navigation)}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <template is="registerYield" yield-name="footer"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template></template> </lyte-calendar> </div> </template> </lyte-wormhole> </template></template> </template> <template case="datetime"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel {{ltPropLabelClass}}">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <template is="if" value="{{showPlaceholder}}"><template case="true"> <span class="lyteInputDateTimePlaceholder">{{ltPropCommonPlaceholder}}</span> </template></template> <input autocomplete="{{ltPropAutocomplete}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" class="{{ltPropClass}}" id="date" placeholder="{{ltPropPlaceholder}}" value="{{lbind(ltPropCurrentDate)}}" onkeydown="{{action(\'calendarKeydown\',event,this)}}" onclick="{{action(\'calendarClick\',event,this)}}" onfocus="{{action(\'showcalendar\',event,this)}}" onblur="{{action(\'blurThrow\',event)}}" oninput="{{action(\'input\',event)}}" ondragstart="{{action(\'preventDrag\',event)}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}"> <template is="if" value="{{ltPropAria}}"><template case="true"> <span aria-haspopup="true" aria-label="{{ltPropAriaLabel.button}}" disabled="{{ltPropDisabled}}" aria-expanded="{{isExpanded}}" aria-controls="#{{randomId}}" class="lyteInputCalendarIcon" onclick="{{action(\'calIconClick\',event,this)}}" onfocus="{{action(\'calIconFocus\',event,this)}}" onblur="{{action(\'calIconBlur\',event,this)}}" tabindex="{{ltPropTabIndex}}" data-tabindex="{{ltPropDataTabindex}}" onkeydown="{{action(\'calIconKey\',event)}}"></span> </template></template> <input autocomplete="{{ltPropAutocomplete}}" tabindex="{{ltPropTabIndex}}" type="text" placeholder="{{ltPropTimePlaceholder}}" class="{{ltPropTimeClass}}" value="{{ltPropDefaultTime}}" id="time" onblur="{{action(\'timeBlur\',event,this)}}" onfocus="{{action(\'timeFocus\',event,this)}}" onkeydown="{{action(\'timeKeydown\',event,this)}}" onclick="{{action(\'timeClick\',event,this)}}" style="{{ltPropStyle}}" ondragstart="{{action(\'preventDrag\',event)}}" disabled="{{ltPropDisabled}}" oninput="{{action(\'timeInput\',this)}}" readonly="{{ltPropReadonly}}"> </div> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole on-before-append="{{method(\'wormholeAppend\')}}" role="dialog" aria-modal="true" aria-label="{{ltPropAriaLabel.modal}}"> <template is="registerYield" yield-name="lyte-content"> <div id="lyteCalendar" class="lyteInputCalendar lyteCalendarHidden {{ltPropCalendarClass}}" onmousedown="{{action(\'calmsdown\',event,this)}}" onkeydown="{{action(\'calendarKey\',event)}}"> <lyte-calendar lt-prop-iso="{{lbind(ltPropIso)}}" id="{{randomId}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-number-of-rows="{{ltPropNumberOfRows}}" lt-prop-yield="{{ltPropYield}}" lt-prop-format="{{ltPropFormat}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" lt-prop-year="{{lbind(ltPropYear)}}" lt-prop-month-header-format="{{ltPropMonthHeaderFormat}}" on-date-selected="{{method(\'on-dateselected\')}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" lt-prop-header-type="{{ltPropHeaderType}}" on-navigate="{{method(\'calendarNavigate\')}}" on-viewdate-change="{{method(\'viewDateChange\')}}" on-view-change="{{method(\'viewChange\')}}" lt-prop="{{stringify(ltPropCalendarProperties)}}" lt-prop-activate-navigation="{{lbind(navigation)}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <template is="registerYield" yield-name="footer"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template></template> </lyte-calendar> </div> </template> </lyte-wormhole> </template></template> <lyte-dropdown class="lyteInputDateTimeDropdown" lt-prop-position="{{ltPropPosition}}" lt-prop-yield="true" lt-prop-disabled="{{ltPropDropdownDisabled}}" lt-prop-show="{{ltPropDropdownShow}}" lt-prop-callout="{{ltPropDropdownCallout}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-freeze="{{ltPropDropdownFreeze}}" on-hide="{{method(\'hide\')}}" on-show="{{method(\'show\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-option-selected="{{method(\'optionSelected\')}}" on-position-changed="{{method(\'positionChange\')}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{ltPropDefaultTime}}" lt-prop-animate="{{ltPropAnimate}}" lt-prop-scope="{{ltPropScope}}" lt-prop="{{stringify(ltPropDropdownProperties)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="lyteInputDateTimeDropButton"></lyte-drop-button> <lyte-drop-box id="{{ltPropDropdownId}}" class="{{ltPropDropdownClass}}"> <template is="if" value="{{ltPropHeaderYield}}"><template case="true"> <lyte-drop-head> <lyte-yield yield-name="timeheader"></lyte-yield> </lyte-drop-head> </template></template> <lyte-drop-body> <template is="if" value="{{ltPropYield}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}" lt-prop-title="{{item.title}}" data-custom-tooltip="{{item.customTooltip}}"> <lyte-yield yield-name="yield" item-value="{{item}}"></lyte-yield> </lyte-drop-item> </template></template><template case="false"><template is="if" value="{{ltPropShowInterval}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}" lt-prop-title="{{item.title}}" data-custom-tooltip="{{item.customTooltip}}"> <span>{{item.time}}</span> <span style="opacity: 0.5;float: right;margin-left: 5px;">{{item.interval}}</span> </lyte-drop-item> </template></template><template case="false"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}" lt-prop-title="{{item.title}}" data-custom-tooltip="{{item.customTooltip}}"> <span>{{item.time}}</span> </lyte-drop-item> </template></template></template></template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template> <template case="time"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel {{ltPropLabelClass}}">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" value="{{ltPropDefaultTime}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onblur="{{action(\'timeBlur\',event,this)}}" onfocus="{{action(\'timeFocus\',event,this)}}" onkeydown="{{action(\'timeKeydown\',event,this)}}" onclick="{{action(\'timeClick\',event,this)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" ondragstart="{{action(\'preventDrag\',event)}}" oninput="{{action(\'timeInput\',this)}}"> </div> <template is="if" value="{{ltPropDropdown}}"><template case="true"> <lyte-dropdown class="lyteInputTimeDropdown" lt-prop-position="{{ltPropPosition}}" lt-prop-yield="true" lt-prop-disabled="{{ltPropDropdownDisabled}}" lt-prop-show="{{ltPropDropdownShow}}" lt-prop-callout="{{ltPropDropdownShow}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-freeze="{{ltPropDropdownFreeze}}" on-hide="{{method(\'hide\')}}" on-show="{{method(\'show\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-option-selected="{{method(\'optionSelected\')}}" on-position-changed="{{method(\'positionChange\')}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{ltPropDefaultTime}}" lt-prop-animate="{{ltPropAnimate}}" lt-prop-scope="{{ltPropScope}}" lt-prop="{{stringify(ltPropDropdownProperties)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="lyteInputTimeDropButton"></lyte-drop-button> <lyte-drop-box id="{{ltPropDropdownId}}" class="{{ltPropDropdownClass}}"> <template is="if" value="{{ltPropHeaderYield}}"><template case="true"> <lyte-drop-head> <lyte-yield yield-name="timeheader"></lyte-yield> </lyte-drop-head> </template></template> <lyte-drop-body> <template is="if" value="{{ltPropYield}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}" lt-prop-title="{{item.title}}" data-custom-tooltip="{{item.customTooltip}}"> <lyte-yield yield-name="yield" item-value="{{item}}"></lyte-yield> </lyte-drop-item> </template></template><template case="false"><template is="if" value="{{ltPropShowInterval}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}" lt-prop-title="{{item.title}}" data-custom-tooltip="{{item.customTooltip}}"> <span>{{item.time}}</span> <span style="opacity: 0.5;float: right;margin-left: 5px;">{{item.interval}}</span> </lyte-drop-item> </template></template><template case="false"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}" lt-prop-title="{{item.title}}" data-custom-tooltip="{{item.customTooltip}}"> <span>{{item.time}}</span> </lyte-drop-item> </template></template></template></template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </template> <template default=""> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel {{ltPropLabelClass}}">{{ltPropLabel}}</label> </template></template> <div class="lyteField{{if(ltPropValue,\' ltIconShow\',\'\')}} {{isBox}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" pattern="{{ltPropPattern}}" oninput="{{action(\'input\',event)}}"> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;search&quot;)}}"><template case="true"> <span class="searchIcon"></span> </template></template> <template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span role="button" data-tabindex="{{if(ltPropAria,ltPropDataTabindex,false)}}" tabindex="{{if(ltPropAria,ltPropTabIndex,false)}}" class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}" onkeydown="{{action(\'keyclick\',event)}}"></span> </template></template> </div>  </template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{password:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},type:{name:"type",dynamicValue:"ltPropType"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,4]},{type:"if",position:[3,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]},number:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},value:{name:"value",dynamicValue:"ltPropValue",isLbind:!0}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]},textarea:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},placeholder:{name:"placeholder",dynamicValue:"ltPropPlaceholder"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},date:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},datetime:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,7],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[7]}]},time:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]}}],_observedAttributes:["ltPropDisabled","ltPropAutofocus","ltPropAutocomplete","ltPropMaxlength","ltPropName","ltPropPlaceholder","ltPropReadonly","ltPropValue","ltPropWidth","ltPropTabIndex","ltPropType","ltPropAppearance","ltPropDirection","ltPropLabel","ltPropId","ltPropClass","ltPropStyle","ltPropWrapperStyle","ltPropHeight","ltPropPattern","ltPropInputTitle","ltPropRows","ltPropCols","ltPropTextAreaResize","ltPropMax","ltPropMin","ltPropStep","ltPropTimeFormat","ltPropHourInterval","ltPropDefaultTime","ltPropMinuteInterval","ltPropDropdown","ltPropShowInterval","ltPropStartTime","ltPropEndTime","ltPropConvertToNearest","ltPropValidateOnBlur","ltPropFillRows","ltPropNumberOfRows","ltPropMinDate","ltPropMaxDate","ltPropStartWeekDay","ltPropMonthHeaderFormat","daysOfWeek","ltPropYear","ltPropFormat","viewDate","ltPropStartDate","ltPropEndDate","ltPropCurrentDate","ltPropBindToBody","ltPropCalendarClass","ltPropHeaderType","ltPropDropdownDisabled","ltPropDropdownShow","ltPropDropdownCallout","ltPropDropdownFreeze","ltPropDropdownId","ltPropDropdownClass","ltPropPosition","ltPropBoundary","ltPropWheel","ltPropYield","ltPropAnimate","ltPropPreventSelection","ltPropPreventKeys","ltPropUpdateDelay","ltPropAutoUpdate","ltPropCallbackDelay","ltPropCloseIcon","ltPropTimePlaceholder","ltPropCommonPlaceholder","ltPropTimeClass","ltPropAria","ltPropAriaAttributes","ltPropTimeAriaAttributes","ltPropFocus","ltPropCalendarProperties","ltPropDropdownProperties","ltPropScope","ltPropHeaderYield","ltPropConvertedDate","ltPropConvertedTime","ltPropPreventDropdownNavigation","ltPropInputWrapperClass","ltPropWrapperClass","ltPropTimezoneHandling","ltPropFocusAtEnd","ltPropPasswordIcon","ltPropPasswordVisibility","ltPropPasswordTooltip","ltPropTooltipConfig","ltPropAriaLabel","ltPropDataTabindex","ltPropLabelClass","ltPropDisabledTimeTooltip","ltPropIso","eventListeners","selectedField","endMinute","startMinute","dropdownData","originalData","dateRange","meridian","hour","min","selectedDateField","preventObs","resize","resizeClass","pos","isSearch","isBox","dateOrder","showPlaceholder","lyteUnbound","randomId","navigation","passwordClass","passwordTooltip","isExpanded"],init:function(t){var e=this.data,a=e.ltPropType;if(("time"==a||"datetime"==a)&&(this._prevent=!0,this.timeInValChange(),this.startEndTimeObs(),delete this._prevent,-1!=a.indexOf("time")&&e.ltPropDropdown))if(this.dropdownConstruct(),"time"==a)this.setData("ltPropDefaultTime",e.ltPropDefaultTime||e.ltPropValue);else if(!t){var o=e.ltPropIso;if(o){var l=$L.moment(new Date(o));this.setData("ltPropDefaultTime",l.format(12==e.ltPropTimeFormat?"hh:mm A":"HH:mm"))}}"date"!=a&&"datetime"!=a||("date"==a&&this.setData("ltPropCurrentDate",e.ltPropCurrentDate||e.ltPropValue),e.ltPropAria&&(this.setData("randomId","lyteInput_"+parseInt(1e6*Math.random())),Lyte.objectUtils(e.ltPropCalendarProperties,"add","disableNavigation",!1)),this.dateRegexFind()),t||(this.$node.classList.add("lyteInput"),this.$node.classList.add("horizontal")),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},englishDate:function(){if($L.moment&&this.data){var t=this.getCrctFormat(),e=this.data.ltPropCurrentDate,a="";e&&(a=$L.moment(e,t,{i18n:!0}).format(t)),this.setData("ltPropConvertedDate",a)}},englishTime:function(){if($L.moment&&this.data){var t=this.data.ltPropDefaultTime;if(12==this.data.ltPropTimeFormat){var e="hh:mm A";t=$L.moment(t,e,{i18n:!0}).format(e)}this.setData("ltPropConvertedTime",t)}},didConnect:function(){var t=this.data.ltPropType;if("date"!=t&&"datetime"!=t||(_lyteUiUtils.input=_lyteUiUtils.input||{},this.$node._random="LyteInput"+Date.now(),_lyteUiUtils.input[this.$node._random]=this.$node,this.englishDate()),"time"==t||"datetime"==t){if(this.getData("ltPropDropdown")){var e=this.dropdown=this.$node.querySelector("lyte-dropdown");this.dropbox=e.component.childComp?e.component.childComp:e.querySelector("lyte-drop-box"),e.element=this.$node.querySelectorAll("input")["datetime"==t?1:0],this.data.ltPropDropdownShow&&e.resetPosition()}this.englishTime()}if("time"==t||"date"==t||"datetime"==t){if(this.getData("ltPropWheel")){var a=this.handleWheel.bind(this);this.setData("eventListeners.timeWheel",a),this.$node.addEventListener("wheel",a)}this._manualset=!0,"time"==t?this.setData("ltPropValue",this.data.ltPropDefaultTime):"date"==t&&this.setData("ltPropValue",this.data.ltPropCurrentDate),delete this._manualset}t="textarea"==t?"textarea":"input",["focus","blur","click","select"].forEach(function(e){this.$node[e]=function(a){this.$node.querySelector(t)[e](a)}.bind(this)}.bind(this)),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL(),this._dir&&$L.fastdom.mutate(function(){this.$node.classList.add("lyteRTL"),this.$node.calendarDiv&&this.$node.calendarDiv.classList.add("lyteRTL")}.bind(this))}.bind(this))},didDestroy:function(t){!t&&this.$node.calendarComp&&(this.$node.calendarComp.remove(),delete this.$node.calendarComp,delete this.$node.calendarDiv,delete this._assCalendar,delete this.$node.revertToSelected);var e=this.getData("eventListeners");this.getData("ltPropType");delete(_lyteUiUtils.input||{})[this.$node._random],delete this.dropdown,delete this.dropbox,e.hasOwnProperty("mouseup")&&document.removeEventListener("mouseup",e.mouseup)},rtlfunc:function(t,e,a){if(this._dir){if(e)return"left"==t?a-e.right:"clientX"==t?a-e.clientX:"offsetLeft"==t?a-e.width-e.offsetLeft:a-e.left;if("left"==t)return"right"}return e?e[t]:"left"},calenderClickHide:function(t){if(this.data.ltPropBindToBody){var e=this.$node.calendarDiv,a=t.target.correspondingElement||t.target;if(document.contains(a)||(a=window.document.documentElement),!e.classList.contains("lyteCalendarHidden")){if(a&&-1!=["LYTE-DROP-BOX","LYTE-DROP-ITEM","LYTE-DROP-BODY"].indexOf(a.tagName)){for(;"LYTE-DROP-BOX"!=a.tagName&&"BODY"!=a.tagName;)a=a.parentNode;"LYTE-DROP-BOX"==a.tagName&&(a=a.origindd)}var o=this.data.ltPropAria?$L(a).hasClass("lyteInputCalendarIcon"):this.$node.contains(a),l=e.contains(a);o||l?a&&/*!tgt.classList.contains( 'lyteCalDateSpan' ) && !tgt.classList.contains( 'lyteCalCdate' ) &&*/e.contains(a)&&!this.data.ltPropAria&&window.requestAnimationFrame(function(){var t=this.$node;this._byManual=!0,t&&t.focus(),delete this._byManual}.bind(this)):this._hideCalendar()}}},scrollFunc:function(t){if(!t||"resize"!=t.type||!_lyteUiUtils.isMobile){var e=this.$node.calendarDiv;$L.fastdom.mutate(function(){t&&"orientationchange"==t.type?setTimeout(this.setCss.bind(this),500):this.setCss(),$L.fastdom.measure(function(){var a=this.data.ltPropBoundary,o=this.$node.getBoundingClientRect(),l=window.innerWidth;e&&t&&"scroll"==t.type&&!e.classList.contains("lyteCalendarHidden")?(a.hasOwnProperty("left")&&this.rtlfunc.call(this,"left",o,l)<a.left||a.hasOwnProperty("right")&&this.rtlfunc.call(this,"right",o,l)>a.right||a.hasOwnProperty("top")&&o.top<a.top||a.hasOwnProperty("bottom")&&o.bottom>a.bottom)&&this._hideCalendar(!0):this._closedbyscrl&&(null==a.left||this.rtlfunc.call(this,"left",o,l)>=a.left)&&(null==a.right||this.rtlfunc.call(this,"right",o,l)<=a.right)&&(null==a.top||o.top>=a.top)&&(null==a.bottom||o.bottom<=a.bottom)&&(this._byManual=!0,this.$node.focus(),delete this._byManual,this.showCalendar({},this.$node.querySelector("input")),delete this._closedbyscrl)}.bind(this))}.bind(this))}},textareaFuncObs:function(){var t=this.data;if("textarea"==t.ltPropType){var e=t.ltPropTextAreaResize,a=e.horizontal,o=e.vertical,l=a||o,i="lyteTextareaResize";this.setData("resize",l),l||$L(this.$node).addClass("lyteTextareaNoResize"),a&&!o?i+=" lyteTextareaResizeHorizontal":o&&!a&&(i+=" lyteTextareaResizeVertical"),this.setData("resizeClass",i)}}.observes("ltPropTextAreaResize","ltPropTextAreaResize.{}").on("didConnect"),btobody:function(t){t.newValue||delete this.$node.revertToToday}.observes("ltPropBindToBody"),disAbs:function(){this.$node.classList[this.data.ltPropDisabled?"add":"remove"]("lyteInputDisabled")}.observes("ltPropDisabled").on("didConnect"),readAbs:function(){this.$node.classList[this.data.ltPropReadonly?"add":"remove"]("lyteInputReadonly")}.observes("ltPropReadonly").on("didConnect"),rsizefun:function(t){var e=t.touches,a=t,o="onResizeStart",l=this,i=l.data,n=l.$node;if(!(e&&e.length>1||(e&&(a=e[0]),l.getMethods(o)&&0==l.executeMethod(o,t,n)))){var r="getElementsByTagName",s=n[r]("textarea")[0],d=i.ltPropTextAreaResize||{},c=document,p="addEventListener",u=n[r]("label")[0],h="getBoundingClientRect",m=u?u[h]():{},f=s[h](),y=n[h](),v=getComputedStyle(s),g=(parseFloat(v.paddingLeft),function(t,e){var a=v[t];return/%$/.test(a)?y[e]*parseFloat(a)/100:parseFloat(a)}),b={},P={},D={},C={};return d.horizontal&&(l.__minwidth=g("minWidth","width"),l.__maxwidth=g("maxWidth","width"),b.width=y.width,P.width=f.width,D.width=D.minWidth=m.width,C.width=C.minWidth="auto"),d.vertical&&(l.__minheight=g("minHeight","height"),l.__maxheight=g("maxHeight","height"),b.height=y.height,P.height=f.height,D.height=m.height,C.height="auto"),l.__clientX=a.clientX,l.__clientY=a.clientY,c[p](e?"touchmove":"mousemove",l.__rmove=l.textareaResize.bind(l),!0),c[p](e?"touchend":"mouseup",l.__rend=l.mouseup.bind(l),!0),$L(n).addClass("resizeStart").css(b),$L(s).css(P).parent().css(C),$L(u).css(D),t.preventDefault(),!1}},mouseup:function(t){var e=document,a="removeEventListener",o="touchend"==t.type,l="onResizeEnd",i=this,n=i.$node;$L(n).removeClass("resizeStart"),e[a](o?"touchmove":"mousemove",i.__rmove,!0),e[a](o?"touchend":"mouseup",i.__rend,!0),i.getMethods(l)&&i.executeMethod(l,t,i._resize_move,n),["__minwidth","__minheight","__maxheight","__maxwidth","__clientY","__clientX","_resize_move","__remove","__rend"].forEach((function(t){delete i[t]}))},textareaResize:function(t){var e=this,a=e.data,o=t.touches,l=t;if(!(o&&o.length>1)){o&&(l=o[0],t.preventDefault()),e._resize_move=!0;var i=-(e.__clientX-(e.__clientX=l.clientX))*(this._dir?-1:1),n=-(e.__clientY-(e.__clientY=l.clientY)),r={},s={},d={},c=a.ltPropTextAreaResize||{},p=e.$node.getElementsByTagName("textarea")[0],u=e.$node,h=function(t,e,a,o){var l=parseFloat(p.style[t]),i=l+o;isNaN(e)||e>i&&(i=l+(o=e-l)),isNaN(a)||a<i&&(o=a-l),r[t]=l+o,s[t]=parseFloat(u.style[t])+o};c.horizontal&&(h("width",e.__minwidth,e.__maxwidth,i),d.ltPropWidth=s.width+"px"),c.vertical&&(h("height",e.__minheight,e.__maxheight,n),d.ltPropHeight=r.height+"px"),$L(u).css(s),$L(p).css(r),e._prevent=!0,e.setData(d),delete e._prevent}},heightFuncObs:function(t){this.heightFunc()}.observes("ltPropHeight").on("didConnect"),heightFunc:function(){this._prevent||$L("input,textarea",this.$node).eq(0).css("height",this.getData("ltPropHeight"))},widthfunObs:function(){this.widthfun()}.observes("ltPropWidth").on("didConnect"),widthfun:function(){this._prevent||(this.$node.style.width=this.getData("ltPropWidth"))},appearanceFunObs:function(){this.appearanceFun()}.observes("ltPropAppearance").on("didConnect"),appearanceFun:function(){var t=this.data.ltPropType,e=$L(this.$node);"box"==this.getData("ltPropAppearance")?("search"==t&&e.find(".lyteField").addClass("lyteInputBoxSearch"),e.addClass("lyteInputBox").removeClass("lyteInput")):("search"==t&&e.find(".lyteField").removeClass("lyteInputBoxSearch"),e.addClass("lyteInput").removeClass("lyteInputBox"))},directionfunObs:function(){this.directionfun()}.observes("ltPropDirection").on("didConnect"),directionfun:function(){var t=$L(this.$node);"vertical"==this.data.ltPropDirection?t.addClass("vertical").removeClass("horizontal"):t.removeClass("vertical").addClass("horizontal")},data:function(){var t,e=_lyteUiUtils.getDefault("lyte-input"),a="boolean",o="string",l="number",i="object",n="array";return{ltPropDisabled:Lyte.attr(a,{default:!1}),ltPropAutofocus:Lyte.attr(a,{default:!1}),ltPropAutocomplete:Lyte.attr(o,{default:e.autocomplete||"off"}),ltPropMaxlength:Lyte.attr(l,{default:e.maxlength}),ltPropName:Lyte.attr(o,{default:""}),ltPropPlaceholder:Lyte.attr(o,{default:""}),ltPropReadonly:Lyte.attr(a,{default:!1}),ltPropValue:Lyte.attr(o,{default:""}),ltPropWidth:Lyte.attr(o,{default:e.width||""}),ltPropTabIndex:Lyte.attr(o,{default:e.tabIndex||"0"}),ltPropType:Lyte.attr(o,{default:""}),ltPropAppearance:Lyte.attr(o,{default:e.appearance||""}),ltPropDirection:Lyte.attr(o,{default:e.direction||"vertical"}),ltPropLabel:Lyte.attr(o,{default:""}),ltPropId:Lyte.attr(o,{default:""}),ltPropClass:Lyte.attr(o,{default:e.class||""}),ltPropStyle:Lyte.attr(o,{default:e.style||""}),ltPropWrapperStyle:Lyte.attr(o,{default:e.wrapperStyle||""}),ltPropHeight:Lyte.attr(o,{default:e.height||""}),ltPropPattern:Lyte.attr(o,{default:e.pattern||".+"}),ltPropInputTitle:Lyte.attr(o,{default:""}),ltPropRows:Lyte.attr(l,{default:void 0}),ltPropCols:Lyte.attr(l,{default:void 0}),ltPropTextAreaResize:Lyte.attr(i,{default:e.textAreaResize||{vertical:!0,horizontal:!0}}),ltPropMax:Lyte.attr(l,{default:void 0}),ltPropMin:Lyte.attr(l,{default:void 0}),ltPropStep:Lyte.attr(l,{default:e.step||1}),ltPropTimeFormat:Lyte.attr(l,{default:e.timeFormat||12}),ltPropHourInterval:Lyte.attr(l,{default:e.hourInterval||1}),ltPropDefaultTime:Lyte.attr(o,{default:""}),ltPropMinuteInterval:Lyte.attr(l,{default:e.minuteInterval||30}),ltPropDropdown:Lyte.attr(a,{default:e.dropdown||!1}),ltPropShowInterval:Lyte.attr(a,{default:e.showInterval||!1}),ltPropStartTime:Lyte.attr(o,{default:e.startTime||""}),ltPropEndTime:Lyte.attr(o,{default:e.endTime||""}),ltPropConvertToNearest:Lyte.attr(a,{default:e.convertToNearest||!1}),ltPropValidateOnBlur:Lyte.attr(a,{default:e.validateOnBlur||!1}),ltPropFillRows:Lyte.attr(a,{default:null==(t=e.fillRows)||e}),ltPropNumberOfRows:Lyte.attr(l,{default:e.numberOfRows||6}),ltPropMinDate:Lyte.attr(o,{default:""}),ltPropMaxDate:Lyte.attr(o,{default:""}),ltPropStartWeekDay:Lyte.attr(l,{default:e.startWeekDay||1}),ltPropMonthHeaderFormat:Lyte.attr(o,{default:e.monthHeaderFormat||"MMMM YYYY"}),daysOfWeek:Lyte.attr(n,{default:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}),ltPropYear:Lyte.attr(a,{default:null==(t=e.year)||t}),ltPropFormat:Lyte.attr(o,{default:e.format||"MM/DD/YYYY"}),viewDate:Lyte.attr(i,{default:{}}),ltPropStartDate:Lyte.attr(o,{default:""}),ltPropEndDate:Lyte.attr(o,{default:""}),ltPropCurrentDate:Lyte.attr(o,{default:""}),ltPropBindToBody:Lyte.attr(a,{default:null==(t=e.bindToBody)||t}),ltPropCalendarClass:Lyte.attr(o,{default:e.calendarClass||""}),ltPropHeaderType:Lyte.attr(o,{default:e.headerType||"default"}),ltPropDropdownDisabled:Lyte.attr(a,{default:!1}),ltPropDropdownShow:Lyte.attr(a,{default:!1}),ltPropDropdownCallout:Lyte.attr(a,{default:!1}),ltPropDropdownFreeze:Lyte.attr(a,{default:null!=(t=e.dropdownFreeze)&&t}),ltPropDropdownId:Lyte.attr(o,{default:""}),ltPropDropdownClass:Lyte.attr(o,{default:e.dropdownClass||""}),ltPropPosition:Lyte.attr(o,{default:e.position||"down"}),ltPropBoundary:Lyte.attr(i,{default:e.boundary||{}}),ltPropWheel:Lyte.attr(a,{default:e.wheel||!1}),ltPropYield:Lyte.attr(a,{default:e.yield||!1}),ltPropAnimate:Lyte.attr(a,{default:e.animate||!1}),ltPropPreventSelection:Lyte.attr(a,{default:e.preventSelection||!1}),ltPropPreventKeys:Lyte.attr(a,{default:e.preventKeys||!1}),ltPropUpdateDelay:Lyte.attr(l,{default:e.hasOwnProperty("updateDelay")?e.updateDelay:250}),ltPropAutoUpdate:Lyte.attr(a,{default:null==(t=e.autoUpdate)||t}),ltPropCallbackDelay:Lyte.attr(l,{default:e.hasOwnProperty("callbackDelay")?e.callbackDelay:0}),ltPropCloseIcon:Lyte.attr(a,{default:e.closeIcon||!1}),ltPropTimePlaceholder:Lyte.attr("string",{default:""}),ltPropCommonPlaceholder:Lyte.attr("string",{default:""}),ltPropTimeClass:Lyte.attr(o,{default:e.timeClass||""}),ltPropAria:Lyte.attr(a,{default:e.aria||!1}),ltPropAriaAttributes:Lyte.attr(i,{default:e.ariaAttributes||{},watch:!0}),ltPropTimeAriaAttributes:Lyte.attr(i,{default:e.timeAriaAttributes||{},watch:!0}),ltPropFocus:Lyte.attr(a,{default:!1}),ltPropCalendarProperties:Lyte.attr(i,{default:e.calendarProperties||{disableNavigation:!0}}),ltPropDropdownProperties:Lyte.attr(i,{default:e.dropdownProperties||{}}),ltPropScope:Lyte.attr(o,{default:e.scope||""}),ltPropHeaderYield:Lyte.attr(a,{default:e.headerYield||!1}),ltPropConvertedDate:Lyte.attr(o,{default:""}),ltPropConvertedTime:Lyte.attr(o,{default:""}),ltPropPreventDropdownNavigation:Lyte.attr(a,{default:e.preventDropdownNavigation||!1}),ltPropInputWrapperClass:Lyte.attr(o,{default:e.inputWrapperClass||""}),ltPropWrapperClass:Lyte.attr(o,{default:e.wrapperClass||""}),ltPropTimezoneHandling:Lyte.attr(a,{default:e.timezoneHandling||!1}),ltPropFocusAtEnd:Lyte.attr(a,{default:!1}),ltPropPasswordIcon:Lyte.attr(a,{default:!1}),ltPropPasswordVisibility:Lyte.attr(a,{default:!1}),ltPropPasswordTooltip:Lyte.attr(i,{default:{show:"Show password",hide:"Hide password"}}),ltPropTooltipConfig:Lyte.attr(o,{default:'{"position" : "bottom"}'}),ltPropAriaLabel:Lyte.attr(i,{default:{modal:"Choose date",button:"Change date"}}),ltPropDataTabindex:Lyte.attr(o,{default:"0"}),ltPropLabelClass:Lyte.attr(o,{default:""}),ltPropDisabledTimeTooltip:Lyte.attr(o,{default:""}),ltPropIso:Lyte.attr("string"),eventListeners:Lyte.attr(i,{default:{}}),selectedField:Lyte.attr(i,{default:{}}),endMinute:Lyte.attr(l),startMinute:Lyte.attr(l),dropdownData:Lyte.attr(n,{default:[]}),originalData:Lyte.attr(n,{default:[]}),dateRange:Lyte.attr(i,{default:{day:[],month:[],year:[]}}),meridian:Lyte.attr(i,{default:{AM:_lyteUiUtils?_lyteUiUtils.i18n("AM"):"AM",PM:_lyteUiUtils?_lyteUiUtils.i18n("PM"):"PM"}}),hour:Lyte.attr(o,{default:_lyteUiUtils.i18n("hour")}),min:Lyte.attr(o,{default:_lyteUiUtils.i18n("min")}),selectedDateField:Lyte.attr(o,{default:""}),preventObs:Lyte.attr(a,{default:!0}),resize:Lyte.attr(a,{default:!0}),resizeClass:Lyte.attr(o,{default:"lyteTextareaResize"}),pos:Lyte.attr(o,{default:""}),isSearch:Lyte.attr(a,{default:!1}),isBox:Lyte.attr(o,{default:""}),dateOrder:Lyte.attr(n,{default:[]}),showPlaceholder:Lyte.attr(a,{default:!1}),lyteUnbound:Lyte.attr(a,{default:!1}),randomId:Lyte.attr(o,{default:""}),navigation:Lyte.attr(a,{default:!1}),passwordClass:Lyte.attr(o,{default:"lyteInputShowPasswordIcon"}),passwordTooltip:Lyte.attr(o,{default:""}),isExpanded:Lyte.attr(o,{default:"false"})}},input_wrap_obs:function(t){var e=(t||{oldValue:""}).oldValue,a=this.data.ltPropInputWrapperClass,o=$L(this.$node);o.removeClass(e).addClass(a),!t&&this.data.ltPropAria&&/date/i.test(this.data.ltPropType)&&o.addClass("lyteInputWithCalendarIcon")}.observes("ltPropInputWrapperClass").on("didConnect"),focusObs:function(){var t=this.data,e=this.$node;if(t.ltPropFocus&&(e.focus(),t.ltPropFocusAtEnd)){var a=e.getElementsByTagName("textarea"==t.ltPropType?"textarea":"input")[0];a&&window.requestAnimationFrame((function(){a.selectionStart=a.value.length}))}e.ltProp("focus",!1)}.observes("ltPropFocus").on("didConnect"),boxObs:function(t){var e=this.data.ltPropType,a=this.data.ltPropAppearance;"search"==e&&"box"==a?this.setData("isBox","lyteInputBoxSearch"):this.setData("isBox",""),t&&"ltPropType"==t.item&&(this.didDestroy(!0),this.init(!0),this.didConnect(!0))}.observes("ltPropType","ltPropAppearance").on("init"),getDateFromFormat:function(t,e){return this.data.ltPropCalendarProperties.i18n?$L.moment(t).i18N(e):this._assCalendar.component.getDateFromFormat(t,e)},dateValidation:function(t){if(!this._assCalendar)return!1;var e=this._assCalendar.component.isoToDate(t);return"Invalid Date"!=e&&e},dateRegexFind:function(t){var e=this.getCrctFormat(),a=this.getData("dateRange"),o=[],l=/D+/gi.exec(e),i=/M+/gi.exec(e),n=/Y+/gi.exec(e);l&&(a.day[0]=l.index,a.day[1]=l.index+l[0].length,o.push({value:a.day[0],name:"day",format:e.match(/D+/gi)[0]})),i&&(a.month[0]=i.index,a.month[1]=i.index+i[0].length,o.push({value:a.month[0],name:"month",format:e.match(/M+/gi)[0]})),n&&(a.year[0]=n.index,a.year[1]=n.index+n[0].length,o.push({value:a.year[0],name:"year",format:e.match(/Y+/gi)[0]})),o.sort((function(t,e){return t.value-e.value})),this.setData("dateOrder",o)},dateRegexObs:function(t){this.dateRegexFind(t)}.observes("ltPropFormat"),constructingArr:function(t,e,a){t<e&&(t+=1440);var o=(t-e)/60,l={};return l.time=this.convertToRailway(t,!0,a).trim(),l.interval=o<1?t-e+" "+this.getData("min"):(o%1==0?o:o.toFixed(1))+" "+this.getData("hour"),l},dropdownConstruct:function(){if(!this._prevent){var t,e=this.getData("startMinute"),a=[],o=this.getData("endMinute"),l=(this.getData("ltPropHourInterval"),this.getData("ltPropMinuteInterval")),i=this.getData("ltPropTimeFormat"),n=[],r=(this.data.ltPropDropdownProperties||{}).disabledList||[],s=this.data.ltPropDisabledTimeTooltip;for(e>=o&&(o+=1440),t=e;t<=o;t+=l){var d=this.constructingArr(t,e,i),c=d.time;-1==n.indexOf(c)&&(a.push(d),n.push(c)),r.indexOf(c)+1?(d.title=s,d.customTooltip="true"):d.title=d.customTooltip=!1}this.data.ltPropTimezoneHandling&&this.check_dst(a),this.setData("originalData",a),this.data.ltPropDropdownShow&&this.setData("dropdownData",a)}},constructNewDrop:function(t,e){var a=[],o=this.getData("startMinute");if(12==e){var l=this.convertToRailway(t.value.trim());0!=this.maxValCheck(l)&&a.push(this.constructingArr(l,o,12)),l+=720,0!=this.maxValCheck(l%1440)&&a.push(this.constructingArr(l,o,12))}else{l=this.convertToRailway(t.value.trim());0!=this.maxValCheck(l)&&a.push(this.constructingArr(l,o,24))}this.dropdown.ltProp("selected",""),0==a.length&&this.data.ltPropValidateOnBlur&&(this.data.ltPropStartTime&&a.push({time:this.data.ltPropStartTime,interval:""}),this.data.ltPropEndTime&&a.push({time:this.data.ltPropEndTime,interval:""})),this.setData("dropdownData",a),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime)},getCorrectTime:function(t){if($L.moment){var e=$L.moment();return 12==t?e.i18N("hh:mm A"):e.format("HH:mm")}var a=new Date,o=a.getHours(),l=a.getMinutes().toString(),i=this.getData("meridian"),n=o>11?i.PM:i.AM;return 1==l.length&&(l="0"+l),12==t?(12!=o&&1==(o=(o%12).toString()).length&&(o="0"+o),o+":"+l+" "+n):(o<10&&(o="0"+o),o+":"+l)},timeFormatChange:function(){this.timeInValChange()}.observes("ltPropTimeFormat"),handleWheel:function(t){var e=t.target,a=this.getData("ltPropType");if(!("INPUT"!=e.tagName||Math.abs(t.deltaY)<=Math.abs(t.deltaX))){if("time"==a||"datetime"==a&&"time"==e.id){if(this._emptytimeValue)return;$L.fastdom.mutate(function(){var a=this.getData("selectedField");(!a.prop||e.selectionStart>3)&&(e.selectionStart=0,e.selectionEnd=2,this.setData("selectedField",{prop:"hour",val:0}),a={prop:"hour",val:0}),t.deltaY<-10?this.timeDecrease.call(this,e,{},a.prop,e.selectionStart,e.selectionEnd):t.deltaY>10&&this.timeIncrease.call(this,e,{},a.prop,e.selectionStart,e.selectionEnd)}.bind(this))}else("date"==a||"datetime"==a&&"date"==e.id)&&(t.deltaY<-10?(t.keyCode=40,this.calendarKeydown.call(this,t,e)):t.deltaY>10&&(t.keyCode=38,this.calendarKeydown.call(this,t,e)));t.preventDefault()}},wheelObs:function(t){t.newValue?this.$node.addEventListener("wheel",this.getData("eventListeners.timeWheel")):this.$node.removeEventListener("wheel",this.getData("eventListeners.timeWheel"))}.observes("ltPropWheel"),convertToRailway:function(t,e,a){var o=this.getData("meridian");if(e){i=parseInt(t/60)%24;(n=t%60)<10&&(n="0"+n);l="";return 12==a&&(1==parseInt(i/12)?(i>12&&(i%=12),l=o.PM):(l=o.AM,i=i||12)),i<10&&(i="0"+i),i+":"+n+" "+l}var l,i=parseInt(t.slice(0,2)),n=parseInt(t.slice(3,5));return 5!=t.length?60*((l=t.slice(6,t.length))==o.PM?i%12+12:i%12)+n:60*i+n},maxValCheck:function(t){var e,a=this.getData("endMinute"),o=this.getData("startMinute");if(e="string"==typeof t?this.convertToRailway(t):t,o<a){if(e<=a&&e>=o)return!0}else if(e<1440&&e>=o||e>=0&&e<=a)return!0;return!1},timeInValChange:function(t){var e,a=this.getData("ltPropTimeFormat"),o=this.data.ltPropValue,l=this.data.ltPropType;if(t)e=t.newValue;else if(e=this.getData("ltPropDefaultTime"),(null==o||"datetime"==l)&&!e&&$L.moment&&("time"==l?this.data.ltPropPlaceholder:this.data.ltPropTimePlaceholder||this.data.ltPropCommonPlaceholder))return this._emptytimeValue=!0,void("datetime"==l&&this.checkCommonPlaceHolder());if(!e){var i=this.getData("ltPropStartTime");e=i||this.getCorrectTime(a)}this.setData("ltPropDefaultTime",e.slice(0,12!=a?5:e.length))},checkCommonPlaceHolder:function(){(this.data||{}).ltPropCommonPlaceholder&&this.setData("showPlaceholder",!(this.data.ltPropCurrentDate||this.data.ltPropDefaultTime))},startEndTimeObs:function(t){if(!t||"ltPropStartTime"==t.item){var e=this._emptytimeValue?this.getCorrectTime(this.data.ltPropTimeFormat):this.getData("ltPropDefaultTime"),a=this.getData("ltPropStartTime");a||(this.setData("ltPropStartTime",e),a=e),this.setData("startMinute",this.convertToRailway(a))}if(!t||"ltPropEndTime"==t.item){var o=this.getData("ltPropEndTime");if(!o){var l=Math.max(0,parseInt(a.slice(3,5))-1).toString();1==l.length&&(l="0"+l),o=(a.slice(0,3)+l+" "+a.slice(6,a.length)).trim(),this.setData("ltPropEndTime",o)}this.setData("endMinute",this.convertToRailway(o))}this.data.ltPropDropdown&&this.dropdownConstruct()},timeBoundObs:function(t){if("ltPropDefaultTime"==t.item&&"datetime"==this.data.ltPropType&&this.update_iso(),!t||""!=t.newValue||null!=t.oldValue)if(!t||t&&"ltPropDefaultTime"!=t.item)this.startEndTimeObs(t);else{if(t&&!t.newValue)return void this.timeInValChange();this.setData("preventObs")&&this.setData("ltPropValue",t.newValue),this.englishTime(),this.getMethods("onTimeChange")&&this.executeMethod("onTimeChange",t,this.$node),this._manualset=!0,"time"==this.data.ltPropType?this.setData("ltPropValue",t.newValue):this.checkCommonPlaceHolder(),delete this._manualset}}.observes("ltPropStartTime","ltPropEndTime","ltPropDefaultTime"),dateChangeCallback:function(t){var e=this.data.ltPropType;if("datetime"==e&&this.update_iso(),this.data.ltPropTimezoneHandling){this.check_dst(this.data.originalData);var a=this.data.ltPropDefaultTime;if(a&&this.setData("ltPropDefaultTime",this.check_dst(a,1,1)),"time"==e)return}var o=this.data.ltPropCallbackDelay;this._manualset=!0,e&&this.setData("ltPropValue",t.newValue),delete this._manualset,null==o?this.dateCallback(t):(clearTimeout(this.__datachange),this.__datachange=setTimeout(this.dateCallback.bind(this),o,t)),this.checkCommonPlaceHolder()}.observes("ltPropCurrentDate"),dateCallback:function(t){""==t.newValue&&null==t.oldValue||(this.englishDate(),this.getMethods("onDateChange")&&this.executeMethod("onDateChange",t,this.$node,this._selected),this.checkCommonPlaceHolder(),delete this._selected)},timeCallback:function(t){""==t.newValue&&null==t.oldValue||this.getMethods("onValueChange")&&this.executeMethod("onValueChange",t,this.$node)},valChangeObs:function(t){var e=this.data.ltPropCallbackDelay;if(!this._manualset){var a=this.data.ltPropType;"date"==a?this.setData("ltPropCurrentDate",t.newValue):"time"==a&&this.setData("ltPropDefaultTime",t.newValue)}null==e?this.timeCallback(t):(clearTimeout(this.__valuechange),this.__valuechange=setTimeout(this.timeCallback.bind(this),e,t))}.observes("ltPropValue"),firePosCallBack:function(){var t=this.$node.calendarDiv,e=this.data.pos;$L(t).removeClass("lyteInputCalendarUp lyteInputCalendarDown").addClass("lyteInputCalendar"+(/up/i.test(e)?"Up":"Down")),this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",e,t)}.observes("pos"),setLeftExceedForDown:function(t,e,a,o,l,i){var n=a;return l+this.rtlfunc.call(this,"left",n,i)+n.width-o.width},setLeftNotExceedForDown:function(t,e,a,o){var l=e;return a+this.rtlfunc.call(this,"left",l,o)},setTopAboveForDown:function(t,e,a,o,l){return l+a.top-o.height},setTopBelowForDown:function(t,e,a){var o=e;return a+o.top+o.height},setLeftForRight:function(t,e,a,o){var l=e;return a+this.rtlfunc.call(this,"left",l,o)+l.width},setRightForRight:function(t,e,a,o,l,i){var n=a,r=o;return l+this.rtlfunc.call(this,"left",n,i)-r.width},setTopForRight:function(t,e,a){return a+e.top},setTopForRightAbove:function(t,e,a,o,l){var i=a;return l+i.top+i.height-o.height},setCss:function(){var t=this.$node.calendarDiv;if(t&&!t.classList.contains("lyteCalendarHidden")){var e,a,o,l,i,n=t,r=this.$node.querySelector("input").parentElement,s=0,d=0,c=window.innerWidth,p=window.innerHeight,u=c,h=n.getBoundingClientRect(),m=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),f=window.pageYOffset||document.documentElement.scrollTop,y=n.offsetHeight,v=n.offsetWidth,g=this.getData("ltPropPosition"),b=r.getBoundingClientRect(),P=this.data.ltPropScope,D=P?$L(this.$node).closest(P).get(0):void 0,C=D?D.getBoundingClientRect():void 0;C&&(s=Math.max(s,C.left),d=Math.max(d,C.top),c=Math.min(c,C.right),p=Math.min(p,C.bottom));var _,L,x=this.rtlfunc.call(this,"left",b,u),w=this.rtlfunc.call(this,"left");"down"===g?(e=!0,(_=b.top+b.height)+y>p&&(e=p-b.top>b.bottom-d),a=!0,(L=x)+v>c&&L>L+b.width-n.offsetWidth&&(a=!1),e?(this.setData("pos","down"),n.style.top=this.setTopBelowForDown(r,b,f)+"px"):(this.setData("pos","up"),n.style.top=this.setTopAboveForDown(r,n,b,h,f,u)+"px"),a?(n.style.top=n.style.top,n.style[w]=this.setLeftNotExceedForDown(r,b,m,u)+"px"):(n.style.top=n.style.top,n.style[w]=this.setLeftExceedForDown(r,n,b,h,m,u)+"px")):"right"===g?(a=!0,x+b.width+v>c&&x-h.width>s&&(a=!1),e=!0,b.top+h.height>p&&(e=p-b.top>b.bottom-d),a?(this.setData("pos","right"),n.style[w]=this.setLeftForRight(r,b,m,u)+"px"):(this.setData("pos","left"),n.style[w]=this.setRightForRight(r,n,b,h,m,u)+"px"),e?(n.style[w]=n.style[w],n.style.top=this.setTopForRight(r,b,f)+"px"):(n.style[w]=n.style[w],n.style.top=this.setTopForRightAbove(r,n,b,h,f)+"px")):"up"===g?(o=!0,b.top-h.height<d&&(o=p-b.top<b.bottom-d),a=!0,x+v>c&&x>x+b.width-n.offsetWidth&&(a=!1),o?(this.setData("pos","up"),n.style.top=this.setTopAboveForDown(r,n,b,h,f)+"px"):(this.setData("pos","down"),n.style.top=this.setTopBelowForDown(r,b,f)+"px"),a?(n.style.top=n.style.top,n.style[w]=this.setLeftNotExceedForDown(r,b,m,u)+"px"):(n.style.top=n.style.top,n.style[w]=this.setLeftExceedForDown(r,n,b,h,m,u)+"px")):"left"===g?(l=!0,x-h.width<s&&x+h.width<c&&(l=!1),e=!0,b.top+h.height>p&&(e=p-b.top>b.bottom-d),l?(this.setData("pos","left"),n.style[w]=this.setRightForRight(r,n,b,h,m,u)+"px"):(this.setData("pos","right"),n.style[w]=this.setLeftForRight(r,b,m,u)+"px"),e?(n.style[w]=n.style[w],n.style.top=this.setTopForRight(r,b,f)+"px"):(n.style[w]=n.style[w],n.style.top=this.setTopForRightAbove(r,n,b,h,f)+"px")):"downLeft"===g?(e=!0,(_=b.top+b.height)+y>p&&(e=p-b.top>b.bottom-d),e||(_=b.top-y),a=!1,(L=x+b.width/2-v)<s&&(L=s,a=!0),n.style.top=_+f+"px",n.style[w]=L+m+"px",i=e?"downLeft":"upLeft",this.setData("pos",i)):"downRight"===g?(e=!0,(_=b.top+b.height)+y>p&&(e=p-b.top>b.bottom-d),e||(_=b.top-y),a=!0,(L=x+b.width/2)+v>c&&(L=c-v,a=!1),n.style.top=_+f+"px",n.style[w]=L+m+"px",i=e?"downRight":"upRight",this.setData("pos",i)):"upLeft"===g?(e=!1,(_=b.top-y)<d&&(e=p-b.top>b.bottom-d),e&&(_=b.top+b.height),a=!1,(L=b[w]+b.width/2-v)<s&&(L=s,a=!0),n.style.top=_+f+"px",n.style[w]=L+m+"px",i=e?"downLeft":"upLeft",this.setData("pos",i)):"upRight"===g&&(e=!1,(_=b.top-y)<d&&(e=p-b.top>b.bottom-d),e&&(_=b.top+b.height),a=!0,(L=x+b.width/2)+v>c&&(L=c-v,a=!1),n.style.top=_+f+"px",n.style[w]=L+m+"px",i=e?"downRight":"upRight",this.setData("pos",i))}},preventFn:function(){this.preventFocus=!0},methods:{wormholeAppend:function(t,e){var a=this.$node;a.calendarComp=t,t.nodeN=a,a.calendarDiv=t.querySelector("div#lyteCalendar"),this._assCalendar=a.calendarDiv.querySelector("lyte-calendar"),a.revertToToday=this._assCalendar.revertToToday,a.revertToSelected=this._assCalendar.revertToSelected;for(var o=this._assCalendar.querySelectorAll("lyte-dropdown"),l=0;l<o.length;l++){(o[l].component.childComp||o[l].querySelector("lyte-drop-box")).addEventListener("mousedown",this.preventFn.bind(this))}if(this.data.ltPropAria)try{$L(a.calendarDiv).trapFocus()}catch(t){}},"on-dateselected":function(){this._selected=!0,this._hideCalendar()},hide:function(){$L(this.$node).removeClass("lyteInputDropdownOpen"),this.getMethods("onHide")&&this.executeMethod("onHide",arguments[0],arguments[1],this.$node)},beforeHide:function(){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",arguments[0],arguments[1],this.$node)},show:function(){$L(this.$node).addClass("lyteInputDropdownOpen"),this.getMethods("onShow")&&this.executeMethod("onShow",arguments[0],arguments[1],this.$node)},beforeShow:function(){if(this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",arguments[0],arguments[1],this.$node)},optionSelected:function(){this._calmsfg=!0,delete this._emptytimeValue,this.setData("ltPropDefaultTime",arguments[1].trim()),$L("input",this.$node).get(-1).focus()},scroll:function(){this.getMethods("onScroll")&&this.executeMethod("onScroll",arguments[0],arguments[1])},positionChange:function(){this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",arguments[0],arguments[1])},calendarNavigate:function(t,e,a,o){$L.fastdom.measure(this.setCss.bind(this)),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",t,e,a,o)},viewDateChange:function(t,e){this.getMethods("onViewdateChange")&&this.executeMethod("onViewdateChange",t,e,this.$node)},viewChange:function(t,e,a){$L.fastdom.measure(this.setCss.bind(this)),this.getMethods("onViewChange")&&this.executeMethod("onViewChange",t,e,a,this.$node)}},valUpdate:function(){if(this.$node&&this){delete this._timeout;var t=this.data.ltPropType;if("date"==t||"datetime"==t){var e=this.$node.querySelector("input").value;this.setData("ltPropCurrentDate",e||"")}else if("textarea"==t){e=this.$node.querySelector("textarea").value;this.setData("ltPropValue",e||"")}else{e=this.$node.querySelector("input").value;this.setData("ltPropValue",e||"")}}},fixSelection:function(t,e,a){this.data.ltPropReadonly||(a.selectionStart=e.val+t,a.selectionEnd=a.selectionStart+2,this.timeClick.call(this,{},a,e.val+t))},replaceVal:function(t,e,a,o){var l;l="string"==typeof t?t:t.value;var i=new RegExp("("+l.slice(a,a+o)+")","i");return l.trim().replace(i,e)},retVal:function(t,e,a){return parseInt(t+e)>a?"0"+e:t+e},convertToPm:function(t,e,a){if(12==t){var o=e.slice(6,e.length),l=(e.slice(0,5),e.slice(0,2)),i=e.slice(3,5);return"00"==l&&"AM"==o||"12"==l&&"PM"==o?e:l+":"+i+" "+(a.AM==o?a.PM:a.AM)}return e},hourTimeSet:function(t,e,a,o,l){var i,n,r=t.value.trim(),s=this.getData("meridian"),d=_lyteUiUtils.getCorrectNumberCode(e.which||e.keyCode)-48,c=r.slice(o+1,l)+d,p=this.data.ltPropTimeFormat,u=this.data.ltPropValidateOnBlur;if("hour"==a?i=12==p?12:24:(delete this._lasttyped,i=60),60==i&&parseInt(c)>=60&&(c="0"+d),"hour"==a)n=this.getCrctHour(r,o,l,i,d,s),this._lasttyped=d+"";else if(n=r.slice(0,o)+c+r.slice(l,r.length),!u||u&&"keydown"!=e.type){var h=this.maxValCheck(n);if(0==h&&(n=r.slice(0,o)+this.retVal(r.slice(o,o+1),d,i)+r.slice(l,r.length),0==(h=this.maxValCheck(n))&&(n=r.slice(0,o)+"0"+d+r.slice(l,r.length),0==(h=this.maxValCheck(n))&&(n=this.convertToPm(i,n,s),0==(h=this.maxValCheck(n))))))return!1}this.data.ltPropTimezoneHandling&&(n=this.check_dst(n,1,1)),this.setData("ltPropDefaultTime",n),$L.fastdom.mutate((function(){t.selectionStart=o,t.selectionEnd=l}))},_getCrctHour:function(t,e,a){return 0==this.maxValCheck(t)?12==e&&(t=this.convertToPm(e,t,a),0!=this.maxValCheck(t)&&t):t},getCrctHour:function(t,e,a,o,l,i){var n,r,s,d,c=this.data.ltPropValidateOnBlur;if(null!=this._lasttyped){if("00"==(r=this._lasttyped+l)&&12==o&&(d=!0,r="12"),24==o&&parseInt(r)>=24||12==o&&parseInt(r)>=13)s=!1;else{if(n=r+t.slice(a),c)return n;s=this._getCrctHour(n,o,i)}if(0!=s)return s;if(n){var p=this.data.endMinute,u=this.convertToRailway(n);if(u-p<60&&u-p>=0)return this.convertToRailway(p,!0,o).trim()}}if("00"==(r=t.slice(e+1,a)+l)&&12==o){if(!d)return t;r="12"}if(24==o&&parseInt(r)>=24||12==o&&parseInt(r)>=13)s=!1;else{if(n=r+t.slice(a),c)return n;s=this._getCrctHour(n,o,i)}if(0!=s)return s;if("00"==(r=t.slice(0,e+1)+l)&&12==o){if(!d)return t;r="12"}if(24==o&&parseInt(r)>=24||12==o&&parseInt(r)>=13)s=!1;else{if(n=r+t.slice(a),c)return n;s=this._getCrctHour(n,o,i)}if(0!=s)return s;if("00"==(r="0"+l)&&12==o){if(!d)return t;r="12"}if(n=r+t.slice(a),c)return n;if(0!=(s=this._getCrctHour(n,o,i)))return s;if("00"==(r=l+"0")&&12==o){if(!d)return t;r="12"}if(24==o&&parseInt(r)>=24||12==o&&parseInt(r)>=13)s=!1;else{if(n=r+t.slice(a),c)return n;s=this._getCrctHour(n,o,i)}return 0!=s?s:this.data.ltPropConvertToNearest?this.findNearestTime(t,e,a,o,l,i):t},findNearestTime:function(t,e,a,o,l,i){var n;if(null!=this._lasttyped){if(n=this._lasttyped+l,!(24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13))return this._findNearest(n+t.slice(a),o);!1}return n=t.slice(e+1,a)+l,24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13?(!1,n=t.slice(0,e+1)+l,24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13?(!1,n="0"+l,24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13?(!1,t):this._findNearest(n+t.slice(a),o)):this._findNearest(n+t.slice(a),o)):this._findNearest(n+t.slice(a),o)},_findNearest:function(t,e){var a=this.convertToRailway(t),o=this.data.endMinute,l=this.data.startMinute;return Math.abs(l-a)>Math.abs(o-a)?this.convertToRailway(o,!0,e).trim():this.convertToRailway(l,!0,e).trim()},timeIncrease:function(t,e,a,o,l,i){if(!this.data.ltPropReadonly){var n,r,s,d,c,p=t.value.trim(),u=parseInt(p.slice(o,l)),h=this.getData("ltPropTimeFormat"),m=this.getData("meridian");if("hour"==a?(n=12==h?12:24,r=i?1:this.data.ltPropHourInterval):(n=60,r=this.data.ltPropMinuteInterval),$L.moment&&$L.moment.lyteMoment.prototype.add){var f,y=12==h?"hh:mm A":"HH:mm";p=p.replace(m.AM,"AM").replace(m.PM,"PM"),(f=this.data.ltPropTimezoneHandling&&this.data.ltPropCurrentDate?this.check_dst(p,!0):$L.moment(p,y)).validate()?s=f.add(r,60==n?"minutes":"hours").format(y).replace("AM",m.AM).replace("PM",m.PM):c=!0}if(c){if(d=(u+r)%n,12==n&&d<u&&p.slice(6,p.length)==m.AM)0==d&&(d="12"),p=this.replaceVal.call(this,t,m.PM,6,p.length);else if(12==n&&d<u&&p.slice(6,p.length)==m.PM)12==u&&0!=d||(p=this.replaceVal.call(this,t,m.AM,6,p.length));else if(12==n&&d==u&&p.slice(6,p.length)==m.AM)d="12",p=this.replaceVal.call(this,t,m.PM,6,p.length);else if(60==n&&d<=u){if(0==this.timeIncrease.call(this,t,e,"hour",0,2,!0))return!1;p=t.value.trim()}1==(d=d.toString()).length&&(d="0"+d),s=p.slice(0,o)+d+p.slice(l,p.length)}if(0==this.maxValCheck(s))return!1;this.setData("ltPropDefaultTime",s),$L.fastdom.mutate((function(){t.selectionStart=o,t.selectionEnd=l}))}},timeDecrease:function(t,e,a,o,l,i){if(!this.data.ltPropReadonly){var n,r,s,d,c,p=t.value.trim(),u=parseInt(p.slice(o,l)),h=this.getData("ltPropTimeFormat"),m=this.getData("meridian");if("hour"==a?(n=12==h?12:24,r=i?1:this.getData("ltPropHourInterval")):(n=60,r=this.getData("ltPropMinuteInterval")),$L.moment&&$L.moment.lyteMoment.prototype.subtract){var f,y=12==h?"hh:mm A":"HH:mm";p=p.replace(m.AM,"AM").replace(m.PM,"PM"),(f=this.data.ltPropTimezoneHandling&&this.data.ltPropCurrentDate?this.check_dst(p,!0):$L.moment(p,y)).validate()?s=f.subtract(r,60==n?"minutes":"hours").format(y).replace("AM",m.AM).replace("PM",m.PM):c=!0}if(c){if(d=(u-r+n)%n,12==n&&d>u&&p.slice(6,p.length)==m.AM)p=this.replaceVal.call(this,t,m.PM,6,p.length);else if(12==n&&(d>u||12==u)&&p.slice(6,p.length)==m.PM)p=this.replaceVal.call(this,t,m.AM,6,p.length);else if(12==n&&0==d)p.slice(6,p.length)==m.PM&&(d="12");else if(60==n&&d>=u){if(0==this.timeDecrease.call(this,t,e,"hour",0,2,!0))return!1;p=t.value.trim()}1==(d=d.toString()).length&&(d="0"+d),s=p.slice(0,o)+d+p.slice(l,p.length)}if(0==this.maxValCheck(s))return!1;this.setData("ltPropDefaultTime",s),$L.fastdom.mutate((function(){t.selectionStart=o,t.selectionEnd=l}))}},findCalendarRange:function(t,e,a){var o=this.getData("ltPropIso");if(e.value&&0!=this.dateValidation(o)){var l,i=e.selectionStart,n=(e.selectionEnd,this.getData("dateRange"));for(l in n)if(!a||l==this.data.selectedDateField){var r=this.setRangeByMoment(e,n,l);if(r[0]<=i&&r[1]>=i||a){this.data.ltPropPreventSelection?a&&(e.selectionStart=e.selectionEnd=r[1]):(e.selectionStart=r[0],e.selectionEnd=r[1]),this.setData("selectedDateField",l);break}}}},setRangeByMoment:function(t,e,a){var o,l;if($L.moment){var i=this.getCrctFormat(),n=t.value,r=this.data.ltPropCalendarProperties.i18n,s=$L.moment(n,i,{i18n:r}),d=r?"i18N":"format";if(s.validate()){for(var c=0,p=i.slice(e[a][0],e[a][1]),u=0;u<this.data.dateOrder.length;u++){var h=this.data.dateOrder[u],m=s[d](h.format);if(h.format==p)break;n=n.replace(m,""),c+=m.length}var f=s[d](p);l=(o=c+n.indexOf(f))+f.length}else o=e[a][0],l=e[a][1]}else o=e[a][0],l=e[a][1];return[o,l]},hideCalendar:function(){Array.from(document.getElementsByTagName("lyte-input")).forEach(function(t){var e=t.calendarDiv;t!=this.$node&&e&&!$L(e).hasClass("lyteCalendarHidden")&&t.component._hideCalendar()}.bind(this))},_hideCalendar:function(t,e){var a=this.$node.calendarDiv;if(a&&!$L(a).hasClass("lyteCalendarHidden")&&(e||this._selected||this.data.ltPropCalendarProperties.disableNavigation||!a.contains(document.activeElement))){var o,l="onBeforeCalendarClose";this.getMethods(l)&&(o=this.executeMethod(l,a,this.$node,!!this._selected)),0!=o?o&&o.then?(this._calendarCloseStart=!0,Promise.resolve(o).then(this.mainHideFn.bind(this,t))):this.mainHideFn(t):this.$node.focus()}},mainHideFn:function(t){var e=this,a=this.$node,o=a.calendarDiv;if(delete e._calendarCloseStart,o.classList.add("lyteCalendarHidden"),a.classList.remove("calendarOpen"),Array.from(e._assCalendar.querySelectorAll("lyte-dropdown")).forEach((function(t){t.close()})),this.data.ltPropAria&&$L("input,textarea",a).attr("aria-expanded","false"),e.getMethods("onCalendarClose")&&e.executeMethod("onCalendarClose",o,a),"drilldown"==e.data.ltPropHeaderType&&a.revertToSelected(),t&&(a.blur(),e._closedbyscrl=!0),this.data.ltPropAria){var l=document.activeElement;(l==document.body||o.contains(l))&&$L(".lyteInputCalendarIcon",this.$node).focus(),this.setData("isExpanded","false")}},showCalendar:function(t,e){if(this._byManual)delete this._byManual;else if(this.hideCalendar(),!(this.data.ltPropReadonly&&!this.data.ltPropPreventKeys||this._calendarCloseStart)){if(this.getMethods("onBeforeOpen"))if(0==this.executeMethod("onBeforeOpen",t,this.$node))return this._prevclick=!0,void setTimeout(function(){delete this._prevclick}.bind(this),100);this.data.ltPropBindToBody||this.setData("ltPropBindToBody",!0),this.$node.calendarDiv.classList.remove("lyteCalendarHidden"),$L.fastdom.measure(this.scrollFunc.bind(this)),$L.fastdom.mutate(function(){this.data.ltPropReadonly||this.findCalendarRange(t,e),this.$node.classList.add("calendarOpen"),"datetime"==this.data.ltPropType&&this.dropdown&&this.dropdown.close(),this.data.ltPropAria&&$L("input,textarea",this.$node).attr("aria-expanded","true"),this.data.ltPropAria&&window.requestAnimationFrame(function(){this.setData("navigation",!0),this.setData("isExpanded","true")}.bind(this)),this.getMethods("onCalendarOpen")&&this.executeMethod("onCalendarOpen",this.$node.calendarDiv,this.$node)}.bind(this))}},timeClick:function(t,e,a){if(!this.data.ltPropReadonly||this.data.ltPropPreventKeys){if(!this.data.ltPropReadonly&&!this._emptytimeValue){var o;switch(Math.min(2,parseInt((null==a?e.selectionStart:a)/3))){case 2:a=6,o=e.value.length,this.setData("selectedField",{prop:"meridian",val:6});break;case 1:a=3,o=5,this.setData("selectedField",{prop:"minute",val:3});break;default:a=0,o=2,this.setData("selectedField",{prop:"hour",val:0})}e.selectionStart=a,e.selectionEnd=o}this.dropbox&&this.dropbox.classList.contains("lyteDropdownHidden")&&"click"==t.type&&this.open_dropdown()}},open_dropdown:function(){this.dropdown.ltProp("selected",""),this.setData("dropdownData",this.getData("originalData")),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime),this.dropdown.toggle()},calendarKeydown:function(t,e){if("Escape"==t.key)return this._hideCalendar(void 0,!0);if(e.value&&!this.data.ltPropReadonly){var a=t.keyCode,o=this.data.ltPropIso,l=this.dateValidation(o);if(0!=l){var i=this.getData("selectedDateField");if(-1!=[37,38,39,40,9].indexOf(a)){e.selectionEnd==e.selectionStart&&(this.findCalendarRange(t,e),i=this.data.selectedDateField);var n=e.selectionStart,r=e.selectionEnd;if(-1!=[38,40].indexOf(a)){var s=Array.from(this._assCalendar.getElementsByTagName("lyte-dropdown")),d=!1;if(s.every((function(t){return!(d=t.ltProp("isOpen"))})),t.preventDefault(),d)return;switch(i){case"year":40==a?l.setFullYear(l.getFullYear()-1):l.setFullYear(l.getFullYear()+1);break;case"month":40==a?l.setMonth(l.getMonth()-1):l.setMonth(l.getMonth()+1);break;default:40==a?l.setDate(l.getDate()-1):l.setDate(l.getDate()+1)}this._assCalendar.component.checkDate(l)&&(this.setData("ltPropIso",$L.moment(l).format()),"datetime"==this.getData("ltPropType")&&this.update_iso()),$L.fastdom.measure(this.findCalendarRange.bind(this,{},e,!0))}else{if(e.selectionEnd==e.value.length&&(39==a||!t.shiftKey&&9==a)||0==e.selectionStart&&(37==a||t.shiftKey&&9==a))return;for(var c,p=this.getData("dateRange"),u=this.data.dateOrder,h=0;h<u.length;h++)if(u[h].name==i){c=h;break}if(39==a||!t.shiftKey&&9==a)if(h+1==u.length)n=r=p[i][1]+1;else{var m=this.setRangeByMoment(e,p,u[c+1].name);n=r=Math.abs(.5*(m[0]+m[1]))}else if(37==a||t.shiftKey&&9==a)if(0==h)n=r=p[i][0]+1;else{m=this.setRangeByMoment(e,p,u[c-1].name);n=r=Math.abs(.5*(m[0]+m[1]))}if($L.fastdom.measure(this.findCalendarRange.bind(this,{},e)),this.data.ltPropPreventSelection)return;t.preventDefault()}e.selectionStart=n,e.selectionEnd=r}}}},focusCallback:function(t){this.getMethods("onFocus")&&this.executeMethod("onFocus",t,this.$node)},focusout:function(){if(this.preventFocus)delete this.preventFocus;else{var t=this.$node.calendarDiv;if(!t||t.classList.contains("lyteCalendarHidden"))return;if(this.data.navigation)return;clearTimeout(this._hidecall),this._hidecall=setTimeout(this._hideCalendar.bind(this),0)}},maxLen:function(t){var e=this.data.ltPropMaxlength;return null!=e?t.toString().match(new RegExp(".{0,"+e+"}"))[0]:t},showCalendarAction:function(t,e){var a=this.$node;a.classList.add("lyteInputFocus"),this.focusCallback.call(this,t),this.data.ltPropAria||!$L(a.calendarDiv).hasClass("lyteCalendarHidden")&&this.data.ltPropBindToBody||this.showCalendar(t,e)},input_blur:function(t,e){var a=t.relatedTarget;if(!(this.data.ltPropAria&&a&&this.$node.contains(a))){delete this._lasttyped;var o=/date/i.test(this.data.ltPropType),l=this.getMethods("onBlur");if(o&&a&&"dropdown"==this.data.ltPropHeaderType){var i=a.closest("lyte-drop-box");if(i){var n=i.origindd,r=this.$node,s=r.calendarComp;if(n&&s&&s.contains(n))return r.focus()}}if(this.$node.classList.remove("lyteInputFocus"),!e){var d=this.getData("ltPropType");if(this._calmsfg)this.valUpdate(),clearTimeout(this._blurcall),this._blurcall=setTimeout(function(){o&&this.focusout.call(this),l&&this.executeMethod("onBlur",t,this.$node)}.bind(this),0),delete this._calmsfg;else{if("number"==d){var c=this.data.ltPropMax,p=this.data.ltPropMin,u=parseFloat(t.target.value),h=!1;isNaN(u)||(-1==[void 0,null,""].indexOf(p)&&p.constructor==Number&&(h=(u=Math.max(p,u))==p),-1==[void 0,null,""].indexOf(c)&&c.constructor==Number&&(u=Math.min(c,u),h=h||u==c),h&&(t.target.value=u))}this.valUpdate.call(this),o&&this.focusout.call(this),l&&this.executeMethod("onBlur",t,this.$node)}}}},open_cal_for_icon:function(t){!$L(this.$node.calendarDiv).hasClass("lyteCalendarHidden")&&this.data.ltPropBindToBody||this.showCalendar(t,this.$node.getElementsByTagName("input")[0])},password_obs:function(t){var e=this.data,a=e.ltPropPasswordVisibility;if("password"==e.ltPropType&&e.ltPropPasswordIcon){this.setData({passwordClass:"lyteInput"+(a?"Hide":"Show")+"PasswordIcon",passwordTooltip:e.ltPropPasswordTooltip[a?"hide":"show"],ltPropFocus:!0});var o=this.$node.getElementsByTagName("input")[0];o.setAttribute("type",a?"text":"password"),window.requestAnimationFrame((function(){o.selectionStart=o.selectionEnd=o.value.length})),t||$L(this.$node).addClass("lyteInputWithPasswordToggleButton")}}.observes("ltPropPasswordVisibility").on("didConnect"),actions:{keyclick:function(t){if("Enter"==t.key)return t.preventDefault(),t.target.click(),!1},calendarKey:function(t){"Escape"==t.key&&this._hideCalendar(void 0,!0)},togglePassword:function(t){t&&"Enter"!=t.key||this.setData("ltPropPasswordVisibility",!this.data.ltPropPasswordVisibility)},calIconClick:function(t,e){this.open_cal_for_icon(t)},calIconFocus:function(t,e){var a=t.relatedTarget;a&&this.$node.contains(a)||this.showCalendarAction(t,a)},calIconBlur:function(t){var e=t.relatedTarget,a=this._assCalendar;document!=window.document&&this.data.navigation||(a&&e&&a.contains(e)||this._hideCalendar(),e&&this.$node.contains(e)||this.input_blur(t))},calIconKey:function(t){switch(t.key){case"Enter":case" ":this.open_cal_for_icon(t)}},resizeSelect:function(t){this.rsizefun(t)},preventDrag:function(t){t.preventDefault()},closeKey:function(t){return!1},clsIcon:function(t){var e="Enter"==t.key;if("keydown"!=t.type||e)return this.$node.ltProp("value",""),this.$node.focus(),this.data.isSearch&&this.throwEvent("on-ip-clear",t),this.getMethods("onClear")&&this.executeMethod("onClear",t,this.$node),e?(t.preventDefault(),!1):void 0},calmsdown:function(t,e){this._calmsfg=!0;var a=t.target;this.$node.calendarDiv.contains(a.correspondingElement||a)&&(this.preventFocus=!0)},numberKeydown:function(t,e){var a=/firefox/gi.test(navigator.userAgent);if(!_lyteUiUtils.isAndroid||a){var o=t.which||t.keyCode,l=e.value,i=/rv:11/gi.test(navigator.userAgent);if(/^(8|9|27|37|39|13|187|189)$/.test(o)||a&&/^173$/i.test(o)||o>=48&&o<=57||o>=96&&o<=105||t.metaKey||t.ctrlKey||/^(38|40)$/.test(o)&&!i)return;if(/^(69|190)$/.test(o)&&(!/\./i.test(l)&&190==o||69==o&&!/e/i.test(l)&&""!=l))return;if(t.preventDefault(),38==o?l=Number(l||0)+Number(e.step):40==o&&(l=Number(l||0)-Number(e.step)),i&&/^(38|40)$/.test(o)){var n=parseInt(this.maxLen(l));isNaN(n)||(n=Math.min(Math.max(n,e.min?e.min:-1/0),e.max?e.max:1/0),isNaN(n)||(e.value=n))}}},numberPaste:function(t,e){var a=t.clipboardData||window.clipboardData,o=e.value+a.getData("text").replace(/\'|\"/g,"");/^([0-9]+|\.(?!e){1,}|\+|\-)([0-9\.\e]{0,}$)/i.test(o)||(o.length!=this.maxLen(o)||/rv:11/gi.test(navigator.userAgent))&&t.preventDefault()},focusClass:function(t){this.$node.classList.add("lyteInputFocus"),this.focusCallback.call(this,t)},blurThrow:function(t,e){this.input_blur(t,e)},input:function(t,e){if("number"==this.data.ltPropType){var a,o=e.value,l=this.maxLen(o);a=Math.min(l,null!=e.max&&""!=e.max?e.max:1/0),o===l&&l==a||(l==a?e.value=l:isNaN(a)?e.value=parseFloat(l):e.value=a)}if(this.getData("ltPropAutoUpdate")){clearTimeout(this._iptime);var i=this.data.ltPropUpdateDelay;null!=i?this._iptime=setTimeout(this.valUpdate.bind(this),i):this.valUpdate.call(this)}},showcalendar:function(t,e){this.showCalendarAction(t,e)},calendarClick:function(t,e){var a=this._focus,o=this.data;if(a&&_lyteUiUtils.isMobile||o.ltPropReadonly&&!o.ltPropPreventKeys)delete this._focus;else{if(!a&&/date/i.test(o.ltPropType)&&!this._prevclick){var l=this.$node.calendarDiv;this.data.ltPropAria||l&&!$L(l).hasClass("lyteCalendarHidden")||this.showCalendar(t,e)}this.findCalendarRange(t,e)}},calendarKeydown:function(){this.calendarKeydown.apply(this,arguments)},timeBlur:function(t,e){if(this._emptytimeValue&&e.value)this.checkTimeStr(e,!0);else if(this.data.ltPropValidateOnBlur&&!this._emptytimeValue){var a=this._getCrctHour(e.value,this.data.ltPropTimeFormat,this.data.meridian);this.setData("ltPropDefaultTime",a||this._findNearest(e.value,this.data.ltPropTimeFormat))}this.$node.classList.remove("lyteInputFocus"),this.setData("selectedField",{}),this.getMethods("onBlur")&&(this._calmsfg?this.executeMethod("onBlur",t,this.$node):setTimeout(function(){this.executeMethod("onBlur",t,this.$node)}.bind(this),0))},timeInput:function(t){if(this._emptytimeValue)this.checkTimeStr(t);else{var e,a=t.value||"",o=this.data.ltPropTimeFormat,l=this.data.meridian;12==o?(e="hh:mm A",a=a.replace(l.AM,"AM").replace(l.PM,"PM")):e="HH:mm",a&&$L.moment&&!$L.moment(a,e).validate()&&(t.value=this.data.ltPropDefaultTime)}},timeFocus:function(t,e){this.$node.classList.add("lyteInputFocus");e.value.trim();this.setData("selectedField",{prop:"hour",val:0}),e.selectionStart=0,this.fixSelection.call(this,0,{prop:"hour",val:0},e),this.focusCallback.call(this,t)},timeKeydown:function(t,e){if(!this.data.ltPropReadonly&&!this._emptytimeValue)if(/enter/i.test(t.key))this.data.ltPropAria&&$L(this.dropbox).hasClass("lyteDropdownHidden")&&(this.open_dropdown(),t.stopPropagation(),t.stopImmediatePropagation());else{var a=this.getData("selectedField"),o=this.getData("meridian"),l=this.getData("ltPropTimeFormat"),i=!0,n=this.getData("originalData"),r=this.getData("dropdownData"),s=_lyteUiUtils.getCorrectNumberCode(t.which||t.keyCode),d=this.data.ltPropPreventDropdownNavigation,c=this.dropbox&&!$L(this.dropbox).hasClass("lyteDropdownHidden");if(d||!c||!/38|40|13/.test(s))if(d&&c&&/38|40/.test(s)&&t.stopPropagation(),!a.prop||t.ctrlKey||t.metaKey)/^8|46$/i.test(s)&&t.preventDefault();else{var p,u=e.selectionStart,h=e.selectionEnd;if(u==h?(this.timeClick({},e,u),u=e.selectionStart,h=e.selectionEnd,a=this.getData("selectedField")):0==u&&h==e.value.length&&(u=0,h=2,this.timeClick({},e,u),a=this.getData("selectedField")),9!=s&&t.preventDefault(),-1!=[9,37,39].indexOf(s))!t.shiftKey&&37!=s||"hour"==a.prop||39==s?(t.shiftKey&&39!=s||"minute"==a.prop||24!=l)&&(t.shiftKey||"meridian"==a.prop||12!=l)||37==s||(this.fixSelection.call(this,3,a,e),t.preventDefault(),p=!0):(this.fixSelection.call(this,-3,a,e),t.preventDefault(),p=!0),i=!1;else if(s>=48&&s<=57&&"meridian"!=a.prop)"hour"==a.prop?this.hourTimeSet.call(this,e,t,"hour",u,h):"minute"==a.prop&&this.hourTimeSet.call(this,e,t,"minute",u,h),this.data.ltPropDropdown&&this.constructNewDrop(e,l);else if(38!=s&&40!=s||"meridian"==a.prop){if("meridian"==a.prop){var m,f=e.value.trim().slice(6,e.value.length),y=String.fromCharCode(s).toUpperCase();if(0==o.PM.toUpperCase().indexOf(y)?f=o.PM:0==o.AM.toUpperCase().indexOf(y)?f=o.AM:-1!=[38,40].indexOf(s)&&(f=f==o.PM?o.AM:o.PM),f!=o.AM&&"00"==e.value.trim().slice(0,2)&&(m=this.replaceVal.call(this,e,"12",0,2)),f&&(m=this.replaceVal.call(this,m||e,f,u,h)),!this.data.ltPropValidateOnBlur)if(0==this.maxValCheck(m))return!1;this.setData("ltPropDefaultTime",m),i=!1}}else 38==s?this.timeIncrease.call(this,e,t,a.prop,u,h):this.timeDecrease.call(this,e,t,a.prop,u,h),i=!1,p=!0;!p&&this.fixSelection.call(this,0,this.getData("selectedField"),e),i&&$L.fastdom.mutate((function(){e.selectionStart=u,e.selectionEnd=h})),n.length!=r.length&&(s<48||s>57)&&(this.dropdown.ltProp("selected",""),this.setData("dropdownData",n),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime))}}},timeClick:function(){this.timeClick.apply(this,arguments)}},attrObs:function(t){var e=this.data;if(e.ltPropAria){var a=$L("input,textarea",this.$node),o="ltPropAriaAttributes",l="ltPropTimeAriaAttributes";t&&t.item!=o||_lyteUiUtils.setAttribute(a.get(0),e[o]||{},t?t.oldValue:{}),"datetime"!=e.ltPropType||t&&t.item!=l||_lyteUiUtils.setAttribute(a.get(1),e[l]||{},t?t.oldValue:{})}}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropTimeAriaAttributes").on("didConnect"),single_obs:function(t){if(t.path){var e=t.path.replace(/^\./,""),a=t.newValue;if(this.data.ltPropAria){var o={};o[e]=a,_lyteUiUtils.setAttribute($L("input,textarea",this.$node).get(/time/i.test(t.item)?-1:0),o,{})}}}.observes("ltPropAriaAttributes.*","ltPropTimeAriaAttributes.*"),checkTimeStr:function(t,e){if(this._emptytimeValue){var a,o=t.value||"",l=this.data.ltPropTimeFormat,i=this.data.meridian;if(12==l?(a="hh:mm A",o=o.replace(i.AM,"AM").replace(i.PM,"PM")):a="HH:mm",o&&$L.moment(o,a).validate()){var n=this._getCrctHour(t.value,l,i);this.setData("ltPropDefaultTime",n||this._findNearest(t.value,l)),delete this._emptytimeValue}else o&&e&&(this.data.ltPropStartTime==this.data.ltPropDefaultTime&&this.setData("ltPropDefaultTime",""),this.setData("ltPropDefaultTime",this.data.ltPropStartTime),delete this._emptytimeValue)}},check_dst:function(t,e,a){var o=Lyte.objectUtils,l=$L.moment,i=this.data,n=i.ltPropCurrentDate,r=this.getCrctFormat(),s=12==i.ltPropTimeFormat?"hh:mm A":"HH:mm",d=function(t){t.className&&o(t,"delete","className")};if(l){if(e){if(n){var c=$L.moment(n+" "+t,r+" "+s);return a?c.format(s):c}return a?t:$L.moment(t,s)}n?t.forEach((function(t){!function(t){return $L.moment(n+" "+t.time,r+" "+s).format(s)!=t.time}(t)?d(t):t.className||o(t,"add","className","lyteDropdownActive")})):t.forEach(d)}},update_iso:function(){if(!this.__custom_iso){var t,e=this.data,a=e.ltPropCurrentDate?e.ltPropCurrentDate:"invalid_date",o=e.ltPropIso,l="DD-MM-YYYY",i=(o?$L.moment(new Date(o)):$L.moment(a,this.getCrctFormat())).format(l),n=e.ltPropDefaultTime;if(i&&$L.moment){if(n){var r=i+" "+n,s=l+" "+(12==e.ltPropTimeFormat?"hh:mm A":"HH:mm");if(!(t=$L.moment(r,s,{i18n:!0})).validate()&&i&&!(t=$L.moment(i,l,{i18n:!0})).validate())return}else t=$L.moment(i,l,{i18n:!0});this.__custom_iso=!0,this.setData("ltPropIso",t.format()),delete this.__custom_iso}}},iso_obs:function(t){if(!this.__custom_iso){var e=$L.moment(new Date(t.oldValue)),a=$L.moment(new Date(t.newValue)),o=this.data.ltPropCurrentDate,l=this.getCrctFormat(),i=this.data.ltPropCalendarProperties.i18n?"i18N":"format",n=a[i](l);e[i](l)==n&&e[i]("YYYY")!=a[i]("YYYY")&&n==o&&(this._selected=!0,this.dateCallback({oldValue:n,newValue:n,item:"ltPropCurrentDate"}),"datetime"===this.getData("ltPropType")&&this.update_iso(),setTimeout(function(){delete this._selected}.bind(this)))}}.observes("ltPropIso"),getCrctFormat:function(){var t=this.data.ltPropFormat,e=this._assCalendar;return e?e.component.getRelevantFormat(t):(t||"").toUpperCase()}}),document.addEventListener("click",_lyteInput,!0),["scroll","resize","orientationchange"].forEach((function(t){window.addEventListener(t,_lyteInput,!0)})),Lyte.Component.register("lyte-number",{_template:'<template tag-name="lyte-number"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <template is="if" value="{{ltPropYield}}"><template case="true"><lyte-yield yield-name="number"></lyte-yield></template></template> <div class="lyteField {{if(ltPropSuffix,\'lyteNumberSuffix\',\'\')}}"> <input type="text" name="{{ltPropName}}" class="{{ltPropClass}}" id="{{ltPropId}}" placeholder="{{ltPropPlaceholder}}" value="{{lbind(ltPropValue)}}" onkeydown="{{action(\'keydown\',event,this)}}" onpaste="{{action(\'paste\',event,this)}}" oninput="{{action(\'input\',event,this)}}" onfocus="{{action(\'focus\',event,this)}}" onblur="{{action(\'blur\',event,this)}}" onwheel="{{action(\'wheel\',event,this)}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" pattern="{{ltPropPattern}}" autocomplete="{{ltPropAutocomplete}}" tabindex="{{ltPropTabIndex}}" data-tabindex="{{ltPropDataTabindex}}"> <template is="if" value="{{expHandlers(ltPropUnit,\'&amp;&amp;\',expHandlers(ltPropSuffix,\'!\'))}}"><template case="true"><span class="lyteNumberUnitElem">{{ltPropUnit}}</span></template></template> <template is="if" value="{{ltPropSuffix}}"><template case="true"><div class="lyteNumberSuffixDummyWrapper"> <span class="lyteNumberSuffixDummyElem">{{ltPropValue}}</span> <span class="lyteNumberUnitElem">{{ltPropUnit}}</span> </div></template></template> <template is="if" value="{{ltPropControls}}"><template case="true"> <div class="lyteNumberArrowContainer" onclick="{{action(\'change_value\',event,this)}}" onmousedown="{{action(\'change_value\',event,this)}}" ontouchstart="{{action(\'change_value\',event,this)}}" onkeydown="{{action(\'change_value\',event,this)}}"> <div class="lyteNumberUpArrow {{ltPropControlsClass}} {{upArrowClass}}" tabindex="0" role="spinbutton"> <template is="if" value="{{ltPropControlsYield}}"><template case="true"><lyte-yield yield-name="upArrow" lt-prop-disabled="{{if(upArrowClass,true,false)}}" lt-prop-value="{{ltPropValue}}"></lyte-yield></template></template> </div> <div class="lyteNumberDownArrow {{ltPropControlsClass}} {{downArrowClass}}" tabindex="0" role="spinbutton"> <template is="if" value="{{ltPropControlsYield}}"><template case="true"><lyte-yield yield-name="downArrow" lt-prop-disabled="{{if(downArrowClass,true,false)}}" lt-prop-value="{{ltPropValue}}"></lyte-yield></template></template> </div> </div> </template></template> </div> <template is="if" value="{{expHandlers(ltPropError,\'&amp;&amp;\',errorMessage)}}"><template case="true"> <span class="lyteNumberErrorMessage">{{errorMessage}}</span> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[5]},{type:"attr",position:[5,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5,3]},{type:"if",position:[5,3],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[5,5]},{type:"if",position:[5,5],cases:{true:{dynamicNodes:[{type:"text",position:[0,1,0]},{type:"text",position:[0,3,0]}]}},default:{}},{type:"attr",position:[5,7]},{type:"if",position:[5,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[7]},{type:"if",position:[7],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}],_observedAttributes:["ltPropValue","ltPropMaxlength","ltPropName","ltPropClass","ltPropId","ltPropPlaceholder","ltPropIgnoreSymbols","ltPropStep","ltPropInverse","ltPropWheel","ltPropMax","ltPropMin","ltPropAutofocus","ltPropDisabled","ltPropReadonly","ltPropStyle","ltPropInputTitle","ltPropPattern","ltPropUpdateDelay","ltPropLabel","ltPropAutocomplete","ltPropAppearance","ltPropDirection","ltPropValidateOnInput","ltPropAutoUpdate","ltPropDecimal","ltPropIncrement","ltPropAria","ltPropAriaAttributes","ltPropRemoveAtCursor","ltPropFireOnInit","ltPropValidateOnEmpty","ltPropRestrict","ltPropInputWrapperClass","ltPropTabIndex","ltPropValidation","ltPropMandatory","ltPropTriggerValidation","ltPropErrorMessage","ltPropDefaultErrorMessage","ltPropError","ltPropClearValidation","ltPropDataTabindex","ltPropControls","ltPropCyclic","ltPropUnit","ltPropDigits","ltPropSuffix","ltPropControlsYield","ltPropControlsClass","ltPropYield","ltPropPreventObserver","errorMessage","upArrowClass","downArrowClass"],didConnect:function(){["focus","blur","click","select"].forEach(function(t){this.$node[t]=function(e){this.getInput()[t](e)}.bind(this)}.bind(this)),this.data.ltPropAutofocus&&this.$node.focus(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)},init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didDestroy:function(){clearTimeout(this._time)},data:function(){var t=_lyteUiUtils.getDefault("lyte-number");return{ltPropValue:Lyte.attr("string",{default:t.string||""}),ltPropMaxlength:Lyte.attr("number",{default:t.maxlength}),ltPropName:Lyte.attr("string",{default:t.name}),ltPropClass:Lyte.attr("string",{default:t.class}),ltPropId:Lyte.attr("string",{default:t.id}),ltPropPlaceholder:Lyte.attr("string",{default:t.placeholder||""}),ltPropIgnoreSymbols:Lyte.attr("boolean",{default:t.ignoreSymbols||!1}),ltPropStep:Lyte.attr("number",{default:t.step||1}),ltPropInverse:Lyte.attr("boolean",{default:t.inverse||!1}),ltPropWheel:Lyte.attr("boolean",{default:t.wheel||!0}),ltPropMax:Lyte.attr("number",{default:t.max}),ltPropMin:Lyte.attr("number",{default:t.min}),ltPropAutofocus:Lyte.attr("boolean",{default:t.autofocus||!1}),ltPropDisabled:Lyte.attr("boolean",{default:t.disabled||!1}),ltPropReadonly:Lyte.attr("boolean",{default:t.readonly||!1}),ltPropStyle:Lyte.attr("string",{default:t.style||""}),ltPropInputTitle:Lyte.attr("string",{default:t.inputTitle}),ltPropPattern:Lyte.attr("string",{default:t.pattern||".+"}),ltPropUpdateDelay:Lyte.attr("number",{default:"undefined"==t.updateDelay?void 0:null==t.updateDelay?250:t.updateDelay}),ltPropLabel:Lyte.attr("string",{default:t.label||""}),ltPropAutocomplete:Lyte.attr("string",{default:t.autocomplete||"off"}),ltPropAppearance:Lyte.attr("string",{default:t.appearance||"box"}),ltPropDirection:Lyte.attr("string",{default:t.direction||"vertical"}),ltPropValidateOnInput:Lyte.attr("boolean",{default:t.validateOnInput||!1}),ltPropAutoUpdate:Lyte.attr("boolean",{default:0!=t.autoUpdate}),ltPropDecimal:Lyte.attr("string",{default:t.decimal||"."}),ltPropIncrement:Lyte.attr("boolean",{default:0!=t.increment}),ltPropAria:Lyte.attr("boolean",{default:t.aria||!1}),ltPropAriaAttributes:Lyte.attr("object",{default:t.ariaAttributes||{},watch:!0}),ltPropRemoveAtCursor:Lyte.attr("boolean",{default:t.removeAtCursor||!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:t.fireOnInit||!1}),ltPropValidateOnEmpty:Lyte.attr("boolean",{default:0!=t.validateOnEmpty}),ltPropRestrict:Lyte.attr("string",{default:t.restrict}),ltPropInputWrapperClass:Lyte.attr("string",{default:t.wrapperClass||""}),ltPropTabIndex:Lyte.attr("string",{default:t.tabIndex||"0"}),ltPropValidation:Lyte.attr("string",{default:t.validation||""}),ltPropMandatory:Lyte.attr("boolean",{default:t.mandatory||!1}),ltPropTriggerValidation:Lyte.attr("boolean",{default:t.triggerValidation||!1}),ltPropErrorMessage:Lyte.attr("object",{default:t.errorMessage||{}}),ltPropDefaultErrorMessage:Lyte.attr("string",{default:t.defaultErrorMessage||"Invalid input"}),ltPropError:Lyte.attr("boolean",{default:t.error||!1}),ltPropClearValidation:Lyte.attr("boolean",{default:t.clearValidation||!1}),ltPropDataTabindex:Lyte.attr("string",{default:t.dataTabindex||"0"}),ltPropControls:Lyte.attr("boolean",{default:t.controls||!1}),ltPropCyclic:Lyte.attr("boolean",{default:t.cyclic||!1}),ltPropUnit:Lyte.attr("string",{default:t.unit||void 0}),ltPropDigits:Lyte.attr("number",{default:t.digits||void 0}),ltPropSuffix:Lyte.attr("boolean",{default:t.suffix||!1}),ltPropControlsYield:Lyte.attr("boolean",{default:t.controlsYield||!1}),ltPropControlsClass:Lyte.attr("string",{default:t.controlsClass||"lyteNumberControls"}),ltPropYield:Lyte.attr("boolean",{default:t.yield||!1}),ltPropPreventObserver:Lyte.attr("boolean",{default:t.preventObserver||!1}),errorMessage:Lyte.attr("string",{default:""}),upArrowClass:Lyte.attr("string",{default:""}),downArrowClass:Lyte.attr("string",{default:""})}},valueObs:function(t){var e=this.data;if(e.ltPropControls&&(this.setData("upArrowClass",e.ltPropValue==e.ltPropMax?"lyteNumberArrowDisabled":""),this.setData("downArrowClass",e.ltPropValue==e.ltPropMin?"lyteNumberArrowDisabled":"")),!this._init){var a=!t;if(t?t.newValue=t.newValue||"":t={newValue:this.data.ltPropValue||""},this._allowCallback)return delete this._allowCallback,void(this.getMethods("onValueChange")&&this.executeMethod("onValueChange",t,this.$node));var o=t.newValue;if(a&&!this.data.ltPropFireOnInit&&(this._init=!0),this.validate(o))return this._valueUpdate(""),void delete this._init;if(o=this.maxLenValidation(o),(this.data.ltPropValidateOnEmpty&&!t.newValue||t.newValue)&&(o=this.maxMinCheck(o,!0)),t.newValue!=o)this._valueUpdate(o);else if(!this._init){if(a&&t.newValue==o)return;this.getMethods("onValueChange")&&this.executeMethod("onValueChange",t,this.$node)}delete this._init}}.observes("ltPropValue").on("didConnect"),maxMinOns:function(){this.data.ltPropPreventObserver||this._valueUpdate(this.maxMinCheck(this.data.ltPropValue||"",!0))}.observes("ltPropMax","ltPropMin"),wrp_class_obs:function(t){var e=this.data;t=t||{newValue:e.ltPropInputWrapperClass},$L(this.$node).addClass(t.newValue).removeClass(t.oldValue||"")}.observes("ltPropInputWrapperClass").on("didConnect"),appearanceObs:function(){var t="remove",e="add",a=this.$node.classList;/box/i.test(this.data.ltPropAppearance)&&(t="add",e="remove"),a[e]("lyteInput"),a[t]("lyteInputBox")}.observes("ltPropAppearance").on("didConnect"),control_obs:function(t){t=t||{newValue:this.data.ltPropControls},this.$node.classList[t.newValue?"add":"remove"]("lyteNumberWithArrowKeys")}.observes("ltPropControls").on("didConnect"),directionObs:function(){var t="remove",e="add",a=this.$node.classList;/vertical/i.test(this.data.ltPropDirection)&&(e="remove",t="add"),a[e]("horizontal"),a[t]("vertical")}.observes("ltPropDirection").on("didConnect"),disAbs:function(){this.$node.classList[this.data.ltPropDisabled?"add":"remove"]("lyteNumberDisabled")}.observes("ltPropDisabled").on("didConnect"),readAbs:function(){this.$node.classList[this.data.ltPropReadonly?"add":"remove"]("lyteNumberReadonly")}.observes("ltPropReadonly").on("didConnect"),increment:function(t,e){var a=t.value||"0",o=(Number(a)+this.data.ltPropStep*(e?1:-1)).toString(),l=o,i=this.data,n=i.ltPropDigits;if(null!=n&&(o=l=parseFloat(parseFloat(Number(o)).toFixed(n)).toString()),o!=1/0&&o!=-1/0){var r=i.ltPropValidation;if(r||(o=this.maxLenValidation(o),o=this.maxMinCheck(o,!0)),i.ltPropCyclic&&l!=o){var s=i.ltPropMax,d=i.ltPropMin;null!=s&&null!=d&&(o=l>s?d+Math.abs(s-l)-1:s-Math.abs(d-l)+1)}t.value=o,t.selectionEnd=o.length,t.selectionStart=o.length,i.ltPropAutoUpdate&&this.valueUpdate(t,"input"==r)}},check_restrict:function(t,e){var a=this.data.ltPropRestrict;if(a){var o=new RegExp(a,"g");if(!e)return t.replace(o,"");var l=o.exec(t);if(l)return t.slice(0,l.index)}return t},actions:{change_value:function(t,e){if(t.target!=e){var a=$L(t.target).closest(".lyteNumberUpArrow").length,o=this.data,l=o.ltPropReadonly,i=o.ltPropDisabled,n="keydown"==t.type,r="click"==t.type,s=this.getInput(),d=function(){this.increment(s,a)}.bind(this);i||n&&"Enter"!=t.key&&" "!=t.key||(l||(r||n?this.increment(s,a):(t.preventDefault(),this.getInput().focus(),clearInterval(this.controlsTime),this.removeControlsRef=this.removeControls.bind(this),document.addEventListener("mouseup",this.removeControlsRef),document.addEventListener("touchend",this.removeControlsRef),this.controlsTime=setInterval(d,500))),n&&(this._valueUpdate(s.value),t.preventDefault()),r&&this.setData("ltPropAutofocus",!0))}},keydown:function(t,e){var a,o=t.which||t.keyCode,l=e.selectionStart,i=e.selectionEnd,n=this.data,r=n.ltPropIncrement,s=n.ltPropMax,d=n.ltPropMin;if(8==o){if(l==i&&0==i)return;this._prevent=!0}else r&&38==o?(this.increment(e,!n.ltPropInverse),a=!0):r&&40==o?(this.increment(e,n.ltPropInverse),a=!0):r&&35==o&&null!=s?this.setData("ltPropValue",s):r&&36==o&&null!=d&&this.setData("ltPropValue",d);a&&t.preventDefault()},wheel:function(t,e){var a=this.data;if(a.ltPropWheel&&this._focused&&!a.ltPropDisabled&&!a.ltPropReadonly){var o=a.ltPropInverse;t.deltaY>10?this.increment(e,!o):t.deltaY<-10&&this.increment(e,o),t.preventDefault()}},paste:function(t,e){t.preventDefault();var a=t.clipboardData||window.clipboardData,o=e.value,l=e.selectionStart,i=e.selectionEnd,n=this.data,r=n.ltPropDecimal,s=this.check_restrict(a.getData("text").trim().replace(/^(\'|\")|(\'|\")$/,"").replace(new RegExp("[^0-9e\\+\\-\\"+r+"]","g"),""),!0),d=o.slice(0,l)+s+o.slice(i),c=this.validate(d),p=Number(o),u=s.length,h=1/0,m=n.ltPropValidation;if(c&&(d=this.convertToNo(d)),p!=h&&p!=-1/0){if(this.getMethods("onBeforePaste")){var f=this.executeMethod("onBeforePaste",e.value,a.getData("text"),d);if(null!=f&&(d=f,0==f))return}p!=h&&p!=-1/0&&(m||((d=this.maxLenValidation(d))||!d&&n.ltPropValidateOnEmpty)&&(d=this.maxMinCheck(d,!0)),e.value=d,e.selectionStart=i+u,e.selectionEnd=i+u,n.ltPropAutoUpdate&&this._valueUpdate(e.value,"input"==m),$L.fastdom.measure(this.scroll_to_view.bind(this,e)))}},input:function(t,e){var a;this._prevent&&(delete this._prevent,this.data.ltPropAutoUpdate&&this.valueUpdate(e),a=!0);var o,l=e.value,i=l,n=e.selectionStart,r=e.selectionEnd,s=!a&&this.validate(l),d=this.data.ltPropValidation;if(s){var c=!0;if(/insertText/i.test(t.inputType)){var p=t.data,u=parseFloat(p),h=p.length;isNaN(u)?(l=l.slice(0,r-h)+l.slice(r),r=r-h+1):(u=u.toString(),l=l.slice(0,r-h)+u+l.slice(r),r=r-h+1+u.length),(c=this.validate(l))&&r--}c&&(l=l.slice(0,n-h)+l.slice(r))}else if(l=this.check_restrict(l),!d){var m=this.maxLenValidation(l,n,r);m!=l&&(this.data.ltPropRemoveAtCursor&&(o=!0),l=m),(m=this.maxMinCheck(l,this.data.ltPropValidateOnInput))!=l&&(l=m,o=!1)}e.value=l,s?(e.selectionStart=Math.min(r-1,l.length),e.selectionEnd=Math.min(r-1,l.length)):i!=l?e.selectionStart=e.selectionEnd=o?n-1:l.length:(e.selectionStart=Math.min(n,l.length),e.selectionEnd=Math.min(r,l.length)),this.data.ltPropAutoUpdate&&this.valueUpdate(e,"input"==d)},focus:function(t,e){this.__ignore_focus||(this._focused=!0,this.$node.classList.add("lyteInputFocus"),this.getMethods("onFocus")&&this.executeMethod("onFocus",t,this.$node))},blur:function(t,e){if(!this.__ignore_focus){delete this._focused,this.$node.classList.remove("lyteInputFocus");var a=this.data.ltPropValidation;!a&&(e.value||!e.value&&this.data.ltPropValidateOnEmpty)&&(e.value=this.maxMinCheck(e.value,!0)),this._valueUpdate(e.value,!0),"blur"==a&&this.do_validation(),this.getMethods("onBlur")&&this.executeMethod("onBlur",t,this.$node)}}},valueUpdate:function(t,e){t=t||this.getInput();var a=function(){this._valueUpdate(t.value),e&&this.do_validation()}.bind(this),o=this.data.ltPropUpdateDelay;null==o?a():(clearTimeout(this._time),this._time=setTimeout(a,o))},_valueUpdate:function(t,e){var a,o=t,l="onBeforeValueUpdate";if(e){var i=new RegExp("\\"+this.data.ltPropDecimal+"$");/e$/i.test(t)&&(t=t.replace(/e$/,"")),i.test(t)&&(t=t.replace(i,""))}this.getMethods(l)&&0==(a=this.executeMethod(l,o,t,this.$node))||("string"==typeof a&&(t=a),t!=this.data.ltPropValue&&(this._allowCallback=!0,this.$node.ltProp("value",t)))},validate:function(t){var e,a,o=/e/gi,l=/(\+|\-)/g,i=this.data.ltPropDecimal,n=new RegExp("\\"+i,"g");return o.test(t)&&(t.match(o).length>1&&(a=!0),/^e/i.test(t)?a=!0:(e=/e/gi.exec(t).index,t=t.replace(o,""))),l.test(t)&&(t.match(l).length>1?a=!0:/^(\+|\-)/g.test(t)?t=t.replace(l,""):a=!0),n.test(t)&&(t.match(n).length>1||null!=e&&e<t.indexOf(i)||/^(\+|\-)/g.test(t)&&1==t.indexOf(i)&&2==e||!/^(\+|\-)/g.test(t)&&0==t.indexOf(i)&&1==e?a=!0:t=t.replace(n,"")),!a&&t.length&&(a=!/^\d+$/.test(t)),a},maxLenValidation:function(t,e,a){var o,l=this.data.ltPropMaxlength,i=t.length,n=this.data.ltPropDecimal,r=this.data.ltPropRemoveAtCursor;if(null==l)return t;if(!this.data.ltPropIgnoreSymbols&&(l+=/^(\+|\-)/.test(t)?1:0,new RegExp("\\"+n).test(t)&&(o=new RegExp("\\"+n,"g").exec(t).index,l++),/e/i.test(t))){var s=/e/i.exec(t).index,d=t.slice(s+1),c=parseInt(d);if(d.length){i--;var p=null!=o?t.slice(o+1,s).length:0;if(p<=c&&(null!=o&&(i--,l--),i-=p),i-=d.length,(i+=c)>l){if(c>i-l)return t.slice(0,s)+"e"+(c-(i-l));t=r&&null!=e&&t.length>l?(t=t.split(/e/i)[0]).slice(0,e-1)+t.slice(a):t.split(/e/i)[0].match(new RegExp(".{0,"+l+"}"))[0]}return t}l++}return r&&null!=e&&t.length>l?t.slice(0,e-1)+t.slice(a):t.match(new RegExp(".{0,"+l+"}"))[0]},maxMinCheck:function(t,e){var a=t,o=this.data.ltPropMax,l=this.data.ltPropMin,i=Number(t.replace(new RegExp("\\"+this.data.ltPropDecimal),".")),n=this.getMethods("onBeforeMaxMinValidation");if(null==o&&null==l)return t;null!=o&&(o<i&&(t=o,t=null==(r=n?this.executeMethod("onBeforeMaxMinValidation","max",a,t,this.$node):t)?t:r));if(e&&null!=l)if(l>i)t=l,t=l,t=null==(r=n?this.executeMethod("onBeforeMaxMinValidation","min",a,t,this.$node):t)?t:r;else if(0==i&&""==t){var r;t=Math.max(i,l),t=null==(r=n?this.executeMethod("onBeforeMaxMinValidation","min",a,t,this.$node):t)?t:r}return t.toString().replace(/\./,this.data.ltPropDecimal)},removeTwice:function(t,e){var a=t.split(e);a.length>1&&(t=a.shift()+e.exec(t)[0]+a.join(""));return t},convertToNo:function(t){var e,a,o=this.data.ltPropDecimal,l=new RegExp("\\"+o),i=/e/i;return t=this.removeTwice(t,l),t=this.removeTwice(t,i),t=this.removeTwice(t,/\+|\-/i),l.test(t)&&i.test(t)&&((e=l.exec(t).index)>(a=i.exec(t).index)||1==Math.abs(e-a))&&(t=t.replace(e>a?i:l,"")),/^e/i.test(t)&&(t=t.replace(/e/i,"")),/\+|\-/.test(t)&&!/^(\+|\-)/.test(t)&&(null!=a&&/\+|\-/.exec(t).index!=a+1||null==a)&&(t=t.replace(/\+|\-/g,"")),t},focus_obs:function(t){if(t.newValue){this.$node.focus(),this.setData(t.item,!1);var e=this.getInput();e.selectionStart=e.selectionEnd=e.value.length}}.observes("ltPropAutofocus"),attrObs:function(t){this.data.ltPropAria&&_lyteUiUtils.setAttribute(this.$node.querySelector("input"),this.data.ltPropAriaAttributes||{},t?t.oldValue:{})}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropType").on("didConnect"),single_obs:function(t){if(t.path){var e=t.path.replace(/^\./,""),a=t.newValue;if(this.data.ltPropAria){var o={};o[e]=a,_lyteUiUtils.setAttribute($L("input",this.$node).get(0),o,{})}}}.observes("ltPropAriaAttributes.*"),trigger_obs:function(t){if(t.newValue){var e=t.item;/clear/i.test(e)?this.error_decision():this.do_validation(),this.setData(e,!1)}}.observes("ltPropTriggerValidation","ltPropClearValidation"),error_decision:function(t,e,a){if(this.setData({errorMessage:e,ltPropError:!!e}),$L(this.$node)[(e?"add":"remove")+"Class"]("lyteErrorInput"),e){var o="onError";this.getMethods(o)&&this.executeMethod(o,a,t,this.$node)}else if(""==e){o="onValidInput";this.getMethods(o)&&this.executeMethod(o,t,this.$node)}},do_validation:function(){var t=this.data,e=t.ltPropErrorMessage||{},a=t.ltPropDefaultErrorMessage,o=t.ltPropValue||"",l=t.ltPropValidateOnEmpty,i=o||l,n=i?this.maxMinCheck(o,!0):o,r=t.ltPropPattern,s=this.error_decision.bind(this,o);if(o!=n)return s(e.minmax||a,"maxmin");if(this.maxLenValidation(o)!=o)return s(e.maxlength||a,"maxlength");if(r&&i&&!new RegExp(r,"g").test(o))return s(e.pattern||a,"pattern");return t.ltPropMandatory&&!o?s(e.mandatory||a,"mandatory"):s("")},scroll_to_view:function(t){this.__ignore_focus=!0,t.blur(),t.focus(),delete this.__ignore_focus},removeControls:function(){clearInterval(this.controlsTime),document.removeEventListener("mouseup",this.removeControlsRef),document.removeEventListener("touchend",this.removeControlsRef),delete this.removeControlsRef,delete this.controlsTime},getInput:function(){return Array.from(Array.from(this.$node.children).filter((function(t){return $L(t).hasClass("lyteField")}))[0].children).filter((function(t){return"INPUT"==t.tagName}))[0]}}),Lyte.Component.register("lyte-search",{_template:'<template tag-name="lyte-search"> <lyte-input lt-prop-auto-update="{{ltPropAutoUpdate}}" lt-prop-tab-index="{{ltPropTabIndex}}" lt-prop-data-tabindex="{{ltPropDataTabindex}}" lt-prop-id="{{ltPropId}}" lt-prop-wrapper-style="{{ltPropWrapperStyle}}" lt-prop-class="{{ltPropClass}}" lt-prop-autofocus="{{ltPropAutofocus}}" lt-prop-autocomplete="{{ltPropAutocomplete}}" lt-prop-type="{{ltPropType}}" lt-prop-name="{{ltPropName}}" lt-prop-placeholder="{{ltPropPlaceholder}}" lt-prop-width="{{ltPropWidth}}" lt-prop-height="{{ltPropHeight}}" onkeyup="{{action(\'keyup\',event,this)}}" lt-prop-style="{{ltPropStyle}}" lt-prop-value="{{lbind(ltPropValue)}}" onkeypress="{{action(\'keypress\',event,this)}}" lt-prop-appearance="{{ltPropAppearance}}" lt-prop-direction="{{ltPropDirection}}" lt-prop-disabled="{{ltPropDisabled}}" lt-prop-readonly="{{ltPropReadonly}}" on-value-change="{{method(\'valuechange\')}}" on-focus="{{method(\'focus\')}}" on-blur="{{method(\'blurEvent\')}}" lt-prop-input-title="{{ltPropInputTitle}}" lt-prop-pattern="{{ltPropPattern}}" lt-prop-maxlength="{{ltPropMaxlength}}" oninput="{{action(\'input\',event)}}" lt-prop-close-icon="{{ltPropCloseIcon}}" is-search="true" lt-prop-update-delay="{{ltPropUpdateDelay}}" lt-prop-aria="{{ltPropAria}}" lt-prop-aria-attributes="{{ltPropAriaAttributes}}" lt-prop-focus="{{lbind(ltPropFocus)}}" class="lyteSearchInput" lt-prop="{{ltPropInput}}"></lyte-input> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropAutocomplete","ltPropPlaceholder","ltPropAutofocus","ltPropDisabled","ltPropStyle","ltPropMaxlength","ltPropReadonly","ltPropId","ltPropClass","ltPropType","ltPropName","ltPropWidth","ltPropHeight","ltPropValue","ltPropAppearance","ltPropDirection","ltPropQuerySelector","ltPropMinLength","ltPropMethod","ltPropWrapperStyle","ltPropTabIndex","ltPropDataTabindex","ltPropAjaxRequest","ltPropAutoUpdate","ltPropPattern","ltPropInputTitle","ltPropCloseIcon","ltPropUpdateDelay","ltPropSearchDelay","ltPropCaseSensitive","ltPropComponent","ltPropTrim","ltPropFocus","ltPropDiacritic","ltPropMaintainState","ltPropPreventEmptyKeys","ltPropMultipleSearch","ltPropIgnoreChildren","ltPropInput","ltPropDontHideOnEmpty","ltPropAria","ltPropAriaAttributes","timeout","ltPropCheckFromParent"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){this.$node.setValue=function(t,e){this.$node.ltProp("value",t),this.pressFunc(t||"",e||{}),clearTimeout(this.data.timeout),clearTimeout(this._iptime),delete this._minlengthfail}.bind(this),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),["focus","blur","click","select"].forEach(function(t){this.$node[t]=function(e){this.$node.querySelector("lyte-input")[t](e)}.bind(this)}.bind(this)),$L.fastdom.measure(function(){_lyteUiUtils.getRTL()&&$L.fastdom.mutate(function(){this.$node.classList.add("lyteRTL")}.bind(this))}.bind(this));var t=this.data.ltPropComponent,e=this.data.ltPropQuerySelector;"accordion"==t?e.related="lyte-accordion-item":"tree"==t&&(e.related=".lyteTreeBodyDiv lyte-yield:not(.noChildClass) lyte-tree-icon")},didDestroy:function(){clearTimeout(this.data.timeout),clearTimeout(this._iptime),delete this.$node.setValue,delete this.$node.focus,delete this.$node.blur,delete this.$node.click,delete this.$node.select},data:function(){var t,e=_lyteUiUtils.getDefault("lyte-search"),a="string",o="boolean",l="number",i="object";return{ltPropAutocomplete:Lyte.attr(a,{default:e.autocomplete||"off"}),ltPropPlaceholder:Lyte.attr(a,{default:e.search||""}),ltPropAutofocus:Lyte.attr(o,{default:e.autofocus||!1}),ltPropDisabled:Lyte.attr(o,{default:!1}),ltPropStyle:Lyte.attr(a,{default:e.style||""}),ltPropMaxlength:Lyte.attr(l,{default:e.maxlength||25}),ltPropReadonly:Lyte.attr(o,{default:!1}),ltPropId:Lyte.attr(a,{default:e.id||"inputId"}),ltPropClass:Lyte.attr(a,{default:e.class||""}),ltPropType:Lyte.attr(a,{default:"search"}),ltPropName:Lyte.attr(a,{default:""}),ltPropWidth:Lyte.attr(a,{default:e.width||"100%"}),ltPropHeight:Lyte.attr(a,{default:e.height||""}),ltPropValue:Lyte.attr(a,{default:""}),ltPropAppearance:Lyte.attr(a,{default:e.appearance||"flat"}),ltPropDirection:Lyte.attr(a,{default:e.direction||"vertical"}),ltPropQuerySelector:Lyte.attr(i,{default:{}}),ltPropMinLength:Lyte.attr(l,{default:null==(t=e.minLength)?1:t}),ltPropMethod:Lyte.attr(a,{default:e.method||"contains"}),ltPropWrapperStyle:Lyte.attr(a,{default:e.wrapperStyle||""}),ltPropTabIndex:Lyte.attr(a,{default:e.tabIndex||"0"}),ltPropDataTabindex:Lyte.attr(a,{default:e.dataTabindex||"0"}),ltPropAjaxRequest:Lyte.attr(i,{default:{}}),ltPropAutoUpdate:Lyte.attr(o,{default:!0}),ltPropPattern:Lyte.attr(a,{default:e.pattern||".+"}),ltPropInputTitle:Lyte.attr(a,{default:""}),ltPropCloseIcon:Lyte.attr(o,{default:e.closeIcon||!1}),ltPropUpdateDelay:Lyte.attr(l,{default:e.hasOwnProperty("updateDelay")?e.updateDelay:250}),ltPropSearchDelay:Lyte.attr(l,{default:e.hasOwnProperty("searchDelay")?e.searchDelay:100}),ltPropCaseSensitive:Lyte.attr(o,{default:e.caseSensitive||!1}),ltPropComponent:Lyte.attr(a,{default:void 0}),ltPropTrim:Lyte.attr(o,{default:e.trim||!1}),ltPropFocus:Lyte.attr(o,{default:e.focus||!1}),ltPropDiacritic:Lyte.attr(o,{default:e.diacritic||!1}),ltPropMaintainState:Lyte.attr(o,{default:null==(t=e.maintainState)||t}),ltPropPreventEmptyKeys:Lyte.attr(o,{default:e.preventEmptyKeys||!1}),ltPropMultipleSearch:Lyte.attr(o,{default:e.multipleSearch||!1}),ltPropIgnoreChildren:Lyte.attr(o,{default:e.ignoreChildren||!1}),ltPropInput:Lyte.attr(a,{default:e.input||"{}"}),ltPropDontHideOnEmpty:Lyte.attr(o,{default:e.aria||!1}),ltPropAria:Lyte.attr(o,{default:e.aria||!1}),ltPropAriaAttributes:Lyte.attr(i,{default:e.ariaAttributes||{},watch:!0}),timeout:Lyte.attr(l,{default:void 0}),ltPropCheckFromParent:Lyte.attr(o,{default:!1})}},methods:{blurEvent:function(t){this.getMethods("onBlur")&&this.executeMethod("onBlur",t,this.$node)},focus:function(t){this.getMethods("onFocus")&&this.executeMethod("onFocus",t,this.$node)},valuechange:function(t){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",t,this.$node)}},searchList:function(t){var e=[],a=[],o=this.getData("ltPropQuerySelector");"string"==typeof o&&(o=JSON.parse(o));for(var l=0;l<t.childElementCount;l++){for(var i=t.children[l];i.childElementCount;){var n=this.searchList.call(this,i);e=e.concat(n[0]),a=a.concat(n[1]);break}if(!i.childElementCount){var r=i.textContent;if(this.data.ltPropDiacritic&&(r=_lyteUiUtils.convert_diacritics(r)),e.push(r),o.target)for(var s=this.getScope("string"==typeof o.scope?document.querySelector(o.scope.trim()):o.scope),d=s.querySelectorAll(o.target),c=i;c!=s;){for(var p=!1,u=0;u<d.length;u++)if(c==d[u]){a.push(c),p=!0;break}if(p)break;c=c.parentElement}else a.push(i)}}return[e,a]},actions:{"on-ip-clear":function(t){this.$node.setValue("",{type:"clear"}),this.getMethods("onClear")&&this.executeMethod("onClear",this.$node)},keypress:function(t){var e=t.keyCode;e>=37&&e<=40||13==e||t.stopPropagation()},keyup:function(t,e){var a=t.which||t.keyCode,o=this.data.ltPropPreventEmptyKeys;if(!([37,13,38,39,40,27].indexOf(a)>-1)){if(o){if(null==this._iptime)return;delete this._iptime}var l=t.target.value,i=this.data.ltPropMinLength,n=l.length>=i;if(n)delete this._minlengthfail;else{if(o&&this._minlengthfail)return;this._minlengthfail=!0,/^8|91|17|46$/i.test(a)&&(n=!0)}if(n){clearTimeout(this.data.timeout),clearTimeout(this._iptime);var r=this.data.ltPropSearchDelay;null!=r?this.timeout=setTimeout(this.pressFunc.bind(this),r,l,t):this.pressFunc.call(this,l,t)}}},input:function(t){var e=this.data.ltPropSearchDelay,a=this.data.ltPropMinLength,o=t.target.value;clearTimeout(this._iptime),(o.length>=a||/delete/i.test(t.inputType||""))&&(null==e?this.pressFunc(o,t):this._iptime=setTimeout(function(){delete this._iptime,this.pressFunc(o,t)}.bind(this),250))}},fNcase:function(t){return this.data.ltPropCaseSensitive||(t=t.toLowerCase()),this.data.ltPropTrim&&(t=t.trim()),t},multi_search:function(t,e){var a=this.data,o=a.ltPropQuerySelector,l=$L(o.scope),i=Array.from(l.find(o.search)),n=a.ltPropDiacritic,r=[],s=[],d=this;t=d.fNcase(t),i.forEach((function(e){var i=$L(e).closest(o.target,l).get(0),c=d.fNcase(e.textContent);n&&(c=_lyteUiUtils.convert_diacritics(c)),!t||d.switchfn(a.ltPropMethod,t,c)?r.push(i):s.push(i)})),this.getMethods("onSearch")&&0==this.executeMethod("onSearch",r,this.$node,e,t,s)||this.common_hide(r,s,e)},common_hide:function(t,e,a){function o(t,e){t.forEach((function(t){$L(t)[e]("lyteSearchHidden")}))}o(e,"addClass"),o(t,"removeClass"),"ignore"!=a&&this.getMethods("onAfterSearch")&&this.executeMethod("onAfterSearch",t,a,this.$node)},check_label:function(t,e,a,o,l,i,n,r){var s=[],d=[],c="onSearch";Array.from(a).forEach((function(a){var n=a.querySelector(o);if(n)if(t.indexOf(n)+1){for(var r=e.length,c=0;c<r;c++){var p=e[c];a.contains(p)&&(t.push(p),l.push(i[c]),i.splice(c,1),e.splice(c--,1),r--)}s.push(a)}else{for(r=t.length,c=0;c<r;c++){p=t[c];if(a.contains(p)){t.push(n);var u=e.indexOf(n);u>=0&&(e.splice(u,1),l.push(i[u]),i.splice(u,1));break}}c==r?d.push(a):s.push(a)}})),this.getMethods(c)&&0==this.executeMethod(c,t,this.$node,n,r,e)||(this.common_hide(s,d,"ignore"),this.common_hide(l,i,n))},filteringArray:function(t,e,a,o,l,i,n){var r=this.getData("ltPropMethod"),s=[],d=[],c=[],p=[];if((a=this.fNcase(a)).length)for(var u=t.length,h=0;h<u;h++){var m=o[h],f=e[h];this.switchfn(r,a,this.fNcase(t[h].trim()))?(s.push(m),c.push(f)):(d.push(m),p.push(f))}else s=Array.apply(Array,o),c=Array.from(e);if(n)return this.check_label(s,d,i,n,c,p,l,a);this.getMethods("onSearch")&&0==this.executeMethod("onSearch",s,this.$node,l&&"clear"==l.type?{}:l,a,d)||(null==this.data.ltPropSearchDelay?this.hideProcess(t,e,r,a,i,l,d,s):($L.fastdom.clear(this.___fdm),this.___fdm=$L.fastdom.mutate(this.hideProcess.bind(this,t,e,r,a,i,l,d,s))))},switchfn:function(t,e,a){var o;switch(t){case"contains":o=a.indexOf(e)>=0;break;case"startsWith":o=0==a.indexOf(e);break;case"endsWith":var l=a.lastIndexOf(e);-1!=l&&(o=l+e.length==a.length)}return o},hideProcess:function(t,e,a,o,l,i,n,r){for(var s=this.data.ltPropQuerySelector,d=(o=this.fNcase(o),"lyteSearchHidden"),c=this.data.ltPropComponent,p=0;p<t.length;p++)this.additionalHand(e[p],this.switchfn(a,o,this.fNcase(t[p].trim())));for(p=0;p<l.length;p++){var u=l[p];if("accordion"==c&&null==u._state){if(!u.querySelector("lyte-accordion-body")){o?u.classList.add(d):u.classList.remove(d);continue}u._state=u.classList.contains("lyteAccordionActive")}else if("tree"==c){null==u._state&&(u._state=u.classList.contains("lyteIconOpened"));continue}u.querySelectorAll(s.target||s.search).length==u.querySelectorAll("."+d).length?u.classList.add(d):u.classList.remove(d)}if(c){var h={accordion:"accfilter",tree:"treefilter",duallistbox:"listboxfilter"};h[c]&&$L.fastdom.measure(this[h[c]].bind(this,r,n,o,i&&"clear"==i.type))}this.getMethods("onAfterSearch")&&this.executeMethod("onAfterSearch",r,i,this.$node)},listboxfilter:function(t,e,a,o){for(var l=this.data.ltPropQuerySelector,i=$L(this.getScope(l.scope)),n=t.length,r=[],s=0;s<n;s++){var d=$L(t[s]).closest(".lyteListBoxLeftWrap").parent().closest(".lyteListBoxLeftWrap",i);if(d.length){if(d.hasClass("lyteSearchHidden")){var c=d.find(l.search).get(0),p=e.indexOf(c);-1!=p&&(t.push(c),e.splice(p,1),n++,d.removeClass("lyteSearchHidden"))}-1==r.indexOf(d.get(0))&&r.push(d.get(0))}}r.forEach((function(t){var e=$L(t);e.children(".lyteListboxParentElementClose").length&&e.find("lyte-lb-collapse").get(0).click()}))},accfilter:function(t,e,a,o){for(var l=$L(this.getScope(this.data.ltPropQuerySelector.scope)),i="lyte-accordion-item",n="lyteAccordionActive",r=0;r<t.length;r++){for(var s=$L(t[r]).closest(i,l),d=0;d<e.length;d++){var c=$L(e[d]).closest(i,l);s[0]!=c[0]||(Lyte.arrayUtils(e,"removeAt",d),d--)}if(t[r+1]){c=$L(t[r+1]).closest(i,l);s[0]==c[0]&&(Lyte.arrayUtils(t,"removeAt",r+1),r--)}}$L.fastdom.mutate(function(){for(var r=l.get(0).ltProp("exclusive"),s=!a&&this.data.ltPropMaintainState,d=0;d<t.length;d++){var c=!1;if(c=!(u=$L(t[d]).closest(i)).hasClass(n),s&&(null!=u[0]._state?(c=!c&&!u[0]._state,o&&delete u[0]._state):c=!c),c){if(u.click(),r)return}else if(r){if(s)continue;return}}for(var p=0;p<e.length;p++){var u=$L(e[p]).closest(i);o?!u[0]._state&&u.hasClass(n)&&u.click():u.hasClass(n)&&u.click()}}.bind(this))},treeinremove:function(t){for(var e=0;e<t.length;e++)if(t[e+1]){var a=this.closest(t[e],".lyteTreeBodyDiv")[0],o=this.closest(t[e+1],".lyteTreeBodyDiv")[0];a.contains(o)?Lyte.arrayUtils(t,"removeAt",e+1):o.contains(a)&&(Lyte.arrayUtils(t,"removeAt",e),e--)}},closest:function(t,e){return t.closest?$L(t.closest(e)):$L(t).closest(e)},treefilter:function(t,e,a,o){for(var l=this.data,i=$L(this.getScope(l.ltPropQuerySelector.scope)).get(0),n=t.length,r=e.length,s=".lyteTreeBodyDiv",d="lyteSearchHidden",c=0;c<n;c++)for(var p=(f=this.closest(t[c],s)).get(0),u=0;u<r;u++){var h=this.closest(e[u],s),m=h.get(0);(p.contains(m)||m.contains(p))&&(l.ltPropIgnoreChildren?h.removeClass(d):h.addClass(d),e.splice(u,1),u--,r--)}for(c=0;c<n;c++){var f=t[c];this.removeClse(f,i),a&&i.openRecursive(this.closest(f,"lyte-tree-body").get(0))}a||l.ltPropDontHideOnEmpty?e.forEach(function(t){this.closest(t,s).addClass(d)}.bind(this)):this.hiderecurse($L("lyte-yield:not(.noChildClass) lyte-tree-icon",i),o,i),this.last_tree_element(t,e,i)},last_tree_element:function(t,e,a){var o="lyteTreeBodyDiv",l="lyteSearchHidden",i=function(t){var e=$L(t).closest("."+o,a),n="addClass";e.length&&((e.hasClass(l)||e.next("."+o+":not(."+l+")").length)&&(n="removeClass"),e[n]("lyteTreeBodyDivLastVisibleElem"),i(e.parent()))};t.concat(e).forEach(i)},removeClse:function(t,e){var a=$L(t).closest(".lyteSearchHidden",e);a.length&&(a.removeClass("lyteSearchHidden"),this.removeClse(t,e))},hiderecurse:function(t,e,a){for(var o=t.length-1;o>=0;o--){var l=t.eq(o),i=l.hasClass("lyteIconOpened"),n=l[0]._state,r=l.closest("lyte-tree-body").get(0),s="";e&&null!=n?n&&!i?s="openTree":!n&&i&&(s="closeTree"):i&&(s="closeTree"),s&&setTimeout(a[s].bind(a,r),20),delete l[0]._state}},additionalHand:function(t,e){var a=this.data.ltPropComponent;if(e){if("dropdown"==a){var o=$L(t).closest("lyte-drop-box")[0];o&&o.classList.contains("lyteDropdownHidden")&&(o.origindd?o.origindd.toggle():$L(o).closest("lyte-dropdown").get(0).toggle())}t.classList.remove("lyteSearchHidden")}else if("tree"!=a){if(t.classList.contains("lyteSearchHidden"))return;t.classList.add("lyteSearchHidden")}},pressFunc:function(t,e){if(!this.getMethods("onBeforeSearch")||0!=this.executeMethod("onBeforeSearch",e,this))if(this.data.ltPropMultipleSearch)this.multi_search(t,e);else{var a,o=[],l=[],i=[],n=this.data.ltPropQuerySelector,r=this.data.ltPropDiacritic,s="string"==typeof n.scope?document.querySelector(n.scope.trim()):n.scope;if(s=this.getScope(s),n.search&&(l=s.querySelectorAll(n.search.trim())),i=n.target?s.querySelectorAll(n.target.trim()):l,n.search)for(var d=0;d<l.length;d++){var c=l[d].textContent;r&&(c=_lyteUiUtils.convert_diacritics(c)),o[d]=c}else{var p=this.searchList.call(this,s);o=p[0],l=(i=p[1]).slice()}r&&(t=_lyteUiUtils.convert_diacritics(t)),a=n.related&&(n.search||n.target)?a=s.querySelectorAll(n.related):[],this.filteringArray.call(this,o,i,t,l,e,a,n.label),this._prevVal=t}},getScope:function(t){return t=this.getMethods("dynamicScope")?this.executeMethod("dynamicScope",this.$node):t,this.data.ltPropCheckFromParent&&(t=this.$node.parentNode),t}}),_lyteUiUtils.radio||(_lyteUiUtils.radio={}),Lyte.Component.register("lyte-radiobutton",{_template:'<template tag-name="lyte-radiobutton"> <template is="switch" value="{{ltPropType}}"><template case="default"></template><template case="primary"></template><template case="secondary"> <label class="{{radioclass}}" onmouseup="{{action(\'mup\',event)}}"> <input aria-labelledby="{{randomId}}" onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" data-tabindex="{{ltPropDataTabindex}}" class="lyteHide" onclick="{{action(\'valueChanged\',event)}}" disabled="{{expHandlers(ltPropDisabled,\'||\',ltPropReadOnly)}}" checked="{{ltPropChecked}}"> <span class="{{ltPropClass}}"> <span class="lyteRadioCheck"> </span> </span> <span class="{{ltPropLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template><template case="switch"> <label class="" onmouseup="{{action(\'mup\',event)}}"> <input aria-labelledby="{{randomId}}" onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" data-tabindex="{{ltPropDataTabindex}}" checked="{{ltPropChecked}}" disabled="{{expHandlers(ltPropDisabled,\'||\',ltPropReadonly)}}" class="lyteHide on-off-sw" onclick="{{action(\'valueChanged\',event)}}"> <span class="{{ltPropClass}}"> <span class="on-btn"></span> </span> <span class="{{ltPropLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template><template case="slider"> <label class="lyteRadioSliderLabel" onmouseup="{{action(\'mup\',event)}}"> <input aria-labelledby="{{randomId}}" onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" id="{{ltPropId}}" name="{{ltPropName}}" data-tabindex="{{ltPropDataTabindex}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{expHandlers(ltPropDisabled,\'||\',ltPropReadonly)}}" class="lyteHide" onclick="{{action(\'valueChanged\',event)}}"> <span class="{{ltPropClass}}"> <span class="{{ltPropLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label> </template><template case="checkbox"> <label class="{{radioclass}}" onmouseup="{{action(\'mup\',event)}}"> <input aria-labelledby="{{randomId}}" onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" data-tabindex="{{ltPropDataTabindex}}" class="lyteHide" onclick="{{action(\'valueChanged\',event)}}" disabled="{{expHandlers(ltPropDisabled,\'||\',ltPropReadOnly)}}" checked="{{ltPropChecked}}"> <span class="{{ltPropClass}}"> <span class="lyteRadioCheck"> </span> </span> <span class="{{ltPropLabelClass}}" onclick="{{action(\'checkboxClick\',this,event)}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[],additional:{next:"primary"}},primary:{dynamicNodes:[],additional:{next:"secondary"}},secondary:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},checkbox:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropType","ltPropName","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropValue","ltPropFireOnInit","ltPropLabelClass","ltPropClass","ltPropYield","ltPropAriaRadio","ltPropFocus","ltPropPreventFocus","lyteUnbound","ltPropReadOnly","ltPropDataTabindex","ltPropKeyboardNavigation"],data:function(){return{ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","type","default")}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropFireOnInit:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","fireOnInit",!1)}),ltPropLabelClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","labelClass","")}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","class","")}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAriaRadio:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","ariaRadio",{})}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropReadOnly:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:""}),ltPropKeyboardNavigation:Lyte.attr("boolean",{default:!0})}},ariaObserver:function(t){var e=t.oldValue,a=t.newValue;this.addAriaValues(e,a)}.observes("ltPropAriaRadio"),getFromCache:function(t){return(_lyteUiUtils.radio[this.getData("ltPropName")||""]||{})[t]},setInCache:function(t,e){var a=_lyteUiUtils.radio[this.getData("ltPropName")||""];a&&(a[t]=e)},didDestroy:function(){this.destroyCache(),delete this.$node.focus,delete this.$node.blur,delete this.$node.click},destroyCache:function(){this.getData("ltPropName");var t=this.getData("ltPropValue");this.getFromCache("prev")===t&&this.setInCache("prev",void 0),this.getFromCache("node")===this.$node.querySelector("input")&&this.setInCache("node",void 0);var e=(this.getFromCache("peers")||[]).indexOf(this.$node);~e&&this.getFromCache("peers").splice(e,1)},changeStyle:function(){this.changeStyleFunction()}.observes("ltPropType"),changeStyleFunction:function(){var t=this.getData("ltPropType"),e=(this.getData("ltPropChecked"),this.getData("ltPropClass")),a=this.getData("ltPropLabelClass");-1===t.indexOf("slider")&&-1===t.indexOf("switch")&&-1===t.indexOf("default")&&-1===t.indexOf("primary")&&-1===t.indexOf("secondary")&&-1===t.indexOf("checkbox")&&this.setData("ltPropType","default"),-1!==t.indexOf("default")?(this.setData("radioclass","lyteRadioBtn lyteDefault"),this.setData("ltPropClass",e||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("primary")?(this.setData("radioclass","lyteRadioBtn lytePrimary"),this.setData("ltPropClass",e||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("secondary")?(this.setData("radioclass","lyteRadioBtn lyteSecondary"),this.setData("ltPropClass",e||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("switch")?(this.setData("ltPropClass",e||"lyteRadioSwitch"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("slider")?(this.setData("ltPropClass",e||"lyteRadioSlider"),this.setData("ltPropLabelClass",a||"lyteRadioSliderText")):-1!==t.indexOf("checkbox")&&(this.setData("ltPropClass",e||"lyteRadioCheckbox"),this.setData("ltPropLabelClass",a||"lyteRadioCheckboxLabel"))},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteRadioDisabled"):this.$node.classList.remove("lyteRadioDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),init:function(){this.changeStyleFunction(),this.setRandomId()},initCache:function(){var t=this.getData("ltPropName");t&&(_lyteUiUtils.radio[t]||(_lyteUiUtils.radio[t]={}),_lyteUiUtils.radio[t].peers||(_lyteUiUtils.radio[t].peers=[]),_lyteUiUtils.radio[t].peers.push(this.$node))},nameObserver:function(){this.initCache()}.observes("ltPropName"),setRandomId:function(){this.setData("randomId","lyte-radiobutton-label-"+_lyteUiUtils.rbuttonId++)},didConnect:function(){this.warnUsers();var t=this,e=this.getData("ltPropAriaRadio"),a=this.getData("ltPropDataTabindex");this.$node.setAttribute("data-tabindex",a),this.initCache(),this.reduceOpacity(),this.$node.click=function(){var e=new Event("click",{bubbles:!0,cancelable:!0}),a=t.$node,o=a.ltProp("checked");a.ltProp("disabled")||(a.component.clickFn=!0,o||(a._fR?(a.component.resetValues(),a.component.checkFR(a)):a.ltProp("checked",!0)),a.component.clickFn=!1,a.dispatchEvent(e))},this.$node.focus=function(){var e=t.$node,a=e.querySelector("input");e.ltProp("disabled")||a.focus()},this.$node.blur=function(){var e=t.$node,a=e.querySelector("input");e.ltProp("disabled")||a.blur()},this.callMethodsOnInit(!0),this.addAriaValues({},e)},warnUsers:function(){var t=this.getData("ltPropName")||"",e=this.getData("ltPropValue")||"";t||console.warn("lt-prop-name attribute not present in radiobutton. It is required",this.$node),e||console.warn("lt-prop-value attribute not present in radiobutton. It is required",this.$node)},addAriaValues:function(t,e){var a=this.getRadioWidget();_lyteUiUtils.setAttribute(a,e,t)},getRadioWidget:function(){return this.$node.querySelector("input")},check:function(t,e){this.getMethods("onChecked")&&this.executeMethod("onChecked",t,e,this.eventType())},uncheck:function(t,e){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",t,e,this.eventType())},beforeCheck:function(t,e){if(this.getMethods("onBeforeChecked"))return this.executeMethod("onBeforeChecked",t,e,this.eventType())},beforeUncheck:function(t,e){if(this.getMethods("onBeforeUnchecked"))return this.executeMethod("onBeforeUnchecked",t,e,this.eventType())},onchanged:function(t,e){this.getMethods("onChanged")&&this.executeMethod("onChanged",t,e,this.eventType())},checkCurrentRadio:function(){this.eveType="key",this.setData("ltPropChecked",!0),this.eveType=""},checkNextRadio:function(){var t=this.extractAllRadios(),e=this.getCheckableRadio(t,1);-1!==e&&(t[e].component.eveType="key",t[e].ltProp("checked",!0),t[e].component.eveType="")},checkPreviousRadio:function(){var t=this.extractAllRadios(),e=this.getCheckableRadio(t,-1);-1!==e&&(t[e].component.eveType="key",t[e].ltProp("checked",!0),t[e].component.eveType="")},getCheckableRadio:function(t,e){for(var a=this.getIndex(t),o=t.length,l=a,i=0;i<o;i++)if((l+=e)<0?l=o-1:l===o&&(l=0),!t[l].ltProp("disabled")||l===a)return l;return-1},extractAllRadios:function(){for(var t,e=this.getData("ltPropName"),a=0,o=document.querySelectorAll('input[type="radio"][name="'+e+'"]'),l=[];a<o.length;a++){for(t=o[a];t&&"LYTE-RADIOBUTTON"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentNode;if(!t)return;"LYTE-RADIOBUTTON"===t.tagName&&l.push(t)}return l},getIndex:function(t){return t.indexOf(this.$node)},extractRadios:function(){this.getData("ltPropName");for(var t,e=0,a=this.getFromCache("peers")||[];e<a.length;e++)if((t=a[e]).ltProp("checked")&&t!=this.$node)return t},changeChecks:function(t){this.getData("ltPropName");var e,a=this.extractRadios(),o=(a&&a.querySelector("input"),a&&a.component),l=this.$node.querySelector("input");if(!t.newValue||!t.oldValue)if(t.newValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!1),a&&(e=this.beforeUncheck(l,this)),!1===e)return void this.revertState(a,this.$node);if(!1===this.beforeCheck(l,this))return void this.revertState(a,this.$node);a&&(o.setData("prevent",!0),a.ltProp("checked",!1),o.setData("prevent",!1),this.uncheck(l,this)),this.setData("ltPropChecked",!0),this.setData("prevent",!1),this.check(l,this),this.onchanged(l,this)}else if(!t.newValue&&t.oldValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!0),!1===(e=this.beforeUncheck(l,this)))return void this.revertState(this.$node,{});this.setData("ltPropChecked",!1),this.uncheck(l,this),this.onchanged(l,this),this.setData("prevent",!1)}},change:function(t){this.getData("ltPropName");var e=this.getCheckedInput();this.getData("onChange")?t.newValue?this.check(e,this):this.uncheck(e,this.getData("second")):this.changeChecks(t)},getCheckedInput:function(){this.getData("ltPropName");for(var t,e=this.getFromCache("peers")||[],a=0;a<e.length;a++)if((t=e[a].querySelector("input")).matches(":checked"))return t},resetValues:function(){this.setInCache("prev",void 0),this.setInCache("node",void 0)},valueChanged:function(t){this.fireCallbacks(t)}.observes("ltPropChecked"),fireCallbacks:function(t){var e=t.oldValue,a=t.newValue,o=this.getData("ltPropPreventFocus");e&&!a&&this.resetValues(),this.getData("prevent")||(a&&!o&&this.$node.focus(),this.change(t))},focusRadioButton:function(){this.getData("ltPropFocus")&&this.$node.focus(),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),getParentRadio:function(t){for(;t&&"LYTE-RADIOBUTTON"!==t.tagName;)t=t.parentNode;return t},revertState:function(t,e){var a=(t||{}).component,o=(e||{}).component;a&&(a.setData("prevent",!0),a.setData("ltPropChecked",!0),t.querySelector("input").checked=!0,a.setData("prevent",!1)),o&&(o.setData("prevent",!0),o.setData("ltPropChecked",!1),e.querySelector("input").checked=!1,o.setData("prevent",!1))},callMethodsOnInit:function(){var t=this.getData("ltPropFireOnInit"),e=this.getData("ltPropChecked");if(t&&e){var a=this.$node.querySelector("input");a.getAttribute("value");this.beforeCheck(a,this),this.check(a,this),this.onchanged(a,this)}},checkFR:function(t){t.component.setData("ltPropChecked",!0),t.querySelector("input").checked=!0,t.component.fireCallbacks({oldValue:!1,newValue:!0})},uncheckFR:function(t){t.component.setData("ltPropChecked",!1),t.querySelector("input").checked=!1,t.component.fireCallbacks({oldValue:!0,newValue:!1})},eventType:function(){var t=this.clicked||this.clickFn,e=this.eveType;return t?"click":e||"script"},revertToPreviousState:function(){var t=this.getFromCache("node"),e=this.getParentRadio(t),a=this.$node;this.revertState(e,a),this.setInCache("node",void 0),this.clicked=!1},actions:{preventPropagation:function(){32===event.keyCode&&(this.preventClick=!0)},mup:function(t){var e=this.getData("ltPropName"),a=document.querySelector('input[type="radio"][name="'+e+'"]:checked');this.setData("shouldCallUnChecked",!1),a&&(this.setInCache("prev",a.getAttribute("value")),this.setInCache("node",a),this.setData("shouldCallUnChecked",!0));var o=this.$node.querySelector("input"),l=o.checked;if(!o.disabled&&!l){if(this.clicked=!0,this.getData("shouldCallUnChecked")&&!1===this.beforeUncheck(o,this))return this.setData("preventStateChange",!0),void(this.clicked=!1);if(!1===this.beforeCheck(o,this))return this.setData("preventStateChange",!0),void(this.clicked=!1)}},checkboxClick:function(t,e){$L(t).addClass("lyteCheckboxActive")},valueChanged:function(t){var e=t.target,a=e.getAttribute("value"),o=this.getFromCache("prev"),l=this.getFromCache("node"),i=this.getData("preventStateChange"),n=l&&l.parentElement.parentElement.component;if(t.stopPropagation(),this.preventClick)this.preventClick=!1;else if(a!==o){if(i)return this.setData("preventStateChange",!1),void this.revertToPreviousState();if(l){for(;"LYTE-RADIOBUTTON"!==l.tagName;)l=l.parentNode;n.setData("onChange",!0),n.setData("second",this),l._fR?this.uncheckFR(l):l.ltProp("checked",!1),n.setData("second",void 0),n.setData("onChange",!1)}(l=this.getFromCache("node"))&&this.setInCache("node",void 0),this.setData("onChange",!0),this.$node._fR?this.checkFR(this.$node):this.setData("ltPropChecked",!0),this.setData("onChange",!1),this.onchanged(e,this),this.clicked=!1}}}}),_lyteUiUtils.lyteRadioBtnEvtAdded||(document.addEventListener("keydown",(function(t){if(document.contains(t.target)){var e,a,o=t.keyCode;if(37===o||38===o||39===o||40===o||32===o){if("LYTE-RADIOBUTTON-GROUP"===(e=document.activeElement).tagName){if(!(e=e.component.getCurrentBtn()).ltProp("checked"))return a=e.component,t.preventDefault(),void(37===o||38===o?a.checkPreviousRadio():a.checkCurrentRadio())}else if("INPUT"!==e.tagName)return;for(;e&&"LYTE-RADIOBUTTON"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentNode;if(!e)return;if("LYTE-RADIOBUTTON"===e.tagName){if(a=e.component,t.preventDefault(),!a.getData("ltPropKeyboardNavigation"))return;switch(o){case 37:case 38:a.checkPreviousRadio();break;case 39:case 40:a.checkNextRadio();break;case 32:a.checkCurrentRadio()}}}}})),_lyteUiUtils.lyteRadioBtnEvtAdded=!0),function(t){if(t.$L){var e={"=":0,"+":1,"-":1,"/":2,"*":2,"~":6,N:5,"^":5,E:4,s:7,c:7,t:7,l:7,S:7,C:7,T:7,L:7,i:7,o:7,a:7,I:7,O:7,A:7,G:7,Q:7,"%":3,"!":3};function a(t){return!!t.match(/^[+|\-|/|*|^|~|N|s|c|t|l|S|C|T|!|%|(|L|)|i|o|a|I|O|A|E|G|Q]+$/)}function o(t){return!!t.match(/^[s|c|t|l|S|C|T|(|L|i|o|a|I|O|A|Q|~]+$/)}function l(t){var e=function(t){var e=String.fromCharCode(parseInt("221A",16)),a=String.fromCharCode(parseInt("03C0",16)),o=new RegExp(a,"g");return t=t.replace(o,"p"),o=new RegExp(e,"g"),t.replace(o,"N")}(t).trim(),a={"\\s+":" ",sqrt:"Q",logy:"G",arcsinh:"I",arccosh:"O",arctanh:"A",arcsin:"i",arccos:"o",arctan:"a",log:"l",sinh:"S",cosh:"C",tanh:"T",sin:"s",cos:"c",tan:"t",Rand:"R",ln:"L"};return Object.keys(a).forEach((t=>{e=e.replace(t,a[t])})),e}$L.evaluate=function(t,i){var n=l(t),r=function(t){return t.split(/([0-9.]+|\(|\)|\+|\-|\/|\*|\^|~|N|s|c|t|l|S|C|T|!|%|L|i|o|a|I|O|A|G|E|p|R|e|Q)/g).filter((function(t){return""!=t}))}(n);if(0==t.length)return null;if(r.length>=2&&!r[r.length-1].match(/[!|%|^]/)&&a(r[r.length-1])&&r[r.length-2].match(/[0-9!pe%)]/))n=(r=(r=t.split(/(p|Rand|e|arcsinh\(|arccosh\(|arctanh\(|arcsin\(|ln\(|arccos\(|arctan\(|sinh\(|cosh\(|tanh\(|sin\(|cos\(|tan\(|logy\(|log\(|sqrt\(|N\(|\(|\)|\+|\-|\|*|\^|!|%)/g).filter((function(t){return""!=t}))).splice(0,r.length-1)).join("");else if(r.length>=2&&!r[r.length-1].match(/[!|%]/)&&a(r[r.length-1]))return null;return n=function(t){var e,a,i="";if(e=(t=l(t)).split("(").length,(a=t.split(")").length)>e)return null;for(var n=0;n<e-a;n++)t+=")";for(n=0;n<t.length;n++)n>0&&o(t[n])&&(")"==t[n-1]||t[n-1].match(/^[\d|\.|!|%|p|R|e]$/))&&(i+="*"),(0===n||n>0&&!t[n-1].match(/^[\d|\.|%|!]$/))&&"-"===t[n]&&t[n+1]&&(t[n+1].match(/^[\d|\.]$/)||"R"===t[n+1]||"e"===t[n+1]||"p"===t[n+1]||"("===t[n+1]||o(t[n+1]))?i+="~":(0===n||n>0&&"("===t[n-1])&&"+"===t[n]&&t[n+1]&&(t[n+1].match(/^[\d|\.]$/)||"R"===t[n+1]||"e"===t[n+1]||"p"===t[n+1]||"("===t[n+1])?i+="":n>0&&(t[n-1].match(/^[\d|\.]$/)||")"===t[n-1]||"R"===t[n-1]||"e"===t[n-1]||"p"===t[n-1])&&"p"===t[n]||n>0&&(t[n-1].match(/^[\d|\.]$/)||")"===t[n-1]||"p"===t[n-1]||"e"===t[n-1]||"R"===t[n-1])&&"R"===t[n]||n>0&&(t[n-1].match(/^[\d|\.]$/)||")"===t[n-1]||"p"===t[n-1]||"R"===t[n-1]||"e"===t[n-1])&&"e"===t[n]||n>0&&"%"===t[n-1]&&(t[n].match(/^[\d|\.]$/)||"p"===t[n]||"R"===t[n]||"e"===t[n])||n>0&&"!"===t[n-1]&&(t[n].match(/^[\d|\.]$/)||"p"===t[n]||"R"===t[n]||"e"===t[n])||n>0&&(")"===t[n-1]||"p"===t[n-1]||"R"===t[n-1]||"e"===t[n-1])&&t[n].match(/^[\d|\.]$/)?i=i+"*"+t[n]:i+=t[n];return i}(n),null!=n&&(n=function(t){for(var e=t.split(/([0-9.]+|\(|\)|\+|\-|\/|\*|\^|~|N|s|c|t|l|S|C|T|!|%|L|i|o|a|I|O|A|G|E|p|R|e|Q)/g).filter((function(t){return""!=t})),l=0;l<e.length;l++){if(l<e.length-1&&("p"===e[l]||"R"===e[l]||"e"===e[l])&&!a(e[l+1]))return null;if(0==l&&!e[0].match(/[0-9a-zA-Zpe(.~]/))return null;if(0===l&&"G"===e[0])return null;if(l<e.length-1&&!e[l].match(/[(|)|%|!]/)&&!e[l+1].match(/[(]/)&&a(e[l])&&!o(e[l])&&a(e[l+1])&&!o(e[l+1]))return null;if(l<e.length-1&&"!"!==e[l]&&e[l+1].match(/[E]/))return null;if(l<e.length-1&&e[l].match(/[(]/)&&a(e[l+1])&&!o(e[l+1]))return null;if(l<e.length-1&&o(e[l])&&a(e[l+1])&&!o(e[l+1]))return null}return e}(n)),null!=n&&(n=function(t){var o=[],l=[],i=0;if(1===t.length)return t;for(var n=0;n<t.length;n++){var r=t[n];if(a(r))if("("===r)l.push(r);else if(")"===r){var s;do{"("!==(s=l[l.length-1][0])&&(o[i]=l[l.length-1],i++),l.pop()}while("("!==s)}else{for(;0!==l.length&&e[l[l.length-1]+""]>=e[r+""];)o[i]=l.pop(),i++;l.push(r)}else o[i]=r,i++}for(;0!=l.length;)o[i]=l.pop(),i++;return o}(n)),null!=n&&(n=function(t,e){for(var o,l=[],i=Math.PI,n=0;n<t.length;n++){var r=t[n];if("p"===r)l.push(Math.PI);else if("e"===r)l.push(Math.exp(1));else{if(!a(r)&&!r.match(/^(\d*\.)?\d+$/))return"Error";if(a(r)){if(0===l.length)return"Error";var s=l.pop();switch(r){case"~":o=-s;break;case"s":o=e||Math.abs(s)!==i?Math.sin(s*(e?i/180:1))+"":"0";break;case"c":o=Math.cos(s*(e?i/180:1))+"";break;case"t":o=e||Math.abs(s)!==i?Math.tan(s*(e?i/180:1))+"":"0";break;case"%":o=s/100;break;case"!":if(!(s>=0&&parseInt(s)===s))return"NaN";o=factorial(Math.round(+s));break;case"l":o=Math.log(s)/Math.log(10);break;case"L":o=Math.log(s);break;case"S":o=(Math.pow(Math.E,s)-Math.pow(Math.E,-1*s))/2;break;case"C":o=(Math.pow(Math.E,s)+Math.pow(Math.E,-1*s))/2;break;case"T":var d=Math.pow(Math.E,s),c=Math.pow(Math.E,-1*s);o=d==1/0?1:c==1/0?-1:(d-c)/(d+c);break;case"i":o=Math.asin(s)*(e?180/i:1);break;case"o":o=Math.acos(s)*(e?180/i:1);break;case"a":o=Math.atan(s)*(e?180/i:1);break;case"I":o=Math.log(+s+Math.sqrt(1+Math.pow(s,2)));break;case"O":o=2*Math.log(Math.sqrt((+s+1)/2)+Math.sqrt((+s-1)/2));break;case"A":o=(Math.log(+s+1)-Math.log(1-s))/2;break;case"Q":o=Math.pow(s,.5)}if(0!==l.length){var p=l[l.length-1];switch(r){case"+":o=parseFloat(p)+parseFloat(s),l.pop();break;case"-":o=p-s,l.pop();break;case"*":o=p*s,l.pop();break;case"/":if(0==s)return"NaN";o=p/s,l.pop();break;case"^":o=Math.pow(p,s),l.pop();break;case"N":o=Math.pow(s,1/p),l.pop();break;case"E":o=p*Math.pow(10,s),l.pop();break;case"G":o=Math.log(s)/Math.log(p),l.pop()}}l.push(o)}else l.push(parseFloat(r))}}return l.pop()+""}(n,i)),n}}}(window);
