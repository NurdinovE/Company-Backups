var CustomView={};function init(e,t,a,i){if("quickView"!==t&&$("html, body").animate({scrollTop:0},"0"),returnJson){i&&!returnJson.record_actions&&(returnJson.record_actions=detailView.lyte_headerDataHolder.detailview_buttons?objectUtils.cloneObject(detailView.lyte_headerDataHolder.detailview_buttons):{},returnJson.business_card_meta=detailView.lyte_headerDataHolder.business_card,returnJson.custom_buttons=detailView.lyte_headerDataHolder.custom_buttons,returnJson.dv_layoutId=detailView.lyte_headerDataHolder.dv_layoutId,returnJson.zia_insights=detailView.lyte_headerDataHolder.zia_insights,returnJson.associated_kiosks=detailView.lyte_headerDataHolder.associated_kiosks),0!==$("#leftPanel").length&&(detailView.populateTagsData(returnJson),detailView.populateReviewProcessInfo(returnJson),returnJson.record_actions&&returnJson.business_card_meta&&detailView.renderHeader()),detailView.createTemplate(returnJson);returnJson.entityMapJson&&returnJson.entityMapJson.CONTACTID;if(returnJson.Calls&&returnJson.entMetaData&&returnJson.entMetaData.phoneNo&&!isNewCallView){var l=$("#unknownEntityContainer");$("#headervalue_CONTACTID").html(l.html());var n=l.find(".ctiapi_unknown_phone_noActivity");n.addClass("mR10"),n.removeClass("fL"),$("#value_CONTACTID").html(l.html()),$("#unknownEntityContainer").remove()}detailView.pageRefreshHandlingForLayoutUpdate()}populateTimeVal(),callTimer.reset();var r=$("#pcVersionInfo").length>0?$("#pcVersionInfo").closest("form")[0].name:void 0,s="h12";"HH:mm"===Crm.userDetails.TIME_FORMAT&&(s="h24"),$(".newtimefrmt").addClass(s);var o,d,m=-1;ajaxback=!0,itsonview=!1,itsonedit=!1,dtPtn=getElm(r,"dtPtn")?getElm(r,"dtPtn").value:null!=typeof Crm.userDetails.DATE_PATTERN?Crm.userDetails.DATE_PATTERN:"","HH:mm"!==Crm.userDetails.TIME_FORMAT&&$(".ampmSpan").show(),rowCnt=1;var c=document.getElementById("aclayer");c&&($("#aclayer").empty(),c.style.display="none");var u="";if(a?u=a:getElm(r,"property(module)")?u=getElm(r,"property(module)").value:getElm(r,"module")?u=getElm(r,"module").value:null!=getObj("module")&&(u=getObj("module").value),(crmTab.isZBCustomModule(u)||crmTab.isZSCustomModule(u))&&(ZInvoice.commentsArray=[]),getObj("_DIALOG_LAYER")&&$("#_DIALOG_LAYER").empty(),"Tasks"==u&&getObj("property(leContModSel)")&&"Contacts"==getObj("property(leContModSel)").value&&getObj("modid")&&""==getObj("modid").value&&0!=$("#modsel option[value='Accounts']").length&&$("#modsel").val("Accounts"),"Calls"==u&&$("input[type='radio'][name='property(leContModSel)']").length>0&&"Contacts"==$("input[type='radio'][name='property(leContModSel)']:checked").val()&&getObj("modid")&&""==getObj("modid").value&&0!=$("#modsel option[value='Accounts']").length&&$("#modsel").val("Accounts"),getObj("dupCheck")&&"clone"==getElm(r,"operation").value&&getElm(r,"property(Email)").focus(),getElm(r,"fieldvalues")){if(getElm(r,"operation")){var p=getElm(r,"operation").value;"edit"!=p&&("Cases"!=u&&"Solutions"!=u||("Cases"==u?(getElm(r,"secHeadSolution Information")&&getElm(r,"secHeadSolution Information").parentNode.removeChild(getElm(r,"secHeadSolution Information")),getElm(r,"secContentSolution Information")&&getElm(r,"secContentSolution Information").parentNode.removeChild(getElm(r,"secContentSolution Information"))):getElm(r,"row2_Description Information")&&getElm(r,"row2_Description Information").parentNode.removeChild(getElm(r,"row2_Description Information")),getElm(r,"secHeadComments Information")&&getElm(r,"secHeadComments Information").parentNode.removeChild(getElm(r,"secHeadComments Information")),getElm(r,"secContentComments Information")&&getElm(r,"secContentComments Information").parentNode.removeChild(getElm(r,"secContentComments Information"))))}var v=JSON.parse(document.getElementsByName("fieldvalues")[0].value);if("Tasks"==u||"Events"==u){var g=v.alertRadio;void 0===g&&(g="")}var h=getElm(r,"rowCount").value;if(priceRowCount=1,h>1){rowCnt=1;for(var y=getProdListBody(),C=0;C<h-1;C++)"PriceBooks"==u?addRange():addRow("newItem",y)}for(var f in v)if(v.hasOwnProperty(f)){var w=$ESAPI.encoder().encodeForHTML(f),b=$ESAPI.encoder().encodeForHTML(v[f]),E=1;if((Ve=getElm(r,"uiType_property("+w+")"))&&(E=Ve.value),"Currency"==w&&getElm(r,"operation")&&""!=b&&getObj("currencyDetails")){var _=getElm(r,"property(Currency)");_&&selectOrAddSelectOption(_,"property(Currency)",b),fillCurrencySymbols(b,"","createoredit")}if("module"==w)if("Leads"==b||"Contacts"==b)if("Calls"==u){var k=document[r].elements["property(leContModSel)"];"Leads"==b?k[1].checked="checked":k[0].checked="checked"}else getElm(r,"property(leContModSel)")&&(document.getElementById("cvEditSave")&&"none"!==document.getElementById("cvEditSave").style.display||(getElm(r,"property(leContModSel)").value=b));else"Calls"===u&&getElm(r,"property(Call Duration)")&&(document.getElementById("property(Call Duration)").value="00:00"),getElm(r,"property(modsel)")&&"Home"!=b&&(getElm(r,"property(modsel)").value=b);if(("module"==w&&"Leads"==b||"leContModSel"==w&&"Leads"==b)&&(getElm(r,"property(modsel)")&&(getElm(r,"property(modsel)").disabled=!0),getElm(r,"property(modname)")&&(getElm(r,"property(modname)").disabled=!0),getElm(r,"modNameImg")&&(getElm(r,"modNameImg").style.visibility="hidden"),"Calls"==u)){var T=document.getElementById("contactNameLabel");document.getElementById("leadNameLabel").style.display="block",T.style.display="none";var I=document.getElementById("leContTopArrow"),D=getElm(r,"leContModSel");document.getElementById("iskanbanview")&&"true"===document.getElementById("iskanbanview").value||(I.style.left=D[1].offsetLeft+"px")}if("secmod"==w&&null!=b&&(getElm(r,"modselId")&&$(getElm(r,"modselId")).empty(),getElm(r,"modnameId")&&$(getElm(r,"modnameId")).empty(),getElm(r,"leContModSelId")&&$(getElm(r,"leContModSelId")).empty(),getElm(r,"leContModNameId")&&$(getElm(r,"leContModNameId")).empty()),"period"==w&&("Events"==u||"Tasks"==u)){getElm(r,b+"1").style.display="block";var M=v["Recurring Activity"];if(M=M.split("*#"),period=M[0],"daily"==period)selradio=M[1],document[r].daily11[selradio-1].checked=!0,getElm(r,"dailyhidden").value=selradio,2==selradio?getElm(r,"daily111").value=M[4]:getElm(r,"daily111").value="";else if("weekly"==period){getElm(r,"weeklyhidden").value=M[4];var S=M[3].split("^^");for(wcnt=0;wcnt<S.length;wcnt++)getElm(r,"day"+S[wcnt]).checked=!0}else"monthly"==period?(selradio=M[1],getElm(r,"monthlyhidden").value=selradio,document[r].monthly11[selradio-1].checked=!0,1==selradio?(getElm(r,"monthly1select").value=M[4],getElm(r,"noMonths1").value=M[5]):(getElm(r,"weeksequence").value=M[4],getElm(r,"weekdays").value=M[5],getElm(r,"noMonths2").value=M[6])):"yearly"==period&&(selradio=M[1],getElm(r,"yearlyhidden").value=selradio,document[r].yearly11[selradio-1].checked=!0,1==selradio?(getElm(r,"yearmonths").value=M[4],getElm(r,"yearlydays1select").value=M[5]):(getElm(r,"weeksequence1").value=M[4],getElm(r,"weekdays1").value=M[5],getElm(r,"yearmonths1").value=M[6]))}if("Events"!=u&&"Tasks"!=u||"edit"!=p||(getElm(r,"recurringspan")?(getElm(r,"property(Recurring Activity)").checked=!0,getElm(r,"recurringDiv").style.display="block","Events"==u?(getElm(r,"property(Start DateTime)").disabled=!0,getElm(r,"property(End DateTime)").disabled=!0):getElm(r,"property(Remind At)")&&(getElm(r,"remTime").className="select",getElm(r,"property(Remind At)").className="hide",getElm(r,"dtPtn_property(Remind At)").className="hide",getElm(r,"reminBefore").className=""),getElm(r,"property(Recurring Activity)").disabled=!0):(getElm(r,"property(Recurring Activity)")&&(getElm(r,"property(Recurring Activity)").disabled=!0),getElm(r,"recurringDiv")&&(getElm(r,"recurringDiv").style.display="none"))),"Events"!==u&&"Calls"!==u||"edit"!==p&&"clone"!==p||"Remind At"!==w&&"Reminder"!==w)if("Tasks"!=u||"edit"!=p&&"clone"!=p||"Remind At"!=w){if("Calls"===u&&"edit"===p&&"Call Status"===w&&!isNewCallView){var O=document.getElementById("call_duration_row");if(null!=O&&null!=O&&(O.style.display=""),"Scheduled"===b||"Overdue"===b){b,$("form[name='"+r+"'] input[data-zcqa='btn_Edit_SaveNewTask_Bottom']").hide(),$("form[name='"+r+"'] input[data-zcqa='btn_EditCall_SaveNewTask']").hide(),$("#Inbound").prop("disabled",!0);var V=getElm(r,"property(Call Start Time)"),A=getElm(r,"whichCallDiv");if($("input:radio[name=whichCall][value='ScheduleCall']").prop("checked",!0),null!=V&&null!=V&&null!=A&&null!=A){var L=$("<div>",{id:"markComplete",name:"markComplete"}),R=$("<input>",{id:"complete",name:"complete",onclick:"Calls.handleScheduledCallComplete();",type:"checkbox"}),P=$("<label>",{class:"newLblrd",for:"complete"}),x=$("<label>").html(I18n.getMsg("crm.label.mark.this.call.complete")),j=$("<table>",{width:"100%"}),N=$("<tr>"),B=$("<td>",{width:"20"}),F=$("<td>",{style:"color:var(--notfoundColor);font-size: var(--crm-extra-medium-font-size);"});$("#iskanbanview").length>0&&"true"===$("#iskanbanview").val()||F.removeAttr("style"),B.append(R).append(P),F.append(x),N.append(B).append(F),L=L.append(j.append(N)),$("#whichCallDiv").after(L)}$("#callTimerDiv,#whichCallDiv,#call_duration_row").hide(),$("[id='property(Call Duration)']").val(""),getObj("remTime")&&jQuery("#remTime").closest("tr").show()}else"Cancelled"===b||"Unattended Dialled"===b?(b,getObj("remTime")&&$("#remTime").closest("tr").hide(),$("#Inbound").prop("disabled",!0),$("#callTimerDiv,#whichCallDiv,#call_duration_row").hide(),$("[id='property(Call Duration)']").val("00:00"),$("[id='property(DurationInMinute)']").val("00"),$("[id='property(DurationInSecond)']").val("00"),$("input[id='property(DurationInMinute)'],input[id='property(DurationInSecond)']").attr("readonly",!0),$("input[name='property(Call Start Time)'],input[name='Call Start TimedateTime'],span[id='Call Start Time_ampmSpan']").attr("readonly",!0)):(b,getObj("remTime")&&jQuery("#remTime").closest("tr").hide(),$("#callTimerDiv,#whichCallDiv").hide(),$("input[id='property(DurationInMinute)'],input[id='property(DurationInSecond)']").attr("readonly",!0),$("input[name='property(Call Start Time)'],input[name='Call Start TimedateTime'],span[id='Call Start Time_ampmSpan']").attr("readonly",!0));if("HH:mm"!==Crm.userDetails.TIME_FORMAT){$(".ampmSpan").show();var H=getElm(r,"property(Call Start Timeampm)"),U=getElm(r,"Call Start Time_ampmSpan");null!=H&&null!=H&&null!=U&&null!=U&&$(U).empty()}}}else""!=trimBoth(b)&&(getElm(r,"remCheckTask").checked=!0,getElm(r,"RemindAtdiv").style.display="block"),"email"==g?(document[r].alertRadio[0].checked=!0,document[r].alertType.value="email"):"popup"==g&&(document[r].alertRadio[1].checked=!0,document[r].alertType.value="popup");else if(getElm(r,"remTime")){("0 days"==trimBoth(b)||"0 weeks"===trimBoth(b))&&(b="0");for(var J=getElm(r,"remTime"),z="NO",K=0;K<J.length;K++)J.options[K].value===b&&(z="YES");if("NO"===z){var W=document.createElement("option");W.value=b,void 0===W.textContent?W.innerText=b:W.textContent=b,J.appendChild(W)}getElm(r,"remTime").value=b,getElm(r,"remCheckTask").checked=!0,"Calls"===u?getObj("remTime")&&jQuery("#remTime").closest("tr").show():getElm(r,"RemindAtdiv").style.display="block","email"==g?(document[r].alertRadio[0].checked=!0,document[r].alertType.value="email"):"popup"==g&&(document[r].alertRadio[1].checked=!0,document[r].alertType.value="popup")}if("CDate"==w&&getElm(r,"startcDate")&&(getElm(r,"startcDate").value=b),"ownerName"==w||"Handler"==w)getElm(r,"handlerName")&&(getElm(r,"handlerName").value=b);else if("ownerId"==w)getElm(r,"handlerId")&&(getElm(r,"handlerId").value=b);else if("rememberDays"==w)m=b;else if("Comments"==w&&("Cases"==u||"Solutions"==u)&&null!=b&&getElm(r,"uiType_property(Comments)")){var q=getElm(r,"uiType_property(Comments)").parentNode;$(q).empty(),q.innerHTML=b+"<input type='hidden' name='property(No of comments)' value=''>"}-1!=w.indexOf("itemDescription")&&(getElm(r,"div_"+w)?getElm(r,"div_"+w).style.visibility="visible":document.getElementById("div_"+w)&&(document.getElementById("div_"+w).style.visibility="visible"),getElm(r,"indicator_"+w)?getElm(r,"indicator_"+w).className="maindownArrow":document.getElementById("indicator_"+w)&&(document.getElementById("indicator_"+w).className="maindownArrow"));var Q=getElm(r,"property("+w+")");if(Q)if("checkbox"==Q.type)"true"==b?(Q.checked=!0,Q.value="on","none"==Q.style.display&&(getElm(r,"ro_property("+w+")").innerHTML="<span class='yes dIB vaM'></span>")):(Q.checked=!1,"none"==Q.style.display&&(getElm(r,"ro_property("+w+")").innerHTML="<span class='no-new dIB vaM'></span>"));else if(Q.length>1&&"radio"==Q[0].type){for(var Y=Q,Z=Y.length,G=0;G<Z;G++)if(b==Y[G].value){Y[G].checked=!0;break}}else if(786===E||14===E||333===E)$("input[name=property("+w+")]").val(b);else if(100==E)if(getElm(r,w)){var X=!1,ee=0,te=new Array,ae=getElm(r,w).value,ie=getElm(r,"comboValue"+ae);if(b.indexOf(";")>-1){var le=b.split(";");for(C=0;C<le.length;C++){for(var ne=0;ne<ie.length;ne++)if(X=!1,le[C]==ie.options[ne].value){ie.options[ne].selected=!0,X=!0;break}X||(te[ee]=le[C],ee+=1)}for(var re="comboValue"+ae,se=0;se<te.length;se++){var oe=document.createElement("OPTION");oe.setAttribute("value",te[se]),oe.innerHTML=te[se],oe.selected=!0,document.getElementById(re).appendChild(oe)}}else ie.value=b}else Q&&(Q.value=b);else if(2==E||26==E){re="property("+w+")";var de=Q;de.value=b,selectOrAddSelectOption(de,re,b)}else{var me="property("+w+")";null==getElm(r,me).value?document.getElementById(me).value=b:getElm(r,me).value=b,36==E&&(b=parseFloat(b)),null==Q.value?document.getElementById("property("+w+")").value=b:Q.value=b}else getElm(r,w)&&((Q=getElm(r,w)).value=b,"SPAN"===Q.tagName&&("AM"!=b&&"PM"!=b||(Q.setAttribute("ampm",b),b=I18n.getMsg(b)),$(Q).empty(),Q.innerHTML=b));if("modus1"==w&&(o=b),"modus2"==w&&(d=b),"leContModSel"==w&&"Leads"==b){var ce=getElm(null,"leContModSel");"Calls"===$('input[name="property(module)"]').val()&&(ce=$("input[id^='leContModSel']")),$("select[name='property(modsel)']").prop("disabled",!0),$("input[name='property(modname)']").prop("disabled",!0),$("#modNameImg").css({visibility:"hidden"}),"select-one"==ce.type&&0==$("select[name='property(leContModSel)'] option[value='"+b+"']").length?($("#leContModSel").append($('<option value="'+b+'" id="toberemoved" dispName="'+v.leContModName+'" idVal="'+v.leContModId+'">'+I18n.getMsg(null!=o?o:v.modus1)+"</option>")),$("#leadCntModLukup").css({visibility:"hidden"}),$("select[name='property(leContModSel)']").val(b)):"radio"==ce[0].type&&(document.getElementById("iskanbanview")&&"true"===document.getElementById("iskanbanview").value?"none"==$("#label"+ce[1].id).css("display")&&($("#label"+ce[1].id).show(),$("#leContModSelSpan").show(),$(ce[1]).attr("dispName",v.leContModName).attr("idVal",v.leContModId).attr("toberemoved","toberemoved"),$("#leadCntModLukup").css({visibility:"hidden"})):"none"==$(ce[1]).css("display")&&($(ce[1]).show(),$("#leContModSelSpan").show(),$("#leContTopArrow").css("margin-left",ce[1].offsetLeft+"px"),$(ce[1]).attr("dispName",v.leContModName).attr("idVal",v.leContModId).attr("toberemoved","toberemoved"),$("#leadCntModLukup").css({visibility:"hidden"})))}"modsel"==w&&0==$("#modsel option[value='"+b+"']").length&&($("#modsel").append($('<option value="'+b+'" id="toberemoved" dispName="'+v.modname+'" idVal="'+v.modid+'">'+I18n.getMsg(null!=d?d:v.modus2)+"</option>")),$("select[name='property(modsel)']").val(b),$("#modNameImg").css({visibility:"hidden"}))}m>-1&&getElm(r,"rememberBlock")&&(getElm(r,"rememberBlock").className="",getElm(r,"property(rememberDays)").value=m)}if(getObj("mapValues")||"undefined"!=typeof returnJson){var ue=null;getObj("id")&&(ue=getObj("id").value),"Activities"===Crm.activityGrp[u]&&(ue=$("#leftPanel").find("#id").val());if(getObj("relatedPageContent")&&!isRelatedListLoaded){if(getObj("messageValue"))var pe=Crm.getCrmBasePath()+"/NewRelatedList.do?action=getAllData&messageValue="+getObj("messageValue").value+"&module="+u+"&id="+detailView.entityId;else pe=Crm.getCrmBasePath()+"/NewRelatedList.do?action=getAllData&module="+u+"&id="+detailView.entityId;var ve,ge;if(detailView.changedBCJson?(ve=detailView.changedBCJson.hidden.cvid,ge=detailView.changedBCJson.recordNum):void 0!==t&&"kanbanview"===t||(ve=getObj("cvid").value,ge=getObj("recordNum").value),"Tasks"===u&&(void 0===t||"kanbanview"!==t)){var he=detailView.changedBCJson.isProjectTask,ye=detailView.entityId;if(ye&&1==he)if($("#rightPanelSelect").is(":visible")){var Ce=new Option(I18n.getMsg("crm.project.integration.title"),'{"id":"'+ye+'","module":"Projects"}');$("#rightPanelSelect").append(Ce),$("#rightPanelSelect").parent().show()}else{var fe=$("#cvlist_"+ye),we=fe.attr("data-params");we||(we=(fe=$("#recordid_"+ye)).attr("data-params")),we=JSON.parse(we);var be=$("#entity_name").val();be.length||(be=I18n.getMsg("Account"));var $e='<option value=\'{"id":"'+we.relid+'", "module":"'+we.setype+"\"}'>"+$ESAPI.encoder().encodeForHTML(be)+'</option><option value=\'{"id":"'+ye+'","module":"Projects"}\'>'+I18n.getMsg("crm.project.integration.title")+"</option>";$("#rightPanelSelect").html($e).parent().show()}}var Ee=document.getElementById("relNEID"),_e="";if(Ee&&/^[0-9]+$/.test(Ee.value)&&(_e="&neid="+Ee.value),pe+="&cvid="+ve+"&recordNum="+ge+"&nav=false"+_e,getObj("parentCurrencyISOCode")&&getObj("parentExchangeRate")&&(pe+="&parentCurrencyISOCode="+getObj("parentCurrencyISOCode").value+"&parentExchangeRate="+getObj("parentExchangeRate").value),getObj("zproject_errorcode")&&""!=getObj("zproject_errorcode").value&&"null"!=getObj("zproject_errorcode").value&&(pe+="&errorcode="+getObj("zproject_errorcode").value),getObj("zproject_not_added_clients")&&""!=getObj("zproject_not_added_clients").value&&"null"!=getObj("zproject_not_added_clients").value&&(pe+="&zproject_not_added_clients="+getObj("zproject_not_added_clients").value),"Potentials"==u){var ke=$("#cntId");ke.length>0&&"null"!==ke.val()&&(pe+="&relCntId="+ke.val())}if(void 0===t||"kanbanview"!==t)if("Events"==u){var Te=$("#eventAttachmentDataDiv").find("tr").first().find("td"),Ie=[];Te.each((function(e){Ie.push($(this).outerWidth())})),Te.each((function(e){var t=$("#eventAttTable").find("td").eq(e);t.css("width",Ie[e]),t.css("max-width",Ie[e])})),transferRelatedDetails(),Crm.userDetails.isRelatedListLyteEnabled&&!Crm.userDetails.CLIENT_ACCOUNT&&$L("#eventsRightPanelAttachDiv").length?(Lyte.Component.render("crm-related-list-view",{module:u,entityId:detailView.entityId},"#eventsRightPanelAttachDiv"),$L("#remainingList").show()):Crm.userDetails.CLIENT_ACCOUNT||bindAttachmentsRelatedList(u,detailView.entityId)}else loadRelatedListNew(pe,onCompleteFnRl,onSuccessFnRl,u,ue,e)}if(isRelatedListLoaded=!1,"undefined"==typeof returnJson){var De=typeof mapValuesVar;if(mapValues_new="undefined"==De?JSON.parse(getObj("mapValues").value):mapValuesVar,getObj("inventoryConversion")&&(-1!=getObj("mapValues").value.indexOf("isConverted")?getObj("inventoryConversion").value="0":getObj("inventoryConversion").value="1"),priceRowCount=1,getObj("rowCount"))if((h=getObj("rowCount").value)>1)if(rowCnt=1,"PriceBooks"==u)for(C=0;C<h-1;C++)addViewRange();else{var Me=getProdListBody();for(C=0;C<h-1;C++)addViewRow(Me)}var Se=mapValues_new;for(var f in mapValues_new)if(mapValues_new.hasOwnProperty(f)){w=f;if("Events"==u&&"Description"===w&&"quickView"!==t)continue;var Oe=f;w=f,b=mapValues_new[f];"Potentials"!=u||"Sales Cycle Duration"!=w&&"Lead Conversion Time"!=w&&"Overall Sales Duration"!=w||(SalesSummaryInfo[w]=b);E=1;var Ve=getObj("uiType_"+w),Ae=getObj("value_"+w);if(Ve)E=parseInt(Ve.value);else if(Ae){var Le=Ae.getAttribute("uitype");Le&&(E=parseInt(Le))}if(2===parseInt(E)&&(b=(b=b.replace(/</g,"&lt;")).replace(/>/g,"&gt;")),100===parseInt(E)&&(b=revertSplChrs(b)),"modus1"==w&&null!=b){var Re=getObj("labelTD_Who Id");Re&&($(Re).empty(),Re.innerHTML=b,!0)}if("modus2"==w)if(null!=b)(lt=getObj("labelTD_What Id"))&&"Events"!=u&&($(lt).empty(),lt.innerHTML=b,!0);w=(w=(w=w.replace("(","____")).replace(")","_____")).replace(".","___");var Pe=getObj("value_"+w),xe=null;if(new RegExp(/^(\d.*)+$/).test(w))xe=document.getElementsByName(w)[0];else"id"!=w.toLowerCase()&&"module"!=w.toLowerCase()&&(xe=getObj(w));if(null==b||!Pe||xe&&"Company"!=w&&"hidden"==xe.type){if(null!=b&&xe)if("hidden"==xe.type)xe.value=b;else try{document.getElementById("cvEditSave")&&"none"!==document.getElementById("cvEditSave").style.display&&("leContModSel"===w||"modsel"===w)||"value_Remind At"===w?"value_Remind At"===w&&(xe.innerHTML=Events.remindersInQuickView(b,Se)):($(xe).empty(),xe.innerHTML=b)}catch(e){}}else{if(36!=E&&32!=E||0!=b&&0!=b||(b=""),98===E){var je=I18n.getMsg("Prepared");null!=b&&(b=parseInt(b),-1!=[1,2,3,4].indexOf(b)?je=I18n.getMsg("Confirmed"):-1==b&&(je=I18n.getMsg("Cancelled"))),$(Pe).attr("statusvalue",b),b=je}else if(t&&"quickView"==t)if(14==E||333==E){getObj(globaltextboxpanid);var Ne=getElemById("labelTD_"+Oe),Be=getElemById("mouseArea__"+Oe);if("Start DateTime"==Oe)Ne.style.display="none",Be.style.display="none";else if("End DateTime"==Oe){var Fe=!1,He=Se["All day"];null!=He&&-1!=He.indexOf(",#;")&&-1==He.indexOf(networkUtils.getImageUrl("yes.gif",ResourceConstants.CRM))&&(He=He.replace(/,#;/g,'"')),$("#value_All day").empty(),getElemById("value_All day").innerHTML=He,"none"==getObj("yes_All day").style.display&&(Fe=!1),"none"==getObj("no_All day").style.display&&(Fe=!0),$(Ne).empty(),Ne.innerHTML=I18n.getMsg("Time"),Be.innerHTML=Events.getDateTimeValForQuickView(new Date(Se["Start DateTime"]),new Date(Se["End DateTime"]),Fe)}}else if(41==E){h=parseInt($("#invCntValHid").val());var Ue=I18n.getMsg("None"),Je=document.createElement("a"),ze="invited cp invNone";h>0&&(Ue=I18n.getMsg("crm.create.inv.cnt.label",[h]),Je.setAttribute("onclick","Events.viewInviteesPop(-2, undefined, 'quickView')"),ze="invited cp");var Ke=document.createElement("div"),We=$(Je).clone()[0];We.setAttribute("onclick","Events.showAddParticipants(undefined, undefined, 'quickView')"),Ke.appendChild(Je),Ke.appendChild(We),$(Je).attr({href:"javascript:;",class:ze}).html(Ue),$(We).attr({class:"viewAdd mlink"}),$(We).html(I18n.getMsg("crm.button.add")+"&nbsp;"),b=Ke.innerHTML;var qe=JSON.parse(trimBoth($("#inviteeStatusJson").val())),Qe=$("#textarea_Participants");if(h>0){var Ye=document.createElement("span"),Ze=document.createElement("span"),Ge=document.createElement("span"),Xe=document.createElement("span"),et=document.createElement("span"),tt=document.createElement("span");Ye.setAttribute("onclick","Events.viewInviteesPop(1, undefined, 'quickView')"),Ze.setAttribute("onclick","Events.viewInviteesPop(2, undefined, 'quickView')"),Ge.setAttribute("onclick","Events.viewInviteesPop(-1, undefined, 'quickView')"),$(Ye).addClass("partLab cP").html(I18n.getMsg("crm.invitation.status.going.label")),$(Ze).addClass("partLab cP").html(I18n.getMsg("crm.quickview.mystatus.maybe")),$(Ge).addClass("partLab cP").html(I18n.getMsg("Invited")),$(Xe).addClass("partVal going").html("("+qe.accept+")"),$(et).addClass("partVal maybe").html("("+qe.maybe+")"),$(tt).addClass("partVal invitedSt").html("("+qe.invited+")"),Qe.css({display:"block"}),Qe.append(Ge),Qe.append(tt),Qe.append(Ye),Qe.append(Xe),Qe.append(Ze),Qe.append(et)}}else if("All day"==Oe)getElemById("labelTD_"+Oe).style.display="none",getElemById("mouseArea__"+Oe).style.display="none";else if("Who Id"==Oe){var at=Events.getQuickViewRelatedToContent(Se),it=getElemById("mouseArea__"+Oe),lt=getObj("labelTD_Who Id");$(it).empty(),it.innerHTML=at.val,$(lt).text(at.label);var nt=$(it).find("a");nt.attr({target:"_blank"}),nt.removeAttr("data-cid")}else"1234"==E||"value_Remind At"==w?b=Events.remindersInQuickView(b,Se):"11"==E&&(b=$ESAPI.encoder().encodeForHTML(b));if($(Pe).empty(),Pe.innerHTML=b,t&&"quickView"==t&&8==E)Pe.innerHTML=$("#ownerName_id").html();else if(33==E)getObj("hiddenValue_"+w)&&getObj("subvalue_"+w)&&(getObj("subvalue_"+w).setAttribute("class","phoneRtl"),getObj("subvalue1_"+w)&&getObj("subvalue1_"+w).setAttribute("class","phoneRtl"),getObj("hiddenValue_"+w).value=getObj("subvalue_"+w).innerHTML);else if(2===E){if(mapValues_new.color_code_enabled_fieldLabel===w){var rt=mapValues_new.colorcode;if(rt&&""!==rt)$('<span class="dIB activitesColor" data-zcqa="colorcode_selectColorComponent" style="background:'+rt+'"></span>').insertBefore(Pe)}}else if(t&&"quickView"===t&&(250===E||"250"===E)){var st="<crm-richtext-component ";st+="cx-prop-from = 'view'",st+="show-more-button = 'false'",st+="cx-prop-value='"+$ESAPI.encoder().encodeForHTML(b)+"'",st+="</crm-richtext-component>",$(Pe).html(st)}}33==E&&getObj("mouseArea__"+w)&&($("#mouseArea__"+w).empty(),getObj("mouseArea__"+w).innerHTML=b)}}var ot=document.location.href;null!=e&&""!=e&&ot.indexOf("ShowEntityInfo")<0&&(ajaxback=!1)}if("PriceBooks"==u&&("create"==p||"edit"==p||"clone"==p?getObj("property(Pricing Model)")?""==getObj("property(Pricing Model)").value&&(getObj("secDivPricing Details").style.display="none"):getObj("secDivPricing Details").style.display="none":getObj("value_Pricing Model")?""!=getObj("value_Pricing Model").innerHTML&&0!=getObj("rowCount").value||(getObj("secDivPricing Details").style.display="none"):getObj("secDivPricing Details")),getObj("dateFields")&&"null"!=getObj("dateFields").value){var dt=getObj("dateFields").value.split("|");for(ne=0;ne<dt.length;ne++){getObj("dtPtn_"+dt[ne])&&("INPUT"!=getObj("dtPtn_"+dt[ne]).nodeName?document.getElementById("iskanbanview")&&"true"===document.getElementById("iskanbanview").value?getObj(dt[ne]).setAttribute("placeholder",document.getElementsByName("dtPtn")[0].value):getObj(dt[ne]).setAttribute("placeholder",getObj("dtPtn").value):getObj("dtPtn_"+dt[ne]).value=getObj("dtPtn").value);var mt=dt[ne].substring(dt[ne].indexOf("(")+1,dt[ne].indexOf(")")),ct=getObj(mt+"dateTime");if(ct){""===ct.value&&(ct.value="01:00");var ut=v[mt+"ampm"],pt=ct.value+(ut?":"+ut:"");ct.setAttribute("time",pt)}}}if(getObj("picklistFields")){var vt=getObj("picklistFields").value;if("null"!=vt){var gt=vt.split(";");for(K=0;K<gt.length-1;K++){var ht=gt[K];fieldDependency(ht,u)}}}if("Events"==u&&handlePrivateEvent(),getObj("searchField")&&"All"!=getObj("searchField").value&&""!=getObj("searchField").value){var yt=getObj("searchField").value;getObj(yt).className="sel"}if(getElemById("searchCategoryDiv")&&(getElemById("searchCategoryDiv").style.display="none"),getObj("feedback_top")&&(getObj("feedback_top").style.display="none"),selectCurrentCV(),!document.getElementById("iskanbanview")||document.getElementById("iskanbanview").value,getLength(SalesSummaryInfo)<1){var Ct=$("#showSalesSummaryAlink");Ct&&Ct.hide()}u&&"Campaigns"==u&&"undefined"!=typeof mapValues&&"Google Adwords"==mapValues.Type&&(getObj("googleicon").style.display="block"),"Calls"===u&&"create"===p&&getObj("remTime")&&jQuery("#remTime").closest("tr").hide(),"Calls"!==u||"create"!==p&&"edit"!==p||!getObj("ownerName")||"ScheduleCall"!==jQuery("input[name=whichCall]:checked").val()&&jQuery("#ownerName").closest("tr").hide(),"Calls"===u&&"ScheduleCall"===jQuery("input[name=whichCall]:checked").val()&&$("input[name='property(Call Start Time)']").attr("onclick","crmCalendar.showCalendar(event,'leftPanel',Events.callDuplicationDateHandler, undefined, 786)"),"undefined"!=typeof returnJson&&returnJson&&returnJson[u]&&("undefined"!=typeof WidgetHandler&&setTimeout((function(){var e={};e.moduleID=CrmWidgets.Utils.GetTabIDFromTabName(u),e.urlModule=u,e.paramsID=detailView.entityId,WidgetHandler.loadWidgets(e)}),10),setTimeout((function(){returnJson&&returnJson[u]&&Crm.addRecentItems(returnJson[u].entityid,u)}),200),detailView.refreshInWms||(Crm.userDetails.isRelatedListLyteEnabled?Lyte.Globals.get("relatedList.refreshed")||(Lyte.Globals.set("relatedList.refreshed",!0),detailView.loadRelatedDetails(u,returnJson[u].entityid)):detailView.loadRelatedDetails(u,returnJson[u].entityid)));try{"Potentials"==u&&null==Crm.userDetails.CLIENT_ACCOUNT&&Crm.userDetails.LICENSE_TYPE_ACTUAL&&["E","A","U","C","Z","D"].contains(Crm.userDetails.LICENSE_TYPE_ACTUAL)&&networkUtils.loadFeatureScripts(["zohocrm_attributions.js"],(function(){Attribution.displayAttributionDiv(detailView.entityId,u)}))}catch(e){murphy.error(e)}}function selectOrAddSelectOption(e,t,a){if("text"!=e.type){for(var i="no",l=(e.length,0);l<e.length;l++)if(e.options[l].value.trim()==a.trim()){e.options[l].selected=!0,i="yes";break}if("no"==i){a.trim().indexOf(":")>0&&(a=a.trim().replace("0:",""));var n=document.createElement("OPTION");n.setAttribute("value",a.trim()),$(n).empty(),n.innerHTML=a.trim(),n.selected=!0,getObj(t).appendChild(n)}}}function bindAttachmentsRelatedList(e,t){if(document.querySelector('crm-related-list-view-header[related-module="Attachments"]'))Lyte.triggerEvent("relatedList",{module:"Attachments"}),refreshFollowDiv();else{var a,i=[],l=store.peekRecord(moduleRecordMapping[e].id,t);l||i.push(store.findRecord(moduleRecordMapping[e].id,t,{approved:"both"}));var n,r=store.peekRecord("module",moduleRecordMapping[e].id).related_lists,s=function(e){for(var t=e.length,a=0;a<t;a++)if("ATTACHMENTSPERSONALITY"===e[a].personality_name)return e[a]};r?n=s(r):i.push(store.findRecord("module",moduleRecordMapping[e].id).related_lists);var o=function(){$("#eventsRightPanelAttachDiv").html(""),Lyte.Component.render("crm-related-list-view-header",{entityId:t,module:e,relatedList:n,record:l,layoutId:a},"#eventsRightPanelAttachDiv")};i.length>0?Promise.all(i).then((function(){l||(l=store.peekRecord(moduleRecordMapping[e].id,t)),a=l.Layout?l.Layout.id:store.peekRecord("module",moduleRecordMapping[e].id).layouts[0].id,r||(r=store.peekRecord("module",moduleRecordMapping[e].id).related_lists,n=s(r)),o()})).catch((function(e){murphy.error(e)})):(a=l.Layout?l.Layout.id:store.peekRecord("module",moduleRecordMapping[e].id).layouts[0].id,o())}}CustomView.maxFav=10,CustomView.selectedFavorites,CustomView.curElem,CustomView.offset,CustomView.divObj,CustomView.timeoutValue,CustomView.curFavoriteNo,CustomView.beingSorted=!1,CustomView.sharedData="",CustomView.folderData="",CustomView.orgTerritoryId="",CustomView.initFavorite=function(){$("#newVListPop").find("li").click((function(){if(!CustomView.beingSorted){var e=$(this),t=$(".SelectedPortal"),a=e.attr("siqportal"),i=e.text();"All Portals"==a?t.text(I18n.getMsg("crm.salesiq.all.accounts")):t.text(i),t.attr("siqportal",a);var l=Lyte.Router.getRouteInstance();"crm.tab.module.begin"===l.transition.target?l.transitionTo("crm.tab.module.custom-view.list","Visits",$("lyte-dropdown[data-zcqa=SelectedOption]")[0].ltProp("selected")):l.refresh()}CustomView.beingSorted=!1}))},CustomView.showVTPortaldd=function(e){var t=$(e),a=parseInt(t.innerHeight())+parseInt(t.offset().top)+2,i=parseInt(t.offset().left),l=$("#vtddId");(l.css({left:i,top:a}),l.toggle(),l.length&&l.is(":visible"))&&($("#PLSearchBox").focus(),$("#PLSearchBox input").focus(),renderingUtils.scrollPrevent("#vtddId"))},CustomView.checkFavoriteMaxLimit=function(){$("#curFavoritesNo").val()>=CustomView.maxFav&&$("#setFavorite").hasClass("emptyStar")&&"true"!==$("#isFavorite").val()&&(alert(I18n.getMsg("crm.alert.favorite.reached.maxlimit",CustomView.maxFav.toString())),$("#setFavorite").prop("checked",!1));var e=$("#setFavorite");if(e.hasClass("selectedStar"))e.removeClass("selectedStar").addClass("emptyStar"),CustomView.selectedFavorites--;else if(e.hasClass("emptyStar")){if(CustomView.curFavoriteNo+CustomView.selectedFavorites>=CustomView.maxFav)return void alert(I18n.getMsg("crm.alert.favorite.reached.maxlimit",CustomView.maxFav.toString()));e.removeClass("emptyStar").addClass("selectedStar"),CustomView.selectedFavorites++}},CustomView.checkOnhoverFavIcon=function(e,t){e=e;"enter"===t?e.addClass("cv_starEnter"):"leave"===t&&e.removeClass("cv_starEnter")},CustomView.deleteCV=function(e,t){var a=store.peekRecord("custom_view",e),i=$L("#customviewname")[0].value,l=moduleRecordMapping[t].api_name;store.deleteRecord("custom_view",e),a.$.save({module:l,ids:e}).then((function(){new crmRequestPool;crmTab.deleteFromCache(t);({})[csrfParamName]=csrfToken,crmui.showMsgBand("success",I18n.getMsg("crm.custom.module.delete.success",I18n.getMsg("crm.label.customview")),2e3),store.unloadAll(moduleRecordMapping[t].id),store.findAll("custom_view",{module:l}).then((function(e){var a=moduleRecordMapping[t].kanban_view?"kanban":moduleRecordMapping[t].chart_view?"chart":moduleRecordMapping[t].timeline_view?"timeline":moduleRecordMapping[t].canvas_view||moduleRecordMapping[t].table_view||moduleRecordMapping[t].card_view?"canvas":"list";if(moduleRecordMapping[t].cvid=e.$.meta.default,"canvas"===a){var i=moduleRecordMapping[t].viewid,l={viewType:"CustomizedView"};moduleRecordMapping[t].card_view?(i=moduleRecordMapping[t].cardid,l.viewType="CardView"):moduleRecordMapping[t].table_view&&(i=moduleRecordMapping[t].tableid,l.viewType="TableView"),Lyte.Router.transitionTo({route:"crm.tab.module.custom-view."+a,dynamicParams:[t,moduleRecordMapping[t].cvid,i],queryParams:l})}else Lyte.Router.transitionTo({route:"crm.tab.module.custom-view."+a,dynamicParams:[t,moduleRecordMapping[t].cvid]})}))}),(function(e){a.$.rollBack();var t=JSON.parse(e.response);if(t){hideAnimatePopup("deletepopup"),renderingUtils.removeFreezeLayer();t.custom_views&&t.custom_views[0].details.associations.resources;var l=Handlebars.templates.deleteFieldWarningPopup();$L("#cadencesCVDeletion").html(l),$L("#delfldhd").html("<crmutil-icon icon-name='notallowed' icon-class='zcicn-notallowed zcicn-f56d6d' class='mR5 mT5'></crmutil-icon>"+I18n.getMsg("rule.cannot.deleted",$ESAPI.encoder().encodeForHTML(i)));var n=$L("#cadencesCVDeletion #delfldbdy");n.addClass("pB0");var r=[Crm.getCrmBasePath()+"/settings/cadences/","cadences"],s=t.custom_views[0].details.associations.resources,o={};s.forEach((function(e){o[e.id]?o[e.id].push(e.name):o[e.id]=[e.name]})),showCFoffectedRecords(o,r[1],r[0]);var d=document.createElement("div");d.setAttribute("class","crm-small-font-size pT20 crmNotFoundColor crm-font-regular fontSmooth dIB"),d.innerHTML=I18n.getMsg("rule.cannot.delete.info2"),n.append(d),crmui.showPopup("deletefield"),$L("#deleteInfo1").addClass("pR pL15").html("<span class='pA wfSquareDot left0 dIB top5'></span>"+I18n.getMsg("pf.state.delete.deny.message",$ESAPI.encoder().encodeForHTML(I18n.getMsg("crm.massmail.selectcustomview"))))}}))},CustomView.formSelectColumnString=function(){var e=document.createElement("FORM");e.setAttribute("id","UpdateCustomView");for(var t=$("#columnList input:checked"),a=0,i=1;a<t.length;a++,i++){var l=t[a],n=document.createElement("INPUT"),r=$(l).val();$(n).attr({type:"hidden",name:"col"+i,value:r}),$(e).append(n)}return e},CustomView.bindMultiSelectLookup2=function(e,t,a){var i={};i.placeholder_text_multiple=I18n.getMsg("crm.module.name",I18n.getMsg(moduleRecordMapping[e].singular_label)),i.maximum_result_text=I18n.getMsg("crm.chosen.maximum.campaigns.selected",e),i.maximumSelectionLength=5,i.minimumInputLength=2;var l={url:"/crm/v2/"+moduleRecordMapping[e].api_name+"/search",dataType:"json",delay:1e3,type:"GET",dispColn:a,headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken,Range:"1-50"},data:CustomView.campaignSelect2DataFunction,processResults:CustomView.campaignSelect2ResultsFunction};i.ajax=l,thirdPartyUtils.bindSelect2(t,i)},CustomView.campaignSelect2DataFunction=function(e){var t=$(this).closest("div").find("input[type=text]").data("dispsysrefname");t||(t="Campaign_Name");var a="("+t+":starts_with:"+e.term.trim().replace(/([<>*()?\\])/g,"\\$1")+")";if("Campaign_Name"==t){var i=$("#campaign_status_sel").val();""!=i&&(a="("+a+" and (Status:equals:"+i+"))");var l=$("#campaign_type_sel").val();""!=l&&(a="("+a+" and (Type:equals:"+l+"))")}var n={};return n.criteria=a,n},CustomView.campaignSelect2ResultsFunction=function(e){var t=$(this).attr("ajaxOptions").dispColn,a={};return e&&e.data?a.results=$.map(e.data,(function(e){return{text:e[t],id:e.id}})):a.results=[],a},CustomView.populateSelectedCampaignNames=function(e){for(var t=$("#campaign_name_select"),a=e.length,i=renderingUtils.createHTML(r),l=0;l<a;l++){var n=e[l],r={name:"option",attr:{value:n.id,selected:!0},child:[{name:"text",content:n.Campaign_Name}]};t.append($(i))}},CustomView.populateSelectedMxNNames=function(e,t){var a=$("#"+t);$(a).children().remove();for(var i=e.length,l=renderingUtils.createHTML(s),n=0;n<i;n++){var r=e[n],s={name:"option",attr:{value:r.id,selected:!0},child:[{name:"text",content:r.value}]};a.append($(l))}},CustomView.campaignNameOnChange=function(e){var t=e.id,a=$(e).val(),i=validationUtils.isNotEmpty(a);CustomView.showOrHideMemberStatusDiv(i),$("#"+t+" option:not(:selected)").remove(),setTimeout((function(){$("#"+t)&&thirdPartyUtils.closeSelect2(t)}),100)},CustomView.campaignNameReset=function(){$("#campaign_name_select").val("").trigger("change").html("")},CustomView.showOrHideMemberStatusDiv=function(e){var t=$("#campaign_type_sel").val(),a=$("#camp_member_status_div");if(e){if(a.hasClass("dN")){var i={};i.status_val=crmListView.getObject().modulePicklistValues["Campaign Members"].MEMBERSTATUS;var l=Handlebars.templates.MemberStatusForFilters(i),n=$("#camp_member_status_sel");n.html(l),thirdPartyUtils.bindSelect2(n,{placeholder_text_single:I18n.getMsg("crm.lead.select.status","Member")}),a.addClass("dB").removeClass("dN")}}else a.addClass("dN").removeClass("dB");var r=$("#camp_service_status_div");if(e){if(r.hasClass("dN")){var s={},o=["Zoho Backstage","Zoho Webinar","Zoho Campaigns","Zoho Survey"],d=[],m={"Zoho Campaigns":["Hard Bounced","Clicked","Marked As Spam","Opened","Opted Out","Replied","Sent","Skipped","Yet to Send","Soft Bounced"],"Zoho Webinar":["Attended","Invited","Registered"],"Zoho Backstage":["Cancelled","Checked in","Invited","Purchased","Yet to check in"],"Zoho Survey":["Completed","Visited","Yet to visit"]};if(t&&o.contains(t))s.status_val=m[t];else{if(""!==t)return void r.addClass("dN").removeClass("dB");for(var c=crmListView.getObject().modulePicklistValues.Campaigns.TYPE,u=o.length,p=0;p<u;p++)c.contains(o[p])&&(d=d.concat(m[o[p]]));s.status_val=[...new Set(d.sort())]}var v=Handlebars.templates.MemberStatusForFilters(s),g=$("#camp_service_status_sel");g.html(v),thirdPartyUtils.bindSelect2(g,{placeholder_text_single:I18n.getMsg("crm.lead.select.status","Service")}),r.addClass("dB").removeClass("dN")}}else r.addClass("dN").removeClass("dB")},CustomView.populateCampaigns=function(){var e={},t=$(this);e.id=t.val(),e.Campaign_Name=t.text(),crmListView.selectedCampaigns.push(e)},CustomView.showCampSubMenu=function(e,t,a,i){var l,n,r=$(e),s=crmui.getOffset(r),o=r.outerWidth(),d=s.top,m=s.left+o;if(sE(event),Crm.menu.globalHideMenu(),"detailQuickCreate"===t||"detailCreate"===t||"leftPanelRLCreate"===t)if(Crm.renderDVLyteFlow("Campaigns")){var c=(l=$L("crm-detail-view")[0].component.data.moduleData.layouts.filter((e=>"system"===e.generated_type&&e.visible))).findIndex((e=>"Standard"===e.name));-1!==c&&(l[c].name="Offline"),n=l.length>1}else l=returnJson.Campaigns.campaignLayoutSubMenu,n=returnJson.Campaigns.showCampaignLayoutSubmenu;else Crm.renderDVLyteFlow("Campaigns")?n=(l=$L("crm-detail-view")[0].component.data.moduleData.layouts.filter((e=>"system"===e.generated_type&&e.visible))).length>1:(l=returnJson.Campaigns.campaignLayoutSubMenu,n=returnJson.Campaigns.showCampaignLayoutSubmenu);var u={};u.campLayoutSubMenu=l,u.showCampaignLayoutSubmenu=n,u.from=t;var p=r.data("relid");if(Crm.userDetails.isRelatedListLyteEnabled&&(p=!p&&i?i:p),n){"detailQuickCreate"!==t&&"detailCreate"!==t&&"leftPanelRLCreate"!==t||(u.rid=p);var v=$("#zCampOpiontDD_"+t);if(0===v.length){var g=Handlebars.templates.campaignCreateSubMenu(u);if("leftPanelRLCreate"===t?$("#show").append(g):"LYTE-YIELD"===r[0].nodeName?r.closest("button").after(g):r.after(g),thirdPartyUtils.titleForEllipsis(".zCampLayoutName"),v=$("#zCampOpiontDD_"+t),"detailQuickCreate"===t||"detailCreate"===t){v.removeClass("zCampArrowOnRight"),r.closest("lyte-button").addClass("pR");var h=r.position().left+o;$("#"+u.rid).find(".norec").length?Crm.userDetails.detailView_newUI?"detailQuickCreate"===t?v.addClass("zCampOpiontDDArrow zCampOpiontDD_"+t).css({left:h+5}):"detailCreate"===t&&(h=r.position().left-v.outerWidth(),v.addClass("zCampOpiontDDArrow zCampArrowOnRight zCampOpiontDD_"+t).css({left:h+10,top:"-5px"})):v.addClass("zCampOpiontDDArrow zCampOpiontDD_"+t+"  zCampOptNorec").css({left:o+5}):"detailQuickCreate"===t?Crm.userDetails.RTL_ENABLED?v.css({left:"0",top:"28px"}):v.css({left:"unset",right:"0",top:"28px"}):"detailCreate"===t&&(h=r.position().left-v.outerWidth(),v.addClass("zCampOpiontDDArrow zCampArrowOnRight zCampOpiontDD_"+t).css({left:h+10,top:"-5px"}))}else if("listViewCreate"===t){var y=$("#importDiv");y.is(":visible")&&y.slideUp(100)}else"leftPanelRLCreate"===t&&v.addClass("zCampOptionDDRL").css({top:d,left:m})}var C=getElemById("zIntegNewNotifyCircle"),f=getElemById("zCampOpiontDD_listViewCreate");C&&f&&C.classList.add("dN")}else if("detailQuickCreate"===t)crmListView.createNewCampaignwithMembers(event,e,a,p);else if("detailCreate"===t)Crm.userDetails.isRelatedListLyteEnabled?Lyte.registeredMixins["crm-related-list-utils"].createNewChildCampaign(event):crmRelatedList.createNewChildCampaign(event);else if("leftPanelRLCreate"===t){$("div[ddid="+p+"]").find(".dummyForLeftPanel")[0].click()}else Lyte.Router.transitionTo("crm.tab.module.create","Campaigns",{})},CustomView.showhideotherviews=function(e){var t=$(e),a=$L("#cvlist"),i=!1;a.length||(i=!0,a=t.closest(".cvlist"));var l=t.find(".othersdownicon"),n=a.find(".otherViewsUl"),r=$L("#cvList"),s=i?r.scrollTop():a.scrollTop();l.hasClass("ico-arrow-down-solid-small")?(n.show(),s=s+n.height()+5,l.removeClass("ico-arrow-down-solid-small").addClass("ico-arrow-up-solid-small")):(s-=n.height(),n.hide(),l.removeClass("ico-arrow-up-solid-small").addClass("ico-arrow-down-solid-small")),i?r.css("transition","0.3s all ease").scrollTop(s):a.css("transition","0.3s all ease").scrollTop(s)},CustomView.getShowFolderSharingDetails=function(){var e={},t=[],a={type:"ActiveUsers",include_lite_users:!0};if(t.push({name:I18n.getMsg("crm.security.public.groups"),model_name:"user_group",idSelector:"id",prefix:"G",nameSelector:"name",pagination:!1,cxPropEmptyDataMsg:I18n.getMsg("crm.label.no.groups.available")}),t.push({name:I18n.getMsg("crm.security.users"),model_name:"user",idSelector:"id",nameSelector:"full_name",prefix:"U",imageSelector:"image_link",descriptionSelector:"email",pagination:!0,setSearchCriteria:"",cxPropQueryParams:a,cxPropEmptyDataMsg:I18n.getMsg("crm.label.no.users.available")}),t.push({name:I18n.getMsg("crm.security.roles"),model_name:"role",idSelector:"id",prefix:"R",nameSelector:"display_label",pagination:!1,cxPropEmptyDataMsg:I18n.getMsg("crm.label.no.roles.available")}),t.push({name:I18n.getMsg("crm.security.roles.subordinates"),model_name:"role",idSelector:"id",prefix:"RS",nameSelector:"name",pagination:!1,cxPropEmptyDataMsg:I18n.getMsg("crm.label.no.roles.subordinates.available")}),CustomView.territoryEnabled){var i=[];""!==CustomView.orgTerritoryId&&i.push(CustomView.orgTerritoryId),t.push({name:I18n.getMsg("crm.territory.territories"),model_name:"territory",idselector:"id",prefix:"T",nameSelector:"name",pagination:!0,cxPropEmptyDataMsg:I18n.getMsg("crm.label.no.territory.available"),cxPropExclude:i,cxPropCustomRequest:!0}),t.push({name:I18n.getMsg("crm.label.territories.and.subordinates"),model_name:"territory",idselector:"id",prefix:"TS",nameSelector:"name",pagination:!0,cxPropEmptyDataMsg:I18n.getMsg("crm.label.no.territory.subordinates.available"),cxPropExclude:i,cxPropCustomRequest:!0})}e.showSharingModels=t,e.selectedItems={},e.configType="customView",null!=CustomView.sharedData&&""!=CustomView.sharedData&&(e.selectedItems=CustomView.sharedData),store.findAll("field",{module:"users"}).then((function(t){if(e.isFirstNameFieldAvailable=!1,t&&null!=t)for(var a=t.length,i=0;i<a;i++)if("first_name"===t[i].api_name){e.isFirstNameFieldAvailable=!0;break}var l=$("#folderSharingTemplate");null!=l&&l.length>0&&l[0].remove();var n=Lyte.Component.render("crm-folder-sharing",e,"body");n.id="folderSharingTemplate";var r=n.getElementsByTagName("crux-combo-box")[0];r.cxProp("maxLimit",500),r.cxProp("show",!0),r.cxProp("headerMsg",I18n.getMsg("crm.label.rejection.send.alert.users"))}))},CustomView.showSharedDetails=function(e,t,a){var i=$(e);$(".shareWithLabel").removeClass("selectshare"),i.closest(".shareWithLabel").addClass("selectshare");var l=$("#folderInfo").find("span");"allowedUsers-all"==t?l.removeClass("shareOnlyMeIcon").addClass("shareUserIcon"):"allowedUsers-noUsers"==t?l.removeClass("shareUserIcon").addClass("shareOnlyMeIcon"):"allowedUsers-selected"==t&&l.removeClass("shareOnlyMeIcon").addClass("shareUserIcon");var n=$("#shared_details");if(a){null!=CustomView.sharedData&&0!=CustomView.sharedData.length&&n.css("display","inline-block");var r=n.find("ul").find("li");(1!=r.length||r.text()!==I18n.getMsg("crm.label.no.selected.users.available"))&&0!=r.length||null!=CustomView.sharedData&&""!=CustomView.sharedData||CustomView.getShowFolderSharingDetails()}else n.css("display","none")};var TaskKanbanView_new={showEditClose:function(e){$("#div"+e).removeClass("hide")},hideEditClose:function(e){$("#div"+e).addClass("hide")},deleteEntity:function(e,t,a){var i="&deletemodule="+e+"&deleteEntityID="+t+"&action=deleteEntity";$("#recordid_"+t),$("#recordid_"+t).next();(i={}).id=t,i.module=e,i.iskanbanview="true",i.action="deleteEntity",i.crmcsrfparam=csrfToken;var l=networkUtils.constructUrl(Crm.getCrmBasePath()+"/TaskKanbanView.do",i);l=Crm.getCrmBasePath()+"/TaskKanbanView.do";var n="id="+t+"&module="+e+"&iskanbanview=true&action=deleteEntity&deleteEntityID="+t+"&isajax=true&crmcsrfparam="+csrfToken;httphandle.open("POST",l,!0),httphandle.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),httphandle.onreadystatechange=function(){if(4==httphandle.readyState){hideAnimatePopup("deletepopup");var e=httphandle.responseText;if(200==httphandle.status)if(e.indexOf("SECURITY::::")>-1){var a=e.split("SECURITY::::");divObj=getObj("ShowCustomViewDetails"),$(divObj).empty(),divObj.innerHTML=a[1]}else if(e.indexOf("DELETE::::")>-1){var i=e.split("DELETE::::");divObj=getObj("ShowCustomViewDetails"),$(divObj).empty(),divObj.innerHTML=i[1]}else if(e.indexOf("ASSOCIATED_PRODUCT_DEL_ERROR::::")>-1){i=e.split("ASSOCIATED_PRODUCT_DEL_ERROR::::");divObj=getObj("ShowCustomViewDetails"),$(divObj).empty(),divObj.innerHTML=i[1]}else{if(tkvMoreAction=0,$("#entitypopup").html(""),$("#tkventityDetails").html(""),0!==$("#recordid_"+t).next().length){var l=$("#recordid_"+t).next().attr("id");document.getElementById(l).click()}else if(0!==$("#recordid_"+t).prev().length){l=$("#recordid_"+t).prev().attr("id");document.getElementById(l).click()}else taskDetailsview.listAnimation("close");parentid=$("#recordid_"+t).parent().attr("id"),type=$("#recordid_"+t).parent().attr("id").split("_")[0]+"_inner_div",$("#recordid_"+t).remove(),0===$("#"+parentid).find("li").length&&$("#"+type).find("#norecordmsg").removeClass("hide")}else if(401==httphandle.status)return void renderingUtils.displayPermissionDenied(httphandle)}},httphandle.send(n)},viewEntity:function(e){showHideDetail(),$L("#kanbanTaskDetailctn").scrollTop(0),document.getElementById("kvfieldvalue_Subject").scrollIntoView("true")},getentitypopup:function(e){if(document,getElemById("cvEditSave")&&document,"none"===getElemById("cvEditSave").style.display&&($("#cvparentspan1").addClass("hide"),listIndex=$(e).closest("li").index(),$(".leftContainerctn ul li .tkvPriority").removeClass("active"),targetID=$(e).closest("li").attr("id"),highlightID=$("#"+targetID).closest("li").find(".tkvPriority").attr("id"),"Call Duration"!==highlightID&&"End DateTime"!==highlightID&&$("#"+targetID).closest("li").find(".tkvPriority").addClass("active"),$(".leftContainerctn ul li").removeClass("ligraybackground").find(".rightbln").hide(),$(e).closest("li").addClass("ligraybackground"),featuresAvailable.NEXTGENUI_ENABLED)){var t=e.getAttribute("data-params");if(t){var a=(t=JSON.parse(t)).module;"Activities"!==a&&"Tasks"!==a&&"Calls"!==a&&"Events"!==a||(t.stageId=e.getAttribute("name"),e.setAttribute("data-params",JSON.stringify(t)))}}},setperfectScrollPopUp:function(){setTimeout((function(){TaskKanbanView_new.initPerfectScroll()}),500)},initPerfectScroll:function(){setkanbanTaskHt(),$("#kanbanTaskDetailctn").removeClass("overflhidden"),thirdPartyUtils.bindPerfectScroll("#kanbanTaskDetailctn",{wheelSpeed:1,preventOnEnd:!1,preventHorizontal:!1}),$("#kanbanTaskDetailctn").addClass("overflhidden"),$("#kanbanTaskDetailRightCtn").removeClass("overflhidden"),thirdPartyUtils.bindPerfectScroll("#kanbanTaskDetailRightCtn",{wheelSpeed:1,preventOnEnd:!1,preventHorizontal:!1}),$("#kanbanTaskDetailRightCtn").addClass("overflhidden")},socialHover:function(e){$(e).find(".stkv").addClass("active")},socialHoverOut:function(e){$(e).find(".stkv").removeClass("active")},closePopup:function(e){$("#"+e).addClass("hide"),$(".freezeLayer,.freezeLayerkv").addClass("hide"),"mailcompose"===e?$("#"+e).html(""):($(".mailConversationList").css("background","#ffffff"),$(".mailConversationList .tkvMailBubble").addClass("hide"),$(".thread td em").css("color","#7a7a7a")),$(".mailDetailFreeze").addClass("hide")},newshowHideoptions:function(e,t){$(e).hasClass("newStyleClose")?($(e).closest(".tempClose").addClass("hide"),$("#"+t).removeClass("hide"),taskDetailsview.selectAutoFocus()):($(e).addClass("hide"),$("#"+t).removeClass("hide")),void 0!==t&&"ceAddtemplate"===t&&emptyTemplate()},resetRightBox:function(e,t){pageWidthReset=$("#kventitydetailspage").width()/3,$(".kanbanTaskDetailCenterContainer").css({width:Math.round(2*pageWidthReset)+"px"}),$(".kanbanTaskDetailRightContainer").css({width:Math.round(pageWidthReset)+"px"})}};function taskDetails(){}TaskKanbanView="object"!=typeof TaskKanbanView?TaskKanbanView_new:$u.extend(TaskKanbanView,TaskKanbanView_new),TaskKanbanView_new=void 0,TaskKanbanView.centerAnimation=function(e,t){$("."+t).width($("."+t).width()),$("."+e).width($("."+e).width()),""===TaskKanbanView.centerCtnWidthBefore&&(TaskKanbanView.centerCtnWidthBefore=$("."+e).width(),TaskKanbanView.centerCtnWidthAfter=$("."+e).width()+$("."+t).width()),0===TaskKanbanView.KvCenterItem?$("."+e).animate({width:TaskKanbanView.centerCtnWidthAfter+2+"px"},200,(function(){TaskKanbanView.KvCenterItem=1,$(".expandView").addClass("collapseView"),$("#fullInfoDiv table.twoColumn td.label").css("width","150px")})):$("."+e).animate({width:TaskKanbanView.centerCtnWidthBefore+"px"},200,(function(){TaskKanbanView.KvCenterItem=0,$(".expandView").removeClass("collapseView"),$("#fullInfoDiv table.twoColumn td.label").css("width","25%")}))},taskDetails.Close=function(){$("#addactionmain").addClass("hide"),$("#FreezeLayer2").addClass("hide"),$(".footLink").removeClass("hilightLink"),renderingUtils.removeFreezeLayer()},taskDetailsview.updaterecord=function(e,t,a,i){""===a&&(i="");var l={STATUS:"Status",PRIORITY:"Priority",SUBJECT:"Subject",CALLTYPE:"Call Type",DUEDATE:"Due Date",LOCATION:"Venue",STARTDATETIME:"Start DateTime",ENDDATETIME:"End DateTime"},n=l[t]?l[t]:t;if("Priority"===n||"Status"===n||"Call Type"===n){document.getElementById("kvfieldvalue_"+n)&&($("#kvfieldvalue_"+n).empty(),document.getElementById("kvfieldvalue_"+n).innerHTML=a,$("#kvfieldvalue_"+n).attr("title",$("<div/>").html(a).text()));var r=TaskKanbanView.pickfieldid;el=document.getElementById(n+"_"+r),$(el).closest(".TaskStatusIn").find("li").removeClass("active"),targetFrmLi=$(el).closest(".TaskStatusIn"),targetFrmLi.siblings(".tasKUpdate").html($(el).html()),targetFrmLi.addClass("hide"),targetFrmLi.siblings(".pDown").removeClass("active"),document.getElementById(n+"_Id")&&(document.getElementById(n+"_Id").value=r)}else"Subject"===n?document.getElementById("headervaluetkv_"+n)&&($("#headervaluetkv_"+n).empty(),document.getElementById("headervaluetkv_"+n).innerHTML=a,$("#headervaluetkv_"+n).attr("title",$("<div/>").html(a).text()),$("#rItemDataSubDiv").find("#recentItemImg_"+e).find("div").html(a)):"Start DateTime"===n||"End DateTime"===n?document.getElementById("headerdisplayvalue_"+n)&&($("#headerdisplayvalue_"+n).empty(),document.getElementById("headerdisplayvalue_"+n).innerHTML=i):"Due Date"===n?(document.getElementById("headervaluetkv_"+n)&&($("#headervaluetkv_"+n).empty(),document.getElementById("headervaluetkv_"+n).innerHTML=a),crmCalendar.close()):"Venue"===n&&$("#headervaluetkv_"+n)&&($("#headervaluetkv_"+n).find("#venuetask").html(a),$("#headervaluetkv_"+n).find("#venuetask").attr("title",$("<div/>").html(a).text()));if("Due Date"===n){$("#recordid_"+e).find('[id="'+n+'"]')&&$("#recordid_"+e).find('[id="'+n+'"]').html(i);var s=new Date,o=new Date(a);$.datepicker.formatDate("ddMMyy",s),$.datepicker.formatDate("ddMMyy",o);if(o<s){I18n.getMsg("<fmt:message key='crm.label.no.attach.alert'/>"),s=new Date,o=new Date(a);var d=Math.round((s.getTime()-o.getTime())/864e5),m="<span class='overDueCtn'><span class='crmNegativeColor overDueTask' >"+i+"</span><span class='overdue hide' >late by "+(d+=d>1?" days":" day")+"</span></span>";$("#recordid_"+e).find("[id='"+n+"']").html(m)}}else $("#recordid_"+e).find('[id="'+n+'"]')&&($("#recordid_"+e).find('[id="'+n+'"]').html(a),$("#recordid_"+e).find('[id="'+n+'"]').attr("title",$("<div/>").html(a).text())),"Status"===n&&("Completed"===a?($("#recordid_"+e).find('[class="seperatorLine"]').hide(),$("#listViewClose_"+e).hide(),$("#completedValue").show(),$("#closeTaskTr").hide()):($("#recordid_"+e).find('[class="seperatorLine"]').show(),$("#listViewClose_"+e).show(),$("#completedValue").hide(),$("#closeTaskTr").show(),$("#completedTask").hide()));$("#upcoming")&&$("#upcoming").hasClass("liselected")&&$("#upcoming").click()},taskDetailsview.SlideUpDown=function(e,t){$("#"+e).animate({bottom:t+"px"},400,(function(){}))},taskDetailsview.formatdatetime=function(e,t,a,i){var l=Crm.userDetails.DATE_PATTERN.toUpperCase(),n=e,r=t;if(!e.getMonth&&e.indexOf(":")>-1){var s=Crm.userDetails.TIME_FORMAT;(e.indexOf("AM")>-1||e.indexOf("PM")>-1)&&(s=s.replace("a","A")),l+=" "+s,n=Utils.getDateObjFromDateStr(e,l),r=Utils.getDateObjFromDateStr(t,l)}var o=$.datepicker.formatDate("ddMMyy",n),d=$.datepicker.formatDate("ddMMyy",r),m=$.datepicker.formatDate("yy",r),c=$.datepicker.formatDate("yy",n),u="true"===$("#iskanbanview").val()?"M dd, yy":"M dd yy",p=$.datepicker.formatDate(u,n),v=$.datepicker.formatDate("M dd",n),g=$.datepicker.formatDate(u,r),h=$.datepicker.formatDate("M dd",r),y=($.datepicker.formatDate("DD M dd, yy",n),$.datepicker.formatDate("DD M dd",n),$.datepicker.formatDate("DD M dd, yy",r),$.datepicker.formatDate("DD M dd",r),$.datepicker.formatDate("mm/dd/yy",n),$.datepicker.formatDate("mm/dd/yy",r),n.getHours()),C=n.getMinutes();if("HH:mm"!==Crm.userDetails.TIME_FORMAT)var f=y>=12?"PM":"AM",w=y>=12?I18n.getMsg("PM"):I18n.getMsg("AM"),b=(y=(y%=12)||12)+":"+(C=C<10?"0"+C:C)+" "+w;else b=y+":"+(C=C<10?"0"+C:C),f=y>=12?"PM":"AM",w=y>=12?I18n.getMsg("PM"):I18n.getMsg("AM"),y=(y%=12)||12;if(y=r.getHours(),C=r.getMinutes(),"HH:mm"!==Crm.userDetails.TIME_FORMAT){f=y>=12?"PM":"AM",w=y>=12?I18n.getMsg("PM"):I18n.getMsg("AM");var E=(y=(y%=12)||12)+":"+(C=C<10?"0"+C:C)+" "+w}else{E=y+":"+(C=C<10?"0"+C:C);f=y>=12?"PM":"AM",w=y>=12?I18n.getMsg("PM"):I18n.getMsg("AM");y=(y%=12)||12}return o===d?Crm.requestParam["property(All day)"]?v:v+" "+b+" - "+E:m===c?Crm.requestParam["property(All day)"]?v+" - "+h:v+" "+b+" - "+h+" "+E:Crm.requestParam["property(All day)"]?p+" - "+g:p+" "+b+" - "+g+" "+E},taskDetailsview.addRemoveCcBcc=function(e,t){targetEl=$("#"+e),innerText=$(targetEl).html(),$(targetEl).hasClass("removeReply")?("ceReplyToAddr"===e?$(targetEl).html(i18edremovereplyto):"ceReplyToCc"===e?$(targetEl).html(i18edremovecc):"ceReplyToBcc"===e&&$(targetEl).html(i18edremovebcc),$("#"+t).removeClass("hide"),$(targetEl).removeClass("removeReply")):($("#"+t).addClass("hide"),"ceReplyToAddr"===e?($("#replyToAddress").val(""),$(targetEl).html(i18edaddreplyto)):"ceReplyToCc"===e?($("#ceCCAddr").val(""),$("#ccAddress").val(""),$(targetEl).html(i18edaddcc)):"ceReplyToBcc"===e&&($("#bccAddress").val(""),$(targetEl).html(i18edaddbcc)),$(targetEl).addClass("removeReply")),document.getElementById("isSendMail")&&"true"==document.getElementById("isSendMail").value||taskDetailsview.setComposeWindow()},taskDetailsview.selectAutoFocus=function(){setTimeout((function(){$("#emailTemplateId")[0].focus();var e=$("#emailTemplateId")[0];if(document.createEvent){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}else e.fireEvent&&e.fireEvent("onmousedown")}),1500)},taskDetailsview.ddTime=function(e,t){var a=void 0===t?"ddTime":t;$("#sdiv").css("top",$("."+a).offset().top+20),$("#"+e).on("scroll",(function(){$("#sdiv").hide()}))},taskDetailsview.refreshKV=!1,taskDetailsview.editOptions=function(e){if(document,getElemById("cvEditSave")&&document,"none"===getElemById("cvEditSave").style.display||iskvFollowupEdit){var t=$(e).closest(".kvtlistbgheader").attr("id");if($("#kvType").val(t),taskDetailsview.listAnimation("open"),$("#cvEditSave").show(),curVal=$(e).attr("val"),TaskKanbanView.kvrecordid=0,"refresh"!==curVal)e&&(params=JSON.parse($(e).attr("data-params"))),taskDetailsview.refreshKV=!1,activitytype=$("#activitytype").val(),activityid=$("#entityid").val(),""!==$("#entitypopup").html()?ActivityMoreInfoContent=$("#entitypopup").html():ActivityMoreInfoContent=$("#moreinfodiv").html(),$("#entitypopup").html(""),Crm.editEntity(void 0,e,params);else{$(e).addClass("hide"),$(".editTkv").removeClass("hide"),taskDetailsview.refreshKV=!0,activityid=$("#entityid").val(),targetElem=$("#"+activityid+"_refresh"),targetElem&&(params=JSON.parse($(targetElem).attr("data-params")));params.kvmodule,params.kvmodule;var a=$("#"+params.kvmodule+"_startindex").val();params.startindex=a,doAjaxUpdate("tkvloadmorediv",Crm.getCrmBasePath()+"/ShowDetails.do",params,(function(e){setTimeout((function(){$("#mailcompose")&&$("#mailcompose").remove(),$("#recordid_"+activityid).click(),$("#recordid_"+activityid).find(".tkvPriority").addClass("active")}),1e3)}))}iskvFollowupEdit=!1}else{var i="stayonPageConfirmBox",l=$("#"+i);renderingUtils.dummyBackground(!1,i),mailsetCenter(i),l.find(".leavePage").off("click").click((function(){renderingUtils.removeDummyBackground(),l.hide(),iskvFollowupEdit=!0,taskDetailsview.editOptions(e),e&&(params=JSON.parse($(e).attr("data-params"))),activityid=params.id,targetElem=$("#recordid_"+activityid),iskvFollowupTask=!0})),l.find(".stayPage").off("click").click((function(){l.hide(),renderingUtils.removeDummyBackground()})),l.focus(),iskvFollowupTask=!0}0!==$(e).closest("li").length&&($(".leftContainerctn ul li").removeClass("ligraybackground").find(".rightbln").hide(),$(e).closest("li").addClass("ligraybackground"))};var columnlayout,kvdetailsContentHt=$("#kanbanTaskDetailctn div").eq(0).height();taskDetailsview.listAnimation=function(e){var t=$("#kvType").val(),a=e;$(".kvtlistbgheader").removeClass("kv_detailview"),TaskKanbanView.tkvListWidth=350;var i=TaskKanbanView.tkvListWidth-1,l=TaskKanbanView.tkvListWidth-2,n=(renderingUtils.windowWidth,TaskKanbanView.tkvListWidth);1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI&&(i=n,l=n+2);var r=renderingUtils.windowWidth-l;if($("#"+t).find(".leftheaderBack").show(),"open"===a&&1===$(".leftheaderBack:visible").length){"Closed_header"===t?($("#Closed_header").width(i).addClass("kv_detailview"),$("#taskKanbanViewContainer").addClass("kanbanDetailview_rewamp"),$("#Closed_outer_div").width(l),$("#Open_header").css({cssText:"width: 0px !important"}),$("#RelatedTo_header").css({cssText:"width: 0px !important"}),$("#other_header").css({cssText:"width: 0px !important"})):"Open_header"===t?($("#Open_header").width(i).addClass("kv_detailview"),$("#taskKanbanViewContainer").addClass("kanbanDetailview_rewamp"),$("#Open_outer_div").width(l),$("#RelatedTo_header").css({cssText:"width: 0px !important"}),$("#Closed_header").css({cssText:"width: 0px !important"}),$("#other_header").css({cssText:"width: 0px !important"})):"RelatedTo_header"===t?($("#RelatedTo_header").width(i).addClass("kv_detailview"),$("#taskKanbanViewContainer").addClass("kanbanDetailview_rewamp"),$("#RelatedTo_outer_div").width(l),$("#Open_header").css({cssText:"width: 0px !important"}),$("#Closed_header").css({cssText:"width: 0px !important"}),$("#other_header").css({cssText:"width: 0px !important"})):"other_header"===t&&($("#other_header").width(i).addClass("kv_detailview"),$("#taskKanbanViewContainer").addClass("kanbanDetailview_rewamp"),$("#other_outer_div").width(l),$("#Open_header").css({cssText:"width: 0px !important"}),$("#Closed_header").css({cssText:"width: 0px !important"}),$("#RelatedTo_header").css({cssText:"width: 0px !important"}));var s=$("#kventitydetailspage");1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI&&s.width(r),s.animate({left:l+"px"},0),TaskKanbanView.KvListItemClickCount=1,$(".kvtlistbgheader .kvtlistbg").addClass("lightbdr")}var o=$(".kanbanDetailview_rewamp").find(".leftContainerctn");thirdPartyUtils.bindPerfectScroll(o)},taskDetailsview.attachmentsAnimation=function(e){var t=$("#"+e).parent().find("ul");if(!0===attachON){var a=$("#"+e).outerWidth()+10;t.animate({left:a},400,(function(){attachON=!1})),$("#"+e).addClass("atatchSel")}else if(!1===attachON){var i=t.outerWidth()+6;t.animate({left:-i},400,(function(){attachON=!0})),$("#"+e).removeClass("atatchSel")}};