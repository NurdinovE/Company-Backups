var app={windowRect:{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight},uiCompLocale:["bg_BG","cs_CZ","da_DK","de_DE","en_GB","en_US","es_ES","fr_FR","he_IL","hi_IN","hr_HR","hu_HU","it_IT","iw_IL","ja_JP","ko_KR","nl_NL","pl_PL","pt_BR","pt_PT","ru_RU","sv_SE","tr_TR","vi_VN","zh_CN","zh_TW","ar_EG","th_TH","in_ID"],cruxCompLocale:["bg_BG","cs_CZ","da_DK","de_DE","en_GB","en_US","es_ES","fr_FR","he_IL","hi_IN","hr_HR","hu_HU","it_IT","iw_IL","ja_JP","ko_KR","nl_NL","pl_PL","pt_BR","pt_PT","ru_RU","sv_SE","tr_TR","vi_VN","zh_CN","zh_TW","ar_EG","th_TH","in_ID"],cachedModulePromises:{},reqCache:{},_cscript_registry:{_cat_pages:{},_definitions:{}},cscript_registry:function(e){e.config.forEach((function(t){t.route_name=e.route_name,t.category=e.category,app._cscript_registry._definitions[t.route_name]?app._cscript_registry._definitions[t.route_name].push(t):app._cscript_registry._definitions[t.route_name]=[t]}))},globalClickhandling:function(e){var t=$(".profOptionList");t.is(":visible")&&t.hide();var i=null;i=(i=renderingUtils.getTargetElem(e))||document.getElementById("show");var s=$("#qCreate");if(!Crm.isHeadless&&crmNTC.isSignalDetailViewVisible()){void 0!==i&&"signalDetailViewClose"===i.id&&crmNTCDetailView.closeDetailView(),"undefined"===i.id||"signalsActivityDiv"===i.id||s.is(":visible")&&$("#eventCreatePopup").is(":visible")&&$("#createEditCallDiv").is(":visible")||(getElemById("signalsActivityDiv").style.display="none")}else if($("#notificationscontainer").hasClass("open")){crmNTCGlobal.closeGlobalNotifications(),$(".notifiactionIcon").removeClass("notifiactionIconH"),$("#notifications_inner").empty(),AcsApi.resetBadgeCount("UNS");var o=$("#signalsActivityDiv");o.is(":visible")&&o.hide()}var r=$("#recentMailsDiv")[0];if(r&&"block"==r.style.display){for(var a=e||window.event,n=a.target||a.srcElement;n;){if("calenDiv"==n.id){var c=1;break}n=n.parentNode}if(!c)if(document.body.removeChild(r),$(".mailIc").attr("class","mailIc"),featuresAvailable.NEXTGENUI_ENABLED)document.querySelector("crm-left-menu").component.actions.updateNavActiveClassForBottomMenu("leftPaneMail",!1)}var u=$("#LDPOP");u.length&&u.is(":visible")&&CrmTracking.minimizePop();var l=$(".atch-droplist");l.is(":visible")&&l.hide();var d=document.getElementById("viewFeatures");if(d&&e&&"none"!==d.style.display&&!e.target.classList.contains("msg-board-icon-active")&&"stackedNumber"!==e.target.id&&"msgBoardDisplay"!==e.target.id&&"What's new in Zoho CRM"!==e.target.innerText&&"a"!==e.target.localName&&"img"!==e.target.localName){var m=document.querySelector("#msgBoardDisplay .msg-board-icon"),h=document.getElementById("mics_stacked_carpet"),p=document.getElementById("mics_stacked_backdrop");d.style.display="none",m.classList.remove("msg-board-icon-active"),document.querySelector(".msg-board-icon .zcicn-messageboard").style.fill="#313949",h.style.display="none",p.style.display="none";var g=$L("html"),f=document.getElementById("stNotes");f&&"block"===f.style.display?g.addClass("oH"):g.removeClass("oH")}},renderTemplate:function(e,t){if(e&&t){var i,s=e.currentModel;if(e.ORoutlet=i=function e(t,i){var s;if(i){if(!(s=i.outlet?i.outlet.querySelector(t):void 0))return e(t,i.parent)}else(s=document.querySelector(t))||console.error("There is no outlet named "+t+".");return s}(t.outlet,e.parent)){var o={outlet:t.outlet,route:e};if(e.transition.data&&e.transition.data.refreshTemplate&&(e.ORComponent&&delete e.ORComponent,delete e.transition.data.refreshTemplate),t.component)if(e.ORComponent&&!t.reRender&&e.ORComponent.tagName.toLocaleLowerCase()==t.component&&e.ORoutlet==i&&i.contains(e.ORComponent))n(e.ORComponent,s);else{Lyte.triggerEvent("beforeTemplateDestroy",o);var r=document.createElement(t.component);r._route=e.__lp.objPath,n(r,s),i.innerHTML="",i.appendChild(e.ORComponent=r)}else if(t.html){e.ORComponent=void 0,Lyte.triggerEvent("beforeTemplateDestroy",o),i.innerHTML=t.html;var a=i.getElementsByTagName("script");a.length&&function(e){for(var t,i=0;t=e[i];i++){for(var s,o=t.parentNode,r=document.createElement("script"),a=0;s=t.attributes[a];a++)r.setAttribute(s.name,s.value);r.innerHTML=t.innerHTML,o.appendChild(r),o.removeChild(t)}}(Array.from(a))}}}function n(e,t){t&&("object"!=typeof t||Array.isArray(t)?console.error("Invalid data passed to a component :"+e+"."):e.setData(t))}},localHistory:[],listViewLinkedRoutes:["crm.settings.section.custom-view","crm.tab.module.create","crm.tab.module.entity.detail","crm.tab.module.entity.edit","crm.tab.module.entity.find-and-merge","crm.settings.import","crm.tab.module.actions.mass-tools","crm.settings.section.manage-tags","crm.settings.section.manage-mass-mail","crm.settings.section.autoresponders","crm.tab.module.actions"],newSubVersion:0,quickCreateListnerId:null,setQuickCreateListener:function(){var e=Lyte.addEventListener("quickCreate",function(e){app&&!app.store&&crmStore&&(app.store=new crmStore);var t,i,s="quickCreate";if(e.formType?s=e.formType:e.formType=s,t={data:e},i=[networkUtils.returnDependencyFiles(["crm-quick-entity-setup.js","crm-create-mixin.js","crm-create-mixin2.js","crm-create-route-mixin.js","canvasview_model.js"],ResourceConstants.CRMClient)],Crm.userDetails.isStorageLimitReached){"quickCreate"!==s&&renderingUtils.removeFreezeLayer();var o=!0;if(e.parseFieldDeatils&&"single_ajax_edit"===e.parseFieldDeatils.customDataFeature&&(o=!1),o)return void Crm.showStorageExceedPopup()}new Promise(function(e){Lyte.injectResources(i,void 0,(function(t,i){0===i.length&&e()}))}.bind(this)).then((function(){var i="body";e.renderLocation?i=e.renderLocation:e.renderLocation=i,Lyte.Component.render("crm-quick-entity-setup",{data:t},i)}))}.bind(this));this.quickCreateListnerId=e}()};if(Lyte.Security.ignoreSanitizer=!0,Lyte.Router.configureDefaults({history:"html5",deferInit:!0,execRouteRequirementsOnDemand:!1,queryParamOptions:{sticky:!1}}),Lyte.setConfig("stateHandling",!0),app.crmNamespace="/crm",void 0!==window.clientPortalName&&window.clientPortalName?app.crmNamespace="/portal/"+window.clientPortalName+"/crm":crmPortal&&(app.crmNamespace+="/"+crmPortal),window.location&&window.location.search){var menulessQueryParamValue=new URLSearchParams(window.location.search).get("menuless");if("true"===menulessQueryParamValue){app.isMenuless=!0;var originalgetURLMethod=Lyte.Router.getURL;Lyte.Router.getURL=function(e){return e&&e.route&&!e.queryParams&&(e.queryParams={}),originalgetURLMethod.apply(this,arguments)}}}Lyte.Router.configureRoutes((function(){this.route("crm",{path:app.crmNamespace+(app.isMenuless?"?menuless=true":"")},(function(){this.route("ccactions",{path:"/ccsettings/ccactions"}),this.route("crm-mobile-intermediatepage",{path:"/mobilepage"}),this.route("tab",(function(){this.route("forms"),this.route("projects",{path:"/Projects"}),this.route("marketplace",{path:"/Marketplace"}),this.route("google-adwords",{path:"/Google AdWords"},(function(){this.route("adword-accounts",{path:"/account-summary"}),this.route("adword-view",{path:"/account-summary/view"}),this.route("adword-offline",{path:"/offline"}),this.route("adword-metrics",{path:"/reports"})})),newForecastsEnabled?this.route("newForecasts",{path:"/Forecasts"},(function(){this.route("index",{path:"/"}),this.route("list",{path:"/list"}),this.route("bread-crum",{path:"/breadcrum"}),this.route("create"),this.route("view",{path:"/:id"},(function(){this.route("performance")})),this.route("edit",{path:"/:id/edit"}),this.route("clone",{path:"/:id/clone"})})):this.route("forecasts",{path:"/Forecasts"},(function(){this.route("index",{path:"/"}),this.route("create"),this.route("editSettings"),this.route("pipeline")})),this.route("newReports",{path:"/Reports"},(function(){this.route("index",{path:"/"},(function(){this.route("list"),this.route("schedule",(function(){this.route("list",{path:"/"})}))})),this.route("schedule-create",{path:"/schedule/create"}),this.route("schedule-edit",{path:"/schedule/:id/edit"}),this.route("create"),this.route("edit",{path:"/:id/edit"}),this.route("view",{path:"/:id"}),this.route("clone",{path:"/:id/clone"}),this.route("records",{path:"/:id/records"})})),this.route("messages",{path:"/Messages"},(function(){this.route("begin",{path:"/begin"}),this.route("custom-view",{path:"/custom-view/:cv_id"},(function(){this.route("list")})),this.route("view",{path:"/:id"})})),this.route("voc",(function(){this.route("promo",{path:"/promo"}),this.route("analytics",(function(){this.route("view",{path:"/:analytics_id"})}))})),"undefined"!=typeof newDashbordsEnabled&&newDashbordsEnabled?this.route("newDashboards",{path:"/Dashboards"},(function(){this.route("create"),this.route("clone",{path:"/:id/clone"}),this.route("index",{path:"/"},(function(){this.route("view",{path:"/:id"},(function(){this.route("expand")}))})),this.route("dashboardId",{path:"/:id/components"},(function(){this.route("records",{path:"/:id/records"})})),this.route("manage-dashboards",{path:"/manage"}),this.route("deleted")})):this.route("dashboards",{path:"/Dashboards"},(function(){this.route("index",{path:"/"}),this.route("view",{path:"/:id"},(function(){this.route("expand")})),this.route("dashboardId",{path:"/:id/components"},(function(){this.route("records",{path:"/:id/records"})}))})),this.route("requesters",{path:"/Requesters"},(function(){this.route("module",{path:"/:moduleId"},(function(){this.route("index-module",{path:"/"},(function(){this.route("entity",{path:"/:entity_id"},(function(){this.route("detail",{path:"/"})}))})),this.route("create")}))})),this.route("approvals",{path:"/Approvals"},(function(){this.route("index",{path:"/"}),this.route("logs"),this.route("view")})),this.route("social",{path:"/Social"},(function(){this.route("dashboard",{path:"/dashboard"}),this.route("log",{path:"/log"}),this.route("monitor",{path:"/monitor"}),this.route("posts",{path:"/posts"})})),this.route("commandcenter",{path:"/Commandcenter"},(function(){this.route("index-commandcenter",{path:"/"}),this.route("module",{path:"/:module"},(function(){this.route("index-module",{path:"/"}),this.route("record",{path:"/:recordID"})})),this.route("commandcenter-re-authorize-services",{path:"/reauthorize"})})),this.route("module",{path:"/:moduleId"},(function(){this.route("index-module",{path:"/"}),this.route("begin"),this.route("create",(function(){this.route("canvas",{path:"canvas/:viewid"})})),this.route("quick-create"),this.route("modal-create"),this.route("associate-search"),this.route("fields-value-collector"),this.route("promo"),this.route("actions",(function(){this.route("approvals"),this.route("mass-tools"),this.route("deduplicate",(function(){this.route("index-deduplicate",{path:"/"}),this.route("list-conflicts"),this.route("merge"),this.route("show-duplicates")})),this.route("generate-po"),this.route("add-to-campaigns"),this.route("draft")})),this.route("activities-banner",{path:"/activities-banner/:relModule"}),this.route("custom-view",{path:"/custom-view/:cv_id"},(function(){this.route("list"),this.route("kanban"),this.route("chart"),this.route("timeline"),this.route("zia"),this.route("begin"),this.route("canvas",{path:"/canvas/:viewid"})})),this.route("entity",{path:"/:entity_id"},(function(){this.route("detail",{path:"/"}),this.route("canvas",{path:"/canvas/:canvasId"}),this.route("edit",(function(){this.route("canvas",{path:"canvas/:viewid"})})),this.route("clone",(function(){this.route("canvas",{path:"canvas/:viewid"})})),this.route("convert"),this.route("find-and-merge"),this.route("add-contact-role"),this.route("edit-contact-role")}))})),this.route("zohocpq",{path:"/:productName"},(function(){this.route("index-zohocpq",{path:"/"}),this.route("configurator-create",{path:"/create"}),this.route("configurator-edit",{path:"/:recordId/edit"})}))})),this.route("settings",(function(){this.route("index"),this.route("editor"),this.route("import"),this.route("migration",(function(){this.route("index",{path:"/:migration_id"},(function(){this.route("extract-data"),this.route("map-modules"),this.route("map-fields"),this.route("report-and-review"),this.route("complete"),this.route("file-upload")})),this.route("api-login")})),this.route("create-home-customization",{path:"/home-customization/create"}),this.route("edit-home-customization",{path:"/home-customization/:id/edit"}),this.route("clone-home-customization",{path:"/home-customization/:id/clone"}),this.route("section",{path:"/"},(function(){this.route("users",(function(){this.route("view",{path:"/:user_id"})})),this.route("widget",{path:"/widget/:widget_id"}),this.route("manage-tags"),this.route("data-migration"),this.route("import-history"),this.route("export-data"),this.route("export",(function(){this.route("export-data",{path:"/"}),this.route("export-history",{path:"/:jobid"}),this.route("start-export",{path:"/start"})})),this.route("data-backup"),this.route("telephony",(function(){this.route("configuration",{path:"/:providerName/configuration"}),this.route("marketplace"),this.route("summary",{path:"/:providerName/summary"}),this.route("phonebridgegroup",{path:"/:providerName/phonebridgegroup"},(function(){this.route("createpbxgroup",{path:"/create"}),this.route("editpbxgroup",{path:"/:groupId/edit"}),this.route("viewpbxgroup",{path:"/:groupId"})}))})),this.route("notificationsms",(function(){this.route("index-notificationsms",{path:"/"})})),this.route("wizard",(function(){this.route("index-wizard",{path:"/"}),this.route("view-wizard",{path:"/:wizardId"}),this.route("create-wizard",{path:"/create"})})),this.route("widget-telephony",{path:"/widget-telephony"},(function(){this.route("marketplace",{path:"/marketplace"}),this.route("configuration",{path:"/:providerName/configuration"}),this.route("summary",{path:"/:providerName/summary"})})),this.route("segmentation",(function(){this.route("index"),this.route("create"),this.route("edit",{path:"/:segmentId/edit"})})),this.route("workflow-rules",(function(){this.route("index-workflow-rule",{path:"/"}),this.route("summary-workflow-rules",{path:"/show-summary"}),this.route("create-workflow-rule",{path:"/create"}),this.route("view-workflow-rule",{path:"/:ruleId"}),this.route("view-usage",{path:"/:ruleId/usage"}),this.route("clone-workflow-rule",{path:"/:ruleId/clone"})})),this.route("workflow-insights"),this.route("approval-process",(function(){this.route("index-approval-process",{path:"/"}),this.route("create-approval-process",{path:"/create"}),this.route("view-approval-process",{path:"/:processId"})})),this.route("blueprint-usage"),this.route("blueprint-setting"),this.route("blueprint",(function(){this.route("index-blueprint",{path:"/"}),this.route("create-blueprint",{path:"/create"}),this.route("view-blueprint",{path:"/:processId"})})),this.route("assignment-rule",{path:"/assignment-rules"},(function(){this.route("index-assignment-rule",{path:"/"}),this.route("create-assignment-rule",{path:"/:ruleId/entries"}),this.route("view-assignment-rule",{path:"/:ruleId"})})),this.route("zia-reasoning"),this.route("assignment-thresholds",{path:"/assignment-thresholds"},(function(){this.route("index-assignment-thresholds",{path:"/"}),this.route("create-assignment-thresholds",{path:"/create"}),this.route("edit-assignment-thresholds",{path:"/:restrictionId"})})),this.route("extensions",(function(){this.route("all-extensions",{path:"/all"},(function(){this.route("slack"),this.route("sales-navigator",{path:"/salesnavigator"}),this.route("meeting-integration"),this.route("dynamicExtn",{path:"/:namespace"}),this.route("cisco-teams",{path:"/ciscoteams"})})),this.route("zoho-extensions",{path:"/zoho"},(function(){this.route("zoho-apps",{path:"/apps"}),this.route("visit"),this.route("survey"),this.route("desk"),this.route("reports"),this.route("workdrive"),this.route("zanalytics"),this.route("writer"),this.route("motivator"),this.route("creator"),this.route("finance-suite"),this.route("finance-setup"),this.route("finance-create"),this.route("finance-view"),this.route("projects"),this.route("cliq"),this.route("showtime"),this.route("webinar",{path:"/webinar"}),this.route("meeting"),this.route("campaigns",(function(){this.route("campaigns-field-mapping"),this.route("crm-to-campaign-settings"),this.route("syncs")})),this.route("forms"),this.route("backstage"),this.route("crossorg",{path:"/:service/crossorg"}),this.route("remote-sales-office",(function(){this.route("information"),this.route("users")})),this.route("pagesense"),this.route("assist"),this.route("sign"),this.route("bookings"),this.route("leadchain"),this.route("lens"),this.route("contracts"),this.route("fsm"),this.route("cpq",(function(){this.route("subscription"),this.route("permission",{path:"/permissions"})}))})),this.route("google-extensions",{path:"/google"},(function(){this.route("google-users",{path:"/users"}),this.route("google-contacts",{path:"/contacts"}),this.route("google-calendars",{path:"/calendar"}),this.route("google-apps",{path:"/:appName"}),this.route("google-tasks",{path:"/tasks"}),this.route("google-chat",{path:"/chat"})})),this.route("ms-extensions",{path:"/microsoft"},(function(){this.route("ms-word",{path:"/word"}),this.route("ms-outlook",{path:"/outlook"}),this.route("ms-office",{path:"/office-365"}),this.route("ms-teams",{path:"/ms-teams"})})),this.route("social-extensions",{path:"/social"},(function(){this.route("social-lead-gen",{path:"/lead-gen"}),this.route("social-brands",{path:"/brands"},(function(){this.route("index-brands",{path:"/"})})),this.route("social-admin-settings",{path:"/admin-settings"},(function(){this.route("index-permissions",{path:"/"})})),this.route("social",{path:"/:appName"})})),this.route("skyeye"),this.route("leadchain-extensions",(function(){this.route("leadchain")}))})),this.route("sales-signals",{path:"/sales-signals"},(function(){this.route("index-sales-signals",{path:"/"}),this.route("manage-sales-signals",{path:"/manage"})})),this.route("client-portal",(function(){this.route("begin-portal",{path:"/begin"}),this.route("create-portal",{path:"/create"}),this.route("user-types",(function(){this.route("index",{path:"/"}),this.route("create-user-type",{path:"/create"}),this.route("summary",{path:"/:userTypeId"},(function(){this.route("folders",{path:"/folders/:folderId"},(function(){this.route("templates",{path:"/templates/:templateId"})}))})),this.route("edit",{path:"/:userTypeId/edit"}),this.route("users",{path:"/:userTypeId/users"})}))})),this.route("messages",{path:"/messages"},(function(){this.route("services",{path:"/services"}),this.route("channels",{path:"/channels"}),this.route("templates",{path:"/templates"})})),this.route("schedules"),this.route("web-tabs",{path:"/web-tabs"},(function(){this.route("index-webtabs",{path:"/"}),this.route("create-webtabs",{path:"/create"}),this.route("edit-webtabs",{path:"/:webtabsId/edit"})})),this.route("globalpicklists",{path:"/global_picklists"}),this.route("email-settings"),this.route("email-sharing"),this.route("email-compose-settings"),this.route("email-sharing-preference"),this.route("email-preference"),this.route("custom-email-fields-preference"),this.route("email-configuration",{path:"/email-configuration"},(function(){this.route("email-compose-settings"),this.route("email-settings",(function(){this.route("email-index",{path:"/"}),this.route("email-create",{path:"/create"})})),this.route("email-sharing",{path:"/email-sharing"},(function(){this.route("email-sharing-preference",{path:"/email-sharing-preference"})})),this.route("organization-emails"),this.route("email-preference"),this.route("custom-email-fields-preference")})),this.route("email-intelligence",{path:"/email-intelligence"},(function(){this.route("email-insights"),this.route("sentiment-model")})),this.route("email-deliverability",{path:"/email-deliverability"},(function(){this.route("email-auth"),this.route("email-relay"),this.route("email-credibility")})),this.route("email-parser",(function(){this.route("index-email-parser",{path:"/"}),this.route("create-email-parser",{path:"/create"}),this.route("edit-email-parser",{path:"/:ruleId"})})),this.route("email-auth"),this.route("bcc-dropbox"),this.route("email-insights"),this.route("email-relay"),this.route("api-settings",{path:"/api"}),this.route("api-graph-view",{path:"/api/usage/graph-view"}),this.route("api-table-view",{path:"/api/usage/table-view"}),this.route("api-paid",{path:"/api/paid"}),this.route("api-modules",{path:"/api/modules"}),this.route("api-module-detail",{path:"/api/modules/:moduleName"}),this.route("zsc-key"),this.route("personal-settings"),this.route("keyboard-shortcuts"),this.route("accessibility"),this.route("alerts",(function(){this.route("index-alert",{path:"/"}),this.route("create-alert",{path:"/create"}),this.route("edit-alert",{path:"/:alertId/edit"}),this.route("view-alert",{path:"/:alertId"}),this.route("usage-workflow-alert",{path:"/usage"})})),this.route("workflow-message-notifications",{path:"/workflow-sms-notifications"},(function(){this.route("message-notifications",{path:"/notifications"},(function(){this.route("index-message-notification",{path:"/"}),this.route("view-message-notification",{path:"/:id"})})),this.route("message-templates",{path:"/templates"},(function(){this.route("index-message-template",{path:"/"}),this.route("view-message-template",{path:"/:id"})}))})),this.route("workflow-whatsapp-notifications",{path:"/workflow-whatsapp-notifications"},(function(){this.route("message-notifications",{path:"/notifications"},(function(){this.route("index-message-notification",{path:"/"}),this.route("view-message-notification",{path:"/:id"})})),this.route("message-templates",{path:"/templates"},(function(){this.route("index-message-template",{path:"/"}),this.route("view-message-template",{path:"/:id"})}))})),this.route("tasks",(function(){this.route("index-task",{path:"/"}),this.route("create-task",{path:"/create"}),this.route("edit-task",{path:"/:taskId/edit"}),this.route("view-task",{path:"/:taskId"})})),this.route("field-updates",(function(){this.route("index-field-update",{path:"/"}),this.route("create-field-update",{path:"/create"}),this.route("edit-field-update",{path:"/:id/edit"}),this.route("view-field-update",{path:"/:id"})})),this.route("webhooks",(function(){this.route("index-webhook",{path:"/"}),this.route("create-webhook",{path:"/create"}),this.route("edit-webhook",{path:"/:webhookId/edit"}),this.route("view-webhook",{path:"/:webhookId"}),this.route("usage-workflow-webhook",{path:"/usage"}),this.route("index-webhook-failure",{path:"/failures"})})),this.route("workflow-deluge",(function(){this.route("index-deluge",{path:"/"}),this.route("usage-workflow-function",{path:"/usage"}),this.route("index-function-failure",{path:"/failures"})})),this.route("actions-flow-library",{path:"/flow"}),this.route("case-escalation-rule",{path:"/escalation-rules"},(function(){this.route("index-case-escalation-rule",{path:"/"}),this.route("view-case-escalation-rule",{path:"/:ruleId"})})),this.route("webform",(function(){this.route("index-webform",{path:"/"}),this.route("create-webform",{path:"/create"}),this.route("edit-webform",{path:"/:id/edit"}),this.route("clone-webform",{path:"/:id/clone"}),this.route("view-webform",{path:"/:id"},(function(){this.route("preview-webform",{path:"/preview"}),this.route("webform-analytics",{path:"/analytics/:id"})})),this.route("module-analytics",{path:"/analytics/:dashboardid"})})),this.route("abtesting",(function(){this.route("index-abtesting",{path:"/"}),this.route("create-abtesting",{path:"/create"}),this.route("edit-abtesting",{path:"/:id/edit"}),this.route("view-abtesting",{path:"/:id"},(function(){this.route("preview-abtesting",{path:"/preview"}),this.route("analytics-abtesting",{path:"/analytics/:id"})}))})),this.route("sdks"),"undefined"!=typeof isAutoResponseEnabled&&isAutoResponseEnabled?this.route("auto-response-rules",(function(){this.route("view-rules",{path:"/"}),this.route("create",{path:"/create/:moduleName"}),this.route("view",{path:"/:ruleId"}),this.route("edit",{path:"/:ruleId/edit"})})):this.route("auto-response-rules",(function(){this.route("index-auto-response-rules",{path:"/"})})),this.route("unsubscribe-form"),this.route("unsubscribe-link",(function(){this.route("create-unsubscribe-link",{path:"/create"})})),this.route("crm-variables",{path:"/crmvariables"},(function(){this.route("index-crm-variable",{path:"/"}),this.route("create-crm-variable",{path:"/create"}),this.route("edit-crm-variable",{path:"/:id"})})),this.route("company-details",(function(){this.route("view-shift-hours",{path:"/:shift_id"})})),isnewCalendarBookingEnabled?this.route("calendar-booking",{path:"/booking"},(function(){this.route("index-calendar-booking",{path:"/"}),this.route("create-calendar-booking",{path:"/create"}),this.route("view-calendar-booking",{path:"/:calendar_booking_id/view"}),this.route("edit-calendar-booking",{path:"/:calendar_booking_id/edit"}),this.route("clone-calendar-booking",{path:"/:calendar_booking_id/clone"})})):this.route("booking",{path:"/booking"},(function(){this.route("create-booking",{path:"/create"}),this.route("edit-booking",{path:"/:booking_id/edit"}),this.route("clone-booking",{path:"/:booking_id/clone"}),this.route("index",{path:"/"})})),this.route("fiscal-year",(function(){this.route("index-fiscal",{path:"/"}),this.route("edit",{path:"/edit"})})),this.route("business-hours",(function(){this.route("index",{path:"/"}),this.route("create-shift-hours",{path:"/createShiftHours"}),this.route("view-shift-hours",{path:"/:shift_id"}),this.route("edit-shift-hours",{path:"/:shift_id/edit"})})),this.route("holidays"),this.route("currencies",(function(){this.route("index",{path:"/"}),this.route("currencies-old",{path:"/"})})),this.route("hierarchy-preference"),this.route("crm-templates",{path:"/templates"}),this.route("groups",(function(){this.route("index-groups",{path:"/"}),this.route("create-group",{path:"/create"}),this.route("view-group",{path:"/:group_id"}),this.route("edit-group",{path:"/:group_id/edit"})})),this.route("activate-users"),this.route("profiles",(function(){this.route("index-profiles",{path:"/"}),this.route("view-profile",{path:"/:profileId"})})),this.route("roles",{path:"/roles"},(function(){this.route("index-roles",{path:"/"}),this.route("create-role",{path:"/create"}),this.route("view-role",{path:"/:roleId"}),this.route("edit-role",{path:"/:roleId/edit"}),this.route("delete-role",{path:"/:roleId/delete"})})),this.route("data-sharing",(function(){this.route("index-data-sharing",{path:"/"},(function(){this.route("data-sharing-rule"),this.route("default-org-permissions")})),this.route("edit-default-data-sharing",{path:"/edit"}),this.route("create-data-sharing",{path:"/create"}),this.route("edit-data-sharing",{path:"/:id/edit"}),this.route("clone-data-sharing",{path:"/:id/clone"})})),this.route("zmail-users"),this.route("support-access"),this.route("custom-view",(function(){this.route("create-custom-view",{path:"/create"}),this.route("cvid",{path:"/:cv_id/"},(function(){this.route("clone-custom-view",{path:"/clone"}),this.route("edit-custom-view",{path:"/edit"})}))})),this.route("modules",(function(){this.route("index-modules",{path:"/"},(function(){this.route("create-module",{path:"/create"})})),this.route("module",{path:"/:moduleName"},(function(){this.route("canvas",{path:"/layouts/:layoutId/canvas"},(function(){this.route("create"),this.route("import"),this.route("edit",{path:"/:viewid/edit"}),this.route("clone",{path:"/:viewid/clone"})})),this.route("layouts",(function(){this.route("index-layouts",{path:"/"}),this.route("view-layout",{path:"/:layoutId"}),this.route("clone-layout",{path:"/:layoutId/clone"})})),this.route("jobsheet-layouts"),this.route("layout-rules",{path:"/layout-rules"},(function(){this.route("index-layout-rules",{path:"/"}),this.route("view-layout-rule",{path:"/:layoutRuleId"})})),this.route("validation-rules",{path:"/validation-rules"},(function(){this.route("index-validation-rules",{path:"/"}),this.route("view-validation-rule",{path:"/:validationRuleId"})})),this.route("record-locking",{path:"/locking-configuration"},(function(){this.route("index-record-locking",{path:"/"}),this.route("create-record-locking",{path:"/create"}),this.route("edit-record-locking",{path:"/edit"})})),this.route("preferences-module",{path:"/preferences"}),this.route("events_preferences",{path:"/events_preferences"}),this.route("summary-module",{path:"/summary"}),this.route("field-listing"),this.route("field-permissions"),this.route("links-and-buttons",{path:"/links"},(function(){this.route("index-links-and-buttons",{path:"/"}),this.route("create-links-and-buttons",{path:"/create"}),this.route("edit-links-and-buttons",{path:"/:buttonId"})})),this.route("map-dependency",(function(){this.route("index-map-dependency",{path:"/"}),this.route("create-map-dependency",{path:"/create"}),this.route("edit-map-dependency",{path:"/:uid"})})),this.route("custom-link",{path:"/custom-link"},(function(){this.route("index-custom-link",{path:"/"})})),this.route("conversion-mapping"),this.route("field-privacy"),this.route("custom-button",{path:"/buttons"},(function(){this.route("custom-button-index",{path:"/"}),this.route("custom-button-create",{path:"/create"}),this.route("custom-button-edit",{path:":buttonId/edit"})}))}))})),this.route("pipelines"),this.route("schedule-mass-email"),this.route("autoresponders",{path:"/auto-responders"},(function(){this.route("index-autoresponder",{path:"/"}),this.route("create-autoresponder",{path:"/create"}),this.route("edit-autoresponder",{path:"/:id/edit"}),this.route("view-autoresponder",{path:"/:id"}),this.route("create-folder",{path:"/folder/create"}),this.route("edit-folder",{path:"/folder/:id"})})),this.route("manage-mass-mail",{path:"/manage-mass-mail"},(function(){this.route("index-mass-mail",{path:"/"}),this.route("create-mass-mail",{path:"/create"}),this.route("edit-mass-mail",{path:"/:id/edit"}),this.route("view-mass-mail",{path:"/:id"})})),this.route("storage",{path:"/storage"},(function(){this.route("users-list",{path:"/users-list"},(function(){this.route("user-emailstorage",{path:"/user-emailstorage"},(function(){this.route("modules-list",{path:"/modules-list"},(function(){this.route("emails-list")}))}))}))})),this.route("recyclebin"),this.route("auditlog"),this.route("admincenter",{path:"/admintools"},(function(){this.route("index-admincenter",{path:"/"}),this.route("admincenter-history",{path:"/history"}),this.route("admincenter-deletiontool",{path:"/deletiontool"}),this.route("admincenter-tools",{path:"/tools"})})),this.route("remove-sample-data"),this.route("sandbox",(function(){this.route("sandbox-list",{path:"/"}),this.route("sandbox-detail",{path:"/:id"}),this.route("sandbox-deployment-logs",{path:"/deployments-logs"})})),this.route("copy-customization"),this.route("copy-customization-new",(function(){this.route("reauth")})),this.route("copy-customization-history"),this.route("home-customization",(function(){this.route("index-home-customization",{path:"/"})})),this.route("teamspace",(function(){this.route("index",{path:"/"}),this.route("create",{path:"/create"}),this.route("edit",{path:"/:id/edit"})})),this.route("translation-settings"),this.route("translation-history"),"undefined"!=typeof isMultiScoreAvail&&isMultiScoreAvail?this.route("scoring-rules",(function(){this.route("index-scoring-rule",{path:"/"}),this.route("create-scoring-rule",{path:"/create/:moduleName"}),this.route("edit-scoring-rule",{path:"/:ruleId"}),this.route("clone-scoring-rule",{path:"/:ruleId/clone"})})):this.route("scoring-rules"),this.route("cadences",{path:"/cadences"},(function(){this.route("index-series",{path:"/"}),this.route("create-series-config",{path:"/create"}),this.route("edit-series-config",{path:"/:ruleId"}),this.route("crm-series-showfunnel",{path:"/:ruleId/actions/analytics"}),this.route("crm-series-view-reports",{path:"/:ruleId/actions/analytics?action=Alert"})})),this.route("phonebridge-token"),this.route("phonebridge-platform"),this.route("tab-groups"),this.route("allowed-ips",(function(){this.route("index-allowed-ips",{path:"/"}),this.route("create-allowed-ips",{path:"/create"}),this.route("edit-allowed-ips",{path:"/:authDomainId"})})),this.route("crm-widgets",{path:"/widgets"}),this.route("components",(function(){this.route("home",{path:"/"}),this.route("edit",{path:"/:componentId/edit"}),this.route("editor",{path:"/:componentId/editor"})})),this.route("crm-data-model",{path:"/data-model"}),this.route("crm-data-hub",{path:"/queries"}),this.route("crm-data-hub-source",{path:"/queries-sources"}),this.route("crm-cscript",{path:"/cscript"}),this.route("crm-static-resource",{path:"/static-resource"}),this.route("crm-trusted-domain",{path:"/trusted-domain"}),this.route("functions",(function(){this.route("myFunctions",{path:"/myFunctions"}),this.route("functionsdashboard",{path:"/dashboard"}),this.route("functionsfailures",{path:"/failures"}),this.route("functionsgallery",{path:"/gallery"}),this.route("functionscredits",{path:"/credits"})})),this.route("circuits",(function(){this.route("circuitswelcome",{path:"/welcome"}),this.route("main",{path:"/"},(function(){this.route("myCircuits",{path:"myCircuits"}),this.route("executionLog",{path:"executionLogs"}),this.route("credits",{path:"/credits"})}))})),this.route("connections"),"undefined"!=typeof territoryLyteRevampEnabled&&territoryLyteRevampEnabled?(this.route("territories",(function(){this.route("index-territories",{path:"/"}),this.route("create-territory",{path:"/create"}),this.route("edit-territory",{path:"/:territoryId/edit"})})),this.route("territory-rules"),this.route("territory-assign")):(this.route("old-territories",{path:"/territories"},(function(){this.route("old-index-territories",{path:"/"}),this.route("old-create-territory",{path:"/create"}),this.route("old-edit-territory",{path:"/:territoryId/edit"})})),this.route("old-territory-rules",{path:"/territory-rules"}),this.route("old-territory-assign",{path:"/territory-assign"})),this.route("organization-emails"),this.route("game-settings"),this.route("macro",(function(){this.route("index",{path:"/"}),this.route("create"),this.route("view",{path:"/:id"}),this.route("edit",{path:"/:id/edit"})})),this.route("zia",(function(){this.route("data-enrichment",{path:"/data-enrichment"},(function(){this.route("index-data-enrichment",{path:"/"}),this.route("edit",{path:"/:id/edit"}),this.route("history-data-enrichment",{path:"/history"}),this.route("stats-data-enrichment",{path:"/stats"})})),this.route("smart-prompt"),this.route("admin-panel"),this.route("similarity",(function(){this.route("list",{path:"/list"}),this.route("create",{path:"/create"}),this.route("view",{path:"/:id"}),this.route("edit",{path:"/:id/edit"}),this.route("error",{path:"/error"})})),this.route("recommendation",(function(){this.route("create",{path:"/create"}),this.route("index",{path:"/list"}),this.route("edit",{path:"/:id/edit"}),this.route("view",{path:"/:id"}),this.route("error",{path:"/error"}),this.route("gallery",{path:"/gallery"})})),this.route("recommendation-analytics",(function(){this.route("view",{path:"/:id"}),this.route("error",{path:"/error"})})),this.route("callanalytics",{path:"/callintelligence"}),this.route("calltranscription",{path:"/calltranscription"}),this.route("reminder",{path:"/reminder"}),this.route("inemailnew",{path:"/inemailnew"}),this.route("emailintent",(function(){this.route("routeerror",{path:"/"}),this.route("index",{path:"/"}),this.route("customintent",{path:"/customintent"},(function(){this.route("view",{path:"/:id"}),this.route("create",{path:"/create"}),this.route("edit",{path:"/edit/:id"}),this.route("emails_content",{path:"/:id/emails_content"}),this.route("files",{path:"/:id/files_content"})}))})),this.route("besttime",(function(){this.route("analytics",{path:"/analytics"})})),this.route("autosuggestion",{path:"/autosuggestion"}),this.route("notification",(function(){this.route("recommendation",{path:"/recommendation"}),this.route("presentation",{path:"/presentation"}),this.route("anomaly",{path:"/anomaly"}),this.route("workflow",{path:"/workflow"}),this.route("ziaforemail",{path:"/ziaforemail"})})),this.route("presentations",(function(){this.route("index",{path:"/"}),this.route("view",{path:"/:id"}),this.route("create",{path:"/create"}),this.route("edit",{path:"/:id/edit"})})),this.route("sentiment-model"),this.route("zia-voice",(function(){this.route("index",{path:"/"}),this.route("view",{path:"/:id"}),this.route("create",{path:"/create"}),this.route("edit",{path:"/:id/edit"})})),this.route("prediction",(function(){this.route("builder",(function(){this.route("field",(function(){this.route("list",{path:"/"}),this.route("create"),this.route("edit",{path:"/:id/edit"}),this.route("view",{path:"/:id"})})),this.route("churn",(function(){this.route("list",{path:"/"}),this.route("create"),this.route("edit",{path:"/:id/edit"}),this.route("view",{path:"/:id"})}))})),this.route("analytics")})),this.route("vision",(function(){this.route("duplicate-image-detection",{path:"/duplicate-image-detection"}),this.route("image-validation",(function(){this.route("create",{path:"/create"}),this.route("view",{path:"/:id"}),this.route("edit",{path:"/:id/edit"}),this.route("index",{path:"/"}),this.route("training-data",{path:"/:id/training-data"})}))})),this.route("custom-ai")})),this.route("voice-of-customer",(function(){this.route("voice-of-customer-index",{path:"/"}),this.route("exclusion",{path:"/exclusion"},(function(){this.route("excluded-mails",{path:"/excluded-mails"}),this.route("suggested-mails",{path:"/suggested-mails"})}))})),this.route("inventory-management"),this.route("settings-wildcard",{path:"/*wildcard"}),this.route("section-error",{path:"/*error-page-url"}),this.route("compliance",(function(){this.route("consent-dashboard",(function(){this.route("list-view")})),this.route("privacy-preference"),this.route("consent-form"),this.route("hipaa")})),this.route("review-process",(function(){this.route("index-review-process",{path:"/"}),this.route("create-review-process",{path:"/create/:module"}),this.route("edit-review-process",{path:"/:id"})})),this.route("review-usage",(function(){this.route("index-review-usage",{path:"/"}),this.route("view-review-usage",{path:"/view/:dashboardid"})})),this.route("path-finder",{path:"/commandcenter/path-finder"},(function(){this.route("index-path-finder",{path:"/"}),this.route("pathfinder-details",{path:"/:id"},(function(){this.route("edit-pathfinder",{path:"/"}),this.route("view-touchpoints",{path:"/view"}),this.route("report",{path:"/report/path"}),this.route("sankey",{path:"/report/sankey"}),this.route("journey",{path:"/report/journey"})}))})),this.route("attributions",{path:"/attributions"}),this.route("index",{path:"/index"}),this.route("orchestration",{path:"/commandcenter"},(function(){this.route("index-orchestration",{path:"/journey-builder"}),this.route("edit-orchestration",{path:"journey-builder/:id"}),this.route("orchestration-reports",{path:"journey-builder/:id/reports"}),this.route("edit-orchestration-old",{path:"/:id"}),this.route("orchestration-reports-old",{path:"/:id/reports"})})),this.route("domain-mapping",{path:"/domain-mapping"}),this.route("kiosk",{path:"/kiosk"},(function(){this.route("index-kiosk",{path:"/"}),this.route("edit-kiosk-builder",{path:"/:id"})})),this.route("canvas-builder",(function(){this.route("listview"),this.route("detailview",(function(){this.route("views",{path:"/"})})),this.route("formview"),this.route("wizardview"),this.route("canvasrules")})),this.route("competitor-alerts",(function(){this.route("competitor-alerts-index",{path:"/"}),this.route("competitor-alert-create",{path:"/create"}),this.route("competitor-alert-record",{path:"/:alertId"},(function(){this.route("competitor-alert-view",{path:"/"}),this.route("competitor-alert-edit",{path:"/edit"})}))})),this.route("zohocpq",{path:"zohocpq/:configurationName"},(function(){this.route("index-zohocpq",{path:"/"}),this.route("configurator-create",{path:"/create"}),this.route("configurator-edit",{path:"/:recordId/edit"})}))})),this.route("kanban-begin",{path:"/kanban/begin"}),this.route("canvas",(function(){this.route("begin"),this.route("create",{path:"/create"}),this.route("import",{path:"/import"}),this.route("clone",{path:"/:viewid/clone"}),this.route("edit",{path:"/:viewid/edit"})}))})),this.route("crm-calendar",{path:"/calendar"}),this.route("global-search",{path:"/search"}),this.route("wildcard",{path:"/*wildcard"}),this.route("crm-error",{path:"/*error-page-url"}),this.route("emailAdminTool"),this.route("deletionAdminTool"),this.route("offlineBackupAdminTool"),this.route("dcMigrationAdminTool"),this.route("cpqadmintool"),this.route("exportAuditLogAdminTool"),this.route("supportAccessAdminTool"),this.route("exportAdminTool"),this.route("importAdminTool"),this.route("offlineQueryConsoleAdminTool"),this.route("sccLogs"),this.route("gamification",{path:"/gamification"},(function(){this.route("home",{path:"/home"}),this.route("live",{path:"/live"}),this.route("dashboards",{path:"/dashboards"},(function(){this.route("index",{path:"/"})})),this.route("rules",{path:"/rules"},(function(){this.route("list",{path:"/list"}),this.route("dashboards",{path:"/:id"}),this.route("index",{path:"/"})})),this.route("targets",{path:"/targets"},(function(){this.route("dashboard",{path:"/:id"}),this.route("index",{path:"/"}),this.route("list")})),this.route("game",{path:"/game"},(function(){this.route("index",{path:"/"}),this.route("scoreboard",{path:"/:game_id/scoreboard"}),this.route("point-summary",{path:"/:game_id/point_summary"})})),this.route("achievements",{path:"/achievements"}),this.route("tvchannel",{path:"/tvchannel"},(function(){this.route("slides",{path:"/slides"}),this.route("index",{path:"/"})})),this.route("team",{path:"/team"})})),this.route("abm-edit-orchestration",{path:"/abm/orchestrations/journey-builder/:id"}),this.route("abm",{path:"/abm/*"})})),this.route("crm-print",{path:app.crmNamespace+"/tab/:moduleId"},(function(){this.route("export-pdf",{path:"/:entity_id/export-pdf"}),this.route("send-mail",{path:"/:entity_id/send-mail"})})),this.route("zia-voice"),this.route("review-usage"),this.route("crossorg",{path:"crm/settings/section/extensions/zoho-extensions"}),this.route("gamification",{path:"/gamification"},(function(){this.route("rules",{path:"/rules"})})),this.route("live"),this.route("index",{path:"routes/crm/settings/section/client-portal/user-types"}),this.route("keyboard-shortcuts")})),Lyte.addEventListener("onBeforeInject",(function(e){var t=e.tag;"SCRIPT"==t.tagName&&app.crossOriginEnabled&&t.getAttribute("src").includes("/crm/")&&t.setAttribute("crossorigin",app.crossOriginEnabled)})),Lyte.addEventListener("beforeTemplateDestroy",(function(e){var t=e.outlet;thirdPartyUtils.unbindChildEvents(t),!Lyte.Router.getRouteInstance().transition.preservePopup&&$("#profilePageCOBForm").length<1&&(renderingUtils.removeFreezeLayer(),renderingUtils.hideFreezeLayer())})),Lyte.Router.beforeRouteTransition=function(e,t,i){var s=$L("crm-validation-alert");if(s&&s[0]&&s[0].remove(),crmConstants&&crmConstants.isClientMetricsSoftNavigationEnabled&&crmConstants.isLoadCompleted&&!crmConstants.murphySoftNavigationTrackStarted){murphy&&murphy.clientmetrics&&murphy.clientmetrics.isClientMetricsInstalled()&&e&&t&&t.url!==e.url&&(murphy.clientmetrics.setCustomTags({routeName:t.target,prevRouteName:e.target,moduleName:commonUtils?commonUtils.getModuleNameFromUrl(t.url):"",prevModuleName:commonUtils?commonUtils.getModuleNameFromUrl(e.url):""},"update"),crmConstants.murphySoftNavigationTrackStarted=!0,murphy.clientmetrics.startSoftNavigation())}var o=document.querySelector("crm-left-menu");if("crm.settings.index"===t.target&&o&&"undefined"!==o){t.abort();var r=o.getData("lastAccessedRoute");if(""===r&&Crm.firstAvailableRouterObj)Lyte.Router.transitionTo({route:Crm.firstAvailableRouterObj});else if(""===r)Lyte.Router.transitionTo("crm.settings.section.personal-settings");else{var a=o.getData("lastAccessedDynamicParam"),n=o.getData("lastAccessedQueryParam");Lyte.Router.transitionTo({route:r,dynamicParams:[a],queryParams:n})}}if(Lyte.registeredMixins["crm-create-init-mixin"]&&Lyte.registeredMixins["crm-create-init-mixin"].cscriptMenuLessUIHandling(t,"beforeRouteTransition",e),"crm.global-search"!==t.info.route){var c=$L("crm-global-search-popup")[0];c&&c.component.methods.closePopup()}if(Crm.userDetails.isNewEditor&&"undefined"!=typeof EmailSendingUtil&&EmailSendingUtil.composeActive){var u=document.getElementsByTagName("crm-emailrelatedlist-attachment")[0];u&&u.component&&u.component.setData("showRelPop",!1),EmailCompose.etMinimiseCompose(),EmailComposeUtil.hideAllComposeRelatedPopup()}if("false"===RebrandLinkUtil.getProperties("IS_LOCAL_ZOHO").IS_LOCAL_ZOHO&&"false"===RebrandLinkUtil.getProperties("ISDEVELOPMENT").ISDEVELOPMENT&&"US"===RebrandLinkUtil.getProperties("DeploymentLocation").DeploymentLocation&&Crm.userDetails&&"A"!==Crm.userDetails.LICENSE_TYPE_ACTUAL&&"A"===Crm.userDetails.LICENSE_TYPE){var l=$L.moment().toDate();if(Crm.userDetails.ORG_CREATED_TIME>l.getTime()-2592e6&&"undefined"!=typeof globalSetpJson&&globalSetpJson&&globalSetpJson.components){var d,m,h,p;switch(globalSetpJson.components.forEach((function(i){for(var s=i.menus,o=s.length,r=0;r<o&&!d;r++)for(var a=s[r],n=a.sub_menus,c=n.length,u=0;u<c;u++){var l=n[u],h=t.target,p=e.target;if(h&&l.routeName===h||-1!==h.indexOf("index-orchestration")&&"crm.settings.section.orchestration"===l.routeName||-1!==h.indexOf("index-path-finder")&&"crm.settings.section.path-finder"===l.routeName||-1!==h.indexOf("index-review-process")&&"crm.settings.section.review-process"===l.routeName&&p!==h){m=l.display_label,d=a.display_label;break}}})),d){case"Blueprint":case"Workflow Rules":case"Users":case"Modules and Fields":case"Email":case"Zoho":case"Google":h=null;break;default:h=RebrandLinkUtil.getProperties("PF_SETUP_FEATURES").PF_SETUP_FEATURES,p=RebrandLinkUtil.getProperties("PF_SETUP_FEATURES_ID").PF_SETUP_FEATURES_ID}m&&d&&null!==h&&gS.trackOnboardUsingPF(h,p,void 0,d)}}let g=$L("crm-lux-editor-new")[0];if(g&&g.component&&g.component.getData("show")){let e=$L("slyte-page-builder")[0];if(g.component.data.is_editor_dirty||e&&e.getDirtyFiles().length)return t.abort(),void history.go(1)}if(CScriptLib){const e=document.querySelectorAll("crm-cscript-editor")[0];var f=!1;if(e&&e.component&&e.component.getData("show")){const t=e.component;t.getData("is_dirty")?!t.getData("is_saving")&&t.actions.cancel_editor.call(t):t.actions.close_editor.call(t),f=!0}if(f)return t.abort(),void history.go(1);const i=document.querySelectorAll("crm-cscript-create")[0];if(i&&i.component&&i.component.getData("show_create_popup")&&i.component.actions.close_popup.call(i),crmHistory.loaded&&_cscript&&_cscript._preview&&window.parent.document.dispatchEvent(new CustomEvent("CSCRIPT_PREVIEW",{detail:{type:"route_change"}})),!crmHistory.loaded)try{const e=window.opener||window.parent.opener;e&&e._cscript&&e._cscript._global_custom_data&&(_cscript._global_custom_data={...e._cscript._global_custom_data},e._cscript._global_custom_data=null)}catch(e){murphy.error(e)}CScript.Engine.Global.Destroy()}const y=document.querySelectorAll("crm-data-model")[0];if(y){const e=y.component;if(e.getData("show_modal"))return e.setData({show_modal:!1,show_connection_info:!1}),t.abort(),void history.go(1)}let b="undefined"!=typeof customFunctionsObj&&customFunctionsObj.delugeEditor.node;if(b){let e=b.component,i=this.getRouteInstance().routeName;return customFunctionsObj.ignoreButtonRoute=["create-links-and-buttons","edit-links-and-buttons","custom-button-edit","custom-button-create"].includes(i),e.actions.onClose.call(e),t.abort(),void history.go(1)}if(e&&e.info&&e.info.route&&e.info.dynamicParams&&"crm.settings.section.zohocpq.configurator-create"===e.info.route&&("priceRules"===e.info.dynamicParams[0]||"productConfigurator"===e.info.dynamicParams[0]||"guidedSelling"===e.info.dynamicParams[0])&&t&&t.info&&t.info.route&&"crm.settings.section.zohocpq.index-zohocpq"===t.info.route&&i&&i.fromHistory&&("back"===i.fromHistory||"reload"===i.fromHistory)){t.abort();var v="crm-cpqpricerulecontainer",_="showErrorPopupFromRouteJs";return"productConfigurator"===e.info.dynamicParams[0]?(v="crm-productconfigurator-header",_="showCancelPopupForOtherTransitions"):"guidedSelling"===e.info.dynamicParams[0]&&(v="crm-cpq-gscreate",_="showCancelPopupForOtherTransitions"),void $L(v)[0].component.executeMethod(_)}if(e&&e.info&&e.info.route&&e.info.dynamicParams&&"crm.settings.section.zohocpq.configurator-edit"===e.info.route&&("priceRules"===e.info.dynamicParams[0]||"productConfigurator"===e.info.dynamicParams[0]||"guidedSelling"===e.info.dynamicParams[0])&&t&&t.info&&t.info.route&&"crm.settings.section.zohocpq.index-zohocpq"===t.info.route&&i&&i.fromHistory&&("back"===i.fromHistory||"reload"===i.fromHistory)){v="crm-cpqpriceruleheader",_="showErrorPopupFromRouteJs";if("productConfigurator"===e.info.dynamicParams[0]&&(v="crm-productconfigurator-header",_="showCancelPopupForOtherTransitions"),"guidedSelling"===e.info.dynamicParams[0]&&(v="crm-cpq-gscreate",_="showCancelPopupForOtherTransitions"),$L(v)[0].component.executeMethod("checkChangesForOtherTransitions"))return t.abort(),"priceRules"===e.info.dynamicParams[0]&&(v="crm-cpqpricerulecontainer"),void $L(v)[0].component.executeMethod(_)}else e&&e.info&&e.info.route&&"crm.settings.section.zohocpq.index-zohocpq"===e.info.route&&t&&t.info&&t.info.route&&t.info.dynamicParams&&"crm.settings.section.zohocpq.configurator-create"===t.info.route&&("priceRules"===t.info.dynamicParams[0]||"productConfigurator"===t.info.dynamicParams[0]||"guidedSelling"===e.info.dynamicParams[0])&&i&&i.fromHistory&&("back"===i.fromHistory||"reload"===i.fromHistory)&&(t.abort(),"priceRules"===t.info.dynamicParams[0]?Lyte.Router.transitionTo("crm.settings.section.zohocpq.index-zohocpq","priceRules").data={redirect:!0}:"guidedSelling"===e.info.dynamicParams[0]?Lyte.Router.transitionTo("crm.settings.section.zohocpq.index-zohocpq","guidedSelling").data={redirect:!0}:Lyte.Router.transitionTo("crm.settings.section.zohocpq.index-zohocpq","productConfigurator").data={redirect:!0});var w=$L("crm-entity-lookup")[0];if(void 0!==w&&w.component.actions.checkBrowserBack(),app.prevTransition=e?JSON.parse(JSON.stringify(e.info)):{},app.nextTransition=t,Crm.userDetails.isNewEditor&&"undefined"!=typeof EmailSendingUtil&&EmailSendingUtil.composeActive){var x=$L("#ecwDraftPop")[0];x&&x.ltProp("show",!1),EmailCompose.etMinimiseCompose()}if("true"!==RebrandLinkUtil.getProperty("IS_LOCAL_ZOHO")&&(t.target.indexOf("custom-view")>-1||t.target.indexOf("settings")>-1&&!(t.target.indexOf("crm.settings.import")>-1)||t.target.indexOf("entity.detail")>-1)&&(app.newSubVersion!=crmConstants.subVersion||Crm.userDetails.refreshPage)&&(history.pushState(t.data,document.title,t.url),Utils.windowLocationReload()),i.fromHistory&&e&&"crm.tab.module.create"===t.target&&"crm.tab.module.create"===e.target&&Lyte.registeredMixins["crm-create-init-mixin"].checkLyteConvertionSupport(t.info.dynamicParams[0])){t.data.isRefresh=!0;var L=$L("crm-create-layout crm-create-buttons")[0];L&&L.component&&L.component.setData&&L.component.setData("disableFormbuttons",!1)}commonUtils.showHideLoadingDiv(!0),i.initial&&t.data&&!0!==t.data.showError&&(t.data=void 0),i.fromHistory&&-1!=t.target.indexOf("custom-view")&&!crmHistory.doNotReload&&(crmHistory.transitionError?crmHistory.transitionError=!1:(t.data=t.data?t.data:{},t.data.reloadAll=!0)),crmHistory.doNotReload=!1;var k=["crm.tab.module.custom-view.list","crm.tab.module.custom-view.zia","crm.tab.module.custom-view.kanban","crm.tab.module.custom-view.canvas","crm.tab.messages.custom-view.list"];if(i.fromHistory&&e&&k.contains(e.target)){var R=e.info.dynamicParams[0];Lyte.registeredMixins["crm-view-utils"]&&Lyte.registeredMixins["crm-view-utils"].hideMoreActions(R)}i.fromHistory&&crmHistory.loaded&&!crmHistory.fromProgBack&&(crmHistory.length=crmHistory.length-2,crmHistory.length<-1&&(crmHistory.length=0)),crmHistory.fromProgBack=!1,$(".select2-container--open").prev("select").select2("close"),$("[data-type='popUp'], #viewInviteesPop, #emailInviteesPop, #eventCreatePopup, #createEditCallDiv, #topBandPopup, #searchCreatePopup, #deletepopup, #custom_alert_popup, #bulkUpdateFldsList, #templateComponentDIV, #templatePreviewDIV, #templateAnalyticsDIV, #unsupportedMergeFieldPop, #eventCreateDelPopup").hide(),crmui.hidePopup("newRelatedListPopUpDiv");var C=$L("#crmPortalFailureListPopup");if(C.length>0&&C[0]&&C[0].remove(),$("#lyteCallForm").html(""),"crm.tab.module.entity.canvas"===t.info.route&&$("#entityLookupdiv").remove(),$("#freezeBackGround").hide(),"true"!==t.info.queryParams.headless&&!$("#recentMailsDiv").is(":visible"))if(Crm.globalHideMenuCall)Crm.globalHideMenuCall=!1;else if("crm.tab.module.entity.detail"===t.target||"crm.tab.module.entity"===t.target){var P=t.info.dynamicParams[0];"Activities"===P&&(P=t.info.queryParams.sub_module),Crm.renderDVLyteFlow(P)||hideMenu()}else hideMenu();$("#shownotes").hide();var I=t.target;if(t.data=t.data||{},app.store=new crmStore,e&&k.contains(e.target)&&k.contains(t.target)&&Lyte.Router.__lp.trans.R.forEach((function(e){delete e._fetchStatus})),e&&e.target&&t&&"crm.settings.section.calendar-booking.index-calendar-booking"===t.target&&t.data&&!t.data.module&&(t.data.module=e.data.module),t.data.backOneLevel)"crm.tab.module.begin"===I&&e&&"crm.tab.module.begin"!==e.target&&t.data&&t.data.changeView?t.data={}:"crm.settings.section.email-configuration.email-sharing"===I&&e&&"crm.settings.section.email-configuration.email-sharing.email-sharing-preference"===e.target&&(t.data=t.data||{},t.data.from_preference=!0);else{if(e&&e.target&&"crm.settings.section.extensions.all-extensions"===I)(D=e.target.split("."))[5]&&Object.values(crmSetup.zohoExtensionsRouteMapping).indexOf(D[5])>-1&&(t.data.showInstalled=!0);if(e&&"crm.tab.module.entity.find-and-merge"===t.target&&"crm.tab.module.entity.canvas"===e.target?Crm.ViewedCanvasState=e:e&&"crm.tab.module.actions.deduplicate.merge"!==t.target&&"crm.tab.module.actions.deduplicate.merge"!==e.target&&(Crm.ViewedCanvasState=void 0),t&&!newForecastsEnabled&&t.info&&t.info.route&&("crm.tab.module.entity.detail"===t.info.route||"crm.tab.module.entity.edit"===t.info.route)&&t.info.dynamicParams.contains("Forecasts"))this.replaceWith("crm.tab.forecasts");else{switch(e&&"crm.settings.canvas.create"!==e.target&&["crm.settings.canvas.create","crm.settings.canvas.edit"].includes(t.target)&&(Crm.canvasNav=commonUtils.getRouteObject(e)),I){case"crm.settings.section.email-configuration.email-sharing":e&&"crm.settings.section.email-configuration.email-sharing.email-sharing-preference"===e.target&&(t.data=t.data||{},t.data.from_preference=!0);break;case"crm.tab.module.create.canvas":break;case"crm.tab.messages.view":case"crm.tab.module.entity":case"crm.tab.module.entity.detail":if(e)switch(O=e.toolTip,e.target){case"crm.tab.messages.view":case"crm.tab.module.entity.detail":case"crm.tab.module.entity.edit":case"crm.tab.module.create":e.info.dynamicParams[0]!=t.info.dynamicParams[0]||t.data.fromRL?z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1:(z=e.data&&e.data.backOneLevel?e.data.backOneLevel.historyIndex:Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:[t.info.dynamicParams[0]],toolTip:moduleRecordMapping[t.info.dynamicParams[0]].plural_label})-1,O=Crm.newHistoryArr[z]?Crm.newHistoryArr[z].toolTip:""),Crm.isActivitySplitDone&&"crm.tab.module.entity.detail"===e.target&&moduleRecordMapping&&moduleRecordMapping[e.info.dynamicParams[0]]&&moduleRecordMapping[t.info.dynamicParams[0]]&&moduleRecordMapping.Activities&&!1===moduleRecordMapping.Activities.show_as_tab&&moduleRecordMapping[t.info.dynamicParams[0]].parent_module&&"Activities"===moduleRecordMapping[t.info.dynamicParams[0]].parent_module.module_name&&"Activities"===e.info.dynamicParams[0]&&(Crm.newHistoryArr.deleteElementAt(z),(z-=1)>-1&&Crm.newHistoryArr[z]&&Crm.newHistoryArr[z].dynamicParams&&"Activities"==Crm.newHistoryArr[z].dynamicParams[0]&&(Crm.newHistoryArr[z].dynamicParams[0]=t.info.dynamicParams[0],Crm.newHistoryArr[z].toolTip="Activities"===Crm.newHistoryArr[z].toolTip?t.info.dynamicParams[0]:Crm.newHistoryArr[z].toolTip));break;case"crm.tab.module.begin":if("Home"!==e.info.dynamicParams[0]){O=moduleRecordMapping[t.info.dynamicParams[0]].plural_label,z=Crm.newHistoryArr.push({route:"crm.tab.module.index-module",dynamicParams:[t.info.dynamicParams[0]]})-1;break}case"crm.tab.module.custom-view.canvas":case"crm.tab.module.custom-view.list":case"crm.tab.module.custom-view.kanban":case"crm.tab.module.custom-view.zia":case"crm.global-search":case"crm.tab.module.actions.approve":case"crm.tab.module.actions.mass-tools":case"crm.tab.reports.records":case"crm.tab.dashboards.dashboardId.records":case"crm.tab.forecasts.pipeline":case"crm.tab.module.actions.approvals":case"crm.tab.module.actions.add-to-campaigns":case"crm.tab.messages.custom-view.list":case"crm.settings.section.calendar-booking":case"crm.settings.section.calendar-booking.index-calendar-booking":case"crm.settings.section.calendar-booking.view-calendar-booking":z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1;break;case"crm.tab.module.entity.canvas":z=e.info.dynamicParams[0]!=t.info.dynamicParams[0]?Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1:e.data.backOneLevel.historyIndex;break;case"crm.settings.section.compliance.consent-dashboard.list-view":O=I18n.getMsg("crm.label.gdpr.compliance"),z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1;break;default:"crm.tab.messages.view"===I?(O=moduleRecordMapping.Messages.plural_label,z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1):(O=moduleRecordMapping[t.info.dynamicParams[0]].plural_label,z=Crm.newHistoryArr.push({route:"crm.tab.module.index-module",dynamicParams:[t.info.dynamicParams[0]]})-1)}else{var M=t.info.dynamicParams[0];if("crm.tab.module.entity.detail"==I&&null==moduleRecordMapping[M]&&moduleRecordMapping[M+"/"+t.info.dynamicParams[1]])return void setTimeout((function(){Lyte.Router.replaceWith("crm.tab.module",M+" "+t.info.dynamicParams[1])}),0);if("crm.tab.module.entity.detail"===I&&featuresAvailable.NEXTGENUI_ENABLED&&featuresAvailable.TEAMSPACE_ENABLED&&featuresAvailable.TEAM_MODULE_ENABLED&&Lyte.Component.registeredHelpers.isRequesterTeamModule(M))return void Lyte.Router.transitionTo({route:"crm.tab.requesters.module.index-module.entity.detail",dynamicParams:[M,t.info.dynamicParams[1]]});var A=moduleRecordMapping[M];if(A)O=A.plural_label,z=Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:[t.info.dynamicParams[0]]})-1;else if(M.startsWith("CustomModule")){var S=networkUtils.getOrgSpecificURL(Crm.getCrmBasePath()+"/"),E=window.location.pathname.split(S)[1];return void(this.replaceWith("crm.crm-error",E).data={showError:!0,module:M,errorMsg:I18n.getMsg("module.not.available")})}}Crm.newHistoryArr[z]&&(Crm.newHistoryArr[z].toolTip=O);break;case"crm.tab.module.entity.canvas":var O;if(e)switch(O=e.toolTip,e.target){case"crm.tab.messages.view":case"crm.tab.module.entity":case"crm.tab.module.entity.detail":t.data&&t.data.replaced?(delete t.data.replaced,z=e.data.backOneLevel.historyIndex):z=e.info.dynamicParams[0]!=t.info.dynamicParams[0]?Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1:e.data.backOneLevel.historyIndex;break;case"crm.tab.module.entity.canvas":case"crm.tab.module.entity.edit":case"crm.tab.module.entity.edit.canvas":case"crm.tab.module.create":e.info.dynamicParams[0]!=t.info.dynamicParams[0]||t.data.fromRL?z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1:(e.data&&e.data.backOneLevel?(z=e.data.backOneLevel.historyIndex||0,"crm.tab.module.custom-view.list"!==Crm.newHistoryArr[z].route&&"crm.tab.module"!==Crm.newHistoryArr[z].route&&(z=Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:[t.info.dynamicParams[0]],toolTip:moduleRecordMapping[t.info.dynamicParams[0]].plural_label})-1)):z=Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:[t.info.dynamicParams[0]],toolTip:moduleRecordMapping[t.info.dynamicParams[0]].plural_label})-1,O=Crm.newHistoryArr[z].toolTip);break;case"crm.tab.module.begin":if("Home"!==e.info.dynamicParams[0]){O=moduleRecordMapping[t.info.dynamicParams[0]].plural_label,z=Crm.newHistoryArr.push({route:"crm.tab.module.index-module",dynamicParams:[t.info.dynamicParams[0]]})-1;break}case"crm.tab.module.custom-view.canvas":case"crm.tab.module.custom-view.list":case"crm.tab.module.custom-view.kanban":case"crm.tab.module.custom-view.zia":case"crm.global-search":case"crm.tab.module.actions.approve":case"crm.tab.module.actions.mass-tools":case"crm.tab.reports.records":case"crm.tab.dashboards.dashboardId.records":case"crm.tab.forecasts.pipeline":case"crm.tab.module.actions.approvals":case"crm.tab.module.actions.add-to-campaigns":z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1;break;case"crm.settings.section.compliance.consent-dashboard.list-view":O=I18n.getMsg("crm.label.gdpr.compliance"),z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1;break;default:O=moduleRecordMapping[t.info.dynamicParams[0]].plural_label,z=Crm.newHistoryArr.push({route:"crm.tab.module.index-module",dynamicParams:[t.info.dynamicParams[0]]})-1}else{M=t.info.dynamicParams[0];if("crm.tab.module.entity.detail"==I&&null==moduleRecordMapping[M]&&moduleRecordMapping[M+"/"+t.info.dynamicParams[1]])return void setTimeout((function(){Lyte.Router.replaceWith("crm.tab.module",M+" "+t.info.dynamicParams[1])}),0);O=moduleRecordMapping[M].plural_label,z=Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:[t.info.dynamicParams[0]]})-1}Crm.newHistoryArr[z].toolTip=O;break;case"crm.settings.clone-home-customization":if(!e){z=Crm.newHistoryArr.push({route:"crm.settings.section.home-customization.index-home-customization"})-1;break}z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1;break;case"crm.settings.section.macro.view":if(e){z=Crm.newHistoryArr.push({route:"crm.settings.section.macro.index",queryParams:{module:t.info.queryParams.module}})-1;break}case"crm.tab.module.entity.find-and-merge":e&&"crm.tab.module.entity.canvas"===e.target?z=Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1:e&&e.target!==I||(z=Crm.newHistoryArr.push({route:"crm.tab.module.entity.detail",dynamicParams:[t.info.dynamicParams[0],t.info.dynamicParams[1]]})-1);break;case"crm.settings.section.extensions.zoho-extensions.zanalytics":case"crm.settings.section.extensions.zoho-extensions.reports":case"crm.settings.section.extensions.zoho-extensions.creator":case"crm.settings.section.extensions.zoho-extensions.projects":case"crm.settings.section.extensions.zoho-extensions.survey":case"crm.settings.section.extensions.zoho-extensions.finance-suite":case"crm.settings.section.extensions.zoho-extensions.desk":case"crm.settings.section.extensions.zoho-extensions.writer":case"crm.settings.section.extensions.zoho-extensions.motivator":case"crm.settings.section.extensions.zoho-extensions.webinar":case"crm.settings.section.extensions.zoho-extensions.meeting":case"crm.settings.section.extensions.zoho-extensions.cliq":case"crm.settings.section.extensions.zoho-extensions.showtime":case"crm.settings.section.extensions.zoho-extensions.forms":case"crm.settings.section.extensions.zoho-extensions.campaigns":case"crm.settings.section.extensions.zoho-extensions.campaigns.syncs":case"crm.settings.section.extensions.zoho-extensions.campaigns.campaigns-field-mapping":case"crm.settings.section.extensions.zoho-extensions.campaigns.crm-to-campaign-settings":case"crm.settings.section.extensions.zoho-extensions.backstage":case"crm.settings.section.extensions.zoho-extensions.pagesense":case"crm.settings.section.extensions.zoho-extensions.assist":case"crm.settings.section.extensions.zoho-extensions.contracts":case"crm.settings.section.extensions.zoho-extensions.sign":case"crm.settings.section.extensions.zoho-extensions.bookings":case"crm.settings.section.extensions.zoho-extensions.fsm":case"crm.settings.section.extensions.zoho-extensions.leadchain":case"crm.settings.section.extensions.zoho-extensions.cpq":case"crm.settings.section.extensions.zoho-extensions.cpq.subscription":case"crm.settings.section.extensions.zoho-extensions.cpq.permission":z=e?e.target===I||"crm.settings.section.extensions.zoho-extensions.campaigns"===e.target&&I.indexOf("crm.settings.section.extensions.zoho-extensions.campaigns.")>=0?e.data?e.data.backOneLevel.historyIndex:1:Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1:Crm.newHistoryArr.push({route:"crm.settings.section.extensions.zoho-extensions.zoho-apps"})-1;break;case"crm.tab.module.create":if(e&&("crm.tab.module.entity.edit"===e.info.route||"crm.tab.module.entity.clone"===e.info.route||"crm.tab.module.entity.create"===e.info.route)){z=e.data.backOneLevel.historyIndex;break}case"crm.settings.section.macro.index":if(e){if("crm.settings.section.macro.edit"===e.target||"crm.settings.section.macro.view"===e.target){if((T=Crm.newHistoryArr[e.data.backOneLevel.historyIndex]).data&&T.data.backOneLevel){z=T.data.backOneLevel.historyIndex;break}break}if("crm.settings.section.macro.create"===e.target){var T;z="crm.settings.section.macro.index"===(T=Crm.newHistoryArr[e.data.backOneLevel.historyIndex]).route?T.data.backOneLevel.historyIndex:e.data.backOneLevel.historyIndex;break}}case"crm.tab.module.actions.mass-tools":case"crm.tab.module.actions.deduplicate":case"crm.tab.module.actions.approvals":case"crm.tab.module.entity.clone":case"crm.tab.module.entity.clone.canvas":case"crm.tab.module.entity.convert":case"crm.tab.module.entity.edit":case"crm.settings.section.macros":case"crm.settings.section.macros.create":case"crm.settings.section.manage-tags":case"crm.settings.section.auto-responders":case"crm.settings.section.schedule-mass-email":case"crm.tab.module.actions.deduplicate.index-deduplicate":case"crm.tab.module.actions.deduplicate.list-conflicts":case"crm.tab.module.actions.deduplicate.show-duplicates":case"crm.tab.reports":case"crm.settings.section.custom-view.cvid.edit-custom-view":case"crm.settings.section.custom-view.cvid.clone-custom-view":case"crm.settings.section.custom-view.create-custom-view":case"crm.settings.section.autoresponders.index-autoresponder":case"crm.settings.section.manage-mass-mail.index-autoresponder":case"crm.settings.section.manage-mass-mail.create-autoresponder":case"crm.settings.section.manage-mass-mail.view-autoresponder":case"crm.settings.section.manage-mass-mail.edit-autoresponder":case"crm.settings.section.autoresponders.create-autoresponder":case"crm.settings.section.autoresponders.view-autoresponder":case"crm.settings.section.autoresponders.edit-autoresponder":case"crm.settings.section.autoresponders.create-folder":case"crm.settings.section.autoresponders.edit-folder":case"crm.settings.section.alerts.create-alert":case"crm.settings.section.alerts.edit-alert":case"crm.settings.section.field-updates.create-field-update":case"crm.settings.section.field-updates.edit-field-update":case"crm.settings.section.tasks.create-task":case"crm.settings.section.alerts.usage-workflow-alert":case"crm.settings.section.webhooks.usage-workflow-webhook":case"crm.settings.section.tasks.edit-task":case"crm.settings.section.webhooks.create-webhook":case"crm.settings.section.webhooks.edit-webhook":case"crm.settings.section.workflow-rules.create-workflow-rule":case"crm.settings.section.workflow-rules.view-workflow-rule":case"crm.settings.section.workflow-rules.clone-workflow-rule":case"crm.settings.section.assignment-rule.view-assignment-rule":case"crm.settings.section.assignment-rule.create-assignment-rule":case"crm.settings.section.modules.module.canvas.create":case"crm.settings.section.modules.module.canvas.edit":case"crm.settings.section.macro.create":case"crm.settings.section.macro.edit":case"crm.settings.canvas.edit":case"crm.tab.module.entity.add-contact-role":case"crm.tab.module.entity.edit-contact-role":case"crm.tab.forecasts.pipeline":case"crm.global-search":case"crm.settings.section.assignment-thresholds.edit-assignment-thresholds":case"crm.settings.section.assignment-thresholds.create-assignment-thresholds":case"crm.settings.section.calendar-booking.view-calendar-booking":case"crm.settings.section.calendar-booking.create-calendar-booking":case"crm.settings.section.calendar-booking.edit-calendar-booking":case"crm.settings.section.calendar-booking.clone-calendar-booking":case"crm.settings.section.calendar-booking.index-calendar-booking":var z;if(e)z=e.target===I||"crm.tab.module.entity.edit"===I&&"crm.tab.module.entity.clone"===e.target||["crm.settings.section.calendar-booking.create-calendar-booking","crm.settings.section.calendar-booking.edit-calendar-booking","crm.settings.section.calendar-booking.clone-calendar-booking"].includes(e.target)?e.data.backOneLevel.historyIndex:Crm.newHistoryArr.push(commonUtils.getRouteObject(e))-1;else if("crm.global-search"===I&&(z=Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:["Home"]})-1),/crm.tab.module.entity/.test(I))z=Crm.newHistoryArr.push({route:"crm.tab.module.entity.detail",dynamicParams:[t.info.dynamicParams[0],t.info.dynamicParams[1]]})-1;else if(/crm.tab.module/.test(I))z=Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:[t.info.dynamicParams[0]||"Home"]})-1;else if(/crm.settings.section.workflow-/.test(I)||/crm.settings.section.assignment-rule./.test(I)||/crm.settings.section.assignment-thresholds./.test(I))I.replace("create","index"),I.replace("edit","index"),I.replace("view","index"),z=Crm.newHistoryArr.push({route:I})-1;else if(t.info.queryParams.module&&!t.target.includes("crm.settings.section.calendar-booking"))z=Crm.newHistoryArr.push({route:"crm.tab.module",dynamicParams:[t.info.queryParams.module]})-1;else{var N=t.info.route.match(/crm.tab.google-adwords|crm.tab.marketplace|crm.tab.projects|crm.tab.reports|crm.tab.forecasts|crm.tab.dashboards|crm.tab.approvals|crm.settings.section.calendar-booking/);z=N&&N.length>0?Crm.newHistoryArr.push({route:N[0]})-1:Crm.newHistoryArr.push({route:"crm.tab.module.begin",dynamicParams:["Home"]})-1}break;case"crm.tab.reports.records":t.data.isAjax=!1;break;case"crm.tab.module.begin":return void(e&&"crm.tab.module.begin"!==e.target&&t.data&&t.data.changeView&&(t.data={}));case"crm.tab.messages.custom-view.list":case"crm.tab.module.custom-view.list":e&&t.data&&"crm.tab.module.custom-view.list"!==e.target&&"crm.tab.module.custom-view.kanban"!==e.target&&"crm.tab.module.custom-view.canvas"!==e.target&&delete t.data.fetchOnlyBody;break;case"crm.settings.section.extensions.all-extensions":var D;if(e&&e.target)(D=e.target.split("."))[5]&&Object.values(crmSetup.zohoExtensionsRouteMapping).indexOf(D[5])>-1&&(t.data.showInstalled=!0);return;case"crm.settings.section.modules.module.links-and-buttons.create-links-and-buttons":case"crm.settings.section.modules.module.links-and-buttons.edit-links-and-buttons":t.data.module=t.info.dynamicParams[0];break;case"crm.tab.module.index-module":"undefined"!=typeof CrmWidget&&CrmWidget&&CrmWidget.FreezeWidget&&(WidgetHandler.EventNotifier.pageUnload(CrmWidget.FreezeWidget),$("#crmPopContent").addClass("hide"));break;default:return}app.store=new crmStore({maxLength:undefined}),t.data.backOneLevel={historyIndex:z}}}};var CrmRouter={hiddenSetupRoutes:{"crm.settings.section.workflow-rules.create-workflow-rule":!0,"crm.settings.section.workflow-rules.view-workflow-rule":!0,"crm.settings.section.workflow-rules.clone-workflow-rule":!0,"crm.settings.section.workflow-rules.view-usage":!0,"crm.settings.section.blueprint.create-blueprint":!0,"crm.settings.section.blueprint.view-blueprint":!0,"crm.settings.section.attributions":!0,"crm.settings.section.profiles.view-profile":!0,"crm.settings.create-home-customization":!0,"crm.settings.edit-home-customization":!0,"crm.settings.clone-home-customization":!0,"crm.settings.section.crm-templates":!0,"crm.settings.section.widget-telephony.summary":!0,"crm.settings.section.telephony.summary":!0,"crm.settings.section.telephony.summary":!0,"crm.settings.section.telephony.phonebridgegroup.viewpbxgroup":!0,"crm.settings.section.telephony.phonebridgegroup.createpbxgroup":!0,"crm.settings.section.telephony.phonebridgegroup.editpbxgroup":!0,"crm.settings.section.telephony.configuration":!0,"crm.settings.section.widget-telephony.configuration":!0,"crm.settings.section.path-finder.pathfinder-details.edit-pathfinder":!0,"crm.settings.section.path-finder.pathfinder-details.view-touchpoints":!0,"crm.settings.section.path-finder.pathfinder-details.report":!0,"crm.settings.section.path-finder.pathfinder-details.sankey":!0,"crm.settings.section.path-finder.pathfinder-details.journey":!0,"crm.settings.section.orchestration.create-orchestration":!0,"crm.settings.section.orchestration.edit-orchestration":!0,"crm.settings.section.orchestration.orchestration-reports":!0,"crm.settings.section.zohocpq.configurator-create":!0,"crm.settings.section.zohocpq.configurator-edit":!0,"crm.settings.section.auto-response-rules.create":!0,"crm.settings.section.auto-response-rules.edit":!0,"crm.settings.section.auto-response-rules.view":!0,"crm.settings.section.kiosk.edit-kiosk-builder":!0}};if(Lyte.Router.afterRouteTransition=function(e){if(e&&200===e.state){var t=Object.assign({},{url:e.url,target:e.target,transitionData:e.data,transitionInfo:e.info});Lyte.triggerEvent("onAfterCompleteRouteTransition",t),"undefined"!=typeof Detail_API_Optimisation&&Detail_API_Optimisation&&(showEntityReqRes=void 0,EntityReqRes=void 0,actions_resp=void 0,apiResponses={custom_buttons:{},related_Lists:{},associations:{},record_locking:{},zia_features_config:{},moduleCache:{},fields:{},tag:{},layout:{}})}!0===FingerPrint.isCdnEnabled&&!1===Crm.env.isDevelopment&&speedBenchmarkEnd-speedBenchmarkStart<=10&&!0===window.preFetchAllowed&&200===e.state&&"0"===PrefetchDisable&&(Ppf.PredWorker("Predict",e),Ppf.clearResourceTimings()),Lyte.registeredMixins["crm-create-init-mixin"]&&Lyte.registeredMixins["crm-create-init-mixin"].cscriptMenuLessUIHandling(e,"afterRouteTransition"),crmHistory.loaded=!0,crmHistory.length++;var i=e.target.indexOf("crm.tab.newForecasts.view")>-1||e.target.indexOf("crm.settings.section.extensions.leadchain-extensions.leadchain")>-1&&e.data.network&&e.data.network.endsWith("_PostInstall");"undefined"!=typeof detailView&&detailView.refreshInWms&&detailView.refreshCanvasView?commonUtils.showHideLoadingDiv(!0):i||commonUtils.showHideLoadingDiv(),$("html").addClass("page_initial_loading_hide"),$(".dummy_Body").hide(),crmConstants&&!crmConstants.isLoadCompleted&&murphy&&murphy.clientmetrics&&!murphy.clientmetrics.isClientMetricsInstalled()&&e&&(200===e.state||409===e.state)?commonUtils&&commonUtils.murphyClientmetricsInstallation(performance.now(),e):crmConstants&&crmConstants.isClientMetricsSoftNavigationEnabled&&crmConstants.isLoadCompleted&&murphy&&murphy.clientmetrics&&murphy.clientmetrics.isClientMetricsInstalled()&&e&&(200===e.state||409===e.state)&&(murphy.clientmetrics.setCustomTags({routeState:e.state},"update"),murphy.clientmetrics.endSoftNavigation(),crmConstants.murphySoftNavigationTrackStarted=!1);var s=$L("#leftMenuLoader");switch(s&&s.length>0&&(s[0].classList.contains("crm-initldt-primhide")||(s[0].classList.add("crm-initldt-primhide"),s.hide(),Lyte.registeredMixins["crm-left-menu-util"]&&(Lyte.registeredMixins["crm-left-menu-util"].setSkeletonLoaderViewBasedOnTransition(e),Lyte.registeredMixins["crm-left-menu-util"].showSkeletonLoader()))),e.target){case"crm.global-search":e.toolTip=I18n.getMsg("crm.label.search.result");break;case"crm.tab.module.actions.mass-tools":e.toolTip=I18n.getMsg({"mass-transfer":"crm.permission.mass.transfer.CustomModule","mass-delete":"crm.permission.mass.delete.CustomModule","mass-email":"crm.permission.mass.email.leads","mass-update":"crm.permission.mass.update.CustomModule"}[e.info.queryParams.type]);break;case"crm.tab.module.entity.detail":e.toolTip=document.getElementById("entityName")?document.getElementById("entityName").value:"entity";break;case"crm.tab.module.begin":"Home"===e.info.dynamicParams[0]&&(e.toolTip=moduleRecordMapping.Home.plural_label);break;case"crm.tab.forecasts.pipeline":"true"===e.info.queryParams.closed?moduleRecordMapping.Deals?e.toolTip=I18n.getMsg("crm.label.forecast.closed",moduleRecordMapping.Deals.plural_label):e.toolTip=I18n.getMsg("crm.label.forecast.closed",moduleRecordMapping.Potentials.plural_label):moduleRecordMapping.Deals?e.toolTip=I18n.getMsg("crm.label.forecast.pipeline",moduleRecordMapping.Deals.plural_label):e.toolTip=I18n.getMsg("crm.label.forecast.pipeline",moduleRecordMapping.Potentials.plural_label);break;case"crm.tab.module.actions.approve":e.toolTip=I18n.getMsg("crm.title.web.lead.approval",e.info.dynamicParams[0]);break;case"crm.tab.module.custom-view.list":case"crm.tab.module.custom-view.kanban":case"crm.tab.module.custom-view.zia":moduleRecordMapping[e.info.dynamicParams[0]]&&(e.toolTip=moduleRecordMapping[e.info.dynamicParams[0]].plural_label)}if("undefined"!=typeof CrmPlusLib&&CrmPlusLib.isLoadedInCrmplusFrame&&(CrmPlusLib.parent.notifyURLChange(),CrmPlusLib.changeBrowserTitle(document.title)),Crm.userDetails.isAccessibilityConfigSupported&&void 0!==Lyte.Service.getInjected("globalAccessibilityServices")){Lyte.Service.getInjected("globalVoiceAssistance")&&Lyte.Service.getInjected("globalAccessibilityServices")&&Lyte.Service.getInjected("globalAccessibilityServices").getVariable("voiceAssistantEnable")&&Lyte.Service.getInjected("globalVoiceAssistance").numberingEnabled&&numberingHanlind();var o=Lyte.Service.getInjected("globalAccessibilityServices").getVariable("ariaLandMark");if(o&&o.enable){var r={...o};Lyte.Service.getInjected("globalAccessibilityServices").ariaLandMarkEnable(r)}!e||"crm.tab.module.create"!==e.target&&"crm.tab.module.entity.edit"!==e.target&&"crm.settings.section.accessibility"!==e.target?(Lyte.Service.getInjected("globalAccessibilityServices").customErrorColorDisable(),e&&(e.target.includes("crm.tab.module.custom-view")||"crm.tab.module.entity.detail"===e.target)?Lyte.Service.getInjected("globalAccessibilityServices").customClassQuickCreate(!0):Lyte.Service.getInjected("globalAccessibilityServices").customClassQuickCreate(!1)):(Lyte.Service.getInjected("globalAccessibilityServices").customClassQuickCreate(!0),Lyte.Service.getInjected("globalAccessibilityServices").customErrorColorEnable(Lyte.Service.getInjected("globalAccessibilityServices").getVariable("customErrorColor")))}},/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var style=document.createElement("style");style.innerHTML="* { -webkit-tap-highlight-color:  rgba(255, 255, 255, 0); } [click], link-to, a { -webkit-tap-highlight-color: rgba(0, 0, 0, 0.4); } ",document.head.appendChild(style)}var ps=history.pushState,rs=history.replaceState;function urlLengthCheck(){if(app.nextTransition&&app.nextTransition.info&&-1!==["crm.global-search","crm.tab.module.custom-view.canvas","crm.tab.module.custom-view.list","crm.tab.module.custom-view.kanban","crm.tab.module.custom-view.chart","crm.tab.messages.custom-view.list","crm.tab.module.custom-view.timeline"].indexOf(app.nextTransition.info.route)){var e={route:app.nextTransition.info.route,queryParams:Object.assign({},app.nextTransition.info.queryParams),dynamicParams:Array.from(app.nextTransition.info.dynamicParams)};"crm.global-search"===app.nextTransition.info.route?(delete e.queryParams.criteria,delete e.queryParams.refineCriteria,delete e.queryParams.filteredModules):(delete e.queryParams.filters,delete e.queryParams.cross_filters),arguments[2]=Lyte.Router.getURL(e)}return arguments}history.pushState=function(){app.historyLength++,ps.apply(history,urlLengthCheck.apply(history,arguments))},history.replaceState=function(){rs.apply(history,urlLengthCheck.apply(history,arguments))},store.addEventListener("afterRequest",(function(e){app.newSubVersion=e.getResponseHeader("clientsubversion")?e.getResponseHeader("clientsubversion"):crmConstants.subVersion})),store.registerModel("module",{api_name:Lyte.attr("string"),api_supported:Lyte.attr("boolean"),business_card_field_limit:Lyte.attr("number"),business_card_fields:Lyte.attr("array"),status:Lyte.attr("string"),custom_view:Lyte.attr("object"),activity_badge:Lyte.attr("string"),notes_badge:Lyte.attr("string"),convertable:Lyte.attr("boolean"),default_view:Lyte.attr("object"),deletable:Lyte.attr("boolean"),display_field:Lyte.attr("object"),editable:Lyte.attr("boolean"),public_fields_configured:Lyte.attr("boolean"),fields:Lyte.hasMany("field",{deserialize:"record"}),filter_supported:Lyte.attr("boolean"),filter_status:Lyte.attr("boolean"),generated_type:Lyte.attr("string"),global_search_supported:Lyte.attr("boolean"),id:Lyte.attr("string"),layouts:Lyte.hasMany("layout"),kanban_view:Lyte.attr("boolean"),chart_view:Lyte.attr("boolean"),timeline_view:Lyte.attr("boolean"),kanban_feature_status:Lyte.attr("boolean"),kanban_view_supported:Lyte.attr("boolean"),chart_view_supported:Lyte.attr("boolean"),chart_view_cache_supported:Lyte.attr("boolean"),lookup_field_properties:Lyte.attr("object"),modified_by:Lyte.attr("object"),lookup_field_properties:Lyte.attr("object"),modified_time:Lyte.attr("string"),module_name:Lyte.attr("string"),plural_label:Lyte.attr("string"),profiles:Lyte.attr("array"),prediction:Lyte.attr("boolean"),related_list_properties:Lyte.attr("array"),related_lists:Lyte.hasMany("related_list",{inverse:"relatedListModule"}),scoring_supported:Lyte.attr("boolean"),cpq_search_layout_fields:Lyte.attr("array"),sequence_number:Lyte.attr("number"),singular_label:Lyte.attr("string"),stage_view:Lyte.attr("boolean"),viewable:Lyte.attr("boolean"),visible:Lyte.attr("boolean"),viewid:Lyte.attr("string"),chart_id:Lyte.attr("string"),per_page:Lyte.attr("number"),web_link:Lyte.attr("string"),territory:Lyte.attr("object"),parent_module:Lyte.belongsTo("module"),child_module:Lyte.hasMany("module",{inverse:"parent_module"}),vision_module:Lyte.hasMany("visions",{serialize:null}),search_layout_fields:Lyte.hasMany("field",{serialize:"record"}),module:Lyte.hasMany("zia_score"),module:Lyte.hasMany("field_prediction"),customer_module:Lyte.hasMany("churn_prediction"),payment_module:Lyte.hasMany("churn_prediction"),what_module:Lyte.hasMany("recommendations",{serialize:null}),whom_module:Lyte.hasMany("recommendations",{serialize:null}),based_module:Lyte.hasMany("recommendations",{serialize:null}),last_accessed_views:Lyte.attr("array"),last_accessed_view_type:Lyte.attr("string"),wizard:Lyte.hasMany("wizard"),filterable:Lyte.attr("boolean"),didLoad:function(e){var t=(e=this instanceof Record?this:e).id,i=e.module_name;"Deals"==i&&(e.module_name="Potentials"),"Meetings"==i&&(e.module_name="Events");var s={},o=e.fields;if(s.id=Lyte.attr("string"),o&&o.length)if(store.model[t]){n=o.length;var r=store.model[t];if(r){for(c=0;c<n;c++)if(!r.fieldList[o[c].api_name]||"subform"!==r.fieldList[o[c].api_name].cusRelationFldType&&!r.fieldList[o[c].api_name].fieldType)if("subform"!==o[c].data_type&&"static_subform"!==o[c].data_type){var a={};a.type=Lyte.registeredMixins["crm-module-mixin"].getfieldattributeType(o[c]),a.fieldID=o[c].id,a.uiType=o[c].ui_type,a.columnName=o[c].column_name,a.fieldType=o[c].data_type,a.length=o[c].length,a.displayLabel=o[c].display_label,a.isCustomField=o[c].custom_field,"PRICINGDETAILS"===o[c].column_name&&(a.watch=!0),"Events"!==e.module_name||"Remind_At"!==o[c].api_name&&"Remind_Participants"!==o[c].api_name||(a.type="array"),store.addField(t,o[c].api_name,a.type,a,void 0,!0)}else{u=Crm.userDetails.isSubformNewComponentEnabled||Crm.userDetails.FIELD_OF_LOOKUP_IN_SUBFORM||Crm.userDetails.SUBFORM_PERMISSIONS?"partial":"record";let i=o[c].subform?o[c].subform.id:o[c].associated_module.id;if(store.addField(t,o[c].api_name,Lyte.hasMany(i,{serialize:u})),r.fieldList[o[c].api_name]&&(r.fieldList[o[c].api_name].cusRelationFldType="subform"),!store.model[i])(l={}).__parent_module__=Lyte.belongsTo(e.id,{inverse:o[c].api_name}),!o[c].custom_field&&["Invoiced_Items","Purchase_Items","Ordered_Items","Quoted_Items"].contains(o[c].api_name)&&(l.$parent_line_item_id=Lyte.attr("string")),store.registerModel(i,l,{extends:"entity"});e.currsubformApinames||(e.currsubformApinames=[]),e.currsubformApinames.contains(o[c].api_name)||e.currsubformApinames.push(o[c].api_name)}else r.fieldList[o[c].api_name].length=o[c].length;r.fieldList.$state||store.addField(t,"$state","string"),r.fieldList.$wizard_connection_path||store.addField(t,"$wizard_connection_path","array"),r.fieldList.$validation_rule_action||store.addField(t,"$validation_rule_action","object"),r.fieldList.$transitionid||store.addField(t,"$transitionid","string"),["Quotes","Invoices","SalesOrders","PurchaseOrders"].contains(i)&&(r.fieldList.$line_tax||store.addField(t,"$line_tax","array",{type:"array",watch:!0}),r.fieldList.$parent_inventory_id||store.addField(t,"$parent_inventory_id","string"))}}else{for(var n=o.length,c=0;c<n;c++){if("subform"!==o[c].data_type&&"static_subform"!==o[c].data_type)s[o[c].api_name]=Lyte.attr(Lyte.registeredMixins["crm-module-mixin"].getfieldattributeType(o[c])),s[o[c].api_name].fieldID=o[c].id,s[o[c].api_name].uiType=o[c].ui_type,s[o[c].api_name].columnName=o[c].column_name,s[o[c].api_name].fieldType=o[c].data_type,s[o[c].api_name].length=o[c].length,s[o[c].api_name].displayLabel=o[c].display_label,s[o[c].api_name].isCustomField=o[c].custom_field,"PRICINGDETAILS"===o[c].column_name&&(s[o[c].api_name].watch=!0),"Events"!==e.module_name||"Remind_At"!==o[c].api_name&&"Remind_Participants"!==o[c].api_name||(s[o[c].api_name].type="array");else{var u=Crm.userDetails.isSubformNewComponentEnabled||Crm.userDetails.FIELD_OF_LOOKUP_IN_SUBFORM||Crm.userDetails.SUBFORM_PERMISSIONS?"partial":"record";let t=o[c].subform?o[c].subform.id:o[c].associated_module.id;var l;if(s[o[c].api_name]=Lyte.hasMany(t,{serialize:u}),s[o[c].api_name].cusRelationFldType="subform",!store.model[t])(l={}).__parent_module__=Lyte.belongsTo(e.id,{inverse:o[c].api_name}),!o[c].custom_field&&["Invoiced_Items","Purchase_Items","Ordered_Items","Quoted_Items"].contains(o[c].api_name)&&(l.$parent_line_item_id=Lyte.attr("string")),store.registerModel(t,l,{extends:"entity"});e.currsubformApinames||(e.currsubformApinames=[]),e.currsubformApinames.contains(o[c].api_name)||e.currsubformApinames.push(o[c].api_name)}"multiselectlookup"===o[c].data_type&&(s[o[c].api_name].watch=!0)}s.$state=Lyte.attr("string"),s.$wizard_connection_path=Lyte.attr("array"),s.$validation_rule_action=Lyte.attr("object"),s.$transitionid=Lyte.attr("string"),["Quotes","Invoices","SalesOrders","PurchaseOrders"].contains(i)&&(s.$line_tax=Lyte.attr("array",{watch:!0}),s.$parent_inventory_id=Lyte.attr("string")),store.registerModel(t,s,{extends:"entity"})}validationUtils.isNotEmpty(e.layouts)&&e.layouts.length&&e.layouts.forEach((function(e){e.sections&&e.sections.length&&Lyte.registeredMixins["crm-module-mixin"].addSubformFieldsintoLyteModel(e.sections)})),e.custom_view&&!e.custom_view.module&&(Lyte.isRecord(e)?e.custom_view.module=e.$.toJSON():e.custom_view.module=e),i&&("Deals"===i&&(moduleRecordMapping.Potentials=e),moduleRecordMapping[i]=e,idModuleMapping[t]=i,moduleApiMapping[i]=e.api_name,moduleApiVsNameMapping[e.api_name]=i)}.on("add")},{actions:{view_preference_configurations:{},mass_delete:{},mass_update:{},mass_change_owner:{},change_owner:{},single_record_delete:{},get_automated_configured_features:{},associations:{},owner_config_state:{},run_scoring_rules:{},searchRecordsByName:{},contact_role:{},modulePermissionAction:{},survey_departments:{},survey_templates:{},modules_all_values:{},modules_associations:{},modules_relationships:{},modules_permissions_update:{},competitor_mentions:{},getUnAssigned:{},getAssigned:{}}}),store.registerAdapter("module",{namespace:"crm/v2.2/settings",buildURL:function(e,t,i,s,o,r,a){if("searchRecordsByName"===r)return o=o.slice(0,o.indexOf("/",8))+a.url;if(o=this.$super.buildURL(e,t,i,s,o,r,a),"action"===t)switch(r){case"survey_departments":case"survey_templates":return o=o.replace("/v2.2/settings/modules/","/v2.2/Campaigns/");case"contact_role":return o=o.replace("settings/modules/actions/contact_role",a.module+"/roles");case"run_scoring_rules":return o=o.replace("settings/modules/"+s.id,s.api_name);case"single_record_delete":var n=o.split("/")[o.split("/").length-3];return o=o.replace("settings/modules/"+n+"/actions/single_record_delete",a.module+"/"+a.id);case"view_preference_configurations":o=o.replace("v2.2","v6");var c="/settings/modules/";return c=s.id?c+s.id+"/":c,o=o.replace(c,"/settings/modules/"+a.module+"/");case"modulePermissionAction":return o=o.replace("/v2.2/settings/module/actions/modulesPermissionAction","/v6/settings/modules/"+a.id);case"modules_all_values":return o=o.replace("/v2.2/settings/module/actions/moduless_all_values","/v6/settings/modules"),i.include="team_spaces",i.status="user_hidden,system_hidden,scheduled_for_deletion,visible",o;case"modules_associations":return o=o.replace("/v2.2/settings/module/actions/moduless_associations","/v6/settings/modules/actions/associations");case"modules_relationships":return o=o.replace("/v2.2/settings/module/actions/moduless_relationships","/v2.2/settings/modules/actions/relationships");case"modules_permissions_update":return o=o.replace("/v2.2/settings/module/actions/moduless_permissions_update","/v6/settings/modules");case"competitor_mentions":return o=o.replace("/v2.2/settings/modules/actions/competitor_mentions","/v5/"+a.module+"/"+a.id+"/actions/competitor_mentions");case"getUnAssigned":n=o.split("/")[o.split("/").length-3];return s=a,o=(o=o.replace("settings/modules/"+n,a.module)).replace("getUnAssigned","get_unassigned");case"getAssigned":n=o.split("/")[o.split("/").length-3];return s=a,o=(o=o.replace("settings/modules/"+n,a.module)).replace("getAssigned","get_assigned");default:n=(o=o.replace("settings/modules/","")).split("/")[o.split("/").length-3];var u=moduleApiMapping[idModuleMapping[n]];return o=o.replace(n,u),void 0!==a&&"action_type"in a&&"change_owner"===a.action_type&&"from"in a&&"for_single_record"===a.from&&(o=(o=o.replace("actions",a.record_id+"/actions")).replace("v2.2","v3")),o}if("update"===t)return o=o.replace("v2.2","v6");if(a&&"Chronological"===a.from&&(o=o.replace("crm/v2.2/settings","crm/v5/settings")),"findAll"!==t){n=o.substring(o.lastIndexOf("/")+1);if(!["ABM_Account__s","ABM_Segment__s","ABM_Account_Segment__s"].includes(n)){u=idModuleMapping[n];o=o.replace(n,moduleRecordMapping[u].api_name)}}if(i||(i={}),"findRecord"!=t||i.include||(i.include=["$properties","$on_demand_properties","layouts","custom_view","mass_action_cv","show_social","show_webform","show_visitor","show_googlesync","show_emailparser","show_phonebridge","show_salessignals","show_emailsettings","show_dashboard","default_view","chart_view","chart_view_supported","chart_view_cache_supported","per_page","filter_status","kanban_view","kanban_view_supported","stage_view","customized_view","show_zf_panel","task_completed_rule_configured","new_call_view","zb_custommodule_enabled","group_by_field_available","kanban_feature_status","kanban_view_fields","module_mlabel","module_nlabel","zia_view","territory","related_lists","related_list_properties","business_card_fields","search_layout_fields","cpq_search_layout_fields","lookup_field_properties"]),i.include&&(i.include=i.include.toString()),a&&"2"===a.apiVersion&&(o=o.replace("crm/v2.1/settings","crm/v2/settings")),a&&"4"===a.apiVersion&&(o=(o=o.replace("crm/v2.1/settings","crm/v4/settings")).replace("crm/v2.2/settings","crm/v4/settings")),"Bundles"!==u&&"LinkingModuleBundleRel"!==u||(o=Crm.changeBundlesApiVersion(o,"v2.2")),a&&"6"===a.apiVersion&&(o=(o=o.replace("crm/v2.1/settings","crm/v6/settings")).replace("crm/v2.2/settings","crm/v6/settings")),a&&"7"===a.apiVersion&&(o=(o=o.replace("crm/v2.1/settings","crm/v7/settings")).replace("crm/v2.2/settings","crm/v7/settings")),o=this.alterUrlforViewPreferences(e,t,s,o),a&&a.isSandbox){var l=-1===(o=(o=a.hostUrl.url).replace("settings/layouts","settings/modules")).indexOf("v6")?o.split("diff/").pop().split("v2.2/")[0]:o.split("diff/").pop().split("v6/")[0];o=o.replace(l,"")}return o},methodForRequest:function(e,t,i,s,o){return"PATCH"===e||"run_scoring_rules"===o?"PUT":"contact_role"!==o&&"competitor_mentions"!==o||"POST"!==e?"single_record_delete"===o?"DELETE":"modules_all_values"===o||"modules_associations"===o||"modules_relationships"===o?"GET":("action"===t&&(e=s&&s.type?s.type:e),e):"GET"},processRequest:function(e,t,i,s,o,r,a){if("findRecord"==e){var n=this;if(!("undefined"!=typeof Detail_API_Optimisation&&Detail_API_Optimisation&&apiResponses&&currentModuleName&&apiResponses.moduleCache[currentModuleName])||o&&o.getExternalFields||o&&o.layoutId&&o.mode){if(o&&1==o.getMeta)return;u=store.peekRecord("module",a).module_name;if(o&&(1==o.getFields||o.layoutId))return this.fetchFields(u,o).then((function(e){n.deleteXHR(u);var t=[];return t[0]=e,JSON.stringify({modules:t})}));var c=store.peekRecord("module",a);return Lyte.resolvePromises({module:store.findRecord("module",a,r,void 0,!0,{getMeta:!0}),fields:n.fetchFields(c.module_name,o)}).then((function(e){return n.deleteXHR(u),e.module[0]=e.module[0].$.toJSON(),JSON.stringify({modules:e.module})}))}var u=store.peekRecord("module",a).module_name;if(o&&o.layoutId)return apiResponses.layout[currentModuleName].result.then((function(e){if(o.layoutId==e.layouts[0].id){var t=n.fetchModuleCache(e,o);n.deleteXHR(u);var i=[];return i[0]=t,JSON.stringify({modules:i})}return n.fetchFields(u,o).then((function(e){n.deleteXHR(u);var t=[];return t[0]=e,JSON.stringify({modules:t})}))}));var l=new Promise((e=>{apiResponses.fields[currentModuleName].result.then((function(t){var i=n.fetchModuleCache(t,o);n.deleteXHR(u);var s=[];s[0]=i,e(JSON.stringify({modules:s}))}))}));return Lyte.resolvePromises({module:apiResponses.moduleCache[currentModuleName].result,fields:l}).then((function(e){if(e&&e.module&&e.module.modules)return JSON.stringify({modules:e.module.modules})}))}},fetchModuleCache:function(e,t){if(e){var i={};try{i=Object.assign({},e)}catch(e){var s={type:"Response is not JSON"};throw s.error_message="The response is not a JSON format \nresponse length : "+xhr.response.length+",  response : "+xhr.response,murphy.addCustomTracking(s),murphy.error(new Error(s.error_message)),e}}var o=store.peekRecord("module",i.id);let r=o&&-1!==["Leads","Contacts"].indexOf(o.api_name)&&i&&i.fields?i.fields.filter((e=>"FULLNAME"===e.column_name))[0]:void 0;r&&(r.field_label=r.display_label=I18n.getMsg("crm.label.vendor.name",o.singular_label));var a=store.serializer.module.normalize("module","findRecord",i,t);if(t&&t.layoutId&&(o=store.peekRecord("module",a.id)).layouts){var n=o.layouts.mapBy("id");n.removeLastOccurenceOfElement(t.layoutId),a.layouts=a.layouts.concat(n)}return store.pushPayload("module",[a]),i},fetchFields:function(e,t){var i="";t&&t.layoutId?(i="&layoutId="+t.layoutId,t.mode&&(i+="&mode="+t.mode)):i="&getField=true",t&&t.getExternalFields&&(i+="&include_external_fields=true");var s=this;return new Promise((function(o,r){var a=s.getXHR(e,t),n=Crm.getCrmBasePath()+"/ModuleCache.do";"false"===window.isSandboxAcc&&window.isCanvasSandboxDiff&&(n=n.replace("/ModuleCache.do","/sandbox/diff/ModuleCache.do")),"true"===window.isSandboxAcc&&window.isCanvasProdDiff&&(n=n.replace("/ModuleCache.do","/production/diff/ModuleCache.do"));var c=window.clientPortalName?networkUtils.getPortalURL(n):n;a.open("GET",c+"?module="+e+i);var u=store.adapter.application.headersForRequest();for(var l in u)a.setRequestHeader(l,u[l]);a.onload=function(){if(this.status>=200&&this.status<300){var e={};if(a.response)try{e=Object.assign({},JSON.parse(a.response))}catch(e){var i={type:"Response is not JSON"};throw i.error_message="The response is not a JSON format \nresponse length : "+a.response.length+",  response : "+a.response,murphy.addCustomTracking(i),murphy.error(new Error(i.error_message)),e}var s=store.peekRecord("module",e.id);let r=s&&-1!==["Leads","Contacts"].indexOf(s.api_name)&&e&&e.fields?e.fields.filter((e=>"FULLNAME"===e.column_name))[0]:void 0;r&&(r.field_label=r.display_label=I18n.getMsg("crm.label.vendor.name",s.singular_label));var n=store.serializer.module.normalize("module","findRecord",e,t);if(t&&t.layoutId&&(s=store.peekRecord("module",n.id)).layouts){var c=s.layouts.mapBy("id");c.removeLastOccurenceOfElement(t.layoutId),n.layouts=n.layouts.concat(c)}store.pushPayload("module",[n]),o(e)}else r({status:this.status,statusText:a.statusText})},a.onerror=function(){r({status:this.status,statusText:a.statusText})},a.send()}))},alterUrlforViewPreferences:function(e,t,i,s){return"updateRecord"===t&&i&&(i.custom_view||i.hasOwnProperty("kanban_view")||i.chart_view||i.timeline_view)&&(s=s.replace("v2.2","v6"),s+="/actions/view_preference_configurations"),s},getXHR:function(e,t){if(!this.xhr[e]||window.Encryptionenabled)this.xhr[e]=new XMLHttpRequest;else if(t&&t.allowMultiple)return new XMLHttpRequest;return this.xhr[e]},xhr:{},deleteXHR:function(e){delete this.xhr[e]}}).extends("application"),store.registerSerializer("module",{serialize:function(e,t,i,s,o,r,a){if("run_scoring_rules"===a)return{scoring_rules:s.rules};if("change_owner"===a&&s&&s.bulkChange&&"for_single_record"===s.from&&s.record_update_data)return t.record_update_data=s.record_update_data,t;if("searchRecordsByName"===a||"change_owner"===a&&s.bulkChange)return t;if("mass_update"===a||"mass_delete"===a||"mass_change_owner"===a)return t=new FormData,s&&s.ids&&t.append("ids",s.ids),s;if("change_owner"===a||"get_automated_configured_features"===a||"associations"===a||"owner_config_state"===a)return null;if("view_preference_configurations"===a){var n={};return n.modules=[t],n}if("action"===e||"action"===e&&s&&"contact_role"===s.action)return t;var c=t.modules.id;if(void 0===c)return t;var u=store.peekRecord("module",c);return t.modules.api_name=u.api_name,t=this.handleForViewPreferences(e,t),"updateRecord"!==e&&(t.modules.api_name=u.api_name),"updateRecord"==e&&t.modules.custom_view&&(t.modules.custom_view={id:t.modules.custom_view.id}),t.modules=[t.modules],t},handleForViewPreferences:function(e,t){if("updateRecord"===e)if(t.modules.custom_view){var i=[],s={type:"custom_view"};s.custom_view={id:t.modules.custom_view.id,name:t.modules.custom_view.name},i.push(s),t.modules={},t.modules.last_accessed_views=i}else(t.modules.hasOwnProperty("kanban_view")||t.modules.hasOwnProperty("chart_view")||t.modules.hasOwnProperty("list_view")||t.modules.hasOwnProperty("timeline_view"))&&(t.modules.kanban_view?t.modules={default_view_type:"kanban_view"}:t.modules.chart_view?t.modules={default_view_type:"chart_view"}:t.modules.timeline_view?t.modules={default_view_type:"timeline_view"}:t.modules={default_view_type:"list_view"});return t},serializeKey:function(e){return e+"s"},normalizeResponse:function(e,t,i,s,o){if("updateRecord"==t&&200==o&&(i.modules={id:s}),!window.clientPortalName){var r={},a={ZohoCPQ:-1,Quotes:-1,SalesOrders:-1,PurchaseOrders:-1,Invoices:-1,Products:-1,Bundles:-1,PriceBooks:-1};switch(t){case"findRecord":moduleRecordMapping&&moduleRecordMapping.ZohoCPQ&&i&&i.modules&&a.hasOwnProperty(i.modules[0].module_name)&&(r.api_name=moduleRecordMapping.ZohoCPQ.api_name,r.id=moduleRecordMapping.ZohoCPQ.id,i.modules[0].parent_module=r);break;case"update":i&&i.modules&&i.modules.length>0&&i.modules.forEach((function(e){e.id=e.details.id,delete e.status}));break;case"pushPayload":case"findAll":for(var n=(i="findAll"===t?i.modules:i)instanceof Array?i.length:0,c=0;c<n;c++)a.hasOwnProperty(i[c].module_name)&&(a[i[c].module_name]=c);if(-1!==a.ZohoCPQ||moduleRecordMapping&&moduleRecordMapping.ZohoCPQ){var u={};u=moduleRecordMapping&&moduleRecordMapping.ZohoCPQ?moduleRecordMapping.ZohoCPQ:i[a.ZohoCPQ],r.api_name=u.api_name,r.id=u.id,-1!==a.Quotes&&(i[a.Quotes].parent_module=r),-1!==a.SalesOrders&&(i[a.SalesOrders].parent_module=r),-1!==a.PurchaseOrders&&(i[a.PurchaseOrders].parent_module=r),-1!==a.Invoices&&(i[a.Invoices].parent_module=r),-1!==a.Products&&(i[a.Products].parent_module=r),-1!==a.Bundles&&(i[a.Bundles].parent_module=r),-1!==a.PriceBooks&&(i[a.PriceBooks].parent_module=r)}i="findAll"===t?{modules:i}:i}}return"pushPayload"===t?{modules:i}:i},normalize:function(e,t,i,s){var o=i.module_name;if("findAll"!=t&&"findRecord"!=t||"Calls"!=o&&"Events"!=o&&"Tasks"!=o||Crm.isActivitySplitDone||delete i.custom_view,("findAll"==t||"findRecord"==t)&&i.layouts)for(var r=i.layouts.length,a=[-3,-4],n=0;n<r;n++)-1===a.indexOf(i.layouts[n].status)?(i.id&&(i.layouts[n].module={id:i.id}),this.setProperty(i.layouts[n],s)):(store.unloadRecord("layout",i.layouts[n].id),i.layouts.splice(n,1),n--,r--);if(i.fields&&s&&!s.getExternalFields){var c=i.fields.length,u=[],l=null;for(n=0;n<c;n++)null===(l=i.fields[n]).external&&u.push(l);"object"==typeof u&&u.length>0&&(i.fields=u)}var d=Lyte.Router.getRouteInstance();return d&&d.parent&&d.parent.parent&&"voc"===d.parent.parent.routeName&&(i.chart_view=!0),i}},{mixins:["crm-module-mixin"]}),store.registerAdapter("application",{namespace:"crm/v2",batchNamespace:"batch_requests",actionNamespace:"actions",Tab_ID:function(){if(null==sessionStorage.getItem("TabZID")){var e=$L&&$L.moment?$L.moment("").toDate().valueOf():Date.now();sessionStorage.setItem("TabZID",e)}return sessionStorage.getItem("TabZID")}(),headersForRequest:function(e,t,i){var s={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken,"X-CRM-ORG":crmZgid,"X-CRM-REF-ID":crmZuid+"_"+crmZgid+"_"+this.Tab_ID+"_"+Date.now()};return window.clientPortalName&&(s["X-CRMPORTAL"]=window.clientPortalName),"undefined"!=typeof crmZgid&&crmZgid&&(s["X-CRM-ORG"]=crmZgid),"false"===window.isSandboxAcc&&(t&&void 0!==t.SandboxAccount||i&&void 0!==i.SandboxAccount||window.isCanvasSandboxDiff)&&(s["X-CRM-ORG"]=sandbox.orgInfo.crmSandboxOrParentZgid.toString()),"true"===window.isSandboxAcc&&window.isCanvasProdDiff&&(s["X-CRM-ORG"]=sandbox.orgInfo.crmSandboxOrParentZgid.toString()),i&&(i.isSandboxDiff||i.isProductionDiff)&&(s["X-CRM-ORG"]=sandbox.orgInfo.crmSandboxOrParentZgid.toString()),i&&i.businessCard&&(s["X-ZOHO-SERVICE"]="crm/lookupTooltip"),i&&i["X-CRM-FEATURE-NAME"]&&(s["X-CRM-FEATURE-NAME"]=i["X-CRM-FEATURE-NAME"]),i&&i.isSandbox&&i.headers&&i.headers["X-CRM-ORG"]&&(s["X-CRM-ORG"]=i.headers["X-CRM-ORG"]),s},buildURL:function(e,t,i,s,o,r,a){a&&a.isSandboxDiff||"false"===window.isSandboxAcc&&window.isCanvasSandboxDiff?o=o.replace(this.namespace,this.namespace+"/sandbox/diff"+this.namespace.slice(3)):(a&&a.isProductionDiff||"true"===window.isSandboxAcc&&window.isCanvasProdDiff)&&(o=o.replace(this.namespace,this.namespace+"/production/diff"+this.namespace.slice(3)));var n=o.lastIndexOf(e);return-1!==n&&(o=o.substring(0,n)+e+"s"+o.substring(n+e.length)),o},parseResponse:function(e,t,i,s){return!s&&i&&204===i.status?{}:s},processRequest:function(e,t,i,s,o,r,a,n,c,u){return"undefined"!=typeof Detail_API_Optimisation&&Detail_API_Optimisation&&"undefined"!=typeof apiResponses&&currentModuleName?EntityReqRes&&"undefined"!=typeof moduleRecordMapping&&t==moduleRecordMapping[currentModuleName].id&&EntityReqUrl==n?EntityReqRes[currentEntity].then((function(e){return e})):"dummy"==t&&apiResponses.associations[currentModuleName]&&apiResponses.associations[currentModuleName].url==n?apiResponses.associations[currentModuleName].result.then((function(e){return null!=e?JSON.stringify(e):void 0})):actions_resp&&"entity"==t&&"available_actions"==c&&availableActionsURL==n?actions_resp.then((function(e){return e})):apiResponses[t]&&apiResponses[t][currentModuleName]&&apiResponses[t][currentModuleName].url==n?apiResponses[t][currentModuleName].result.then((function(e){return null==e?"":null!=e?JSON.stringify(e):void 0})):void 0:void 0}}),store.addEventListener("afterRequest",(function(e){if(Crm.env&&Crm.env.isDevelopment&&"undefined"!=typeof instrumentData){var t=e.getResponseHeader("instrument");void 0!==t&&(Instrumentdata.instrumentresp.length>10&&Instrumentdata.instrumentresp.shift(),null!==t&&Instrumentdata.instrumentresp.push(JSON.parse(t)))}})),crmStore=function(e){this.maxLength=void 0!==window.canScaleParallelRequests&&window.canScaleParallelRequests&&void 0!==window.maximumParallelRequestsCount&&window.maximumParallelRequestsCount>5?window.maximumParallelRequestsCount>12?12:window.maximumParallelRequestsCount:5,e&&e.maxLength&&e.maxLength<5&&(this.maxLength=e.maxLength),Object.defineProperties(this,{requestLength:{enumerable:!1,writable:!0,value:0},makeRequest:{value:function(){var e=arguments;return new Promise(function(t,i){this.request({args:e,res:t,rej:i})}.bind(this))}},request:{value:function(e){if(Crm.userDetails.isRelatedListLyteEnabled){var t=e&&e.args&&"object"==typeof e.args[0]&&e.args[0].priority?e.args[0].priority:"low";if(this.requestLength<this.maxLength||"high"===t){this.requestLength++;var i=[],s=e.args.length,o=0;"high"!==t&&"medium"!==t||o++;for(var r=o+1;r<s;r++)i.push(e.args[r]);var a=this;"sendXHR"==(n=e.args[o])?networkUtils.sendxhr.apply(null,i).then((function(t){a.success(e.res,t)}),(function(t){a.error(e.rej,t)})):store[n].apply(store,i).then((function(t){a.success(e.res,t)}),(function(t){a.error(e.rej,t)}))}else"medium"===t?this.toSend.splice(0,0,e):this.toSend.push(e)}else if(this.requestLength<this.maxLength){this.requestLength++;for(i=[],s=e.args.length,r=1;r<s;r++)i.push(e.args[r]);var n;a=this;"sendXHR"==(n=e.args[0])?networkUtils.sendxhr.apply(null,i).then((function(t){a.success(e.res,t)}),(function(t){a.error(e.rej,t)})):store[n].apply(store,i).then((function(t){a.success(e.res,t)}),(function(t){a.error(e.rej,t)}))}else this.toSend.push(e)}},success:{value:function(e,t){this.requestLength--,this.toSend.length&&this.request(this.toSend.splice(0,1)[0]),e(t)}},toSend:{writable:!0,value:[]},error:{value:function(e,t){this.requestLength--,this.toSend.length&&this.request(this.toSend.splice(0,1)[0]),e(t)}}})},store.registerSerializer("application",{extractMeta:function(e){if(e&&e.info)return e.meta=e.info,delete e.info,e.meta},serialize:function(e,t,i,s){return"batch"==e&&(t.batch_requests=t.batch,delete t.batch),t},payloadKey:function(e){if("blueprint"!=e)return e+"s"},normalizeResponse:function(e,t,i,s,o,r){if("batch"===t)i.batch_requests.forEach((function(e,t){if("SUCCESS"===e.code){var i=e.details.response;for(var s in i)e[s]=i[s];delete e.details,500===i.status?e.content={info:{error:!0}}:e.content=JSON.parse(e.content)}}));else if(null==i||0==Object.keys(i).length){var a={};return"findAll"==t?a[e]=[]:"findRecord"==t&&(a[e]={}),a}return i}});
