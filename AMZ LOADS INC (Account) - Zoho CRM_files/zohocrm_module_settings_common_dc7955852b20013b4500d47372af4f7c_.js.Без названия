function AutoFillFormData(e,t,a,n,l,i,s){this.primaryEntity=e,this.relatedContact=t,this.relatedAccount=a,this.ownerEntity=n,this.userTZdate=l,this.callType=i,this.outboundCallStatus=s}function BasicEntityInfo(e,t,a){this.module=e,this.id=t,this.name=a}BasicEntityInfo.prototype.getRecordUrl=function(){var e=RebrandLinkUtil.getProperty("URLPROTOCOL")+"://"+RebrandLinkUtil.getProperty("CRMURL");return"Tasks"!==this.module&&"Events"!==this.module&&"Calls"!==this.module||Crm.isActivitySplitDone?e+=Crm.getCrmBasePath()+"/tab/"+this.module+"/"+this.id:e+=Crm.getCrmBasePath()+"/tab/Activities/"+this.id+"?sub_module="+this.module,e};var SourceIdentifier={getAutoFillData:function(e,t,a,n,l,i){if("relatedlist"===e||"relatedlist_new"===e||"relatedlist_new_canvas"===e||"rightpannel"===e||"krp"===e||"fromMap"===e||"stageView"===e||"salessignals"===e||"call_popup"===e||"nba"===e||"best_time_call"===e){if(validationUtils.isNotEmpty(a)){var s=new CrmDate(a);return SourceIdentifier.getCurrentCRMEntityData(e,t,s,i)}return SourceIdentifier.getCurrentCRMEntityData(e,t,void 0,i)}if("calendar"==e||"calendarGlobelAdd"==e)return SourceIdentifier.getCurrentCalendarViewData(e,a,n,l);if("crmEmail"==e)return new AutoFillFormData(null,null,null,null,new CrmDate(a));if("onboardSchedule"==e)return new AutoFillFormData(null,null,null,null,CrmDateUtils.getCrmDateAfterMins(30));if("emailsAI"==e){s=new CrmDate(a);return SourceIdentifier.getCurrentCRMEntityData(e,t,s)}},getCurrentCRMEntityData:function(e,t,a,n){var l,i,s=getObj("module")?getObj("module").value:null;if($L(".etTrendsWrapper").length){var r=$L("crm-ziaforemails")[0].component.getData("onclickAttr");l=r.entityId,i=(i=r.name)?i.trim():i,s=r.module}else if($(".ziaCallAnalyticswrapper").length){l=EmailCompose.aiData.entityId;let e=$("#"+l).children()[3];if(i=e?e.getElementsByClassName("wfrepTextMaxWidth")[0].component.data.ltPropValue:$("#entityName").val(),!l||!i){var o=$L("crm-email-activity-suggestions")[0].component,d=o.getData("sourceIdentifier");l=d.entityId,i=o.data.name,s=d.module}}else l=$("#entityId").val(),i=(i=$("#entityName").val())?i.trim():i;var c=null,u=null,p=null,m=null,h=!1,g=!1,f="true"==$("#iskanbanview").val(),v=Lyte.Router.getRouteInstance(),y=Lyte.registeredMixins["crm-view-utils"]&&Lyte.registeredMixins["crm-view-utils"].isListComponents(),C=$L("crm-listpage-components")[0];if(y&&C&&C.getData("recordId")&&C.getData("isActivityMenuActive")){if(l=C.getData("recordId")){var b=C.getData("display_field");i=C.getData("recordObj")[b]}}else if("stageView"!==e&&"call_popup"!==e&&f&&getObj("whoid")){if(s=getObj("whoidmodule").value,l=getObj("whoid").value,h=!0,getObj("modid")){var I=getObj("modid").value,F=getObj("modsel").value,w=$("#modname1").val();"Accounts"==F?(c=I,u=w):"Contacts"==F&&(p=I,m=w)}}else if("krp"===e&&v&&("crm.tab.module.entity.detail"===v.transition.target&&Crm.renderDVLyteFlow&&Crm.renderDVLyteFlow(s)||"crm.tab.module.entity.canvas"===v.transition.target)&&t)(n={}).id=t.data.entity_id,n.name=t.data.entity_name,n.module=t.data.rel_module,"Contacts"!==n.module&&t.data.rp_records.length>1&&(p=t.data.rp_records[0].id,m=t.data.rp_records[0].name),h=!0,g=!0;else if("krp"==e){s=$$rightPanel.currentModule,l=$$rightPanel.entityId;var k=$("#krp_Rightpanel_InfoInnerContainer"),E=k.is(":visible")?k:$("#krp_Rightpanel_InfoContainer");i=$("#rp_parent").find("#entityName").val()||E.find("#entityName").val(),c=E.find("#accountId").val(),u=E.find("#accountName").val()}else if("salessignals"==e)s=$("#ss_module").val(),l=$("#ss_entityId").val(),i=$("#ss_entityName").val();else if("stageView"==e)if(t&&-1!==t.id.indexOf("_create_call")){var L=$L("crm-inner-list")[0];if(L){l=L.component.data.entityId;var _=moduleRecordMapping[s].display_field?moduleRecordMapping[s].display_field.api_name:store.peekRecord("module",moduleRecordMapping[s].id);i=L.component.data.recordObjForQuickAction[_]}}else l=$(t).attr("data-relid"),i=$("#listView_"+l).text();else if("call_popup"===e){s=$("#Ctiapi_entityModule").attr("value"),l=$("#Ctiapi_entityId").attr("value"),i=$("#Ctiapi_entityName").attr("value"),h=!0;I=$("#Ctiapi_relatedEntityId").val(),F=$("#Ctiapi_relatedEntityModule").val(),w=$("#Ctiapi_relatedEntityName").val();"Accounts"==F?(c=I,u=w):"Contacts"==F&&(p=I,m=w)}if("object"==typeof l&&(l=$(l).val()),void 0!==v&&("crm.tab.module.entity.canvas"===v.transition.target||Crm.renderDVLyteFlow(s)&&"crm.tab.module.entity.detail"===v.transition.target)){var S=store.peekRecord(moduleRecordMapping[s].id,l);c&&u||(c=S&&S.Account_Name?S.Account_Name.id:null,u=S&&S.Account_Name?S.Account_Name.name:null),p&&m||(p=S&&S.Contact_Name?S.Contact_Name.id:null,m=S&&S.Contact_Name?S.Contact_Name.name:null),c&&p||(g=!0),h=!0}if(null!=s&&!h){var M=$("#associatedContName"),R=$("#subvalue_ACCOUNTID");if("stageView"==e&&"Potentials"==s&&validationUtils.isEmpty(M)){var P=$("#detailView_"+l+' link-to[lt-prop-dp*="Contacts"]');P.attr("lt-prop-dp")&&(p=JSON.parse(P.attr("lt-prop-dp"))[1],m=P.find("a").text())}""!=R.html()&&null!=R.html()&&(c=R.data("params").id,u=R.text()),M[0]&&""!==M.val()&&(p=$("#cntId").val(),m=M.val()),c&&p||(g=!0)}if(v&&"crm.tab.module.entity.canvas"===v.transition.target){S=store.peekRecord(moduleRecordMapping[s].id,l);c&&u||(c=S&&S.Account_Name?S.Account_Name.id:null,u=S&&S.Account_Name?S.Account_Name.name:null),p&&m||(p=S&&S.Contact_Name?S.Contact_Name.id:null,m=S&&S.Contact_Name?S.Contact_Name.name:null)}n&&(l=n.id,i=n.name,s=n.module);var x,D=new BasicEntityInfo(s,l,i),T=new BasicEntityInfo("Accounts",c,u),U=new BasicEntityInfo("Contacts",p,m);if(null!=a){if("emailsAI"===e&&addTempFreezeLayer(),$("#signalDetailViewClose").length>0&&$("#ntcInnerDivContent").length>0){var A=$(".temp_freezelayer");A.removeClass("zi28"),A.css("z-index","33"),$("#createEditCallDiv").css("z-index","34")}x=new AutoFillFormData(D,U,T,null,a)}return(x=x||new AutoFillFormData(D,U,T)).autoPopRelated=g,x},getCurrentCalendarViewData:function(e,t,a,n){if("monthview"===calView.currCalView&&"calendarGlobelAdd"!=e||"weekview"===calView.currCalView&&calView.isMultiUserView){if("24:00"!==Crm.calPreferences.DAYSTARTSAT)if(Utils.isToday(t)){var l=new Date;t.setHours(l.getHours()),t.setMinutes(l.getMinutes())}else t.setHours(parseInt(Crm.calPreferences.DAYSTARTSAT))}else"weekview"!==calView.currCalView&&"monthview"!==calView.currCalView||t.setMinutes(0);return calView.isMultiUserView?a&&n||(n=Crm.userDetails.DISPLAY_NAME,a=Crm.userDetails.USER_ID):(n=crmCalendar.currCalSelusrName,a=calView.currCalSelusr),new AutoFillFormData(null,null,null,new BasicEntityInfo("Users",a,n),new CrmDate(t))},refreshPage:function(e,t){var a=$("#upcoming");if(crmNTC.isSignalDetailViewVisible()&&crmNTC.showQuickCreateSuccessMsg(t),a.hasClass("liselected")&&a.click(),"stageView"===e)crmListView.refreshRecords($(Q.currElem).attr("data-relid"));else if("calendar"===e||"calendarGlobelAdd"===e)calView.refresh();else if("listview"==e||"onboardSchedule"==e)Crm.latestEntId=t.entityId,$("#BodyContent").is(":visible")||Lyte.Router.getRouteInstance().refresh();else if("detailView"==e)if(Crm.renderDVLyteFlow(moduleApiMapping.Calls)&&"detail"===Lyte.Router.getRouteInstance().routeName)if(Lyte.registeredMixins["crm-detailview-common-utils"])Lyte.registeredMixins["crm-detailview-common-utils"].reloadCurrentEntityView();else{var n=objectUtils.cloneObject(Lyte.Router.getRouteInstance().transition.data);n.fromDetailView="true";var l=Lyte.Router.getRouteInstance().refresh();n.cvid&&(l.data=n)}else reloadCurrentEntityView(t.entityId,t.module);else if("relatedlist"===e||"rightpannel"===e||"relatedlist_new"===e||"relatedlist_new_canvas"===e||"nba"===e){if("canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName)var i="true"===$("#iskanbanview").val();if(!i){var s=detailView.currentModule;s||(s=Lyte.Router.getRouteInstance().transition.info.dynamicParams[0]);var r=null;if(r="undefined"==typeof entityId?$("#entityId").val():"object"==typeof entityId?$(entityId).val():entityId,"relatedlist_new"===e||"nba"===e){if(Crm.userDetails.isRelatedListLyteEnabled)Lyte.triggerEvent("relatedList",{refresh:!0,module:t.module});else{var o={module:s,id:r,fromIndex:1};"canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{refresh:!0}),crmRelatedList.ajaxReq(o,void 0,void 0,{action:"refresh"})}refreshFollowDiv(s,t.module)}else{if(Crm.userDetails.isRelatedListLyteEnabled)Lyte.triggerEvent("relatedList",{refresh:!0,module:t.module}),refreshFollowDiv(s,t.module);else(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/NewRelatedList.do?action=getAllData&module="+getObj("module").value+"&id="+r,type:"POST",success:function(e){crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,e,!0),refreshFollowDiv(s,e.module),"canvas"==Lyte.Router.getRouteInstance().routeName&&"entity"==Lyte.Router.getRouteInstance().parent.routeName&&Lyte.triggerEvent("relatedList",{res:e})}})}}}else if("homePage"==e)$("#show").html(t),EvalInnerScript(mainPage);else if("krp"===e)(t.activitiesCount||t.right_panel_data)&&$$rightPanel.refreshOnCreatingNewEntity("Activities",t);else if("quickcreate"==e&&t.module)SourceIdentifier.checkCurrentPageAndRefresh(t.module);else if("act_dashboard_comp"===e){var d=$L("crm-activity-component")[0].component,c=t.module;this.replaceDataInRecordContainer.bind(d)(t.entityId,c,!0)}},checkCurrentPageAndRefresh:function(e,t){var a="Calls"==e||"Tasks"==e||"Events"==e?"Activities":e,n=Lyte.Router.getRouteInstance("crm.tab.module"),l=Lyte.Router.getRouteInstance().__lp.objPath;if(n&&n.currentModel&&n.currentModel.module.module_name==a&&!$(".freezeLayer").is(":visible"))if(-1!=["crm.tab.module.custom-view.kanban","crm.tab.module.custom-view.list","crm.tab.module.begin"].indexOf(l))Lyte.Router.getRouteInstance().refresh();else if(validationUtils.isNotEmpty(t)&&-1!==["crm.tab.module.entity.detail"].indexOf(l)){Lyte.Router.getRouteInstance().parent.getDynamicParam()===t&&reloadCurrentEntityView(t,e)}},checkDetailPageAndRefreshRelatedList:function(e,t){var a=Lyte.Router.getRouteInstance().__lp.objPath,n=$("#entityId").val();if("crm.tab.module.entity.detail"==a&&n==e){if(!("true"==$("#iskanbanview").val())){var l=getObj("module")?getObj("module").value:null;if(Crm.userDetails.isRelatedListLyteEnabled)Lyte.triggerEvent("relatedList",{module:t});else{var i={module:l,id:e,fromIndex:1};crmRelatedList.ajaxReq(i)}refreshFollowDiv(l,t)}}else n==e&&"canvas"==Lyte.Router.getRouteInstance().routeName&&Lyte.triggerEvent("relatedList",{refresh:!0})}};!function(e,t,a){var n=8,l=9,i=13,s=37,r=38,o=39,d=40,c=36,u=35,p={triggerChar:"@",onDataRequest:e.noop,minChars:2,allowRepeat:!1,showAvatars:!0,elastic:!0,onCaret:!1,classes:{autoCompleteItemActive:"active"},templates:{wrapper:t.template('<div class="mentions-input-box"></div>'),autocompleteList:t.template('<div class="mentions-autocomplete-list"></div>'),autocompleteListItem:t.template('<li data-ref-id="<%= id %>" data-ref-type="<%= type %>" data-display="<%= display %>"><%= content %></li>'),autocompleteListItemAvatar:t.template('<img src="<%= avatar %>" />'),autocompleteListItemIcon:t.template('<div class="icon <%= icon %>"></div>'),mentionsOverlay:t.template('<div class="mentions"><div></div></div>'),mentionItemSyntax:t.template("@[<%= value %>](<%= type %>:<%= id %>)"),mentionItemHighlight:t.template("<strong><span><%= value %></span></strong>")}},m=function(e){return t.escape(e)},h=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},g=function(e,t){return t||t.length?e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>"):e},f=function(e,t){if(e.createTextRange){var a=e.createTextRange();a.move("character",t),a.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()},v=function(e){return e.replace(/\s+$/,"")},y=function(a){var y,C,b,I,F,w,k=[],E={},L=[],_="";function S(){var e=P();t.each(k,(function(t){var n=a.templates.mentionItemSyntax(t);e=e.replace(new RegExp(h(t.value),"g"),n)}));var n=m(e);t.each(k,(function(e){var l=t.extend({},e,{value:m(e.value)}),i=a.templates.mentionItemSyntax(l),s=a.templates.mentionItemHighlight(l);n=n.replace(new RegExp(h(i),"g"),s)})),n=(n=n.replace(/\n/g,"<br />")).replace(/ {2}/g,"&nbsp; "),y.data("messageText",e),y.trigger("updated"),F.find("div").html(n)}function M(){L=[]}function R(e){var n=P(),l=new RegExp("\\"+a.triggerChar+_,"gi");l.exec(n);var i=l.lastIndex-_.length-1,s=l.lastIndex,r=n.substr(0,i),o=n.substr(s,n.length),d=(r+e.value).length+1;t.find(k,(function(t){return t.id==e.id}))||k.push(e),M(),_="",O();var c=r+e.value+" "+o;y.val(c),y.trigger("mention"),S(),y.focus(),f(y[0],d)}function P(){return e.trim(y.val())}function x(t){var a,n,l=e(this);return R(E[l.attr("data-uid")]),a=e(y).offset().top,n=e("body").offset().top,e(window).scrollTop()>a&&e(window).scrollTop(a-n),!1}function D(e){M()}function T(e){O()}function U(e){var n;S(),n=P(),k=t.reject(k,(function(e,t){return!e.value||-1==n.indexOf(e.value)})),k=t.compact(k);var l=t.lastIndexOf(L,a.triggerChar);l>-1&&(_=L.slice(l+1).join(""),_=v(_),t.defer(t.bind($,this,_)))}function A(e){if(e.keyCode!==n){var t=String.fromCharCode(e.which||e.keyCode);L.push(t)}}function z(a){if(a.keyCode===s||a.keyCode===o||a.keyCode===c||a.keyCode===u)return t.defer(M),void(navigator.userAgent.indexOf("MSIE 9")>-1&&t.defer(S));if(a.keyCode!==n){if(!b.is(":visible"))return!0;switch(a.keyCode){case r:case d:var p=null;return(p=a.keyCode===d?w&&w.length?w.next():b.find("li").first():e(w).prev()).length&&N(p),!1;case i:case l:if(w&&w.length)return w.trigger("mousedown"),!1}return!0}L=L.slice(0,-1+L.length)}function O(){w=null,b.empty().hide()}function N(e){e.addClass(a.classes.autoCompleteItemActive),e.siblings().removeClass(a.classes.autoCompleteItemActive),w=e}function B(n,l){if(b.show(),!a.allowRepeat){var i=t.pluck(k,"value");l=t.reject(l,(function(e){return t.include(i,e.name)}))}if(l.length){b.empty();var s=e("<ul>").appendTo(b).hide();t.each(l,(function(l,i){var r=t.uniqueId("mention_");E[r]=t.extend({},l,{value:l.name});var o=e(a.templates.autocompleteListItem({id:m(l.id),display:m(l.name),type:m(l.type),content:g(m(l.display?l.display:l.name),n)})).attr("data-uid",r);(0===i&&N(o),a.showAvatars)&&(l.avatar?e(a.templates.autocompleteListItemAvatar({avatar:l.avatar})):e(a.templates.autocompleteListItemIcon({icon:l.icon}))).prependTo(o);o=o.appendTo(s)})),b.show(),a.onCaret&&function(t,a){var n=function(t){var a,n,l,i,s,r,o,d,c,u,p;if((c=t[0])&&e(c).is("textarea")&&null!=c.selectionEnd){for(o={position:"absolute",overflow:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word",boxSizing:"content-box",top:0,left:-9999},u=0,p=(d=["boxSizing","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","textDecoration","textIndent","textTransform","width","word-spacing"]).length;u<p;u++)o[s=d[u]]=e(c).css(s);return l=document.createElement("div"),e(l).css(o),e(c).after(l),n=document.createTextNode(c.value.substring(0,c.selectionEnd)),a=document.createTextNode(c.value.substring(c.selectionEnd)),(i=document.createElement("span")).innerHTML="&nbsp;",l.appendChild(n),l.appendChild(i),l.appendChild(a),l.scrollTop=c.scrollTop,r=e(i).position(),e(l).remove(),r}}(a),l=parseInt(a.css("line-height"),10)||18;t.css("width","15em"),t.css("left",n.left),t.css("top",l+n.top)}(b,y),s.show()}else O()}function $(e){e&&e.length&&e.length>=a.minChars?a.onDataRequest.call(this,"search",e,(function(t){B(e,t)})):O()}function j(){y.val(""),k=[],S()}return a=e.extend(!0,{},p,a),{init:function(t){"true"!==(y=e(t)).attr("data-mentions-input")&&(C=y.parent(),I=e(a.templates.wrapper()),y.wrapAll(I),I=C.find("> div.mentions-input-box"),y.attr("data-mentions-input","true"),y.bind("keydown",z),y.bind("keypress",A),y.bind("click",D),y.bind("blur",T),navigator.userAgent.indexOf("MSIE 8")>-1?y.bind("propertychange",U):y.bind("input",U),a.elastic&&y.elastic()),(b=e(a.templates.autocompleteList())).appendTo(I),b.delegate("li","mousedown",x),(F=e(a.templates.mentionsOverlay())).prependTo(I),j(),a.prefillMention&&R(a.prefillMention)},val:function(e){t.isFunction(e)&&e.call(this,k.length?y.data("messageText"):P())},reset:function(){j()},getMentions:function(e){t.isFunction(e)&&e.call(this,k)}}};e.fn.mentionsInput=function(a,n){var l=arguments;return"object"!=typeof a&&a||(n=a),this.each((function(){var i=e.data(this,"mentionsInput")||e.data(this,"mentionsInput",new y(n));return t.isFunction(i[a])?i[a].apply(this,Array.prototype.slice.call(l,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist"):i.init.call(this,this)}))}}(jQuery,_);var FileUploader=function(e,t){var a={};this._setDefaultOptions(t),this.element=e,t.url=t.url||Crm.getCrmBasePath()+"/dummyupload",this.options=t,Dropzone.call(this,this.element,this.options),a.element=e,a.batchId=this.options.uploadBean.batchId,a.instance=this,$(e).attr("batchId",this.options.uploadBean.batchId),FileUploader.instances.push(a)};FileUploader.noop=function(){},FileUploader.instances=[],FileUploader.prototype=Object.create(Dropzone.prototype),FileUploader.prototype.constructor=FileUploader,FileUploader.prototype.events=Dropzone.prototype.events,FileUploader.prototype.defaultOptions=Dropzone.prototype.defaultOptions,FileUploader.prototype._setDefaultOptions=function(e){this.defaultOptions.formData={},this.defaultOptions.autoCleanOnSave=!1,this.defaultOptions.withCredentials=!0,this.defaultOptions.autoProcessQueue=!0,this.defaultOptions.notify=FileUploader.noop,this.defaultOptions.fileUploaderCallback=FileUploader.noop,this.defaultOptions.getFileSize=e.computeFileSize?e.computeFileSize.bind(this):this.fileSize.bind(this),this.defaultOptions.needFolderUpload=!1,this.defaultOptions.needMultipleSelection=!0,this.defaultOptions.pickerNotificationsNeeded=!0,this.defaultOptions.proceedUploadOnDrop=!0,this.defaultOptions.noteAttachLimitExceedNotification=4e3,this.defaultOptions.progressRatio=1,this.defaultOptions.pasteFiles=!1,this.defaultOptions.maxCallbackAttemptLimit=3,this.defaultOptions.needWMSFallback=!1,this.defaultOptions.wmsFallback={},this.defaultOptions.wmsFallback.defaultURL=clientPortalName?networkUtils.getPortalURL("/crm/v2/Attachments/"):"/crm/v2/Attachments/",this.defaultOptions.wmsFallback.URL="",this.defaultOptions.wmsFallback.requestMethod="GET",this.defaultOptions.isSendToWorkdrive=!1,this.defaultOptions.workdriveUploadData={},this.defaultOptions.wmsFallback.data={feature:"general"},this.defaultOptions.wmsFallback.successCallback=FileUploader.noop,this.defaultOptions.wmsFallback.failureCallback=FileUploader.noop,this.defaultOptions.isAuthorized=!1,this.defaultOptions.needVirusFilter=!1,this.defaultOptions.virusFilter={},this.defaultOptions.virusFilter.containerId="#virusDetectionContainer",this.defaultOptions.virusFilter.containerIconId="#virusContainerIcon",this.defaultOptions.virusFilter.otherfilesId=function(){var e=this.getFilesWithMaliciousContents();return 1!==e.length&&this.files.length!==e.length&&2!==e.length&&e.length>0?"#otherfiles":null},this.defaultOptions.virusFilter.containerIconClasses=function(){return this.getFilesWithMaliciousContents().length===this.files.length?"delAlrtIcn fL":"delWarnMsg formBuildIconsSvg fL"},this.defaultOptions.virusFilter.containerTitleId="#virusDetectionTitle",this.defaultOptions.virusFilter.title=function(){return I18n.getMsg("crm.fileuploader.entityattachments.message.D9203")},this.defaultOptions.virusFilter.containerMessageId="#virusDetectionMsg",this.defaultOptions.virusFilter.containerOkId="#virusDetectionOkButton",this.defaultOptions.virusFilter.okMessage=function(){var e=this.getFilesWithMaliciousContents();return this.files.length===e.length?I18n.getMsg("crm.livedesk.okay"):this.files.length-e.length<2?I18n.getMsg("crm.fileuploader.message.attachremainingfile"):I18n.getMsg("crm.fileuploader.message.attachremainingfiles",this.files.length-e.length)},this.defaultOptions.virusFilter.containerCancelId="#virusDetectionCancelButton",this.defaultOptions.virusFilter.cancelMessage=function(){return I18n.getMsg("crm.fileuploader.cancelupload")},this.defaultOptions.virusFilter.isAlert=function(){return this.getFilesWithMaliciousContents().length===this.files.length},this.defaultOptions.virusFilter.cancelCallback=function(){},this.defaultOptions.messageType={error:"error",information:"info",warning:"warn",success:"success"},this.defaultOptions.messageState={NOOFFILESEXCEEDLIMIT:"nooffilesexceedlimit",TOTALSIZEEXCEEDLIMIT:"totalsizeexceedlimit",BIGFILES:"bigfiles",EMPTYFILES:"emptyfiles",UNSUPPORTEDFILES:"unsupported",MALICIOUSFILES:"malicious",GENERALERROR:"generalerror"},this.defaultOptions.previewTemplate=new StringBuilder('<div class="dz-preview dz-file-preview">\n').append('<div class="dz-details">\n').append('<div class="dz-filename"><span data-dz-name></span></div>\n').append('<div class="dz-size" data-dz-size></div>\n').append("<img data-dz-thumbnail />\n").append("</div>\n").append('<div class="dz-progress">\n').append('<span class="dz-upload" data-dz-uploadprogress></span>\n').append("</div>\n").append('<div class="dz-remove" data-dz-remove></div>\n').append('<div class="dz-success-mark"><span>✔</span></div>\n').append('<div class="dz-error-mark"><span>✘</span></div>\n').append('<div class="dz-error-message">\n').append("<span data-dz-errormessage></span></div>\n").append("</div>").toString(),this.defaultOptions.customConfirmTemplate=new StringBuilder('<div class="dz-customconfirm" id="relatedlist-customconfirm">').append('<div><div id="FreezeLayer" class="freezeLayer"').append('onclick="event.stopPropagation()"').append('style="display: block;opacity: 0.1;"></div>').append('<div id="confirmMsg" class="p25 newPopup ').append('scaleZ scaleOne" style="margin-left:').append("-275px;left: 50%;top: 45%;margin-top: -105px;z-index: 22;position: ").append('fixed; display: block;width: 498px;">').append('<i class="delWarnMsg formBuildIconsSvg fL">').append('</i><div class="cBoth"></div><div class="aligncenter">').append('<div class="crmNotFoundColor crm-font-regular').append('crm-medium-large-font-size fontSmooth" id="genflddelmsg">').append("<p data-dz-customconfirm-message></p></div></div>").append('<div class="mT20 aligncenter tgl"><input type="button" ').append('id="tDelBtn" class="redbtn" ').append('value="Yes" data-dz-customconfirm-success><input type="button" ').append('id="tDelBtn" class="newgraybtn" ').append('value="No" data-dz-customconfirm-failure><div class="cBoth">').append("</div></div></div></div></div>").toString(),this.defaultOptions.dictRemoveFile=I18n.getMsg("crm.fileuploader.removefile"),this.defaultOptions.dictCancelUpload=I18n.getMsg("crm.fileuploader.cancelupload"),this.defaultOptions.dictDefaultMessage=I18n.getMsg("crm.fileuploader.message.defaultmessage"),this.defaultOptions.dictFallbackMessage=I18n.getMsg("crm.fileuploader.message.fallbackmessage"),this.defaultOptions.dictFallbackText=I18n.getMsg("crm.fileuploader.message.fallbacktext"),this.defaultOptions.dictResponseError=I18n.getMsg("crm.fileuploader.message.responseerror"),this.defaultOptions.dictResponseSuccess=I18n.getMsg("crm.fileuploader.message.responsesuccess"),this.defaultOptions.dictCancelUploadConfirmation=null,this.defaultOptions.dictRemoveFileConfirmation=null,this.defaultOptions.proceed=FileUploader.noop,this.defaultOptions.terminate=FileUploader.noop,this.defaultOptions.batchclientcomplete=FileUploader.noop,this.defaultOptions.responsehandler=FileUploader.noop,this.defaultOptions.clean=FileUploader.noop,this.defaultOptions.canceled=FileUploader.noop,this.defaultOptions.customconfirm=FileUploader.noop,this.defaultOptions.uploadprogress=function(e,t,a){var n,l,i,s,r;if(e.previewElement){for(r=[],l=0,i=(s=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;l<i;l++)n=s[l],r.push(n.style.width=Math.round(t*this.options.progressRatio)+"%");return r}},this.defaultOptions.addedallfiles=function(e){for(var t=document.createDocumentFragment(),a=0,n=e.length;a<n;a++)t.appendChild(e[a].previewElement);this.previewsContainer.appendChild(t),$(this.previewsContainer).prop("scrollHeight")>$(this.previewsContainer).prop("clientHeight")?$(this.previewsContainer).animate({scrollTop:$(this.previewsContainer).prop("scrollHeight")},100,"linear"):$(this.previewsContainer).prop("scrollWidth")>$(this.previewsContainer).prop("clientWidth")&&$(this.previewsContainer).animate({scrollLeft:$(this.previewsContainer).prop("scrollWidth")},100,"linear")},this.defaultOptions.rejectedallfiles=FileUploader.noop,this.defaultOptions.scanning=function(e){if(e.scanningComplete=!0,"zos"!==this.options.uploadMethod){e.scanningComplete=!1;var t=this.options.maxCallbackAttemptLimit;if("normal"===this.options.uploadMethod)return void(i=function(e,t){var a,n,l;setTimeout((a=this,n=e,l=t,function(){if(!(!n||!n.previewElement||n.scanningComplete||n.done||l<=0)&&a){if(Math.log(l/1e3)/Math.log(2)>2)return n.scanningComplete=!0,void(n.done=!0);for(var e=n.previewElement.querySelectorAll("[data-dz-uploadprogress]"),t=0,s=e.length;t<s;t++){var r=e[t],o=parseInt(r.style.width);100!==o&&(o+3<=100&&(o+=3),r.style.width=Math.round(o)+"%")}i.call(a,n,2*l)}}),t)}).call(this,e,2e3);var a="message";this.options.wmsFallback=$.extend(!0,this.defaultOptions.wmsFallback,this.options.wmsFallback);var n=function(e,l,i){if(l>t)this.pushToErrorState(e,this.options.dictResponseError,e.xhr);else{var s,r,o=new crmRequestPool,d=function(e,t,l,i){return function(s){if(e&&t&&!t.done&&!t.scanningComplete&&t.status!==FileUploader.CANCELED){var r,o,d,c,u={};if(e.options.wmsFallback.successCallback===FileUploader.noop){if(typeof s!=typeof{})return;var p=null;try{p=JSON.parse(s)}catch(e){p=s}if(!p)return;for(var m in p)if(p.hasOwnProperty(m)&&("status"===m&&(u.error="success"!==p[m]),"code"===m&&(u.status_code=p[m]),m===a&&(u.message=p[m]),"details"===m)){var h=p[m].upload_id;u.uploadId=h}}else u=e.options.wmsFallback.successCallback(s);"D9203"===u.status_code&&(t.virus=!0),!u.uploadId||""===u.uploadId||void 0!==t.virus&&!t.virus?setTimeout((r=e,o=t,d=l+1,c=2*i,function(){r&&o&&!o.done&&!o.scanningComplete&&o.status!==FileUploader.CANCELED&&r.options.needWMSFallback&&n.call(r,o,d,c)}),2*i):(t.done=!0,u.eventid=t.upload.id,e.centralFileUploaderCallbackHandler.call(e,u,t),e.emit("callbackcomplete",t),e.isBatchCallbackComplete()&&e.emit("batchcallbackcomplete",e.files))}}}(this,e,l,i),c=(s=this,r=e,function(){s.pushToErrorState(r,s.options.dictResponseError,r.xhr)});try{var u=this.options.wmsFallback.URL,p=this.options.wmsFallback.requestMethod,m=this.options.wmsFallback.data,h={fallback:l};m=$.extend({},m,h),""===this.options.wmsFallback.URL&&(u=this.options.wmsFallback.defaultURL+e.upload.id,p="GET");var g={"X-ZCSRF-TOKEN":new StringBuilder(csrfParamName).append("=").append(csrfToken).toString(),"X-CRM-ORG":Crm.userDetails.ZGID};clientPortalName&&(g["X-CRMPORTAL"]=clientPortalName),o.initiate({action:u,type:p,data:m,headers:g,success:d,error:c})}catch(e){}}},l=357e-6;null!=crmConstants.uploadFallBackScanTime&&(l=crmConstants.uploadFallBackScanTime);var i,s=l*e.size;s=Math.ceil(s+s/2),s=Math.max(1e3,s),setTimeout((r=this,o=e,d=s,function(){r&&o&&!o.done&&!o.scanningComplete&&o.status!==FileUploader.CANCELED&&r.options.needWMSFallback&&n.call(r,o,1,d)}),s),(i=function(e,t){var a,n,l;setTimeout((a=this,n=e,l=t,function(){if(!(!n||!n.previewElement||n.scanningComplete||n.done||l<=0)&&a&&!(Math.log(l/1e3)/Math.log(2)>2)){for(var e=n.previewElement.querySelectorAll("[data-dz-uploadprogress]"),t=0,s=e.length;t<s;t++){var r=e[t],o=parseInt(r.style.width);100!==o&&(o+3<=100&&(o+=3),r.style.width=Math.round(o)+"%")}i.call(a,n,2*l)}}),t)}).call(this,e,2e3)}var r,o,d},this.defaultOptions.paste=function(e){return this.element.classList.remove("dz-drag-hover")},this.defaultOptions.customizepreviewtemplate=function(e){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){this.previewsContainer.appendChild(e.previewElement);for(var t=e.previewElement.querySelectorAll("[data-dz-name]"),a=0,n=t.length;a<n;a++){t[a].textContent=e.name}for(var l=e.previewElement.querySelectorAll("[data-dz-size]"),i=0,s=l.length;i<s;i++){l[i].textContent=this.options.getFileSize(e.size)}}},this.defaultOptions.removedfile=function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&null!=t.parentNode&&t.parentNode.removeChild(e.previewElement),this.isBatchCallbackComplete()&&this.emit("batchcallbackcomplete",this.files),this._updateMaxFilesReachedClass()},this.defaultOptions.reset=function(){this.element.classList.remove("dz-started"),this.proceed&&$(this.proceed).prop("disabled",!0),this.clearContentFromContainer(this.options.successfullyUploadedFiles),this.clearContentFromContainer(this.options.failedUploadedFiles)},this.defaultOptions.batchcallbackcomplete=function(e){!this.allFilesFailed()&&this.proceed&&$(this.proceed).prop("disabled",!1),this.options.autoProcessQueue&&this.processQueue()},this.defaultOptions.callbackcomplete=function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-callbackcomplete"),this.options.autoProcessQueue&&this.processQueue(),e.scanningComplete=!0,1!==this.options.progressRatio))for(var t=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=0,n=t.length;a<n;a++){var l=t[a];100!==parseInt(l.style.width)&&(l.style.width="100%")}},this.defaultOptions.addedfile=function(e){var t,a,n,l,i,s,r;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){var o;for($(".crm-msg.fileuploader")&&$(".crm-msg.fileuploader").remove(),e.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.emit("customizepreviewtemplate",e),o=this,t=function(t){t.preventDefault(),t.stopPropagation();var a,n,l=null,s=null;if(o.options.customConfirmContainer&&o.options.customConfirmTemplate&&(l=FileUploader.getElement(o.options.customConfirmContainer),s=FileUploader.createElements(o.options.customConfirmTemplate)),l&&s&&s.length>0){l.removeAll(),$(l).hide();for(var r=0,d=s.length;r<d;r++)l.appendChild(s[r])}if(e.status===FileUploader.ERROR)o.removeFile(e);else{if((e.status===FileUploader.UPLOADING&&o.options.dictCancelUploadConfirmation||o.options.dictRemoveFileConfirmation)&&o.options.customConfirmCallback)return o.options.customConfirmCallback.call(o,t,e,(function(){o.removeFile(e)}));if((e.status===Dropzone.UPLOADING&&o.options.dictCancelUploadConfirmation||o.options.dictRemoveFileConfirmation)&&o.options.customConfirmContainer&&o.options.customConfirmTemplate){if(l=FileUploader.getElement(o.options.customConfirmContainer)){o.emit("customconfirm",t,e);var c=l.querySelector("[data-dz-customconfirm-message]");c&&e.status===Dropzone.UPLOADING&&o.options.dictCancelUploadConfirmation&&c.textContent&&""!==c.textContent?c.textContent=o.options.dictCancelUploadConfirmation:c&&o.options.dictRemoveFileConfirmation&&c.textContent&&""!==c.textContent&&(c.textContent=o.options.dictRemoveFileConfirmation);var u=l.querySelectorAll("[data-dz-customconfirm-success]"),p=l.querySelectorAll("[data-dz-customconfirm-failure]"),m=(a=o,n=e,function(e){FileUploader.noPropagation(e),$(l).hide(),a.removeFile(n)}),h=function(e){FileUploader.noPropagation(e),$(l).hide()};for(r=0,d=u.length;r<d;r++)i=u[r],$(i).one("click",m);for(r=0,d=p.length;r<d;r++)i=p[r],$(i).one("click",h);$(l).show()}}else{if(e.status===FileUploader.UPLOADING&&o.options.dictCancelUploadConfirmation)return FileUploader.confirm(o.options.dictCancelUploadConfirmation,(function(){o.removeFile(e)}));if(o.options.dictRemoveFileConfirmation)return FileUploader.confirm(o.options.dictRemoveFileConfirmation,(function(){o.removeFile(e)}));o.removeFile(e)}}},r=[],n=0,l=(s=e.previewElement.querySelectorAll("[data-dz-remove]")).length;n<l;n++){a=s[n],r.push(a.addEventListener("click",t));var d={};d.element=a,d.action="click",d.actionHandler=t,this.eventTracker.push(d)}return this.proceed&&$(this.proceed).prop("disabled",!0),r}},this.defaultOptions.processing=function(e){e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink&&this.options.dictCancelUpload&&(e._removeLink.textContent=this.options.dictCancelUpload))},this.defaultOptions.error=function(e,t){var a,n,l,i,s;if(e.previewElement){e.previewElement.classList.add("dz-error");const d=e.previewElement.childNodes;if(d){const e=Array.from(d).find((e=>e.classList&&e.classList.contains("dz-error-message")));e&&e.classList.remove("hide")}for("string"!=typeof t&&t.error&&(t=t.error),s=[],n=0,l=(i=e.previewElement.querySelectorAll("[data-dz-errormessage]")).length;n<l;n++){a=i[n];var r=null,o=e.xhr.status;(r="413"===o||413===o?I18n.getMsg("crm.fileuploader.entityattachments.message."+o,[this.options.getFileSize(this.options.totalFilesize*Math.pow(this.options.filesizeBase,2))]):I18n.getMsg("crm.fileuploader.entityattachments.message."+o))==="crm.fileuploader.entityattachments.message."+o&&(r=this.options.dictResponseError),""===a.textContent&&s.push(a.textContent=r)}return s}},this.defaultOptions.complete=function(e){if(e._removeLink&&this.options.dictRemoveFile&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},this.events.push("paste"),this.events.push("customizepreviewtemplate"),this.events.push("addedallfiles"),this.events.push("rejectedallfiles"),this.events.push("customconfirm"),this.events.push("batchclientcomplete"),this.events.push("batchcallbackcomplete"),this.events.push("callbackcomplete"),this.events.push("responsehandler"),this.events.push("terminate"),this.events.push("proceed"),this.events.push("clean"),this.events.push("scanning"),this.eventTracker=[],e.successfullyUploadedFiles=[],e.failedUploadedFiles=[],e._pendingCallback=[],e._doneXhr=[],e._drop={},e._drop.queue=[],e._drop.pool=0,e._drop.revert=!1,null!=e.uploadBean&&e.uploadBean||(e.uploadBean={}),e.uploadBean.batchId="BATCH_"+Math.floor(Math.random()*$.now()),e.uploadMethod=!e.uploadMethod||"zfsng"!==e.uploadMethod&&"zfs"!==e.uploadMethod&&"zos"!==e.uploadMethod?"normal":e.uploadMethod,e.filesizeBase=!e.filesizeBase||1024!==e.filesizeBase&&1e3!==e.filesizeBase?1e3:e.filesizeBase,e.maxFiles=!e.maxFiles||e.maxFiles>200?200:e.maxFiles,e.maxFilesize=!e.maxFilesize||e.maxFilesize>3*Math.pow(e.filesizeBase,3)?3*Math.pow(e.filesizeBase,3):e.maxFilesize,e.flexSize=void 0===e.flexSize||e.flexSize<0?0*Math.pow(e.filesizeBase,2):e.flexSize,e.totalFilesize=!e.totalFilesize||e.totalFilesize>e.maxFiles*(e.maxFilesize+e.flexSize)?e.maxFiles*(e.maxFilesize+e.flexSize):e.totalFilesize,e.parallelUploads=!e.parallelUploads||e.parallelUploads>5?5:e.parallelUploads},FileUploader.prototype.getBatchId=function(){return this.options.uploadBean.batchId},FileUploader.prototype.getRequestMethod=function(){return"normal"===this.options.uploadMethod||"zos"===this.options.uploadMethod?this.options.method:this.options.uploadBean.udserver.requestMethod},FileUploader.prototype.getRequestURL=function(){return"normal"===this.options.uploadMethod||"zos"===this.options.uploadMethod?this.options.url:new StringBuilder(this.options.uploadBean.udserver.protocol).append("//").append(this.options.uploadBean.udserver.url).append("/").append(this.options.uploadBean.udserver.path).toString()},FileUploader.prototype.addContentToContainer=function(e){return e.error?this.options.failedUploadedFiles.push(e):this.options.successfullyUploadedFiles.push(e)},FileUploader.prototype.clearContentFromContainer=function(e){return[]},FileUploader.prototype.getParamsFromAllContents=function(e,t){for(var a=[],n=e,l=0,i=n.length;l<i;l++){var s=n[l];typeof s==typeof{}&&(s.hasOwnProperty(t)&&a.push(s[t]))}return a},FileUploader.prototype.getContentHavingParams=function(e){for(var t=[],a=e,n=[],l=[],i=arguments,s=0,r=i.length;s+1<r;s++)n.push(argument[s]),l.push(argument[s+1]);for(s=0,r=a.length;s<r;s++){var o=a[s];if(typeof o==typeof{}){for(var d=!0,c=0,u=n.length;c<u;c++)if(!o.hasOwnproperty(n[c])||o[n[c]]!==l[c]){d=!1;break}d&&t.push(o)}}return t},FileUploader.prototype.getUploadedIds=function(e){return this.getParamsFromAllContents(this.options.successfullyUploadedFiles,e)},FileUploader.prototype.getIdsAsFormData=function(e,t,a){var n=this.getUploadedIds(e);a.append(t,n)},FileUploader.prototype.fileUploaderCallback=function(e,t){return this.addContentToContainer(e)},FileUploader.prototype.centralFileUploaderCallbackHandler=function(e,t){if(this.options.fileUploaderCallback!==FileUploader.noop&&this.options.fileUploaderCallback.call(this,e,t),e.error&&e.status_code){var a=null;(a="D9202"===e.status_code||"413"===e.status_code?I18n.getMsg("crm.fileuploader.entityattachments.message."+e.status_code,[this.options.getFileSize(this.options.totalFilesize*Math.pow(this.options.filesizeBase,2))]):I18n.getMsg("crm.fileuploader.entityattachments.message."+e.status_code))==="crm.fileuploader.entityattachments.message."+e.status_code&&(a=this.options.dictResponseError),this.pushToErrorState(t,a,t.xhr)}"normal"!==this.options.uploadMethod&&this.fileUploaderCallback(e,t)},FileUploader.prototype.callbackHandler=function(e){var t=null,a=this;for(var n in e)if(e.hasOwnProperty(n)){var l=e[n];if(l&&"string"==typeof l&&l.startsWith("BATCH_")){t=l;break}}if(t&&a){var i,s,r,o=a.getFileWithId(t),d=(i=a,s=e,r=o,function(){r&&r.done||(r.done=!0,r.status!==FileUploader.CANCELED&&("D9203"===s.status_code&&(r.virus=!0),i.centralFileUploaderCallbackHandler.call(i,s,r),i.emit("callbackcomplete",r),i.isBatchCallbackComplete()&&i.emit("batchcallbackcomplete",i.files)))}),c={},u=o.upload.id,p=$.inArray(u,a.options._doneXhr);-1===p?(c[u]=d,a.options._pendingCallback.push(c)):(d(),a.options._doneXhr.splice(p,1))}},FileUploader.displayMessage=function(e,t,a){if("zos"===this.options.uploadMethod){var n=$("#fileUploaderErrorBox");n&&(n[0].ltProp("message",t),n[0].ltProp("type",e),n[0].ltProp("show",!0))}else this.options.pickerNotificationsNeeded&&crmui.showMsgBand(e,t,a)},FileUploader.getDisplayMessage=function(e,t){var a="";switch(e){case this.options.messageState.NOOFFILESEXCEEDLIMIT:a=I18n.getMsg("crm.fileuploader.message.maxfilesexceeded",[this.options.fileLimit?this.options.fileLimit:this.options.maxFiles]);break;case this.options.messageState.TOTALSIZEEXCEEDLIMIT:a=I18n.getMsg("crm.fileuploader.message.totalfilesizeexceeded",[this.options.getFileSize(this.options.totalFilesize*Math.pow(this.options.filesizeBase,2))]);break;case this.options.messageState.BIGFILES:1===t.length?a="zos"===this.options.uploadMethod?I18n.getMsg("crm.fileuploader.message.filetoobig1",[t[0].name,this.options.getFileSize(this.options.maxFilesize*Math.pow(this.options.filesizeBase,2))]):I18n.getMsg("crm.fileuploader.message.filetoobig1",[$ESAPI.encoder().encodeForHTML(t[0].name),this.options.getFileSize(this.options.maxFilesize*Math.pow(this.options.filesizeBase,2))]):this.files.length===t.length?a=I18n.getMsg("crm.fileuploader.message.filetoobig3",[this.options.getFileSize(this.options.maxFilesize*Math.pow(this.options.filesizeBase,2))]):2===t.length?a="zos"===this.options.uploadMethod?I18n.getMsg("crm.fileuploader.message.filetoobig2",[t[0].name,t[1].name,this.options.getFileSize(this.options.maxFilesize*Math.pow(this.options.filesizeBase,2))]):I18n.getMsg("crm.fileuploader.message.filetoobig2",[$ESAPI.encoder().encodeForHTML(t[0].name),$ESAPI.encoder().encodeForHTML(t[1].name),this.options.getFileSize(this.options.maxFilesize*Math.pow(this.options.filesizeBase,2))]):t.length>0&&(a="zos"===this.options.uploadMethod?"<div>"+I18n.getMsg("crm.fileuploader.message.filetoobig2",[t[0].name,'<span id="otherstooltip" style="cursor: pointer"><b><u>'+I18n.getMsg("crm.fileuploader.message.morefiles",(t.length-1).toString())+"</b></u></span>",this.options.getFileSize(this.options.maxFilesize*Math.pow(this.options.filesizeBase,2))])+"</div>":"<div>"+I18n.getMsg("crm.fileuploader.message.filetoobig2",[$ESAPI.encoder().encodeForHTML(t[0].name),'<span id="otherstooltip" style="cursor: pointer"><b><u>'+I18n.getMsg("crm.fileuploader.message.morefiles",(t.length-1).toString())+"</b></u></span>",this.options.getFileSize(this.options.maxFilesize*Math.pow(this.options.filesizeBase,2))])+"</div>");break;case this.options.messageState.EMPTYFILES:case this.options.messageState.UNSUPPORTEDFILES:1===t.length?a=I18n.getMsg("crm.fileuploader.message.invalidfileType1",[$ESAPI.encoder().encodeForHTML(t[0].name)]):this.files.length===t.length?a=I18n.getMsg("crm.fileuploader.message.invalidfileType3"):2===t.length?a=I18n.getMsg("crm.fileuploader.message.invalidfileType2",[$ESAPI.encoder().encodeForHTML(t[0].name),$ESAPI.encoder().encodeForHTML(t[1].name)]):t.length>0&&(a="<div>"+I18n.getMsg("crm.fileuploader.message.invalidfileType2",[$ESAPI.encoder().encodeForHTML(t[0].name),'<span id="otherstooltip" style="cursor: pointer"><b><u>'+I18n.getMsg("crm.fileuploader.message.morefiles",(t.length-1).toString())+"</b></u></span>"])+"</div>");break;case this.options.messageState.MALICIOUSFILES:1===t.length?a=I18n.getMsg("crm.fileuploader.message.maliciousfile1",[$ESAPI.encoder().encodeForHTML(t[0].name)]):this.files.length===t.length?a=I18n.getMsg("crm.fileuploader.message.maliciousfile3"):2===t.length?a=I18n.getMsg("crm.fileuploader.message.maliciousfile2",[$ESAPI.encoder().encodeForHTML(t[0].name),$ESAPI.encoder().encodeForHTML(t[1].name)]):t.length>0&&(a="<div>"+I18n.getMsg("crm.fileuploader.message.maliciousfile2",[$ESAPI.encoder().encodeForHTML(t[0].name),'<span id="otherfiles" style="cursor: pointer"><u>'+I18n.getMsg("crm.fileuploader.message.morefiles",(t.length-1).toString())+"</u></span>"])+"</div>");break;default:a=I18n.getMsg("crm.fileuploader.message.uploadfailedretry")}return a},FileUploader.prototype.defaultNotify=function(e,t,a){var n=!1;if(this.options.messageType=$.extend(!0,this.defaultOptions.messageType,this.options.messageType),this.options.messageState=$.extend(!0,this.defaultOptions.messageState,this.options.messageState),this.options.notify!==FileUploader.noop&&(n=this.options.notify.call(this,e,t,a)),!n)return FileUploader.displayMessage.call(this,e,FileUploader.getDisplayMessage.call(this,t,a),this.options.noteAttachLimitExceedNotification),!1},FileUploader.prototype.pushNotification=function(e,t,a){if(this.defaultNotify.call(this,e,t,a),!$(".crm-msg"))return!1;$(".crm-msg").addClass("fileuploader");var n=!1;a&&1!=a.length&&this.files.length!==a.length&&2!==a.length&&a.length>0&&(n=!0),$(".crm-msg").css("max-width","550px"),n&&$("#otherstooltip")&&($("#otherstooltip").on("mouseenter",(function(e){crmui.toolTip_show($("#otherstooltip"),"left",$ESAPI.encoder().encodeForHTML(FileUploader.getFileNamesCommaSeparated(a.slice(1))).replace(/,\s/g,"<br>"),!0),$("#wf_tooltip").css("z-index","20000")})),$("#otherstooltip").on("mouseleave",(function(e){crmui.toolTip_hide()})))},FileUploader.prototype.isContainerActive=function(){var e=this.getActiveFiles(),t=this.getFilesWithStatusAdded();return 0!==e.length||0!==t.length},FileUploader.prototype.isBatchClientComplete=function(){if(this.isContainerActive())return!1;var e=this.getFilesWithStatusSuccess(),t=this.getFilesWithStatusError();return!e||!t||e.length+t.length===this.files.length},FileUploader.prototype.isBatchCallbackComplete=function(){var e=this.getFilesDone(!1);return!(e&&e.length>0)&&!!this.isBatchClientComplete()},FileUploader.prototype.allFilesFailed=function(){return 0!==this.files.length&&this.getFilesWithStatusError().length===this.files.length},FileUploader.prototype.setCustomEvent=function(e,t){this.events.push(e),this.on(e,t||FileUploader.noop)},FileUploader.prototype.callCustomEvent=function(e){-1!==$.inArray(e,this.events)&&this.emit.apply(this,arguments)},FileUploader.maliciousContentDetected=function(e){CTIAPI.createFreezeLayer(),$(".freezeLayer").css("z-index","299"),$(e.containerTitleId).text(e.title),e.title instanceof jQuery?$(e.containerTitleId).html(e.title):$(e.containerTitleId).text(e.title),e.message instanceof jQuery?$(e.containerMessageId).html(e.message):$(e.containerMessageId).text(e.message),$(e.containerOkId).attr("value",e.okMessage),e.isAlert||$(e.containerOkId).on("click",e.okCallback),$(e.containerOkId).on("click",(function(){$(e.containerId).hide(),$(e.containerIconId).removeClass(),renderingUtils.removeFreezeLayer(),$(e.containerOkId).off("click"),$(e.containerCancelId).off("click"),$(e.containerCancelId).show()})),e.isAlert?$(e.containerCancelId).hide():($(e.containerCancelId).show(),$(e.containerCancelId).attr("value",e.cancelMessage),$(e.containerCancelId).on("click",(function(){$(e.containerId).hide(),$(e.containerIconId).removeClass(),renderingUtils.removeFreezeLayer(),$(e.containerCancelId).off("click"),$(e.containerOkId).off("click")}))),e.otherfilesId&&($(e.otherfilesId).on("mouseenter",(function(t){crmui.toolTip_show($(e.otherfilesId),"left",FileUploader.getFileNamesCommaSeparated(e.maliciousfiles.slice(1)).replace(/,\s/g,"<br>"),!0),$("#wf_tooltip").css("z-index","1100")})),$(e.otherfilesId).on("mouseleave",(function(e){crmui.toolTip_hide()}))),$(e.containerIconId).addClass(e.containerIconClasses),$(e.containerId).css("z-index","300"),$(e.containerId).show()},FileUploader.prototype.init=function(){var e,t,a,n,l,i,s;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement(new StringBuilder('<div id="dropzonediv" style="display:none" ').append('class="dz-default dz-message"><span style="display:none">').append(this.options.dictDefaultMessage).append("</span></div>").toString())),this.options.save){this.proceed=FileUploader.getElement(this.options.save,"save");var r=this.proceed,o=(s=this,function(e){FileUploader.noPropagation(e),$(".crm-msg.fileuploader")&&$(".crm-msg.fileuploader").remove();var t=s.getFilesWithMaliciousContents();if(s.options.needVirusFilter&&0!==t.length){s.options.virusFilter=$.extend({},s.defaultOptions.virusFilter,s.options.virusFilter);var a={containerId:s.options.virusFilter.containerId,otherfilesId:s.options.virusFilter.otherfilesId.call(s),containerIconId:s.options.virusFilter.containerIconId,containerIconClasses:s.options.virusFilter.containerIconClasses.call(s),containerTitleId:s.options.virusFilter.containerTitleId,title:s.options.virusFilter.title.call(s),containerMessageId:s.options.virusFilter.containerMessageId,message:FileUploader.getDisplayMessage.call(s,s.options.messageState.MALICIOUSFILES,t),containerOkId:s.options.virusFilter.containerOkId,okMessage:s.options.virusFilter.okMessage.call(s),okCallback:function(){this.emit("proceed",e)}.bind(s),containerCancelId:s.options.virusFilter.containerCancelId,cancelMessage:s.options.virusFilter.cancelMessage.call(s),cancelCallback:s.options.virusFilter.cancelCallback.call(s),isAlert:s.options.virusFilter.isAlert.call(s),maliciousfiles:t};FileUploader.maliciousContentDetected.call(s,a),void 0!==this.options.autoCleanOnSave&&this.options.autoCleanOnSave&&$(s.options.cancel).click()}else s.emit("proceed",e)});r.addEventListener("click",o),(d={}).element=r,d.action="click",d.actionHandler=o,this.eventTracker.push(d)}if(this.options.cancel){this.terminate=FileUploader.getElement(this.options.cancel,"cancel");var d,c=this.terminate,u=function(e){return function(t){(FileUploader.noPropagation(t),e.options.preventUploadObjDestroy&&e.options.preventUploadObjDestroy.prevent)?($(e.options.preventUploadObjDestroy.objBindTo).data("attachUploaderObj",e),hideAnimatePopup("topBandPopup"),$("#freezeBackGround").css("display","none")):($(".crm-msg.fileuploader")&&$(".crm-msg.fileuploader").remove(),e.emit("terminate",t),e.clean());1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI&&detailView.hideDetailviewMenu(!0)}}(this);c.addEventListener("click",u),(d={}).element=c,d.action="click",d.actionHandler=u,this.eventTracker.push(d)}for(this.clickableElements.length&&(t=function(e){return function(){e.hiddenFileInput&&document.body.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.needMultipleSelection)&&e.hiddenFileInput.setAttribute("multiple","multiple"),!0===e.options.needFolderUpload&&e.hiddenFileInput.setAttribute("webkitdirectory",!0),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="200px",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.body.appendChild(e.hiddenFileInput);var a,n=(a=e,function(){var e;return e=a.hiddenFileInput.files,a.pushFiles(e),t()});e.hiddenFileInput.addEventListener("change",n);var l={};l.element=e.hiddenFileInput,l.action="change",l.actionHandler=n,e.eventTracker.push(l)}}(this),t()),this.URL=null!=(l=window.URL)?l:window.webkitURL,a=0,n=(i=this.events).length;a<n;a++)("paste"!==(e=i[a])||this.options.pasteFiles)&&this.on(e,this.options[e]);this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){if(0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout((function(){return e.emit("queuecomplete")}),0)}}(this)),this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(t){return FileUploader.noPropagation(t),e.emit("dragenter",t)}}(this),dragover:function(e){return function(t){var a;try{a=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===a||"linkMove"===a?"move":"copy",FileUploader.noPropagation(t),e.emit("dragover",t)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(t){return FileUploader.noPropagation(t),e.drop(t)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.options.pasteFiles&&(this.listeners[0].events.paste=function(e){return function(t){return FileUploader.noPropagation(t),e.paste(t)}}(this)),this.setCustomEvent.bind(this),this.callCustomEvent.bind(this),this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(a){if(t!==e.element||a.target===e.element||Dropzone.elementInside(a.target,e.element.querySelector(".dz-message")))return e.hiddenFileInput.click()}}})}}(this)),this.enable(),this.checkAuthorization(),this.options.init.call(this)},FileUploader.prototype.pushFiles=function(e){if(e.length&&!(e.length<=0)){if(this.files.length+e.length>this.options.maxFiles)return this.emit("rejectedallfiles",e,e),void this.pushNotification(this.options.messageType.error,this.options.messageState.NOOFFILESEXCEEDLIMIT,null);for(var t=0,a=0,n=this.files.length;a<n;a++){t+=(r=this.files[a]).size}for(a=0,n=e.length;a<n;a++){if(t+(r=e[a]).size>this.options.totalFilesize*Math.pow(this.options.filesizeBase,2))return this.emit("rejectedallfiles",e,e),this.pushNotification(this.options.messageType.error,this.options.messageState.TOTALSIZEEXCEEDLIMIT,null),!1;t+=r.size}var l=[],i=[],s=[];for(a=0,n=e.length;a<n;a++){(r=e[a]).size>(this.options.maxFilesize+this.options.flexSize)*Math.pow(this.options.filesizeBase,2)?(r.status=Dropzone.ERROR,l.push(r)):0===r.size?(r.status=Dropzone.ERROR,s.push(r)):Dropzone.isValidFile(r,this.options.acceptedFiles)||(r.status=Dropzone.ERROR,i.push(r))}if(l.length>0)return this.emit("rejectedallfiles",l,e),this.pushNotification(this.options.messageType.error,this.options.messageState.BIGFILES,l),!1;if(i.length>0)return this.emit("rejectedallfiles",i,e),this.pushNotification(this.options.messageType.error,this.options.messageState.UNSUPPORTEDFILES,i),!1;if(s.length>0)return this.emit("rejectedallfiles",s,e),this.pushNotification(this.options.messageType.error,this.options.messageState.EMPTYFILES,s),!1;for(a=0,n=e.length;a<n;a++){var r;(r=e[a]).status!==Dropzone.ERROR&&this.addFile(r)}this.emit("addedallfiles",e)}},FileUploader.prototype.checkAuthorization=function(){if(this.previewsContainer&&!1===this.options.isAuthorized&&"normal"!==this.options.uploadMethod){var e=RebrandLinkUtil.getProperty("ACCOUNTS_URL")+"/login?",t=RebrandLinkUtil.getProperty("zdocServiceName");Crm.isVertical?e=RebrandLinkUtil.getProperty("CLIENT_ACCOUNTS_URL")+"/accounts/signin?client_portal=true&portal="+Crm.Vertical.zaid+"&":Crm.userDetails.CLIENT_ACCOUNT?(e=Crm.userDetails.CLIENT_PORTAL_URL+"/accounts/p/"+Crm.userDetails.CLIENT_PORTAL_ID+"/signin?",t=Crm.userDetails.CLIENTPORTAL_IAM_API_REVAMP?RebrandLinkUtil.getProperty("CRMSERVICENAME"):t):e="";var a=this.previewsContainer.parentNode;a&&""!==e&&a.insertBefore(FileUploader.createElement(new StringBuilder('<iframe id="clientTicket"').append('style="display: none;" src="https://').append(e).append("servicename=").append(t).append("&serviceurl=").append("https:").append("//").append(Crm.isCustomDomainURLRequest&&"true"===RebrandLinkUtil.getProperty("ALLOW_CONTEXT_UPLOADS")?document.location.host:null==crmConstants.uploadDomain?RebrandLinkUtil.getProperty("UPLOADSERVERURL"):crmConstants.uploadDomain).append("/").append((Crm.isCustomDomainURLRequest&&"true"===RebrandLinkUtil.getProperty("ALLOW_CONTEXT_UPLOADS")?"zfiles/":"")+crmConstants.FileUploader.uploadServerPath).append('">').append("</iframe>").toString()),this.previewContainer),this.options.isAuthorized=!0}},FileUploader.prototype.fileSize=function(e){var t,a,n,l,i,s,r;if(a=0,n="B",e>0){for(t=s=0,r=(i=["TB","GB","MB","KB","B"]).length;s<r;t=++s)if(l=i[t],e>=Math.pow(this.options.filesizeBase,4-t)){a=e/Math.pow(this.options.filesizeBase,4-t),n=l;break}a=Math.round(10*a)/10}return a+" "+n},FileUploader.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=Dropzone.ADDED,e.done=!1,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(t=this,function(a){return a?(e.accepted=!1,t._errorProcessing([e],a)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}));var t},FileUploader.prototype.accept=function(e,t){return this.options.accept.call(this,e,t)},FileUploader.prototype.drop=function(e){var t,a,n,l;if(e.dataTransfer&&(this.emit("drop",e),this.options.proceedUploadOnDrop&&((t=e.dataTransfer.items)&&(n=t.length),(a=e.dataTransfer.files)&&(l=a.length),(t||a)&&(0!==l||0!==n))))if(this.options._drop.queue=[],this.options._drop.pool=0,this.options._drop.revert=!1,t&&a&&n>0&&l>0&&null!=t[0].webkitGetAsEntry)this._addFilesFromItems(t);else if(a&&a.length>0){for(var i=[],s=0,r=a.length;s<r;s++)0!==a[s].size&&a[s].type&&i.push(a[s]);this.pushFiles(i)}},FileUploader.prototype.paste=function(e){var t,a;null!=(null!=e&&null!=(a=e.clipboardData)?a.items:void 0)&&(this.emit("paste",e),(t=e.clipboardData.items)&&(_lenItems=t.length),_files=e.clipboardData.files,_files&&(_lenFiles=_files.length),!t&&!_files||0===_lenFiles&&0===_lenItems||(this.options._drop.queue=[],this.options._drop.pool=0,this.options._drop.revert=!1,t&&_files&&_lenItems>0&&_lenFiles>0&&null!=t[0].webkitGetAsEntry?this._addFilesFromItems(t):_files&&_files.length>0&&this.pushFiles(_files)))},FileUploader.prototype._addFilesFromItems=function(e){for(var t=[],a=0,n=e.length;a<n;a++){if(null!=(l=e[a]).webkitGetAsEntry&&(i=l.webkitGetAsEntry()))if(i.isFile){if(this.files.length+this.options._drop.queue.length+1>this.options.maxFiles)return this.pushNotification(this.options.messageType.error,this.options.messageState.NOOFFILESEXCEEDLIMIT,null),this.options._drop.queue=[],this.options._drop.pool=0,void(this.options._drop.revert=!0);this.options._drop.queue.push(l.getAsFile())}else i.isDirectory&&this.options.needFolderUpload&&(t.push(l),this.options._drop.pool++)}for(a=0;a<t.length;a++){var l,i;null!=(l=t[a]).webkitGetAsEntry&&(i=l.webkitGetAsEntry())&&i.isDirectory&&this._addFilesFromDirectory(i,i.name)}0===this.options._drop.pool&&this.processDropQueue()},FileUploader.prototype._addFilesFromDirectory=function(e,t){var a,n,l;return a=e.createReader(),l=this,n=function(e){if(l.options._drop.pool--,!l.options._drop.revert){var a,n,i,s=[],r=0;for(n=0,i=e.length;n<i;n++)if((a=e[n]).isFile&&(!l.options.ignoreHiddenFiles||"."!==a.name.substring(0,1))){if(l.files.length+l.options._drop.queue.length+r+1>l.options.maxFiles)return l.pushNotification(l.options.messageType.error,l.options.messageState.NOOFFILESEXCEEDLIMIT,null),l.options._drop.queue=[],l.options._drop.pool=0,void(l.options._drop.revert=!0);r++}var o=function(e){return function(a){e.files.length+e.options._drop.queue.length+1>e.options.maxFiles||(a.fullPath=t+"/"+a.name,e.options._drop.queue.push(a))}};for(n=0,i=e.length;n<i;n++)if((a=e[n]).isFile){if(l.options.ignoreHiddenFiles&&"."===a.name.substring(0,1))continue;a.file(o(l))}else a.isDirectory&&l.options.needFolderUpload&&(s.push(a),l.options._drop.pool++);for(n=0;n<s.length;n++){var d=s[n];l._addFilesFromDirectory(d,t+"/"+d.name)}0===l.options._drop.pool&&l.processDropQueue()}},a.readEntries(n,function(e){return function(t){e.pushNotification(e.options.messageType.error,e.options.messageState.GENERALERROR,null)}}(this))},FileUploader.prototype.processDropQueue=function(){0!==this.options._drop.pool||0===this.options._drop.queue.length||this.options._drop.revert||(this.pushFiles(this.options._drop.queue),this.options._drop.queue=[],this.options._drop.pool=0,this.options._drop.revert=!1)},FileUploader.prototype.fetchBaseHeader=function(e){if("normal"===this.options.uploadMethod||"zos"===this.options.uploadMethod)return{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken,"X-CRM-ORG":crmZgid,"cache-control":crmConstants.FileUploader.cacheControl,"x-requested-with":crmConstants.FileUploader.xRequestedWith};if(!0===this.options.isSendToWorkdrive){var t,a=this.options.uploadBean.crmHandback?this.options.uploadBean.crmHandback:{};a.entityName=this.options.workdriveUploadData.entityName;for(var n=moduleDetailedInfo.modules,l=n.length,i=0;i<l;i++)if(n[i].module_name===a.module){t=n[i].id;break}var s={entity_id:a.entityId,module:t};return{accept:crmConstants.FileUploader.accept,"cache-control":crmConstants.FileUploader.cacheControl,"upload-id":e.upload.id?e.upload.id:null,"x-filename":e.upload.fileName?encodeURIComponent(e.upload.fileName):null,"x-content_type":e.type?e.type:null,"x-uploadto":"myfolders","x-parent_id":this.options.workdriveUploadData.parendWorkspaceId?this.options.workdriveUploadData.parendWorkspaceId:"-1","x-override-name-exist":"false","x-service":"WD","x-zwdapp-token":this.options.workdriveUploadData.jwtToken,"x-cli-msg":JSON.stringify(s),"x-zwdapp-handback":JSON.stringify(a)}}for(var r=null,o=["zfs","zfsng"],d=[RebrandLinkUtil.getProperty("UPLOADSERVERSERVICEKEY"),RebrandLinkUtil.getProperty("DOCSUPLOADSERVERSERVICEKEY")],c=0,u=o.length;c<u;c++)this.options.uploadMethod===o[c]&&(r=d[c]);var p={accept:crmConstants.FileUploader.accept,"cache-control":crmConstants.FileUploader.cacheControl,"upload-id":e.upload.id?e.upload.id:null,"x-filename":e.upload.fileName?encodeURIComponent(e.upload.fileName):null,"x-content_type":e.type?e.type:null},m=window.location.origin;if(Crm.isCustomDomainURLRequest||"true"!==RebrandLinkUtil.getProperty("IS_LOCAL_ZOHO")||(p["x-cli-msg"]='{"origin":"'+m+'"}'),null!=RebrandLinkUtil.getProperty("UPLOADSTREAMMODE")&&(p["x-fclient-version"]=RebrandLinkUtil.getProperty("UPLOADSTREAMMODE")),p["x-service"]=this.options.uploadBean.serviceKey?this.options.uploadBean.serviceKey:r,Crm.isVertical){var h={"x-crm-subdomain":Crm.Vertical.appDomain,"x-cli-zaid":Crm.Vertical.zaid};p=$.extend({},p,h)}if(Crm.userDetails.CLIENT_ACCOUNT){var g={"x-cli-zaid":Crm.userDetails.CLIENT_PORTAL_ID};p=$.extend({},p,g)}if("zfs"===this.options.uploadMethod){var f=RebrandLinkUtil.getProperty("UPLOADSERVERAUTHURL");if(void 0!==f){var v={authurl:f};p=$.extend({},p,v)}return p}var y={"x-notifyto":RebrandLinkUtil.getProperty("WMS_PRDID"),invoker:crmConstants.FileUploader.invoker,"x-zsoid":this.options.uploadBean.user.zgid?this.options.uploadBean.user.zgid:Crm.userDetails.ZGID,"x-folderid":this.options.uploadBean.folderId?this.options.uploadBean.folderId:null,"x-uploadto":this.options.uploadBean.uploadTo?this.options.uploadBean.uploadTo:null,crmhandback:this.options.uploadBean.crmHandback?JSON.stringify(this.options.uploadBean.crmHandback):""};return null!=this.options&&null!=this.options.fromSrc&&(y.fromSrc=this.options.fromSrc),p=$.extend({},p,y)},FileUploader.prototype.uploadFiles=function(e){if("normal"!==this.options.uploadMethod){if("zos"!==this.options.uploadMethod)(t=this,function(){t.options.uploadBean.udserver={requestMethod:"POST",protocol:"https:",url:Crm.isCustomDomainURLRequest&&"true"===RebrandLinkUtil.getProperty("ALLOW_CONTEXT_UPLOADS")?document.location.host:null==crmConstants.uploadDomain?RebrandLinkUtil.getProperty("UPLOADSERVERURL"):crmConstants.uploadDomain,path:(Crm.isCustomDomainURLRequest&&"true"===RebrandLinkUtil.getProperty("ALLOW_CONTEXT_UPLOADS")?"zfiles/":"")+crmConstants.FileUploader.uploadServerPath}})();var t,a=this.options.uploadBean;if("zos"===this.options.uploadMethod){var n=$L("#file_attach_Vision"),l=$L("#vision_creation_page");l&&(l=l[0].component)}for(s=0,r=e.length;s<r;s++)try{d=new XMLHttpRequest;(o=e[s]).xhr=d,o.upload.fileName=o.name,o.upload.fileSize=o.size,o.size>225e6&&Crm.isCustomDomainURLRequest&&"true"===RebrandLinkUtil.getProperty("ALLOW_CONTEXT_UPLOADS")&&(a.udserver.url=null==crmConstants.uploadDomain?RebrandLinkUtil.getProperty("UPLOADSERVERURL"):crmConstants.uploadDomain,a.udserver.path=crmConstants.FileUploader.uploadServerPath),i="FILE_"+Math.floor(Math.random()*$.now())+"_"+s;u=o.previewElement;(c=document.createAttribute("id")).value=this.getBatchId()+"_"+i,o.upload.id=c.value,u.setAttributeNode(c),jQuery.data(u,o.upload.id,this.callbackHandler.bind(this)),o.previewElement=u,d.open(this.getRequestMethod(),this.getRequestURL(),!0),d.withCredentials=!!this.options.withCredentials,(null!=(h=d.upload)?h:d).onprogress=FileUploader.updateProgressCallback(this,o),d.onload=FileUploader.onloadCallback(this,o),d.onerror=FileUploader.onerrorCallback(this,o);p=this.fetchBaseHeader(o);for(headerName in this.options.headers&&(p=$.extend({},this.options.headers,p)),p)headerValue=p[headerName],d.setRequestHeader(headerName,headerValue);if("zos"===this.options.uploadMethod)d.withCredentials=!0,(m=new FormData).append("images",o),this.emit("sending",m,d),d.send(m),n&&(n[0].ltProp("disabled",!0),l.setData("is_gallery_selected",!1));else this.emit("sending",o,d),d.send(o)}catch(t){t.message=t.message+" ::::: Extra Details : File Upload failed for "+this.getBatchId()+"_"+i,this.pushToErrorState(e[s],this.options.dictResponseError,e[s].xhr,t)}}else for(var i,s=0,r=e.length;s<r;s++)try{var o,d=new XMLHttpRequest;(o=e[s]).xhr=d,o.upload.fileName=o.name,o.upload.fileSize=o.size,o.size>225e6&&Crm.isCustomDomainURLRequest&&"true"===RebrandLinkUtil.getProperty("ALLOW_CONTEXT_UPLOADS")&&(a.udserver.url=null==crmConstants.uploadDomain?RebrandLinkUtil.getProperty("UPLOADSERVERURL"):crmConstants.uploadDomain,a.udserver.path=crmConstants.FileUploader.uploadServerPath),i="FILE_"+Math.floor(Math.random()*$.now())+"_"+s;var c,u=o.previewElement;(c=document.createAttribute("id")).value=this.getBatchId()+"_"+i,o.upload.id=c.value,u.setAttributeNode(c),o.previewElement=u,d.open(this.getRequestMethod(),this.getRequestURL(),!0),d.withCredentials=!!this.options.withCredentials,(null!=(h=d.upload)?h:d).onprogress=FileUploader.updateProgressCallback(this,o),d.onload=FileUploader.onloadCallback(this,o),d.onerror=FileUploader.onerrorCallback(this,o);var p=this.fetchBaseHeader(o);for(headerName in this.options.headers&&(p=$.extend({},this.options.headers,p)),window.clientPortalName&&(p["X-CRMPORTAL"]=window.clientPortalName),p)headerValue=p[headerName],d.setRequestHeader(headerName,headerValue);var m=new FormData;if(this.options.formData){var h=this.options.formData;for(var g in h)h.hasOwnProperty(g)&&(m.has(g)?m.set(g,h[g]):m.append(g,h[g]))}this.emit("sending",o,d),m.append("file",o),d.send(m)}catch(t){t.message=t.message+" ::::: Extra Details : File Upload failed for "+this.getBatchId()+"_"+i,this.pushToErrorState(e[s],this.options.dictResponseError,e[s].xhr,t)}},FileUploader.prototype._finished=function(e,t,a){e.status=Dropzone.SUCCESS,this.emit("success",e,t,a),this.emit("complete",e),this.emit("scanning",e),"normal"===this.options.uploadMethod&&(this.centralFileUploaderCallbackHandler.call(this,t,e),this.emit("callbackcomplete",e)),this.options.autoProcessQueue&&this.processQueue(),this.isBatchClientComplete()&&this.emit("batchclientcomplete",this.files)},FileUploader.prototype.removeFile=function(e){if(e.status===Dropzone.UPLOADING&&this.cancelUpload(e),e.status===Dropzone.SUCCESS||e.status===Dropzone.ERROR){for(var t=this.options.successfullyUploadedFiles,a=this.options.failedUploadedFiles,n=!1,l=0,i=t.length;l<i;l++){if(typeof(r=t[l])==typeof{})for(var s in r)if(r.hasOwnProperty(s)&&r[s]===e.upload.id){this.options.failedUploadedFiles.push(r),this.options.successfullyUploadedFiles.splice(l,1),n=!0;break}}for(l=0,i=a.length;!n&&l<i;l++){var r;if(typeof(r=a[l])==typeof{})for(var s in r)r.hasOwnProperty(s)&&r[s]===e.upload.id&&this.options.failedUploadedFiles.splice(l,1)}}if(this.files=FileUploader.without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},FileUploader.prototype.cancelUpload=function(e){if(e.status===Dropzone.UPLOADING&&e.xhr.abort(),e.status=Dropzone.CANCELED,this.emit("canceled",e),this.options.autoProcessQueue)return this.processQueue()},FileUploader.prototype.getFilesDone=function(e){for(var t=[],a=0,n=this.files.length;a<n;a++)this.files[a].done===e&&t.push(this.files[a]);return t},FileUploader.prototype.getFileWithId=function(e){for(var t,a=0,n=this.files.length;a<n;a++){var l=this.files[a];if(l.upload.id===e){t=l;break}}return t},FileUploader.prototype.getTotalSizeOfAllFiles=function(){for(var e=0,t=0,a=this.files.length;t<a;t++){e+=this.files[t].size}return e},FileUploader.prototype.getFilesWithMaliciousContents=function(){for(var e=[],t=0,a=this.files.length;t<a;t++)this.files[t].virus&&e.push(this.files[t]);return e},FileUploader.prototype.getFilesWithStatusSuccess=function(){return this.getFilesWithStatus(Dropzone.SUCCESS)},FileUploader.prototype.getFilesWithStatusError=function(){return this.getFilesWithStatus(Dropzone.ERROR)},FileUploader.prototype.getFilesWithStatusCanceled=function(){return this.getFilesWithStatus(Dropzone.CANCELED)},FileUploader.prototype.getFilesWithStatusUploading=function(){return this.getFilesWithStatus(Dropzone.UPLOADING)},FileUploader.prototype.getFilesWithStatusProcessing=function(){return this.getFilesWithStatus(Dropzone.PROCESSING)},FileUploader.prototype.getFilesWithStatusAccepted=function(){return this.getFilesWithStatus(Dropzone.QUEUED)},FileUploader.prototype.getFilesWithStatusQueued=function(){return this.getFilesWithStatus(Dropzone.QUEUED)},FileUploader.prototype.getFilesWithStatusAdded=function(){return this.getFilesWithStatus(Dropzone.ADDED)},FileUploader.prototype.updateTotalUploadProgress=FileUploader.noop,FileUploader.prototype.pushToErrorState=function(e,t,a,n){return this._errorProcessing([e],t,a,n)},FileUploader.prototype._errorProcessing=function(e,t,a,n){var l,i,s;for(i=0,s=e.length;i<s;i++){l=e[i];var r={type:"custom event"};if(r.file_id=l.upload.id,r.message=t,r.status=null==a?"":a.status,murphy.addCustomTracking(r),null!=n&&n)murphy.error(n);else try{throw new Error("File Upload failed for FILE : "+l.upload.id+", MESSAGE : "+t+", STATUS CODE : "+r.status)}catch(e){murphy.error(e)}}for(i=0,s=e.length;i<s;i++)(l=e[i]).status=Dropzone.ERROR,this.emit("error",l,t,a),this.emit("complete",l);this.options.autoProcessQueue&&this.processQueue(),this.isBatchClientComplete()&&this.emit("batchclientcomplete",this.files)},FileUploader.prototype.clean=function(){this.emit("clean"),this.destroy();for(var e=0,t=this.eventTracker.length;e<t;e++){var a=this.eventTracker[e];if(a.element&&a.action&&a.actionHandler)try{a.element.removeEventListener(a.action,a.actionHandler)}catch(e){}}for(var n=0;n<FileUploader.instances.length;n++){var l=FileUploader.instances[n];if(l.batchId===this.options.uploadBean.batchId&&l.instance===this){FileUploader.instances.splice(n,1);break}}for(var i in $(this.element).removeAttr("batchId"),this)this.hasOwnProperty(i)&&delete this[i]},FileUploader.getFileNamesCommaSeparated=function(e){for(var t="",a=0,n=e.length;a<n;a++)t+=e[a].name,a+1<n&&(t+=", ");return t},FileUploader.updateProgressCallback=function(e,t){return function(a){var n,l;if(null!=a){if(!a.lengthComputable)return;if((n=100*a.loaded/a.total)<=t.upload.progress)return;t.upload.progress=n,t.upload.bytesSent=a.loaded,t.upload.total=a.total}else if(l=!0,n=100,100===t.upload.progress&&t.upload.bytesSent===t.upload.total||(l=!1),t.upload.progress=n,t.upload.bytesSent=t.upload.total,l)return;return e.emit("uploadprogress",t,n,t.upload.bytesSent)}},FileUploader.onloadCallback=function(e,t){return function(a){var n;if(4===t.xhr.readyState){t.status!==Dropzone.CANCELED&&(e.options._doneXhr.push(t.upload.id),FileUploader.updateProgressCallback(e,t)(),e.emit("responsehandler",t,t.xhr),200<=(n=t.xhr.status)&&n<300||307==n?(e.options.isAuthorized=!0,e._finished(t,t.xhr.responseText||e.options.dictResponseSuccess,a)):(e.options.isAuthorized=!1,e._errorProcessing([t],t.xhr.responseText||e.options.dictResponseError,t.xhr)));for(var l=0,i=e.options._pendingCallback.length;l<i;l++){var s=e.options._pendingCallback[l][t.upload.id];if(s){s(),e.options._pendingCallback.splice(l,1);var r=$.inArray(t.upload.id,e.options._doneXhr);r>=0&&e.options._doneXhr.splice(r,1);break}}}}},FileUploader.onerrorCallback=function(e,t){return function(){t.status!==Dropzone.CANCELED&&(e.emit("responsehandler",t,t.xhr),e._errorProcessing([t],t.xhr.responseText||e.options.dictResponseError,t.xhr)),e.options.isAuthorized=!1;for(var a=0,n=e.options._pendingCallback.length;a<n;a++){var l=e.options._pendingCallback[a][t.upload.id];if(l){l(),e.options._pendingCallback.splice(a,1);var i=$.inArray(t.upload.id,e.options._doneXhr);i>=0&&e.options._doneXhr.splice(i,1);break}}}},FileUploader.without=function(e,t){var a,n,l,i;for(i=[],n=0,l=e.length;n<l;n++)(a=e[n])!==t&&i.push(a);return i},FileUploader.createElements=function(e){var t;return(t=document.createElement("div")).innerHTML=e,t.childNodes},FileUploader.createElement=function(e){return Dropzone.createElement(e)},FileUploader.confirm=function(e,t,a){return Dropzone.confirm(e,t,a)},FileUploader.isValidFile=function(e,t){return Dropzone.isValidFile(e,t)},FileUploader.getElements=function(e,t){return Dropzone.getElements(e,t)},FileUploader.elementInside=function(e,t){return Dropzone.elementInside(e,t)},FileUploader.getElement=function(e,t){return Dropzone.getElement(e,t)},FileUploader.noPropagation=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},FileUploader.ADDED=Dropzone.ADDED,FileUploader.QUEUED=Dropzone.QUEUED,FileUploader.ACCEPTED=Dropzone.QUEUED,FileUploader.UPLOADING=Dropzone.UPLOADING,FileUploader.PROCESSING=Dropzone.UPLOADING,FileUploader.CANCELED=Dropzone.CANCELED,FileUploader.ERROR=Dropzone.ERROR,FileUploader.SUCCESS=Dropzone.SUCCESS,Element.prototype.removeAll=function(){for(;this.firstChild;)this.removeChild(this.firstChild);return this},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.FileUploader=function(e){return this.each((function(){return new FileUploader(this,e)}))}),StringBuilder=function(e){this.initialize.apply(this,arguments)},StringBuilder.prototype={_nl:"\r\n",_buf:null,initialize:function(){return this._buf=[],!arguments||arguments.length>1||(this._buf[this._buf.length]=arguments[0]),this},append:function(e){return this._buf[this._buf.length]=e,this},appendFormat:function(e){if(!arguments||arguments.length<=1)return this;var t=this._toArray(arguments).slice(1);return this._buf[this._buf.length]=e.replace(/\{(\d+)\}/g,(function(e,a,n,l){return t[a].toString()})),this},appendLine:function(e){return this.append(e+this._nl)},clear:function(){return this._buf=[],this},toString:function(){return this._buf.join("")},length:function(){return this.toString().length},_toArray:function(e){if(!e||!e.length)return[];for(var t=e.length,a=new Array(t);t--;)a[t]=e[t];return a}},function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.deleteFieldWarningPopup=e({1:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <span id="gametrophydelhead" style="display:none;" class="denyHead crm-font-regular" >'+s(a.getI18n.call(i,"gs.salesmotivator",{name:"getI18n",hash:{},data:l}))+" ("+s(a.getI18n.call(i,"gs.rules",{name:"getI18n",hash:{},data:l}))+")</span> "},3:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <span id="gametrophydelhead" style="display:none;" class="denyHead crm-font-regular" >'+s(a.getI18n.call(i,"game.feature.label",{name:"getI18n",hash:{},data:l}))+" ("+s(a.getI18n.call(i,"game.trophies",{name:"getI18n",hash:{},data:l}))+")</span> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var i,s=null!=t?t:{},r=e.escapeExpression;return'<div class="newPopup ppTop p0" id="deletefield" style="width:450px;z-index:1000;display:none;position:absolute;"> <div class="formBldPopHd" id="delfldhd"></div> <div class="p30 pT0" id="delfldbdy"> <span id="deleteInfo1" class="crm-font-regular fontSmooth crm-base-font-size crmParagraphColor dIB"></span> <div id=\'deleteDetails\' class="mT20 p15 infoCont maxH200 oA"> <div id="wfOnFUhead" style="display:none;" class="denyHead crm-font-regular"> '+r(a.getI18n.call(s,"crm.workflow.rules",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"crm.workflow.rule.label.SetTrigger",{name:"getI18n",hash:{},data:l}))+')</div> <div id="wfOnFUdiv" class="ncff" style="display:none;"></div> <div id="cadenceshead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.setup.system.cadences",{name:"getI18n",hash:{},data:l}))+'</div> <div id="cadencesdiv" class="ncff" style="display:none;"></div> <div id="wfAlerthead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.workflow.alerts",{name:"getI18n",hash:{},data:l}))+'</div> <div id="wfAlertdiv" class="ncff" style="display:none;"></div> <div id="alertCriteriahead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.workflow.alerts",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"crm.workflow.rule.criteria",{name:"getI18n",hash:{},data:l}))+')</div> <div id="alertCriteriadiv" class="ncff" style="display:none;"></div> <div id="wfTBAhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.workflow.rules",{name:"getI18n",hash:{},data:l}))+"("+r(a.getI18n.call(s,"crm.workflow.rules.list.Header.TimedActions",{name:"getI18n",hash:{},data:l}))+')</div> <div id="wfTBAdiv" class="ncff" style="display:none;"></div> <div id="bPRulehead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.label.process.automation",{name:"getI18n",hash:{},data:l}))+'</div> <div id="bPRulediv" class="ncff" style="display:none;"></div> <div id="bPTransCriRulehead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.tags.delete.popup.blue.print.transition.criteria",{name:"getI18n",hash:{},data:l}))+'</div> <div id="bPTransCriRulediv" class="ncff" style="display:none;"></div> <div id="pfCrihead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.label.process.automation",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"crm.workflow.rule.criteria",{name:"getI18n",hash:{},data:l}))+')</div> <div id="pfCridiv" class="ncff" style="display:none;"></div> <div id="wfCrihead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.workflow.rules",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"crm.workflow.rule.criteria",{name:"getI18n",hash:{},data:l}))+')</div> <div id="wfCridiv" class="ncff" style="display:none;"></div> <div id="kioskshead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.setup.system.kiosk",{name:"getI18n",hash:{},data:l}))+'</div> <div id="kiosksdiv" class="ncff" style="display:none;"></div> <div id="datahubshead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.auditlog.datahub",{name:"getI18n",hash:{},data:l}))+'</div> <div id="datahubsdiv" class="ncff" style="display:none;"></div> <div id="lockingRuleshead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.record.label.rules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="lockingRulesdiv" class="ncff" style="display:none;"></div> <div id="gameKpiCrihead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"gs.salesmotivator",{name:"getI18n",hash:{},data:l}))+'</div> <div id="gameKpiCridiv" class="ncff" style="display:none;"></div> <div id="gameDashboardhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"gs.salesmotivator",{name:"getI18n",hash:{},data:l}))+" - "+r(a.getI18n.call(s,"gs.dashboards",{name:"getI18n",hash:{},data:l}))+'.</div> <div id="gameDashboarddiv" class="ncff" style="display:none;"></div> <div id="wfFUhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.workflow.field.update",{name:"getI18n",hash:{},data:l}))+'</div> <div id="wfFUdiv" class="ncff" style="display:none;"></div> <div id="wfTaskhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.workflow.label.tasks",{name:"getI18n",hash:{},data:l}))+'</div> <div id="wfTaskdiv" class="ncff" style="display:none;"></div> <div id="wfWHhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"workflow.webHooks",{name:"getI18n",hash:{},data:l}))+'</div> <div id="wfWHdiv" class="ncff" style="display:none;"></div> <div id="wfDGhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.workflow.label.wfDeluge",{name:"getI18n",hash:{},data:l}))+'</div> <div id="wfDGdiv" class="ncff" style="display:none;"></div> <div id="mailParserhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.mailparser.title",{name:"getI18n",hash:{},data:l}))+'</div> <div id="mailParserdiv" class="ncff" style="display:none;"> </div> <div id="paUsedHead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.label.process.automation",{name:"getI18n",hash:{},data:l}))+'</div> <div id="paUsedDiv" class="ncff" style="display:none;"></div> <div id="wizardUsedhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.settings.wizards",{name:"getI18n",hash:{},data:l}))+'</div> <div id="wizardUseddiv" class="ncff" style="display:none;"></div> <div id="enrichUsedhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.label.auto.enrich",{name:"getI18n",hash:{},data:l}))+'</div> <div id="enrichUseddiv" class="ncff" style="display:none;"></div> <div id="predUsedHead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.predictions.feature.label",{name:"getI18n",hash:{},data:l}))+'</div> <div id="predUsedDiv" class="ncff" style="display:none;"></div> <div id="churnUsedHead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.zia.prediction.churn",{name:"getI18n",hash:{},data:l}))+'</div> <div id="churnUsedDiv" class="ncff" style="display:none;"></div> <div id="macroFUhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.macro.button.label.macros",{name:"getI18n",hash:{},data:l}))+'</div> <div id="macroFUdiv" class="ncff" style="display:none;"></div> <div id="pfUsedHead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.portalforms",{name:"getI18n",hash:{},data:l}))+'</div> <div id="pfUsedDiv" class="ncff" style="display:none;"></div> <div id="cvhead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.fielddelete.customview",{name:"getI18n",hash:{},data:l}))+'</div> <div id="cvdiv" class="ncff" style="display:none;"> </div> <div id="kanbanhead" class="denyHead crm-font-regular dN" >'+r(a.getI18n.call(s,"crm.fielddelete.kanbanview",{name:"getI18n",hash:{},data:l}))+'</div> <div id="kanbandiv" class="dN"> </div> <div id="charthead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.chartview.plural.label",{name:"getI18n",hash:{},data:l}))+'</div> <div id="chartdiv" class="ncff" style="display:none;"> </div> <div id="timelinehead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.timeline.view.plural.label",{name:"getI18n",hash:{},data:l}))+'</div> <div id="timelinediv" class="ncff" style="display:none;"> </div> <div id="ithead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.fielddelete.inventorytemplate",{name:"getI18n",hash:{},data:l}))+'</div> <div id="itdiv" class="ncff" style="display:none;"> </div> <div id="ethead" style="display:none;"  class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.fielddelete.emailtemplate",{name:"getI18n",hash:{},data:l}))+'</div> <div id="etdiv" class="ncff" style="display:none;"> </div> <div id="efhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.fielddelete.emailfooter",{name:"getI18n",hash:{},data:l}))+'</div> <div id="efdiv" class="ncff" style="display:none;"> </div> <div id="sthead" style="display:none;"  class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.fielddelete.notificationsmstemplate",{name:"getI18n",hash:{},data:l}))+'</div> <div id="stdiv" class="ncff" style="display:none;"> </div> <div id="wthead" style="display:none;"  class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.fielddelete.whatsapptemplate",{name:"getI18n",hash:{},data:l}))+'</div> <div id="wtdiv" class="ncff" style="display:none;"> </div> <div id="pethead" style="display:none;"  class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"custmr.prtl.template.delete.field.head",{name:"getI18n",hash:{},data:l}))+'</div> <div id="petdiv" class="ncff" style="display:none;"> </div> <div id="ffhead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.fielddelete.formula",{name:"getI18n",hash:{},data:l}))+'</div> <div id="ffdiv" class="ncff" style="display:none;"> </div> <div id="afhead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.fielddelete.aggregate",{name:"getI18n",hash:{},data:l}))+'</div> <div id="afdiv" class="ncff" style="display:none;"> </div> <div id="badiv" class="ncff" style="display:none;"> </div> <div id="businessCardHead" style="display:none;" class="denyHead crm-font-regular"s >'+r(a.getI18n.call(s,"crm.fielddelete.businesscard",{name:"getI18n",hash:{},data:l}))+'</div> <div id="businessCardHead1" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.sectiondelete.businesscard",{name:"getI18n",hash:{},data:l}))+'</div> <div id="reviewprocesshead" style="display:none;" class="denyHead crm-font-regular"s >'+r(a.getI18n.call(s,"crm.setup.system.reviewprocesses",{name:"getI18n",hash:{},data:l}))+'</div> <div id="reviewprocessdiv" class="ncff" style="display:none;"> </div> <div id="reviewprocessCrihead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"Review Processes",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"crm.workflow.rule.criteria",{name:"getI18n",hash:{},data:l}))+')</div> <div id="reviewprocessCridiv" class="ncff" style="display:none;"></div> <div id="businessCardDiv" class="ncff" style="display:none;"> </div> <div id="quickCreateHead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.fielddelete.quickcreate",{name:"getI18n",hash:{},data:l}))+'</div> <div id="quickCreateHead1" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.sectiondelete.quickcreate",{name:"getI18n",hash:{},data:l}))+'</div> <div id="quickCreateDiv" class="ncff" style="display:none;"> </div> <div id="territoryhead" style="display:none;"  class="crm-font-regular denyHead" >'+r(a.getI18n.call(s,"crm.territory.territories",{name:"getI18n",hash:{},data:l}))+'</div> <div id="territorydiv" class="ncff" style="display:none;"> </div> <div id="autofollowhead" style="display:none;"  class="crm-font-regular denyHead" >'+r(a.getI18n.call(s,"crm.label.automate.followup",{name:"getI18n",hash:{},data:l}))+'</div> <div id="autofollowdiv" class="ncff" style="display:none;"> </div> '+(null!=(i=a.if_eq.call(s,"true",a.getUserDetail.call(s,"isMotivatorEnabled",{name:"getUserDetail",hash:{},data:l}),{name:"if_eq",hash:{},fn:e.program(1,l,0),inverse:e.program(3,l,0),data:l}))?i:"")+' <div id="gametrophydeldiv" style="display:none;"> </div> <span id="gamebadgedelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"game.feature.label",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"game.badges",{name:"getI18n",hash:{},data:l}))+')</span> <div id="gamebadgedeldiv" style="display:none;"> </div> <span id="predictiondelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.predictions.feature.label",{name:"getI18n",hash:{},data:l}))+'</span> <div id="predictiondeldiv" style="display:none;"> </div> <span id="churndelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.zia.prediction.churn",{name:"getI18n",hash:{},data:l}))+'</span> <div id="churndeldiv" style="display:none;"> </div> <span id="ziaVoicedelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.profile.zohoapps.ziavoice",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ziaVoicedeldiv" style="display:none;"> </div> <span id="similaritydelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.setup.system.ziasimilarity",{name:"getI18n",hash:{},data:l}))+'</span> <div id="similaritydeldiv" style="display:none;"> </div> <span id="recommendationdelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.zia.config.org.category.recomendation",{name:"getI18n",hash:{},data:l}))+'</span> <div id="recommendationdeldiv" style="display:none;"> </div> <span id="ziacallanalyticsdelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.setup.system.ziacallanalytics",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ziacallanalyticsdeldiv" style="display:none;"> </div> <span id="dataEnrichmentdelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.label.auto.enrich",{name:"getI18n",hash:{},data:l}))+'</span> <div id="dataEnrichmentdeldiv" style="display:none;"> </div> <span id="canvasrulehead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.canvas.rule.title","Canvas",{name:"getI18n",hash:{},data:l}))+'</span> <div id="canvasruledeldiv" style="display:none;"> </div> <span id="visiondelhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.setup.system.ziavision",{name:"getI18n",hash:{},data:l}))+'</span> <div id="visiondeldiv" style="display:none;"> </div> <span id="imageValidationDelHead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.zia.vision.image.validator",{name:"getI18n",hash:{},data:l}))+'</span> <div id="imageValidationDelDiv" style="display:none;"> </div> <div id="approvalRuleCrihead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.label.approvalProcess",{name:"getI18n",hash:{},data:l}))+'</div> <div id="approvalRuleCridiv" class="ncff" style="display:none;"></div> <div id="layouthead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.label.layout",{name:"getI18n",hash:{},data:l}))+'</div> <div id="layoutdiv" class="ncff" style="display:none;"></div> <div id="convertLeadMappinghead" class="denyHead crm-font-regular mL10 mT10" style="display:none;" >'+r(a.getI18n.call(s,"crm.map.custom.fields",a.getDisplayModuleName.call(s,"Leads",{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+'</div> <div id="convertLeadMappingdiv" class="ncff" style="display:none;"></div> <div id="quoteConvertMappinghead" class="denyHead crm-font-regular mL10 mT10" style="display:none;" >'+r(a.getI18n.call(s,"crm.map.custom.fields",a.getDisplayModuleName.call(s,"Leads",{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+'</div> <div id="quoteConvertMappingdiv" class="ncff" style="display:none;"></div> <div id="soConvertMappinghead" class="denyHead crm-font-regular mL10 mT10" style="display:none;" >'+r(a.getI18n.call(s,"crm.map.custom.fields",a.getDisplayModuleName.call(s,"Leads",{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+'</div> <div id="soConvertMappingdiv" class="ncff" style="display:none;"></div> <div id="formRulehead" class="denyHead crm-font-regular" style="display:none;" > '+r(a.getI18n.call(s,"crm.layout.rule.singular",{name:"getI18n",hash:{},data:l}))+'</div> <div id="formRulediv" class="ncff" style="display:none;"></div> <div id="vRhead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.label.validation.rules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="vRdiv" class="ncff" style="display:none;"></div> <div id="scoringRulehead" class="denyHead crm-font-regular" style="display:none;" ></div> <div id="scoringRulediv" class="ncff" style="display:none;"></div> <div id="scoringRuleNewhead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.label.scoring.rules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="scoringRuleNewdiv" class="ncff" style="display:none;"></div> <div id="autoresponseruleNewhead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.autoresponse.rules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="autoresponseruleNewdiv" class="ncff" style="display:none;"></div> <div id="dbComponentshead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.label.analytical.dashboard.components",{name:"getI18n",hash:{},data:l}))+'</div> <div id="dbComponentsdiv" class="ncff" style="display:none;"></div> <div id="calSchhead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.setup.system.calendarbooking",{name:"getI18n",hash:{},data:l}))+'</div> <div id="calSchdiv" class="ncff" style="display:none;"></div> <div id="lookupFilterhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.label.lookupfilter.criteria",{name:"getI18n",hash:{},data:l}))+'</div> <div id="lookupFilterdiv" class="ncff" style="display:none;"></div> <div id="customButtonhead" class="denyHead crm-font-regular mT10" style="display:none;" >'+r(a.getI18n.call(s,"crm.customize.custombutton.label",{name:"getI18n",hash:{},data:l}))+'</div> <div id="customButtondiv" class="ncff" style="display:none;"></div> <div id="rollupFieldhead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.fielddelete.rollup",{name:"getI18n",hash:{},data:l}))+'</div> <div id="rollupFielddiv" class="ncff" style="display:none;"></div> <div id="customLinkhead" class="denyHead crm-font-regular mT10" style="display:none;" >'+r(a.getI18n.call(s,"crm.customlink",{name:"getI18n",hash:{},data:l}))+'</div> <div id="customLinkdiv" class="ncff" style="display:none;"></div> <div id="automationdiv" class="ncff" style="display:none;"></div> <div id="reportshead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.report.reports",{name:"getI18n",hash:{},data:l}))+'</div> <div id="reportsdiv" class="ncff" style="display:none;"> </div> <div id="cpqProductConfiguratorhead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.cpq.settings.productconf",{name:"getI18n",hash:{},data:l}))+'</div> <div id="cpqProductConfiguratordiv" class="ncff" style="display:none;"> </div> <div id="cpqPriceRulehead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.cpq.settings.pricerules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="cpqPriceRulediv" class="ncff" style="display:none;"> </div> <div id="cpqGuidedSellingRulehead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.setup.system.guidedselling1",{name:"getI18n",hash:{},data:l}))+'</div> <div id="cpqGuidedSellingRulediv" class="ncff" style="display:none;"> </div> <div id="segmentCriteriahead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.segmentation.process.criteria",{name:"getI18n",hash:{},data:l}))+'</div> <div id="segmentCriteriadiv" class="ncff" style="display:none;"></div> <div id="segmentFieldhead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.segmentation",{name:"getI18n",hash:{},data:l}))+'</div> <div id="segmentFielddiv" class="ncff" style="display:none;"></div> <div id="abmConfighead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.abm.configuration",{name:"getI18n",hash:{},data:l}))+'</div> <div id="abmConfigdiv" class="ncff" style="display:none;"></div> <div id="abmSegmenthead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.abm.segments",{name:"getI18n",hash:{},data:l}))+'</div> <div id="abmSegmentdiv" class="ncff" style="display:none;"></div> <div id="abmSegmentCampaignsListCriteriahead" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.abm.segments.push.contacts",a.getAbmContactModulePluralName.call(s,{name:"getAbmContactModulePluralName",hash:{},data:l}),a.getBrandName.call(s,{name:"getBrandName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+'</div> <div id="abmSegmentCampaignsListCriteriadiv" class="ncff" style="display:none;"></div> <span id="webTabHead" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.auditlog.webtab",{name:"getI18n",hash:{},data:l}))+'</span> <div id="webTabULDiv" style="display:none;"> </div> <div id="currensyisohead" class="denyHead crm-font-regular" style="display:none;">'+r(a.getI18n.call(s,"crm.fielddelete.currency",{name:"getI18n",hash:{},data:l}))+'</div> <div id="currencyISODiv" class="ncff" style="display:none;"></div> <div id="vochead" class="denyHead crm-font-regular hide">'+r(a.getI18n.call(s,a.getDisplayModuleName.call(s,"Voice of the Customer",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+'</div> <div id="vocdiv" class="ncff" style="display:none;"></div> <div id="voc_confighead" class="denyHead crm-font-regular hide">'+r(a.getI18n.call(s,a.getDisplayModuleName.call(s,"Voice of the Customer",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+'</div> <div id="voc_configdiv" class="ncff" style="display:none;"></div> <div id="voc_componentshead" class="denyHead crm-font-regular hide">'+r(a.getI18n.call(s,"voc.dashboard.components.header",{name:"getI18n",hash:{},data:l}))+'</div> <div id="voc_componentsdiv" class="ncff" style="display:none;"></div> <div id="portalsCriteriaDetailshead"  style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"portal.usertype.criteria.field.deletion.deny",{name:"getI18n",hash:{},data:l}))+'</div> <div id="portalsCriteriaDetailsdiv" class="ncff dN"></div> <div id="sharingRuleshead" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.security.sharing.rules.used.heading",{name:"getI18n",hash:{},data:l}))+'</div> <div id="sharingRulesdiv" class="ncff" style="display:none;"></div> <div id="clientPortalInvFieldHead"  class="denyHead crm-font-regular dN" >'+r(a.getI18n.call(s,"client.portal.field.del.pop.hd",{name:"getI18n",hash:{},data:l}))+'</div> <div id="clientPortalInvFieldDiv" class="ncff dN"></div> <div id="criteriaLimitExceedDiv" style="display:none;" >'+r(a.getI18n.call(s,"crm.title.max.dynamic.formula.fields.popup",{name:"getI18n",hash:{},data:l}))+'</div> <span id="gametrophydelheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"gs.salesmotivator",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"gs.rules",{name:"getI18n",hash:{},data:l}))+')</span> <div id="gametrophydeldivForDynFormulaCrit" style="display:none;"> </div> <span id="gamebadgedelheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"game.feature.label",{name:"getI18n",hash:{},data:l}))+" ("+r(a.getI18n.call(s,"game.badges",{name:"getI18n",hash:{},data:l}))+')</span> <div id="scoringRuleheadForDynFormulaCrit" class="denyHead crm-font-regular" style="display:none;" ></div> <div id="scoringRuledivForDynFormulaCrit" class="ncff" style="display:none;"></div> <div id="scoringRuleNewheadForDynFormulaCrit" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.label.scoring.rules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="scoringRuleNewdivForDynFormulaCrit" class="ncff" style="display:none;"></div> <div id="lookupFilterheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.label.lookupfilter.criteria",{name:"getI18n",hash:{},data:l}))+'</div> <div id="lookupFilterdivForDynFormulaCrit" class="ncff" style="display:none;"></div> <div id="reportsheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.report.reports",{name:"getI18n",hash:{},data:l}))+'</div> <div id="reportsdivForDynFormulaCrit" class="ncff" style="display:none;"> </div> <div id="cpqProductConfiguratorheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.cpq.settings.productconf",{name:"getI18n",hash:{},data:l}))+'</div> <div id="cpqProductConfiguratordivForDynFormulaCrit" class="ncff" style="display:none;"> </div> <div id="cpqPriceRuleheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.cpq.settings.pricerules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="cpqPriceRuledivForDynFormulaCrit" class="ncff" style="display:none;"> </div> <div id="lockingRulesheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular">'+r(a.getI18n.call(s,"crm.record.label.rules",{name:"getI18n",hash:{},data:l}))+'</div> <div id="lockingRulesdivForDynFormulaCrit" class="ncff" style="display:none;"></div> <div id="territoryheadForDynFormulaCrit" style="display:none;"  class="crm-font-regular denyHead" >'+r(a.getI18n.call(s,"crm.territory.territories",{name:"getI18n",hash:{},data:l}))+'</div> <div id="territorydivForDynFormulaCrit" class="ncff" style="display:none;"> </div> <div id="sharingRulesheadForDynFormulaCrit" style="display:none;" class="denyHead crm-font-regular" >'+r(a.getI18n.call(s,"crm.security.sharing.rules.used.heading",{name:"getI18n",hash:{},data:l}))+'</div> <div id="sharingRulesdivForDynFormulaCrit" class="ncff" style="display:none;"></div> <div id="dbComponentsheadForDynFormulaCrit" class="denyHead crm-font-regular" style="display:none;" >'+r(a.getI18n.call(s,"crm.label.analytical.dashboard.components",{name:"getI18n",hash:{},data:l}))+'</div> <div id="dbComponentsdivForDynFormulaCrit" class="ncff" style="display:none;"></div> </div> <div id="forecastDiv" style="display:none;" class="ncff pB20 dim4 crm-base-font-size pT20 mT5"></div> <div id="deleteInfo2" class="crm-font-regular fontSmooth crm-small-font-size crmLabelColor dIB mT20"></div> <div id="scoringRuleCFDiv" class="dN"></div> </div> <div class="popup-model-footer alignRight tgl"> <input id="btnclos"  type="button" value="'+r(a.getI18n.call(s,"crm.button.ok",{name:"getI18n",hash:{},data:l}))+'" class="newgraybtn"  data-zcqa="MPL_deleteField_WarningClose" onClick="crmui.hidePopup(\'deletefield\');"></input> <input id="btncancel"  type="button" value="'+r(a.getI18n.call(s,"crm.button.cancel",{name:"getI18n",hash:{},data:l}))+'" class="newgraybtn" onClick="crmui.hidePopup(\'deletefield\');"  style="display:none;" ></input> <input id="btnskip"  type="button" value="'+r(a.getI18n.call(s,"crm.button.skip.proceed",{name:"getI18n",hash:{},data:l}))+'" class="newgraybtn fromDeletePopup" style="display:none;"  data-zcqa="MPL_deleteField_WarningSkip"></input> </div> </div> '},useData:!0}),t.fieldUsage=e({1:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.if.call(o,null!=t?t.emailTemplateRecords:t,{name:"if",hash:{},fn:e.program(2,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.inventoryRecords:t,{name:"if",hash:{},fn:e.program(5,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.workFlowWebHookRecords:t,{name:"if",hash:{},fn:e.program(8,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.customFunctions:t,{name:"if",hash:{},fn:e.program(11,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.integrations:t,{name:"if",hash:{},fn:e.program(22,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},2:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <span class="dIB linkedHdgElem">'+e.escapeExpression(a.getI18n.call(s,"crm.fielddelete.emailtemplate",{name:"getI18n",hash:{},data:l}))+'</span> <ul class="mB5 mT5 fieldUsageList"> '+(null!=(i=a.each.call(s,null!=t?t.emailTemplateRecords:t,{name:"each",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l}))?i:"")+" </ul> "},3:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <li><a href="'+s(a.getCrmBasePath.call(i,{name:"getCrmBasePath",hash:{},data:l}))+"/ShowSetup.do?tab=custom&subTab=email&step=editEmailTemplate&emailTemplateId="+s(a.encodeURL.call(i,l&&l.key,{name:"encodeURL",hash:{},data:l}))+'" target="_blank" rel="noopener noreferrer"><span>'+s(e.lambda(null!=t?t[0]:t,t))+"</span></a></li> "},5:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <span class="dIB linkedHdgElem">'+e.escapeExpression(a.getI18n.call(s,"crm.fielddelete.inventorytemplate",{name:"getI18n",hash:{},data:l}))+'</span> <ul class="mB5 mT5 fieldUsageList"> '+(null!=(i=a.each.call(s,null!=t?t.inventoryRecords:t,{name:"each",hash:{},fn:e.program(6,l,0),inverse:e.noop,data:l}))?i:"")+" </ul> "},6:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <li><a href="'+s(a.getCrmBasePath.call(i,{name:"getCrmBasePath",hash:{},data:l}))+"/ShowSetup.do?tab=custom&subTab=inventory&step=editInventoryTemplate&emailTemplateId="+s(a.encodeURL.call(i,l&&l.key,{name:"encodeURL",hash:{},data:l}))+'" target="_blank" rel="noopener noreferrer"><span>'+s(e.lambda(null!=t?t[0]:t,t))+"</span></a></li> "},8:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <span class="dIB linkedHdgElem">'+e.escapeExpression(a.getI18n.call(s,"workflow.label.webhooks",{name:"getI18n",hash:{},data:l}))+'</span> <ul class="mB5 mT5 fieldUsageList"> '+(null!=(i=a.each.call(s,null!=t?t.workFlowWebHookRecords:t,{name:"each",hash:{},fn:e.program(9,l,0),inverse:e.noop,data:l}))?i:"")+" </ul> "},9:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <li><a href="'+s(a.getCrmBasePath.call(i,{name:"getCrmBasePath",hash:{},data:l}))+"/ShowSetup.do?tab=automate&subTab=webhook&step=showWebHook&webHookId="+s(a.encodeURL.call(i,l&&l.key,{name:"encodeURL",hash:{},data:l}))+'"target="_blank" rel="noopener noreferrer"><span>'+s(e.lambda(null!=t?t[0]:t,t))+"</span></a></li> "},11:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return' <p class="crmBaseColor pB10 linkedHdgElem">'+e.escapeExpression(a.getI18n.call(o,"crm.field.private.usage.customfunctions",{name:"getI18n",hash:{},data:l}))+"</p> "+(null!=(r=a.each.call(o,null!=t?t.customFunctions:t,{name:"each",hash:{},fn:e.program(12,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},12:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.ifEquals.call(o,l&&l.key,"WORKFLOW",{name:"ifEquals",hash:{},fn:e.program(13,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.ifEquals.call(o,l&&l.key,"RELATED_LIST",{name:"ifEquals",hash:{},fn:e.program(16,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.ifEquals.call(o,l&&l.key,"BUTTON",{name:"ifEquals",hash:{},fn:e.program(19,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},13:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <span class="mL10 dIB crmNotFoundColor">'+e.escapeExpression(a.getI18n.call(s,"crm.label.actions",{name:"getI18n",hash:{},data:l}))+'</span> <ul class="mB5 mT5 fieldUsageList mL20"> '+(null!=(i=a.each.call(s,t,{name:"each",hash:{},fn:e.program(14,l,0),inverse:e.noop,data:l}))?i:"")+" </ul> "},14:function(e,t,a,n,l){var i=e.escapeExpression;return' <li><a href="'+i(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:l}))+'/settings/workflow-deluge" target="_blank" rel="noopener noreferrer"><span>'+i(e.lambda(null!=t?t.name:t,t))+"</span></a></li> "},16:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <span class="mL10 dIB crmNotFoundColor">'+e.escapeExpression(a.getI18n.call(s,"crm.label.cf.functions",{name:"getI18n",hash:{},data:l}))+'</span> <ul class="mB5 mT5 fieldUsageList mL20"> '+(null!=(i=a.each.call(s,t,{name:"each",hash:{},fn:e.program(17,l,0),inverse:e.noop,data:l}))?i:"")+" </ul> "},17:function(e,t,a,n,l){var i=e.escapeExpression;return' <li><a href="'+i(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:l}))+'/settings/functions" target="_blank" rel="noopener noreferrer"><span>'+i(e.lambda(null!=t?t.function_name:t,t))+"</span></a></li> "},19:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return' <span class="mL10 dIB crmNotFoundColor">'+e.escapeExpression(a.getI18n.call(o,"crm.label.cf.custom_buttons",{name:"getI18n",hash:{},data:l}))+'</span> <ul class="mB5 mT5 fieldUsageList mL20"> '+(null!=(r=a.each.call(o,t,{name:"each",hash:{},fn:e.program(20,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </ul> "},20:function(e,t,a,n,l,i,s){var r=null!=t?t:{},o=e.escapeExpression,d=e.lambda;return' <li><a href="'+o(a.getCrmBasePath.call(r,{name:"getCrmBasePath",hash:{},data:l}))+"/settings/modules/"+o(a.encodeURL.call(r,null!=s[2]?s[2].moduleName:s[2],{name:"encodeURL",hash:{},data:l}))+"/buttons/"+o(a.encodeURL.call(r,l&&l.key,{name:"encodeURL",hash:{},data:l}))+'/edit" target="_blank" rel="noopener noreferrer" ><span>'+o(d(null!=t?t.name:t,t))+" - "+o(d(null!=t?t.function_name:t,t))+"</span></a></li> "},22:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <span class="dIB linkedHdgElem">'+e.escapeExpression(a.getI18n.call(s,"crm.field.private.usage.integrations",{name:"getI18n",hash:{},data:l}))+'</span> <ul class="mB5 mT5 fieldUsageList"> '+(null!=(i=a.each.call(s,null!=t?t.integrations:t,{name:"each",hash:{},fn:e.program(23,l,0),inverse:e.noop,data:l}))?i:"")+" </ul> "},23:function(e,t,a,n,l){var i;return" <li>"+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.url:t,{name:"if",hash:{},fn:e.program(24,l,0),inverse:e.program(26,l,0),data:l}))?i:"")+"<span></span></li> "},24:function(e,t,a,n,l){var i=e.lambda,s=e.escapeExpression;return'<a href="'+s(i(null!=t?t.url:t,t))+'" target="_blank" rel="noopener noreferrer"><span>'+s(i(null!=t?t.label:t,t))+"</span></a>"},26:function(e,t,a,n,l){return"<span>"+e.escapeExpression(e.lambda(null!=t?t.label:t,t))+"</span>"},28:function(e,t,a,n,l){return' <p class="dB aligncenter crmNotFoundColor">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.field.private.usage.no",{name:"getI18n",hash:{},data:l}))+"</p> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{},d=e.escapeExpression;return' <div id="fieldUsagePop" class="fieldUsagePop newpopup w400 is-scroll ppTop" style="display: none; height: auto; overflow: visible;" > <div class="pp-header">'+d(a.getI18n.call(o,"crm.field.private.usage",{name:"getI18n",hash:{},data:l}))+'</div> <div class="pp-content" style="max-height: 558px;"> <div> <p class="pB20">'+d(a.getI18n.call(o,"crm.field.private.usage.info",{name:"getI18n",hash:{},data:l}))+'</p> <div class="listOfFieldUsage p20 crm-small-font-size"> '+(null!=(r=a.isNotEmpty.call(o,t,{name:"isNotEmpty",hash:{},fn:e.program(1,l,0,i,s),inverse:e.program(28,l,0,i,s),data:l}))?r:"")+' </div> </div> </div> <div class="pp-footer"> <button id="hideFieldUsageBtn" class="newgraybtn" onclick="crmui.hidePopup(\'fieldUsagePop\');">'+d(a.getI18n.call(o,"crm.button.ok",{name:"getI18n",hash:{},data:l}))+"</button> </div> </div>"},useData:!0,useDepths:!0}),t.fieldsList=e({1:function(e,t,a,n,l){var i;return" "+(null!=(i=a.unless.call(null!=t?t:{},null!=t?t.isDeveloperSpace:t,{name:"unless",hash:{},fn:e.program(2,l,0),inverse:e.noop,data:l}))?i:"")+" "},2:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <div class="pR"> <div class="helpLinkPosition layoutHelp"> <a id="context-helplink" onmouseover="CMB.newShowTooltip(\''+s(a.getI18n.call(i,"crm.label.context.help",{name:"getI18n",hash:{},data:l}))+'\')" onmouseout="CMB.newHideTooltip();" onClick="openHelp(\''+s(e.lambda(null!=t?t.helpLinkUrl:t,t))+'\')" class="mR0" href="javascript:;">'+s(a.getI18n.call(i,"crm.label.context.help",{name:"getI18n",hash:{},data:l}))+"</a> </div> </div> "},4:function(e,t,a,n,l){return" apiNameListTable pL20"},6:function(e,t,a,n,l){var i=e.escapeExpression;return' <form name="profileFieldForm" action=\''+i(a.getCrmBasePath.call(null!=t?t:{},{name:"getCrmBasePath",hash:{},data:l}))+"/UpdateFieldPermission.do?action=profileFieldsUpdate' method='post' onsubmit=\"return crmSetup.getFieldPermission('"+i(e.lambda(null!=t?t.module:t,t))+"','null',this,true)\"> "},8:function(e,t,a,n,l){var i;return" "+(null!=(i=a.unless.call(null!=t?t:{},null!=t?t.isDeveloperSpace:t,{name:"unless",hash:{},fn:e.program(9,l,0),inverse:e.noop,data:l}))?i:"")+" "},9:function(e,t,a,n,l){var i;return" "+(null!=(i=a.setFieldsListHeading.call(null!=t?t:{},t,{name:"setFieldsListHeading",hash:{},fn:e.program(10,l,0),inverse:e.noop,data:l}))?i:"")+" "},10:function(e,t,a,n,l){return""},12:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression,r=e.lambda;return' <form  name="myform" action=\''+s(a.getCrmBasePath.call(i,{name:"getCrmBasePath",hash:{},data:l}))+"/Security.do?actionName=edit&module="+s(r(null!=t?t.module:t,t))+'&modes=edit\' method=\'post\' > <div class="pR"> <div class="helpLinkPosition layoutHelp"><a id="frm-help-icon" onclick="openHelp(\''+s(r(null!=t?t.helpLinkUrl:t,t))+'\')" href="javascript:;">'+s(a.getI18n.call(i,"crm.label.context.help",{name:"getI18n",hash:{},data:l}))+'</a></div> </div> <div class="pT15 crm-font-regular crm-small-font-size crmBaseColor mB20">'+s(a.getI18n.call(i,"crm.search.layout.heading.multiplelayout",{name:"getI18n",hash:{},data:l}))+'</div> <br class="cBoth"></br>  '},14:function(e,t,a,n,l){return" <div class='fieldPermissionDiv'> "},16:function(e,t,a,n,l){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.searchLayoutCheck:t,{name:"if",hash:{},fn:e.program(17,l,0),inverse:e.program(19,l,0),data:l}))?i:"")+" "},17:function(e,t,a,n,l){return" <div class='searchLayoutDiv'> "},19:function(e,t,a,n,l){return" <div class='fieldListDiv mT20'> "},21:function(e,t,a,n,l,i,s){var r,o=e.lambda,d=e.escapeExpression,c=null!=t?t:{};return' <div class="moudleSpecificFields" module="'+d(o(null!=t?t.module:t,t))+'"> '+(null!=(r=a.if.call(c,null!=t?t.isSubform:t,{name:"if",hash:{},fn:e.program(22,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' <table width="100%" border="0" class="newListView brCollapse newListViewEdit hovNon sandboxDiffChanges" id="fieldPermissionsTable" module="'+d(o(null!=t?t.module:t,t))+'"> <tbody> <tr class="tableTitleHeaderRow trout resLay" style="cursor: pointer;" rel="rowgrp"> <th '+(null!=(r=a.if.call(c,null!=s[1]?s[1].isDeveloperSpace:s[1],{name:"if",hash:{},fn:e.program(24,l,0,i,s),inverse:e.program(26,l,0,i,s),data:l}))?r:"")+">"+d(a.getI18n.call(c,"crm.label.Field.label",{name:"getI18n",hash:{},data:l}))+"</th> "+(null!=(r=a.if.call(c,null!=s[1]?s[1].isFieldPermNeeded:s[1],{name:"if",hash:{},fn:e.program(28,l,0,i,s),inverse:e.program(30,l,0,i,s),data:l}))?r:"")+" </tr> "+(null!=(r=a.each.call(c,null!=t?t.fields:t,{name:"each",hash:{},fn:e.program(43,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' </tbody> </table> <div id="norecord" style="display:none" module="'+d(o(null!=t?t.module:t,t))+'"><span class="crm-font-regular nooneisselected" style="color:#c0c6cc;margin-top: 25px;font-size:var(--crm-medium-font-size);text-align:center; display:block;">'+d(a.getI18n.call(c,"crm.adword.searchtextnotbringresult",{name:"getI18n",hash:{},data:l}))+"</span></div> </div> "},22:function(e,t,a,n,l){return' <div class="subform crm-small-font-size crm-font-bold mT30 mB20">'+e.escapeExpression(e.lambda(null!=t?t.label:t,t))+"</div> "},24:function(e,t,a,n,l){return'width="25%"'},26:function(e,t,a,n,l){return'class="w100"'},28:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <th class="w100">'+s(a.getI18n.call(i,"crm.custom.module.read.write",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100">'+s(a.getI18n.call(i,"crm.label.readonly",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100">'+s(a.getI18n.call(i,"crm.custom.module.dont.show",{name:"getI18n",hash:{},data:l}))+"</th> "},30:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].searchLayoutCheck:s[1],{name:"if",hash:{},fn:e.program(31,l,0,i,s),inverse:e.program(33,l,0,i,s),data:l}))?r:"")+" "},31:function(e,t,a,n,l){return' <th class="w100"></th> <th class="w100">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.show",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100"></th> '},33:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].isDeveloperSpace:s[1],{name:"if",hash:{},fn:e.program(34,l,0,i,s),inverse:e.program(36,l,0,i,s),data:l}))?r:"")+" "},34:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <th width="35%">'+s(a.getI18n.call(i,"crm.label.api.name",{name:"getI18n",hash:{},data:l}))+'</th> <th width="25%">'+s(a.getI18n.call(i,"crm.label.datatype",{name:"getI18n",hash:{},data:l}))+'</th> <th width="15%" class="aligncenter">'+s(a.getI18n.call(i,"crm.label.customfield",{name:"getI18n",hash:{},data:l}))+"</th> "},36:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].isPrivateFieldListing:s[1],{name:"if",hash:{},fn:e.program(37,l,0,i,s),inverse:e.program(41,l,0,i,s),data:l}))?r:"")+" "},37:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return' <th class="w100">'+e.escapeExpression(a.getI18n.call(o,"crm.mb.field.privacy.type1",{name:"getI18n",hash:{},data:l}))+"</th> "+(null!=(r=a.if_gt.call(o,null!=(r=null!=s[1]?s[1].layout_jsonarrayObj:s[1])?r.layoutCnt:r,1,{name:"if_gt",hash:{},fn:e.program(38,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},38:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[1]?s[1].isMPLAvailable:s[1],{name:"if",hash:{},fn:e.program(39,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},39:function(e,t,a,n,l){return' <th class="w200">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.layouts",{name:"getI18n",hash:{},data:l}))+"</th> "},41:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{},d=e.escapeExpression;return' <th class="w100">'+d(a.getI18n.call(o,"crm.label.datatype",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100">'+d(a.getI18n.call(o,"crm.label.customfield",{name:"getI18n",hash:{},data:l}))+"</th> "+(null!=(r=a.if_gt.call(o,null!=(r=null!=s[1]?s[1].layout_jsonarrayObj:s[1])?r.layoutCnt:r,1,{name:"if_gt",hash:{},fn:e.program(38,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},43:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{},d=e.lambda,c=e.escapeExpression;return' <tr class="trout resLay fldForSearch '+(null!=(r=a.if.call(o,null!=s[2]?s[2].isDeveloperSpace:s[2],{name:"if",hash:{},fn:e.program(44,l,0,i,s),inverse:e.noop,data:l}))?r:"")+(null!=(r=a.if.call(o,null!=s[2]?s[2].isPrivateFieldListing:s[2],{name:"if",hash:{},fn:e.program(46,l,0,i,s),inverse:e.noop,data:l}))?r:"")+'" id="'+c(d(null!=t?t.columnName:t,t))+'" '+(null!=(r=a.ifNotEquals.call(o,null!=t?t.connectedfieldid:t,"",{name:"ifNotEquals",hash:{},fn:e.program(48,l,0,i,s),inverse:e.noop,data:l}))?r:"")+"> <td "+(null!=(r=a.unless.call(o,null!=s[2]?s[2].isDeveloperSpace:s[2],{name:"unless",hash:{},fn:e.program(26,l,0,i,s),inverse:e.noop,data:l}))?r:"")+'><div class="moduleLink pR crm-font-regular fontSmooth crmBaseColor">'+c(d(null!=t?t.displayLabel:t,t))+(null!=(r=a.if.call(o,null!=t?t.isEnc:t,{name:"if",hash:{},fn:e.program(50,l,0,i,s),inverse:e.noop,data:l}))?r:"")+(null!=(r=a.if.call(o,null!=s[2]?s[2].isPrivateFieldListing:s[2],{name:"if",hash:{},fn:e.program(52,l,0,i,s),inverse:e.noop,data:l}))?r:"")+"</span></div></td> "+(null!=(r=a.if.call(o,null!=s[2]?s[2].isFieldPermNeeded:s[2],{name:"if",hash:{},fn:e.program(54,l,0,i,s),inverse:e.program(72,l,0,i,s),data:l}))?r:"")+" </tr> "},44:function(e,t,a,n,l){return'editHov editHovHold"'},46:function(e,t,a,n,l){return"privateFieldRowValidation"},48:function(e,t,a,n,l){return' data-connectedfieldid="'+e.escapeExpression(e.lambda(null!=t?t.connectedfieldid:t,t))+'"'},50:function(e,t,a,n,l){return'<span style="font-size:12px"> ('+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.field.label.encrypted",{name:"getI18n",hash:{},data:l}))+")"},52:function(e,t,a,n,l,i,s){var r=null!=t?t:{},o=e.escapeExpression;return'<span class="viewThisFieldUsage crm-extra-small-font-size" onclick="CML.showFieldUsage(\''+o(a.encodeJS.call(r,null!=t?t.fieldid:t,{name:"encodeJS",hash:{},data:l}))+"','"+o(e.lambda(null!=s[1]?s[1].module:s[1],t))+"');\" onmouseenter=\"CrmModule.newshowtt('"+o(a.getI18n.call(r,"crm.field.private.usage.tooltip",{name:"getI18n",hash:{},data:l}))+'\')" onmouseleave="CrmModule.newhidett()"></span>'},54:function(e,t,a,n,l){var i,s=null!=t?t:{},r=e.lambda,o=e.escapeExpression;return' <td><label class="rbCheckHtml"> '+(null!=(i=a.if.call(s,null!=t?t.disableReadWrite:t,{name:"if",hash:{},fn:e.program(55,l,0),inverse:e.program(60,l,0),data:l}))?i:"")+' <span class="rbHtml dIB pR"><span class="rbTickHtml dIB pA"></span></span> <div class="cBoth"></div></label> </td> <td> <label class="rbCheckHtml" '+(null!=(i=a.if.call(s,null!=t?t.isDisabled:t,{name:"if",hash:{},fn:e.program(63,l,0),inverse:e.noop,data:l}))?i:"")+'> <input type="radio" data-zcqa="MPL_'+o(r(null!=t?t.displayLabel:t,t))+'_readOnly" onChange="javascript:crmSetup.changePermission(this);" class="rw rbRealHtml hide" name="'+o(r(null!=t?t.fieldid:t,t))+'" value="readOnly" '+(null!=(i=a.ifNotEquals.call(s,null!=t?t.isFieldReadWrite:t,!0,{name:"ifNotEquals",hash:{},fn:e.program(65,l,0),inverse:e.noop,data:l}))?i:"")+(null!=(i=a.if.call(s,null!=t?t.isMandatory:t,{name:"if",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+" "+(null!=(i=a.if.call(s,null!=t?t.disableReadOnly:t,{name:"if",hash:{},fn:e.program(67,l,0),inverse:e.noop,data:l}))?i:"")+" "+(null!=(i=a.if.call(s,null!=t?t.isDisabled:t,{name:"if",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+(null!=(i=a.ifCond.call(s,null!=t?t.uiType:t,"=",8,{name:"ifCond",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+'> <span class="rbHtml dIB pR"><span class="rbTickHtml dIB pA"></span></span> <div class="cBoth"></div> </label> </td> <td> <label class="rbCheckHtml" '+(null!=(i=a.if.call(s,null!=t?t.isDisabled:t,{name:"if",hash:{},fn:e.program(63,l,0),inverse:e.noop,data:l}))?i:"")+'> <input type="radio" data-zcqa="MPL_'+o(r(null!=t?t.displayLabel:t,t))+'_dontShow" onChange="javascript:crmSetup.changePermission(this);"  class="rw rbRealHtml hide" name="'+o(r(null!=t?t.fieldid:t,t))+'" value="notVisible" '+(null!=(i=a.ifNotEquals.call(s,null!=t?t.isFieldReadOnly:t,!0,{name:"ifNotEquals",hash:{},fn:e.program(69,l,0),inverse:e.noop,data:l}))?i:"")+" "+(null!=(i=a.if.call(s,null!=t?t.isMandatory:t,{name:"if",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+" "+(null!=(i=a.ifCond.call(s,null!=t?t.uiType:t,"=",8,{name:"ifCond",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+" "+(null!=(i=a.if.call(s,null!=t?t.isDisabled:t,{name:"if",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+" "+(null!=(i=a.if.call(s,null!=t?t.disableHidden:t,{name:"if",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+'> <span class="rbHtml dIB pR"><span class="rbTickHtml dIB pA"></span></span> <div class="cBoth"></div> </label> </td> '},55:function(e,t,a,n,l){var i,s=e.lambda,r=e.escapeExpression;return' <input data-zcqa="MPL_'+r(s(null!=t?t.displayLabel:t,t))+'_readWrite" type="radio" onChange="javascript:crmSetup.changePermission(this);" class="rw rbRealHtml hide" name="'+r(s(null!=t?t.fieldid:t,t))+'" value="readWrite" '+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.isFieldReadWrite:t,{name:"if",hash:{},fn:e.program(56,l,0),inverse:e.program(58,l,0),data:l}))?i:"")+" disabled> "},56:function(e,t,a,n,l){return'checked=""'},58:function(e,t,a,n,l){return'checked="checked"'},60:function(e,t,a,n,l){var i,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <input data-zcqa="MPL_'+r(s(null!=t?t.displayLabel:t,t))+'_readWrite" type="radio" onChange="javascript:crmSetup.changePermission(this);" class="rw rbRealHtml hide" name="'+r(s(null!=t?t.fieldid:t,t))+'" value="readWrite" '+(null!=(i=a.if.call(o,null!=t?t.isFieldReadWrite:t,{name:"if",hash:{},fn:e.program(56,l,0),inverse:e.program(58,l,0),data:l}))?i:"")+" "+(null!=(i=a.ifAnyMatch.call(o,null!=t?t.sysrefname:t,"=","Score",null!=t?t.sysrefname:t,"=","Positive_Score",null!=t?t.sysrefname:t,"=","Negative_Score",null!=t?t.sysrefname:t,"=","Touch_Point_Score",null!=t?t.sysrefname:t,"=","Positive_Touch_Point_Score",null!=t?t.sysrefname:t,"=","Negative_Touch_Point_Score",{name:"ifAnyMatch",hash:{},fn:e.program(61,l,0),inverse:e.noop,data:l}))?i:"")+"> "},61:function(e,t,a,n,l){return"disabled"},63:function(e,t,a,n,l){return'mbToolTip="'+e.escapeExpression(e.lambda(null!=t?t.msg:t,t))+'"'},65:function(e,t,a,n,l){var i;return null!=(i=a.if.call(null!=t?t:{},null!=t?t.isFieldReadOnly:t,{name:"if",hash:{},fn:e.program(58,l,0),inverse:e.program(56,l,0),data:l}))?i:""},67:function(e,t,a,n,l){return" disabled "},69:function(e,t,a,n,l){var i;return null!=(i=a.ifNotEquals.call(null!=t?t:{},null!=t?t.isFieldReadWrite:t,!0,{name:"ifNotEquals",hash:{},fn:e.program(70,l,0),inverse:e.noop,data:l}))?i:""},70:function(e,t,a,n,l){var i;return null!=(i=a.if.call(null!=t?t:{},null!=t?t.isFieldVisible:t,{name:"if",hash:{},fn:e.program(56,l,0),inverse:e.program(58,l,0),data:l}))?i:""},72:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.ifCond.call(null!=t?t:{},null!=s[2]?s[2].searchLayoutCheck:s[2],"=",!0,{name:"ifCond",hash:{},fn:e.program(73,l,0,i,s),inverse:e.program(82,l,0,i,s),data:l}))?r:"")+" "},73:function(e,t,a,n,l){var i;return' <td class="moduleName w100"><span class="crmBaseColor fontSmooth"></span></td> <td class="w100"> <label class="cbCheck"> '+(null!=(i=a.ifCondLogic.call(null!=t?t:{},null!=t?t.isMandatoryCheck:t,"=",!0,"&&",null!=t?t.isSearch:t,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(74,l,0),inverse:e.program(76,l,0),data:l}))?i:"")+' </label> </td> <td class="w200"></td> '},74:function(e,t,a,n,l){var i=e.lambda,s=e.escapeExpression;return' <input type=checkbox class="checkboxReal" id="checkBoxAjax_'+s(i(l&&l.index,t))+"\" name='Field_"+s(i(null!=t?t.fieldid:t,t))+'\' checked value="on" onClick = "crmSetup.limitFields( '+s(i(l&&l.index,t))+' )" ></input> <i class="customChckBox checkedBox formBuildIcons fL inactiveOp"></i> '},76:function(e,t,a,n,l){var i;return" "+(null!=(i=a.ifCondLogic.call(null!=t?t:{},null!=t?t.isSearch:t,"=",null,"||",null!=t?t.isSearch:t,"=",!1,{name:"ifCondLogic",hash:{},fn:e.program(77,l,0),inverse:e.program(79,l,0),data:l}))?i:"")+" "},77:function(e,t,a,n,l){var i=e.lambda,s=e.escapeExpression;return' <input type=checkbox class="checkboxReal" id="checkBoxAjax_'+s(i(l&&l.index,t))+"\" name='Field_"+s(i(null!=t?t.fieldid:t,t))+'\' value="on" onClick = "crmSetup.limitFields( '+s(i(l&&l.index,t))+' )" ></input> <i class="customChckBox checkedBox formBuildIcons fL "></i> '},79:function(e,t,a,n,l){var i;return" "+(null!=(i=a.ifCond.call(null!=t?t:{},null!=t?t.isSearch:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(80,l,0),inverse:e.noop,data:l}))?i:"")+" "},80:function(e,t,a,n,l){var i=e.lambda,s=e.escapeExpression;return' <input type=checkbox class="checkboxReal" id="checkBoxAjax_'+s(i(l&&l.index,t))+"\" name='Field_"+s(i(null!=t?t.fieldid:t,t))+'\' checked value="on" onClick = "crmSetup.limitFields( '+s(i(l&&l.index,t))+' )" ></input> <i class="customChckBox checkedBox formBuildIcons fL "></i> '},82:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.if.call(o,null!=t?t.isUnique:t,{name:"if",hash:{},fn:e.program(83,l,0,i,s),inverse:e.program(105,l,0,i,s),data:l}))?r:"")+" "+(null!=(r=a.unless.call(o,null!=s[2]?s[2].isDeveloperSpace:s[2],{name:"unless",hash:{},fn:e.program(122,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},83:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[2]?s[2].isDeveloperSpace:s[2],{name:"if",hash:{},fn:e.program(84,l,0,i,s),inverse:e.program(96,l,0,i,s),data:l}))?r:"")+" "},84:function(e,t,a,n,l){var i,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <td class="pR"> <span class="maxW250 crmEllipticText apiNameText"> <label title=\''+r(s(null!=t?t.sysrefname:t,t))+'\' href="javascript:;" class="ellipsistext fL crmBaseColor crm-base-font-size crm-font-regular fontSmooth" style="max-width: 200px;">'+(null!=(i=a.if.call(o,null!=t?t.isSysRefNameVisible:t,{name:"if",hash:{},fn:e.program(85,l,0),inverse:e.program(87,l,0),data:l}))?i:"")+"</label> "+(null!=(i=a.ifCondLogic.call(o,null!=t?t.genType:t,"=",2,"&&",null!=t?t.isSysRefNameVisible:t,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(89,l,0),inverse:e.noop,data:l}))?i:"")+' </span> <div class="editApiName" style="display:none"> <form onsubmit="return TabsAndFieldsApiNames.savesysrefname(this, \'field\')"> <input id="sysrefname" type="text" maxlength="50" class="apiNameInput p5 w150" value="'+r(s(null!=t?t.sysrefname:t,t))+'"> <a href="javascript:;" onclick="TabsAndFieldsApiNames.savesysrefname(this, \'field\')" class="saveLink crm-small-font-size">'+r(a.getI18n.call(o,"zb.common.Save",{name:"getI18n",hash:{},data:l}))+'</a> <a href="javascript:;" onclick="TabsAndFieldsApiNames.cancelSave(this)" class="smalledit lightreyText mL5">'+r(a.getI18n.call(o,"zb.common.Cancel",{name:"getI18n",hash:{},data:l}))+'</a> </form> <div class="infoAlertMB dIB"><span>'+r(a.getI18n.call(o,"crm.api.alert.message",{name:"getI18n",hash:{},data:l}))+'</span></div> <div class="errMsg errorMsgDesc dIB" style="display:none"><span></span></div> </div> </td> <td><span class="crmBaseColor fontSmooth">'+r(s(null!=t?t.fieldType:t,t))+" ("+r(a.getI18n.call(o,"crm.field.label.unique",{name:"getI18n",hash:{},data:l}))+')</span></td> <td><div class="aligncenter"><img src="'+r(a.getCrmImageUrl.call(o,"spacer.gif",{name:"getCrmImageUrl",hash:{},data:l}))+'" '+(null!=(i=a.ifEquals.call(o,null!=t?t.genType:t,"1",{name:"ifEquals",hash:{},fn:e.program(92,l,0),inverse:e.program(94,l,0),data:l}))?i:"")+' width="9" height="9"></div></td> '},85:function(e,t,a,n,l){return e.escapeExpression(e.lambda(null!=t?t.sysrefname:t,t))},87:function(e,t,a,n,l){return"--"},89:function(e,t,a,n,l){var i;return" "+(null!=(i=a.unless.call(null!=t?t:{},null!=t?t.isSysRefNameNotEditable:t,{name:"unless",hash:{},fn:e.program(90,l,0),inverse:e.noop,data:l}))?i:"")+" "},90:function(e,t,a,n,l){return' <a class="dIB" onclick=TabsAndFieldsApiNames.editSysRefName(this) href="javascript:;" style="max-width:300px"><span class="fL mL5">Edit</span></a> '},92:function(e,t,a,n,l){return' class="no" '},94:function(e,t,a,n,l){return' class="yes" '},96:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[2]?s[2].isPrivateFieldListing:s[2],{name:"if",hash:{},fn:e.program(97,l,0,i,s),inverse:e.program(103,l,0,i,s),data:l}))?r:"")+" "},97:function(e,t,a,n,l){var i;return' <td class="moduleName w100"><span class="crmBaseColor fontSmooth">'+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.privateType:t,1,{name:"ifEquals",hash:{},fn:e.program(98,l,0),inverse:e.program(100,l,0),data:l}))?i:"")+"</span></td> "},98:function(e,t,a,n,l){return e.escapeExpression(a.getI18n.call(null!=t?t:{},"Low",{name:"getI18n",hash:{},data:l}))},100:function(e,t,a,n,l){var i;return null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.privateType:t,2,{name:"ifEquals",hash:{},fn:e.program(101,l,0),inverse:e.noop,data:l}))?i:""},101:function(e,t,a,n,l){return e.escapeExpression(a.getI18n.call(null!=t?t:{},"High",{name:"getI18n",hash:{},data:l}))},103:function(e,t,a,n,l){return' <td class="moduleName w100"><span class="crmBaseColor fontSmooth">'+e.escapeExpression(e.lambda(null!=t?t.fieldType:t,t))+"</span></td> "},105:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[2]?s[2].isDeveloperSpace:s[2],{name:"if",hash:{},fn:e.program(106,l,0,i,s),inverse:e.program(115,l,0,i,s),data:l}))?r:"")+" "},106:function(e,t,a,n,l){var i,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <td class="pR"> <span class="dIB maxW250 crmEllipticText apiNameText"> <label title=\''+r(s(null!=t?t.sysrefname:t,t))+'\' href="javascript:;" class="ellipsistext fL crmBaseColor crm-base-font-size crm-font-regular fontSmooth" style="max-width: 200px;">'+(null!=(i=a.if.call(o,null!=t?t.isSysRefNameVisible:t,{name:"if",hash:{},fn:e.program(85,l,0),inverse:e.program(87,l,0),data:l}))?i:"")+"</label> "+(null!=(i=a.ifCondLogic.call(o,null!=t?t.genType:t,"=",2,"&&",null!=t?t.isSysRefNameVisible:t,"=",!0,{name:"ifCondLogic",hash:{},fn:e.program(89,l,0),inverse:e.noop,data:l}))?i:"")+' </span> <div class="editApiName" style="display:none"> <form onsubmit="return '+(null!=(i=a.ifEquals.call(o,null!=t?t.uiType:t,500,{name:"ifEquals",hash:{},fn:e.program(107,l,0),inverse:e.program(109,l,0),data:l}))?i:"")+'"  > <input id="sysrefname" type="text" maxlength="50" class="apiNameInput p5 w150" value="'+r(s(null!=t?t.sysrefname:t,t))+'"> <a href="javascript:;" '+(null!=(i=a.ifEquals.call(o,null!=t?t.uiType:t,500,{name:"ifEquals",hash:{},fn:e.program(111,l,0),inverse:e.program(113,l,0),data:l}))?i:"")+' class="saveLink crm-small-font-size">'+r(a.getI18n.call(o,"zb.common.Save",{name:"getI18n",hash:{},data:l}))+'</a> <a href="javascript:;" onclick="TabsAndFieldsApiNames.cancelSave(this)" class="smalledit lightreyText mL5">'+r(a.getI18n.call(o,"zb.common.Cancel",{name:"getI18n",hash:{},data:l}))+'</a> </form> <div class="infoAlertMB dIB"><span>'+r(a.getI18n.call(o,"crm.api.alert.message",{name:"getI18n",hash:{},data:l}))+'</span></div> <div class="errMsg errorMsgDesc dIB" style="display:none"><span></span></div> </div> </td> <td><span class="crmBaseColor fontSmooth">'+r(s(null!=t?t.fieldType:t,t))+'</span></td> <td><div class="aligncenter"><img src="'+r(a.getCrmImageUrl.call(o,"spacer.gif",{name:"getCrmImageUrl",hash:{},data:l}))+'" '+(null!=(i=a.ifEquals.call(o,null!=t?t.genType:t,"1",{name:"ifEquals",hash:{},fn:e.program(92,l,0),inverse:e.program(94,l,0),data:l}))?i:"")+' width="9" height="9"></div></td> '},107:function(e,t,a,n,l){return" TabsAndFieldsApiNames.savesysrefname(this, 'field',undefined,true) "},109:function(e,t,a,n,l){return" TabsAndFieldsApiNames.savesysrefname(this, 'field') "},111:function(e,t,a,n,l){return" onclick=\" TabsAndFieldsApiNames.savesysrefname(this, 'field',undefined,true)\" "},113:function(e,t,a,n,l){return" onclick =\"TabsAndFieldsApiNames.savesysrefname(this, 'field')\" "},115:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[2]?s[2].isPrivateFieldListing:s[2],{name:"if",hash:{},fn:e.program(116,l,0,i,s),inverse:e.program(103,l,0,i,s),data:l}))?r:"")+" "},116:function(e,t,a,n,l){var i;return' <td class="moduleName w100"><span class="crmBaseColor fontSmooth">'+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.privateType:t,1,{name:"ifEquals",hash:{},fn:e.program(117,l,0),inverse:e.program(119,l,0),data:l}))?i:"")+"</span></td> "},117:function(e,t,a,n,l){return e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.mb.field.private.personal1",{name:"getI18n",hash:{},data:l}))},119:function(e,t,a,n,l){var i;return null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.privateType:t,2,{name:"ifEquals",hash:{},fn:e.program(120,l,0),inverse:e.noop,data:l}))?i:""},120:function(e,t,a,n,l){return e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.mb.field.private.sensitive1",{name:"getI18n",hash:{},data:l}))},122:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.if.call(o,null!=s[2]?s[2].isPrivateFieldListing:s[2],{name:"if",hash:{},fn:e.program(123,l,0,i,s),inverse:e.program(125,l,0,i,s),data:l}))?r:"")+" "+(null!=(r=a.if_gt.call(o,null!=(r=null!=s[2]?s[2].layout_jsonarrayObj:s[2])?r.layoutCnt:r,1,{name:"if_gt",hash:{},fn:e.program(127,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},123:function(e,t,a,n,l){return" "},125:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <td class="w100"><div class=\'alignLeft\'><img src="'+e.escapeExpression(a.getCrmImageUrl.call(s,"spacer.gif",{name:"getCrmImageUrl",hash:{},data:l}))+'" '+(null!=(i=a.ifEquals.call(s,null!=t?t.genType:t,"1",{name:"ifEquals",hash:{},fn:e.program(92,l,0),inverse:e.program(94,l,0),data:l}))?i:"")+' width="9" height="9"></div></td> '},127:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=s[2]?s[2].isMPLAvailable:s[2],{name:"if",hash:{},fn:e.program(128,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},128:function(e,t,a,n,l){var i;return' <td class="w200">'+(null!=(i=e.invokePartial(n.layoutDetailsForField,null!=t?t.layoutDetails:t,{name:"layoutDetailsForField",data:l,helpers:a,partials:n,decorators:e.decorators}))?i:"")+"</td> "},130:function(e,t,a,n,l){var i=e.lambda,s=e.escapeExpression;return' <input type = "hidden" id = "counter" name = "counter" value = "'+s(i(null!=t?t.fieldCount:t,t))+'" ></input> <input type = "hidden" id = "moduleId" name = "moduleId" value = "'+s(i(null!=t?t.moduleId:t,t))+'" ></input> <input type = "hidden" id = "module" name = "module" value = "'+s(i(null!=t?t.module:t,t))+'" ></input> <div class="mT30 aligncenter" id="savLayout"> <input type="button" data-zcqa="btn_MPL_saveSearchLayout" class="newSaveBtn crm-font-regular inActiveSec" id="edit2" name="edit2" value="'+s(a.getI18n.call(null!=t?t:{},"Save",{name:"getI18n",hash:{},data:l}))+'" class="newgraybtn" onclick = "crmSetup.saveFields();CrmModule.goTop(true);"> </div> </table> </form> '},132:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <div class="mT30" id="fldPerm"><input type="submit" data-zcqa="btn_MPL_saveFieldPermPage" id="fieldPermSaveBtn" class="newSaveBtn inActiveSec mL30" value="'+s(a.getI18n.call(i,"Save",{name:"getI18n",hash:{},data:l}))+'"><input type="button" data-zcqa="btn_MPL_cancelFieldPermPage" value="'+s(a.getI18n.call(i,"Cancel",{name:"getI18n",hash:{},data:l}))+'" onClick="crmSetup.changeLayoutForFieldList(\''+s(e.lambda(null!=t?t.module:t,t))+"','-1');\" class=\"newCancelBtn\" ></input></div> </form> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{},d=e.escapeExpression;return" "+(null!=(r=a.unless.call(o,null!=t?t.searchLayoutCheck:t,{name:"unless",hash:{},fn:e.program(1,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' <div class="modSub cBoth '+(null!=(r=a.if.call(o,null!=t?t.isDeveloperSpace:t,{name:"if",hash:{},fn:e.program(4,l,0,i,s),inverse:e.noop,data:l}))?r:"")+"\" id='"+d(e.lambda(null!=t?t.module:t,t))+'_fieldsList\' onLoad="crmSetup.changeView();"> '+(null!=(r=a.if.call(o,null!=t?t.isFieldPermNeeded:t,{name:"if",hash:{},fn:e.program(6,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.unless.call(o,null!=t?t.searchLayoutCheck:t,{name:"unless",hash:{},fn:e.program(8,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.ifCond.call(o,null!=t?t.searchLayoutCheck:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(12,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.isFieldPermNeeded:t,{name:"if",hash:{},fn:e.program(14,l,0,i,s),inverse:e.program(16,l,0,i,s),data:l}))?r:"")+" "+(null!=(r=a.each.call(o,null!=t?t.fieldsInfo:t,{name:"each",hash:{},fn:e.program(21,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </div> "+(null!=(r=a.ifCond.call(o,null!=t?t.searchLayoutCheck:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(130,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.if.call(o,null!=t?t.isFieldPermNeeded:t,{name:"if",hash:{},fn:e.program(132,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' <div id="norecord" style="display:none"><span class="crm-font-regular nooneisselected" style="color:#c0c6cc;margin-top: 25px;font-size:var(--crm-medium-font-size);text-align:center; display:block;">'+d(a.getI18n.call(o,"crm.adword.searchtextnotbringresult",{name:"getI18n",hash:{},data:l}))+"</span></div> </div> "},usePartial:!0,useData:!0,useDepths:!0}),t.fieldsListHeading=e({1:function(e,t,a,n,l){return"seltab"},3:function(e,t,a,n,l){var i,s=null!=t?t:{},r=e.escapeExpression;return'<li id="fieldPerm" data-zcqa="MPL_fieldPermPage" class="dIB fL '+(null!=(i=a.if.call(s,null!=t?t.isFieldPermNeeded:t,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+'"><a href="javascript:;" onclick="crmSetup.getFieldPermission(\''+r(e.lambda(null!=t?t.module:t,t))+"','null');\">"+r(a.getI18n.call(s,"crm.lable.field.permission",{name:"getI18n",hash:{},data:l}))+"</a></li> "},5:function(e,t,a,n,l){var i,s=null!=t?t:{},r=e.escapeExpression;return'<li id="privateFields" data-zcqa="MPL_fieldPrivacyPage" class="dIB fL '+(null!=(i=a.if.call(s,null!=t?t.isPrivateFieldListing:t,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+"\"><link-to lt-prop-route='crm.settings.section.modules.module.field-privacy' lt-prop-dp='[\""+r(e.lambda(null!=t?t.module:t,t))+"\"]'>"+r(a.getI18n.call(s,"crm.mb.field.privacy",{name:"getI18n",hash:{},data:l}))+"</link-to></li> "},7:function(e,t,a,n,l){return" "+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.field.permission.heading",{name:"getI18n",hash:{},data:l}))+" "},9:function(e,t,a,n,l){var i;return" "+(null!=(i=a.if_gt.call(null!=t?t:{},null!=(i=null!=t?t.layout_jsonarrayObj:t)?i.layoutCnt:i,1,{name:"if_gt",hash:{},fn:e.program(10,l,0),inverse:e.program(13,l,0),data:l}))?i:"")},10:function(e,t,a,n,l){var i;return null!=(i=a.if.call(null!=t?t:{},null!=t?t.isMPLAvailable:t,{name:"if",hash:{},fn:e.program(11,l,0),inverse:e.program(13,l,0),data:l}))?i:""},11:function(e,t,a,n,l){return e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.field.list.heading.multiplelayout",{name:"getI18n",hash:{},data:l}))},13:function(e,t,a,n,l){return e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.field.list.heading.singlelayout",{name:"getI18n",hash:{},data:l}))},15:function(e,t,a,n,l){var i,s=null!=t?t:{},r=e.escapeExpression,o=e.lambda;return' <td class="vaT"> <div class="crm-font-bold crm-base-font-size fL mR15 mT5 hide">'+r(a.getI18n.call(s,"Profiles",{name:"getI18n",hash:{},data:l}))+':</div> <div class="newSelect fL"> <select id="profileDetails" data-zcqa="MPL_fldPermPage_profileDropdown" name="profileId" data-module ="'+r(o(null!=t?t.module:t,t))+'"  onChange="crmSetup.getFieldPermission(\''+r(o(null!=t?t.module:t,t))+"',this.value)\"> "+(null!=(i=a.each.call(s,null!=t?t.profileDetails:t,{name:"each",hash:{},fn:e.program(16,l,0),inverse:e.noop,data:l}))?i:"")+' </select> </div> <div class="pR fL mL0 moduleinputPlaceholder" style="margin-top:-3px;"><span class="setupsearchicon ico-search svgIcons" style="left:5px;"></span> <input type="text" id="fieldSearchBox" class="setupsearch" style="font-size: var(--crm-extra-medium-font-size); padding:8px 10px 8px 30px; width:300px;" placeholder="'+r(a.getI18n.call(s,"webform.field.search",{name:"getI18n",hash:{},data:l}))+"\" onkeyup='crmSetup.showFieldAndDataTypeSuggest(this)'></div> </td> "},16:function(e,t,a,n,l){var i,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <option data-zcqa="MPL_fldPermPage_'+r(s(null!=t?t.profileName:t,t))+'" '+(null!=(i=a.ifEquals.call(o,null!=t?t.isDefaultProfile:t,!0,{name:"ifEquals",hash:{},fn:e.program(17,l,0),inverse:e.noop,data:l}))?i:"")+' value="'+r(s(null!=t?t.profileId:t,t))+'">'+(null!=(i=a.if_eq.call(o,null!=t?t.category:t,!0,{name:"if_eq",hash:{},fn:e.program(19,l,0),inverse:e.program(21,l,0),data:l}))?i:"")+"</option> "},17:function(e,t,a,n,l){return" selected=selected "},19:function(e,t,a,n,l){return" "+e.escapeExpression(e.lambda(null!=t?t.profileName:t,t))+" "},21:function(e,t,a,n,l){return" "+e.escapeExpression(a.getI18n.call(null!=t?t:{},null!=t?t.profileName:t,{name:"getI18n",hash:{},data:l}))+" "},23:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return' <td class="vaT"> '+(null!=(r=a.ifEquals.call(o,null!=t?t.showMultipageLayout:t,"true",{name:"ifEquals",hash:{},fn:e.program(24,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' <div class="pR fL mL0 moduleinputPlaceholder" style="margin-top:-3px;"><span class="setupsearchicon ico-search svgIcons" style="left:5px;"></span> <input type="text" class="setupsearch" style="font-size: var(--crm-extra-medium-font-size); padding:8px 10px 8px 30px; width:300px;" '+(null!=(r=a.if.call(o,null!=t?t.isPrivateFieldListing:t,{name:"if",hash:{},fn:e.program(32,l,0,i,s),inverse:e.program(34,l,0,i,s),data:l}))?r:"")+" onkeyup='crmSetup.showFieldAndDataTypeSuggest(this)'></div> </td> "},24:function(e,t,a,n,l,i,s){var r,o=e.escapeExpression,d=null!=t?t:{};return' <div class="newSelect fL"> <select id="layoutDetails" data-module ="'+o(e.lambda(null!=t?t.module:t,t))+'" '+(null!=(r=a.ifCond.call(d,null!=t?t.isPrivateFieldListing:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(25,l,0,i,s),inverse:e.program(27,l,0,i,s),data:l}))?r:"")+'> <option value="-1">'+o(a.getI18n.call(d,"crm.label.all.layouts",{name:"getI18n",hash:{},data:l}))+"</option> "+(null!=(r=a.each.call(d,null!=(r=null!=t?t.layout_jsonarrayObj:t)?r.layout_jsonarrayObj:r,{name:"each",hash:{},fn:e.program(29,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </select> </div> "},25:function(e,t,a,n,l){return" onChange=\"crmSetup.changeLayoutForPrivateFieldList('"+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+"',this.value)\""},27:function(e,t,a,n,l){return" onChange=\"crmSetup.changeLayoutForFieldList('"+e.escapeExpression(e.lambda(null!=t?t.module:t,t))+"',this.value)\""},29:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.STATUS:t,"true",{name:"ifEquals",hash:{},fn:e.program(30,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},30:function(e,t,a,n,l,i,s){var r,o=e.lambda,d=e.escapeExpression;return" <option "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=s[1]?s[1].layoutId:s[1],null!=t?t.LAYOUTID:t,{name:"ifEquals",hash:{},fn:e.program(17,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' value="'+d(o(null!=t?t.LAYOUTID:t,t))+'">'+d(o(null!=t?t.LAYOUTNAME:t,t))+"</option> "},32:function(e,t,a,n,l){return'placeholder="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.search.fields.or.datasensitivity1",{name:"getI18n",hash:{},data:l}))+'"'},34:function(e,t,a,n,l){return'placeholder="'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.search.fields.or.datatype",{name:"getI18n",hash:{},data:l}))+'"'},36:function(e,t,a,n,l){var i=e.escapeExpression;return' <button class="newgraybtn customBtn" id="markPrivateFieldsBtn" data-zcqa="btn_MPL_markPrivateFields" onclick="javascript:CML.showPrivateFields(\''+i(e.lambda(null!=t?t.module:t,t))+"');\">"+i(a.getI18n.call(null!=t?t:{},"crm.mb.field.private.set",{name:"getI18n",hash:{},data:l}))+"</button> "},38:function(e,t,a,n,l){return' <button type="button" data-zcqa="btn_MPL_openLayout" class="primaryflatbtn fR" id="openLayout" onClick="CrmPageLayout.openCreateOrEditfldPopup()">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.mpl.fieldsTab.createOrEditFld.button.label",{name:"getI18n",hash:{},data:l}))+"</button> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{},d=e.escapeExpression;return' <div class="mT10 mB20"> <ul class="m0 p0 nTTabClass oH secondaryTabNewView dIB"> <li id="fieldListing" data-zcqa="MPL_fieldListPage" class="dIB fL '+(null!=(r=a.if.call(o,null!=t?t.isFieldListing:t,{name:"if",hash:{},fn:e.program(1,l,0,i,s),inverse:e.noop,data:l}))?r:"")+'"><a href="javascript:;" onclick="crmSetup.changeLayoutForFieldList(\''+d(e.lambda(null!=t?t.module:t,t))+"','-1');\">"+d(a.getI18n.call(o,"crm.label.field.listing",{name:"getI18n",hash:{},data:l}))+"</a></li>"+(null!=(r=a.ifCond.call(o,null!=t?t.hasFieldPermissionAccess:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(3,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.ifCond.call(o,null!=t?t.isPrivateFieldsAvailable:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(5,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' </ul> </div> <div class="cBoth"></div> <div class="mT20 crm-font-regular crm-small-font-size crmBaseColor hide">'+(null!=(r=a.if.call(o,null!=t?t.isFieldPermNeeded:t,{name:"if",hash:{},fn:e.program(7,l,0,i,s),inverse:e.program(9,l,0,i,s),data:l}))?r:"")+'</div> <table width="100%" cellpadding="0" cellspacing="0" border="0" class="mT8"> <tbody> <tr> '+(null!=(r=a.ifEquals.call(o,null!=t?t.isFieldPermNeeded:t,!0,{name:"ifEquals",hash:{},fn:e.program(15,l,0,i,s),inverse:e.program(23,l,0,i,s),data:l}))?r:"")+' <td class="alignRight vaM"> '+(null!=(r=a.ifCond.call(o,null!=t?t.isPrivateFieldListing:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(36,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.unless.call(o,null!=t?t.hideCreateOrEditFldButton:t,{name:"unless",hash:{},fn:e.program(38,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </td> </tr> </tbody> </table> "},useData:!0,useDepths:!0}),t.layoutDetailsForField=e({1:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.ifAllMatch.call(o,l&&l.index,"=",2,null!=s[1]?s[1].layoutsCnt:s[1],"=",3,{name:"ifAllMatch",hash:{},fn:e.program(2,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.lessThan.call(o,l&&l.index,2,{name:"lessThan",hash:{},fn:e.program(7,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.ifAllMatch.call(o,l&&l.index,">=",2,null!=s[1]?s[1].layoutsCnt:s[1],">",3,{name:"ifAllMatch",hash:{},fn:e.program(16,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},2:function(e,t,a,n,l){var i,s=null!=t?t:{};return' <span class="crmNotFoundColor">'+e.escapeExpression(a.getI18n.call(s,"crm.label.lowercase.and",{name:"getI18n",hash:{},data:l}))+"&nbsp;</span> "+(null!=(i=a.ifEquals.call(s,null!=t?t.status:t,-1,{name:"ifEquals",hash:{},fn:e.program(3,l,0),inverse:e.program(5,l,0),data:l}))?i:"")+" </span> "},3:function(e,t,a,n,l){return" "+e.escapeExpression(e.lambda(null!=t?t.layoutName:t,t))+" "},5:function(e,t,a,n,l){var i=e.escapeExpression,s=e.lambda;return" <link-to data-zcqa=\"ShowBuilder\" lt-prop-route='crm.settings.section.modules.module.layouts.view-layout' lt-prop-dp='[\""+i(a.getCurrentModule.call(null!=t?t:{},{name:"getCurrentModule",hash:{},data:l}))+'","'+i(s(null!=t?t.layoutId:t,t))+'"]\' lt-prop-class="link" lt-prop->'+i(s(null!=t?t.layoutName:t,t))+"</link-to> "},7:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if_gt.call(null!=t?t:{},l&&l.index,0,{name:"if_gt",hash:{},fn:e.program(8,l,0,i,s),inverse:e.program(14,l,0,i,s),data:l}))?r:"")+" "},8:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=s[1]?s[1].layoutsCnt:s[1],2,{name:"ifEquals",hash:{},fn:e.program(9,l,0,i,s),inverse:e.program(12,l,0,i,s),data:l}))?r:"")+" "},9:function(e,t,a,n,l){var i,s=null!=t?t:{};return" "+e.escapeExpression(a.getI18n.call(s,"crm.label.lowercase.and",{name:"getI18n",hash:{},data:l}))+" "+(null!=(i=a.ifEquals.call(s,null!=t?t.status:t,-1,{name:"ifEquals",hash:{},fn:e.program(3,l,0),inverse:e.program(10,l,0),data:l}))?i:"")+" "},10:function(e,t,a,n,l){var i=e.escapeExpression,s=e.lambda;return"<link-to data-zcqa=\"ShowBuilder\" lt-prop-route='crm.settings.section.modules.module.layouts.view-layout' lt-prop-dp='[\""+i(a.getCurrentModule.call(null!=t?t:{},{name:"getCurrentModule",hash:{},data:l}))+'","'+i(s(null!=t?t.layoutId:t,t))+'"]\' lt-prop-class="link" lt-prop->'+i(s(null!=t?t.layoutName:t,t))+"</link-to> "},12:function(e,t,a,n,l){var i;return" ,&nbsp; "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.status:t,-1,{name:"ifEquals",hash:{},fn:e.program(3,l,0),inverse:e.program(10,l,0),data:l}))?i:"")+" "},14:function(e,t,a,n,l){var i;return" "+(null!=(i=a.ifEquals.call(null!=t?t:{},null!=t?t.status:t,-1,{name:"ifEquals",hash:{},fn:e.program(3,l,0),inverse:e.program(10,l,0),data:l}))?i:"")+" "},16:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.ifEquals.call(o,l&&l.index,2,{name:"ifEquals",hash:{},fn:e.program(17,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.ifEquals.call(o,null!=t?t.status:t,-1,{name:"ifEquals",hash:{},fn:e.program(19,l,0,i,s),inverse:e.program(21,l,0,i,s),data:l}))?r:"")+" "+(null!=(r=a.if.call(o,l&&l.last,{name:"if",hash:{},fn:e.program(23,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},17:function(e,t,a,n,l,i,s){var r=null!=t?t:{},o=e.escapeExpression;return' <span class="crmNotFoundColor">'+o(a.getI18n.call(r,"crm.label.lowercase.and",{name:"getI18n",hash:{},data:l}))+'&nbsp;</span> <a href="#" class="link" id="fromFieldList" onmouseenter="CrmPageLayout.showMoreLayouts(this)" onmouseleave="CrmPageLayout.hideMoreLayouts(this)">'+o(a.arithResult.call(r,null!=s[1]?s[1].layoutsCnt:s[1],"-",2,{name:"arithResult",hash:{},data:l}))+" "+o(a.getI18n.call(r,"crm.label.others.lower.case",{name:"getI18n",hash:{},data:l}))+'</a> <div class="moreusers hide"> '},19:function(e,t,a,n,l){return" <span>"+e.escapeExpression(e.lambda(null!=t?t.layoutName:t,t))+"</span><br> "},21:function(e,t,a,n,l){var i=e.escapeExpression,s=e.lambda;return"<span><link-to data-zcqa=\"ShowBuilder\" lt-prop-route='crm.settings.section.modules.module.layouts.view-layout' lt-prop-dp='[\""+i(a.getCurrentModule.call(null!=t?t:{},{name:"getCurrentModule",hash:{},data:l}))+'","'+i(s(null!=t?t.layoutId:t,t))+'"]\' lt-prop-class="fldHntLnk" lt-prop->'+i(s(null!=t?t.layoutName:t,t))+"</link-to></span><br> "},23:function(e,t,a,n,l){return' <div class="pR"> <span class="pA uaInnerArrow" style="left: 38%;float: none;bottom: -6px;"></span> </div> </div> '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l,i,s){var r;return'<span class="moduleLink fontSmooth crmBaseColor"> '+(null!=(r=a.each.call(null!=t?t:{},null!=t?t.layouts:t,{name:"each",hash:{},fn:e.program(1,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </span>"},useData:!0,useDepths:!0}),t.layoutListSelect=e({1:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.if.call(null!=t?t:{},null!=(r=null!=t?t.layout_jsonarrayObj:t)?r.showLayoutOption:r,{name:"if",hash:{},fn:e.program(2,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},2:function(e,t,a,n,l,i,s){var r,o=e.escapeExpression,d=null!=t?t:{};return' <select id="layoutDetails" class="layChange" data-module ="'+o(e.lambda(null!=t?t.module:t,t))+'"  onChange="TabsAndFieldsApiNames.changeLayoutForFieldListForDevSpace(\''+o(a.encodeJS.call(d,null!=t?t.module:t,{name:"encodeJS",hash:{},data:l}))+'\',this.value)"> <option value="-1">'+o(a.getI18n.call(d,"crm.label.all.layouts",{name:"getI18n",hash:{},data:l}))+"</option> "+(null!=(r=a.each.call(d,null!=(r=null!=t?t.layout_jsonarrayObj:t)?r.layout_jsonarrayObj:r,{name:"each",hash:{},fn:e.program(3,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </select> "},3:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=t?t.STATUS:t,"true",{name:"ifEquals",hash:{},fn:e.program(4,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},4:function(e,t,a,n,l,i,s){var r,o=e.lambda,d=e.escapeExpression;return" <option "+(null!=(r=a.ifEquals.call(null!=t?t:{},null!=s[1]?s[1].layoutId:s[1],null!=t?t.LAYOUTID:t,{name:"ifEquals",hash:{},fn:e.program(5,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' value="'+d(o(null!=t?t.LAYOUTID:t,t))+'">'+d(o(null!=t?t.LAYOUTNAME:t,t))+"</option> "},5:function(e,t,a,n,l){return" selected=selected "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l,i,s){var r;return(null!=(r=a.if.call(null!=t?t:{},null!=t?t.isMPLAvailable:t,{name:"if",hash:{},fn:e.program(1,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},useData:!0,useDepths:!0}),t.linkingmodulewarning=e({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return'<div id="linking-module-warning"> <div id="linking-module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.title.linkingmoduledependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.organizemodule.linking.msg",{name:"getI18n",hash:{},data:l}))+' </span> <span class="dB mT10">'+s(a.getI18n.call(i,"crm.title.linkingmodules",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ulcontent"></div> <span>'+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="OptionChooser.cancel(\'#linking-module-dependency\');sE(event);"> <input type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"></div> </div> <div id="module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="crm-heading-font-size mB0 pp-header">'+s(a.getI18n.call(i,"crm.title.linkingmoduledependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.organizemodule.module.msg",{name:"getI18n",hash:{},data:l}))+' </span> <span class="dB mT10">'+s(a.getI18n.call(i,"crm.title.modules",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ulcontent"></div> <span>'+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input type="button" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="OptionChooser.cancel(\'#module-dependency\');sE(event);"> <input type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"></div> </div> <div id="inventory-module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.title.inventorymoduledependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.organizemodule.inventory.msg",{name:"getI18n",hash:{},data:l}))+' </span> <span class="dB mT10">'+s(a.getI18n.call(i,"crm.title.inventorymodules",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ulcontent"></div> <span>'+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"></div> </div> <div id="inventory-cpq-module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.title.cpq.productmoduledependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.organizemodule.products.msg",a.getDisplayModuleName.call(i,"Products",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+' </span> <span class="dB mT10">'+s(a.getI18n.call(i,"crm.title.cpqmodules",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ulcontent"></div> <span>'+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> </div> </div> <div id="inventory-cpq-module-dependency-bundles" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.title.cpq.productmoduledependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.organizemodule.products.msg",a.getDisplayModuleName.call(i,"Bundles",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+' </span> <span class="dB mT10">'+s(a.getI18n.call(i,"crm.title.cpqmodules",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ulcontent"></div> <span>'+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> </div> </div> <div id="inventory-product-module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.title.inventorymoduledependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.organizemodule.inventory.product.msg",{name:"getI18n",hash:{},data:l}))+' </span> <span class="dB mT10">'+s(a.getI18n.call(i,"crm.title.inventorymodules",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ulcontent"></div> <span>'+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"></div> </div> <div id="inventory-cpq-product-module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.title.cpq.productmoduledependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.organizemodule.cpq.product.msg",a.getDisplayModuleName.call(i,"Products",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+' </span> <span class="dB mT10">'+s(a.getI18n.call(i,"crm.title.cpqmodules",{name:"getI18n",hash:{},data:l}))+'</span> <div id="ulcontent"></div> <span>'+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"></div> </div> <div data-zcqa="forecast-module-dependency" id="forecast-module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.forecast.title.organise.module",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.forecast.title.organise.module.message.new.msg",null!=t?t.module:t,a.getDisplayModuleName.call(i,"Forecasts",!0,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+"</span> <span>"+s(a.getI18n.call(i,"crm.template.listview.associated.warnComf1",{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input data-zcqa="forecast-module-dependencyNCancl" type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.forecast.no.cancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input data-zcqa="forecast-module-dependencyYPrcd" type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.yes.proceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"></div> </div> <div id="deal-module-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.forecast.title.organise.module",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"><span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.forecast.organise.module.enable.new",a.getDisplayModuleName.call(i,"Deals",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input data-zcqa="deal-module-dependencyNCancl" type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.forecast.no.cancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input data-zcqa="deal-module-dependencyYPrcd" type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.enable",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"></div> </div> \x3c!-- ABM Activities dependencies --\x3e \x3c!-- ABM - SalesIQ | Visits --\x3e <div id="visits-module-abm-salesiq-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.abm.module.dependency",{name:"getI18n",hash:{},data:l}))+'</h2> <div class="pp-content pB10"> <span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.abm.module.dependency.msg",a.getDisplayModuleName.call(i,"Visits",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+'</span> </div> <div class="pp-footer"> <input data-zcqa="visits-module-abm-salesiq-dependencyNCancl" type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input data-zcqa="visits-module-abm-salesiq-dependencyYPrcd" type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> </div> </div> \x3c!-- ABM Activities dependencies --\x3e <div id="activities-module-abm-activities-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.abm.organize.modules.warning.header",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"> <span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.abm.organize.modules.warning.content",a.getDisplayModuleName.call(i,a.getI18n.call(i,"Zoho",{name:"getI18n",hash:{},data:l}),!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+' </span> <div id="ulcontent"></div> </div> <div class="pp-footer"> <input data-zcqa="activities-module-abm-activities-dependencyNCancl" type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.forecast.no.cancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input data-zcqa="activities-module-abm-activities-dependencyYPrcd" type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.yes.proceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> </div> </div> \x3c!-- ABM Activities dependencies --\x3e <div id="campaigns-module-abm-dependency" class="newPopup ppTop w500 is-scroll showPpTop" onclick="sE(event);"> <h2 class="mB0 pp-header">'+s(a.getI18n.call(i,"crm.abm.module.dependency",{name:"getI18n",hash:{},data:l}))+' </h2> <div class="pp-content pB10"> <span class="crm-base-font-size crm-font-regular crmBaseColor">'+s(a.getI18n.call(i,"crm.abm.module.dependency.msg",a.getDisplayModuleName.call(i,"Campaigns",!1,{name:"getDisplayModuleName",hash:{},data:l}),{name:"getI18n",hash:{},data:l}))+' </span> </div> <div class="pp-footer"> <input data-zcqa="campaigns-module-abm-dependencyNCancl" type="button" id="nocancel" class="newgraybtn" value="'+s(a.getI18n.call(i,"crm.button.nocancel",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> <input data-zcqa="campaigns-module-abm-dependencyYPrcd" type="button" id="yesproceed" class="primarybtn" value="'+s(a.getI18n.call(i,"crm.button.yesproceed",{name:"getI18n",hash:{},data:l}))+'" onClick="sE(event);"> </div> </div> </div>'},useData:!0}),t.relatedList=e({1:function(e,t,a,n,l){var i;return" "+(null!=(i=a.unless.call(null!=t?t:{},null!=t?t.isDeveloperSpace:t,{name:"unless",hash:{},fn:e.program(2,l,0),inverse:e.noop,data:l}))?i:"")+" "},2:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <div class="pR"> <div class="helpLinkPosition layoutHelp"> <a id="context-helplink" onmouseover="CMB.newShowTooltip(\''+s(a.getI18n.call(i,"crm.label.context.help",{name:"getI18n",hash:{},data:l}))+'\')" onmouseout="CMB.newHideTooltip();" onClick="openHelp(\''+s(e.lambda(null!=t?t.helpLinkUrl:t,t))+'\')" href="javascript:;">'+s(a.getI18n.call(i,"crm.label.context.help",{name:"getI18n",hash:{},data:l}))+"</a> </div> </div> "},4:function(e,t,a,n,l){return" pL20 "},6:function(e,t,a,n,l){var i;return" "+(null!=(i=a.unless.call(null!=t?t:{},null!=t?t.isDeveloperSpace:t,{name:"unless",hash:{},fn:e.program(7,l,0),inverse:e.noop,data:l}))?i:"")+" "},7:function(e,t,a,n,l){var i;return" "+(null!=(i=a.setFieldsListHeading.call(null!=t?t:{},t,{name:"setFieldsListHeading",hash:{},fn:e.program(8,l,0),inverse:e.noop,data:l}))?i:"")+" "},8:function(e,t,a,n,l){return""},10:function(e,t,a,n,l){return" <div class='fieldPermissionDiv'> "},12:function(e,t,a,n,l){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.searchLayoutCheck:t,{name:"if",hash:{},fn:e.program(13,l,0),inverse:e.program(15,l,0),data:l}))?i:"")+" "},13:function(e,t,a,n,l){return" <div class='searchLayoutDiv'> "},15:function(e,t,a,n,l){return" <div class='fieldListDiv'> "},17:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <th class="w100">'+s(a.getI18n.call(i,"crm.custom.module.read.write",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100">'+s(a.getI18n.call(i,"crm.label.readonly",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100">'+s(a.getI18n.call(i,"crm.custom.module.dont.show",{name:"getI18n",hash:{},data:l}))+"</th> "},19:function(e,t,a,n,l){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.searchLayoutCheck:t,{name:"if",hash:{},fn:e.program(20,l,0),inverse:e.program(22,l,0),data:l}))?i:"")+" "},20:function(e,t,a,n,l){return' <th class="w100"></th> <th class="w100">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.show",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100"></th> '},22:function(e,t,a,n,l){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.isDeveloperSpace:t,{name:"if",hash:{},fn:e.program(23,l,0),inverse:e.program(25,l,0),data:l}))?i:"")+" "},23:function(e,t,a,n,l){var i=null!=t?t:{},s=e.escapeExpression;return' <th width="40%">'+s(a.getI18n.call(i,"crm.api.sysrefname",{name:"getI18n",hash:{},data:l}))+'</th> <th width="20%" class="aligncenter">'+s(a.getI18n.call(i,"crm.api.custom.related.list",{name:"getI18n",hash:{},data:l}))+"</th> "},25:function(e,t,a,n,l){var i,s=null!=t?t:{},r=e.escapeExpression;return' <th class="w100">'+r(a.getI18n.call(s,"crm.label.datatype",{name:"getI18n",hash:{},data:l}))+'</th> <th class="w100">'+r(a.getI18n.call(s,"crm.label.customfield",{name:"getI18n",hash:{},data:l}))+"</th> "+(null!=(i=a.if_gt.call(s,null!=(i=null!=t?t.layout_jsonarrayObj:t)?i.layoutCnt:i,1,{name:"if_gt",hash:{},fn:e.program(26,l,0),inverse:e.noop,data:l}))?i:"")+" "},26:function(e,t,a,n,l){var i;return" "+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.isMPLAvailable:t,{name:"if",hash:{},fn:e.program(27,l,0),inverse:e.noop,data:l}))?i:"")+" "},27:function(e,t,a,n,l){return' <th class="w200">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.label.layouts",{name:"getI18n",hash:{},data:l}))+"</th> "},29:function(e,t,a,n,l){var i,s=e.lambda,r=e.escapeExpression,o=null!=t?t:{};return' <tr class="trout resLay fldForSearch editHov editHovHold"> <td><div class="moduleLink pR crm-font-regular crm-small-font-size fontSmooth crmBaseColor">'+r(s(null!=t?t.rellistlabel:t,t))+'</div></td> <td class="pR"> <span class="dIB maxW250 crmEllipticText apiNameText"> <label title=\''+r(s(null!=t?t.rellistsysrefname:t,t))+'\' href="javascript:;" class="ellipsistext fL crmBaseColor crm-base-font-size crm-font-regular fontSmooth" style="max-width: 300px;">'+r(s(null!=t?t.rellistsysrefname:t,t))+"</label> "+(null!=(i=a.if.call(o,null!=t?t.isVisible:t,{name:"if",hash:{},fn:e.program(30,l,0),inverse:e.noop,data:l}))?i:"")+' </span> <div class="editApiName" style="display:none"> <form onsubmit="return TabsAndFieldsApiNames.savesysrefname(this, \'rellist\', getElemById(\'modlist\').value)"> <input id="sysrefname" type="text" maxlength="50" class="apiNameInput p5 w150" value="'+r(s(null!=t?t.rellistsysrefname:t,t))+'"> <a href="javascript:;" onclick="TabsAndFieldsApiNames.savesysrefname(this, \'rellist\', getElemById(\'modlist\').value)" class="saveLink crm-small-font-size">'+r(a.getI18n.call(o,"zb.common.Save",{name:"getI18n",hash:{},data:l}))+'</a> <a href="javascript:;" onclick="TabsAndFieldsApiNames.cancelSave(this)" class="smalledit lightreyText mL5">'+r(a.getI18n.call(o,"zb.common.Cancel",{name:"getI18n",hash:{},data:l}))+'</a> </form> <div class="infoAlertMB dIB"><span>'+r(a.getI18n.call(o,"crm.api.alert.message",{name:"getI18n",hash:{},data:l}))+'</span></div> <div class="errMsg errorMsgDesc dIB" style="display:none"><span></span></div> </div> </td> <td><div align="center"><img src="images/spacer_a46cb99c5320a5dd310550ba5e17b417_.gif" '+(null!=(i=a.if.call(o,null!=t?t.isCustom:t,{name:"if",hash:{},fn:e.program(33,l,0),inverse:e.program(35,l,0),data:l}))?i:"")+' width="9" height="9"></div></td> </tr> '},30:function(e,t,a,n,l){var i;return" "+(null!=(i=a.unless.call(null!=t?t:{},null!=t?t.isReadOnly:t,{name:"unless",hash:{},fn:e.program(31,l,0),inverse:e.noop,data:l}))?i:"")+" "},31:function(e,t,a,n,l){return' <a onclick=TabsAndFieldsApiNames.editSysRefName(this) href="javascript:;" style="max-width:300px"><span class="fL mL5">Edit</span></a> '},33:function(e,t,a,n,l){return' class="yes" '},35:function(e,t,a,n,l){return' class="no" '},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var i,s=null!=t?t:{},r=e.escapeExpression;return" "+(null!=(i=a.unless.call(s,null!=t?t.searchLayoutCheck:t,{name:"unless",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+' <div class="modSub cBoth '+(null!=(i=a.if.call(s,null!=t?t.isDeveloperSpace:t,{name:"if",hash:{},fn:e.program(4,l,0),inverse:e.noop,data:l}))?i:"")+"\" id='"+r(e.lambda(null!=t?t.module:t,t))+'_fieldsList\' onLoad="crmSetup.changeView();"> '+(null!=(i=a.unless.call(s,null!=t?t.searchLayoutCheck:t,{name:"unless",hash:{},fn:e.program(6,l,0),inverse:e.noop,data:l}))?i:"")+" "+(null!=(i=a.if.call(s,null!=t?t.isFieldPermNeeded:t,{name:"if",hash:{},fn:e.program(10,l,0),inverse:e.program(12,l,0),data:l}))?i:"")+' <div class="relatedList" id= "sss"> <table width="100%" border="0" class="newListView brCollapse newListViewEdit hovNon sandboxDiffChanges" id="fieldPermissionsTable"> <tbody> <tr class="tableTitleHeaderRow trout resLay" style="cursor: pointer;" rel="rowgrp"> <th width="40%">'+r(a.getI18n.call(s,"crm.api.relatedlist.label",{name:"getI18n",hash:{},data:l}))+"</th> "+(null!=(i=a.if.call(s,null!=t?t.isFieldPermNeeded:t,{name:"if",hash:{},fn:e.program(17,l,0),inverse:e.program(19,l,0),data:l}))?i:"")+" </tr> "+(null!=(i=a.each.call(s,null!=t?t.RelatedList:t,{name:"each",hash:{},fn:e.program(29,l,0),inverse:e.noop,data:l}))?i:"")+' </tbody> </table> <div id="norecord" style="display:none"><span class="crm-font-regular nooneisselected" style="color:#c0c6cc;margin-top: 25px;font-size:var(--crm-medium-font-size);text-align:center; display:block;">'+r(a.getI18n.call(s,"crm.adword.searchtextnotbringresult",{name:"getI18n",hash:{},data:l}))+"</span></div> </div> </div> </div> "},useData:!0})}();var mergeField={mergeOffset:{start:void 0,end:void 0},selection:void 0,range:void 0,elemToBind:void 0,mergeFieldJSON:void 0,onFocus:!1,filterCallBack:void 0,clearMergeFieldObj:function(){mergeField.elemToBind=void 0,mergeField.filterCallBack=void 0,mergeField.elemId=void 0},showMergeValuesDIV:function(e){var t=$("#mergeValuesDIV"),a=t.find("#moduleOptions"),n=a[0].options[0],l=$(n).attr("value");if($("#mergeValuesDIV_copy").length<1){var i=document.createDocumentFragment();$(i).append(t.clone(!0,!0)),$(i.querySelector("#mergeValuesDIV")).attr("id","mergeValuesDIV_copy"),t.parent().append(i)}else{i=document.createDocumentFragment();$(i).append($("#mergeValuesDIV_copy").children().clone(!0,!0)),t.children().remove(),t.append(i)}a.val(l).css({width:"100%"}),$("#searchMergeValues").css({display:"none"}),t.find(".modulesFields").css("display","none");var s=$("[id='"+l+"_ModuleFields']");s.css("display",""),s.find("li").css("display",""),setTimeout((function(){$("#listMergeValues").css("display",""),t.css({display:"block"}),thirdPartyUtils.bindSelect2("#moduleOptions",{minimumResultsForSearch:1/0}),setTimeout((function(){var e=$("#moduleOptions");e.on("select2:opening",(function(){$("#moduleOptionsList").next(".oA").addClass("preventClick")})),e.on("select2:close",(function(){$("#moduleOptionsList").next(".oA").removeClass("preventClick")}))}),100),$L(t).find(".oA").scrollTop(0),mergeField.mergeValueListSelection(),mergeField.setMergeFieldDivPos(e)}),10)},hideMergeValuesDIV:function(){var e=$("#mergeValuesDIV");if(e.length>0){e.css("display","none"),$("#mergeValuesDIV .select2-container").css("display","none");var t=e.parents(".add_transition");t.length>0&&t.perfectScrollbar({wheelSpeed:1,wheelPropagation:!0,suppressScrollX:!1})}var a=$("#moduleOptions");a&&a.hasClass("select2-hidden-accessible")&&a.select2("close"),e.find(".selec").removeClass("selec")},changeMergevalues:function(e){$("#mergeValuesDIV").find(".modulesFields").css("display","none");var t=$(e).val(),a=$("[id='"+t+"_ModuleFields']");a.css("display",""),a.find("li").css("display",""),mergeField.mergeValueListSelection(),setTimeout((function(){mergeField.focusElem()}),1),$("#moduleOptionsList").next().perfectScrollbar("update")},setMergeValue:function(e){mergeField.focusElem();var t=mergeField.getSelectedFieldInfo(e),a=mergeField.elemToBind;if(mergeField.isInputElem(a)||mergeField.isRichTextElem(a)){if(a.length>0){var n=mergeField.getValueToInsertOnSelection(t);void 0===mergeField.searchValue||mergeField.searchValue.length;mergeField.searchValue=void 0;var l=a[0];if(a.data("datatype")&&"text"!=a.data("datatype")&&"textarea"!=a.data("datatype"))l.value=n,mergeField.setCursorPosition(l,mergeField.mergeOffset.start+n.length);else if(mergeField.isRichTextElem(a)){var i=a[0].querySelector("lyte-texteditor");i.clear(),i.insertHTML(n),a[0].component.executeMethod("validateMaxLengthAndSetVal",i)}else{var s=l.value;l.value=s.substring(0,mergeField.mergeOffset.start)+n+s.substring(mergeField.mergeOffset.end),mergeField.setCursorPosition(l,mergeField.mergeOffset.start+n.length)}}}else{var r=mergeField.getSpanElemToInsertOnSelection(t),o=mergeField.selection,d=mergeField.range,c=d.commonAncestorContainer;3!==c.nodeType&&(c=d.startContainer.childNodes[d.endOffset-1]),d.setStart(c,mergeField.mergeOffset.start),d.deleteContents(),d.insertNode(r),d.selectNode(r),d.setStartAfter(r),d.setEndAfter(r),o.removeAllRanges(),o.addRange(d),mergeField.saveSelection(),setTimeout((function(){mergeField.focusElem()}),300)}this.hideMergeValuesDIV(),mergeField.mergeFieldInsertCallback(a,t.field.data_type)},setCursorPosition:function(e,t){if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select()}else e.setSelectionRange&&(e.setSelectionRange(t,t),e.focus())},setEndOfContenteditable:function(e){var t,a;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(a=window.getSelection()).removeAllRanges(),a.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select()),$(e).focus()},getCaretCharacterOffsetWithin:function(e){var t=window.getSelection().getRangeAt(0),a=t.cloneRange();return a.selectNodeContents(e),a.setEnd(t.endContainer,t.endOffset),a.toString().length},doGetCaretPosition:function(e){var t=0;if(document.selection){e.focus();var a=document.selection.createRange();a.moveStart("character",-e.value.length),t=a.text.length}else(e.selectionStart||"0"===e.selectionStart)&&(t=e.selectionStart);return t},setMergeEntities:function(){var e=mergeField.elemToBind[0];if(mergeField.isInputElem(e)){var t=mergeField.doGetCaretPosition(e);mergeField.mergeOffset.start=t-1,mergeField.mergeOffset.end=t}else if(mergeField.isRichTextElem(e)){t=e.querySelector("lyte-texteditor").getCursor();mergeField.mergeOffset.start=t-1,mergeField.mergeOffset.end=t}else mergeField.mergeOffset.start=window.getSelection().getRangeAt(0).startOffset-1;mergeField.saveSelection()},saveSelection:function(){mergeField.selection=document.getSelection(),mergeField.range=mergeField.getRange(mergeField.selection)},focusElem:function(){if(mergeField.elemToBind.length>0&&!mergeField.onFocus){if(mergeField.elemToBind.focus(),void 0===mergeField.selection)return;var e=mergeField.selection;try{e.removeAllRanges()}catch(e){murphy.error(e)}e.addRange(mergeField.range)}},getRange:function(e){var t;try{t=e.getRangeAt?e.rangeCount>0&&e.getRangeAt(0)?e.getRangeAt(0):document.createRange():e.createRange()}catch(a){t=e.createRange()}return t},searchMergeValue:function(e,t){if(e){if($("#mergeValuesDIV").is(":visible")){mergeField.saveSelection(),mergeField.searchValue=t;for(var a=$("#mergeValuesDIV"),n=a.find(".modulesFields"),l="",i=n.length,s=0;s<i;s++)for(var r=n.eq(s),o=r.attr("modName"),d=r.find(".mergeOptions"),c=0,u=d.length,p=0;p<u;p++){var m=d.eq(p),h=m.text().trim().toLowerCase().indexOf(t.replace(" "," ").toLowerCase());if(-1!=h){var g=m.text().trim(),f=g.substring(0,h),v=h+t.length,y=g.substring(h,v),C=g.substring(v,g.length);m.empty(),m[0].innerHTML=$ESAPI.encoder().encodeForHTML(f)+"<span id='mergeHigh' class='setupHighL'>"+$ESAPI.encoder().encodeForHTML(y)+"</span>"+$ESAPI.encoder().encodeForHTML(C),0==c&&"Appointments"!==o&&(l+="<li class='mergeSections crm-small-font-size crmNotFoundColor ttUppercase mT15 pR20'>"+$ESAPI.encoder().encodeForHTML(o)+"</li>"),l+=m[0].outerHTML,c++}}a.find("#searchMergeValues").html(l).css("display",""),a.find("#listMergeValues").css("display","none"),$("#listMergeValues").css("display","none"),""==l?a.css("display","none"):(a.css("display","block"),mergeField.elemToBind&&mergeField.setMergeFieldDivPos(mergeField.elemToBind)),mergeField.mergeValueListSelection(),$L("#searchMergeValues").scrollTop(0)}}else this.hideMergeValuesDIV()},keyPressBind:function(e){var t,a,n,l,i,s,r,o=e.keyCode?e.keyCode:e.charCode?e.charCode:e.which,d=$L("#searchMergeValues"),c=$L("#listMergeValues");if(d.is(":visible")?(t=(a=d).find(".selec"),l=(n=a).scrollTop(),i=t.outerHeight(),s=t.next(".mergeSections").outerHeight(),r=t.prev(".mergeSections").outerHeight()):c.is(":visible")&&(t=(a=c.find("ul:visible")).find(".selec"),l=(n=c.find(".oA")).scrollTop(),i=t.outerHeight(),s=t.next(".mergeSections").outerHeight(),r=t.prev(".mergeSections").outerHeight()),t.length<1){var u=a.find(".mergeOptions");t=u.eq(0),u.removeClass("selec"),t.addClass("selec"),n.scrollTop(0)}else 40===o?0===t.next(".mergeOptions").length&&t.next(".mergeSections").length>0?(a.find(".mergeOptions").removeClass("selec"),t.next().next().addClass("selec"),n.scrollTop(l+(i+s))):0===t.next(".mergeOptions").length?t.addClass("selec"):(a.find(".mergeOptions").removeClass("selec"),t.next(".mergeOptions").addClass("selec"),n.scrollTop(l+i)):38===o?0===t.prev(".mergeOptions").length&&0===t.prev(".mergeSections").prev().length&&t.prev(".mergeSections").length>0?t.addClass("selec"):0===t.prev(".mergeOptions").length&&t.prev(".mergeSections").length>0?(a.find(".mergeOptions").removeClass("selec"),t.prev(".mergeSections").prev().addClass("selec"),n.scrollTop(l-(i+r))):0===t.prev(".mergeOptions").length?(a.find(".mergeOptions").removeClass("selec"),t.addClass("selec")):(a.find(".mergeOptions").removeClass("selec"),t.prev(".mergeOptions").addClass("selec"),n.scrollTop(l-i)):13===o&&renderingUtils.triggerEvent("click",t)},mergeValueListSelection:function(){var e=$("#mergeValuesDIV").find("ul:visible li.mergeOptions");if(e.filter(".selec").length<1){var t=e.eq(0);e.removeClass("selec"),t.addClass("selec")}},setMergeFieldDivPos:function(e){Lyte.injectResources(networkUtils.returnDependencyFiles(["lyte-caret.js"],ResourceConstants.CRMClient),void 0,(function(){var t=$("#mergeValuesDIV .setDDPopupAbG"),a=$L(e).caret("offset"),n=a.top,l=a.left,i=e.parent(),s=i.offset().left-i.outerWidth(),r=mergeField.elemToBind.outerHeight(),o=mergeField.elemToBind.offset().top,d=$("#mergeValuesDIV"),c=d.outerHeight(),u=renderingUtils.windowHeight-28-(o+r),p=d.parent().offset(),m=p.top,h=p.left;n=n-m+r;var g="undefined"!=typeof wfmergefield&&"Blueprint"==wfmergefield.featureName&&"Webhook"!==wfmergefield.actionName,f=$("#socialCommentDiv");(g||"predefTextMessage"===e.attr("id")||"msgContent"===e.attr("id")||"WFChatMessageDiv"===e.attr("id"))&&(n=a.top-m+27);var v=renderingUtils.windowWidth-l-60;mergeField.isInputElem(mergeField.elemToBind)&&Crm.userDetails.RTL_ENABLED&&(v=s),"undefined"==typeof wfmergefield||"webhooks"!==wfmergefield.actionName&&"tasks"!==wfmergefield.actionName&&"Task"!==wfmergefield.actionName&&"Webhook"!==wfmergefield.actionName||!Crm.userDetails.RTL_ENABLED||(v=0),l=l-h-15;var y,C=$L(".defaultView .pp-content"),b=C.scrollTop()+m-100;if(C.scrollTop(b),l>200&&g&&(l-=115,t.addClass("wfTaskDropPos")),"undefined"!=typeof wfmergefield&&("AddMeeting"===wfmergefield.actionName||"ScheduleCall"===wfmergefield.actionName||"CreateConnectedRecord"===wfmergefield.actionName||"CreateRecord"===wfmergefield.actionName||"Convert"===wfmergefield.actionName||"Task"===wfmergefield.actionName||"tasks"===wfmergefield.actionName||"webhooks"===wfmergefield.actionName)){var I=e.offset().left,F=e.width();l>I+F&&(l=I+F)}if(u<=c-10?(y=Math.round(n-(c+30)),f.is(":visible")&&(y=Math.round(n-(c+30))-70)):(y=Math.round(n),f.is(":visible")&&(y=Math.round(n)-70)),mergeField.isTextArea(mergeField.elemToBind)&&(y=mergeField.getOffSetTopForTextArea(y,mergeField.elemToBind),"webhookRawBody"===mergeField.elemToBind.attr("id")&&(y-=130)),mergeField.isRichTextElem(e)){var w=e.find(".rtfCursor")[0],k=w.getBoundingClientRect();l=k.left-12,y=u+30<=c-10?k.top+k.height+5-(c+30):k.top+k.height+5,v=w.offsetLeft}Crm.userDetails.RTL_ENABLED?mergeField.isRichTextElem(e)?d.css({left:Math.round(v),top:y,display:"block"}):d.css({right:Math.round(v),top:y,display:"block"}):d.css({left:Math.round(l),top:y,display:"block"}),u<=c-10?t.addClass("setDDPopupAbGBot"):t.removeClass("setDDPopupAbGBot")}))},getOffSetTopForTextArea:function(e){return"undefined"==typeof wfmergefield||"tasks"!==wfmergefield.actionName&&"webhooks"!==wfmergefield.actionName&&"Task"!==wfmergefield.actionName&&"Webhook"!==wfmergefield.actionName&&"CreateRecord"!==wfmergefield.actionName&&"CreateConnectedRecord"!==wfmergefield.actionName||(e-=50),e},bindMergeFieldOptions:function(e,t,a,n,l){$("#mergeValuesDIV").remove(),$("#mergeValuesDIV_copy").remove(),mergeField.elemToBind=e,mergeField.elemId=e,Handlebars.registerPartial("ProcessMergeFields",Handlebars.templates.ProcessMergeFields);var i=mergeField.constructMergeFieldsJSON(n);mergeField.mergeFieldJSON=i.mergeFieldJSON;var s=Handlebars.templates.ProcessMergeFields({modulesJSON:i.modulesJSON,mergeFieldJSON:i.mergeFieldJSON,Module:a});(t=t||e.parent()).addClass("pR").append(s),mergeField.titleForMergeFLd($("#mergeValuesDIV li")),$("#mergeValuesDIV").css({top:"30px",display:"none"}).attr("data-close",!0),mergeField.bindMergeFieldOptionsImpl(e),$("#listMergeValues").addClass("pT0"),l&&mergeField.isInputElem(e)&&mergeField.showMergePopAtEndOfContent(e)},showMergePopAtEndOfContent:function(e){var t=e[0],a=t.value;a.endsWith("#")||(a+="#"),t.value=a,mergeField.setCursorPosition(t,a.length),mergeField.setMergeEntities(),mergeField.showMergeValuesDIV(e)},bindMergeFieldOptionsImpl:function(e){var t=$("#mergeValuesDIV");t.unbind("mouseenter").on("mouseenter",".mergeOptions",(function(){var e=$(this);e.is(":visible")&&($("#listMergeValues .mergeOptions,#searchMergeValues .mergeOptions").removeClass("selec"),e.addClass("selec"))})),t.unbind("mouseleave").on("mouseleave",".mergeOptions",(function(){$(this).removeClass("selec")})),t.unbind("click").on("click",(function(){$("#mergeValuesDIV:visible").length>0&&mergeField.focusElem()})),e.unbind("keyup").on("keyup",(function(e){var t=this,a=$(t),n=e.keyCode?e.keyCode:e.charCode?e.charCode:e.which;if(!($("#mergeValuesDIV:visible").length>0)||40!=n&&38!=n&&13!=n){var l="",i=0;if(mergeField.isInputElem(t))l=t.value,i=mergeField.doGetCaretPosition(t),mergeField.mergeOffset.end=i;else if(mergeField.isRichTextElem(t)){var s=t.querySelector("lyte-texteditor");l=s.getCurrentNode().textContent,i=s.getCursor(),mergeField.mergeOffset.end=i}else l=t.textContent,i=mergeField.getCaretCharacterOffsetWithin(t);var r=l.substring(0,i);if("#"===r.slice(-1)&&27!==n){mergeField.setMergeEntities();var o=$(e.target);mergeField.isRichTextElem(t)&&(o=$(t)),mergeField.showMergeValuesDIV(o),e.preventDefault(),sE(e)}else{var d=r,c=d.substring(d.lastIndexOf("#")+1);c=c.trim();var u=!1;-1!==d.lastIndexOf("#")&&""!=c&&(u=!0),mergeField.searchMergeValue(u,c)}mergeField.keyUpCallback(a)}})),e.unbind("keydown").on("keydown",(function(e){var t=e.keyCode?e.keyCode:e.charCode?e.charCode:e.which;if($("#mergeValuesDIV:visible").length>0&&(40==t||38==t||13==t))return mergeField.keyPressBind(e),e.preventDefault(),sE(e),!1}))},doGetCaretPosition:function(e){var t=0;if(document.selection){e.focus();var a=document.selection.createRange();a.moveStart("character",-e.value.length),t=a.text.length}else(e.selectionStart||"0"===e.selectionStart)&&(t=e.selectionStart);return t},isInputElem:function(e){if(e){var t=$(e)[0].tagName;return"INPUT"==t||"TEXTAREA"==t}},isTextArea:function(e){if(e)return"TEXTAREA"==$(e)[0].tagName},isRichTextElem:function(e){if(e)return"CRM-RICHTEXT-COMPONENT"===$(e)[0].tagName},constructMergeFieldsJSON:function(e){for(var t={},a=[],n={},l=e.mergefields,i=l.length,s=0;s<i;s++){var r=l[s],o=r.module,d=mergeField.getModuleIdentifier(o),c={};c.id=d,c.label=o.display_name,"custom_lookup"!=o.type&&"system_field_lookup"!=o.type||(c.label=o.lookup_details.display_label),(!wfmergefield||"Kiosk"!==wfmergefield.featureName||"Webhook"!==wfmergefield.actionName||"kiosk_get_record_single"!==o.type&&"kiosk_get_record_multiple"!==o.type&&"kiosk_data_hub_multiple"!==o.type)&&(a.push(c),n[d]={},n[d].module=o,n[d].sections=r.sections)}return t.modulesJSON=a,t.mergeFieldJSON=n,t},getSelectedFieldInfo:function(e){for(var t,a=$(e),n={},l=mergeField.mergeFieldJSON,i=a.attr("moduleid"),s=l[i].module,r=l[i].sections,o=a.attr("val"),d=r.length,c=!1,u=0;u<d;u++){for(var p=r[u].fields,m=p.length,h=0;h<m;h++){var g=p[h];if(g.id==o){t=g,c=!0;break}}if(c)break}return n.module=s,n.field=t,n},getModuleIdentifier:function(e){var t=e.name;return e.lookup_details&&e.lookup_details.id&&(t+=":"+e.lookup_details.id),t},getValueToInsertOnSelection:function(e){var t=e.module,a=e.field;return CrmConvertMergeFields.getConvertedMergeField(t,a,void 0,mergeFieldsConstants.fromapi_to_label,!1)},getSpanElemToInsertOnSelection:function(e){var t=e.module,a=e.field,n=CrmConvertMergeFields.getConvertedMergeField(t,a,void 0,mergeFieldsConstants.fromapi_to_label,!0);return $(n)[0]},isInputElem:function(e){if(e){var t=$(e)[0].tagName;return"INPUT"==t||"TEXTAREA"==t}},titleForMergeFLd:function(e){$(e).off("mouseenter").on("mouseenter",(function(){var e=$(this);e.removeAttr("title"),this.offsetWidth<Math.floor(this.scrollWidth)&&this.offsetWidth!==Math.floor(this.scrollWidth)&&e.attr("title",$.trim(e.text()))}))},mergeFieldInsertCallback:function(e,t,a){if("undefined"!=typeof wfmergefield){"Webhook"==wfmergefield.actionName?wfwebhook.showHideDateTimeInfo(e.attr("id"),"add",t):"webhooks"===wfmergefield.actionName&&$L("crm-webhook-action").e[0].component.executeMethod("setShowDateTimeInfoVal");var n=$L("#element_mergefield_value");n&&n.length>0&&a&&$L("crm-kiosk-field-properties")[0].component.updateArtBoadActiveJson({meta__merge_field:a})}},keyUpCallback:function(e){"undefined"!=typeof wfmergefield&&"Deluge"==wfmergefield.actionName&&wfdeluge.handleCustomParamSelection(e)}};!function(){var e=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).ProcessMergeFields=e({1:function(e,t,a,n,l){return" dN "},3:function(e,t,a,n,l){var i=e.lambda,s=e.escapeExpression;return' <option value="'+s(i(null!=t?t.id:t,t))+'">'+s(i(null!=t?t.label:t,t))+"</option> "},5:function(e,t,a,n,l){return' <p class="pL10 pR10 pT5  crm-font-regular crmBaseColor crm-small-font-size aligncenter">'+e.escapeExpression(a.getI18n.call(null!=t?t:{},"crm.import.no.fields.found",{name:"getI18n",hash:{},data:l}))+"</p> "},7:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{},d=e.lambda,c=e.escapeExpression;return' <ul class="modulesFields m0 p0 crmBaseColor fontSmooth" '+(null!=(r=a.ifCond.call(o,l&&l.key,"=",null!=s[1]?s[1].Module:s[1],{name:"ifCond",hash:{},fn:e.program(8,l,0,i,s),inverse:e.program(10,l,0,i,s),data:l}))?r:"")+' modName="'+c(d(null!=(r=null!=t?t.module:t)?r.display_name:r,t))+'" id="'+c(d(l&&l.key,t))+'_ModuleFields"> '+(null!=(r=a.each.call(o,null!=t?t.sections:t,{name:"each",hash:{},fn:e.program(12,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </ul> "},8:function(e,t,a,n,l){return""},10:function(e,t,a,n,l){return'style="display:none"'},12:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return" "+(null!=(r=a.if_gt_len.call(o,null!=s[1]?s[1].sections:s[1],1,{name:"if_gt_len",hash:{},fn:e.program(13,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.each.call(o,null!=t?t.fields:t,{name:"each",hash:{},fn:e.program(15,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},13:function(e,t,a,n,l){return' <li class="mergeSections crm-small-font-size crmNotFoundColor ttUppercase mT15  pR20">'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+"</li> "},15:function(e,t,a,n,l,i,s){var r;return" "+(null!=(r=a.ifCond.call(null!=t?t:{},null!=t?t.show:t,"=",!0,{name:"ifCond",hash:{},fn:e.program(16,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "},16:function(e,t,a,n,l,i,s){var r=e.lambda,o=e.escapeExpression;return" <li class='mergeOptions cP pT5 pB5 pL20' moduleid='"+o(r(e.data(l,2)&&e.data(l,2).key,t))+"' val='"+o(r(null!=t?t.id:t,t))+'\' onclick="mergeField.setMergeValue(this);">'+o(r(null!=t?t.field_label:t,t))+"</li> "},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l,i,s){var r,o=null!=t?t:{};return'<div id="mergeValuesDIV" class="alignLeft br2 pA bg_white bdrdedede bshEE pB5 zi10 bpDuringMF mergeFldCls" onclick="sE(event);" style="max-height:250px;width:200px;" data-close="true"> <i class="setDDPopupAbG" style="left: 6px;"><i class="setDDPopupA"></i></i> <ul class="pL0 pR0 pB0 m0" id="searchMergeValues" style="display:none"></ul> <div class="" id="listMergeValues"> <div id="moduleOptionsList" class=\'br_bottom_border3 newSelect dropDwnMxWdth '+(null!=(r=a.ifCond.call(o,a.arrayLength.call(o,null!=t?t.modulesJSON:t,{name:"arrayLength",hash:{},data:l}),"<",1,{name:"ifCond",hash:{},fn:e.program(1,l,0,i,s),inverse:e.noop,data:l}))?r:"")+'\'> <select id="moduleOptions" onchange="mergeField.changeMergevalues(this)"> '+(null!=(r=a.each.call(o,null!=t?t.modulesJSON:t,{name:"each",hash:{},fn:e.program(3,l,0,i,s),inverse:e.noop,data:l}))?r:"")+' </select> </div> <div class="oA" style="max-height:180px";> '+(null!=(r=a.ifCond.call(o,a.arrayLength.call(o,null!=t?t.modulesJSON:t,{name:"arrayLength",hash:{},data:l}),"<",1,{name:"ifCond",hash:{},fn:e.program(5,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" "+(null!=(r=a.each.call(o,null!=t?t.mergeFieldJSON:t,{name:"each",hash:{},fn:e.program(7,l,0,i,s),inverse:e.noop,data:l}))?r:"")+" </div> </div> </div> "},useData:!0,useDepths:!0})}();var mergeFieldsConstants={variable:"variable",system:"system",custom_lookup:"custom_lookup",system_module_lookup:"system_module_lookup",system_field_lookup:"system_field_lookup",unrelated_module:"unrelated_module",polymorphic_lookup:"polymorphic_lookup",subform_module:"subform_module",fromlabel_to_api:"labeltoapi",fromlabel_to_id:"labeltoid",fromapi_to_label:"apitolabel",Lookup:"Lookup:",mxn_lookup:"mxn_lookup",multilevel_lookup:"multilevel_lookup",mxn:"mxn"},CrmConvertMergeFields={getUnsupportedMergeFields:function(e,t,a,n){var l,i=new RegExp(/\$\{([^\{|^\}]*)\}/g);n&&(i=new RegExp(/\#\{([^\{|^\}]*)\}/g));var s="${"+I18n.getMsg("crm.template.email.unsupported.merge.field")+"}",r=[];for((e.indexOf("${Unsupported_Field}")>-1||e.indexOf(s)>-1)&&r.push(s);l=i.exec(e);){var o=l[0],d=l[1].split("."),c=d[0];if("ZSURVEY"===c||"Datarequest"===c)CrmConvertMergeFields.isModuleAvail(a,c)||r.push(o);else if(d.length>1){CrmConvertMergeFields.getModuleAndFieldInfo(a,d,t)||CrmConvertMergeFields.isCampaignsWebinarUrlMergeField(o,a,t)||r.push(o)}else"userSignature"!==c&&"companyLogo"!==c&&"serialNumber"!==c&&r.push(o)}return r},getFieldsUsedInContent:function(e,t,a,n,l){var i,s=[],r=new RegExp(/\$\{([^\{|^\}]*)\}/g);for(l&&(r=new RegExp(/\#\{([^\{|^\}]*)\}/g));i=r.exec(e);){var o=i[1].split("."),d=o[0];if("Datarequest"!==d&&"ZSURVEY"!==d&&o.length>1){var c=CrmConvertMergeFields.getModuleAndFieldInfo(a,o,t);if(c){var u=c.field,p=u.data_type;if(n&&!n.includes(p))continue;s.push(u)}}}return s},getFieldsUsedInContent:function(e,t,a,n,l){var i,s=[],r=new RegExp(/\$\{([^\{|^\}]*)\}/g);for(l&&(r=new RegExp(/\#\{([^\{|^\}]*)\}/g));i=r.exec(e);){var o=i[1].split("."),d=o[0];if("Datarequest"!==d&&"ZSURVEY"!==d&&o.length>1){var c=CrmConvertMergeFields.getModuleAndFieldInfo(a,o,t);if(c){var u=c.field,p=u.data_type;if(n&&!n.includes(p))continue;s.push(u)}}}return s},convertMergeFieldsAsRequiredFormat:function(e,t,a,n,l,i){var s=new RegExp(/\$\{([^\{|^\}]*)\}/g);l&&(s=new RegExp(/\#\{([^\{|^\}]*)\}/g));for(var r,o,d=0,c=e;o=s.exec(e);){var u=o[0],p=o[1].split("."),m=p[0];if(t===mergeFieldsConstants.fromapi_to_label&&(m=m.substring(1)),"Datarequest"!==m&&"ZSURVEY"!==m)if(CrmConvertMergeFields.isCampaignsWebinarUrlMergeField(u,a,t)){var h=CrmConvertMergeFields.getCampaignsWebinarUrlMergeField(a,t);r=u.length,i&&t===mergeFieldsConstants.fromapi_to_label&&(h=$ESAPI.encoder().encodeForHTML(h)),c=c.substring(0,o.index+d)+h+c.substring(s.lastIndex+d),d+=h.length-r}else if(p.length>1){var g=CrmConvertMergeFields.getModuleAndFieldInfo(a,p,t);if(g){var f=g.module,v=g.field,y=g.lookuprelfield;r=u.length;var C=CrmConvertMergeFields.getConvertedMergeField(f,v,y,t,n,l,g.multiLevelModule,g.parentMod,a.mergefields);i&&t===mergeFieldsConstants.fromapi_to_label&&(C=$ESAPI.encoder().encodeForHTML(C)),c=c.substring(0,o.index+d)+C+c.substring(s.lastIndex+d),d+=C.length-r}}else if("userSignature"===m||"companyLogo"===m||"serialNumber"===m||"${Current Record}"===e||"${!CURRENTRECORD}"===e){r=u.length;var b=l?"#{":"${";if(b=t===mergeFieldsConstants.fromlabel_to_api?b+"!":b,t===mergeFieldsConstants.fromlabel_to_api&&"${Current Record}"===e)return"${!CURRENTRECORD}";if(t===mergeFieldsConstants.fromapi_to_label&&"${!CURRENTRECORD}"===e){if(v=wfmergefield.getFieldObj(wfmergefield.getMainModule(),"CURRENTRECORD"))return b+v.field_label+"}"}else C=b+m+"}";c=c.substring(0,o.index+d)+C+c.substring(s.lastIndex+d),d+=C.length-r}}return c},getConvertedMergeField:function(e,t,a,n,l,i,s,r,o){var d,c,u,p,m,h,g,f=CrmConvertMergeFields.getReplaceField(t,n);if(CrmConvertMergeFields.isStaticField(t)){if(n===mergeFieldsConstants.fromlabel_to_id)return"${"+t.id+"}";if(n===mergeFieldsConstants.fromapi_to_label)return"${"+t.field_label+"}"}if(f){var v,y,C,b,I,F,w,k=e.type,E=e.display_name,L=e.api_name,_=e.name,S=e.id,M=e.lookup_details;if(M&&(v=e.parent_module_api_name,y=M.api_name,C=M.display_label,b=M.id,u=k===mergeFieldsConstants.custom_lookup||k===mergeFieldsConstants.system_field_lookup,p=k===mergeFieldsConstants.subform_module||k===mergeFieldsConstants.system_module_lookup||k===mergeFieldsConstants.custom_lookup||k===mergeFieldsConstants.system_field_lookup,c=k===mergeFieldsConstants.polymorphic_lookup,m=k===mergeFieldsConstants.mxn_lookup,h=!(!s||!r),u&&n===mergeFieldsConstants.fromapi_to_label)){var R=CrmConvertMergeFields.getModuleObjectByApiName(e.parent_module_api_name,o);if(R&&CrmConvertMergeFields.isKioskModule(R.name))E=CrmConvertMergeFields.getModuleObjectByApiName(e.api_name,o).display_name,g=!0}a&&(h?(v=r.api_name,y=e.api_name,L=a.api_name,F=void 0,E=s.display_name):(I=a.api_name,F=a.field_label,w=a.id)),k===mergeFieldsConstants.variable&&n===mergeFieldsConstants.fromlabel_to_id&&(_=S);var P=i?"#{":"${";if(n===mergeFieldsConstants.fromlabel_to_id)d=h?P+v+"."+y+"."+L+"."+f+"}":m?P+v+"."+b+"."+f+"}":u?P+mergeFieldsConstants.Lookup+b+"."+f+"}":P+_+(w?"."+w:"")+"."+f+"}";else if(n===mergeFieldsConstants.fromapi_to_label)if(l){var x=CrmConvertMergeFields.getConvertedMergeField(e,t,a,mergeFieldsConstants.fromlabel_to_api,!1,i,void 0,void 0,o),D=document.createElement("span");D.setAttribute("value",x),D.contentEditable=!1;var T="";T=u?mergeFieldsConstants.Lookup+C+" - "+f:E+(F?" - "+F:"")+" - "+f,"variable"===e.type&&"Deluge"===wfmergefield.actionName&&(T=I18n.getMsg("crm.crmvariables.new",Crm.appName)+" - "+T),D.textContent=T,D.style.color="var(--linkColor)",D.setAttribute("class","mergespan"),D.title=T,d=D.outerHTML}else d=u?g?P+E+"."+f+"}":P+mergeFieldsConstants.Lookup+C+"."+f+"}":m?P+v+"."+C+"."+f+"}":P+E+(F?"."+F:"")+"."+f+"}";else n===mergeFieldsConstants.fromlabel_to_api&&(h&&(d=P+"!"+v+"."+y+"."+L+"."+f+"}"),d=m&&v?P+"!"+v+"."+y+"."+f+"}":c&&v?P+"!"+v+"."+y+"->"+L+"."+f+"}":p&&v?P+"!"+v+"."+y+"."+f+"}":P+"!"+L+(I?"."+I:"")+"."+f+"}")}return d},isStaticField:function(e){return["CURRENTRECORD"].indexOf(e.id)>=0},getModuleAndFieldInfo:function(e,t,a){var n,l,i=t.length,s=0,r=t[0],o=!1;a===mergeFieldsConstants.fromapi_to_label&&(r=r.substring(1)),a!==mergeFieldsConstants.fromlabel_to_api&&a!==mergeFieldsConstants.fromlabel_to_id||r.startsWith(mergeFieldsConstants.Lookup)&&(r=r.substring(7),o=!0);var d=!1;do{var c=CrmConvertMergeFields.getModuleandFieldsObj(e,r,o,!1,!1,a);if(n=c,c){var u=s+1,p=t[u];if(p=CrmConvertMergeFields.replaceHtmlEncodedChars(p),a===mergeFieldsConstants.fromapi_to_label){var m=p.split("->");if(m.length>1)c=CrmConvertMergeFields.getModuleandFieldsObj(e,m[1],!1,!1,!1,a),p=t[++u];else if(!CrmConvertMergeFields.isMultiLevelAllowed(c.module.name)){var h=CrmConvertMergeFields.getFieldObject(c,p,a);if(h&&h.lookup_module){var g=h.api_name,f=CrmConvertMergeFields.getModuleandFieldsObj(e,h.lookup_module.api_name,!1,!1,!0,mergeFieldsConstants.fromapi_to_label,g);f&&u<i-1&&(c=f,p=t[++u])}}}if(c){var v=c.module;if("mxn"===v.type&&i>2){r=t[1];o=!0,s++;continue}var y=CrmConvertMergeFields.getFieldInfoFromFieldPart(e,c,p,a,t,u,i);if(y)(a!==mergeFieldsConstants.fromlabel_to_api||v.lookup_details&&v.type!==mergeFieldsConstants.custom_lookup&&v.type!==mergeFieldsConstants.system_field_lookup||v.lookup_details&&t[0].startsWith(mergeFieldsConstants.Lookup)||!v.lookup_details&&!t[0].startsWith(mergeFieldsConstants.Lookup))&&(d=!0),d&&((l=y).module=v,y.multiLevelModule&&(l.parentMod=n.module,s++));else if("Unsubscribe"===v.name){var C=CrmConvertMergeFields.getUnsubscribeFieldInfo(a,p);C&&((l=C).module=v)}}}r+="."+t[++s]}while(s<i-1&&!d);return l},getFieldInfoFromFieldPart:function(e,t,a,n,l,i,s){var r,o,d=CrmConvertMergeFields.getFieldObject(t,a,n);if(d&&d.lookup_module&&i<s-1){var c=!d.lookup_module.mutilevel_lookup&&!t.module.kiosk_module;t=CrmConvertMergeFields.getModuleandFieldsObj(e,d.lookup_module.api_name,!1,c,!1,mergeFieldsConstants.fromapi_to_label),o=d,d=void 0,a=""}return d&&i===s-1?(r={}).field=d:i<s-1&&t&&(""!==a&&(a+="."),a+=l[++i],(r=CrmConvertMergeFields.getFieldInfoFromFieldPart(e,t,a,n,l,i,s))&&o&&(r.lookuprelfield=o,t.module.type===mergeFieldsConstants.multilevel_lookup&&(r.multiLevelModule=t.module))),r},isModuleAvail:function(e,t){var a,n,l=e.mergefields;if(l)for(var i=l.length,s=0;s<i;s++){if((a=l[s]).module.name===t){n=!0;break}}return!!n&&a},getModuleandFieldsObj:function(e,t,a,n,l,i,s){var r,o=!1;t=CrmConvertMergeFields.replaceHtmlEncodedChars(t);var d=e?e.mergefields:e;n&&(void 0===(d=e.lookuprelmergefields)&&template&&template.fetchMergeFieldsAPIJson&&(d=template.fetchMergeFieldsAPIJson(t).mergefields));if(d)for(var c=d.length,u=0;u<c;u++){var p=(r=d[u]).module;if("Datarequest"!==p.name){var m=p.api_name;"Execution_Info"!==m||"Execution_Info"!==t&&"Execution Info"!==t||(m=t);var h,g,f=p.display_name,v=p.name,y=p.lookup_details;if(y&&(h=y.display_label,g=y.api_name),i===mergeFieldsConstants.fromapi_to_label){if(m===t){if(!l){o=!0;break}if(p.type!==mergeFieldsConstants.system_module_lookup&&p.type!==mergeFieldsConstants.subform_module&&p.type!==mergeFieldsConstants.custom_lookup&&p.type!==mergeFieldsConstants.system_field_lookup)continue;if(!s){o=!0;break}if(l&&s===g){o=!0;break}}else if(g===t&&p.type===mergeFieldsConstants.mxn_lookup){o=!0;break}}else if(i===mergeFieldsConstants.fromlabel_to_api||i===mergeFieldsConstants.fromlabel_to_id)if(a){if(h===t){o=!0;break}}else{if(f===t){o=!0;break}if(p.type===mergeFieldsConstants.mxn&&(v===t||m===t)){o=!0;break}}}}return o?r:void 0},getFieldObject:function(e,t,a){var n,l=e.sections,i=l.length,s=a===mergeFieldsConstants.fromlabel_to_api,r=a===mergeFieldsConstants.fromlabel_to_id,o=a===mergeFieldsConstants.fromapi_to_label,d=!1;t=CrmConvertMergeFields.replaceHtmlEncodedChars(t);for(var c=CrmConvertMergeFields.isKioskModule(e.module.name),u=0;u<i;u++){for(var p=l[u].fields,m=p.length,h=0;h<m;h++)if(n=p[h],s||r){if(c&&t.indexOf(" > ")>1&&t===n.$field_label){d=!0;break}if(t===n.field_label){d=!0;break}}else if(o&&t===n.api_name){d=!0;break}if(d)break}return d?n:void 0},getReplaceField:function(e,t){var a;return t===mergeFieldsConstants.fromlabel_to_api?a=e.api_name:t===mergeFieldsConstants.fromapi_to_label?a=e.field_label:t===mergeFieldsConstants.fromlabel_to_id&&(a=e.id),a},getAllModulesAndFields:function(e){for(var t=e.modules,a=e.details,n=a.length,l=t.length,i=[],s={},r=0;r<l;r++)for(var o=t[r],d=o.name,c=o.type,u=0;u<n;u++){var p=a[u],m=p.module;if(d===m.name){var h={},g={};g.id=m.id,g.name=m.name,g.api_name=m.api_name,g.singular_label=m.singular_label,g.display_name=o.display_name,g.custom_module=m.custom_module,g.kiosk_module=m.kiosk_module,g.type=c,g.lookup_details=o.lookup_details,g.parent_module_api_name=o.parent_module_api_name,h.module=g;var f=p.sections;h.sections=f,i.push(h);break}}return s.mergefields=i,s},convert:function(e,t,a){var n,l,i,s,r,o,d="${"+I18n.getMsg("crm.template.email.unsupported.merge.field")+"}",c="";c=a?new RegExp(/(\#\{)(.+?)\.(.+?)\}/g):new RegExp(/\$\{serialNumber\}|\$\{userSignature\}|\$\{companyLogo\}|\$\{Unsupported_Field\}|(\$\{)(.+?)\.(.+?)\}/g);var u,p=["&amp;","&#39;","&quot;","&lt;","&gt;","&nbsp;","%28","%29","%3C","%3E","%20","%7B","%7D","%27"],m=["&","'",'"',"<",">"," ","(",")","<",">"," ","{","}","'"],h=e,g=0,f="";for(e=e.replace(d,"${Unsupported_Field}");n=c.exec(e);){l=n[2],i=n[3],r=null,o=null;var v=l;if(null!=l){l.startsWith(mergeFieldsConstants.Lookup)&&(l=l.substring(7)),u=l.length+i.length;for(var y=p.length,C=0;C<y;C++){var b=new RegExp(p[C],"g");l=l.replace(b,m[C]),i=i.replace(b,m[C]),v=v.replace(b,m[C])}if((r=v.startsWith(mergeFieldsConstants.Lookup)?t[mergeFieldsConstants.Lookup+l]:t[l])&&(r=r.label),!r){var I=i.split("."),F=I.length-1;for(C=0;F--;)if(l=l+"."+I[C],C++,(r=v.startsWith(mergeFieldsConstants.Lookup)?t[mergeFieldsConstants.Lookup+l]:t[l])&&(r=r.label),r){i=v.startsWith(mergeFieldsConstants.Lookup)?i.substring(l.length-v.length+7):i.substring(l.length-v.length);break}}(s=v.startsWith(mergeFieldsConstants.Lookup)?t[mergeFieldsConstants.Lookup+l]:t[l])&&(s=s.field)&&(o=s[i],f.indexOf(o)>-1||isNaN(o)||(f=f+o+",",isNaN(r)||(f=f+r+","))),null==o&&(o=i),null!=r&&v.startsWith(mergeFieldsConstants.Lookup)?(h=h.substring(0,n.index+2+g)+v.substring(0,7)+r+"."+o+"}"+h.substring(c.lastIndex+g),g+=r.length+o.length-u):null!=r&&(h=h.substring(0,n.index+2+g)+r+"."+o+"}"+h.substring(c.lastIndex+g),g+=r.length+o.length-u)}}return{content:h,fieldIds:f}},getUnsupportedFieldsList:function(e,t,a,n){var l,i,s,r,o,d,c="${"+I18n.getMsg("crm.template.email.unsupported.merge.field")+"}",u="${Unsupported_Field}",p="";p=a?new RegExp(/(\#\{)(.+?)\.(.+?)\}/g):new RegExp(/\$\{serialNumber\}|\$\{userSignature\}|\$\{companyLogo\}|\$\{Unsupported_Field\}|\$\{ZSURVEY\.(.+?)\}|\$\{(.+?)\.(.+?)\}|\$\{Campaigns\.Registration URL\}/g);var m=["&amp;","&#39;","&quot;","&lt;","&gt;","&nbsp;","%28","%29","%3C","%3E","%20","%7B","%7D","%27"],h=["&","'",'"',"<",">"," ","(",")","<",">"," ","{","}","'"],g=[];for((e=e.replace(c,u)).indexOf(u)>-1&&g.push(c);l=p.exec(e);){i=l[2],s=l[3],o=null,d=null;var f=i;if(("Datarequest"!==i||-1===l[0].search(/\$\{Datarequest\.[a-zA-Z_]+\}/))&&null!=i){i.startsWith(mergeFieldsConstants.Lookup)&&(i=i.substring(7));for(var v=m.length,y=0;y<v;y++){var C=new RegExp(m[y],"g");i=i.replace(C,h[y]),s=s.replace(C,h[y]),f=f.replace(C,h[y])}if((o=f.startsWith(mergeFieldsConstants.Lookup)?t[mergeFieldsConstants.Lookup+i]:t[i])&&(o=o.label),!o){var b=s.split("."),I=b.length-1;for(y=0;I--;)if(i=i+"."+b[y],y++,(o=f.startsWith(mergeFieldsConstants.Lookup)?t[mergeFieldsConstants.Lookup+i]:t[i])&&(o=o.label),o){s=f.startsWith(mergeFieldsConstants.Lookup)?s.substring(i.length-f.length+7):s.substring(i.length-f.length);break}}o?((r=f.startsWith(mergeFieldsConstants.Lookup)?t[mergeFieldsConstants.Lookup+i]:t[i])&&(r=r.field)&&(d=r[s]),null==d&&(n?g.push(i+" - "+s):g.push(l[0]))):n?g.push(i+" - "+s):g.push(l[0])}}return g},fetchMergeFieldsAPIJson:function(e,t,a,n,l,i,s){var r={};if(r.module=e,t&&(r.relatedmodules=t),n&&(r.type=n),s&&(r.locale=s),r.includelookups=a,commonUtils.showHideLoadingDiv(!0),"CRMCCActions"!==e)return store.findAll("dummy",r,!1,!1,{url:"/crm/v7/settings/mergefields",method:"GET"}).then((function(e){commonUtils.showHideLoadingDiv(!1);var t=CrmConvertMergeFields.getAllModulesAndFields(e.mergefields);i&&i(t,l)}));if(window.process){commonUtils.showHideLoadingDiv(!1);var o=window.process.draft_variables;if(o){var d=JSON.parse(JSON.stringify(o)),c=CrmConvertMergeFields.getAllModulesAndFields(d);i&&i(c,l)}}},fetchMergeFieldsAPIJsonForLookups:function(e,t){var a,n=e.join(",");(l={}).modules=n,t&&(l.type=t),commonUtils.showHideLoadingDiv(!0);var l,i={action:"/crm/v2/settings/lookupmergefields",type:"GET",headers:{"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken},data:l,async:!1},s=i.url?i.url:i.action,r=i.headers||{};(l=i.data)||(l={});var o=i.dataType?i.dataType:null,d=i.type?i.type:"POST",c=i.contentType?i.contentType:"application/x-www-form-urlencoded; charset=UTF-8";return s=networkUtils.getPortalURL(s),$.ajax({type:d,url:s,data:l,contentType:c,headers:r,dataType:o,async:!1,success:function(e){commonUtils.showHideLoadingDiv(!1),a=CrmConvertMergeFields.getAllModulesAndFields(e.mergefields)},error:function(){commonUtils.showHideLoadingDiv(!1)}}),a},getMergeFieldsofDataType:function(e,t,a,n,l,i){for(var s=(a=JSON.parse(JSON.stringify(a))).mergefields,r=s.length,o=0;o<r;o++){for(var d=s[o].module,c=d.name,u=!d.lookup_details&&e&&c==e,p=s[o].sections,m=p.length,h=0;h<m;h++){var g=p[h],f=g.fields,v=CrmConvertMergeFields.filterFieldsArrForDataType(d,u,t,f,n,l,i);v.length<1?(p.splice(h,1),h--,m--):g.fields=v}p.length<1&&(s.splice(o,1),o--,r--)}return a},getFieldJSONFromMergeFieldJSON:function(e,t,a){for(var n=e.mergefields,l=n.length,i=0;i<l;i++){if(n[i].module.name===t)for(var s=n[i].sections,r=s.length,o=0;o<r;o++)for(var d=s[o].fields,c=d.length,u=0;u<c;u++){var p=d[u];if(p.id===a)return JSON.parse(JSON.stringify(p))}}},removeUnsupportedMultilevels:function(e,t){var a=$L("crm-orchestration-builder").e[0].component;if(t=a.currentStateData)for(var n=Lyte.registeredMixins.orchestration_validation.getOrchestrationModule(),l=t.instanceType,i=t.instanceIndex,s=t.statetransId,r=e.mergefields,o=r.length,d=0;d<o;d++){if(r[d].module.name===n){for(var c=r[d].sections,u=c.length,p=0;p<u;p++){var m=c[p],h=m.fields.filter((function(e){if(e.multilevel)for(var t=e.multilevel_props,n=1;n<=10;n++){var r=t["level"+n];if(!r)break;var o=r.type;if(a.isActionInstanceType(o)){var d,c=t["level"+(n-1)];if(s&&c.id===s)if("instant_action"!==o&&(d=a.getInstanceIndexFromSection(o),o=a.getInstanceTypeFromSection(o)),o===l){if("instant_action"===l||i===d)return!1}else if("instant_action"===l&&"instant_action"!==o)return!1}}return!0}));h.length<1?(c.splice(p,1),p--,u--):m.fields=h}c.length<1&&(r.splice(d,1),d--,o--)}}},removeUnsupportedModules:function(e,t){for(var a=e.mergefields,n=a.length,l=0;l<n;l++){var i=a[l].module;CrmConvertMergeFields.presentinJSONArray(i.name,t)&&(a.splice(l,1),n--,l--)}},presentinJSONArray:function(e,t){for(var a=t.length,n=0;n<a;n++)if(t[n]===CrmConvertMergeFields.getElemName(e))return!0;return!1},getElemName:function(e){return"webhooks"===wfmergefield.actionName&&"webhooks"===e?"Webhook":e},isOrchestrationModule:function(e){return e.indexOf("Orchestration")>-1||e.indexOf("CRMCCActions")>-1},isKioskModule:function(e){return!!e&&e.indexOf("ProcessFlow")>-1},filterFieldsArrForDataType:function(e,t,a,n,l,i,s){return n.filter((function(n){if(n.supported_places){if(a&&!CrmConvertMergeFields.presentinJSONArray(a,n.supported_places))return!1;n.show=!0}var r=!1;if(l&&"text"!==l&&"textarea"!==l){r=CrmConvertMergeFields.isDataTypeSupported(n,l,t);var o=l.split(":")[0];"lookup"!==o&&"desk_ticket"!==o&&"richtext"!==o&&CrmConvertMergeFields.isSecondLevelLookupSupported(e.name,n)&&(r=!0,"Kiosk"===wfmergefield.featureName&&"fileupload"===o&&(r=!0))}else r=!0;var d=!0;return i&&!CrmConvertMergeFields.showFieldForBinding(e,t,l,n)&&(d=!1),s&&"kiosk_get_record_single"===s&&"lookup"===n.data_type&&133===n.ui_type&&!d&&r&&"Kiosk"===wfmergefield.featureName&&(d=!0),void 0!==mergeField&&mergeField.filterCallBack&&(d=mergeField.filterCallBack(e,l,n,d,a)),!(!r||!d)&&(n.show=!0,!0)}))},showFieldForBinding:function(e,t,a,n){var l=e.name;return!!("CURRENTRECORD"===n.id&&a&&a.indexOf("lookup")>=0)||(!(!a||!a.startsWith("lookup:"))||(CrmConvertMergeFields.isUserField(a)?"Users"!=l||!e.lookup_details:!!n.show&&(!(!t&&!n.showinlookup)||!(!e.kiosk_module||!wfmergefield||"Deluge"!==wfmergefield.actionName))))},isSecondLevelLookupSupported:function(e,t){if(t&&t.multilevel&&133===t.ui_type&&t.lookup_module&&CrmConvertMergeFields.isMultiLevelAllowed(e)){var a=t.lookup_module.id,n=store.peekRecord("module",a);return!!n&&"Modules"!==n.module_name}return!1},isDataTypeSupported:function(e,t,a){if("desk_ticket"===t)return e.field_label.includes("> Trigger - Desk")&&e.field_label.endsWith("> Ticket ID")||e.field_label.includes("> Touchpoint - Desk")&&e.field_label.endsWith("> Ticket ID");if(t&&null!=t&&"text"!==t&&"textarea"!==t){var n=t.split(":");if(CrmConvertMergeFields.isUserField(t)&&CrmConvertMergeFields.isUserField(e.data_type))return!0;if("recordCurrency"===t&&39===e.ui_type)return!0;if("richtext"===t&&250===e.ui_type&&a)return!0;if(n[0]===e.data_type&&CrmConvertMergeFields.isMergeFieldAvailableForThisType(e)){if("lookup"===n[0]){if(n.length>1){var l=n[1];if(e.lookup_module&&null!=e.lookup_module){if((Lyte.registeredMixins["crm-automation-actions"]?Lyte.registeredMixins["crm-automation-actions"].fetchModuleName(e.lookup_module.api_name):automationActions.getTabNameByAPIName(e.lookup_module.api_name))===l)return!("lookup:Accounts"===t&&wfmergefield&&"Kiosk"===wfmergefield.featureName&&"CreateRecord"===wfmergefield.actionName&&!e.show)}else if("CURRENTRECORD"===e.id&&l===wfmergefield.getMainModule()&&a)return!0;return!1}return!0}return!0}return!1}return!0},isUserField:function(e){return-1!==["ownerlookup","userlookup"].indexOf(e)},isMergeFieldAvailableForThisType:function(e){var t=e.data_type;return"208"!==e.ui_type||"bigint"!==t},isMergeFieldPresent:function(e){return"${CURRENTUSER}"!==e&&"${EXECUTION_TIME}"!==e&&"${EXECUTION_DAY}"!==e&&new RegExp(/\$\{([^\{|^\}]*)\}/g).test(e)},getMessage:function(e){var t=e,a=$("#divToProcessContent");a.html(t.html());var n=a.find("div");n.length>0&&n.each((function(){var e=$(this);e.replaceWith("<br>"+e.html())}));var l=a.find("span.mergespan");l.length>0&&l.each((function(){var e=$(this),t=this.getAttribute("value");e.replaceWith($ESAPI.encoder().encodeForHTML(t))}));var i=a.find("span");return i.length>0&&i.each((function(){var e=$(this);e.replaceWith(e.html())})),a.html()},removeMergeSpans:function(e){var t=$("<div/>");t.html(e);var a=t.find("span.mergespan");return a.length>0?(a.each((function(){var e=$(this),t=this.getAttribute("value");t||(t=this.getAttribute("title")),e.replaceWith($ESAPI.encoder().encodeForHTML(t))})),t.html()):e},replaceHtmlEncodedChars:function(e){for(var t=["&amp;","&#39;","&quot;","&lt;","&gt;","&nbsp;","%28","%29","%3C","%3E","%20","%7B","%7D","%27","&#x24;","&#x7b;","&#x21;","&#x7d;"],a=["&","'",'"',"<",">"," ","(",")","<",">"," ","{","}","'","$","{","!","}"],n=t.length,l=0;l<n;l++){var i=new RegExp(t[l],"g");e=e.replace(i,a[l])}return e},isMultiLevelAllowed:function(e){return CrmConvertMergeFields.isOrchestrationModule(e)||e.indexOf("PathFinder")>-1||CrmConvertMergeFields.isKioskModule(e)},encodeMergeFieldZE:function(e){for(var t,a,n=new RegExp(/((<a ([^<]*|[^>]*)(href="(.*?)")(.*?)>(.*?)<\/a>)|(<img([^>]*).*?>)|(<span class="mergespan(.*?)<\/span>)|(\$\{([^\{|^\}]*)\}))/g),l=0,i=e;a=n.exec(e);){var s=a[2],r=a[12];if(s){for(var o,d,c=a[7],u=new RegExp(/\$\{([^\{|^\}]*)\}/g),p=c,m=0;d=u.exec(c);){var h=d[0];h&&(o=h.length,h=CrmConvertMergeFields.replaceHtmlEncodedChars(h),h=$ESAPI.encoder().encodeForHTML(h),p=p.substring(0,d.index+m)+h+p.substring(u.lastIndex+m),m+=h.length-o)}if(c!==p)for(;s.includes(c);)i=i.replace(c,p),s=s.replace(c,p),l+=m}else r&&(t=r.length,r=CrmConvertMergeFields.replaceHtmlEncodedChars(r),r=$ESAPI.encoder().encodeForHTML(r),i=i.substring(0,a.index+l)+r+i.substring(n.lastIndex+l),l+=r.length-t)}return i},encodeMergeField:function(e){for(var t,a,n=new RegExp(/((<a ([^<]*|[^>]*))(.*?>.*?<\/a>)|(\$\{([^\{|^\}]*)\})|(<span class="unsupportMergeField"(.*?)<\/span>))/g),l=0,i=e;a=n.exec(e);){var s=a[5];s&&(t=s.length,s=CrmConvertMergeFields.replaceHtmlEncodedChars(s),s=$ESAPI.encoder().encodeForHTML(s),i=i.substring(0,a.index+l)+s+i.substring(n.lastIndex+l),l+=s.length-t)}return i},removeMergeFieldsInStr:function(e){for(var t,a,n=e,l=new RegExp(/\$\{([^\}].*?)\}/g),i=0;a=l.exec(e);){var s=a[0];s&&(t=s.length,s="",n=n.substring(0,a.index+i)+s+n.substring(l.lastIndex+i),i+=s.length-t)}return n},getUnsubscribeFieldInfo:function(e,t){var a=template.unsubscribeMergeFields;if(a)for(var n=a.length,l={},i=0;i<n;i++){var s=a[i];if(e===mergeFieldsConstants.fromapi_to_label){if(s.api_name===t)return l.field=s,l}else if((e===mergeFieldsConstants.fromlabel_to_api||e===mergeFieldsConstants.fromlabel_to_id)&&s.field_label===t)return l.field=s,l}},getAllFieldsForModule:function(e,t){var a={};if(t)for(var n=t.length,l=0;l<n;l++){var i=t[l];if(i.module.name===e){a.sections=i.sections;break}}return a},getModuleObjectByApiName:function(e,t){if(t)for(var a=t.length,n=0;n<a;n++){var l=t[n].module;if(l.api_name===e)return l}},getModuleObjectByModName:function(e,t){if(t)for(var a=t.length,n=0;n<a;n++){var l=t[n].module;if(l.name===e)return l}},getModuleFieldsObjectByLookupApiId:function(e,t){if(t)for(var a=t.length,n=0;n<a;n++){var l=t[n];if(l.module.lookup_details&&l.module.lookup_details.id===e)return l}},getModuleFieldsInfoProcessFlow:function(e){if(e)for(var t=e.length,a=0;a<t;a++){var n=e[a];if(n.module.kiosk_module&&!0===n.module.kiosk_module)return n}},validCurrentRecordField:function(e,t,a){if("lookup"===t&&a.lookup&&((Lyte.registeredMixins["crm-automation-actions"]?Lyte.registeredMixins["crm-automation-actions"].fetchModuleName(a.lookup.module.api_name):automationActions.getTabNameByAPIName(a.lookup.module.api_name))===wfmergefield.getMainModule()&&(a=wfmergefield.getFieldObj(wfmergefield.getMainModule(),"CURRENTRECORD"))&&"${"+a.field_label+"}"===e))return!0;return!1},isCampaignsWebinarUrlMergeField:function(e,t,a){var n="",l="";if(t&&t.mergefields&&t.mergefields.length>0&&t.mergefields.forEach((function(e){"Campaigns"===e.module.name&&(l=e.module.display_name,a===mergeFieldsConstants.fromapi_to_label&&(l=e.module.api_name),e.sections[0].fields.forEach((function(e){"Native__Webinar__Extn__Webinar_Registration_URL"===e.api_name&&(n=e.field_label,a===mergeFieldsConstants.fromapi_to_label&&(n=e.api_name))})))})),n){var i="${"+l+"."+n+"}";if(a===mergeFieldsConstants.fromapi_to_label&&(i="${!"+l+"."+n+"}"),i===e)return!0}return!1},getCampaignsWebinarUrlMergeField:function(e,t){var a="",n="";if(e&&e.mergefields&&e.mergefields.length>0&&e.mergefields.forEach((function(e){"Campaigns"===e.module.name&&(n=e.module.api_name,t===mergeFieldsConstants.fromapi_to_label&&(n=e.module.display_name),e.sections[0].fields.forEach((function(e){"Native__Webinar__Extn__Webinar_Registration_URL"===e.api_name&&(a=e.api_name,t===mergeFieldsConstants.fromapi_to_label&&(a=e.field_label))})))})),a)return t===mergeFieldsConstants.fromapi_to_label?"${"+n+"."+a+"}":"${!"+n+"."+a+"}"}},ZSurvey={};ZSurvey.surveyUrl="undefined"!=typeof Crm?Crm.getCrmBasePath()+"/SurveyConfig.do":"",ZSurvey.relatedListUrl="undefined"!=typeof Crm?Crm.getCrmBasePath()+"/NewRelatedList.do?action=getData&pname=SURVEYPERSONALITY":"",ZSurvey.surveyParams="&zcrmemail=${ZSURVEY.TOEMAIL}",ZSurvey.emailpopup="survey_mailpopup",ZSurvey.detailviewpopup="survey_detailpopup",ZSurvey.userInfo={},ZSurvey.objInfo={},ZSurvey.surveyInfo={};var ZProjects={},ZDesk={};function navigateProjectPersonallity(e,t){var a=1,n=objectUtils.URL(e);if(void 0!==n.getParams().pageno&&(a=n.getParams().pageno),!Crm.userDetails.isRelatedListLyteEnabled)var l=crmRelatedList.EachModuleData;var i={},s="1000000",r="";r=void 0!==n.getParams().sortorder?n.getParams().sortorder:$("#projects_sort").val();var o="",d="",c="",u="",p=detailView.changedBCJson.hidden.cvid;if(Crm.userDetails.isRelatedListLyteEnabled)(i=Lyte.Globals.get("relatedList.projectPersonality")?Lyte.Globals.get("relatedList.projectPersonality"):void 0)&&"PROJECTSPERSONALITY"===i.name&&(o=i.ProjectObj.authMsg,d=i.name.toLowerCase()+"_"+i.listRelationId,c=i.ProjectObj.projectIdList,u=i.listRelationId);else for(key1 in l)if(l.hasOwnProperty(key1)&&(i=l[key1],crmRelatedList.EachModuleData[key1]=i,"PROJECTSPERSONALITY"==i.name)){o=i.ProjectObj.authMsg,d=i.name.toLowerCase()+"_"+i.listRelationId,c=i.ProjectObj.projectIdList,u=i.listRelationId;break}c&&(void 0!==t&&t||(ZProjects.projectsNavigated=!0),Crm.userDetails.isRelatedListLyteEnabled?Lyte.registeredMixins["crm-related-list-utils"].getIntegList(s,u,Lyte.Globals.get("relatedList.entityId"),d,Lyte.Globals.get("relatedList.module"),p||$("#cvid").val(),"",o,a,c,Lyte.Globals.get("relatedList.entityId"),"","","","true",r):getIntegList(s,u,crmRelatedList.EntityId,d,crmRelatedList.Module,p||$("#cvid").val(),"",o,a,c,crmRelatedList.EntityId,"","","","true",r))}function validateProject(e,t,a,n,l,i,s,r){var o=$("#permission"),d=o.length?o.val():"",c=!1,u=$("#contacttabname");if("6401"==d)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.error.portalchanged")),!1;if("6832"==d)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.nopermissiontocreateproj")),!1;if("6504"==d.value)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.error.portalchanged")),!1;if("Accounts"==e){if(!n.length)return renderingUtils.showCustomAlert(I18n.getMsg("crm.field.empty.check",I18n.getMsg("Account name"))),!1;c=!0}if("Contacts"==e){if(void 0===s)return renderingUtils.showCustomAlert(I18n.getMsg("crm.project.nocontactemail",I18n.getMsg(u.val()))),!1;if(void 0!==l||"Create"!==t&&"Associate"!==t)c=!0;else{if("detail"===Lyte.Router.getRouteInstance().routeName){var p=$("[name='ID_PROJECTSPERSONALITY']").val();if(Crm.userDetails.isRelatedListLyteEnabled)var m=Lyte.registeredMixins["crm-related-list-utils"].getPersonalityModuleObj(p)?Lyte.registeredMixins["crm-related-list-utils"].getPersonalityModuleObj(p).ProjectObj:null;else m=crmRelatedList.getPersonalityModuleObj(p)?crmRelatedList.getPersonalityModuleObj(p).ProjectObj:null;if(c=!(m&&!m.projectIdList&&moduleRecordMapping.Accounts.visible&&returnJson.entityMapJson.ACCOUNTID)||ZProjects.showB2CAlert(t,"detail",e,a,i,r),renderingUtils.freezeBackground(),(I=$("#projectB2cAlert")).length)I.show(),I.parent().show();else{var h=$("<div>").attr({id:"projectsPopup",style:"display:none"});$("body").append(h);var g=$("#projectsPopup"),f={name:"div",child:[{name:"div",child:[{name:"form",child:[{name:"div",child:[{name:"div",child:[{name:"div",child:[{name:"text",content:I18n.getMsg("crm.projects.b2c.noaccounterror.new",[moduleRecordMapping.Accounts.singular_label,r])}],attr:{class:"crm-font-regular crm-heading-font-size content aligncenter",style:"font-size:1.9rem;"}}],attr:{class:"crmBaseColor"}}],attr:{class:"popup-model-content noBoxShadow fontsmooth pB0 oH",style:"width: 700px;overflow:hidden"}},{name:"div",child:[{name:"div",child:[{name:"input",child:[],attr:{type:"button",class:"primarybtn",value:I18n.getMsg("crm.yes.proceed"),onclick:"renderingUtils.newcloseFreez('projectB2cAlert');ZProjects.handleB2C('"+t+"','"+e+"','"+a+"','"+i+"')"}},{name:"input",child:[],attr:{name:"cancel",class:"newgraybtn",type:"button",value:I18n.getMsg("crm.button.cancel"),onclick:"renderingUtils.newcloseFreez('projectB2cAlert');Crm.trackSpotLightAction('Projects Integration- B2C Popup Cancel');"}}],attr:{class:"aligncenter"}}],attr:{class:"popup-model-footer pB30"}}],attr:{}}],attr:{id:"",class:"zcrm-content"}}],attr:{id:"projectB2cAlert",class:"zcrm-modal zcrm-effect zcrm-show",style:"display: block;"}};g.append(renderingUtils.createHTML(f)),g.show()}return!1}var v=document.getElementsByTagName("crm-zprojects-rl")[0].component,y=v?v.getData("projectId"):"",C=moduleRecordMapping[e].fields,b=!1;C.forEach((function(e){"ACCOUNTID"===e.column_name&&(b=!0)})),c=!(!y&&moduleRecordMapping.Accounts.visible&&b)||ZProjects.showB2CAlert(t,"canvas",e,a,i,r)}}else{if(void 0===l&&("Create"===t||"Associate"===t)){p=$("[name='ID_PROJECTSPERSONALITY']").val();if(Crm.userDetails.isRelatedListLyteEnabled)m=Lyte.registeredMixins["crm-related-list-utils"].getPersonalityModuleObj(p)?Lyte.registeredMixins["crm-related-list-utils"].getPersonalityModuleObj(p).ProjectObj:null;else m=crmRelatedList.getPersonalityModuleObj(p)?crmRelatedList.getPersonalityModuleObj(p).ProjectObj:null;m&&!m.projectIdList&&moduleRecordMapping.Accounts.visible&&returnJson.entityMapJson.ACCOUNTID?void 0!==i&&(c=ZProjects.showB2CAlert(t,"detail",e,a,i,r)):c=!0,renderingUtils.freezeBackground();var I=$("#projectB2cAlert"),F=$("#projectB2cAlertWithoutContact");I.length?I.remove():F.length&&F.remove();h=$("<div>").attr({id:"projectsPopup",style:"display:none"});$("body").append(h);g=$("#projectsPopup"),f="";return f=void 0===i?{name:"div",child:[{name:"div",child:[{name:"form",child:[{name:"div",child:[{name:"div",child:[{name:"div",child:[{name:"text",content:I18n.getMsg("crm.salesnavigator.empty",[moduleRecordMapping.Accounts.singular_label,moduleRecordMapping.Contacts.singular_label,moduleRecordMapping[e].singular_label])}],attr:{class:"crm-font-regular crm-heading-font-size content aligncenter",style:"font-size:1.9rem;"}}],attr:{class:"crmBaseColor"}}],attr:{class:"popup-model-content noBoxShadow fontsmooth pB0 oH",style:"width: 700px;overflow:hidden"}},{name:"div",child:[{name:"div",child:[{name:"input",child:[],attr:{name:"cancel",class:"primarybtn",type:"button",value:I18n.getMsg("crm.button.ok"),onclick:"renderingUtils.newcloseFreez('projectB2cAlertWithoutContact');Crm.trackSpotLightAction('Projects Integration- B2C Popup Cancel');"}}],attr:{class:"aligncenter"}}],attr:{class:"popup-model-footer pB30"}}],attr:{}}],attr:{id:"",class:"zcrm-content"}}],attr:{id:"projectB2cAlertWithoutContact",class:"zcrm-modal zcrm-effect zcrm-show",style:"display: block;"}}:{name:"div",child:[{name:"div",child:[{name:"form",child:[{name:"div",child:[{name:"div",child:[{name:"div",child:[{name:"text",content:I18n.getMsg("crm.projects.b2c.noaccounterror.new",[moduleRecordMapping.Accounts.singular_label,r])}],attr:{class:"crm-font-regular crm-heading-font-size content aligncenter",style:"font-size:1.9rem;"}}],attr:{class:"crmBaseColor"}}],attr:{class:"popup-model-content noBoxShadow fontsmooth pB0 oH",style:"width: 700px;overflow:hidden"}},{name:"div",child:[{name:"div",child:[{name:"input",child:[],attr:{type:"button",class:"primarybtn",value:I18n.getMsg("crm.yes.proceed"),onclick:"renderingUtils.newcloseFreez('projectB2cAlert');ZProjects.handleB2C('"+t+"','"+e+"','"+a+"','"+i+"')"}},{name:"input",child:[],attr:{name:"cancel",class:"newgraybtn",type:"button",value:I18n.getMsg("crm.button.cancel"),onclick:"renderingUtils.newcloseFreez('projectB2cAlert');Crm.trackSpotLightAction('Projects Integration- B2C Popup Cancel');"}}],attr:{class:"aligncenter"}}],attr:{class:"popup-model-footer pB30"}}],attr:{}}],attr:{id:"",class:"zcrm-content"}}],attr:{id:"projectB2cAlert",class:"zcrm-modal zcrm-effect zcrm-show",style:"display: block;"}},g.append(renderingUtils.createHTML(f)),g.show(),!1}c=!0}return c}function projectProcess(e){var t=$("#projectlist");if(t.length){var a=document.getElementById("projectlist");$(a).empty(),a.innerHTML='<crm-zprojects-rl entity_id="'+e.accountid+"\" module='"+ZSEC.Encoder.encodeForHTML(e.module)+"' related_list_id=\""+e.listrelationid+'"></crm-zprojects-rl>',EvalInnerScript(t),"6401"!=(n=$("#permission").val())&&"6001"!=n&&"6000"!=n||($("#newproject").hide(),$("#projects_sort").parent().hide())}else{var n,l=$('[name="ID_PROJECTSPERSONALITY"]').val();(a=document.getElementById(l))&&($(a).empty(),a.innerHTML='<crm-zprojects-rl entity_id="'+e.accountid+"\" module='"+ZSEC.Encoder.encodeForHTML(e.module)+"' related_list_id=\""+e.listrelationid+'"no_permission="'+e.nopermission+'"></crm-zprojects-rl>'),EvalInnerScript($("#"+l)),"6401"!=(n=$("#permission").val())&&"6001"!=n&&"6000"!=n||($("#ract_"+l).hide(),$("#projects_sort").parent().hide())}}function resizeIframe(){$("#tabLayer");var e=renderingUtils.tabLayerTop()+renderingUtils.tabLayerOuterHeight()+30;$("#externalIframe").css("height","calc(100vh - "+e+"px)")}function getFrameTargetElement(e){var t=e.contentWindow;return null==window.pageYOffset&&(t=t.document.documentElement?t.document.documentElement:t=document.body),t}function hideProjectDiv(){showCallCancel();var e=$("#projectSave"),t=$("#projectClose");e.length&&t.length&&(t.hide(),e.hide())}function showProjectDiv(){hideCallCancel();var e=$("#projectSave"),t=$("#projectClose");e.length&&t.length&&(t.show(),e.show())}function hideCallCancel(){$("#callCancel").hide()}function showCallCancel(){var e=$("#callCancel");e.length&&e.css({display:"table-cell"})}function hideSyncBtn(){var e=$L(".projectsTaskSyncBtn");e&&e.hide()}function isProjectAvailable(e,t,a,n,l){var i=$("#Crm_Tasks_SEID");if($("#projectSave").length&&$("#projectClose").length&&$("#modname").length&&"Leads"!=$("#leContModSel").val()&&0!=$("#leContModName").val().length){t=$('[name="property(modsel)"]').val();var s=$('[name="property(modid)"]').val();s||(s=Crm.userDetails.isRelatedListLyteEnabled?Lyte.Globals.get("relatedList.entityId")?Lyte.Globals.get("relatedList.entityId"):null:crmRelatedList?crmRelatedList.EntityId:null);var r=$('[name="property(leContModId)"]').val();void 0!==r&&r.length>0&&(t="Contacts",s=r);var o="/crm/v2/"+t+"/"+s+"/Zoho_Projects/client",d={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};(new crmRequestPool).initiate({action:o,type:"GET",headers:d,success:function(e){void 0!==e&&e.data&&"PROJECTS_AVAILABLE"==e.data.code&&e.data.client_projects[0].length>0?showProjectDiv():hideProjectDiv()}})}else{if(!i.length)return!1;o="/crm/v2/Tasks/"+l+"/Zoho_Projects?changedModule="+t,d={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};(new crmRequestPool).initiate({action:o,type:"GET",headers:d,success:function(e){if(e.data&&0==e.data.allow_module_change){renderingUtils.freezeBackground();var t=$("#projectTaskAlertDiv");if(t.length)t.show();else{var a=$("#Crm_Tasks_SEID_label"),n={name:"div",child:[{name:"div",child:[{name:"form",child:[{name:"div",child:[{name:"div",child:[{name:"div",child:[{name:"text",content:I18n.getMsg("crm.project.sync.dissociate")}],attr:{class:"crm-font-regular crm-heading-font-size content aligncenter",style:"font-size:1.9rem;"}}],attr:{class:"crmBaseColor"}}],attr:{class:"popup-model-content noBoxShadow pB0 oH",style:"width: 700px;overflow:hidden"}},{name:"div",child:[{name:"div",child:[{name:"input",child:[],attr:{type:"button",class:"primarybtn",value:I18n.getMsg("crm.confirm.deassociate"),onclick:"renderingUtils.newcloseFreez('projectTaskAlertDiv');ZProjects.handleTaskProjectSync(true)"}},{name:"input",child:[],attr:{name:"cancel",class:"newgraybtn",type:"button",value:I18n.getMsg("crm.button.cancel"),onclick:"renderingUtils.newcloseFreez('projectTaskAlertDiv');ZProjects.handleTaskProjectSync(false)"}}],attr:{class:"aligncenter"}}],attr:{class:"popup-model-footer pB30"}}],attr:{}}],attr:{id:"",class:"zcrm-content"}}],attr:{id:"projectTaskAlertDiv",class:"zcrm-modal zcrm-effect zcrm-show",style:"display: block;"}};a.append(renderingUtils.createHTML(n))}}},error:function(){commonUtils.showHideLoadingDiv()}})}}ZProjects.projectsNavigated=!1,ZProjects.errorProject=void 0,ZProjects.callProjectsAPI=function(e,t,a,n,l){var i;commonUtils.showHideLoadingDiv("show");var s={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken,Accept:"application/json","Content-type":"application/json; charset=utf-8"};(new crmRequestPool).initiate({action:t,type:e,headers:s,data:a,success:function(e){i=e,Lyte.registeredMixins["crm-utilities"].executeFunctionByName(n,window,l,e)},error:function(e){ZProjects.onFailureCallBack(e),n&&"ProjectsHome.setUsers"===n&&ProjectsHome.cancelCreateEditProjects()},complete:function(){if(commonUtils.showHideLoadingDiv(),void 0!==l&&l instanceof jQuery&&l.prop("disabled",!1),void 0!==n&&"ProjectsHome.setUsers"==n){var e=$("#newproject");e.attr("disabled",!1),i&&"PORTAL_OWNER_CHANGED"===i.code&&e.attr("disabled",!0)}}})},ZProjects.renderNewCrudComponent=function(e){var t=networkUtils.returnDependencyFiles(["integration/crm-zprojects-crud.js","integration/crm-zprojectsrl-store.js"],ResourceConstants.CRMClient),a=networkUtils.returnDependencyFiles(["integration/crm-zprojects-crud.css"],ResourceConstants.CRMClient);if(a=a.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("projectscrud")],ResourceConstants.CRM)),Crm.userDetails.RTL_ENABLED)var n=networkUtils.returnDependencyFiles(["integration/crm-zprojects-crud-rtl.css"],ResourceConstants.CRMClient),l=t.concat(a).concat(n);else l=t.concat(a);Lyte.injectResources(l,void 0,(function(){var t=$("<div>").attr({id:"projectsPopup"}),a=$("#projectsPopup");0===a.length&&$("body").append(t),a.empty();var n={};n.projects_data=e,Lyte.Component.render("crm-projects-crud",n,"#projectsPopup")}))},ZProjects.closeIframePopUp=function(){renderingUtils.newcloseFreez("freezeIframe"),$("#Iframe").attr("src",""),$("#detailViewzdiv").empty()},ZProjects.onFailureCallBack=function(e){if(e.code&&(500==e.code||400==e.code)||e.status&&(500==e.status||400==e.status)){var t=e.responseJSON;if(t){var a=t.details;if(a&&0!==Object.keys(a).length)return crmui.showMsgBand("error",I18n.getMsg("crm.zdesk.msg.errportal"),3e3,""),!1;crmui.showMsgBand("error",I18n.getMsg("crm.livedesk.error.exp.msg"),3e3,"")}}return!1},ZProjects.showUsrErrPopUp=function(){var e=document.getElementsByTagName("crm-projects-crud");e&&e[0].component.setData("unableToAdd",!0)},ZProjects.getPersonalityId=function(e){var t=new RegExp("("+e+"_[0-9]+)","g");if("detail"===Lyte.Router.getRouteInstance().routeName){if(Crm.userDetails.isRelatedListLyteEnabled){var a=store.peekAll("related_list").filterBy({personality_name:e.toUpperCase()})[0];if(a)return e+"_"+a.id}else{var n=crmRelatedList.personalityArr.match(t);if(n)return n[0]}return null}return e},ZProjects.getCreateDescResponse=function(e){var t=document.getElementById("proj_desc_response").contentWindow.document;t.designMode="On",t.open(),t.write(e),t.close(),$('[name="proj_desc_response"]').contents().find("html").css({"font-family":"var(--crm-font-regular)","font-size":14,color:"#666"})},ZProjects.sortProjectColumn=function(e){var t=document.getElementsByTagName("crm-zprojects-rl");if(t&&t.length>0){var a=$('[name="ID_PROJECTSPERSONALITY"]').val(),n=t[0].component;e="active"===e||"archived"===e?e:"active",n.setData("sortOrder",e),n.setData("pageNo",1);var l=n.setProjRLQueryParams(e);n.projectRelApi(l);var i=store.peekAll("zproject_rl").filter((function(t){if(t.ProjectStatus===e)return t})).length;0!=i?$("#newleft_"+a).find("span.numCountn").addClass("numCountVal").text(i):$("#newleft_"+a).find("span.numCountn").removeClass("numCountVal").text(" ")}},ZProjects.redirectToProjUpd=function(){"undefined"!=typeof Storage&&(sessionStorage.projUpd="Yes",location.href=networkUtils.getOrgSpecificURL(Crm.getCrmBasePath()+"/settings/extensions/zoho/projects"))},ZProjects.showIframe=function(e){var t=$("#canvasPopupDiv"),a=$("#tabLayer").outerWidth(),n=renderingUtils.tabLayerTop()+60;if(!t.length){var l=a-30,i=window.innerHeight-n+"px";a=l+"px";renderingUtils.freezeBackground(),$("#freezeIframe").css({height:i,width:a,left:"15px",right:"15px",display:"block",position:"fixed",zIndex:"1000",top:"15px"}),$("#"+e).css({color:"var(--baseColor)"}),ZProjects.uncolor(e)}},ZProjects.showProgressFrame=function(){var e=$("#progressIframe"),t=renderingUtils.tabLayerTop()+renderingUtils.tabLayerOuterHeight()+5;$("#zProjFreezeLayer").removeClass("dN"),e.css({height:"80vh",width:"85vw","box-sizing":"border-box",left:"50%",transform:"translateX(-50%)",display:"block",position:"fixed","z-index":"33",top:t})},ZProjects.closeProgressframe=function(){$("#zProjFreezeLayer").add(".zProjCloseframeOuter").addClass("dN"),$("#detailViewzdiv").empty(),$("#progressIframe").hide()},ZProjects.loadProgressFrame=function(e,t){commonUtils.showHideLoadingDiv(!0);var a=Crm.getCrmBasePath()+"/ProjectConfig.do?event=loadIframe&projectId="+e+"&tab="+t;(new crmRequestPool).initiate({action:a,type:"POST",success:function(e){var t=$("#tabLayer").outerWidth()-30,a=renderingUtils.tabLayerTop()+60,n=window.innerHeight-a+"px",l=$("#canvasPopupDiv"),i={};i.iframeurl=e,i.iframeheight=n,i.completion=!0,l.length&&l.empty(),Lyte.Component.render("crm-zprojects-iframe",i,l.length?"#canvasPopupDiv":"#detailViewzdiv"),$("#freezeIframe").css({height:n,width:t+"px",display:"block",position:"fixed",zIndex:"21",top:"15px",left:"15px",right:"15px"})}})},ZProjects.loadIframe=function(e,t,a,n){var l;switch(commonUtils.showHideLoadingDiv(!0),t){case"mile":l="milestonediv";break;case"task":l="taskdiv";break;case"bug":l="bugsdiv"}var i=Crm.getCrmBasePath()+"/ProjectConfig.do?event=loadIframe&projectId="+e+"&tab="+t;(new crmRequestPool).initiate({action:i,type:"POST",success:function(e){var t=$("#tabLayer"),i=renderingUtils.tabLayerTop()+60,s=t.outerWidth()-30,r=window.innerHeight-i-45+"px",o=i+50,d=(window.innerHeight,s+"px"),c=$("#canvasPopupDiv"),u={};u.iframeurl=e,u.iframeheight=r,u.tabName=n,c.length&&c.empty(),Lyte.Component.render("crm-zprojects-iframe",u,c.length?"#canvasPopupDiv":"#detailViewzdiv"),$("#freezeIframe").css({height:"calc(100vh - "+i+"px)",width:d,left:"15px",right:"15px",display:"block",position:"fixed",zIndex:"21",top:"15px",bottom:"0"}),$L("#"+l).addClass("crmBaseColor"),commonUtils.showHideLoadingDiv(),$("#projNameSet").empty(),document.getElementById("projNameSet").innerHTML="<< "+$ESAPI.encoder().encodeForHTML(a),renderingUtils.freezeBackground()}})},ZProjects.changeUrl=function(e,t){var a=$("#canvasPopupDiv"),n=$("#Iframe"),l=null;a.length&&(l=document.querySelector("crm-zprojects-iframe"));var i=n.attr("src"),s=i.indexOf("Page=")+5,r=i.indexOf("&projId"),o=i.substring(0,s)+e+i.substring(r);a.length?l.component.setData("iframeurl",o):n.attr("src",o),$("#"+t).css({color:"var(--baseColor)"}),ZProjects.uncolor(t)},ZProjects.uncolor=function(e){"taskdiv"!=e&&$("#taskdiv").css({color:"#8b9ab9"}),"milestonediv"!=e&&$("#milestonediv").css({color:"#8b9ab9"}),"bugsdiv"!=e&&$("#bugsdiv").css({color:"#8b9ab9"})},ZProjects.showDeleteProjPopup=function(e,t){if(!(Crm&&Crm.userDetails&&Crm.userDetails.permissions)||Crm.userDetails.permissions.Crm_Implied_Delete_Projects){if(Crm.userDetails.isRelatedListLyteEnabled)var a=Lyte.Globals.get("relatedList.module")?Lyte.Globals.get("relatedList.module"):t;else a="undefined"!=typeof crmRelatedList&&""!=crmRelatedList.Module?crmRelatedList.Module:t;var n=moduleRecordMapping[a].singular_label,l=I18n.getMsg("crm.project.remove.warning",[I18n.getMsg(n),Crm.brandName]);showDeletePopup(I18n.getMsg(l),I18n.getMsg("crm.label.yes"),"","",$("#proj_del_icon_"+e))}else renderingUtils.showCustomAlert(I18n.getMsg("crm.projects.permissions.user.no.crmpermission"))},ZProjects.delProject=function(e,t,a,n,l,i,s){if(validateProject(a,"Delete",e,n,l,i,s)){hideAnimatePopup("deletepopup"),commonUtils.showHideLoadingDiv(!0);var r=store.peekRecord("zproject_rl",t);r.$.destroyRecord({moduleName:a,entity_id:e},{ids:t}).then((function(e){"PROJECT_DELETED"===e.data[0].code&&(commonUtils.showHideLoadingDiv(),renderingUtils.showMsgBox(I18n.getMsg("crm.custom.module.delete.success",I18n.getMsg("Project")),"success"),$("#canvasPopupDiv").length||$L("crm-zprojects-rl")[0].component.encryptProjIdApi())}),(function(){commonUtils.showHideLoadingDiv(),r&&r.$.rollBack(),renderingUtils.showMsgBox(I18n.getMsg("crm.translation.error.history"),"error")}))}},ZProjects.redirectToRelatedListPage=function(e,t,a,n){var l=Crm.getCrmBasePath()+"/ShowEntityInfo.do?id="+e+"&module="+t+"&cvid="+a+"&recordNum=1&returnAnchor="+n;commonUtils.showHideLoadingDiv("show"),(new crmRequestPool).initiate({action:l,type:"POST",success:function(e){commonUtils.showHideLoadingDiv();var t=document.getElementById("show");t.innerHTML=e,JSEvalScript(t),init(),Lyte.triggerEvent("relatedList",{module:Crm.isActivitySplitDone?"Tasks":"Activities"});var a=$("#projects_sort");a.length&&thirdPartyUtils.bindSelect2(a)},error:function(){commonUtils.showHideLoadingDiv()}})},ZProjects.showB2CAlert=function(e,t,a,n,l,i){renderingUtils.freezeBackground();var s=$("#projectsPopup");if(t&&"canvas"!==t&&0===s.length){var r=$("<div>").attr({id:"projectsPopup",style:"display:none"});$("body").append(r)}var o=t&&"canvas"===t?$("#canvasPopupDiv"):s;o.empty();var d={name:"div",child:[{name:"div",child:[{name:"form",child:[{name:"div",child:[{name:"div",child:[{name:"div",child:[{name:"text",content:I18n.getMsg("crm.projects.b2c.noaccounterror.new",[moduleRecordMapping.Accounts.singular_label,i])}],attr:{class:"crm-font-regular crm-heading-font-size content aligncenter",style:"font-size: 19px;"}}],attr:{class:"crmBaseColor"}}],attr:{class:"popup-model-content noBoxShadow fontsmooth pB0 oH",style:"width: 700px;overflow:hidden"}},{name:"div",child:[{name:"div",child:[{name:"input",child:[],attr:{type:"button",class:"primarybtn",value:I18n.getMsg("crm.yes.proceed"),onclick:"renderingUtils.newcloseFreez('projectB2cAlert');ZProjects.handleB2C('"+e+"','"+a+"','"+n+"','"+l+"')"}},{name:"input",child:[],attr:{name:"cancel",class:"newgraybtn",type:"button",value:I18n.getMsg("crm.button.cancel"),onclick:"renderingUtils.newcloseFreez('projectB2cAlert');Crm.trackSpotLightAction('Projects Integration- B2C Popup Cancel');"}}],attr:{class:"aligncenter"}}],attr:{class:"popup-model-footer pB30"}}],attr:{}}],attr:{id:"",class:"zcrm-content"}}],attr:{id:"projectB2cAlert",class:"zcrm-modal zcrm-effect zcrm-show",style:"display: block;"}};return o.append(renderingUtils.createHTML(d)),o.show(),!1},ZProjects.showProjectTaskSyncModel=function(e){var t=[],a=networkUtils.returnDependencyFiles(["crm-zprojects-sync-task.js","crm-project-sync-task.js"],ResourceConstants.CRMClient),n=networkUtils.returnDependencyFiles(["crm-zprojects-sync-task.css"],ResourceConstants.CRMClient);t=t.concat(a.concat(n)),Lyte.injectResources(t,void 0,(function(){var t={},a=Lyte.Router.getRouteInstance().parent.getDynamicParam(),n=store.peekRecord("crm-project-sync-task",a);if(n){t.client_name=n.client_name,t.task_name=n.task_name,t.clientcompany_id=n.clientcompany_id,t.clientuser_id=n.clientuser_id,t.firstSelectedProjectId=n.firstSelectedProject,t.module=n.module,t.isB2C=n.isB2C,t.relatedEntityId=n.relatedEntityID,n.hasOwnProperty("is_strict_project")&&n.is_strict_project?(t.is_strict_project=n.is_strict_project,t.start_date=new CrmDate(crmCalendar.getDateObjectFromGivenDateString(n.project_start_date)).getDateInUserPattern(),t.end_date=new CrmDate(crmCalendar.getDateObjectFromGivenDateString(n.project_end_date)).getDateInUserPattern()):t.is_strict_project=!1;var l=e?$L("#select2-Crm_Tasks_PRIORITY-container").text():$L("#subvalue_PRIORITY").text();l=detailView.mapProjectPriority(l),t.prioritySelected=l;var i=e?$L("#Crm_Tasks_DUEDATE").val():$L("#subvalue_DUEDATE").text();i&&(t.due_date=new CrmDate(crmCalendar.getDateObjectFromGivenDateString(i)).getDateInUserPattern()),t.isEdit=!!e,e?(Lyte.Component.render("crm-projects-list",t,"#editProjectSync"),Crm.trackSpotLightAction("Add To Projects in Edit View",{Module:"editTaskSync"})):(Lyte.Component.render("crm-projects-list",t,"#projectTaskSync"),Crm.trackSpotLightAction("Add To Projects in Detail View",{Module:"TaskSync"})),document.getElementById("modalId").ltProp("show",!0)}}))},ZProjects.initProjectsIframe=function(){resizeIframe(),getFrameTargetElement(document.getElementById("externalIframe")).onscroll=function(){resizeIframe()},$L(window).scrollTo(0,0)},ZDesk.resizeDeskIframe=function(){var e=$("#mainMenuTabDiv"),t=e.offset().top,a=e.outerHeight(),n=renderingUtils.windowHeight-(t+a);jQuery("#externalIframe").css("height",n)},ZProjects.changeAccountLookup=function(e){var t=detailView.entityId;t||(t=window.Tasks.entityId);var a=e.value,n=$("#Crm_Tasks_CONTACTID_WhoId_select").val();"Contacts"!==n&&(a=n);var l=$("#Crm_Tasks_SEID_label_select").attr("data-lookup-module");"Accounts"!==a&&"Contacts"!==a&&"Potentials"!==a&&hideSyncBtn(),("Accounts"===a||"Potentials"===a&&""===$("#Crm_Tasks_SEID").val())&&hideSyncBtn(),("Accounts"==l&&"Accounts"==a||"Potentials"==l&&"Potentials"==a)&&"Contacts"==n||isProjectAvailable(void 0,a,void 0,void 0,t)},ZProjects.handleTaskProjectSync=function(e){if(1==e){commonUtils.showHideLoadingDiv("show");var t="/crm/v2/Tasks/"+(void 0!==detailView.entityId?detailView.entityId:window.Tasks.entityId)+"/Zoho_Projects",a={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};(new crmRequestPool).initiate({type:"DELETE",url:t,headers:a,complete:function(){commonUtils.showHideLoadingDiv()},error:function(){crmui.showMsgBand("error",I18n.getMsg("crm.livedesk.error.exp.msg"),2e3)}})}else{var n=$("#Crm_Tasks_SEID_label_select"),l=n.val();if(void 0!==l&&"Accounts"!==l){var i=n.attr("data-lookup-module");n.val(i).trigger("change")}var s=$("#Crm_Tasks_CONTACTID_WhoId_select");if("Contacts"!==s.val()){s.val("Contacts").trigger("change");var r=$("#Crm_Tasks_CONTACTID"),o=r.attr("data-old-value"),d=r.attr("data-id");r.val(o),r.addClass("wsNowrap tOE"),r.attr("title",d),r.data("id",d),r.effect("highlight",{},1e3),r.focus()}var c=$("#Crm_Tasks_SEID"),u=c.attr("data-old-value"),p=c.attr("data-id");c.val(u),c.addClass("wsNowrap tOE"),c.attr("title",u),c.data("id",p),c.effect("highlight",{},1e3),c.focus()}},ZProjects.handleB2C=function(e,t,a,n){var l={},i={};void 0===n&&(n=a);var s=$L("crm-zprojects-rl")[0];if(s&&("Products"===t||"Campaigns"===t)){var r=s.component.data.contactArray;!n&&r&&r.length>0&&(n=r[0].value),i.contactsArr=r}i.crm_contact_id=n,i.crm_entity_id=a,i.module=t,i.action=e,l.projects_data=i;var o=networkUtils.returnDependencyFiles(["integration/crm-zprojects-crud.js","integration/crm-zprojectsrl-store.js"],ResourceConstants.CRMClient),d=networkUtils.returnDependencyFiles(["integration/crm-zprojects-crud.css"],ResourceConstants.CRMClient);if(d=d.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("projectscrud")],ResourceConstants.CRM)),Crm.userDetails.RTL_ENABLED)var c=networkUtils.returnDependencyFiles(["integration/crm-zprojects-crud-rtl.css"],ResourceConstants.CRMClient),u=o.concat(d).concat(c);else u=o.concat(d);Lyte.injectResources(u,void 0,(function(){var e=$("<div>").attr({id:"projectsPopup"}),t=$("#projectsPopup");0===t.length&&$("body").append(e),t.empty(),Lyte.Component.render("crm-projects-crud",l,"#projectsPopup")})),Crm.trackSpotLightAction("Projects Integration- B2C Popup Proceed")},ZSurvey.gotoLink=function(e){var t=$(e).attr("href");return openNewTab(t,"template"),!1},ZSurvey.removeSurveyLink=function(e){var t=$(e).parent();t.prev("a").remove(),t.remove()},ZSurvey.editSurveyLink=function(e,t){var a=$(e).parent(),n=a.prev("a"),l=n.attr("data-id");ZSurvey.objInfo.editedObj=n;var i=$("#lookupdiv"),s=$("#emailEditor"),r=s.contents();if(t&&(i=r.find("#zcsurveylinkpop")),i.find("#surveyDetails").length>0)t?"htmlEditor"!==template.editorType?template.Builder.showAnimatePopup("zcsurveylinkpop"):s[0].contentWindow.showAnimatePopup("zcsurveylinkpop"):ZSurvey.showPopup("lookupdiv"),a.remove(),ZSurvey.setSurveyUrl(l,void 0,t),t?(r.find(".surveyField").val(n.text()),r.find("#surveyLinkQuery").focus()):($(".surveyField").val(n.text()),$("#surveyLinkQuery").focus());else{var o={action:"surveyDetails"},d=networkUtils.constructUrl(this.surveyUrl,o);o={},t&&(o.from="editor"),""===(getElemById("module")?getElemById("module").value:"")&&(o.from="sendsurvey"),o[csrfParamName]=csrfToken,(new crmRequestPool).doAjax(d,(function(e){t?(r.find("#zcsurveylinkpop").find(".popup-model-content").html(e),"htmlEditor"!==template.editorType?template.Builder.showAnimatePopup("zcsurveylinkpop"):s[0].contentWindow.showAnimatePopup("zcsurveylinkpop")):($("#lookupdiv").html(e),ZSurvey.showPopup("lookupdiv")),a.remove(),ZSurvey.setSurveyUrl(l,void 0,t),t?(r.find(".surveyField").val(n.text()),r.find("#surveyLinkQuery").focus()):($(".surveyField").val(n.text()),$("#surveyLinkQuery").focus())}),o,(function(e){ZSurvey.errorHandling(e)}))}},ZSurvey.redirectToSurvey=function(){if("undefined"!=typeof Storage){"undefined"==typeof hidecallout&&Crm.userDetails.isNewEditor&&EmailSendingUtil.composeActive?EmailUtil.hidecallout():hidecallout(),sessionStorage.surveySetup="Yes";var e=Crm.getCrmBasePath()+"/ShowSetup.do?tab=webInteg&subTab=zohoApps&appname=survey";networkUtils.openUrl(e,"blank")}ZSurvey.hidecallout(this.emailpopup)},ZSurvey.removeFreezeAndBodyScroll=function(){$(document.body).removeClass("ohide").css({height:""}),window.document.documentElement.style.overflow=""},ZSurvey.cancelPopup=function(e){var t=$L("#surveyResponse");if(t&&t.length>0&&t[0].childNodes.length>0&&"block"===t[0].style.display){crmui.modalZIndex("nonLyte",t[0],"close");var a=document.getElementById("FreezeLayer");a&&document.body.removeChild(a)}ZSurvey.removeFreezeAndBodyScroll(),$L("#"+e).removeClass("br4_bottom_curve").addClass("roundedCornerPop"),Crm.userDetails.isNewEditor&&EmailLaunchUtil.isComposeActive()?EmailUtil.removeCustomFreezeLayer():ZSurvey.removeFreezeAndBodyScroll();var n=$L("#"+e);"lookupdiv"===e&&n.length>0&&n[0].style&&"none"!==n[0].style.display&&crmui.modalZIndex("nonLyte",n[0],"close"),hide(e),ZSurvey.objInfo.editedObj=void 0},ZSurvey.showSurveyLink=function(e,t,a){var n=getElemById("module")?getElemById("module").value:"";t||(t=$("#insertSurvey")),e.contains(n)||"Potentials"===n||"SalesOrders"===n||"Invoices"===n||"Accounts"===n?t.show():a?t.remove():t.hide()},ZSurvey.showSurveyLinkEdit=function(e,t){var a=(e=$(e)).position(),n=$("#emailEditor").contents();if(t&&"htmlEditor"==template.editorType&&(n=n.find("iframe").eq(0).contents()),n.find(".editSurLink").remove(),0===e.next(".editSurLink").length){var l=e.attr("href"),i=e.attr("link");i&&""!=i||(i=e.text());var s={LINK:[l],TEXT:[i],linkTemp:"true"};networkUtils.loadFeatureScripts(["zsurvey_templates.js"],(function(){Handlebars.registerPartial("zsurveytemplate",Handlebars.templates.zsurveytemplate);var n=Handlebars.templates.zsurveytemplate(s),l=$(n).css({left:a.left,top:a.top+18});e.after(l),t&&("htmlEditor"==template.editorType?($(l).find(".chngLink").removeAttr("onclick").attr("onclick","parent.sE(event);parent.parent.ZSurvey.editSurveyLink(this,true)"),$(l).find(".prvwLink").removeAttr("onclick").attr("onclick","parent.sE(event);parent.parent.ZSurvey.gotoLink(this);return false;"),$(l).find(".rmvLink").removeAttr("onclick").attr("onclick","parent.sE(event);parent.parent.ZSurvey.removeSurveyLink(this)")):$(l).find(".chngLink").removeAttr("onclick").attr("onclick","parent.sE(event);parent.ZSurvey.editSurveyLink(this,true)"))}))}},ZSurvey.freezeBackAndRemoveScrollNotop=function(){var e=document.createElement("DIV");e.id="FreezeLayer",e.className="freezeLayer",$(e).css({width:renderingUtils.windowWidth,height:renderingUtils.windowHeight}).appendTo("body")},ZSurvey.viewResponse=function(e){var t=ZSurvey.constructUrl(e,ZSurvey.surveyUrl);(new crmRequestPool).doAjax(t,(function(e){var t=$("#surveyResponse"),a=renderingUtils.windowHeight-100;document.documentElement.scrollTop||document.body.scrollTop;ZSurvey.freezeBackAndRemoveScrollNotop(),t.attr({class:"zSurveyResponseDiv",style:""}),t.css({display:"block",width:"810px",height:a-100}),t.html(e)}),"",(function(e){ZSurvey.errorHandling(e)}))},ZSurvey.hidecallout=function(e){var t=this.surveyUrl;t=t+"?action=hidecallout&fname="+e,(new crmRequestPool).doAjax(t,(function(){}),Territory.csrf(),(function(e){ZSurvey.errorHandling(e)}))},ZSurvey.constructUrl=function(e,t){var a=$(e).attr("data-params");return a=JSON.parse(a),networkUtils.constructUrl(t,a)},ZSurvey.showSurveyDetails=function(e,t,a,n,l){networkUtils.loadFeatureScripts(["zsurvey_home-min.js"],(function(){var i=Crm.userDetails.isNewEditor,s=ZSurvey.constructUrl(e,ZSurvey.surveyUrl);if(t||(t="lookupdiv"),!ZSurvey.checkForEmail($(e).attr("data-params"))){var r=i?$("#moduleName_"+EmailComposeUtil.CURRENT_TAB).val():$("#moduleName").val();if(-1==s.indexOf("module")&&(null!=r&&null!=r||1==a&&null!=(r=$("#module").val())&&null!=r)&&(s=s+"&module="+r),null==a&&"Potentials"==r){var o=i?$("#ecEntityId_"+EmailComposeUtil.CURRENT_TAB).val():$("#ecEntityId").val();o||(s=s+"&entIdForZMail="+o)}(new crmRequestPool).doAjax(s,(function(e){var i=$("#emailEditor").contents(),s=i.find("#"+t),r=s.find(".popup-model-content");if(a){i.find("#zcsurveylinkpop").find(".popup-model-content").html(""),i.find("#zp_ZohoSurveytab").html(""),i.find("#zp_edtSurveyButton").html(""),n?(s.html(e).show(),l&&ZSurvey.setSurveyUrl(l,void 0,!0)):(r.html(e),JSEvalScript(r[0]),template.Builder.showAnimatePopup(t));var o=i.find("#zcsurveycommonpopup"),d=i.find("#assign_Unrelatedsurvey"),c=i.find("#error_Unrelatedsurvey"),u=d.outerHTML(),p=c.outerHTML();d.remove(),c.remove(),o.html(u),o.append(p)}else if(!e.hasOwnProperty("id")||"crm.zsurvey.no.survey.communication"!==e.id&&"crm.zsurvey.no.survey.email.communication"!==e.id&&"crm.record.lock.survey"!==e.id){var m=$("#"+t);m.removeAttr("style").css({display:"block",position:"absolute",left:"29%",top:"0"}),m.html(e),ZSurvey.showPopup(t)}else if(e.hasOwnProperty("status")&&"error"===e.status&&e.hasOwnProperty("message")){if("crm.record.lock.survey"===e.id)return void _cruxUtils.showCustomAlert({params:{ltPropSecondaryMessage:I18n.getMsg(e.id,[moduleRecordMapping[e.message].plural_label]),ltPropContentAlign:"center"}});renderingUtils.showCustomAlert(I18n.getMsg(e.message))}}),Territory.csrf(),(function(e){ZSurvey.errorHandling(e)}))}}))},ZSurvey.getSurveyIdFromATag=function(e){var t=e.getAttribute("data_id")||e.getAttribute("data-id");return t=(t=t.replace("${ZSURVEY.SURVEYID###","")).replace("}","")},ZSurvey.showPopup=function(e){Crm.userDetails.isNewEditor&&EmailLaunchUtil.isComposeActive()?EmailComposeUtil.showCustomFreezeLayer():ZSurvey.freezeBackAndRemoveScrollNotop();var t="#"+e;$(t).css({position:"absolute",left:"29%",top:"0px"}),getElemById(e).style.display="block",$(getElemById(e)).removeClass("topAlignEmailDetail"),$L(t).removeClass("roundedCornerPop").addClass("br4_bottom_curve"),"lookupdiv"===e?crmui.modalZIndex("nonLyte",$L(t)[0],"open"):"contDetails"===e&&crmui.adjustFreezeLayer()},ZSurvey.errorHandling=function(e){var t=JSON.parse(e.responseText);return"SURVEY_ORG_OAUTHMIGRATION_FAILED"===t.errorCode?(t.admin?renderingUtils.showCustomAlert(I18n.getMsg("crm.zsurvey.surveyinteg.stopped.adminmsg.brandchange",Crm.integrationsAppName.ZOHO_SURVEY),I18n.getMsg("crm.zsurvey.surveyinteg.stopped.brandchange",Crm.integrationsAppName.ZOHO_SURVEY),!1,(function(){var e=Lyte.Router.getURL("crm.settings.section.extensions.zoho-extensions.survey");networkUtils.openUrl("https://"+RebrandLinkUtil.getProperty("CRMURL")+e)}),null,I18n.getMsg("crm.zsurvey.check.config")):renderingUtils.showCustomAlert(I18n.getMsg("crm.zsurvey.surveyinteg.stopped.usermsg.brandchange",Crm.integrationsAppName.ZOHO_SURVEY,Crm.integrationsAppName.ZOHO_SURVEY),I18n.getMsg("crm.zsurvey.surveyinteg.stopped.brandchange",Crm.integrationsAppName.ZOHO_SURVEY)),!1):(getElemById("error")?($("#error").show().removeClass("hide").html(t.message),$("#inputVerify, #emailVerify").removeClass("tickgreen"),$("#surveyKey, #emailId").addClass("errorField"),$("#zSurveyConfigSubmitBtn").add("#zSurveyConfigCancelBtn").prop("disabled",!1).css({cursor:"pointer"})):(t.message.includes("you are not able to connect to the Zoho Survey. please try again in a few minutes")&&Crm.userDetails.isNewEditor&&EmailLaunchUtil.isComposeActive()&&EmailComposeUtil.showCustomFreezeLayer(),renderingUtils.showCustomAlert(t.message)),!1)},ZSurvey.refreshSurveyPersonality=function(e,t){var a=ZSurvey.relatedListUrl+"&module="+e+"&id="+t;(new crmRequestPool).doAjax(a,(function(a){var n;(Crm.userDetails.isRelatedListLyteEnabled?(Lyte.Globals.get("relatedList.module")||Lyte.Globals.set("relatedList.module",e),Lyte.Globals.get("relatedList.entityId")||Lyte.Globals.set("relatedList.entityId",t)):(null!=crmRelatedList.Module&&""!=crmRelatedList.Module||(crmRelatedList.Module=e),null!=crmRelatedList.EntityId&&""!=crmRelatedList.EntityId||(crmRelatedList.EntityId=t)),"canvas"==Lyte.Router.getRouteInstance().routeName||Crm.userDetails.isRelatedListLyteEnabled)?((n=null!=opener?opener.document.getElementsByTagName("crm-zsurvey-rl-label")[0].component:document.getElementsByTagName("crm-zsurvey-rl-label")[0].component).data.module=e,n.data.entity_id=t,n.actions.reload.call(n)):crmRelatedList.load(crmRelatedList.Module,crmRelatedList.EntityId,a)}),"",(function(e){ZSurvey.errorHandling(e)}))},ZSurvey.checkForEmail=function(e){var t=JSON.parse(e);if(t.hasOwnProperty("from")){var a=t.from;if("attendsurvey"===a||"sendsurvey"===a){var n=t.module,l=$("#associatedContEmail");if(t.hasOwnProperty("emailDetails")&&(void 0!==t.emailDetails.rec_email&&t.emailDetails.rec_email.length>0||void 0!==t.emailDetails.rec_semail&&t.emailDetails.rec_semail.length>0))return!1;if(t.hasOwnProperty("emailDetails")){let e="Potentials"===n?I18n.getMsg("crm.zmail.unableto.potentials.sendmail",Crm.moduleInfo[n].translatedSingularLabel):I18n.getMsg("crm.zmail.unableto.sendmail",Crm.moduleInfo[n].translatedSingularLabel);return _cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:e,ltPropContentAlign:"center"}}),!0}if("Potentials"===n&&(0===l.length||""===l.val()||"null"===l.val())||"Potentials"!=n&&""==$("#subvalue_EMAIL").text()&&""==$("#subvalue_ADDN_EMAIL").text())return"Potentials"==n?_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.zmail.unableto.potentials.sendmail",Crm.moduleInfo[n].translatedSingularLabel),ltPropContentAlign:"center"}}):_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:I18n.getMsg("crm.zmail.unableto.sendmail",Crm.moduleInfo[n].translatedSingularLabel),ltPropContentAlign:"center"}}),!0}}return!1},ZSurvey.resetIntroVideoSrc=function(){var e=$("#surveyIntegHowToVideo");e.attr("src",e.attr("src"))},ZSurvey.removeEditLink=function(e,t){var a=$("#emailEditor").contents();t&&"htmlEditor"==template.editorType&&(a=a.find("iframe").eq(0).contents()),a.find(".editSurLink").remove(),a.find(".ze_body").off("click").on("click",(function(){a.find(".editSurLink").remove()}))},ZSurvey.postMessageListener=function(e){e?window.addEventListener("message",ZSurvey.handleListener):window.removeEventListener("message",ZSurvey.handleListener)},ZSurvey.handleListener=function(e){var t;(t=e&&"string"==typeof e.data&&ZSurvey.IsJsonString(e.data)?JSON.parse(e.data):e&&e.data)&&e.origin===window.location.origin&&("zsTemplate"===t?ZSurvey.showLyteSurveyPopup():"zsSurvey"===t.message&&("dragdropEditor"===t.editorType?editorBuilderImpl.insertsurveyLink(t.html):"htmlEditor"===t.editorType&&insertsurveyLink(t.html),ZSurvey.postMessageListener(!1)))},ZSurvey.showLyteSurveyPopup=function(){var e={title:"crm.zsurvey.label.insert.link",showsurveypopup:!0,buttonText:"Insert",module:$L("#module").val(),from:"template",iscomponentmethod:!0,executemethod:"insertText"};ZSurvey.showPopupLyte(["crm-zsurvey-survey-popup.js","crm-zsurvey-popup-dropdown.js","survey-configuration.js","crux-form-component.js"],!0,["zsurvey_home-min.js"],e,"#nTemailEditor",!0)},ZSurvey.showPopupLyte=function(e,t,a,n,l,i){var s=networkUtils.returnDependencyFiles(e,ResourceConstants.CRMClient);t&&(s=s.concat(networkUtils.returnDependencyFiles(a,ResourceConstants.CRM))),s=s.concat(networkUtils.returnDependencyFiles(["crm-zsurvey-survey-popup.css"],ResourceConstants.CRMClient)),i&&(s=s.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("zsurveypopup")],ResourceConstants.CRM))),Lyte.injectResources(s,void 0,(function(){n.title=I18n.getMsg(n.title),n.buttonText=I18n.getMsg(n.buttonText),Lyte.Component.render("crm-zsurvey-survey-popup",n,l),commonUtils.showHideLoadingDiv(!1)}))},ZSurvey.IsJsonString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0};