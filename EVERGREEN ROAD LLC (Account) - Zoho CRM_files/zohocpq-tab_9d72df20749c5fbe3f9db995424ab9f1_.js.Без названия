Lyte.Component.register("crm-cpqconfiguratorslist",{_template:'<template tag-name="crm-cpqconfiguratorslist"> <div class="zCpq_alignInFlex zCpqNavContainer" role="navigation" lt-prop-landmark="true" aria-label="{{getI18n(\'crm.setup.editor.label.submenu\')}}" tabindex="-1" lt-prop-landmark-label=" {{getI18n(\'crm.landmark.nav\',\'crm.setup.editor.label.submenu\')}}"> <lyte-nav id="cpqNavBar" data-zcqa="cpqNavBar" class="zCpq_navbar dBImp" lt-prop-user-value="value" lt-prop-system-value="name" on-item-selected="{{method(&quot;checkEventForTabSelection&quot;)}}" lt-prop-nav-yield="true" lt-prop-items="{{cpqTabs}}"> <template is="registerYield" yield-name="nav"> <template is="for" items="{{cpqTabs}}" item="item" index="index"> <lyte-nav-item data-value="{{item.module_name}}" selected="{{checkSelected(item.module_name,cpqTabSelected)}}" class="crm-font-regular zCpq_navbar_navItem"> <link-to class="zCpq_navbar_linkto dIF" lt-prop-class="zCpq_navbar_link" lt-prop-route="crm.tab.module.index-module" lt-prop-dp="[&quot;{{item.module_name}}&quot;]" lt-prop-td="{&quot;clearselectedIds&quot; : true, &quot;reloadAll&quot; : true }" lt-prop-id="[&quot;{{item.module_name}}&quot;]" data-zcqa="tab_{{item.module_name}}" webtab="false">{{item.plural_label}}</link-to> </lyte-nav-item> </template> <template is="if" value="{{expHandlers(expHandlers(cpqSubTabs,\'!==\',undefined),\'&amp;&amp;\',expHandlers(cpqSubTabs.length,\'!==\',0))}}"><template case="true"> <span class="cpqMenuDivider"></span> <template is="for" items="{{cpqSubTabs}}" item="item" index="index"> <lyte-nav-item data-value="{{item.module_name}}" selected="{{checkSelected(item.module_name,cpqTabSelected)}}" class="crm-font-regular zCpq_navbar_navItem"> <link-to class="zCpq_navbar_linkto dIF" lt-prop-class="zCpq_navbar_link" lt-prop-route="crm.tab.module.index-module" lt-prop-dp="[&quot;{{item.module_name}}&quot;]" lt-prop-td="{&quot;clearselectedIds&quot; : true, &quot;reloadAll&quot; : true }" lt-prop-id="[&quot;{{item.module_name}}&quot;]" data-zcqa="tab_{{item.module_name}}" webtab="false">{{item.plural_label}}</link-to> </lyte-nav-item> </template> </template></template> </template> </lyte-nav> <div class="cpqHelp"> <span data-zcqa="tabhelpicon" id="context-helplink" title="{{getI18n(\'crm.topmenu.help\')}}" onclick="{{action(\'openHelp\',getCpqHelpUrl())}}" class="toplink cP top2 mR15">{{getI18n(\'crm.topmenu.help\')}}</span> </div> </div> <template is="if" value="{{expHandlers(expHandlers(cpqSubTabs,\'!==\',undefined),\'&amp;&amp;\',expHandlers(cpqSubTabs.length,\'!==\',0))}}"><template case="true"> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[]}},default:{}}],_observedAttributes:["cpqTabs","cpqSubTabs","isAdmin","manageCPQ","isManageCpqUser"],data:function(){return{cpqTabs:Lyte.attr("array"),cpqSubTabs:Lyte.attr("array"),isAdmin:Lyte.attr("boolean",{default:Crm.userDetails.IS_ADMIN}),manageCPQ:Lyte.attr("string",{default:Lyte.Component.registeredHelpers.getI18n("crm.setup.system.managecpq1")}),isManageCpqUser:Lyte.attr("boolean",{default:!1})}},init:function(){(this.data.isAdmin||Crm.userDetails.permissions.Crm_Implied_Manage_CPQ)&&this.setData("isManageCpqUser",!0)},didConnect:function(){if("crm.setup.system.managecpq1"===(e=this.getData("manageCPQ"))&&this.setData("manageCPQ","Manage CPQ"),"Administrator"!==Crm.userDetails.PROFILE_NAME){for(var e=[],t=Lyte.deepCopyObject(this.getData("cpqTabs")),a=t.length,i=0;i<a;i++)"Settings"!==t[i].name&&e.push(t[i]);this.setData("cpqTabs",[]),this.setData("cpqTabs",e)}},methods:{checkEventForTabSelection:function(e){(event.ctrlKey||event.metaKey)&&(e.removeAttribute("selected"),this.$node.querySelector("[data-value='"+this.data.cpqTabSelected+"']").setAttribute("selected",!0))}},actions:{}},{mixins:["crm-open-help"]});
