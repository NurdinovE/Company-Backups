Lyte.Component.register("crm-social-post-detail",{_template:'<template tag-name="crm-social-post-detail"> <div class="socViewConvoParent parentPost infoDiv socProfileId_{{user.id}} socPostId_{{id}}" post_id="{{id}}" parent_post_id="{{id}}" account_id="{{account.id}}" network="{{network}}" profile_id="{{user.id}}" brand_id="{{brand.id}}" onscroll="{{action(\'scrollShadow\',this,\'socViewConvoHeader\')}}"> <div class="socViewConvChild"></div> <div class="socInteractionsLists"> <div class="socInteractionPhoto soc{{network}}SmallIcon pR dIB vaM" data-zcqa="social_tab_open_usr_link" onclick="{{action(\'openUserLink\',network,user.link)}}"> <img class="socInteractPhotoImg" src="{{user.image}}" alt="Image"> </div> <div class="socInteractionDet dIB vaM"> <div class="clearFix"> <span class="w80_per crmLinkColor dIB" data-zcqa="social_tab_open_usr_link" onclick="{{action(\'openUserLink\',network,user.link)}}"> <span class="socViewConvoName ellipsistext {{if(user.screen_name,\'socViewConvoScName\',\'\')}}">{{user.name}}</span> <template is="if" value="{{user.screen_name}}"><template case="true"><span class="dIB vaM crmLabelColor crm-small-font-size mL5">@{{user.screen_name}}</span></template></template> </span> <span class="fR"> <span class="crmLabelColor crm-small-font-size vaM" data-zcqa="social_tab_open_usr_link" onclick="{{action(\'openUserLink\',network,link)}}">{{parseDate(created_at)}}</span> <template is="if" value="{{ifEquals(account.info.id,user.id)}}"><template case="true"> <template is="if" value="{{if_lt_len(perm,2)}}"><template case="true"> <span class="zcrm_svgIcons socDeleteIcon socFbDeletePost mL10 dIB vaM" data-zcqa="social_tab_del_comment_confirm" onclick="{{action(\'confirmDelComment\',this,network,id)}}"></span> </template></template> </template></template> </span> </div> </div> <div class="socViewConvPre crm-small-font-size lh20 mT15"> <template is="if" value="{{message}}"><template case="true"> <pre class="socPreTag">{{unescape(message)}}</pre> </template></template> </div> <crm-social-tab-attachment-process type="{{type}}" attachments="{{attachments}}" link="{{link}}"></crm-social-tab-attachment-process> <div class="socPostsActions mT15"> <template is="if" value="{{ifEquals(network,\'twitter\')}}"><template case="true"> <template is="if" value="{{if_lt_len(perm,3)}}"><template case="true"> <span class="socialImg socReplyIcon dIB vaM mR15 cP" data-zcqa="social_tab_focus_reply" onclick="{{action(\'focusToReply\')}}"></span> <span id="{{id}}_retweet_btn" data-zcqa="social_tab_retweet" account_id="{{account.id}}" class="socRetweetSpan dIB mR15 cP" onclick="{{action(\'retweet\',this,retweets.has_retweeted)}}"> <span class="socialImg socRetweetIcon dIB vaM {{if(retweets.has_retweeted,\'socReTwtIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{retweets.total_count}}</span> </span> <span id="{{id}}_like_btn" data-zcqa="social_tab_like" account_id="{{account.id}}" class="socFavSpan dIB mR15 cP" onclick="{{action(\'like\',this,likes.has_liked)}}"> <span class="socialImg socFavIcon dIB vaM {{if(likes.has_liked,\'socFavIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{likes.total_count}}</span> </span> </template><template case="false"> <span id="{{id}}_retweet_btn" data-zcqa="social_tab_retweet" account_id="{{account.id}}" class="socRetweetSpan dIB mR15" onclick="{{action(\'stopEvent\')}}"> <span class="socialImg eventNone socRetweetIcon dIB vaM {{if(retweets.has_retweeted,\'socReTwtIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{retweets.total_count}}</span> </span> <span id="{{id}}_like_btn" data-zcqa="social_tab_like" account_id="{{account.id}}" class="socFavSpan dIB mR15" onclick="{{action(\'stopEvent\')}}"> <span class="socialImg eventNone socFavIcon dIB vaM {{if(likes.has_liked,\'socFavIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{likes.total_count}}</span> </span> </template></template> </template></template> <template is="if" value="{{ifEquals(network,\'facebook\')}}"><template case="true"> <template is="if" value="{{if_lt_len(perm,3)}}"><template case="true"> <span id="{{id}}_like_btn" data-zcqa="social_tab_like" account_id="{{account.id}}" class="dIB vaM mR15 cP" onclick="{{action(\'like\',this,likes.has_liked)}}"> <span class="socialImg socFbLikeIcon dIB vaM {{if(likes.has_liked,\'socFbLikeIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{likes.total_count}}</span> </span> <span id="{{id}}_comment_btn" account_id="{{account.id}}" class="dIB vaM cP" data-zcqa="social_tab_focus_reply" onclick="{{action(\'focusToReply\')}}"> <span class="socialImg socFbCommentIcon dIB vaM pR"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{comments.total_count}}</span> </span> </template><template case="false"> <span id="{{id}}_like_btn" data-zcqa="social_tab_like" account_id="{{account.id}}" class="dIB vaM mR15" onclick="{{action(\'stopEvent\')}}"> <span class="socialImg eventNone socFbLikeIcon dIB vaM {{if(likes.has_liked,\'socFbLikeIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor" onclick="{{action(\'getMoreLikes\',this)}}">{{likes.total_count}}</span> </span> <span id="{{id}}_comment_btn" class="dIB vaM" onclick="{{action(\'stopEvent\')}}"> <span class="socialImg eventNone socFbCommentIcon dIB vaM pR"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{comments.total_count}}</span> </span> </template></template> </template></template> <template is="if" value="{{expHandlers(likes.data,\'&amp;&amp;\',expHandlers(likes.data.length,\'>\',0))}}"><template case="true"> <span class="crm-small-font-size mT5 fR cP " data-zcqa="social_tab_likes_data" onclick="{{action(\'getMoreLikes\',this,undefined,likes.total_count)}}"><span class="crmBaseColor fwBold mR5">{{likes.total_count}}</span><span class="crmLabelColor">{{getI18n("crm.social.likes")}}</span></span> </template></template> <div class="cBoth"></div> </div> <div class="SocContentSections"> <div id="comments_{{id}}_{{place_type}}" class="childPosts"> <crm-social-comments-outer comments="{{comments}}" account="{{account}}" perm="{{perm}}" place_type="{{place_type}}" id="{{id}}" brand="{{brand}}" network="{{network}}" user="{{user}}" likes="{{likes}}" link="{{link}}" message="{{message}}" created_at="{{created_at}}" attachments="{{attachments}}" type="{{type}}"></crm-social-comments-outer> </div> </div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"attr",position:[1,3,3,1,1]},{type:"attr",position:[1,3,3,1,1,1]},{type:"text",position:[1,3,3,1,1,1,0]},{type:"attr",position:[1,3,3,1,1,3]},{type:"if",position:[1,3,3,1,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}},{type:"attr",position:[1,3,3,1,3,1]},{type:"text",position:[1,3,3,1,3,1,0]},{type:"attr",position:[1,3,3,1,3,3]},{type:"if",position:[1,3,3,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,5,1]},{type:"if",position:[1,3,5,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,7]},{type:"componentDynamic",position:[1,3,7]},{type:"attr",position:[1,3,9,1]},{type:"if",position:[1,3,9,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"text",position:[3,3,0]},{type:"attr",position:[5]},{type:"attr",position:[5,1]},{type:"text",position:[5,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"text",position:[3,3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,9,3]},{type:"if",position:[1,3,9,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"text",position:[3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"text",position:[3,3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,9,5]},{type:"if",position:[1,3,9,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]},{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[1,3,11,1]},{type:"attr",position:[1,3,11,1,1]},{type:"componentDynamic",position:[1,3,11,1,1]}],_observedAttributes:["user","network","perm","account","id","type","attachments","retweets","likes","comments","message","created_at","link","brand","place_type"],data:function(){return{user:Lyte.attr("object"),network:Lyte.attr("string"),perm:Lyte.attr("number"),account:Lyte.attr("object"),id:Lyte.attr("string"),type:Lyte.attr("string"),attachments:Lyte.attr("array"),retweets:Lyte.attr("object"),likes:Lyte.attr("object"),comments:Lyte.attr("object"),message:Lyte.attr("string"),created_at:Lyte.attr("object"),link:Lyte.attr("string"),brand:Lyte.attr("object"),place_type:Lyte.attr("string")}},stopEvent:function(t){t&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())},actions:{openUserLink:function(t,e){"twitter"===t&&networkUtils.openUrl(e,"_blank")},scrollShadow:function(t,e){this.applyShadow(t,e)},openUrl:function(t){sE(event),networkUtils.openUrl(t,"_blank")},focusToReply:function(){sE(event);var t=$L(".socReplyTextBox").find("textarea").focus();t.length>0&&t[0].setSelectionRange(t.val().length,t.val().length)},like:function(t,e){this.stopEvent(event),this.like(t,e)},retweet:function(t,e){this.stopEvent(event),this.retweetTweet(t,e)},getMoreLikes:function(t,e,a){this.getMoreLikes(t,e,a),sE(event)},confirmDelComment:function(t,e,a,s){sE(event),this.confirmDelComment(t,e,a,s)}}},{mixins:["crm-social-tab","crm-social-tab_actions","crm-stop-event"]});
