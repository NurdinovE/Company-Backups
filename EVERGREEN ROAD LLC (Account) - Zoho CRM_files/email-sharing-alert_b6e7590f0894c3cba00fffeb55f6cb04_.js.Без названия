Lyte.Mixin.register("email-sharing-alert",{showCustomEmailSharingAlert:function(){return!clientPortalName&&!this.emailAddressChangeConfirmed},checkCustomSharingEnabledForRecord:function(e,t,n,a,i=!1){try{var o={page:1,per_page:1};o.filters=JSON.stringify({field:"sharing_details.record_id",value:e,comparator:"equals"}),o.is_record_call=1;var r=this;store.findAll("email_sharing_action",o).then((function(e){var o=0!==e.length;r.emailAddressChangeConfirmed=!0,o?(r.customSharingPopupCalbackObj._self=t,r.customSharingPopupCalbackObj.callback_function=n,r.customSharingPopupCalbackObj.args=a,r.customSharingPopupCalbackObj.detailView=i,r.showCustomPopup()):n.apply(t,a)}),(function(){r.emailAddressChangeConfirmed=!0,n.apply(t,a)}))}catch(e){murphy.error(e)}},resetConfirmationStatus:function(){this.emailAddressChangeConfirmed=!1},emailAddressChangeConfirmed:!1,customSharingPopupCalbackObj:{execute:function(){this.detailView?$L("#elementEditConfirm").click():this.callback_function.apply(this._self,this.args)},clear:function(){delete this._self,delete this.args,delete this.callback_function,delete this.detailView}},showCustomPopup:function(){var e=networkUtils.returnDependencyFiles(["custom-emailsharing-popup.js"],ResourceConstants.CRMClient);e=e.concat(networkUtils.returnDependencyFiles([networkUtils.getI18nJSUrl("customEmailSharingPopup")],ResourceConstants.CRM)),Lyte.injectResources(e,void 0,(function(){var e=$L("crm-custom-email-sharing-popup");e&&1===e.length?Lyte.Component.set(e.get(0).component.data,"showModal",!0):Lyte.Component.render("crm-custom-email-sharing-popup",{showModal:!0},"body")}))},closeEmailSharingAlertPopup:function(){var e=$L("crm-custom-email-sharing-popup").get(0);e&&Lyte.Component.set(e.component.data,"showModal",!1)}});
