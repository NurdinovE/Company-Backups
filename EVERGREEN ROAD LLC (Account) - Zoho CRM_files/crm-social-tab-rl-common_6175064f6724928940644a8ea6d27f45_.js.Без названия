Lyte.Component.register("crm-social-posts-new",{_template:'<template tag-name="crm-social-posts-new"> <template is="if" value="{{data[0]}}"><template case="true"> <template is="for" items="{{data}}" item="data" index="index"> <template is="if" value="{{expHandlers(data,\'&amp;&amp;\',data.message)}}"><template case="true"> <div class="socInteractionsLists mB7 socialPosts parentPost infoDiv socProfileId_{{data.user.id}} socPostId_{{data.id}}" post_id="{{data.id}}" parent_post_id="{{if(ifEquals(data.network,\'twitter\'),data.id,data.post_info.id)}}" account_id="{{data.account.id}}" network="{{data.network}}" profile_id="{{data.user.id}}" brand_id="{{data.brand.id}}" onclick="{{action(\'getDetailPage\',this,place_type)}}"> <div class="socInteractionPhoto soc{{data.network}}SmallIcon dIB vaT pR cP" data-zcqa="social_tab_profile_detail" onclick="{{action(\'getProfileDetailPage\',data.profile_detail,data.crm_entity_type,this)}}"> <img class="socInteractPhotoImg" src="{{data.user.image}}" alt="Image"> </div> <div class="socInteractionDet dIB vaT SocContentSections"> <div class="mB7 clearFix"> <span class="fL"> <span class="dIB vaM crm-small-font-size crmLinkColor crm-font-bold cP socEntityProfileId_{{data.user.id}}" entity_profile_id="{{data.user.id}}" data-zcqa="social_tab_profile_detail" onclick="{{action(\'getProfileDetailPage\',data.profile_detail,data.crm_entity_type,this)}}">{{data.user.name}}</span> <span class="dIB vaM crm-small-font-size crmNotFoundColor mL1 mR1">{{getSocialInteration(data.history_type)}}</span> <span class="dIB vaM crm-small-font-size crmLinkColor crm-font-bold">{{data.account.info.name}}</span> <template is="if" value="{{expHandlers(data.crm_entity_type,\'!\')}}"><template case="true"> <template is="if" value="{{data.add_to_crm}}"><template case="true"> <span class="socAddToCRM dIB mL7 cP" data-zcqa="social_tab_add_to_crm" onclick="{{action(\'getProfileInfo\',this)}}"> <span class="socAddLabel">+ {{getI18n("crm.social.add.crm")}}</span> <span class="socAddLoadingOuter dN"> <span class="socAddLoading"> <span class="socAddLoadCircle"></span><span class="socAddLoadCircle"></span><span class="socAddLoadCircle"></span> </span> </span> </span> </template></template> </template><template case="false"> <lyte-text class="socModuleName socModNameWidth dIB vaM mL5" lt-prop-value="{{processSocialEntityType(data.crm_entity_type)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;}" lt-prop-tooltip-class="socTooltip"></lyte-text> </template></template> </span> <div class="fR"> <template is="if" value="{{isDeskEnabledinSocial()}}"><template case="true"> <template is="if" value="{{ifNotEquals(data.account.info.id,data.user.id)}}"><template case="true"> <template is="if" value="{{data.post_info.desk_details.ticketNumber}}"><template case="true"> <span data-zcqa="social_tickets_{{user.id}}" id="ticketNumber" class="socSupTktCount mR5 {{if(ifEquals(post_info.desk_details.status,\'Closed\'),\'socSupTktCountClosed\',\'socSupTktCountOpen\')}} dIB vaM" web_link="{{post_info.desk_details.webUrl}}" onclick="{{action(\'openDeskTicket\',this)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;}" lt-prop-title="{{getI18n(\'crm.social.view.ticket\')}}" lt-prop-tooltip-class="socTooltip"># {{post_info.desk_details.ticketNumber}}</span> </template><template case="false"> <template is="if" value="{{ifNotEquals(data.network,\'googleplus\')}}"><template case="true"> <span data-zcqa="social_ticket_creation_{{user.id}}" id="ticketCreate" class="socialImg socDeskCTkIcon mR5 dIB vaM" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;}" lt-prop-title="{{getI18n(\'crm.social.convert.ticket\')}}" lt-prop-tooltip-class="socTooltip" onclick="{{action(\'openCreateDeskTicket\',this)}}"></span> </template></template> </template></template> </template></template> </template></template> <span class="dIB vaM crmNotFoundColor crm-small-font-size">{{parseDate(data.created_at)}}</span> </div> </div> <pre class="crmNotFoundColor crm-small-font-size lh20">{{unescape(data.message)}}</pre> <crm-social-tab-attachment-process type="{{data.type}}" attachments="{{data.attachments}}" link="{{data.link}}"></crm-social-tab-attachment-process> <div class="dIB mT10 actionSection" onclick="{{action(\'onClick\',event)}}"> <template is="if" value="{{ifEquals(data.network,\'twitter\')}}"><template case="true"> <template is="if" value="{{if_lt_len(data.perm,3)}}"><template case="true"> <span class="socialImg socReplyIcon dIB vaM mR15 cP" data-zcqa="social_tab_append_reply" onclick="{{action(\'appendReplyTemplate\',this,data.account.id,data.id,place_type,data.network,\'feeds\',data.reply_text)}}"></span> <span id="{{data.id}}_retweet_btn" data-zcqa="social_tab_retweet" account_id="{{data.account.id}}" class="socRetweetSpan dIB mR15 cP" onclick="{{action(\'retweet\',this,data.retweets.has_retweeted,place_type)}}"> <span class="socialImg socRetweetIcon dIB vaM {{if(data.retweets.has_retweeted,\'socReTwtIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.retweets.total_count}}</span> </span> <span id="{{data.id}}_like_btn" data-zcqa="social_tab_like" account_id="{{data.account.id}}" class="socFavSpan dIB mR15 cP" onclick="{{action(\'like\',this,data.likes.has_liked,place_type)}}"> <span class="socialImg socFavIcon dIB vaM {{if(data.likes.has_liked,\'socFavIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.likes.total_count}}</span> </span> </template><template case="false"> <span id="{{data.id}}_retweet_btn" data-zcqa="social_tab_retweet" account_id="{{data.account.id}}" class="socRetweetSpan dIB mR15" onclick="{{action(\'onClick\',event)}}"> <span class="socialImg eventNone socRetweetIcon dIB vaM {{if(data.retweets.has_retweeted,\'socReTwtIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.retweets.total_count}}</span> </span> <span id="{{data.id}}_like_btn" account_id="{{data.account.id}}" data-zcqa="social_tab_like" class="socFavSpan dIB mR15" onclick="{{action(\'onClick\',event)}}"> <span class="socialImg eventNone socFavIcon dIB vaM {{if(data.likes.has_liked,\'socFavIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.likes.total_count}}</span> </span> </template></template> </template></template> <template is="if" value="{{ifEquals(data.network,\'facebook\')}}"><template case="true"> <template is="if" value="{{if_lt_len(data.perm,3)}}"><template case="true"> <span id="{{data.id}}_like_btn" data-zcqa="social_tab_like" account_id="{{data.account.id}}" class="dIB vaM mR15 cP" onclick="{{action(\'like\',this,data.likes.has_liked,place_type)}}"> <span class="socialImg socFbLikeIcon dIB vaM {{if(data.likes.has_liked,\'socFbLikeIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.likes.total_count}}</span> </span> <span id="{{data.id}}_comment_btn" data-zcqa="social_tab_comment" account_id="{{data.account.id}}" class="dIB vaM cP" onclick="{{action(\'appendReplyTemplate\',this,data.account.id,data.id,place_type,data.network,\'feeds\')}}"> <span class="socialImg socFbCommentIcon dIB vaM pR"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.comments.total_count}}</span> </span> </template><template case="false"> <span id="{{data.id}}_like_btn" data-zcqa="social_tab_like" account_id="{{data.account.id}}" class="dIB vaM mR15" onclick="{{action(\'onClick\',event)}}"> <span class="socialImg eventNone socFbLikeIcon dIB vaM {{if(data.likes.has_liked,\'socFbLikeIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.likes.total_count}}</span> </span> <span id="{{data.id}}_comment_btn" data-zcqa="social_tab_comment" class="dIB vaM" onclick="{{action(\'onClick\',event)}}"> <span class="socialImg eventNone socFbCommentIcon dIB vaM pR"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{data.comments.total_count}}</span> </span> </template></template> </template></template> </div> <div id="comments_{{data.id}}_{{place_type}}" class="childPosts dN"> <crm-social-comments-outer comments="{{data.comments}}" account="{{data.account}}" perm="{{data.perm}}" place_type="{{place_type}}" id="{{data.id}}" brand="{{data.brand}}" network="{{data.network}}" user="{{data.user}}" likes="{{data.likes}}" link="{{data.link}}" message="{{data.message}}" created_at="{{data.created_at}}" attachments="{{data.attachments}}" type="{{data.type}}"></crm-social-comments-outer> </div> </div> </div> </template></template> </template> </template><template case="false"> <template is="if" value="{{show_empty}}"><template case="true"> <template is="if" value="{{ifEquals(place_type,\'right_panel\')}}"><template case="true"> <div class="mT10 crmLabelColor lh24 crm-small-font-size ">{{getI18n("crm.social.no.brandinter")}}</div> </template><template case="false"> <div class="socNoResAlign aligncenter pA"> <span class="socialIllustration socNoConversations dIB"></span> <div class="mT20 crmNotFoundColor lh22 crm-base-font-size">{{getI18n("crm.social.no.brandinter")}}</div> </div> </template></template> </template></template> </template></template> <template is="if" value="{{cursor}}"><template case="true"> <template is="if" value="{{social_interactions}}"><template case="true"> <div class="showmoreNew p20 aligncenter"> <span onclick="{{action(\'showMoreInteraction\',this,brand.id,ObjToString(cursor),profile_ids,place_type,element)}}" class="showmoreNewLink crmLinkColor cP" data-zcqa="cursor"> {{getI18n("crm.nsocial.tab.show.more")}}</span> <img src="{{getCrmClientImageUrl(\'loading.gif\')}}" alt="loading" class="showmoreLoadingImg dN"> </div> </template><template case="false"> <div class="showmoreNew p20 aligncenter"> <span onclick="{{action(\'showMoreFeeds\',message,this,brand.id,ObjToString(cursor),entity_type,network,place_type)}}" class="showmoreNewLink crmLinkColor cP" data-zcqa="cursor"> {{getI18n("crm.nsocial.tab.show.more")}} </span> <img src="{{getCrmClientImageUrl(\'loading.gif\')}}" alt="loading" class="showmoreLoadingImg dN"> </div> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,3,1,1,1]},{type:"text",position:[1,3,1,1,1,0]},{type:"text",position:[1,3,1,1,3,0]},{type:"text",position:[1,3,1,1,5,0]},{type:"attr",position:[1,3,1,1,7]},{type:"if",position:[1,3,1,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3,1,3,1]},{type:"if",position:[1,3,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"text",position:[1,3,1,3,3,0]},{type:"text",position:[1,3,3,0]},{type:"attr",position:[1,3,5]},{type:"componentDynamic",position:[1,3,5]},{type:"attr",position:[1,3,7]},{type:"attr",position:[1,3,7,1]},{type:"if",position:[1,3,7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"text",position:[3,3,0]},{type:"attr",position:[5]},{type:"attr",position:[5,1]},{type:"text",position:[5,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"text",position:[3,3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,7,3]},{type:"if",position:[1,3,7,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"text",position:[3,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"text",position:[3,3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,9]},{type:"attr",position:[1,3,9,1]},{type:"componentDynamic",position:[1,3,9,1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]},{type:"attr",position:[1,3]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]},{type:"attr",position:[1,3]}]}},default:{}}]}},default:{}}],_observedAttributes:["data","brand","show_empty","place_type","cursor","entity_type"],data:function(){return{data:Lyte.attr("array"),brand:Lyte.attr("object"),show_empty:Lyte.attr("boolean"),place_type:Lyte.attr("string"),cursor:Lyte.attr("object"),entity_type:Lyte.attr("string")}},stopEvent:function(t){t&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())},actions:{getProfileDetailPage:function(t,e,a){sE(event),t||e&&this.getProfileDetailPage(a)},openDeskTicket:function(t){this.stopEvent(event),this.openDeskTicket(t)},getProfileInfo:function(t){this.stopEvent(event),this.getProfileInfo(t)},appendReplyTemplate:function(t,e,a,o,i,s,n){event.stopPropagation(),sE(event),this.appendReplyTemplate(t,e,a,o,i,s,n)},like:function(t,e,a){this.stopEvent(event),this.like(t,e,a)},retweet:function(t,e,a){event.stopPropagation(),this.stopEvent(event),this.retweetTweet(t,e,a)},showMoreInteraction:function(t,e,a,o,i,s){this.stopEvent(event),this.getInteractions(t,e,null,a,o,i,s)},showMoreFeeds:function(t,e,a,o,i,s,n){(this.stopEvent(event),t)?$L("crm-social-tab-new")[0].component.getMessages(e,a,o,i,s,n):this.getFeeds(e,a,o,i,s,n)},openCreateDeskTicket:function(t,e){this.stopingEvent(e),this.openCreateDeskTicket(t)},onMouseEnter:function(t){crmui.showTooltip(t)},onMouseLeave:function(){crmui.hideTooltip()},onClick:function(t){this.stopEvent(t)}}},{mixins:["crm-social-tab","crm-social-tab_actions","crm-social-entity","crm-social-integration"]}),Lyte.Component.register("crm-social-messages-list",{_template:'<template tag-name="crm-social-messages-list"> <template is="if" value="{{data[0]}}"><template case="true"> <template is="for" items="{{data}}" item="item" index="index"> <div class="socInteractionsLists mB7 infoDiv parentPost socProfileId_{{if(ifEquals(item.sender.id,item.handle_id),item.recipient[0].id,item.sender.id)}}" data-zcqa="social_tab_message_detail" profile_id="{{if(ifEquals(item.sender.id,item.handle_id),item.recipient[0].id,item.sender.id)}}" network="{{item.network}}" id="{{item.id}}" thread_id="{{item.thread_id}}" brand_id="{{item.brand.id}}" conversation_id="{{conversation_id}}" onclick="{{action(\'socMessageDetailView\',this,place_type)}}"> <div class="socInteractionPhoto soc{{item.network}}SmallIcon pR dIB vaT"> <img class="socInteractPhotoImg" src="{{if(ifEquals(item.sender.id,item.handle_id),item.recipient[0].image,item.sender.image)}}" alt="Image"> </div> <div class="socInteractionDet dIB vaT"> <div class="mB10 clearFix"> <span class="dIB vaM"> <span class="crm-base-font-size crmLinkColor crm-font-bold socEntityProfileId_{{item.sender.id}}" data-zcqa="social_tab_profile_detail" entity_profile_id="{{item.sender.id}}" onclick="{{action(\'getProfileDetailPage\',item.crm_entity_type,item.recipient[0].id,item.handle_id,profile_detail,this)}}">{{item.sender.name}}</span> <span class="crm-base-font-size crmNotFoundColor mL5 mR5">{{getI18n("crm.social.sent.message.to",\'\',\'\')}}</span> <span class="crm-base-font-size crmLinkColor crm-font-bold socEntityProfileId_{{item.sender.id}}" data-zcqa="social_tab_profile_detail_page" entity_profile_id="{{recipient[0].id}}" onclick="{{action(\'getProfileDetailPage\',item.crm_entity_type,item.sender.id,item.handle_id,profile_detail,this)}}">{{item.recipient[0].name}}</span> </span> <template is="if" value="{{expHandlers(item.crm_entity_type,\'!\')}}"><template case="true"> <template is="if" value="{{item.add_to_crm}}"><template case="true"> <span class="socAddToCRM dIB mL7 cP" data-zcqa="social_tab_add_to_crm" onclick="{{action(\'getProfileInfo\',this)}}"> <span class="socAddLabel">+ {{getI18n("crm.social.add.crm")}}</span> <span class="socAddLoadingOuter dN"> <span class="socAddLoading"> <span class="socAddLoadCircle"></span><span class="socAddLoadCircle"></span><span class="socAddLoadCircle"></span> </span> </span> </span> </template></template> </template><template case="false"> <lyte-text class="socModuleName socModNameWidth dIB vaM mL5" lt-prop-value="{{processSocialEntityType(item.crm_entity_type)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottom&quot;}" lt-prop-tooltip-class="socTooltip"></lyte-text> </template></template> <span class="fR crmNotFoundColor crm-small-font-size">{{parseDate(item.created_at)}}</span> </div> <template is="if" value="{{isNotEmpty(item.message)}}"><template case="true"> <template is="if" value="{{ifEquals(item.sender.id,item.handle_id)}}"><template case="true"> <pre class="socPreTag"><span class="crmNotFoundColor crm-base-font-size dIB vaT lh20 w95_per"><span class="crmBaseColor fwBold">{{getI18n("crm.label.you")}}:</span> {{unescape(item.message)}}</span></pre> </template><template case="false"> <pre class="socPreTag"><span class="crmBaseColor crm-font-bold crm-base-font-size dIB vaT w95_per lh20"><span class="socialImg socMsgNew dIB vaM mR3"></span> {{unescape(item.message)}}</span></pre> </template></template> </template></template> <template is="if" value="{{attachments[0].image}}"><template case="true"> <div class="socFbMessageImg mT15"> <img src="{{attachments[0].image.src}}" onerror="{{action(\'onError\',this,attachments[0].image.alt)}}" class="contentimage socIntegImage" alt="Image"> </div> </template></template> </div> </div> </template> <template is="if" value="{{cursor}}"><template case="true"> <template is="if" value="{{social_interactions}}"><template case="true"> <div class="showmoreNew p20 aligncenter"> <span onclick="{{action(\'getInteractions\',this,brand.id,message,ObjToString(cursor),profile_ids,place_type)}}" class="showmoreNewLink crmLinkColor cP" data-zcqa="cursor"> {{getI18n("crm.nsocial.tab.show.more")}}</span> <img src="{{getCrmClientImageUrl(\'loading.gif\')}}" alt="loading" class="showmoreLoadingImg dN"> </div> </template><template case="false"> <div class="showmoreNew p20 aligncenter"> <span onclick="{{action(\'showMoreFeeds\',message,this,brand.id,ObjToString(cursor),entity_type,network,place_type)}}" class="showmoreNewLink crmLinkColor cP" data-zcqa="cursor"> {{getI18n("crm.nsocial.tab.show.more")}} </span> <img src="{{getCrmClientImageUrl(\'loading.gif\')}}" alt="loading" class="showmoreLoadingImg dN"> </div> </template></template> </template></template> </template><template case="false"> <template is="if" value="{{show_empty}}"><template case="true"> <div class="socNoResAlign aligncenter pA"> <span class="socialIllustration socNoMessages dIB"></span> <div class="mT20 crmNotFoundColor lh22 crm-base-font-size">{{getI18n("crm.social.no.brandinter")}}</div> </div> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,3,1,1,1]},{type:"text",position:[1,3,1,1,1,0]},{type:"text",position:[1,3,1,1,3,0]},{type:"attr",position:[1,3,1,1,5]},{type:"text",position:[1,3,1,1,5,0]},{type:"attr",position:[1,3,1,3]},{type:"if",position:[1,3,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[1,3,1,5,0]},{type:"attr",position:[1,3,3]},{type:"if",position:[1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0,0,0]},{type:"text",position:[1,0,2]}]},false:{dynamicNodes:[{type:"text",position:[1,0,2]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,5]},{type:"if",position:[1,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]},{type:"attr",position:[1,3]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]},{type:"attr",position:[1,3]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}}]}},default:{}}],_observedAttributes:["data","brand","message","cursor","social_interactions","show_empty"],data:function(){return{data:Lyte.attr("array"),brand:Lyte.attr("object"),message:Lyte.attr("boolean"),cursor:Lyte.attr("object"),social_interactions:Lyte.attr("boolean"),show_empty:Lyte.attr("boolean")}},stopEvent:function(t){t&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())},actions:{getProfileDetailPage:function(t,e,a,o,i){this.stopEvent(event),t&&e===a&&(o||this.getProfileDetailPage(i))},socMessageDetailView:function(t,e){this.socMessageDetailView(t,e)},getInteractions:function(t,e,a,o,i,s){this.stopEvent(event),this.getInteractions(t,e,a,o,i,s)},showMoreFeeds:function(t,e,a,o,i,s,n){(this.stopEvent(event),t)?$L("crm-social-tab-new")[0].component.getMessages(e,a,o,i,s,n):this.getFeeds(e,a,o,i,s,n)},getProfileInfo:function(t){event.stopPropagation(),sE(event),this.getProfileInfo(t)}},socMessageDetailView:function(t,e){this.stopEvent(event);var a=$L(t);if("related_list"===e){var o=$L("#socIntDetView");$L("#socIntMsgDiv").fadeOut(),o.fadeIn()}else this.appendPostDetailDiv();var i=a.attr("thread_id"),s=a.attr("network"),n=a.attr("brand_id");this.getMessageDetail(void 0,n,s,i,void 0,void 0,e)}},{mixins:["crm-social-tab","crm-social-tab_actions","crm-social-integration","crm-social-entity"]}),Lyte.Component.register("crm-social-quote-tweet-new",{_template:'<template tag-name="crm-social-quote-tweet-new"> <lyte-modal lt-prop-offset="{&quot;top&quot;:&quot;0&quot;,&quot;left&quot;:&quot;center&quot;}" lt-prop-width="550px" lt-prop-max-height="75%" lt-prop-show="{{lbind(renderQouteTweet)}}" on-close="{{action(\'cancelRetweet\')}}" lt-prop-show-close-button="false" lt-prop-allow-multiple="true" lt-prop-close-on-escape="false"> <template is="registerYield" yield-name="modal"> <lyte-modal-header> <h2 class="pp-header fwBold">{{getI18n("crm.social.integ.retweet.this")}}</h2> </lyte-modal-header> <lyte-modal-content class="p0"> <div class="p20 bgf5faff boxBB"> <lyte-input class="w100_per" lt-prop-type="textarea" lt-prop-appearance="box" lt-prop-rows="6" lt-prop-cols="80" lt-prop-direction="horizontal" lt-prop-maxlength="10000" lt-prop-text-area-resize="{&quot;vertical&quot;:false,&quot;horizontal&quot;:false}" lt-prop-id="text_quote_tweet" data-zcqa="social_tab_quote_tweet" on-value-change="{{method(\'processText\',\'quote_tweet\',true)}}" lt-prop-value="{{lbind(retweetText)}}" lt-prop-placeholder="{{getI18n(\'crm.nsocial.write.comment\')}}"></lyte-input> </div> <div class="p20"> <div class="socRetweetPhoto dIB vaT mR10 pR"> <img class="socRetweetPhotoImg" src="{{user.image}}" alt="Image"> </div> <div class="socRetweetMsg dIB vaT w85_per"> <div class="mB5"> <span class="crm-small-font-size dIB crmLinkColor">{{user.name}}</span> <span class="crmNotFoundColor crm-extra-small-font-size mT2 fR dIB">{{parseDate(created_at)}}</span> <div class="cBoth"></div> </div> <pre class="socPreTag crmNotFoundColor crm-small-font-size">{{unescape(message)}}</pre> </div> </div> </lyte-modal-content> <lyte-modal-footer> <span id="limit_quote_tweet" limit_id="quote_tweet" class="socReplyCount crmBaseColor op5 crm-extra-small-font-size fL mT9">280</span> <div id="socQuoteTweet" class="fR postResponse" account_id="{{account_id}}"> <lyte-button id="zso_cancelDelete" data-zcqa="social_cancelbtn" onclick="{{action(\'cancelRetweet\')}}"> <template is="registerYield" yield-name="text"> {{getI18n("Cancel")}}</template> </lyte-button> <lyte-button data-zcqa="social_button_addconfirmbtn" lt-prop-appearance="primary" onclick="{{action(\'submitRetweet\',this)}}" lt-prop-id="button_quote_tweet" button_id="quote_tweet"> <template is="registerYield" yield-name="text">{{getI18n("crm.nsocial.retweet")}}</template> </lyte-button> <template is="if" value="{{moreTw}}"><template case="true"> <span class="mL5 mT8 crmNotFoundColor">via</span> <div class="socIntPhoto dIB vaT mL10 pR socialCommonImage"> <img src="{{account_info.info.image}}" alt="Image" class="vaT"> <div class="twDrop dIB vaT cP" data-zcqa="social_twitter_show_more" onclick="{{action(\'showTwitterProfiles\',this,1,\'changeQuoteTweetId\',\'socQuoteTweet\')}}"><span class="dmdropArrow socialImgsvg cP"></span></div> </div> </template></template> </div> <div class="cBoth"></div> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"componentDynamic",position:[3,1,1]},{type:"attr",position:[3,3,1,1]},{type:"text",position:[3,3,3,1,1,0]},{type:"text",position:[3,3,3,1,3,0]},{type:"text",position:[3,3,3,3,0]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,3]},{type:"attr",position:[5,3,1]},{type:"registerYield",position:[5,3,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,3,1]},{type:"attr",position:[5,3,3]},{type:"registerYield",position:[5,3,3,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[5,3,3]},{type:"attr",position:[5,3,5]},{type:"if",position:[5,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[3,1]},{type:"attr",position:[3,3]}]}},default:{}},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["id","account","user","brand","created_at","renderQouteTweet","retweetText","account_id"],data:function(){return{id:Lyte.attr("string"),account:Lyte.attr("object"),user:Lyte.attr("object"),brand:Lyte.attr("object"),created_at:Lyte.attr("object"),renderQouteTweet:Lyte.attr("boolean",{default:!1}),retweetText:Lyte.attr("string"),account_id:Lyte.attr("string")}},actions:{submitRetweet:function(t){var e=this.data.id,a=this.data.account?this.data.account.id:this.data.account_id,o=this.data.retweetText,i=void 0!==this.data.brand?this.data.brand.id:this.data.account_info&&this.data.account_info.brand?this.data.account_info.brand.id:this.data.brid;this.submitRetweet(t,e,a,o,i)},cancelRetweet:function(){this.setData("renderQouteTweet",!1);var t=$L("crm-social-streams-outer");t&&t.length>0&&t[0].component.setData("renderSocialStreams",!0);var e=$L("crm-social-right-panel");e&&e.length>0&&e[0].component.setData("renderRightPanelPopup",!0);var a=$L("crm-social-filter-column");a&&a.length>0&&a[0].component.setData("renderFilterColumn",!0);var o=$L("crm-social-right-panel-search");o&&o.length>0&&o[0].component.setData("renderRightPanelSearch",!0);var i=$L("crm-social-quote-tweet-new");i&&i.length>0&&i[0].remove()},showTwitterProfiles:function(t,e,a,o){this.addIdInDropArrow(t),this.showTwitterProfiles(t,e,a,o),this.stopEvent(event)}},methods:{processText:function(t,e){var a=this.data.retweetText;this.processText(t,e,a)}}},{mixins:["crm-social-tab","crm-social-integration","crm-social-tab_actions"]}),Lyte.Component.register("crm-social-reply-template-new",{_template:'<template tag-name="crm-social-reply-template-new"> <div id="socReplyBox" class="mT15 postResponse" onclick="{{action(\'writeComment\')}}"> <template is="if" value="{{ifEquals(network,\'twitter\')}}"><template case="true"> <template is="if" value="{{reply_text}}"><template case="true"><div class="mL48 mB7 crmNotFoundColor crm-small-font-size">{{getI18n("crm.social.reply.to")}} <span class="crmLinkColor">{{reply_text}}</span></div> </template></template> </template></template> <span class="socReplyImg pR dIB cDefault soc{{network}}SmallIcon"> <img src="{{account.info.picture}}" class="socUserReplyImage dIB vaT" alt="Image"> </span> <div class="socReplyTextBox dIB vaT bg_white p7 pR"> <lyte-input class="socReplyTemplateInput w100_per socialCommonText" lt-prop-class="socReplyTemplateInputText" lt-prop-placeholder="{{getI18n(\'crm.nsocial.write.comment\')}}" lt-prop-autofocus="true" id="text_{{id}}_{{place_type}}" u_name="{{screen_name}}" lt-prop-type="textarea" lt-prop-text-area-resize="{&quot;vertical&quot;:false,&quot;horizontal&quot;:false}" lt-prop-direction="horizontal" lt-prop-appearance="flat" lt-prop-id="{{id}}_{{place_type}}" data-zcqa="twitter_reply_inputbox" on-value-change="{{method(\'processText\',id,place_type,network)}}" on-focus="{{method(\'showTwitterLimit\',\'focus\')}}" on-blur="{{method(\'showTwitterLimit\',\'blur\')}}" lt-prop-maxlength="10000" lt-prop-value="{{lbind(content)}}" text_id="{{place_type}}"></lyte-input> <template is="if" value="{{image}}"><template case="true"> <div class="socReplyAttImg mT10 pR dN socialCommonPreviewDiv"> <div class="socReplyAttImgs fL"> <img id="soc_comment_img" src="{{getCrmImageUrl(\'spacer.gif\')}}" class="socialCommonPreview w100 h100" alt="Image"> </div> <div class="cBoth"></div> <span data-zcqa="twitter_reply_post_remove_image" class="zcrm_svgIcons socRepImgClose pA cP" onclick="{{action(\'removeImage\',this,id,place_type)}}"></span> </div> </template></template> </div> <div class="flexAlignCenter spaceBetween mT8 mL48"> <div class="crm-extra-small-font-size crmBaseColor"> <template is="if" value="{{image}}"><template case="true"> <span class="socialImgsvg socAttachIcon mR5 vaM"> <input type="file" id="commentimage" class="socialCommonAttach pA" accept="image/*" onclick="{{action(\'writeComment\')}}" onchange="{{action(\'onImageSelected\',event,this,id,place_type,network)}}" data-zcqa="tw_attach_image"> </span> </template></template> <template is="if" value="{{ifEquals(network,\'twitter\')}}"><template case="true"> <span id="limit_{{id}}_{{place_type}}" limit_id="{{id}}_{{place_type}}" class="socReplyCount op5 vaM vH">280</span> </template></template> </div> <div class="crm-small-font-size ttUppercase"> <span class="crmNotFoundColor cP mR8" data-zcqa="social_tab_cancel_post" onclick="{{action(\'removeAddedTemplate\')}}">{{getI18n("Cancel")}}</span> <span class="crmLinkColor cP eventNone op5" data-zcqa="social_tab_reply_post" id="button_{{id}}_{{place_type}}" button_id="{{id}}_{{place_type}}" onclick="{{action(\'replyToPost\',this,reply_to_comment,id,place_type)}}">{{success_text}}</span> </div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]},{type:"text",position:[0,2,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,5,1]},{type:"componentDynamic",position:[1,5,1]},{type:"attr",position:[1,5,3]},{type:"if",position:[1,5,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,5]}]}},default:{}},{type:"attr",position:[1,7,1,1]},{type:"if",position:[1,7,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[1,7,1,3]},{type:"if",position:[1,7,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,7,3,1]},{type:"text",position:[1,7,3,1,0]},{type:"attr",position:[1,7,3,3]},{type:"text",position:[1,7,3,3,0]}],_observedAttributes:["network","reply_text","account","id","image","reply_to_comment","file","replyText","content"],data:function(){return{network:Lyte.attr("string"),reply_text:Lyte.attr("string"),account:Lyte.attr("object"),id:Lyte.attr("string"),image:Lyte.attr("boolean"),reply_to_comment:Lyte.attr("boolean"),file:Lyte.attr("object"),replyText:Lyte.attr("string"),content:Lyte.attr("string")}},stopEvent:function(t){t&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())},actions:{writeComment:function(){this.stopEvent(event)},replyToPost:function(t,e,a,o){this.stopEvent(event);var i=$L(t),s=null,n=(s=e?i.closest(".parentComment"):i.closest(".parentPost")).attr("post_id"),c=s.attr("network");o||(o=i.attr("button_id"));var l=s.attr("brand_id"),p=s.attr("account_id");l||(l=$L(".selectedBrand").attr("value"));var r=this.data.content,m=this.getData("file");i.addClass("op5 eventNone").removeClass("cP").prop("disabled",!0).css("opacity","0.5");var d=store.peekAll("social_related_list")?"related_list":"";this.postComment(r,m,n,l,c,o,e,d,p),this.monitorApplySortable()},onImageSelected:function(t,e,a,o,i){t.stopPropagation(),this.stopEvent(t);var s=a+"_"+o,n=this.onImageSelected(t,e,s,i);n&&(this.setData({file:n}),this.processText(s,"twitter"===this.data.network,this.data.content))},removeAddedTemplate:function(){this.stopEvent(event),this.removeAddedTemplate(),this.monitorApplySortable()},removeImage:function(t,e,a){this.stopEvent(event);var o=e+"_"+a;delete this.data.file,this.removeImage(t,o,"twitter"===this.data.network,this.data.content)},onClick:function(t){this.stopEvent(t)}},methods:{processText:function(t,e,a){t=t+"_"+e;var o=this.data.content;this.processText(t,"twitter"===a,o)},showTwitterLimit:function(t,e,a){this.twitterCountVisibility(t,e,a)}}},{mixins:["crm-social-tab_actions","crm-social-tab","crm-social-integration"]}),Lyte.Component.register("crm-social-comments-outer",{_template:'<template tag-name="crm-social-comments-outer"> <template is="if" value="{{comments.cursor}}"><template case="true"> <span id="more_comments" data-zcqa="facebook_more_comments" class="dIB mT15 crmLinkColor crm-small-font-size lh127 cP mL50 moreComments" place_type="{{place_type}}" fb_type="comments" onclick="{{action(\'getMoreComments\',this,ObjToString(comments.cursor),inline_comment)}}">{{getI18n("crm.scoial.integ.view.more.comments")}}</span> </template></template> <template is="if" value="{{expHandlers(comments.data,\'&amp;&amp;\',expHandlers(comments.data.length,\'>\',0))}}"><template case="true"> <template is="for" items="{{comments.data}}" item="item" index="index"> <crm-social-comments-detail post_id="{{id}}" data="{{item}}" account="{{if(item.account,item.account,account)}}" perm="{{if(item.perm,item.perm,perm)}}" place_type="{{place_type}}" id="{{item.id}}" brand="{{item.brand}}" user="{{item.user}}" likes="{{item.likes}}" link="{{item.link}}" message="{{item.message}}" created_at="{{item.created_at}}" network="{{item.network}}" attachments="{{item.attachments}}" type="{{item.type}}" inline_comment="{{inline_comment}}" comments="{{item.comments}}"></crm-social-comments-detail> </template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}]}},default:{}}],_observedAttributes:["comments","brand","place_type","id","post_id","account","perm","network","user","likes","link","message","created_at","inline_comment","attachments"],data:function(){return{comments:Lyte.attr("object"),brand:Lyte.attr("object"),place_type:Lyte.attr("string"),id:Lyte.attr("string"),post_id:Lyte.attr("string"),account:Lyte.attr("object"),perm:Lyte.attr("number"),network:Lyte.attr("string"),user:Lyte.attr("object"),likes:Lyte.attr("object"),link:Lyte.attr("string"),message:Lyte.attr("string"),created_at:Lyte.attr("object"),inline_comment:Lyte.attr("string"),attachments:Lyte.attr("array")}},actions:{getMoreComments:function(t,e,a){a?this.getMoreComments(t,e,!0):this.getMoreComments(t,e,!1)}},getMoreComments:function(t,e,a){var o=$L(t),i=(a=o.closest("crm-social-comments-outer")[0].component.data.inline_comment,o.closest(".infoDiv")),s=i.attr("post_id"),n=i.attr("network"),c=o.attr("place_type"),l=i.attr("brand_id");l||(l=$L(".selectedBrand").attr("value")),this.getComments(l,s,n,c,e,a,o)},getComments:function(t,e,a,o,i,s,n){if(!this.checkReauthStatus(t,a)){if(i)var c={cursor:i};var l={brand_id:t,network:a,post_id:e,postComments:!0},p={brand_id:t,place_type:o,post_id:e,network:a,cursor:i,inline_comment:s,currentElem:n},r=this;commonUtils.showHideLoadingDiv(!0),store.findAll("crm_social_post",c,void 0,void 0,l).then((function(t){commonUtils.showHideLoadingDiv(!1),r.renderGetComments(p,t)}))}},renderGetComments:function(t,e){var a=!1;t.cursor&&(a=!0);var o=e.$.meta?e.$.meta.cursor:void 0,i={};i.data=e,i=this.processComments(i,a);var s=$L("#comments_"+t.post_id+"_"+t.place_type),n=t.currentElem;n&&n.closest(".moreComments")[0].remove();var c=document.createElement("crm-social-comments-outer");c.setData({comments:{data:i.data,cursor:o},place_type:t.place_type,inline_comment:t.inline_comment,id:t.post_id}),s[0].prepend(c)}},{mixins:["crm-social-tab","crm-social-tab_actions"]}),Lyte.Component.register("crm-social-comments-detail",{_template:'<template tag-name="crm-social-comments-detail"> <div class="socConvoSubPost mT20 {{if(inline_comment,\'mL50\',\'parentComment\')}} infoDiv socProfileId_{{user.id}} socPostId_{{id}}" post_id="{{id}}" account_id="{{account.id}}" network="{{network}}" profile_id="{{user.id}}" id="{{id}}_{{place_type}}" brand_id="{{brand.id}}"> <div class="socInteractionPhoto soc{{network}}SmallIcon dIB vaT pR"> <img class="socInteractPhotoImg" src="{{user.image}}" alt="Image"> </div> <div class="socConvoSubDet dIB vaT {{if(inline_comment,\'\',\'SocContentSections\')}}"> <div class="mB10 clearFix"> <span class="crmBaseColor crm-base-font-size fwBold fL">{{user.name}}</span> <div class="fR"> <a href="{{link}}" target="_blank" class="crmNotFoundColor crm-small-font-size" title="{{title_time}}" rel="noopener noreferrer">{{parseDate(created_at)}}</a> <template is="if" value="{{ifEquals(account.info.id,user.id)}}"><template case="true"> <template is="if" value="{{if_lt_len(perm,2)}}"><template case="true"> <span class="zcrm_svgIcons socDeleteIcon socFbDeletePost dIB vaM mL10" data-zcqa="social_tab_delete_comment" onclick="{{action(\'delComment\',this,network,post_id,data.id)}}"></span> </template></template> </template></template> </div> </div> <div class="socViewConvPre crmNotFoundColor crm-small-font-size lh20"> <template is="if" value="{{message}}"><template case="true"> <pre class="socPreTag">{{unescape(message)}}</pre> </template></template> </div> <crm-social-tab-attachment-process type="{{type}}" attachments="{{attachments}}" link="{{link}}"></crm-social-tab-attachment-process> <div class="mT15"> <template is="if" value="{{ifEquals(network,\'facebook\')}}"><template case="true"> <template is="if" value="{{if_lt_len(perm,3)}}"><template case="true"> <span id="{{id}}_like_btn" account_id="{{account.id}}" data-zcqa="social_tab_like" class="dIB vaM mR15 cP" onclick="{{action(\'like\',this,data.likes.has_liked)}}"> <span class="socialImg socFbLikeIcon dIB vaM {{if(likes.has_liked,\'socFbLikeIconActive\',\'\')}}"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{likes.total_count}}</span> </span> <span id="{{id}}_comment_btn" account_id="{{account.id}}" data-zcqa="social_tab_reply_post" class="dIB vaM cP {{if(inline_comment,\'\',\'commentButton\')}}" onclick="{{action(\'appendReplyTemplate\',this,if(data.account.id,data.account.id,account.id),data.id,place_type,data.network,\'detailposts\',\'true\')}}"> <span class="socialImg socFbCommentIcon dIB vaM pR"></span> <span class="dIB vaM crm-extra-small-font-size crmNotFoundColor">{{comments.total_count}}</span> </span> </template></template> </template></template> </div> </div> <div> <div id="comments_{{id}}_{{place_type}}"> <template is="if" value="{{data.comments}}"><template case="true"> {{setValue(\'inline_comment\',true)}} <template is="for" items="{{data.comments}}" item="item" index="index"> {{setValue(\'inline_comment\',true)}} </template> <crm-social-comments-outer comments="{{data.comments}}" account="{{account}}" perm="{{perm}}" place_type="{{id}}_{{place_type}}" id="{{id}}" brand="{{brand}}" network="{{network}}" user="{{user}}" likes="{{likes}}" link="{{link}}" message="{{message}}" created_at="{{created_at}}" attachments="{{attachments}}" type="{{type}}" inline_comment="true"></crm-social-comments-outer> </template></template> </div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,1,0]},{type:"attr",position:[1,3,1,3,1]},{type:"text",position:[1,3,1,3,1,0]},{type:"attr",position:[1,3,1,3,3]},{type:"if",position:[1,3,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,3,1]},{type:"if",position:[1,3,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,5]},{type:"componentDynamic",position:[1,3,5]},{type:"attr",position:[1,3,7,1]},{type:"if",position:[1,3,7,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[3]},{type:"text",position:[3,3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5,1]},{type:"attr",position:[1,5,1,1]},{type:"if",position:[1,5,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]},{type:"attr",position:[3]},{type:"for",position:[3],dynamicNodes:[{type:"text",position:[1]}]},{type:"attr",position:[5]},{type:"componentDynamic",position:[5]}]}},default:{}}],_observedAttributes:["data","brand","place_type","id","post_id","account","perm","network","user","likes","link","message","created_at","inline_comment","reply_text"],data:function(){return{data:Lyte.attr("object"),brand:Lyte.attr("object"),place_type:Lyte.attr("string"),id:Lyte.attr("string"),post_id:Lyte.attr("string"),account:Lyte.attr("object"),perm:Lyte.attr("number"),network:Lyte.attr("string"),user:Lyte.attr("object"),likes:Lyte.attr("object"),link:Lyte.attr("string"),message:Lyte.attr("string"),created_at:Lyte.attr("object"),inline_comment:Lyte.attr("string"),reply_text:Lyte.attr("string")}},actions:{delComment:function(t,e,a,o){event.stopPropagation(),this.confirmDelComment(t,e,a,o)},like:function(t,e,a){event.stopPropagation(),sE(event),this.like(t,e,a)},appendReplyTemplate:function(t,e,a,o,i,s,n){event.stopPropagation(),sE(event);var c=t.closest("crm-social-comments-detail").component.data;o="true"===c.inline_comment?o:c.id+"_"+o,this.appendReplyTemplate(t,e,a,o,i,s,n)},onClick:function(t,e){e&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()),this.getData("inline_comment")?zsoTab.triggerParentPostComment(t):zsoTab.appendReplyTemplate(element,this.getData("account").id,this.getData("id"),this.getData("place_type"),this.getData("network"),"detailposts",!0)}}},{mixins:["crm-social-tab_actions","crm-social-tab"]}),Lyte.Component.register("crm-social-my-posts-outer",{_template:'<template tag-name="crm-social-my-posts-outer"> <div id="socPostContentInner" class="h100_per"> <template is="if" value="{{can_post}}"><template case="true"> <div class="socNewPosts flexAlignCenter jcCenter cP" data-zcqa="social_tab_new_post" lt-prop-title="{{getI18n(\'crm.social.compose.post\')}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;top&quot;}" lt-prop-tooltip-class="socTooltip" onclick="{{action(\'newPosts\')}}"> <span class="socialImg socAddNewPost"></span> </div> </template></template> <template is="for" items="{{networks}}" item="item" index="index"> <div class="socNwPostsLists {{item.parentClass}} h100_per" id="{{item.info.network}}_my_posts"> <div class="socColumnHeading flexAlignCenter"> <span class="socialImg socAsssNwIcon {{item.childClass}} mR5"></span> <span class="crm-medium-large-font-size crmBaseColor ttCapitalize">{{item.info.network}}</span> </div> <div class="socColumnContent" onscroll="{{action(\'scrollShadow\',this,\'socColumnHeading\')}}"> <div class="socColumnLists pR h100_per" id="{{item.info.network}}_my_col_posts"></div> <div id="socColumnListsDetail" class="socColumnListsDetail dN postDetailOuterTemplate"></div> </div> </div> </template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]}]}],_observedAttributes:["can_post","networks"],data:function(){return{can_post:Lyte.attr("boolean"),networks:Lyte.attr("array")}},actions:{newPosts:function(){var t=$L("#socComposePost")[0];t&&t.remove();var e=$L(".selectedBrand").attr("value"),a=this.getNetworkJsonByBrandId(e,1,1);this.showNewPostsDiv(a),event&&(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation())},scrollShadow:function(t,e){this.applyShadow(t,e)}},showNewPostsDiv:function(t){t.place_type="social_post_tab",t.id="post_new",t.renderComposePost=!0,Lyte.Component.render("crm-social-compose-post-new",t,"#socialDashboard"),$L("#button_"+t.place_type).removeClass("cP").prop("disabled",!0).css("opacity","0.5").css("pointer-events","none")}},{mixins:["crm-social-tab","crm-social-tab_actions"]}),Lyte.Component.register("crm-social-right-panel",{_template:'<template tag-name="crm-social-right-panel"> <lyte-modal id="socProfilePanelModal" lt-prop-wrapper-class="socModalFromRight socProfilePanelModal" lt-prop-show="{{renderRightPanelPopup}}" lt-prop-width="530px" lt-prop-height="100%" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromRight&quot;}" lt-prop-offset="{&quot;right&quot;:&quot;0px&quot;,&quot;top&quot;:&quot;0px&quot;,&quot;bottom&quot;:&quot;28px&quot;}" lt-prop-close-on-escape="false" on-before-show="{{method(\'hideMarketingIcon\')}}" on-close="{{method(\'removeRightPanelPopup\')}}" lt-prop-allow-multiple="true"> <template is="registerYield" yield-name="modal"> <template is="if" value="{{info.error}}"><template case="true"> <div class="pA socNoResAlign"> <span class="socialIllustration socEmptyColumn dIB"></span> <div class="aligncenter crmNotFoundColor crm-small-font-size mT15">{{getI18n("crm.label.nomatchingusers")}}</div> </div> </template><template case="false"> <lyte-modal-header class="br_bottom_border3 socProfPopupUserDet pR"> <div id="socProfPopupUserDet"> <div class="socInteractionPhoto socTwSmallIcon pR dIB mR5"> <img src="{{info.image}}" class="socInteractPhotoImg dIB vaM" alt="loading"> </div> <span class="dIB vaM crm-base-font-size">{{info.screen_name}}</span> <p class="mT15 mB15 crmNotFoundColor crm-base-font-size crm-font-regular wbBreakWord">{{info.description}}</p> <div class="socCountDetails crm-font-regular clearFix"> <div class="socProfPopupDetTab {{if(ifEquals(info.tabaction,\'user_search\'),\'socProfTabActive\',\'\')}} pR20 socEntityProfileId_{{info.id}}" data-zcqa="social_profile_header_tweet" onclick="{{action(\'showSocialProfilePanel\',this,\'user_search\')}}" entity_profile_id="{{info.id}}" network="{{info.network}}" isload_partially="true"> <div class="socProfPanelTab crm-small-font-size mB4">Tweets</div> <span class="socProfPanelTab socProfActiveCount dIB crm-base-font-size">{{changeNum(info.statuses_count)}}</span> </div> <div class="socProfPopupDetTab {{if(ifEquals(info.tabaction,\'following\'),\'socProfTabActive\',\'\')}} pL20 pR20 socEntityProfileId_{{info.id}}" data-zcqa="social_profile_header_following" onclick="{{action(\'showSocialProfilePanel\',this,\'following\')}}" entity_profile_id="{{info.id}}" network="{{info.network}}" isload_partially="true"> <div class="socProfPanelTab crm-small-font-size mB4">Following</div> <span class="socProfPanelTab socProfActiveCount dIB crm-base-font-size">{{changeNum(info.friends_count)}}</span> </div> <div class="socProfPopupDetTab {{if(ifEquals(info.tabaction,\'followers\'),\'socProfTabActive\',\'\')}} pL20 pR20 socEntityProfileId_{{info.id}}" data-zcqa="social_profile_header_followers" onclick="{{action(\'showSocialProfilePanel\',this,\'followers\')}}" entity_profile_id="{{info.id}}" network="{{info.network}}" isload_partially="true"> <div class="socProfPanelTab crm-small-font-size mB4">Followers</div> <span class="socProfPanelTab socProfActiveCount dIB crm-base-font-size">{{changeNum(info.followers_count)}}</span> </div> <div class="socProfPopupDetTab {{if(ifEquals(info.tabaction,\'like\'),\'socProfTabActive\',\'\')}} pL20 socEntityProfileId_{{info.id}}" data-zcqa="social_profile_header_like" onclick="{{action(\'showSocialProfilePanel\',this,\'like\')}}" entity_profile_id="{{info.id}}" network="{{info.network}}" isload_partially="true"> <div class="socProfPanelTab crm-small-font-size mB4">Likes</div> <span class="socProfPanelTab socProfActiveCount dIB crm-base-font-size">{{changeNum(info.favourites_count)}}</span> </div> </div> </div> </lyte-modal-header> <lyte-modal-content id="socProfPopupUsers" class="socProfPopupUsers" onscroll="{{action(\'scrollShadow\',this,\'socProfPopupUserDet\')}}"></lyte-modal-content> </template></template> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"text",position:[1,1,3,0]},{type:"text",position:[1,1,5,0]},{type:"attr",position:[1,1,7,1]},{type:"text",position:[1,1,7,1,3,0]},{type:"attr",position:[1,1,7,3]},{type:"text",position:[1,1,7,3,3,0]},{type:"attr",position:[1,1,7,5]},{type:"text",position:[1,1,7,5,3,0]},{type:"attr",position:[1,1,7,7]},{type:"text",position:[1,1,7,7,3,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["info","renderRightPanelPopup"],data:function(){return{info:Lyte.attr("object"),renderRightPanelPopup:Lyte.attr("boolean",{default:!1})}},actions:{showSocialProfilePanel:function(t,e){document.createElement("crm-social-my-posts").component.showSocialProfilePanel(t,e)},closeRightPanel:function(){setTimeout((function(){$("#socProfileRightPanelOuter").addClass("dN")}),250),$("#socProfileRightPanel").css({right:"-530px"})},scrollShadow:function(t,e){$L(t).scrollTop()>50?$L("."+e).addClass("socScrollShadow"):$L("."+e).removeClass("socScrollShadow")}},methods:{hideMarketingIcon:function(){$L("#social_sidebar").addClass("socMarketingIconHide")},setModalContentHeight:function(){this.setModalContentHeight("socProfilePanelModal")},removeRightPanelPopup:function(){$L("#social_sidebar").removeClass("socMarketingIconHide");var t=$L("crm-zso-entity-create");t&&t.length>0&&$L("#socAddToCrmBtn").closest("#socProfPopupUsers").length&&t[0].remove();var e=$L("crm-social-right-panel");e&&e.length>0&&!0===this.data.renderRightPanelPopup&&e[0].remove();var a=$L("crm-social-convo-outer-new");a&&a.length>0&&a[0].component.setData("renderMessageDetail",!0);var o=$L("crm-social-quote-tweet-new");o&&o.length>0&&o[0].component.setData("renderQouteTweet",!0)}}},{mixins:["crm-social-tab_actions"]}),Lyte.Component.register("crm-social-right-panel-search",{_template:'<template tag-name="crm-social-right-panel-search"> <lyte-modal id="socRightPanelSearchModal" lt-prop-wrapper-class="socModalFromRight socRightPanelSearchModal" lt-prop-show="{{lbind(renderRightPanelSearch)}}" lt-prop-width="530px" lt-prop-height="100%" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromRight&quot;}" lt-prop-offset="{&quot;right&quot;:&quot;0px&quot;,&quot;top&quot;:&quot;0px&quot;,&quot;bottom&quot;:&quot;28px&quot;}" lt-prop-close-on-escape="false" on-before-show="{{method(\'hideMarketingIcon\')}}" on-show="{{method(\'setContentHeight\')}}" on-resize="{{method(\'setContentHeight\')}}" on-close="{{method(\'closeRightPanel\')}}" lt-prop-allow-multiple="true"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="br_bottom_border3 socRightPanelModalHeader"> <div class="crm-subheading-font-size crm-font-bold">Search Results <span id="socRightPanelSearchKey" class="crm-font-semibold crm-subheading-font-size mL10"></span></div> </lyte-modal-header> <lyte-modal-content class="socRightPanelModalContent"> <div id="socRightPanelSearchRes" class="socRightPanelSearchRes"></div> </lyte-modal-content> <lyte-modal-footer class="center socRightPanelModalFooter"> <lyte-button lt-prop-appearance="primary" id="social_tab_save_column_btn" class="mR0" data-zcqa="social_tab_save_column" onclick="{{action(\'save\',this)}}"> <template is="registerYield" yield-name="text">{{getI18n("crm.social.addtomonitor")}}</template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[5,1]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["renderRightPanelSearch","search_query"],data:function(){return{renderRightPanelSearch:Lyte.attr("boolean",{default:!1}),search_query:Lyte.attr("string")}},actions:{save:function(t){var e=this.data.search_query;this.processSearchTypeColumn(t,"keyword_search","twitter",e),this.closeRightPanel();var a=$L("crm-social-tab-new")[0].component;"monitor"!==$L(".socTabActive")[0].getAttribute("lt-prop-id")&&a.actions.switchTab("monitor")}},methods:{hideMarketingIcon:function(){$L("#social_sidebar").addClass("socMarketingIconHide")},closeRightPanel:function(){$L("#social_sidebar").removeClass("socMarketingIconHide"),this.closeRightPanel()},setContentHeight:function(){this.setColumnTypeModalHeight("socRightPanelSearchModal")}},closeRightPanel:function(){var t=$L("crm-social-right-panel-search");t&&t.length>0&&t[0].remove();var e=$L("crm-social-convo-outer-new");e&&e.length>0&&e[0].component.setData("renderMessageDetail",!0)}},{mixins:["crm-social-integration","crm-social-tab"]}),store.registerModel("social-profile",{id:Lyte.attr("string"),network:Lyte.attr("string"),profiles:Lyte.attr("object"),automate:Lyte.attr("boolean")},{actions:{follow:{},deleteProfile:{}}}),store.registerAdapter("social-profile",{namespace:"crm/v2/module/entityId/Social",buildURL:function(t,e,a,o,i,s,n){switch(n&&n.saveProfile&&(i=i.replace("module",n.module).replace("entityId",n.entityId)),s){case"follow":i=i.replace("module/entityId/Social","Social/twitter/"+n.account_id+"/profiles/"+n.profileId);break;case"deleteProfile":i=i.replace("/actions/deleteProfile","")}return i=i.replace("/"+t,"")},methodForRequest:function(t,e,a,o,i){return"follow"===i?o.follow?"POST":"DELETE":"deleteProfile"===i?"DELETE":t}}),store.registerSerializer("social-profile",{payloadKey:function(){return""},serializeKey:function(){return"data"},serialize:function(t,e,a,o,i,s,n){if("deleteProfile"===n){var c=[];delete o.module,delete o.entityId,delete o.saveProfile,c.push(o),e={data:c}}else"create"===t&&(e.data[0]=o);return e},normalizeResponse:function(t,e,a){return a.data&&a.data[0]&&!a.data[0].id&&(a.data[0].id=Math.floor(1e5*Math.random()+1)),a},deserializeKey:function(){return"social-profile"}});
