Lyte.Component.register("crux-image-upload",{_template:'<template tag-name="crux-image-upload"> <lyte-modal on-show="{{method(\'onModalShow\')}}" lt-prop-show-close-button="false" on-close="{{method(\'onModalCloseMthd\')}}" lt-prop-bind-to-body="true" lt-prop-transition="{ &quot;animation&quot; : &quot;slideFromTop&quot; , &quot;duration&quot; : &quot;0&quot;}" lt-prop-width="840px" lt-prop-offset="{&quot;top&quot;:&quot;0&quot;}" lt-prop-allow-multiple="true" lt-prop="{{stringify(cxPropModalProperties)}}" on-before-show="{{method(\'onBeforeShowModal\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header class="cxImgUploadModaHeader"> <template is="if" value="{{cxPropHeaderYield}}"><template case="true"> <lyte-yield yield-name="cxFileUploadTitleYield"></lyte-yield> </template><template case="false"> {{cxPropTitle}} </template></template> </lyte-modal-header> <lyte-modal-content class="cxFlex"> <div class="cxImgUploadModalContent"> <template is="if" value="{{expHandlers(cxPropType,\'===\',\'single\')}}"><template case="true"><template is="if" value="{{showUploadPage}}"><template case="true"> <lyte-fileupload class="" lt-prop-yield="true" queue-list="{{lbind(fileList)}}" lt-prop-total-files-size="{{cxPropAllowedTotalSize}}" lt-prop-multiple="{{if(expHandlers(cxPropType,\'==\',\'multiple\'))}}" lt-prop-accept="{{cxPropAcceptedTypes}}" lt-prop-ajax="{{cxPropAjax}}" on-add="{{method(\'onFileUploadAdded\')}}" lt-prop-auto-upload="{{cxPropAutoUpload}}"> <template is="registerYield" yield-name="file"> <lyte-file-select-area> <template is="if" value="{{cxPropContentYield}}"><template case="true"> <lyte-yield yield-name="cxFileUploadContentYield"></lyte-yield> </template><template case="false"> <div class="cxFileDropArea" lt-prop-title="{{if(fileUploading,cruxGetI18n(\'crm.imageupload.wait.msg\'))}}" lt-prop-tooltip-style="font-size:1.2rem;" lt-prop-tooltip-config="{&quot;position&quot; : &quot;followcursor&quot;, &quot;margin&quot; : &quot;50px&quot;, &quot;maxdisplaytime&quot;:3000}"> <div class="cxFileDropInnerContent"> <div class="cxFileUploadIcon"></div> <p class="cxDropFieldText1">{{cruxGetI18n("crm.image.filepicker.desc.draganddrop")}}</p> <p class="cxDropFieldText2">-{{cruxGetI18n("crm.label.lowercase.or")}}-</p> <p class="cxDropFieldText3">{{cruxGetI18n("crm.image.filepicker.desc.browse")}}</p> </div> </div> </template></template> </lyte-file-select-area> </template> </lyte-fileupload> </template><template case="false"> <div class="cxUploadContainer"> <img id="cxUploadedImage" src="{{imageData[0].preview_url}}" style="width: 100%;"> </div> </template></template> </template><template case="false"> <div class="cxMulImgUploadCountCont"> <div class="cxMulImgUploadCount"> <lyte-progressbar lt-prop="{&quot;type&quot;:&quot;circle&quot;,&quot;stroke&quot;:&quot;3&quot;,&quot;radius&quot;:&quot;8&quot; , &quot;showPercentage&quot; : false ,&quot;progressProperty&quot; : {&quot;value&quot;: &quot;{{progressProp.countPercentage}}&quot;}}" lt-prop-completed-fill-color="{{cxPropProgressStatusColours.count}}" lt-prop-progress-fill-color="{{cxPropProgressStatusColours.count}}"> </lyte-progressbar> <span class="cxMultImgUploadCountLabel">{{cruxGetI18n("crm.image.uploaded")}} : </span> <span class="cxMultImgUploadCountValue">{{selectedFileCount}} / {{cxPropMaxFilesCount}}</span> </div> <span class="cxMulImgCountSeparator cxMultImgUploadCountLabel">|</span> <div class="cxMulImgUploadCount"> <lyte-progressbar lt-prop="{&quot;type&quot;:&quot;circle&quot;,&quot;stroke&quot;:&quot;8&quot;,&quot;radius&quot;:&quot;8&quot; , &quot;showPercentage&quot; : false ,&quot;progressProperty&quot; : {&quot;value&quot;: &quot;{{progressProp.sizePercentage}}&quot;}}" lt-prop-completed-fill-color="{{cxPropProgressStatusColours.size}}" lt-prop-progress-fill-color="{{cxPropProgressStatusColours.size}}"> </lyte-progressbar> <span class="cxMultImgUploadCountLabel">{{cruxGetI18n(\'crm.attach.upload.sizelimit\')}} : </span> <span class="cxMultImgUploadCountValue">{{currentTotalFileSize}}{{totalFileUnit}} / {{cxPropAllowedTotalSize}}</span> </div> </div> <crux-file-upload class="cxImgUpldContFileUpldComp" cx-prop-parallel="{{cxPropParallel}}" cx-prop-progress-status-colours="{{cxPropProgressStatusColours}}" cx-prop-validate-by-ext="true" cx-prop-rename-duplicate-file="true" file-list="{{lbind(fileList)}}" cx-prop-retry="{{cxPropRetry}}" cx-prop-sortable-drag-class="cxImgUpModalFileUpdListFile" cx-prop-predefined-list="{{lbind(cxPropImages)}}" cx-prop-manual-retry="{{cxPropManualRetry}}" cx-prop-disable-browse-btn="{{disableBrowseBtn}}" cx-prop-progress-tooltip="{{cruxGetI18n(\'crm.imageupload.wait.msg\')}}" cx-prop-ajax="{{cxPropAjax}}" cx-prop-size-selector="{{cxPropSizeSelector}}" cx-prop-param-name="{{cxPropParamName}}" cx-prop-thumb="true" cx-prop-multiple="true" cx-prop-max-files-count="{{cxPropMaxFilesCount}}" cx-prop-minimum-file-size="1" cx-prop-list-appearance="{{cxPropListAppearance}}" cx-prop-accepted-types="{{cxPropAcceptedTypes}}" cx-prop-sortable="true" cx-prop-editable="true" cx-prop-select-area="{{selectAreaMsg}}" cx-prop-max-size-reach-tooltip="{{cruxGetI18n(\'crm.ImageuploadField.size.limit\',allowedSizeInt)}}" cx-prop-max-count-reach-tooltip="{{cruxGetI18n(\'crm.imageupload.allowed.field.length\',cxPropMaxFilesCount)}}" cx-prop-list-class="cxMultiAttachImageSelector_{{cxPropId}}" cx-prop-single-file-size="{{cxPropAllowedSingleFileSize}}" cx-prop-source-key="{{cxPropSourceKey}}" cx-prop-preview-url-key="{{cxPropPreviewUrlKey}}" cx-prop-download-key="{{cxPropDownloadKey}}" total-file-size="{{lbind(totalFileSiz)}}" cx-prop-upload-progress="{{lbind(cxPropUploadProgress)}}" on-edit-image="{{method(\'onEditImage\')}}" on-add="{{method(\'onAddFile\')}}" on-file-success="{{method(\'onFileSuccessFn\')}}" on-remove="{{method(\'onRemoveFile\')}}" on-success="{{method(\'onSuccessFn\')}}" on-before-add="{{method(\'onBeforeAddFn\')}}" on-failure="{{method(\'onFailureFn\')}}" on-file-reject="{{method(\'fileRejectFn\')}}" on-before-send="{{method(\'onBeforeSendFn\')}}" on-before-drop="{{method(\'onBeforeDropFn\')}}" on-sortable-drop="{{method(\'onDropFn\')}}" on-validation-end="{{method(\'onValidationEndFn\')}}" on-select="{{method(\'onSelectFn\')}}" on-before-manual-retry="{{method(\'onBeforeManualRetryFn\')}}"></crux-file-upload> </template></template> <lyte-messagebox lt-prop-show="{{lbind(showRejectMsgBox)}}" lt-prop-duration="5000" lt-prop-yield="true" lt-prop-type="error"> <template is="registerYield" yield-name="messageboxYield"> {{unescape(rejectedFileLiteral)}} </template> </lyte-messagebox> </div> </lyte-modal-content> <lyte-modal-footer class="right"> <template is="if" value="{{cxPropFooterYield}}"><template case="true"> <lyte-yield yield-name="cxFileUploadFooterYield"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(showUploadPage,\'!\')}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropType,\'===\',&quot;single&quot;)}}"><template case="true"> <lyte-button data-czqa="onUpload_popup" lt-prop-appearance="primary" onclick="{{action(\'attachImage\')}}"> <template is="registerYield" yield-name="text"> <template is="if" value="{{cxPropCropping}}"><template case="true"> {{cruxGetI18n(\'crm.general.crop.and.set\')}} </template><template case="false"> {{cruxGetI18n(\'crm.attach.option.label\')}} </template></template> </template> </lyte-button> </template></template> <lyte-button data-zcqa="onCancel_popup" onclick="{{action(\'closeModalAction\')}}"> <template is="registerYield" yield-name="text" onclick="{{action(\'closeModalAction\')}}"> {{cruxGetI18n(\'crm.button.cancel\')}} </template> </lyte-button> <template is="if" value="{{expHandlers(cxPropType,\'===\',&quot;multiple&quot;)}}"><template case="true"> <lyte-button data-zcqa="onUpload_popup" lt-prop-disabled="{{disableAttachBtn}}" lt-prop-appearance="primary" onclick="{{action(\'attachAllImage\')}}"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.attach.option.label\')}} </template> </lyte-button> </template></template> </template></template> </template></template> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,3,0]},{type:"text",position:[1,1,5,1]},{type:"text",position:[1,1,7,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,1,3,0]},{type:"text",position:[1,1,5,0]},{type:"text",position:[1,1,5,2]},{type:"attr",position:[1,5,1]},{type:"componentDynamic",position:[1,5,1]},{type:"text",position:[1,5,3,0]},{type:"text",position:[1,5,5,0]},{type:"text",position:[1,5,5,1]},{type:"text",position:[1,5,5,3]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"registerYield",position:[3,1,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[3,1,3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"if",position:[5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropType","cxPropFileType","cxPropAllowedTotalSize","cxPropAllowedSingleFileSize","cxPropTitle","cxPropHeaderYield","cxPropContentYield","cxPropCropping","showUploadPage","cxPropAcceptedTypes","cxPropAjax","cxPropAutoUpload","cxPropMaxFilesCount","storedCount","fileList","cxPropAspectRatio","cxPropMinSize","cxPropMaxSize","selectAreaMsg","cxPropImages","cxPropDownloadKey","cxPropPreviewUrlKey","cxPropSizeSelector","cxPropSourceKey","cxPropId","cxPropListAppearance","cxPropParamName","cxPropRetry","disableAttachBtn","cxPropParallel","currentTotalFileSize","disableBrowseBtn","errorTooltipMsg","progressProp","totalFileUnit","cxPropManualRetry","cxPropUploadProgress","cxPropWrapperClass","cxPropModalProperties","cxPropReadonly","rejectedFileLiteral","showRejectMsgBox","allowedSizeInt","cxPropProgressStatusColours"],data:function(){return{cxPropType:Lyte.attr("string",{default:"single"}),cxPropFileType:Lyte.attr("string",{default:"image"}),cxPropAllowedTotalSize:Lyte.attr("string",{default:"20MB"}),cxPropAllowedSingleFileSize:Lyte.attr("string"),cxPropTitle:Lyte.attr("string",{default:"Select your Files"}),cxPropHeaderYield:Lyte.attr("boolean",{default:!1}),cxPropContentYield:Lyte.attr("boolean",{default:!1}),cxPropCropping:Lyte.attr("boolean",{default:!0}),showUploadPage:Lyte.attr("boolean",{default:!0}),cxPropAcceptedTypes:Lyte.attr("string",{default:".png,.jpg,.jpeg,.bmp,.gif"}),cxPropAjax:Lyte.attr("object",{default:{url:"/Fileupload"}}),cxPropAutoUpload:Lyte.attr("boolean",{default:!1}),cxPropMaxFilesCount:Lyte.attr("number",{default:10}),storedCount:Lyte.attr("number"),fileList:Lyte.attr("array",{default:[]}),cxPropAspectRatio:Lyte.attr("string",{default:"1:1"}),cxPropMinSize:Lyte.attr("number",{default:"auto"}),cxPropMaxSize:Lyte.attr("number",{default:"auto"}),selectAreaMsg:Lyte.attr("object"),cxPropImages:Lyte.attr("array",{default:[]}),cxPropDownloadKey:Lyte.attr("string",{default:""}),cxPropPreviewUrlKey:Lyte.attr("string",{default:""}),cxPropSizeSelector:Lyte.attr("string",{default:"size"}),cxPropSourceKey:Lyte.attr("string",{default:"src"}),cxPropId:Lyte.attr("string",{default:""}),cxPropListAppearance:Lyte.attr("string",{default:"inner"}),cxPropParamName:Lyte.attr("string",{default:"file"}),cxPropRetry:Lyte.attr("number",{default:0}),disableAttachBtn:Lyte.attr("boolean",{default:!1}),cxPropParallel:Lyte.attr("number",{default:10}),currentTotalFileSize:Lyte.attr("number"),disableBrowseBtn:Lyte.attr("boolean",{default:!1}),errorTooltipMsg:Lyte.attr("string",{default:""}),progressProp:Lyte.attr("object",{default:{}}),totalFileUnit:Lyte.attr("string",{default:""}),cxPropManualRetry:Lyte.attr("boolean",{default:!0}),cxPropUploadProgress:Lyte.attr("boolean",{default:!1}),cxPropWrapperClass:Lyte.attr("string",{default:""}),cxPropModalProperties:Lyte.attr("object",{default:{}}),cxPropReadonly:Lyte.attr("boolean",{default:!1}),rejectedFileLiteral:Lyte.attr("string",{default:""}),showRejectMsgBox:Lyte.attr("boolean",{default:!1}),allowedSizeInt:Lyte.attr("string"),cxPropProgressStatusColours:Lyte.attr("object",{default:{count:"#3fbd5f",size:"#338CF0",list:"#338CF0"}})}},init:function(){if(this.$node.openFileUpload=function(e){var t=this.component;t.setData("cxPropImages",e),this.setData("selectedFileCount",t.data.cxPropImages.length),t._modal.ltProp("show",!0)},this.setData("showUploadPage","multiple"!==this.data.cxPropType),"multiple"===this.data.cxPropType){var e={};this.data.cxPropAllowedTotalSize&&(this.data.allowedSizeInt=this.data.cxPropAllowedTotalSize.match(/[0-9]+/g)[0]),e.primary_message=_cruxUtils.getI18n("crm.imageupload.drag.drop.here"),e.supported_message=_cruxUtils.getI18n("crm.image.supported.formats"),e.icon_class="cxImageUploadHeadIcon",e.browse_text=_cruxUtils.getI18n("Browse"),this.setData("selectAreaMsg",e)}},didConnect:function(){this._modal=this.$node.querySelector("lyte-modal"),this.invalidFiles=[],this.validFiles=[]},descriptionChange:function(e,t){this.setData("disableAttachBtn",!1),this.getMethods("onEdit")&&this.executeMethod("onEdit","description",id,t)},nameChange:function(e,t){this.setData("disableAttachBtn",!1),this.getMethods("onEdit")&&this.executeMethod("onEdit","name",e,t)},onDeleteFromPreview:function(e){this.setData("disableAttachBtn",!1);var t=$L("lyte-fileupload",this.modalChildComp)[0].removeUpload(e.id);this.getMethods("onDeleteFromUpload")&&this.executeMethod("onDeleteFromUpload",t)},onCropSuccessFn:function(e,t,o){function i(e,t){return e.find((function(e){return e.id===t}))}var r=i(this.data.fileList,t.id),l=(r=r||i(this.data.cxPropImages,t.id))[this.data.cxPropSizeSelector];if(this.getMethods("onCropSuccess"))var a=this.executeMethod("onCropSuccess",e,Object.assign({},t));if(a)for(var s=Object.keys(a),n=0;n<s.length;n++)Lyte.objectUtils(r,"add",s[n],a[s[n]]);var p=Number(l)-r[this.data.cxPropSizeSelector];this.removeFromTotalFileSize(p),r.isCropped=!0,Lyte.objectUtils(r,"add",this.data.cxPropPreviewUrlKey,o),Lyte.objectUtils(r,"add",this.data.cxPropDownloadKey,o),Lyte.objectUtils(r,"add",this.data.cxPropSourceKey,o),this.setData("disableAttachBtn",!1)},closePreviewFn:function(){this.getMethods("onPreviewClose")&&this.executeMethod("onPreviewClose",res,value)},methods:{onFileUploadAdded:function(e){var t=Object.assign(e,{preview_url:window.URL.createObjectURL(e)});this.setData("showUploadPage",!1),this.setData("imageData",[t]),this.imageElem=$L("#cxUploadedImage",this.modalChildComp),this.data.cxPropCropping&&(this.listener=this.loadEventListener.bind(this),this.imageElem[0].addEventListener("load",this.listener))},onRemoveFile:function(e,t){if(this.setData("selectedFileCount",this.data.selectedFileCount-1),"error"===t.status||this.validationEndRemove||this.removeFromTotalFileSize(t[this.data.cxPropSizeSelector]),this.validate(),this.data.selectedFileCount||this.initialFiles.length||this.setData("disableAttachBtn",!0),this.getMethods("onRemove"))return this.executeMethod("onRemove",t)},onModalShow:function(){this.initialFiles=$L.extend(!0,[],this.data.cxPropImages),this.modalChildComp=this._modal.component.childComp;var e=this.data.cxPropSizeSelector;this.crtTotalSizeInBytes=this.initialFiles.reduce((function(t,o){return t+Number(o[e])}),0),this.setData("currentTotalFileSize",this.fileSizeConvertAsPerUnit(this.crtTotalSizeInBytes)),this.validate(!0)},onModalCloseMthd:function(){this.setData("cxPropImages",[]),$L("lyte-fileupload",this.modalChildComp)[0].component.setData("ltPropReset",!0),this.getMethods("onClose")&&this.executeMethod("onClose",this.$node)},onBeforeAddFn:function(e){},onAddFile:function(e){if(this.setData("selectedFileCount",this.data.selectedFileCount+1),this.validFiles.push(e),this.getMethods("onAdd"))return this.executeMethod("onAdd",e)},onEditImage:function(e){var t=".cxMultiAttachImageSelector_"+this.data.cxPropId,o=$L("crux-file-upload",this.modalChildComp)[0].component.getAllFiles();this.constructDataAndShow(e.id,o,t,!this.data.cxPropReadonly,this.data.cxPropType)},onFileSuccessFn:function(e,t){if(!e.xhr.responseText){t.status="error";var o=this.data.fileList.find((function(e){return e.id===t.id}));return _cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.image.unsupported.corrupted.single"),ltPropType:"error"}}),Lyte.objectUtils(o,"add","status","error"),this.setData("disableAttachBtn",!0),void(o.retry=this.data.cxPropRetry)}if(this.addToTotalFilesSize(t.size),this.getMethods("onFileSuccess"))return this.executeMethod("onFileSuccess",e,t)},onProgressFn:function(){},onSuccessFn:function(){this.validate()},onFailureFn:function(){this.validate()},fileRejectFn:function(e,t){"Exceeds"===t.totalSize?_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.ImageuploadField.size.limit",this.data.allowedSizeInt),ltPropType:"error"}}):"Lower_Size"===t.size?_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.image.unsupported.corrupted.single"),ltPropType:"error"}}):"Exceeds"===t.fileCount?_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.imageupload.allowed.field.length",this.data.cxPropMaxFilesCount),ltPropType:"error"}}):"Invalid_Type"===t.type&&this.invalidFiles.push(e)},onBeforeSendFn:function(){this.data.cxPropUploadProgress&&this.setData("disableAttachBtn",!0)},onDropFn:function(e,t){e!==t&&this.setData("disableAttachBtn",!1)},onBeforeDropFn:function(e,t,o){return this.checkBeforeAdd(o)},onSelectFn:function(e){return this.checkBeforeAdd(e)},onBeforeManualRetryFn:function(e){if(this.data.cxPropAllowedTotalSize&&this.crtTotalSizeInBytes+e.size>this.totalFilesSizeInBytes)return _cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.ImageuploadField.size.limit",this.data.allowedSizeInt),ltPropType:"error"}}),!1},onBeforeShowModal:function(){if(this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",this.$node)},onValidationEndFn:function(){var e=this.invalidFiles;if(e&&e.length){var t=e.length;if(1===t)_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.fileuploader.message.invalidfileType1",e[0].name),ltPropType:"error"}});else if(2===t)_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.fileuploader.message.invalidfileType2",e[0].name,e[1].name),ltPropType:"error"}});else{for(var o="",i=1;i<t;i++)o=o+e[i].name+(i!==t-1?"\n":"");var r=_cruxUtils.getI18n("crm.fileuploader.message.invalidfileType2",e[0].name,"<div id='cxImageUploadRejectId' class='cxDIB cxImgUpdRejectedMoreFilesMsg' lt-prop-title='"+o+"'>"+_cruxUtils.getI18n("crm.fileuploader.message.morefiles",t-1)+"</div>");this.setData({rejectedFileLiteral:r,showRejectMsgBox:!0})}for(var l=this.data.fileList,a=this.validFiles,s=a.length,n=$L("crux-file-upload",this.modalChildComp)[0].component,p=0;p<s;p++){-1!==l.findIndex((function(e){return e.id===a[p].id}))&&(this.validationEndRemove=!0,n.removeFiles(this.validFiles[p].id),this.validationEndRemove=!1)}return this.invalidFiles=[],!1}this.validFiles=[]}},checkBeforeAdd:function(e){return this.data.cxPropMaxFilesCount&&this.data.selectedFileCount+e.length>this.data.cxPropMaxFilesCount?(_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.imageupload.allowed.field.length",this.data.cxPropMaxFilesCount),ltPropType:"error"}}),!1):this.data.cxPropAllowedTotalSize&&e.reduce((function(e,t){return e+t.size}),0)+this.crtTotalSizeInBytes+100>this.totalFilesSizeInBytes?(_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.ImageuploadField.size.limit",this.data.allowedSizeInt),ltPropType:"error"}}),!1):e.find((function(e){return 0===e.size}))?(_cruxUtils.showCustomMessage({params:{ltPropMessage:_cruxUtils.getI18n("crm.image.unsupported.corrupted.single"),ltPropType:"error"}}),!1):void 0},loadEventListener:function(){var e=this.imageElem,t=e[0].getBoundingClientRect();e[0].parentElement.style.width=t.width+"px",e[0].parentElement.style.height=t.height+"px",e.cropper({aspectRatio:this.getData("cxPropAspectRatio"),selection:{top:20,left:20,size:220},minSize:this.getData("cxPropMinSize"),maxSize:this.getData("cxPropMaxSize")}),this._cropperData=e.data("cropper"),e[0].removeEventListener("load",this.listener)},actions:{mouseEnterAction:function(){},saveUpload:function(){this.saveUpload()},attachImage:function(){this._cropperData.getCroppedImage().toBlob(function(e){this.setData("imageData",[new File([e],"aaaa.jpg",{type:"image/jpeg"})]);var t=this._cropperData.getCroppedImage().toDataURL();Lyte.Component.set(this.data.imageData[0],"preview_url",t),this.saveUpload()}.bind(this))},closeModalAction:function(){this.closeModal()},attachAllImage:function(){if(this.getMethods("onConfirm")){var e=$L("crux-file-upload",this.modalChildComp)[0].component.getAllFiles();this.executeMethod("onConfirm",e)}this.closeModal()}},saveUpload:function(){this.getMethods("onCxFileUploadSuccess")&&this.executeMethod("onCxFileUploadSuccess",this.data.imageData),this.setData("showUploadPage",!0),this.closeModal()},closeModal:function(){this._modal.ltProp("show",!1)},convertToBytes:function(){this.bytesConversion()}.observes("cxPropAllowedTotalSize").on("didConnect"),checkTotalFilessize:function(e){var t=this.totalFilesSizeInBytes,o=this.crtTotalSizeInBytes;return!!(t&&o+e>t)},addToTotalFilesSize:function(e){if(this.totalFilesSizeInBytes){var t=this.crtTotalSizeInBytes;this.crtTotalSizeInBytes=t+e,this.setData("currentTotalFileSize",this.fileSizeConvertAsPerUnit(this.crtTotalSizeInBytes))}},removeFromTotalFileSize:function(e){if(this.totalFilesSizeInBytes){var t=this.crtTotalSizeInBytes;this.crtTotalSizeInBytes=t-e,this.setData("currentTotalFileSize",this.fileSizeConvertAsPerUnit(this.crtTotalSizeInBytes))}},validate:function(e){if(this.data.cxPropUploadProgress||e)this.setData("disableAttachBtn",!0);else{var t=this.data.fileList.length;this.data.fileList.filter((function(e){return"success"===e.status})).length===t?this.setData("disableAttachBtn",!1):this.setData("disableAttachBtn",!0)}},setProgressPercentage:function(e){var t;"selectedFileCount"===e.item?(t=100*this.data.selectedFileCount/this.data.cxPropMaxFilesCount,Lyte.objectUtils(this.data.progressProp,"add","countPercentage",t)):(t=100*this.crtTotalSizeInBytes/this.totalFilesSizeInBytes,Lyte.objectUtils(this.data.progressProp,"add","sizePercentage",t))}.observes("selectedFileCount","currentTotalFileSize")},{mixins:["crux-image-preview-util"]}),Lyte.Mixin.register("crux-image-preview-util",{showImagePreview:function(e,t){var o=$L("crux-image-preview")[0];o?(o=o.component).setData(e||{}):o=(o=Lyte.Component.render("crux-image-preview",e,this.$node)).component,o.setMethods(t),o.showPreview(e.cxPropCurrentPreviewId)},constructDataAndShow:function(e,t,o,i,r){var l,a;"single"===r?(a={cxPropPreviewConfiguration:{showDownloadOption:!0,selectors:o}},l={}):(l={},(a={cxPropAjax:this.data.cxPropAjax,cxPropEditable:i,cxPropUniqueSelector:"id",cxPropImages:t,cxPropNameSelector:"name",cxPropSourceKey:this.data.cxPropSourceKey,cxPropPreviewUrlKey:this.data.cxPropPreviewUrlKey,cxPropDownloadKey:this.data.cxPropDownloadKey,cxPropCurrentPreviewId:e}).cxPropPreviewConfiguration={showFileName:!0,showDownloadOption:!0,showThumbnails:!0,allowZoom:!0,selectors:o,showCrop:!0,showInfoIcon:!0,showDeleteIcon:i,showDescription:!0},l.onNameChange=this.nameChange.bind(this),l.onDescChange=this.descriptionChange.bind(this),l.onDelete=this.onDeleteFromPreview.bind(this),l.onCropSuccess=this.onCropSuccessFn.bind(this),l.onClose=this.closePreviewFn.bind(this)),a.cxPropType=this.data.cxPropType,this.showImagePreview(a,l)},checkNameAvailability:function(e){return!!this.usedNames.includes(e)},changeUsedName:function(e,t){var o,i,r=this.usedNames,l=1,a=e,s=a.lastIndexOf(".");if(a=e.substring(0,s),void 0===t&&(t=e.substring(s,e.length)),!r.includes(e))return a+t;o=e.lastIndexOf("("),i=e.lastIndexOf(")");var n=e.substring(o+1,i);return 0!==Number(n)&&Number.isInteger(Number(n))?l=parseInt(n)+1:(o=-1,i=-1),-1!==o&&-1!==i&&(a=e.substring(0,o)),a+"("+l+")"+t},resetModifiedName:function(e,t){var o=this.usedNames,i=o.findIndex((function(e){return e===t}));o.splice(i,1,e)},saveCroppedImage:function(e){var t=this.data.currentImageInfo;Lyte.objectUtils(t,"add","cropErrorType","loading");var o=t.name+t.extn,i=this.getCroppedBlob(e,t.extn.toLowerCase()),r=URL.createObjectURL(i),l=new FormData,a=Lyte.deepCopyObject(this.data.cxPropAjax);l.append("file",i,encodeURIComponent(o)),Lyte.objectUtils(this.data.currentImageConfig,"add","imageLoaded",!1);var s=this;return a.processData=!1,a.data=l,a.type="POST",a.enctype="multipart/form-data",a.contentType=!1,a.success=function(e){if(void 0===e.uploadedImages)return s.setData("customMessages",_cruxUtils.getI18n("crm.image.crop.error")),Lyte.objectUtils(s.data.currentImageConfig,"add","error",!0),LyteColorbox._domEle.style.display="",Lyte.objectUtils(s.data.currentImageConfig,"add","imageLoaded",!0),void s.calculateInitialImageSize();var o=s.data.cxPropImages.findIndex((function(e){return t.id===e.id})),i={lytecboxHref:r,lytecboxDlink:r,lytecboxTitle:s.data.cxPropImages[o][s.data.cxPropNameSelector]};LyteColorbox.replace(o+1,i),s.getMethods("onCropSuccess")&&s.executeMethod("onCropSuccess",e,s.data.cxPropImages[o],r),s.calculateInitialImageSize()},a.error=function(){s.setData("customMessages",_cruxUtils.getI18n("crm.image.crop.error")),Lyte.objectUtils(s.data.currentImageConfig,"add","error",!0),LyteColorbox._domEle.style.display="",Lyte.objectUtils(s.data.currentImageConfig,"add","imageLoaded",!1),s.calculateInitialImageSize()},$L.ajax(a)},getCroppedBlob:function(e,t){var o=e.height,i=e.width,r=t.split(".")[1],l="image/"+("jpg"===r?"jpeg":r);return o<4e3&&i<4e3?this.dataURItoBlob(e.toDataURL(l,.85)):o<8e3&&i<8e3?this.dataURItoBlob(e.toDataURL(l,.5)):this.dataURItoBlob(e.toDataURL(l,.2))},dataURItoBlob:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var o=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:o})},bytesConversion:function(){var e=this.data.cxPropAllowedTotalSize;if(e){var t=e.substring(e.length-2),o=parseInt(e.substring(0,e.length-2)),i=["KB","MB","GB"],r=i.indexOf(t);r>-1&&(this.totalFilesSizeInBytes=o*Math.pow(1e3,r+1),this.setData("totalFileUnit",i[r]))}},fileSizeConvertAsPerUnit:function(e){var t=0;return t=Math.max(t,["Bytes","KB","MB","GB"].indexOf(this.data.totalFileUnit)),parseInt(e/Math.pow(1e3,t)*Math.pow(10,2))/Math.pow(10,2)}}),Lyte.Component.registerHelper("renderNameToolTip",(function(e,t){if(e){var o=e.substring(0,e.lastIndexOf(".")),i=e.substring(e.lastIndexOf("."),e.length);return t?i.substring(1,i.length)+"."+o:o+i}return e})),Lyte.Component.register("crux-image-preview",{_template:'<template tag-name="crux-image-preview"> <lyte-messagebox id="tempraryError" lt-prop-yield="true" lt-prop-show="{{lbind(currentImageConfig.error)}}" lt-prop-duration="3000" lt-prop-type="error"> <template is="registerYield" yield-name="messageboxYield"> <span> {{customMessages}} </span> </template> </lyte-messagebox> <lyte-colorbox lt-prop-id="cxImageColorBox" class="cxImagePreview" lt-prop-class="cxImagePreviewGallery" lt-prop-add-orientation="true" lt-prop-yield="true" lt-prop-selectors="[&quot;{{cxPropPreviewConfiguration.selectors}}&quot;]" lt-prop-esc-key="true" lt-prop-wheel-zoom="false" lt-prop-animation="slide" lt-prop-overlay-close="false" lt-prop-width="80%" lt-prop-height="{{currentImageInfo.contentHeight}}px;" lt-prop-type="image" on-load="{{method(&quot;currentImageLoadCallback&quot;)}}" on-failure="{{method(&quot;currentImageFailCallback&quot;)}}" on-navigate="{{method(&quot;navigateCallback&quot;)}}" on-open="{{method(\'onOpenColorbox\')}}" on-before-close="{{method(&quot;colorboxBeforeClose&quot;)}}" on-crop="{{method(\'onCropImage\')}}" on-crop-open="{{method(&quot;cropperOpen&quot;)}}" on-ratio-set="{{method(\'setHeightAndWidth\')}}" on-rotate="{{method(\'setHeightAndWidth\')}}" on-image-cropped="{{method(\'onCropperFinish\')}}" on-crop-close="{{method(\'onCropperCloseMthd\')}}"> <template is="registerYield" yield-name="colorBoxYield"> <lyte-colorbox-container class="cxImgPrevContainer"> <template is="if" value="{{isCropperOpen}}"><template case="true"><div class="cxImgCropContainer" tabindex="0"> <div class="cxImgCropRatioWrap"> <div class="cxImgCropIconWrap lyteColorboxCrop {{if(ifEquals(cropperProp.selectedRatio,\'n:n\'),\'cxSelectedRatio\',\'\')}}" lt-prop-title="{{cruxGetI18n(\'crm.image.n.n\')}}" data-ratio="n:n" data-zcqa="cropper_n_n"> <span class="cxImgCropRatioCustomIcon"></span> </div> <div class="cxImgCropIconWrap lyteColorboxCrop {{if(ifEquals(cropperProp.selectedRatio,\'2:2\'),\'cxSelectedRatio\',\'\')}}" lt-prop-title="{{cruxGetI18n(\'crm.image.2.2\')}}" data-ratio="2:2" data-zcqa="cropper_2_2"> <span class="cxImgCropRatioSqaureIcon"></span> </div> <div class="cxImgCropIconWrap lyteColorboxCrop {{if(ifEquals(cropperProp.selectedRatio,\'4:3\'),\'cxSelectedRatio\',\'\')}}" lt-prop-title="{{cruxGetI18n(\'crm.image.4.3\')}}" data-ratio="4:3" data-zcqa="cropper_4_3"> <span class="cxImgCropRatioFourThirdIcon"></span> </div> <div class="cxImgCropIconWrap lyteColorboxCrop {{if(ifEquals(cropperProp.selectedRatio,\'16:9\'),\'cxSelectedRatio\',\'\')}}" lt-prop-title="{{cruxGetI18n(\'crm.image.16.9\')}}" data-ratio="16:9" data-zcqa="cropper_16_9"> <span class="cxImgCropRatioLandscapeIcon"></span> </div> </div> <span class="cxImgCropSeparationSpan"></span> <div class="cxImgCropWidthHeightInputCont"> <div class="cxImgCropWHInputDiv">{{cruxGetI18n(\'zc.editor.width\')}} <lyte-number data-zcqa="cropper_widthBox" lt-prop-value="{{lbind(cropperProp.width)}}" lt-prop-min="{{cropperProp.minWidth}}" lt-prop-max="{{cropperProp.maxWidth}}" lt-prop-ignore-symbols="true" on-value-change="{{method(\'imageSizeAdjustFn\',\'width\')}}"> </lyte-number>px</div> <div class="cxImgCropIconWrap cxImgCropIconCont" data-zcqa="cropper_swapDimensions" lt-prop-title="{{cruxGetI18n(\'crm.image.height.width.swap\')}}" onclick="{{action(\'swapHeightAndWidth\')}}"> <span class="cxImgCropSwapIcon"></span> </div> <div class="cxImgCropWHInputDiv">{{cruxGetI18n(\'ze.editor.height\')}} <lyte-number data-zcqa="cropper_HeightBox" lt-prop-value="{{lbind(cropperProp.height)}}" lt-prop-min="{{cropperProp.minHeight}}" lt-prop-max="{{cropperProp.maxHeight}}" lt-prop-ignore-symbols="true" on-value-change="{{method(\'imageSizeAdjustFn\',\'height\')}}"> </lyte-number>px</div> </div> <span class="cxImgCropSeparationSpan"></span> <div class="cxImgCropIconWrap cxImgCropIconCont lyteColorboxCrop" lt-prop-title="{{cruxGetI18n(\'crm.image.rotate.image\')}}" data-rotate="true" data-zcqa="rotateWhileEdit_preview"> <span class="cxImgCropRotateIcon" data-rotate="true"></span> </div> <div class="cxImgCropBtnWrap"> <lyte-button lt-prop-title="" lt-prop-size="small" lt-prop-appearance="secondary" data-zcqa="closeCropArea_preview_empty" onclick="{{action(\'onCropCancel\')}}"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.cancel\')}} </template>" </lyte-button> <lyte-button lt-prop-size="small" lt-prop-disabled="{{cropperProp.disableSave}}" data-zcqa="closeCropArea_preview_value" lt-prop-title="" lt-prop-appearance="primary" onclick="{{action(\'onCropSave\')}}"> <template is="registerYield" yield-name="text"> {{cruxGetI18n(\'crm.button.save\')}} </template> </lyte-button> </div> </div></template></template> <lyte-colorbox-content class="cxImgPrevContent"> <lyte-colorbox-loading-icon class="cxImgCropLoadingIconWrap"> <template is="if" value="{{expHandlers(currentImageConfig.imageLoaded,\'!\')}}"><template case="true"> <div class="cxImageCropLoadWrap"> <div class="cxImageCropLoadRotateElem"></div> </div> </template></template> </lyte-colorbox-loading-icon> <span class="lyteColorboxLoadingImg"></span> <template is="if" value="{{expHandlers(cxPropImages.length,\'>\',1)}}"><template case="true"> <lyte-colorbox-previous lt-prop-title="{{cruxGetI18n(\'crm.label.previous\')}}" data-zcqa="image_navigation_previous" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}" lt-prop-tooltip-class="cxImagePreviewTooltip"> <div class="lyteColorboxPreviousIcon"></div> </lyte-colorbox-previous> <lyte-colorbox-next lt-prop-title="{{cruxGetI18n(\'crm.label.next\')}}" data-zcqa="image_navigation_next" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}" lt-prop-tooltip-class="cxImagePreviewTooltip"> <div class="lyteColorboxNextIcon"></div> </lyte-colorbox-next> </template></template> </lyte-colorbox-content> <div class="{{if(isCropperOpen,\'cxHide\',\'\')}}" tabindex="0"> <lyte-colorbox-header class="cxImgPrevHeader"> <div class="cxImagePreviewHeaderWrap"> <template is="if" value="{{cxPropPreviewConfiguration.showFileName}}"><template case="true"> <div class="cxImgPrevNameWrap"> <template is="if" value="{{cxPropEditable}}"><template case="true"> <template is="if" value="{{currentImageConfig.nameEdit}}"><template case="true"> <lyte-input lt-prop-class="cxImageNameInput" class="{{concat(\'cxImageNameInputWrap\',if(cxPropEditable,\'\',\'cxEventNone \'))}}" lt-prop-placeholder="{{cruxGetI18n(\'crm.image.empty.name.placeholder\')}}" lt-prop-value="{{lbind(currentImageInfo.newName)}}" lt-prop-maxlength="100" lt-prop-appearance="box" lt-prop-type="text" on-blur="{{method(\'changeNameOnBlur\',currentImageInfo.name,currentImageInfo.id)}}" onkeyup="{{action(\'changeNameOnEnter\',currentImageInfo.name,currentImageInfo.id,event)}}" data-zcqa="imageName_input"></lyte-input> </template><template case="false"> <div class="{{concat(\' \',if(cxPropEditable,\' \',\'cxEventNone \'))}}" onclick="{{action(\'openNameEditArea\',currentImageInfo.name)}}" data-zcqa="imageName_Parent_Div"> <div class="cxImgPrevNameEditWrap" lt-prop-title="{{renderNameToolTip(concat(currentImageInfo.name,currentImageInfo.extn),cxPropIsRtlEnabled)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" lt-prop-tooltip-class="cxImagePreviewTooltip"> <span class="cxImgPrevFileName">{{currentImageInfo.name}}</span> <span class="cxImgPrevFileExtn">{{currentImageInfo.extn}}</span> <span class="cxImgPrevFileNameEditIcon" lt-prop-title="{{cruxGetI18n(\'crm.label.edit\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}" lt-prop-tooltip-class="cxImagePreviewTooltip"></span> </div> </div> </template></template> </template><template case="false"> <div data-zcqa="imageName_Parent_Div"> <div class="cxImgPrevNameViewWrap" lt-prop-title="{{renderNameToolTip(concat(currentImageInfo.name,currentImageInfo.extn),cxPropIsRtlEnabled)}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;}" lt-prop-tooltip-class="cxImagePreviewTooltip"> <span class="cxImgPrevFileName">{{currentImageInfo.name}}</span> <span class="cxImgPrevFileExtn">{{currentImageInfo.extn}}</span> </div> </div> </template></template> </div> </template></template> <div class="cxImgPrevHeaderActionsWrap"> <template is="if" value="{{cxPropPreviewConfiguration.showCrop}}"><template case="true"> <template is="if" value="{{cxPropEditable}}"><template case="true"><span lt-prop-title="{{if(ifEquals(currentImageInfo.extn,\'.gif\'),cruxGetI18n(\'crm.image.error.gif\'),cruxGetI18n(\'crm.image.crop.and.rotate\'))}}" lt-prop-tooltip-class="cxImagePreviewTooltip" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"> <lyte-colorbox-crop class="{{if(ifEquals(currentImageInfo.extn,\'.gif\'),\'lyteColorboxDisabled\')}} {{if(currentImageConfig.imageLoaded,\'\',\'lyteColorboxDisabled\')}}"> <span class="cxImgPrevHeaderActionIcon" data-zcqa="wayToEditPage_preview" onclick="{{action(\'openCropper\')}}"> <span class="cxImgPrevHeadActionCropIcon"></span> </span> </lyte-colorbox-crop> </span></template></template> </template></template> <template is="if" value="{{cxPropPreviewConfiguration.showDownloadOption}}"><template case="true"> <lyte-colorbox-download> <a href="javascript:;" class="cxImgPrevHeaderActionIcon" data-zcqa="image_download" lt-prop-title="{{cruxGetI18n(\'crm.view.attachment.download\')}}" lt-prop-tooltip-class="cxImagePreviewTooltip" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"> <span class="cxImgPrevHeadActionDownloadIcon"></span> </a> </lyte-colorbox-download> </template></template> <template is="if" value="{{cxPropPreviewConfiguration.showInfoIcon}}"><template case="true"> <div class="cxImgPrevInfoIconWrap cxImgPrevHeaderActionIcon" lyte-hovercard="true" data-zcqa="infoIcon_hover_action"> <span class="cxImgPrevHeadActionInfoIcon"></span> </div> <lyte-hovercard class="imageExtraInfoDetails" lt-prop-auto-show="true" lt-prop-popover-wrapper-class="cxImagePreviewInfoDetailPopover" lt-prop-show="{{currentImageConfig.imageExtraInfo}}" lt-prop-placement="bottom" lt-prop-freeze="false" lt-prop-show-close-button="false" lt-prop-origin-elem=".cxImgPrevInfoIconWrap"> <template is="registerYield" yield-name="hoverCardYield"> <div class="cxImgPrevInfoWrap"> <span class="cxImgPrevInfoDetailPopLabel">{{cruxGetI18n(\'crm.image.resolution\')}}</span> <span class="cxImgPrevInfoDetailValue">{{currentImageInfo.resolution}}</span> </div> <div class="cxImgPrevInfoWrap"> <span class="cxImgPrevInfoDetailPopLabel">{{cruxGetI18n(\'crm.attachment.size\')}}</span> <span class="cxImgPrevInfoDetailValue">{{currentImageInfo.size}}</span> </div> </template> </lyte-hovercard> </template></template> <template is="if" value="{{expHandlers(cxPropPreviewConfiguration.showDeleteIcon,\'&amp;&amp;\',cxPropEditable)}}"><template case="true"> <span class="cxImgPrevHeaderActionIcon cxImgPrevDeleteIconWrap" data-zcqa="wayToEditPage_preview_delete" onclick="{{action(\'deleteCurrentImage\',currentImageInfo[cxPropUniqueSelector])}}" lt-prop-title="{{cruxGetI18n(\'crm.label.delete\')}}" lt-prop-tooltip-class="cxImagePreviewTooltip" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"> <span class="cxImgPrevHeadActionDeleteIcon"></span> </span> </template></template> </div> <lyte-colorbox-close class="{{if(currentImageConfig.imageLoaded,\'\',\'lyteColorboxDisabled\')}}" data-zcqa="image_colourbox_close" lt-prop-title="{{cruxGetI18n(\'crm.label.close\')}}" lt-prop-tooltip-class="cxImagePreviewTooltip"></lyte-colorbox-close> </div> </lyte-colorbox-header> <div class="cxImagePreviewFooterWrap"> <template is="if" value="{{cxPropPreviewConfiguration.showDescription}}"><template case="true"> <lyte-colorbox-description> <div class="cxImageDescWrapContainer"> <div class="cxImageDescriptionWrap {{if(cxPropEditable,\' \',\'eventNone \')}}"> <template is="if" value="{{currentImageConfig.showImageDesc}}"><template case="true"> <p class="cxImgPrevDescSavedValue" data-zcqa="editThisDescription_preview" onclick="{{action(\'editThisDescription\',this)}}">{{currentImageInfo.newDesc}}</p> </template><template case="false"><template is="if" value="{{cxPropEditable}}"><template case="true"><template is="if" value="{{currentImageConfig.showImageDescInput}}"><template case="true"> <lyte-input class="cxImageDescInputWrap" lt-prop-appearance="box" lt-prop-placeholder="{{cruxGetI18n(\'crm.image.description\')}}" lt-prop-class="cxImageDescInputTextarea" lt-prop-type="textarea" lt-prop-update-delay="0" lt-prop-value="{{lbind(currentImageInfo.newDesc)}}" lt-prop-maxlength="255" lt-prop-text-area-resize=" { &quot;vertical&quot; : false , &quot;horizontal&quot; : false } " on-blur="{{method(\'changeDescOnblur\',currentImageInfo.desc,currentImageInfo.id)}}" onkeyup="{{action(\'changeDescOnEnter\',currentImageInfo.desc,currentImageInfo.id,event)}}" data-zcqa="imageDescInputWrap_input"> </lyte-input> </template><template case="false"> <a href="javascript:;" class="cxImgPrevDescPlaceholder" data-zcqa="openAddDescription_preview" onclick="{{action(\'openAddDescription\')}}">{{cruxGetI18n(\'crm.image.description\')}}</a> </template></template></template></template></template></template> </div> </div> </lyte-colorbox-description> </template></template> <template is="if" value="{{cxPropPreviewConfiguration.allowZoom}}"><template case="true"> <div class="lyteColorboxUtilDiv cxImgPrevZoomInOutWrap"> <span class="cxImageZoomAction cxImageZoomInAction cxImagePrevZoomInAction cxFlexCenter {{if(zoomConfiguration.plusDisabled,\'lyteColorboxDisabled \',\' \')}}" data-zcqa="image_zoomin" onclick="{{action(\'zoomFn\',\'plusDisabled\',\'in\')}}" lt-prop-title="{{cruxGetI18n(\'crm.image.zoom.in\')}}" lt-prop-tooltip-class="cxImagePreviewTooltip" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"> <span class="cxImgPreviewZoomInIcon"></span> </span> <div class="cxImageZoomRatio"> <lyte-dropdown lt-prop-position="up" on-option-selected="{{method(&quot;zoomByPerspective&quot;)}}" on-hide="{{method(\'hideDropdown\')}}" class="" lt-prop-disabled-list="{{zoomConfiguration.zoomDisabledList}}" on-show="{{method(\'onshowDropdown\')}}" lt-prop-hover="true" lt-prop-placeholder="dropDown" data-zcqa="image_ratio_container"> <template is="registerYield" yield-name="yield"> <lyte-drop-button style="border:none;" class="cxImgPrevZoomRatioWrap"> <span> {{zoomRatio}}% </span> </lyte-drop-button> <lyte-drop-box class="cxImgPreviewScaleMenu"> <lyte-drop-body> <lyte-drop-item data-value="actual" data-zcqa="image_zoom_actual" class="cxImgPreviewScaleMenuLabel">{{cruxGetI18n(\'crm.image.actual.size\')}}</lyte-drop-item> <lyte-drop-item data-value="reset" data-zcqa="image_zoom_reset" class="cxImgPreviewScaleMenuLabel">{{cruxGetI18n(\'crm.image.reset\')}}</lyte-drop-item> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> <span class="cxImageZoomAction cxImageZoomOutAction cxImagePrevZoomInAction cxFlexCenter {{if(zoomConfiguration.minusDisabled,\'lyteColorboxDisabled \',\' \')}}" data-zcqa="image_zoomout" onclick="{{action(\'zoomFn\',\'minusDisabled\',\'out\')}}" lt-prop-title="{{getI18n(\'crm.image.zoom.out\')}}" lt-prop-tooltip-class="cxImagePreviewTooltip" lt-prop-tooltip-config="{&quot;position&quot; : &quot;default&quot;}"> <span class="cxImgPreviewZoomOutIcon"></span> </span> </div> </template></template> <template is="if" value="{{cxPropPreviewConfiguration.showThumbnails}}"><template case="true"> <lyte-colorbox-thumbnail class="cxImgPrevThumbnail"> <ul class="cxImgPrevThumbListWrap"> <template is="for" items="{{cxPropImages}}" item="image" index="index"> <li class="cxImgPrevThumbImgWrap {{if(ifEquals(currentImageInfo.id,image.id),\'cxSelected\',\'\')}} lyteColorboxThumb" data-pos="{{cruxArithResult(index,\'+\',1)}}" data-thumb-val="{{cruxArithResult(index,\'+\',1)}} {{cruxGetI18n(\'crm.label.lowercase.of\')}} {{cxPropImages.length}}" onclick="{{action(\'previewThisImage\',image[cxPropUniqueSelector],index)}}" data-zcqa="imagePreview_{{index}}"> <img class="cxImgPrevThumbImg" src="{{image[cxPropSourceKey]}}" id="{{image[cxPropUniqueSelector]}}_preview"> </li> </template> </ul> </lyte-colorbox-thumbnail> </template></template> <div class="cxImagePrevCountDiv"> {{currentImageInfo.index}} {{cruxGetI18n(\'crm.label.lowercase.of\')}} {{cxPropImages.length}} </div> </div> </div> </lyte-colorbox-container> </template> </lyte-colorbox> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1,1]},{type:"attr",position:[0,1,3]},{type:"attr",position:[0,1,5]},{type:"attr",position:[0,1,7]},{type:"text",position:[0,5,1,0]},{type:"attr",position:[0,5,1,2]},{type:"componentDynamic",position:[0,5,1,2]},{type:"attr",position:[0,5,3]},{type:"text",position:[0,5,5,0]},{type:"attr",position:[0,5,5,2]},{type:"componentDynamic",position:[0,5,5,2]},{type:"attr",position:[0,9]},{type:"attr",position:[0,11,1]},{type:"registerYield",position:[0,11,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[0,11,1]},{type:"attr",position:[0,11,3]},{type:"registerYield",position:[0,11,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[0,11,3]}]}},default:{}},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,3,5]},{type:"if",position:[1,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1,1,1]},{type:"if",position:[1,5,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,1,5]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,0]},{type:"text",position:[1,1,3,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5,1,1,3,1]},{type:"if",position:[1,5,1,1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,1,1]},{type:"componentDynamic",position:[0,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5,1,1,3,3]},{type:"if",position:[1,5,1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,1,1,3,5]},{type:"if",position:[1,5,1,1,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"text",position:[3,1,0]},{type:"text",position:[3,3,0]}]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"attr",position:[1,5,1,1,3,7]},{type:"if",position:[1,5,1,1,3,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,5,1,1,5]},{type:"componentDynamic",position:[1,5,1,1,5]},{type:"componentDynamic",position:[1,5,1]},{type:"attr",position:[1,5,3,1]},{type:"if",position:[1,5,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,3,3]},{type:"if",position:[1,5,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"registerYield",position:[1,3,1,1],dynamicNodes:[{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,1,0]},{type:"componentDynamic",position:[3,1,1]},{type:"text",position:[3,1,3,0]},{type:"componentDynamic",position:[3,1,3]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,5]}]}},default:{}},{type:"attr",position:[1,5,3,5]},{type:"if",position:[1,5,3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[1,5,3,7,1]},{type:"text",position:[1,5,3,7,3]},{type:"text",position:[1,5,3,7,5]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}],_observedAttributes:["cxPropPreviewConfiguration","cxPropCurrentPreviewId","cxPropUniqueSelector","cxPropImages","cxPropSourceKey","cxPropPreviewUrlKey","cxPropDownloadKey","cxPropEditable","currentImageConfig","currentImageInfo","cxPropNameSelector","cxPropPreviewZcqa","cxPropSizeSelector","zoomConfiguration","customMessages","cxPropType","cxPropAjax","zoomRatio","cxPropMaxLengthObj","showCropper","cxPropIsRtlEnabled","isCropperOpen","cropperProp"],data:function(){return{cxPropPreviewConfiguration:Lyte.attr("object",{default:{}}),cxPropCurrentPreviewId:Lyte.attr("string"),cxPropUniqueSelector:Lyte.attr("string",{default:"id"}),cxPropImages:Lyte.attr("array",{default:[]}),cxPropSourceKey:Lyte.attr("string",{default:"src"}),cxPropPreviewUrlKey:Lyte.attr("string",{default:"original_src"}),cxPropDownloadKey:Lyte.attr("string",{default:"download_url"}),cxPropEditable:Lyte.attr("boolean",{default:!0}),currentImageConfig:Lyte.attr("object",{default:{}}),currentImageInfo:Lyte.attr("object",{default:{}}),cxPropNameSelector:Lyte.attr("string",{default:"name"}),cxPropPreviewZcqa:Lyte.attr("string",{default:"openPreview_view"}),cxPropSizeSelector:Lyte.attr("string",{default:"stream"}),zoomConfiguration:Lyte.attr("object",{default:{zoomRatioArray:[8.33,12.5,16.67,25,33.33,50,66.67,100,200,300],plusDisabled:!1,minusDisabled:!1}}),customMessages:Lyte.attr("string",{default:""}),cxPropType:Lyte.attr("string",{default:"single"}),cxPropAjax:Lyte.attr("object"),zoomRatio:Lyte.attr("number"),cxPropMaxLengthObj:Lyte.attr("object",{default:{nameLength:104,descriptionLength:255}}),showCropper:Lyte.attr("boolean",{default:!1}),cxPropIsRtlEnabled:Lyte.attr("boolean",{default:"undefined"!=typeof Crm&&Crm.userDetails.RTL_ENABLED}),isCropperOpen:Lyte.attr("boolean",{default:!1}),cropperProp:Lyte.attr("object",{default:{}})}},showPreview:function(e){if("single"===this.data.cxPropType){var t=$L(this.data.cxPropPreviewConfiguration.selectors)[0];this.$node.querySelector("lyte-colorbox").launch(t)}else this.calcFn=this.calculateInitialImageSize.bind(this),document.addEventListener("resize",this.calcFn,!0),this.processFurther=!0,this.showPreviewWithDetails(e,void 0)},didConnect:function(){this.processFurther=!0,this.$node.showSinglePreview=function(e){this.querySelector("lyte-colorbox").launch(e)}},actions:{changeNameOnEnter:function(e,t,o){this.data.cxPropPreviewConfiguration.showFileName&&13===o.which&&this.saveImageName(e,t)},changeDescOnEnter:function(e,t,o){this.data.cxPropPreviewConfiguration.showDescription&&13===o.which&&(o.preventDefault(),this.saveDescription(e,t))},openAddDescription:function(){if(this.data.cxPropEditable&&this.data.cxPropPreviewConfiguration.showDescription){if(!this.processFurther)return void Lyte.objectUtils(this.getData("currentImageConfig"),"add","error",!0);this.constructDescStructure(!1,!0,void 0),Lyte.objectUtils(this.data.currentImageInfo,"add","newDesc",""),Lyte.objectUtils(this.data.currentImageInfo,"add","desc",""),$L(".cxImageDescInputWrap").focus()}},openNameEditArea:function(){if(this.data.cxPropEditable&&this.data.cxPropPreviewConfiguration.showFileName){if(!this.processFurther)return void Lyte.objectUtils(this.data.currentImageConfig,"add","error",!0);Lyte.objectUtils(this.data.currentImageConfig,"add","nameEdit",!0);var e=$L(".cxImageNameInputWrap").find("input")[0],t=e.value.length;e.focus(),e.scrollLeft=e.scrollWidth,e.setSelectionRange(t,t)}},editThisDescription:function(){if(this.data.cxPropEditable&&this.data.cxPropPreviewConfiguration.showDescription){if(!this.processFurther)return void Lyte.objectUtils(this.data.currentImageConfig,"add","error",!0);this.constructDescStructure(!1,!0,!1),this.calculateInitialImageSize(),$L(".cxImageDescInputWrap").focus()}},previewThisImage:function(e,t){this.showPreviewWithDetails(e,t,!0)},deleteCurrentImage:function(e){if(this.data.cxPropPreviewConfiguration.showDeleteIcon&&this.data.cxPropEditable)for(var t=this.data.cxPropImages,o=t.length,i=$L("lyte-colorbox",this.$node)[0],r=this.data.cxPropUniqueSelector,l=0;l<o;l++)if(t[l][r]===e){var a=Lyte.arrayUtils(t,"removeAt",l,1)[0];i.delete(l+1);var s=l===o-1?0:l;if(void 0!==t[s]&&this.showPreviewWithDetails(t[s][r],l,!0),this.getMethods("onDelete")&&this.executeMethod("onDelete",a),0===t.length)return this.closePreview();break}},showImgDetailsPop:function(e){Lyte.objectUtils(this.data.currentImageConfig,"add","imageExtraInfo",e)},openCropper:function(){},onCropCancel:function(){this.cropCancel=!0,$L("lyte-colorbox",this.$node)[0].crop("cancel"),this.setData("isCropperOpen",!1)},onCropSave:function(){$L("lyte-colorbox",this.$node)[0].crop()},swapHeightAndWidth:function(){$L("lyte-colorbox",this.$node)[0].swapAspectRatio()},zoomFn:function(e,t){var o=this.data.zoomConfiguration;if(this.data.cxPropPreviewConfiguration.allowZoom&&!1===o[e]){var i,r=o.zoomRatioArray,l=this.getData("zoomRatio"),a=r.length;if("out"===t){for(var s=a-1;s>=0;s--)if(l>r[s]){i=r[s];break}}else for(var n=0;n<a;n++)if(l<r[n]){i=r[n];break}void 0!==i&&($L("lyte-colorbox",this.$node)[0].zoomBy(i),this.setData("zoomRatio",i))}}},methods:{changeNameOnBlur:function(e,t){this.data.cxPropPreviewConfiguration.showFileName&&this.saveImageName(e,t)},onOpenColorbox:function(){$L("lyte-colorbox",this.$node)[0].setData("ltPropCrop",this.data.cxPropEditable)},changeDescOnblur:function(e,t){this.data.cxPropPreviewConfiguration.showDescription&&this.saveDescription(e,t)},currentImageLoadCallback:function(e){Lyte.objectUtils(this.data.currentImageConfig,"add","imageLoaded",!1),e.classList.add("dN"),$L(".lyteColorboxDisplay").addClass("cxImagePreviewColorbox"),setTimeout(function(){this.calculateInitialImageSize()}.bind(this),0)},currentImageFailCallback:function(e){e.classList.remove("vH"),Lyte.objectUtils(this.data.currentImageConfig,"add","imageLoaded",!0),$L(".lyteColorboxDisplay").removeClass("cxImagePreviewColorbox")},navigateCallback:function(e,t,o){$L(".imageEditParent").is(":visible")||(this.processFurther?this.showPreviewWithDetails(this.data.cxPropImages[o-1][this.data.cxPropUniqueSelector],o-1,!1):Lyte.objectUtils(this.getData("currentImageConfig"),"add","error",!0))},colorboxBeforeClose:function(){var e=!0;return this.getMethods("onBeforePreviewClose")&&(e=this.executeMethod("onBeforePreviewClose")),!1!==e&&this.closePreview()},zoomByPerspective:function(e,t){if(this.data.cxPropPreviewConfiguration.allowZoom){var o=$L("lyte-colorbox",this.$node)[0];"actual"===t?(o.zoomBy(100),this.setData("zoomRatio",100)):(o.zoomBy("reset"),this.setData("zoomRatio",this.getData("zoomConfiguration.resetRatio")))}},hideDropdown:function(e,t){t.setData("ltPropSelected","")},onshowDropdown:function(){var e=$L(".cxImgPreviewScaleMenu")[0],t=$L(".cxImgPrevZoomInOutWrap")[0],o=t.offsetLeft-t.offsetWidth/2+4;e.style.left=o+"px"},cropperOpen:function(){$L("lyte-colorbox",this.$node)[0].zoomBy("reset"),this.setData("zoomRatio",this.data.zoomConfiguration.resetRatio),this.setData("isCropperOpen",!0);var e=LyteColorbox._domEle,t=e.offsetWidth,o=e.offsetHeight,i=this.data.cropperProp;this.cropping=!0,Lyte.objectUtils(i,"add","minWidth",15),Lyte.objectUtils(i,"add","minHeight",15),Lyte.objectUtils(i,"add","maxWidth",t),Lyte.objectUtils(i,"add","maxHeight",o),Lyte.objectUtils(i,"add","width",String(t)),Lyte.objectUtils(i,"add","height",String(o)),Lyte.objectUtils(i,"add","disableSave",!0),this.cropping=!1},imageSizeAdjustFn:function(e,t){this.cropping||("width"===e?LyteColorbox._component.$node.cropperWidth(t.newValue):LyteColorbox._component.$node.cropperHeight(t.newValue),Lyte.objectUtils(this.data.cropperProp,"add","disableSave",!1))},onCropImage:function(e,t){this.cropping=!0;var o=this.data.cropperProp;Lyte.objectUtils(o,"add","width",e),Lyte.objectUtils(o,"add","height",t),Lyte.objectUtils(o,"add","disableSave",!1),this.cropping=!1},setHeightAndWidth:function(e,t){var o=this.data.cropperProp;if(o.width!==String(e)||o.height!==String(t)){var i=$L(".lyteCropArea")[0],r=i.offsetWidth,l=i.offsetHeight;Lyte.objectUtils(o,"add","maxWidth",r),Lyte.objectUtils(o,"add","maxHeight",l),Lyte.objectUtils(o,"add","width",e),Lyte.objectUtils(o,"add","height",t),Lyte.objectUtils(o,"add","disableSave",!1)}else event.target.getAttribute("data-rotate")&&Lyte.objectUtils(o,"add","disableSave",!1)},onCropperFinish:function(e){if(this.setData("isCropperOpen",!1),!this.cropCancel)return this.saveCroppedImage(e);this.cropCancel=!1},onCropperCloseMthd:function(){this.setData("isCropperOpen",!1)}},disableZoomButtons:function(){var e=this.getData("zoomConfiguration"),t=e.zoomRatioArray,o=t.length,i=[],r=this.data.zoomRatio;r===e.resetRatio&&i.push("reset"),100===r&&i.push("actual"),Lyte.objectUtils(e,"add","zoomDisabledList",i),r<=e.resetRatio?Lyte.objectUtils(e,"add","imageZoomState",!1):Lyte.objectUtils(e,"add","imageZoomState",!0),r<=t[0]?Lyte.objectUtils(e,"add","minusDisabled",!0):Lyte.objectUtils(e,"add","minusDisabled",!1),r>=t[o-1]?Lyte.objectUtils(e,"add","plusDisabled",!0):Lyte.objectUtils(e,"add","plusDisabled",!1)}.observes("zoomRatio"),showPreviewWithDetails:function(e,t,o){if(this.processFurther){var i=this.data.cxPropPreviewConfiguration,r=i.currentId;if(null==t||r!==e){this.usedNames=[];var l,a=this.data.currentImageConfig,s=this.data.cxPropNameSelector,n=this.data.currentImageInfo,p=this.data.cxPropImages,d=this.data.cxPropUniqueSelector,c=this.data.cxPropPreviewUrlKey,y=p.find((function(t){return t[d]===e}));this.currentImageId=e;for(var u=0;u<p.length;u++)p[u][d]===e&&(y=p[u],l=u),this.usedNames.push(p[u][s]);if(Lyte.objectUtils(a,"add","imageLoaded",!1),Lyte.objectUtils(n,"add","id",y[d]),Lyte.objectUtils(n,"add","previewUrl",y[c]),Lyte.objectUtils(n,"add","cropErrorType","loading"),Lyte.objectUtils(n,"add","index",l+1),this.setData("cxPropPreviewConfiguration.currentId",e),i.showFileName){var m=y[s],h=m.lastIndexOf("."),x=m.substring(0,h),g=m.substring(h,m.length);Lyte.objectUtils(n,"add","name",x),Lyte.objectUtils(n,"add","newName",x),Lyte.objectUtils(n,"add","extn",g)}if(i.showDescription){var f=y.description;Lyte.objectUtils(n,"add","desc",f||""),Lyte.objectUtils(n,"add","newDesc",f||""),f?this.constructDescStructure(!1,!1,!0):this.constructDescStructure(!0,!1,!1)}if(void 0!==t&&!0===o)LyteColorbox.open(Number(t)+1);else if(void 0===t){var b=event.target.closest(".imagePreviewSelector");LyteColorbox.launch(b)}Lyte.objectUtils(this.data.currentImageConfig,"add","nameEdit",!1),this.calculateInitialImageSize()}}else Lyte.objectUtils(this.getData("currentImageConfig"),"add","error",!0)},calculateInitialImageSize:function(){var e=LyteColorbox._domEle,t=this.data.currentImageInfo;if(Lyte.objectUtils(t,"add","cropErrorType","loading"),e){var o=e.naturalHeight;if(void 0!==e.getAttribute("data-orientation")){var i=parseInt(e.getAttribute("data-orientation"));6!==i&&8!==i||(o=e.naturalWidth)}if(o&&o>0){var r=this.data.currentImageConfig,l=this.data.cxPropPreviewConfiguration;Lyte.objectUtils(t,"add","cropErrorType","none");var a=$L(".cxImgPrevHeader").outerHeight(),s=$L(".cxImagePreviewFooterWrap").outerHeight(),n=window.innerHeight-(a+s)-78;if(Lyte.objectUtils(t,"add","contentHeight",n),e.width<=15||e.height<=15?Lyte.objectUtils(t,"add","cropErrorType","best_fit"):".gif"===t.extn&&Lyte.objectUtils(t,"add","cropErrorType","type_gif"),!0===l.allowZoom){var p=$L(e).data("lytecbSize");Lyte.objectUtils(this.getData("zoomConfiguration"),"add","resetRatio",p),this.setData("zoomRatio",p)}if(!0===l.showInfoIcon){var d=this;Lyte.objectUtils(t,"add","resolution",e.naturalWidth+" x "+e.naturalHeight+" "+_cruxUtils.getI18n("crm.image.width.px"));var c=this.data.cxPropImages.find((function(e){return e[d.data.cxPropUniqueSelector]===d.currentImageId}));Lyte.objectUtils(t,"add","size",_lyteUiUtils.lyteUiFileSize(c[this.data.cxPropSizeSelector],"",1))}Lyte.objectUtils(r,"add","imageLoaded",!0),e.classList.remove("dN")}}},saveImageName:function(e,t){var o=this.data.currentImageInfo,i=o.newName,r=this.data.cxPropImages,l=this.data.cxPropUniqueSelector;if(i.length>this.data.cxPropMaxLengthObj.nameLength)return this.setData("customMessages",_cruxUtils.getI18n("crm.image.name.maxsize")),Lyte.objectUtils(this.data.currentImageConfig,"add","error",!0),void(this.processFurther=!1);if(0===i.length&&(i=e),e!==i){var a=r.find((function(e){return e[l]===t})),s=this.data.cxPropNameSelector,n=o.extn,p=i+n;this.checkNameAvailability(p)&&(p=this.changeUsedName(p,n)),this.resetModifiedName(p,e+n),Lyte.objectUtils(a,"add",s,p);var d=p.substring(0,p.lastIndexOf(n));Lyte.objectUtils(o,"add","name",d),a.isNameChanged=!0,this.getMethods("onNameChange")&&this.executeMethod("onNameChange",t,p)}Lyte.objectUtils(this.data.currentImageConfig,"add","nameEdit",!1),this.processFurther=!0},saveDescription:function(e,t){var o=this.data.currentImageInfo,i=o.newDesc,r=this.data.currentImageConfig;if(i.length>this.data.cxPropMaxLengthObj.descriptionLength)return this.setData("customMessages",_cruxUtils.getI18n("crm.image.desc.maxsize")),Lyte.objectUtils(r,"add","error",!0),void(this.processFurther=!1);if(i!==e){var l=this.data.cxPropImages,a=this.data.cxPropUniqueSelector,s=l.find((function(e){return e[a]===t}));Lyte.objectUtils(s,"add","description",i),Lyte.objectUtils(o,"add","desc",i),s.isDescChanged=!0,this.getMethods("onDescChange")&&this.executeMethod("onDescChange",t,i)}""===i?this.constructDescStructure(!0,!1,!1):this.constructDescStructure(!1,!1,!0),this.processFurther=!0},constructDescStructure:function(e,t,o){if(!0===this.data.cxPropPreviewConfiguration.showDescription){var i=this.getData("currentImageConfig");void 0!==e&&Lyte.objectUtils(i,"add","imageDescHeader",e),void 0!==t&&Lyte.objectUtils(i,"add","showImageDescInput",t),void 0!==o&&Lyte.objectUtils(i,"add","showImageDesc",o)}},cropperOpenClose:function(){this.data.isCropperOpen?LyteColorbox._component.childComp.classList.add("cxImgCropWrapperCont"):LyteColorbox._component.childComp.classList.remove("cxImgCropWrapperCont")}.observes("isCropperOpen"),closePreview:function(){return!this.getData("showCropper")&&(this.processFurther?(document.removeEventListener("resize",this.calcFn,!0),delete this.calcFn,LyteColorbox.close(),this.getMethods("onClose")&&this.executeMethod("onClose"),!0):(Lyte.objectUtils(this.data.currentImageConfig,"add","error",!0),!1))}},{mixins:["crux-image-preview-util"]}),Lyte.Component.register("lyte-fileupload",{_template:'<template tag-name="lyte-fileupload"> <input class="fileuploadInput {{ltPropClass}}" id="{{ltPropId}}" type="file" name="{{ltPropName}}" onchange="{{action(\'change\',event,this)}}" oncancel="{{action(\'cancel\',event,this)}}" multiple="{{ltPropMultiple}}" accept="{{ltPropAccept}}"> <div tabindex="{{ltPropTabindex}}" class="fileUploadWrapper {{fileClass}} {{if(ltPropMultiple,\'multiFileupload\',\'singleFileUpload\')}} lyteFileUpd{{ltPropAppearance}}Type {{if(ltPropDisabled,\'lyteFileUpdDisabled\')}} {{maxFileClass}}" ondragenter="{{action(\'drag\',event)}}" ondragover="{{action(\'drag\',event)}}" ondrop="{{action(\'drop\',event)}}" onclick="{{action(\'click\',event)}}" style="outline: none;position: relative;" onpaste="{{action(\'paste\',event)}}" onkeydown="{{action(\'keydown\',event)}}" aria-labelledby="{{randomAriaId}}" data-tabindex="{{ltPropDataTabindex}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="file" queue-list="{{queueList}}" predefined-list="{{predefinedList}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{ltPropMultiple}}"><template case="true"> <lyte-file-select-area aria-hidden="true"> <lyte-file-message class="lyteFileUpdMsgWrap"> <span class="lyteFileUpdMsg">{{lyteUiI18n(ltPropMessage,"fileupload")}}</span> </lyte-file-message> </lyte-file-select-area> <div class="lyteFileUpdList"> <template is="for" items="{{predefinedList}}" item="item" index="index"> <div class="lyteFileUpdListFile"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <lyte-file-close data-value="{{item.id}}" role="button" aria-label="{{ariaCloseLabel}} selected {{item.name}} file"> </lyte-file-close> </div> </template> <template is="for" items="{{queueList}}" item="item" index="index"> <div class="lyteFileUpdListFile {{concat(\'lyteFile\',lyteUiCapitalizeName(item.status))}}"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <template is="if" value="{{expHandlers(item.percentage,\'!=\',undefined)}}"><template case="true"> <div class="lyteFileUpdFileStatus" data-completed="{{item.percentage}}"> <div class="lyteFileUpdProgressBar"> <div class="lyteFileUpdProgressFill" style="width: {{item.percentage}}%"></div> </div> </div> </template></template><template is="if" value="{{expHandlers(item.status,\'==\',&quot;error&quot;)}}"><template case="true"> <lyte-file-retry data-value="{{item.id}}" role="button"> <span class="lyteFileUpdFailMsg">{{lyteUiI18n(ltPropFailureMessage,"fileupload")}}</span> <template is="if" value="{{expHandlers(ltPropUploadMultiple,\'!\')}}"><template case="true"> <span class="lyteFileUpdRetryMsg">{{lyteUiI18n(ltPropRetryText,"fileupload")}}</span> </template></template> </lyte-file-retry> </template></template> <template is="if" value="{{item.lyteErrorMsg}}"><template case="true"><span class="lyteFileUpdFailMsg"> {{item.lyteErrorMsg}} </span></template></template> <template is="if" value="{{expHandlers(expHandlers(ltPropUploadMultiple,\'!\'),\'||\',expHandlers(expHandlers(expHandlers(item.status,\'!\'),\'||\',expHandlers(item.status,\'==\',&quot;error&quot;)),\'||\',expHandlers(item.status,\'==\',&quot;success&quot;)))}}"><template case="true"> <lyte-file-close aria-level="2" tabindex="0" aria-label="{{ariaCloseLabel}} selected {{item.name}} file" role="button" data-value="{{item.id}}"> </lyte-file-close> </template></template> </div> </template> </div> </template><template case="false"> <lyte-file-select-area aria-hidden="true"> <lyte-file-message class="lyteFileUpdMsgWrap {{if(expHandlers(queueList.length,\'||\',predefinedList.length),\'lyteHide\',\'\')}}"> <span class="lyteFileUpdMsg"> {{lyteUiI18n(ltPropMessage,"fileupload")}} </span> </lyte-file-message> <div class="lyteFileUpdList" tabindex="0" aria-level="2" aria-label="SelectedFile:{{ariaSelectedFiles}}"> <template is="for" items="{{predefinedList}}" item="item" index="index"> <div class="lyteFileUpdListFile"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <lyte-file-close data-value="{{item.id}}" aria-label="{{ariaCloseLabel}} selected {{item.name}} file" role="button"> </lyte-file-close> </div> </template> <template is="for" items="{{queueList}}" item="item" index="index"> <div class="lyteFileUpdListFile {{concat(\'lyteFile\',lyteUiCapitalizeName(item.status))}}"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <template is="if" value="{{expHandlers(item.percentage,\'!=\',undefined)}}"><template case="true"> <div class="lyteFileUpdFileStatus" data-completed="{{item.percentage}}"> <div class="lyteFileUpdProgressBar"> <div class="lyteFileUpdProgressFill" style="width: {{item.percentage}}%"></div> </div> </div> </template></template><template is="if" value="{{expHandlers(item.status,\'==\',&quot;error&quot;)}}"><template case="true"> <lyte-file-retry data-value="{{item.id}}" role="button"> <span class="lyteFileUpdFailMsg">{{lyteUiI18n(ltPropFailureMessage,"fileupload")}}</span> <span class="lyteFileUpdRetryMsg"> {{lyteUiI18n(ltPropRetryText,"fileupload")}} </span> </lyte-file-retry> </template></template> <lyte-file-close data-value="{{item.id}}" tabindex="0" aria-label="{{ariaCloseLabel}} selected {{item.name}} file" role="button"> </lyte-file-close> </div> </template> </div> </lyte-file-select-area> </template></template> </template></template> <template is="if" value="{{fileClass}}"><template case="true"><div ondragleave="{{action(\'drag\',event)}}" class="lyteFileDragWrapper"> </div></template></template> </div> <template is="if" value="{{ltPropAria}}"><template case="true"><span id="{{randomAriaId}}" style="display: none;"> SelectedFiles:{{ariaSelectedFiles}} </span></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"componentDynamic",position:[1,7]}]},{type:"attr",position:[3,3]},{type:"for",position:[3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width: '","item.percentage","'%'"]}}}}]}},default:{}},{type:"attr",position:[1,8]},{type:"if",position:[1,8],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,10]},{type:"if",position:[1,10],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}},{type:"attr",position:[1,12]},{type:"if",position:[1,12],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"componentDynamic",position:[1,7]}]},{type:"attr",position:[1,3,3]},{type:"for",position:[1,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width: '","item.percentage","'%'"]}}}}]}},default:{}},{type:"attr",position:[1,8]},{type:"if",position:[1,8],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,10]},{type:"componentDynamic",position:[1,10]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,1]}]}},default:{}}],_observedAttributes:["ltPropName","ltPropMultiple","ltPropAccept","ltPropId","ltPropClass","ltPropAppearance","ltPropDisabled","ltPropYield","ltPropFileLimit","ltPropMinimumFileSize","ltPropTotalFilesSize","ltPropParallel","ltPropAutoUpload","ltPropTriggerUpload","ltPropParamName","ltPropThumb","ltPropTabindex","ltPropRetry","ltPropFileUnit","ltPropDigits","ltPropMessage","ltPropFailureMessage","ltPropRetryText","ltPropFiles","ltPropFolder","ltPropChunk","ltPropChunkSize","ltPropParallelChunkUpload","ltPropParallelChunkCount","ltPropChunkRetry","ltPropUploadMultiple","ltPropUploadMultipleCount","ltPropAjax","ltPropAllowReplace","ltPropFilesCount","ltPropAriaAttributes","ltPropReset","ltPropPreventDuplicate","ltPropListErrorFiles","ltPropResetFileValue","ltPropAria","ltPropDataTabindex","ltPropValidateByExt","ltPropRenameDuplicateFile","queueList","predefinedList","currentUpload","chunkUpload","fileClass","chunkCount","abort","lxhrs","uploadedFiles","manualUpdFiles","uploadMultipleRetry","retryFiles","retry","manualUpload","totalFilesSize","curTotFilesSize","ariaCloseLabel","commonAriaLabel","ariaSelectedFiles","randomAriaId"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){this._file=this.$node.querySelector("input.fileuploadInput"),this.$node.upload=this.processqueue.bind(this),this.$node.removeUpload=function(e){e?this.removeFrmUpload(e,"queueList"):this.removeFrmUpload(this.data.queueList,"queueList",!0),this._file.value=""}.bind(this),this.$node.predefined=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)Lyte.arrayUtils(this.data.predefinedList,"push",e[t])}.bind(this),this.$node.addFiles=function(e){Array.isArray(e)||(e=[e]),this.validate(e)}.bind(this),this.$node.openSelection=function(){this._file.click()}.bind(this),this.folderUpload(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)},didDestroy:function(){this.$node.removeUpload(),this._triggerId&&(clearTimeout(this._triggerId),delete this._triggerId),this._resetId&&(clearTimeout(this._resetId),delete this._resetId),delete this._file,delete this.$node.upload,delete this.$node.removeUpload,delete this.$node.predefined,delete this.$node.addFiles,delete this.$node.openSelection},addAriaForButton:function(e,t,o,i){e.hasOwnProperty(t)&&(i=e[t],delete e[t]),this.setData(o,i)},addAriaValues:function(e){var t=this.data.commonAriaLabel,o=this.$node.querySelector(".fileUploadWrapper");e=Object.assign({},e),this.addAriaForButton(e,"close-label","ariaCloseLabel","remove"),_lyteUiUtils.setAttribute(o,e,t),this.setData("commonAriaLabel",e)},ariaObserver:function(e){var t=this.data.ltPropAriaAttributes;this.data.ltPropAria&&(e||this.setData("randomAriaId","file"+(new Date).getTime()+parseInt(1e11*Math.random())),this.addAriaValues(t))}.observes("ltPropAriaAttributes.*").on("didConnect"),disableDataObserver:function(){var e=this.data.ltPropDisabled,t=this.$node.querySelector(".fileUploadWrapper");e?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled")}.observes("ltPropDisabled").on("didConnect"),data:function(){return{ltPropName:Lyte.attr("string",{default:"file"}),ltPropMultiple:Lyte.attr("boolean",{default:!0}),ltPropAccept:Lyte.attr("string",{default:""}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropAppearance:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","appearance","Box")}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropFileLimit:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","fileLimit",void 0)}),ltPropMinimumFileSize:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","minimumFileSize",0)}),ltPropTotalFilesSize:Lyte.attr("string"),ltPropParallel:Lyte.attr("number",{default:2}),ltPropAutoUpload:Lyte.attr("boolean",{default:!0}),ltPropTriggerUpload:Lyte.attr("boolean",{default:!1}),ltPropParamName:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","paramName","file")}),ltPropThumb:Lyte.attr("boolean",{default:!1}),ltPropTabindex:Lyte.attr("number",{default:0}),ltPropRetry:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","retry",2)}),ltPropFileUnit:Lyte.attr("string",{default:""}),ltPropDigits:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","digits",1)}),ltPropMessage:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","message","Drag file here or browse to upload")}),ltPropFailureMessage:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","failureMessage","Attachment failed")}),ltPropRetryText:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","retryText","Retry")}),ltPropFiles:Lyte.attr("array",{default:[]}),ltPropFolder:Lyte.attr("boolean",{default:!1}),ltPropChunk:Lyte.attr("boolean",{default:!1}),ltPropChunkSize:Lyte.attr("number",{default:2e6}),ltPropParallelChunkUpload:Lyte.attr("boolean",{default:!1}),ltPropParallelChunkCount:Lyte.attr("number",{default:1/0}),ltPropChunkRetry:Lyte.attr("number",{default:2}),ltPropUploadMultiple:Lyte.attr("boolean",{default:!1}),ltPropUploadMultipleCount:Lyte.attr("number",{default:1/0}),ltPropAjax:Lyte.attr("object",{default:{url:""}}),ltPropAllowReplace:Lyte.attr("boolean",{default:!1}),ltPropFilesCount:Lyte.attr("number",{default:1/0}),ltPropAriaAttributes:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","ariaAttributes",{role:"button","aria-roledescription":"fileupload"}),watch:!0}),ltPropReset:Lyte.attr("boolean",{default:!1}),ltPropPreventDuplicate:Lyte.attr("boolean",{default:!1}),ltPropListErrorFiles:Lyte.attr("boolean",{default:!1}),ltPropResetFileValue:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:""}),ltPropValidateByExt:Lyte.attr("boolean",{default:!1}),ltPropRenameDuplicateFile:Lyte.attr("boolean",{default:!1}),queueList:Lyte.attr("array",{default:[]}),predefinedList:Lyte.attr("array",{default:[]}),currentUpload:Lyte.attr("array",{default:[]}),chunkUpload:Lyte.attr("array",{default:[]}),fileClass:Lyte.attr("string",{default:""}),chunkCount:Lyte.attr("number",{default:0}),abort:Lyte.attr("boolean",{default:!1}),lxhrs:Lyte.attr("array",{default:[]}),uploadedFiles:Lyte.attr("array",{default:[]}),manualUpdFiles:Lyte.attr("array",{default:[]}),uploadMultipleRetry:Lyte.attr("number",{default:0}),retryFiles:Lyte.attr("array",{default:[]}),retry:Lyte.attr("boolean",{default:!1}),manualUpload:Lyte.attr("boolean",{default:!1}),totalFilesSize:Lyte.attr("number"),curTotFilesSize:Lyte.attr("number",{default:0}),ariaCloseLabel:Lyte.attr("string"),commonAriaLabel:Lyte.attr("object",{default:{}}),ariaSelectedFiles:Lyte.attr("string",{default:"0"}),randomAriaId:Lyte.attr("string")}},getFileDataAsString:function(e){var t="",o=Lyte.Component.registeredHelpers.lyteUiFileSize,i=this.data.ltPropFileUnit,r=this.data.ltPropDigits;return e.forEach((function(e){t+="name "+e.name+" size "+o(e.size,i,r)+" "})),t},constructAriaString:function(){if(this.data.ltPropAria){var e=this.getFileDataAsString(this.data.predefinedList);(e=this.getFileDataAsString(this.data.queueList))?this.setData("ariaSelectedFiles",e):this.setData("ariaSelectedFiles","0")}},constructReasonAsStr:function(e){var t="";return e.fileCount?t="Allowed File Count "+this.data.ltPropFilesCount:e.duplicate?t="The file name already exist":e.type&&(t="Invalid file type"),e.size?t=(t?t+" and ":"")+"Invalid file size":e.totalSize&&(t=(t?t+" and ":"")+"Exceeds total file size"),t},exceedTotalCount:function(){var e=this.data.ltPropFilesCount;return e!==1/0&&!((this.data.predefinedList||[]).length+this.getValidQueueListCount()<e)},folderUpload:function(){this.data.ltPropFolder?this._file.setAttribute("webkitdirectory",!0):this._file.removeAttribute("webkitdirectory")},validateAndGetType:function(e,t,o){var i,r,l=new RegExp(this.data.ltPropAccept.replace(/\s+/g,"").split(",").join("|")),a="";return e&&(r="."+(a=e.substring(e.lastIndexOf(".")+1,e.length))),!this.data.ltPropValidateByExt&&l.test(t)?i=(i=t.match(/(video|image|pdf|zip)/gi))&&i[0]?i[0]:a:l.test(a)||l.test(r)?i=a:o.type="Invalid_Type",i},validateSize:function(e,t){e.size<this.data.ltPropMinimumFileSize?t.size="Lower_Size":e.size>this.data.ltPropFileLimit?t.size="Higher_Size":this.checkTotalFilessize(e.size)&&(t.totalSize="Exceeds")},checkFileName:function(e,t){return e===t.name},findDuplicateInArray:function(e,t){return this.findIndex(e,this.checkFileName.bind(this,t))>-1},validateDuplicateFile:function(e,t){if(this.data.ltPropPreventDuplicate){var o=this.data.predefinedList,i=this.data.queueList,r=e.name,l=this.findDuplicateInArray(o,r);if(l=l||this.findDuplicateInArray(i,r))return t.duplicate=!0,!1}return!0},folderUploadObserver:function(){this.folderUpload()}.observes("ltPropFolder"),trigUpl:function(e){if(e.newValue){this.processqueue();var t=this;this._triggerId=setTimeout((function(){t.setData("ltPropTriggerUpload",!1),delete t._triggerId}),0)}}.observes("ltPropTriggerUpload"),resetObserver:function(e){if(e.newValue){this.$node.removeUpload();var t=this;this._resetId=setTimeout((function(){t.setData("ltPropReset",!1),delete t._resetId}),0)}}.observes("ltPropReset"),validate:function(e){for(var t=[],o=!1,i=this.data.ltPropListErrorFiles,r=0;r<e.length;r++){var l,a={},s=this.data.ltPropChunk,n=e[r].name,p=e[r].type;if(this.exceedTotalCount()?(a.fileCount="Exceeds",l=p||n.substring(n.lastIndexOf(".")+1,n.length)):this.validateDuplicateFile(e[r],a)&&(l=this.validateAndGetType(n,p,a),this.validateSize(e[r],a)),Object.keys(a).length>0){var d=e[r],c=i?this.constructFileObject(d,s,l,this.constructReasonAsStr(a)):void 0;if(o=!0,this.getMethods("onReject")&&this.executeMethod("onReject",d,a,this.$node,c),i)Lyte.arrayUtils(this.data.queueList,"push",c);else if(a.fileCount)break}else{var y;c=this.constructFileObject(e[r],s,l);if(this.getMethods("onBeforeAdd")&&(y=this.executeMethod("onBeforeAdd",e[r],this.$node,c)),0==y){o=!0,i&&(c.lyteErrorMsg=c.lyteErrorMsg||"Invalid File",Lyte.arrayUtils(this.data.queueList,"push",c));continue}if(y&&y.then){t.push(y);var u=e[r];Promise.resolve(y).then(this.add.bind(this,u,s,l))}else this.add(e[r],c);if(!this.data.ltPropMultiple)break}}(o||this.data.ltPropResetFileValue)&&(this._file.value=""),this.getMethods("onValidationEnd")&&this.executeMethod("onValidationEnd",this.$node,this.data.queueList),this.data.ltPropAutoUpload&&(t.length?Lyte.resolvePromises(t).then(this.processqueue.bind(this)):this.processqueue()),this.constructAriaString()},getValidQueueListCount:function(){var e=this.data.queueList;return this.data.ltPropListErrorFiles?e.filter((function(e){return!e.lyteErrorMsg})).length:e.length},changeFileName:function(e){if(this.data.ltPropRenameDuplicateFile){var t=[],o=this.data.predefinedList,i=this.data.queueList,r=e.name;if(o.reduce((function(e,t){return e.push(t.name),e}),t),i.reduce((function(e,t){return e.push(t.name),e}),t),t.indexOf(r)>-1){for(var l,a,s,n=r.lastIndexOf("."),p=r.substring(0,n),d=r.substring(n+1,r.length),c="",y="",u="",m=p.length-1;m>0;m--){var h=p[m];if(a){if("("===h){s=!0,l=m;break}if(!h.match(/[0-9]/))break;y=h+y}else")"===h?a=!0:h.match(/\s/)&&(c=h+c)}for(y=s&&y?parseInt(y)+1:1,u=(s?p.substring(0,l)+"("+y+")"+c:p+"("+y+")")+"."+d;t.indexOf(u)>-1;)++y,u=(s?p.substring(0,l)+"("+y+")"+c:p+"("+y+")")+"."+d;e.name=u}}},constructFileObject:function(e,t,o,i){var r={id:"lyte"+(new Date).getTime()+parseInt(1e11*Math.random()),file:e,size:e.size,name:e.name,isChunk:t,retry:0,fileType:o||"document"};return this.data.ltPropThumb&&/image/i.test(e.type)&&Lyte.Component.set(r,"src",URL.createObjectURL(e)),i?r.lyteErrorMsg=i:this.changeFileName(r),r},add:function(e,t){Lyte.arrayUtils(this.data.queueList,"push",t),this.addToTotalFilesSize(e.size),Lyte.arrayUtils(this.data.uploadedFiles,"push",t),Lyte.arrayUtils(this.data.ltPropFiles,"push",e),this.getMethods("onAdd")&&this.executeMethod("onAdd",e,this.$node,t)},chkId:function(e,t){return t.id==e},SendingFile:function(){for(var e=this.data,t=e.manualUpdFiles,o=0;o<t.length;){var i=t[o];if(!i.status||i.isChunk&&"uploading"==i.status)if(i.isChunk){if(!i.status){this.setData("manualUpload",!0),this.uploadFile(i);break}if(i.finished+i.currentUploadingChunks<i.chunks.length){this.setData("manualUpload",!0),this.uploadFile(i);break}o++}else{if(!(e.currentUpload.length<e.ltPropParallel))break;this.setData("manualUpload",!0),Lyte.arrayUtils(e.currentUpload,"push",i),this.uploadFile(i),o++}else o++}o===t.length&&this.finishcallback(t)},processqueue:function(e,t,o){var i=this.data,r=0,l=[];if(e&&!o){Array.isArray(e)||(e=[e]);for(var a=0;a<e.length;a++){var s=e[a].id||e[a],n=i.queueList[this.findIndex(i.queueList,this.chkId.bind(this,s))];n&&Lyte.arrayUtils(this.data.manualUpdFiles,"push",n)}if(this.data.manualUpdFiles.length)return void this.SendingFile()}if(i.manualUpload)this.SendingFile();else{for(;i.currentUpload.length<i.ltPropParallel||i.ltPropUploadMultiple&&i.currentUpload.length<i.ltPropUploadMultipleCount||o&&i.queueList.length;){var p=i.queueList[r];if(e&&(e="object"==typeof e?e.id:e,p=i.queueList[this.findIndex(i.queueList,this.chkId.bind(this,e))],o&&p))return Lyte.arrayUtils(this.data.retryFiles,"push",p),Lyte.Component.set(p,"status","reloading"),void(i.uploadedFiles.indexOf(p)<0&&(Lyte.arrayUtils(this.data.uploadedFiles,"push",p),this.retrySendingFile()));if(!p){this.data.retryFiles.length&&this.retrySendingFile(),t&&this.finishcallback();break}if(/uploading|success/.test(p.status)){if(e)break;if(/uploading/.test(p.status)&&p.isChunk&&p.finished+p.currentUploadingChunks<p.chunks.length){this.processChunkQueue(p.chunks);break}r++}else if("error"!=p.status||!(this.data.ltPropUploadMultiple||p.retry>=i.ltPropRetry-1||p.isChunk)||e)if("reloading"!=p.status)if(p.lyteErrorMsg)r++;else{if(p.isChunk||Lyte.arrayUtils(i.currentUpload,"push",p),this.data.ltPropUploadMultiple)l.push(p);else if(this.uploadFile(p),e||p.isChunk)break;r++}else r++;else r++}this.data.ltPropUploadMultiple&&l.length&&this.uploadFile(l)}},retrySendingFile:function(){for(var e=this.data,t=e.retryFiles,o=0;o<t.length;){var i=t[o];if("reloading"==i.status||"uploading"==i.status)if(i.isChunk){if(i.finished+i.currentUploadingChunks<i.chunks.length){this.setData("retry",!0),this.processChunkQueue(i.chunks);break}o++}else{if(!(e.currentUpload.length<e.ltPropParallel))break;this.setData("retry",!0),Lyte.arrayUtils(t,"removeAt",o),Lyte.arrayUtils(e.currentUpload,"push",i),this.getMethods("onRetry")&&this.executeMethod("onRetry",{},i,this.$node),this.uploadFile(i)}else Lyte.arrayUtils(t,"removeAt",o)}t.length||(this.setData("retry",!1),this.processqueue(void 0,!0))},findIndex:function(e,t){if("function"!=typeof t)return e.indexOf(t);for(var o=0;o<e.length;o++){if(t.call(e[o],e[o]))return o}},abortChunksFrmUpload:function(e){for(var t=this.data.chunkUpload,o=0;o<t.length;){var i=t[o];i.chunkProp.origin.id===e&&i.xhr?(this.setData("abort",!0),i.xhr.ret.abort()):o++}},removeFrmUpload:function(e,t,o,i){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var l,a,s=e[r].id||e[r],n=this.data[t],p=this.findIndex(n,this.chkId.bind(this,s));if((void 0===p||p<0)&&(n=this.data.predefinedList,(p=this.findIndex(n,this.chkId.bind(this,s)))>-1&&(t="predefinedList")),p>=0){if(!o&&this.getMethods("onBeforeRemove")&&0==this.executeMethod("onBeforeRemove",t,n[p],this.$node))continue;if("uploading"==(a=n[p]).status&&(l=!0,a.xhr&&(this.setData("abort",!0),a.xhr.ret.abort()),a.isChunk&&this.abortChunksFrmUpload(a.id)),Lyte.arrayUtils(n,"removeAt",p),"queueList"===t){var d,c=this.getData("lxhrs"),y=$L.search(c,"fileId",a.id)[0];a.isChunk&&l&&this.getMethods("onFileFailure")&&this.executeMethod("onFileFailure",y,a,this.$node,!0),a.lyteErrorMsg||(Lyte.arrayUtils(this.data.ltPropFiles,"removeAt",p),this.removeFromTotalFileSize(a.size));var u=this.data.uploadedFiles;(m=this.findIndex(u,this.chkId.bind(this,s)))>=0&&Lyte.arrayUtils(u,"removeAt",m);var m;u=this.data.retryFiles;(m=this.findIndex(u,this.chkId.bind(this,s)))>=0&&Lyte.arrayUtils(u,"removeAt",m),(d=c.indexOf(y))>-1&&Lyte.arrayUtils(c,"removeAt",d),p<=r&&r--}!o&&this.getMethods("onRemove")&&this.executeMethod("onRemove",t,a,this.$node)}}!this.data.ltPropUploadMultiple&&("queueList"==t&&l||i)&&(this.data.retry?this.retrySendingFile():this.processqueue(void 0,!0)),"queueList"!==t&&"predefinedList"!==t||this.constructAriaString()},uploadFile:function(e){var t=Lyte.deepCopyObject(this.data.ltPropAjax);e.isChunk?this.proceedChunk(e,t):this.proceedUpload(e,t,!1)},succFunc:function(e){if(this.$node){var t,o=arguments[2].xhr.file,i=arguments[2].xhr.ret,r=[];o.xhr&&delete o.xhr,this.getMethods("onRequestSuccess")&&this.executeMethod("onRequestSuccess",i,o,this.$node),Array.isArray(o)||(o=[o]);for(var l=0;l<o.length;l++)if(Lyte.Component.set(o[l],"status","success"),Lyte.objectUtils(o[l],"delete","xhr"),this.data.ltPropUploadMultiple)r.push(o[l].id),this.removeFrmUpload(o[l].id,"currentUpload",!0);else{var a=this.getData("lxhrs");(t=$L.search(a,"fileId",o[l].id)).length&&Lyte.arrayUtils(a,"removeAt",a.indexOf(t[0])),i.fileId=o[l].id,Lyte.arrayUtils(this.getData("lxhrs"),"push",i),this.getMethods("onFileSuccess")&&this.executeMethod("onFileSuccess",i,o[l],this.$node),this.removeFrmUpload(o[l].id,"currentUpload",!0,!0)}this.data.ltPropUploadMultiple&&(i.fileId=r,Lyte.arrayUtils(this.getData("lxhrs"),"push",i),this.setData("uploadMultipleRetry",0),this.processqueue(void 0,!0)),delete arguments[2].xhr.file}},reject:function(e){if(this.$node){var t,o=e.xhr.file,i=e.xhr.ret,r=o.retry,l=[];if(this.data.abort||r>=this.data.ltPropRetry||this.data.ltPropUploadMultiple&&this.data.uploadMultipleRetry>=this.data.ltPropRetry){o.xhr&&delete o.xhr,this.getMethods("onRequestFailure")&&this.executeMethod("onRequestFailure",i,o,this.$node,this.data.abort),Array.isArray(o)||(o=[o]);for(var a=0;a<o.length;a++){if(Lyte.Component.set(o[a],"status","error"),Lyte.objectUtils(o[a],"delete","xhr"),this.data.ltPropUploadMultiple)l.push(o[a].id);else{var s=this.getData("lxhrs");(t=$L.search(s,"fileId",o[a].id)).length&&Lyte.arrayUtils(s,"removeAt",s.indexOf(t[0])),i.fileId=o[a].id,this.getMethods("onFileFailure")&&this.executeMethod("onFileFailure",i,o[a],this.$node,this.data.abort),!this.data.abort&&Lyte.arrayUtils(this.getData("lxhrs"),"push",i)}this.removeFrmUpload(o[a].id,"currentUpload",!0,!this.data.abort)}this.data.ltPropUploadMultiple&&(i.fileId=l,Lyte.arrayUtils(this.getData("lxhrs"),"push",i),this.setData("uploadMultipleRetry",0),this.processqueue(void 0,!0)),this.data.abort&&(Lyte.objectUtils(e.xhr.file,"add","retry",this.data.ltPropRetry),this.setData("abort",!1)),delete e.xhr.file}else if(this.data.ltPropUploadMultiple){delete o.xhr;for(a=0;a<o.length;a++)Lyte.Component.set(e.xhr.file[a],"status","retrying"),Lyte.Component.set(e.xhr.file[a],"retry",e.xhr.file[a].retry+1);this.setData("uploadMultipleRetry",this.data.uploadMultipleRetry+1),this.getMethods("onRetry")&&this.executeMethod("onRetry",i,o,this.$node),this.uploadFile(o)}else Lyte.Component.set(e.xhr.file,"status","retrying"),Lyte.objectUtils(e.xhr.file,"add","retry",r+1),this.getMethods("onRetry")&&this.executeMethod("onRetry",i,o,this.$node),this.uploadFile(o)}},progress:function(e){if(e.lengthComputable){var t=e.total,o=e.loaded,i=e.target.xhr,r=i.file;Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++)this.data.ltPropUploadMultiple?Lyte.Component.set(r[l],{loaded:r[l].size,percentage:100}):Lyte.Component.set(r[l],{loaded:o,percentage:Math.round(100*o/t)}),this.getMethods("onProgress")&&this.executeMethod("onProgress",e,i,r[l],this.$node)}},removeChunk:function(e,t,o){var i=this.data.chunkUpload,r=this.findIndex(i,(function(t){return t.chunkProp.chunkId==e}));r>-1&&(Lyte.arrayUtils(i,"removeAt",r),!o&&this.processChunkQueue(t.chunks))},chunkReject:function(e){if(this.$node){var t=e.xhr.file,o=t.chunkProp.origin,i=arguments[0].xhr.ret;if(!this.data.abort&&t.retry<this.data.ltPropChunkRetry)Lyte.Component.set(t,"status","retrying"),Lyte.objectUtils(t,"add","retry",t.retry+1),this.removeChunk(t.chunkProp.chunkId,o,!0),this.getMethods("onRetry")&&this.executeMethod("onRetry",i,t,this.$node),Lyte.Component.set(o,"currentUploadingChunks",o.currentUploadingChunks-1),this.processChunkQueue(t,!0);else{if(this.getMethods("onRequestFailure")&&this.executeMethod("onRequestFailure",i,t,this.$node,this.data.abort),Lyte.Component.set(t,"status","error"),this.removeChunk(t.chunkProp.chunkId,o,!0),this.getMethods("onChunkError")&&this.executeMethod("onChunkError",i,t,o,this.$node,this.data.abort),Lyte.objectUtils(t,"delete","xhr"),delete e.xhr.file,Lyte.Component.set(o,"currentUploadingChunks",o.currentUploadingChunks-1),Lyte.Component.set(o,"error",o.error+1),"error"!=o.status){var r,l=this.getData("lxhrs");Lyte.Component.set(o,"status","error"),(r=$L.search(l,"fileId",o.id)).length&&Lyte.arrayUtils(l,"removeAt",l.indexOf(r[0])),i.fileId=o.id,Lyte.arrayUtils(this.getData("lxhrs"),"push",i)}this.data.abort?this.setData("abort",!1):(this.abortChunksFrmUpload(o.id),this.getMethods("onFileFailure")&&this.executeMethod("onFileFailure",i,o,this.$node,this.data.abort),this.data.retry?this.retrySendingFile():this.processqueue(void 0,!0))}}},chunkSuccess:function(e){if(this.$node){var t=arguments[2].xhr.file,o=t.chunkProp.origin,i=arguments[2].xhr.ret;if(this.getMethods("onRequestSuccess")&&this.executeMethod("onRequestSuccess",i,t,this.$node),Lyte.Component.set(t,"status","success"),this.removeChunk(t.chunkProp.chunkId,o,!0),this.getMethods("onChunkSuccess")&&this.executeMethod("onChunkSuccess",i,t,o,this.$node),Lyte.objectUtils(t,"delete","xhr"),delete arguments[2].xhr.file,Lyte.Component.set(o,"finished",o.finished+1),Lyte.Component.set(o,"currentUploadingChunks",o.currentUploadingChunks-1),o.finished==o.total){var r,l=this.getData("lxhrs");Lyte.Component.set(o,"status","success"),(r=$L.search(l,"fileId",o.id)).length&&Lyte.arrayUtils(l,"removeAt",l.indexOf(r[0])),i.fileId=o.id,Lyte.arrayUtils(this.getData("lxhrs"),"push",i),this.getMethods("onFileSuccess")&&this.executeMethod("onFileSuccess",i,o,this.$node),this.data.retry?this.retrySendingFile():this.processqueue(void 0,!0)}else this.processChunkQueue(o.chunks,!0)}},chunkProgress:function(e){if(e.lengthComputable){e.total;var t=e.loaded,o=e.target.xhr.file,i=o.chunkProp.origin,r=t-o.loaded;Lyte.Component.set(o,"loaded",t),Lyte.Component.set(i,{loaded:Math.min(i.loaded+r,i.size),percentage:Math.min(Math.round(100*(i.loaded+r)/i.size),100)}),this.getMethods("onProgress")&&this.executeMethod("onProgress",e,e.target.xhr,i,this.$node)}},proceedChunk:function(e,t){for(var o=this.data,i=o.ltPropChunkSize,r=e.size,l=0,a=[];l<=r;){var s=l,n=Math.min(r,l+=i),p=n-s;a.push({file:e.file.slice(s,n),chunkProp:{chunkOffset:s,chunkEnd:n,chunkSize:p,chunkId:"lyteChunk"+(new Date).getTime()+parseInt(1e11*Math.random()),chunkIndex:a.length,origin:e,chunkCount:Math.ceil(e.size/i),totalSize:e.size},name:e.file.name,loaded:0,retry:0})}Lyte.Component.set(e,{chunks:a,error:0,finished:0,total:a.length}),o.ltPropParallelChunkCount===1/0&&this.setData("chunkCount",a.length),this.processChunkQueue(a)},processChunkQueue:function(e,t){var o=this.data,i=0;for(Array.isArray(e)||(e=[e]);!o.ltPropParallelChunkUpload&&o.chunkUpload.length<1||o.ltPropParallelChunkUpload&&o.ltPropParallelChunkCount===1/0||o.ltPropParallelChunkCount!=1/0&&o.chunkUpload.length<o.ltPropParallelChunkCount;){var r=e[i];if(!r){o.retry?this.retrySendingFile():o.ltPropParallelChunkUpload&&(o.ltPropParallelChunkCount!=1/0&&o.chunkUpload.length<o.ltPropParallelChunkCount&&this.processqueue(),o.ltPropParallelChunkCount==1/0&&this.processqueue());break}if(/success|uploading/.test(r.status)||t&&(!t||/error/.test(r.status)))i++;else{var l=r.chunkProp.origin;Lyte.Component.set(l,{status:"uploading",percentage:l.percentage||0,loaded:l.loaded||0,size:l.size,currentUploadingChunks:l.currentUploadingChunks+1||1}),this.proceedUpload(r,Lyte.deepCopyObject(o.ltPropAjax),!0),Lyte.arrayUtils(o.chunkUpload,"push",r),i++}}},getRelativePath:function(e){var t=e.file;return t.webkitRelativePath||t.relativePath},proceedUpload:function(e,t,o){if(!/success|uploading/.test(e[0]&&e[0].status||e.status)){var i,r,l=new FormData,a=["chunkOffset","chunkSize","chunkIndex","chunkCount","totalSize"];if(Array.isArray(e))for(var s=0;s<e.length;s++)r=this.data.ltPropFolder?this.getRelativePath(e[s]):e[s].name,l.append(this.data.ltPropParamName+"["+s+"]",e[s].file,r);else r=this.data.ltPropFolder&&!o?this.getRelativePath(e):e.name,l.append(this.data.ltPropParamName,e.file,r);if(o){for(var n=0;n<a.length;n++)l.append(a[n],e.chunkProp[a[n]]);var p=e.chunkProp.origin;l.append("fileId",p.id),r=this.data.ltPropFolder?this.getRelativePath(p):p.name,l.append("fileName",r)}t.success=o?this.chunkSuccess.bind(this):this.succFunc.bind(this),t.error=o?this.chunkReject.bind(this):this.reject.bind(this);var d=new XMLHttpRequest;if(t.type="POST",e.xhr=d,d.file=e,d.upload.xhr=d,d.upload.addEventListener("progress",o?this.chunkProgress.bind(this):this.progress.bind(this),!1),t.xhr=d,t.data=l,t.processData=!1,t.contentType=!1,this.getMethods("onBeforeSend")&&(i=this.executeMethod("onBeforeSend",d,e,o,this.$node,l,t)),i&&i.then)Promise.resolve(i).then(function(){this.finishSend(t,d,e)}.bind(this));else{if(0==i){Array.isArray(e)||(e=[e]);for(var c=0;c<e.length;c++)this.removeFrmUpload(e[c].id,"currentUpload",!0);return}i&&i instanceof FormData&&(t.data=i),this.finishSend(t,d,e,o)}}},finishSend:function(e,t,o,i){if(Array.isArray(o))for(var r=0;r<o.length;r++)Lyte.Component.set(o[r],"status","uploading");else Lyte.Component.set(o,"status","uploading");var l=$L.ajax(e);l.xhr=t,t.ret=l,this.getMethods("onSend")&&this.executeMethod("onSend",t,l,o,!!i,this.$node,e)},finishcallback:function(e){var t,o=e||this.data.uploadedFiles,i=this.data.chunkUpload,r=this.data.lxhrs;if(o.length){for(var l=0;l<o.length;l++){if(!o[l].status||"uploading"==o[l].status)return;"error"==o[l].status&&(t=!0)}for(l=0;l<i.length;l++){if("uploading"==i[l].status)return;"error"==i[l].status&&(t=!0)}this.data.ltPropMultiple||(o=o[0],r=r[0]),t?(this.getMethods("onFailure")&&this.executeMethod("onFailure",o,this.$node,r),this.setData("uploadedFiles",[]),this.setData("lxhrs",[])):(this.getMethods("onSuccess")&&this.executeMethod("onSuccess",o,this.$node,r),this.setData("uploadedFiles",[]),this.setData("lxhrs",[])),1==this.data.manualUpload&&(this.setData("manualUpdFiles",[]),this.setData("manualUpload",!1))}},convertToBytes:function(){var e=this.getData("ltPropTotalFilesSize");if(e){var t=e.substring(e.length-2),o=parseInt(e.substring(0,e.length-2)),i=["KB","MB","GB"].indexOf(t),r=this.data.predefinedList;i>-1&&this.setData("totalFilesSize",o*Math.pow(1e3,i+1)),Array.isArray(r)&&this.addPredefinedListSize(r)}}.observes("ltPropTotalFilesSize").on("init"),getTotalFileSize:function(e){var t=0;return e.forEach((function(e){var o=e.size;"number"==typeof o&&(t+=o)})),t},addPredefinedListSize:function(e){var t=this.getTotalFileSize(e);this.addToTotalFilesSize(t)},removePredefindListSize:function(e){var t=this.getTotalFileSize(e);this.removeFromTotalFileSize(t)},predefinedListObserver:function(e){if(this.getData("totalFilesSize")){var t=e.oldValue,o=e.newValue;Array.isArray(t)&&this.removePredefindListSize(t),Array.isArray(o)&&this.addPredefinedListSize(o)}}.observes("predefinedList"),predefinedArrayListObserver:function(e){if(this.getData("totalFilesSize")){var t=e.removedItems,o=e.insertedItems;Array.isArray(t)&&this.removePredefindListSize(t),Array.isArray(o)&&this.addPredefinedListSize(o)}}.observes("predefinedList.[]"),checkTotalFilessize:function(e){var t=this.getData("totalFilesSize"),o=this.getData("curTotFilesSize");return!!(t&&o+e>t)},addToTotalFilesSize:function(e){if(this.getData("totalFilesSize")){var t=this.getData("curTotFilesSize");this.setData("curTotFilesSize",t+e)}},removeFromTotalFileSize:function(e){if(this.getData("totalFilesSize")){var t=this.getData("curTotFilesSize");this.setData("curTotFilesSize",t-e)}},openFileWindow:function(e,t){if(!this.data.ltPropYield&&this.data.ltPropMultiple&&(e.shiftKey?e.preventDefault():$L("#lyteFileUpdSelectedFile.lyteFileUpdListFile",this.$node).removeAttr("id"),"lyteFileUpdRetryMsg"!=e.target.className&&$L(e.target).closest(".lyteFileUpdListFile").attr("id","lyteFileUpdSelectedFile")),!(e.ctrlKey||e.shiftKey||e.metaKey)){var o=$L(e.target).closest("lyte-file-close");if(o.length)this.$node.removeUpload(o.eq(0).attr("data-value"));else{var i=$L(e.target).closest("lyte-file-retry");if(i.length){var r=i.eq(0).attr("data-value");this.$node.upload(r,void 0,!0)}else if(($L(e.target).closest("lyte-file-select-area").length||t)&&(this.data.ltPropMultiple&&!this.exceedTotalCount()||0==this.data.queueList.length&&0==this.data.predefinedList.length||this.data.ltPropAllowReplace)){if(this.getMethods("onBeforeOpen")&&0==this.executeMethod("onBeforeOpen",e,this.$node))return;this._file.click()}}}},getFilesFromEntry:function(e,t,o){return new Promise((function(i){e.file((function(e){"."!==e.name.substring(0,1)&&(e.relativePath=o+"/"+e.name,t.push(e)),i()}),(function(e){console.warn(e),i()}))}))},getFilesFromDirectory:function(e,t,o){var i=this,r=e.createReader(),l=[];return new Promise((function(e){r.readEntries((function(r){var a=r.length;if(a>0){for(var s,n=0;n<a;n++)(s=r[n])&&(s.isFile?l.push(i.getFilesFromEntry(s,o,t)):s.isDirectory&&l.push(i.getFilesFromDirectory(s,t+"/"+s.name,o)));l.length?Promise.all(l).then((function(){e()})):e()}}),(function(t){console.warn(t),e()}))}))},filterDropItems:function(e){var t=this,o=[],i=[];return new Promise((function(r){for(var l=0;l<e.length;l++){var a;if(null!=(a=e[l]).webkitGetAsEntry){var s=a.webkitGetAsEntry();s&&(s.isFile?o.push(a.getAsFile()):s.isDirectory&&t.data.ltPropFolder&&i.push(t.getFilesFromDirectory(s,s.name,o)))}else null==a.getAsFile||null!=a.kind&&"file"!==a.kind||o.push(a.getAsFile())}i.length?Promise.all(i).then((function(){r(o)})):r(o)}))},getValidDroppedItems:function(e,t){var o=this,i=e.files;return new Promise((function(t){var r=e.items;r&&r.length&&null!==r[0].webkitGetAsEntry?o.filterDropItems(r).then((function(e){t(e)})):t(i)}))},actions:{change:function(e,t){if(t.files.length){!this.data.ltPropMultiple&&this.data.ltPropAllowReplace&&(this.removeFrmUpload(this.data.queueList,"queueList",!0),this.data.predefinedList.length&&this.removeFrmUpload(this.data.predefinedList,"predefinedList",!0));var o=Array.from(t.files);if(this.getMethods("onSelect")&&!1===this.executeMethod("onSelect",o,e))return void(this._file.value="");this.validate(o)}},cancel:function(e){this.getMethods("onCancel")&&this.executeMethod("onCancel",e)},drag:function(e){var t=e.type,o="onDrag",i=t.match(/drag(.+)/);if(i&&i[1]&&(o+=i[1].slice(0,1).toUpperCase()+i[1].slice(1),/enter|over/.test(e.type))){if("dragover"==e.type){var r=e.dataTransfer;if(r){var l=r.effectAllowed;r.dropEffect="move"===l||"linkMove"===l?"move":"copy"}}e.preventDefault()}"dragenter"==t?this.setData("fileClass","fileDragEnter"):"dragleave"==t&&this.setData("fileClass",""),this.getMethods(o)&&this.executeMethod(o,e,this.$node)},drop:function(e){this.setData("fileClass","");var t=e.dataTransfer;if(t.files.length){var o=this;e.preventDefault(),this.getValidDroppedItems(t).then((function(t){if(t.length){if(o.getMethods("onBeforeDrop")&&0==o.executeMethod("onBeforeDrop",e,o.$node,t))return;e.preventDefault(),o.data.ltPropMultiple||o.$node.removeUpload(),o.validate(t),o.getMethods("onDrop")&&o.executeMethod("onDrop",e,o.$node,t)}}))}},click:function(e){this.openFileWindow(e)},paste:function(e){for(var t=(e.clipboardData||window.clipboardData).items,o=[],i=0;i<t.length;i++){var r=t[i].getAsFile();r&&o.push(r)}if(o.length){if(this.getMethods("onBeforePaste")&&0==this.executeMethod("onBeforePaste",e,o,this.$node))return;this.data.ltPropMultiple||this.$node.removeUpload(),this.validate(o),this.getMethods("onPaste")&&this.executeMethod("onPaste",e,o,this.$node)}},keydown:function(e){if(8==e.which){for(var t=$L("#lyteFileUpdSelectedFile lyte-file-close",this.$node),o=0;o<t.length;o++)this.$node.removeUpload(t.eq(o).attr("data-value"));t.length&&e.preventDefault()}else 13===e.which&&(this.openFileWindow(e,!0),e.preventDefault())}}}),Lyte.Component.register("lyte-progressbar",{_template:'<template tag-name="lyte-progressbar"> <template is="if" value="{{lyteUiIfEquals(ltPropType,\'circle\')}}"><template case="true"> <div class="lyteProgressBar lyteCircle" style="{{lyteUiConcat(\'width:\',lyteUiSetWH(ltPropRadius),\'px; height:\',lyteUiSetWH(ltPropRadius),\'px;\')}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}" aria-live="polite"> <div class="lyteCircleType"> <svg class="svgValueEle" width="{{lyteUiSetWH(ltPropRadius)}}" height="{{lyteUiSetWH(ltPropRadius)}}"> <circle class="ltProgressCircle" cx="{{ltPropRadius}}" cy="{{ltPropRadius}}" r="{{lyteUiSetRadius(ltPropRadius,ltPropStroke)}}" fill="none" stroke="#DCE0E3" stroke-width="{{ltPropStroke}}"></circle> <circle class=" ltProgressFillCircle" cx="{{ltPropRadius}}" cy="{{ltPropRadius}}" r="{{lyteUiSetRadius(ltPropRadius,ltPropStroke)}}" fill="none" stroke="{{ltPropBackground}}" stroke-width="{{ltPropStroke}}" stroke-dasharray="{{lyteUiSetDashArray(ltPropRadius,ltPropStroke)}}" stroke-dashoffset="{{lyteUiSetDashArray(ltPropRadius,ltPropStroke)}}" lt-prop-title="{{if(ltPropTooltip,lyteUiConcat(percentage,\'%\'),\'\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;left&quot;}"></circle> </svg> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <svg width="{{lyteUiSetWH(ltPropRadius)}}" height="{{lyteUiSetWH(ltPropRadius)}}" style="transform:{{lyteUiTextTransform(ltPropRadius)}}" viewBox="{{lyteUiConcat(\'0 \',\'0 \',lyteUiSetWH(ltPropRadius),\' \',lyteUiSetWH(ltPropRadius))}}" fill="{{if(ltPropLabelColor,ltPropLabelColor,\'#333\')}}" aria-hidden="true"> <text font-size="{{if(ltPropFontSize,ltPropFontSize,\'1.5rem\')}}" text-anchor="middle" dy=".2em" x="50%" y="50%"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </text> </svg> </template></template> </div> </div> </template><template case="false"><template is="if" value="{{lyteUiIfEquals(ltPropType,\'stacked\')}}"><template case="true"> <div class="{{lyteUiConcat(\'lyteProgressBar\',\' lyteHorizontal\',\' lyteStacked\')}} {{if(ltPropLineSeparator,\'lyteProgressBarWithLineSeparator\',\'\')}} " style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}"> <template is="for" items="{{chunks}}" item="item" index="index"> <template is="if" value="{{lyteUiProgressBarLineSeparator(ltPropLineSeparator,index)}}"><template case="true"><span class="lyteProgressBarLineSeparator"></span></template></template> <span class="lyteProgressStatusStack" style="{{lyteUiConcat(\'width: \',percentage,\'% ;\',\'background:\',lyteUiGetStackValue(ltPropStack,index,\'color\'),\';\')}}"> <template is="if" value="{{lyteUiGetStackValue(ltPropStack,index,\'animated\')}}"><template case="true"> <span class="ltPropProgressAnimated progressMovingObj"></span> </template></template> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <span case="true" class="lyteProgressPercentageStack" lt-prop-title="{{if(ltPropTooltip,lyteUiProgressbarLabel(lyteUiGetStackValue(ltPropStack,index,\'value\'),\'\'),\'\')}}" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(lyteUiGetStackValue(ltPropStack,index,\'labelColor\'),lyteUiGetStackValue(ltPropStack,index,\'labelColor\'),\'#fff\'),\';\')}}" aria-hidden="true"> {{lyteUiProgressbarLabel(lyteUiGetStackValue(ltPropStack,index,\'label\'),\'\')}} </span> </template></template> </span> </template> </div> </template><template case="false"><template is="if" value="{{lyteUiIfEquals(ltPropType,\'vertical\')}}"><template case="true"> <div class="lyteProgressBar lyteVertical" style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}"> <span class="{{lyteUiConcat(\'lyteProgressStatusVertical \',ltPropDirection)}}" lt-prop-title="{{if(ltPropTooltip,lyteUiConcat(percentage,\'%\'),\'\')}}" lt-prop-tooltip-config="{&quot;position&quot; : &quot;left&quot;}" style="{{lyteUiConcat(\'height: \',percentage,\'% ;\',\'transition:\',\'height \',duration,\' \',timingfn,\';\',\'background: \',ltPropBackground,\';\',\'display: block\')}}"> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <span case="true" class="lyteProgressPercentage" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(ltPropLabelColor,ltPropLabelColor,\'#fff\'),\';\')}}" aria-hidden="true"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </span> </template></template> </span> </div> </template><template case="false"> <div class="{{lyteUiConcat(\'lyteProgressBar\',\' lyteHorizontal\',if(ltPropIndeterminate,\' lyteIndeterminate\',\'\'))}} " style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}"> <template is="if" value="{{expHandlers(expHandlers(ltPropAnimated,\'!\'),\'&amp;&amp;\',ltPropIndeterminate)}}"><template case="true"> <span class="inc" style="{{lyteUiConcat(\'position: absolute; height: 100%; background: \',ltPropProgressFillColor)}}"></span> <span class="dec" style="{{lyteUiConcat(\'position: absolute; height: 100%; background: \',ltPropProgressFillColor)}}"></span> </template><template case="false"> <span class="lyteProgressStatus" lt-prop-title="{{if(ltPropTooltip,lyteUiConcat(percentage,\'%\'),\'\')}}" style="{{lyteUiConcat(\'width: \',percentage,\'% ;\',\'transition: \',\'width \',duration,\' \',timingfn,\';\',\'background:\',ltPropBackground)}}"> <template is="if" value="{{ltPropAnimated}}"><template case="true"> <span class="ltPropProgressAnimated progressMovingObj"></span> </template></template> <template is="if" value="{{expHandlers(expHandlers(ltPropIndeterminate,\'!\'),\'&amp;&amp;\',ltPropShowPercentage)}}"><template case="true"> <span case="true" class="lyteProgressPercentage" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(ltPropLabelColor,ltPropLabelColor,\'#fff\'),\';\')}}" aria-hidden="true"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </span> </template></template> </span> </template></template> </div> </template></template></template></template></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'",{type:"helper",value:{name:"lyteUiSetWH",args:["ltPropRadius"]}},"'px; height:'",{type:"helper",value:{name:"lyteUiSetWH",args:["ltPropRadius"]}},"'px;'"]}}}},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'transform:'",{type:"helper",value:{name:"lyteUiTextTransform",args:["ltPropRadius"]}}]}}}},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width: '","percentage","'% ;'","'background:'",{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'color'"]}},"';'"]}}}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'labelColor'"]}},{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'labelColor'"]}},"'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'height: '","percentage","'% ;'","'transition:'","'height '","duration","' '","timingfn","';'","'background: '","ltPropBackground","';'","'display: block'"]}}}},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:["ltPropLabelColor","ltPropLabelColor","'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'position: absolute; height: 100%; background: '","ltPropProgressFillColor"]}}}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'position: absolute; height: 100%; background: '","ltPropProgressFillColor"]}}}}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width: '","percentage","'% ;'","'transition: '","'width '","duration","' '","timingfn","';'","'background:'","ltPropBackground"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:["ltPropLabelColor","ltPropLabelColor","'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropType","ltPropProgressFillColor","ltPropCompletedFillColor","ltPropWidth","ltPropHeight","ltPropRadius","ltPropStroke","ltPropValueCopy","ltPropAnimated","ltPropShowPercentage","ltPropProgressProperty","ltPropLabel","ltPropFontSize","ltPropLabelColor","ltPropIndeterminate","ltPropStack","ltPropDirection","ltPropPercentage","ltPropLineSeparator","ltPropTooltip","lyteUnbound","ltPropAriaLabel","percentage","duration","timingfn","percentageDisplay","checkIndeterminate","chunks","prevValues"],data:function(){return{ltPropType:Lyte.attr("string",{default:"bar"}),ltPropProgressFillColor:Lyte.attr("string",{default:"#42a2eb"}),ltPropCompletedFillColor:Lyte.attr("string",{default:"#3fbd5f"}),ltPropWidth:Lyte.attr("string"),ltPropHeight:Lyte.attr("string"),ltPropRadius:Lyte.attr("string",{default:"50"}),ltPropStroke:Lyte.attr("string",{default:"5"}),ltPropValueCopy:Lyte.attr("string",{default:"0"}),ltPropAnimated:Lyte.attr("boolean",{default:!0}),ltPropShowPercentage:Lyte.attr("boolean",{default:!0}),ltPropProgressProperty:Lyte.attr("object",{default:{value:"0",duration:"0s"}}),ltPropLabel:Lyte.attr("string"),ltPropFontSize:Lyte.attr("string"),ltPropLabelColor:Lyte.attr("string"),ltPropIndeterminate:Lyte.attr("boolean",{default:!1}),ltPropStack:Lyte.attr("array",{default:[]}),ltPropDirection:Lyte.attr("string",{default:"up"}),ltPropPercentage:Lyte.attr("boolean",{default:!0}),ltPropLineSeparator:Lyte.attr("boolean",{default:!1}),ltPropTooltip:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropAriaLabel:Lyte.attr("string",{default:"loading"}),percentage:Lyte.attr("string",{default:"0"}),duration:Lyte.attr("string",{default:"2s"}),timingfn:Lyte.attr("string",{default:"linear"}),percentageDisplay:Lyte.attr("string",{default:"0"}),checkIndeterminate:Lyte.attr("number",{default:0}),chunks:Lyte.attr("array",{default:[]}),prevValues:Lyte.attr("array",{default:[]})}},init:function(){this.getData("ltPropWidth")||this.setData("ltPropWidth","vertical"==this.getData("ltPropType")?"20px":"100%"),this.getData("ltPropHeight")||this.setData("ltPropHeight","vertical"==this.getData("ltPropType")?"200px":"12px")},didConnect:function(){this.getData("ltPropIndeterminate")?this.setData("checkIndeterminate",this.getData("checkIndeterminate")+1):("stacked"==this.getData("ltPropType")&&(this.stackId=[]),$L.fastdom.mutate(this.setBackground.bind(this)));var e=this;this.$node.value=function(t){e.setData("ltPropProgressProperty.value",t)}},setChunks:function(){if("stacked"==this.getData("ltPropType")){var e=this.getData("chunks"),t=this.getData("ltPropStack"),o=this.getData("prevValues");if(e.length!=t.length){e=[];for(var i=0;i<t.length;i++)e.push(i);if(this.setData("chunks",e),0==o.length)for(i=0;i<t.length;i++)o.push(0);else if(o.length>t.length)o.splice(t.length);else if(o<t.length)for(i=o.length;i<t.length;i++)o.push(0);this.setData("prevValues",o)}}}.observes("ltPropStack.[]").on("init"),observeIndeterminate:function(){"bar"==this.getData("ltPropType")&&this.getData("ltPropIndeterminate")&&this.getData("ltPropAnimated")&&(this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration","0s"),this.setData("percentage","100"))}.observes("ltPropIndeterminate","checkIndeterminate"),setProgressFillColor:function(){$L(".lyteProgressStatus",this.$node)[0]?$L(".lyteProgressStatus",this.$node)[0].style.backgroundColor=this.getData("ltPropProgressFillColor"):$L(".ltProgressFillCircle",this.$node)[0]?$L(".ltProgressFillCircle",this.$node)[0].setAttribute("stroke",this.getData("ltPropProgressFillColor")):$L(".lyteProgressStatusVertical",this.$node[0])&&($L(".lyteProgressStatusVertical",this.$node)[0].style.backgroundColor=this.getData("ltPropProgressFillColor")),this.data.ltPropBackground=this.getData("ltPropProgressFillColor")}.observes("ltPropProgressFillColor"),percentageChange:function(e){this.ChangePercentage()}.observes("ltPropProgressProperty","ltPropStack.[]","ltPropProgressProperty.value"),PerValue:function(e){var t=this.getData("ltPropType"),o=this.getData("duration"),i=this.getData("timingfn"),r=this.getData("percentage"),l=this;switch(t){case"circle":var a=6.28318*(this.data.ltPropRadius-this.data.ltPropStroke/2),s=this.$node.querySelector(".ltProgressFillCircle");s.style.transition="stroke-dashoffset "+o+" "+i;var n=a*(1-e/100);setTimeout((function(){s.setAttribute("stroke-dashoffset",n)}),10);break;case"stacked":for(var p=$L(".lyteProgressStatusStack",l.$node),d=this.getData("ltPropStack"),c=(p=$L(".lyteProgressStatusStack",l.$node),d=this.getData("ltPropStack"),0);c<d.length;c++){i=d[c].timingfn||"linear",o=d[c].duration||"0s";p[c].style.transition="width "+o+" "+i}setTimeout((function(){!function(){for(var e=0;e<d.length;e++)p[e].style.width=d[e].value+"%"}()}),10);break;default:var y;if("vertical"==t)(y=$L(".lyteProgressStatusVertical",l.$node)[0]).style.transition="height "+o+" "+i,setTimeout((function(){y.style.height=r+"%"}),10);else(y=$L(".lyteProgressStatus",l.$node)[0]).style.transition="width "+o+" "+i,setTimeout((function(){y.style.width=r+"%"}),10);y.style.transition="width "+o+" "+i}},ChangePercentage:function(){this.getData("ltPropIndeterminate")||this.setBackground()},setBackground:function(){var e=parseFloat(this.getData("ltPropProgressProperty").value),t=this.getData("ltPropProgressProperty").duration?this.getData("ltPropProgressProperty").duration:this.getData("duration");if(this.getData("ltPropProgressProperty").timingfn&&this.setData("timingfn",this.getData("ltPropProgressProperty").timingfn),"circle"===this.getData("ltPropType"))if(parseInt(e)>=100){this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t);var o=this;this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){o.sid=!1,o.$node?(o.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),o.setData("ltPropBackground",o.getData("ltPropCompletedFillColor"))):clearTimeout(o.sid)}),t)}else this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration",t),this.setData("percentage",e+"");else{if("stacked"===this.getData("ltPropType")){var i=this.getData("ltPropStack"),r=this.$node.querySelectorAll(".lyteProgressStatusStack"),l=this.getData("prevValues"),a=0;this.setData("duration",t);for(var s=0;s<i.length;s++){if(e=parseFloat(i[s].value),i[s].animated){var n=r[s].querySelector(".ltPropProgressAnimated");n.classList.add("progressMovingObj"),n.style.transition="left "+t+" linear, width "+t+" linear",n.style.left=a+"%",n.style.width=e+"%"}if(a+=e,i[s].label)r[s].querySelector(".lyteProgressPercentageStack").innerHTML=i[s].label;else{dur=parseFloat(i[s].duration||t),this.stackId[s]&&(clearInterval(this.stackId[s]),this.stackId[s]=!1);var p=l[s]||0,d=(o=this,{ind:s,value:e,ele:r[s].querySelector(".lyteProgressPercentageStack"),p:p,stack:i[s]});if(0==dur)l[s]=e,this.getData("ltPropShowPercentage")&&(d.ele.textContent=e+(this.getData("ltPropPercentage")?"%":""));else if(p>e){var c=p-e;d.margin=c/(1e3*dur)*100,this.stackId[s]=setInterval(this.changePercentageDisplay,100,"dec",d,this)}else if(p<e){c=e-p;d.margin=c/(1e3*dur)*100,this.stackId[s]=setInterval(this.changePercentageDisplay,100,"inc",d,this)}}}return void this.PerValue(this.data.ltPropProgressProperty.value)}if("vertical"===this.getData("ltPropType"))if(parseInt(e)>=100){this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t);o=this;this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){o.sid=!1,o.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),o.setData("ltPropBackground",o.getData("ltPropCompletedFillColor"))}),t)}else this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration",t),this.setData("percentage",e+"");else if(parseInt(e)>=100){this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t);o=this;this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){o.sid=!1,o.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),o.setData("ltPropBackground",o.getData("ltPropCompletedFillColor")),o.getData("ltPropAnimated")&&o.$node.querySelector(".lyteProgressBar .ltPropProgressAnimated").classList.remove("progressMovingObj")}),t)}else this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.getData("ltPropAnimated")&&this.$node.querySelector(".lyteProgressBar .ltPropProgressAnimated").classList.add("progressMovingObj"),this.setData("duration",t),this.setData("percentage",e+"")}this.iId&&(clearInterval(this.iId),this.iId=!1);p=parseFloat(this.getData("percentageDisplay")),o=this;if(0==parseInt(this.getData("duration")))this.setData("percentageDisplay",e+"");else if(p>e){var y=(c=p-e)/(1e3*parseInt(this.getData("duration")))*100;this.iId=setInterval((function(){if(p-=y,!o.$node)return clearInterval(o.iId),void(o.iId=!1);o.setData("percentageDisplay",Math.max(parseFloat(p.toFixed(2)),e)+""),parseFloat(p)==e&&(clearInterval(o.iId),o.iId=!1)}),100)}else if(p<e){y=(c=e-p)/(1e3*parseInt(this.getData("duration")))*100;this.iId=setInterval((function(){if(p+=y,!o.$node)return clearInterval(o.iId),void(o.iId=!1);o.setData("percentageDisplay",Math.min(parseFloat(p.toFixed(2)),e)+""),parseFloat(p)>=e&&(clearInterval(o.iId),o.iId=!1)}),100)}this.PerValue(this.data.ltPropProgressProperty.value)},changePercentageDisplay:function(e,t,o){if("inc"==e?t.p+=t.margin:t.p-=t.margin,!o.$node)return clearInterval(o.stackId[t.ind]),void(o.stackId[t.ind]=!1);var i="inc"==e?Math.min(parseFloat(t.p.toFixed(2)),t.value):Math.max(parseFloat(t.p.toFixed(2)),t.value);o.getData("ltPropShowPercentage")&&(t.ele.textContent=i+(o.getData("ltPropPercentage")?"%":"")),("inc"==e&&parseFloat(i)>=t.value||"dec"==e&&parseFloat(i)==t.value)&&(clearInterval(o.stackId[t.ind]),Lyte.arrayUtils(o.getData("prevValues"),"replaceAt",t.ind,t.value),o.stackId[t.ind]=!1)},setCircleStroke:function(e,t){var o=e.getAttribute("stroke-dasharray")*(1-parseInt(t)/100);e.setAttribute("stroke-dashoffset",o)},didDestroy:function(){this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.iId&&(window.clearInterval(this.iId),this.iId=!1),this.stackId&&this.stackId.forEach((function(e,t){e&&(window.clearTimeout(this.sid),e=!1)}))}}),Lyte.Component.registerHelper("lyteUiProgressBarLineSeparator",(function(e,t){return e&&t}));var LyteColorbox={_prefix:"lyteCBox",_boxElement:"lyteCBoxElement",_box:null,_content:null,_overlay:null,_title:null,_description:null,_close:null,_download:null,_next:null,_prev:null,_open:null,_zoomIn:null,_zoomOut:null,_reset:null,_active:null,_closing:null,_previousOffset:{},_first:!0,_domEle:null,_related:null,_el:null,_photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,_index:0,_zoom:!1,_component:null,_winheight:null,_winWidth:null,_isArray:!1,_hrefArray:[],_titleArray:[],_nextItem:!1,_prevItem:!1,_zIndex:0,_timeoutId:!1,_thumbDiv:null,_clickNumber:0,_zoomedThroughUtil:!1,_count:0,_boundKeydown:!1,_boundResize:!1,_diff:0,_loadingIcon:null,setSize:function(e,t,o){return/%/.test(e)?parseInt(e):Math.round(100*(isNaN(e/o)?0:e/o))},createElement:function(e,t,o){var i=document.createElement(e);return t&&(i.id=t),o&&i.classList.add(o),i},getSelector:function(e,t){for(var o=0;o<t.length;o++)if(-1!=e.indexOf("."+t[o]))return t[o];return!1},getIndex:function(e){var t=LyteColorbox._related.length,o=(LyteColorbox._index+e)%t;return o<0?t+o:o},isImage:function(e){return LyteColorbox._domEle||LyteColorbox._photoRegex.test(e)},createName:function(e){return e?e.replace(/[ ,-]/g,"_"):"photo"==LyteColorbox._el.type?"image":"file"},add:function(e){if(Array.isArray(e))e=e.map((function(e){if(e.lytecboxType&&"photo"!=e.lytecboxType){var t=e.lytecboxType.split("/");e.type=t[0],t.length>1?e.format=t[1].toUpperCase():e.format="WEBPAGE"}else e.type="photo";return e}));else if(e.lytecboxType&&"photo"!=e.lytecboxType){var t=e.lytecboxType.split("/");e.type=t[0],t.length>1?e.format=t[1].toUpperCase():e.format="WEBPAGE"}else e.type="photo";Lyte.arrayUtils(LyteColorbox._related,"push",e)},getRelated:function(e){if(LyteColorbox._index=0,LyteColorbox._related=[],e&&!1!==e&&"nofollow"!==e){for(var t=Array.from(document.querySelectorAll("."+LyteColorbox._boxEle)).filter((function(t){return LyteColorbox.getSelector(LyteColorbox._component.getData("ltPropSelectors"),Array.from(t.classList))===e})),o=0;o<t.length;o++){var i=LyteColorbox.getProperties(t[o]);i.classList||(i.classList=[e]),LyteColorbox._related.push(i)}LyteColorbox._index=LyteColorbox._related.findIndex((function(e){return e.lytecboxHref==LyteColorbox._el.lytecboxHref&&e.lytecboxTitle==LyteColorbox._el.lytecboxTitle})),-1===LyteColorbox._index&&(LyteColorbox._related.push(LyteColorbox._el),LyteColorbox._index=LyteColorbox._related.length-1)}else LyteColorbox._related=[],LyteColorbox._related.push(LyteColorbox._el),LyteColorbox._index=LyteColorbox._related.length-1},hideElement:function(){for(var e=LyteColorbox._content?LyteColorbox._content.querySelectorAll(".lyteCBoxVisible"):[],t=0;t<e.length;t++)e[t].classList.remove("lyteCBoxVisible")},setCurrentClass:function(e){for(var t=LyteColorbox._content?LyteColorbox._content.querySelectorAll(".lyteCBoxCurrentElem"):[],o=0;o<t.length;o++)t[o].classList.remove("lyteCBoxCurrentElem");e.classList.add("lyteCBoxCurrentElem")},hideLoadingIcon:function(e){e.querySelector(".lyteColorboxLoadingImg").style.display="none"},toggleLoadingIcon:function(){"custom"!==LyteColorbox._component.getData("ltPropType")||LyteColorbox._component.getData("ltPropYield")||("none"!=LyteColorbox._content.querySelector(".lyteColorboxLoadingImg").style.display?LyteColorbox._content.querySelector(".lyteColorboxLoadingImg").style.display="none":LyteColorbox._content.querySelector(".lyteColorboxLoadingImg").style.display="")},getProperties:function(e){var t=Object.assign({},e.dataset);if(t.lytecboxHref||("IMG"===e.tagName?t.lytecboxHref=e.src:"A"===e.tagName&&(t.lytecboxHref=e.href)),t.lytecboxType&&"photo"!=t.lytecboxType){var o=t.lytecboxType.split("/");t.type=o[0],o.length>1?t.format=o[1].toUpperCase():t.format="WEBPAGE"}else t.type="photo";return t.classList=e.classList,t},removeElements:function(){var e=Array.from(LyteColorbox._content.querySelectorAll("."+LyteColorbox._prefix+"Photo")),t=LyteColorbox._component,o=(t.getData("ltPropType"),t.getData("ltPropAnimation"));Lyte.arrayUtils(e,"push",Array.from(LyteColorbox._content.querySelectorAll("."+LyteColorbox._prefix+"Iframe"))),Lyte.arrayUtils(e,"push",Array.from(LyteColorbox._content.querySelectorAll("."+LyteColorbox._prefix+"Custom")));for(var i=0;i<e.length;i++)"slide"===o?e[i].parentElement.remove():e[i].remove()},setPercentage:function(e,t){if(e)LyteColorbox._domEle.setAttribute("data-lytecb-size",e);else{var o=LyteColorbox._domEle.getAttribute("lytecbox-rotate"),i=o&&-1!=o.indexOf("90")?LyteColorbox._domEle.naturalHeight:LyteColorbox._domEle.naturalWidth;e=t?(o&&-1!=o.indexOf("90")?LyteColorbox._domEle.offsetHeight:LyteColorbox._domEle.offsetWidth)*t/i*100:LyteColorbox._domEle.getBoundingClientRect().width/i*100,LyteColorbox._domEle.setAttribute("data-lytecb-size",e%1!=0?Number.parseFloat(e).toFixed(2):e)}},checkHW:function(){"photo"==LyteColorbox._el.type&&LyteColorbox._domEle.offsetHeight>=LyteColorbox._domEle.parentElement.offsetHeight?LyteColorbox._domEle.parentElement.classList.add("lyteCBoxAlignStart"):LyteColorbox._domEle.parentElement.classList.remove("lyteCBoxAlignStart")},isSameColorBoxAsPrevious:function(e){return LyteColorbox._component&&LyteColorbox._component.$node.isEqualNode(e.$node)},setupForBindings:function(e){this.isSameColorBoxAsPrevious(e)||(LyteColorbox._boxEle=e._boxElement,LyteColorbox._content=e._content,LyteColorbox._overlay=e._overlay,LyteColorbox._title=e._title,LyteColorbox._crop=e._crop,LyteColorbox._description=e._description,LyteColorbox._close=e._close,LyteColorbox._download=e._download,LyteColorbox._next=e._next,LyteColorbox._prev=e._prev,LyteColorbox._box=e._box,LyteColorbox._zoomIn=e._zoomIn,LyteColorbox._zoomOut=e._zoomOut,LyteColorbox._reset=e._reset,LyteColorbox._thumbDiv=e._thumbDiv,LyteColorbox._loadingIcon=e._loadingIcon,LyteColorbox._component=e)},launch:function(e,t){if(this.data?this.data.ltPropShow=!0:this._component.data.ltPropShow=!0,e||(e=this.getSelectorElements()[0]),this.$node&&LyteColorbox.setupForBindings(this),!LyteColorbox._closing){if(e&&"object"==typeof e)if(e.nodeType){var o=LyteColorbox.getProperties(e);LyteColorbox._el=e=o,LyteColorbox.getRelated(LyteColorbox.getSelector(LyteColorbox._component.getData("ltPropSelectors"),Array.from(e.classList)))}else e.lytecboxHref&&(LyteColorbox._el=e,e.classList?LyteColorbox.getRelated(LyteColorbox.getSelector(LyteColorbox._component.getData("ltPropSelectors"),Array.from(e.classList))):(LyteColorbox._related=[],LyteColorbox._related.push(LyteColorbox._el)));else LyteColorbox._related=[];if(!(0!=LyteColorbox._component.callOnBeforeOpen(LyteColorbox._related,t)))return LyteColorbox._related=null,void(LyteColorbox._el=null);LyteColorbox._el||(LyteColorbox._el=e=LyteColorbox._related[0]),LyteColorbox._index=LyteColorbox._related instanceof Array?LyteColorbox._related.findIndex((function(e){return e.lytecboxHref==LyteColorbox._el.lytecboxHref&&e.lytecboxTitle==LyteColorbox._el.lytecboxTitle})):0,LyteColorbox._component.getData("ltPropYield")||(LyteColorbox._related.length>1?(LyteColorbox._next.classList.remove("lyteColorboxHideVisibility"),LyteColorbox._prev.classList.remove("lyteColorboxHideVisibility")):(LyteColorbox._next.classList.add("lyteColorboxHideVisibility"),LyteColorbox._prev.classList.add("lyteColorboxHideVisibility"))),LyteColorbox._open?LyteColorbox.load(e):(LyteColorbox._open=LyteColorbox._active=!0,document.body.classList.add("lyteCBoxOH"),LyteColorbox._box.classList.add("lyteColorboxHideVisibility","lyteColorboxDisplay"),LyteColorbox._component.trapFocus(),LyteColorbox._overlay&&LyteColorbox.computeOffsetImpl(),LyteColorbox.hideElement(),LyteColorbox._box.classList.remove("lyteColorboxHideVisibility"),LyteColorbox._component.setData("thumbnails",LyteColorbox._related),LyteColorbox._component.setData("triggerSetThumbnail",LyteColorbox._component.getData("triggerSetThumbnail")+1),LyteColorbox._component.callOnOpen(),LyteColorbox.load(e,!0),LyteColorbox._content.focus(),LyteColorbox._content&&LyteColorbox._title&&LyteColorbox._content.setAttribute("aria-labelledby",LyteColorbox._title.getAttribute("id")))}},load:function(e,t){var o,i;LyteColorbox._active=!0,LyteColorbox._domEle=!1;var r=e.lytecboxHref,l=e.lytecboxTitle;LyteColorbox._title&&l&&(LyteColorbox._title.textContent=l);var a=$L(".lyteColorboxCropperIcon",this.childComp);a[0]&&"photo"==e.type?a.removeClass("lyteColorboxCropDisable"):a.addClass("lyteColorboxCropDisable");var s=LyteColorbox._boxEle+"__"+LyteColorbox._index;if(LyteColorbox._content.classList.remove("lyteCBoxOH"),LyteColorbox._component.setData("ltPropContent",e),"custom"==e.type)if(LyteColorbox._component.setData("isIframe",!0),e.lytecboxDlink||LyteColorbox._component.setData("download",!1),i=LyteColorbox._content.querySelector("."+s),LyteColorbox._domEle=i,LyteColorbox._domEle)LyteColorbox.toggleLoadingIcon(),"slide"==LyteColorbox._component.getData("ltPropAnimation")?(LyteColorbox._zIndex++,LyteColorbox._nextItem?((o=LyteColorbox._domEle.parentElement).classList.remove("lyteCBoxDN"),o.classList.add("lytCBoxNextItem"),LyteColorbox._component.setData("currentEle",o)):LyteColorbox._prevItem&&((o=LyteColorbox._domEle.parentElement).classList.remove("lyteCBoxDN"),o.classList.add("lytCBoxPreviousItem"),LyteColorbox._component.setData("currentEle",o)),setTimeout((function(){LyteColorbox.slide()}),10)):LyteColorbox._domEle.classList.add("lyteCBoxVisible"),LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index),LyteColorbox._active=!1;else{if(LyteColorbox._domEle=LyteColorbox.createElement("div",null,null),$L(LyteColorbox._domEle).attr({class:LyteColorbox._prefix+"Custom "+s}),"none"==e.lytecboxPreview){var n=LyteColorbox.createElement("div",null,LyteColorbox._prefix+"PreviewNone");e.lytecboxIcon&&(n.style.backgroundImage="url("+e.lytecboxIcon+")"),LyteColorbox._domEle.append(n),(n=LyteColorbox.createElement("div",null,LyteColorbox._prefix+"CustomText")).textContent=e.lytecboxAlt||"Sorry, no preview is available for this file format",LyteColorbox._domEle.append(n)}LyteColorbox._component.callOnLoad(LyteColorbox._domEle,LyteColorbox._index),LyteColorbox.toggleLoadingIcon(),LyteColorbox.appendElement(LyteColorbox._domEle),"slide"==LyteColorbox._component.getData("ltPropAnimation")&&setTimeout((function(){LyteColorbox.slide()}),10),LyteColorbox._active=!1,LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index)}else if("iframe"==e.type)if(LyteColorbox._component.setData("isIframe",!0),e.lytecboxDlink||LyteColorbox._component.setData("download",!1),i=LyteColorbox._content.querySelector("."+s),LyteColorbox._domEle=i,LyteColorbox._domEle)LyteColorbox.toggleLoadingIcon(),"slide"==LyteColorbox._component.getData("ltPropAnimation")?(LyteColorbox._zIndex++,LyteColorbox._nextItem?((o=LyteColorbox._domEle.parentElement).classList.remove("lyteCBoxDN"),o.classList.add("lytCBoxNextItem"),LyteColorbox._component.setData("currentEle",o)):LyteColorbox._prevItem&&((o=LyteColorbox._domEle.parentElement).classList.remove("lyteCBoxDN"),o.classList.add("lytCBoxPreviousItem"),LyteColorbox._component.setData("currentEle",o)),setTimeout((function(){LyteColorbox.slide()}),10)):LyteColorbox._domEle.classList.add("lyteCBoxVisible"),LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index),LyteColorbox._active=!1;else{LyteColorbox._domEle=document.createElement("iframe");var p=e.lytecboxAttrs||{};p.width||(p.width="100%"),p.height||(p.height="100%"),"object"==typeof p&&$L.each(p,(function(e,t){LyteColorbox._domEle[e]=t})),"frameBorder"in LyteColorbox._domEle&&(LyteColorbox._domEle.frameBorder=0),"allowTransparency"in LyteColorbox._domEle&&(LyteColorbox._domEle.allowTransparency="true"),LyteColorbox._domEle.name=(new Date).getTime(),LyteColorbox._domEle.allowFullscreen=!0;$L(LyteColorbox._domEle).attr({src:r,class:LyteColorbox._prefix+"Iframe "+s}),LyteColorbox._domEle.onload=function(){LyteColorbox.toggleLoadingIcon(),LyteColorbox._component.callOnLoad(LyteColorbox._domEle,LyteColorbox._index),"slide"==LyteColorbox._component.getData("ltPropAnimation")&&setTimeout((function(){LyteColorbox.slide()}),10),LyteColorbox._active=!1,LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index)},LyteColorbox._domEle.onerror=function(){alert("error on colorbox")},LyteColorbox.appendElement(LyteColorbox._domEle)}else{var d=LyteColorbox._component.getData("ltPropType"),c=LyteColorbox._component.getData("ltPropAddOrientation"),y=LyteColorbox._component.getData("ltPropWithCredentials");if(LyteColorbox._component.setData("isIframe",!1),LyteColorbox._component.setData("download",!0),i=LyteColorbox._content.querySelector("."+s),LyteColorbox._domEle=i,"image"!=d&&LyteColorbox._content.classList.add("lyteCBoxOH"),LyteColorbox._domEle)LyteColorbox.toggleLoadingIcon(),LyteColorbox.enableTransition(LyteColorbox._domEle),"slide"==LyteColorbox._component.getData("ltPropAnimation")?(LyteColorbox._zIndex++,LyteColorbox._nextItem?((o=LyteColorbox._domEle.parentElement).classList.remove("lyteCBoxDN"),o.classList.add("lytCBoxNextItem"),LyteColorbox._component.setData("currentEle",o)):LyteColorbox._prevItem&&((o=LyteColorbox._domEle.parentElement).classList.remove("lyteCBoxDN"),o.classList.add("lytCBoxPreviousItem"),LyteColorbox._component.setData("currentEle",o)),LyteColorbox.slide(),LyteColorbox._domEle.parentElement._loaded&&(LyteColorbox._domEle.classList.contains("lyteCBoxVisible")||LyteColorbox._domEle.classList.add("lyteCBoxVisible"),LyteColorbox.checkAspectRatio())):("image"===d&&LyteColorbox.setCurrentClass(LyteColorbox._domEle.parentElement),LyteColorbox._domEle.classList.add("lyteCBoxVisible"),LyteColorbox.checkHW(),LyteColorbox.checkAspectRatio()),LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index),LyteColorbox._active=!1;else{if(LyteColorbox._domEle=new Image,e.lytecboxClass){var u=e.lytecboxClass.split(" ");$L.each(u,(function(e,t){LyteColorbox._domEle.classList.add(t)}))}var m;"image"===d&&(m=LyteColorbox.appendElementForImage(),"slide"==LyteColorbox._component.getData("ltPropAnimation")?(t&&m.classList.add("lyteCBoxCurrentItem"),LyteColorbox.slide()):LyteColorbox.setCurrentClass(m));var h=$L(LyteColorbox._domEle),x=LyteColorbox.imageComplete.bind(m),g=LyteColorbox.imageFailure.bind(m);if(c){var f=new XMLHttpRequest,b=LyteColorbox._prefix;f.onload=function(){var e=new FileReader;e.onloadend=function(){h.attr({src:e.result,class:b+"Photo "+s,alt:LyteColorbox._component.getData("ltPropImgError")}).one("load",x).one("error",g)},e.readAsDataURL(f.response)},f.onError=function(){h.attr({src:r,class:b+"Photo "+s,alt:LyteColorbox._component.getData("ltPropImgError")}).one("load",x).one("error",g)},f.open("GET",r,!0),y&&(f.withCredentials=!0),f.responseType="blob",f.send()}else h.attr({src:r,class:LyteColorbox._prefix+"Photo "+s,alt:LyteColorbox._component.getData("ltPropImgError")}).one("load",x).one("error",g);"image"===d&&m.appendChild(h.get(0)),LyteColorbox._active=!1}}if(LyteColorbox._component.getData("ltPropThumbnail")){var C=LyteColorbox._thumbDiv.querySelector(".thumb-on");C&&C.classList.remove("thumb-on"),LyteColorbox._thumbDiv.querySelectorAll(".lyteColorboxThumb")[LyteColorbox._index].classList.add("thumb-on"),LyteColorbox.updateThumbnailPos()}this.changeNavArrows()},changeNavArrows:function(){var e=LyteColorbox._index;LyteColorbox._component.getData("ltPropLoop")||(0==e?LyteColorbox._prev&&LyteColorbox._prev.classList.add("lyteColorboxHideVisibility"):e==LyteColorbox._related.length-1?LyteColorbox._next&&LyteColorbox._next.classList.add("lyteColorboxHideVisibility"):(LyteColorbox._prev&&LyteColorbox._prev.classList.contains("lyteColorboxHideVisibility")&&LyteColorbox._prev.classList.remove("lyteColorboxHideVisibility"),LyteColorbox._next&&LyteColorbox._next.classList.contains("lyteColorboxHideVisibility")&&LyteColorbox._next.classList.remove("lyteColorboxHideVisibility")))},imageComplete:function(){var e,t=LyteColorbox._component.getData("ltPropType"),o=LyteColorbox._component.getData("ltPropAddOrientation");this._loaded=!0,"custom"===t?(LyteColorbox.checkAndChangeStatus(LyteColorbox._domEle),LyteColorbox._domEle._offset={height:LyteColorbox._domEle.naturalHeight,width:LyteColorbox._domEle.naturalWidth},LyteColorbox._component.callOnLoad(LyteColorbox._domEle,LyteColorbox._index),(e=LyteColorbox._domEle).classList.add("lyteCBoxDNImp"),LyteColorbox._overlay?(LyteColorbox.computeOffsetImpl(null,e,!0),o&&$L.exif?(e._index=LyteColorbox._index,$L.exif({target:e,getData:function(t){if((e=t.target).classList.add("lyteColorBoxDisableTransition"),"from-image"!=getComputedStyle(e).imageOrientation)switch(t.exifdata.Orientation){case 2:e.setAttribute("style","transform:rotateY(180deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg)");break;case 3:e.setAttribute("style","transform:rotate(180deg)"),e.setAttribute("lytecbox-rotate","rotate(180deg)");break;case 4:e.setAttribute("style","transform:rotateY(180deg) rotate(180deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(180deg)");break;case 5:e.setAttribute("style","transform:rotateY(180deg) rotate(90deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(90deg)");break;case 6:e.setAttribute("style","transform:rotate(90deg)"),e.setAttribute("lytecbox-rotate","rotate(90deg)");break;case 7:e.setAttribute("style","transform:rotateY(180deg) rotate(-90deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(-90deg)");break;case 8:e.setAttribute("style","transform:rotate(-90deg)"),e.setAttribute("lytecbox-rotate","rotate(-90deg)")}e.classList.remove("lyteCBoxDNImp"),e.classList.remove("lyteColorBoxDisableTransition"),LyteColorbox.checkAspectRatio(),LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index)}})):(o&&console.log("Couldn't fetch exifdata as the plugin is not included."),e.classList.remove("lyteCBoxDNImp"),LyteColorbox.checkAspectRatio(),LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index))):(LyteColorbox.toggleLoadingIcon(),LyteColorbox.appendElement(LyteColorbox._domEle),o&&$L.exif?(e._index=LyteColorbox._index,$L.exif({target:e,getData:function(t){if((e=t.target).classList.add("lyteColorBoxDisableTransition"),"from-image"!=getComputedStyle(e).imageOrientation)switch(t.exifdata.Orientation){case 2:e.setAttribute("style","transform:rotateY(180deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg)"),e.setAttribute("data-orientation",2);break;case 3:e.setAttribute("style","transform:rotate(180deg)"),e.setAttribute("lytecbox-rotate","rotate(180deg)"),e.setAttribute("data-orientation",3);break;case 4:e.setAttribute("style","transform:rotateY(180deg) rotate(180deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(180deg)"),e.setAttribute("data-orientation",4);break;case 5:e.setAttribute("style","transform:rotateY(180deg) rotate(90deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(90deg)"),e.setAttribute("data-orientation",5);break;case 6:e.setAttribute("style","transform:rotate(90deg)"),e.setAttribute("lytecbox-rotate","rotate(90deg)"),e.setAttribute("data-orientation",6);break;case 7:e.setAttribute("style","transform:rotateY(180deg) rotate(-90deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(-90deg)"),e.setAttribute("data-orientation",7);break;case 8:e.setAttribute("style","transform:rotate(-90deg)"),e.setAttribute("lytecbox-rotate","rotate(-90deg)"),e.setAttribute("data-orientation",8)}e.classList.remove("lyteCBoxDNImp"),e.classList.remove("lyteColorBoxDisableTransition"),LyteColorbox.checkAspectRatio(),"slide"==LyteColorbox._component.getData("ltPropAnimation")&&LyteColorbox.slide(),LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index)}})):(o&&console.log("Couldn't fetch exifdata as the plugin is not included."),e.classList.remove("lyteCBoxDNImp"),LyteColorbox.checkAspectRatio(),"slide"==LyteColorbox._component.getData("ltPropAnimation")&&LyteColorbox.slide(),LyteColorbox._component.callOnComplete(LyteColorbox._domEle,LyteColorbox._index)))):(e=this.querySelector("img"),LyteColorbox.checkAndChangeStatus(e),e._offset={height:e.naturalHeight,width:e.naturalWidth},LyteColorbox.hideLoadingIcon(this),o&&$L.exif?(e._index=LyteColorbox._index,$L.exif({target:e,getData:function(t){if((e=t.target).classList.add("lyteColorBoxDisableTransition"),"from-image"!=getComputedStyle(e).imageOrientation)switch(t.exifdata.Orientation){case 2:e.setAttribute("style","transform:rotateY(180deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg)"),e.setAttribute("data-orientation",2);break;case 3:e.setAttribute("style","transform:rotate(180deg)"),e.setAttribute("lytecbox-rotate","rotate(180deg)"),e.setAttribute("data-orientation",3);break;case 4:e.setAttribute("style","transform:rotateY(180deg) rotate(180deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(180deg)"),e.setAttribute("data-orientation",4);break;case 5:e.setAttribute("style","transform:rotateY(180deg) rotate(90deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(90deg)"),e.setAttribute("data-orientation",5);break;case 6:e.setAttribute("style","transform:rotate(90deg)"),e.setAttribute("lytecbox-rotate","rotate(90deg)"),e.setAttribute("data-orientation",6);break;case 7:e.setAttribute("style","transform:rotateY(180deg) rotate(-90deg)"),e.setAttribute("lytecbox-rotate","rotateY(180deg) rotate(-90deg)"),e.setAttribute("data-orientation",7);break;case 8:e.setAttribute("style","transform:rotate(-90deg)"),e.setAttribute("lytecbox-rotate","rotate(-90deg)"),e.setAttribute("data-orientation",8)}LyteColorbox._component.callOnLoad(e,e._index,e.exifdata),e.classList.remove("lyteColorBoxDisableTransition"),LyteColorbox._domEle===e&&(e.classList.add("lyteCBoxVisible"),LyteColorbox.checkAspectRatio()),LyteColorbox._component.callOnComplete(e,e._index)}})):(o&&console.log("Couldn't fetch exifdata as the plugin is not included."),LyteColorbox._component.callOnLoad(e,LyteColorbox._index),e.classList.add("lyteCBoxVisible"),LyteColorbox._domEle===e&&LyteColorbox.checkAspectRatio(),LyteColorbox._component.callOnComplete(e,LyteColorbox._index)))},imageFailure:function(){var e;"custom"===LyteColorbox._component.getData("ltPropType")?(e=LyteColorbox._domEle,LyteColorbox.toggleLoadingIcon(),LyteColorbox.appendElement(LyteColorbox._domEle)):(e=this.querySelector("img"),LyteColorbox.hideLoadingIcon(this),LyteColorbox._domEle.classList.add("lyteCBoxVisible")),LyteColorbox._component.callOnFailure(e,LyteColorbox._index,LyteColorbox._content)},updateThumbnailPos:function(){var e=LyteColorbox._index,t=LyteColorbox._component.getData("ltPropThumbnailNumber"),o=parseInt(t/2),i=t%2==0?LyteColorbox._related.length:LyteColorbox._related.length-1,r=LyteColorbox._thumbDiv.querySelector(".lyteColorboxThumbInnerWrapper"),l=LyteColorbox._thumbDiv.querySelectorAll(".lyteColorboxThumb"),a=window.getComputedStyle(l[0]),s=parseInt(a.width)+(a.marginLeft?parseInt(a.marginLeft):0)+(a.marginRight?parseInt(a.marginRight):0),n=_lyteUiUtils.getRTL()?-1:1;if("custom"===LyteColorbox._component.getData("ltPropType"))e>=o&&e<=i-o?r.style.transform="translate("+(o-e)*s*n+"px,0)":e<o?r.style.transform="translate(0,0)":e>i-o&&LyteColorbox._related.length>t&&(r.style.transform="translate("+(o-(i-o))*s*n+"px,0)");else{var p=LyteColorbox._thumbDiv.offsetWidth;if(t=Math.floor(p/s),e>=(o=parseInt(t/2))&&e<=i-o){var d=0;e!=o&&e!=i-o||t%2!=0||(LyteColorbox._diff=d=s/2*-n),e>o&&e<i-o&&(d=(o-e)*s*n+(p-t*s)/2+LyteColorbox._diff),e==i-o&&(d=(p-LyteColorbox._related.length*s)*n+(a.marginRight?parseInt(a.marginRight):0)),r.style.transform="translate("+d+"px,0)"}else if(e<o)r.style.transform="translate(0,0)";else if(e>i-o&&LyteColorbox._related.length>t){d=(p-LyteColorbox._related.length*s)*n+(a.marginRight?parseInt(a.marginRight):0);r.style.transform="translate("+d+"px,0)"}}},calculateOverlayHeight:function(e){LyteColorbox._component.getData("ltPropYield")?LyteColorbox._overlay.style.height=LyteColorbox._overlay.getBoundingClientRect().height+"px":LyteColorbox._overlay.style.height=e-50+"px"},setImagePostion:function(){if("slide"==LyteColorbox._component.getData("ltPropAnimation"))var e=$L(".lyteCBoxCurrentItem",LyteColorbox._component.childComp)[0]?$L(".lyteCBoxCurrentItem",LyteColorbox._component.childComp)[0]:LyteColorbox._content;else e=$L(".lyteCBoxCurrentElem",LyteColorbox._component.childComp)[0]?$L(".lyteCBoxCurrentElem",LyteColorbox._component.childComp)[0]:LyteColorbox._content;if($L("lyte-colorbox-crop",e)[0]&&"none"===window.getComputedStyle($L("lyte-colorbox-crop")[0]).display){var t=$L(".lyteCropArea",e);e.style.top=(LyteColorbox._content.offsetHeight-t[0].offsetHeight)/2+"px",e.style.left=(LyteColorbox._content.offsetWidth-t[0].offsetWidth)/2+"px"}},computeOffsetImpl:function(e,t,o){var i=LyteColorbox._component,r="custom"===i.getData("ltPropType")?document.querySelector(".lyteColorboxHeader"):i._header;if(LyteColorbox._open&&LyteColorbox._overlay){var l=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(LyteColorbox._component.getData("ltPropThumbnail")){var s=window.getComputedStyle(LyteColorbox._thumbDiv);a-=parseInt(s.height)+parseInt(s.marginTop)}var n={};LyteColorbox._first||window.removeEventListener("resize",LyteColorbox.computeOffsetImpl),LyteColorbox._first=!1;var p=LyteColorbox._overlay.getBoundingClientRect();if(t&&(LyteColorbox._component.getData("ltPropHeight")?n.conHeight=parseInt(LyteColorbox._component.getData("ltPropHeight")):t.height>=p.height?n.conHeight=p.height:n.conHeight=t.height,LyteColorbox._component.getData("ltPropWidth")?n.conWidth=parseInt(LyteColorbox._component.getData("ltPropWidth")):t.width>=p.width?n.conWidth=p.width:n.conWidth=t.width,LyteColorbox.toggleLoadingIcon(),LyteColorbox.appendElement(t),o||LyteColorbox.checkAspectRatio(),LyteColorbox._active=!1),LyteColorbox._component.getData("ltPropYield")){var d=LyteColorbox._content.getBoundingClientRect();p=LyteColorbox._overlay?LyteColorbox._overlay.getBoundingClientRect():{height:a,width:l};LyteColorbox._content.style.top=(p.height-d.height)/2+"px",LyteColorbox._content.style.left=(p.width-d.width)/2+"px",window.getComputedStyle(LyteColorbox._content).transform&&(LyteColorbox._content.style.transform="none")}else n.top=(a-LyteColorbox._content.getBoundingClientRect().height)/2,n.left=(l-LyteColorbox._content.getBoundingClientRect().width)/2,n.iconTop=(a-LyteColorbox._next.getBoundingClientRect().height)/2+r.getBoundingClientRect().height/2;if("slide"==LyteColorbox._component.getData("ltPropAnimation")&&LyteColorbox.slide(),LyteColorbox._crop)if("none"===window.getComputedStyle(LyteColorbox._crop).display){if("slide"==LyteColorbox._component.getData("ltPropAnimation"))var c=$L(".lyteCBoxCurrentItem",LyteColorbox._component.childComp)[0]?$L(".lyteCBoxCurrentItem",LyteColorbox._component.childComp)[0]:LyteColorbox._content;else c=$L(".lyteCBoxCurrentElem",LyteColorbox._component.childComp)[0]?$L(".lyteCBoxCurrentElem",LyteColorbox._component.childComp)[0]:LyteColorbox._content;t=$L(".lyteCBoxVisible",c);c.style.top=(LyteColorbox._content.offsetHeight-t[0].offsetHeight)/2+"px",c.style.left=(LyteColorbox._content.offsetWidth-t[0].offsetWidth)/2+"px"}window.addEventListener("resize",LyteColorbox.computeOffsetImpl)}},appendElementForImage:function(){var e;LyteColorbox._component;if(LyteColorbox._nextItem)e=LyteColorbox.createElement("div",null,"lyteCBoxItem"),LyteColorbox._component.setData("currentEle",e),(t=LyteColorbox._content.querySelector("."+LyteColorbox._boxEle+"__"+(LyteColorbox._index+1)))?LyteColorbox._content.insertBefore(e,t.parentElement):LyteColorbox._content.append(e);else if(LyteColorbox._prevItem){var t;e=LyteColorbox.createElement("div",null,"lyteCBoxItem"),LyteColorbox._component.setData("currentEle",e),(t=LyteColorbox._content.querySelector("."+LyteColorbox._boxEle+"__"+(LyteColorbox._index+1)))?LyteColorbox._content.insertBefore(e,t.parentElement):LyteColorbox._content.append(e)}else e=LyteColorbox.createElement("div",null,"lyteCBoxItem"),LyteColorbox._content.append(e),LyteColorbox._component.setData("currentEle",e);return LyteColorbox.createLoadingIcon(e),e},createLoadingIcon:function(e){var t;LyteColorbox._loadingIcon?t=LyteColorbox._loadingIcon.cloneNode():(t=document.createElement("div")).innerHTML=unescape("%3Csvg%20class%3D%22lyteColorboxLoadingCircle%22%20width%3D%2230%22%20height%3D%2230%22%20viewBox%3D%220%200%2030%2030%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20data-svg%3D%22spinner%22%3E%3Ccircle%20fill%3D%22none%22%20stroke%3D%22%23000%22%20cx%3D%2215%22%20cy%3D%2215%22%20r%3D%2214%22%3E%3C/circle%3E%3C/svg%3E"),t.classList.add("lyteColorboxLoadingImg"),e.appendChild(t)},appendElement:function(e){LyteColorbox._component.getData("ltPropType");if("slide"==LyteColorbox._component.getData("ltPropAnimation")){var t;if(LyteColorbox._zIndex++,LyteColorbox._nextItem)(t=LyteColorbox.createElement("div",null,"lyteCBoxItem")).classList.add("lytCBoxNextItem"),t.append(e),LyteColorbox._component.setData("currentEle",t),(o=LyteColorbox._content.querySelector("."+LyteColorbox._boxEle+"__"+(LyteColorbox._index+1)))?LyteColorbox._content.insertBefore(t,o.parentElement):LyteColorbox._content.append(t);else if(LyteColorbox._prevItem){(t=LyteColorbox.createElement("div",null,"lyteCBoxItem")).classList.add("lytCBoxPreviousItem"),t.append(e),LyteColorbox._component.setData("currentEle",t),(o=LyteColorbox._content.querySelector("."+LyteColorbox._boxEle+"__"+(LyteColorbox._index+1)))?LyteColorbox._content.insertBefore(t,o.parentElement):LyteColorbox._content.append(t)}else(t=LyteColorbox.createElement("div",null,"lyteCBoxItem")).append(e),t.style.zIndex=LyteColorbox._zIndex,LyteColorbox._content.append(t),LyteColorbox._component.setData("currentEle",t);e.classList.add("lyteCBoxVisible")}else{var o;if(LyteColorbox._related.length>1)(o=LyteColorbox._content.querySelector("."+LyteColorbox._boxEle+"__"+(LyteColorbox._index+1)))?LyteColorbox._content.insertBefore(e,o):LyteColorbox._content.append(e);else LyteColorbox._content.append(e);e.classList.add("lyteCBoxVisible"),LyteColorbox.checkHW(),LyteColorbox._component.setData("currentEle",null)}},isZoomed:function(e){return e&&!e._isDefault},isCurrentDisplayedImage:function(e){return e===LyteColorbox._domEle},isZoomedAndCurrentDisplayedImage:function(e){return!e._isDefault&&LyteColorbox._domEle===e},transitionEnd:function(e){var t;e.target===this&&"transform"===e.propertyName&&(t=this.querySelector("img"),LyteColorbox.isZoomed(t)&&!LyteColorbox.isCurrentDisplayedImage(t)&&LyteColorbox.reset(t),this.removeEventListener("transitionend",LyteColorbox.transitionEnd))},doesImageExceedContentBoxAfterMovingRight:function(e,t){return e.left<t.left},moveElementOutOfViewTowardsRight:function(e,t){var o,i=e,r=e.querySelector("img"),l=i.getBoundingClientRect(),a=l.width,s=100;r&&(o=r.getBoundingClientRect(),LyteColorbox.doesImageExceedContentBoxAfterMovingRight(o,l)&&(s+=(l.left-o.left)/a*100)),e.style.transition="transform 0.3s ease",e.style.transform="translate3d("+s+"%,0,0)",e.classList.remove(t)},doesImageExceedContentBoxAfterMovingLeft:function(e,t){return e.right>t.right},moveElementOutOfViewTowardsLeft:function(e,t){var o,i=e,r=e.querySelector("img"),l=i.getBoundingClientRect(),a=l.width,s=100;r&&(o=r.getBoundingClientRect(),LyteColorbox.doesImageExceedContentBoxAfterMovingLeft(o,l)&&(s+=(o.right-l.right)/a*100)),e.style.transition="transform 0.3s ease",e.style.transform="translate3d(-"+s+"%,0,0)",e.classList.remove(t)},slide:function(){var e,t=LyteColorbox._component,o=t.getData("currentEle"),i=o,r="lyteCBoxCurrentItem";if("custom"===t.getData("ltPropType")){if(o){if(LyteColorbox.checkHW(),LyteColorbox._nextItem)for(var l=Array.from(o.parentElement.querySelectorAll(".lyteCBoxCurrentItem")),a=0;a<l.length;a++)l[a].classList.add("lytCBoxPreviousItem");if(LyteColorbox._prevItem)for(l=Array.from(o.parentElement.querySelectorAll(".lyteCBoxCurrentItem")),a=0;a<l.length;a++)l[a].classList.add("lytCBoxNextItem");o.style.zIndex=LyteColorbox._zIndex,o.classList.add("lyteCBoxCurrentItem"),(LyteColorbox._nextItem||LyteColorbox._prevItem)&&(LyteColorbox._timeoutId&&(clearTimeout(LyteColorbox._timeoutId),LyteColorbox._timeoutId=!1),LyteColorbox._timeoutId=setTimeout((function(){o.classList.remove("lytCBoxPreviousItem","lytCBoxNextItem");for(var e=Array.from(o.parentElement.querySelectorAll(".lyteCBoxCurrentItem")).filter((function(e){return!e.isEqualNode(o)})),t=0;t<e.length;t++)e[t].classList.remove("lytCBoxNextItem","lytCBoxPreviousItem","lyteCBoxCurrentItem"),e[t].classList.add("lyteCBoxDN");LyteColorbox._timeoutId=!1}),300),LyteColorbox._nextItem=!1,LyteColorbox._prevItem=!1)}}else if(i&&i){LyteColorbox._nextItem&&((e=i.parentElement.querySelector(".lyteCBoxCurrentItem"))||(e=i.parentElement.querySelector(".lyteCBoxMoveRight"),r="lyteCBoxMoveRight"),LyteColorbox.moveElementOutOfViewTowardsLeft(e,r),i.style.removeProperty("transition"),i.classList.add("lyteCBoxMoveRight"),i.style.removeProperty("transform")),LyteColorbox._prevItem&&((e=i.parentElement.querySelector(".lyteCBoxCurrentItem"))||(e=i.parentElement.querySelector(".lyteCBoxMoveLeft"),r="lyteCBoxMoveLeft"),LyteColorbox.moveElementOutOfViewTowardsRight(e,r),i.style.removeProperty("transition"),i.classList.add("lyteCBoxMoveLeft"),i.style.removeProperty("transform")),e&&e.addEventListener("transitionend",LyteColorbox.transitionEnd);var s=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=window.cancelAnimationFrame||window.mozCancelAnimationFrame;LyteColorbox._reqAF1&&n(LyteColorbox._reqAF1),LyteColorbox._reqAF2&&n(LyteColorbox._reqAF2),LyteColorbox._reqAF1=s((function(){LyteColorbox._reqAF1=!1,LyteColorbox._reqAF2=s((function(){LyteColorbox._reqAF2=!1,i.classList.remove("lyteCBoxMoveLeft","lyteCBoxMoveRight","lytCBoxPreviousItem","lytCBoxNextItem"),i.classList.add("lyteCBoxCurrentItem")}))})),LyteColorbox._nextItem=!1,LyteColorbox._prevItem=!1}},next:function(e,t){var o,i=LyteColorbox._component,r=i.getData("ltPropLoop"),l=LyteColorbox._index+1,a=(LyteColorbox._related||[]).length;!r&&l>=a||(i.getMethods("onBeforeNavigate")&&(o=i.executeMethod("onBeforeNavigate",e,i.$node,LyteColorbox._index,1)),o?o.then((function(){LyteColorbox.moveToNext(e,t)})):LyteColorbox.moveToNext(e,t))},moveToNext:function(e,t){var o=LyteColorbox._component.getData("ltPropType");!LyteColorbox._active&&LyteColorbox._related[1]&&(LyteColorbox._component.getData("ltPropLoop")||LyteColorbox._related[LyteColorbox._index+1])&&("slide"!=LyteColorbox._component.getData("ltPropAnimation")?LyteColorbox.hideElement():LyteColorbox._nextItem=!0,LyteColorbox.toggleLoadingIcon(),"custom"===o&&LyteColorbox.reset(),LyteColorbox._index=LyteColorbox.getIndex(1),LyteColorbox._domEle=null,LyteColorbox.load(LyteColorbox._el=LyteColorbox._related[LyteColorbox._index]),!t&&LyteColorbox._component.getMethods("onNavigate")&&LyteColorbox._component.executeMethod("onNavigate",e,LyteColorbox._component.$node,LyteColorbox._index+1,1))},prev:function(e,t){var o,i=LyteColorbox._component,r=LyteColorbox._index;(i.getData("ltPropLoop")||0!==r)&&(i.getMethods("onBeforeNavigate")&&(o=i.executeMethod("onBeforeNavigate",e,i.$node,LyteColorbox._index,-1)),o?o.then((function(){LyteColorbox.moveToPrevious(e,t)})):LyteColorbox.moveToPrevious(e,t))},moveToPrevious:function(e,t){var o=LyteColorbox._component.getData("ltPropType");!LyteColorbox._active&&LyteColorbox._related[1]&&(LyteColorbox._component.getData("ltPropLoop")||LyteColorbox._index)&&("slide"!=LyteColorbox._component.getData("ltPropAnimation")?LyteColorbox.hideElement():LyteColorbox._prevItem=!0,LyteColorbox.toggleLoadingIcon(),"custom"===o&&LyteColorbox.reset(),LyteColorbox._index=LyteColorbox.getIndex(-1),LyteColorbox._domEle=null,LyteColorbox.load(LyteColorbox._el=LyteColorbox._related[LyteColorbox._index]),!t&&LyteColorbox._component.getMethods("onNavigate")&&LyteColorbox._component.executeMethod("onNavigate",e,LyteColorbox._component.$node,LyteColorbox._index+1,-1))},close:function(){if(this._component.ltPropShow=!1,LyteColorbox._open&&!LyteColorbox._closing){if(LyteColorbox._component.setData("currentEle",null),document.body.classList.remove("lyteCBoxOH"),LyteColorbox._content.classList.remove("lyteCBoxOH"),LyteColorbox._component.getData("ltPropThumbnail")){var e=LyteColorbox._thumbDiv.querySelector(".lyteColorboxThumbnails"),t=LyteColorbox._thumbDiv.querySelector(".lyteColorboxThumbInnerWrapper");e.style.width="",e.classList.add("lyteColorboxHideVisibility"),t.style.transform="",t.style.width=""}LyteColorbox._zoomIn&&(LyteColorbox._zoomIn.classList.remove("lyteColorboxDisabled"),LyteColorbox._zoomOut.setAttribute("aria-disabled",!1)),LyteColorbox._zoomOut&&"image"!=LyteColorbox._component.getData("ltPropType")&&(LyteColorbox._zoomOut.classList.add("lyteColorboxDisabled"),LyteColorbox._zoomOut.setAttribute("aria-disabled",!0)),LyteColorbox._reset&&(LyteColorbox._reset.classList.add("lyteColorboxDisabled"),LyteColorbox._zoomOut.setAttribute("aria-disabled",!0)),LyteColorbox._clickNumber=0,LyteColorbox._zoomedThroughUtil=!1,LyteColorbox._closing=!0,LyteColorbox._open=!1,LyteColorbox._box.classList.remove("lyteColorboxDisplay"),LyteColorbox._domEle=null,LyteColorbox._related=[],LyteColorbox._closing=!1,LyteColorbox._el=null,LyteColorbox._diff=0,LyteColorbox.removeElements(),LyteColorbox.toggleLoadingIcon(),LyteColorbox._loadingIcon=null,LyteColorbox._component.callOnClose()}},hideCropper:function(){LyteColorbox._crop.classList.add("lyteColorboxHideBtn"),LyteColorbox._download&&LyteColorbox._download.classList.add("lyteColorboxHideBtn"),LyteColorbox._title&&LyteColorbox._title.classList.add("lyteColorboxHideBtn"),LyteColorbox._zoomIn&&LyteColorbox._zoomIn.classList.add("lyteColorboxHideBtn"),LyteColorbox._zoomOut&&LyteColorbox._zoomOut.classList.add("lyteColorboxHideBtn"),LyteColorbox._reset&&LyteColorbox._reset.classList.add("lyteColorboxHideBtn"),LyteColorbox._prev&&LyteColorbox._prev.classList.add("lyteColorboxHideBtn"),LyteColorbox._next&&LyteColorbox._next.classList.add("lyteColorboxHideBtn")},crop:function(){if(LyteColorbox._component.getMethods("onCropOpen")&&LyteColorbox._component.executeMethod("onCropOpen",LyteColorbox._component),"slide"==LyteColorbox._component.getData("ltPropAnimation"))var e=$L(".lyteCBoxCurrentItem",LyteColorbox._component.childComp)[0]?$L(".lyteCBoxCurrentItem",LyteColorbox._component.childComp)[0]:LyteColorbox._content;else e=$L(".lyteCBoxCurrentElem",LyteColorbox._component.childComp)[0]?$L(".lyteCBoxCurrentElem",LyteColorbox._component.childComp)[0]:LyteColorbox._content;var t=$L(".lyteCBoxVisible",e);if(LyteColorbox._component.getData("ltPropYield")){this.hideCropper();var o=$L(".lyteColorboxCropDisable",LyteColorbox._component.childComp);o.removeClass("lyteColorboxCropDisable"),o.addClass("lyteColorboxCropEnable")}var i=t[0].offsetWidth,r=t[0].offsetHeight;t[0].offsetWidth<t[0].offsetHeight&&(i=r),e.style.top=(LyteColorbox._content.offsetHeight-r)/2+"px",e.style.left=(LyteColorbox._content.offsetWidth-i)/2+"px",e.style.width=i+"px",e.style.height=r+"px",LyteColorbox._thumbDiv&&(LyteColorbox._thumbDiv.style.display="none"),t[0]._imgDimension={width:t[0].offsetWidth,height:t[0].offsetHeight},t.cropper({aspectRatio:"n:n",cropDrag:function(){var t=$L(".lyteCropDivImage",e)[0];LyteColorbox._component.getMethods("onCrop")&&LyteColorbox._component.executeMethod("onCrop",t.offsetWidth,t.offsetHeight)}}),this.addCropEvent(e),$L(".lyteCropArea",this.childComp)[0].style.position="absolute"},addCropEvent:function(e){LyteColorbox._component.childComp.querySelectorAll(".lyteColorboxCrop").forEach((function(t){t.addEventListener("click",(function(t){var o=t.target.classList.contains("lyteColorboxCrop")?t.target:t.target.closest(".lyteColorboxCrop"),i=o.dataset.ratio,r=$L(".lyteCBoxVisible",e).data("cropper"),l=$L(".lyteCBoxSelectedRatio",e);if(l&&l.removeClass("lyteCBoxSelectedRatio"),$L(o).addClass("lyteCBoxSelectedRatio"),i){$L(".lyteCBoxVisible",e).cropper({aspectRatio:i,cropDrag:function(){var t=$L(".lyteCropDivImage",e)[0];LyteColorbox._component.getMethods("onCrop")&&LyteColorbox._component.executeMethod("onCrop",t.offsetWidth,t.offsetHeight)}});var a=$L(".lyteCropDivImage",e)[0];LyteColorbox._component.getMethods("onRatioSet")&&LyteColorbox._component.executeMethod("onRatioSet",a.offsetWidth,a.offsetHeight)}else{if(o.dataset.rotate){r.rotate();a=$L(".lyteCropDivImage",e)[0];LyteColorbox._component.getMethods("onRotate")&&LyteColorbox._component.executeMethod("onRotate",a.offsetWidth,a.offsetHeight)}}$L(".lyteCropArea",e)[0].style.position="absolute"}))}))},download:function(){var e=!0;if(LyteColorbox._component.getMethods("onDownload")&&(e=void 0===(e=LyteColorbox._component.executeMethod("onDownload",LyteColorbox._domEle,LyteColorbox._el,LyteColorbox._component.$node))||e),e){var t=document.createElement("a");LyteColorbox._el.lytecboxDlink?t.setAttribute("href",LyteColorbox._el.lytecboxDlink):"photo"==LyteColorbox._el.type&&t.setAttribute("href",LyteColorbox._el.lytecboxHref),t.setAttribute("download",LyteColorbox.createName(LyteColorbox._el.lytecboxTitle)),document.body.append(t),t.click(),t.remove()}},isIE:function(){var e=window.navigator.userAgent;if(e.indexOf("MSIE ")>0)return!0;if(e.indexOf("Trident/")>0){e.indexOf("rv:");return!0}return!1},zoomTo:function(e,t,o){t=t||{};var i=LyteColorbox._component,r=o.getAttribute("lytecbox-rotate"),l=o.offsetWidth,a=o.offsetHeight,s=o.getBoundingClientRect(),n=LyteColorbox._content.getBoundingClientRect(),p=t.left||("center"==i.getData("ltPropZoomPosition")?n.left+.5*n.width:s.left+.5*s.width),d=t.top||("center"==i.getData("ltPropZoomPosition")?n.top+.5*n.height:s.top+.5*s.height),c=o.style.transform,y=o.style.transformOrigin,u=c.match(/scale\((.+)\)/)||[null,1,0,0],m=y.match(/(.+)% (.+)%/)||[null,50,50],h=parseFloat(u[1]),x=parseFloat(o.style.left||0),g=parseFloat(o.style.top||0),f=parseFloat(m[1]),b=parseFloat(m[2]),C=(p-s.left)/s.width*100,L=(d-s.top)/s.height*100,v=.01*(C-f)*l*(h-1),P=.01*(L-b)*a*(h-1);o.style.transformOrigin=C+"% "+L+"%",o.style.transform="scale("+e+")"+(null==r?"":" "+r),o.style.left=v+x+"px",o.style.top=P+g+"px"},getMatrixValue:function(e){return window.WebKitCSSMatrix?new WebKitCSSMatrix(window.getComputedStyle(e).transform):window.MSCSSMatrix?new MSCSSMatrix(window.getComputedStyle(e).transform):void 0},wheel:function(e){e.preventDefault();var t=e.deltaMode&&1==e.deltaMode,o=e.deltaY*(t?6:1),i=e.deltaX*(t?6:1);if(!(Math.abs(o)<Math.abs(i))){Math.abs(o)>50&&(o=o>0?50:-50);var r=LyteColorbox._domEle,l=LyteColorbox._component.data.ltPropMinScale,a=LyteColorbox._component.data.ltPropMaxScale,s=(LyteColorbox.getMatrixValue(r),LyteColorbox.getCurrentZoom(r)),n=Math.min(Math.max(s+o/1e3,l),a);r.classList.contains("preventAnimation")||r.classList.add("preventAnimation"),clearTimeout(r._timeout),r._timeout=setTimeout((function(){r.classList.remove("preventAnimation")}),500),this.zoomTo(n,{left:e.clientX,top:e.clientY},r),LyteColorbox._zoom=!0,LyteColorbox._zoomOut&&(LyteColorbox._zoomOut.classList.remove("lyteColorboxDisabled"),LyteColorbox._zoomOut.setAttribute("aria-disabled",!1)),LyteColorbox._reset&&(LyteColorbox._reset.classList.remove("lyteColorboxDisabled"),LyteColorbox._reset.setAttribute("aria-disabled",!1))}},getCurrentZoom:function(e){var t=(/scale\(([\d.]*)\)/.exec(e.style.transform)||[])[1]||"1";return parseFloat(t)},checkAndChangeStatus:function(e){var t=LyteColorbox.getCurrentZoom(e);e._isDefault=1===t},zoomIn:function(){LyteColorbox._clickNumber+=1,LyteColorbox._clickNumber<=LyteColorbox._component.getData("ltPropZoomClickNumber")?(LyteColorbox.resetLeftAndTopHelpers(),"imageCenter"==LyteColorbox._component.data.ltPropZoomPosition&&(LyteColorbox._domEle.style.left="0px",LyteColorbox._domEle.style.top="0px",LyteColorbox._domEle.style.transformOrigin=""),$L.fastdom.measure(function(){var e=parseFloat(LyteColorbox._component.getData("ltPropZoomBy"))/100,t=LyteColorbox.getCurrentZoom(LyteColorbox._domEle);LyteColorbox._domEle.getBoundingClientRect();this.zoomTo(t+e,{},LyteColorbox._domEle),LyteColorbox.checkAndChangeStatus(LyteColorbox._domEle),(1==LyteColorbox._clickNumber||LyteColorbox._zoomOut&&LyteColorbox._zoomOut.classList.contains("lyteColorboxDisabled")||LyteColorbox._reset&&LyteColorbox._reset.classList.contains("lyteColorboxDisabled"))&&(LyteColorbox._zoomOut&&LyteColorbox._zoomOut.classList.remove("lyteColorboxDisabled")&&LyteColorbox._zoomOut.setAttribute("aria-disabled",!1),LyteColorbox._reset&&LyteColorbox._reset.classList.remove("lyteColorboxDisabled")&&LyteColorbox._reset.setAttribute("aria-disabled",!1)),LyteColorbox._clickNumber==LyteColorbox._component.getData("ltPropZoomClickNumber")&&LyteColorbox._zoomIn&&LyteColorbox._zoomIn.classList.add("lyteColorboxDisabled")&&LyteColorbox._zoomIn.setAttribute("aria-disabled",!0),LyteColorbox.setPercentage(void 0,t+e),LyteColorbox._component.getMethods("onZoomin")&&LyteColorbox._component.executeMethod("onZoomin",Math.round(100*(t+e))-100,LyteColorbox._component.$node)}.bind(this))):LyteColorbox._clickNumber-=1},zoomOut:function(){if(LyteColorbox.resetLeftAndTopHelpers(),LyteColorbox._zoom){var e=LyteColorbox._domEle.getAttribute("lytecbox-rotate");LyteColorbox._zoom=!1,LyteColorbox._domEle.style.transform=e||"",LyteColorbox._domEle.style.top="0px",LyteColorbox._domEle.style.left="0px",LyteColorbox._domEle.style.transformOrigin="",LyteColorbox.checkAndChangeStatus(LyteColorbox._domEle),LyteColorbox._clickNumber=0,LyteColorbox._zoomedThroughUtil=!1,LyteColorbox._zoomOut&&LyteColorbox._zoomOut.classList.add("lyteColorboxDisabled")&&LyteColorbox._zoomOut.setAttribute("aria-disabled",!0),LyteColorbox._reset&&LyteColorbox._reset.classList.add("lyteColorboxDisabled")&&LyteColorbox._reset.setAttribute("aria-disabled",!0),LyteColorbox._zoomIn&&LyteColorbox._zoomIn.classList.contains("lyteColorboxDisabled")&&LyteColorbox._zoomIn.classList.remove("lyteColorboxDisabled")&&LyteColorbox._zoomIn.setAttribute("aria-disabled",!1),LyteColorbox.setPercentage(void 0,1),LyteColorbox._component.getMethods("onZoomout")&&LyteColorbox._component.executeMethod("onZoomout",0,LyteColorbox._component.$node)}else LyteColorbox._clickNumber-=1,LyteColorbox._clickNumber>=0&&LyteColorbox._clickNumber<LyteColorbox._component.getData("ltPropZoomClickNumber")?(LyteColorbox._domEle._left=void 0,LyteColorbox._domEle._top=void 0,"imageCenter"==LyteColorbox._component.data.ltPropZoomPosition&&(LyteColorbox._domEle.style.left="0px",LyteColorbox._domEle.style.top="0px",LyteColorbox._domEle.style.transformOrigin=""),$L.fastdom.measure(function(){var e=parseFloat(LyteColorbox._component.getData("ltPropZoomBy"))/100,t=LyteColorbox.getCurrentZoom(LyteColorbox._domEle);this.zoomTo(t-e,{},LyteColorbox._domEle),LyteColorbox.checkAndChangeStatus(LyteColorbox._domEle),0==LyteColorbox._clickNumber&&(LyteColorbox._zoomOut&&LyteColorbox._zoomOut.classList.add("lyteColorboxDisabled")&&LyteColorbox._zoomOut.setAttribute("aria-disabled",!0),LyteColorbox._reset&&LyteColorbox._reset.classList.add("lyteColorboxDisabled")&&LyteColorbox._reset.setAttribute("aria-disabled",!0)),LyteColorbox._clickNumber==LyteColorbox._component.getData("ltPropZoomClickNumber")-1&&LyteColorbox._zoomIn&&LyteColorbox._zoomIn.classList.remove("lyteColorboxDisabled")&&LyteColorbox._zoomIn.setAttribute("aria-disabled",!1),LyteColorbox.setPercentage(void 0,t-e),LyteColorbox._component.getMethods("onZoomout")&&LyteColorbox._component.executeMethod("onZoomout",Math.round(100*(t-e))-100,LyteColorbox._component.$node)}.bind(this))):LyteColorbox._clickNumber+=1},disableTransition:function(e){e.classList.add("lyteColorBoxDisableTransition")},enableTransition:function(e){e.classList.remove("lyteColorBoxDisableTransition")},reset:function(e,t){var o=(e=e||LyteColorbox._domEle).getAttribute("lytecbox-rotate");if(e.classList.contains(LyteColorbox._prefix+"Photo")&&(LyteColorbox._clickNumber>0||LyteColorbox._zoomedThroughUtil)){LyteColorbox.resetLeftAndTopHelpers(),LyteColorbox._zoom=!1,LyteColorbox._clickNumber=0,LyteColorbox._zoomedThroughUtil=!1;var i=e.offsetWidth/e.naturalWidth*100;t||(e.classList.remove("lyteCBoxAnimateOnUp"),LyteColorbox.disableTransition(e)),e.style.transform=o||"",e.style.top="0px",e.style.left="0px",e.style.transformOrigin="",LyteColorbox.setPercentage(i%1!=0?i.toFixed(2):i),LyteColorbox.checkAndChangeStatus(e),LyteColorbox._zoomIn&&(LyteColorbox._zoomIn.classList.remove("lyteColorboxDisabled"),LyteColorbox._zoomIn.setAttribute("aria-disabled",!1)),LyteColorbox._zoomOut&&(LyteColorbox._zoomOut.classList.add("lyteColorboxDisabled"),LyteColorbox._zoomOut.setAttribute("aria-disabled",!0)),LyteColorbox._reset&&(LyteColorbox._reset.classList.add("lyteColorboxDisabled"),LyteColorbox._reset.setAttribute("aria-disabled",!0)),t&&LyteColorbox._component.getMethods("onReset")&&LyteColorbox._component.executeMethod("onReset",LyteColorbox._component.$node)}},resetLeftAndTopHelpers:function(){LyteColorbox._domEle._left=void 0,LyteColorbox._domEle._top=void 0,LyteColorbox._domEle.classList.remove("lyteCBoxAnimateOnUp")},zoomByUtilFn:function(e){if(LyteColorbox._domEle&&LyteColorbox._domEle.classList.contains("lyteCBoxPhoto")&&(e>=0||"fitWidth"===e||"actual"===e||"reset"===e)){var t,o;if(LyteColorbox.resetLeftAndTopHelpers(),"fitWidth"===e){!0;var i=parseFloat(getComputedStyle(LyteColorbox._content).width),r=LyteColorbox._domEle.getAttribute("lytecbox-rotate");t=i/(r&&-1!=r.indexOf("90")?LyteColorbox._domEle.offsetHeight:LyteColorbox._domEle.offsetWidth),LyteColorbox._zoomedThroughUtil=!0;e=i/(r&&-1!=r.indexOf("90")?LyteColorbox._domEle.naturalHeight:LyteColorbox._domEle.naturalWidth)*100;LyteColorbox.setPercentage(e%1!=0?e.toFixed(2):e)}else if("reset"===e){t=1;e=LyteColorbox._domEle.offsetWidth/LyteColorbox._domEle.naturalWidth*100;LyteColorbox.setPercentage(e%1!=0?e.toFixed(2):e)}else{var l=LyteColorbox._domEle,a=l.naturalWidth,s=l.offsetWidth;t=(1+(a*e/100-s)/s).toFixed(2),LyteColorbox._zoomedThroughUtil=!0,LyteColorbox.setPercentage(e)}"imageCenter"==LyteColorbox._component.data.ltPropZoomPosition&&(LyteColorbox._domEle.style.left="0px",LyteColorbox._domEle.style.top="0px",LyteColorbox._domEle.style.transformOrigin=""),$L.fastdom.measure(function(){o=LyteColorbox.getCurrentZoom(LyteColorbox._domEle),this.zoomTo(t,{},LyteColorbox._domEle),LyteColorbox.checkAndChangeStatus(LyteColorbox._domEle),1==t?(LyteColorbox._zoom=!1,LyteColorbox._zoomOut&&LyteColorbox._zoomOut.classList.add("lyteColorboxDisabled")&&LyteColorbox._zoomOut.setAttribute("aria-disabled",!0),LyteColorbox._reset&&LyteColorbox._reset.classList.add("lyteColorboxDisabled")&&LyteColorbox._reset.setAttribute("aria-disabled",!0)):(LyteColorbox._zoom=!0,LyteColorbox._zoomOut&&LyteColorbox._zoomOut.classList.remove("lyteColorboxDisabled")&&LyteColorbox._zoomOut.setAttribute("aria-disabled",!1),LyteColorbox._reset&&LyteColorbox._reset.classList.remove("lyteColorboxDisabled")&&LyteColorbox._reset.setAttribute("aria-disabled",!1),LyteColorbox._domEle.classList.add("onZoom")),t>=o?LyteColorbox._component.getMethods("onZoomin")&&LyteColorbox._component.executeMethod("onZoomin",e,LyteColorbox._component.$node):(LyteColorbox._component.triggerCheck(),LyteColorbox._component.getMethods("onZoomout")&&LyteColorbox._component.executeMethod("onZoomout",e,LyteColorbox._component.$node))}.bind(this))}},checkForLeftAndTopAfterZoomOut:function(){var e=LyteColorbox._domEle,t=LyteColorbox._domEle.getBoundingClientRect(),o=LyteColorbox._content.getBoundingClientRect(),i=e.style.transformOrigin.match(/(.+)% (.+)%/)||[null,50,50],r=parseFloat(i[1]),l=parseFloat(i[2]),a=0;if(e.classList.add("lyteCBoxAnimateOnUp"),t.width<o.width)e.style.left="0px",r=50;else{var s=Math.round(t.left),n=Math.round(t.right);s>o.left&&(a=s-o.left,e.style.left=parseFloat(e.style.left||0)-a+"px"),n<o.right&&(a=o.right-n,e.style.left=parseFloat(e.style.left||0)+a+"px")}if(t.height<o.height)e.style.top="0px",l=50;else{var p=Math.round(t.top),d=Math.round(t.bottom);p>o.top&&(a=p-o.top,e.style.top=parseFloat(e.style.top||0)-a+"px"),d<o.bottom&&(a=o.bottom-d,e.style.top=parseFloat(e.style.top||0)+a+"px")}e.style.transformOrigin=r+"% "+l+"%",e.removeEventListener("transitionend",LyteColorbox.checkForLeftAndTopAfterZoomOut)},convertToPx:function(e,t){var o,i="";return(o=/(\d*)%/i.exec(e))?i=parseInt(o[1])/100*parseInt(t)+"px":/(\d*)px/i.exec(e)?i=e:e&&(i=e+"px"),i},getProperOffsetsToCalculateImageDimensions:function(){var e=window.getComputedStyle(LyteColorbox._content),t=LyteColorbox._component,o=LyteColorbox.convertToPx(t.getData("ltPropWidth"),e.width)||.8*parseInt(e.width)+"px",i=LyteColorbox.convertToPx(t.getData("ltPropHeight"),e.height)||.8*parseInt(e.height)+"px";return{width:parseInt(o),height:parseInt(i)}},checkAspectRatio:function(){var e=LyteColorbox._domEle._offset;if(e){var t=LyteColorbox.getProperOffsetsToCalculateImageDimensions(),o=LyteColorbox._domEle.getAttribute("lytecbox-rotate");if(o&&-1!=o.indexOf("90")){var i=Object.assign({},t);t={height:i.width,width:i.height}}var r=e.width,l=e.height;e.width>e.height&&e.width>t.width?(l=LyteColorbox.getHeight(l,r,t),r=t.width,LyteColorbox._domEle.style.width=r+"px",LyteColorbox._domEle.style.height=l+"px",l>t.height&&(r=LyteColorbox.getWidth(l,r,t),l=t.height,LyteColorbox._domEle.style.height=l+"px",LyteColorbox._domEle.style.width=r+"px")):(l>t.height&&(r=LyteColorbox.getWidth(l,r,t),l=t.height,LyteColorbox._domEle.style.height=l+"px",LyteColorbox._domEle.style.width=r+"px"),r>t.width&&(LyteColorbox._domEle.style.width=t.width+"px",LyteColorbox._domEle.style.height=LyteColorbox.getHeight(l,r,t)+"px")),LyteColorbox.setPercentage()}},setElementWidthAndHeight:function(e,t){elementOffset.width>elementOffset.height&&elementOffset.width>t.width?(height=LyteColorbox.getHeight(height,width,t),width=t.width,e.style.width=width+"px",e.style.height=height+"px",height>t.height&&(width=elementh(height,width,t),height=t.height,e.style.height=height+"px",e.style.width=width+"px")):(height>t.height&&(width=LyteColorbox.getWidth(height,width,t),height=t.height,e.style.height=height+"px",e.style.width=width+"px"),width>t.width&&(e.style.width=t.width+"px",e.style.height=LyteColorbox.getHeight(height,width,t)+"px"))},getHeight:function(e,t,o){var i=o.width*(e/t);return Math.round(i)},getWidth:function(e,t,o){var i=o.height*(t/e);return Math.round(i)},open:function(e){(e-=1)!=LyteColorbox._index&&e>=0&&e<LyteColorbox._related.length&&("slide"!=LyteColorbox._component.getData("ltPropAnimation")?LyteColorbox.hideElement():e<LyteColorbox._index?LyteColorbox._prevItem=!0:LyteColorbox._nextItem=!0,LyteColorbox.toggleLoadingIcon(),LyteColorbox.reset(),LyteColorbox._index=e,LyteColorbox._domEle=null,LyteColorbox.load(LyteColorbox._el=LyteColorbox._related[LyteColorbox._index]))},replace:function(e,t){var o=LyteColorbox._related[e-1],i=!1;for(var r in t)r in o&&("lytecboxHref"==r&&(i=!0),Lyte.Component.set(o,r,t[r]));var l=LyteColorbox._boxEle+"__"+(e-1),a=LyteColorbox._content.querySelector("."+l);if(a&&i&&($L(a).attr({src:o.lytecboxHref}),"photo"==o.type&&(a.style.height="",a.style.width="",a.onload=function(){a._offset={height:a.naturalHeight,width:a.naturalWidth},a.classList.contains("lyteCBoxVisible")&&!a.parentElement.classList.contains("lyteCBoxDN")&&(LyteColorbox.checkAspectRatio(),LyteColorbox.checkHW())})),a&&a.classList.contains("lyteCBoxVisible")&&!a.parentElement.classList.contains("lyteCBoxDN")&&(LyteColorbox._title&&(LyteColorbox._title.textContent=o.lytecboxTitle),LyteColorbox._el=o),!a){var s=LyteColorbox;s._open&&e-1==s._index&&(s.reset(),s.load(o))}},removeElementObjectFromDom:function(e){var t=LyteColorbox._content.querySelector("."+LyteColorbox._boxEle+"__"+e);t&&("slide"==LyteColorbox._component.getData("ltPropAnimation")?t.parentElement.remove():t.remove())},updateSelectors:function(e){var t=Array.from(LyteColorbox._content.querySelectorAll(".lyteCBoxPhoto")),o=/(lyteCBoxElement\d*__\d*)/g,i=/[+-]?\d+(\.\d+)?/g;Lyte.arrayUtils(t,"push",Array.from(LyteColorbox._content.querySelectorAll(".lyteCBoxIframe"))),Lyte.arrayUtils(t,"push",Array.from(LyteColorbox._content.querySelectorAll(".lyteCBoxCustom")));for(var r=0;r<t.length;r++){var l=t[r].getAttribute("class"),a=l.match(o)[0],s=parseInt(a.match(i)[1]);s>e&&(s-=1,l=l.replace(a,LyteColorbox._boxEle+"__"+s),t[r].className=l)}},remove:function(e){var t=!1;LyteColorbox._index===e-1&&(t=!0,LyteColorbox._component.getData("ltPropLoop")||e!=LyteColorbox._related.length?LyteColorbox.next(null,!0):(LyteColorbox.prev(null,!0),t=!1),$L(LyteColorbox._domEle).off("load",LyteColorbox.imageComplete).off("error",LyteColorbox.imageFailure)),this.removeElementObjectFromDom(e-1),Lyte.arrayUtils(LyteColorbox._related,"removeAt",e-1,1),t&&0!=LyteColorbox._index&&(LyteColorbox._index-=1),this.updateSelectors(e-1),LyteColorbox._component.getData("ltPropThumbnail")&&(LyteColorbox._component.setData("triggerSetThumbnail",LyteColorbox._component.getData("triggerSetThumbnail")+1),this.updateThumbnailPos()),this.changeNavArrows()}};Lyte.Component.register("lyte-colorbox",{_template:'<template tag-name="lyte-colorbox"> <template is="if" value="{{expHandlers(ltPropType,\'===\',\'custom\')}}"><template case="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="colorBoxYield" lt-cb-content-type="{{ltPropContent.lytecboxType}}"></lyte-yield> </template><template case="false"> <div id="lyteColorbox" class="lyteColorbox lyteCBox"> <div class="lyteColorboxFreezeLayer lyteCBoxOverlay"></div> <div class="lyteColorboxCloseIcon lyteCBoxClose"></div> <template is="if" value="{{ltPropNavIcon}}"><template case="true"> <div class="lyteColorboxIconDiv lyteCBoxPrevious"> <div class="lyteColorboxPreviousIcon"></div> </div> <div class="lyteColorboxIconDiv lyteCBoxNext"> <div class="lyteColorboxNextIcon"></div> </div> </template></template> <div class="lyteColorboxWrapper"> <template is="if" value="{{expHandlers(isIframe,\'!\')}}"><template case="true"> <div class="lyteColorboxUtilDiv"> <span class="lyteCBoxZoomOut lyteColorboxZoomOut lyteColorboxDisabled" lt-prop-title="Zoom Out" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;,&quot;appearance&quot; : &quot;box&quot;,&quot;margin&quot; : 5}"></span> <span class="lyteCBoxReset lyteColorboxReset lyteColorboxDisabled" lt-prop-title="Reset Zoom" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;,&quot;appearance&quot; : &quot;box&quot;,&quot;margin&quot; : 5}"></span> <span class="lyteCBoxZoomIn lyteColorboxZoomIn" lt-prop-title="Zoom In" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;,&quot;appearance&quot; : &quot;box&quot;,&quot;margin&quot; : 5}"></span> </div> </template></template> <div class="lyteColorboxContent lyteCBoxContent"> <span class="lyteColorboxLoadingImg"></span> </div> <div class="lyteColorboxHeader"> <div class="lyteColorboxTitle lyteCBoxTitle"></div> <template is="if" value="{{download}}"><template case="true"> <div class="lyteColorboxDownloadDiv lyteCBoxDownload"> <span class="lyteColorboxDownloadImg"></span> </div> </template></template> </div> </div> <template is="if" value="{{ltPropThumbnail}}"><template case="true"> <div class="lyteColorboxThumbOuterWrapper"> <div class="lyteColorboxThumbnails" onclick="{{action(&quot;clickOnThumbnails&quot;,event)}}"> <div class="lyteColorboxThumbInnerWrapper"> <template is="for" items="{{thumbnails}}" item="item" index="index"> <div class="{{lyteUiAddShowClass(ltPropAddOrientation,\'lyteColorboxThumb\',\'addedOrientation\')}}" data-thumb-val="{{lyteUiSetIndexString(index,thumbnails.length)}}"> <template is="if" value="{{ifEquals(item.type,&quot;photo&quot;)}}"><template case="true"> <img src="{{item.lytecboxHref}}"> </template><template case="false"><template is="if" value="{{lyteUiIfEqualsAny(item.type,&quot;iframe&quot;,&quot;custom&quot;)}}"><template case="true"><template is="if" value="{{item.lytecboxThumbnail}}"><template case="true"> <img class="lyteCBoxFavImg" src="{{item.lytecboxThumbnail}}"> </template><template case="false"> <div class="lyteCBoxIframeWrap"> <div class="lyteCBoxIframeIcon"></div> <div class="lyteCBoxIframeLabel">{{item.format}}</div> </div> </template></template> </template></template></template></template> </div> </template> </div> </div> </div> </template></template> </div> </template></template> </template><template case="false"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="colorBoxYield"></lyte-yield> </template><template case="false"> <lyte-colorbox-container> <lyte-colorbox-header> <lyte-colorbox-title></lyte-colorbox-title> <template is="if" value="{{download}}"><template case="true"> <lyte-colorbox-download> <span class="lyteColorboxDownloadImg"></span> </lyte-colorbox-download> </template></template> <lyte-colorbox-close></lyte-colorbox-close> </lyte-colorbox-header> <lyte-colorbox-content> </lyte-colorbox-content> <template is="if" value="{{ltPropNavIcon}}"><template case="true"> <lyte-colorbox-previous> <div class="lyteColorboxPreviousIcon"></div> </lyte-colorbox-previous> <lyte-colorbox-next> <div class="lyteColorboxNextIcon"></div> </lyte-colorbox-next> </template></template> <lyte-colorbox-description> </lyte-colorbox-description> <div class="lyteColorboxUtilDiv"> <lyte-colorbox-zoomin lt-prop-title="Zoom In" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;,&quot;appearance&quot; : &quot;box&quot;,&quot;margin&quot; : 5}"></lyte-colorbox-zoomin> <lyte-colorbox-reset class="lyteColorboxDisabled" lt-prop-title="Reset Zoom" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;,&quot;appearance&quot; : &quot;box&quot;,&quot;margin&quot; : 5}"></lyte-colorbox-reset> <lyte-colorbox-zoomout lt-prop-title="Zoom Out" lt-prop-tooltip-config="{&quot;position&quot; : &quot;bottom&quot;,&quot;appearance&quot; : &quot;box&quot;,&quot;margin&quot; : 5}"></lyte-colorbox-zoomout> </div> <template is="if" value="{{ltPropThumbnail}}"><template case="true"> <lyte-colorbox-thumbnail> <div class="lyteColorboxThumbnails" onclick="{{action(&quot;clickOnThumbnails&quot;,event)}}"> <div class="lyteColorboxThumbInnerWrapper"> <template is="for" items="{{thumbnails}}" item="item" index="index"> <div class="{{lyteUiAddShowClass(ltPropAddOrientation,\'lyteColorboxThumb\',\'addedOrientation\')}}" data-thumb-val="{{lyteUiSetIndexString(index,thumbnails.length)}}"> <template is="if" value="{{ifEquals(item.type,&quot;photo&quot;)}}"><template case="true"> <img src="{{item.lytecboxHref}}"> </template><template case="false"><template is="if" value="{{lyteUiIfEqualsAny(item.type,&quot;iframe&quot;,&quot;custom&quot;)}}"><template case="true"><template is="if" value="{{item.lytecboxThumbnail}}"><template case="true"> <img class="lyteCBoxFavImg" src="{{item.lytecboxThumbnail}}"> </template><template case="false"> <div class="lyteCBoxIframeWrap"> <div class="lyteCBoxIframeIcon"></div> <div class="lyteCBoxIframeLabel">{{item.format}}</div> </div> </template></template> </template></template></template></template> </div> </template> </div> </div> </lyte-colorbox-thumbnail> </template></template> </lyte-colorbox-container> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,7,1]},{type:"if",position:[1,7,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,7,5,3]},{type:"if",position:[1,7,5,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1,5]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1,7]},{type:"componentDynamic",position:[1,9,1]},{type:"componentDynamic",position:[1,9,3]},{type:"componentDynamic",position:[1,9,5]},{type:"attr",position:[1,11]},{type:"if",position:[1,11],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,3,0]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropHeight","ltPropWidth","ltPropOverlayClose","ltPropYield","ltPropSelectors","ltPropLoop","ltPropArrowKey","ltPropZoomBy","ltPropEscKey","ltPropImgError","ltPropAnimation","ltPropThumbnail","ltPropThumbnailNumber","ltPropZoomClickNumber","ltPropType","ltPropMinScale","ltPropMaxScale","ltPropWheelZoom","ltPropZoomPosition","ltPropAddOrientation","ltPropWithCredentials","ltPropCrop","ltPropShow","ltPropContent","ltPropNavIcon","currentEle","thumbnails","triggerSetThumbnail","isIframe","download"],data:function(){return{ltPropHeight:Lyte.attr("string"),ltPropWidth:Lyte.attr("string"),ltPropOverlayClose:Lyte.attr("boolean",{default:!0}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropSelectors:Lyte.attr("array",{default:[]}),ltPropLoop:Lyte.attr("boolean",{default:!0}),ltPropArrowKey:Lyte.attr("boolean",{default:!0}),ltPropZoomBy:Lyte.attr("string",{default:"25%"}),ltPropEscKey:Lyte.attr("boolean",{default:!0}),ltPropImgError:Lyte.attr("string",{default:"This image failed to load."}),ltPropAnimation:Lyte.attr("string",{default:"default"}),ltPropThumbnail:Lyte.attr("boolean",{default:!0}),ltPropThumbnailNumber:Lyte.attr("number",{default:7}),ltPropZoomClickNumber:Lyte.attr("number",{default:5}),ltPropType:Lyte.attr("string",{default:"custom"}),ltPropMinScale:Lyte.attr("number",{default:.01}),ltPropMaxScale:Lyte.attr("number",{default:1/0}),ltPropWheelZoom:Lyte.attr("boolean",{default:!1}),ltPropZoomPosition:Lyte.attr("string",{default:"center"}),ltPropAddOrientation:Lyte.attr("boolean",{default:!1}),ltPropWithCredentials:Lyte.attr("boolean",{default:!1}),ltPropCrop:Lyte.attr("boolean",{default:!1}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropContent:Lyte.attr("object",{default:{}}),ltPropNavIcon:Lyte.attr("boolean",{default:!0}),currentEle:Lyte.attr("object"),thumbnails:Lyte.attr("array"),triggerSetThumbnail:Lyte.attr("number",{default:0}),isIframe:Lyte.attr("boolean",{default:!1}),download:Lyte.attr("boolean",{default:!0})}},trapFocus:function(){var e=LyteColorbox._content,t=LyteColorbox._title,o=$L(e).trapFocus,i=e.getAttribute("id");i||(i="lyteColorBox"+(new Date).getTime(),e.setAttribute("id",i),t&&t.setAttribute("id",i+"_title")),o&&(e.setAttribute("id",i),$L(LyteColorbox._box).trapFocus())},hideShowColorbox:function(){this.getData("ltPropShow")?this.$node.launch():this.$node.close()}.observes("ltPropShow"),CropperObserver:function(){this.getData("ltPropCrop")&&(LyteColorbox._crop=this.childComp.querySelector("lyte-colorbox-crop"),LyteColorbox._crop.addEventListener("click",(function(){LyteColorbox.crop()}),!0))}.observes("ltPropCrop"),setThumbnailSliderProp:function(){this.getData("ltPropThumbnail")&&LyteColorbox._thumbDiv&&$L.fastdom.measure(function(){var e=this.getData("ltPropThumbnailNumber"),t=LyteColorbox._thumbDiv.querySelectorAll(".lyteColorboxThumb"),o=LyteColorbox._thumbDiv.querySelector(".lyteColorboxThumbnails"),i=LyteColorbox._thumbDiv.querySelector(".lyteColorboxThumbInnerWrapper"),r=window.getComputedStyle(t[0]),l=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=parseInt(r.width)+(r.marginLeft?parseInt(r.marginLeft):0)+(r.marginRight?parseInt(r.marginRight):0);$L.fastdom.mutate(function(){"custom"===this.getData("ltPropType")?(o.style.width=(t.length<e?t.length*a:e*a)+"px",i.style.width=t.length*a+"px",o.classList.remove("lyteColorboxHideVisibility")):(t.length*a>l&&(o.style.width="100%"),i.style.width=t.length*a+"px",o.classList.remove("lyteColorboxHideVisibility"))}.bind(this))}.bind(this))}.observes("ltPropThumbnailNumber","triggerSetThumbnail"),init:function(){this.$node.launch=function(e){LyteColorbox.launch.call(this,e)}.bind(this),this.$node.push=function(e){LyteColorbox.add(e)},this.$node.open=function(e){LyteColorbox.open(e)},this.$node.zoomBy=function(e){LyteColorbox.zoomByUtilFn(e)},this.$node.replace=function(e,t){LyteColorbox.replace(e,t)},this.$node.close=function(){LyteColorbox.close()},this.$node.delete=function(e){LyteColorbox.remove(e)},this.getData("ltPropYield")&&this.setData("ltPropThumbnail",!1)},didConnect:function(){var e=this;if(this.$node.crop=function(t){e.removecropper(t)},"slide"==this.getData("ltPropAnimation"))var t=$L(".lyteCBoxCurrentItem",this.$node)[0];else t=$L(".lyteCBoxCurrentElem",this.$node)[0];t=t||$L(".lyteColorboxContent",this.$node)[0],this.$node.swapAspectRatio=function(){if($L(".lyteCBoxVisible",t).data("cropper").swapAspectRatio(),e.getMethods("onCrop")){var o=$L(".lyteCropDivImage",t)[0];e.executeMethod("onCrop",o.offsetWidth,o.offsetHeight)}},this.$node.cropperWidth=function(e){if("slide"==this.getData("ltPropAnimation"))var t=$L(".lyteCBoxCurrentItem",this.$node)[0];else t=$L(".lyteCBoxCurrentElem",this.$node)[0];t=t||$L(".lyteColorboxContent",this.$node)[0],$L(".lyteCBoxVisible",t).data("cropper").changeByWidth(e)},this.$node.cropperHeight=function(e){if("slide"==this.getData("ltPropAnimation"))var t=$L(".lyteCBoxCurrentItem",this.$node)[0];else t=$L(".lyteCBoxCurrentElem",this.$node)[0];t=t||$L(".lyteColorboxContent",this.$node)[0],$L(".lyteCBoxVisible",t).data("cropper").changeByHeight(e)}},observeHeightAndWidth:function(){LyteColorbox._open&&LyteColorbox._domEle.classList.contains("lyteCBoxPhoto")&&LyteColorbox.checkAspectRatio()}.observes("ltPropHeight","ltPropWidth"),toggleTumbnail:function(){var e=this.getData("ltPropType"),t=LyteColorbox._box,o="custom"===e?t.querySelector(".lyteColorboxThumbOuterWrapper"):t.querySelector("lyte-colorbox-thumbnail");this.getData("ltPropThumbnail")?LyteColorbox._thumbDiv=o:LyteColorbox._thumbDiv=null}.observes("ltPropThumbnail"),setAriaAttributes:function(){this._content&&this._content.setAttribute("tabindex",0),this._close&&(this._close.setAttribute("tabindex",0),this._close.setAttribute("role","button"),this._close.setAttribute("aria-label","close")),this._download&&(this._download.setAttribute("tabindex",0),this._download.setAttribute("role","download"),this._download.setAttribute("aria-label","download")),this._next&&(this._next.setAttribute("tabindex",0),this._next.setAttribute("role","button"),this._next.setAttribute("aria-label","next")),this._prev&&(this._prev.setAttribute("tabindex",0),this._prev.setAttribute("role","button"),this._prev.setAttribute("aria-label","previous")),this._reset&&(this._reset.setAttribute("tabindex",0),this._reset.setAttribute("role","button"),this._reset.setAttribute("aria-label","reset")),this._zoomOut&&(this._zoomOut.setAttribute("tabindex",0),this._zoomOut.setAttribute("role","button"),this._zoomOut.setAttribute("aria-label","zoom out")),this.zoomIn&&(this._zoomIn.setAttribute("tabindex",0),this._zoomIn.setAttribute("role","button"),this._zoomIn.setAttribute("aria-label","zoom in"))},intialFunc:function(){if("custom"===this.getData("ltPropType")){if(!this._box){this._init=!1;var e=this;if(this._content=e.$node.querySelector(".lyteCBoxContent"),this._crop=e.$node.querySelector(".lyteCBoxCrop"),this._overlay=e.$node.querySelector(".lyteCBoxOverlay"),this._title=e.$node.querySelector(".lyteCBoxTitle"),this._close=e.$node.querySelector(".lyteCBoxClose"),this._download=e.$node.querySelector(".lyteCBoxDownload"),this._next=e.$node.querySelector(".lyteCBoxNext"),this._prev=e.$node.querySelector(".lyteCBoxPrevious"),this._zoomIn=e.$node.querySelector(".lyteCBoxZoomIn"),this._zoomOut=e.$node.querySelector(".lyteCBoxZoomOut"),this._reset=e.$node.querySelector(".lyteCBoxReset"),this._box=!!e.$node.querySelector(".lyteCBox")&&e.$node.querySelector(".lyteCBox"),!e.getData("ltPropYield")&&e.getData("ltPropThumbnail")&&(this._thumbDiv=e.$node.querySelector(".lyteColorboxThumbOuterWrapper")),!this._box){this._box=LyteColorbox.createElement("div",null,"lyteCBox");for(var t=e.$node.querySelector("lyte-yield").children;t.length>0;)_lyteUiUtils.appendChild(this._box,t[0]);this._box.classList.add("lyteColorbox")}LyteColorbox._count=LyteColorbox._count+1,this._className="lyteCBoxWrapper__"+LyteColorbox._count,this._boxElement=LyteColorbox._boxElement+LyteColorbox._count,this._box.classList.add(this._className),this._box._callee=e.$node}document.body&&(this._box.parentElement&&"BODY"!=this._box.parentElement.tagName||!this._box.parentElement)&&(_lyteUiUtils.appendChild(document.body,this._box),this.childComp=this._box),LyteColorbox.setupForBindings(this),this.addBindings(),this.unbindEventsForSelectors();var o=this.getSelectorElements();o.length>0?(1===o.length&&this.setData("ltPropNavIcon",!1),this.addClickEvents(o,this._className)):console.warn("No selector(s) provided to colorbox.")}else this.setupColorBoxForImages();this.setAriaAttributes()}.observes("ltPropSelectors.[]").on("didConnect"),convertToArray:function(e){return Array.prototype.slice.call(e)},createOwnContainer:function(){var e;this._box=document.createElement("lyte-colorbox-container"),e=this.$node.querySelector("lyte-yield").children,this.convertToArray(e).forEach(function(e){_lyteUiUtils.appendChild(this._box,e)}.bind(this))},setupAlreadyComplete:function(){return this._box},setupElements:function(){var e=this;this._loadingIcon=e.$node.querySelector("lyte-colorbox-loading-icon"),this._content=e.$node.querySelector("lyte-colorbox-content"),this._crop=e.$node.querySelector("lyte-colorbox-content"),this._title=e.$node.querySelector("lyte-colorbox-title"),this._crop=e.$node.querySelector("lyte-colorbox-crop"),this._close=e.$node.querySelector("lyte-colorbox-close"),this._download=e.$node.querySelector("lyte-colorbox-download"),this._next=e.$node.querySelector("lyte-colorbox-next"),this._prev=e.$node.querySelector("lyte-colorbox-previous"),this._zoomIn=e.$node.querySelector("lyte-colorbox-zoomin"),this._zoomOut=e.$node.querySelector("lyte-colorbox-zoomout"),this._reset=e.$node.querySelector("lyte-colorbox-reset"),this._header=e.$node.querySelector("lyte-colorbox-header"),this._description=e.$node.querySelector("lyte-colorbox-description"),this._box=!!e.$node.querySelector("lyte-colorbox-container")&&e.$node.querySelector("lyte-colorbox-container"),!this.getData("ltPropYield")&&this.getData("ltPropThumbnail")&&(this._thumbDiv=e.$node.querySelector("lyte-colorbox-thumbnail")),!!this._box||this.createOwnContainer(),LyteColorbox._count=LyteColorbox._count+1,this._className="lyteCBoxWrapper__"+LyteColorbox._count,this._boxElement=LyteColorbox._boxElement+LyteColorbox._count,this._box.classList.add(this._className),this._box._callee=e.$node},stillNotAppendedToBody:function(){return document.body&&(this._box.parentElement&&"BODY"!=this._box.parentElement.tagName||!this._box.parentElement)},setupColorBoxForImages:function(){var e;this.setupAlreadyComplete()||(this._init=!1,this.setupElements()),this.stillNotAppendedToBody()&&(_lyteUiUtils.appendChild(document.body,this._box),this.childComp=this._box),LyteColorbox.setupForBindings(this),this.addBindings(),this.unbindEventsForSelectors(),(e=this.getSelectorElements()).length>0?(1===e.length&&this.setData("ltPropNavIcon",!1),this.addClickEvents(e,this._className)):console.warn("No selector(s) provided to colorbox.")},utilDivEvents:function(){this.getData("isIframe")?(LyteColorbox._zoomIn=this._zoomIn=null,LyteColorbox._zoomOut=this._zoomOut=null,LyteColorbox._reset=this._reset=null):(LyteColorbox._zoomIn=this._zoomIn=this.childComp.querySelector(".lyteCBoxZoomIn"),LyteColorbox._zoomOut=this._zoomOut=this.childComp.querySelector(".lyteCBoxZoomOut"),LyteColorbox._reset=this._reset=this.childComp.querySelector(".lyteCBoxReset"),LyteColorbox._zoomIn&&(LyteColorbox._zoomIn.addEventListener("click",(function(){LyteColorbox.zoomIn()}),!0),LyteColorbox._zoomIn.setAttribute("tabindex",0),LyteColorbox._zoomIn.setAttribute("aria-label","zoom in"),LyteColorbox._zoomIn.setAttribute("role","button")),LyteColorbox._zoomOut&&(LyteColorbox._zoomOut.addEventListener("click",function(){LyteColorbox.zoomOut(),this.triggerCheck()}.bind(this),!0),LyteColorbox._zoomOut.setAttribute("tabindex",0),LyteColorbox._zoomOut.setAttribute("aria-label","zoom out"),LyteColorbox._zoomOut.setAttribute("role","button")),LyteColorbox._reset&&(LyteColorbox._reset.addEventListener("click",(function(){LyteColorbox.reset(null,!0)}),!0),LyteColorbox._reset.setAttribute("aria-label","reset"),LyteColorbox._reset.setAttribute("tabindex",0),LyteColorbox._reset.setAttribute("role","button")))}.observes("isIframe"),disableCropper:function(){$L(".lyteColorboxHideBtn",LyteColorbox._component.childComp).removeClass("lyteColorboxHideBtn")},removecropper:function(e){if("slide"==LyteColorbox._component.getData("ltPropAnimation"))var t=$L(".lyteCBoxCurrentItem",LyteColorbox._component.childComp)[0];else t=$L(".lyteCBoxCurrentElem",LyteColorbox._component.childComp)[0];(t=t||LyteColorbox._content).style.width="100%",t.style.height="100%",t.style.left="unset",t.style.top="unset",LyteColorbox._thumbDiv&&(LyteColorbox._thumbDiv.style.display="flex"),this.disableCropper();var o=$L(".lyteColorboxCropEnable");if(o.removeClass("lyteColorboxCropEnable"),o.addClass("lyteColorboxCropDisable"),this.getMethods("onCropClose")&&this.executeMethod("onCropClose",LyteColorbox._component.$node),"cancel"==e)this.setData("ColorboxCropImg",!1),$L(".lyteCBoxVisible",t).cropper("destroy"),$L(".lyteCBoxVisible",t)[0].style.display="";else{var i=$L(".lyteCBoxVisible",t),r=i.data("cropper"),l=r.getCroppedImage();i.cropper("destroy"),i[0].style.display="none",LyteColorbox.toggleLoadingIcon();var a,s="image/"+LyteColorbox._related[LyteColorbox._index].lytecboxHref.split(".").pop();this.getMethods("onImageCropped")&&(a=this.executeMethod("onImageCropped",l)),0==a?(this.setData("ColorboxCropImg",!1),$L(".lyteCBoxVisible",t)[0].style.display="inline-block"):a&&a.then?a.then((function(e){"string"==typeof e?(i[0].style.display="block",i.attr({src:e,style:"width:"+r.cropperDimensions.width+"px;height:"+r.cropperDimensions.height+"px;"}),LyteColorbox._related[LyteColorbox._index].lytecboxHref=e):(i[0].style.display="block",LyteColorbox.toggleLoadingIcon(),i.attr({src:l.toDataURL(s),style:"width:"+r.cropperDimensions.width+"px;height:"+r.cropperDimensions.height+"px;"}),LyteColorbox._related[LyteColorbox._index].lytecboxHref=l.toDataURL(s))})):(i[0].style.display="block",LyteColorbox.toggleLoadingIcon(),i.attr({src:l.toDataURL(s),style:"width:"+r.cropperDimensions.width+"px;height:"+r.cropperDimensions.height+"px;"}),LyteColorbox._related[LyteColorbox._index].lytecboxHref=l.toDataURL(s)),$L.fastdom.mutate((function(){LyteColorbox._domEle._offset={height:parseInt(l.getAttribute("height")),width:parseInt(l.getAttribute("width"))}}))}this.getData("ltPropType"),LyteColorbox._el.lytecboxHref=l?l.toDataURL(s):LyteColorbox._el.lytecboxHref},downloadDivEvents:function(){this.getData("download")?(LyteColorbox._download=this._download=this.$node.querySelector(".lyteCBoxDownload"),LyteColorbox._download&&LyteColorbox._download.addEventListener("click",(function(){LyteColorbox.download()}),!0)):LyteColorbox._download=this._download=null}.observes("download"),callOnBeforeOpen:function(e,t){var o;return this.getMethods("onBeforeOpen")&&(o=this.executeMethod("onBeforeOpen",e,this,t)),o},callOnOpen:function(){this.getMethods("onOpen")&&this.executeMethod("onOpen",this)},callOnLoad:function(){this.getMethods("onLoad")&&this.executeMethod("onLoad",arguments[0],arguments[1],this,this.getData("ltPropAddOrientation")?arguments[2]:null)},callOnComplete:function(){this.getMethods("onComplete")&&this.executeMethod("onComplete",arguments[0],arguments[1],this)},callOnFailure:function(){this.getMethods("onFailure")&&this.executeMethod("onFailure",arguments[0],arguments[1],this,arguments[2])},getSelectorElements:function(){for(var e=this.getData("ltPropSelectors"),t=[],o=0;o<e.length;o++)Lyte.arrayUtils(t,"push",Array.from(document.querySelectorAll(e[o])));return t},unbindEventsForSelectors:function(){var e=document.querySelectorAll("."+this._boxElement);if(e.length>0)for(var t=0;t<e.length;t++)e[t].removeEventListener("click",this.clickHandler,!0),e[t].classList.remove(this._boxElement),delete e[t]._className;this.setData("currentEle",null)},callOnClose:function(){this.getMethods("onClose")&&this.executeMethod("onClose",this)},didDestroy:function(){LyteColorbox._first||0!=$L("lyte-colorbox").length||(window.removeEventListener("resize",LyteColorbox.computeOffsetImpl),LyteColorbox._first=!0),this.unbindEventsForSelectors(),delete this.childComp,this._box._callee=null,LyteColorbox._box&&(LyteColorbox._box._callee=null),LyteColorbox._component=null,this._box.remove(),this._header&&(this._header=null),LyteColorbox._box=this._box=null,LyteColorbox._prev=this._prev=null,LyteColorbox._next=this._next=null,LyteColorbox._content=this._content=null,LyteColorbox._overlay=this._overlay=null,LyteColorbox._title=this._title=null,LyteColorbox._close=this._close=null,LyteColorbox._download=this._download=null,LyteColorbox._thumbDiv=this._thumbDiv=null,LyteColorbox._description=this._description=null,LyteColorbox._zoomIn=this._zoomIn=null,LyteColorbox._zoomOut=this._zoomOut=null,LyteColorbox._reset=this._reset=null,LyteColorbox._loadingIcon=this._loadingIcon=null,LyteColorbox._domEle=null,LyteColorbox._el=null,LyteColorbox._boxEle=this._boxElement=null,LyteColorbox._open=null,LyteColorbox._active=null,LyteColorbox._closing=null,LyteColorbox._related=null,LyteColorbox._diff=0,document.body.classList.remove("lyteCBoxOH")},clickHandler:function(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),LyteColorbox.setupForBindings(document.querySelector("."+this._className)._callee.component),LyteColorbox.launch(LyteColorbox.getProperties(this),e))},checkBeforeClose:function(e){var t;this.getMethods("onBeforeClose")&&(t=this.executeMethod("onBeforeClose",e,this)),void 0!==t&&!0!==t||LyteColorbox.close()},addBindings:function(){return!!LyteColorbox._box&&(this._init||(this._init=!0,LyteColorbox._component.getData("ltPropType"),LyteColorbox._content,LyteColorbox._next&&LyteColorbox._next.addEventListener("click",(function(e){LyteColorbox.next(e)}),!0),LyteColorbox._prev&&LyteColorbox._prev.addEventListener("click",(function(e){LyteColorbox.prev(e)}),!0),LyteColorbox._close&&LyteColorbox._close.addEventListener("click",function(e){this.checkBeforeClose(e)}.bind(this),!0),LyteColorbox._overlay&&LyteColorbox._overlay.addEventListener("click",function(e){LyteColorbox._component.getData("ltPropOverlayClose")&&this.checkBeforeClose(e)}.bind(this),!0),LyteColorbox._crop&&this.getData("ltPropCrop")&&LyteColorbox._crop.addEventListener("click",(function(){LyteColorbox.crop()}),!0),LyteColorbox._download&&LyteColorbox._download.addEventListener("click",(function(){LyteColorbox.download()}),!0),LyteColorbox._zoomIn&&LyteColorbox._zoomIn.addEventListener("click",(function(){LyteColorbox.zoomIn()}),!0),LyteColorbox._zoomOut&&LyteColorbox._zoomOut.addEventListener("click",function(){LyteColorbox.zoomOut(),this.triggerCheck()}.bind(this),!0),LyteColorbox._reset&&LyteColorbox._reset.addEventListener("click",(function(){LyteColorbox.reset(null,!0)}),!0),LyteColorbox._content&&this.data.ltPropWheelZoom&&LyteColorbox._content.addEventListener("wheel",LyteColorbox.wheel.bind(LyteColorbox),!0),LyteColorbox._content&&(LyteColorbox._content.addEventListener("mousedown",function(e){this.mousedownFn(e)}.bind(this),!0),LyteColorbox._content.addEventListener("touchstart",function(e){this.mousedownFn(e)}.bind(this),!0)),LyteColorbox._boundKeydown||(LyteColorbox._boundKeydown=!0,document.body.addEventListener("keyup",(function(e){LyteColorbox._intervalId&&(clearInterval(LyteColorbox._intervalId),LyteColorbox._intervalId=!1)}),!0),document.body.addEventListener("keydown",(function(e){var t=e.keyCode;if(LyteColorbox._open&&LyteColorbox._component.getData("ltPropEscKey")&&27===t){if(LyteColorbox._crop&&LyteColorbox._component.getData("ltPropCrop"))"none"===window.getComputedStyle(LyteColorbox._crop).display?LyteColorbox._component.$node.crop("cancel"):(e.preventDefault(),LyteColorbox._component.checkBeforeClose(e));else e.preventDefault(),LyteColorbox._component.checkBeforeClose(e);LyteColorbox._content.focus()}if(LyteColorbox._open&&LyteColorbox._component.getData("ltPropArrowKey")&&LyteColorbox._related[1]&&!e.altKey){if(LyteColorbox._crop&&LyteColorbox._component.getData("ltPropCrop"))if("none"===window.getComputedStyle(LyteColorbox._crop).display)return;if(37===t){if(LyteColorbox._intervalId)return;if(LyteColorbox._intervalId=setInterval((function(){LyteColorbox._intervalId=!1}),100),"INPUT"===(o=e.target).tagName||"TEXTAREA"===o.tagName||o.isContentEditable)return;e.preventDefault(),(LyteColorbox._prev||LyteColorbox._related instanceof Array&&LyteColorbox._related.length>1)&&LyteColorbox.prev(e),LyteColorbox._content.focus()}else if(39===t){if(LyteColorbox._intervalId)return;var o;if(LyteColorbox._intervalId=setInterval((function(){LyteColorbox._intervalId=!1}),100),"INPUT"===(o=e.target).tagName||"TEXTAREA"===o.tagName||o.isContentEditable)return;e.preventDefault(),(LyteColorbox._next||LyteColorbox._related instanceof Array&&LyteColorbox._related.length>1)&&LyteColorbox.next(e),LyteColorbox._content.focus()}}if(LyteColorbox._open&&13===t){var i=document.activeElement;"button"===i.getAttribute("role")&&i.click()}}),!0)),LyteColorbox._boundResize||(LyteColorbox._boundResize=!0,window.addEventListener("resize",(function(){LyteColorbox._open&&(LyteColorbox._domEle&&LyteColorbox._domEle.classList.contains("lyteCBoxPhoto")&&LyteColorbox.checkAspectRatio(),LyteColorbox.setImagePostion(),LyteColorbox._diff=0)}),!0))),!0)},addClickEvents:function(e,t){for(var o=0;o<e.length;o++)e[o].addEventListener("click",this.clickHandler,!0),e[o].classList.add(this._boxElement),e[o]._className=t},triggerCheck:function(e){LyteColorbox._domEle.addEventListener("transitionend",LyteColorbox.checkForLeftAndTopAfterZoomOut)},mousedownFn:function(e){var t=null;if(3!==e.which){for(var o=e.target;o;){if($L(o).hasClass("lyteCBoxPhoto")){t=o;break}o=o.parentElement}if(t){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&e.preventDefault(),t.classList.contains("lyteCBoxAnimateOnUp")&&t.classList.remove("lyteCBoxAnimateOnUp");var i=t.parentElement.getBoundingClientRect(),r=t.getBoundingClientRect();(r.top<i.top||r.left<i.left||r.bottom>i.bottom||r.right>i.right)&&((r.top<i.top||r.bottom>i.bottom)&&(t._top=!0),(r.left<i.left||r.right>i.right)&&(t._left=!0),"touchstart"==e.type?(t._offset.x=e.touches[0].clientX,t._offset.y=e.touches[0].clientY,document.addEventListener("touchmove",LyteColorbox.mm=function(e){this.mousemoveFn(e)}.bind(this)),document.addEventListener("touchend",LyteColorbox.mu=function(e){this.mouseupFn(e)}.bind(this))):(t._offset.x=e.clientX,t._offset.y=e.clientY,document.addEventListener("mousemove",LyteColorbox.mm=function(e){this.mousemoveFn(e)}.bind(this)),document.addEventListener("mouseup",LyteColorbox.mu=function(e){this.mouseupFn(e)}.bind(this)))),LyteColorbox._draggedEle=t}}},mousemoveFn:function(e){if(LyteColorbox._draggedEle){var t,o=LyteColorbox._draggedEle;e.preventDefault(),t="touchmove"==e.type?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY};o.offsetParent.getBoundingClientRect();var i=t.x-o._offset.x,r=t.y-o._offset.y;o._left&&(o.style.left=parseFloat(o.style.left||0)+i+"px"),o._top&&(o.style.top=parseFloat(o.style.top||0)+r+"px"),o._offset.x=t.x,o._offset.y=t.y}},mouseupFn:function(e){if("touchend"==e.type?(document.removeEventListener("touchmove",LyteColorbox.mm),document.removeEventListener("touchend",LyteColorbox.mu)):(document.removeEventListener("mousemove",LyteColorbox.mm),document.removeEventListener("mouseup",LyteColorbox.mu)),delete LyteColorbox.mm,delete LyteColorbox.mu,LyteColorbox._draggedEle){var t,o=LyteColorbox._draggedEle,i=o.parentElement.getBoundingClientRect(),r=o.getBoundingClientRect();o._left&&(o.classList.add("lyteCBoxAnimateOnUp"),r.left>i.left&&(t=r.left-i.left,o.style.left=parseFloat(o.style.left||0)-t+"px"),r.right<i.right&&(t=i.right-r.right,o.style.left=parseFloat(o.style.left||0)+t+"px")),o._top&&(o.classList.contains("lyteCBoxAnimateOnUp")||o.classList.add("lyteCBoxAnimateOnUp"),r.top>i.top&&(t=r.top-i.top,o.style.top=parseFloat(o.style.top||0)-t+"px"),r.bottom<i.bottom&&(t=i.bottom-r.bottom,o.style.top=parseFloat(o.style.top||0)+t+"px")),o=null,delete LyteColorbox._draggedEle}},moveToImage:function(e){for(var t=this.getData("ltPropType"),o=0,i=e.target;i.parentElement&&!i.classList.contains("lyteColorboxThumb");)i=i.parentElement;if(i.classList.contains("lyteColorboxThumb")){for(var r=Array.from(i.parentElement.children).filter((function(e){return"TEMPLATE"!=e.tagName})),l=0;l<r.length;l++)r[l].isEqualNode(i)&&(l>LyteColorbox._index?(o=1,!LyteColorbox._active&&LyteColorbox._related[1]&&(LyteColorbox._component.getData("ltPropLoop")||LyteColorbox._related[LyteColorbox._index+1])&&("slide"!=LyteColorbox._component.getData("ltPropAnimation")?LyteColorbox.hideElement():LyteColorbox._nextItem=!0,LyteColorbox.toggleLoadingIcon(),"custom"===t&&LyteColorbox.reset(),LyteColorbox._index=l,LyteColorbox._domEle=null,LyteColorbox.load(LyteColorbox._el=LyteColorbox._related[LyteColorbox._index]))):l<LyteColorbox._index&&(o=-1,!LyteColorbox._active&&LyteColorbox._related[1]&&(LyteColorbox._component.getData("ltPropLoop")||LyteColorbox._index)&&("slide"!=LyteColorbox._component.getData("ltPropAnimation")?LyteColorbox.hideElement():LyteColorbox._prevItem=!0,LyteColorbox.toggleLoadingIcon(),"custom"===t&&LyteColorbox.reset(),LyteColorbox._index=l,LyteColorbox._domEle=null,LyteColorbox.load(LyteColorbox._el=LyteColorbox._related[LyteColorbox._index]))));this.getMethods("onNavigate")&&this.executeMethod("onNavigate",e,this.$node,LyteColorbox._index+1,o)}},actions:{clickOnThumbnails:function(e){var t,o=this;this.getMethods("onBeforeNavigate")&&(t=this.executeMethod("onBeforeNavigate",e,this.$node,LyteColorbox._index)),t?t.then((function(){o.moveToImage(e)})):this.moveToImage(e)}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<o;){var l=t[r];if(e.call(i,l,r,t))return r;r++}return-1},configurable:!0,writable:!0}),$L&&($L.prototype.cropper=function(e){if("destroy"===e||"Destroy"===e){var t=this[0],o=t.parentElement,i=$L(o).find(".lyteCropArea")[0];i||(i=$L(o).find(".lytePSParent")[0]),o.removeChild(i),$L(t).data("cropper",{}),t.style.display="block"}else if(e&&(e.type||(e.type="default")),"default"===e.type){function r(e){return e.getBoundingClientRect()}var l,a,s=this[0],n=1,p=s.parentElement,d="n:n",c=1,y=e,u=!1;e&&e.useExif&&(u=e.useExif);var m=function(){},h=function(){};e&&(e.beforeRender&&(m=e.beforeRender),e.afterRender&&(h=e.afterRender));var x=0,g=0;y||(y={aspectRatio:"n:n"});var f,b,C,L,v,P,_,I,w,D,F,S,U,A,E,M,z,B,T,q,k,$,R,N,O,H,W,j,Y,V={},Z=function(){},G=function(){},K=function(){},X=function(){};if(0!==p.querySelectorAll(".lyteCropArea").length){var Q=p.querySelectorAll(".lyteCropArea")[0];g=$L(s).data("cropper").exifAngle,$L(s).data("cropper")?(a=$L(s).data("cropper").angle,g=$L(s).data("cropper").exifAngle):a=x,p.removeChild(Q),s.style.display="block",l=r(s)}function J(){s.complete&&0===p.querySelectorAll(".lyteCropArea").length&&(l=r(s),s.style.display="none"),s.removeEventListener("load",J)}function ee(){f=document.createElement("DIV"),b=document.createElement("DIV"),C=document.createElement("DIV"),L=document.createElement("DIV"),P=document.createElement("DIV"),v=document.createElement("DIV"),_=document.createElement("DIV"),I=document.createElement("DIV"),w=document.createElement("DIV"),D=document.createElement("DIV"),F=document.createElement("DIV"),U=document.createElement("DIV"),S=document.createElement("DIV"),A=document.createElement("DIV"),z=document.createElement("SPAN"),B=document.createElement("SPAN"),T=document.createElement("SPAN"),q=document.createElement("SPAN"),$=document.createElement("SPAN"),R=document.createElement("SPAN"),N=document.createElement("SPAN"),O=document.createElement("SPAN"),ye=document.createElement("IMG"),E=document.createElement("IMG"),M=document.createElement("IMG"),(k=s.parentElement).appendChild(f),f.appendChild(b),b.appendChild(C),C.appendChild(E),b.appendChild(L),b.appendChild(v),v.appendChild(_),_.appendChild($),v.appendChild(I),I.appendChild(R),v.appendChild(w),w.appendChild(N),v.appendChild(D),D.appendChild(O),v.appendChild(F),v.appendChild(U),v.appendChild(A),v.appendChild(S),v.appendChild(z),v.appendChild(B),v.appendChild(T),v.appendChild(q),v.appendChild(P),P.appendChild(M)}function te(){switch(y&&(d=y.aspectRatio),y.cropStart&&(Z=y.cropStart),y.cropDrag&&(G=y.cropDrag),y.onSet&&(K=y.onSet),y.cropEnd&&(X=y.cropEnd),d){case"n:n":c=void 0;break;case"1:1":c=1;break;case"2:3":c=2/3;break;case"3:2":c=1.5;break;case"4:3":c=4/3;break;case"3:4":c=3/4;break;case"16:9":c=16/9;break;case"9:16":c=9/16}n=s.naturalWidth/s.naturalHeight,s.naturalWidth>s.naturalHeight?ue="landscape":s.naturalWidth<=s.naturalHeight&&(ue="portrait"),ee(),f.setAttribute("class","lyteCropArea"),ye.setAttribute("class","lyteCropMainImage"),b.setAttribute("class","lyteCropBox"),C.setAttribute("class","lyteCropFixedDiv"),E.setAttribute("class","lyteCropFixedImage"),L.setAttribute("class","lyteCropOpacityDiv"),v.setAttribute("class","lyteCropCropper"),z.setAttribute("class","lytecropVerGrid1"),B.setAttribute("class","lytecropVerGrid2"),T.setAttribute("class","lytecropHorGrid1"),q.setAttribute("class","lytecropHorGrid2"),_.setAttribute("class","lyteCropTopEdge"),$.setAttribute("class","lyteCropTopSpan"),I.setAttribute("class","lyteCropBottomEdge"),R.setAttribute("class","lyteCropBottomSpan"),w.setAttribute("class","lyteCropLeftEdge"),N.setAttribute("class","lyteCropLeftSpan"),D.setAttribute("class","lyteCropRightEdge"),O.setAttribute("class","lyteCropRightSpan"),F.setAttribute("class","lyteCropTopRightCorner"),U.setAttribute("class","lyteCropTopLeftCorner"),S.setAttribute("class","lyteCropBottomRightCorner"),A.setAttribute("class","lyteCropBottomLeftCorner"),P.setAttribute("class","lyteCropDivImage"),M.setAttribute("class","lyteCropDivImageImg"),function(){var e=function(){var e={};switch(ue){case"landscape":e.imageWidth=r(k).width,e.imageHeight=r(k).width/n;break;case"portrait":e.imageWidth=r(k).height*n,e.imageHeight=r(k).height}return e}();E.style.height=e.imageHeight+"px",E.style.width=e.imageWidth+"px",M.style.height=e.imageHeight+"px",M.style.width=e.imageWidth+"px",f.style.height=r(E).height+"px",f.style.width=r(E).width+"px";var t=function(){var e={};return"landscape"===ue?(e.imageTop=(r(k).height-r(E).height)/2,e.imageLeft=0):(e.imageTop=0,_lyteUiUtils.getRTL()?e.imageLeft="-"+(r(k).width-r(E).width)/2:e.imageLeft=(r(k).width-r(E).width)/2),e}();f.style.left=t.imageLeft+"px",f.style.top=t.imageTop+"px";var o=function(){var e,t,o={};return E.src=ye.src=M.src=s.src,o.cropperWidth=le(),o.cropperHeight=(e=c,"n:n"===d&&(e=1),y.selection?y.selection.size?(t=parseFloat(y.selection.size)/e,y.maxSize&&parseFloat(y.maxSize)<parseFloat(y.selection.size)&&(t=parseFloat(y.maxSize)/e),y.minSize&&parseFloat(y.minSize)>parseFloat(y.selection.size)&&(t=parseFloat(y.minSize)/e)):t=ae().height:t="n:n"===d?r(E).height:ae().height,t),o}();v.style.height=o.cropperHeight+"px",v.style.width=o.cropperWidth+"px";var i=function(){var e={};return y.selection?(y.selection.top?e.cropperTop=se().top:e.cropperTop=ne().cropperTop,y.selection.left?e.cropperLeft=se().left:e.cropperLeft=ne().cropperLeft):(e.cropperLeft=ne().cropperLeft,e.cropperTop=ne().cropperTop),e}();if(v.style.top=i.cropperTop+"px",v.style.left=i.cropperLeft+"px",M.style.left=-i.cropperLeft+"px",M.style.top=-i.cropperTop+"px",b.style.overflow="unset",90===a||270===a){var l=r(v),p=r(f);r(E);if(u=a)a-90,(u=a)>=360&&(u=0),E.style.transform="rotate("+u+"deg) rotateY("+g+"deg)",M.style.transform="rotate("+u+"deg) rotateY("+g+"deg)";else{var u=90;E.style.transform="rotate("+u+"deg) rotateY("+g+"deg)",M.style.transform="rotate("+u+"deg) rotateY("+g+"deg)"}c=1/c,ue="landscape"===ue?"portrait":"landscape",oe(),de(l,p)}180!==a&&0!==a||(0===(u=a)?(a-90,(u=a)>=360&&(u=0),E.style.transform="rotate("+u+"deg) rotateY("+g+"deg)",M.style.transform="rotate("+u+"deg) rotateY("+g+"deg)"):(E.style.transform="rotate("+u+"deg) rotateY("+g+"deg)",M.style.transform="rotate("+u+"deg) rotateY("+g+"deg)")),ce(),v.addEventListener("mousedown",pe)}(),oe(),ce()}function oe(){switch(d){case"n:n":ie(1),re(1);break;case"1:1":case"2:3":case"3:2":case"4:3":case"3:4":case"16:9":case"9:16":ie(c),re(c)}}function ie(e){y.minSize?(W=y.minSize,H=y.minSize/e):(W=15,H=15/e)}function re(e){var t=r(E);"landscape"===ue?y.maxSize?y.maxSize>t.width?(j=t.height,Y=t.height*e,"n:n"===d&&(j=t.height,Y=t.width)):(Y=y.maxSize,j=y.maxSize/e,"n:n"===d&&(j=y.maxSize,Y=y.maxSize)):(j=t.height,Y=t.height*e,"n:n"===d&&(j=t.height,Y=t.width)):"portrait"===ue&&(y.maxSize?y.maxSize>t.height?(j=t.width/e,Y=t.width,"n:n"===d&&(j=t.height,Y=t.width)):(Y=y.maxSize*e,j=y.maxSize,"n:n"===d&&(j=y.maxSize,Y=y.maxSize)):(j=t.width/e,Y=t.width,"n:n"===d&&(j=t.height,Y=t.width)))}function le(e){var t;return y.selection?y.selection.size?(t=parseFloat(y.selection.size),y.maxSize&&parseFloat(y.maxSize)<parseFloat(y.selection.size)&&(t=parseFloat(y.maxSize)),y.minSize&&parseFloat(y.minSize)>parseFloat(y.selection.size)&&(t=parseFloat(y.minSize))):initialValue=ae().width:t="n:n"===d?r(E).width:ae().width,t}function ae(){var e={};return"landscape"===ue?(e.width=r(E).height*c,e.height=r(E).height):(e.width=r(E).width,e.height=r(E).width/c),e.width>r(E).width&&(e.width=r(E).width,e.height=r(E).width/c),e.height>r(E).height&&(e.height=r(E).height,e.width=r(E).height*c),e}function se(){var e={};return parseFloat(y.selection.top)+r(v).height>r(L).bottom?e.top=r(L).height-r(v).height:e.top=parseFloat(y.selection.top),parseFloat(y.selection.left)+r(v).width>r(L).right?e.left=r(L).width-r(v).width:e.left=parseFloat(y.selection.left),e}function ne(){var e={};return e.cropperTop=(r(L).height-r(v).height)/2,e.cropperLeft=(r(E).width-r(v).width)/2,e}function pe(e){var t;switch(Z(),z.style.opacity=B.style.opacity=T.style.opacity=q.style.opacity=1,L.style.opacity="0.6",e.preventDefault(),t="lyteCropDivImageImg"===e.target.className||"lyteCropDivImage"===e.target.className?"parent":"child",$L(".lyteCropTopEdge")[0],$L(".lyteCropRightEdge")[0],$L(".lyteCropBottomEdge")[0],$L(".lyteCropLeftEdge")[0],$L(".lyteCropTopRightCorner")[0],$L(".lyteCropBottomRightCorner")[0],$L(".lyteCropBottomLeftCorner")[0],$L(".lyteCropTopLeftCorner")[0],t){case"parent":if("lyteCropDivImage"===e.target.className||"lyteCropDivImageImg"===e.target.className){var o=r(v),i=r(L),l=r(f),a=r(b),s=(r(E),e.clientX),n=e.clientY,p=i.left-l.left,y=i.right-o.width-a.left,u=i.top-l.top;function m(e){z.style.opacity=B.style.opacity=T.style.opacity=q.style.opacity=1,e.preventDefault();var t=e.clientX,a=e.clientY;o.top+(a-n)-l.top+l.top>i.top?v.style.top=o.top+(a-n)-l.top+"px":v.style.top=u+"px",o.left+(t-s)-l.left+l.left>i.left?v.style.left=o.left+(t-s)-l.left+"px":v.style.left=p+"px",o.right+(t-s)-l.right+l.right<i.right||(v.style.left=y+"px"),o.bottom+(a-n)-l.bottom+l.bottom<i.bottom||(v.style.top=i.bottom-o.height-l.top+"px");var d=E.style.transform;E.style.transform="rotate(0deg)",M.style.left=r(E).left-r(v).left+"px",M.style.top=r(E).top-r(v).top+"px",E.style.transform=d,ce()}l.bottom,l.bottom,i.bottom,o.height,window.innerHeight,l.bottom,document.addEventListener("mousemove",m),document.addEventListener("mouseup",(function e(){L.style.opacity="",z.style.opacity=B.style.opacity=T.style.opacity=q.style.opacity=0,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",e),document.removeEventListener("mousedown",m),ce(),K()}))}break;case"child":{var h,x=r(v),g=x.left,C=x.top,P=x.width,_=x.height,I=x.right,w=x.bottom,D=r(L),F=D.top,S=D.left,U=D.width,A=D.height,k=D.bottom,$=D.right,R=r(f),N=R.top,O=R.left,V=(R.width,R.height,R.right),Q=R.bottom,J=r(b),ee=(J.height,J.width,J.left,J.top,r(E)),te=ee.left,oe=ee.top,ie=ee.width,re=ee.height,le=(s=e.clientX,n=e.clientY,x.top+x.height/2-R.top),ae=x.left+x.width/2-R.left;function se(e){if(ce(),!1!==G()){var t,o,i,l,a,p,y=e.clientX,u=e.clientY,m=e.clientX,x=e.clientY,f=r(v);switch(h){case"lyteCropLeftEdge":if(z(),t=0,o=0,i=0,l=0,P-(y-s)>=W&&P-(y-s)<=Y)y>S&&(i=P-(m-s)+"px",l=(P-(m-s))/c+"px",t=C-N+(m-s)/c/2+"px",o=g-O+(y-s)+"px",$L(v).css({width:i,height:l,top:t,left:o})),z(),y-6<=S&&(f.height>=A&&(f.width>=U||!(f.top<F))||(t=k-((U-($-I))/c+(k-(le+(U-($-I))/c/2)))+"px",o=S-O+"px",$L(v).css({top:t,left:o})),o=S-O+"px",i=I-S+"px",l=(U-($-I))/c+"px",$L(v).css({width:i,height:l,left:o})),z(),f.bottom>=k&&(t=k-f.height-N+"px",$L(v).css({top:t})),z(),f.top<=F&&(t=F-N+"px",$L(v).css({top:t})),z(),f.bottom>=k&&f.top<=F&&(o=I-(k-F)*c-O+"px",i=(k-F)*c+"px",l=k-F+"px",t=F-N+"px",$L(v).css({width:i,height:l,top:t,left:o}));else if(P-(y-s)<=W)"n:n"!==d?(o=I-W-O+"px",t=le-H/2+"px",i=W+"px",l=H+"px",$L(v).css({width:i,height:l,top:t,left:o})):(o=I-W-O+"px",i=W+"px",$L(v).css({width:i,left:o}));else if(P-(y+6-s)>=Y)if("n:n"!==d){var b=(P-(m-s))/c;((L=P-(m-s))>=Y||b>=j)&&y+6<=S&&I-S>=Y&&(o=I-Y-O+"px",z(),(t=le-j/2)<0&&(t=0),t>k-j-F&&(t=k-j-F),i=Y+"px",l=j+"px",$L(v).css({width:i,height:l,top:t,left:o}))}else Y!=ie?(o=I-Y-S,i=Y+"px"):(o=0,i=I-S+"px"),$L(v).css({width:i,left:o});break;case"lyteCropTopEdge":z(),t=0,o=0,i=0,l=0,_-(u-n)>=H&&_-(u-n)<=j?(u>F+6&&(i=(_-(u-n))*c+"px",l=_-(u-n)+"px",o=g-O+(u-n)*c/2+"px",t=C-N+(u-n)+"px",$L(v).css({width:i,height:l,top:t,left:o})),z(),u-6<=F&&(f.height>=A&&(f.width>=U||!(f.left<S))||(o=$-((w-F)*c+($-(ae+(w-F)*c/2)))+"px",t=F-N+"px",$L(v).css({top:t,left:o})),i=(w-F)*c+"px",l=w-F+"px",$L(v).css({width:i,height:l})),z(),f.left<=S&&(o=S-O+"px",$L(v).css({left:o})),z(),f.right>=$&&(o=$-f.width-O+"px",$L(v).css({left:o})),z(),f.right>=$&&f.left<=S&&(i=$-S+"px",l=($-S)/c+"px",t=w-($-S)/c-N+"px",o=S-O+"px",$L(v).css({width:i,height:l,top:t,left:o}))):_-(u-n)<=H?"n:n"!==d?(t=w-H-N+"px",o=ae-W/2+"px",i=W+"px",l=H+"px",$L(v).css({width:i,height:l,top:t,left:o})):(t=w-H-N+"px",l=H+"px",$L(v).css({height:l,top:t})):_-(u-n)>=j&&("n:n"!==d?(b=_-(u-n),((L=(_-(u-n))*c)>=Y||b>=j)&&u-6<F&&w-F>=j&&(t=w-j-N+"px",z(),(o=ae-Y/2)<0&&(o=0),o>$-Y-S&&(o=$-Y-S),i=Y+"px",l=j+"px",$L(v).css({width:i,height:l,top:t,left:o}))):(j!=re?(t=w-j-F,l=j+"px"):(t=0,l=w-F+"px"),$L(v).css({height:l,top:t})));break;case"lyteCropRightEdge":if(z(),t=0,a=0,i=0,l=0,o=0,P+(m-s)>=W&&P+(m-s)<=Y)m<$&&(i=P+(m-s)+"px",l=(P+(m-s))/c+"px",t=C-N-(m-s)/c/2+"px",a=I-V-(m-s)+"px",$L(v).css({width:i,height:l,top:t,right:a})),m>=$&&(t=le-($-g)/c/2+"px",i=$-g+"px",l=($-g)/c+"px",$L(v).css({width:i,height:l,top:t})),z(),f.bottom>=k&&(t=k-f.height-N+"px",$L(v).css({top:t})),z(),f.top<=F&&(t=F-N+"px",$L(v).css({top:t})),z(),f.bottom>=k&&f.top<=F&&(o=g-O+"px",i=(k-F)*c+"px",l=k-F+"px",$L(v).css({width:i,height:l,left:o}));else if(P+(m-s)<=W)"n:n"!==d?(t=le-H/2+"px",i=W+"px",l=H+"px",$L(v).css({width:i,height:l,top:t})):(i=W+"px",$L(v).css({width:i}));else if(P+(y-s)>=Y)if("n:n"!==d){var L=P+(m-s);((b=(P+(m-s))/c)>=j||L>=Y)&&g<=$-Y&&((t=le-j/2)<0&&(t=0),t>k-j-F&&(t=k-j-F),i=Y+"px",l=j+"px",$L(v).css({width:i,height:l,top:t}))}else i=Y!=ie?Y+"px":$-g+"px",$L(v).css({width:i});break;case"lyteCropBottomEdge":z(),t=0,a=0,i=0,l=0,o=0,_+(u-n)>=H&&_+(u-n)<=j?(u<k&&(i=(_+(x-n))*c+"px",l=_+(u-n)+"px",o=g-O-(x-n)*c/2+"px",p=w-Q-(x-n)+"px",$L(v).css({width:i,height:l,left:o,bottom:p})),u>=k&&(o=ae-(k-C)*c/2+"px",i=(k-C)*c+"px",l=k-C+"px",$L(v).css({width:i,height:l,left:o})),z(),f.left<=S&&(o=S-O+"px",$L(v).css({left:o})),z(),f.right>=$&&(o=$-f.width-O+"px",$L(v).css({left:o})),z(),f.right>=$&&f.left<=S&&(o=S-O+"px",i=$-S+"px",l=($-S)/c+"px",$L(v).css({width:i,height:l,left:o}))):_+(u-n)<=H?"n:n"!==d?(o=ae-W/2+"px",i=W+"px",l=H+"px",$L(v).css({width:i,height:l,left:o})):(l=H+"px",$L(v).css({height:l})):_+(u-n)>=j&&("n:n"!==d?(b=_+(u-n),((L=(_+(x-n))*c)>=Y||b>=j)&&C<=k-j&&((o=ae-Y/2)<0&&(o=0),o>$-Y-S&&(o=$-Y-S),i=Y+"px",l=j+"px",$L(v).css({width:i,height:l,left:o}))):(l=j!=re?j+"px":k-C+"px",$L(v).css({height:l})));break;case"lyteCropTopRightCorner":z(),t=0,a=0,i=0,l=0,o=0,"n:n"===d?(P+(m-s)>=W&&P+(m-s)<=Y?m<$&&(i=P+(m-s)+"px",$L(v).css({width:i}),$L(v).css({width:i})):P+(m-s)<W?m<=g&&(i=W+"px",$L(v).css({width:i})):P+(m-s)>Y&&m>=$&&(i=Y!=ie?Y+"px":$-g+"px",$L(v).css({width:i})),_-(x-n)>=H&&_-(x-n)<=j?x>F&&(t=C-N+(u-n)+"px",l=_-(x-n)+"px",$L(v).css({height:l,top:t})):_-(x-n)<H?x>w&&(l=H+"px",t=w-H-F+"px",$L(v).css({height:l,top:t})):_-(x-n)>j&&x<=F&&(j!=re?(t=w-j-F+"px",l=j+"px"):(t=F-oe+"px",l=w-F+"px"),$L(v).css({height:l,top:t}))):_-(u-n)>=H&&_-(u-n)<=j?(u>=F+5&&(i=(_-(u-n))*c+"px",l=_-(u-n)+"px",t=C-N+(u-n)+"px",a=I-V-(y-s)+"px",$L(v).css({width:i,height:l,top:t,right:a})),z(),u<F+5&&(f.height>=A&&(f.width>=U||!(f.left<S))||(t=F-N+"px"),i=(w-F)*c+"px",l=w-F+"px",$L(v).css({width:i,height:l,top:t})),z(),f.right>=$&&(t=w-($-g)/c-N+"px",i=$-g+"px",l=($-g)/c+"px",$L(v).css({width:i,height:l,top:t}))):_-(u-n)<=H?(t=w-H-N+"px",i=W+"px",l=H+"px",$L(v).css({width:i,height:l,top:t})):_-(u-n)>=j&&(b=_-(u-n),((L=(_-(u-n))*c)>=Y||b>=j)&&u-6<F&&w-F>=j&&g<=$-Y&&(t=w-j-N+"px",(o=ae-Y/2)<0&&(o=0),o>$-Y-S&&(o=$-Y-S),i=Y+"px",l=j+"px",$L(v).css({width:i,height:l,top:t})));break;case"lyteCropTopLeftCorner":z(),t=0,a=0,i=0,l=0,o=0,"n:n"===d?(z(),P-(y-s)>=W&&P-(y-s)<=Y?y>S&&(i=P-(m-s)+"px",o=g-O+(y-s)+"px",$L(v).css({width:i,left:o})):P-(y-s)<W?m>I&&(i=W+"px",o=I-W-S+"px",$L(v).css({width:i,left:o})):P-(y-s)>Y&&y<=S&&(Y!=ie?(i=Y+"px",o=I-Y-S+"px"):(i=I-S+"px",o=S-te+"px"),$L(v).css({width:i,left:o})),_-(x-n)>=H&&_-(x-n)<=j?x>F&&(t=C-N+(u-n)+"px",l=_-(x-n)+"px",$L(v).css({height:l,top:t})):_-(x-n)<H?x>w&&(l=H+"px",t=w-H-F+"px",$L(v).css({height:l,top:t})):_-(x-n)>j&&x<=F&&(j!=re?(t=w-j-F+"px",l=j+"px"):(t=F-oe+"px",l=w-F+"px"),$L(v).css({height:l,top:t}))):_-(u-n)>=H&&_-(u-n)<=j?(u>=F+5&&(i=(_-(u-n))*c+"px",l=_-(u-n)+"px",t=C-N+(u-n)+"px",o=g-O+(u-n)*c+"px",$L(v).css({width:i,height:l,left:o,top:t})),z(),u-6<=F&&(f.height>A&&(f.width>U||!(f.left<S))||(o=$-((w-F)*c+($-I))-O+"px",t=F-N+"px"),i=(w-F)*c+"px",l=w-F+"px",$L(v).css({width:i,height:l,left:o,top:t})),z(),f.left<=S&&(t=w-(I-S)/c-N+"px",o=S-O+"px",i=I-S+"px",l=(I-S)/c+"px",$L(v).css({width:i,height:l,left:o,top:t}))):_-(u-n)<=H?"n:n"!==d&&(t=w-H-N+"px",o=I-W-O+"px",i=W+"px",l=H+"px",$L(v).css({width:i,height:l,left:o,top:t})):_-(u-n)>=j&&(b=_-(u-n),((L=(_-(u-n))*c)>=Y||b>=j)&&u-6<F&&w-F>=j&&I-S>=Y&&(t=w-j-N+"px",(o=ae-Y/2)<0&&(o=0),o>$-Y-S&&(o=$-Y-S),i=Y+"px",l=j+"px",$L(v).css({width:i,height:l,top:t,left:o})));break;case"lyteCropBottomRightCorner":z(),t=0,a=0,i=0,l=0,o=0,"n:n"===d?(z(),_+(u-n)>=H&&_+(u-n)<=j?u<k&&(l=_+(u-n)+"px",$L(v).css({height:l})):_+(u-n)<H?x<C&&(l=H+"px",$L(v).css({height:l})):_+(u-n)>j&&u>=k&&(l=j!=re?j+"px":k-C+"px",$L(v).css({height:l})),P+(y-s)>=W&&P+(y-s)<=Y?y<$&&(i=P+(y-s)+"px",$L(v).css({width:i})):P+(y-s)<W?m<=g&&(i=W+"px",$L(v).css({width:i})):P+(y-s)>Y&&y>=$&&(i=Y!=ie?Y+"px":$-g+"px",$L(v).css({width:i}))):P+(m-s)>=W&&P+(m-s)<=Y?(m<$&&(i=P+(m-s)+"px",l=(P+(m-s))/c+"px",$L(v).css({width:i,height:l})),z(),f.right>=$-5&&m>=$-5&&(i=$-g+"px",l=($-g)/c+"px",$L(v).css({width:i,height:l})),z(),f.bottom>=k&&(l=k-C+"px",i=(k-C)*c+"px",$L(v).css({width:i,height:l}))):P+(m-s)<=W?(i=W+"px",l=H+"px",$L(v).css({width:i,height:l})):P+(m-s)>=Y&&(L=P+(m-s),((b=(P+(m-s))/c)>=j||L>=Y)&&k-C>=j&&$-g>=Y&&(i=Y+"px",l=j+"px",$L(v).css({width:i,height:l})));break;case"lyteCropBottomLeftCorner":z(),t=0,a=0,i=0,l=0,o=0,"n:n"===d?(z(),P-(y-s)>=W&&P-(y-s)<=Y?y>S&&(i=P-(m-s)+"px",o=g-O+(y-s)+"px",$L(v).css({width:i,left:o})):P-(y-s)<W?m>I&&(i=W+"px",o=I-W-S+"px",$L(v).css({width:i,left:o})):P-(y-s)>Y&&y<=S&&(Y!=ie?(i=Y+"px",o=I-Y-S+"px"):(i=I-S+"px",o=S-te+"px"),$L(v).css({width:i,left:o})),_+(u-n)>=H&&_+(u-n)<=j?u<k&&(l=_+(u-n)+"px",$L(v).css({height:l})):_+(u-n)<H?x<C&&(l=H+"px",$L(v).css({height:l})):_+(u-n)>j&&u>=k&&(l=j!=re?j+"px":k-C+"px",$L(v).css({height:l}))):P-(y-s)>=W&&P-(y-s)<=Y?(y>S&&(i=P-(m-s)+"px",l=(P-(m-s))/c+"px",o=g-O+(y-s)+"px",$L(v).css({width:i,height:l,left:o})),z(),y-6<=S+2&&(f.height>=A&&(f.width>=U||!(f.left<S))||(o=S-O+"px"),i=I-S+"px",l=(I-S)/c+"px",$L(v).css({width:i,height:l,left:o})),z(),f.bottom>=k&&(l=k-C+"px",i=(k-C)*c+"px",o=$-((k-C)*c+($-I))-O+"px",$L(v).css({width:i,height:l,left:o}))):P-(y-s)<=W?"n:n"!==d&&(o=I-W-O+"px",i=W+"px",l=H+"px",$L(v).css({width:i,height:l,left:o})):P-(y-s)>=Y&&"n:n"!==d&&(L=P-(m-s),((b=(P-(m-s))/c)>=j||L>=Y)&&y-6<S&&I-S>=Y&&k-C>=j&&(o=I-Y-O+"px",i=Y+"px",l=j+"px",$L(v).css({width:i,height:l,left:o})))}var D=E.style.transform;E.style.transform="rotate(0deg)",M.style.left=r(E).left-r(v).left+"px",M.style.top=r(E).top-r(v).top+"px",E.style.transform=D,ce()}function z(){f=r(v)}}p=D.left-R.left,u=D.top-R.top,y=D.right-x.width-J.left,h=""===e.target.className?e.target.parentElement.className:e.target.className,document.addEventListener("mousemove",se),document.addEventListener("mouseup",(function e(){L.style.opacity="",z.style.opacity=B.style.opacity=T.style.opacity=q.style.opacity=0,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",e),ce(),X()}))}}}function de(e,t,o,i,a){var s=E.style.transform.match(/-?\d+/g)[0],n=parseInt(s),y=n;if(90===(n=Math.abs(n))||270===n){if(l.height<l.width){E.style.width=M.style.width=r(p).height+"px",E.style.height=M.style.height="auto",f.style.height=r(p).height+"px",f.style.top="0px",f.style.width=r(E).width+"px";var u=Math.abs(r(f).left-r(E).left);_lyteUiUtils.getRTL()?(f.style.left="-"+(r(p).width-r(f).width)/2+"px",E.style.left=-u+"px"):(f.style.left=(r(p).width-r(f).width)/2+"px",E.style.left=-u+"px")}else if(l.height>l.width){E.style.width=M.style.width="auto",E.style.height=M.style.height=r(p).width+"px",f.style.width=r(p).width+"px",f.style.left="0px",f.style.height=r(E).height+"px",f.style.top=(r(p).height-r(f).height)/2+"px";var m=Math.abs(r(f).left-r(E).left);_lyteUiUtils,E.style.left=m+"px"}E.style.top=r(f).top-r(E).top+"px",oe(),"n:n"!==d?(H=r(f).height/t.width*15,W=H*c):(H=r(f).height/t.width*15,W=H);var h=g=e.height*r(f).width/t.height,x=C=e.width*r(f).height/t.width;W>g&&"n:n"!=d&&(x=(h=W)/c),H>C&&"n:n"!=d&&(h=(x=H)*c),v.style.width=h+"px",v.style.height=x+"px",-90!==y&&-270!==y||(v.style.left=(e.top-t.top)*r(f).width/t.height+"px",v.style.top=r(f).height-((e.left-t.left)*r(f).height/t.width+r(v).height)+"px"),90!==y&&270!==y||(v.style.top=(e.left-t.left)*r(f).height/t.width+"px",v.style.left=r(f).width-(r(v).width+(e.top-t.top)*r(f).width/t.height)+"px")}else{var g,C;l.height<l.width?(E.style.width=M.style.width=r(p).width+"px",E.style.height=M.style.height="auto",f.style.width=r(p).width+"px",f.style.left="0px",f.style.right="",f.style.height=r(E).height+"px",f.style.top=(r(p).height-r(f).height)/2+"px",E.style.left=(r(f).width-r(E).width)/2+"px"):(E.style.width=M.style.width="auto",E.style.height=M.style.height=r(p).height+"px",f.style.height=r(p).height+"px",f.style.top="0px",f.style.width=r(E).width+"px",_lyteUiUtils.getRTL()?f.style.left="-"+(r(p).width-r(f).width)/2+"px":f.style.left=(r(p).width-r(f).width)/2+"px",E.style.left=(r(f).width-r(E).width)/2+"px"),E.style.top=(r(b).height-r(E).height)/2+"px",oe(),h=g=e.height*r(f).width/t.height,x=C=e.width*r(f).height/t.width,H>C&&"n:n"!=d&&(h=(x=H)*c),v.style.width=h+"px",v.style.height=x+"px",-180===y&&(v.style.top=r(f).height-((e.left-t.left)*r(f).height/t.width+r(v).height)+"px",v.style.left=(e.top-t.top)*r(f).width/t.height+"px"),0!==y&&180!==y||(v.style.top=(e.left-t.left)*r(f).height/t.width+"px",v.style.left=r(f).width-(r(v).width+(e.top-t.top)*r(f).width/t.height)+"px")}var L=E.style.transform;E.style.transform="rotate(0deg)",M.style.left=r(E).left-r(v).left+"px",M.style.top=r(E).top-r(v).top+"px",E.style.transform=L}function ce(){var e,t,o,i=r(v);V.cropperDimensions={top:v.offsetTop,left:v.offsetLeft,width:i.width,height:i.height},V.imageDimension=l,V.resolution=(e=$L(".lyteCropDivImageImg")[0],t=e.naturalWidth/e.getBoundingClientRect().width,o=e.naturalHeight/e.getBoundingClientRect().height,90!==V.angle&&270!==V.angle||(t=e.naturalHeight/e.getBoundingClientRect().width,o=e.naturalWidth/e.getBoundingClientRect().height),{width:v.getBoundingClientRect().width*t,height:v.getBoundingClientRect().height*o}),V.rotate=function(){var e=r(v),t=r(f),o=(r(E),E.style.transform);if(o)(i=o.match(/-?\d+/g))[0],(i=parseInt(i[0])+90)>=360&&(i=0),E.style.transform="rotate("+i+"deg) rotateY("+g+"deg)",M.style.transform="rotate("+i+"deg) rotateY("+g+"deg)";else{var i=90;E.style.transform="rotate("+i+"deg) rotateY("+g+"deg)",M.style.transform="rotate("+i+"deg) rotateY("+g+"deg)"}a=i,V.angle=i,c=1/c,ue="landscape"===ue?"portrait":"landscape",de(e,t),ce()},V.getCroppedImage=function(){var e=$L(".lyteCropDivImageImg")[0],t=r(v),o=r(f),i=r(M);return e.naturalWidth,t.width,function(r,l){var a=document.createElement("CANVAS"),s=a.getContext("2d");a.style.background="#eee";var n,p,d=E.style.transform,c=0;d&&(c=d.match(/-?\d+/g),c=parseInt(c[0])),90!==Math.abs(c)&&270!==Math.abs(c)&&(M.style.transform="rotate(0deg) rotateY("+g+"deg)");var y=o.left-t.left,u=o.top-t.top;if(90!==Math.abs(c)&&270!==Math.abs(c)?(a.width=Math.round(t.width*(r.naturalWidth/i.width)),a.height=Math.round(t.height*(r.naturalHeight/i.height)),n=r.naturalWidth,p=r.naturalHeight):(a.height=Math.round(t.height*(r.naturalWidth/i.height)),a.width=Math.round(t.width*(r.naturalHeight/i.width)),p=r.naturalWidth,n=r.naturalHeight),y*=n/i.width,u*=p/i.height,M.style.transform=d,0!==c||180===g){s.save(),Math.abs(c)%90==0&&180!==Math.abs(c)&&360!==Math.abs(c)&&(r.naturalWidth,r.naturalHeight);var m=n/2,h=p/2;Math.abs(c)%90==0&&0!=c&&180!==Math.abs(c)&&360!==Math.abs(c)?(s.translate(y+m,u+h),s.rotate(c*(Math.PI/180)),180===g&&s.scale(-1,1),s.drawImage(e,-h,-m,p,n)):(s.translate(y+n/2,u+p/2),s.rotate(c*(Math.PI/180)),180===g&&s.scale(-1,1),s.drawImage(e,-n/2,-p/2,n,p)),s.restore()}else s.drawImage(r,y,u,n,p);return a}(e)},V.changeByHeight=function(e){var t,o,i=r(v),l=r(L),a=parseFloat(e);a+r(v).top<=r(L).bottom||(a=r(L).bottom-r(v).top);var s=r(v).left+r(v).width/2-r(L).left;a>=j&&(a=j),a<=H&&(a=H);var n=a*c;i.top+a>=l.bottom&&(o=l.bottom-a-l.top,$L(v).css({top:o}));var p=s-n/2;p>=0&&$L(v).css({left:p}),p+n>=r(L).right-r(L).left&&(p=r(L).right-n-r(L).left,$L(v).css({left:p})),"n:n"!==d?$L(v).css({width:n,height:a}):(n=r(v).width,$L(v).css({height:a})),"NaN"===e&&(n=W,a=H),t={cropperWidth:n,cropperHeight:a};var y=E.style.transform;return E.style.transform="rotate(0deg)",M.style.left=r(E).left-r(v).left+"px",M.style.top=r(E).top-r(v).top+"px",E.style.transform=y,ce(),t},V.changeByWidth=function(e){var t,o,i=parseFloat(e);i+r(v).left<=r(L).right||(i=r(L).right-r(v).left);var l=r(v),a=r(L),s=r(v).top+r(v).height/2-r(L).top;i>=Y&&(i=Y),i<=W&&(i=W);var n=i/c;l.left+i>=a.right&&(o=a.right-i-a.left,$L(v).css({left:o}));var p=s-n/2;p>=0&&$L(v).css({top:p}),p+n>=r(L).bottom-r(L).top&&(p=r(L).bottom-n-r(L).top,$L(v).css({top:p})),"n:n"!==d?$L(v).css({width:i,height:n}):(n=r(v).height,$L(v).css({width:i})),"NaN"===e&&(i=W,n=H),t={cropperWidth:i,cropperHeight:n};var y=E.style.transform;return E.style.transform="rotate(0deg)",M.style.left=r(E).left-r(v).left+"px",M.style.top=r(E).top-r(v).top+"px",E.style.transform=y,ce(),t},V.moveCropperInXaxis=function(e){var t=r(v),o=r(L),i=e+t.width;e>=0&&i<=o.width&&($L(v).css({left:e}),$L(M).css({left:-1*e})),e<0&&(e=0,$L(v).css({left:e}),$L(M).css({left:-1*e})),i>o.width&&(e=o.width-t.width,$L(v).css({left:e}),$L(M).css({left:-1*e}))},V.moveCropperInYaxis=function(e){var t=r(v),o=r(L),i=e+t.height;e>=0&&i<=o.height&&($L(v).css({top:e}),$L(M).css({top:-1*e})),e<0&&(e=0,$L(v).css({top:e}),$L(M).css({top:-1*e})),i>o.height&&(e=o.height-t.height,$L(v).css({top:e}),$L(M).css({top:-1*e}))},V.deleteCropper=function(){p.removeChild(f),s.style.display="block"},V.swapAspectRatio=function(){c=1/c,oe();var e,t,o,i,l=r(v).height,a=r(v).width,s=r(v).height/2+r(v).top,n=r(v).width/2+r(v).left;r(v).top+a>r(L).bottom?(e=r(L).bottom-a-r(L).top,$L(v).css({top:e})):((e=s-r(v).width/2-r(L).top)<=0&&(e=0),$L(v).css({top:e})),r(v).left+l>r(L).right?(t=r(L).right-l-r(L).left,$L(v).css({left:t})):((t=n-r(v).height/2-r(L).left)<=0&&(t=0),$L(v).css({left:t})),$L(v).css({width:l,height:a}),a>=r(E).height&&(o=r(E).height*c,i=r(E).height,t=(r(E).width-o)/2,$L(v).css({height:i,width:o,top:0,left:t})),l>=r(E).width&&(o=r(E).width,i=r(E).width/c,e=(r(E).height-i)/2,$L(v).css({height:i,width:o,left:0,top:e}));var p=E.style.transform;E.style.transform="rotate(0deg)",M.style.left=r(E).left-r(v).left+"px",M.style.top=r(E).top-r(v).top+"px",E.style.transform=p+"rotateY("+g+")",ce()},V.angle=a,V.exifAngle=g,$L(s).data("cropper",V)}"from-image"!==getComputedStyle(s).imageOrientation&&u?$L.exif&&$L.exif({target:s,getData:function(e){if(s=e.target,"from-image"!==getComputedStyle(s).imageOrientation){switch(e.exifdata.Orientation){case 1:x=0;break;case 2:x=0,g=180;break;case 3:x=180;break;case 4:x=180,g=180;break;case 5:x=270,g=180;break;case 6:x=90;break;case 7:x=90,g=180;break;case 8:x=270}m(e.exifdata.Orientation),J(),$L(s).data("cropper")?(a=$L(s).data("cropper").angle,g=$L(s).data("cropper").exifAngle):a=x,s.style.display="none",te(),h()}}}):(m(),J(),te(),h())}else if("DP"===e.type){var ye,ue,me,he,xe,ge,fe,be,Ce,Le=(ye=this[0]).getBoundingClientRect(),ve=ye.parentElement,Pe=ve.getBoundingClientRect();V={},e||(e={}),e.cropperSize||(e.cropperSize=300),ue=Le.height<Le.width?"landscape":"portrait";var _e,Ie,we,De,Fe=function(){xe.appendChild(ge),xe.appendChild(Ce),be.appendChild(fe),xe.appendChild(be),ve.appendChild(xe),me=ye.getBoundingClientRect(),ye.style.display="none"},Se=function(){be.style.width=be.style.height=e.cropperSize+"px",be.style.top=Pe.height/2-e.cropperSize/2+"px",be.style.left=Pe.width/2-e.cropperSize/2+"px","landscape"===ue?(ge.style.top=Pe.height/2-e.cropperSize/2+"px",ge.style.left=(Pe.width-me.width)/2+"px"):(ge.style.top=(Pe.height-me.height)/2+"px",ge.style.left=Pe.width/2-e.cropperSize/2+"px"),fe.style.left=ge.getBoundingClientRect().left-be.getBoundingClientRect().left+"px",fe.style.top=ge.getBoundingClientRect().top-be.getBoundingClientRect().top+"px",he=ge.getBoundingClientRect(),ve.addEventListener("mousedown",Ue)},Ue=function(e){$L(e.target).hasClass("lytePSvisualArea")&&(ve.addEventListener("mousemove",Ae),ve.addEventListener("mouseup",Ee),_e=ge.getBoundingClientRect().top-ve.getBoundingClientRect().top,Ie=ge.getBoundingClientRect().left-ve.getBoundingClientRect().left,we=e.clientY,De=e.clientX)},Ae=function(t){Pe.height,e.cropperSize,t.clientY;var o=_e-(we-t.clientY),i=(t.clientX,Pe.width,e.cropperSize,Ie-(De-t.clientX));i<=be.getBoundingClientRect().left-ve.getBoundingClientRect().left?(ge.style.left=Ie-(De-t.clientX)+"px",fe.style.left=Ie-(De-t.clientX)-(Pe.width/2-e.cropperSize/2)+"px"):(ge.style.left=be.getBoundingClientRect().left-ve.getBoundingClientRect().left+"px",fe.style.left=be.getBoundingClientRect().left-ve.getBoundingClientRect().left-(Pe.width/2-e.cropperSize/2)+"px"),i+ge.getBoundingClientRect().width<be.getBoundingClientRect().left-ve.getBoundingClientRect().left+be.getBoundingClientRect().width&&(ge.style.left=-1*(ge.getBoundingClientRect().width-be.getBoundingClientRect().width-(be.getBoundingClientRect().left-ve.getBoundingClientRect().left))+"px",fe.style.left=-1*(ge.getBoundingClientRect().width-be.getBoundingClientRect().width-(be.getBoundingClientRect().left-ve.getBoundingClientRect().left))-(Pe.width/2-e.cropperSize/2)+"px"),o<=be.getBoundingClientRect().top-ve.getBoundingClientRect().top?(ge.style.top=_e-(we-t.clientY)+"px",fe.style.top=-1*(Pe.height/2-e.cropperSize/2)+(_e-(we-t.clientY))+"px"):(ge.style.top=be.getBoundingClientRect().top-ve.getBoundingClientRect().top+"px",fe.style.top=-1*(Pe.height/2-e.cropperSize/2)+(be.getBoundingClientRect().top-ve.getBoundingClientRect().top)+"px"),o+ge.getBoundingClientRect().height<be.getBoundingClientRect().top-ve.getBoundingClientRect().top+be.getBoundingClientRect().height&&(ge.style.top=-1*(ge.getBoundingClientRect().height-be.getBoundingClientRect().height-(be.getBoundingClientRect().top-ve.getBoundingClientRect().top))+"px",fe.style.top=-1*(ge.getBoundingClientRect().height-be.getBoundingClientRect().height-(be.getBoundingClientRect().top-ve.getBoundingClientRect().top))-(Pe.height/2-e.cropperSize/2)+"px")},Ee=function(e){ve.removeEventListener("mousemove",Ae),ve.removeEventListener("mouseup",Ee)};xe=document.createElement("DIV"),Ce=document.createElement("DIV"),ge=document.createElement("IMG"),be=document.createElement("DIV"),fe=document.createElement("IMG"),ge.src=fe.src=ye.src,xe.setAttribute("class","lytePSParent"),Ce.setAttribute("class","lytePSFreezeLayer"),ge.setAttribute("class","lytePSBackImage"),be.setAttribute("class","lytePSvisualArea"),fe.setAttribute("class","lytePSFrontImage"),"landscape"===ue?(ge.style.height=e.cropperSize+"px",fe.style.height=e.cropperSize+"px"):(ge.style.width=e.cropperSize+"px",fe.style.width=e.cropperSize+"px"),Fe(),Se(),V.zoomImage=function(e){var t,o,i=e/100+1,r=ve.getBoundingClientRect(),l=parseFloat(ge.style.top),a=parseFloat(ge.style.left),s=ge.getBoundingClientRect(),n=s.height,p=s.width,d=a+p,c=l+n,y=be.getBoundingClientRect(),u=y.top-r.top,m=y.left-r.left,h=m-a,x=d-(m+y.width),g=u-l,f=c-(u+y.height),b=he.height*i,C=he.width*i,L=p-y.width,v=n-y.height,P=b-n,_=C-p,I=h/L*(C-y.width),w=g/v*(b-y.height);h==x&&g==f?(o=a-_/2,t=l-P/2):h==x?(t=u-w,o=a-_/2):g==f?(t=l-P/2,o=m-I):(t=u-w,o=m-I),"landscape"===ue?(ge.style.height=b+"px",fe.style.height=b+"px"):(ge.style.width=C+"px",fe.style.width=C+"px"),ge.style.top=t+"px",fe.style.top=t-u+"px",ge.style.left=o+"px",fe.style.left=o-m+"px"},V.getCroppedImage=function(){var e=fe,t=be.getBoundingClientRect(),o=(xe.getBoundingClientRect(),fe.getBoundingClientRect());return e.naturalWidth,t.width,function(i,r){var l=document.createElement("CANVAS"),a=l.getContext("2d");l.style.background="#eee";var s,n,p=ge.style.transform,d=0;p&&(d=p.match(/-?\d+/g),d=parseInt(d[0]));var c=o.left-t.left,y=o.top-t.top;return 90!==Math.abs(d)&&270!==Math.abs(d)?(l.width=Math.round(t.width*(e.naturalWidth/o.width)),l.height=Math.round(t.height*(e.naturalHeight/o.height)),s=e.naturalWidth,n=e.naturalHeight):(l.height=Math.round(t.height*(e.naturalWidth/o.height)),l.width=Math.round(t.width*(e.naturalHeight/o.width)),n=e.naturalWidth,s=e.naturalHeight),c*=s/o.width,y*=n/o.height,fe.style.transform=p,a.drawImage(e,c,y,s,n),l}()},$L(ye).data("lyteCrop",V)}}),Lyte.Component.register("crux-file-upload",{_template:'<template tag-name="crux-file-upload"> <lyte-fileupload queue-list="{{lbind(fileList)}}" lt-prop-id="{{cxPropId}}" lt-prop-validate-by-ext="{{cxPropValidateByExt}}" lt-prop-rename-duplicate-file="{{cxPropRenameDuplicateFile}}" lt-prop-reset-file-value="true" predefined-list="{{lbind(cxPropPredefinedList)}}" lt-prop-auto-upload="{{cxPropAutoUpload}}" lt-prop-trigger-upload="{{cxPropTriggerUpload}}" lt-prop-upload-multiple-count="{{cxPropUploadMultipleCount}}" lt-prop-parallel="{{cxPropParallel}}" lt-prop-file-unit="{{cxPropFileUnit}}" lt-prop-upload-multiple="{{cxPropUploadMultiple}}" lt-prop-files-count="{{cxPropMaxFilesCount}}" lt-prop-total-files-size="{{cxPropTotalFilesSize}}" lt-prop-reset="{{lbind(cxPropReset)}}" lt-prop-disabled="{{cxPropDisabled}}" lt-prop-files="{{lbind(cxPropFiles)}}" lt-prop-folder="{{cxPropFolder}}" lt-prop-param-name="{{cxPropParamName}}" lt-prop-retry="{{cxPropRetry}}" lt-prop-tabindex="{{cxPropTabindex}}" lt-prop-class="{{cxPropClass}}" lt-prop-yield="true" lt-prop-file-limit="{{cxPropFileLimit}}" lt-prop-multiple="{{cxPropMultiple}}" lt-prop-name="{{cxPropName}}" lt-prop-thumb="{{cxPropThumb}}" lt-prop-minimum-file-size="{{cxPropMinimumFileSize}}" lt-prop-accept="{{cxPropAcceptedTypes}}" cx-prop-minimum-file-size="{{cxPropMinimumFileSize}}" lt-prop-ajax="{{cxPropAjax}}" lt-prop-list-error-files="{{cxPropListErrorFiles}}" on-before-remove="{{method(\'onBeforeRemoveFile\')}}" on-before-add="{{method(\'onBeforeAddFile\')}}" on-add="{{method(\'onAddFile\')}}" on-success="{{method(\'successFile\')}}" on-reject="{{method(\'onFileReject\')}}" after-render="{{method(\'afterRenderUpload\')}}" on-remove="{{method(\'onRemoveFile\')}}" on-failure="{{method(\'onFailureFile\')}}" on-request-success="{{method(\'onRequestSuccessFn\')}}" on-request-failure="{{method(\'onRequestFailureFn\')}}" on-file-success="{{method(\'onFileSuccessFn\')}}" on-file-failure="{{method(\'onFileFailureFn\')}}" on-progress="{{method(\'onProgressFn\')}}" on-before-send="{{method(\'onBeforeSendFn\')}}" on-send="{{method(\'onSendFn\')}}" on-drag-enter="{{method(\'onDragEnterFn\')}}" on-drag-over="{{method(\'onDragOverFn\')}}" on-drag-leave="{{method(\'onDragLeaveFn\')}}" on-before-drop="{{method(\'onBeforeDropFn\')}}" on-drop="{{method(\'onDropFn\')}}" on-before-paste="{{method(\'onBeforePasteFn\')}}" on-paste="{{method(\'onPasteFn\')}}" on-before-open="{{method(\'onBeforeOpenFn\')}}" on-retry="{{method(\'onRetryFn\')}}" on-select="{{method(\'onSelectFn\')}}" on-validation-end="{{method(\'onValidationEndFn\')}}"> <template is="registerYield" yield-name="file"> <template is="if" value="{{expHandlers(cxPropListType,\'===\',&quot;inner&quot;)}}"><template case="true"> <div class="cxSelectAreaWrapperDiv {{if(expHandlers(cxPropPredefinedList.length,\'||\',fileList.length),\'cxTypeFileSelected\',\'\')}} {{cxPropFileUploadWrapperClass}}"> <lyte-yield yield-name="headerYield"></lyte-yield> <div class="lyteFileUpdList {{if(cxPropSingleColumn,\'cxSingleFileList\',\'\')}}"> <crux-file-upload-list cx-prop-size-selector="{{cxPropSizeSelector}}" cx-prop-sortable="{{cxPropSortable}}" cxprop-progress-status-colours="{{cxPropProgressStatusColours}}" cx-prop-editable="{{cxPropEditable}}" cx-prop-id="{{cxPropId}}" cx-prop-manual-retry="{{cxPropManualRetry}}" cx-prop-show-failure-message="{{cxPropShowFailureMessage}}" cx-prop-list-class="{{cxPropListClass}}" cx-prop-source-key="{{cxPropSourceKey}}" cx-prop-preview-url-key="{{cxPropPreviewUrlKey}}" cx-prop-download-key="{{cxPropDownloadKey}}" cx-prop-predefined-list="{{lbind(cxPropPredefinedList)}}" file-list="{{lbind(fileList)}}" cx-prop-failure-message="{{cxPropFailureMessage}}" cx-prop-file-unit="{{cxPropFileUnit}}" cx-prop-digits="{{cxPropDigits}}" cx-prop-upload-multiple="{{cxPropUploadMultiple}}" cx-prop-custom-message="{{cxPropCustomMessage}}" cx-prop-upload-progress="{{cxPropUploadProgress}}" on-edit-image="{{method(\'onImageEdit\')}}" on-before-manual-retry="{{method(\'onBeforeManualRetryFn\')}}"></crux-file-upload-list> </div> <template is="if" value="{{expHandlers(expHandlers(cxPropPredefinedList.length,\'!\'),\'&amp;&amp;\',expHandlers(fileList.length,\'!\'))}}"><template case="true"><div class="selectionAreaDiv"> <span class="cxFileUploadHeadIconContainer {{cxPropSelectArea.icon_class}}"></span> <div class="typeFilePrimaryMsg">{{unescape(cxPropSelectArea.primary_message)}}</div> <div class="cxFileSeperatorText">- or -</div> <lyte-file-select-area class="typeFileSelectionArea cxDIB"> <lyte-button data-zcqa="fileUploadSelectAreaButton" lt-prop-size="small" lt-prop-class="outlineprimary" lt-prop-appearance="primary"> <template is="registerYield" yield-name="text"> {{cxPropSelectArea.browse_text}} </template> </lyte-button> </lyte-file-select-area> <div class="typeFileSecondaryMsg"> <template is="if" value="{{if(cxPropSelectArea.secondary_message,true,false)}}"><template case="true"><div>{{unescape(cxPropSelectArea.secondary_message)}}</div></template></template> <div class="cxFileUploadSupportFormatMsg">{{unescape(cxPropSelectArea.supported_message)}}</div> </div> <lyte-yield yield-name="homeFooterYield"></lyte-yield> </div></template><template case="false"><div class="typeFilePrimaryMsg"> <div class="cxFileAfterUploadedMsg"> <span class="cxFileUploadAttachment"></span> {{unescape(cxPropSelectArea.primary_message)}},<span class="cxFileUploadedMsgLableColor cxFileUploadedOrSeparator">or</span> <lyte-file-select-area class="typeFileSelectionArea cxUploadedBrowseButton {{if(cruxOr(cxPropDisableBrowseBtn,cxPropUploadProgress),\'peNone\',\'\')}}" lt-prop-title="{{if(cxPropUploadProgress,cxPropProgressTooltip,cxPropErrorTooltipMsg)}}"> <lyte-button data-zcqa="fileUploadSelectAreaButton" lt-prop-disabled="{{cruxOr(cxPropDisableBrowseBtn,cxPropUploadProgress)}}" lt-prop-size="small" lt-prop-class="outlineprimary" lt-prop-appearance="primary"> <template is="registerYield" yield-name="text"> {{cxPropSelectArea.browse_text}} </template> </lyte-button> </lyte-file-select-area> </div> <div class="cxFileAfterUploadedSecondaryMsg"> {{unescape(cxPropSelectArea.supported_message)}} </div> </div></template></template> </div> </template><template case="false"><template is="if" value="{{expHandlers(cxPropListType,\'===\',&quot;single_image&quot;)}}"><template case="true"> <div class="cxSelectAreaWrapperDiv {{if(fileList.length,\'cxFileUpSingleImgSelected\',\'\')}} {{cxPropFileUploadWrapperClass}}"> <lyte-yield yield-name="headerYield"></lyte-yield> <template is="if" value="{{fileList.length}}"><template case="true"><div class="cxFileUpSingleImgViewCont"> <template is="if" value="{{fileList[0].src}}"><template case="true"><img class="cxFileUpSingleImgView" src="{{fileList[0].src}}"></template></template> </div></template><template case="false"><div class="selectionAreaDiv"> <span class="cxFileUploadHeadIconContainer cxImageUploadHeadIcon"></span> <div class="typeFilePrimaryMsg">{{unescape(cxPropSelectArea.primary_message)}}</div> <div class="cxFileSeperatorText">- or -</div> <div class="typeFileSelectionArea cxDIB"> <lyte-button data-zcqa="fileUploadSelectAreaButton" lt-prop-size="small" lt-prop-class="outlineprimary" lt-prop-appearance="primary" onclick="{{action(\'openSelector\')}}"> <template is="registerYield" yield-name="text"> {{cxPropSelectArea.browse_text}} </template> </lyte-button> </div> <div class="typeFileSecondaryMsg"> <template is="if" value="{{if(cxPropSelectArea.secondary_message,true,false)}}"><template case="true"><div>{{unescape(cxPropSelectArea.secondary_message)}}</div></template></template> <div class="cxFileUploadSupportFormatMsg">{{unescape(cxPropSelectArea.supported_message)}}</div> </div> <lyte-yield yield-name="homeFooterYield"></lyte-yield> </div></template></template> <lyte-file-select-area class="fileUploadSelectionArea"></lyte-file-select-area> </div> </template><template case="false"> <div class="cxSelectAreaWrapperDiv {{if(expHandlers(cxPropPredefinedList.length,\'||\',fileList.length),\'cxTypeFileSelected\',\'\')}} {{cxPropFileUploadWrapperClass}}"> <lyte-yield yield-name="headerYield"></lyte-yield> <template is="if" value="{{expHandlers(expHandlers(cxPropPredefinedList.length,\'!\'),\'&amp;&amp;\',expHandlers(fileList.length,\'!\'))}}"><template case="true"><div class="selectionAreaDiv"> <span class="cxFileUploadHeadIconContainer {{cxPropSelectArea.icon_class}}"></span> <div class="typeFilePrimaryMsg">{{unescape(cxPropSelectArea.primary_message)}}</div> <div class="cxFileSeperatorText">- or -</div> <template is="if" value="{{cxPropAttachButtonYield}}"><template case="true"> <lyte-yield yield-name="attachButtonYield"></lyte-yield> </template><template case="false"> <lyte-file-select-area class="typeFileSelectionArea cxDIB"> <lyte-button data-zcqa="fileUploadSelectAreaButton" lt-prop-size="small" lt-prop-class="outlineprimary" lt-prop-appearance="primary"> <template is="registerYield" yield-name="text"> {{cxPropSelectArea.browse_text}} </template> </lyte-button> </lyte-file-select-area> </template></template> <div class="typeFileSecondaryMsg"> <template is="if" value="{{if(cxPropSelectArea.secondary_message,true,false)}}"><template case="true"><div>{{unescape(cxPropSelectArea.secondary_message)}}</div></template></template> <div class="cxFileUploadSupportFormatMsg">{{unescape(cxPropSelectArea.supported_message)}}</div> </div> <lyte-yield yield-name="homeFooterYield"></lyte-yield> </div></template><template case="false"><div class="typeFilePrimaryMsg"> <div class="cxFileAfterUploadedMsg"> <span class="cxFileUploadAttachment"></span> {{unescape(cxPropSelectArea.primary_message)}},<span class="cxFileUploadedMsgLableColor cxFileUploadedOrSeparator">or</span> <template is="if" value="{{cxPropAttachButtonYield}}"><template case="true"> <lyte-yield yield-name="attachButtonYield"></lyte-yield> </template><template case="false"> <lyte-file-select-area class="typeFileSelectionArea cxUploadedBrowseButton {{if(cruxOr(cxPropDisableBrowseBtn,cxPropUploadProgress),\'peNone\',\'\')}}" lt-prop-title="{{if(cxPropUploadProgress,cxPropProgressTooltip,cxPropErrorTooltipMsg)}}"> <lyte-button data-zcqa="fileUploadSelectAreaButton" lt-prop-disabled="{{cruxOr(cxPropDisableBrowseBtn,cxPropUploadProgress)}}" lt-prop-size="small" lt-prop-class="outlineprimary" lt-prop-appearance="primary"> <template is="registerYield" yield-name="text"> {{cxPropSelectArea.browse_text}} </template> </lyte-button> </lyte-file-select-area> </template></template> </div> <div class="cxFileAfterUploadedSecondaryMsg"> {{unescape(cxPropSelectArea.supported_message)}} </div> </div></template></template> <template is="if" value="{{cxPropAttachButtonYield}}"><template case="true"> <lyte-file-select-area class="typeFileSelectionArea" style="display: none;"></lyte-file-select-area> </template></template> </div> <template is="if" value="{{negate(cxPropHideList)}}"><template case="true"><div class="lyteFileUpdList {{if(cxPropSingleColumn,\'cxSingleFileList\',\'\')}}"> <crux-file-upload-list cx-prop-size-selector="{{cxPropSizeSelector}}" cx-prop-sortable="{{cxPropSortable}}" cxprop-progress-status-colours="{{cxPropProgressStatusColours}}" cx-prop-editable="{{cxPropEditable}}" cx-prop-id="{{cxPropId}}" cx-prop-manual-retry="{{cxPropManualRetry}}" cx-prop-show-failure-message="{{cxPropShowFailureMessage}}" cx-prop-list-class="{{cxPropListClass}}" cx-prop-source-key="{{cxPropSourceKey}}" cx-prop-preview-url-key="{{cxPropPreviewUrlKey}}" cx-prop-download-key="{{cxPropDownloadKey}}" cx-prop-predefined-list="{{lbind(cxPropPredefinedList)}}" file-list="{{lbind(fileList)}}" cx-prop-failure-message="{{cxPropFailureMessage}}" cx-prop-file-unit="{{cxPropFileUnit}}" cx-prop-digits="{{cxPropDigits}}" cx-prop-upload-multiple="{{cxPropUploadMultiple}}" cx-prop-custom-message="{{cxPropCustomMessage}}" cx-prop-upload-progress="{{cxPropUploadProgress}}" on-edit-image="{{method(\'onImageEdit\')}}" on-before-manual-retry="{{method(\'onBeforeManualRetryFn\')}}"></crux-file-upload-list> </div></template></template> </template></template></template></template> </template> </lyte-fileupload> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"text",position:[0,3,0]},{type:"registerYield",position:[0,7,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[0,7,1]},{type:"componentDynamic",position:[0,7]},{type:"attr",position:[0,9,1]},{type:"if",position:[0,9,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"text",position:[0,9,3,0]},{type:"insertYield",position:[0,11]}]},false:{dynamicNodes:[{type:"text",position:[0,1,3]},{type:"attr",position:[0,1,7]},{type:"attr",position:[0,1,7,1]},{type:"registerYield",position:[0,1,7,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[0,1,7,1]},{type:"componentDynamic",position:[0,1,7]},{type:"text",position:[0,3,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"if",position:[0,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[0,3,0]},{type:"attr",position:[0,7,1]},{type:"registerYield",position:[0,7,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[0,7,1]},{type:"attr",position:[0,9,1]},{type:"if",position:[0,9,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"text",position:[0,9,3,0]},{type:"insertYield",position:[0,11]}]}},default:{}},{type:"componentDynamic",position:[1,5]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"text",position:[0,3,0]},{type:"attr",position:[0,7]},{type:"if",position:[0,7],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[0,9,1]},{type:"if",position:[0,9,1],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"text",position:[0,9,3,0]},{type:"insertYield",position:[0,11]}]},false:{dynamicNodes:[{type:"text",position:[0,1,3]},{type:"attr",position:[0,1,7]},{type:"if",position:[0,1,7],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"text",position:[0,3,1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"componentDynamic",position:[0,1]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["cxPropSelectArea","cxPropMultiple","cxPropListClass","cxPropAcceptedTypes","cxPropSelectionAreaYield","fileList","cxPropMinimumFileSize","cxPropFileLimit","cxPropAjax","cxPropMaxFilesCount","cxPropThumb","cxPropTotalFilesSize","cxPropSingleFileSize","cxPropName","cxPropId","cxPropClass","cxPropParamName","cxPropTabindex","cxPropRetry","cxPropFiles","cxPropFolder","cxPropFileUnit","cxPropDigits","cxPropFailureMessage","cxPropShowFailureMessage","cxPropManualRetry","cxPropUploadMultiple","cxPropUploadMultipleCount","cxPropParallel","cxPropAutoUpload","cxPropTriggerUpload","cxPropPredefinedList","cxPropListType","cxPropSingleColumn","cxPropDownloadKey","cxPropPreviewUrlKey","cxPropSourceKey","cxPropSortable","cxPropEditable","cxPropResetFileValue","cxPropSizeSelector","cxPropDisableBrowseBtn","cxPropErrorTooltipMsg","cxPropCustomMessage","cxPropListErrorFiles","cxPropFileUploadWrapperClass","cxPropUploadProgress","cxPropProgressTooltip","cxPropSortableDragClass","cxPropValidateByExt","cxPropRenameDuplicateFile","cxPropProgressStatusColours","cxPropMaxCountReachTooltip","cxPropMaxSizeReachTooltip","cxPropReset","cxPropHideList","cxPropAttachButtonYield"],data:function(){return{cxPropSelectArea:Lyte.attr("object"),cxPropMultiple:Lyte.attr("boolean",{default:!0}),cxPropListClass:Lyte.attr("string",{default:""}),cxPropAcceptedTypes:Lyte.attr("string"),cxPropSelectionAreaYield:Lyte.attr("boolean",{default:!1}),fileList:Lyte.attr("array",{default:[]}),cxPropMinimumFileSize:Lyte.attr("number",{default:0}),cxPropFileLimit:Lyte.attr("number"),cxPropAjax:Lyte.attr("object",{default:{url:"/Fileupload"}}),cxPropMaxFilesCount:Lyte.attr("number"),cxPropThumb:Lyte.attr("boolean",{default:!1}),cxPropTotalFilesSize:Lyte.attr("string"),cxPropSingleFileSize:Lyte.attr("string"),cxPropName:Lyte.attr("string"),cxPropId:Lyte.attr("string"),cxPropClass:Lyte.attr("string"),cxPropParamName:Lyte.attr("string",{default:"file"}),cxPropTabindex:Lyte.attr("number",{default:1}),cxPropRetry:Lyte.attr("number",{default:2}),cxPropFiles:Lyte.attr("array",{default:[]}),cxPropFolder:Lyte.attr("boolean",{default:!1}),cxPropFileUnit:Lyte.attr("string",{default:""}),cxPropDigits:Lyte.attr("number",{default:1}),cxPropFailureMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.fileupload.attach.fail")}),cxPropShowFailureMessage:Lyte.attr("boolean",{default:!0}),cxPropManualRetry:Lyte.attr("boolean",{default:!0}),cxPropUploadMultiple:Lyte.attr("boolean",{default:!1}),cxPropUploadMultipleCount:Lyte.attr("number",{default:1/0}),cxPropParallel:Lyte.attr("number",{default:2}),cxPropAutoUpload:Lyte.attr("boolean",{default:!0}),cxPropTriggerUpload:Lyte.attr("boolean",{default:!1}),cxPropPredefinedList:Lyte.attr("array",{default:[]}),cxPropListType:Lyte.attr("string",{default:"inner"}),cxPropSingleColumn:Lyte.attr("boolean",{default:!1}),cxPropDownloadKey:Lyte.attr("string",{default:""}),cxPropPreviewUrlKey:Lyte.attr("string",{default:""}),cxPropSourceKey:Lyte.attr("string",{default:""}),cxPropSortable:Lyte.attr("boolean",{default:!1}),cxPropEditable:Lyte.attr("boolean",{default:!1}),cxPropResetFileValue:Lyte.attr("boolean",{default:!1}),cxPropSizeSelector:Lyte.attr("string",{default:"size"}),cxPropDisableBrowseBtn:Lyte.attr("boolean",{default:!1}),cxPropErrorTooltipMsg:Lyte.attr("string",{default:""}),cxPropCustomMessage:Lyte.attr("boolean",{default:!1}),cxPropListErrorFiles:Lyte.attr("boolean",{default:!1}),cxPropFileUploadWrapperClass:Lyte.attr("string",{default:""}),cxPropUploadProgress:Lyte.attr("boolean",{default:!1}),cxPropProgressTooltip:Lyte.attr("string"),cxPropSortableDragClass:Lyte.attr("string",{default:""}),cxPropValidateByExt:Lyte.attr("boolean",{default:!1}),cxPropRenameDuplicateFile:Lyte.attr("boolean",{default:!1}),cxPropProgressStatusColours:Lyte.attr("object",{default:{list:"#338CF0"}}),cxPropMaxCountReachTooltip:Lyte.attr("string"),cxPropMaxSizeReachTooltip:Lyte.attr("string"),cxPropReset:Lyte.attr("boolean",{default:!1}),cxPropHideList:Lyte.attr("boolean",{default:!1}),cxPropAttachButtonYield:Lyte.attr("boolean",{default:!1})}},init:function(){if(this.data.cxPropMaxFilesCount&&!this.data.cxPropMaxCountReachTooltip&&this.setData("cxPropMaxCountReachTooltip",_cruxUtils.getI18n("crm.fileuploader.message.maxfilesexceeded",this.data.cxPropMaxFilesCount)),this.data.cxPropTotalFilesSize&&!this.data.cxPropMaxSizeReachTooltip){var e=this.data.cxPropTotalFilesSize.match(/[0-9]+/g)[0];this.setData("cxPropMaxSizeReachTooltip",_cruxUtils.getI18n("crm.fileuploader.message.totalfilesizeexceeded",e))}var t=this.data.cxPropSelectArea;t.primary_message=t.primary_message||_cruxUtils.getI18n("crm.fileupload.drag.drop.here"),t.supported_message=t.supported_message||_cruxUtils.getI18n("crm.fileupload.support.format"),t.browse_text=t.browse_text||_cruxUtils.getI18n("crm.label.browse.files"),t.icon_class=t.icon_class||"cxFileUploadHeadIcon",this.data.cxPropProgressTooltip||this.setData("cxPropProgressTooltip",_cruxUtils.getI18n("crm.fileupload.wait.msg")),"single_image"===this.data.cxPropListType&&(this.setData({cxPropMultiple:!1,cxPropMaxFilesCount:1,cxPropThumb:!0}),this.data.cxPropAcceptedTypes||this.setData("cxPropAcceptedTypes",".png,.jpg,.jpeg,.bmp,.gif")),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),this.data.cxPropAllowedTotalSize&&this.convertToBytes()},observePreList:function(){var e=this.data.cxPropPredefinedList;if(e.length&&!e[0].size){var t=this.data.cxPropSizeSelector;e.forEach((function(e){Lyte.objectUtils(e,"add","size",e[t])}))}if(this.data.cxPropSortable){var o=this;setTimeout((function(){o.bindSorting()}),0)}this.validate(!0)}.observes("cxPropPredefinedList").on("didConnect"),didDestroy:function(){delete this.lyteFileUpload},convertToBytes:function(){var e=this.data.cxPropAllowedTotalSize,t=e.substring(e.length-2),o=parseInt(e.substring(0,e.length-2)),i=["KB","MB","GB"].indexOf(t);i>-1&&(this.totalFilesSizeInBytes=o*Math.pow(1e3,i+1))},addFiles:function(e){this.lyteFileUpload.addFiles(e)},removeFiles:function(e){this.lyteFileUpload.removeUpload(e)},getAllFiles:function(){var e=this.data.cxPropPredefinedList?this.data.cxPropPredefinedList:[],t=this.data.fileList;t=t.filter((function(e){return"error"!==e.status}));var o=e.concat(t);if(this.data.cxPropSortable){for(var i=[],r=$L(".lyteFileUpdListFile",this.$node).map((function(e,t){return t.getAttribute("data-id")})),l=r.length,a=0;a<l;a++){var s=o.find((function(e){return e.id===r[a]}));s&&i.push(s)}o=i}return o},updateStatus:function(e,t){var o=this.data.fileList.find((function(t){return e===t.id}));o&&t&&Object.keys(t).length>=1&&(t.message&&(Lyte.objectUtils(o,"add","cxMessage",t.message),t.messageType&&Lyte.objectUtils(o,"add","cxMessageType",t.messageType)),t.type&&(Lyte.objectUtils(o,"add","cxStatus",t.type),"error"===t.type&&(Lyte.objectUtils(o,"add","status",t.type),this.data.cxPropListErrorFiles&&(o.lyteErrorMsg="dummy",o.cxErrorList=!0)),this.validate()))},virusScanner:function(e,t){var o=this.data.fileList.find((function(t){return e===t.id}));Lyte.objectUtils(o,"add","showScanner",t)},triggerUpload:function(){$L("lyte-fileupload",this.$node)[0].component.setData("ltPropTriggerUpload",!0)},validate:function(){var e,t=!1,o=this.data.cxPropMaxFilesCount,i=this.data.fileList,r=this.data.cxPropPredefinedList;if(-1!==i.findIndex((e=>"uploading"===e.cxStatus||"uploading"===e.status)))this.setData({cxPropDisableBrowseBtn:!0,cxPropUploadProgress:!0});else{if(this.setData("cxPropUploadProgress",!1),this.data.cxPropListErrorFiles&&(i=i.filter((e=>!e.cxErrorList&&!e.lyteErrorMsg))),o){var l=r.length;i.length+l>=o&&(t=!0,e=this.data.cxPropMaxCountReachTooltip)}if(this.data.cxPropTotalFilesSize&&!t){var a,s,n=this.data.cxPropSizeSelector;a=r.reduce((function(e,t){return e+Number(t[n])}),0),s=i.reduce((function(e,t){return e+Number(t[n])}),0),this.setData("currentTotalFileSize",this.fileSizeConvertAsPerUnit(a+s)),(t=a+s+200>=this.totalFilesSizeInBytes)&&(e=this.data.cxPropMaxSizeReachTooltip)}t?this.setData("cxPropErrorTooltipMsg",e):this.setData("cxPropErrorTooltipMsg",""),this.setData("cxPropDisableBrowseBtn",t)}},methods:{onImageEdit:function(e){this.executeMethod("onEditImage",e)},afterRenderUpload:function(e){this.lyteFileUpload=e},onBeforeAddFile:function(e,t,o){if(this.getMethods("onBeforeAdd"))return this.executeMethod("onBeforeAdd",o,this.$node)},onAddFile:function(e,t,o){if(this.getMethods("onAdd"))return this.executeMethod("onAdd",o,this.$node)},onBeforeRemoveFile:function(e,t){if(this.getMethods("onBeforeRemove"))return this.executeMethod("onBeforeRemove",e,t,this.$node)},onRemoveFile:function(e,t){if(this.validate(),this.getMethods("onRemove"))return this.executeMethod("onRemove",e,t,this.$node)},successFile:function(e,t,o){if(this.data.cxPropSortable&&this.bindSorting(),this.setData("cxPropUploadProgress",!1),this.validate(),this.getMethods("onSuccess"))return this.executeMethod("onSuccess",e,this.$node,o)},onFailureFile:function(e,t,o){if(this.setData("cxPropUploadProgress",!1),this.validate(),this.getMethods("onFailure"))return this.executeMethod("onFailure",e,this.$node,o)},onFileReject:function(e,t,o,i){this.getMethods("onReject")&&this.executeMethod("onReject",e,t,o,i)},onRequestSuccessFn:function(e,t){if(this.getMethods("onRequestSuccess"))return this.executeMethod("onRequestSuccess",e,t,this.$node)},onRequestFailureFn:function(e,t){if(this.getMethods("onRequestFailure"))return this.executeMethod("onRequestFailure",e,t,this.$node)},onFileSuccessFn:function(e,t){if(this.getMethods("onFileSuccess")){var o=$L.extend(!0,{},t),i=this.data.cxPropPreviewUrlKey,r=this.data.cxPropDownloadKey,l=this.data.cxPropSourceKey,a=this.executeMethod("onFileSuccess",e,o,this.$node);if(a)for(var s=Object.keys(a),n=s.length,p=0;p<n;p++)Lyte.objectUtils(t,"add",s[p],a[s[p]]);i&&Lyte.objectUtils(t,"add",i,t.src),r&&Lyte.objectUtils(t,"add",r,t.src),l&&Lyte.objectUtils(t,"add",l,t.src)}},onFileFailureFn:function(e,t){if(this.getMethods("onFileFailure"))return this.executeMethod("onFileFailure",e,t,this.$node)},onProgressFn:function(e,t,o){if(this.getMethods("onProgress"))return this.executeMethod("onProgress",e,t,o,this.$node)},onBeforeSendFn:function(e,t,o,i,r,l){if(this.setData("cxPropUploadProgress",!0),this.getMethods("onBeforeSend"))return this.executeMethod("onBeforeSend",e,t,o,this.$node,r,l)},onSendFn:function(e,t,o,i,r,l){this.getMethods("onSend")&&this.executeMethod("onSend",e,t,o,this.$node,r,l)},onDragEnterFn:function(e,t){if(this.getMethods("onDragEnter"))return this.executeMethod("onDragEnter",e,t)},onDragOverFn:function(e,t){if(this.getMethods("onDragOver"))return this.executeMethod("onDragOver",e,t)},onDragLeaveFn:function(e,t){if(this.getMethods("onDragLeave"))return this.executeMethod("onDragLeave",e,t)},onBeforeDropFn:function(e,t,o){if(this.getMethods("onBeforeDrop"))return this.executeMethod("onBeforeDrop",e,t,o)},onDropFn:function(e,t){if(this.getMethods("onDrop"))return this.executeMethod("onDrop",e,t)},onBeforePasteFn:function(e,t){if(this.getMethods("onBeforePasteFn"))return this.executeMethod("onBeforePasteFn",e,t)},onPasteFn:function(e,t){if(this.getMethods("onPaste"))return this.executeMethod("onPaste",e,t)},onBeforeOpenFn:function(e,t){if(this.getMethods("onBeforeOpen"))return this.executeMethod("onBeforeOpen",e,t)},onRetryFn:function(e,t){if(this.getMethods("onRetry"))return this.executeMethod("onRetry",e,t,this.$node)},onSelectFn:function(e,t){if(this.getMethods("onSelect"))return this.executeMethod("onSelect",e,t)},onBeforeManualRetryFn:function(e){if(this.getMethods("onBeforeManualRetry"))return this.executeMethod("onBeforeManualRetry",e)},onValidationEndFn:function(){if(this.getMethods("onValidationEnd"))return this.executeMethod("onValidationEnd")}},bindSorting:function(){var e,t=$L(".cruxFileUploadSortableDiv",this.$node),o=this;t[0]&&(t.sortable("destory"),t.sortable({containment:"body",appendTo:"body",selectedClass:"cxFileUpdListSortableSelectedElem",helper:function(t){var o=t.cloneNode(!0);return e=t,o},onDrag:function(){e.style.display="none"},onDragStart:function(e,t){var i=o.data.cxPropSortableDragClass;i&&e.classList.add(i),t.classList.add("cxFileUpListOnDrag")},onDrop:function(t,i,r,l,a,s){o.getMethods("onSortableDrop")&&o.executeMethod("onSortableDrop",l,a),l===a?t.remove():t.replaceWith(e),e.style.display="",s.classList.remove("cxFileUpListOnDrag")}}))}},{mixins:["crux-image-preview-util"]}),Lyte.Component.register("crux-file-upload-list",{_template:'<template tag-name="crux-file-upload-list"> <div class="cruxFileUploadSortableDiv"> <template is="for" items="{{cxPropPredefinedList}}" item="item" index="index"> <div class="lyteFileUpdListFile cxFileUpdListFile {{cxPropListClass}} imagePreviewSelector" data-zcqa="fileUploadListRow_{{index}}" tabindex="0" role="listitem" data-id="{{item.id}}" data-lytecbox-title="{{item.name}}" data-lytecbox-dlink="{{item[cxPropDownloadKey]}}" data-lytecbox-href="{{item[cxPropPreviewUrlKey]}}" onclick="{{action(\'imageClickHandling\',item)}}"> <template is="if" value="{{item[cxPropSourceKey]}}"><template case="true"><img class="cxFileUploadImageThumb" src="{{item[cxPropSourceKey]}}"></template><template case="false"><span class="cxFileUploadListFileTypeIconWrap cxFlexCenter"> <span class="cxFileUploadListSprite cxFileUploadIcon_allfile cxFileUploadIcon_{{item.fileType}}"></span> </span></template></template> <lyte-text class="cxFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <template is="if" value="{{item[cxPropSizeSelector]}}"><template case="true"><span class="cxFileUpdLiNameSeparator">-</span></template></template> <template is="if" value="{{item[cxPropSizeSelector]}}"><template case="true"><span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item[cxPropSizeSelector],cxPropFileUnit,cxPropDigits)}} )</span></template></template> <div class="cxFileUploadFileStatus cxFileUploadPredefinedFileStatus"> <template is="if" value="{{cxPropEditable}}"><template case="true"><span data-zcqa="openEditAndPreview_popup" lt-prop-title="{{cruxGetI18n(\'crm.label.edit\')}}" class="editIconHandler cxFileUploadActionIconWrap cxFileUploadEditIconWrap {{if(cxPropUploadProgress,\'cxDisableElement\',\'\')}}"> <span class="editIconHandler cxFileUploadEditIcon"></span> </span></template></template> <span data-value="{{item.id}}" role="button" data-zcqa="removeThisUploadedFile" lt-prop-title="{{cruxGetI18n(\'crm.label.delete\')}}" class="deleteBtn cxFileUploadActionIconWrap cxFileUploadRemoveIconWrap"> <span class="cxFileUploadRemoveIcon deleteBtn"></span> </span> </div> </div> </template> <template is="for" items="{{fileList}}" item="item" index="index"> <div class="lyteFileUpdListFile cxFileUpdListFile imagePreviewSelector {{if(ifEquals(item.status,\'error\'),\'cxFileStatusError\',\'\')}} {{concat(\'lyteFile\',lyteUiCapitalizeName(item.status))}} {{cxPropListClass}}" data-zcqa="fileUploadListRow_{{getSum(index,cxPropPredefinedList.length)}}" data-id="{{item.id}}" data-lytecbox-title="{{item.name}}" data-lytecbox-dlink="{{item[cxPropDownloadKey]}}" data-lytecbox-href="{{item[cxPropPreviewUrlKey]}}" onclick="{{action(\'imageClickHandling\',item)}}"> <template is="if" value="{{item.src}}"><template case="true"><img class="cxFileUploadImageThumb" src="{{item.src}}"></template><template case="false"><span class="cxFileUploadListFileTypeIconWrap cxFlexCenter"> <span class="cxFileUploadListSprite cxFileUploadIcon_allfile cxFileUploadIcon_{{item.fileType}}"></span> </span></template></template> <div lt-prop-title="{{item.name}}" class="cxFlexCenter cxOH"> <lyte-text class="cxFileUpdFileName" lt-prop-show="false" lt-prop-value="{{item.name}}"></lyte-text> </div> <template is="if" value="{{item[cxPropSizeSelector]}}"><template case="true"><span class="cxFileUpdLiNameSeparator">-</span></template></template> <template is="if" value="{{item[cxPropSizeSelector]}}"><template case="true"><span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item[cxPropSizeSelector],cxPropFileUnit,cxPropDigits)}} )</span></template></template> <div class="cxFileUploadFileStatus"> <template is="if" value="{{cruxAnd(cxPropCustomMessage,item.cxMessage)}}"><template case="true"><div class="cxFileUploadListCustMessage cxFileUploadList_{{item.cxMessageType}}"> <lyte-text lt-prop-value="{{item.cxMessage}}"></lyte-text> </div></template></template> <template is="if" value="{{expHandlers(item.status,\'==\',&quot;error&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(cxPropCustomMessage,\'!\')}}"><template case="true"> <span class="lyteFileUpdFailMsg cxFileUploadFailMsg"> <lyte-text lt-prop-value="{{cxPropFailureMessage}}"></lyte-text> </span> </template></template><template is="if" value="{{expHandlers(expHandlers(cxPropUploadMultiple,\'!\'),\'&amp;&amp;\',cxPropManualRetry)}}"><template case="true"> <span class="retryBtn cxFileUploadActionIconWrap cxFileUploadRetryIconWrap"> <span class="cxFileUploadRetryIcon lyteFileUpdRetryMsg"></span> </span> </template></template> </template></template> <template is="if" value="{{cruxOr(ifEquals(item.status,\'uploading\'),ifEquals(item.cxStatus,\'uploading\'))}}"><template case="true"> <template is="if" value="{{cruxAnd(negate(cxPropCustomMessage),ifEquals(item.percentage,100))}}"><template case="true"><div class="cxFileScanningTxt">Scanning for virus...</div></template></template> <div><lyte-progressbar lt-prop="{&quot;type&quot;:&quot;circle&quot;,&quot;stroke&quot;:&quot;3&quot;,&quot;radius&quot;:&quot;8&quot; , &quot;showPercentage&quot; : false ,&quot;progressProperty&quot; : {&quot;value&quot;: &quot;{{item.percentage}}&quot;}}" lt-prop-stroke="5" lt-prop-progress-fill-color="{{cxPropProgressStatusColours.list}}"> </lyte-progressbar></div> </template><template case="false"><template is="if" value="{{item.status}}"><template case="true"> <template is="if" value="{{if(expHandlers(expHandlers(cxPropEditable,\'&amp;&amp;\',expHandlers(cxPropUploadProgress,\'!\')),\'&amp;&amp;\',expHandlers(item.status,\'===\',\'success\')),true,false)}}"><template case="true"><span data-zcqa="openEditAndPreview_popup" lt-prop-title="{{cruxGetI18n(\'crm.label.edit\')}}" class="editIconHandler cxFileUploadActionIconWrap cxFileUploadEditIconWrap"> <span class="editIconHandler cxFileUploadEditIcon"></span> </span></template></template> <span data-value="{{item.id}}" data-zcqa="removeThisUploadedFile" lt-prop-title="{{cruxGetI18n(\'crm.label.delete\')}}" class="deleteBtn cxFileUploadActionIconWrap cxFileUploadRemoveIconWrap"> <span class="cxFileUploadRemoveIcon deleteBtn"></span> </span> <div class="{{if(ifEquals(item.status,\'error\'),\'cxFileUploadWarningIcon\',\'cxFileUploadSuccessIcon\')}}"></div> </template></template></template></template> </div> </div> </template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0,1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}},{type:"attr",position:[1,9,1]},{type:"if",position:[1,9,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[1,9,3]}]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0,1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"text",position:[0,1]}]}},default:{}},{type:"attr",position:[1,9,1]},{type:"if",position:[1,9,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"componentDynamic",position:[0,1]}]}},default:{}},{type:"attr",position:[1,9,3]},{type:"if",position:[1,9,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[2]},{type:"if",position:[2],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[1,9,5]},{type:"if",position:[1,9,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[3,0]},{type:"componentDynamic",position:[3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[5]}]}},default:{}}]}},default:{}}]}],_observedAttributes:["cxPropPredefinedList","fileList","cxPropListClass","cxPropDownloadKey","cxPropSourceKey","cxPropPreviewUrlKey","cxPropUploadMultiple","cxPropFileUnit","cxPropDigits","cxPropId","cxPropSortable","cxPropEditable","cxPropSizeSelector","cxPropFailureMessage","cxPropShowFailureMessage","cxPropManualRetry","cxPropCustomMessage","cxPropUploadProgress","cxPropProgressStatusColours"],data:function(){return{cxPropPredefinedList:Lyte.attr("array",{default:[]}),fileList:Lyte.attr("array",{default:[]}),cxPropListClass:Lyte.attr("string",{default:""}),cxPropDownloadKey:Lyte.attr("string",{default:""}),cxPropSourceKey:Lyte.attr("string",{default:""}),cxPropPreviewUrlKey:Lyte.attr("string",{default:""}),cxPropUploadMultiple:Lyte.attr("boolean",{default:!1}),cxPropFileUnit:Lyte.attr("string",{default:""}),cxPropDigits:Lyte.attr("number",{default:1}),cxPropId:Lyte.attr("string",{default:""}),cxPropSortable:Lyte.attr("boolean",{default:!1}),cxPropEditable:Lyte.attr("boolean",{default:!1}),cxPropSizeSelector:Lyte.attr("string",{default:"size"}),cxPropFailureMessage:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.fileupload.attach.fail")}),cxPropShowFailureMessage:Lyte.attr("boolean",{default:!0}),cxPropManualRetry:Lyte.attr("boolean",{default:!0}),cxPropCustomMessage:Lyte.attr("boolean",{default:!1}),cxPropUploadProgress:Lyte.attr("boolean",{default:!1}),cxPropProgressStatusColours:Lyte.attr("object",{default:{list:"#338CF0"}})}},didConnect:function(){this.data.cxPropSortable&&this.$node.closest("crux-file-upload").component.bindSorting()},actions:{imageClickHandling:function(e){event.stopPropagation();var t=event.target.classList;if(t.contains("editIconHandler"))this.executeMethod("onEditImage",e);else if(t.contains("deleteBtn"))this.$node._callee.component.lyteFileUpload.removeUpload(e.id);else if(t.contains("cxFileUploadRetryIconWrap")||t.contains("cxFileUploadRetryIcon")){if(Lyte.objectUtils(e,"delete","status"),this.getMethods("onBeforeManualRetry"))var o=this.executeMethod("onBeforeManualRetry",e);!1!==o&&(delete e.cxErrorList,this.$node._callee.component.lyteFileUpload.upload(e.id))}}}},{mixins:["crux-image-preview-util"]});
