Lyte.Mixin.register("crux-filter-utils",{_cruxReplace:Lyte.Component.registeredHelpers.cruxReplace,specialfield:function(e,t,i,a,l,o,r){var s,n,d,p,c={UMT:{field:{api_name:"User_Modified_Time",id:""},comparator:null,value:null},SMT:{field:{api_name:"System_Modified_Time",id:""},comparator:null,value:null},URAT:{field:{api_name:"User_Related_Activity_Time",id:""},comparator:null,value:null},SRAT:{field:{api_name:"System_Related_Activity_Time",id:""},comparator:null,value:null},LAT:{field:{api_name:"Last_Activity_Time",id:""},comparator:null,value:null}};if("cxFilter_TouchedRecords"==e.api_name)"-1"!=t.indexOf("User")&&(c.UMT.comparator=c.URAT.comparator=a,c.UMT.value=c.URAT.value=i,n=this.construct_group(c.UMT,c.URAT,"OR"),s=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")?(c.SMT.comparator=c.SRAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.SMT.value=c.SRAT.value=i,n=JSON.parse(JSON.stringify(c.SMT)),d=JSON.parse(JSON.stringify(c.SRAT)),"greater_than"==c.SMT.comparator&&(c.SMT.comparator=c.SRAT.comparator="equal",c.SMT.value=c.SRAT.value="${EMPTY}",n=this.construct_group(n,c.SMT,"OR"),d=this.construct_group(d,c.SRAT,"OR")),p=this.construct_group(n,d,"AND"),s=this.construct_group(s,p,"AND")):(c.UMT.comparator="not_equal",c.UMT.value="${EMPTY}",c.URAT.comparator="not_equal",c.URAT.value="${EMPTY}",p=this.construct_group(c.UMT,c.URAT,"OR"),s=this.construct_group(s,p,"AND"))),"-1"!=t.indexOf("System")&&(c.SMT.comparator=c.SRAT.comparator=a,c.SMT.value=c.SRAT.value=i,d=this.construct_group(c.SMT,c.SRAT,"OR"),s=JSON.parse(JSON.stringify(d)),"-1"!=t.indexOf("Only")?(c.UMT.comparator=c.URAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.UMT.value=c.URAT.value=i,n=JSON.parse(JSON.stringify(c.UMT)),d=JSON.parse(JSON.stringify(c.URAT)),"greater_than"==c.UMT.comparator&&(c.UMT.comparator=c.URAT.comparator="equal",c.UMT.value=c.URAT.value="${EMPTY}",n=this.construct_group(n,c.UMT,"OR"),d=this.construct_group(d,c.URAT,"OR")),p=this.construct_group(n,d,"AND"),s=this.construct_group(s,p,"AND")):(c.SMT.comparator="not_equal",c.SMT.value="${EMPTY}",c.SRAT.comparator="not_equal",c.SRAT.value="${EMPTY}",p=this.construct_group(c.SMT,c.SRAT,"OR"),s=this.construct_group(s,p,"AND"))),"-1"!=t.indexOf("And")&&(s=this.construct_group(n,d,"AND")),-1!=t.indexOf("Or")&&(s=this.construct_group(n,d,"OR"));else if("cxFilter_UnTouchedRecords"==e.api_name){if("-1"!=t.indexOf("User")){c.UMT.comparator=c.URAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.UMT.value=c.URAT.value=i;var u=JSON.parse(JSON.stringify(c));c.UMT.comparator=c.URAT.comparator="equal",c.UMT.value=c.URAT.value="${EMPTY}",p=this.construct_group(u.UMT,c.UMT,"OR"),n=this.construct_group(u.URAT,c.URAT,"OR"),s=n=this.construct_group(p,n,"AND"),"-1"!=t.indexOf("Only")&&(c.SMT.comparator=c.SRAT.comparator=a,c.SMT.value=c.SRAT.value=i,s=this.construct_group(c.SMT,c.SRAT,"OR"),s=this.construct_group(n,s,"AND"))}if("-1"!=t.indexOf("System")){c.SMT.comparator=c.SRAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.SMT.value=c.SRAT.value=i;u=JSON.parse(JSON.stringify(c));c.SMT.comparator=c.SRAT.comparator="equal",c.SMT.value=c.SRAT.value="${EMPTY}",p=this.construct_group(u.SMT,c.SMT,"OR"),d=this.construct_group(u.SRAT,c.SRAT,"OR"),s=d=this.construct_group(p,d,"AND"),"-1"!=t.indexOf("Only")&&(c.UMT.comparator=c.URAT.comparator=a,c.UMT.value=c.URAT.value=i,s=this.construct_group(c.UMT,c.URAT,"OR"),s=this.construct_group(d,s,"AND"))}"-1"!=t.indexOf("Or")&&(s=this.construct_group(n,d,"OR")),"-1"!=t.indexOf("And")&&(s=this.construct_group(n,d,"AND"))}else if("cxFilter_RecordAction"==e.api_name){l=l;if("-1"!=t.indexOf("User"))if("modified"==l.toLowerCase())c.UMT.comparator=a,c.UMT.value=i,n=JSON.parse(JSON.stringify(c.UMT)),s=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")&&(c.SMT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.SMT.value=i,p=JSON.parse(JSON.stringify(c.SMT)),"greater_than"==c.SMT.comparator&&(c.SMT.comparator="equal",c.SMT.value="${EMPTY}",p=this.construct_group(p,c.SMT,"OR")),s=this.construct_group(s,p,"AND"));else{c.UMT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.UMT.value=i;u=JSON.parse(JSON.stringify(c));c.UMT.comparator="equal",c.UMT.value="${EMPTY}",n=this.construct_group(u.UMT,c.UMT,"OR"),s=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")&&(c.SMT.comparator=a,c.SMT.value=i,s=this.construct_group(s,c.SMT,"AND"))}if("-1"!=t.indexOf("System"))if(l&&"modified"==l.toLowerCase())c.SMT.comparator=a,c.SMT.value=i,d=JSON.parse(JSON.stringify(c.SMT)),s=JSON.parse(JSON.stringify(d)),"-1"!=t.indexOf("Only")&&(c.UMT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.UMT.value=i,p=JSON.parse(JSON.stringify(c.UMT)),"greater_than"==c.UMT.comparator&&(c.UMT.comparator="equal",c.UMT.value="${EMPTY}",p=this.construct_group(p,c.UMT,"OR")),s=this.construct_group(s,p,"AND"));else{c.SMT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.SMT.value=i;u=JSON.parse(JSON.stringify(c));c.SMT.comparator="equal",c.SMT.value="${EMPTY}",s=d=this.construct_group(u.SMT,c.SMT,"OR"),"-1"!=t.indexOf("Only")&&(c.UMT.comparator=a,c.UMT.value=i,s=this.construct_group(d,c.UMT,"AND"))}"-1"!=t.indexOf("Or")&&(s=this.construct_group(n,d,"OR")),"-1"!=t.indexOf("And")&&(s=this.construct_group(n,d,"AND"))}else if("cxFilter_RelatedRecordsAction"==e.api_name){l=l;if("-1"!=t.indexOf("User"))if("done"==l.toLowerCase()||"modified"==l.toLowerCase())c.URAT.comparator=a,c.URAT.value=i,n=JSON.parse(JSON.stringify(c.URAT)),s=JSON.parse(JSON.stringify(n)),"-1"!=t.indexOf("Only")&&(c.SRAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.SRAT.value=i,n=JSON.parse(JSON.stringify(c.SRAT)),"greater_than"==c.SRAT.comparator&&(c.SRAT.comparator="equal",c.SRAT.value="${EMPTY}",n=this.construct_group(n,c.SRAT,"OR")),s=this.construct_group(s,n,"AND"));else{c.URAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.URAT.value=i;u=JSON.parse(JSON.stringify(c));c.URAT.comparator="equal",c.URAT.value="${EMPTY}",s=n=this.construct_group(u.URAT,c.URAT,"OR"),"-1"!=t.indexOf("Only")&&(c.SRAT.comparator=a,c.SRAT.value=i,s=this.construct_group(n,c.SRAT,"AND"))}if("-1"!=t.indexOf("System"))if("done"==l.toLowerCase()||"modified"==l.toLowerCase())c.SRAT.comparator=a,c.SRAT.value=i,d=JSON.parse(JSON.stringify(c.SRAT)),s=JSON.parse(JSON.stringify(d)),"-1"!=t.indexOf("Only")&&(c.URAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.URAT.value=i,d=JSON.parse(JSON.stringify(c.URAT)),"greater_than"==c.URAT.comparator&&(c.URAT.comparator="equal",c.URAT.value="${EMPTY}",d=this.construct_group(d,c.URAT,"OR")),s=this.construct_group(s,d,"AND"));else{c.SRAT.comparator="equal"==a?"not_equal":"less_than"==a||"less_equal"==a?"greater_than":"",c.SRAT.value=i;u=JSON.parse(JSON.stringify(c));c.SRAT.comparator="equal",c.SRAT.value="${EMPTY}",s=d=this.construct_group(u.SRAT,c.SRAT,"OR"),"-1"!=t.indexOf("Only")&&(c.URAT.comparator=a,c.URAT.value=i,s=this.construct_group(d,c.URAT,"AND"))}"-1"!=t.indexOf("Or")&&(s=this.construct_group(n,d,"OR")),"-1"!=t.indexOf("And")&&(s=this.construct_group(n,d,"AND"))}else if("cxFilter_Email_Status"==e.api_name){c={LAT:{field:{api_name:"LAST_ACTION_TIME",id:""},comparator:null,value:null},LST:{field:{api_name:"LAST_SENT_TIME",id:""},comparator:null,value:null},GEN_FORMAT:{field:{api_name:"LAST_ACTION",id:""},comparator:null,value:null}};var m,_=t,f=!0;if("sent"==_?(m=l,c.LST.comparator=a,c.LST.value=i,f="any_of_the_above"!=m,n=JSON.parse(JSON.stringify(c.LST)),_=m):"not_sent"==_?(c.LST.comparator="${EMPTY}"==i?a:this.negative_Comparator(a),c.LST.value=i,n=JSON.parse(JSON.stringify(c.LST)),"greater_than"!=c.LST.comparator&&"greater_equal"!=c.LST.comparator||(c.LST.comparator,c.LST.comparator="equal",c.LST.value="${EMPTY}",n=this.construct_group(n,c.LST,"OR"))):(c.LAT.value=i,("not_opened"==_||"not_received"==_)&!m?(c.LAT.comparator=this.negative_Comparator(a),n=JSON.parse(JSON.stringify(c.LAT)),"greater_than"!=c.LAT.comparator&&"greater_equal"!=c.LAT.comparator||(c.LAT.comparator,c.LAT.comparator="equal",c.LAT.value="${EMPTY}",n=this.construct_group(n,c.LAT,"OR"))):(c.LAT.comparator=a,n=JSON.parse(JSON.stringify(c.LAT)))),f){c.GEN_FORMAT.comparator="equal",c.GEN_FORMAT.value="${EMPTY}"==i?i:{replied:["Replied"],responded:["Responded"],clicked:["Clicked"],opened:["Opened","Clicked","Responded"],not_opened:["Opened","Clicked","Responded","Bounced"],bounced:["Bounced"],opened_and_not_replied:["Opened","Clicked"],not_sent:["Opened","Clicked","Sent","Replied","Bounced","Responded"],received:["Received","Responded"],not_received:["Received","Responded"]}[_];var y="AND";"not_opened"!=_&&"not_sent"!=_&&"not_received"!=_||(c.GEN_FORMAT.comparator="${EMPTY}"==i?"equal":"not_equal",y="not_opened"==_&&m?y:"OR",y="${EMPTY}"==c.GEN_FORMAT.value?"AND":y),s=this.construct_group(n,c.GEN_FORMAT,y),"not_opened"==_&&(c.LST.comparator="not_equal",c.LST.value="${EMPTY}",s=this.construct_group(s,c.LST,"AND"))}else s=this.construct_group(n,null)}else if("cxFilter_Activities"==e.api_name){c={TASKS:[{status:{field:{api_name:"Status",id:""},comparator:"not_equal",value:"${PICKLIST."+(e=>{if(!e)return"Completed";let t=e.pick_list_values.filter((e=>"Completed"==e.actual_value))[0];return t?t.display_value:"Completed"})(moduleRecordMapping.Tasks.fields?moduleRecordMapping.Tasks.fields.filter((e=>"STATUS"==e.column_name))[0]:void 0)+"}"}},{Due_Date:{field:{api_name:"Due_Date",id:""},comparator:"equal",value:"${YESTERDAYMINUS}"}}],CALLS:[{status:{field:{api_name:"Call_Status",id:""},comparator:"equal",value:"Overdue"}},{Call_Start_Date_Time:{field:{api_name:"Call_Start_Time",id:""},comparator:"less_than",value:"${CURRENTTIME}"}}],EVENTS:{field:{api_name:"End_DateTime",id:""},comparator:null,value:"${TODAY}"}};var h={field:{api_name:"Activity_Type"},comparator:"equal",value:""};if((S={}).include_objects=!0,"Tasks"!=t&&"Activities"!=t||(n=this.construct_group(c.TASKS[0].status,c.TASKS[1].Due_Date,"AND"),h.value="Tasks",s=n=this.construct_group(n,h,"AND")),"Calls"!=t&&"Activities"!=t||(d=this.construct_group(c.CALLS[0].status,c.CALLS[1].Call_Start_Date_Time,"AND"),h.value="Calls",s=d=this.construct_group(d,h,"AND")),"Activities"==t)s=this.construct_group(n,d,"OR");else if("Without_Open_Activity"==t){S.include_objects=!1,c.CALLS[0].status.comparator="equal",c.CALLS[0].status.value=["scheduled","overdue"],h.value="Calls";var x=this.construct_group(c.CALLS[0].status,h,"AND");h.value="Tasks";var g=this.construct_group(c.TASKS[0].status,h,"AND");n=this.construct_group(x,g,"OR"),c.EVENTS.comparator="greater_equal",c.EVENTS.value="${CURRENTTIME}",h.value="Events";var v=this.construct_group(c.EVENTS,h,"AND");s=this.construct_group(n,v,"OR")}else if("Activity_Due"==t){c.TASKS[1].Due_Date.comparator=a,c.TASKS[1].Due_Date.value=i,n=this.construct_group(c.TASKS[0].status,c.TASKS[1].Due_Date,"AND"),h.value="Tasks",n=this.construct_group(n,h,"AND"),c.CALLS[0].status.comparator="equal",c.CALLS[0].status.value=["Scheduled","Overdue"],c.CALLS[1].Call_Start_Date_Time.comparator=a,c.CALLS[1].Call_Start_Date_Time.value=i,d=this.construct_group(c.CALLS[0].status,c.CALLS[1].Call_Start_Date_Time,"AND"),h.value="Calls",d=this.construct_group(d,h,"AND"),p=this.construct_group(n,d,"OR"),"${TODAYANDOVERDUE}"==i&&(a="equal",i="${TODAY}"),c.EVENTS.comparator=a,c.EVENTS.value=i,h.value="Events";v=this.construct_group(c.EVENTS,h,"AND");s=this.construct_group(p,v,"OR")}else if("Without_Any_Activity"==t)S.include_objects=!1,s={field:{api_name:"Modified_Time",id:""},comparator:a,value:i};else if("Activity_Done"==t){p={field:{api_name:"Closed_Time",id:""},comparator:a,value:i},h.value="Tasks",p=this.construct_group(p,h,"AND"),c.CALLS[0].status.comparator="not_equal",c.CALLS[0].status.value=["Scheduled","Overdue"],c.CALLS[1].Call_Start_Date_Time.comparator=a,c.CALLS[1].Call_Start_Date_Time.value=i,n=this.construct_group(c.CALLS[0].status,c.CALLS[1].Call_Start_Date_Time,"AND"),h.value="Calls",n=this.construct_group(n,h,"AND"),p=this.construct_group(p,n,"OR"),c.EVENTS.comparator=a,c.EVENTS.value=i,h.value="Events";v=this.construct_group(c.EVENTS,h,"AND");s=this.construct_group(p,v,"OR")}S.relation={},S.relation.relation_id=this.moduleRecordMapping.Activities.id,S.relation.api_name=this.moduleRecordMapping.Activities.api_name,S.criteria=s,s=S}else if("cxFilter_Notes"==e.api_name)(S={}).include_objects=!0,"Without_Any_Notes"==t&&(S.include_objects=!1),S.relation={},S.relation.relation_id=this.moduleRecordMapping.Notes.id,S.relation.api_name=this.moduleRecordMapping.Notes.api_name,S.criteria={field:{api_name:"Created_Time",id:""},comparator:a,value:i},s=S;else if("cxFilter_Deals"==e.api_name)c=[{field:{api_name:"Stage",id:""},comparator:"equal",value:"${OPEN}"},{field:{api_name:"Created_Time",id:""},comparator:"",value:""}],(S={}).include_objects=!0,"Without_Open_Deal"==t&&(S.include_objects=!1),"With_Open_Deal"==t||"Without_Open_Deal"==t?(c[1].comparator=a,c[1].value=i,s=this.construct_group(c[0],c[1],"AND")):(S.include_objects=!1,c[1].field.api_name="Deal_Name",c[1].comparator="not_equal",c[1].value="${EMPTY}",s=c[1]),S.relation={},S.relation.relation_id=this.moduleRecordMapping.Potentials.id,S.relation.api_name=this.moduleRecordMapping.Potentials.api_name,S.criteria=s,s=S;else if("cxFilter_Contacts"==e.api_name)(S={}).include_objects=!0,"Without_Any_Contact"==t&&(S.include_objects=!1),S.relation={},S.relation.relation_id=this.moduleRecordMapping.Contacts.id,S.relation.api_name=this.moduleRecordMapping.Contacts.api_name,S.criteria={field:{api_name:"Full_Name",id:""},comparator:"not_equal",value:"${EMPTY}"},s=S;else if("cxFilter_Chats"==e.api_name){(S={include_objects:!0,relation:{type:"related_list",relation:{api_name:"Actions_Performed"}}}).relation.relation_id=this.moduleRecordMapping.Visits.id,S.relation.api_name="Visits_Zoho_Livedesk",n={field:{api_name:"Action_Type",id:""},comparator:"equal",value:t="Attended"==(t="Missed"==t?"Missed Chat":t)?"Chat":t},d={field:{api_name:"Action_Performed_Time",id:""},comparator:a,value:i},s=this.construct_group(n,d,"AND"),S.criteria=s,s=S}else if("cxFilter_Not_Replied_Messages"==e.api_name||"cxFilter_Replied_Messages"==e.api_name){var b={field:{api_name:"message_time__s",id:""},comparator:a,value:i},D={field:{api_name:"conversation_status__s",id:""}};switch(e.api_name){case"cxFilter_Not_Replied_Messages":D.comparator="not_equal",D.value="Replied";break;case"cxFilter_Replied_Messages":D.comparator="equal",D.value="Replied"}s=this.construct_group(b,D,"AND")}else if("cxFilter_Email_Sentiment"==e.api_name){var S,F=this.data&&"Accounts"===this.data.cxPropModule?"Email_Sentiment.":"",C={field:{api_name:F+"Received_Date",id:""},comparator:a,value:i},T=l,A="greater_than";i=0;if(n={field:{}},d={field:{}},"For_The_Last_Email"==T)i="PositiveOrNegative"==t?["Positive","Negative"]:t,n.field.api_name=F+"Last_Email_Sentiment",n.comparator="equal",n.value=i,p=JSON.parse(JSON.stringify(n));else{if("count"==T||"percentage"==T){A=r||$("#DDV_"+T)[0].ltProp("Selected");if(o)i=o;else{var L=$("#"+T+"_crux_comp")[0];L.component.validate(),i=L.component.getValue()}}"Positive"!=t&&"PositiveAndNegative"!=t&&"PositiveOrNegative"!=t&&"PositiveOnly"!=t||(T=""==T?"count":T,n.field.api_name=F+"Positive",n.comparator=A,n.value="${"+T.toUpperCase()+"|"+i+"}",p=JSON.parse(JSON.stringify(n))),"Negative"!=t&&"PositiveAndNegative"!=t&&"PositiveOrNegative"!=t&&"NegativeOnly"!=t||(T=""==T?"count":T,d.field.api_name=F+"Negative",d.comparator=A,d.value="${"+T.toUpperCase()+"|"+i+"}",p=JSON.parse(JSON.stringify(d))),"PositiveAndNegative"==t?p=this.construct_group(n,d,"AND"):"PositiveOrNegative"==t?p=this.construct_group(n,d,"OR"):"PositiveOnly"==t?(d.field.api_name=F+"Negative",d.comparator="equal",d.value="${COUNT|0}",p=this.construct_group(p,d,"AND")):"NegativeOnly"==t?(d.field.api_name=F+"Positive",d.comparator="equal",d.value="${COUNT|0}",p=this.construct_group(p,d,"AND")):"Neutral"==t&&(T=""==T?"count":T,n.field.api_name=F+"Neutral",n.comparator=A,n.value="${"+T.toUpperCase()+"|"+i+"}",p=JSON.parse(JSON.stringify(n)))}s=s=this.construct_group(C,p,"AND"),(S={include_objects:!0,relation:{}}).relation.api_name=F?"Contacts":"Email_Sentiment",S.criteria=s,s=S}return s},getEmailBlockedCriteria:function(e){let t="Email"===e?$L("input[name=option_"+e+"]:checked").val().split("_")[2]:$L("input[name=option_"+e+"]:checked").val().split("_")[3],i="Email"===e?"EMAIL":"ADDN_EMAIL";if("both"===t)value="${BLOCKED}";else{let e=$L("#sub_option_cxFilter_"+i+"_"+t)[0].component.data.selectedValues,a=e.byDropDownValue,l=e.firstDropDownValue,o=e.secondDropDownValue;if(l.includes("Age in")||l.includes("Due in")){l=l.replace("Days",o);let e=$L("#id_cxFilter_"+i+"_"+t)[0].ltProp("value");if(!e)return this.showFilterAlert("Enter a valid number",$L("#id_cxFilter_"+i+"_"+t)[0].component),{isValdationFailure:!0};l=l.replaceAll(" ",""),l=l.toUpperCase(),l="less_than {"+l+"}+"+e}else if("less_than"===l||"greater_than"===l){let e=$L("#cxFilter_"+i+"_"+t+"_crux_comp")[0].component.getValue();if(!e)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+i+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};e=this.getISODateTime(e,this.datePattern),l=l.toUpperCase(),l=l+" "+e}else if("equal"===l){let e=$L("#cxFilter_"+i+"_"+t+"_crux_comp")[0].component.getValue();if(!e)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+i+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};let a=this.getISODateTime(e,this.datePattern),o=this.getISODateTime(e,this.datePattern,"end");l="between",l=l+" "+a+" "+o}else if("between"===l){let e=$L("#cxFilter_"+i+"_"+t+"_crux_comp")[0].component.getValue();if(!e)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+i+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};e=this.getISODateTime(e,this.datePattern);let a=$L("#between_cxFilter_"+i+"_"+t+"_crux_comp")[0].component.getValue();if(!a)return this.showFilterAlert("Enter a valid date",$L("#between_cxFilter_"+i+"_"+t+"_crux_comp")[0].component),{isValdationFailure:!0};a=this.getISODateTime(a,this.datePattern,"end"),l=l+" "+e+" "+a}else l=comparator+" "+l;value="${BLOCKED_"+a.toUpperCase()+"} "+l}return value},setEmailBlockedCriteria:function(e,t){let i=t.split(" "),a=i[0],l="Email"==e?"EMAIL":"ADDN_EMAIL";if("${BLOCKED}"===a)$L("#sub_field_cxFilter_"+l+"_both")[0].ltProp("checked",!0);else{i[0]=i[0].replace("${BLOCKED_",""),i[0]=i[0].replace("}","");let e=i[0].split("_")[0].toLowerCase();$L("#sub_field_cxFilter_"+l+"_"+e)[0].ltProp("checked",!0);let t={};if(a=a.replace("${BLOCKED_","").replace("}","").toLowerCase(),t.byDropDownValue=a,i[2].endsWith("}"))t.firstDropDownValue=i[2],$L("#sub_option_cxFilter_"+l+"_"+e)[0].component.setData("selectedValues",t),$L("#sub_option_cxFilter_"+l+"_"+e)[0].component.methods.triggerGetDropDownVal(t.firstDropDownValue,$L("#sub_option_cxFilter_"+l+"_"+e)[0].component),$L("#DDV_cxFilter_"+l+"_"+e)[0].ltProp("selected",t.firstDropDownValue);else if(i[2].includes("+")){let a=i[2].split("+");a[0]=a[0].replace("{","").replace("}",""),t.secondDropDownValue=a[0].endsWith("DAYS")?"DAYS":a[0].endsWith("MONTHS")?"MONTHS":"WEEKS",a[0].replace(t.secondDropDownValue,"DAYS"),t.firstDropDownValue=a[0].includes("AGEINDAYS")||a[0].includes("AGEINMONTHS")||a[0].includes("AGEINWEEKS")?"Age in Days":"Due in Days",$L("#sub_option_cxFilter_"+l+"_"+e)[0].component.setData("selectedValues",t),$L("#sub_option_cxFilter_"+l+"_"+e)[0].component.methods.triggerGetDropDownVal(t.firstDropDownValue,$L("#sub_option_cxFilter_"+l+"_"+e)[0].component),$L("#DDV_cxFilter_"+l+"_"+e)[0].ltProp("selected",t.firstDropDownValue),$L("#id_cxFilter_"+l+"_"+e)[0].ltProp("value",a[1])}else t.firstDropDownValue=i[1].trim().toLowerCase(),i[2].substr(0,i[2].indexOf("T"))===i[3].substr(0,i[3].indexOf("T"))&&(t.firstDropDownValue="equal"),$L("#sub_option_cxFilter_"+l+"_"+e)[0].component.setData("selectedValues",t),$L("#sub_option_cxFilter_"+l+"_"+e)[0].component.methods.triggerGetDropDownVal(t.firstDropDownValue,$L("#sub_option_cxFilter_"+l+"_"+e)[0].component),$L("#DDV_cxFilter_"+l+"_"+e)[0].ltProp("selected",t.firstDropDownValue),$L("#cxFilter_"+l+"_"+e+"_crux_comp").attr("value",Utils.getDateInGivenPattern($L.moment(i[2]).toDate(),Crm.userDetails.DATE_PATTERN.toLowerCase())),"equal"!==t.firstDropDownValue&&$L("#between_cxFilter_"+l+"_"+e+"_crux_comp").attr("value",Utils.getDateInGivenPattern($L.moment(i[3]).toDate(),Crm.userDetails.DATE_PATTERN.toLowerCase()))}$L("crux-smart-filter")[0].component.setData("blockedCriteria."+e,"");let o="Email"===e,r=$L("#listViewModuleChange"),s=r.length&&r[0].ltProp?r[0].ltProp("selected"):"list";Crm.userDetails.EMAIL_BOUNCE_MANAGEMENT&&("list"!==s&&"table"!==s&&"card"!==s&&"kanban"!==s||!o?"list"!==s&&"table"!==s&&"card"!==s&&"kanban"!==s||o?"canvas"===s&&o?($L(".emailUnblocking.Email").removeClass("hide"),$L(".emailUnblocking.EMAIL").removeClass("hide")):"canvas"!==s||o||($L(".emailUnblocking.Secondary_Email").removeClass("hide"),$L(".emailUnblocking.ADDN_EMAIL").removeClass("hide")):$L(".emailUnblocking.Secondary_Email").removeClass("hide"):$L(".emailUnblocking.Email").removeClass("hide"))},construct_group:function(e,t,i){var a=[];return null==e||0==e.length?t:null==t||0==t.length?e:(Lyte.arrayUtils(a,"push",JSON.parse(JSON.stringify(e))),Lyte.arrayUtils(a,"push",JSON.parse(JSON.stringify(t))),{group_operator:i,group:a})},sortArray:function(e,t){return e.sort((function(e,i){if(!e[t])return 0;var a=e[t].toUpperCase(),l=i[t].toUpperCase();return a<l?-1:a>l?1:0})),e},getISODateTime:function(e,t,i="start",a="datetime"){return e?(t=t||"",e=this.convertUsrtoDefaultDatePattern(e,t),"start"!=i&&e.setHours(23,59,59,999),e.setTime(e.getTime()-6e4*e.getTimezoneOffset()),e=e.toISOString().split(/\./)[0],"date"==a?e=/^(.*)T/.exec(e,t)[1]:e+(this.getData("cxPropTimeZone")?this.getData("cxPropTimeZone"):"")):""},getMilliSecondsfromDuration:function(e,t){return e&&t?e*this.durationClass(t):""},getDurationfromMilliSeconds:function(e,t){return t?e/this.durationClass(t):this.getTimeValue(e)},durationClass:function(e){const t=36e5,i=24*t;switch(e){case"SECONDS":return 1e3;case"MINUTES":return 6e4;case"HOURS":return t;case"DAYS":return i;case"WEEKS":return 6048e5;case"MONTHS":return 2592e6;case"YEARS":return 31536e6;default:return 1}},getTimeValue:function(e){var t={value:0,durationType:""};const i=this.durationClass("SECONDS"),a=this.durationClass("MINUTES"),l=this.durationClass("HOURS"),o=this.durationClass("DAYS"),r=this.durationClass("WEEKS"),s=this.durationClass("MONTHS"),n=this.durationClass("YEARS");return e>=n&&e%n==0?(t.value=e/n,t.durationType="YEARS"):e>=s&&e%s==0?(t.value=e/s,t.durationType="MONTHS"):e>=r&&e%r==0?(t.value=e/r,t.durationType="WEEKS"):e>=o&&e%o==0?(t.value=e/o,t.durationType="DAYS"):e>=l&&e%l==0?(t.value=e/l,t.durationType="HOURS"):e>=a&&e%a==0?(t.value=e/a,t.durationType="MINUTES"):(t.value=e/i,t.durationType="SECONDS"),t},getMulSelLookUpField:function(e,t){for(var i=this.moduleRecordMapping[e].fields,a=i.length,l=0;l<a;l++)if(("multiselectlookup"==i[l].data_type||"multiuserlookup"==i[l].data_type)&&i[l][i[l].data_type].api_name==t.api_name)return i[l]},getRelationDetails:function(e,t){var i=this.moduleRecordMapping[e].related_lists;if(i)for(var a=i.length,l=0;l<a;l++)if(i[l].api_name==t)return i[l]},isVisitsField:function(e){var t={LASTVISITEDTIME:"Last_Visited_Time",AVERAGETIMESPENT:"Average_Time_Spent_Minutes",DAYSVISITED:"Days_Visited",FIRSTVISITEDURL:"First_Visited_URL",FIRSTVISITEDTIME:"First_Visited_Time",NUMBEROFCHATS:"Number_Of_Chats",REFERRER:"Referrer",VISITORSCORE:"Visitor_Score",ATTENDEDBY:"Attended_By",BROWSER:"Browser",OPERATINGSYSTEM:"Operating_System",PORTAL_NAME:"Portal_Name",SEARCHENGINE:"Search_Engine",TIMESPENT:"Time_Spent",VISITEDTIME:"Visited_Time"};return"AVERAGETIMESPENT"==e||"DAYSVISITED"==e||"FIRSTVISITEDURL"==e||"FIRSTVISITEDTIME"==e||"LASTVISITEDTIME"==e||"NUMBEROFCHATS"==e||"REFERRER"==e||"VISITORSCORE"==e?{isVisits:!0,fieldtype:"normalField",api_name:t[e]}:("ATTENDEDBY"==e||"BROWSER"==e||"OPERATINGSYSTEM"==e||"PORTAL_NAME"==e||"SEARCHENGINE"==e||"TIMESPENT"==e||"VISITEDTIME"==e)&&{isVisits:!0,fieldtype:"crossField",api_name:t[e]}},negative_Comparator:function(e){var t={equal:"not_equal",not_equal:"equal",less_than:"greater_than",less_equal:"greater_equal",greater_than:"less_than",greater_equal:"less_equal",between:"not_between",not_between:"between"};return t[e]?t[e]:e},checkLimitValues:function(e,t){return!(-1!=["text","textarea","phone","email","mobile","website"].type(t)&&e.constructor==Array&&e.length>50)||(this.showFilterAlert(_cruxUtils.getI18n("crm.alert.maximum.text.values.contains",50)),!1)},isZBCustomModule:function(e){return["CustomModule5001","CustomModule5002","CustomModule5003","CustomModule5004","CustomModule5005"].indexOf(e)>=0},removeValue:function(e,t,i){for(var a=0;e[a];a++)-1!=i.indexOf(e[a][t])&&(e.splice(a,1),a-=1)},updateCrossFilter:function(e,t,i){for(var a=0,l=e.length,o=!1;a<l;a++)if(e[a].relation&&"related_list"!==e[a].relation.type&&(e[a].relation.api_name===t||e[a].relation.relation&&e[a].relation.relation.api_name===t)&&(!i.relation||"related_list"!==i.relation.type)){o=!0,e[a].include_objects=0!=e[a].include_objects&&0!=i.include_objects;var r=this.construct_group(e[a].criteria,i.criteria,"AND");e[a].criteria=r;break}o||Lyte.arrayUtils(e,"push",i)},getIndex:function(e,t,i,a){var l=0,o=e?e.length:0;for(l=0;l<o;l++)if(e[l][i]==t)return a?l:e[l].index;return!1},getValueBasedonKeys:function(e,t){for(var i=0,a=e.length,l=[];i<a;i++)l.push({id:e[i].id,name:e[i][t]});return l},sendxhr:function(e,t,i,a){return new Promise((function(l,o){var r=new XMLHttpRequest;for(var s in r.open(t,e,!0),(i=i||{})["X-ZCSRF-TOKEN"]=csrfParamName+"="+csrfToken,window.clientPortalName&&(i["X-CRMPORTAL"]=window.clientPortalName),"undefined"!=typeof crmZgid&&crmZgid&&(i["X-CRM-ORG"]=crmZgid),i)r.setRequestHeader(s,i[s]);r.send(a),r.onreadystatechange=function(){if(4==r.readyState)return"2"==r.status.toString()[0]||"3"==r.status.toString()[0]?l(r):o(r)}}))},convertUsrtoDefaultDatePattern:function(e,t){if(!e)return"";if(!e.getMonth){var i=t.toUpperCase();try{e=$L.moment(e,i,{i18n:!0}).getDObj()}catch(e){murphy.error(e)}}return e},showFilterAlert:function(e,t){var i=!0;this.getMethods("onBeforeErrorAlert")&&(i=this.executeMethod("onBeforeErrorAlert",e)),i&&(_cruxUtils.showCustomAlert({params:{cxPropYield:!0,cxPropHeading:Lyte.Component.registeredHelpers.cruxEncodeHTML(e),cxPropButtonPosition:"center",cxPropButtons:[{type:"accept",text:_cruxUtils.getI18n("crm.mb.newversion.msg4"),appearance:"primary",cxPropZcqa:"button_primary"}],cxPropWrapperClass:"cxSmartFilterAlert",id:"cxFilterAlert"},show:function(){$L(".cxSmartFilterAlert lyte-button").focus()},close:function(){if(t&&t.$node&&(t=t.$node),t){var e=t.querySelector("lyte-input,lyte-number");e&&e.focus()}}}),this.getMethods("onErrorAlert")&&this.executeMethod("onErrorAlert",e))},getDisplayValue:function(e,t,i="actual_value"){var a=[],l="actual_value"==i?"display_value":"actual_value";return e.forEach((function(e){var o=!1;t.pick_list_values.forEach((function(t){if(t[l]==e)return a.push(t[i]),void(o=!0)})),o||a.push(e)})),a},setModuleMappingData:function(){0===Object.keys(this.data.cxPropModuleRecordMapping).length&&"undefined"!=typeof moduleRecordMapping&&this.setData("cxPropModuleRecordMapping",moduleRecordMapping);var e={},t=this.data.cxPropModuleRecordMapping;for(var i in t)e[t[i].id]=t[i].module_name;this.setData("idModuleMapping",e),this.idModuleMapping=e,this.moduleRecordMapping=this.data.cxPropModuleRecordMapping},getFieldDataType:function(e){if("FULLNAME"!==e.column_name||"Leads"!==this.data.cxPropModule&&"Contacts"!==this.data.cxPropModule)if("formula"===e.data_type||e.rollup_summary&&e.rollup_summary.return_type)e.field_data_type=e.formula.return_type?e.formula.return_type:e.rollup_summary.return_type;else if(-1!==["LAYOUTID","TAGMODULEREFID","ACTIVITYTYPE","WIZARDID"].indexOf(e.column_name)){var t={LAYOUTID:"layout",TAGMODULEREFID:"tag",ACTIVITYTYPE:"picklist",WIZARDID:"layout"};e.field_data_type=t[e.column_name],"Service_Members"===e.api_name&&(e[t[e.api_name]]=e.multiselectlookup)}else 53===e.ui_type?(e.cxGetValueInMS=void 0===e.cxGetValueInMS||e.cxGetValueInMS,e.field_data_type="date"):"Services"===this.data.cxPropModule&&"MXNDUMMYCOLUMN_SERVICE"===e.column_name?(e.field_data_type="multiuserlookup",e.multiuserlookup=e.multiselectlookup):"multi_module_lookup"===e.data_type&&(e.field_data_type="lookup");else e.display_field_label="Leads"===this.data.cxPropModule?_cruxUtils.getI18n("crm.label.vendor.name",this.moduleRecordMapping.Leads.singular_label):_cruxUtils.getI18n("crm.label.vendor.name",this.moduleRecordMapping.Contacts.singular_label),e.field_label=e.display_field_label;return void 0===e.field_data_type&&(e.field_data_type=e.data_type),e.field_data_type}}),Lyte.Component.register("crux-smart-filter",{_template:'<template tag-name="crux-smart-filter"> <template is="if" value="{{cxPropSearch}}"><template case="true"> <div class="filterSearchElement cxSmFrSearchWrapper"> <template is="if" value="{{cxPropHeaderYield}}"><template case="true"><lyte-yield yield-name="header-yield" label="{{cxPropSearchLabel}}"></lyte-yield></template><template case="false"><template is="if" value="{{cxPropSearchLabel}}"><template case="true"><lyte-text class="filterSearchHeader cxSmFrSearchHeader" id="{{module_info.plural_label}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;followcursor&quot;,&quot;margin&quot;:20, &quot;appearance&quot;:&quot;box&quot;}" lt-prop-value="{{cxPropSearchLabel}}"></lyte-text></template></template></template></template> <div class="cxFilterLyteSearchWrapDiv cxColListSearchWrap"> <lyte-search id="searchId" lt-prop-appearance="box" lt-prop-query-selector="{&quot;scope&quot;:&quot;.leftFilterHead.{{cxPropClass}}_cxFilterContainer&quot;,&quot;target&quot;:&quot;.cxSmartFilterList.{{cxPropClass}}_cxFilterItem&quot;,&quot;search&quot;:&quot;.field_search:not(.cxdN)&quot;}" on-search="{{method(\'filterSearch\')}}" on-after-search="{{method(\'showChildFieldsOnSearch\')}}" lt-prop-placeholder="{{cruxGetI18n(\'crm.label.search\')}}" data-zcqa="lv_filter_srch_input"> </lyte-search> <span class="searchCloseOpen cxColListSearchClearWrap cxSmFrSearchCloseIconWrap cxdN" data-zcqa="lv_filter_search_clear" onclick="{{action(\'clearSearch\')}}"> <span class="cxSearchClearIcon"></span> </span> </div> </div> </template></template> <div class="cxFilterScrollSection"> <div id="lv_filter_scroll" class="cxSmartFilterScrollElem leftFilterHead {{cxPropClass}}_cxFilterContainer {{cxPropClass}}" onscroll="{{action(\'scrollAct\')}}"> <div class="setHorizontalPadding"> <lyte-popover lt-prop-duration="{{defaultUndefined}}" lt-prop-origin-elem=".informationpredict" lt-prop-show-close-button="false" id="tooltipPredictionScore" lt-prop-wrapper-class="predictionPopover" lt-prop-freeze="false"> <template is="registerYield" yield-name="popover"> <div class="tooltip_cnt" style="max-height: 251.375px; overflow: auto;"> <lyte-popover-header>{{cruxGetI18n(\'crm.lead.prediction.tooltip\')}}</lyte-popover-header> <lyte-popover-content> <lyte-table lt-prop-content="{{unbound(predictionScoreContent)}}" lt-prop-header="{{unbound(predictionScoreHeader)}}" lt-prop-header-label-key="data" lt-prop-body-label-key="bodyData"> </lyte-table> </lyte-popover-content> </div> </template> </lyte-popover> <lyte-accordion lt-prop-dynamic="true" lt-prop-duration="0.2s" lt-prop-exclusive="false" class="nLVFilterAcc" on-changed="{{method(\'accStateChange\')}}"> <template is="registerYield" yield-name="yield"> <template is="if" value="{{noResult.showNoResult}}"><template case="true"> <div class="cxSmFrNoresult">{{cxPropNoResultMsg}}</div> </template></template> <template is="if" value="{{expHandlers(cxPropReorderToSectionTop,\'!\')}}"><template case="true"> <template is="for" items="{{appliedFields}}" item="fieldItem" index="index"> <template is="if" value="{{expHandlers(expHandlers(cxPropChildModuleFields,\'!\'),\'||\',expHandlers(fieldItem.cxHide,\'!\'))}}"><template case="true"><div class="cvFilterList cxSmartFilterList {{cxPropClass}}_cxFilterItem {{cxPropClass}} {{fieldItem.classInFilter}}" field-ind="{{fieldItem.cxFilterIndex}}"> <template is="if" value="{{cxPropChildModuleFields}}"><template case="true"> <span id="crossFilter_close_{{id}}_{{fieldItem.id}}" data-zcqa="crossFilter_close_{{cxPropChildModuleDisplayLabel}}_{{index}}" class="cxSmFrCrossFldCloseIcon" onclick="{{action(\'onCloseChildField\',fieldItem,this)}}"> </span> </template></template> <div class="cxSmFrFieldWrap"> <div class="cxSmFrDisplayFieldLabelWrapper"> <template is="if" value="{{cxPropChildModuleFields}}"><template case="true"> <lyte-dropdown id="customFilter_DropDown_{{id}}_{{fieldItem.id}}" data-zcqa="crossFilter_dropDown_{{cxPropChildModuleDisplayLabel}}_{{index}}" lt-prop-placeholder="{{cxPropCrossFilterTranslations.selectField}}" lt-prop-freeze="true" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-selected="{{if(fieldItem.showDummyInput,\'\',fieldItem.id)}}" lt-prop-show-empty-message="true" lt-prop-box-button-width="same" lt-prop-no-result="{{getI18n(\'crm.template.listview.search.no.results\')}}" before-select="{{method(\'updateDropSelectedFields\')}}" class="cxSmFrCrossFldChildDropdown" field="{{fieldItem}}" on-show="{{method(\'onDropDownShow\')}}" on-hide="{{method(\'onDropDownHide\')}}" drop-index="{{index}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-header> <lyte-search ind="{{fieldItem.id}}" on-search="{{method(\'onSearchFieldDropDown\')}}" lt-prop-placeholder="{{cruxGetI18n(\'crm.globalsearch.search.title\')}}" lt-prop-close-icon="true" lt-prop-query-selector=" { &quot;scope&quot; : &quot;.customFilter_dropBody_{{id}}_{{fieldItem.id}}&quot; , &quot;search&quot; : &quot;lyte-drop-item:not(.cxdN)&quot; , &quot;label&quot; : &quot;lyte-drop-label&quot; } "> </lyte-search> </lyte-drop-header> <lyte-drop-body class="customFilter_dropBody_{{id}}_{{fieldItem.id}}"> <div class="pR noresultstyle cxdN" id="customFilter_DropDownNoResult_{{id}}_{{fieldItem.id}}">{{getI18n(\'crm.template.listview.search.no.results\')}}</div> <template is="for" items="{{cxPropDropBoxChildFields}}" item="cfld" index="index"> <lyte-drop-item class="{{if(expHandlers(cfld.hideInDropDown,\'&amp;&amp;\',expHandlers(cfld.id,\'!=\',fieldItem.id)),\'cxdN\',\'\')}}" data-value="{{cfld.id}}">{{cfld.field_label}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> <lyte-checkbox data-zcqa="{{fieldItem.display_field_label}}" title="{{fieldItem.display_field_label}}" lt-prop-type="default" class="checkbox field_search checkFilter userSelectNone {{if(cxPropChildModuleFields,\'cxdN\',\'\')}}" index="{{fieldItem.cxFilterIndex}}" field-ind="{{index}}" id="field_{{cruxReplace(fieldItem.api_name,\'[/.]\',\'_\')}}" lt-prop-label="{{fieldItem.display_field_label}}" on-before-checked="{{method(\'checkBoxBeforeCheck\',fieldItem)}}" on-changed="{{method(\'showHideSelectionFilter\',fieldItem)}}"></lyte-checkbox> <template is="if" value="{{expHandlers(fieldItem.subField,\'&amp;&amp;\',fieldItem.cxTooltipInfo)}}"><template case="true"> <span class="cxSmFrInfoIcon" lt-prop-title="{{fieldItem.cxTooltipInfo}}" lt-prop-tooltip-config=" { &quot;position&quot; : &quot;top&quot; } " lt-prop-tooltip-style="max-width : 150px;"></span> </template></template> </div> <template is="if" value="{{fieldItem.rendered}}"><template case="true"> <crux-smart-filter-input cx-prop-aria="{{cxPropAria}}" class="cvMainOption cxSmFrInputComp {{if(ifEquals(fieldItem.subField,true),,\'dN\')}} {{if(cxPropChildModuleFields,\'childFieldSmartInput\',\'\')}}" id="option_{{cruxReplace(fieldItem.api_name,\'[/.]\',\'_\')}}{{if(cxPropChildModuleFields,expHandlers(expHandlers(expHandlers(\'_\',\'+\',fieldItem.id),\'+\',\'_\'),\'+\',cxPropChildModuleRelation),\'\')}}" field="{{fieldItem}}" module="{{if(cxPropChildModuleFields,cxPropChildModuleName,cxPropModule)}}" index="{{fieldItem.cxFilterIndex}}" field-ind="{{index}}" module-display-field="{{cxPropModuleDisplayField}}" on-value-change="{{method(\'inputValueChange\')}}" boundary="{{cxPropBoundary}}" is-child-input="{{if(cxPropChildModuleFields,\'true\',\'false\')}}" prop-filter-view="{{cxPropFilterView}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}" cx-prop-group-support="{{cxPropGroupSupport}}" cx-prop-role-support="{{cxPropRoleSupport}}" support-related-modules="{{lbind(supportRelatedModules)}}" cx-prop-cross-filter-translations="{{cxPropCrossFilterTranslations}}"> </crux-smart-filter-input> <template is="if" value="{{expHandlers(expHandlers(fieldItem.data_type,\'==\',&quot;crossModule&quot;),\'&amp;&amp;\',expHandlers(fieldItem.childFields.length,\'>\',0))}}"><template case="true"> <div class="{{if(ifEquals(fieldItem.subField,true),,\'dN\')}}"> <crux-smart-filter-crossfields cx-prop-module-field="{{fieldItem}}" cx-prop-child-fields="{{fieldItem.childFields}}" on-value-change="{{method(\'onChildValueChange\')}}" on-field-change="{{method(\'onChildFieldChanged\')}}" cx-prop-boundary="{{cxPropBoundary}}" cx-prop-child-field-limit="{{cxPropChildFieldLimit}}" cx-prop-child-field-limit-tooltip="{{cxPropChildFieldLimitTooltip}}" class="{{if(fieldItem.rendered,\'crossFieldsChecked\',\'crossFieldsUnChecked\')}}" cx-prop-module-display-field="{{cxPropModuleDisplayField}}" cx-prop-cross-filter-translations="{{cxPropCrossFilterTranslations}}"> </crux-smart-filter-crossfields> </div> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(cxPropChildModuleFields,\'&amp;&amp;\',fieldItem.showDummyInput)}}"><template case="true"> <crux-smart-filter-input cx-prop-aria="{{cxPropAria}}" class="cvMainOption cxSmFrInputComp eventNone disable childFieldSmartInput" id="option_dummy_input" cx-prop-field="{{dummyField}}" module="{{cxPropModule}}" prop-filter-view="{{cxPropFilterView}}" support-related-modules="{{lbind(supportRelatedModules)}}"></crux-smart-filter-input> </template></template></template></template> </div> </div></template></template> </template> </template></template> <template is="for" items="{{allFields}}" item="field" index="index"> <template is="if" value="{{field.cxAccordion}}"><template case="true"> <template is="if" value="{{expHandlers(field.cxHideAccordion,\'!\')}}"><template case="true"><lyte-accordion-item acc-ind="{{index}}" class="lyteAccordionActive nLVFilterAccItems" id="{{field.cxAccordionName}}"> <lyte-accordion-header>{{field.cxAccordionLabel}} <template is="if" value="{{field.cxAccordionInfo}}"><template case="true"><crmutil-icon class="mL7 op7" lt-prop-title="{{cruxGetI18n(\'abm.filters.info\',cxPropCommonInfo.abmModuleInfo.parentModuleDisplayName,cxPropCommonInfo.abmModuleInfo.currentModuleDisplayName)}}" icon-name="info-rounded" icon-class="zcicn-info-rounded"></crmutil-icon></template></template> <lyte-icon class="lyteAccordionArrow"></lyte-icon> </lyte-accordion-header> <lyte-accordion-body class="{{field.cxClass}}"> <template is="if" value="{{field.cxNoResult}}"><template case="true"> <div class="cxSmFrNoresult">{{cxPropNoResultMsg}}</div> </template></template> <div class="cxSmFrAccordionBodyDiv"> <template is="for" items="{{field.cxFields}}" item="fld" index="ind"> <template is="if" value="{{fld.cxHeader}}"><template case="true"> <div class="{{fld.cxClass}}" id="{{fld.cxHeaderName}}"> <div class="cxFilterHeader">{{fld.cxHeaderLabel}}</div> <template is="for" items="{{fld.cxFields}}" item="subFld" index="subInd"> <div class="cvFilterList cxSmartFilterList {{cxPropClass}}_cxFilterItem {{cxPropClass}} {{subFld.classInFilter}}" field-ind="{{subFld.cxFilterIndex}}"> <div class="leftElements"> <template is="if" value="{{subFld.displayInFilter}}"><template case="true"> <div class="cxSmFrDisplayFieldLabelWrapper"> <lyte-checkbox data-zcqa="{{subFld.display_field_label}}" title="{{subFld.display_field_label}}" lt-prop-type="default" class="checkbox field_search checkFilter userSelectNone" index="{{subFld.cxFilterIndex}}" field-ind="{{index}}_{{ind}}_{{subInd}}" id="field_{{cruxReplace(subFld.api_name,\'[/.]\',\'_\')}}" lt-prop-label="{{subFld.display_field_label}}" on-before-checked="{{method(\'checkBoxBeforeCheck\',subFld)}}" on-changed="{{method(\'showHideSelectionFilter\',subFld)}}"></lyte-checkbox> <template is="if" value="{{expHandlers(subFld.subField,\'&amp;&amp;\',subFld.cxTooltipInfo)}}"><template case="true"> <span class="cxSmFrInfoIcon" lt-prop-title="{{subFld.cxTooltipInfo}}" lt-prop-tooltip-config=" { &quot;position&quot; : &quot;top&quot; } " lt-prop-tooltip-style="max-width : 150px;"></span> </template></template> </div> <template is="if" value="{{subFld.rendered}}"><template case="true"> <crux-smart-filter-input cx-prop-aria="{{cxPropAria}}" class="cvMainOption cxSmFrInputComp {{if(ifEquals(subFld.subField,true),,\'cxdN\')}}" id="option_{{cruxReplace(subFld.api_name,\'[/.]\',\'_\')}}" field="{{subFld}}" module="{{cxPropModule}}" index="{{subFld.cxFilterIndex}}" field-ind="{{index}}_{{ind}}_{{subInd}}" module-display-field="{{cxPropModuleDisplayField}}" on-value-change="{{method(\'inputValueChange\')}}" boundary="{{cxPropBoundary}}" prop-filter-view="{{cxPropFilterView}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}" cx-prop-group-support="{{cxPropGroupSupport}}" cx-prop-role-support="{{cxPropRoleSupport}}" support-related-modules="{{lbind(supportRelatedModules)}}"></crux-smart-filter-input> </template></template> </template><template case="false"> <span style="display:none" id="field_{{cruxReplace(subFld.api_name,\'[/.]\',\'_\')}}" sindex="{{subFld.cxFilterIndex}}" class="field_search cxHiddenLabel">{{subFld.display_field_label}}</span> <div class="content-animated-line zcrm-contentloading" style="width: 208px;height: 10px; margin-top: 5px; margin-bottom: 5px"> </div> </template></template> </div> </div> </template> </div> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(fld.cxHide,\'!\'),\'||\',fld.cxAppliedField)}}"><template case="true"><div class="cvFilterList cxSmartFilterList {{cxPropClass}}_cxFilterItem {{cxPropClass}} {{fld.classInFilter}}" field-ind="{{fld.cxFilterIndex}}"> <div class="leftElements"> <template is="if" value="{{fld.displayInFilter}}"><template case="true"> <div class="cxSmFrDisplayFieldLabelWrapper"> <lyte-checkbox data-zcqa="{{fld.display_field_label}}" title="{{fld.display_field_label}}" lt-prop-type="default" class="checkbox field_search checkFilter userSelectNone" index="{{fld.cxFilterIndex}}" field-ind="{{index}}_{{ind}}" id="field_{{cruxReplace(fld.api_name,\'[/.]\',\'_\')}}" lt-prop-label="{{fld.display_field_label}}" on-before-checked="{{method(\'checkBoxBeforeCheck\',fld)}}" on-changed="{{method(\'showHideSelectionFilter\',fld)}}"></lyte-checkbox> <template is="if" value="{{expHandlers(fld.subField,\'&amp;&amp;\',fld.cxTooltipInfo)}}"><template case="true"> <span class="cxSmFrInfoIcon" lt-prop-title="{{fld.cxTooltipInfo}}" lt-prop-tooltip-config=" { &quot;position&quot; : &quot;top&quot; } " lt-prop-tooltip-style="max-width : 150px;"></span> </template></template> </div> <template is="if" value="{{fld.rendered}}"><template case="true"> <crux-smart-filter-input cx-prop-aria="{{cxPropAria}}" class="cvMainOption cxSmFrInputComp {{if(ifEquals(fld.subField,true),,\'cxdN\')}}" id="option_{{cruxReplace(fld.api_name,\'[/.]\',\'_\')}}" field="{{fld}}" module="{{cxPropModule}}" index="{{fld.cxFilterIndex}}" field-ind="{{index}}_{{ind}}" module-display-field="{{cxPropModuleDisplayField}}" on-value-change="{{method(\'inputValueChange\')}}" boundary="{{cxPropBoundary}}" prop-filter-view="{{cxPropFilterView}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}" cx-prop-group-support="{{cxPropGroupSupport}}" cx-prop-role-support="{{cxPropRoleSupport}}" support-related-modules="{{lbind(supportRelatedModules)}}" cx-prop-cross-filter-translations="{{cxPropCrossFilterTranslations}}"> </crux-smart-filter-input> <div class="{{if(ifEquals(fld.subField,true),,\'cxdN\')}}"> <template is="if" value="{{expHandlers(fld.data_type,\'==\',&quot;crossModule&quot;)}}"><template case="true"> <crux-smart-filter-crossfields cx-prop-module-field="{{fld}}" cx-prop-child-fields="{{fld.childFields}}" on-value-change="{{method(\'onChildValueChange\')}}" on-field-change="{{method(\'onChildFieldChanged\')}}" cx-prop-child-field-limit="{{cxPropChildFieldLimit}}" cx-prop-boundary="{{cxPropBoundary}}" cx-prop-child-field-limit-tooltip="{{cxPropChildFieldLimitTooltip}}" class="{{if(fld.rendered,\'crossFieldsChecked\',\'crossFieldsUnChecked\')}}" cx-prop-module-display-field="{{cxPropModuleDisplayField}}" cx-prop-cross-filter-translations="{{cxPropCrossFilterTranslations}}"> </crux-smart-filter-crossfields> </template></template> </div> </template></template> </template><template case="false"> <span style="display:none" id="field_{{cruxReplace(fld.api_name,\'[/.]\',\'_\')}}" sindex="{{fld.cxFilterIndex}}" class="field_search cxHiddenLabel">{{fld.display_field_label}}</span> <div class="content-animated-line zcrm-contentloading" style="width: 208px;height: 10px; margin-top: 5px; margin-bottom: 5px"> </div> </template></template> </div> </div></template></template> </template></template> </template> </div> </lyte-accordion-body> </lyte-accordion-item></template></template> </template><template case="false"> <template is="if" value="{{expHandlers(expHandlers(field.cxHide,\'!\'),\'||\',field.cxAppliedField)}}"><template case="true"><div class="cvFilterList cxSmartFilterList {{cxPropClass}}_cxFilterItem {{cxPropClass}} {{field.classInFilter}}" field-ind="{{field.cxFilterIndex}}"> <template is="if" value="{{cxPropChildModuleFields}}"><template case="true"> <span id="crossFilter_close_{{id}}_{{field.id}}" data-zcqa="crossFilter_close_{{cxPropChildModuleDisplayLabel}}_{{index}}" class="cxSmFrCrossFldCloseIcon" onclick="{{action(\'onCloseChildField\',field,this)}}"> </span> </template></template> <div class="leftElements"> <template is="if" value="{{field.displayInFilter}}"><template case="true"> <div class="cxSmFrDisplayFieldLabelWrapper"> <template is="if" value="{{cxPropChildModuleFields}}"><template case="true"> <lyte-dropdown id="customFilter_DropDown_{{id}}_{{field.id}}" data-zcqa="crossFilter_dropDown_{{cxPropChildModuleDisplayLabel}}_{{index}}" lt-prop-placeholder="{{cxPropCrossFilterTranslations.selectField}}" lt-prop-freeze="true" lt-prop-boundary="{{cxPropBoundary}}" lt-prop-show-empty-message="true" lt-prop-box-button-width="same" lt-prop-no-result="{{getI18n(\'crm.template.listview.search.no.results\')}}" before-select="{{method(\'updateDropSelectedFields\')}}" class="cxSmFrCrossFldChildDropdown" field="{{field}}" on-show="{{method(\'onDropDownShow\')}}" on-hide="{{method(\'onDropDownHide\')}}" drop-index="{{index}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-header> <lyte-search ind="{{field.id}}" on-search="{{method(\'onSearchFieldDropDown\')}}" lt-prop-placeholder="{{cruxGetI18n(\'crm.globalsearch.search.title\')}}" lt-prop-close-icon="true" lt-prop-query-selector=" { &quot;scope&quot; : &quot;.customFilter_dropBody_{{id}}_{{field.id}}&quot; , &quot;search&quot; : &quot;lyte-drop-item:not(.cxdN)&quot; , &quot;label&quot; : &quot;lyte-drop-label&quot; } "> </lyte-search> </lyte-drop-header> <lyte-drop-body class="customFilter_dropBody_{{id}}_{{field.id}}"> <div class="pR noresultstyle cxdN" id="customFilter_DropDownNoResult_{{id}}_{{field.id}}">{{getI18n(\'crm.template.listview.search.no.results\')}}</div> <template is="for" items="{{cxPropDropBoxChildFields}}" item="cfld" index="index"> <lyte-drop-item class="{{if(expHandlers(cfld.hideInDropDown,\'&amp;&amp;\',expHandlers(cfld.id,\'!=\',field.id)),\'cxdN\',\'\')}}" data-value="{{cfld.id}}">{{cfld.field_label}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> <lyte-checkbox data-zcqa="{{field.display_field_label}}" title="{{field.display_field_label}}" lt-prop-type="default" class="checkbox field_search checkFilter userSelectNone {{if(cxPropChildModuleFields,\'cxdN\',\'\')}}" index="{{field.cxFilterIndex}}" field-ind="{{index}}" id="field_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-label="{{field.display_field_label}}" on-before-checked="{{method(\'checkBoxBeforeCheck\',field)}}" on-changed="{{method(\'showHideSelectionFilter\',field)}}"></lyte-checkbox> <template is="if" value="{{expHandlers(field.subField,\'&amp;&amp;\',field.cxTooltipInfo)}}"><template case="true"> <span class="cxSmFrInfoIcon" lt-prop-title="{{field.cxTooltipInfo}}" lt-prop-tooltip-config=" { &quot;position&quot; : &quot;top&quot; } " lt-prop-tooltip-style="max-width : 150px;"></span> </template></template> </div> <template is="if" value="{{field.rendered}}"><template case="true"> <crux-smart-filter-input cx-prop-aria="{{cxPropAria}}" class="cvMainOption cxSmFrInputComp {{if(ifEquals(field.subField,true),,\'cxdN\')}} {{if(cxPropChildModuleFields,\'childFieldSmartInput\',\'\')}}" id="option_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}{{if(cxPropChildModuleFields,expHandlers(expHandlers(expHandlers(\'_\',\'+\',field.id),\'+\',\'_\'),\'+\',cxPropChildModuleRelation),\'\')}}" field="{{field}}" module="{{if(cxPropChildModuleFields,cxPropChildModuleName,cxPropModule)}}" index="{{field.cxFilterIndex}}" field-ind="{{index}}" module-display-field="{{cxPropModuleDisplayField}}" on-value-change="{{method(\'inputValueChange\')}}" boundary="{{cxPropBoundary}}" prop-filter-view="{{cxPropFilterView}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}" is-child-input="{{if(cxPropChildModuleFields,\'true\',\'false\')}}" cx-prop-group-support="{{cxPropGroupSupport}}" cx-prop-role-support="{{cxPropRoleSupport}}" support-related-modules="{{lbind(supportRelatedModules)}}"></crux-smart-filter-input> </template><template case="false"><template is="if" value="{{expHandlers(cxPropChildModuleFields,\'&amp;&amp;\',field.showDummyInput)}}"><template case="true"> <crux-smart-filter-input cx-prop-aria="{{cxPropAria}}" class="cvMainOption cxSmFrInputComp eventNone disable childFieldSmartInput" id="option_dummy_input" cx-prop-field="{{dummyField}}" module="{{cxPropModule}}" prop-filter-view="{{cxPropFilterView}}" support-related-modules="{{lbind(supportRelatedModules)}}"></crux-smart-filter-input> </template></template></template></template> </template><template case="false"> <span style="display:none" id="field_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" sindex="{{field.cxFilterIndex}}" class="field_search cxHiddenLabel">{{field.display_field_label}}</span> <div class="content-animated-line zcrm-contentloading" style="width: 208px;height: 10px; margin-top: 5px; margin-bottom: 5px"> </div> </template></template> </div> </div></template></template> </template></template> </template> </template> </lyte-accordion> </div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"insertYield",position:[0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,3,3]}]}},default:{}},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1,1]},{type:"registerYield",position:[3,1,1,1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]},{type:"componentDynamic",position:[1,3]}]},{type:"componentDynamic",position:[3,1,1,1]},{type:"attr",position:[3,1,1,3]},{type:"registerYield",position:[3,1,1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"if",position:[0,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,3,3]},{type:"for",position:[1,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[0,3,1,3]},{type:"componentDynamic",position:[0,3,1,3]},{type:"attr",position:[0,3,1,5]},{type:"if",position:[0,3,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[0,3,3]},{type:"if",position:[0,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}]}},default:{}},{type:"attr",position:[5]},{type:"for",position:[5],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,1,0]},{type:"attr",position:[0,1,2]},{type:"if",position:[0,1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"componentDynamic",position:[0]}]}},default:{}},{type:"componentDynamic",position:[0,1,4]},{type:"componentDynamic",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"if",position:[0,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[0,3,3,1]},{type:"for",position:[0,3,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1,1]},{type:"if",position:[0,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[0,3]},{type:"componentDynamic",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"if",position:[0,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[0,3,1]},{type:"if",position:[0,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"componentDynamic",position:[1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,3,3]},{type:"for",position:[1,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}]},{type:"componentDynamic",position:[3,1,1,3]}],_observedAttributes:["cxPropHeaderYield","cxPropEnableAccordion","cxPropCriteriaCondition","cxPropSearchLabel","cxPropSearch","cxPropModule","cxPropFields","cxPropIsSpecialFields","cxPropIsModuleFields","cxPropDisplayAsAccord","cxPropClass","cxPropFieldSelectLimit","cxPropMaxLimitErrorMsg","cxPropNoResultMsg","seriesArr","cxPropBoundary","cxPropCriteria","cxPropSort","cxPropUserFieldProperties","module_info","cxPropCommonInfo","checked","allFields","abmFields","abmScoreFieldList","abmScoreFieldLength","abmTechniqueFieldList","abmTechniqueFieldsLength","displayVisitField","special_field","visits_field","predictionScoreContent","predictionScoreHeader","cxPropModuleDisplayField","cxPropPreventUiType","cxPropPreventColumnName","defaultUndefined","alertMsg","cxPropEnableScrollLoading","cxPropFilterView","noResult","appliedFields","appliedCriteria","undefinedValue","email_status","cxPropYieldCriteriaFields","cxPropCurrentUserDetails","cxPropPreventReordering","cxPropReorderToSectionTop","cxPropModuleRecordMapping","idModuleMapping","cxPropChildModuleFields","supportRelatedModules","cxPropChildModules","cxPropTimeZone","cxPropRoleSupport","cxPropGroupSupport","cxPropChildFieldLimit","cxPropChildFieldLimitTooltip","cxPropRelatedModulesLimit","cxPropRelatedModulesLimitMsg","cxPropDropBoxChildFields","cxPropDropSelectedChildFields","dummyField","blockedCriteria","cxPropAria"],data:function(){return{cxPropHeaderYield:Lyte.attr("boolean",{default:!1}),cxPropEnableAccordion:Lyte.attr("boolean",{default:!0}),cxPropCriteriaCondition:Lyte.attr("object",{default:{}}),cxPropSearchLabel:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.label.search")}),cxPropSearch:Lyte.attr("boolean",{default:!1}),cxPropModule:Lyte.attr("string"),cxPropFields:Lyte.attr("array",{default:[]}),cxPropIsSpecialFields:Lyte.attr("boolean",{default:!0}),cxPropIsModuleFields:Lyte.attr("boolean",{default:!0}),cxPropDisplayAsAccord:Lyte.attr("boolean",{default:!1}),cxPropClass:Lyte.attr("string",{default:"cxFilterClass"}),cxPropFieldSelectLimit:Lyte.attr("number",{default:15}),cxPropMaxLimitErrorMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.criteria.max.rowcnt.exceeds")}),cxPropNoResultMsg:Lyte.attr("string",{default:_cruxUtils.getI18n("crm.customview.nofields.found")}),seriesArr:Lyte.attr("array",{default:[]}),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropCriteria:Lyte.attr("object"),cxPropSort:Lyte.attr("boolean",{default:!0}),cxPropUserFieldProperties:Lyte.attr("object",{default:{}}),module_info:Lyte.attr("object"),cxPropCommonInfo:Lyte.attr("object",{default:{}}),checked:Lyte.attr("array",{default:[]}),allFields:Lyte.attr("array",{default:[]}),abmFields:Lyte.attr("array",{default:[]}),abmScoreFieldList:Lyte.attr("array",{default:[]}),abmScoreFieldLength:Lyte.attr("number"),abmTechniqueFieldList:Lyte.attr("array",{default:[]}),abmTechniqueFieldsLength:Lyte.attr("number",{default:2}),displayVisitField:Lyte.attr("array",{default:[]}),special_field:Lyte.attr("array",{default:[]}),visits_field:Lyte.attr("array",{default:[]}),predictionScoreContent:Lyte.attr("array",{default:[{range:_cruxUtils.getI18n("crm.lead.prediction.convert.high"),score:_cruxUtils.getI18n("crm.inv.mail.time.two.days.subject","61","100")},{range:_cruxUtils.getI18n("crm.lead.prediction.convert.medium"),score:_cruxUtils.getI18n("crm.inv.mail.time.two.days.subject","41","60")},{range:_cruxUtils.getI18n("crm.lead.prediction.convert.low"),score:_cruxUtils.getI18n("crm.inv.mail.time.two.days.subject","1","40")}]}),predictionScoreHeader:Lyte.attr("array",{default:[{data:_cruxUtils.getI18n("crm.lead.prediction.tooltip.convert"),bodyData:"range"},{data:_cruxUtils.getI18n("crm.lead.prediction.tooltip.score"),bodyData:"score"}]}),cxPropModuleDisplayField:Lyte.attr("object",{default:{}}),cxPropPreventUiType:Lyte.attr("array",{default:[]}),cxPropPreventColumnName:Lyte.attr("array",{default:[]}),defaultUndefined:Lyte.attr("string"),alertMsg:Lyte.attr("string"),cxPropEnableScrollLoading:Lyte.attr("boolean",{default:!1}),cxPropFilterView:Lyte.attr("string",{default:"vertical"}),noResult:Lyte.attr("object",{default:{}}),appliedFields:Lyte.attr("array",{default:[]}),appliedCriteria:Lyte.attr("object"),undefinedValue:Lyte.attr("string",{default:void 0}),email_status:Lyte.attr("boolean",{default:!1}),cxPropYieldCriteriaFields:Lyte.attr("array",{default:[]}),cxPropCurrentUserDetails:Lyte.attr("object"),cxPropPreventReordering:Lyte.attr("boolean",{default:!1}),cxPropReorderToSectionTop:Lyte.attr("boolean",{default:!1}),cxPropModuleRecordMapping:Lyte.attr("object",{default:{}}),idModuleMapping:Lyte.attr("object",{default:{}}),cxPropChildModuleFields:Lyte.attr("boolean",{default:!1}),supportRelatedModules:Lyte.attr("boolean",{default:!1}),cxPropChildModules:Lyte.attr("array",{default:[]}),cxPropTimeZone:Lyte.attr("string",{default:""}),cxPropRoleSupport:Lyte.attr("boolean",{default:!1}),cxPropGroupSupport:Lyte.attr("boolean",{default:!1}),cxPropChildFieldLimit:Lyte.attr("number"),cxPropChildFieldLimitTooltip:Lyte.attr("string",{default:""}),cxPropRelatedModulesLimit:Lyte.attr("number"),cxPropRelatedModulesLimitMsg:Lyte.attr("string",{default:""}),cxPropDropBoxChildFields:Lyte.attr("array",{default:[]}),cxPropDropSelectedChildFields:Lyte.attr("array",{default:[]}),dummyField:Lyte.attr("object",{default:{field_data_type:"text",isDummy:!0}}),blockedCriteria:Lyte.attr("object",{default:{Email:"",Secondary_Email:""}}),cxPropAria:Lyte.attr("boolean",{default:!1})}},scoring_rules:[],series:[],assignment_thresholds:[],cloned_criteria:{},init:function(){this.setModuleMappingData(),this.data.cxPropCurrentUserDetails||("undefined"!=typeof Crm?this.setData("cxPropCurrentUserDetails",Crm.userDetails):this.setData("cxPropCurrentUserDetails",{permissions:{},DATE_PATTERN:"dd/mm/yyyy"})),this.data.cxPropCurrentUserDetails.DATE_PATTERN=this.datePattern=this.data.cxPropCurrentUserDetails.DATE_PATTERN?this.data.cxPropCurrentUserDetails.DATE_PATTERN:"dd/mm/yyyy",this.scoring_rules=[],this.series=[],this.assignment_thresholds=[],this.cloned_criteria={},this.$node.getFilterCriteria=function(){return this.component.getFilterCriteria()},this.$node.setCriteria=function(e){return this.component.setCriteria(e)},this.$node.clearFields=function(e){return this.component.clearFields(e)},this.$node.resetFields=function(e){return this.component.resetFields()},this.$node.getSelectedFields=function(){return this.component.getSelectedFields()},this.$node.filterByField=function(e){if(e){var t;-1!==["Recency","Frequency","Monetary"].indexOf(e)&&(t=e,e="Segment_Score");var i=this.querySelector("#field_"+this.component._cruxReplace(e,"[/.]","_"));if(i){var a=i.closest("lyte-accordion-item"),l=0;a&&!a.classList.contains("lyteAccordionActive")&&(a.click(),l=1e3),i.classList.contains("cxHiddenLabel")&&(i.parentElement.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),l=1e3),this.timeInterval=setInterval(function(){var a=this.component._cruxReplace(e,"[/.]","_");if((i=this.querySelector("#field_"+a)).ltProp){i.ltProp("checked",!0),i.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});var l=this.querySelector("#option_"+a+" input");if(t)this.querySelector("#sub_field_"+t).ltProp("checked",!0),l=this.querySelector("#sub_option_"+t+" input");l&&l.focus(),clearInterval(this.timeInterval)}}.bind(this),l)}}},"horizontal"===this.data.cxPropFilterView&&this.setData("cxPropClass",this.data.cxPropClass+" horizontalFilter"),this.cruxAssets=void 0!==cruxAssets?cruxAssets:{},this.cruxAssetsCompMapping=this.cruxAssets.dataTypeToCompMapping?this.cruxAssets.dataTypeToCompMapping:{},this.scrollTop=0,this.setFieldValue()},getSelectedFields:function(){return this.getData("checked")},didConnect:function(){var e=this.getData("cxPropCriteria");e&&(e.filters||e.cross_filters)&&this.setCriteria(e);var t=$L("#lv_filter_scroll");t&&t.scroll&&!this.data.cxPropChildModuleFields&&t.scroll({tabIndex:-1})},filterFieldByKey:function(e,t,i,a){var l=e.length,o=0;for(o=0;o<l;o++){var r=this.getField(e[o]);r.constructor!=Array?t?r.cxHide||r[t]!==i||a.push(r):(Lyte.objectUtils(r,"add","cxFilterIndex",a.length+""),a.push(r)):(t||(e[o].startIndex=a.length),this.filterFieldByKey(r,t,i,a),t||(e[o].endIndex=a.length))}},getFieldByKeyValue:function(e,t,i,a=[]){if(!this.data.cxPropReorderToSectionTop)for(var l,o=this.data.appliedFields.length,r=0;r<o;r++)l=this.data.appliedFields[r],t?l.cxHide||l[t]!==i||a.push(l):(Lyte.objectUtils(l,"add","cxFilterIndex",a.length+""),a.push(l));this.filterFieldByKey(e,t,i,a)},clearFields:function(){var e,t=this.cxFilterFields.filter((e=>e.rendered)),i=t?t.length:0;this.$node.querySelector("#lv_filter_scroll").scrollTop=0;for(var a=0;a<i;a++)e="#field_"+this._cruxReplace(t[a].api_name,"[/.]","_"),Lyte.objectUtils(t[a],"add",{rendered:!1}),this.$node.querySelector(e).ltProp("checked",!1);this.setData("checked",[]),this.blockedCriteriaSelected=!1,this.toggleDealsField("dB")},resetFields:function(){this.clearFields();for(var e=this.data.appliedFields,t=e.length,i=0;i<t;i++)this.removeAppliedField(e[i]);this.setData("appliedFields",[]),$L.fastdom.mutate(function(){this.$node.querySelector("#lv_filter_scroll").scrollTop=0}.bind(this)),this.toggleDealsField("dB")},removeAppliedField:function(e){if(!this.data.cxPropReorderToSectionTop)return e.cxOriginField&&e.cxOriginField.cxHide&&Lyte.objectUtils(e.cxOriginField,"delete","cxHide"),void(e.cxParent&&e.cxParent.cxHideAccordion&&Lyte.objectUtils(e.cxParent,"delete","cxHideAccordion"));if(Lyte.objectUtils(e.cxOriginField,"delete","cxHide"),e.cxParent.cxFields.filter((e=>e.cxAppliedField)).length){var t=0,i=e.cxParent&&e.cxParent.cxFields?e.cxParent.cxFields:[],a=i.length;for(t=0;t<a&&i[t].cxAppliedField;t++)Lyte.arrayUtils(i,"removeAt",t,1),t--,a--}},getABMFields:function(){var e,t=[],i=this.getData("cxPropCommonInfo"),a=i&&i.abmModuleInfo?i.abmModuleInfo.techniqueFields:[],l=i&&i.abmModuleInfo?i.abmModuleInfo.abmAccountFields:[],o=i&&i.abmModuleInfo?i.abmModuleInfo.scoreFields:[],r=0,s=[],n={RFM_Label__s:_cruxUtils.getI18n("abm.rfm.label"),Firmographic_Label__s:_cruxUtils.getI18n("abm.firmographics.label"),Recommendation_Label__s:_cruxUtils.getI18n("abm.recommendation.label"),VOICEOFCUSTOMERLABEL__s:_cruxUtils.getI18n("abm.voc.label"),Engagement_Label__s:_cruxUtils.getI18n("abm.engagement.label")},d=[],p=0,c={Account_Score__s:_cruxUtils.getI18n("abm.overall.score"),Mood_Score__s:_cruxUtils.getI18n("abm.mood.score"),Value_Score__s:_cruxUtils.getI18n("abm.value.score"),Engagement_Score__s:_cruxUtils.getI18n("abm.engagement.score")};return store.peekAll("field").forEach((i=>{a.includes(i.api_name)?(r+=1,e={api_name:"cxFilter_"+i.api_name,visible:!0,name:i.api_name,data_type:"picklist",pick_list_values:i.pick_list_values,field_label:n[i.api_name],display_field_label:n[i.api_name]},s.push("cxFilter_"+i.api_name),t.push(e)):o.includes(i.api_name)?(p+=1,e={api_name:"cxFilter_"+i.api_name,visible:!0,name:i.api_name,data_type:i.data_type,field_label:c[i.api_name],display_field_label:c[i.api_name],minValue:1,maxValue:100,cxDecimalAllowed:!1},d.push("cxFilter_"+i.api_name),t.push(e)):l.includes(i.api_name)&&(e={api_name:"cxFilter_"+i.api_name,visible:!0,name:i.api_name,data_type:i.data_type,field_label:i.field_label,display_field_label:i.field_label},t.push(e))})),this.setData({abmTechniqueFieldList:s,abmTechniqueFieldsLength:r,abmScoreFieldList:d,abmScoreFieldLength:p}),i.abmModuleInfo.renderSegmentFilter&&t.push({api_name:"cxFilter_Linked_Segment__s",visible:!0,name:"Linked_Segment__s",data_type:"multirelation",field_label:_cruxUtils.getI18n("abm.abm.segment.name"),display_field_label:_cruxUtils.getI18n("abm.abm.segment.name"),linkingModule:{module_name:"Segment"}}),t},setFieldValue:function(){var e=[],t={};this.cxFilterFields=[];var i,a,l,o=this.getData("cxPropCommonInfo");this.locked_crossfield=!1,this.blockedCriteriaSelected=!1,this.field_mapping={},this.rfm_avilable=!1;var r,s,n=this.getData("cxPropModule");this.setData("appliedFields",[]);var d={},p={};if(d.moduleFields=[],d.special_field=[],d.displayVisitField=[],d.abm_field=[],n&&this.moduleRecordMapping[n]&&(p=(p=store.peekRecord("module",this.moduleRecordMapping[n].id))||this.moduleRecordMapping[n],this.setData("module_info",p)),this.convertedViews=!1,this.data.module_info&&this.data.module_info.custom_view&&-1!=["CONVERTEDVIEWS","MYCONVERTEDVIEWS"].indexOf(this.data.module_info.custom_view.system_name)&&(this.convertedViews=!0),this.isScoreSupportedView=!0,this.data.module_info&&this.data.module_info.custom_view&&this.data.module_info.custom_view.system_name&&(this.data.module_info.custom_view.system_name.startsWith("REVIEWPROCESS")||this.data.module_info.custom_view.system_name.startsWith("IMAGEVALIDATION"))&&(this.isScoreSupportedView=!1),this.isSeriesSupportedView=!0,this.data.module_info&&this.data.module_info.custom_view&&this.data.module_info.custom_view.system_name&&(this.data.module_info.custom_view.system_name.startsWith("REVIEWPROCESS")||this.data.module_info.custom_view.system_name.startsWith("IMAGEVALIDATION"))&&(this.isSeriesSupportedView=!1),o&&o.abmModuleInfo&&(a=(i=o.abmModuleInfo)&&i.module?i.module.api_name:null,(s=store.peekAll("module").find((e=>e.module_name===n)))&&s.api_name===a&&((l=this.getABMFields()).forEach((function(e){e.visible=!0,e.filterable=!0,e.available_in_user_layout=!0})),t={cxAccordion:!0,cxAccordionLabel:_cruxUtils.getI18n("abm.filters"),cxAccordionName:"abm_field",cxFields:l,cxSort:!1,cxAccordionInfo:this.data.cxPropCommonInfo.abmModuleInfo.isAccountModule?"":_cruxUtils.getI18n("abm.filters.info",this.data.cxPropCommonInfo.abmModuleInfo.parentModuleDisplayName,this.data.cxPropCommonInfo.abmModuleInfo.currentModuleDisplayName)},e.push(t))),this.getData("cxPropIsSpecialFields")&&n&&!this.isZBCustomModule(this.getData("cxPropModule"))&&!window.clientPortalName&&!n.startsWith("Orchestration")&&!n.startsWith("PathFinder")){var c=this.getSpecialFields(n);c.forEach((function(e){e.visible=!0,e.filterable=!0,e.available_in_user_layout=!0})),t={cxAccordion:!0,cxAccordionLabel:_cruxUtils.getI18n("crm.filter.header.secton.system"),cxAccordionName:"special_field",cxFields:c,cxSort:!1},e.push(t)}if(this.getData("cxPropFields").length?(d.moduleFields=this.getData("cxPropFields").slice(0),this.getVisitsFields(n,d.moduleFields,d)):this.getData("cxPropIsModuleFields")&&(r=p.fields?p.fields.slice(0):[],d.moduleFields=r,this.getVisitsFields(n,r,d)),d.displayVisitField&&d.displayVisitField.length&&(e.push({cxAccordion:!0,cxAccordionLabel:_cruxUtils.getI18n("crm.website.activity"),cxAccordionName:"displayVisitField",cxFields:d.displayVisitField,cxSort:!1}),this.setData("displayVisitField",d.displayVisitField)),d.moduleFields&&d.moduleFields.length&&(!this.data.cxPropEnableAccordion||d.moduleFields[0].cxAccordion||this.data.cxPropChildModuleFields?e=e.concat(d.moduleFields):e.push({cxAccordion:!0,cxAccordionLabel:_cruxUtils.getI18n("crm.filter.header.secton.fields"),cxAccordionName:"allFields",cxFields:d.moduleFields})),this.cxFilterFields=[],this.getMethods("onBeforeRender")){var u=this.executeMethod("onBeforeRender",{fields:e});u&&(e=u)}this.allfieldType=this.getType(this.allfieldType,e);var m=this.cxFilterFields.length;this.data.cxPropEnableScrollLoading&&(m=m>50?50:m,this.currRendFldInd=m);for(var _=0;_<m;_++)this.cxFilterFields[_].displayInFilter=!0;this.setData("allFields",e),this.setData("cxPropDropBoxChildFields",Lyte.deepCopyObject(e))},moduleObserver:function(){this.setFieldValue()}.observes("cxPropModule","cxPropFields.[]"),setCriteriaObserver:function(){var e=this.getData("cxPropCriteria");e&&(e.filters||e.cross_filters)&&this.setCriteria(e)}.observes("cxPropCriteria"),setMemberStatus:function(e,t){var i=e.slice(0);t.pick_list_values=i},getCrossFieldsCount:function(e){for(var t=0,i=0,a=0,l=this.data.checked.concat([e]),o=l.length,r=["ABM_Techniques","ABM_Scores","cxFilter_Linked_Segment__s","cxFilter_Scoring_Rule","cxFilter_Activities","cxFilter_Campaigns","Similarity","best_time","Prediction","cxFilter_Competitor_Alert","next_best_experience","cxFilter_Email_Sentiment","cxFilter_Series","Recommendation","cxFilter_Chats"],s=["ATTENDEDBY","BROWSER","OPERATINGSYSTEM","PORTAL_NAME","SEARCHENGINE","TIMESPENT","VISITEDTIME"],n=[444,445],d=0;d<o;d++)if(l[d].api_name&&["ABM_Techniques","ABM_Scores"].includes(l[d].api_name))0===i&&(i++,t++);else if(l[d].column_name&&s.includes(l[d].column_name))0===a&&(a++,t++);else if((l[d].field_data_type&&"crossModule"===l[d].field_data_type||l[d].api_name&&r.includes(l[d].api_name)||l[d].ui_type&&n.includes(l[d].ui_type))&&t++,t>this.data.cxPropRelatedModulesLimit)break;return t},methods:{beforeSelectDropDown:function(e){if(this.getMethods("beforeSelectDropdown"))return this.executeMethod("beforeSelectDropdown",e)},accStateChange:function(e,t,i){var a=t.classList.contains("lyteAccordionActive"),l=t.querySelector(".cvFilterList"),o=l?l.getAttribute("field-ind"):t.getAttribute("acc-ind"),r=this.cxFilterFields[o];r&&r.cxParent&&(r.cxParent.cxOpenState=a),a||this.scrollFunc(50)},beforeErrorCallback:function(e){return!this.getMethods("onBeforeErrorAlert")||this.executeMethod("onBeforeErrorAlert",e)},onDropDownShow:function(e,t){t.getDropBox();t.childComp.querySelector("lyte-search").focus()},onDropDownHide:function(e,t){t.childComp.querySelector("lyte-search").setValue("")},onSearchFieldDropDown:function(e,t){var i=t.component.data.ind,a="#customFilter_DropDownNoResult_"+this.data.id+"_"+i;0==e.length?$L(a).removeClass("cxdN"):$L(a).addClass("cxdN")},filterSearch:function(e,t){this.$node.querySelector("#searchId lyte-input input").value.length?$L(".cxSmFrSearchCloseIconWrap",this.$node).addClass("cxdB").removeClass("cxdN"):$L(".cxSmFrSearchCloseIconWrap",this.$node).addClass("cxdN").removeClass("cxdB"),this.$node.querySelector("#lv_filter_scroll").scrollTop=0;var i=this.$node.querySelector(".leftFilterHead");if(this.data.cxPropEnableScrollLoading){var a=this.cxFilterFields;e.forEach((function(e){if(e.attributes.sindex){var t=parseInt(e.getAttribute("sindex"));a[t]&&!a[t].displayInFilter&&Lyte.Component.set(a[t],"displayInFilter",!0)}}))}for(var l,o=i.querySelectorAll(".nLVFilterAcc .nLVFilterAccItems"),r=o.length,s=this.data.allFields,n=0;n<r;n++)l=parseInt(o[n].getAttribute("acc-ind")),Lyte.objectUtils(s[l],"add","cxNoResult",!0);if(e.length){Lyte.objectUtils(this.data.noResult,"add","showNoResult",!1);var d=e.length;for(n=0;n<d&&r>0;n++){var p=e[n].closest(".nLVFilterAccItems");l=p?parseInt(p.getAttribute("acc-ind")):void 0,p&&s[l]&&s[l].cxNoResult&&(l=parseInt(p.getAttribute("acc-ind")),Lyte.objectUtils(s[l],"add","cxNoResult",!1),r--)}}else r||Lyte.objectUtils(this.data.noResult,"add","showNoResult",!0)},inputValueChange:function(e){if(e&&e.sub_field){var t=e.sub_field;!t||"Without_Open_Deal"!=t.api_name&&"Without_Any_Deal"!=t.api_name?t&&"With_Open_Deal"==t.api_name&&this.toggleDealsField("dB"):this.toggleDealsField("hide")}this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e)},checkBoxBeforeCheck:function(e){var t=this.$node.querySelectorAll("lyte-checkbox:not(.cxdN) input:checked").length;if(t>=this.getData("cxPropFieldSelectLimit")||this.data.supportRelatedModules&&this.getCrossFieldsCount(e)>this.data.cxPropRelatedModulesLimit){var i="";return t>=this.getData("cxPropFieldSelectLimit")?(i=this.data.cxPropMaxLimitErrorMsg,this.showFilterAlert(i),!1):(_cruxUtils.showCustomAlert({params:{ltPropPrimaryMessage:this.data.cxPropRelatedModulesLimitMsg,ltPropSecondaryMessage:this.data.cxPropRelatedModulesLimitMsgNote,ltPropWrapperClass:"crmCenterAlert"}}),!1)}if(this.getMethods("onBeforeFieldChecked"))return this.executeMethod("onBeforeFieldChecked",e)},onChildValueChange:function(e){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e)},onChildFieldChanged:function(e,t,i,a){this.getMethods("onFieldChange")&&(t.childField=!0,this.executeMethod("onFieldChange",e,t,i,a))},showChildFieldsOnSearch:function(){this.data.supportRelatedModules&&$L(".cxSmFrCrossFldFilterList").removeClass("lyteSearchHidden")},showHideSelectionFilter:function(e,t,i,a){"Recommendation_infield"==e.api_name&&(e.api_name="Recommendation");var l=e.api_name,o=i.$node,r="#option_"+this._cruxReplace(l,"[/.]","_");r=this.data.cxPropChildModuleFields?r+"_"+e.id+"_"+this.data.cxPropChildModuleRelation:r;var s,n=!1,d="click"==arguments[4];if(d&&o.checked&&"#option_Prediction"===r&&"undefined"!=typeof Crm&&Crm.client_tracking&&Crm.client_tracking("Field Prediction Smart Filter"),o.checked){if(this.$node.querySelectorAll("lyte-checkbox:not(.cxdN) input:checked").length>this.getData("cxPropFieldSelectLimit"))return this.showFilterAlert(this.data.cxPropMaxLimitErrorMsg),void o.ltProp("checked",!1);if(Lyte.Component.set(e,{subField:!0}),e.rendered||(n=!0,Lyte.Component.set(e,{rendered:!0})),s=this.$node.querySelector(r),n){if(s.setMethods("setConditions",function(e){if(this.getMethods("setConditions"))return this.executeMethod("setConditions",e)}.bind(this)),e.cxDynamicFilterCriteriaComponent&&this.cruxAssets.getDynamicFilterCriteriaComponent){let t=this.cruxAssets.getDynamicFilterCriteriaComponent(e);t&&(this.cruxAssetsCompMapping[e.api_name]=t)}s.component.render(this)}if("picklist"==e.field_data_type&&e.history_tracking&&("Stage"!=e.api_name||"Deals"!=this.getData("cxPropModule")&&"Potentials"!=this.getData("cxPropModule"))){var p=this.moduleRecordMapping[this.idModuleMapping[e.history_tracking.module.id]];!p||p.fields&&p.fields.length||store.findRecord("module",p.id,{},!0,!0,{getFields:!0})}var c=this;if("cxFilter_Campaigns"!=e.api_name||this.member_Status){if("cxFilter_Campaigns"==e.api_name&&this.member_Status)c.setMemberStatus(this.member_Status.slice(0),e);else if("cxFilter_UnallocatedRecords"==e.api_name)if(0===this.assignment_thresholds.length){var u={module:this.getData("module_info").api_name,filters:'{"group":[{"comparator":"not_equal","field":{"api_name":"reallocation","id":null},"value":"${EMPTY}"}]}'};store.findAll("assignment_threshold",u).then((function(t){commonUtils.showHideLoadingDiv();var i=[];t.forEach((function(e){i.push({actual_value:e.id,display_value:c.getThresholdUsersName(e.restrict_to)})})),e.pick_list_values=i,c.assignment_thresholds=i,0==i.length&&($L("#option_cxFilter_UnallocatedRecords")[0].setData("placeholderValue",[_cruxUtils.getI18n("crm.no.data.found")]),$L("#option_cxFilter_UnallocatedRecords lyte-dropdown")[0].ltProp("disabled",!0)),Object.keys(c.cloned_criteria).length>0&&(c.setFieldCriteria(c.cloned_criteria),c.cloned_criteria={})}))}else e.pick_list_values=this.assignment_thresholds}else this.sendxhr("/crm/v2/Campaigns/status","GET").then((function(t){(t=JSON.parse(t.response)).campaign_status&&t.campaign_status.length&&(t.campaign_status.forEach((function(e){e.actual_value=e.name,e.display_value=e.name})),c.member_Status=t.campaign_status.slice(0),c.setMemberStatus(t.campaign_status.slice(0),e))}));"cxFilter_Series"===e.api_name&&(0===this.series.length?store.findAll("cadence",{fields:"name",module:this.getData("module_info").api_name,per_page:100}).then((function(t){commonUtils.showHideLoadingDiv();var i=[];t.forEach((function(e){i.push({actual_value:e.id,display_value:e.name})})),e.pick_list_values=i,c.series=i,c.setData("seriesArr",i),Object.keys(c.cloned_criteria).length>0&&(c.setFieldCriteria(c.cloned_criteria),c.cloned_criteria={})})):e.pick_list_values=this.series),"cxFilter_Scoring_Rule"===e.api_name&&(0===this.scoring_rules.length?store.findAll("scoring_rule",{fields:"name",module:this.getData("module_info").api_name,per_page:100}).then((function(t){commonUtils.showHideLoadingDiv();var i=[];t.forEach((function(e){i.push({actual_value:e.id,display_value:e.name})})),e.pick_list_values=i,c.scoring_rules=i,Object.keys(c.cloned_criteria).length>0&&(c.setFieldCriteria(c.cloned_criteria),c.cloned_criteria={})})):e.pick_list_values=this.scoring_rules)}else if(this.blockedCriteriaSelected=!1,Lyte.Component.set(e,{subField:!1}),0==e.persist_values&&Lyte.Component.set(e,{rendered:!1}),"crossModule"===e.data_type){var m="#customFilter_"+e.api_name,_=$L(m);_&&_[0]&&_[0].component.closeAllDummyFields&&_[0].component.closeAllDummyFields()}if(this.moduleRecordMapping.Potentials&&e.api_name==this.moduleRecordMapping.Potentials.api_name&&"crossfield"==e.data_type){var f=$("."+this.moduleRecordMapping.Potentials.api_name+"_selectedRadioBtn")[0];!f||"With_Open_Deal"!=f.ltProp("value")&&o.checked?this.toggleDealsField("hide"):this.toggleDealsField("dB")}var y=[];this.getFieldByKeyValue(this.data.allFields,"subField",!0,y),this.setData("checked",y),this.getMethods("onFieldChange")&&this.executeMethod("onFieldChange",y,o,a,e);var h=$L(".cxSmartFilterScrollElem");h&&h.resetScrollbar&&h.resetScrollbar()},updateDropSelectedFields:function(e,t,i,a,l){if(!t||!l||t!==l){for(var o=this.data.cxPropDropSelectedChildFields,r=this.data.cxPropDropBoxChildFields,s=r.length,n=0;n<s;n++)t!==r[n].id?l!==r[n].id||(Lyte.Component.set(this.data.cxPropDropBoxChildFields[n],{hideInDropDown:!0}),o.contains(r[n])||o.push(r[n])):(Lyte.Component.set(this.data.cxPropDropBoxChildFields[n],{hideInDropDown:!1}),o=o.removeAll([r[n]]));this.setData("cxPropDropSelectedChildFields",o);var d,p,c=this.data.appliedFields.concat(this.data.allFields),u=c.length,m=!1;for(n=0;n<u;n++)t===c[n].id&&(d=n),l===c[n].id&&(p=n);void 0===d&&(d=this.data.appliedFields.contains(i.data.field)?i.data.dropIndex:i.data.dropIndex+this.data.appliedFields.length,m=!0);var _=Object.assign({},c[p]),f=Object.assign({},c[d]);if(d===p)return Lyte.Component.set(c[d],{showDummyInput:!1}),void this.$node.querySelector("#field_"+Lyte.Component.registeredHelpers.cruxReplace(_.api_name,"[/.]","_")).click();if(_.cxHide=!1,_.rendered=!1,_.showDummyInput?f.showDummyInput=!0:(f.showDummyInput=!1,f.cxHide=!0),_.showDummyInput=!1,!m){var y=this.$node.querySelector("#field_"+Lyte.Component.registeredHelpers.cruxReplace(f.api_name,"[/.]","_"));y.checked&&y.click()}f.rendered=!1,f.cxAppliedField=!1,Lyte.Component.set(c[d],_),Lyte.Component.set(c[p],f),this.$node.querySelector("#field_"+Lyte.Component.registeredHelpers.cruxReplace(_.api_name,"[/.]","_")).click()}}},scrollFunc:function(e){for(var t,i,a=this.cxFilterFields.filter((e=>!e.displayInFilter)),l=a.length,o=0,r=0;r<l&&(i=!0,(t=a[r])&&t.cxParent&&!t.cxParent.cxOpenState&&(i=!1),i&&(Lyte.objectUtils(t,"add","displayInFilter",!0),o++),!(o>=e));r++);},clearSearchValue:function(e){var t=this.$node.querySelector("#searchId");t.ltProp("value");t.setValue(""),$L(".cxSmFrSearchCloseIconWrap",this.$node).addClass("cxdN").removeClass("cxdB"),this.currArr=this.getData("allFields"),this.currCount=this.initialCount,this.scrollTop=0},closeAllDummyFields:function(){for(var e=this.data.allFields.concat(this.data.appliedFields),t=[],i=e.length,a=0;a<i;a++){if(e[a].showDummyInput&&t.push(e[a].id),"multiselectpicklist"===e[a].data_type&&!e[a].persist_values&&e[a].rendered)Lyte.Component.set(e[a],{rendered:!1}),Lyte.Component.set(e[a],{rendered:!0}),$L("#option_"+e[a].api_name+"_"+e[a].id+"_"+this.data.cxPropChildModuleRelation)[0].component.render(this)}var l=t.length;for(a=0;a<l;a++){var o="#crossFilter_close_"+this.data.id+"_"+t[a],r=$L(o);r&&r.click()}},actions:{searchIconClick:function(e){var t=e.parentNode,i=t.nextElementSibling;i.style.display="block",t.style.display="none",i.querySelector("input").focus()},clearSearch:function(){this.clearSearchValue(),document.querySelector("#searchId").focus()},scrollAct:function(){if(this.data.cxPropEnableScrollLoading){var e=this.$node.querySelector("#lv_filter_scroll");e.scrollTop<this.scrollTop?this.scrollTop=e.scrollTop:(this.scrollTop=e.scrollTop,this.scrollFunc(20))}},showPredictionTooltip:function(){this.$node.querySelector("#tooltipPredictionScore").ltProp("show",!0)},closePredictionTooltip:function(){this.$node.querySelector("#tooltipPredictionScore").ltProp("show",!1)},onCloseChildField:function(e,t){var i=t.parentNode.querySelector("#field_"+this._cruxReplace(e.api_name,"[/.]","_"));i.checked&&(i.click(),Lyte.Component.set(e,{rendered:!1}));var a=t.parentNode.querySelector("lyte-dropdown").component;if(""!=a.getData("ltPropSelected")){var l=a.getData("ltPropSelected");a.setData("ltPropSelected","");for(var o=this.data.cxPropDropSelectedChildFields,r=this.data.cxPropDropBoxChildFields,s=r.length,n=0;n<s;n++)if(l===r[n].id){Lyte.Component.set(this.data.cxPropDropBoxChildFields[n],{hideInDropDown:!1}),o=o.removeAll([r[n]]);break}this.setData("cxPropDropSelectedChildFields",o)}Lyte.Component.set(e,{cxHide:!0}),Lyte.Component.set(e,{showDummyInput:!1});var d=this.data.allFields.concat(this.data.appliedFields);this.$node.closest("crux-smart-filter-crossfields").component.updateFieldsOnRemove(d)}},getSpecialFields:function(e){if(!Object.keys(this.moduleRecordMapping).length)return[];var t=this.moduleRecordMapping,i=[],a=[{api_name:"cxFilter_TouchedRecords",showCommonError:!0,visible:!0,data_type:"custom",field_label:_cruxUtils.getI18n("crm.label.touched.records"),display_field_label:_cruxUtils.getI18n("crm.label.touched.records")},{api_name:"cxFilter_UnTouchedRecords",showCommonError:!0,visible:!0,data_type:"custom",field_label:_cruxUtils.getI18n("crm.label.untouched.records"),display_field_label:_cruxUtils.getI18n("crm.label.untouched.records")},{api_name:"cxFilter_RecordAction",showCommonError:!0,visible:!0,data_type:"custom",field_label:_cruxUtils.getI18n("crm.label.record.action"),display_field_label:_cruxUtils.getI18n("crm.label.record.action"),cxFilter_RecordAction:!0,values:[{system:"Modified",display:_cruxUtils.getI18n("workflow.rule.view.label.Modified")},{system:"Not Modified",display:_cruxUtils.getI18n("crm.label.not.modified")}]},{api_name:"cxFilter_RelatedRecordsAction",showCommonError:!0,visible:!0,data_type:"custom",field_label:_cruxUtils.getI18n("crm.label.related.records.action"),display_field_label:_cruxUtils.getI18n("crm.label.related.records.action"),cxFilter_RecordAction:!0,values:[{system:"Done",display:_cruxUtils.getI18n("Done")},{system:"Not Done",display:_cruxUtils.getI18n("crm.label.not.done")}]}],l=(e.startsWith("CustomModule"),this.getIndex(this.getData("module_info").related_lists,"SCOREPERSONALITY","personality_name",!0));if(!1!==l&&l>=0&&this.isScoreSupportedView){var o={api_name:"cxFilter_Scoring_Rule",showCommonError:!0,visible:!0,field_data_type:"crossfield",field_label:_cruxUtils.getI18n("crm.label.scoring.rules"),display_field_label:_cruxUtils.getI18n("crm.label.scoring.rules"),disableExtraValue:!0};o.crossFields=[{api_name:"Positive_Score",field_data_type:"integer",data_type:"number",field_label:_cruxUtils.getI18n("Positive Score"),module_name:t[e].api_name},{api_name:"Negative_Score",field_data_type:"integer",data_type:"number",field_label:_cruxUtils.getI18n("Negative Score"),module_name:t[e].api_name,allowNegativeValue:!0},{api_name:"Touch_Point_Positive_Score",field_data_type:"integer",data_type:"number",field_label:_cruxUtils.getI18n("Positive Touch Point Score"),module_name:t[e].api_name},{api_name:"Touch_Point_Negative_Score",field_data_type:"integer",data_type:"number",field_label:_cruxUtils.getI18n("Negative Touch Point Score"),module_name:t[e].api_name,allowNegativeValue:!0},{api_name:"Touch_Point_Score",field_data_type:"integer",data_type:"number",field_label:_cruxUtils.getI18n("Touch Point Score"),module_name:t[e].api_name,allowNegativeValue:!0},{api_name:"Score",field_data_type:"integer",data_type:"number",field_label:_cruxUtils.getI18n("Score"),module_name:t[e].api_name,allowNegativeValue:!0}];["Leads","Contacts"].contains(e)||o.crossFields.splice(2,3),a.push(o)}if(this.convertedViews&&"Messages"!=e)return Lyte.arrayUtils(i,"insertAt",0,a),i;if(this.isThresholdSupportedModule(e)){var r={api_name:"cxFilter_UnallocatedRecords",cxType:"single",visible:!0,data_type:"picklist",field_label:_cruxUtils.getI18n("crm.unallocated.records"),pick_list_values:[]};Lyte.arrayUtils(i,"insertAt",0,r)}var s=t.Campaigns?{api_name:"cxFilter_Campaigns",visible:!0,data_type:"crossfield",field_label:t.Campaigns.plural_label,display_field_label:t.Campaigns.plural_label,pick_list_values:[{actual_value:"Planned",display_value:_cruxUtils.getI18n("Planned")},{actual_value:"Invited",display_value:_cruxUtils.getI18n("Invited")},{actual_value:"Sent",display_value:_cruxUtils.getI18n("Sent")},{actual_value:"Received",display_value:_cruxUtils.getI18n("Received")},{actual_value:"Opened",display_value:_cruxUtils.getI18n("Opened")},{actual_value:"Responded",display_value:_cruxUtils.getI18n("Responded")},{actual_value:"Bounced",display_value:_cruxUtils.getI18n("Bounced")},{actual_value:"Opted Out",display_value:_cruxUtils.getI18n("Opted Out")}]}:void 0,n=t.Potentials?{api_name:"cxFilter_Deals",visible:!0,data_type:"crossfield",field_label:t.Potentials.plural_label,display_field_label:t.Potentials.plural_label,options:[{api_name:"With_Open_Deal",data_type:"date",field_label:_cruxUtils.getI18n("crm.filter.label.with.open",t.Potentials.singular_label)},{api_name:"Without_Open_Deal",data_type:"date",field_label:_cruxUtils.getI18n("crm.filter.label.without.open",t.Potentials.singular_label)},{api_name:"Without_Any_Deal",data_type:"nofield",field_label:_cruxUtils.getI18n("crm.filter.label.without.any",t.Potentials.singular_label)}]}:void 0,d=t.Contacts?{api_name:"cxFilter_Contacts",visible:!0,data_type:"crossfield",field_label:t.Contacts.plural_label,display_field_label:t.Contacts.plural_label,options:[{api_name:"With_Contact",data_type:"nofield",field_label:_cruxUtils.getI18n("crm.filter.label.with.module",t.Contacts.singular_label)},{api_name:"Without_Any_Contact",data_type:"nofield",field_label:_cruxUtils.getI18n("crm.filter.label.without.any",t.Contacts.singular_label)}]}:void 0,p=t.Activities?{api_name:"cxFilter_Activities",visible:!0,data_type:"crossfield",field_label:t.Activities.plural_label,display_field_label:t.Activities.plural_label,options:[{api_name:"Without_Open_Activity",data_type:"nofield",field_label:_cruxUtils.getI18n("crm.filter.label.without.open",t.Activities.singular_label)},{api_name:"Overdue",data_type:"activity",field_label:_cruxUtils.getI18n("Overdue")},{api_name:"Activity_Due",data_type:"activity",field_label:_cruxUtils.getI18n("crm.filter.label.activity.due",t.Activities.singular_label)},{api_name:"Without_Any_Activity",showCommonError:!0,data_type:"date",field_label:_cruxUtils.getI18n("crm.filter.label.without.any",t.Activities.singular_label)},{api_name:"Activity_Done",showCommonError:!0,data_type:"date",field_label:_cruxUtils.getI18n("crm.filter.label.activity.done",t.Activities.singular_label)}]}:void 0,c=t.Notes?{api_name:"cxFilter_Notes",visible:!0,showCommonError:!0,data_type:"crossfield",field_label:t.Notes.plural_label,display_field_label:t.Notes.plural_label,options:[{api_name:"Without_Any_Notes",showCommonError:!0,errorFieldLabel:_cruxUtils.getI18n("Date"),data_type:"date",field_label:_cruxUtils.getI18n("crm.filter.label.without.any",_cruxUtils.getI18n("Notes"))},{api_name:"Notes_Added",showCommonError:!0,errorFieldLabel:_cruxUtils.getI18n("Date"),data_type:"date",field_label:_cruxUtils.getI18n("crm.filter.label.notes.added")}]}:void 0,u={api_name:"cxFilter_Email_Status",cxTooltipInfo:_cruxUtils.getI18n("crm.label.filter.email.info"),showCommonError:!0,visible:!0,data_type:"custom",field_label:_cruxUtils.getI18n("crm.label.filter.email.status"),display_field_label:_cruxUtils.getI18n("crm.label.filter.email.status")},m={api_name:"cxFilter_Email_Sentiment",showCommonError:!0,visible:!0,data_type:"crossfield",field_label:_cruxUtils.getI18n("sentiment.model"),display_field_label:_cruxUtils.getI18n("sentiment.model"),options:[{ParentField:"cxFilter_Email_Sentiment",api_name:"count",showCommonError:!0,data_type:"integer",field_label:_cruxUtils.getI18n("sentiment.criteria.count")},{ParentField:"cxFilter_Email_Sentiment",api_name:"percentage",showCommonError:!0,data_type:"integer",field_label:_cruxUtils.getI18n("sentiment.criteria.percentage")},{ParentField:"cxFilter_Email_Sentiment",api_name:"For_The_Last_Email",data_type:"nofield",field_label:_cruxUtils.getI18n("sentiment.criteria.lastmail")}]},_=t.LockingInformation&&this.getData("module_info").fields&&this.getData("module_info").fields.filterBy({api_name:"Locked__s"})[0]?{api_name:"cxFilter_Locked",visible:!0,data_type:"crossfield",field_label:_cruxUtils.getI18n("crm.record.locked"),display_field_label:_cruxUtils.getI18n("crm.record.locked"),options:[{api_name:"Locked_True",showSubField:!1,data_type:"recordlocks",field_label:_cruxUtils.getI18n("crm.label.true")},{api_name:"Locked_False",showSubField:!1,data_type:"recordlocks",field_label:_cruxUtils.getI18n("crm.label.false")}]}:void 0;if("entprofon"==this.data.cxPropCurrentUserDetails.emailTrackingOption?(u.sent_status=[{api_name:"opened",field_label:_cruxUtils.getI18n("crm.filter.label.opened")},{api_name:"clicked",field_label:_cruxUtils.getI18n("crm.label.filter.email.clicked")},{api_name:"not_opened",field_label:_cruxUtils.getI18n("crm.filter.label.not.opened")},{api_name:"bounced",field_label:_cruxUtils.getI18n("crm.filter.label.bounced")},{api_name:"responded",field_label:_cruxUtils.getI18n("crm.label.filter.email.responded")},{api_name:"opened_and_not_replied",field_label:_cruxUtils.getI18n("crm.filter.label.opened.not.replied")},{api_name:"any_of_the_above",field_label:_cruxUtils.getI18n("crm.filter.label.any")}],u.options=[{system:"sent",display:_cruxUtils.getI18n("crm.filter.label.sent")},{system:"not_sent",display:_cruxUtils.getI18n("crm.filter.label.not.sent")},{system:"opened",display:_cruxUtils.getI18n("crm.filter.label.opened")},{system:"not_opened",display:_cruxUtils.getI18n("crm.filter.label.not.opened")},{system:"clicked",display:_cruxUtils.getI18n("crm.label.filter.email.clicked")},{system:"received",display:_cruxUtils.getI18n("crm.filter.label.received")},{system:"not_received",display:_cruxUtils.getI18n("crm.filter.label.not.received")},{system:"replied",display:_cruxUtils.getI18n("crm.filter.label.replied")},{system:"bounced",display:_cruxUtils.getI18n("crm.filter.label.bounced")},{system:"responded",display:_cruxUtils.getI18n("crm.label.filter.email.responded")},{system:"opened_and_not_replied",display:_cruxUtils.getI18n("crm.filter.label.opened.not.replied")}]):"entprofoff"==this.data.cxPropCurrentUserDetails.emailTrackingOption?(u.sent_status=[{api_name:"bounced",field_label:_cruxUtils.getI18n("crm.filter.label.bounced")}],u.options=[{system:"sent",display:_cruxUtils.getI18n("crm.filter.label.sent")},{system:"not_sent",display:_cruxUtils.getI18n("crm.filter.label.not.sent")},{system:"received",display:_cruxUtils.getI18n("crm.filter.label.received")},{system:"not_received",display:_cruxUtils.getI18n("crm.filter.label.not.received")},{system:"bounced",display:_cruxUtils.getI18n("crm.filter.label.bounced")}]):"stdon"==this.data.cxPropCurrentUserDetails.emailTrackingOption?(u.sent_status=[{api_name:"opened",field_label:_cruxUtils.getI18n("crm.filter.label.opened")},{api_name:"clicked",field_label:_cruxUtils.getI18n("crm.label.filter.email.clicked")},{api_name:"not_opened",field_label:_cruxUtils.getI18n("crm.filter.label.not.opened")},{api_name:"bounced",field_label:_cruxUtils.getI18n("crm.filter.label.bounced")},{api_name:"responded",field_label:_cruxUtils.getI18n("crm.label.filter.email.responded")},{api_name:"opened_and_not_replied",field_label:_cruxUtils.getI18n("crm.filter.label.opened.not.replied")},{api_name:"any_of_the_above",field_label:_cruxUtils.getI18n("crm.filter.label.any")}],u.options=[{system:"sent",display:_cruxUtils.getI18n("crm.filter.label.sent")},{system:"not_sent",display:_cruxUtils.getI18n("crm.filter.label.not.sent")},{system:"opened",display:_cruxUtils.getI18n("crm.filter.label.opened")},{system:"not_opened",display:_cruxUtils.getI18n("crm.filter.label.not.opened")},{system:"clicked",display:_cruxUtils.getI18n("crm.label.filter.email.clicked")},{system:"replied",display:_cruxUtils.getI18n("crm.filter.label.replied")},{system:"bounced",display:_cruxUtils.getI18n("crm.filter.label.bounced")},{system:"responded",display:_cruxUtils.getI18n("crm.label.filter.email.responded")}]):(u.sent_status=[{api_name:"bounced",field_label:_cruxUtils.getI18n("crm.filter.label.bounced")}],u.options=[{system:"sent",display:_cruxUtils.getI18n("crm.filter.label.sent")},{system:"not_sent",display:_cruxUtils.getI18n("crm.filter.label.not.sent")},{system:"bounced",display:_cruxUtils.getI18n("crm.filter.label.bounced")}]),t[e]&&"custom"==t[e].generated_type&&c&&p){var f=[];"Free"!=this.data.cxPropCurrentUserDetails.EDITION_NAME&&f.push(u),t.Activities&&p&&t.Activities.visible&&t.Activities.viewable&&f.push(p),this.data.supportRelatedModules||f.push(c),Lyte.arrayUtils(i,"insertAt",0,f)}if("Accounts"==e||"Contacts"==e){"Accounts"==e&&t.Contacts&&d&&t.Contacts.visible&&t.Contacts.viewable&&!this.data.supportRelatedModules?Lyte.arrayUtils(i,"insertAt",0,d):"Accounts"!=e&&t.Campaigns&&t.Campaigns.visible&&t.Campaigns.viewable&&s&&Lyte.arrayUtils(i,"insertAt",0,s);var y=t.Potentials?store.peekRecord("module",t.Potentials.id):void 0;if(y&&y.visible&&y.viewable&&y.fields&&y.fields.length&&n&&!this.data.supportRelatedModules){var h=y.fields[this.getIndex(y.fields,"Stage","api_name",!0)].pick_list_values,x=[],g=y.fields.filterBy({api_name:"Amount"})[0];g&&x.push({api_name:"cxFilter_Deal_Amount",visible:!0,name:"Amount",data_type:"currency",field_label:t.Potentials.singular_label+" "+g.field_label,display_field_label:t.Potentials.singular_label+" "+g.field_label}),(g=y.fields.filterBy({api_name:"Stage"})[0])&&x.push({api_name:"cxFilter_Deal_Stage",visible:!0,name:"Stage",data_type:"picklist",field_label:t.Potentials.singular_label+" "+g.field_label,display_field_label:t.Potentials.singular_label+" "+g.field_label,pick_list_values:h}),(g=y.fields.filterBy({api_name:"Owner"})[0])&&x.push({api_name:"cxFilter_Deal_Owner",visible:!0,name:"Owner",data_type:"ownerlookup",field_label:g.field_label,display_field_label:g.field_label}),(g=y.fields.filterBy({api_name:"Closing_Date"})[0])&&x.push({api_name:"cxFilter_Deal_Closing_Date",visible:!0,name:"Closing_Date",data_type:"date",field_label:t.Potentials.singular_label+" "+g.field_label,display_field_label:t.Potentials.singular_label+" "+g.field_label}),Lyte.arrayUtils(i,"insertAt",0,x),Lyte.arrayUtils(i,"insertAt",0,n)}}if("Leads"!=e&&"Potentials"!=e&&"Deals"!=e&&"Contacts"!=e||("Leads"==e&&t.Campaigns&&t.Campaigns.visible&&t.Campaigns.viewable&&Lyte.arrayUtils(i,"insertAt",0,s),c&&!this.data.supportRelatedModules&&Lyte.arrayUtils(i,"insertAt",0,c),t.Activities&&p&&t.Activities.visible&&t.Activities.viewable&&Lyte.arrayUtils(i,"insertAt",0,p)),this.data.cxPropCurrentUserDetails.emailStausEnabledModule&&-1!==this.data.cxPropCurrentUserDetails.emailStausEnabledModule.indexOf(this.data.cxPropModule)&&Lyte.arrayUtils(i,"insertAt",0,u),"Visits"!=e&&"Messages"!=e&&(!this.data.cxPropCurrentUserDetails.emailsentimentEnabled||-1==["Leads","Contacts","Accounts","Deals","Potentials"].indexOf(e)&&"custom"!=t[e].generated_type||Lyte.arrayUtils(i,"insertAt",0,m),t.LockingInformation&&_&&Lyte.arrayUtils(i,"insertAt",0,_),Lyte.arrayUtils(i,"insertAt",0,a)),t[e]&&t[e].isRecommendationsEnable&&t[e].recommendationsDetailsJson&&t[e].recommendationsDetailsJson.what_to&&t[e].recommendationsDetailsJson.what_to.tab_label){var v={cxFilter_RecordAction:!1,api_name:"Recommendation",data_type:"recommendation",field_label:_cruxUtils.getI18n("crm.setup.system.ziarecommendation"),display_field_label:_cruxUtils.getI18n("crm.setup.system.ziarecommendation"),showCommonError:!0,visible:!0,values:[{system:"all",display:_cruxUtils.getI18n("crm.filter.label.all.products",t[e].recommendationsDetailsJson.what_to.tab_label)},{system:"selected",display:_cruxUtils.getI18n("crm.filter.label.select.products",t[e].recommendationsDetailsJson.what_to.tab_label)}]};Lyte.arrayUtils(i,"insertAt",i.length,v)}if(t[e]&&t[e].isSimilarityEnable){var b={cxFilter_RecordAction:!1,api_name:"Similarity",data_type:"similarity",field_label:_cruxUtils.getI18n("crm.setup.system.ziasimilarity"),display_field_label:_cruxUtils.getI18n("crm.setup.system.ziasimilarity"),showCommonError:!0,visible:!0,values:[],options:[]},D=t[e].plural_label;b.crossFields=[{api_name:"SimilarityAvailable",field_label:_cruxUtils.getI18n("crm.label.available"),crossFields:[{api_name:"SimilarityScore",field_label:_cruxUtils.getI18n("zia.similarity.smartfilter.score"),data_type:"integer"},{api_name:"SimilarityRecords",field_label:_cruxUtils.getI18n("zia.similarity.smartfilter.records.search",D)}]},{api_name:"SimilarityNotAvailable",showSubField:!1,field_label:_cruxUtils.getI18n("crm.gdpr.notavailable.field")}],Lyte.arrayUtils(i,"insertAt",i.length,b)}if(t[e]&&t[e].best_time_data&&t[e].best_time_data.isBestTimeEnabled){var S={api_name:"best_time",data_type:"BestTime",field_label:_cruxUtils.getI18n("crm.best.time.column.label"),display_field_label:_cruxUtils.getI18n("crm.best.time.column.label"),showCommonError:!0,visible:!0,options:[]};Lyte.arrayUtils(i,"insertAt",i.length,S)}if((this.data.cxPropCurrentUserDetails.permissions.Crm_Implied_View_Calls||this.data.cxPropCurrentUserDetails.permissions.Crm_Implied_View_Events||["Potentials","Deals"].contains(e)?Crm.userDetails.permissions.Crm_Implied_Send_Mail_Potentials:Crm.userDetails.permissions.Crm_Implied_Send_Mail_Leads)&&("Potentials"===e||"Deals"===e||"Leads"===e)&&t[e]&&t[e].isNbxEnabled){var F={cxFilter_RecordAction:!1,api_name:"next_best_experience",data_type:"NBX",field_label:_cruxUtils.getI18n("crm.zia.nba.feature.label"),display_field_label:_cruxUtils.getI18n("crm.zia.nba.feature.label"),showCommonError:!0,visible:!0,values:[],nbx_details:t[e].NBX},C=[];this.data.cxPropCurrentUserDetails.permissions.Crm_Implied_View_Calls&&C.push({actual_value:"Calls",display_value:_cruxUtils.getI18n("Call")}),this.data.cxPropCurrentUserDetails.permissions.Crm_Implied_View_Events&&C.push({actual_value:"Events",display_value:_cruxUtils.getI18n("Meeting")}),this.data.cxPropCurrentUserDetails.permissions.Crm_Implied_Send_Mail_Potentials&&C.push({actual_value:"Emails",display_value:_cruxUtils.getI18n("crm.field.label.email")}),F.crossFields=[{api_name:"NBX_Available",field_label:_cruxUtils.getI18n("crm.label.available"),data_type:"NBX",pick_list_values:C},{api_name:"NBX_NotAvailable",field_label:_cruxUtils.getI18n("crm.gdpr.notavailable.field"),data_type:"nofield"}],Lyte.arrayUtils(i,"insertAt",i.length,F)}if(t[e]&&t[e].isPredictionEnabled){for(var T={api_name:"Prediction",data_type:"Prediction",field_label:_cruxUtils.getI18n("crm.predictions.feature.label"),display_field_label:_cruxUtils.getI18n("crm.predictions.feature.label"),showCommonError:!0,visible:!0,options:[]},A=[{system:"no_trend",display:_cruxUtils.getI18n("crm.zia.prediction.notrend")},{system:"trend_up",display:_cruxUtils.getI18n("crm.intelligence.prediction.trendup")},{system:"trend_down",display:_cruxUtils.getI18n("crm.intelligence.prediction.trenddown")}],L=t[e].prediction_details.slice(),I=t[e].fields,M=I.length,E=L.length,U=0;U<E;U++){for(var w=void 0,O=void 0,P=0;P<M&&(I[P].id===L[U].prediction_field.id&&(w=I[P]),L[U].score_field&&I[P].id===L[U].score_field.id&&(O=I[P]),!O||!w);P++);w&&w.visible&&w.available_in_user_layout&&(!O&&!L[U].score_field||O&&O.visible&&O.available_in_user_layout)?T.options.push({api_name:"Prediction_"+U,system:L[U].id,display:L[U].name,criteria_field:L[U].prediction_field,score_field:L[U].prediction_score_field,trend:A}):t[e].prediction_details.splice(U,1)}T.options[0]&&(T.options.push({api_name:"completed_prediction",system:"completed_prediction",display:"Completed Prediction"}),Lyte.arrayUtils(i,"insertAt",i.length,T))}var N=this.data.module_info.custom_view;if(N&&N.system_name&&N.system_name.startsWith("REVIEWPROCESS")){var R=store.peekAll("field").filterBy({api_name:"Record_status"});if(R[0])this.addReviewField(this,i,R[0]);else{var k=this;store.findAll("field",{module:"Review_Processes"},!0,!0,{apiVersion:"2.2"}).then((function(e){var t=k.getData("allFields").filter((e=>"special_field"==e.cxAccordionName))[0].cxFields;k.addReviewField(k,t,e.filter((function(e){return"Record_status"===e.api_name}))[0]),k.Record_status_field&&(k.otherCrossFieldHandling(k.Record_status_field),delete k.Record_status_field)}))}}if("Messages"==e){var V=[{api_name:"cxFilter_Not_Replied_Messages",showCommonError:!0,visible:!0,data_type:"datetime",field_label:_cruxUtils.getI18n("crm.msg.custom.view.not.replied"),display_field_label:_cruxUtils.getI18n("crm.msg.custom.view.not.replied")},{api_name:"cxFilter_Replied_Messages",showCommonError:!0,visible:!0,data_type:"datetime",field_label:_cruxUtils.getI18n("crm.msg.custom.view.replied"),display_field_label:_cruxUtils.getI18n("crm.msg.custom.view.replied")}];Lyte.arrayUtils(i,"insertAt",0,V)}if(("Contacts"===e||"Leads"===e)&&this.data.module_info.isCompetitorMentionEnabled){var q=[],$=1;this.data.module_info.competitor_mention_details.competitors.forEach((e=>{q.push({actual_value:e,display_value:e,sequence_number:$}),$++}));var B=[{actual_value:"Positive",display_value:_cruxUtils.getI18n("crm.sentiment.Positive"),sequence_number:1,type:"used"},{actual_value:"Negative",display_value:_cruxUtils.getI18n("crm.sentiment.Negative"),sequence_number:2,type:"used"},{actual_value:"Neutral",display_value:_cruxUtils.getI18n("crm.sentiment.Neutral"),sequence_number:3,type:"used"}],j={api_name:"cxFilter_Competitor_Alert",showCommonError:!0,visible:!0,data_type:"competitor",field_label:_cruxUtils.getI18n("crm.competitor.name"),options:[{api_name:"Competitor_Name",data_type:"picklist",field_label:"Competitor Name",display_field_label:"Competitor Name",pick_list_values:q,isRadioBtn:!1},{api_name:"Competitor_Duration",data_type:"date",field_data_type:"date",field_label:"Competitor_Duration",display_field_label:"Competitor Duration",pick_list_values:q,cxLabel:_cruxUtils.getI18n("crm.competitoralert.mentioned.in.email"),isRadioBtn:!1,cxClass:"mT10 mB10",cxStyle:"font-size: 14px"},{api_name:"Competitor_Sentiment",data_type:"picklist",field_label:"Competitor Sentiment",display_field_label:"Competitor Sentiment",pick_list_values:B,cxLabel:_cruxUtils.getI18n("crm.competitoralert.with.sentiment"),isRadioBtn:!1,cxClass:"dB mT10 mB10",cxStyle:"font-size: 14px"}]};Lyte.arrayUtils(i,"insertAt",i.length,j)}return this.data.cxPropCurrentUserDetails.seriesFilterEnabled&&this.addSeriesField(i),i},addSeriesField:function(e){moduleRecordMapping.Entity_Cadences&&moduleRecordMapping.Entity_Cadences.fields?this.addSeriesFieldsIntoArr(moduleRecordMapping.Entity_Cadences.fields,e):store.findAll("field",{module:"Entity_Cadences__s"},!0,!0,{apiVersion:"4.0"}).then((e=>{this.addSeriesFieldsIntoArr(e)}))},addSeriesFieldsIntoArr:function(e,t){var a={api_name:"cxFilter_Series",displayInFilter:!0,showCommonError:!0,visible:!0,field_data_type:"crossfield",field_label:_cruxUtils.getI18n("crm.label.series"),display_field_label:_cruxUtils.getI18n("crm.label.series"),disableExtraValue:!0,crossFields:[]},l=e.length;for(i=0;i<l;i++){var o={};"Cadencesid__s"!==e[i].api_name&&"Name"!==e[i].api_name&&"Seid__s"!==e[i].api_name&&"EntityCadencesid__s"!==e[i].api_name&&"id"!==e[i].api_name&&(o.api_name=e[i].api_name,"Cadencesid__s"===e[i].api_name?o.pick_list_values=this.getData("seriesArr"):o.pick_list_values=e[i].pick_list_values,o.field_data_type=e[i].field_data_type,o.data_type=e[i].data_type,o.field_label=e[i].field_label,o.module_name=moduleRecordMapping.Entity_Cadences.api_name,a.crossFields.push(o))}if(t)t.push(a);else{var r=this.getData("allFields").filter((e=>"special_field"===e.cxAccordionName))[0].cxFields,s=[];s.push(a),Lyte.arrayUtils(r,"insertAt",r.length,s),this.allfieldType&&!this.allfieldType[a.api_name]&&(this.allfieldType[a.api_name]=a.data_type),this.getFieldByKeyValue(this.data.allFields,"","",this.cxFilterFields=[])}},addReviewField:function(e,t,i){var a,l,o=i.pick_list_values.slice(0),r=o.length;for(l=0;l<r;l++)-1!==["Approved","Unreviewed"].indexOf(o[l].actual_value)&&(Lyte.arrayUtils(o,"removeAt",l,1),l-=1,r-=1);a={api_name:"cxFilter_Record_status",displayInFilter:!0,visible:!0,data_type:"picklist",field_label:_cruxUtils.getI18n("crm.reviewprocess.smart.filter"),display_field_label:_cruxUtils.getI18n("crm.reviewprocess.smart.filter"),pick_list_values:o},e.allfieldType&&(e.allfieldType[a.api_name]=a.data_type),a.cxFromArray=t,Lyte.arrayUtils(t,"insertAt",t.length,a),e.getFieldByKeyValue(e.data.allFields,"","",e.cxFilterFields=[])},getVisitsFields:function(e,t,i){if("undefined"==typeof Crm)return[];var a=[],l=this.moduleRecordMapping;if("object"==typeof CrmTracking&&CrmTracking.portalsInfo&&Object.keys(CrmTracking.portalsInfo).length&&("Leads"==e||"Contacts"==e)&&l.Visits&&l.Visits.viewable&&!window.clientPortalName){var o,r=l.Visits.fields?l.Visits.fields:[],s=t||[],n=0,d=0,p=r?r.length:0,c=!1,u=!1,m=s?s.length:0,_=["Average_Time_Spent_Minutes","Days_Visited","First_Visited_URL","First_Visited_Time","Last_Visited_Time","Number_Of_Chats","Referrer","Visitor_Score"],f=new Array(8),y=["ATTENDEDBY","BROWSER","OPERATINGSYSTEM","PORTAL_NAME","SEARCHENGINE","TIMESPENT","VISITEDTIME"],h=this.data.cxPropDisplayAsAccord,x=-1,g=[];if(h){var v=s.length;for(n=0;n<v;n++)if("moduleFields"===s[n].cxAccordionName){x=n,m=(g=this.data.supportRelatedModules&&s[x].cxFields[0].cxFields?s[x].cxFields[0].cxFields:s[x].cxFields).length;break}}for(o=new Array(8);n<p||d<m;)r[n]&&n<p&&(-1!=y.indexOf(r[n].column_name)&&(u=!0,f[y.indexOf(r[n].column_name)+1]=r[n]),n+=1),(s[d]||h&&g[d])&&(x>-1&&-1!=_.indexOf(g[d].api_name)?(c=!0,o[_.indexOf(g[d].api_name)]=g[d],Lyte.arrayUtils(g,"removeAt",d,1),d-=1,m-=1):-1===x&&-1!=_.indexOf(s[d].api_name)&&(c=!0,o[_.indexOf(s[d].api_name)]=s[d],Lyte.arrayUtils(s,"removeAt",d,1),d-=1,m-=1),d+=1);c&&Lyte.arrayUtils(a,"insertAt",0,o),u&&(f[0]={api_name:"cxFilter_Chats",filterable:!0,available_in_user_layout:!0,visible:!0,data_type:"crossfield",field_label:_cruxUtils.getI18n("Chats"),display_field_label:_cruxUtils.getI18n("Chats"),options:[{api_name:"Attended",showCommonError:!0,errorFieldLabel:_cruxUtils.getI18n("Date"),data_type:"date",field_label:_cruxUtils.getI18n("Attended")},{api_name:"Missed",showCommonError:!0,errorFieldLabel:_cruxUtils.getI18n("Date"),data_type:"date",field_label:_cruxUtils.getI18n("Missed")}]},Lyte.arrayUtils(a,"insertAt",0,f)),i.displayVisitField=a,t=s}i.moduleFields=t},similarityClientTracking:function(e,t,i){var a=this.moduleRecordMapping[e];if(a){var l=a.module_name.includes("CustomModule")||"default"!==a.generated_type?"CustomModule":a.api_name,o={};o.Action=t,o.module=l,Crm.client_tracking(i,o)}},getABMCriteria:function(e,t,i){var a=this.getData("cxPropCommonInfo"),l=a.abmModuleInfo.isAccountModule,o={api_name:this.data.supportRelatedModules?"ABM_Account__r":"ABM_Accounts"},r=o.api_name;return l||(r=(o={type:"field",api_name:a.abmModuleInfo.account_name.api_name,relation:o}).relation.api_name),{cross_filter:{include_objects:!0,relation:o,criteria:{comparator:t,field:{api_name:e},value:i}},relation_api_name:r}},getFilterCriteria:function(){var e=0,t=0,i=!1,a=this.getData("cxPropCommonInfo"),l=(a&&a.abmModuleInfo&&a.abmModuleInfo.techniqueFields,0),o=!1,r=[];if(this.getFieldByKeyValue(this.data.allFields,"subField",!0,r),this.data.cxPropChildModuleFields&&this.data.cxPropChildSelectedFieldCount&&this.data.cxPropChildSelectedFieldCount>r.length)return{dummyFieldSelected:!0,display_label:this.data.cxPropChildModuleDisplayLabel};if(!r.length)return{noFieldSelected:!0};this.specialDateObject={};var s,n,d,p,c,u,m=this.moduleRecordMapping,_=(this.idModuleMapping,this.getData("cxPropModuleDisplayField"),r.length),f="",y=[],h=[],x=[],g=!1,v=!1,b={},D=this.getData("cxPropModule"),S=$L("#option_Prediction")[0],F=$L("#sub_option_Prediction_0")[0],C=$L("#sub_option_Prediction_1")[0],T=$L("#sub_field_NBX_Available")[0],A=$L("#sub_field_NBX_NotAvailable")[0],L=$L("#NBX_ACTIVITY_OPTION")[0],I=$L("#sub_option_NBX_Available")[0];for(n=0;n<_;n++)if(p=r[n].api_name,!r[n]||"hide"!=r[n].classInFilter){if(r[n]&&"ABM_Techniques"===r[n].field_data_type&&"ABM_Techniques"===p&&t<this.getData("abmTechniqueFieldsLength")&&(p="",0===t&&(i=!1),$L("#sub_field_"+r[n].crossFields[t].api_name)[0].checked&&(i=!0,p=r[n].crossFields[t].api_name),n-=1,t+=1),r[n]&&"ABM_Scores"===r[n].field_data_type&&"ABM_Scores"===p&&l<this.getData("abmScoreFieldLength")&&(p="",0===l&&(o=!1),$L("#sub_field_"+r[n].crossFields[l].api_name)[0].checked&&(o=!0,p=r[n].crossFields[l].api_name),n-=1,l+=1),r[n]&&r[n]&&"rfm"===r[n].field_data_type&&"Segment_Score"===p&&e<3&&(p="",0==e&&(s=!1),$L("#sub_field_"+r[n].crossFields[e].api_name)[0].checked&&(s=!0,p=r[n].crossFields[e].api_name),n-=1,e+=1),0==s&&3==e)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",r[n+1].display_field_label)),{isValdationFailure:!0};if(0!==this.getData("abmTechniqueFieldsLength")&&!1===i&&t===this.getData("abmTechniqueFieldsLength"))return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",r[n+1].display_field_label)),{isValdationFailure:!0};if(0!==this.getData("abmScoreFieldLength")&&!1===o&&l===this.getData("abmScoreFieldLength"))return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",r[n+1].display_field_label)),{isValdationFailure:!0};v=!0,-1!==["Recency","Frequency","Monetary"].indexOf(p)&&this.rfm_avilable||this.getData("abmTechniqueFieldList")&&-1!==this.getData("abmTechniqueFieldList").indexOf(p)&&this.abm_technique_field_avilable||this.getData("abmScoreFieldList")&&-1!==this.getData("abmScoreFieldList").indexOf(p)&&this.abm_score_field_available?d="#sub_option_"+this._cruxReplace(p,"[/.]","_"):(d="#option_"+this._cruxReplace(p,"[/.]","_"),d=this.data.cxPropChildModuleFields?d+"_"+r[n].id+"_"+this.data.cxPropChildModuleRelation:d);var M=this.$node.querySelector(d);if(M&&"Segment_Score"!==p&&"ABM_Techniques"!==p&&"ABM_Scores"!==p){var E=M.getData("field");if("dN"!=E.classInFilter)if(-1!=this.data.cxPropYieldCriteriaFields.indexOf(E.api_name)&&this.getMethods("onCriteriaConstruct")){if((Ft=this.executeMethod("onCriteriaConstruct",{component:this,field:E,crossFilterCriteria:h,filterCriteria:x}))||(Ft={isValdationFailure:!0}),Ft.isValdationFailure)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",Lyte.Component.registeredHelpers.cruxEncodeHTML(E.display_field_label))),Ft;if(Ft.cross_filter){var U=Ft.cross_filter;this.updateCrossFilter(h,U.relation.api_name,U)}else Lyte.arrayUtils(y,"push",Ft)}else{if("crossModule"!==E.field_data_type)if("recommendation"!=E.field_data_type)if("similarity"!==E.field_data_type){if("BestTime"===E.field_data_type){g="best_time";var w=$L("#by_best_time")[0].component.getData("ltPropSelected"),O=new Date,P=O.getDay();"${TOMORROW}"===w&&(O.setDate(O.getDate()+1),P=O.getDay());var N=60*O.getTimezoneOffset(),R=[],k={},V=[];if(m[D].best_time_data&&m[D].best_time_data.businessHours&&(V="${TODAY}"===w?m[D].best_time_data.businessHours.today:m[D].best_time_data.businessHours.tomorrow),0!==V.length){var[q,B]=V[0].split(":").map((e=>parseInt(e,10))),[j,H]=V[1].split(":").map((e=>parseInt(e,10)));const e=60*1,t=60*e,i=24*t;let a=P*i+q*t+B*e+N,l=P*i+j*t+H*e+N;if("${TODAY}"===w){let o=P*i+O.getHours()*t+O.getMinutes()*e+N;o>a&&o<l&&(a=o,q=O.getHours(),B=O.getMinutes())}let o=Math.floor(a/i),r=Math.floor(l/i);if(o=(o+7)%7,r=(r+7)%7,a%=i,l%=i,a<0&&(a+=i),l<0&&(l+=i),0===q&&0===B&&24===j&&0===H&&0!==N?(R.push([o,a,i]),R.push([r,0,l])):a!==l?a>l||24===j&&0===H&&N>0?(R.push([o,a,i]),l>0&&R.push([r,0,l])):R.push([o,a,l]):0===q&&0===B&&24===j&&0===H&&R.push([o,0,i]),1===R.length)k={group_operator:"and",group:[{comparator:"equal",value:R[0][0],field:{api_name:"Day"}},{comparator:"between",value:[R[0][1],R[0][2]],field:{api_name:"Best_Time"}}]};else if(2===R.length){k={group_operator:"or",group:[{group_operator:"and",group:[{comparator:"equal",value:R[0][0],field:{api_name:"Day"}},{comparator:"between",value:[R[0][1],R[0][2]],field:{api_name:"Best_Time"}}]},{group_operator:"and",group:[{comparator:"equal",value:R[1][0],field:{api_name:"Day"}},{comparator:"between",value:[R[1][1],R[1][2]],field:{api_name:"Best_Time"}}]}]}}if(!m[D].best_time_data.isBestTimeEnabledMail||!m[D].best_time_data.isBestTimeEnabledCall)k={group_operator:"and",group:[k,{comparator:"not_equal",value:m[D].best_time_data.isBestTimeEnabledMail?0:1,field:{api_name:"Best_Time_For"}}]}}else 0===V.length&&(k={comparator:"equal",value:8,field:{api_name:"Day"}});var Y={comparator:"not_equal",value:"${TODAY}"===w?"-1":"-2",field:{api_name:"Best_Time_Category"}},W={};W=0===Object.keys(k).length?Y:{group_operator:"and",group:[k,Y]};var G="";m[D].best_time_data.moduleRelation&&!this.data.supportRelatedModules?G=m[D].best_time_data.moduleRelation.api_name:"Leads"===D?G=this.data.supportRelatedModules?"Leads_Best_Time__r":"Leads_Best_Time":"Contacts"===D&&(G=this.data.supportRelatedModules?"Contacts_Best_Time__r":"Contacts_Best_Time"),Lyte.arrayUtils(h,"push",{include_objects:!0,relation:{api_name:G},criteria:W})}if("NBX"!==E.field_data_type)if("Prediction"!==E.field_data_type){if("cxFilter_Competitor_Alert"===E.api_name){g="competitor_alert";var z=this.$node.querySelector("#DDV_Competitor_Name").component.data.ltPropSelected,K="",J="",X=this.getData("module_info").competitor_mention_details,Z=X.relation,Q=X.fields,ee="",te="",ie="",ae=[];if("${EMPTY}"!==z&&"${NOTEMPTY}"!==z){if((K=this.$node.querySelector("#Competitor_Name_crux_comp").component.getValue()).length<1)return this.showAlert(_cruxUtils.getI18n("crm.competitoralert.name.error")),{isValdationFailure:!0};if("starts_with"!==z&&"ends_with"!==z||K.forEach((e=>{ae.push("starts_with"===z?";"+e:e+";")})),"equal"!==z&&"not_equal"!==z||(K=K.sort().toString().replaceAll(",",";")),!(ie=this.$node.querySelector("#Competitor_Sentiment_crux_comp").component.getValue())||ie.length<1)return this.showAlert(_cruxUtils.getI18n("crm.competitoralert.sentiment.error")),{isValdationFailure:!0};var le=_cruxUtils.getI18n("crm.sentiment.Positive"),oe=_cruxUtils.getI18n("crm.sentiment.Negative"),re=_cruxUtils.getI18n("crm.sentiment.Neutral");switch(ie){case le:te="crmcompetitormentions_positive_competitors__s";break;case oe:te="crmcompetitormentions_negative_competitors__s";break;case re:te="crmcompetitormentions_neutral_competitors__s"}ee=Q.filter((e=>e.api_name===te))[0].id;var se={field:{api_name:te,id:ee},comparator:z,value:K.toString()};"starts_with"!==z&&"ends_with"!==z||(se={group_operator:"OR",group:[{field:{api_name:te,id:ee},comparator:z,value:K.toString()},{field:{api_name:te,id:ee},comparator:"contains",value:ae.toString()}]});var ne={field:{api_name:"crmcompetitormentions_channel__s",id:Q.filter((e=>"crmcompetitormentions_channel__s"===e.api_name))[0].id},comparator:"equal",value:"1"},de={field:{api_name:"crmcompetitormentions_created_time__s",id:Q.filter((e=>"crmcompetitormentions_created_time__s"===e.api_name))[0].id},comparator:"",value:""};if(J=$L("#sub_option_Competitor_Duration")[0].component.data.selectedValues,["Age in Days","Due in Days"].includes(J.firstDropDownValue)){de.comparator="less_than";var pe=$L("#Competitor_Duration_crux_comp")[0].component.getValue();if(!(J.value1&&pe.length>0))return this.showAlert(_cruxUtils.getI18n("crm.competitoralert.date.error")),{isValdationFailure:!0};de.value="${"+J.firstDropDownValue.replace("Days",J.secondDropDownValue).replaceAll(" ","").toUpperCase()+"}+"+pe}else if(["equal","less_than","greater_than"].includes(J.firstDropDownValue)){if(de.comparator=J.firstDropDownValue,!$L("#Competitor_Duration_crux_comp")[0].component.data.cxPropValue)return this.showAlert(_cruxUtils.getI18n("crm.competitoralert.date.error")),{isValdationFailure:!0};de.value=this.getISODateTime($L("#Competitor_Duration_crux_comp")[0].component.data.cxPropValue,Crm.userDetails.DATE_PATTERN,"start")}else if("between"===J.firstDropDownValue){de.comparator=J.firstDropDownValue;var ce=$L("#Competitor_Duration_crux_comp")[0].component.data.cxPropValue,ue=$L("#between_Competitor_Duration_crux_comp")[0].component.data.cxPropValue;if(!ce||!ue)return this.showAlert(_cruxUtils.getI18n("crm.competitoralert.date.error")),{isValdationFailure:!0};if($L.moment(ce,this.datePattern.toUpperCase()).toDate()>$L.moment(ue,this.datePattern.toUpperCase()).toDate())return this.showAlert(_cruxUtils.getI18n("crm.custom.field.less.than.equalto","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate")+"'","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.toDate")+"'"),u),{isValdationFailure:!0};de.value=[this.getISODateTime(ce,Crm.userDetails.DATE_PATTERN,"start"),this.getISODateTime(ue,Crm.userDetails.DATE_PATTERN,"start")]}else de.comparator="equal",de.value=J.firstDropDownValue;var me={group_operator:"AND",group:[ne,de]};competitor_criteria={include_objects:!0,relation:{api_name:Z.api_name},criteria:{group_operator:"AND",group:[se,me]}}}else{var _e=Q.filter((e=>"crmcompetitormentions_seid__s"===e.api_name))[0];competitor_criteria={include_objects:"${NOTEMPTY}"===z,relation:{api_name:Z.api_name},criteria:{field:{api_name:_e.api_name,id:_e.id},comparator:"equal",value:"${NOTEMPTY}"}}}Lyte.arrayUtils(h,"push",competitor_criteria)}if(Ft=M.component.getFieldCriteria(this)){if(Ft.isValdationFailure)return Ft;if(Ft.cross_filter){U=Ft.cross_filter;this.updateCrossFilter(h,Ft.relation_name?Ft.relation_name:U.relation.api_name,U),Ft.criteria&&Lyte.arrayUtils(y,"push",Ft.criteria)}else Ft.custom_filter?Lyte.arrayUtils(x,"push",Ft.custom_filter):Lyte.arrayUtils(y,"push",Ft)}}else{g="prediction";var fe,ye=(rt=S).getData("predictionSelectedType"),he=rt.getData("predictionData"),xe="trend_down"===rt.getData("selectedTrend")?"-1":"trend_up"===rt.getData("selectedTrend")?"1":"0",ge=!1;if(ye&&ye.first||ye.second){ge=!0;var ve,be=ye.first?he[0]:he[1],De=ye.first?F:C;vt=be.relation,(ve=rt.getData("predictionCriteria")).value&&(ve.value.toString().includes("${AGEIN")||ve.value.toString().includes("${DUEIN"))&&"date"===De.getData("showSecondDropdownType")&&(ve.comparator=ve.value.startsWith("${AGEIN")?"Age in Days":"Due in Days",delete ve.value);var Se=De.getData("selectedValues").criteriaValue,Fe=De.getData("selectedValues").criteriaValue0,Ce=De.getData("selectedValues").criteriaValue1;if(ve.comparator.startsWith("$"))ve.value=ve.comparator,ve.comparator="equal";else if("date"===De.getData("predictionEle")||"date"===rt.getData("predictionEle")){De.getData().predictionSelectedType.criteria_fields[0].data_type;if("Due in Days"===ve.comparator||"Age in Days"===ve.comparator){var Te="Due in Days"===ve.comparator?"DUEIN":"AGEIN",Ae=ve.comparator,Le=De.getData("selectedValues").dateVal;ve.comparator="less_equal",ve.value=Le.toString().length>0?"${"+Te+De.getData("selectedValues").secondDropDownValue+"}+"+Le:void 0,ve.comparator=null==ve.value?Ae:ve.comparator}else if("between"===ve.comparator||"not_between"===ve.comparator)if(Fe&&Ce&&""!=Fe&&""!=Ce){if(Fe>Ce)return this.showFilterAlert(_cruxUtils.getI18n("crm.wf.usage.date.criteria.error.msg")),{isValdationFailure:!0};ve.value=[Fe,Ce]}else ve.value=void 0;else Se&&""!=Se?ve.value=Se:De.getData("criteriaDisplay")&&(ve.value=void 0)}else if("between"===ve.comparator||"not_between"===ve.comparator)if(Fe&&Ce){if(Number(Fe)>Number(Ce))return this.showFilterAlert(_cruxUtils.getI18n("crm.custom.field.less.than.to1")),{isValdationFailure:!0};ve.value=[Fe,Ce]}else ve.value=void 0;else void 0===ve.value&&void 0!==Se&&Se.toString().length>0||void 0!==Se&&""!==Se&&Se.toString().length>0&&ve.value!=Se?ve.value=Se:$L("#criteria_prediction")[0]&&"boolean"===$L("#criteria_prediction")[0].getData().cxPropField.data_type?ve.value=$L("#criteria_prediction")[0].getData("cxPropValue"):ve.value&&-1==["${TODAY}","${YESTERDAY}","${LASTYEAR}","${EMPTY}","${NOTEMPTY}","${THISWEEK}","${THISMONTH}","${THISYEAR}","${LASTWEEK}","${LASTMONTH}"].indexOf(ve.value)&&ve.value!=Se&&delete ve.value;if(rt.getData("isScoreSelected"))if((fe=rt.getData("scoreCriteria")).comparator.startsWith("$"))fe.value=ve.comparator,fe.comparator="equal";else{var Ie=De.getData("selectedValues").scoreValue;if("between"===fe.comparator||"not_between"===fe.comparator){Fe=De.getData("selectedValues").scoreValue0,Ce=De.getData("selectedValues").scoreValue1;if(Fe&&Ce){if(Number(Fe)>Number(Ce))return this.showFilterAlert(_cruxUtils.getI18n("crm.custom.field.less.than.to1")),{isValdationFailure:!0};fe.value=[Fe,Ce]}else fe.value=void 0}else fe.value=Ie}if(void 0===ve.value||rt.getData("isScoreSelected")&&!fe.value)return this.showFilterAlert(_cruxUtils.getI18n("crm.condition.cannot.empty")),{isValdationFailure:!0};var Me={field:be.insights_details.trend_field,comparator:"equal",value:xe};if((De.getData("isTrendSelected")||!be.score_field&&De.getData("isTrendSelected")&&"${EMPTY}"!==ve.value)&&Lyte.arrayUtils(h,"push",{include_objects:!0,relation:vt,criteria:Me}),ve.value&&"${EMPTY}"!==ve.value){var Ee={field:be.insights_details.isEnded_field,comparator:"equal",value:!1,from:"not_completed"};Lyte.arrayUtils(h,"push",{include_objects:!0,relation:vt,criteria:Ee})}}else if(ye&&ye.completed){ge=!0;var Ue,we=rt.getData("selectedOptionSf"),Oe=rt.getData("isSuccess"),Pe="true"===Oe?"greater_than":"less_equal";("both"===we||we===he[0].id&&"both"!==we)&&(st={field:he[0].insights_details.isEnded_field,comparator:"equal",value:!0},Ue={field:he[0].insights_details.accuracy_field,comparator:Pe,value:"80"},vt=he[0].relation,Lyte.arrayUtils(h,"push",{include_objects:!0,relation:vt,criteria:st}),Lyte.arrayUtils(h,"push",{include_objects:!0,relation:vt,criteria:Ue})),("both"===we||2===he.length&&we===he[1].id&&"both"!==we)&&(st={field:he[1].insights_details.isEnded_field,comparator:"equal",value:!0},Ue={field:he[1].insights_details.accuracy_field,comparator:Pe,value:"80"},vt=he[1].relation,Lyte.arrayUtils(h,"push",{include_objects:!0,relation:vt,criteria:st}),Lyte.arrayUtils(h,"push",{include_objects:!0,relation:vt,criteria:Ue}))}if(!ge||ye.completed&&"undefined"===Oe)return this.showFilterAlert(_cruxUtils.getI18n("crm.condition.cannot.empty")),{isValdationFailure:!0};if(fe){st={group_operator:"and",group:[ve,fe]};ve.from="Prediction",fe.from="Prediction",Lyte.arrayUtils(x,"push",st)}else ye.completed||(ve.from="Prediction",Lyte.arrayUtils(x,"push",ve))}else{g="NBX",_t=!1;var Ne={api_name:E.nbx_details.relation},Re=(Je=T.component.data.ltPropChecked,A.component.data.ltPropChecked),ke=new Date,Ve=-1!==["dd.mm.yyyy.","yyyy. mm. dd","yyyy.mm.dd","yyyy''mm''dd''"].indexOf(this.datePattern.toLowerCase());if((ke=this.convertUsrtoDefaultDatePattern(ke,Ve)).setTime(ke.getTime()-6e4*ke.getTimezoneOffset()),ke=ke.toISOString().split(/\./)[0],Je){var qe=L.component.getValue(),$e=I;if(_t=!!(qe&&qe.length>0)){var Be={};Be[_cruxUtils.getI18n("Call")]="Calls",Be[_cruxUtils.getI18n("crm.field.label.email")]="Emails",Be[_cruxUtils.getI18n("Meeting")]="Events";for(var je=[],He=qe.length,Ye=0;Ye<He;Ye++)je.push(Be[qe[Ye]]);w=$e.component.getData("selectedValues").firstDropDownValue;var We={comparator:"equal",value:je,field:{api_name:E.nbx_details.action.api_name}},Ge={comparator:"less_equal",value:w,field:{api_name:E.nbx_details.duration.api_name}},ze={group_operator:"and",group:[{comparator:"greater_than",value:ke,field:{api_name:E.nbx_details.duration.api_name}},Ge]};Lyte.arrayUtils(h,"push",{include_objects:!0,relation:Ne,criteria:{group_operator:"and",group:[We,ze]}})}}else if(Re){_t=!0;var Ke={group_operator:"and",group:[{comparator:"not_equal",value:"${EMPTY}",field:{api_name:E.nbx_details.action.api_name}},{comparator:"greater_than",value:ke,field:{api_name:E.nbx_details.duration.api_name}}]};Lyte.arrayUtils(h,"push",{include_objects:!1,relation:Ne,criteria:Ke})}if(["Deals","Potentials"].contains(this.getData("cxPropModule"))){Lyte.arrayUtils(x,"push",{comparator:"equal",field:{api_name:"Stage"},value:"${OPEN}",from:"NBX"})}if(!1===_t)return this.showFilterAlert(_cruxUtils.getI18n("crm.zia.nbx.smartfilter.alert.msg",_cruxUtils.getI18n("crm.zia.nba.feature.label")),T.component),{isValdationFailure:!0}}}else{g="similarity",_t=!1;var Je,Xe=$("#sub_field_SimilarityAvailable")[0];const e="Zia Similarity SmartFilter";if(Je=Xe.component.data.ltPropChecked){var Ze=$("#sub_field_SimilarityRecords")[0].component.data.ltPropChecked,Qe=$("#sub_field_SimilarityScore")[0].component.data.ltPropChecked;if(!Ze&&!Qe){Lyte.arrayUtils(h,"push",{include_objects:!0,relation:{api_name:"similarity_whom"},criteria:{comparator:"not_equal",value:"${EMPTY}",field:{api_name:"Similar_User__s"}}}),this.similarityClientTracking(D,"available",e);continue}var et=Ze&&Qe,tt={group_operator:"AND",group:[]};if(Ze){_t=!0;var it=$("#multiSelect_lookup_SimilarityRecords")[0];if(0===(ut=(ct=$L("#sub_option_SimilarityRecords")[0]).getData().renderItems).length)return this.showFilterAlert(_cruxUtils.getI18n("crm.dashboard.sharing.empty.value.alert"),it.component),{isValdationFailure:!0};(st={comparator:"equal",value:ut=this.getValueBasedonKeys(ut,ct.getData().lookupDisplayField)}).field={api_name:"Similar_User__s"};var at={include_objects:!0,relation:{api_name:"similarity_whom"},criteria:st};et?Lyte.arrayUtils(tt.group,"push",st):(Lyte.arrayUtils(h,"push",at),this.similarityClientTracking(D,"record",e))}if(Qe){_t=!0,d="#DDV_SimilarityScore";var lt=this.$node.querySelector(d);if(f=lt?lt.ltProp("selected"):"",d="#SimilarityScore_crux_comp",u=$L(d)[0],"between"===f||"not_between"===f){var ot=this.$node.querySelector("#between_SimilarityScore_crux_comp");if(!u.component.validate()||!ot.component.validate())return v=!1,{isValdationFailure:!0};if((Ie=u.component.getValue())===(c=ot.component.getValue())||parseInt(Ie)>parseInt(c))return this.showFilterAlert(_cruxUtils.getI18n("crm.custom.field.less.than.to1"),u),v=!1,{isValdationFailure:!0};Ie=[Ie,c]}else if("${NOTEMPTY}"!==f&&"${EMPTY}"!==f){if(Ie=u.component.getValue(),!u.component.validate())return v=!1,{isValdationFailure:!0}}else Ie=f,f="equal";at={include_objects:!0,relation:{api_name:"similarity_whom"},criteria:st={comparator:f,value:Ie,field:{api_name:"Similar_Score__s"}}};et?Lyte.arrayUtils(tt.group,"push",st):(Lyte.arrayUtils(h,"push",at),this.similarityClientTracking(D,"score",e))}et&&(at={include_objects:!0,relation:{api_name:"similarity_whom"},criteria:tt},Lyte.arrayUtils(h,"push",at),this.similarityClientTracking(D,"score and record",e))}if($("#sub_field_SimilarityNotAvailable")[0].component.data.ltPropChecked){Lyte.arrayUtils(h,"push",{include_objects:!1,relation:{api_name:"similarity_whom"},criteria:{comparator:"not_equal",value:"${EMPTY}",field:{api_name:"Similar_User__s"}}}),this.similarityClientTracking(D,"not available",e);continue}if(!1===_t)return this.showFilterAlert(_cruxUtils.getI18n("crm.dashboard.sharing.empty.value.alert"),Xe.component),{isValdationFailure:!0}}else{g="recommendation";var rt,st,nt=(rt=$("#option_Recommendation")[0]).getData("recommendationBasedOn"),dt={FirstTime:{api_name:"first_buy_whom"},Dependent:{api_name:"cross_selling_whom"},Bundle:{api_name:"bundle_whom"},Repeat:{api_name:"re_buy_whom"},Sequence:{api_name:"next_buy_whom"}},pt={FirstTime:{api_name:"Item_Id__s"},Dependent:{api_name:"Item_Id__s"},Bundle:{api_name:"Item_Id__s"},Repeat:{api_name:"Item_Id__s"},Sequence:{api_name:"Item_Id__s"}};if(!1===("all"===rt.getData("selectedValues").headDropDownValue)){var ct,ut,mt=$("#multiSelect_lookup_Recommendation_infield")[0];if(0===(ut=(ct=$L("#option_"+E.api_name)[0]).getData().renderItems2).length)return this.showFilterAlert(_cruxUtils.getI18n("crm.dashboard.sharing.empty.value.alert"),mt.component),{isValdationFailure:!0};st={comparator:"equal",value:ut=this.getValueBasedonKeys(ut,ct.getData().lookupDisplayField)}}else st={comparator:"not_equal",value:"${EMPTY}"};var _t=!1;if(nt.first_buy&&(_t=!0,st.field=pt.FirstTime,Lyte.arrayUtils(h,"push",{include_objects:!0,relation:dt.FirstTime,criteria:st})),nt.cross_selling&&(_t=!0,st.field=pt.Dependent,Lyte.arrayUtils(h,"push",{include_objects:!0,relation:dt.Dependent,criteria:st})),nt.bundle&&(_t=!0,st.field=pt.Bundle,Lyte.arrayUtils(h,"push",{include_objects:!0,relation:dt.Bundle,criteria:st})),nt.next_buy&&(_t=!0,st.field=pt.Sequence,Lyte.arrayUtils(h,"push",{include_objects:!0,relation:dt.Sequence,criteria:st})),1!=nt.re_buy&&!1===_t)return this.showFilterAlert(_cruxUtils.getI18n("crm.recommendation.empty.value.alert")),{isValdationFailure:!0};if(nt.re_buy){_t=!0,st.field=pt.Repeat;var ft=rt.getData("selectedValues").firstDropDownValue;if("all"!==ft){var yt;if("CUSTOM"===ft){var ht=$("#Recommendation_custom")[0];if(yt=ht.component.getValue(),void 0===(yt=[this.getISODateTime(yt,this.datePattern),this.getISODateTime(yt,this.datePattern,"end")])||""===yt)return this.showFilterAlert(_cruxUtils.getI18n("crm.dashboard.sharing.empty.value.alert"),ht.component),{isValdationFailure:!0}}else yt=ft;st={group_operator:"and",group:[st,{comparator:"CUSTOM"!==ft?"equal":"between",value:yt,field:{api_name:"Bought_Date__s"}}]}}Lyte.arrayUtils(h,"push",{include_objects:!0,relation:dt.Repeat,criteria:st})}if(!1===_t){var xt=$("#by_Recommendation_dropdownSysValue")[0];return this.showFilterAlert(_cruxUtils.getI18n("crm.dashboard.sharing.empty.value.alert"),xt.component),{isValdationFailure:!0}}}else{var gt,vt;gt="with"===$L("#option_"+E.api_name)[0].component.data.selectedValues.value;var bt=E.api_name;vt={relation_id:E.id,api_name:bt};var Dt=$L("#customFilter_"+E.api_name)[0].component.getFilterCriteria(),St={comparator:"equal",field:this.data.cxPropRelatedModuleMapping[bt].field,value:"${NOTEMPTY}"};if(Dt.noFieldSelected&&!Dt.dummyFieldSelected){Lyte.arrayUtils(h,"push",{include_objects:gt,relation:vt,criteria:St});continue}if(!(Dt&&Dt.queryParams&&Dt.queryParams.filters)){if(Dt&&!Dt.queryParams)return Dt;continue}(Dt=Dt.queryParams.filters).group||(Dt.group_operator="AND",Dt.group=[{comparator:Dt.comparator,field:Dt.field,value:Dt.value}],delete Dt.comparator,delete Dt.field,delete Dt.value),Dt.group.push(St),Lyte.arrayUtils(h,"push",{include_objects:gt,relation:vt,criteria:Dt})}}}}if(v){var Ft,Ct=[];return Ft=y,0==x.length&&0==Ft.length||(Lyte.arrayUtils(x,"push",Ft),Ct=1==x.length?x[0]:{group_operator:"AND",group:x}),0!=Ct.length&&(b.filters=Ct),0!=h.length&&(b.cross_filters=h),{queryParams:b,preventSaveFilter:g}}},groupScoreCriteria:function(e,t,i){var a=this.construct_group(e,t,"AND"),l={include_objects:!0,relation:{relation_id:this.moduleRecordMapping["Entity Scores"].id,api_name:this.moduleRecordMapping["Entity Scores"].api_name},criteria:a};this.updateCrossFilter(i,l.relation.api_name,l)},groupSeriesCriteria:function(e,t,i){crmListView.getObject().module;for(var a=this.getData("module_info").related_lists,l=(t=this.construct_group(e,t,"AND"),a.length),o=0;o<l;o++)if("SERIESPERSONALITY"===a[o].personality_name){var r={include_objects:!0,relation:{relation_id:this.moduleRecordMapping.Entity_Cadences.id,api_name:a[o].api_name},criteria:t};this.updateCrossFilter(i,r.relation.api_name,r);break}},VisitsFieldHandling:function(e){e.api_name||((e=e.criteria).type=this.allfieldType[e.field.api_name],e.api_name=e.field.api_name,delete e.field),this.findField(e),this.setFieldCriteria(e)},otherCrossFieldHandling:function(e){e.api_name||(e.api_name=e.field.api_name),e.type=this.allfieldType[e.api_name],this.findField(e),this.setFieldCriteria(e)},checkDynamicFilter:function(e){let t;return this.cruxAssets&&this.cruxAssets.checkIsDynamicFilterCriteria&&(t=this.cruxAssets.checkIsDynamicFilterCriteria(e)),t||!1},construct_rec_crossFilter:function(e,t){var i=e?e.group:[];let a=this.checkDynamicFilter(e,t);a=a||this.isCross_field(e,t),a&&a.isVisits?this.VisitsFieldHandling(a):a?this.otherCrossFieldHandling(a):e.field&&-1!=["multiuserlookup","multiselectlookup"].indexOf(this.allfieldType[e.field.api_name])?(e.field=this.data.allFields.filter((function(t){return t.api_name==e.field.api_name}))[0],this.otherCrossFieldHandling(e)):i&&i.length&&(this.construct_rec_crossFilter(i[0],t),i[1]&&this.construct_rec_crossFilter(i[1],t))},construct_crossFilter:function(e){var t,i=0,a=e.length;for(i=0;i<a;i++)if(this.data.supportRelatedModules&&this.data.cxPropChildModules.length>0&&this.data.cxPropChildModules.contains(e[i].relation.api_name))this.construct_crossFilter_new(e[i]);else if((t=this.isCross_field(e[i]))&&t.isVisits)this.VisitsFieldHandling(t);else if(t&&"Duration_Days"==t.api_name)this.setFieldCriteria(t);else if(t)this.otherCrossFieldHandling(t);else if(e[i].relation&&e[i].relation.api_name){var l=this.getRelationDetails(this.getData("module_info").module_name,e[i].relation.api_name),o=!1;if(l&&!t){t=e[i].criteria;var r=this.getMulSelLookUpField(this.getData("module_info").module_name,l);r&&!e[i].criteria.group&&(o=!0,t.api_name=r.api_name,t.field=r,t.origCriteria=e[i],this.otherCrossFieldHandling(t))}e[i].criteria&&e[i].criteria.group&&!o&&this.construct_rec_crossFilter(e[i].criteria,e[i].include_objects)}},construct_crossFilter_new:function(e){var t={};t.api_name=e.relation.api_name,this.findField(t),$L("#field_"+this._cruxReplace(t.api_name,"[/.]","_"))[0].ltProp("checked",!0);var i=$L("#option_"+t.api_name)[0].component,a=e.include_objects?"with":"without";i.setData("selectedValues",{value:a});var l={filters:e.criteria};$L("#customFilter_"+t.api_name)[0].component.setCriteria(l)},construct_filter:function(e){var t=e.group;delete this.preventTouchedfield;var i=this.isCustomField(e);if(0!=i){var a=i;a.type="custom",this.findField(a),this.setFieldCriteria(a)}else{if(null==e.group)return e.api_name=e.field.api_name,e.id=e.field.id,delete e.field,this.isWebsiteActivityField(e)&&this.data.displayVisitField.length,this.findField(e),void this.setFieldCriteria(e);this.renderField(t[0]),t[1]&&this.renderField(t[1])}},renderField:function(e){var t,i=!1;if(e&&e.field){if("LAST_SENT_TIME"==e.field.api_name||"Locked__s"==e.field.api_name){"LAST_SENT_TIME"==e.field.api_name&&delete this.preventTouchedfield;i=this.isCustomField(e)}if("NBX"===e.from&&"Stage"===e.field.api_name)return}i||null!=e.group_operator?e&&this.construct_filter(e):((t=JSON.parse(JSON.stringify(e))).api_name=t.field.api_name,t.id=t.field.id,delete t.field,"customField"==this.getFieldType(t.api_name)?(delete this.preventTouchedfield,(t=this.isCustomField(e)).type="custom",this.findField(t)):(this.isWebsiteActivityField(t)&&this.data.displayVisitField.length,this.findField(t)),this.setFieldCriteria(t))},isCross_field:function(e,t){var i,a,l=e.relation?e.criteria:e,o=this.getData("cxPropCommonInfo"),r=o&&o.abmModuleInfo?o.abmModuleInfo.techniqueFields:[],s=o&&o.abmModuleInfo?o.abmModuleInfo.scoreFields:[];if(l.group_operator&&"AND"==l.group_operator.toUpperCase().trim()&&l.group[0]&&l.group[1])if(i=l.group[0],a=l.group[1],i.field&&a.field){if(i.field.api_name=-1!==i.field.api_name.indexOf("Email_Sentiment.")?i.field.api_name.split(".")[1]:i.field.api_name,a.field.api_name=-1!==a.field.api_name.indexOf("Email_Sentiment.")?a.field.api_name.split(".")[1]:a.field.api_name,"Campaign_Name"==i.field.api_name&&"Service_Status"==a.field.api_name)return{api_name:"cxFilter_Campaigns",comparator:i.comparator,value:i.value,Service_Status:a.value};if("Campaign_Name"==i.field.api_name&&"Member_Status"==a.field.api_name)return{api_name:"cxFilter_Campaigns",comparator:i.comparator,value:i.value,Member_Status:a.value};if("Member_Status"==i.field.api_name&&"Campaign_Name"==a.field.api_name)return{api_name:"cxFilter_Campaigns",comparator:a.comparator,value:a.value,Member_Status:i.value};if("Positive"==i.field.api_name&&"Negative"==a.field.api_name)return i.comparator==a.comparator&&i.value==a.value?{api_name:"cxFilter_Email_Sentiment",status:"PositiveAndNegative",comparator:i.comparator,value:i.value}:{api_name:"cxFilter_Email_Sentiment",status:"PositiveOnly",comparator:i.comparator,value:i.value};if("Negative"==i.field.api_name&&"Positive"==a.field.api_name)return{api_name:"cxFilter_Email_Sentiment",status:"NegativeOnly",comparator:i.comparator,value:i.value};if("Received_Date"==i.field.api_name&&"Positive"==a.field.api_name)return{api_name:"cxFilter_Email_Sentiment",status:"Positive",comparator:i.comparator,value:i.value,subfield:a.value,subfieldComp:a.comparator};if("Received_Date"==i.field.api_name&&"Negative"==a.field.api_name)return{api_name:"cxFilter_Email_Sentiment",status:"Negative",comparator:i.comparator,value:i.value,subfield:a.value,subfieldComp:a.comparator};if("Received_Date"==i.field.api_name&&"Neutral"==a.field.api_name)return{api_name:"cxFilter_Email_Sentiment",status:"Neutral",comparator:i.comparator,value:i.value,subfield:a.value,subfieldComp:a.comparator};if("Received_Date"==i.field.api_name&&"Last_Email_Sentiment"==a.field.api_name)return{api_name:"cxFilter_Email_Sentiment",status:2==a.value.length?"PositiveOrNegative":a.value,comparator:i.comparator,value:i.value,subfield:"Last_Email_Sentiment"};if("Modified_Time"==i.field.api_name&&("Duration_Days"==a.field.api_name||"Stage_Duration_Calendar_Days"==a.field.api_name||"Duration_Time"==a.field.api_name))return{api_name:"Duration_Days",comparator:i.comparator,value:i.value};if("Action_Type"==i.field.api_name&&"Action_Performed_Time"==a.field.api_name)return"Missed Chat"==i.value?{isVisits:!0,type:"crossfield",api_name:"cxFilter_Chats",subfield:"Missed",comparator:a.comparator,value:a.value}:{isVisits:!0,type:"crossfield",api_name:"cxFilter_Chats",subfield:"Attended",comparator:a.comparator,value:a.value};if("Stage"==i.field.api_name&&"Created_Time"==a.field.api_name)return 1==e.include_objects||t?{api_name:"cxFilter_Deals",subfield:"With_Open_Deal",comparator:"equal",value:a.value}:{api_name:"cxFilter_Deals",subfield:"Without_Open_Deal",comparator:"equal",value:a.value};if("Status"==i.field.api_name&&"Due_Date"==a.field.api_name)return"${TODAYANDOVERDUE}"==a.value?{api_name:"cxFilter_Activities",subfield:"Activity_Due",comparator:"${TODAYANDOVERDUE}"}:{api_name:"cxFilter_Activities",subfield:"Overdue",comparator:"Tasks"};if("Call_Status"==i.field.api_name&&"Call_Start_Time"==a.field.api_name)return{api_name:"cxFilter_Activities",subfield:"Overdue",comparator:"Calls"};if("Status"==i.field.api_name&&"Call_Status"==a.field.api_name)return{api_name:"cxFilter_Activities",subfield:"",comparator:"withoutopen"};if("Last_Modified_Time"==i.field.api_name&&("Duration_Days"==a.field.api_name||"Stage_Duration_Calendar_Days"==a.field.api_name||"Duration_Time"==a.field.api_name))return{api_name:"Duration_Days",comparator:i.comparator,value:i.value};if("Call_Status"==i.field.api_name&&"Activity_Type"==a.field.api_name)return{api_name:"cxFilter_Activities",subfield:"withoutopen_call"};if("Status"==i.field.api_name&&"Activity_Type"==a.field.api_name)return{api_name:"cxFilter_Activities",subfield:"withoutopen_task"};if("End_DateTime"==i.field.api_name&&"Activity_Type"==a.field.api_name)return{api_name:"cxFilter_Activities",subfield:"withoutopen_event",comparator:i.comparator,value:i.value};if("Item_Id__s"==i.field.api_name)return{api_name:"Recommendation",field:{first_buy_whom:"FirstTime",cross_selling_whom:"Dependent",bundle_whom:"Bundle",re_buy_whom:"Repeat",next_buy_whom:"Sequence"}[e.relation.api_name],comparator:"not_equal"===i.comparator?"all":"selected",value:i.value,value1:a.value};if("Closed_Time"==i.field.api_name&&"Activity_Type"==a.field.api_name)return{api_name:"Activity_Done",comparator:"ClosedTime"};if(e.relation&&"Entity_Scores__s"===e.relation.api_name)return{api_name:"cxFilter_Scoring_Rule",comparator:i.comparator,value:i.value,subfield:a.field.api_name,subfieldComp:a.comparator,subfieldValue:a.value};if(e.relation&&"Thresholds__s"===e.relation.api_name)return{api_name:"cxFilter_UnallocatedRecords",comparator:i.comparator,value:i.value};if("Cadencesid__s"==i.field.api_name)return{api_name:"cxFilter_Series",comparator:i.comparator,value:i.value,subfield:a.field.api_name,subfieldComp:a.comparator,subfieldValue:a.value};if("NBA_duration"===i.field.api_name&&"NBA_duration"===a.field.api_name||i.field.api_name.startsWith("NBX_")&&i.field.api_name.endsWith("_Duration")&&a.field.api_name.startsWith("NBX_")&&a.field.api_name.endsWith("_Duration")||"Action_Due_By"===i.field.api_name&&"Action_Due_By"===a.field.api_name)return{api_name:"next_best_experience",field:"NBX",comparator:"Available",val2:i.value.toString().includes("$")?i.value:a.value}}else{if("Duration_Days"==(d=this.isCross_field(i)).api_name)return this.picklist_trackingObj=d,d;if("Overdue"==d.subfield&&"Activity_Type"==a.field.api_name)return d;if("Activity_Due"==d.subfield&&"Activity_Type"==a.field.api_name)return d;if("cxFilter_Campaigns"==d.api_name&&"Service_Status"==a.field.api_name)return d.Service_Status=a.value,d;var n=this.isCross_field(a);if(i.field){if(i.field.api_name=-1!==i.field.api_name.indexOf("Email_Sentiment.")?i.field.api_name.split(".")[1]:i.field.api_name,"Received_Date"==i.field.api_name&&"PositiveOrNegative"==n.status)return{api_name:"cxFilter_Email_Sentiment",status:"PositiveOrNegative",comparator:i.comparator,value:i.value,subfield:n.value,subfieldComp:n.comparator};if("Received_Date"==i.field.api_name&&"PositiveAndNegative"==n.status)return{api_name:"cxFilter_Email_Sentiment",status:"PositiveAndNegative",comparator:i.comparator,value:i.value,subfield:n.value,subfieldComp:n.comparator};if("Received_Date"==i.field.api_name&&"NegativeOnly"==n.status)return{api_name:"cxFilter_Email_Sentiment",status:"NegativeOnly",comparator:i.comparator,value:i.value,subfield:n.value,subfieldComp:n.comparator};if("Received_Date"==i.field.api_name&&"PositiveOnly"==n.status)return{api_name:"cxFilter_Email_Sentiment",status:"PositiveOnly",comparator:i.comparator,value:i.value,subfield:n.value,subfieldComp:n.comparator};if(("NBA"===i.field.api_name||i.field.api_name.startsWith("NBX_")&&i.field.api_name.endsWith("_Medium"))&&d.field&&n.field&&"NBX"===d.field&&"NBX"===n.field)return{api_name:"next_best_experience",field:"NBX",comparator:"Available",val1:d.val1,val2:n.val2}}}else if(l.group_operator&&"OR"==l.group_operator.toUpperCase().trim()&&l.group[0]&&l.group[1]){if(i=l.group[0],a=l.group[1],i.field&&a.field&&(i.field.api_name=-1!==i.field.api_name.indexOf("Email_Sentiment.")?i.field.api_name.split(".")[1]:i.field.api_name,a.field.api_name=-1!==a.field.api_name.indexOf("Email_Sentiment.")?a.field.api_name.split(".")[1]:a.field.api_name,"Positive"==i.field.api_name&&"Negative"==a.field.api_name))return{api_name:"cxFilter_Email_Sentiment",status:"PositiveOrNegative",comparator:i.comparator,value:i.value};var d=this.isCross_field(i);n=this.isCross_field(a);if("Tasks"==d.comparator&&"Calls"==n.comparator)return{api_name:"cxFilter_Activities",subfield:"Overdue",comparator:"Activities"};if("ClosedTime"==d.comparator&&"Calls"==n.comparator)return{api_name:"cxFilter_Activities",subfield:"Activity_Done",comparator:"ClosedTime"};if("withoutopen_call"==d.subfield&&"withoutopen_task"==n.subfield)return{api_name:"Activity",subfield:"withoutopen_call_task"};if("withoutopen_call_task"==d.subfield&&"withoutopen_event"==n.subfield)return{api_name:"cxFilter_Activities",subfield:"Without_Open_Activity",comparator:""};if("Activities"==d.comparator&&"withoutopen_event"==n.subfield||"${TODAYANDOVERDUE}"==d.comparator)return"${TODAYANDOVERDUE}"==d.comparator?d:{api_name:"cxFilter_Activities",subfield:"Activity_Due",comparator:n.value};if("ClosedTime"==d.comparator&&"withoutopen_event"==n.subfield)return{api_name:"cxFilter_Activities",subfield:"Activity_Done",comparator:n.comparator,value:n.value}}else if(!l.group||!l.group_operator){return l.field.api_name=l.field&&-1!==l.field.api_name.indexOf("Email_Sentiment.")?l.field.api_name.split(".")[1]:l.field.api_name,"Item_Id__s"==l.field.api_name?{api_name:"Recommendation",field:{first_buy_whom:"FirstTime",cross_selling_whom:"Dependent",bundle_whom:"Bundle",re_buy_whom:"Repeat",next_buy_whom:"Sequence"}[e.relation.api_name],comparator:"not_equal"===l.comparator?"all":"selected",value:l.value}:"Similar_User__s"===l.field.api_name?"equal"!==l.comparator?{api_name:"Similarity",field:"Similarity",comparator:!0===e.include_objects?"Available":"NotAvailable",value:""}:{api_name:"Similarity",field:"Records",comparator:l.comparator,value:l.value}:"Similar_Score__s"===l.field.api_name?{api_name:"Similarity",field:"Score",comparator:l.comparator,value:l.value}:"Best_Time_Category"===l.field.api_name?{api_name:"best_time",value:l.value}:("NBA"===l.field.api_name||l.field.api_name.startsWith("NBX_")&&l.field.api_name.endsWith("_Medium"))&&"${EMPTY}"===l.value?{api_name:"next_best_experience",field:"NBX",comparator:"NotAvailable"}:("NBA"===l.field.api_name||l.field.api_name.startsWith("NBX_")&&l.field.api_name.endsWith("_Medium"))&&"${EMPTY}"!==l.value?{api_name:"next_best_experience",field:"NBX",comparator:"Available",val1:l.value}:l.field.api_name.toUpperCase().endsWith("ISEND")||l.field.api_name.toUpperCase().endsWith("ACCURACY")||l.field.api_name.toUpperCase().endsWith("TREND")?{api_name:"Prediction",criteria:l}:"Modified_Time"==l.field.api_name?{api_name:"cxFilter_Activities",subfield:"Without_Any_Activity",comparator:l.comparator,value:l.value}:"Created_Time"==l.field.api_name?1==e.include_objects?{api_name:"cxFilter_Notes",subfield:"Notes_Added",comparator:l.comparator,value:l.value}:{api_name:"cxFilter_Notes",subfield:"Without_Any_Notes",comparator:l.comparator,value:l.value}:"Deal_Name"==l.field.api_name?{api_name:"cxFilter_Deals",subfield:"Without_Any_Deal",comparator:"",value:""}:"Amount"==l.field.api_name?{api_name:"cxFilter_Deal_Amount",comparator:l.comparator,value:l.value}:"Owner"==l.field.api_name?{api_name:"cxFilter_Deal_Owner",comparator:l.comparator,value:l.value}:"GroupRel__s"==l.field.api_name&&e.relation&&e.relation.api_name?{api_name:e.relation.api_name,comparator:l.comparator,value:l.value}:"Closing_Date"==l.field.api_name?{api_name:"cxFilter_Deal_Closing_Date",comparator:l.comparator,value:l.value}:"Stage"==l.field.api_name?{api_name:"cxFilter_Deal_Stage",comparator:l.comparator,value:l.value}:"Linked_Segment__s"===l.field.api_name?("${EMPTY}"!==l.value&&l.value.forEach((e=>{e.Segment_Name__s=e.name})),{api_name:"cxFilter_Linked_Segment__s",comparator:l.comparator,value:l.value}):r.includes(l.field.api_name)||s.includes(l.field.api_name)?{api_name:"cxFilter_"+l.field.api_name,comparator:l.comparator,value:l.value}:this.isWebsiteActivityField(l.field)&&this.data.displayVisitField.length?{isVisits:!0,criteria:l}:"Campaign_Name"==l.field.api_name?{api_name:"cxFilter_Campaigns",comparator:l.comparator,value:l.value}:"Full_Name"==l.field.api_name?e.include_objects?{api_name:"cxFilter_Contacts",subfield:"With_Contact"}:{api_name:"cxFilter_Contacts",subfield:"Without_Any_Contact"}:"Received_Date"==l.field.api_name||"Record_status"===l.field.api_name?(l.field.api_name="Record_status"==l.field.api_name?"cxFilter_Record_status":l.field.api_name,l):e.relation&&"Entity_Scores__s"===e.relation.api_name?{api_name:"cxFilter_Scoring_Rule",comparator:void 0,value:void 0,subfield:l.field.api_name,subfieldComp:l.comparator,subfieldValue:l.value}:e.relation&&"Locking_Information__s"===e.relation.api_name&&"Feature_Type__s"==l.field.api_name?(this.data.locked_crossfield=!0,{api_name:"cxFilter_Locked",subfield:"Locked_True",comparator:l.value}):"crmcompetitormentions_positive_competitors__s"===l.field.api_name||"crmcompetitormentions_negative_competitors__s"===l.field.api_name||"crmcompetitormentions_neutral_competitors__s"===l.field.api_name||"crmcompetitormentions_seid__s"===l.field.api_name?{api_name:"cxFilter_Competitor_Alert",comparator:l.comparator,value:l.value}:"crmcompetitormentions_channel__s"===l.field.api_name?{api_name:"Competitor_Channel",comparator:l.comparator,value:l.value}:"crmcompetitormentions_created_time_s"===l.field.api_name?{api_name:"Competitor_Duration",comparator:l.comparator,value:l.value}:e.relation&&"Thresholds__s"===e.relation.api_name?{api_name:"cxFilter_UnallocatedRecords",comparator:l.comparator,value:l.value}:!(!e.relation||"Entity_Cadences__s"!==e.relation.api_name)&&{api_name:"cxFilter_Series",comparator:void 0,value:void 0,subfield:l.field.api_name,subfieldComp:l.comparator,subfieldValue:l.value}}return!1},isCustomField:function(e){var t,i,a="",l="";if(e.group_operator&&e.group[0].field){if(t=e.group[0],i=e.group[1],"LAST_SENT_TIME"==t.field.api_name||"LAST_ACTION_TIME"==t.field.api_name){if(a={api_name:"cxFilter_Email_Status",status:"",subfield:"",comparator:t.comparator,value:t.value},i.group_operator&&"AND"==i.group_operator.toUpperCase()){if(t=i.group[0],i=i.group[1],"LAST_SENT_TIME"==t.field.api_name||"LAST_ACTION"==t.field.api_name)return a.status="sent",a.subfield="not_opened",a.value=t.value,a.comparator=t.comparator,a}else if(i.group_operator&&"OR"==i.group_operator.toUpperCase()&&(t=i.group[0],l=null!=(i=i.group[1]).value?i.value.toString():"",("LAST_ACTION_TIME"==t.field.api_name||"LAST_ACTION"==t.field.api_name)&&l.sort().toString()==["Opened","Clicked","Responded","Bounced"].sort().toString()))return a.status="not_opened",a.value=t.value,a.comparator=t.comparator,a;if("${EMPTY}"==t.value&&"${EMPTY}"==i.value)return a.status="not_sent",a.comparator=t.value,a;if("LAST_SENT_TIME"==t.field.api_name&&/equal|not_equal/.test(i.comparator)&&(a.status="sent"),l="string"==typeof(l=null!=i.value?i.value:[])?l.split(","):l,"LAST_ACTION"==i.field.api_name)return l.sort().toString()==["Responded"].sort().toString()?(a.status=""==a.status?"responded":a.status,a.subfield="sent"==a.status?"responded":""):l.sort().toString()===["Replied"].sort().toString()?(a.status=""===a.status?"replied":a.status,a.subfield="sent"===a.status?"replied":""):l.sort().toString()==["Clicked"].sort().toString()?(a.status=""==a.status?"clicked":a.status,a.subfield="sent"==a.status?"clicked":""):l.sort().toString()==["Opened","Clicked","Responded"].sort().toString()?(a.status=""==a.status?"opened":a.status,a.subfield="sent"==a.status?"opened":""):l.sort().toString()==["Opened","Clicked","Responded","Bounced"].sort().toString()?(a.status=""==a.status?"not_opened":a.status,a.subfield="sent"==a.status?"not_opened":""):l.sort().toString()==["Bounced"].sort().toString()||"Bounced"==l?(a.status=""==a.status?"bounced":a.status,a.subfield="sent"==a.status?"bounced":""):l.sort().toString()==["Opened","Clicked"].sort().toString()?(a.status=""==a.status?"opened_and_not_replied":a.status,a.subfield="sent"==a.status?"opened_and_not_replied":""):l.sort().toString()==["Received","Responded"].sort().toString()&&"equal"==i.comparator?a.status="received":i.value.sort().toString()==["Received","Responded"].sort().toString()&&"not_equal"==i.comparator?a.status="not_received":l.sort().toString()==["Opened","Clicked","Sent","Replied","Bounced","Responded"].sort().toString()&&(a.status="not_sent"),a}if(i.field&&"message_time__s"==t.field.api_name&&"conversation_status__s"==i.field.api_name)return(a={}).value=t.value,a.comparator=t.comparator,"Replied"==i.value?"equal"==i.comparator?a.api_name="cxFilter_Replied_Messages":a.api_name="cxFilter_Not_Replied_Messages":a.api_name="cxFilter_Replied_Messages",a}if(e.group_operator&&"AND"==e.group_operator.toUpperCase().trim()&&e.group[0]&&e.group[1]){if(t=e.group[0],i=e.group[1],!t.field||!i.field){if("Prediction"===(o=this.isCustomField(t)).api_name)return this.construct_filter(i),o;if(0==o||this.preventTouchedfield)return!1;if(i.field){if("Not Modified"==o.isModified&&"User"==o.comparator&&"System_Modified_Time"==i.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"OnlyByUser",value:o.value};if("Not Modified"==o.isModified&&"System"==o.comparator&&"User_Modified_Time"==i.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"OnlyBySystem",value:o.value};if("Not Done"==o.isModified&&"User"==o.comparator&&"System_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"OnlyByUser",value:o.value};if("Not Done"==o.isModified&&"System"==o.comparator&&"User_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"OnlyBySystem",value:o.value};if("cxFilter_Email_Status"==o.api_name&&("not_opened"==o.status||"sent"==o.status)&&"LAST_SENT_TIME"==i.field.api_name)return{api_name:"cxFilter_Email_Status",status:o.status,subfield:o.subfield,comparator:o.comparator,value:o.value};if("cxFilter_TouchedRecords"==o.api_name&&("User_Modified_Time"==i.field.api_name||"System_Modified_Time"==i.field.api_name))return this.preventTouchedfield=!0,o}return"cxFilter_TouchedRecords"==(r=this.isCustomField(i)).api_name&&"${EMPTY}"==r.value?(this.preventTouchedfield=!0,o):"Prediction"===r.api_name?(this.construct_filter(t),r):0!=r&&!this.preventTouchedfield&&("cxFilter_UnTouchedRecords"==o.api_name&&"User"==o.comparator&&"cxFilter_UnTouchedRecords"==r.api_name&&"System"==r.comparator?{api_name:"cxFilter_UnTouchedRecords",comparator:"UserAndSystem",value:o.value}:"Not Modified"==o.isModified&&"User"==o.comparator&&"Not Done"==r.isModified&&"User"==r.comparator?{api_name:"cxFilter_UnTouchedRecords",comparator:"User",value:o.value}:"Not Modified"==o.isModified&&"System"==o.comparator&&"Not Done"==r.isModified&&"System"==r.comparator?{api_name:"cxFilter_UnTouchedRecords",comparator:"System",value:o.value}:"cxFilter_UnTouchedRecords"==o.api_name&&"User"==o.comparator&&"cxFilter_TouchedRecords"==r.api_name&&"System"==r.comparator?{api_name:"cxFilter_UnTouchedRecords",comparator:"OnlyByUser",value:o.value}:"cxFilter_UnTouchedRecords"==o.api_name&&"System"==o.comparator&&"cxFilter_TouchedRecords"==r.api_name&&"User"==r.comparator?{api_name:"cxFilter_UnTouchedRecords",comparator:"OnlyBySystem",value:o.value}:"cxFilter_TouchedRecords"==o.api_name&&"User"==o.comparator&&"Only"==r.comparator?{api_name:"cxFilter_TouchedRecords",comparator:"OnlyByUser",value:o.value}:"cxFilter_TouchedRecords"==o.api_name&&"System"==o.comparator&&"Only"==r.comparator?{api_name:"cxFilter_TouchedRecords",comparator:"OnlyBySystem",value:o.value}:"cxFilter_TouchedRecords"==o.api_name&&"User"==o.comparator&&"cxFilter_TouchedRecords"==r.api_name&&"System"==r.comparator?{api_name:"cxFilter_TouchedRecords",comparator:"UserAndSystem",value:o.value}:"Not Modified"==o.isModified&&"User"==o.comparator&&"Not Modified"==r.isModified&&"System"==r.comparator?{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"UserAndSystem",value:o.value}:"Not Done"==o.isModified&&"User"==o.comparator&&"Not Done"==r.isModified&&"System"==r.comparator?{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"UserAndSystem",value:o.value}:"Not Done"==o.isModified&&"User"==o.comparator&&"Done"==r.isModified&&"System"==r.comparator?{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"OnlyByUser",value:o.value}:"Not Done"==o.isModified&&"System"==o.comparator&&"Done"==r.isModified&&"User"==r.comparator?{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"OnlyBySystem",value:o.value}:"Not Modified"==o.isModified&&"User"==o.comparator&&"Modified"==r.isModified&&"System"==r.comparator?{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"OnlyByUser",value:o.value}:"Not Modified"==o.isModified&&"System"==o.comparator&&"Modified"==r.isModified&&"User"==r.comparator?{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"OnlyBySystem",value:o.value}:"cxFilter_TouchedRecords"==o.api_name&&"User"==o.comparator&&"cxFilter_UnTouchedRecords"==r.api_name?{api_name:"cxFilter_TouchedRecords",comparator:"OnlyByUser",value:o.value}:"cxFilter_TouchedRecords"==o.api_name&&"System"==o.comparator&&"cxFilter_UnTouchedRecords"==r.api_name?{api_name:"cxFilter_TouchedRecords",comparator:"OnlyBySystem",value:o.value}:"cxFilter_RecordAction"==o.api_name&&"User"==o.comparator&&"cxFilter_RecordAction"==r.api_name&&"Not Modified"==r.isModified?{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"OnlyByUser",value:o.value}:"cxFilter_RecordAction"==o.api_name&&"System"==o.comparator&&"cxFilter_RecordAction"==r.api_name&&"Not Modified"==r.isModified?{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"OnlyBySystem",value:o.value}:"cxFilter_RelatedRecordsAction"==o.api_name&&"User"==o.comparator&&"cxFilter_RelatedRecordsAction"==r.api_name&&"Not Done"==r.isModified?{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"OnlyByUser",value:o.value}:"cxFilter_RelatedRecordsAction"==o.api_name&&"System"==o.comparator&&"cxFilter_RelatedRecordsAction"==r.api_name&&"Not Done"==r.isModified&&{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"OnlyBySystem",value:o.value})}if("Tag"==t.field.api_name&&"Activity_Type"==i.field.api_name&&"Activities"==this.getData("module_info").module_name){if(this.getData("module_info").custom_view.activity_view)return{api_name:"Tag",subfield:i.value,comparator:t.comparator,value:t.value};if(this.getData("module_info").custom_view.event_view||this.getData("module_info").custom_view.calls_view||this.getData("module_info").custom_view.task_view)return{api_name:i.value+"_Tag",comparator:t.comparator,value:t.value}}else if("LAST_SENT_TIME"==t.field.api_name||"LAST_ACTION_TIME"==t.field.api_name){a={api_name:"cxFilter_Email_Status",status:"",subfield:"",comparator:t.comparator,value:t.value},"LAST_SENT_TIME"==t.field.api_name&&(a.status="sent");l=null!=i.value?i.value:[];if("LAST_ACTION"==i.field.api_name)return l.sort().toString()==["Responded"].sort().toString()?(a.status=""==a.status?"responded":a.status,a.subfield="sent"==a.status?"responded":""):l.sort().toString()===["Replied"].sort().toString()?(a.status=""===a.status?"replied":a.status,a.subfield="sent"===a.status?"replied":""):l.sort().toString()==["Clicked"].sort().toString()?(a.status=""==a.status?"clicked":a.status,a.subfield="sent"==a.status?"clicked":""):l.sort().toString()==["Opened","Clicked","Responded"].sort().toString()?(a.status=""==a.status?"opened":a.status,a.subfield="sent"==a.status?"opened":""):l.sort().toString()==["Opened","Clicked","Responded","Bounced"].sort().toString()?(a.status=""==a.status?"not_opened":a.status,a.subfield="sent"==a.status?"not_opened":""):"Bounced"==l||l.sort().toString()==["Bounced"].sort().toString()?(a.status=""==a.status?"bounced":a.status,a.subfield="sent"==a.status?"bounced":""):l.sort().toString()==["Opened","Clicked"].sort().toString()?(a.status=""==a.status?"opened_and_not_replied":a.status,a.subfield="sent"==a.status?"opened_and_not_replied":""):l.sort().toString()==["Received","Responded"].sort().toString()&&"equal"==i.comparator?a.status="received":i.value.sort().toString()==["Received","Responded"].sort().toString()&&"not_equal"==i.comparator?a.status="not_received":l.sort().toString()==["Opened","Clicked","Sent","Replied","Bounced","Responded"].sort().toString()&&(a.status="not_sent"),a}else{if("User_Modified_Time"==t.field.api_name&&"System_Modified_Time"==i.field.api_name)return"greater_than"==i.comparator||"not_equal"==i.comparator?{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"OnlyByUser",value:t.value}:"greater_than"==t.comparator||"not_equal"==t.comparator?{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"OnlyBySystem",value:t.value}:{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"UserAndSystem",value:t.value};if("System_Modified_Time"==t.field.api_name&&"User_Modified_Time"==i.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"OnlyBySystem",value:t.value};if("User_Related_Activity_Time"==t.field.api_name&&"System_Related_Activity_Time"==i.field.api_name)return"greater_than"==i.comparator||"not_equal"==i.comparator?{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"OnlyByUser",value:t.value}:"greater_than"==t.comparator||"not_equal"==t.comparator?{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"OnlyBySystem",value:t.value}:{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"UserAndSystem",value:t.value};if("System_Related_Activity_Time"==t.field.api_name&&"User_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"OnlyBySystem",value:t.value};if("System_Modified_Time"==t.field.api_name&&"System_Related_Activity_Time"==i.field.api_name)return{api_name:"",comparator:"Only",value:""};if("User_Modified_Time"==t.field.api_name&&"User_Related_Activity_Time"==i.field.api_name)return{api_name:"",comparator:"Only",value:""};if("Prediction"===t.from||"Prediction"===i.from){if("Prediction"===t.from&&"Prediction"===i.from)return{api_name:"Prediction",criteria:t,criteria1:i};if("Prediction"===t.from)return this.renderField(i),this.isCustomField(t);if("Prediction"===i.from)return this.renderField(t),this.isCustomField(i)}}if("message_time__s"==t.field.api_name&&"conversation_status__s"==i.field.api_name)return a.comparator=i.comparator,"Replied"==i.value?"equal"==i.comparator?(a.value=i.value,a.api_name="cxFilter_Replied_Messages"):(a.value=i.value,a.api_name="cxFilter_Not_Replied_Messages"):(a.value=i.value,a.api_name="cxFilter_Replied_Messages"),a}else if(e.group_operator&&"OR"==e.group_operator.trim()&&e.group[0]&&e.group[1])if(t=e.group[0],i=e.group[1],t.field&&i.field)if("LAST_SENT_TIME"==t.field.api_name&&"LAST_ACTION"==i.field.api_name){l=null!=i.value?i.value.toString():"";a={api_name:"cxFilter_Email_Status",status:"",subfield:"",comparator:t.comparator,value:t.value},l.sort().toString()==["Opened","Clicked","Sent","Replied","Bounced","Responded"].sort().toString()&&(a.status="not_sent")}else{if("Last_Activity_Time"==t.field.api_name&&"System_Modified_Time"==i.field.api_name)return{api_name:"cxFilter_TouchedRecords",comparator:"UserOrSystem",value:t.value};if("Last_Activity_Time"==t.field.api_name&&"Last_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_UnTouchedRecords",comparator:"UserAndSystem",value:t.value};if("User_Modified_Time"==t.field.api_name&&"System_Modified_Time"==i.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"UserOrSystem",value:t.value};if("User_Related_Activity_Time"==t.field.api_name&&"System_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"UserOrSystem",value:t.value};if("User_Modified_Time"==t.field.api_name&&"User_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_TouchedRecords",comparator:"User",value:t.value};if("System_Modified_Time"==t.field.api_name&&"System_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_TouchedRecords",comparator:"System",value:t.value};if("User_Modified_Time"==t.field.api_name&&"User_Modified_Time"==i.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"User",value:t.value};if("System_Modified_Time"==t.field.api_name&&"System_Modified_Time"==i.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"System",value:t.value};if("User_Related_Activity_Time"==t.field.api_name&&"User_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"User",value:t.value};if("System_Related_Activity_Time"==t.field.api_name&&"System_Related_Activity_Time"==i.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"System",value:t.value};if("User_Modified_Time"==t.field.api_name&&"User_Modified_Time"==i.field.api_name)return{api_name:"",isModified:"greater_only",comparator:""};if("LAST_SENT_TIME"==t.field.api_name&&"LAST_SENT_TIME"==i.field.api_name&&"${EMPTY}"==i.value)return{api_name:"LAST_SENT_TIME",comparator:t.comparator,value:t.value};if("LAST_ACTION_TIME"==t.field.api_name&&"LAST_ACTION_TIME"==i.field.api_name&&"${EMPTY}"==i.value)return{api_name:"LAST_ACTION_TIME",comparator:t.comparator,value:t.value};if("Prediction"===t.from||"Prediction"===i.from){if("Prediction"===t.from&&"Prediction"===i.from)return{api_name:"Prediction",criteria:t,criteria1:i};if("Prediction"===i.from)return this.renderField(t),this.isCustomField(i);if("Prediction"===t.from)return this.renderField(i),this.isCustomField(t)}}else{var o,r;if(0==(o=this.isCustomField(t))||this.preventTouchedfield)return!1;if("Prediction"===o.api_name)return this.construct_filter(t),o;if("LAST_SENT_TIME"==o.api_name&&"LAST_ACTION"==i.field.api_name&&i.value.sort().toString()==["Opened","Clicked","Sent","Replied","Bounced","Responded"].sort().toString())return{api_name:"cxFilter_Email_Status",status:"not_sent",subfield:"",comparator:o.comparator,value:o.value};if("LAST_ACTION_TIME"==o.api_name&&"LAST_ACTION"==i.field.api_name){if(i.value.sort().toString()==["Opened","Clicked","Responded","Bounced"].sort().toString())return{api_name:"cxFilter_Email_Status",status:"not_opened",subfield:"",comparator:o.comparator,value:o.value};if(i.value.sort().toString()==["Received","Responded"].sort().toString())return{api_name:"cxFilter_Email_Status",status:"not_received",subfield:"",comparator:o.comparator,value:o.value}}else if("cxFilter_Email_Status"==o.api_name&&("not_opened"==o.status||"sent"==o.status)&&"LAST_SENT_TIME"==i.field.api_name)return{api_name:"cxFilter_Email_Status",status:o.status,subfield:o.subfield,comparator:o.comparator,value:o.value};if(0==(r=this.isCustomField(i))||this.preventTouchedfield)return!1;if("Prediction"===r.api_name)return this.construct_filter(t),r;if("cxFilter_TouchedRecords"==o.api_name&&"User"==o.comparator&&"cxFilter_TouchedRecords"==r.api_name&&"System"==r.comparator)return{api_name:"cxFilter_TouchedRecords",comparator:"UserOrSystem",value:o.value};if("Not Modified"==o.isModified&&"User"==o.comparator&&"Not Modified"==r.isModified&&"System"==r.comparator)return{api_name:"cxFilter_RecordAction",isModified:"Not Modified",comparator:"UserOrSystem",value:o.value};if("Not Done"==o.isModified&&"User"==o.comparator&&"Not Done"==r.isModified&&"System"==r.comparator)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Not Done",comparator:"UserOrSystem",value:o.value};if("cxFilter_UnTouchedRecords"==o.api_name&&"User"==o.comparator&&"cxFilter_UnTouchedRecords"==r.api_name&&"System"==r.comparator)return{api_name:"cxFilter_UnTouchedRecords",comparator:"UserOrSystem",value:o.value}}else if(!e.group||!e.group_operator){if("User_Modified_Time"==e.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"User",value:e.value};if("User_Related_Activity_Time"==e.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"User",value:e.value};if("System_Modified_Time"==e.field.api_name)return{api_name:"cxFilter_RecordAction",isModified:"Modified",comparator:"System",value:e.value};if("System_Related_Activity_Time"==e.field.api_name)return{api_name:"cxFilter_RelatedRecordsAction",isModified:"Done",comparator:"System",value:e.value};if("LAST_SENT_TIME"==e.field.api_name)return{api_name:"cxFilter_Email_Status",status:"sent",subfield:"any_of_the_above",comparator:e.comparator,value:e.value};if(e.field.api_name.toUpperCase().endsWith("PREDICTION")||e.field.api_name.toUpperCase().endsWith("PREDICTION_SCORE")&&"PREDICTION_SCORE"!==e.field.api_name.toUpperCase()){if(e.field.api_name.toUpperCase().endsWith("PREDICTION")&&e.from&&"Prediction"===e.from)return{api_name:"Prediction",criteria:e};if(e.field.api_name.toUpperCase().endsWith("PREDICTION_SCORE")&&e.from&&"Prediction"===e.from)return{api_name:"Prediction",criteria:e}}else if("Locked__s"==e.field.api_name){if(!1===e.value)return{api_name:"cxFilter_Locked",subfield:"Locked_False",comparator:""};if(!0===e.value&&!1===this.locked_crossfield)return{api_name:"cxFilter_Locked",subfield:"Locked_True",comparator:"all_lock"}}return!1}return!1},get_pick_track_enable_field:function(e,t){var i,a=e.length;for(i=0;i<a;i++)if(e[i].refer_from_field&&e[i].refer_from_field.id==t.id)return e[i].api_name;return!1},getFieldType:function(e){return"User_Modified_Time"==e||"User_Related_Activity_Time"==e||"System_Modified_Time"==e||"System_Related_Activity_Time"==e||" Last_Activity_Time"==e?"customField":"normalField"},setFieldCriteria:function(e){var t,i;this.$node.querySelector("#field_"+this._cruxReplace(e.api_name,"[/.]","_"))||(e.api_name=e.api_name.split(".")[0]);var a=this.allfieldType[e.api_name]?this.allfieldType[e.api_name]:e.type;if(e.type=a,e.comparator,i=e.value,this.picklist_trackingObj&&!this.loopStarted){this.loopStarted=!0;var l=this,o=setInterval((function(){var e=$L("#picklist_tracker_field")[0];if(e){var t=e.querySelector("lyte-checkbox"),i=l.picklist_trackingObj;t&&(clearInterval(o),l.loopStarted=!1,t.ltProp("disabled",!1),t.ltProp("checked",!0),e.querySelector("lyte-dropdown").ltProp("selected",i.comparator),e.querySelector("crux-number-component").set("cxPropValue",/\d+/i.exec(i.value)[0]),delete l.picklist_trackingObj)}}),50)}var r="NBX"===e.from&&"Stage"===e.api_name;if("Duration_Days"!=e.api_name&&!r){var s=this.data.cxPropChildModuleFields?"#field_"+this._cruxReplace(e.api_name,"[/.]","_"):"#field_"+this._cruxReplace(e.api_name,"[/.]","_")+":not(.cxdN)",n=this.$node.querySelector(s);if(!n)return!1;if(n.ltProp("checked",!0),"cxFilter_Scoring_Rule"!==e.api_name||0!==this.scoring_rules.length)if("cxFilter_UnallocatedRecords"!==e.api_name||0!==this.assignment_thresholds.length){if("cxFilter_Series"!==e.api_name||0!==this.series.length){var d="#option_"+this._cruxReplace(e.api_name,"[/.]","_");d=this.data.cxPropChildModuleFields?d+"_"+e.id+"_"+this.data.cxPropChildModuleRelation:d,t=this.$node.querySelector(d);var p=this.$node.querySelector("#DDV_"+this._cruxReplace(e.api_name,"[/.]","_"));return"Call_Status"==e.api_name&&-1!=["Activities","Calls"].indexOf(this.data.cxPropModule)?(i=(i=i.split(".")[2]).slice(0,i.length-1),void p.ltProp("selected",i.split(".").pop().replace("}",""))):"cxFilter_Competitor_Alert"===e.api_name?(i=this.getData("appliedCriteria").cross_filters.filter((e=>e.relation.api_name.includes("CrmCompetitorMention__r"))),void this.renderCompetitorFields(i[0],this)):void t.component.set("cxPropCriteria",e)}this.cloned_criteria=e}else this.cloned_criteria=e;else this.cloned_criteria=e}},findLinkingField:function(e,t){for(var i=0,a=t.length;i<a;i++){if(!t[i].custom_field&&"lookup"==t[i].data_type&&t[i].lookup.module.api_name==e[e.field_data_type].connected_module.api_name)return t[i];if(!t[i].custom_field&&"userlookup"==t[i].data_type&&"users"==e[e.field_data_type].connected_module.api_name)return t[i]}},removeField:function(e,t,i){var a=e.length,l=0;for(l=0;l<a;l++){var o=this.getField(e[l]);if(o.constructor==Array)if(this.removeField(o,t,e[l]))return!0;if(o&&(this.data.cxPropChildModuleFields||!o.cxHide)&&o.api_name===t.api_name){if(!this.data.cxPropPreventReordering){Lyte.objectUtils(o,"add",{rendered:!1}),this.isZBCustomModule(this.getData("cxPropModule"))&&"Status"==t.api_name&&t.value&&o.pick_list_values&&(t.value=this.getActualValue(t.value,o)),Lyte.objectUtils(o,"add",{cxHide:!0});var r=$L.extend({},o);if(r.cxOriginField=o,r.cxAppliedField=!0,r.cxHide=!1,this.data.cxPropReorderToSectionTop&&o.cxParent&&o.cxParent.cxFields){let e=o.cxParent.cxFields.filter((e=>e.cxAppliedField));r.cxAppliedPosition=e.length,Lyte.arrayUtils(o.cxParent.cxFields,"insertAt",r.cxAppliedPosition,r)}if(Lyte.arrayUtils(this.data.appliedFields,"push",r),this.data.cxPropChildModuleFields){Lyte.arrayUtils(e,"removeAt",l,1);this.removeFieldFromDropDownFields(o.id,this)}}return!0}}},removeFieldFromDropDownFields:function(e,t){for(var i=this.data.cxPropDropSelectedChildFields,a=this.data.cxPropDropBoxChildFields,l=a.length,o=0;o<l;o++)if(e===a[o].id){Lyte.Component.set(this.data.cxPropDropBoxChildFields[o],{hideInDropDown:!0}),i.contains(a[o])||i.push(a[o]);break}this.setData("cxPropDropSelectedChildFields",i),t.$node.closest("crux-smart-filter-crossfields").component.incrementSelectedFieldCount()},findField:function(e){if(e){if("Stage"===e.api_name&&"NBX"===e.from)return!1;if(e.api_name.indexOf&&"-1"!=e.api_name.indexOf(".")){let t=this.cxFilterFields.filter((t=>t.api_name==e.api_name))[0];"Data_Processing_Basis_Details.Data_Processing_Basis"===e.api_name?e.api_name="Data_Processing_Basis":t||(//!this.$node.querySelector('#field_'+this._cruxReplace(field.api_name, "[/.]","_"))
e.api_name=e.api_name.split(".")[0])}e.api_name.indexOf&&"-1"!=e.api_name.indexOf("->")&&(e.multi_module_lookup=e.api_name.split("->")[1],e.api_name=e.api_name.split("->")[0])}if(this.rfm_avilable&&-1!==["Recency","Frequency","Monetary"].indexOf(e.api_name)&&(e.subfield=e.api_name,e.api_name="Segment_Score"),this.abm_technique_field_avilable&&this.data.abmTechniqueFieldList&&-1!==this.data.abmTechniqueFieldList.indexOf(e.api_name)&&(e.subfield=e.api_name,e.api_name="ABM_Techniques"),this.abm_score_field_available&&-1!==this.getData("abmScoreFieldList").indexOf(e.api_name)&&(e.subfield=e.api_name,e.api_name="ABM_Scores"),"cxFilter_Record_status"==e.api_name&&(this.Record_status_field=e),!this.removeField(this.data.allFields,e)&&this.cruxAssets&&this.cruxAssets.checkIsDynamicFilterCriteria){e.field={api_name:e.api_name};var t=this.cruxAssets.checkIsDynamicFilterCriteria(e);if(t){for(var i in e.criteria={...e},delete e.value,delete e.comparator,delete e.field,t)e[i]=t[i];this.removeField(this.data.allFields,e)}}},getField:function(e){return e&&(e.cxAccordion||e.cxHeader)?e.cxFields&&e.cxFields.length?e.cxFields:[]:e},checkIsValidField:function(e,t){if(!e)return!1;var i=this.moduleRecordMapping,a=this.idModuleMapping,l=this.getData("cxPropPreventUiType"),o=this.getData("cxPropPreventColumnName");if(!Object.keys(e))return!1;if(t&&t.cxAccordion&&-1!==["special_field","abmFields"].indexOf(t.cxAccordionName))return!0;if("multiselectlookup"==e.data_type){var r,s;if(skipField=!1,a[e.multiselectlookup.connected_module.id]&&i[a[e.multiselectlookup.connected_module.id]]&&(r=i[a[e.multiselectlookup.connected_module.id]]),a[e.multiselectlookup.linking_module.id]&&i[a[e.multiselectlookup.linking_module.id]]&&(s=i[a[e.multiselectlookup.linking_module.id]]),r&&(!r.visible||!r.viewable))return!1;if(s)if(!(2==(2&s.visibility)||s.visible&&s.viewable))return!1}return(!window.clientPortalName||-1==["multiuserlookup","ownerlookup","userlookup"].indexOf(e.data_type))&&(!(!e||!e.filterable&&"multiselectlookup"!=e.data_type&&"multiuserlookup"!=e.data_type||e.external||!e.visible||!e.available_in_user_layout||-1!=l.indexOf(e.ui_type)||-1!=o.indexOf(e.column_name))&&!("lookup"===e.data_type&&!0===e.custom_field&&this.data.cxPropModule&&(this.data.cxPropModule.startsWith("Orchestration")||this.data.cxPropModule.startsWith("PathFinder"))||this.data.cxPropModule&&(this.data.cxPropModule.startsWith("Orchestration")||this.data.cxPropModule.startsWith("PathFinder"))&&"SMOWNERID"===e.column_name))},getType:function(e,t,i){var a,l,o,r,s=0,n=(e,t)=>u.indexOf(e.api_name)-u.indexOf(t.api_name),d=this.getData("cxPropCommonInfo").abmModuleInfo?this.getData("cxPropCommonInfo").abmModuleInfo.scoreFields.map((e=>"cxFilter_"+e)):[],p=(e,t)=>d.indexOf(e.api_name)-d.indexOf(t.api_name),c=0,u=this.getData("cxPropCommonInfo").abmModuleInfo?this.getData("cxPropCommonInfo").abmModuleInfo.techniqueFields.map((e=>"cxFilter_"+e)):[],m=this.getData("cxPropModule"),_=this.moduleRecordMapping,f=(this.idModuleMapping,0),y=(this.getData("cxPropPreventUiType"),this.getData("cxPropPreventColumnName"),_[m]&&m?_[m].custom_view:void 0);e=e||{};var h,x=t.length,g=0;for(g=0;g<x;g++)if((h=this.getField(t[g]))&&h.constructor==Array)t[g].cxOpenState=!0,(t[g].cxSort||!1!==t[g].cxSort&&this.data.cxPropSort)&&(h=this.sortArray(h,"field_label")),this.getType(e,h,t[g]);else if(this.checkIsValidField(h,i)){if(t[g]=Object.assign({},t[g]),h=t[g],Lyte.Component.set(h,"display_field_label",h.field_label),13==h.show_type&&-1!==["Recency","Frequency","Monetary"].indexOf(h.api_name)){this.rfm_avilable=!0;a||(a={ind:g,field:{crossFields:[],api_name:"Segment_Score",ui_type:"",field_data_type:"rfm",data_type:"rfm",field_label:r="ABMAccount"===m?_cruxUtils.getI18n("abm.rfm.score"):_cruxUtils.getI18n("crm.segmentation.segment.score"),display_field_label:r}},t.splice(g,0,a.field),this.cxFilterFields.push(a.field),g+=1,x+=1),h.isCheckBox=!0,h.showSubField=!0,t[a.ind].crossFields[{Recency:0,Frequency:1,Monetary:2}[h.api_name]]=h,t.splice(g,1),g-=1,x-=1,h=a.field}if(this.getData("abmTechniqueFieldList")&&-1!==this.getData("abmTechniqueFieldList").indexOf(h.api_name)&&(this.abm_technique_field_avilable=!0,l||(l={ind:g,field:{crossFields:[],api_name:"ABM_Techniques",ui_type:"",field_data_type:"ABM_Techniques",data_type:"ABM_Techniques",field_label:_cruxUtils.getI18n("abm.segmentation.techniques"),display_field_label:_cruxUtils.getI18n("abm.segmentation.techniques")}},t.splice(g,0,l.field),g+=1),h.isCheckBox=!0,t[l.ind].crossFields[s]=h,t.splice(g,1),g-=1,(s+=1)===this.getData("abmTechniqueFieldsLength")&&t[l.ind].crossFields.sort(n),h=l.field),this.getData("abmScoreFieldList")&&-1!==this.getData("abmScoreFieldList").indexOf(h.api_name)){if(this.abm_score_field_available=!0,!o){var v=store.peekAll("field").filter((e=>"Account_Score__s"===e.api_name))[0].field_label;o={ind:g,field:{crossFields:[],api_name:"ABM_Scores",ui_type:"",field_data_type:"ABM_Scores",data_type:"ABM_Scores",field_label:v,display_field_label:v}},t.splice(g,0,o.field),g+=1}h.isCheckBox=!0,t[o.ind].crossFields[c]=h,t.splice(g,1),g-=1,(c+=1)===this.getData("abmScoreFieldLength")&&t[o.ind].crossFields.sort(p),h=o.field}if("TAGMODULEREFID"==h.column_name&&"Activities"==m){if((f+=1)>1){t.splice(g,1),g-=1,x-=1;continue}!y||y.activity_view||y.calls_view||y.event_view||y.task_view?y.activity_view||(y.calls_view?t.splice(g,0,{api_name:"Calls_Tag",column_name:h.column_name,ui_type:h.ui_type,field_data_type:"tag",data_type:"tag",field_label:h.field_label,display_field_label:h.field_label,module_name:"Calls",visible:!0}):y.event_view?t.splice(g,0,{api_name:"Events_Tag",column_name:h.column_name,ui_type:h.ui_type,field_data_type:"tag",data_type:"tag",field_label:h.field_label,display_field_label:h.field_label,module_name:"Events",visible:!0}):y.task_view&&t.splice(g,0,{api_name:"Tasks_Tag",column_name:h.column_name,ui_type:h.ui_type,field_data_type:"tag",data_type:"tag",field_label:h.field_label,display_field_label:h.field_label,module_name:"Tasks",visible:!0}),t.splice(g+1,1)):(t.splice(g,1),g-=1,x-=1)}this.getFieldDataType(h),h.subField=!1,h.rendered=!1,e[h.api_name]=h.field_data_type,Lyte.Component.set(h,"cxFilterIndex",this.cxFilterFields.length+""),h.cxFromArray=t,h.cxParent=i,this.cxFilterFields.push(h),null==h.visible&&(h.visible=!0)}else t.splice(g,1),g-=1,x-=1;return e},constructFilter:function(e){if(e)if(e.filters&&e.filters.group.length){var t,i=e.filters.group,a=0,l=i.length,o=!0;for(a=0;a<l;a++)delete this.preventTouchedfield,(t=this.isCustomField(i[a]))?(e.crossField&&e.crossField.length&&o&&(o=!1,this.construct_crossFilter(e.crossField)),t.type="custom",this.findField(t),this.setFieldCriteria(t),!i[a+1]&&e.cross_filters&&this.construct_crossFilter(e.cross_filters)):(i[a].field&&(i[a].api_name=i[a].field.api_name,i[a].id=i[a].field.id,delete i[a].field),this.isWebsiteActivityField(i[a])&&this.data.displayVisitField.length,this.findField(i[a]),this.setFieldCriteria(i[a]),!i[a+1]&&e.cross_filters&&this.construct_crossFilter(e.cross_filters))}else e.cross_filters&&e.cross_filters.length&&this.construct_crossFilter(e.cross_filters)},isWebsiteActivityField:function(e){return-1!=["Average_Time_Spent_Minutes","Days_Visited","First_Visited_URL","First_Visited_Time","Last_Visited_Time","Number_Of_Chats","Referrer","Visitor_Score","Attended_By","Browser","Operating_System","Portal_Name","Search_Engine","Time_Spent","Visited_Time"].indexOf(e.api_name)},setCriteria:function(e,t=!1){if(e){this.setData("appliedCriteria",JSON.parse(JSON.stringify(e))),this.locked_crossfield=!1,this.blockedCriteriaSelected=!1;var i=e.filters;t&&this.resetFields(),i&&(i.group&&i.group.length<=2||i.field)?(e.cross_filters&&this.construct_crossFilter(e.cross_filters),this.construct_filter(i)):this.constructFilter(e),this.getFieldByKeyValue(this.data.allFields,"","",this.cxFilterFields=[]),this.checkIsEmptyAcc(),this.toggleDealsField()}},checkIsEmptyAcc:function(){if(!this.data.cxPropReorderToSectionTop&&!this.data.cxPropPreventReordering){var e=this.data.allFields.filter((e=>e.cxAccordion)),t=e.length,i=0;for(i=0;i<t;i++){e[i].cxFields.filter((e=>!e.cxHide)).length||Lyte.objectUtils(e[i],"add","cxHideAccordion",!0)}}},toggleDealsField:function(e){var t=this.data.allFields.filter((e=>e.cxAccordion&&"special_field"==e.cxAccordionName))[0];for(l=(a=t?t.cxFields:[])?a.length:0,i=0;i<l;i++)-1!=["cxFilter_Deal_Amount","cxFilter_Deal_Stage","cxFilter_Deal_Owner","cxFilter_Deal_Closing_Date"].indexOf(a[i].api_name)&&(Lyte.objectUtils(a[i],"add",{classInFilter:e}),"hide"==e&&$("#field_"+a[i].api_name)[0].ltProp("checked",!1));var a,l=(a=this.data.appliedFields).length;for(i=0;i<l;i++)-1!=["cxFilter_Deal_Amount","cxFilter_Deal_Stage","cxFilter_Deal_Owner","cxFilter_Deal_Closing_Date"].indexOf(a[i].api_name)&&(Lyte.objectUtils(a[i],"add",{classInFilter:e}),"hide"==e&&$("#field_"+a[i].api_name)[0].ltProp("checked",!1));var o=this.$node.querySelector("#searchId");o&&o.ltProp("value")&&o.setValue(o.ltProp("value"))},getActualValue:function(e,t){var i=[];return e.forEach((function(e){var a=!1;t.pick_list_values.forEach((function(t){if(t.actual_value==e)return i.push(t.display_value),void(a=!0)})),a||i.push(e)})),i},isThresholdSupportedModule:function(e){return!("undefined"==typeof moduleRecordMapping||"undefined"==typeof Crm||!moduleRecordMapping.Thresholds||!Crm.isRestrictionEnabled||Crm.restrictionEnabledModules&&!Crm.restrictionEnabledModules.contains(e)||"Administrator"!==Crm.userDetails.PROFILE_NAME)},getThresholdUsersName:function(e){var t="";return e.forEach(((i,a)=>{t+=a>0&&a<e.length?", ":"",t+=i.name})),t},renderCompetitorFields:function(e,t){var i={},a={},l={},o=null,r=!1,s=null;if(e.criteria){if(e.criteria.group){e.criteria.group.filter((e=>e.group))[0].group;var n=e.criteria.group[1].group.findIndex((e=>"crmcompetitormentions_created_time__s"===e.field.api_name));if(a={api_name:"Competitor_Duration",comparator:e.criteria.group[1].group[n].comparator,value:e.criteria.group[1].group[n].value,type:"date"},e.criteria.group[0].group){var d=e.criteria.group[0].group.filter((e=>e.comparator.includes("starts_with")||e.comparator.includes("ends_with")))[0];s=d.field.api_name.includes("positive")?_cruxUtils.getI18n("crm.sentiment.Positive"):d.field.api_name.includes("negative")?_cruxUtils.getI18n("crm.sentiment.Negative"):d.field.api_name.includes("neutral")?_cruxUtils.getI18n("crm.sentiment.Neutral"):_cruxUtils.getI18n("crm.sentiment.Positive"),o={comparator:d.comparator,value:d.value}}else s=e.criteria.group[0].field.api_name.includes("positive")?_cruxUtils.getI18n("crm.sentiment.Positive"):e.criteria.group[0].field.api_name.includes("negative")?_cruxUtils.getI18n("crm.sentiment.Negative"):e.criteria.group[0].field.api_name.includes("neutral")?_cruxUtils.getI18n("crm.sentiment.Neutral"):_cruxUtils.getI18n("crm.sentiment.Positive");i={api_name:"Competitor_Name",comparator:o?o.comparator:e.criteria.group[0].comparator,value:o?o.value:"equal"===e.criteria.group[0].comparator||"not_equal"===e.criteria.group[0].comparator?e.criteria.group[0].value.split(";"):e.criteria.group[0].value,type:"picklist"},l={api_name:"Competitor_Sentiment",comparator:"equal",value:[s],type:"picklist"}}else r=!0,i={api_name:"Competitor_Name",comparator:e.criteria.comparator,value:e.include_objects?"${NOTEMPTY}":"${EMPTY}",type:"picklist"};t.$node.querySelector("#sub_option_Competitor_Name").component.setData("cxPropCriteria",i),r||(t.$node.querySelector("#sub_option_Competitor_Duration").component.setData("cxPropCriteria",a),t.$node.querySelector("#sub_option_Competitor_Sentiment").component.setData("cxPropCriteria",l))}},keyDownEvent:function(){this.$node.cxProp("aria")&&this.bindEventForAriaFilter()}.observes("cxPropAria").on("didConnect")},{mixins:["crux-filter-utils","crux-element-validation","crux-aria-smart-filter-mixin"]}),Lyte.Component.register("crux-smart-filter-input",{_template:'<template tag-name="crux-smart-filter-input"> <template is="if" value="{{rendered}}"><template case="true"> <lyte-messagebox lt-prop-type="error" id="errorMessage"></lyte-messagebox> <template is="if" value="{{expHandlers(field.cxFieldsDetails,\'&amp;&amp;\',field.renderNew)}}"><template case="true"> <div class="{{if(expHandlers(expHandlers(ifEquals(field.api_name,\'Competitor_Duration\'),\'||\',ifEquals(field.api_name,\'Competitor_Sentiment\')),\'||\',ifEquals(field.api_name,\'Competitor_Name\')),\'\',\'paddingElm cxSmFrInputWrapper\')}}"> <template is="for" items="{{field.cxFieldsDetails}}" item="rowObj" index="fldInd"> <div class=""> <template is="if" value="{{rowObj.cxLabel}}"><template case="true"> <span class="mR2">{{rowObj.cxLabel}}</span> </template></template> <template is="if" value="{{expHandlers(rowObj.cxDropDown_1,\'&amp;&amp;\',rowObj.cxDropDown_1.cxShow)}}"><template case="true"> <lyte-dropdown class="{{rowObj.cxDropDown_1.class}}" lt-prop-boundary="{{boundary}}" data-zcqa="cxDropDown_1_{{field.field_label}}" lt-prop-freeze="true" id="cxDropDown_1_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-index="1" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(rowObj.cxDropDown_1.selectedValue)}}" on-option-selected="{{method(\'getDropDownVal\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox"> <lyte-drop-body> <template is="for" items="{{rowObj.cxDropDown_1.values}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> <template is="if" value="{{expHandlers(rowObj.cxElement_1,\'&amp;&amp;\',rowObj.cxElement_1.cxShow)}}"><template case="true"> <template is="component" class="{{rowObj.cxElement_1.class}}" cx-prop-request-model="{{roleRequestModel}}" cx-prop-logged-in-user-role-required="{{if(ifEquals(roleRequestModel,\'role\'),\'true\',\'false\')}}" cx-prop-show-lookup-icon="{{if(ifEquals(rowObj.cxElement_1,\'role\'),false,true)}}" cx-prop-field-key="field_label" cx-prop-zcqa="{{field.display_field_label}}_input" cx-prop-maxvalue="{{rowObj.cxElement_1.maxValue}}" cx-prop-minvalue="{{rowObj.cxElement_1.minValue}}" cx-prop-maxlength="{{rowObj.cxElement_1.maxLength}}" cx-prop-placeholder="{{rowObj.cxElement_1.placeholder}}" cx-prop-module="{{module}}" cx-prop-class="{{rowObj.cxElement_1.cxClass}}" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_crux_comp" component-name="crux-{{rowObj.cxElement_1}}-component" cx-prop-from="filter" cx-prop-value="{{rowObj.cxElement_1.selectedValue}}" cx-prop-field="{{field}}" cx-prop-decimal-allowed="{{rowObj.cxElement_1.cxDecimal}}" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-login-user="true" onkeydown="{{action(\'inputValidate\',this,event,field)}}" on-error="{{method(\'beforeAlert\')}}" cx-prop-boundary="{{boundary}}" cx-prop-disable-extra-value="{{rowObj.cxElement_1.cxDisableExtraValue}}" cx-prop-type="{{rowObj.cxElement_1.cxType}}" cx-prop-appearance="box" cx-prop-max-count="{{rowObj.cxElement_1.maxCount}}" cx-prop-query-param="{{userProperty.queryParam}}" cx-prop-is-subordinate="{{userProperty.isSubordinate}}" cx-prop-date-pattern="{{userDetails.DATE_PATTERN}}" cx-prop-id="id_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}"></template> </template></template> <template is="if" value="{{expHandlers(rowObj.cxElement_2,\'&amp;&amp;\',rowObj.cxElement_2.cxShow)}}"><template case="true"> <template is="component" class="{{rowObj.cxElement_2.class}}" cx-prop-request-model="{{roleRequestModel}}" cx-prop-logged-in-user-role-required="{{if(ifEquals(roleRequestModel,\'role\'),\'true\',\'false\')}}" cx-prop-show-lookup-icon="{{if(ifEquals(rowObj.cxElement_2,\'role\'),false,true)}}" cx-prop-field-key="field_label" cx-prop-zcqa="{{field.display_field_label}}_input" cx-prop-maxvalue="{{rowObj.cxElement_2.maxValue}}" cx-prop-minvalue="{{rowObj.cxElement_2.minValue}}" cx-prop-maxlength="{{rowObj.cxElement_2.maxLength}}" cx-prop-placeholder="{{rowObj.cxElement_2.placeholder}}" cx-prop-module="{{module}}" cx-prop-class="{{rowObj.cxElement_2.cxClass}}" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_crux_comp" component-name="crux-{{rowObj.cxElement_2}}-component" cx-prop-from="filter" cx-prop-value="{{rowObj.cxElement_2.selectedValue}}" cx-prop-field="{{field}}" cx-prop-decimal-allowed="{{rowObj.cxElement_2.cxDecimal}}" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-login-user="true" onkeydown="{{action(\'inputValidate\',this,event,field)}}" on-error="{{method(\'beforeAlert\')}}" cx-prop-boundary="{{boundary}}" cx-prop-disable-extra-value="{{rowObj.cxElement_2.cxDisableExtraValue}}" cx-prop-type="{{rowObj.cxElement_2.cxType}}" cx-prop-appearance="box" cx-prop-max-count="{{rowObj.cxElement_2.maxCount}}" cx-prop-query-param="{{userProperty.queryParam}}" cx-prop-is-subordinate="{{userProperty.isSubordinate}}" cx-prop-date-pattern="{{userDetails.DATE_PATTERN}}" cx-prop-id="id_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}"></template> </template></template> <template is="if" value="{{expHandlers(rowObj.cxDropDown_2,\'&amp;&amp;\',rowObj.cxDropDown_2.cxShow)}}"><template case="true"> <lyte-dropdown class="{{rowObj.cxDropDown_2.class}}" lt-prop-boundary="{{boundary}}" data-zcqa="cxDropDown_2_{{field.field_label}}" lt-prop-freeze="true" id="cxDropDown_2_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-index="1" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(rowObj.cxDropDown_2.selectedValue)}}" on-option-selected="{{method(\'inputValueChanged\',\'lyte-dropdown\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{dateoptions}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> <template is="for" items="{{crossFields}}" item="Obj" index="index"> <template is="if" value="{{Obj.isCheckBox}}"><template case="true"> <template is="if" value=""><template case="true"><div class="facet mL10"><lyte-checkbox title="{{Obj.field_label}}" value="{{Obj.api_name}}" data-zcqa="" lt-prop-type="default" class="checkFilter userSelectNone {{radioBtnIsSelected(field,Obj)}}" id="sub_field_{{Obj.api_name}}" lt-prop-label="{{Obj.field_label}}" on-changed="{{method(\'inputValueChanged\',Obj,true)}}"></lyte-checkbox> </div></template></template> </template><template case="false"><template is="if" value="{{expHandlers(Obj.isRadioBtn,\'!==\',false)}}"><template case="true"> <lyte-radiobutton data-zcqa="{{field.column_name}}_{{Obj.api_name}}" id="sub_field_{{Obj.api_name}}" lt-prop-type="primary" class="{{radioBtnIsSelected(field,Obj)}}" lt-prop-checked="{{radioBtnIsSelected(field,Obj,true)}}" lt-prop-name="option_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-value="{{Obj.api_name}}" lt-prop-label="{{Obj.field_label}}" on-changed="{{method(\'getCrossFieldOption\',index,Obj)}}" on-before-checked="{{method(\'crossFieldHideOption\')}}"></lyte-radiobutton> </template></template></template></template> <template is="if" value="{{expHandlers(Obj.showSubField,\'!==\',false)}}"><template case="true"> <crux-smart-filter-input class="{{Obj.cxClass}}" id="sub_option_{{Obj.api_name}}" field="{{Obj}}" module="{{if(ifEquals(module,\'Activities\'),Obj.module_name,module)}}" on-value-change="{{method(\'inputValueChanged\',Obj,false)}}" boundary="{{boundary}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}"></crux-smart-filter-input> </template></template> </template> </div> </template> </div> </template><template case="false"> <div class="{{if(expHandlers(expHandlers(ifEquals(field.api_name,\'Competitor_Duration\'),\'||\',ifEquals(field.api_name,\'Competitor_Sentiment\')),\'||\',ifEquals(field.api_name,\'Competitor_Name\')),\'\',\'paddingElm cxSmFrInputWrapper\')}}"> <template is="if" value="{{expHandlers(expHandlers(field.cxFilter_RecordAction,\'==\',true),\'||\',expHandlers(field.api_name,\'==\',&quot;Recommendation&quot;))}}"><template case="true"> <div class="cxSmartFilterTwoCol"> <lyte-dropdown lt-prop-boundary="{{boundary}}" data-zcqa="record_{{field.field_label}}" class="{{dropDownWidth.headDropDownWidth}}" id="record_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-selected="{{lbind(selectedValues.headDropDownValue)}}" lt-prop-index="1" on-change="{{method(\'observeDropDownChanges\')}}" on-option-selected="{{method(\'inputValueChanged\',\'lyte-dropdown\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxSmartFilterDropbox cxDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{field.values}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> </template></template> <template is="if" value="{{expHandlers(field.api_name,\'===\',&quot;SimilarityAvailable&quot;)}}"><template case="true"> <div class="facet mB5"> <div class="cxSmartFilterInputSimAvailable "> <div class="facet mL20 mB10"> <lyte-checkbox title="{{crossFields[0].field_label}}" data-zcqa="{{field.column_name}}_{{crossFields[0].api_name}}" lt-prop-type="default" class="checkFilter userSelectNone {{radioBtnIsSelected(field,crossFields[0])}}" id="sub_field_{{crossFields[0].api_name}}" lt-prop-value="{{crossFields[0].api_name}}" lt-prop-label="{{crossFields[0].field_label}}" on-changed="{{method(\'getCrossFieldOption\',null,crossFields[0])}}"> </lyte-checkbox> <template is="if" value="{{similarity.isScore}}"><template case="true"> <crux-smart-filter-input id="sub_option_{{crossFields[0].api_name}}" field="{{crossFields[0]}}" module="{{if(ifEquals(module,\'Activities\'),crossFields[0].module_name,module)}}" on-value-change="{{method(\'inputValueChanged\',crossFields[0],false)}}" boundary="{{boundary}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}"> </crux-smart-filter-input> </template></template> </div> <div class="facet mL20 mB10"> <lyte-checkbox title="{{crossFields[1].field_label}}" data-zcqa="{{field.column_name}}_{{crossFields[1].api_name}}" lt-prop-type="default" class="checkFilter userSelectNone {{radioBtnIsSelected(field,crossFields[1])}}" id="sub_field_{{crossFields[1].api_name}}" lt-prop-value="{{crossFields[1].api_name}}" lt-prop-label="{{crossFields[1].field_label}}" on-changed="{{method(\'getCrossFieldOption\',null,crossFields[1])}}"> </lyte-checkbox> <template is="if" value="{{similarity.isRecords}}"><template case="true"> <crux-smart-filter-input id="sub_option_{{crossFields[1].api_name}}" field="{{crossFields[1]}}" module="{{if(ifEquals(module,\'Activities\'),crossFields[1].module_name,module)}}" on-value-change="{{method(\'inputValueChanged\',crossFields[1],false)}}" boundary="{{boundary}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}"> </crux-smart-filter-input> </template></template> </div> </div> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(field.api_name,\'==\',&quot;Recommendation&quot;),\'&amp;&amp;\',renderRecommendation)}}"><template case="true"> <div class="facet mB5"> <div class="mB0"> <template is="if" value="{{expHandlers(selectedValues.headDropDownValue,\'===\',&quot;selected&quot;)}}"><template case="true"> <div class="dB mB5 "> <lyte-dropdown lt-prop-freeze="true" lt-prop-boundary="{{boundary}}" class="w260 cxMXNFld" id="multiSelect_lookup_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_infield" lt-prop-yield="true" on-add="{{method(\'addToList\',\'Recommendation_infield\')}}" on-remove="{{method(\'removeFromList\')}}" on-show="{{method(\'onShowDropBox\')}}" on-hide="{{method(\'onBeforeHide\')}}" lt-prop-type="multisearch" lt-prop-tabindex="14" on-option-selected="{{method(\'inputValueChanged\')}}" on-value-change="{{method(\'changeUserInputValue\')}}" lt-prop-selected="{{selectedValues.multiSelectFieldValue1}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="dB"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{renderItems2}}" item="selitem" index="indexval"> <li id="renderItems_{{selitem[lookupDisplayField]}}_infield" class="rec" data-value="{{selitem.id}}"> <span class="lyteDropdownVisible">{{selitem[lookupDisplayField]}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-input id="{{field.api_name}}_infield_Search_val" on-value-change="{{method(\'onSearch\')}}" onclick="{{action(\'toggleDropDown\',field,\'Recommendation_infield\')}}" lt-prop-placeholder="{{placeholderValue[0]}}"></lyte-input> </li> </ul> </div> </lyte-drop-button> <lyte-drop-box class="cxSmartFilterDropbox cxDropbox lookup_result_Box"> <lyte-drop-body class="result_items"> <template is="if" value="{{displayMsg.multiLookupMsg}}"><template case="true"> <div id="display_msg_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" class="select2-results__option select2-results__message">{{displayMsg.multiLookupMsg}}</div> </template></template> <template is="for" items="{{lookUpArray}}" item="item" index="indval"> <lyte-drop-item id="campaign_{{item[lookupDisplayField]}}" class="campaigns_item" data-value="{{item.id}}" data-zcqa="{{field.field_label}}_{{item[lookupDisplayField]}}"> {{item[lookupDisplayField]}} </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> </template></template> <div class="cxSmartFilterLabelWrap"> <span class="cxSmartFilterLabel ">{{cruxGetI18n(\'crm.filter.label.in\')}}</span> </div> <template is="if" value="{{expHandlers(recommendationBasedOnOption.FirstTime,\'!==\',undefined)}}"><template case="true"> <div class="cxSmartFilterLabelWrap"> <lyte-checkbox on-changed="{{method(\'observeDropDownChanges\')}}" lt-prop-checked="{{lbind(recommendationBasedOn.first_buy)}}" lt-prop-name="RecommendationBasedOn" lt-prop-value="{{recommendationBasedOnOption.FirstTime[dropdownSysValue]}}" data-zcqa="by_{{field.field_label}}" lt-prop-id="by_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_dropdownSysValue" lt-prop-label="{{recommendationBasedOnOption.FirstTime[dropdownDispValue]}}"></lyte-checkbox> </div> </template></template> <template is="if" value="{{expHandlers(recommendationBasedOnOption.Dependent,\'!==\',undefined)}}"><template case="true"> <div class="cxSmartFilterLabelWrap"> <lyte-checkbox on-changed="{{method(\'observeDropDownChanges\')}}" lt-prop-checked="{{lbind(recommendationBasedOn.cross_selling)}}" lt-prop-name="RecommendationBasedOn" lt-prop-value="{{recommendationBasedOnOption.Dependent[dropdownSysValue]}}" data-zcqa="by_{{field.field_label}}" lt-prop-id="by_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_dropdownSysValue" lt-prop-label="{{recommendationBasedOnOption.Dependent[dropdownDispValue]}}"></lyte-checkbox> </div> </template></template> <template is="if" value="{{expHandlers(recommendationBasedOnOption.Bundle,\'!==\',undefined)}}"><template case="true"> <div class="cxSmartFilterLabelWrap"> <lyte-checkbox on-changed="{{method(\'observeDropDownChanges\')}}" lt-prop-checked="{{lbind(recommendationBasedOn.bundle)}}" lt-prop-name="RecommendationBasedOn" lt-prop-value="{{recommendationBasedOnOption.Bundle[dropdownSysValue]}}" data-zcqa="by_{{field.field_label}}" lt-prop-id="by_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_dropdownSysValue" lt-prop-label="{{recommendationBasedOnOption.Bundle[dropdownDispValue]}}"></lyte-checkbox> </div> </template></template> <template is="if" value="{{expHandlers(recommendationBasedOnOption.Repeat,\'!==\',undefined)}}"><template case="true"> <div class="cxSmartFilterLabelWrap"> <lyte-checkbox on-changed="{{method(\'observeDropDownChanges\')}}" lt-prop-checked="{{lbind(recommendationBasedOn.re_buy)}}" lt-prop-name="RecommendationBasedOn" lt-prop-value="{{recommendationBasedOnOption.Repeat[dropdownSysValue]}}" data-zcqa="by_{{field.field_label}}" lt-prop-id="by_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_dropdownSysValue" lt-prop-label="{{recommendationBasedOnOption.Repeat[dropdownDispValue]}}"></lyte-checkbox> </div> <div class="cxSmartFilterLabelWrap"> <template is="if" value="{{recommendationBasedOn.re_buy}}"><template case="true"> <span class="mR5 cxSmartFilterLabelContent " style="font-size: 14px;">{{cruxGetI18n(\'crm.filter.label.and.purchase.in\')}}</span> <lyte-dropdown class="{{setWidth}}" lt-prop-boundary="{{boundary}}" data-zcqa="filter_{{field.field_label}}" lt-prop-freeze="true" id="DDV_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-index="1" lt-prop-selected="{{lbind(selectedValues.firstDropDownValue)}}" on-change="{{method(\'observeDropDownChanges\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxSmartFilterDropbox cxDropbox"> <lyte-drop-body> <template is="for" items="{{options}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(selectedValues.firstDropDownValue,\'==\',&quot;CUSTOM&quot;)}}"><template case="true"> <div id="Recommendation_custom_div1"> <crux-date-component cx-prop-from="filter" cx-prop-class="w100" id="Recommendation_custom" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-value="{{lbind(selectedValues.headDateValue)}}"></crux-date-component> </div> </template></template> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(recommendationBasedOnOption.Sequence,\'!==\',undefined)}}"><template case="true"> <div class="dB mB5 mT10"> <lyte-checkbox on-changed="{{method(\'observeDropDownChanges\')}}" lt-prop-checked="{{lbind(recommendationBasedOn.next_buy)}}" lt-prop-name="RecommendationBasedOn" lt-prop-value="{{recommendationBasedOnOption.Sequence[dropdownSysValue]}}" data-zcqa="by_{{field.field_label}}" lt-prop-id="by_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_dropdownSysValue" lt-prop-label="{{recommendationBasedOnOption.Sequence[dropdownDispValue]}}"></lyte-checkbox> </div> </template></template> </div> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(field.cxFieldsDetails,\'&amp;&amp;\',field.cxFieldsDetails[0]),\'||\',expHandlers(field.field_data_type,\'==\',&quot;custom&quot;)),\'||\',expHandlers(field.api_name,\'==\',&quot;cxFilter_Email_Sentiment&quot;)),\'||\',expHandlers(field.api_name,\'==\',&quot;best_time&quot;))}}"><template case="true"> <div class="cxSmartFilterTwoCol {{if(expHandlers(field.api_name,\'==\',\'best_time\'),\'mT10\')}}"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(field.cxFieldsDetails,\'!\'),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',&quot;cxFilter_Email_Status&quot;)),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',&quot;cxFilter_Email_Sentiment&quot;)),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',&quot;best_time&quot;))}}"><template case="true"> <span class="cxAriaPrefixLabel mR2">{{cruxGetI18n(\'crm.label.By\')}}</span> </template></template> <template is="if" value="{{field.cxFieldsDetails}}"><template case="true"> <span class="cxAriaPrefixLabel mR2">{{field.cxFieldsDetails[0].cxLabel}}</span> </template></template> <template is="if" value="{{expHandlers(field.api_name,\'==\',&quot;best_time&quot;)}}"><template case="true"> <span class="mR5">{{cruxGetI18n(\'crm.label.available\')}}</span> </template></template> <lyte-dropdown class="w150" lt-prop-freeze="true" lt-prop-boundary="{{boundary}}" data-zcqa="by_{{field.field_label}}" id="by_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-index="1" on-option-selected="{{method(\'showSentStatus\',field)}}" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(selectedValues.byDropDownValue)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{bydropdownOption}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(field.data_type,\'===\',&quot;NBX&quot;),\'&amp;&amp;\',expHandlers(field.api_name,\'===\',&quot;NBX_Available&quot;))}}"><template case="true"> <crux-picklist-component cx-prop-from="filter" cx-prop-box-class="cxSmartFilterDropbox" data-zcqa="NBX_ACTIVITY_OPTION" id="NBX_ACTIVITY_OPTION" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-field="{{field}}"> </crux-picklist-component> <div class="mT5"> <span class="mR5 cxPickListContent dIB cxVam">{{cruxGetI18n(\'crm.zia.nbx.filter.due\')}}</span> <lyte-dropdown class="{{setWidth}}" lt-prop-boundary="{{boundary}}" data-zcqa="NBX_TIME_OPTION" lt-prop-freeze="true" id="DDV_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-index="1" lt-prop-selected="{{lbind(selectedValues.firstDropDownValue)}}" on-change="{{method(\'observeDropDownChanges\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxSmartFilterDropbox cxDropbox"> <lyte-drop-body> <template is="for" items="{{options}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> </template></template> <div class="cvRowField"> <template is="if" value="{{expHandlers(field.parent_field,\'==\',&quot;prediction&quot;)}}"><template case="true"> <div class="cxPredictionContent"> <template is="if" value="{{expHandlers(predictionSelectedType.first,\'||\',predictionSelectedType.second)}}"><template case="true"> <div class="cvRowField"> <span class=" cxPredictionSelectedTypeContent mR5 dIB cxVam mB10">{{predictionSelectedType.predict_field[0].field_label}}</span> <lyte-dropdown class="{{setWidth}}" lt-prop-boundary="{{boundary}}" data-zcqa="filter_{{field.api_name}}" lt-prop-freeze="true" id="criteria_comparator" lt-prop-index="1" on-option-selected="{{method(\'inputValueChanged\',\'prediction_criteria\')}}" lt-prop-selected="{{lbind(selectedValues.firstDropDownValue)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxSmartFilterDropbox cxDropbox"> <lyte-drop-body> <template is="for" items="{{predictionOptions.criteria_operator}}" item="item" index="index"> <lyte-drop-item data-value="{{item[\'system\']}}" data-zcqa="{{item[\'display\']}}"> {{item[\'display\']}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(expHandlers(criteriaDisplay,\'&amp;&amp;\',expHandlers(isCriteriaBetween,\'==\',false)),\'&amp;&amp;\',expHandlers(showSecondDropdownType,\'!=\',&quot;date&quot;))}}"><template case="true"> <div class="{{if(ifEquals(predictionEle,\'date\'),\'cxShowSecondDropdownType\',\'\')}}"> <template is="component" data-zcqa="criteria_prediction" id="criteria_prediction" component-name="crux-{{predictionEle}}-component" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-class="mB5 {{setWidth}}" cx-prop-field="{{predictionSelectedType.criteria_fields[0]}}" on-value-change="{{method(\'changeUserInputValue\',this)}}" cx-prop-value="{{selectedValues.criteriaValue}}"></template> </div> </template><template case="false"><template is="if" value="{{expHandlers(showSecondDropdownType,\'==\',&quot;date&quot;)}}"><template case="true"> <div class="cxShowSecondDropdownContent"> <crux-number-component cx-prop-from="filter" data-zcqa="dateInput" id="dateInput" on-value-change="{{method(\'changeUserInputValue\',this)}}" cx-prop-value="{{lbind(selectedValues.dateVal)}}"> </crux-number-component> <lyte-dropdown class="w80" lt-prop-boundary="{{boundary}}" lt-prop-freeze="true" data-zcqa="{{field.column_name}}_dateOptions" id="second_{{field.api_name}}_dropdown" lt-prop-index="1" on-option-selected="{{method(\'inputValueChanged\',\'lyte-dropdown\')}}" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(selectedValues.secondDropDownValue)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{dateoptions}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> </template></template></template></template> </div> <template is="if" value="{{expHandlers(criteriaDisplay,\'&amp;&amp;\',isCriteriaBetween)}}"><template case="true"> <div class="cvRowField"> <div class="mB5"> <template cx-prop-class="w100" is="component" data-zcqa="criteria_prediction" id="criteria_prediction_0" component-name="crux-{{predictionEle}}-component" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-field="{{predictionSelectedType.criteria_fields[0]}}" cx-prop-placeholder="{{cruxGetI18n(\'crm.label.from\')}}" on-value-change="{{method(\'changeUserInputValue\',this)}}" cx-prop-value="{{selectedValues.criteriaValue0}}"></template> <span class="cxCriteriaDisplayContent"> - </span> <template cx-prop-class="w100" is="component" data-zcqa="criteria_prediction" id="criteria_prediction_1" component-name="crux-{{predictionEle}}-component" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-field="{{predictionSelectedType.criteria_fields[0]}}" cx-prop-placeholder="{{cruxGetI18n(\'crm.label.to\')}}" on-value-change="{{method(\'changeUserInputValue\',this)}}" cx-prop-value="{{selectedValues.criteriaValue1}}"></template> </div> </div> </template></template> </template><template case="false"><template is="if" value="{{predictionSelectedType.completed}}"><template case="true"> <div class="mL10"> <lyte-radiobutton tabindex="0" data-zcqa="{{successFailureOption[0].display}}" id="sub_field_{{successFailureOption[0].system}}" lt-prop-name="option_{{field.api_name}}" lt-prop-value="{{successFailureOption[0].system}}" lt-prop-label="{{successFailureOption[0].display}}" lt-prop-type="primary" on-checked="{{method(\'getCrossFieldOption\',0,successFailureOption[0])}}" on-before-checked="{{method(\'crossFieldHideOption\')}}"></lyte-radiobutton> <template is="if" value="{{expHandlers(expHandlers(isSuccess,\'==\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSuccess,\'!=\',&quot;undefined&quot;))}}"><template case="true"> <lyte-dropdown lt-prop-boundary="{{boundary}}" data-zcqa="successFailureDropDown" class="mT10" id="record_{{field.api_name}}" lt-prop-index="1" on-change="{{method(\'observeDropDownChanges\')}}" on-option-selected="{{method(\'inputValueChanged\',\'prediction_SF\')}}" lt-prop-selected="{{lbind(selectedOptionSf)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{successFailureDropDown}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> <div class="mL10"> <lyte-radiobutton tabindex="0" data-zcqa="{{successFailureOption[1].display}}" id="sub_field_{{successFailureOption[1].system}}" lt-prop-name="option_{{field.api_name}}" lt-prop-value="{{successFailureOption[1].system}}" lt-prop-label="{{successFailureOption[1].display}}" lt-prop-type="primary" on-checked="{{method(\'getCrossFieldOption\',1,successFailureOption[1])}}" on-before-checked="{{method(\'crossFieldHideOption\')}}"></lyte-radiobutton> <template is="if" value="{{expHandlers(expHandlers(isSuccess,\'!=\',&quot;true&quot;),\'&amp;&amp;\',expHandlers(isSuccess,\'!=\',&quot;undefined&quot;))}}"><template case="true"> <lyte-dropdown lt-prop-boundary="{{boundary}}" data-zcqa="successFailureDropDown" class="mT10" id="record_{{field.api_name}}" lt-prop-index="1" on-change="{{method(\'observeDropDownChanges\')}}" on-option-selected="{{method(\'inputValueChanged\',\'prediction_SF\')}}" lt-prop-selected="{{lbind(selectedOptionSf)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{successFailureDropDown}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> </template></template></template></template> <template is="if" value="{{expHandlers(predictionSelectedType.score_field,\'!=\',undefined)}}"><template case="true"> <div class="cvRowField"> <lyte-checkbox on-changed="{{method(\'observeDropDownChanges\')}}" lt-prop-checked="{{lbind(isScoreSelected)}}" id="scoreCheckBox" lt-prop-name="{{predictionSelectedType.score_field.api_name}}" lt-prop-value="{{predictionSelectedType.score_field.id}}" data-zcqa="by_{{field.field_label}}" lt-prop-label="{{cruxGetI18n(\'crm.zia.prediction.likelihood\')}}" class="mT5 mB10"> </lyte-checkbox> <template is="if" value="{{isScoreSelected}}"><template case="true"> <lyte-dropdown class="{{setWidth}}" lt-prop-boundary="{{boundary}}" data-zcqa="filter_{{field.api_name}}" lt-prop-freeze="true" id="score_criteria_comparator" lt-prop-index="1" on-option-selected="{{method(\'inputValueChanged\',\'score_criteria\')}}" lt-prop-selected="{{lbind(selectedValues.scoreComparator)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxSmartFilterDropbox cxDropbox"> <lyte-drop-body> <template is="for" items="{{predictionOptions.score_operator}}" item="item" index="index"> <lyte-drop-item data-value="{{item[\'system\']}}" data-zcqa="{{item[\'display\']}}"> {{item[\'display\']}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(scoreCriteriaDisplay,\'&amp;&amp;\',expHandlers(isScoreBetween,\'==\',false))}}"><template case="true"> <template is="component" data-zcqa="score_criteria_prediction" id="score_criteria_prediction" component-name="crux-number-component" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-maxlength="3" cx-prop-minvalue="0" cx-prop-maxvalue="100" cx-prop-field="{{if(predictionSelectedType.first,predictionSelectedType.score_field[0],predictionSelectedType.score_field[1])}}" cx-prop-appearance="box" on-value-change="{{method(\'changeUserInputValue\',this)}}" cx-prop-value="{{lbind(selectedValues.scoreValue)}}"></template> </template></template> <template is="if" value="{{expHandlers(scoreCriteriaDisplay,\'&amp;&amp;\',isScoreBetween)}}"><template case="true"> <div class="mB5"> <template cx-prop-class="w100" is="component" data-zcqa="score_criteria_prediction" id="score_criteria_prediction_0" component-name="crux-number-component" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-placeholder="{{cruxGetI18n(\'crm.label.from\')}}" cx-prop-minvalue="0" cx-prop-maxvalue="100" cx-prop-maxlength="3" cx-prop-field="{{if(predictionSelectedType.first,predictionSelectedType.score_field[0],predictionSelectedType.score_field[1])}}" cx-prop-appearance="box" on-value-change="{{method(\'changeUserInputValue\',this)}}" cx-prop-value="{{lbind(selectedValues.scoreValue0)}}"></template> <span class="cxScoreCriteriaDisplay"> - </span> <template cx-prop-class="w100" is="component" data-zcqa="score_criteria_prediction" id="score_criteria_prediction_1" component-name="crux-number-component" cx-prop-minvalue="0" cx-prop-maxvalue="100" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-placeholder="{{cruxGetI18n(\'crm.label.to\')}}" cx-prop-module="{{module}}" cx-prop-maxlength="3" cx-prop-field="{{if(predictionSelectedType.first,predictionSelectedType.score_field[0],predictionSelectedType.score_field[1])}}" cx-prop-appearance="box" on-value-change="{{method(\'changeUserInputValue\',this)}}" cx-prop-value="{{lbind(selectedValues.scoreValue1)}}"></template> </div> </template></template> </template></template> </div> </template></template><template is="if" value="{{expHandlers(expHandlers(predictionSelectedType.first,\'||\',predictionSelectedType.second),\'&amp;&amp;\',isTrendShown)}}"><template case="true"> <lyte-checkbox on-changed="{{method(\'observeDropDownChanges\')}}" lt-prop-checked="{{lbind(isTrendSelected)}}" id="trendCheckBox" data-zcqa="by_{{field.field_label}}" class="cxSfTrendCheckbox"> </lyte-checkbox> <lyte-dropdown class="w150" lt-prop-boundary="{{boundary}}" data-zcqa="trend" id="record_{{field.api_name}}" lt-prop-selected="{{lbind(selectedTrend)}}" lt-prop-disabled="{{if(ifEquals(isTrendSelected,false),true,false)}}" lt-prop-index="1" on-change="{{method(\'observeDropDownChanges\')}}" on-option-selected="{{method(\'inputValueChanged\',\'prediction_trend\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{trendOption}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(options.length,\'&amp;&amp;\',firstDropdown),\'&amp;&amp;\',expHandlers(field.api_name,\'!==\',&quot;SimilarityRecords&quot;)),\'&amp;&amp;\',expHandlers(field.data_type,\'!==\',&quot;NBX&quot;)),\'&amp;&amp;\',expHandlers(field.api_name,\'!==\',&quot;Competitor_Sentiment&quot;)),\'&amp;&amp;\',expHandlers(field.field_data_type,\'!==\',&quot;crossModule&quot;))}}"><template case="true"> <lyte-dropdown class="{{setWidth}} {{setMargin}}" lt-prop-boundary="{{boundary}}" data-zcqa="filter_{{field.field_label}}" lt-prop-freeze="true" id="DDV_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-index="1" on-option-selected="{{method(\'getDropDownVal\')}}" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(selectedValues.firstDropDownValue)}}" before-select="{{method(\'beforeSelectDropDown\')}}" lt-prop-disabled-list="{{optionsDisabledList}}" on-before-show="{{method(\'beforeOptionsSet\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{options}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}" data-custom-tooltip="{{if(item.cxTitle,\'true\',\'false\')}}" lt-prop-title="{{item.cxTitle}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(selectedValues.firstDropDownValue,\'==\',&quot;CUSTOM&quot;)}}"><template case="true"> <div id="Recommendation_custom_div"> <crux-date-component cx-prop-from="filter" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-class="w100" id="Recommendation_custom" cx-prop-value="{{selectedValues.headDateValue}}"></crux-date-component> </div> </template></template> </template></template><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(field.api_name,\'==\',&quot;cxFilter_Campaigns&quot;),\'||\',expHandlers(expHandlers(field.field_data_type,\'===\',&quot;multirelation&quot;),\'||\',expHandlers(expHandlers(field.field_data_type,\'==\',&quot;multiselectlookup&quot;),\'&amp;&amp;\',expHandlers(field.ui_type,\'!=\',445)))),\'||\',expHandlers(field.api_name,\'===\',&quot;SimilarityRecords&quot;)),\'||\',isChildFieldLookup)}}"><template case="true"><template is="if" value="{{expHandlers(expHandlers(field.api_name,\'==\',&quot;cxFilter_Campaigns&quot;),\'&amp;&amp;\',opt1.length)}}"><template case="true"> <div> <lyte-dropdown class="w250" lt-prop-boundary="{{boundary}}" lt-prop-freeze="true" data-zcqa="{{field.field_label}}_filterOptions" id="DDV1_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-index="1" on-option-selected="{{method(\'inputValueChanged\',\'lyte-dropdown\')}}" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(selectedValues.headDropDownValue)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{opt1}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </div> </template></template> <lyte-dropdown lt-prop-freeze="true" lt-prop-boundary="{{boundary}}" class="cxBoxDropdown {{if(expHandlers(field.api_name,\'===\',\'SimilarityRecords\'),w150,w250)}} dB cxMXNFld" id="multiSelect_lookup_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-yield="true" on-add="{{method(\'addToList\',field.api_name)}}" on-remove="{{method(\'removeFromList\')}}" on-show="{{method(\'onShowDropBox\',field.api_name,this)}}" on-hide="{{method(\'onBeforeHide\')}}" lt-prop-type="multisearch" lt-prop-tabindex="14" on-option-selected="{{method(\'inputValueChanged\',\'lyte-dropdown\')}}" lt-prop-selected="{{lbind(selectedValues.multiSelectFieldValue)}}" lt-prop="{{childCompProps}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button class="dB"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{renderItems}}" item="selitem" index="indexval"> <li id="renderItems_{{selitem[lookupDisplayField]}}" class=" lyteMultipleSelect {{if(ifEquals(indexval,0),\'\')}}" data-value="{{selitem.id}}"> <span class="lyteDropdownVisible">{{selitem[lookupDisplayField]}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <lyte-input id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_Search_val" on-value-change="{{method(\'onSearch\')}}" onclick="{{action(\'toggleDropDown\',field,\'\',this)}}" lt-prop-placeholder="{{placeholderValue[0]}}" onkeydown="{{action(\'preventDefault\',this,event)}}"></lyte-input> </li> </ul> </div> </lyte-drop-button> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox lookup_result_Box {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body class="result_items"> <template is="if" value="{{displayMsg.multiLookupMsg}}"><template case="true"> <div id="display_msg_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" class="select2-results__option select2-results__message">{{displayMsg.multiLookupMsg}}</div> </template></template> <template is="for" items="{{lookUpArray}}" item="item" index="indval"> <lyte-drop-item id="campaign_{{item[lookupDisplayField]}}" class="campaigns_item" data-value="{{item.id}}" data-zcqa="{{field.field_label}}_{{item[lookupDisplayField]}}"> {{item[lookupDisplayField]}} </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(expHandlers(field.api_name,\'==\',&quot;cxFilter_Campaigns&quot;),\'&amp;&amp;\',memberStatus)}}"><template case="true"> <div id="memberStatus"> <template is="component" cx-prop-class="w250 dB" data-zcqa="memberStatus" id="memberStatusField" component-name="crux-picklist-component" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-field="{{field}}" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-value="{{selectedValues.value2}}" cx-prop-boundary="{{boundary}}" cx-prop-placeholder="{{cruxGetI18n(\'crm.filters.select.campaign.status\',cruxGetI18n(\'campaign.Member\'))}}" cx-prop-id="memberStatus" cx-prop-appearance="box"></template> </div> <template is="if" value="{{expHandlers(field.serviceStatus,\'&amp;&amp;\',field.serviceStatus.length)}}"><template case="true"> <div id="serviceStatus"> <template is="component" cx-prop-class="w250 dB" data-zcqa="serviceStatus" id="serviceStatusField" component-name="crux-picklist-component" cx-prop-disable-extra-value="true" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-field="{{field}}" cx-prop-picklist-values="{{field.serviceStatus}}" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-value="{{selectedValues.Service_Status}}" cx-prop-boundary="{{boundary}}" cx-prop-placeholder="{{cruxGetI18n(\'crm.filters.select.campaign.status\',cruxGetI18n(\'Service\'))}}" cx-prop-id="serviceStatus"></template> </div> </template></template> </template></template> </template></template> <template is="if" value="{{expHandlers(expHandlers(cruxElement1,\'&amp;&amp;\',expHandlers(isChildFieldLookup,\'!\')),\'&amp;&amp;\',expHandlers(showSecondDropdownType,\'!=\',&quot;between&quot;))}}"><template case="true"> <template is="if" value="{{cruxAssetsCompMapping[field.api_name]}}"><template case="true"> <template is="component" component-name="{{cruxAssetsCompMapping[field.api_name]}}" field="{{field}}" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_crux_comp" comparator="{{selectedValues.firstDropDownValue}}" selected-value="{{selectedValues.value1}}" criteria="{{cxPropCriteria}}" on-value-change="{{method(\'changeUserInputValue\')}}" on-error="{{method(\'beforeAlert\')}}" from="smart_filter"></template> </template><template case="false"> <template is="component" class="{{field.cxFilterClass.cruxElement1}}" cx-prop-request-model="{{roleRequestModel}}" cx-prop-logged-in-user-role-required="{{if(ifEquals(roleRequestModel,\'role\'),\'true\',\'false\')}}" cx-prop-show-lookup-icon="{{if(ifEquals(cruxElement1,\'role\'),false,true)}}" cx-prop-field-key="field_label" cx-prop-zcqa="{{field.display_field_label}}_input" cx-prop-maxvalue="{{field.maxValue}}" cx-prop-minvalue="{{field.minValue}}" cx-prop-maxlength="{{maxLen}}" cx-prop-placeholder="{{placeholderValue[0]}}" cx-prop-module="{{module}}" cx-prop-class="{{numberDropClass}}" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_crux_comp" component-name="crux-{{cruxElement1}}-component" cx-prop-from="filter" cx-prop-value="{{selectedValues.value1}}" cx-prop-field="{{field}}" cx-prop-decimal-allowed="{{numberFieldDecimal}}" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-login-user="{{field.cxLoginUser}}" onkeydown="{{action(\'inputValidate\',this,event,field)}}" on-error="{{method(\'beforeAlert\')}}" cx-prop-boundary="{{boundary}}" cx-prop-disable-extra-value="{{field.cxDisableExtraValue}}" cx-prop-type="{{field.cxPropType}}" cx-prop-appearance="box" cx-prop-max-count="{{field.maxCount}}" cx-prop-query-param="{{userProperty.queryParam}}" cx-prop-is-subordinate="{{userProperty.isSubordinate}}" cx-prop-date-pattern="{{userDetails.DATE_PATTERN}}" cx-prop-id="id_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" cx-prop-callback-delay="{{defaultUndefined}}" cx-prop="{{childCompProps}}"></template> </template></template> <template is="if" value="{{expHandlers(field.api_name,\'==\',&quot;percentage&quot;)}}"><template case="true"> <span class="present ">%</span> </template></template><template is="if" value="{{expHandlers(expHandlers(expHandlers(cruxElement1,\'&amp;&amp;\',expHandlers(field.field_data_type,\'==\',&quot;picklist&quot;)),\'&amp;&amp;\',field.history_tracking),\'&amp;&amp;\',expHandlers(isChildInput,\'!\'))}}"><template case="true"> <div id="picklist_tracker_field" class="facet p5 "> <lyte-checkbox data-zcqa="history_Tracking" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_picklist_tracker" lt-prop-type="default" class="checkFilter userSelectNone" lt-prop-disabled="true" lt-prop-label="{{cruxGetI18n(\'crm.events.duration\')}}" on-changed="{{method(\'picklistTreackerDuration\')}}"></lyte-checkbox> <div id="durationField" class="durationFilter pL20 pT10 eventNone op5"> <lyte-dropdown data-zcqa="history_Tracking_Options" lt-prop-freeze="true" id="DDV1_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_picklistTracker" lt-prop-index="1" on-option-selected="{{method(\'getDropDownVal\')}}" lt-prop-user-value="display" lt-prop-system-value="system" lt-prop-options="{{durationOpt}}" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(selectedValues.HT_DropDownValue)}}"></lyte-dropdown> <template is="component" data-zcqa="history_Tracking_value" cx-prop-class="w100" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_historyTrackDurationDays" component-name="crux-number-component" cx-prop-maxlength="4" cx-prop-decimal-allowed="false" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-value="{{value}}" cx-prop-field="{{field}}" on-value-change="{{method(\'changeUserInputValue\')}}" on-error="{{method(\'beforeAlert\')}}" cx-prop-appearance="box"></template> <span class="cxAriaPrefixLabel present" style="display: inline-block;">{{cruxGetI18n(\'days\')}}</span> </div> </div> </template></template></template></template><template is="if" value="{{expHandlers(expHandlers(showSecondDropdownType,\'==\',&quot;date&quot;),\'&amp;&amp;\',expHandlers(expHandlers(field.api_name,\'!=\',&quot;Prediction_0&quot;),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',&quot;Prediction_1&quot;)))}}"><template case="true"> <template is="if" value="{{expHandlers(field.ui_type,\'==\',132)}}"><template case="true"> <span class="cxAriaPrefixLabel mR2">{{cruxGetI18n(\'crm.label.simply.in\')}}</span> </template></template> <lyte-dropdown class="{{field.cxFilterClass.secondDropDownClass}} mB7" lt-prop-boundary="{{boundary}}" lt-prop-freeze="true" data-zcqa="{{field.column_name}}_dateOptions" id="second_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_dropdown" lt-prop-index="1" on-option-selected="{{method(\'inputValueChanged\',\'lyte-dropdown\')}}" on-change="{{method(\'observeDropDownChanges\')}}" lt-prop-selected="{{lbind(selectedValues.secondDropDownValue)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxDropbox cxSmartFilterDropbox {{if(propFilterView,\'newLvDropdown\')}}"> <lyte-drop-body> <template is="for" items="{{dateoptions}}" item="item" index="index"> <lyte-drop-item data-value="{{item[dropdownSysValue]}}" data-zcqa="{{field.field_label}}_{{item[dropdownDispValue]}}"> {{item[dropdownDispValue]}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(showSecondDropdownType,\'==\',&quot;between&quot;),\'&amp;&amp;\',expHandlers(expHandlers(field.api_name,\'!=\',&quot;Prediction_0&quot;),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',&quot;Prediction_1&quot;)))}}"><template case="true"> <template is="if" value="{{cruxAssetsCompMapping[field.api_name]}}"><template case="true"> <div> <template is="component" component-name="{{cruxAssetsCompMapping[field.api_name]}}" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_crux_comp" field="{{field}}" selected-value="{{selectedValues.value1}}" comparator="{{selectedValues.firstDropDownValue}}" criteria="{{cxPropCriteria}}" on-value-change="{{method(\'changeUserInputValue\')}}" on-error="{{method(\'beforeAlert\')}}" from="smart_filter"></template> </div> </template><template case="false"> <div> <template is="component" cx-prop-maxvalue="{{field.maxValue}}" cx-prop-minvalue="{{field.minValue}}" cx-prop-maxlength="{{maxLen}}" cx-prop-class="{{numberDropClass}}" cx-prop-zcqa="fromdate_{{field.display_field_label}}" id="{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_crux_comp" component-name="crux-{{cruxElement2}}-component" cx-prop-from="filter" cx-prop-module="{{module}}" cx-prop-placeholder="{{placeholderValue[1]}}" cx-prop-field="{{field}}" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-value="{{selectedValues.value1}}" on-error="{{method(\'beforeAlert\')}}" cx-prop-boundary="{{boundary}}" cx-prop-appearance="box" cx-prop-date-pattern="{{userDetails.DATE_PATTERN}}" cx-prop="{{childCompProps}}"></template> <span id="betweenDateText"> - </span> <template is="component" cx-prop-maxvalue="{{field.maxValue}}" cx-prop-minvalue="{{field.minValue}}" cx-prop-maxlength="{{maxLen}}" cx-prop-class="{{numberDropClass}}" cx-prop-zcqa="todate_{{field.display_field_label}}" id="between_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}_crux_comp" component-name="crux-{{cruxElement2}}-component" cx-prop-from="filter" cx-prop-placeholder="{{placeholderValue[2]}}" cx-prop-module="{{module}}" cx-prop-field="{{field}}" on-value-change="{{method(\'changeUserInputValue\')}}" cx-prop-value="{{selectedValues.value2}}" on-error="{{method(\'beforeAlert\')}}" cx-prop-boundary="{{boundary}}" cx-prop-appearance="box" cx-prop-date-pattern="{{userDetails.DATE_PATTERN}}" cx-prop="{{childCompProps}}"></template> </div> </template></template> </template></template></template></template> </div> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(cruxElement1,\'!=\',undefined),\'&amp;&amp;\',expHandlers(cruxElement1,\'!=\',&quot;&quot;)),\'&amp;&amp;\',expHandlers(field.field_data_type,\'==\',&quot;currency&quot;)),\'&amp;&amp;\',expHandlers(iscurrencyField,\'==\',true)),\'&amp;&amp;\',expHandlers(field.crypt,\'!\'))}}"><template case="true"> <span class="cxUserCurrencyContent" style="color : #666">{{userDetails.BASE_CURRENCY}}</span> </template></template><template is="if" value="{{expHandlers(field.api_name,\'==\',&quot;cxFilter_Email_Sentiment&quot;)}}"><template case="true"> <div class="andSectionEmailStat ">{{cruxGetI18n(\'and\')}} <span id="clearEmailSentimentSubfield" class="andsecClear cxTxtAR fR cxLink cP hide mR40" style="display: inline;" onclick="{{action(\'clearEmailSentiment\')}}">{{cruxGetI18n(\'crm.title.clear.name\')}}</span> </div> <lyte-radiobutton data-zcqa="EMAILSENTIMENT:{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" id="sub_field_{{crossFields[0].api_name}}" lt-prop-type="primary" lt-prop-name="option_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-value="{{crossFields[0].api_name}}" lt-prop-label="{{crossFields[0].field_label}}" on-checked="{{method(\'getCrossFieldOption\',0,crossFields[0])}}" on-before-checked="{{method(\'crossFieldHideOption\')}}"></lyte-radiobutton> <crux-smart-filter-input id="sub_option_{{crossFields[0].api_name}}" field="{{crossFields[0]}}" module="{{module}}" on-value-change="{{method(\'inputValueChanged\')}}" ccx-prop-value="{{selectedValues.value1}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}"></crux-smart-filter-input> <template is="if" value="{{expHandlers(expHandlers(Email_Sentiment_Value,\'==\',2),\'||\',expHandlers(Email_Sentiment_Value,\'==\',3))}}"><template case="true"> <lyte-radiobutton data-zcqa="EMAILSENTIMENT:{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" id="sub_field_{{crossFields[1].api_name}}" lt-prop-type="primary" lt-prop-name="option_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-value="{{crossFields[1].api_name}}" lt-prop-label="{{crossFields[1].field_label}}" on-checked="{{method(\'getCrossFieldOption\',1,crossFields[1])}}" on-before-checked="{{method(\'crossFieldHideOption\')}}"></lyte-radiobutton> <crux-smart-filter-input id="sub_option_{{crossFields[1].api_name}}" field="{{crossFields[1]}}" module="{{module}}" on-value-change="{{method(\'inputValueChanged\')}}" cx-prop-value="{{selectedValues.value1}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}"></crux-smart-filter-input> </template></template> <template is="if" value="{{expHandlers(Email_Sentiment_Value,\'==\',3)}}"><template case="true"> <lyte-radiobutton data-zcqa="EMAILSENTIMENT:{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" id="sub_field_{{crossFields[2].api_name}}" lt-prop-type="primary" lt-prop-name="option_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-value="{{crossFields[2].api_name}}" lt-prop-label="{{crossFields[2].field_label}}" on-checked="{{method(\'getCrossFieldOption\',2,crossFields[2])}}" on-before-checked="{{method(\'crossFieldHideOption\')}}"></lyte-radiobutton> </template></template> </template></template> <template is="if" value="{{sentStatusFlag}}"><template case="true"> <div style="margin-top: 5px; display: block;"> <template is="if" value="{{sentStatusFlag}}"><template case="true"> <strong class="cxAriaPrefixLabel" style="color:#111">{{cruxGetI18n(\'crm.label.status.is\')}}</strong> </template></template> <template is="for" items="{{sentStatus}}" item="Obj" index="index"> <div><lyte-radiobutton data-zcqa="{{field.column_name}}:{{Obj.api_name}}" id="sub_field_{{Obj.api_name}}" lt-prop-type="primary" class="{{radioBtnIsSelected(field,Obj)}}" lt-prop-checked="{{if(ifEquals(sentStatus[0].api_name,Obj.api_name),true,false)}}" lt-prop-name="{{if(ifEquals(field.api_name,\'cxFilter_Email_Status\'),\'sent_status\',\'RecentPrediction\')}}" lt-prop-value="{{Obj.api_name}}" lt-prop-label="{{Obj.field_label}}" on-checked="{{method(\'getCrossFieldOption\')}}" style="display: inline-block;"></lyte-radiobutton> <span lt-prop-title="{{convesationTitle}}" class="{{if(ifEquals(Obj.api_name,\'last3\'),\'informationpredict\',\'\')}}"></span> </div> </template> </div> </template></template> <template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(crossFields.length,\'||\',expHandlers(field.api_name,\'===\',&quot;cxFilter_Competitor_Alert&quot;)),\'||\',expHandlers(field.field_data_type,\'===\',&quot;ABM_Scores&quot;)),\'||\',expHandlers(field.field_data_type,\'===\',&quot;ABM_Techniques&quot;)),\'||\',expHandlers(field.field_data_type,\'==\',&quot;rfm&quot;)),\'||\',expHandlers(field.api_name,\'==\',&quot;Similarity&quot;)),\'||\',field.Activity_tag),\'||\',expHandlers(expHandlers(expHandlers(field.field_data_type,\'==\',&quot;crossfield&quot;),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',&quot;cxFilter_Campaigns&quot;)),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',&quot;cxFilter_Email_Sentiment&quot;))),\'||\',expHandlers(field.api_name,\'==\',&quot;Prediction&quot;)),\'||\',expHandlers(field.api_name,\'===\',\'next_best_experience\'))}}"><template case="true"> <template is="if" value="{{field.Activity_tag}}"><template case="true"> <div style="position: relative; top: 4px; margin-bottom: 10px; left: 8px; font-size: 12.5px; font-weight:bold;">{{cruxGetI18n("crm.label.tag.related.to")}}</div> </template></template> <template is="if" value="{{expHandlers(expHandlers(field.api_name,\'!=\',\'cxFilter_Email_Sentiment\'),\'&amp;&amp;\',expHandlers(field.api_name,\'!=\',\'SimilarityAvailable\'))}}"><template case="true"><div class="{{if(field.Activity_tag,\'pR left20\',\'\')}}"> <template is="for" items="{{crossFields}}" item="Obj" index="index"> <template is="if" value="{{Obj.isCheckBox}}"><template case="true"> <div class="facet mL10"><lyte-checkbox title="{{Obj.field_label}}" value="{{Obj.api_name}}" data-zcqa="{{Obj.api_name}}" lt-prop-type="default" class="checkFilter userSelectNone {{radioBtnIsSelected(field,Obj)}}" id="sub_field_{{Obj.api_name}}" lt-prop-label="{{Obj.field_label}}" on-changed="{{method(\'inputValueChanged\',Obj,true)}}"></lyte-checkbox> </div> </template><template case="false"><template is="if" value="{{expHandlers(Obj.isRadioBtn,\'!==\',false)}}"><template case="true"> <lyte-radiobutton data-zcqa="{{field.column_name}}_{{Obj.api_name}}" id="sub_field_{{Obj.api_name}}" lt-prop-type="primary" class="{{radioBtnIsSelected(field,Obj)}}" lt-prop-checked="{{radioBtnIsSelected(field,Obj,true)}}" lt-prop-name="option_{{cruxReplace(field.api_name,\'[/.]\',\'_\')}}" lt-prop-value="{{Obj.api_name}}" lt-prop-label="{{Obj.field_label}}" on-changed="{{method(\'getCrossFieldOption\',index,Obj)}}" on-before-checked="{{method(\'crossFieldHideOption\')}}"></lyte-radiobutton> </template></template></template></template> <template is="if" value="{{Obj.cxLabel}}"><template case="true"> <div class="{{if(Obj.cxClass,Obj.cxClass,\'\')}}" style="{{if(Obj.cxStyle,Obj.cxStyle,\'\')}}">{{unescape(Obj.cxLabel)}}</div> </template></template> <template is="if" value="{{expHandlers(Obj.api_name,\'==\',&quot;Locked_True&quot;)}}"><template case="true"> <span class="cxAriaPrefixLabel mR2" id="recLock" style="display: none">{{cruxGetI18n(\'crm.label.via\')}}</span> </template></template> <template is="if" value="{{expHandlers(Obj.showSubField,\'!==\',false)}}"><template case="true"> <crux-smart-filter-input class="{{Obj.cxClass}}" id="sub_option_{{Obj.api_name}}" field="{{Obj}}" module="{{if(ifEquals(module,\'Activities\'),Obj.module_name,module)}}" on-value-change="{{method(\'inputValueChanged\',Obj,false)}}" boundary="{{boundary}}" on-before-error-alert="{{method(\'beforeErrorCallback\')}}"></crux-smart-filter-input> </template></template> </template> </div></template></template> </template></template> <template is="if" value="{{expHandlers(field.field_data_type,\'===\',&quot;crossModule&quot;)}}"><template case="true"> <div class="cxSmFrCrossFldModuleWrap"> <span class="cxSmFrCrossFldModuleLable">{{field.parentModuleLabel}}</span> <lyte-dropdown data-zcqa="crossModule_Input_{{field.field_label}}" lt-prop-selected="{{lbind(selectedValues.value)}}" class="cxSmFrCrossFldDropdown" on-change="{{method(\'observeDropDownChanges\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="cxSmartFilterDropbox"> <lyte-drop-body> <lyte-drop-item data-value="with">{{cxPropCrossFilterTranslations.crossFilterConditions.opt1}}</lyte-drop-item> <lyte-drop-item data-value="without">{{cxPropCrossFilterTranslations.crossFilterConditions.opt2}}</lyte-drop-item> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <span>{{cruxGetI18n(\'crm.label.any\')}} {{field.field_label}}</span> </div> </template></template> </div> </template></template> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,11]},{type:"for",position:[1,11],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0,0]},{type:"componentDynamic",position:[0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"if",position:[1,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"componentDynamic",position:[1,1,3,1]},{type:"attr",position:[1,1,3,3]},{type:"if",position:[1,1,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"componentDynamic",position:[1,1,1,3,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"for",position:[3,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"text",position:[1,1,3,1,0]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,7]},{type:"if",position:[1,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,9]},{type:"if",position:[1,1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[1,1,11]},{type:"if",position:[1,1,11],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,13]},{type:"if",position:[1,1,13],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"registerYield",position:[1,7,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,7]}]}},default:{}},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"text",position:[3,1,0]},{type:"attr",position:[3,3]},{type:"registerYield",position:[3,3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,3]}]}},default:{}},{type:"attr",position:[1,11,1]},{type:"if",position:[1,11,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"component",position:[1,1,1],dynamicNodes:[]},{type:"attr",position:[1,1,5]},{type:"component",position:[1,1,5],dynamicNodes:[]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]},{type:"attr",position:[1,5]},{type:"component",position:[1,5],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,4]},{type:"if",position:[1,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,11,3]},{type:"if",position:[1,11,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,11,4]},{type:"if",position:[1,11,4],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[2]},{type:"registerYield",position:[2,1],dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"componentDynamic",position:[1,1,1,3,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1,3]},{type:"for",position:[3,1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[2]},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,11,6]},{type:"if",position:[1,11,6],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,3,3]},{type:"component",position:[1,3,3],dynamicNodes:[]},{type:"text",position:[1,3,5,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,11,7]},{type:"if",position:[1,11,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"component",position:[1,1],dynamicNodes:[]},{type:"attr",position:[1,5]},{type:"component",position:[1,5],dynamicNodes:[]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,13]},{type:"if",position:[1,13],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,14]},{type:"if",position:[1,14],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"attr",position:[1,2]},{type:"text",position:[1,2,0]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"componentDynamic",position:[5]},{type:"attr",position:[7]},{type:"if",position:[7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"attr",position:[9]},{type:"if",position:[9],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,16]},{type:"if",position:[1,16],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]},{type:"attr",position:[1,2]}]}]}},default:{}},{type:"attr",position:[1,18]},{type:"if",position:[1,18],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"for",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["Obj.cxStyle","Obj.cxStyle","''"]}}}},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[7]},{type:"if",position:[7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,20]},{type:"if",position:[1,20],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1,1]},{type:"text",position:[1,1,3,0]},{type:"componentDynamic",position:[1,1,3]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,0]},{type:"text",position:[1,5,2]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["cxPropField","cxPropModule","cxPropCriteria","cxPropCommonInfo","cxPropCurrentUserDetails","cxPropModuleDisplayField","cxPropHideComparator","cxPropAutoCompleteInLookup","cxPropModuleRecordMapping","cxPropIgnoreCallbackInSetCriteria","cxPropIgnoreEmptyValue","idModuleMapping","field","rendered","options","cruxElement1","bydropdownOption","module","module_info","dateoptions","value","showSecondDropdownType","cruxElement2","sentStatusFlag","sentStatus","firstDropdown","crossFields","withOption","lookUpArray","renderItems","renderItems2","numberDropClass","iscurrencyField","recordDropdownValues","dropdownNames","durationOpt","lookupDisplayField","Email_Sentiment_Value","memberStatus","placeholderValue","maxLen","moduleDisplayField","selectedValues","tagSubModule","numberFieldDecimal","dropdownSysValue","dropdownDispValue","boundary","renderRecommendation","selectedRecommendations","crossSelling","reBuy","recommendationTypeSelected","recommendationBasedOnOption","recommendationBasedOn","reBuyVal","similarity","abmSegmentsList","abmSegmentsSearchedText","abmTechniqueFieldList","abmScoreFieldList","displayMsg","dropDownWidth","convesationTitle","predictionSelectedType","predictionData","trendOption","successFailureOption","successFailureDropDown","selectedOptionSf","sfAccuracyCount","sfEndCount","selectedTrend","isSuccess","isScoreSelected","isTrendSelected","isTrendShown","configLength","predictionOptions","criteriaDisplay","predictionEle","isCriteriaBetween","isScoreBetween","scoreCriteriaDisplay","roleRequestModel","predictionCriteria","scoreCriteria","userProperty","userDetails","cruxAssetsCompMapping","defaultUndefined","isChildInput","isChildFieldLookup","blockedCriteria","supportRelatedModules","optionsDisabledList","childCompProps","cxPropAria"],data:function(){return{cxPropField:Lyte.attr("object"),cxPropModule:Lyte.attr("string"),cxPropCriteria:Lyte.attr("object"),cxPropCommonInfo:Lyte.attr("object",{default:{}}),cxPropCurrentUserDetails:Lyte.attr("object"),cxPropModuleDisplayField:Lyte.attr("object"),cxPropHideComparator:Lyte.attr("boolean",{default:!1}),cxPropAutoCompleteInLookup:Lyte.attr("boolean",{default:!1}),cxPropModuleRecordMapping:Lyte.attr("object",{default:{}}),cxPropIgnoreCallbackInSetCriteria:Lyte.attr("boolean",{default:!1}),cxPropIgnoreEmptyValue:Lyte.attr("boolean",{default:!1}),idModuleMapping:Lyte.attr("object",{default:{}}),field:Lyte.attr("object"),rendered:Lyte.attr("boolean",{default:!1}),options:Lyte.attr("array"),cruxElement1:Lyte.attr("string"),bydropdownOption:Lyte.attr("array",{default:[]}),module:Lyte.attr("string"),module_info:Lyte.attr("object"),dateoptions:Lyte.attr("array",{default:[{system:"DAYS",display:_cruxUtils.getI18n("days")},{system:"WEEKS",display:_cruxUtils.getI18n("weeks")},{system:"MONTHS",display:_cruxUtils.getI18n("months")}]}),value:Lyte.attr("string"),showSecondDropdownType:Lyte.attr("string"),cruxElement2:Lyte.attr("string"),sentStatusFlag:Lyte.attr("boolean",{default:!1}),sentStatus:Lyte.attr("array",{default:[]}),firstDropdown:Lyte.attr("boolean",{default:!0}),crossFields:Lyte.attr("array",{default:[]}),withOption:Lyte.attr("array",{default:[{system:"Age in Days",display:_cruxUtils.getI18n("crm.condition.in.last")},{system:"equal",display:_cruxUtils.getI18n("on")},{system:"less_than",display:_cruxUtils.getI18n("before")},{system:"greater_than",display:_cruxUtils.getI18n("crm.label.general.small.after")},{system:"between",display:_cruxUtils.getI18n("between")},{system:"${TODAY}",display:_cruxUtils.getI18n("Today")},{system:"${YESTERDAY}",display:_cruxUtils.getI18n("Yesterday")},{system:"${THISWEEK}",display:_cruxUtils.getI18n("crm.thisweek")},{system:"${THISMONTH}",display:_cruxUtils.getI18n("crm.label.this.month")},{system:"${THISYEAR}",display:_cruxUtils.getI18n("crm.thisyear")},{system:"${LASTWEEK}",display:_cruxUtils.getI18n("Last Week")},{system:"${LASTMONTH}",display:_cruxUtils.getI18n("Last Month")}]}),lookUpArray:Lyte.attr("array",{default:[]}),renderItems:Lyte.attr("array",{default:[]}),renderItems2:Lyte.attr("array",{default:[]}),numberDropClass:Lyte.attr("string",{default:""}),iscurrencyField:Lyte.attr("boolean",{default:!1}),recordDropdownValues:Lyte.attr("array",{default:[]}),dropdownNames:Lyte.attr("object"),durationOpt:Lyte.attr("array",{default:[]}),lookupDisplayField:Lyte.attr("string"),Email_Sentiment_Value:Lyte.attr("number",{default:3}),memberStatus:Lyte.attr("boolean",{default:!1}),placeholderValue:Lyte.attr("array",{default:[]}),maxLen:Lyte.attr("number"),moduleDisplayField:Lyte.attr("object"),selectedValues:Lyte.attr("object",{default:{}}),tagSubModule:Lyte.attr("string"),numberFieldDecimal:Lyte.attr("boolean",{default:!0}),dropdownSysValue:Lyte.attr("string",{default:"system"}),dropdownDispValue:Lyte.attr("string",{default:"display"}),boundary:Lyte.attr("object",{default:{}}),renderRecommendation:Lyte.attr("boolean",{default:!0}),selectedRecommendations:Lyte.attr("boolean",{default:!1}),crossSelling:Lyte.attr("boolean",{default:!1}),reBuy:Lyte.attr("boolean",{default:!1}),recommendationTypeSelected:Lyte.attr("boolean",{default:!0}),recommendationBasedOnOption:Lyte.attr("object",{default:{first_buy:!1,cross_selling:!1,bundle:!1,re_buy:!1,next_buy:!1}}),recommendationBasedOn:Lyte.attr("object",{default:{first_buy:!1,cross_selling:!1,bundle:!1,re_buy:!1,next_buy:!1}}),reBuyVal:Lyte.attr("string"),similarity:Lyte.attr("object",{default:{isScore:!1,isRecords:!1}}),abmSegmentsList:Lyte.attr("array",{default:[]}),abmSegmentsSearchedText:Lyte.attr("string",{default:""}),abmTechniqueFieldList:Lyte.attr("array",{default:[]}),abmScoreFieldList:Lyte.attr("array",{default:[]}),displayMsg:Lyte.attr("object",{default:{}}),dropDownWidth:Lyte.attr("object",{default:{}}),convesationTitle:Lyte.attr("string"),predictionSelectedType:Lyte.attr("object",{default:{}}),predictionData:Lyte.attr("array"),trendOption:Lyte.attr("array"),successFailureOption:Lyte.attr("array"),successFailureDropDown:Lyte.attr("array"),selectedOptionSf:Lyte.attr("string"),sfAccuracyCount:Lyte.attr("number",{default:0}),sfEndCount:Lyte.attr("number",{default:0}),selectedTrend:Lyte.attr("string"),isSuccess:Lyte.attr("string",{default:"undefined"}),isScoreSelected:Lyte.attr("boolean",{default:!1}),isTrendSelected:Lyte.attr("boolean",{default:!1}),isTrendShown:Lyte.attr("boolean",{default:!0}),configLength:Lyte.attr("number"),predictionOptions:Lyte.attr("object",{default:{criteriaValues:[],score_operator:[],criteria_operator:[]}}),criteriaDisplay:Lyte.attr("boolean",{default:!0}),predictionEle:Lyte.attr("string"),isCriteriaBetween:Lyte.attr("boolean",{default:!1}),isScoreBetween:Lyte.attr("boolean",{default:!1}),scoreCriteriaDisplay:Lyte.attr("boolean",{default:!0}),roleRequestModel:Lyte.attr("string",{default:""}),predictionCriteria:Lyte.attr("object",{default:{}}),scoreCriteria:Lyte.attr("object",{default:{}}),userProperty:Lyte.attr("object",{default:{}}),userDetails:Lyte.attr("object",{default:{}}),cruxAssetsCompMapping:Lyte.attr("object",{default:{}}),defaultUndefined:Lyte.attr("string"),isChildInput:Lyte.attr("boolean",{default:!1}),isChildFieldLookup:Lyte.attr("boolean",{default:!1}),blockedCriteria:Lyte.attr("object",{default:{Email:"",Secondary_Email:""}}),supportRelatedModules:Lyte.attr("boolean",{default:!1}),optionsDisabledList:Lyte.attr("array",{default:[]}),childCompProps:Lyte.attr("string",{default:""}),cxPropAria:Lyte.attr("boolean",{default:!1})}},init:function(){this.setModuleMappingData(),this.data.cxPropField&&(this.setData("field",this.data.cxPropField),this.render()),this.data.cxPropModuleDisplayField&&this.setData("moduleDisplayField",this.data.cxPropModuleDisplayField),this.data.field&&(this.data.field.isDummy&&this.render(),this.data.isChildInput&&"lookup"===this.data.field.field_data_type&&"Who_Id"!==this.data.field.api_name&&this.setData("isChildFieldLookup",!0)),this.$node.resetField=function(e){return this.component.resetField(e)}},resetField:function(){this.setData("rendered",!1),this.render(),this.setData("rendered",!0)},setFieldMethods:function(e){(e=e||this.data.field).cxChildCompMethods&&setTimeout(function(){this.setCriteria();var t=this._cruxReplace(e.api_name,"[/.]","_"),i=$L("#"+t+"_crux_comp")[0],a=$L("#between_"+t+"_crux_comp")[0],l=e.cxChildCompMethods;for(var o in l)i&&i.setMethods(o,l[o]),a&&a.setMethods(o,l[o])}.bind(this),100)},render:function(e){if(this.getData("rendered"))this.$node.style.display="";else{this.parentCompData=e||this,this.cruxCompMapping={layout:"layout",autonumber:"text",multiselectpicklist:"text",textarea:"text",text:"text",phone:"text",email:"text",mobile:"text",website:"text",decimal:"number",integer:"number",bigint:"number",double:"number",currency:"number",picklist:"picklist",datetime:"date",date:"date",multiuserlookup:"user",ownerlookup:"user",userlookup:"user",boolean:"boolean",lookup:"text",date_time:"date-time",longinteger:"number"},this.cruxCondMapping={textarea:"text",multiselectpicklist:"text",text:"text",autonumber:"text",phone:"text",email:"text",mobile:"text",website:"text",integer:"number",decimal:"number",bigint:"number",double:"number",currency:"number",picklist:"defWithEmpty",datetime:"date",date_time:"date",date:"date",ownerlookup:"defWithEmptyUl",multiuserlookup:"defWithEmpty",userlookup:"defWithEmptyUl",boolean:"boolean",lookup:"text",longinteger:"number",fileupload:"defEmpty",imageupload:"defEmpty"},Lyte.objectUtils(this.getData("dropDownWidth"),"add",{headDropDownWidth:"w250"}),Lyte.objectUtils(this.getData("selectedValues"),"add",{headDropDownValue:void 0,byDropDownValue:void 0,firstDropDownValue:void 0,secondDropDownValue:void 0,multiSelectFieldValue:void 0,HT_DropDownValue:void 0,HT_value:void 0,value1:void 0,value2:void 0,Service_Status:void 0}),this.setData({renderItems:[],renderItems2:[]}),this.initCruxConditions("filter");var t=this.getData("field"),i=this.moduleRecordMapping,a={cxFilterClass:{secondDropDownClass:"w80"}},l=t.crossFields?t.crossFields:[];if(this.cruxAssets=void 0!==cruxAssets?cruxAssets:{},this.cruxAssetsCompMapping={},this.cruxAssets.getCruxFilterCriteriaConditions){var o=cruxAssets.getCruxFilterCriteriaConditions();for(var r in o=o||{})this[r+"Conditions"]=o[r]}if(this.cruxAssets.fieldDataTypeToCruxCompMapping){var s=cruxAssets.fieldDataTypeToCruxCompMapping;for(var r in s)this.cruxCompMapping[r]=s[r]}(this.data.field.cxAutoCompleteInLookup||this.data.cxPropAutoCompleteInLookup)&&this.setData("isChildFieldLookup",!0),e&&(this.idModuleMapping=e.getData("idModuleMapping"),i=this.moduleRecordMapping=e.getData("cxPropModuleRecordMapping"),this.setData("cxPropCommonInfo",e.getData("cxPropCommonInfo")),this.data.cxPropModule||this.setData("cxPropModule",e.getData("cxPropModule")),this.cruxAssetsCompMapping=e.cruxAssetsCompMapping?e.cruxAssetsCompMapping:{},this.setData("cruxAssetsCompMapping",this.cruxAssetsCompMapping),this.setData("supportRelatedModules",!!e.data&&e.data.supportRelatedModules)),this.data.cxPropModule&&this.setData("module",this.data.cxPropModule);var n=this.data.module;if(n&&i[n]){var d=store.peekRecord("module",i[n].id);d=d||i[n],this.setData("module_info",d)}if(this.setData("userDetails",this.data.cxPropCurrentUserDetails?this.data.cxPropCurrentUserDetails:e?e.getData("cxPropCurrentUserDetails"):this.getData("userDetails")),this.datePattern=this.data.userDetails&&this.data.userDetails.DATE_PATTERN?this.data.userDetails.DATE_PATTERN:"dd/mm/yyyy",null==t.field_data_type&&(a.field_data_type=this.getFieldDataType(t)),t.disableExtraValue&&(t.cxDisableExtraValue=t.disableExtraValue),t.cxLoginUser=null==t.cxLoginUser||t.cxLoginUser,t.display_field_label||(a.display_field_label=t.field_label),Lyte.objectUtils(t,"add",a),this.setData({showSecondDropdownType:void 0,cruxElement1:void 0,cruxElement2:void 0}),t.column_name||(t.column_name=t.api_name),this.setData("numberDropClass",""),"rfm"===t.field_data_type||"ABM_Techniques"===t.field_data_type||"ABM_Scores"===t.field_data_type)this.setData({firstDropdown:!1});else if("crossfield"==t.field_data_type&&"cxFilter_Campaigns"!=t.api_name)u="",t.minValue=0,l=t.options?t.options:t.crossFields,"cxFilter_Email_Sentiment"==t.api_name?(this.setData({maxLen:4,showSecondDropdownType:"date",firstDropdown:!0}),Lyte.objectUtils(this.getData("selectedValues"),"add","value1",2),u="number"):this.setData("firstDropdown",!1);else if("nofield"==t.field_data_type)[],u="",this.setData("firstDropdown",!1);else if("cxFilter_Campaigns"==t.api_name)this.setData("placeholderValue",[_cruxUtils.getI18n("crm.module.name",_cruxUtils.getI18n("Campaign"))]),this.linkingModule=i.Campaigns,this.setData({firstDropdown:!0}),this.setData("setWidth","w250");else if("cxFilter_Linked_Segment__s"===t.api_name)this.setData("placeholderValue",[_cruxUtils.getI18n("crm.module.name",_cruxUtils.getI18n("abm.segment"))]),this.linkingModule=i.ABMSegment,this.setData({firstDropdown:!0});else if("Activity_Due"==t.api_name)u="";else if("custom"==t.field_data_type)t.minValue=0,this.setData({recordDropdownValues:t.values,numberFieldDecimal:!1,setMargin:"setMarginLeft",setWidth:""}),"cxFilter_Email_Status"==t.api_name&&(Lyte.objectUtils(this.getData("dropDownWidth"),"add",{headDropDownWidth:""}),this.setData({setMargin:"",setWidth:"",sentStatusFlag:!0})),u="number",Lyte.objectUtils(this.getData("selectedValues"),"add","value1",2),this.setData({maxLen:4,showSecondDropdownType:"date",firstDropdown:!0});else if("Call_Status"==t.api_name&&-1!=["Activities","Calls"].indexOf(this.data.module))this.setData({firstDropdown:!0}),u="";else if("crossModule"===t.field_data_type)this.setData("selectedValues",{value:"with"});else{var p;this.setData("numberDropClass","cxW100Per"),void 0!==t.cxDecimalAllowed&&this.setData("numberFieldDecimal",t.cxDecimalAllowed),void 0!==t.cxModule&&this.setData("module",t.cxModule),-1!=["SOLUTIONNUMBER","INVOICENUMBER","SONUMBER","QUOTENUMBER","CASENUMBER"].indexOf(t.column_name)&&Lyte.objectUtils(t,"add","field_data_type","integer"),p=t.field_data_type,"currency"==t.field_data_type&&""!=this.data.userDetails.BASE_CURRENCY&&(this.setData("numberDropClass","w150"),this.setData("iscurrencyField",!0));var c=this.cruxCompMapping,u=this.cruxAssetsCompMapping[t.api_name];if("text"!=(u=u||c[p])&&"number"!=u||(this.setData("numberDropClass","number"==u?"w150":this.data.numberDropClass),this.setData("placeholderValue",[_cruxUtils.getI18n("crm.label.filter.typehere")])),80==t.ui_type&&this.setData("placeholderValue",[_cruxUtils.getI18n("crm.label.type.minutes")]),this.setData("firstDropdown",!0),"multiselectlookup"==t.field_data_type||this.data.isChildFieldLookup)if("445"==t.ui_type)u="user";else{var m=this.data.isChildFieldLookup?t.lookup.module.id:t.multiselectlookup.connected_module.id;this.linkingModule=i[this.idModuleMapping[m]],this.setData("placeholderValue",[_cruxUtils.getI18n("crm.module.name",this.linkingModule.singular_label)])}if("CALLDURATIONINSEC"==t.column_name&&this.setData("numberFieldDecimal",!1),"cxFilter_Email_Sentiment"==t.ParentField&&("count"==t.api_name||"percentage"==t.api_name)){var _="count"==t.api_name?"1":"50",f="count"==t.api_name?1e3:100,y="count"==t.api_name?4:3;t.minValue=1,t.maxValue=f,Lyte.objectUtils(this.getData("selectedValues"),"add","value1",_),this.setData({numberDropClass:"",placeholderValue:[""],numberFieldDecimal:!1})}}if(132==t.ui_type&&(Lyte.objectUtils(t.cxFilterClass,"add",{cruxElement1:"dB mB7 cxSmartFilterMultiModuleLookup",secondDropDownClass:""}),this.setData("showSecondDropdownType","date")),void 0!==i&&"tag"==t.field_data_type){u="tag";var h=i[this.getData("module")]?i[this.getData("module")]:{};"Activities"==h.module_name&&h.custom_view&&!h.custom_view.activity_view?this.setData("module",t.module_name):!t.PreventActivityTag&&h.custom_view&&h.custom_view.activity_view?(Lyte.objectUtils(t,"add",{Activity_tag:!0}),l=[{api_name:"Events_Tag",field_data_type:"tag",data_type:"tag",field_label:i.Events.plural_label,module_name:"Events",PreventActivityTag:!0,parent_field:t},{api_name:"Calls_Tag",field_data_type:"tag",data_type:"tag",field_label:i.Calls.plural_label,module_name:"Calls",PreventActivityTag:!0,parent_field:t},{api_name:"Tasks_Tag",field_data_type:"tag",data_type:"tag",field_label:i.Tasks.plural_label,module_name:"Tasks",PreventActivityTag:!0,parent_field:t}],Lyte.objectUtils(t,"add","crossFields",l),u="",this.setData("firstDropdown",!1)):Lyte.objectUtils(t,"add","Activity_tag",!1)}else if("ACTIVITYTYPE"==t.column_name){Lyte.objectUtils(t,"add","field_data_type","picklist");var x=[{display_value:i.Tasks.plural_label,actual_value:i.Tasks.api_name},{display_value:i.Calls.plural_label,actual_value:i.Calls.api_name},{display_value:i.Events.plural_label,actual_value:i.Events.api_name}];Lyte.objectUtils(t,"add","pick_list_values",x),u="picklist"}if("text"==u&&this.setData("maxLen",2500),"date"==t.field_data_type||"datetime"==t.field_data_type||"date"==u||"cxFilter_Email_Sentiment"==t.api_name?(t.minValue=0,this.setData({placeholderValue:[""],numberFieldDecimal:!1,numberDropClass:"",setWidth:""}),Lyte.objectUtils(this.getData("selectedValues"),"add","value1",2),this.setData({maxLen:4,showSecondDropdownType:"date"}),"With_Open_Deal"!=t.api_name&&"Without_Open_Deal"!=t.api_name||(u="")):13==t.show_type&&-1!==["Recency","Frequency","Monetary"].indexOf(t.api_name)&&(Lyte.objectUtils(t,"add",{maxValue:5,minValue:1}),this.setData({numberDropClass:"w100",placeholderValue:[_cruxUtils.getI18n("crm.filter.number.range",1,5)]})),"cxFilter_Scoring_Rule"===t.api_name&&(u="picklist"),"cxFilter_Series"===t.api_name&&(u="picklist"),this.setData("numberDropClass","boolean"==u?"":this.data.numberDropClass),this.setData({cruxElement1:u}),"user"==u&&e&&this.setData("userProperty",t.cxUserProperties?t.cxUserProperties:e.getData("cxPropUserFieldProperties")),t.cxChildCompProps){var g={};for(var v in t.cxChildCompProps){var b=v.replace("cxProp","");g[(b=b.replace("ltProp","")).charAt(0).toLowerCase()+b.slice(1)]=t.cxChildCompProps[v]}this.setData("childCompProps",JSON.stringify(g))}if(t.cxHideComparator||this.data.cxPropHideComparator||"Without_Open_Activity"===t.api_name||"Without_Any_Deal"===t.api_name||"With_Contact"===t.api_name||"Without_Any_Contact"===t.api_name||"Locked_False"===t.api_name||this.setDropDownValuesFun(!0),"Recommendation"===t.api_name){var D=(F=i[this.getData("module")]).recommendationsDetailsJson.what_to.display_label;this.setData({lookupDisplayField:D,setWidth:""}),Lyte.objectUtils(this.getData("dropDownWidth"),"add",{headDropDownWidth:"w150"}),this.setData("placeholderValue",[D]),this.setData("options",[{system:"all",display:_cruxUtils.getI18n("allTime")},{system:"${TODAY}",display:_cruxUtils.getI18n("crm.filter.label.a.day")},{system:"${THISWEEK}",display:_cruxUtils.getI18n("crm.filter.label.a.week")},{system:"${THISMONTH}",display:_cruxUtils.getI18n("crm.filter.label.a.month")},{system:"CUSTOM",display:_cruxUtils.getI18n("crm.cal.custom")}])}else if("SimilarityScore"===t.api_name)this.setData("options",this.numberConditions),this.setData("firstDropdown",!0),this.setData("cruxElement1","number"),t.minValue=0,t.maxValue=100,this.setData("field",t),this.setData("placeholderValue",[_cruxUtils.getI18n("Score")]),this.setData("numberDropClass","w150");else if("SimilarityRecords"===t.api_name){this.setData("field.data_type","multiselectlookup");var S=this.getData("moduleDisplayField"),F=i[this.getData("module")];if(!S){var C={};C[F.api_name]=[F.display_field.api_name],this.setData("moduleDisplayField",C)}var T={};T.connected_module={api_name:F.api_name,id:F.id},this.setData("field.multiselectlookup",T),this.setData("placeholderValue",[_cruxUtils.getI18n("crm.module.name",F.singular_label)])}if("Prediction"===t.api_name||"Prediction_0"===t.api_name||"Prediction_1"===t.api_name||"completed_prediction"===t.api_name){var A="Prediction"===t.api_name?$L("#option_Prediction")[0]:$L("#sub_option_"+t.api_name)[0];Lyte.objectUtils(A.getData("selectedValues"),"add","dateVal",2),Lyte.objectUtils(A.getData("selectedValues"),"add","criteriaValue","");F=i[A.getData("module")];A.setData("predictionData",F.prediction_details.slice()),A.setData("trendOption",[{system:"no_trend",display:_cruxUtils.getI18n("crm.zia.prediction.notrend")},{system:"trend_up",display:_cruxUtils.getI18n("crm.intelligence.prediction.trendup")},{system:"trend_down",display:_cruxUtils.getI18n("crm.intelligence.prediction.trenddown")}]),A.setData("successFailureOption",[{system:"success_prediction",display:_cruxUtils.getI18n("crm.label.success"),parent_field:"completed_prediction"},{system:"failure_prediction",display:_cruxUtils.getI18n("crm.label.Failure"),parent_field:"completed_prediction"}]),A.setData("configLength",F.prediction_details.length);y=A.getData("configLength");if("Prediction"===t.api_name){for(var L=[],I=0;I<y;I++){var M={},E=A.getData("predictionData")[I].predict_field,U=void 0!==A.getData("predictionData")[I].values;M.predict_field=E,M.prediction_field=A.getData("predictionData")[I].prediction_field,M.isPickList=U,M.api_name="Prediction_"+I,M.name=A.getData("predictionData")[I].name,M.id=A.getData("predictionData")[I].id,M.field_label=A.getData("predictionData")[I].name,M.parent_field="prediction",U&&(M.score_field=A.getData("predictionData")[I].prediction_score_field),M.trend=A.getData("trendOption"),L.push(M)}(M={}).successFailureDropDown=A.getData("successFailureDropDown"),M.api_name="completed_prediction",M.id="both",M.field_label=_cruxUtils.getI18n("Completed"),M.parent_field="prediction",L.push(M),l=L}for(var w=[],O=A.getData("configLength"),P=0;P<O;P++){var N={system:this.getData("predictionData")[P].id,display:A.getData("predictionData")[P].name};w.push(N)}2===O&&w.push({system:"both",display:_cruxUtils.getI18n("Both")}),A.setData("successFailureDropDown",w),A.setData("selectedOptionSf",A.getData("successFailureDropDown")[0].system)}if(this.setData("crossFields",l),"picklist"!=u||t.cxType||(t.cxPropType="cxFilter_Scoring_Rule"==t.api_name||"cxFilter_UnallocatedRecords"==t.api_name||"cxFilter_Series"==t.api_name?"single":"multiple"),"cxFilter_Competitor_Alert"===t.api_name&&(this.setData("firstDropdown",!1),this.setData("crossFields",Lyte.deepCopyObject(t.options))),"Competitor_Name"===t.api_name){this.setData("cruxElement1","picklist");var R=this.textConditions;this.setData("options",R)}"Competitor_Duration"===t.api_name&&(Lyte.arrayUtils(this.getData("options"),"removeAt",12,this.getData("options").length),this.setData("cruxElement1","number")),"Competitor_Sentiment"===t.api_name&&this.setData("field.cxPropType","single"),this.setData("rendered",!0),this.setFieldMethods(t)}},actions:{preventDefault:function(e,t){13==t.keyCode&&t.preventDefault()},toggleDropDown:function(e,t,i){var a,l="Recommendation_infield"===t?t:this._cruxReplace(e.api_name,"[/.]","_");"cxFilter_Linked_Segment__s"!==l||i.component.data.ltPropValue||(a={type:"change",oldValue:"",newValue:"",item:"ltPropValue"},this.methods.onSearch.call(this,a,i));var o=this.$node.querySelector("#multiSelect_lookup_"+l);if(1==o.ltProp("show")){var r=$L("#"+l+"_Search_val")[0];return r.querySelector("input").value&&r.ltProp("value",""),o.toggle(),!1}},inputValidate:function(e,t,i){"date"!=i.field_data_type&&"datetime"!=i.field_data_type&&"custom"!=i.field_data_type||189==t.keyCode&&t.preventDefault()},clearEmailSentiment:function(){var e=$("[name=option_cxFilter_Email_Sentiment]:checked").closest("lyte-radiobutton");if(e.length){e[0].ltProp("checked",!1);var t="sub_option_"+e[0].ltProp("value"),i=document.getElementById(t);i&&(i.style.display="none")}$L("#clearEmailSentimentSubfield")[0].classList.add("dNI"),$(".cxFilter_Email_Sentiment_selectedRadioBtn").removeClass("cxFilter_Email_Sentiment_selectedRadioBtn"),this.getMethods("onValueChange")&&!this.preventValChangeCallback&&this.executeMethod("onValueChange",{field:this.data.field})}},methods:{beforeOptionsSet:function(){this.data.field.cxForceSetCondition&&this.triggerConditionCallback(this.data.options,!0,!0,{bydropdownOption:this.data.bydropdownOption})},beforeSelectDropDown:function(e,t,i,a,l){if(this.getMethods("beforeSelectDropdown"))return this.executeMethod("beforeSelectDropdown",{field:this.data.field,event:e,oldValue:t,newValue:l,dropdown:i})},observeDropDownChanges:function(){this.valueChanged()},beforeErrorCallback:function(e){return!this.getMethods("onBeforeErrorAlert")||this.executeMethod("onBeforeErrorAlert",e)},beforeAlert:function(e,t){var i=!0;if(this.getMethods("onBeforeErrorAlert")&&(i=this.executeMethod("onBeforeErrorAlert",e)),i){var a=this.getData("field");if(-1!=["Events_Tag","Calls_Tag","Tasks_Tag"].indexOf(a.api_name)&&a.parent_field&&a.parent_field.Activity_tag)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",a.parent_field.display_label)),!1;if(a.showCommonError){if("CRUX-NUMBER-COMPONENT"==t.$node.nodeName&&""==t.getValue())return this.showFilterAlert(_cruxUtils.getI18n("crm.mb.field.common.empt"),t),!1;if("CRUX-DATE-COMPONENT"==t.$node.nodeName)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",_cruxUtils.getI18n("Date")),t),!1}else if(this.getData("field").history_tracking&&"CRUX-NUMBER-COMPONENT"===t.$node.tagName)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",_cruxUtils.getI18n("crm.events.duration")),t),!1;return!0}},triggerGetDropDownVal:function(e,t){t.methods.getDropDownVal(null,e,null,null,t)},getDropDownVal:function(e,t,i,a,l){var o=l||this,r=o.getData("field");if("Email"==r.api_name||"Secondary_Email"==r.api_name){let e=[],i=!1;if(t.includes("${BLOCKED")&&o.data.userDetails.EMAIL_BOUNCE_MANAGEMENT){let t=Crm.bounceCategories,a=o.getData("module");e=[{api_name:"cxFilter_"+r.column_name+"_temporary",column_name:"Temporary",data_type:"date",display_field_label:_cruxUtils.getI18n("crm.email.unblock.filter.temporary"),field_data_type:"date",field_label:_cruxUtils.getI18n("crm.email.unblock.filter.temporary"),module_name:a,system:"hey",display:"hey",cxFieldsDetails:[{cxLabel:_cruxUtils.getI18n("crm.email.unblock.filter.category"),cxElement:"dropdown",cxOptions:t.temporary}]},{api_name:"cxFilter_"+r.column_name+"_permanent",column_name:"Permanent",data_type:"date",display_field_label:_cruxUtils.getI18n("crm.email.unblock.filter.permanent"),field_data_type:"date",field_label:_cruxUtils.getI18n("crm.email.unblock.filter.permanent"),module_name:a,system:"hey",display:"hey",cxFieldsDetails:[{cxLabel:_cruxUtils.getI18n("crm.email.unblock.filter.category"),cxElement:"dropdown",cxOptions:t.permanent}]},{api_name:"cxFilter_"+r.column_name+"_both",column_name:"Both",data_type:"nofield",display_field_label:_cruxUtils.getI18n("crm.email.unblock.filter.both"),field_data_type:"nofield",field_label:_cruxUtils.getI18n("crm.email.unblock.filter.both"),module_name:a,system:"hey",display:"hey"}],i=!!o.data.crossFields.length}i||o.setData("crossFields",e)}"cxFilter_Campaigns"==r.api_name&&(o.setData("renderItems",[]),$L("#"+o._cruxReplace(r.api_name,"[/.]","_")+"_Search_val")[0].ltProp("value",""),Lyte.objectUtils(o.getData("selectedValues"),"add",{Service_Status:[],multiSelectFieldValue:"[]"})),o.getValue(t,!0,!0)},showSentStatus:function(e,t,i){"${EMPTY}"===this.data.selectedValues.firstDropDownValue&&(Lyte.objectUtils(this.data.selectedValues,"add","firstDropDownValue","Age in Days"),this.getValue("Age in Days")),this.showHideEmailStatus(i,e)},getCrossFieldOption:function(e,t,i,a){if(this.setData("isSuccess","undefined"),Lyte.objectUtils(this.getData("predictionCriteria"),"add","value",void 0),a||(a=t,t={api_name:""}),"cxFilter_Email_Sentiment"==t.ParentField)$L("#clearEmailSentimentSubfield")[0].classList.remove("dNI");else if(-1!=["Events_Tag","Calls_Tag","Tasks_Tag"].indexOf(t.api_name))this.setData("tagSubModule",t.api_name);else if("prediction"===t.parent_field){var l={},o=$L("#scoreCheckBox")[0];o&&this.getData("isScoreSelected")&&o.ltProp("checked",!1);var r=$("#option_Prediction")[0],s=$("#sub_option_"+t.api_name)[0];if(0===e||1===e&&"sub_field_completed_prediction"!==a.data.id){var n=r.getData("predictionData")[e].prediction_field,d=r.getData("predictionData")[e].values,p=r.getData("predictionData")[e].predict_field;Lyte.objectUtils(r.getData("predictionCriteria"),"add","field",n);var c=this.moduleRecordMapping[r.getData("module")].fields,u=c.filter((function(e){return e.id===n.id})),m=c.filter((function(e){return e.id===p.id})),_=[];if("picklist"===u[0].field_data_type){for(var f=[],y=d.length,h=0;h<y;h++)f.push(d[h].actual_value);for(var x=m[0].pick_list_values.length,g=0;g<x;g++)u[0].pick_list_values[g]&&-1!==f.indexOf(u[0].pick_list_values[g].actual_value)&&_.push(u[0].pick_list_values[g]);u[0].pick_list_values=_}var v,b=u[0].data_type,D=this[this.cruxCondMapping[b]+"Conditions"];if(s.setData("predictionEle",b),r.setData("predictionEle",b),"integer"===b||"longinteger"==b||"decimal"===b||"bigint"===b||"double"===b||"currency"===b)s.setData("setWidth","w100"),s.setData("predictionEle","number"),r.setData("predictionEle","number");else if("multiselectpicklist"===b||"picklist"===b)s.setData("predictionEle","picklist"),r.setData("predictionEle","picklist");else if("userlookup"===b||"multiuserlookup"===b)s.setData("predictionEle","user"),r.setData("predictionEle","user");else if("datetime"===b||"date"===b){s.setData("predictionEle","date"),r.setData("predictionEle","date");var S=D[0].system;"equal"===S||"less_than"===S||"greater_than"===S?(Lyte.objectUtils(s.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),s.setData({value:"",predictionEle:"date",numberDropClass:"w100",showSecondDropdownType:""})):"between"===S?(Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),s.setData({showSecondDropdownType:"between",numberDropClass:"w100",predictionEle:"date"})):"Due in Days"!==S&&"Age in Days"!==S||s.setData("showSecondDropdownType","date")}if(Lyte.objectUtils(s.getData("predictionOptions"),"add","criteria_operator",D),r.getData("predictionData")[e].score_field){var F=this.getData("predictionData")[e].score_field;Lyte.objectUtils(r.getData("scoreCriteria"),"add","field",F),v=c.filter((function(e){return e.id===F.id})),Lyte.objectUtils(l,"add","score_field",v)}0===e?l={first:!0,second:!1,completed:!1}:1===e&&"sub_field_completed_prediction"!==a.data.id&&(l={first:!1,second:!0,completed:!1})}else l={first:!1,second:!1,completed:!0};if(Lyte.objectUtils(l,"add","criteria_fields",u),Lyte.objectUtils(l,"add","predict_field",m),v&&Lyte.objectUtils(l,"add","score_field",v),s.setData("predictionSelectedType",l),r.setData("predictionSelectedType",l),0===e||1===e&&"sub_field_completed_prediction"!==a.data.id){var C=s.querySelector("#criteria_comparator");if(C){C.ltProp("selected",D[0].system);var T="${EMPTY}"!==D[0].system&&"${NOTEMPTY}"!==D[0].system,A="between"===D[0].system||"not_between"===D[0].system;s.setData("criteriaDisplay",T),s.setData("isCriteriaBetween",A),Lyte.objectUtils(r.getData("predictionCriteria"),"add","comparator",D[0].system),Lyte.objectUtils(s.getData("predictionCriteria"),"add","comparator",D[0].system)}var L=s.querySelector("#score_criteria_comparator");if(L){L.ltProp("selected",s.getData("predictionOptions").score_operator[0].system);T="${EMPTY}"!==s.getData("predictionOptions").score_operator[0].system&&"${NOTEMPTY}"!==s.getData("predictionOptions").score_operator[0].system;s.setData("scoreCriteriaDisplay",T)}Lyte.objectUtils(r.getData("scoreCriteria"),"add","comparator",s.getData("predictionOptions").score_operator[0].system),Lyte.objectUtils(s.getData("scoreCriteria"),"add","comparator",s.getData("predictionOptions").score_operator[0].system)}}else if("completed_prediction"===t.parent_field){s=$L("#sub_option_"+t.parent_field)[0];(r=$L("#option_Prediction")[0]).setData("selectedOptionSf",s.getData("selectedOptionSf")),s.setData("isSuccess",0===e?"true":"false"),r.setData("isSuccess",0===e?"true":"false")}else"SimilarityScore"===t.api_name?this.setData("similarity.isScore",i.checked):"SimilarityRecords"===t.api_name?this.setData("similarity.isRecords",i.checked):"SimilarityNotAvailable"===t.api_name&&(this.setData("similarity.isScore",!1),this.setData("similarity.isRecords",!1));this.getField(t,a)},crossFieldHideOption:function(e,t){this.hideSubfieldOption(e,t)},inputValueChanged:function(e,t,i,a){if("lyte-dropdown"!=e&&this.valueChanged(),e&&(13===e.show_type&&-1!==["Recency","Frequency","Monetary"].indexOf(e.api_name)||-1!==this.getData("abmTechniqueFieldList").indexOf(e.api_name)||-1!==this.getData("abmScoreFieldList").indexOf(e.api_name)||!1!==e.showSubField)&&!0===t){var l=$L("#sub_option_"+this._cruxReplace(e.api_name,"[/.]","_"))[0];a.$node.checked?l.component.render(this.parentCompData):l.setData("rendered",!1)}var o=$L("#option_Prediction")[0];if("prediction_criteria"===e){"date"!==this.getData("predictionEle")&&"date"!==o.getData("predictionEle")||("equal"===i||"less_than"===i||"greater_than"===i?(Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),this.setData({value:"",predictionEle:"date",numberDropClass:"w100",showSecondDropdownType:""})):"between"===i?(Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),this.setData({showSecondDropdownType:"between",numberDropClass:"w100",predictionEle:"date"})):"Due in Days"===i||"Age in Days"===i?this.setData("showSecondDropdownType","date"):(Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),this.setData({showSecondDropdownType:"",predictionEle:""})));var r=-1==["${TODAY}","${YESTERDAY}","${LASTYEAR}","${EMPTY}","${NOTEMPTY}","${THISWEEK}","${THISMONTH}","${THISYEAR}","${LASTWEEK}","${LASTMONTH}"].indexOf(i),s="between"===i||"not_between"===i;"${EMPTY}"===i&&this.getData("field").score_field&&!this.getData("isScoreSelected")?(o.setData({isTrendSelected:!1,selectedTrend:"no_trend",isTrendShown:!1}),this.setData({isTrendSelected:!1,selectedTrend:"no_trend",isTrendShown:!1})):(o.setData("isTrendShown",!0),this.setData("isTrendShown",!0)),this.setData("criteriaDisplay",r),this.setData("isCriteriaBetween",s),Lyte.objectUtils(o.getData("predictionCriteria"),"add","comparator",i),Lyte.objectUtils(this.getData("predictionCriteria"),"add","comparator",i)}else if("score_criteria"===e){r="${EMPTY}"!==i&&"${NOTEMPTY}"!==i,s="between"===i||"not_between"===i;this.setData("scoreCriteriaDisplay",r),this.setData("isScoreBetween",s),Lyte.objectUtils(o.getData("scoreCriteria"),"add","comparator",i),Lyte.objectUtils(this.getData("scoreCriteria"),"add","comparator",i)}"prediction_trend"===e?o.setData("selectedTrend",i):"prediction_SF"===e&&o.setData("selectedOptionSf",i)},changeUserInputValue:function(e,t){var i=this.getData("field");if(i.history_tracking&&!this.data.isChildInput){e=$L("#"+this._cruxReplace(i.api_name,"[/.]","_")+"_crux_comp")[0].component.getValue();t=$L("#"+this._cruxReplace(i.api_name,"[/.]","_")+"_picklist_tracker")[0],picklist_tracker_field;e.length&&e.length<=10?(t.removeAttribute("lt-prop-title"),t.ltProp("disabled",!1)):(e.length>10&&t.setAttribute("lt-prop-title",_cruxUtils.getI18n("crm.smartfilter.picklist.options.msg")),t.ltProp("checked",!1),t.ltProp("disabled",!0))}else if("Prediction_0"===i.api_name||"Prediction_1"===i.api_name){var a=this.getData("selectedValues");switch("criteria_prediction"!==e.id&&"criteria_prediction_0"!==e.id&&"criteria_prediction_1"!==e.id||(t="date"===e.getData().cxPropField.data_type?Lyte.Transform.date.serialize(t):"datetime"===e.getData().cxPropField.data_type?Lyte.Transform.datetime.serialize(t):t),e.id){case"criteria_prediction":Lyte.objectUtils(a,"add","criteriaValue",t);break;case"criteria_prediction_0":Lyte.objectUtils(a,"add","criteriaValue0",t);break;case"criteria_prediction_1":Lyte.objectUtils(a,"add","criteriaValue1",t);break;case"score_criteria_prediction":Lyte.objectUtils(a,"add","scoreValue",t);break;case"score_criteria_prediction_0":Lyte.objectUtils(a,"add","scoreValue0",t);break;case"score_criteria_prediction_1":Lyte.objectUtils(a,"add","scoreValue1",t);break;case"dateInput":Lyte.objectUtils(a,"add","dateVal",t)}}else e&&t&&t.getData&&t.getData().cxPropMinvalue&&e<t.getData().cxPropMinvalue&&t.querySelector("lyte-number").ltProp("value","");this.valueChanged(e)},picklistTreackerDuration:function(e,t){var i=$L("#durationField")[0];t.$node.checked?$L(i).removeClass("eventNone op5"):(i.querySelector("lyte-number").ltProp("value",""),$L(i).addClass("eventNone op5")),this.valueChanged()},addToList:function(e,t,i,a,l){var o,r="Recommendation_infield"===e?this.getData("renderItems2"):this.getData("renderItems"),s=this.getData("lookUpArray"),n=s.length;for(o=0;o<n&&s[o].id!=i;o++);Lyte.arrayUtils(r,"push",s[o]),"cxFilter_Linked_Segment__s"===e?r&&r.length>=5?(this.setData("lookUpArray",[]),Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.maximum.campaigns.selected",_cruxUtils.getI18n("abm.segment.names")))):this.searchAbmSegments(this.getData("abmSegmentsSearchedText"),this.getData("renderItems")):(this.setData("lookUpArray",[]),$L("#"+this._cruxReplace(e,"[/.]","_")+"_Search_val",this.$node)[0].ltProp("value",""),this.hideDropDown());var d=this.getData("field");"cxFilter_Campaigns"!=d.api_name||d.serviceStatus&&d.serviceStatus.length||(d.serviceStatus=[],this.setServiceStatus(this.data.selectedValues.firstDropDownValue,this),Lyte.objectUtils(this.data.selectedValues,"add",{Service_Status:[]})),this.valueChanged(r,l.$node)},removeFromList:function(e,t,a,l){var o="multiSelect_lookup_Recommendation_infield"===l.$node.id?this.getData("renderItems2"):this.getData("renderItems");for(i=0;i<o.length;i++)o[i].id==t&&Lyte.arrayUtils(o,"removeAt",i,1);if(this.valueChanged(o,l.$node),o.length>=5)Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.maximum.campaigns.selected",this.linkingModule?this.linkingModule.module_name:this.data.placeholderValue[0]));else if("SimilarityRecords"===this.data.field.api_name&&this.data.renderItems.length>=1)Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crux.smartfilter.multiselect.maximum.selected",[1,this.linkingModule?this.linkingModule.module_name:this.data.placeholderValue[0]]));else{if("multiSelect_lookup_cxFilter_Linked_Segment__s"===l.$node.id)return void l.$node.close();Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.minimum.input.text","2"))}},onShowDropBox:function(e,t){var i,a;if(this.data.renderItems2.length>=5||this.data.renderItems.length>=5)a="cxFilter_Linked_Segment__s"===e?_cruxUtils.getI18n("crm.chosen.maximum.campaigns.selected",_cruxUtils.getI18n("abm.segment.names")):_cruxUtils.getI18n("crm.chosen.maximum.campaigns.selected",this.linkingModule?this.linkingModule.module_name:this.data.placeholderValue[0]),Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",a);else if("SimilarityRecords"===this.data.field.api_name&&this.data.renderItems.length>=1)Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crux.smartfilter.multiselect.maximum.selected",[1,this.linkingModule?this.linkingModule.module_name:this.data.placeholderValue[0]]));else{if("cxFilter_Linked_Segment__s"===e&&!t.component.data.ltPropValue)return i={type:"change",oldValue:"",newValue:"",item:"ltPropValue"},Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.searching.text")),void this.methods.onSearch.call(this,i,t);Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.minimum.input.text","2"))}},onBeforeHide:function(){this.hideDropDown()},onSearch:function(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(this.onSearchFun.bind(this,e,t),100)}},showHideEmailStatus:function(e,t){t&&"cxFilter_Email_Sentiment"==t.api_name?"Positive"==e||"Negative"==e||"PositiveOrNegative"==e||"Neutral"==e?this.setData("Email_Sentiment_Value",3):"PositiveAndNegative"==e?this.setData("Email_Sentiment_Value",2):this.setData("Email_Sentiment_Value",1):t&&"cxFilter_Email_Status"==t.api_name&&("not_sent"==e?Lyte.arrayUtils(this.data.options,"insertAt",this.data.options.length,[{system:"${EMPTY}",display:_cruxUtils.getI18n("crm.condition.till.today")}]):"${EMPTY}"===this.data.options[this.data.options.length-1].system&&Lyte.arrayUtils(this.data.options,"pop"),this.setData("sentStatusFlag","sent"==e))},getConditionOpt:function(e){if(!e)return;let t=this.data.options.filter((t=>t.system==e))[0];if(!t&&e.includes("${")){let i=e.replace("${","").replace("}",""),a=i.replace(/\D/g,"");if(a){let e=i.split(a);t=this.data.options.filter((t=>t.system==e[0]))[0],t.value=a,t.secondDropDownOpt=e[1]}}return t||{}},getValue:function(e,t,i){var a=this.getData("field");if(0==a.persist_values&&(this.setData({cruxElement1:""}),Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0})),i||this.valueChanged(),"${NOTEMPTY}"!=e&&"${EMPTY}"!=e||this.setData({cruxElement1:""}),53==a.ui_type)return this.setData({numberDropClass:"",maxLen:4,cruxElement1:"number",placeholderValue:[""]}),void Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:"2",value2:void 0});if("not_contains"==e&&this.setData("setWidth","w150"),"Call_Status"!=a.api_name||-1==["Activities","Calls"].indexOf(this.data.module))if(["date","datetime","custom","date_time"].includes(a.field_data_type)||"cxFilter_Email_Sentiment"==a.api_name){var l="date_time"==a.field_data_type?"date-time":"date";let t=this.getConditionOpt(e);["equal","less_than","greater_than"].includes(e)?(Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),this.setData({value:"",cruxElement1:l,numberDropClass:"w150",showSecondDropdownType:""})):"between"==e||"not_between"==e?(Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),this.setData({showSecondDropdownType:"between",numberDropClass:"w100",cruxElement2:l,cruxElement1:"",placeholderValue:["",_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate"),_cruxUtils.getI18n("workflow.option.webhookFailure.toDate")]})):"Due in Days"==e||"Age in Days"==e||t.showDynamicInput?(this.setData("showSecondDropdownType","date"),"With_Open_Deal"!=a.api_name&&"Without_Open_Deal"!=a.api_name&&(this.setData({numberDropClass:"",maxLen:4,cruxElement1:"number",placeholderValue:[""]}),Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:"2",value2:void 0}))):(Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),this.setData({showSecondDropdownType:"",cruxElement1:""}))}else if(-1!=["num","currency","double","bigint","integer","longinteger","decimal"].indexOf(a.field_data_type)){if(13==a.show_type&&-1!==["Recency","Frequency","Monetary"].indexOf(a.api_name)?this.setData("numberDropClass","w100"):/count|percentage/.test(a.api_name)||this.setData("numberDropClass","w150"),this.data.selectedValues.value2&&Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),80==a.ui_type?this.setData("placeholderValue",[_cruxUtils.getI18n("crm.label.type.minutes")]):this.setData("placeholderValue",[_cruxUtils.getI18n("crm.label.filter.typehere")]),"between"==e||"not_between"==e)Lyte.objectUtils(this.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),this.setData({showSecondDropdownType:"between",cruxElement2:"number",cruxElement1:"number",numberDropClass:"w100",placeholderValue:["",_cruxUtils.getI18n("crm.label.from"),_cruxUtils.getI18n("crm.label.to")]}),80==a.ui_type&&this.setData("placeholderValue",["",_cruxUtils.getI18n("crm.label.in.minutes",_cruxUtils.getI18n("crm.label.from")),_cruxUtils.getI18n("crm.label.in.minutes",_cruxUtils.getI18n("crm.label.to"))]);else if("not_equal"==e||"equal"==e||"less_than"==e||"greater_than"==e||"less_equal"==e||"greater_equal"==e){var o="LAYOUTID"==a.column_name?"layout":"number";this.setData({showSecondDropdownType:"",cruxElement1:o})}else this.setData({showSecondDropdownType:"",cruxElement1:""});(n=this.$node.querySelector("lyte-number"))&&t&&n.focus()}else if(this.cruxAssetsCompMapping[a.api_name]||-1!=["text","textarea","multiselectpicklist","phone","email","mobile","website","lookup","picklist","autonumber","tag"].indexOf(a.field_data_type)&&!this.data.isChildFieldLookup){if(!this.data.userDetails.EMAIL_BOUNCE_MANAGEMENT&&-1!==["EMAIL","ADDN_EMAIL"].indexOf(a.column_name)&&!a.custom_field){var r="EMAIL"==a.column_name?"Secondary_Email":"Email",s=this.parentCompData.data.cxPropChildModuleFields?"#option_"+r+"_"+a.id+"_"+this.parentCompData.data.cxPropChildModuleRelation:"#option_"+r,n=$(s)[0];-1!=["${BLOCKED}","${NOTBLOCKED}"].indexOf(e)?this.$node._callee.component.blockedCriteriaSelected=a.api_name:a.api_name==this.$node._callee.component.blockedCriteriaSelected&&(this.$node._callee.component.blockedCriteriaSelected=!1),n&&(a.api_name==this.$node._callee.component.blockedCriteriaSelected?Lyte.arrayUtils(n.getData("options"),"removeAt",8,2):n.getData("options").length<=8&&Lyte.arrayUtils(n.getData("options"),"push",[{system:"${BLOCKED}",display:_cruxUtils.getI18n("crm.filter.email.isblocked")},{system:"${NOTBLOCKED}",display:_cruxUtils.getI18n("crm.filter.email.isnotblocked")}]))}if(-1!=e.indexOf("$"))this.setData({cruxElement1:"",showSecondDropdownType:""});else{o="tag"==a.field_data_type?"tag":this.cruxCompMapping[a.field_data_type];this.setData("cruxElement1",o),132==a.ui_type&&this.setData("showSecondDropdownType","date"),a.history_tracking&&"not_equal"==e?$L("#picklist_tracker_field").addClass("dN"):a.history_tracking&&"equal"==e&&$L("#picklist_tracker_field").removeClass("dN"),(n=this.$node.querySelector("lyte-input"))&&t&&n.focus()}}else if("multiselectlookup"==a.field_data_type||this.data.isChildFieldLookup){(d=$L("#multiSelect_lookup_"+this._cruxReplace(a.api_name,"[/.]","_"))[0])&&(d.style.display="${EMPTY}"===e||"${NOTEMPTY}"===e?"none":"block")}else if(-1!=["ownerlookup","multiuserlookup","userlookup"].indexOf(a.field_data_type)&&-1==e.indexOf("$")&&-1==["equal_role","equal_group","not_equal_role"].indexOf(e))this.setData("cruxElement1","user");else if("multirelation"===a.field_data_type){var d;(d=$L("#multiSelect_lookup_"+this._cruxReplace(a.api_name,"[/.]","_"))[0])&&(d.style.display="${EMPTY}"===e?"none":"block")}else["equal_role","equal_group","not_equal_role"].indexOf(e)>-1&&(e.indexOf("group")>-1&&!Crm.groupUserRelDetails?(store.findAll("related_list",{module:"Users"},!0).then((function(e){Crm.groupUserRelDetails?Crm.groupUserRelDetails.listRelation=e.find((e=>"GroupUserRel__s"==e.api_name)):Crm.groupUserRelDetails={listRelation:e.find((e=>"GroupUserRel__s"==e.api_name))}})),store.findAll("field",{module:"GroupUserRelations__s"},!0).then((function(e){Crm.groupUserRelDetails?Crm.groupUserRelDetails.field=e.find((e=>"GroupRel__s"==e.api_name)):Crm.groupUserRelDetails={field:e.find((e=>"GroupRel__s"==e.api_name))}}))):e.indexOf("role")>-1&&!Crm.userRoleField&&store.findAll("field",{module:"Users"},!0).then((function(e){Crm.userRoleField=e.find((e=>"role"==e.api_name))})),this.setData("cruxElement1","role"),this.getData("roleRequestModel")&&-1===e.indexOf(this.getData("roleRequestModel"))&&Lyte.objectUtils(this.getData("selectedValues"),"add","value1",[]),this.setData("roleRequestModel",e.indexOf("group")>-1?"user_group":"role"))},findAbmSegments:function(e,t){var i,a=this,l=a.getData("abmSegmentsList"),o=!0;a.setData("lookUpArray",[]),l.forEach((function(l){i=l.Segment_Name__s.toLowerCase(),!a.isSelected(l,t)&&i.startsWith(e)&&(o=!1,Lyte.arrayUtils(a.getData("lookUpArray"),"push",l))})),o?Lyte.objectUtils(a.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.label.no.options.found")):Lyte.objectUtils(a.getData("displayMsg"),"add","multiLookupMsg","")},searchAbmSegments:function(e,t){var i=this.getData("abmSegmentsList"),a=this;e=e.trim().toLowerCase(),a.setData("abmSegmentsSearchedText",e),i&&i.length?a.findAbmSegments(e,t):(a.setData("lookupDisplayField","Segment_Name__s"),Lyte.objectUtils(a.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.searching.text")),"/crm/v4/ABM_Segment__s?fields=Segment_Name__s",a.sendxhr("/crm/v4/ABM_Segment__s?fields=Segment_Name__s","GET").then((function(i){var l,o,r=!0;a.setData("lookUpArray",[]),""!==i.response?(Lyte.objectUtils(a.getData("displayMsg"),"add","multiLookupMsg",""),o=(i=JSON.parse(i.response).data).length,a.setData("abmSegmentsList",i),o&&(0===t.length?i.forEach((function(t){l=t.Segment_Name__s.toLowerCase(),e&&!l.startsWith(e)||(r=!1,Lyte.arrayUtils(a.getData("lookUpArray"),"push",t))})):i.forEach((function(i){l=i.Segment_Name__s.toLowerCase(),a.isSelected(i,t)||e&&!l.startsWith(e)||(r=!1,Lyte.arrayUtils(a.getData("lookUpArray"),"push",i))})),r&&Lyte.objectUtils(a.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.label.no.options.found")))):(Lyte.objectUtils(a.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.label.no.options.found")),a.setData("lookUpArray",[]))}),(function(){Lyte.objectUtils(a.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.error.loading.text"))})))},onSearchFun:function(e,t){var i=this.moduleRecordMapping[this.getData("module")],a=this.getData("field"),l="Recommendation_infield_Search_val"===$(t).attr("id")?"Recommendation_infield":a.api_name,o="Recommendation_infield"===l?this.getData("renderItems2"):this.getData("renderItems");if(o){if("SimilarityRecords"===l&&o.length>=1)return void Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crux.smartfilter.multiselect.maximum.selected",[1,this.linkingModule?this.linkingModule.module_name:this.data.placeholderValue[0]]));if(o.length>=5)return void Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.maximum.campaigns.selected",_cruxUtils.getI18n("abm.segment.names")))}this.$node.querySelector("#multiSelect_lookup_"+this._cruxReplace(l,"[/.]","_"))&&this.$node.querySelector("#multiSelect_lookup_"+this._cruxReplace(l,"[/.]","_")).open();var r=this.getData("moduleDisplayField"),s=this,n=e.newValue;$L("#display_msg_"+this._cruxReplace(l,"[/.]","_"))[0];if("cxFilter_Linked_Segment__s"===l)this.searchAbmSegments(n,o);else if(0===n.length)s.setData("lookUpArray",[]),Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.minimum.input.text","2"));else if(1==n.length)Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.minimum.input.text","1")),s.setData("lookUpArray",[]);else{var d,p;Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.searching.text")),d=r[p="cxFilter_Campaigns"==l&&"crossfield"===a.field_data_type?"Campaigns":"Recommendation"==l||"Recommendation_infield"==l?this.idModuleMapping[i.recommendationsDetailsJson.what_to.id]:this.data.isChildFieldLookup?this.idModuleMapping[a.lookup.module.id]:this.idModuleMapping[a.multiselectlookup.connected_module.id]]?r[p][0]:moduleRecordMapping[p].display_field?moduleRecordMapping[p].display_field.api_name:"Name",this.setData("lookupDisplayField",d);var c="cxFilter_Campaigns"==l&&"crossfield"===a.field_data_type?"Campaigns":"Recommendation"==l||"Recommendation_infield"==l?i.recommendationsDetailsJson.what_to.api_name:this.data.isChildFieldLookup?moduleRecordMapping[p].api_name:a.multiselectlookup.connected_module.api_name,u="/crm/v2/"+c+"/search?";if("Campaigns"===c&&"crossfield"===a.field_data_type){var m="(Campaign_Name:starts_with:"+n.trim().replace(/([<>*()?\\])/g,"\\$1")+")",_=this.getData("selectedValues").firstDropDownValue;_&&(m="("+m+"and(Type:equals:"+this.data.options.filter((function(e){return e.actual_value==_}))[0].display_value+"))");var f=this.getData("selectedValues").headDropDownValue;f&&(m="("+m+"and(Status:equals:"+this.data.opt1.filter((function(e){return e.actual_value==f}))[0].display_value+"))")}else m="("+this.getData("lookupDisplayField")+":starts_with:"+n.trim().replace(/([<>*()?\\])/g,"\\$1")+")";u=u+"criteria="+encodeURIComponent(m),this.sendxhr(u,"GET").then((function(e){if(""!=e.response){if(e=JSON.parse(e.response).data,Lyte.objectUtils(s.getData("displayMsg"),"add","multiLookupMsg",""),s.setData("lookUpArray",[]),0!=e.length){var t=e.length;if(0==o.length)s.setData("lookUpArray",e),$L("#campaign_"+e[0][s.data.lookupDisplayField]).addClass("lyteDropdownSelection");else{for(var i=!1,a=0;a<t;a++)s.isSelected(e[a],o)||(i=!0,Lyte.arrayUtils(s.getData("lookUpArray"),"push",e[a]));i?$L("#campaign_"+s.data.lookUpArray[0][s.data.lookupDisplayField])[0]&&$L("#campaign_"+s.data.lookUpArray[0][s.data.lookupDisplayField]).addClass("lyteDropdownSelection"):Lyte.objectUtils(s.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.label.no.options.found"))}}}else Lyte.objectUtils(s.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.label.no.options.found")),s.setData("lookUpArray",[])}),(function(e){403===e.status&&e.responseText&&"NO_PERMISSION"===JSON.parse(e.responseText).code?Lyte.objectUtils(s.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.security.error")):Lyte.objectUtils(s.getData("displayMsg"),"add","multiLookupMsg",_cruxUtils.getI18n("crm.chosen.error.loading.text"))}))}},valueChanged:function(e,t){var i=this.getData("field");"cxFilter_Campaigns"==i.api_name&&(0==JSON.parse($L("#multiSelect_lookup_"+i.api_name)[0].ltProp("selected")).length?(this.setData("memberStatus",!1),Lyte.objectUtils(this.getData("selectedValues"),"add",{value2:[]})):this.setData("memberStatus",!0),t&&t.open());if(("Prediction_0"===i.api_name||"Prediction_1"===i.api_name)&&this.$node.querySelector("#scoreCheckBox")){var a=$L("#sub_option_"+i.api_name)[0],l=$L("#option_Prediction")[0];a.querySelector("#scoreCheckBox").checked&&!a.getData("isScoreSelected")?(a.setData("isScoreSelected",!0),l.setData("isScoreSelected",!0)):!a.querySelector("#scoreCheckBox").checked&&a.getData("isScoreSelected")&&(a.setData("isScoreSelected",!1),l.setData("isScoreSelected",!1))}if("Recommendation"==i.api_name||"Recommendation_infield"==i.api_name){var o=this.getData("selectedValues").byDropDownValue;"Dependent"==o?(this.setData("crossSelling",!0),this.setData("reBuy",!1)):"Repeat"==o?(this.setData("crossSelling",!1),this.setData("reBuy",!0)):(this.setData("crossSelling",!1),this.setData("reBuy",!1))}if("Competitor_Name"===i.api_name){var r=this.getData("selectedValues").firstDropDownValue;if("${EMPTY}"===r||"${NOTEMPTY}"===r)Lyte.arrayUtils($L("#option_cxFilter_Competitor_Alert")[0].component.data.crossFields,"removeAt",1,2);else{var s=$L("#option_cxFilter_Competitor_Alert")[0].component.data.crossFields;1===s.length&&Lyte.arrayUtils(s,"push",$L("#option_cxFilter_Competitor_Alert")[0].component.data.field.options.slice(1))}}this.getMethods("onValueChange")&&!this.preventValChangeCallback&&this.executeMethod("onValueChange",{field:i,value:e,comp:this})},hideSubfieldOption:function(e){var t=this.getData("field"),i=this.$node.id;e&&(i=e);var a=$L("."+this._cruxReplace(t.api_name,"[/.]","_")+"_selectedRadioBtn");if("option_cxFilter_Email_Sentiment"==i&&a[0].classList.remove("dNI"),"0"!=a.length){var l="sub_option_"+a[0].ltProp("value"),o=document.getElementById(l);o&&(o.style.display="none")}},getField:function(e,t){var i,a=this.getData("field"),l="."+this._cruxReplace(a.api_name,"[/.]","_")+"_selectedRadioBtn";(i=$L(l)[0])&&i.classList.remove(a.api_name+"_selectedRadioBtn"),t.$node.classList.add(a.api_name+"_selectedRadioBtn");var o="sub_option_"+e.api_name;null!=(i=document.getElementById(o))&&(i.classList.add("cvSubOption"),i.component.render(this.parentCompData)),this.getMethods("onValueChange")&&!this.preventValChangeCallback&&this.executeMethod("onValueChange",{field:a,sub_field:e})},isSelected:function(e,t){for(var i=t.length,a=0;a<i;a++)if(t[a].id==e.id)return!0;return!1},hideDropDown:function(){this.getData("field");Lyte.objectUtils(this.getData("displayMsg"),"add","multiLookupMsg",""),this.setData("lookUpArray",[])},setServiceStatus:function(e,t){if(t.serviceStatusMap={"Zoho Webinar":[{display_value:"Invited",actual_value:"Invited"},{display_value:"Registered",actual_value:"Registered"},{display_value:"Attended",actual_value:"Attended"}],"Zoho Backstage":[{display_value:"Invited",actual_value:"Invited"},{display_value:"Yet to check in",actual_value:"Yet to check in"},{display_value:"Purchased",actual_value:"Purchased"},{display_value:"Checked in",actual_value:"Checked in"},{display_value:"Cancelled",actual_value:"Cancelled"}],"Zoho Survey":[{display_value:"Yet to visit",actual_value:"Yet to visit"},{display_value:"Visited",actual_value:"Visited"},{display_value:"Completed",actual_value:"Completed"}]},t.serviceStatusMap["Zoho Campaigns"]=[{display_value:"Yet to Send",actual_value:"Yet to Send"},{display_value:"Sent",actual_value:"Sent"},{display_value:"Opened",actual_value:"Opened"},{display_value:"Clicked",actual_value:"Clicked"},{display_value:"Hard Bounced",actual_value:"Hard Bounced"},{display_value:"Soft Bounced",actual_value:"Soft Bounced"},{display_value:"Marked As Spam",actual_value:"Marked As Spam"},{display_value:"Skipped",actual_value:"Skipped"},{display_value:"Replied",actual_value:"Replied"},{display_value:"Opted Out",actual_value:"Opted Out"}],Lyte.objectUtils(t.getData("field"),"add","serviceStatus",[]),Lyte.objectUtils(t.data.selectedValues,"add",{Service_Status:[]}),-1!=["Zoho Campaigns","Zoho Webinar","Zoho Backstage","Zoho Survey"].indexOf(e))Lyte.objectUtils(t.getData("field"),"add","serviceStatus",t.serviceStatusMap[e]);else if(!e){if(t.allService&&t.allService.length)return void Lyte.objectUtils(t.getData("field"),"add","serviceStatus",t.allService);if(!t.data.options.length)return"";for(var i=t.data.options,a=i.length,l=[],o=0;o<a;o++)if(t.serviceStatusMap[i[o].actual_value]){var r=0,s=t.serviceStatusMap[i[o].actual_value],n=s.length;for(r=0;r<n;r++)l.filter((function(e){return e.actual_value==s[r].actual_value}))[0]||l.push(s[r])}t.allService=t.sortArray(l,"display_value"),Lyte.objectUtils(t.getData("field"),"add","serviceStatus",t.allService)}},setDropDownValuesFun:function(e){var t=this.cruxCondMapping,i=this.getData("field"),a=[],l=[],o=[],r=[],s=[],n=this.moduleRecordMapping;if("dynamicFilter"!=i.data_type){if("crossfield"==i.field_data_type&&"cxFilter_Campaigns"!=i.api_name)"cxFilter_Email_Sentiment"==i.api_name&&(r=[{system:"Age in Days",display:_cruxUtils.getI18n("crm.condition.in.last")},{system:"${TODAY}",display:_cruxUtils.getI18n("Today")},{system:"${THISWEEK}",display:_cruxUtils.getI18n("crm.thisweek")},{system:"${THISMONTH}",display:_cruxUtils.getI18n("crm.label.this.month")},{system:"${THISYEAR}",display:_cruxUtils.getI18n("crm.thisyear")},{system:"${AGEINDAYS}+30",display:_cruxUtils.getI18n("crm.condition.last.30.days")},{system:"${AGEINDAYS}+60",display:_cruxUtils.getI18n("crm.condition.last.60.days")},{system:"${AGEINDAYS}+90",display:_cruxUtils.getI18n("crm.condition.last.90.days")},{system:"${CURRENTTIME}",display:_cruxUtils.getI18n("crm.condition.until.now")}],a=[{system:"Positive",display:_cruxUtils.getI18n("crm.sentiment.Positive")},{system:"Negative",display:_cruxUtils.getI18n("crm.sentiment.Negative")},{system:"PositiveAndNegative",display:_cruxUtils.getI18n("sentiment.positiveandnegative")},{system:"PositiveOrNegative",display:_cruxUtils.getI18n("sentiment.positiveornegative")},{system:"PositiveOnly",display:_cruxUtils.getI18n("sentiment.positiveonly")},{system:"NegativeOnly",display:_cruxUtils.getI18n("sentiment.negativeonly")},{system:"Neutral",display:_cruxUtils.getI18n("crm.sentiment.Neutral")}]);else if("cxFilter_Campaigns"==i.api_name){this.setData({dropdownSysValue:"actual_value",dropdownDispValue:"display_value"});var d=n.Campaigns.fields.filterBy({api_name:"Type"})[0];if(d&&d.visible&&d.available_in_user_layout?(r=(r=d?d.pick_list_values.slice(0):[]).filter((function(e){return"unused"!=e.type})),this.removeValue(r,"actual_value",["-None-"]),r=this.sortArray(r,"display_value"),Crm&&Crm.zohoCampaignEnabled&&(this.removeValue(r,"actual_value",["Zoho Campaigns"]),r.unshift({actual_value:Crm.partnerName+" Campaigns",display_value:Crm.partnerName+" Campaigns"})),r.unshift({actual_value:"",display_value:"-"+_cruxUtils.getI18n("crm.filters.select.campaign.type",_cruxUtils.getI18n("Campaign"))+"-"})):this.setData("firstDropdown",!1),(d=n.Campaigns.fields.filterBy({api_name:"Status"})[0])&&d.visible&&d.available_in_user_layout)l=(l=d?d.pick_list_values.slice(0):[]).filter((function(e){return"unused"!=e.type})),this.removeValue(l,"actual_value",["-None-"]),(l=this.sortArray(l,"display_value")).unshift({actual_value:"",display_value:"-"+_cruxUtils.getI18n("crm.filters.select.campaign.status",_cruxUtils.getI18n("Campaign"))+"-"})}else if("activity"==i.field_data_type)"Overdue"==i.api_name?r=[{system:"Activities",display:_cruxUtils.getI18n("Activities")},{system:"Tasks",display:_cruxUtils.getI18n("Tasks")},{system:"Calls",display:_cruxUtils.getI18n("Calls")}]:"Activity_Due"==i.api_name&&(r=[{system:"${TODAY}",display:_cruxUtils.getI18n("Today")},{system:"${TOMORROW}",display:_cruxUtils.getI18n("Tomorrow")},{system:"${DUEINDAYS}+7",display:_cruxUtils.getI18n("crm.livedesk.pot.nextdays","7")},{system:"${TODAYANDOVERDUE}",display:_cruxUtils.getI18n("Today + Overdue")}],Lyte.objectUtils(this.getData("selectedValues"),"add","firstDropDownValue","${TODAYANDOVERDUE}"));else if("custom"==i.field_data_type)a=[{system:"UserAndSystem",display:_cruxUtils.getI18n("crm.source.user.and.system")},{system:"UserOrSystem",display:_cruxUtils.getI18n("crm.source.user.or.system")},{system:"User",display:_cruxUtils.getI18n("User")},{system:"System",display:_cruxUtils.getI18n("crm.label.system2")},{system:"OnlyByUser",display:_cruxUtils.getI18n("crm.source.user.only")},{system:"OnlyBySystem",display:_cruxUtils.getI18n("crm.source.system.only")}],r=[{system:"Age in Days",display:_cruxUtils.getI18n("crm.condition.in.last")},{system:"${TODAY}",display:_cruxUtils.getI18n("Today")},{system:"${THISWEEK}",display:_cruxUtils.getI18n("crm.thisweek")},{system:"${THISMONTH}",display:_cruxUtils.getI18n("crm.label.this.month")},{system:"${THISYEAR}",display:_cruxUtils.getI18n("crm.thisyear")},{system:"${AGEINDAYS}+30",display:_cruxUtils.getI18n("crm.condition.last.30.days")},{system:"${AGEINDAYS}+60",display:_cruxUtils.getI18n("crm.condition.last.60.days")},{system:"${AGEINDAYS}+90",display:_cruxUtils.getI18n("crm.condition.last.90.days")},{system:"${CURRENTTIME}",display:_cruxUtils.getI18n("crm.condition.until.now")}],this.setData("recordDropdownValues",i.values),"cxFilter_Email_Status"==i.api_name&&(a=i.options,r=this.getData("withOption"));else if("Recommendation"==i.api_name){this.setData("firstDropdown",!1);var p={FirstTime:{system:"FirstTime",display:_cruxUtils.getI18n("crm.filter.label.firstbuy")},Dependent:{system:"Dependent",display:_cruxUtils.getI18n("crm.filter.label.cwbab")},Bundle:{system:"Bundle",display:_cruxUtils.getI18n("crm.filter.label.fbt")},Repeat:{system:"Repeat",display:_cruxUtils.getI18n("crm.filter.label.rebuy")},Sequence:{system:"Sequence",display:_cruxUtils.getI18n("crm.filter.label.nextbuy")}};if(n&&n[this.data.module]&&n[this.data.module].isRecommendationsEnable&&n[this.data.module].recommendationsDetailsJson){var c=n[this.data.module].recommendationsDetailsJson;if(c&&c.suggestion_type){var u=c.suggestion_type;a=[],u.first_buy&&u.first_buy.enabled?p.FirstTime={system:"FirstTime",display:u.first_buy.label}:p.FirstTime=void 0,u.customer_also_bought&&u.customer_also_bought.enabled?p.Dependent={system:"Dependent",display:u.customer_also_bought.label}:p.Dependent=void 0,u.frequently_bought_together&&u.frequently_bought_together.enabled?p.Bundle={system:"Bundle",display:u.frequently_bought_together.label}:p.Bundle=void 0,u.rebuy&&u.rebuy.enabled?p.Repeat={system:"Repeat",display:u.rebuy.label}:p.Repeat=void 0,u.next_buy&&u.next_buy.enabled?p.Sequence={system:"Sequence",display:u.next_buy.label}:p.Sequence=void 0}}this.setData("recommendationBasedOnOption",p)}else if("Prediction"===i.api_name||"Prediction_0"===i.api_name||"Prediction_1"===i.api_name){var m="Prediction"===i.api_name?$L("#option_Prediction")[0]:$L("#sub_option_"+i.api_name)[0],_=m.component.numberWithOEmptyConditions;Lyte.objectUtils(m.getData("predictionOptions"),"add","score_operator",_)}else if("BestTime"===i.data_type&&"best_time"===i.api_name)a=[{system:"${TODAY}",display:_cruxUtils.getI18n("Today")},{system:"${TOMORROW}",display:_cruxUtils.getI18n("Tomorrow")}],Lyte.objectUtils(this.getData("selectedValues"),"add","firstDropDownValue","${TODAY}");else if("NBX"===i.data_type&&"NBX_Available"===i.api_name)r=[{system:"${TODAY}",display:_cruxUtils.getI18n("Today")},{system:"${TOMORROW}",display:_cruxUtils.getI18n("Tomorrow")},{system:"${DUEINDAYS}+7",display:_cruxUtils.getI18n("crm.livedesk.pot.nextdays","7")},{system:"${DUEINDAYS}+15",display:_cruxUtils.getI18n("crm.livedesk.pot.nextdays","15")},{system:"${DUEINDAYS}+30",display:_cruxUtils.getI18n("crm.livedesk.pot.nextdays","30")}],Lyte.objectUtils(this.getData("selectedValues"),"add","firstDropDownValue","${TODAY}");else if("Call_Status"==i.api_name&&-1!=["Activities","Calls"].indexOf(this.data.module))r=[{system:"Scheduled",display:_cruxUtils.getI18n("Scheduled")},{system:"Attended Dialled",display:_cruxUtils.getI18n("Attended Dialled")},{system:"Unattended Dialled",display:_cruxUtils.getI18n("Unattended Dialled")},{system:"Overdue",display:_cruxUtils.getI18n("Overdue")},{system:"Cancelled",display:_cruxUtils.getI18n("Cancelled")},{system:"Received",display:_cruxUtils.getI18n("Received")},{system:"Missed",display:_cruxUtils.getI18n("Missed")}];else{var f=i.field_data_type;if(r=(r="multiselectpicklist"==f&&this[f+"Conditions"]?this[f+"Conditions"]:this[t[f]+"Conditions"])||[],80==i.ui_type||-1!==["Positive_Score","Negative_Score","Touch_Point_Positive_Score","Touch_Point_Negative_Score","Touch_Point_Score","Score"].indexOf(i.api_name)&&null==i.ui_type?(r.pop(),r.pop()):-1!=["APPOINTMENTSTATUS","SERVICESTATUS"].indexOf(i.column_name)&&(r=this.defaultConditions),"Email"==i.column_name&&this.$node._callee.component.data.isFromModal?(r.pop(),r.pop()):"cxFilter_Deal_Owner"==i.api_name&&(r=this.defWithEmptyConditions),-1===["EMAIL","ADDN_EMAIL"].indexOf(i.column_name)||i.custom_field||!this.data.userDetails.EMAIL_BOUNCE_MANAGEMENT&&this.$node._callee.component.blockedCriteriaSelected||Lyte.arrayUtils(r,"push",[{system:"${BLOCKED}",display:_cruxUtils.getI18n("crm.filter.email.isblocked")},{system:"${NOTBLOCKED}",display:_cruxUtils.getI18n("crm.filter.email.isnotblocked")}]),"multiselectlookup"==i.field_data_type||this.data.isChildFieldLookup)if("445"==i.ui_type)ele="user",r=this.booleanConditions;else{var y=this.data.isChildFieldLookup?i.lookup.module.id:i.multiselectlookup.connected_module.id;this.setData("placeholderValue",[_cruxUtils.getI18n("crm.module.name",n[this.idModuleMapping[y]].singular_label)]),r=[{system:"equal",display:_cruxUtils.getI18n("is")},{system:"${EMPTY}",display:_cruxUtils.getI18n("is empty")}]}if(["cxFilter_Linked_Segment__s"].includes(i.api_name)&&(r=[{system:"equal",display:_cruxUtils.getI18n("is")},{system:"${EMPTY}",display:_cruxUtils.getI18n("is empty")}]),"picklist"==i.field_data_type&&i.history_tracking)o=[{system:"greater_than",display:">"},{system:"less_than",display:"<"},{system:"greater_equal",display:">="},{system:"less_equal",display:"<="},{system:"equal",display:"="}];"count"!=i.api_name&&"percentage"!=i.api_name||(r=[{system:"greater_than",display:">"},{system:"less_than",display:"<"},{system:"greater_equal",display:">="},{system:"less_equal",display:"<="},{system:"equal",display:"="}])}if("tag"==i.field_data_type?r=this.defWithEmptyConditions:-1!=["ACTIVITYTYPE","LAYOUTID","PROCESSINGBASIS","SE_STATUS","WIZARDID"].indexOf(i.column_name)?r=this.defaultConditions:"STAGE"!=i.column_name&&"cxFilter_Deal_Stage"!=i.api_name||(r=this.stageConditions),(["date","datetime","date_time"].includes(i.field_data_type)||"cxFilter_Email_Sentiment"==i.api_name)&&("Without_Any_Activity"==i.api_name||"Without_Any_Notes"==i.api_name||"Attended"==i.api_name||"cxFilter_Email_Sentiment"==i.api_name?(r=this.getData("withOption"),e&&("cxFilter_Email_Sentiment"==i.api_name&&0==r.filter((function(e){return"${CURRENTTIME}"==e.system})).length?Lyte.arrayUtils(r,"push",{system:"${CURRENTTIME}",display:_cruxUtils.getI18n("condition.till.now")}):0==r.filter((function(e){return"${EMPTY}"==e.system})).length&&Lyte.arrayUtils(r,"push",{system:"${NOTEMPTY}",display:_cruxUtils.getI18n("crm.condition.till.today")}))):"Activity_Done"==i.api_name||"Notes_Added"==i.api_name||"Missed"==i.api_name?r=this.getData("withOption"):"With_Open_Deal"!=i.api_name&&"Without_Open_Deal"!=i.api_name||(r=[{system:"Age in Days",display:_cruxUtils.getI18n("crm.condition.in.last")},{system:"${THISWEEK}",display:_cruxUtils.getI18n("crm.thisweek")},{system:"${THISMONTH}",display:_cruxUtils.getI18n("crm.label.this.month")},{system:"${LASTWEEK}",display:_cruxUtils.getI18n("Last Week")},{system:"${LASTMONTH}",display:_cruxUtils.getI18n("Last Month")}],s=[{system:"${AGEINMONTHS}+1",display:_cruxUtils.getI18n("crm.recurring.no.months","1")},{system:"${AGEINMONTHS}+2",display:_cruxUtils.getI18n("crm.recurring.no.months","2")},{system:"${AGEINMONTHS}+3",display:_cruxUtils.getI18n("crm.recurring.no.months","3")},{system:"${AGEINMONTHS}+4",display:_cruxUtils.getI18n("crm.recurring.no.months","4")},{system:"${AGEINMONTHS}+5",display:_cruxUtils.getI18n("crm.recurring.no.months","5")},{system:"${AGEINMONTHS}+6",display:_cruxUtils.getI18n("crm.recurring.no.months","6")}],this.setData("dateoptions",e?s:[s[0]]))),53==i.ui_type&&(r=this.numberConditions.slice(0,6),this.setData("dateoptions",[{system:"HOURS",display:_cruxUtils.getI18n("hours")},{system:"DAYS",display:_cruxUtils.getI18n("days")},{system:"WEEKS",display:_cruxUtils.getI18n("weeks")},{system:"MONTHS",display:_cruxUtils.getI18n("months")},{system:"YEARS",display:_cruxUtils.getI18n("years")}])),132==i.ui_type){var h,x=i.multi_module_lookup.modules;s=[];for(const e of x)h=this.moduleRecordMapping[this.idModuleMapping[e.id]],s.push({system:h.id,display:h.plural_label});this.setData("dateoptions",e?s:[s[0]])}if(i.crypt){r=this.encryptNumberConditions;"number"==this.data.cruxElement1&&-1==["date","datetime","currency"].indexOf(this.data.field.field_data_type)||(this.setData({cruxElement1:!1,showSecondDropdownType:""}),r=this.defEmptyConditions)}i.cxFieldsDetails&&i.cxFieldsDetails[0]&&(a=i.cxFieldsDetails[0].cxOptions),"cxFilter_UnallocatedRecords"==i.api_name&&(this.setData("crossFields",i.crossFields),this.setData("firstDropdown",!1),r=[]),this.triggerConditionCallback(r,e,!1,{bydropdownOption:a}),e?this.setData({durationOpt:o,opt1:l}):this.setData({durationOpt:[o[0]],opt1:[l[0]]})}},showAlertMsg:function(e,t){var i=document.getElementById("cxFilterAlert");i&&($("crux-smart-filter")[0].setData("alertMsg",e),i.ltProp({top:"0px"}),i.ltProp("show",!0),i.setMethods({onClose:function(){t&&t.$node.querySelector("lyte-input")?t.$node.querySelector("lyte-input").focus():t&&t.$node.querySelector("lyte-number")&&t.$node.querySelector("lyte-number").focus()},onShow:function(){$L(".cxSmartFilterAlert lyte-button").focus()}}))},triggerConditionCallback:function(e,t,i=!1,a={}){var l,o,r=this.data.field,s={field:this.data.field,condition:e||[],type:this.cruxCondMapping[r.field_data_type],dateOption:this.data.dateoptions,comp:this};if(s.fieldOption=a.bydropdownOption?a.bydropdownOption:[],r.cxDynamicFilterCriteriaComponent&&this.cruxAssets.getDynamicFilterCriteriaCondtions&&(s.condition=e,(l=this.cruxAssets.getDynamicFilterCriteriaCondtions(r,e))&&l.constructor===Array?e=l:l&&l.constructor===Object&&(e=l.condition?l.condition:e,s.fieldOption=l.fieldOption?l.fieldOption:s.fieldOption,o=l.selected?l.selected:o)),this.cruxAssets.setFieldBasedFilterComparator&&(s.condition=e,(l=cruxAssets.setFieldBasedFilterComparator(s))&&l.constructor==Array?e=l:l&&l.constructor==Object&&(e=l.condition?l.condition:e,s.fieldOption=l.fieldOption?l.fieldOption:s.fieldOption,o=l.selected?l.selected:o)),this.getMethods("setConditions")&&(s.condition=e,(l=this.executeMethod("setConditions",s))&&l.constructor==Array?e=l:l&&l.constructor==Object&&(e=l.condition?l.condition:e,s.fieldOption=l.fieldOption?l.fieldOption:s.fieldOption,o=l.selected?l.selected:o,Lyte.objectUtils(this.data.selectedValues,"add","firstDropDownValue",o))),o=o||(e&&e[0]?e[0].system:""),t?this.setData({options:e,bydropdownOption:s.fieldOption}):this.setData({options:"Activity_Due"===r.api_name?[e[3]]:[e[0]],bydropdownOption:s.fieldOption}),o&&this.data.firstDropdown&&!i&&this.getValue(o,void 0,!0),this.setData("sentStatus",r.sent_status?r.sent_status:[]),e&&e.length){var n=e.filter((e=>e.cxDisabled)).map((e=>e.system));this.setData("optionsDisabledList",n)}if(r.cxForceSetCondition){var d=$L("#DDV_"+r.api_name)[0];d&&d.resetSelected()}},observesCriteria:function(){this.setCriteria()}.observes("cxPropCriteria"),setCriteria:function(){if(this.data.cxPropCriteria&&this.data.rendered){this.preventValChangeCallback=!0,this.data.cxPropIgnoreCallbackInSetCriteria||delete this.preventValChangeCallback;var e,t=this.getData("field"),i=this.$node,a=this.getData("selectedValues"),l=this.getData("cxPropCriteria");if(l.type=l.type?l.type:t.field_data_type,"dynamicFilter"!=l.type){var o=this.cruxAssets.fieldDataTypeToCruxCompMapping;(o=o||{})[t.field_data_type]&&(l.type=o[t.field_data_type]);var r=l.comparator,s=l.type?l.type:this.getData("field").field_data_type,n=l.value,d=this,p=this.moduleRecordMapping;if(this.data.userDetails.EMAIL_BOUNCE_MANAGEMENT&&l.value&&l.value.includes&&l.value.includes("${BLOCKED")&&"equal"===l.comparator){$L("#DDV_"+l.api_name)[0].ltProp("selected","${BLOCKED}");let e=$L("#option_"+l.api_name)[0].component;return e.methods.triggerGetDropDownVal(l.value,e),void this.setEmailBlockedCriteria(l.api_name,l.value)}if("cxFilter_Scoring_Rule"===l.api_name||"cxFilter_Series"===l.api_name){var c=!1;n=n.id?n.id:n,d.getData("field").pick_list_values.some((function(e){if(e.actual_value+""==n+"")return n=e.display_value,c=!0,!0})),(c||"cxFilter_Scoring_Rule"===l.api_name)&&$L("#"+d._cruxReplace(l.api_name,"[/.]","_")+"_crux_comp").e.component.set("cxPropValue",n)}var u,m="";if("cxFilter_Email_Sentiment"!=l.api_name&&(u=$L("#sub_field_"+l.subfield)),void 0===p||"crossfield"!=l.type||l.api_name!=p.Contacts.api_name){if("${EMPTY}"!=n&&("${BLOCKED}"!=n||-1===["EMAIL","ADDN_EMAIL"].indexOf(t.column_name)||t.custom_field)||"not_equal"!=r?n&&n.indexOf&&1!=n&&"-1"!=n.indexOf("AGEIN")?(F=!0,n=r="Age in Days",m=/\d+/i.exec(l.value)[0],e="-1"!=l.value.indexOf("DAYS")?"DAYS":"-1"!=l.value.indexOf("WEEKS")?"WEEKS":"-1"!=l.value.indexOf("MONTHS")?"MONTHS":"YEARS"):n&&n.indexOf&&1!=n&&"-1"!=n.indexOf("DUEIN")?(F=!0,n=r="Due in Days",m=n=/\d+/i.exec(l.value)[0],e="-1"!=l.value.indexOf("DAYS")?"DAYS":"-1"!=l.value.indexOf("WEEKS")?"WEEKS":"MONTHS"):n&&n.includes&&n.includes("${")&&this.checkIsValidComparator(n,r)?(r=n,n=""):"rfm"!==l.type&&"ABM_Techniques"!==l.type&&"ABM_Scores"!==l.type||(i=$L("#sub_option_"+l.subfield)[0],a=i.getData("selectedValues"),u[0].ltProp("checked",!0),s="integer"):(n="${EMPTY}"==n?"${NOTEMPTY}":"${NOTBLOCKED}",r="equal",l.origCriteria&&0==l.origCriteria.include_objects&&(n="${EMPTY}"),"cxFilter_Linked_Segment__s"===l.api_name&&(n="${EMPTY}"),"sub_option_Competitor_Name"===l.api_name&&Lyte.arrayUtils($L("#option_cxFilter_Competitor_Alert")[0].component.data.crossFields,"removeAt",1,2)),"crossfield"!=l.type&&"cxFilter_Email_Sentiment"!=l.api_name||"cxFilter_Campaigns"==l.api_name||"cxFilter_Scoring_Rule"===l.api_name||"cxFilter_Series"===l.api_name)if("custom"==l.type)if("cxFilter_RecordAction"!=l.api_name&&"cxFilter_RelatedRecordsAction"!=l.api_name||Lyte.objectUtils(a,"add","headDropDownValue",l.isModified),this.$node._callee.component.specialDateObject&&this.$node._callee.component.specialDateObject[l.api_name]&&m&&(r="${AGEINDAYS}+"+m,m="",delete this.$node._callee.component.specialDateObject[l.api_name]),"cxFilter_Email_Status"==l.api_name?(r=-1!=["not_opened","not_sent","not_received"].indexOf(l.status)&&"Age in Days"!=r&&"Due in Days"!=r?this.negative_Comparator(r):r,"sent"==l.status&&u[0].ltProp("checked",!0),Lyte.objectUtils(a,"add","byDropDownValue",l.status),i.component.showHideEmailStatus(l.status,l)):Lyte.objectUtils(a,"add","byDropDownValue",l.comparator),"between"==r&&(n[0]=/^(.*)T/.exec(n[0])[1]?/^(.*)T/.exec(n[0])[1]:n[0],n[1]=/^(.*)T/.exec(n[1])[1]?/^(.*)T/.exec(n[1])[1]:n[1],n[0]==n[1]&&(r="equal",n=n[0])),Lyte.objectUtils(a,"add","firstDropDownValue",r),i.component.getValue(r),F)Lyte.objectUtils(a,"add",{value1:m,secondDropDownValue:e});else{var _=n;"between"==r&&(_=n[0],Lyte.objectUtils(a,"add","value2",n[1])),Lyte.objectUtils(a,"add","value1",_)}else if("Competitor_Name"===t.api_name&&("${EMPTY}"===n||"${NOTEMPTY}"===n)||"Prediction"!==t.api_name&&"Similarity"!==t.api_name&&"equal"===r&&("${EMPTY}"===n||"${NOTEMPTY}"===n||-1!==["${BLOCKED}","${NOTBLOCKED}"].indexOf(n)&&-1!==["EMAIL","ADDN_EMAIL"].indexOf(t.column_name)&&!t.custom_field))-1==["${BLOCKED}","${NOTBLOCKED}"].indexOf(n)||-1===["EMAIL","ADDN_EMAIL"].indexOf(t.column_name)||t.custom_field||this.$node._callee.setData("cxPropBlockedReason",!0),l.subfield&&-1!=["Calls","Tasks","Events"].indexOf(l.subfield)&&($L("#sub_field_"+l.subfield+"_Tag")[0].ltProp("checked",!0),i=$L("#sub_option_"+l.subfield+"_Tag")[0],a=i.getData("selectedValues")),Lyte.objectUtils(a,"add","firstDropDownValue",n),i.component.getValue(n,void 0,!1);else if("between"!=r&&"not_between"!=r||"similarity"===s){if("Layout"===l.api_name||["number","textarea","multiselectpicklist","text","phone","layout","email","mobile","website","picklist","integer","longinteger","double","bigint","currency","num","boolean","tag","autonumber","decimal"].includes(s)||"lookup"==s&&!this.data.isChildFieldLookup){if(n.constructor==Array&&-1!=["autonumber","textarea","text","phone","email","mobile","website","lookup","multiselectpicklist"].indexOf(s)&&(n=n.join(",")),l.subfield&&-1!=["Calls","Tasks","Events"].indexOf(l.subfield)&&($L("#sub_field_"+l.subfield+"_Tag")[0].ltProp("checked",!0),i=$L("#sub_option_"+l.subfield+"_Tag")[0],a=i.getData("selectedValues")),132==t.ui_type){var f=t.multi_module_lookup.modules.filter((function(e){return e.api_name==l.multi_module_lookup}))[0];Lyte.objectUtils(a,"add","secondDropDownValue",f.id)}if(Lyte.objectUtils(a,"add","firstDropDownValue",r),i.component.getValue(r,void 0,!0),"layout"==s&&(n={layouts:n}),"tag"==s&&n.constructor==Object&&(n=[n]),"picklist"==s)if(n=n&&"string"==typeof n?n.split(","):n,this.data.field.cxGetActualValue&&(n=this.getDisplayValue(n,t,"display_value")),"Activity_Type"==l.api_name&&"Activities"==this.data.module){for(var y=n.length,h=[],x=0;x<y;x++){function g(e){return moduleApiMapping[e]===n[x]}h.push(p[Object.keys(moduleApiMapping).find(g)].plural_label)}n=h}else"Competitor_Sentiment"===l.api_name?n=n[0]:"cxFilter_UnallocatedRecords"===t.api_name&&d.getData("field").pick_list_values.some((function(e){if(e.actual_value+""==n[0]+"")return n=e.display_value,!0}));Lyte.objectUtils(a,"add",{value1:n});var v=$L("#"+this._cruxReplace(t.api_name,"[/.]","_")+"_picklist_tracker")[0];v&&(n&&n.length>10?(v.ltProp("disabled",!0),v.setAttribute("lt-prop-title",_cruxUtils.getI18n("crm.smartfilter.picklist.options.msg"))):v.ltProp("disabled",!1))}else if(53===t.ui_type&&!1!==t.cxGetValueInMS)if(i._callee.component.pf_timeToReach_value){var b=this.getDurationfromMilliSeconds(parseInt(n),i._callee.component.pf_timeToReach_value.secondDropDownValue);Lyte.objectUtils(a,"add",{firstDropDownValue:r,secondDropDownValue:i._callee.component.pf_timeToReach_value.secondDropDownValue,value1:b}),i._callee.component.pf_timeToReach_value=void 0}else{var D=this.getDurationfromMilliSeconds(parseInt(n));Lyte.objectUtils(a,"add",{firstDropDownValue:r,secondDropDownValue:D.durationType,value1:D.value})}else if(["date","datetime","date_time"].includes(s)){53===t.ui_type&&(r=l.comparator);let o={};n.includes("${")&&(o=this.getConditionOpt(n),e=o.secondDropDownOpt,r=o.system,m=o.value,F=!0),Lyte.objectUtils(a,"add","firstDropDownValue",r),i.component.getValue(r,void 0,!0);_e=$L("#"+this._cruxReplace(l.api_name,"[/.]","_")+"_crux_comp")[0];F?Lyte.objectUtils(a,"add",{value1:m,secondDropDownValue:e}):_e&&("datetime"==s&&(n=/^(.*)T/.exec(n)[1]),Lyte.objectUtils(a,"add",{value1:n}))}else if("ownerlookup"==s||"userlookup"==s||"multiuserlookup"==s)Lyte.objectUtils(a,"add","firstDropDownValue",r),i.component.getValue(r,void 0,!0),r.indexOf("_role")>-1||r.indexOf("_group")>-1?(n=Array.isArray(n)?n:[n],Lyte.objectUtils(a,"add","value1",n)):Lyte.objectUtils(a,"add","value1",{users:n});else if("multirelation"===s||"cxFilter_Linked_Segment__s"===l.api_name){i=$L("#option_"+this._cruxReplace(l.api_name,"[/.]","_"))[0].component;S=l.value,L=[],i.setData("lookupDisplayField","Segment_Name__s"),S.forEach((e=>{L.push(e.id)})),i.setData("renderItems",S),Lyte.objectUtils(a,"add","multiSelectFieldValue",JSON.stringify(L)),this.setServiceStatus(this.data.selectedValues.firstDropDownValue,this)}else if("multiselectlookup"==s||"cxFilter_Campaigns"==l.api_name||this.data.isChildFieldLookup)if(l.field&&445==l.field.ui_type){var S={ids:n.join(",")};$L("#"+this._cruxReplace(l.field.api_name,"[/.]","_")+"_crux_comp")[0].component.set("cxPropValue",S)}else{n.toString();var F=!0,C=this.getData("moduleDisplayField");if("cxFilter_Campaigns"!=l.api_name?(compNode=$L("#DDV_"+this._cruxReplace(l.api_name,"[/.]","_"))[0],compNode&&(compNode.ltProp("selected",r),i.component.getValue(r,void 0,!0)),F="${EMPTY}"!=r):i._callee.component.campaigns_sel_value&&(Lyte.objectUtils(a,"add",{firstDropDownValue:i._callee.component.campaigns_sel_value.firstDropDownValue,headDropDownValue:i._callee.component.campaigns_sel_value.headDropDownValue}),i._callee.component.campaigns_sel_value=void 0,this.methods.getDropDownVal("",a.firstDropDownValue,"","",this)),F){var T=(S=l.value.constructor==Array?l.value:[l.value]).length,A=0,L=[],I=(i=$L("#option_"+this._cruxReplace(l.api_name,"[/.]","_"))[0]?$L("#option_"+this._cruxReplace(l.api_name,"[/.]","_"))[0].component:this,"Name");if(I=this.data.isChildFieldLookup?C[this.idModuleMapping[this.data.field.lookup.module.id]]?C[this.idModuleMapping[this.data.field.lookup.module.id]][0]:"Name":"cxFilter_Campaigns"==l.api_name?"Campaign_Name":C[this.idModuleMapping[l.field.multiselectlookup.connected_module.id]]?C[this.idModuleMapping[l.field.multiselectlookup.connected_module.id]][0]:"Name",i.setData("lookupDisplayField",I),this.data.supportRelatedModules&&"cxFilter_Campaigns"===l.api_name||this.data.isChildFieldLookup&&!S[0].name&&!S[0][I]){var M="cxFilter_Campaigns"===l.api_name?"Campaigns":this.data.field.lookup.module.api_name,E=(this.data.field.api_name,"/crm/v2/"+M+"/search?"),U=S.length,w="";for(A=0;A<U;A++)w+="(Id:equals:"+S[A].id+")",A<U-1&&(w+="or");E=E+"criteria="+encodeURIComponent(w),this.sendxhr(E,"GET").then((function(e){if(""!=e.response&&0!=(e=JSON.parse(e.response).data).length){for(var t=e.length,l=[],o=0;o<t;o++){var r=e[o];l.push({id:r.id,name:r[I],[I]:r[I]})}i.setData("renderItems",l),Lyte.objectUtils(a,"add","multiSelectFieldValue",JSON.stringify(S))}}),(function(e){}))}else{for(;A<T;A++)S[A][I]=S[A][I]?S[A][I]:S[A].name,L.push(S[A].id);i.setData("renderItems",S),Lyte.objectUtils(a,"add","multiSelectFieldValue",JSON.stringify(L))}i.setData("memberStatus",!0),l.Member_Status&&"cxFilter_Campaigns"===l.api_name&&(l.Member_Status="string"==typeof l.Member_Status?[l.Member_Status]:l.Member_Status,Lyte.objectUtils(a,"add",{value2:l.Member_Status})),"cxFilter_Campaigns"===t.api_name&&this.setServiceStatus(this.data.selectedValues.firstDropDownValue,this),l.Service_Status&&"cxFilter_Campaigns"===l.api_name&&(l.Service_Status="string"==typeof l.Service_Status?[l.Service_Status]:l.Service_Status,Lyte.objectUtils(a,"add",{Service_Status:l.Service_Status}))}}else if("Prediction"===t.api_name||"Prediction"===l.type){f=p[i.getData("module")];var O=$L("#sub_option_Prediction_0")[0],P=$L("#sub_option_Prediction_1")[0],N=$L("#sub_option_completed_prediction")[0],R=$L("#sub_field_Prediction_0")[0],k=$L("#sub_field_Prediction_1")[0],V=$L("#sub_field_completed_prediction")[0],q=f.prediction_details;for(T=i.getData("configLength"),A=0;A<T+1;A++)if(2===T&&2===A||1===T&&1===A){if(l.criteria.field.api_name.toUpperCase().endsWith("ACCURACY")||l.criteria.field.api_name.toUpperCase().endsWith("ISEND")&&!l.criteria.from){var B;if("undefined"===i.getData("isSuccess")&&V.ltProp("checked",!0),l.criteria.field.api_name.toUpperCase().endsWith("ACCURACY"))"greater_than"===l.criteria.comparator?B=$L("#sub_field_"+i.getData("successFailureOption")[0].system)[0]:"less_equal"===l.criteria.comparator&&(B=$L("#sub_field_"+i.getData("successFailureOption")[1].system)[0]),B.ltProp("checked",!0);var j=f.prediction_details[0].insights_details.accuracy_field.id,H=f.prediction_details[0].insights_details.isEnded_field.id;l.criteria.field.api_name.toUpperCase().endsWith("ACCURACY")?(N.setData("sfAccuracyCount",this.getData("sfAccuracyCount")+1),this.setData("sfAccuracyCount",this.getData("sfAccuracyCount")+1)):(N.setData("sfEndCount",this.getData("sfEndCount")+1),this.setData("sfEndCount",this.getData("sfEndCount")+1));var Y=i.getData("sfAccuracyCount")>1&&i.getData("sfEndCount")>1?"both":j===l.criteria.field.id||H===l.criteria.field.id?f.prediction_details[0].id:f.prediction_details[1].insights_details.accuracy_field.id!==l.criteria.field.id&&f.prediction_details[1].insights_details.isEnded_field.id!==l.criteria.field.id||2!==T?void 0:f.prediction_details[1].id;this.setData("selectedOptionSf",Y),N.setData("selectedOptionSf",Y);break}}else{var W=0===A?O:P,G=0===A?R:k;if(l.criteria.field.api_name===q[A].insights_details.trend_field.api_name){G.ltProp("checked",!0);var z="-1"===l.criteria.value?"trend_down":"1"===l.criteria.value?"trend_up":"no_trend";W.getData("isTrendShown")&&(W.setData("isTrendSelected",!0),this.$node.setData("isTrendSelected",!0)),this.setData("selectedTrend",z),W.setData("selectedTrend",z);break}if(l.criteria.field.api_name.toUpperCase().endsWith("PREDICTION")&&q[A].prediction_field.api_name===l.criteria.field.api_name){var K=this.getData("predictionCriteria"),J=l.criteria;if(G.ltProp("checked")||G.ltProp("checked",!0),J.value[0]&&J.value[0].startsWith("$"))if(J.value.startsWith("${AGEIN")||J.value.startsWith("${DUEIN")){K.comparator=J.value.startsWith("${AGEIN")?"Age in Days":"Due in Days";var X=J.value.startsWith("${AGEINDAYS}")||J.value.startsWith("${DUEINDAYS}")?"DAYS":J.value.startsWith("${AGEINWEEKS}")||J.value.startsWith("${DUEINWEEKS}")?"WEEKS":"MONTHS",Z=J.value.match(/(\d+)/)[0];Lyte.objectUtils(W.getData("selectedValues"),"add","dateVal",Z),Lyte.objectUtils(W.getData("selectedValues"),"add","secondDropDownValue",X),W.setData("showSecondDropdownType","date")}else K.comparator=J.value,W.setData("criteriaDisplay",!1),this.setData("criteriaDisplay",!1);else K.comparator=J.comparator,W.setData("criteriaDisplay",!0),this.setData("criteriaDisplay",!0);Lyte.objectUtils(this.getData("selectedValues"),"add","firstDropDownValue",K.comparator),Lyte.objectUtils(W.getData("selectedValues"),"add","firstDropDownValue",K.comparator),"between"===K.comparator||"not_between"===K.comparator?("date"!==W.getData("predictionEle")&&"date"!==i.getData("predictionEle")||(K.value=[],K.value[0]=/^(.*)T/.exec(J.value[0])?/^(.*)T/.exec(J.value[0])[1]:J.value[0],K.value[1]=/^(.*)T/.exec(J.value[1])?/^(.*)T/.exec(J.value[1])[1]:J.value[1],Lyte.objectUtils(W.getData("selectedValues"),"add",{value1:void 0,value2:void 0}),W.setData({showSecondDropdownType:"between",numberDropClass:"w100",predictionEle:"date"})),W.setData("isCriteriaBetween",!0),this.setData("isCriteriaBetween",!0)):("date"===W.getData("predictionEle")&&("equal"===K.comparator||"less_than"===K.comparator||"greater_than"===K.comparator?W.setData({value:"",predictionEle:"date",numberDropClass:"w100",showSecondDropdownType:""}):"${LASTMONTH}"!==K.comparator&&"${LASTWEEK}"!==K.comparator&&"${THISWEEK}"!==K.comparator&&"${THISYEAR}"!==K.comparator&&"${THISMONTH}"!==K.comparator&&"${TODAY}"!==K.comparator&&"${YESTERDAY}"!==K.comparator&&"${EMPTY}"!==K.comparator&&"${NOTEMPTY}"!==K.comparator||W.setData({showSecondDropdownType:"",predictionEle:""})),"${EMPTY}"!==K.comparator||q[A].score_field||(W.setData("isTrendShown",!1),this.$node.setData("isTrendShown",!1)),W.setData("isCriteriaBetween",!1),this.setData("isCriteriaBetween",!1)),this.getData("criteriaDisplay")&&(K.value=J.value,W.getData("isCriteriaBetween")?(Lyte.objectUtils(W.getData("selectedValues"),"add","criteriaValue0",K.value[0]),Lyte.objectUtils(W.getData("selectedValues"),"add","criteriaValue1",K.value[1])):K.value.toString().indexOf("$")<0&&Lyte.objectUtils(W.getData("selectedValues"),"add","criteriaValue",K.value))}if(l.criteria.field.api_name.toUpperCase().endsWith("PREDICTION_SCORE")||l.criteria1&&q[A].score_field&&(q[A].score_field.api_name===l.criteria.field.api_name||q[A].score_field.api_name===l.criteria1.field.api_name)){this.setData("isScoreSelected",!0),W.setData("isScoreSelected",!0);var Q=this.getData("scoreCriteria");(J=void 0===l.criteria1?l.criteria:l.criteria1).value[0].startsWith("$")?(Q.comparator=J.value,q[A].score_field,W.setData("scoreCriteriaDisplay",!1),this.setData("scoreCriteriaDisplay",!1)):(Q.comparator=J.comparator,W.setData("scoreCriteriaDisplay",!0),this.setData("scoreCriteriaDisplay",!0)),Lyte.objectUtils(this.getData("selectedValues"),"add","scoreComparator",Q.comparator),Lyte.objectUtils(W.getData("selectedValues"),"add","scoreComparator",Q.comparator),"between"===J.comparator||"not_between"===J.comparator?(W.setData("isScoreBetween",!0),this.setData("isScoreBetween",!0)):(W.setData("isScoreBetween",!1),this.setData("isScoreBetween",!1)),W.getData("scoreCriteriaDisplay")&&(Q.value=J.value,W.getData("isScoreBetween")?(Lyte.objectUtils(W.getData("selectedValues"),"add","scoreValue0",Q.value[0]),Lyte.objectUtils(W.getData("selectedValues"),"add","scoreValue1",Q.value[1])):Lyte.objectUtils(W.getData("selectedValues"),"add","scoreValue",Q.value));break}}}else if("best_time"===t.api_name){var ee=$L("#by_best_time")[0];"-1"===l.value?ee.component.setData("ltPropSelected","${TODAY}"):ee.component.setData("ltPropSelected","${TOMORROW}")}else if("next_best_experience"===t.api_name)if("Available"===l.comparator){$L("#sub_field_NBX_Available")[0].setData("ltPropChecked",!0);var te=$L("#sub_option_NBX_Available")[0],ie=$L("#NBX_ACTIVITY_OPTION")[0],ae={Calls:_cruxUtils.getI18n("Call"),Emails:_cruxUtils.getI18n("crm.field.label.email"),Events:_cruxUtils.getI18n("Meeting")},le=[];if("string"==typeof l.val1)le.push(ae[l.val1]);else for(var oe=l.val1.length,re=0;re<oe;re++)le.push(ae[l.val1[re]]);ie.component.set("cxPropValue",le),Lyte.objectUtils(te.getData("selectedValues"),"add","firstDropDownValue",l.val2)}else{$("#sub_field_NBX_NotAvailable")[0].setData("ltPropChecked",!0)}else if("Similarity"===t.api_name){if("NotAvailable"===l.comparator)$("#sub_field_SimilarityNotAvailable")[0].setData("ltPropChecked",!0);else if($("#sub_field_SimilarityAvailable")[0].setData("ltPropChecked",!0),"Score"===l.field){$("#sub_field_SimilarityScore")[0].setData("ltPropChecked",!0);var se=$("#sub_option_SimilarityScore")[0].component;if("${NOTEMPTY}"===l.value||"${EMPTY}"===l.value)se.setData("selectedValues.firstDropDownValue",l.value),se.setData({cruxElement1:""});else{se.setData("selectedValues.firstDropDownValue",l.comparator);if(["between","not_between"].contains(l.comparator))se.getValue(l.comparator,!0,!0),$("#SimilarityScore_crux_comp")[0].component.setData("cxPropValue",l.value[0]),$("#between_SimilarityScore_crux_comp")[0].component.setData("cxPropValue",l.value[1]);else $("#SimilarityScore_crux_comp")[0].component.setData("cxPropValue",l.value)}}else if("Records"===l.field){$("#sub_field_SimilarityRecords")[0].setData("ltPropChecked",!0);var ne=$("#sub_option_SimilarityRecords")[0].component,de=(T=(S=l.value).length,A=0,L=[],(f=p[i.getData("module")]).display_field.api_name);for(ne.setData("lookupDisplayField",de);A<T;A++)S[A][de]=S[A].name,L.push(S[A].id);ne.setData("renderItems",S);a=ne.getData("selectedValues");Lyte.objectUtils(a,"add","multiSelectFieldValue",JSON.stringify(L))}}else if("Recommendation"===t.api_name){f=p[i.getData("module")];Lyte.objectUtils(a,"add","headDropDownValue","all"===l.comparator?"all":"selected");var pe=i.getData("recommendationBasedOn");if(Lyte.objectUtils(pe,"add","first_buy",pe.first_buy||"FirstTime"===l.field),Lyte.objectUtils(pe,"add","cross_selling",pe.cross_selling||"Dependent"===l.field),Lyte.objectUtils(pe,"add","bundle",pe.bundle||"Bundle"===l.field),Lyte.objectUtils(pe,"add","re_buy",pe.re_buy||"Repeat"===l.field),Lyte.objectUtils(pe,"add","next_buy",pe.next_buy||"Sequence"===l.field),"selected"===l.comparator){T=(S=l.value).length,A=0,L=[],I=f.recommendationsDetailsJson.what_to.display_field;for(i.setData("lookupDisplayField",I);A<T;A++)S[A][I]=S[A].name,L.push(S[A].id);i.setData("renderItems2",S),Lyte.objectUtils(a,"add","multiSelectFieldValue1",JSON.stringify(L))}if("Repeat"===l.field){var ce=l.value1;if(ce)0!==i.getData("options").filter((function(e){return e.system===ce})).length?Lyte.objectUtils(a,"add","firstDropDownValue",ce):(Lyte.objectUtils(a,"add","firstDropDownValue","CUSTOM"),Lyte.objectUtils(a,"add","headDateValue",ce[0]));else Lyte.objectUtils(a,"add","firstDropDownValue","all")}}}else"datetime"==s&&(n[0]=/^(.*)T/.exec(n[0])[1],n[1]=/^(.*)T/.exec(n[1])[1]),"between"==r&&n[0]==n[1]&&(r="equal",n[1]=""),Lyte.objectUtils(a,"add","firstDropDownValue",r),i.component.getValue(r),Lyte.objectUtils(a,"add",{value1:n[0],value2:n[1]});else{if("cxFilter_Email_Sentiment"==l.api_name){if(Lyte.objectUtils(a,"add","byDropDownValue",l.status),i.component.showHideEmailStatus(l.status,l),"Last_Email_Sentiment"==l.subfield)me=$L("#sub_field_For_The_Last_Email")[0].ltProp("checked",!0);else{var ue=/.*?{(.*)}.*?/.exec(l.subfield)?/.*?{(.*)}.*?/.exec(l.subfield)[1].split("|"):[];if(ue[1]&&0!=ue[1])ue[0]=ue[0].toLowerCase(),(me=$L("#sub_field_"+ue[0])[0]).ltProp("checked",!0),a=$L("#sub_option_"+ue[0])[0].component.data.selectedValues,Lyte.objectUtils(a,"add",{firstDropDownValue:l.subfieldComp,value1:ue[1]})}a=this.data.selectedValues,l.subfield=l.api_name,me=i}else{var me;if((me=$L("#sub_option_"+l.subfield)[0])&&(me.component.hideSubfieldOption(),a=me.component.data.selectedValues),u[0].ltProp("checked",!0),"cxFilter_Contacts"==l.api_name||"Without_Open_Activity"==l.subfield||"Without_Any_Deal"==l.subfield||"Locked_False"==l.subfield||"Locked_True"==l.subfield)return}!n||-1==n.indexOf("${")||"equal"!=r&&"not_equal"!=r||(r=n),"between"!==r&&"not_between"!==r||(n[0]=/^(.*)T/.exec(n[0])&&/^(.*)T/.exec(n[0])[1]?/^(.*)T/.exec(n[0])[1]:n[0],n[1]=/^(.*)T/.exec(n[1])&&/^(.*)T/.exec(n[1])[1]?/^(.*)T/.exec(n[1])[1]:n[1],n[0]==n[1]&&(r="equal",n=n[0])),Lyte.objectUtils(a,"add","firstDropDownValue",r),me.component.getValue(r);var _e=$L("#"+l.subfield+"_crux_comp")[0];"between"===r||"not_between"===r?Lyte.objectUtils(a,"add",{value1:n[0],value2:n[1]}):F&&"cxFilter_Deals"!=l.api_name?Lyte.objectUtils(a,"add",{value1:m,secondDropDownValue:e}):"cxFilter_Deals"==l.api_name&&F?Lyte.objectUtils(a,"add",{secondDropDownValue:l.value}):_e&&Lyte.objectUtils(a,"add",{value1:n})}if(l.subfield&&l.subfieldComp&&l.subfieldValue){let e={api_name:l.subfield,comparator:l.subfieldComp,value:l.subfieldValue,type:l.type};"cxFilter_Scoring_Rule"!==l.api_name&&"cxFilter_Series"!==l.api_name||delete e.type,$L("#sub_field_"+e.api_name)[0].ltProp("checked",!0);let t=$L("#sub_option_"+e.api_name);t[0]&&t[0].setData("cxPropCriteria",e)}delete this.preventValChangeCallback}else u[0]&&u[0].ltProp("checked",!0)}}},checkIsValidComparator:function(e,t){if(!t)return!1;if("${NOTEMPTY}"==e||"${EMPTY}"==e)return!1;if(-1!=["${BLOCKED}","${NOTBLOCKED}"].indexOf(e)&&-1!==["EMAIL","ADDN_EMAIL"].indexOf(this.data.field.column_name)&&!this.data.field.custom_field)return!1;return(this.data.options?this.data.options:[]).filter((t=>t.system==e))[0]},didConnect:function(){var e=this.getData("field");if(["Activity_Due","With_Open_Deal","Without_Any_Notes","Attended","Events_Tag","Positive_Score","Prediction_0","Prediction_1","completed_prediction","NBX_Available","Start_Date__s","Competitor_Duration","Competitor_Sentiment","Competitor_Name"].indexOf(e.api_name)>=0){var t=$L("#sub_option_"+this._cruxReplace(e.api_name,"[/.]","_"));t[0]&&(t[0].component.render(t[0]._callee._callee.component),t.addClass("cvSubOption"))}this.setCriteria()},keyDownEvent:function(){this.$node.cxProp("aria")&&this.bindEventForAriaFilterInput()}.observes("rendered","cxPropAria"),setDropdownMixin:function(){var e=this.$node.querySelectorAll("lyte-dropdown:not(crux-dropdown lyte-dropdown)");if(this.$node.cxProp("aria"))for(var t=0;t<e.length;t++)e[t].bindFunc||(e[t].bindFunc=Lyte.registeredMixins["crux-aria-dropdown-mixin"].bindEventForAria.bind(e[t].component),e[t].bindFunc())}.observes("boundary"),getFieldCriteria:function(e=this){this.handleFieldDisplayForCrossFilter(),e.specialDateObject=e.specialDateObject?e.specialDateObject:{};var t,i,a,l,o=this.data.field,r=o.api_name,s=this.getData("moduleDisplayField"),n=this.moduleRecordMapping,d=this.idModuleMapping,p=this.data.module,c="",u=this.getData("cxPropCommonInfo"),m=u&&u.abmModuleInfo?u.abmModuleInfo.techniqueFields:[],_=u&&u.abmModuleInfo?u.abmModuleInfo.scoreFields:[],f=u&&u.abmModuleInfo?u.abmModuleInfo.abmAccountFields:[];if(o.Activity_tag){var y=$L("."+this._cruxReplace(o.api_name,"[/.]","_")+"_selectedRadioBtn")[0].ltProp("value");subfield=this.$node.querySelector("#sub_option_"+y),r=(o=subfield.getData("field")).api_name}if("cxFilter_Scoring_Rule"===o.api_name){if(!(v=$("#"+o.api_name+"_crux_comp")[0].component).validate())return{isValdationFailure:!0};if(t={comparator:"equal",field:{api_name:"Scoring_Rule",id:""},value:v.getValue("actual_value")},!(g=$L("."+o.api_name+"_selectedRadioBtn")[0]))return{isValdationFailure:!0};r=(o=$L("#"+g.id.replace("_field_","_option_")).e.component.data.field).api_name}var h,x=o.api_name;if("cxFilter_Series"===o.api_name){if(!(v=$("#"+o.api_name+"_crux_comp")[0].component).validate())return flag=!1,{isValdationFailure:!0};if(!(g=$L("."+o.api_name+"_selectedRadioBtn")[0]))return flag=!1,{isValdationFailure:!0};a={comparator:"equal",field:{api_name:"Cadencesid__s",id:""},value:v.getValue("actual_value")};var g=$L("."+o.api_name+"_selectedRadioBtn")[0];h="series",r=(o=$L("#"+g.id.replace("_field_","_option_")).e.component.data.field).api_name}if("cxFilter_UnallocatedRecords"===o.api_name){var v;if(!(v=$("#"+o.api_name+"_crux_comp")[0].component).validate())return flag=!1,{isValdationFailure:!0};var b={comparator:"equal",field:{api_name:"Threshold__s",id:""},value:v.getValue("actual_value")},D=this.construct_group(b,{comparator:"equal",field:{api_name:"Allocation_Type__s",id:""},value:"2"},"AND");return(C={include_objects:!0,relation:{relation_id:"",api_name:n.Thresholds.api_name},criteria:F}).criteria=D,{type:"cross_filter",cross_filter:C}}-1==["cxFilter_Activities","cxFilter_Notes","cxFilter_Deals","cxFilter_Contacts","cxFilter_Chats","cxFilter_Email_Sentiment","cxFilter_Locked"].indexOf(o.api_name)||"crossfield"!=o.field_data_type&&"custom"!=o.field_data_type||(c=(U=$L("."+this._cruxReplace(o.api_name,"[/.]","_")+"_selectedRadioBtn")[0])?U.ltProp("value"):"");if(-1==["Without_Open_Activity","Without_Any_Deal","With_Contact","Without_Any_Contact"].indexOf(c)){E="#DDV_"+("cxFilter_Activities"==r||"cxFilter_Notes"==r||"cxFilter_Deals"==r||"cxFilter_Locked"==r||"cxFilter_Chats"==r?c:this._cruxReplace(r,"[/.]","_"));var S=this.$node.querySelector(E);l=S?S.ltProp("selected"):"equal"}if(E="#"+("cxFilter_Activities"==r||"cxFilter_Notes"==r||"cxFilter_Deals"==r||"cxFilter_Chats"==r||"cxFilter_Locked"==r?c:this._cruxReplace(r,"[/.]","_"))+"_crux_comp",crux_comp=this.$node.querySelector(E),"dynamicFilter"===o.field_data_type)return crux_comp.component.getFieldCriteria();if(("cxFilter_Email_Status"!==o.api_name||"custom"!==o.data_type)&&-1!==["${OPEN}","${CLOSEDWON}","${CLOSEDLOST}","${EMPTY}","${BLOCKED}","${NOTBLOCKED}","${NOTEMPTY}"].indexOf(l)&&"multiselectlookup"!==o.field_data_type&&"multirelation"!==o.field_data_type&&"multiuserlookup"!==o.field_data_type&&-1===["Without_Any_Activity","Without_Any_Notes","Attended"].indexOf(c)){J="${NOTBLOCKED}"==l?"${BLOCKED}":l,l="${NOTBLOCKED}"==l?"not_equal":"equal","lookup"==o.api_name&&(r=r+"."+s[o.lookup.module.api_name][0]);_=u&&u.abmModuleInfo?u.abmModuleInfo.scoreFields:[];if("${BLOCKED}"===J&&"equal"===l&&this.getData("blockedCriteria")[o.api_name].length<=0){let e="Email"===r?$L("input[name=option_"+r+"]:checked").val().split("_")[2]:$L("input[name=option_"+r+"]:checked").val().split("_")[3],t="Email"===r?"EMAIL":"ADDN_EMAIL";if(e&&"both"!==e){let i=$L("#sub_option_cxFilter_"+t+"_"+e)[0].component.data.selectedValues,a=i.byDropDownValue,o=i.firstDropDownValue,r=i.secondDropDownValue;if(o.includes("Age in")||o.includes("Due in")){o=o.replace("Days",r);let i=$L("#id_cxFilter_"+t+"_"+e)[0].ltProp("value");if(!i)return this.showFilterAlert("Enter a valid number",$L("#id_cxFilter_"+t+"_"+e)[0].component),{isValdationFailure:!0};o=o.replaceAll(" ",""),o=o.toUpperCase(),o="less_than {"+o+"}+"+i}else if("less_than"===o||"greater_than"===o){let i=$L("#cxFilter_"+t+"_"+e+"_crux_comp")[0].component.getValue();if(!i)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+t+"_"+e+"_crux_comp")[0].component),{isValdationFailure:!0};i=this.getISODateTime(i,this.datePattern),o=o.toUpperCase(),o=o+" "+i}else if("equal"===o){let i=$L("#cxFilter_"+t+"_"+e+"_crux_comp")[0].component.getValue();if(!i)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+t+"_"+e+"_crux_comp")[0].component),{isValdationFailure:!0};let a=this.getISODateTime(i,this.datePattern),l=this.getISODateTime(i,this.datePattern,"end");o="between",o=o+" "+a+" "+l}else if("between"===o){let i=$L("#cxFilter_"+t+"_"+e+"_crux_comp")[0].component.getValue();if(!i)return this.showFilterAlert("Enter a valid date",$L("#cxFilter_"+t+"_"+e+"_crux_comp")[0].component),{isValdationFailure:!0};i=this.getISODateTime(i,this.datePattern);let a=$L("#between_cxFilter_"+t+"_"+e+"_crux_comp")[0].component.getValue();if(!a)return this.showFilterAlert("Enter a valid date",$L("#between_cxFilter_"+t+"_"+e+"_crux_comp")[0].component),{isValdationFailure:!0};a=this.getISODateTime(a,this.datePattern,"end"),o=o+" "+i+" "+a}else o=l+" "+o;J="${BLOCKED_"+a.toUpperCase()+"} "+o}else J="${BLOCKED}"}else J&&J.includes("${BLOCKED")&&"equal"===l&&this.getData("blockedCriteria")[o.api_name].length>0&&this.setEmailBlockedCriteria(o.api_name);if(!("Visited_Time"!=o.api_name&&"Time_Spent"!=o.api_name&&"Attended_By"!=o.api_name&&"Portal_Name"!=o.api_name&&"Browser"!=o.api_name&&"Search_Engine"!=o.api_name&&"Operating_System"!=o.api_name||"Leads"!=p&&"Contacts"!=p))return{type:"cross_filter",cross_filter:C={include_objects:!0,relation:{relation_id:n.Visits.id,api_name:"Visits_Zoho_Livedesk"},criteria:{comparator:l,field:{api_name:r,id:o.id},value:J}}};if("cxFilter_Deal_Closing_Date"==o.api_name||"cxFilter_Deal_Amount"==o.api_name||"cxFilter_Deal_Stage"==o.api_name)return{type:"cross_filter",cross_filter:C={include_objects:!0,relation:{relation_id:n.Potentials.id,api_name:n.Potentials.api_name},criteria:{comparator:l,field:{api_name:o.name,id:o.id},value:J}}};if(m.includes(o.api_name.replace("cxFilter_","")))return({cross_filter:C,relation_api_name:ne}=this.getABMCriteria(o.api_name.replace("cxFilter_",""),l,J)),isAbmFieldUsed=!0,{type:"cross_filter",cross_filter:C};if(_.includes(o.api_name.replace("cxFilter_","")))return({cross_filter:C,relation_api_name:ne}=this.getABMCriteria(o.api_name.replace("cxFilter_",""),l,J)),isAbmFieldUsed=!0,{type:"cross_filter",cross_filter:C};if("cxFilter_Record_status"===o.api_name)return{type:"cross_filter",cross_filter:C={include_objects:!0,relation:{api_name:"Review_Processes"},criteria:{comparator:l,field:{api_name:"Record_status"},value:J}}};-1!=["Events_Tag","Calls_Tag","Tasks_Tag"].indexOf(r)&&(r="Tag",i=!0);var F={comparator:l,field:{api_name:r,id:o.id},value:J};if(h){var C=this.groupSeriesCriteria(a,F);return F="",h=void 0,a=void 0,{type:"cross_filter",cross_filter:C}}if(i){var T={comparator:"equal",field:{api_name:"Activity_Type"},value:{Events_Tag:"Events",Calls_Tag:"Calls",Tasks_Tag:"Tasks"}[o.api_name]};F=this.construct_group(F,T,"AND")}if(t){C=this.groupScoreCriteria(t,F);return t=void 0,{type:"cross_filter",cross_filter:C}}return"cxFilter_Not_Replied_Messages"==o.api_name||"cxFilter_Replied_Messages"==o.api_name?{type:"custom_filter",custom_filter:this.specialfield(o,M,J,l,L)}:!this.data.supportRelatedModules||133!==o.ui_type||"lookup"!=o.field_data_type||"Activities"==this.data.cxPropModule&&-1!=["CONTACTID","SEID"].indexOf(o.column_name)?F:{comparator:l,field:{api_name:r+"."+((se=d[o.lookup.module.id])&&s[se]&&s[se].length?s[d[o.lookup.module.id]][0]:"Name")},value:J}}if("between"!=l&&"not_between"!=l||"custom"==o.field_data_type||"crossfield"==o.field_data_type){if("cxFilter_Locked"===o.api_name){var A=!1;return"Locked_True"===c&&(A=!0),{comparator:l="equal",field:{api_name:"Locked__s"},value:A}}if("custom"==o.field_data_type||"crossfield"==o.field_data_type){var L,I=l;if(M=l,-1==["cxFilter_Activities","cxFilter_Notes","cxFilter_Deals","cxFilter_Contacts","cxFilter_Chats","cxFilter_Campaigns","cxFilter_Locked"].indexOf(o.api_name)){E="#by_"+this._cruxReplace(r,"[/.]","_");var M=this.$node.querySelector(E).ltProp("selected")}if(""!=c&&"Overdue"!=c&&"cxFilter_Email_Sentiment"!=o.api_name&&(M=c,I=null),"cxFilter_RecordAction"==o.api_name||"cxFilter_RelatedRecordsAction"==o.api_name){var E="#record_"+o.api_name;L=this.$node.querySelector(E).ltProp("selected")}if("cxFilter_Email_Status"==o.api_name&&"sent"==M){var U;if(!(U=$L("."+o.api_name+"_selectedRadioBtn")[0]))return flag=!1,{isValdationFailure:!0};L=U.ltProp("value")}if("cxFilter_Email_Sentiment"==o.api_name&&("percentage"==(L=c||"")||"count"==L)&&!this.$node.querySelector("#"+L+"_crux_comp").component.validate())return flag=!1,{isValdationFailure:!0};if("Age in Days"==l){if(E="#second_"+("cxFilter_Activities"==r||"cxFilter_Notes"==r||"cxFilter_Deals"==r||"cxFilter_Chats"==r?c:this._cruxReplace(r,"[/.]","_"))+"_dropdown",value1=this.$node.querySelector(E).ltProp("selected"),I=value1,"cxFilter_Deals"!=r){if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};J=crux_comp.component.getValue(),I="${AGEIN"+value1+"}+"+J}l="less_equal"}else if("cxFilter_Campaigns"!=o.api_name)if(I=l,"${UNTILNOW}"==l||"${CURRENTTIME}"==l)l="less_equal";else if("${AGEINDAYS}+30"==l||"${AGEINDAYS}+60"==l||"${AGEINDAYS}+90"==l)e.specialDateObject[r]={value:l},l="less_equal";else if("${DUEINDAYS}+7"==l)l="less_equal";else if(!crux_comp||"Without_Any_Activity"!=c&&"Activity_Done"!=c&&"cxFilter_Email_Status"!=o.api_name&&"cxFilter_Notes"!=o.api_name&&"cxFilter_Chats"!=o.api_name&&"cxFilter_Email_Sentiment"!=o.api_name||-1!=["${TODAY}","${YESTERDAY}","${THISWEEK}","${THISMONTH}","${THISYEAR}","${LASTWEEK}","${LASTMONTH}","${UNTILNOW}","${TODAYANDOVERDUE}","${EMPTY}"].indexOf(l))l="equal";else{if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};if(I=crux_comp.component.getValue(),"equal"==l)l="between",I=[this.getISODateTime(I,this.datePattern),this.getISODateTime(I,this.datePattern,"end")];else if("between"==l){de="#between_"+(c&&"cxFilter_Email_Sentiment"!=r?c:this._cruxReplace(r,"[/.]","_"))+"_crux_comp",pe=this.$node.querySelector(de);if(value1=pe.component.getValue(),!pe.component.validate())return flag=!1,{isValdationFailure:!0};if(I=this.getISODateTime(I,this.datePattern),value1=this.getISODateTime(value1,this.datePattern,"end"),I>value1)return this.showFilterAlert(_cruxUtils.getI18n("crm.custom.field.less.than.equalto","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate")+"'","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.toDate")+"'"),crux_comp),flag=!1,{isValdationFailure:!0};I=[I,value1]}else I="greater_than"==l?this.getISODateTime(I,this.datePattern,"end"):this.getISODateTime(I,this.datePattern)}if("custom"==o.field_data_type)return{type:"custom_filter",custom_filter:this.specialfield(o,M,I,l,L)};if("cxFilter_Campaigns"==o.api_name){var w=(k=this.$node).getData("renderItems");if(this.campaigns_sel_value=k.getData("selectedValues"),!(J=this.getValueBasedonKeys(w,k.getData().lookupDisplayField)).length)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",$("#option_"+o.api_name)[0].getData().placeholderValue[0]),this.$node.querySelector("#multiSelect_lookup_"+this._cruxReplace(o.api_name,"[/.]","_"))),flag=!1,{isValdationFailure:!0};C={include_objects:!0,relation:{api_name:"Campaigns"}};var O=this.$node.querySelector("#memberStatusField").component.getValue(),P={comparator:"equal",field:{api_name:"Campaign_Name"},value:J};if(O.length){var N={comparator:"equal",field:{api_name:"Member_Status"},value:O};P=this.construct_group(P,N,"AND")}var R=this.$node.querySelector("#serviceStatusField")?this.$node.querySelector("#serviceStatusField").component.getValue():[];if(R.length){N={comparator:"equal",field:{api_name:"Service_Status"},value:R};P=this.construct_group(P,N,"AND")}return C.criteria=P,{type:"cross_filter",cross_filter:C}}return{type:"cross_filter",cross_filter:C=this.specialfield(o,M,I,l,L)}}if(53==o.ui_type){if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};var k=$("#option_"+o.api_name)[0];return this.pf_timeToReach_value=k.getData("selectedValues"),J=crux_comp.component.getValue(),E="#second_"+this._cruxReplace(r,"[/.]","_")+"_dropdown",value1=this.$node.querySelector(E).ltProp("selected"),J=!1===o.cxGetValueInMS?"${AGEIN"+value1+"}+"+J:this.getMilliSecondsfromDuration(J,value1),"time_to_reach__s"===o.api_name&&(preventSaveFilter="PathFinder"),{comparator:l,field:{api_name:r,id:o.id},value:J}}if("date"==o.field_data_type||"datetime"==o.field_data_type||"date_time"==o.field_data_type){let e=this.getConditionOpt(l);if(-1!=l.indexOf("${"))J=l,l=e.comparator?e.comparator:"equal";else{if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};if(J=crux_comp.component.getValue(),"Due in Days"==l||"Age in Days"==l||e.showDynamicInput){var V="";E="#second_"+this._cruxReplace(r,"[/.]","_")+"_dropdown",value1=this.$node.querySelector(E).ltProp("selected"),V="Due in Days"==l?"${DUEIN"+value1+"}+"+J:"Age in Days"==l?"${AGEIN"+value1+"}+"+J:"${"+l+J+value1+"}",l=e.comparator?e.comparator:"less_equal",J=V}else if("equal"==l&&"datetime"==o.field_data_type)l="between",J=[this.getISODateTime(J,this.datePattern),this.getISODateTime(J,this.datePattern,"end")];else if("date_time"!==o.field_data_type){var q="greater_than"==l?"end":"start";J=this.getISODateTime(J,this.datePattern,q,o.field_data_type)}}if("cxFilter_Deal_Closing_Date"==o.api_name||"Visited_Time"==o.api_name&&("Leads"==p||"Contacts"==p))return{type:"cross_filter",cross_filter:C="cxFilter_Deal_Closing_Date"!=o.api_name?{include_objects:!0,relation:{relation_id:n.Visits.id,api_name:"Visits_Zoho_Livedesk"},criteria:{comparator:l,field:{api_name:r,id:o.id},value:J}}:{include_objects:!0,relation:{relation_id:n.Potentials.id,api_name:n.Potentials.api_name},criteria:{comparator:l,field:{api_name:o.name,id:o.id},value:J}}};if("cxFilter_Not_Replied_Messages"==o.api_name||"cxFilter_Replied_Messages"==o.api_name)return{type:"custom_filter",custom_filter:this.specialfield(o,M,J,l,L)};F={comparator:l,field:{api_name:r,id:o.id},value:J};if(h){C=this.groupSeriesCriteria(a,F);return h=void 0,a=void 0,F="",{type:"cross_filter",cross_filter:C}}return F}if("num"==o.field_data_type||"currency"==o.field_data_type||"bigint"==o.field_data_type||"integer"==o.field_data_type||"longinteger"==o.field_data_type||"double"==o.field_data_type||"decimal"==o.field_data_type){var B=!!(J=crux_comp.component.getValue()).split(".")[1]&&J.split(".")[1];_=u&&u.abmModuleInfo?u.abmModuleInfo.scoreFields:[],f=u&&u.abmModuleInfo?u.abmModuleInfo.abmAccountFields:[];if(("autonumber"==o.data_type||"bigint"==o.data_type)&&B)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",o.field_label),crux_comp),flag=!1,{isValdationFailure:!0};if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};if("cxFilter_Deal_Amount"==o.api_name||"Time_Spent"==o.api_name&&("Leads"==p||"Contacts"==p))return{type:"cross_filter",cross_filter:C="cxFilter_Deal_Amount"!=o.api_name?{include_objects:!0,relation:{relation_id:n.Visits.id,api_name:"Visits_Zoho_Livedesk"},criteria:{comparator:l,field:{api_name:r,id:o.id},value:J}}:{include_objects:!0,relation:{relation_id:n.Potentials.id,api_name:n.Potentials.api_name},criteria:{comparator:l,field:{api_name:o.name,id:o.id},value:J}}};if(_.includes(o.api_name.replace("cxFilter_","")))return({cross_filter:C,relation_api_name:ne}=this.getABMCriteria(o.api_name.replace("cxFilter_",""),l,J)),isAbmFieldUsed=!0,{type:"cross_filter",cross_filter:C};preventSaveFilter=!!f.includes(o.api_name.replace("cxFilter_",""))&&"abm";var j={comparator:l,field:{api_name:"prediction"==preventSaveFilter?"Prediction_Score":r,id:o.id},value:J};if(t){C=this.groupScoreCriteria(t,j);return t=void 0,{type:"cross_filter",cross_filter:C}}if(a){F={comparator:l,field:{api_name:r},value:J},C=this.groupSeriesCriteria(a,F);return h=void 0,a=void 0,{type:"cross_filter",cross_filter:C}}return j}if(-1===["textarea","text","multiselectpicklist","phone","email","mobile","website","picklist","lookup","autonumber","tag","layout"].indexOf(o.field_data_type)||this.data.isChildFieldLookup)if("ownerlookup"==o.field_data_type||"userlookup"==o.field_data_type){if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};J=crux_comp.component.getValue();F={comparator:l,field:{api_name:r,id:o.id},value:J};if(h){C=this.groupSeriesCriteria(a,F);return h=void 0,a=void 0,{type:"cross_filter",cross_filter:C}}var H="";if(["equal_role","equal_group"].indexOf(l)>-1?(H=l.indexOf("role")>-1?"role":"group",l="equal"):"not_equal_role"==l&&(H="role",l="not_equal"),"group"===H){C={include_objects:!0};var Y=Crm.groupUserRelDetails.listRelation;C.relation={type:"field",api_name:o.api_name},C.relation.relation={type:"related_list",api_name:Y.api_name};var W=Crm.groupUserRelDetails.field;return C.criteria={comparator:l,field:{api_name:W.api_name,id:W.id},value:J},{type:"cross_filter",cross_filter:C}}if("role"===H)return{comparator:l,field:{api_name:r+".role",id:Crm.userRoleField.id},value:J};if("cxFilter_Deal_Owner"==o.api_name)return{type:"cross_filter",cross_filter:C={include_objects:!0,relation:{relation_id:n.Potentials.id,api_name:n.Potentials.api_name},criteria:{comparator:l,field:{api_name:"role"==H?o.name+".role":o.name,id:o.id},value:J}}};if("Enrolled_By__s"===o.api_name)a=void 0;else if(!H&&"Enrolled_By__s"!==o.api_name)return F}else{if("boolean"==o.field_data_type)return J=$L("#"+this._cruxReplace(o.api_name,"[/.]","_")+"_crux_comp")[0].component.getValue(),{comparator:l,field:{api_name:r,id:o.id},value:J};if("multiselectlookup"==o.field_data_type||"multiuserlookup"==o.field_data_type||this.data.isChildFieldLookup){var G=!0;if(J=l,-1==l.indexOf("${"))if(445==o.ui_type||"multiuserlookup"==o.field_data_type){if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};J=crux_comp.component.getValue()}else{if(!(J=(k=this.$node).getData().renderItems).length&&!this.data.cxPropIgnoreEmptyValue)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",o.field_label),crux_comp),flag=!1,{isValdationFailure:!0};J=this.getValueBasedonKeys(J,k.getData().lookupDisplayField)}else G="${EMPTY}"!=l,"${NOTEMPTY}"==l&&(J="${EMPTY}"),l="not_equal";C={include_objects:G,relation:{api_name:o[o.field_data_type].api_name},criteria:{comparator:l,field:{api_name:this.data.isChildFieldLookup?o.api_name:o[o.field_data_type].connectedlookup_apiname,id:o.id},value:J}};return this.data.isChildFieldLookup?C.criteria:{type:"cross_filter",cross_filter:C}}if("multirelation"===o.field_data_type&&"cxFilter_Linked_Segment__s"===o.api_name){var z,K=u.abmModuleInfo.isAccountModule,J=(G=!0,l),X={type:"related_list",api_name:this.data.supportRelatedModules?"ABM_Account__r":"ABM_Accounts",relation:{api_name:"ABM_Account_Segment__s"}};if(K||(X={type:"field",api_name:u.abmModuleInfo.account_name.api_name,relation:{api_name:this.data.supportRelatedModules?"ABM_Account_Segment__r":"ABM_Account_Segment1"}}),isAbmFieldUsed=!0,-1===l.indexOf("${")){if(!(J=(z=this.$node).getData().renderItems).length)return this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",o.field_label),crux_comp),flag=!1,{isValdationFailure:!0};J=this.getValueBasedonKeys(J,z.getData().lookupDisplayField)}else G=!("${EMPTY}"===l),"${NOTEMPTY}"===l&&(J="${EMPTY}"),l="not_equal";return{type:"cross_filter",cross_filter:C={include_objects:G,relation:X,criteria:{comparator:l,field:{api_name:"Linked_Segment__s"},value:J}},relation_name:K?X.api_name:X.relation.api_name}}}else{if(-1!=l.indexOf("${"))J=l,l="equal";else{if("Call_Status"==o.api_name&&-1!=["Activities","Calls"].indexOf(this.data.cxPropModule))return J="${Calls.Call Status."+l+"}",{comparator:"equal",field:{api_name:r,id:o.id},value:J};if(!crux_comp.component.validate())return flag=!1,{isValdationFailure:!0};var Z=o.cxGetActualValue?"actual_value":void 0;J=crux_comp.component.getValue(Z),"ACTIVITYTYPE"==o.column_name&&(J=crux_comp.component.getValue("actual_value"))}var F={comparator:l,field:{api_name:r,id:o.id},value:J};if(h){var C=this.groupSeriesCriteria(a,F);return h=void 0,a=void 0,{type:"cross_filter",cross_filter:C}}var Q,ee=$L("#"+this._cruxReplace(o.api_name,"[/.]","_")+"_picklist_tracker")[0];if("picklist"==o.field_data_type&&o.history_tracking&&ee&&ee.checked&&"equal"==l){var te=this.$node.querySelector("#DDV1_"+this._cruxReplace(o.api_name,"[/.]","_")+"_picklistTracker").ltProp("selected"),ie=$L("#"+this._cruxReplace(o.api_name,"[/.]","_")+"_historyTrackDurationDays")[0];if(!ie.component.validate())return flag=!1,{isValdationFailure:!0};var ae=ie.component.getValue();ae="${AGEINDAYS}+"+ae;var le=this.getData("module_info").related_lists[this.getIndex(this.getData("module_info").related_lists,"picklist_tracker","action",!0)],oe=(P={field:{api_name:"Modified_Time"},comparator:te,value:ae},N={field:{api_name:o.history_tracking.duration_configured_field.api_name},comparator:"equal",value:"${EMPTY}"},this.construct_group(P,N,"AND"));P="Stage"!=o.api_name||"Deals"!=p&&"Potentials"!=p?{field:{api_name:this.get_pick_track_enable_field(n[d[o.history_tracking.module.id]].fields,o)},comparator:l,value:J}:{field:{api_name:"Stage"},comparator:l,value:J},Q={include_objects:!0,relation:{api_name:this.data.supportRelatedModules?this.getRelSysRefName(le):le.api_name},criteria:this.construct_group(oe,P,"AND")}}if("cxFilter_Record_status"==o.api_name)return{type:"cross_filter",cross_filter:C={include_objects:!0,relation:{relation_id:"",api_name:"Review_Processes"},criteria:{comparator:l,field:{api_name:"Record_status"},value:J}}};if("lookup"==o.field_data_type&&("Activities"!=this.data.cxPropModule||-1==["CONTACTID","SEID"].indexOf(o.column_name))){if(132==o.ui_type){var re=this.getData().selectedValues.secondDropDownValue;return{comparator:l,field:{api_name:r+"->"+(se=store.peekRecord("module",re)).api_name+"."+(s[se.module_name]&&s[se.module_name].length?s[se.module_name][0]:"Name")},value:J}}var se;return{comparator:l,field:{api_name:r+"."+((se=d[o.lookup.module.id])&&s[se]&&s[se].length?s[d[o.lookup.module.id]][0]:"Name"),id:o.id},value:J}}if("cxFilter_Deal_Stage"==o.api_name||!("Attended_By"!=o.api_name&&"Portal_Name"!=o.api_name&&"Browser"!=o.api_name&&"Search_Engine"!=o.api_name&&"Operating_System"!=o.api_name||"Leads"!=p&&"Contacts"!=p))return{type:"cross_filter",cross_filter:C="cxFilter_Deal_Stage"!=o.api_name?{include_objects:!0,relation:{relation_id:n.Visits.id,api_name:"Visits_Zoho_Livedesk"},criteria:{comparator:l,field:{api_name:r,id:o.id},value:J}}:{include_objects:!0,relation:{relation_id:n.Potentials.id,api_name:n.Potentials.api_name},criteria:{comparator:l,field:{api_name:o.name,id:o.id},value:J}}};if(m.includes(o.api_name.replace("cxFilter_","")))return({cross_filter:C,relation_api_name:ne}=this.getABMCriteria(o.api_name.replace("cxFilter_",""),l,J)),isAbmFieldUsed=!0,{type:"cross_filter",cross_filter:C};i=!1,-1!=["Events_Tag","Calls_Tag","Tasks_Tag"].indexOf(r)?(r="Tag",i=!0):"Status"==r&&this.isZBCustomModule(this.getData("cxPropModule"))&&J&&o.pick_list_values&&(J=this.getDisplayValue(J,o));F={comparator:l,field:{api_name:r,id:o.id},value:J};if(h){var C=this.groupSeriesCriteria(a,F);return h=void 0,a=void 0,{type:"cross_filter",cross_filter:C}}if("cxFilter_Series"===x&&(F=""),i){T={comparator:"equal",field:{api_name:"Activity_Type"},value:{Events_Tag:"Events",Calls_Tag:"Calls",Tasks_Tag:"Tasks"}[o.api_name]};F=this.construct_group(F,T,"AND")}else"Data_Processing_Basis"!=o.api_name||this.data.supportRelatedModules||this.data.isChildInput||(F.field.api_name="Data_Processing_Basis_Details.Data_Processing_Basis");if("cxFilter_Competitor_Alert"!==o.api_name&&(x&&"cxFilter_Series"!==x||!x))return Q?{cross_filter:Q,criteria:F}:F}}else{var ne,de="#between_"+this._cruxReplace(r,"[/.]","_")+"_crux_comp",pe=this.$node.querySelector(de),_=u&&u.abmModuleInfo?u.abmModuleInfo.scoreFields:[];if(!crux_comp.component.validate()||!pe.component.validate())return{isValdationFailure:!0};if(J=crux_comp.component.getValue(),value1=pe.component.getValue(),["datetime","date","date_time"].includes(o.field_data_type)){if("date_time"!=o.field_data_type&&(J=this.getISODateTime(J,this.datePattern,"start",o.field_data_type),value1=this.getISODateTime(value1,this.datePattern,"end",o.field_data_type)),J>value1)return this.showFilterAlert(_cruxUtils.getI18n("crm.custom.field.less.than.equalto","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.fromDate")+"'","'"+_cruxUtils.getI18n("workflow.option.webhookFailure.toDate")+"'"),crux_comp),{isValdationFailure:!0}}else if(parseFloat(J)===parseFloat(value1)||parseFloat(J)>parseFloat(value1))return this.showFilterAlert(_cruxUtils.getI18n("crm.custom.field.less.than.to1"),crux_comp),{isValdationFailure:!0};if(J=[J,value1],!("Visited_Time"!=o.api_name&&"Time_Spent"!=o.api_name||"Leads"!=p&&"Contacts"!=p))return{type:"cross_filter",cross_filter:C={include_objects:!0,relation:{relation_id:n.Visits.id,api_name:"Visits_Zoho_Livedesk"},criteria:{comparator:l,field:{api_name:r,id:o.id},value:J}}};if("cxFilter_Deal_Closing_Date"==o.api_name||"cxFilter_Deal_Amount"==o.api_name)return{type:"cross_filter",cross_filter:C={include_objects:!0,relation:{relation_id:n.Potentials.id,api_name:n.Potentials.api_name},criteria:{comparator:l,field:{api_name:o.name,id:o.id},value:J}}};if(_.includes(o.api_name.replace("cxFilter_","")))return({cross_filter:C,relation_api_name:ne}=this.getABMCriteria(o.api_name.replace("cxFilter_",""),l,J)),isAbmFieldUsed=!0,{type:"cross_filter",cross_filter:C};var ce={comparator:l,field:{api_name:r,id:o.id},value:J};if(t){var C=this.groupScoreCriteria(t,ce);return t=void 0,{type:"cross_filter",cross_filter:C}}if(a){var C=this.groupSeriesCriteria(a,ce);return ce="",a=void 0,{type:"cross_filter",cross_filter:C}}if("cxFilter_Not_Replied_Messages"==o.api_name||"cxFilter_Replied_Messages"==o.api_name)return{type:"custom_filter",custom_filter:this.specialfield(o,M,J,l,L)};if("custom"!=o.field_data_type&&"crossfield"!=o.field_data_type)return ce}},getABMCriteria:function(e,t,i){var a=this.getData("cxPropCommonInfo"),l=a.abmModuleInfo.isAccountModule,o={api_name:this.data.supportRelatedModules?"ABM_Account__r":"ABM_Accounts"},r=o.api_name;return l||(r=(o={type:"field",api_name:a.abmModuleInfo.account_name.api_name,relation:o}).relation.api_name),{cross_filter:{include_objects:!0,relation:o,criteria:{comparator:t,field:{api_name:e},value:i}},relation_api_name:r}},groupScoreCriteria:function(e,t){var i=this.construct_group(e,t,"AND");return{include_objects:!0,relation:{relation_id:this.moduleRecordMapping["Entity Scores"].id,api_name:this.moduleRecordMapping["Entity Scores"].api_name},criteria:i}},groupSeriesCriteria:function(e,t){crmListView.getObject().module;for(var i=this.getData("module_info").related_lists,a=(t=this.construct_group(e,t,"AND"),i.length),l=0;l<a;l++)if("SERIESPERSONALITY"===i[l].personality_name){var o=this.data.supportRelatedModules?this.getRelSysRefName(i[l]):i[l].api_name;return{include_objects:!0,relation:{relation_id:this.moduleRecordMapping.Entity_Cadences.id,api_name:o},criteria:t}}},getRelSysRefName:function(e){var t=e.module.api_name,i=this.getData("module_info").relatedModules.find((e=>e.module.api_name===t));return i?i.api_name:e.api_name},handleFieldDisplayForCrossFilter:function(){var e=this.data.field.field_label,t=this;if(this.data.isChildInput&&this.parentCompData&&this.parentCompData.data.cxPropChildModuleDisplayLabel){var i=this.data.field.field_label+" of "+this.parentCompData.data.cxPropChildModuleDisplayLabel;Lyte.Component.set(this.data.field,{field_label:i})}setTimeout((function(){Lyte.Component.set(t.data.field,{field_label:e})}),100)},get_pick_track_enable_field:function(e,t){var i,a=e.length;for(i=0;i<a;i++)if(e[i].refer_from_field&&e[i].refer_from_field.id==t.id)return e[i].api_name;return!1}},{mixins:["crux-criteria-conditions","crux-filter-utils","crux-aria-smart-filter-input-mixin"]}),Lyte.Component.registerHelper("radioBtnIsSelected",(function(e,t,i){return e.sent_status&&e.sent_status[0]&&e.sent_status[0].api_name==t.api_name?e.api_name+"_selectedRadioBtn":-1!=["Positive_Score","Activity_Due","Without_Any_Notes","high","win","opened","With_Contact","With_Open_Deal","Attended","In_Last","Events_Tag","NBX_Available","Locked_True","Start_Date__s"].indexOf(t.api_name)?!!i||e.api_name+"_selectedRadioBtn":"cxFilter_EMAIL_both"===t.api_name||"cxFilter_ADDN_EMAIL_both"===t.api_name||!i&&""})),Lyte.Component.register("crux-smart-filter-crossfields",{_template:'<template tag-name="crux-smart-filter-crossfields"> <template is="if" value="{{expHandlers(cxPropChildFields.length,\'>\',0)}}"><template case="true"> <crux-smart-filter cx-prop-fields="{{lbind(cxPropChildFields)}}" cx-prop-class="cxSmFrCrossFldFilterList" id="customFilter_{{cxPropModuleField.api_name}}" cx-prop-child-module-fields="true" cx-prop-child-module-relation="{{cxPropModuleField.api_name}}" cx-prop-child-module-display-label="{{cxPropModuleField.field_label}}" on-value-change="{{method(\'onChildValueChange\')}}" on-field-change="{{method(\'onChildFieldChanged\')}}" cx-prop-module-display-field="{{cxPropModuleDisplayField}}" cx-prop-child-selected-field-count="{{selectedFieldCount}}" cx-prop-boundary="{{cxPropBoundary}}" set-conditions="{{method(\'setConditions\')}}" cx-prop-child-module-name="{{cxPropModuleField.moduleName}}" class="childCruxFilter" cx-prop-cross-filter-translations="{{cxPropCrossFilterTranslations}}" cx-prop-is-special-fields="false"> </crux-smart-filter> </template></template> <div lt-prop-title="{{if(disableFieldAddition,cxPropChildFieldLimitTooltip,\'\')}}" lt-prop-tooltip-config=" { &quot;position&quot; : &quot;bottom&quot; , &quot;appearance&quot; : &quot;box&quot; , &quot;showdelay&quot; : 1000 , &quot;maxdisplaytime&quot; : 5000 } "> <div data-zcqa="addField_{{cxPropModuleField.field_label}}" onclick="{{action(\'onAddField\')}}" class="cxSmFrCrossFldDropdownWrap cxSmFilterCrossFieldDropBtn {{if(disableFieldAddition,\'eventNone disable\',)}}"> <span class="cxSmFrCrFieldBtnText mL25"> <lyte-text lt-prop-value="{{cruxGetI18n(\'crm.button.add\')}} {{cruxGetI18n(\'crm.label.field\')}}"> </lyte-text> </span> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"attr",position:[3,1,1,1]},{type:"componentDynamic",position:[3,1,1,1]}],_observedAttributes:["cxPropModuleField","cxPropChildFields","selectedFieldCount","showLoader","disableFieldAddition","cxPropChildFieldLimit","cxPropBoundary","cxPropChildFieldLimitTooltip","cxPropModuleDisplayField"],data:function(){return{cxPropModuleField:Lyte.attr("object",{default:{}}),cxPropChildFields:Lyte.attr("array",{default:[]}),selectedFieldCount:Lyte.attr("number",{default:0}),showLoader:Lyte.attr("boolean",{default:!1}),disableFieldAddition:Lyte.attr("boolean",{default:!1}),cxPropChildFieldLimit:Lyte.attr("number"),cxPropBoundary:Lyte.attr("object",{default:{}}),cxPropChildFieldLimitTooltip:Lyte.attr("string",{default:""}),cxPropModuleDisplayField:Lyte.attr("object",{default:{}})}},init:function(){0===this.data.cxPropChildFields.length?this.setData("showLoader",!0):this.setDropDownFields()},showDropDownFields:function(){this.data.showLoader&&(this.setData("showLoader",!1),this.setDropDownFields())}.observes("cxPropChildFields"),setDropDownFields:function(){for(var e=Lyte.deepCopyObject(this.getData("cxPropChildFields")),t=0;t<e.length;t++)e[t].cxHide=!0,e[t].showDummyInput=!1;this.setData("cxPropChildFields",e),this.data.cxPropChildFields.length<this.data.cxPropChildFieldLimit&&this.setData("cxPropChildFieldLimitTooltip",I18n.getMsg("crm.smart.filter.child.fields.limit2"))},updateFieldsOnRemove:function(){this.setData("selectedFieldCount",this.data.selectedFieldCount-1),this.data.selectedFieldCount<this.data.cxPropChildFieldLimit&&this.setData("disableFieldAddition",!1)},incrementSelectedFieldCount:function(){this.setData("selectedFieldCount",this.data.selectedFieldCount+1),(this.data.selectedFieldCount>=this.data.cxPropChildFieldLimit||this.data.selectedFieldCount>=this.data.cxPropChildFields.length)&&this.setData("disableFieldAddition",!0)},onAddingFields:function(){if(!this.data.disableFieldAddition){for(var e=this.getData("cxPropModuleField").api_name,t="#customFilter_"+e,i=this.$node.querySelector(t),a=i.getData("allFields"),l=i.getData("appliedFields"),o=l.concat(a),r=-1,s=o.length-1;s>=0;s--)if(!1===o[s].cxHide){r=s;break}if(r+1===o.length){var n=[];for(s=0;s<l.length;s++)!0===l[s].cxHide&&(n.push(l[s]),Lyte.arrayUtils(l,"removeAt",s,1));for(s=0;s<a.length;s++)!0===a[s].cxHide&&(n.push(a[s]),Lyte.arrayUtils(a,"removeAt",s,1));if(0===n.length)return;Lyte.arrayUtils(a,"push",n),this.onAddingFields()}Lyte.Component.set(o[r+1],{cxHide:!1}),Lyte.Component.set(o[r+1],{showDummyInput:!0}),this.setData("selectedFieldCount",this.data.selectedFieldCount+1),(this.data.selectedFieldCount>=this.data.cxPropChildFieldLimit||this.data.selectedFieldCount>=this.data.cxPropChildFields.length)&&this.setData("disableFieldAddition",!0);var d="#customFilter_DropDown_customFilter_"+e+"_"+o[r+1].id;if(this.$node.querySelector(d).open(),this.getMethods("onFieldChange")){var p=[o[r+1]],c={},u={};c.checked=!0,u.type="click",this.executeMethod("onFieldChange",p,c,u,o[r+1])}}},actions:{onAddField:function(){this.onAddingFields()}},methods:{onChildValueChange:function(e){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e)},onChildFieldChanged:function(e,t,i,a){this.getMethods("onFieldChange")&&this.executeMethod("onFieldChange",e,t,i,a)},setConditions:function(e){if(e.field&&e.field.data_type&&["text","website"].includes(e.field.field_data_type)){for(var t=e.condition.length,i=0;i<t;i++)if(e.condition[i].system&&"contains"===e.condition[i].system)return{conditions:e.condition,selected:"contains"}}else if(e.field&&e.field.data_type&&["datetime","date","date_time"].includes(e.field.field_data_type)){var a={display:I18n.getMsg("not between"),system:"not_between"},l={system:"${YESTERDAYMINUS}",display:I18n.getMsg("Till Yesterday")};return e.condition.splice(6,0,a),e.condition.splice(11,0,l),e.conditions}return e.conditions}}});var cruxAssets=cruxAssets||{};cruxAssets.restrictedColumnNames_criteria=["COMMENTCONTENTS","PARTICIPANTID","ISCALLBILLABLE","CHECKINLONGITUDE","CHECKINLATITUDE","PUBLISHED","PRODUCTDETAILS","PREDICTIONSCORE","ACCOUNTCF501","ZCAMPAIGNID","ISCTICALL","BEST_TIME","ISDUPLICATE","ISAPPROVED","CONVERTEDDATE","SENDNOTIFICATION","REMINDAT","ISLOCKED","CTIVOICEURL","ENRICHMENT_STATUS","LASTENRICHEDTIME"],cruxAssets.restrictedUITypes_criteria=[66,999,3,123,1234,134,500,555,444,445,51,556,104,250],"undefined"!=typeof CrmField&&(cruxAssets.lookupUitypeComparator={starts_with:[CrmField.UITYPES.SINGLE_LINE,CrmField.UITYPES.SKYPE_FIELD,CrmField.UITYPES.TEXT_FIELD,CrmField.UITYPES.TWITTER,CrmField.UITYPES.FIRST_NAME,CrmField.UITYPES.LAST_NAME,CrmField.UITYPES.TASK_SUBJECT,CrmField.UITYPES.MULTI_LINE_CF,CrmField.UITYPES.TEXT_AREA,CrmField.UITYPES.WEBSITE,CrmField.UITYPES.EMAIL,CrmField.UITYPES.ACCOUNT_NAME_LOOKUP,CrmField.UITYPES.CAMPAIGN_NAME_LOOKUP,CrmField.UITYPES.PRODUCT_NAME_LOOKUP,CrmField.UITYPES.CONTACT_LOOKUP,CrmField.UITYPES.VENDOR_NAME_LOOKUP,CrmField.UITYPES.POTENTIAL_ID,CrmField.UITYPES.SALESORDER_ID,CrmField.UITYPES.CONTACT_ID,CrmField.UITYPES.QUOTE_ID,CrmField.UITYPES.ROLE_NAME,CrmField.UITYPES.LOOK_UP_ENTITY,CrmField.UITYPES.MULTISELECT_LOOK_UP,CrmField.UITYPES.PHONE],equals:[CrmField.UITYPES.SERVICE_DURATION,CrmField.UITYPES.DATE,CrmField.UITYPES.DATE_LONG,CrmField.UITYPES.NUMERIC_FIELD,CrmField.UITYPES.LONG_INTEGER,CrmField.UITYPES.CURRENCY,CrmField.UITYPES.AGGREGATE_FIELD,CrmField.UITYPES.PERCENT,CrmField.UITYPES.DECIMAL,CrmField.UITYPES.BIG_DECIMAL,CrmField.UITYPES.RECORD_CURRENCY,98,CrmField.UITYPES.BOOLEAN_DEF,CrmField.UITYPES.BOOLEAN_DEF_NOT,CrmField.UITYPES.AUTONUMBER],in:[CrmField.UITYPES.PRODUCT_HANDLER,CrmField.UITYPES.GLOBAL_TAX,999,CrmField.UITYPES.STAGE,CrmField.UITYPES.USERLOOKUP,CrmField.UITYPES.TAGS,CrmField.UITYPES.MULTI_PICK_LIST,CrmField.UITYPES.PICK_LIST,CrmField.UITYPES.OWNER,CrmField.UITYPES.CREATED_BY,CrmField.UITYPES.WIZARD,CrmField.UITYPES.LAYOUT],between:[CrmField.UITYPES.DATE_TIME1,CrmField.UITYPES.CREATED_TIME,CrmField.UITYPES.DATETIME,CrmField.UITYPES.DATE_TIME2,CrmField.UITYPES.DATE_TIME_LONG]}),cruxAssets.supportMultiselectFilterOptions=!1,cruxAssets.fieldDataTypeToCruxCompMapping={};var criteriaConditions={multiselectpicklist:[{system:"equal",display:I18n.getMsg("is")},{system:"not_equal",display:I18n.getMsg("isn't")},{system:"contains",display:I18n.getMsg("contains")},{system:"not_contains",display:I18n.getMsg("doesn't contain")},{system:"starts_with",display:I18n.getMsg("starts with")},{system:"ends_with",display:I18n.getMsg("ends with")},{system:"include_all",display:I18n.getMsg("includes all")},{system:"include_any",display:I18n.getMsg("include any")},{system:"exclude_all",display:I18n.getMsg("excludes all")},{system:"exclude_any",display:I18n.getMsg("exclude any")},{system:"${EMPTY}",display:I18n.getMsg("is empty")},{system:"${NOTEMPTY}",display:I18n.getMsg("is not empty")}]};cruxAssets.getCruxFilterCriteriaConditions=function(){if(cruxAssets.supportMultiselectFilterOptions)return criteriaConditions},cruxAssets.getDynamicFilterCriteriaComponent=function(e){return 777===e.ui_type&&featuresAvailable.NEARBY_FILTER?"crm-addressfield-filter":1===e.ui_type&&"EVENT"===e.column_name&&"Event__s"===e.api_name?"crm-voc-event-group-filter":void 0},cruxAssets.onBeforeCruxCriteriaFieldDropdownOpen=function(e,t,i,a){var l=Lyte.Router.getRouteInstance().routeName;if(["mass-tools","edit-record-locking","create-record-locking","configurator-create","configurator-edit","create-scoring-rule","clone-scoring-rule","edit-scoring-rule","create-territory","edit-territory","create-data-sharing","edit-data-sharing","find-and-merge","view","edit","view-layout","create","blueprint-setting","draft","territory-rules","index","home"].contains(l)){let l=0,o=i.length;for(let e=0;e<o;e++){let t=i[e];t.formula&&t.formula.dynamic&&l++}let r=a?a.length:0;for(let e=0;e<r;e++){let t=a[e];t.formula&&t.formula.dynamic&&l++}let s=e.length;if(!(l>=2)||i[t-1].formula&&i[t-1].formula.dynamic)for(let t=0;t<s;t++){let i=e[t];i.formula&&i.formula.dynamic&&Lyte.objectUtils(i,"add",{cxDisabled:!1,cxTitle:""})}else for(let t=0;t<s;t++){let i=e[t];i.formula&&i.formula.dynamic&&Lyte.objectUtils(i,"add",{cxDisabled:!0,cxTitle:I18n.getMsg("crm.title.max.dynamic.formula.fields")})}}return e},cruxAssets.onBeforeCruxCriteriaSecondaryFieldDropdownOpen=function(e,t,i,a){var l=Lyte.Router.getRouteInstance().routeName;if(["mass-tools","edit-record-locking","create-record-locking","configurator-create","configurator-edit","create-scoring-rule","clone-scoring-rule","edit-scoring-rule","create-territory","edit-territory","create-data-sharing","edit-data-sharing","find-and-merge","view","edit","view-layout","create","blueprint-setting","draft","territory-rules","index"].contains(l)){let l=0,o=i.length;for(let e=0;e<o;e++){let t=i[e];t.formula&&t.formula.dynamic&&l++}let r=a?a.length:0;for(let e=0;e<r;e++){let t=a[e];t.formula&&t.formula.dynamic&&l++}let s=e.length;if(!(l>=2)||a[t-1].formula&&a[t-1].formula.dynamic)for(let t=0;t<s;t++){let i=e[t].cxPropFields,a=i?i.length:0;for(let e=0;e<a;e++){let t=i[e];t.formula&&t.formula.dynamic&&Lyte.objectUtils(t,"add",{cxDisabled:!1,cxTitle:""})}}else for(let t=0;t<s;t++){let i=e[t].cxPropFields,a=i?i.length:0;for(let e=0;e<a;e++){let t=i[e];t.formula&&t.formula.dynamic&&Lyte.objectUtils(t,"add",{cxDisabled:!0,cxTitle:I18n.getMsg("crm.title.max.dynamic.formula.fields")})}}}return e},cruxAssets.setFieldBasedFilterComparator=function(e){if(cruxAssets.supportMultiselectFilterOptions&&"multiselectpicklist"===e.field.data_type){var t=$L("crm-custom-filter")[0];return t?t.component.getMultiSelectPicklistConditions(t.component,e.field,e.comp):criteriaConditions.multiselectpicklist}if("EVENT"===e.field.column_name&&e.field.field_label===I18n.getMsg("Event")){var i=["equal","${EMPTY}","${NOTEMPTY}"];return e.condition.filter((function(e){return i.includes(e.system)}))}if(e&&e.field&&e.field.lookup&&e.field.lookup.module&&e.field.lookup.module.crypt&&!0===e.field.lookup.module.crypt){var a=[];a.push({system:"${EMPTY}",display:"is empty"}),a.push({system:"${NOTEMPTY}",display:"is not empty"}),e.condition=a}return e.condition},cruxAssets.setFieldBasedComparator=function(e,t){if(e&&e.lookup&&e.lookup.module&&e.lookup.module.crypt&&!0===e.lookup.module.crypt){var i=[];i.push({system:"${EMPTY}",display:"is empty"}),i.push({system:"${NOTEMPTY}",display:"is not empty"}),t=i}return t},Lyte.Component.register("crm-voc-event-group-filter",{_template:'<template tag-name="crm-voc-event-group-filter"> <template is="if" value="{{showComponent}}"><template case="true"> <template is="for" items="{{vocEventGroups}}" item="field" index="index"> <lyte-radiobutton class="mB10" data-zcqa="vocEventsCheckBox" lt-prop-type="primary" lt-prop-name="events" lt-prop-checked="{{field.checked}}" lt-prop-value="{{field.system_value}}" lt-prop-label="{{field.header_value}}" on-checked="{{method(\'showEvents\')}}"></lyte-radiobutton> <template is="if" value="{{field.checked}}"><template case="true"> <crux-dropdown class="dB mB5 " data-zcqa="vocEventsDD" id="vocEventsDropDown" cx-prop-user-value="display_value" cx-prop-system-value="actual_value" cx-prop-type="multiple" cx-prop-selected="{{lbind(selectedEvents)}}" on-add="{{method(\'eventsModified\')}}" on-remove="{{method(\'eventsModified\')}}" cx-prop-options="{{lbind(allowedEvents)}}" cx-prop-placeholder="{{getI18n(\'select events\')}}"> </crux-dropdown> </template></template> </template> </template><template case="false"> <div class="dF jcCenter w100_per"><crm-ui-loaders interaction-name="crmCircleShadowLoader"></crm-ui-loaders></div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"componentDynamic",position:[1,0]}]}},default:{}}],_observedAttributes:["vocEventGroups","selectedEvents","allowedEvents","showDropDown","isLeadModule","salesModulePresent","callsPresent","inventoryModulePresent","showComponent","field","criteria","selectedValue","comparator","eventOptions","valueArr"],data:function(){return{vocEventGroups:Lyte.attr("array",{default:[]}),selectedEvents:Lyte.attr("array",{default:[]}),allowedEvents:Lyte.attr("array",{default:[]}),showDropDown:Lyte.attr("boolean",{default:!1}),isLeadModule:Lyte.attr("boolean",{default:!1}),salesModulePresent:Lyte.attr("boolean",{default:!1}),callsPresent:Lyte.attr("boolean",{default:!1}),inventoryModulePresent:Lyte.attr("boolean",{default:!1}),showComponent:Lyte.attr("boolean",{default:!1}),field:Lyte.attr("object",{default:{}}),criteria:Lyte.attr("object",{default:{}}),selectedValue:Lyte.attr("string"),comparator:Lyte.attr("string"),eventOptions:Lyte.attr("array",{default:[]}),valueArr:Lyte.attr("array",{default:[]})}},init:function(){var e=this,t=networkUtils.returnDependencyFiles(["voc_configuration.js","voc-common-store.js"],ResourceConstants.CRMClient);Lyte.injectResources(t,void 0,(function(){Lyte.resolvePromises({voc_configuration:store.findAll("voc_configurations"),voc_sources:store.findAll("voc_source")}).then((function(t){var i=document.getElementsByTagName("crm-custom-filter")[0].component.data.module_info.api_name;t.voc_configuration.forEach((function(t){t.primary_module_configuration.module&&t.primary_module_configuration.module.api_name===i&&(e.setData("salesModulePresent",null!==t.sales_module_configuration),e.setData("inventoryModulePresent",null!==t.inventory_module_configuration))})),t.voc_sources.forEach((function(t){"calls"===t.source&&e.setData("callsPresent",t.integrated)})),e.initializeEvents(),e.data.valueArr.length>0&&e.populateSelectedEvents(e.data.valueArr),e.setData("showComponent",!0)}))}))},validate:function(){return this.getData("selectedEvents").length>0||(this.showFilterAlert(_cruxUtils.getI18n("crm.field.valid.check",this.data.field.field_label)),!1)},getValue:function(){var e=this;return e.setData("showDropDown",!0),e.setData("selectedValue",e.getData("selectedEvents")),e.getData("selectedEvents").toString()},onSelectedValueChange:function(){var e=this,t=e.getData("selectedValue");if(t&&""!==t&&!t.includes("[")){var i=t.split(",");i.length>0&&(e.setData("valueArr",i),e.populateSelectedEvents(i))}}.observes("selectedValue").on("init"),initializeEvents:function(){var e=this,t=[{header_value:I18n.getMsg("voc.churn.events"),system_value:"Churn_Events",checked:!1,allowedValues:[{display_value:I18n.getMsg("Churned Out"),actual_value:"Churned Out"}]}],i={header_value:I18n.getMsg("voc.deal.events"),system_value:"Deal_Events",checked:!1,allowedValues:[{display_value:I18n.getMsg("Deal Won"),actual_value:"Closed Won"},{display_value:I18n.getMsg("Deal Lost"),actual_value:"Closed Lost"}]},a={header_value:I18n.getMsg("Call Performance Metrics"),system_value:"Call_Performance_Metrics",checked:!1,allowedValues:[{display_value:I18n.getMsg("Resolution"),actual_value:"Resolution"},{display_value:I18n.getMsg("Commitment"),actual_value:"Commitment"}]},l={header_value:I18n.getMsg("Recommendation Events"),system_value:"Recommendation_Events",checked:!1,allowedValues:[{display_value:I18n.getMsg("Cross Sell"),actual_value:"Cross Sell - Post"}]},o={header_value:I18n.getMsg("voc.lead.events"),system_value:"Lead_Events",checked:!1,allowedValues:[{display_value:I18n.getMsg("Converted Lead"),actual_value:"Converted Lead"},{display_value:I18n.getMsg("Lead Lost"),actual_value:"Lost Lead"}]};e.setData("isLeadModule","Leads"===document.getElementsByTagName("crm-custom-filter")[0].component.data.module),e.data.isLeadModule&&t.push(o),e.data.salesModulePresent&&t.push(i),e.data.inventoryModulePresent&&t.push(l),e.data.callsPresent&&t.push(a),e.setData("vocEventGroups",t),e.setData("eventOptions",[])},populateSelectedEvents:function(e){var t=this;t.data.vocEventGroups.forEach((function(i,a){t.getsystemValues(i.allowedValues).contains(e[0])&&(i.checked=!0,Lyte.arrayUtils(t.data.vocEventGroups,"replaceAt",a,i),t.setData("allowedEvents",i.allowedValues)),t.setData("selectedEvents",e),t.setData("showDropDown",t.getData("selectedEvents").length>0)}))},getsystemValues:function(e){var t=[];return e.forEach((function(e){t.push(e.actual_value)})),t},methods:{showEvents:function(e,t){let i=this;i.setData("selectedEvents",[]),i.setData("showDropDown",!1);var a=this.getData("vocEventGroups").filter((function(e){return e.system_value===t.data.ltPropValue}));i.setData("allowedEvents",a[0].allowedValues),i.getData("vocEventGroups").forEach((function(e,a){e.system_value===t.data.ltPropValue?e.checked=!0:e.checked=!1,Lyte.arrayUtils(i.data.vocEventGroups,"replaceAt",a,e)})),i.getMethods("onValueChange")&&i.executeMethod("onValueChange",i.selectedValue)},eventsModified:function(){var e=this;e.getMethods("onValueChange")&&e.executeMethod("onValueChange",e.selectedValue)}}},{mixins:["crux-filter-utils"]});
