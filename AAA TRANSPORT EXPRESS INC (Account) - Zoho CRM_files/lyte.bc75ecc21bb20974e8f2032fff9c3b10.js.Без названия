if(function(e){"use strict";function t(){return c.createDocumentFragment()}function a(e){return c.createElement(e)}function o(e,t){if(!e)throw new Error("Failed to construct "+t+": 1 argument required, but only 0 present.")}function i(e){if(1===e.length)return r(e[0]);for(var a=t(),o=N.call(e),i=0;i<e.length;i++)a.appendChild(r(o[i]));return a}function r(e){return"string"==typeof e?c.createTextNode(e):e}for(var n,s,l,d,p,c=e.document,h=Object.prototype.hasOwnProperty,u=Object.defineProperty||function(e,t,a){return h.call(a,"value")?e[t]=a.value:(h.call(a,"get")&&e.__defineGetter__(t,a.get),h.call(a,"set")&&e.__defineSetter__(t,a.set)),e},f=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},y=function(e){var t=void 0===e.className,a=t?e.getAttribute("class")||"":e.className,o=t||"object"==typeof a,i=(o?t?a:a.baseVal:a).replace(v,"");i.length&&F.push.apply(this,i.split(b)),this._isSVG=o,this._=e},m={get:function(){return new y(this)},set:function(){}},g="dom4-tmp-".concat(Math.random()*+new Date).replace(".","-"),v=/^\s+|\s+$/g,b=/\s+/,P=function(e,t){return this.contains(e)?t||this.remove(e):(void 0===t||t)&&(t=!0,this.add(e)),!!t},D=e.DocumentFragment&&DocumentFragment.prototype,_=e.Node,L=(_||Element).prototype,C=e.CharacterData||_,w=C&&C.prototype,T=e.DocumentType,x=T&&T.prototype,S=(e.Element||_||e.HTMLElement).prototype,A=e.HTMLSelectElement||a("select").constructor,E=A.prototype.remove,M=e.ShadowRoot,$=e.SVGElement,k=/ /g,R=function(e){var t="querySelectorAll"===e;return function(a){var o,i,r,n,s,l,d=this.parentNode;if(d){for(n=(r=this.getAttribute("id")||g)===g?r:r.replace(k,"\\ "),l=a.split(","),i=0;i<l.length;i++)l[i]="#"+n+" "+l[i];a=l.join(",")}if(r===g&&this.setAttribute("id",r),s=(d||this)[e](a),r===g&&this.removeAttribute("id"),t)for(i=s.length,o=new Array(i);i--;)o[i]=s[i];else o=s;return o}},O=function(e){"query"in e||(e.query=S.query),"queryAll"in e||(e.queryAll=S.queryAll)},F=["matches",S.matchesSelector||S.webkitMatchesSelector||S.khtmlMatchesSelector||S.mozMatchesSelector||S.msMatchesSelector||S.oMatchesSelector||function(e){var t=this.parentNode;return!!t&&-1<f.call(t.querySelectorAll(e),this)},"closest",function(e){for(var t,a=this;(t=a&&a.matches)&&!a.matches(e);)a=a.parentNode;return t?a:null},"prepend",function(){var e=this.firstChild,t=i(arguments);e?this.insertBefore(t,e):this.appendChild(t)},"append",function(){this.appendChild(i(arguments))},"before",function(){var e=this.parentNode;e&&e.insertBefore(i(arguments),this)},"after",function(){var e=this.parentNode,t=this.nextSibling,a=i(arguments);e&&(t?e.insertBefore(a,t):e.appendChild(a))},"replace",function(){this.replaceWith.apply(this,arguments)},"replaceWith",function(){var e=this.parentNode;e&&e.replaceChild(i(arguments),this)},"remove",function(){var e=this.parentNode;e&&e.removeChild(this)},"query",R("querySelector"),"queryAll",R("querySelectorAll")],N=F.slice,I=F.length;I;I-=2)if((s=F[I-2])in S||(S[s]=F[I-1]),"remove"===s&&(A.prototype[s]=function(){return 0<arguments.length?E.apply(this,arguments):S.remove.call(this)}),/^(?:before|after|replace|replaceWith|remove)$/.test(s)&&(!C||s in w||(w[s]=F[I-1]),!T||s in x||(x[s]=F[I-1])),/^(?:append|prepend)$/.test(s))if(D)s in D||(D[s]=F[I-1]);else try{t().constructor.prototype[s]=F[I-1]}catch(e){}if(O(c),D)O(D);else try{O(t().constructor.prototype)}catch(e){}var B;M&&O(M.prototype),a("a").matches("a")||(S[s]=(B=S[s],function(e){return B.call(this.parentNode?this:t().appendChild(this),e)})),y.prototype={length:0,add:function(){for(var e,t=0;t<arguments.length;t++)e=arguments[t],this.contains(e)||F.push.call(this,s);this._isSVG?this._.setAttribute("class",""+this):this._.className=""+this},contains:function(e){return function(t){return-1<(I=e.call(this,s=function(e){if(!e)throw"SyntaxError";if(b.test(e))throw"InvalidCharacterError";return e}(t)))}}([].indexOf||function(e){for(I=this.length;I--&&this[I]!==e;);return I}),item:function(e){return this[e]||null},remove:function(){for(var e,t=0;t<arguments.length;t++)e=arguments[t],this.contains(e)&&F.splice.call(this,I,1);this._isSVG?this._.setAttribute("class",""+this):this._.className=""+this},toggle:P,toString:function(){return F.join.call(this," ")}},!$||"classList"in $.prototype||u($.prototype,"classList",m),"classList"in c.documentElement?((d=a("div").classList).add("a","b","a"),"a b"!=d&&("add"in(l=d.constructor.prototype)||(l=e.TemporaryTokenList.prototype),p=function(e){return function(){for(var t=0;t<arguments.length;)e.call(this,arguments[t++])}},l.add=p(l.add),l.remove=p(l.remove),l.toggle=P)):u(S,"classList",m),"contains"in L||u(L,"contains",{value:function(e){for(;e&&e!==this;)e=e.parentNode;return this===e}}),"head"in c||u(c,"head",{get:function(){return n||(n=c.getElementsByTagName("head")[0])}}),function(){for(var t,a=e.requestAnimationFrame,o=e.cancelAnimationFrame,i=["o","ms","moz","webkit"],r=i.length;!o&&r--;)a=a||e[i[r]+"RequestAnimationFrame"],o=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];o||(a?(t=a,a=function(e){var a=!0;return t((function(){a&&e.apply(this,arguments)})),function(){a=!1}},o=function(e){e()}):(a=function(e){return setTimeout(e,15,15)},o=function(e){clearTimeout(e)})),e.requestAnimationFrame=a,e.cancelAnimationFrame=o}();try{new e.CustomEvent("?")}catch(t){e.CustomEvent=function(e,t){function a(e,t,a,o){this.initEvent(e,t,a),this.detail=o}return function(o,i){var r=c.createEvent(e);if("string"!=typeof o)throw new Error("An event name must be provided");return"Event"==e&&(r.initCustomEvent=a),null==i&&(i=t),r.initCustomEvent(o,i.bubbles,i.cancelable,i.detail),r}}(e.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}try{new Event("_")}catch(t){if(t=function(e){function t(e,t){o(arguments.length,"Event");var a=c.createEvent("Event");return t||(t={}),a.initEvent(e,!!t.bubbles,!!t.cancelable),a}return t.prototype=e.prototype,t}(e.Event||function(){}),e.Event){var H=e.Event;Object.keys(H).forEach((function(e,a){t[e]=H[e]}))}u(e,"Event",{value:t}),Event!==t&&(Event=t)}try{new KeyboardEvent("_",{})}catch(t){t=function(t){var a,i=0,r={char:"",key:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,repeat:!1,locale:navigator.language,detail:0,bubbles:!1,cancelable:!1,keyCode:0,charCode:0,which:0};try{var n=c.createEvent("KeyboardEvent");n.initKeyboardEvent("keyup",!1,!1,e,"+",3,!0,!1,!0,!1,!1),i="+"==(n.keyIdentifier||n.key)&&3==(n.keyLocation||n.location)&&(n.ctrlKey?n.altKey?1:3:n.shiftKey?2:4)||9}catch(e){}function s(e,t,a){try{t[e]=a[e]}catch(e){}}function l(t,n){o(arguments.length,"KeyboardEvent"),n=function(e,t){for(var a in t)t.hasOwnProperty(a)&&!t.hasOwnProperty.call(e,a)&&(e[a]=t[a]);return e}(n||{},r);var l,d=c.createEvent(a),p=n.ctrlKey,h=n.shiftKey,u=n.altKey,f=n.metaKey,y=n.altGraphKey,m=i>3?function(e){for(var t=[],a=["ctrlKey","Control","shiftKey","Shift","altKey","Alt","metaKey","Meta","altGraphKey","AltGraph"],o=0;o<a.length;o+=2)e[a[o]]&&t.push(a[o+1]);return t.join(" ")}(n):null,g=String(n.key),v=String(n.char),b=n.location,P=n.keyCode||(n.keyCode=g)&&g.charCodeAt(0)||0,D=n.charCode||(n.charCode=v)&&v.charCodeAt(0)||0,_=n.bubbles,L=n.cancelable,C=n.repeat,w=n.locale,T=n.view||e;if(n.which||(n.which=n.keyCode),"initKeyEvent"in d)d.initKeyEvent(t,_,L,T,p,u,h,f,P,D);else if(0<i&&"initKeyboardEvent"in d){switch(l=[t,_,L,T],i){case 1:l.push(g,b,p,h,u,f,y);break;case 2:l.push(p,u,h,f,P,D);break;case 3:l.push(g,b,p,u,h,f,y);break;case 4:l.push(g,b,m,C,w);break;default:l.push(char,g,b,m,C,w)}d.initKeyboardEvent.apply(d,l)}else d.initEvent(t,_,L);for(g in d)r.hasOwnProperty(g)&&d[g]!==n[g]&&s(g,d,n);return d}return a=0<i?"KeyboardEvent":"Event",l.prototype=t.prototype,l}(e.KeyboardEvent||function(){}),u(e,"KeyboardEvent",{value:t}),KeyboardEvent!==t&&(KeyboardEvent=t)}try{new MouseEvent("_",{})}catch(t){t=function(t){function a(t,a){o(arguments.length,"MouseEvent");var i=c.createEvent("MouseEvent");return a||(a={}),i.initMouseEvent(t,!!a.bubbles,!!a.cancelable,a.view||e,a.detail||1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,!!a.ctrlKey,!!a.altKey,!!a.shiftKey,!!a.metaKey,a.button||0,a.relatedTarget||null),i}return a.prototype=t.prototype,a}(e.MouseEvent||function(){}),u(e,"MouseEvent",{value:t}),MouseEvent!==t&&(MouseEvent=t)}}(window),function(e){function t(e,t){function a(e){if(!this||this.constructor!==a)return new a(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&function(e){this.add?e.forEach(this.add,this):e.forEach((function(e){this.set(e[0],e[1])}),this)}.call(this,e)}return t||y(e,"size",{get:h}),e.constructor=a,a.prototype=e,a}function a(e){return this.has(e)&&(this._keys.splice(f,1),this._values.splice(f,1),this._itp.forEach((function(e){f<e[0]&&e[0]--}))),-1<f}function o(e){return this.has(e)?this._values[f]:void 0}function i(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(f=e.length;f--&&!m(e[f],t););else f=e.indexOf(t);return-1<f}function r(e){return i.call(this,this._values,e)}function n(e){return i.call(this,this._keys,e)}function s(e,t){return this.has(e)?this._values[f]=t:this._values[this._keys.push(e)-1]=t,this}function l(e){return this.has(e)||this._values.push(e),this}function d(){(this._keys||0).length=this._values.length=0}function p(){return c(this._itp,this._values)}function c(e,t,a){var o=[0],i=!1;return e.push(o),{next:function(){var r,n=o[0];return!i&&n<t.length?(r=a?[t[n],a[n]]:t[n],o[0]++):(i=!0,e.splice(e.indexOf(o),1)),{done:i,value:r}}}}function h(){return this._values.length}function u(e,t){for(var a=this.entries();;){var o=a.next();if(o.done)break;e.call(t,o.value[1],o.value[0],this)}}var f,y=Object.defineProperty,m=function(e,t){return isNaN(e)?isNaN(t):e===t};"undefined"==typeof WeakMap&&(e.WeakMap=t({delete:a,clear:d,get:o,has:n,set:s},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=t({delete:a,has:n,get:o,set:s,keys:function(){return c(this._itp,this._keys)},values:p,entries:function(){return c(this._itp,this._keys,this._values)},forEach:u,clear:d})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=t({has:r,add:l,delete:a,clear:d,keys:p,values:p,entries:function(){return c(this._itp,this._values,this._values)},forEach:u})),"undefined"==typeof WeakSet&&(e.WeakSet=t({delete:a,add:l,clear:d,has:r},!0))}("undefined"!=typeof exports&&"undefined"!=typeof global?global:window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,(function(){"use strict";function e(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(a,1)}}function a(){for(var e=0;e<P;e+=2)(0,A[e])(A[e+1]),A[e]=void 0,A[e+1]=void 0;P=0}function o(e,t){var a=arguments,o=this,i=new this.constructor(r);void 0===i[M]&&m(i);var n=o._state;return n?function(){var e=a[n-1];L((function(){return y(n,i,e,o._result)}))}():h(o,i,e,t),i}function i(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(r);return l(t,e),t}function r(){}function n(e){try{return e.then}catch(e){return O.error=e,O}}function s(t,a,r){a.constructor===t.constructor&&r===o&&a.constructor.resolve===i?function(e,t){t._state===k?p(e,t._result):t._state===R?c(e,t._result):h(t,void 0,(function(t){return l(e,t)}),(function(t){return c(e,t)}))}(t,a):r===O?(c(t,O.error),O.error=null):void 0===r?p(t,a):e(r)?function(e,t,a){L((function(e){var o=!1,i=function(e,t,a,o){try{e.call(t,a,o)}catch(e){return e}}(a,t,(function(a){o||(o=!0,t!==a?l(e,a):p(e,a))}),(function(t){o||(o=!0,c(e,t))}),e._label);!o&&i&&(o=!0,c(e,i))}),e)}(t,a,r):p(t,a)}function l(e,t){e===t?c(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?s(e,t,n(t)):p(e,t)}function d(e){e._onerror&&e._onerror(e._result),u(e)}function p(e,t){e._state===$&&(e._result=t,e._state=k,0!==e._subscribers.length&&L(u,e))}function c(e,t){e._state===$&&(e._state=R,e._result=t,L(d,e))}function h(e,t,a,o){var i=e._subscribers,r=i.length;e._onerror=null,i[r]=t,i[r+k]=a,i[r+R]=o,0===r&&e._state&&L(u,e)}function u(e){var t=e._subscribers,a=e._state;if(0!==t.length){for(var o=void 0,i=void 0,r=e._result,n=0;n<t.length;n+=3)o=t[n],i=t[n+a],o?y(a,o,i,r):i(r);e._subscribers.length=0}}function f(){this.error=null}function y(t,a,o,i){var r=e(o),n=void 0,s=void 0,d=void 0,h=void 0;if(r){if((n=function(e,t){try{return e(t)}catch(e){return F.error=e,F}}(o,i))===F?(h=!0,s=n.error,n.error=null):d=!0,a===n)return void c(a,new TypeError("A promises callback cannot return that same promise."))}else n=i,d=!0;a._state!==$||(r&&d?l(a,n):h?c(a,s):t===k?p(a,n):t===R&&c(a,n))}function m(e){e[M]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}function g(e,t){this._instanceConstructor=e,this.promise=new e(r),this.promise[M]||m(this.promise),b(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&p(this.promise,this._result))):c(this.promise,new Error("Array Methods must be provided an Array"))}function v(e){this[M]=N++,this._result=this._state=void 0,this._subscribers=[],r!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof v?function(e,t){try{t((function(t){l(e,t)}),(function(t){c(e,t)}))}catch(t){c(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var b=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},P=0,D=void 0,_=void 0,L=function(e,t){A[P]=e,A[P+1]=t,2===(P+=2)&&(_?_(a):E())},C="undefined"!=typeof window?window:void 0,w=C||{},T=w.MutationObserver||w.WebKitMutationObserver,x="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),S="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,A=new Array(1e3),E=void 0;E=x?function(){return process.nextTick(a)}:T?function(){var e=0,t=new T(a),o=document.createTextNode("");return t.observe(o,{characterData:!0}),function(){o.data=e=++e%2}}():S?function(){var e=new MessageChannel;return e.port1.onmessage=a,function(){return e.port2.postMessage(0)}}():void 0===C&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(D=e.runOnLoop||e.runOnContext)?function(){D(a)}:t()}catch(e){return t()}}():t();var M=Math.random().toString(36).substring(16),$=void 0,k=1,R=2,O=new f,F=new f,N=0;return g.prototype._enumerate=function(e){for(var t=0;this._state===$&&t<e.length;t++)this._eachEntry(e[t],t)},g.prototype._eachEntry=function(e,t){var a=this._instanceConstructor,l=a.resolve;if(l===i){var d=n(e);if(d===o&&e._state!==$)this._settledAt(e._state,t,e._result);else if("function"!=typeof d)this._remaining--,this._result[t]=e;else if(a===v){var p=new a(r);s(p,e,d),this._willSettleAt(p,t)}else this._willSettleAt(new a((function(t){return t(e)})),t)}else this._willSettleAt(l(e),t)},g.prototype._settledAt=function(e,t,a){var o=this.promise;o._state===$&&(this._remaining--,e===R?c(o,a):this._result[t]=a),0===this._remaining&&p(o,this._result)},g.prototype._willSettleAt=function(e,t){var a=this;h(e,void 0,(function(e){return a._settledAt(k,t,e)}),(function(e){return a._settledAt(R,t,e)}))},v.all=function(e){return new g(this,e).promise},v.race=function(e){var t=this;return new t(b(e)?function(a,o){for(var i=e.length,r=0;r<i;r++)t.resolve(e[r]).then(a,o)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},v.resolve=i,v.reject=function(e){var t=new this(r);return c(t,e),t},v._setScheduler=function(e){_=e},v._setAsap=function(e){L=e},v._asap=L,v.prototype={constructor:v,then:o,catch:function(e){return this.then(null,e)}},v.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var a=null;try{a=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===a&&!t.cast)return}e.Promise=v},v.Promise=v,v})),void 0===window.Promise&&(window.Promise=window.ES6Promise),function(e){"use strict";var t;if((t=document.createEvent("Event")).initEvent("foo",!0,!0),t.preventDefault(),!t.defaultPrevented){var a=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(a.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var o=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||o&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),a},window.CustomEvent.prototype=window.Event.prototype),!window.Event||o&&"function"!=typeof window.Event){var i=window.Event;if(window.Event=function(e,t){t=t||{};var a=document.createEvent("Event");return a.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),a},i)for(var r in i)window.Event[r]=i[r];window.Event.prototype=i.prototype}if(!window.MouseEvent||o&&"function"!=typeof window.MouseEvent){var n=window.MouseEvent;if(window.MouseEvent=function(e,t){t=t||{};var a=document.createEvent("MouseEvent");return a.initMouseEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.view||window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),a},n)for(var r in n)window.MouseEvent[r]=n[r];window.MouseEvent.prototype=n.prototype}if(Array.from||(Array.from=function(e){return[].slice.call(e)}),!Object.assign){var s=function(e,t){for(var a,o=Object.keys(t),i=0;i<o.length;i++)e[a=o[i]]=t[a]};Object.assign=function(e,t){for(var a,o=[].slice.call(arguments,1),i=0;i<o.length;i++)(a=o[i])&&s(e,a);return e}}}(window.WebComponents),function(){var e="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&function(){var e=Document.prototype.importNode;Document.prototype.importNode=function(){var t=e.apply(this,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var a=this.createDocumentFragment();return a.appendChild(t),a}return t}}();var t=Node.prototype.cloneNode,a=Document.prototype.createElement,o=Document.prototype.importNode,i=function(){if(!e){var t=document.createElement("template"),a=document.createElement("template");a.content.appendChild(document.createElement("div")),t.content.appendChild(a);var o=t.cloneNode(!0);return 0===o.content.childNodes.length||0===o.content.firstChild.content.childNodes.length||!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment)}}(),r=function(){};if(e){var n=document.implementation.createHTMLDocument("template"),s=!0,l=document.createElement("style");l.textContent="template{display:none;}";var d=document.head;d.insertBefore(l,d.firstElementChild),r.prototype=Object.create(HTMLElement.prototype);var p=!document.createElement("div").hasOwnProperty("innerHTML");function c(e){Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",t=this.content.firstChild;t;t=t.nextSibling)e+=t.outerHTML||t.data.replace(h,u);return e},set:function(e){for(n.body.innerHTML=e,r.bootstrap(n);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;n.body.firstChild;)this.content.appendChild(n.body.firstChild)},configurable:!0})}r.decorate=function(e){if(!e.content){var t;for(e.content=n.createDocumentFragment();t=e.firstChild;)e.content.appendChild(t);if(p)e.__proto__=r.prototype;else if(e.cloneNode=function(e){return r._cloneNode(this,e)},s)try{c(e)}catch(e){s=!1}r.bootstrap(e.content)}},c(r.prototype),r.bootstrap=function(e){for(var t,a=e.querySelectorAll("template"),o=0,i=a.length;o<i&&(t=a[o]);o++)r.decorate(t)},document.addEventListener("DOMContentLoaded",(function(){r.bootstrap(document)})),Document.prototype.createElement=function(){"use strict";var e=a.apply(this,arguments);return"template"===e.localName&&r.decorate(e),e};var h=/[&\u00A0<>]/g;function u(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"Â ":return"&nbsp;"}}}(e||i)&&(r._cloneNode=function(e,a){var o=t.call(e,!1);return this.decorate&&this.decorate(o),a&&(o.content.appendChild(t.call(e.content,!0)),this.fixClonedDom(o.content,e.content)),o},r.prototype.cloneNode=function(e){return r._cloneNode(this,e)},r.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var a,o,i=t.querySelectorAll("template"),r=e.querySelectorAll("template"),n=0,s=r.length;n<s;n++)o=i[n],a=r[n],this.decorate&&this.decorate(o),a.parentNode.replaceChild(o.cloneNode(!0),a)},Node.prototype.cloneNode=function(e){var a;if(this instanceof DocumentFragment){if(!e)return this.ownerDocument.createDocumentFragment();a=this.ownerDocument.importNode(this,!0)}else a=t.call(this,e);return e&&r.fixClonedDom(a,this),a},Document.prototype.importNode=function(e,t){if("template"===e.localName)return r._cloneNode(e,t);var a=o.call(this,e,t);return t&&r.fixClonedDom(a,e),a},i&&(window.HTMLTemplateElement.prototype.cloneNode=function(e){return r._cloneNode(this,e)})),e&&(window.HTMLTemplateElement=r)}(),function(){"use strict";var e=new function(){},t=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function a(e){var a=t.has(e);return e=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(e),!a&&e}function o(e){var t=e.isConnected;if(void 0!==t)return t;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function i(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function r(e,t,a){a=a||new Set;for(var o=e;o;){if(o.nodeType===Node.ELEMENT_NODE){var n=o;t(n);var s=n.localName;if("link"===s&&"import"===n.getAttribute("rel")){if((o=n.import)instanceof Node&&!a.has(o))for(a.add(o),o=o.firstChild;o;o=o.nextSibling)r(o,t,a);o=i(e,n);continue}if("template"===s){o=i(e,n);continue}if(n=n.__CE_shadowRoot)for(n=n.firstChild;n;n=n.nextSibling)r(n,t,a)}o=o.firstChild?o.firstChild:i(e,o)}}function n(e,t,a){e[t]=a}function s(){this.a=new Map,this.o=new Map,this.f=[],this.b=!1}function l(e,t){e.b=!0,e.f.push(t)}function d(e,t){e.b&&r(t,(function(t){return p(e,t)}))}function p(e,t){if(e.b&&!t.__CE_patched){t.__CE_patched=!0;for(var a=0;a<e.f.length;a++)e.f[a](t)}}function c(e,t){var a=[];for(r(t,(function(e){return a.push(e)})),t=0;t<a.length;t++){var o=a[t];1===o.__CE_state?e.connectedCallback(o):f(e,o)}}function h(e,t){var a=[];for(r(t,(function(e){return a.push(e)})),t=0;t<a.length;t++){var o=a[t];1===o.__CE_state&&e.disconnectedCallback(o)}}function u(e,t,a){var o=(a=a||{}).w||new Set,i=a.s||function(t){return f(e,t)},n=[];if(r(t,(function(t){if("link"===t.localName&&"import"===t.getAttribute("rel")){var a=t.import;a instanceof Node&&(a.__CE_isImportDocument=!0,a.__CE_hasRegistry=!0),a&&"complete"===a.readyState?a.__CE_documentLoadHandled=!0:t.addEventListener("load",(function(){var a=t.import;if(!a.__CE_documentLoadHandled){a.__CE_documentLoadHandled=!0;var r=new Set(o);r.delete(a),u(e,a,{w:r,s:i})}}))}else n.push(t)}),o),e.b)for(t=0;t<n.length;t++)p(e,n[t]);for(t=0;t<n.length;t++)i(n[t])}function f(e,t){if(void 0===t.__CE_state){var a=t.ownerDocument;if((a.defaultView||a.__CE_isImportDocument&&a.__CE_hasRegistry)&&(a=e.a.get(t.localName))){a.constructionStack.push(t);var i=a.constructor;try{try{if(new i!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{a.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=a,a.attributeChangedCallback)for(a=a.observedAttributes,i=0;i<a.length;i++){var r=a[i],n=t.getAttribute(r);null!==n&&e.attributeChangedCallback(t,r,null,n,null)}o(t)&&e.connectedCallback(t)}}}function y(e,t){this.c=e,this.a=t,this.b=void 0,u(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function m(e){e.b&&e.b.disconnect()}function g(){var e=this;this.b=this.a=void 0,this.f=new Promise((function(t){e.b=t,e.a&&t(e.a)}))}function v(e){if(e.a)throw Error("Already resolved.");e.a=void 0,e.b&&e.b(void 0)}function b(e){this.i=!1,this.c=e,this.m=new Map,this.j=function(e){return e()},this.g=!1,this.l=[],this.u=new y(e,document)}s.prototype.connectedCallback=function(e){var t=e.__CE_definition;t.connectedCallback&&t.connectedCallback.call(e)},s.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;t.disconnectedCallback&&t.disconnectedCallback.call(e)},s.prototype.attributeChangedCallback=function(e,t,a,o,i){var r=e.__CE_definition;r.attributeChangedCallback&&-1<r.observedAttributes.indexOf(t)&&r.attributeChangedCallback.call(e,t,a,o,i)},y.prototype.f=function(e){var t=this.a.readyState;for("interactive"!==t&&"complete"!==t||m(this),t=0;t<e.length;t++)for(var a=e[t].addedNodes,o=0;o<a.length;o++)u(this.c,a[o])},b.prototype.define=function(e,t){var o,i,r,n,s,l=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!a(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(this.c.a.get(e))throw Error("A custom element with name '"+e+"' has already been defined.");if(this.i)throw Error("A custom element is already being defined.");this.i=!0;try{var d=function(e){var t=p[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},p=t.prototype;if(!(p instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");o=d("connectedCallback"),i=d("disconnectedCallback"),r=d("adoptedCallback"),n=d("attributeChangedCallback"),s=t.observedAttributes||[]}catch(e){return}finally{this.i=!1}t={localName:e,constructor:t,connectedCallback:o,disconnectedCallback:i,adoptedCallback:r,attributeChangedCallback:n,observedAttributes:s,constructionStack:[]},function(e,t,a){e.a.set(t,a),e.o.set(a.constructor,a)}(this.c,e,t),this.l.push(t),this.g||(this.g=!0,this.j((function(){return function(e){if(!1!==e.g){e.g=!1;for(var t=e.l,a=[],o=new Map,i=0;i<t.length;i++)o.set(t[i].localName,[]);for(u(e.c,document,{s:function(t){if(void 0===t.__CE_state){var i=t.localName,r=o.get(i);r?r.push(t):e.c.a.get(i)&&a.push(t)}}}),i=0;i<a.length;i++)f(e.c,a[i]);for(;0<t.length;){i=(r=t.shift()).localName;for(var r=o.get(r.localName),n=0;n<r.length;n++)f(e.c,r[n]);(i=e.m.get(i))&&v(i)}}}(l)})))},b.prototype.get=function(e){if(e=this.c.a.get(e))return e.constructor},b.prototype.whenDefined=function(e){if(!a(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.m.get(e);return t||(t=new g,this.m.set(e,t),this.c.a.get(e)&&!this.l.some((function(t){return t.localName===e}))&&v(t)),t.f},b.prototype.v=function(e){m(this.u);var t=this.j;this.j=function(a){return e((function(){return t(a)}))}},window.CustomElementRegistry=b,b.prototype.define=b.prototype.define,b.prototype.get=b.prototype.get,b.prototype.whenDefined=b.prototype.whenDefined,b.prototype.polyfillWrapFlushCallback=b.prototype.v;var P=window.Document.prototype.createElement,D=window.Document.prototype.createElementNS,_=window.Document.prototype.importNode,L=window.Document.prototype.prepend,C=window.Document.prototype.append,w=window.DocumentFragment.prototype.prepend,T=window.DocumentFragment.prototype.append,x=window.Node.prototype.cloneNode,S=window.Node.prototype.appendChild,A=window.Node.prototype.insertBefore,E=window.Node.prototype.removeChild,M=window.Node.prototype.replaceChild,$=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),k=window.Element.prototype.attachShadow,R=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),O=window.Element.prototype.getAttribute,F=window.Element.prototype.setAttribute,N=window.Element.prototype.removeAttribute,I=window.Element.prototype.getAttributeNS,B=window.Element.prototype.setAttributeNS,H=window.Element.prototype.removeAttributeNS,U=window.Element.prototype.insertAdjacentElement,V=window.Element.prototype.prepend,j=window.Element.prototype.append,q=window.Element.prototype.before,Y=window.Element.prototype.after,z=window.Element.prototype.replaceWith,W=window.Element.prototype.remove,K=window.HTMLElement,G=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),J=window.HTMLElement.prototype.insertAdjacentElement;function X(e,t,a){function i(t){return function(a){for(var i=[],r=0;r<arguments.length;++r)i[r-0]=arguments[r];r=[];for(var n=[],s=0;s<i.length;s++){var l=i[s];if(l instanceof Element&&o(l)&&n.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)r.push(l);else r.push(l)}for(t.apply(this,i),i=0;i<n.length;i++)h(e,n[i]);if(o(this))for(i=0;i<r.length;i++)(n=r[i])instanceof Element&&c(e,n)}}a.h&&(t.prepend=i(a.h)),a.append&&(t.append=i(a.append))}var Q,Z=window.customElements;if(!Z||Z.forcePolyfill||"function"!=typeof Z.define||"function"!=typeof Z.get){var ee=new s;Q=ee,window.HTMLElement=function(){function t(){var t=this.constructor;if(!(o=Q.o.get(t)))throw Error("The custom element being constructed was not registered with `customElements`.");var a=o.constructionStack;if(!a.length)return a=P.call(document,o.localName),Object.setPrototypeOf(a,t.prototype),a.__CE_state=1,a.__CE_definition=o,p(Q,a),a;var o,i=a[o=a.length-1];if(i===e)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return a[o]=e,Object.setPrototypeOf(i,t.prototype),p(Q,i),i}return t.prototype=K.prototype,t}(),function(){var e=ee;n(Document.prototype,"createElement",(function(t){if(this.__CE_hasRegistry){var a=e.a.get(t);if(a)return new a.constructor}return t=P.call(this,t),p(e,t),t})),n(Document.prototype,"importNode",(function(t,a){return t=_.call(this,t,a),this.__CE_hasRegistry?u(e,t):d(e,t),t})),n(Document.prototype,"createElementNS",(function(t,a){if(this.__CE_hasRegistry&&(null===t||"http://www.w3.org/1999/xhtml"===t)){var o=e.a.get(a);if(o)return new o.constructor}return t=D.call(this,t,a),p(e,t),t})),X(e,Document.prototype,{h:L,append:C})}(),X(ee,DocumentFragment.prototype,{h:w,append:T}),function(){var e=ee;function t(t,a){Object.defineProperty(t,"textContent",{enumerable:a.enumerable,configurable:!0,get:a.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)a.set.call(this,t);else{var i=void 0;if(this.firstChild){var r=this.childNodes,n=r.length;if(0<n&&o(this)){i=Array(n);for(var s=0;s<n;s++)i[s]=r[s]}}if(a.set.call(this,t),i)for(t=0;t<i.length;t++)h(e,i[t])}}})}n(Node.prototype,"insertBefore",(function(t,a){if(t instanceof DocumentFragment){var i=Array.prototype.slice.apply(t.childNodes);if(t=A.call(this,t,a),o(this))for(a=0;a<i.length;a++)c(e,i[a]);return t}return i=o(t),a=A.call(this,t,a),i&&h(e,t),o(this)&&c(e,t),a})),n(Node.prototype,"appendChild",(function(t){if(t instanceof DocumentFragment){var a=Array.prototype.slice.apply(t.childNodes);if(t=S.call(this,t),o(this))for(var i=0;i<a.length;i++)c(e,a[i]);return t}return a=o(t),i=S.call(this,t),a&&h(e,t),o(this)&&c(e,t),i})),n(Node.prototype,"cloneNode",(function(t,a){return t=x.call(this,t),a||(this.ownerDocument.__CE_hasRegistry?u(e,t):d(e,t)),t})),n(Node.prototype,"removeChild",(function(t){var a=o(t),i=E.call(this,t);return a&&h(e,t),i})),n(Node.prototype,"replaceChild",(function(t,a){if(t instanceof DocumentFragment){var i=Array.prototype.slice.apply(t.childNodes);if(t=M.call(this,t,a),o(this))for(h(e,a),a=0;a<i.length;a++)c(e,i[a]);return t}i=o(t);var r=M.call(this,t,a),n=o(this);return n&&h(e,a),i&&h(e,t),n&&c(e,t),r})),$&&$.get?t(Node.prototype,$):l(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=0;t<this.childNodes.length;t++)e.push(this.childNodes[t].textContent);return e.join("")},set:function(e){for(;this.firstChild;)E.call(this,this.firstChild);S.call(this,document.createTextNode(e))}})}))}(),function(){var e=ee;function t(t,a){Object.defineProperty(t,"innerHTML",{enumerable:a.enumerable,configurable:!0,get:a.get,set:function(t){var i=this,n=void 0;if(o(this)&&(n=[],r(this,(function(e){e!==i&&n.push(e)}))),a.set.call(this,t),n)for(var s=0;s<n.length;s++){var l=n[s];1===l.__CE_state&&e.disconnectedCallback(l)}return this.ownerDocument.__CE_hasRegistry?u(e,this):d(e,this),t}})}function a(t,a){n(t,"insertAdjacentElement",(function(t,i){var r=o(i);return t=a.call(this,t,i),r&&h(e,i),o(t)&&c(e,i),t}))}k&&n(Element.prototype,"attachShadow",(function(e){return this.__CE_shadowRoot=k.call(this,e)})),R&&R.get?t(Element.prototype,R):G&&G.get?t(HTMLElement.prototype,G):l(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return x.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName,a=t?this.content:this,o=P.call(document,this.localName);for(o.innerHTML=e;0<a.childNodes.length;)E.call(a,a.childNodes[0]);for(e=t?o.content:o;0<e.childNodes.length;)S.call(a,e.childNodes[0])}})})),n(Element.prototype,"setAttribute",(function(t,a){if(1!==this.__CE_state)return F.call(this,t,a);var o=O.call(this,t);F.call(this,t,a),a=O.call(this,t),e.attributeChangedCallback(this,t,o,a,null)})),n(Element.prototype,"setAttributeNS",(function(t,a,o){if(1!==this.__CE_state)return B.call(this,t,a,o);var i=I.call(this,t,a);B.call(this,t,a,o),o=I.call(this,t,a),e.attributeChangedCallback(this,a,i,o,t)})),n(Element.prototype,"removeAttribute",(function(t){if(1!==this.__CE_state)return N.call(this,t);var a=O.call(this,t);N.call(this,t),null!==a&&e.attributeChangedCallback(this,t,a,null,null)})),n(Element.prototype,"removeAttributeNS",(function(t,a){if(1!==this.__CE_state)return H.call(this,t,a);var o=I.call(this,t,a);H.call(this,t,a);var i=I.call(this,t,a);o!==i&&e.attributeChangedCallback(this,a,o,i,t)})),J?a(HTMLElement.prototype,J):U?a(Element.prototype,U):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),X(e,Element.prototype,{h:V,append:j}),function(e){var t=Element.prototype;function a(t){return function(a){for(var i=[],r=0;r<arguments.length;++r)i[r-0]=arguments[r];r=[];for(var n=[],s=0;s<i.length;s++){var l=i[s];if(l instanceof Element&&o(l)&&n.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)r.push(l);else r.push(l)}for(t.apply(this,i),i=0;i<n.length;i++)h(e,n[i]);if(o(this))for(i=0;i<r.length;i++)(n=r[i])instanceof Element&&c(e,n)}}q&&(t.before=a(q)),q&&(t.after=a(Y)),z&&n(t,"replaceWith",(function(t){for(var a=[],i=0;i<arguments.length;++i)a[i-0]=arguments[i];i=[];for(var r=[],n=0;n<a.length;n++){var s=a[n];if(s instanceof Element&&o(s)&&r.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(n=o(this),z.apply(this,a),a=0;a<r.length;a++)h(e,r[a]);if(n)for(h(e,this),a=0;a<i.length;a++)(r=i[a])instanceof Element&&c(e,r)})),W&&n(t,"remove",(function(){var t=o(this);W.call(this),t&&h(e,this)}))}(e)}(),document.__CE_hasRegistry=!0;var te=new b(ee);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:te})}}.call(self),!window.ZSEC){if(window.ZSEC||Object.defineProperty(window,"ZSEC",{value:{},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(ZSEC,"util",{value:{},writable:!1,configurable:!1,enumerable:!1}),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty;Object.defineProperty=function(t,a,o){if(e)try{return e(t,a,o)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in o&&Object.prototype.__defineGetter__.call(t,a,o.get),Object.prototype.__defineSetter__&&"set"in o&&Object.prototype.__defineSetter__.call(t,a,o.set),"value"in o&&(t[a]=o.value),t}}}(),ZSEC.util.defineProperty=function(e,t,a,o,i,r,n){if(o||!(t in e))return i=1==i,r=1==r,n=1==n,Object.defineProperty(e,t,{value:a,writable:i,configurable:r,enumerable:n})},ZSEC.util.defineProperty(ZSEC,"version","4.0",!0),ZSEC.util.defineProperty(ZSEC,"constants",ZSEC.constants||{},!0),ZSEC.util.ArrayIndexOf=Array.prototype.indexOf,ZSEC.util.ArrayIndexOf||(ZSEC.util.ArrayIndexOf=function(e){if(null==this)throw TypeError();var t=Object(this),a=t.length>>>0;if(0===a)return-1;var o=0;if(arguments.length>0&&(o=Number(arguments[1]),isNaN(o)?o=0:0!==o&&o!==1/0&&o!==-1/0&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=a)return-1;for(var i=o>=0?o:Math.max(a-Math.abs(o),0);i<a;i++)if(i in t&&t.charAt(i)===e)return i;return-1}),String.prototype.codePointAt)ZSEC.util.defineProperty(String.prototype,"codePointAt",String.prototype.codePointAt,!0);else{var codePointAt=function(e){if(null==this)throw TypeError();var t=String(this),a=t.length,o=e?Number(e):0;if(o!=o&&(o=0),!(o<0||o>=a)){var i,r=t.charCodeAt(o);return r>=55296&&r<=56319&&a>o+1&&(i=t.charCodeAt(o+1))>=56320&&i<=57343?1024*(r-55296)+i-56320+65536:r}};ZSEC.util.defineProperty(String.prototype,"codePointAt",codePointAt,!1)}if(String.fromCodePoint)ZSEC.util.defineProperty(String,"fromCodePoint",String.fromCodePoint,!0);else{var stringFromCharCode=String.fromCharCode,floor=Math.floor,fromCodePoint=function(){var e,t,a=[],o=-1,i=arguments.length;if(!i)return"";for(var r="";++o<i;){var n=Number(arguments[o]);if(!isFinite(n)||n<0||n>1114111||floor(n)!=n)throw RangeError("Invalid code point: "+n);n<=65535?a.push(n):(e=55296+((n-=65536)>>10),t=n%1024+56320,a.push(e,t)),(o+1==i||a.length>16384)&&(r+=stringFromCharCode.apply(null,a),a.length=0)}return r};ZSEC.util.defineProperty(String,"fromCodePoint",fromCodePoint,!1)}!function(){var e={log:function(e){if(navigator&&navigator.userAgent){var t=navigator.userAgent.match(/opera|chrome|safari|firefox|msie|trident(?=\/)/i);if(t&&t[0].search(/trident|msie/i)<0)return window.console.log("%cSTOP!","color:red;font-size:xx-large;font-weight:bold;"),void window.console.log("%cThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details","font-size:large;")}window.console.log("STOP!\nThis is a browser feature intended for developers. Do not enter or paste code which you don't understand. It may allow attackers to steal your information or impersonate you.\nSee https://en.wikipedia.org/wiki/Self-XSS for more details")}};ZSEC.util.defineProperty(ZSEC,"Console",e,!0,!1,!1,!0)}(),ZSEC.Console.log()}if(window.DOMPurifyCopy=window.DOMPurify?window.DOMPurify:void 0,!window.ZSEC.HTMLPurifier){function addToSet(e,t){for(var a=t.length;a--;)e[t[a]]=!0;return e}function addObjsToSet(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=!0);return e}function removeFromSet(e,t){var a={};for(var o in e)e.hasOwnProperty(o)&&o!=t&&(a[o]=e[o]);return a}window.DOMPurify=function e(t){var a=function(t){return e(t)};if(a.version="0.8.5",a.removed=[],!t||!t.document||9!==t.document.nodeType)return a.isSupported=!1,a;var o=t.document,i=o,r=t.DocumentFragment,n=t.HTMLTemplateElement,s=t.Node,l=t.NodeFilter,d=t.NamedNodeMap||t.MozNamedAttrMap,p=t.Text,c=t.Comment,h=t.DOMParser;if("function"==typeof n){var u=o.createElement("template");u.content&&u.content.ownerDocument&&(o=u.content.ownerDocument)}var f=o.implementation,y=o.createNodeIterator,m=o.getElementsByTagName,g=o.createDocumentFragment,v=i.importNode,b={};a.isSupported=void 0!==f.createHTMLDocument&&9!==o.documentMode;var P=function(e,t){for(var a=t.length;a--;)"string"==typeof t[a]&&(t[a]=t[a].toLowerCase()),e[t[a]]=!0;return e},D=null,_=P({},[]),L=null,C=P({},[]),w=null,T=null,x=!0,S=!0,A=!1,E=!1,M=!1,$=/\{\{[\s\S]*|[\s\S]*\}\}/gm,k=/<%[\s\S]*|[\s\S]*%>/gm,R=!1,O=!0,F=!1,N=!1,I=!1,B=!0,H=!0,U=P({},["audio","head","math","script","svg","video","style"]),V=P({},["audio","video","img","source","image"]),j=P({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),q=null,Y=o.createElement("form"),z=function(e){"object"!=typeof e&&(e={}),D="ALLOWED_TAGS"in e?P({},e.ALLOWED_TAGS):_,L="ALLOWED_ATTR"in e?P({},e.ALLOWED_ATTR):C,w="FORBID_TAGS"in e?P({},e.FORBID_TAGS):{},T="FORBID_ATTR"in e?P({},e.FORBID_ATTR):{},x=!1!==e.ALLOW_ARIA_ATTR,S=!1!==e.ALLOW_DATA_ATTR,A=e.ALLOW_UNKNOWN_PROTOCOLS||!1,E=e.SAFE_FOR_JQUERY||!1,M=e.SAFE_FOR_TEMPLATES||!1,R=e.WHOLE_DOCUMENT||!1,F=e.RETURN_DOM||!1,N=e.RETURN_DOM_FRAGMENT||!1,I=e.RETURN_DOM_IMPORT||!1,O=!1!==e.FORCE_BODY,B=!1!==e.SANITIZE_DOM,H=!1!==e.KEEP_CONTENT,M&&(S=!1),N&&(F=!0),e.ADD_URI_SAFE_ATTR&&P(j,e.ADD_URI_SAFE_ATTR),H&&(D["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(e),q=e},W=function(e){a.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}},K=function(e,t){a.removed.push({attribute:t.getAttributeNode(e),from:t}),t.removeAttribute(e)},G=function(e){var t,a;O&&(e="<remove></remove>"+e);try{t=(new h).parseFromString(e,"text/html")}catch(e){}return t&&t.documentElement||((a=(t=f.createHTMLDocument("")).body).parentNode.removeChild(a.parentNode.firstElementChild),a.outerHTML=e),"function"==typeof t.getElementsByTagName?t.getElementsByTagName(R?"html":"body")[0]:m.call(t,R?"html":"body")[0]},J=function(e){return y.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,(function(){return l.FILTER_ACCEPT}),!1)},X=function(e){return!(e instanceof p||e instanceof c||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof d&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute)},Q=function(e){return"object"==typeof s?e instanceof s:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Z=function(e){var t,o;if(se("beforeSanitizeElements",e,null),X(e))return W(e),!0;if(t=e.nodeName.toLowerCase(),se("uponSanitizeElement",e,{tagName:t,allowedTags:D}),!D[t]||w[t]){if(H&&!U[t]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return W(e),!0}return"style"!=t?(!E||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(a.removed.push({element:e.cloneNode()}),e.innerHTML=e.textContent.replace(/</g,"&lt;")),M&&3===e.nodeType&&(o=(o=(o=e.textContent).replace($," ")).replace(k," "),e.textContent!==o&&(a.removed.push({element:e.cloneNode()}),e.textContent=o))):!E||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(a.removed.push({element:e.cloneNode()}),e.innerHTML=e.textContent.replace(/</g,"\\3c ")),se("afterSanitizeElements",e,null),!1},ee=/^data-[-\w.\u00B7-\uFFFF]/,te=/^aria-[-\w]+$/,ae=/^(?:(?:https?|mailto|tel):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,oe=/^(?:\w+script|data):/i,ie=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,re=function(e){var t,i,r,n,s,l,d,p;if(se("beforeSanitizeAttributes",e,null),l=e.attributes){for(d={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L},p=l.length;p--;)if(i=(t=l[p]).name,r=t.value.trim(),n=i.toLowerCase(),d.attrName=n,d.attrValue=r,d.keepAttr=!0,se("uponSanitizeAttribute",e,d),r=d.attrValue,"name"===n&&"IMG"===e.nodeName&&l.id?(s=l.id,l=Array.prototype.slice.apply(l),K("id",e),K(i,e),l.indexOf(s)>p&&e.setAttribute("id",s.value)):("id"===i&&e.setAttribute(i,""),K(i,e)),d.keepAttr&&(!B||"id"!==n&&"name"!==n||!(r in o)&&!(r in Y))){if(M&&(r=(r=r.replace($," ")).replace(k," ")),S&&ee.test(n));else if(x&&te.test(n));else{if(!L[n]||T[n])continue;if(j[n]);else if(ae.test(r.replace(ie,"")));else if("src"!==n&&"xlink:href"!==n||0!==r.indexOf("data:")||!V[e.nodeName.toLowerCase()])if(A&&!oe.test(r.replace(ie,"")));else if(r)continue}try{e.setAttribute(i,r),a.removed.pop()}catch(e){}}se("afterSanitizeAttributes",e,null)}},ne=function(e){var t,a=J(e);for(se("beforeSanitizeShadowDOM",e,null);t=a.nextNode();)se("uponSanitizeShadowNode",t,null),Z(t)||(t.content instanceof r&&ne(t.content),re(t));se("afterSanitizeShadowDOM",e,null)},se=function(e,t,o){b[e]&&b[e].forEach((function(e){e.call(a,t,o,q)}))};return a.sanitize=function(e,o){var n,l,d,p,c,h;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Q(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");e=e.toString()}if(!a.isSupported){if("object"==typeof t.toStaticHTML||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Q(e))return t.toStaticHTML(e.outerHTML)}return e}if(z(o),a.removed=[],e instanceof s)1===(l=(n=G("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName?n=l:n.appendChild(l);else{if(!F&&!R&&-1===e.indexOf("<"))return e;if(!(n=G(e)))return F?null:""}for(O&&W(n.firstChild),c=J(n);d=c.nextNode();)3===d.nodeType&&d===p||Z(d)||(d.content instanceof r&&ne(d.content),re(d),p=d);if(F){if(N)for(h=g.call(n.ownerDocument);n.firstChild;)h.appendChild(n.firstChild);else h=n;return I&&(h=v.call(i,h,!0)),h}return R?n.outerHTML:n.innerHTML},a.addHook=function(e,t){"function"==typeof t&&(b[e]=b[e]||[],b[e].push(t))},a.removeHook=function(e){b[e]&&b[e].pop()},a.removeHooks=function(e){b[e]&&(b[e]=[])},a.removeAllHooks=function(){b={}},a}(window),function(e){var t={ALLOW_ARIA_ATTR:!0,ALLOW_DATA_ATTR:!0,ALLOW_UNKNOWN_PROTOCOLS:!1,SAFE_FOR_JQUERY:!1,SAFE_FOR_TEMPLATES:!1,WHOLE_DOCUMENT:!1,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_DOM_IMPORT:!1,FORCE_BODY:!0,SANITIZE_DOM:!0,KEEP_CONTENT:!0,STYLE_VALIDATION:!0,REMOVE_ONEVENTS:!0,ALLOWED_STYLE:"NONE"};t.ALLOWED_TAGS="a|abbr|acronym|address|area|article|aside|audio|b|bdi|bdo|big|blink|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|content|data|datalist|dd|decorator|del|details|dfn|dir|div|dl|dt|element|em|fieldset|figcaption|figure|font|footer|form|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|img|input|ins|kbd|label|legend|li|main|map|mark|marquee|menu|menuitem|meter|nav|nobr|ol|optgroup|option|output|p|pre|progress|q|rp|rt|ruby|s|samp|section|select|shadow|small|source|spacer|span|strike|strong|sub|summary|sup|table|tbody|td|template|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video|wbr|#text".split("|"),t.ALLOWED_ATTR="accept|action|align|alt|autocomplete|background|bgcolor|border|cellpadding|cellspacing|checked|cite|class|clear|color|cols|colspan|coords|datetime|default|dir|disabled|download|enctype|face|for|headers|height|hidden|high|href|hreflang|id|ismap|label|lang|list|loop|low|max|maxlength|media|method|min|multiple|name|noshade|novalidate|nowrap|open|optimum|pattern|placeholder|poster|preload|pubdate|radiogroup|readonly|rel|required|rev|reversed|role|rows|rowspan|spellcheck|scope|selected|shape|size|span|srclang|start|src|step|summary|tabindex|title|target|type|usemap|valign|value|width|xmlns|sandbox".split("|"),t.ALLOWED_STYLE_PROPS="azimuth|background|background-attachment|background-color|background-image|background-position|content|background-repeat|border-collapse|border-color|border-top-color|border-right-color|border-bottom-color|border-left-color|bottom|caption-side|clear|color|cue-after|cue-before|direction|display|elevation|empty-cells|float|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|height|left|letter-spacing|line-height|list-style-image|list-style-position|list-style-type|marker-offset|max-height|max-width|min-height|min-width|orphans|outline-color|overflow|page-break-after|page-break-before|page-break-inside|pause-after|pause-before|pitch|pitch-range|position|richness|right|size|speak|speak-header|speak-numeral|speak-punctuation|speech-rate|stress|table-layout|text-indent|text-transform|top|unicode-bidi|vertical-align|visibility|volume|white-space|widows|width|word-spacing|border-style|border-top-style|border-right-style|border-bottom-style|border-left-style|border-top-width|border-right-width|border-bottom-width|border-left-width|border-width|margin|margin-top|margin-right|margin-bottom|margin-left|outline-style|outline-width|padding|padding-top|padding-right|padding-bottom|padding-left|border|border-top|border-right|border-bottom|border-left|cue|list-style|marks|outline|pause|text-decoration|border-spacing|clip|counter-increment|clip|cursor|text-shadow|font|font-family|page|play-during|text-align|voice-family".split("|"),t.FORBID_TAGS=[],t.FORBID_ATTR=[],t.ALLOWED_TAGS_OBJ={},t.ALLOWED_ATTR_OBJ={},t.FORBID_TAGS_OBJ={},t.FORBID_ATTR_OBJ={},t.ADD_URI_SAFE_ATTR=[],t.EXTENDS=["GLOBAL_ATTRIBUTES","GLOBAL_TAGS","FORBID_TAGS","FORBID_ATTR","GLOBAL_APPEND_ATTRIBUTES","GLOBAL_ATTRIBUTE_RULES","ADD_URI_SAFE_ATTR","TAG_RULES"],t.TAG_RULES={a:{APPEND_ATTRIBUTES:[{NAME:"rel",VALUE:"noopener noreferrer",CRITERIA:[{NAME:"target",CONTAINS:"_blank"}]}]}},t.GLOBAL_APPEND_ATTRIBUTES=[],t.GLOBAL_ATTRIBUTE_RULES={},ZSEC.util.defineProperty(ZSEC,"HTMLPurifier",function e(t,a){function o(e){if(!e||e.constructor!==Object)return t;var a={};for(var o in t)t.hasOwnProperty(o)&&(o in e?o in L&&(1==e[o]||0==e[o]?a[o]=e[o]:a[o]=t[o]):a[o]=t[o]);return a.SAFE_FOR_TEMPLATES&&(a.ALLOW_DATA_ATTR=!1),a.RETURN_DOM_FRAGMENT&&(a.RETURN_DOM=!0),a.KEEP_CONTENT&&(a.ALLOWED_TAGS_OBJ["#text"]=!0),a}function i(e){for(var t in e)e.hasOwnProperty(t)&&e[t].constructor==String&&(e[t]&&A[t]?!0:e[t]&&("cssText"==t||/^\d.*/.test(t)||(e[t]="",T=!0)))}function r(e){for(var t=e.length-1;t>=0;t--){var a=e[t];1==a.type&&a.selectorText||8==a.type&&a.keyText?a.style&&i(a.style):4!=a.type&&7!=a.type||!a.cssRules||r(a.cssRules)}}function n(e,t){for(var a=t.length-1;a>=0;a--)1!=t[a].type&&4!=t[a].type&&7!=t[a].type||e.push(t[a].cssText)}function s(e,t,a){a=null==a?e.IS_MANDATORY:a;if(e.NAME&&!t.hasAttribute(e.NAME.toLowerCase()))return e.IS_FORBIDDEN||!a;if(e.IS_FORBIDDEN)return!1;var o=t.getAttribute(e.NAME.toLowerCase());if(null!=o||(o=""),o.constructor==String){if(e.DONT_TRIM||(o=o.trim()),e.CASE_SENSITIVE||(o=o.toLowerCase()),e.MAX_LENGTH&&o.length>e.MAX_LENGTH)return!1;if(e.MIN_LENGTH&&o.length<e.MIN_LENGTH)return!1;if(null!=e.REGEX){if(e.REGEX.constructor==RegExp&&-1==o.search(e.REGEX))return!1;if(e.REGEX.constructor==Array)for(r=0;r<e.REGEX.length;r++)if(-1==o.search(e.REGEX[r]))return!1}}if(e.LIST&&-1==e.LIST.indexOf(o))return!1;if("INTEGER"==e.TYPE||"FLOAT"==e.TYPE){var i;try{i="INTEGER"==e.TYPE?window.parseInt(o,10):window.parseFloat(o)}catch(e){return!1}if(window.isNaN(i))return!1;if(null!=e.GREATER_THAN&&i<=e.GREATER_THAN)return!1;if(null!=e.GREATER_THAN_OR_EQUAL&&i<e.GREATER_THAN_OR_EQUAL)return!1;if(null!=e.LESSER_THAN&&i>=e.LESSER_THAN)return!1;if(null!=e.LESSER_THAN_OR_EQUAL&&i>e.LESSER_THAN_OR_EQUAL)return!1;if(null!=e.EQUAL&&i!=e.EQUAL)return!1;if(null!=e.NOT_EQUAL&&i==e.NOT_EQUAL)return!1}else if(o.constructor==String){if(null!=e.STARTS_WITH&&0!=o.indexOf(e.STARTS_WITH))return!1;if(null!=e.ENDS_WITH&&o.lastIndexOf(e.ENDS_WITH)!=o.length-e.ENDS_WITH.length)return!1;if(null!=e.CONTAINS){if(e.CONTAINS.constructor==String&&-1==o.indexOf(e.CONTAINS))return!1;if(e.CONTAINS.constructor==Array)for(r=0;r<e.CONTAINS.length;r++)if(-1==o.indexOf(e.CONTAINS[r]))return!1}if(null!=e.NOT_CONTAINS){if(e.NOT_CONTAINS.constructor==String&&o.indexOf(e.NOT_CONTAINS)>-1)return!1;if(e.NOT_CONTAINS.constructor==Array)for(var r=0;r<e.NOT_CONTAINS.length;r++)if(o.indexOf(e.NOT_CONTAINS[r])>-1)return!1}if(null!=e.EQUAL&&o!==e.EQUAL)return!1;if(null!=e.NOT_EQUAL&&o===e.NOT_EQUAL)return!1}return!0}function l(e){if(!e)return e;if(e.constructor==Object)for(var t in e)e.hasOwnProperty(t)&&(e[t]=p(e[t]));return e}function d(e){if(!e)return e;if(e.constructor==Array)for(var t=0;t<e.length;t++)if(e[t].CRITERIA)for(var a=0;a<e[t].CRITERIA.length;a++)e[t].CRITERIA[a]=p(e[t].CRITERIA[a]);return e}function p(e){if(e){var t=["STARTS_WITH","ENDS_WITH","CONTAINS","EQUAL","NOT_EQUAL","LIST"];if(!e.CASE_SENSITIVE)for(var a=0;a<t.length;a++){var o=t[a];e[o]&&(e[o]=c(e[o]))}}return e}function c(e){if(e&&e.constructor==String)return e.toLowerCase();if(e.constructor==Array)for(var t=0;t<e.length;t++)e[t]=c(e[t]);return e}function h(e,t){if(!e||e.constructor==Object)return e;for(var a={},o=0;o<e.length;o++){var i=e[o];a[i[t]]=i}return a}function u(e,t){if(e)for(var a=0;a<e.length;a++){var o=e[a];if(!t.hasAttribute(o.NAME.toLowerCase())){var i=!0;if(o.CRITERIA)for(var r=0;r<o.CRITERIA.length;r++)if(!s(o.CRITERIA[r],t,!0)){i=!1;break}i?t.setAttribute(o.NAME,o.VALUE):null!=o.DEFAULT_VALUE&&t.setAttribute(o.NAME,o.DEFAULT_VALUE)}}}function f(e,t){if(!t||t.constructor!==Object)return e;if(!e||e.constructor!==Object)return t;for(var a in t)t.hasOwnProperty(a)&&a in e?(null==e[a].APPEND_ATTRIBUTES&&(e[a].APPEND_ATTRIBUTES=t[a].APPEND_ATTRIBUTES),null==e[a].ATTRIBUTE_RULES&&(e[a].ATTRIBUTE_RULES=t[a].ATTRIBUTE_RULES)):e[a]=t[a];return e}function y(e,t,a){return!(t&&!s(t,e)&&(void 0!==t.DEFAULT_VALUE?e.setAttribute(a,t.DEFAULT_VALUE):e.removeAttribute(a),1))}function m(e){if("object"==typeof e){for(var a in e.ALLOWED_TAGS=e.GLOBAL_TAGS,e.ALLOWED_ATTR=e.GLOBAL_ATTRIBUTES,x)!x.hasOwnProperty(a)||null!=e[a]||a in w||(e[a]=t[a]);if(e.TAG_RULES=h(e.TAG_RULES,"NAME"),e.TAG_RULES&&e.TAG_RULES.constructor==Object)for(var o in e.TAG_RULES)if(e.TAG_RULES.hasOwnProperty(o)){var i=e.TAG_RULES[o];i.ATTRIBUTE_RULES=l(h(i.ATTRIBUTE_RULES,"NAME")),i.APPEND_ATTRIBUTES=d(i.APPEND_ATTRIBUTES)}if(e.GLOBAL_ATTRIBUTE_RULES=l(h(e.GLOBAL_ATTRIBUTE_RULES,"NAME")),e.GLOBAL_APPEND_ATTRIBUTES=d(e.GLOBAL_APPEND_ATTRIBUTES),e.EXTENDS)for(var r=0;r<e.EXTENDS.length;r++){var n=e.EXTENDS[r];switch("GLOBAL_TAGS"==n&&(n="ALLOWED_TAGS"),"GLOBAL_ATTRIBUTES"==n&&(n="ALLOWED_ATTR"),n){case"ALLOWED_TAGS":case"ALLOWED_ATTR":case"FORBID_TAGS":case"FORBID_ATTR":e[n+="_OBJ"]={},t[n]&&(e[n]=addObjsToSet(e[n],t[n]));break;case"ADD_URI_SAFE_ATTR":case"GLOBAL_APPEND_ATTRIBUTES":if(e[n]||(e[n]=[]),!t[n]||t[n].constructor!==Array)break;e[n]=e[n].concat(t[n]);break;case"GLOBAL_ATTRIBUTE_RULES":if(e.GLOBAL_ATTRIBUTE_RULES||(e.GLOBAL_ATTRIBUTE_RULES={}),t.GLOBAL_ATTRIBUTE_RULES&&t.GLOBAL_ATTRIBUTE_RULES.constructor==Object)for(var s in t.GLOBAL_ATTRIBUTE_RULES)t.GLOBAL_ATTRIBUTE_RULES.hasOwnProperty(s)&&!e.GLOBAL_ATTRIBUTE_RULES[s]&&(e.GLOBAL_ATTRIBUTE_RULES[s]=t.GLOBAL_ATTRIBUTE_RULES[s]);break;case"TAG_RULES":e.TAG_RULES||(e.TAG_RULES={}),e.TAG_RULES=f(e.TAG_RULES,t.TAG_RULES)}}for(var p in C)C.hasOwnProperty(p)&&(e[p+"_OBJ"]||(e[p+"_OBJ"]={}),null!=e[p]?e[p].constructor===Array&&(e[p+"_OBJ"]=addToSet(e[p+"_OBJ"],e[p])):e[p]=[]);for(var c=0;c<_.length;c++){var u=_[c];e[u]||(e[u]=[])}for(var y in"ALL"==e.ALLOWED_STYLE?(e.FORBID_TAGS_OBJ=removeFromSet(e.FORBID_TAGS_OBJ,"style"),e.FORBID_ATTR_OBJ=removeFromSet(e.FORBID_ATTR_OBJ,"style"),e.ALLOWED_TAGS_OBJ=addToSet(e.ALLOWED_TAGS_OBJ,["style"]),e.ALLOWED_ATTR_OBJ=addToSet(e.ALLOWED_ATTR_OBJ,["style"])):"INLINE"==e.ALLOWED_STYLE?(e.FORBID_ATTR_OBJ=removeFromSet(e.FORBID_ATTR_OBJ,"style"),e.ALLOWED_ATTR_OBJ=addToSet(e.ALLOWED_ATTR_OBJ,["style"]),e.FORBID_TAGS_OBJ=addToSet(e.FORBID_TAGS_OBJ,["style"]),e.ALLOWED_TAGS_OBJ=removeFromSet(e.ALLOWED_TAGS_OBJ,"style")):"INTERNAL"==e.ALLOWED_STYLE?(e.FORBID_TAGS_OBJ=removeFromSet(e.FORBID_TAGS_OBJ,"style"),e.ALLOWED_TAGS_OBJ=addToSet(e.ALLOWED_TAGS_OBJ,["style"]),e.FORBID_ATTR_OBJ=addToSet(e.FORBID_ATTR_OBJ,["style"]),e.ALLOWED_ATTR_OBJ=removeFromSet(e.ALLOWED_ATTR_OBJ,"style")):"NONE"==e.ALLOWED_STYLE&&(e.FORBID_TAGS_OBJ=addToSet(e.FORBID_TAGS_OBJ,["style"]),e.FORBID_ATTR_OBJ=addToSet(e.FORBID_ATTR_OBJ,["style"]),e.ALLOWED_TAGS_OBJ=removeFromSet(e.ALLOWED_TAGS_OBJ,"style"),e.ALLOWED_ATTR_OBJ=removeFromSet(e.ALLOWED_ATTR_OBJ,"style")),C)if(C.hasOwnProperty(y)){for(var m in e[y+"_OBJ"])e[y+"_OBJ"].hasOwnProperty(m)&&e[y].push(m);e[y+"_OBJ"]=addToSet(e[y+"_OBJ"],e[y])}ZSEC.configValidator&&ZSEC.configValidator.HTMLPurifierValidation(e,x,C,g,v)}else for(var b in e={},t)t.hasOwnProperty(b)&&(e[b]=t[b].valueOf());return e}var g=addToSet({},["script"]),v=addToSet({},[]),b=["ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_JQUERY","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","FORCE_BODY","SANITIZE_DOM","KEEP_CONTENT","ALLOWED_STYLE_PROPS"],P=["ALLOWED_TAGS","ALLOWED_ATTR","FORBID_TAGS","FORBID_ATTR"],D=["ALLOWED_TAGS_OBJ","ALLOWED_ATTR_OBJ","FORBID_TAGS_OBJ","FORBID_ATTR_OBJ"],_=["ADD_URI_SAFE_ATTR","GLOBAL_APPEND_ATTRIBUTES","GLOBAL_ATTRIBUTE_RULES","TAG_RULES"],L=addToSet({},b),C=addToSet({},P),w=(addToSet({},D),addToSet({},_));w=addToSet(w,P),w=addToSet(w,D);var T,x=addToSet({},b.concat(["STYLE_VALIDATION","ALLOWED_STYLE","EXTENDS","REMOVE_ONEVENTS","GLOBAL_ATTRIBUTES","GLOBAL_TAGS"],P,D,_)),S={iframe:{NAME:"iframe",ATTRIBUTE_RULES:{sandbox:{NAME:"sandbox",NOT_CONTAINS:["allow-top-navigation","allow-popups-to-escape-sandbox"],DEFAULT_VALUE:"allow-popups allow-forms allow-scripts allow-same-origin"}},APPEND_ATTRIBUTES:[{NAME:"sandbox",VALUE:"allow-popups allow-forms allow-scripts allow-same-origin"}]}},A=addToSet({},t.ALLOWED_STYLE_PROPS);!function(){for(var e in t.FORBID_TAGS_OBJ=addObjsToSet(t.FORBID_TAGS_OBJ,g),t.FORBID_ATTR_OBJ=addObjsToSet(t.FORBID_ATTR_OBJ,v),C)C.hasOwnProperty(e)&&(t[e+"_OBJ"]=addToSet(t[e+"_OBJ"],t[e]));a.removeAllHooks(),T=!1,"NONE"==t.ALLOWED_STYLE&&(t.FORBID_TAGS_OBJ=addToSet(t.FORBID_TAGS_OBJ,["style"]),t.FORBID_ATTR_OBJ=addToSet(t.FORBID_ATTR_OBJ,["style"])),"INLINE"!=t.ALLOWED_STYLE&&"ALL"!=t.ALLOWED_STYLE||(t.STYLE_VALIDATION&&a.addHook("afterSanitizeAttributes",(function(e){if(!e.ownerDocument.baseURI){var t=document.createElement("base");t.href=document.baseURI,e.ownerDocument.head.appendChild(t)}if(e.hasAttribute("style")){var a="";T=!1,i(e.style),(a=T?e.style.cssText:e.getAttribute("style")).length?e.setAttribute("style",a):e.removeAttribute("style")}})),"INLINE"==t.ALLOWED_STYLE&&(t.FORBID_TAGS_OBJ=addToSet(t.FORBID_TAGS_OBJ,["style"]),t.FORBID_ATTR_OBJ=removeFromSet(t.FORBID_ATTR_OBJ,"style"))),"INTERNAL"!=t.ALLOWED_STYLE&&"ALL"!=t.ALLOWED_STYLE||(t.STYLE_VALIDATION&&a.addHook("uponSanitizeElement",(function(e,t){if("style"===t.tagName&&null!=e.sheet){var a=e.sheet.cssRules;if(T=!1,r(a),T){var o=[];n(o,a),e.textContent=o.join("\n")}}})),"INTERNAL"==t.ALLOWED_STYLE&&(t.FORBID_ATTR_OBJ=addToSet(t.FORBID_ATTR_OBJ,["style"]),t.FORBID_TAGS_OBJ=removeFromSet(t.FORBID_TAGS_OBJ,"style"))),"ALL"==t.ALLOWED_STYLE&&(t.FORBID_TAGS_OBJ=removeFromSet(t.FORBID_TAGS_OBJ,"style"),t.FORBID_ATTR_OBJ=removeFromSet(t.FORBID_ATTR_OBJ,"style")),(t.GLOBAL_ATTRIBUTE_RULES||t.TAG_RULES)&&a.addHook("afterSanitizeAttributes",(function(e){for(var a=e.nodeName.toLowerCase(),o=t.GLOBAL_ATTRIBUTE_RULES,i=t.TAG_RULES&&t.TAG_RULES[a]&&t.TAG_RULES[a].ATTRIBUTE_RULES,r=S&&S[a]&&S[a].ATTRIBUTE_RULES,n=e.attributes.length;n--;){var s=e.attributes[n].name;y(e,i&&i[s]||o&&o[s],s)&&y(e,r&&r[s],s)}})),(t.GLOBAL_APPEND_ATTRIBUTES||t.TAG_RULES)&&a.addHook("afterSanitizeAttributes",(function(e){var a=e.nodeName.toLowerCase();u(t.TAG_RULES&&t.TAG_RULES[a]&&t.TAG_RULES[a].APPEND_ATTRIBUTES,e),u(t.GLOBAL_APPEND_ATTRIBUTES,e),u(S&&S[a]&&S[a].APPEND_ATTRIBUTES,e)})),t.REMOVE_ONEVENTS&&a.addHook("uponSanitizeAttribute",(function(e,t){0==t.attrName.indexOf("on")&&(t.keepAttr=!1)}))}();var E=function(t){return t=m(t),e(t,a(window))};return E.isSupported=a.isSupported,E.removed="",ZSEC.util.defineProperty(E,"sanitize",(function(e,t){var i=o(t),r=a.sanitize(e,i);return E.removed=a.removed,r}),!1,!1,!0),E}(t,DOMPurify(window)),!0,!1,!1,!0),delete window.DOMPurify}()}window.DOMPurifyCopy&&(window.DOMPurify=window.DOMPurifyCopy,window.DOMPurifyCopy=void 0),window.ZSEC.Encoder||function(e){function t(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].charCodeAt(0));return t}var a={},o="34=&quot|38=&amp|60=&lt|62=&gt|160=&nbsp|161=&iexcl|162=&cent|163=&pound|164=&curren|165=&yen|166=&brvbar|167=&sect|168=&uml|169=&copy|170=&ordf|171=&laquo|172=&not|173=&shy|174=&reg|175=&macr|176=&deg|177=&plusmn|178=&sup2|179=&sup3|180=&acute|181=&micro|182=&para|183=&middot|184=&cedil|185=&sup1|186=&ordm|187=&raquo|188=&frac14|189=&frac12|190=&frac34|191=&iquest|192=&Agrave|193=&Aacute|194=&Acirc|195=&Atilde|196=&Auml|197=&Aring|198=&AElig|199=&Ccedil|200=&Egrave|201=&Eacute|202=&Ecirc|203=&Euml|204=&Igrave|205=&Iacute|206=&Icirc|207=&Iuml|208=&ETH|209=&Ntilde|210=&Ograve|211=&Oacute|212=&Ocirc|213=&Otilde|214=&Ouml|215=&times|216=&Oslash|217=&Ugrave|218=&Uacute|219=&Ucirc|220=&Uuml|221=&Yacute|222=&THORN|223=&szlig|224=&agrave|225=&aacute|226=&acirc|227=&atilde|228=&auml|229=&aring|230=&aelig|231=&ccedil|232=&egrave|233=&eacute|234=&ecirc|235=&euml|236=&igrave|237=&iacute|238=&icirc|239=&iuml|240=&eth|241=&ntilde|242=&ograve|243=&oacute|244=&ocirc|245=&otilde|246=&ouml|247=&divide|248=&oslash|249=&ugrave|250=&uacute|251=&ucirc|252=&uuml|253=&yacute|254=&thorn|255=&yuml|338=&OElig|339=&oelig|352=&Scaron|353=&scaron|376=&Yuml|402=&fnof|710=&circ|732=&tilde|913=&Alpha|914=&Beta|915=&Gamma|916=&Delta|917=&Epsilon|918=&Zeta|919=&Eta|920=&Theta|921=&Iota|922=&Kappa|923=&Lambda|924=&Mu|925=&Nu|926=&Xi|927=&Omicron|928=&Pi|929=&Rho|931=&Sigma|932=&Tau|933=&Upsilon|934=&Phi|935=&Chi|936=&Psi|937=&Omega|945=&alpha|946=&beta|947=&gamma|948=&delta|949=&epsilon|950=&zeta|951=&eta|952=&theta|953=&iota|954=&kappa|955=&lambda|956=&mu|957=&nu|958=&xi|959=&omicron|960=&pi|961=&rho|962=&sigmaf|963=&sigma|964=&tau|965=&upsilon|966=&phi|967=&chi|968=&psi|969=&omega|977=&thetasym|978=&upsih|982=&piv|8194=&ensp|8195=&emsp|8201=&thinsp|8204=&zwnj|8205=&zwj|8206=&lrm|8207=&rlm|8211=&ndash|8212=&mdash|8216=&lsquo|8217=&rsquo|8218=&sbquo|8220=&ldquo|8221=&rdquo|8222=&bdquo|8224=&dagger|8225=&Dagger|8226=&bull|8230=&hellip|8240=&permil|8242=&prime|8243=&Prime|8249=&lsaquo|8250=&rsaquo|8254=&oline|8260=&frasl|8364=&euro|8465=&image|8472=&weierp|8476=&real|8482=&trade|8501=&alefsym|8592=&larr|8593=&uarr|8594=&rarr|8595=&darr|8596=&harr|8629=&crarr|8656=&lArr|8657=&uArr|8658=&rArr|8659=&dArr|8660=&hArr|8704=&forall|8706=&part|8707=&exist|8709=&empty|8711=&nabla|8712=&isin|8713=&notin|8715=&ni|8719=&prod|8721=&sum|8722=&minus|8727=&lowast|8730=&radic|8733=&prop|8734=&infin|8736=&ang|8743=&and|8744=&or|8745=&cap|8746=&cup|8747=&int|8756=&there4|8764=&sim|8773=&cong|8776=&asymp|8800=&ne|8801=&equiv|8804=&le|8805=&ge|8834=&sub|8835=&sup|8836=&nsub|8838=&sube|8839=&supe|8853=&oplus|8855=&otimes|8869=&perp|8901=&sdot|8968=&lceil|8969=&rceil|8970=&lfloor|8971=&rfloor|10216=&lang|10217=&rang|9674=&loz|9824=&spades|9827=&clubs|9829=&hearts|9830=&diams";o=o.split("|");for(var i=0;i<o.length;i++){var r=o[i].split("=");a[r[0]]=r[1]}var n={characterToEntityMap:a,IMMUNE_HTML:t(new Array(",",".","-","_"," ")),IMMUNE_HTMLATTR:t(new Array(",",".","-","_")),IMMUNE_CSS:t(new Array),IMMUNE_JAVASCRIPT:t(new Array(",",".","_"))};ZSEC.util.defineProperty(ZSEC,"Encoder",function(e){function t(e,t,a,o){if(null==t||null==t||"string"!=typeof t)return t;for(var i="",r=0;r<t.length;r++)if(o){var n=t.codePointAt(r);i+=a(e,n,o),n>65535&&r++}else i+=a(e,t.charCodeAt(r));return i}for(var a={},o=e.characterToEntityMap,i=[],r=0;r<255;r++)i[r]=r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122?null:r.toString(16);var n=function(e){return e<256?i[e]:e.toString(16)},s=function(e,t){if(-1!=ZSEC.util.ArrayIndexOf.call(e,t))return String.fromCodePoint(t);var a=n(t);if(null==a)return String.fromCodePoint(t);if(t<=31&&"\t"!=t&&"\n"!=t&&"\r"!=t||t>=127&&t<=159||" "==t)return" ";var i=o[t];return null!=i?i+";":"&#x"+a+";"},l=function(e,t){if(-1!=ZSEC.util.ArrayIndexOf.call(e,t))return String.fromCharCode(t);if(null==n(t))return String.fromCharCode(t);var a=t.toString(16);if(t<256){var o="00".substr(a.length);return"\\x"+o+a.toUpperCase()}return"\\u"+(o="0000".substr(a.length))+a.toUpperCase()},d=function(e,t){if(-1!=ZSEC.util.ArrayIndexOf.call(e,t))return String.fromCodePoint(t);var a=n(t);return null==a?String.fromCodePoint(t):"\\"+a+" "};return a.encodeForHTML=function(a){return t(e.IMMUNE_HTML,a,s,!0)},a.encodeForHTMLAttribute=function(a){return t(e.IMMUNE_HTMLATTR,a,s,!0)},a.encodeForJavaScript=function(a){return t(e.IMMUNE_JAVASCRIPT,a,l,!1)},a.encodeForCSS=function(a){return t(e.IMMUNE_CSS,a,d,!0)},Object.freeze&&Object.freeze(a),a}(n),!0,!1,!1,!0)}();var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ReplaceWith(e){var t=this.parentNode,a=arguments.length,o=+(t&&"object"===(void 0===e?"undefined":_typeof(e)));if(t){for(;a-- >o;)t&&"object"!==_typeof(arguments[a])&&(arguments[a]=document.createTextNode(arguments[a])),t||!arguments[a].parentNode?t.insertBefore(this.previousSibling,arguments[a]):arguments[a].parentNode.removeChild(arguments[a]);o&&t.replaceChild(this,e)}}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("after")||Object.defineProperty(e,"after",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var a=e instanceof Node;t.appendChild(a?e:document.createTextNode(String(e)))})),this.parentNode.insertBefore(t,this.nextSibling)}})})),Element.prototype.replaceWith||(Element.prototype.replaceWith=ReplaceWith),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=ReplaceWith),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=ReplaceWith),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),window.Lyte={version:"3.3.1",$:{consoleTime:[]},registeredMixins:{},registeredServices:{},requiredServices:{},toBeInjectedServices:{},_registeredComponents:{},_keywords:{component:["init","didConnect","didDestroy","constructor","onError","actions","methods","data"],adapter:["namespace","actionNamespace","host","withCredentials","buildURL","methodForRequest","headersForRequest","reloadRecord","reloadRecord","reloadAll","processRequest","parseResponse","parseRequest","super"],serializer:["normalize","normalizeResponse","serialize","serializeKey","deserializeKey","extractMeta","payloadKey","serializeRecord","normalizeRecord","super"],route:["getDependencies","getResources","beforeModel","model","afterModel","redirect","renderTemplate","afterRender","beforeExit","didDestroy","queryParams","title","routeName","component","parent","currentModel","forceFetch","setTitle","setQueryParams","getQueryParams","setDynamicParam","getDynamicParam","removeFromCache","refresh","transitionTo","replaceWith","actions"],is:function(e,t){var a=["component","adapter","serializer","route"];t&&(a=[t]);for(var o=a.length,i=0;i<o;i++){var r=this[a[i]];if(r&&-1!=r.indexOf(e))return!0}return!1}},Mixin:{},Service:{},debug:!1,performance:!1,toBeRegistered:[],browser:{},registeredCustomComponent:{},Globals:{}},function(){var e=Lyte.$.userAgent=window.userAgent=navigator.userAgent;if(e.match(/rv:11/)&&(Lyte.browser.ie=!0,window.action=function(){}),e.match("Edge")){var t=createElement("div");t.innerHTML="<template><div>c</div></template>",t.querySelector("template").childNodes.length?Lyte.browser.ie=!0:Lyte.browser.edge=!0,t.remove()}Object.defineProperty(Lyte,"__gl",{value:{}}),Lyte.Globals.set=function(e,t){Lyte.Component.set(Lyte.__gl,e,t)},Lyte.Globals.get=function(e){return Lyte.Component._get(Lyte.__gl,e)},Lyte.$.assetsDiv=document.createElement("div"),Lyte.$.assetsDiv.setAttribute("id","lyteAssetsDiv"),Lyte.assetsDivContainer=document.head,Lyte.domContentLoaded=function(e){"complete"===document.readyState||"interactive"===document.readyState?e():window.addEventListener("DOMContentLoaded",(function(){e()}))},Lyte.createApplication=function(e,t){t.init&&t.init.apply(Lyte)},Lyte.registerErrorCodes=function(e){Object.assign(Lyte.errorCodes,e)},Lyte.establishObserverBindings=function(e,t,a,o){var i=this;t&&(i=t);for(var r=0;r<e.length;r++)for(var n=e[r].properties,s=0;s<n.length;s++){var l,d=!1;if("string"==typeof n[s]){if(-1!==n[s].indexOf(".[]"))d=!0,l=Lyte.getProperty.call(this,n[s].substring(0,n[s].indexOf(".[]")),t,a);else{if(-1!==n[s].indexOf(".*")){var p=n[s].split(".")[0];if(!(!t&&this.component.__data[p]&&this.component.__data[p].watch||t&&o&&o.fieldList&&o.fieldList[p]&&o.fieldList[p].watch))continue}l=Lyte.getProperty.call(this,n[s],t,a)}l._observers||Object.defineProperty(l,"_observers",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),l._observers.add({callee:i,observer:e[r],isArrayObserver:d})}else Lyte.warn("ERR27",JSON.stringify(n[s]),e[r].fnName,this.tagName)}},Lyte.getProperty=function(e,t,a){var o=e.match(/([^[\].]+|\[\])/g),i=this;t?(i=a,a[o[0]]||(a[o[0]]={}),i=a[o[0]]):(i._properties[o[0]]||(i._properties[o[0]]={}),i=i._properties[o[0]]),Object.defineProperty(i,"_path",{enumerable:!1,value:o[0]});for(var r=1;r<o.length;r++)(o[r].startsWith("'")||o[r].startsWith('"'))&&(o[r]=o[r].substring(1,o[r].length-1)),i[o[r]]||(i[o[r]]={},Object.defineProperty(i[o[r]],"_path",{enumerable:!1,value:i._path+"."+o[r]})),i=i[o[r]];return i},Lyte.getErrorMessage=function(e){var t=Array.from(arguments).slice(1);return Lyte.errorCodes[e]?Lyte.errorCodes[e].replace(/{(\d+)}/g,(function(e,a){return t[a]})):e},Lyte.error=function(){var e=arguments[0],t=e.stack;e=t?e:Error(Lyte.getErrorMessage.apply(Lyte,arguments)),Lyte.onerror&&Lyte.onerror.call(this,e,arguments[1]),Lyte.triggerEvent("error",e,arguments[1]);var a=e.stack&&-1==e.stack.indexOf(e.message);t&&!a&&(e=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)))),arguments[1]?console.error(e.stack?a?e:e.stack:e.message,arguments[1]):console.error(e.stack?a?e:e.stack:e.message)},Lyte.warn=function(){var e=arguments[0];e=e.stack?JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e))):Error(Lyte.getErrorMessage.apply(Lyte,arguments)),console.warn(e.stack?-1!=e.stack.indexOf(e.message)?e.stack.replace("Error: ",""):e:e.message)};var a={};function o(e){return e.match(/\.[a-zA-Z]+(?=\?|$)/)}function o(e){return e.match(/\.[a-zA-Z]+(?=\?|$)/)}Lyte.Mixin.register=function(e,t){var o;if(Lyte.registeredMixins[e]=t,o=a[e])for(var i in o)Lyte.$.requiredMixins[i](t,o[i],i)},Lyte.Mixin.get=function(e){return Lyte.registeredMixins[e]},Lyte.Service.register=function(e,t){if(Lyte.registeredServices.hasOwnProperty(e))Lyte.warn("Service -"+e+" is already registered");else{if(!Lyte._keywords.is(e)){var a=t;Lyte.registeredServices[e]=a;var o=Lyte.requiredServices[e];return o&&o.size&&o.forEach((function(o){var i=a;o.isGlobal&&(i=Lyte.__gS[o.key]=Lyte.__gS[o.key]||new t(o.data)),o.cB(i,o.key,o.name,e)})),a}Lyte.warn("Service name-"+e+" should not be a keyword used in Lyte")}},Lyte.Service.getInjected=function(e){if(Lyte.__gS.hasOwnProperty(e))return Lyte.__gS[e]},Lyte.$.requiredServices=function(e,t,a,o,i,r,n){var s=Lyte.requiredServices[t]||(Lyte.requiredServices[t]=new Map),l=Lyte.$.genMapId(s);return s.set(l,{key:e,cB:a,type:o,name:i,serviceName:t,isGlobal:r,data:n}),t+"-"+l},Lyte.$.lazyRegisterService=function(e,t){var a=t.scope,o=t.name,i=a[t.type][o];i&&(i[t.key]=e)},Lyte.$.injectServices={},Object.defineProperty(Lyte,"__gS",{value:{}}),Lyte.injectServices=function(e){var t={};Array.isArray(e)||(e=[e]),e.forEach((function(e){if(e&&"object"==(void 0===e?"undefined":_typeof(e))){var a=e.as,o=e.service,i=e.data;Lyte._keywords.is(a)?Lyte.warn("Service cannot be used in any keywords of Lyte."):Lyte.toBeInjectedServices.hasOwnProperty(a)?Lyte.warn("A service has already been injected in the key named, ",a):(Lyte.toBeInjectedServices[a]=o,t[a]={service:o,data:i},Lyte.registeredServices[o]&&(Lyte.__gS[a]=new Lyte.registeredServices[o](i)))}else"string"==typeof e?Lyte.toBeInjectedServices.hasOwnProperty(e)?Lyte.warn("A service has already been injected in the key named, ",e):(Lyte.toBeInjectedServices[e]=e,t[e]={service:e},Lyte.registeredServices[e]&&(Lyte.__gS[e]=new Lyte.registeredServices[e])):Lyte.warn("Invalid data passed to injectServices",e)}));var a=Lyte.$.injectServices;for(var o in a)for(var i in t)a[o](i,t[i].service,o,Lyte.__gS[i],void 0,t[i].data)},Lyte.$.genMapId=function(e){for(var t=Math.floor(1e10*Math.random()+1);e.get(t);)t=Math.floor(1e10*Math.random()+1);return t.toString()},Lyte.$.toRemoveFromRequiredServices=function(e){var t=e.split("-"),a=t[t.length-1],o=a.length,i=e.substr(0,e.length-(o+1)),r=Lyte.requiredServices[i];r&&r.delete(a)},Lyte.toBeUsedServices=function(e){var t={},a=e.services;return a&&a.forEach((function(a){if("string"==typeof a)t[a]=a;else if(a&&"object"==(void 0===a?"undefined":_typeof(a))){var o=a.as,i=a.service;Lyte._keywords.is(o,e.type)?Lyte.warn("Service cannot be used in any keywords of Lyte."):t[o]=i}})),t},Lyte.extendService=function(e){var t,a=Lyte.toBeUsedServices(e);for(var o in a)if(t=a[o],e.isGlobal&&Lyte.__gS.hasOwnProperty(o)||!e.isGlobal&&Lyte.registeredServices.hasOwnProperty(t)){var i=e.ins;e.isGlobal?Lyte.__gS[o]:new Lyte.registeredServices[t],Array.isArray(i)||(i=[e.ins]),i.forEach((function(a){a[o]=e.isGlobal?Lyte.__gS[o]:new Lyte.registeredServices[t]}))}else Lyte.$.requiredServices(o,t,e.callback,e.type,e.name,e.isGlobal,e.data)},Lyte.$.requiredMixins=function(e,t,o){var i=a[e]?a[e]:a[e]={};i[o]?i[o].push(t):i[o]=[t]},Lyte.Mixin.exists=function(e){return!!Lyte.registeredMixins[e]},Lyte.log=function(e,t,a){Lyte.debug&&(a?console.log("%c"+e,"color:"+a):console.log(e))},Lyte.time=function(e){var t;Lyte.performance&&(-1!=(t=Lyte.$.consoleTime.indexOf(e))?(Lyte.$.consoleTime.splice(t,1),console.timeEnd(e)):(Lyte.$.consoleTime.push(e),console.time(e)))},Lyte.isRecord=function(e){return!!(e&&e.$&&e.$.hasOwnProperty("isModified"))},Lyte.isComponent=function(e){return!!(e&&e.$node&&e.__data)},Lyte.$.reqFiles={},Lyte.injectResources=function(e,t,a,i){var r=[],n=[];return t=t||function(){},a=a||function(){},new Promise((function(l,d){!function e(a,i){if(a){Array.isArray(a)||(a=[a]),a.length||i();var r=-a.length;a.forEach((function(a){"string"==typeof a?function(e,a,i){Lyte.$.reqFiles[e]?Lyte.$.reqFiles[e].push(i):(Lyte.$.reqFiles[e]=[i],a&&"error"!=a.event.type?(-1!=Lyte.removeFromCache.arr.indexOf(e)&&Lyte.removeFromCache.arr.splice(Lyte.removeFromCache.arr.indexOf(e),1),s.call(a.tag,e,a.event,!0),i()):function(e,a){var i,r=t.internal||{},n=o(e);r.file=e,null!=n?((i=document.createElement("link")).setAttribute("href",e),r.tag=i,".css"==n?i.setAttribute("as","style"):i.setAttribute("as","script"),i.setAttribute("rel","preload"),i.onerror=i.onload=function(e){a.call(this,e),this.onerror=this.onload=void 0},Lyte.triggerEvent("onBeforeInject",r),Lyte.$.assetsDiv.appendChild(i)):Lyte.error("Type of file is not specified in injectResources.")}(e,(function(a){Lyte.injectResources.respObj[e]=this,Lyte.$.reqFiles[e].forEach((function(e){e()})),s.call(this,e,a),t.call(this,a)})))}(a,Lyte.injectResources.availableTags[a],(function(){n()})):Array.isArray(a)?new Promise((function(t){e(a,t)})).then((function(){n()})):(r--,new Promise((function(t){e(a.parent,t)})).then((function(){n()})),new Promise((function(t){e(a.child,t)})).then((function(){n()})))}))}else i();function n(){0==++r&&i()}function s(e,t,a){delete Lyte.$.reqFiles[e],a||(Lyte.injectResources.availableTags[e]&&(Lyte.injectResources.availableTags[e].tag.remove(),delete Lyte.injectResources.respObj[e]),Lyte.injectResources.availableTags[e]={tag:this,event:t,type:t.type})}}(e,function(){i&&i.defer?(i.defer({injectJS:s,files:e,errorFiles:n}),l()):s(e,(function(){a(r,n),n.length?d(r,n):l(r,n)}))}.bind(this))}));function s(e,t,a){if(a=a||[],e){Array.isArray(e)||(e=[e]),e.length||t(r,n);var i=-e.length;e.forEach((function(e){if("string"==typeof e){var t=o(e);!t||".js"!=t&&".css"!=t||-1!=a.indexOf(e)?l():(a.push(e),function(e,t){var a=Lyte.injectResources.respObj[e];if(Lyte.injectResources.availableTags[e]&&"preload"!=Lyte.injectResources.availableTags[e].tag.getAttribute("rel")){var i=Lyte.injectResources.availableTags[e];"error"==i.type?n.push(i.event):r.push(i.event),t()}else{var s,l=o(e);".js"==l?((s=document.createElement("script")).setAttribute("type","text/javascript"),s.setAttribute("src",e)):".css"==l&&((s=document.createElement("link")).setAttribute("type","text/css"),s.setAttribute("rel","stylesheet"),s.setAttribute("href",e)),a.getAttributeNames().forEach((function(e){-1==["href","as","rel"].indexOf(e)&&s.setAttribute(e,a.getAttribute(e))})),delete Lyte.injectResources.respObj[e],s.onerror=s.onload=function(a){"error"==a.type?n.push(a):r.push(a),Lyte.injectResources.availableTags[e].tag.remove(),Lyte.injectResources.availableTags[e]={tag:s,event:a,type:"error"==a.type?"error":"load"},t(),s.onerror=s.onload=void 0},Lyte.$.assetsDiv.appendChild(s)}}(e,(function(){l()})))}else Array.isArray(e)?s(e,(function(){l()})):(i--,s(e.parent,(function(){s(e.child,(function(){l()})),l()})))}))}else t(r,n);function l(){0==++i&&t(r,n)}}},Lyte.injectResources.availableTags=[],Lyte.injectResources.respObj=[],Lyte.$.replaceOldInjectResource=function(){Lyte.injectResources=function(e,t,a){var i=[],r=[];return t=t||function(){},a=a||function(){},new Promise((function(a){!function e(a,n){if(a){Array.isArray(a)||(a=[a]),a.length||n();var s=-a.length;a.forEach((function(a){"string"==typeof a?function(e,a,n){Lyte.$.reqFiles[e]?Lyte.$.reqFiles[e].push(n):(Lyte.$.reqFiles[e]=[n],a&&"error"!=a.event.type?(-1!=Lyte.removeFromCache.arr.indexOf(e)&&Lyte.removeFromCache.arr.splice(Lyte.removeFromCache.arr.indexOf(e),1),d.call(a.tag,a.event,!0),n()):function(e,a){var n=o(e);if(tag=document.createElement({".js":"script",".css":"link"}[n]),n){".css"==n?(tag.setAttribute("href",e),tag.setAttribute("type","text/css"),tag.setAttribute("rel","stylesheet")):tag.setAttribute("src",e),tag.onerror=tag.onload=function(e){"error"==e.type?r.push(e):i.push(e),a&&a.call(this,e)};var s=t.internal||{};s.file=e,s.tag=tag,Lyte.triggerEvent("onBeforeInject",s),Lyte.$.assetsDiv.appendChild(tag)}else Lyte.error("Type of file is not specified in injectResources.")}(e,(function(a){Lyte.$.reqFiles[e].forEach((function(e){e()})),d.call(this,a),t.call(this,a)})))}(a,Lyte.injectResources.availableTags[a],(function(){l()})):Array.isArray(a)?new Promise((function(t){e(a,t)})).then((function(){l()})):new Promise((function(t){e(a.parent,t)})).then((function(){new Promise((function(t){e(a.child,t)})).then((function(){l()}))}))}))}else n();function l(){0==++s&&n()}function d(e,t){var a=this.getAttribute("src")||this.getAttribute("href");delete Lyte.$.reqFiles[a],t||(Lyte.injectResources.availableTags[a]&&Lyte.injectResources.availableTags[a].tag.remove(),this.onerror=this.onload=void 0,Lyte.injectResources.availableTags[a]={tag:this,event:{type:e.type}})}}(e,a)})).then((function(){a(i,r)}))},Lyte.injectResources.availableTags=[],Lyte.injectResources.respObj=[]},Lyte.removeFromCache=function(e){Lyte.removeFromCache.assign(e),Lyte.removeFromCache.arr.length&&(Lyte.removeFromCache.arr.forEach((function(e){Lyte.injectResources.availableTags[e]&&(Lyte.injectResources.availableTags[e].tag.remove(),delete Lyte.injectResources.availableTags[e],delete Lyte.injectResources.respObj[e])})),Lyte.removeFromCache.arr=[])},Lyte.removeFromCache.arr=[],Lyte.removeFromCache.assign=function(e){e="*"==e?Object.keys(Lyte.injectResources.availableTags):Array.isArray(e)?e:[e],Lyte.removeFromCache.arr=Lyte.removeFromCache.arr.concat(e)},Lyte.$.prefetchSupport=!1;try{if(!Lyte.browser.ie){var i=document.createElement("link");Lyte.$.prefetchSupport=i.relList.supports("prefetch")&&i.relList.supports("preload")}}catch(e){}function r(){Lyte.assetsDivContainer.appendChild(Lyte.$.assetsDiv)}Lyte.$.prefetchSupport||(console.log("Prefetch is not supported. Falling back to old implementation"),Lyte.$.replaceOldInjectResource()),Lyte.checkProperty=function(e,t,a,o,i,r,n,s,l){switch(e){case"type":if(Lyte.Transform.hasOwnProperty(o)&&null!=t){var d=Lyte.Transform[o],p=!0;if(Array.isArray(t)){if("array"!=Lyte.Transform[o].extends)return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o};d.hasOwnProperty("items")&&(p=Lyte.checkProperty("items",t,a,d.items))}else if("object"===(void 0===t?"undefined":_typeof(t))&&"object"==Lyte.Transform[o].extends&&d.hasOwnProperty("properties"))p=Lyte.checkProperty("properties",t,a,d.properties);else if(Lyte.Transform[o].extends!=(void 0===t?"undefined":_typeof(t)))return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o};if(!0!==p)return p}else if(null!=t)if(Array.isArray(t)){if("array"!=o)return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o}}else if(o!=(void 0===t?"undefined":_typeof(t)))return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o};break;case"mandatory":var c=o;if("object"==(void 0===o?"undefined":_typeof(o))&&l&&1==o.skipValidationOnInit&&(c=!1),c&&(null==t||null==t||""===t))return{code:"ERR02",message:Lyte.errorCodes.ERR02};break;case"maximum":if("number"==typeof t&&t>o)return{code:"ERR04",message:Lyte.errorCodes.ERR04,expected:o};break;case"minimum":if("number"==typeof t&&t<o)return{code:"ERR05",message:Lyte.errorCodes.ERR05,expected:o};break;case"maxLength":case"maxItems":if(t&&t.length>o)return{code:"ERR06",message:Lyte.errorCodes.ERR06,expected:o};break;case"minLength":case"minItems":if(t&&t.length<o)return{code:"ERR07",message:Lyte.errorCodes.ERR07,expected:o};break;case"pattern":if("string"==typeof t&&!new RegExp(o).test(t))return{code:"ERR08",message:Lyte.errorCodes.ERR08,expected:o};break;case"uniqueItems":if(Array.isArray(t)&&o)for(var h=[],u=0;u<t.length;u++){var f=t[u];if(-1!=h.indexOf(f))return{code:"ERR09",message:Lyte.errorCodes.ERR09};h.push(f)}break;case"constant":if(Array.isArray(t)){if(!(v=t.length==o.length&&t.every((function(e,t){return e===o[t]}))))return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:o}}else if("object"==(void 0===t?"undefined":_typeof(t))){if(!(v=store.adapter.$.compareObjects(t,o)))return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:o}}else if(t&&t!=o)return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:o};break;case"items":if(Array.isArray(t))for(u=0;u<t.length;u++){o.any&&Array.isArray(o)||(o=[o]);for(var y=o.length,m=(p=!0,0);m<y;m++)for(var e in d=o[m])if(!0!==(v=Lyte.checkProperty(e,t[u],u,d[e],d))){!0===p&&(v.path=v.path?u+"."+v.path:v.path,p=v);break}if(!0!==p)return p}break;case"properties":if("object"==(void 0===t?"undefined":_typeof(t))&&!Array.isArray(t))for(var a in t)if(o.hasOwnProperty(a)){var g=o[a];for(g.any&&Array.isArray(g)||(g=[g]),y=g.length,p=!0,u=0;u<y;u++)for(var e in d=g[u])if(1!=(v=Lyte.checkProperty(e,t[a],a,d[e],d))){!0===p&&(v.path=v.path?a+"."+v.path:a.toString(),p=v);break}if(!0!==p)return p}else if(i.exact)return{code:"ERR29",message:Lyte.errorCodes.ERR29,property:a};break;case"validation":var v;if(1!=(v=Lyte.customValidator[o].apply(r,[a,t,s])))return v;break;case"instanceof":if(!("object"!==(void 0===t?"undefined":_typeof(t))||Array.isArray(t)||t instanceof o))return{code:"ERR30",message:Lyte.errorCodes.ERR30,property:a,instanceof:o}}return!0},Lyte.checkNestedProp=function(e,t,a,o,i,r,n,s){var l;if(0!=t.length){if("array"==a.type)a.items&&!isNaN(t[0])&&"object"==_typeof(a.items)&&(t=t.slice(1),Lyte.checkNestedProp(e,t,a.items,o,i,r,n,s));else if("object"==a.type&&a.properties&&a.properties.hasOwnProperty(t[0])){var d=t[0];t=t.slice(1),Lyte.checkNestedProp(e,t,a.properties[d],o,i,r,n,s)}}else if(a.properties||a.items){var p={__data:{}};a.properties?p.__data[r]=a.properties[r]:p.__data[r]=a;var c=Lyte.validate(i,r,n,p);if(c&&"object"==(void 0===c?"undefined":_typeof(c))&&c.code)c.value=n,c.path=o.path,o.Error&&o.Error[o.key]?o.Error[o.key].code&&o.Error[o.key].nested?o.Error[o.key].nested:o.Error[o.key].nested={}:o.Error[o.key]={code:c.code,message:c.message,nested:{}},l=o.Error[o.key].nested,o.path.split(".").forEach((function(e){l=l&&!l[e]?l[e]={}:l[e]})),o.index?l[o.index]=c:l[r]=c,i.$&&i.$.error?i.$.error=l:i.$={error:l},Object.defineProperty(i,"$",{enumerable:!1,writable:!1});else if(!c&&i.$&&(i.$.error[r]||o.index&&i.$.error[o.index])){l=o.Error[o.key].nested||void 0;var h=o.index||r;delete i.$.error[h];var u=!0,f=o.path.split(".");o.index&&f.push(o.index),f.forEach((function(e){l[e]&&l[e].code&&(u=!1),l=l[e]})),1==u&&o.Error[o.key]&&delete o.Error[o.key]}s.value=c}},Lyte.types=["string","object","number","boolean","array"],Lyte.attr=function(e,t){var a={};if(a.type=e,null==t&&(t={}),-1==this.types.indexOf(e)&&!Lyte.Transform.hasOwnProperty(e))throw new Error("Not a valid field type - "+e);return Object.assign(a,t),a},Lyte.defineRelation=function(e,t,a){var o={type:"relation",relType:t,relatedTo:e};return a&&(o.opts=a),o},Lyte.belongsTo=function(e,t){return this.defineRelation(e,"belongsTo",t)},Lyte.hasMany=function(e,t){return this.defineRelation(e,"hasMany",t)},Lyte.Transform={},Lyte.customValidator={},Lyte.registerDataType=function(e,t){this.Transform.hasOwnProperty(e)?Lyte.error("Custom Field Type - "+e+" -  already exists."):null!=t.extends&&-1!=Lyte.types.indexOf(t.extends)?this.Transform[e]=t:Lyte.error("Not a valid field type - "+t.extends)},Lyte.registerValidator=function(e,t){this.customValidator.hasOwnProperty(e)?Lyte.error("Custom Validator with name - "+e+" - already exists"):this.customValidator[e]=t},Lyte.patterns={email:/^([A-Za-z0-9._%\-'+/]+@[A-Za-z0-9.-]+\.[a-zA-Z]{2,22})$/,url:/(^(ht|f)tp(s?):\/\/[0-9a-zA-Z][-.\w]*(:[0-9])*(\/?)([a-zA-Z0-9\-.?,:'/\\+=&amp;%$#_[\]@!()*;~]*)?$)/,ampm:/^(AM|PM|am|pm)$/,hour:/^(0?[0-9]|1[0-9]|2[0-4])$/,minute:/^(0?[0-9]|[1-5][0-9]|60)$/,boolean:/^(true|false|TRUE|FALSE)$/,alphaNumeric:/([a-zA-Z0-9])+/,alphabetsOnly:/([a-zA-Z])+/,numeric:/([0-9])+/,phoneNo:/^[0-9a-zA-Z+.()\-;\s]+$/},Lyte.validate=function(e,t,a,o,i){var r=o.__data[t],n=!1,s=r?r.type:void 0,l=r;if(l){l.any&&Array.isArray(l)||(l=[l]);for(var d=l.length,p=!0,c=0;c<d;c++){var h=l[c];for(var u in h)!0!==(n=Lyte.checkProperty(u,a,t,h[u],h,e,s,void 0,i))&&!0===p&&(p=n)}if(!0!==p)return p}return!1},Lyte.registerPattern=function(e,t){this.patterns[e]=t},Lyte.errorCodes={ERR01:"Primary key cannot be modified",ERR02:"Mandatory field cannot be empty",ERR03:"Type of value does not match the specified data type",ERR04:"Value is greater than the maximum value allowed",ERR05:"Value is less than the minimum value allowed",ERR06:"Length of string/array is greater than the maximum limit allowed",ERR07:"Length of string/array is less than the minimum limit allowed",ERR08:"String does not match the specified pattern",ERR09:"Values in array are not unique",ERR10:"Value is not equal to the specified constant",ERR11:"Model of related field is not defined",ERR12:"Model of backward relation is not defined",ERR13:"Record not found",ERR14:"Model does not match the related field model",ERR15:"Error in creating a record as a relation",ERR16:"Record with primary key already exists",ERR17:"Value cannot be changed because record has been deleted",ERR18:"Action not defined",ERR19:"Model not defined",ERR20:"Key not specified",ERR21:"'belongsTo' relationship expects a single object/id",ERR22:"Type not specified for polymorphic relation",ERR23:"Primary Key value not present",ERR24:"Error while relating record",ERR25:"Backward relation not present",ERR26:"Primary key value cannot be undefined or null",ERR27:"Observer can observe only string data type value, '{0}' value cannot be observed in the function named '{1}' in the component '{2}'",ERR28:"Unloaded record cannot be saved",ERR29:"Property not defined in the object",ERR30:"Error in variables declaration for Query",ERR31:"Query not registered for the Model",ERR32:"Property not defined in the object",ERR33:"Property's value is not an instanceof the mentioned class"},Lyte.registeredGlobalEvents=Lyte.__lyteRegisteredEvents={},Lyte.triggerEvent=function(){var e=Array.prototype.slice.call(arguments,1),t=arguments[0],a=!1,o=this.__lyteRegisteredEvents[t];if(o)for(var i=0;i<o.listeners.length;i++){var r=o.listeners[i];if(r&&!1===r.apply(this,e)){a=!0;break}}else o=this.__lyteRegisteredEvents[t]={listeners:[]};var n=new CustomEvent(t,{detail:e});a||document.dispatchEvent(n)},Lyte.addEventListener=function(e,t){if("function"==typeof t){var a=this.__lyteRegisteredEvents[e];return a||(a=this.__lyteRegisteredEvents[e]={listeners:[]}),e+"-"+(a.listeners.push(t)-1)}Lyte.error("Second parameter to Lyte.Component.addGlobalEventListener() must be a function")},Lyte.removeEventListener=function(e){if(e){var t=e.split("-"),a=this.__lyteRegisteredEvents[t[0]];a&&a.listeners[t[1]]?a.listeners[t[1]]=null:Lyte.error("No such listener registered")}else Lyte.error("listener unique id not specified")},Lyte.extendEventListeners=function(e){e&&"object"==(void 0===e?"undefined":_typeof(e))&&!e.hasOwnProperty("__lyteRegisteredEvents")&&Object.defineProperties(e,{__lyteRegisteredEvents:{value:{}},addEventListener:{value:Lyte.addEventListener},removeEventListener:{value:Lyte.removeEventListener},triggerEvent:{value:Lyte.triggerEvent}})},Lyte.deepCopyObject=function(e){for(var t,a,o,i,r,n,s=[{source:e,target:Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e))}],l=[e],d=s[0].target,p=[d];t=s.shift();){for(a=Object.keys(t.source),o=0;o<a.length;o++)(i=Object.getOwnPropertyDescriptor(t.source,a[o]))&&(i.value&&"object"==_typeof(i.value)?(r=i.value,i.value=Array.isArray(r)?[]:r instanceof Set?new Set:Object.create(Object.getPrototypeOf(r)),-1==(n=l.indexOf(r))?(l.push(r),p.push(i.value),Object.defineProperty(t.target,a[o],i),s.push({source:r,target:i.value})):(i.value=p[n],Object.defineProperty(t.target,a[o],i))):Object.defineProperty(t.target,a[o],i));Lyte.isRecord(t.source)&&(Object.defineProperty(t.target,"$",{value:{}}),t.target.$.isNew=t.source.$.isNew,t.target.$.isModified=t.source.$.isModified,t.target.$.isDeleted=t.source.$.isDeleted,t.target.$.pK=t.source.$.pK,t.target.$._attributes=t.source.$._attributes,t.target.$.isCloned=!0,t.target.$.model={_name:t.source.$.model._name},t.source.$.hasOwnProperty("deepNest")&&(t.target.$.deepNest=t.source.$.deepNest),t.source.$.hasOwnProperty("partialType")&&(t.target.$.partialType=t.source.$.partialType)),Array.isArray(t.source)&&t.source.partial&&Object.defineProperty(t.target,"partial",{value:t.source.partial})}return d},Lyte.nestScpId=1,Lyte.nestScp={},Lyte.__nestRef__={},Lyte.__nestScp__=new Map,Lyte.establishObjectBinding=function(e,t,a,o,i,r){var n,s,l,d=e.__component__&&e.__component__.component.__data?e.__component__.component.__data[t]:void 0;if(a){if(e&&!e.$&&e._scp?Array.from(e._scp.keys()).forEach((function(e){var t=Lyte.nestScp[e];n=store.modelFor(t.model)})):n=e.$.model,!(s=n?n.fieldList[t]:void 0))return;d=s}if(o&&e._scp&&e._scp.size&&Array.from(e._scp.keys()).forEach((function(a){var o=e._scp.get(a).paths;for(var i in o){var n=i?i.split("."):[];n.push(t),Lyte.bindObj(e,t,a,n,new Map,void 0,d,r)}})),(!a||s.watch||s.properties||s.items||r)&&e[t]){var p;e&&e.__component__?(e.__component__.__scpObj||Object.defineProperty(e.__component__,"__scpObj",{value:{}}),e.__component__,p=e.__component__.__scpObj):Lyte.isRecord(e)&&(e.$.__scpObj||Object.defineProperty(e.$,"__scpObj",{value:{}}),p=e.$.__scpObj);var c=p;if(p){var h=!1,u=!1;if(a)if(e[t]&&!Lyte.__nestScp__.has(e[t]))l={model:n._name,attr:t,pK:e.$.pK},h=!0;else{var f=Lyte.__nestScp__.get(e[t]),y=Lyte.__nestRef__[f]=Lyte.__nestRef__[f]||new Map,m=Lyte.$.genMapId(y);y.set(m,!0),Lyte.setRecBindMap(Lyte.nestScp[f],{model:n._name,attr:t,pK:e.$.pK}),c[t]=f+"_"+m}else e[t]&&!Lyte.__nestScp__.has(e[t])?(l={data:e[t],dtype:e.__component__.component.__data[t],key:t,Error:e.__component__.component.data.errors},u=!0):(f=Lyte.__nestScp__.get(e[t]),y=Lyte.__nestRef__[f]=Lyte.__nestRef__[f]||new Map,m=Lyte.$.genMapId(y),y.set(m,!0),c[t]=f+"_"+m);if(l){var g=Lyte.nestScpId++;y=Lyte.__nestRef__[g]=Lyte.__nestRef__[g]||new Map,m=Lyte.$.genMapId(y),y.set(m,!0),Lyte.__nestScp__.set(e[t],g),h&&(Lyte.nestScp[g]={},Lyte.setRecBindMap(Lyte.nestScp[g],l)),u&&(Lyte.nestScp[g]=l),Lyte.nestScp[g]._data=e[t],c[t]=c[t]||g+"_"+m,Lyte.bindObj(e,t,g,[],new Map,void 0,d,r)}}}},Lyte.removeNestScp2Bind=function(e,t){if((e=e.model).has(t.model)){var a=e.get(t.model);if(a.has(t.pK)){var o=a.get(t.pK);o.has(t.attr)&&o.delete(t.attr),o.size||a.delete(t.pK)}a.size||e.delete(t.model)}},Lyte.setRecBindMap=function(e,t){var a=e.model=e.model||new Map,o=t.model,i=t.pK,r=t.attr;o&&!a.has(o)&&a.set(o,new Map),a=a.get(o),i&&!a.has(i)&&a.set(i,new Map),a=a.get(i),r&&!a.has(r)&&a.set(r,!0)},Lyte.bindObj=function(e,t,a,o,i,r,n,s){i=i||new Map;var l,d=null!=t?e[t]:e,p=!1;if(o.length||Lyte.__nestScp__.get(e)!==a||delete Lyte.nestScp[a].cyclic,o.length>1&&d&&Lyte.nestScp[a]&&Lyte.nestScp[a].hasOwnProperty("data")&&Lyte.nestScp[a].data===d)return i.get(d)&&(p=!0),void(Lyte.checkAndAddBind(d,a,o,p)&&Lyte.estObjScp(d,a,o,p));if(n&&(n.hasOwnProperty("items")||n.hasOwnProperty("properties")?l=n.items||n.properties:null==s&&1==n.watch&&(s=n.watch)),l=s?void 0:l,Array.isArray(d))i.get(d)?p=!0:(i.set(d,!0),d.forEach((function(e,t){o.push(t),(1==s||n&&n.hasOwnProperty("items")&&"object"==_typeof(n.items))&&Lyte.bindObj(d,t,a,o,i,void 0,l,s),o.pop()}))),Lyte.checkAndAddBind(d,a,o,p)&&Lyte.estObjScp(d,a,o,p);else if(d&&"object"==(void 0===d?"undefined":_typeof(d))){if(p=!1,i.get(d))p=!0;else for(var c in i.set(d,!0),d)o.push(c),(s||l&&l.hasOwnProperty(c))&&Lyte.bindObj(d,c,a,o,i,void 0,l?l[c]:void 0,s),o.pop();Lyte.checkAndAddBind(d,a,o,p)&&Lyte.estObjScp(d,a,o,p)}},Lyte.checkAndAddBind=function(e,t,a,o){return!e._scp||!e._scp.size||(!(e._scp.size&&e._scp.has(t)&&e._scp.get(t).paths.hasOwnProperty(a.join(".")))||(o&&(Lyte.nestScp[t].cyclic=!0),!1))},Lyte.estObjScp=function(e,t,a,o){e._scp||Object.defineProperty(e,"_scp",{value:new Map,enumerable:!1,configurable:!0});var i=e._scp;i.has(t)||i.set(t,{});var r=i.get(t);a=a?a.join("."):a,(r.paths=r.paths||{})[a]=!0;var n=Lyte.nestScp[t];n.cyclic||1!=o||(n.cyclic=!0)},Lyte.cmpObjs=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e){if(!t.hasOwnProperty(a))return!1;if(0==Lyte.cmpData(e[a],t[a]))return!1}return!0},Lyte.cmpData=function(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;if(e===t)return!0;for(var a=e.length,o=0;o<a;o++)if(0==Lyte.cmpData(e[o],t[o]))return!1}else{if(e&&t&&"object"==(void 0===e?"undefined":_typeof(e))&&"object"==(void 0===t?"undefined":_typeof(t)))return e===t||Lyte.cmpObjs(e,t);if(e!==t)return!1}return!0},Lyte.nestScpRmPath=function(e,t){if(e&&e.paths)for(var a in e=e.paths)a.startsWith(t+".")&&delete e[a]},Lyte.nestScpRemove=function(e,t,a){var o=e._scp;if(o&&o.size){if(a){Lyte.nestScpRmPath(o.get(t),a);var i=o.get(t),r=i?i.paths:void 0;r&&!Object.keys(r).length&&o.delete(t)}else o.delete(t);o.size||delete e._scp}},Lyte.rmNestScp=function(e,t,a,o,i){if(Array.isArray(e))a.get(e)||(a.set(e,!0),e.forEach((function(e,o){Lyte.rmNestScp(e,t,a,void 0,i)}))),Lyte.nestScpRemove(e,t,i);else if(e&&"object"==(void 0===e?"undefined":_typeof(e))){if(!a.get(e))for(var r in a.set(e,!0),e)Lyte.rmNestScp(e[r],t,a,void 0,i);Lyte.nestScpRemove(e,t,i)}},Lyte.removeNestScp=function(e,t,a,o,i,r,n,s){r=r||new Map,t=Number.parseInt(t);var l=Lyte.nestScp[t],d=Lyte.__nestRef__[t];s&&l.model&&Lyte.removeNestScp2Bind(l,s),i?(d&&d.has(a)&&d.delete(a),(!d||d&&!d.size)&&(delete Lyte.__nestRef__[t],Lyte.__nestScp__.has(e)&&Lyte.__nestScp__.delete(e),Lyte.rmNestScp(e,t,r,!0,o),n||delete Lyte.nestScp[t])):Lyte.rmNestScp(e,t,r,!0,o)},Lyte.resolvePromises=function(e){return"string"==typeof e||e instanceof Promise?e:Array.isArray(e)?function(e){var t=[],a=!1;return e.every((function(e,t){return!(e instanceof Promise||e&&!Array.isArray(e)&&"object"==(void 0===e?"undefined":_typeof(e))&&"function"==typeof e.then)||(a=!0,!1)})),a?new Promise((function(a,o){Promise.all(e).then((function(o){e.forEach((function(e,a){t[a]=o[a]})),a(t)}),(function(e){o(e),Lyte.error("Error on resolve promises",e)}))})):Promise.resolve(e)}(e):"object"==(void 0===e?"undefined":_typeof(e))?function(e){var t=[],a=[],o=Object.keys(e);if(o.forEach((function(o){var i=e[o];(i instanceof Promise||i&&!Array.isArray(i)&&"object"==(void 0===i?"undefined":_typeof(i))&&"function"==typeof i.then)&&(t.push(o),a.push(i))})),a.length){var i={};return new Promise((function(r,n){Promise.all(a).then((function(a){o.forEach((function(o){-1!=t.indexOf(o)?i[o]=a[t.indexOf(o)]:i[o]=e[o]})),r(i)}),(function(e){n(e),Lyte.error("Error on resolve promises",e)}))}))}return Promise.resolve(e)}(e):void 0},"complete"===document.readyState||"interactive"===document.readyState?r():document.addEventListener("DOMContentLoaded",(function(e){r()}),!0);var n=XMLHttpRequest.prototype.send;function s(e,t,a,o){var i=Lyte.__nodeXHRMap=Lyte.__nodeXHRMap||new Map,r=i.get(t);r||i.set(t,new Map),r=i.get(t);var n=t.lyteState=t.lyteState||[],s=o||a;-1==n.indexOf(s)&&n.push(s),t.setAttribute("lyte-state","");var d=r.get(e);if(d||(r.set(e,[]),d=r.get(e)),o)return d.push({state:o}),{target:t,event:e};d.push({isXHR:!0,xhr:a}),a.addEventListener("readystatechange",(function o(i){4==a.readyState&&(l(a,e,t),a.removeEventListener("readystatechange",o))}))}function l(e,t,a){var o=Lyte.__nodeXHRMap,i=o.get(a);if(i){var r=i.get(t);if(r&&r){var n=r,s=-1;if(n.every((function(t,a){return!(t&&t.isXHR&&t.xhr==e||"string"==typeof e&&t.state==e)||(s=a,!1)})),-1!=s){n.splice(s,1);var l=a.lyteState.indexOf(e);if(a.lyteState.splice(l,1),!n.length){i.delete(t);var d=a&&Array.isArray(a.lyteState)?a.lyteState.indexOf(e):-1;-1!=d&&a.lyteState.splice(d,1),a&&a.lyteState&&0==a.lyteState.length&&(a.lyteState=null,a.removeAttribute("lyte-state"))}i.size||o.delete(a)}}}}XMLHttpRequest.prototype.send=function(){var e,t=window.event,a=t?t.target:void 0;if(Lyte.getConfig("stateHandling"))if(t)e=t.type,/^(click|dblclick)$/.test(e)&&a&&a.getAttribute&&"false"!=a.getAttribute("lyte-state-handling")&&s(e,a,this);else{var o=Lyte&&Lyte.Router?Lyte.Router.getRouteInstance():void 0;if(o){var i=o.transition?o.transition.ev:void 0;i&&i.target&&i.target.getAttribute&&"false"!=i.target.getAttribute("lyte-state-handling")&&((Lyte.__transXHRMap=Lyte.__transXHRMap||new Map).set(o.transition,{currentAction:i,XHR:this}),s(i.type,i.target,this))}}n.apply(this,arguments)},Lyte.addEventListener("transitionStart",(function(e){var t=e.nextTrans;t&&e.prevTrans&&(window.event&&/^(click|dblclick)$/.test(window.event.type)?(t.ev=window.event,e.prevTrans.ev&&delete e.prevTrans.ev):409!=e.prevTrans.state&&308!=e.prevTrans.state||!e.prevTrans.ev||(t.ev=e.prevTrans.ev,delete e.prevTrans.ev))})),Lyte.addEventListener("afterRouteTransition",(function(e){if(e&&e.trans){var t=Lyte.__transXHRMap,a=!1;if(409==e.trans.state||308==e.trans.state){var o=window.event,i=e.trans.ev;if(!o||o&&i&&o!=i&&o.target==i.target&&o.type==i.type?e.trans.nested=!0:a=!0,t){var r=t.get(e.trans);r&&(l(r.XHR,r.currentAction.type,r.currentAction.target),t.delete(e.trans))}}else 200==e.trans.state&&(t&&t.delete(e.trans),a=!0);a&&e.trans.ev&&delete e.trans.ev}})),Lyte.addEventListener("beforeRouteTransition",(function(e){e&&e.prevTrans&&e.prevTrans.nested&&(e.trans.ev=e.prevTrans.ev,delete e.prevTrans.ev,e.trans.fromPrevTrans=!0)})),Lyte.setState=function(e){e||console.error("Please provide a state name");var t=window.event;if(/^(click|dblclick)$/.test(t.type)){var a=t.target;if(1==Lyte.getConfig("stateHandling")&&a&&a.getAttribute&&"false"!=a.getAttribute("lyte-state-handling")&&!a.getAttribute("lyte-state")){var o=Lyte.__stateMap=Lyte.__stateMap||new Map;if(o.get(e))console.error("There is already a open state by the name",e);else{var i=s(t.type,a,void 0,e);o.set(e,i)}}}},Lyte.removeState=function(e){e||console.error("Please provide a state name");var t=Lyte.__stateMap;if(t){var a=t.get(e);a&&(t.delete(e),l(e,a.event,a.target))}},Lyte.setConfig=function(e,t){(Lyte.__config=Lyte.__config||{})[e]=t},Lyte.getConfig=function(e){var t=Lyte.__config;if(t)return t[e]}}(),function(e){Lyte.Router=new function(t){var a,o,i,r,n,s,l,d,p,c,h,u="function",f="route",y="pending",m="completed",g="aborted",v="parseRouteMapping",b="constructRunLoop",P="RouteTransition",D="getDependencies",_="getResources",L="beforeModel",C="model",w="afterModel",T="redirect",x="renderTemplate",S="afterRender",A="beforeExit",E="didDestroy",M="willTransition",$="didTransition",k="onError",R="beforeLoad",O="onBeforeLoad",F="beforeRouteTransition",N="afterRouteTransition",I="resources",B="dependencies",H="lt-prop",U="start-from",V=H+"-"+f,j=H+"-fragment",q=H+"-dp",Y=H+"-qp",z=H+"-td",W=H+"-trans",K="refresh-"+f,G=H+"-"+K,J="link-to",X="LINK-TO",Q="stateChange",Z=x+" hook should return either component or HTML. Rendering of HTML directly into the DOM within the "+x+" hook is deprecated.",ee="MediumOrchid",te=Lyte.time,ae=Lyte.log,oe=JSON.parse,ie=this,re=document,ne=re.location,se={routeHash:{},urlCache:{},stickyRoutes:{},allLinks:{},activeLinkTags:[]},le=!0,de=!1,pe=be()?be().index:0,ce=!1,he=function(){},ue={},fe={getResources:I,getDependencies:B};function ye(e,t,a,o,i){t&&("object"!=(void 0===t?"undefined":_typeof(t))||Array.isArray(t)?Ze.call(this,{stopTrans:!0,err:Error(ut(203)).stack,instance:a,hook:o,index:i}):e.setData(t))}function me(e,t){var a=(t=t||i).routes[e];return{queryParams:a.__ltp.queryParams,dynamicParam:a.__ltp.dynamicParam}}function ge(e){return!e.aborted&&!e.paused}function ve(t){var a=t.replace?"replaceState":"pushState",o=se.history?pt($e(t.url,!0)):"#"+(se.slashAfterHash?pt(t.url):"/"==t.url[0]&&t.url.length>1?t.url.substring(1,t.url.length):t.url);t.title=t.title||re.title;var i=[t.state,t.title];o&&i.push(o),e.history[a].apply(history,i)}function be(){return history.state&&history.state.meta}function Pe(){return history.state&&history.state.data}function De(){!se.deferInit&&ie.init&&ie.init()}function _e(e){var t;return be()&&(t=be().url)||(t=se.history?Ee():Me((e&&e.newURL||ne.hash).replace(/.*#/,""))),t}function Le(e,t){if(2!=e.button&&!e.defaultPrevented){var a=t||e.currentTarget;if("A"!==a.children[0].tagName||!(1==e.ctrlKey||1==e.metaKey||2==e.which||a.children[0].hasAttribute("target")&&"_self"!==a.children[0].getAttribute("target"))){e.preventDefault();var o=Object.assign({},a.matched);o.route=Array.isArray(o.route)?o.route.join("."):o.route;var i,r=a.ltProp.replace||a.hasAttribute("lt-prop-replace"),n=ie[r&&"false"!=r?"replaceWith":"transitionTo"](a.matched),s={};if(i=a.getAttribute(W))try{s=oe(i)}catch(e){ft(498,W,t.outerHTML)}var l=a.getAttribute(z);if(l=l||s.data){if("string"==typeof l)try{l=oe(l)}catch(e){ft(498,z,t.outerHTML)}s.data=l}for(var d in s)n[d]=s[d]}}}function Ce(e,t){if(e.length)for(var a,o=0;a=e[o];o++)if(a!=t[o])return!1;return!0}function we(e){return{route:e.route.join("."),fragment:e.fragment,dynamicParams:e.dynamicParams.filter(xe),queryParams:e.queryParams}}function Te(e){return e.split(".").filter((function(e){return""!=e}))}function xe(e){return null!=e}function Se(e){te(v);var t=se.routes?se.routes:se.routes={},a={},o=[],i=[];return d={route:function(e,r,n){if("object"==(void 0===r?"undefined":_typeof(r))){if(r.path){if(lt(r.path,"?")){var s=r.path.split("?");r.defQP=nt(s[1]),r.path=s[0]||"/"}}else r.path=pt(e);r.queryParams&&(r.defQP=r.queryParams)}else(void 0===r?"undefined":_typeof(r))==u&&(n=r),r={path:pt(e)};if(a=He(o,se.routeHash)[r.path]={__lp:{}},"/"==r.path)o.push("/");else{var l=r.path;(St(l)||At(l))&&ct(l).every((function(e,t,o){if(St(e)||At(e)){var i;if(St(e))i=e.replace(":","");else{i=e.replace("*",""),r.wildcard=a.__lp.wildcard=!0,r.sufix=a.__lp.sufix=[];for(var n,s=t+1;n=o[s];s++)a.__lp.sufix.push(n)}return r.dkey=a.__lp.dkey=i,r.dIndex=a.__lp.dIndex=t,!1}return!0})),o.push(l)}var d=He(i,t)||t;i.push(e),a.__lp.route=Array.from(i),d[e]?Object.assign(d[e].__lp,r):d[e]={__lp:r},n&&n.call(this,{}),i.pop(),o.pop()}},e.call(d,{}),te(v),t}function Ae(e){if(!ie.init){var t,o=e.matched;e.currRoute=t=o.route.join("."),o.refreshRoute&&r.info.route,a={replace:o.replace||!(!o.refreshRoute||!ie.checkIfSameRoute(we(e.matched),we(r.matched)))||o.replace,title:i?i.title:re.title,fromHistory:!1};var s=function(e){var t=ke(e.matched);return t&&(e.path=a.url=t,Oe(t,Nt(e))),t}(e);return s&&n?(ae("Transitioning to "+t+" "+s,f),n._trans):(ae("Transition failed"),{})}ft(405)}function Ee(){if(se.history){var e=Me(ne.pathname+ne.search+(ne.hash||""));return pt(e=$e(e))}return pt(Me(ne.hash.replace("#","")))}function Me(e){return e||(e="/"),e}function $e(e,t){var a;if((a=se.baseURL)&&e){if(a=pt(a),0==e.indexOf(a)&&!t)return e.replace(a,"");if(t&&0!=e.indexOf(a))return a+e}return e}function ke(e){if(e&&e.route){var t;Array.isArray(e.route)?t=e.route.join("."):e.route=Te(t=e.route),e.queryParams=e.queryParams||{},e.dynamicParams=e.dynamicParams||[],e.refreshModel=!1;for(var a,o,r=!!i,n=e.dynamicParams.length!=e.route.length,s=0,l=this.tagName==X,d=se.routes,p=a="",c={},h=0,u=e.route.length;h<u;h++){if(o=e.route[h],r&&i.matched.route[h]!=o&&(r=!1),!(d=He(o,d))&&!d.__lp&&d.__lp.path)return ft(422,e.route,h),!1;var f=d.__lp.def;f||l||ft(422,e.route,h);var y,m=d.__lp.path;if(f&&f.__lp){if(f.queryParams){y=d.__lp.defQP;var g=f.__lp.qpdef;for(var v in g)e.queryParams.hasOwnProperty(v)||(r&&g[v].sticky?e.queryParams[v]=i.routes[h].__ltp.queryParams[v]:y&&y.hasOwnProperty(v)&&(c[v]=e.queryParams[v]=y[v])),"pathProcessor"!=ke.caller.name&&g[v].cipher&&se.cipher.encryptor&&(e.queryParams[v]=se.cipher.encryptor(e.queryParams[v])),l||e.refreshModel||!g[v].refreshModel||(e.refreshModel=!0)}}else if(y=d.__lp.defQP)for(var v in y)e.queryParams&&!e.queryParams.hasOwnProperty(v)&&(e.queryParams[v]=y[v]);if(d.__lp.dkey){var b=ct(m),P=ct(m),D=n?s:h;if(!e.dynamicParams||!e.dynamicParams[D])return ft(499,o,l?this:void 0),!1;b[d.__lp.dIndex]=encodeURI(e.dynamicParams[D]),P[d.__lp.dIndex]=pt("<<dp>>"),p+=pt(P.join("/")),a+=pt(b.join("/")),s++}else p+=pt(m),a+=pt(m)}return se.stickyRoutes[t]||(se.urlCache[t]={url:ht(p),defQP:c}),Re(a,e)}}function Re(e,t){if(e="/"==e[e.length-1]&&1!=e.length?e.slice(0,-1):e,t.queryParams){var a=!0;for(var o in t.queryParams)null!=t.queryParams[o]&&(a?(e+="?",a=!1):e+="&",e+=o+"="+encodeURIComponent(t.queryParams[o]))}return se.history&&t.fragment&&(e=e+"#"+t.fragment),ht(e)}function Oe(e,t,o){te(P),e&&se.baseURL&&-1==re.location.pathname.indexOf(se.baseURL)?ft(400):(t=t||(!le&&be()&&be().matched&&be().url==Ee()?$t(be().matched):yt(e)))&&t.matched.route.length&&(clearTimeout(h),t.prevTrans=t.prevTrans||Lyte.Router.__lp.prevTrans,t.path=t.path||e,t.transComp=t.transComp||Fe(t.prevTrans,t.matched,t.R),function(e){var t,o;(n=new Ve(e)).url=e.path,n.runLoop={},n._trans=(o=new xt(t=n),t.state=o.state=201,o),Lyte.extendEventListeners(n._trans),n.routes=function(e){for(var t,a,o=e.matched,i=[],r=e.prevTrans,s=!0,l=0;a=o.route[l];l++){if(!(t=ie.__lp.getDefinition(n.matched._routes[l])))return!1;r&&s&&r.matched&&r.matched.route[l]==a?i.push(new Rt(i,t,l,e,r.routes[l])):(i[l]=new Rt(i,t,l,e),s=!1)}return r=void 0,i}(e),l?((a=l).url=e.path,n._trans.data=Pe()||{},a.replace=!0,l=void 0):n._trans.data&&ie.history.replaceState(n._trans.data)}(c=t),Lyte.triggerEvent("transitionStart",{prevTrans:r&&r._trans,nextTrans:n._trans}),h=setTimeout((function(){var e;c=void 0,i&&102==i.state&&n&&ie.checkIfSameRoute(n.info,i.info)&&!i.aborted&&JSON.stringify(i._data)==JSON.stringify(n._trans.data)?1==i.iPause&&i.resume():(i&&102==i.state&&i.abort({state:409}),(i=n)._data=i._trans.data?Lyte.deepCopyObject(i._trans.data):void 0,t.previous=!0,i.transComp=t.transComp,i.runLoop=Be(p=t),i._trans.data&&(a.data=i._trans.data),a.state=i.stateObj={meta:{matched:(e={replace:a.replace,data:a.data,url:i.url,matched:i.matched,fromHistory:a.fromHistory}).matched,url:e.url,index:e.fromHistory?be()?be().index:pe:e.replace&&be()?be().index:pe+=1},data:e.data},function(e){ie.history||function(){function e(){return this}function t(e,t,a,o){o||be().index++,ve({state:{meta:be(),data:e},title:t,url:a})}ie.history=new e,Object.defineProperty(e.prototype,"state",{get:function(){return Pe()},set:function(e){return de?de=!1:Lyte.warn("setting on data will not be pushed to history. If needed, use `LR.history.replaceState`."),e}}),e.prototype.replaceState=function(){t.apply(Array.from(arguments).push(!0))},e.prototype.pushState=function(){t.apply(Array.from(arguments))}}(),ie.history.index=e.state.meta.index,ie.history.fromHistory=!!e.fromHistory&&(r?r.stateObj.meta.index<i.stateObj.meta.index?"forward":"back":"reload"),de=!0,ie.history.state=Pe()||{},ie.history.initial=le,ie.history}(a),i.run())}),0))}function Fe(e,t,a){var o,i,r=!0,n=!0,s=[],l=[],d=[],p=t.route.join("."),c="";if(e){for(var h,u=e.matched,f=t.refreshRoute&&p==e.info.route?t.refreshRoute:t.startFrom,y=0,m=t.route.length;y<m;y++)c=c+(c?".":"")+(h=t.route[y]),!n||h!=u.route[y]||f&&c==f?(n=!1,null==o&&e.routes[y]&&e.routes[y].__ltp.rendered&&e.routes[y].outlet&&(o=y),d.push(h)):(i=a?a[y]:ie.__lp.getDefinition(h.slice(0,y)),r&&Ne(i,y,u,t)?(l.push(h),e.routes[y].__ltp.rendered?s.push(h):d.push(h)):(r=!1,d.push(h)));if(u.route.length>t.route.length){var g=t.route.length;null==o&&e.routes[g].__ltp.rendered&&(o=g)}}else d=d.concat(t.route);return{rendered:s,unRendered:d,common:l,templateToRemove:o}}function Ne(e,t,a,o){var i=!0,r=He(e.__lp.objPath,se.routes);return!e.queryParams&&!r.__lp.dkey||(!r.__lp.dkey||a.dynamicParams[t]==o.dynamicParams[t])&&(e.queryParams&&o.refreshModel&&e.queryParams.every((function(t){return!i||!e.__lp.qpdef[t].refreshModel||!o.queryParams&&!a.queryParams||o.queryParams[t]==a.queryParams[t]||(i=!1)})),i)}ue[D]=ue[_]=function(e,t){var a=this.routes[t],o=e==D?"loadDependencies":"loadResources",r=this.R[t][e];if(a.__lp[fe[e]+"Loaded"]=!0,r&&ge(this)){var s=Je.call(this,r,this.routes[t],e,t,me(t));if(s&&s instanceof Promise)return s;a.__lp[fe[e]]=s,a.__lp[fe[e]+"Loaded"]=!s||!(s.length||"object"==(void 0===s?"undefined":_typeof(s))),s&&(e==D&&console.warn("Requesting files in getDependencies will stall execution of route till download completes. Please validate files before requesting."),a.__lp[o]=function(){a.__lp[o]=y},function(e){var t=function(){};t.internal={};var a=e.r,o=e.reqType,r=e.index,s=a.__lp,l=t.internal.hook=i.prom.hook;t.internal.route=s.objPath,je(o+" before inject",this.transId,s.objPath),Lyte.injectResources(s[o],t,function(e,t){if(!se.execRouteRequirementsOnDemand&&(!i.aborted||s.objPath==this.routes[r].__lp.objPath&&i.transComp.redirected&&r<=i.transComp.common.length-1||c&&c.transComp.redirected&&r<=c.transComp.common.length-1)){i.aborted&&(i=ie.__lp.trans.aborted?n:!ie.__lp.trans.aborted,s=i.routes[r].__lp);var d=l==D?"loadDependencies":"loadResources",p=l==D?"errorDependencies":"errorResources";i.pending[o].has(r)?((s=i.routes[r].__lp)[o+"Loaded"]=!0,delete s[d],i.pending[o].delete(r),t.length?(je(o+" inject completed","failure",i.transId),i.paused||i.pause({iPause:!0}),ue[k].call(i,l,r,a.__lp[p]=t,424)):(je(o+" inject completed","success",i.transId,s.objPath),i.pending.forceFetch.has(r)?(i.pending.forceFetch.delete(r),at.call(i,i.runLoop.forceFetch,i.fRunningProm.resolve,i.runLoop.forceFetch[r][0])):it.call(i,i.runLoop,"current",i.runningProm.resolve))):s[d]=function(){if(t.length)return je(o+" inject completed","failure",i.transId,this.objPath),i.routes[r].__lp[o+"Loaded"]=!0,delete i.routes[r].__lp[d],i.paused||i.pause({iPause:!0}),ue[k].call(i,l,r,a.__lp[p]=t,424),!1;i.routes[r].__lp[o+"Loaded"]=!0,delete i.routes[r].__lp[d]}}}.bind(i),{defer:function(e){var t=e.injectJS,n=e.files,d=l==D?"loadDependencies":"loadResources",p=l==D?"errorDependencies":"errorResources",c=function(e){i.routes[r].__lp[o+"Loaded"]=!0,e.length?(je(o+" inject completed","failure",i.transId,s.objPath),i.paused||i.pause({iPause:!0}),ue[k].call(i,l,r,a.__lp[p]=e,424)):(je(o+" inject completed","success",i.transId,s.objPath),i.pending[o].has(r)&&(i.pending[o].delete(r),i.pending.forceFetch.has(r)?(i.pending.forceFetch.delete(r),at.call(i,i.runLoop.forceFetch,i.fRunningProm.resolve,i.runLoop.forceFetch[r][0])):it.call(i,i.runLoop,"current",i.runningProm.resolve)))};"pending"==s[d]?(!i.aborted||i.transComp.redirected&&r<=i.transComp.common.length-1)&&t(n,(function(e,t){je(o+" after inject",i.transId,this.objPath),delete i.routes[r].__lp[d],c(t)})):s[d]=function(){t(n,(function(e,t){je(o+" after inject",i.transId,this.objPath),delete i.routes[r].__lp[d],c(t)}))}}.bind(i)})}.call(this,{reqType:fe[e],r:a,index:t}))}return Ge()},ue[L]=ue[C]=ue[w]=function(e,t){var a=this.routes[t],o=this.R[t][e],i=[this.R[t][e],a,me(t)];if(e==w&&i.splice(2,0,a.currentModel),o){var r=function(t){a.$[e]=t,e==C&&(a.currentModel=t),delete o.then};o.then={success:r,failure:r}}return Ge.apply(this,i)},ue[T]=function(e,t){var a=this.routes[t],o=[this.R[t][e],a,me(t)];return o.splice(2,0,a.currentModel),Ge.apply(this,o)},ue[k]=function(e,t,a,o,r){tt.call(i,i.prom),i._trans.triggerEvent(k,{error:a,hook:e});for(var n=this.routes[t];t>=0&&!this.aborted&&this.paused;t--){var s=this.routes[t];if(ae(k+" of "+s.routeName,f,ee),0==Xe.call(this,k,t,[a,this._trans,me(t),e]))break}Qe(a,e,n.routeName,o,r)},ue[M]=function(e,t){return 0==Xe.call(r,e,t,[i._trans])&&rt(i.runLoop.previous,e),Ge()},ue[F]=function(){if(ge(this)){var e;(e=r&&r._trans)&&(delete e.abort,delete e.pause);var t={prevTrans:e,trans:i._trans,history:ie.history};ie[F](t.prevTrans,t.trans,t.history),i._trans.triggerEvent(F,t),Lyte.triggerEvent(F,t)}return Ge()},ue[N]=function(e){ie[N](e),i._trans.triggerEvent(N,{trans:e}),Lyte.triggerEvent(N,{trans:e})},ue[R]=function(e,t){return Je.call(this,this.R[t][e],this.routes[t],e,t,me(t)),Ge()},ue[O]=function(){return new Promise((function(e,t){for(var a=i.matched.route.length,o=1;o<=a&&ge(i);o++){var r=a-o;if(i.R[r].actions&&i.R[r].actions.onBeforeLoad&&console.log(O+" action is depricated. Use beforeLoad callback"),0==Xe.call(i,O,r,[me(r)])||o==a){e();break}}}))},ue[S]=ue[$]=function(e,t){return new Promise(function(a,o){var r=setTimeout(function(){if(e==S){var r=this.routes[t];r.__ltp.rendered=!0,Ge.call(this,this.R[t][e],r,r.currentModel,me(t),r.component).then((function(e){i.routes[t+1]||i._trans.triggerEvent(S),a(e)}),(function(e){o(e)}))}else ue.removeTemplate.call(this),0==Xe.call(this,e,t,[me(t),i._trans])&&(rt(i.runLoop.current,e),t=0),a(),0==t&&dt({state:200})}.bind(this,e,t),0);this.fns.push(r)}.bind(this))},ue[A]=function(e,t){var a=r.routes[t],o=r.R[t][e];return Ge.call(this,o,a,a.currentModel,me(t,r))},ue[x]=function(e,t){var a=this.routes[t],o=this.R[t];if(o[e]){ue.removeTemplate.call(this);var i=Je.call(this,o[e],a,e,t,a.currentModel,me(t));if(ge(this))if(i&&(a.outletName=i.outlet)){var r,n=a.currentModel;if(a.outlet=r=function e(t,a){var o;if(a){if(!(o=a.outlet?a.outlet.querySelector(t):void 0))return e(t,a.parent)}else(o=re.querySelector(t))||ft(428,t);return o}(i.outlet,a.parent)){var s={outlet:i.outlet,route:a};if(i.component)if(a.component&&!i.reRender&&a.component.tagName.toLocaleLowerCase()==i.component&&a.outlet==r&&r.contains(a.component))ye.call(this,a.component,n,a,e,t);else{Ye(s);var l=re.createElement(i.component);l._route=a.__lp.objPath,ye.call(this,l,n,a,e,t),r.innerHTML="",r.appendChild(a.component=l)}else if(i.html){a.component=void 0,Ye(s),r.innerHTML=i.html;var d=r.getElementsByTagName("script");d.length&&function(e){for(var t,a=0;t=e[a];a++){for(var o,i=t.parentNode,r=re.createElement("script"),n=0;o=t.attributes[n];n++)r.setAttribute(o.name,o.value);r.innerHTML=t.innerHTML,i.appendChild(r),i.removeChild(t)}}(Array.from(d))}}}else Lyte.warn(Z)}else ge(this)&&this.runLoop.templateToRemove&&this.R.length==t+1&&ue.removeTemplate.call(this);return Ge()},ue.removeTemplate=function(){var e=this.runLoop.templateToRemove;this.cleared||(r&&e&&function(e){for(var t,a=0,o=e.length;a<o;a++)for(var r,n=(t=e[a]).routes.length-1;n>=t.index;n--)(r=t.routes[n]).outlet&&(Ye({outlet:r.outletName,route:r}),r.outlet.innerHTML="",i.routes[n]&&i.routes[n].__lp.objPath==r.__lp.objPath||ze.call(this,r,n,t))}(e),this.cleared=!0,s!=this&&(s=this),delete this.runLoop.templateToRemove,Lyte.removeFromCache())},this.configureDefaults=function(e){e=e||{},se.history="html5"==e.history,se.baseURL=e.baseURL,se.slashAfterHash=null==e.slashAfterHash||e.slashAfterHash,se.deferInit=e.deferInit||!1,se.preserveUrlOnBrowserNavigation=e.preserveUrlOnBrowserNavigation,se.linkActiveClass=e.hasOwnProperty("linkActiveClass")?e.linkActiveClass:"",se.cipher=e.cipher,se.queryParamOptions={sticky:!e.queryParamOptions||!e.queryParamOptions.hasOwnProperty("sticky")||e.queryParamOptions.sticky},Lyte.$.prefetchSupport&&0!=e.execRouteRequirementsOnDemand?se.execRouteRequirementsOnDemand=!0:(Lyte.$.replaceOldInjectResource&&Lyte.$.replaceOldInjectResource(),se.execRouteRequirementsOnDemand=!1),this.__lp.config=se},this.__lp={version:"3.2.7",pendingReg:[],getDefinition:function(e,t){return"*"==e?se.routes:(t=He(e,t=t||se.routes))&&t.__lp&&t.__lp.def||void 0}},this.configureRoutes=function(e){this.__lp.config||this.configureDefaults(),Se.call(this,e);for(var t=0,a=this.__lp.pendingReg.length;t<a;t++)wt.apply({},this.__lp.pendingReg[t]);this.__lp.pendingReg=[],Lyte.domContentLoaded(De),this.__lp.routesConfigured=!0},this.init=function(t){var a;return delete this.init,this.popstate=function(e){var t,a;if(se.preserveUrlOnBrowserNavigation){if(ce)return void(ce=!1);be()&&r&&r.stateObj.meta.index!=be().index&&(ce=!0,a=_e(e),t=r.stateObj.meta.index-be().index,history.go(t))}a=a||_e(e),l={fromHistory:!0,url:a,goValue:t},e&&history.state&&(l.data=history.state),Oe(a)},e.addEventListener("popstate",this.popstate),se.history?this.popstate():Oe((l={fromHistory:!0,url:Ee()}).url),(a=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,HTMLElement),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.matched&&this.hasAttribute("lyte-rendered")){var o=this.children[0];e===H?(this.handleLtProp(),this.hasAttribute("lt-prop-custom")||this.setCustomAttributes(o,!0),"A"===o.tagName&&this.constructHref(o)):/^(lt-prop-route|lt-prop-fragment|lt-prop-dp|lt-prop-qp)$/.test(e)?(this.getMatchedObject(),"A"===o.tagName&&this.constructHref(o,e,t,a)):this.hasAttribute("lt-prop-custom")||o.setAttribute(e.substring(8),a)}}},{key:"connectedCallback",value:function(){if(this.ltProp=this.ltProp||{},this.handleLtProp(),this.hasAttribute("lyte-rendered"))this.matched||this.getMatchedObject();else{var e;if(this.hasAttribute("lt-prop-custom")||this.ltProp.custom)this.getMatchedObject(),(e=this.getElementsByTagName("A")[0])&&this.constructHref(e);else{for(e=re.createElement("a");this.childNodes[0];)e.appendChild(this.childNodes[0]);this.setCustomAttributes(e),this.getMatchedObject(),this.constructHref(e),this.appendChild(e)}Lyte.Component?this._linkToEventId=Lyte.Component.addLyteEventListener(this,"click",(function(e){Le(e,this)}),this):this.addEventListener("click",Le),this.setAttribute("lyte-rendered","")}}},{key:"modifyLinkToTagsInRoute",value:function(e){var t=Array.isArray(this.matched.route)?this.matched.route.join("."):this.matched.route,a=se.allLinks[t];if(e){if(a){var o=a.indexOf(this);-1!=o&&a.splice(o,1)}}else a?a.push(this):se.allLinks[t]=[this];if(se.stickyRoutes[t]){var i=se.routes,r=void 0;if(e){if(!this.matched)return;r=e}else r=this.matched.route;if(!r)return;for(var n=0,s=(r=Array.isArray(r)?r:Te(r)).length;n<s;n++){if(!(i=He(r[n],i))||!i.__lp)return ft(422,r,n),!1;var l=i.__lp.def.__lp;if(e){var d=l.stickyLinks.indexOf(this);-1!==d&&l.stickyLinks.splice(d,1)}else l.qpdef&&l.stickyLinks.push(this)}}}},{key:"disconnectedCallback",value:function(){var e=this.modifyLinkToTagsInRoute.bind(this);Lyte.Component.shouldIgnoreDisconnect()||(this.matched&&this.matched.route&&e(this.matched.route),this._linkToEventId&&Lyte.Component.removeLyteEventListener(this,this._linkToEventId))}},{key:"handleLtProp",value:function(){var e=this.getAttribute(H);if(e)try{this.ltProp=oe(e)}catch(e){Lyte.warn("Error while parsing ltProp in link-to")}}},{key:"setCustomAttributes",value:function(e,t){for(var a in this.ltProp)/^(id|class|style|target)$/.test(a)&&e.setAttribute(a,this.ltProp[a]);if(!t)for(var o,i,r=0;o=this.attributes[r];r++)(i=o.nodeName)!==H&&/^(lt-prop-id|lt-prop-rel|lt-prop-class|lt-prop-style|lt-prop-target|lt-prop-tabindex|lt-prop-aria-label)$/.test(i)&&e.setAttribute(i.substring(8),o.nodeValue)}},{key:"constructHref",value:function(e,t,a){var o,i=this.modifyLinkToTagsInRoute.bind(this);(o=ie.getURL.call(this,this.matched))&&(e.setAttribute("href",o),t===V?(i(a),i()):i())}}],[{key:"observedAttributes",get:function(){return[V,q,j,Y,H,"lt-prop-class","lt-prop-data-tabindex","lt-prop-data-tabindex","lt-prop-tabindex","lt-prop-aria-label","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target"]}}]),t}()).prototype.getMatchedObject=function(){var e=this.matched||{},t=this.getAttribute.bind(this),a=t(q)||this.ltProp.dp||[],o=t(Y)||this.ltProp.qp||{};if(!(a instanceof Array))try{a=oe(a)}catch(e){return void ft(498,"dynamicParams",this.outerHTML)}if(!(o instanceof Object))try{if(o=oe(o),Array.isArray(o))return void ft(498,"queryParams",this.outerHTML)}catch(e){return void ft(498,"queryParams",this.outerHTML)}return e.route=t(V)||this.ltProp.route,e.fragment=t(j)||this.ltProp.fragment,e.dynamicParams=a||[],e.queryParams=o||{},e.refreshRoute=null!=t(G)?t(G):this.ltProp[K],e.refreshRoute=""==e.refreshRoute||"true"==e.refreshRoute?e.route:e.refreshRoute,e.startFrom=t("lt-prop-start-from")||this.ltProp[U],this.matched=e},customElements.define(J,a),this},this.beforeScroll=this[F]=this[N]=he,this.checkIfSameRoute=function(e,t){return!(e.route!=t.route||e.fragment!=t.fragment||e.dynamicParams.length!==t.dynamicParams.length||!Et(e.queryParams,t.queryParams))&&Ce(e.dynamicParams,t.dynamicParams)},this.addRoutes=function(e,t){var a=setInterval((function(){if(Lyte.Router.__lp.routesConfigured){clearInterval(a),Lyte.warn("addRoutes function will be deprecated from next version");var o=He(t?t.split("."):[],se.routes);if(!o)return void console.error(t+" is not specified in router map.");Object.assign(o,Se.call(d,e))}}),0)},this.replaceWith=function(){var e=$t.call(this,Mt.apply(this,arguments));if(e)return e.matched.replace=!0,Ae(e)},this.transitionTo=function(){var e;if(e=$t.call(this,Mt.apply(this,arguments)))return Ae(e)},this.getURL=function(e){if(e){e.route?e.queryParams||(e.queryParams={}):e=Mt.apply(this,arguments);var t,a,o,i=this.tagName==X,r=se.urlCache;if(!se.queryParamOptions.sticky&&(o=r[Array.isArray(e.route)?e.route.join("."):e.route])){if(t=o.url,a=e.dynamicParams&&e.dynamicParams.length)for(var n=0;n<a;n++)t=t.replace("<<dp>>",e.dynamicParams[n]);else-1!=t.indexOf("<<dp>>")&&ft(499,e.route,i?this:void 0);for(var s in o.defQP)!e.queryParams[s]&&o.defQP[s]&&(e.queryParams[s]=o.defQP[s]);t=Re(t,e)}else t=i?ke.apply(this,arguments):ke.call(this,e);if(t)return se.history?$e(t,!0):"#"+t}},this.getRoute=function(e){var t=yt($e(e),!0);return t&&(t.dynamicParams=t.dynamicParams.filter(xe),t.route=t.route.join(".")),t};var Ie=[L,C,w,T,x,S];function Be(e){te(b);var t=e.transComp,a=[],o={},l=[],d=[],p=[],c=[],h=[];if(e.previous){var f=[{hook:F}];if(r){for(var m=r.matched.route.length-1;r.matched.route[m];m--){var g=i.matched._routes[m];g&&g.join(".")==r.matched._routes[m].join(".")||p.push({hook:A,index:m}),c.push({hook:M,index:m})}return te(b),{previous:c.concat(f).concat(p),current:p}}return te(b),{previous:f}}return t.rendered&&t.rendered.length&&t.rendered.forEach((function(e,t){i.routes[t].__ltp.rendered=!0,a.push({hook:T,index:t}),h.push({hook:$,index:i.matched.route.length-t-1})})),t.unRendered&&t.unRendered.length&&(l.push({hook:R,index:t.rendered.length}),t.unRendered.forEach((function(e,r){var s=t.rendered.length+r;(!t.redirected||t.redirected&&t.redirected.index!=s)&&(d=d.concat([{hook:D,index:s},{hook:_,index:s}]));var l=i.routes[s];(_typeof(l.forceFetch)==u?Je.call(this,l.forceFetch,l,"forceFetch",s,me(s)):l.forceFetch)?(o[s]=[{hook:L,index:s},{hook:C,index:s},{hook:w,index:s}],n.routes[s].__ltp.fetchStatus=y,[T,x,S].forEach((function(e){a.push({hook:e,index:s}),e==x&&t.unRendered[r+1]&&a.push({hook:R,index:r+1})}))):Ie.forEach((function(e){t.redirected&&t.redirected.index==s&&e!=T?-1==[L,C,w].indexOf(e)&&a.push({hook:e,index:s}):a.push({hook:e,index:s})})),h.push({hook:$,index:i.matched.route.length-s-1})}))),(a={previous:[],current:[{hook:O}].concat(l).concat(d.concat(a).concat(h)),forceFetch:o}).templateToRemove=r&&r.runLoop.templateToRemove?r.runLoop.templateToRemove:[],null!=t.templateToRemove&&a.templateToRemove.push({index:t.templateToRemove,routes:s.routes}),te(b),a}function He(e,t){if(t)return e?(Array.isArray(e)||"string"!=typeof e||(e=Te(e)),e.every((function(e){return t&&t[e]?(t=t[e],!0):t=!1})),t):t}var Ue=0;function Ve(e){this.transId=Ue+=1,this.matched=e.matched,this.target=e.matched.target,this.fns=[],this.pending={dependencies:new Set,resources:new Set,forceFetch:new Set},this.info={route:e.matched.target,queryParams:e.matched.queryParams,dynamicParams:e.matched.dynamicParams.filter(xe)},e.matched.fragment&&(this.info.fragment=e.matched.fragment),this.R=e.R,this.running=this.aborted=this.paused=!1,this.abort=function(e){var t;a&&a.goValue&&(ce=!1),this.abort=he,(t=this).runningProm&&t.runningProm.reject(g),t.fRunningProm&&t.fRunningProm.reject(g),this.aborted=!0,e||(e={state:308}),this.running&&ae("Transition aborted.",f),e.iAbort||delete this.runLoop.templateToRemove,dt(e)}.bind(this),this.pause=function(e){return ae("Transition paused.",f),e&&e.iPause?this.iPause=!0:(this.iPause=!1,this.state=this._trans.state=307,this._trans.triggerEvent(Q,this.state)),this.paused=i.prom||!0,this.resume=this._trans.resume=function(e){if((e=e||this).prom==e.eProm){if(delete e._trans.resume,delete e.resume,ae("Transition resumed.",f),e.paused){var t,a=e.prom;if(1!=e.paused&&(t=e.paused.state),e.runLoop[t])if("forceFetch"==t){var o=e.runLoop.forceFetch[a.index];o[0]&&a.hook==o[0].hook&&o.splice(0,1)}else e.runLoop[t][0]&&e.runLoop[t][0].hook==e.paused.hook&&e.runLoop[t][0].index==e.paused.index&&rt(e.runLoop[t],e.paused.hook,e.paused.index);e.iPause=e.paused=!1,e.state=e._trans.state=102,this._trans.triggerEvent(Q,e.state),this.forceFetchRunning?e.runLoop.forceFetch[a.index][0]?e.run(e.runLoop.forceFetch[a.index][0]):(e.routes[a.index].__ltp.fetchStatus=m,null!=e.pending.waitingForFF&&e.pending.waitingForFF==a.index&&(delete e.pending.waitingForFF,e.run())):(t&&"forceFetch"==t&&!e.runLoop.forceFetch[a.index][0]&&(e.routes[a.index].__ltp.fetchStatus=m),e.run())}}else e.pendingResume||(e.pendingResume=e.resume,delete e._trans.resume,delete e.resume)}.bind(this),this._trans}.bind(this)}function je(){Lyte.debug&&console.log.apply(this,Array.from(arguments))}var qe=function(e,t){var a=1==e.__lp[t+"Loaded"],o=t==B?"loadDependencies":"loadResources";return!e.__lp[o]||"function"!=typeof e.__lp[o]||a?a:0!=e.__lp[o]()&&1==e.__lp[t+"Loaded"]};function Ye(e,t){Lyte.triggerEvent("beforeTemplateDestroy",e)}function ze(e,t,a){ae(E+" of "+e.routeName,f,ee),Je.call(this,e.didDestroy,e,E,t,e.currentModel,me(t,a))}var We=[D,_,L,C,w];function Ke(e){return lt(We,e)}function Ge(e,t){if(e){var a,o=arguments,r=i,n=i.prom,s=n.hook,l=n.index,d=Ke(s),p=this;return new Promise((function(c,h){try{var u=e.apply(t,Array.from(o).slice(2));d&&u&&(u=Lyte.resolvePromises(u)),a=Promise.resolve(u)}catch(e){return void Ze.call(p,{hook:s,index:l,stopTrans:d,err:e,instance:t,promise:{resolve:c,reject:h}})}a.then((function(a){"previous"!=n.state&&i._trans!=t.transition?h("old transition's promise rejected"):(c(a),e.then&&e.then.success.apply(this,arguments))}),(function(a){r.prom=n,h(a),e.then&&e.then.failure.apply(this,arguments),Ze.call(p,{hook:s,index:l,stopTrans:d,err:a,instance:t,PR:!0})}))}))}return Promise.resolve()}function Je(e,t,a,o){if(e){var i=Ke(a);try{return e.apply(t,Array.from(arguments).slice(4))}catch(e){return void Ze.call(this,{hook:a,index:o,stopTrans:i,err:e,instance:t})}}}function Xe(e,t,a){var o,i=this.routes[t];if(i.actions&&(o=i.actions[e]))try{if(0==o.apply(i,a))return!1}catch(t){return Qe(t,e,i.routeName),!1}}function Qe(e,t,a,o,i){if("string"==typeof e||"object"==(void 0===e?"undefined":_typeof(e))&&e.stack&&!e.$){e.stack||(e=Error(e)),e.$=!0;var r=ut(o||420,t,a);e.stack=e.stack.replace(e.message,e.message=e.message+"\n\t"+r),ft(e)}else ft(o,t,a,e,i&&i.PR)}function Ze(e){var t=e.instance,a=e.stopTrans,o=e.err,r=e.hook,n=e.index;a?(i.pause(),ue[k].call(this,r,n,o,420,e)):(Qe(o,r,t.routeName),e.promise&&e.promise.resolve())}function et(e,t,a,o,i){o=o||he,i=i||function(e){e!=g&&ft(e)},new Promise(function(o,i){"nestedForcedPromises"==t?(this.fRunningProm={resolve:o,reject:i},e.call(this,this.runLoop.forceFetch,o)):(this.runningProm={resolve:o,reject:i},e.call(this,this.runLoop,a,o))}.bind(this)).then(o,i)}function tt(e){if(i.eProm=e,this.pendingResume){var t=this.pendingResume;delete this.pendingResume,t()}}function at(e,t,a){if(ge(this)&&e){if(!a){for(var o in e){var r=e[o][0];r&&(r.running||at.call(this,e,t,r))}return}this.R[a.index];var n=this.routes[a.index];if(a.state="forceFetch",i.prom=a,a.hook==L&&!qe(n,B))return this.pending.dependencies.add(a.index),void this.pending.forceFetch.add(a.index);ot(a),e[a.index][0].running=!0,e[a.index].splice(0,1),ue[a.hook].call(this,a.hook,a.index).then(function(o){tt.call(i,i.prom),a.hook==w?(n.__ltp.fetchStatus=m,null!=this.pending.waitingForFF&&this.pending.waitingForFF==a.index&&(delete this.pending.waitingForFF,it.call(this,this.runLoop,"current",this.runningProm.resolve))):a.hook==C?e[a.index][0]&&e[a.index][0].hook==w&&at.call(this,e,t,e[a.index][0]):e[a.index][0]&&e[a.index][0].hook==C&&at.call(this,e,t,e[a.index][0])}.bind(this),(function(){}))}else this.forceFetchRunning=!1}function ot(e){if(Lyte.debug){var t=e.hook,a=e.index;if(-1!=[F,O].indexOf(e.hook))return void ae(t,f,ee);var o="previous"==e.state?r.R[a]:i.R[a];ae(t+" of route "+o.routeName,f,ee)}}function it(e,t,a){if(ge(this)){var o=e[t];if(o&&o.length){var r,n=o[0],s=this.R[n.index],l=this.routes[n.index];if(n.hook==L&&(r=qe(l,B)),n.hook==L&&!r)return void this.pending.dependencies.add(n.index);if(n.hook==x&&!qe(l,I))return void this.pending.resources.add(n.index);if(n.hook==T&&s.forceFetch&&l.__ltp.fetchStatus==y)return this.forceFetchRunning||(this.forceFetchRunning=!0,et.call(this,at,"nestedForcedPromises")),void(this.pending.waitingForFF=n.index);n.state=t,i.prom=n,ot(n),te(n.hook+n.index),ue[n.hook].call(this,n.hook,n.index).then(function(o){tt.call(i,i.prom),te(n.hook+n.index),this.runningProm.resolve==a&&(rt(e[t],n.hook,n.index),it.call(this,e,t,a))}.bind(this))}else a&&a()}else this.paused&&this.runningProm&&this.runningProm.reject(g)}function rt(e,t,a){for(var o,i=0;o=e[i];i++)if(o.hook==t)if(null!=a){if(a==o.index){e.splice(i,1);break}}else e.splice(i,1),i--}function nt(e){if(e){for(var t,a={},o=lt(e,"?")?e.split("?")[1]:e,i=0,r=(o=lt(o,"&")?o.split(/&/g):[o]).length;i<r;i++)a[(t=o[i].split("="))[0]]=t[1]?decodeURIComponent(t[1]):t[1];return a}}function st(e,t){for(var a=0,o=e.length;a<o;a++)t.shift()}function lt(e,t){return-1!=e.indexOf(t)}function dt(e){if(i.running){i==n&&(n=void 0),o&&(clearInterval(undefined),ve(o),o=void 0),bt(i.info);for(var t=0,a=i.fns.length;t<a;t++)clearTimeout(i.fns[t]);var l;i.pendingResume=void 0,i.running=!1,i.state=i._trans.state=e.state,i._trans.triggerEvent(Q,i.state),le||200==i.state?(ie.__lp.prevTrans=r=i,te(P),ae("Transition completed.",f),se.history&&i.info.fragment&&(l=re.getElementById(i._trans.info.fragment))&&l.scrollIntoView&&0!=ie.beforeScroll(i._trans)&&l.scrollIntoView(),ue[N](i._trans)):e.iAbort||s==i?(ie.__lp.prevTrans=r=i,i.state&&201!=i.state&&ue[N](i._trans)):(i.state&&201!=i.state&&ue[N](i._trans),ie.__lp.trans=i=r),le&&(le=!1)}else r&&(ie.__lp.trans=i=r)}function pt(e){return"/"==e[0]?e:"/"+e}function ct(e){return e.match(/[^/?]+/g)||[]}function ht(e){return(e=e.replace(/\/\//g,"/")).replace(/\/\?/g,"?")}function ut(){var e,t=arguments;switch(t[0]){case 400:e=t[1]?"url '"+t[1]+"' is not defined in router.":"Base path of url is not specified.";break;case 405:e="Method not allowed before router initialization.";break;case 422:e="There is no route definition for the route "+t[1].splice(0,t[2]+1).join(".")+".";break;case 424:e="File not loaded in "+t[1]+" of route "+t[2]+".\n"+t[3][0].target.outerHTML;break;case 498:e="Invalid argument "+t[1]+(t[2]?" provided in "+t[2]:".");break;case 499:e=t[1]?"Dynamic params for the route "+t[1]+" is not provided"+(t[2]&&t[2].outerHTML?" in "+t[2].outerHTML:"."):"Transition tried without arguments.";break;case 420:e=(t[3]?"Promise rejected":"Error")+" in "+t[1]+" of route "+t[2]+".";break;case 428:e="There is no outlet named "+t[1]+".";break;case 203:e="Data provided for component is not valid."}return"LR "+t[0]+": "+e}function ft(){Lyte.error(arguments[0].stack?arguments[0]:ut.apply(this,arguments),arguments[3])}function yt(e,t){if(e){var a,o=[];if(se.history){var i=e.split("#");(a=i[1])&&(e=i[0])}var r=e.split("?");if("/"==(e=decodeURI(r[0]))){if(!He(["/"],se.routeHash))return void ft(400,e);o.push([e])}else{var n,s=r[1],l=ct(e),d=0,p=[0],c=[];c.dynamicParams=[],function e(t){for(var a in t)if(!n){var i,r=t[a];if("__lp"!=a){var s=ct(a);if(s&&!1!==(i=mt(s,l,d,r,c)))if(p.push(i),d=p[p.length-1],l.length==d){var h=Array.from(c.concat(a));if(r["/"]&&(h=h.concat("/")),o.push(h),!r.__lp.wildcard&&!r.__lp.dkey)return void(/[:*]/.test(h.join(""))||(n=h));p.pop(),d=p[p.length-1]}else{var u=Object.keys(r);if(c.push(a),l[d])if(r.__lp.wildcard&&!r.__lp.sufix.length&&1==u.length){var f=Array.from(c);r["/"]&&(f=f.concat("/")),o.push(f)}else u.length>1&&e(r);c.pop(),p.pop(),d=p[p.length-1]}}}}(se.routeHash)}if(n)return vt(t,n,e,s,a);if(1==o.length)return vt(t,o[0],e,s,a);if(o.length)return vt(t,function e(t,a,o){o=o||0;for(var i,r=r||function(e){for(var t=[],a=0,o=0,i=e.length;o<i;o++){var r=e[o];a=r.length>a?r.length:a}for(o=0;r=e[o];o++)for(var n=0;n<a;n++)t[n]=t[n]||[],t[n][o]=r[n];return t}(t),n=Math.max.apply(Math,_toConsumableArray(r[o]));i=gt(r[o],n);){o+=1;for(var s=[],l=[],d=0,p=i.length;d<p;d++)s.push(a[d]),l.push(t[d]);var c=[],h=[];for(d=0,p=l.length;d<p;d++)null!=l[d][o]&&(c.push(s[d]),h.push(l[d]));return c.length?1==c.length?c[0]:e(h,c,o):s[0]}return a[r[o].indexOf(n)]}(function(e){for(var t=[],a=0,o=e.length;a<o;a++){var i=Array.from(e[a]),r=0,n=[];"/"==i[0]&&i.shift(),"/"==i[i.length-1]&&i.pop();var s=-1;i.every((function(e,t){var a=!0;return ct(e).every((function(e,o){return e==l[++s]?(r++,i.length==t+1&&n.push(r),!0):-1!=e.indexOf(":")?(n.push(r),r=0,!0):(-1!=e.indexOf("*")&&(a=!1),n.push(r),!1)})),a})),t.push(n)}return t}(o),o),e,s,a);ft(400,e)}else ft(400,"")}function mt(e,t,a,o,i){var r;if(!o.__lp.wildcard&&!o.__lp.dkey&&(r=He(i,se.routeHash).__lp)&&r.wildcard&&!(a+=t.slice(a).indexOf(e[0])))return!1;for(var n,s=0;n=e[s];s++,a++)if(n!=t[a]&&!St(n))if(At(n))o.__lp.sufix.length&&(a=t.indexOf(o.__lp.sufix[0])-1);else{if("/"!=e[a])return!1;a--}return a}function gt(e,t,a,o){for(var i=[],r=0,n=e.length;r<n;r++)e[r]==t&&i.push(r);return 1!=i.length&&i}function vt(t,a,o,i,r){var n,s,l,d={route:He(a,se.routeHash).__lp.route,queryParams:i?nt(i):{}};if(se.history&&(d.fragment=r),d.dynamicParams=function(e,t){for(var a,o,i=se.routes,r=[],n=ct(e.split("?")[0]),s=0,l=t.route.length;s<l;s++){var d=(i=He([t.route[s]],i)).__lp;if(d.wildcard)if(d.sufix.length){var p=n.slice(0,n.indexOf(d.sufix[0]));o=decodeURI(p.join("/")),st(p.concat(d.sufix),n)}else o=decodeURI(n.join("/"));else d.dkey?(a=n[d.dIndex],st(ct(d.path),n),o=decodeURI(a)):(st(ct(d.path),n),o=void 0);r.push(o)}return r}(o,d),t)return d;d.dpProcessed=!0;var p=$t(d);return 0!=p&&(s=Lyte.deepCopyObject(p.matched),l=Lyte.deepCopyObject(p.matched),p.matched.hasOwnProperty("refreshModel")||ke(p.matched),n=ke(l),Et(l.queryParams,s.queryParams)||(ve({replace:!0,state:e.history.state,url:n,fromHistory:!0}),p.path=n)),p}function bt(e){se.linkActiveClass&&se.allLinks[e.route]&&se.allLinks[e.route].forEach((function(t){var a=t.getAttribute(q);Ce(e.dynamicParams,a?JSON.parse(a):[])&&(t.classList.add(se.linkActiveClass),se.activeLinkTags.push(t),"A"===t.firstChild.tagName&&t.firstChild.setAttribute("href",ie.getURL(t.getMatchedObject())))}))}function Pt(e,t,a,o){e&&e.mixins&&(Array.isArray(e.mixins)||(e.mixins=[e.mixins]),e.mixins.forEach((function(e){if(Lyte.registeredMixins[e])if(e=Lyte.registeredMixins[e],o){var s=ie.getRouteInstance(a,r),l=ie.getRouteInstance(a,i),d=n&&ie.getRouteInstance(a,n);s||l?function(e,t,a,o,i){for(var r in e)"actions"==r?(t.actions||(o.actions=a.actions=t.actions={}),a.actions=o.actions=Object.assign(t.actions,e.actions),i&&(i.actions=a.actions)):(a[r]=o[r]=t[r]=e[r],i&&(i[r]=a[r]))}(e,t,s=s||{},l=l||{},d):Ct(e,t)}else Ct(e,t);else o||Lyte.$.requiredMixins(e,a,"router")})))}function Dt(e,t,a,o,i,r){if(e&&e.services){var n=[],s=[];e.services.forEach((function(e){"string"==typeof e?n.push(e):e&&"object"==(void 0===e?"undefined":_typeof(e))&&(i||!e.scope||e.scope&&"static"==e.scope?n.push(e):s.push(e))}))}n&&n.length&&function(e,t,a,o,i,r){var n=_t(a,t);Lyte.extendService({services:e||[],type:"route",ins:o||n,isGlobal:i,data:r,callback:function(e,o,r,n){var s={};s.as=o,s.service=n,Lyte.extendService({services:[s],type:"route",isGlobal:i,ins:a?_t(a,t):Lt()})}})}(n,t,a,o,i,r),s&&s.length&&_t(a,t).forEach((function(e){e&&e.__lp&&(e.__lp.toBeUsed=s)}))}function _t(e,t){var a,o=[t];return[r,n,i].forEach((function(t){t&&(a=ie.getRouteInstance(e,t))&&o.push(a)})),o}function Lt(e,t){var a=!e;for(var o in t=t||[],e=e||se.routes)"__lp"==o?e.__lp.def&&t.push(e.__lp.def):Lt(e[o],t);if(a)return r&&r!=i&&(t=t.concat(r.routes)),i&&(t=t.concat(i.routes)),t}function Ct(e,t){for(var a in e)"actions"==a?t.actions=Object.assign(t.actions||{},e.actions):t[a]="queryParams"==a?Lyte.deepCopyObject(e[a]):e[a]}function wt(e,t,a){if(Pt(a,t,e),t.__lp={options:a,objPath:e.replace(/\//g,"."),stickyLinks:[],linkTags:[]},Dt(a,t,e),Lyte.toBeInjectedServices){var o=Lyte.toBeInjectedServices,i=[];for(var r in o)i.push({as:r,service:o[r]});Dt({services:i},t,e,void 0,!0)}var n=se.queryParamOptions.sticky;t.queryParams&&(t.__lp.qpdef={},t.queryParams.forEach((function(a,o){if("string"==typeof a)t.__lp.qpdef[a]={sticky:n,refreshModel:!0},null==se.stickyRoutes[e]&&n&&(se.stickyRoutes[e]=n);else if("object"==(void 0===a?"undefined":_typeof(a))){for(var i in a)t.__lp.qpdef[i]={cipher:a[i].cipher,sticky:a[i].hasOwnProperty("sticky")?a[i].sticky:n,refreshModel:!a[i].hasOwnProperty("refreshModel")||a[i].refreshModel},!se.stickyRoutes[e]&&t.__lp.qpdef[i].sticky&&(se.stickyRoutes[e]=!0);t.queryParams[o]=i}}))),e=Te(e),t.routeName=e[e.length-1],function(e,t){for(var a,o=se.routes,i=e.length,r=i-1,n=0;n<i;n++){if(a=e[n],r===n){var s=o[a];s&&s.__lp?s.__lp.def=t:s?s.__lp={def:t}:o[a]={__lp:{def:t}}}else o[a]||(o[a]={});o=o[a]}}(e,t)}Ve.prototype.run=function(e){e?at.call(this,this.runLoop.forceFetch,this.fRunningProm.resolve,e):(function(){et.call(this,it,"nestedPromises","previous",function(){if(p&&!i.running&&!i.aborted){if(i.state=i._trans.state=102,i._trans.triggerEvent(Q,i.state),a)if(se.preserveUrlOnBrowserNavigation){a.fromHistory&&a.goValue&&(ce=!0,history.go(-a.goValue)),a.state.data=i._trans.data||a.state.data,o=Lyte.deepCopyObject(a),i.stateObj=a.state;var e=setInterval((function(){o?ce||(clearInterval(e),ve(o),o=void 0):clearInterval(e)}),0)}else a.state.data=i._trans.data||a.state.data,ve(a),i.stateObj=a.state;ie.__lp.trans=i,p.previous=!1,i.runLoop=Be(p),function(e,t){se.linkActiveClass&&se.activeLinkTags.forEach((function(e){e.classList.remove(se.linkActiveClass)})),se.activeLinkTags=[];var a,o,r=e.matched;try{for(var n=function(e){e.getAttribute("lt-prop-route")==r.target&&-1==activeLinkTags.indexOf(e)&&activeLinkTags.push(e)},s=function(e){o.__ltp.queryParams[e]=a.__lp.qpdef[e].cipher&&se.cipher.decryptor?se.cipher.decryptor(r.queryParams[e]):r.queryParams[e]},l=0,d=i.R.length;l<d;l++)a=i.R[l],o=i.routes[l],a.queryParams&&a.queryParams.forEach(s),o.__ltp.dynamicParam=r.dynamicParams[l],l+1==d&&a.__lp.linkTags.forEach(n);bt(t)}catch(e){ft(e)}}(p,i.info),p=a=void 0,i.running=!0}et.call(this,it,"nestedPromises","current")}.bind(this))}.call(this),re.title=this.title=this.routes[this.routes.length-1].title||re.title)},Lyte.$.requiredMixins.router=function(e,t){t.forEach((function(t){var a=ie.__lp.getDefinition(t);e&&a&&Pt(a.__lp.options,a,t,!0)}))},Lyte.$.injectServices.router=function(e,t,a,o,i,r){var n={};n.as=e,n.service=t,Dt({services:[n]},void 0,void 0,Lt(),!0,r)},this.registerRoute=function(){se.routes?wt.apply({},arguments):this.__lp.pendingReg.push(arguments)};var Tt=["runLoop","running","paused","R","routes",g,"prom","run",y,"matched","fns"];function xt(e){for(var t in e)-1==Tt.indexOf(t)&&("info"==t?this.info=Lyte.deepCopyObject(e[t]):this[t]=e[t])}function St(e){return lt(e,":")}function At(e){return lt(e,"*")}function Et(e,t){var a=Object.keys(e),o=Object.keys(t);if(a.length!=o.length)return!1;for(var i in e)if(e[i]!=t[i])return!1;return!0}function Mt(e){var t;return"object"==(void 0===e?"undefined":_typeof(e))?t=e:(t={queryParams:{},dynamicParams:[]},Array.from(arguments).forEach((function(e,a){Array.isArray(e)?ft(498,JSON.stringify(e)):0==a?t.route=e:e&&"object"==(void 0===e?"undefined":_typeof(e))?t.queryParams=Lyte.deepCopyObject(e):t.dynamicParams.push(e)}))),t}function $t(e){if(e.route){var t,a=se.routes,o=[],i=function(e,i){if(!(a=He(e,a)))throw Error(ut(400,r.target));if(!(t=a.__lp.def))throw Error(ut(422,r.route,i));o.push(t)};if(e._routes)r=e;else{var r={route:Array.isArray(e.route)?e.route:Te(e.route),queryParams:e.queryParams||{},dynamicParams:[],fragment:e.fragment,target:"",refreshRoute:e.refreshRoute,startFrom:e.startFrom,_routes:[]};if(e.dynamicParams)if(e.dpProcessed)r.dynamicParams=Array.from(e.dynamicParams);else var n=Array.from(e.dynamicParams)}try{r.route.forEach(e._routes?i:function(e,t){r.target=r.target?r.target+"."+e:e,r._routes.push(Te(r.target)),i(e,t),n&&r.dynamicParams.push(a.__lp.dkey?n.shift():void 0)}),n&&n.length&&Lyte.error("Extra dynamic params found. Provide exact numbers dynamic params required for the transition "+JSON.stringify(n))}catch(e){return ft(e),!1}return{matched:r,R:o}}this.tagName==X?ft(498,V,this.outerHTML):ft(499)}this.getRouteInstance=function(e,t){var a;if(ie&&!ie.init&&(a=t||ie.__lp&&ie.__lp.trans||i)&&a.routes){var o=a.routes.length;if(e){if("*"==e)return a.routes;var r=e.split(".").length-1,n=a.routes[r];return n&&n.__lp.objPath==e?n:void 0}return a.routes[o-1]}};var kt=[D,_,L,C,w,T,x,S,A],Rt=function(e,t,o,r,s){var l=this,d=s||t;for(var p in d)!s&&lt(kt,p)||("__lp"==p?this.__lp=Lyte.deepCopyObject(d.__lp):this[p]=d[p]);function c(e){var t=ke(e),o={matched:e,R:i.R};return a={data:i.data,url:t,fromHistory:!1},Oe(t,Nt(o)),n._trans}r.transComp&&!r.transComp.rendered[o]&&r.transComp.redirected&&r.transComp.redirected.index<o&&(delete this.__lp.loadDependencies,delete this.__lp.loadResources,this.$={},delete this.currentModel),this.__ltp={queryParams:{}},this.__lp&&this.__lp.toBeUsed&&this.__lp.toBeUsed.length&&(l=this,Lyte.extendService({services:this.__lp.toBeUsed||[],type:"route",ins:this,callback:function(e,t,a,o){var i={};i.key=t,i.service=o,Lyte.extendService({services:[i],type:"route",ins:l})}})),this.transition=n._trans,this.parent=e[o-1],s||(this.$={},this.init&&this.init(),this.throwEvent=void 0!==Lyte.Component&&Lyte.Component.throwEvent),this.replaceWith=ie.replaceWith,this.transitionTo=ie.transitionTo,this.removeFromCache=function(e){Lyte.removeFromCache.assign(e)},this.refresh=function(e){var t=Te(this.__lp.objPath).length-1,o=Array.from(i.matched.route),r={matched:i.matched,R:i.R,transComp:{unRendered:o.splice(t),rendered:o}};if(i.abort({state:308,iAbort:!0}),a={replace:!0,data:i.data,fromHistory:!1,url:i.url},Oe(i.url,r),e&&e.refreshTemplate)for(var s,l=t;s=n.routes[l];l++)delete s.component;return n._trans},this.setTitle=function(e){re.title=this.title=e},this.getQueryParams=function(){return this.__ltp.queryParams||{}},this.getDynamicParam=function(){return this.__ltp.dynamicParam},Object.defineProperty(l,"$lg",{value:Lyte.__gl}),this.getRouteInstance=function(e){return ie.getRouteInstance(e)},this.setDynamicParam=function(e){if(e&&this.__ltp.dynamicParam&&this.__ltp.dynamicParam!=e){var t=Array.from(i.matched.dynamicParams);return t.splice(this.__lp.objPath.split(".").length-1,1,e),c(Ot(i.matched,{dynamicParams:t}))}return i._trans},this.setQueryParams=function(e,t,a){var o,r={};"object"==(void 0===e?"undefined":_typeof(e))?(r=e,a=t):r[e]=t,"object"==(void 0===a?"undefined":_typeof(a))&&(o=a.refresh),o=a;var n=Ot(i.matched,{queryParams:Object.assign({},i.matched.queryParams,r)});return Et(i.matched.queryParams,n.queryParams)?i._trans:(n.refreshModel=null==n.refreshModel?o:n.refreshModel,c(n))}};function Ot(e,t){var a=Object.assign({},e);return a.route=t.route||Array.from(e.route),a.dynamicParams=t.dynamicParams||Array.from(e.dynamicParams),a.queryParams=t.queryParams||Object.assign(e.queryParams),a}var Ft=[D,_,L,C,w,T,x,S];function Nt(e){if(i)if(i.running){var t=e.matched;if(102==i.state&&i.prom&&i.prom.hook==T){var a=Fe(i,t,e.R),o=Ft.indexOf(i.prom.hook)<=5?i.prom.index:i.prom.index+1,r=Fe(s,t,e.R);a.common.length<r.common.length?(a.rendered.length<r.rendered.length&&(e.prevTrans=s,i.runLoop.templateToRemove.length&&i.runLoop.templateToRemove.pop()),a=r,i.prom.index<=r.common.length-1&&(a.redirected=i.prom)):a.common.length-1>=o&&i.prom.index<=a.common.length-1&&(e.prevTrans=i,a.redirected=i.prom)}var n={route:t.target,queryParams:t.queryParams,dynamicParams:t.dynamicParams.filter(xe)};ie.checkIfSameRoute(i.info,n)&&!i.aborted?i.pause({iPause:!0}):i.abort({state:409,iAbort:!0}),e.transComp=a}else i&&!i.aborted&&i.abort({state:409,iAbort:!0});return e}return this}}(window),function(e){var t=Lyte;t.Security={_ourSanitizerInstance_:{},_userSanitizerInstance_:{},_eM:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},_eR:/[&<>"'`=]/g,_eF:function(e){return this._eM[e]},escape:function(e){return"string"!=typeof e&&(e=""+e),e.replace(this._eR,this._eF.bind(this))}};var a={GLOBAL_TAGS:[],GLOBAL_ATTRIBUTES:[],FORBID_TAGS:[],FORBID_ATTR:[]};t.Security._ourSanitizerInstance_=ZSEC.HTMLPurifier(a),t.Security._ourSanitizerInstance_._GLOBAL_TAGS=a.GLOBAL_TAGS,t.Security._ourSanitizerInstance_._GLOBAL_ATTRIBUTES=a.GLOBAL_ATTRIBUTES,a.GLOBAL_ATTRIBUTES.push("yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"),a.GLOBAL_TAGS.push("link-to"),t.Security._ourSanitizerInstance_._FORBID_TAGS=a.FORBID_TAGS,t.Security._ourSanitizerInstance_._FORBID_ATTR=a.FORBID_ATTR,t.Security.createSanitizer=function(e){e.GLOBAL_ATTRIBUTES||(e.GLOBAL_ATTRIBUTES=[]),e.FORBID_TAGS||(e.FORBID_TAGS=[]),e.FORBID_ATTR||(e.FORBID_ATTR=[]),e.GLOBAL_TAGS||(e.GLOBAL_TAGS=[]),e.GLOBAL_ATTRIBUTES.push("yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"),e.GLOBAL_TAGS.push("link-to");for(var a=Array.from(e.GLOBAL_TAGS),o=[],i=0;i<a.length;i++){A._registeredComponents[a[i]]?o=A._registeredComponents[a[i]].observedAttributes:Lyte.registeredCustomComponent[a[i]]&&(o=Lyte.registeredCustomComponent[a[i]].observedAttributes);for(var r=0;r<o.length;r++)-1==e.GLOBAL_ATTRIBUTES.indexOf(o[r])&&e.GLOBAL_ATTRIBUTES.push(o[r])}return t.Security._userSanitizerInstance_=ZSEC.HTMLPurifier(e),t.Security._userSanitizerInstance_._GLOBAL_TAGS=e.GLOBAL_TAGS,t.Security._userSanitizerInstance_._GLOBAL_ATTRIBUTES=e.GLOBAL_ATTRIBUTES,t.Security._userSanitizerInstance_._FORBID_TAGS=e.FORBID_TAGS,t.Security._userSanitizerInstance_._FORBID_ATTR=e.FORBID_ATTR,t.Security._userSanitizerInstance_};var o=["focus","focusin","focusout","resize","scroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","change","select","submit","keydown","keypress","keyup","contextmenu"],r="delete";function n(){Object.defineProperty.apply(Object,arguments)}function s(e,t){e[t]||n(e,t,{value:new Set,enumerable:!1,writable:!0,configurable:!0})}function l(e,t){e.add(t)}function d(e,t){e[t]||n(e,t,{value:[],enumerable:!1,writable:!0,configurable:!0})}function p(){return document.createDocumentFragment()}function c(e){return document.createElement(e)}function h(e,t,a){e.insertBefore(t,a)}function u(e,t,a){e[t][r](a),e[t].size||delete e[t]}t.registerErrorCodes({LC001:"Error while parsing custom prop handler attribute {0}. Check if the value provided is a valid JSON",LC002:"{0} Component is not compiled. Please compile using Lyte CLI",LC003:"Helper named {0} is not defined",LC004:"Action named {0} doesn't exists",LC005:"Lyte.objectUtils doesn't support {0} function",LC006:"Lyte.arrayUtils doesn't support {0} function",LC007:"Component name not specified in Lyte.Component.render",LC008:"Specified outlet {0} doesn't exists - Lyte.Component.render",LC009:"Method named {0} doesn't exists in {1} component",LC010:"Parent Node / reference Node not provided for insertBefore method"});var f=navigator.userAgent;if(f.match(/rv:11/)&&(t._ie=!0,e.action=function(){}),f.match("Edge")){var y=c("div");y.innerHTML="<template><div>c</div></template>",y.querySelector("template").childNodes.length?t._ie=!0:t._ed=!0,y.remove()}var m=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.attributes.t||(E.frSpecial=!0),e}return _inherits(t,HTMLElement),t}();if(t._ie||t._ed){var g=p();g.appendChild(document.createTextNode("  dummy ")),g.childNodes[0].replaceWith(document.createTextNode("changed")),"changed"!==g.childNodes[0].textContent&&(t._rwpf=!0),t._ms=!0}t.Component={},Lyte.Compile={};var v=t.Component;function b(){}t.arrayUtils=function(){return E.aF.apply(E,arguments)},t.objectUtils=function(){return E.oF.apply(E,arguments)},v.register=function(){E.registerComponent.apply(E,arguments)},v.registerHelper=function(){E.registerHelper.apply(E,arguments)},v.set=function(){E.set.apply(E,arguments)},v.registeredHelpers={},v.registeredComponents={},v.registerCustomPropHandler=function(e){E.String.dasherize(e),e=E.String.toCamelCase(e),-1===E.customPropHandlers.indexOf(e)&&(E.customPropHandlers.push(e),C.prototype[e]=function(){var t=arguments.length,a=arguments[0],o=arguments[2],i=this.component.data;if(!a){var r={};for(var n in i)if(n.startsWith(e)){var s=n.substring(e.length);r[s=E.String.lowerCaseFirstLetter(s)]=i[n]}return r}if("string"==typeof a){if(!(t>1))return i[e+E.String.upperCaseFirstLetter(a)];this.set(e+E.String.upperCaseFirstLetter(a),arguments[1],o)}else if("object"===(void 0===a?"undefined":_typeof(a)))for(var l in a){var d=e+E.String.upperCaseFirstLetter(l);this.set(d,a[l],arguments[1])}},E.customPropRegex=new RegExp("^("+E.customPropHandlers.join("|")+")"))},v.unregisterComponent=function(e){if(v.registeredComponents[e]){var a=E._registeredComponents[e];if(a.activeInstances>0)t.warn("There are active instances of the component "+e+" and hence cannot be unregistered");else{a._properties={},a.component=a._mixins=a._actions=a._template=a._dynamicNodes=null,a._callBacks={},a._observers=[],a._data=void 0,a._methods={},a.prototype.get=b,a.prototype.set=b,Object.defineProperty(a.prototype,"setData",{configurable:!0,writable:!0,value:function(e,t){if(this._initProperties=this._initProperties||{},"string"==typeof e)this._initProperties[e]=t;else if("object"===(void 0===e?"undefined":_typeof(e)))for(var a in e)this._initProperties[a]=e[a]}}),Object.defineProperty(a.prototype,"setMethods",{configurable:!0,writable:!0,value:function(e,t){if(this._initMethods=this._initMethods||{},"string"==typeof e)this._initMethods[e]=t;else if("object"===(void 0===e?"undefined":_typeof(e)))for(var a in e)this._initMethods[a]=e[a]}}),delete v.registeredComponents[e];var o=document.querySelector("template[tag-name="+e+"]");o&&o.remove();var i=a._helperTemplate;i&&i.remove(),a._depthTemp&&a._depthTemp.remove()}}else t.warn("Component "+e+" not yet registered")},Lyte.createCustomElement=function(e,t){var a=t.constructor;delete t.constructor;var o=t.connectedCallback;delete t.connectedCallback;var i=t.attributeChangedCallback;delete t.attributeChangedCallback;var r=t.disconnectedCallback;delete t.disconnectedCallback,this.defProperty=function(e,t,a){var o={};a.get&&(o.get=a.get),a.set&&(o.set=a.set),Object.defineProperty(e,t,o)};var n=function(t){function n(){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.isNewComp(e)?t.executeCallbacks(a,arguments):t.__lyteIgnore=!0,t}return _inherits(n,HTMLElement),_createClass(n,[{key:"connectedCallback",value:function(){this.__lyteIgnore||this.hasAttribute("lyte-rendered-ce")||(this.executeCallbacks(o,arguments),this.setAttribute("lyte-rendered-ce",""))}},{key:"attributeChangedCallback",value:function(){this.__lyteIgnore||this.executeCallbacks(i,arguments)}},{key:"disconnectedCallback",value:function(){A.ignoreDisconnect||this.__lyteIgnore||this.executeCallbacks(r,arguments)}},{key:"executeCallbacks",value:function(e,t){e&&e.apply(this,Array.from(t))}},{key:"isNewComp",value:function(e){return!this.hasAttribute("lyte-rendered-ce")}}]),n}(),s=t.static;if(s){for(var l in s)"object"===_typeof(s[l])?this.defProperty(n,l,s[l]):Object.defineProperty(n,l,{value:s[l]});delete t.static}for(var l in t)"object"===_typeof(t[l])?this.defProperty(n.prototype,l,t[l]):Object.defineProperty(n.prototype,l,{writable:!0,value:t[l]});t.static=s,t.constructor=a,t.connectedCallback=o,t.attributeChangedCallback=i,t.disconnectedCallback=r,"complete"===document.readyState||"interactive"===document.readyState?customElements.define(e,n):A.toBeRegistered.push({name:e,def:n}),Lyte.registeredCustomComponent[e]=n};var P="undefined"!=typeof HTMLElement?HTMLElement:Element;function D(){t._ie||document.body.appendChild(E.lyteComponentsDiv),document.body.appendChild(E.hDiv);for(var a=o,i=0;i<a.length;i++){var r=a[i];document.body.addEventListener(r,_,!0)}var n=E.toBeRegistered;if(n.length){for(var s=0;s<n.length;s++)customElements.define(n[s].name,n[s].def);E.toBeRegistered=[]}if(/iPad|iPhone|iPod/.test(f)&&!e.MSStream){var l=c("style");l.innerHTML="* { cursor : pointer}",document.head.appendChild(l)}}t.appendTemplateDiv=function(){document.body.appendChild(E.tDiv),document.body.appendChild(E.h1Div)},document.addEventListener("change",(function(e){var t=e.target||e.srcElement;if(t._attributeDetails){var a="value";"checkbox"!==t.type&&"radio"!==t.type||(a="checked");var o=[],i=t._attributeDetails[a];if(i&&i.isLbind){var r=t;if(!t._callee){for(;r&&!E.isCustomElement(r)&&"LYTE-YIELD"!==r.tagName;){if("BODY"===r.tagName){r=null;break}r=r.parentNode}r&&"LYTE-YIELD"===r.tagName?t._callee=r._registerYield._callee:t._callee=r}var n=t._callee;t&&E.adCx(t,o);var s=E.getNew(n.component.data,i.dynamicValue);s.context&&(E.set(s.context,s.lastKey,t[a]),t&&E.rmCx(t,o))}}}));var _=function(a){var o,i=a.type,r=a.target;if(/^(click|dblclick)$/.test(i)&&r.getAttribute&&null!=r.getAttribute("lyte-state"))a.preventDefault();else{a.currentTarget!==document.body&&(r=a.currentTarget),e.event||(o=!0,e.event=a);for(var n=!1;r&&r.getAttribute&&(!r.getAttribute(i)||r.hasAttribute("disabled"))&&"BODY"!=r.tagName&&(!E.hasLyteEvents(r,i)||!(n=E.handleLyteEvents(r,a)));)r=r.parentNode;if(!n&&r){var s=r;if(!r._callee){for(;s&&!E.isCustomElement(s)&&"LYTE-YIELD"!==s.tagName;){if("BODY"===s.tagName){s=null;break}s=s.parentNode}s&&"LYTE-YIELD"===s.tagName?r._callee=s._registerYield._callee:r._callee=s===r?void 0:s}if(r._evBoundEvents&&r._evBoundEvents[i]){r._callee?r._callee.constructor._actions:r.constructor._actions;var l=r._evBoundEvents[i],d=t.deepCopyObject(l);E.skipArgProcessing(d,a,r),E.throwAction.call(r,r,i,d,void 0,void 0,r,a,void 0,!0)}else if(r.getAttribute&&r.getAttribute(i)&&r._boundEvents&&r._boundEvents[i]){r._callee.constructor._actions,r.getAttribute(i).split(" => ")[1];var p=r._boundEvents[i],c=t.deepCopyObject(p);E.skipArgProcessing(c,a,r),E.throwAction.call(r._callee,r._callee,i,c,void 0,void 0,r,a)}if("LABEL"===r.tagName){var h=r.querySelector("input");if(h&&h.getAttribute(i)){r._callee.constructor._actions,h.getAttribute(i).split(" => ")[1];var u=r._boundEvents[i],f=t.deepCopyObject(u);E.skipArgProcessing(f,a,r),E.throwAction.call(r._callee,r._callee,i,f,void 0,void 0,h,a)}}o&&(e.event=void 0)}}},L=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,HTMLElement),_createClass(t,[{key:"connectedCallback",value:function(){var e;this._callee=this._callee||E.getCallee(this.parentNode,this),!this._registerYield&&this._callee&&(this._callee._fR&&this._callee._fR._yieldCallee?this._registerYield={_callee:this._callee._fR._yieldCallee.component.$node}:this._callee._yields&&(e=this.attributes["yield-name"])&&(e=e.nodeValue)&&this._callee._yields[e]&&(this._registerYield={_callee:this._callee._yields[e]._callee}))}},{key:"disconnectedCallback",value:function(){if(!E.ignoreDisconnect&&!this._deleted&&(this._deleted=!0,this._properties)){var e=[];E.adCx(this,e),E.removeSelectedBindingDeep(this._properties,this.component.data,!0);var t=this._registerYield;if(t){var a=[];for(var o in E.adCx(t,a),this._dynamicProperty)if(this._dynamicProperty[o].isActualNode)this._dynamicProperty[o].isActualNode._helperNodes.delete(this);else{var i=t._callee.getProperty(o)._helperNodes;i&&i.delete(this)}this._dynamicProperty={};for(var r=0;r<this._helpers.length;r++)t._callee.removeHelpers(this._helpers[r]);this._helpers=[],E.rmCx(t,a),E.rmCx(this,e)}}}},{key:"getProperty",value:function(e){var t=e.match(/([^[\].]+|\[\])/g),a=this;a._properties[t[0]]||(a._properties[t[0]]={}),n(a=a._properties[t[0]],"_path",{enumerable:!1,value:t[0]});for(var o=1;o<t.length;o++)(t[o].startsWith("'")||t[o].startsWith('"'))&&(t[o]=t[o].substring(1,t[o].length-1)),a[t[o]]||(a[t[o]]={},n(a[t[o]],"_path",{enumerable:!1,value:a._path+"."+t[o]})),a=a[t[o]];return a}}]),t}();customElements.define("lyte-yield",L);var C=function(e){function a(){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));if(e.hasAttribute("lyte-rendered")||e._ccCalled)return e.__lyteIgnore=!0,_possibleConstructorReturn(e);if(!v.registeredComponents[e.localName]){e.__lyteIgnore=!0;var t=E._registeredComponents[e.localName];return t._pendingComponents=t._pendingComponents||[],t._pendingComponents.push(e),_possibleConstructorReturn(e)}return e.actualConstructor(),e}return _inherits(a,P),_createClass(a,[{key:"actualConstructor",value:function(){this.constructor.activeInstances++;var e,t=this.attributes._lyteprop,a=(e=t=t?t.nodeValue:void 0)?E.fRP[e]:void 0,o=this.component=a?a.component:new this.constructor.component;this._properties={},o.methods={},o._config=this.constructor._config;var i=void 0;if(!a){i=o.data={};var r=this.constructor._data?this.constructor._data.apply(o):{};for(var s in n(i,"__component__",{value:this,configurable:!0,writable:!0,enumerable:!1}),i.errors={},o.__data=r,r){var l=r[s];i[s]=l.default,/^(object|array)$/.test(l.type)&&(l.watch||l.hasOwnProperty("items")||l.hasOwnProperty("properties"))&&Lyte.establishObjectBinding(i,s,!1,void 0,void 0,!!l.watch||void 0)}if(this.constructor._serviceToBeUsed)for(var d in this.constructor._serviceToBeUsed){var p=this.constructor._serviceToBeUsed[d];if(Lyte.registeredServices.hasOwnProperty(p))this.component[d]=new Lyte.registeredServices[p];else{this.__toRemoveLazy=this.__toRemoveLazy||{};var c=this,h=Lyte.$.requiredServices(d,p,(function(e,t,a,o){c.component[t]=new e,c.__toRemoveLazy[o].forEach((function(e){Lyte.$.toRemoveFromRequiredServices(e)})),delete c.__toRemoveLazy[o]}));this.__toRemoveLazy[p]=this.__toRemoveLazy[p]||[],this.__toRemoveLazy[p].push(h)}}}for(var u in this.constructor._methods)o.methods[u]=this.constructor._methods[u];if(o.$node)for(var f in o.$node)"localName"!=f&&(this[f]=o.$node[f]);o.$node=this;var y=void 0;if(o._config&&(y=1==o._config.clientLifeCycleHooks||"object"==_typeof(o._config.clientLifeCycleHooks)&&o._config.clientLifeCycleHooks.includes("constructor")),a)this._fR=a,delete E.fRP[e];else for(var f in this.callback("constructor"),this._actions=this._actions?this._actions:{},this._callee=this._callee||this.getCallee(this.parentNode),!y&&this.hasAttribute("server-rendered")||this.callback("constructor"),i)E.handleValidation(i,f,i[f],o,!0)&&(i[f]=void 0)}},{key:"getMethods",value:function(e){return this.component.getMethods(e)}},{key:"hasAction",value:function(e){return this.component.hasAction(e)}},{key:"setActions",value:function(e,t){return this.component.setActions(e,t)}},{key:"setMethods",value:function(e,t){return this.component.setMethods(e,t)}},{key:"getCallee",value:function(e){return E.getCallee(e,this)}},{key:"afterConnected",value:function(){var e=this.constructor;if(this.getAttribute("_lyteprop"))return"";for(var t=e._observedAttributes,a=0;a<t.length;a++){var o=t[a];n(this.getProperty(o),"__fromComponent",{value:!0,enumerable:!1})}this.getProperty("errors");var i=Lyte.__gl,r=this.component,s=r.data;if(s.$lg=i,this._initProperties){var l=this._initProperties;for(var d in l){var p,c=r.__data[d];p=!c||c.type===E.getDataType(l[d])||void 0===l[d]&&"boolean"!==c.type?l[d]:E.typeCast(l[d],r.__data[d].type),E.handleValidation(s,d,p,r,!0)||(s[d]=p,c&&/^(object|array)$/.test(c.type)&&(c.watch||c.hasOwnProperty("items")||c.hasOwnProperty("properties"))&&Lyte.establishObjectBinding(s,d,void 0,void 0,void 0,!!c.watch||void 0))}this._initProperties=void 0}if(this._initMethods){var h=this._initMethods;for(var u in h)r.methods[u]=h[u];this._initMethods=void 0}var f=void 0;r._config&&null!=r._config.clientLifeCycleHooks&&(f=1==r._config.clientLifeCycleHooks||"object"==_typeof(r._config.clientLifeCycleHooks)&&r._config.clientLifeCycleHooks.includes("init")),!f&&this.hasAttribute("server-rendered")||(this.callback("init"),this.onCallBack("init")),this.registerYields(),s.lyteUnbound&&(E.unbound=!0);var y="";return s.lyteFastRender?(y=this.renderFast(e._dynamicNodes,e._sta,r),requestAnimationFrame((function(){requestAnimationFrame((function(){E.callCC()}))}))):y=this.renderNodes(e._template,e._dynamicNodes,void 0,void 0,void 0,void 0,this.constructor._tC),y}},{key:"renderComponent",value:function(e,t){var a=e.componentName,o=e.staticAttrs,i=A._registeredComponents[a];if(!i)return"";var r=new i.component;t.component=r,r.data={};var n=i._data?i._data.apply(r):{};for(var s in n)r.data[s]=n[s].default;r.data.errors={},r.__data=n;var l=A._registeredComponents[a]._observedAttributes;for(var d in t.data=t.data||{},o)-1!==l.indexOf(d)&&(t.data[d]=o[d]);var p=t.data;if(p)for(var c in p){var h;h=!r.__data[c]||r.__data[c].type===E.getDataType(p[c])||void 0===p[c]&&"boolean"!==r.__data[c].type?p[c]:E.typeCast(p[c],r.__data[c].type),E.handleValidation(r.data,c,h,r)||(r.data[c]=h)}for(var d in r.methods={},i._methods)r.methods[d]=i._methods[d];r.$node={querySelector:b,localName:a},r.init&&r.init.apply(r);var u=void 0;if(i._callBacks&&(u=i._callBacks.init))for(var f=0;f<u.length;f++)u[f].value.apply(r);return t.unbound=!0,delete r.$node.querySelector,this.renderFast(A._registeredComponents[a]._dynamicNodes,A._registeredComponents[a]._sta,r,t)}},{key:"renderFast",value:function(e,a,o,i){var r,n,s=this;o&&(n=this.component,this.component=o);for(var l=this.component.data,d="",p=a,c=a.cc,h=0;h<c.length;h++)if(null!=c[h]){var u=c[h],f=e[u];if(f.dynamicValue){var y=E.getDD(l,f.newDynamicValue);y=null==y||null==y?"":y,d+=Lyte.Security.escape(y)}else if(f.helperInfo){E.ffr=!0;var m=this.processHelper({name:f.helperInfo.name,args:this.processArgs(this,f,[],void 0,void 0,!0)},void 0);E.ffr=!1,m=null==m||null==m?"":m,d+="unescape"===f.helperInfo.name?m:Lyte.Security.escape(m)}else if(f.type)switch(f.type){case"for":var g,b=e[u-1].attr.items;b.dynamicValue?g=E.getDD(l,b.newDynamicValue):b.helperInfo&&(g=this.processHelper({name:b.helperInfo.name,args:this.processArgs(this,b,[],void 0,void 0,!0)},void 0));var P=f._args.item||"item",D=f._args.index||"index",_="";if(g&&g.length){for(var L=l[P],C=l[D],w=0;w<g.length;w++){var T=g[w];l[P]=T,l[D]=w,_+=this.renderFast(f.dynamicNodes,f._sta,void 0,i)}l[P]=L,l[D]=C}d+=_;break;case"forIn":var x,S=e[u-1].attr.object;S.dynamicValue?x=E.getDD(l,S.newDynamicValue):S.helperInfo&&(x=this.processHelper({name:S.helperInfo.name,args:this.processArgs(this,S,[],void 0,void 0,!0)},void 0));var A=f._args.value||"value",M=f._args.key||"key",$="",k=void 0;if(x&&(k=Object.keys(x))){for(var R=l[A],O=l[M],F=0;F<k.length;F++){var N=k[F];l[A]=x[N],l[M]=N,$+=this.renderFast(f.dynamicNodes,f._sta,void 0,i)}l[P]=R,l[D]=O}d+=$;break;case"if":case"switch":var I,B,H=e[u-1].attr.value;if(H.dynamicValue?I=E.getDD(l,H.newDynamicValue):H.helperInfo&&(I=this.processHelper({name:H.helperInfo.name,args:this.processArgs(this,H,[],void 0,void 0,!0)},void 0)),I)B="if"===f.type?"true":I.toString();else if("if"===f.type)B="false";else switch(I){case void 0:B="undefined";break;case null:B="null";break;case!1:B="false";break;case"":B='""'}var U=f.cases[B];if(U)for(;U&&(d+=this.renderFast(U.dynamicNodes,U._sta,void 0,i),U.additional);)U=U.additional.next?f.cases[U.additional.next]:f.default;else(U=f.default)&&U._sta&&(d+=this.renderFast(U.dynamicNodes,U._sta,void 0,i));break;case"attr":for(var V=void 0,j=void 0,q=e.length,Y=u+1;Y<q;Y++){var z=e[Y];if("registerYield"!==z.type&&"componentDynamic"!==z.type&&"insertYield"!==z.type&&"component"!==z.type)break;if(("componentDynamic"===e[Y].type||"insertYield"===e[Y].type||"component"===e[Y].type)&&e[Y].position.toString()==e[u].position.toString()){if("componentDynamic"!=e[Y].type){V=e[Y];break}if(v.registeredComponents[e[Y].componentName]){V=e[Y];break}}}var W=void 0;V&&(W="component"!==V.type,r=E.fRC++,j=E.fRP[r]={data:{}}),V&&"component"===V.type||(d=d.substring(0,d.length-11));var K=f.attr,G={};for(var J in K)if(K[J].dynamicValue){var X=K[J].newDynamicValue?E.getDD(l,K[J].newDynamicValue):this.get(K[J].dynamicValue);j?(j.data[K[J].camelCase]=X,"string"==typeof X&&W&&(d=d+(X=this.formatValue(J,X))+" ")):d=d+(X=this.formatValue(J,X))+" "}else if(K[J].helperInfo)if("action"===K[J].helperInfo.name){var Q=K[J].helperInfo.args[0],Z=void 0;Q.startsWith('"')||Q.startsWith("'")?Z=Q.substring(1,Q.length-1):(t.warn("Deprecation warning. Action name "+Q+" must be in quotes"),Z=Q);var ee=this.processArgs(this,K[J],[],"__lyteEvent__","__lyteNode__");G[K[J].globalEvent||-1!==K[J].name.indexOf("-")?K[J].name:K[J].name.substr(2)]={name:Z,args:K[J].helperInfo.args,actArgs:ee,globalEvent:!!K[J].globalEvent,skipArgProcessing:!0}}else if("method"===K[J].helperInfo.name){var te;i?i.methods:this.component.methods,j&&function(){var e=j.methods=j.methods||{},t=i?i.component:s.component,a=s.processArgs(s,K[J],[],"__lyteEvent__","__lyteNode__");te=function(){this.$node;var e=a.slice(1),o=a[0],i=Array.from(arguments),r=e.concat(i);return t.methods[o].apply(t,r)},e[K[J].camelCase]=te}()}else{var ae=this.processHelper({name:K[J].helperInfo.name,args:this.processArgs(this,K[J],[],void 0,void 0,!0)},void 0);j?(j.data[K[J].camelCase]=ae,"string"==typeof ae&&W&&(d=d+(ae=this.formatValue(J,ae))+" ")):d=d+(ae=this.formatValue(J,ae))+" "}if(Object.keys(G).length){var oe=E.fRC++;d=d+"lyteaction="+oe+" ",E.fRP[oe]=G,G.componentName=this.component.$node.localName||"undefined"}j&&"component"!==V.type&&"insertYield"!==V.type&&(d=d+"_lyteprop="+r+" "),f.attrHandling||(p[h+1]=p[h+1].substr(1),f.attrHandling=!0);break;case"insertYield":var ie=void 0!==r?E.fRP[r]:void 0;ie&&delete E.fRP[r],r=void 0;var re=void 0,ne=f.yieldName||ie.data.yieldName;ie&&delete ie.data.yieldName;var se=void 0;if(i&&i.yields)re=i.yields[ne],se=i._yieldCallee;else{if(!(re=this._yields[ne]))break;se=re._callee}if(re){var le=void 0,de=void 0;se instanceof HTMLElement?le=se:(le=this,de=this.component,this.component=se.component);var pe={},ce=[];if(re._cx&&E.adCx(re,ce),ie)for(var J in ie.data)pe[J]=le.component.data[J],le.component.data[J]=ie.data[J];var he=le.component;for(var ue in n&&n.$node==se&&(he=n),d+=le.renderFast(re.dynamicNodes||re._dynamicNodes,re._sta,he,se),pe)le.component.data[ue]=pe[ue];re._cx&&E.rmCx(re,ce),de&&(le.component=de)}break;case"component":if(void 0!==r){var fe=E.fRP[r],ye=fe.data.componentName;ye&&(v.registeredComponents[ye]?(d=d+"<"+ye+" _lyteprop="+r+">",r=void 0,d=(d+=this.renderComponent({componentName:ye},fe,l))+"</"+ye+">"):d+="component not registered")}break;case"componentDynamic":var me=void 0!==r?E.fRP[r]:{};r=void 0,d+=this.renderComponent(f,me,l);break;case"registerYield":var ge=void 0;void 0!==r?ge=E.fRP[r]:(r=E.fRC++,ge=E.fRP[r]={}),ge.yields=ge.yields||{},ge.yields[f._args["yield-name"]]=f,ge._yieldCallee||(ge._yieldCallee=i||{component:this.component})}else d+=p[h]}else d+=p[h];return o&&(this.component=n),d}},{key:"formatValue",value:function(e,t){var a=void 0===t?"undefined":_typeof(t);""===t&&(a="undefined");var o=void 0,i="src"==e||"href"==e;switch(a){case"boolean":return t?e:"";case"object":return o=void 0!==Record&&t instanceof Record?JSON.stringify(t.$.toJSON()):JSON.stringify(t),e+'="'+(i?o:Lyte.Security.escape(o))+'"';case"undefined":return e;default:return e+'="'+(i?t:Lyte.Security.escape(t))+'"'}}},{key:"renderNodes",value:function(e,a,o,i,r,s,l){i=i||{};var d=void 0,p=this.constructor,u=!1;t._ms||!e?(u=!0,d=E.getContentForIE(l,p)):e.hasAttribute("depth")?(u=!0,d=E.getContentForIE(e,p)):d=e.content.cloneNode(!0,"lyte");for(var f=[],y=[],m=void 0,g=new Map,v=0;v<a.length;v++){var b=a[v],P=b.type,D=d;if(D=N(D,b.position),a._cache||(a._cache={}),"componentDynamic"===P)i.node?D._cx=i:o&&(D._cx=o._cx);else if("text"===P)this.bindNode(D,void 0,o,i,a[v],y,r,void 0,a._cache,P,void 0,g);else if("attr"===P){if(D._attributeDetails=b.attr,"LYTE-YIELD"===D.nodeName){D._callee=this,D.component={},D.component.data={},n(D.component.data,"__component__",{value:D,configurable:!0,writable:!0,enumerable:!1}),D._properties={};for(var _=0;_<D.attributes.length;_++){var L=D.attributes[_];"is"!==L.nodeName&&"yield-name"!==L.nodeName&&(D._properties[E.String.toCamelCase(L.nodeName)]={})}}var C=[];for(var w in b.attr){var T=b.attr[w];T._depthTemp=b._depthTemp;var x=w;if(T&&(T.dynamicValue||T.helperInfo)){i.node?D._cx=i:o&&(D._cx=o._cx);var S=void 0,A=void 0;if(T.helperInfo&&"action"===T.helperInfo.name){D._boundEvents=D._boundEvents||{},A=(S=T.helperInfo.args[0]).startsWith('"')||S.startsWith("'")?S.substring(1,S.length-1):S;var M=T.globalEvent||-1!==x.indexOf("-")?x:x.substr(2);D._boundEvents[M]={name:A,args:T.helperInfo.args},Math.floor(1e3*Math.random())}if(!T.globalEvent){D.hasAttribute(x)||D.setAttribute(x,"{{dummy}}");var $=this.bindNode(D.attributes.getNamedItem(x),C,o,i,T,void 0,r,void 0,a._cache,P,v);$!==D.attributes.getNamedItem(x)&&(D._removedAttributes=D._removedAttributes||{},D._removedAttributes[x]=$)}}}b.attr&&Object.keys(b.attr).length&&(D._callee=this);for(var k=0;k<C.length;k++)D.removeAttribute(C[k])}else if(/^(for|forIn|component)$/.test(P)){i.node?D._cx=i:o&&(D._cx=o._cx),D._dynamicNodes=b.dynamicNodes,t._ms&&(D._tC=b.templateContent),b.actualTemplate&&(D._tC=b.actualTemplate);var R=void 0;switch(P){case"for":D._ht=b._ht,R=this.updateForHelper(D,{type:"default"},i.node?i:void 0,r,b._sta);break;case"forIn":D._ht=b._ht,R=this.updateForInHelper(D,{type:"default"},i.node?i:void 0,r);break;case"component":R=this.updateDynamicComponent(D,!1,i.node?i:void 0,r,v,o)}R&&f.push(R)}else if(/^(if|switch)$/.test(P)){D._cases=b.cases,D._default=b.default,D._ht=b._ht,i.node?D._cx=i:o&&(D._cx=o._cx),b.actualTemplate&&(D._tC=b.actualTemplate,D._origTemplate||(t._ie?D._origTemplate=c("template"):D._origTemplate=b._depthTemp.cloneNode(!0),D.hasAttribute("value")&&D._origTemplate.setAttribute("value",D.getAttribute("value"))));var O=this.updateSwitchHelper(P,D,i.node?i:void 0,void 0,r,void 0,g);if(O){if(f.push(O),O.toAppendMain.querySelector("template[is=break]")){D._isStopped="break",d=Lyte.Compile.getTrimmedContent(d,b.position,void 0),m=b.position;break}if(O.toAppendMain.querySelector("template[is=continue]")){D._isStopped="continue",d=Lyte.Compile.getTrimmedContent(d,b.position,void 0);break}}}else"registerYield"===P?(i.node?D._cx=i:o&&(D._cx=o._cx),D._dynamicNodes=b.dynamicNodes,D._sta=b._sta,D._ht=b._ht,t._ms&&(D._tC=b.templateContent),D._callee=this):"insertYield"===P&&(i.node?D._cx=i:o&&(D._cx=o._cx),D.component=D.component||{data:{}},D._properties=D._properties||{},D.component=D.component||{data:{}},D._properties=D._properties||{},this.updateYield(D,!1,i.node?i:void 0))}a._cache=void 0;for(var F=0;F<y.length;F++){var I=y[F].dynamicPositions,B=I.initialNode,H=I.dynamicNodeValue,U=H.childNodes.length;U||(H.appendChild(document.createTextNode("")),U=1);var V=H.childNodes[0];if(t._rwpf&&"#document-fragment"===B.parentNode.nodeName){for(;H.childNodes.length;)h(B.parentNode,H.childNodes[0],B);B.remove()}else B.replaceWith.apply(B,H.childNodes);y[F].dynamicPositions={startingNode:V,length:U}}return g.size&&g.forEach((function(e,t){e.pN.insertBefore(t,e.cN),e.cN.nextSibling?e.pN.insertBefore(document.createElement("textend"),e.cN.nextSibling):e.pN.appendChild(document.createElement("textend"))})),m&&((s=s||{}).stop=!0),o?i.type?(o._helpers[i.itemIndex]=f,u&&(d=p.createDocFragment1(d)),d):(o._helpers=o._helpers||[],o._helpers.push.apply(o._helpers,f),u&&(d=p.createDocFragment1(d)),d):(this.executeBlockHelpers(f),u&&(d=p.createDocFragment1(d)),d)}},{key:"executeBlockHelpers",value:function(e,t){for(var a=0;a<e.length;a++){var o=e[a].lastNode,i=o.parentNode;o._placeHolder&&(i=(o=o._placeHolder).parentNode),h(i,e[a].toAppendMain,o),e[a]=e[a].lastNode}}},{key:"updateBlockHelpers",value:function(e,t){for(var a=0;a<e.length;a++)switch(e[a].getAttribute("is")){case"for":this.updateForHelper(e[a],{type:"default"},t);break;case"if":this.updateSwitchHelper("if",e[a],t);break;case"forIn":this.updateForInHelper(e[a],{type:"default"},t);break;case"switch":this.updateSwitchHelper("switch",e[a],t);break;case"component":this.updateDynamicComponent(e[a],!1,t);break;case"insertYield":break;case"yield":case"registerYield":t&&(e[a]._cx=t);break;default:"LYTE-YIELD"===e[a].tagName&&this.updateYield(e[a],!1,t)}}},{key:"attributeChangedCallback",value:function(e,a,o){var i=this.constructor;if(!(i._observedMethodAttributes&&i._observedMethodAttributes[e]||this.__lyteIgnore)){var r=E.String.toCamelCase(e),n=E.customPropHandlers.indexOf(r);if(-1===n){if(a!==o){var s=this.attributes.getNamedItem(e);if(s){if(s.__lyteIgnore)return void(this.attributes.getNamedItem(e).__lyteIgnore=!1)}else if(this["__"+e])return void(this["__"+e]=!1);var l=this.component,d=l.__data[r];if(d&&d.type){var p=d.type;if("string"!==p){var c={attr:e,tagName:this.tagName};if(o=E.typeCast(o,p,c),c.isError)return void t.warn("data type of the value provided for attribute "+e+" of "+this.tagName+" is not valid")}}var h=l.data;h[r]!==o?this.set(r,null===o?void 0:o):E.clearError(h,r)}}else{var u=E.customPropHandlers[n],f=o;if(f)try{for(var y in f=JSON.parse(f)){var m=u+E.String.upperCaseFirstLetter(y);this.set(m,f[y])}}catch(a){t.error("LC001",e)}}}}},{key:"removeHelpersSpecificIndex",value:function(e,t){if(e._helpers[t])for(var a=0;a<e._helpers[t].length;a++)this.removeHelpers(e._helpers[t][a]);if(e._forContent[t]){for(var o=0;o<e._forContent[t].length;o++)e._forContent[t][o].remove();var i=this;Object.keys(e._items[t]._dynamicProperty).forEach((function(t){if(e._dynProps[t]--,!e._dynProps[t]){var a=i.getProperty(t);a._helperNodes&&a._helperNodes[r](e)}})),e._items[t]={_dynamicProperty:{},itemProperty:{},indexProperty:{}}}}},{key:"removeHelpers",value:function(e,t,a){a||(e.remove(),delete("component"===e.getAttribute("is")?this.__dc:this.__h)[e.__lyteId]);var o="delete",i=[];if(E.adCx(e,i),e._forContent)if("for"===e.getAttribute("is")){if(e._helpers)for(var r=0;r<e._helpers.length;r++){for(var n=0;n<e._helpers[r].length;n++)this.removeHelpers(e._helpers[r][n]);e._helpers[r]=[]}for(var s=0;s<e._forContent.length;s++)for(var l=0;l<e._forContent[s].length;l++)e._forContent[s][l].remove();var d=e.getAttribute("item");if(e._items.length){for(var p=e._items[0].itemProperty,c=0;c<e._items.length;c++){var h=e._items[c]._dynamicProperty;for(var u in h){var f=this.getProperty(u);f._helperNodes&&f._helperNodes[o](e)}}if(p)for(var y=0;y<e._items.length;y++)this.removeBindings(_defineProperty({},d,e._items[y].itemProperty),_defineProperty({},d,e._attributes.items[y]))}if(!t&&e._actualBinding){e._attributes.items&&e._attributes.items._bindings&&e._actualBinding._createdBinding&&e._attributes.items._bindings[o](e._actualBinding),e._actualBinding._forHelpers&&e._actualBinding._forHelpers[o](e);var m=e._removedAttributes.items._multipleProperty;e._removedAttributes&&e._removedAttributes.items&&!e._removedAttributes.items.helperValue&&m&&m[0].actProp._forHelpers&&m[0].actProp._forHelpers[o](e)}e._items=[]}else{if(e._helpers)for(var g=Object.keys(e._helpers),v=0;v<g.length;v++){for(var b=0;b<e._helpers[g[v]].length;b++)this.removeHelpers(e._helpers[g[v]][b]);e._helpers[g[v]]=[]}for(var P in e._forContent)for(var D=0;D<e._forContent[P].length;D++)e._forContent[P][D].remove();var _=e._items,L=e.getAttribute("key");for(var C in _){var w=_[C],T=w.itemProperty,x=w._dynamicProperty;for(var S in x){var A=this.getProperty(S);A._helperNodes&&A._helperNodes[o](e)}T&&this.removeBindings(_defineProperty({},L,e._items[C].itemProperty),_defineProperty({},L,e._attributes.object[C]))}t||(e._actualBinding&&(e._attributes.object&&e._attributes.object._bindings&&e._actualBinding._createdBinding&&e._attributes.object._bindings[o](e._actualBinding),e._actualBinding._forHelpers&&e._actualBinding._forHelpers[o](e)),m=e._removedAttributes.object._multipleProperty,e._removedAttributes.object&&!e._removedAttributes.object.helperValue&&m&&m[0].actProp._forHelpers&&m[0].actProp._forHelpers[o](e),e._propBindingObject&&e._attributes.object&&e._attributes.object._bindings&&e._attributes.object._bindings[o](e._propBindingObject)),e._items={}}else if(e._caseContent||e._yieldContent){if(e._helpers){for(var M=0;M<e._helpers.length;M++)this.removeHelpers(e._helpers[M]);e._helpers=[]}if(e._caseContent){for(var $=0;$<e._caseContent.length;$++)e._caseContent[$].remove();for(var k in e._dynamicProperty)if(e._dynamicProperty[k].isActualNode)e._dynamicProperty[k].isActualNode._helperNodes[o](e);else{var R=this.getProperty(k)._helperNodes;R&&R[o](e)}e._dynamicProperty={}}else{for(var O=0;O<e._yieldContent.length;O++)e._yieldContent[O].remove();e._dynamicProperty={}}var F=E.pendingViewPortElements;if(e._inPve&&F.length){var N=F.indexOf(e);-1!=N&&F.splice(N,1)}}else if(e._renderedComponent)for(var I in e._renderedComponent)e._renderedComponent[I]&&(e._renderedComponent[I].remove(),e._renderedComponent[I]=null);E.rmCx(e,i)}},{key:"updateYield",value:function(e,a,o){var i=this.constructor;e._callee||(e._callee=this);var r=e._callee._yields[e.getAttribute("yield-name")];if(r){e._registerYield=r;var n=r._callee||e._callee._callee;if(n){r._callee||(r._callee=n),e._dynamicProperty=e._dynamicProperty||{};var s={},l=[];E.adCx(r,l),Object.keys(e._properties).forEach((function(t){s[t]={},s[t].value=n.component.data[t],s[t].property=n._properties[t],n._properties[t]=e._properties[t],n.component.data[t]=e.component.data[t]})),t._ms||!r._ht||r._htA||(r._htA=!0,r.content.append(r._ht.content.cloneNode(!0)));var d=n.renderNodes(r,r._dynamicNodes||[],e,{node:e},!0,void 0,r._tC);e.component.data.lyteUnbound||E.establishBindings(e._properties,e.component.data),n.executeBlockHelpers(e._helpers),Object.keys(e._properties).forEach((function(e){n.component.data[e]=s[e].value,n._properties[e]=s[e].property})),E.rmCx(r,l),e.appendChild(d)}else{if(t._ms){var p=c("div");p.innerHTML=r.outerHTML,t._ie&&(p.firstChild.innerHTML=r.innerHTML);var h=p.childNodes[0];i.splitTextNodes(h),h=i.createDocFragment1(h),e.appendChild(h)}else e.appendChild(r.content.cloneNode(!0,"lyte"));e._helpers=[]}}}},{key:"updateDynamicComponent",value:function(e,t,a,o,i,r){var n=void 0;e._callee=this;var s=e.hasAttribute("lyte-keep-alive");if(!e._renderedComponent){e._renderedComponent={};var l=E.createLyteId(this);this.__dc[l]=e,e.__lyteId=l}e._cx=a||e._cx,e._dynamicProperty=e._dynamicProperty||{};var d=e.getAttribute("component-name")||(e._attributes?e._attributes["component-name"]:void 0);if(d){var p=void 0,u=!1;if(t){if(s&&(E.ignoreDisconnect=!0),e._renderedComponent[e._currentComponent]){var f=e._renderedComponent[e._currentComponent];s?E.hDiv.content.appendChild(f):f.remove()}E.ignoreDisconnect=!1,s||(e._dynamicProperty={}),e._renderedComponent[d]&&s?p=e._renderedComponent[d]:(p=c(d),u=!0)}else p=c(d),u=!0;if(!s&&e._currentComponent&&(e._renderedComponent[e._currentComponent]=null),u){for(var y=0;y<e.attributes.length;y++)"is"!==e.attributes[y].name&&"component-name"!==e.attributes[y].name&&"lyte-keep-alive"!==e.attributes[y].name&&p.setAttribute(e.attributes[y].name,e.attributes[y].value);if(e._attributes)for(var m in e._attributes)"component-name"!==m&&p.setData(E.String.toCamelCase(m),e._attributes[m]);var g=this.renderNodes(e,e._dynamicNodes,e,void 0,o,void 0,e._tC);p.appendChild(g)}return u&&(p._toRegEvnts=e._toRegEvnts),t?(E.ignoreDisconnect=!0,h(e.parentNode,p,e),E.ignoreDisconnect=!1):n={toAppendMain:p,lastNode:e},e._renderedComponent[d]=p,e._currentComponent=d,p._callee=this,p._actions=e._actions,p.setMethods(e._initMethods),p._attributeDetails=e._attributeDetails,p._boundEvents=e._boundEvents,p._cx=e._cx,n}}},{key:"updateForHelper",value:function(e,a,o,i,r){if("TEMPLATE"!==e.tagName){if(Object.keys(e).forEach((function(t){"innerHTML"!==t&&"innerText"!==t&&(e._origTemplate[t]=e[t])})),t._ie){var n=c("div");n.innerHTML=e._tC,e._origTemplate.innerHTML=n.children[0].innerHTML,this.constructor.splitTextNodes(e._origTemplate),e.hasAttribute("depth")&&e._origTemplate.setAttribute("depth",e.getAttribute("depth"))}var s=e._origTemplate._placeHolder=document.createTextNode("");e._origTemplate.setAttribute("item",e.getAttribute("item")),e._origTemplate.setAttribute("index",e.getAttribute("index")),e.hasAttribute("unbound")&&e._origTemplate.setAttribute("unbound","true"),E.replaceWithPf(e,e._origTemplate._placeHolder),(e=E.replaceWithOrigTemplate(e)).setAttribute("is","for"),E.apdNode(e,this),s._helper=e}else if(!e._placeHolder){var l;l=document.createTextNode(""),E.replaceWithPf(e,l),e._placeHolder=l,l._helper=e,E.apdNode(e,this)}if(e._sta=e._sta||r,e._callee=this,e._attributes=e._attributes||{},"update"===a.type&&e._currentItems===e._attributes.items)return{};e._cx=o||e._cx;var d=e.getAttribute("index");d||(e.setAttribute("index","index"),d="index");var u=e.getAttribute("item");u||(e.setAttribute("item","item"),u="item");var f=this.component.data[u],y=this.component.data[d],m=this._properties[u],g=this._properties[d];this._properties[u]=this._properties[d]={};var v=e._attributes.items,b=(e.content,e._dynamicNodes),P=e;e._items||(e._items=[]),e._dynProps=e._dynProps||{};var D=void 0,_=void 0,L=a.firstIndex,C=a.secondIndex,w=a.thirdIndex,T=L+C,x=!0,S=0;if(a)switch(a.type){case"remove":D=L,S=L;for(var A=L,M=C;M>0;M--,A++)this.removeHelpersSpecificIndex(e,A);for(var $=L+C;$<e._items.length;$++)e._items[$]._cx.itemIndex=e._items[$]._cx.itemIndex-C;e._items.splice(L,C),e._helpers.splice(L,C),e._forContent.splice(L,C);break;case"insert":_=L,D=C,S=L+C,e._forContent[L]&&(P=e._forContent[L][0]);for(var k=[],R=[],O=[],F=C,N=L;F>0;F--,N++)k.push([]),R.push({}),O.push([]);e._helpers.splice.apply(e._helpers,[L,0].concat(k)),e._items.splice.apply(e._items,[L,0].concat(R));for(var I=L+C;I<e._items.length;I++)e._items[I]._cx.itemIndex=e._items[I]._cx.itemIndex+C;e._forContent.splice.apply(e._forContent,[L,0].concat(O));break;case"replace":_=L,D=C,S=L+C,this.removeHelpersSpecificIndex(e,L),p(),e._forContent[L+1]&&(P=e._forContent[L+1][0]);for(var B=[],H=[],U=[],V=C,j=L;V>0;V--,j++)B.push([]),U.push([]),H.push({});e._helpers.splice.apply(e._helpers,[L,1].concat(B)),e._items.splice.apply(e._items,[L,1].concat(H));for(var q=L+C;q<e._items.length;q++)e._items[q]._cx.itemIndex=e._items[q]._cx.itemIndex+C-1;e._forContent.splice.apply(e._forContent,[L,1].concat(U)),1==a.secondIndex&&(x=!1);break;case"splice":_=L,D=C,S=L+C;for(var Y=w,z=0;Y>0;Y--,z++)this.removeHelpersSpecificIndex(e,L+z);p(),e._forContent[L+w]&&(P=e._forContent[L+w][0]);for(var W=[],K=[],G=[],J=C,X=L;J>0;J--,X++)W.push([]),G.push([]),K.push({});e._helpers.splice.apply(e._helpers,[L,w].concat(W)),e._items.splice.apply(e._items,[L,w].concat(K));for(var Q=L+C;Q<e._items.length;Q++)e._items[Q]._cx.itemIndex=e._items[Q]._cx.itemIndex+C-w;e._forContent.splice.apply(e._forContent,[L,w].concat(G)),a.secondIndex==a.thirdIndex&&(x=!1);break;case"update":e.getAttribute("item");for(var Z=0;Z<e._items.length;Z++)this.removeHelpersSpecificIndex(e,Z);e._items=[];case"default":e._forContent=[],e._helpers=[],_=0,D=v?v.length:0,S=v?v.length:0;break;default:t.error("Error in updateForHelper")}P||(P=e),P!=e&&e._helpers.length>0&&(a.type,1)&&(P=E.findLastNodeL(P,T,e));var ee=void 0,te=!1,ae=E.unbound;if((e.hasAttribute("unbound")||e._attributes&&e._attributes.unbound&&"false"!==e._attributes.unbound)&&(te=!0,E.unbound=!0),!e._fRender&&("lyteFastRender"==e.getAttribute("unbound")||e._attributes&&"lyteFastRender"==e._attributes.unbound)&&(e._fRender=!0),e._currentItems=v,!t._ms&&D-_>0&&e._ht&&!e._htA&&(e.content.append(e._ht.content.cloneNode(!0)),e._htA=!0),"remove"!==a.type){for(var oe="",ie=[],re=p(),ne=_,se=D;se>0;ne++,se--){e._helpers[ne]=[],e._items[ne]={_dynamicProperty:{},itemProperty:{},indexProperty:{}},this.component.data[u]=v[ne],this.component.data[d]=ne;var le={};le[u]={},le[u]._data=v[ne],le[u]._dyn=[u],le[d]={},le[d]._data=ne,le[d]._dyn=[d],this._properties[u]={},this._properties[d]={};var de={itemValue:u,itemIndex:ne,type:"for",node:e,indexValue:d};e._items[ne]._cx=de;var pe={},ce=void 0;e._fRender?oe+=this.renderFast(b,e._sta,this.component):(b._cache=le,ce=this.renderNodes(e.hasAttribute("depth")?e._depthTemp:e,b,e,de,i,pe,e._tC));for(var he=Object.keys(e._items[ne]._dynamicProperty),ue=0;ue<he.length;ue++){var fe=he[ue];e._dynProps[fe]?e._dynProps[fe]++:e._dynProps[fe]=1}if(e._items[ne].itemProperty=this.getProperty(u),e._items[ne].indexProperty=this.getProperty(d),E.unbound||E.establishBindings(_defineProperty({},u,e._items[ne].itemProperty),_defineProperty({},u,e._attributes.items[ne])),e._fRender?ie.push(e._forContent[ne]=[]):e._forContent[ne]=Array.from(ce.childNodes),this.executeBlockHelpers(e._helpers[ne],e),e._fRender||re.appendChild(ce),pe.stop)break}if(e._fRender){var ye,me=document.createElement("template");if(me.innerHTML=oe,re.appendChild(me.content),E.processAction(re),t._ie){ye=[];for(var ge=re.childNodes,ve=0;ve<ge.length;ve++)1==ge[ve].nodeType&&ye.push(ge[ve])}else ye=re.children;for(ve=0;ve<ie.length;ve++)ie[ve].push(ye[ve]);requestAnimationFrame((function(){requestAnimationFrame((function(){E.callCC()}))}))}E.unbound=ae,"default"===a.type?ee={toAppendMain:re,lastNode:P}:P._placeHolder?h(P._placeHolder.parentNode,re,P._placeHolder):h(P.parentNode,re,P),!te&&e._removedAttributes&&e._removedAttributes.items&&!e._removedAttributes.items.helperValue&&e._removedAttributes.items._multipleProperty&&E.establishBindings({items:e._removedAttributes.items._multipleProperty[0].actProp},{items:v})}if(E.unbound=ae,x)for(var be=S;be<e._items.length;be++)e._items[be].indexProperty&&E.affectChanges(e._items[be].indexProperty);return this.component.data[u]=f,this.component.data[d]=y,this._properties[u]=m,this._properties[d]=g,e._currentItems=v,ee}},{key:"updateForInHelper",value:function(e,a,o,i){if("TEMPLATE"!==e.tagName){if(Object.keys(e).forEach((function(t){"innerHTML"!==t&&"innerText"!==t&&(e._origTemplate[t]=e[t])})),t._ie){var r=c("div");r.innerHTML=e._tC,e._origTemplate.innerHTML=r.children[0].innerHTML,this.constructor.splitTextNodes(e._origTemplate),e.hasAttribute("depth")&&e._origTemplate.setAttribute("depth",e.getAttribute("depth"))}var n=e._origTemplate._placeHolder=document.createTextNode("");e._origTemplate.setAttribute("key",e.getAttribute("key")),e._origTemplate.setAttribute("value",e.getAttribute("value")),e.hasAttribute("unbound")&&e._origTemplate.setAttribute("unbound","true"),E.replaceWithPf(e,e._origTemplate._placeHolder),(e=E.replaceWithOrigTemplate(e)).setAttribute("is","forIn"),E.apdNode(e,this),n._helper=e}else if(!e._placeHolder){var d;d=document.createTextNode(""),E.replaceWithPf(e,d),e._placeHolder=d,E.apdNode(e,this),d._helper=e}var u=this;if(e._callee=this,e._attributes=e._attributes||{},"update"===a.type&&e._currentObject===e._attributes.object)return{};o=o||e._cx,e._cx=o;var f=e.getAttribute("key");f||(f="key",e.setAttribute("key","key"));var y=e.getAttribute("value");y||(y="value",e.setAttribute("value","value"));var m=u.component.data[f],g=u.component.data[y],v=u._properties[f],b=u._properties[y];u._properties[f]=u._properties[y]={};var P=e._attributes.object,D=(e.content,e._dynamicNodes),_=e,L=[];if(e._items||(e._items={}),e._dynProps=e._dynProps||{},a)switch(a.type){case"delete":this.removeHelpersSpecificIndex(e,a.property);var C=e._keysArray.indexOf(a.property);C>-1&&e._keysArray.splice(C,1),e._helpers&&delete e._helpers[a.property],delete e._propBindingObject[a.property];break;case"add":L=[a.property],e._keysArray.push(a.property);break;case"update":e._keysArray.forEach((function(t,a,o){this.removeHelpersSpecificIndex(e,t)}),this),e._keysArray=L=P?Object.keys(P):[],e._helpers={},e._items={},e._propBindingObject={};break;case"default":e._forContent={},e._helpers={},e._keysArray=L=P?Object.keys(P):[];break;default:t.error("Error in updateForHelper")}var w=void 0;if(!P){var T=p();"default"!==a.type?h(_.parentNode,T,_):w={toAppendMain:T,lastNode:_}}var x=E.unbound;if((e.hasAttribute("unbound")||e._attributes&&e._attributes.unbound)&&(E.unbound=!0),e._currentObject=P,!t._ms&&L.length&&e._ht&&!e._htA&&(e.content.append(e._ht.content.cloneNode(!0)),e._htA=!0),P&&"remove"!==a.type){var S=p();e._propBindingObject=e._propBindingObject||{},L.forEach((function(t,a,o){e._helpers[t]=[],e._items[t]={_dynamicProperty:{},itemProperty:{}},u.component.data[f]=t,u.component.data[y]=P[t],u._properties[f]={},u._properties[y]={};var r={};r[f]={},r[f]._data=t,r[f]._dyn=[f],r[y]={},r[y]._data=P[t],r[y]._dyn=[y];var n={itemIndex:t,itemValue:y,keyValue:f,type:"forIn",node:e};e._items[t]._cx=n,D._cache=r;var s=this.renderNodes(e.hasAttribute("depth")?e._depthTemp:e,D,e,n,i,void 0,e._tC);Object.keys(e._items[t]._dynamicProperty).forEach((function(t){e._dynProps[t]?e._dynProps[t]++:e._dynProps[t]=1})),e._items[t].itemProperty=this.getProperty(y),e._propBindingObject[t]=e._items[t].itemProperty,e._forContent[t]=Array.from(s.childNodes),this.executeBlockHelpers(e._helpers[t],e),S.appendChild(s)}),this),E.unbound||(s(e._attributes.object,"_bindings"),l(e._attributes.object._bindings,e._propBindingObject),E.establishBindings(e._propBindingObject,e._attributes.object)),E.unbound=x,"default"!==a.type?_._placeHolder?h(_._placeHolder.parentNode,S,_._placeHolder):h(_.parentNode,S,_):w={toAppendMain:S,lastNode:_}}return E.unbound=x,u.component.data[f]=m,u.component.data[y]=g,u._properties[f]=v,u._properties[y]=b,e._currentObject=P,w}},{key:"updateSwitchHelper",value:function(e,a,o,i,r,n,s){if(t._ms||!a._ht||a._htA||(a.content.append(a._ht.content.cloneNode(!0)),a._htA=!0),"TEMPLATE"!==a.tagName){if(Object.keys(a).forEach((function(e){"innerHTML"!==e&&"innerText"!==e&&(a._origTemplate[e]=a[e])})),t._ie){var l=c("div");l.innerHTML=a._tC,a._origTemplate.innerHTML=l.children[0].innerHTML,this.constructor.splitTextNodes(a._origTemplate),a.hasAttribute("depth")&&a._origTemplate.setAttribute("depth",a.getAttribute("depth"))}var d=a._origTemplate._placeHolder=document.createTextNode("");E.replaceWithPf(a,a._origTemplate._placeHolder),(a=E.replaceWithOrigTemplate(a)).setAttribute("is",e),E.apdNode(a,this),d._helper=a}else if(!a._placeHolder){var u;u=document.createTextNode(""),E.replaceWithPf(a,u),a._placeHolder=u,u._helper=a,E.apdNode(a,this)}var f=a;a._callee||(a._callee=this),o=o||a._cx,a._cx=o,a._dynamicProperty=a._dynamicProperty?a._dynamicProperty:{};var y=void 0,m=void 0;if(""===a.getAttribute("value")||a.getAttribute("value")?m=a.getAttribute("value"):a._attributes&&(m=a._attributes.value),m)y="if"===e?"true":m.toString();else if("if"===e)y="false";else switch(m){case void 0:y="undefined";break;case null:y="null";break;case!1:y="false";break;case"":y='""';break;case 0:y="0"}if(y!==a._currentCase){a._currentCase=y;var g=a._depthTemp||a,v=a._cases[y],b=void 0;if(!v&&(v=a._default,b=t._ms?v.templateContent:g.content.querySelector("[default]"),t._ms||!v._ht||b._htA||(b._htA=!0,b.content.append(v._ht.content.cloneNode(!0))),a._isDefault=!0,!b)){a._caseContent&&a._caseContent.length&&this.removeHelpers(a,void 0,!0),a._caseContent=[];var P=document.createTextNode("");if(a._caseContent.push(P),a._currentCaseName=y,a._helpers=a._helpers||[],i)return void(f._placeHolder?h(f._placeHolder.parentNode,P,f._placeHolder):h(f.parentNode,P,a));var D=p();return D.append(P),{lastNode:f,toAppendMain:D}}a._caseContent&&a._caseContent.length&&this.removeHelpers(a,void 0,!0);var _=v,L=y,C=void 0;C=b||(t._ms?{}:g.content.querySelector("[case='"+E.cssEscape(L)+"']"));for(var w=[];_;){t._ms||!_._ht||C._htA||(C._htA=!0,C.content.append(_._ht.content.cloneNode(!0)));var T=_.dynamicNodes,x=this.renderNodes(C,T,a,void 0,r,void 0,_.templateContent);if(w.push(x),!_.additional)break;_.additional.next?(C=t._ms?{}:a.content.querySelector("[case='"+E.cssEscape(_.additional.next)+"']"),_=a._cases[_.additional.next]):(C=t._ms?{}:a.content.querySelector("[default]"),_=a._default)}a._caseContent=[];for(var S=p(),A=0;A<w.length;A++)11==w[A].nodeType?a._caseContent=a._caseContent.concat(Array.from(w[A].childNodes)):a._caseContent.push(w[A]),S.append(w[A]);if(this.executeBlockHelpers(a._helpers,a),i){var M=void 0;return S.querySelector("template[is=break]")?M="break":S.querySelector("template[is=continue]")&&(M="continue"),a._placeHolder?h(a._placeHolder.parentNode,S,a._placeHolder):h(a.parentNode,S,a),M}return{toAppendMain:S,lastNode:a}}}},{key:"dummy",value:function(e,t){this.constructor._properties[boundValue].observer}},{key:"callObservers",value:function(e,t){var a=this.constructor._properties[e],o=a?a.observer:void 0;if(o)for(var i=0;i<o.length;i++)-1!==t.indexOf(".")&&o[i].path!==t||this["_"+o[i].functionName].apply(this)}},{key:"bindNode",value:function(e,a,o,i,r,n,p,h,u,f,y,m){var g=i.itemValue,v=i.itemIndex,b=i.type,P=i.indexValue,D=r.dynamicValue,_=r.helperInfo,L=void 0,C=e.ownerElement,w=[];2===e.nodeType&&(e={nodeName:e.nodeName,ownerElement:e.ownerElement,nodeType:2,nodeValue:e.nodeValue,_attributeDetails:e._attributeDetails}),_&&_.name,e._callee=this;var T=!1;if(_&&Object.keys(_).length){T=!0,e.nodeName,L=e.helperValue=_;var x=[];if("action"===_.name){var S=_.args[0];_.args[0]=S.startsWith("'")?S.replace(/'/g,""):S,S=_.args.slice(0,1)[0];var A=_.args.slice(1,_.args.length),M=!1,$=e.nodeName;return-1!=$.indexOf("-")&&(M=!0),x=[C,$,M,{name:S,args:A}],void this.processHelper({name:_.name,args:x},e)}x="method"===_.name?_.args:this.processArgs(this,{helperInfo:_},w,void 0,e,void 0,u),L=this.processHelper({name:_.name,args:x},e),"unescape"===_.name&&(e={dynamicPositions:{initialNode:e,dynamicNodeValue:L},_callee:e._callee,helperValue:e.helperValue},L=void 0,n.push(e))}else{_={},e.syntaxValue=D;var k=[];L=E.get(this.component.data,D,k,u),w.push(k)}if(2==e.nodeType){var R=e.ownerElement.tagName;("INPUT"==R||"TEXTAREA"==R||"DIV"==R&&e.ownerElement.hasAttribute("contenteditable"))&&(e.ownerElement._rA=e.ownerElement._rA||[],e.ownerElement._rA.push(e)),C._origTemplate?e.ownerElement=C._origTemplate:(C.hasAttribute("lyte-for")||C.hasAttribute("lyte-if")||C.hasAttribute("lyte-switch")||C.hasAttribute("lyte-forin"))&&"TEMPLATE"!==C.tagName&&(t._ie?(e.ownerElement=c("template"),e.ownerElement.setAttribute("is",r._depthTemp)):e.ownerElement=r._depthTemp.cloneNode(!0),C._origTemplate=e.ownerElement)}var O=void 0;if("unbound"!==_.name&&!E.unbound){var F=void 0;o&&(F=b?o._items[v]._dynamicProperty:o._dynamicProperty);for(var N=0;N<w.length;N++){for(var I=w[N],B=0;B<I.length;B++){var H=this.getProperty(I[B]);if(o){var U,V=I[B].search(/\W/);(U=-1!==V?I[B].substring(0,V):I[B])===g||U===P||i.node&&i.node._properties&&i.node._properties[U]?(e._cx=i,d(H,"_dynamicNodes"),H._dynamicNodes.push(e),U!==P&&(O=H)):(s(H,"_helperNodes"),H._helperNodes.add(o),F[I[B]]?F[I[B]].push(e):(F[I[B]]=[]).push(e))}else d(H,"_dynamicNodes"),H._dynamicNodes.push(e);if(C&&(C.hasAttribute("lyte-for")||C.hasAttribute("lyte-if")||C.hasAttribute("lyte-switch")||C.hasAttribute("lyte-forin"))||C&&"TEMPLATE"===C.tagName&&/^(for|forIn)$/.test(C.getAttribute("is"))&&!T){var j=C.getAttribute("is");("for"===j&&"items"===e.nodeName||"forIn"===j&&"object"===e.nodeName)&&(H._forHelpers||s(H,"_forHelpers"),e.ownerElement._actualBinding=H,H._forHelpers.add(e.ownerElement))}p&&E.establishSelectedBinding(H,this.component.data,this)}I.length>1&&(e._multipleProperty=e._multipleProperty||[],e._multipleProperty.push({dynamicProp:O?void 0:F,actProp:this.getProperty(I[0]),helperNode:o,dynamicValues:I,index:N}))}}if(L="boolean"===!(void 0===L||_typeof(L))&&"number"===!(void 0===L||_typeof(L))?L||"":L,2===e.nodeType){var q=e._parentNode?e._parentNode:e.ownerElement;q.tagName&&q.getAttribute("is");var Y=E.isCustomElement(q,!0);Y&&(q.set?q.set(E.String.toCamelCase(e.nodeName),L):(q._initProperties=q._initProperties||{},q._initProperties[E.String.toCamelCase(e.nodeName)]=L));var z=L;if(Y&&"string"!=typeof L&&!h)q._attributes=q._attributes||{},q._attributes[e.nodeName]=L,"TEMPLATE"===q.nodeName&&T&&("for"===q.getAttribute("is")&&"items"===e.nodeName||"forIn"===q.getAttribute("is")&&"object"===e.nodeName&&!E.unbound)&&(e.ownerElement._actualBinding={_forHelpers:(new Set).add(q),_createdBinding:!0},L&&(s(L,"_bindings"),l(L._bindings,e.ownerElement._actualBinding))),a.push(e.nodeName);else if("boolean"==typeof L)q._attributes=e.ownerElement._attributes||{},q._attributes[e.nodeName]=L,L?q.setAttribute(e.nodeName,""):a.push(e.nodeName);else{var W;if(L&&"object"===(void 0===L?"undefined":_typeof(L)))if(void 0!==Record&&L instanceof Record)W=JSON.stringify(L.$.toJSON());else try{W=JSON.stringify(L)}catch(t){Lyte.error("Data passed for property '"+e.nodeName+"' of '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' cannot be serialized. The component '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' might not be registered before its use.")}else W=null==L||null==L?"":L;if(L=W,E.isControlHelper(e.ownerElement))q._attributes=e.ownerElement._attributes||{},q._attributes[e.nodeName]=L,a.push(e.nodeName);else{var K=void 0===L?"":L;e.ownerElement.setAttribute(e.nodeName,K)}}"LYTE-YIELD"===q.tagName&&(q.component.data[E.String.toCamelCase(e.nodeName)]=z),/^(INPUT|TEXTAREA|SELECT)$/.test(q.nodeName)&&("value"===e.nodeName?q.value=void 0===L?"":L:"checked"===e.nodeName&&(q.checked=L)),L||-1===E.booleanAttrList.indexOf(e.nodeName)||a.push(e.nodeName)}else e.nodeValue=void 0===L?"":L;return e}},{key:"debounce",value:function(e,t){var a;return function(){var o=this,i=arguments;a&&clearTimeout(a),a=setTimeout((function(){e.apply(o,i),a=null}),t||100)}}},{key:"getProperty",value:function(e){var t=e.match(/([^[\].]+|\[\])/g),a=this;a._properties[t[0]]||(a._properties[t[0]]={}),n(a=a._properties[t[0]],"_path",{enumerable:!1,value:t[0]});for(var o=1;o<t.length;o++)(t[o].startsWith("'")||t[o].startsWith('"'))&&(t[o]=t[o].substring(1,t[o].length-1)),a[t[o]]||(a[t[o]]={},n(a[t[o]],"_path",{enumerable:!1,value:a._path+"."+t[o]})),a=a[t[o]];return a}},{key:"updateNode",value:function(e,t){var a=this.component,o=[],i=void 0;if(e._multipleProperty)for(var r=0;r<e._multipleProperty.length;r++)if(e._multipleProperty[r]&&e._multipleProperty[r].dynamicValues.lastIndexOf(t)>0){o[r]=!1;var n=void 0;if((i=e._multipleProperty[r]).dynamicProp){if(o[r]=i,n=i.dynamicProp[i.actProp._path]){var p=n.indexOf(e);n.splice(p,1)}var c=i.helperNode;if(0===n.length)if("if"===c.getAttribute("is"))i.actProp._helperNodes.delete(c),delete i.dynamicProp[i.actProp._path];else if(delete i.dynamicProp[i.actProp._path],c._items){for(var h=!0,u=0;u<c._items.length;u++)if(c._items[u]._dynamicProperty&&c._items[u]._dynamicProperty[i.actProp._path]){h=!1;break}h&&i.actProp._helperNodes.delete(c)}}if(!o[r]&&(o[r]="dynamicNodes",n=i.actProp._dynamicNodes)){var f=n.indexOf(e);n.splice(f,1),n.length||delete i.actProp._dynamicNodes}}if(e.syntaxValue||e.helperValue){var y=void 0,m=void 0;if(e._cx||2===e.nodeType&&e.ownerElement._cx){y=e._cx||e.ownerElement._cx;var g=[];E.changeContext(y.node,g,y)}else"LYTE-YIELD"===e.tagName&&e._callee._cx&&(m=!0,y=e._callee._cx,g=[],E.changeContext(y.node,g,y,!0));var v=void 0,b=[],P=!1;if(e.helperValue){P=!0;var D=v=e.helperValue;if(v=this.processHelper({name:D.name,args:this.processArgs(this,{helperInfo:D},b,void 0,e)},e),"unescape"===D.name){for(var _=e.dynamicPositions,L=_.startingNode,C=_.length;C>1;){var w=L.nextSibling;L.remove(),L=w,C--}var T=v.childNodes.length;T||(v.appendChild(document.createTextNode("")),T=1);var x=v.childNodes[0];L.replaceWith.apply(L,v.childNodes);var S={startingNode:x,length:T};e.dynamicPositions=S,v=void 0}}else{var A=e.syntaxValue,M=void 0;-1===A.indexOf(".")&&-1===A.indexOf("[")||(M=A,A=A.substring(0,A.indexOf(".")));var $=M?E.get(a.data,M,b):a.data[A];v="boolean"===!(void 0===$||_typeof($))&&"number"===!(void 0===$||_typeof($))?$||"":$}if(b[0]instanceof Array||(b=[b]),o)for(r=0;r<o.length;r++)if(o[r]){var k=e._multipleProperty[r],R=e._multipleProperty[r].index,O=this.getProperty(b[R][0]),F=this.getProperty(b[R][0].substring(0,b[R][0].indexOf("."))),N=this.getData(b[R][0].substring(0,b[R][0].indexOf(".")));if("dynamicNodes"===o[r])d(O,"_dynamicNodes"),O._dynamicNodes.push(e);else{s(O,"_helperNodes"),O._helperNodes.add(k.helperNode);var I=k.dynamicProp;I[O._path]?I[O._path].push(e):(I[O._path]=[]).push(e)}if(e.ownerElement&&(e.ownerElement.hasAttribute("lyte-for")||e.ownerElement.hasAttribute("lyte-if")||e.ownerElement.hasAttribute("lyte-switch")||e.ownerElement.hasAttribute("lyte-forin"))||e.ownerElement&&"TEMPLATE"===e.ownerElement.tagName&&/^(for|forIn)$/.test(e.ownerElement.getAttribute("is"))&&!P){var B=e.ownerElement.getAttribute("is");("for"===B&&"items"===e.nodeName||"forIn"===B&&"object"===e.nodeName)&&(k.actProp._forHelpers.has(e.ownerElement)&&k.actProp._forHelpers.delete(e.ownerElement),O._forHelpers||s(O,"_forHelpers"),e.ownerElement._actualBinding=O,O._forHelpers.add(e.ownerElement))}null!=N&&E.establishBindings(F,N),e._multipleProperty[r].actProp=O,e._multipleProperty[r].dynamicValues=b[R]}if(2===e.nodeType){var H=[],U=e._parentNode?e._parentNode:e.ownerElement;if("TEMPLATE"===U.tagName&&"component"===U.getAttribute("is")&&"component-name"!==e.nodeName)if(U.hasAttribute("lyte-keep-alive"))for(var V in U._renderedComponent)H.push(U._renderedComponent[V]);else{var j=U._currentComponent;j&&U._renderedComponent[j]&&H.push(U._renderedComponent[j])}H.push(U);for(var q=0;q<H.length;q++){var Y=H[q];if(Y.set?Y.set(E.String.toCamelCase(e.nodeName),v,void 0,!0):(Y._initProperties=Y._initProperties||{},Y._initProperties[E.String.toCamelCase(e.nodeName)]=v),"LYTE-YIELD"===Y.tagName&&Y.component.data&&e.nodeName&&Y.component.data[e.nodeName]!==v&&E.set(Y.component.data,E.String.toCamelCase(e.nodeName),v,void 0,void 0,Y),Y._attributes=Y._attributes||{},E.isCustomElement(Y,!0)&&"string"!=typeof v){if("TEMPLATE"===e.ownerElement.nodeName){if(e.helperValue){if("for"===e.ownerElement.getAttribute("is")&&"items"===e.nodeName||"forIn"===e.ownerElement.getAttribute("is")&&"object"===e.nodeName){var z=e.ownerElement._attributes[e.nodeName],W=v;E.removeSelectedBindingDeep(e.ownerElement._actualBinding,z),W&&(s(W,"_bindings"),l(W._bindings,e.ownerElement._actualBinding),E.establishBindings(e.ownerElement._actualBinding,W)),"object"===e.nodeName&&E.removeSelectedBindingDeep(e.ownerElement._propBindingObject,z)}}else if("for"===e.ownerElement.getAttribute("is")&&"items"===e.nodeName||"forIn"===e.ownerElement.getAttribute("is")&&"object"===e.nodeName){var K=e.ownerElement._attributes[e.nodeName];"object"===e.nodeName&&E.removeSelectedBindingDeep(e.ownerElement._propBindingObject,K)}Y["__"+e.nodeName]=!0,Y.removeAttribute(e.nodeName)}}else if("boolean"==typeof v)Y._attributes=Y._attributes||{},Y._attributes[e.nodeName]=v,v?Y.setAttribute(e.nodeName,""):Y.removeAttribute(e.nodeName);else{var G;if(v&&"object"===(void 0===v?"undefined":_typeof(v)))if(void 0!==Record&&v instanceof Record)G=JSON.stringify(v.$.toJSON());else try{G=JSON.stringify(v)}catch(t){Lyte.error("Data passed for property '"+e.nodeName+"' of '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' cannot be serialized. The component '"+e.ownerElement.nodeName.toLocaleLowerCase()+"' might not be registered before its use.")}else G=null==v||null==v?"":v;var J=void 0===(v=G)?"":v,X=e.ownerElement;X.hasAttribute(e.nodeName)?"INPUT"==X.tagName&&"value"==e.nodeName&&X.validity.badInput||X.setAttribute(e.nodeName,J):e.nodeValue=J}if(Y._attributes[e.nodeName]=v,/^(INPUT|TEXTAREA|SELECT)$/.test(Y.nodeName))if("value"===e.nodeName){var Q=void 0===v?"":v;Y.value!==Q&&(Y.value=Q)}else"checked"===e.nodeName&&(Y.checked=v);v||-1===E.booleanAttrList.indexOf(e.nodeName)||Y.removeAttribute(e.nodeName);var Z=Y._isStopped,ee=void 0;switch(Y.getAttribute("is")){case"for":this.updateForHelper(Y,{type:"update"});break;case"if":ee=this.updateSwitchHelper("if",Y,void 0,!0,!0);break;case"forIn":this.updateForInHelper(Y,{type:"update"});break;case"switch":this.updateSwitchHelper("switch",Y,void 0,!0,!0);break;case"component":"component-name"===e.nodeName&&this.updateDynamicComponent(Y,"update")}var te=void 0;Z&&Z!==ee?te=ee?"break"===ee?"MS":"SM":"break"===Z?"SM":"SS":"break"===ee?te="MS":"continue"===ee&&(te="SS"),te&&this.handleBreak(Y._cx,te)}}else e.nodeValue=void 0===v?"":v;y&&E.removeContext(y.node,g,y,m)}}},{key:"handleBreak",value:function(e,t){if(e){for(var a=e.node,o=e.itemIndex,i=(a.getAttribute("item"),e.node._forContent),r="M"===t[0]?i.length:o+1,n=o;n<r;n++){for(var s=i[n],l=0;l<s.length;l++)s[l].remove(),(s[l]._forContent||s[l]._caseContent)&&this.removeHelpers(s[l]);i[n]=[],E.removeSelectedBindingDeep(a._items[n].itemProperty,a._attributes.items[n]),a._helpers[n]=[],a._items[n]={_dynamicProperty:{},itemProperty:{},indexProperty:{}}}var d=a._attributes.items.length;"M"===t[1]?this.updateForHelper(a,{firstIndex:o,secondIndex:d-o,type:"replace"},void 0,{}):this.updateForHelper(a,{firstIndex:o,secondIndex:1,type:"replace"},void 0,{})}}},{key:"createCustomEvent",value:function(e,t,a){var o=new CustomEvent(e);t._actions[e]=o,t._actions[e].processAction=a}},{key:"isEmptyString",value:function(e){return!("string"==typeof e)||""===e}},{key:"processArgs",value:function(e,t,a,o,i,r,n){var s=t.newHelperInfo&&r?t.newHelperInfo.args:t.helperInfo.args;a=a||[],s=Array.isArray(s)?Array.from(s):s;for(var l=0;l<s.length;l++)if(s[l]&&s[l].type)this.internalHelpers(e,s,l,a,o,i,r,n);else if(this.isEmptyString(s[l]))r&&s[l]instanceof Array&&(s[l]=E.getDD(e.component.data,s[l]));else if(s[l].startsWith("'")&&s[l].endsWith("'"))s[l]=s[l].substr(1,s[l].length-2);else{s[l]=s[l].trim();var d=[];"event"===s[l]&&o?s[l]=o:"this"===s[l]&&i?s[l]=2===i.nodeType?i.ownerElement:i:s[l]=E.get(e.component.data,s[l],d,n),a.push(d)}return s}},{key:"internalHelpers",value:function(e,t,a,o,i,r,n,s){var l=t[a].value,d=this.processHelper({name:l.name,args:this.processArgs(e,{helperInfo:l},o,i,r,n,s)});t[a]=d}},{key:"processHelper",value:function(e,a){var o=[],i=e.name;if(v.registeredHelpers[i]){switch(e.name){case"method":o.push(this,a);break;case"lbind":o.push(this,a.ownerElement);break;case"lyteViewPort":o.push(a.ownerElement),e.args.length||o.push(!1)}return v.registeredHelpers[e.name].apply(this,o.concat(e.args))}t.error("LC003",e.name)}},{key:"getActionProperty",value:function(e){var t=this._properties;return t?t[e].value:void 0}},{key:"hasInternalBindings",value:function(e){return e.match(/[(]{1}[^)]+[)]{1}/)}},{key:"getArgValues",value:function(e,t){for(var a=[],o=0;o<e.length;o++)a.push(t[e[o]].value);return a}},{key:"createEventListeners",value:function(e,t,a){if(e._callee||e===this||(e._callee=this),-1==o.indexOf(t)){var i=t.substr(2);e.getAttribute(i),v.registeredComponents[e.localName]&&!e.component||"TEMPLATE"===e.tagName&&"component"===e.getAttribute("is")?(e._toRegEvnts=e._toRegEvnts||{},e._toRegEvnts[t.substr(2)]={listener:_,attrVal:this.tagName.toLowerCase()+" => "+a.name}):(e.setAttribute(i,this.tagName.toLowerCase()+" => "+a.name),e.addEventListener(t.substr(2),_)),e.hasAttribute(t)&&(e[t]=void 0),e.removeAttribute(t)}}},{key:"registerParentYield",value:function(e){var a=this._callee._yields[e],o=void 0;a&&(t._ie?((o=document.createElement("div")).innerHTML=a.outerHTML,o=o.childNodes[0],this.constructor.splitTextNodes(o)):o=a.cloneNode(!0),Object.keys(a).forEach((function(e){o[e]=a[e]})),this._yields[e]=o)}},{key:"registerYields",value:function(){this._yields={};for(var e=this.querySelectorAll("template[is=registerYield],template[is=yield]"),t=[],a=0;a<e.length;a++){for(;e[a].hasChildNodes();)e[a].content.appendChild(e[a].childNodes[0]);e[a].hasAttribute("from-parent")&&this._callee?this._callee._yields?this.registerParentYield(e[a].getAttribute("yield-name")):t.push(e[a]):this._yields[e[a].getAttribute("yield-name")]=e[a]}if(t.length&&this._callee){var o=this;this.lazyYield=function(){if(o._callee){for(var e=0;e<t.length;e++){var a=t[e];o.registerParentYield(a.getAttribute("yield-name"))}o._callee.removeEventListener("onReady",o.lazyYield),delete o.lazyYield}},this._callee.addEventListener("onReady",this.lazyYield)}}},{key:"connectedCallback",value:function(){if(!this.hasAttribute("lyte-rendered")&&v.registeredComponents[this.localName]&&!this._ccCalled){var e=this._fR;if(e||(this._callee=this._callee||this.getCallee(this.parentNode)),this.__h={},this.__counter=0,this.__dc={},e){var t=e.methods;t&&this.setMethods(t),E.ccDelay.push(this),this._ccCalled=!0}else this.actualConnectedCallback();(this._initProperties&&this._initProperties.hasOwnProperty("lyteViewPort")?this._initProperties.lyteViewPort:this.component.data.lyteViewPort)&&(E.isViewPortPending||(requestAnimationFrame((function(){requestAnimationFrame((function(){E.executePendingViewPort()}))})),E.isViewPortPending=!0),E.pendingViewPortElements.push(this))}}},{key:"actualConnectedCallback",value:function(){var e=this.component.data,a=this._fR;a&&(this._callee=this._callee||this.getCallee(this.parentNode));var o=this.constructor._templateAttributes;if(o&&o.attr)for(var i in o.attr){var r=o.attr[i];if(!this.hasAttribute(r.name)&&!e.hasOwnProperty(r.name)||r.globalEvent){if(r.helperInfo&&"action"===r.helperInfo.name){this._evBoundEvents=this._evBoundEvents||{};var n,d=r.helperInfo.args[0];n=d.startsWith('"')||d.startsWith("'")?d.substring(1,d.length-1):d;var p=r.globalEvent||-1!==r.name.indexOf("-")?r.name:r.name.substr(2);this._evBoundEvents[p]={name:n,args:r.helperInfo.args,from:"component"};var c=this.getAttribute(r.name),h=this.constructor._template.getAttribute(r.name);this.setAttribute(r.name,h+(c?" ; "+c:""))}r.globalEvent||(r.from="component",r.staticValue?this.setAttribute(o.attr[i].name,r.staticValue):(this.setAttribute(o.attr[i].name,"{{dummy}}"),this.bindNode(this.attributes.getNamedItem(o.attr[i].name),[],void 0,{},o.attr[i],void 0,void 0,!0)))}}for(var u in this._toRegEvnts)this.addEventListener(u,this._toRegEvnts[u].listener),this.hasAttribute(u)?this.setAttribute(u,this.getAttribute(u)+" ; "+this._toRegEvnts[u].attrVal):this.setAttribute(u,this._toRegEvnts[u].attrVal);this._toRegEvnts={};var f=E.unbound,y=this.afterConnected();if(E.unbound||a||(Lyte.establishObserverBindings.call(this,this.constructor._observers),s(e,"_bindings"),l(e._bindings,this._properties),E.establishBindings(this._properties,e)),E.unbound=f,"string"==typeof y){if(y)if(E.frSpecial){var m=document.createElement("template");m.innerHTML=y,this.innerHTML="",this.appendChild(m.content)}else this.innerHTML=y;E.processAction(this)}else{if(this.component.data.lyteViewPort)if(t._ie){for(var g=0;g<y.childNodes.length;g++)if(y.childNodes[g].tagName){this._dummyViewPortF=y.childNodes[g];break}for(g=y.childNodes.length-1;g>=0;g--)if(y.childNodes[g].tagName){this._dummyViewPortL=y.childNodes[g];break}}else this._dummyViewPortF=y.children[0],this._dummyViewPortL=y.children[y.children.length-1];this.appendChild(y)}var v=this.component.__data,b=this.attributes;this.__lyteIgnore=!0;for(var P=b.length-1;P>-1;P--){var D=A.String.toCamelCase(b[P].nodeName);v[D]&&v[D].hideAttr&&this.removeAttribute(b[P].nodeName)}if(this.__lyteIgnore=!1,this._callee&&this._callee.serverCall&&(this.serverCall=!0),this.serverCall&&!this.hasAttribute("server-rendered")){this.setAttribute("server-rendered","");var _=A.sendtoclient.call(this,this,!0,this.component.__data);this.setAttribute("component-data",JSON.stringify(_))}this.hasAttribute("server-rendered")||this.setAttribute("lyte-rendered",""),a||Lyte._ignoreOnReady||this.dispatchEvent(new CustomEvent("onReady"));var L=void 0;this.component._config&&null!=this.component._config.clientLifeCycleHooks&&(L=1==this.component._config.clientLifeCycleHooks||"object"==_typeof(this.component._config.clientLifeCycleHooks)&&this.component._config.clientLifeCycleHooks.includes("didConnect"));var C=this.component._ssr?this.component._ssr.overrides:void 0;(!this.hasAttribute("server-rendered")||this.serverCall||L)&&(C&&C.didConnect&&this.serverCall?C.didConnect.apply(this):this.callback("didConnect"),this.onCallBack("didConnect")),null==this.serverCall&&this.callback("didRender"),a&&this.removeAttribute("_lyteprop")}},{key:"onCallBack",value:function(e){var a=this.constructor._callBacks[e];if(a)for(var o=0;o<a.length;o++)try{a[o].value.call(this.component)}catch(e){t.error(e)}}},{key:"callback",value:function(e){var a,o=this.component[e];if(o){arguments.length>1&&(a=Array.from(arguments)).splice(0,1);try{o.apply(this.component,a||[])}catch(e){t.error(e)}}}},{key:"establishObserverBindings",value:function(){for(var e=this.constructor._observers,t=0;t<e.length;t++)for(var a=e[t].properties,o=0;o<a.length;o++){var i=void 0,r=!1;-1!==a[o].indexOf(".[]")?(r=!0,i=this.getProperty(a[o].substring(0,a[o].indexOf(".[]")))):i=this.getProperty(a[o]),s(i,"_observers"),i._observers.add({callee:this,observer:e[t],isArrayObserver:r})}}},{key:"removeBindings",value:function(e,t){for(var a in e){var o=t[a];o&&o._bindings&&o._bindings.delete(e[a]),"object"===_typeof(e[a])&&o&&this.removeBindings(e[a],o)}}},{key:"actualDisconnected",value:function(){var e=this;if(e.component){for(n in e._cx=null,e._callee=null,e.component.$node=null,e.component.__data=null,e.component.data.__component__=null,e.component.data=null,e.component=null,e.__dc=e.__dc||{},e.__h=e.__h||{},e.__dc){var t=e.__dc[n];if(t.hasAttribute("lyte-keep-alive"))for(var a=Object.keys(t._renderedComponent),o=0;o<a.length;o++){var i=a[o];i!==t._currentComponent&&t._renderedComponent[i].remove()}}for(n in e.__h)e.__h[n].remove();e.__h={},e.__dc={};var r=e._yields;for(var n in r)r[n]._callee=null;e=null}}},{key:"disconnectedCallback",value:function(){if(!E.ignoreDisconnect&&this.component){var e=E.pendingViewPortElements;if(this.component.data.lyteViewPort){var t=e.indexOf(this);-1!=t&&e.splice(t,1)}if(e.length)for(var a=0;a<e.length;a++){var o=E.getActViewPortTemplate(e[a]);o&&"TEMPLATE"==o.tagName&&"if"==o.getAttribute("is")&&o._callee==this&&(e.splice(a,1),a--)}if(this._destroyed=!0,this.__toRemoveLazy){for(var i in this.__toRemoveLazy)this.__toRemoveLazy[i].forEach((function(e){Lyte.$.toRemoveFromRequiredServices(e)}));delete this.__toRemoveLazy}this.component._bindings=null;var r=this.__scpObj;if(r)for(var n in r){var s=this.component.data[n],l=r[n].split("_");s&&Lyte.removeNestScp(this.component.data[n],l[0],l[1],void 0,this)}this._fR||E.removeSelectedBindingDeep(this._properties,this.component.data,!0);var d=this.__h;for(n in d)d[n]._actualBinding&&this.removeHelpers(d[n]);for(var p in d={},this._properties)this._properties[p]={};this.callback("didDestroy"),this.onCallBack("didDestroy"),E.dcc||(E.dcc=[],requestAnimationFrame((function(){requestAnimationFrame((function(){try{for(var e,t=0;e=E.dcc[t];t++)e.actualDisconnected()}catch(e){}E.dcc=void 0}))}))),E.dcc.push(this),this.lazyYield&&this.removeEventListener("onReady",this.registerParentYield),this.constructor.activeInstances--}}}],[{key:"updateValue",value:function(e,t,a){for(var o=t.split("."),r=e,n=0;n<o.length-1;n++)r=r[o[n]];r[o[i]]=a}},{key:"createDocFragment1",value:function(e){if(e.content)return e.content;for(var t=e.childNodes,a=p(),o=t.length,i=0;i<o;i++)a.appendChild(t[0]);return a}},{key:"_registerComponent",value:function(e,a){var o,i=E.lyteComponentsDiv,r=t.$.assetsDiv,n=this._template;if(this._template&&"string"==typeof this._template){this._template.replace(/\\'/g,"'");var s=c("div");for(s.innerHTML=this._template;s.firstChild;)"STYLE"===s.firstChild.nodeName?(r.querySelector("style[from-component='"+e+"']")&&r.querySelector("style[from-component='"+e+"']").remove(),s.firstChild.setAttribute("from-component",e),r.appendChild(s.firstChild)):i.appendChild(s.firstChild)}else document.querySelector("template[tag-name='"+e+"']")&&i.appendChild(document.querySelector("template[tag-name='"+e+"']"));if(this._template=i.querySelector("template[tag-name='"+e+"']"),this._helperTemplate=document.createElement("template"),this._helperTemplate.setAttribute("_lyteht",e),E.h1Div.content.appendChild(this._helperTemplate),this._template){if(E.needDummyComponentsDiv)if(t._ie){var l=t.Compile.getTemplateFromString(n);E.dummyLyteComponentsDiv.appendChild(l)}else o=this._template.cloneNode(!0);this._template&&this._template.content;var d,p=-1!==this._observedAttributes.indexOf("lyteUnbound"),h=t._ie?this._template:this._template.content;if(p&&(t._ie?((d=document.createElement("div")).innerHTML=this._template.outerHTML,d=d.childNodes[0]):d=this._template.cloneNode(!0)),this.splitTextNodes(h),p&&this.splitTextNodes(d),!this._dynamicNodes)if(t.Compile.getDynamicNodes){var u=t.Compile.getDynamicNodes(e,void 0,t._ie?h:void 0);if(u.errors)return console.error("Error in the component",u.componentName,u.errors),!1;this._dynamicNodes=u.dynamicNodes}else t.error("LC002",e);if(this._dynamicNodes){F(h,this._dynamicNodes,e,this,d?t._ie?d:d.content:void 0),t._ed?this._tC=this._template.outerHTML:t._ie&&(this._tC=h.outerHTML),this._templateAttributes=this._templateAttributes||{type:"attr",attr:{},position:[]};var f=[this._templateAttributes];if(F(this._template,f,e,this),this._templateAttributes=f[0],this._templateAttributes&&this._templateAttributes.attr){var y=this._template.attributes;try{for(var m=0;m<y.length;m++){var g=y[m].name;this._templateAttributes.attr[g]||"tag-name"===g||"use-strict"===g||(this._templateAttributes.attr[g]={name:g,staticValue:y[m].value},this._template.removeAttribute(g),o&&o.removeAttribute(g),m--)}}catch(e){t.error("Error with templateAttributes. ")}}}o&&E.dummyLyteComponentsDiv.appendChild(o),this._sta=d?E.processStatic(d):void 0}}},{key:"splitTextNodes",value:function(e){if(e&&e.childNodes&&e.childNodes.length)for(var a=e.childNodes.length-1;a>=0;a--)this.splitTextNodes(e.childNodes[a]);if("TEMPLATE"!==e.tagName||t._ie||this.splitTextNodes(e.content),e.nodeType===e.TEXT_NODE){var o=e.nodeValue;if(o){var i=o.match(/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}/g);if(!i)return;for(var r=[],n=0;n<i.length;n++){var s=o.indexOf(i[n]),l=s+i[n].length;s&&r.push(document.createTextNode(o.substring(0,s))),r.push(document.createTextNode(o.substring(s,l))),o=o.substring(l)}if((o.trim()||!e.nextSibling||3!==e.nextSibling.nodeType||e.nextSibling.nodeValue.trim())&&r.push(document.createTextNode(o)),t._rwpf&&"#document-fragment"===e.parentNode.nodeName){for(var d=0;d<r.length;d++)h(e.parentNode,r[d],e);e.remove()}else e.replaceWith.apply(e,r)}}}},{key:"observedAttributes",get:function(){for(var e=[],t=0;t<this._observedAttributes.length;t++)e[t]=E.String.dasherize(this._observedAttributes[t]);return E.customPropHandlers.forEach((function(t,a){e.push(E.String.dasherize(t))})),e}}]),a}(),w=function(){return{type:"callBack",value:"observer"===this.type?this.value:this,properties:arguments,observes:"observer"===this.type?this:void 0}},T=function(){return{type:"observer",value:this,properties:arguments,on:Function.prototype.on}},x=function(){return{type:"computed",value:this,properties:arguments}},S=Function.prototype;S.on?S.lyteOn=w:S.on=w,S.observes?S.lyteObserves=T:S.observes=T,S.computed?S.lyteComputed=x:S.computed=x;var A={fRP:{},fRC:0,customPropRegex:"",customPropHandlers:[],_registeredComponents:{},_reRegisteredComponents:[],toBeRegistered:[],updateCustomCrmComponent:function(e,t){for(var a in e)if(e[a]&&"observer"===e[a].type)e[a].fnName=a,t._observers.push(e[a]);else if(e[a]&&"callBack"===e[a].type){for(var o=e[a].properties,i=0;i<o.length;i++)t._callBacks[o[i]]||(t._callBacks[o[i]]=[]),e[a].fnName=a,t._callBacks[o[i]].push(e[a]);e[a].observes&&(e[a].observes.fnName=a,t._observers.push(e[a].observes))}else t.component.prototype[a]=e[a];return e},dataFromMixin:function(e,t,a,o){for(var i=e.length,r=0;r<i;r++)for(var n in e[r])"actions"===n?Object.assign(t,e[r][n]):"methods"===n?Object.assign(a,e[r][n]):o[n]=e[r][n];return{actionsFromMixin:t,methodsFromMixin:a,newDefinition:o}},throwEvent:function(e){var t=this.$node?this.$node:this,a=t._actions?t._actions[e]:void 0,o=[];if(arguments.length>1)for(var i=1;i<arguments.length;i++)o.push(arguments[i]);E.throwAction.call(t,t._callee,e,void 0,!0,o,t),this.$node&&t.dispatchEvent(a||new CustomEvent(e,{detail:o}))},throwAction:function(e,a,o,i,r,n,s,l,d){var p=void 0;if(this._route&&i)p=(e=t.Router.getRouteInstance(this._route)).actions||(e.actions={});else if(this.routeName){var c=this.parent;c&&(p=c.component?(e=c.component).constructor._actions:(e=c).actions||(e.actions={}))}else e&&(p=e.constructor._actions);if(e){var h=r||[];if(o=o||(this._actions&&this._actions[a]?this._actions[a].processAction:void 0)){var u=[];n&&E.adCx(n,u);var f;if(f=o.skipArgProcessing?o.args:this.processArgs(e,{helperInfo:o},void 0,s,n),h.splice.apply(h,[0,0].concat(f)),n&&E.rmCx(n,u),p[o.name])if(i)p[o.name].apply(this._callee.component,h),l=!0;else{var y=n.parentNode,m=p[o.name].apply(this.component,h);if(s.currentTarget===document.body||d||(m=!1),l=!0,!1!==m&&!s.cancelBubble)if(o.from&&n.getAttribute(s.type)&&n._boundEvents&&n._boundEvents[s.type]){n._callee.constructor._actions;var g=n._boundEvents[s.type],v=t.deepCopyObject(g);E.skipArgProcessing(v,s,n),E.throwAction.call(n._callee,n._callee,s.type,v,void 0,void 0,n,s,l)}else{if(E.hasLyteEvents(n,a)&&(m=!E.handleLyteEvents(n,s)),!1===m)return;if(E.isCustomElement(n)&&(e=y),y){for(var b=void 0;y&&(!y.getAttribute(a)||y.hasAttribute("disabled"))&&"BODY"!=y.tagName&&(!E.hasLyteEvents(y,a)||!(b=E.handleLyteEvents(y,s)));)y=y.parentNode;if(b||!y||"BODY"===y.tagName)return;if(y._callee||(y._callee=y.getCallee?y.getCallee(y):E.getCallee(y)),y&&s.type===a&&!s.cancelBubble)if(y._evBoundEvents&&y._evBoundEvents[a]){var P=y._evBoundEvents[a],D=t.deepCopyObject(P);E.skipArgProcessing(D,s,y),E.throwAction.call(y,y,a,D,void 0,void 0,y,s,l)}else if(y&&y._boundEvents&&y._boundEvents[a]){var _=y._boundEvents[a],L=t.deepCopyObject(_);E.skipArgProcessing(L,s,y),E.throwAction.call(y._callee,y._callee,a,L,void 0,void 0,y,s,l)}}}}else t.error("LC004",o.name)}else if(i){var C=p[a]||p[E.String.toCamelCase(a)]||p[E.String.dasherize(a)];if(C){var w=E.isCustomElement(e)?e.component:e;l=!0,!1!==C.apply(w,h)&&E.throwAction.call(e,e._callee,a,o,i,r,void 0,void 0,l)}else E.throwAction.call(e,e._callee,a,o,i,r,void 0,void 0,l)}}else l||t.warn("Nothing handled the action "+a+".")},isControlHelper:function(e){return"TEMPLATE"===e.tagName&&e.getAttribute("is")&&"component"!==e.getAttribute("is")||e.hasAttribute("lyte-for")||e.hasAttribute("lyte-if")||e.hasAttribute("lyte-switch")||e.hasAttribute("lyte-forin")},isCustomElement:function(e,t){return e.hasAttribute&&(("TEMPLATE"===e.tagName||e.attributes["lyte-for"]||e.attributes["lyte-if"]||e.attributes["lyte-switch"]||e.attributes["lyte-forin"])&&t||e.nodeName&&-1!==e.nodeName.indexOf("-")&&(v.registeredComponents[e.localName]||"LYTE-YIELD"===e.tagName))},componentSet:function(e,t,a,o,i){o||this.get(e)!==t?E.set(this.data,e,t,a,void 0,i):E.clearError(this.data,e)},componentGet:function(e){return e?E.get(this.data,e):this.data},nodeGet:function(e){return e?this.component.get(e):this.component.data},nodeSet:function(e,t,a,o){this.component.set(e,t,a,void 0,o)},registerComponent:function(e,a,o){if(-1!=E._reRegisteredComponents.indexOf(e)||!v.registeredComponents[e]){var i=void 0,r=void 0;E._registeredComponents[e]?(i=E._registeredComponents[e],r=!0):((i=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,C),t}())._properties={},i.activeInstances=0,i._depthTemp=document.createElement("template"),i.prototype.throwAction=this.throwAction,i.compName=e),Object.defineProperty(i.prototype,"setData",{configurable:!0,writable:!0,value:function(e,t,a){return this.component.setData(e,t,a)}}),Object.defineProperty(i.prototype,"getData",{configurable:!0,writable:!0,value:function(e){return this.component.getData(e)}}),Object.defineProperty(i.prototype,"setMethods",{configurable:!0,writable:!0,value:function(e,t){return this.component.setMethods(e,t)}}),i.prototype.get=this.nodeGet,i.prototype.set=this.nodeSet,i._bindsIds=[],o=o||{};var n={},s={};for(var l in o)"services"==l&&(s[l]={},o.services.forEach((function(e){if("string"==typeof e)s[l][e]=e;else if(e&&"object"===(void 0===e?"undefined":_typeof(e))){var t=e.as,a=e.service;Lyte._keywords.is(t,"component")?Lyte.warn("Service cannot be used in any keywords of Lyte."):e.scope&&"static"!=e.scope?"instance"==e.scope&&(t=e.as,a=e.service,n[l]=n[l]||{},n[l][t]=a):s[l][t]=a}}))),"mixins"==l&&(s[l]=[],o.mixins.forEach((function(t){Lyte.Mixin.exists(t)?s[l].push(Lyte.registeredMixins[t]):Lyte.$.requiredMixins(t,e,"component")}))),"ssr"==l&&(i._ssr=o[l]),"config"==l&&(i._config=o[l]);i.component=_;var d=_.prototype;d.$lg=Lyte.__gl,d.set=this.componentSet,d.get=this.componentGet,d.validate=function(){var e=this.data;for(var t in e)E.handleValidation(e,t,e[t],this)},d.throwEvent=this.throwEvent,d.executeMethod=E.executeMethod,d.getData=E.componentGetData,d.setData=E.componentSetData,d.getMethods=E.componentGetMethods,d.setMethods=E.componentSetMethods,d.hasAction=E.componentHasAction,d.setActions=E.componentsetActions,i._mixins=o.mixins,i._serviceToBeUsed=n?n.services:void 0;var p={},c=Lyte.toBeInjectedServices;if(c)for(var h in c)Lyte.$.injectServices.component(h,c[h],void 0,Lyte.__gS[h],i);for(var u in s)if("mixins"==u){var f={},y={};E.dataFromMixin(s.mixins,p,f,y),a=Object.assign(y,a),p=Object.assign(p,{})}else if("services"==u){var m=s[u];for(var g in m)Lyte.registeredServices.hasOwnProperty(m[g])?a[g]=new Lyte.registeredServices[m[g]]:Lyte.$.requiredServices(g,m[g],(function(t,a){E._registeredComponents[e].component.prototype[a]=new t}))}i._actions=Object.assign({},p,a.actions),i._template=a._template,delete a._template,i._dynamicNodes=a._dynamicNodes,delete a._dynamicNodes,i._templateAttributes=a._templateAttributes,delete a._templateAttributes,i._callBacks={},i._observers=[];var b=a.data?a.data:void 0,P=Object.assign({},f,a.methods);i._observedAttributes=a._observedAttributes||[],i._observedMethodAttributes=a._observedMethodAttributes||{},delete a._observedAttributes,delete a._observedMethodAttributes,delete a.data,delete a.methods,a=E.updateCustomCrmComponent(a,i),i._data=b,i._methods=P,i._registerComponent(e,i),v.registeredComponents[e]=!0,E._registeredComponents[e]||("complete"===document.readyState||"interactive"===document.readyState?customElements.define(e,i):E.toBeRegistered.push({name:e,def:i}));var D=i._depthTemp;return!E._ie&&D&&D.content.childNodes.length?(D.setAttribute("data-id","depthTemp_"+e),E.lyteComponentsDiv.appendChild(D)):delete i._depthTemp,E._registeredComponents[e]=i,r&&((i._pendingComponents||[]).forEach((function(e){delete e.__lyteIgnore,e.actualConstructor(),Array.from(e.attributes).forEach((function(t){-1!=e.constructor.observedAttributes.indexOf(t.name)&&e.attributeChangedCallback(t.name,null,t.value)})),e.connectedCallback()})),i._pendingComponents=[]),i}function _(){}t.warn("Component "+e+" already registered")},registerHelper:function(e,t){v.registeredHelpers[e]=t},registerMixin:function(e,a){t.Mixin.register.call(t,e,a)},typeCast:function(e,t,a){if(null===e)return e;try{switch(t){case"string":return"object"===(void 0===e?"undefined":_typeof(e))?JSON.stringify(e):e.toString();case"number":if(""==e)return;var o=+e;if(isNaN(o))throw"TypeCast exception";return o;case"array":case"object":return JSON.parse(e);case"boolean":return!(!e&&""!==e||"false"===e);default:return e}}catch(t){return a&&(a.isError=!0),e}},sendtoclient:function(e,t,a){var o=t?e.component.data:e,i={},r=a;for(var n in o)if(t){var s=e.component.__data[n];if("bindIds"==n&&(i[n]={value:o[n]}),s&&/^(object|array)$/.test(s.type)&&e._attributeDetails&&e._attributeDetails.hasOwnProperty(A.String.dasherize(n)))i[n]={fP:!0};else if(o[n]instanceof Date)i[n]={value:o[n],type:"Date"};else if(r[n])i[n]={value:o[n],type:r[n].type};else{var l=_typeof(o[n]);null==o[n]&&(l=void 0),i[n]={value:o[n],type:l}}}else"Date"==o[n].type?i[n]=new Date(o[n].value):o[n].fP||(i[n]=o[n].value);return i},getDataType:function(e){var t=void 0===e?"undefined":_typeof(e);return"object"===t&&Array.isArray(e)?"array":t},handleValidation:function(e,a,o,i,r){var n=t.validate(e,a,o,i,r);return n?(E.set(i.data.errors,a,n),i.$node.callback&&i.$node.callback("onError",a,n)):E.clearError(e,a),n},clearError:function(e,a){e.errors&&e.errors[a]&&t.objectUtils(e.errors,"delete",a)},createLyteId:function(e){return e.__counter++,"__lyteId"+e.__counter},apdNode:function(e,t){E.tDiv.content.appendChild(e);var a=this.createLyteId(t);t.__h[a]=e,e.__lyteId=a},update:function(e,t,a,o,i,r,d,p,c,h){var u=e.__component__,f=!0,y=void 0,m=void 0;if(!r){if(r=e[t],u&&"LYTE-YIELD"!==u.tagName){if((m=u.component.__data[t])&&(y=m.type)&&(f=!m.hideAttr,y===E.getDataType(a)||void 0===a&&"boolean"!==y||(a=E.typeCast(a,y))),a===r)return void E.clearError(e,t);if((!o||"object"==(void 0===o?"undefined":_typeof(o))&&1!=o.skipValidation)&&E.handleValidation(e,t,a,u.component))return}e.hasOwnProperty(t)||Array.isArray(e)?e[t]=a:E.oF(e,"add",t,a,!0)}var g,v,b=!!u,P=E.String.dasherize(t),D=!1;if(e._scp&&(Lyte.cmpData(r,a)||(D=!0),r&&(Array.isArray(r)||"object"==(void 0===r?"undefined":_typeof(r)))&&Array.from(e._scp.keys()).forEach((function(e){var t=Lyte.nestScp[e],a=t.cyclic;Lyte.removeNestScp(r,e),a&&Lyte.bindObj(t._data,void 0,e,[],new Map)}))),(Lyte.isRecord(e)&&e.$.__scpObj||e.hasOwnProperty("__component__")&&e.__component__.__scpObj)&&(Lyte.isRecord(e)?(g=e.$.__scpObj,v=e):(g=e.__component__.__scpObj,v=e.__component__),g.hasOwnProperty(t))){var _=g[t].split("_");Lyte.removeNestScp(r,_[0],_[1],void 0,v,void 0,Lyte.isRecord(a)||Array.isArray(a)&&a.model&&a.add?a:void 0),delete g[t]}if((i&&Lyte.isRecord(e)||e&&e.hasOwnProperty("_scp")&&e._scp.size||m&&/^(object|array)$/.test(m.type)&&m&&/^(object|array)$/.test(m.type)&&(m.watch||m.hasOwnProperty("items")||m.hasOwnProperty("properties")))&&Lyte.establishObjectBinding(e,t,i,!0,h,m&&m.watch?m.watch:void 0),u&&p&&("string"==typeof a&&u.getAttribute(P)!==a||u.hasAttribute(P))&&(!E.customPropRegex.exec(t)||u.hasAttribute(P))&&f)if(a&&"object"===(void 0===a?"undefined":_typeof(a))){var L=void 0;try{L=JSON.stringify(a),u.attributes.getNamedItem(P).__lyteIgnore=!0,u.setAttribute(P,L)}catch(e){}}else{var C=E.typeCast(a,"string");if(u.getAttribute(P)!==C){var w=u.attributes.getNamedItem(P);w&&(w.__lyteIgnore=!0),C=C||"",u.setAttribute(P,C)}}if(a&&"string"!=typeof a&&"boolean"!=typeof a&&"number"!=typeof a){if(r&&"object"===(void 0===r?"undefined":_typeof(r))&&r._bindings){if(a._bindings||n(a,"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),u&&u.component.data===e&&-1===t.indexOf(".")){var T=u.getProperty(t);if(this.removeSelectedBindingDeep(T,r),l(a._bindings,T),this.establishBindings(T,a),T._forHelpers)for(var x=T._forHelpers.toArrayLyte(),S=0;S<x.length;S++){var A=x[S];A._propBindingObject&&this.removeSelectedBindingDeep(A._propBindingObject,r)}this.affectChanges(T,void 0,r,d,e[t])}else if(e._bindings)for(var M=e._bindings.toArrayLyte(),$=0;$<M.length;$++){var k=M[$][t];if(k){if(this.removeSelectedBindingDeep(k,r),l(a._bindings,k),this.establishBindings(k,a),k._forHelpers)for(var R=k._forHelpers.toArrayLyte(),O=0;O<R.length;O++){var F=R[O];F._propBindingObject&&this.removeSelectedBindingDeep(F._propBindingObject,r)}this.affectChanges(k,void 0,r,d,e[t])}}}else if(e._bindings){s(a,"_bindings");for(var N=e._bindings.toArrayLyte(),I=0;I<N.length;I++){var B=N[I];B[t]&&(l(a._bindings,B[t]),this.establishBindings(B[t],a),this.affectChanges(B[t],void 0,r,d,e[t]))}}m=m||(u&&"LYTE-YIELD"!==u.tagName?u.component.__data[t]:void 0),i&&Lyte.isRecord(e)||e&&e.hasOwnProperty("_scp")&&e._scp.size||m&&/^(object|array)$/.test(m.type)&&(m.watch||m.hasOwnProperty("items")||m.hasOwnProperty("properties"))}else{if(r&&"object"===(void 0===r?"undefined":_typeof(r))&&r._bindings&&e._bindings)for(var H=e._bindings.toArrayLyte(),U=0;U<H.length;U++){var V=H[U];if(V[t]&&(this.removeSelectedBindingDeep(V[t],r),V[t]._forHelpers))for(var j=V[t]._forHelpers.toArrayLyte(),q=0;q<j.length;q++){var Y=j[q];Y._propBindingObject&&this.removeSelectedBindingDeep(Y._propBindingObject,r)}}if(e._bindings)for(var z=e._bindings.toArrayLyte(),W=0;W<z.length;W++){var K=z[W];K[t]&&this.affectChanges(K[t],void 0,r,d,e[t])}}if(D&&e._scp&&this.callDeepObservers(e,{type:"deepChange",oldValue:r,newValue:a},t),b&&!c&&u._attributeDetails&&u._callee){var G=u._attributeDetails[E.String.dasherize(t)],J=void 0;if(G&&G.isLbind&&(J=G.dynamicValue),J){var X=void 0;u._cx&&(X=[],E.changeContext(u._cx.node,X,u._cx));var Q=E.getNew(u._callee.component.data,J);if(!Q.context)return;var Z=!1;Q.context===u._callee.component.data?u._callee._properties[Q.lastKey]&&u._callee._properties[Q.lastKey].__fromComponent&&(Z=!0):Z=!0,Z&&E.set(Q.context,Q.lastKey,a,o),X&&E.removeContext(u._cx.node,X,u._cx)}}},getContentForIE:function(e,a,o,i){if("string"==typeof e){o=!0;var r=c("div");r.innerHTML=e,e=r.childNodes[0],a.splitTextNodes(e)}if(e.getAttribute&&e.getAttribute("depth")){Lyte._ms&&i&&(i._content=r);var n=parseInt(e.getAttribute("depth"));e=t._ie?e:o?e.content:e.content.cloneNode(!0);for(var s=0;s<n;s++)e=e.childNodes[0]}return e},replaceWithPf:function(e,a){t._rwpf?(h(e.parentNode,a,e),e.remove()):e.replaceWith(a)},getCallee:function(e,t){for(;e&&!E.isCustomElement(e)&&"LYTE-YIELD"!==e.tagName;){if("BODY"===e.tagName){e=null;break}e=e.parentNode}return e&&"LYTE-YIELD"===e.tagName?e._registerYield?e._registerYield._callee:void 0:t===e?void 0:e},set:function(e,a,o,i,r,n){var s,l=-1,d={};Lyte.isRecord(e)&&r&&(s=e),"object"===(void 0===a?"undefined":_typeof(a))&&a||(l=(a+="").lastIndexOf("."));var p=a;if(-1!==l){var c=a.substring(0,l);a=a.substring(l+1),e=E.get(e,c)}if("string"!=typeof a||e[a]!==o){if(e._setterScope)var h=e._setterScope;var u=[];if(e._scp&&e._scp.size&&(Array.from(e._scp.keys()).forEach((function(t){var a=e._scp.get(t);obj=a.paths;var o,i,r,n=Lyte.nestScp[t],s={},l=Object.keys(obj);if(l.length>1?r="*":1==l.length&&(r=l[0]),s.path=r,s.id=t,l.length>1&&(s.paths=l),s.attr=void 0,s.data=n.data,s.dtype=n.dtype||void 0,s.key=n.key||void 0,s.Error=n.Error||void 0,n.model)for(var d=n.model,p=Array.from(n.model.keys()),c=0;c<p.length;c++){var h=p[c],f=d.get(h);if(f)for(var y=Array.from(f.keys()),m=y.length,g=0;g<m;g++){var v=y[g],b=f.get(v),P=Array.from(b.keys()),D=P.length;for(k=0;k<D;k++){var _=P[k],L=Object.assign({},s),C=store.peekRecord(h,v);C&&((i=(o=C.$.model).fieldList[_])&&(i.properties||i.items||1==i.watch)&&(L.data=Lyte.deepCopyObject(C[_]),L.rec=C,L.isRec=!0,L.attr=_,L.dtype=o.fieldList[_],L.Error=C.$.error),u.push(L))}}}else u.push(s)})),u.forEach((function(t){if((!i||"object"==(void 0===i?"undefined":_typeof(i))&&1!=i.skipValidation)&&(t.dtype||t.rec)){var r=t.id,n=t.path.split("."),s=t.dtype;Lyte.checkNestedProp(r,n,s,t,e,a,o,d),e.$&&0==Object.values(e.$.error).length&&delete e.$}})),d.value&&d.value.code))return;p=p===a?p:void 0;var f={};if("object"===(void 0===a?"undefined":_typeof(a)))if(!t.isRecord(e)||r||e.$.isCloned)for(var y in a)E.set(e,y,a[y],o,r,n);else{for(var m in a){var g=a[m],v=e.$.model.fieldList[m];!(v=v?v.type:void 0)||void 0===g&&"boolean"!==v||v===E.getDataType(g)||(a[m]=E.typeCast(g,v))}var b=store.$.setData(e.$,a,void 0,i,void 0,void 0,f);if(b.$.isError)return b}else if(!t.isRecord(e)||r||e.$.isCloned)E.update(e,a,o,i,r,void 0,h,p,n,s);else{e[a];var P=e.$.model.fieldList[a];!(P=P?P.type:void 0)||void 0===o&&"boolean"!==P||P===E.getDataType(o)||(o=E.typeCast(o,P));var D=store.$.setData(e.$,a,o,i,void 0,void 0,f);if(D.$.isError)return D}u&&u.length&&u.forEach((function(e){e.isRec&&store.$.deepValueChange(e.rec,e.attr,e.rec[e.attr],e)}))}else e.__component__?E.clearError(e,a):t.isRecord(e)&&!e.$.isCloned&&(store.$.clrRecErr(e.$,a),e.$.emit&&e.$.emit("set",[e,a]),e.$.model&&e.$.model.emit&&e.$.model.emit("set",[e.$.model._name,e,a]),store.emit&&store.emit("set",[e.$.model._name,e,a]))},adCx:function(e,t){var a="LYTE-YIELD"===e.tagName;!e._cx||a&&"LYTE-YIELD"===e._cx.node.tagName?a&&e._callee._cx&&E.changeContext(e._callee._cx.node,t,e._callee._cx,!0):E.changeContext(e._cx.node,t,e._cx,a)},rmCx:function(e,t){var a="LYTE-YIELD"===e.tagName;!e._cx||a&&"LYTE-YIELD"===e._cx.node.tagName?a&&e._callee._cx&&E.removeContext(e._callee._cx.node,t,e._callee._cx,!0):E.removeContext(e._cx.node,t,e._cx,a)},changeContext:function(e,t,a,o){if(a){var i="LYTE-YIELD"===e.tagName;if(!e._cx||i&&"LYTE-YIELD"===e._cx.node.tagName?("LYTE-YIELD"===e.tagName||o)&&e._callee&&e._callee._cx&&E.changeContext(e._callee._cx.node,t,e._callee._cx):E.changeContext(e._cx.node,t,e._cx,"LYTE-YIELD"===e.tagName||o),i){var r=e._registerYield._callee;r&&r._cx&&E.changeContext(r._cx.node,t,r._cx)}var n=void 0,s=void 0;if(a.type){if("for"===a.type){if(n=e.getAttribute("index"),s=e.getAttribute("item"),0===e._items.length)return}else if(n=e.getAttribute("key"),s=e.getAttribute("value"),0===Object.keys(e._items).length)return;var l=e._callee,d=l.component.data[s],p=l.component.data[n],c=l._properties[s],h=l._properties[n],u="for"===a.type?e._currentItems:e._currentObject;l.component.data[s]=u[a.itemIndex],l.component.data[n]=a.itemIndex,l._properties[s]=e._items[a.itemIndex].itemProperty,l._properties[n]=e._items[a.itemIndex].indexProperty;var f={initialItemValue:d,initialIndexValue:p,initialItemProp:c,initialIndexProp:h};t.push(f)}else{var y={},m=e._registerYield._callee;Object.keys(a.node._properties).forEach((function(e){y[e]={},y[e].value=m.component.data[e],y[e].property=m._properties[e],m._properties[e]=a.node._properties[e],m.component.data[e]=a.node.component.data[e]})),t.push(y)}}},removeContext:function(e,t,a,o){if(a){var i="LYTE-YIELD"===e.tagName;if(!e._cx||i&&"LYTE-YIELD"===e._cx.node.tagName?("LYTE-YIELD"===e.tagName||o)&&e._callee&&e._callee._cx&&E.removeContext(e._callee._cx.node,t,e._callee._cx):E.removeContext(e._cx.node,t,e._cx,"LYTE-YIELD"===e.tagName||o),i){var r=e._registerYield._callee;r&&r._cx&&E.removeContext(r._cx.node,t,r._cx)}var n=void 0,s=void 0;if(a.type){if("for"===a.type){if(n=e.getAttribute("index"),s=e.getAttribute("item"),0===e._items.length)return}else if(n=e.getAttribute("key"),s=e.getAttribute("value"),0===Object.keys(e._items).length)return;var l=e._callee,d=(e._attributes.items,t.shift());l.component.data[s]=d.initialItemValue,l.component.data[n]=d.initialIndexValue,l._properties[s]=d.initialItemProp,l._properties[n]=d.initialIndexProp}else{var p=e._registerYield._callee,c=t.shift();Object.keys(a.node._properties).forEach((function(e){p.component.data[e]=c[e].value,p._properties[e]=c[e].property}))}}},sortCommands:function(e,t){var a={},o=e.slice();a.origianlArray=e;for(var i=[],r=0;r<t.length;r++){var n=o.indexOf(t[r]);-1===n?(i.push({type:"Add",element:t[r],toIndex:r}),o.splice(r,0,t[r])):n!==r&&(i.push({type:"Move",element:t[r],fromIndex:n,toIndex:r}),o.splice(n,1),o.splice(r,0,t[r]))}for(var s=o.length-1;s>=t.length;s--)i.push({type:"Remove",element:o[s]}),o.splice(s,1);return a.commands=i,a.changedArray=t,a},oF:function(){var e=arguments[0],a=arguments[1],o=arguments[2],i=arguments[3],r=arguments[4],n=arguments[5];if("add"!==a||r){var s={};if(s.type=a,s.property=o,/^(add|delete)$/.test(a)){var l=e._bindings;if("delete"===a?E.set(e,o,void 0,void 0,n):e[o]=i,l)for(var d=l.toArrayLyte(),p=0;p<d.length;p++){var c=d[p]._forHelpers;if(c)for(var h=c.toArrayLyte(),u=0;u<h.length;u++){var f=h[u];if("forIn"==f.getAttribute("is")){f.getAttribute("key");var y=[];"add"===a&&E.adCx(f,y),f._callee.updateForInHelper(f,s),"add"===a&&E.rmCx(f,y)}}}"delete"===a&&delete e[o]}else t.error("LC005",a)}else E.set(e,o,i,void 0,n)},aF:function(){var e=arguments[0],a=e.length,o=!0,i=arguments[1],r={};if(!/^(replaceAt|removeAt|shift)$/.test(i)||e.length){var n=void 0;if("sort"==i){var l=arguments[0],d=arguments[2],p=arguments[3]||[],c=l.slice();if(p.forEach((function(e){c.push(e)})),"function"==typeof arguments[2])c.sort(d);else{var h=arguments[2],u=h.sortBy,f=h.sortOrder;c.sort((function(e,t){return(e=u?e[u]:e)>(t=u?t[u]:t)?f?1:-1:e<t?f?-1:1:0}))}n=this.sortCommands(l,c).commands}var y=arguments[2],m=void 0,g=[];if(!(e._scp&&/^(replaceAt|splice|removeAt|remove|insertAt)$/.test(i)&&(e._scp.forEach((function(e,t){var a,o={},i=Lyte.nestScp[t],r=e.paths,n=Object.keys(r);if(n.length>1?a="*":1==n.length&&(a=n[0]),o.path=a,o.id=t,n.length>1&&(o.paths=n),o.attr=void 0,o.data=i.data,o.reInit=Lyte.isRecord(i.data)||Array.isArray(i.data)&&i.data.model&&i.data.add,o.dtype=i.dtype||void 0,o.key=i.key||void 0,o.Error=i.Error||void 0,o.index=y,i.model)for(var s=i.model,l=Array.from(i.model.keys()),d=0;d<l.length;d++){var p=l[d],c=s.get(p);if(c)for(var h=Array.from(c.keys()),u=h.length,f=0;f<u;f++){var m=h[f],v=c.get(m),b=Array.from(v.keys()),P=b.length;for(k=0;k<P;k++){var D=b[k],_=Object.assign({},o),L=store.peekRecord(p,m);L&&(model=L.$.model,field=model.fieldList[D],field&&(field.properties||field.items||1==field.watch)&&(_.data=Lyte.deepCopyObject(L[D]),_.rec=L,_.isRec=!0,_.attr=D,_.dtype=model.fieldList[D],_.Error=L.$.error,_.key=D),g.push(_))}}}else o.reInit=Lyte.isRecord(i.data)||Array.isArray(i.data)&&i.data.model&&i.data.add,g.push(o)})),g.forEach((function(t){if(t.dtype||t.rec){var a=t.id,o=t.path.split("."),i=t.dtype;Lyte.checkNestedProp(a,o,i,t,e,o,y,r),e.$&&0==Object.values(e.$.error).length&&delete e.$}})),r.value&&r.value.code)))switch(i){case"replaceAt":var v=parseInt(arguments[2]);if(v>e.length)return t.warn("index provided for replaceAt is greater than array length"),[];var b=arguments[3];Array.isArray(b)||(b=[b]);var P=e.splice.apply(e,[v,1].concat(b)),D={firstIndex:v,secondIndex:b.length,type:"replace"};if(1==D.secondIndex&&(o=!1),e._bindings)for(var _=e._bindings.toArrayLyte(),L=0;L<_.length;L++){var C=_[L];if(C._forHelpers)for(var w=C._forHelpers.toArrayLyte(),T=0;T<w.length;T++){var x=w[T];if("for"==x.getAttribute("is")){for(var S=v+P.length,A=x.getAttribute("item"),M=v,$=0;M<S;M++,$++)E.removeSelectedBindingDeep(_defineProperty({},A,x._items[M].itemProperty),_defineProperty({},A,P[$]));var R=[];E.adCx(x,R),x._callee.updateForHelper(x,D),E.rmCx(x,R)}}for(var O in C){var F=parseInt(O),N=1==D.secondIndex?F==D.firstIndex:F>=D.firstIndex;if(!isNaN(F)&&N){var I=F-D.firstIndex,B=void 0;if(B=I<1?P[I]:e[D.firstIndex-1+D.secondIndex+I],this.removeSelectedBindingDeep(C[O],B),C[O]._forHelpers)for(var H=C[O]._forHelpers.toArrayLyte(),U=0;U<H.length;U++){var V=H[U];V._propBindingObject&&this.removeSelectedBindingDeep(V._propBindingObject,B)}if(e[F]&&"object"===_typeof(e[F])&&(s(e[F],"_bindings"),this.establishBindings({dummy:C[O]},{dummy:e[F]})),this.affectChanges(C[O],void 0,B,void 0,e[F]),1==D.secondIndex)break}}}return m={type:"array",insertedItems:b,removedItems:P,index:v},E.bindWatchObj(g,e,b,P,v),E.callArrayObservers(e,m,o,a),P[0];case"splice":var j=parseInt(arguments[2]);if(j>e.length)return t.warn("index provided is greater than array length"),[];var q=arguments.length>3?arguments[3]:e.length-j,Y=arguments.length>4?arguments[4]:[];Array.isArray(Y)||(Y=[Y]);var z=e.splice.apply(e,[j,q].concat(Y)),W={firstIndex:j,secondIndex:Y.length,thirdIndex:q,type:"splice"};if(W.secondIndex==W.thirdIndex&&(o=!1),e._bindings)for(var K=e._bindings.toArrayLyte(),G=0;G<K.length;G++){var J=K[G];if(J._forHelpers)for(var X=J._forHelpers.toArrayLyte(),Q=0;Q<X.length;Q++){var Z=X[Q];if("for"==Z.getAttribute("is")){for(var ee=j+z.length,te=Z.getAttribute("item"),ae=j,oe=0;ae<ee;ae++,oe++)E.removeSelectedBindingDeep(_defineProperty({},te,Z._items[ae].itemProperty),_defineProperty({},te,z[oe]));var ie=[];E.adCx(Z,ie),Z._callee.updateForHelper(Z,W),E.rmCx(Z,ie)}}for(var re in J){var ne=parseInt(re),se=W.secondIndex==W.thirdIndex?re>=W.firstIndex&&re<W.firstIndex+W.secondIndex:ne>=W.firstIndex;if(!isNaN(ne)&&se){var le=ne-W.firstIndex,de=void 0;if(de=le<W.thirdIndex?z[le]:e[W.firstIndex-W.thirdIndex+W.secondIndex+le],this.removeSelectedBindingDeep(J[re],de),J[re]._forHelpers){var pe=J[re]._forHelpers.toArrayLyte();for(U=0;U<pe.length;U++){var ce=pe[U];ce._propBindingObject&&this.removeSelectedBindingDeep(ce._propBindingObject,de)}}e[ne]&&"object"===_typeof(e[ne])&&(s(e[ne],"_bindings"),this.establishBindings({dummy:J[re]},{dummy:e[ne]})),this.affectChanges(J[re],void 0,de,void 0,e[ne])}}}return m={type:"array",index:j,insertedItems:Y,removedItems:z},E.bindWatchObj(g,e,Y,z,j),E.callArrayObservers(e,m,o,a),z;case"push":var he=arguments[2];Array.isArray(he)||(he=[he]),E.aF(e,"insertAt",e.length,he);break;case"pop":return E.aF(e,"remove",e.length-1)[0];case"shift":case"shiftObject":return E.aF(e,"remove",0)[0];case"removeAt":case"remove":var ue=parseInt(arguments[2]);if(ue>e.length)return t.warn("index provided for removeAt is greater than array length"),[];var fe=arguments[3]?parseInt(arguments[3]):1,ye={firstIndex:ue,secondIndex:fe,type:"remove"},me=e.splice(ue,fe);if(e._bindings)for(var ge=e._bindings.toArrayLyte(),ve=0;ve<ge.length;ve++){var be=ge[ve];if(be._forHelpers)for(var Pe=be._forHelpers.toArrayLyte(),De=0;De<Pe.length;De++){var _e=Pe[De];if("for"==_e.getAttribute("is")){for(var Le=ue+me.length,Ce=_e.getAttribute("item"),we=ue,Te=0;we<Le;we++,Te++)E.removeSelectedBindingDeep(_defineProperty({},Ce,_e._items[we].itemProperty),_defineProperty({},Ce,me[Te]));var xe=[];E.adCx(_e,xe),_e._callee.updateForHelper(_e,ye),E.rmCx(_e,xe)}}for(var Se in be){var Ae=parseInt(Se);if(!isNaN(Ae)&&Ae>=ye.firstIndex){var Ee=Ae-ye.firstIndex,Me=void 0;if(Me=Ee<ye.secondIndex?me[Ee]:e[ye.firstIndex-ye.secondIndex+Ee],this.removeSelectedBindingDeep(be[Se],Me),be[Se]._forHelpers){var $e=be[Se]._forHelpers.toArrayLyte();for(U=0;U<$e.length;U++){var ke=$e[U];ke._propBindingObject&&this.removeSelectedBindingDeep(ke._propBindingObject,Me)}}e[Ae]&&"object"===_typeof(e[Ae])&&(s(e[Ae],"_bindings"),this.establishBindings({dummy:be[Se]},{dummy:e[Ae]})),this.affectChanges(be[Se],void 0,Me,void 0,e[Ae])}}}return m={type:"array",removedItems:me,index:ue},E.bindWatchObj(g,e,void 0,me,ue),E.callArrayObservers(e,m,o,a),me;case"removeObject":y=[y];case"removeObjects":Array.isArray(y)||(y=[y]),y==e&&(y=Array.from(y));for(var Re=0;Re<y.length;Re++){var Oe=e.indexOf(y[Re]);-1!==Oe&&E.aF(e,"removeAt",Oe)}break;case"unshift":case"unshiftObject":case"unshiftObjects":var Fe=arguments[2];Array.isArray(Fe)||(Fe=[Fe]),E.aF(e,"insertAt",0,Fe);break;case"insertAt":var Ne=parseInt(arguments[2]),Ie=arguments[3],Be=Ie.length;Array.isArray(Ie)||(Ie=[Ie]);for(var He=Ne;He>e.length;He--)Ie.unshift(void 0),Ne--;var Ue={firstIndex:Ne,secondIndex:Ie.length,type:"insert"};if(e.splice.apply(e,[Ne,0].concat(Ie)),e._bindings)for(var Ve=e._bindings.toArrayLyte(),je=0;je<Ve.length;je++){var qe=Ve[je];if(qe._forHelpers)for(var Ye=qe._forHelpers.toArrayLyte(),ze=0;ze<Ye.length;ze++){var We=Ye[ze];if("for"==We.getAttribute("is")){var Ke=[];E.adCx(We,Ke),We._callee.updateForHelper(We,Ue),E.rmCx(We,Ke)}}for(var Ge in qe){var Je=parseInt(Ge);if(!isNaN(Je)&&Je>=Ue.firstIndex){if(this.removeSelectedBindingDeep(qe[Ge],e[Je+Ue.secondIndex]),qe[Ge]._forHelpers){var Xe=qe[Ge]._forHelpers.toArrayLyte();for(U=0;U<Xe.length;U++){var Qe=Xe[U];Qe._propBindingObject&&this.removeSelectedBindingDeep(Qe._propBindingObject,oldObject)}}e[Je]&&"object"===_typeof(e[Je])&&(s(e[Je],"_bindings"),this.establishBindings({dummy:qe[Ge]},{dummy:e[Je]})),this.affectChanges(qe[Ge],void 0,e[Je+Ue.secondIndex],void 0,e[Je])}}}var Ze=parseInt(arguments[2]);m={type:"array",insertedItems:Array.isArray(arguments[3])?arguments[0].slice(Ze,Ze+Be):[arguments[3]],index:Ze},E.bindWatchObj(g,e,Ie,void 0,Ze),E.callArrayObservers(e,m,o,a);break;case"concat":E.aF(e,"insertAt",e.length,arguments[2]);break;case"sort":var et=[];if(n.forEach((function(t){switch(t.type){case"Remove":e.splice(t.toIndex,1),et.push({firstIndex:t.toIndex,secondIndex:1,type:"remove"});break;case"Move":e.splice(t.fromIndex,1),e.splice(t.toIndex,0,t.element),et.push({firstIndex:t.fromIndex,secondIndex:1,type:"remove"}),et.push({firstIndex:t.toIndex,secondIndex:1,thirdIndex:0,type:"splice"});break;case"Add":e.splice(t.toIndex,0,t.element),et.push({firstIndex:t.toIndex,secondIndex:1,thirdIndex:0,type:"splice"})}})),e._bindings)for(var tt=e._bindings.toArrayLyte(),at=0;at<tt.length;at++){var ot=tt[at];if(ot._forHelpers)for(var it=ot._forHelpers.toArrayLyte(),rt=0;rt<it.length;rt++){var nt=it[rt];if("for"==nt.getAttribute("is")){var st=[];E.adCx(nt,st);for(var lt=0;lt<et.length;lt++){var dt=et[lt];nt._callee.updateForHelper(nt,dt)}E.rmCx(nt,st)}}}if(Array.isArray(arguments[3])&&arguments[3].length){m={type:"array",insertedItems:arguments[3]};var pt=[];arguments[3].forEach((function(t){pt.push(e.indexOf(t))})),m.indices=pt,E.callArrayObservers(e,m,o,a)}break;default:return void t.error("LC006",i)}}else t.warn(i+" operation cannot be performed on empty array")},callDeepObservers:function(e,t,a,o){var i=this;Array.from(e._scp.keys()).forEach((function(r){var n,s=e._scp.get(r).paths,l=Object.keys(s);1==l.length?n=l[0]:l.length>1&&(n=l);var d,p=Lyte.nestScp[r];if(p.model)for(var c=p.model,h=Array.from(p.model.keys()),u=0;u<h.length;u++){var f=h[u],y=c.get(f);if(y)for(var m=Array.from(y.keys()),g=m.length,v=0;v<g;v++){var b=m[v],P=y.get(b),D=Array.from(P.keys()),_=D.length;for(k=0;k<_;k++){var L=D[k],C=store.peekRecord(f,b);i.deepObsBind(C,!0,L,t,l,n,e,a,o)}}}else d=p.data,i.deepObsBind(d,!1,void 0,t,l,n,e,a,o)}))},deepObsBind:function(t,a,o,i,r,n,s,l,d){var p=i.type;if(t._bindings)for(var c=Object.assign({},i),h=t._bindings.toArrayLyte(),u=0;u<h.length;u++){var f=h[u],y=void 0;if(a?f.hasOwnProperty(o)&&f[o].hasOwnProperty("*")&&(y=f[o]["*"]):f.hasOwnProperty("*")&&(y=f["*"]),y){var m=y._observers?y._observers.toArrayLyte():[];if(l)if(r.length>1){for(var g=r.length,v=[],b=0;b<g;b++)v.push(r[b]?r[b]+"."+l:l);n=v}else 1==r.length&&(n=n?n.concat("."+l):l);for(var P=0;P<m.length;P++){var D=m[P];c.path=n,c.type="deepChange",c.data=t;var _=y._path.split(".");if(_.pop(),c.item=_.join("."),D.callee&&D.callee.component)D.observer.value.call(D.callee.component,c);else{var L=s._setterScope?s._setterScope:e;if(Array.isArray(L))for(var C=L.length,w=0;w<C;w++){var T=L[w];D.observer.value.call(T,c)}else D.observer.value.call(L,c)}}}!d&&"array"==p&&f.length&&this.affectChanges(f.length,void 0,initialArrLength,void 0,array.length,d)}},callArrayObservers:function(t,a,o,i){if(t._scp&&t._scp.size&&this.callDeepObservers(t,Object.assign({},a),void 0,!0),t._bindings)for(var r=t._bindings.toArrayLyte(),n=0;n<r.length;n++){var s=r[n],l=r[n]._path;if(s._observers)for(var d=s._observers.toArrayLyte(),p=0;p<d.length;p++){var c=d[p];if(c.isArrayObserver)if(a&&(a.item=l),c.callee&&c.callee.component)c.observer.value.call(c.callee.component,a);else{var h=t._setterScope?t._setterScope:e;if(Array.isArray(h))for(var u=h.length,f=0;f<u;f++){var y=h[f];c.observer.value.call(y,a)}else c.observer.value.call(h,a)}}s.length&&this.affectChanges(s.length,void 0,i,void 0,t.length,o)}},bindWatchObj:function(e,t,a,o,i){e&&e.length&&e.forEach((function(e){if(e.isRec&&store.$.deepValueChange(e.rec,e.attr,t,e),o&&o.forEach((function(t){Lyte.removeNestScp(t,e.id,void 0,void 0,void 0,void 0,e.reInit?e.data:void 0)})),a&&a.forEach((function(t,a){if(t&&(Array.isArray(t)||"object"==(void 0===t?"undefined":_typeof(t)))){var o=e.path.split(",");o.push(i+a),Lyte.bindObj(t,void 0,e.id,o&&o.length?o:[],void 0,void 0,void 0,!0)}})),void 0!==i){var r=Lyte.nestScp[e.id];if(r.cyclic)Lyte.removeNestScp(r._data,e.id),Lyte.bindObj(r._data,void 0,e.id,[],void 0,void 0,void 0,!0);else{var n=a?a.length:0,s=i+n,l=t.slice(s);l.forEach((function(t){Lyte.removeNestScp(t,e.id)})),l.forEach((function(t,a){if(t&&(Array.isArray(t)||"object"==(void 0===t?"undefined":_typeof(t)))){var o=e.path.split(",");o.push(s+a),Lyte.bindObj(t,void 0,e.id,o&&o.length?o:[],void 0,void 0,void 0,!0)}}))}}}))},establishUpdateBindings:function(e,t,a){for(var o=e.toArrayLyte(),i=0;i<o.length;i++){var r=o[i];r[t]&&(s(a,"_bindings"),l(a._bindings,r[t]),this.establishBindings(r[t],a))}},establishSelectedBinding:function(e,t,a){if(e)for(var o=e._path.split("."),i=a.getProperty(o[0]),r=t[o[0]],n=0;n<o.length&&r&&"object"===(void 0===r?"undefined":_typeof(r));n++)s(r,"_bindings"),l(r._bindings,i),i=i[o[n+1]],r=r[o[n+1]]},establishBindings:function(e,t){if(e._helperNodes)for(var a=e._path,o=e._helperNodes.toArrayLyte(),i=0;i<o.length;i++){var r=o[i]._dynamicProperty?o[i]._dynamicProperty[a]:void 0;if(r)for(var n=0;n<r.length;n++){var d=r[n].ownerElement;if(d&&"TEMPLATE"===d.tagName&&"for"===d.getAttribute("is")&&d._items){d.getAttribute("item");for(var p=0;p<d._items.length;p++){var c=t[p],h=d.getAttribute("item");c&&"object"===_typeof(d._items[p])&&this.establishBindings(d._items[p].itemProperty,_defineProperty({},h,c))}}}}for(var u in e){var f=t[u];f&&"string"!=typeof f&&"number"!=typeof f&&"boolean"!=typeof f?(f._bindings||s(f,"_bindings"),l(f._bindings,e[u]),"object"===_typeof(e[u])&&this.establishBindings(e[u],f)):(t._bindings||s(t,"_bindings"),l(t._bindings,e))}},removeSelectedBindingDeep:function(e,t,a){if(t||a){for(var o in t&&t._bindings&&u(t,"_bindings",e),e){var i=void 0;t&&(i=t[o]),i&&i._bindings&&u(i,"_bindings",e[o]),"object"===_typeof(e[o])&&this.removeSelectedBindingDeep(e[o],i,a)}if(a){var r=e._dynamicNodes,n=e._helperNodes;r&&r.length&&e._dynamicNodes.splice(0,r.length),n&&n.size&&n.clear()}if(e&&e._forHelpers)for(var s=e._forHelpers.toArrayLyte(),l=0;l<s.length;l++){var d=s[l];if("for"===d.getAttribute("is")){d.getAttribute("item");for(var p=d._attributes.items,c=d._items,h=0;h<c.length;h++)this.removeSelectedBindingDeep(c[h].itemProperty,p[h],a)}else d._propBindingObject&&t&&t._bindings&&(u(t,"_bindings",d._propBindingObject),this.removeSelectedBindingDeep(d._propBindingObject,t,a))}}},removeAllBindings:function(e,t){for(var a in e)t[a]&&t[a]._bindings&&u(t[a],"_bindings",e[a]),t[a]&&"string"!=typeof t[a]&&E.removeAllBindings(e[a],t[a])},affectChanges:function(t,a,o,i,r,n){if(t._dynamicNodes)for(var s=0;s<t._dynamicNodes.length;s++)t._dynamicNodes[s]._callee.updateNode(t._dynamicNodes[s],t._path);var l=t._path;if(t._helperNodes)for(var d=[],p=t._helperNodes.toArrayLyte(),c=0;c<p.length;c++)if(t._helperNodes.has(p[c]))if("for"===p[c].getAttribute("is")&&p[c]._items){var h=[];E.adCx(p[c],h);for(var u=p[c].getAttribute("index"),f=p[c].getAttribute("item"),y=p[c]._callee,m=y.component.data[f],g=y.component.data[u],v=y._properties[f],b=y._properties[u],P=p[c]._attributes.items,D=0;D<p[c]._items.length;D++)if(y.component.data[f]=P[D],y.component.data[u]=D,y._properties[f]=p[c]._items[D].itemProperty,p[c]._items[D]._dynamicProperty[l]){d=p[c]._items[D]._dynamicProperty[l];for(var _=0;_<d.length;_++)d[_]._callee.updateNode(d[_],l)}y.component.data[f]=m,y.component.data[u]=g,y._properties[f]=v,y._properties[u]=b,E.rmCx(p[c],h)}else if("forIn"===p[c].getAttribute("is")&&p[c]._items){var L=[];E.adCx(p[c],L);var C=p[c].getAttribute("key"),w=p[c].getAttribute("value"),T=p[c]._callee,x=T.component.data[w],S=T.component.data[C],A=T._properties[w],M=T._properties[C],$=p[c]._attributes.object;for(var k in p[c]._items)if(T.component.data[w]=$[k],T.component.data[C]=k,T._properties[w]=p[c]._items[k].itemProperty,p[c]._items[k]._dynamicProperty[l]){d=p[c]._items[k]._dynamicProperty[l];for(var R=0;R<d.length;R++)d[R]._callee.updateNode(d[R],l)}T.component.data[w]=x,T.component.data[C]=S,T._properties[w]=A,T._properties[C]=M,E.rmCx(p[c],L)}else{var O=[];if((d=p[c]._dynamicProperty[t._path]||[]).length){E.adCx(p[c],O);for(var F=0;F<d.length;F++)d[F]._callee.updateNode(d[F],t._path);E.rmCx(p[c],O)}}if(t._observers){var N=t._observers.toArrayLyte();if(0!=n&&(null!=o||null!=r))for(var I=0;I<N.length;I++){var B=N[I],H={type:"change",oldValue:o,newValue:r,item:t._path};if(B.callee&&B.callee.component)B.observer.value.call(B.callee.component,H);else{var U=i||e;if(Array.isArray(U))for(var V=U.length,j=0;j<V;j++){var q=U[j];B.observer.value.call(q,H)}else B.observer.value.call(U,H)}}}if(Array.isArray(t))for(var Y=0;Y<t.length;Y++)for(var z in t[Y])this.affectChanges(t[Y][z],!0,o?o[Y]?o[Y][z]:o[Y]:o,i,r?r[Y]?r[Y][z]:r[Y]:r);else for(var W in t){var K=o?o[W]:o,G=r?r[W]:r;"*"==W&&t[W].hasOwnProperty("_observers")&&(K=o,G=r),this.affectChanges(t[W],!0,K,i,G)}},skipArgProcessing:function(e,t,a){if(e.skipArgProcessing){var o=e.args=e.actArgs;o.shift();var i=o.indexOf("__lyteEvent__"),r=o.indexOf("__lyteNode__");-1!==i&&(o[i]=t),-1!==r&&(o[r]=a)}else e.args.shift()},getDV:function(e){for(var t,a,o=[],i=o,r=[],n="",s=[],l=[],d=[],p=0;p<e.length;p++)if("."!==e[p])if("["!==e[p]){if(('"'===e[p]||"'"===e[p])&&e[p++]===t){for(;"s"===e[p]&&"]"!=e[p];)p++;s.pop(),a=!0}"]"!==e[p]?n=n.concat(e[p]):(l.pop(),n.length&&(!0===a||isNaN(parseInt(n))?i.push(n):d.length&&(i=d.pop(),r.length&&Array.isArray(i[i.length-1])&&!i[i.length-1].length&&i.pop(),i.push(n),!l.length&&r.length&&r.shift())),!l.length&&r.length?(o.push(r.shift()),i=o):d.length&&!r.length&&(i=d.pop()),n="",a="")}else{for(l.push(p),n.length&&i.push(n);"s"===e[p+1];)p++;'"'===e[p+1]||"'"===e[p+1]?(s.push(e[p+1]),t=e[p+1],p++):r.length?(i.push([]),d.push(i),i=i[i.length-1]):(r.push([]),d.push(i),i=r[r.length-1]),n=""}else n.length&&i.push(n),n="";return n.length&&o.push(n),(s.length||l.length)&&console.log("check the syntax",s,l),o},ccDelay:[],callCC:function(){this.ccDelay.forEach((function(e){e.component&&e.actualConnectedCallback()})),this.ccDelay=[]},getDD:function(e,t){var a=e;return t.forEach((function(t,o){if(Array.isArray(t)){if(null==e)return;var i=E.getDD(a,t);if(null==i)return;e=e[i]}else{if(null==e)return;e=e[t]}})),e},processStatic:function(e){for(var t=e.innerHTML.split("__**"),a=[],o=0;o<t.length;o++)t[o].startsWith("--Lyte")?a.push(parseInt(t[o].substring(6))):a.push(void 0);return t.cc=a,t},findLastNodeL:function(e,t,a){var o,i=0;switch(null!=t&&(i=t),a.getAttribute("is")){case"for":a._helpers[i]&&(o=a._helpers[i][0]),e||a._forContent[0]&&(e=a._forContent[0][0]);break;case"forIn":a._helpers[a._keysArray[0]]&&(o=a._helpers[a._keysArray[0]][0]),e||a._forContent[a._keysArray[0]]&&(e=a._forContent[a._keysArray[0]][0]);break;case"if":case"switch":o=a._helpers[i],e||(e=a._caseContent[0]);break;case"component":return e._renderedComponent[e._currentComponent]||e}return e||(e=a._placeHolder),o&&e==o._placeHolder&&(e=this.findLastNodeL(void 0,void 0,o)),e},processAction:function(e){Array.from(e.querySelectorAll("[lyteaction]")).forEach((function(e){var a=e.attributes.lyteaction.value;e._boundEvents=E.fRP[a],delete E.fRP[a];var o=e._boundEvents._cx,i=e._boundEvents;delete i._cx;var r=i.componentName;for(var n in delete i.componentName,e._boundEvents)if(-1!==n.indexOf("-")){e._actions=e._actions||{},e._actions[n]=new CustomEvent(n),e._actions[n].processAction=e._boundEvents[n],e._boundEvents[n].actArgs.shift();var s=e._boundEvents[n].actArgs.indexOf("__lyteNode__");-1!==s&&(e._boundEvents[n].actArgs[s]=e),e._boundEvents[n].args=e._boundEvents[n].actArgs,delete e._boundEvents[n]}else{var l=t.deepCopyObject(e._boundEvents[n].args),d=l.splice(0,1)[0],p=I(d=d.startsWith("'")?d.replace(/'/g,""):d,l);e.setAttribute(n.startsWith("on")?n.substr(2):n,r+" => "+p),e._boundEvents[n].globalEvent||e.addEventListener(n,_)}e._boundEvents._cx=o,e.removeAttribute("lyteaction")}))},getCtxVal:function(e,t){return null!=e?e[t]:void 0},get:function(e,t,a,o){if(a||(a=[]),o&&o.hasOwnProperty(t))return nodeValue=o[t]._data,o[t]._dyn&&o[t]._dyn.forEach((function(e){a.push(e)})),nodeValue;try{var i=t.match(/([^[\]]+|\[\])/g),r=e;a.push(i[0]);for(var n=i[0].split("."),s=0;s<n.length;s++)e=E.getCtxVal(e,n[s]);for(var l=1;l<i.length;l++){var d=i[l];if(d.startsWith(".")){for(var p=d.substring(1).split("."),c=0;c<p.length;c++)e=E.getCtxVal(e,p[c]);a[0]=a[0]+d}else if(d.startsWith("'")||d.startsWith('"')||!isNaN(d))isNaN(d)?(a[0]=a[0]+"."+d.substring(1,d.length-1),e=E.getCtxVal(e,d.substring(1,d.length-1))):(a[0]=a[0]+"."+d,e=E.getCtxVal(e,d));else{a.length;var h=E.get(r,d,a);a[0]=a[0]+"."+h,e=E.getCtxVal(e,h)}}return o&&(o[t]={},o[t]._data=e,o[t]._dyn=a),e}catch(e){return}},getNew:function(e,t){try{var a=t.match(/([^[\]]+|\[\])/g),o=e,i=a[0].split(".");if(a.length<2){if(i.length<2)return{context:o,lastKey:i[0]};for(var r=0;r<i.length-1;r++)e=e[i[r]];return{context:e,lastKey:i[r]}}for(var n=0;n<i.length;n++)e=e[i[n]];for(var s=1;s<a.length-1;s++){var l=a[s];if(l.startsWith("."))for(var d=l.substring(1).split("."),p=0;p<d.length;p++)e=e[d[p]];else e=l.startsWith("'")||l.startsWith('"')||!isNaN(l)?e[l.substring(1,l.length-1)]:e[this.get(o,l)]}var c=a[s];if(c.startsWith(".")){for(var h=c.substring(1).split("."),u=0;u<h.length-1;u++)e=e[h[u]];c=h[u]}else c=c.startsWith("'")||c.startsWith('"')||!isNaN(c)?c.substring(1,c.length-1):this.get(o,c);return{context:e,lastKey:c}}catch(e){return}},componentGetData:function(e){return e?this.get(e):this.data},componentSetData:function(e,t,a){if("string"==typeof e)this.set(e,t,a);else if("object"===(void 0===e?"undefined":_typeof(e)))for(var o in e)this.set(o,e[o],t)},componentGetMethods:function(e){return e?this.methods[e]:this.methods},componentHasAction:function(e){return!(!e||!this.$node._actions[e])},componentsetActions:function(e,t){var a=this.$node.constructor._actions;if("string"==typeof e)a[e]=t;else if("object"===(void 0===e?"undefined":_typeof(e)))for(var o in e)a[o]=e[o]},componentSetMethods:function(e,t){if("string"==typeof e)this.methods[e]=t;else if("object"===(void 0===e?"undefined":_typeof(e)))for(var a in e)this.methods[a]=e[a]},render:function(e,a,o,i){var r;if(e){if("string"==typeof e)r=c(e);else{if(!e.compName)return void t.error("LC007");r=c(e.compName)}if(a&&r.setData(a),o){var n=void 0;(n="string"==typeof o?document.querySelector(o):o)?(i&&i.dataType&&(r.component.__data=i.dataType),n.appendChild(r),r._callee=r.getCallee?r.getCallee(n):void 0):t.error("LC008",o)}return r}t.error("LC007")},String:{cache_c:{},cache_d:{},upperCaseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},lowerCaseFirstLetter:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},toCamelCase:function(e){return this.cache_c[e]||(this.cache_c[e]=e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))),this.cache_c[e]},dasherize:function(e){return this.cache_d[e]||(this.cache_d[e]=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),this.cache_d[e]}},appendChild:function(e,t){E.ignoreDisconnect=!0,e.appendChild(t),E.ignoreDisconnect=!1},replaceWith:function(){var e=Array.from(arguments),t=e.shift();E.ignoreDisconnect=!0;for(var a,o=t.parentNode,i=0;a=e[i];i++)o.insertBefore(a,t);t.remove(),E.ignoreDisconnect=!1},insertBefore:function(e,a,o){if(E.ignoreDisconnect=!0,!o){if(!e)return t.error("LC010"),void(E.ignoreDisconnect=!1);o=e.parentNode}h(o,a,e||null),E.ignoreDisconnect=!1},insertAfter:function(){var e=Array.from(arguments),t=e.shift();E.ignoreDisconnect=!0,t.after.apply(t,e),E.ignoreDisconnect=!1},executeMethod:function(){var e=Array.prototype.slice.call(arguments,1),a=E.String.toCamelCase(arguments[0]);if(this.methods[a])return this.methods[a].apply(this,e);t.error("LC009",a,this.$node.tagName)},getProperData:function(e){var a=e.dataType,o=e.attr,i=e.newValue,r=e.tagName;switch(a){case"boolean":i=!(!i||"false"===i);break;case"object":try{(i=JSON.parse(i))instanceof Object||t.warn("data type of the value provided for attribute "+o+" of "+r+" is not valid")}catch(e){return void t.warn("attribute "+o+" is not a valid JSON string.")}break;case"array":try{(i=JSON.parse(i))instanceof Array||t.warn("data type of the value provided for attribute "+o+" of "+r+" is not valid")}catch(e){return void t.warn("attribute "+o+" is not a valid JSON string.")}break;case"number":var n=+i;if(i!==n+"")return void t.warn("data type of the value provided for attribute "+o+" of "+r+" is not valid");i=n}return e.newValue=i,!0},cssEscape:function(e){return e?e.replace(/['"]/g,"\\$&"):e}};t.typeCast=A.typeCast,t.getDataType=A.getDataType,t.Component._get=A.get,v.chromeBugFix=function(){var e=f.match(/Chrom(e|ium)\/([0-9]+)\./);(e=e?parseInt(e[2],10):0)>62&&(this.chI=[],document.addEventListener("focus",(function(e){var t=e.target;"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"DIV"!==t.tagName||-1==Lyte.Component.chI.indexOf(t)&&Lyte.Component.chI.push(t)}),!0),this.chromeBugFix=function(){var e=Lyte.Component.chI,t=e.length,a=["_callee","_attributeDetails","_attributes","_removedAttributes","_yields","_rA","_cx"],o=[],i=[];document.querySelectorAll("[lyte-keep-alive]").forEach((function(e,t){for(var a in e._renderedComponent)i.push.apply(i,Array.from(e._renderedComponent[a].querySelectorAll("input")))}));for(var r,n=t-1;r=e[n];n--)document.compareDocumentPosition(r)%2&&-1==i.indexOf(r)&&(e.splice(n,1),r.remove(),o.push(r),r._rA=r._rA||[],r._rA.forEach((function(e){e.ownerElement=void 0})),a.forEach((function(e){r[e]=void 0})),Array.from(r.attributes).forEach((function(e){r.removeAttribute(e.nodeName)})))},Lyte.addEventListener("afterRouteTransition",(function(){Lyte.Component.chromeBugFix()})),Lyte.Router||setInterval((function(){Lyte.Component.chromeBugFix(),A.String.cache_c={},A.String.cache_d={}}),3e5))};var E=A;function M(e,t){for(var a=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=0;o<e.childNodes.length;o++)a.appendChild(e.childNodes[o].cloneNode(!0));var i=document.createElement("template");for(i.setAttribute("is",t),o=0;o<a.childNodes.length;o++)i.content.appendChild(a.childNodes[o]),o--;return i}function $(e,t){var a=document.createElement("template");return a.setAttribute("is",t),a.innerHTML=e.innerHTML,a}function R(e,t){t.splitTextNodes(e),t._depthTemp.content.appendChild(e)}function O(e,t,a,o){var i=!0;"TEMPLATE"==e.tagName&&(t._ht=e.innerHTML,i=!1),t._ht&&(i&&(e.innerHTML=t._ht,o.splitTextNodes(e)),a&&a.innerHTML!==t._ht&&(a.innerHTML=t._ht,o.splitTextNodes(a)))}function F(e,a,o,i,r){for(var n=function(n){var s=a[n],b=s.type,P=s.position,D=N(e,P),_=void 0;switch(r&&(_=N(r,P)),b){case"text":var L=Lyte.Compile.getMustache(D.nodeValue),C=void 0;L&&(C=Lyte.Compile.getHelper(L));var w=L;C?(s.helperInfo=C,_&&(s.newHelperInfo=Lyte.Compile.getHelper(L,!0),E.replaceWithPf(_,document.createTextNode("__**--Lyte"+n+"__**")))):w&&(s.dynamicValue=w,s.newDynamicValue=E.getDV(w),_&&E.replaceWithPf(_,document.createTextNode("__**--Lyte"+n+"__**")));break;case"insertYield":if(_){_.appendChild(document.createTextNode("__**--Lyte"+n+"__**"));var T=_.attributes["yield-name"];s.yieldName=T?T.nodeValue:void 0}break;case"componentDynamic":if(_){for(_.appendChild(document.createTextNode("__**--Lyte"+n+"__**")),s.componentName=_.localName,l=Array.from(_.attributes),s.staticAttrs={},y=0;y<l.length;y++)s.staticAttrs[E.String.toCamelCase(l[y].nodeName)]=l[y].nodeValue;delete s.staticAttrs._lyteprop}break;case"attr":for(var x=[],S=[],k=D,B=s.attr=s.attr||{},H=0;H<k.attributes.length;H++)if(-1!==k.attributes[H].nodeValue.indexOf("{{")){var U=k.attributes[H].nodeValue,V=Lyte.Compile.getMustache(U),j=void 0;if(V?j=Lyte.Compile.getHelper(V):/{{.*}}/.test(U)&&!/\\{{.*}}/.test(U)&&(j=Lyte.Compile.splitMixedText(U)),j&&("action"===j.name||"method"===j.name)&&/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu|__focus|__focusin|__focusout|__resize|__scroll|__click|__dblclick|__mousedown|__mouseup|__mousemove|__mouseover|__mouseout|__change|__select|__submit|__keydown|__keypress|__keyup|__contextmenu)$/.test(k.attributes[H].name)){B[k.attributes[H].name.substr(2)]={name:k.attributes[H].name.substr(2),camelCase:E.String.toCamelCase(k.attributes[H].name.substr(2)),helperInfo:j,newHelperInfo:Lyte.Compile.getHelper(V,!0),globalEvent:!0};var q=t.deepCopyObject(j.args),Y=q.splice(0,1)[0],z=I(Y=Y.startsWith("'")?Y.replace(/'/g,""):Y,q);k.setAttribute(k.attributes[H].name.substr(2),o+" => "+z),_&&_.setAttribute(k.attributes[H].name.substr(2),o+" => "+z),x.push(k.attributes[H].name)}else if(j||V){var W={};k.attributes[H].name.startsWith("lbind:")?(x.push(k.attributes[H].name),S.push({name:k.attributes[H].name.substring(6),value:k.attributes[H].nodeValue}),W.isLbind=!0,W.name=k.attributes[H].name.substring(6),W.camelCase=E.String.toCamelCase(W.name)):(W.name=k.attributes[H].name,W.camelCase=E.String.toCamelCase(W.name)),j?"lbind"===j.name?(W.dynamicValue=j.args[0],W.newDynamicValue=E.getDV(j.args[0]),W.isLbind=!0):(W.helperInfo=j,W.newHelperInfo=Lyte.Compile.getHelper(V,!0)):(W.dynamicValue=V,W.newDynamicValue=E.getDV(V)),B[W.name]=W}}if(x.length)for(var K=0;K<x.length;K++)k.removeAttribute(x[K]),_&&_.removeAttribute(x[K]);if(_){for(m in B)_.removeAttribute(m);_.setAttribute("_lyteAttr","__**--Lyte"+n+"__**","")}if(S.length)for(var G=0;G<S.length;G++)k.setAttribute(S[G].name,S[G].value);break;case"for":case"forIn":case"registerYield":O(D,s,_,i);case"component":d=t._ie?D:D.content,_||"registerYield"!=b&&!D.hasAttribute("unbound")||(t._ms?((_=document.createElement("div")).innerHTML=s.actualTemplate?s.actualTemplate:D.outerHTML,_=_.childNodes[0],i.splitTextNodes(_)):_=D.cloneNode(!0));var J=void 0;if(p=_?t._ie?_:_.content:void 0,s.actualTemplate&&(d=E.getContentForIE(s.actualTemplate,i,void 0,t._ms?s:void 0),_&&(p=E.getContentForIE(s.actualTemplate,i))),F(d,s.dynamicNodes,o,i,p),p){var X=s.actualTemplate?p:_;s._sta=E.processStatic(X)}t._ms&&(s.actualTemplate?(s.templateContent=d.outerHTML,s._content&&(s.actualTemplate=s._content.innerHTML,delete s._content)):s.templateContent=D.outerHTML,D.innerHTML=""),s.actualTemplate&&(J=b,t._ie||R(J=s.svg?M(d,b):$(d,b),i),(a[n-1]&&a[n-1].position.toString()===a[n].position.toString()?a[n-1]:a[n])._depthTemp=J),_&&(s._args={},"registerYield"===b?E.replaceWithPf(_,document.createTextNode("__**--Lyte"+n+"__**")):"component"===b?E.replaceWithPf(_,document.createTextNode((_.hasAttribute("_lyteattr")?_.getAttribute("_lyteattr"):"")+"__**--Lyte"+n+"__**")):E.replaceWithPf(_,document.createTextNode("__**--Lyte"+n+"__**")),Array.from(_.attributes).forEach((function(e){s._args[e.nodeName]=e.nodeValue}))),s._ht&&(s._ht=D.cloneNode(!0),i._helperTemplate.content.append(s._ht),D.innerHTML="");break;case"if":case"switch":O(D,s,_,i);var Q=void 0;if(p=_?t._ie?_:_.content:void 0,s.actualTemplate&&(D=E.getContentForIE(s.actualTemplate,i,void 0),_)){var Z=E.getContentForIE(s.actualTemplate,i);p=t._ie?Z:Z.content}if(c="default",t._ms){for(h={},f=t._ed?D.content.childNodes:D.childNodes,y=0;y<f.length;y++)"TEMPLATE"===f[y].tagName&&(f[y].getAttribute("case")?h[f[y].getAttribute("case")]=f[y]:f[y].hasAttribute("default")&&(u=f[y]));for(m in s.cases){var ee=void 0;v=E.getContentForIE(h[m],void 0,!0),p&&(ee=E.getContentForIE(p.querySelector("[case='"+A.cssEscape(m)+"']"))),O(v,s.cases[m],ee,i),F(v,s.cases[m].dynamicNodes,o,i,ee?E.getContentForIE(ee):void 0),h[m].remove(),p&&(s.cases[m]._sta=E.processStatic(ee)),s.cases[m].templateContent=h[m].outerHTML}if(s[c].dynamicNodes){var te=void 0;v=E.getContentForIE(u,void 0,!0),p&&(te=p.querySelector("[default]")),O(v,s[c],te,i),F(v,s[c].dynamicNodes,o,i,te?E.getContentForIE(te):void 0),u.remove(),s[c].templateContent=u.outerHTML,p&&(s[c]._sta=E.processStatic(te))}}else{for(var ae in g=D.content||D,s.cases){var oe=void 0;p&&(oe=E.getContentForIE(p.querySelector("[case='"+A.cssEscape(ae)+"']"))),O(v=E.getContentForIE(g.querySelector("[case='"+E.cssEscape(ae)+"']"),void 0,!0),s.cases[ae],oe,i),F("TEMPLATE"===v.tagName?v.content:v,s.cases[ae].dynamicNodes,o,i,oe),p&&(s.cases[ae]._sta=E.processStatic(oe)),s.cases[ae]._ht&&(s.cases[ae]._ht=v.cloneNode(!0),i._helperTemplate.content.append(s.cases[ae]._ht),v.innerHTML="")}if(s[c].dynamicNodes){var ie=void 0;p&&(ie=E.getContentForIE(p.querySelector("[default]"))),O(v=E.getContentForIE(g.querySelector("[default]"),void 0,!0),s[c],ie,i),F("TEMPLATE"===v.tagName?v.content:v,s[c].dynamicNodes,o,i,ie),p&&(s[c]._sta=E.processStatic(ie)),s[c]._ht&&(s[c]._ht=v.cloneNode(!0),i._helperTemplate.content.append(s[c]._ht),v.innerHTML="")}}s.actualTemplate&&(Q=b,t._ie||R(Q=s.svg?M(D.content,b):$(D,b),i),a[n-1]&&a[n-1].position.toString()===a[n].position.toString()?a[n-1]._depthTemp=Q:a[n]._depthTemp=Q),_&&E.replaceWithPf(_,document.createTextNode("__**--Lyte"+n+"__**")),s._ht&&(s._ht=D.cloneNode(!0),i._helperTemplate.content.append(s._ht),D.innerHTML="")}},s=0;s<a.length;s++){var l,d,p,c,h,u,f,y,m,g,v;n(s)}}function N(e,a){for(var o=e,i=0;i<a.length;i++)o="TEMPLATE"!=o.tagName||t._ie?o.childNodes[a[i]]:o.content.childNodes[a[i]];return o}function I(e,t){for(var a=0;a<t.length;a++)t[a]&&"object"===_typeof(t[a])&&(t[a]=I(t[a].value.name,t[a].value.args));return e?e+"("+t.toString()+")":t.toString()}customElements.define("lyte-safari-test-component",m),document.createElement("div").innerHTML="<lyte-safari-test-component t></lyte-safari-test-component>",v.render=E.render,v.insertBefore=E.insertBefore,v.insertAfter=E.insertAfter,v.replaceWith=E.replaceWith,v.appendChild=E.appendChild,E.tDiv=c("template"),E.tDiv.setAttribute("id","dummy-templates-div"),E.hDiv=c("template"),E.hDiv.setAttribute("id","keep-alive-div"),E.h1Div=c("template"),E.h1Div.setAttribute("id","lyte-helper-div"),Lyte.Compile.componentsDiv=E.lyteComponentsDiv=c("div"),E.lyteComponentsDiv.setAttribute("id","lyte-components-div"),Set.prototype.toArrayLyte=function(){return"Set"===this.constructor.name?Array.from(this):Array.from(this._values)},"complete"===document.readyState||"interactive"===document.readyState?D():document.addEventListener("DOMContentLoaded",(function(e){D()}),!0),E.registerHelper("unbound",(function(e){return e})),E.registerHelper("action",(function(e,t,a,o){a?(e._actions=e._actions?e._actions:{},e._actions[t]||(this.createCustomEvent(t,e,o),e.removeAttribute(t))):this.createEventListeners(e,t,o)})),E.registerHelper("lbind",(function(e){return this.getData(e)})),E.registerHelper("method",(function(e,a,o){a=arguments[1],o=arguments[2];var i=arguments[0].component,r=a?a.ownerElement:null,n=arguments[1].nodeName;a=null;var s=Array.prototype.slice.call(arguments,2),l=function(){var e=this.$node,a=[];E.adCx(e,a);var r=this.$node.processArgs(this.$node._callee,{helperInfo:{args:s}},[],void 0,this.$node),n=r.splice(0,1)[0];E.rmCx(e,a);var l=Array.from(arguments),d=r.concat(l);if(i.methods[n])return i.methods[n].apply(i,d);t.error("LC009",o,i.$node.tagName)};if(!r)return l;r.set?r.component.methods[E.String.toCamelCase(n)]=l:r.setMethods(E.String.toCamelCase(n),l)})),E.registerHelper("unescape",(function(e,t,a){if(E.ffr)return e;if(Lyte.Security.ignoreSanitizer){var o=document.createElement("div");return o.innerHTML=e,o}if(t&&Object.keys(t)&&Object.keys(t).length>0&&(Object(t.GLOBAL_TAGS).length>0&&-1!=(n=t.GLOBAL_TAGS.indexOf("link-to"))&&t.GLOBAL_TAGS.splice(n,1),t&&t.GLOBAL_ATTRIBUTES&&Object.keys(t.GLOBAL_ATTRIBUTES).length>0))for(var i=["yield-name","lt-prop-route","lt-prop-dp","lt-prop-fragment","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target","lt-prop-td","lt-prop-custom","lt-prop-target","lt-prop-id","lt-prop-class","lt-prop-style","lt-prop-rel","lt-prop-title"],r=0;r<i.length;r++){var n;-1!=(n=t.GLOBAL_ATTRIBUTES.indexOf(i[r]))&&t.GLOBAL_ATTRIBUTES.splice(n,1)}if(t&&t.GLOBAL_TAGS){null==t.GLOBAL_ATTRIBUTES&&(t.GLOBAL_ATTRIBUTES=[]);for(var s=Array.from(t.GLOBAL_TAGS),l=[],d=0;d<s.length;d++)for(A._registeredComponents[s[d]]?l=A._registeredComponents[s[d]].observedAttributes:Lyte.registeredCustomComponent[s[d]]&&(l=Lyte.registeredCustomComponent[s[d]].observedAttributes?Lyte.registeredCustomComponent[s[d]].observedAttributes:[]),r=0;r<l.length;r++)-1==t.GLOBAL_ATTRIBUTES.indexOf(l[r])&&t.GLOBAL_ATTRIBUTES.push(l[r])}var p=document.createElement("div");if(a&&Object.keys(a).length)if(t&&Object.keys(t).length){Lyte.Security.addGlobalObject(a,t);var c=a.sanitize(e);Lyte.Security.removeGlobalObject(a,t)}else c=a.sanitize(e);else t&&Object.keys(t).length?(Lyte.Security.addGlobalObject(Lyte.Security._ourSanitizerInstance_,t),c=Lyte.Security._ourSanitizerInstance_.sanitize(e),Lyte.Security.removeGlobalObject(Lyte.Security._ourSanitizerInstance_,t)):c=Lyte.Security._ourSanitizerInstance_.sanitize(e);return p.innerHTML=c,p})),E.registerHelper("escape",(function(e,t){return"url"==t?ZSEC.Encoder.encodeForHTMLAttribute(e):"js"==t?ZSEC.Encoder.encodeForJavaScript(e):"css"==t?ZSEC.Encoder.encodeForCSS(e):e})),E.registerHelper("debugger",(function(){})),E.registerHelper("log",(function(){console.log.apply(e,Array.from(arguments))})),E.registerHelper("ifEquals",(function(e,t){return e===t})),E.registerHelper("if",(function(e,t,a){return e?t:a})),E.registerHelper("negate",(function(e){return!e})),E.registerHelper("ifNotEquals",(function(e,t){return e!==t})),E.registerHelper("concat",(function(){for(var e="",t=arguments.length,a=0;a<t;a++)null!=arguments[a]&&(e+=arguments[a]);return e})),n(HTMLElement.prototype,"setData",{enumerable:!1,value:function(e,t){if(this._initProperties=this._initProperties||{},"string"==typeof e)this._initProperties[e]=t;else if("object"===(void 0===e?"undefined":_typeof(e)))for(var a in e)this._initProperties[a]=e[a]}}),n(HTMLElement.prototype,"setMethods",{enumerable:!1,value:function(e,t){if(this._initMethods=this._initMethods||{},"string"==typeof e)this._initMethods[e]=t;else if("object"===(void 0===e?"undefined":_typeof(e)))for(var a in e)this._initMethods[a]=e[a]}}),E.registerHelper("encAttr",(function(e){return ZSEC.Encoder.encodeForHTMLAttribute(encodeURIComponent(e))})),E.registerHelper("expHandlers",(function(e,t,a,o){var i=arguments.length;if("++"==t){if("postfix"==a)return e++;if("prefix"==a)return++e}else if("--"==t){if("postfix"==a)return e--;if("prefix"==a)return--e}else{if("=="==t)return e==a;if("==="==t)return e===a;if("!="==t)return e!=a;if("!=="==t)return e!==a;if("&&"==t)return e&&a;if("||"==t)return e||a;if("+"==t)return i>2?e+a:e;if("-"==t)return i>2?e-a:-e;if("*"==t)return e*a;if("/"==t)return e/a;if("%"==t)return e%a;if("<"==t)return e<a;if(">"==t)return e>a;if("<="==t)return e<=a;if(">="==t)return e>=a;if("|"==t)return e|a;if("&"==t)return e&a;if("!"==t)return!e;if("="==t)return a;if("+="==t)return e+a;if("-="==t)return e-a;if("*="==t)return e*a;if("/="==t)return e/a;if("?:"==t)return e?a:o}})),v.register("lyte-event-listener",{_template:'<template tag-name="lyte-event-listener"></template>',_dynamicNodes:[],_observedAttributes:["eventName"],init:function(){var e=this,a=t.addEventListener(this.get("eventName"),(function(){var t=Array.prototype.slice.call(arguments);t.splice(0,0,"on-fire"),e.throwEvent.apply(e,t)}));this.regId=a},data:function(){return{eventName:t.attr("string")}},didDestroy:function(){t.removeEventListener(this.regId)}}),v.registerCustomPropHandler("ltProp"),v.shouldIgnoreDisconnect=function(){return E.ignoreDisconnect},v.addLyteEventListener=function(e,t,a,o){return e._lyteEvents=e._lyteEvents||{},e._lyteEvents[t]=e._lyteEvents[t]||[],t+"-"+e._lyteEvents[t].push({func:a,fromEventListener:!0,context:o})},v.removeLyteEventListener=function(e,a){if(a){var o=a.split("-"),i=(o[0],parseInt(o[1]));e._lyteEvents&&e._lyteEvents[o[0]]&&!isNaN(i)?e._lyteEvents[o[0]][o[1]-1]={}:t.error("Invalid listenerId / listener is not available")}else t.error("No listenerId provided")},v.throwEvent=E.throwEvent,E.hasLyteEvents=function(e,t){return!(!e._lyteEvents||!e._lyteEvents[t])},E.handleLyteEvents=function(t,a){for(var o,i=t._lyteEvents[a.type],r=0;r<i.length;r++)if(i[r].func&&(!1===i[r].func.call(i[r].context?i[r].context:e,a)||a.cancelBubble)){o=!0;break}return o&&a.stopPropagation(),o},Object.defineProperty(e,"LyteComponent",{get:function(){return t.warn("Usage of LyteComponent is deprecated. Use Lyte.Component instead"),A}}),v.chromeBugFix(),E.booleanAttrList=["async","autocomplete","autofocus","autoplay","border","challenge","checked1","compact","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","indeterminate","ismap","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","readonly","required","reversed","scoped","scrolling","seamless","selected","sortable","spellcheck","translate"],Lyte.$.requiredMixins.component=function(e,t){var a=[],o={},i={},r={};a.push(e),t.forEach((function(e){var t=e,n=A._registeredComponents[t];a.length&&A.dataFromMixin(a,o,i,r),n._actions=Object.assign(n._actions,o);var s=Object.assign(n._methods,i);delete r.methods,A.updateCustomCrmComponent(r,n),n._methods=s,A._registeredComponents[t]=n}))},Lyte.$.injectServices.component=function(e,t,a,o,i,r){if(i){var n={};n[i.compName]=i}var s=i?n:E._registeredComponents;s&&Object.keys(s).forEach((function(a){var i=s[a];o&&Lyte.__gS[e]?i.component.prototype[e]=o:Lyte.$.requiredServices(e,t,(function(e,t){i.component.prototype[t]=e}),void 0,void 0,!0,r)}))},Lyte.Security.addGlobalObject=function(e,t){for(var a in t)Array.isArray(t[a])&&t[a].forEach((function(t){-1==e["_"+a].indexOf(t)&&e["_"+a].push(t)}))},Lyte.Security.removeGlobalObject=function(e,t){for(var a in t)Array.isArray(t[a])&&t[a].forEach((function(t){var o=e["_"+a].indexOf(t);-1!=o&&e["_"+a].splice(o,1)}))},Lyte.Compile.getTrimmedContent=function(e,t,a){var o=e;if(a){t=[];for(var i=a.parentNode;t.unshift(this.getArrayIndex(i.childNodes,a)),i=i.parentNode,a=a.parentNode,i;);}for(var r=0;r<t.length;r++){for(var n=e.childNodes.length-1;n>t[r];n--)e.childNodes[n].remove();e=e.childNodes[t[r]]}return o},Lyte.Compile.getArrayIndex=function(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return a},Lyte.Compile.splitMixedText=function(e){for(var t=[],a=0,o={name:"concat",args:[]},i=0;i<e.length;i++){var r=i;if("\\"!==e[i-1]&&"{"===e[i]&&"{"===e[++i])t.push("{{"),o.args.push("'"+e.substr(a,r-a)+"'"),a=i+1;else if("}"===e[i]&&"}"===e[++i]&&t.length){t.pop(a);var n=e.substr(a,r-a),s=this.getHelper(n);s?(n=s,o.args.push({type:"helper",value:n})):o.args.push(n),a=i+1}}return a<e.length&&o.args.push("'"+e.substr(a,e.length-a)+"'"),o},Lyte.Compile.getHelper=function(e,t){var a=/\((?:[^)]*|(?:(?:"(?:[^"\\]|\\.)*?")|(?:'([^'\\]|\\.)*?')|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?)\)$/.exec(e);if(a)return this.getHelperInfo(e,a,t)},Lyte.Compile.getHelperInfo=function(e,t,a){var o={};if(o.name=e.substr(0,t.index).replace(/\s/g,""),t=t?t[0].trim():t,"lyteViewPort"==o.name&&"()"==t)return o.args=[],o;var i=this.getHelperArgs(t.substr(1,t.length-2),a);return!1!==i&&(o.args=i,o)},Lyte.Compile.getHelperArgs=function(e,t){for(var a=[],o=[],i=0,r=0;r<e.length;r++)if(a.length||","!==e.charAt(r))"("===e.charAt(r)?"'"!=a[a.length-1]&&'"'!=a[a.length-1]&&(a.push(e.charAt(r)),e.charAt(r)):")"===e.charAt(r)?"("===a[a.length-1]&&a.pop():"'"===e.charAt(r)&&"\\"!==e.charAt(r-1)?"'"===a[a.length-1]?a.pop():'"'!==a[a.length-1]&&(a.push(e.charAt(r)),e.charAt(r)):'"'===e.charAt(r)&&"\\"!==e.charAt(r-1)&&('"'===a[a.length-1]?a.pop():"'"!==a[a.length-1]&&(a.push(e.charAt(r)),e.charAt(r)));else{var n=e.substr(i,r-i);(n=n.trim())&&n.startsWith('"')&&n.endsWith('"')&&(n="'"+(n=n.slice(1,-1))+"'"),n=this.getHelperArgValue(n,t),o.push(n),i=r+1}if(a.length)return!1;var s=e.substr(i,e.length-i);(s=s.trim())&&s.startsWith('"')&&s.endsWith('"')&&(s="'"+(s=s.slice(1,-1))+"'");try{s=this.getHelperArgValue(s,t)}catch(e){return!1}if(o.push(s),t){var l=[];o.forEach((function(e){"string"==typeof e&&"'"!==e[0]&&"event"!==e&&"this"!==e?l.push(E.getDV(e)):l.push(e)})),o=l}return o},Lyte.Compile.getHelperArgValue=function(e,t){switch(e){case"undefined":return;case"true":return!0;case"false":return!1;case"null":return null;case"":return;default:return e&&e.startsWith("'")&&e.endsWith("'")?e=(e=e.replace(/\\\'/g,"'")).replace(/\\\"/g,'"'):/\([\w\s,')(]*/.test(e)?{type:"helper",value:this.getHelper(e,t)}:isNaN(e)?e:parseInt(e)}},Lyte.Compile.getMustache=function(e){if(e=e&&"string"==typeof e?e.trim():e,/^{{(?=[\s]*[\w-_\(\$)]+)/.test(e)){var t=e.match(/{{[a-zA-Z0-9_.[\]()]*(?![\\])}}/g);if(t&&t.length>1)return;if(!this.syntaxCheck(e)||!/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}$/.test(e))return;var a=e.match(/[\w!@#$%^&*)(+=.,_-]+[\s]*[(]{0,1}(?:"([^"]|\\")*?"|'([^']|\\')*?'|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?[)]{0,1}[\s]*(?=}})/g);if(a&&a.length>1)return;return a?a[0].trim():a}},Lyte.Compile.syntaxCheck=function(e){for(var t,a=[],o=0;o<e.length;o++)"'"===e[o]?"'"===t&&"\\"!==e[o-1]?(a.pop(),t=void 0):a.length||(t=e[o],a.push(t)):'"'===e[o]&&('"'===t&&"\\"!==e[o-1]?(a.pop(),t=void 0):a.length||(t=e[o],a.push(t)));return!a.length},A.replaceWithOrigTemplate=function(e){return e._origTemplate._fakeTemp=e,e._origTemplate},A.pendingViewPortElements=[],A.isInViewPort=function(t){var a=t.getBoundingClientRect();return a.top>=0&&a.top<=(e.innerHeight||document.documentElement.clientHeight)||a.bottom>=0&&a.bottom<=(e.innerHeight||document.documentElement.clientHeight)},Lyte.Component.registerHelper("lyteViewPort",(function(e,t){if(E.getActViewPortTemplate(e)._viewPortRendered)return!1;var a=E.pendingViewPortElements;if(!t)return A._pendingAnimationFrame||(requestAnimationFrame((function(){requestAnimationFrame((function(){for(var e=[],t=Array.from(a),o=t.length-1;o>=0;o--){var i=t[o];if(E.isViewPortTemplate(i)&&!i._callee._destroyed){var r=E.getActViewPortTemplate(i);E._isInViewPort(r,r._callee)&&(e.push(a.splice(o,1)[0]),i._inPve=!1,i._viewPortRendered=!0),r._inPve=i._inPve,r._viewPortRendered=i._viewPortRendered}}for(var n=0;n<e.length;n++)E._executeIfTemplates(e[n]);A._pendingAnimationFrame=!1,e.length&&requestAnimationFrame((function(){requestAnimationFrame((function(){E.executePendingViewPort()}))}))}))})),A._pendingAnimationFrame=!0),e._inPve=!0,a.push(e),!0;if(a.length){var o=E.getFakeTemplate(e),i=a.indexOf(o);-1!=i&&(a[i]._inpve=e._inPve=!1,a[i]._viewPortRendered=e._viewPortRendered=!0,a.splice(i,1))}})),A._isInViewPort=function(e,t){var a=e._caseContent[0];if(a&&E.isInViewPort(a))return!0},A._executeIfTemplates=function(e){var t,a,o=E.getActViewPortTemplate(e);if(o._attributes.value=!1,o._cx||2===o.nodeType&&o.ownerElement._cx){a=o._cx||o.ownerElement._cx;var i=[];E.changeContext(a.node,i,a)}else"LYTE-YIELD"===o.tagName&&o._callee._cx&&(t=!0,a=o._callee._cx,i=[],E.changeContext(a.node,i,a,!0));o._callee.updateSwitchHelper("if",o,o._cx,!0,!0),a&&E.removeContext(a.node,i,a,t)},A.isViewPortTemplate=function(e){if(("TEMPLATE"==e.tagName||e._origTemplate)&&"if"==e.getAttribute("is"))return!0},A.getActViewPortTemplate=function(e){return e._origTemplate?e._origTemplate:e},A.getFakeTemplate=function(e){return e._fakeTemp?e._fakeTemp:e},A.executePendingViewPort=function(){var e=E.pendingViewPortElements;if(e.length){for(var t=Array.from(e),a=[],o=t.length-1;o>=0;o--){var i=t[o];if(E.isViewPortTemplate(i)){var r=E.getActViewPortTemplate(i);E._isInViewPort(r,r._callee)&&(a.push(e.splice(o,1)[0]),i._inPve=!1,i._viewPortRendered=!0),r._inPve=i._inPve,r._viewPortRendered=i._viewPortRendered}else(E.isInViewPort(i._dummyViewPortF)||E.isInViewPort(i._dummyViewPortL))&&(i._dummyViewPortF=i._dummyViewPortL=void 0,a.push(e.splice(o,1)[0]))}E.isViewPortPending=!1;for(var n=0;n<a.length;n++){var s=a[n];E.isViewPortTemplate(s)?E._executeIfTemplates(s):s.setData("lyteViewPort",!1)}a.length&&requestAnimationFrame((function(){requestAnimationFrame((function(){E.executePendingViewPort()}))}))}},e.addEventListener("resize",(function(){requestAnimationFrame((function(){requestAnimationFrame((function(){E.executePendingViewPort()}))}))})),document.addEventListener("scroll",(function(){var e=v.viewPortSettings.debounce;e?(E.viewPortScrollDebounce&&clearTimeout(E.viewPortScrollDebounce),E.viewPortScrollDebounce=setTimeout((function(){requestAnimationFrame((function(){requestAnimationFrame((function(){E.executePendingViewPort()}))})),E.viewPortScrollDebound=void 0}),e)):requestAnimationFrame((function(){requestAnimationFrame((function(){E.executePendingViewPort()}))}))}),!0),A.core={},A.core._constructor=C,A.core._registerComponent=C._registerComponent,A.core.registerComponent=E.registerComponent,A.core.executeBlockHelpers=C.prototype.executeBlockHelpers,A.core.updateForHelper=C.prototype.updateForHelper,A.core.updateForInHelper=C.prototype.updateForInHelper,A.core.updateSwitchHelper=C.prototype.updateSwitchHelper,v.viewPortSettings={debounce:0,executePendingViewPortElements:function(){A.executePendingViewPort()}}}(window),Lyte.registerErrorCodes({LD01:"Primary key value might be missing in the response data that is received, {0}",LD02:"{0} - {1} is not registered",LD03:"Cannot set the error {0} for {1}",LD04:"No such record to merge, {0}",LD05:"Model( {0} ) of related property - {1} not found in model - {2}",LD06:"Backward relation not present in model( {0} ), for the property {1} of model( {2} )",LD07:"{0} type not handled in handleArrayOperations",LD08:"{0} {1} will be deprecated from next version {2}",LD09:"deserializeKey cannot be processed for payload with more than two keys. Please use payloadKey callback instead or try modifying the same in normalizeResponse callback",LD10:"Response data not in a format lyte data store expects",LD11:"Deprecation Warning! findRecord response payload will not accept an array. It will be deprecated from the next version",LD12:"Response ( {0} ) is not in a format, lyte data store expects",LD13:"Response processing failed in {0} for model-{1} {2}, since invalid data is received in {1}(modelName) key of the data",LD14:"Cannot register {0} - {1}, as it already exists.",LD15:"Primary key value might be missing in the response data that is received, {0}",LD16:"Record merge failed for the record in model - {0} with primaryKey value - {1}, since either the persisted(saved) primary key value for a newly created record is not received from server or not in the proper structure to merge",LD17:"Record with the primary key value already exists",LD18:"No { 0 } present",LD19:"Deprecation Warning! findAll will not accept response payload values other than an array or any empty value. Current implementation which allows this will be deprecated from the next version",LD20:"Record cannot be saved as a state, when it is not either a new or a modified record or in a error state.",LD21:"No such state ( {0} ) saved for the record.",LD22:"For create / createRecord, response with a primary key value should be received",LD23:"PrimaryKey field {1} in {0} cannot have default value",LD24:"Response couldn't be parsed, {0}",LD25:"Cannot create record for the data - {0}",LD26:"Only one baseKey is allowed for a model",LD27:"Record merge failed, since the data passed is invalid - {0}",LD28:"Record merge failed for the model - {0}, since a valid primary key value is not found in the data to be merged - {1}",LD29:"Unloaded record-{0} of the model-{1} is being saved",LD30:"Variable value in query is mandatory for {0}",LD31:"Datatype defined for {0} is mismatch with the value's datatype",LD32:"Query '{0}' was not registered for the model '{1}"});var $Record=function(){Object.assign(this,{inIDB:!1,isPersisted:!0,isUnloaded:!1,isModified:!1,isNew:!1,isDeleted:!1,isError:!1,events:[],validatedOnCreate:!0,error:{}})},Record=function(e,t,a){var o=store.modelFor(e),i=a?a.delayPersistence:store.$.getFromCB("adapter",e,"delayPersistence");Object.assign(this,t),Object.defineProperties(this,{$:{writable:!0,value:new $Record}});var r=store.$.getpKVal(this,o);Object.defineProperties(this.$,{pK:{value:r,writable:!0},model:{value:o},_attributes:{value:{},writable:!0},_relationships:{value:{},writable:!0},isDirty:{value:function(){var e,t=this.record;return!!t.$.isModified||!!(e=store.$.isDirty(t,this.model.relations)).length&&e}},undoStack:{value:store.$.genUnRedoStack(),writable:!0},redoStack:{value:store.$.genUnRedoStack(),writable:!0},delayPersistence:{value:i}}),this.$.record=this;var n=store.$.saveParent;n&&this!==n&&store.$.defProp(this.$,"parent",n);var s=o._fldGrps.default,l=o._fldGrps.watch,d=o._fldGrps.hasMany,p=o._fldGrps.nested_prop;for(var c in s){var h=s[c],u=t[c];void 0!==u&&""!==u||(this[c]=store.$.getDefaultVal(this,h.default))}for(var f in l)Lyte.establishObjectBinding(this,f,!0,void 0,void 0,!0);for(var y in p)Lyte.establishObjectBinding(this,y,!0,void 0,void 0,y&&y.watch?y.watch:void 0);for(var m in d){var g=d[m];this.hasOwnProperty(m)?this[m]=Array.isArray(this[m])?Array.from(this[m]):this[m]:store.modelFor(g.relatedTo)&&store.$.getFromCB("serializer",g.relatedTo,"initHasManyRelation")&&(this[m]=[])}var v=o._properties;Object.keys(v).length&&(this._bindings||store.$.defProp(this,"_bindings",new Set,!1,!0),this._bindings.add(v),store.$.establishObserverBindings(this,v))};Object.defineProperties($Record.prototype,{get:{value:function(e){return this.record[e]}},set:{value:function(e,t,a){return this.isDeleted?store.$.setRecErr(this,this.model._pK,"ERR17"):store.$.setData(this,e,t,a),this.record}},getDirtyAttributes:{value:function(){var e=[],t=this._attributes;if(Object.keys(t).length)for(var a in t)e.push(a);return e}},rollBackAttributes:{value:function(e){Array.isArray(e)||(e=[e]);for(var t=this.record,a=[],o=this.model,i=this._attributes,r=0;r<e.length;r++){var n=e[r];if(i.hasOwnProperty(n)){var s=o.fieldList[n],l=i[n];"relation"==s.type?(store.$.rllBckRecArr(l,t,o,s),(t.$.dN&&t.$.dN.hasOwnProperty(n)?t.$.dN[n]:new Map).forEach((function(e,a){store.$.deleteDeepNest(t,n,a)}))):store.$.cmpSet(t,n,l,void 0,!0),a.push(n),delete i[n],store.$.clrRecErr(this,n)}}if(Object.keys(this._attributes).length||(this.hasOwnProperty("dN")&&(!this.dN||Object.keys(this.dN).length)||t.$.isNew||store.$.removeParentNesting(t),store.$.cmpSet(this,"isModified",!1),store.$.changePersist(t,!0),this.isNew||store.$.deleteFromArray(o.dirty,this.get(o._pK))),a.length>0){var d=[t,a];this.emit("change",d),o.emit("change",d),this.undoStack=store.$.genUnRedoStack(),this.redoStack=store.$.genUnRedoStack()}}},rollBack:{value:function(e,t){t=!1!==t,this.model._pK;var a=new Map;e?(this.rollBackState(e,t),store.$.removeOnSave(this.model._name,this.record.$.pK)):(t&&store.$.rBinherit(this,a,""),store.$.rollBackRecord(this,t))}},deleteRecord:{value:function(e){var t=this.model,a=this.record;e=void 0!==e?e:a.$.delayPersistence?a.$.delayPersistence.delete:void 0,store.$.removeFromStore(t,a.$.pK,void 0,void 0,e)}},destroyRecord:{value:function(e,t,a,o){return this.deleteRecord(a),this.save(e,t,"destroyRecord",void 0,o)}},addEventListener:{value:function(e,t){return store.$.eventListeners.add(this,e,t)}},removeEventListener:{value:function(e){store.$.eventListeners.remove(this,e)}},emit:{value:function(e,t){store.$.eventListeners.emit(this,e,t)}},triggerAction:{value:function(e,t,a,o,i){var r=this.model,n=r.actions;return(n?n[e]:void 0)?store.adapter.$.handleAction(e,r,this.record,t,a,o,i):Promise.reject({code:"ERR18",message:Lyte.errorCodes.ERR18,data:e})}},save:{value:function(e,t,a,o,i){var r,n=this.model,s=this.record,l=this.isDirty(),d=a&&a.validateOnSave,p=a&&a.skipValidation,c=n.fieldList;if(!0!==this.isUnloaded)if(this.isDeleted){if(!this.isNew)return store.adapter.$.del(n._name,s,!0,o,e,t,i)}else{if(this.isNew)return p||s.$.validatedOnCreate&&!d||(r=store.$.validateRecord(this.record,c)),!p&&(0==r||this&&this.error&&Object.keys(this.error).length>0)?Promise.reject(this.error):store.adapter.$.create(n._name,s,!0,e,t,i);if(this.isModified||l&&l.length){if(!p&&a&&d&&(r=store.$.validateRecord(this.record,c)),!p&&(0==r||s&&s.$&&s.$.isError))return Promise.reject(s.$.error);var h=store.$.updateJSON(this.record,n,l);return store.adapter.$.put(n._name,h,s,!0,e,t,i)}}else if(Lyte.warn("LD29","object"==_typeof(s.$.pK)?JSON.stringify(s.$.pK):s.$.pK,n._name),store.$.getFromCB("adapter",n._name,"rejectUnloadRecordSave"))return Promise.reject({code:"ERR28",message:Lyte.errorCodes.ERR28,data:s});return Promise.resolve()}},getInitialValues:{value:function(e){var t=!1;e?(Array.isArray(e)||(e=[e]),t=!0):e=this.getDirtyAttributes();for(var a={},o=this.record,i=this._attributes,r=0;r<e.length;r++)if(null!=o[e]&&o[e[r]].add){a[e[r]]=o[e[r]].slice(0);for(var n=i[e[r]],s=o[e[r]].model._pK,l=n.length-1;l>=0;l--)if("added"==n[l]._type)for(var d=0;d<n[l].records.length;d++){var p=store.$.getIndex(a[e[r]],s,n[l].records[d].$.pK);-1!=p&&a[e[r]].splice(p,1)}else if("removed"==n[l]._type)for(d=n[l].records.length-1;d>=0;d--)a[e[r]].splice(n[l]._indices[d],0,n[l].records[d]);else"changed"==n[l]._type&&(a[e[r]]=Array.isArray(n[l].records)?Array.from(n[l].records):n[l].records)}else a[e[r]]=i[e[r]];return t?a[e[0]]:a}},toJSON:{value:function(e){var t=!0;return"object"==(void 0===e?"undefined":_typeof(e))&&0==e.inherit&&(t=e.inherit),Object.assign({},store.$.toJSON(this.model._name,this.record,e||!0,void 0,void 0,t))}},undo:{value:function(e,t){var a=this.undoStack._order_.length;for(t=t||(a?a-1:a);a-- >t;)store.$.unredoOp(1,this,e)}},getCurrentState:{value:function(){return this.undoStack._order_.length}},redo:{value:function(e){store.$.unredoOp(2,this,e)}},validate:{value:function(e){var t={},a=this.model.fieldList;Array.isArray(e)&&e.forEach((function(e,o){a[e]&&(t[e]=a[e])})),0==Object.keys(t).length&&(t=a);var o=this.record;store.$.validateRecord(o,t)}},saveState:{value:function(e){if(this.isNew||this.isModified){for(var t,a=this._savedState=this._savedState||{},o=e;!o;)t=Math.floor(1e5*Math.random()+1),o=a.hasOwnProperty(t)?o:t;var i=this.toJSON("state");store.$.defProp(i,"$",{},!1,!0),this.model._arrPk.forEach((function(e){delete i[e]}));var r=this.undoStack,n=this.redoStack,s=this._attributes;if(r&&Object.keys(r).length){var l=r._order_;r=i.$.undoStack=store.$.deepCopyStack(r),store.$.defProp(r,"_order_",Lyte.deepCopyObject(l),!1,!0)}return n&&Object.keys(n).length&&(l=n._order_,n=i.$.redoStack=store.$.deepCopyStack(n),store.$.defProp(n,"_order_",Lyte.deepCopyObject(l),!1,!0)),s&&Object.keys(s).length&&(i.$._attributes=store.$.deepCopyAttrs(this.model,s)),this._savedState[o]=i,o}Lyte.warn("LD20")}},clearState:{value:function(e){e?delete this._savedState[e]:this._savedState={}}},rollBackState:{value:function(e,t){var a=this._savedState,o=a?a[e]:void 0;o?(this.dN&&(this.dN={}),store.$.setData(this,o,void 0,void 0,{},!0,t),store.$.updateDn(this.record),this.undoStack=o.$.undoStack||store.$.genUnRedoStack(),this.redoStack=o.$.redoStack||store.$.genUnRedoStack(),this._attributes=o.$._attributes||{},store.$.checkAttrs(this.record),delete this._savedState[e]):Lyte.warn("LD21",e)}},hasSavedState:{value:function(e){return!(!this._savedState||!this._savedState.hasOwnProperty(e))}},persist:{value:function(e){var t,a,o=this.model._name,i=this.record,r={obj:new Map};if(this.isNew)t="create",store.$.toJSON(o,i,void 0,t,r);else if(a=this.isDirty()){var n=store.$.updateJSON(i,this.model,a);store.$.toJSON(o,n,void 0,void 0,r)}var s=r.obj.get(this.pK);store.adapter.$.mergeResponse(i,this.model,void 0,this.pK,s,!0),store.adapter.$.updateIDB(o,t||(i.$.isDeleted?"deleteRecord":i.$.isModified||a?"updateRecord":void 0),i)}}});var Model=function(e,t){Object.assign(this,{_name:e,fieldList:{id:{type:"string",primaryKey:!0,defined:!1}},relations:{},_properties:{},_fldGrps:{default:{},hasMany:{},watch:{},inherit:{},nested_prop:{},inverse:{}},data:[],dirty:[],_deleted:new Map,events:{}}),store.$.defProp(this.data,"_recMap",new Map);var a=[];for(var o in t)store.$.registerField(this,o,t[o],a);this._pK||(this._pK="id"),this.isComp=!1;var i=this._pK.split(",");i.length>1&&(this.isComp=!0),this._arrPk=i,"undefined"!=typeof Lyte&&Lyte.establishObserverBindings(a,!0,this._properties,this),store.$.defArrUtls(this.data),store.$.defUtls(this.data,this),store.$.defProp(this,"extends",store.$.extendModel)};Model.prototype.addEventListener=function(e,t){return store.$.eventListeners.add(this,e,t)},Model.prototype.removeEventListener=function(e){store.$.eventListeners.remove(this,e)},Model.prototype.emit=function(e,t){store.$.eventListeners.emit(this,e,t)},Model.prototype.on=function(e,t){return this.addEventListener(e,t)},Model.prototype.setGql=function(e,t,a){store.$.setQuery(this,t,e,a)};var store={model:{},$:{idbOpen:!0,request:{},toRelate:{},idbQueue:[],idbQ:{},idbQ2:{},nestScp:{},nestScpId:1,changePersist:function(e,t){if(!e.$.isUnloaded||e.$.isPeristed!==t)switch(t){case!0:e.$.isNew||e.$.isModified||e.$.isDeleted||store.$.cmpSet(e.$,"isPersisted",!0);break;case!1:(e.$.isNew||e.$.isModified||e.$.isDeleted||e.$.dN&&Object.keys(e.$.dN)&&Object.keys(e.$.dN).length)&&store.$.cmpSet(e.$,"isPersisted",!1)}},getFromCB:function(e,t,a){for(var o=store[e],i=o?o[t]:void 0,r=i?i[a]:void 0;void 0===r;)if(i&&i.$super)r=(i=i.$super)?i[a]:void 0;else{if(i||(i=o.application),!i||!i.hasOwnProperty(a)){if("adapter"==e){switch(a){case"host":r=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host;break;case"namespace":r="";break;case"actionNamespace":r="action";break;case"batchNamespace":r="batch";break;default:r=void 0}break}break}if(r=i[a],!i&&!r)break}return r},newCB:function(e,t,a,o,i){for(var r in t.__extendedBy=[],o)t[r]=o[r];store.$.extendOptions(i,e,a,t,store),store.$.lazyExtend(e,t,a),store.$.defProp(t,"is",e),store.$.defProp(t,"__name",a)},extendOptions:function(e,t,a,o,i){e&&e.mixins&&e.mixins.length&&e.mixins.forEach((function(e){if(Lyte.Mixin.exists(e)){var r=Lyte.registeredMixins[e];for(var n in r)o[n]=r[n]}else Lyte.$.requiredMixins(e,{name:a,scope:i},t)}));var r=e?e.services:[];if(store.$.extendService(r,t,a,o,i),Lyte.toBeInjectedServices){var n=Lyte.toBeInjectedServices,s=[];for(var l in n)s.push({as:l,service:n[l]});store.$.extendService(s,t,a,o,i,!0)}},extendService:function(e,t,a,o,i,r,n){Lyte.extendService({services:e,type:t,name:a,ins:o,isGlobal:r,data:n,callback:function(e,a,o){Lyte.$.lazyRegisterService(r?e:new e,{scope:i,type:t,name:o,key:a})}})},lazyExtend:function(e,t,a){var o=store[e];if(o.__toAddSuper&&o.__toAddSuper.hasOwnProperty(a)){for(var i=o.__toAddSuper[a],r=0;r<i.length;r++){var n,s=o[i[r]];s&&s.is==e&&(s.$super=t,t.__extendedBy.push(i[r]),"application"!=a&&(o.__toAddSuper.application&&(n=o.__toAddSuper.application.indexOf(s.__name))>-1&&o.__toAddSuper.application.splice(n,1),o.application&&(n=o.application.__extendedBy.indexOf(s.__name))>-1&&o.application.__extendedBy.splice(n,1)))}delete o.__toAddSuper[a]}},cbDef:function(e,t){Object.defineProperties(e.prototype,{super:{value:function(){return store.$.super.call(this,arguments)}},extends:{value:function(e){store.$.extendCallback.call(this,store,t,e)}}})},changeRelPkMaps:function(e,t,a,o,i){var r=e.$.model,n=r.relations;for(var s in n)for(var l=n[s],d=l.length,p=0;p<d;p++){var c=l[p],h=c.relKey,u=c.relType;if(e.hasOwnProperty(h)){var f,y=e[h],m=store.model[c.relatedTo];if(m&&(f=store.$.getBackwardRel(r,c,m))&&"hasMany"==f.relType)if(T=f.opts&&f.opts.sort&&f.opts.sort.sortFn&&f.opts.sort.observes,"belongsTo"==u&&Lyte.isRecord(y))switch(o){case"sort":case"srtObsChk":if(y&&Array.isArray(y[f.relKey]))if("sort"==o)T&&-1!=f.opts.sort.observes.indexOf(i)&&store.$.handleArrOp(y[f.relKey],"sort");else if(i!==f.relKey)return!0;break;default:y[f.relKey]&&y[f.relKey]._recMap&&y[f.relKey]._recMap.delete(t)&&y[f.relKey]._recMap.set(a,e)}else if("hasMany"==u&&Array.isArray(y))for(var g=y.length,v=0;v<g;v++){var b=y[v];switch(o){case"sort":case"srtObsChk":if(b&&Array.isArray(b[f.relKey]))if("sort"==o)T&&-1!=f.opts.sort.observes.indexOf(i)&&store.$.handleArrOp(b[f.relKey],"sort");else if(i!==f.relKey)return!0;break;default:Lyte.isRecord(b)&&b[f.relKey]&&b[f.relKey]._recMap&&b[f.relKey]._recMap.delete(t)&&b[f.relKey]._recMap.set(a,e)}}}}var P=e.$._relationships;for(var D in P){var _=P[D],L=store.modelFor(D);for(var h in _)for(var C=_[h],w=L.fieldList[h],T=w.opts&&w.opts.sort&&w.opts.sort.sortFn&&w.opts.sort.observes,x=C.length,S=0;S<x;S++){var A=(b=C[S])[h];if(Array.isArray(A))switch(o){case"sort":case"srtObsChk":if(Array.isArray(A))if("sort"==o)T&&-1!=w.opts.sort.observes.indexOf(i)&&store.$.handleArrOp(A,"sort");else if(i!==w.relKey)return!0;break;default:A._recMap&&A._recMap.delete(t)&&A._recMap.set(a,e)}}}},updateNestScp:function(e,t){if(Lyte.isRecord(e)){var a=e.$.__scpObj||{};for(var o in a)if(r=(r=a[o]).split("_")[0],Lyte.nestScp&&Lyte.nestScp.hasOwnProperty(r)&&Lyte.nestScp[r].model){var i=Lyte.nestScp[r].model.get(e.$.model._name);if(i.has(t)){var r=i.get(t);i.delete(t),i.set(e.$.pK,r)}}}},getDefaultVal:function(e,t){return"function"!=typeof t?t:t.call(e)},deepValueChange:function(e,t,a,o){var i={emit:!1,attr:[],oldRec:{}};store.$.estAttrs(e,t,a,i,o),store.$.checkAttrs(e),store.$.changeCallbck(e,i)},updateDn:function(e){var t=e.$.model.relations;for(var a in t)t[a].forEach((function(t){var a=t.opts,o=t.relKey,i=t.relType;if(a&&a.deepNest&&e.hasOwnProperty(o)){var r=e[o];"belongsTo"==i&&(r.$.isModified||r.$.dN&&Object.keys(r.$.dN).length)?store.$.setDeepNest(e,o,r.$.pK,"updated"):"hasMany"==i&&Array.isArray(r)&&r.forEach((function(t){(t.$.isModified||t.$.dN&&Object.keys(t.$.dN).length)&&store.$.setDeepNest(e,o,t.$.pK,"updated")}))}}))},genUnRedoStack:function(){var e={};return store.$.defProp(e,"_order_",[],!1),e},deepCopyStack:function(e){if(e&&"object"==(void 0===e?"undefined":_typeof(e)))for(var t in e=Object.assign({},e))if(Array.isArray(e[t])){var a=e[t]=Array.from(e[t]);a.forEach((function(e,t){a[t]=Object.assign(e)}))}return e},deepCopyAttrs:function(e,t){var a=e.fieldList;for(var o in t=Object.assign({},t)){var i=t[o];a[o]&&"relation"==a[o].type&&Array.isArray(i)&&(i=t[o]=Array.from(i)).forEach((function(e,t){i[t]=Object.assign({},e),e.hasOwnProperty("records")&&e.records&&(e.records=Array.from(e.records)),e.hasOwnProperty("_indices")&&e._indices&&(e._indices=Array.from(e._indices))}))}return t},addTo_Del:function(e,t,a){var o={index:a,data:t};(e._deleted=e._deleted||new Map).set(t.$.pK,o)},scExtd:function(e,t,a,o){var i="adapter"==e?store.adapter:store.serializer;if(t)return i.hasOwnProperty(t)&&Lyte.warn("LD14",e,t),i[t]="adapter"==e?new Adapter(a,o,t):new Serializer(a,o,t),i.application&&"application"!=t&&(i[t].$super=i.application,i.application.__extendedBy.push(t)),i.application||"application"==t||(i.__toAddSuper=i.__toAddSuper||{},i.__toAddSuper.hasOwnProperty("application")||(i.__toAddSuper.application=[]),i.__toAddSuper.application.push(t)),i[t]},initCB:function(e,t,a,o){var i=store.$.cbScp(t,a,e),r=o.args,n={};if(i)return n.data=store.$.cB(i,r),n},cB:function(e,t){return e.func.apply(e.scope,t.concat(e.name))},cbScp:function(e,t,a){for(var o=store[a],i=o[e],r=o.application;;){if(i&&i[t]&&"function"==typeof i[t])return{scope:i,func:i[t],name:t};if(!i||!i.$super)return r&&r[t]&&"function"==typeof r[t]?{scope:r,func:r[t],name:t}:void 0;i=i.$super}},comparePk:function(e,t){var a=e.$.pK,o=void 0===a?"undefined":_typeof(a);if("string"==o||"number"==o)return a===t;if("object"==(void 0===a?"undefined":_typeof(a))){var i=Object.keys(a).length,r=0;for(var n in a)a[n]===t[n]&&r++;return i===r}},getpKVal:function(e,t){var a=(t=t||e.$.model)._arrPk;if(1==a.length)return e[a[0]];var o={};return a.forEach((function(t){o[t]=e[t]})),o},unredoOp:function(e,t,a){var o,i;1==e?(o=t.undoStack,i=t.redoStack):(o=t.redoStack,i=t.undoStack);var r=[],n={};if(a?(r=Array.isArray(a)?a:[a]).forEach((function(e){if(o[e].length)for(var t=o._order_.length-1;t>=0;t--){var a=o._order_[t],i=a.indexOf(e);if(i>-1){a.splice(i,1),a.length||o._order_.splice(t,1);break}}})):r=o._order_&&o._order_.length?o._order_.pop():r,r.length){for(var s=0;s<r.length;s++){var l,d=r[s];"update"==(l=o[d].pop())._type?l.hasOwnProperty("val")?store.$.setData(t,d,l.val,void 0,n):l.hasOwnProperty("records")&&store.$.setData(t,d,l.records,void 0,n):1==e&&"propAdd"==l._type?"undefined"!=typeof Lyte?(n[d]={_type:"propDelete",val:t.record[d]},l.hasOwnProperty("val")&&store.$.setData(t,d,l.val,void 0,{}),Lyte.objectUtils?Lyte.objectUtils(t.record,"delete",d):delete t.record[d]):delete t.record[d]:2==e&&"propDelete"==l._type?(n[d]={_type:"propAdd"},store.$.setData(t,d,l.val,void 0,n)):"added"==l._type?t.record.$.get(d).remove(l.records,void 0,n):"removed"==l._type&&(store.$.rllBckRecArr([l],t.record,t.model,t.model.fieldList[d]),l._type="added",n[d]=l)}var p=Object.keys(n);for(s=0;s<p.length;s++)i[d=p[s]]=i[d]||[],i[d].push(n[d]);p.length&&i._order_.push(p)}},unregisterModel:function(e,t){var a=store.modelFor(e);if(a){a.data.length&&store.unloadAll(e,void 0,t);var o=a.extendedBy;if(o&&Object.keys(o).length)for(var i in o)store.unregisterModel(i,t);var r=a.extend;r&&delete store.modelFor(r).extendedBy[e],delete store.model[e]}else Lyte.warn("LD02","Model ",e)},getDsrzEmpData:function(e,t){if(e.hasOwnProperty("deserializeEmptyData"))return e.deserializeEmptyData;var a=store.$.getFromCB("serializer",t,"deserializeEmptyData");return void 0!==a&&a},updateFieldValidation:function(e,t,a,o){var i=e.data,r=e.fieldList;i.forEach((function(i){var n=r[t];if(a){var s=store.$.getDsrzEmpData(n,e._name),l=!s&&i[t];i.hasOwnProperty(t)&&(l||s)&&Lyte.Transform.hasOwnProperty(n.type)&&Lyte.Transform[n.type].hasOwnProperty("deserialize")&&(i[t]=Lyte.Transform[n.type].deserialize(i[t],t,e._name,store.$.getpKVal(i,e)))}if(!o){var d=!!(i.$.error&&i.$.error.hasOwnProperty(t)&&i.$.error[t].hasOwnProperty("value")),p=d?i.$.error[t].value:void 0;store.$.clrRecErr(i.$,t),d?store.$.validateField(i,t,n,void 0,{old:!0,value:p}):store.$.validateField(i,t,n,void 0)}d&&i.$.error&&0===Object.keys(i.$.error)&&i.$.set(t,p)}))},validateRelatedRecord:function(e,t,a){var o=store.model[a.relatedTo].fieldList;if(a&&a.opts&&e&&e.hasOwnProperty(t)&&a.opts&&"record"==a.opts.serialize){if("belongsTo"==a.relType&&Lyte.isRecord(e[t]))return this.validateRecord(e[t],o);if("hasMany"==a.relType&&Array.isArray(e[t])){var i=!0,r=this;return e[t].forEach((function(e,t){Lyte.isRecord(e)&&!1===r.validateRecord(e,o)&&(i=!1)})),i}}},validateRecord:function(e,t){var a,o=!0;for(var i in t)a=this.validateField(e,i,t[i],void 0),!0===o&&!1===a&&(o=!1);return!(!1===o||!0===e.$.isError&&e.$.error&&Object.keys(e.$.error).length)},validateField:function(e,t,a,o,i){var r,n=i&&i.old?i.value:e[t],s=e.$;if("relation"==a.type){if(!1===this.validateRelatedRecord(e,t,a))return!1}else if(a.mandatory&&!e.$.error.hasOwnProperty(t)&&(void 0===n||""===n||Array.isArray(n)&&0===n.length))store.$.setRecErr(s,t,{code:"ERR02",message:Lyte.errorCodes.ERR02,value:n});else if(r=!0,i||e.hasOwnProperty(t)&&!e.$.error.hasOwnProperty(t)){var l=a;l.any&&Array.isArray(l)||(l=[l]);for(var d=l.length,p=!0,c=0;c<d;c++){var h=l[c];for(var u in h){var f=Lyte.checkProperty(u,n,t,h[u],h,e,void 0,Lyte.isRecord(e)?e.$.model._name:void 0);if(!0!==f){!0===p&&("object"==(void 0===f?"undefined":_typeof(f))&&(f.value=n),p=f);break}}}!0!==p&&(store.$.setRecErr(s,t,p),r=!1),i&&r&&store.$.cmpSet(e,t,n,void 0,!0),r&&store.$.clrRecErr(s,t)}},partialData:function(e,t,a,o,i){var r=e[t];if(!r||!Array.isArray(r))return!0;r.partial||store.$.defPar(r);var n=r.partial=r.partial||new Map;n.get(a)||n.set(a,{});var s=!1;switch(n.get(a).type){case"added":"removed"==o&&(n.delete(a),s=!0);break;case"removed":if("added"==o){if(e[t]._recMap)var l=e[t]._recMap.get(a);!l||Lyte.isRecord(l)&&!l.$.isDirty()?(n.delete(a),s=!0):n.get(a).type="modified"}break;case"modified":case"updated":if("added"==o)break;default:var d={type:o};i&&(d.polymorphicType=i),n.set(a,d)}return s&&!n.size?(n.size||store.$.deleteDeepNest(e,t,a),!0):void 0},removeParentNesting:function(e){var t=e.$.model,a=e.$.pK,o=t.relations;for(var i in o)o[i].forEach((function(o){var i,r,n,s,l=store.model[o.relatedTo];l&&((i=store.$.getBackwardRel(t,o,l))&&i.opts&&(r=i.opts.deepNest,n="partial"==i.opts.serialize,s=o.relKey?e[o.relKey]:store.$.getRelatedRecord(e,o.relatedTo,o.dummy)),r&&(Array.isArray(s)?s.forEach((function(e){Lyte.isRecord(e)&&store.$.deleteDeepNest(e,i.relKey,a)})):Lyte.isRecord(s)&&store.$.deleteDeepNest(s,i.relKey,a)),n&&(s&&!Array.isArray(s)&&(s=[s]),Array.isArray(s)&&s.forEach((function(e){var t=i.relKey?e[i.relKey]:void 0;t&&t.partial&&t.partial.get(a)&&t.partial.delete(a)}))))}))},deleteDeepNest:function(e,t,a){var o=e.$.dN;o&&(o[t]&&void 0===a?delete o[t]:o[t]&&o[t].get(a)&&(o[t].delete(a),o[t].size||delete o[t]),Object.keys(o).length||(delete e.$.dN,e.$.isModified||e.$.isNew||store.$.removeParentNesting(e),store.$.changePersist(e,!0)))},updateJSON:function(e,t,a){var o={},i=t._arrPk,r=e.$._attributes;for(var n in r)o[n]=e[n];var s=a;1==a&&(s=store.$.isDirty(e,t.relations)||[]);for(var l=0;l<s.length;l++)o[s[l]]=e[s[l]];return i.forEach((function(t){o[t]=e[t]})),o},removeDeepNest:function(e){if(Lyte.isRecord(e)&&e.$.dN&&Object.keys(e.$.dN).length){e.$.dN={};var t=e.$.model.relations;for(var a in t)t[a].forEach((function(t){var a=t.opts;if(a&&(a.deepNest||"partial"==a.serialize)){var o=e[t.relKey];Array.isArray(o)?o.forEach((function(e){Lyte.isRecord(e)&&(store.$.removeDeepNest(e),e.$.isNew||e.$.isModified||e.$.dN&&(!e.$.dN||0!=Object.keys(e.$.dN).length)||store.$.removeParentNesting(e))})):Lyte.isRecord(o)&&(store.$.removeDeepNest(o),o.$.isNew||o.$.isModified||o.$.dN&&(!o.$.dN||0!=Object.keys(o.$.dN).length)||store.$.removeParentNesting(o))}}))}},addDeepNest:function(e,t,a,o,i){i=i||new Map;var r,n=t?store.model[e.$.model.extend]:e.$.model,s=e.$.pK,l=(a=a||"updated",n.relations);for(var d in l)l[d].forEach((function(t){var l,d,p;r=t.relKey?e[t.relKey]:store.$.getRelatedRecord(e,t.relatedTo,t.dummy);var c=store.model[t.relatedTo];if(r&&c){l=store.$.getBackwardRel(n,t,c);var h=!1;if(!i.get(l)){var u=i.set(l,new Map);h=!0}if(u=i.get(l),(h||!u.get(r))&&(u.set(r,!0),l&&l.opts&&(d=l.opts.deepNest,l.opts.serialize,p=!!l.opts.serialize),d&&store.$.makeDirty("dirty",r,a,l,s,i),p&&e&&r&&(!o||!o||o.model!==t.relatedTo||l.relKey!==o.relKey))){var f=r;Array.isArray(f)?f.forEach((function(e){store.$.partialData(e,l.relKey,s,"modified")})):Lyte.isRecord(f)&&store.$.partialData(f,l.relKey,s,"modified")}}}));n.extend&&this.addDeepNest(e,!0)},getRelatedRecord:function(e,t,a){if(e){var o=e.$._relationships;if(o[t]&&o[t][a])return o[t][a]}},makeDirty:function(e,t,a,o,i,r){if("id"!=o.opts.serialize||"updated"!=a){var n=o.relKey;Array.isArray(t)?t.forEach((function(e){store.$.setDeepNest(e,n,i,a,r)})):Lyte.isRecord(t)&&store.$.setDeepNest(t,n,i,a,r)}},setDeepNest:function(e,t,a,o,i){var r=e.$.dN=e.$.dN||{},n=r[t]=r[t]||new Map;n.has(a)||n.set(a,{});var s=n.get(a);switch(s.type){case"added":"removed"==o&&store.$.deleteDeepNest(e,t,a);break;case"removed":"added"==o&&store.$.deleteDeepNest(e,t,a);break;default:s.type=o,store.$.changePersist(e,!1),store.$.addDeepNest(e,void 0,void 0,void 0,i)}},isDirty:function(e,t,a,o){var i=[];for(var r in t)for(var n=t[r],s=0;s<n.length;s++)if((r=n[s]).opts&&r.opts.serialize){var l=r.relKey,d=r.relType,p=e[l],c=store.model[r.relatedTo];if(a&&c&&a==store.$.getBackwardRel(o,r,store.model[r.relatedTo])&&o._name!=r.relatedTo)continue;if("record"==r.opts.serialize){if(store.$.isRelDirty(r,p,r)){i.push(l);continue}}else if("partial"==r.opts.serialize)if("hasMany"==d){if(p&&p.partial&&p.partial.size){i.push(l);continue}}else if(Lyte.isRecord(p)&&p.$.isModified||e&&e.$&&e.$.partial&&e.$.partial.hasOwnProperty(l)){i.push(l);continue}r.opts.deepNest&&e.$.dN&&e.$.dN[l]&&i.push(l)}return i},isRelDirty:function(e,t,a){var o=e.relType,i=store.model[e.relatedTo],r=i.relations;if(!store.$.isEmpty(t))if("hasMany"==o&&Array.isArray(t)&&t.length){for(var n=t.length,s=0;s<n;s++)if(1==t[s].$.isModified)return!0;for(var l=0;l<n;l++){var d=t[l];if(this.isDirty(d,r,a,i).length)return!0}}else if("belongsTo"==o&&Lyte.isRecord(t)){if(1==t.$.isModified)return!0;if(this.isDirty(t,r,a,i).length)return!0}return!1},handleCachedResponse:function(e,t){var a=store.$.cachedBatch=store.$.cachedBatch||{},o=0;return(a[e]||[]).forEach((function(e,a){t.splice(e.ind+o++,0,e.data)})),delete a[e],t},addToCachedBatch:function(e){var t=store.$.currentBatch,a=store.$.cachedBatch=store.$.cachedBatch||{},o=a[t]=a[t]||[],i=(store.$.batch[t]||[]).length;o.push({ind:i,data:e})},establishToRelated:function(e,t){var a=e.$.model,o={};t.forEach((function(t){var i=store.peekRecord(t.model,t.pkVal);if(i){var r=i.$.model;store.$.getRelations(r,t.key,a,o),store.$.establishLink(o.forward,o.backward,i,e,void 0,!0)}}))},checkObjAndAddToArr:function(e,t,a){for(var o=Object.keys(a).length,i=-1,r=e.length,n=0;n<r;n++){var s=e[n],l=0;for(var d in a)s[d]==t[d]&&l++;if(l==o)return i=n,void e.splice(n,1,t)}return-1==i&&e.push(t),i},addToRelate:function(e,t,a,o){var i=a.forward.relatedTo,r=store.$.toRelate[i]=store.$.toRelate[i]||new Map;r.has(o)||r.set(o,[]);var n=r.get(o),s={model:e,pkVal:t.$.pK,key:a.forward.relKey};n.push(s)},addOnSave:function(e,t,a,o,i,r){store.$.onSave=store.$.onSave||{};var n=store.$.onSave[e]=store.$.onSave[e]||{},s=n[t[i]]=n[t[i]]||{},l=t[a]||[];"belongsTo"==o.relType&&(l=Array.isArray(t[a])?t[a]:[t[a]]),l.forEach((function(e){var t=s[o.relKey]=s[o.relKey]||[];store.$.checkAndAddToArray(t,e[r])}))},addToIDBonSave:function(e,t){var a=store.model[e].fieldList,o=store.$.onSave?store.$.onSave[e]:void 0;if(o){var i=store.model[e]._pK,r=t&&i?o[t[i]]:void 0;if(r){for(var n in r){var s=r[n],l=a[n].relatedTo;s.forEach((function(e){var t=store.peekRecord(l,e);if(t){var a=t.$.parent;if(Lyte.isRecord(a)){var o=a.$.model,i=o._name,r=o._pK;store.$.checkAndAddToIDBQ(i,"updateRecord",store.peekRecord(i,a[r]).$.toJSON(!0))}else store.$.checkAndAddToIDBQ(l,"updateRecord",store.peekRecord(l,e).$.toJSON(!0))}}))}store.$.removeOnSave(e,t[i])}}},removeOnSave:function(e,t){var a=store.$.onSave?store.$.onSave[e]:void 0;a&&a[t]&&delete a[t]},checkAndAddToIDBQ:function(e,t,a){var o={model:e,type:t,data:a};(store.$.idbQ2[e]=store.$.idbQ2[e]||[]).push(o)},checkAndRemoveKey:function(e,t,a){for(var o in e){var i=t[o];i&&"relation"==i.type&&(a&&!this.checkPresenceInArray(a,o)?delete e[o]:this.removeNotNeededKeys(i.relatedTo,e[o]))}},removeNotNeededKeys:function(e,t,a){var o=store.model[e],i=o.fieldList,r=a?a.deserializeKeys:void 0;if(o){var n=this;Array.isArray(t)?t.forEach((function(e){n.checkAndRemoveKey(e,i,r)})):this.checkAndRemoveKey(t,i,r)}return t},getIDBObj:function(e,t,a,o,i,r){if(e&&e.hasOwnProperty("idb"))return"function"==typeof e.idb?e.idb.apply(e,[{model:r||e._name,type:a,queryParams:t,key:o,customData:i}]):e.idb},idbQ2Push:function(e,t,a,o,i,r,n){try{var s=store.model[e],l=store.$.getIDBObj(s,a,o,i,n);if(l){var d={model:e,type:o,customData:n};d.queryCache=l.queryCache,s._pK;var p=store.$.idbQ2[e]=store.$.idbQ2[e]||[];switch(o){case"action":return void delete p[o];case"update":case"create":d.data=[],t.forEach((function(e){d.data.push(Lyte.isRecord(e)?e.$.toJSON(void 0,!0):e)}));break;case"updateRecord":case"createRecord":case"delete":d.data=t;break;case"destroyRecord":case"deleteRecord":d.id=t;break;case"findRecord":d.key=i;var c=t[0].$.toJSON("idb");(h={})[e]=c,r&&(h.meta=r),!0===l.queryCache&&(d.queryParams=a),d.data=h;break;case"findAll":var h;c=[],t.forEach((function(e){c.push(e.$.toJSON("idb"))})),(h={})[e]=c,r&&(h.meta=r),!0===l.queryCache&&(d.queryParams=a),d.data=h;break;case"pushPayload":Lyte.isRecord(t)&&(t=t.$.toJSON("idb")),d.data=t}p.push(d)}}catch(e){Lyte.error("Error while adding to IDBQueue ",e)}},isEmpty:function(e){return null==e||""===e||null==e},isEmptyObj:function(e){return null!==e&&"object"==(void 0===e?"undefined":_typeof(e))&&0==Object.keys(e).length},isEmptyArray:function(e){return!(!Array.isArray(e)||0!=e.length)},registerField:function(e,t,a,o){var i=e.fieldList[t]?Object.assign({},e.fieldList[t]):void 0;if("observer"==a.type)o.push(a);else if("callBack"==a.type){a.observes&&o.push(a.observes);for(var r=a.properties,n=0;n<r.length;n++)"didLoad"===r[n]||"init"===r[n]?(e.didLoad||(e.didLoad=[]),e.didLoad.push(a.value)):"add"!==r[n]&&"change"!==r[n]||e.on(r[n],a.value);"didLoad"==t&&(e.didLoad||(e.didLoad=[]),e.didLoad.push(a.value))}else if("didLoad"==t)e.didLoad||(e.didLoad=[]),e.didLoad.push(a);else if(Object.keys(a).length){if(a.primaryKey&&(e.fieldList.id&&0==e.fieldList.id.defined&&delete e.fieldList.id,a.hasOwnProperty("default")&&(Lyte.warn("LD23",e._name,t),delete a.default),null!=e._pK?(e._pK=e._pK+","+t,e.isComposite=!0):e._pK=t,a.baseKey)){if(e.bK)return void Lyte.warn("LD26");e.bK=t}e.fieldList.hasOwnProperty(t),e.fieldList[t]=a,i&&e._fldGrps&&(i.hasOwnProperty("default")&&delete e._fldGrps.default[t],i.hasOwnProperty("watch")&&delete e._fldGrps.watch[t],i.opts&&i.opts.hasOwnProperty("inherit")&&delete e._fldGrps.inherit[t]),a.hasOwnProperty("default")&&(e._fldGrps.default[t]=a),a&&a.opts&&a.opts.hasOwnProperty("inherit")&&(e._fldGrps.inherit[t]=a),a.hasOwnProperty("watch")&&1==a.watch&&/^(array|object)$/.test(a.type)&&(e._fldGrps.watch[t]=a),(a.hasOwnProperty("properties")||a.hasOwnProperty("items"))&&(e._fldGrps.nested_prop[t]=a)}if("relation"===a.type){a.relKey=t;var s=a.relatedTo,l=e.fieldList[t];e.relations[s]||(e.relations[s]=[]);var d={};d.relKey=l.relKey,store.$.checkObjAndAddToArr(e.relations[a.relatedTo],l,d),"hasMany"==a.relType&&(e._fldGrps.hasMany[t]=a),a.hasOwnProperty("opts")&&a.opts.hasOwnProperty("inverse")&&(e._fldGrps.inverse[s]=a)}},setError:function(e,t,a){e.$.hasOwnProperty("error")?Array.isArray(t)?t.forEach((function(t){store.$.cmpSet(e.$.error,t,a)})):store.$.cmpSet(e.$.error,t,a):Lyte.error("LD03",e,t)},unRegCb:function(e,t){var a=store[e][t];if(a){var o=a.__extendedBy;if(o.length){if(store[e].__toAddSuper=store[e].__toAddSuper||{},store[e].__toAddSuper[t]?o.forEach((function(a){store[e].__toAddSuper[t].push(a)})):store[e].__toAddSuper[t]=o.slice(),o.forEach((function(t){store[e][t].$super=void 0})),store[e].application&&"application"!=t){var i=store[e].application;o.forEach((function(t){store[e][t].$super=i,store[e].application.__extendedBy.push(t)}))}store[e].application||(store[e].__toAddSuper.application?o.forEach((function(t){store[e].__toAddSuper.application.push(t)})):store[e].__toAddSuper.application=o.slice())}a.$super&&a.$super.__extendedBy.splice(a.$super.__extendedBy.indexOf(t),1),delete store[e][t]}else Lyte.error("LD02",e,t)},eventListeners:{add:function(e,t,a){return e.events=e.events||{},e.events[t]=e.events[t]||[],e.events[t].push({f:a}),t+"-"+(e.events[t].length-1)},remove:function(e,t){var a;if(t)if(/^(add|remove|change)$/.test(t))a=t,e.events&&e.events[a]&&delete e.events[a];else{var o=t?t.split("-"):void 0;if(o){var i=e.events[o[0]];i&&o[1]&&(i[o[1]]=null)}}else{var r=e.events;for(var n in r)r&&r[n]&&delete r[n]}},emit:function(e,t,a){for(var o=e.events&&e.events[t]?e.events[t]:[],i=0;i<o.length;i++)o[i]&&o[i].f.apply(null,a)}},extendCallback:function(e,t,a){var o,i,r=e[t];if(a&&"string"==typeof a&&((i=r[a])||(r.__toAddSuper=r.__toAddSuper||{},r.__toAddSuper.hasOwnProperty(a)||(r.__toAddSuper[a]=[]),r.__toAddSuper[a].push(this.__name))),i&&i.is==t&&(!this.$super||"application"==this.$super.__name)){if(this.$super=i,i.__extendedBy.push(this.__name),r.application){var n=r.application.__extendedBy.indexOf(this.__name);n>-1&&r.application.__extendedBy.splice(n,1)}if((o=r.__toAddSuper)&&o.application){var s=o.application.indexOf(this.__name);s>-1&&r.__toAddSuper.application.splice(s,1)}}return this},super:function(){var e=this.$super,t=arguments[0][0][arguments[0][0].length-1],a=[],o=arguments[0][0],i=e[t];if("function"==typeof i){for(var r in delete o[o.length-1],o)o.hasOwnProperty(r)&&a.push(o[r]);return i.apply(e,a)}if(i)return i},extendModel:function(e,t){var a=t||this;if(e&&store.model[e]){var o=Object.assign({},store.model[e].fieldList);for(var i in o)"relation"==o[i].type&&delete o[i];var r={},n="id"==a._pK&&0==a.fieldList.id.defined;for(var i in o){var s=o[i];n&&s.primaryKey&&s.defined,s.primaryKey?r[i]=s:a.fieldList[i]=s}var l=Object.keys(r),d=l.length;if(n&&d){for(var i in delete a.fieldList.id,r)a.fieldList[i]=r[i];1==d?(a._pK=l[0],a._arrPk=Array.from(l)):(a.isComp=!0,a._arrPk=Array.from(l),a._pK=a._arrPk.toString())}var p=a._name;if(store.model[p].extend=e,store.model[e].extendedBy=store.model[e].extendedBy||{},store.model[e].extendedBy[p]=!0,!store.adapter[p]&&store.adapter[e]&&(store.adapter[p]=store.adapter[e]),!store.serializer[p]&&store.serializer[e]&&(store.serializer[p]=store.serializer[e]),store.model[e].actions){var c=a.actions=a.actions||{};for(var i in store.model[e].actions)c.hasOwnProperty(i)||(c[i]=store.model[e].actions[i])}}},demoLishObserverBindings:function(e,t,a){for(key in a||(a=e),t){if(e[key]instanceof Object){if(a&&e[key]._setterScope){var o=e[key]._setterScope.indexOf(a);-1!=o&&e[key]._setterScope.splice(o,1)}Object.keys(t[key]).length&&this.demoLishObserverBindings(e[key],t[key],e)}if(e._setterScope&&e!=a){var i=e._setterScope.indexOf(a);-1!=i&&e._setterScope.splice(i,1)}}},establishObserverBindings:function(e,t,a){for(key in a||(a=e),t)e[key]instanceof Object&&(e[key]._bindings||store.$.defProp(e[key],"_bindings",new Set,!1,!0),a&&!e[key]._setterScope&&store.$.defProp(e[key],"_setterScope",[]),-1==e[key]._setterScope.indexOf(a)&&e[key]._setterScope.push(a),e[key]._bindings.add(t[key]),Object.keys(t[key]).length&&this.establishObserverBindings(e[key],t[key],e)),e._setterScope||(store.$.defProp(e,"_setterScope",[]),e._setterScope.push(e))},setData:function(e,t,a,o,i,r,n){var s,l={emit:!1,attr:[],oldRec:{}},d=e.model,p=!1,c=e.record;if(n){var h=e.model.relations;for(var u in h)for(var f=0;f<h[u].length;f++)if(h[u][f].opts&&h[u][f].opts.inherit&&t[h[u][f].relKey])if("belongsTo"==h[u][f].relType)this.setData(e.record[h[u][f].relKey].$,t[h[u][f].relKey],void 0,void 0,void 0,!0,!0);else for(var y=0;y<t[h[u][f].relKey].length;y++)this.setData(e.record[h[u][f].relKey][y].$,t[h[u][f].relKey][y],void 0,void 0,void 0,!0,!0)}if(t&&"object"===(void 0===t?"undefined":_typeof(t)))for(var m in s=[],o=a,t)s.push(m),this.setValue(e,m,t[m],o,l,r),d&&d._properties&&d._properties.hasOwnProperty(m)&&(p=!0);else s=t,this.setValue(e,t,a,o,l,r),d&&d._properties&&d._properties.hasOwnProperty(t)&&(p=!0);return e.emit("set",[e.record,s]),e.model.emit("set",[d._name,e.record,s]),store.emit("set",[d._name,e.record,s]),p&&store.$.establishObserverBindings(c,d._properties),!r&&l.emit&&store.$.changeCallbck(c,l,i),c},changeCallbck:function(e,t,a){var o=[e,t.attr],i=e.$;if(i.emit("change",o),i.model.emit("change",o),store.emit("change",[i.model._name,i.record,t.attr]),a)for(var r in t.oldRec)a[r]=t.oldRec[r];else{for(var n=0;n<t.attr.length;n++)r=t.attr[n],i.undoStack[r]=i.undoStack[r]||[],i.undoStack[r].push(t.oldRec[r]);i.undoStack._order_.push(t.attr)}},setValue:function(e,t,a,o,i,r,n){var s=e.model,l=s._pK,d=e.record;if(t!=s._pK){var p=s.fieldList[t],c=p&&p.opts?1==p.opts.watch:void 0;if(d.hasOwnProperty(t),d[t],!p)return void store.$.cmpSet(d,t,a,void 0,!0);if(!p.mandatory||null!=a&&null!=a&&""!==a){if(p.relType){var h,u,f=p.relType,y={},m=store.modelFor(p.relatedTo),g=m._pK,v=m._pK,b=m.isComp||m.fieldList[g].type,P=m.isComp,D=(g=m._pK,b=P?"object":m.fieldList[g].type,p&&p.opts?p.opts.polymorphic:void 0);if(this.getRelations(s,p.relKey,m,y),d[t]&&"hasMany"==f){if(h=[],d[t].forEach((function(e){h.push(e.$.pK)})),d[t]===a)return;if(Array.isArray(a)&&a.length===d[t].length){for(var _,L=a.length,C=0,w=0;w<L&&(_=a[w],Lyte.isRecord(_)?u=_:_&&(void 0===_?"undefined":_typeof(_))==b&&(u=store.peekRecord(_._type?_._type:p.relatedTo,_)),Lyte.isRecord(u)&&u===d[t][w]);w++)C++;if(C&&C==L)return}store.$.addOnSave(s._name,d,t,p,l,v),Array.from(d[t]).forEach((function(e){store.$.demolishLink(e,v,d,y.forward.relKey,void 0,void 0,void 0,!0),null!==y.backward&&store.$.demolishLink(d,s._pK,e,y.backward.relKey,y.forward)}))}else if(d[t]&&Lyte.isRecord(d[t])&&"belongsTo"==f){if(h=d[t].$.pK,Lyte.isRecord(a)?u=a:a&&(void 0===a?"undefined":_typeof(a))==b&&(u=store.peekRecord(a._type?a._type:p.relatedTo,a)),Lyte.isRecord(u)&&u===d[t])return;store.$.addOnSave(s._name,d,t,p,l,v);var T=d[t];store.$.demolishLink(T,v,d,y.forward.relKey,void 0,void 0,void 0,!0),null!==y.backward&&store.$.demolishLink(d,s._pK,T,y.backward.relKey,y.forward),store.$.cmpSet(d,t,{},o,!0)}if("hasMany"==f&&store.$.isEmpty(a)){var x=d[t]&&d[t].partial?d[t].partial:void 0;store.$.cmpSet(d,t,[],o,!0),x&&store.$.defProp(d[t],"partial",x),store.$.establishObserverBindings(d,d.$.model._properties),store.$.defArrUtls(d[t]),store.$.defPolyUtls(d[t]),store.$.defUtls(d[t],m,d,t)}if(Array.isArray(a)){if("belongsTo"==f)return this.revertToOldVal(d,t,h,y),void store.$.setRecErr(e,t,"ERR21",a)}else a=[a];var S=[];for(w=0;w<a.length;w++)if(!(this.isEmpty(a[w])||"belongsTo"==f&&this.isEmptyObj(a[w])||"hasMany"==f&&this.isEmptyArray(a[w]))){var A=a[w],E=a[w]&&a[w]._type?a[w]._type:p.relatedTo;if(!P&&a[w]&&_typeof(a[w])===b){if(null==(A=store.peekRecord(a[w]._type?a[w]._type:p.relatedTo,a[w])))this.addToRelate(s._name,d,y,a[w]);else if(A.$&&A.$.isError){S.push({code:"ERR15",message:Lyte.errorCodes.ERR15,error:Object.assign({},A)});continue}}else if(a[w]&&"object"==_typeof(a[w])){if(A.$&&A.$.isError){S.push({code:"ERR15",message:Lyte.errorCodes.ERR15,error:Object.assign({},A)});continue}if(!Lyte.isRecord(A)&&(D&&a[w]&&a[w]._type?A=store.peekRecord(a[w]._type,store.$.getpKVal(a[w],store.modelFor(a[w]._type))):P&&(A=store.peekRecord(a[w]._type?a[w]._type:p.relatedTo,a[w]))||(A=this.newRecord(E,a[w],o?o.skipValidation:void 0)),A.$.isError)){S.push({code:"ERR15",data:a[w],message:Lyte.errorCodes.ERR15,error:Object.assign({},A)});continue}}1!=(R=this.establishLink(y.forward,y.backward,d,A,void 0,!!r||void 0))?S.push({code:R,data:a[w],message:Lyte.errorCodes[R]}):store.$.addOnSave(s._name,d,t,p,l,v)}if(S.length&&S.length==a.length)return this.revertToOldVal(d,t,h,y),void("belongsTo"==p.relType?store.$.setRecErr(e,t,S[0]):store.$.setRecErr(e,t,S));if(S.length>1?store.$.setRecErr(e,t,S):store.$.clrRecErr(e,t),!r){var M=d.$._attributes;M.hasOwnProperty(t)||(M[t]=[]),M[t].push({_type:"changed",records:h}),i.emit=!0,i.attr.push(t);var $={};$.records=h,$._type="update",i.oldRec[t]=$;var k=d.$.getInitialValues(t),R=!0;if(k&&Array.isArray(d[t])&&k.length==d[t].length)for(R=!1,w=0;w<k.length;w++)if(!store.$.comparePk(d[t][w],k[w])){R=!0;break}R||delete M[t]}}else if(a!==d[t]){if(!o||o&&!0!==o.skipValidation){(B=p).any&&Array.isArray(B)||(B=[B]);var O=B.length,F=!0;for(w=0;w<O;w++){var N=B[w];for(var I in N)!0!==(U=Lyte.checkProperty(I,a,t,N[I],N,d,void 0,s._name))&&!0===F&&("object"==(void 0===U?"undefined":_typeof(U))&&(U.value=a),F=U)}if(!0!==F)return void store.$.setRecErr(e,t,F)}r?(c&&/^(array|object)$/.test(p.type)&&Lyte.establishObjectBinding(d,t,!0),store.$.cmpSet(d,t,a,o,!0)):store.$.estAttrs(d,t,a,i,n,o)}else if(a===d[t]&&d.$.isError&&d.$.error[t]){var B,H=!0;for((B=p).any&&Array.isArray(B)||(B=[B]),O=B.length,F=!0,w=0;w<O;w++)for(var I in N=B[w]){var U;!0!==(U=Lyte.checkProperty(I,a,t,N[I],N,d,void 0,s._name))&&(F=!1)}!0!==F&&(H=!1),H&&store.$.clrRecErr(e,t)}}else store.$.setRecErr(e,t,{code:"ERR02",message:Lyte.errorCodes.ERR02,value:a});store.$.checkAttrs(d)}else d[t]!==a&&store.$.setRecErr(e,t,"ERR01",a)},estAttrs:function(e,t,a,o,i,r){var n=e.$._attributes,s=e.$.model,l=n[t],d=n.hasOwnProperty(t);d?(i&&Lyte.cmpData(d?l:i.data,e[t])||a&&"object"==(void 0===a?"undefined":_typeof(a))&&!i&&store.adapter.$.compareObjects(l,a)||l==a)&&delete n[t]:n[t]=i?i.data:this.createCopy(e[t]);var p=e.hasOwnProperty(t),c=i?i.data:e[t];if(!i){var h={};s._properties&&s._properties.hasOwnProperty(t)&&(h[t]=s._properties[t],store.$.demoLishObserverBindings(e,h)),store.$.cmpSet(e,t,a,r,!0)}store.$.clrRecErr(e.$,t),e.$.srtObs&&store.$.changeRelPkMaps(e,void 0,void 0,"sort",t);var u={_type:"update"};u.val=c,p||(u._type="propAdd"),o.emit=!0,o.attr.push(t),o.oldRec[t]=u},checkAttrs:function(e){var t=e.$.model;Object.keys(e.$._attributes).length?(store.$.cmpSet(e.$,"isModified",!0),store.$.changePersist(e,!1),store.$.addDeepNest(e),this.checkAndAddToArray(t.dirty,e.$.pK)):(store.$.cmpSet(e.$,"isModified",!1),store.$.changePersist(e,!0),e.$.isNew||e.$.hasOwnProperty("dN")&&(!e.$.dN||Object.keys(e.$.dN).length)||store.$.removeParentNesting(e),e.$.isNew||this.deleteFromArray(t.dirty,e.$.pK))},checkForCorrectRelation:function(e,t){var a=e.relatedTo;return!!(Lyte.isRecord(t)&&(e.opts&&e.opts.polymorphic?t.$.model.extend&&e.relatedTo===t.$.model.extend:e&&t&&a===t.$.model._name))},removeKeys:function(e,t){for(var a in t)if(e.hasOwnProperty(a)){var o=e[a];("belongsTo"===o.type||"hasMany"===o.type&&t[a])&&this.removeNotDefinedKeys(o.relatedTo,t[a],!(!o.opts||!o.opts.polymorphic)||void 0)}else delete t[a]},removeNotDefinedKeys:function(e,t,a){var o=e.fieldList;if(Array.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];this.removeKeys(a&&Lyte.isRecord(r)?r.$.model.fieldList:o,r)}else this.removeKeys(a&&Lyte.isRecord(t)?t.$.model.fieldList:o,t)},add:function(e,t,a,o){var i,r=this.record,n=r.$.model,s=this.key,l=n.fieldList[s],d={};store.$.getRelations(n,l.relKey,store.modelFor(l.relatedTo),d),Array.isArray(e)||(e=[e]);var p=store.modelFor(d.forward.relatedTo),c=p._pK,h=[],u=[],f=p.isComp;r.$._attributes.hasOwnProperty(s)&&r.$._attributes[s].length&&(i=r.$.getInitialValues(s));for(var y=0;y<e.length;y++){var m=e[y];if(f&&"object"==(void 0===m?"undefined":_typeof(m))&&Object.keys(m).length===p._arrPk.length){if(this.polymorphic&&!t){h.push({code:"ERR22",data:e[y],message:Lyte.errorCodes.ERR22});continue}m=store.peekRecord(t||d.forward.relatedTo,m)}if(!f&&p.fieldList[c].type.toLowerCase()==(void 0===m?"undefined":_typeof(m))||f&&"object"==(void 0===m?"undefined":_typeof(m))&&Object.keys(m).length===p._arrPk.length){if(this.polymorphic&&!t){h.push({code:"ERR22",data:e[y],message:Lyte.errorCodes.ERR22});continue}m=store.peekRecord(t||d.forward.relatedTo,m)}else"object"!=(void 0===m?"undefined":_typeof(m))||Lyte.isRecord(m)||(m=store.$.newRecord(m._type?m._type:t||l.relatedTo,m,a?a.skipValidation:void 0));var g=this.polymorphic&&t?t:m&&m._type?m._type:void 0;if(null==m)h.push({code:"ERR13",data:e[y],message:Lyte.errorCodes.ERR13});else if(m.$&&m.$.isError)h.push({code:"ERR15",data:e[y],message:Lyte.errorCodes.ERR15,error:m});else if(Lyte.isRecord(m)&&!store.$.hasDuplicateRelation(m,r[s],c,g,p)){var v=store.$.establishLink(d.forward,d.backward,r,m);1!=v?h.push({code:v,data:e[y],message:Lyte.errorCodes[v]}):u.push(m)}}if(u.length){var b=r.$._attributes;b[s]?store.$.hasRecordsArrayChanged(r,s,i)?b[s].push({_type:"added",records:u}):(delete r.$._attributes[s],Object.keys(r.$._attributes).length||(store.$.cmpSet(r.$,"isModified",!1),store.$.changePersist(r,!0),delete b[s],r.$.isNew||(store.$.deleteFromArray(n.dirty,r.$.pK),(!r.$.dN||r.$.dN&&!Object.keys(r.$.dN).length)&&store.$.removeParentNesting(r)))):(b[s]=[{_type:"added",records:u}],store.$.cmpSet(r.$,"isModified",!0),store.$.changePersist(r,!1),store.$.checkAndAddToArray(n.dirty,r[n._pK])),store.$.emit("change",r,[s]);var P={_type:"added",records:u};o?o[s]=P:(r.$.undoStack[s]=r.$.undoStack[s]||[],r.$.undoStack[s].push(P),r.$.undoStack._order_.push([s]))}return h.length>0?store.$.setRecErr(r.$,s,h):store.$.clrRecErr(r.$,s),r},remove:function(e,t,a){var o,i=this.record,r=i.$.model,n=this.key,s=r.fieldList[n],l={};store.$.getRelations(r,s.relKey,store.modelFor(s.relatedTo),l),Array.isArray(e)||(e=[e]);var d,p=store.modelFor(l.forward.relatedTo),c=p._pK,h=p.isComp,u=[],f=[],y=[];i.$._attributes.hasOwnProperty(n)&&i.$._attributes[n].length&&(o=i.$.getInitialValues(n));for(var m=0;m<e.length;m++){var g,v=e[m];if(!h&&p.fieldList[c].type.toLowerCase()==_typeof(e[m])||h&&"object"==(void 0===v?"undefined":_typeof(v))&&Object.keys(v).length===p._arrPk.length){if(1==this.polymorphic&&!t){u.push({code:"ERR22",data:e[m],message:Lyte.errorCodes.ERR22});continue}d=store.peekRecord(t||l.forward.relatedTo,e[m]),g=t}else Lyte.isRecord(e[m])&&(d=e[m],g=t||(d&&d._type?d._type:void 0));if(d){var b=store.$.getIndex(i[n],c,d.$.get(c),g);store.$.demolishLink(d,c,store.peekRecord(r._name,i.$.pK),l.forward.relKey,void 0,void 0,void 0,!0),null!=l.backward&&store.$.demolishLink(i,r._pK,store.peekRecord(g||l.forward.relatedTo,d.$.pK),l.backward.relKey,l.forward),f.push(d),y.push(b)}}if(f.length){var P=i.$._attributes;P[n]?store.$.hasRecordsArrayChanged(i,n,o)?P[n].push({_type:"removed",records:f,_indices:y}):(delete i.$._attributes[n],Object.keys(i.$._attributes).length||(store.$.cmpSet(i.$,"isModified",!1),store.$.changePersist(i,!0),delete P[n],i.$.isNew||(store.$.deleteFromArray(r.dirty,i.$.pK),(!i.$.dN||i.$.dN&&!Object.keys(i.$.dN).length)&&store.$.removeParentNesting(i)))):(P[n]=[{_type:"removed",records:f,_indices:y}],store.$.cmpSet(i.$,"isModified",!0),store.$.changePersist(i,!1),store.$.checkAndAddToArray(r.dirty,i[r._pK])),store.$.emit("change",i,[n]);var D={_type:"removed",records:f,_indices:y};a?a[n]=D:(i.$.undoStack[n]=i.$.undoStack[n]||[],i.$.undoStack[n].push(D),i.$.undoStack._order_.push([n]))}u.length>0?store.$.setRecErr(i.$,n,u):store.$.clrRecErr(i.$,n)},filter:function(e,t,a){var o=0;for(var i in t)e[i]===t[i]&&o++;if(o===a)return!0},filterBy:function(e){for(var t=Object.keys(e).length,a=[],o=0;o<this.length;o++)store.$.filter(this[o],e,t)&&a.push(this[o]);return a.filterBy||(store.$.defArrUtls(a),store.$.defUtls(a,this.model)),a},idbSerialize:function(e,t,a,o,i,r){var n=t.forward.relatedTo,s=a._pK,l=o._pK;Array.isArray(e)?e.forEach((function(a,d){Lyte.isRecord(a)&&a.$.inIDB||store.$.checkPresenceInArray(store.$.recStack[n],a[l])?e[d]=a[l]:(store.$.removeBackwardRel(a,t,s,i,!0),store.$.removeSelfCircularReference(o._name,a,r))})):e&&Lyte.isRecord(e)&&(Lyte.isRecord(e)&&e.$.inIDB||this.checkPresenceInArray(store.$.recStack[n],e[l])?e[t.relKey]=e[l]:(this.removeBackwardRel(e,t,s,i,!0),this.removeSelfCircularReference(o._name,e,r)))},idSerialize:function(e,t,a,o,i){var r=t.forward.opts?t.forward.opts.polymorphic:void 0,n=t.forward.relKey,s=e[n=t.forward.relKey],l=store.model[t.backward.relatedTo],d=store.model[t.forward.relatedTo],p=store.$.getpKVal(e,l);if(Array.isArray(s))if(r)e[n]=this.polymorphicToJSON(t.forward,s);else{var c=[];if(o)var h=o[n]=o[n]||[];s.forEach((function(e){if(e.$&&e.$.isNew&&1!=a&&"state"!=a)store.$.rSerialize(e,t,d,l._pK,p,a,h,i),c.push(e);else{if(h){var o={},r="related";e.$.isDeleted&&(r="removed"),store.$.defProp(o,"$",{});var n=o.$,s=t.forward.relatedTo;Object.defineProperties(n,{pkVal:{value:e.$.pK},type:{value:r},model:{value:s},record:{value:store.peekRecord(s,e.$.pK)}}),e.$.isDeleted&&(o.$.onlyDetach=!0),h.push(o)}e.$&&!e.$.isDeleted&&c.push(e.$.pK&&"object"==_typeof(e.$.pK)?Object.assign({},e.$.pK):e.$.pK)}})),e[n]=c}else s&&Lyte.isRecord(s)&&(s.$.isNew&&1!=a&&"state"!=a?(o&&(h=o[n]=o[n]||{}),h=store.$.rSerialize(s,t,d,l._pK,p,a,h,i),o[n]=h):r?e[n]=this.polymorphicToJSON(t.forward,s):s.$.isDeleted||(e[n]=s.$.pK&&"object"==_typeof(s.$.pK)?Object.assign({},s.$.pK):s.$.pK))},recordSerialize:function(e,t,a,o,i,r,n,s,l,d){var p=i._pK;if(Array.isArray(a)){if(0==a.length)return delete e[t],0;a=Array.from(a);for(var c=l[t]=l[t]||[],h=0;h<a.length;h++)a[h]&&Lyte.isRecord(a[h])&&(this.rSerialize(a[h],o,r,p,n,s,c,d),a[h].$.isDeleted&&(c[h]&&c[h].$&&(c[h].$.onlyDetach=!0),a.splice(h,1),h--))}else a&&Lyte.isRecord(a)&&(c=l[t]=l[t]||{},c=this.rSerialize(a,o,r,p,n,s,c,d),l[t]=c)},rSerialize:function(e,t,a,o,i,r,n,s){var l=t.forward.relatedTo,d=(store.model[t.backward.relatedTo],t.forward.opts?t.forward.opts.polymorphic:void 0);if(this.removeBackwardRel(e,t,o,i),n){var p,c={},h=e.$.isNew?"added":e.$.isModified?"modified":e.$.isDeleted?"removed":"related";d&&(p=e.$.model._name,e.$.polymorphicType=p,a=store.model[p]),store.$.defProp(c,"$",{});var u=c.$,f=d?p:l;Object.defineProperties(u,{pkVal:{value:e.$.pK},type:{value:h},model:{value:f},record:{value:store.peekRecord(f,e.$.pK)}}),Array.isArray(n)&&n.push(c)}return this.removeSelfCircularReference(a._name,e,r,void 0,c,s),c},partialSerialize:function(e,t,a,o,i,r,n,s,l,d){var p=o.forward,c=i._pK,h=o.forward.relatedTo,u=o.forward.opts?o.forward.opts.polymorphic:void 0;if("hasMany"==p.relType)if(a&&a.partial){var f=a.partial,y=r._pK;if(l&&(L=l[t]=l[t]||[],store.$.defProp(L,"partial",!0)),f){var m,g,v=[],b=this;f.forEach((function(e,t){if(g=t,/^(added|modified)$/.test((m=e).type)){var i="related",l=store.$.getIndex(a,y,g,void 0,store.model[h]);if(-1!=l){var p,f,P,D=a[l];D&&D.$&&(f=Object.assign({},D.$),D=Object.assign({},D),store.$.defProp(D,"$",f)),p=D,u&&D&&(P=D._type?D._type:D.$.model._name,r=store.model[P]);var _=store.peekRecord(r._name,g);if(b.removeBackwardRel(D,o,c,n),D.$.isNew)i="added";else if(D.$.isModified){i="modified";var C=store.$.isDirty(_,r.relations);p=store.$.updateJSON(D,r,C)}else C=store.$.isDirty(_,r.relations),p=store.$.updateJSON(D,r,C);if(L){var w={};store.$.defProp(w,"$",{});var T=w.$,x=u?P:h;Object.defineProperties(T,{pkVal:{value:g},type:{value:i},model:{value:u?P:h},record:{value:store.peekRecord(x,g)}}),L.push(w)}b.removeSelfCircularReference(r._name,p,s,void 0,w,d),Lyte.isRecord(p)?p.$.partialType=m.type:(store.$.defProp(p,"$",{}),store.$.defProp(p.$,"partialType",m.type),p.$.hasOwnProperty("pK")||store.$.defProp(p.$,"pK",g)),u&&(p.$.polymorphicType=P),v.push(p)}}else if("removed"==m.type){var S={};if(g&&"object"==(void 0===g?"undefined":_typeof(g))?Object.assign(S,Object.assign({},g)):S[y]=g,_=store.peekRecord(r._name,g)||store.peekRecord(r._name,g,!0),L){if(w={},store.$.defProp(w,"$",{}),T=w.$,Object.defineProperties(T,{pkVal:{value:g},type:{value:"removed"},model:{value:u&&m.polymorphicType?m.polymorphicType:h},record:{value:_}}),d){var A="rec"+ ++d.size;S[d.refKey]=A,d.set(A,w)}L.push(w)}store.$.defProp(S,"$",{}),S.$.partialType="removed",u&&m.polymorphicType&&(S.$.polymorphicType=m.polymorphicType),S.$.hasOwnProperty("pK")||(S.$.pK=g),v.push(S)}})),v.length?a=e[t]=v:delete e[t]}}else delete e[t];else if("belongsTo"==p.relType&&a&&Lyte.isRecord(a)){var P;u&&a&&(P=a._type?a._type:a.$.model._name,r=store.model[P]),this.removeBackwardRel(a,o,c,n);var D,_=a;if(a.$.isNew?this.removeBackwardRel(a,o,c,n):(D=store.$.isDirty(a,r.relations),_=store.$.updateJSON(a,r,D)),l){var L=l[t]=l[t]||{},C=a.$.isNew?"added":a.$.isModified?"modified":"related";store.$.defProp(L,"$",{});var w=L.$,T=u?P:h;Object.defineProperties(w,{pkVal:{value:a.$.pK},type:{value:C},model:{value:T},record:{value:store.peekRecord(T,a.$.pK)}})}u&&(_.$||store.$.defProp(_,"$",{}),_.$.polymorphicType=P),this.removeSelfCircularReference(r._name,_,s,void 0,L,d),a=e[t]=_}},removeSelfCircularReference:function(e,t,a,o,i,r,n){var s=store.model[e],l=s.fieldList,d=(s.extend,store.$.getpKVal(t,s));store.$.recStack[e]=store.$.recStack[e]||[],store.$.checkAndAddToArray(store.$.recStack[e],d);var p,c=store.peekRecord(e,d),h=Lyte.isRecord(c)?c.$.partial:void 0,u=t&&t.$?t.$.polymorphicType:void 0,f=new Map;if(f.set(t,d),r){p="rec"+ ++r.size;var y={};store.$.defProp(y,"$",{pkVal:c.$.pK,model:c.$.model._name}),r.set(p,y)}var m=store.$.getFromCB("serializer",e,"serializeEmptyRelation");for(var g in t){var v,b,P,D,_,L=l[g],C=!1;if(("create"==o||Lyte.isRecord(t)&&t.$.isNew)&&s._pK==g&&1!=a)delete t[g];else if(L)if(L&&"relation"!=L.type&&!a&&Lyte.Transform[L.type]&&Lyte.Transform[L.type].serialize&&t.hasOwnProperty(g))t[g]=Lyte.Transform[L.type].serialize(t[g],g,c);else{if(h&&h.hasOwnProperty(g)){var w={},T=store.model[L.relatedTo]._pK,x=!1;if(h[g].forEach((function(e,a){if(w[T]=a,store.$.defProp(w,"$",{}),store.$.defProp(w.$,"partialType","removed"),store.$.defProp(w.$,"pK",a),i){var o=i[g]=i[g]||{};store.$.defProp(o,"$",{});var r=o.$;Object.defineProperties(r,{pkVal:{value:a},type:{value:"removed"},model:{value:L.relatedTo},parent:{value:c},record:{value:store.peekRecord(L.relatedTo,a)}})}(!0===m||Array.isArray(m)&&m.indexOf(L.relKey))&&L.opts&&/^(id|record)$/.test(L.opts.serialize)?(t[g]=null,x=!0):"partial"==L.opts.serialize&&(t[g]=w,x=!0)})),x)continue}if(1!=a&&"state"!=a||!t[g]||"object"!=_typeof(t[g])||!L||"relation"==L.type){if(t[g]&&L&&"relation"==L.type){if(b=L.relatedTo,D=L.relType,_=!(!L.opts||!L.opts.inherit),null==(P=store.modelFor(b)))continue;var S=L.relKey,A={};C?this.getRelations(v,L.relKey,P,A):this.getRelations(s,S,P,A);var E=L.opts,M=E?E.serialize:void 0,$=t[S];if("idb"==a)store.$.idbSerialize($,A,s,P,d,a);else if(n&&_)store.$.toChildJSON(b,D,t[g],g,e,f,e+"_"+d),"belongsTo"==D&&(t[g][store.modelFor(b)._pK]==d&&b==e&&delete t[g],t[g]=Object.assign({},t[g]));else if(a&&!n||n&&!_||"id"==M)store.$.idSerialize(t,A,a,i,r);else if("record"===M){if(0==store.$.recordSerialize(t,g,$,A,s,P,d,a,i,r)&&"hasMany"===D&&(!0===m||Array.isArray(m)&&m.indexOf(L.relKey))&&Array.isArray(c[g])&&c[g].partial&&c[g].partial.size){var k=!0;if(c[g].partial.forEach((function(e){"removed"!==e.type&&(k=!1)})),k){t[g]=[];continue}}}else{if("partial"!==M){delete t[S];continue}store.$.partialSerialize(t,g,$,A,s,P,d,a,i,r)}(($=t?t[S]:void 0)&&"hasMany"==D&&Array.isArray($)&&0==$.length||"belongsTo"==D&&"object"==(void 0===$?"undefined":_typeof($))&&0==Object.keys($).length)&&((!0===m||Array.isArray(m)&&m.indexOf(L.relKey))&&"hasMany"==D&&L.opts&&/^(id|record)$/.test(L.opts.serialize)?t[S]=[]:delete t[S])}}else t[g]=Lyte.deepCopyObject(t[g])}else u&&(v=store.modelFor(u),L=v.fieldList[g],C=!0),delete t[g]}if(r){var R=r.refKey;t[R]=p}},removeBackwardRel:function(e,t,a,o,i){if(i)delete e[t.backward.relKey];else if(null!=t.backward){var r=e[t.backward.relKey];if(Array.isArray(r)){for(var n=0;n<r.length;n++)if(this.comparePk(r[n],o))return r.splice(n,1),void(0==r.length&&delete e[t.backward.relKey])}else r&&Lyte.isRecord(r)&&this.comparePk(r,o)&&delete e[t.backward.relKey]}},polymorphicToJSON:function(e,t){var a=e.opts;if(a&&a.polymorphic){if(Array.isArray(t)){var o=[];return t.forEach((function(e){o.push(store.$.polyToJSON(e))})),o}return store.$.polyToJSON(t)}},polyToJSON:function(e){var t=e.$.model;!t.hasOwnProperty("fieldList")&&t._name&&(t=store.model[t._name]);var a=t?t._pK:void 0,o={},i=e.$.pK;return"object"==(void 0===i?"undefined":_typeof(i))?o=Object.assign({},i):o[a]=i,o._type=e._type?e._type:e.$.model._name,o},toChildJSON:function(e,t,a,o,i,r,n){var s=store.modelFor(e),l=s.fieldList,d={};Array.isArray(a)||(a=[a]);for(var p=0;p<a.length;p++){if(!r.get(a[p])){var c=store.$.getpKVal(a[p],s);r.set(a[p],c)}for(var h in s.relations)for(var u=0;u<s.relations[h].length;u++){var f=s.relations[h][u].relKey?s.relations[h][u].relKey:void 0;if(f&&l[f]&&"relation"==l[f].type&&a[p][l[f].relKey])if(a[p][l[f].relKey]&&l[f].opts&&l[f].opts.inherit){if("hasMany"==l[f].relType&&a[p][l[f].relKey])for(var y=0;y<a[p][l[f].relKey].length;y++)c=store.$.getpKVal(a[p][l[f].relKey][y],store.modelFor(l[f].relatedTo)),r.get(a[p][l[f].relKey][y])?Lyte.isRecord(a[p][l[f].relKey][y])&&r.get(a[p][l[f].relKey][y])&&(a[p][l[f].relKey][y]="object"==(void 0===c?"undefined":_typeof(c))?c:_defineProperty({},store.modelFor(l[f].relatedTo)._pK,c)):(r.set(a[p][l[f].relKey][y],c),store.$.toChildJSON(l[f].relatedTo,l[f].relType,a[p][l[f].relKey][y],l[f].relKey,l[f].relatedTo,r,n),"object"==_typeof(a[p][l[f].relKey][y])&&(a[p][l[f].relKey][y]=Object.assign({},a[p][l[f].relKey][y])));else"belongsTo"==l[f].relType&&a[p][l[f].relKey]&&(c=store.$.getpKVal(a[p][l[f].relKey],store.modelFor(l[f].relatedTo)),r.get(a[p][l[f].relKey])?a[p][l[f].relKey]="object"==(void 0===c?"undefined":_typeof(c))?c:_defineProperty({},store.modelFor(l[f].relatedTo)._pK,c):(r.set(a[p][l[f].relKey],c),store.$.toChildJSON(l[f].relatedTo,l[f].relType,a[p][l[f].relKey],l[f].relKey,l[f].relatedTo,r,n),a[p][l[f].relKey]=Object.assign({},a[p][l[f].relKey])));0==Object.keys(a[p][l[f].relKey]).length&&delete a[p][l[f].relKey]}else(Lyte.isRecord(a[p][l[f].relKey])||"hasMany"==l[f].relType&&Lyte.isRecord(a[p][l[f].relKey][0]))&&(this.getRelations(s,l[f].relKey,store.modelFor(l[f].relatedTo),d),store.$.idSerialize(a[p],d,!0))}Lyte.isRecord(a[p])&&(a[p]=Object.assign({},a[p]))}},toJSONObj:function(e,t,a,o,i,r){var n,s,l=e._name,d=(e._pK,e._fldGrps.inherit&&Object.keys(e._fldGrps.inherit).length);if(n=1!=a&&"state"!=a||r&&(!r||d)?Lyte.deepCopyObject(t):Object.assign({},t),Lyte.isRecord(n))s=n.$.pK;else{if(!store.$.getpKVal(n,e))return;if(!store.peekRecord(l,store.$.getpKVal(n,e)))return;s=store.peekRecord(l,store.$.getpKVal(n,e)).$.pK}var p,c=i?i.obj:void 0;return c&&!c.has(s)&&(c.set(s,{}),p=c.get(s)),this.removeSelfCircularReference(l,n,a,o,p,i&&i.ref?i.ref:void 0,r),"idb"==a&&this.removeNotNeededKeys(l,n,e.idb),n},toJSON:function(e,t,a,o,i,r){var n,s=store.model[e];if(store.$.recStack={},Array.isArray(t)){for(var l=[],d=0;d<t.length;d++)n=this.toJSONObj(s,t[d],a,o,i,r),l.push(n);return l}return t&&("object"===(void 0===t?"undefined":_typeof(t))||Lyte.isRecord(t))&&(n=this.toJSONObj(s,t,a,o,i,r)),store.$.recStack={},n},createCopy:function(e){if(Array.isArray(e)){if(e.save){for(var t=[],a=0;a<e.length;a++){var o=Lyte.deepCopyObject(e[a]);t.push(o)}return t}}else if(e&&(Lyte.isRecord(e)||"object"==(void 0===e?"undefined":_typeof(e))))return Lyte.deepCopyObject(e);return e},compareRecords:function(e,t,a,o,i){if(a=i._arrPk,Lyte.isRecord(e)&&Lyte.isRecord(t)&&a.length){if(o&&e._type&&o!==e._type)return!1;for(var r=a.length,n=0;n<r;n++){var s=a[n];if(e[s]&&t[s]&&e[s]!==t[s])return!1}return!0}return!1},hasRecordInArray:function(e,t,a,o,i){if(Lyte.isRecord(t)&&a)for(var r=e.length,n=0;n<r;n++){var s=e[n];if(!o||s._type===o)if(i){if(this.compareRecords(s,t,a,void 0,t.$.model))return!0}else if(o&&s._type&&o===t._type&&s[a]===t[a]||s[a]===t[a])return!0}return!1},hasDuplicateRelation:function(e,t,a,o,i){var r=i.isComp;return Array.isArray(t)?r||t.isPolymorphic||!t._recMap?this.hasRecordInArray(t,e,a,o,r):t._recMap.get(e[a]):!(!t||!Lyte.isRecord(t))&&this.compareRecords(e,t,a,o,i)},checkPresenceInArray:function(e,t){return e&&e.some((function(e){return e===t}))},checkAndAddToArray:function(e,t){if(this.checkPresenceInArray(e,t))return-1;e.push(t)},deleteFromArray:function(e,t){var a=e.indexOf(t);-1!=a&&e.splice(a,1)},genPk:function(e,t,a){var o;e.forEach((function(e){o=a[e].type;var i=t[e]=Math.floor(1e5*Math.random()+1);"string"==o&&(t[e]=i.toString())}))},generateRandomPk:function(e,t,a,o){for(this.genPk(a,t,o);this.isDuplicateRecord(e,t,a.toString());)this.genPk(a,t,o)},pkPresence:function(e,t){var a=!0;return t.forEach((function(t){e.hasOwnProperty(t)&&e[t]||(a=!1)})),a},newRecord:function(e,t,a){var o=store.modelFor(e);if(void 0===o)return Lyte.warn("LD02","Model",e),new error1(void 0,void 0,Lyte.getErrorMessage("LD02","Model",e));if(void 0===t&&(t={}),t&&"object"!==(void 0===t?"undefined":_typeof(t)))return Lyte.warn("LD25",t),new error1(void 0,void 0,Lyte.getErrorMessage("LD25",t));var i=o.fieldList,r={},n=new error1,s=o._arrPk;for(var l in this.pkPresence(t,s)?this.isDuplicateRecord(o,t,s)&&store.$.setError(n,s,{code:"ERR16",message:Lyte.errorCodes.ERR16}):this.generateRandomPk(o,t,s,i),i){"hasMany"==(w=i[l]).relType&&(r[l]=[]);var d=t[l];if("relation"!=w.type&&(void 0!==d&&""!==d||w.hasOwnProperty("default")&&(d=r[l]=store.$.getDefaultVal(r,w.default)),!a)){var p=w;p.any&&Array.isArray(p)||(p=[p]);for(var c=p.length,h=!0,u=0;u<c;u++){var f=p[u];for(var y in f)1!=(C=Lyte.checkProperty(y,d,l,f[y],f,t,r,e))&&!0===h&&("object"==(void 0===C?"undefined":_typeof(C))&&(C.value=d),h=C)}!0!==h&&store.$.setError(n,l,h)}}for(var m in t)r[m]=t[m];r=new Record(e,r),store.$.cmpSet(r.$,"isNew",!0),store.$.changePersist(r,!1);var g=o.relations;for(var v in g){var b=g[v];for(u=0;u<b.length;u++){var P=b[u],D=P.relKey,_=P.opts?P.opts.polymorphic:void 0;if(r&&r[D]){var L=t[D];r[D]=void 0;var C,w=b[u],T={};if(1!=(C=this.getRelations(o,w.relKey,store.modelFor(w.relatedTo),T))){store.$.setError(n,w.relKey,{code:C,data:b,message:Lyte.errorCodes[C]});continue}var x=store.modelFor(w.relatedTo),S=x._pK,A=x.isComp,E=A?void 0:x.fieldList[x._pK].type;if(Array.isArray(L)){if("belongsTo"==b[u].relType){store.$.setError(n,w.relKey,{code:"ERR21",data:L,message:Lyte.errorCodes.ERR21});continue}}else L=[L];n[w.relKey]=[];for(var M=0;M<L.length;M++){var $=void 0,k=w.relatedTo;if(L[M]&&Lyte.isRecord(L[M]))$=L[M];else if(A&&"object"==_typeof(L[M])){var R;if(-1!=(R=store.$.getIndex(x.data,S,store.$.getpKVal(L[M],x))))$=x.data[R];else{if(_){if(!L[M]||!L[M].hasOwnProperty("_type")){store.$.setError(n,w.relKey,{code:"ERR22",data:L[M],message:Lyte.errorCodes.ERR22});continue}k=L[M]._type}$=this.newRecord(k,L[M])}}else if(L[M]&&_typeof(L[M])==E.toLowerCase())$=store.peekRecord(k,L[M]);else if(L[M]&&"object"==_typeof(L[M])){if(_){if(!L[M]||!L[M].hasOwnProperty("_type")){store.$.setError(n,w.relKey,{code:"ERR22",data:L[M],message:Lyte.errorCodes.ERR22});continue}k=L[M]._type}$=this.newRecord(k,L[M])}$&&$.$&&$.$.isError?store.$.setError(n,w.relKey,{code:"ERR15",data:L[M],message:Lyte.errorCodes.ERR15,error:Object.assign({},$)}):$&&$.$&&!$.$.isError&&1!=(C=this.establishLink(T.forward,T.backward,r,$,void 0,!1))&&store.$.setError(n,w.relKey,{code:C,data:L[M],message:Lyte.errorCodes[C]})}if(0==n[w.relKey].length&&delete n[w.relKey],"hasMany"==b[u].relType){var O=D;null==r[O]&&(r[O]=[]),r[O].add||(_&&store.$.defProp(r[O],"polymorphic",!0),store.$.defArrUtls(r[O]),store.$.defUtls(r[O],store.modelFor(b[u].relatedTo),r,O),store.$.defPolyUtls(r[O]))}}}}if(n&&n.$&&Object.keys(n.$.error).length>0)return n;var F=store.$.toRelate[o._name],N=r.$.pK;if(F&&F.has(N)&&(store.$.establishToRelated(r,F.get(N)),F.delete(N)),o.didLoad){var I=o.didLoad;for(u=0;u<I.length;u++)I[u].apply(r)}return this.handleArrOp(o.data,"push",r),this.checkAndAddToArray(o.dirty,r.$.pK),o.emit("add",[r]),store.emit("add",[o._name,r]),a&&(r.$.validatedOnCreate=!1),r},toInsertData:function(e,t,a){var o=store.model[e],i=this.insertIntoStore(e,t[e],a,!0,void 0);return o&&delete o.rel,i},insertIntoStore:function(e,t,a,o,i,r,n){var s;if(Array.isArray(t)){s=[];for(var l=0;l<t.length;l++)s[l]=this.insertIntoStore(e,t[l],a,o,i),s[l]&&s[l].$&&s[l].$.isError&&(s.$=s.$||store.$.defProp(s,"$",{}),store.$.cmpSet(s.$,"isError",!0))}else if(t&&"object"==(void 0===t?"undefined":_typeof(t))&&Object.keys(t).length){var d=store.modelFor(e);if(t._type&&d.extendedBy&&(d=d.extendedBy[t._type]?store.modelFor(t._type):void 0),Lyte.isRecord(t))return;if(n&&t&&d){var p=d.relations;for(var c in p)p[c].forEach((function(e){var a=e.relKey,o=e.relType;if("hasMany"==o&&t.hasOwnProperty(a)&&Array.isArray(t[a])&&t[a].length){var i=[];t[a].forEach((function(e){Lyte.isRecord(e)?i.push(e.$.pK):i.push(e)})),t[a]=i}else"belongsTo"==o&&t.hasOwnProperty(a)&&Lyte.isRecord(t[a])&&(t[a]=t[a].$.pK)}))}if(this.isDuplicateRecord(d,t,d._pK))(s=this.validateAndMerge(d,t,i))&&s.data?s=s.data:s&&s.type&&Lyte[s.type].apply(Lyte,s.args||[]);else{var h=new Record(d._name,t);d.data.push(h);var u=store.$.toRelate[d._name],f=h.$.pK;a&&(store.$.saveParent=h),s=this.validateAndPush(d,h,i),u&&u.has(f)&&(store.$.establishToRelated(h,u.get(f)),u.delete(f))}a&&(store.$.saveParent=void 0),o&&(store.$.recStack={})}return s},removeFromStore:function(e,t,a,o,i,r){var n=e.data,s=e._name;if(0!=n.length){Array.isArray(t)||(t=[t]);for(var l=e._pK,d=0;d<t.length;d++){var p=this.getIndex(n,l,t[d]);if(-1!=p){var c,h=n[p],u=h.$.pK,f=e.relations;if(h.$.isNew&&(r=i=void 0,a=!0),Object.keys(f).length&&this.toDemolishRelation(e,p,o,r,i),!0!==i&&!1!==r&&(c=this.handleArrOp(n,"removeAt",void 0,p,1),e.emit("remove",[c[0]]),store.emit("remove",[e._name,c[0]]),e._properties&&store.$.demoLishObserverBindings(h,e._properties)),!0===a){store.$.cmpSet(h.$,"isUnloaded",!0);var y=h.$.__scpObj;for(var m in y){var g=y[m].split("_"),v=Lyte.nestScp[g[0]];v&&Lyte.removeNestScp(v._data,g[0],g[1],void 0,h,void 0,void 0,{model:s,pK:h.$.pK,attr:m})}if((P=store.model.cachedQueries)&&(D=P[s])&&D.length)for(var b=D.length-1;b>=0;b--)(L=D[b]).hasDeletedRecords&&L.data&&-1!==(C=L.data[s].indexOf(h))&&D.splice(b,1)}if(1!=r){var P,D,_=c?c[0]:h;if(!a&&(store.$.cmpSet(_.$,"isDeleted",!0),store.$.changePersist(_,!0),!0!==i&&!1!==r&&(_.$.isNew||_.$.isModified)&&store.$.deleteFromArray(e.dirty,_.$.pK),_.$.isNew||store.$.addTo_Del(e,_,p),P=store.model.cachedQueries))if((D=P[s])&&D.length)for(b=D.length-1;b>=0;b--){var L,C;(L=D[b])&&L.data&&-1!=(C=L.data[s].indexOf(h))&&(L.hasDeletedRecords=!0)}Array.isArray(e.dirty)&&-1!=(C=e.dirty.indexOf(u))&&e.dirty.splice(C,1)}}}}},getIndex:function(e,t,a,o,i){return(i?i.isComp:t.split(",").length>1)?this.getCompInd(e,a,o,i):this.getInd(e,t,a,o)},getCompInd:function(e,t,a,o){for(var i=0;e&&i<e.length;i++){var r=e[i];if((!a||e[i]._type===a)&&store.adapter.$.compareObjects(store.$.getpKVal(r,o),t))return i}return-1},getInd:function(e,t,a,o){for(var i=0;e&&i<e.length;i++){var r=e[i];if((!o||r._type===o)&&r[t]==a)return i}return-1},isDuplicateRecord:function(e,t){var a=e.data,o=e._pK,i=e.isComposite;if(a.length){if(!i&&e.data._recMap){var r=t[o];return void 0!==e.data._recMap.get(r?r.toString():r)}return a.some((function(a){if(store.adapter.$.compareObjects(store.$.getpKVal(t,e),store.$.getpKVal(a)))return!0}))}return!1},validateAndPush:function(e,t,a){e.rel||(e.rel={});for(var o=e._arrPk,i=o.length,r=0;r<i;r++){var n=o[r];if(!t.hasOwnProperty(n))return l=e.data.indexOf(t),e.data.splice(l,1),new error1(n,{code:"ERR23",data:t,message:Lyte.errorCodes.ERR23});if(null==t[n]||null==t[n])return l=e.data.indexOf(t),e.data.splice(l,1),new error1(n,{code:"ERR26",data:t,message:Lyte.errorCodes.ERR26})}var s=null==t.$.pK||"object"==_typeof(t.$.pK)?t.$.pK:t.$.pK.toString();e.data._recMap.set(s,t),t=this.validateJSON(e,t,void 0,void 0,a);var l=e.data.indexOf(t);if(e.data.splice(l,1),this.handleArrOp(e.data,"push",t),e.didLoad){var d=e.didLoad;for(r=0;r<d.length;r++)d[r].apply(t)}return e.emit("add",[t]),store.emit("add",[e._name,t]),t},validateAndMerge:function(e,t,a,o){if(e.rel||(e.rel={}),void 0===store.$.getpKVal(t,e))return{type:"error",args:["LD28",e._name,Lyte.isRecord(t)?t:JSON.stringify(t)]};var i=store.peekRecord(e._name,store.$.getpKVal(t,e));if(!i||!Lyte.isRecord(i))return{type:"error",args:["LD04",Lyte.isRecord(t)?t:JSON.stringify(t)]};if(this.mergeData(i,t,a,o),e.didLoad)for(var r=e.didLoad,n=0;n<r.length;n++)r[n].apply(i);return{data:i}},mergeData:function(e,t,a,o){if(e&&t){var i,r=e.$.model,n=!1;for(var s in o&&store.adapter.$.mergeError(r,e,t),t)if(i=r.fieldList[s]){if("relation"!=i.type){var l=store.$.getDsrzEmpData(i,r._name),d=!l&&t[s];t.hasOwnProperty(s)&&(d||l)&&Lyte.Transform.hasOwnProperty(i.type)&&Lyte.Transform[i.type].hasOwnProperty("deserialize")&&(t[s]=Lyte.Transform[i.type].deserialize(t[s],s,r._name,store.$.getpKVal(t,r)));var p={};r._properties&&r._properties.hasOwnProperty(s)&&(p[s]=r._properties[s],store.$.demoLishObserverBindings(e,p)),store.$.cmpSet(e,s,t[s],void 0,!0),r._properties&&r._properties.hasOwnProperty(s)&&(n=!0)}else if(i&&"relation"==i.type){var c={},h={};store.$.getRelations(e.$.model,s,store.modelFor(i.relatedTo),h);var u=store.model[h.forward.relatedTo],f=this.compareRelations(e,t,s,i,a?a[s]:void 0,c,o);this.mergeRecords(c,f,r,u,e,s,t,h,a,o)}}else"$"!=s&&store.$.cmpSet(e,s,t[s],void 0,!0);n&&store.$.establishObserverBindings(e,r._properties)}},mergeRecords:function(e,t,a,o,i,r,n,s,l,d){s||(s={},store.$.getRelations(a,r,o,s));var p=a._pK;if("hasMany"==s.forward.relType&&store.$.isEmptyArray(n[r])&&(store.$.cmpSet(i,r,[],void 0,!0),store.$.establishObserverBindings(i,i.$.model._properties),store.$.defArrUtls(i[r]),store.$.defPolyUtls(i[r]),store.$.defUtls(i[r],o,i,r)),Array.isArray(e.add)&&e.add.forEach((function(e){store.$.createAndRelate(a,o,i,r,e,s,l)})),Array.isArray(e.remove)&&e.remove.forEach((function(e){var t=e.pK,a=e.model;store.$.demolishLink(i,p,store.peekRecord(a,t),s.backward.relKey,s.forward,s.backward,!0),store.$.demolishLink(store.peekRecord(a,t),store.modelFor(a)._pK,i,s.forward.relKey,s.backward,s.forward,!0)})),i&&i.hasOwnProperty(r)&&(store.$.deleteDeepNest(i,r),Array.isArray(i[r])&&i[r].hasOwnProperty("partial"))){var c=[];i[r].partial.forEach((function(e,t){c.push(t),i[r].partial.delete(t)}))}switch(t){case 0:Lyte.isRecord(i[r])&&(store.$.demolishLink(i,p,i[r],s.backward.relKey,s.forward,s.backward,!0),store.$.demolishLink(i[r],o._pK,i,s.forward.relKey,s.backward,s.forward,!0)),store.$.createAndRelate(a,o,i,r,n[r],s,l);break;case 1:break;case 2:this.mergeData(i[r],n[r],void 0,d)}},compareRelations:function(e,t,a,o,i,r,n){var s=store.modelFor(o.relatedTo),l=s._pK;if("belongsTo"==o.relType)return i&&"removed"===i.$.type&&(!t||t&&store.$.comparePk(e,store.$.getpKVal(t,s)))?1:this.compareRecordWithObj(e[a],t[a],l,i,n);var d=!1;if(i&&i.partial&&(d=!0),!d&&(!e.hasOwnProperty(a)||e&&e.hasOwnProperty(a)&&(store.$.isEmpty(e[a])||store.$.isEmptyArray(e[a]))))return r?void(t[a]||[]).forEach((function(e){(r.add=r.add||[]).push(e)})):0;for(var p=t[a]?t[a].length:0,c=[],h=0;h<p;h++){var u=t[a][h];if(!i||!i[h]||"removed"!=i[h].$.type){var f=this.getIndex(e[a],l,"object"==(void 0===u?"undefined":_typeof(u))?store.$.getpKVal(u,s):u);if(-1!=f){c.push(e[a][f].$.pK);var y=this.compareRecordWithObj(e[a][f],u,l,i?i[h]:void 0,n);2==y&&this.mergeData(e[a][f],u,i?i[h]:void 0,n)}else r&&(r.add=r.add||[]).push(u)}}r&&!d&&(e[a]||[]).forEach((function(e){var t=e.$.pK;-1==c.indexOf(t)&&(r.remove=r.remove||[]).push({pK:t,model:e.$.model._name})}))},compareRecordWithObj:function(e,t,a,o,i){if(!e||!Lyte.isRecord(e))return 0;var r=e.$.model,n=(r._pK,r.isComp),s=r.fieldList;if(!n){var l=r.fieldList[a];if((void 0===t?"undefined":_typeof(t))==l.type)return e[a]==t?1:0}if(t&&"object"==(void 0===t?"undefined":_typeof(t))){if(!store.$.comparePk(e,store.$.getpKVal(t,r)))return 0;for(var d in t)if(l=s[d]){if("relation"==l.type){var p={},c=this.compareRelations(e,t,d,l,o?o[d]:void 0,p,i);this.mergeRecords(p,c,r,store.modelFor(l.relatedTo),e,d,t,void 0,o)}else if(e[d]!=t[d])return 2}else if(e[d]!=t[d])return 2;return 1}return 0},validateJSON:function(e,t,a,o,i){var r=o?o.toValidate:void 0,n=r&&Object.keys(r).length?r:e.fieldList,s=!!e.extend;for(var l in t)if(!a||-1!=a.indexOf(l)){var d=n[l];if(d){if("relation"==d.type&&t[l]){var p=o&&o.toPartialAdd?o.toPartialAdd[l]:void 0;if(1!=(m=this.handleRelation(l,e,d,t,p,i)))return new error1(l,{code:m,data:t,message:Lyte.errorCodes[m]});"hasMany"!=d.relType||t[l].add||(store.$.defArrUtls(t[l]),store.$.defPolyUtls(t[l]),store.$.defUtls(t[l],store.model[d.relatedTo],t,l))}else if(d.type){var c=d;void 0===t[l]&&c.default&&(t[l]=store.$.getDefaultVal(t,c.default));var h=store.$.getDsrzEmpData(d,e._name),u=!h&&t[l];t.hasOwnProperty(l)&&(u||h)&&Lyte.Transform.hasOwnProperty(c.type)&&Lyte.Transform[c.type].hasOwnProperty("deserialize")&&(t[l]=Lyte.Transform[c.type].deserialize(t[l],l,e._name,store.$.getpKVal(t,e)))}}else if(s){var f=store.modelFor(e.extend),y=f.fieldList[l];if(y&&"relation"==y.type){var m;if(p=o&&o.toPartialAdd?o.toPartialAdd[l]:void 0,1!=(m=this.handleRelation(l,f,y,t,p)))return new error1(l,{code:m,data:t,message:Lyte.errorCodes[m]});"hasMany"!=y.relType||t[l].add||(store.$.defArrUtls(t[l]),store.$.defPolyUtls(t[l]),store.$.defUtls(t[l],f,t,l))}}}return t},handleRelation:function(e,t,a,o,i,r){var n={};if(t.rel.hasOwnProperty(e))n=t.rel[e];else{var s=this.getRelations(t,e,store.modelFor(a.relatedTo),n);if(!0!==s)return s;t.rel[e]=n}return this.solveRelation(n,t,store.modelFor(a.relatedTo),e,o,i,r)},getRelations:function(e,t,a,o){if(null==a)return Lyte.error("LD05",e.fieldList[t].relatedTo,t,e._name),"ERR11";if(o.forward=e.fieldList[t],o.backward=this.getBackwardRel(e,o.forward,a),void 0===o.backward){var i={type:"relation",relatedTo:e._name,dummy:o.forward.relKey,relKey:void 0};a.relations[e._name]=a.relations[e._name]||[],a.relations[e._name].push(i),o.backward=i}return!0},getBackwardRel:function(e,t,a){var o,i,r;if(t.opts){if(o=t.opts.inverse,i=t.opts.polymorphic,null===o)return;if(i){var n=a.extendedBy;if(n)for(var s in n){var l=store.modelFor(s);if(l.relations[e._name]){a=l;break}}}}if(o&&""!=o)r=o;else{var d,p=a.relations[e._name],c=store.modelFor(e.extend);!p&&c&&a.relations[c._name]&&(p=a.relations[c._name],d=!0),r=!p||1!=p.length||p[0].opts&&p[0].opts.inverse&&p[0].opts.inverse!==t.relKey||d&&!(d&&p[0].opts&&p[0].opts.polymorphic)?void 0:p[0].relKey}if(!r){var h=a.relations[e._name],u=store.modelFor(e.extend);if(!h&&u&&a.relations[u._name]&&a.relations[u._name].opts&&a.relations[u._name].opts.polymorphic&&(h=a.relations[u._name]),t.dummy&&h){for(var f=0;f<h.length;f++)if(h[f]&&h[f].relKey&&h[f].relKey==t.dummy){r=h[f].relKey;break}}else if(h)for(f=0;f<h.length;f++){if(h[f]&&h[f].opts&&h[f].opts.inverse&&h[f].opts.inverse===t.relKey){r=h[f].relKey;break}if(h[f]&&h[f].dummy&&h[f].dummy==t.relKey){r=h[f];break}}}return r&&r.dummy?r:r&&e._fldGrps.inverse.hasOwnProperty(t.relatedTo)&&!t.dummy&&r&&e.relations[t.relatedTo]&&e.relations[t.relatedTo].length>1&&!o&&(!a.fieldList[r].opts||a.fieldList[r].opts&&!a.fieldList[r].opts.inverse)?void 0:r&&a?a.fieldList[r]:void 0},solveRelation:function(e,t,a,o,i,r,n){e.backward;var s=e.forward,l=n?n[o]:void 0,d=l&&l.partial,p=(t._pK,[]);if(r)p=r;else if(d)Array.isArray(i[o])&&(p=i[o].splice(0,i[o].length));else{if(i[o]&&(i[o].add||Lyte.isRecord(i[o])))return!0;if(Array.isArray(i[o])){if("belongsTo"==s.relType)return"ERR21"}else i[o]=[i[o]];p=i[o].splice(0,i[o].length),"belongsTo"==s.relType&&(i[o]=void 0)}for(var c=0;c<p.length;c++){var h;if(1!=(h=this.createAndRelate(t,a,i,o,p[c],e,l)))return h}return!0},createAndRelate:function(e,t,a,o,i,r,n){if(!r.backward&&(r.forward.relatedTo===e._name&&(r.backward=r.forward),void 0===r.backward))return"ERR12";var s,l=e._pK,d=t.isComp,p=r.forward&&r.forward.opts?r.forward.opts.polymorphic:void 0,c=n&&n.hasOwnProperty(i[l])?n[i[l]]:n;if(d||(void 0===i?"undefined":_typeof(i))!=t.fieldList[t._pK].type?"object"!=(void 0===i?"undefined":_typeof(i))||Lyte.isRecord(i)||(s=this.insertIntoStore(t._name,i,void 0,void 0,c)):s=store.peekRecord(t._name,i),s&&s.$&&s.$.isError){store.$.cmpSet(a.$,"isError",!0);var h={code:"ERR24",message:Lyte.errorCodes.ERR24,data:a,error:s.$.error};store.$.cmpSet(a.$.error,o,h)}else s?this.hasDuplicateRelation(s,a[o],t._pK,p?i._type:void 0,t)||this.establishLink(r.forward,r.backward,a,s,void 0,!0,!1):this.addToRelate(e._name,a,r,i);return!0},singleEstablishLink:function(e,t,a){var o=a.$._relationships,i=t.$.model._name,r=e.relKey;o[i]=o[i]||{},o[i][r]=o[i][r]||[],this.hasDuplicateRelation(t,o[i][r],t.$.model._pK,void 0,t.$.model)||o[i][r].push(t)},establishLink:function(e,t,a,o,i,r,n){if(!o)return"ERR13";if(!this.checkForCorrectRelation(e,o))return"ERR14";var s=e.relKey,l=e.opts&&e.opts.polymorphic,d=l?o._type:void 0,p={};if("belongsTo"==e.relType)a[s]!==o&&store.$.cmpSet(a,s,o,void 0,!0),a.$.partial&&Object.keys(a.$.partial).length&&a.$.partial[s]&&delete a.$.partial[s];else if("hasMany"===e.relType){if(a[s]||store.$.cmpSet(a,s,[],void 0,!0),!a[s].model){var c=o.$.model;l&&d&&(store.$.defProp(a[s],"polymorphic",!0),c=store.modelFor(c.extend)),store.$.establishObserverBindings(a,a.$.model._properties),store.$.defArrUtls(a[s]),store.$.defPolyUtls(a[s]),store.$.defUtls(a[s],c,a,s)}var h,u=e?store.modelFor(e.relatedTo):void 0;0!=n&&this.hasDuplicateRelation(o,a[s],e?u._pK:void 0,d,u)||(null!=i?this.handleArrOp(a[s],"insertAt",o,i):this.handleArrOp(a[s],"push",o)),!r&&e.opts&&e.opts.serialize&&(h=store.$.partialData(a,s,o.$.pK,"added"),p.relKey=s,p.model=a.$.model._name)}var f=!1;if(r||(f=!h),e==t)return this.singleEstablishLink(e,a,o),!0;if(null===t)return o.hasOwnProperty(y)&&delete o[y],!0;if(t.dummy)this.singleEstablishLink(e,a,o);else{var y=t.relKey,m=o.$.model;if(!this.checkForCorrectRelation(t,a))return"ERR14";if("belongsTo"==t.relType)null!=o[y]&&o[t.relKey]!==a&&this.toDemolishLink(m,o,t,r),o[y]!==a&&store.$.cmpSet(o,y,a,void 0,!0),o.$.partial&&Object.keys(o.$.partial).length&&o.$.partial[y]&&delete o.$.partial[y];else if("hasMany"===t.relType){o[y]||store.$.cmpSet(o,y,[],void 0,!0),o[y].model||(store.$.defArrUtls(o[y]),store.$.defPolyUtls(o[y]),store.$.defUtls(o[y],a.$.model,o,y));var g,v,b=t?store.modelFor(t.relatedTo):void 0;this.hasDuplicateRelation(a,o[y],t?b._pK:void 0,d,b)||this.handleArrOp(o[y],"push",a),!r&&t.opts&&t.opts.serialize&&(g=store.$.partialData(o,y,a.$.pK,"added")),r||(v=!g)}}return f&&(e.opts&&e.opts&&e.opts.deepNest&&(store.$.setDeepNest(a,e.relKey,o.$.pK,"added"),v=!1),v&&t&&t.opts&&t.opts.deepNest&&store.$.setDeepNest(o,t.relKey,a.$.pK,"added")),!0},toDemolishRelation:function(e,t,a,o,i){var r=e.data[t],n=e.relations;for(var s in n)for(var l=n[s],d=0;d<l.length;d++){var p=l[d],c=store.modelFor(p.relatedTo);if(c){var h=c._pK,u=p.relKey;if(e._name==c._name){var f,y=c.data;for(f=0;f<y.length;f++){var m=y[f];if(Array.isArray(m[u]))for(var g=0;g<m[u].length;g++)m[u][g][h]==r[h]&&!1!==o&&this.handleArrOp(m[u],"removeAt",void 0,g,1);else Lyte.isRecord(m[u])&&m[u][h]==r[h]&&!1!==o&&(m[u]=void 0)}}if(!r[p.relKey]&&!p.dummy)continue;this.toDemolishLink(e,r,p,a,o,i)}}},toDemolishLink:function(e,t,a,o,i,r){var n=t[a.relKey],s=e._pK,l=store.modelFor(a.relatedTo);if(l){l._pK,a.relatedTo;var d=this.getBackwardRel(e,a,l);if(a.opts&&a.opts.serialize,a.dummy&&(n=this.getRelatedRecord(t,a.relatedTo,a.dummy)),d)if(Array.isArray(n))for(var p=0;p<n.length;p++)this.demolishLink(t,s,n[p],d.relKey,a,d,o,void 0,i,r);else Lyte.isRecord(n)&&this.demolishLink(t,s,n,d.relKey,a,d,o,void 0,i,r)}},demolishSingleRelation:function(e,t,a,o,i,r,n){var s,l;Lyte.isRecord(e)&&(s=e.$._relationships)&&s[t]&&s[t][a]&&!1!==r&&!0!==n&&(s=s[t][a],(l=this.getIndex(s,i,o[i]))>-1&&s.splice(l,1))},demolishLink:function(e,t,a,o,i,r,n,s,l,d){var p,c=a[o],h=a.$.model,u=e.$.pK,f=c?c.polymorphic:void 0;if(Array.isArray(c)){var y=this.getIndex(c,t,u,f?e._type:void 0),m=a.$._attributes,g=m.hasOwnProperty(o)&&m[o]&&m[o].length?a.$.getInitialValues(o):void 0,v=!(!c.partial||!c.partial.has(u)||"added"!=c.partial.get(u).type);-1!=y&&(v||!1!==l&&!0!==d)&&(f&&(p=c[y].$.model._name),this.handleArrOp(a[o],"removeAt",void 0,y,1)),!s&&g&&(store.$.hasRecordsArrayChanged(a,o,g)||(delete a.$._attributes[o],Object.keys(a.$._attributes).length||(store.$.cmpSet(a.$,"isModified",!1),store.$.changePersist(a,!0),a.$.isNew||(store.$.deleteFromArray(h.dirty,a[h._pK]),(!a.$.dN||a.$.dN&&!Object.keys(a.$.dN).length)&&store.$.removeParentNesting(a)))))}else c&&("object"==(void 0===c?"undefined":_typeof(c))||Lyte.isRecord(c))&&!1!==l&&!0!==d?null!=Lyte&&null!=Lyte.objectUtils?Lyte.objectUtils(a,"delete",o,void 0,void 0,!0):delete a[o]:this.demolishSingleRelation(a,e.$.model._name,i.relKey,e,t,l,d);if(r||(r=h.fieldList[o]),!n&&!0!==l){var b,P;if(r){r.opts&&(r.opts.serialize,P=!!r.opts.serialize,b=r.opts.deepNest);var D=r?r.relType:void 0}if("belongsTo"==D&&P&&!e.$.isNew){var _=a.$.partial=a.$.partial||{};(_=_[o]=_[o]||new Map).has(u)||_.set(u,{}),(_=_.get(u)).type="removed"}r&&r.opts&&r.opts.serialize&&(b=(!store.$.partialData(a,o,u,"removed",p)||"hasMany"!=D)&&b),b&&(store.$.makeDirty("dirty",a,"removed",r,u),store.$.addDeepNest(a))}},rllBckRecArr:function(e,t,a,o){var i={},r=a._pK,n=store.modelFor(o.relatedTo)._pK;store.$.getRelations(a,o.relKey,store.modelFor(o.relatedTo),i);for(var s=e.length-1;s>=0;s--){var l=e[s].records;if("added"==e[s]._type)for(var d=0;d<l.length;d++)(u=l[d])&&u.$&&u.$.hasOwnProperty("pK")&&(this.demolishLink(u,n,t,i.forward.relKey),null!=i.backward&&this.demolishLink(t,r,u,i.backward.relKey,i.forward));else if("removed"==e[s]._type)for(d=l.length-1;d>=0;d--)(u=l[d])&&u.$&&u.$.hasOwnProperty("pK")&&this.establishLink(i.forward,i.backward,t,u,e[s]._indices[d]);else if("changed"==e[s]._type){var p=t[o.relKey];Array.isArray(p)||(p=[p]);for(var c=p.length,h=0;h<c;h++)(u=p[0])&&u.$&&u.$.hasOwnProperty("pK")&&(this.demolishLink(u,n,t,i.forward.relKey),null!=i.backward&&this.demolishLink(t,r,u,i.backward.relKey,i.forward));for(Array.isArray(l)||(l=[l]),d=0;d<l.length;d++){var u;"string"==typeof(u=l[d])&&(u=store.peekRecord(i.forward.relatedTo,u)),u&&u.$&&u.$.hasOwnProperty("pK")&&this.establishLink(i.forward,i.backward,t,u,void 0)}}}},sortBy:function(e,t){var a=store.$.mapBy.call(this,e),o=this.model.fieldList[e];o&&"string"==o.type?(a.sort(),"desc"==t&&a.reverse()):(a.sort((function(e,t){return e-t})),"desc"==t&&a.sort((function(e,t){return t-e})));for(var i=this.slice(0),r=[],n=0;n<a.length;n++)if(null!=a[n]){var s=store.$.getIndex(i,e,a[n]);r.push(i[s]),i.splice(s,1)}return i.length>0&&(r="desc"==t?r.concat(i):i.concat(r)),store.$.defArrUtls(r),store.$.defUtls(r,this.model),r},mapBy:function(e){return this.map((function(t){return t.$.get(e)}))},revertToOldVal:function(e,t,a,o){if(null!=a&&0!=a.length){Array.isArray(a)||(a=[a]);for(var i=0;i<a.length;i++){var r=o.forward.relatedTo,n=store.peekRecord(r,a[i]);this.establishLink(o.forward,o.backward,e,n,void 0)}}},removePartial:function(e,t){var a=e.$.partial;a&&a[t]&&delete a[t]},findCurrentInd:function(e,t){var a,o,i=!1;return e._deleted.forEach((function(e,r){i&&e.index<a&&o--,r==t&&(i=!0,o=a=e.index)})),o},modifyDelInd:function(e,t){var a,o=!1;e._deleted.forEach((function(e,i){o&&e.index>=a&&(e.index=e.index+1),i==t&&(o=!0,a=e.index)}))},rollBackDelete:function(e,t,a){var o=[],i=e._name;if(t){var r=e._deleted.get(t),n=e._pK;o=[r]}else e._deleted.forEach((function(e){o.push(e)}));for(var s=this,l=o.length-1;l>=0;l--){var d=(r=o[l]).data,p=e.data._recMap?e.data._recMap.get(d.$.pK):-1!==e.data.indexOf(d);if(Lyte.isRecord(d)){store.$.cmpSet(d.$,"isDeleted",!1),store.$.changePersist(d,!0);var c=store.$.isDuplicateRecord(e,d);if(!p){a?s.handleArrOp(e.data,"insertAt",d,r.index):s.handleArrOp(e.data,"push",d),e.emit("add",[d]),store.emit("add",[e._name,d]);var h=e.relations;if(h)for(var u in h)(h[u]||[]).forEach((function(t){var a,o,i=t.relKey;if(d.hasOwnProperty(i)){o=store.modelFor(t.relatedTo),a=s.getBackwardRel(e,t,o);var r=d[i];Array.isArray(r)?r.forEach((function(e,o){s.establishLink(t,a,d,e,void 0,!0)})):s.establishLink(t,a,d,d[i],void 0,!0)}}))}var f=store.model.cachedQueries;if(f){var y=f[i];if(y&&y.length)for(var m=y.length-1;m>=0;m--)(r=y[m])&&r.hasDeletedRecords&&-1!=r.data[i].indexOf(d)&&delete r.hasDeletedRecords}(d.$.isNew||d.$.isModified)&&this.checkAndAddToArray(e.dirty,d[e._pK]),store.$.clrRecErr(d.$,n,"ERR17"),c||e.data._recMap.set("object"==_typeof(d.$.pK)?d.$.pK:d.$.pK.toString(),d),e._deleted.delete(d.$.pK)}}},rollBackNew:function(e,t,a){store.$.removeFromStore(e,t.$.pK,!0)},emit:function(e,t,a,o){t.$.emit(e,[t,a,o]),t.$.model.emit(e,[t,a,o]),store.emit(e,[t.$.model._name,t,a,o])},hasRecordsArrayChanged:function(e,t,a){var o=a||e.$.getInitialValues(t),i=!0;if(e.$.model._pK,o&&o.length==e[t].length){i=!1;for(var r=0;r<o.length;r++)if(-1==e[t].indexOf(o[r]))return!0}return i},setRecErr:function(e,t,a,o){store.$.cmpSet(e,"isError",!0);var i=a;"object"==(void 0===i?"undefined":_typeof(i))?store.$.cmpSet(e.error,t,i):("string"==typeof a&&(i=Lyte.errorCodes[a]?{code:a,message:Lyte.errorCodes[a]}:a),store.$.cmpSet(e.error,t,i),o&&store.$.cmpSet(e.error[t],"value",o)),store.$.emit("error",e.record,t,i)},clrRecErr:function(e,t,a){var o=Lyte.objectUtils,i=e.error;if(a)e.error.code==a&&(void 0!==o?o(i,"delete",t):delete i[t]);else if(t)void 0!==o?o(i,"delete",t):delete i[t];else if(void 0!==o)for(var r in i)o(i,"delete",r);else e.error={};0==Object.keys(e.error).length&&store.$.cmpSet(e,"isError",!1)},cacheQuery:function(e,t,a,o){var i=store.model.cachedQueries;(i=(i=store.model.cachedQueries=i||{})[e]=i[e]||[]).push({cacheQuery:t,data:a,status:o})},cacheRecordQuery:function(e,t,a,o,i){var r=store.model.cachedRecordQueries;(r=(r=(r=store.model.cachedRecordQueries=r||{})[e]=r[e]||{})[t]=r[t]||[]).push({cacheQuery:a,data:o,status:i})},isModelDataArray:function(e){if(Array.isArray(e)&&e.model&&e.model instanceof Model&&!e.polymorphic)return!0},handleArrOp:function(e,t,a,o,i){i=null!=i?i:0;var r,n,s=void 0!==Lyte.arrayUtils;if(e.key&&e.record){var l=e.record.$.model.fieldList[e.key],d=!1;l&&l.opts&&l.opts.sort&&(l.opts.sort.sortFn?(n=l.opts.sort.sortFn,l.opts.sort.observes&&(d=!0)):n={sortBy:l.opts.sort.sortBy,sortOrder:l.opts.sort.sortOrder})}switch(t){case"push":this.isModelDataArray(e)&&(null==e._recMap&&store.$.defProp(e,"_recMap",new Map),e._recMap.set("object"==_typeof(a.$.pK)?a.$.pK:a.$.pK.toString(),a)),r=n?s?Lyte.arrayUtils(e,"sort",n,[a]):e.push(a):s?Lyte.arrayUtils(e,t,a):e.push(a),d&&a&&a.$&&(a.$.hasOwnProperty("srtObs")||store.$.defProp(a.$,"srtObs",!0,!1,!0));break;case"removeAt":if(this.isModelDataArray(e))for(var p=i,c=0;c<p;c++){var h=e[o+c]?e[o+c].$.pK:void 0;(h="object"==(void 0===h?"undefined":_typeof(h))?h:h.toString())&&e._recMap&&e._recMap.delete(h)}var u=e[o];d&&u&&u.$&&!store.$.changeRelPkMaps(u,void 0,void 0,"srtObsChk",e.key)&&u.$.hasOwnProperty("srtObs")&&(u.$.srtObs=!1),r=s?Lyte.arrayUtils(e,t,o,i):e.splice(o,i);break;case"insertAt":this.isModelDataArray(e)&&(null==e._recMap&&store.$.defProp(e,"_recMap",new Map),e._recMap.set("object"==_typeof(a.$.pK)?a.$.pK:a.$.pK.toString(),a)),r=n?s?Lyte.arrayUtils(e,"sort",n,[a]):e.splice(o,i,a):s?Lyte.arrayUtils(e,t,o,a):e.splice(o,i,a),d&&a&&a.$&&(a.$.hasOwnProperty("srtObs")||store.$.defProp(a.$,"srtObs",!0,!1,!0));break;case"replaceAt":r=n?s?Lyte.arrayUtils(e,"sort",n,[a]):e.splice(o,i,a):s?Lyte.arrayUtils(e,t,o,a):e.splice(o,i,a),d&&a&&a.$&&(a.$.hasOwnProperty("srtObs")||store.$.defProp(a.$,"srtObs",!0,!1,!0));break;case"sort":r=Lyte.arrayUtils(e,"sort",n);break;default:Lyte.error("LD07",t)}return r},defpayObjUtls:function(e){Object.defineProperties(e,{set:{value:store.$.payloadSet},remove:{value:store.$.payloadRemove}})},defPayArrUtls:function(e){Object.defineProperties(e,{add:{value:store.$.payloadAdd},remove:{value:store.$.payloadRemove}})},defArrUtls:function(e){Object.defineProperties(e,{filterBy:{value:store.$.filterBy},sortBy:{value:store.$.sortBy},mapBy:{value:store.$.mapBy}})},defPolyUtls:function(e){Object.defineProperties(e,{add:{value:store.$.add},remove:{value:store.$.remove}})},defUtls:function(e,t,a,o){t&&store.$.defProp(e,"model",t),a&&store.$.defProp(e,"record",a,!1,!0),o&&store.$.defProp(e,"key",o)},defPar:function(e){store.$.defProp(e,"partial",new Map)},cmpSet:function(e,t,a,o,i){void 0!==Lyte.Component?Lyte.Component.set(e,t,a,o,i):e[t]=a},defProp:function(e,t,a,o,i){o=!!o,i=!!i,Object.defineProperty(e,t,{value:a,enumerable:o,writable:i})},removeChildRecords:function(e,t,a,o){var i=t?t.$.pK:void 0,r=[];for(var n in r.push(i),e.relations)for(var s=e.relations[n],l=0;l<s.length;l++){var d=s[l].relKey?s[l].relKey:void 0;if(t&&d&&e.fieldList[d]&&"relation"==e.fieldList[d].type&&e.fieldList[d].opts&&e.fieldList[d].opts.inherit&&e.fieldList[d].relKey){var p=store.$.getBackwardRel(e,e.fieldList[d],store.modelFor(e.fieldList[d].relatedTo));if(p&&p.relatedTo==o&&null==p.dummy)continue;if("belongsTo"==e.fieldList[d].relType&&t[e.fieldList[d].relKey])this.removeChildRecords(store.modelFor(e.fieldList[d].relatedTo),t[e.fieldList[d].relKey],a,e._name);else if("hasMany"==e.fieldList[d].relType&&t[e.fieldList[d].relKey])for(var c in t[e.fieldList[d].relKey])this.removeChildRecords(store.modelFor(e.fieldList[d].relatedTo),t[e.fieldList[d].relKey][c],a,e._name)}this.removeFromStore(e,r,!0,!0)}this.removeFromStore(e,r,!0,!0)},rBinherit:function(e,t){var a=e.record,o=e.model.relations;for(var i in o)for(var r=0;r<o[i].length;r++)if(o[i][r].opts&&o[i][r].opts.inherit&&o[i][r].relatedTo!=e.model._name&&a[o[i][r].relKey]){var n=store.modelFor(o[i][r].relatedTo)._pK;if("belongsTo"==o[i][r].relType)a[o[i][r].relKey]&&!t.get(o[i][r].relatedTo+"_"+a[o[i][r].relKey][n])&&(t.set(o[i][r].relatedTo+"_"+a[o[i][r].relKey][n],a[o[i][r].relKey][n]),this.rollBackRecord(a[o[i][r].relKey].$),store.$.rBinherit(a[o[i][r].relKey].$,t));else for(var s=0;s<a[o[i][r].relKey].length;s++)a[o[i][r].relKey][s]&&!t.get(o[i][r].relatedTo+"_"+a[o[i][r].relKey][s][n])&&(t.set(o[i][r].relatedTo+"_"+a[o[i][r].relKey][s][n],a[o[i][r].relKey][s][n]),this.rollBackRecord(a[o[i][r].relKey][s].$),store.$.rBinherit(a[o[i][r].relKey][s].$,t))}},rollBackRecord:function(e){var t=e.model,a=t._pK;e.isModified&&(e.rollBackAttributes(e.getDirtyAttributes()),delete e._savedState),e.isDeleted?store.$.rollBackDelete(t,e.get(a)):e.isNew?store.$.rollBackNew(t,e.record,a):e.isError&&store.$.clrRecErr(e),store.$.removeOnSave(e.model._name,e.record.$.pK)},buildVariables:function(e,t,a,o){for(var i in e=e||{},t){if(-1!=t[i].search(/!/g)&&!e[i]&&!a)return{LdEr:"LD30",LyteError:"ERR30",key:i};-1!=t[i].search(/!/g)&&(t[i]=t[i].replaceAll(/!/g,"")),a&&-1==t[i].search(/\./g)&&("ID"!=t[i]&&"ID!"!=t[i]||(e[i]=a));var r={LdEr:"LD31",LyteError:"ERR30",key:i};if(e&&e[i])switch(t[i]){case"Int":if("number"!=typeof e[i])return r;break;case"String":if("string"!=typeof e[i])return r;break;case"Float":if("number"!=typeof e[i])return r;break;case"Boolean":if("boolean"!=typeof e[i])return r;break;case"Object":if("object"!=_typeof(e[i]))return r}}for(var n in e)"string"!=typeof e[n]&&"object"!=_typeof(e[n])||(e[n]=store.$.LyteStringfy(e[n],""));return e},buildQuery:function(e,t,a,o,i,r,n,s,l,d){var p="",c=!1;for(var h in a)if("object"==_typeof(a[h])){if(p+=Object.keys(a)[0]+" ",n){for(var u in p+="( ",n)if(-1==u.search(/[.]/g)&&""==i)p+=u+":"+n[u]+" ";else if(""!=i&&-1!=u.search(/[.]/s)&&i==u.match(/.*(?=\..*$)/s)[0]){var f=u.split(".");p+=f[f.length-1]+":"+n[u]+" "}p=(p+=") ").replaceAll(/\([ ]*\)/g,"")}p+="{ ";for(var y=0;y<a[h].length;y++){var m=a[h][y];c=!1,l&&(c=!("string"!=typeof m||!l.includes(m)||""!=i)||!("object"!=(void 0===m?"undefined":_typeof(m))||!l.includes(Object.keys(m)[0])||""!=i)),c||("string"==typeof m?p=p+m+" ":(i=(i?i+".":"")+Object.keys(m)[0],p+=store.$.buildQuery(e,t,m,o,i,r,n,s,l,d),i=h==r?"":h))}p+=" } "}return p},QueryCallback:function(e,t,a,o,i,r,n,s,l){var d;if("object"==(void 0===o?"undefined":_typeof(o))){for(var p=Object.keys(o)[0],c=0;c<o[p].length;c++){var h=o[p][c];"object"==(void 0===h?"undefined":_typeof(h))&&store.modelFor(e).fieldList[Object.keys(h)[0]]&&store.modelFor(e).fieldList[Object.keys(h)[0]].relatedTo&&(d=store.modelFor(e).fieldList[Object.keys(h)[0]].relatedTo,store.$.QueryCallback(d,t,a,h,i,r,n,s,l))}var u=store.$.initCB("serializer",e,"serializeSelfQuery",{args:[e,t,l,o,i,r]});if(u){var f=u.data[Object.keys(o)[0]];o[Object.keys(o)[0]]=f}}},buildFields:function(e,t,a,o,i,r){var n=store.modelFor(e),s=n.fieldList,l=n.gql&&n.gql.localAttrs?n.gql.localAttrs:[];r?s=r:i.set(e,!0);var d={},p=[];for(var c in s)if(!l.includes(c)){if("relation"==s[c].type){if(store.modelFor(s[c].relatedTo)&&s[c].relatedTo!=o&&s[c].relatedTo!=e){var h=store.$.getBackwardRel(store.modelFor(e),s[c],store.modelFor(s[c].relatedTo));if(h&&h.relatedTo==t&&null==h.dummy)continue;i.has(s[c].relatedTo)||p.push(store.$.buildFields(s[c].relatedTo,s[c].relatedTo,c,o,i))}continue}"object"==s[c].type&&s[c].properties?p.push(store.$.buildFields(e,t,c,o,i,s[c].properties)):p.push(c)}return d[a]=p,i.delete(e),d},parseQuery:function(e,t,a,o,i,r,n,s,l,d,p){var c,h,u,f,y,m={},g={};"object"==(void 0===r?"undefined":_typeof(r))&&("variables"!=(y=Object.keys(r.query))[0]?y[0]:y[1],h=Object.assign({},r.query.variables),g["variables"!=y[0]?y[0]:y[1]]=Object.assign(r.query["variables"!=y[0]?y[0]:y[1]]),"object"==(void 0===g?"undefined":_typeof(g))&&(f=g));if("string"==typeof r&&-1!=r.search(/[ ]/g)){var v=r,b={};v=(v=(v=(v=(v=(v=(v=(v=(v=(v=(v=(v=(v=(v=(v=v.replaceAll(new RegExp("\n","g")," ")).replaceAll(/ *[ ]*\(/g,":{variables:[")).replaceAll(/ *\) *{/g,"],attrs:[")).replaceAll(/\w+/g,'"$&"')).replaceAll(/"!/g,'!"')).replaceAll(/" +"/g,'", "')).replaceAll(/\S+{"variables"/g,"{$&")).replaceAll(/} *"/g,'}, "')).replaceAll(/" *{/g,'" :{"attrs" :[')).replaceAll(/\} *\}/g,"]}}")).replaceAll(/" *}/g,'"]} }')).replaceAll(/]}}/g,"]}}]}}")).replaceAll(/]}}]}} *}/g,"]}}]}}]}}")).replaceAll(/} *{/g,"},{")).replaceAll(/\S+ *:{"attrs"/g,"{$&"),v=JSON.parse(v),f=store.$.buildQueryFields(v,b,"",Object.keys(v)[0]),h=b}if("object"==(void 0===f?"undefined":_typeof(f))){store.$.QueryCallback(e,a,e,f,n,f,h,o,s),i.query=f,n&&(i.variables=n);var P=Object.keys(h)[0];"Mutation"!=i.type||1!=Object.keys(h).length||"Object"!=h[P]&&"Object!"!=h[P]?i.variables:i.variables[P]=d;var D=store.$.initCB("serializer",e,"serializeGqlQuery",{args:[e,a,t,i,s,d,p]});if(D&&(f=D.data.query,D.data.variables&&(n=D.data.variables)),(u=store.$.buildVariables(n,h,t,s.type))&&u.LdEr)return u;s.gqlObj=i,c="{ "+(c=store.$.buildQuery(e,a,f,h,"",Object.keys(f)[0],0!=Object.keys(u).length?u:void 0,t,l,e))+" }"}return"Query"==i.type?m.query=c:m.query="mutation "+c,m},graphQlconfig:function(e,t,a,o,i,r,n,s,l){var d,p,c={},h=store.modelFor(e),u={},f=new Map,y=h.gql&&h.gql.localAttrs?h.gql.localAttrs:[];if("findAll"==a||"findRecord"==a){if(u.type="Query",void 0===(p=h.gql&&h.gql.query&&h.gql.query[i]?h.gql.query[i]:i)){var m=store.$.buildFields(e,null,e,e,f);(d={}).query=m,u.queryType="default"}else if("string"==typeof i&&-1!=i.search(/[ ]/g))d=i,u.queryType="query";else if("object"==(void 0===i?"undefined":_typeof(i)))d=i;else if("object"==(void 0===p?"undefined":_typeof(p)))d=p;else{if("string"!=typeof p||-1==p.search(/[ ]/g))return{LdEr:"LD32",LyteError:"ERR31",key:i};d=p,u.queryType="namedQuery",u.queryName=i}r=r?Object.assign({},r):void 0}else if(u.type="Mutation",p=h.gql&&h.gql.mutation&&h.gql.mutation[i]?h.gql.mutation[i]:i,"string"==typeof i&&-1!=i.search(/[ ]/g))d=i,u.mutationType="customMutation";else{if("string"!=typeof p||-1==p.search(/[ ]/g))return{LdEr:"LD32",LyteError:"ERR31",key:i};d=p,u.mutationType="namedMutation",u.MutationName=i}var g=store.$.parseQuery(e,t,a,o,u,d,r,n,y,s,l);return g.LdEr?g:(c.data=JSON.stringify(g),c.data)},setQuery:function(e,t,a,o){var i=e;i.gql?(i.gql[a]=i.gql[a]?i.gql[a]:{},i.gql[a][t]=i.gql[a][t]?i.gql[a][t]:{}):(i.gql={},i.gql[a]={},i.gql[a][t]={}),i.gql[a][t]=o},buildQueryFields:function(e,t,a,o){var i=Object.keys(e)[0],r=[],n={};if(e[i].variables)for(var s=0;s<e[i].variables.length;s+=2)t[(a?a+".":"")+e[i].variables[s]]=e[i].variables[s+1];for(var l=0;l<e[i].attrs.length;l++)"object"==_typeof(e[i].attrs[l])?(a=(a?a+".":"")+Object.keys(e[i].attrs[l])[0],r.push(this.buildQueryFields(e[i].attrs[l],t,a,o)),a=i!=o?i:""):r.push(e[i].attrs[l]);return n[i]=r,n},LyteStringfy:function(e,t,a){if("string"==typeof e)return'"'+e+'" ';if(Array.isArray(e)){t+="[";var o=0,i=e.length;e.forEach((function(a){o++,"string"==typeof a?t=t+'"'+a+'" ':"object"==(void 0===a?"undefined":_typeof(a))?t=store.$.LyteStringfy(a,t):"number"==typeof a&&(t+=e.toString()),t=o!=i?t+",":t})),t+="]"}else{if(!e||Array.isArray(e)||"object"!=(void 0===e?"undefined":_typeof(e)))return e.toString();t+="{";var r=0;for(var o in e)r++,"string"==typeof e[o]?t=t+o+' : "'+e[o]+'" ':"object"==_typeof(e[o])?(t=t+o+" : ",t=store.$.LyteStringfy(e[o],t)):t=t+o+" : "+e[o].toString(),Object.keys(e).length!=r&&(t+=", ");t+="}"}return t},cpdGql:function(e,t,a,o,i,r){o.gql&&("object"==_typeof(o.gql)?mutName=o.gql.mutation:1==o.gql&&(mutName=void 0),o.data=store.$.graphQlconfig(e,void 0,t,a,mutName,[],o,i,r))},payloadAdd:function(e,t){Array.isArray(e)||(e=[e]);for(var a=this._model,o=this._partialObj,i=this._payloadObj,r=0;r<e.length;r++){var n=store.peekRecord(a,e[r]),s={};store.$.defProp(s,"$",{});var l=s.$;Object.defineProperties(l,{pkVal:{value:n.$.pK},type:{value:"related"},model:{value:a},record:{value:n}});var d="object"==_typeof(n.$.pK)?n.$.pK:_defineProperty({},n.$.model._pK,n.$.pK);t?(Lyte.arrayUtils(o,"insertAt",t,s),Lyte.arrayUtils(i,"insertAt",t,_pK),t=t++):(Lyte.arrayUtils(o,"push",s),Lyte.arrayUtils(i,"push",d)),store.$.defProp(d,"$",{}),store.$.defpayObjUtls(d.$),Object.defineProperties(d.$,{_pkVal:{value:n.$.pK},_model:{value:a},_partialObj:{value:s},_payloadObj:{value:d}})}},payloadRemove:function(e){var t=this._model,a=this._partialObj,o=this._payloadObj;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)if(Array.isArray(o)){store.peekRecord(t,e[i]);for(var r=o.length,n=0;n<r;n++)a[n].$.pkVal==e&&(Lyte.arrayUtils(a,"removeAt",n,1),Lyte.arrayUtils(o,"removeAt",n,1))}else o[e]&&a[e]&&(Lyte.objectUtils(o,"delete",e[i]),Lyte.objectUtils(a,"delete",e[i]))},payloadSet:function(e){Array.isArray(e)||(e=[e]);var t=this._model,a=this._pkVal,o=store.modelFor(t),r=this._payloadObj,n=store.peekRecord(t,a),s=this._partialObj;for(i_key=0;i_key<e.length;i_key++){var l=e[i_key],d=o.fieldList[l];if(n[l]&&"relation"==d.type)if("hasMany"==d.relType)for(s[l]=[],r[l]=[],store.$.defProp(r[l],"$",{}),store.$.defPayArrUtls(r[l].$),Object.defineProperties(r[l].$,{_key:{value:d.relKey},_partialObj:{value:s[l]},_model:{value:d.relatedTo},_payloadObj:{value:r[l]}}),i=0;i<n[l].length;i++)r[l].$.add(n[l][i].$.pK);else{s[l]={},r[l]={},r[l]="object"==_typeof(n[l].$.pK)?n[l].$.pK:_defineProperty({},n[l].$.model._pK,n[l].$.pK),store.$.defProp(s[l],"$",{});var p=s[l].$;Object.defineProperties(p,{pkVal:{value:n.$.pK},type:{value:"related"},model:{value:t},record:{value:n[l]}}),store.$.defProp(r[l],"$",{}),Object.defineProperties(r[l].$,{_pkVal:{value:n[l].$.pK},_model:{value:d.relatedTo},_partialObj:{value:s[l]},_payloadObj:{value:r[l]}}),store.$.defpayObjUtls(r[l].$)}else r[l]=n[l],s[l]=n[l]}},replaceCheck:function(e){store.$.defProp(this._partialObj,"replace",e)}}};function Adapter(e,t,a){Object.defineProperty(this,"$lg",{value:Lyte.__gl}),store.$.newCB("adapter",this,a,e,t)}function Serializer(e,t,a){Object.defineProperty(this,"$lg",{value:Lyte.__gl}),store.$.newCB("serializer",this,a,e,t)}store.$.cbDef(Adapter,"adapter"),store.adapter={$:{buildURL:function(e,t,a,o,i,r,n,s,l,d){var p=store.adapter[a],c=store.$.getFromCB("adapter",a,"host"),h=(l=l||"",store.$.makeBatch);if(!l){h||void 0!==c&&(l+=c,"/"!=c[c.length-1]&&(l+="/"));var u={};if(d){u.method="POST",u.gql=d,t=u.method,l+=store.$.getFromCB("adapter",a,"gqlNamespace")||""}else{var f=store.$.getFromCB("adapter",a,"namespace");if(""!==f&&"/"!=f[f.length-1]?l+=f+"/":l+=f,"batch"!=e&&(l+=a,o&&"object"!=(void 0===o?"undefined":_typeof(o))&&(l+="/"+o)),"action"==e){l+="/"+store.$.getFromCB("adapter",a,"actionNamespace");var y=store.modelFor(a).actions;l+="/"+(y[n].endPoint?y[n].endPoint:n)}else"batch"==e&&(l+=store.$.getFromCB("adapter","application","batchNamespace"));u.method=t||""}}if(r||(r={}),(v=store.$.initCB("adapter",a,"headersForRequest",{args:[e,r,s,n,o]}))&&(u.headers=v.data),(v=store.$.initCB("adapter",a,"buildURL",{args:[a,e,r,i,l,n,s,o]}))&&(l=v.data),(v=store.$.initCB("adapter",a,"methodForRequest",{args:[t,e,r,s,n,o]}))&&(u.method=v.data),!h&&r&&Object.keys(r).length){l+="?";var m=0;for(var g in r){var v;0!==m&&(l+="&"),(v=r[g])&&"object"==(void 0===v?"undefined":_typeof(v))&&(v=JSON.stringify(v)),l+=g+"="+encodeURIComponent(v),m++}}return p&&1==p.withCredentials&&(u.withCredentials=!0),u.url=l,u.qP=r,u},get:function(e,t,a,o,i,r,n,s,l){var d,p=store.modelFor(t),c=store.$.makeBatch,h=l||s?{}:void 0;if(p){r=null==r?store.$.getFromCB("adapter",t,"customData"):r,s&&(h.query=s),l&&(h.variables=l),d=store.$.initCB("adapter",t,"gql",{args:[t,e,o,a,h,r]});var u=this.buildURL(e,"GET",t,a,void 0,o,void 0,r,void 0,d?d.data:void 0),f=this;if(o=u.qP,toCheckParams=i&&"boolean"!=typeof i?i:o&&"object"==(void 0===o?"undefined":_typeof(o))?o:void 0,u.gql&&("object"==_typeof(u.gql)?(s=u.gql.query,l=u.gql.variables):!0===u.gql&&(s=l=void 0),u.data=store.$.graphQlconfig(t,a,e,o,s,l,u),u.data.LdEr))return Lyte.warn(u.data.LdEr,u.data.key,t),Promise.reject({code:u.data.LyteError,message:Lyte.errorCodes[u.data.LyteError],data:u.data.key});if("findAll"==e&&toCheckParams&&store.model.cachedQueries&&store.model.cachedQueries[t]){for(var y=store.model.cachedQueries[t],m=0;m<y.length;m++){var g=y[m];if(!g.hasDeletedRecords){var v=g.cacheQuery;if(this.compareData(v,toCheckParams,!0)){b=[g.data,"cache",void 0,g.status];break}}}if(b)return new Promise((function(e){c&&store.$.addToCachedBatch(Array.isArray(b)?b[0][t]:b),e(b)}))}else if("findRecord"==e&&toCheckParams&&store.model.cachedRecordQueries&&store.model.cachedRecordQueries[t]&&store.model.cachedRecordQueries[t][a]){var b;for(y=store.model.cachedRecordQueries[t][a],m=0;m<y.length;m++)if(v=y[m].cacheQuery,this.compareData(v,toCheckParams,!0)){b=[y[m].data,"cache",void 0,y[m].status];break}if(b)return new Promise((function(e){c&&store.$.addToCachedBatch(Array.isArray(b)?b[0][t]:b),e(b)}))}else{var P=store.$.cbScp(t,"findRecord"==e?"reloadRecord":"reloadAll","adapter");if(P){var D,_=!1;if("findRecord"==e?(D=store.peekRecord(t,a),_=!!Lyte.isRecord(D)):"findAll"==e&&(_=!!(D=store.peekAll(t)).length),_&&!store.$.cB(P,[D,o,r,t])){var L={};return L[t]=D,new Promise((function(e){c&&store.$.addToCachedBatch(L[t]),e([L,"cache"],"success",void 0,!0)}))}}}if("POST"==u.method){var C=store.$.initCB("serializer",t,"serialize",{args:[e,u?u.data:void 0,void 0,r,t,o,void 0,u?u.gqlObj:void 0]});C&&(u.data=C.data,!u.data||"object"!=_typeof(u.data)&&!Lyte.isRecord(u.data)&&!Array.isArray(u.data)||u.data instanceof FormData||(u.data=JSON.stringify(u.data)))}return new Promise((function(s,l){var d,p=store.modelFor(t),h=store.$.getIDBObj(p,o,e,a,r),y=store.$.getFromCB("adapter",t,"processRequest"),m=!0,g=!1,v=[t,e,a,u,s,l,"get",void 0,r],b={cacheQuery:i,cacheData:n,customD:r};if(y){m=!1;var P=f.callGeneric(e,t,void 0,void 0,r,o,a,u.url,void 0,u.method,u.headers);P instanceof Promise?(g=!0,P.then((function(o){o=""==o?JSON.parse("{}"):JSON.parse(o),d=f.getResponse(o,t,e,a,u,void 0,r,b),s([d])}),(function(e){l(e)}))):m=!0}c&&!g?store.adapter.$.constructBatch.apply(store.adapter.$,v).then((function(o){var i=o.content;store.adapter.$.getSuccess(t,e,a,u,void 0,s,l,i,o,void 0,b)}),(function(o){store.adapter.$.getFailure(t,e,a,u,void 0,s,l,b,o.content,o.code)})):h?store.adapter.$.getFromIDB(h,t,e,o,a,u,r).then((function(i){var r=store.$.initCB("serializer",t,"idbResponse",{args:[t,e,o,a,i]});r&&(i=r.data),0==i?store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(o){store.adapter.$.getSuccess(t,e,a,u,o,s,l,void 0,void 0,void 0,b)}),(function(o){store.adapter.$.getFailure(t,e,a,u,o,s,l,b)})):store.adapter.$.getSuccess(t,e,a,u,void 0,s,l,i,void 0,"idb",b)}),(function(o){store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(o){store.adapter.$.getSuccess(t,e,a,u,o,s,l,void 0,void 0,void 0,b)}),(function(o){store.adapter.$.getFailure(t,e,a,u,o,s,l,b)}))})):m&&store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(o){store.adapter.$.getSuccess(t,e,a,u,o,s,l,void 0,void 0,void 0,b)}),(function(o){store.adapter.$.getFailure(t,e,a,u,o,s,l,b)}))}))}return Lyte.warn("LD02","Model",t),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:t})},constructBatch:function(e,t,a,o){return new Promise((function(e,t){var a=store.$.currentBatch,i=store.$.batch[a]=store.$.batch[a]||[],r=store.$.batchPromise[a]=store.$.batchPromise[a]||[],n={};n.method=o.method,n.uri="/"+o.url,n.parameters=o.qP,n.content="string"==typeof o.data?JSON.parse(o.data):void 0,i.push(n),r.push({resolve:e,reject:t})}))},getFromIDB:function(e,t,a,o,i,r,n){return new Promise((function(r,s){var l=e.queryCache?"getCachedData":"findAll"==a?"getAll":"get",d={resolve:r,reject:s,type:l,model:t,req:a,key:i};"getCachedData"==l&&(d.queryParams=o),d.queryCache=e.queryCache,d.customData=n,LyteIDB.postMessage(d)}))},sendXHR:function(e,t,a,o,i,r,n,s,l){var d=new XMLHttpRequest,p=new Promise((function(i,r){for(var n in d.open(o.method,o.url,!0),o.headers)d.setRequestHeader(n,o.headers[n]);d.withCredentials=!!o.withCredentials,store.$.initCB("adapter",e,"parseRequest",{args:[t,e,d,o?o.qP:void 0,a,l]}),store.emit("beforeRequest",[d,e,t,a,o.qP]),d.send(o.data),d.onreadystatechange=function(){if(4==d.readyState)return store.emit("afterRequest",[d,e,t,a,o.qP]),"2"==d.status.toString()[0]||"3"==d.status.toString()[0]?i(d):r(d)}}));return p.xhr=d,p},getSuccess:function(e,t,a,o,i,r,n,s,l,d,p){var c,h,u=s,f=i,y=p.customD;if(i&&i.status,"idb"!=d){if(f&&(u=(u=f.responseText)&&0!=u.length?JSON.parse(u):JSON.parse("{}")),l&&(c=l.index,h=l.batch,f=l.resp),f){var m=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,f,u,o?o.qP:void 0,a,y,p]});if(m&&(u=m.data),u instanceof Promise)return this.handleParseResponsePromise(u,e,t,a,o,i,void 0,c,h,r,n,p)}return this.findParseRequestPromise(u,e,t,a,o,i,c,h,r,p)}r(i?[u,i.statusText,i]:null!=c?[u,"batch",{index:c,batch:h}]:d?[u,"idb"]:[u])},getFailure:function(e,t,a,o,i,r,n,s,l,d){var p=s.customD;if(i){var c,h=i.responseText;if(h)try{h=""==h?JSON.parse("{}"):JSON.parse(h)}catch(e){Lyte.warn("LD24",e)}c=h;var u=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,i,h,o?o.qP:void 0,a,p,s]});if(u&&(c=u.data),c instanceof Promise)return this.handleParseResponsePromise(c,e,t,a,o,i,void 0,void 0,void 0,r,n,s)}else l&&n({code:d,status:"requestFailure",data:l});n(i)},getResponse:function(e,t,a,o,i,r,n,s){if(!0===(void 0===s.cacheData||null===s.cacheData||"object"!=_typeof(s.cacheData)||!s.cacheData.hasOwnProperty("normalize")||s.cacheData.normalize)){var l,d,p,c,h=e=store.serializer.$.normalizeResponse(t,a,e,o,r?r.status:r,i,n,s),u=i?i.qP:void 0;"object"!=(void 0===h?"undefined":_typeof(h))&&(h=JSON.parse(h)),(p=store.$.initCB("serializer",t,"extractMeta",{args:[h,t,a,u,n,s]}))&&(c=p.data,store.$.isEmpty(c)||(h.meta=c));var f=Object.keys(h),y=f.length;if(y){var m;if((p=store.$.initCB("serializer",t,"payloadKey",{args:[t,a,o,u,n,s]}))&&(m=p.data)&&m!=t){var g=h[m];h[t]=g,delete h[m]}if(l=store.$.cbScp(t,"deserializeKey","serializer")){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),y>2&&Lyte.error("LD09");var v=0;2==y&&"meta"==f[0]&&(v=1),d=[t,a];var b=store.$.cB(l,d),P=h[f[v]];delete h[f[v]],h[b]=P}store.serializer.$.normalize(t,a,h,o,r?r.status:r,i.headers,n,s,i)}return h}return"object"!=(void 0===e?"undefined":_typeof(e))&&(e=JSON.parse(e)),(p=store.$.initCB("serializer",t,"extractMeta",{args:[e,t,a,u,n,s]}))&&(c=p.data,store.$.isEmpty(c)||(e.meta=c)),e},initPartialObj:function(e,t,a,o,i,r){return{obj:new Map}},create:function(e,t,a,o,i,r){var n=a?"createRecord":"create",s=r?{mutation:r}:void 0,l=store.$.initCB("adapter",e,"gql",{args:[e,n,i,void 0,s,o]});o=null==o?store.$.getFromCB("adapter",e,"customData"):o;var d=this.buildURL(n,"POST",e,void 0,t,i,void 0,o,void 0,l?l.data:void 0);i=d.qP;var p=this.initPartialObj(e,n,i,void 0,d.url,o),c=store.$.toJSON(e,t,void 0,"create",p);return this.sendingData(e,c,d,n,o,t,p.obj),d.gql&&store.$.cpdGql(e,n,i,d,c,o),this.handleRequest(d,e,t,n,c,o,p.obj,void 0,void 0,p.ref)},put:function(e,t,a,o,i,r,n){var s=store.model[e],l=s.bK,d=s.isComp,p=n?{mutation:n}:void 0,c=o?"updateRecord":"update",h=(new Map,o?d&&l?a[l]:a.$.pK:void 0),u=store.$.initCB("adapter",e,"gql",{args:[e,c,r,void 0,p,i]});i=null==i?store.$.getFromCB("adapter",e,"customData"):i;var f=this.buildURL(c,"PATCH",e,h,t,r,void 0,i,void 0,u?u.data:void 0);r=f.qP;var y=this.initPartialObj(e,c,r,h,f.url,i),m=store.$.toJSON(e,t,void 0,void 0,y);return this.sendingData(e,m,f,c,i,a,y.obj),f.gql&&store.$.cpdGql(e,c,r,f,m,i),this.handleRequest(f,e,a,c,m,i,y.obj,void 0,void 0,y.ref)},del:function(e,t,a,o,i,r,n){var s=store.model[e],l=s.bK,d=s.isComp,p=n?{mutation:n}:void 0,c=o||"deleteRecord",h=a?d&&l?t[l]:t.$.pK:void 0;i=null==i?store.$.getFromCB("adapter",e,"customData"):i;var u=store.$.initCB("adapter",e,"gql",{args:[e,c,r,void 0,p,i]}),f=this.buildURL(c,"DELETE",e,h,t,r,void 0,i,void 0,u?u.data:void 0);r=f.qP,this.initPartialObj(e,c,r,h,f.url,i);var y=[];a||(y=t.map((function(e){return e.$.pK})));var m=a?t?t.$.pK:void 0:y;return this.sendingData(e,m,f,c,i,t),f.gql&&store.$.cpdGql(e,c,r,f,m,i),this.handleRequest(f,e,t,c,m,i,void 0,h)},sendingData:function(e,t,a,o,i,r,n){var s,l=e,d={},p=a?a.qP:void 0,c={};for(var h in a)c[h]=a[h];c.type=o,c.model=e,(s=store.$.initCB("serializer",e,"serializeKey",{args:[e,o,i,p]}))&&(l=s.data),t=this.serializeRecords(e,t,r,c,"serializeRecord",i,n),l?(Array.isArray(t)||"object"==(void 0===t?"undefined":_typeof(t))||Lyte.isRecord(t))&&(d[l]=t):d=t,(s=store.$.initCB("serializer",e,"serialize",{args:[o,d,r,i,e,p,a?a.gqlObj:void 0]}))&&(d=s.data),a.data=d},serializeRecords:function(e,t,a,o,i,r,n){var s=store.modelFor(e);if(!s)return t;var l,d=s.relations;if(a||"normalizeRecord"==i||(a=store.peekRecord(s._name,t.$.pK)),Array.isArray(t)){l=[];for(var p=0;p<t.length;p++){var c=t[p];c&&"object"===(void 0===c?"undefined":_typeof(c))?l.push(this.serializeSingleRecord(s._name,c,a?a[p]:void 0,o,d,i,r,n)):l.push(c)}}else t&&(l=t,"object"===(void 0===t?"undefined":_typeof(t))&&(l=this.serializeSingleRecord(s._name,t,a,o,d,i,r,n)));return l},serializeSingleRecord:function(e,t,a,o,i,r,n,s){var l,d;("serializeRecord"==r&&"object"==(void 0===t?"undefined":_typeof(t))&&null==t.$&&store.$.defProp(t,"$",{}),"object"==(void 0===s?"undefined":_typeof(s))&&a&&a.$&&a.$.pK)&&(l=s.get?s.get(a.$.pK):s,t.$&&t.$._partialObj&&(d=Object.assign({},t.$),t=Object.assign({},t),store.$.defProp(t,"$",d)),Object.defineProperties(t.$,{_partialObj:{value:l},_pkVal:{value:a.$.pK},_model:{value:e},_payloadObj:{value:t}}));"serializeRecord"==r&&store.$.defpayObjUtls(t.$);var p,c=store.$.cbScp(e,r,"serializer");for(var h in c&&(p="serializeRecord"==r?[o,t,a,e,n]:[o,t,e,n],t=store.$.cB(c,p)),i)for(var u=i[h],f=u.length,y=0;y<f;y++){var m,g,v,b,P=u[y],D=t[P.relKey];if("relation"==P.type&&D&&("normalizeRecord"==r||"serializeRecord"==r&&P.opts&&P.opts.serialize&&"id"!=P.opts.serialize))if(m=a?a[P.relKey]:void 0,g=P.relatedTo,v=P.opts?P.opts.serialize:void 0,b=P.opts?P.opts.polymorphic:void 0,"hasMany"===P.relType){Array.isArray(D)||(D=[D]);var _=D.length,L=[];"serializeRecord"==r&&(store.$.defProp(L,"$",{}),store.$.defPayArrUtls(L.$),l&&l[P.relKey]&&Object.defineProperties(L.$,{_key:{value:P.relKey},_partialObj:{value:l[P.relKey]},_model:{value:g},_payloadObj:{value:L},replace:{value:store.$.replaceCheck,writable:!0}}));for(var C=0;C<_;C++){var w=g;b&&("normalizeRecord"==r?w=D[C]&&D[C]._type?D[C]._type:g:"serializeRecord"==r&&("record"==v?w=m&&Lyte.isRecord(m[C])?m[C].$.model._name:g:"partial"==v&&(w=D[C]&&D[C].$?D[C].$.polymorphicType:g))),L.push(this.serializeRecords(w,D[C],void 0,o,r,n,l?l[P.relKey][C]:void 0))}t[P.relKey]=L}else w=g,b&&("normalizeRecord"==r?w=t[P.relKey]&&t[P.relKey]._type?t[P.relKey]._type:g:"serializeRecord"==r&&(w=Lyte.isRecord(a[P.relKey])?a[P.relKey].$.model._name:g)),t[P.relKey]=this.serializeRecords(w,t[P.relKey],a?a[P.relKey]:void 0,o,r,n,l?l[P.relKey]:void 0)}return t},handleAction:function(e,t,a,o,i,r,n){var s;a&&Lyte.isRecord(a)&&(s=a.$.get(t._pK));var l=t._name;o=null==o?store.$.getFromCB("adapter",t._name,"customData"):o;var d=this.buildURL("action",r||"POST",t._name,s,a,i,e,o);d.data=n,i=d.qP;var p=store.$.initCB("serializer",t._name,"serialize",{args:["action",n,a,o,l,i,e]});return p&&(d.data=p.data),this.handleRequest(d,t._name,void 0,"action",void 0,o,void 0,void 0,e)},handleRequest:function(e,t,a,o,i,r,n,s,l,d){if(e.data&&e.data.LdEr)return Lyte.warn(e.data.LdEr,e.data.key,t),Promise.reject({code:e.data.LyteError,message:Lyte.errorCodes[e.data.LyteError],data:e.data.key});!e.data||"object"!=_typeof(e.data)&&!Lyte.isRecord(e.data)&&!Array.isArray(e.data)||e.data instanceof FormData||(e.data=JSON.stringify(e.data));var p=this;return new Promise((function(i,c){var h=store.$.getFromCB("adapter",t,"processRequest"),u=!0,f=store.$.makeBatch,y=!1;if(h){u=!1;var m,g=p.callGeneric(o,t,e.data,a,r,e?e.qP:void 0,s,e.url,l,e.method,e.headers);g instanceof Promise?(y=!0,g.then((function(s){s=""==s?JSON.parse("{}"):JSON.parse(s),m=p.genericResponse(s,t,o,a,e,void 0,n,r),i(m)}),(function(e){c(e)}))):u=!0}if(f&&!y)store.adapter.$.constructBatch(t,o,s,e).then((function(n){var p=n.content;store.adapter.$.handleSuccess(t,o,void 0,a,e,i,p,n,void 0,c,s,r,l,d)}),(function(n){store.adapter.$.handleFailure(t,o,void 0,a,e,i,n.content,void 0,c,s,r,n.code,l)}));else if(u){var v=[t,o,s,e,i,c,"other",a,r];store.adapter.$.sendXHR.apply(store.adapter.$,v).then((function(p){store.adapter.$.handleSuccess(t,o,p,a,e,i,void 0,void 0,n,c,s,r,l,d)}),(function(d){store.adapter.$.handleFailure(t,o,d,a,e,i,void 0,n,c,s,r,void 0,l)}))}}))},handleSuccess:function(e,t,a,o,i,r,n,s,l,d,p,c,h,u){var f,y,m,g=a?a.responseText:void 0;if(a&&a.status,n)g=n;else if(g&&0!=g.length)if("action"==t)try{n=JSON.parse(g)}catch(e){n=g}else n=JSON.parse(g);else n=JSON.parse("{}");a&&(f=a),s&&(y=s.index,m=s.batch,f=s.resp);var v={customD:c};if(f){var b=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,f,n,i?i.qP:void 0,p,c,void 0,h]});if(b&&(n=b.data)instanceof Promise)return this.handleParseResponsePromise(n,e,t,o,i,a,l,y,m,r,d,v)}return this.otherParseRequestPromise(n,e,t,o,i,a,l,y,m,r,d,c,u,p)},handleFailure:function(e,t,a,o,i,r,n,s,l,d,p,c,h){if(a){store.$.cbScp(e,"parseResponse","adapter");var u,f=a.responseText;if(f)try{f=""==f?JSON.parse("{}"):JSON.parse(f)}catch(e){Lyte.warn("LD24",e)}var y=store.$.initCB("adapter",e,"parseResponse",{args:[t,e,a,f,i?i.qP:void 0,d,p,void 0,h]});if(y&&(u=y.data)instanceof Promise)return this.handleParseResponsePromise(u,e,t,o,i,a,s,void 0,void 0,r,l,p)}else n&&l({code:c,status:"requestFailure",data:n});l(a)},updateIDB:function(e,t,a,o,i,r){a&&!Array.isArray(a)&&(a=[a]);var n=store.model[e],s=store.$.getIDBObj(n,i&&i.qP?i.qP:void 0,t,r,o);if(n&&s&&(!s||s.hasOwnProperty("queryCache"))){var l=store.$.idbQ2[e]=store.$.idbQ2[e]||[],d=s.queryCache;if(a)switch(t){case"update":case"updateRecord":a.forEach((function(t,a){if(t&&Lyte.isRecord(t)){var i=store.model[e].relations;t.$.inIDB&&t.$.inIDB.self&&l.push({type:"updateRecord",model:e,data:t.$.toJSON("idb"),queryCache:d,customData:o}),store.adapter.$.updateRelationsIDB(t,i,o),store.$.addToIDBonSave(e,t)}}));break;case"delete":case"deleteRecord":case"destroyRecord":var p=store.modelFor(e)._arrPk;a.forEach((function(t,a){if(t&&Lyte.isRecord(t)){var i=store.model[e].relations;t.$.parent;for(var r={},n=0;n<p.length;n++)r[p[n]]=t[p[n]];t.$.inIDB&&t.$.inIDB.self&&l.push({type:"deleteRecord",model:e,key:r,queryCache:d,customData:o}),store.adapter.$.updateRelationsIDB(t,i,o),store.$.removeOnSave(e,t.$.pK)}}));break;case"create":case"createRecord":a.forEach((function(t,a){if(t&&Lyte.isRecord(t)){var i=store.model[e].relations;l.push({type:"createRecord",model:e,data:t.$.toJSON("idb"),queryCache:d,customData:o}),store.adapter.$.updateRelationsIDB(t,i,o,"create"),store.$.addToIDBonSave(e,t)}}))}}else a.forEach((function(a,i){a&&Lyte.isRecord(a)&&store.adapter.$.updateRelationsIDB(a,store.model[e].relations,o,t)}))},updateRelationsIDB:function(e,t,a,o){switch(o){case"create":case"createRecord":for(var i in t)t[i].forEach((function(t){var o,i=t.relKey,r=t.relatedTo;store.$.idbQ2[r]=store.$.idbQ2[r]||[],e.$.inIDB,(o=t.dummy?store.$.getRelatedRecord(e,t.relatedTo,t.dummy):e[i])&&!Array.isArray(o)&&(o=[o]),o&&o.forEach((function(e){var t=e.$.model,o=store.$.idbQ2[t._name]=store.$.idbQ2[t._name]||[];for(var i in e.$.inIDB.self&&o.push({type:"updateRecord",model:t._name,data:e.$.toJSON("idb"),customData:a}),e.$.inIDB){var r=e.$.inIDB[i],n=store.$.idbQ2[i]=store.$.idbQ2[i]||[];r.forEach((function(e,t){n.push({type:"updateRecord",model:i,data:store.peekRecord(i,t).$.toJSON("idb"),customData:a})}))}}))}));break;default:var r=e.$.inIDB;if(r)for(mKey in r)r[mKey].forEach((function(e,t){var o=store.peekRecord(mKey,t);(store.$.idbQ2[mKey]=store.$.idbQ2[mKey]||[]).push({type:"updateRecord",model:mKey,data:o.$.toJSON("idb"),customData:a})}))}},callGeneric:function(e,t,a,o,i,r,n,s,l,d,p){var c=store.$.initCB("adapter",t,"processRequest",{args:[e,t,a,o,i,r,n,s,l,d,p]});return c?c.data:void 0},genericResponse:function(e,t,a,o,i,r,n,s,l){var d,p,c=e,h=(r&&r.status,i?i.qP:void 0);if(d=store.$.cbScp(t,"extractMeta","serializer"))if(c){var u=store.$.cB(d,[c,t,a,h,s]);store.$.isEmpty(u)||(c.meta=u),p=!0}else p=!1;if(c&&"action"!=a&&"ajax"!=a){c=store.serializer.$.buildJSON(t,a,c,Lyte.isRecord(o)?o[store.modelFor(t)._pK]:void 0,r?r.status:void 0,i,s,h),0==p&&d&&c&&(u=store.$.cB(d,[c,t,a,h,s]),store.$.isEmpty(u)||(c.meta=u));var f=Object.keys(c),y=f.length;if(d=store.$.cbScp(t,"deserializeKey","serializer")){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),y>2&&Lyte.error("LD09");var m=0;"meta"==f[0]&&(m=1);var g=store.$.cB(d,[t,a]),v=c[f[m]];delete c[f[m]],c[g]=v}this.handleResponse(o,c,store.modelFor(t),a,n,void 0,l)}return c},removePartialKeys:function(e,t,a){var o=t.relations,i=e.$.pK;for(var r in o)o[r].forEach((function(a){var o;if(bMod=store.model[a.relatedTo],bMod&&(o=store.$.getBackwardRel(t,a,bMod))&&"hasMany"==o.relType&&o.opts&&o.opts.serialize){var r=a.relKey,n=o.relKey,s=e[r];if(s)if(Array.isArray(s))s.forEach((function(e){var t=e[n];t&&t.partial&&t.partial.get(i)&&t.partial.delete(i)}));else if(s[n]){var l=s[n];l&&l.partial&&l.partial.get(i)&&l.partial.delete(i)}}}))},mergeError:function(e,t,a){if(a&&a.$&&a.$.isError){if(a.$.error){var o=a.$.error;for(var i in o)e.fieldList.hasOwnProperty(i)&&store.$.setRecErr(t.$,i,o[i])}return delete a.$.error,delete a.$.isError,!0}},mergeResponse:function(e,t,a,o,i,r){if(this.removePartialKeys(e,t,o),i&&Object.keys(i).length&&this.mergeNewDataKeys(i,e,a,r),!this.mergeError(t,e,a)){var n=store.peekRecord(e.$.model._name,e.$.pK),s=!1;e.$.isDeleted&&this.mergeDeletedRec(i,e,r),e.$.isNew&&n&&(s=this.mergeNewRecord(i,e,a,!0,r)),e.$.isModified&&n&&this.mergeModifiedRec(i,e,a,!0,s,r),t.dirty.length&&store.$.deleteFromArray(t.dirty,void 0),i&&Object.keys(i).length&&a&&!s&&a&&(n?(result=store.$.validateAndMerge(t,a,i,!0),result&&result.data?result=result.data:result&&result.type&&Lyte[result.type].apply(Lyte,result.args||[])):result=store.$.insertIntoStore(t._name,a,void 0,void 0,i));for(var l=e.$.isDirty(),d=0;d<l.length;d++){var p=e[l[d]];if(Array.isArray(p))for(var c=0;c<p.length;c++)Lyte.isRecord(p[c])&&(store.$.cmpSet(p[c].$,"isModified",!1),store.$.changePersist(p[c],!0));else Lyte.isRecord(p)&&(store.$.cmpSet(p.$,"isModified",!1),store.$.changePersist(p,!0))}store.adapter.$.removeDirtyStack(e)}},removeDirtyStack:function(e){e.$._attributes={},e.$.undoStack=store.$.genUnRedoStack(),e.$.redoStack=store.$.genUnRedoStack(),delete e.$._savedState,store.$.clrRecErr(e.$)},mergeNewRecord:function(e,t,a,o,i){var r,n=e.$?e.$.model:t.$.model._name,s=store.model[n],l=s._arrPk,d=t.$.pK,p=store.peekRecord(n,d),c=e.$?e.$.record:void 0;if(!Lyte.isRecord(c)||c===p){if(p){var h="object"==(void 0===d?"undefined":_typeof(d))?d:d.toString(),u=!1;if(!0!==i){l.forEach((function(e){a&&a.hasOwnProperty(e)?(store.$.cmpSet(t,e,a[e],void 0,!0),u=!0):Lyte.error("LD16",n,Lyte.isRecord(t)?"object"==_typeof(t.$.pK)?JSON.stringify(t.$.pK):t.$.pK:void 0)}));var f=store.$.getpKVal(t);store.$.cmpSet(t.$,"pK",store.$.getpKVal(t));var y="object"==(void 0===f?"undefined":_typeof(f))?f:f.toString();s.data._recMap&&(s.data._recMap.delete(h),s.data._recMap.set(y,t)),store.$.changeRelPkMaps(t,h,y),store.$.updateNestScp(t,d)}u&&e&&e.$&&(e.$.processed=!0),o&&!0!==i&&((r=store.$.validateAndMerge(s,a,e,!0))&&r.data?r=r.data:r&&r.type&&Lyte[r.type].apply(Lyte,r.args||[])),store.$.cmpSet(t.$,"isNew",!1),store.$.cmpSet(t.$,"isModified",!1),store.$.changePersist(t,!0),store.$.deleteFromArray(s.dirty,d),(!t.$.dN||t.$.dN&&0==Object.keys(t.$.dN).length)&&store.$.removeParentNesting(t)}return r}},mergeModifiedRec:function(e,t,a,o,i,r){var n,s=s||t.$.pK;return t.$.isDeleted||!a||i||!0===r||(a&&o&&((n=store.$.validateAndMerge(t.$.model,a,e,!0))&&n.data?n=n.data:n&&n.type&&Lyte[n.type].apply(Lyte,n.args||[])),i=!0),store.$.cmpSet(t.$,"isModified",!1),store.$.changePersist(t,!0),store.$.deleteFromArray(t.$.model.dirty,t.$.pK),(!t.$.dN||t.$.dN&&0==Object.keys(t.$.dN).length)&&store.$.removeParentNesting(t),n},mergeDeletedRec:function(e,t){var a,o,i;e?(a=e.$.model,o=e.$.pkVal):t&&(a=t.$.model._name,o=t.$.pK);var r=(f=(i=store.model[a])._deleted.get(o))?f.data:void 0,n=store.peekRecord(a,o);if(r){store.$.cmpSet(r.$,"isDeleted",!1),store.$.cmpSet(r.$,"isUnloaded",!0),store.$.cmpSet(r.$,"isPersisted",!0);var s=r.$.__scpObj;for(var l in s){var d=s[l].split("_"),p=Lyte.nestScp[d[0]];p&&Lyte.removeNestScp(p._data,d[0],d[1],void 0,r,void 0,void 0,{model:a,pK:o,attr:l})}i._deleted.delete(o),store.$.removeParentNesting(r)}if(n)store.$.removeFromStore(i,o,!0,void 0,void 0,!0),store.$.removeParentNesting(n);else{var c=store.model.cachedQueries;if(c){var h=c[a];if(h&&h.length)for(var u=h.length-1;u>=0;u--){var f;(f=h[u]).hasDeletedRecords&&f.data&&-1!==f.data[a].indexOf(r)&&h.splice(u,1)}}}e&&e.$&&e.$.parent&&(e.$.parent.$.partial={}),e&&e.$&&(e.$.processed=!0)},mergePartialObj:function(e,t,a,o,i){var r,n=store.peekRecord(e.$.model,e.$.pkVal),s=(t=t||n,!!n);if(!(e&&e.$&&e.$.processed||this.mergeError(store.model[e.$.model],t,a))){if(("added"==e.$.type||t&&t.$&&1==t.$.isNew)&&s)r=this.mergeNewRecord(e,t,a,o,i);else if(("modified"==e.$.type||"related"==e.$.type||t&&t.$&&1==t.$.isModified)&&s)this.mergeModifiedRec(e,t,a,o,r,i);else if("removed"==e.$.type)return void this.mergeDeletedRec(e,t,i);if(s){if("removed"!=e.$.type)for(var l in e){var d=e[l];this.mergeNewDataKeys(d,t[l],a?a[l]:void 0,i)}t.$.partial&&Object.keys(t.$.partial)&&(t.$.partial=new Map),store.adapter.$.removeDirtyStack(t)}}},mergeNewDataKeys:function(e,t,a,o){if(e&&(t&&t.partial&&t.partial.size||1==e.partial)){var i=this;if(Array.isArray(e)){var r=!!e.replace&&e.replace;e.forEach((function(e,n){if(e.$){var s=store.model[e.$.model]._pK,l=store.$.getIndex(t,s,e.$.pkVal);!0===e.$.onlyDetach?store.$.handleArrOp(t,"removeAt",void 0,l,1):r&&e.$.record&&e.$.record.$.isNew?r=!0:i.mergeNewDataKeys(e,-1!=l?t[l]:void 0,a?a[n]:void 0,o),t.partial&&t.partial.delete(e.$.pkVal)}}))}}else if(e&&e.$&&e.$.type)this.mergePartialObj(e,t,a,void 0,o);else if(Array.isArray(e))i=this,e.forEach((function(e,r){i.mergeNewDataKeys(e,t[r],a?a[r]:void 0,o)}));else if("object"==(void 0===e?"undefined":_typeof(e)))for(var n in e)e[n],this.mergeNewDataKeys(e[n],t[n],a?a[n]:void 0,o)},handleResponse:function(e,t,a,o,i,r,n){var s,l,d,p=a._pK;if(t=t[a._name],Array.isArray(e))for(var c=0;c<e.length;c++)d=(l=e[c]).$.pK,s=i&&l&&d?i.get(d):void 0,this.mergeResponse(e[c],a,Array.isArray(t)?t[c]:t,p,s);else d=e.$.pK,s=i&&e&&d?i.get(d):void 0,this.mergeResponse(e,a,t,p,s)},compareData:function(e,t,a){if(!store.$.isEmpty(e)&&!store.$.isEmpty(t)){var o=void 0===e?"undefined":_typeof(e);if(o!==(void 0===t?"undefined":_typeof(t)))return!1;switch(o){case"string":case"number":case"boolean":if(e===t)return!0;break;case"object":return this.compareObjects(e,t,a)}}return!1},compareObjects:function(e,t,a){if(!(e instanceof Object&&t instanceof Object))return!1;if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var o in e){var i=e[o],r=t[o];if(a&&Array.isArray(i)&&Array.isArray(r)){if(i.length!=r.length)return!1;for(var n=i.length,s=0;s<n;s++)if(!store.adapter.$.compareData(i[s],r[s],a))return!1}else if(void 0===r||!store.adapter.$.compareData(i,r,a))return!1}return!0},handleBatchPromise:function(e){var t=e.response,a=e.batch,o=store.$.initCB("serializer","application","normalizeResponse",{args:[void 0,"batch",e.response]});o&&(t=o.data),t.batch_requests.forEach((function(e,t){var o=store.$.batchPromise[a][t],i=e.status.toString(),r=i[0];"2"==r?o.resolve({content:e.content,index:t,batch:a,resp:e}):"4"!=r&&"5"!=r||(store.$.batchResponse[a][t]=void 0,o.reject({content:e.content,index:t,batch:a,resp:e,code:i}))})),delete store.$.batch[a],delete store.$.batchPromise[a]},handleParseResponsePromise:function(e,t,a,o,i,r,n,s,l,d,p,c){e.then((function(e){"findRecord"==a||"findAll"==a?store.adapter.$.findParseRequestPromise(e,t,a,o,i,r,s,l,d,c):store.adapter.$.otherParseRequestPromise(e,t,a,o,i,r,n,s,l,d,p,c?c.customD:void 0,void 0,o)}),(function(e){p(r)}))},findParseRequestPromise:function(e,t,a,o,i,r,n,s,l,d){var p=Object.assign({},d);delete p.customD;var c=this.getResponse(e,t,a,o,i,r,d?d.customD:void 0,p);l(r?[c,r.statusText,r]:null!=n?[c,"batch",{index:n,batch:s}]:[c])},otherParseRequestPromise:function(e,t,a,o,i,r,n,s,l,d,p,c,h,u){var f=this.genericResponse(e,t,a,o,i,r,n,c,h);null!=s&&(store.$.batchResponse[l][s]=f),"action"!=a&&this.updateIDB(t,a,o,c,i,u),d(f)}}},store.$.defProp(store.adapter,"extends",(function(e,t,a){return store.$.scExtd("adapter",e,t,a)}),!1),Lyte.$.requiredMixins.serializer=Lyte.$.requiredMixins.adapter=function(e,t,a){Object.keys(e).length&&t.forEach((function(t,o){var i=t.scope,r=t.name,n=i[a][r];if(n)for(var s in e)n[s]=e[s]}))},Lyte.$.injectServices&&(Lyte.$.injectServices.adapter=Lyte.$.injectServices.serializer=function(e,t,a,o,i,r){var n=store[a],s={};for(var l in s.as=e,s.service=t,n){var d=n[l];store.$.extendService([s],a,l,d,store,!0,r)}}),store.$.cbDef(Serializer,"serializer"),store.serializer={$:{buildJSON:function(e,t,a,o,i,r,n,s){var l=r?r.headers:void 0,d=a,p=store.$.initCB("serializer",e,"normalizeResponse",{args:[e,t,d,o,i,l,r?r.qP:void 0,n,void 0,r?r.gqlObj:void 0]});p&&(d=p.data);var c,h=/^(findRecord|findAll)$/.test(t);if(!h&&d&&"object"==(void 0===d?"undefined":_typeof(d))&&(p=store.$.initCB("serializer",e,"payloadKey",{args:[e,t,void 0,s,n]}))){var u=p.data;if(u&&u!=e){var f=d[u];d[e]=f,delete d[u]}}if(h||d&&d[e]){if(c=d[e],scope=store.$.cbScp(e,"normalize","serializer"),scope)if(Array.isArray(c))for(var y=0;y<c.length;y++)c[y]=store.$.cB(scope,[e,t,c[y],n]);else c=store.$.cB(scope,[e,t,c,n]);var m="pushPayload"!=t?{url:r.url,method:r.method,headers:r.headers,type:t,qP:r.qP,withCredentials:r.withCredentials,model:e}:void 0;c=store.adapter.$.serializeRecords(e,c,void 0,m,"normalizeRecord",n),d[e]=c}return d},normalizeResponse:function(e,t,a,o,i,r,n,s){var l=r?r.headers:void 0,d=a,p=store.$.initCB("serializer",e,"normalizeResponse",{args:[e,t,d,o,i,l,r?r.qP:void 0,n,s,r?r.gqlObj:void 0]});return p&&(d=p.data),d},normalize:function(e,t,a,o,i,r,n,s,l){var d=a,p=!1;(/^(findRecord|findAll)$/.test(t)||d[e])&&(d=d[e],p=!0);var c=store.$.cbScp(e,"normalize","serializer");if(c)if(Array.isArray(d))for(var h=0;h<d.length;h++)d[h]=store.$.cB(c,[e,t,d[h],n,s]);else d=store.$.cB(c,[e,t,d,n,s]);p&&(a={},d=store.adapter.$.serializeRecords(e,d,void 0,{url:l.url,method:l.method,headers:l.headers,type:t,qP:l.qP,withCredentials:l.withCredentials,model:e},"normalizeRecord",n),a[e]=d)}}},store.$.defProp(store.serializer,"extends",(function(e,t,a){return store.$.scExtd("serializer",e,t,a)})),Object.defineProperties(store,{triggerUpdate:{value:function(e,t,a,o,i,r){var n={};if(null==(l=store.modelFor(e)))return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});var s=store.peekRecord(e,t);if(s){var l,d=(l=s.$.model)._arrPk;return(a||Object.keys(l.fieldList)).forEach((function(e){n[e]=s[e]})),d.forEach((function(e){n[e]=s[e]})),store.adapter.$.put(e,n,s,!0,i,o,r)}return Promise.reject("No such record found")}},batch:{value:function(e){return new Promise((function(t,a){store.$.makeBatch=!0,store.$.batch=store.$.batch||{},store.$.batchPromise=store.$.batchPromise||{};var o=void 0===store.$.currentBatch?Object.keys(store.$.batch).length:store.$.currentBatch+1,i=store.$.currentBatch=o;try{e()}catch(e){throw store.$.makeBatch=!1,e}store.$.makeBatch=!1;var r={batch:store.$.batch[i]},n=store.adapter.$.buildURL("batch","POST","application",void 0,r),s=r.batch;if(store.$.isEmpty(s)){if(store.$.cachedBatch&&store.$.cachedBatch[i]&&store.$.cachedBatch[i].length){var l=store.$.handleCachedResponse(i,[]);return t(l)}return t()}var d=store.$.initCB("serializer","application","serialize",{args:["batch",r]});d&&(r=d.data);var p=new XMLHttpRequest;for(var c in p.open("POST",n.url,!0),n.headers)p.setRequestHeader(c,n.headers[c]);p.withCredentials=!!n.withCredentials,p.send(JSON.stringify(r)),p.onreadystatechange=function(){if(4==p.readyState)if("2"==p.status.toString()[0]||"3"==p.status.toString()[0]){var e=JSON.parse(p.responseText);store.$.batchResponse=store.$.batchResponse||{},store.$.batchResponse[i]=[],store.adapter.$.handleBatchPromise({response:e,batch:i,resolve:t}),setTimeout((function(){var e=store.$.handleCachedResponse(i,store.$.batchResponse[i]);t(e),store.$.batchResponse[i]=[]}),0)}else setTimeout((function(){a()}),0)}}))}},pushPayload:{value:function(e,t,a,o){var i=store.modelFor(e);if(i){var r,n=t;if(a){t=store.serializer.$.buildJSON(e,"pushPayload",t);var s=store.$.cbScp(e,"deserializeKey","serializer");if(r=t?Object.keys(t).length:void 0,s){Lyte.warn("LD08","deserializeKey","callback","Please use payloadKey callback instead"),r>2&&Lyte.error("LD09");var l=Object.keys(t);o=0,2==l.length&&"meta"==l[0]&&(o=1);var d=store.$.cB(s,[e,"pushPayload"]),p=t[l[o]];delete t[l[o]],t[d]=p}n=t[e]}var c=(t=store.$.insertIntoStore(e,n,!0,void 0,void 0,o,!0))||[];Array.isArray(c)||(c=[c]);var h=i&&i.hasOwnProperty("idb");return window.LyteIDB&&c.forEach((function(t){Lyte.isRecord(t)&&(h&&store.$.idbQ2Push(e,t,void 0,"pushPayload"),t.$.isError||t.$.inIDB&&Object.keys(t.$.inIDB).length&&store.adapter.$.updateRelationsIDB(t,t.$.model.relations))})),i&&delete i.rel,t}Lyte.warn("LD02","Model",e)}},registerModel:{value:function(e,t,a){if(!store.model.hasOwnProperty(e)){var o,i,r,n;if(a&&"object"==(void 0===a?"undefined":_typeof(a))&&(o=a.extends||void 0,i=a.actions||void 0,r=a.idb||void 0,n=a.gql||void 0),o){var s=Object.assign({},store.model[o].fieldList);for(var l in s)"relation"==s[l].type&&delete s[l];t=Object.assign(t,s)}var d=store.model[e]=new Model(e,t);return o&&store.$.extendModel(o,d),i&&(d.actions=i),r&&(d.idb=r),n&&(d.gql=n),d}Lyte.warn("LD14","Model",e)}},unregisterModel:{value:function(e,t){t=!1!==t,Array.isArray(e)?e.forEach((function(e){store.$.unregisterModel(e,t)})):store.$.unregisterModel(e,t)}},unregisterAdapter:{value:function(e){Array.isArray(e)?e.forEach((function(e){store.$.unRegCb("adapter",e)})):store.$.unRegCb("adapter",e)}},unregisterSerializer:{value:function(e){Array.isArray(e)?e.forEach((function(e){store.$.unRegCb("serializer",e)})):store.$.unRegCb("serializer",e)}},addField:{value:function(e,t,a,o,i,r){var n,s=store.modelFor(e),l=[];if(a&&"object"==(void 0===a?"undefined":_typeof(a)))store.$.registerField(s,t,a,l),n="relation"==a.type?"relation":"attr",r=arguments[4],i=void 0===i?arguments[3]:i;else{var d=Lyte.attr(a,o);store.$.registerField(s,t,d,l)}"relation"!=n&&(i&&!r||store.$.updateFieldValidation(s,t,r,i))}},modelFor:{value:function(e){return store.model[e]}},createRecord:{value:function(e,t,a){return this.$.newRecord(e,t,a)}},deleteRecord:{value:function(e,t){this.$.removeFromStore(store.modelFor(e),t,void 0)}},findAll:{value:function(e,t,a,o,i,r,n){return store.adapter.$.get("findAll",e,void 0,t,a,i,o,r,n).then((function(){var r=arguments,n=r[0][0],s=r[0][2],l=s?s.status:r[0][3],d="cache"==r[0][1],p="batch"==r[0][1]?r[0][2]:void 0,c="idb"==r[0][1],h=store.model[e],u=a&&!0!==a?a:!0===a&&t&&"object"==(void 0===t?"undefined":_typeof(t))&&Object.keys(t).length?t:void 0;if(h||null!=o||(o=!1),void 0!==o&&"object"==(void 0===o?"undefined":_typeof(o))&&null!==o&&(o=!o.hasOwnProperty("cache")||o.cache),!1===o)return!d&&u&&store.$.cacheQuery(e,u,n,l),null!=p&&(store.$.batchResponse[p.batch][p.index]=n),n;if(n&&!n.save){if(!d){if(!n||!n.hasOwnProperty(e))return void Lyte.error("LD13","findAll",e,t&&"object"==(void 0===t?"undefined":_typeof(t))?",queryParams-"+JSON.stringify(t):"");var f=n[e];if(null==f||store.$.isEmptyArray(f))n[e]=[];else{Array.isArray(f)||Lyte.warn("LD19");var y=store.$.toInsertData(e,n,!0),m=y;y&&!Array.isArray(y)&&(m=[y]),window.LyteIDB&&!c&&(m&&!m.$||y&&y.$&&!y.$.isError)&&(h&&h.hasOwnProperty("idb")&&store.$.idbQ2Push(e,m,t,"findAll",void 0,void 0,i),m.forEach((function(e){e&&e.$&&e.$.inIDB&&Object.keys(e.$.inIDB).length&&store.adapter.$.updateRelationsIDB(e,e.$.model.relations)}))),window.LyteIDB&&c&&m&&Array.isArray(m)&&m.forEach((function(e){LyteIDB.changeIDBState(e)})),n[e]=y}n.hasOwnProperty("meta")&&(n[e].$||store.$.defProp(n[e],"$",{}),n[e].$.meta=n.meta),u&&store.$.cacheQuery(e,u,n)}return null!=p&&(store.$.batchResponse[p.batch][p.index]=n[e]),n[e]}return arguments}),(function(e){return Promise.reject(e)}))}},findRecord:{value:function(e,t,a,o,i,r,n,s){return null==t?Promise.reject({code:"ERR20",message:Lyte.errorCodes.ERR20}):store.adapter.$.get("findRecord",e,t,a,o,r,i,n,s).then((function(){var n=arguments[0][0],s="cache"==arguments[0][1],l=arguments[0][2],d=l?l.status:arguments[0][3],p="batch"==arguments[0][1]?arguments[0][2]:void 0,c="idb"==arguments[0][1],h=store.model[e],u=o&&!0!==o?o:!0===o&&a&&"object"==(void 0===a?"undefined":_typeof(a))&&Object.keys(a).length?a:void 0;if(h||null!=i||(i=!1),void 0!==i&&"object"==(void 0===i?"undefined":_typeof(i))&&null!==i&&(i=!i.hasOwnProperty("cache")||i.cache),!1===i)return!s&&u&&store.$.cacheRecordQuery(e,t,u,n,d),null!=p&&(store.$.batchResponse[p.batch][p.index]=n),n;if(n){if(!s){var f;if(!n||!n.hasOwnProperty(e))return void Lyte.error("LD13","findRecord",e,",key-"+("object"==(void 0===t?"undefined":_typeof(t))?JSON.stringify(t):t)+(a&&"object"==(void 0===a?"undefined":_typeof(a))?", queryParams-"+JSON.stringify(a):""));if(!Lyte.isRecord(n)){var y=n[e];if((store.$.isEmpty(y)||store.$.isEmptyObj(y))&&(n[e]={},f=!0),("object"!=(void 0===y?"undefined":_typeof(y))||Array.isArray(y))&&Lyte.warn("LD11"),!f){var m,g=store.$.insertIntoStore(e,y,!0,!0,void 0);window.LyteIDB&&!c&&Lyte.isRecord(g)&&!g.$.isError&&(Array.isArray(g)||(m=[g]),h&&h.hasOwnProperty("idb")&&store.$.idbQ2Push(e,m,a,"findRecord",t,n&&n.meta?n.meta:void 0,r),m.forEach((function(e){e&&e.$&&e.$.inIDB&&Object.keys(e.$.inIDB).length&&store.adapter.$.updateRelationsIDB(e,e.$.model.relations)}))),window.LyteIDB&&c&&m&&Array.isArray(m)&&m.forEach((function(e){LyteIDB.changeIDBState(e)})),n[e]=g}n.hasOwnProperty("meta")&&(Lyte.isRecord(g)?g.$.meta=n.meta:((y=n[e]).$||store.$.defProp(y,"$",{}),y.$.meta=n.meta))}!s&&u&&store.$.cacheRecordQuery(e,t,u,n)}return null!=p&&(store.$.batchResponse[p.batch][p.index]=n[e]),n[e]}return arguments}),(function(e){return Promise.reject(e)}))}},peekRecord:{value:function(e,t,a){var o=this.modelFor(e);if(o)if(!0===a){var i=o._deleted.get(t);if(i&&i.data)return i.data}else{var r=o.isComp;if(t=null==t?"":t,!r&&o.data._recMap)return o.data._recMap.get(t.toString());var n=o.data.filter((function(e){if(store.$.comparePk(e,t))return e}));if(n[0])return n[0]}else Lyte.warn("LD02","Model ",e)}},peekAll:{value:function(e){var t=this.modelFor(e);if(t)return arr=t.data,arr;Lyte.warn("LD02","Model ",e)}},deleteMany:{value:function(e,t){this.$.removeFromStore(store.modelFor(e),t,void 0)}},unloadRecord:{value:function(e,t,a){a=!1!==a;var o=this.modelFor(e);if(o){null==t&&Lyte.warn("LD18","key");var i,r=store.peekRecord(e,t);if(r){i=r.$.pK,a?store.$.removeChildRecords(o,r,"unloadRecord",""):this.$.removeFromStore(o,i,!0,!0),o._deleted.delete(t);var n=this.model.cachedRecordQueries;n&&n[e]&&n[e][t]&&(n[e][t]=[]);var s=store.model.cachedQueries;if(s){var l=s[e];if(l&&l.length)for(var d=l.length-1;d>=0;d--){var p=l[d];p&&p.data&&-1!=p.data[e].indexOf(r)&&l.splice(d,1)}}}}else Lyte.warn("LD02","Model ",e)}},unloadAll:{value:function(e,t,a){a=!1!==a;var o=this.modelFor(e);if(o){var i=[],r=t||store.peekAll(e);if(r)for(var n=0;n<r.length;n++)i.push(r[n].$.pK);a?i.forEach((function(t){store.$.removeChildRecords(o,store.peekRecord(e,t),"unloadAll","")})):this.$.removeFromStore(o,i,!0,!0),this.model[e].dirty=[],this.model[e]._deleted=new Map;var s=store.model.cachedQueries;s&&s[e]&&(s[e]=[]);var l=this.model.cachedRecordQueries;l&&l[e]&&(l[e]=[])}else Lyte.warn("LD02","Model ",e)}},triggerAction:{value:function(e,t,a,o,i,r){var n=store.modelFor(e);return null==n?(Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e})):(n.actions?n.actions[t]:void 0)?store.adapter.$.handleAction(t,n,store.peekAll(e),a,o,i,r).then((function(e){return e}),(function(e){return Promise.reject(e)})):Promise.reject({code:"ERR18",message:Lyte.errorCodes.ERR18})}},rollBack:{value:function(e){var t=this.modelFor(e);if(t.relations,null!=t){for(var a=t._pK,o=Array.from(t.dirty),i=o.length,r=0;r<i;r++){var n=this.peekRecord(e,o[r]);n&&n.$.isDeleted||(n&&n.$.isNew?this.$.rollBackNew(t,n,a):n&&n.$.isModified&&n.$.rollBackAttributes(n.$.getDirtyAttributes()))}this.$.rollBackDelete(t,void 0,!0)}else Lyte.warn("LD02","Model",e)}},create:{value:function(e,t,a,o,i,r){var n=store.modelFor(e);if(null==n)return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});if(Array.isArray(t)){var s=this;t.forEach((function(t){var a=s.$.newRecord(e,t);if(a.$.isError)return Promise.reject(a)}))}else if(t&&"object"==(void 0===t?"undefined":_typeof(t))){var l=this.$.newRecord(e,t);if(l.$.isError)return Promise.reject(l)}for(var d,p=n.dirty,c=p.length,h=[],u=0;u<c;u++){var f=store.peekRecord(e,p[u]);if(f&&f.$.isNew){if(i&&-1==i.indexOf(f))continue;if(d=new error1,store.$.validateRecord(f,n.fieldList),f.$.isError&&Object.keys(f.$.error).length>0)return Promise.reject(d);h.push(f)}}return h.length?store.adapter.$.create(e,h,!1,a,o,r):Promise.resolve()}},update:{value:function(e,t,a,o,i){if(null==this.modelFor(e))return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});var r,n=[],s=[],l=o||store.peekAll(e),d=(r=store.model[e]).relations;return l.forEach((function(t){if(Lyte.isRecord(t)&&t.$.model._name==e){var a=t,o=store.$.isDirty(a,d);if(a&&a.$.isModified&&!a.$.isNew||o&&o.length){var i=store.$.updateJSON(a,r,o);n.push(i),s.push(a)}}})),n.length?store.adapter.$.put(e,n,s,!1,t,a,i):Promise.resolve()}},delete:{value:function(e,t,a,o,i,r){var n=store.modelFor(e);if(null==n)return Lyte.warn("LD02","Model",e),Promise.reject({code:"ERR19",message:Lyte.errorCodes.ERR19,data:e});t&&this.deleteRecord(e,t);var s=[];if(n._deleted.forEach((function(e,t){s.push(e.data)})),i){var l=[];i.forEach((function(e){-1!=s.indexOf(e)&&l.push(e)})),s=l}return s.length?store.adapter.$.del(e,s,void 0,"delete",a,o,r).then((function(e){return e}),(function(e){return Promise.reject(e)})):Promise.resolve()}},registerAdapter:{value:store.adapter.extends},registerSerializer:{value:store.serializer.extends},clearCachedQuery:{value:function(e,t,a){var o,i;e&&"object"==(void 0===e?"undefined":_typeof(e))?(e=(i=e).modelName,t=i.key,o=a=i.cacheQuery):t&&"object"==(void 0===t?"undefined":_typeof(t))?(o=t,t=void 0):a&&"object"==(void 0===a?"undefined":_typeof(a))&&(o=a);var r=[];if(o){if(o){null==t?(s=this.model.cachedQueries)&&s[e]&&(r=s[e]):(l=this.model.cachedRecordQueries)&&l[e]&&l[e][t]&&(r=l[e][t]);for(var n=0;n<r.length;n++)if(this.adapter.$.compareData(r[n].cacheQuery,o,!0)){r.splice(n,1);break}}}else if(e){var s=this.model.cachedQueries,l=this.model.cachedRecordQueries;s&&s.hasOwnProperty(e)&&delete s[e],l&&l.hasOwnProperty(e)&&(t?delete l[e][t]:delete l[e])}else this.model.cachedQueries=[],this.model.cachedRecordQueries={}}},getErrorMessage:{value:function(e){return Lyte.errorCodes[e]}},setErrorMessages:{value:function(e){Object.assign(Lyte.errorCodes,e)}},addEventListener:{value:function(e,t){return store.$.eventListeners.add(store,e,t)}},removeEventListener:{value:function(e){store.$.eventListeners.remove(store,e)}},emit:{value:function(e,t){store.$.eventListeners.emit(store,e,t)}},getPrimaryKey:{value:function(e){var t=store.model[e];if(t)return t._pK;Lyte.warn("LD02","Model ",e)}}});var error1=function(e,t,a){Object.defineProperties(this,{$:{value:{isError:!0,error:a||{}}}}),e&&store.$.setError(this,e,t)};if(function(e){var t=[],a=t.slice,o=t.push,i=t.indexOf,r=t.concat,n={},s=n.toString,l=n.hasOwnProperty,d=l.toString,p=d.call(Object),c=e.document;function h(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[s.call(e)]||"object":typeof e}function u(e){var t=!!e&&"length"in e&&e.length,a=h(e);return!g.isFunction(e)&&!g.isWindow(e)&&("array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e)}function f(e){return-1!==e.indexOf(":visible")}function y(e,t,a){var i,r;if(f(e))if((i=e.split(",")).length>1)for(r=0;r<i.length;r++)y(i[r],t,a);else o.apply(a,function(e,t){var a,o=e.indexOf(":visible"),i=e.substring(0,o),r=0,n=[];for(a=t.querySelectorAll(i||"*");r<a.length;r++)m(a[r])&&n.push(a[r]);return n}(i[0],t));else!function(e,t,a){var i=t.querySelectorAll(e);o.apply(a,i)}(e,t,a)}function m(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}var g=function(e,t){return new _(e,t)};g.isFunction=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType};var v=/^(?:\s*(<[\w\W]+>)|#([\w-]+))$/,b=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,P=/<|&#?\w+;/,D=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,_=function(t,a){var o,i,r,n,s=j;if(!t)return this;if("string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>3?[null,t,null]:v.exec(t))||!i[1]&&a)return!a||a instanceof _?(a||s).find(t):this.constructor(a).find(t);if(i[1]){if(a=a instanceof _?a[0]:a,g.merge(this,g.parseHTML(i[1],a&&a.nodeType?a.ownerDocument:document)),b.test(i[1])&&g.isPlainObject(a))for(r in a)g.isFunction(this[r])?this[r](a[r]):this.attr(r,a[r]);return this}return o=document.getElementById(i[2]),(n=this.pushStack(o?[o]:[])).isId=!0,n}return t.nodeType?(this[0]=t,this.length=1,this.singular=!0,this):(n=g.makeArray(t,this),t===e&&(n.singular=!0),n)};_.prototype={splice:t.splice,constructor:g,length:0,push:t.push,sort:t.sort,indexOf:t.indexOf},g.prototype=_.prototype,g.extend=_.prototype.extend=function(){var e,t,a,o,i,r=1,n=!1,s=arguments.length,l=arguments[0]||{};for("boolean"==typeof l&&(n=l,l=arguments[r]||{},r++),s==r&&(l=this,r--),g.isFunction(l)||"object"==typeof l||(l={});r<arguments.length;r++)for(e in o=arguments[r])(t=o[e])!==(a=l[e])&&"__proto__"!==e&&(t&&n?Array.isArray(t)?(i=a&&Array.isArray(a)?a:[],l[e]=g.extend(n,i,t)):g.isPlainObject(t)?(i=g.isPlainObject(a)?a:{},l[e]=g.extend(n,i,t)):void 0!==t&&(l[e]=t):l[e]=o[e]);return l};var L,C,w,T,x,S={startsWith:function(e,t){return 0===t.indexOf(e)},endsWith:function(e,t){return t.indexOf(e)===t.length-e.length},includes:function(e,t){return-1!==t.indexOf(e)}},A=function(e,t,a,o){if("number"==typeof a)a=a.toString();else if("string"!=typeof a&&"any"!=e&&"empty"!=e)return!1;switch(a=function(e,t){return!1===t.caseSensitive&&(e=e.toLowerCase()),t.trim&&(e=e.trim()),e}(a,o),e){case"any":return!0;case"empty":return!a;case"equals":return t===a;case"notEquals":return t!=a;default:return!!t&&S[e](t,a)}};function E(e){var t,a=!1,o=[],i=0,r=0,n=e.slice(0);if(e.sort((function(e,t){var o;return e===t?(a=!0,0):1&(o=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)?e===document||e.ownerDocument===c&&c.contains(e)?-1:t===document||t.ownerDocument===c&&c.contains(t)?1:n?n.indexOf(e)-n.indexOf(t):0:4&o?-1:1})),a){for(;t=e[i++];)t===e[i]&&(r=o.push(i));for(;r--;)e.splice(o[r],1)}return e}function M(e){return Math.round(parseFloat(e))}function $(){this.expando=g.expando+g.dataid++}g.extend({userAgent:(C=navigator.userAgent,w=C.match(/(opera|CriOS|FxiOS|EdgiOS|OPT|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d.]+)/i)||[],/trident/i.test(w[1])?{browser:"IE",version:((L=/\brv[ :]+([\d.]+)/g.exec(C)||[])[1]||"").split(".")[0],detailedVersion:["IE",L[1]]}:"Chrome"===w[1]&&null!=(L=C.match(/\b(OPR|Edge|UCBrowser|SamsungBrowser|YaBrowser|Edg|Falkon)\/([\d.]+)/))?("Edg"!==L[1]&&"EdgA"!==L[1]||(L[1]="Edge"),{browser:L[1],version:(L[2]||"").split(".")[0],detailedVersion:[L[1],L[2],w[1],w[2]]}):(w=w[2]?[w[1],w[2]]:[navigator.appName,navigator.appVersion],null==(L=C.match(/version\/([\d.]+)/i))||/android/i.test(C)||w.splice(1,1,L[1]),"CriOS"!==w[0]&&"FxiOS"!==w[0]&&"EdgiOS"!==w[0]&&"OPT"!==w[0]||(w[2]="Safari"),"MSIE"===w[0]&&(w[0]="IE"),{browser:w[0],version:(w[1]||"").split(".")[0],detailedVersion:w})),regex:{rnothtmlwhite:/[^\x20\t\r\n\f]+/g},_meta:{support:{}},_processInput:function(e,t,a,o,i,r,n){var s,l=e.length,d=0,p=null==t;if("object"===h(t))for(s in i=!0,t)g._processInput(e,s,t[s],o,!0);else if(void 0!==a&&(i=!0,g.isFunction(a)||(n=!0),p&&(n?(o.call(e,a),o=null):(p=o,o=function(e,t,a){return p.call(g(e),a)})),o))for(;d<l;d++)o(e[d],t,n?a:a.call(e[d],d,o(e[d],t)));return i?e:p?o.call(e):l?o(e[0],t):r},_camelCase:function(e){return e.replace(O,"ms-").replace(F,N)},_removeDupes:function(e,t,a){if(e.length>1){var o=E(e);return a.pushStack(t?o.reverse():o)}return a.pushStack(e)},_checkMatch:function(e,t){return!(t&&!g._matches(e,t))},_matches:function(e,t){var a,o,i,r,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;if(!f(t))return n.call(e,t);if(!((a=t.split(",")).length>1))return i=(t=a[0]).indexOf(":visible"),r=t.substring(0,i),n.call(e,r||"*")&&m(e);for(o=0;o<a.length;o++)if(g._matches(e,a[o]))return!0},expando:"lytedom"+Math.random().toString().replace(/\D/g,""),isWindow:function(e){return null!=e&&e===e.window},map:function(e,t){var a,o,i=e.length,n=[];if(u(e))for(a=0;a<i;a++)null!=(o=t(e[a],a))&&n.push(o);else for(a in e)null!=(o=t(e[a],a))&&n.push(o);return r.apply([],n)},grep:function(t,a,o){for(var i=0,r=!o,n=(t||[]).length,s=[];i<n;i++){!!a.call(e,t[i],i)===r&&s.push(t[i])}return s},each:function(e,t){var a,o;if(u(e))for(o=e.length,a=0;a<o&&!1!==t.call(e[a],a,e[a]);a++);else for(a in e)if(!1===t.call(e[a],a,e[a]))break;return e},merge:function(e,t){var a,o,i=t.length||0;for(a=e.length||0,o=0;o<i;o++)e[a+o]=t[o];return e.length=i+a,e},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},makeArray:function(e,t){var a=t||[];return null!=e&&(u(Object(e))?g.merge(a,"string"==typeof e?[e]:e):o.call(a,e)),a},inArray:function(e,t,a){return null==t?-1:i.call(t,e,a)},isPlainObject:function(e){var t,a;return!(!e||"[object Object]"!==s.call(e))&&(!(t=Object.getPrototypeOf(e))||"function"==typeof(a=l.call(t,"constructor")&&t.constructor)&&d.call(a)===p)},parseXML:function(e){var t,a=new DOMParser;try{t=a.parseFromString(e,"text/xml")}catch(e){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error("Unable to parse"+e);return t},Evaluate:function(e){var t=document.createElement("script");t.text=e,document.head.appendChild(t).parentNode.removeChild(t)},removeLeaks:function(e){for(var t,a,o=0;o<e.length;o++){if(t=e[o][g._dataPriv.expando]){if(t.events)for(a in t.events)g.ev.removeEvents(e[o],a,t.handle);t=void 0}t&&(t=void 0)}},search:function(e,t,a,o,i,r){var n,s,l=[],d=!1;e.constructor!=Array&&"object"==typeof e&&(e=[e],s="object"),i?(d=i.recursive||!1,!1===i.caseSensitive&&(a=a.toLowerCase()),i.trim&&(a=a.trim())):i={},t&&"string"==typeof t&&(t=t.split(".")),o?"equals"!==o&&"number"==typeof a&&(a=a.toString()):o="includes",t&&(n=t[0]);for(var p=0;p<e.length;p++){var c,h=e[p];if(n){if(h instanceof Object&&n in h){if(1===t.length&&A(o,a,h[n],i))l.push(h);else if(h[n]instanceof Array||h[n]instanceof Object){var u=this.search(h[n],t.slice(1),a,o,i,!0);if(d&&u)return u;if(u){l.push(h)}}}else if(h instanceof Array){u=this.search(h,t,a,o,i,!0);if(d&&u)return d;u&&l.push(h)}}else if(A(o,a,h,i))l.push(h);else if(h instanceof Array){var u=this.search(h,n,a,o,i,!0);if(d&&u)return u;u&&l.push(h)}if(d&&h[i.children])if(u=this.search(h[i.children],t,a,o,i,!0))c=l.length?l.concat(u):u,l=c}return r?!!l.length&&(d?l:"object"===s?l[0]:l):l}}),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){n["[object "+t+"]"]=t.toLowerCase()})),"undefined"!=typeof document&&(T=document.createElement("input"),x=document.createElement("select").appendChild(document.createElement("option")),T.type="checkbox",g._meta.support.checkOn=""!==T.value,g._meta.support.optSelected=x.selected,(T=document.createElement("input")).value="t",T.type="radio",g._meta.support.radioValue="t"===T.value,function(){function t(){if(r){var t,s=document.documentElement;n.style.cssText="position: absolute; left: 0px;width:300px;height:5px;",r.style.cssText="position:relative;width:200px;margin: auto; top: 1%;box-sizing:border-box;padding: 20px;",s.appendChild(n).appendChild(r),t=e.getComputedStyle(r),a=50===M(t.marginLeft),o="1%"!==t.top,i=200===M(t.width),s.removeChild(n),r=null}}var a,o,i,r=document.createElement("div"),n=document.createElement("div");g.extend(g._meta.support,{reliableMarginLeft:function(){return t(),a},reliablePixelPosition:function(){return t(),o},reliableBoxSizing:function(){return t(),i}})}()),g.needsContext=/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,g.dataid=0,g.extend($.prototype,{cache:function(e){var t=e[this.expando];return t||(t={},e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0})),t},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][g._camelCase(t)]},hasData:function(e){var t=e[this.expando];return void 0!==t&&!g.isEmptyObject(t)},access:function(e,t,a){return void 0===t||t&&"string"==typeof t&&void 0===a?this.get(e,t):(this.set(e,t,a),void 0!==a?a:t)},set:function(e,t,a){var o,i=this.cache(e);if("string"==typeof t)i[g._camelCase(t)]=a;else for(o in t)i[g._camelCase(o)]=t[o];return i},remove:function(e,t){var a,o=e[this.expando];if(void 0!==o){if(void 0!==t){a=(t=Array.isArray(t)?t.map(g._camelCase):(t=g._camelCase(t))in o?[t]:t.match(g.regex.rnothtmlwhite)||[]).length;for(;a--;)delete o[t[a]]}(void 0===t||g.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}}}),g._dataPriv=new $;var k=new $;function R(e){var t,a,o=0,i="",r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(a=e.firstChild;a;a=a.nextSibling)i+=R(a)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[o++];)i+=R(t);return i}_.prototype.extend({toArray:function(){return a.call(this)},add:function(e,t){return this.pushStack(E(g.merge(this.get(),g(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))},slice:function(){return this.pushStack(a.apply(this,arguments))},has:function(e){var t=g(e,this),a=t.length;return this.filter((function(){for(var e=0;e<a;e++)if(this!==t[e]&&this.contains(t[e]))return!0}))},is:function(e){return I(this,"string"==typeof e&&g.needsContext.test(e)?g(e):e||[],!1).length>0},not:function(e){return this.pushStack(I(this,e||[],!0))}}),_.prototype.extend({eq:function(e){var t=this.length;return e=e<0?t+e:e,this.pushStack(e<0||e>t-1?[]:[this[e]])},last:function(){return this.eq(-1)},first:function(){return this.eq(0)},end:function(){return this.prevObject||this.constructor()},map:function(e){return this.pushStack(g.map(this,(function(t,a){return e.call(t,a,t)})))},filter:function(e){return this.pushStack(I(this,e||[],!1))},find:function(e){var t,a,o=this,i=this.length;if("string"!=typeof e)return this.pushStack(g(e).filter((function(){for(a=0;a<i;a++)if(o[a]!==this&&o[a].contains(this))return!0})));for(t=this.pushStack([]),a=0;a<i;a++)y(e,this[a],t);return t.length>1?E(t):t},pushStack:function(e){var t;return(t=g.merge(this.constructor(),e)).prevObject=this,t},each:function(e){return g.each(this,e)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},empty:function(){return this.each((function(e,t){1===t.nodeType&&(g.removeLeaks(t.getElementsByTagName("*")),t.textContent="")})),this},text:function(e){return g._processInput(this,null,e,(function(e){return void 0===e?R(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),arguments.length)},clone:function(e,t){return e=!0===e,t=null==t?e:t,this.map((function(){return g.clone(this,e,t)}))}});var O=/^-ms-/,F=/-([a-z])/g;function N(e,t){return t.toUpperCase()}function I(e,t,a){return"string"==typeof t?(a&&(t=":not("+t+")"),function(e,t){for(var a=[],o=0,i=t.length;o<i;o++)g._matches(t[o],e)&&a.push(t[o]);return a}(t,g.grep(e,(function(e){return 1===e.nodeType})))):g.isFunction(t)?g.grep(e,(function(e,o){return!!t.call(e,o,e)!==a})):1===t.nodeType?g.grep(e,(function(e){return e===t!==a})):g.grep(e,(function(e){return i.call(t,e)>-1!==a}))}"undefined"!=typeof document&&function(){var e=document.createDocumentFragment().appendChild(document.createElement("div")),t=document.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),g._meta.support.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",g._meta.support.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var B={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};B.tbody=B.tfoot=B.colgroup=B.caption=B.thead,B.th=B.td,g.extend({parseHTML:function(e,t){var a=b.exec(e);return a?[t.createElement(a[1])]:function(e,t){var a,o,i,r,n=document.createDocumentFragment(),s=[];if(P.test(e)){for(r=n.appendChild(document.createElement("div")),a=(D.exec(e)[1]||"").toLowerCase(),o=B[a]||B._default,r.innerHTML=o[1]+e+o[2],i=o[0];i--;)r=r.lastChild;g.merge(s,r.childNodes),(r=n.firstChild).textContent=""}return s}(e)}}),g.extend({hasData:function(e){return k.hasData(e)||g._dataPriv.hasData(e)},data:function(e,t,a){return k.access(e,t,a)},removeData:function(e,t){k.remove(e,t)},_data:function(e,t,a){return g._dataPriv.access(e,t,a)},_removeData:function(e,t){g._dataPriv.remove(e,t)}}),_.prototype.extend({data:function(e,t){var a,o,i,r=this[0],n=r&&r.attributes;if(void 0===e){if(this.length&&(i=k.get(r),1===r.nodeType&&!g._dataPriv.get(r,"hasDataAttrs"))){for(a=n.length;a--;)n[a]&&0===(o=n[a].name).indexOf("data-")&&(o=g._camelCase(o.slice(5)),V(r,o,i[o]));g._dataPriv.set(r,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){k.set(this,e)})):g._processInput(this,null,t,(function(t){var a;if(r&&void 0===t)return void 0!==(a=k.get(r,e))||void 0!==(a=V(r,e))?a:void 0;this.each((function(){k.set(this,e,t)}))}),arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){k.remove(this,e)}))}});var H=/[A-Z]/g,U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/;function V(e,t,a){var o;if(void 0===a&&1===e.nodeType)if(o="data-"+t.replace(H,"-$&").toLowerCase(),"string"==typeof(a=e.getAttribute(o))){try{a=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:U.test(e)?JSON.parse(e):e)}(a)}catch(e){}k.set(e,t,a)}else a=void 0;return a}var j="undefined"!=typeof document?g(document):{};g.parse=JSON.parse,e.$L=g,e.lyteDomObj=_}("undefined"==typeof window?this:window),function(e){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,25)},a=function(){this.readOps=[],this.writeOps=[]};a.prototype={constructor:a,scheduled:!1,measure:function(e,t){return e=t?e.bind(t):e,this.readOps.push(e),this.stagingFn(),e},mutate:function(e,t){return e=t?e.bind(t):e,this.writeOps.push(e),this.stagingFn(),e},stagingFn:function(){this.scheduled||(this.scheduled=!0,t(this.executeTasks.bind(this)))},executeTasks:function(){var e;try{this.execute(this.readOps),this.execute(this.writeOps)}catch(t){e=t}if(this.scheduled=!1,(this.readOps.length||this.writeOps.length)&&this.stagingFn(),e){if(!this.catch)throw e;this.catch(e)}},execute:function(e){for(var t;t=e.shift();)t()},clear:function(e){return this.remove(this.readOps,e)||this.remove(this.writeOps,e)},remove:function(e,t){var a=e.indexOf(t);return-1!==a&&!!e.splice(a,1)},catch:null},e.$L.fastdom=new a}("undefined"!=typeof window?window:this),function(e){var t=/\r/g,a=["Top","Right","Bottom","Left"],o=/^(?:input|select|textarea|button)$/i,i=/^(?:a|area)$/i,r=/^--/,n=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,s=new RegExp("^(?:([+-])=|)("+n+")([a-z%]*)$","i"),l=/^(none|table(?!-c[ea]).+)/,d=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),p={letterSpacing:"0",fontWeight:"400"},c=/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,h={set:function(e,t,a){return!1===a?$L.removeAttr(e,t):e.setAttribute(t,t),t}};function u(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function f(e,t,a){var o,i,r=parseFloat(function(e,t){return $L.css(e,t)}(e,t));a&&a[3]||$L.cssNumber[t];return a&&(o=r||0,i=a[1]?o+(a[1]+1)*a[2]:+a[2]),i}function y(e){return Array.isArray(e)?e:function(e){return(e&&e.match&&e.match($L.regex.rnothtmlwhite)||[]).join(" ")}(e).match($L.regex.rnothtmlwhite)||[]}function m(e){return e.getAttribute&&e.getAttribute("class")||""}function g(t){var a=t.ownerDocument.defaultView;return a&&a.opener||(a=e),a.getComputedStyle(t)}function v(e,t,a){var o;return(a=a||g(e))&&(o=a.getPropertyValue(t)||a[t]),void 0!==o?o+"":o}function b(e,t,o,i,r,n){var s="width"===t?1:0,l=0,d=0;if(o===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===o&&(d+=$L.css(e,"margin"+a[s],!0,r)),i?("content"===o&&(d-=$L.css(e,"padding"+a[s],!0,r)),"margin"!==o&&(d-=$L.css(e,"border"+a[s]+"Width",!0,r))):(d+=$L.css(e,"padding"+a[s],!0,r),"padding"!==o?d+=$L.css(e,"border"+a[s]+"Width",!0,r):l+=$L.css(e,"border"+a[s]+"Width",!0,r));return!i&&n>=0&&(d+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-n-d-l-.5))),d}function P(e,t,a){var o=g(e),i=v(e,t,o),r="border-box"===$L.css(e,"boxSizing",!1,o),n=r;if(d.test(i)){if(!a)return i;i="auto"}return n=n&&($L._meta.support.reliableBoxSizing()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===$L.css(e,"display",!1,o))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],n=!0),(i=parseFloat(i)||0)+b(e,t,a||(r?"border":"content"),n,o,i)+"px"}function D(e,t,a){var o,i,r={};for(i in t)r[i]=e.style[i],e.style[i]=t[i];for(i in o=a.call(e),t)e.style[i]=r[i];return o}$L.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var a="pageYOffset"===t;lyteDomObj.prototype[e]=function(o){return $L._processInput(this,e,o,(function(e,o,i){var r;if($L.isWindow(e)?r=e:9===e.nodeType&&(r=e.defaultView),null==i)return r?r[t]:e[o];r?r.scrollTo(a?r.pageXOffset:i,a?i:r.pageYOffset):e[o]=i}))}})),$L.each({Height:"height",Width:"width"},(function(e,t){$L.each({padding:"inner"+e,content:t,"":"outer"+e},(function(a,o){lyteDomObj.prototype[o]=function(i,r){var n=a||(!0===i||!0===r?"margin":"border");return $L._processInput(this,t,"boolean"!=typeof i?i:void 0,(function(t,a,i){var r;return $L.isWindow(t)?0===o.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?$L.css(t,a,n):$L.style(t,a,i,n)}))}}))})),$L.texthighlighter=function(e,t,a,o,i){var r=new RegExp(t,"gi"),n=document.createDocumentFragment();if(a=a||"span",t.length>0){var s=e.match(r),l=0;for(l=0;s&&l<s.length;l++){var d,p=e.indexOf(s[l]),c=s[l];(d=e.slice(0,p)).length&&n.appendChild(document.createTextNode(d));var h=document.createElement(a);h.innerText=c,n.appendChild(h),e=e.slice(p+s[l].length)}}e.length&&((d=e.slice(0,e.length))&&n.appendChild(document.createTextNode(d)));return n},lyteDomObj.prototype.extend({path:function(){for(var e,t,a=this[0],o=[];a&&1===a.nodeType&&"BODY"!==a.tagName;){if(e=1,t="",t+=a.nodeName.toLowerCase(),a.id)t+="#"+a.id;else{for(;a.previousElementSibling;)a=a.previousElementSibling,e++;t+=":nth-child("+e+")"}o.unshift(t),a=a.parentNode}return o.join(" > ")},closest:function(e,t){var a=0,o=this.length,i=[];if(!$L.needsContext.test(e))for(;a<o;a++){var r=this[a];do{if(1===r.nodeType&&$L(r).is(e)){i.push(r);break}r=r.parentNode}while(r&&r!==t)}return $L._removeDupes(i,!1,this)},css:function(e,t){return $L._processInput(this,e,t,(function(e,t,a){var o=0,i={};if(Array.isArray(t)){for(;o<t.length;o++)i[t[o]]=$L.css(e,t[o]);return i}return null!=a?$L.style(e,t,a):$L.css(e,t)}))},removeProp:function(e){return $L.each(this,(function(){delete this[$L.propNames[e]||e]}))},removeAttr:function(e){return $L.each(this,(function(t,a){$L.removeAttr(a,e)}))},attr:function(e,t){return $L._processInput(this,e,t,$L.attr)},prop:function(e,t){return $L._processInput(this,e,t,$L.prop)},siblings:function(e){var t;return t=$L.map(this,(function(t,a){var o,i=[],r=t.parentElement.children;for(o=0;o<r.length;o++)t!==r[o]&&1===r[o].nodeType&&$L._checkMatch(r[o],e)&&i.push(r[o]);return i})),$L._removeDupes(t,!1,this)},children:function(e){var t;return t=$L.map(this,(function(t,a){var o,i=[],r=t.children,n=r.length;for(o=0;o<n;o++)1===r[o].nodeType&&$L._checkMatch(r[o],e)&&i.push(r[o]);return i})),this.pushStack(t)},prevUntil:function(e,t,a){var o;return o=$L.map(this,(function(o,i){var r=[];for(a&&$L._checkMatch(o,t)&&r.push(o);o=o.previousSibling;){if(1===o.nodeType&&$L(o).is(e)){a&&$L._checkMatch(o,t)&&r.push(o);break}1===o.nodeType&&$L._checkMatch(o,t)&&r.push(o)}return r})),$L._removeDupes(o,!0,this)},nextUntil:function(e,t,a){var o;return o=$L.map(this,(function(o,i){var r=[];for(a&&$L._checkMatch(o,t)&&r.push(o);o=o.nextSibling;){if(1===o.nodeType&&$L(o).is(e)){a&&$L._checkMatch(o,t)&&r.push(o);break}1===o.nodeType&&$L._checkMatch(o,t)&&r.push(o)}return r})),$L._removeDupes(o,!1,this)},parentsUntil:function(e,t){var a;return a=$L.map(this,(function(a,o){for(var i=[];(a=a.parentNode)&&(1!==a.nodeType||!$L(a).is(e));)1===a.nodeType&&$L._checkMatch(a,t)&&i.push(a);return i})),$L._removeDupes(a,!0,this)},parents:function(e){var t;return t=$L.map(this,(function(t,a){for(var o=[];(t=t.parentNode)&&9!==t.nodeType;)1===t.nodeType&&$L._checkMatch(t,e)&&o.push(t);return o})),$L._removeDupes(t,!0,this)},parent:function(e){var t=$L.map(this,(function(t,a){var o=t.parentNode;return o&&11!==o.nodeType&&$L._checkMatch(o,e)?o:null}));return $L._removeDupes(t,!1,this)},offsetParent:function(){return this.map((function(e,t){for(var a=t.offsetParent;a&&"static"===$L.css(a,"position");)a=a.offsetParent;return a||document.documentElement}))},offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t,a){$L.offset.setOffset(a,e,t)}));var t,a,o=this[0];return o?o.getClientRects().length?(t=o.getBoundingClientRect(),a=o.ownerDocument.defaultView,{top:t.top+a.pageYOffset,left:t.left+a.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,a,o=this[0],i={top:0,left:0};if("fixed"===$L.css(o,"position"))t=o.getBoundingClientRect();else{for(t=this.offset(),a=o.ownerDocument,e=o.offsetParent||a.documentElement;e&&(e===a.body||e===a.documentElement)&&"static"===$L.css(e,"position");)e=e.parentNode;e&&e!==o&&1===e.nodeType&&((i=$L(e).offset()).top+=parseFloat($L.css(e,"borderTopWidth",!0)),i.left+=parseFloat($L.css(e,"borderLeftWidth",!0)))}return{top:t.top-i.top-parseFloat($L.css(o,"marginTop",!0)),left:t.left-i.left-parseFloat($L.css(o,"marginLeft",!0))}}},next:function(e){var t=$L.map(this,(function(t,a){do{t=t.nextSibling}while(t&&1!=t.nodeType);return t&&1===t.nodeType&&$L._checkMatch(t,e)?t:null}));return this.pushStack(t)},nextAll:function(e){var t=$L.map(this,(function(t,a){var o=[];do{(t=t.nextSibling)&&1===t.nodeType&&$L._checkMatch(t,e)&&o.push(t)}while(t);return o}));return $L._removeDupes(t,!1,this)},prev:function(e){var t=$L.map(this,(function(t,a){do{t=t.previousSibling}while(t&&1!=t.nodeType);return t&&1===t.nodeType&&$L._checkMatch(t,e)?t:null}));return this.pushStack(t)},prevAll:function(e){var t=$L.map(this,(function(t,a){var o=[];do{(t=t.previousSibling)&&1===t.nodeType&&$L._checkMatch(t,e)&&o.push(t)}while(t);return o}));return $L._removeDupes(t,!0,this)},contents:function(){var e=$L.map(this,(function(e){return e.nodeName&&"iframe"===e.nodeName.toLowerCase()?e.contentDocument:(e.nodeName&&"template"===e.nodeName.toLowerCase()&&(e=e.content||e),$L.merge([],e.childNodes))}));return this.pushStack(e)},toggleClass:function(e,t){var a,o,i,r,n=this;return $L.isFunction(e)?n.each((function(a,o){$L(o).toggleClass(e.call(o,a,m(o),t),t)})):"boolean"==typeof t?(t?n.addClass(e):n.removeClass(e),this):"string"==typeof t?(r=[].slice.call(arguments),this.toggleClass(r)):$L.each(n,(function(t,r){if(1===r.nodeType)if("string"==typeof e||Array.isArray(e)){var n=y(e);if(n.length)for(a=0;a<n.length;a++)(o=$L(r)).hasClass(n[a])?o.removeClass(n[a]):o.addClass(n[a])}else(i=m(r))&&$L._dataPriv.set(r,"__classname__",i),i||!1===e?r.setAttribute("class",""):r.setAttribute("class",$L._dataPriv.get(r,"__classname__"))}))},addClass:function(e){var t,a,o,i,r=this,n=this.length;if($L.isFunction(e))return r.each((function(t,a){$L(a).addClass(e.call(a,t,m(a)))}));if(arguments.length>1)return i=[].slice.call(arguments),this.addClass(i);for(o=y(e),t=0;t<n;t++)if(1===r[t].nodeType)for(a=0;a<o.length;a++)"string"==typeof o[a]&&o[a]&&(r[t].classList?r[t].classList.add(o[a]):r[t].className+=" "+o[a]);return this},removeClass:function(e){var t,a,o,i=this,r=this.length,n=0,s=0,l=!1;if($L.isFunction(e))return i.each((function(t,a){$L(a).removeClass(e.call(a,t,m(a)))}));if(!arguments.length)return this.attr("class","");if(arguments.length>1)return t=[].slice.call(arguments),this.removeClass(t);for(a=y(e),n=0;n<r;n++)if(1===i[n].nodeType){for(o=" "+(o=m(i[n]))+" ",s=0;s<a.length;s++)"string"==typeof a[s]&&a[s]&&(i[n].classList?i[n].classList.remove(a[s]):(l=!0,o.replace(" "+a[s]+" "," ")));l&&(i[n].setAttribute("class",o),l=!1)}return this},hasClass:function(e){var t,a=this.length;for(e=" "+e+" ",t=0;t<a;t++)if(1===this[t].nodeType&&-1!==(" "+m(this[t])+" ").indexOf(e))return!0;return!1},val:function(e){var a,o,i,r=this[0];if(void 0===e){if(r){if((i=$L.valHooks[r.type]||$L.valHooks[r.nodeName.toLowerCase()])&&"get"in i&&void 0!==(a=i.get(r,"value")))return a;a=r.value}return"string"==typeof a?a.replace(t,""):null==a?"":a}return o=$L.isFunction(e),this.each((function(t,a){var i;null==(i=o?e.call(a,t,$L(a).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=$L.map(i,(function(e){return null==e?"":e+""})));var r=$L.valHooks[this.type]||$L.valHooks[this.tagName.toLowerCase()];r&&"set"in r&&void 0!==r.set(this,i,"value")||(this.value=i)}))}}),$L.cssHooks={borderWidth:{set:L},padding:{set:L},marginLeft:{get:function(e,t){if(t&&!$L._meta.support.reliableMarginLeft())return e.getBoundingClientRect().left-D(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left}))+"px"}},opacity:{get:function(e,t){if(t){var a=v(e,"opacity");return""===a?"1":a}}}};var _={position:"absolute",visibility:"hidden",display:"block"};function L(e,t,a){var o=s.exec(t);return o?Math.max(0,o[2]-(a||0))+(o[3]||"px"):t}$L.each(["top","left"],(function(e,t){$L.cssHooks[t]={get:function(e,a){if(a&&!$L._meta.support.reliablePixelPosition()){var o=v(e,t);return d.test(o)?$L(e).position()[t]+"px":o}}}})),$L.each(["width","height"],(function(e,t){$L.cssHooks[t]={get:function(e,a,o){if(a)return!l.test($L.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?P(e,t,o):D(e,_,(function(){return P(e,t,o)}))},set:function(e,a,o){var i,r=o&&g(e),n=o&&"border-box"===$L.css(e,"boxSizing",!1,r),l=o&&b(e,t,o,n,r);return l&&(i=s.exec(a))&&"px"!==(i[3]||"px")&&(e.style[t]=a,a=$L.css(e,t)),L(e,a,l)}}})),$L.offset={setOffset:function(e,t,a){var o,i,r,n,s,l,d=$L.css(e,"position"),p=$L(e),c={};return"static"===d&&p.css("position","relative"),s=p.offset(),r=$L.css(e,"top"),l=$L.css(e,"left"),("absolute"===d||"fixed"===d)&&(r+l).indexOf("auto")>-1?(n=(o=p.position()).top,i=o.left):(n=parseFloat(r)||0,i=parseFloat(l)||0),$L.isFunction(t)&&(t=t.call(e,a,$L.extend({},s))),null!=t.top&&(c.top=t.top-s.top+n),null!=t.left&&(c.left=t.left-s.left+i),p.css("top",c.top),p.css("left",c.left),p}},$L.extend({cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},propNames:{cellpadding:"cellPadding",cellspacing:"cellSpacing",class:"className",colspan:"colSpan",contenteditable:"contentEditable",for:"htmlFor",frameborder:"frameBorder",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},attrHooks:{type:{set:function(e,t){if(!$L._meta.support.radioValue&&u(e,"input")&&"radio"===t){var a=e.value;return e.setAttribute(type,t),a&&(e.value=a),t}}}},removeAttr:function(e,t){var a,o=0;for(t=t&&t.match($L.regex.rnothtmlwhite)||[];a=t[o++];)e.removeAttribute(a)},style:function(e,t,a,o){var i,n,l=r.test(t),d=typeof a;e&&1===e.nodeType&&(i=e.style,n=$L.cssHooks[t]||$L.cssHooks[a],"string"===d&&(ret=s.exec(a))&&ret[1]&&(a=f(e,t,ret),d="number"),"number"===d&&(a+=$L.cssNumber[t]?"":"px"),a=n&&"set"in n?n.set(e,a,o):a,l?i.setProperty(e,a):i[t]=a)},css:function(e,t,a,o){var i,r,n=$L._camelCase(t);return(r=$L.cssHooks[t]||$L.cssHooks[n])&&"get"in r&&(i=r.get(e,!0,a)),void 0===i&&(i=v(e,t,o)),"normal"===i&&t in p&&(i=p[t]),a?parseFloat(i)||0:i},attr:function(e,t,a){var o,i;return t=t.toLowerCase(),o=$L.attrHooks[t]||c.test(t)&&h,void 0!==a?null===a?void $L.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,t,a))?i:(e.setAttribute(t,a+""),a):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=e.getAttribute(t))?void 0:i},prop:function(e,t,a){var o,i;return t=$L.propNames[t]||t,o=$L.propHooks[t],void 0===a?o&&"get"in o&&void 0!==(i=o.get(e,t))?i:e[t]:o&&"set"in o&&void 0!==(i=o.set(e,a,t))?i:e[t]=a},valHooks:{checkbox:{set:function(e,t){Array.isArray(t)&&(e.checked=$L.inArray($L(e).val(),t)>-1)},get:function(e){null===e.getAttribute("value")||e.value}},radio:{set:function(e,t){if(Array.isArray(t))return e.checked=$L.inArray($L(e).val(),t)>-1},get:function(e){return null===e.getAttribute("value")?"on":e.value}},select:{get:function(e){var t,a,o,i=e.options,r=e.selectedIndex,n="select-one"===e.type,s=n?null:[],l=n?r+1:i.length;for(o=r<0?l:n?r:0;o<l;o++)if(((a=i[o]).selected||o===r)&&!a.disabled&&(!a.parentNode.disabled||!u(a.parentNode,"optgroup"))){if(t=$L(a).val(),n)return t;s.push(t)}return s},set:function(e,t){for(var a,o,i=e.options,r=$L.makeArray(t),n=i.length;n--;)((o=i[n]).selected=$L.inArray($L.valHooks.option.get(o),r)>-1)&&(a=!0);return a||(e.selectedIndex=-1),r}},option:{get:function(e){var t=$L.attr(e,"value");return null!=t?t:($L(e).text().match($L.regex.rnothtmlwhite)||[]).join(" ")}}}}),$L.propHooks={tabIndex:{get:function(e){var t=e.getAttribute("tabindex");return t?parseInt(t,10):o.test(e.nodeName)||i.test(e.nodeName)&&e.href?0:-1}}}}(null==window?this:window),function(e){var t=[],a="initial",o=/^key/,i=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function r(){for(var e;e=t.shift();)e.call()}function n(e){for(var t in e)if(e[t].length>0)return!1;return!0}function s(e,t,a,o,i,r){var s;return"boolean"==typeof a&&(a=c),"function"!=typeof a?e:(s=a,r&&(a=function(e){var t,o=e.delegateTarget,i=$L._dataPriv.get(o),r=e.type,l=i.events[r];for(t=0;t<l.length;t++)if(l[t].handler===a){l.splice(t,1);break}n(i.events)&&o.removeEventListener(r,i.handle),s.apply(this,arguments)}),a.unId||(a.unId=$L.ev.unId++),$L.each(e,(function(e,r){var n,s,l,d,p=$L._dataPriv.get(r);for(p.events||(p.events={}),n=(d=t.match($L.regex.rnothtmlwhite)).length,(l=p.handle)||(p.handle=l=function(e){$L.ev.triggered!==e.type&&$L.ev.dispatch.apply(r,arguments)});n--;)s=d[n],p.events[s]||(p.events[s]=[]),p.events[s].push({handler:a,type:s,selectors:o,data:i}),r.addEventListener(s,l)})))}function l(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function d(e){e.stopPropagation()}$L.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){lyteDomObj.prototype[t]=function(e){return this.on(t,e)}})),lyteDomObj.prototype.ready=function(e){return t.push(e),"initial"===a&&"ready"!==document.readyState&&"complete"!==document.readyState?(a="registered",document.addEventListener("DOMContentLoaded",(function(){r()}))):"ready"!==document.readyState&&"complete"!==document.readyState||r(),this},$L.each(["blur","focus","focusin","focusout","resize","bindScroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","contextmenu"],(function(e,t){lyteDomObj.prototype[t]=function(e,a){var o="bindScroll"===t?"scroll":t;return arguments.length>0?this.on(o,null,e,a):this.trigger(o)}})),$L.debounce=function(e,t,a){var o,i=function(){var i,r=arguments,n=this,s=function(){i=e.apply(n,r)},l=!t&&a;return l?s():(o&&clearTimeout(o),o=setTimeout(s,t)),i};return i.cancel=function(){clearTimeout(o),o=null},i},lyteDomObj.prototype.extend({on:function(e,t,a,o){return $L.ev.add(this,e,t,a,o)},one:function(e,t,a,o){return $L.ev.add(this,e,t,a,o,!0)},off:function(e,t,a){var o,i;if(e.preventDefault&&e.handleObj)return i=e.handleObj,$L(e.delegateTarget).off(e.type,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(a=t,t=void 0),!1===a&&(a=c),$L.each(this,(function(){$L.ev.removeEvents(this,e,t,a)}))},trigger:function(e,t){return this.each((function(a,o){$L.ev.trigger(e,t,o)}))},triggerHandler:function(e,t){var a=this[0];if(a)return $L.ev.trigger(e,t,a,!0)}}),$L.ev={unId:1,removeEvents:function(e,t,a,o){var i,r,n,s,l,d,p,c=$L._dataPriv.hasData(e)&&$L._dataPriv.get(e),h=(c||{}).events,u=0;if(h){for(n=(i=(t||"").match($L.regex.rnothtmlwhite)||[]).length;u<n;u++){for(l=h[s=i[u]]||[],r=0;r<l.length;r++)p=(d=l[r]).handler,a&&a!==d.selector&&("**"!==a||!d.selector)||o&&p.unId!==o.unId||(l.splice(r,1),r--);l.length||(e.removeEventListener(s,c.handle),delete h[s])}$L.isEmptyObject(h)&&$L._dataPriv.remove(e,"events handle")}},add:function(e,t,a,o,i,r){var n;if("object"==typeof t){if("string"==typeof a)for(n in t)$L.ev.add(e,n,a,o,t[n],r);else for(n in t)$L.ev.add(e,n,void 0,a,t[n],r);return e}return null==o&&null==i?s(e,t,a,void 0,void 0,r):null==i?"string"==typeof a?s(e,t,o,a,void 0,r):s(e,t,o,void 0,a,r):s(e,t,i,a,o,r)},trigger:function(t,a,o,i){var r,n,s,p,c,h,u,f=[o||document],y=0,m="string"==typeof t?t:t.type;a=void 0===a?[]:a;if(n=h=o=o||document,r=o.parentNode,c="on"+(m=(t=t[$L.expando]?t:new $L.Event(m,"object"==typeof t&&t)).type),t.target||(t.target=o),s=$L.merge([t],a),u=$L.ev.special[m]||{},i||!u.trigger||!1!==u.trigger.apply(o,a)){if(!i&&!u.noBubble&&!$L.isWindow(o)){for(;r;r=r.parentNode)f.push(r),n=r;n===(o.ownerDocument||document)&&f.push(n.defaultView||n.parentWindow||e)}for(;(r=f[y++])&&!t.isPropagationStopped();)h=r,(p=($L._dataPriv.get(r,"events")||{})[m]&&$L._dataPriv.get(r,"handle"))&&p.apply(r,s),(p=c&&r[c])&&p.apply&&l(r)&&(t.result=p.apply(r,s),!1===t.result&&t.preventDefault());return i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),s)||!l(o)||c&&$L.isFunction(o[m])&&!$L.isWindow(o)&&((n=o[c])&&(o[c]=null),$L.ev.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,d),o[m](),t.isPropagationStopped()&&h.removeEventListener(m,d),$L.ev.triggered=void 0,n&&(o[c]=n)),t.result}},addProp:function(e,t){Object.defineProperty($L.Event.prototype,e,{enumerable:!0,configurable:!0,get:$L.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},dispatch:function(e){var t,a,o,i,r,n,s,l,d,p=this,c=e.expando?e:new $L.Event(e),h=$L._dataPriv.get(p),u=h.events[c.type],f=[],y=[],m={context:p,handler:[]};for(c.delegateTarget=this,f[0]=c,t=1;t<arguments.length;t++)f[t]=arguments[t];for(t=0;t<u.length;t++)if(o=(a=u[t]).handler,i=a.selectors,d=a.data,!i||"click"===c.type&&c.button>=1)"click"===c.type&&c.button>=1||m.handler.push(a);else for(r=e.target;r!==p;r=r.parentNode)1!==r.nodeType||"click"===e.type&&!0===r.disabled||$L._matches(r,i)&&(c.currentTarget=r,y.push({context:r,handler:[a]}));for(y.push(m),t=0;t<y.length&&!c.isPropagationStopped();t++)for(o=y[t].handler,s=y[t].context,c.currentTarget=s,r=0;r<o.length&&!c.isImmediatePropagationStopped();r++)l=o[r].handler,d=o[r].data,c.data=d,c.handleObj=o[r],n=l.apply(s,f),!1===(c.result=n)&&(c.preventDefault(),c.stopPropagation());return c.result},triggered:void 0,special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)return this.focus(),!1}},blur:{trigger:function(){if(this!==document.activeElement&&this.blur)return this.blur(),!1}},click:{trigger:function(){if("input"===this.nodeName.toLowerCase()&&"checkbox"===this.type&&this.click)return this.click(),!1}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};var p=function(){return!0},c=function(){return!1};$L.Event=function(e,t){if(this===$L)return new $L.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented?p:c,this.target=e.target):this.type=e,t&&$L.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[$L.expando]=!0},$L.Event.prototype={constructor:$L.event,isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},$L.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&o.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&i.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},$L.ev.addProp)}(null==window?this:window),function(e){var t,a=/^(HEAD|GET)$/,o=/\?/,i=new Date,r=/(.*?):\s*(.*?)[\r\n]/g,n=/#.*$/,s=/([?&])_=[^&]*/;function l(e){var t=[];return $L.each(e,(function(){!function(e,a){var o;o=$L.isFunction(a)?a():a,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(o)}(this.name,this.value)})),t.join("&")}function d(e){return"string"==typeof e?e:Array.isArray(e)?l(e):function(e){var t=[];for(var a in e)t[t.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==e[a]?"":e[a]);return t.join("&")}(e)}function p(e,t){for(var a in t)a=a.toLowerCase(),e.hasOwnProperty(a)||(e[a]=t[a])}function c(e){return"text"!==(e.responseType||"text")||"string"!=typeof e.responseType}function h(e,t,a){for(var o;o=e.shift();)o.apply(t,a)}"undefined"!=typeof document&&((t=document.createElement("a")).href=e.location.href),$L.extend({active:0,ajaxSettings:{contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/,script:/\b(?:java|ecma)script\b/},converters:{"* text":String,"text text":function(e){return e},"text html":function(e){return e},"text json":JSON.parse,"text xml":$L.parseXML,"text javascript":$L.Evaluate},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},accepts:{"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"}},ajaxSetup:function(e){for(var t in e)$L.ajaxSettings[t]=e[t]},ajax:function(e,l){"object"==typeof e&&(e=(l=e).url),function(e){var t,a=["accepts","converters","contents","headers"],o=$L.ajaxSettings;for(t in o)~a.indexOf(t)?p(e[t]?e[t]:e[t]={},o[t]):e[t]=null==e[t]?o[t]:e[t]}(l||(l={})),l.url||(l.url=e);var u,f,y,m,g,v,b,P,D,_,L,C,w,T,x,S=[],A=[],E=[],M=l.xhr,$=(l.type||"GET").toUpperCase(),k=a.test($),R=l.context||l,O=l.context&&(l.context instanceof lyteDomObj||l.nodeType)?$L(l.context):$L.ev,F=l.beforeSend,N="cancelled",I={},B={readyState:0,setRequestHeader:function(e,t){return null==_&&t&&(I[e]=t),this},overrideMimeType:function(e){return null==_&&(l.mimeType=e),this},getAllResponseHeaders:function(){return _?b:null},getResponseHeader:function(e){var t;if(_){if(!P)for(P={};t=r.exec(b);)P[t[1].toLowerCase()]=t[2];return(t=P[e.toLowerCase()])||null}},abort:function(e){var t=e||N;return H&&H.abort(),U(0,t),this},then:function(e,t){return S.push(e),A.push(t),l.async||(w?h(S,R,[T,this.statusText,this]):h(A,R,[this,this.statusText,x])),this},fail:function(e){return A.push(e),l.async||w||h(A,R,[this,this.statusText,x]),this},always:function(e){return E.push(e),l.async||h(E,R,[this,this.statusText]),this},done:function(e){return S.push(e),!l.async&&w&&h(S,R,[T,this.statusText,this]),this}};if(l.dataTypes=(l.dataType||"*").toLowerCase().match($L.regex.rnothtmlwhite),u=l.async="boolean"!=typeof l.async||l.async,f=l.global="boolean"!=typeof l.global||l.global,D=l.processData="boolean"!=typeof l.processData||l.processData,t&&null==l.crossDomain){C=document.createElement("a");try{C.href=l.url,C.href=C.href,l.crossDomain=C.protocol+"//"+C.host!=t.protocol+"//"+t.host}catch(e){l.crossDomain=!0}}for(v in y=l.url.replace(n,""),D&&(k?(m=l.url.slice(y.length),l.data&&(y=function(e,t){var a;return a=d(t),e+(o.test(e)?"&":"?")+a}(y,l.data)),!1===l.cache&&(y=y.replace(s,"$1"),m=(o.test(y)?"&":"?")+"_="+i+++m),l.url=y+m):l.data&&(l.data=d(l.data))),$L.ev&&f&&0==$L.active++&&$L.ev.trigger("ajaxStart"),(l.data&&!k&&!1!==l.contentType||l.contentType)&&B.setRequestHeader("Content-Type",l.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),l.headers)B.setRequestHeader(v,l.headers[v]);if(B.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?",*/*; q=0.01":""):l.accepts["*"]),F&&(!1===F.call(R,B,l)||_))return B.abort();if(N="abort",l.success&&S.push(l.success),l.error&&A.push(l.error),l.complete&&E.push(l.complete),B.readyState=1,O&&O.trigger&&f&&O.trigger("ajaxSend",[B,l]),_)return B;var H=M||new XMLHttpRequest;for(L in H.open($,l.url,u),l.xhrFields)H[L]=l.xhrFields[L];for(v in l.mimeType&&B.overrideMimeType(l.mimeType),l.crossDomain||I["X-Requested-With"]||(I["X-Requested-With"]="XMLHttpRequest"),I)H.setRequestHeader(v,I[v]);function U(e,t,a,o,i){var r=t;_||(_=!0,b=o||"",B.readyState=e>0?4:0,(w=e>=200&&e<300||304===e)?(a=function(e,t,a,o){var i,r,n=t.dataTypes,s=t.contents;"*"===n[0]&&(i=t.mimeType||a.getResponseHeader("content-type"));if(i)for(r in s)if(s[r].test(i)){n[0]=r;break}"*"===n[0]&&(n[0]=o);return function(e,t,a,o,i){var r,n,s;if(e===t)return{data:a,state:"success"};if("HEAD"===i.type)return;for(var l in n=e+" "+t,i.converters)if(l.toLowerCase()===n){s=i.converters[l];break}o.responseText=a;try{r=s?s(a):""}catch(e){return{data:void 0,state:"parseerror",error:e}}$L.ajaxSettings.responseFields[t]&&(o[$L.ajaxSettings.responseFields[t]]=r);return{data:r,state:"success"}}(o,n[0],e,a,t)}(a,l,B,i),304==e?r="notmodified":204==e||"HEAD"==l.type?r="nocontent":(r=a.state,T=a.data,x=a.error,w=!x)):(B.responseText=a,!e&&r||(r="error",e=e<0?0:e),x=r),B.status=e,B.statusText=(r||t)+"",w?S.length>0&&h(S,R,[T,r,B]):A.length>0&&h(A,R,[B,r,x]),O&&O.trigger&&f&&O.trigger(w?"ajaxSuccess":"ajaxError",[B,l,w?T:x]),E.length>0&&h(E,R,[B,r]),O&&O.trigger&&f&&(O.trigger("ajaxComplete",[B,l]),$L.ev&&!--$L.active&&$L.ev.trigger("ajaxStop")))}return g=!k&&l.data||null,H.onload=function(){var e=c(H);U(H.status,H.statusText,e?H.response:H.responseText,H.getAllResponseHeaders(),e?"binary":"text")},H.onerror=H.onabort=function(){var e=c(H);U(H.status,H.statusText,e?H.response:H.responseText,H.getAllResponseHeaders(),e?"binary":"text")},l.async&&(H.timeout=l.timeout?l.timeout:0,H.ontimeout=function(){U(0,"timeout")}),H.send(g),B},getScript:function(e,t,a){return $L.get(e,t,a)},getJSON:function(e,t){return $L.get(e,void 0,t)}}),$L.each(["get","post"],(function(e,t){$L[t]=function(e,a,o,i){return $L.isFunction(a)&&(i=i||o,o=a,a=void 0),$L.ajax($L.extend({type:t,url:e,data:a,dataType:i,success:o},$L.isPlainObject(e)&&e))}}))}("undefined"==typeof window?this:window),function(){var e=function(){var e="reverse",t=document.createElement("div");t.innerHTML="<div style='position: absolute; left: 0; top: 0; overflow: hidden; width: 10px;height: 1px;'><div style='width: 20px; height: 1px;'></div></div>";var a=t.children[0];return document.body.appendChild(a),a.scrollLeft>0?e="default":(a.scrollLeft=-5,a.scrollLeft<0&&(e="negative")),document.body.removeChild(a),e};"undefined"!=typeof document&&("ready"!==document.readyState&&"complete"!==document.readyState?document.addEventListener("DOMContentLoaded",(function(){$L.rtlScrollType=e()})):"ready"!==document.readyState&&"complete"!==document.readyState||($L.rtlScrollType=e()))}(),window._lyteUiUtils=window._lyteUiUtils||{version:"3.92.0"},window._lyteUiUtils.cboxId=0,window._lyteUiUtils.rbuttonId=0,window._lyteUiUtils.calId=0,function(){var e={};_lyteUiUtils.resolveDefaultValue=function(a,o,i){var r=e[a]||{};return o in r?t(r[o]):i},_lyteUiUtils.registerDefaultValues=function(t){for(var a in t){var o=t[a];e[a]=o}},_lyteUiUtils.getDefault=function(t){return e[t]||{}};var t=function(e){var t={};if("object"!=typeof e)return e;if(Array.isArray(e))return e.slice(0);for(var a in e)t[a]=e[a];return t}}(),_lyteUiUtils.getVisibleDropdowns=function(){for(var e,t=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)"),a=[],o=0;o<t.length;o++)(e=t[o].origindd)&&a.push(e);return a},_lyteUiUtils.closeDropdowns=function(){for(var e=_lyteUiUtils.getVisibleDropdowns()||[],t=0;t<e.length;t++)e[t].close()},_lyteUiUtils.i18n=function(e,t,a){var o=t?"lyte."+t+"."+e:e;return(window._lyteUiComponentsLocale||{})[o||""]||a||e},_lyteUiUtils.getRTL=function(){return null!=this.Rtl&&null!=this.Rtl?this.Rtl:this.Rtl="rtl"==window.getComputedStyle(document.body).getPropertyValue("direction")},_lyteUiUtils.isIos=/ip(hone|ad|od)/i.test(navigator.userAgent)||/macintosh/i.test(navigator.userAgent)&&"ontouchend"in document,_lyteUiUtils.isAndroid=/android/i.test(navigator.userAgent),_lyteUiUtils.isMobile=_lyteUiUtils.isIos||_lyteUiUtils.isAndroid,_lyteUiUtils.escape=function(e){return"number"==typeof e&&(e+=""),(e||"").replace(/(\\|\'|\"|\?)/g,"\\$1")},_lyteUiUtils.appendChild=function(e,t){return Lyte.Component&&Lyte.Component.appendChild?Lyte.Component.appendChild(e,t):LyteComponent.appendChild(e,t)},_lyteUiUtils.insertBefore=function(e,t){return Lyte.Component&&Lyte.Component.insertBefore?Lyte.Component.insertBefore(e,t):LyteComponent.insertBefore(e,t)},_lyteUiUtils.dispatchEvent=function(e,t,a){var o={bubbles:!0};o.detail=a||{};var i=new CustomEvent(e,o);return t.dispatchEvent(i)},_lyteUiUtils.insertAfter=function(e,t){return Lyte.Component&&Lyte.Component.insertAfter?Lyte.Component.insertAfter(e,t):LyteComponent.insertAfter(e,t)},_lyteUiUtils.getScrollBarWidth=function(){if(null!=this._scrollwidth)return this._scrollwidth;var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var a=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;return a==o&&(o=t.clientWidth),document.body.removeChild(t),this._scrollwidth=a-o,this._scrollwidth},_lyteUiUtils.replaceWith=function(e,t){return Lyte.Component&&Lyte.Component.replaceWith?Lyte.Component.replaceWith(e,t):LyteComponent.replaceWith(e,t)},_lyteUiUtils.registeredCustomElements=_lyteUiUtils.registeredCustomElements||{},_lyteUiUtils.mergeObjects=function(e,t){var a={};for(var o in t)a[o]=t[o];for(var o in e)o in t||(a[o]=!1);return a},_lyteUiUtils.setAttribute=function(e,t,a){var o=_lyteUiUtils.mergeObjects(a,t);for(var i in o)!1===o[i]?e.removeAttribute(i):e.setAttribute(i,o[i])},_lyteUiUtils.updateAria=function(e,t,a,o){var i=e.tagName.toLowerCase().replace(/^lyte\-/,""),r={"radiobutton-group":"updateAriaArray"}[i];if(r)e[r](t,a);else if(e.ltProp){var n={breadcrumb:"ariaValue",step:"ariaValue"}[i];if(n)return e.ltProp(n,t);Lyte.objectUtils(e.ltProp(o||{}[i]||"ariaAttributes")||{},null!=a?"add":"delete",t,a)}else $L(e).attr(t,a)},_lyteUiUtils.trapFocus=function(e,t){var a,o=t||LytePopup.components[LytePopup.components.length-1].actualModalDiv;if(0!=(a=$L(o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), *[contenteditable]')).filter((function(e,t){return $L(t).is(":visible")&&-1!=t.tabIndex&&!t.disabled}))).length)if(t)a.length>1&&(a[0].classList.contains("lyteModalClose")||a[0].classList.contains("lytePopoverClose"))?a[1].focus():a[0].focus();else{var i=document.activeElement;if(o.contains(i)){var r,n=a.length;for(l=0;l<a.length;l++)if(a[l]==i){r=l;break}e.shiftKey?0==r&&(a.get(n-1).focus(),e.preventDefault()):r==n-1&&(a.get(0).focus(),e.preventDefault())}else if(o.classList.contains("lyteModal")||o.classList.contains("lytePopover"))_lyteUiUtils.trapFocus(null,o);else if(o.classList.contains("alertPopup"))for(var s=o._callee.ltProp("buttons"),l=0;l<s.length;l++)if("accept"==s[l].type){o.querySelectorAll("button")[l].focus();break}}},_lyteUiUtils.getBrowser=function(){return navigator.userAgent.search("rv:11")>=0?"ie":navigator.userAgent.search("Edge")>=0?"edge":navigator.userAgent.search("Chrome")>=0?"chrome":navigator.userAgent.search("Firefox")>=0?"firefox":navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?"safari":void 0},_lyteUiUtils.isNegativeScroll=function(){if(null!=this._negativeScrollChrome)return this._negativeScrollChrome;var e,t=document.body.appendChild($L("<div style='position: absolute; left: 0; top: 0; overflow: hidden; width: 10px;height: 1px;'><div style='width: 20px; height: 1px;'></div></div>").get(0));return t.scrollLeft=-5,e=t.scrollLeft<0,document.body.removeChild(t),this._negativeScrollChrome=e,e},_lyteUiUtils.getCorrectNumberCode=function(e){return e>=96&&e<=105?e-48:e},_lyteUiUtils.capitalize=function(e){return(e||"").replace(/^./,(function(e){return e.toUpperCase()}))},_lyteUiUtils.lyteUiFileSize=function(e,t,a){var o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=0;return 0==(i=t?Math.max(i,o.indexOf(t)):Math.floor(Math.log(e)/Math.log(1e3)))&&1==e?"1 Byte":parseInt(e/Math.pow(1e3,i)*Math.pow(10,a))/Math.pow(10,a)+" "+o[i]},Lyte.Component.registerHelper("lyteUiReturnOnlyKey",(function(e){var t=Object.keys(e);return!!t&&t[0]})),Lyte.Component.registerHelper("lyteUiReturnOnlyValue",(function(e){return e[Object.keys(e)[0]]})),Lyte.Component.registerHelper("lyteUiGetLinearIndex",(function(e,t,a){return e[4*t+a]})),Lyte.Component.registerHelper("lyteUiSetURL",(function(e,t){return t?e:""})),Lyte.Component.registerHelper("lyteUiCheckEmpty",(function(e){return e&&e[0].emptyBlock&&e[6].emptyBlock})),Lyte.Component.registerHelper("lyteUiDisableCalendarNav",(function(e,t){var a,o,i=e.getFullYear(),r=e.getMonth(),n=this.component.isYYFormat(),s=this.component.isHavingTimezone,l=s?Number($L.moment().format("YYYY")):(new Date).getFullYear();if(o=n?{minYear:l-(a=s?$L.moment():{uL:19,lL:80}).lL,maxYear:l+a.uL}:{minYear:1900,maxYear:2100},"previous"===t&&i===o.minYear&&0===r||"next"===t&&i===o.maxYear&&11===r)return"lyteCalDisableNav"})),Lyte.Component.registerHelper("lyteUiI18n",(function(e,t){return _lyteUiUtils.i18n(e,t)})),Lyte.Component.registerHelper("lyteUiI18nWithArgs",(function(){var e,t,a=arguments[0]||"",o=Array.from(arguments);return o.shift(),t=o,e=_lyteUiComponentsLocale[a]||"",t.forEach((function(t,a){var o="$"+a;e=e.replace(o,t)})),e})),Lyte.Component.registerHelper("lyteUiOptGroupCheck",(function(e){if(e.constructor==Object&&1==Object.keys(e).length){var t=e[Object.keys(e)[0]];if(t.constructor==Object||t.constructor==Array)return!0}return!1})),Lyte.Component.registerHelper("lyteUiCheckForType",(function(e,t,a,o){if(o){var i=0,r=0;for(var n in e)r++,n==t&&i++,n==a&&i++;return 2!=i&&1==r}return"object"==typeof e})),Lyte.Component.registerHelper("lyteListBoxIndex",(function(e,t){return t||0===t?t+" "+e:e})),Lyte.Component.registerHelper("lyteListBoxParentIndex",(function(e,t,a){return t[a]?t[a]:""})),Lyte.Component.registerHelper("lyteListBoxChildIndexId",(function(e){return"lyteLBLeftChildWrap_"+e})),Lyte.Component.registerHelper("lyteListBoxRequiredClassHelper",(function(e,t,a,o,i){return e[t]&&"left"===i?"lyteLBMandateItem":e[t]&&!a?"par"===o?"lyteListBoxRequiredParent lyteLBMandateParent":"lyteListBoxRequiredItem lyteLBMandateItem":""})),Lyte.Component.registerHelper("lyteUiChildPadding",(function(e){return"Arrow"===e?"padding-left:20px;":"Plus"===e?"padding-left:25px;":"padding-left:27px;"})),Lyte.Component.registerHelper("lyteUiHaveChildren",(function(e,t){return!!(e[t]&&e[t].length>0)})),Lyte.Component.registerHelper("lyteUiIsObject",(function(e){return"[object Object]"===Object.prototype.toString.call(e)})),Lyte.Component.registerHelper("lyteUiIsArray",(function(e){return"[object Array]"===Object.prototype.toString.call(e)})),Lyte.Component.registerHelper("lyteUiGiveProper",(function(e,t){for(var a=[],o=0;o<e.length;o++)e[o].menu==t&&a.push(e[o]);return a})),Lyte.Component.registerHelper("lyteUiAddClassModal",(function(e,t,a){var o=e;return a&&(o+=" draggable"),t&&(o+=" "+e+"Show"),o})),Lyte.Component.registerHelper("lyteUiAddShowClass",(function(e,t,a){return!0===e?t+" "+a:t})),Lyte.Component.registerHelper("lyteUiCatwise",(function(e,t){return e==t[this.get("ltPropCategory")]})),Lyte.Component.registerHelper("lyteUiCheckClassForDate",(function(e){return!!e&&-1!=e.indexOf("lyteCalGray")})),Lyte.Component.registerHelper("lyteUiConcat",(function(){for(var e="",t=arguments.length,a=0;a<t;a++)null!=arguments[a]&&(e+=arguments[a]);return e})),Lyte.Component.registerHelper("lyteUiConcatTypeClass",(function(e,t,a){return""!==e?e+t+" "+a:a})),Lyte.Component.registerHelper("lyteUiGetContainerClass",(function(e,t){return t||(t=""),1==e?"lyteDropdownContainer tick-selection "+t:"lyteDropdownContainer "+t})),Lyte.Component.registerHelper("lyteUiGetDropdownClass",(function(e){return e&&"true"==e.toString().toLowerCase()?"lyteDropdownElement1 lyteDropdown-disabled":"lyteDropdownElement1"})),Lyte.Component.registerHelper("lyteUiIfEquals",(function(e,t){return e===t})),Lyte.Component.registerHelper("lyteUiLabelCheck",(function(e,t){return e==t})),Lyte.Component.registerHelper("lyteUiObjectCheck",(function(e){return"string"==typeof e})),Lyte.Component.registerHelper("lyteUiReturnValueBy",(function(e,t){return t||0==t?e[t]:e})),Lyte.Component.registerHelper("lyteUiSetWH",(function(e){return 2*parseInt(e)})),Lyte.Component.registerHelper("lyteUiSetRadius",(function(e,t){return parseInt(e)-parseInt(t)/2})),Lyte.Component.registerHelper("lyteUiSetDashArray",(function(e,t){return 6.28318*(parseInt(e)-parseInt(t)/2)})),Lyte.Component.registerHelper("lyteUiSetOffset",(function(e,t,a){return 6.28318*(parseInt(e)-parseInt(t)/2)*(1-parseInt(a)/100)})),Lyte.Component.registerHelper("lyteUiTextTransform",(function(e){return"translate(0,-"+2*parseInt(e)+"px)"})),Lyte.Component.registerHelper("lyteUiMakeSortable",(function(e){return console.log(e),document.getElementById(e).classList.add("sortable"),!0})),Lyte.Component.registerHelper("lyteUiCheckTabPosition",(function(e){return"bottom"!==e.pos})),Lyte.Component.registerHelper("lyteUiGetValue",(function(e,t){return e[t]})),Lyte.Component.registerHelper("lyteUiIsEmptyArray",(function(e){return 0==e.length})),Lyte.Component.registerHelper("lyteUiRgbToHex",(function(e){var t="#";if(/rgba/.test(e)){for(var a=e.substring(5,e.length-1).split(","),o=0;o<3;o++)(i=parseInt(a[o]).toString(16).toUpperCase()).length<2&&(i="0"+i),t+=i;t+=(Math.round(255*parseFloat(a[3]))+65536).toString(16).substr(-2).toUpperCase()}else if(/rgb/.test(e))for(a=e.substring(4,e.length-1).split(","),o=0;o<3;o++){var i;(i=parseInt(a[o]).toString(16).toUpperCase()).length<2&&(i="0"+i),t+=i}return t})),Lyte.Component.registerHelper("lyteUiCPInsertBreak",(function(e){return(e+1)%10==0})),Lyte.Component.registerHelper("lyteUiCheckInRange",(function(e,t,a,o){var i=this.component;if(t=t||"",""===(e=e||"")&&""===t)return!0;if(""!==e&&""===t){var r=i.stringToDate(e,o);if((s=i.stringToDate(a,o))>=r)return!0}else if(""!==e&&""!==t){r=i.stringToDate(e,o);var n=i.stringToDate(t,o);if((s=i.stringToDate(a,o))>=r&&s<=n)return!0}else{var s;if(n=i.stringToDate(t,o),(s=i.stringToDate(a,o))<=n)return!0}return!1})),Lyte.Component.registerHelper("lyteUiDisabledDates",(function(e,t){var a=e.val||"";return!!~(t=t||[]).indexOf(a)})),Lyte.Component.registerHelper("lyteUiIsEmptyObject",(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0})),Lyte.Component.registerHelper("lyteUiCheckDisabled",(function(e,t){for(var a=0;a<e.length;a++)if(t===e[a])return"true";return"false"})),Lyte.Component.registerHelper("lyteUiTreeLevelHelp",(function(e,t){return""!==e?(e+" "+t++).split(" ").length-1:0})),Lyte.Component.registerHelper("lyteUiTreeMaxLevelHelp",(function(e,t,a){return(e+" "+t++).split(" ").length<=a})),Lyte.Component.registerHelper("lyteUiTreeClassHelp",(function(e,t,a,o,i,r){return"open"!==e&&t?o+" "+r:a+" "+i})),Lyte.Component.registerHelper("lyteTreeMaxChild",(function(e,t,a){return(e+" "+t++).split(" ").length-1>=a?"lyteTreeMaxedChild":""})),Lyte.Component.registerHelper("lyteTreeTypeHelp",(function(e,t){return e&&t?"withExternal":e?"onlyInternal":"nonSortable"})),Lyte.Component.registerHelper("lyteTreeClassStateHelp",(function(e){return e.defaultState&&"open"!==e.defaultState?"close"===e.defaultState?"lyteTreeClosed":void 0:"lyteTreeOpened"})),Lyte.Component.registerHelper("lyteUiTreeIndexHelp",(function(e,t){return(e+" "+t++).trim()})),Lyte.Component.registerHelper("lyteTreeAriaTabIndexHelp",(function(e,t){var a=(e+" "+t++).trim();return 1===a.length&&"0"===a?0:-1})),Lyte.Component.registerHelper("lyteUiTreeHasChildHelp",(function(e,t){var a=e.collapsed;return(!e[t]||e[t].length<1)&&(a=!0),e.hasChild&&a?"lyteTreeHasChild":""})),Lyte.Component.registerHelper("lyteTreeAriaTabIndexHelp",(function(e,t){var a=(e+" "+t++).trim();return 1===a.length&&"0"===a?"0":"-1"})),Lyte.Component.registerHelper("lyteUiTreeChildHelp",(function(e,t,a){return void 0!==e[a]&&0!==e[a].length||e.hasChild?"":t+" lyteTreeLastChild"})),Lyte.Component.registerHelper("lyteTreeAriaRole",(function(e,t){return void 0!==e[t]&&0!==e[t].length||e.hasChild?"group":"treeitem"})),Lyte.Component.registerHelper("lyteTreeDataType",(function(e){return"object"==typeof e&&Array.isArray(e)?"array":typeof e})),Lyte.Component.registerHelper("lyteTreeGetArrayLength",(function(e){return e.length})),Lyte.Component.registerHelper("lyteHTreeTopVline",(function(e,t){return 0===e?"lyteHTreeVerticalConnectorHidden":""})),Lyte.Component.registerHelper("lyteHTreeBottomVline",(function(e,t){return e===t.length-1?"lyteHTreeVerticalConnectorHidden":""})),Lyte.Component.registerHelper("stringify",(function(e){return JSON.stringify(e)})),Lyte.Component.registerHelper("lyteUiConcatAlertClass",(function(e,t){return("center"==e?"lyteAlertCenterContent":"")+" "+t})),Lyte.Component.registerHelper("lyteUiSetIndexString",(function(e,t){return e+1+" of "+t})),Lyte.Component.registerHelper("lyteUiRTL",(function(){return _lyteUiUtils.getRTL()})),Lyte.Component.registerHelper("lyteIsIos",(function(){return _lyteUiUtils.isIos})),Lyte.Component.registerHelper("lyteIsAndroid",(function(){return _lyteUiUtils.isAndroid})),Lyte.Component.registerHelper("lyteUiGetMonthOrYear",(function(e,t){return e=e||"","M"==t?e.split(" ")[0]:e.split(" ")[1]})),Lyte.Component.registerHelper("lyteUiDisplayOrHide",(function(e){return"rgba(0, 0, 0, 0)"==e?"lyteColorPicker__colorpan lyteColorPicker__hide":"lyteColorPicker__colorpan"})),Lyte.Component.registerHelper("lyteUiMsgBoxConcatClass",(function(e,t,a,o){return""!==t?e+" "+t+a+" "+o:e+" "+o})),Lyte.Component.registerHelper("lyteUiFileSize",_lyteUiUtils.lyteUiFileSize),Lyte.Component.registerHelper("lyteUiAddClassRating",(function(e,t,a){var o="";return"{{dummy}}"!=e.className&&(o=e.className),t&&(o+=" "+t),a?-1==o.indexOf("lyteRatingReadOnly")&&(o+=" lyteRatingReadOnly"):-1!=o.indexOf("lyteRatingReadOnly")&&(o=o.replace("lyteRatingReadOnly","")),o})),Lyte.Component.registerHelper("lyteUiGetArrayValueByIndex",(function(e,t){return e[t%e.length]})),Lyte.Component.registerHelper("lyteUiIfEqualsAny",(function(){var e=arguments[0];for(i=1;i<arguments.length;i++)if(e==arguments[i])return!0;return!1})),Lyte.Component.registerHelper("lyteUiGetNextArrayValueByIndex",(function(e,t){return e[t+1]})),Lyte.Component.registerHelper("lyteUiArrayLastIndex",(function(e){return e.length-1})),Lyte.Component.registerHelper("lyteUiGetViewBox",(function(e){return"heart"===e?"1.5 0.5 20 20":"star"===e?"5.5 2.5 23 23":"0 0 21 21"})),Lyte.Component.registerHelper("lyteUiGetFillOrStroke",(function(e,t,a){return"heart"===e||"star"===e?"; fill:"+t+";":"lineStar"===e||"lineHeart"===e?"; fill:transparent;; stroke:"+(a||t)+";":"; stroke:"+(a||t)+";"})),Lyte.Component.registerHelper("lyteUiCheckHalfRatingSvg",(function(e,t){return!!(e&&t>0&&t<1)})),Lyte.Component.registerHelper("lyteUiProgressbarLabel",(function(e,t,a){return e||t+(a?"%":"")})),Lyte.Component.registerHelper("lyteUiGetStackValue",(function(e,t,a){return t<e.length&&e[t][a]})),Lyte.Component.registerHelper("lyteUiAttribute",(function(e,t){return t&&e||!1})),Lyte.Component.registerHelper("lyteUiAddPE",(function(e){return"noColor"===e?"lyteColorPicker__pe":""})),Lyte.Component.registerHelper("lyteUiClockPairNumber",(function(e){return 1==e.length&&(e=0+e),e})),Lyte.Component.registerHelper("lyteUiDateRPHeaderClass",(function(e){return"dropdown"!=e?"lyteDateRPMonthHeader lyteDateRPStringHeader":"lyteDateRPMonthHeader"})),Lyte.Component.registerHelper("lyteUiSetAlphaLabel",(function(e){return e||_lyteUiUtils.i18n("Alpha")})),Lyte.Component.registerHelper("lyteUiRowLength",(function(e){var t=this.getData("sum");return e=parseInt(e,10),this.setData("sum",t+e),e&&e<12&&e>0&&t<=12})),Lyte.Component.registerHelper("lyteUiImageFile",(function(e){return!(!e.src||"image"!==e.fileType)})),Lyte.Component.registerHelper("lyteUiIsInArray",(function(e,t,a){t=t||[];for(var o=0;o<t.length;o++)if(t[o][a]===e[a])return!0;return!1})),Lyte.Component.registerHelper("lyteUiCapitalizeName",(function(e){return _lyteUiUtils.capitalize(e)})),!LytePopup){var LytePopup={components:[],bodywrapperCount:0,onEscape:function(e){e=e||window.event;var t=!1,a=!1,o=!1,i=document.activeElement;"key"in e?(t="Escape"==e.key||"Esc"==e.key,a="Tab"==e.key,o="Enter"==e.key):(t=27==e.keyCode,a=9==e.keyCode,o=13==e.keyCode),t&&LytePopup.closePopup(void 0,!0,e),a&&LytePopup.components.length>0&&LytePopup.trapFocus(e),o&&i&&(i.classList.contains("alertClose")||i.classList.contains("lyteModalClose")||i.classList.contains("lytePopoverClose"))&&i.click()},bindDocumentKeydown:function(){document.addEventListener("keydown",LytePopup.onEscape,!0)},checkAndRemoveWrapper:function(){var e=Array.from(document.querySelectorAll(".lyteAlertOpened")).concat(Array.from(document.querySelectorAll(".lyteModalOpened")),Array.from(document.querySelectorAll(".lytePopoverOpened")));if(0==e.length)document.body.classList.remove("bodyWrapper");else{for(var t=0;t<e.length;t++)if(e[t].ltProp("freeze"))return;document.body.classList.remove("bodyWrapper")}},hideOrShowFreeze:function(e,t,a){var o,i="",r="",n="",s="";if("open"==e&&LytePopup.components.length>1){for(var l=LytePopup.components.length-2;l>=0;l--)if(i="LYTE-MODAL"==LytePopup.components[l].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[l].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",r="LYTE-MODAL"==t.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==t.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",n=LytePopup.components[l].childComp.querySelector(i),s=t.childComp.querySelector(r),o=t.getData("ltPropDimmer")&&t.getData("ltPropDimmer").opacity?t.getData("ltPropDimmer").opacity:"",n&&s){n.style.transition="none",s.style.transition="none",n.style.zIndex=15,n.style.opacity=0,s.style.visibility="visible",s.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,n),n.style.zIndex="",t.addedFreezeDetails=!0;break}}else if("close"==e&&LytePopup.components.length>1&&LytePopup.components[LytePopup.components.length-1]===t)for(l=LytePopup.components.length-2;l>=0;l--){if(i="LYTE-MODAL"==LytePopup.components[l].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[l].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",r="LYTE-MODAL"==t.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==t.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",n=LytePopup.components[l].childComp.querySelector(i),s=t.childComp.querySelector(r),o=LytePopup.components[l].getData("ltPropDimmer")&&LytePopup.components[l].getData("ltPropDimmer").opacity?LytePopup.components[l].getData("ltPropDimmer").opacity:"",n&&s){s.style.transition="none",n.style.transition="none",n.style.zIndex=15,s.style.opacity=0,n.style.visibility="visible",n.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,n),n.style.zIndex="",s.style.visibility="";break}if(n&&a){n.style.transition="none",n.style.zIndex=15,n.style.visibility="visible",n.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,n),n.style.zIndex="";break}}},removeTransition:function(e,t){e&&(e.style.transition=""),t&&(t.style.transition="")},addPopup:function(e){LytePopup.closePopup();var t=LytePopup.components.length;if(t>0){var a,o,i;o="LYTE-MODAL"==LytePopup.components[t-1].$node.tagName?".modalWrapper":"LYTE-POPOVER"==LytePopup.components[t-1].$node.tagName?".popoverWrapper":".alertWrapper",i="LYTE-MODAL"==e.$node.tagName?".modalWrapper":"LYTE-POPOVER"==e.$node.tagName?".popoverWrapper":".alertWrapper";var r=e.childComp.querySelector(i);(a=Number(document.defaultView.getComputedStyle(LytePopup.components[LytePopup.components.length-1].childComp.querySelector(o),null).getPropertyValue("z-index")))+2>Number(document.defaultView.getComputedStyle(r,null).getPropertyValue("z-index"))&&(r.style.zIndex=a+2)}LytePopup.components[t]=e,(e.getData("ltPropFreeze")||"LYTE-ALERT"==e.$node.tagName)&&LytePopup.hideOrShowFreeze("open",e)},closePopup:function(e,t,a){if(t){for(var o=LytePopup.components[LytePopup.components.length-1],i=$L(o.actualModalDiv).find("lyte-dropdown"),r=!1,n=0;n<i.length;n++)i[n]&&i[n].getData("ltPropIsOpen")&&(r=!0);o&&o.$node.ltProp("closeOnEscape")&&!r&&(o.$node.setData("escClicked",a),o.$node.ltProp("show",!1))}else if(e){var s=LytePopup.components.indexOf(e);s>-1&&LytePopup.components.splice(s,1)}else for(n=LytePopup.components.length-1;n>=0;n--)LytePopup.components[n].$node&&!LytePopup.components[n].$node.ltProp("allowMultiple")&&LytePopup.components[n].$node.ltProp("show",!1)},getScrollParent:function(e){var t=e instanceof HTMLElement&&window.getComputedStyle(e).overflowY,a="visible"!==t&&"hidden"!==t,o=e&&a?e.scrollHeight:0,i=e&&a?e.clientHeight:0;return e?a&&o>i?e:LytePopup.getScrollParent(e.parentNode)||document.body:null},focusFunction:function(e){e.focus(),"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||"checkbox"!==e.type&&"radio"!==e.type&&"number"!==e.type&&(e.selectionStart=e.value.length,e.scrollLeft=e.scrollWidth-e.getBoundingClientRect().width)},trapFocus:function(e,t){var a,o=t||LytePopup.components[LytePopup.components.length-1].actualModalDiv;if(0!=(a=$L(o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), *[contenteditable]')).filter((function(e,t){return $L(t).is(":visible")&&-1!=t.tabIndex&&!t.disabled}))).length)if(t)a.length>1&&(a[0].classList.contains("lyteModalClose")||a[0].classList.contains("lytePopoverClose"))?this.focusFunction(a[1]):this.focusFunction(a[0]);else{var i,r=document.activeElement;if(!o.contains(r)&&((i=$L(r).closest("lyte-drop-box")[0])&&(i=i.origindd),!o.contains(i)))return LytePopup.initializeFocus(o),void(e&&e.preventDefault());for(var n,s=a.length,l=0;l<a.length;l++)if(a[l]==r){n=l;break}e.shiftKey?0==n&&(this.focusFunction(a.get(s-1)),e.preventDefault()):n==s-1&&(this.focusFunction(a.get(0)),e.preventDefault())}},initializeFocus:function(e){if(e.classList.contains("lyteModal")||e.classList.contains("lytePopover"))LytePopup.trapFocus(null,e);else if(e.classList.contains("alertPopup"))for(var t=e._callee.ltProp("buttons"),a=0;a<t.length;a++)if("accept"==t[a].type){this.focusFunction(e.querySelectorAll("button")[a]);break}},transitionEnd:function(e){if(e.target==this&&LytePopup.components.length>0){var t=LytePopup.components[LytePopup.components.length-1],a=t.actualModalDiv;!t.getData("ltPropPreventFocus")&&LytePopup.initializeFocus(a),this.removeEventListener("transitionend",LytePopup.transitionEnd)}},bindTransitionEnd:function(e){e&&e.addEventListener("transitionend",LytePopup.transitionEnd)}};LytePopup.bindDocumentKeydown()}var ratingNum=0;_lyteUiUtils.convert_diacritics=function(e){return[{value:"A",regex:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{value:"AA",regex:/[\uA732]/g},{value:"AE",regex:/[\u00C6\u01FC\u01E2]/g},{value:"AO",regex:/[\uA734]/g},{value:"AU",regex:/[\uA736]/g},{value:"AV",regex:/[\uA738\uA73A]/g},{value:"AY",regex:/[\uA73C]/g},{value:"B",regex:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{value:"C",regex:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{value:"D",regex:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{value:"DZ",regex:/[\u01F1\u01C4]/g},{value:"Dz",regex:/[\u01F2\u01C5]/g},{value:"E",regex:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{value:"F",regex:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{value:"G",regex:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{value:"H",regex:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{value:"I",regex:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{value:"J",regex:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{value:"K",regex:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{value:"L",regex:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{value:"LJ",regex:/[\u01C7]/g},{value:"Lj",regex:/[\u01C8]/g},{value:"M",regex:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{value:"N",regex:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{value:"NJ",regex:/[\u01CA]/g},{value:"Nj",regex:/[\u01CB]/g},{value:"O",regex:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{value:"OI",regex:/[\u01A2]/g},{value:"OO",regex:/[\uA74E]/g},{value:"OU",regex:/[\u0222]/g},{value:"P",regex:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{value:"Q",regex:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{value:"R",regex:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{value:"S",regex:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{value:"T",regex:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{value:"TZ",regex:/[\uA728]/g},{value:"U",regex:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{value:"V",regex:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{value:"VY",regex:/[\uA760]/g},{value:"W",regex:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{value:"X",regex:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{value:"Y",regex:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{value:"Z",regex:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{value:"a",regex:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{value:"aa",regex:/[\uA733]/g},{value:"ae",regex:/[\u00E6\u01FD\u01E3]/g},{value:"ao",regex:/[\uA735]/g},{value:"au",regex:/[\uA737]/g},{value:"av",regex:/[\uA739\uA73B]/g},{value:"ay",regex:/[\uA73D]/g},{value:"b",regex:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{value:"c",regex:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{value:"d",regex:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{value:"dz",regex:/[\u01F3\u01C6]/g},{value:"e",regex:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{value:"f",regex:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{value:"g",regex:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{value:"h",regex:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{value:"hv",regex:/[\u0195]/g},{value:"i",regex:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{value:"j",regex:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{value:"k",regex:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{value:"l",regex:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{value:"lj",regex:/[\u01C9]/g},{value:"m",regex:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{value:"n",regex:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{value:"nj",regex:/[\u01CC]/g},{value:"o",regex:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{value:"oi",regex:/[\u01A3]/g},{value:"ou",regex:/[\u0223]/g},{value:"oo",regex:/[\uA74F]/g},{value:"p",regex:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{value:"q",regex:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{value:"r",regex:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{value:"s",regex:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{value:"t",regex:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{value:"tz",regex:/[\uA729]/g},{value:"u",regex:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{value:"v",regex:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{value:"vy",regex:/[\uA761]/g},{value:"w",regex:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{value:"x",regex:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{value:"y",regex:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g}].forEach((function(t){e=e.replace(t.regex,t.value)})),e};var _lyteUiComponentsLocale={"lyte.calendar.previous.month":"Previous Month","lyte.calendar.previous.year":"Previous Year","lyte.calendar.next.month":"Next Month","lyte.calendar.next.year":"Next Year","lyte.calendar.choose.month":"Choose Month","lyte.calendar.choose.year":"Choose Year","lyte.calendar.monthview.drilldown.button":"Open a list of navigatable months","lyte.calendar.decadeview.drilldown.button":"Open a list of navigatable years",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr","short.may":"May",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Sun:"Sun",today:"Today",PM:"PM",AM:"AM",hour:"hrs",min:"mins","no.results.found":"No Results Found","Recently.Used.Colors":"Recently Used Colours","Theme.Colors":"Theme Colours","Standard.Colors":"Standard Colours","Advanced.Colors":"Advanced Colours","Back.to.Basic.Colors":"Back to Basic Colours",Close:"Close",Available:"Available",Selected:"Selected","No.Fill":"No Fill","Choose.Color":"Choose Colour","Copy.Color.value.to.Clipboard":"Copy the colour value to the clipboard",yesterday:"Yesterday",thisWeek:"This week",thisMonth:"This month",last7days:"Last 7 days",last30days:"Last 30 days",specificDate:"Specific date",customRange:"Custom Range",Select:"Select","lyte.fileupload.Drag file here or browse to upload":"Drag file here or browse to upload","lyte.fileupload.Attachment failed":"Attachment failed","lyte.fileupload.Retry":"Retry",HEX:"HEX",RGB:"RGB",HSV:"HSV",CMYK:"CMYK",Alpha:"Alpha","Color.value.copied":"Colour value copied","lyte.nav.more.options":"More Options","lyte.avatar.navigator.previous.nav.button":"You are currently navigating a list of images. Previous Navigation.","lyte.avatar.navigator.next.nav.button":"You are currently navigating a list of images. Next Navigation.","lyte.avatar.navigator.previous.nav.description":"Press this to navigate to previous set of images","lyte.avatar.navigator.next.nav.description":"Press this to navigate to next set of images","lyte.avatar.navigator.description":"This has a set of images with navigatable buttons","lyte.avatar.navigator.images.shown":"Images $0 to $1 shown","lyte.dual.listbox.no.results.found":"No Results Found","lyte.listview.true":"true","lyte.listview.false":"false","lyte.listview.search.placeholder":"Search here","lyte.listview.filter":"Filter","lyte.listview.filter.reset":"Reset","lyte.listview.column.chooser":"Choose Columns","lyte.listview.filter.not.selected":"Not Selected","lyte.listview.filter.today":"Today","lyte.listview.filter.till.yesterday":"Till Yesterday","lyte.listview.filter.tomorrow":"Tomorrow","lyte.listview.filter.next.7.days":"Next 7 Days","lyte.listview.filter.last.week":"Last Week","lyte.listview.filter.last.month":"Last Month","lyte.listview.filter.is":"is","lyte.listview.filter.not.is":"is not","lyte.listview.filter.between":"Between","lyte.listview.filter.less.than":"less than","lyte.listview.filter.greater.than":"greater than","lyte.listview.filter.less.than.or.equal":"greater than","lyte.listview.filter.greater.than.or.equal":"greater than","lyte.listview.filter.not.between":"not between","lyte.listview.filter.is.empty":"is empty","lyte.listview.filter.is.not.empty":"is not empty","lyte.listview.filter.set":"Set","lyte.listview.filter.not.set":"Not set","lyte.listview.filter.bigins":"starts with","lyte.listview.filter.contains":"contains","lyte.note.upload.file":"File Upload","lyte.note.storage":"Storage","lyte.note.more":"More","lyte.note.add.note":"Add a note","lyte.note.attach.files":"Attach Files","lyte.note.all":"All","lyte.note.discard":"Discard","lyte.note.delete":"Delete","lyte.listview.true":"true","lyte.listview.false":"false","lyte.listview.search.placeholder":"Search here","lyte.listview.filter":"Filter","lyte.listview.filter.reset":"Reset","lyte.listview.column.chooser":"Choose Columns","lyte.listview.filter.not.selected":"Not Selected","lyte.listview.filter.today":"Today","lyte.listview.filter.till.yesterday":"Till Yesterday","lyte.listview.filter.tomorrow":"Tomorrow","lyte.listview.filter.next.7.days":"Next 7 Days","lyte.listview.filter.last.week":"Last Week","lyte.listview.filter.last.month":"Last Month","lyte.listview.filter.is":"is","lyte.listview.filter.not.is":"is not","lyte.listview.filter.between":"Between","lyte.listview.filter.less.than":"less than","lyte.listview.filter.greater.than":"greater than","lyte.listview.filter.less.than.or.equal":"greater than","lyte.listview.filter.greater.than.or.equal":"greater than","lyte.listview.filter.not.between":"not between","lyte.listview.filter.is.empty":"is empty","lyte.listview.filter.is.not.empty":"is not empty","lyte.listview.filter.set":"Set","lyte.listview.filter.not.set":"Not set","lyte.listview.filter.bigins":"starts with","lyte.listview.filter.contains":"contains","lyte.note.upload.file":"File Upload","lyte.note.storage":"Storage","lyte.note.more":"More","lyte.note.add.note":"Add a note","lyte.note.attach.files":"Attach Files","lyte.note.all":"All","lyte.note.discard":"Discard","lyte.note.delete":"Delete","lyte.listview.true":"true","lyte.listview.false":"false","lyte.listview.search.placeholder":"Search here","lyte.listview.filter":"Filter","lyte.listview.filter.reset":"Reset","lyte.listview.column.chooser":"Choose Columns","lyte.listview.filter.not.selected":"Not Selected","lyte.listview.filter.today":"Today","lyte.listview.filter.till.yesterday":"Till Yesterday","lyte.listview.filter.tomorrow":"Tomorrow","lyte.listview.filter.next.7.days":"Next 7 Days","lyte.listview.filter.last.week":"Last Week","lyte.listview.filter.last.month":"Last Month","lyte.listview.filter.is":"is","lyte.listview.filter.not.is":"is not","lyte.listview.filter.between":"Between","lyte.listview.filter.less.than":"less than","lyte.listview.filter.greater.than":"greater than","lyte.listview.filter.less.than.or.equal":"greater than","lyte.listview.filter.greater.than.or.equal":"greater than","lyte.listview.filter.not.between":"not between","lyte.listview.filter.is.empty":"is empty","lyte.listview.filter.is.not.empty":"is not empty","lyte.listview.filter.set":"Set","lyte.listview.filter.not.set":"Not set","lyte.listview.filter.bigins":"starts with","lyte.listview.filter.contains":"contains","lyte.note.upload.file":"File Upload","lyte.note.storage":"Storage","lyte.note.more":"More","lyte.note.add.note":"Add a note","lyte.note.attach.files":"Attach Files","lyte.note.all":"All","lyte.note.discard":"Discard","lyte.note.delete":"Delete","lyte.listview.filter.greater.than.or.equal":"greater than or equal to","lyte.listview.filter.less.than.or.equal":"less than or equal to","lyte.codesnippet.copy":"Copy","lyte.codesnippet.failure.message":"Unable to copy","lyte.codesnippet.success.message":"Copied","lyte.video.play":"Play","lyte.video.pause":"Pause","lyte.video.skip.forward":"Forward","lyte.video.skip.backward":"Backward","lyte.video.volume.mute":"Mute","lyte.video.volume.unmute":"Unmute","lyte.video.settings":"Settings","lyte.video.mode.pip":"Play Picture in Picture","lyte.video.mode.fullScreen":"Full Screen","lyte.video.menu.subtitles.off":"off","lyte.video.menu.subtitles":"Subtitles/CC","lyte.video.menu.playBackSpeed":"Playback Speed","lyte.video.menu.qualityOption":"Quality","lyte.video.menu.qualityOption.auto":"auto"};if(_lyteDropdownItemId=0,_lyteDropdownBodyId=0,Lyte.Component.register("lyte-dropdown",{_template:'<template tag-name="lyte-dropdown"> <template is="if" value="{{expHandlers(ltPropHover,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true"> <lyte-drop-button role="combobox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" aria-haspopup="listbox"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <input disabled="{{ltPropDisabled}}" readonly="{{ltPropReadOnly}}" onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" onclick="{{action(\'showHide\',event)}}" onfocus="{{action(\'addFocusClass\',event)}}" onblur="{{action(\'removeFocusClass\',event)}}"> </li> </ul> </div> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <div class="lyteDummyEventContainer" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" onclick="{{action(\'showHide\',event)}}" onkeyup="{{action(\'checkKey\',event)}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}"> <lyte-drop-button> <template is="if" value="{{expHandlers(expHandlers(ltPropSelectedList.length,\'==\',0),\'&amp;&amp;\',expHandlers(ltPropForcePlaceholder,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> <template is="if" value="{{ltPropForcePlaceholder}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </div> </template><template case="false"> </template></template> </template></template> </template><template case="false"> <div onmouseenter="{{action(\'showHide\',event,\'enter\')}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" onmouseleave="{{action(\'closeIt\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" style=""> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{ltPropDisplayValue}}"><template case="true"> <span class="lyteMarginRight lyteDropdownLabel" onmouseenter="{{action(\'toolTipConfig\',this,\'showToolTip\')}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{ltPropDisplayValue}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span> </template></template></template></template> <template is="if" value="{{expHandlers(ltPropSelected,\'&amp;&amp;\',ltPropShowRemoveIcon)}}"><template case="true"> <lyte-drop-remove class="lyteDropdownDeselectIcon"></lyte-drop-remove> </template></template> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true"> </template></template></template></template> </div> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true"> <lyte-drop-button onclick="{{action(\'showHide\',event)}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <input disabled="{{ltPropDisabled}}" readonly="{{ltPropReadOnly}}" onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" onfocus="{{action(\'addFocusClass\',event)}}" onblur="{{action(\'removeFocusClass\',event)}}"> </li> </ul> </div> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> <div class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" style="" onclick="{{action(\'showHide\',event)}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> </div> </template></template> </template><template case="false"> <div class="lyteDummyEventContainer" onclick="{{action(\'showHide\',event)}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{expHandlers(expHandlers(ltPropSelectedList.length,\'==\',0),\'&amp;&amp;\',expHandlers(ltPropForcePlaceholder,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> <template is="if" value="{{ltPropForcePlaceholder}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> </template></template> </div> </template></template> </template><template case="false"> <div onclick="{{action(\'showHide\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" style="" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{ltPropDisplayValue}}"><template case="true"> <span onmouseenter="{{action(\'toolTipConfig\',this,\'showToolTip\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" class="lyteMarginRight lyteDropdownLabel">{{ltPropDisplayValue}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span> </template></template></template></template> <template is="if" value="{{expHandlers(ltPropSelected,\'&amp;&amp;\',ltPropShowRemoveIcon)}}"><template case="true"> <lyte-drop-remove class="lyteDropdownDeselectIcon"></lyte-drop-remove> </template></template> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true"> </template></template></template></template> </div> </template></template> </template></template> <template is="if" value="{{expHandlers(ltPropHover,\'==\',false)}}"><template case="true"> <template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-box class="lyteDropdownHidden"> <lyte-drop-body> <template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true"> <lyte-drop-group> <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label> <template is="for" items="{{lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item))}}" item="subitem" index="indexval"> <template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true"> <lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item> </template></template> </template> </lyte-drop-group> </template><template case="false"> <template is="if" value="{{lyteUiIsObject(item)}}"><template case="true"> <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item> </template></template> </template></template> </template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> </template></template> <div class="lyteLoadMsg" style="display:none;">Loading</div> </template><template case="false"> <template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true"> <lyte-drop-group> <lyte-drop-label>lyteUiReturnOnlyKey(item)</lyte-drop-label> <template is="for" items="{{lyteUiReturnValueBy(item,lyteReturnOnlyKey(item))}}" item="subitem" index="indexval"> <template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true"> <lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item> </template></template> </template> </lyte-drop-group> </template><template case="false"> <template is="if" value="{{lyteUiIsObject(item)}}"><template case="true"> <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item> </template></template> </template></template> </template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> </template></template> <div class="lyteLoadMsg" style="display:none;">Loading</div> </template></template> <lyte-yield yield-name="yield" style="display: none;" lyte-options="{{ltPropOptions}}"></lyte-yield> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"for",position:[1,1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,7]},{type:"if",position:[1,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"insertYield",position:[5]}],_observedAttributes:["shouldDisplayIcon","changeItToInvoke","dummy1","dummy2","savedPositions","ltPropRemoveMultiple","ltPropYield","ltPropType","ltPropTabindex","ltPropShow","ltPropFreeze","ltPropOptions","ltPropUserValue","ltPropSystemValue","ltPropPosition","ltPropIconClass","ltPropSelected","ltPropCallout","ltPropPlaceholder","ltPropDisabled","ltPropHover","ltPropNoResult","ltPropMaxCount","ltPropInputClass","ltPropBoundary","pos","secondaryPosition","firePos","ltPropAjaxRequest","firstRequest","userValue","sysValue","ltPropDisplayValue","ltPropDisabledList","ltPropAnimate","ltPropSetPos","ltPropTooltip","ltPropBoxClass","ltPropIsOpen","ltPropFocus","ltPropFixPositionOnOpen","ltPropForcePlaceholder","ltPropShowEmptyMessage","ltPropBoxButtonWidth","ltPropPreventScroll","ltPropScope","ltPropAnimateBox","ltPropTooltipClass","ltPropDisplayList","ltPropSelectedList","ltPropItemSearchType","ltPropFocusOnClose","ltPropButtonClass","ltPropDisableItemTooltip","ltPropPreventParentScroll","ltPropShowRemoveIcon","ltPropAriaButton","ltPropAriaBox","ltPropAriaBody","ltPropReadOnly","ltPropActiveElement","ltPropAllowFocusableElements","ltPropDataTabindex"],init:function(){var e=this.getData("ltPropType"),t=this.getData("ltPropSelected");this._close=this.closeDrop1.bind(this),this._transEnd=this.tranEnd.bind(this),this.getData("ltPropPreventParentScroll")&&this.setData("ltPropFreeze",!1),this.freezeLayerCreated()||this.createFreezeLayer(),this.$node.resetPosition=function(){var e=this.component,t=e.getData("ltPropFixPositionOnOpen");e.setCss(!1,t)},this.$node.toggle=function(e,t){var a=e||void 0;this.component.getData("ltPropDisabled")||this.component.getData("ltPropReadOnly")||this.component.showHide(a,t,!0)},this.$node.getDropBox=function(){return this.component.getDropBox()},this.$node.open=function(){this.component.getData("ltPropIsOpen")||this.toggle()},this.$node.close=function(){this.component,this.getData("ltPropIsOpen")&&this.toggle()},this.$node.getInitialSelected=function(e){var t=this.component;return t.setInitialSelected(e),t.getData("ltPropSelected")},this.$node.getDisplayValue=function(){var e,t=this.component,a=t.childComp,o=t.getDropBody(a),i=t.getData("ltPropSelected");return i&&(e=t.getItem(t.getAllItems(o),i))?e.textContent.trim():""},this.$node.closeError=function(){var e=this.component,t=e.childComp,a=e.getData("drophead");0!==e.getDropBody(t).querySelectorAll("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)").length&&e.closeError(t,a)},this.$node.updateBoxAria=function(e,t){this.component.getDropBox().setAttribute(e,t)},this.$node.updateButtonAria=function(e,t){this.component.getAriaButton().setAttribute(e,t)},this.$node.updateBodyAria=function(e,t){var a=this.component;a.getDropBody(a.childComp).setAttribute(e,t)},this.$node.setValue=function(e){var t=this.component.getSearchBox();t&&t.setValue&&t.setValue(e)},-1===e.indexOf("multiple")&&-1===e.indexOf("multisearch")||(this.setData("multiple",!0),t||this.setData("ltPropSelected","[]"),-1!==e.indexOf("multisearch")&&this.setData("search",!0),this.setIterator())},freezeLayerCreated:function(){return document.getElementById("lytedropdownfreezelayer")},createFreezeLayer:function(){var e;(e=document.createElement("div")).setAttribute("id","lytedropdownfreezelayer"),e.style.display="none",e.style.opacity="0.01",e.style.background="#fff",document.body.appendChild(e)},getSearchBox:function(){return this.$node.querySelector(".lyteDropdownTextField")},setIterator:function(){var e=this.getData("ltPropUserValue"),t=this.getData("ltPropSystemValue");this.setData("userValue",e||"display"),this.setData("sysValue",t||"value")},didDestroy:function(){var e=this.childComp,t=this.$node.mutobserver,a=this.getData("ltPropFreeze"),o=this.getData("ltPropPreventScroll");window.clearTimeout(this.timeoutIdForOpen),window.clearTimeout(this.timeoutIdForClose),e&&(!e.classList.contains("lyteDropdownHidden")&&a&&"all"===o&&(document.getElementById("lytedropdownfreezelayer").style.display="none"),!e.classList.contains("lyteDropdownHidden")&&document.body&&document.body.classList.remove("lyteBodyWrapper"),delete e.origindd,e.remove()),t&&t.disconnect(),this.disableParentListeners(),_lyteDropdown.autoClosed===this.$node&&(_lyteDropdown.autoClosed=null),_lyteDropdown.lastDropdownWithAPromise===this.$node&&(_lyteDropdown.lastDropdownWithAPromise=null),this._inputElement&&(this._inputElement.removeEventListener("keyup",this._function),$L(this._inputElement).removeSearch(),this._inputElement=null),delete this.childComp,delete this.$node.toggle,delete this.$node.element,this.$node.mutobserver=null,window.clearTimeout(this._FFBodyScrollOnRemove),window.clearTimeout(this._FFBodyScrollOnAdd)},disableParentListeners:function(){var e=this;this.scrollableParents&&this.scrollableParents.off("scroll",this.resetScroll),this.scrollableParents=void 0,this.lyteScrollBarParents&&(this.lyteScrollBarParents.each((function(t,a){a&&(a.removeEventListener("touchmove",e.disableLyteScrollBar,!0),a.removeEventListener("wheel",e.disableLyteScrollBar,!0))})),this.lyteScrollBarParents=void 0)},prerequisites:function(){this.getDropBody(this.childComp),this.data.ltPropAnimate&&(this._hgtRemoval=!0),this.setCss(!1,!0),this.openSlideAnimate(),this.getData("call")&&this.childComp.removeAttribute("lyte-hidden"),this.fireOnShow(),this.shouldFocusFirstFocusableElement()&&this.focusFirstFocusableElement(),this.setData("call",null)},shouldFocusFirstFocusableElement:function(){return this.getData("ltPropAllowFocusableElements")},focusFirstFocusableElement:function(){var e=this.getFirstFocusableElement();e&&e.focus()},getFirstFocusableElement:function(){return this.$node.getDropBox().querySelector(_lyteDropdown.focusableElementsSelector)},fireOnShow:function(){var e;this.getData("call")&&this.getMethods("onShow")&&(e=!0===(e=this.getData("call"))?void 0:e,this.executeMethod("onShow",e,this)),_lyteUiUtils.dispatchEvent("lytedropdownshow",this.$node)},getChildren:function(e){var t,a=this.getData("drophead"),o=this.getData("dropbody"),i=0,r=this.$node;if("yield"!==a||"yield"!==o)for(;i<e.length;i++)"LYTE-DROPDOWN"!==(t=e[i].tagName)&&"TEMPLATE"!==t&&("LYTE-DROP-BOX"===t?(this.setData("dropbody","yield"),r.querySelector("lyte-drop-box").classList.add("lyteDropdownHidden")):"LYTE-DROP-BUTTON"===t?(this.setData("drophead","yield"),_lyteUiUtils.appendChild(r.querySelector(".lyteDummyEventContainer"),r.querySelector("lyte-drop-button")),i--):this.getChildren(e[i].children))},setBoxClass:function(e){var t=this.getData("ltPropBoxClass"),a=this.childComp||this.$node.querySelector("lyte-drop-box");"noyield"===this.getData("dropbody")&&(e&&$L(a).removeClass(e),t&&$L(a).addClass(t))},setButtonClass:function(e){var t=this.getData("ltPropButtonClass"),a=this.$node.querySelector("lyte-drop-button");e&&$L(a).removeClass(e),t&&$L(a).addClass(t)},iconClassChanged:function(){this.setIconClass()}.observes("ltPropIconClass"),setIconClass:function(){var e=this.getData("multiple"),t=this.getDropButton(),a=this.getData("drophead");e&&"yield"!==a&&(this.hasIconClassChanged()?(t.classList.add("ltDropdownIconNodePresent"),this.setData("shouldDisplayIcon",!0)):(t.classList.remove("ltDropdownIconNodePresent"),this.setData("shouldDisplayIcon",!1)))},getDropButton:function(){return this.$node.querySelector("lyte-drop-button")},getActiveElement:function(){var e,t=this.getData("ltPropActiveElement");return t&&(e=this.$node.querySelector(t)||this.$node.getDropBox().querySelector(t)),e||this.getAriaButton()},getAriaButton:function(){return this.$node.querySelector('[role="combobox"]')},hasIconClassChanged:function(){var e=this.getData("ltPropIconClass");return e&&"dropdown"!==e},didConnect:function(){var e,t,a,o,i,r,n,s=this.$node,l=this.childComp,d=this.getData("ltPropNoResult"),p=s.querySelector("lyte-yield"),c=this.getData("ltPropPlaceholder"),h=this.getData("ltPropHover"),u=this.getData("ltPropSelected"),f=this.getData("ltPropOptions")||[],y=this.getData("ltPropType"),m=this.getData("ltPropDisabled"),g=this.getData("ltPropTabindex"),v=this.getData("ltPropDataTabindex"),b=this.getData("ltPropShow"),P=this.getData("ltPropDisabledList"),D=(this.getData("ltPropDisplayValue"),this.getData("ltPropSelectedList")||[]);if(this.determine(p),i=this.getData("drophead"),r=this.getData("dropbody"),"yield"!==i&&this.setData("drophead",i="noyield"),"yield"!==r&&this.setData("dropbody",r="noyield"),e=s.querySelector("lyte-drop-box"),this.setClassAttributes(),this.calculateSelected=D.length>0,(t=document.createElement("div")).setAttribute("class","lyteDropdownNoResult"),t.textContent=d,t.style.display="none",e.addEventListener("click",function(e){this.processElements(e)}.bind(this)),h&&e.addEventListener("mouseout",function(e){this.closeIt(e)}.bind(this)),this.addCallout(),!c&&!u&&f.length>0){var _,L=f[0],C=!1;L.constructor==Object&&1==Object.keys(L).length&&(_=L[Object.keys(L)[0]]).constructor==Array&&(C=!0),this.setData("preventDisp",!0),C?"[object Object]"===Object.prototype.toString.call(_[0])?this.setData("ltPropSelected",_[0][this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",_[0]):"[object Object]"===Object.prototype.toString.call(L)?this.setData("ltPropSelected",L[this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",L),this.setData("preventDisp",!1)}else c||this.getData("ltPropSelected")||"yield"!=r||"multiple"===y||"multisearch"===y||(a=this.getFirstEnabledItem())&&(this.setData("preventDisp",!0),a.setAttribute("selected",!0),this.setData("preventDisp",!1));this.removeTabIndexForYieldedMultisearch(),o=this.getElementWithTabIndex(),m?(this.disableClickableItem(o),o.setAttribute("tabindex",-1),o.setAttribute("data-tabindex",null)):(this.enableClickableItem(o),o.setAttribute("tabindex",g),o.setAttribute("data-tabindex",v)),"multisearch"===y&&(this._inputElement=o,this._function=this.fireCheckKey.bind(this),o.addEventListener("keyup",this._function)),this.toggleDropdownClass(),this.setData("preventDisp",!0),this.setData("changeItToInvoke",this.getData("changeItToInvoke")+1),this.setData("preventDisp",!1),this.setSelectedFromList(!0),b&&(this.setData("ltPropShow",!1),s.toggle(),$L.fastdom.measure((function(){o.focus();var e=s.getBoundingClientRect();(e.left<0||e.top<0)&&s.scrollIntoView()}))),l=this.childComp,(n=this.getDropBody(l)).appendChild(t),this.showNoResultDiv(),n.addEventListener("scroll",function(e){this.callOnScroll(e,this)}.bind(this)),this.getDropBox().addEventListener("mousemove",function(e){var t=e.target,a=e.currentTarget.querySelector(".lyteDropdownSelection");t=_lyteDropdown.traverse(t,["LYTE-DROP-ITEM"]),this.hasMousePositionNotChanged(e)||t===a||(a&&a.classList.remove("lyteDropdownSelection"),t&&"LYTE-DROP-ITEM"===t.tagName&&"true"!==t.getAttribute("disabled")&&t&&(t.classList.add("lyteDropdownSelection"),this.getActiveElement().setAttribute("aria-activedescendant",t.getAttribute("id"))))}.bind(this)),f.length>0&&P&&P.length>0&&this.addDisabledClass(s.querySelectorAll("lyte-drop-item"))},processElements:function(e){var t,a,o=this.childComp,i=e.target,r=this.getData("multiple"),n=this.getData("drophead"),s=this.getData("ltPropFreeze"),l=(this.getData("ltPropType"),this.getDropBody(o),this.getData("search")),d=this.getData("ltPropSelected"),p=this;if(l&&(this.$node.querySelector("lyte-search")||this.$node.querySelector("input"),this.focusInput()),(i=_lyteDropdown.traverse(i,["HTML","LYTE-DROP-ITEM"]))&&"HTML"!==i.tagName&&"true"!==i.getAttribute("disabled"))if(r||"yield"===n)if(r){if(this.beforeAddPromiseActive)return;if(this.checkLimit(1))return;if(t=i.getAttribute("data-value"),this.getMethods("onBeforeAdd")&&(a=this.beforeAdd(e,i,t)),this.isPromise(a))this.beforeAddPromiseActive=!0,a.then((function(){p.selectItemOfMultiSelect(e,i,d),p.beforeAddPromiseActive=!1})).catch((function(e){console.error(e),p.beforeAddPromiseActive=!1}));else{if(a)return;this.selectItemOfMultiSelect(e,i,d)}}else{if(!this.beforeSelect(e,i))return;if(this.toggleCurrent(i),this.setData("ltPropSelected",i.getAttribute("data-value")),this.optCall(e,this.getData("ltPropSelected"),i),this.fireOnChange(d,e,i),this.beforeHide.call(this,o,e,s))return;this.closeDrop(o,e,s)}else{if(!this.beforeSelect(e,i))return;if(i.setAttribute("selected","true"),this.optCall(e,this.getData("ltPropSelected"),i),this.fireOnChange(d,e,i),this.beforeHide.call(this,o,e,s))return;this.toggleCurrent(i),this.closeDrop(o,e,s)}},isPromise:function(e){return"object"==typeof e},selectItemOfMultiSelect:function(e,t,a){var o=this.childComp,i=o.querySelectorAll("lyte-drop-item"),r=t.getAttribute("data-value"),n=this.getData("drophead"),s=this.getData("ltPropType"),l=this.getData("search"),d=this.$node.querySelector("lyte-search")||this.$node.querySelector("input");l&&d.setValue&&!this.isInputEmpty(d)&&d.setValue(""),this.setHighlight(i,t),this.setData("prev",!0),t.setAttribute("selected","true"),this.setData("prev",!1),t.classList.add("lyteDropdownActive"),this.hideGroup(t),this.getMethods("onAdd")&&this.executeMethod("onAdd",e,r,this.getData("ltPropSelected"),this,t),this.showError(o,s,n),this.fixBoxPosition(),this.fireOnChange(a,e,t)},setClassAttributes:function(){this.setBoxClass(),this.setButtonClass(),this.setIconClass(),this.setClassForRemoveIcon()},setClassForRemoveIcon:function(){this.getData("ltPropShowRemoveIcon")&&this.getData("ltPropSelected")?this.$node.classList.add("lyteDropdownWithDeselectIcon"):this.$node.classList.remove("lyteDropdownWithDeselectIcon")},setClassForRemoveIconObs:function(){this.setClassForRemoveIcon()}.observes("ltPropShowRemoveIcon","ltPropSelected"),addCallout:function(){var e,t=this.getDropBox();(e=document.createElement("span")).setAttribute("class","lyteArrow"),t.insertBefore(e,t.children[0])},removeTabIndexForYieldedMultisearch:function(){var e=this.getData("drophead"),t=this.getData("ltPropType"),a=this.$node.querySelector(".lyteDummyEventContainer");a&&"yield"===e&&"multisearch"===t&&(a.removeAttribute("tabindex"),a.removeAttribute("data-tabindex"))},addTabIndexForYieldedMultisearch:function(){var e=this.getData("ltPropType"),t=this.getData("drophead"),a=this.$node.querySelector("input"),o=this.getData("ltPropTabindex"),i=this.getData("ltPropDataTabindex"),r=this.getData("ltPropDisabled");a&&"yield"===t&&"multisearch"===e&&!r&&(a.setAttribute("tabindex",o),a.setAttribute("data-tabindex",i))},addDataTabindex:function(){var e=this.getData("drophead"),t=this.getData("ltPropDisabled"),a=this.getData("ltPropDataTabindex"),o=this.$node.querySelector("input");o&&"yield"===e&&!t&&o.setAttribute("data-tabindex",a)}.observes("ltPropDataTabIndex"),addTabIndex:function(){this.addTabIndexForYieldedMultisearch()}.observes("ltPropTabindex"),getElementWithTabIndex:function(){return this.$node.querySelector("[tabindex]")||this.$node.querySelector("input")},getFirstEnabledItem:function(){for(var e=this.getDropBody(this.childComp).querySelectorAll("lyte-drop-item"),t=this.getData("ltPropDisabledList")||[],a=0;a<e.length;a++)if(!~t.indexOf(e[a].getAttribute("data-value")))return e[a]},hasMousePositionNotChanged:function(e){var t=e.clientX,a=e.clientY,o=this.prevClientX,i=this.prevClientY;return this.prevClientX=t,this.prevClientY=a,o===t&&i===a},tranEnd:function(e){var t=this.childComp,a=this.getData("ltPropAnimate"),o=this.data.ltPropAnimateBox?t:this.getDropBody(t);window.clearTimeout(this.timeoutIdForOpen),a&&(o.style.height="auto"),t.classList.remove("lyteAnimate","lyteDropBoxAnimate"),t.removeEventListener("transitionend",this._transEnd),delete this._prevent,delete this._preventSetcss,delete this._preventMutObs,this.getMethods("onAnimationEnd")&&this.executeMethod("onAnimationEnd",e,this);var i=this.isFF();this.getData("ltPropIsOpen")&&(i&&this.isBodyScrollable()?this.addProperScrollbar():i&&!this.isBodyScrollable()&&this.removeScrollbar())},openSlideAnimate:function(){if(this.getData("ltPropAnimate")){if(this._preventSetcss)return;if(this._preventAnimate)return;this._preventAnimate=!0,this._preventSetcss=!0,this._preventMutObs=!0;var e=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),t=this.data.ltPropAnimateBox,a=t?e:this.getDropBody(this.childComp);this._oriStyle=a.style.height,a.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(e.style.top=parseInt(e.style.top)+this._hgt+"px"),e.classList.add("lyteAnimate"),t&&e.classList.add("lyteDropBoxAnimate"),setTimeout(function(){-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(e.style.top=parseInt(e.style.top)-this._hgt+"px"),a.style.height=this._hgt+"px",setTimeout(function(){if(e.addEventListener("transitionend",this._transEnd),this._hgt){var t=this.getTransitionTime(e);this.timeoutIdForOpen=setTimeout(this._transEnd,t)}else this.tranEnd.call(this,{})}.bind(this),20)}.bind(this),20)}},getTransitionTime:function(e){var t=window.getComputedStyle(e).transitionDuration,a=100;return~t.indexOf("ms")?a+=parseInt(t):a+=1e3*parseFloat(t),a},determine:function(e){var t,a,o,i=e.children,r=this.$node;r.querySelector("lyte-dropdown")?this.getChildren(i):(a=e.querySelector("lyte-drop-box"),(t=e.querySelector("lyte-drop-button"))&&(o=r.querySelector(".lyteDummyEventContainer"),this.setData("drophead","yield"),_lyteUiUtils.appendChild(o,t)),a&&(this.setData("dropbody","yield"),a.classList.add("lyteDropdownHidden")))},addClass:function(){this.childComp.classList.add("lyteMultiSelectDropdown")},closeDrop:function(e,t,a,o){if(_lyteDropdown.autoClosed=null,this.setData("ltPropIsOpen",!1),!this._prevent)if(this.getData("ltPropAnimate")&&!o){var i=this.data.ltPropAnimateBox;this._prevent=!0,this._preventSetcss=!0,this._arguments=arguments,this.childComp.classList.add("lyteAnimate"),i&&this.childComp.classList.add("lyteDropBoxAnimate"),setTimeout(function(){var e=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),t=i?e:this.getDropBody(this.childComp);t.style.height=this._hgt+"px",setTimeout(function(){if(t.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(e.style.top=parseInt(e.style.top)+this._hgt+"px"),this._animationStarted=!0,this._elem=t,this._box=e,t.addEventListener("transitionend",this._close),this._hgt){var a=this.getTransitionTime(t);this.timeoutIdForClose=setTimeout(this._close,a)}else this.closeDrop1.call(this)}.bind(this),20)}.bind(this),20)}else this.closeDrop1(e,t,a)},closeDrop1:function(e,t,a){var o,i=this.$node.querySelector("lyte-drop-button"),r=this.getData("pos"),n=this.getData("multiple"),s=this.getDropBox(),l=this.getData("ltPropPreventScroll"),d=this.getData("ltPropPreventParentScroll");window.clearTimeout(this.timeoutIdForClose),this._arguments&&(e=this._arguments[0],t=this._arguments[1],a=this._arguments[2],this._elem.style.height=this._oriStyle,this._box.classList.remove("lyteAnimate","lyteDropBoxAnimate"),this._elem.removeEventListener("transitionend",this._close),delete this._hgt,delete this._oriStyle,delete this._arguments,delete this._elem,delete this._box),n&&(this.getDropBody(e).scrollTop=0),e.classList.add("lyteDropdownHidden");var p=document.querySelector("#lytedropdownfreezelayer");if(a&&p&&"all"===l&&(document.querySelector("#lytedropdownfreezelayer").style.display="none"),e.style.left="",e.style.top="",e.style.bottom="",e.style.right="",(a||d)&&document.body.classList.remove("lyteBodyWrapper"),this.disableParentListeners(),(o=this.removeClass(i.classList,r,"lyteDropButton",!0))&&i.classList.remove(o),this.getMethods("onHide")&&this.executeMethod("onHide",t,this),this.focusButton(),s)var c=this.removeClass(s.classList,r,"lyteDropdown",!0);c&&s.classList.remove(c),this.setData("pos",""),this.setData("secondaryPosition",""),this.setData("savedPositions",{}),delete this._prevent,delete this._preventSetcss,delete this._preventAnimate,delete this._animationStarted},focusButton:function(){var e=this.getData("search"),t=document.activeElement;!this.getData("ltPropFocusOnClose")||e||this.isFocusable(t)||this.setData("ltPropFocus",!0)},isFocusable:function(e){var t;return e=$L(e),!(!_lyteDropdown.isVisible(e.get(0))||e.is(":disabled"))&&(t=e.attr("tabindex"),t=isNaN(t)?-1:t,e.is("button, input, select, textarea, a[href], area[href], iframe")||t>-1)},callOnScroll:function(e){this.getMethods("onScroll")&&this.executeMethod("onScroll",e,this)},addDisabledClass:function(e){for(var t,a=0;a<e.length;a++)"true"==(t=e[a]).getAttribute("disabled")?t.classList.add("lyteDropdown-disabled"):t.classList.contains("lyteDropdown-disabled")&&t.classList.remove("lyteDropdown-disabled")},changeBoxClass:function(e){var t=e.oldValue;this.setBoxClass(t)}.observes("ltPropBoxClass"),changeButtonClass:function(e){var t=e.oldValue;this.setButtonClass(t)}.observes("ltPropButtonClass"),noResultChanged:function(){var e=this.childComp,t=this.getData("ltPropType"),a=this.getData("drophead"),o=this.getDropBody(e).querySelector(".lyteDropdownNoResult"),i=this.getData("ltPropNoResult");e=this.childComp,o.textContent=i,i||(o.style.display="none"),e&&this.showError(e,t,a)}.observes("ltPropNoResult"),showNoResultDiv:function(){var e=this.getData("ltPropShowEmptyMessage"),t=this.childComp,a=this.getDropBody(t),o=a.querySelectorAll("lyte-drop-item"),i=a.querySelector(".lyteDropdownNoResult"),r=this.getData("multiple");i&&(e&&!r?0===o.length?i.style.display="block":i.style.display="none":e||r||(i.style.display="none"))},onChangeInDisabledList:function(){for(var e,t=this.childComp?this.childComp.querySelectorAll("lyte-drop-item"):this.$node.querySelectorAll("lyte-drop-item"),a=0;a<t.length;a++)"true"===(e=Lyte.Component.registeredHelpers.lyteUiCheckDisabled(this.getData("ltPropDisabledList")||[],t[a].dataset.value))&&(t[a].classList.remove("lyteDropdownSelection"),t[a].setAttribute("disabled",e)),"false"===e&&t[a].hasAttribute("disabled")&&t[a].removeAttribute("disabled");this.addDisabledClass(t)}.observes("ltPropDisabledList.[]").on("didConnect"),removeClass:function(e,t,a,o,i){if(!t)return"";i=i||"";for(var r=0,n=e.length,s=a+(o?t[0].toUpperCase()+t.substring(1):{up:"Down",down:"Up",left:"Right",right:"Left"}[t])+i;r<n;r++)if(e[r]===s)return s;return""},firePosCallBack:function(){var e=this.getData("pos"),t=this.getData("widthAdjusted");if(""!==e){var a=this.childComp,o=this.$node.querySelector("lyte-drop-button"),i=this.removeClass(a.classList,e,"lyteDropdown");i&&(this._preventClass=!0,a.classList.remove(i)),a.classList.add("lyteDropdown"+e[0].toUpperCase()+e.substring(1)),(i=this.removeClass(o.classList,e,"lyteDropButton"))&&(this._preventClass=!0,o.classList.remove(i)),o.classList.add("lyteDropButton"+e[0].toUpperCase()+e.substring(1)),2===t&&a.classList.add("lyteDropdownCurve"),this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",e,this)}}.observes("pos","firePos"),secondaryPositionObserver:function(){var e=this.getData("secondaryPosition")||"";if(""!==e){var t=this.childComp,a=this.removeClass(t.classList,e,"lyteDropbox",!1,"AlignToButton");a&&t.classList.remove(a),this._preventClass=!0,t.classList.add("lyteDropbox"+e[0].toUpperCase()+e.substring(1)+"AlignToButton")}}.observes("secondaryPosition"),setLeftExceedForDown:function(e,t,a,o,i){var r=-i,n=this.getButton().getBoundingClientRect(),s=(n.left,n.width,n.right);return r+(window.innerWidth-s)},setLeftNotExceedForDown:function(e,t,a){return a+this.getButton().getBoundingClientRect().left},setTopAboveForDown:function(e,t,a,o,i){var r=-i,n=a.top,s=(o.height,r+(window.innerHeight-n));return this._animationStarted?r+(window.innerHeight-n):s},setTopBelowForDown:function(e,t,a){var o=t;return a+o.top+o.height},setLeftForRight:function(e,t,a){var o=t;return a+o.left+o.width},setRightForRight:function(e,t,a,o,i){var r=-i,n=a.left;return r+(window.innerWidth-n)},setTopForRight:function(e,t,a){return a+t.top},setTopForRightAbove:function(e,t,a,o,i){var r=-i,n=a,s=(n.top,n.height,n.bottom),l=(o.height,r+(window.innerHeight-s));return this._animationStarted?r+(window.innerHeight-s):l},setCorrectClass:function(e){for(var t=this.childComp.querySelector(".lyteArrow"),a=t.classList,o=0;o<a.length;o++)"lyteArrow"!=a[o]&&a[o]!=e&&(t.classList.remove(a[o]),o--);t.classList.add(e),t.classList.add("lyteArrowIcon")},hasClassToggled:function(e,t){var a=e.oldValue?e.oldValue.trim().split(" "):[],o=e.target,i=a.length,r=o.classList.length;return!(!(~a.indexOf(t)&&!o.classList.contains(t)||!~a.indexOf(t)&&o.classList.contains(t))||1!==Math.abs(i-r))},wasVisibilityAddedOrRemoved:function(e,t){return!!~e.indexOf("visibility")&&!~t.indexOf("visibility")||!!~t.indexOf("visibility")&&!~e.indexOf("visibility")},didValueChange:function(e,t){return!!~e.indexOf("visible")&&!!~t.indexOf("hidden")||!!~e.indexOf("hidden")&&!!~t.indexOf("visible")},isVisibilityModified:function(e,t){if(e=e||"",t=t||"",this.wasVisibilityAddedOrRemoved(e,t)||this.didValueChange(e,t))return!0},adjustWidth:function(e,t,a){var o=this.getData("ltPropBoxButtonWidth");return"min-button"===o?(this.setData("widthAdjusted",1),a>t&&this.setData("widthAdjusted",2),e.style.minWidth=t+"px"):"auto"===o?(this.setData("widthAdjusted",1),e.style.width="auto",e.getBoundingClientRect().width>t&&this.setData("widthAdjusted",2)):(this.setData("widthAdjusted",1),e.style.width=t+"px",e.style.minWidth=t+"px"),e.getBoundingClientRect().width},getFocusableElements:function(){return this.$node.getDropBox().querySelectorAll(_lyteDropdown.focusableElementsSelector)},getDropBody:function(e){var t;return(t=e?e.querySelectorAll("lyte-drop-body"):this.$node.querySelectorAll("lyte-drop-body"))[t.length-1]},toggleCurrent:function(e){var t="lyteDropdownSelection",a=this.getDropBox(),o=a&&a.querySelector("."+t);o&&o.classList.remove(t),e.classList.add(t),this.getActiveElement().setAttribute("aria-activedescendant",e.getAttribute("id"))},scrollSel:function(){var e,t,a=this.getData("ltPropSelected"),o=this.childComp,i=this.getDropBody(o),r=this.getAllItems(i),n=e=this.getItem(r,a);if(this.getData("multiple"))(e=r.filter((function(e){return!e.classList.contains("lyteDropdownActive")&&!e.classList.contains("lyteSearchHidden")}))[0])&&!e.classList.contains("lyteDropdown-disabled")&&this.toggleCurrent(e);else{for(0===(a||"").length&&(i.scrollTop=0);n&&(n=n.previousElementSibling)&&("LYTE-DROP-ITEM"!==n.tagName&&"LYTE-DROP-LABEL"!==n.tagName||!_lyteDropdown.isVisible(n)););n=n||e,i.scrollTop=n?n.offsetTop:0,e&&!e.classList.contains("lyteDropdown-disabled")?this.toggleCurrent(e):(t=i.querySelector(".lyteDropdownSelection"))&&t.classList.remove("lyteDropdownSelection")}},clone:function(e){var t={};for(var a in e)t[a]=e[a];return t},isFF:function(){return!!~navigator.userAgent.indexOf("Firefox")},isBodyScrollable:function(){var e=this.childComp,t=this.getDropBody(e);return t.scrollHeight>t.offsetHeight},addProperScrollbar:function(){var e=this.childComp,t=this.getDropBody(e);t.classList.contains("lyteDropdownFFScroll")||t.classList.add("lyteDropdownFFScroll"),t.classList.contains("lyteDropdownFFZeroScroll")&&t.classList.remove("lyteDropdownFFZeroScroll")},removeScrollbar:function(){var e=this.childComp,t=this.getDropBody(e);t.classList.contains("lyteDropdownFFZeroScroll")||t.classList.add("lyteDropdownFFZeroScroll"),t.classList.contains("lyteDropdownFFScroll")&&t.classList.remove("lyteDropdownFFScroll")},getButton:function(){return this.$node.element||this.$node.querySelector("lyte-drop-button")},shouldNavigate:function(){var e=this.getData("ltPropActiveElement"),t=document.activeElement;return!this.getData("ltPropAllowFocusableElements")||!e||t.matches(e)},setCss:function(e,t){var a=this.childComp,o=this.getData("call");if(t||this.setData("savedPositions",{}),a&&!a.classList.contains("lyteDropdownHidden")){a.style.left="",a.style.top="",a.style.bottom="",a.style.right="";var i=this.getData("ltPropCallout"),r=a,n=this.$node.element||this.$node.querySelector("lyte-drop-button"),s=(window.innerWidth,window.innerHeight,this.getData("savedPositions")),l=this.clone(r.getBoundingClientRect()),d=this.getDropBody(r).getBoundingClientRect(),p=window.pageXOffset||document.documentElement.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop,h=r.offsetHeight,u=r.offsetWidth,f=a.querySelector(".lyteArrow"),y=this.getData("ltPropPosition"),m=n.getBoundingClientRect(),g=this.isFF(),v=this.getScopeBoundary();this.data.ltPropAnimate&&(this._hgt=this.data.ltPropAnimateBox?l.height:d.height),o&&(this._preventClass=!0,this.scrollSel(),e||(u=this.adjustWidth(r,m.width,u),l.width=u,i||(f.style.width=m.width+"px"))),i&&!r.classList.contains("lyteDropBodyCallout")&&r.classList.add("lyteDropBodyCallout"),g&&this.isBodyScrollable()?this.addProperScrollbar():g&&!this.isBodyScrollable()&&this.removeScrollbar();var b,P,D,_,L,C,w,T,x,S,A=_lyteUiUtils.getRTL();"down"===y?(b=!0,b=!(m.top+m.height+h>v.bottom&&m.top>h),P=0,m.left+m.width-u>v.left&&(P=1),m.left+u<=v.right&&(P+=2),P=A?!(1&P||!P):!(!(2&P)&&P),t&&!_lyteDropdown.isEmpty(s)?(P=s.rightPos,b=s.downPos):t&&(s.rightPos=P,s.downPos=b,this.setData("savedPositions",s)),b?i?(this.setCorrectClass("lyteArrowTop"),x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),r.style.top=this.setTopBelowForDown(n,m,c)+parseFloat(x||"0px")+"px"):r.style.top=this.setTopBelowForDown(n,m,c)+"px":i?(this.setCorrectClass("lyteArrowBottom"),x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),r.style.bottom=this.setTopAboveForDown(n,r,m,l,c)-x+"px"):r.style.bottom=this.setTopAboveForDown(n,r,m,l,c)+"px",P?(i&&(S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),L=window.getComputedStyle(f,":before").marginLeft,L=Math.abs(parseFloat(L||"0px")),T=(m.width/2-S+L)/(w=u/100),f.style.left=T+"%"),r.style.left=this.setLeftNotExceedForDown(n,m,p)+"px"):(i&&(S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),L=window.getComputedStyle(f,":before").marginLeft,L=Math.abs(parseFloat(L||"0px")),w=u/100,T=(u-m.width/2-S+L)/w,f.style.left=T+"%"),r.style.right=this.setLeftExceedForDown(n,r,m,u,p)+"px"),b?this.setData("pos","down"):this.setData("pos","up"),P?this.setData("secondaryPosition","right"):this.setData("secondaryPosition","left")):"right"===y?(P=0,m.left-l.width>v.left&&(P=1),m.left+m.width+l.width<v.right&&(P+=2),P=A?!(1&P||!P):!(!(2&P)&&P),b=!0,b=!(m.top+l.height>v.bottom),t&&!_lyteDropdown.isEmpty(s)?(P=s.rightPos,b=s.downPos):t&&(s.rightPos=P,s.downPos=b,this.setData("savedPositions",s)),P?i?(this.setCorrectClass("lyteArrowLeft"),S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),r.style.left=this.setLeftForRight(n,m,p)+S+"px"):r.style.left=this.setLeftForRight(n,m,p)+"px":i?(this.setCorrectClass("lyteArrowRight"),S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),r.style.right=this.setRightForRight(n,r,m,u,p)-S+"px"):r.style.right=this.setRightForRight(n,r,m,u,p)+"px",b?(i&&(x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),C=window.getComputedStyle(f,":before").marginTop,C=Math.abs(parseFloat(C||"0px")),T=100*(m.height/2-x+C)/(w=l.height),f.style.top=T+"%"),r.style.top=this.setTopForRight(n,m,c)+"px"):(i&&(x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),C=window.getComputedStyle(f,":before").marginTop,C=Math.abs(parseFloat(C||"0px")),T=100*(l.height-m.height/2-x+C)/(w=l.height),f.style.top=T+"%"),r.style.bottom=this.setTopForRightAbove(n,r,m,l,c)+"px"),P?this.setData("pos","right"):this.setData("pos","left"),b?this.setData("secondaryPosition","down"):this.setData("secondaryPosition","up")):"up"===y?(D=!0,D=!(m.top-l.height<v.top&&m.top+m.height+h<v.bottom),P=0,m.left+m.width-u>v.left&&(P=1),m.left+u<=v.right&&(P+=2),P=A?!(1&P||!P):!(!(2&P)&&P),t&&!_lyteDropdown.isEmpty(s)?(P=s.rightPos,D=s.topPos):t&&(s.rightPos=P,s.topPos=D,this.setData("savedPositions",s)),D?i?(this.setCorrectClass("lyteArrowBottom"),x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),r.style.bottom=this.setTopAboveForDown(n,r,m,l,c)-x+"px"):r.style.bottom=this.setTopAboveForDown(n,r,m,l,c)+"px":i?(this.setCorrectClass("lyteArrowTop"),x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),r.style.top=this.setTopBelowForDown(n,m,c)+x+"px"):r.style.top=this.setTopBelowForDown(n,m,c)+"px",P?(i&&(S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),L=window.getComputedStyle(f,":before").marginLeft,L=Math.abs(parseFloat(L||"0px")),T=(m.width/2+L-S)/(w=u/100),f.style.left=T+"%"),r.style.left=this.setLeftNotExceedForDown(n,m,p)+"px"):(i&&(S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),L=window.getComputedStyle(f,":before").marginLeft,L=Math.abs(parseFloat(L||"0px")),w=u/100,T=(u-m.width/2+L-S)/w,f.style.left=T+"%"),r.style.right=this.setLeftExceedForDown(n,r,m,u,p)+"px"),D?this.setData("pos","up"):this.setData("pos","down"),P?this.setData("secondaryPosition","right"):this.setData("secondaryPosition","left")):"left"===y&&(_=0,m.left+m.width+u<v.right&&(_=1),m.left-u>v.left&&(_+=2),_=A?!(1&_||!_):!(!(2&_)&&_),b=!0,b=!(m.top+l.height>v.bottom),t&&!_lyteDropdown.isEmpty(s)?(_=s.leftPos,b=s.downPos):t&&(s.leftPos=_,s.downPos=b,this.setData("savedPositions",s)),_?i?(this.setCorrectClass("lyteArrowRight"),S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),r.style.right=this.setRightForRight(n,r,m,u,p)-S+"px"):r.style.right=this.setRightForRight(n,r,m,u,p)+"px":i?(this.setCorrectClass("lyteArrowLeft"),S=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),r.style.left=this.setLeftForRight(n,m,p)+S+"px"):r.style.left=this.setLeftForRight(n,m,p)+"px",b?(i&&(x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),C=window.getComputedStyle(f,":before").marginTop,C=Math.abs(parseFloat(C||"0px")),T=100*(m.height/2-x+C)/(w=l.height),f.style.top=T+"%"),r.style.top=this.setTopForRight(n,m,c)+"px"):(i&&(x=window.getComputedStyle(f,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),C=window.getComputedStyle(f,":before").marginTop,C=Math.abs(parseFloat(C||"0px")),T=100*(l.height-m.height/2-x+C)/(w=l.height),f.style.top=T+"%"),r.style.bottom=this.setTopForRightAbove(n,r,m,l,c)+"px"),_?this.setData("pos","left"):this.setData("pos","right"),b?this.setData("secondaryPosition","down"):this.setData("secondaryPosition","up")),r.__height=h}},getScopeBoundary:function(){var e,t,a=this.getData("ltPropScope"),o={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight};return"window"!==a&&(e=$L(this.$node).closest(a).get(0))?(t=e.getBoundingClientRect(),{left:Math.max(0,t.left),top:Math.max(0,t.top),right:Math.min(window.innerWidth,t.right),bottom:Math.min(window.innerHeight,t.bottom)}):o},setFreezeLayer:function(){var e=document.getElementById("lytedropdownfreezelayer");"all"===this.getData("ltPropPreventScroll")&&(e.style.display="block",e.classList.add("lyteDropdownZIndex")),document.body.classList.add("lyteBodyWrapper")},isInView:function(e){var t=this.getDropBody(this.childComp),a=t.scrollTop,o=t.offsetHeight,i=e.offsetTop,r=e.offsetHeight;return i>=a&&i+r<=a+o},moveIntoView:function(e){var t=this.getDropBody(this.childComp).scrollTop;e.offsetTop<=t?this.moveDown(e):this.moveUp(e)},moveDown:function(e){this.getDropBody(this.childComp).scrollTop=e.offsetTop},moveUp:function(e){var t=this.getDropBody(this.childComp);t.scrollTop=e.offsetTop+e.offsetHeight-t.offsetHeight},scrollIntoView:function(e,t){var a=this.getDropBody(this.childComp);e.offsetTop,a.scrollTop,a.getBoundingClientRect().height,e.getBoundingClientRect().height,a.contains(e)&&(this.isInView(e)||this.moveIntoView(e))},open:function(){var e,t=this,a=this.getData("ltPropType"),o=this.getData("drophead"),i=this.getData("multiple"),r=this.getData("ltPropFreeze"),n=this.getData("ltPropHover");e=this.childComp=this.$node.querySelector("lyte-drop-box"),this.closeError(e,o),this.hideNodes(),"multisearch"===a&&"yield"!==o&&$L(this.$node.querySelector(".lyteDropdownTextField")).search({scope:e,trim:!0,searchDelay:void 0,hiddenSelector:".lyteDropdownActive",search:"lyte-drop-item",related:"lyte-drop-group",onSearch:function(e,a,o){var i,r=0,n=t.childComp,s=t.getDropBody(n),l=s.querySelector(".lyteDropdownNoResult"),d=t.getData("ltPropNoResult");if(t.getMethods("onSearch")&&(i=t.executeMethod("onSearch",e,a,o,t)),!1===i)return i;for(s.scrollTop=0;r<e.length;r++)if(!e[r].classList.contains("lyteDropdownActive"))return l&&(l.style.display="none"),void t.toggleCurrent(e[r],s);"none"===l.style.display&&d&&(l.style.display="block")}}),e.origindd=this.$node,_lyteUiUtils.appendChild(document.body,e),e.classList.remove("lyteDropdownHidden"),this.preventParentScroll(),!r||i||n||this.setFreezeLayer()},preventParentScroll:function(){if(this.getData("ltPropPreventParentScroll")){var e,t,a=$L(this.$node).parents(),o=this;e=a.filter(this.isScrollable),t=(t=a.filter(this.isLyteScrollBar)).map((function(e,t){return t.parentNode})),e.each((function(e,t){$L(t).data("lyte-scrollTop",t.scrollTop),$L(t).data("lyte-scrollLeft",t.scrollLeft)})),this.scrollableParents=e,this.lyteScrollBarParents=t,this.scrollableParents.on("scroll",this.resetScroll),this.lyteScrollBarParents.each((function(e,t){t&&(t.addEventListener("touchmove",o.disableLyteScrollBar,!0),t.addEventListener("wheel",o.disableLyteScrollBar,!0))})),document.body.classList.add("lyteBodyWrapper")}},disableLyteScrollBar:function(e){e.stopPropagation()},isScrollable:function(e,t){var a=$L(t).css("overflow-y"),o=$L(t).css("overflow-x");return t.clientWidth<t.scrollWidth&&("auto"===o||"scroll"===o)||t.clientHeight<t.scrollHeight&&("auto"===a||"scroll"===a)},isLyteScrollBar:function(e,t){return t.classList.contains("lyteScrollBar")},resetScroll:function(){var e=$L(this).data("lyte-scrollTop"),t=$L(this).data("lyte-scrollLeft");this.scrollTop=e,this.scrollLeft=t},hideNodes:function(){var e,t,a=this.childComp,o=0,i=this.getData("multiple"),r=this.getData("ltPropType"),n=this.getData("drophead"),s=this.getData("ltPropSelected");if(i&&s&&s.length>2){if(!a)return;try{e=JSON.parse(this.getData("ltPropSelected")||"[]")}catch(e){return void console.error("Unable to parse ltPropSelected",e)}for(var l=this.getAllItems(a);o<e.length;o++)(t=this.getItem(l,e[o]))&&(t.classList.add("lyteDropdownActive"),this.hideGroup(t),this.setData("preventSel",!0),t.setAttribute("selected",!0),this.setData("preventSel",!1))}this.showError(a,r,n)},showNodes:function(e){var t,a,o,i,r=0,n=this.childComp,s=this.getDropBody(n),l=this.getData("multiple"),d=this.getData("ltPropType"),p=this.getData("drophead"),c=this.getData("ltPropSelectedList")||[],h=this.getData("sysValue"),u=e.newValue,f=e.oldValue;if(l){n&&(i=s.querySelector(".lyteDropdownNoResult"));try{u=JSON.parse(u||"[]").map((function(e){return""+e})),f=JSON.parse(f||"[]").map((function(e){return""+e}))}catch(e){return void console.error("Unable to parse ltPropSelected",e)}a=f.length;for(var y=this.getAllItems(n);r<a;r++)if(-1===u.indexOf(f[r])){for(n&&(o=this.getItem(y,f[r]))&&(o.classList.remove("lyteDropdownActive"),this.showGroup(o),this.setData("preventSel",!0),o.removeAttribute("selected"),this.setData("preventSel",!1)),this.setData("preventSelListObs",!0),t=0;t<c.length;t++)if(""+c[t][h]===f[r]){Lyte.arrayUtils(c,"removeAt",t,1);break}this.setData("preventSelListObs",!1),i&&("multisearch"===d&&"yield"!==p||"multiple"===d)&&(i.style.display="none")}}},selObs:function(e){var t=e.oldValue;if(!this.getData("prev")){if(this.checkLimit(0))return this.setData("prev",!0),this.setData("ltPropSelected",t),void this.setData("prev",!1);this.hideNodes(),this.showNodes(e)}}.observes("ltPropSelected"),toggleDropdownClass:function(){var e=this.$node,t=this.getData("ltPropSelected")||"[]";this.getData("multiple")&&((t=JSON.parse(t)).length>0?e.classList.remove("lyteDropNoOptSelected"):e.classList.add("lyteDropNoOptSelected"))},first:function(){var e=this.getData("ltPropType");this.setData("ltPropShow",!0),this.setData("ltPropIsOpen",!0),this.open(),"multisearch"===e&&this.focusInput(),this.setBoxStyles()},subsequent:function(e,t,a,o){var i=this.getData("ltPropType"),r=this.getData("drophead");this.setData("ltPropIsOpen",!0),e.classList.remove("lyteDropdownHidden"),this.preventParentScroll(),!t||a||o||this.setFreezeLayer(),"multisearch"===i&&this.focusInput(),this.closeError(e,r),this.showError(e,i,r),this.setBoxStyles()},setBoxStyles:function(){var e=this.getData("ltPropSetPos"),t=this.getDropBox();e||!t||t.classList.contains("lyteDropdownHidden")||this.prerequisites()},beforeShow:function(e,t,a){var o,i=this,r=this.getDropBox(),n=this.getData("ltPropFreeze"),s=this.getData("multiple"),l=this.getData("ltPropHover");(o=this.executeMethod("onBeforeShow",e,this))&&o.then?(_lyteDropdown.lastDropdownWithAPromise=this.$node,this.setData("blockShowHide",!0),o.then((function(o){i.setData("blockShowHide",!1),i.isNotLastDropdownWithPromise()||(i.setData("call",!!t||e),a?i.first():i.subsequent(r,n,s,l))})).catch((function(e){i.setData("blockShowHide",!1),r.removeAttribute("lyte-hidden"),console.error(e)}))):!1!==o?(i.setData("call",!!t||e),a?i.first():i.subsequent(r,n,s,l)):!1===o&&r.removeAttribute("lyte-hidden")},getDropBox:function(){var e=this.childComp;return e||(e=this.$node.querySelector("lyte-drop-box")),e},isNotLastDropdownWithPromise:function(){var e=_lyteDropdown.lastDropdownWithAPromise;return this.$node!==e},closeError:function(e,t){var a=this.getDropBody(e).querySelector(".lyteDropdownNoResult"),o=this.getData("ltPropType");a&&("yield"!==t&&"multisearch"===o||"multiple"===o)&&(a.style.display="none")},checkLimit:function(e){var t,a=this.getData("ltPropType"),o=this.getData("ltPropMaxCount"),i=this.getData("ltPropSelected");if("multiple"===a||"multisearch"===a)return t=JSON.parse(i||"[]").length+e,o>0&&t>o||void 0},findMarked:function(e,t){var a,o,i=[],r=t.length;try{e=JSON.parse(e||"[]").map((function(e){return""+e}))}catch(e){console.error("Unable to parse ltPropSelected",e)}for(a=0;a<r;a++)o=e.indexOf(t[a].getAttribute("data-value")),i=i.concat(e.splice(o,1));return{removed:i,selected:e}},removeMarked:function(e,t,a,o){var i,r,n,s,l=t.length,d=this.getData("ltPropSelectedList")||[],p=this.getData("sysValue");for(this.setData("preventSelListObs",!0),i=0;i<l;i++)for(r=0;r<d.length;r++)if(""+d[r][p]==t[i].getAttribute("data-value")){Lyte.arrayUtils(d,"removeAt",r);break}this.setData("preventSelListObs",!1),n=this.getDropBody(o);var c=this.getAllItems(n);for(i=0;i<t.length;i++)(s=this.getItem(c,t[i].getAttribute("data-value")))&&(s.classList.remove("lyteDropdownActive"),s.classList.remove("lyteSearchHidden"),this.showGroup(s),s.removeAttribute("selected"));this.fixSearchResults(),this.setData("prev",!0),this.setData("ltPropSelected",JSON.stringify(e)),this.setData("prev",!1)},fixSearchResults:function(){var e=this.$node.querySelector("lyte-search")||this.$node.querySelector("input");e&&e.setValue&&e.setValue(e.value||"")},removeAll:function(e){var t,a,o=this.$node,i=this.childComp,r=this.getData("drophead"),n=o.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark"),s=this.getData("ltPropSelected"),l=this.getData("ltPropSelected");this.getData("ltPropReadOnly")||(a=this.findMarked(l,n),t=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(e,a.removed,t,n)||(this.removeMarked(a.selected,n,r,i),this.closeError(i,r),this.getMethods("onRemove")&&this.executeMethod("onRemove",e,a.removed,this.getData("ltPropSelected"),this,t,n),this.fixBoxPosition(),this.fireOnChange(s,e,n)))},relativePosition:function(e,t){var a=e;if(1===t.length&&t[0]===e)return!0;for(;a=a.previousElementSibling;)if(a.getAttribute("lyte-last"))return!0;return!1},shade:function(e){var t,a=this.$node.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark");if(!(a.length>1&&e.classList.contains("lyteDropMark"))){t=0===a.length||this.relativePosition(e,a)?"previousElementSibling":"nextElementSibling";do{e.classList.add("lyteDropMark")}while((e=e[t])&&!e.getAttribute("lyte-last"))}},fireCheckKey:function(){this.$node.component.checkKey(event)},fireOnChange:function(e,t,a){var o=this.getData("ltPropSelected");this.hasValueChanged(e)&&this.getMethods("onChange")&&this.executeMethod("onChange",t,o,this,a)},hasValueChanged:function(e){var t=this.getData("ltPropSelected");return this.getData("multiple")?(e=this.stringifyALS(e))!==(t=this.stringifyALS(t)):e!==t},stringifyALS:function(e){return e=e||"[]",e=JSON.parse(e).map((function(e){return""+e})),JSON.stringify(e)},mark:function(e,t,a){t?(_lyteDropdown.unmark(this),this.shade(e)):a?(_lyteDropdown.unmark(this),e.classList.add("lyteDropMark")):(_lyteDropdown.unmark(),e.classList.add("lyteDropMark")),this.setLast(e)},beforeSelect:function(e,t){var a=this.getData("ltPropSelected"),o=!0,i=t.getAttribute("data-value");return this.getMethods("beforeSelect")&&(o=!1!==(o=this.executeMethod("beforeSelect",e,a,this,t,i))),o},focusInput:function(){var e;window._lyteUiUtils.isMobile?(e=this.$node.querySelector("input"))&&e.focus():$L.fastdom.measure((function(){if(this.$node){var e=this.$node.querySelector("input");e&&e.focus()}}),this)},showError:function(e,t,a){var o,i=this.getDropBody(e),r=i.querySelectorAll("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)");this.getData("ltPropNoResult")&&0===r.length&&(o=i.querySelector(".lyteDropdownNoResult"))&&("multisearch"===t&&"yield"!==a||"multiple"===t)&&(o.style.display="block")},beforeRemove:function(e,t,a,o){var i;return this.getMethods("onBeforeRemove")&&(i=0==(i=this.executeMethod("onBeforeRemove",e,t,this.getData("ltPropSelected"),this,a,o))),i},beforeAdd:function(e,t,a){var o;return this.getMethods("onBeforeAdd")&&(o=this.executeMethod("onBeforeAdd",e,a,this.getData("ltPropSelected"),this,t)),this.isPromise(o)?o:o=0==o},beforeHide:function(e,t,a){var o=!1;if(this.getMethods("onBeforeHide")){if((o=this.executeMethod("onBeforeHide",t,this))&&o.then)return o.then(function(){this.closeDrop(e,t,a)}.bind(this,e,t,a)).catch((function(e){console.error(e)})),!0;o=0==o}return o},beforeScrollClose:function(e){this.getMethods("onBeforeScrollClose")&&this.executeMethod("onBeforeScrollClose",e)},beforeScrollOpen:function(e){this.getMethods("onBeforeScrollOpen")&&this.executeMethod("onBeforeScrollOpen",e)},setHighlight:function(e,t){for(var a,o,i=0;i<e.length&&!e[i].classList.contains("lyteDropdownSelection");i++);e[i]&&e[i]===t&&(o=a=i,(i=_lyteDropdown.find(e,i+1,!0))!=e.length?(e[i].classList.add("lyteDropdownSelection"),this.getActiveElement().setAttribute("aria-activedescendant",e[i].getAttribute("id"))):-1!=(a=_lyteDropdown.find(e,a-1,!1))&&(e[a].classList.add("lyteDropdownSelection"),this.getActiveElement().setAttribute("aria-activedescendant",e[a].getAttribute("id"))),e[o].classList.remove("lyteDropdownSelection"))},setLast:function(e){var t=document.querySelector('[lyte-last="true"]');t&&t.removeAttribute("lyte-last"),e.setAttribute("lyte-last",!0)},optCall:function(e,t,a){this.getMethods("onOptionSelected")&&this.executeMethod("onOptionSelected",e,t,this,a)},setInitialSelected:function(e){var t,a=(e=e||this.getData("ltPropOptions")||[])[0],o=!1;a.constructor==Object&&1==Object.keys(a).length&&(t=a[Object.keys(a)[0]]).constructor==Array&&(o=!0),o?"[object Object]"===Object.prototype.toString.call(t[0])?this.setData("ltPropSelected",t[0][this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",t[0]):"[object Object]"===Object.prototype.toString.call(a)?this.setData("ltPropSelected",a[this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",a)},contentChange:function(e){var t=e.oldValue,a=e.newValue,o=this.getData("ltPropSelected"),i=this.getData("ltPropPlaceholder"),r=(this.getData("ltPropDisplayValue"),"yield"===this.getData("dropbody"));!((t&&0===t.length||!t)&&a&&a.length>0)||o||i||r||this.setInitialSelected(),this.showNoResultDiv()}.observes("ltPropOptions"),hideOptionsBasedOnSelected:function(){var e=this.childComp,t=this.getData("drophead"),a=this.getData("multiple"),o=this.getData("ltPropType");e&&a&&(this.hideNodes(),this.closeError(e,t),this.showError(e,o,t))}.observes("ltPropOptions"),selChange:function(){var e,t,a=this.getData("multiple"),o=this.getData("drophead"),i=this.childComp,r=this.getData("ltPropSelected"),n=this.getData("ltPropDisplayValue"),s=this.getData("preventDisp"),l=i||this.$node.querySelector("lyte-drop-box"),d=(this.getDropBody(l),0);if(!this.prevSelectedList){if(a)this.setSelectedList();else if(!a){var p=this.getAllItems(l);for((t=this.getItem(p,r))&&this.toggleCurrent(t),e=l.querySelectorAll("[selected]");d<e.length;d++)e[d].getAttribute("data-value")!=r&&e[d].removeAttribute("selected");if("yield"!==o)if(t){var c=t.textContent;(n&&!s||!n)&&this.setData("ltPropDisplayValue",(c||"").trim())}else r||s||this.setData("ltPropDisplayValue","")}t&&t.setAttribute("selected","true"),this.toggleDropdownClass()}}.observes("ltPropOptions","ltPropSelected","changeItToInvoke"),setSelectedList:function(){var e,t=this.getData("ltPropSelected");if(t){try{e=JSON.parse(t||"[]").map((function(e){return""+e}))}catch(e){return void console.error("Could not parse ltPropSelected",e)}this.buildList(e)}},buildList:function(e){this.setData("preventSelListObs",!0);for(var t=0;t<e.length;t++)this.isPresentInList(e[t])||(this.isOptionsGiven()?this.buildWithOptions(e[t]):this.buildManually(e[t]));this.setData("preventSelListObs",!1)},isPresentInList:function(e){for(var t=this.getData("ltPropSelectedList")||[],a=this.getData("sysValue"),o=0;o<t.length;o++)if(""+t[o][a]===e)return!0;return!1},isOptionsGiven:function(){var e=this.getData("ltPropUserValue"),t=this.getData("ltPropSystemValue");return e||t},buildWithOptions:function(e){for(var t,a=this.getData("ltPropOptions")||[],o=this.getData("sysValue"),i=0;i<a.length&&!t;)this.isOptGroup(a[i])?t=this.getSelectedFromGroup(a[i],e):""+a[i][o]===e&&(t=a[i]),i++;t&&Lyte.arrayUtils(this.getData("ltPropSelectedList"),"push",t)},isOptGroup:function(e){var t=Object.keys(e);return t.length,1===t.length&&Array.isArray(e[t[0]])},getSelectedFromGroup:function(e,t){var a=Object.keys(e)[0],o=this.getData("sysValue");e=e[a]||[];for(var i=0;i<e.length;i++)if(""+e[i][o]===t)return e[i]},buildManually:function(e){var t=this.childComp||this.$node.querySelector("lyte-drop-box"),a={value:e,display:(this.getItem(this.getAllItems(t),e)||{}).textContent};a.display&&Lyte.arrayUtils(this.getData("ltPropSelectedList"),"push",a)},tabIndexChange:function(){var e=this.getData("ltPropDisabled"),t=this.getElementWithTabIndex(),a=this.getData("ltPropTabindex");e?(this.disableClickableItem(t),t.tabIndex=-1):(this.enableClickableItem(t),t.tabIndex=a)}.observes("ltPropDisabled"),disableClickableItem:function(e){"multisearch"===this.getData("ltPropType")&&(e=this.getClickableItem(e)),e&&e.classList&&e.classList.add("lyteDropdown-disabled"),this.$node.classList.add("lyteDropdownDisabled")},enableClickableItem:function(e){"multisearch"===this.getData("ltPropType")&&(e=this.getClickableItem(e)),e&&e.classList&&e.classList.remove("lyteDropdown-disabled"),this.$node.classList.remove("lyteDropdownDisabled")},getClickableItem:function(e){return"noyield"===this.getData("drophead")?_lyteDropdown.traverse(e,["HTML","LYTE-DROP-BUTTON"]):this.$node.querySelector(".lyteDummyEventContainer")},hideGroup:function(e){var t=$L(e).parent();t.get(0)&&"LYTE-DROP-GROUP"===t.get(0).tagName&&0===this.getVisibleItems(t).length&&t.addClass("lyteDropdownHideGroup")},showGroup:function(e){var t=$L(e).parent();t.get(0)&&"LYTE-DROP-GROUP"===t.get(0).tagName&&this.getVisibleItems(t).length>0&&t.removeClass("lyteDropdownHideGroup")},getVisibleItems:function(e){return e.find("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)")},setSelectedFromList:function(e){var t,a,o=this.getData("multiple"),i=this.getData("sysValue");if(this.getData("ltPropSelected"),o&&(t=this.getData("ltPropSelectedList")||[],!e||this.calculateSelected)){a=[];for(var r=0;r<t.length;r++)a.push(""+t[r][i]);this.prevSelectedList=!0,this.setData("ltPropSelected",JSON.stringify(a)),this.prevSelectedList=!1,this.toggleDropdownClass()}},executeKeyNavigationCallback:function(e){this.getMethods("onKeyNavigation")&&this.executeMethod("onKeyNavigation",this,e)},isInputEmpty:function(e){return"LYTE-SEARCH"===e.tagName&&(e=e.querySelector("input")),!(!e||""!==e.value)},fixBoxPosition:function(){var e=this.getData("ltPropFixPositionOnOpen");this.setCss(!0,e)},focusDropdown:function(){var e=this.getElementWithTabIndex(),t=this.getData("ltPropFocus"),a=this.getData("search");t&&(!a&&e?e.focus():a&&this.$node.open()),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),showHideEmptyMessage:function(){this.showNoResultDiv()}.observes("ltPropShowEmptyMessage"),setSelectedFromListObs:function(){this.getData("preventSelListObs")||this.setSelectedFromList()}.observes("ltPropSelectedList.[]"),ariaObserver:function(){_lyteUiUtils.setAttribute(this.getDropBox(),this.getData("ltPropAriaBox")||{},{}),_lyteUiUtils.setAttribute(this.getDropBody(this.childComp),this.getData("ltPropAriaBody")||{},{}),_lyteUiUtils.setAttribute(this.getAriaButton(),this.getData("ltPropAriaButton")||{},{})}.observes("ltPropAriaButton","ltPropAriaButton.{}","ltPropAriaBox","ltPropAriaBox.{}","ltPropAriaBody","ltPropAriaBody.{}").on("didConnect"),showHide:function(e,t,a){var o,i=this.childComp,r=this.getData("ltPropFreeze"),n=this.getData("multiple"),s=this.getData("ltPropType"),l=this.getData("ltPropHover"),d=this.getData("ltPropRemoveMultiple"),p=this.getData("ltPropShow"),c=this.getData("blockShowHide"),h=this.getData("ltPropReadOnly"),u=this.getData("ltPropDisabled");if(!h&&!u&&!c){if(_lyteDropdown.autoClosed=null,d&&e&&n){for(o=e.target;o&&"LYTE-DROPDOWN"!==o.tagName&&!o.getAttribute("data-value");)o=o.parentNode;if(o&&o.getAttribute("data-value"))return void this.mark(o,e.shiftKey,e.ctrlKey||e.metaKey);_lyteDropdown.unmark()}else _lyteDropdown.unmark();if("enter"==t){if(i&&!i.classList.contains("lyteDropdownHidden"))return;this.$node.querySelector("[tabindex]").focus()}if("leave"!=t||!i||!i.classList.contains("lyteDropdownHidden"))if(this.showNoResultDiv(),p)if(i&&i.classList.contains("lyteDropdownHidden"))i.setAttribute("lyte-hidden",""),_lyteUiUtils.dispatchEvent("beforeshow",this.$node,{originalEvent:e}),this.getMethods("onBeforeShow")?this.beforeShow(e,a,!1):(this.setData("call",!!a||e),this.subsequent(i,r,n,l));else if(!i||!a&&n)i&&"multisearch"===s&&this.focusInput();else{if(this.beforeHide.call(this,i,e,r))return;this.closeDrop(i,e,r)}else i||(this.childComp=this.$node.querySelector("lyte-drop-box")),this.childComp&&this.childComp.setAttribute("lyte-hidden",""),_lyteUiUtils.dispatchEvent("beforeshow",this.$node,{originalEvent:e}),this.getMethods("onBeforeShow")?this.beforeShow(e,a,!0):(this.setData("call",!!a||e),this.first()),n&&this.addClass()}},checkKey:function(e){var t=this.getData("ltPropType");9==e.keyCode&&(this.$node.component.showHide(e,e.type),"multisearch"==t&&this.focusInput())},closeIt:function(e){var t=e.clientX,a=e.clientY,o=this.$node.querySelector("lyte-drop-button"),i=o.getBoundingClientRect().top,r=o.getBoundingClientRect().height,n=o.getBoundingClientRect().left,s=o.getBoundingClientRect().width,l=this.childComp,d=l.getBoundingClientRect().top,p=l.getBoundingClientRect().height,c=l.getBoundingClientRect().left,h=l.getBoundingClientRect().width;t>Math.floor(n)&&t<Math.floor(n+s)&&a>Math.floor(i)&&a<Math.floor(i+r)||t>Math.floor(c)&&t<Math.floor(c+h)&&a>Math.floor(d)&&a<Math.floor(d+p)||this.$node.toggle(e,"leave")},closeFun:function(e){for(var t,a,o,i=this.childComp,r=this.getData("drophead"),n=this.getData("ltPropRemoveMultiple"),s=this.getData("ltPropSelected"),l=e.target,d=this.getData("ltPropSelected");!l.getAttribute("data-value")&&l;)l=l.parentElement;l&&(t=l.getAttribute("data-value"),a=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(e,n?[t]:t,a,n?[l]:l)||(this.closeError(i,r),o=this.findMarked(d,[l]),this.removeMarked(o.selected,[l],r,i),this.getMethods("onRemove")&&this.executeMethod("onRemove",e,n?[t]:t,this.getData("ltPropSelected"),this,a,n?[l]:l),this.fixBoxPosition(),this.fireOnChange(s,e,n?[l]:l)))},data:function(){return{shouldDisplayIcon:Lyte.attr("boolean",{default:!1}),changeItToInvoke:Lyte.attr("number",{default:1}),dummy1:Lyte.attr("boolean",{default:!0}),dummy2:Lyte.attr("boolean",{default:!1}),savedPositions:Lyte.attr("object",{default:{}}),ltPropRemoveMultiple:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","removeMultiple",!1)}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropType:Lyte.attr("string",{default:"default"}),ltPropTabindex:Lyte.attr("number",{default:0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropFreeze:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","freeze",!0)}),ltPropOptions:Lyte.attr("array",{default:[]}),ltPropUserValue:Lyte.attr("string",{default:void 0}),ltPropSystemValue:Lyte.attr("string",{default:void 0}),ltPropPosition:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","position","down")}),ltPropIconClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","iconClass","dropdown")}),ltPropSelected:Lyte.attr("string",{default:""}),ltPropCallout:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","callout",!1)}),ltPropPlaceholder:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","placeholder","")}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropHover:Lyte.attr("boolean",{default:!1}),ltPropNoResult:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","noResult",_lyteUiUtils.i18n("no.results.found"))}),ltPropMaxCount:Lyte.attr("number",{default:0}),ltPropInputClass:Lyte.attr("string",{default:"lyteSearch"}),ltPropBoundary:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),secondaryPosition:Lyte.attr("string",{default:""}),firePos:Lyte.attr("number",{default:1}),ltPropAjaxRequest:Lyte.attr("object",{default:{}}),firstRequest:Lyte.attr("boolean",{default:!0}),userValue:Lyte.attr("string"),sysValue:Lyte.attr("string"),ltPropDisplayValue:Lyte.attr("string",{default:"",hideAttr:!0}),ltPropDisabledList:Lyte.attr("array",{default:[]}),ltPropAnimate:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","animate",!1)}),ltPropSetPos:Lyte.attr("boolean",{default:!1}),ltPropTooltip:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","tooltip",{position:"bottom",appearance:"box",margin:5,keeptooltip:!0})}),ltPropBoxClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","boxClass","")}),ltPropIsOpen:Lyte.attr("boolean",{default:!1}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropFixPositionOnOpen:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","fixPositionOnOpen",!1)}),ltPropForcePlaceholder:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","forcePlaceholder",!1)}),ltPropShowEmptyMessage:Lyte.attr("boolean",{default:!1}),ltPropBoxButtonWidth:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","boxButtonWidth","min-button")}),ltPropPreventScroll:Lyte.attr("string",{default:"all"}),ltPropScope:Lyte.attr("string",{default:"window"}),ltPropAnimateBox:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","animateBox",!1)}),ltPropTooltipClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","tooltipClass","")}),ltPropDisplayList:Lyte.attr("array",{default:[]}),ltPropSelectedList:Lyte.attr("array",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","selectedList",[])}),ltPropItemSearchType:Lyte.attr("string",{default:"contains"}),ltPropFocusOnClose:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","focusOnClose",!0)}),ltPropButtonClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","buttonClass","")}),ltPropDisableItemTooltip:Lyte.attr("boolean",{default:!1}),ltPropPreventParentScroll:Lyte.attr("boolean",{default:!1}),ltPropShowRemoveIcon:Lyte.attr("boolean",{default:!1}),ltPropAriaButton:Lyte.attr("object",{default:{},watch:!0}),ltPropAriaBox:Lyte.attr("object",{default:{},watch:!0}),ltPropAriaBody:Lyte.attr("object",{default:{},watch:!0}),ltPropReadOnly:Lyte.attr("boolean",{default:!1}),ltPropActiveElement:Lyte.attr("string",{default:""}),ltPropAllowFocusableElements:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:null})}},getAllItems:function(e,t){for(var a=t||[],o=e?e.children:[],i=o.length,r=0;r<i;r++){var n=o[r];/lyte-drop-item/i.test(n.tagName||"")?a.push(n):this.getAllItems(n,a)}return a},getItem:function(e,t){for(var a=e.length,o=t,i=0;i<a;i++){var r=e[i];if(r.getAttribute("data-value")==o)return r}return null},actions:{addFocusClass:function(e){this.getDropButton().classList.add("lyteMultiSearchDropButtonFocused")},removeFocusClass:function(e){this.getDropButton().classList.remove("lyteMultiSearchDropButtonFocused")},toolTipConfig:function(e,t){var a=e.offsetWidth,o=e.scrollWidth,i=this.getData("ltPropTooltip");t=t||"showToolTip",this.setData(t,a<o&&!_lyteDropdown.isEmpty(i))},preventDefault:function(e){13===e.keyCode&&e.preventDefault()},closeIt:function(e){this.closeIt(e)},processElements:function(e){this.processElements(e)},closeFun:function(e){this.closeFun(e)},checkKey:function(e){this.checkKey(e)},showHide:function(e){this.showHide(e)}}}),window.addEventListener("scroll",(function(e){$L.fastdom.measure((function(){var t,a,o,i,r,n,s=_lyteDropdown.getVisibleDropbox(),l=e.target;if(s){for(;l!=document&&"LYTE-DROP-BOX"!==l.tagName&&"HTML"!==l.tagName;)l=l.parentElement;if("LYTE-DROP-BOX"!==l.tagName)if(a=s.origindd){if(r=(o=a.component).childComp,n=_lyteDropdown.buildBounds(o),(i=a.getBoundingClientRect()).top<n.top||i.left<n.left||i.right>n.right||i.bottom>n.bottom){if(o.beforeScrollClose(e),o.beforeHide.call(o,r,e,o.getData("ltPropFreeze")))return;o.closeDrop.call(o,r,e,o.getData("ltPropFreeze"),!0),o.getData("ltPropAnimate")||(_lyteDropdown.autoClosed=a)}a.component._preventSetcss||(t=a.component.getData("ltPropFixPositionOnOpen"),a.component.setCss(!0,t))}else _lyteDropdown.openAutoClosedDropdown(l,e)}else _lyteDropdown.openAutoClosedDropdown(l,e)}))}),!0),document.addEventListener("click",(function(e){var t,a,o,i,r,n,s,l,d,p,c,h=e.target,u=e.target,f=0,y=0;if(_lyteDropdown.isScrollBar(u)||(_lyteDropdown.autoClosed=null),h=_lyteDropdown.traverse(h,["LYTE-DROPDOWN","HTML","LYTE-DROP-BOX","LYTE-DROP-REMOVE"]),_lyteDropdown.focusOut&&(_lyteDropdown.preventClose=!(!h||"HTML"===h.tagName)),h)if("HTML"==h.tagName){for(_lyteDropdown.unmark(),i=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");y<i.length;y++)if(r=i[y]){if((n=r.origindd.component).beforeHide.call(n,r,e,n.getData("ltPropFreeze")))continue;s=document.getElementById("lytedropdownfreezelayer"),n.closeDrop.call(n,r,e,s)}(p=document.activeElement)&&"INPUT"===p.tagName&&_lyteDropdown.traverse(p,["LYTE-DROPDOWN"])&&p.blur()}else if("LYTE-DROPDOWN"===h.tagName)for(t=h,a=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");f<a.length;f++)a[f].origindd!=t&&(n=(l=a[f].origindd).component,_lyteDropdown.unmark(),n.beforeHide.call(n,n.childComp,e,n.getData("ltPropFreeze"))||n.closeDrop.call(n,n.childComp,e,n.getData("ltPropFreeze")));else if("LYTE-DROP-REMOVE"===h.tagName){for(l=h;"LYTE-DROPDOWN"!=l.tagName;)l.getAttribute("data-value")&&(d=l),l=l.parentElement;if(o=l.ltProp("type"),l.component.getData("drophead"),_lyteDropdown.closeOtherDropdowns(l),l.ltProp("readOnly"))return;"default"===o?l.ltProp("selected",""):("multisearch"===o&&(l.component.focusInput(),(c=l.querySelector("lyte-search")||l.querySelector("input"))&&c.setValue&&c.setValue("")),d.classList.contains("lyteDropMark")?l.component.removeAll(e):(_lyteDropdown.unmark(),l.component.closeFun(e)))}}),!0),window._lyteUiUtils.isIos&&document.addEventListener("focusout",(function(e){var t,a,o,i,r=e.target;(a=_lyteDropdown.traverse(r,"LYTE-DROPDOWN"))&&"INPUT"===e.target.tagName&&(o=a.component,t=o.childComp,i=o.getData("ltPropFreeze"),_lyteDropdown.focusOut=!0,setTimeout((function(){if(_lyteDropdown.preventClose)_lyteDropdown.preventClose=_lyteDropdown.focusOut=!1;else{if(t&&!t.classList.contains("lyteDropdownHidden")){if(o.beforeHide(t,e,i))return;o.closeDrop(t,e,i)}_lyteDropdown.focusOut=!1}}),0))}),!0),document.addEventListener("keydown",(function(e){var t,a,o,i,r,n,s,l,d,p,c,h,u,f=e.keyCode,y=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)"),m=0;if(!_lyteDropdown.openFocusedDropdown(f))if(32!==f&&40!==f||(u=i=document.activeElement,!(i=_lyteDropdown.traverse(i,["LYTE-DROPDOWN","HTML"]))||("LYTE-DROPDOWN"===i.tagName&&"INPUT"!==u.tagName&&"TEXTAREA"!==u.tagName&&e.preventDefault(),"LYTE-DROPDOWN"!==i.tagName||y&&i===y.origindd)))if(38!=f&&40!=f&&13!=f||!y){if(8===f){if((t=_lyteDropdown.getActive())&&(a=t.component,o=t.querySelector("lyte-drop-button").querySelector(".lyteDropMark")),!(n=_lyteDropdown.getDropdownWithFocusedInput()))return;r=(s=n&&n.component)&&s.getData("ltPropType"),o?(e.preventDefault(),a.setData("isKeyDown",!0),a.removeAll(e),a.setData("isKeyDown",!1)):n&&"multisearch"===r&&_lyteDropdown.isInput(e)&&(l=n.querySelectorAll("lyte-drop-remove")).length>0&&(n.component.setData("isKeyDown",!0),l[l.length-1].click(),n.component.setData("isKeyDown",!1))}else if((27===f||9===f)&&y){if(!(y=_lyteDropdown.traverse(y,["LYTE-DROP-BOX"])))return;if(s=y.origindd.component,_lyteDropdown.shouldTrapFocus(s))_lyteDropdown.loopIfBoundaryElements(s,e);else{if(s.beforeHide.call(s,s.childComp,e,s.getData("ltPropFreeze")))return;s.closeDrop.call(s,s.childComp,e,s.getData("ltPropFreeze"))}}}else{if(38!=f&&40!=f||e.preventDefault(),r=(s=(n=y.origindd).component).getData("ltPropType"),d=(y=s.getDropBox()).querySelector(".lyteDropdownSelection"),!s.shouldNavigate())return;if(!d||d&&!_lyteDropdown.isVisible(d)){for(c=y.querySelectorAll("lyte-drop-item:not(.lyteSearchHidden):not(.lyteDropdownActive)");m<c.length;m++)if(_lyteDropdown.isVisible(c[m])&&"true"!==c[m].getAttribute("disabled")){p=c[m];break}if(d&&d.classList.remove("lyteDropdownSelection"),p)return p.classList.add("lyteDropdownSelection"),void s.getActiveElement().setAttribute("aria-activedescendant",p.getAttribute("id"))}for(f=e.keyCode,c=y.querySelectorAll("lyte-drop-item"),m=0;m<c.length&&!c[m].classList.contains("lyteDropdownSelection");m++);if(13==f)if(s.getData("multiple")){if(!c[m])return;c[m].click()}else c[m]&&c[m].click();else 38==f&&0!=m?(h=m,-1!=(m=_lyteDropdown.find(c,m-1,!1))&&(s.scrollIntoView(c[m],"up"),c[h].classList.remove("lyteDropdownSelection"),c[m].classList.add("lyteDropdownSelection"),s.getActiveElement().setAttribute("aria-activedescendant",c[m].getAttribute("id")),s.executeKeyNavigationCallback(c[m]))):40==f&&m!=c.length-1&&(h=m,(m=_lyteDropdown.find(c,m+1,!0))<c.length&&(s.scrollIntoView(c[m],"down"),c[h].classList.remove("lyteDropdownSelection"),c[m].classList.add("lyteDropdownSelection"),s.getActiveElement().setAttribute("aria-activedescendant",c[m].getAttribute("id")),s.executeKeyNavigationCallback(c[m])))}else i.component.showHide(e,e.type)})),document.addEventListener("keypress",(function(e){var t,a,o,i,r=e.which||e.keyCode,n=0,s=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)"),l=function(e,t,a){if("contains"===a){if(-1!=e.trim().toLowerCase().indexOf(t.toLowerCase()))return!0}else if("startsWith"===a&&e.trim().substring(0,t.length).toLowerCase()===t.toLowerCase())return!0;return!1};if(s.length>0&&(r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57)&&(_lyteDropdown.pressedCharacter=_lyteDropdown.pressedCharacter?_lyteDropdown.pressedCharacter+=String.fromCharCode(r):String.fromCharCode(r),_lyteDropdown.checkDDtimeoutId&&clearTimeout(_lyteDropdown.checkDDtimeoutId),_lyteDropdown.checkDDtimeoutId=setTimeout((function(){_lyteDropdown.pressedCharacter=null}),500),o="LYTE-DROPDOWN"==((o=(document.activeElement||{}).parentElement)||{}).tagName?o:null,s.length>0&&o)){for(n=0;n<s.length&&s[n].origindd!=o;n++);if(o=(s=s[n]).origindd,t=s.querySelectorAll("lyte-drop-item"),i=o.getData("ltPropItemSearchType"),_lyteDropdown.cachePreviousVal.char&&_lyteDropdown.cachePreviousVal.char==_lyteDropdown.pressedCharacter&&_lyteDropdown.cachePreviousVal.pos+1<t.length&&l(t[_lyteDropdown.cachePreviousVal.pos+1].textContent,_lyteDropdown.pressedCharacter,i))a=_lyteDropdown.cachePreviousVal.pos+1;else for(n=0;n<t.length;n++)if(l(t[n].textContent,_lyteDropdown.pressedCharacter,i)){a=n;break}if(null!=a){for(var d=s.querySelectorAll(".lyteDropdownSelection"),p=0;p<d.length;p++)d[p].classList.remove("lyteDropdownSelection");t[a].classList.add("lyteDropdownSelection"),o.component.getActiveElement().setAttribute("aria-activedescendant",t[a].getAttribute("id"));var c=s.querySelector("lyte-drop-body");c.contains(t[a])&&(c.scrollTop+=parseInt(t[a].getBoundingClientRect().top-c.getBoundingClientRect().top))}_lyteDropdown.cachePreviousVal.char=_lyteDropdown.pressedCharacter,_lyteDropdown.cachePreviousVal.pos=a}})),window._lyteUiUtils.isMobile||window.addEventListener("resize",(function(e){delete this._hgt,_lyteDropdown.autoClosed=null;var t,a=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)");a&&!a.origindd.component._preventSetcss&&(t=a.origindd.component.getData("ltPropFixPositionOnOpen"),a.origindd.component.setCss(!0,t))})),_lyteUiUtils.registeredCustomElements["lyte-drop-body"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-body"]=!0,Lyte.createCustomElement("lyte-drop-body",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){if(!this._attributesSet){var e,t,a=_lyteDropdown.traverse(this,["LYTE-DROPDOWN","BODY"]);if("BODY"===a.tagName&&(a=this.origindd),!a||"LYTE-DROPDOWN"!==a.tagName)return;e=a.component,this._attributesSet=!0,this.setAttribute("role","listbox"),this.getAttribute("id")||this.setAttribute("id","Lyte_Drop_Body_"+_lyteDropdownBodyId++),(t=e.getAriaButton())&&t.setAttribute("aria-controls",this.getAttribute("id"))}}})),_lyteUiUtils.registeredCustomElements["lyte-drop-item"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-item"]=!0,Lyte.createCustomElement("lyte-drop-item",{static:{observedAttributes:{get:function(){return["selected"]}}},connectedCallback:function(){this._eventRegistered||(this._eventRegistered=!0,this.setAttribute("aria-selected","false"),this.setAttribute("role","option"),this.getAttribute("id")||this.setAttribute("id","Lyte_Drop_Item_"+_lyteDropdownItemId++),this.addEventListener("mouseenter",(function(){var e,t,a,o=this.getAttribute("data-title"),i=this.offsetWidth,r=this.scrollWidth,n=_lyteDropdown.getDropdownFromItem(this);n&&(n.getData("ltPropDisableItemTooltip")||(e=n.getData("ltPropTooltip"),t=n.getData("ltPropTooltipClass"),o=o||this.innerText.trim(),a=i<r&&!_lyteDropdown.isEmpty(e),this.setAttribute("lt-prop-title",a?o:""),a&&(this.setAttribute("lt-prop-tooltip-config",JSON.stringify(e)),this.setAttribute("lt-prop-tooltip-class",t))))})));var e=_lyteDropdown.getDropdownFromItem(this);this._dropdownComponent=e,window.clearTimeout(e._FFBodyScrollOnAdd),e._FFBodyScrollOnAdd=window.setTimeout((function(){var t=e.isFF();e.getData("ltPropIsOpen")&&t&&e.isBodyScrollable()&&e.addProperScrollbar()}),0)},disconnectedCallback:function(){var e=this._dropdownComponent;e&&(window.clearTimeout(e._FFBodyScrollOnRemove),e._FFBodyScrollOnRemove=window.setTimeout((function(){var t=e.isFF();e.getData("ltPropIsOpen")&&t&&!e.isBodyScrollable()&&e.removeScrollbar()}),0))},attributeChangedCallback:function(e,t,a,o){var i,r,n,s,l,d,p=this,c=this.getAttribute("data-value");if((null===t&&null!==a||null!==t&&null===a)&&(d=!0),d&&"selected"==e)if(this.hasAttribute("selected")){if(this.setAttribute("aria-selected","true"),!(p=_lyteDropdown.traverse(p,["LYTE-DROP-BOX","BODY"]))||"BODY"==p.tagName)return;if((i=p.origindd)||(i=p=_lyteDropdown.traverse(p,["LYTE-DROPDOWN","BODY"])),!(r=i.component))return;if(r.getData("preventSel"))return;"multiple"==(n=r.getData("ltPropType"))||"multisearch"==n?(s=r.getData("ltPropSelected"))&&2==s.length||!s?(s=JSON.stringify([c]),r.setData("ltPropSelected",s)):((l=JSON.parse(s)).push(c),r.setData("ltPropSelected",JSON.stringify(l))):r.setData("ltPropSelected",c)}else this.setAttribute("aria-selected","false")}})),_lyteDropdown={lastDropdownWithAPromise:null,preventClose:!1,autoClosed:null,focusOut:!1,focusableElementsSelector:'input:not(:disabled), button:not(:disabled), [tabindex]:not([tabindex="-1"]), textarea:not(:disabled), select:not(:disabled), a',shouldTrapFocus:function(e){e.$node.getDropBox();var t=e.getFocusableElements();return e.getData("ltPropAllowFocusableElements")&&t.length>1},loopIfBoundaryElements:function(e,t){var a=e.getFocusableElements(),o=a.length,i=(e.$node,document.activeElement);t.shiftKey&&a[0]===i&&(t.preventDefault(),a[o-1].focus()),t.shiftKey||a[o-1]!==i||(t.preventDefault(),a[0].focus())},closeOtherDropdowns:function(e){for(var t=_lyteUiUtils.getVisibleDropdowns()||[],a=0;a<t.length;a++)t[a]!==e&&t[a].close()},openFocusedDropdown:function(e){var t=_lyteDropdown.getDropdownWithFocusedInput();if(27!=e&&9!=e&&t)return"multisearch"!==(t.ltProp("type")||"").toLowerCase()||t.ltProp("isOpen")?void 0:(t.open(),8!==e)},getDropdownFromItem:function(e){if((e=_lyteDropdown.traverse(e,["LYTE-DROP-BOX","BODY"]))&&"BODY"!=e.tagName){var t=e.origindd;return t||(t=e=_lyteDropdown.traverse(e,["LYTE-DROPDOWN","BODY"])),t.component}},getDropdownWithFocusedInput:function(){var e,t=document.activeElement;if(t&&"input"===t.nodeName.toLowerCase()&&(e=_lyteDropdown.traverse(t,["HTML","LYTE-DROPDOWN"])),e&&"lyte-dropdown"===e.nodeName.toLowerCase())return e},getVisibleDropbox:function(){for(var e=(document.body||{}).children||[],t=0;t<e.length;t++)if("LYTE-DROP-BOX"===e[t].tagName&&_lyteDropdown.isVisible(e[t]))return e[t]},isScrollBar:function(e){return e&&(e.classList.contains("lyteScrollContainer")||e.classList.contains("lyteScrollDiv"))},isInBounds:function(e,t){return e.top<t.top&&e.bottom>t.bottom&&e.left<t.left&&e.right>t.right},buildVisibleBounds:function(e,t,a){return{top:t?0:Math.max(e.top,0),left:t?0:Math.max(e.left,0),right:t?window.innerWidth:Math.min(window.innerWidth,e.left+a.offsetWidth),bottom:t?window.innerHeight:Math.min(window.innerHeight,e.top+a.offsetHeight)}},openAutoClosedDropdown:function(e,t){var a,o,i,r,n=e===document,s=_lyteDropdown.autoClosed;s&&(a=n?{}:e.getBoundingClientRect(),o=_lyteDropdown.buildVisibleBounds(a,n,e),r=(i=s.component).childComp,s&&e.contains(s)&&_lyteDropdown.isInBounds(o,s.getBoundingClientRect())&&r.classList.contains("lyteDropdownHidden")&&(i.beforeScrollOpen(t),s.toggle(),_lyteDropdown.autoClosed=null))},isEmpty:function(e){for(var t in e)return!1;return!0},buildBounds:function(e){var t,a,o=e.getData("ltPropBoundary"),i=e.getData("ltPropScope");return"window"!==i&&(t=$L(e.$node).closest(i).get(0))?(a=t.getBoundingClientRect(),{left:Math.max(0,a.left),top:Math.max(0,a.top),right:Math.min(window.innerWidth,a.right),bottom:Math.min(window.innerHeight,a.bottom)}):{left:o.left||0,right:o.right||window.innerWidth,top:o.top||0,bottom:o.bottom||window.innerHeight}},traverse:function(e,t){for(;e&&!~t.indexOf(e.tagName);)e=e.parentNode;return e},find:function(e,t,a){for(var o=a?1:-1,i=e.length;a?t<i:t>-1;t+=o)if(_lyteDropdown.isVisible(e[t])&&"true"!==e[t].getAttribute("disabled"))return t;return a?i:-1},isVisible:function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},pressedCharacter:null,checkDDtimeoutId:null,cachePreviousVal:{},isInput:function(e){var t=e.target;return!(!(t=_lyteDropdown.traverse(t,["LYTE-DROPDOWN"]))||"INPUT"!==e.target.tagName||"text"!==e.target.type||e.target.value)},unmark:function(e){for(var t,a=document.querySelectorAll(".lyteDropMark"),o=0,i=a.length;o<i;o++)(t=e?_lyteDropdown.findParent(a[o]):void 0)&&t==e.$node||a[o].classList.remove("lyteDropMark")},findParent:function(e){return _lyteDropdown.traverse(e,["LYTE-DROPDOWN"])},getActive:function(){var e=document.querySelector(".lyteDropMark");return _lyteDropdown.findParent(e)}},_lyteUiUtils.registeredCustomElements["lyte-drop-group"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-group"]=!0,Lyte.createCustomElement("lyte-drop-group",{static:{observedAttributes:{get:function(){return["label"]}}},attributeChangedCallback:function(e,t,a,o){var i,r;"label"==e&&(i=this.querySelector("lyte-drop-label"),r=this.getAttribute("label"),i?i.textContent=r:((i=document.createElement("lyte-drop-label")).textContent=r,this.insertBefore(i,this.children[0])))}})),Lyte.Component.register("lyte-table",{_template:'<template tag-name="lyte-table"> <div class="lyteTableScroll"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-table-structure id="{{ltPropId}}" class="{{ltPropClass}}" role="{{ltPropRole}}"> <template is="if" value="{{ltPropHeaderLabelKey}}"><template case="true"> <lyte-colgroup> <template is="for" items="{{ltPropHeader}}" item="list" index="indexVal"> <lyte-col></lyte-col> </template> </lyte-colgroup> <lyte-thead role="rowgroup"> <lyte-tr role="row"> <template is="if" value="{{ltPropHeader.length}}"><template case="true"><template is="for" items="{{ltPropHeader}}" item="list" index="indexVal"> <lyte-th id="{{list.id}}" class="{{list.class}}" index="{{indexVal}}" resize="{{list.resize}}" fixed="{{list.fixed}}" icon="{{list.icon}}" role="columnheader"> {{unescape(list[ltPropHeaderLabelKey])}} </lyte-th> </template></template></template> </lyte-tr> </lyte-thead> </template></template> <lyte-tbody role="rowgroup"> <template is="if" value="{{ltPropInfiniteScroll}}"><template case="true"> <template is="for" items="{{ltPropData}}" item="list" index="indexVal"> <lyte-tr id="{{list.body.id}}" class="{{list.body.class}}" role="row" aria-rowindex="{{list.index}}"> <template is="for" items="{{ltPropHeader}}" item="header" index="index"> <lyte-td role="cell" aria-colindex="{{index}}"> <div style="height: {{ltPropCellHeight}}"> {{unescape(lyteUiGetValue(list.body,header[ltPropBodyLabelKey]))}} </div> </lyte-td> </template> </lyte-tr> </template> </template><template case="false"> <template is="for" items="{{ltPropContent}}" item="list" index="indexVal"> <lyte-tr id="{{list.id}}" class="{{list.class}}" role="row"> <template is="for" items="{{ltPropHeader}}" item="header" index="index"> <lyte-td role="cell" aria-colindex="{{index}}">{{unescape(lyteUiGetValue(list,header[ltPropBodyLabelKey]))}}</lyte-td> </template> </lyte-tr> </template> </template></template> </lyte-tbody> </lyte-table-structure> </template><template case="false"><template is="if" value="{{ltPropInfiniteScroll}}"><template case="true"> <lyte-yield yield-name="yield" lt-prop-data="{{ltPropData}}"></lyte-yield> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template></template></template> </div> <template is="if" value="{{expHandlers(ltPropResize.vertical,\'||\',ltPropResize.horizontal)}}"><template case="true"> <lyte-table-resize ontouchstart="{{action(\'tableResize\',event,\'both\')}}" onmousedown="{{action(\'tableResize\',event,\'both\')}}"></lyte-table-resize> <template is="if" value="{{ltPropResize.vertical}}"><template case="true"> <lyte-table-vertical-resize ontouchstart="{{action(\'tableResize\',event,\'vert\')}}" onmousedown="{{action(\'tableResize\',event,\'vert\')}}"></lyte-table-vertical-resize> </template></template><template is="if" value="{{ltPropResize.horizontal}}"><template case="true"> <lyte-table-horizontal-resize ontouchstart="{{action(\'tableResize\',event,\'hori\')}}" onmousedown="{{action(\'tableResize\',event,\'hori\')}}"></lyte-table-horizontal-resize> </template></template></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"if",position:[3,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"if",position:[1,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'height: '","ltPropCellHeight"]}}}},{type:"text",position:[1,1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropContent","ltPropHeader","ltPropId","ltPropClass","ltPropBorder","ltPropHeaderLabelKey","ltPropBodyLabelKey","ltPropWidth","ltPropHeight","ltPropResize","ltPropFixedColumnClass","ltPropYield","ltPropScroll","ltPropColumnSortable","ltPropScrollbarOption","ltPropDualResize","ltPropData","ltPropInfiniteScroll","ltPropCellHeight","ltPropContentLength","ltPropPreventScrollbar","ltPropRole","ltPropStickyTable","ltPropScrollStep","ltPropPreventTableModify","ltPropSortDummyColumClass","ltPropNavigation","ltPropReset","ltPropTags","lyteUnbound","columns","nonFixedColumn","minWidth1","minWidth2","secondaryData","boundary","rowHeights","fromListView"],init:function(){var e=navigator.userAgent,t="beforeRender",a=this,o=a.$node,i=window,r="addEventListener",n="_tableResize";if(a._dir=_lyteUiUtils.getRTL(),a.isIE11Lyte=/rv:11/gi.test(e),a.isEdgeLyte=/Edge/gi.test(e),a._browser=a.isIE11Lyte||a.isEdgeLyte||e.match("Safari"),a.getMethods(t)&&a.executeMethod(t,o),o.scrollTable=function(e,t){var i=a.scrollDiv=a.scrollDiv||o.querySelector("div.lyteTableScroll"),r=new Event("scroll",{bubbles:!0});null!=e&&(i.scrollLeft=e),null!=t&&(i.scrollTop=t),r._byFunc=!0,i.dispatchEvent(r),a.__from_collapse||a.update_collapse(!0)},o.update_collapse=a.update_collapse.bind(a),!i[n]){i[n]=!0;var s=resizeTable;i[r]("resize",s,!0),i[r]("orientationchange",s,!0)}o.toggleRows=function(e){var t=e?"remove":"add",a=this.data.ltPropTags;Array.from(this.querySelectorAll(a.tbody+" "+a.tr+".lytePreventInfiniteScroll")).forEach((function(e){e.classList[t]("lyteHidden")}))}},rtlfunc:function(e,t,a){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?a-t.left:"clientX"==e?a-t[e]:a-t.right;if("left"==e)return"right";if("right"==e)return"left"}return t?t[e]:e},didDestroy:function(){var e=this.data,t=this.scrollDiv,a=this.$node,o=window,i=this._intersectionObs;if(o._tableResize&&0==document.body.getElementsByTagName("lyte-table").length){var r="removeEventListener";o[r]("resize",resizeTable,!0),o[r]("orientationchange",resizeTable,!0),delete o._tableResize}e.ltPropNavigation&&_lyteUiUtils.tableNavigation(a.getElementsByTagName(e.ltPropTags.table)[0],"unbind"),$L.fastdom.clear(this.__collpse_fdom),delete this.__collpse_fdom,i&&(this._setmeasure&&$L.fastdom.clear(this._setmeasure),i.disconnect(),delete this.reset,delete this._intersectionObs,delete this._intersections),!e.ltPropPreventScrollbar&&t&&$L(t).removeScroll(),delete this.scrollDiv,delete this._dummy,delete this._dummy1,delete this.resizeComponent,delete this.targetElem,delete a.setValue,delete a.scrollTable},initProcess1:function(e){var t=this.data,a=e&&"ltPropReset"==e.item;if(!(this._prevent||a&&0==e.newValue)){if(t.ltPropInfiniteScroll){var o=this.$node.getElementsByTagName(t.ltPropTags.table)[0],i=t.ltPropContent||[],r=i.length,n=Math.min(t.ltPropContentLength||r,r),s=[];if(0==r&&!e)return;o&&(o.style.height="auto");for(var l=0;l<n;l++)s[l]={body:i[l],checked:!1,index:l};if(t.fromListView){var d=t.ltPropData,p=Lyte.arrayUtils,c=Lyte.objectUtils;s.forEach((function(e,t){var a=d[t];a?(c(a,"add","body",e.body),c(a,"add","index",e.index),c(a,"add","checked",e.checked)):p(d,"insertAt",e.index,e)})),p(d,"splice",s.length,d.length-s.length)}else this.setData("ltPropData",s);var h=this._dummy,u=this._dummy1,f=this.scrollDiv;delete this._stopScroll,e&&(h&&$L(h).css({height:0,transform:"translateY(0px)"}),u&&$L(u).css("transform","translateY(0px)"),f.scrollTop=0,f.scrollLeft=0),this._boundary={top:this._top=0,bottom:this._bottom=Math.max(n-1,0)}}a&&this.setData(e.item,!1)}}.observes("ltPropContent.[]","ltPropReset").on("init"),didConnect:function(){var e=this.data,t=e.ltPropInfiniteScroll,a=(e.secondaryData,this.$node),o=e.ltPropTags;try{var i=a.querySelector("div.lyteTableScroll");if(this.scrollDiv=i,i.comp=this,i._infiniteScroll=t,!e.ltPropPreventScrollbar&&$L.prototype.scroll){$L(i).scroll(e.ltPropScrollbarOption);var r,n=a.querySelector(".lyteScrollContainer.lyteScrollContainerY"),s=a.getElementsByTagName(o.th)[0];$L.fastdom.measure(function(){var t=this._dir;s&&n&&0==n.offsetTop&&(r=s.getBoundingClientRect().height,$L.fastdom.mutate(function(){n.style.top=r+"px",t&&a.classList.add("lyteRTL")}.bind(this))),$L.fastdom.mutate(function(){e.ltPropDualResize&&a.classList.add("lyteDualResize"),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}.bind(this))}.bind(this))}else this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}catch(e){}t&&(a.classList.add("infinitescroll"),a.setValue=function(e){this._stopScroll&&this.appendAddData1.call(this,e)}.bind(this),a.removeRow=function(e){this.removeRow(e)}.bind(this),a.scrollToRecord=this.scrollToRecord.bind(this),a.insertRow=this.insertRow.bind(this)),e.ltPropNavigation&&_lyteUiUtils.tableNavigation(a.getElementsByTagName(o.table)[0])},columnWidth:function(e,t,a){var o=0;for(a=a||0;a<t;a++)o+=e[a].property.width;return o},heightCalc:function(e,t,a){for(var o=0,i=t;i>0&&!(a<(o+=e[i]));i--);return[o,i]},topElem:function(e){var t;return(t=this.isIE11Lyte||this.isEdgeLyte?e.getElementsByTagName(this.data.ltPropTags.td)[0]:e)?t.getBoundingClientRect():{}},cellSet:function(e,t){var a;return a=this.isIE11Lyte||this.isEdgeLyte?Array.from(e.getElementsByTagName(this.data.ltPropTags.td)):[e],t&&a.forEach((function(e){e.style.transform=t})),a[0].style.transform},scrollTable:function(e,t){var a=e.yScroll,o=this.data.ltPropTags,i=this.getData("ltPropData"),r=this.getData("ltPropContent"),n=this.scrollDiv,s=t.tbodyClient,l=t.$nodeClient,d=this.$node.querySelector(o.table),p=this.$node.getElementsByTagName(o.th)[0],c=t.neglected,h=t.compNeg;p=p?p.property?p.property.height:p.getBoundingClientRect().height:0;var u=t.topElem,f=t.topElemClient;if(-1==d.style.height.indexOf("px")&&(d.style.height=s.height+"px",this._rowHgt=parseInt(10*f.height)/10,this._step=parseInt(10*(s.height-this._rowHgt*c.length))/10),this._dummy||this.createDummy(t.tbody),null==a&&!n.classList.contains("eventBinded")){var y=parseFloat(this._dummy.style.transform.match(/[\d|.]+/gi)[0]);a=n.scrollTop>y?1:-1}var m=this._boundary,g=this._dummy.style,v=(this._dummy1||{}).style,b=this._rowHgt;if(a>0){if(parseFloat(l.top+p)>=parseFloat(f.bottom))if(m.bottom<=r.length-2){var P=Math.max(parseInt((l.top+p-f.bottom)/b),1);m.bottom+P>r.length-1&&(P=r.length-1-m.bottom);for(var D=0;D<P;D++){if(m.bottom+=1,D>=P-i.length&&(Lyte.Component.set(i[this._top],{body:r[m.bottom],index:m.bottom}),u.dataOrder=m.bottom),m.top=m.bottom-i.length+1,this.cellSet(u)?this.regex(u):this.cellSet(u,"translateY("+this._step+"px)"),g.transform="translateY("+(parseFloat(g.transform.match(/[\d|.]+/gi)[0])+b)+"px)",g.height=Math.max(parseFloat(g.height)-b,0)+"px",this._browser&&(v.transform="translateY("+(parseFloat(v.transform.match(/[\d|.]+/gi)[0])+b)+"px)"),this._bottom=this._top,this._top=(this._top+1)%i.length,m.bottom>=r.length){m.bottom=r.length-1,this._top=(this._top+1)%i.length;break}u=this.nthoftype.call(this,t.tbody,this._top+h.length,!0)}}else this.scrollEndMethod1()}else if(a<0){var _=t.bottmElem,L=t.bottmElemClient;if(l.bottom<=L.top){var C=this.cellSet(_).match(/[\d|.]+/gi);if(!C||C&&"0"==C[0])return;P=parseInt(Math.max(parseFloat((L.top-l.bottom)/b),0));var w=Math.max(P-1-this._boundary.top,0);for(D=P-1;D>=0&&0!=P&&0!=m.top;D--){if(m.top-=1,D<=i.length-1+w&&(Lyte.Component.set(i[this._bottom],{body:r[m.top],index:m.top}),_.dataOrder=m.top),m.bottom=m.top+i.length-1,this.cellSet(_)&&this.regex(_,!0),g.height=parseFloat(g.height)+b+"px",g.transform="translateY("+(parseFloat(g.transform.match(/[\d|.]+/gi)[0])-b)+"px)",this._browser&&(v.transform="translateY("+(parseFloat(v.transform.match(/[\d|.]+/gi)[0])-b)+"px)"),this._top=this._bottom,this._bottom=(i.length+this._bottom-1)%i.length,-1==m.top){m.top=0,m.bottom=m.top+i.length-1;break}_=this.nthoftype.call(this,t.tbody,this._bottom+h.length,!0)}}}},createDummy:function(e){var t=document.createElement(this.data.ltPropTags.tr);if(t.classList.add("dummy"),e.appendChild(t),t.setAttribute("style","transform:translateY(0px);height:0px"),this._dummy=t,this._browser){var a=document.createElement("div");a.classList.add("dummy"),this.scrollDiv.appendChild(a),a.setAttribute("style","transform:translateY(0px);height:5px"),this._dummy1=a}},regex:function(e,t){if(this.isIE11Lyte||this.isEdgeLyte)for(var a=e.getElementsByTagName(this.data.ltPropTags.td),o=a.length,i=0;i<o;i++)this.regex1(a[i],t);else this.regex1(e,t)},regex1:function(e,t){var a=e.style,o=a.transform,i=/[\d|.]+/gi,r=this._step;a.transform=t?o.replace(i,(function(e){return Math.max(parseFloat(e)-r,0).toFixed(3)})):o.replace(i,(function(e){return(parseFloat(e)+r).toFixed(3)}))},scrollEndMethod1:function(){this._stopScroll||(this._stopScroll=!0,this.getMethods("scrollEnd")&&this.appendAddData1(this.executeMethod("scrollEnd")))},appendAddData1:function(e){e&&(e.then?Promise.resolve(e).then(function(e){e&&this.apd1.call(this,e)}.bind(this),function(){console.log("error at scroll end promise")}.bind(this)):this.apd1.call(this,e))},apd1:function(e){var t=this.data,a=t.ltPropContent,o=(t.ltPropData,Lyte.arrayUtils);this._prevent=!0,e.constructor==Array?o(a,"concat",e):e.constructor==Object&&o(a,"push",e),delete this._prevent,delete this._stopScroll},nthoftype:function(e,t,a){var o=[],i=e.getElementsByTagName(this.data.ltPropTags.tr);if(a)return i[t];for(var r=i.length,n=0;n<r;n++){var s=i[n];s.classList.contains("dummy")||o.push(this.get_children(s)[t])}return o},scroll:function(e){var t=this.comp,a=this._wheelObj||{bcr:{}};if(!t.__ignore_scroll){this._scrollLeft=null!=a.scrollLeft?a.scrollLeft:this.scrollLeft,this._scrollTop=null!=a.scrollTop?a.scrollTop:this.scrollTop;var o=this._direction,i=!t.data.ltPropStickyTable;if(i&&t.scrollCheck.call(this,e,a),0==this._scrollLeft&&"rtl"!=o&&t.getData("ltPropInfiniteScroll")){var r=t.getData("columns");if(Lyte.arrayUtils(r,"remove",0,r.length),i)for(var n=this.getElementsByClassName("lyteTableFixed"),s=n.length,l=0;l<s;l++)__cur=n[l],__cur.style.left="0px",__cur.classList.remove("lyteTableFixed")}t.data.ltPropInfiniteScroll&&t.scrollTable.call(t,e,a),delete this._scrollLeft,delete this._scrollTop}},scrollCheck:function(e,t){var a=this.parentElement.component,o=a.data.ltPropTags,i=this.getElementsByTagName(o.table)[0],r=this._scrollTop,n=this._scrollLeft,s=a.getData("ltPropScroll"),l=this._direction,d=i.getElementsByTagName(o.tbody)[0],p=this.getElementsByTagName(o.thead)[0],c=[],h=[],u=[];if(p&&(c=p.getElementsByTagName(o.th)),(r!=this.prevScollTop||e._byFunc)&&s.vertical){var f=c;if(f.length){for(var y=0;y<f.length;y++)f[y].classList.add("tableRowFixed"),a.transform(!0,f[y],r);if(!r)for(y=0;y<f.length;y++)f[y].classList.remove("tableRowFixed")}}if((n!=this.prevScollLeft||e._byFunc)&&s.horizontal){var m=a.data.columns,g=[];if(p){var v=Array.apply(Array,p.getElementsByTagName(o.tr)),b=Array.apply(Array,p.getElementsByClassName("lyteRowCopy"));g=v.concat(b)}var P=a.data.ltPropFixedColumnClass||"";if(g.length){h=g[0].getElementsByTagName(o.th);for(var D=0;D<h.length;D++)h[D].classList.contains("lyteFixedColumn")&&u.push(h[D])}for(y=m.length;y<u.length;y++)if(u[y].property.right+a.columnWidth.call(a,u,y)>t.scrollDivClient.right&&"rtl"==l||u[y].property.left<t.scrollDivClient.left+a.columnWidth.call(a,u,y)&&"rtl"!=l){u[y].property.width;var _=u[y].order;if(_+1<h.length){!u[y].classList.contains("lyteTableFixed")&&u[y].classList.add("lyteTableFixed"),m.push(u[y]);for(var L=1;L<g.length;L++)(k=g[L].getElementsByTagName(o.th)[_])&&!k.classList.contains("lyteTableFixed")&&k.classList.add("lyteTableFixed");for(var C=a.nthoftype.call(a,d,_),w=0;w<C.length;w++)!C[w].classList.contains("lyteTableFixed")&&C[w].classList.add("lyteTableFixed"),P&&C[w].classList.add(P)}}for(D=m.length-1;D>=0&&(S=m.length-1,0==n&&(!window.chrome||"rtl"!=l)||(parseFloat((h[m[S].order+1].property.right+m[S].property.width+a.columnWidth.call(a,m,m.length-1)).toFixed(2))<=parseFloat(t.scrollDivClient.right.toFixed(2))||h[m[S].order+1].property.right+2<m[S].property.left)&&"rtl"==l||h[m[S].order+1].property.left>=t.scrollDivClient.left+m[S].property.width+a.columnWidth.call(a,m,m.length-1)&&m[S].property.left>=t.scrollDivClient.left+a.columnWidth.call(a,u,m.length-1)&&"rtl"!=l);D--){for(h[m[S].order].classList.contains("lyteTableFixed")&&h[m[S].order].classList.remove("lyteTableFixed"),P&&h[m[S].order].classList.remove(P),a.transform(!1,m[S],0),L=0;L<g.length;L++)(k=g[L].getElementsByTagName(o.th)[m[S].order])&&(k.classList.contains("lyteTableFixed")&&k.classList.remove("lyteTableFixed"),a.transform(!1,k,0));for(var T=a.nthoftype.call(a,d,m[S].order),x=0;x<T.length;x++)a.transform(!1,T[x],0),T[x].classList.contains("lyteTableFixed")&&T[x].classList.remove("lyteTableFixed"),P&&T[x].classList.remove(P);Lyte.arrayUtils(m,"removeAt",S)}for(var S=0;S<m.length;S++){var A,E=a.nthoftype.call(a,d,m[S].order),M=navigator.userAgent.toLowerCase();A=0==S?"rtl"==l?-1!=M.indexOf("firefox")||-1!=M.indexOf("safari")&&(_lyteUiUtils.isNegativeScroll()||-1==M.indexOf("chrome")&&-1==M.indexOf("chromium"))?n+a.columnWidth.call(a,h,m[S].order,0):-1!=M.indexOf("edge")||-1!=M.indexOf("trident")||-1!=M.indexOf("msie")?-n+a.columnWidth.call(a,h,m[S].order,0):n-1-t.scrollWidth+t.scrollDivClient.width+a.columnWidth.call(a,h,m[S].order,0):n-a.columnWidth.call(a,h,m[S].order,0):"rtl"==l?(-1!=M.indexOf("firefox")||-1!=M.indexOf("safari")&&(_lyteUiUtils.isNegativeScroll()||-1==M.indexOf("chrome")&&M.indexOf("chromium")),a.transform(!1,m[S-1])+a.columnWidth.call(a,h,m[S].order,m[S-1].order+1)):a.transform(!1,m[S-1])-a.columnWidth.call(a,h,m[S].order,m[S-1].order+1);for(var $=0;$<E.length;$++)!E[$].classList.contains("lyteTableFixed")&&E[$].classList.add("lyteTableFixed"),a.transform(!1,E[$],A);for(a.transform(!1,m[S],A),L=0;L<g.length;L++){var k;(k=g[L].getElementsByTagName(o.th)[m[S].order])&&(!k.classList.contains("lyteTableFixed")&&k.classList.add("lyteTableFixed"),a.transform(!1,k,A))}}}this.prevScollLeft=n,this.prevScollTop=r},transform:function(e,t,a){var o=t.style.transform||"translateX(0px) translateY(0px)",i=parseFloat(/translateX\((.+)/.exec(o)[1]),r=parseFloat(/translateY\((.+)/.exec(o)[1]);if(null==a)return parseFloat(e?r:i);t.style.transform=e?"translateY("+a+"px) translateX("+i+"px)":"translateY("+r+"px) translateX("+a+"px)"},borderChangeObs:function(){this.borderChange.call(this)}.observes("ltPropBorder").on("didConnect"),borderChange:function(){this.data.ltPropBorder?this.$node.classList.add("border"):this.$node.classList.remove("border")},widthObsObs:function(){this.widthObs.call(this)}.observes("ltPropWidth").on("didConnect"),widthObs:function(){this.$node.querySelector(this.data.ltPropTags.table).style.width=this.data.ltPropWidth},heightObsObs:function(){this.heightObs.call(this)}.observes("ltPropHeight").on("didConnect"),heightObs:function(){this.$node.querySelector(this.data.ltPropTags.table).style.height=this.data.ltPropHeight},sortableObs:function(){!this.data.ltPropStickyTable&&this.sortable()}.observes("ltPropColumnSortable").on("didConnect"),sortable:function(){var e=this.$node.getElementsByTagName(this.data.ltPropTags.thead)[0];if(e){var t="remove";if(this.data.ltPropColumnSortable&&(this.colSort=this.sortableColumns.bind(this),t="add"),t){var a=t+"EventListener",o=this.colSort;e[a]("mousedown",o),e[a]("touchstart",o),e.parentNode.classList[t]("sortableTable")}}},composePath:function(e){for(var t=[],a=e.target,o=a.correspondingElement||a;o&&"HTML"!=o.tagName;)t.push(o),o=o.parentNode;return t},sortableColumns:function(e){var t=this.data.ltPropTags,a=this.closestFind.call(this,e.path?e.path:this.composePath.call(this,e),t.th+":not(.lyteTableFixed)");if(a&&this.$node.contains(a)){var o,i="touchstart"==e.type;if(this.getMethods("onBeforeSelect")&&(o=this.executeMethod("onBeforeSelect",a,e,this.$node)),0!=o){var r=i?e.touches[0]:e;this._ww=window.innerWidth,this.mousemove=this.sortableMouseMove.bind(this),this.offLeft=this.rtlfunc.call(this,"clientX",r,this._ww)-this.rtlfunc.call(this,"left",a.getBoundingClientRect(),this._ww),this.colHead=a,this._thisBccr=this.$node.getBoundingClientRect(),a.classList.add("lyteStickyTableColumnSortSelect"),document.documentElement.addEventListener(i?"touchmove":"mousemove",this.mousemove),this.mouseup=this.sortableMouseup.bind(this),document.documentElement.addEventListener(i?"touchend":"mouseup",this.mouseup),this.flag=!0,e.preventDefault(),this.getMethods("onSelect")&&this.executeMethod("onSelect",a,e,this.$node)}}},horiScroll:function(e,t){var a,o,i,r=this.rtlfunc.call(this,"left"),n=this.isIE11Lyte||this.isEdgeLyte;if(/mousemove|touchmove/i.test(e.type)&&(a=!0),a){if(this._reqId)return;var s=this.__bcr;o=this.rtlfunc("clientX",e,t)>Math.min(this.rtlfunc("right",s,t),t-2),i=this.rtlfunc("clientX",e,t)<=Math.max(0,this.rtlfunc("left",s,innerWidth))}else o=parseFloat(e.style[r])-this._xxoff+parseFloat(e.style.width)>=this.rtlfunc("right",this._thisBccr,t)-1,i=parseFloat(e.style[r])-this._xxoff+parseFloat(e.style.width)>=this.rtlfunc("right",this._thisBccr,t)-1;o?(this.scrollDiv.scrollLeft+=2*(this._dir?-1*(n?-1:1):1),a&&(this.__clientX-=2*(this._dir?-1:1)),this._reqId=window.requestAnimationFrame(function(){delete this._reqId,this.horiScroll(e,t)}.bind(this))):i?(a&&(this.__clientX+=2*(this._dir?-1:1)),this.scrollDiv.scrollLeft-=2*(this._dir?-1*(n?-1:1):1),this._reqId=window.requestAnimationFrame(function(){delete this._reqId,this.horiScroll(e,t)}.bind(this))):(window.cancelAnimationFrame(this._reqId),delete this._prevent)},sortableMouseMove:function(e){var t="touchmove"==e.type,a=e;if(!t||1==a.touches.length){if(t&&(a=a.touches[0]),this.flag&&null==this._timeout){var o,i=this.colHead.getBoundingClientRect(),r=document.createElement("div");r.classList.add("lyteTableSortHelper"),r.innerHTML=this.colHead.innerText,this._xxoff=o=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1);var n=window.pageYOffset||document.documentElement.scrollTop;r.style.height=i.height+"px",r.style.width=i.width+"px",r.style[this.rtlfunc.call(this,"left")]=o+this.rtlfunc.call(this,"left",i,this._ww)+"px",r.style.top=n+i.top+"px",this._timeout=setTimeout(function(){document.body.appendChild(r),this.flag=!1}.bind(this),100)}var s=document.querySelector("div.lyteTableSortHelper");if(s){var l=this._dir?"right":"left",d=window.innerWidth,p=Math.max(Math.min(this.rtlfunc.call(this,"clientX",a,this._ww)-this.offLeft,this.rtlfunc.call(this,"right",this._thisBccr,this._ww)-parseFloat(s.style.width)),this.rtlfunc.call(this,"left",this._thisBccr,this._ww));if(parseFloat(p)>this.rtlfunc("left",this._thisBccr,d)&&parseFloat(p)+parseFloat(s.style.width)<this.rtlfunc("right",this._thisBccr,d)&&(window.cancelAnimationFrame(this._reqId),delete this._prevent,delete this._scrollDir),this._prevent)return;s.style[l]=p+this._xxoff+"px",this._prevent=!0,this.horiScroll(s,d),this.getMethods("onDrag")&&this.executeMethod("onDrag",this.colHead,s,e,this.$node)}e.preventDefault(),e.stopPropagation()}},sortableMouseup:function(e){if(this.flag)clearTimeout(this._timeout);else{var t=this.data.ltPropTags,a="touchend"==e.type,o=document.getElementsByClassName("lyteTableSortHelper")[0],i=o.getBoundingClientRect(),r=i.left+i.width/2+2,n=i.top+i.height/2,s=this.closestFind.call(this,document.elementsFromPoint?document.elementsFromPoint(r,n):this.elementsFromPointCal.call(this,r,n),t.th+":not(.lyteTableFixed)"),l=this.$node.getElementsByTagName(t.tbody)[0];if(s!=this.colHead&&s){var d,p=this.colHead.parentElement.getElementsByTagName(t.th),c=Array.prototype.indexOf.call(p,this.colHead),h=Array.prototype.indexOf.call(p,s),u=this.data.ltPropHeader;if(this.getMethods("onBeforeDrop")&&(d=this.executeMethod("onBeforeDrop",this.colHead,s,c,h,u,e,this.$node)),0!=d){if(u.length){var f=Lyte.arrayUtils(u,"removeAt",c),y=Array.prototype.indexOf.call(s.parentElement.getElementsByTagName(t.th),s);Lyte.arrayUtils(u,"insertAt",c<h?y+1:y,f);var m=s.parentElement.getElementsByTagName(t.th,s.parentElement)[c<h?y+1:y];s.classList.contains("tableRowFixed")&&(m.classList.add("tableRowFixed"),m.style.top=s.style.top)}else{_lyteUiUtils.insertBefore(h>c?s.nextElementSibling:s,this.colHead);for(var g=this.nthoftype.call(this,l,c),v=this.nthoftype.call(this,l,h),b=0;b<g.length;b++)_lyteUiUtils.insertBefore(h>c?v[b].nextElementSibling:v[b],g[b])}this.getMethods("onDrop")&&this.executeMethod("onDrop",this.colHead,s,c,h,u,e,this.$node)}}document.body.removeChild(o)}document.documentElement.removeEventListener(a?"touchend":"mouseup",this.mouseup),document.documentElement.removeEventListener(a?"touchmove":"mousemove",this.mousemove),this.colHead.classList.remove("lyteStickyTableColumnSortSelect"),window.cancelAnimationFrame(this._reqId),delete this.mouseup,delete this._xxoff,delete this.mousemove,delete this.offLeft,delete this.colHead,delete this.flag,delete this._timeout,delete this._thisBccr,delete this._ww,delete this._reqId,delete this._prevent,delete this._scrollDir,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},elementsFromPointCal:function(e,t){for(var a=[],o=document.elementFromPoint(e,t);o!=document&&o!=document.documentElement&&o!=document.body&&o!=this.$node;)o.style.pointerEvents="none",a.push(o),o=document.elementFromPoint(e,t);for(var i=0;i<a.length;i++)a[i].style.pointerEvents="initial";return a},data:function(){return{ltPropContent:Lyte.attr("array",{default:[]}),ltPropHeader:Lyte.attr("array",{default:[]}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropBorder:Lyte.attr("boolean",{default:!1}),ltPropHeaderLabelKey:Lyte.attr("string",{default:""}),ltPropBodyLabelKey:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:"100%"}),ltPropHeight:Lyte.attr("string",{default:"100%"}),ltPropResize:Lyte.attr("object",{default:{}}),ltPropFixedColumnClass:Lyte.attr("string",{default:""}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropScroll:Lyte.attr("object",{default:{horizontal:!0,vertical:!0}}),ltPropColumnSortable:Lyte.attr("boolean",{default:!1}),ltPropScrollbarOption:Lyte.attr("object",{default:{}}),ltPropDualResize:Lyte.attr("boolean",{default:!1}),ltPropData:Lyte.attr("array",{default:[]}),ltPropInfiniteScroll:Lyte.attr("boolean",{default:!1}),ltPropCellHeight:Lyte.attr("string",{default:"20px"}),ltPropContentLength:Lyte.attr("number"),ltPropPreventScrollbar:Lyte.attr("boolean",{default:!1}),ltPropRole:Lyte.attr("string",{default:""}),ltPropStickyTable:Lyte.attr("boolean",{default:!1}),ltPropScrollStep:Lyte.attr("number",{default:2}),ltPropPreventTableModify:Lyte.attr("boolean",{default:!0}),ltPropSortDummyColumClass:Lyte.attr("string",{default:""}),ltPropNavigation:Lyte.attr("boolean",{default:!1}),ltPropReset:Lyte.attr("boolean",{default:!1}),ltPropTags:Lyte.attr("object",{default:{table:"lyte-table-structure",thead:"lyte-thead",tbody:"lyte-tbody",td:"lyte-td",th:"lyte-th",tr:"lyte-tr"}}),lyteUnbound:Lyte.attr("boolean",{default:!1}),columns:Lyte.attr("array",{default:[]}),nonFixedColumn:Lyte.attr("array",{default:[]}),minWidth1:Lyte.attr("string",{default:""}),minWidth2:Lyte.attr("string",{default:""}),secondaryData:Lyte.attr("array",{default:[]}),boundary:Lyte.attr("object",{default:{}}),rowHeights:Lyte.attr("array",{default:[]}),fromListView:Lyte.attr("boolean",{default:!1})}},resize_fun:function(e){var t="touchstart"==e.type,a=e,o=e.touches;if(t){if(o.length>1)return;a=o[0]}e.preventDefault(),this.__bcr;var i,r=this.__elem,n=(this.__clientX-(this.__clientX=a.clientX))*(this._dir?-1:1),s=this.__clientY-(this.__clientY=a.clientY),l=this.__min1,d=this.__min2,p=this.__max1,c=this.__max2,h=parseFloat(r.style.width),u=h-n,f=r.nextElementSibling,y="onResizeMove",m=this.__table,g=this.data.ltPropResize,v=this.__dir,b=/vert|both/i.test(v||""),P=$L(this.$node);if(v&&(g.horizontal||(n=0),g.vertical||(s=0)),p&&u>p?n=p-h:l&&u<l&&(n=h-l),b||null==d)f=void 0;else{var D=parseFloat(f.style.width),_=D+n;c&&_>c?n=D-c:d&&_<d&&(n=d-D),_=D+n}if(b){var L=parseFloat(r.style.height);i=L-s,c&&i>c?s=p-L:d&&i<d&&(s=L-d),i=L-s}if(u=h-n,m&&$L(m).css("width",parseFloat(m.style.width)-n+"px"),$L(r).css("width",u+"px"),f&&$L(f).css("width",_+"px"),v){var C=P.css("maxWidth",u+"px");i&&(C.css("maxHeight",i+"px"),$L(r).css("height",i+"px"))}window.cancelAnimationFrame(this._reqId),delete this._reqId,this.horiScroll(e,this.__ww),this.data.ltPropStickyTable&&this._setLeftForInterSection(),this.getMethods(y)&&this.executeMethod(y,r,e,this.$node)},resize_up:function(e){var t=e.touches,a=document,o="removeEventListener",i="onResizeEnd",r=this.__elem;a[o](t?"touchmove":"mousemove",this.__mmove,!0),a[o](t?"touchend":"mouseup",this.__mup,!0),["__dir","__ww","__min2","__min1","__max1","__max2","__clientX","__clientY","__elem","__bcr","__table"].forEach(function(e){delete this[e]}.bind(this)),$L(this.$node).removeClass("resizing lyteTableResizing"),$L(r).removeClass("resizeSelect lyteTableResizeSelect"),this.clearfdm(),this.getMethods(i)&&this.executeMethod(i,r,this.$node,e)},actions:{tableResize:function(e,t){var a="touchstart"==e.type,o=e,i=e.touches;if(a){if(i.length>1)return;o=i[0]}var r=this,n=r.data,s=n.ltPropTags,l=r.$node.getElementsByTagName(s.table)[0],d=t?l:e.target.parentNode,p="onBeforeResizeSelect";if(!r.getMethods(p)||0!=r.executeMethod(p,d,e,r.$node)){var c=d.tagName,h=n.ltPropDualResize,u=$L.fastdom,f=l.style.maxWidth,y=l.style.minWidth,m=l.style.maxHeight,g=l.style.tableLayout,v=$L(l),b=d.offsetWidth,P=c.toLowerCase()==s.th,D=P?d.nextElementSibling:void 0,_=D?D.offsetWidth:0,L=l.offsetWidth,C=r.scrollDiv,w=C.scrollLeft,T=/vert|both/i.test(t||""),x=T?l.offsetHeight+"px":l.style.height,S=$L(r.$node),A=window.getComputedStyle(l),E="fixed"==A.tableLayout;if(r.__ignore_scroll=!0,r.__bcr=r.$node.getBoundingClientRect(),r.__ww=window.innerWidth,r.__dir=t,P&&/%|px/i.test(A.minWidth)){var M=[];Array.from(r.get_children(d.parentNode)).forEach((function(e){M.push({node:e,width:e.style.width||e.offsetWidth+"px"})})),M.forEach((function(e){e.node.style.width=e.width}))}v.css({maxWidth:"0px",tableLayout:"auto",minWidth:"auto"}),T&&v.css("maxHeight","0px"),S.addClass("lyteTableInitialResize"),r.__fd1=u.measure((function(){var t,i,n=window.getComputedStyle(d),s=parseFloat(n.getPropertyValue("min-width")),c=Math.min(b,Math.max(d.offsetWidth,s)),A=parseFloat(n.getPropertyValue("max-width"));if(0==c&&(c=50),P&&E&&(c=Math.min(c,s)),A<c&&(A=c),P){if(h)r.__table=l;else if(D){var M=window.getComputedStyle(D),$=parseFloat(M.getPropertyValue("min-width"));t=Math.min(_,Math.max(D.offsetWidth,$)),i=parseFloat(M.getPropertyValue("max-width")),0==t&&(t=50),E&&(t=Math.min(t,$)),i<t&&(i=t)}}else T&&(i=parseFloat(n.getPropertyValue("max-height")),t=parseFloat(n.getPropertyValue("min-height")));r.__fd2=u.mutate((function(){r.__min1=c,r.__min2=t,r.__max1=A,r.__max2=i,r.__clientX=o.clientX,r.__clientY=o.clientY,r.__elem=d,v.css({maxWidth:f,width:L+"px",maxHeight:m,height:x,tableLayout:g,minWidth:y}),$L(d).addClass("resizeSelect lyteTableResizeSelect").css("width",b+"px"),D&&$L(D).css("width",_+"px"),delete r.__ignore_scroll,C.scrollLeft=w;var n=document,s="addEventListener";n[s](a?"touchmove":"mousemove",r.__mmove=r.resize_fun.bind(r),!0),n[s](a?"touchend":"mouseup",r.__mup=r.resize_up.bind(r),!0),S.addClass("resizing lyteTableResizing").removeClass("lyteTableInitialResize"),r.getMethods(p="onResizeSelect")&&r.executeMethod(p,d,e,r.$node)}))})),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}},clearfdm:function(){var e=$L.fastdom;["__fd1","__fd2"].forEach(function(t){var a=this[t];a&&(e.clear(a),delete this[t])}.bind(this))},arrayFrom:function(e){return Array.from?Array.from(e):Array.apply(Array,e)},closestFind:function(e,t){for(var a=this.arrayFrom.call(this,document.querySelectorAll(t)),o=0;o<e.length;o++)if(-1!=Array.prototype.indexOf.call(a,e[o]))return e[o];return null},findDomIndex:function(e){for(var t=this.data.ltPropData,a=0;a<t.length;a++)if(t[a].index==e)return a;return-1},insertRow:function(e,t){var a=this._boundary,o=a.top,i=a.bottom,r=this.data.ltPropContent,n=this.data.ltPropData;if(this._prevent=!0,Lyte.arrayUtils(r,"insertAt",e,t),e<=i)for(var s=Math.max(o,e);s<=i;s++){var l=this.findDomIndex(s);Lyte.Component.set(n[l],{index:n[l].index,body:r[s]})}if(this.data.ltPropContentLength>r.length){var d=n.length;Lyte.arrayUtils(n,"push",{index:d,body:r[d],checked:!1}),a.bottom++,this._bottom++,this._rowHgt&&(this._step=this._rowHgt*n.length)}delete this._prevent},removeRow:function(e){var t=this.data.ltPropTags,a=this.arrayFrom($L(t.tbody+" "+t.tr+":not(.dummy)",this.$node));e.constructor!=Number&&(e=e.dataOrder||a.indexOf(e));var o=this.findDomIndex(e),i=this._boundary,r=i.top,n=i.bottom,s=this.data.ltPropContent,l=this.data.ltPropData;if(this._prevent=!0,-1!=o){if(n==s.length-1){for(var d=e;d<=n;d++){var p=(o+(d-e)+l.length)%l.length;d+1==s.length?(this.regex(a[p],!0),this._dummy&&((c=this._dummy.style).transform="translateY("+(parseFloat(c.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)",this._dummy1&&((h=this._dummy1.style).transform="translateY("+(parseFloat(h.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)")),s[r-1]&&(Lyte.Component.set(l[p],{index:l[p].index,body:s[r-1]}),a[p].dataOrder=r-1)):(Lyte.Component.set(l[p],{index:l[p].index,body:s[d+1]}),a[p].dataOrder--)}i.bottom--,i.top--,this._bottom=(this._bottom-1+l.length)%l.length,this._top=(this._top-1+l.length)%l.length}else{for(d=e;d<=n;d++)p=(o+(d-e)+l.length)%l.length,Lyte.Component.set(l[p],{index:l[p].index,body:s[d+1]});this._dummy&&((c=this._dummy.style).height=Math.max(0,parseFloat(c.height)-this._rowHgt)+"px")}Lyte.arrayUtils(s,"removeAt",e)}else if(Lyte.arrayUtils(s,"removeAt",e),e<r){for(d=r;d<=n;d++)p=(this._top+d-r+a.length)%a.length,Lyte.Component.set(l[p],{index:l[p].index,body:s[d==s.length?r-1:d]}),d==n&&(this.regex(a[p],!0),this._bottom=(this._bottom-1+l.length)%l.length,this._top=(this._top-1+l.length)%l.length);var c,h;i.bottom--,i.top--,(c=this._dummy.style).transform="translateY("+Math.max(0,parseFloat(c.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)",this._dummy1&&((h=this._dummy1.style).transform="translateY("+Math.max(0,parseFloat(h.transform.match(/[\d|.]+/gi)[0])-this._rowHgt)+"px)")}else e>n&&this._dummy&&(this._dummy.style.height=Math.max(0,parseFloat(this._dummy.style.height)-this._rowHgt)+"px");s.length<this.data.ltPropContentLength&&Lyte.arrayUtils(l,"pop"),delete this._prevent},scrollToRecord:function(e){var t=this.data.ltPropContent.length;null==e||e<0||e>=t||(this._rowHgt||this.$node.scrollTable(),$L.fastdom.clear(this._scrollToRecord),this._scrollToRecord=$L.fastdom.measure(this.processScrollToRecord.bind(this,e)))},processScrollToRecord:function(e){var t,a=this._boundary,o=(a.top,a.bottom),i=this.data.ltPropContent,r=this.data.ltPropData,n=r.length,s=(i.length,this._step),l=this._rowHgt,d=this.scrollDiv,p=d.offsetHeight,c=d.scrollHeight,h=(d.scrollTop,Math.max(0,Math.min(e,i.length-n))),u=h*l,f=this.data.ltPropTags;if(i.length<=n)t=Math.max(0,Math.min(c-p,e*l));else if(o>=e)t=u;else{if(h!=e){u+=s-p;var y=$L(f.thead,this.$node).get(0);y&&(u+=y.getBoundingClientRect().height)}if(u<=(c=d.scrollHeight)-p)t=u;else{for(var m=this.arrayFrom($L(f.tbody+" "+f.tr+":not(.dummy)",this.$node)),g=Math.floor(h/n),v=h%n,b=0;b<n;b++){var P=h+b,D=P%n,_=m[b],L=g+(b<v?1:0);Lyte.Component.set(r[D],{index:P,body:i[P]}),this.cellSet(_,"translateY(0px)");for(var C=0;C<L;C++)this.regex(_)}this._dummy||this.createDummy(this.$node.querySelector(f.tbody)),this._dummy.style.transform="translateY("+h*l+"px)",this._dummy1&&(this._dummy1.style.transform="translateY("+h*l+"px)"),t=u,a.top=h,a.bottom=h+n-1,this._top=h%n,this._bottom=(h+n-1)%n}}$L.fastdom.mutate((function(){d.scrollTop=t}))},update_aria:function(e){var t=e.parentNode,a=this.get_children(t).indexOf(e),o=t.parentNode.parentNode,i="setAttribute",r=this.data.ltPropTags;o[i]("role",this.data.ltPropRole),Array.from(this.get_children(o)).forEach(function(e){if(!/^div$/i.test(e.tagName||"")){e[i]("role","rowgroup");var t=e.tagName.toLowerCase()==r.thead?"columnheader":"cell";Array.from(this.get_children(e)).forEach(function(e){e[i]("role","row");var o=this.get_children(e)[a];o&&o[i]("role",t)}.bind(this))}}.bind(this))},get_children:function(e){var t=[];return(null!=e.length?Array.from(e):[e]).forEach((function(e){Array.from(e.children).forEach((function(e){/template/i.test(e.tagName)||t.push(e)}))})),t},get_nth_cell:function(e,t){for(var a=this.get_children(e),o=a.length,i=0,r=0;r<o;r++){var n=a[r];if(i==t)return n;if(i>t)break;i+=n.colSpan||1}},update_collapse:function(e){this.__from_collapse||Array.from(this.$node.getElementsByClassName("lyteHeaderCellCollapsed")).forEach((function(t){this.toggle_column(t,!0,e)}))},toggle_column:function(e,t,a){var o=Array.from(e.parentNode.children).indexOf(e),i=this.$node.getElementsByTagName(this.data.ltPropTags.tbody),r=this.get_children(i),n=this.data.ltPropStickyTable;e.classList[t?"add":"remove"]("lyteHeaderCellCollapsed"),r.forEach(function(e,a){var i=this.get_nth_cell(e,o);i&&(a||(i.rowSpan=t?r.length:1,i.classList[t?"add":"remove"]("lyteCollapseFirstCell")),i.classList[t?"add":"remove"]("lyteCellCollapsed"))}.bind(this)),this.__from_collapse||a||!n&&!e.classList.contains("lyteTableFixed")||($L.fastdom.clear(this.__collpse_fdom),this.__from_collapse=!0,this.__collpse_fdom=$L.fastdom.measure(function(){delete this.__collpse_fdom,this.$node[n?"reset":"scrollTable"](),delete this.__from_collapse}.bind(this)))},collapse_column:function(e){this.toggle_column(e,!0)},expand_column:function(e){this.toggle_column(e)}},{mixins:["lyte-table-utils"]}),!_lyteUiUtils.registeredCustomElements["lyte-th"]){function resizeTable(e){if(!e||"resize"!=e.type||!_lyteUiUtils.isMobile){var t=function(e){var t=e.component.scrollDiv;t&&$L(t).resetScrollbar()},a=e&&"orientationchange"==e.type;Array.from(document.body.getElementsByTagName("lyte-table")).forEach((function(e){a?setTimeout(t.bind(this,e),500):t(e)}))}}_lyteUiUtils.registeredCustomElements["lyte-th"]=!0,Lyte.createCustomElement("lyte-th",{static:{observedAttributes:{get:function(){return["fixed","resize","icon","sticky-position","collapse"]}}},getTable:function(){return this.__table||(this.__table=this.closest?this.closest("lyte-table"):$L(this).closest("lyte-table").get(0))},getSticky:function(){var e=this.__is_sticky;return null==e?this.__is_sticky=this.getTable().ltProp("stickyTable"):e},connectedCallback:function(){var e=this.getTable();e&&e.ltProp("role")&&e.ltProp("yield")&&e.component.update_aria(this),this.parentNode.previousElementSibling&&this.classList.add("lyteTableSecondaryHeader")},attributeChangedCallback:function(e,t,a){var o=$L(this);switch(e){case"fixed":o[((l="enable"==a)?"add":"remove")+"Class"]("lyteFixedColumn"),this.getSticky()&&this.__table.component.checkIntersection.call(this,l);break;case"resize":var i="lyte-tablehead-resize";if("enable"==a){var r=document.createElement(i),n="addEventListener",s=this.resize;r[n]("mousedown",s),r[n]("touchstart",s),this.appendChild(r)}else(r=this.getElementsByTagName(i)[0])&&this.removeChild(r);break;case"icon":o[("disable"==a?"add":"remove")+"Class"]("lytePreventIcon");break;case"sticky-position":if("enable"==o.attr("fixed")&&this.getSticky()){var l="right"==a,d=this.__table.component;if(s=l?"add":"remove",!l&&!o.hasClass("lyteTableRightFixed"))return;d.stickyFunction(this,!1,s+"Class","lyteTableRightFixed"),d.checkIntersection.call(this,l,!0)}break;case"collapse":(d=this.getTable())&&("true"==a?d.component.collapse_column(this):"true"==t&&d.component.expand_column(this))}},resize:function(e){if(!this.parentNode.classList.contains("lyteTableFixed")){var t=$L(e.target).closest("lyte-table")[0];t.component.actions.tableResize.call(t.component,e)}},disconnectedCallback:function(){this.__is_sticky&&this.__table.component.disconnectedCallback.call(this),delete this.__table}})}function _lyteInput(e){for(var t=window._lyteUiUtils.input,a=Object.keys(t||{}),o=0;o<a.length;o++){var i=t[a[o]].component;"click"==e.type?i.calenderClickHide.call(i,e):i.scrollFunc.call(i,e)}}_lyteUiUtils.radio||(_lyteUiUtils.radio={}),Lyte.Component.register("lyte-radiobutton",{_template:'<template tag-name="lyte-radiobutton"> <template is="switch" value="{{ltPropType}}"><template case="default"></template><template case="primary"></template><template case="secondary"> <label class="{{radioclass}}" onmouseup="{{action(\'mup\',event)}}"> <input aria-labelledby="{{randomId}}" onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" data-tabindex="{{ltPropDataTabindex}}" class="lyteHide" onclick="{{action(\'valueChanged\',event)}}" disabled="{{expHandlers(ltPropDisabled,\'||\',ltPropReadOnly)}}" checked="{{ltPropChecked}}"> <span class="{{ltPropClass}}"> <span class="lyteRadioCheck"> </span> </span> <span class="{{ltPropLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template><template case="switch"> <label class="" onmouseup="{{action(\'mup\',event)}}"> <input aria-labelledby="{{randomId}}" onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" data-tabindex="{{ltPropDataTabindex}}" checked="{{ltPropChecked}}" disabled="{{expHandlers(ltPropDisabled,\'||\',ltPropReadonly)}}" class="lyteHide on-off-sw" onclick="{{action(\'valueChanged\',event)}}"> <span class="{{ltPropClass}}"> <span class="on-btn"></span> </span> <span class="{{ltPropLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label> </template><template case="slider"> <label class="lyteRadioSliderLabel" onmouseup="{{action(\'mup\',event)}}"> <input aria-labelledby="{{randomId}}" onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" id="{{ltPropId}}" name="{{ltPropName}}" data-tabindex="{{ltPropDataTabindex}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{expHandlers(ltPropDisabled,\'||\',ltPropReadonly)}}" class="lyteHide" onclick="{{action(\'valueChanged\',event)}}"> <span class="{{ltPropClass}}"> <span class="{{ltPropLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[],additional:{next:"primary"}},primary:{dynamicNodes:[],additional:{next:"secondary"}},secondary:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropType","ltPropName","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropValue","ltPropFireOnInit","ltPropLabelClass","ltPropClass","ltPropYield","ltPropAriaRadio","ltPropFocus","ltPropPreventFocus","lyteUnbound","ltPropReadOnly","ltPropDataTabindex"],data:function(){return{ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","type","default")}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropFireOnInit:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","fireOnInit",!1)}),ltPropLabelClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","labelClass","")}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","class","")}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAriaRadio:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-radiobutton","ariaRadio",{})}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropReadOnly:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:"null"})}},ariaObserver:function(e){var t=e.oldValue,a=e.newValue;this.addAriaValues(t,a)}.observes("ltPropAriaRadio"),getFromCache:function(e){return(_lyteUiUtils.radio[this.getData("ltPropName")||""]||{})[e]},setInCache:function(e,t){var a=_lyteUiUtils.radio[this.getData("ltPropName")||""];a&&(a[e]=t)},didDestroy:function(){this.destroyCache(),delete this.$node.focus,delete this.$node.blur,delete this.$node.click},destroyCache:function(){this.getData("ltPropName");var e=this.getData("ltPropValue");this.getFromCache("prev")===e&&this.setInCache("prev",void 0),this.getFromCache("node")===this.$node.querySelector("input")&&this.setInCache("node",void 0);var t=(this.getFromCache("peers")||[]).indexOf(this.$node);~t&&this.getFromCache("peers").splice(t,1)},changeStyle:function(){this.changeStyleFunction()}.observes("ltPropType"),changeStyleFunction:function(){var e=this.getData("ltPropType"),t=(this.getData("ltPropChecked"),this.getData("ltPropClass")),a=this.getData("ltPropLabelClass");-1===e.indexOf("slider")&&-1===e.indexOf("switch")&&-1===e.indexOf("default")&&-1===e.indexOf("primary")&&-1===e.indexOf("secondary")&&this.setData("ltPropType","default"),-1!==e.indexOf("default")?(this.setData("radioclass","lyteRadioBtn lyteDefault"),this.setData("ltPropClass",t||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==e.indexOf("primary")?(this.setData("radioclass","lyteRadioBtn lytePrimary"),this.setData("ltPropClass",t||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==e.indexOf("secondary")?(this.setData("radioclass","lyteRadioBtn lyteSecondary"),this.setData("ltPropClass",t||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==e.indexOf("switch")?(this.setData("ltPropClass",t||"lyteRadioSwitch"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==e.indexOf("slider")&&(this.setData("ltPropClass",t||"lyteRadioSlider"),this.setData("ltPropLabelClass",a||"lyteRadioSliderText"))},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteRadioDisabled"):this.$node.classList.remove("lyteRadioDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),init:function(){this.changeStyleFunction(),this.setRandomId()},initCache:function(){var e=this.getData("ltPropName");e&&(_lyteUiUtils.radio[e]||(_lyteUiUtils.radio[e]={}),_lyteUiUtils.radio[e].peers||(_lyteUiUtils.radio[e].peers=[]),_lyteUiUtils.radio[e].peers.push(this.$node))},nameObserver:function(){this.initCache()}.observes("ltPropName"),setRandomId:function(){this.setData("randomId","lyte-radiobutton-label-"+_lyteUiUtils.rbuttonId++)},didConnect:function(){this.warnUsers();var e=this,t=this.getData("ltPropAriaRadio"),a=this.getData("ltPropDataTabindex");this.$node.setAttribute("data-tabindex",a),this.initCache(),this.reduceOpacity(),this.$node.click=function(){var t=new Event("click",{bubbles:!0,cancelable:!0}),a=e.$node,o=a.ltProp("checked");a.ltProp("disabled")||(a.component.clickFn=!0,o||(a._fR?(a.component.resetValues(),a.component.checkFR(a)):a.ltProp("checked",!0)),a.component.clickFn=!1,a.dispatchEvent(t))},this.$node.focus=function(){var t=e.$node,a=t.querySelector("input");t.ltProp("disabled")||a.focus()},this.$node.blur=function(){var t=e.$node,a=t.querySelector("input");t.ltProp("disabled")||a.blur()},this.callMethodsOnInit(!0),this.addAriaValues({},t)},warnUsers:function(){var e=this.getData("ltPropName")||"",t=this.getData("ltPropValue")||"";e||console.warn("lt-prop-name attribute not present in radiobutton. It is required",this.$node),t||console.warn("lt-prop-value attribute not present in radiobutton. It is required",this.$node)},addAriaValues:function(e,t){var a=this.getRadioWidget();_lyteUiUtils.setAttribute(a,t,e)},getRadioWidget:function(){return this.$node.querySelector("input")},check:function(e,t){this.getMethods("onChecked")&&this.executeMethod("onChecked",e,t,this.eventType())},uncheck:function(e,t){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",e,t,this.eventType())},beforeCheck:function(e,t){if(this.getMethods("onBeforeChecked"))return this.executeMethod("onBeforeChecked",e,t,this.eventType())},beforeUncheck:function(e,t){if(this.getMethods("onBeforeUnchecked"))return this.executeMethod("onBeforeUnchecked",e,t,this.eventType())},onchanged:function(e,t){this.getMethods("onChanged")&&this.executeMethod("onChanged",e,t,this.eventType())},checkCurrentRadio:function(){this.eveType="key",this.setData("ltPropChecked",!0),this.eveType=""},checkNextRadio:function(){var e=this.extractAllRadios(),t=this.getCheckableRadio(e,1);-1!==t&&(e[t].component.eveType="key",e[t].ltProp("checked",!0),e[t].component.eveType="")},checkPreviousRadio:function(){var e=this.extractAllRadios(),t=this.getCheckableRadio(e,-1);-1!==t&&(e[t].component.eveType="key",e[t].ltProp("checked",!0),e[t].component.eveType="")},getCheckableRadio:function(e,t){for(var a=this.getIndex(e),o=e.length,i=a,r=0;r<o;r++)if((i+=t)<0?i=o-1:i===o&&(i=0),!e[i].ltProp("disabled")||i===a)return i;return-1},extractAllRadios:function(){for(var e,t=this.getData("ltPropName"),a=0,o=document.querySelectorAll('input[type="radio"][name="'+t+'"]'),i=[];a<o.length;a++){for(e=o[a];"LYTE-RADIOBUTTON"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentElement;"LYTE-RADIOBUTTON"===e.tagName&&i.push(e)}return i},getIndex:function(e){return e.indexOf(this.$node)},extractRadios:function(){this.getData("ltPropName");for(var e,t=0,a=this.getFromCache("peers")||[];t<a.length;t++)if((e=a[t]).ltProp("checked")&&e!=this.$node)return e},changeChecks:function(e){this.getData("ltPropName");var t,a=this.extractRadios(),o=(a&&a.querySelector("input"),a&&a.component),i=this.$node.querySelector("input");if(!e.newValue||!e.oldValue)if(e.newValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!1),a&&(t=this.beforeUncheck(i,this)),!1===t)return void this.revertState(a,this.$node);if(!1===this.beforeCheck(i,this))return void this.revertState(a,this.$node);a&&(o.setData("prevent",!0),a.ltProp("checked",!1),o.setData("prevent",!1),this.uncheck(i,this)),this.setData("ltPropChecked",!0),this.setData("prevent",!1),this.check(i,this),this.onchanged(i,this)}else if(!e.newValue&&e.oldValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!0),!1===(t=this.beforeUncheck(i,this)))return void this.revertState(this.$node,{});this.setData("ltPropChecked",!1),this.uncheck(i,this),this.onchanged(i,this),this.setData("prevent",!1)}},change:function(e){this.getData("ltPropName");var t=this.getCheckedInput();this.getData("onChange")?e.newValue?this.check(t,this):this.uncheck(t,this.getData("second")):this.changeChecks(e)},getCheckedInput:function(){this.getData("ltPropName");for(var e,t=this.getFromCache("peers")||[],a=0;a<t.length;a++)if((e=t[a].querySelector("input")).matches(":checked"))return e},resetValues:function(){this.setInCache("prev",void 0),this.setInCache("node",void 0)},valueChanged:function(e){this.fireCallbacks(e)}.observes("ltPropChecked"),fireCallbacks:function(e){var t=e.oldValue,a=e.newValue,o=this.getData("ltPropPreventFocus");t&&!a&&this.resetValues(),this.getData("prevent")||(a&&!o&&this.$node.focus(),this.change(e))},focusRadioButton:function(){this.getData("ltPropFocus")&&this.$node.focus(),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),getParentRadio:function(e){for(;e&&"LYTE-RADIOBUTTON"!==e.tagName;)e=e.parentElement;return e},revertState:function(e,t){var a=(e||{}).component,o=(t||{}).component;a&&(a.setData("prevent",!0),a.setData("ltPropChecked",!0),e.querySelector("input").checked=!0,a.setData("prevent",!1)),o&&(o.setData("prevent",!0),o.setData("ltPropChecked",!1),t.querySelector("input").checked=!1,o.setData("prevent",!1))},callMethodsOnInit:function(){var e=this.getData("ltPropFireOnInit"),t=this.getData("ltPropChecked");if(e&&t){var a=this.$node.querySelector("input");a.getAttribute("value"),this.beforeCheck(a,this),this.check(a,this),this.onchanged(a,this)}},checkFR:function(e){e.component.setData("ltPropChecked",!0),e.querySelector("input").checked=!0,e.component.fireCallbacks({oldValue:!1,newValue:!0})},uncheckFR:function(e){e.component.setData("ltPropChecked",!1),e.querySelector("input").checked=!1,e.component.fireCallbacks({oldValue:!0,newValue:!1})},eventType:function(){var e=this.clicked||this.clickFn,t=this.eveType;return e?"click":t||"script"},revertToPreviousState:function(){var e=this.getFromCache("node"),t=this.getParentRadio(e),a=this.$node;this.revertState(t,a),this.setInCache("node",void 0),this.clicked=!1},actions:{preventPropagation:function(){32===event.keyCode&&(this.preventClick=!0)},mup:function(e){var t=this.getData("ltPropName"),a=document.querySelector('input[type="radio"][name="'+t+'"]:checked');this.setData("shouldCallUnChecked",!1),a&&(this.setInCache("prev",a.getAttribute("value")),this.setInCache("node",a),this.setData("shouldCallUnChecked",!0));var o=this.$node.querySelector("input"),i=o.checked;if(!o.disabled&&!i){if(this.clicked=!0,this.getData("shouldCallUnChecked")&&!1===this.beforeUncheck(o,this))return this.setData("preventStateChange",!0),void(this.clicked=!1);if(!1===this.beforeCheck(o,this))return this.setData("preventStateChange",!0),void(this.clicked=!1)}},valueChanged:function(e){var t=e.target,a=t.getAttribute("value"),o=this.getFromCache("prev"),i=this.getFromCache("node"),r=this.getData("preventStateChange"),n=i&&i.parentElement.parentElement.component;if(e.stopPropagation(),this.preventClick)this.preventClick=!1;else if(a!==o)if(r)this.revertToPreviousState();else{if(i){for(;"LYTE-RADIOBUTTON"!==i.tagName;)i=i.parentElement;n.setData("onChange",!0),n.setData("second",this),i._fR?this.uncheckFR(i):i.ltProp("checked",!1),n.setData("second",void 0),n.setData("onChange",!1)}(i=this.getFromCache("node"))&&this.setInCache("node",void 0),this.setData("onChange",!0),this.$node._fR?this.checkFR(this.$node):this.setData("ltPropChecked",!0),this.setData("onChange",!1),this.onchanged(t,this),this.clicked=!1}}}}),document.addEventListener("keydown",(function(e){var t,a,o=e.keyCode;if(37===o||38===o||39===o||40===o||32===o){if("INPUT"!==(t=document.activeElement).tagName)return;for(;"LYTE-RADIOBUTTON"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;if("LYTE-RADIOBUTTON"===t.tagName)switch(a=t.component,e.preventDefault(),o){case 37:case 38:a.checkPreviousRadio();break;case 39:case 40:a.checkNextRadio();break;case 32:a.checkCurrentRadio()}}})),Lyte.Component.register("lyte-input",{_template:'<template tag-name="lyte-input"> <template is="switch" value="{{ltPropType}}"> <template case="password"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{if(ltPropValue,\'ltIconShow\',\'\')}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="{{ltPropType}}" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" style="{{ltPropStyle}}" readonly="{{ltPropReadonly}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}"> <template is="if" value="{{ltPropPasswordIcon}}"><template case="true"> <span class="lyteInputPasswordToggleIcon {{passwordClass}}" lt-prop-tooltip-config="{{ltPropTooltipConfig}}" lt-prop-title="{{passwordTooltip}}" onclick="{{action(\'togglePassword\')}}"></span> </template></template><template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div> </template> <template case="number"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{if(ltPropValue,\'ltIconShow\',\'\')}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="number" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" onkeydown="{{action(\'numberKeydown\',event,this)}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" step="{{ltPropStep}}" max="{{ltPropMax}}" min="{{ltPropMin}}" title="{{ltPropInputTitle}}" onpaste="{{action(\'numberPaste\',event,this)}}" oninput="{{action(\'input\',event,this)}}"> <template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div> </template> <template case="textarea"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <textarea autocomplete="{{ltPropAutocomplete}}" pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" id="{{ltPropId}}" class="{{ltPropClass}}" value="{{lbind(ltPropValue)}}" rows="{{ltPropRows}}" cols="{{ltPropCols}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}"></textarea> <template is="if" value="{{resize}}"><template case="true"> <span class="{{resizeClass}}" onmousedown="{{action(\'resizeSelect\',event)}}" ontouchstart="{{action(\'resizeSelect\',event)}}"></span> </template></template> </div> </template> <template case="date"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input pattern="{{ltPropPattern}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" id="{{ltPropId}}" class="{{ltPropClass}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" value="{{lbind(ltPropCurrentDate)}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onkeydown="{{action(\'calendarKeydown\',event,this)}}" onclick="{{action(\'calendarClick\',event,this)}}" onfocus="{{action(\'showcalendar\',event,this)}}" onblur="{{action(\'blurThrow\',event)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" oninput="{{action(\'input\',event)}}" ondragstart="{{action(\'preventDrag\',event)}}"> <template is="if" value="{{ltPropAria}}"><template case="true"> <span aria-haspopup="true" aria-label="{{ltPropAriaLabel.button}}" disabled="{{ltPropDisabled}}" aria-expanded="{{isExpanded}}" aria-controls="#{{randomId}}" class="lyteInputCalendarIcon" onclick="{{action(\'calIconClick\',event,this)}}" onfocus="{{action(\'calIconFocus\',event,this)}}" onblur="{{action(\'calIconBlur\',event,this)}}" tabindex="{{ltPropTabIndex}}" data-tabindex="{{ltPropDataTabindex}}" onkeydown="{{action(\'calIconKey\',event)}}"></span> </template></template> </div> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole on-before-append="{{method(\'wormholeAppend\')}}" role="dialog" aria-modal="true" aria-label="{{ltPropAriaLabel.modal}}"> <template is="registerYield" yield-name="lyte-content"> <div id="lyteCalendar" class="lyteInputCalendar lyteCalendarHidden {{ltPropCalendarClass}}" onmousedown="{{action(\'calmsdown\',event,this)}}" onkeydown="{{action(\'calendarKey\',event)}}"> <lyte-calendar id="{{randomId}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-number-of-rows="{{ltPropNumberOfRows}}" lt-prop-yield="{{ltPropYield}}" lt-prop-format="{{ltPropFormat}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" lt-prop-year="{{lbind(ltPropYear)}}" lt-prop-month-header-format="{{ltPropMonthHeaderFormat}}" on-date-selected="{{method(\'on-dateselected\')}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" lt-prop-header-type="{{ltPropHeaderType}}" on-navigate="{{method(\'calendarNavigate\')}}" on-viewdate-change="{{method(\'viewDateChange\')}}" on-view-change="{{method(\'viewChange\')}}" lt-prop="{{stringify(ltPropCalendarProperties)}}" lt-prop-activate-navigation="{{lbind(navigation)}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <template is="registerYield" yield-name="footer"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template></template> </lyte-calendar> </div> </template> </lyte-wormhole> </template></template> </template> <template case="datetime"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <template is="if" value="{{showPlaceholder}}"><template case="true"> <span class="lyteInputDateTimePlaceholder">{{ltPropCommonPlaceholder}}</span> </template></template> <input autocomplete="{{ltPropAutocomplete}}" data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" class="{{ltPropClass}}" id="date" placeholder="{{ltPropPlaceholder}}" value="{{lbind(ltPropCurrentDate)}}" onkeydown="{{action(\'calendarKeydown\',event,this)}}" onclick="{{action(\'calendarClick\',event,this)}}" onfocus="{{action(\'showcalendar\',event,this)}}" onblur="{{action(\'blurThrow\',event)}}" oninput="{{action(\'input\',event)}}" ondragstart="{{action(\'preventDrag\',event)}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}"> <template is="if" value="{{ltPropAria}}"><template case="true"> <span aria-haspopup="true" aria-label="{{ltPropAriaLabel.button}}" disabled="{{ltPropDisabled}}" aria-expanded="{{isExpanded}}" aria-controls="#{{randomId}}" class="lyteInputCalendarIcon" onclick="{{action(\'calIconClick\',event,this)}}" onfocus="{{action(\'calIconFocus\',event,this)}}" onblur="{{action(\'calIconBlur\',event,this)}}" tabindex="{{ltPropTabIndex}}" data-tabindex="{{ltPropDataTabindex}}" onkeydown="{{action(\'calIconKey\',event)}}"></span> </template></template> <input autocomplete="{{ltPropAutocomplete}}" tabindex="{{ltPropTabIndex}}" type="text" placeholder="{{ltPropTimePlaceholder}}" class="{{ltPropTimeClass}}" value="{{ltPropDefaultTime}}" id="time" onblur="{{action(\'timeBlur\',event,this)}}" onfocus="{{action(\'timeFocus\',event,this)}}" onkeydown="{{action(\'timeKeydown\',event,this)}}" onclick="{{action(\'timeClick\',event,this)}}" style="{{ltPropStyle}}" ondragstart="{{action(\'preventDrag\',event)}}" disabled="{{ltPropDisabled}}" oninput="{{action(\'timeInput\',this)}}" readonly="{{ltPropReadonly}}"> </div> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole on-before-append="{{method(\'wormholeAppend\')}}" role="dialog" aria-modal="true" aria-label="{{ltPropAriaLabel.modal}}"> <template is="registerYield" yield-name="lyte-content"> <div id="lyteCalendar" class="lyteInputCalendar lyteCalendarHidden {{ltPropCalendarClass}}" onmousedown="{{action(\'calmsdown\',event,this)}}" onkeydown="{{action(\'calendarKey\',event)}}"> <lyte-calendar id="{{randomId}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-number-of-rows="{{ltPropNumberOfRows}}" lt-prop-yield="{{ltPropYield}}" lt-prop-format="{{ltPropFormat}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" lt-prop-year="{{lbind(ltPropYear)}}" lt-prop-month-header-format="{{ltPropMonthHeaderFormat}}" on-date-selected="{{method(\'on-dateselected\')}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" lt-prop-header-type="{{ltPropHeaderType}}" on-navigate="{{method(\'calendarNavigate\')}}" on-viewdate-change="{{method(\'viewDateChange\')}}" on-view-change="{{method(\'viewChange\')}}" lt-prop="{{stringify(ltPropCalendarProperties)}}" lt-prop-activate-navigation="{{lbind(navigation)}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <template is="registerYield" yield-name="footer"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template></template> </lyte-calendar> </div> </template> </lyte-wormhole> </template></template> <lyte-dropdown style="display: none;" lt-prop-position="{{ltPropPosition}}" lt-prop-yield="true" lt-prop-disabled="{{ltPropDropdownDisabled}}" lt-prop-show="{{ltPropDropdownShow}}" lt-prop-callout="{{ltPropDropdownCallout}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-freeze="{{ltPropDropdownFreeze}}" on-hide="{{method(\'hide\')}}" on-show="{{method(\'show\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-option-selected="{{method(\'optionSelected\')}}" on-position-changed="{{method(\'positionChange\')}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{ltPropDefaultTime}}" lt-prop-animate="{{ltPropAnimate}}" lt-prop-scope="{{ltPropScope}}" lt-prop="{{stringify(ltPropDropdownProperties)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button style="display: none;"></lyte-drop-button> <lyte-drop-box id="{{ltPropDropdownId}}" class="{{ltPropDropdownClass}}"> <template is="if" value="{{ltPropHeaderYield}}"><template case="true"> <lyte-drop-head> <lyte-yield yield-name="timeheader"></lyte-yield> </lyte-drop-head> </template></template> <lyte-drop-body> <template is="if" value="{{ltPropYield}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}"> <lyte-yield yield-name="yield" item-value="{{item}}"></lyte-yield> </lyte-drop-item> </template></template><template case="false"><template is="if" value="{{ltPropShowInterval}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}"> <span>{{item.time}}</span> <span style="opacity: 0.5;float: right;margin-left: 5px;">{{item.interval}}</span> </lyte-drop-item> </template></template><template case="false"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}"> <span>{{item.time}}</span> </lyte-drop-item> </template></template></template></template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template> <template case="time"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" value="{{ltPropDefaultTime}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onblur="{{action(\'timeBlur\',event,this)}}" onfocus="{{action(\'timeFocus\',event,this)}}" onkeydown="{{action(\'timeKeydown\',event,this)}}" onclick="{{action(\'timeClick\',event,this)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" ondragstart="{{action(\'preventDrag\',event)}}" oninput="{{action(\'timeInput\',this)}}"> </div> <template is="if" value="{{ltPropDropdown}}"><template case="true"> <lyte-dropdown style="display: none;" lt-prop-position="{{ltPropPosition}}" lt-prop-yield="true" lt-prop-disabled="{{ltPropDropdownDisabled}}" lt-prop-show="{{ltPropDropdownShow}}" lt-prop-callout="{{ltPropDropdownShow}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-freeze="{{ltPropDropdownFreeze}}" on-hide="{{method(\'hide\')}}" on-show="{{method(\'show\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-option-selected="{{method(\'optionSelected\')}}" on-position-changed="{{method(\'positionChange\')}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{ltPropDefaultTime}}" lt-prop-animate="{{ltPropAnimate}}" lt-prop-scope="{{ltPropScope}}" lt-prop="{{stringify(ltPropDropdownProperties)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button style="display: none;"></lyte-drop-button> <lyte-drop-box id="{{ltPropDropdownId}}" class="{{ltPropDropdownClass}}"> <template is="if" value="{{ltPropHeaderYield}}"><template case="true"> <lyte-drop-head> <lyte-yield yield-name="timeheader"></lyte-yield> </lyte-drop-head> </template></template> <lyte-drop-body> <template is="if" value="{{ltPropYield}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}"> <lyte-yield yield-name="yield" item-value="{{item}}"></lyte-yield> </lyte-drop-item> </template></template><template case="false"><template is="if" value="{{ltPropShowInterval}}"><template case="true"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}"> <span>{{item.time}}</span> <span style="opacity: 0.5;float: right;margin-left: 5px;">{{item.interval}}</span> </lyte-drop-item> </template></template><template case="false"><template is="for" items="{{dropdownData}}" item="item" index="index"> <lyte-drop-item data-value="{{item.time}}" class="{{item.className}}"> <span>{{item.time}}</span> </lyte-drop-item> </template></template></template></template></template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template></template> </template> <template default=""> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField{{if(ltPropValue,\' ltIconShow\',\'\')}} {{isBox}} {{ltPropWrapperClass}}" style="{{ltPropWrapperStyle}}"> <input data-tabindex="{{ltPropDataTabindex}}" tabindex="{{ltPropTabIndex}}" type="text" value="{{lbind(ltPropValue)}}" id="{{ltPropId}}" class="{{ltPropClass}}" maxlength="{{ltPropMaxlength}}" name="{{ltPropName}}" placeholder="{{ltPropPlaceholder}}" autocomplete="{{ltPropAutocomplete}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" onfocus="{{action(\'focusClass\',event)}}" onblur="{{action(\'blurThrow\',event)}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" pattern="{{ltPropPattern}}" oninput="{{action(\'input\',event)}}"> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;search&quot;)}}"><template case="true"> <span class="searchIcon"></span> </template></template> <template is="if" value="{{ltPropCloseIcon}}"><template case="true"> <span class="inputCloseIcon" onclick="{{action(\'clsIcon\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </div>  </template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{password:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},type:{name:"type",dynamicValue:"ltPropType"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,4]},{type:"if",position:[3,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]},number:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},value:{name:"value",dynamicValue:"ltPropValue",isLbind:!0}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]},textarea:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"},placeholder:{name:"placeholder",dynamicValue:"ltPropPlaceholder"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},date:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},datetime:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,3]},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[3,7],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[7]}]},time:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"insertYield",position:[1,1]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"for",position:[0],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[3,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3],attr:{style:{name:"style",dynamicValue:"ltPropWrapperStyle"}}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[3,5]},{type:"if",position:[3,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}}]}}],_observedAttributes:["ltPropDisabled","ltPropAutofocus","ltPropAutocomplete","ltPropMaxlength","ltPropName","ltPropPlaceholder","ltPropReadonly","ltPropValue","ltPropWidth","ltPropTabIndex","ltPropType","ltPropAppearance","ltPropDirection","ltPropLabel","ltPropId","ltPropClass","ltPropStyle","ltPropWrapperStyle","ltPropHeight","ltPropPattern","ltPropInputTitle","ltPropRows","ltPropCols","ltPropTextAreaResize","ltPropMax","ltPropMin","ltPropStep","ltPropTimeFormat","ltPropHourInterval","ltPropDefaultTime","ltPropMinuteInterval","ltPropDropdown","ltPropShowInterval","ltPropStartTime","ltPropEndTime","ltPropConvertToNearest","ltPropValidateOnBlur","ltPropFillRows","ltPropNumberOfRows","ltPropMinDate","ltPropMaxDate","ltPropStartWeekDay","ltPropMonthHeaderFormat","daysOfWeek","ltPropYear","ltPropFormat","viewDate","ltPropStartDate","ltPropEndDate","ltPropCurrentDate","ltPropBindToBody","ltPropCalendarClass","ltPropHeaderType","ltPropDropdownDisabled","ltPropDropdownShow","ltPropDropdownCallout","ltPropDropdownFreeze","ltPropDropdownId","ltPropDropdownClass","ltPropPosition","ltPropBoundary","ltPropWheel","ltPropYield","ltPropAnimate","ltPropPreventSelection","ltPropPreventKeys","ltPropUpdateDelay","ltPropAutoUpdate","ltPropCallbackDelay","ltPropCloseIcon","ltPropTimePlaceholder","ltPropCommonPlaceholder","ltPropTimeClass","ltPropAria","ltPropAriaAttributes","ltPropTimeAriaAttributes","ltPropFocus","ltPropCalendarProperties","ltPropDropdownProperties","ltPropScope","ltPropHeaderYield","ltPropConvertedDate","ltPropConvertedTime","ltPropPreventDropdownNavigation","ltPropInputWrapperClass","ltPropWrapperClass","ltPropTimezoneHandling","ltPropFocusAtEnd","ltPropPasswordIcon","ltPropPasswordVisibility","ltPropPasswordTooltip","ltPropTooltipConfig","ltPropAriaLabel","ltPropDataTabindex","eventListeners","selectedField","endMinute","startMinute","dropdownData","originalData","dateRange","meridian","hour","min","selectedDateField","preventObs","resize","resizeClass","pos","isSearch","isBox","dateOrder","showPlaceholder","lyteUnbound","randomId","navigation","passwordClass","passwordTooltip","isExpanded"],init:function(){var e=this.data,t=e.ltPropType;"time"!=t&&"datetime"!=t||(this._prevent=!0,this.timeInValChange.call(this),this.startEndTimeObs.call(this),delete this._prevent,-1!=t.indexOf("time")&&e.ltPropDropdown&&(this.dropdownConstruct(),"time"==t&&(e.ltPropDefaultTime=e.ltPropDefaultTime||e.ltPropValue))),"date"!=t&&"datetime"!=t||("date"==t&&(e.ltPropCurrentDate=e.ltPropCurrentDate||e.ltPropValue),e.ltPropAria&&(this.setData("randomId","lyteInput_"+parseInt(1e6*Math.random())),Lyte.objectUtils(e.ltPropCalendarProperties,"add","disableNavigation",!1)),this.dateRegexFind()),this.$node.classList.add("lyteInput"),this.$node.classList.add("horizontal"),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},englishDate:function(){if($L.moment&&this.data){var e=this.data.ltPropFormat,t=this.data.ltPropCurrentDate,a="";t&&(a=$L.moment(t,e,{i18n:!0}).format(e)),this.setData("ltPropConvertedDate",a)}},englishTime:function(){if($L.moment&&this.data){var e=this.data.ltPropDefaultTime;12==this.data.ltPropTimeFormat&&(e=$L.moment(e,"hh:mm A",{i18n:!0}).format("hh:mm A")),this.setData("ltPropConvertedTime",e)}},didConnect:function(){var e=this.data.ltPropType;if("date"!=e&&"datetime"!=e||(window._lyteUiUtils.input=window._lyteUiUtils.input||{},this.$node._random="LyteInput"+Date.now(),window._lyteUiUtils.input[this.$node._random]=this.$node,this.englishDate()),"time"==e||"datetime"==e){if(this.getData("ltPropDropdown")){var t=this.dropdown=this.$node.querySelector("lyte-dropdown");this.dropbox=t.component.childComp?t.component.childComp:t.querySelector("lyte-drop-box"),t.element=this.$node.querySelectorAll("input")["datetime"==e?1:0],this.data.ltPropDropdownShow&&t.resetPosition()}this.englishTime()}if("time"==e||"date"==e||"datetime"==e){if(this.getData("ltPropWheel")){var a=this.handleWheel.bind(this);this.setData("eventListeners.timeWheel",a),this.$node.addEventListener("wheel",a)}this._manualset=!0,"time"==e?this.setData("ltPropValue",this.data.ltPropDefaultTime):"date"==e&&this.setData("ltPropValue",this.data.ltPropCurrentDate),delete this._manualset}e="textarea"==e?"textarea":"input",["focus","blur","click","select"].forEach(function(t){this.$node[t]=function(a){this.$node.querySelector(e)[t](a)}.bind(this)}.bind(this)),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL(),this._dir&&$L.fastdom.mutate(function(){this.$node.classList.add("lyteRTL"),this.$node.calendarDiv&&this.$node.calendarDiv.classList.add("lyteRTL")}.bind(this))}.bind(this))},didDestroy:function(){this.$node.calendarComp&&(this.$node.calendarComp.remove(),delete this.$node.calendarComp,delete this.$node.calendarDiv,delete this._assCalendar,delete this.$node.revertToSelected);var e=this.getData("eventListeners"),t=this.getData("ltPropType");"date"!=t&&"datetime"!=t||delete window._lyteUiUtils.input[this.$node._random],"time"!=t&&"datetime"!=t||(delete this.dropdown,delete this.dropbox),e.hasOwnProperty("mouseup")&&document.removeEventListener("mouseup",e.mouseup)},rtlfunc:function(e,t,a){if(this._dir){if(t)return"left"==e?a-t.right:"clientX"==e?a-t.clientX:"offsetLeft"==e?a-t.width-t.offsetLeft:a-t.left;if("left"==e)return"right"}return t?t[e]:"left"},calenderClickHide:function(e){if(this.data.ltPropBindToBody){var t=this.$node.calendarDiv,a=e.target.correspondingElement||e.target;if(!t.classList.contains("lyteCalendarHidden")){if(a&&-1!=["LYTE-DROP-BOX","LYTE-DROP-ITEM","LYTE-DROP-BODY"].indexOf(a.tagName)){for(;"LYTE-DROP-BOX"!=a.tagName&&"BODY"!=a.tagName;)a=a.parentNode;"LYTE-DROP-BOX"==a.tagName&&(a=a.origindd)}var o=this.data.ltPropAria?$L(a).hasClass("lyteInputCalendarIcon"):this.$node.contains(a),i=t.contains(a);o||i?a&&t.contains(a)&&(this._byManual=!0,this.$node.focus(),delete this._byManual):this._hideCalendar()}}},scrollFunc:function(e){if(!e||"resize"!=e.type||!_lyteUiUtils.isMobile){var t=this.$node.calendarDiv;$L.fastdom.mutate(function(){e&&"orientationchange"==e.type?setTimeout(this.setCss.bind(this),500):this.setCss(),$L.fastdom.measure(function(){var a=this.data.ltPropBoundary,o=this.$node.getBoundingClientRect(),i=window.innerWidth;t&&e&&"scroll"==e.type&&!t.classList.contains("lyteCalendarHidden")?(a.hasOwnProperty("left")&&this.rtlfunc.call(this,"left",o,i)<a.left||a.hasOwnProperty("right")&&this.rtlfunc.call(this,"right",o,i)>a.right||a.hasOwnProperty("top")&&o.top<a.top||a.hasOwnProperty("bottom")&&o.bottom>a.bottom)&&this._hideCalendar(!0):this._closedbyscrl&&(null==a.left||this.rtlfunc.call(this,"left",o,i)>=a.left)&&(null==a.right||this.rtlfunc.call(this,"right",o,i)<=a.right)&&(null==a.top||o.top>=a.top)&&(null==a.bottom||o.bottom<=a.bottom)&&(this._byManual=!0,this.$node.focus(),delete this._byManual,this.showCalendar({},this.$node.querySelector("input")),delete this._closedbyscrl)}.bind(this))}.bind(this))}},textareaFuncObs:function(){var e=this.data;if("textarea"==e.ltPropType){var t=e.ltPropTextAreaResize,a=t.horizontal,o=t.vertical,i=a||o,r="lyteTextareaResize";this.setData("resize",i),i||$L(this.$node).addClass("lyteTextareaNoResize"),a&&!o?r+=" lyteTextareaResizeHorizontal":o&&!a&&(r+=" lyteTextareaResizeVertical"),this.setData("resizeClass",r)}}.observes("ltPropTextAreaResize","ltPropTextAreaResize.{}").on("didConnect"),btobody:function(e){e.newValue||delete this.$node.revertToToday}.observes("ltPropBindToBody"),disAbs:function(){this.$node.classList[this.data.ltPropDisabled?"add":"remove"]("lyteInputDisabled")}.observes("ltPropDisabled").on("didConnect"),readAbs:function(){this.$node.classList[this.data.ltPropReadonly?"add":"remove"]("lyteInputReadonly")}.observes("ltPropReadonly").on("didConnect"),rsizefun:function(e){var t=e.touches,a=e,o="onResizeStart",i=this.data,r=this.$node;if(!(t&&t.length>1||(t&&(a=t[0]),this.getMethods(o)&&0==this.executeMethod(o,e,r)))){var n=r.getElementsByTagName("textarea")[0],s=i.ltPropTextAreaResize||{},l=document,d="addEventListener",p=r.getElementsByTagName("label")[0],c="getBoundingClientRect",h=p?p[c]():{},u=n[c](),f=r[c](),y=window.getComputedStyle(n),m=(parseFloat(y.paddingLeft),function(e,t){var a=y[e];return/%$/.test(a)?f[t]*parseFloat(a)/100:parseFloat(a)}),g={},v={},b={},P={};return s.horizontal&&(this.__minwidth=m("minWidth","width"),this.__maxwidth=m("maxWidth","width"),g.width=f.width,v.width=u.width,b.width=b.minWidth=h.width,P.width=P.minWidth="auto"),s.vertical&&(this.__minheight=m("minHeight","height"),this.__maxheight=m("maxHeight","height"),g.height=f.height,v.height=u.height,b.height=h.height,P.height="auto"),this.__clientX=a.clientX,this.__clientY=a.clientY,l[d](t?"touchmove":"mousemove",this.__rmove=this.textareaResize.bind(this),!0),l[d](t?"touchend":"mouseup",this.__rend=this.mouseup.bind(this),!0),$L(r).addClass("resizeStart").css(g),$L(n).css(v).parent().css(P),$L(p).css(b),e.preventDefault(),!1}},mouseup:function(e){var t=document,a="touchend"==event.type,o="onResizeEnd",i=this,r=i.$node;$L(r).removeClass("resizeStart"),t.removeEventListener(a?"touchmove":"mousemove",i.__rmove,!0),t.removeEventListener(a?"touchend":"mouseup",i.__rend,!0),i.getMethods(o)&&i.executeMethod(o,e,i._resize_move,r),["__minwidth","__minheight","__maxheight","__maxwidth","__clientY","__clientX","_resize_move","__remove","__rend"].forEach((function(e){delete i[e]}))},textareaResize:function(e){var t=this.data,a=e.touches,o=e;if(!(a&&a.length>1)){a&&(o=a[0],e.preventDefault()),this._resize_move=!0;var i=-(this.__clientX-(this.__clientX=o.clientX))*(this._dir?-1:1),r=-(this.__clientY-(this.__clientY=o.clientY)),n={},s={},l={},d=t.ltPropTextAreaResize||{},p=this.$node.getElementsByTagName("textarea")[0],c=this.$node,h=function(e,t,a,o){var i=parseFloat(p.style[e]),r=i+o;isNaN(t)||t>r&&(r=i+(o=t-i)),isNaN(a)||a<r&&(o=a-i),n[e]=i+o,s[e]=parseFloat(c.style[e])+o};d.horizontal&&(h("width",this.__minwidth,this.__maxwidth,i),l.ltPropWidth=s.width+"px"),d.vertical&&(h("height",this.__minheight,this.__maxheight,r),l.ltPropHeight=n.height+"px"),$L(c).css(s),$L(p).css(n),this._prevent=!0,this.setData(l),delete this._prevent}},heightFuncObs:function(e){this.heightFunc()}.observes("ltPropHeight").on("didConnect"),heightFunc:function(){this._prevent||$L("input,textarea",this.$node).eq(0).css("height",this.getData("ltPropHeight"))},widthfunObs:function(){this.widthfun()}.observes("ltPropWidth").on("didConnect"),widthfun:function(){this._prevent||(this.$node.style.width=this.getData("ltPropWidth"))},appearanceFunObs:function(){this.appearanceFun()}.observes("ltPropAppearance").on("didConnect"),appearanceFun:function(){var e=this.data.ltPropType,t=$L(this.$node);"box"==this.getData("ltPropAppearance")?("search"==e&&t.find(".lyteField").addClass("lyteInputBoxSearch"),t.addClass("lyteInputBox").removeClass("lyteInput")):("search"==e&&t.find(".lyteField").removeClass("lyteInputBoxSearch"),t.addClass("lyteInput").removeClass("lyteInputBox"))},directionfunObs:function(){this.directionfun()}.observes("ltPropDirection").on("didConnect"),directionfun:function(){var e=$L(this.$node);"vertical"==this.data.ltPropDirection?e.addClass("vertical").removeClass("horizontal"):e.removeClass("vertical").addClass("horizontal")},data:function(){var e,t=_lyteUiUtils.getDefault("lyte-input");return{ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropAutocomplete:Lyte.attr("string",{default:t.autocomplete||"off"}),ltPropMaxlength:Lyte.attr("number",{default:t.maxlength}),ltPropName:Lyte.attr("string",{default:""}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropValue:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:t.width||""}),ltPropTabIndex:Lyte.attr("string",{default:t.tabIndex||"0"}),ltPropType:Lyte.attr("string",{default:""}),ltPropAppearance:Lyte.attr("string",{default:t.appearance||""}),ltPropDirection:Lyte.attr("string",{default:t.direction||"vertical"}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:t.class||""}),ltPropStyle:Lyte.attr("string",{default:t.style||""}),ltPropWrapperStyle:Lyte.attr("string",{default:t.wrapperStyle||""}),ltPropHeight:Lyte.attr("string",{default:t.height||""}),ltPropPattern:Lyte.attr("string",{default:t.pattern||".+"}),ltPropInputTitle:Lyte.attr("string",{default:""}),ltPropRows:Lyte.attr("number",{default:void 0}),ltPropCols:Lyte.attr("number",{default:void 0}),ltPropTextAreaResize:Lyte.attr("object",{default:t.textAreaResize||{vertical:!0,horizontal:!0}}),ltPropMax:Lyte.attr("number",{default:void 0}),ltPropMin:Lyte.attr("number",{default:void 0}),ltPropStep:Lyte.attr("number",{default:t.step||1}),ltPropTimeFormat:Lyte.attr("number",{default:t.timeFormat||12}),ltPropHourInterval:Lyte.attr("number",{default:t.hourInterval||1}),ltPropDefaultTime:Lyte.attr("string",{default:""}),ltPropMinuteInterval:Lyte.attr("number",{default:t.minuteInterval||30}),ltPropDropdown:Lyte.attr("boolean",{default:t.dropdown||!1}),ltPropShowInterval:Lyte.attr("boolean",{default:t.showInterval||!1}),ltPropStartTime:Lyte.attr("string",{default:t.startTime||""}),ltPropEndTime:Lyte.attr("string",{default:t.endTime||""}),ltPropConvertToNearest:Lyte.attr("boolean",{default:t.convertToNearest||!1}),ltPropValidateOnBlur:Lyte.attr("boolean",{default:t.validateOnBlur||!1}),ltPropFillRows:Lyte.attr("boolean",{default:null==(e=t.fillRows)||t}),ltPropNumberOfRows:Lyte.attr("number",{default:t.numberOfRows||6}),ltPropMinDate:Lyte.attr("string",{default:""}),ltPropMaxDate:Lyte.attr("string",{default:""}),ltPropStartWeekDay:Lyte.attr("number",{default:t.startWeekDay||1}),ltPropMonthHeaderFormat:Lyte.attr("string",{default:t.monthHeaderFormat||"MMMM YYYY"}),daysOfWeek:Lyte.attr("array",{default:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}),ltPropYear:Lyte.attr("boolean",{default:null==(e=t.year)||e}),ltPropFormat:Lyte.attr("string",{default:t.format||"MM/DD/YYYY"}),viewDate:Lyte.attr("object",{default:{}}),ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropBindToBody:Lyte.attr("boolean",{default:null==(e=t.bindToBody)||e}),ltPropCalendarClass:Lyte.attr("string",{default:t.calendarClass||""}),ltPropHeaderType:Lyte.attr("string",{default:t.headerType||"default"}),ltPropDropdownDisabled:Lyte.attr("boolean",{default:!1}),ltPropDropdownShow:Lyte.attr("boolean",{default:!1}),ltPropDropdownCallout:Lyte.attr("boolean",{default:!1}),ltPropDropdownFreeze:Lyte.attr("boolean",{default:null!=(e=t.dropdownFreeze)&&e}),ltPropDropdownId:Lyte.attr("string",{default:""}),ltPropDropdownClass:Lyte.attr("string",{default:t.dropdownClass||""}),ltPropPosition:Lyte.attr("string",{default:t.position||"down"}),ltPropBoundary:Lyte.attr("object",{default:t.boundary||{}}),ltPropWheel:Lyte.attr("boolean",{default:t.wheel||!1}),ltPropYield:Lyte.attr("boolean",{default:t.yield||!1}),ltPropAnimate:Lyte.attr("boolean",{default:t.animate||!1}),ltPropPreventSelection:Lyte.attr("boolean",{default:t.preventSelection||!1}),ltPropPreventKeys:Lyte.attr("boolean",{default:t.preventKeys||!1}),ltPropUpdateDelay:Lyte.attr("number",{default:t.hasOwnProperty("updateDelay")?t.updateDelay:250}),ltPropAutoUpdate:Lyte.attr("boolean",{default:null==(e=t.autoUpdate)||e}),ltPropCallbackDelay:Lyte.attr("number",{default:t.hasOwnProperty("callbackDelay")?t.callbackDelay:0}),ltPropCloseIcon:Lyte.attr("boolean",{default:t.closeIcon||!1}),ltPropTimePlaceholder:Lyte.attr("string",{default:""}),ltPropCommonPlaceholder:Lyte.attr("string",{default:""}),ltPropTimeClass:Lyte.attr("string",{default:t.timeClass||""}),ltPropAria:Lyte.attr("boolean",{default:t.aria||!1}),ltPropAriaAttributes:Lyte.attr("object",{default:t.ariaAttributes||{},watch:!0}),ltPropTimeAriaAttributes:Lyte.attr("object",{default:t.timeAriaAttributes||{},watch:!0}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropCalendarProperties:Lyte.attr("object",{default:t.calendarProperties||{disableNavigation:!0}}),ltPropDropdownProperties:Lyte.attr("object",{default:t.dropdownProperties||{}}),ltPropScope:Lyte.attr("string",{default:t.scope||""}),ltPropHeaderYield:Lyte.attr("boolean",{default:t.headerYield||!1}),ltPropConvertedDate:Lyte.attr("string",{default:""}),ltPropConvertedTime:Lyte.attr("string",{default:""}),ltPropPreventDropdownNavigation:Lyte.attr("string",{default:t.preventDropdownNavigation||!1}),ltPropInputWrapperClass:Lyte.attr("string",{default:t.inputWrapperClass||""}),ltPropWrapperClass:Lyte.attr("string",{default:t.wrapperClass||""}),ltPropTimezoneHandling:Lyte.attr("boolean",{default:t.timezoneHandling||!1}),ltPropFocusAtEnd:Lyte.attr("boolean",{default:!1}),ltPropPasswordIcon:Lyte.attr("boolean",{default:!1}),ltPropPasswordVisibility:Lyte.attr("boolean",{default:!1}),ltPropPasswordTooltip:Lyte.attr("object",{default:{show:"Show password",hide:"Hide password"}}),ltPropTooltipConfig:Lyte.attr("string",{default:'{"position" : "bottom"}'}),ltPropAriaLabel:Lyte.attr("object",{default:{modal:"Choose date",button:"Change date"}}),ltPropDataTabindex:Lyte.attr("string",{default:"0"}),eventListeners:Lyte.attr("object",{default:{}}),selectedField:Lyte.attr("object",{default:{}}),endMinute:Lyte.attr("number",{default:""}),startMinute:Lyte.attr("number",{default:""}),dropdownData:Lyte.attr("array",{default:[]}),originalData:Lyte.attr("array",{default:[]}),dateRange:Lyte.attr("object",{default:{day:[],month:[],year:[]}}),meridian:Lyte.attr("object",{default:{AM:window._lyteUiUtils?_lyteUiUtils.i18n("AM"):"AM",PM:window._lyteUiUtils?_lyteUiUtils.i18n("PM"):"PM"}}),hour:Lyte.attr("string",{default:_lyteUiUtils.i18n("hour")}),min:Lyte.attr("string",{default:_lyteUiUtils.i18n("min")}),selectedDateField:Lyte.attr("string",{default:""}),preventObs:Lyte.attr("boolean",{default:!0}),resize:Lyte.attr("boolean",{default:!0}),resizeClass:Lyte.attr("string",{default:"lyteTextareaResize"}),pos:Lyte.attr("string",{default:""}),isSearch:Lyte.attr("boolean",{default:!1}),isBox:Lyte.attr("string",{default:""}),dateOrder:Lyte.attr("array",{default:[]}),showPlaceholder:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),randomId:Lyte.attr("string",{default:""}),navigation:Lyte.attr("boolean",{default:!1}),passwordClass:Lyte.attr("string",{default:"lyteInputShowPasswordIcon"}),passwordTooltip:Lyte.attr("string",{default:""}),isExpanded:Lyte.attr("string",{default:"false"})}},input_wrap_obs:function(e){var t=(e||{oldValue:""}).oldValue,a=this.data.ltPropInputWrapperClass,o=$L(this.$node);o.removeClass(t).addClass(a),!e&&this.data.ltPropAria&&/date/i.test(this.data.ltPropType)&&o.addClass("lyteInputWithCalendarIcon")}.observes("ltPropInputWrapperClass").on("didConnect"),focusObs:function(){var e=this.data,t=this.$node;if(e.ltPropFocus&&(t.focus(),e.ltPropFocusAtEnd)){var a=t.getElementsByTagName("textarea"==e.ltPropType?"textarea":"input")[0];a&&(a.selectionStart=a.value.length)}t.ltProp("focus",!1)}.observes("ltPropFocus").on("didConnect"),boxObs:function(){var e=this.data.ltPropType,t=this.data.ltPropAppearance;"search"==e&&"box"==t?this.setData("isBox","lyteInputBoxSearch"):this.setData("isBox","")}.observes("ltPropType","ltPropAppearance").on("init"),getDateFromFormat:function(e,t){return this.data.ltPropCalendarProperties.i18n?(t=this._assCalendar.component.getRelevantFormat(t),$L.moment(e).i18N(t)):this._assCalendar.component.getDateFromFormat(e,t)},dateValidation:function(e){if(!this._assCalendar)return!1;var t=this._assCalendar.component.stringToDate(e,this.data.ltPropFormat);return"Invalid Date"!=t&&t},dateRegexFind:function(e){var t,a=this.getData("dateRange"),o=[];t=e?e.newValue:this.getData("ltPropFormat");var i=/D+/gi.exec(t),r=/M+/gi.exec(t),n=/Y+/gi.exec(t);i&&(a.day[0]=i.index,a.day[1]=i.index+i[0].length,o.push({value:a.day[0],name:"day",format:t.match(/D+/gi)[0]})),r&&(a.month[0]=r.index,a.month[1]=r.index+r[0].length,o.push({value:a.month[0],name:"month",format:t.match(/M+/gi)[0]})),n&&(a.year[0]=n.index,a.year[1]=n.index+n[0].length,o.push({value:a.year[0],name:"year",format:t.match(/Y+/gi)[0]})),o.sort((function(e,t){return e.value-t.value})),this.setData("dateOrder",o)},dateRegexObs:function(e){this.dateRegexFind(e)}.observes("ltPropFormat"),constructingArr:function(e,t,a){e<t&&(e+=1440);var o=(e-t)/60,i={};return i.time=this.convertToRailway(e,!0,a).trim(),i.interval=o<1?e-t+" "+this.getData("min"):(o%1==0?o:o.toFixed(1))+" "+this.getData("hour"),i},dropdownConstruct:function(){if(!this._prevent){var e,t=this.getData("startMinute"),a=[],o=this.getData("endMinute"),i=(this.getData("ltPropHourInterval"),this.getData("ltPropMinuteInterval")),r=this.getData("ltPropTimeFormat"),n=[];for(t>=o&&(o+=1440),e=t;e<=o;e+=i){var s=this.constructingArr(e,t,r);-1==n.indexOf(s.time)&&(a.push(s),n.push(s.time))}this.data.ltPropTimezoneHandling&&this.check_dst(a),this.setData("originalData",a),this.data.ltPropDropdownShow&&this.setData("dropdownData",a)}},constructNewDrop:function(e,t){var a=[],o=this.getData("startMinute");if(12==t){var i=this.convertToRailway(e.value.trim());0!=this.maxValCheck(i)&&a.push(this.constructingArr(i,o,12)),i+=720,0!=this.maxValCheck(i%1440)&&a.push(this.constructingArr(i,o,12))}else i=this.convertToRailway(e.value.trim()),0!=this.maxValCheck(i)&&a.push(this.constructingArr(i,o,24));this.dropdown.ltProp("selected",""),0==a.length&&this.data.ltPropValidateOnBlur&&(this.data.ltPropStartTime&&a.push({time:this.data.ltPropStartTime,interval:""}),this.data.ltPropEndTime&&a.push({time:this.data.ltPropEndTime,interval:""})),this.setData("dropdownData",a),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime)},getCorrectTime:function(e){if($L.moment){var t=$L.moment();return 12==e?t.i18N("hh:mm A"):t.format("HH:mm")}var a=new Date,o=a.getHours(),i=a.getMinutes().toString(),r=this.getData("meridian"),n=o>11?r.PM:r.AM;return 1==i.length&&(i="0"+i),12==e?(12!=o&&1==(o=(o%12).toString()).length&&(o="0"+o),o+":"+i+" "+n):(o<10&&(o="0"+o),o+":"+i)},timeFormatChange:function(){this.timeInValChange()}.observes("ltPropTimeFormat"),handleWheel:function(e){var t=e.target,a=this.getData("ltPropType");if(!("INPUT"!=t.tagName||Math.abs(e.deltaY)<=Math.abs(e.deltaX))){if("time"==a||"datetime"==a&&"time"==t.id){if(this._emptytimeValue)return;$L.fastdom.mutate(function(){var a=this.getData("selectedField");(!a.prop||t.selectionStart>3)&&(t.selectionStart=0,t.selectionEnd=2,this.setData("selectedField",{prop:"hour",val:0}),a={prop:"hour",val:0}),e.deltaY<-10?this.timeDecrease.call(this,t,{},a.prop,t.selectionStart,t.selectionEnd):e.deltaY>10&&this.timeIncrease.call(this,t,{},a.prop,t.selectionStart,t.selectionEnd)}.bind(this))}else("date"==a||"datetime"==a&&"date"==t.id)&&(e.deltaY<-10?(e.keyCode=40,this.calendarKeydown.call(this,e,t)):e.deltaY>10&&(e.keyCode=38,this.calendarKeydown.call(this,e,t)));e.preventDefault()}},wheelObs:function(e){e.newValue?this.$node.addEventListener("wheel",this.getData("eventListeners.timeWheel")):this.$node.removeEventListener("wheel",this.getData("eventListeners.timeWheel"))}.observes("ltPropWheel"),convertToRailway:function(e,t,a){var o=this.getData("meridian");if(t)return r=parseInt(e/60)%24,(n=e%60)<10&&(n="0"+n),i="",12==a&&(1==parseInt(r/12)?(r>12&&(r%=12),i=o.PM):(i=o.AM,r=r||12)),r<10&&(r="0"+r),r+":"+n+" "+i;var i,r=parseInt(e.slice(0,2)),n=parseInt(e.slice(3,5));return 5!=e.length?60*((i=e.slice(6,e.length))==o.PM?r%12+12:r%12)+n:60*r+n},maxValCheck:function(e){var t,a=this.getData("endMinute"),o=this.getData("startMinute");if(t="string"==typeof e?this.convertToRailway(e):e,o<a){if(t<=a&&t>=o)return!0}else if(t<1440&&t>=o||t>=0&&t<=a)return!0;return!1},timeInValChange:function(e){var t,a=this.getData("ltPropTimeFormat"),o=this.data.ltPropValue,i=this.data.ltPropType;if(e)t=e.newValue;else if(t=this.getData("ltPropDefaultTime"),(null==o||"datetime"==i)&&!t&&$L.moment&&("time"==i?this.data.ltPropPlaceholder:this.data.ltPropTimePlaceholder||this.data.ltPropCommonPlaceholder))return this._emptytimeValue=!0,void("datetime"==i&&this.checkCommonPlaceHolder());t||(t=this.getData("ltPropStartTime")||this.getCorrectTime(a));this.setData("ltPropDefaultTime",t.slice(0,12!=a?5:t.length))},checkCommonPlaceHolder:function(){(this.data||{}).ltPropCommonPlaceholder&&this.setData("showPlaceholder",!(this.data.ltPropCurrentDate||this.data.ltPropDefaultTime))},startEndTimeObs:function(e){if(!e||"ltPropStartTime"==e.item){var t=this._emptytimeValue?this.getCorrectTime(this.data.ltPropTimeFormat):this.getData("ltPropDefaultTime"),a=this.getData("ltPropStartTime");a||(this.setData("ltPropStartTime",t),a=t),this.setData("startMinute",this.convertToRailway(a))}if(!e||"ltPropEndTime"==e.item){var o=this.getData("ltPropEndTime");if(!o){var i=Math.max(0,parseInt(a.slice(3,5))-1).toString();1==i.length&&(i="0"+i),o=(a.slice(0,3)+i+" "+a.slice(6,a.length)).trim(),this.setData("ltPropEndTime",o)}this.setData("endMinute",this.convertToRailway(o))}this.data.ltPropDropdown&&this.dropdownConstruct()},timeBoundObs:function(e){if(!e||""!=e.newValue||null!=e.oldValue)if(!e||e&&"ltPropDefaultTime"!=e.item)this.startEndTimeObs(e);else{if(e&&!e.newValue)return void this.timeInValChange();this.setData("preventObs")&&this.setData("ltPropValue",e.newValue),this.englishTime(),this.getMethods("onTimeChange")&&this.executeMethod("onTimeChange",e,this.$node),this._manualset=!0,"time"==this.data.ltPropType?this.setData("ltPropValue",e.newValue):this.checkCommonPlaceHolder(),delete this._manualset}}.observes("ltPropStartTime","ltPropEndTime","ltPropDefaultTime"),dateChangeCallback:function(e){var t=this.data.ltPropType;if(this.data.ltPropTimezoneHandling){this.check_dst(this.data.originalData);var a=this.data.ltPropDefaultTime;if(a&&this.setData("ltPropDefaultTime",this.check_dst(a,1,1)),"time"==t)return}var o=this.data.ltPropCallbackDelay;this._manualset=!0,t&&this.setData("ltPropValue",e.newValue),delete this._manualset,null==o?this.dateCallback(e):(clearTimeout(this.__datachange),this.__datachange=setTimeout(this.dateCallback.bind(this),o,e)),this.checkCommonPlaceHolder()}.observes("ltPropCurrentDate"),dateCallback:function(e){""==e.newValue&&null==e.oldValue||(this.englishDate(),this.getMethods("onDateChange")&&this.executeMethod("onDateChange",e,this.$node,this._selected),this.checkCommonPlaceHolder(),delete this._selected)},timeCallback:function(e){""==e.newValue&&null==e.oldValue||this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)},valChangeObs:function(e){var t=this.data.ltPropCallbackDelay;if(!this._manualset){var a=this.data.ltPropType;"date"==a?this.setData("ltPropCurrentDate",e.newValue):"time"==a&&this.setData("ltPropDefaultTime",e.newValue)}null==t?this.timeCallback(e):(clearTimeout(this.__valuechange),this.__valuechange=setTimeout(this.timeCallback.bind(this),t,e))}.observes("ltPropValue"),firePosCallBack:function(){var e=this.$node.calendarDiv,t=this.data.pos;$L(e).removeClass("lyteInputCalendarUp lyteInputCalendarDown").addClass("lyteInputCalendar"+(/up/i.test(t)?"Up":"Down")),this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",t,e)}.observes("pos"),setLeftExceedForDown:function(e,t,a,o,i,r){var n=a;return i+this.rtlfunc.call(this,"left",n,r)+n.width-o.width},setLeftNotExceedForDown:function(e,t,a,o){var i=t;return a+this.rtlfunc.call(this,"left",i,o)},setTopAboveForDown:function(e,t,a,o,i){return i+a.top-o.height},setTopBelowForDown:function(e,t,a){var o=t;return a+o.top+o.height},setLeftForRight:function(e,t,a,o){var i=t;return a+this.rtlfunc.call(this,"left",i,o)+i.width},setRightForRight:function(e,t,a,o,i,r){var n=a,s=o;return i+this.rtlfunc.call(this,"left",n,r)-s.width},setTopForRight:function(e,t,a){return a+t.top},setTopForRightAbove:function(e,t,a,o,i){var r=a;return i+r.top+r.height-o.height},setCss:function(){var e=this.$node.calendarDiv;if(e&&!e.classList.contains("lyteCalendarHidden")){var t,a,o,i,r,n=e,s=this.$node.querySelector("input").parentElement,l=0,d=0,p=window.innerWidth,c=window.innerHeight,h=p,u=n.getBoundingClientRect(),f=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),y=window.pageYOffset||document.documentElement.scrollTop,m=n.offsetHeight,g=n.offsetWidth,v=this.getData("ltPropPosition"),b=s.getBoundingClientRect(),P=this.data.ltPropScope,D=P?$L(this.$node).closest(P).get(0):void 0,_=D?D.getBoundingClientRect():void 0;_&&(l=Math.max(l,_.left),d=Math.max(d,_.top),p=Math.min(p,_.right),c=Math.min(c,_.bottom));var L,C,w=this.rtlfunc.call(this,"left",b,h),T=this.rtlfunc.call(this,"left");"down"===v?(t=!0,(L=b.top+b.height)+m>c&&(t=c-b.top>b.bottom-d),a=!0,(C=w)+g>p&&C>C+b.width-n.offsetWidth&&(a=!1),t?(this.setData("pos","down"),n.style.top=this.setTopBelowForDown(s,b,y)+"px"):(this.setData("pos","up"),n.style.top=this.setTopAboveForDown(s,n,b,u,y,h)+"px"),a?(n.style.top=n.style.top,n.style[T]=this.setLeftNotExceedForDown(s,b,f,h)+"px"):(n.style.top=n.style.top,n.style[T]=this.setLeftExceedForDown(s,n,b,u,f,h)+"px")):"right"===v?(a=!0,w+b.width+g>p&&w-u.width>l&&(a=!1),t=!0,b.top+u.height>c&&(t=c-b.top>b.bottom-d),a?(this.setData("pos","right"),n.style[T]=this.setLeftForRight(s,b,f,h)+"px"):(this.setData("pos","left"),n.style[T]=this.setRightForRight(s,n,b,u,f,h)+"px"),t?(n.style[T]=n.style[T],n.style.top=this.setTopForRight(s,b,y)+"px"):(n.style[T]=n.style[T],n.style.top=this.setTopForRightAbove(s,n,b,u,y)+"px")):"up"===v?(o=!0,b.top-u.height<d&&(o=c-b.top<b.bottom-d),a=!0,w+g>p&&w>w+b.width-n.offsetWidth&&(a=!1),o?(this.setData("pos","up"),n.style.top=this.setTopAboveForDown(s,n,b,u,y)+"px"):(this.setData("pos","down"),n.style.top=this.setTopBelowForDown(s,b,y)+"px"),a?(n.style.top=n.style.top,n.style[T]=this.setLeftNotExceedForDown(s,b,f,h)+"px"):(n.style.top=n.style.top,n.style[T]=this.setLeftExceedForDown(s,n,b,u,f,h)+"px")):"left"===v?(i=!0,w-u.width<l&&w+u.width<p&&(i=!1),t=!0,b.top+u.height>c&&(t=c-b.top>b.bottom-d),i?(this.setData("pos","left"),n.style[T]=this.setRightForRight(s,n,b,u,f,h)+"px"):(this.setData("pos","right"),n.style[T]=this.setLeftForRight(s,b,f,h)+"px"),t?(n.style[T]=n.style[T],n.style.top=this.setTopForRight(s,b,y)+"px"):(n.style[T]=n.style[T],n.style.top=this.setTopForRightAbove(s,n,b,u,y)+"px")):"downLeft"===v?(t=!0,(L=b.top+b.height)+m>c&&(t=c-b.top>b.bottom-d),t||(L=b.top-m),a=!1,(C=w+b.width/2-g)<l&&(C=l,a=!0),n.style.top=L+y+"px",n.style[T]=C+f+"px",r=t?"downLeft":"upLeft",this.setData("pos",r)):"downRight"===v?(t=!0,(L=b.top+b.height)+m>c&&(t=c-b.top>b.bottom-d),t||(L=b.top-m),a=!0,(C=w+b.width/2)+g>p&&(C=p-g,a=!1),n.style.top=L+y+"px",n.style[T]=C+f+"px",r=t?"downRight":"upRight",this.setData("pos",r)):"upLeft"===v?(t=!1,(L=b.top-m)<d&&(t=c-b.top>b.bottom-d),t&&(L=b.top+b.height),a=!1,(C=b[T]+b.width/2-g)<l&&(C=l,a=!0),n.style.top=L+y+"px",n.style[T]=C+f+"px",r=t?"downLeft":"upLeft",this.setData("pos",r)):"upRight"===v&&(t=!1,(L=b.top-m)<d&&(t=c-b.top>b.bottom-d),t&&(L=b.top+b.height),a=!0,(C=w+b.width/2)+g>p&&(C=p-g,a=!1),n.style.top=L+y+"px",n.style[T]=C+f+"px",r=t?"downRight":"upRight",this.setData("pos",r))}},preventFn:function(){this.preventFocus=!0},methods:{wormholeAppend:function(e,t){var a=this.$node;a.calendarComp=e,e.nodeN=a,a.calendarDiv=e.querySelector("div#lyteCalendar"),this._assCalendar=a.calendarDiv.querySelector("lyte-calendar"),a.revertToToday=this._assCalendar.revertToToday,a.revertToSelected=this._assCalendar.revertToSelected;for(var o=this._assCalendar.querySelectorAll("lyte-dropdown"),i=0;i<o.length;i++)(o[i].component.childComp||o[i].querySelector("lyte-drop-box")).addEventListener("mousedown",this.preventFn.bind(this));if(this.data.ltPropAria)try{$L(a.calendarDiv).trapFocus()}catch(e){}},"on-dateselected":function(){this._selected=!0,this._hideCalendar()},hide:function(){$L(this.$node).removeClass("lyteInputDropdownOpen"),this.getMethods("onHide")&&this.executeMethod("onHide",arguments[0],arguments[1],this.$node)},beforeHide:function(){if(this.getMethods("onBeforeHide"))return this.executeMethod("onBeforeHide",arguments[0],arguments[1],this.$node)},show:function(){$L(this.$node).addClass("lyteInputDropdownOpen"),this.getMethods("onShow")&&this.executeMethod("onShow",arguments[0],arguments[1],this.$node)},beforeShow:function(){if(this.getMethods("onBeforeShow"))return this.executeMethod("onBeforeShow",arguments[0],arguments[1],this.$node)},optionSelected:function(){this._calmsfg=!0,delete this._emptytimeValue,this.setData("ltPropDefaultTime",arguments[1].trim()),$L("input",this.$node).get(-1).focus()},scroll:function(){this.getMethods("onScroll")&&this.executeMethod("onScroll",arguments[0],arguments[1])},positionChange:function(){this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",arguments[0],arguments[1])},calendarNavigate:function(e,t,a,o){$L.fastdom.measure(this.setCss.bind(this)),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",e,t,a,o)},viewDateChange:function(e,t){this.getMethods("onViewdateChange")&&this.executeMethod("onViewdateChange",e,t,this.$node)},viewChange:function(e,t,a){$L.fastdom.measure(this.setCss.bind(this)),this.getMethods("onViewChange")&&this.executeMethod("onViewChange",e,t,a,this.$node)}},valUpdate:function(){if(this.$node&&this){delete this._timeout;var e=this.data.ltPropType;if("date"==e||"datetime"==e){var t=this.$node.querySelector("input").value;this.setData("ltPropCurrentDate",t||"")}else"textarea"==e?(t=this.$node.querySelector("textarea").value,this.setData("ltPropValue",t||"")):(t=this.$node.querySelector("input").value,this.setData("ltPropValue",t||""))}},fixSelection:function(e,t,a){this.data.ltPropReadonly||(a.selectionStart=t.val+e,a.selectionEnd=a.selectionStart+2,this.timeClick.call(this,{},a,t.val+e))},replaceVal:function(e,t,a,o){var i;i="string"==typeof e?e:e.value;var r=new RegExp("("+i.slice(a,a+o)+")","i");return i.trim().replace(r,t)},retVal:function(e,t,a){return parseInt(e+t)>a?"0"+t:e+t},convertToPm:function(e,t,a){if(12==e){var o=t.slice(6,t.length),i=(t.slice(0,5),t.slice(0,2)),r=t.slice(3,5);return"00"==i&&"AM"==o||"12"==i&&"PM"==o?t:i+":"+r+" "+(a.AM==o?a.PM:a.AM)}return t},hourTimeSet:function(e,t,a,o,i){var r,n=e.value.trim(),s=this.getData("meridian"),l=_lyteUiUtils.getCorrectNumberCode(t.which||t.keyCode)-48,d=n.slice(o+1,i)+l,p=this.data.ltPropTimeFormat,c=this.data.ltPropValidateOnBlur;if("hour"==a?r=12==p?12:24:(delete this._lasttyped,r=60),60==r&&parseInt(d)>=60&&(d="0"+l),"hour"==a)h=this.getCrctHour(n,o,i,r,l,s),this._lasttyped=l+"";else{var h=n.slice(0,o)+d+n.slice(i,n.length);if(!c||c&&"keydown"!=t.type){var u=this.maxValCheck(h);if(0==u&&(h=n.slice(0,o)+this.retVal(n.slice(o,o+1),l,r)+n.slice(i,n.length),0==(u=this.maxValCheck(h))&&(h=n.slice(0,o)+"0"+l+n.slice(i,n.length),0==(u=this.maxValCheck(h))&&(h=this.convertToPm(r,h,s),0==(u=this.maxValCheck(h))))))return!1}}this.data.ltPropTimezoneHandling&&(h=this.check_dst(h,1,1)),this.setData("ltPropDefaultTime",h),$L.fastdom.mutate((function(){e.selectionStart=o,e.selectionEnd=i}))},_getCrctHour:function(e,t,a){return 0==this.maxValCheck(e)?12==t&&(e=this.convertToPm(t,e,a),0!=this.maxValCheck(e)&&e):e},getCrctHour:function(e,t,a,o,i,r){var n,s,l,d,p=this.data.ltPropValidateOnBlur;if(null!=this._lasttyped){if("00"==(s=this._lasttyped+i)&&12==o&&(d=!0,s="12"),24==o&&parseInt(s)>=24||12==o&&parseInt(s)>=13)l=!1;else{if(n=s+e.slice(a),p)return n;l=this._getCrctHour(n,o,r)}if(0!=l)return l;if(n){var c=this.data.endMinute,h=this.convertToRailway(n);if(h-c<60&&h-c>=0)return this.convertToRailway(c,!0,o).trim()}}if("00"==(s=e.slice(t+1,a)+i)&&12==o){if(!d)return e;s="12"}if(24==o&&parseInt(s)>=24||12==o&&parseInt(s)>=13)l=!1;else{if(n=s+e.slice(a),p)return n;l=this._getCrctHour(n,o,r)}if(0!=l)return l;if("00"==(s=e.slice(0,t+1)+i)&&12==o){if(!d)return e;s="12"}if(24==o&&parseInt(s)>=24||12==o&&parseInt(s)>=13)l=!1;else{if(n=s+e.slice(a),p)return n;l=this._getCrctHour(n,o,r)}if(0!=l)return l;if("00"==(s="0"+i)&&12==o){if(!d)return e;s="12"}if(n=s+e.slice(a),p)return n;if(0!=(l=this._getCrctHour(n,o,r)))return l;if("00"==(s=i+"0")&&12==o){if(!d)return e;s="12"}if(24==o&&parseInt(s)>=24||12==o&&parseInt(s)>=13)l=!1;else{if(n=s+e.slice(a),p)return n;l=this._getCrctHour(n,o,r)}return 0!=l?l:this.data.ltPropConvertToNearest?this.findNearestTime(e,t,a,o,i,r):e},findNearestTime:function(e,t,a,o,i,r){var n;return null==this._lasttyped||(n=this._lasttyped+i,24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13)?(n=e.slice(t+1,a)+i,24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13?(n=e.slice(0,t+1)+i,24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13?(n="0"+i,24==o&&parseInt(n)>=24||12==o&&parseInt(n)>=13?e:this._findNearest(n+e.slice(a),o)):this._findNearest(n+e.slice(a),o)):this._findNearest(n+e.slice(a),o)):this._findNearest(n+e.slice(a),o)},_findNearest:function(e,t){var a=this.convertToRailway(e),o=this.data.endMinute,i=this.data.startMinute;return Math.abs(i-a)>Math.abs(o-a)?this.convertToRailway(o,!0,t).trim():this.convertToRailway(i,!0,t).trim()},timeIncrease:function(e,t,a,o,i,r){if(!this.data.ltPropReadonly){var n,s,l,d,p,c=e.value.trim(),h=parseInt(c.slice(o,i)),u=this.getData("ltPropTimeFormat"),f=this.getData("meridian");if("hour"==a?(n=12==u?12:24,s=r?1:this.data.ltPropHourInterval):(n=60,s=this.data.ltPropMinuteInterval),$L.moment&&$L.moment.lyteMoment.prototype.add){var y,m=12==u?"hh:mm A":"HH:mm";c=c.replace(f.AM,"AM").replace(f.PM,"PM"),(y=this.data.ltPropTimezoneHandling&&this.data.ltPropCurrentDate?this.check_dst(c,!0):$L.moment(c,m)).validate()?l=y.add(s,60==n?"minutes":"hours").format(m).replace("AM",f.AM).replace("PM",f.PM):p=!0}if(p){if(d=(h+s)%n,12==n&&d<h&&c.slice(6,c.length)==f.AM)0==d&&(d="12"),c=this.replaceVal.call(this,e,f.PM,6,c.length);else if(12==n&&d<h&&c.slice(6,c.length)==f.PM)12==h&&0!=d||(c=this.replaceVal.call(this,e,f.AM,6,c.length));else if(12==n&&d==h&&c.slice(6,c.length)==f.AM)d="12",c=this.replaceVal.call(this,e,f.PM,6,c.length);else if(60==n&&d<=h){if(0==this.timeIncrease.call(this,e,t,"hour",0,2,!0))return!1;c=e.value.trim()}1==(d=d.toString()).length&&(d="0"+d),l=c.slice(0,o)+d+c.slice(i,c.length)}if(0==this.maxValCheck(l))return!1;this.setData("ltPropDefaultTime",l),$L.fastdom.mutate((function(){e.selectionStart=o,e.selectionEnd=i}))}},timeDecrease:function(e,t,a,o,i,r){if(!this.data.ltPropReadonly){var n,s,l,d,p,c=e.value.trim(),h=parseInt(c.slice(o,i)),u=this.getData("ltPropTimeFormat"),f=this.getData("meridian");if("hour"==a?(n=12==u?12:24,s=r?1:this.getData("ltPropHourInterval")):(n=60,s=this.getData("ltPropMinuteInterval")),$L.moment&&$L.moment.lyteMoment.prototype.subtract){var y,m=12==u?"hh:mm A":"HH:mm";c=c.replace(f.AM,"AM").replace(f.PM,"PM"),(y=this.data.ltPropTimezoneHandling&&this.data.ltPropCurrentDate?this.check_dst(c,!0):$L.moment(c,m)).validate()?l=y.subtract(s,60==n?"minutes":"hours").format(m).replace("AM",f.AM).replace("PM",f.PM):p=!0}if(p){if(d=(h-s+n)%n,12==n&&d>h&&c.slice(6,c.length)==f.AM)c=this.replaceVal.call(this,e,f.PM,6,c.length);else if(12==n&&(d>h||12==h)&&c.slice(6,c.length)==f.PM)c=this.replaceVal.call(this,e,f.AM,6,c.length);else if(12==n&&0==d)c.slice(6,c.length)==f.PM&&(d="12");else if(60==n&&d>=h){if(0==this.timeDecrease.call(this,e,t,"hour",0,2,!0))return!1;c=e.value.trim()}1==(d=d.toString()).length&&(d="0"+d),l=c.slice(0,o)+d+c.slice(i,c.length)}if(0==this.maxValCheck(l))return!1;this.setData("ltPropDefaultTime",l),$L.fastdom.mutate((function(){e.selectionStart=o,e.selectionEnd=i}))}},findCalendarRange:function(e,t,a){if(t.value&&0!=this.dateValidation(t.value)){var o,i=t.selectionStart,r=(t.selectionEnd,this.getData("dateRange"));for(o in r)if(!a||o==this.data.selectedDateField){var n=this.setRangeByMoment(t,r,o);if(n[0]<=i&&n[1]>=i||a){this.data.ltPropPreventSelection?a&&(t.selectionStart=t.selectionEnd=n[1]):(t.selectionStart=n[0],t.selectionEnd=n[1]),this.setData("selectedDateField",o);break}}}},setRangeByMoment:function(e,t,a){var o,i;if($L.moment){var r=this.data.ltPropFormat,n=e.value,s=this.data.ltPropCalendarProperties.i18n,l=$L.moment(n,this._assCalendar.component.getRelevantFormat(r),{i18n:s}),d=s?"i18N":"format";if(l.validate()){for(var p=0,c=r.slice(t[a][0],t[a][1]),h=0;h<this.data.dateOrder.length;h++){var u=this.data.dateOrder[h],f=l[d](u.format);if(u.format==c)break;n=n.replace(f,""),p+=f.length}var y=l[d](c);i=(o=p+n.indexOf(y))+y.length}else o=t[a][0],i=t[a][1]}else o=t[a][0],i=t[a][1];return[o,i]},hideCalendar:function(){Array.from(document.getElementsByTagName("lyte-input")).forEach(function(e){var t=e.calendarDiv;e!=this.$node&&t&&!$L(t).hasClass("lyteCalendarHidden")&&e.component._hideCalendar()}.bind(this))},_hideCalendar:function(e,t){var a=this.$node.calendarDiv;if(!$L(a).hasClass("lyteCalendarHidden")&&(t||this._selected||this.data.ltPropCalendarProperties.disableNavigation||!a.contains(document.activeElement))){var o,i="onBeforeCalendarClose";this.getMethods(i)&&(o=this.executeMethod(i,a,this.$node,!!this._selected)),0!=o?o&&o.then?(this._calendarCloseStart=!0,Promise.resolve(o).then(this.mainHideFn.bind(this,e))):this.mainHideFn(e):this.$node.focus()}},mainHideFn:function(e){var t=this.$node,a=t.calendarDiv;if(delete this._calendarCloseStart,a.classList.add("lyteCalendarHidden"),t.classList.remove("calendarOpen"),Array.from(this._assCalendar.querySelectorAll("lyte-dropdown")).forEach((function(e){e.close()})),this.data.ltPropAria&&$L("input,textarea",t).attr("aria-expanded","false"),this.getMethods("onCalendarClose")&&this.executeMethod("onCalendarClose",a,t),"drilldown"==this.data.ltPropHeaderType&&t.revertToSelected(),e&&(t.blur(),this._closedbyscrl=!0),this.data.ltPropAria){var o=document.activeElement;(o==document.body||a.contains(o))&&$L(".lyteInputCalendarIcon",this.$node).focus(),this.setData("isExpanded","false")}},showCalendar:function(e,t){if(this._byManual)delete this._byManual;else if(this.hideCalendar(),!(this.data.ltPropReadonly&&!this.data.ltPropPreventKeys||this._calendarCloseStart)){if(this.getMethods("onBeforeOpen")&&0==this.executeMethod("onBeforeOpen",e,this.$node))return this._prevclick=!0,void setTimeout(function(){delete this._prevclick}.bind(this),100);this.data.ltPropBindToBody||this.setData("ltPropBindToBody",!0),this.$node.calendarDiv.classList.remove("lyteCalendarHidden"),$L.fastdom.measure(this.scrollFunc.bind(this)),$L.fastdom.mutate(function(){this.data.ltPropReadonly||this.findCalendarRange(e,t),this.$node.classList.add("calendarOpen"),"datetime"==this.data.ltPropType&&this.dropdown&&this.dropdown.close(),this.data.ltPropAria&&$L("input,textarea",this.$node).attr("aria-expanded","true"),this.data.ltPropAria&&window.requestAnimationFrame(function(){this.setData("navigation",!0),this.setData("isExpanded","true")}.bind(this)),this.getMethods("onCalendarOpen")&&this.executeMethod("onCalendarOpen",this.$node.calendarDiv,this.$node)}.bind(this))}},timeClick:function(e,t,a){if(!this.data.ltPropReadonly||this.data.ltPropPreventKeys){if(!this.data.ltPropReadonly&&!this._emptytimeValue){var o;switch(Math.min(2,parseInt((null==a?t.selectionStart:a)/3))){case 2:a=6,o=t.value.length,this.setData("selectedField",{prop:"meridian",val:6});break;case 1:a=3,o=5,this.setData("selectedField",{prop:"minute",val:3});break;default:a=0,o=2,this.setData("selectedField",{prop:"hour",val:0})}t.selectionStart=a,t.selectionEnd=o}this.dropbox&&this.dropbox.classList.contains("lyteDropdownHidden")&&"click"==e.type&&this.open_dropdown()}},open_dropdown:function(){this.dropdown.ltProp("selected",""),this.setData("dropdownData",this.getData("originalData")),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime),this.dropdown.toggle()},calendarKeydown:function(e,t){if("Escape"==e.key)return this._hideCalendar(void 0,!0);if(t.value&&!this.data.ltPropReadonly){var a=e.keyCode,o=this.dateValidation(t.value);if(0!=o){var i=this.getData("selectedDateField");if(-1!=[37,38,39,40,9].indexOf(a)){t.selectionEnd==t.selectionStart&&(this.findCalendarRange(e,t),i=this.data.selectedDateField);var r=t.selectionStart,n=t.selectionEnd;if(-1!=[38,40].indexOf(a)){switch(e.preventDefault(),i){case"year":40==a?o.setFullYear(o.getFullYear()-1):o.setFullYear(o.getFullYear()+1);break;case"month":40==a?o.setMonth(o.getMonth()-1):o.setMonth(o.getMonth()+1);break;default:40==a?o.setDate(o.getDate()-1):o.setDate(o.getDate()+1)}this._assCalendar.component.checkDate(o)&&this.setData("ltPropCurrentDate",this.getDateFromFormat(o,this.getData("ltPropFormat"))),$L.fastdom.measure(this.findCalendarRange.bind(this,{},t,!0))}else{if(t.selectionEnd==t.value.length&&(39==a||!e.shiftKey&&9==a)||0==t.selectionStart&&(37==a||e.shiftKey&&9==a))return;for(var s,l=this.getData("dateRange"),d=this.data.dateOrder,p=0;p<d.length;p++)if(d[p].name==i){s=p;break}if(39==a||!e.shiftKey&&9==a)if(p+1==d.length)r=n=l[i][1]+1;else{var c=this.setRangeByMoment(t,l,d[s+1].name);r=n=Math.abs(.5*(c[0]+c[1]))}else(37==a||e.shiftKey&&9==a)&&(0==p?r=n=l[i][0]+1:(c=this.setRangeByMoment(t,l,d[s-1].name),r=n=Math.abs(.5*(c[0]+c[1]))));if($L.fastdom.measure(this.findCalendarRange.bind(this,{},t)),this.data.ltPropPreventSelection)return;e.preventDefault()}t.selectionStart=r,t.selectionEnd=n}}}},focusCallback:function(e){this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},focusout:function(){if(this.preventFocus)delete this.preventFocus;else{var e=this.$node.calendarDiv;if(!e||e.classList.contains("lyteCalendarHidden"))return;if(this.data.navigation)return;clearTimeout(this._hidecall),this._hidecall=setTimeout(this._hideCalendar.bind(this),0)}},maxLen:function(e){var t=this.data.ltPropMaxlength;return null!=t?e.toString().match(new RegExp(".{0,"+t+"}"))[0]:e},showCalendarAction:function(e,t){var a=this.$node;a.classList.add("lyteInputFocus"),this.focusCallback.call(this,e),this.data.ltPropAria||!$L(a.calendarDiv).hasClass("lyteCalendarHidden")&&this.data.ltPropBindToBody||this.showCalendar(e,t)},input_blur:function(e,t){var a=e.relatedTarget;if(!(this.data.ltPropAria&&a&&this.$node.contains(a))){delete this._lasttyped;var o=/date/i.test(this.data.ltPropType),i=this.getMethods("onBlur");if(o&&a&&"dropdown"==this.data.ltPropHeaderType){var r=a.closest("lyte-drop-box");if(r){var n=r.origindd,s=this.$node,l=s.calendarComp;if(n&&l&&l.contains(n))return s.focus()}}if(this.$node.classList.remove("lyteInputFocus"),!t){var d=this.getData("ltPropType");if(this._calmsfg)this.valUpdate(),clearTimeout(this._blurcall),this._blurcall=setTimeout(function(){o&&this.focusout.call(this),i&&this.executeMethod("onBlur",e,this.$node)}.bind(this),0),delete this._calmsfg;else{if("number"==d){var p=this.data.ltPropMax,c=this.data.ltPropMin,h=parseFloat(e.target.value),u=!1;isNaN(h)||(-1==[void 0,null,""].indexOf(c)&&c.constructor==Number&&(u=(h=Math.max(c,h))==c),-1==[void 0,null,""].indexOf(p)&&p.constructor==Number&&(h=Math.min(p,h),u=u||h==p),u&&(e.target.value=h))}this.valUpdate.call(this),o&&this.focusout.call(this),i&&this.executeMethod("onBlur",e,this.$node)}}}},open_cal_for_icon:function(e){!$L(this.$node.calendarDiv).hasClass("lyteCalendarHidden")&&this.data.ltPropBindToBody||this.showCalendar(e,this.$node.getElementsByTagName("input")[0])},password_obs:function(e){var t=this.data,a=t.ltPropPasswordVisibility;if("password"==t.ltPropType&&t.ltPropPasswordIcon){this.setData({passwordClass:"lyteInput"+(a?"Hide":"Show")+"PasswordIcon",passwordTooltip:t.ltPropPasswordTooltip[a?"hide":"show"],ltPropFocus:!0});var o=this.$node.getElementsByTagName("input")[0];o.setAttribute("type",a?"text":"password"),o.selectionStart=o.selectionEnd=o.value.length,e||$L(this.$node).addClass("lyteInputWithPasswordToggleButton")}}.observes("ltPropPasswordVisibility").on("didConnect"),actions:{calendarKey:function(e){"Escape"==e.key&&this._hideCalendar(void 0,!0)},togglePassword:function(){this.setData("ltPropPasswordVisibility",!this.data.ltPropPasswordVisibility)},calIconClick:function(e,t){this.open_cal_for_icon(e)},calIconFocus:function(e,t){var a=e.relatedTarget;a&&this.$node.contains(a)||this.showCalendarAction(e,a)},calIconBlur:function(e){var t=e.relatedTarget,a=this._assCalendar;a&&t&&a.contains(t)||this._hideCalendar(),t&&this.$node.contains(t)||this.input_blur(e)},calIconKey:function(e){switch(e.key){case"Enter":case" ":this.open_cal_for_icon(e)}},resizeSelect:function(e){this.rsizefun(e)},preventDrag:function(e){e.preventDefault()},clsIcon:function(e){this.$node.ltProp("value",""),this.$node.focus(),this.data.isSearch&&this.throwEvent("on-ip-clear",e),this.getMethods("onClear")&&this.executeMethod("onClear",e,this.$node)},calmsdown:function(e,t){this._calmsfg=!0;var a=e.target;this.$node.calendarDiv.contains(a.correspondingElement||a)&&(this.preventFocus=!0)},numberKeydown:function(e,t){var a=/firefox/gi.test(navigator.userAgent);if(!_lyteUiUtils.isAndroid||a){var o=e.which||e.keyCode,i=t.value,r=/rv:11/gi.test(navigator.userAgent);if(/^(8|9|27|37|39|13|187|189)$/.test(o)||a&&/^173$/i.test(o)||o>=48&&o<=57||o>=96&&o<=105||e.metaKey||e.ctrlKey||/^(38|40)$/.test(o)&&!r)return;if(/^(69|190)$/.test(o)&&(!/\./i.test(i)&&190==o||69==o&&!/e/i.test(i)&&""!=i))return;if(e.preventDefault(),38==o?i=Number(i||0)+Number(t.step):40==o&&(i=Number(i||0)-Number(t.step)),r&&/^(38|40)$/.test(o)){var n=parseInt(this.maxLen(i));isNaN(n)||(n=Math.min(Math.max(n,t.min?t.min:-1/0),t.max?t.max:1/0),isNaN(n)||(t.value=n))}}},numberPaste:function(e,t){var a=e.clipboardData||window.clipboardData,o=t.value+a.getData("text").replace(/\'|\"/g,"");/^([0-9]+|\.(?!e){1,}|\+|\-)([0-9\.\e]{0,}$)/i.test(o)||(o.length!=this.maxLen(o)||/rv:11/gi.test(navigator.userAgent))&&e.preventDefault()},focusClass:function(e){this.$node.classList.add("lyteInputFocus"),this.focusCallback.call(this,e)},blurThrow:function(e,t){this.input_blur(e,t)},input:function(e,t){if("number"==this.data.ltPropType){var a,o=t.value,i=this.maxLen(o);a=Math.min(i,null!=t.max&&""!=t.max?t.max:1/0),o===i&&i==a||(i==a?t.value=i:isNaN(a)?t.value=parseFloat(i):t.value=a)}if(this.getData("ltPropAutoUpdate")){clearTimeout(this._iptime);var r=this.data.ltPropUpdateDelay;null!=r?this._iptime=setTimeout(this.valUpdate.bind(this),r):this.valUpdate.call(this)}},showcalendar:function(e,t){this.showCalendarAction(e,t)},calendarClick:function(e,t){var a=this._focus,o=this.data;if(a&&_lyteUiUtils.isMobile||o.ltPropReadonly&&!o.ltPropPreventKeys)delete this._focus;else{if(!a&&/date/i.test(o.ltPropType)&&!this._prevclick){var i=this.$node.calendarDiv;this.data.ltPropAria||i&&!$L(i).hasClass("lyteCalendarHidden")||this.showCalendar(e,t)}this.findCalendarRange(e,t)}},calendarKeydown:function(){this.calendarKeydown.apply(this,arguments)},timeBlur:function(e,t){if(this._emptytimeValue&&t.value)this.checkTimeStr(t,!0);else if(this.data.ltPropValidateOnBlur&&!this._emptytimeValue){var a=this._getCrctHour(t.value,this.data.ltPropTimeFormat,this.data.meridian);this.setData("ltPropDefaultTime",a||this._findNearest(t.value,this.data.ltPropTimeFormat))}this.$node.classList.remove("lyteInputFocus"),this.setData("selectedField",{}),this.getMethods("onBlur")&&(this._calmsfg?this.executeMethod("onBlur",e,this.$node):setTimeout(function(){this.executeMethod("onBlur",e,this.$node)}.bind(this),0))},timeInput:function(e){if(this._emptytimeValue)this.checkTimeStr(e);else{var t,a=e.value||"",o=this.data.ltPropTimeFormat,i=this.data.meridian;12==o?(t="hh:mm A",a=a.replace(i.AM,"AM").replace(i.PM,"PM")):t="HH:mm",a&&$L.moment&&!$L.moment(a,t).validate()&&(e.value=this.data.ltPropDefaultTime)}},timeFocus:function(e,t){this.$node.classList.add("lyteInputFocus"),t.value.trim(),this.setData("selectedField",{prop:"hour",val:0}),t.selectionStart=0,this.fixSelection.call(this,0,{prop:"hour",val:0},t),this.focusCallback.call(this,e)},timeKeydown:function(e,t){if(!this.data.ltPropReadonly&&!this._emptytimeValue)if(/enter/i.test(e.key))this.data.ltPropAria&&$L(this.dropbox).hasClass("lyteDropdownHidden")&&(this.open_dropdown(),e.stopPropagation(),e.stopImmediatePropagation());else{var a=this.getData("selectedField"),o=this.getData("meridian"),i=this.getData("ltPropTimeFormat"),r=!0,n=this.getData("originalData"),s=this.getData("dropdownData"),l=_lyteUiUtils.getCorrectNumberCode(e.which||e.keyCode),d=this.data.ltPropPreventDropdownNavigation,p=this.dropbox&&!$L(this.dropbox).hasClass("lyteDropdownHidden");if(d||!p||!/38|40|13/.test(l))if(d&&p&&/38|40/.test(l)&&e.stopPropagation(),!a.prop||e.ctrlKey||e.metaKey)/^8|46$/i.test(l)&&e.preventDefault();else{var c,h=t.selectionStart,u=t.selectionEnd;if(h==u?(this.timeClick({},t,h),h=t.selectionStart,u=t.selectionEnd,a=this.getData("selectedField")):0==h&&u==t.value.length&&(h=0,u=2,this.timeClick({},t,h),a=this.getData("selectedField")),9!=l&&e.preventDefault(),-1!=[9,37,39].indexOf(l))!e.shiftKey&&37!=l||"hour"==a.prop||39==l?(e.shiftKey&&39!=l||"minute"==a.prop||24!=i)&&(e.shiftKey||"meridian"==a.prop||12!=i)||37==l||(this.fixSelection.call(this,3,a,t),e.preventDefault(),c=!0):(this.fixSelection.call(this,-3,a,t),e.preventDefault(),c=!0),r=!1;else if(l>=48&&l<=57&&"meridian"!=a.prop)"hour"==a.prop?this.hourTimeSet.call(this,t,e,"hour",h,u):"minute"==a.prop&&this.hourTimeSet.call(this,t,e,"minute",h,u),this.data.ltPropDropdown&&this.constructNewDrop(t,i);else if(38!=l&&40!=l||"meridian"==a.prop){if("meridian"==a.prop){var f,y=t.value.trim().slice(6,t.value.length),m=String.fromCharCode(l).toUpperCase();if(0==o.PM.toUpperCase().indexOf(m)?y=o.PM:0==o.AM.toUpperCase().indexOf(m)?y=o.AM:-1!=[38,40].indexOf(l)&&(y=y==o.PM?o.AM:o.PM),y!=o.AM&&"00"==t.value.trim().slice(0,2)&&(f=this.replaceVal.call(this,t,"12",0,2)),y&&(f=this.replaceVal.call(this,f||t,y,h,u)),!this.data.ltPropValidateOnBlur&&0==this.maxValCheck(f))return!1;this.setData("ltPropDefaultTime",f),r=!1}}else 38==l?this.timeIncrease.call(this,t,e,a.prop,h,u):this.timeDecrease.call(this,t,e,a.prop,h,u),r=!1,c=!0;!c&&this.fixSelection.call(this,0,this.getData("selectedField"),t),r&&$L.fastdom.mutate((function(){t.selectionStart=h,t.selectionEnd=u})),n.length!=s.length&&(l<48||l>57)&&(this.dropdown.ltProp("selected",""),this.setData("dropdownData",n),this.dropdown.ltProp("selected",this.data.ltPropDefaultTime))}}},timeClick:function(){this.timeClick.apply(this,arguments)}},attrObs:function(e){var t=this.data;if(t.ltPropAria){var a=$L("input,textarea",this.$node),o="ltPropAriaAttributes",i="ltPropTimeAriaAttributes";e&&e.item!=o||_lyteUiUtils.setAttribute(a.get(0),t[o]||{},e?e.oldValue:{}),"datetime"!=t.ltPropType||e&&e.item!=i||_lyteUiUtils.setAttribute(a.get(1),t[i]||{},e?e.oldValue:{})}}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropTimeAriaAttributes").on("didConnect"),single_obs:function(e){if(e.path){var t=e.path.replace(/^\./,""),a=e.newValue;if(this.data.ltPropAria){var o={};o[t]=a,_lyteUiUtils.setAttribute($L("input,textarea",this.$node).get(/time/i.test(e.item)?-1:0),o,{})}}}.observes("ltPropAriaAttributes.*","ltPropTimeAriaAttributes.*"),checkTimeStr:function(e,t){if(this._emptytimeValue){var a,o=e.value||"",i=this.data.ltPropTimeFormat,r=this.data.meridian;if(12==i?(a="hh:mm A",o=o.replace(r.AM,"AM").replace(r.PM,"PM")):a="HH:mm",o&&$L.moment(o,a).validate()){var n=this._getCrctHour(e.value,i,r);this.setData("ltPropDefaultTime",n||this._findNearest(e.value,i)),delete this._emptytimeValue}else o&&t&&(this.data.ltPropStartTime==this.data.ltPropDefaultTime&&this.setData("ltPropDefaultTime",""),this.setData("ltPropDefaultTime",this.data.ltPropStartTime),delete this._emptytimeValue)}},check_dst:function(e,t,a){var o=Lyte.objectUtils,i=$L.moment,r=this.data,n=r.ltPropCurrentDate,s=r.ltPropFormat,l=12==r.ltPropTimeFormat?"hh:mm A":"HH:mm",d=function(e){e.className&&o(e,"delete","className")};if(i){if(t){if(n){var p=$L.moment(n+" "+e,s+" "+l);return a?p.format(l):p}return a?e:$L.moment(e,l)}n?e.forEach((function(e){!function(e){return $L.moment(n+" "+e.time,s+" "+l).format(l)!=e.time}(e)?d(e):e.className||o(e,"add","className","lyteDropdownActive")})):e.forEach(d)}}}),["click","scroll","resize","orientationchange"].forEach((function(e){window.addEventListener(e,_lyteInput,!0)})),Lyte.Component.register("lyte-number",{_template:'<template tag-name="lyte-number"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField"> <input type="text" name="{{ltPropName}}" class="{{ltPropClass}}" id="{{ltPropId}}" placeholder="{{ltPropPlaceholder}}" value="{{lbind(ltPropValue)}}" onkeydown="{{action(\'keydown\',event,this)}}" onpaste="{{action(\'paste\',event,this)}}" oninput="{{action(\'input\',event,this)}}" onfocus="{{action(\'focus\',event,this)}}" onblur="{{action(\'blur\',event,this)}}" onwheel="{{action(\'wheel\',event,this)}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" pattern="{{ltPropPattern}}" autocomplete="{{ltPropAutocomplete}}" tabindex="{{ltPropTabIndex}}" data-tabindex="{{ltPropDataTabindex}}"> <template is="if" value="{{ltPropControls}}"><template case="true"> <div class="lyteNumberArrowContainer" onclick="{{action(\'change_value\',event,this)}}"> <div class="lyteNumberUpArrow"></div> <div class="lyteNumberDownArrow"></div> </div> </template></template> </div> <template is="if" value="{{expHandlers(ltPropError,\'&amp;&amp;\',errorMessage)}}"><template case="true"> <span class="lyteNumberErrorMessage">{{errorMessage}}</span> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}],_observedAttributes:["ltPropValue","ltPropMaxlength","ltPropName","ltPropClass","ltPropId","ltPropPlaceholder","ltPropIgnoreSymbols","ltPropStep","ltPropInverse","ltPropWheel","ltPropMax","ltPropMin","ltPropAutofocus","ltPropDisabled","ltPropReadonly","ltPropStyle","ltPropInputTitle","ltPropPattern","ltPropUpdateDelay","ltPropLabel","ltPropAutocomplete","ltPropAppearance","ltPropDirection","ltPropValidateOnInput","ltPropAutoUpdate","ltPropDecimal","ltPropIncrement","ltPropAria","ltPropAriaAttributes","ltPropRemoveAtCursor","ltPropFireOnInit","ltPropValidateOnEmpty","ltPropRestrict","ltPropInputWrapperClass","ltPropTabIndex","ltPropValidation","ltPropMandatory","ltPropTriggerValidation","ltPropErrorMessage","ltPropDefaultErrorMessage","ltPropError","ltPropClearValidation","ltPropDataTabindex","ltPropControls","errorMessage"],didConnect:function(){["focus","blur","click","select"].forEach(function(e){this.$node[e]=function(t){this.$node.querySelector("input")[e](t)}.bind(this)}.bind(this)),this.data.ltPropAutofocus&&this.$node.focus(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)},init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didDestroy:function(){clearTimeout(this._time)},data:function(){return{ltPropValue:Lyte.attr("string",{default:""}),ltPropMaxlength:Lyte.attr("number",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropClass:Lyte.attr("string",{default:void 0}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropIgnoreSymbols:Lyte.attr("boolean",{default:!1}),ltPropStep:Lyte.attr("number",{default:1}),ltPropInverse:Lyte.attr("boolean",{default:!1}),ltPropWheel:Lyte.attr("boolean",{default:!0}),ltPropMax:Lyte.attr("number",{default:void 0}),ltPropMin:Lyte.attr("number",{default:void 0}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropStyle:Lyte.attr("string",{default:""}),ltPropInputTitle:Lyte.attr("string",{default:void 0}),ltPropPattern:Lyte.attr("string",{default:".+"}),ltPropUpdateDelay:Lyte.attr("number",{default:250}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropAutocomplete:Lyte.attr("string",{default:"off"}),ltPropAppearance:Lyte.attr("string",{default:"box"}),ltPropDirection:Lyte.attr("string",{default:"vertical"}),ltPropValidateOnInput:Lyte.attr("boolean",{default:!1}),ltPropAutoUpdate:Lyte.attr("boolean",{default:!0}),ltPropDecimal:Lyte.attr("string",{default:"."}),ltPropIncrement:Lyte.attr("boolean",{default:!0}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{},watch:!0}),ltPropRemoveAtCursor:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:!1}),ltPropValidateOnEmpty:Lyte.attr("boolean",{default:!0}),ltPropRestrict:Lyte.attr("string"),ltPropInputWrapperClass:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("string",{default:"0"}),ltPropValidation:Lyte.attr("string",{default:""}),ltPropMandatory:Lyte.attr("boolean",{default:!1}),ltPropTriggerValidation:Lyte.attr("boolean",{default:!1}),ltPropErrorMessage:Lyte.attr("object",{default:{}}),ltPropDefaultErrorMessage:Lyte.attr("string",{default:"Invalid input"}),ltPropError:Lyte.attr("boolean",{default:!1}),ltPropClearValidation:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:"0"}),ltPropControls:Lyte.attr("boolean",{default:!1}),errorMessage:Lyte.attr("string",{default:""})}},valueObs:function(e){if(!this._init){var t=!e;if(e?e.newValue=e.newValue||"":e={newValue:this.data.ltPropValue||""},this._allowCallback)return delete this._allowCallback,void(this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node));var a=e.newValue;if(t&&!this.data.ltPropFireOnInit&&(this._init=!0),this.validate(a))return this._valueUpdate(""),void delete this._init;if(a=this.maxLenValidation(a),(this.data.ltPropValidateOnEmpty&&!e.newValue||e.newValue)&&(a=this.maxMinCheck(a,!0)),e.newValue!=a)this._valueUpdate(a);else if(!this._init){if(t&&e.newValue==a)return;this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)}delete this._init}}.observes("ltPropValue").on("didConnect"),maxMinOns:function(){this._valueUpdate(this.maxMinCheck(this.data.ltPropValue||"",!0))}.observes("ltPropMax","ltPropMin"),wrp_class_obs:function(e){var t=this.data;e=e||{newValue:t.ltPropInputWrapperClass},$L(this.$node).addClass(e.newValue).removeClass(e.oldValue||"")}.observes("ltPropInputWrapperClass").on("didConnect"),appearanceObs:function(){var e="remove",t="add",a=this.$node.classList;/box/i.test(this.data.ltPropAppearance)&&(e="add",t="remove"),a[t]("lyteInput"),a[e]("lyteInputBox")}.observes("ltPropAppearance").on("didConnect"),control_obs:function(e){e=e||{newValue:this.data.ltPropControls},this.$node.classList[e.newValue?"add":"remove"]("lyteNumberWithArrowKeys")}.observes("ltPropControls").on("didConnect"),directionObs:function(){var e="remove",t="add",a=this.$node.classList;/vertical/i.test(this.data.ltPropDirection)&&(t="remove",e="add"),a[t]("horizontal"),a[e]("vertical")}.observes("ltPropDirection").on("didConnect"),disAbs:function(){this.$node.classList[this.data.ltPropDisabled?"add":"remove"]("lyteNumberDisabled")}.observes("ltPropDisabled").on("didConnect"),readAbs:function(){this.$node.classList[this.data.ltPropReadonly?"add":"remove"]("lyteNumberReadonly")}.observes("ltPropReadonly").on("didConnect"),increment:function(e,t){var a=e.value||"0",o=(Number(a)+this.data.ltPropStep*(t?1:-1)).toString();if(o!=1/0&&o!=-1/0){var i=this.data.ltPropValidation;i||(o=this.maxLenValidation(o),o=this.maxMinCheck(o,!0)),e.value=o,e.selectionEnd=o.length,e.selectionStart=o.length,this.data.ltPropAutoUpdate&&this.valueUpdate(e,"input"==i)}},check_restrict:function(e,t){var a=this.data.ltPropRestrict;if(a){var o=new RegExp(a,"g");if(!t)return e.replace(o,"");var i=o.exec(e);if(i)return e.slice(0,i.index)}return e},actions:{change_value:function(e,t){var a=$L(e.target).hasClass("lyteNumberUpArrow"),o=this.data,i=o.ltPropReadonly;o.ltPropDisabled||(i||this.increment(t.previousElementSibling,a),this.setData("ltPropAutofocus",!0))},keydown:function(e,t){var a,o=e.which||e.keyCode,i=t.selectionStart,r=t.selectionEnd,n=this.data.ltPropIncrement;if(8==o){if(i==r&&0==r)return;this._prevent=!0}else n&&38==o?(this.increment(t,!this.data.ltPropInverse),a=!0):n&&40==o&&(this.increment(t,this.data.ltPropInverse),a=!0);a&&e.preventDefault()},wheel:function(e,t){var a=this.data;if(a.ltPropWheel&&this._focused&&!a.ltPropDisabled&&!a.ltPropReadonly){var o=a.ltPropInverse;e.deltaY>10?this.increment(t,!o):e.deltaY<-10&&this.increment(t,o),e.preventDefault()}},paste:function(e,t){e.preventDefault();var a=e.clipboardData||window.clipboardData,o=t.value,i=t.selectionStart,r=t.selectionEnd,n=this.data,s=n.ltPropDecimal,l=this.check_restrict(a.getData("text").trim().replace(/^(\'|\")|(\'|\")$/,"").replace(new RegExp("[^0-9e\\+\\-\\"+s+"]","g"),""),!0),d=o.slice(0,i)+l+o.slice(r),p=this.validate(d),c=Number(o),h=l.length,u=n.ltPropValidation;if(p&&(d=this.convertToNo(d)),c!=1/0&&c!=-1/0){if(this.getMethods("onBeforePaste")){var f=this.executeMethod("onBeforePaste",t.value,a.getData("text"),d);if(null!=f&&(d=f,0==f))return}c!=1/0&&c!=-1/0&&(u||((d=this.maxLenValidation(d))||!d&&n.ltPropValidateOnEmpty)&&(d=this.maxMinCheck(d,!0)),t.value=d,t.selectionStart=r+h,t.selectionEnd=r+h,n.ltPropAutoUpdate&&this._valueUpdate(t.value,"input"==u))}},input:function(e,t){var a;this._prevent&&(delete this._prevent,this.data.ltPropAutoUpdate&&this.valueUpdate(t),a=!0);var o,i=t.value,r=i,n=t.selectionStart,s=t.selectionEnd,l=!a&&this.validate(i),d=this.data.ltPropValidation;if(l){if(__allow=!0,/insertText/i.test(e.inputType)){var p=e.data,c=parseFloat(p),h=p.length;isNaN(c)?(i=i.slice(0,s-h)+i.slice(s),s=s-h+1):(c=c.toString(),i=i.slice(0,s-h)+c+i.slice(s),s=s-h+1+c.length),(__allow=this.validate(i))&&s--}__allow&&(i=i.slice(0,n-h)+i.slice(s))}else if(i=this.check_restrict(i),!d){var u=this.maxLenValidation(i,n,s);u!=i&&(this.data.ltPropRemoveAtCursor&&(o=!0),i=u),(u=this.maxMinCheck(i,this.data.ltPropValidateOnInput))!=i&&(i=u,o=!1)}t.value=i,l?(t.selectionStart=Math.min(s-1,i.length),t.selectionEnd=Math.min(s-1,i.length)):r!=i?t.selectionStart=t.selectionEnd=o?n-1:i.length:(t.selectionStart=Math.min(n,i.length),t.selectionEnd=Math.min(s,i.length)),this.data.ltPropAutoUpdate&&this.valueUpdate(t,"input"==d)},focus:function(e,t){this._focused=!0,this.$node.classList.add("lyteInputFocus"),this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},blur:function(e,t){delete this._focused,this.$node.classList.remove("lyteInputFocus");var a=this.data.ltPropValidation;!a&&(t.value||!t.value&&this.data.ltPropValidateOnEmpty)&&(t.value=this.maxMinCheck(t.value,!0)),this._valueUpdate(t.value,!0),"blur"==a&&this.do_validation(),this.getMethods("onBlur")&&this.executeMethod("onBlur",e,this.$node)}},valueUpdate:function(e,t){e=e||this.$node.getElementsByTagName("input")[0];var a=function(){this._valueUpdate(e.value),t&&this.do_validation()}.bind(this),o=this.data.ltPropUpdateDelay;null==o?a():(clearTimeout(this._time),this._time=setTimeout(a,o))},_valueUpdate:function(e,t){var a,o=e,i="onBeforeValueUpdate";if(t){var r=new RegExp("\\"+this.data.ltPropDecimal+"$");/e$/i.test(e)&&(e=e.replace(/e$/,"")),r.test(e)&&(e=e.replace(r,""))}this.getMethods(i)&&0==(a=this.executeMethod(i,o,e,this.$node))||("string"==typeof a&&(e=a),e!=this.data.ltPropValue&&(this._allowCallback=!0,this.$node.ltProp("value",e)))},validate:function(e){var t,a,o=/e/gi,i=/(\+|\-)/g,r=this.data.ltPropDecimal,n=new RegExp("\\"+r,"g");return o.test(e)&&(e.match(o).length>1&&(a=!0),/^e/i.test(e)?a=!0:(t=/e/gi.exec(e).index,e=e.replace(o,""))),i.test(e)&&(e.match(i).length>1?a=!0:/^(\+|\-)/g.test(e)?e=e.replace(i,""):a=!0),n.test(e)&&(e.match(n).length>1||null!=t&&t<e.indexOf(r)||/^(\+|\-)/g.test(e)&&1==e.indexOf(r)&&2==t||!/^(\+|\-)/g.test(e)&&0==e.indexOf(r)&&1==t?a=!0:e=e.replace(n,"")),!a&&e.length&&(a=!/^\d+$/.test(e)),a},maxLenValidation:function(e,t,a){var o,i=this.data.ltPropMaxlength,r=e.length,n=this.data.ltPropDecimal,s=this.data.ltPropRemoveAtCursor;if(null==i)return e;if(!this.data.ltPropIgnoreSymbols&&(i+=/^(\+|\-)/.test(e)?1:0,new RegExp("\\"+n).test(e)&&(o=new RegExp("\\"+n,"g").exec(e).index,i++),/e/i.test(e))){var l=/e/i.exec(e).index,d=e.slice(l+1),p=parseInt(d);if(d.length){r--;var c=null!=o?e.slice(o+1,l).length:0;if(c<=p&&(null!=o&&(r--,i--),r-=c),r-=d.length,(r+=p)>i){if(p>r-i)return e.slice(0,l)+"e"+(p-(r-i));e=s&&null!=t&&e.length>i?(e=e.split(/e/i)[0]).slice(0,t-1)+e.slice(a):e.split(/e/i)[0].match(new RegExp(".{0,"+i+"}"))[0]}return e}i++}return s&&null!=t&&e.length>i?e.slice(0,t-1)+e.slice(a):e.match(new RegExp(".{0,"+i+"}"))[0]},maxMinCheck:function(e,t){var a=e,o=this.data.ltPropMax,i=this.data.ltPropMin,r=Number(e.replace(new RegExp("\\"+this.data.ltPropDecimal),".")),n=this.getMethods("onBeforeMaxMinValidation");if(null==o&&null==i)return e;if(null!=o&&o<r&&(e=o,e=null==(s=n?this.executeMethod("onBeforeMaxMinValidation","max",a,e,this.$node):e)?e:s),t&&null!=i)if(i>r)e=i,e=i,e=null==(s=n?this.executeMethod("onBeforeMaxMinValidation","min",a,e,this.$node):e)?e:s;else if(0==r&&""==e){var s;e=Math.max(r,i),e=null==(s=n?this.executeMethod("onBeforeMaxMinValidation","min",a,e,this.$node):e)?e:s}return e.toString().replace(/\./,this.data.ltPropDecimal)},removeTwice:function(e,t){var a=e.split(t);return a.length>1&&(e=a.shift()+t.exec(e)[0]+a.join("")),e},convertToNo:function(e){var t,a,o=this.data.ltPropDecimal,i=new RegExp("\\"+o),r=/e/i;return e=this.removeTwice(e,i),e=this.removeTwice(e,r),e=this.removeTwice(e,/\+|\-/i),i.test(e)&&r.test(e)&&((t=i.exec(e).index)>(a=r.exec(e).index)||1==Math.abs(t-a))&&(e=e.replace(t>a?r:i,"")),/^e/i.test(e)&&(e=e.replace(/e/i,"")),/\+|\-/.test(e)&&!/^(\+|\-)/.test(e)&&(null!=a&&/\+|\-/.exec(e).index!=a+1||null==a)&&(e=e.replace(/\+|\-/g,"")),e},focus_obs:function(e){if(e.newValue){this.$node.focus(),this.setData(e.item,!1);var t=this.$node.getElementsByTagName("input")[0];t.selectionStart=t.selectionEnd=t.value.length}}.observes("ltPropAutofocus"),attrObs:function(e){this.data.ltPropAria&&_lyteUiUtils.setAttribute(this.$node.querySelector("input"),this.data.ltPropAriaAttributes||{},e?e.oldValue:{})}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropType").on("didConnect"),single_obs:function(e){if(e.path){var t=e.path.replace(/^\./,""),a=e.newValue;if(this.data.ltPropAria){var o={};o[t]=a,_lyteUiUtils.setAttribute($L("input",this.$node).get(0),o,{})}}}.observes("ltPropAriaAttributes.*"),trigger_obs:function(e){if(e.newValue){var t=e.item;/clear/i.test(t)?this.error_decision():this.do_validation(),this.setData(t,!1)}}.observes("ltPropTriggerValidation","ltPropClearValidation"),error_decision:function(e,t,a){if(this.setData({errorMessage:t,ltPropError:!!t}),$L(this.$node)[(t?"add":"remove")+"Class"]("lyteErrorInput"),t){var o="onError";this.getMethods(o)&&this.executeMethod(o,a,e,this.$node)}else""==t&&(o="onValidInput",this.getMethods(o)&&this.executeMethod(o,e,this.$node))},do_validation:function(){var e=this.data,t=e.ltPropErrorMessage||{},a=e.ltPropDefaultErrorMessage,o=e.ltPropValue||"",i=e.ltPropValidateOnEmpty,r=o||i,n=r?this.maxMinCheck(o,!0):o,s=e.ltPropPattern,l=this.error_decision.bind(this,o);return o!=n?l(t.minmax||a,"maxmin"):this.maxLenValidation(o)!=o?l(t.maxlength||a,"maxlength"):s&&r&&!new RegExp(s,"g").test(o)?l(t.pattern||a,"pattern"):e.ltPropMandatory&&!o?l(t.mandatory||a,"mandatory"):l("")}});var _lyteCbox={checkedClass:"lyteCboxChecked",uncheckedClass:"lyteCboxUnchecked"};function addModalEvent(e){window.addEventListener("resize",(function(e){LytePopup._lyteModalRTId&&(clearTimeout(LytePopup._lyteModalRTId),LytePopup._lyteModalRTId=!1),LytePopup._lyteModalRTId=setTimeout((function(){for(var e=0;e<LytePopup.components.length;e++)if(LytePopup.components[e].$node&&"LYTE-MODAL"==LytePopup.components[e].$node.nodeName&&"visible"==LytePopup.components[e].childComp.style.visibility&&LytePopup.components[e].childComp.querySelector(".lyteModal"))if(LytePopup.components[e].$node.component.setData("resizeCalled",!0),""==LytePopup.components[e].getData("ltPropParentModalId")&&""!=LytePopup.components[e].getData("ltPropDependentModalId"))LytePopup.components[e].$node.component.updateScrollHandling();else if(""==LytePopup.components[e].getData("ltPropParentModalId")&&""==LytePopup.components[e].getData("ltPropDependentModalId")){if(e==LytePopup.components.length-1&&LytePopup.components[e].renderSidewise)continue;LytePopup.components[e].$node.component.updateScrollHandling()}LytePopup._lyteModalRTId=!1}),100)}),!0),document.addEventListener("click",(function(e){for(var t=e.target;!$L(t).hasClass("modalWrapper")&&"LYTE-MODAL-FREEZE"!=t.tagName&&"LYTE-DROP-BOX"!=t.tagName&&"HTML"!=t.tagName;)if(!(t=t.parentElement))return;if("HTML"==t.tagName||"LYTE-MODAL-FREEZE"==t.tagName){for(var a=LytePopup.components.length-1;a>=0;a--)if("LYTE-MODAL"==LytePopup.components[a].$node.tagName&&"visible"==LytePopup.components[a].childComp.style.visibility){var o=!0;if((i=LytePopup.components[a].$node).component.getData("ltPropAllowContainment")&&"HTML"===t.tagName&&(o=!1),i&&i.component.getData("ltPropOverlayClose")&&o){i.ltProp("show",!1);break}}}else if(t.classList.contains("modalWrapper")&&LytePopup.components.length>1&&"LYTE-MODAL"==LytePopup.components[LytePopup.components.length-1].$node.tagName){var i;o=!0,(i=LytePopup.components[LytePopup.components.length-1]).getData("ltPropAllowContainment")&&"HTML"===t.tagName&&(o=!1),!i.childComp.contains(t)&&"visible"==i.childComp.style.visibility&&i.getData("ltPropOverlayClose")&&o&&i.$node.ltProp("show",!1)}}),!0)}function addPopoverEvent(e){document.addEventListener("click",(function(e){if(LytePopup._stopPropagation)LytePopup._sourceComp.setData("ltPropStopClick",!1);else{for(var t=e.target;!$L(t).hasClass("popoverWrapper")&&"LYTE-POPOVER-FREEZE"!=t.tagName&&"LYTE-DROP-BOX"!=t.tagName&&"HTML"!=t.tagName;)if(!(t=t.parentElement))return;if("HTML"==t.tagName||"LYTE-POPOVER-FREEZE"==t.tagName)for(var a=LytePopup.components.length-1;a>=0;a--){var o=!1;if((n=$L(LytePopup.components[a].childComp).find("lyte-dropdown"))[0])for(var i=0;i<n.length;i++)n[i]&&n[i].getData("ltPropIsOpen")&&(o=!0);if("LYTE-POPOVER"==LytePopup.components[a].$node.tagName&&"visible"==LytePopup.components[a].childComp.style.visibility&&!o){var r=LytePopup.components[a].$node;if(r&&r.component.getData("visible")&&r.component.getData("ltPropCloseOnBodyClick")&&!r.component.getData("dragRunning")&&(!$L(e.target).closest("lyte-input")[0]||!r.component.getData("ltPropIgnoreInput"))){r.component.setData("visible",!1),r.ltProp("show",!1);break}}}else if(t.classList.contains("popoverWrapper")&&LytePopup.components.length>1&&"LYTE-POPOVER"==LytePopup.components[LytePopup.components.length-1].$node.tagName){var n,s=LytePopup.components[LytePopup.components.length-1];if(o=!1,(n=$L(s.childComp).find("lyte-dropdown"))[0])for(a=0;a<n.length;a++)n[a]&&n[a].getData("ltPropIsOpen")&&(o=!0);!s.childComp.contains(t)&&s.getData("visible")&&s.getData("ltPropCloseOnBodyClick")&&(s.setData("visible",!1),s.$node.ltProp("show",!1))}}}),!0),window.addEventListener("scroll",(function(e){if(LytePopup.makingVisible)LytePopup.makingVisible=!1;else for(var t,a=LytePopup.components.length-1;a>=0;a--)if(LytePopup.components[a].$node&&"LYTE-POPOVER"==LytePopup.components[a].$node.nodeName&&"visible"==LytePopup.components[a].childComp.style.visibility){if(t=LytePopup.components[a].childComp,LytePopup.components[a].data.ltPropCloseOnScroll)return void LytePopup.components[a].setData("ltPropShow",!1);if(t&&t._callee.component.$node.ltProp("scrollable")&&LytePopup.components[a].callOnScroll(e)){var o=t.querySelector(".lytePopover");if(!o)return;for(;"LYTE-WORMHOLE"!=o.tagName;)o=o.parentElement;for(var i=e.target;"LYTE-WORMHOLE"!=i.tagName&&"HTML"!=i.tagName&&"#document"!=i.nodeName;)i=i.parentElement;if("LYTE-WORMHOLE"==i.tagName&&i.isEqualNode(o))return;if(o._callee.component.computeOffsetImpl(),o._callee.component.getData("ltPropForceScroll"))continue;var r=document.querySelector(o._callee.ltProp("originElem")),n=e.target,s=r.getBoundingClientRect(),l=o._callee.ltProp("boundary"),d=o.querySelector(".lytePopover"),p=o._callee.getData("windowSpacing");if(0===Object.keys(l).length&&l.constructor===Object||(l.top&&d.getBoundingClientRect().top<parseFloat(l.top)||l.bottom&&d.getBoundingClientRect().bottom>parseFloat(l.bottom)||l.left&&d.getBoundingClientRect().left<parseFloat(l.left)||l.right&&d.getBoundingClientRect().right>parseFloat(l.right))&&o._callee.ltProp("show",!1),n.contains(r)){var c=o.querySelector("#lytePopoverArrow");if(c&&c.classList.contains("lytePopoverArrowBottom")&&s.top+s.height/2>window.innerHeight&&o._callee.ltProp("show",!1),c&&(c.classList.contains("lytePopoverArrowLeft")||c.classList.contains("lytePopoverArrowRight"))&&(c.getBoundingClientRect().bottom>=o.querySelector(".lytePopover").getBoundingClientRect().bottom||c.getBoundingClientRect().top<=o.querySelector(".lytePopover").getBoundingClientRect().top)&&o._callee.ltProp("show",!1),"#document"==n.nodeName){var h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),u=Math.max(document.documentElement.clientWidth,window.innerWidth||0);(s.top<p.top||s.bottom+3>=h-p.bottom)&&o._callee.ltProp("show",!1),(s.left<p.left||s.right+3>=u-p.right)&&o._callee.ltProp("show",!1)}else{var f=n.getBoundingClientRect();(f.top+p.top>s.top||f.top+f.height-p.bottom<s.top+s.height)&&o._callee.ltProp("show",!1),(f.left+p.left>s.left||f.left+f.width-p.right<s.left+s.width)&&o._callee.ltProp("show",!1)}}}}}),!0),window.addEventListener("resize",(function(e){LytePopup._lytePopoverRTId&&(clearTimeout(LytePopup._lytePopoverRTId),LytePopup._lytePopoverRTId=!1);for(var t=LytePopup.components.length-1;t>=0;t--)LytePopup.components[t].$node.component;LytePopup._lytePopoverRTId=setTimeout((function(){for(var t=LytePopup.components.length-1;t>=0;t--)LytePopup.components[t].$node&&"LYTE-POPOVER"==LytePopup.components[t].$node.nodeName&&"visible"==LytePopup.components[t].childComp.style.visibility&&LytePopup.components[t].childComp.querySelector(".lytePopover")&&(LytePopup.components[t].$node.component.setData("resize",!0),LytePopup.components[t].$node.component.updateScrollHandling(e));LytePopup._lytePopoverRTId=!1}),100)}),!0)}Lyte.Component.register("lyte-checkbox",{_template:'<template tag-name="lyte-checkbox" onkeydown="{{action(\'preventInputClick\',event)}}" onkeyup="{{action(\'preventInputClick\',event)}}"> <template value="{{ltPropType}}" is="switch">     <template case="default"><label class="lyteCheckbox lyteDefault" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template><template case="primary"><label class="lyteCheckbox lytePrimary" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template><template case="switch"><label class="" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide on-off-sw" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="on-btn"></span> </span> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label></template><template case="slider"><label class="lyteCheckSliderLabel" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},primary:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,5]},{type:"attr",position:[0,5,1]},{type:"if",position:[0,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropType","ltPropId","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropName","ltPropValue","ltPropReadonly","ltPropFireOnInit","ltPropClass","ltPropLabelClass","ltPropTabindex","lyteUnbound","ltPropYield","ltPropAriaCheckbox","ltPropFocus","ltPropPreventCallbackObservers","ltPropDataTabindex","randomId"],data:function(){return{ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","type","default")}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","fireOnInit",!1)}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","class","")}),ltPropLabelClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","labelClass","")}),ltPropTabindex:Lyte.attr("number",{default:0}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAriaCheckbox:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","ariaCheckbox",{})}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropPreventCallbackObservers:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:null}),randomId:Lyte.attr("string")}},ariaObserver:function(e){var t=e.oldValue,a=e.newValue;this.addAriaValues(t,a)}.observes("ltPropAriaCheckbox"),didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteCheckDisabled"):this.$node.classList.remove("lyteCheckDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),setDefaults:function(){var e=this.getData("ltPropType"),t=this.getData("ltPropClass"),a=this.getData("ltPropLabelClass");"switch"===e?this.setData("ltPropFinalClass",t||"lyteCheckSwitch"):"default"===e?this.setData("ltPropFinalClass",t||"lyteCheckBoxDefault"):"primary"===e?this.setData("ltPropFinalClass",t||"lyteCheckBoxPrimary"):"slider"===e&&this.setData("ltPropFinalClass",t||"lyteCheckSlider"),"slider"===e?this.setData("ltPropFinalLabelClass",a||"lyteCheckSliderText"):this.setData("ltPropFinalLabelClass",a||"")},typeObs:function(){this.setDefaults(),this.setRandomId()}.observes("ltPropType","ltPropClass","ltPropLabelClass").on("init"),setRandomId:function(){this.setData("randomId","lyte-checkbox-label-"+_lyteUiUtils.cboxId++)},didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},focusInput:function(){var e=this.$node.querySelector("input");document.activeElement!==e&&e.focus()},didConnect:function(){var e=this,t=this.getData("ltPropAriaCheckbox"),a=this.getData("ltPropDataTabindex");this.$node.setAttribute("data-tabindex",a),this.reduceOpacity(),this.$node.click=function(){var t=new Event("click",{bubbles:!0,cancelable:!0}),a=e.$node,o=a.ltProp("checked"),i=a.ltProp("disabled"),r=a.ltProp("readonly"),n=(e.getData("lyteUnbound"),e.$node.querySelector("input"));i||r||(e.setData("eventCache",t),e.setData("internalChange",!0),e.clickFn=!0,o?a.ltProp("checked",!1):a.ltProp("checked",!0),e.$node._fR&&(e.setData("internalChange",!1),n.checked=a.ltProp("checked"),n.checked?n.setAttribute("checked",""):n.removeAttribute("checked"),e.fireCallBacksFunction({},!1)),e.clickFn=!1,a.dispatchEvent(t))},this.$node.focus=function(){var t=e.$node,a=t.querySelector("input"),o=t.ltProp("disabled"),i=t.ltProp("readonly");o||i||a.focus()},this.$node.blur=function(){var t=e.$node,a=t.querySelector("input"),o=t.ltProp("disabled"),i=t.ltProp("readonly");o||i||a.blur()},this.fireCallBacksFunction.call(this,void 0,!0),this.addAriaValues({},t)},addAriaValues:function(e,t){var a=this.getCheckboxWidget();_lyteUiUtils.setAttribute(a,t,e)},getCheckboxWidget:function(){return this.$node.querySelector("input")},fireCallbacks:function(e,t){var a=this.getData("ltPropPreventCallbackObservers"),o=this.getData("internalChange"),i=this.getData("ltPropChecked")?_lyteCbox.checkedClass:_lyteCbox.uncheckedClass;if(this.setData("internalChange",!1),!this.getData("preventRefire")&&!this.getData("preventObs")){if(o||!a)return this.getData("handleLbind")?(this.setData("preventObs",!0),this.setData("internalChange",!0),this.setData("ltPropChecked",!this.getData("ltPropChecked")),this.setData("preventObs",!1),void this.setData("handleLbind",!1)):void this.fireCallBacksFunction.call(this,e,t);this.toggleClass(i)}}.observes("ltPropChecked"),focusCheckbox:function(){this.getData("ltPropFocus")&&this.$node.focus(),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),fireCallBacksFunction:function(e,t){var a=this.getData("ltPropChecked"),o=this.getData("ltPropFireOnInit"),i=this.getData("eventCache");if(this.$node.checked=a||!1,a&&t){if(!o)return;var r=this.$node.querySelector("input");this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",r,this,i,"script"),this.getMethods("onChecked")&&this.executeMethod("onChecked",r,this,i,"script"),this.getMethods("onChanged")&&this.executeMethod("onChanged",r,this,i,"script")}else if(this.$node.checked&&!t){if(r=this.$node.querySelector("input"),!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeChecked")){if(this.data.ltPropChecked=!1,r.checked=!1,!1===this.executeMethod("onBeforeChecked",r,this,i,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!0,this.setData("internalChange",!0),this.setData("ltPropChecked",!1)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!0,r.checked=!0}this.setData("preventRefire",!1)}this.getMethods("onChecked")&&this.executeMethod("onChecked",r,this,i,this.eventType()),this.toggleClass(_lyteCbox.checkedClass),this.getMethods("onChanged")&&this.executeMethod("onChanged",r,this,i,this.eventType())}else if(!this.$node.checked&&!t){if(r=this.$node.querySelector("input"),!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeUnchecked")){if(this.data.ltPropChecked=!0,r.checked=!0,!1===this.executeMethod("onBeforeUnchecked",r,this,i,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!1,this.setData("internalChange",!0),this.setData("ltPropChecked",!0)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!1,r.checked=!1}this.setData("preventRefire",!1)}this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",r,this,i,this.eventType()),this.toggleClass(_lyteCbox.uncheckedClass),this.getMethods("onChanged")&&this.executeMethod("onChanged",r,this,i,this.eventType())}},toggleClass:function(e){var t=e===_lyteCbox.checkedClass?_lyteCbox.uncheckedClass:_lyteCbox.checkedClass;this.$node.classList.remove(t),this.$node.classList.add(e)},eventType:function(){var e=this.clicked||this.clickFn,t=this.eveType;return e?t||"click":"script"},isCheckedLbound:function(){return!!this.$node._attributeDetails&&!!this.$node._attributeDetails["lt-prop-checked"]&&!!this.$node._attributeDetails["lt-prop-checked"].isLbind},isNodeDestroyed:function(){return!this.$node},fireClick:function(e){var t,a,o=this.getData("sendEvent"),i=this.getData("ltPropDisabled");this.isTimeoutInitiated=!1,this.isNodeDestroyed()||o||i||((t=this.$node.querySelector("input")).checked=!t.checked,(a=new Event("click")).shiftKey=!0,t.dispatchEvent(a))},actions:{preventInputClick:function(e){32===e.keyCode&&e.preventDefault()},mup:function(e){var t;if(this.setData("prevented",!1),this.setData("sendEvent",!1),!this.getData("ltPropDisabled")){var a=this.$node.querySelector("input");t=a.checked,this.getMethods("onBeforeChecked")&&!t?0!=this.executeMethod("onBeforeChecked",a,this,e,"click")||(this.setData("prevented",!0),e.preventDefault()):this.getMethods("onBeforeUnchecked")&&t&&(0!=this.executeMethod("onBeforeUnchecked",a,this,e,"click")||(this.setData("prevented",!0),e.preventDefault()))}},prevent:function(e){var t=this.getData("sendEvent"),a=!!~window.navigator.userAgent.indexOf("Firefox"),o=this.isTimeoutInitiated;t||e.stopPropagation(),a&&!o&&(this.isTimeoutInitiated=!0,setTimeout(this.fireClick.bind(this,e),0))},checkBoxClicked:function(e){var t,a;return this.setData("sendEvent",!0),this.setData("eventCache",e),this.clicked=!0,this.focusInput(),this.getData("prevented")?(t=this.$node.querySelector("input"),this.setData("prevented",!1),this.setData("preventRefire",!0),t.checked?t.checked=!1:t.checked=!0,this.setData("preventRefire",!1),this.clicked=!1,void this.setData("eventCache",{})):this.getData("ltPropDisabled")?(this.clicked=!1,e.preventDefault(),void this.setData("eventCache",{})):(a=e.target.checked,this.setData("internalChange",!0),a?this.setData("ltPropChecked",!0):this.setData("ltPropChecked",!1),this.$node._fR&&(this.setData("internalChange",!1),this.getData("ltPropChecked")?this.$node.querySelector("input").setAttribute("checked",""):this.$node.querySelector("input").removeAttribute("checked"),this.fireCallBacksFunction({},!1)),this.setData("eventCache",{}),void(this.clicked=!1))}}}),document.addEventListener("keyup",(function(e){var t;if(32===e.keyCode){if("INPUT"!==(t=document.activeElement).tagName)return;for(;"LYTE-CHECKBOX"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;"LYTE-CHECKBOX"===t.tagName&&(t.component.eveType="key",t.click(),t.component.eveType="")}}),!0),Lyte.Component.register("lyte-button",{_template:'<template tag-name="lyte-button" onclick="{{action(\'check\',event)}}" onmousedown="{{action(\'check\',event)}}"> <button type="{{ltPropType}}" class="{{finalClass}}" value="{{ltPropValue}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" id="{{ltPropId}}" name="{{ltPropName}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" style="{{finalStyle}}"> <template is="if" value="{{ltPropText}}"><template case="true"> {{ltPropText}} </template><template case="false"> <lyte-yield yield-name="text"></lyte-yield> </template></template> </button> </template>',_dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"finalStyle"},type:{name:"type",dynamicValue:"ltPropType"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropName","ltPropDisabled","ltPropAutofocus","ltPropAppearance","ltPropId","ltPropType","ltPropValue","ltPropTabindex","ltPropStyle","ltPropSize","ltPropBackgroundColor","ltPropColor","lyteShortcut","ltPropClass","lyteUnbound","ltPropAriaButton","ltPropText","ltPropDataTabindex","randomId"],data:function(){return{ltPropName:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropAppearance:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","appearance","default")}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropType:Lyte.attr("string",{default:"button"}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropTabindex:Lyte.attr("string",{default:void 0}),ltPropStyle:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","style",void 0)}),ltPropSize:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","size","default")}),ltPropBackgroundColor:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","backgroundColor",void 0)}),ltPropColor:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","color",void 0)}),lyteShortcut:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","class","")}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropAriaButton:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","ariaButton",{})}),ltPropText:Lyte.attr("string",{default:""}),ltPropDataTabindex:Lyte.attr("string",{default:null}),randomId:Lyte.attr("string")}},ariaObserver:function(e){var t=e.oldValue,a=e.newValue;this.addAriaValues(t,a)}.observes("ltPropAriaButton"),init:function(){this.pushValue()},registerFunction:function(e){var t=this;this.$node[e]=function(){var a=t.$node,o=a.querySelector("button");a.ltProp("disabled")||o[e]()}},didConnect:function(){for(var e=["click","focus","blur"],t=0,a=this.getData("ltPropAriaButton");t<e.length;t++)this.registerFunction(e[t]);this.addAriaValues({},a)},addAriaValues:function(e,t){var a=this.getButtonWidget();_lyteUiUtils.setAttribute(a,t,e)},getButtonWidget:function(){return this.$node.querySelector("button")},didDestroy:function(){var e;delete this.$node.focus,delete this.$node.blur,delete this.$node.click;try{e=JSON.parse(this.getData("lyteShortcut"))}catch(e){return}Array.isArray(e)?e.forEach((function(e){e.key&&shortcut.push({newKey:void 0,type:void 0,wait:void 0,oldKey:e.key})})):shortcut.push({newKey:void 0,type:void 0,wait:void 0,oldKey:e.key})},shortcutChanged:function(e){this.pushValue(e.oldValue)}.observes("lyteShortcut"),pushValue:function(e){var t=this.getData("lyteShortcut"),a=this.$node,o=JSON.parse(e||"{}").key;t&&(newObj=JSON.parse(t),Array.isArray(newObj)?newObj.forEach((function(e){e.key&&shortcut.push({newKey:e.key,type:e.type,wait:e.wait,oldKey:void 0,value:a})})):newObj.key?shortcut.push({newKey:newObj.key,type:newObj.type,wait:newObj.wait,oldKey:o,value:a}):shortcut.push({newKey:void 0,type:void 0,wait:void 0,oldKey:o}))},changeClass:function(){var e=this.getData("ltPropClass"),t="",a="lyte-button"+(e?" "+e:""),o=this.getData("ltPropAppearance"),i=this.getData("ltPropSize"),r=this.getData("ltPropColor"),n=this.getData("ltPropBackgroundColor");i=i?i.toLowerCase():"",o=o||"default",n?a+=" lyteBackgroundColorBtn":r?a+=" lyteColorBtn":-1!==o.indexOf("default")?a+=" lyteDefaultBtn":-1!==o.indexOf("primary")?a+=" lytePrimaryBtn":-1!==o.indexOf("secondary")&&(a+=" lyteSecondary"),-1!==o.indexOf("success")?a+=" lyteSuccess":-1!==o.indexOf("failure")&&(a+=" lyteFailure"),"extra-small"===i?a+=" lyteExsm":"small"===i?a+=" lyteSm":"large"===i&&(a+=" lyteLg"),r?t=n?t+"background-color:"+n+";border-color:"+n+";color:"+r+";":t+"background-color: #fff; color:"+r+";border-color:"+r+";":n&&(t=t+"background-color:"+n+";border-color:"+n+";color:white;"),this.getData("ltPropStyle")&&(t+=this.getData("ltPropStyle")),this.setData("finalStyle",t),this.setData("finalClass",a)}.observes("ltPropClass","ltPropBackgroundColor","ltPropColor","ltPropStyle","ltPropSize","ltPropAppearance").on("init"),actions:{check:function(e){this.$node.querySelector("button").disabled&&(e.stopPropagation(),e.preventDefault())}}}),Lyte.Component.register("lyte-tabs",{_template:'<template tag-name="lyte-tabs"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="tabYield"></lyte-yield> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_observedAttributes:["ltPropYield","ltPropHover","ltPropActiveClass","ltPropPosition","ltPropCloseIcon","prevTarget","ltPropHeight","ltPropType","ltPropMaxWidth","ltPropTabStyle","ltPropMenuWrapperClass","ltPropCurrentTab","ltPropActiveTab","ltPropFireOnInit","menuLabels"],init:function(){this.$node.addTab=function(e){this.component.constructTabs(this,e),this.component.collapseHeader(!0)},this.$node.deleteTab=function(e){this.component.deleteTabContent(e,null)},this.$node.openTab=function(e){this.component.openTabContent(e,null)},this.$node.enableTab=function(e){this.component.enableTab(e)},this.$node.disableTab=function(e){this.component.disableTab(e)},this.$node.addCloseIcon=function(){this.component.checkCloseIcon()},this.$node.resizeTab=function(){this.component.collapseHeader(!0),this.component.checkHeightOnResize()}},data:function(){return{ltPropYield:Lyte.attr("boolean",{default:!0}),ltPropHover:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","hover","lyteTabHover")}),ltPropActiveClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","activeClass","lyteTabActive")}),ltPropPosition:Lyte.attr("object",{default:{pos:"top",align:"left"}}),ltPropCloseIcon:Lyte.attr("boolean",{default:!1}),prevTarget:Lyte.attr("object",{default:null}),ltPropHeight:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","height","400px")}),ltPropType:Lyte.attr("string"),ltPropMaxWidth:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","maxWidth","90%")}),ltPropTabStyle:Lyte.attr("string"),ltPropMenuWrapperClass:Lyte.attr("string"),ltPropCurrentTab:Lyte.attr("object"),ltPropActiveTab:Lyte.attr("number"),ltPropFireOnInit:Lyte.attr("boolean",{default:!0}),menuLabels:Lyte.attr("array",{default:[]})}},didConnect:function(){$L(this.$node).attr("role","tabs"),$L("LYTE-TAB-HEAD").attr("role","tablist"),this.initialFunc(!0)},didDestroy:function(){this.$node.checkTabs&&(clearTimeout(this.$node.checkTabs),this.$node.checkTabs=!1)},initialFunc:function(e){var t=this;if(this.$node.childElementCount>1||"LYTE-TAB"===this.$node.children[0].tagName){this.checkTabStyle(),this.$node.style.height=this.getData("ltPropHeight");var a=this.$node.querySelector("lyte-tab-head");a.classList.add("lyteTabNav"),"collapse"==this.getData("ltPropType")&&a.classList.add("lyteTabOverflowV");var o,i=this.getData("ltPropPosition"),r=this.getHeader(a.querySelectorAll("lyte-tab-title")),n=this.getContent($L("lyte-tab-content",this.$node.querySelector("lyte-tab-body"))),s=this.getData("ltPropActiveClass");this.setPosition(i),this.checkCloseIcon(a);var l=function(e){this.keydown(e)}.bind(this);t=this,a.addEventListener("click",function(e){this.showTab(e)}.bind(this),!0),a.addEventListener("mouseover",function(e){this.mouseOver(e)}.bind(this),!0),a.addEventListener("mouseout",function(e){this.mouseOut(e)}.bind(this),!0),this.$node.addEventListener("focusin",(function(e){t.$node.querySelector("lyte-tab-head").addEventListener("keydown",l,!0)})),this.$node.addEventListener("focusout",(function(e){t.$node.querySelector("lyte-tab-head").removeEventListener("keydown",l,!0)}));var d=this.getData("ltPropActiveTab");if(d)r[d].classList.add(s),$L(r[d]).attr("tabindex",0),$L(r[d]).attr("aria-selected","true"),o=d;else for(var p=0;p<r.length;p++)r[p].classList.contains(s)&&($L(r[p]).attr("tabindex",0),$L(r[p]).attr("aria-selected","true"),o=p);for(p=0;p<n.length;p++)!o||o!==p&&r[o].getAttribute("lt-prop-id")!==n[p].id?(n[p].classList.add("lyteTabHide"),$L(r[p]).attr("aria-selected",!1)):(this.executeOnBeforeOpen(r[o],r[o].getAttribute("lt-prop-id"),null,null),n[p].classList.add("lyteTabShow"),this.setData("ltPropCurrentTab",{index:o,name:r[o].textContent.trim()}),this.executeOnOpen(r[o],r[o].getAttribute("lt-prop-id"),null,e)),$L(r[p]).attr("aria-controls",n[p].id);!o&&r.length&&(o=0,this.executeOnBeforeOpen(r[0],r[0].getAttribute("lt-prop-id"),null,null,e),r[0].classList.add(s),$L(r[0]).attr("tabindex",0),$L(r[0]).attr("aria-selected","true"),n[0].classList.remove("lyteTabHide"),n[0].classList.add("lyteTabShow"),this.setData("ltPropCurrentTab",{index:o,name:r[o].textContent.trim()}),this.executeOnOpen(r[0],r[0].getAttribute("lt-prop-id"),null,e)),this.setData("prevTarget",r[o]),$L.fastdom.measure((function(){if("auto"==this.getData("ltPropHeight"))"left"!==i.pos&&"right"!==i.pos||(this.$node.querySelector(".lyteTabNav").style.height="auto",this.$node.querySelector("lyte-tab-body").style.height="auto"),"top"!==i.pos&&"bottom"!==i.pos||(this.$node.querySelector("lyte-tab-body").style.height="auto"),this.makeAlignment(this.getData("ltPropPosition")),e&&_lyteUiUtils.dispatchEvent("lytetabafterrender",this.$node),e&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node);else{var t=window.getComputedStyle(this.$node),a=(t.borderTop?parseFloat(t.borderTop):0)+(t.borderBottom?parseFloat(t.borderBottom):0),o=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height,r=parseInt(t.height)-a;$L.fastdom.mutate((function(){"left"!==i.pos&&"right"!==i.pos||(this.$node.querySelector(".lyteTabNav").style.height=r+"px",this.$node.querySelector("lyte-tab-body").style.height=r+"px"),"top"!==i.pos&&"bottom"!==i.pos||(this.$node.querySelector("lyte-tab-body").style.height=r-o+"px"),this.makeAlignment(this.getData("ltPropPosition")),e&&_lyteUiUtils.dispatchEvent("lytetabafterrender",this.$node),e&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}),this)}}),this)}else console.error("No content detected")},checkTabStyle:function(){"nested"===this.getData("ltPropTabStyle")&&this.$node.classList.add("lyteNestedTab")},onPositionChange:function(){var e=this.$node;e.classList.remove("lyteTabDefaultLeft","lyteTabDefaultRight","lyteTabDefaultTop","lyteTabDefaultBottom");var t=e.querySelector("lyte-tab-head"),a=e.querySelector("lyte-tab-body"),o=e.querySelectorAll("lyte-tab-title");if(t.classList.remove("lyteTabAlignStart","lyteTabAlignEnd","lyteTabAlignCenter"),t.removeAttribute("style"),a.removeAttribute("style"),o.length){o[0].style.marginLeft="",o[0].style.marginTop="";for(var i=0;i<o.length;i++)o[i].style.float=""}e=null,t=null,o=null,a=null;var r=this.getData("ltPropPosition");this.setPosition(r),this.setHeight(r)}.observes("ltPropPosition"),onHeightChange:function(){this.$node.style.height=this.getData("ltPropHeight"),this.setHeight(this.getData("ltPropPosition"))}.observes("ltPropHeight"),keydown:function(e){if("LYTE-TAB-TITLE"===e.target.tagName){var t=$L(this.$node).find("lyte-tab-title").toArray(),a=$L(this.$node).find(".lyteTabHover");a=0===a.length?$L(this.$node).find(".lyteTabActive"):a;var o=t.indexOf(a[0]),i=t.length;39!==e.keyCode&&37!==e.keyCode||(t[o].setAttribute("tabindex",-1),$L(t[o]).removeClass("lyteTabHover"),39===e.keyCode?++o>=i&&(o=0):--o<0&&(o=i-1),t[o].setAttribute("tabindex",0),$L(t[o]).addClass("lyteTabHover")),13===e.keyCode&&this.openTabContent($L(t[o]).attr("lt-prop-id"),e),t[o].focus()}},showTab:function(e){for(var t=e.target.correspondingElement||e.target;t&&t.parentNode&&"LYTE-TAB-TITLE"!=t.tagName;)t=t.parentNode;if(t&&"HTML"!=t.tagName&&!t.isEqualNode(document)&&"LYTE-TAB-TITLE"==t.tagName){var a=t.getAttribute("lt-prop-id");if(e.target.classList.contains("lyteTabCloseIcon")){if(!this.deleteTabContent(a,e))return;if(this.makeAlignment(this.getData("ltPropPosition")),!(t=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title").length>0?this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title")[0]:null))return void this.setData("prevTarget",null);a=t.getAttribute("lt-prop-id"),this.openTabContent(t,null)}this.openTabContent(t,e)}},mouseOver:function(e){for(var t=e.target.correspondingElement||e.target;t&&t.parentNode&&"LYTE-TAB-TITLE"!=t.tagName;)t=t.parentNode;if(t&&"HTML"!=t.tagName&&!t.isEqualNode(document)){var a=this.getData("ltPropHover");$L(t).addClass(a)}},mouseOut:function(e){for(var t=e.target.correspondingElement||e.target;t&&t.parentNode&&"LYTE-TAB-TITLE"!=t.tagName;)t=t.parentNode;if(t&&"HTML"!=t.tagName&&!t.isEqualNode(document)){var a=this.getData("ltPropHover");$L(t).removeClass(a)}},getContent:function(e){for(var t=[],a=0;a<e.length;a++)this.$node==$L(e[a]).closest("LYTE-TABS")[0]&&t.push(e[a]);return t},getHeader:function(e){for(var t=[],a=0;a<e.length;a++)this.$node==$L(e[a]).closest("LYTE-TABS")[0]&&t.push(e[a]);return t},constructTabs:function(e,t){var a,o="",i="",r=!1,n=document.createElement("lyte-tab-title"),s=document.createElement("lyte-tab-content");"object"==typeof t&&"LYTE-TAB"===t.tagName?(o=t.getAttribute("lt-prop-title"),i=t.innerHTML,a=t.getAttribute("lt-prop-id")):(o=t.title,i=t.content,a=t.id,r=!0),a||(a=this.generateId(o)),n.innerHTML=o,s.innerHTML=i,n.setAttribute("lt-prop-id",a),n.setAttribute("aria-controls",a),s.id=a,s.classList.add("lyteTabHide");var l=e.querySelector("#moreMenu");l?e.querySelector("lyte-tab-head").insertBefore(n,l):e.querySelector("lyte-tab-head").append(n),e.querySelector("lyte-tab-body").append(s),r&&(this.getData("ltPropCloseIcon")&&this.createCloseIcon(new Array(n)),this.makeAlignment(this.getData("ltPropPosition")))},deleteTabContent:function(e,t){if(e){var a=!0;if(this.getMethods("onBeforeDelete")&&(a=void 0===(a=this.executeMethod("onBeforeDelete",e,this.$node,t))||a),!a)return!1;for(var o=this.$node.querySelector("#"+e),i=this.$node.querySelector("lyte-tab-head"),r=i.querySelectorAll("lyte-tab-title"),n=0;n<r.length;n++)if(r[n].getAttribute("lt-prop-id")===e){r[n].classList.contains("lyteTabCustomTitleWidth"),i.removeChild(r[n]),o&&this.$node.querySelector("lyte-tab-body").removeChild(o);break}return this.getMethods("onDelete")&&this.executeMethod("onDelete",e,this.$node,t),!0}},enableTab:function(e){if(e){if("string"==typeof e)for(var t=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),a=0;a<t.length;a++)if(t[a].getAttribute("lt-prop-id")===e){t[a].classList.contains("lyteTabDisable")&&(t[a].classList.remove("lyteTabDisable"),t[a].classList.contains("lyteTabForceHide")&&Lyte.arrayUtils(this.getData("menuLabels"),"push",this.getMenuLabel(t[a])));break}"object"==typeof e&&e.classList.contains("lyteTabDisable")&&(e.classList.remove("lyteTabDisable"),e.classList.contains("lyteTabForceHide")&&Lyte.arrayUtils(this.getData("menuLabels"),"push",this.getMenuLabel(e)))}},disableTab:function(e){if(e){if("string"==typeof e)for(var t=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),a=0;a<t.length;a++)if(t[a].getAttribute("lt-prop-id")===e){t[a].classList.contains("lyteTabDisable")||(t[a].classList.add("lyteTabDisable"),t[a].classList.contains("lyteTabForceHide")&&-1!=(o=this.getData("menuLabels").indexOf(this.getMenuLabel(t[a])))&&Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",o,1));break}var o;"object"!=typeof e||e.classList.contains("lyteTabDisable")||(e.classList.add("lyteTabDisable"),e.classList.contains("lyteTabForceHide")&&-1!=(o=this.getData("menuLabels").indexOf(this.getMenuLabel(e)))&&Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",o,1))}},openTabContent:function(e,t){if(e){var a;if("string"==typeof e)for(var o=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),i=this.$node.querySelector("#"+e),r=this,n=function(){r.hideAll(),a.classList.add(r.getData("ltPropActiveClass")),i&&(i.classList.remove("lyteTabHide"),i.classList.add("lyteTabShow")),r.setData("ltPropCurrentTab",{index:s,name:a.textContent.trim()}),r.executeOnOpen(a,e,t),r.setData("prevTarget",a)},s=0;s<o.length;s++)if(o[s].getAttribute("lt-prop-id")===e){if(o[s].classList.contains(this.getData("ltPropActiveClass")))return;if(a=o[s],!(l=this.executeOnBeforeOpen(a,e,this.getData("prevTarget")?this.getData("prevTarget").getAttribute("lt-prop-id"):null,t)))return;l&&l.then?l.then(n):n();break}if("object"==typeof e){if(e.classList.contains(this.getData("ltPropActiveClass")))return;a=e;var l,d=e.getAttribute("lt-prop-id");if(i=this.$node.querySelector("#"+d),!(l=this.executeOnBeforeOpen(e,d,this.getData("prevTarget")?this.getData("prevTarget").getAttribute("lt-prop-id"):null,t)))return;if(l&&l.then)r=this,l.then((function(){r.hideAll(),e.classList.add(r.getData("ltPropActiveClass")),i&&(i.classList.remove("lyteTabHide"),i.classList.add("lyteTabShow"));for(var o,n=r.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),s=0;s<n.length;s++)if(n[s].isEqualNode(a)&&n[s].getAttribute("lt-prop-id")===d){o=s;break}r.setData("ltPropCurrentTab",{index:o,name:a.textContent.trim()}),r.executeOnOpen(e,d,t),r.setData("prevTarget",e)}));else{var p;for(this.hideAll(),e.classList.add(this.getData("ltPropActiveClass")),i&&(i.classList.remove("lyteTabHide"),i.classList.add("lyteTabShow")),o=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),s=0;s<o.length;s++)if(o[s].isEqualNode(a)&&o[s].getAttribute("lt-prop-id")===d){p=s;break}this.setData("ltPropCurrentTab",{index:p,name:a.textContent.trim()}),this.executeOnOpen(e,d,t),this.setData("prevTarget",e)}}"collapse"==this.getData("ltPropType")&&this.getData("menuLabels").indexOf(this.getMenuLabel(a))>-1&&this.collapseHeader(!0),$L(a).attr("tabindex",0),$L(a).attr("aria-selected","true")}},checkCloseIcon:function(e){this.getData("ltPropCloseIcon")&&(e=e||this.$node.querySelector("lyte-tab-head"),this.createCloseIcon(e.querySelectorAll("lyte-tab-title")))},createCloseIcon:function(e){for(var t=0;t<e.length;t++)if(!e[t].addedCloseIcon){var a=document.createElement("span");a.classList.add("lyteTabCloseIcon"),e[t].appendChild(a),e[t].addedCloseIcon=!0}},setPosition:function(e){switch(e.pos){case"left":this.$node.classList.add("lyteTabDefaultLeft");break;case"right":this.$node.classList.add("lyteTabDefaultRight");break;case"top":this.$node.classList.add("lyteTabDefaultTop");break;case"bottom":this.$node.classList.add("lyteTabDefaultBottom")}},checkHeightOnResize:function(){this.$node.getBoundingClientRect().height!=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height+this.$node.querySelector("lyte-tab-body").getBoundingClientRect().height&&this.setHeight(this.getData("ltPropPosition"))},setHeight:function(e){"auto"==this.getData("ltPropHeight")?("left"!==e.pos&&"right"!==e.pos||(this.$node.querySelector(".lyteTabNav").style.height="auto",this.$node.querySelector("lyte-tab-body").style.height="auto"),"top"!==e.pos&&"bottom"!==e.pos||(this.$node.querySelector("lyte-tab-body").style.height="auto"),this.makeAlignment(this.getData("ltPropPosition"))):$L.fastdom.measure((function(){var t=window.getComputedStyle(this.$node),a=(t.borderTop?parseFloat(t.borderTop):0)+(t.borderBottom?parseFloat(t.borderBottom):0),o=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height,i=parseInt(t.height)-a;$L.fastdom.mutate((function(){"left"!==e.pos&&"right"!==e.pos||(this.$node.querySelector(".lyteTabNav").style.height=i+"px",this.$node.querySelector("lyte-tab-body").style.height=i+"px"),"top"!==e.pos&&"bottom"!==e.pos||(this.$node.querySelector("lyte-tab-body").style.height=i-o+"px"),this.makeAlignment(this.getData("ltPropPosition"))}),this)}),this)},hideAll:function(){for(var e=this.getHeader(this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title")),t=this.getContent($L("lyte-tab-content",this.$node.querySelector("lyte-tab-body"))),a=this.getData("ltPropActiveClass"),o=0;o<e.length;o++)e[o].classList.contains(a)&&(e[o].setAttribute("aria-selected",!1),e[o].classList.remove(a));for(var i=0;i<t.length;i++)t[i].classList.contains("lyteTabShow")&&(t[i].classList.remove("lyteTabShow"),t[i].classList.add("lyteTabHide")),t[i].classList.contains("lyteTabHide")||t[i].classList.add("lyteTabHide"),$L(t[i]).hasClass("lyteTabHide")||$L(t[i]).addClass("lyteTabHide")},customizeTitleTab:function(e){$L.fastdom.measure((function(){var t=this.$node.querySelector("lyte-tab-head"),a=this.getWidth(t,!1);if("top"===e||"bottom"===e){var o=0,i=0,r=t.querySelectorAll("lyte-tab-title");"collapse"==this.getData("ltPropType")&&$L.fastdom.measure((function(){for(var e=0;e<r.length;e++)o+=this.getWidth(r[e],!0,!0);o>a&&this.collapseHeader()}),this)}"afterDelete"===e&&(r=t.querySelectorAll("lyte-tab-title"),i=a/r.length,$L.fastdom.mutate((function(){for(var e=0;e<r.length;e++)r[e].style.width=i+"px"})))}),this)},collapseHeader:function(e){var t=this.$node.querySelector("lyte-tab-head"),a=this.getWidth(t,!1),o=t.offsetHeight,i=-1!=this.getData("ltPropMaxWidth").indexOf("%")?parseInt(this.getData("ltPropMaxWidth"))*a/100:parseFloat(this.getData("ltPropMaxWidth")),r=t.querySelectorAll("lyte-tab-title"),n=0,s=-1,l=this,d=Array.from(r).findIndex((function(e){return e.classList.contains(l.getData("ltPropActiveClass"))})),p=[];if(e)for(var c=0;c<r.length;c++)r[c].classList.contains("lyteTabForceHide")&&r[c].classList.remove("lyteTabForceHide");for(n+=this.getWidth(r[d],!0,!0),c=0;c<r.length;c++)if(c!=d&&(n+=this.getWidth(r[c],!0,!0))>i){s=c;break}if(s>-1&&s<r.length){for(c=s;c<r.length;c++)c==d?d>0&&!r[c-1].classList.contains("lyteTabForceHide")&&($L(r[c-1]).addClass("lyteTabForceHide"),$L(r[c-1]).hasClass("lyteTabDisable")||p.push(this.getMenuLabel(r[c-1]))):($L(r[c]).addClass("lyteTabForceHide"),$L(r[c]).hasClass("lyteTabDisable")||p.push(this.getMenuLabel(r[c])));if(this.$node.querySelector("#lyteTabMenu"))Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",0,this.getData("menuLabels").length),Lyte.arrayUtils(this.getData("menuLabels"),"push",p);else{var h=document.createElement("span");h.id="moreMenu";var u=this.createUniqueSlector();h.classList.add(u),h.appendChild(document.createElement("span")),t.appendChild(h),this.createMenu(p,u,"init"),e||"bottom"===this.getData("ltPropPosition").pos&&(t.style.top=t.offsetTop+(Math.ceil(o/2)-1)+"px")}}else-1==s&&this.removeMenu()},createUniqueSlector:function(){for(var e=document.querySelectorAll("lyte-tabs"),t=0;t<e.length;t++)if(e[t].isEqualNode(this.$node))return"menuSel_"+t},getMenuLabel:function(e){var t=e.querySelector(".lyteTabTitleLabel");return t?t.textContent:e.textContent},createMenu:function(e,t,a){if("init"==a){var o=document.createElement("lyte-menu");o.id="lyteTabMenu",this.setData("menuLabels",e),o.ltProp({content:e,query:"."+t,event:"click",callout:!0}),this.getData("ltPropMenuWrapperClass")&&o.ltProp({wrapperClass:this.getData("ltPropMenuWrapperClass")}),o.setMethods({onMenuClick:function(e,t,a,o,i){for(var r,n=arguments[0],s=arguments[2].parentElement.component,l=arguments[3].parentElement.querySelectorAll("lyte-tab-title"),d=0;d<l.length;d++)if(s.getMenuLabel(l[d])==n&&l[d].classList.contains("lyteTabForceHide")){r=l[d];break}r&&(r.classList.remove("lyteTabForceHide"),s.openTabContent(r,t)),s.getMethods("onMenuClick")&&s.executeMethod("onMenuClick",e,t,a,o,i,s,r)},onBeforeOpen:function(e,t,a){var o=e.parentElement.component;o.getMethods("onBeforeMenuOpen")&&o.executeMethod("onBeforeMenuOpen",e,t,a,o)},onOpen:function(e,t,a){var o=e.parentElement.component;o.getMethods("onMenuOpen")&&o.executeMethod("onMenuOpen",e,t,a,o)},onBeforeClose:function(e,t){var a=e.parentElement.component;a.getMethods("onBeforeMenuClose")&&a.executeMethod("onBeforeMenuClose",e,t,a)},onClose:function(e,t){var a=e.parentElement.component;a.getMethods("onMenuClose")&&a.executeMethod("onMenuClose",e,t,a)},beforeRender:function(e){var t=e.parentElement.component;t.getMethods("onBeforeMenuRender")&&t.executeMethod("onBeforeMenuRender",e,t)},afterRender:function(e){var t=e.parentElement.component;t.getMethods("onAfterMenuRender")&&t.executeMethod("onAfterMenuRender",e,t)}}),this.$node.appendChild(o)}},removeMenu:function(){var e=this.$node.querySelector("#lyteTabMenu");e&&(e.remove(),this.$node.querySelector("#moreMenu").remove()),this.setData("menuLabels",[])},onMenuLabelChange:function(){this.$node.querySelector("lyte-menu").ltProp({content:this.getData("menuLabels")})},makeAlignment:function(e){var t=this.$node.querySelector("lyte-tab-head");"left"!=e.align&&"top"!=e.align||t.classList.add("lyteTabAlignStart"),"right"!=e.align&&"bottom"!=e.align||("collapse"!=this.getData("ltPropType")||"top"!=e.pos&&"bottom"!=e.pos?t.classList.add("lyteTabAlignEnd"):t.classList.add("lyteTabRightCollapse")),"center"==e.align&&t.classList.add("lyteTabAlignCenter")},executeOnBeforeOpen:function(e,t,a,o,i){var r;return this.getData("ltPropFireOnInit")?this.getMethods("onBeforeOpen")&&(r=this.executeMethod("onBeforeOpen",this.$node.querySelector("#"+t),this.$node.querySelector("#"+a),this,e,this.getData("prevTarget")?this.getData("prevTarget"):null,o)):this.getMethods("onBeforeOpen")&&!i&&(r=this.executeMethod("onBeforeOpen",this.$node.querySelector("#"+t),this.$node.querySelector("#"+a),this,e,this.getData("prevTarget")?this.getData("prevTarget"):null,o)),void 0===r||r},executeOnOpen:function(e,t,a,o){this.getData("ltPropFireOnInit")?this.getMethods("onOpen")&&this.executeMethod("onOpen",this.$node.querySelector("#"+t),this,e,a):this.getMethods("onOpen")&&!o&&this.executeMethod("onOpen",this.$node.querySelector("#"+t),this,e,a),_lyteUiUtils.dispatchEvent("lytetabopen",this.$node,{content:this.$node.querySelector("#"+t),component:this,tab:e})},generateId:function(e){for(;-1!==e.indexOf(" ");)e=e.replace(" ","_");return e},getWidth:function(e,t,a){if(t=null==t||t,e){var o=getComputedStyle(e),i=parseInt(o.paddingLeft)+parseInt(o.paddingRight),r=0;return a&&(r=parseInt(o.marginLeft)+parseInt(o.marginRight)),parseFloat(o.width)+(t?0:-i)+r}return 0}}),_lyteUiUtils.registeredCustomElements["lyte-tab-title"]||(_lyteUiUtils.registeredCustomElements["lyte-tab-title"]=!0,Lyte.createCustomElement("lyte-tab-title",{static:{},connectedCallback:function(){$L(this).attr("role","tab"),$L(this).attr("tabindex",-1),$L(this).attr("aria-selected","false");var e=this.closest("lyte-tabs");e&&e.component&&"collapse"==e.getData("ltPropType")&&(e.checkTabs?(clearTimeout(e.checkTabs),e.checkTabs=!1):this.closest("lyte-tab-head").classList.add("lyteTabVH"),e.checkTabs=setTimeout(function(){var t=this.closest("lyte-tabs");if(t){for(var a=t.component,o=this.parentElement,i=a.getWidth(o,!1),r=-1!=a.getData("ltPropMaxWidth").indexOf("%")?parseInt(a.getData("ltPropMaxWidth"))*i/100:parseFloat(a.getData("ltPropMaxWidth")),n=0,s=o.querySelectorAll("lyte-tab-title"),l=-1,d=0;d<s.length;d++)n+=a.getWidth(s[d],!0,!0),s[d].classList.contains(a.getData("ltPropActiveClass"))&&(l=d);-1==l&&a.openTabContent(s[0],null),(n>i||n>r)&&"collapse"==a.$node.ltProp("type")&&a.collapseHeader(),this.closest("lyte-tab-head").classList.remove("lyteTabVH")}e.checkTabs=!1}.bind(this),100))},disconnectedCallback:function(){var e=this.closest("lyte-tabs");e&&e.checkTabs&&(clearTimeout(e.checkTabs),e.checkTabs=!1,this.closest("lyte-tab-head").classList.remove("lyteTabVH"))}})),_lyteUiUtils.registeredCustomElements["lyte-tab-content"]||(_lyteUiUtils.registeredCustomElements["lyte-tab-content"]=!0,Lyte.createCustomElement("lyte-tab-content",{static:{},connectedCallback:function(){$L(this).attr("role","tabpanel")}})),window.addEventListener("resize",(function(){window._lyteUiUtils.tabResizeTriggered&&(clearTimeout(window._lyteUiUtils.tabResizeTriggered),window._lyteUiUtils.tabResizeTriggered=!1),window._lyteUiUtils.tabResizeTriggered=setTimeout((function(){for(var e=document.querySelectorAll("lyte-tabs"),t=0;t<e.length;t++)e[t].component&&"collapse"==e[t].component.getData("ltPropType")&&e[t].component.collapseHeader(!0),e[t].component.checkHeightOnResize();window._lyteUiUtils.tabResizeTriggered=!1}),50)})),Lyte.Component.register("lyte-alert",{_template:'<template tag-name="lyte-alert" role="alert"> <template is="if" value="{{ltPropShowCopy}}"><template case="true"> <lyte-wormhole on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}" lt-prop-show="{{ltPropShow}}" lt-prop-focus-on-close="{{ltPropFocusOnClose}}"> <template is="registerYield" yield-name="lyte-content"> <div class="alertWrapper {{ltPropWrapperClass}}"> <div class="{{lyteUiConcatAlertClass(ltPropContentAlign,\'alertPopup\')}}"> <template is="if" value="{{ltPropShowCloseButton}}"><template case="true"> <span class="lyte-svg alertClose" onclick="{{action(\'closeAlert\')}}" tabindex="0"></span> </template></template> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="alert"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(lyteUiIfEquals(ltPropHeading,\'\'),\'!\')}}"><template case="true"> <div class="alertHeader"> <span class="dBlock">{{ltPropHeading}}</span> </div> </template></template> <div class="alertContent"> <template is="if" value="{{expHandlers(lyteUiIfEquals(ltPropType,\'\'),\'!\')}}"><template case="true"> <div class="alertContentMiddle"> <span class="{{lyteUiConcatTypeClass(ltPropType,\'AlertIcon\',\'lyteStatusIcon\')}}"></span> </div> </template></template> <div class="alertContentMiddle"> <template is="if" value="{{expHandlers(lyteUiIfEquals(ltPropPrimaryMessage,\'\'),\'!\')}}"><template case="true"> <div> <span class="alertPrimaryMsg">{{ltPropPrimaryMessage}}</span> </div> </template></template> <template is="if" value="{{expHandlers(lyteUiIfEquals(ltPropSecondaryMessage,\'\'),\'!\')}}"><template case="true"> <div> <span class="alertSecondaryMsg">{{ltPropSecondaryMessage}}</span> </div> </template></template> </div> <div class="clearFloat"></div> </div> </template></template> <template is="if" value="{{nonYieldFooter}}"><template case="true"> <template is="if" value="{{expHandlers(lyteUiIsEmptyArray(ltPropButtons),\'!\')}}"><template case="true"> <div class="{{lyteUiConcat(\'alertFooter \',ltPropButtonPosition)}}"> <template is="for" items="{{ltPropButtons}}" item="item" index="index"> {{log(ltPropButtons.type)}} <template is="if" value="{{lyteUiIfEquals(item.type,\'accept\')}}"><template case="true"> <lyte-button class="lyteAlertBtn" onclick="{{action(\'accept\',item.text)}}"> <template is="registerYield" yield-name="text">{{item.text}}</template> </lyte-button> </template></template><template is="if" value="{{lyteUiIfEquals(item.type,\'reject\')}}"><template case="true"> <lyte-button class="lyteAlertBtn" onclick="{{action(\'reject\',item.text)}}"> <template is="registerYield" yield-name="text">{{item.text}}</template> </lyte-button> </template></template> </template> </div> </template></template> </template></template> </div> <div class="{{lyteUiAddShowClass(ltPropShowCopy,\'\',\'alertFreezeLayer\')}}"></div> </div> </template> </lyte-wormhole> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]}]}},default:{}},{type:"attr",position:[3,3,1]},{type:"if",position:[3,3,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}},{type:"attr",position:[3,3,3]},{type:"if",position:[3,3,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["ltPropType","ltPropShow","ltPropWrapperClass","ltPropAllowMultiple","ltPropHeading","ltPropPrimaryMessage","ltPropSecondaryMessage","ltPropTop","ltPropButtons","ltPropButtonPosition","ltPropShowCloseButton","ltPropCloseOnEscape","ltPropDimmer","ltPropYield","ltPropAnimation","ltPropContentAlign","ltPropAria","ltPropAriaAttributes","ltPropPreventFocus","ltPropFocusOnClose","nonYieldFooter","triggerShow","escClicked"],data:function(){return{ltPropType:Lyte.attr("string",{default:""}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropAllowMultiple:Lyte.attr("boolean",{default:!1}),ltPropHeading:Lyte.attr("string",{default:""}),ltPropPrimaryMessage:Lyte.attr("string",{default:""}),ltPropSecondaryMessage:Lyte.attr("string",{default:""}),ltPropTop:Lyte.attr("string",{default:"40px"}),ltPropButtons:Lyte.attr("array",{default:[]}),ltPropButtonPosition:Lyte.attr("string",{default:"right"}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),ltPropDimmer:Lyte.attr("object",{default:{color:"black",opacity:"0.4"}}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAnimation:Lyte.attr("string",{default:"slideDown"}),ltPropContentAlign:Lyte.attr("string",{default:"left"}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{},watch:!0}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),ltPropFocusOnClose:Lyte.attr("boolean",{default:!1}),nonYieldFooter:Lyte.attr("boolean",{default:!0}),triggerShow:Lyte.attr("number",{default:0}),escClicked:Lyte.attr("object",{default:{}})}},didConnect:function(){this.$node.ltProp("show")&&this.setData("triggerShow",this.getData("triggerShow")+1)},addAriaValues:function(){if(this.getData("ltPropAria")){var e=this.getData("ltPropAriaAttributes")||{};if("aria-labelledby"in e){var t=this.getAlertWidget("header");t&&t.classList.add(e["aria-labelledby"])}if("aria-describedby"in e){var a=this.getAlertWidget("content");a&&a.classList.add(e["aria-describedby"])}_lyteUiUtils.setAttribute(this.getAlertWidget(),e,{});var o=this.getAlertWidget("close");o&&o.setAttribute("aria-label",e["close-label"]||"Close icon at top right position")}},getAlertWidget:function(e){return"header"===e?this.getData("ltPropYield")?this.childComp.querySelector("lyte-alert-header"):this.childComp.querySelector(".alertHeader"):"content"===e?this.getData("ltPropYield")?this.childComp.querySelector("lyte-alert-content"):this.childComp.querySelector(".alertContentMiddle"):"close"===e?this.childComp.querySelector(".alertClose"):this.childComp.querySelector(".alertPopup")},showToggled:function(){var e=!0;if(this.$node.ltProp("show")||this.getMethods("onBeforeClose")&&(e=this.executeMethod("onBeforeClose",this,this.getData("escClicked"))),!1!==e)if(this.$node.ltProp("show")){this.closeTId&&(clearTimeout(this.closeTId),delete this.closeTId),this.sId&&(clearTimeout(this.sId),delete this.sId,this.setData("ltPropShowCopy",!1),delete this.sId,delete this.actualModalDiv,delete this.childComp);var t=this;this.openTId=setTimeout((function(){delete t.openTId,document.body.classList.add("bodyWrapper"),t.showAlert()}),0)}else this.openTId&&(clearTimeout(this.openTId),delete this.openTId),this.showTId&&(clearTimeout(this.showTId),delete this.showTId),t=this,this.closeTId=setTimeout((function(){delete t.closeTId,t.closeAlert()}),0);else this.setData("ltPropShow",!0)}.observes("ltPropShow","triggerShow"),printId:function(){console.log("this.openTId ---\x3e "+this.openTId),console.log("this.showTId ---\x3e "+this.showTId),console.log("this.closeTId ---\x3e "+this.closeTId),console.log("this.sId ---\x3e "+this.sId)},closeAlertFn:function(){this.getMethods("onClose")&&(this.executeMethod("onClose",this,this.getData("escClicked")),this.setData("escClicked",{}))},showAlert:function(){var e=this;if(this.showTId=setTimeout((function(){if(delete e.showTId,e.actualModalDiv){if(_lyteUiUtils.dispatchEvent("lyteAlertBeforeOpened",e.actualModalDiv),LytePopup.bindTransitionEnd(e.actualModalDiv),"center"==e.getData("ltPropTop")){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);e.actualModalDiv.style.top=(t-e.actualModalDiv.getBoundingClientRect().height)/2+"px"}else e.actualModalDiv.style.top=e.getData("ltPropTop");"zoomIn"==e.getData("ltPropAnimation")&&e.actualModalDiv.classList.add("alertOpened"),e.$node.classList.add("lyteAlertOpened"),e.getMethods("onShow")&&e.executeMethod("onShow",e),setTimeout((function(){_lyteUiUtils.dispatchEvent("lyteAlertOpened",e.actualModalDiv)}),310)}else e.getData("ltPropShow")&&e.setData("ltPropShow",!1)}),100),this.setData("ltPropShowCopy",!0),this.addAriaValues(),"slideDown"==this.getData("ltPropAnimation")?this.actualModalDiv.classList.add("lyteAlertSlideDown"):"zoomIn"==this.getData("ltPropAnimation")&&this.actualModalDiv.classList.add("lyteAlertZoomIn"),this.getData("ltPropButtons")&&this.getData("nonYieldFooter")){for(var t,a=this.getData("ltPropButtons"),o=0;o<a.length;o++){t=this.actualModalDiv.querySelectorAll(".lyteAlertBtn")[o];for(var i=Object.keys(a[o]),r=0;r<i.length;r++)"text"!==i[r]&&t.ltProp(i[r],a[o][i[r]])}t=null}LytePopup.addPopup(this);var n=this.childComp.querySelector(".alertFreezeLayer").style;n.background=this.getData("ltPropDimmer").color,this.addedFreezeDetails||(n.opacity=this.getData("ltPropDimmer").opacity)},closeAlert:function(){if(this.childComp&&this.actualModalDiv){this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),"slideDown"==this.getData("ltPropAnimation")&&(this.actualModalDiv.style.top="-"+(this.actualModalDiv.getBoundingClientRect().height+this.actualModalDiv.getBoundingClientRect().top+40)+"px");var e=1e3*parseFloat(document.defaultView.getComputedStyle(this.actualModalDiv).getPropertyValue("transition-duration"));"zoomIn"==this.getData("ltPropAnimation")&&this.actualModalDiv.classList.remove("alertOpened");var t=this;this.sId=setTimeout((function(){t.setData("ltPropShowCopy",!1),delete t.sId,delete t.actualModalDiv,delete t.childComp,LytePopup.checkAndRemoveWrapper()}),e-100),this.closeAlertFn(),LytePopup.closePopup(this),this.addedFreezeDetails&&(this.childComp.querySelector(".alertFreezeLayer").style.opacity=0,this.childComp.querySelector(".alertFreezeLayer").style.visibility="")}else LytePopup.closePopup(this);this.$node.classList.remove("lyteAlertOpened")},didDestroy:function(){this.$node.classList.remove("lyteAlertOpened"),this.openTId&&(clearTimeout(this.openTId),delete this.openTId),this.showTId&&(clearTimeout(this.showTId),delete this.showTId),this.closeTId&&(clearTimeout(this.closeTId),delete this.closeTId),this.sId&&(clearTimeout(this.sId),delete this.sId),this.childComp&&(this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.childComp.remove(),delete this.actualModalDiv,delete this.childComp,LytePopup.checkAndRemoveWrapper())},actions:{closeAlert:function(){this.$node.ltProp("show",!1)},accept:function(e){var t=!0;this.getMethods("onAccept")&&(t=null==(t=this.executeMethod("onAccept",e,this))||t),t&&this.$node.ltProp("show",!1)},reject:function(e){var t=!0;this.getMethods("onReject")&&(t=null==(t=this.executeMethod("onReject",e,this))||t),t&&this.$node.ltProp("show",!1)}},methods:{beforeWormholeAppend:function(e){this.childComp=e,this.actualModalDiv=this.childComp.querySelector(".alertPopup"),this.getData("ltPropYield")&&e.querySelector("lyte-alert-footer")?this.setData("nonYieldFooter",!1):this.setData("nonYieldFooter",!0),this.getData("nonYieldFooter")&&0==this.getData("ltPropButtons").length&&("confirm"==this.getData("ltPropType")?this.setData("ltPropButtons",[{type:"accept",text:"Ok"},{type:"reject",text:"Cancel"}]):this.setData("ltPropButtons",[{type:"accept",text:"Ok"}]))}}}),Lyte.Component.register("lyte-wormhole",{_template:'<template tag-name="lyte-wormhole"> <lyte-yield yield-name="lyte-content"></lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["ltPropQuery","ltPropAppendOnCreation","ltPropAppend","ltPropShow","ltPropFocusOnClose"],data:function(){return{ltPropQuery:Lyte.attr("string"),ltPropAppendOnCreation:Lyte.attr("boolean",{default:!0}),ltPropAppend:Lyte.attr("boolean",{default:!1}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropFocusOnClose:Lyte.attr("boolean",{default:!1})}},didDestroy:function(){this.parent=null,_lyteUiUtils.popupStack=null},initFunc:function(){_lyteUiUtils.popupStack||(_lyteUiUtils.popupStack={globalStack:[],modalStack:[],newModalStack:[],popoverStack:[],alertStack:[],messageboxStack:[]});let e,t={};if(this.parent?t.parentElement=this.parent:t.parentElement=this.$node.parentElement,t.focusedElement=document.activeElement,this.$node.getData("ltPropShow"))Lyte.arrayUtils(_lyteUiUtils.popupStack.globalStack,"push",t),t.parentElement&&"LYTE-MODAL"==t.parentElement.tagName&&Lyte.arrayUtils(_lyteUiUtils.popupStack.modalStack,"push",t),t.parentElement&&"LYTE-NEW-MODAL"==t.parentElement.tagName?Lyte.arrayUtils(_lyteUiUtils.popupStack.newModalStack,"push",t):t.parentElement&&"LYTE-POPOVER"==t.parentElement.tagName?Lyte.arrayUtils(_lyteUiUtils.popupStack.popoverStack,"push",t):t.parentElement&&"LYTE-ALERT"==t.parentElement.tagName?Lyte.arrayUtils(_lyteUiUtils.popupStack.alertStack,"push",t):t.parentElement&&"LYTE-MESSAGEBOX"==t.parentElement.tagName&&Lyte.arrayUtils(_lyteUiUtils.popupStack.messageboxStack,"push",t);else if(_lyteUiUtils.popupStack.globalStack.length>=1){t.parentElement&&"LYTE-MODAL"==t.parentElement.tagName&&_lyteUiUtils.popupStack.modalStack.length>=1&&_lyteUiUtils.popupStack.modalStack.forEach(function(e,a){e.parentElement!=t.parentElement||Lyte.arrayUtils(_lyteUiUtils.popupStack.modalStack,"removeAt",a,1)}.bind(this)),t.parentElement&&"LYTE-NEW-MODAL"==t.parentElement.tagName&&_lyteUiUtils.popupStack.newModalStack.length>=1?_lyteUiUtils.popupStack.newModalStack.forEach(function(e,a){e.parentElement!=t.parentElement||Lyte.arrayUtils(_lyteUiUtils.popupStack.newModalStack,"removeAt",a,1)}.bind(this)):t.parentElement&&"LYTE-POPOVER"==t.parentElement.tagName&&_lyteUiUtils.popupStack.popoverStack.length>=1?_lyteUiUtils.popupStack.popoverStack.forEach(function(e,a){e.parentElement!=t.parentElement||Lyte.arrayUtils(_lyteUiUtils.popupStack.popoverStack,"removeAt",a,1)}.bind(this)):t.parentElement&&"LYTE-ALERT"==t.parentElement.tagName&&_lyteUiUtils.popupStack.alertStack.length>=1?_lyteUiUtils.popupStack.alertStack.forEach(function(e,a){e.parentElement!=t.parentElement||Lyte.arrayUtils(_lyteUiUtils.popupStack.alertStack,"removeAt",a,1)}.bind(this)):t.parentElement&&"LYTE-MESSAGEBOX"==t.parentElement.tagName&&_lyteUiUtils.popupStack.messageboxStack.length>=1&&_lyteUiUtils.popupStack.messageboxStack.forEach(function(e,a){e.parentElement!=t.parentElement||Lyte.arrayUtils(_lyteUiUtils.popupStack.messageboxStack,"removeAt",a,1)}.bind(this));var a,o=!0;_lyteUiUtils.popupStack.globalStack.forEach(function(e,i){if(e.parentElement==t.parentElement)return i<_lyteUiUtils.popupStack.globalStack.length-1&&(o=!1,_lyteUiUtils.popupStack.globalStack[i+1].focusedElement=_lyteUiUtils.popupStack.globalStack[i].focusedElement),void(a=Lyte.arrayUtils(_lyteUiUtils.popupStack.globalStack,"removeAt",i,1))}.bind(this)),a&&a[0]&&(e=a[0].focusedElement),o&&e&&this.getData("ltPropFocusOnClose")&&e.focus()}}.observes("ltPropQuery","ltPropShow").on("init"),didConnectFunc:function(){this.getData("ltPropAppendOnCreation")&&this.$node.ltProp("append",!0)}.observes("ltPropQuery").on("didConnect"),appendObserver:function(){this.getData("ltPropAppend")?this.appendContent():this.bringContentBack()}.observes("ltPropAppend"),appendContent:function(){var e=this.data.ltPropQuery?document.querySelector(this.data.ltPropQuery):document.body;e?this.getMethods("onBeforeAppend")&&0==this.executeMethod("onBeforeAppend",this.$node,e)||(this.parent=this.$node.parentElement,_lyteUiUtils.appendChild(e,this.$node),this.appended=!0,this.getMethods("onAppend")&&this.executeMethod("onAppend",this.$node,e)):console.error("Provide valid outlet to append")},bringContentBack:function(){_lyteUiUtils.appendChild(this.parent,this.$node)}}),Lyte.Component.register("lyte-modal",{_template:'<template tag-name="lyte-modal" role="dialog" aria-label="lyte modal"> <template is="if" value="{{expHandlers(ltPropBindToBody,\'&amp;&amp;\',expHandlers(ltPropReRenderModal,\'!\'))}}"><template case="true"> <lyte-wormhole case="true" style="{{if(ltPropShowCopy,\'visibility:visible\',\'visibility:hidden\')}}" lt-prop-focus-on-close="{{ltPropFocusOnClose}}" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}" lt-prop-show="{{ltPropShowWormhole}}"> <template is="registerYield" yield-name="lyte-content"> <div class="modalWrapper {{ltPropWrapperClass}}"> <div class="lyteModal"> <template is="if" value="{{ltPropShowCloseButton}}"> <template case="true"><span class="lyteModalClose" onclick="{{action(\'close\')}}" tabindex="0"></span></template> </template> <lyte-yield yield-name="modal"></lyte-yield> </div> <template is="if" value="{{ltPropFreeze}}"> <template case="true"><lyte-modal-freeze></lyte-modal-freeze></template> </template> </div> </template> </lyte-wormhole> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropShowCopy","'visibility:visible'","'visibility:hidden'"]}}}},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"insertYield",position:[1,1,3]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["ltPropShow","ltPropFreeze","ltPropShowCloseButton","ltPropCloseOnEscape","ltPropTransition","ltPropOffset","ltPropDimmer","ltPropDraggable","ltPropAllowMultiple","ltPropScrollable","ltPropMaxHeight","ltPropMaxWidth","ltPropWidth","ltPropHeight","ltPropWrapperClass","ltPropBindToBody","ltPropShowCopy","ltPropReRenderModal","ltPropOverlayClose","ltPropAria","ltPropAriaAttributes","ltPropPreventFocus","ltPropSetContentHeight","ltPropCloseDuration","ltPropOverlapModal","ltPropIgnoreInlineDirection","ltPropAllowContainment","ltPropFocusOnClose","ltPropDependentModalId","ltPropParentModalId","ltPropFocusOnClose","ltPropShowWormhole","first","resizeCalled","initializedPosition","prevHeight","returnedFalse","prevModalHeight","prevModalWidth","calculateHW","checkAria","beforeDragPosition","resetTriggered"],data:function(){return{ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),ltPropTransition:Lyte.attr("object",{default:{animation:"slideFromTop",duration:"0.5"}}),ltPropOffset:Lyte.attr("object",{default:{top:"center",left:"center"}}),ltPropDimmer:Lyte.attr("object"),ltPropDraggable:Lyte.attr("boolean",{default:!1}),ltPropAllowMultiple:Lyte.attr("boolean",{default:!1}),ltPropScrollable:Lyte.attr("boolean",{default:!1}),ltPropMaxHeight:Lyte.attr("string",{default:""}),ltPropMaxWidth:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropBindToBody:Lyte.attr("boolean",{default:!1}),ltPropShowCopy:Lyte.attr("boolean",{default:!1}),ltPropReRenderModal:Lyte.attr("boolean",{default:!1}),ltPropOverlayClose:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),ltPropSetContentHeight:Lyte.attr("boolean",{default:!1}),ltPropCloseDuration:Lyte.attr("number",{default:void 0}),ltPropOverlapModal:Lyte.attr("boolean",{default:!0}),ltPropIgnoreInlineDirection:Lyte.attr("boolean",{default:!1}),ltPropAllowContainment:Lyte.attr("boolean",{default:!1}),ltPropFocusOnClose:Lyte.attr("boolean",{default:!0}),ltPropDependentModalId:Lyte.attr("string",{default:""}),ltPropParentModalId:Lyte.attr("string",{default:""}),ltPropFocusOnClose:Lyte.attr("boolean",{default:!1}),ltPropShowWormhole:Lyte.attr("boolean",{default:!1}),first:Lyte.attr("boolean",{default:!0}),resizeCalled:Lyte.attr("boolean",{default:!1}),initializedPosition:Lyte.attr("boolean",{default:!1}),prevHeight:Lyte.attr("number"),returnedFalse:Lyte.attr("boolean",{default:!1}),prevModalHeight:Lyte.attr("number"),prevModalWidth:Lyte.attr("number"),calculateHW:Lyte.attr("boolean",{default:!1}),checkAria:Lyte.attr("number",{default:0}),beforeDragPosition:Lyte.attr("object",{default:{xPos:0,yPos:0}}),resetTriggered:Lyte.attr("boolean",{default:!1})}},addDragHandler:function(){var e=this.actualModalDiv.querySelector("lyte-modal-header");this.$node.ltProp("draggable")&&$L(e).addClass("lyteModalDragRunning"),e?(e.parentEle=this,this.$node.ltProp("draggable")?(e.addEventListener("mousedown",this.handleMove,!0),e.addEventListener("touchstart",this.handleMove,!0),e.classList.add("lyteModalHeaderDraggable")):(e.removeEventListener("mousedown",this.handleMove,!0),e.removeEventListener("touchstart",this.handleMove,!0),e.classList.remove("lyteModalHeaderDraggable"))):(console.warn("This modal is not draggable because it has no header"),this.$node.ltProp("draggable",!1))},handleMove:function(e){if(2!==e.button){var t,a=e.currentTarget.parentEle.actualModalDiv;LytePopup.node=a,"mousedown"==e.type&&(t={x:e.clientX,y:e.clientY}),"touchstart"==e.type&&(t={x:e.touches[0].clientX,y:e.touches[0].clientY}),"fadeIn"==e.currentTarget.parentEle.getData("ltPropTransition").animation?(LytePopup.xPos=t.x-this.getBoundingClientRect().left,LytePopup.yPos=t.y-this.getBoundingClientRect().top):(LytePopup.xPos=t.x,LytePopup.yPos=t.y),a.getBoundingClientRect(),a.style.transitionDuration="0s",(e.type="mousedown")&&(window.addEventListener("mousemove",e.currentTarget.parentEle.handleDrag,!0),window.addEventListener("mouseup",e.currentTarget.parentEle.stopDrag,!0)),(e.type="touchstart")&&(document.body.addEventListener("touchmove",e.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("touchend",e.currentTarget.parentEle.stopDrag,!0))}},handleDrag:function(e){var t=LytePopup.node,a=$L(t).closest("lyte-wormhole")[0]._callee,o=t.getBoundingClientRect(),i=getComputedStyle(t);if(LytePopup.node){var r,n=0,s=0;if("mousemove"==e.type&&(r={x:e.clientX,y:e.clientY}),"touchmove"==e.type&&(r={x:e.touches[0].clientX,y:e.touches[0].clientY}),"fadeIn"==LytePopup.node.closest("lyte-wormhole")._callee.component.getData("ltPropTransition").animation)n=r.x-LytePopup.xPos,s=r.y-LytePopup.yPos,a.getData("ltPropAllowContainment")?(n+t.getBoundingClientRect().width<=window.innerWidth&&n>=0?t.style.left=n+"px":t.style.left=n<0?"0px":window.innerWidth-t.getBoundingClientRect().width+"px",s+t.getBoundingClientRect().height<=window.innerHeight&&s>=0?t.style.top=s+"px":t.style.top=s<0?"0px":window.innerHeight-t.getBoundingClientRect().height+"px"):(t.style.left=n+"px",t.style.top=s+"px");else{var l=LytePopup.node.closest("lyte-wormhole")._callee.component.transform;"zoom"!=LytePopup.node.closest("lyte-wormhole")._callee.component.getData("ltPropTransition").animation||l||((l={}).x=0,l.y=0);var d=l.x+(r.x-LytePopup.xPos),p=l.y+(r.y-LytePopup.yPos);t.style.transform="translate("+d+"px, "+p+"px)",o=t.getBoundingClientRect(),a.getData("ltPropAllowContainment")&&(o.left+o.width>window.innerWidth&&o.left>=0?d=window.innerWidth-o.width-parseFloat(i.left):o.left<0&&(d=-parseFloat(i.left)),o.top+o.height>window.innerHeight&&o.top>=0?p=window.innerHeight-o.height-parseFloat(i.top):o.top<0&&(p=-parseFloat(i.top)),t.style.transform="translate("+d+"px, "+p+"px)")}window.getSelection().removeAllRanges()}},stopDrag:function(e){var t=e.target;for($L(t).hasClass("lyteModalDragRunning")||(t=$L(".lyteModalDragRunning")[0]);t&&t!==document;){if(t.parentEle){"mouseup"==e.type&&(this.removeEventListener("mousemove",t.parentEle.handleDrag,!0),this.removeEventListener("mouseup",t.parentEle.stopDrag,!0)),"touchend"==e.type&&(this.removeEventListener("touchmove",t.parentEle.handleDrag,!0),this.removeEventListener("touchend",t.parentEle.stopDrag,!0));break}t=t.parentElement?t.parentElement:document}if(LytePopup.node){var a=LytePopup.node.closest("lyte-wormhole")._callee.component;if(LytePopup.node.style.transitionDuration=a.getData("ltPropTransition").duration,"fadeIn"!=a.getData("ltPropTransition").animation){var o=new WebKitCSSMatrix(window.getComputedStyle(a.actualModalDiv).transform);a.transform={x:o.m41,y:o.m42}}LytePopup.node=null}},showToggled:function(){var e=e||window.event;if(this.getData("returnedFalse"))this.setData("returnedFalse",!1);else if(this.$node.ltProp("reRenderModal")&&(this.$node.ltProp("show")&&(this.$node.ltProp({showCopy:!1,show:!1}),LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1)),this.$node.ltProp("reRenderModal",!1)),this.timeOutId&&(delete this.timeOutId,this.closeModal(),LytePopup.closePopup(this)),this.$node.ltProp("show")&&!this.$node.ltProp("showCopy")){if($L(this.childComp).removeClass("lyteModalHidden"),_lyteUiUtils.getRTL()&&!this.getData("ltPropIgnoreInlineDirection")){"slideFromLeft"==this.getData("ltPropTransition").animation?this.getData("ltPropTransition").animation="slideFromRight":"slideFromRight"==this.getData("ltPropTransition").animation&&(this.getData("ltPropTransition").animation="slideFromLeft");var t=this.getData("ltPropOffset"),a={};for(key in t)"left"==key&&"center"!=t[key]?a.right=t[key]:"right"==key?a.left=t[key]:a[key]=t[key];this.setData("ltPropOffset",a)}-1!=LytePopup.components.indexOf(this)&&(LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1)),this.$node.ltProp("bindToBody",!0),_lyteUiUtils.dispatchEvent("lyteModalBeforeOpen",this.actualModalDiv),this.setData("ltPropShowWormhole",!0);var o=this;this.beforeShowId=setTimeout((function(){delete o.beforeShowId,o.onBeforeShowHandling()}),0)}else this.transitionEndTimeout&&(clearTimeout(this.transitionEndTimeout),delete this.transitionEndTimeout),this.clearFastdomBatch(),this.$node.ltProp("showCopy")?(o=this,this.beforeCloseId=setTimeout((function(){delete o.beforeCloseId,o.onBeforeCloseHandling(e)}),0)):-1!=LytePopup.components.indexOf(this)&&(LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1))}.observes("ltPropShow","ltPropReRenderModal").on("didConnect"),clearFastdomBatch:function(){this.fastdomfn1&&$L.fastdom.clear(this.fastdomfn1),this.fastdomfn2&&$L.fastdom.clear(this.fastdomfn2),this.fastdomfn3&&$L.fastdom.clear(this.fastdomfn3),this.fastdomfn4&&$L.fastdom.clear(this.fastdomfn4),this.fastdomfn5&&$L.fastdom.clear(this.fastdomfn5),this.fastdomfn6&&$L.fastdom.clear(this.fastdomfn6),this.fastdomfn7&&$L.fastdom.clear(this.fastdomfn7),this.fastdomfn8&&$L.fastdom.clear(this.fastdomfn8),this.beforeShowId&&clearTimeout(this.beforeShowId)},triggerDraggable:function(){this.addDragHandler()}.observes("ltPropDraggable"),changeBindToBody:function(){this.getData("ltPropBindToBody")||(this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this,!0),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.renderSidewise&&(delete this.renderSidewise,delete this.renderProps),this.actualModalDiv=null,this.childComp=null,this.getData("ltPropShow")?this.setData({ltPropShowCopy:!1,ltPropShow:!1}):this.getData("ltPropShowCopy")&&this.setData("ltPropShowCopy",!1),this.setData("first",!0),this.setData("initializedPosition",!1),this.$node.classList.remove("lyteModalOpened"),LytePopup.checkAndRemoveWrapper())}.observes("ltPropBindToBody"),addAriaValues:function(e){if(this.getData("ltPropAria")){var t=this.getData("ltPropAriaAttributes")||{};$L(this.actualModalDiv).attr("aria-modal",!0),$L(this.actualModalDiv).attr("aria-expanded",this.getData("ltPropShow")),_lyteUiUtils.setAttribute(this.actualModalDiv,t,e?e.oldValue:{});var a=this.actualModalDiv.querySelector(".lyteModalClose");a&&a.setAttribute("aria-label",t["close-label"]||"Close icon at top right position")}}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","checkAria"),updateScrollHandling:function(){this.$node.ltProp("freeze")||this.setData("calculateHW",!0);var e,t,a,o=this.actualModalDiv,i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=o.querySelector("lyte-modal-content");o.style.maxWidth="",o.style.maxHeight="",o.style.height=this.$node.ltProp("height")?this.$node.ltProp("height"):"auto",o.style.width=this.$node.ltProp("width")?this.getData("ltPropOverlapModal")||-1==this.$node.ltProp("width").indexOf("%")?this.$node.ltProp("width"):parseFloat(this.$node.ltProp("width"))/100*i+"px":"auto",this.fastdomfn2=$L.fastdom.measure((function(){delete this.fastdomfn2;var i=o.getBoundingClientRect(),n=o.parentElement.getBoundingClientRect(),s=window.getComputedStyle(o),l=(s.borderTopWidth?parseFloat(s.borderTopWidth):0)+(s.borderBottomWidth?parseFloat(s.borderBottomWidth):0),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(this.getData("ltPropFreeze")?parseInt(window.getComputedStyle(o.parentElement).top):0);this.fastdomfn3=$L.fastdom.mutate((function(){if(delete this.fastdomfn3,this.$node.ltProp("maxWidth")?(a=-1!=this.$node.ltProp("maxWidth").indexOf("%")?parseFloat(this.$node.ltProp("maxWidth"))/100*n.width:parseFloat(this.$node.ltProp("maxWidth")),o.style.maxWidth=a+"px",o.style.overflowX="auto"):a=i.width,this.$node.ltProp("maxHeight")){this.childComp.querySelector(".modalWrapper").classList.add("scrollable"),this.setData("calculateHW",!0),e=i.height-l;var s=-1!=this.$node.ltProp("maxHeight").indexOf("%")?parseFloat(this.$node.ltProp("maxHeight"))/100*n.height:parseFloat(this.$node.ltProp("maxHeight"));o.style.maxHeight=s+"px",t=s-l}else e=o.offsetHeight-l+1,this.$node.ltProp("height")&&"auto"!=this.$node.ltProp("height")?(t=e,this.setData("calculateHW",!0)):t=e>d?d-40:e,this.$node.ltProp("scrollable")&&(this.$node.ltProp("height")&&"auto"!=this.$node.ltProp("height")||(t=d-40),this.setData("calculateHW",!0)),r&&r.offsetHeight>e-((this.actualModalDiv.querySelector("lyte-modal-header")?this.actualModalDiv.querySelector("lyte-modal-header").offsetHeight:0)+(this.actualModalDiv.querySelector("lyte-modal-footer")?this.actualModalDiv.querySelector("lyte-modal-footer").offsetHeight:0))&&this.setData("calculateHW",!0);if(this.getData("calculateHW")&&r){var p=this.actualModalDiv.querySelector("lyte-modal-header"),c=this.actualModalDiv.querySelector("lyte-modal-footer"),h=null,u=null;this.fastdomfn4=$L.fastdom.measure((function(){delete this.fastdomfn4,p&&(h=p.offsetHeight),c&&(u=c.offsetHeight);var e=o.getBoundingClientRect().height;this.setData("prevHeight",e),this.fastdomfn5=$L.fastdom.mutate((function(){delete this.fastdomfn5;var e=t-((h||0)+(u||0));r.style.maxHeight=(e>0?e:50)+0+"px",r.style.overflowY="auto","auto"!=this.$node.ltProp("height")&&this.getData("ltPropSetContentHeight")&&(r.style.height=e+"px"),o=null,r=null,p=null,c=null,this.getData("initializedPosition")?this.getData("resizeCalled")&&(this.computeOffsetImplOnResize(),this.setData("resizeCalled",!1)):(this.computeOffsetImpl(),this.setData("initializedPosition",!0))}),this)}),this)}else this.childComp.querySelector(".modalWrapper").classList.remove("scrollable"),o=null,r=null,this.getData("initializedPosition")?this.getData("resizeCalled")&&(this.computeOffsetImplOnResize(),this.setData("resizeCalled",!1)):(this.computeOffsetImpl(),this.setData("initializedPosition",!0));this.$node.ltProp("freeze")||(this.childComp.querySelector(".modalWrapper").classList.add("noFreeze"),this.renderSidewise||(this.actualModalDiv.style.position="fixed"))}),this)}),this)},scrollHandling:function(){this.getData("ltPropShow")&&this.updateScrollHandling()}.observes("ltPropWidth","ltPropMaxWidth","ltPropHeight","ltPropMaxHeight"),callOnShow:function(){this.$node.classList.add("lyteModalOpened");var e=this;setTimeout((function(){var t=window.getComputedStyle(e.actualModalDiv),a=new WebKitCSSMatrix(t.transform);e.setData("beforeDragPosition",{xPos:a.m41,yPos:a.m42,scale:a.a}),_lyteUiUtils.dispatchEvent("lyteModalOpened",e.actualModalDiv)}),1e3*parseFloat(this.getData("ltPropTransition").duration)+10),this.transitionEndTimeout=setTimeout((function(){e.getMethods("onTransitionEnd")&&e.executeMethod("onTransitionEnd",e)}),1e3*parseFloat(this.getData("ltPropTransition").duration)+10),this.getMethods("onShow")&&this.executeMethod("onShow",this),this.addAriaValues&&this.addAriaValues()},callOnResize:function(){var e=this.getData("ltPropDependentModalId");""!=e&&$L(e)[0].component.updateScrollHandling();var t=window.getComputedStyle(this.actualModalDiv),a=new WebKitCSSMatrix(t.transform);this.setData("beforeDragPosition",{xPos:a.m41,yPos:a.m42,scale:a.a}),this.getMethods("onResize")&&this.executeMethod("onResize",this)},enableTransform:function(e,t,a){this.$node.ltProp("showCopy",!0);var o=this;setTimeout((function(){"x"==t&&(o.actualModalDiv.style.transform="translate("+e+"px,0px)",o.transform={x:e,y:0}),"y"==t&&(o.actualModalDiv.style.transform="translate(0px,"+e+"px)",o.transform={x:0,y:e})}),null!=a?a:void 0)},computeOffsetImplOnResize:function(){$L.fastdom.measure((function(){var e,t,a=this.actualModalDiv,o=a.getBoundingClientRect(),i=window.getComputedStyle(a.parentElement),r=parseInt(i.top),n=parseInt(i.left),s=a.offsetTop,l=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-(this.getData("ltPropFreeze")?n:0),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(this.getData("ltPropFreeze")?r:0),p=this.getData("prevWinH"),c=this.getData("prevWinW"),h=this.transform,u=null,f=null,y=this.getData("ltPropOffset"),m=this.getData("prevModalHeight")-o.height,g=this.getData("prevModalWidth")-o.width;this.calculateForSidewiseRender(),a.offsetParent&&"BODY"===a.offsetParent.tagName&&(s=0),this.renderSidewise&&(this.renderProps.windowWidth=l,l="slideFromRight"==this.getData("ltPropTransition").animation?this.renderProps.left:this.renderProps.windowWidth-this.renderProps.right,e=this.childComp.querySelector("lyte-modal-freeze"),t=this.actualModalDiv.parentElement),"fadeIn"===this.getData("ltPropTransition").animation||"zoom"===this.getData("ltPropTransition").animation?(p=o.height,c=o.width,l<c&&(y.left&&"center"==y.left||y.right&&"center"==y.right?f=(c-l)/2:y.right?f=o.left-(c-l):y.left&&(f=o.left)),l>c&&(y.left&&"center"==y.left||y.right&&"center"==y.right?f=(l-c)/2:y.right?f=o.left+(l-c):y.left&&(f=o.left)),d<p&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?u=(d-o.height)/2:y.bottom?u=s-(p-d):y.top&&(u=s)),d>p&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?u=(d-o.height)/2:y.bottom&&"center"!=y.bottom?u=s+(d-p):y.top&&"center"!=y.top&&(u=s)),$L.fastdom.mutate((function(){u&&(a.style.top=u+"px"),f&&(a.style.left=f+"px"),this.callOnResize()}),this)):(l<c&&(y.left&&"center"==y.left||y.right&&"center"==y.right?f=h.x-(c-l)/2+g/2:y.right?f=h.x-(c-l)+g:y.left&&(f=h.x),this.transform.x=f),l>c&&(y.left&&"center"==y.left||y.right&&"center"==y.right?f=h.x+(l-c)/2+g/2:y.right?f=h.x+(l-c)+g:y.left&&(f=h.x),this.transform.x=f),d<p&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?u=h.y-(p-d)/2+m/2:y.bottom?u=h.y-(o.bottom-d+parseInt(y.bottom)):y.top&&(u=h.y),this.transform.y=u),d>p&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?u=h.y+(d-p)/2+m/2:y.bottom&&"center"!=y.bottom?u=h.y+(d-o.bottom-parseInt(y.bottom)):y.top&&"center"!=y.top&&(u=h.y),this.transform.y=u),$L.fastdom.mutate((function(){if(a.style.transitionDuration="0s","slideFromTop"===this.getData("ltPropTransition").animation||"slideFromBottom"===this.getData("ltPropTransition").animation)l<c&&(y.left&&"center"==y.left||y.right&&"center"==y.right?a.style.left=o.left-(c-l)/2+g/2+"px":y.right?a.style.left=o.left-(c-l)+g+"px":y.left&&(a.style.left=o.left+"px")),l>c&&(y.left&&"center"==y.left||y.right&&"center"==y.right?a.style.left=o.left+(l-c)/2+g/2+"px":y.right?a.style.left=o.left+(l-c)+g+"px":y.left&&(a.style.left=o.left+"px")),a.style.transform="translate(0px,"+this.transform.y+"px)";else if(("slideFromLeft"===this.getData("ltPropTransition").animation||"slideFromRight"===this.getData("ltPropTransition").animation)&&(d<p&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?a.style.top=s-(p-d)/2+m/2+"px":y.bottom?a.style.top=s-(p-d)+"px":y.top&&(a.style.top=s+"px")),d>p&&(y.top&&"center"==y.top||y.bottom&&"center"==y.bottom?a.style.top=s+(d-p)/2+m/2+"px":y.bottom&&"center"!=y.bottom?a.style.top=s+(d-p)+"px":y.top&&"center"!=y.top&&(a.style.top=s+"px")),a.style.transform="translate("+this.transform.x+"px,0px)",this.renderSidewise)){if("slideFromRight"==this.getData("ltPropTransition").animation){var i=this.renderProps.windowWidth-this.renderProps.left;e&&(e.style.right=i+"px"),t&&(t.style.right=i-5+"px")}"slideFromLeft"==this.getData("ltPropTransition").animation&&(e&&(e.style.left=this.renderProps.right+"px"),t&&(t.style.left=this.renderProps.right+1+"px"))}this.callOnResize()}),this)),this.setData("prevModalHeight",o.height),this.setData("prevModalWidth",o.width),this.setData("prevWinH",d),this.setData("prevWinW",l)}),this)},isResponsibleForSidewiseRender:function(){var e=LytePopup.components;return!!(e.length>1&&e[e.length-2]===this&&e[e.length-1].renderSidewise)},computeOffsetImpl:function(e,t){var a=this.nodeName&&"LYTE-MODAL"===this.nodeName?this.component:this;a.fastdomfn6=$L.fastdom.measure((function(){if(delete a.fastdomfn6,a.actualModalDiv){a.calculateForSidewiseRender();var o,i,r=a.actualModalDiv,n=Lyte.deepCopyObject(a.$node.ltProp("offset")),s=r.getBoundingClientRect(),l={top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:r.offsetWidth,height:r.offsetHeight},d=0,p=0;if(a.getData("ltPropFreeze")){var c=window.getComputedStyle(r.parentElement);d=parseInt(c.left),p=parseInt(c.top)}var h=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-d;a.renderSidewise&&(a.renderProps.windowWidth=h,h="slideFromRight"==a.getData("ltPropTransition").animation?a.renderProps.left:a.renderProps.windowWidth-a.renderProps.right,o=a.childComp.querySelector("lyte-modal-freeze"),i=a.actualModalDiv.parentElement);var u=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-p;if(r.style.transitionDuration=(null!=e?e:a.$node.ltProp("transition").duration)+"s",a.setData("prevWinH",u),a.setData("prevWinW",h),a.setData("prevModalHeight",l.height),a.setData("prevModalWidth",l.width),n){if("center"===n.left||"center"===n.right){var f=(h-l.width)/2;f<0&&(f=20),n.left=f}if("center"===n.top||"center"===n.bottom){var y=(u-l.height)/2;y<0&&(y=20),n.top=y}if(n.right&&"center"!==n.right&&(n.right.indexOf("%")>-1?n.left=h-(l.width+h/parseFloat(n.right)):n.left=h-(l.width+parseFloat(n.right))),n.bottom&&"center"!==n.bottom&&(n.bottom.indexOf("%")>-1?n.top=u-(l.height+u/parseFloat(n.bottom)):n.top=u-(l.height+parseFloat(n.bottom))),""!==n.left&&null!=n.left||(a.data.ltPropOffset.left="center",n.left=(h-l.width)/2),""!==n.top&&null!=n.top||(a.data.ltPropOffset.top="center",n.top=(u-l.height)/2),a.getData("ltPropTransition").originElement)if(g=document.querySelector(a.getData("ltPropTransition").originElement)){var m=g.getBoundingClientRect();n.originElementPos={xDiff:m.left+m.width/2-(parseFloat(n.left)+l.width/2),yDiff:m.top+m.height/2-(parseFloat(n.top)+l.height/2)}}else Console.error("The originElement provided does not exist. Kindly Check!");a.fastdomfn7=$L.fastdom.mutate((function(){if(delete a.fastdomfn7,a.getData("first")&&LytePopup.bindTransitionEnd(a.actualModalDiv),"slideFromTop"==a.getData("ltPropTransition").animation){if(r.style.left=parseFloat(n.left)+"px",r.style.top=-1*l.height+"px",t)return void(r.style.transform="translate(0px,"+(parseInt(n.top)+l.height)+"px)");a.enableTransform(parseInt(n.top)+l.height,"y",e)}else if("slideFromBottom"==a.getData("ltPropTransition").animation){if(r.style.left=parseFloat(n.left)+"px",r.style.top=u+1+"px",t)return void(r.style.transform="translate(0px,"+-1*(u-parseInt(n.top)+1)+"px)");a.enableTransform(-1*(u-parseInt(n.top)+1),"y",e)}else if("slideFromLeft"==a.getData("ltPropTransition").animation){if(a.renderSidewise&&(o&&(o.style.left=a.renderProps.right+"px"),i&&(i.style.left=a.renderProps.right+"px")),r.style.top=parseFloat(n.top)+"px",r.style.left=-1*l.width+"px",t)return void(r.style.transform="translate("+(parseInt(n.left)+l.width)+"px,0px)");a.enableTransform(parseInt(n.left)+l.width,"x",e)}else if("slideFromRight"==a.getData("ltPropTransition").animation){if(a.renderSidewise){var s=a.renderProps.windowWidth-a.renderProps.left;o&&(o.style.right=s+"px"),i&&(i.style.right=s-5+"px")}if(r.style.top=parseFloat(n.top)+"px",r.style.left=h+1+"px",t)return void(r.style.transform="translate("+-1*(h-parseInt(n.left)+1)+"px,0px)");a.enableTransform(-1*(h-parseInt(n.left)+1),"x",e)}else if("fadeIn"==a.getData("ltPropTransition").animation){if(r.style.left=parseFloat(n.left)+"px",r.style.top=parseFloat(n.top)+"px",t)return void(r.style.transform="");a.$node.ltProp("showCopy",!0),r.style.opacity=1}else if("zoom"==a.getData("ltPropTransition").animation){a.$node.ltProp("showCopy",!0);var d="scale(0)";if(n.originElementPos&&(d="translateX( "+n.originElementPos.xDiff+"px) translateY( "+n.originElementPos.yDiff+"px) scale(0)"),r.style.left=parseFloat(n.left)+"px",r.style.top=parseFloat(n.top)+"px",r.style.transition="none",t)return r.style.transform=n.originElementPos?"translateX(0) translateY(0) scale(1)":"scale(1)",void setTimeout((function(){r.style.transition=""}),16);r.style.transform=d,r.style.opacity=1,setTimeout((function(){r.style.transition="",r.style.transitionDuration=(null!=e?e:a.$node.ltProp("transition").duration)+"s",n.originElementPos?r.style.transform="translateX(0) translateY(0) scale(1)":r.style.transform="scale(1)"}),50)}a.$node.ltProp("freeze")&&document.body.classList.add("bodyWrapper"),a.getData("first")&&(a.callOnShow(),a.setData("first",!1))}),a)}else{var g;a.setData("ltPropOffset",{left:"center",top:"center"}),n.left=(h-l.width)/2,n.top=(u-l.height)/2,a.$node.ltProp("scrollable")||(n.left<0&&(n.left=20),n.top<0&&(n.top=20)),a.getData("ltPropTransition").originElement&&((g=document.querySelector(a.getData("ltPropTransition").originElement))?(m=g.getBoundingClientRect(),n.originElementPos={xDiff:m.left+m.width/2-(n.left+l.width/2),yDiff:m.top+m.height/2-(n.top+l.height/2)}):Console.error("The originElement provided does not exist. Kindly Check!")),a.fastdomfn8=$L.fastdom.mutate((function(){if(delete a.fastdomfn8,a.getData("first")&&LytePopup.bindTransitionEnd(a.actualModalDiv),"slideFromTop"==a.getData("ltPropTransition").animation){if(r.style.left=parseFloat(n.left)+"px",r.style.top=-1*l.height+"px",t)return void(r.style.transform="translate(0px,"+(parseInt(n.top)+l.height)+"px)");a.enableTransform(parseInt(n.top)+l.height,"y",e)}else if("slideFromBottom"==a.getData("ltPropTransition").animation){if(r.style.left=parseFloat(n.left)+"px",r.style.top=u+1+"px",t)return void(r.style.transform="translate(0px,"+-1*(u-parseInt(n.top)+1)+"px)");a.enableTransform(-1*(u-parseInt(n.top)+1),"y",e)}else if("slideFromLeft"==a.getData("ltPropTransition").animation){if(a.renderSidewise&&(o&&(o.style.left=a.renderProps.right+"px"),i&&(i.style.left=a.renderProps.right+"px")),r.style.top=parseFloat(n.top)+"px",r.style.left=-1*l.width+"px",t)return void(r.style.transform="translate("+(parseInt(n.left)+l.width)+"px,0px)");a.enableTransform(parseInt(n.left)+l.width,"x",e)}else if("slideFromRight"==a.getData("ltPropTransition").animation){if(a.renderSidewise){var s=a.renderProps.windowWidth-a.renderProps.left;o&&(o.style.right=s+"px"),i&&(i.style.right=s-5+"px")}if(r.style.top=parseFloat(n.top)+"px",r.style.left=h+1+"px",t)return void(r.style.transform="translate("+-1*(h-parseInt(n.left)+1)+"px,0px)");a.enableTransform(-1*(h-parseInt(n.left)+1),"x",e)}else if("fadeIn"==a.getData("ltPropTransition").animation){if(r.style.left=parseFloat(n.left)+"px",r.style.top=parseFloat(n.top)+"px",t)return void(r.style.transform="");a.$node.ltProp("showCopy",!0),r.style.opacity=1}else if("zoom"==a.getData("ltPropTransition").animation){a.$node.ltProp("showCopy",!0);var d="scale(0)";if(n.originElementPos&&(d="translateX( "+n.originElementPos.xDiff+"px) translateY( "+n.originElementPos.yDiff+"px) scale(0)"),r.style.left=parseFloat(n.left)+"px",r.style.top=parseFloat(n.top)+"px",r.style.transition="none",t)return r.style.transform=n.originElementPos?"translateX(0) translateY(0) scale(1)":"scale(1)",void setTimeout((function(){r.style.transition=""}),16);r.style.transform=d,r.style.opacity=1,setTimeout((function(){r.style.transition="",r.style.transitionDuration=(null!=e?e:a.$node.ltProp("transition").duration)+"s",n.originElementPos?r.style.transform="translateX(0) translateY(0) scale(1)":r.style.transform="scale(1)"}),50)}a.$node.ltProp("freeze")&&document.body.classList.add("bodyWrapper"),a.getData("first")&&(a.callOnShow(),a.setData("first",!1))}),a)}}}),a)},calculateForSidewiseRender:function(){if(LytePopup.components.length>1){var e,t=this.getData("ltPropParentModalId");if(""!=t)e=$L(t)[0].component;else if(""==t&&""==this.getData("ltPropDependentModalId")){var a=LytePopup.components.indexOf(this);a>0&&"LYTE-MODAL"===LytePopup.components[a-1].$node.tagName&&(e=LytePopup.components[a-1])}if(!this.getData("ltPropOverlapModal")&&e&&e.getData("ltPropAllowMultiple")&&-1!=["slideFromLeft","slideFromRight"].indexOf(this.getData("ltPropTransition").animation)){this.renderSidewise=!0;var o=e.actualModalDiv.getBoundingClientRect();this.renderProps={prevModal:e,left:Math.round(o.left),right:Math.round(o.right),width:Math.round(o.width)}}}},closeModal:function(){var e=this.childComp.querySelector("lyte-modal-freeze");if(this.renderSidewise&&("slideFromRight"==this.getData("ltPropTransition").animation&&(e&&(e.style.right=""),this.actualModalDiv.parentElement.style.right=""),"slideFromLeft"==this.getData("ltPropTransition").animation&&(e&&(e.style.left=""),this.actualModalDiv.parentElement.style.left=""),delete this.renderSidewise,delete this.renderProps),_lyteUiUtils.getRTL()&&!this.getData("ltPropIgnoreInlineDirection")){"slideFromLeft"==this.getData("ltPropTransition").animation?this.getData("ltPropTransition").animation="slideFromRight":"slideFromRight"==this.getData("ltPropTransition").animation&&(this.getData("ltPropTransition").animation="slideFromLeft");var t=this.getData("ltPropOffset"),a={};for(key in t)"left"==key&&"center"!=t[key]?a.right=t[key]:"right"==key?a.left=t[key]:a[key]=t[key];this.setData("ltPropOffset",a)}"zoom"==this.getData("ltPropTransition").animation&&(this.actualModalDiv.style.opacity="0",this.actualModalDiv.style.transform=""),this.$node.ltProp("freeze")||this.childComp.querySelector(".modalWrapper").classList.remove("noFreeze"),this.$node.ltProp({showCopy:!1,show:!1}),this.$node.ltProp("freeze")||(this.actualModalDiv.style.position=""),this.$node.classList.remove("lyteModalOpened"),this.actualModalDiv&&(this.actualModalDiv.style.transform=""),$L(this.childComp).addClass("lyteModalHidden"),_lyteUiUtils.dispatchEvent("lyteModalClosed",this.actualModalDiv),this.setData("ltPropShowWormhole",!1),this.getMethods("onClose")&&this.executeMethod("onClose",this),LytePopup.checkAndRemoveWrapper()},onBeforeCloseHandling:function(e){var t=!0,a=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(this.getMethods("onBeforeClose")&&(t=this.executeMethod("onBeforeClose",e,this)),void 0===t||t){if(this.actualModalDiv&&this.childComp){this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails);var i=1e3*parseFloat(this.$node.ltProp("transition").duration),r=this;this.timeOutId=setTimeout((function(){delete r.timeOutId,r.closeModal()}),i);var n,s=this.actualModalDiv;this.getData("ltPropCloseDuration")?s.style.transitionDuration=this.getData("ltPropCloseDuration")/1e3+"s":s.style.transitionDuration=i/1e3+"s";var l,d="scale(0)";if($L.fastdom.measure((function(){if(n=s.getBoundingClientRect(),"zoom"==this.getData("ltPropTransition").animation&&this.getData("ltPropTransition").originElement){var e=document.querySelector(this.getData("ltPropTransition").originElement);if(e){var t=e.getBoundingClientRect(),a={top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:s.offsetWidth,height:s.offsetHeight},o={xDiff:t.left+t.width/2-(a.left+a.width/2),yDiff:t.top+t.height/2-(a.top+a.height/2)};d="translateX( "+o.xDiff+"px) translateY( "+o.yDiff+"px) scale(0)"}else Console.error("The originElement provided does not exist. Kindly Check!")}}),this),$L.fastdom.mutate((function(){"slideFromTop"==this.getData("ltPropTransition").animation?(l=-(Math.ceil(n.height)+parseInt(s.style.top)+10)+"px",s.style.transform="translateY("+l+")"):"slideFromBottom"==this.getData("ltPropTransition").animation?(l=o-parseInt(s.style.top)+10+"px",s.style.transform="translateY("+l+")"):"slideFromLeft"==this.getData("ltPropTransition").animation?(l=-(Math.ceil(n.width)+parseInt(s.style.left)+10)+"px",s.style.transform="translateX("+l+")"):"slideFromRight"==this.getData("ltPropTransition").animation?(l=(this.renderProps&&this.renderProps.left||a)-parseInt(s.style.left)+10+"px",s.style.transform="translateX("+l+")"):"fadeIn"==this.getData("ltPropTransition").animation?s.style.opacity=0:"zoom"==this.getData("ltPropTransition").animation&&(s.style.transform=d),delete this.transform,this.$node.classList.contains("lyteModalOpened")||(s.style.transform="")}),this),$L.fastdom.mutate((function(){s=null})),s.classList.remove("lyteModalFromTop","lyteModalFromBottom","lyteModalFromLeft","lyteModalFromRight","lyteModalFadeIn","lyteZoom"),this.$node.ltProp("freeze")&&this.childComp.querySelector("lyte-modal-freeze")){var p=this.childComp.querySelector("lyte-modal-freeze");setTimeout(function(){p.style.opacity=0,p.style.visibility=""}.bind(this),300)}LytePopup.closePopup(this),this.setData("first",!0),this.setData("initializedPosition",!1),this.setData("calculateHW",!1)}this.$node.alignModal=null,this.$node.resetPosition=null,this.$node.alignLyteModal=null,this.$node.calculateOffset=null,this.$node.reflectTransitionChange=null}else this.setData("returnedFalse",!0),this.$node.ltProp("show",!0)},onBeforeShowHandling:function(){var e=!0;if(this.getMethods("onBeforeShow")&&(e=this.executeMethod("onBeforeShow",this)),void 0===e||e){this.setData("checkAria",this.getData("checkAria")+1),this.addDragHandler(),this.updateScrollHandling();var t=this.actualModalDiv;t.style.transitionDuration=this.$node.ltProp("transition").duration+"s";var a="lyteModalFrom",o=(this.actualModalDiv.style,this.actualModalDiv.getBoundingClientRect(),Math.max(document.documentElement.clientWidth,window.innerWidth||0));switch(this.$node.ltProp("transition").animation){case"slideFromTop":a+="Top";break;case"slideFromBottom":a+="Bottom";break;case"slideFromLeft":a+="Left";break;case"slideFromRight":a+="Right";break;case"fadeIn":a="lyteModalFadeIn";break;case"zoom":a="lyteZoom"}if(this.fastdomfn1=$L.fastdom.mutate((function(){delete this.fastdomfn1,this.actualModalDiv.classList.add(a),this.actualModalDiv.style.opacity="",t=null}),this),LytePopup.addPopup(this),this.calculateForSidewiseRender(),this.$node.ltProp("freeze")){var i=this.childComp.querySelector("lyte-modal-freeze");this.renderSidewise&&("slideFromRight"==this.getData("ltPropTransition").animation&&(i.style.right=o-this.renderProps.left+"px"),"slideFromLeft"==this.getData("ltPropTransition").animation&&(i.style.left=this.renderProps.right+"px"));var r=i.style;this.getData("ltPropDimmer")&&this.getData("ltPropDimmer").color&&(r.background=this.getData("ltPropDimmer").color),this.addedFreezeDetails||(r.opacity=this.getData("ltPropDimmer")&&this.getData("ltPropDimmer").opacity?this.getData("ltPropDimmer").opacity:"")}this.$node.alignModal=this.computeOffsetImpl.bind(this,0,!0),this.$node.resetPosition=function(){LytePopup.x=this.getData("beforeDragPosition").xPos,LytePopup.y=this.getData("beforeDragPosition").yPos,LytePopup.xPos=this.getData("beforeDragPosition").xPos,LytePopup.yPos=this.getData("beforeDragPosition").yPos,this.component.transform.x=this.getData("beforeDragPosition").xPos,this.component.transform.y=this.getData("beforeDragPosition").yPos,"zoom"===this.getData("ltPropTransition").animation?this.component.actualModalDiv.style.transform="translate("+this.getData("beforeDragPosition").xPos+"px ,"+this.getData("beforeDragPosition").yPos+"px) scale("+this.getData("beforeDragPosition").scale+")":this.component.actualModalDiv.style.transform="translate("+this.getData("beforeDragPosition").xPos+"px ,"+this.getData("beforeDragPosition").yPos+"px)"},this.$node.alignLyteModal=function(){this.component.updateScrollHandling(),this.component.computeOffsetImpl.bind(this.component,0,!0)},this.$node.calculateOffset=this.updateScrollHandling.bind(this),this.$node.reflectTransitionChange=this.reflectTransitionChange.bind(this)}else this.setData("returnedFalse",!0),this.$node.ltProp({showCopy:!1,show:!1})},reflectTransitionChange:function(){this.computeOffsetImpl(null,!0)},didDestroy:function(){this.$node.classList.remove("lyteModalOpened"),this.timeOutId&&(clearTimeout(this.timeOutId),delete this.timeOutId),this.beforeCloseId&&(clearTimeout(this.beforeCloseId),delete this.beforeCloseId),this.renderSidewise&&(delete this.renderSidewise,delete this.renderProps),this.childComp&&(this.clearFastdomBatch(),this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.childComp.remove(),delete this.actualModalDiv,delete this.childComp,LytePopup.checkAndRemoveWrapper())},actions:{close:function(){this.$node.ltProp("show",!1)}},methods:{beforeWormholeAppend:function(e){this.childComp&&delete this.childComp,this.actualModalDiv&&delete this.actualModalDiv,this.childComp=e,this.actualModalDiv=this.childComp.querySelector(".lyteModal")}}}),"complete"===document.readyState||"interactive"===document.readyState?addModalEvent():document.addEventListener("DOMContentLoaded",(function(e){addModalEvent(e)})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},writable:!0,configurable:!0}),function(e){lyteDomObj&&(lyteDomObj.prototype.manageSortable={keyPressed:!1,keyValue:0,countSortable:0,init:!1,prevSortable:!1,mousedownTriggered:!1,draggedEle:null,_ssData:{},measureQueue:[],mutateQueue:[],isEqual:function(e,t){if(e.length!=t.length)return!1;for(var a=0;a<e.length;a++)if(-1==t.indexOf(e[a]))return!1;return!0},convertToArrayOfItems:function(e,t){if("string"!=typeof e&&e.length>0)return e;var a=e.split(","),o=[];return a.forEach((function(e,a){var i=$L(e.trim(),t);if(i.length)for(var r=0;r<i.length;r++)-1==o.indexOf(i[r])&&"TEMPLATE"!=i[r].tagName&&o.push(i[r]);else-1==o.indexOf(i)&&"TEMPLATE"!=i.tagName&&o.push(i)})),o},destroy:function(e){if(e.classList.contains("sortable-parent")){for(var t=Array.from(e.children).filter((function(e){return"TEMPLATE"!=e.tagName})),a=e.getSortableClass(),o=0;o<t.length;o++)t[o].classList.remove("sortable-element",a),t[o]._sortableChildData&&(t[o]._sortableChildData=null);e._mousedown&&(e.removeEventListener("mousedown",e.__mouseDownEvent),e.removeEventListener("touchstart",e.__mouseDownEvent,!0),e._mousedown=!1),e.classList.remove("sortable-parent"),e._sortableParentData.multiSortable&&(e._sortableParentData.allSortableClass=null),delete e._sortableParentData,delete e.getSortableClass}else console.info("ALERT! - U have already destroyed its sortable behaviour.")},cancel:function(e){if(e.classList.contains("sortable-parent")){for(var t=this.getChildElements(e),a=t.length-1;a>=0;a--)if(t[a]._pos!=a){for(var o=void 0,i=a;i>=0;i--)if(t[i]._pos==a){o=t[i];break}o&&(a==t.length-1?_lyteUiUtils.appendChild(e,o):_lyteUiUtils.insertBefore(t[a+1],o)),t=this.getChildElements(e)}}else console.info("ALERT! - The element is not a sortable parent.")},getChildElements:function(e){return Array.from(e.children).filter((function(e){return"TEMPLATE"!=e.tagName}))},disable:function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.classList.contains("sortable-element")){var o={class:"sortable-element",data:Object.assign({},a._sortableChildData)};a.classList.add("sort-disabled-element"),a.classList.remove("sortable-element",a._sortableChildData.sortableElemClass),a._disabledData=o,a._sortableChildData=null}else console.info(a," cannot be disabled as it is not a sortable element.")}},enable:function(e){for(var t=0;t<e.length;t++){var a=e[t];a._disabledData||a.classList.contains("sort-disabled-element")?(a._sortableChildData=Object.assign({},a._disabledData.data),a.classList.remove("sort-disabled-element"),a.classList.add("sortable-element",a._sortableChildData.sortableElemClass),delete a._disabledData):console.info(a," cannot be enabled as it is not a disabled sortable element.")}},alreadySortable:function(e){for(var t=0;t<e.length;t++)if($L(e[t]).hasClass("sortable-parent")&&e[t]._sortableParentData)return{found:!0,class:e[t]._sortableParentData.sortableElemClass};return{found:void 0}},isOver:function(e,t,a){var o,i,r=lyteDomObj.prototype.manageSortable,n=void 0!==e.clientX?e.clientX:e.touches[0].clientX,s=void 0!==e.clientY?e.clientY:e.touches[0].clientY;if(a){if((o=r.prevSortable?r.prevSortable.getBoundingClientRect():null)&&(n<o.left||n>o.right||s<o.top||s>o.bottom))r.prevSortable&&r.prevSortable._sortableParentData&&r.prevSortable._sortableParentData.onLeave&&r.prevSortable._sortableParentData.onLeave(e,{element:t._element,sortable:r.prevSortable,placeholder:t._placeholder}),r.prevSortable=!1;else if((i=document.querySelectorAll(t.connectToSortable+".sortable-parent")).length)for(var l=i.length-1;l>=0;l--){var d=i[l].getBoundingClientRect();if(i[l]._sortableParentData.droppable&&n>=d.left&&n<=d.right&&s>=d.top&&s<=d.bottom){(!r.prevSortable||r.prevSortable&&r.prevSortable!=i[l])&&(r.prevSortable=i[l],r.prevSortable._sortableParentData&&r.prevSortable._sortableParentData.onEnter&&r.prevSortable._sortableParentData.onEnter(e,{element:t._element,sortable:r.prevSortable,placeholder:t._placeholder}));break}}}else if((o=r.prevSortable?r.prevSortable.getBoundingClientRect():null)&&(n<o.left||n>o.right||s<o.top||s>o.bottom))r.prevSortable&&r.prevSortable._sortableParentData&&r.prevSortable._sortableParentData.onLeave&&r.prevSortable._sortableParentData.onLeave(e,{element:t._div,sortable:r.prevSortable,placeholder:t._placeholder}),r.prevSortable=!1;else if((i=t.connectedWith.length?t.connectedWith:[t._parentElem]).length)for(l=i.length-1;l>=0;l--){d=i[l].getBoundingClientRect();if(i[l]._sortableParentData.droppable&&n>=d.left&&n<=d.right&&s>=d.top&&s<=d.bottom){(!r.prevSortable||r.prevSortable&&r.prevSortable!=i[l])&&(r.prevSortable=i[l],r.prevSortable._sortableParentData&&r.prevSortable._sortableParentData.onEnter&&r.prevSortable._sortableParentData.onEnter(e,{element:t._div,sortable:r.prevSortable,placeholder:t._placeholder}));break}}},getSortableClasses:function(e,t){var a=t||{};return e.forEach((function(e){if(e&&e._sortableParentData){var t=e._sortableParentData.sortableElemClass;a.hasOwnProperty(t)||(a[t]=e)}})),a},enableDroppable:function(e){$L(e).hasClass("sortable-parent")&&(e[0]._sortableParentData.droppable=!0)},disableDroppable:function(e){$L(e).hasClass("sortable-parent")&&(e[0]._sortableParentData.droppable=!1)}},lyteDomObj.prototype.sortable=function(t){var a,o,i,r,n=lyteDomObj.prototype.manageSortable;if(n.init||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),a=t.length-1;a>=0&&t.item(a)!==this;)--a;return a>-1}),Array.from||(Array.from=(a=Object.prototype.toString,o=function(e){return"function"==typeof e||"[object Function]"===a.call(e)},i=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),i)},function(e){var t=this,a=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,n=arguments.length>1?arguments[1]:void 0;if(void 0!==n){if(!o(n))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var s,l=r(a.length),d=o(t)?Object(new t(l)):new Array(l),p=0;p<l;)s=a[p],d[p]=n?void 0===i?n(s,p):n.call(i,s,p):s,p+=1;return d.length=l,d})),n.init=!0),"string"!=typeof t){var s=t||{},l=function(){return navigator.userAgent.search("rv:11")>=0?"ie":navigator.userAgent.search("Edge")>=0?"edge":navigator.userAgent.search("Chrome")>=0?"chrome":navigator.userAgent.search("Firefox")>=0?"firefox":navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?"safari":void 0},d=function(){var t=e.navigator.userAgent,a=e.navigator.platform,o=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?o="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(a)?o="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(a)?o="Windows":/Android/.test(t)?o="Android":!o&&/Linux/.test(a)&&(o="Linux"),o};if(!(this.length>1)){var p=null==this.length?this:this[0];if(p._sortableParentData){var c=p._sortableParentData;s._parentElem=null==s._parentElem?c._parentElem:s._parentElem,s.containment=s.containment?s.containment:c.containment,s.containmentBoundaries=s.containmentBoundaries?s.containmentBoundaries:c.containmentBoundaries,s.connected=s.connectedWith?n.isEqual(s.connectedWith,c.connectedWith):c.connected,s.connectedWith=s.connectedWith?s.connectedWith:c.connectedWith,s.orientation=s.orientation?s.orientation:c.orientation,s.droppable=null==s.droppable?c.droppable:s.droppable,s.draggable=null==s.draggable?c.draggable:s.draggable,s.sortableElemClass=s.sortableElemClass?s.sortableElemClass:c.sortableElemClass,s.placeholder=s.placeholder?s.placeholder:c.placeholder,s.disabled=s.disabled?s.disabled:c.disabled,s.onReady=s.onReady?s.onReady:c.onReady,s.onSelect=s.onSelect?s.onSelect:c.onSelect,s.onDragStart=s.onDragStart?s.onDragStart:c.onDragStart,s.onDrag=s.onDrag?s.onDrag:c.onDrag,s.onPlaceholder=s.onPlaceholder?s.onPlaceholder:c.onPlaceholder,s.onBeforeDrop=s.onBeforeDrop?s.onBeforeDrop:c.onBeforeDrop,s.onDrop=s.onDrop?s.onDrop:c.onDrop,s.cancel=null==s.cancel?c.cancel:s.cancel instanceof Array?s.cancel:s.cancel.split(","),s.cancelRemove=!(!c.cancelRemove&&1!=s.cancelRemove),s.tolerance=s.tolerance?s.tolerance:c.tolerance,s.items=null==s.items?c.items:s.items instanceof Array?s.items:s.items.split(","),s.cursorAt=null==s.cursorAt?c.cursorAt:s.cursorAt,s.restrict=null==s.restrict?c.restrict:s.restrict instanceof Array?s.restrict:s.restrict.split(","),s.scrollDivX=null==s.scrollDivX?c.scrollDivX:"string"==typeof s.scrollDivX?document.querySelector(s.scrollDivX):s.scrollDivX,s.scrollDivY=null==s.scrollDivY?c.scrollDivY:"string"==typeof s.scrollDivY?document.querySelector(s.scrollDivY):s.scrollDivY,s.scrollBoundaries=s.scrollBoundaries?s.scrollBoundaries:c.scrollBoundaries,s.preventScrollY=null==s.preventScrollY?c.preventScrollY:s.preventScrollY,s.omitRestricted=null==s.omitRestricted?c.omitRestricted:s.omitRestricted,s.onEnter=s.onEnter?s.onEnter:c.onEnter,s.onLeave=s.onLeave?s.onLeave:c.onLeave,s.clone=s.clone?s.clone:c.clone,s.preventDefault=s.preventDefault?s.preventDefault:c.preventDefault,s.appendTo=s.appendTo?"parent"!=s.appendTo?$L(s.appendTo)[0]:"parent":c.appendTo,s.helper=s.helper?s.helper:c.helper,s.preventDropAtEnd=null==s.preventDropAtEnd?c.preventDropAtEnd:s.preventDropAtEnd,s.preventDropAtStart=null==s.preventDropAtStart?c.preventDropAtStart:s.preventDropAtStart,s.onMultiSelectDrag=s.onMultiSelectDrag?s.onMultiSelectDrag:c.onMultiSelectDrag,s.gridView=s.gridView?s.gridView:c.gridView,s.multiSortable=s.multiSortable?s.multiSortable:c.multiSortable,s.context=s.context?s.context:c.context,s.isSameClass=s.isSameClass?s.isSameClass:c.isSameClass,s.preventScroll=s.preventScroll?s.preventScroll:c.preventScroll,s.threshold=s.threshold?s.threshold:c.threshold,s.dblTouchEvent=s.dblTouchEvent?s.dblTouchEvent:c.dblTouchEvent,s.multiSortable&&s.connectedWith&&(s.allSortableClass=c.allSortableClass?c.allSortableClass:n.getSortableClasses(s.connectedWith,c.allSortableClass)),$L(p).hasClass("sortable-parent")||$L(p).addClass("sortable-parent","lyteSortableParent"),s.executeOnReady&&(s._parentElem.executedOnReady=!1)}else s.connected||s.changed||(++n.countSortable,s.changed=!0),s._parentElem=p,$L(s._parentElem).addClass("sortable-parent","lyteSortableParent"),s.containment=s.containment,s.containmentBoundaries=s.containmentBoundaries?s.containmentBoundaries:{top:0,left:0,right:0,bottom:0},s.connectedWith=s.connectedWith?s.connectedWith:[],s.orientation=s.orientation?s.orientation:"default",s.droppable=null==s.droppable||s.droppable,s.draggable=null==s.draggable||s.draggable,s.sortableElemClass=s.sortableElemClass?s.sortableElemClass:p.parentElement&&p.parentElement._sortableParentData?p.parentElement._sortableParentData.sortableElemClass:"horizontal"===s.orientation?"sortable-element-h"+n.countSortable:"vertical"===s.orientation?"sortable-element-v"+n.countSortable:"sortable-element-d"+n.countSortable,s.placeholder=s.placeholder?s.placeholder:"lyteSortablePlaceholder",s.disabled=s.disabled?s.disabled:"lyteSortableDisabledPlaceholder",s.cancel=null==s.cancel?[]:s.cancel instanceof Array?s.cancel:s.cancel.split(","),s.tolerance=s.tolerance?s.tolerance:"intersect",s.items=null==s.items?[]:s.items instanceof Array?s.items:s.items.split(","),s.cursorAt=s.cursorAt,s.restrict=null==s.restrict?[]:s.restrict instanceof Array?s.restrict:s.restrict.split(","),s.scrollDivX=s.scrollDivX?"string"==typeof s.scrollDivX?document.querySelector(s.scrollDivX):s.scrollDivX:void 0,s.scrollDivY=s.scrollDivY?"string"==typeof s.scrollDivY?document.querySelector(s.scrollDivY):s.scrollDivY:void 0,s.scrollBoundaries=s.scrollBoundaries?s.scrollBoundaries:{top:0,left:0,right:0,bottom:0},s.omitRestricted=null!=s.omitRestricted&&s.omitRestricted,s.clone=!!s.clone,s.context=s.context?s.context:"BODY",s.preventDefault=null==s.preventDefault?{mousedown:!function(){var t,a=!1;return t=navigator.userAgent||navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(a=!0),a}(),mousemove:!0}:s.preventDefault,s.appendTo=s.appendTo&&"parent"!=s.appendTo?$L(s.appendTo)[0]:"parent",s.preventDropAtEnd=null==s.preventDropAtEnd||s.preventDropAtEnd,s.preventDropAtStart=null==s.preventDropAtStart||s.preventDropAtStart,s.gridView=!!s.gridView,s.isSameClass=!!s.isSameClass&&s.isSameClass,s.preventScrollY=!!s.preventScrollY&&s.preventScrollY,s.preventScroll=!!s.preventScroll&&s.preventScroll,s.threshold=s.threshold?s.threshold:0,s.dblTouchEvent=!!s.dblTouchEvent&&s.dblTouchEvent;var h,u,f,y,m,g,v=[0,0],b=0,P=0,D="",_="",L=0,C=0,w=null,T=null,x=!1,S=!1,A=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,E=e.cancelAnimationFrame||e.mozCancelAnimationFrame,M=0,$=0,k=null;s.containmentBoundaries&&(s.containmentBoundaries.top=s.containmentBoundaries.top?s.containmentBoundaries.top:0,s.containmentBoundaries.bottom=s.containmentBoundaries.bottom?s.containmentBoundaries.bottom:0,s.containmentBoundaries.left=s.containmentBoundaries.left?s.containmentBoundaries.left:0,s.containmentBoundaries.right=s.containmentBoundaries.right?s.containmentBoundaries.right:0),s.scrollBoundaries&&(s.scrollBoundaries.top=s.scrollBoundaries.top?s.scrollBoundaries.top:0,s.scrollBoundaries.bottom=s.scrollBoundaries.bottom?s.scrollBoundaries.bottom:0,s.scrollBoundaries.left=s.scrollBoundaries.left?s.scrollBoundaries.left:0,s.scrollBoundaries.right=s.scrollBoundaries.right?s.scrollBoundaries.right:0);var R=function(t){if("Windows"===d()&&n.mouseMoveTriggered)n.mouseMoveTriggered=!1;else if("touchmove"==t.type&&t.preventDefault(),x&&w&&(E(w),x=!1,w=null),S&&T&&(E(T),S=!1,T=null),n.draggedEle&&n.draggedEle.classList.contains("sortable-element-selected")&&n.draggedEle._sortableChildData._isDown){if(g=n.draggedEle){var a=g._sortableChildData;if(Math.abs(h-t.clientX)<=a.threshold&&Math.abs(u-t.clientY)<=a.threshold)return;if(a&&a._isDown){(null==a.preventDefault.mousemove||a.preventDefault.mousemove)&&t.preventDefault(),void 0!==document.body.style.MozUserSelect&&(document.body.style.MozUserSelect="none"),_=a._div,D=a._placeholder,v=a._offset,b=a._marginTop,P=a._marginLeft,m=a.sortableElemClass;var o,i=g.getBoundingClientRect(),r=0;a.scrollDivY?o=a.scrollDivY:a.preventScrollY||(o="horizontal"!=a.orientation&&re(a._placedPlaceholder?D:_)),o&&(!k||k&&k!=o)&&($=o.scrollHeight-o.offsetHeight,k=o);var s=!1;if(o&&("relative"==e.getComputedStyle(o).position||"fixed"==e.getComputedStyle(o).position||"absolute"==e.getComputedStyle(o).position)&&(!be(_)||be(_)&&o.contains(_))?(s=!0,C=o.scrollTop):C=0,!a._placedPlaceholder){M=a.scrollDivX?a.scrollDivX.scrollWidth-a.scrollDivX.clientWidth:0,a._maxScrollWidth=M,a.onDragStart&&J(a,t),i=be(g)?g._origin.getBoundingClientRect():g.getBoundingClientRect(),a.containment?a.containmentDimensions=ie(a,g,a.containmentBoundaries):a.containmentDimensions=null;var p=i.width,c=i.height,L=0,R=g.offsetParent;for(a._isRelative&&a.scrollDivX.contains(_)&&(r=a.scrollDivX.scrollLeft),!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==l()&&a._isRelative&&a.scrollDivX.contains(_)&&(r=a.scrollDivX.scrollLeft-a._maxScrollWidth),"table"==R.tagName.toLowerCase()&&""==(L=R.cellSpacing)&&(L=2);("table"==R.tagName.toLowerCase()||"lyte-table-structure"==R.tagName.toLowerCase())&&""==R.style.position;)R=R.offsetParent;var O=se(_);O&&R!=O&&(R=O),c||(c=g.getBoundingClientRect().height);var F=R.getBoundingClientRect();return a.cancelRemove||(_.style.top=i.top-(F.top+parseInt(L)+parseInt(b))+C+"px"),_.style.left=i.left-(F.left+parseInt(P))+r+"px",_.style.boxSizing="border-box",_.style.zIndex=3001,_.style.width=p+"px",_.style.height=c+"px",be(_)&&(_.style.visibility=""),"tr"!=g.tagName.toLowerCase()&&"lyte-tr"!=g.tagName.toLowerCase()||ne(g),$L(D).attr("id","dummy"),D.style.width=p+"px",D.style.height=c+"px",_.classList.add("lyteSortableElem"),D.style.padding="0px",D.classList.add(a.placeholder),_lyteUiUtils.insertBefore(be(_)?_._origin:_,D),_.style.position="absolute",_.classList.add("lyteSortableDisablePE"),a._placedPlaceholder=!0,N(a,_.parentElement),a._div=_,a._placeholder=D,a._prevTop=t.clientY,a._prevLeft=t.clientX,a.onDrag&&X(a,t),n.isOver(t,a),void(a._isMoved=!0)}var H=$L.fastdom.measure((function(){if(n.measureQueue.shift(),g){a.containment&&(a.containmentDimensions=ie(a,g,a.containmentBoundaries)),"mousemove"==t.type?f={x:t.clientX,y:t.clientY}:"touchmove"==t.type&&(f={x:t.touches[0].clientX,y:t.touches[0].clientY});var e=_.offsetParent,d=se(_);d&&e!=d&&(e=d);var p,c,h=e.getBoundingClientRect();a._isRelative&&a.scrollDivX.contains(_)&&(r=a.scrollDivX.scrollLeft),!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==l()&&a._isRelative&&a.scrollDivX.contains(_)&&(r=a.scrollDivX.scrollLeft-a._maxScrollWidth),i=_.getBoundingClientRect();var u,L,E=o?o.getBoundingClientRect():0;o&&i.left<=E.right&&i.right>=E.left&&(w=A(B.bind(this,a,o,E,$,null,s,f,v,h)),x=!0),a.scrollDivX&&(E=a.scrollDivX.getBoundingClientRect(),(i.left<=E.left||i.right>=E.right-3)&&(T=A(I.bind(this,a,E,f,v,h,a._isRelative)),S=!0));var M=$L.fastdom.mutate((function(){if(n.mutateQueue.shift(),g){if(p=f.x-v[0]-h.left-parseInt(P)+r,c=f.y-v[1]-h.top-parseInt(b)+C,a.containment){var e={top:a.containmentDimensions.top,bottom:a.containmentDimensions.top+(a.containmentDimensions.height-i.height)+C,left:a.containmentDimensions.left,right:a.containmentDimensions.left+(a.containmentDimensions.width-i.width)+r};"vertical"==a.orientation?c+h.top>=a.containmentDimensions.top&&c+h.top<=a.containmentDimensions.top+(a.containmentDimensions.height-i.height)+C&&(_.style.top=c+"px"):(p+h.left>=a.containmentDimensions.left&&p+h.left<=a.containmentDimensions.left+(a.containmentDimensions.width-i.width)+r?_.style.left=p+"px":p+h.left<e.left?_.style.left=e.left-h.left+"px":p+h.left>e.right&&(_.style.left=e.right-h.left+"px"),c+h.top>=a.containmentDimensions.top&&c+h.top<=a.containmentDimensions.top+(a.containmentDimensions.height-i.height)+C?_.style.top=c+"px":c+h.top<e.top?_.style.top=e.top-h.top+"px":c+h.top>e.bottom&&(_.style.top=e.bottom-h.top+"px"))}else"vertical"==a.orientation||(_.style.left=p+"px"),_.style.top=c+"px";i={left:h.left+(p-r),top:h.top+(c-C),right:h.left+(p-r)+i.width,bottom:h.top+(c-C)+i.height},a.onMultiSelectDrag&&ee(a,t);var l=$L.fastdom.measure((function(){if(n.measureQueue.shift(),g){if(y=document.elementFromPoint(f.x,f.y),a.multiSortable)if(y){var e=a.allSortableClass;for(var r in e)if(L=$L(y).closest("."+r,e[r])[0])break;!L&&$L(y).hasClass("sortable-parent")&&(L=y)}else L=null;else L=y?y.closest("."+m):null,y&&$L(y).hasClass("sortable-parent")&&(L=y),L&&$L(L).hasClass("sortable-parent")?L._sortableParentData.droppable||(L=!1):L&&!L.parentElement._sortableParentData.droppable&&(L=!1);if(u=L?L.getBoundingClientRect():{},y){var l=$L.fastdom.mutate((function(){if(n.mutateQueue.shift(),g){L&&$L(L).hasClass("sortable-parent")&&0===L.querySelectorAll("."+m).length&&a.droppable&&-1!==a.connectedWith.indexOf(L)&&(_lyteUiUtils.appendChild(L,D),N(a,y,L));var e=void 0!==t.clientX?t.clientX:t.touches[0].clientX,r=void 0!==t.clientY?t.clientY:t.touches[0].clientY;L&&le(L,g.parentElement,g,a.connectedWith,a.containmentDimensions,f)?$L(y).hasClass("sortable-parent")&&de(y,g.parentElement,g,a.connectedWith,a.containmentDimensions,f)&&ce(y,f)&&he(y,f,g)?(_lyteUiUtils.appendChild(y,D),N(a,y,L)):("pointer"==a.tolerance&&("horizontal"===a.orientation?(e<a._prevLeft?(_lyteUiUtils.insertBefore(L,D),N(a,y,L)):e>a._prevLeft&&(_lyteUiUtils.insertAfter(L,D),N(a,y,L)),a._prevLeft=e):((a.gridView&&e<a._prevLeft||r<a._prevTop)&&L.previousElementSibling!=D/*!_placeholder.nextElementSibling || (_placeholder.nextElementSibling && _placeholder.nextElementSibling != droppablePlace)*/?(//!placeholder.nextElementSibling to check if placeholder is the last element and the draggable element's top goes above the last element's top
_lyteUiUtils.insertBefore(L,D),N(a,y,L)):(a.gridView&&e>a._prevLeft||r>a._prevTop)&&L.nextElementSibling!=D/*!_placeholder.previousElementSibling || (_placeholder.previousElementSibling && _placeholder.previousElementSibling != droppablePlace)*/&&(_lyteUiUtils.insertAfter(L,D),N(a,y,L)),a._prevTop=t.clientY)),"intersect"==a.tolerance&&("horizontal"===a.orientation?i.left<u.left?(_lyteUiUtils.insertBefore(L,D),N(a,y,L)):i.right>u.right&&(_lyteUiUtils.insertAfter(L,D),N(a,y,L)):(a.gridView&&i.left<u.left||i.top<u.top)&&L.previousElementSibling!=D?(_lyteUiUtils.insertBefore(L,D),N(a,y,L)):(a.gridView&&i.right>u.right||i.bottom>u.bottom)&&L.nextElementSibling!=D&&(_lyteUiUtils.insertAfter(L,D),N(a,y,L)))):y&&$L(y).hasClass("sortable-parent")&&de(y,g.parentElement,g,a.connectedWith,a.containmentDimensions,f)&&ce(y,f)&&he(y,f,g,s,o)&&(!a.preventDropAtEnd||q(a,y))&&(_lyteUiUtils.appendChild(y,D),N(a,y,L)),a._belowElem=null!=y?y:a._belowElem,a.onDrag&&X(a,t),n.isOver(t,a),a._isMoved=!0,L=null,y=null}}));n.mutateQueue.push(l)}}}));n.measureQueue.push(l)}}));n.mutateQueue.push(M)}}));n.measureQueue.push(H)}}}else g=null},O=function(t){t.target;if(x&&w&&(E(w),x=!1,w=null),S&&T&&(E(T),S=!1,T=null),n.measureQueue.length)for(;n.measureQueue.length;)$L.fastdom.clear(n.measureQueue.shift());if(n.mutateQueue.length)for(;n.mutateQueue.length;)$L.fastdom.clear(n.mutateQueue.shift());if("mouseup"==t.type&&(document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",O)),"touchend"==t.type&&(document.removeEventListener("touchmove",R,{capture:!0,passive:!1}),document.removeEventListener("touchend",O,!0)),n.prevSortable&&(n.prevSortable=!1),!(n.draggedEle&&$L(n.draggedEle).hasClass("sortable-element-selected")&&n.draggedEle._sortableChildData._isDown))return F(t),g=null,n.draggedEle=null,void(n.mousedownTriggered=!1);if((g=n.draggedEle).classList.remove("lyteSortableDisablePE"),g){var a=g._sortableChildData;g.parentElement;if(a._isDown){a._isDown=!1,_=a._div;var o=(D=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:a._placeholder).parentElement;if(a._isMoved){a._isMoved=!1,a._toIndex=z(a,D,Array.from(o.children).filter((function(e){return"TEMPLATE"!=e.tagName&&!$L(e).hasClass("sortable-element-selected")})));var i=!0;if(a.onBeforeDrop&&(i=Q(a,t,D,o)),$L(D).hasClass(a.disabled))return ue(a),n.draggedEle=null,void(n.mousedownTriggered=!1);if(!i)return ue(a),be(_)&&_.remove(),_.preventScrollX&&delete _.preventScrollX,n.draggedEle=null,void(n.mousedownTriggered=!1);var r=ye(D)?ye(D):me(D),s=r&&r._sortableChildData?Object.assign({},r._sortableChildData):Object.assign({},D.parentElement._sortableParentData);a._fromIndex==a._toIndex&&a._parentElem==o?D.remove():_lyteUiUtils.replaceWith(D,_),fe(_),D=null,_._sortableChildData=s,a.onDrop&&Z(a,t),be(_)&&delete _._origin}else fe(_),be(_)&&(delete _._origin,_.remove()),"a"==g.tagName.toLowerCase()&&(e.location.href=g.href);a._div=null,a._placeholder=null,a._placedPlaceholder=!1,a._returnElemBelow=null,a._belowElem=null,a._source=null,a._fromIndex=null}$L(g).removeClass("sortable-element-selected"),v=null,null,null,f=null,y=null,null,b=null,P=null,m=null,g=null,D=null,_=null,k=null}F(t),n.draggedEle=null,n.mousedownTriggered=!1},F=function(e){for(var t=e.target.ownerDocument.querySelectorAll(".lyteSortablePlaceholder"),a=0;a<t.length;a++)if(t[a]._callee){var o=t[a]._callee;_lyteUiUtils.replaceWith(t[a],o),$L(o).removeClass("sortable-element-selected"),fe(o),be(o)&&o.remove()}else t[a].remove();var i=e.target.ownerDocument.querySelectorAll(".sortable-element-selected");for(a=0;a<i.length;a++)$L(i[a]).removeClass("sortable-element-selected"),fe(i[a]),be(i[a])&&i[a].remove()};p.changeScrollBoundaries=function(e){e&&(e.top=void 0!==e.top?e.top:p._sortableParentData.scrollBoundaries.top,e.bottom=void 0!==e.bottom?e.bottom:p._sortableParentData.scrollBoundaries.bottom,e.left=void 0!==e.left?e.left:p._sortableParentData.scrollBoundaries.left,e.right=void 0!==e.right?e.right:p._sortableParentData.scrollBoundaries.right);var t=p.querySelector(".sortable-element-selected");t&&(t._sortableChildData.scrollBoundaries=e),p._sortableParentData.scrollBoundaries=e},p.addToSortable=function(e){e._sortableChildData=p._sortableParentData,$L(e).addClass("sortable-element "+p._sortableParentData.sortableElemClass)},p.getSortableClass=function(){return p._sortableParentData.sortableElemClass},p.removeFromSortable=function(e){delete e._sortableChildData,$L(e).removeClass("sortable-element "+p._sortableParentData.sortableElemClass)},p.addToConnectedWith=function(e,t){var a=p._sortableParentData.connectedWith?p._sortableParentData.connectedWith:[];if(void 0!==e.length)for(var o=0;o<e.length&&-1===a.indexOf(e[o]);o++)a.push(e[o]);else a.push(e);var i=a.indexOf(p);a.splice(i,1),a.push(p),p._sortableParentData.connectedWith=a;var r=p.querySelector(".sortable-element-selected"),n=0;if(r){var l=p._sortableParentData.scrollDivX,d=l.children;n=(n=r.getBoundingClientRect().right-d[d.length-1].getBoundingClientRect().right)>0?n:0,M=p._sortableParentData&&l?l.scrollWidth-l.clientWidth:0,r._sortableChildData.connectedWith=a,r._sortableChildData._maxScrollWidth=M-n,r.parentElement._sortableParentData._maxScrollWidth=M-n,p._sortableParentData._maxScrollWidth=M-n}var c=$L(e).not(".sortable-parent");c.length&&((t=t||{}).isSameClass&&(t.connectedWith=a,t.connected=!0),t.restrict=t.restrict?t.restrict:s.restrict,t.sortableElemClass=s.sortableElemClass,t._parentElem=$L(e)[0],$L(c).sortable(Object.assign({},t)))};var N=function(e,t,a){!e.onPlaceholder||te(e,t||a.parentElement)?(D.classList.contains(e.disabled)&&D.classList.remove(e.disabled),D.classList.add(e.placeholder)):(D.classList.contains(e.placeholder)&&D.classList.remove(e.placeholder),D.classList.add(e.disabled)),e._returnElemBelow=a||t},I=function(e,t,a,o,i,r){if(e._div){var n=e._div.getBoundingClientRect();if(L=e.scrollDivX.scrollLeft,M=e._maxScrollWidth,!_lyteUiUtils.getRTL()||!_lyteUiUtils.isNegativeScroll()&&_lyteUiUtils.getRTL()&&"chrome"==l()&&!r)if(n.right>=t.right+e.scrollBoundaries.right&&L<M)M-L>=5?(e.scrollDivX.scrollLeft+=5,r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left+5+L+"px")):(e.scrollDivX.scrollLeft+=(M-L)%5,r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left+(M-L)%5+L+"px"));else{if(!(n.left<=t.left-e.scrollBoundaries.left&&L>0))return E(T),S=!1,void(T=null);r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left-(M-L>5?5:5-(M-L))+L+"px"),e.scrollDivX.scrollLeft-=5}else if(!_lyteUiUtils.isNegativeScroll()&&"chrome"==l()&&r)if(n.right>=t.right+e.scrollBoundaries.right&&L<M)M-L>=5?(e.scrollDivX.scrollLeft+=5,r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left+5+(L-M)+"px")):(e.scrollDivX.scrollLeft+=5-(M-L),r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left+(5-(M-L))+L+"px"));else{if(!(n.left<=t.left-e.scrollBoundaries.left&&L>0))return E(T),S=!1,void(T=null);r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left-(M-L+5)+"px"),e.scrollDivX.scrollLeft-=5}else if(_lyteUiUtils.isNegativeScroll()&&"chrome"==l()||"firefox"==l()||"safari"==l())if(n.right>=t.right+e.scrollBoundaries.right&&L<0)M+L>=5?(e.scrollDivX.scrollLeft+=5,r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left+5+L+"px")):(e.scrollDivX.scrollLeft+=5-(M+L),r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left+(5-(M+L))+L+"px"));else{if(!(n.left<=t.left-e.scrollBoundaries.left&&L>-M))return E(T),S=!1,void(T=null);r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left+(L-5)+"px"),e.scrollDivX.scrollLeft-=5}else if("ie"==l()||"edge"==l())if(n.right>=t.right&&L>0)e.scrollDivX.scrollLeft-=L>=5?5:L;else{if(!(n.left<=t.left-e.scrollBoundaries.left&&L<M))return E(T),S=!1,void(T=null);r&&e.scrollDivX.contains(e._div)&&(e._div.style.left=a.x-o[0]-i.left-L-5+"px"),e.scrollDivX.scrollLeft+=5}T=A(I.bind(this,e,t,a,o,i,r))}},B=function(e,t,a,o,i,r,n,s,l){$L.fastdom.measure((function(){if(e._div){var d=e._div.getBoundingClientRect();e.containmentDimensions=ie(e,e._div,e.containmentBoundaries);var p=t.scrollTop,c=(t===document.documentElement?0:t.getBoundingClientRect().top)-e.scrollBoundaries.top,h=t!==document.documentElement?t.offsetHeight:t.clientHeight;if(h<$L(e._div)[0].parentElement.offsetHeight){var u=$L(e._div)[0].parentElement.querySelectorAll("."+e.sortableElemClass);u=u[u.length-1];var f=!1}else f=!0;o=t.scrollHeight-h,$L.fastdom.mutate((function(){if(e._div){if(d.top-parseInt(e._marginTop)<=c&&p>0&&!(e.containmentDimensions&&e.containmentDimensions.top>d.top))r&&t.contains(e._div)?e._div.style.top=n.y-s[1]-l.top-(o-p>=10?10:o-p)+p+"px":t===document.documentElement&&(e._div.style.top=e._div.offsetTop-(o-p>=10?10:o-p)+"px"),t.scrollTop-=10;else{if(!(d.bottom>=c+h+e.scrollBoundaries.top+e.scrollBoundaries.bottom-3&&p<o)||e.containmentDimensions&&e.containmentDimensions.bottom<d.bottom||!(f||u.getBoundingClientRect().bottom>c+e.scrollBoundaries.top+e.scrollBoundaries.bottom+h))return 0==p&&d.top-parseInt(e._marginTop)<=c&&!H(e,"first")?V(e,"first"):p==o&&d.bottom>=c+e.scrollBoundaries.top+h+e.scrollBoundaries.bottom-3&&!H(e,"last")&&V(e,"last"),E(w),x=!1,void(w=null);o-p>10?(r&&t.contains(e._div)?e._div.style.top=n.y-s[1]-l.top+10+p+"px":t===document.documentElement&&(e._div.style.top=e._div.offsetTop+10+"px"),t.scrollTop+=10):(r&&t.contains(e._div)?e._div.style.top=n.y-s[1]-l.top+o-p+p+"px":t===document.documentElement&&(e._div.style.top=e._div.offsetTop+o-p+"px"),t.scrollTop+=o-p)}w=A(B.bind(this,e,t,a,o,i,r,n,s,l))}}))}}))},H=function(e,t){var a=e._placeholder,o=a.parentElement,i=U(e,o);return"first"===t?i[0]==a:i[i.length-1]==a},U=function(e,t){return e&&e.omitRestricted?Array.from(t.children).filter((function(t){return"TEMPLATE"!=t.tagName&&j(e,t)})):Array.from(t.children).filter((function(e){return"TEMPLATE"!=e.tagName}))},V=function(e,t){var a=e._placeholder,o=a.parentElement,i=U(e,o);if(!e.gridView)if("first"===t){for(var r=0;r<i.length;r++)if(!e.preventDropAtStart||j(e,i[r])&&!i[r].classList.contains("sort-disabled-element")){_lyteUiUtils.insertBefore(i[r],a);break}}else for(r=i.length-1;r>=0;r--)if(!e.preventDropAtEnd||j(e,i[r])&&!i[r].classList.contains("sort-disabled-element")){_lyteUiUtils.insertAfter(i[r],a);break}},j=function(e,t){for(var a=0;a<e.restrict.length;a++)if(t.matches(e.restrict[a]))return!1;return!0},q=function(e,t){var a=U(null,t);return!a.length||j(e,a[a.length-1])},Y=function(e,t){if(!e.draggable)return!1;for(var a=0;a<e.cancel.length;a++)for(var o=t;o.parentElement;){if(o.matches(e.cancel[a]))return!1;if($L(o).hasClass("sortable-element"))break;o=o.parentElement}return!0},z=function(e,t,a){if(e.omitRestricted)for(var o=0;o<a.length;o++)j(e,a[o])||(a.splice(o,1),--o);for(var i=0;i<a.length;i++)if("TEMPLATE"!=a[i].tagName&&t==a[i])return i},W=function(e){var t=be(e._div)?e._div._origin:e._div;if(e.omitRestricted){for(var a=Array.from(e._source.children).filter((function(e){return"TEMPLATE"!=e.tagName})),o=0;o<a.length;o++)j(e,a[o])||(a.splice(o,1),--o);return a.indexOf(t)}return Array.from(e._source.children).filter((function(e){return"TEMPLATE"!=e.tagName})).indexOf(t)},K=function(e){var t=be(e._div)?e._div._origin:e._div,a=e._parentElem;return t.classList.contains("sortable-parent")&&t.parentElement.classList.contains("sortable-parent")&&(a=t.parentElement),a},G=function(e,t){e._div.preventScrollX=function(t){e._div._sortableChildData.preventScroll=t,e._parentElem._sortableParentData.preventScroll=t};var a=e.onSelect(e._div,e._fromIndex,e._source,t);return null==a||1==a||(delete e._div.preventScrollX,!1)},J=function(e,t){e.onDragStart(e._div,e._source,t,e._div._origin)},X=function(e,t){var a=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:e._placeholder;e.onDrag(e._div,e._returnElemBelow,t,a,e._belowElem)},Q=function(e,t,a){var o=e.onBeforeDrop(e._div,e._returnElemBelow,a,e._fromIndex,e._toIndex,e._source,a?a.parentElement:null,t);return null==o||o},Z=function(e,t){e.onDrop(e._div,e._div._sortableChildData._parentElem,e._returnElemBelow,e._fromIndex,e._toIndex,e._source,t)},ee=function(e,t){var a=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:e._placeholder;e.onMultiSelectDrag(e._div,t,a,a.parentElement)},te=function(e,t){if(t.id&&"dummy"==t.id)t=t.parentElement;else for(;t&&!$L(t).hasClass("sortable-parent");)t=t.parentElement;var a=1==document.querySelectorAll("#dummy").length?document.querySelectorAll("#dummy")[0]:e._placeholder,o=e.onPlaceholder(e._div,a,e._parentElem,a?a.parentElement:null);return null==o||o},ae=U(s,s._parentElem);if(s.dblTouchEvent){var oe=0;s._parentElem.__mouseDownEvent=function(e){if("mousedown"==e.type)Le(e);else{var t=(new Date).getTime(),a=e.touches;e.touches[0].clientY;const o=200;1==a.length&&(Y(s._parentElem._sortableParentData,e.target)&&$L(e.target).one("touchend",(function(e){e.preventDefault()})),t-oe<o&&1==a.length&&(oe=0,e.preventDefault(),Le(e))),oe=t}}}else s._parentElem.__mouseDownEvent=Le;s._parentElem.__mouseMoveEvent=R,s._parentElem.__mouseUpEvent=O,s._parentElem._sortableParentData=s;for(_e=0;_e<ae.length;_e++)ae[_e]._pos=_e,j(s,ae[_e])&&!ae[_e].classList.contains("sortable-element-selected")&&(ae[_e]._sortableChildData=s,$L(ae[_e]).addClass("sortable-element "+s.sortableElemClass));s.draggable&&!s._parentElem._mousedown&&(s._parentElem.addEventListener("mousedown",s._parentElem.__mouseDownEvent),s._parentElem.addEventListener("touchstart",s._parentElem.__mouseDownEvent,!0),s._parentElem._mousedown=!0),!s.connected&&s.connectedWith.length>0&&(s.connectedWith=n.convertToArrayOfItems(s.connectedWith,s.context),s.connectedWith.forEach((function(e){var t=s.connectedWith.concat(),a=t.indexOf(e);t.splice(a,1),t.push(e),s.multiSortable&&c&&c.connectedWith?s.connectedWith=c.connectedWith:$L(e).sortable({_parentElem:$L(e)[0],connectedWith:t,connected:!0,restrict:s.restrict,sortableElemClass:s.sortableElemClass,dblTouchEvent:s.dblTouchEvent})}))),s.onReady&&!s._parentElem.executedOnReady&&(!function(e){e.onReady(e._parentElem)}(s),s._parentElem.executedOnReady=!0);var ie=function(e,t,a){if("parent"==e.containment)return{left:(o=be(t)?t._origin.parentElement.getBoundingClientRect():t.parentElement.getBoundingClientRect()).left-a.left,right:o.right+a.right,top:o.top-a.top,bottom:o.bottom+a.bottom,height:o.height+a.top+a.bottom,width:o.width+a.left+a.right,offsetLeft:be(t)?t._origin.parentElement.offsetLeft-a.left:t.parentElement.offsetLeft-a.left,offsetTop:be(t)?t._origin.parentElement.offsetTop-a.top:t.parentElement.offsetTop-a.top};var o,i=null==$L(e.containment).length?null:$L(e.containment)[0];return{left:(o=i.getBoundingClientRect()).left-a.left,right:o.right+a.right,top:o.top-a.top,bottom:o.bottom+a.bottom,height:o.height+a.top+a.bottom,width:o.width+a.left+a.right,offsetLeft:i.offsetLeft-a.left,offsetTop:i.offsetTop-a.top}},re=function(t){for(var a=t.parentElement;t.parentElement;)if(t=t.parentElement,a.scrollHeight>t.clientHeight&&("hidden"!=e.getComputedStyle(t).overflowY&&"visible"!=e.getComputedStyle(t).overflow||t.matches(".lyteScrollBar")/*!(elem.style.overflow && elem.style.overflow == 'hidden')*/))return t;return null},ne=function(e){for(var t=e.children,a=[],o=0;o<t.length;o++)"td"!=t[o].tagName.toLowerCase()&&"lyte-td"!=t[o].tagName.toLowerCase()||(t[o].__prevWidth=t[o].style.width,a[o]=t[o].__prevWidth||t[o].offsetWidth+"px");for(o=0;o<t.length;o++)"td"!=t[o].tagName.toLowerCase()&&"lyte-td"!=t[o].tagName.toLowerCase()||(t[o].style.width=a[o])},se=function(e){for(;e.parentElement;){e=e.parentElement;var t=getComputedStyle(e);if("relative"==t.position||"absolute"==t.position)return e}return null},le=function(e,t,a,o,i,r){if("dummy"!=e.id){a.parentElement.id,e.parentElement.id;if(i&&(r.x<i.left||r.x>i.right||r.y<i.top||r.y>i.bottom))return!1;if(a.parentElement==e.parentElement||e.parentElement==a._sortableChildData._parentElem)return!0;if(-1!=o.indexOf(e.parentElement)&&e._sortableChildData.droppable)return!0}return!1},de=function(e,t,a,o,i,r){a.parentElement.id;return(!i||!(r.x<i.left||r.x>i.right||r.y<i.top||r.y>i.bottom))&&(a.parentElement==e||e==t||!(-1==o.indexOf(e)||!pe(e)))},pe=function(e){for(var t,a=e.children,o=0;o<a.length;o++)if(a[o]!=e.querySelector("#dummy")&&"TEMPLATE"!=a[o].tagName&&$L(a[o]).hasClass("sortable-element")){t=a[o];break}return t&&t._sortableChildData?t._sortableChildData.droppable:e._sortableParentData.droppable},ce=function(t,a){var o=e.getComputedStyle(t),i=t.getBoundingClientRect();return a.x>i.left+parseFloat(o.paddingLeft||0)&&a.x<i.right-parseFloat(o.paddingRight||0)&&a.y>i.top+parseFloat(o.paddingTop||0)&&a.y<i.bottom-parseFloat(o.paddingBottom||0)},he=function(e,t,a,o,i){for(var r=e.children,n=0,s=[],l=0;l<r.length;l++)"TEMPLATE"!=r[l].tagName&&"dummy"!=r[l].id&&j(e._sortableParentData,r[l])?s.push(r[l]):n++;return n==r.length||(1==s.length&&s[s.length-1]==a||s.length>1&&s[s.length-1]==a&&a.getBoundingClientRect().top>s[s.length-2].getBoundingClientRect().bottom+(o?i.scrollTop:0)||a.getBoundingClientRect().top>s[s.length-1].getBoundingClientRect().bottom+(o?i.scrollTop:0))},ue=function(e){$L(e._div).removeClass("sortable-element-selected"),fe(e._div),e._placeholder.remove()},fe=function(e){e.style.position="",e.style.top="",e.style.left="",e.style.width="",e.style.height="",e.style.zIndex="",e.style.boxSizing="",$L(e).removeClass("lyteSortableElem"),$L(e).removeClass("lyteSortableDisablePE"),be(e)&&$L(e).removeClass("sortable-helper"),"tr"!=e.tagName.toLowerCase()&&"lyte-tr"!=e.tagName.toLowerCase()||function(e){for(var t=e.children,a=0;a<t.length;a++)"td"!=t[a].tagName.toLowerCase()&&"lyte-td"!=t[a].tagName.toLowerCase()||(t[a].style.width=t[a].__prevWidth)}(e)},ye=function(e){for(;e.previousElementSibling;)if("TEMPLATE"!=(e=e.previousElementSibling).tagName&&$L(e).hasClass("sortable-element"))return e;return null},me=function(e){for(;e.nextElementSibling;)if("TEMPLATE"!=(e=e.nextElementSibling).tagName&&$L(e).hasClass("sortable-element"))return e;return null},ge=function(e,t){if(!(e.items.length>0))return!0;for(var a=0;a<e.items.length;a++)for(var o=document.querySelectorAll(e.items[a]),i=0;i<o.length;i++)if(o[i]==t)return!0;return!1},ve=function(e,t){var a;if(t)for(var o=(a=e.cloneNode(t)).children,i=e.children,r=0;r<o.length;r++){var n=i[r].getBoundingClientRect();o[r].style.width=n.width+"px",o[r].style.height=n.height+"px",o[r].classList.add("lyteSortableDummyTr")}else(a=e.cloneNode()).innerHTML="",a.style.boxSizing="border-box";return a._callee=e,a.classList.remove("sortable-element-selected","sortableElem"),be(e)&&(a.style.visibility=""),a},be=function(e){return e.classList.contains("sortable-helper")||e._isHelper};return this}De=this;s.changed||(++n.countSortable,s.changed=!0);var Pe=n.alreadySortable(this);Pe.found&&(s.sortableElemClass=Pe.class);for(_e=0;_e<De.length;_e++)De[_e]._sortableParentData&&s.isSameClass&&(De[_e]._sortableParentData.connectedWith.length!==$L(s.connectedWith,s.context).length?s.connectedWith=n.convertToArrayOfItems(s.connectedWith,s.context):s.connectedWith=De[_e]._sortableParentData.connectedWith),$L(De[_e]).sortable(Object.assign({},s))}else if("destroy"===t)if(this.length>1)for(var De=this,_e=0;_e<De.length;_e++)n.destroy(De[_e]);else n.destroy(this[0]);else if("cancel"===t)if(this.length>1)for(var De=this,_e=0;_e<De.length;_e++)n.cancel(De[_e]);else n.cancel(this[0]);else"disable"===t?n.disable(this):"enable"===t?n.enable(this):"disableDroppable"===t?n.disableDroppable(this):"enableDroppable"===t&&n.enableDroppable(this);function Le(t){if(3!=t.which)if(h=t.clientX,u=t.clientY,n.mousedownTriggered)n.mousedownTriggered=!1;else{for(var a=t.target;a;){if($L(a).hasClass("sortable-element")){g=a;break}a=a.parentElement}if(a||(g=null,n.draggedEle=null),g&&Y(g._sortableChildData||g.parentElement._sortableParentData,t.target)&&ge(g._sortableChildData||g.parentElement._sortableParentData,t.target)){n.draggedEle=g;var o=g._sortableChildData||g.parentElement._sortableParentData;if((null==o.preventDefault.mousedown||o.preventDefault.mousedown)&&t.preventDefault(),g.parentElement&&!g.classList.contains(g.parentElement._sortableParentData.sortableElemClass)&&g.classList.add(g.parentElement._sortableParentData.sortableElemClass),"function"==typeof o.helper){var i=o.helper(g);i&&(i._isHelper=!0,i.classList.add("sortable-helper"),i._sortableChildData=Object.assign({},g._sortableChildData),i.classList.add(g.parentElement._sortableParentData.sortableElemClass),i._origin=g,n.draggedEle=i,"parent"==o.appendTo?_lyteUiUtils.appendChild(g.parentElement,i):_lyteUiUtils.appendChild($L(o.appendTo)[0],i),o=i._sortableChildData,i.style.visibility="hidden")}D=ve(n.draggedEle,o.clone),o._div=_=n.draggedEle;var r=!0;if(o._source=K(o),o._fromIndex=W(o),o.onSelect&&(r=G(o,t)),r){_.classList.add("sortable-element-selected");var s=e.getComputedStyle(_),l=be(_)?_._origin.getBoundingClientRect():_.getBoundingClientRect();o.scrollDivX&&"relative"==e.getComputedStyle(o.scrollDivX).position?o._isRelative=!0:o._isRelative=!1,s.marginTop&&(b=s.marginTop),s.marginLeft&&(P=s.marginLeft),"mousedown"==t.type?v=[o.cursorAt&&o.cursorAt.left||t.clientX-l.left,o.cursorAt&&o.cursorAt.top||t.clientY-l.top]:"touchstart"==t.type&&(v=[o.cursorAt&&o.cursorAt.left||t.touches[0].clientX-l.left,o.cursorAt&&o.cursorAt.top||t.touches[0].clientY-l.top],document.addEventListener("touchmove",o._parentElem.__mouseMoveEvent,{capture:!0,passive:!1}),document.addEventListener("touchend",o._parentElem.__mouseUpEvent,!0)),o._isDown=!0,o._placeholder=D,o._offset=v,o._marginTop=b,o._marginLeft=P,o._event=t,o._placedPlaceholder=!1,n.draggedEle._sortableChildData||(n.draggedEle._sortableChildData=o),D=null,_=null,g=null,"mousedown"==t.type&&(document.addEventListener("mousemove",R),document.addEventListener("mouseup",O),n.mousedownTriggered=!0,"Windows"===d()&&(n.mouseMoveTriggered=!0))}else o.cancelRemove||(o.helper&&n.draggedEle.remove(),n.draggedEle=null,g=null)}else g=null}}})}(window),Lyte.Component.register("lyte-messagebox",{_template:'<template tag-name="lyte-messagebox" role="status"> <template is="if" value="{{ltPropShow}}"> <template case="true"><lyte-wormhole style="visibility: hidden" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}" on-append="{{method(&quot;afterWormholeAppend&quot;)}}" lt-prop-show="{{ltPropShow}}" lt-prop-focus-on-close="{{ltPropFocusOnClose}}"> <template is="registerYield" yield-name="lyte-content"> <div class="{{lyteUiMsgBoxConcatClass(ltPropClass,ltPropType,\'MessageIcon\',\'lyteMessageBox\')}}"> <template is="if" value="{{ltPropType}}"><template case="true"> <span class="lyteMessageBoxSymbol"></span> </template></template> <template is="if" value="{{ltPropYield}}"><template case="true"> <span class="lyteMessageBoxContent"> <lyte-yield yield-name="messageboxYield"></lyte-yield> </span> </template><template case="false"> <template is="if" value="{{lyteUiIfEquals(ltPropMessage,\'\')}}"> <template case="false"><div> <span class="lyteMessageBoxContent">{{ltPropMessage}}</span> </div></template> </template> </template></template> <template is="if" value="{{ltPropShowCloseButton}}"><template case="true"><span class="lyteMessageBoxClose" onclick="{{action(\'closeMessageBox\')}}"></span></template></template> </div> </template> </lyte-wormhole></template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{false:{dynamicNodes:[{type:"text",position:[0,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[0]}]}},default:{}}],_observedAttributes:["ltPropType","ltPropShow","ltPropMessage","ltPropDuration","ltPropOffset","ltPropTransition","ltPropYield","ltPropClass","ltPropCloseManually","onResizeBoolean","ltPropShowCloseButton","ltPropFocusOnClose"],init:function(){var e=this;this.$node.alignMessageBox=function(){e.setData("onResizeBoolean",!0),e.computeOffsetImpl()}},data:function(){return{ltPropType:Lyte.attr("string",{default:"success"}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropMessage:Lyte.attr("string",{default:""}),ltPropDuration:Lyte.attr("string",{default:"2000"}),ltPropOffset:Lyte.attr("object",{default:null}),ltPropTransition:Lyte.attr("object",{default:{animation:"fadeIn",duration:"0.2s"}}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropClass:Lyte.attr("string",{default:""}),ltPropCloseManually:Lyte.attr("boolean",{default:!1}),onResizeBoolean:Lyte.attr("boolean",{default:!1}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropFocusOnClose:Lyte.attr("boolean",{default:!1})}},setDuration:function(){var e=this.$node.ltProp("duration");""!=e&&this.setData("ltPropDuration",e)}.observes("ltPropDuration"),computeOffsetImpl:function(){var e=this.actualMessageDiv;this.fastdomfn1=$L.fastdom.measure((function(){delete this.fastdomfn1;var t=e.getBoundingClientRect(),a=Object.assign({},this.$node.ltProp("offset")),o=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(this.$node.ltProp("offset")){if("center"===a.left||"center"===a.right||null==a.left||""==a.left){var r=(o-t.width)/2;r<0&&(r=20),a.left=r+"px"}if("center"===a.top||"center"===a.bottom){var n=(i-t.height)/2;n<0&&(n=20),a.top=n+"px"}a.right&&"center"!==a.right&&(a.right.indexOf("%")>-1?a.left=o-(t.width+o/parseFloat(a.right))+"px":a.left=o-(t.width+parseFloat(a.right))+"px"),a.bottom&&"center"!==a.bottom&&(a.bottom.indexOf("%")>-1?a.top=i-(t.height+i/parseFloat(a.bottom))+"px":a.top=i-(t.height+parseFloat(a.bottom))+"px"),a.top||(a.top=20),this.fastdomfn2=$L.fastdom.mutate((function(){delete this.fastdomfn2,e.style.left=parseFloat(a.left)+"px","slideFromTop"===this.getData("ltPropTransition").animation?(e.style.top=-1*t.height+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",e.style.transform="translate(0px,"+(parseFloat(a.top)+t.height)+"px)"):"slideFromBottom"===this.getData("ltPropTransition").animation?(e.style.top=window.innerHeight+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",e.style.transform="translate(0px,"+(parseFloat(a.top)-window.innerHeight)+"px)"):(this.actualMessageDiv.style.visibility="visible",e.style.top=parseFloat(a.top)+"px"),this.getData("onResizeBoolean")||this.showMessagebox()}),this)}else{var s;s=(document.body.clientWidth-t.width)/2,this.fastdomfn3=$L.fastdom.mutate((function(){delete this.fastdomfn3,e.style.left=parseFloat(s)+"px","slideFromTop"===this.getData("ltPropTransition").animation?(e.style.top=-1*t.height+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",e.style.transform="translate(0px,"+(t.height+20)+"px)"):"slideFromBottom"===this.getData("ltPropTransition").animation?(e.style.top=window.innerHeight+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",e.style.transform="translate(0px,"+(t.height+20-window.innerHeight)+"px)"):(this.actualMessageDiv.style.visibility="visible",e.style.top="20px"),this.getData("onResizeBoolean")||this.showMessagebox()}),this)}}),this)},closeMessageBoxFn:function(e){this.setData("onResizeBoolean",!1),this.timeOutId&&(clearInterval(this.timeOutId),this.timeOutId=!1),this.childComp&&document.contains(this.childComp)&&this.childComp.remove(),delete this.actualMessageDiv,delete this.childComp,!e&&this.getMethods("onClose")&&this.executeMethod("onClose",this),window.removeEventListener("resize",this.$node.alignMessageBox)},clearFastdom:function(){this.fastdomfn1&&($L.fastdom.clear(this.fastdomfn1),delete this.fastdomfn1),this.fastdomfn2&&($L.fastdom.clear(this.fastdomfn2),delete this.fastdomfn2),this.fastdomfn3&&($L.fastdom.clear(this.fastdomfn3),delete this.fastdomfn3)},showToggled:function(){this.$node.ltProp("show")||this.closeMessageBoxFn()}.observes("ltPropShow").on("didConnect"),showMessagebox:function(){var e=parseInt(this.getData("ltPropDuration")),t=this;this.timeOutId=setInterval((function(){clearInterval(t.timeOutId),t.$node&&!t.getData("ltPropCloseManually")&&("slideFromTop"===t.getData("ltPropTransition").animation||"slideFromBottom"===t.getData("ltPropTransition").animation?(t.actualMessageDiv.style.transform="",setTimeout((function(){t.$node&&t.setData("ltPropShow",!1)}),500)):(t.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),t.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),setTimeout((function(){t.$node&&t.setData("ltPropShow",!1)}),500)),t.timeOutId=!1)}),e),window.addEventListener("resize",this.$node.alignMessageBox)},didDestroy:function(){this.clearFastdom(),(this.timeOutId||this.getData("ltPropShow"))&&(clearInterval(this.timeOutId),"slideFromTop"===this.getData("ltPropTransition").animation&&this.actualMessageDiv||"slideFromTop"!=this.getData("ltPropTransition").animation&&this.actualMessageDiv?(this.actualMessageDiv.style.transform="",this.setData("ltPropShow",!1)):(this.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),this.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),this.setData("ltPropShow",!1)),this.timeOutId=!1,this.closeMessageBoxFn(!0)),window.removeEventListener("resize",this.$node.alignMessageBox)},actions:{closeMessageBox:function(){clearInterval(this.timeOutId),this.timeOutId=!1;var e=this;"slideFromTop"===e.getData("ltPropTransition").animation||"slideFromBottom"===e.getData("ltPropTransition").animation?(e.actualMessageDiv.style.transform="",setTimeout((function(){e.$node&&e.setData("ltPropShow",!1)}),200)):(e.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),e.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),setTimeout((function(){e.$node&&e.setData("ltPropShow",!1)}),500)),window.removeEventListener("resize",this.$node.alignMessageBox)}},methods:{onBeforeShow:function(){},onShow:function(){},beforeWormholeAppend:function(e){this.childComp=e,this.actualMessageDiv=this.childComp.querySelector(".lyteMessageBox"),this.actualMessageDiv.style.position="fixed"},afterWormholeAppend:function(e){var t=100*parseFloat(this.getData("ltPropTransition").duration);this.getData("ltPropDuration")&&(t=parseFloat(this.getData("ltPropDuration")));var a=this;"slideFromTop"===this.getData("ltPropTransition").animation?(this.actualMessageDiv.classList.add("lyteMessageBoxSlideFromTop"),this.computeOffsetImpl(),setTimeout((function(){a.getMethods("onShow")&&a.executeMethod("onShow",a.actualMessageDiv)}),t)):"slideFromBottom"===this.getData("ltPropTransition").animation?(this.actualMessageDiv.classList.add("lyteMessageBoxSlideFromBottom"),this.computeOffsetImpl(),setTimeout((function(){a.getMethods("onShow")&&a.executeMethod("onShow",a.actualMessageDiv)}),t)):(this.computeOffsetImpl(),this.actualMessageDiv.classList.add("lyteMessageBoxFadeIn"),setTimeout((function(){a.getMethods("onShow")&&a.executeMethod("onShow",a.actualMessageDiv)}),t))}}}),Lyte.Component.register("lyte-tooltip",{_template:'<template tag-name="lyte-tooltip"> </template>',_dynamicNodes:[],_observedAttributes:["ltPropId","ltPropClass","ltPropKeepAlive","ltPropTooltipConfig","ltPropIgnoreClass","ltPropAria","tooltips"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(e,t,a){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?a-t.left:"clientX"==e?a-t.clientX:a-t.right;if("left"==e)return"right";if("right"==e)return"left"}return t?t[e]:e},data:function(){var e=_lyteUiUtils.getDefault("lyte-tooltip");return{ltPropId:Lyte.attr("string",{default:e.id||""}),ltPropClass:Lyte.attr("string",{default:e.class||""}),ltPropKeepAlive:Lyte.attr("boolean",{default:e.keepAlive||!1}),ltPropTooltipConfig:Lyte.attr("object",{default:e.tooltipConfig||{}}),ltPropIgnoreClass:Lyte.attr("string",{default:e.ignoreClass||"lyteTooltipIgnore"}),ltPropAria:Lyte.attr("boolean",{default:e.aria||!1}),tooltips:Lyte.attr("object",{default:{}})}},focusev:function(e){$L.fastdom.mutate(function(){this.$node.trigger("focus"==e.type?e.target:document.body)}.bind(this))},didConnect:function(){this._dir=_lyteUiUtils.getRTL(),Array.from(document.body.getElementsByTagName("lyte-tooltip")).forEach(function(e){e!=this.$node&&document.body.removeChild(e)}.bind(this)),this._mousemove=this.mousemove.bind(this),this._mousedown=this.mousedown.bind(this),this._mouseup=this.mouseup.bind(this),this._keydown=this.keydown.bind(this),this._toolscroll=this.tooltipScroll.bind(this),document.addEventListener("mousemove",this._mousemove,!0),window.addEventListener("scroll",this._toolscroll,!0),document.addEventListener("keydown",this._keydown,!0),document.addEventListener("mousedown",this._mousedown,!0),document.addEventListener("touchstart",this._mousedown),this.data.ltPropAria&&this.bind_aria(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),this.$node.trigger=function(e){this.mousemove({target:e||document.body})}.bind(this)},aria_obs:function(e){e.newValue?this.bind_aria():this.remove_aria()}.observes("ltPropAria"),bind_aria:function(){this._focusev=this.focusev.bind(this),["focus","blur"].forEach(function(e){document.addEventListener(e,this._focusev,!0)}.bind(this))},remove_aria:function(){["focus","blur"].forEach(function(e){document.removeEventListener(e,this._focusev,!0)}.bind(this))},tooltipScroll:function(e){var t=this.data.tooltips;for(var a in t)t[a].classList.add("lyteTooltipHidden")},mousedown:function(e){this._mousedownFlag=!0;var t=e.target.correspondingElement||e.target,a=$L(t),o=/touch/i.test(e.type);if(!(o&&e.touches.length>1)){if(a.hasClass("lyteSliderHandler")&&(delete this.prevTooltipNode,this._slider=!0),a.hasClass("lyteTooltip")){var i=t.nodeName1;this.hover_process(i),this.closeAllTooltip(i,!0)}else this.closeAllTooltip(void 0,!0);document.addEventListener(o?"touchend":"mouseup",this._mouseup,!0)}},mouseup:function(e){if(delete this._mousedownFlag,document.removeEventListener(e.type,this._mouseup,!0),this._slider){delete this._slider;var t=e.target.correspondingElement||e.target;$L(t).hasClass("lyteSliderHandler")&&this.mousemove({target:t})}},keydown:function(e){delete this.prevTooltipNode,this.closeAllTooltip()},tooltipOpenCallback:function(e,t){e.onTooltipShow&&e.onTooltipShow.apply(this,arguments),this.getMethods("onTooltipShow")&&this.executeMethod("onTooltipShow",e,t,e.tooltip)},tooltipCloseCallback:function(e){e.onTooltipHide&&e.onTooltipHide.apply(this,arguments),this.getMethods("onTooltipHide")&&this.executeMethod("onTooltipHide",e)},didDestroy:function(){var e="removeEventListener",t=document;window[e]("scroll",this._toolscroll,!0),t[e]("mousemove",this._mousemove,!0),t[e]("mousedown",this._mousedown,!0),t[e]("touchstart",this._mousedown),t[e]("keydown",this._keydown,!0),this.data.ltPropAria&&this.remove_aria();var a=this.data.tooltips;for(var o in a){var i=a[o];delete i.nodeName1.tooltipSpan,delete i.nodeName1.tooltip,i.parentNode&&t.body.removeChild(i)}delete this.$node.trigger,["_toolscroll","_mousedown","_keydown","_mousemove","_focusev","__reuse"].forEach(function(e){delete this[e]}.bind(this)),this.data.tooltips=[],this.data.tooltips={}},propertySetting:function(e){var t=e.getAttribute("lt-prop-tooltip-config")||"{}",a=e.tooltip.config;for(var o in t=JSON.parse(t))a[o]=t[o]},createTooltip:function(e,t,a){if(a?this.followcursor(e,t):this.nonFollowcursor(e,t),!this.getData("ltPropKeepAlive")){var o=t.nodeName1.tooltip;1!=o.config.keeptooltip&&"true"!=o.config.keeptooltip&&(o.maxdisp=setTimeout(this.removeTooltip.bind(this,t),o.config.maxdisplaytime))}},followcursor:function(e,t){document.body.contains(t)&&(t._callbackHandled||(this.tooltipOpenCallback(t.nodeName1,t),t._callbackHandled=!0),t.classList.contains("lyteTooltipHidden")?(t.classList.remove("lyteTooltipHidden"),$L.fastdom.measure(this._followcursor.bind(this,e,t))):this._followcursor(e,t))},_followcursor:function(e,t){if(this.data.tooltips[t._random]){var a,o=t.getBoundingClientRect(),i=t.nodeName1.getBoundingClientRect(),r=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),n=window.pageYOffset||document.documentElement.scrollTop,s=window.innerWidth,l=window.innerHeight,d=Math.min(20,parseInt(t.nodeName1.tooltip.config.margin)),p=this.rtlfunc.call(this,"clientX",e,s),c=e.clientY+n+5+d;if(p+o.width>s)if(p-o.width>0)p-=o.width;else{var h=s-(this.rtlfunc("left",i,s)+i.width/2),u=s-h;p=h>o.width/2&&u>o.width/2?u-.5*o.width:Math.max(0,s-o.width),a=!0}t.style[this.rtlfunc.call(this,"left")]=p+r+"px",t.style.top=c+"px",a&&$L.fastdom.measure(function(){this.data.tooltips[t._random]&&(o=t.getBoundingClientRect()).bottom>l&&e.clientY>l-e.clientY&&(t.style.top=e.clientY-o.height-d-5+n+"px")}.bind(this))}},createsupp:function(e){var t=document.createElement("span");return t.classList.add("lyteTooltipInnerSpan"),e.classList.add("lyteInnerToolAdded"),e.appendChild(t)},rightalign:function(e,t,a,o,i,r,n,s,l,d,p,c,h){if(e+t<a+o.width)return i.classList.remove(l),r||this.nonFollowcursor(n,i,d,!0),!0;a<t?(h&&(this.createsupp(i).style[s]=.75*c-p+"px"),i.style[s]=0):i.style[s]=a+"px"},refresh:function(e,t){var a=t.nodeName1.tooltip;a.config,t.textContent=a.title=t.nodeName1.getAttribute("lt-prop-title"),this.clear_time(a),this.createTooltip(e,t)},clear_time:function(e,t){(t||["maxdisp","settime","bodyTimeout"]).forEach((function(t){clearTimeout(e[t]),delete e[t]}))},nonFollowcursor:function(e,t,a,o){var i,r="callout"==t.nodeName1.tooltip.config.appearance;t.classList.remove("lyteTooltipHidden"),i=(a=a||t.nodeName1.tooltip.config.position||(/focus/i.test(e.type||"focus")?"bottom":""))||"bottom",r&&t.classList.add("lyte"+i[0].toUpperCase()+i.slice(1)),t._callbackHandled||(this.tooltipOpenCallback(t.nodeName1,t),t._callbackHandled=!0),$L.fastdom.measure(function(){if((t.nodeName1||{}).tooltip){var i,n,s=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),l=window.pageYOffset||document.documentElement.scrollTop,d=window.innerWidth,p=window.innerHeight,c=t.getBoundingClientRect(),h=t.nodeName1.getBoundingClientRect(),u=this.rtlfunc("left",h,d)+s,f=h.top+l,y=t.nodeName1.tooltip.config,m=Math.min(parseInt(y.margin),20),g=t.offsetWidth,v=h.width,b=h.height,P=this.rtlfunc("left"),D=window.getComputedStyle(t),_=/content-box/.test(D.boxSizing),L=_?parseFloat(D.paddingLeft):0,C=_?parseFloat(D.paddingRight):0,w=(_&&parseFloat(D.paddingTop),_&&parseFloat(D.paddingBottom),$L(t));switch(r?(n=window.getComputedStyle(t,":before"),i=parseFloat(n.getPropertyValue("width"))/2*1.414,!isNaN(i)&&i||(i=parseFloat(window.getComputedStyle(t,"left"==a?":before":":after").getPropertyValue("border-left-width")))):i=0,a.toLowerCase()){case"right":var T=(u+=i)+v+m;if(t.style.top=f+b/2-c.height/2+"px",d+s<T+c.width){if(!o&&d-(u+v-s-i)<u-i-s){t.classList.remove("lyteRight"),this.nonFollowcursor.call(this,e,t,"left",!0);break}t.style[P]=T+"px",t.style.width=d-T-L-C+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){t.style.top=f+b/2-t.getBoundingClientRect().height/2+"px"}))}))}else t.style[P]=T+"px";break;case"left":if(T=(u-=i)-m-g,t.style.top=f+b/2-c.height/2+"px",T<s){if(!o&&u+i-s<d-(u+i-s+v)){t.classList.remove("lyteLeft"),this.nonFollowcursor.call(this,e,t,"right",!0);break}t.style[P]="0px",t.style.width=u-s-L-C+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){t.style.top=f+b/2-t.getBoundingClientRect().height/2+"px"}))}))}else t.style[P]=T+"px";break;case"bottom":if(T=u+v/2-g/2,l+p<(x=(f+=i)+b+m)+c.height&&(t.classList.remove("lyteBottom"),!o)){this.nonFollowcursor.call(this,e,t,"top",!0);break}T=this.horicheck(T,s,d,c,t,h,P,i,r),t.style[P]=T+"px",t.style.top=x+"px";break;case"top":if(T=u+v/2-g/2,(x=(f-=i)-m-t.clientHeight)<l&&(t.classList.remove("lyteTop"),!o)){this.nonFollowcursor.call(this,e,t,"bottom",!0);break}T=this.horicheck(T,s,d,c,t,h,P,i,r),t.style[P]=T+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){t.style.top=f-m-t.getBoundingClientRect().height+"px"}))}));break;case"bottomright":f+=i,T=u+.75*v-(r?parseFloat(n[P])+i:.2*g);var x=f+b+m;if(this.rightalign(d,s,T,c,t,o,e,P,"lyteBottomright","bottomleft",i,v,r)){w.removeClass("lyteBottomright");break}if(p+l<x+c.height){w.removeClass("lyteBottomright"),o?w.addClass("lyteTopright").css("top",f-i-c.height-m):this.nonFollowcursor(e,t,"topright",!0);break}t.style.top=x+"px";break;case"topright":if(f-=i,T=u+.75*v-(r?parseFloat(n[P])+i:.2*g),x=f-c.height-m,this.rightalign(d,s,T,c,t,o,e,P,"lyteTopright","topleft",i,v,r)){w.removeClass("lyteTopright");break}x<l?(w.removeClass("lyteTopright"),o?w.addClass("lyteBottomright").css("top",f+2*i+b+m):this.nonFollowcursor(e,t,"bottomright",!0)):w.css("top",x);break;case"bottomleft":if(f+=i,T=u+.25*v-(r?parseFloat(n[P]):.8*g)+"px",x=f+b+m+"px",parseInt(T)<s){t.classList.remove("lyteBottomleft"),o||this.nonFollowcursor.call(this,e,t,"bottomright",!0);break}if(t.style[P]=T,p+l<parseInt(x)+c.height){w.removeClass("lyteBottomleft"),o?w.addClass("lyteTopleft").css("top",f-i-c.height-m):this.nonFollowcursor(e,t,"topleft",!0);break}t.style.top=x;break;case"topleft":if(f-=i,T=u+.25*v-(r?parseFloat(n[P]):.8*g)+"px",x=f-c.height-m+"px",parseInt(T)<s){w.removeClass("lyteTopleft"),o?w.addClass("lyteTopright").css(P,u+.75*v-(r?parseFloat(n[P])+i:.2*g)):this.nonFollowcursor(e,t,"topright",!0);break}if(t.style[P]=T,parseInt(x)<l){w.removeClass("lyteTopleft"),o?w.addClass("lyteBottomleft").css("top",f+b+m+2*i):this.nonFollowcursor(e,t,"bottomleft",!0);break}w.css("top",x);break;default:var S=i;if(T=this.rtlfunc.call(this,"clientX",e,d)-g/2+s,p+l<(x=f+S+b+m)+c.height&&(t.classList.remove("lyteBottom"),!o)){this.nonFollowcursor.call(this,e,t,"top",!0);break}T=this.horicheck(T,s,d,c,t,h,P,i,r),t.style[P]=T+"px",t.style.top=x+"px"}t.style[this.rtlfunc("right")]="auto";var A=y.startClass,E=y.endClass,M=y.animationClass;A&&(w=$L(t).addClass(A),window.requestAnimationFrame((function(){w.addClass(M),window.requestAnimationFrame((function(){window.requestAnimationFrame((function(){w.addClass(E)}))}))})))}}.bind(this))},horicheck:function(e,t,a,o,i,r,n,s,l){var d,p;if(e<t?(e=t,d=!0):a+t<e+o.width&&(e=a-o.width+t,p=!0),(d||p)&&l){var c=this.createsupp(i);if(this.rtlfunc("left",r,a),d){var h=this.rtlfunc("left",r,a);c.style[n]=(Math.min(o.width,r.width)+Math.min(h,0))/2+Math.max(0,h)+"px"}else{var u=a-this.rtlfunc("right",r,a);c.style[n]=o.width-(Math.max(0,u)+(Math.min(o.width,r.width)+Math.min(u,0))/2)+"px"}}return e},closeAllTooltip:function(e,t){var a=this.data.tooltips;for(var o in a){var i=a[o];if(i.nodeName1!=e){var r=i.nodeName1.tooltip;if(!r){this.removeTooltip(i);continue}if(t&&!r.config.hideOnClick)continue;null==r.bodyTimeout&&(r.bodyTimeout=setTimeout(this.removeTooltip.bind(this),r.config.hidedelay,i))}}},removeTooltip:function(e){if(e.parentNode==document.body){var t=e.nodeName1;if(!t)return;var a=t.tooltip||{},o=a.config||{},i=o.endClass||"",r=o.reuse,n=function(){if(r){var t=e.style;t.opacity="0",t.pointerEvents="none"}else document.body.removeChild(e);clearTimeout(e.__animetime)};this.clear_time(a),this.prevTooltipNode==t&&delete this.prevTooltipNode,delete t.tooltipSpan,delete t.tooltip,delete e.nodeName1,t.setAttribute("aria-expanded","false"),i?($L(e).removeClass(i).on("transitionend",n),e.__animetime=setTimeout(n,o.maxAnimationLimit)):n(),this.tooltipCloseCallback(t),delete this.data.tooltips[e._random]}},hover_process:function(e){var t=(e||{}).tooltip;t&&this.clear_time(t)},mousemove:function(e){if(!this._mousedownFlag){for(var t=e.target.correspondingElement||e.target;t&&"BODY"!=t.tagName&&t!=document&&"HTML"!=t.tagName;){var a=t.getAttribute?t.getAttribute("lt-prop-title"):"",o=$L(t);if(o.hasClass("lyteTooltip")){var i=t.nodeName1;if(((i.tooltip||{}).config||{}).hidedelay)return this.hover_process(i),this.closeAllTooltip(i)}if(o.hasClass(this.data.ltPropIgnoreClass)){delete this.prevTooltipNode,t=document.body;break}if(a){t.getAttribute("title")&&t.removeAttribute("title"),t.tooltip=t.tooltip||{},t.tooltip.config=$L.extend({reuse:!1,position:"",appearance:"callout",margin:0,showdelay:0,hidedelay:0,maxdisplaytime:5e3,keeptooltip:!1,aria:!1,hideOnClick:!0,startClass:"",endClass:"",animationClass:"",maxAnimationLimit:2e3},this.data.ltPropTooltipConfig||{}),t.tooltip.title=a,this.propertySetting(t);var r=t.tooltip,n=r.config,s=n.reuse;if(this.prevTooltipNode==t||r.tooltipSpan&&!s)"followcursor"==r.config.position&&this.prevTooltipNode==t&&r.tooltipSpan?(p=r.tooltipSpan,$L(p).css({opacity:"",pointerEvents:""}),this.clear_time(r,["maxdisp","settime"]),p._callbackHandled?this.followcursor(e,p):r.settime=setTimeout(this.createTooltip.bind(this),r.config.showdelay,e,p,!0)):r.tooltipSpan&&"none"==r.tooltipSpan.style.display?($L(r.tooltipSpan).css({display:"",opacity:"",pointerEvents:""}),this.clear_time(r),r.settime=setTimeout(this.createTooltip.bind(this),r.config.showdelay,e,r.tooltipSpan,"followcursor"==r.config.position)):this.prevTooltipNode=t;else{this.prevTooltipNode=t;var l=this.__reuse,d=s&&l,p=d?l:document.createElement("span"),c=$L(p),h=o.attr("lt-prop-tooltip-class"),u=n.id||this.getData("ltPropId"),f=this.getData("ltPropClass"),y=Date.now()+"lytetooltip";l&&this.removeTooltip(p),this.data.tooltips[y]=p,p._random=y,l?c.attr("class","lyteTooltip"):s&&(this.__reuse=p),u&&c.attr("id",u),f&&c.addClass(f),!d&&c.addClass("lyteTooltip lyteTooltipHidden"),this._dir&&c.addClass("lyteRTL"),c.attr("style",o.attr("lt-prop-tooltip-style")||""),p.style.borderColor||(p.style.borderColor=p.style.backgroundColor),"callout"==r.config.appearance&&"followcursor"!=r.config.position&&(c.addClass("lyteTooltipCallout"),r.config.hideOnClick||(r.refresh=this.refresh.bind(this))),r.tooltipSpan=p,p.nodeName1=t,c.addClass(h||""),r.config.aria&&(c.attr({role:"tooltip","aria-hidden":"false"}),t.setAttribute("aria-expanded","true")),r.settime=setTimeout(this.createTooltip.bind(this),r.config.showdelay,e,p,"followcursor"==r.config.position),p.textContent=r.title,!d&&document.body.appendChild(p)}this.closeAllTooltip(t);break}t=t.parentNode}t&&-1!=["BODY","HTML"].indexOf(t.tagName)&&this.prevTooltipNode!=t&&(delete this.prevTooltipNode,this.closeAllTooltip())}}}),function(){var e=document,t=function(){e.querySelector("lyte-tooltip")||e.body.appendChild(e.createElement("lyte-tooltip"))};/complete|interactive/i.test(e.readyState)?t():e.addEventListener("DOMContentLoaded",t)}(),Lyte.Component.register("lyte-text",{_template:'<template tag-name="lyte-text" lt-prop-title="" onmouseenter="{{action(\'mouse\')}}" onmouseover="{{action(\'over\',event)}}"><template is="if" value="{{ltPropText}}"><template case="true"><template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield class="lyteTextYield" yield-name="lyte-text" lt-prop-value="{{ltPropValue}}"></lyte-yield> </template><template case="false">{{ltPropValue}}</template></template></template><template case="false"> <span class="lyteTextWrapper" onmouseenter="{{action(\'submouse\',this)}}" lt-prop-tooltip-class="lyteTextTooltip" lt-prop-tooltip-config="{{ltPropTooltipConfig}}">{{ltPropValue}}</span> <template is="if" value="{{suffix}}"><template case="true"> <span class="lyteTextSuffix">{{unescape(suffix)}}</span> </template></template><template is="if" value="{{renderHover}}"><template case="true"> <lyte-hovercard lt-prop="{{ltPropHovercard}}" lt-prop-origin-elem="{{originElem}}" lt-prop-show="{{lbind(show)}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content> <template is="for" items="{{hoverCardArray}}" item="item" index="index"> <div class="lyteTextHovercardList">{{item}}</div> </template> </lyte-hovercard-content> </template> </lyte-hovercard> </template></template></template></template><template is="if" value="{{render}}"><template case="true"> <div class="lyteTextRenderDiv"> <template is="for" items="{{ltPropArray}}" item="item" index="index"> <div class="lyteTextIndividual"> <span class="lyteTextWord">{{item}}</span> <span class="lyteTextComma">{{unescape(ltPropSeparator)}}</span> </div> </template> </div> <div class="lyteTextSuffix"> <span>{{unescape(ltPropSuffix)}}</span> </div> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},{type:"text",position:[3,1,0]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropValue","ltPropShow","ltPropYield","ltPropText","ltPropArray","ltPropSuffix","ltPropHovercard","ltPropSeparator","ltPropWidth","ltPropMinCount","ltPropTooltipConfig","renderHover","lyteUnbound","hoverCardArray","render","show","originElem","suffix"],data:function(){return{ltPropValue:Lyte.attr("string",{default:""}),ltPropShow:Lyte.attr("boolean",{default:!0}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropText:Lyte.attr("boolean",{default:!0}),ltPropArray:Lyte.attr("array"),ltPropSuffix:Lyte.attr("string",{default:""}),ltPropHovercard:Lyte.attr("string",{default:"{}"}),ltPropSeparator:Lyte.attr("string",{default:", "}),ltPropWidth:Lyte.attr("number",{default:0}),ltPropMinCount:Lyte.attr("number",{default:0}),ltPropTooltipConfig:Lyte.attr("string",{default:"{}"}),renderHover:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),hoverCardArray:Lyte.attr("array",{default:[]}),render:Lyte.attr("boolean"),show:Lyte.attr("boolean",{default:!1}),originElem:Lyte.attr("string",{default:""}),suffix:Lyte.attr("string",{default:""})}},init:function(){var e,t=this.data,a=t.ltPropArray;if(a){var o=this.$node,i=JSON.parse(t.ltPropHovercard);t.ltPropText=!a,t.originElem=i.originElem||((e=o.id)||(e=o.id="lyteText_"+parseInt(1e4*Math.random())),"#"+e+" .lyteTextSuffix>span")}},didCnt:function(){this.data.ltPropArray&&this.render_array()}.observes("ltPropSuffix","ltPropArray","ltPropArray.[]","ltPropWidth").on("didConnect"),render_array:function(){var e=this,t=e.data,a=t.ltPropArray,o=t.ltPropSuffix,i=$L.fastdom,r=a.length,n=[],s=t.ltPropSeparator,l="prev_fast";e.setData("render",!0),i.clear(e[l]),e[l]=i.measure((function(){delete e[l];var d=e.$node,p=d.getElementsByClassName("lyteTextRenderDiv")[0];if(p){for(var c,h=p.children,u="getBoundingClientRect",f=p.nextElementSibling.children[0][u]().width,y=t.ltPropWidth||d.offsetWidth,m=0,g=0;g<r;g++){var v=h[g].children,b=v[0][u]().width,P=v[1][u]().width;if(n.push({width:b,comma:P}),(m+=b+P)>y){for(c=!0,y-=f;m>y;){var D=n.pop();if(!D)break;m-=D.width+D.comma,g--}break}}i.mutate((function(){var i="",n=[],l="";if(c){var p="remove";-1==g&&(g=t.ltPropMinCount-1,p="add"),$L(d)[p+"Class"]("lyteTextNoSpace");for(var h=0;h<r;h++){var u=a[h];h<=g?i+=(h?s:"")+u:n.push(u)}g+1!=r&&(l=o.replace("{0}",r-++g))}else i=a.join(s);e.setData({ltPropValue:i,suffix:l,render:!1,hoverCardArray:n,renderHover:c&&t.ltPropShow})}))}}))},reset:function(e,t){var a=e||this.$node,o=this.data;if(o.ltPropText||e){var i="";a.scrollWidth>a.offsetWidth&&o.ltPropShow&&(i=t||o.ltPropValue),a.setAttribute("lt-prop-title",i)}},over:function(e){e.target.closest(".lyteTextSuffix")&&this.setData("show",this.data.ltPropShow)},actions:{mouse:function(){this.reset()},over:function(e){this.data.ltPropArray&&this.over(e)},submouse:function(e){var t=this.data;$L(this.$node).hasClass("lyteTextNoSpace")&&t.ltPropMinCount&&this.reset(e,t.ltPropValue)}}}),Lyte.Component.register("lyte-search",{_template:'<template tag-name="lyte-search"> <lyte-input lt-prop-auto-update="{{ltPropAutoUpdate}}" lt-prop-tab-index="{{ltPropTabIndex}}" lt-prop-data-tabindex="{{ltPropDataTabindex}}" lt-prop-id="{{ltPropId}}" lt-prop-wrapper-style="{{ltPropWrapperStyle}}" lt-prop-class="{{ltPropClass}}" lt-prop-autofocus="{{ltPropAutofocus}}" lt-prop-autocomplete="{{ltPropAutocomplete}}" lt-prop-type="{{ltPropType}}" lt-prop-name="{{ltPropName}}" lt-prop-placeholder="{{ltPropPlaceholder}}" lt-prop-width="{{ltPropWidth}}" lt-prop-height="{{ltPropHeight}}" onkeyup="{{action(\'keyup\',event,this)}}" lt-prop-style="{{ltPropStyle}}" lt-prop-value="{{lbind(ltPropValue)}}" onkeypress="{{action(\'keypress\',event,this)}}" lt-prop-appearance="{{ltPropAppearance}}" lt-prop-direction="{{ltPropDirection}}" lt-prop-disabled="{{ltPropDisabled}}" lt-prop-readonly="{{ltPropReadonly}}" on-value-change="{{method(\'valuechange\')}}" on-focus="{{method(\'focus\')}}" on-blur="{{method(\'blurEvent\')}}" lt-prop-input-title="{{ltPropInputTitle}}" lt-prop-pattern="{{ltPropPattern}}" lt-prop-maxlength="{{ltPropMaxlength}}" oninput="{{action(\'input\',event)}}" lt-prop-close-icon="{{ltPropCloseIcon}}" is-search="true" lt-prop-update-delay="{{ltPropUpdateDelay}}" lt-prop-aria="{{ltPropAria}}" lt-prop-aria-attributes="{{ltPropAriaAttributes}}" lt-prop-focus="{{lbind(ltPropFocus)}}" class="lyteSearchInput" lt-prop="{{ltPropInput}}"></lyte-input> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropAutocomplete","ltPropPlaceholder","ltPropAutofocus","ltPropDisabled","ltPropStyle","ltPropMaxlength","ltPropReadonly","ltPropId","ltPropClass","ltPropType","ltPropName","ltPropWidth","ltPropHeight","ltPropValue","ltPropAppearance","ltPropDirection","ltPropQuerySelector","ltPropMinLength","ltPropMethod","ltPropWrapperStyle","ltPropTabIndex","ltPropDataTabindex","ltPropAjaxRequest","ltPropAutoUpdate","ltPropPattern","ltPropInputTitle","ltPropCloseIcon","ltPropUpdateDelay","ltPropSearchDelay","ltPropCaseSensitive","ltPropComponent","ltPropTrim","ltPropFocus","ltPropDiacritic","ltPropMaintainState","ltPropPreventEmptyKeys","ltPropMultipleSearch","ltPropIgnoreChildren","ltPropInput","ltPropDontHideOnEmpty","ltPropAria","ltPropAriaAttributes","timeout","ltPropCheckFromParent"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){this.$node.setValue=function(e,t){this.$node.ltProp("value",e),this.pressFunc(e||"",t||{}),clearTimeout(this.data.timeout),clearTimeout(this._iptime),delete this._minlengthfail}.bind(this),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),["focus","blur","click","select"].forEach(function(e){this.$node[e]=function(t){this.$node.querySelector("lyte-input")[e](t)}.bind(this)}.bind(this)),$L.fastdom.measure(function(){_lyteUiUtils.getRTL()&&$L.fastdom.mutate(function(){this.$node.classList.add("lyteRTL")}.bind(this))}.bind(this));var e=this.data.ltPropComponent,t=this.data.ltPropQuerySelector;"accordion"==e?t.related="lyte-accordion-item":"tree"==e&&(t.related=".lyteTreeBodyDiv lyte-yield:not(.noChildClass) lyte-tree-icon")},didDestroy:function(){clearTimeout(this.data.timeout),clearTimeout(this._iptime),delete this.$node.setValue,delete this.$node.focus,delete this.$node.blur,delete this.$node.click,delete this.$node.select},data:function(){var e,t=_lyteUiUtils.getDefault("lyte-search");return{ltPropAutocomplete:Lyte.attr("string",{default:t.autocomplete||"off"}),ltPropPlaceholder:Lyte.attr("string",{default:t.search||""}),ltPropAutofocus:Lyte.attr("boolean",{default:t.autofocus||!1}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropStyle:Lyte.attr("string",{default:t.style||""}),ltPropMaxlength:Lyte.attr("number",{default:t.maxlength||25}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropId:Lyte.attr("string",{default:t.id||"inputId"}),ltPropClass:Lyte.attr("string",{default:t.class||""}),ltPropType:Lyte.attr("string",{default:"search"}),ltPropName:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:t.width||"100%"}),ltPropHeight:Lyte.attr("string",{default:t.height||""}),ltPropValue:Lyte.attr("string",{default:""}),ltPropAppearance:Lyte.attr("string",{default:t.appearance||"flat"}),ltPropDirection:Lyte.attr("string",{default:t.direction||"vertical"}),ltPropQuerySelector:Lyte.attr("object",{default:{}}),ltPropMinLength:Lyte.attr("number",{default:null==(e=t.minLength)?1:e}),ltPropMethod:Lyte.attr("string",{default:t.method||"contains"}),ltPropWrapperStyle:Lyte.attr("string",{default:t.wrapperStyle||""}),ltPropTabIndex:Lyte.attr("string",{default:t.tabIndex||"0"}),ltPropDataTabindex:Lyte.attr("string",{default:t.dataTabindex||"0"}),ltPropAjaxRequest:Lyte.attr("object",{default:{}}),ltPropAutoUpdate:Lyte.attr("boolean",{default:!0}),ltPropPattern:Lyte.attr("string",{default:t.pattern||".+"}),ltPropInputTitle:Lyte.attr("string",{default:""}),ltPropCloseIcon:Lyte.attr("boolean",{default:t.closeIcon||!1}),ltPropUpdateDelay:Lyte.attr("number",{default:t.hasOwnProperty("updateDelay")?t.updateDelay:250}),ltPropSearchDelay:Lyte.attr("number",{default:t.hasOwnProperty("searchDelay")?t.searchDelay:100}),ltPropCaseSensitive:Lyte.attr("boolean",{default:t.caseSensitive||!1}),ltPropComponent:Lyte.attr("string",{default:void 0}),ltPropTrim:Lyte.attr("boolean",{default:t.trim||!1}),ltPropFocus:Lyte.attr("boolean",{default:t.focus||!1}),ltPropDiacritic:Lyte.attr("boolean",{default:t.diacritic||!1}),ltPropMaintainState:Lyte.attr("boolean",{default:null==(e=t.maintainState)||e}),ltPropPreventEmptyKeys:Lyte.attr("boolean",{default:t.preventEmptyKeys||!1}),ltPropMultipleSearch:Lyte.attr("boolean",{default:t.multipleSearch||!1}),ltPropIgnoreChildren:Lyte.attr("boolean",{default:t.ignoreChildren||!1}),ltPropInput:Lyte.attr("string",{default:t.input||"{}"}),ltPropDontHideOnEmpty:Lyte.attr("boolean",{default:t.aria||!1}),ltPropAria:Lyte.attr("boolean",{default:t.aria||!1}),ltPropAriaAttributes:Lyte.attr("object",{default:t.ariaAttributes||{},watch:!0}),timeout:Lyte.attr("number",{default:void 0}),ltPropCheckFromParent:Lyte.attr("boolean",{default:!1})}},methods:{blurEvent:function(e){this.getMethods("onBlur")&&this.executeMethod("onBlur",e,this.$node)},focus:function(e){this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},valuechange:function(e){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)}},searchList:function(e){var t=[],a=[],o=this.getData("ltPropQuerySelector");"string"==typeof o&&(o=JSON.parse(o));for(var i=0;i<e.childElementCount;i++){for(var r=e.children[i];r.childElementCount;){var n=this.searchList.call(this,r);t=t.concat(n[0]),a=a.concat(n[1]);break}if(!r.childElementCount){var s=r.textContent;if(this.data.ltPropDiacritic&&(s=_lyteUiUtils.convert_diacritics(s)),t.push(s),o.target)for(var l=this.getScope("string"==typeof o.scope?document.body.querySelector(o.scope.trim()):o.scope),d=l.querySelectorAll(o.target),p=r;p!=l;){for(var c=!1,h=0;h<d.length;h++)if(p==d[h]){a.push(p),c=!0;break}if(c)break;p=p.parentElement}else a.push(r)}}return[t,a]},actions:{"on-ip-clear":function(e){this.$node.setValue("",{type:"clear"}),this.getMethods("onClear")&&this.executeMethod("onClear",this.$node)},keypress:function(e){var t=e.keyCode;t>=37&&t<=40||13==t||e.stopPropagation()},keyup:function(e,t){var a=e.which||e.keyCode,o=this.data.ltPropPreventEmptyKeys;if(!([37,13,38,39,40,27].indexOf(a)>-1)){if(clearTimeout(this._iptime),o){if(null==this._iptime)return;delete this._iptime}clearTimeout(this.data.timeout);var i=e.target.value,r=this.data.ltPropMinLength,n=i.length>=r;if(n)delete this._minlengthfail;else{if(o&&this._minlengthfail)return;this._minlengthfail=!0,/^8|91|17|46$/i.test(a)&&(n=!0)}if(n){var s=this.data.ltPropSearchDelay;null!=s?this.timeout=setTimeout(this.pressFunc.bind(this),s,i,e):this.pressFunc.call(this,i,e)}}},input:function(e){var t=this.data.ltPropSearchDelay,a=this.data.ltPropMinLength,o=e.target.value;clearTimeout(this._iptime),o.length>=a&&(null==t?this.pressFunc(o,event):this._iptime=setTimeout(function(){delete this._iptime,this.pressFunc(o,e)}.bind(this),250))}},fNcase:function(e){return this.data.ltPropCaseSensitive||(e=e.toLowerCase()),this.data.ltPropTrim&&(e=e.trim()),e},multi_search:function(e,t){var a=this.data,o=a.ltPropQuerySelector,i=$L(o.scope),r=Array.from(i.find(o.search)),n=a.ltPropDiacritic,s=[],l=[],d=this;e=d.fNcase(e),r.forEach((function(t){var r=$L(t).closest(o.target,i).get(0),p=d.fNcase(t.textContent);n&&(p=_lyteUiUtils.convert_diacritics(p)),!e||d.switchfn(a.ltPropMethod,e,p)?s.push(r):l.push(r)})),this.getMethods("onSearch")&&0==this.executeMethod("onSearch",s,this.$node,t,e,l)||this.common_hide(s,l,t)},common_hide:function(e,t,a){function o(e,t){e.forEach((function(e){$L(e)[t]("lyteSearchHidden")}))}o(t,"addClass"),o(e,"removeClass"),"ignore"!=a&&this.getMethods("onAfterSearch")&&this.executeMethod("onAfterSearch",e,a,this.$node)},check_label:function(e,t,a,o,i,r,n,s){var l=[],d=[],p="onSearch";Array.from(a).forEach((function(a){var n=a.querySelector(o);if(n)if(e.indexOf(n)+1){for(var s=t.length,p=0;p<s;p++){var c=t[p];a.contains(c)&&(e.push(c),i.push(r[p]),r.splice(p,1),t.splice(p--,1),s--)}l.push(a)}else{for(s=e.length,p=0;p<s;p++)if(c=e[p],a.contains(c)){e.push(n);var h=t.indexOf(n);t.splice(h,1),i.push(r[h]),r.splice(h,1);break}p==s?d.push(a):l.push(a)}})),this.getMethods(p)&&0==this.executeMethod(p,e,this.$node,n,s,t)||(this.common_hide(l,d,"ignore"),this.common_hide(e,t,n))},filteringArray:function(e,t,a,o,i,r,n){var s=this.getData("ltPropMethod"),l=[],d=[],p=[],c=[];if((a=this.fNcase(a)).length)for(var h=e.length,u=0;u<h;u++){var f=o[u],y=t[u];this.switchfn(s,a,this.fNcase(e[u].trim()))?(l.push(f),p.push(y)):(d.push(f),c.push(y))}else l=Array.apply(Array,o),p=Array.from(t);if(n)return this.check_label(l,d,r,n,p,c,i,a);this.getMethods("onSearch")&&0==this.executeMethod("onSearch",l,this.$node,i&&"clear"==i.type?{}:i,a,d)||(null==this.data.ltPropSearchDelay?this.hideProcess(e,t,s,a,r,i,d,l):$L.fastdom.mutate(this.hideProcess.bind(this,e,t,s,a,r,i,d,l)))},switchfn:function(e,t,a){var o;switch(e){case"contains":o=a.indexOf(t)>=0;break;case"startsWith":o=0==a.indexOf(t);break;case"endsWith":var i=a.lastIndexOf(t);-1!=i&&(o=i+t.length==a.length)}return o},hideProcess:function(e,t,a,o,i,r,n,s){for(var l=this.data.ltPropQuerySelector,d=(o=this.fNcase(o),this.data.ltPropComponent),p=0;p<e.length;p++)this.additionalHand(t[p],this.switchfn(a,o,this.fNcase(e[p].trim())));for(p=0;p<i.length;p++){var c=i[p];if("accordion"==d&&null==c._state){if(!c.querySelector("lyte-accordion-body")){o?c.classList.add("lyteSearchHidden"):c.classList.remove("lyteSearchHidden");continue}c._state=c.classList.contains("lyteAccordionActive")}else if("tree"==d){null==c._state&&(c._state=c.classList.contains("lyteIconOpened"));continue}c.querySelectorAll(l.target||l.search).length==c.querySelectorAll(".lyteSearchHidden").length?c.classList.add("lyteSearchHidden"):c.classList.remove("lyteSearchHidden")}if(d){var h={accordion:"accfilter",tree:"treefilter",duallistbox:"listboxfilter"};h[d]&&$L.fastdom.measure(this[h[d]].bind(this,s,n,o,r&&"clear"==r.type))}this.getMethods("onAfterSearch")&&this.executeMethod("onAfterSearch",s,r,this.$node)},listboxfilter:function(e,t,a,o){for(var i=this.data.ltPropQuerySelector,r=$L(this.getScope(i.scope)),n=e.length,s=[],l=0;l<n;l++){var d=$L(e[l]).closest(".lyteListBoxLeftWrap").parent().closest(".lyteListBoxLeftWrap",r);if(d.length){if(d.hasClass("lyteSearchHidden")){var p=d.find(i.search).get(0),c=t.indexOf(p);-1!=c&&(e.push(p),t.splice(c,1),n++,d.removeClass("lyteSearchHidden"))}-1==s.indexOf(d.get(0))&&s.push(d.get(0))}}s.forEach((function(e){var t=$L(e);t.children(".lyteListboxParentElementClose").length&&t.find("lyte-lb-collapse").get(0).click()}))},accfilter:function(e,t,a,o){for(var i=$L(this.getScope(this.data.ltPropQuerySelector.scope)),r="lyte-accordion-item",n="lyteAccordionActive",s=0;s<e.length;s++){for(var l=$L(e[s]).closest(r,i),d=0;d<t.length;d++){var p=$L(t[d]).closest(r,i);l[0]!=p[0]||(Lyte.arrayUtils(t,"removeAt",d),d--)}e[s+1]&&(p=$L(e[s+1]).closest(r,i),l[0]==p[0]&&(Lyte.arrayUtils(e,"removeAt",s+1),s--))}$L.fastdom.mutate(function(){for(var i=0;i<e.length;i++){var s=!1;s=!(d=$L(e[i]).closest(r)).hasClass(n),!a&&this.data.ltPropMaintainState&&(null!=d[0]._state?(s=!s&&!d[0]._state,o&&delete d[0]._state):s=!s),s&&d.click()}for(var l=0;l<t.length;l++){var d=$L(t[l]).closest(r);o?!d[0]._state&&d.hasClass(n)&&d.click():d.hasClass(n)&&d.click()}}.bind(this))},treeinremove:function(e){for(var t=0;t<e.length;t++)if(e[t+1]){var a=this.closest(e[t],".lyteTreeBodyDiv")[0],o=this.closest(e[t+1],".lyteTreeBodyDiv")[0];a.contains(o)?Lyte.arrayUtils(e,"removeAt",t+1):o.contains(a)&&(Lyte.arrayUtils(e,"removeAt",t),t--)}},closest:function(e,t){return e.closest?$L(e.closest(t)):$L(e).closest(t)},treefilter:function(e,t,a,o){for(var i=this.data,r=$L(this.getScope(i.ltPropQuerySelector.scope)).get(0),n=e.length,s=t.length,l=".lyteTreeBodyDiv",d=0;d<n;d++)for(var p=(f=this.closest(e[d],l)).get(0),c=0;c<s;c++){var h=this.closest(t[c],l),u=h.get(0);(p.contains(u)||u.contains(p))&&(i.ltPropIgnoreChildren?h.removeClass("lyteSearchHidden"):h.addClass("lyteSearchHidden"),t.splice(c,1),c--,s--)}for(d=0;d<n;d++){var f=e[d];this.removeClse(f,r),a&&r.openRecursive(this.closest(f,"lyte-tree-body").get(0))}a||i.ltPropDontHideOnEmpty?t.forEach(function(e){this.closest(e,l).addClass("lyteSearchHidden")}.bind(this)):this.hiderecurse($L("lyte-yield:not(.noChildClass) lyte-tree-icon",r),o,r),this.last_tree_element(e,t,r)},last_tree_element:function(e,t,a){var o=function(e){var t=$L(e).closest(".lyteTreeBodyDiv",a),i="addClass";t.length&&((t.hasClass("lyteSearchHidden")||t.next(".lyteTreeBodyDiv:not(.lyteSearchHidden)").length)&&(i="removeClass"),t[i]("lyteTreeBodyDivLastVisibleElem"),o(t.parent()))};e.concat(t).forEach(o)},removeClse:function(e,t){var a=$L(e).closest(".lyteSearchHidden",t);a.length&&(a.removeClass("lyteSearchHidden"),this.removeClse(e,t))},hiderecurse:function(e,t,a){for(var o=e.length-1;o>=0;o--){var i=e.eq(o),r=i.hasClass("lyteIconOpened"),n=i[0]._state,s=i.closest("lyte-tree-body").get(0),l="";t&&null!=n?n&&!r?l="openTree":!n&&r&&(l="closeTree"):r&&(l="closeTree"),l&&setTimeout(a[l].bind(a,s),20),delete i[0]._state}},additionalHand:function(e,t){var a=this.data.ltPropComponent;if(t){if("dropdown"==a){var o=$L(e).closest("lyte-drop-box")[0];o&&o.classList.contains("lyteDropdownHidden")&&(o.origindd?o.origindd.toggle():$L(o).closest("lyte-dropdown").get(0).toggle())}e.classList.remove("lyteSearchHidden")}else if("tree"!=a){if(e.classList.contains("lyteSearchHidden"))return;e.classList.add("lyteSearchHidden")}},pressFunc:function(e,t){if(!this.getMethods("onBeforeSearch")||0!=this.executeMethod("onBeforeSearch",t,this))if(this.data.ltPropMultipleSearch)this.multi_search(e,t);else{var a,o=[],i=[],r=[],n=this.data.ltPropQuerySelector,s=this.data.ltPropDiacritic,l="string"==typeof n.scope?document.body.querySelector(n.scope.trim()):n.scope;if(l=this.getScope(l),n.search&&(i=l.querySelectorAll(n.search.trim())),r=n.target?l.querySelectorAll(n.target.trim()):i,n.search)for(var d=0;d<i.length;d++){var p=i[d].textContent;s&&(p=_lyteUiUtils.convert_diacritics(p)),o[d]=p}else{var c=this.searchList.call(this,l);o=c[0],i=(r=c[1]).slice()}s&&(e=_lyteUiUtils.convert_diacritics(e)),a=n.related&&(n.search||n.target)?a=l.querySelectorAll(n.related):[],this.filteringArray.call(this,o,r,e,i,t,a,n.label),this._prevVal=e}},getScope:function(e){return e=this.getMethods("dynamicScope")?this.executeMethod("dynamicScope",this.$node):e,this.data.ltPropCheckFromParent&&(e=this.$node.parentNode),e}}),Lyte.Component.register("lyte-popover",{_template:'<template tag-name="lyte-popover"> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <lyte-wormhole case="true" style="{{if(ltPropShowCopy,\'visibility:visible\',\'visibility:hidden\')}}" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}" lt-prop-focus-on-close="{{ltPropFocusOnClose}}" lt-prop-show="{{ltPropShowWormhole}}"> <template is="registerYield" yield-name="lyte-content"> <div class="popoverWrapper {{ltPropWrapperClass}}"> <div class="{{if(ifEquals(ltPropAnimation,\'zoom\'),\'lytePopover lyteZoom\',\'lytePopover\')}}"> <template is="if" value="{{ifEquals(ltPropType,&quot;callout&quot;)}}"><template case="true"> <span id="lytePopoverArrow" class="lytePopoverArrowIcon"></span> </template></template> <template is="if" value="{{ltPropShowCloseButton}}"> <template case="true"><span class="lytePopoverClose" onclick="{{action(\'close\')}}" tabindex="0"></span></template> </template> <lyte-yield yield-name="popover"></lyte-yield> </div> <template is="if" value="{{ltPropFreeze}}"> <template case="true"><lyte-popover-freeze></lyte-popover-freeze></template> </template> </div> </template> </lyte-wormhole> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropShowCopy","'visibility:visible'","'visibility:hidden'"]}}}},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"insertYield",position:[1,1,5]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["ltPropShow","ltPropType","ltPropFreeze","ltPropShowCloseButton","ltPropCloseOnEscape","ltPropOriginElem","ltPropPosition","ltPropPlacement","ltPropDimmer","ltPropDraggable","ltPropAllowMultiple","ltPropScrollable","ltPropMaxHeight","ltPropMaxWidth","ltPropWidth","ltPropHeight","ltPropWrapperClass","ltPropBoundary","ltPropCloseOnBodyClick","ltPropDuration","ltPropOffset","ltPropOffsetFromTarget","ltPropBindToBody","ltPropHeaderPadding","ltPropContentPadding","ltPropFooterPadding","ltPropAnimation","ltPropWindowSpacing","ltPropForceScroll","ltPropAutoAlign","ltPropAria","ltPropAriaAttributes","ltPropPreventFocus","ltPropStopClick","ltPropIgnoreBoundary","ltPropMargin","ltPropCloseOnScroll","ltPropAllowContainment","ltPropIgnoreInput","ltPropFocusOnClose","ltPropShowWormhole","buttons","ltPropShowCopy","visible","timeOutId","classTobeAdded","keys","first","arrowHidden","arrowEle","returnedFalse","transformOrigin","windowSpacing","lyteUnbound","prevOffsetVal","calculateHW","checkAria","prevRect","margin","modalElemWidth","modalElemHeight","dragRunning"],data:function(){return{ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropType:Lyte.attr("string",{default:"callout"}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),ltPropOriginElem:Lyte.attr("string",{default:""}),ltPropPosition:Lyte.attr("string",{default:"bottom"}),ltPropPlacement:Lyte.attr("string",{default:""}),ltPropDimmer:Lyte.attr("object",{default:{color:"black",opacity:"0.4"}}),ltPropDraggable:Lyte.attr("boolean",{default:!1}),ltPropAllowMultiple:Lyte.attr("boolean",{default:!1}),ltPropScrollable:Lyte.attr("boolean",{default:!1}),ltPropMaxHeight:Lyte.attr("string",{default:""}),ltPropMaxWidth:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropCloseOnBodyClick:Lyte.attr("boolean",{default:!0}),ltPropDuration:Lyte.attr("number",{default:400}),ltPropOffset:Lyte.attr("object",{default:{}}),ltPropOffsetFromTarget:Lyte.attr("object",{default:{}}),ltPropBindToBody:Lyte.attr("boolean",{default:!1}),ltPropHeaderPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropContentPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropFooterPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropAnimation:Lyte.attr("string",{default:"fade"}),ltPropWindowSpacing:Lyte.attr("object"),ltPropForceScroll:Lyte.attr("boolean",{default:!1}),ltPropAutoAlign:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropPreventFocus:Lyte.attr("boolean",{default:!1}),ltPropStopClick:Lyte.attr("boolean",{default:!1}),ltPropIgnoreBoundary:Lyte.attr("boolean",{default:!1}),ltPropMargin:Lyte.attr("object"),ltPropCloseOnScroll:Lyte.attr("boolean",{default:!1}),ltPropAllowContainment:Lyte.attr("boolean",{default:!1}),ltPropIgnoreInput:Lyte.attr("boolean",{default:!1}),ltPropFocusOnClose:Lyte.attr("boolean",{default:!0}),ltPropShowWormhole:Lyte.attr("boolean",{default:!1}),buttons:Lyte.attr("array",{default:[{type:"accept",text:"Ok"}]}),ltPropShowCopy:Lyte.attr("boolean",{default:!1}),visible:Lyte.attr("boolean",{default:!0}),timeOutId:Lyte.attr("number"),classTobeAdded:Lyte.attr("string"),keys:Lyte.attr("object",{default:{37:1,38:1,39:1,40:1}}),first:Lyte.attr("boolean",{default:!0}),arrowHidden:Lyte.attr("boolean",{default:!1}),arrowEle:Lyte.attr("object"),returnedFalse:Lyte.attr("boolean",{default:!1}),transformOrigin:Lyte.attr("string"),windowSpacing:Lyte.attr("object"),lyteUnbound:Lyte.attr("boolean",{default:!1}),prevOffsetVal:Lyte.attr("object"),calculateHW:Lyte.attr("boolean",{default:!1}),checkAria:Lyte.attr("number",{default:0}),prevRect:Lyte.attr("object",{default:void 0}),margin:Lyte.attr("object"),modalElemWidth:Lyte.attr("string",{default:""}),modalElemHeight:Lyte.attr("string",{default:""}),dragRunning:Lyte.attr("boolean",{default:!1})}},computeSpacing:function(){var e=Object.assign({},this.getData("ltPropWindowSpacing"));e.left||(e.left=30),e.right||(e.right=30),e.top||(e.top=30),e.bottom||(e.bottom=30),this.setData("windowSpacing",Object.assign({},e));var t=Object.assign({},this.getData("ltPropMargin"));t.left||(t.left=0),t.right||(t.right=0),t.top||(t.top=0),t.bottom||(t.bottom=0),this.setData("margin",Object.assign({},t))}.observes("ltPropWindowSpacing","ltPropMargin").on("init"),addDragHandler:function(){var e=this.actualModalDiv.querySelector("lyte-popover-header");e?(e.parentEle=this,this.$node.ltProp("draggable")?(e.addEventListener("mousedown",this.handleMove,!0),e.addEventListener("touchstart",this.handleMove,!0),e.classList.add("lytePopoverHeaderDraggable")):(e.removeEventListener("mousedown",this.handleMove,!0),e.removeEventListener("touchstart",this.handleMove,!0),e.classList.remove("lytePopoverHeaderDraggable"))):(console.warn("This popover is not draggable because it has no header"),this.$node.ltProp("draggable",!1))},handleMove:function(e){var t=e.currentTarget.parentEle.actualModalDiv;LytePopup.node=t,$L(e.target).addClass("lytePopoverDragRunning"),"mousedown"==e.type?(LytePopup.xPos=e.clientX-this.getBoundingClientRect().left,LytePopup.yPos=e.clientY-this.getBoundingClientRect().top):"touchstart"==e.type&&(LytePopup.xPos=e.touches[0].clientX-this.getBoundingClientRect().left,LytePopup.yPos=e.touches[0].clientY-this.getBoundingClientRect().top),t.getBoundingClientRect(),t.style.transitionDuration="0s";var a=t.parentElement.querySelector("#lytePopoverArrow");a&&(this.parentEle.setData("arrowHidden",!0),this.parentEle.setData("arrowEle",a),a.style.display="none"),"mousedown"==e.type?(window.addEventListener("mousemove",e.currentTarget.parentEle.handleDrag,!0),window.addEventListener("mouseup",e.currentTarget.parentEle.stopDrag,!0)):"touchstart"==e.type&&(document.body.addEventListener("touchmove",e.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("touchend",e.currentTarget.parentEle.stopDrag,!0))},handleDrag:function(e){var t=LytePopup.node,a=$L(t).closest("lyte-wormhole")[0]._callee;a.setData("dragRunning",!0);var o=0,i=0;"mousemove"==e.type?(o=e.clientX-t.offsetParent.getBoundingClientRect().left-LytePopup.xPos,i=e.clientY-t.offsetParent.getBoundingClientRect().top-LytePopup.yPos):"touchmove"==e.type&&(o=e.touches[0].clientX-t.offsetParent.getBoundingClientRect().left-LytePopup.xPos,i=e.touches[0].clientY-t.offsetParent.getBoundingClientRect().top-LytePopup.yPos),a.getData("ltPropAllowContainment")?(o+t.getBoundingClientRect().width<=window.innerWidth&&o>=0?t.style.left=o+"px":t.style.left=o<0?"0px":window.innerWidth-t.getBoundingClientRect().width+"px",i+t.getBoundingClientRect().height<=window.innerHeight&&i>=0?t.style.top=i+"px":t.style.top=i<0?"0px":window.innerHeight-t.getBoundingClientRect().height+"px"):(t.style.left=o+"px",t.style.top=i+"px"),window.getSelection().removeAllRanges()},stopDrag:function(e){var t=e.target;$L(t).hasClass("lytePopoverDragRunning")||(t=$L(".lytePopoverDragRunning")[0]);for(var a=LytePopup.node,o=$L(a).closest("lyte-wormhole")[0]._callee;t&&t!==document;){if(t.parentEle){"mouseup"==e.type?(window.removeEventListener("mousemove",t.parentEle.handleDrag,!0),window.removeEventListener("mouseup",t.parentEle.stopDrag,!0),o.setData("dragRunning",!1),$L(".lytePopoverDragRunning").removeClass("lytePopoverDragRunning")):"touchend"==e.type&&(this.removeEventListener("touchmove",t.parentEle.handleDrag,!0),this.removeEventListener("touchend",t.parentEle.stopDrag,!0),$L(".lytePopoverDragRunning").removeClass("lytePopoverDragRunning"));break}t=t.parentElement?t.parentElement:document}},showToggled:function(){var e=e||window.event;if(this.getData("returnedFalse"))this.setData("returnedFalse",!1);else if(this.$node.ltProp("show")&&!this.$node.ltProp("showCopy")){if(this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),_lyteUiUtils.getRTL()&&this.getData("ltPropPlacement")&&this.setRTLPosition(),this.$node.ltProp("bindToBody",!0),null==this.getData("ltPropDuration"))this.onBeforeShowHandling(e);else{var t=this;this.tIdBeforeShow=setTimeout((function(){delete t.tIdBeforeShow,t.onBeforeShowHandling(e)}),0)}this.setData("ltPropShowWormhole",!0)}else this.clearFastdomBatch(),this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.$node.ltProp("showCopy")?null==this.getData("ltPropDuration")?(this.onBeforeCloseHandling(e),this.getData("ltPropBindToBody")||this.removeDOMReferences()):(t=this,this.tIdBeforeClose=setTimeout((function(){delete t.tIdBeforeClose,t.onBeforeCloseHandling(e)}),0)):this.getData("ltPropBindToBody")||this.removeDOMReferences()}.observes("ltPropShow").on("didConnect"),setRTLPosition:function(){var e=this.getData("ltPropPlacement").trim().split(" ");if(e.length>1){for(var t="",a=0;a<e.length;a++)t+=this.getRTLPosition(e[a])+" ";this.setData("ltPropPlacement",t.trim())}else this.setData("ltPropPlacement",this.getRTLPosition(e[0]))},getRTLPosition:function(e){return"bottomLeft"==e?"bottomRight":"bottomRight"==e?"bottomLeft":"topLeft"==e?"topRight":"topRight"==e?"topLeft":"left"==e?"right":"right"==e?"left":e},clearFastdomBatch:function(){this.fastdomfn1&&($L.fastdom.clear(this.fastdomfn1),delete this.fastdomfn1),this.fastdomfn2&&($L.fastdom.clear(this.fastdomfn2),delete this.fastdomfn2),this.fastdomfn3&&($L.fastdom.clear(this.fastdomfn3),delete this.fastdomfn3),this.fastdomfn4&&($L.fastdom.clear(this.fastdomfn4),delete this.fastdomfn4),this.fastdomfn5&&($L.fastdom.clear(this.fastdomfn5),delete this.fastdomfn5),this.fastdomfn6&&($L.fastdom.clear(this.fastdomfn6),delete this.fastdomfn6),this.fastdomfn7&&($L.fastdom.clear(this.fastdomfn7),delete this.fastdomfn7),this.initCompute&&(clearTimeout(this.initCompute),delete this.initCompute)},changeShow:function(){this.getData("ltPropBindToBody")||(this.clearFastdomBatch(),this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this,!0),delete this.addedFreezeDetails),this.getData("ltPropShow")?this.setData("ltPropShow",!1):(this.setData("ltPropShowCopy",!1),LytePopup.closePopup(this),this.setData("visible",!1),this.removeDOMReferences()))}.observes("ltPropBindToBody"),removeDOMReferences:function(){this.childComp&&delete this.childComp,this.actualModalDiv&&delete this.actualModalDiv},addAriaValues:function(e){if(this.getData("ltPropAria")){var t=this.getData("ltPropAriaAttributes")||{};_lyteUiUtils.setAttribute(this.actualModalDiv,t,e?e.oldValue:{});var a=this.actualModalDiv.querySelector(".lytePopoverClose");a&&a.setAttribute("aria-label",t["close-label"]||"Close icon at top right position")}}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","checkAria"),callOnResize:function(e){this.getMethods("onResize")&&this.executeMethod("onResize",e,this);var t=this.getData("ltPropOriginElem")?document.querySelector(this.$node.ltProp("originElem")).getBoundingClientRect():null;if(t){var a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=Math.max(document.documentElement.clientWidth,window.innerWidth||0);!this.getData("ltPropForceScroll")&&(t.bottom>a||t.right>o||t.left<0||t.top<0)&&this.$node.ltProp("show",!1)}},callOnScroll:function(e){var t;return this.getMethods("onScroll")&&(t=this.executeMethod("onScroll",e,this)),null==t||t},updateScrollHandling:function(e){!this.$node.ltProp("freeze")&&this.$node.ltProp("forceScroll")&&this.$node.ltProp("scrollable",!0);var t,a,o=this.actualModalDiv,i=o.querySelector("lyte-popover-content");this.getData("resize")&&this.getData("ltPropAutoAlign")&&this.$node.mutobserver&&this.$node.mutobserver.disconnect(),o.style.maxWidth="",o.style.maxHeight="",o.style.height=this.$node.ltProp("height")?this.$node.ltProp("height"):"auto",o.style.width=this.$node.ltProp("width")?this.$node.ltProp("width"):"auto",this.getData("resize")&&(o.style.width=this.getData("modalElemWidth")+"px",o.style.height=this.getData("modalElemHeight")+"px"),this.fastdomfn1=$L.fastdom.measure((function(){delete this.fastdomfn1;var r=o.getBoundingClientRect(),n=o.parentElement.getBoundingClientRect(),s=window.getComputedStyle(o),l=(s.borderTopWidth?parseFloat(s.borderTopWidth):0)+(s.borderBottomWidth?parseFloat(s.borderBottomWidth):0),d=this.getData("windowSpacing"),p=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(d.top+d.bottom);this.fastdomfn2=$L.fastdom.mutate((function(){if(delete this.fastdomfn2,this.$node.ltProp("maxWidth")&&(r.width,-1!=this.$node.ltProp("maxWidth").indexOf("%")?(parseFloat(this.$node.ltProp("maxWidth")),n.width):parseFloat(this.$node.ltProp("maxWidth")),o.style.maxWidth=this.$node.ltProp("maxWidth"),i?i.style.overflowX="auto":o.style.overflowX="auto"),this.$node.ltProp("maxHeight")){this.childComp.querySelector(".popoverWrapper").classList.add("scrollable"),this.setData("calculateHW",!0),t=r.height-l;var s=-1!=this.$node.ltProp("maxHeight").indexOf("%")?parseFloat(this.$node.ltProp("maxHeight"))/100*n.height:parseFloat(this.$node.ltProp("maxHeight"));o.style.maxHeight=this.$node.ltProp("maxHeight"),a=s-l,i||(o.style.overflowY="auto")}else t=r.height-l,!this.$node.ltProp("height")||-1==this.$node.ltProp("height").indexOf("px")&&-1==this.$node.ltProp("height").indexOf("em")?a=p-20:(a=t,this.setData("calculateHW",!0));if(this.getData("calculateHW")&&i){var d=this.actualModalDiv.querySelector("lyte-popover-header"),c=this.actualModalDiv.querySelector("lyte-popover-footer"),h=0,u=0;this.fastdomfn3=$L.fastdom.measure((function(){delete this.fastdomfn3,d&&(this.$node.ltProp("maxWidth")&&(d.style.overflowX="auto"),h=d.offsetHeight),c&&(this.$node.ltProp("maxWidth")&&(c.style.overflowX="auto"),u=c.offsetHeight),this.fastdomfn4=$L.fastdom.mutate((function(){delete this.fastdomfn4;var t=a-(h+u);i.style.maxHeight=(t>0?t:50)+"px",i.style.overflowY="auto",this.getData("resize")&&this.computeOffsetImpl(e),o=null,i=null,d=null,c=null}),this)}),this)}else this.childComp.querySelector(".popoverWrapper").classList.remove("scrollable"),this.getData("resize")&&this.computeOffsetImpl(e),o=null,i=null}),this)}),this)},scrollHandling:function(){this.getData("ltPropShow")&&this.updateScrollHandling()}.observes("ltPropWidth","ltPropMaxWidth","ltPropHeight","ltPropMaxHeight"),addMutationObserver:function(){if(this.getData("ltPropAutoAlign")){var e,t,a=this.$node,o=this.actualModalDiv;this.setData("prevOffsetVal",{height:this.actualModalDiv.offsetHeight,width:this.actualModalDiv.offsetWidth}),a.mutobserver=new MutationObserver(function(t){if(this.getData("ltPropAutoAlign")){for(var a=this.actualModalDiv,o=this.getData("prevOffsetVal"),i=a.offsetWidth,r=a.offsetHeight,n=0;n<t.length;n++)if(!("attributes"!==t[n].type&&"childList"!=t[n].type&&"subtree"!=t[n].type||o.width==i&&o.height==r)){e=!0,this.setData("prevOffsetVal",{height:r,width:i});break}e&&(e=!1,this.computeOffsetImpl(null,!0))}}.bind(this)),t={attributes:!0,childList:!0,subtree:!0},a.mutobserver.observe(o,t)}},computeOffsetImpl:function(e,t){var a="",o="",i=this.actualModalDiv;$L.fastdom.measure((function(){if(this.$node.ltProp("showCopy")){if(""==this.$node.ltProp("originElem")&&Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset")))return console.error("Please provide values for either ltPropOriginElem or ltPropOffset to open the popover at proper position."),void this.setData("ltPropShow",!1);var r=this.$node.ltProp("originElem")?document.querySelector(this.$node.ltProp("originElem")):null;if(!r&&Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset")))return console.error("The origin element is either not present or may be removed. Kindly check."),void this.setData("ltPropShow",!1);var n,s=i.getBoundingClientRect(),l={top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:i.offsetWidth,height:i.offsetHeight},d=i.parentElement.getBoundingClientRect(),p=Object.assign({},this.getData("windowSpacing")),c=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-p.bottom,h=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-p.right;if(Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset"))){var u=r.getBoundingClientRect();n={top:u.top,right:u.right,bottom:u.bottom,left:u.left,width:u.width,height:u.height}}else n={width:parseInt(this.$node.ltProp("offset").width)||0,height:parseInt(this.$node.ltProp("offset").height)||0,top:parseInt(this.$node.ltProp("offset").top),left:parseInt(this.$node.ltProp("offset").left),bottom:parseInt(this.$node.ltProp("offset").bottom)||parseInt(this.$node.ltProp("offset").top)+(parseInt(this.$node.ltProp("offset").height)||0),right:parseInt(this.$node.ltProp("offset").right)||parseInt(this.$node.ltProp("offset").left)+(parseInt(this.$node.ltProp("offset").width)||0)};var f,y=n,m={},g={},v=this.$node.ltProp("positionNew"),b=!0,P=0,D=0;do{if(this.$node.ltProp("placement"))if(1==(f=this.$node.ltProp("placement").trim().split(" ")).length)switch(b=!0,m=this.positionPopover(this.$node.ltProp("placement"),y,l),v=this.$node.ltProp("placement")){case"bottom":case"top":m.offsetLeft+l.width>h&&(m.offsetLeft=Math.max(p.left,h-l.width)),m.offsetLeft<p.left&&(m.offsetLeft=p.left);break;case"left":case"right":m.offsetTop+l.height>c&&(m.offsetTop=Math.max(p.top,c-l.height)),m.offsetTop<p.top&&(m.offsetTop=p.top)}else if(D<f.length)switch(v=f[D],b=!0,g=m=this.positionPopover(v,y,l),v){case"bottom":if(c<g.offsetTop+l.height||c-(g.offsetTop+l.height)<p.bottom){D++,b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<m.offsetLeft+l.width&&(m.offsetLeft=h-l.width-10,b=!0);break;case"bottomLeft":case"bottomRight":if(c<g.offsetTop+l.height||c-(g.offsetTop+l.height)<p.bottom){D++,b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<g.offsetLeft+l.width&&(m.offsetLeft=h-l.width-10,b=!0);break;case"top":if(g.offsetTop<p.top){D++,b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<m.offsetLeft+l.width&&(m.offsetLeft=h-l.width-10,b=!0);break;case"topLeft":case"topRight":if(g.offsetTop<p.top){D++,b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<g.offsetLeft+l.width&&(m.offsetLeft=h-l.width-10,b=!0);break;case"left":if(g.offsetTop<p.top){D++,b=!1;break}if(g.offsetLeft<p.left){D++,b=!1,a=y.left+y.width+9,o=y.top;break}g.offsetTop-l.height<p.top&&(m.offsetTop=y.top),c<m.offsetTop+l.height&&(m.offsetTop=c-l.height);break;case"leftCenter":case"leftBottom":if(g.offsetTop<p.top){D++,b=!1;break}if(g.offsetLeft<p.left){D++,b=!1;break}if(c<m.offsetTop+l.height){D++,b=!1;break}break;case"right":if(g.offsetTop<p.top){D++,b=!1;break}if(h<g.offsetLeft+l.width){D++,b=!1,m.offsetLeft=y.left-l.width-9,m.offsetTop=y.top;break}g.offsetTop-l.height<p.top&&(m.offsetTop=y.top),c<m.offsetTop+l.height&&(m.offsetTop=c-l.height);break;case"rightCenter":case"rightBottom":if(g.offsetTop<p.top){D++,b=!1;break}if(h<g.offsetLeft+l.width){D++,b=!1;break}if(c<m.offsetTop+l.height){D++,b=!1;break}}else b=!0;else{switch(P++,b=!0,g=m=this.positionPopover(v,y,l),v){case"bottom":if(c<g.offsetTop+l.height||c-(g.offsetTop+l.height)<p.bottom){v="top",b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left+(this.getData("ltPropOffsetFromTarget").left||0),b=!0),h<m.offsetLeft+l.width&&(m.offsetLeft=h-l.width-("box"==this.getData("ltPropType")?0:9),b=!0);break;case"bottomLeft":case"bottomRight":if(c<g.offsetTop+l.height||c-(g.offsetTop+l.height)<p.bottom){v="top",b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<g.offsetLeft+l.width&&(m.offsetLeft=h-l.width-("box"==this.getData("ltPropType")?0:9),b=!0);break;case"top":if(g.offsetTop<p.top){v=_lyteUiUtils.getRTL()?"left":"right",b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<m.offsetLeft+l.width&&(m.offsetLeft=h-l.width-("box"==this.getData("ltPropType")?0:9),b=!0);break;case"topLeft":if(g.offsetTop<p.top){v="right",b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<g.offsetLeft+l.width&&(m.offsetLeft=h-l.width-("box"==this.getData("ltPropType")?0:9),b=!0);break;case"topRight":if(g.offsetTop<p.top){v="left",b=!1;break}g.offsetLeft-l.width<p.left&&(m.offsetLeft=y.left,b=!0),h<g.offsetLeft+l.width&&(m.offsetLeft=h-l.width-("box"==this.getData("ltPropType")?0:9),b=!0);break;case"left":if(g.offsetTop<p.top){v="bottom",b=!1;break}g.offsetLeft<p.left&&(v="right",m.offsetLeft=y.left+y.width+("box"==this.getData("ltPropType")?0:9),m.offsetTop=y.top),g.offsetTop-l.height<p.top&&(m.offsetTop=y.top),c<m.offsetTop+l.height&&(m.offsetTop=Math.max(p.top,c-l.height));break;case"right":if(g.offsetTop<p.top){v="bottom",b=!1;break}h<g.offsetLeft+l.width&&(v="left",m.offsetLeft=y.left-l.width-("box"==this.getData("ltPropType")?0:9),m.offsetTop=y.top),g.offsetTop-l.height<p.top&&(m.offsetTop=y.top),c<m.offsetTop+l.height&&(m.offsetTop=Math.max(p.top,c-l.height))}this.getData("ltPropIgnoreBoundary")&&(b=!0)}}while(!b&&P<=8);if(this.getData("ltPropForceScroll")&&(-1!=v.indexOf("left")||-1!=v.indexOf("right")?y.height<=l.height?m.offsetTop>y.top?m.offsetTop=y.top:m.offsetTop+l.height<y.bottom&&(m.offsetTop=y.bottom-l.height):m.offsetTop<y.top?m.offsetTop=y.top:m.offsetTop+l.height>y.bottom&&(m.offsetTop=y.bottom-l.height):m.offsetLeft>y.left?m.offsetLeft=y.left:m.offsetLeft+l.width<y.right&&(m.offsetLeft=y.right-l.width)),a=m.offsetLeft,o=m.offsetTop,"callout"===this.$node.ltProp("type")){v.indexOf("bottom")>-1?(m.classTobeAdded="lytePopoverArrowTop",m.posClass="lytePopBottomToOrig"):v.indexOf("top")>-1?(m.classTobeAdded="lytePopoverArrowBottom",m.posClass="lytePopTopToOrig"):v.indexOf("left")>-1?(m.classTobeAdded="lytePopoverArrowRight",m.posClass="lytePopLeftToOrig"):v.indexOf("right")>-1&&(m.classTobeAdded="lytePopoverArrowLeft",m.posClass="lytePopRightToOrig");var _,L=i.querySelector("#lytePopoverArrow");L.classList.remove("lytePopoverArrowTop","lytePopoverArrowBottom","lytePopoverArrowRight","lytePopoverArrowLeft"),L.classList.add(m.classTobeAdded),i.parentElement.classList.contains(m.posClass)||(i.parentElement.classList.remove("lytePopBottomToOrig","lytePopTopToOrig","lytePopLeftToOrig","lytePopRightToOrig"),i.parentElement.classList.add(m.posClass)),$L.fastdom.measure((function(){_={height:L.offsetHeight,width:L.offsetWidth}})),$L.fastdom.mutate((function(){var e=Math.floor(Math.sqrt(_.height*_.height+_.width*_.width)-2);if("lytePopoverArrowTop"===m.classTobeAdded||"lytePopoverArrowBottom"===m.classTobeAdded){var t=Math.abs(a-(y.left+(y.width-e)/2));L.style.left=t+"px",L.style.top="",t<13&&n.width<=e+22?(t+=r=13-t,L.style.left=t+"px",a-=r):l.width-(t+e)<13&&n.width<=e+22&&(t-=r=13-(l.width-(t+e)),L.style.left=t+"px",a+=r),t>l.width-2*e&&(t=l.width-2*e,L.style.left=t+"px"),"lytePopoverArrowTop"===m.classTobeAdded&&this.setData("transformOrigin",Math.round(t)+"px top"),"lytePopoverArrowBottom"===m.classTobeAdded&&this.setData("transformOrigin",Math.round(t)+"px bottom")}else{var i=Math.abs(o-(y.top+(y.height-e)/2));if(L.style.left="",L.style.top=i+"px",i<13&&n.height<=e+22)i+=r=13-i,L.style.top=i+"px",o-=r;else if(l.height-(i+e)<13&&n.height<=e+22){var r;i-=r=13-(l.height-(i+e)),L.style.top=i+"px",o+=r}"lytePopoverArrowLeft"===m.classTobeAdded&&this.setData("transformOrigin","left "+Math.round(i)+"px"),"lytePopoverArrowRight"===m.classTobeAdded&&this.setData("transformOrigin","right "+Math.round(i)+"px")}}),this)}else if(v.indexOf("bottom")>-1?m.posClass="lytePopBottomToOrig":v.indexOf("top")>-1?m.posClass="lytePopTopToOrig":"left"===v?m.posClass="lytePopLeftToOrig":"right"===v&&(m.posClass="lytePopRightToOrig"),i.parentElement.classList.contains(m.posClass)||(i.parentElement.classList.remove("lytePopBottomToOrig","lytePopTopToOrig","lytePopLeftToOrig","lytePopRightToOrig"),i.parentElement.classList.add(m.posClass)),"lytePopBottomToOrig"==m.posClass||"lytePopTopToOrig"==m.posClass){var C=Math.abs(a-(y.left+y.width/2));"lytePopBottomToOrig"==m.posClass&&this.setData("transformOrigin",Math.round(C)+"px top"),"lytePopTopToOrig"==m.posClass&&this.setData("transformOrigin",Math.round(C)+"px bottom")}else{var w=Math.abs(o-(y.top+y.height/2));"lytePopRightToOrig"===m.posClass&&this.setData("transformOrigin","left "+Math.round(w)+"px"),"lytePopLeftToOrig"===m.posClass&&this.setData("transformOrigin","right "+Math.round(w)+"px")}this.setData("classTobeAdded",m.classTobeAdded),this.$node.ltProp("positionNew",v),$L.fastdom.mutate((function(){if(a-=d.left?d.left:0,o-=d.top?d.top:0,i.style.left=a+"px",i.style.top=o+"px",this.getData("first"))LytePopup.bindTransitionEnd(this.actualModalDiv),this.callOnShow(),this.setOpacityAndVisibility(),this.setData("first",!1),$L.fastdom.mutate((function(){this.addMutationObserver()}),this);else if(this.getData("resize"))this.callOnResize(e),this.setData("resize",!1),i.style.height=this.$node.ltProp("height")?this.$node.ltProp("height"):"auto",i.style.width=this.$node.ltProp("width")?this.$node.ltProp("width"):"auto",$L.fastdom.mutate((function(){this.addMutationObserver()}),this);else if(t){var r=this.getData("prevRect");r&&(r.left!=a||r.top!=o)&&this.getMethods("onPositionChange")&&this.executeMethod("onPositionChange",this)}this.setData("prevRect",{left:a,top:o})}),this)}}),this),this.$node.ltProp("freeze")&&document.body.classList.add("bodyWrapper");var r=this,n=function(){r.setData("modalElemWidth",r.actualModalDiv.offsetWidth),r.setData("modalElemHeigh",r.actualModalDiv.offsetHeight),r.actualModalDiv.removeEventListener("transitionend",n)};this.actualModalDiv.addEventListener("transitionend",n)},positionPopover:function(e,t,a){var o,i=0,r=0,n=this.getData("margin");switch(e){case"bottom":i=t.left-(a.width-t.width)/2,r=t.top+t.height+("box"==this.getData("ltPropType")?0:9)+n.top,o="lytePopoverArrowTop";break;case"bottomLeft":i=t.left,r=t.top+t.height+("box"==this.getData("ltPropType")?0:9)+n.top,o="lytePopoverArrowTop";break;case"bottomRight":i=t.left+t.width-a.width,r=t.top+t.height+("box"==this.getData("ltPropType")?0:9)+n.top,o="lytePopoverArrowTop";break;case"top":i=t.left-(a.width-t.width)/2,r=t.top-(a.height+("box"==this.getData("ltPropType")?0:9))-n.bottom,o="lytePopoverArrowBottom";break;case"topLeft":i=t.left,r=t.top-(a.height+("box"==this.getData("ltPropType")?0:9))-n.bottom,o="lytePopoverArrowBottom";break;case"topRight":i=t.left+t.width-a.width,r=t.top-(a.height+("box"==this.getData("ltPropType")?0:9))-n.bottom,o="lytePopoverArrowBottom";break;case"left":i=t.left-a.width-("box"==this.getData("ltPropType")?0:9)+n.left,r=t.top,o="lytePopoverArrowRight";break;case"leftCenter":i=t.left-a.width-("box"==this.getData("ltPropType")?0:9)+n.left,r=t.top+(t.height-a.height)/2,o="lytePopoverArrowRight";break;case"leftBottom":i=t.left-a.width-("box"==this.getData("ltPropType")?0:9)+n.left,r=t.bottom-a.height,o="lytePopoverArrowRight";break;case"right":i=t.left+t.width+("box"==this.getData("ltPropType")?0:9)-n.right,r=t.top,o="lytePopoverArrowLeft";break;case"rightCenter":i=t.left+t.width+("box"==this.getData("ltPropType")?0:9)-n.right,r=t.top+(t.height-a.height)/2,o="lytePopoverArrowLeft";break;case"rightBottom":i=t.left+t.width+("box"==this.getData("ltPropType")?0:9)-n.right,r=t.bottom-a.height,o="lytePopoverArrowLeft"}return{offsetLeft:i,offsetTop:r,classTobeAdded:o}},callOnShow:function(){this.$node.classList.add("lytePopoverOpened"),this.getMethods("onShow")&&this.executeMethod("onShow",this)},setOpacityAndVisibility:function(){if("zoom"===this.getData("ltPropAnimation")){this.actualModalDiv.style.transition="none",this.actualModalDiv.style.transform="scale(0)",this.actualModalDiv.classList.add("lytePopoverVisible");var e=this;setTimeout((function(){e.actualModalDiv.style.transition="",e.actualModalDiv.style.transitionDuration=parseFloat(e.getData("ltPropDuration"))/1e3+"s",LytePopup.makingVisible=!0,e.actualModalDiv.style.transformOrigin=e.getData("transformOrigin"),e.actualModalDiv.style.transform="scale(1)"}),50)}else this.actualModalDiv.style.transitionDuration=parseFloat(this.getData("ltPropDuration"))/1e3+"s",LytePopup.makingVisible=!0,this.actualModalDiv.classList.add("lytePopoverVisible")},computeOffset:function(){this.getData("ltPropShow")&&this.computeOffsetImpl()}.observes("ltPropOriginElem"),onBeforeCloseHandling:function(e){var t=!0;this.getMethods("onBeforeClose")&&(t=this.executeMethod("onBeforeClose",e,this));var a=this;if(void 0===t||t)if(delete this.$node.alignPopover,delete this.$node.calculateOffset,this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),this.getData("ltPropAutoAlign")&&this.$node.mutobserver&&(this.$node.mutobserver.disconnect(),delete this.$node.mutobserver),this.getData("arrowHidden")&&(this.getData("arrowEle").style.display="",this.setData("arrowHidden",!1),this.setData("arrowEle",null)),_lyteUiUtils.getRTL()&&this.getData("ltPropPlacement")&&this.setRTLPosition(),null==this.getData("ltPropDuration"))this.$node.ltProp({showCopy:!1,show:!1}),this.$node.classList.remove("lytePopoverOpened"),"zoom"==this.getData("ltPropAnimation")?this.actualModalDiv.style.transform="scale(0)":this.actualModalDiv.classList.remove("lytePopoverVisible"),LytePopup.closePopup(this),this.setData("visible",!1),this.$node.ltProp("freeze")&&this.childComp.querySelector("lyte-popover-freeze")&&(this.childComp.querySelector("lyte-popover-freeze").style.opacity=0,this.childComp.querySelector("lyte-popover-freeze").style.visibility=""),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.remove("noFreeze"),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling"),this.getMethods("onClose")&&this.executeMethod("onClose",e,this),LytePopup.checkAndRemoveWrapper(),setTimeout((function(){a.getData("visible")||($L(a.childComp).find(".lytePopover")[0]&&($L(a.childComp).find(".lytePopover")[0].style.left="",$L(a.childComp).find(".lytePopover")[0].style.top=""),a.childComp&&(a.childComp.classList.add("lytePopoverDispNone"),a.setData("ltPropShowWormhole",!1)))}),20);else{var o=parseInt(this.getData("ltPropDuration"));this.tIdClose=setTimeout((function(){a.tIdClose=!1,"zoom"==a.getData("ltPropAnimation")&&(a.actualModalDiv.classList.remove("lytePopoverVisible"),a.actualModalDiv.style.transform=""),a.$node.ltProp({showCopy:!1,show:!1}),a.$node.classList.remove("lytePopoverOpened"),a.getMethods("onClose")&&a.executeMethod("onClose",e,a),LytePopup.checkAndRemoveWrapper(),a.getData("ltPropBindToBody")||a.removeDOMReferences()}),o),this.actualModalDiv.style.transitionDuration=(0==o?0:o>300?o-200:100)/1e3+"s","zoom"==this.getData("ltPropAnimation")?this.actualModalDiv.style.transform="scale(0)":this.actualModalDiv.classList.remove("lytePopoverVisible"),LytePopup.closePopup(this),this.setData("visible",!1),setTimeout((function(){a.getData("visible")||($L(a.childComp).find(".lytePopover")[0]&&($L(a.childComp).find(".lytePopover")[0].style.left="",$L(a.childComp).find(".lytePopover")[0].style.top=""),a.childComp&&a.childComp.classList.add("lytePopoverDispNone"))}),parseInt(a.getData("ltPropDuration"))+20),this.$node.ltProp("freeze")&&this.childComp.querySelector("lyte-popover-freeze")&&(this.childComp.querySelector("lyte-popover-freeze").style.opacity=0,this.childComp.querySelector("lyte-popover-freeze").style.visibility=""),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.remove("noFreeze"),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling")}else this.setData("returnedFalse",!0),this.getData("visible")||this.setData("visible",!0),this.$node.ltProp("show",!0)},onBeforeShowHandling:function(){var e=!0;if(this.getMethods("onBeforeShow")&&(e=this.executeMethod("onBeforeShow",this)),void 0===e||e){if(this.childComp.classList.remove("lytePopoverDispNone"),this.setData("checkAria",this.getData("checkAria")+1),this.getData("ltPropDraggable")&&this.addDragHandler(),this.updateScrollHandling(),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.add("noFreeze"),this.$node.ltProp("positionNew",this.$node.ltProp("position")),null==this.getData("ltPropDuration"))this.$node.ltProp("showCopy",!0),this.fastdomfn5=$L.fastdom.mutate((function(){delete this.fastdomfn5,this.fastdomfn6=$L.fastdom.measure((function(){delete this.fastdomfn6,this.fastdomfn7=$L.fastdom.mutate((function(){delete this.fastdomfn7,this.computeOffsetImpl()}),this)}),this)}),this);else{var t=this;this.initCompute=setTimeout((function(){delete t.initCompute,t.$node.ltProp("showCopy",!0),t.fastdomfn5=$L.fastdom.mutate((function(){delete t.fastdomfn5,t.fastdomfn6=$L.fastdom.measure((function(){delete t.fastdomfn6,t.fastdomfn7=$L.fastdom.mutate((function(){delete t.fastdomfn7,t.computeOffsetImpl()}),t)}),t)}),t)}),0)}if(this.getData("first")||this.setData("first",!0),$L.fastdom.measure((function(){var e=this.$node.ltProp("originElem")?LytePopup.getScrollParent(document.querySelector(this.$node.ltProp("originElem"))):null;this.getData("ltPropFreeze")||e&&e.isEqualNode(document.body)||document.body.classList.add("lyteStopBodyScrolling")}),this),this.getData("visible")||this.setData("visible",!0),LytePopup.addPopup(this),this.$node.ltProp("freeze")){var a=this.childComp.querySelector("lyte-popover-freeze").style;a.background=this.getData("ltPropDimmer").color,this.addedFreezeDetails||(a.opacity=this.getData("ltPropDimmer").opacity)}this.$node.alignPopover=this.computeOffsetImpl.bind(this),this.$node.calculateOffset=this.updateScrollHandling.bind(this)}else this.$node.ltProp({showCopy:!1,show:!1})},didDestroy:function(){this.$node.classList.remove("lytePopoverOpened"),this.childComp&&(this.clearFastdomBatch(),this.getData("ltPropAutoAlign")&&this.$node.mutobserver&&(this.$node.mutobserver.disconnect(),delete this.$node.mutobserver),this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),this.tIdBeforeClose=!1),this.tIdClose&&(clearTimeout(this.tIdClose),this.tIdClose=!1),this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.childComp.remove(),this.removeDOMReferences(),LytePopup.checkAndRemoveWrapper(),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling"))},actions:{close:function(){this.$node.ltProp("show",!1)}},methods:{beforeWormholeAppend:function(e){if(this.childComp=e,this.$node.parentElement&&"LYTE-COLORPICKER"==this.$node.parentElement.tagName&&(this.$node.parentElement.component.childComp=this.childComp),this.childComp.querySelector("lyte-popover-header")&&(this.childComp.querySelector("lyte-popover-header").style.padding=this.getData("ltPropHeaderPadding")),this.childComp.querySelector("lyte-popover-content")&&(this.childComp.querySelector("lyte-popover-content").style.padding=this.getData("ltPropContentPadding")),this.childComp.querySelector("lyte-popover-footer")&&(this.childComp.querySelector("lyte-popover-footer").style.padding=this.getData("ltPropFooterPadding")),this.actualModalDiv=this.childComp.querySelector(".lytePopover"),this.childComp.querySelector("lyte-popover-header")&&this.getData("ltPropShowCloseButton")){var t=0,a=0;$L.fastdom.measure((function(){t=this.childComp.querySelector("lyte-popover-header").offsetHeight,a=this.childComp.querySelector(".lytePopoverClose").offsetHeight}),this),$L.fastdom.mutate((function(){this.childComp.querySelector(".lytePopoverClose").style.top=(t-a)/2+"px"}),this)}}},observeClickEvent:function(){LytePopup._stopPropagation=this.getData("ltPropStopClick"),LytePopup._stopPropagation?LytePopup._sourceComp=this:LytePopup._sourceComp&&delete LytePopup._sourceComp}.observes("ltPropStopClick")}),"complete"===document.readyState||"interactive"===document.readyState?addPopoverEvent():document.addEventListener("DOMContentLoaded",(function(e){addPopoverEvent(e)})),function(){if(lyteDomObj){var e=navigator.userAgent,t={uA:e,isUbuntu:/ubuntu/gi.test(e),isIpad:/ipad/gi.test(e),safari:/safari/gi.test(e),isIE11Lyte:/rv:11/gi.test(e),isEdgeLyte:/Edge/gi.test(e),mode:{},chrome:!!window.chrome,firefox:/firefox/gi.test(e)};function a(e,t,a,o){var i,r=document.createElement("div");return r.className=e,r._scrolldiv=this,r.style.visibility="hidden",(i=document.createElement("div")).classList.add("lyteScrollDiv"),t.handlerClass&&i.classList.add(t.handlerClass),t.containerClass&&r.classList.add(t.containerClass),r.appendChild(i),a?(i._direction=a,t.horizontalContainerClass&&r.classList.add(t.horizontalContainerClass),t.horizontalHandlerClass&&i.classList.add(t.horizontalHandlerClass),this._horiDiv=r):(t.verticalContainerClass&&r.classList.add(t.verticalContainerClass),t.verticalHandlerClass&&i.classList.add(t.verticalHandlerClass),this._vertDiv=r),(o?this.parentElement:this).appendChild(r),r.addEventListener("click",c,!0),i.addEventListener("mousedown",h),this._infiniteScroll||i.addEventListener("touchstart",h),r}function o(e,t,a){e.style[t]!=a&&(e.style[t]=a)}function i(e){for(var t,a=(e=e||{target:this}).target.correspondingElement||e.target;a&&a!=this;){if(a.classList.contains("preventWheel")){t=!0;break}a=a.parentElement}return t}function r(e,t,a,i,r){var n;if(r=r||{},fn=function(e){o(e,"visibility","hidden"),e.classList.remove("visible")},e.scroll)t&&fn(t);else{var s="scroll"==this._scrollData.showOn;-1!=["mouseenter","touchstart"].indexOf(r.type)&&s||(this._enableScroll=!e.frm_reset,!t||s&&e.frm_reset||(clearTimeout(t._entertimeout),clearTimeout(t._leavetimeout),delete t._entertimeout,delete t._leavetimeout,e.scrollbar?fn(t):("touchstart"==r.type?t._entertimeout=setTimeout(o.bind(this,t,"visibility","visible"),150):o(t,"visibility","visible"),t.classList.add("visible"),w.call(this,i,void 0,{},a)))),n=!0}return n}function n(e){this.removeEventListener("wheel",n,!0),this.classList.contains("eventBinded")||l.call(this,{type:"mouseenter"}),e.preventDefault()}function s(e){var t={};return["x","y","bottom","height","top","width","left","right"].forEach((function(a){t[a]=Math.round(e[a])})),t}function l(e,t){if(!(this.classList.contains("eventBinded")&&1!=e||"mouseenter"==e.type&&this._prtmseenr)){var a,o={scrollLeft:Math.round(this.scrollLeft),scrollTop:Math.round(this.scrollTop),scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:s(this.getBoundingClientRect())},i=this._scrollData;if(this._wheelObj=o,this.classList.contains("lyteTableScroll")&&L.call(this,o),this._direction=getComputedStyle(this).direction,o.vertbcr=this._vertDiv?this._vertDiv.getBoundingClientRect():{},o.horbcr=this._horiDiv?this._horiDiv.getBoundingClientRect():{},a=r.call(this,y.call(this,!0,o,t),this._vertDiv,o,!0,e),(a=r.call(this,y.call(this,!1,o,t),this._horiDiv,o,!1,e)||a)&&e){if(this._mouseleave=this._mouseleave||p.bind("parent"==i.appendTo?this.parentElement:this),"touchstart"==e.type){if(1!=e.touches.length)return;clearTimeout(this._tchtime),document.addEventListener("touchcancel",this._mouseleave,!0)}else this.addEventListener("wheel",m,!0),this.addEventListener("keydown",d,!0),"scroll"==this._scrollData.showOn&&this.addEventListener("mousemove",_,!0);this._allowTouch=!0,document.addEventListener("touchend",this._mouseleave,!0),this.classList.add("eventBinded"),this._tabindex=null==this._tabindex?this.tabIndex:this._tabindex,-1==this.tabIndex&&(this.tabIndex=0)}}}function d(e){if(e.target==this){var a=e.keyCode,o={scrollLeft:Math.round(this.scrollLeft),scrollTop:Math.round(this.scrollTop),scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:this.getBoundingClientRect()};if(-1!=[37,38,39,40].indexOf(a)){var i,r,n=this._scrollData.keyStep,s=e.metaKey||e.ctrlKey,l=this._direction;if(38==a)i=s?-o.scrollTop:-n,r=!0;else if(40==a)i=s?o.scrollHeight-o.scrollTop:n,r=!0;else if(39==a){var d;if("rtl"==l)d=t.isIE11Lyte||t.isEdgeLyte?o.scrollWidth-o.scrollLeft:t.firefox||t.safari?-o.scrollLeft:o.scrollWidth-o.bcr.width,i=s?d:n;else i=s?o.scrollWidth-o.bcr.width:n}else i="rtl"==l&&(t.firefox||t.safari)?s?o.bcr.width-o.scrollWidth:-n:s?-o.scrollLeft:-n;0!=i&&g.call(this,o,r,i)&&(this[r?"scrollTop":"scrollLeft"]+=i,D.call(this,e),e.preventDefault())}}}function p(e){if(!((e=e||{}).relatedTarget&&this.contains(e.relatedTarget)||document._scrollmouseup)){if("touchend"==e.type){var t=e.target.correspondingElement||e.target;if(t&&t.classList.contains("lyteScrollContainer"))return}var a=$L(this).children(".lyteScrollContainer"),i=this._scrolldiv||this;if(a.length){for(var r=0;r<a.length;r++){var s=a[r];clearTimeout(s._entertimeout),clearTimeout(s._leavetimeout),delete s._entertimeout,delete s._leavetimeout,s.classList.remove("visible"),"touchend"==e.type?s._leavetimeout=setTimeout(o.bind(this,s,"visibility","hidden"),150):s.style.visibility="hidden"}"mouseleave"==e.type?(i.removeEventListener("wheel",m,!0),i.removeEventListener("keydown",d,!0),i.removeEventListener("mousemove",_,!0),i.addEventListener("wheel",n,!0)):"touchend"!=e.type&&"touchcancel"!=e.type||(i._prtmseenr=!0,i._tchtime=setTimeout((function(){delete i._prtmseenr}),500),document.removeEventListener("touchcancel",i._mouseleave,!0)),e.type&&(document.removeEventListener("touchend",i._mouseleave,!0),delete i._allowTouch,i.classList.remove("eventBinded"),delete i._wheelObj,delete i._prevPosY,delete i._mouseleave,delete i._prevPosX,delete i._wheelEvt),delete i._enableScroll}}}function c(e){if(this.classList.contains("visible")){if("touchmove"==e.type){if(e.touches.length>1)return;e.preventDefault(),e=e.touches[0]}var t,a=this._scrolldiv,o=this.children[0],i=this.getBoundingClientRect(),r=o.getBoundingClientRect(),n={scrollLeft:Math.round(a.scrollLeft),scrollTop:Math.round(a.scrollTop),scrollWidth:a.scrollWidth,scrollHeight:a.scrollHeight,bcr:a.getBoundingClientRect()},s="width",l="left",d="scrollLeft",p="scrollWidth",c="clientX";this.classList.contains("lyteTableScroll")&&!n.$nodeClient&&L.call(this,n),n.vertbcr=this._vertDiv?this._vertDiv.getBoundingClientRect():{},n.horbcr=this._vertDiv?this._horiDiv.getBoundingClientRect():{},o._direction||(!0,s="height",l="top",d="scrollTop",p="scrollHeight","bottom",c="clientY"),t=("click"!=e.type?e[c]-(this.prev||e[c]):e[c]-(r[l]+r[s]/2))/(n.bcr[s]+n.bcr[l]-i[l])*n[p],a[d]+=t,D.call(a,e),this.prev=e[c]}}function h(e){var t="touchstart"==e.type,a=this.parentNode,o=document,i="addEventListener";o[i](t?"touchmove":"mousemove",o._scrollmousemove=c.bind(a),!0),o[i](t?"touchend":"mouseup",o._scrollmouseup=u.bind(a),!0),e.preventDefault(),e.stopPropagation()}function u(e){var t="touchend"==e.type,a=document,o="removeEventListener",i=this._scrolldiv||this,r=e.target,n=i._scrollData;a[o](t?"touchmove":"mousemove",a._scrollmousemove,!0),a[o](t?"touchend":"mouseup",a._scrollmouseup,!0),delete a._scrollmousemove,delete a._scrollmouseup,delete this.prev,i.contains(r.correspondingElement||r)||"always"==n.showOn||p.call("parent"==n.appendTo?i.parentNode:i,{type:"mouseleave"})}function f(e){var t=this._scrollData,a=document;a._scrollmouseup||a.addEventListener("mouseup",a._scrollmouseup=u.bind("parent"==t.appendTo?this.parentElement:this),!0)}function y(e,t,a){var o="scrollTop",i="scrollHeight",n="height",s=e?this._vertDiv:this._horiDiv,l=this._scrollData,d=l.scrollYMarginOffset;return e||(o="scrollLeft",i="scrollWidth",n="width",d=l.scrollXMarginOffset),t[o]+t.bcr[n]>=t[i]&&0==t[o]?(s&&s.classList.contains("visible")&&r.call(this,{scroll:!0,scrollbar:!0},s),{scroll:!0,scrollbar:!0,frm_reset:a}):{scroll:!1,scrollbar:t[i]-t.bcr[n]<=d,frm_reset:a}}function m(e){if(!i.call(this,e))if("touchmove"==e.type){if(this._allowTouch&&1==e.touches.length){var t=e.touches[0];P.call(this,e,[(this._prevPosX||t.clientX)-t.clientX,(this._prevPosY||t.clientY)-t.clientY]),this._prevPosY=t.clientY,this._prevPosX=t.clientX}}else P.call(this,e)}function g(e,a,o){var i="scrollTop",r="scrollHeight",n="height";a?this._vertDiv:this._horiDiv;return a||(i="scrollLeft",r="scrollWidth",n="width"),!(o>0&&Math.round(e[i]+e.bcr[n])>=e[r]||o<0&&Math.round(-e[i]+e.bcr[n])>=e[r])&&(!!(!a&&t.firefox&&"rtl"==this._direction&&o<0&&0==e[i])||!(o<0&&0==e[i]&&!(o<0&&t.safari&&"rtl"==this._direction&&0==e[i])))}function v(e){var a=this._scrollData,o=a.min,i=a.max,r=a.wheelSpeed,n=r,s=t.uA.toLowerCase(),l=this._infiniteScroll,d=t.isIE11Lyte;-1==s.indexOf("edge")&&-1==s.indexOf("trident")&&-1==s.indexOf("msie")||"rtl"!=this._direction||(r*=-1);var p,c,h=e.deltaMode&&1==e.deltaMode,u=e.deltaX,f=e.deltaY;if(e.shiftKey){var y=u;u=f,f=y}return u>0?p=Math.max(h?6*u:u,l?0:4):u<0&&(p=Math.min(l?0:-4,h?6*u:u)),f>0?c=Math.min(i,Math.max(h?6*f:f,l?0:4),d?20:1/0):f<0&&(c=Math.max(o,Math.min(l?0:-4,h?6*f:f),d?-20:-1/0)),[p*r,c*n]}function b(e,t){for(var a=e.target;a!=this;){var o=Math.round(a.scrollTop),i=a.scrollHeight,r=a.offsetHeight,n=window.getComputedStyle(a),s=/scroll|auto/i.test(n.overflowY)||a.classList.contains("lyteScrollBar")&&/hidden/i.test(n.overflowY);if(r<i)if(t){if(r+o<i&&s)return!0}else if(o&&s)return!0;a=a.parentNode}}function P(e,a){var o,i,r=a||v.call(this,e),n=r[0]||0,d=r[1]||0,c=!1,h=this._wheelObj||{},u=this.classList.contains("lyteTableScroll"),f=e.deltaX,m=e.deltaY,P=this._scrollData;if(e.shiftKey){var D=f;f=m,m=D}if(Math.abs(a?n:f||0)<=Math.abs(a?d:m||0)&&(c=!0),!(P.nested&&c&&b.call(this,e,d>0))){if("scroll"==P.showOn){if(!this._enableScroll)return l.call(this,!0),void e.preventDefault();clearTimeout(this._scrollplugin),this._scrollplugin=setTimeout(p.bind("parent"==P.appendTo?this.parentElement:this,{}),P.tOut)}if(this._scrollEnd&&(h={scrollLeft:Math.round(this.scrollLeft),scrollTop:Math.round(this.scrollTop),scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:s(this.getBoundingClientRect())},this._wheelObj=h,this.classList.contains("lyteTableScroll")&&L.call(this,h)),this._wheelObj){if((o=y.call(this,c,h)).scroll&&c&&(!this._vertDiv||this._vertDiv&&!this._vertDiv.classList.contains("visible"))||o.scroll&&!c&&(!this._horiDiv||this._horiDiv&&!this._horiDiv.classList.contains("visible")))return;i=g.call(this,h,c,c?d:n);var _=this._infiniteScroll;!!_&&this.comp._stopScroll;if(!(_&&d>0||i))return void(P.preventOnEnd&&e.preventDefault());e.preventDefault(),!i&&u&&c&&this.comp.scrollTable.call(this.comp,{yScroll:d},this._wheelObj)}c?t.isIE11Lyte?this._wheelObj&&(this._wheelObj.scrollTop=Math.max(Math.min(this._wheelObj.scrollTop+d,this._wheelObj.scrollHeight-this._wheelObj.bcr.height),0),u&&(e.yScroll=d,this.comp.scroll.call(this,e)),this.scrollTop+=d):t.isIE11Lyte||(this.scrollTop+=d):t.isIE11Lyte?this._wheelObj&&(this._wheelObj.scrollLeft=Math.max(Math.min(this._wheelObj.scrollLeft+n,this._wheelObj.scrollWidth-this._wheelObj.bcr.width),0),u&&(e.xScroll=n,this.comp.scroll.call(this,e)),this.scrollLeft+=n):this.scrollLeft+=n,(t.safari||t.isIE11Lyte||t.isIpad)&&(this._alive=!0,clearTimeout(this._alivetime),this._alivetime=setTimeout(function(){delete this._alive,delete this._alivetime}.bind(this),16),this._scrollFun.call(this,e))}}function D(e){var a,o,i=t.isIE11Lyte||t.safari||t.isIpad,r=t.isIE11Lyte;if(i&&e&&"scroll"==e.type&&this._alive&&!e._byFunc)C.call(this,t.mode.a,t.mode.b,this._wheelObj||{bcr:{}},e);else{var n={scrollLeft:Math.round(this.scrollLeft),scrollTop:Math.round(this.scrollTop),scrollWidth:this.scrollWidth,scrollHeight:this.scrollHeight,bcr:this.getBoundingClientRect()};this._wheelObj=n,this.classList.contains("lyteTableScroll")&&L.call(this,n),this.prevScrlLeft!=n.scrollLeft&&(a=n.scrollLeft-(this.prevScrlLeft||0),o=0,w.call(this,!1,a,e,n)),this.prevScrlTop!=n.scrollTop&&(o=n.scrollTop-(this.prevScrlTop||0),a=0,w.call(this,!0,o,e,n)),t.mode.b=o,t.mode.a=a,r&&(!i||this._alive&&!e._byFunc)||this.classList.contains("lyteTableScroll")&&this.comp.scroll.call(this,e)}}function _(e){clearTimeout(this._scrollplugin),this._scrollplugin=setTimeout(p.bind("parent"==this._scrollData.appendTo?this.parentElement:this),500)}function L(e){var t=this.comp.$node.getElementsByTagName("lyte-th");if(this._infiniteScroll){e.$nodeClient=this.parentElement.getBoundingClientRect();var a=this.getElementsByClassName("lytePreventInfiniteScroll");e.neglected=[];for(var o=0;o<a.length;o++)a[o].classList.contains("lyteHidden")||e.neglected.push(a[o]);if(e.compNeg=a,null!=this.comp._top){e.topElem=[];for(var i=this.getElementsByTagName("lyte-tbody")[0],r=i.getElementsByTagName("lyte-tr"),n=0;n<r.length;n++)r[n].classList.contains("dummy")||e.topElem.push(r[n]);e.topElem=e.topElem[this.comp._top+e.compNeg.length],e.topElemClient=e.topElem?this.comp.topElem(e.topElem):{},e.bottmElem=i.querySelector("lyte-tr:nth-of-type("+(this.comp._bottom+1+e.compNeg.length)+")"),e.bottmElemClient=e.bottmElem?this.comp.topElem(e.bottmElem):{},e.tbody=i,e.tbodyClient=e.tbody?e.tbody.getBoundingClientRect():{}}}e.scrollDivClient=e.bcr;for(var s=0;s<t.length;s++)t[s].property=t[s].getBoundingClientRect(),t[s].order=s;e.calculated=!0}function C(e,a,o,i){delete this._scrollEnd;var r=this._scrollData.offset,n="rtl"==this._direction;(Math.ceil(o.scrollLeft+o.bcr.width+r.x)>=o.scrollWidth&&(!n||!t.chrome)||(t.firefox||t.safari)&&n&&Math.ceil(-o.scrollLeft+o.bcr.width+r.x)>=o.scrollWidth||n&&t.chrome&&o.scrollLeft==r.x)&&(i.horiScrollEnd=!0),Math.ceil(o.scrollTop+o.bcr.height+r.y)>=o.scrollHeight&&(this._scrollEnd=i.vertScrollEnd=!0),i.yScroll=a,i.xScroll=e,i._byPlugin=!0,this._wheelObj=o}function w(e,a,i,r){var n=this,s=n._vertDiv,l=n._horiDiv;if(0!=parseInt(Math.abs(a))&&(!e||s)&&(e||l)){var d=e?s:l,p=r[(e?"vert":"hori")+"bcr"]||d.getBoundingClientRect(),c=d.children[0],h="scrollTop",u="scrollHeight",f="height",y="top",m="rtl"==n._direction,g=n._scrollData,v=r.bcr,b="parent"!=g.appendTo,P=e&&g.topOffset||0;b&&(p=v),e||(h="scrollLeft",u="scrollWidth",f="width",y="left");var D=v[f],_=p[y],L=(D-(_+P-v[y]))/r[u],w=r[h]/r[u],T=g.minLength,x=T?"auto"!=T?T:0:.1*D;if(o(c,f,Math.max(L*D,x).toFixed(3)+"px"),o(c,"transform",m&&c._direction?"translateX("+(t.safari&&(_lyteUiUtils.isNegativeScroll()||!window.chrome)||t.firefox?r[h]/r[u]*100*r.bcr[f]/parseFloat(Math.max(L*D,x).toFixed(3)):-(r[u]-D-r[h])/r[u]*100*D/parseFloat(Math.max(L*D,x).toFixed(3)))+"%)":(e?"translateY":"translateX")+"("+w*(D-(_-v[y])-Math.max(0,x-L*D))+"px)"),b){o(d,f,D+"px");var S=e?l:s,A="translate("+r.scrollLeft+"px,"+r.scrollTop+"px)";o(S,"transform",A),o(d,"transform",A)}n.prevScrlLeft=r.scrollLeft,n.prevScrlTop=r.scrollTop,i.type&&C.call(n,e?0:a,e?a:0,r,i)}}function T(){for(var e=0;e<this.length;e++){var t=this[e],a=t.parentElement;if(a){var o=t._scrollData;o&&("parent"!=o.appendTo&&(a=t),delete t._scrollData);for(var i=a.querySelectorAll("div.lyteScrollContainer"),r=0;r<i.length;r++)i[r].parentElement==a&&(delete i[r]._entertimeout,delete i[r]._leavetimeout,a.removeChild(i[r]));t.classList.remove("lyteScrollBar","eventBinded"),t.removeEventListener("mouseenter",l,!0),t.removeEventListener("wheel",n,!0),t.removeEventListener("touchstart",l,!0),a.removeEventListener("mouseleave",p,!0),t.removeEventListener("mousedown",f),t.removeEventListener("touchmove",m,{passive:!1}),t.removeEventListener("scroll",D,!0),clearTimeout(t._tchtime),t._mouseleave&&(document.removeEventListener("touchcancel",t._mouseleave,!0),document.removeEventListener("touchend",t._mouseleave,!0)),delete t._wheelObj,delete t._vertDiv,delete t._horiDiv,delete t._scrollFun,delete t._alivetime,delete t._alive,delete t._wheelObj,delete t.resetScrollbar,delete a._scrolldiv,delete t._tchtime,delete t._allowTouch,t.classList.remove("eventBinded"),t.tabIndex=t._tabindex,delete t._tabindex,delete t._wheelObj,delete t._prevPosY,delete t._mouseleave,delete t._prevPosX,delete t._wheelEvt}}return this}function x(){return $L(".lyteScrollBar").scroll("destroy"),window.removeEventListener("scroll",A,!0),this}function S(){for(var e=0;e<this.length;e++){var t=this[e];t._scrollData&&t.resetScrollbar(!0,!0)}return this}function A(e){var t=e.target.correspondingElement||e.target;t!=document&&t!=document.body&&t._scrollFun&&t._scrollFun.call(t,e),e._byFunc&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}lyteDomObj.prototype.removeScroll=function(){return T.call(this)},lyteDomObj.prototype.scroll=function(e){if(e&&e.constructor==String)return"destroy"==e?T.call(this):void("destroyScroll"==e?x.call(this):"reset"==e&&S.call(this));var i=function(e,t,a){var o=e[t];null==o&&(o=a),e[t]=o};(e=e||{}).showOn=e.showOn||"hover",e.keyStep=e.keyStep||30,e.wheelSpeed=e.wheelSpeed||1,i(e,"preventOnEnd",!1),e.offset=e.offset||{x:0,y:0},e.tOut=e.scrollTimeout||500,e.nested=e.nested||!1,e.min=e.min||-1/0,e.max=e.max||1/0,e.appendTo=e.appendTo||"parent",i(e,"scrollYMarginOffset",5),i(e,"scrollXMarginOffset",5),e.preventXScroll&&(e.preventHorizontal=!0),e.preventYScroll&&(e.preventVertical=!0);for(var r=this,s="parent"==e.appendTo,d=0;d<r.length;d++){var c,h=r[d],u=h.parentElement;s&&o(u,"position","relative"),h._scrollData&&$L(h).removeScroll(),h.resetScrollbar=l.bind(r[d]),s&&(u._scrolldiv=h),h._scrollData=e,e.preventVertical||(c=a.call(h,"lyteScrollContainer lyteScrollContainerY",e,void 0,s),"left"==e.verticalPosition&&c.classList.add("left")),e.preventHorizontal||(c=a.call(h,"lyteScrollContainer lyteScrollContainerX",e,!0,s),"top"==e.horizontalPosition&&c.classList.add("top")),t.firefox&&(h.scrollLeft=0,h.scrollTop=0),h.addEventListener("mouseenter",l,!0),h.addEventListener("touchstart",l,!0),h.addEventListener("touchmove",m,{passive:!1}),h.addEventListener("mousedown",f),h.addEventListener("wheel",n,!0),"always"!=e.showOn?(s?u:h).addEventListener("mouseleave",p,!0):setTimeout(l.bind(h),100,{}),h.classList.add("lyteScrollBar"),h._scrollFun=D}return this},lyteDomObj.prototype.destroyLyteScroll=function(){return x.call(this)},lyteDomObj.prototype.resetScrollbar=function(){return S.call(this)},window.addEventListener("scroll",A,!0)}}(window),Lyte.Component.register("lyte-menu",{_template:'<template tag-name="lyte-menu"> <lyte-menu-box id="{{randomId}}" class="{{ltPropWrapperClass}}" onmousemove="{{action(\'mousemove\',event,this)}}"> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-menu-body id="{{ltPropId}}" class="{{ltPropClass}}" tabindex="1"> <template is="for" items="{{ltPropContent}}" item="menu" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(menu)}}"><template case="true"> <lyte-menu-group elemorder="{{indexVal}}"> <template is="if" value="{{lyteUiReturnOnlyKey(menu)}}"><template case="true"> <lyte-menu-header> {{lyteUiReturnOnlyKey(menu)}} </lyte-menu-header> </template></template> <template is="for" items="{{lyteUiReturnOnlyValue(menu)}}" item="menu1" index="indexVal1"><template is="if" value="{{expHandlers(lyteUiIsObject(menu1),\'==\',false)}}"><template case="true"> <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{menu1}}"> <lyte-menu-label>{{menu1}}</lyte-menu-label> </lyte-menu-item> </template><template case="false"> <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" id="{{menu1.id}}" class="{{menu1.class}}" data-value="{{menu1[ltPropSystemValue]}}"> <lyte-menu-label>{{menu1[ltPropUserValue]}}</lyte-menu-label> <template is="if" value="{{menu1[ltPropDescription]}}"><template case="true"> <lyte-menu-description> {{menu1[ltPropDescription]}}</lyte-menu-description> </template></template> </lyte-menu-item> </template></template></template> </lyte-menu-group> </template><template case="false"><template is="if" value="{{expHandlers(lyteUiIsObject(menu),\'==\',false)}}"><template case="true"> <lyte-menu-item elemorder="{{indexVal}}" data-value="{{menu}}"> <lyte-menu-label>{{menu}}</lyte-menu-label> </lyte-menu-item> </template><template case="false"> <lyte-menu-item elemorder="{{indexVal}}" id="{{menu.id}}" class="{{menu.class}}" data-value="{{menu[ltPropSystemValue]}}"> <lyte-menu-label>{{menu[ltPropUserValue]}}</lyte-menu-label> <template is="if" value="{{menu[ltPropDescription]}}"><template case="true"> <lyte-menu-description> {{menu[ltPropDescription]}}</lyte-menu-description> </template></template> </lyte-menu-item> </template></template></template></template></template> </lyte-menu-body> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template> </template></template> </lyte-menu-box> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropContent","ltPropId","ltPropClass","ltPropQuery","ltPropEvent","ltPropYield","ltPropUserValue","ltPropSystemValue","ltPropCallout","ltPropPosition","ltPropDescription","ltPropTabIndex","ltPropFreeze","ltPropShow","ltPropWidth","ltPropHeight","ltPropQueryClass","ltPropBoundary","ltPropScope","ltPropPreventInsideClick","ltPropAnimate","ltPropSetCss","ltPropWrapperClass","ltPropWrapperId","ltPropBindToBody","ltPropAria","ltPropAriaAttributes","ltPropOffset","ltPropHeightResetOnScroll","ltPropPreventKeyEvents","ltPropForceClick","eventListeners","pos","parIndex","lyteUnbound","randomId"],init:function(){var e=this.getData("ltPropEvent"),t=this.checkElementForMenu.bind(this);if(this.setData("eventListeners.event",t),this._close=this.closing.bind(this),this._trsend=this.tranEnd.bind(this),this._hoverclose=this.hoverClose.bind(this),document.addEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(e)?"mousemove":e,t,!0),!document.getElementsByClassName("lytemenufreezelayer")[0]&&this.getData("ltPropFreeze")){this.appendFreeze.call(this,"lytemenufreezelayer left lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer top lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer bottom lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer right lyteMenuHidden");var a=this.appendFreeze.call(this,"lytemenufreezelayer nogroup lyteMenuHidden");a.addEventListener("wheel",this.preventEvent),a.addEventListener("touchmove",this.preventEvent)}document.hasOwnProperty("_lyteMenu")||(document.documentElement.addEventListener("click",lyteCloseMenu,!0),document.documentElement.addEventListener("keydown",this.keydownCheck,!0),document.documentElement.addEventListener("keypress",menukeypress,!0),window.addEventListener("orientationchange",this.resizeFunc,!0),window.addEventListener("resize",this.resizeFunc,!0),document._lyteMenu={},document._lyteMenu.eventFlag=!0),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(e,t,a){if(this._dir){if(t)return"right"==e?a-t.left:a-t.right;if("left"==e)return"right"}return t?t[e]:"left"},actions:{mousemove:function(e,t){var a="lyteMenuSelection",o=e.target.closest("lyte-menu-item:not(.lyteSearchHidden):not(.lyteMenuItemDisabled)"),i=t.getElementsByClassName(a)[0],r=function(e){var t="aria-activedescendant";$L(this.$node.element).attr(t,e),$L(this.childComp).attr(t,e)}.bind(this);i!=o&&o&&(i&&$L(i).removeClass(a),$L(o).addClass(a),r(o.id))}},arrayFrom:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t.slice()},appendFreeze:function(e){var t=document.createElement("div");return t.setAttribute("class",e),document.body.appendChild(t)},resizeFunc:function(e){e&&"resize"==e.type&&_lyteUiUtils.isMobile||(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){for(var t=document.getElementsByTagName("lyte-menu"),a=0;a<t.length;a++){var o=t[a],i=o.component;o.classList.contains("lyteMenuClosed")||i.hasOwnProperty("parentMenu")||(i.callScrollFunc(e),i.getData("ltPropFreeze")&&!i.parentMenu&&setTimeout(i.setZIndex.bind(i),100))}}.bind(this),e&&"orientationchange"==e.type?500:16))},open_submenu:function(e){var t=this.childComp;if(!this.childMenu&&this.data.ltPropAria){var a=t.getElementsByClassName("lyteMenuSelection")[0];if(!a&&(a=Array.from(this.childComp.getElementsByTagName("lyte-menu-item")).filter((function(e){var t=$L(e);return!(t.hasClass("lyteSearchHidden")||t.hasClass("lyteMenuItemDisabled"))}))[0])){var o=a.id,i="aria-activedescendant";$L(this.$node.element).attr(i,o),$L(t).attr(i,o),$L(a).addClass("lyteMenuSelection"),this.scrIntoView(a)}var r=$L(a).attr("lyte-sub-menu");if(r){var n=document.querySelector(r);if(n)return n.component.openingMenu(a,{target:a}),e.preventDefault(),!0}}},is_input_element:function(e,t){if("true"==e.contentEditable||/(input|textarea)/i.test(e.tagName||"")){var a;if("all"==(a=this.childComp.contains(e)?e.getAttribute("allowed-keys")||"all":e.getAttribute("allowed-keys")||"9")||-1!=a.split(",").indexOf(t.toString()))return;return!0}},keydownCheck:function(e){var t=e.which||e.keyCode,a=e.target;if(27==t)lyteCloseMenu(e,void 0,!0);else if(/^(38|40|13|36|35)$/.test(t)){for(var o=document.getElementsByTagName("lyte-menu"),i=0;i<o.length;i++)if(!o[i].classList.contains("lyteMenuClosed")&&null!=o[i].getAttribute("lyte-rendered")&&!(d=o[i].component).is_input_element(a,t)&&!d.childMenu){d.traverseList(e),/^(3(5|6|8)|40)$/.test(t)&&e.preventDefault();break}}else if(/^(37|39)$/.test(t))for(o=document.getElementsByTagName("lyte-menu"),i=0;i<o.length;i++){var r=o[i];if(!r.classList.contains("lyteMenuClosed")&&null!=r.getAttribute("lyte-rendered")){var n=(d=r.component).parentMenu,s=d.childMenu;if(!d.is_input_element(a,t)){if(n&&!s){var l=d.data.pos;(/right/i.test(l)&&37==t||/left/i.test(l)&&39==t)&&d.$node.ltProp("show",!1)}if(d.open_submenu(e))return}}}else if(32==t){for(o=document.getElementsByTagName("lyte-menu"),i=0;i<o.length;i++)if(!o[i].classList.contains("lyteMenuClosed")&&null!=o[i].getAttribute("lyte-rendered")){(d=o[i]).component.childComp;var d,p=e.target,c=d.component;if(!c.is_input_element(a,t)){if(c.open_submenu(e))return;if(c.eligibleForClose(c,p))break;if(d.ltProp("freeze")){e.preventDefault();break}}}}else 9==t&&(o=Array.from(document.getElementsByTagName("lyte-menu"))).every((function(o){if(!$L(o).hasClass("lyteMenuClosed")&&null!=o.getAttribute("lyte-rendered")){var i=o.component;if(!i.is_input_element(a,t)){if(!i.childMenu){var r=i.childComp,n=e.target;if(!r.contains(n))return i.hideMenu(!0,e),!1}return!0}}}))},searchFilter:function(e){if(this._typed="",e){for(var t=this.childComp.getElementsByTagName("lyte-menu-item"),a={},o=0;o<t.length;o++){var i=$L(t[o]);if(!i.hasClass("lyteSearchHidden")&&!i.hasClass("lyteMenuItemDisabled")){var r=t[o].textContent.trim().toLowerCase().indexOf(e);-1!=r&&(r<a.index||null==a.index)&&(a.item=t[o],a.index=r)}}if(a.item){var n=this.childComp.getElementsByClassName("lyteMenuSelection")[0];if(a.item==n)return;n&&n.classList.remove("lyteMenuSelection"),a.item.classList.add("lyteMenuSelection"),this.data.ltPropAria&&($L(this.$node.element).attr("aria-activedescendant",a.item.id),$L(this.childComp).attr("aria-activedescendant",a.item.id)),this.scrIntoView.call(this,a.item)}}},scrIntoView:function(e){e&&$L.fastdom.measure(function(){var t=e.getBoundingClientRect(),a=this.findscrElem.call(this,e),o=a.getBoundingClientRect();$L.fastdom.mutate(function(){t.bottom>o.bottom?a.scrollTop+=parseInt(t.bottom-o.bottom):t.top<o.top&&(a.scrollTop+=parseInt(t.top-o.top))}.bind(this))}.bind(this))},findscrElem:function(e){for(var t=e.parentNode;t&&"LYTE-MENU-BODY"!=t.nodeName;){var a=window.getComputedStyle(t).getPropertyValue("overflow-y");if(t.scrollHeight>t.offsetHeight&&("auto"==a||"scroll"==a))break;t=t.parentNode}return t},didDestroy:function(){if(this.childComp){for(var e=this.childComp.getElementsByTagName("lyte-menu-item"),t=0;t<e.length;t++)e[t].getAttribute("lyte-shortcut")&&e[t].setAttribute("lyte-shortcut",JSON.stringify({}));this.childComp.parentElement&&this.childComp.parentElement.removeChild(this.childComp),delete this.childComp.parent,delete this.childComp}var a=this.getData("eventListeners"),o=this.getData("ltPropEvent"),i=this.data;if(0==document.body.querySelectorAll("lyte-menu").length){var r=document.body.querySelectorAll("div.lytemenufreezelayer");for(t=0;t<r.length;t++)document.body.removeChild(r[t]);document._lyteMenu&&(delete document._lyteMenu,document.documentElement.removeEventListener("keydown",this.keydownCheck,!0),document.documentElement.removeEventListener("keypress",menukeypress,!0),document.documentElement.removeEventListener("click",lyteCloseMenu,!0),window.removeEventListener("resize",this.resizeFunc,!0),window.removeEventListener("orientationchange",this.resizeFunc,!0)),i.ltPropShow&&i.ltPropFreeze&&$L(document.body).removeClass("lyteBodyWrapper")}else i.ltPropShow&&i.ltPropFreeze&&(document.body.classList.remove("lyteBodyWrapper"),document.menu==this&&delete document.menu,this.removeFreeze());window.removeEventListener("scroll",this.addScrollPos,!0);var n,s=this.getData("ltPropQuery"),l=this.getData("parIndex");if((s||null!=l)&&(s&&(n=document.querySelectorAll(s)),document.removeEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(o)?"mousemove":o,a.event,!0),s))for(t=0;t<n.length;t++)delete n[t].menu;clearTimeout(this._typetime),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody),document.menu==this&&delete document.menu,delete this.$node.element},closestFind:function(e,t){var a=e[0];if(a&&a.matches){for(var o=e.length,i=0;i<o;i++){var r=e[i];if(r!=document&&r!=window&&r.matches&&r.matches(t))return r}return null}return this.___closestFind(e,t)},___closestFind:function(e,t){for(var a=this.getData("parIndex"),o=this.arrayFrom.call(this,null!=a?this.$node.parentNode.parentNode.querySelectorAll("lyte-menu-item:nth-of-type("+ ++a+")"):document.querySelectorAll(t.trim())),i=0;i<e.length;i++)if(-1!=Array.prototype.indexOf.call(o,e[i]))return e[i];return null},isHoverAnimate:function(){return this.data.ltPropAnimate&&/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)},checkElementForMenu:function(e){if(!e.menuFlag){var t=this.getData("ltPropQuery"),a=this.closestFind.call(this,e.path?e.path:this.composePath.call(this,e),t);if($L(a).hasClass("lyteMenuItemDisabled"))return;if(null!=a){var o=this.isHoverAnimate();if(!o&&this._evtadded)return void(this.data.ltPropAnimate&&0==parseInt(this.menuBody.style.height)&&this.setData("ltPropShow",!1));"contextmenu"==e.type&&(lyteCloseMenu(e,this.$node),this.$node.ltProp("show",!1));var i=!this.childComp.classList.contains("lyteMenuHidden");if(i&&this.$node.element!=a){if(!o){this.childComp.classList.remove("lyteAnimate"),this._hideStarts=!0,this._closest=a,this._event=e;var r=new Promise(function(t,a){this._promResolve=t,this._promReject=a,this.hideMenu.call(this,!0,e)}.bind(this));return void Promise.resolve(r).then(function(){this.openingMenu(this._closest,this._event),delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this),function(){delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this))}this._openstart&&this.tranEnd(),this.data.ltPropAnimate=!1,this._hideStarts?(clearTimeout(this._time3),this.closing(!0,e)):this.hideMenu(!0,e),this.data.ltPropAnimate=!0}else if(i&&this.$node.element==a){if(!o)return;if(this._openstart)return}this.openingMenu(a,e)}else"contextmenu"==e.type&&lyteCloseMenu(e,void 0,!0)}},openingMenu:function(e,t){t.menuFlag=!0,this.$node.element=e,e.menu=this.$node,this.parentMenu||("contextmenu"!=t.type?(/lyte-menu-item/i.test(e.tagName||"")&&(e.__sub_open=!0,e.__force_callback=this.data.ltPropForceClick),this._open_fast=$L.fastdom.mutate(this.$node.toggle.bind(this.$node,t))):this.$node.toggle(t||{}))},didConnect:function(){var e=this.$node.getElementsByTagName("lyte-menu-box")[0];this.$node.toggle=function(e,t){delete this._open_fast,this.childComp.classList.contains("lyteMenuHidden")||t?(["mousedown","mouseup"].indexOf(e.type)>-1&&(document._lyteMenu.preventClick=!1),this.openMenu.call(this,e)):this.childMenu||-1!=e.type.indexOf("mouse")||this._hideStarts||this.hideMenu.call(this,!0,e)}.bind(this),this.$node.setCss=this.setCss.bind(this),e.parent=this.$node,this.childComp=e,e.classList.add("lyteMenuHidden"),this.$node.classList.add("lyteMenuClosed"),e.style.width=this.getData("ltPropWidth"),this.data.ltPropCallout&&/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&this.childComp.classList.add("lyteHoverMenu"),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL()}.bind(this))},bToBody:function(){if(this.data.ltPropBindToBody&&this.childComp.parentNode!=document.body){var e=this.childComp.querySelector("lyte-menu-body");e.addEventListener("click",this.optionSelect.bind(this)),e.parent=this.$node,this.menuBody=e;var t=document.createElement("span");t.setAttribute("class","lyteArrow"+(this.data.ltPropCallout?"":" lyteMenuHidden")),e.insertBefore(t,e.children[0]),this.menuBody.style.height=this.data.ltPropHeight,this._dir&&this.menuBody.classList.add("lyteRTL"),_lyteUiUtils.appendChild(document.body,this.childComp)}else this.data.ltPropBindToBody||(this.$node.ltProp("show",!1),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody))}.observes("ltPropBindToBody").on("didConnect"),calloutObs:function(e){var t=this.childComp.querySelector("span.lyteArrow");e.newValue?t.classList.remove("lyteMenuHidden"):t.classList.add("lyteMenuHidden")}.observes("ltPropCallout"),data:function(){return{ltPropContent:Lyte.attr("array",{default:[]}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropQuery:Lyte.attr("string",{default:""}),ltPropEvent:Lyte.attr("string",{default:"click"}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropUserValue:Lyte.attr("string",{default:""}),ltPropSystemValue:Lyte.attr("string",{default:""}),ltPropCallout:Lyte.attr("boolean",{default:!1}),ltPropPosition:Lyte.attr("string",{default:"down"}),ltPropDescription:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("number",{default:0}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropWidth:Lyte.attr("string",{default:"auto"}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropQueryClass:Lyte.attr("string",{default:"lyteMenuSelected"}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropScope:Lyte.attr("string",{default:""}),ltPropPreventInsideClick:Lyte.attr("boolean",{default:!1}),ltPropAnimate:Lyte.attr("boolean",{default:!1}),ltPropSetCss:Lyte.attr("boolean",{default:!0}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropWrapperId:Lyte.attr("string",{default:""}),ltPropBindToBody:Lyte.attr("boolean",{default:!0}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{role:"menu"},watch:!0}),ltPropOffset:Lyte.attr("object",{default:{}}),ltPropHeightResetOnScroll:Lyte.attr("boolean",{default:!0}),ltPropPreventKeyEvents:Lyte.attr("boolean",{default:!1}),ltPropForceClick:Lyte.attr("boolean",{default:!1}),eventListeners:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),parIndex:Lyte.attr("number"),lyteUnbound:Lyte.attr("boolean",{default:!1}),randomId:Lyte.attr("string",{default:"lyteMenu_"+parseInt(1e6*Math.random())})}},firePosCallBack:function(){this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",this.getData("pos"),this.$node)}.observes("pos"),contentChangeObs:function(){this.contentChange.call(this)}.observes("ltPropContent.[]"),contentChange:function(){this.childComp.classList.contains("lyteMenuHidden")||(this.setCss.call(this),this.menuBody.style.removeProperty("height"))},setContextCss:function(e,t){var a=this.$node.element,o=this.childComp;$L.fastdom.measure(function(){var i=e,r=a.getBoundingClientRect();e||(e={clientX:r.left+r.width/2,clientY:r.top+r.height/2});var n=o.getBoundingClientRect(),s=this.menuBody.getBoundingClientRect(),l=window.getComputedStyle(this.menuBody),d="content-box"==l.boxSizing?parseFloat(l.paddingTop)+parseFloat(l.paddingBottom):0,p=s.height-d,c=window.innerHeight,h=window.innerWidth,u=this.data.ltPropOffset||{},f=u.top||0,y=u.bottom||0,m=u.left||0,g=u.right||0,v=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),b=window.pageYOffset||document.documentElement.scrollTop,P=this.rtlfunc.call(this,"left"),D=null!=this.__cX?this.__cX+this.rtlfunc("left",r,h):this._dir?h-e.clientX:e.clientX,_=null!=this.__cY?this.__cY+r.top:e.clientY;switch(t||(t=this.data.ltPropPosition),t){case"up":o.style[P]=D+v+"px",o.style.top=_>c-_?_+b+"px":_-n.height+b+"px",this.setData("pos","up");break;default:o.style[P]=D+v+"px",o.style.top=_<c-_?_+b+"px":_-n.height+b+"px",this.setData("pos","down")}n.left<m?o.style[P]=D+m+"px":this.rtlfunc.call(this,"right",n,h)>h-g&&(o.style[P]=D-n.width+"px"),i&&(parseFloat(o.style.top)-b+p>c-y&&_<=c&&(this.menuBody.style.height=c-y-parseFloat(o.style.top)+b+"px",p=parseFloat(this.menuBody.style.height)),parseFloat(o.style.top)-b<f&&_>=f&&(this.menuBody.style.height=parseFloat(o.style.top)-b-f+p+"px",o.style.top=b+f+"px",p=parseFloat(this.menuBody.style.height)),this._hgt=p,null==this.__cX&&(this.__cX=D-this.rtlfunc("left",r,h)),null==this.__cY&&(this.__cY=_-r.top))}.bind(this))},openMenu:function(e,t){var a,o,i=this.getData("ltPropEvent");if(e=e||{},t||(o=this.targetElem.call(this,e.target))[0]&&(o[0].originMenu=o[1].component),t&&"contextmenu"!=i){if(!this.$node.element){var r=this.getData("ltPropQuery");this.$node.element=document.body.querySelector(r.trim())}"LYTE-MENU-ITEM"==this.$node.element.tagName?o=this.targetElem.call(this,this.$node.element):o||(o=[])}if(this.getMethods("onBeforeOpen")&&(a=this.executeMethod("onBeforeOpen",this.$node,e,this.$node.element)),o&&o[0]&&"LYTE-MENU"==o[1].tagName&&(o[1].ltProp("show")||(a=!1)),delete(this.$node.element||{}).__sub_open,delete(this.$node.element||{}).__force_callback,0!=a&&this.$node.element){if("contextmenu"==(e||{}).type&&e.preventDefault(),this.data.ltPropBindToBody||this.$node.ltProp("bindToBody",!0),this.childComp.scrollTop=0,this.childComp.classList.remove("lyteMenuHidden","lyteAnimate"),this.$node.classList.remove("lyteMenuClosed"),this.data.ltPropAria){var n=$L(this.$node.element);n.attr({"aria-expanded":"true","aria-controls":this.childComp.id}),n.attr("aria-haspopup")||n.attr("aria-haspopup","menu")}if(this.childComp.style.display="block",this.getData("ltPropHeight")?this.menuBody.style.height=this.getData("ltPropHeight"):this.menuBody.style.removeProperty("height"),o[0]){var s=o[1];if(/^(lyte-menu)$/i.test(s.tagName)){var l=s.component,d=l.childMenu,p=l.childComp;d&&(d.clearFastdom(),p.removeEventListener("mousemove",d.mouseleave,!0),d.hideMenu(!0,e)),l.childMenu=this,this.parentMenu=l,p.addEventListener("mousemove",this.mouseleave,!0)}}if(!this.parentMenu){var c=this.$node.element;$L(c).addClass(this.getData("ltPropQueryClass")),/^lyte-menu-item$/i.test(c.tagName)||lyteCloseMenu(e,this.$node),this.getData("ltPropFreeze")?this.setZIndex():document.menu||(window.addEventListener("scroll",this.addScrollPos,!0),document.menu=this)}!/^(mouseenter|mousemove|mouseover|hover)$/.test(i)||this.childMenu||this.parentMenu||o[0]||document.addEventListener("mousemove",this._hoverclose),this._openFastdom=$L.fastdom.measure(function(){this.menuBody.getBoundingClientRect(),window.innerHeight,window.pageYOffset||document.documentElement.scrollTop,this._dontCall=!0,this.$node.ltProp("show",!0),delete this._dontCall,delete this._openFastdom,"contextmenu"==this.getData("ltPropEvent")?this.setContextCss.call(this,e):this.setCss.call(this),"contextmenu"!=e.type&&this.getData("ltPropAnimate")&&0!=this._hgt&&(this._openstart=!0,this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),this._time1=setTimeout(this.animeClassAdd.bind(this),20)),this.getMethods("onOpen")&&this.executeMethod("onOpen",this.$node,e,this.$node.element)}.bind(this))}else this._dontCall=!0,delete this.$node.element,this.setData("ltPropShow",!1),delete this._dontCall,this._promReject&&this._promReject()},animeClassAdd:function(){this.childComp.classList.add("lyteAnimate"),this._time2=setTimeout(this.heightSet.bind(this),20)},heightSet:function(){var e=window.getComputedStyle(this.menuBody);this._transdur=Math.max(400,this.returntran(e.transitionDuration)+this.returntran(e.transitionDelay)+20),this._evtadded=!0,this.childComp.addEventListener("transitionend",this._trsend),-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)-this._hgt+"px"),this.menuBody.style.height=this._hgt+"px"},tranEnd:function(e){this.childComp.removeEventListener("transitionend",this._trsend),this.childComp.classList.remove("lyteAnimate"),clearTimeout(this._time2),clearTimeout(this._time1),this.clearFastdom(),this._dont_modify&&(this.menuBody.style.height="",delete this._dont_modify),delete this._openstart},clearFastdom:function(){$L.fastdom.clear(this._openFastdom),$L.fastdom.clear(this._open_fast),delete this._open_fast,delete this._openFastdom},composePath:function(e){for(var t=[],a=e.target;a&&"HTML"!=a.tagName;)t.push(a),a=a.parentNode;return t},elementsFromPointCal:function(e,t){for(var a=[],o=document.elementFromPoint(e,t);o!=document&&o!=document.documentElement&&o!=document.body&&"LYTE-MENU-BODY"!=o.tagName&&(o._pe=o.style.pointerEvents,o.style.pointerEvents="none",a.push(o),o!=(o=document.elementFromPoint(e,t))););for(var i=0;i<a.length;i++)a[i].style.pointerEvents=a[i]._pe,delete a[i]._pe;return a},eligibleForClose:function(e,t){return!!t&&(!(!e.childComp||!e.childComp.contains(t))||!!e.childMenu&&this.eligibleForClose(e.childMenu,t))},hoverClose:function(e){if(this.$node){var t=document.elementsFromPoint?document.elementsFromPoint(e.clientX,e.clientY):this.elementsFromPointCal(e.clientX,e.clientY);-1!=t.indexOf(this.$node.element)||-1!=t.indexOf(this.childComp)||this.eligibleForClose(this,t[0])||this.hideMenu(!0,e)}},mouseleave:function(e){var t=this.parent.component,a=t.targetElem.call(t,e.target);t.childMenu&&a[1]==t.$node&&a[0]!=t.childMenu.$node.element&&a[0]&&(this.removeEventListener("mousemove",t.childMenu.mouseleave,!0),t.childMenu.hideMenu.call(t.childMenu,!0,e))},hideToggle:function(e){this._dontCall||(0==e.newValue?this.hideMenu(!0,{}):this.openMenu({},!0))}.observes("ltPropShow"),hideMenu:function(e,t,a){var o;if(this.childMenu){if(this.childMenu.childComp.contains(t.target)&&!a)return;if(!this.childMenu.hideMenu.call(this.childMenu,e,t,a))return}if(this.getMethods("onBeforeClose")&&(o=this.executeMethod("onBeforeClose",this.$node,t)),0!=o)return this.tranEnd(),this.clearFastdom(),delete this.__cX,delete this.__cY,this.parentMenu?(delete this.parentMenu.childMenu,delete this.parentMenu):(delete document.menu,window.removeEventListener("scroll",this.addScrollPos,!0)),this._arguments=arguments,-1!=/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&document.removeEventListener("mousemove",this._hoverclose),this._hideStarts=!0,this.menuBody&&this.data.ltPropAnimate&&"contextmenu"!=this.data.ltPropEvent&&this._hgt?(this.menuBody.style.height=this._hgt+"px",this.childComp.classList.add("lyteAnimate"),this._time3=setTimeout(function(){"0px"!=this.menuBody.style.height?(this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),this.menuBody.removeEventListener("transitionend",this._close),this.menuBody.addEventListener("transitionend",this._close),this._hidetimeout=setTimeout(this.closing.bind(this,e,t),this._transdur)):this.closing(e,t)}.bind(this),20)):(delete this._arguments,this.closing(e,t,!0)),!0;this._dontCall=!0,this.setData("ltPropShow",!0),delete this._dontCall,delete this._hideStarts,this._promReject&&this._promReject()},closing:function(){var e,t,a=arguments,o=a[2];this._arguments?(e=this._arguments[0],t=this._arguments[1],this.menuBody.style.height=this._hgt+"px",delete this._hgt,delete this._arguments):(e=a[0],t=a[1]),this.menuBody&&this.menuBody.removeEventListener("transitionend",this._close),this.childComp.classList.add("lyteMenuHidden"),delete this._hideStarts,this.$node.classList.add("lyteMenuClosed"),this.getData("ltPropFreeze")&&!this.parentMenu&&this.setZIndex.call(this,e),this._dontCall=!0,this.$node.ltProp("show",!1);var i=$L(this.$node.element).removeClass(this.data.ltPropQueryClass);this.data.ltPropAria&&(i.removeAttr("aria-activedescendant").attr("aria-expanded","false"),$L(this.childComp).removeAttr("aria-activedescendant")),delete this._dontCall,delete this.$node.element,delete this._evtadded,this.childComp.classList.remove("lyteAnimate"),this.childComp.style.left="",this.childComp.style.top="";var r=this.childComp.querySelector(".lyteMenuSelection");r&&r.classList.remove("lyteMenuSelection"),clearTimeout(this._hidetimeout),delete this._hidetimeout;var n=this._promResolve;if(!o||n||this.data.ltPropAnimate)$L.fastdom.measure(function(){this.getMethods("onClose")&&this.executeMethod("onClose",this.$node,t),n&&$L.fastdom.mutate(n.bind(this)),o||this.clearFastdom()}.bind(this));else{var s="onClose";this.getMethods(s)&&this.executeMethod(s,this.$node,t)}},targetElem:function(e){var t;for(e=e.correspondingElement||e;e&&"LYTE-MENU-BODY"!=e.tagName&&"BODY"!=e.tagName;)"LYTE-MENU-ITEM"==e.tagName&&(t=e),e=e.parentNode;return[t,e?e.parent:null]},optionSelect:function(e){var t,a=this.targetElem.call(this,e.target)[0];if((!a||!$L(a).hasClass("lyteMenuItemDisabled"))&&a&&(!a.__sub_open||a.__force_callback)){if((1==e.ctrlKey||1==e.metaKey||2==e.which)&&null!=e.target.href&&-1!=e.target.href.indexOf("javascript:")&&"_blank"==e.target.target)return!1;if(this.getMethods("onMenuClick")&&a){var o;if(this.getData("ltPropYield"))o=a.getAttribute("data-value");else{var i=this.getData("ltPropContent");if(a.hasAttribute("grporder")){var r=i[parseInt(a.getAttribute("grporder"))];o=r[Object.keys(r)[0]][parseInt(a.getAttribute("elemorder"))]}else o=i[parseInt(a.getAttribute("elemorder"))]}t=this.executeMethod("onMenuClick",o,e,this.$node,this.$node.element,{element:a,submenu:!!a.originMenu})}if(this.childMenu&&!t&&e.stopPropagation(),a||!a&&this.getData("ltPropPreventInsideClick")){if(a.__sub_open)return;lyteCloseMenu(e,void 0,!0)}}},setLeftExceedForDown:function(e,t,a,o,i,r){var n=a;return i+this.rtlfunc.call(this,"left",n,r)+n.width-o.width},setLeftNotExceedForDown:function(e,t,a,o){var i=t;return a+this.rtlfunc.call(this,"left",i,o)},setTopAboveForDown:function(e,t,a,o,i){return i+a.top-o.height},setTopBelowForDown:function(e,t,a){var o=t;return a+o.top+o.height},setLeftForRight:function(e,t,a,o){var i=t;return a+this.rtlfunc.call(this,"left",i,o)+i.width},setRightForRight:function(e,t,a,o,i,r){var n=a,s=o;return i+this.rtlfunc.call(this,"left",n,r)-s.width},setTopForRight:function(e,t,a){return a+t.top},setTopForRightAbove:function(e,t,a,o,i){var r=a;return i+r.top+r.height-o.height},setCorrectClass:function(e){for(var t=this.childComp.querySelector(".lyteArrow"),a=t.classList,o=0;o<a.length;o++)"lyteArrow"!=a[o]&&a[o]!=e&&(t.classList.remove(a[o]),o--);t.classList.add(e)},setCss:function(e){var t=this.childComp;if(t&&!t.classList.contains("lyteMenuHidden")&&this.getData("ltPropSetCss")){var a,o,i,r=this.getData("ltPropCallout"),n=t,s=this.$node.element,l=window.innerWidth,d=this.getData("ltPropScope");if(d){var p={target:s},c=this.closestFind.call(this,this.composePath.call(this,p),d);if(c){var h=c.getBoundingClientRect();o=this.rtlfunc.call(this,"left",h,l)<0?0:this.rtlfunc.call(this,"left",h,l),a=l>this.rtlfunc.call(this,"right",h,l)?this.rtlfunc.call(this,"right",h,l):l,i=!0}}i||(a=l,o=0);var u,f,y,m,g=window.innerHeight,v=0,b=n.getBoundingClientRect(),P=this.menuBody.getBoundingClientRect(),D=window.getComputedStyle(this.menuBody),_=n.querySelector("lyte-menu-header"),L=n.querySelector("lyte-menu-footer"),C=_?_.offsetHeight:0,w=L?L.offsetHeight:0,T="content-box"==D.boxSizing?parseFloat(D.paddingTop)+parseFloat(D.borderTopWidth)+parseFloat(D.borderBottomWidth)+parseFloat(D.paddingBottom):0,x=P.height-T,S=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),A=window.pageYOffset||document.documentElement.scrollTop,E=n.offsetHeight,M=n.offsetWidth,$=t.querySelector(".lyteArrow"),k=this.getData("ltPropPosition"),R=s.getBoundingClientRect(),O=$?$.getBoundingClientRect():{width:0,height:0},F=O.height/2,N=O.width/2,I=this.data.ltPropOffset||{};I.left&&(o+=I.left),I.top&&(v+=I.top),I.right&&(a-=I.right),I.bottom&&(g-=I.bottom);var B,H,U,V,j,q,Y=this.rtlfunc.call(this,"left",R,l),z=this.rtlfunc.call(this,"left");if($&&($.style.removeProperty("left"),$.style.removeProperty("top"),$.style.removeProperty("bottom"),$.style.removeProperty("right")),"down"===k)u=!0,(H=R.top+R.height)+E>g&&(u=g-R.top>R.bottom-v),f=!0,(U=Y)+M>a&&U>U+R.width-n.offsetWidth?f=!1:Y+M<=a&&(f=!0),R.width>M&&$&&($.style[z]=(M/2-0)/M*100+"%"),u?(j="down",r?(this.setCorrectClass("lyteArrowTop"),B=this.setTopBelowForDown(s,R,A)+F+"px"):n.style.top=this.setTopBelowForDown(s,R,A)+"px"):(j="up",r?(this.setCorrectClass("lyteArrowBottom"),B=this.setTopAboveForDown(s,n,R,b,A)-F+"px"):n.style.top=this.setTopAboveForDown(s,n,R,b,A)+"px"),f?(r&&(q=Math.max(Math.min(R.width,M)/2-N,N/2)/(V=M/100),$.style[z]=q+"%"),n.style.top=B||n.style.top,n.style[z]=this.setLeftNotExceedForDown(s,R,S,l)+"px"):(r&&(V=M/100,q=(M-Math.min(R.width,M)/2-N)/V,$.style[z]=q+"%"),n.style.top=B||n.style.top,n.style[z]=this.setLeftExceedForDown(s,n,R,b,S,l)+"px");else if("right"===k)f=!0,f=!(Y+R.width+M>a&&Y-b.width>o),u=!0,R.top+b.height>g&&(u=g-R.top>R.bottom-v),f?(j="right",r?(this.setCorrectClass("lyteArrowLeft"),B=this.setLeftForRight(s,R,S,l)+N+"px"):n.style[z]=this.setLeftForRight(s,R,S,l)+"px"):(j="left",r?(this.setCorrectClass("lyteArrowRight"),B=this.setRightForRight(s,n,R,b,S,l)-N+"px"):n.style[z]=this.setRightForRight(s,n,R,b,S,l)+"px"),u?(r&&($.style.top=Math.max(R.height/2-F,F/2)+"px"),n.style[z]=B||n.style[z],n.style.top=this.setTopForRight(s,R,A,l)+"px"):(r&&($.style.bottom=Math.max(R.height/2-F,F/2)+"px"),n.style[z]=B||n.style[z],n.style.top=this.setTopForRightAbove(s,n,R,b,A,l)+"px");else if("up"===k)y=!0,R.top-b.height<v&&(y=g-R.top<R.bottom-v),f=!0,Y+M>a&&Y>Y+R.width-n.offsetWidth?f=!1:Y+M<=a&&(f=!0),R.width>M&&$&&($.style[z]=(M/2-0)/M*100+"%"),y?(j="up",r?(this.setCorrectClass("lyteArrowBottom"),B=this.setTopAboveForDown(s,n,R,b,A)-F+"px"):n.style.top=this.setTopAboveForDown(s,n,R,b,A)+"px"):(j="down",r?(this.setCorrectClass("lyteArrowTop"),B=this.setTopBelowForDown(s,R,A)+F+"px"):n.style.top=this.setTopBelowForDown(s,R,A,l)+"px"),f?(r&&(q=Math.max(Math.min(R.width,M)/2-N,N/2)/(V=M/100),$.style[z]=q+"%"),n.style.top=B||n.style.top,n.style[z]=this.setLeftNotExceedForDown(s,R,S,l)+"px"):(r&&(V=M/100,q=(M-Math.min(R.width,M)/2-N)/V,$.style[z]=q+"%"),n.style.top=B||n.style.top,n.style[z]=this.setLeftExceedForDown(s,n,R,b,S,l)+"px");else if("left"===k)!0,m=!(Y-b.width<o&&Y+b.width<a),u=!0,R.top+b.height>g&&(u=g-R.top>R.bottom-v),m?(j="left",r?(this.setCorrectClass("lyteArrowRight"),B=this.setRightForRight(s,n,R,b,S,l)-N+"px"):n.style[z]=this.setRightForRight(s,n,R,b,S,l)+"px"):(j="right",r?(this.setCorrectClass("lyteArrowLeft"),B=this.setLeftForRight(s,R,S,l)+N+"px"):n.style[z]=this.setLeftForRight(s,R,S)+"px"),u?(r&&($.style.top=Math.max(R.height/2-F,F/2)+"px"),n.style[z]=B||n.style[z],n.style.top=this.setTopForRight(s,R,A)+"px"):(r&&($.style.bottom=Math.max(R.height/2-F,F/2)+"px"),n.style[z]=B||n.style[z],n.style.top=this.setTopForRightAbove(s,n,R,b,A)+"px");else if("downLeft"===k)u=!0,(H=R.top+R.height)+E>g&&(u=g-R.top>R.bottom-v),u||(H=R.top-E),f=!1,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.max(Y+R.width/2-M,Y-M+2*F))<o?(U=o,f=!0):f=!1,n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?Y+.25*R.width-U+"px":Math.min(M-.25*R.width,M-1.5*F-3)+"px",$.style[z]=W),j=u?"downLeft":"upLeft";else if("downRight"===k)u=!0,(H=R.top+R.height)+E>g&&(u=g-R.top>R.bottom-v),u||(H=R.top-E),f=!0,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.min(Y+R.width/2,Y+R.width-2*F))+M>a?(U=a-M,f=!1):f=!0,n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?Math.max(.25*R.width,N/2)+"px":Y+.25*R.width-U+"px",$.style[z]=W),j=u?"downRight":"upRight";else if("upLeft"===k)u=!1,(H=R.top-E)<v&&(u=g-R.top>R.bottom-v),u&&(H=R.top+R.height),f=!1,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.max(Y+R.width/2-M,Y-M+2*F))<o?(U=o,f=!0):f=!1,n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?Y+.25*R.width-U+"px":Math.min(M-.25*R.width,M-1.5*F-3)+"px",$.style[z]=W),j=u?"downLeft":"upLeft";else if("upRight"===k)u=!1,(H=R.top-E)<v&&(u=g-R.top>R.bottom-v),u&&(H=R.top+R.height),f=!0,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.min(Y+R.width/2,Y+R.width-2*F))+M>a?(U=a-M,f=!1):f=!0,n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?Math.max(.25*R.width,N/2)+"px":Y+.25*R.width-U+"px",$.style[z]=W),j=u?"downRight":"upRight";else if("downAlignLeft"===k)u=!0,(H=R.top+R.height)+E>g&&(u=g-R.top>R.bottom-v),u||(H=R.top-E),f=!1,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.max(Y+R.width-M,Y-M+2*F))<o?(U=Math.max(Math.min(Y,Y+R.width-2*F),o),f=!0):(U=Math.min(a-M,U),f=!1),n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?(R.right-U)/2+"px":Math.min((Y-U+Math.max(M,R.width))/2,Math.max(M,R.width)-1.5*F-3)+"px",$.style[z]=W),j=u?"downAlignLeft":"upAlignLeft";else if("downAlignRight"===k)u=!0,(H=R.top+R.height)+E>g&&(u=g-R.top>R.bottom-v),u||(H=R.top-E),f=!0,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.min(Y,Y+R.width-2*F))+M>a?(U=Math.min(Math.max(Y+R.width-M,Y-M+2*F),a-M),f=!1):(U=Math.max(U,0),f=!0),n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?Math.max(.5*(Math.min(this.rtlfunc.call(this,"right",R,l)-U,M)-N),N/2)+"px":.5*(-U+M+Y)+"px",$.style[z]=W),j=u?"downAlignRight":"upAlignRight";else if("upAlignLeft"===k)u=!1,(H=R.top-E)<v&&(u=g-R.top>R.bottom-v),u&&(H=R.top+R.height),f=!1,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.max(Y+R.width-M,Y-M+2*F))<o?(U=Math.max(Math.min(Y,Y+R.width-2*F),o),f=!0):(U=Math.min(a-M,U),f=!1),n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?(R.right-U)/2+"px":Math.min((Y-U+Math.max(M,R.width))/2,Math.max(M,R.width)-1.5*F-3)+"px",$.style[z]=W),j=u?"downAlignLeft":"upAlignLeft";else if("upAlignRight"===k){var W;u=!1,(H=R.top-E)<v&&(u=g-R.top>R.bottom-v),u&&(H=R.top+R.height),f=!0,r&&this.setCorrectClass(u?"lyteArrowTop":"lyteArrowBottom"),(U=Math.min(Y,Y+R.width-2*F))+M>a?(U=Math.min(Math.max(Y+R.width-M,Y-M+2*F),a-M),f=!1):(U=Math.max(U,o),f=!0),n.style.top=H+F*(u?1:-1)+A+"px",n.style[z]=U+S+"px",r&&(W=f?Math.max(.5*(Math.min(this.rtlfunc.call(this,"right",R,l)-U,M)-N),N/2)+"px":.5*(-U+M+Y)+"px",$.style[z]=W),j=u?"downAlignRight":"upAlignRight"}g-=C+w,v+=C+w,parseFloat(n.style.top)-A+x>g&&R.top<=g&&(this.menuBody.style.height=g-parseFloat(n.style.top)+A-T+"px",x=parseFloat(this.menuBody.style.height),this._dont_modify=!0),parseFloat(n.style.top)-A<v&&R.bottom>=v&&(this.menuBody.style.height=parseFloat(n.style.top)-A+x-v+"px",n.style.top=v+A+"px",x=parseFloat(this.menuBody.style.height),this._dont_modify=!0),this._hgt=x,n.classList.contains("lyteHoverMenu")&&($L(n).removeClass("topPlace","bottomPlace","rightPlace","leftPlace"),/up/.test(j)?n.classList.add("topPlace"):/down/.test(j)?n.classList.add("bottomPlace"):/right/.test(j)?n.classList.add("rightPlace"):/left/.test(j)&&n.classList.add("leftPlace")),u?$L(this.childComp).removeClass("lyteMenuUp").addClass("lyteMenuDown"):$L(this.childComp).removeClass("lyteMenuDown").addClass("lyteMenuUp"),this.setData("pos",j)}},returntran:function(e){var t=0;if(/\d+/.test(e||"")){var a=e.match(/(\d+)(s|ms){0,}$/);t=parseFloat(e)*("s"==a[2]?1e3:1)}return t},checkForBoundary:function(e,t){var a=this.getData("ltPropBoundary");(a.hasOwnProperty("left")&&this.rtlfunc.call(this,"left",e,t)<this.rtlfunc.call(this,"left",a,t)||a.hasOwnProperty("right")&&this.rtlfunc.call(this,"right",e,t)>this.rtlfunc.call(this,"right",a,t)||a.hasOwnProperty("top")&&e.top<a.top||a.hasOwnProperty("bottom")&&e.bottom>a.bottom)&&this.hideMenu.call(this,!0,{})},traverseList:function(e){var t=e.keyCode||e.which;if(!(this.childComp&&this.childComp.classList.contains("lyteMenuHidden")||13!=t&&40!=t&&38!=t&&36!=t&&35!=t)){var a,o=function(e){this.data.ltPropAria&&($L(this.$node.element).attr("aria-activedescendant",(e||{}).id),$L(this.childComp).attr("aria-activedescendant",(e||{}).id)),e.classList.add("lyteMenuSelection"),this.scrIntoView(e)}.bind(this),i=e.key,r=this.childComp.querySelector(".lyteMenuSelection"),n=Array.from(this.childComp.getElementsByTagName("lyte-menu-item")).filter((function(e){var t=$L(e);return!(t.hasClass("lyteSearchHidden")||t.hasClass("lyteMenuItemDisabled"))}));if((!r||!r.offsetParent)&&(a="End"==i||38==t?$L(n).get(-1):n[0]))return o(a);for(var s=0;s<n.length&&(!n[s].offsetParent||!n[s].classList.contains("lyteMenuSelection"));s++);if(n[s])if(13==t)this.open_submenu(e)||(n[s].dispatchEvent(new Event("click",{bubbles:!0})),e.preventDefault());else if(38==t){var l=s;for(0==s&&(s=n.length),s-=1;s>-1&&(n[s].classList.contains("lyteMenuActive")||n[s].classList.contains("lyteMenuFiltered")||!n[s].offsetParent);s--);-1!=s&&(n[l].classList.remove("lyteMenuSelection"),o(n[s]))}else if(40==t){for(l=s,s==n.length-1&&(s=-1),s+=1;s<n.length&&(n[s].classList.contains("lyteMenuActive")||n[s].classList.contains("lyteMenuFiltered")||!n[s].offsetParent);s++);s!=n.length&&(n[l].classList.remove("lyteMenuSelection"),o(n[s]))}else if("Home"==i&&n.length){if(r==n[0])return;$L(r).removeClass("lyteMenuSelection"),o(n[0])}else if("End"==i&&n.length){if(r==$L(n).get(-1))return;$L(r).removeClass("lyteMenuSelection"),o($L(n).get(-1))}}},setFreeze:function(e){var t=document.body.querySelectorAll(".lytemenufreezelayer:not(.nogroup)");$L.fastdom.measure(function(){var a=document.body.querySelector(".lytemenufreezelayer.left"),o=e.getBoundingClientRect(),i=window.innerWidth;$L.fastdom.mutate(function(){a.style.height=o.height+"px",a.style.width=Math.max(o.left,0)+"px",a.style.top=o.top+"px",(a=document.body.querySelector(".lytemenufreezelayer.right")).style.height=o.height+"px",a.style.width=Math.max(i-o.right,0)+"px",a.style.top=o.top+"px",(a=document.body.querySelector(".lytemenufreezelayer.top")).style.height=o.top+"px",(a=document.body.querySelector(".lytemenufreezelayer.bottom")).style.height=window.innerHeight-o.bottom+"px";for(var e=0;e<t.length;e++)t[e].classList.remove("lyteMenuHidden"),t[e].addEventListener("wheel",this.preventEvent),t[e].addEventListener("touchmove",this.preventEvent)}.bind(this))}.bind(this))},preventEvent:function(e){if(!(e.metaKey||e.shiftKey||e.ctrlKey)){var t="touchmove"==e.type;if(t&&1!=e.touches.length)return;("wheel"==e.type||t)&&e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation()}},addScrollPos:function(e){document.menu&&(e.target!=window&&document.menu.childComp.contains(e.target)||document.menu.callScrollFunc(e,!0))},removeFreeze:function(){if(!document.menu||this.data.ltPropAnimate&&this.data.ltPropFreeze){for(var e=document.body.querySelectorAll(".lytemenufreezelayer"),t=0;t<e.length;t++)e[t].classList.add("lyteMenuHidden"),e[t].removeEventListener("wheel",this.preventEvent);document.body.classList.remove("lyteBodyWrapper")}},setZIndex:function(e){var t=this.$node.element;if(t){for(;t&&"HTML"!=t.tagName;){if(t.classList.contains("lyteMenuGroup")){e?this.removeFreeze.call(this):(this.setFreeze.call(this,t),document.body.classList.add("lyteBodyWrapper"));break}t=t.parentNode}(t&&"HTML"==t.tagName||!t)&&(e&&(!document.menu||document.menu&&!document.menu.data.ltPropFreeze)?this.removeFreeze.call(this):(document.body.querySelector(".lytemenufreezelayer.nogroup").classList.remove("lyteMenuHidden"),document.body.classList.add("lyteBodyWrapper")))}},ariaObs:function(e){var t=this.childComp,a=this.data;a.ltPropAria&&t&&_lyteUiUtils.setAttribute(t,a.ltPropAriaAttributes||{},(e||{oldValue:{}}).oldValue)}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropBindToBody").on("didConnect"),single_obs:function(e){if(e.path){var t=e.path.replace(/^\./,""),a=e.newValue,o=this.data,i=this.childComp;if(o.ltPropAria&&i){var r={};r[t]=a,_lyteUiUtils.setAttribute(i.get(0),r,{})}}}.observes("ltPropAriaAttributes.*"),callScrollFunc:function(e,t){var a=this.menuBody,o=-1!=a.style.height.indexOf("px"),i=Object.keys(this.data.ltPropBoundary||{}).length,r=t&&i&&this.$node.element?this.$node.element.getBoundingClientRect():void 0,n=t&&i&&this.$node.element?window.innerWidth:void 0,s=this.$node.ltProp("height"),l=this.data.ltPropHeightResetOnScroll,d="contextmenu"==this.$node.ltProp("event");o&&l?(a.style.height=s||"",t&&i&&$L.fastdom.measure(this.checkForBoundary.bind(this,r,n)),$L.fastdom.measure(this[d?"setContextCss":"setCss"].bind(this,e))):(this[d?"setContextCss":"setCss"](e),t&&i&&this.checkForBoundary(r,n)),this.childMenu&&this.childMenu.callScrollFunc()}});var lyteCloseMenu=function(e,t,a){if((0!=document._lyteMenu.preventClick||t)&&(e&&2!=e.button||t||a))for(var o=document.body.querySelectorAll("lyte-menu:not(.lyteMenuClosed)[lyte-rendered]"),i=0;i<o.length;i++)o[i]==t||o[i].component.childComp.classList.contains("lyteMenuHidden")||!a&&o[i].component.childComp.contains(e.target)||o[i].component._hideStarts||o[i].component.hideMenu.call(o[i].component,!t,e,a);e&&"click"==e.type&&(document._lyteMenu.preventClick=!0)};if(!_lyteUiUtils.registeredCustomElements["lyte-menu-item"]){function menukeypress(e){for(var t=document.querySelectorAll("lyte-menu:not(.lyteMenuClosed)[lyte-rendered]"),a=e.which||e.keyCode,o=0;o<t.length;o++){var i=t[o].component;if(!i.childMenu){if(i.is_input_element(e.target,a))continue;i._typed=i._typed||"",i._typed+=String.fromCharCode(a),clearTimeout(i._typetime),i._typetime=setTimeout(i.searchFilter.bind(i,i._typed.trim().toLowerCase()),400);break}}}_lyteUiUtils.registeredCustomElements["lyte-menu-item"]=!0,Lyte.createCustomElement("lyte-menu-item",{static:{observedAttributes:{get:function(){return["lyte-shortcut","lt-prop-disabled"]}}},check_disable:function(e){var t="remove";"true"==e&&(t="add"),this.classList[t]("lyteMenuItemDisabled")},attributeChangedCallback:function(e,t,a){if("lt-prop-disabled"==e)return this.check_disable(a);if("function"==typeof shortcut){if(!a)return;var o=(a=JSON.parse(a)).key,i=a.type,r=a.wait;t=t?JSON.parse(t):{},shortcut.push({newKey:o,type:i,wait:r,oldKey:t.key,value:this})}},connectedCallback:function(){var e=$L(this).closest("lyte-menu-box").get(0),t=this.getAttribute("lt-prop-disabled");e&&e.parent&&e.parent.ltProp("aria")&&($L(this).attr("role","menuitem"),this.id||(this.id="lyteMenuItem_"+parseInt(1e6*Math.random()))),"true"==t&&this.check_disable(t)},disconnectedCallback:function(){this.getAttribute("lyte-shortcut")&&this.setAttribute("lyte-shortcut",JSON.stringify({}))}})}function dtslctscroll(e){if(!e||"resize"!=e.type||!_lyteUiUtils.isMobile)for(var t=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)"),a=0;a<t.length;a++){var o=t[a];if(o&&o.origindd&&o.origindd.parent){var i=o.origindd.parent.component;"orientationchange"==e.type?setTimeout(i.setCss.bind(i),500):$L.fastdom.measure(i.setCss.bind(i))}}}Lyte.Component.register("lyte-text",{_template:'<template tag-name="lyte-text" lt-prop-title="" onmouseenter="{{action(\'mouse\')}}" onmouseover="{{action(\'over\',event)}}"><template is="if" value="{{ltPropText}}"><template case="true"><template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield class="lyteTextYield" yield-name="lyte-text" lt-prop-value="{{ltPropValue}}"></lyte-yield> </template><template case="false">{{ltPropValue}}</template></template></template><template case="false"> <span class="lyteTextWrapper" onmouseenter="{{action(\'submouse\',this)}}" lt-prop-tooltip-class="lyteTextTooltip" lt-prop-tooltip-config="{{ltPropTooltipConfig}}">{{ltPropValue}}</span> <template is="if" value="{{suffix}}"><template case="true"> <span class="lyteTextSuffix">{{unescape(suffix)}}</span> </template></template><template is="if" value="{{renderHover}}"><template case="true"> <lyte-hovercard lt-prop="{{ltPropHovercard}}" lt-prop-origin-elem="{{originElem}}" lt-prop-show="{{lbind(show)}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content> <template is="for" items="{{hoverCardArray}}" item="item" index="index"> <div class="lyteTextHovercardList">{{item}}</div> </template> </lyte-hovercard-content> </template> </lyte-hovercard> </template></template></template></template><template is="if" value="{{render}}"><template case="true"> <div class="lyteTextRenderDiv"> <template is="for" items="{{ltPropArray}}" item="item" index="index"> <div class="lyteTextIndividual"> <span class="lyteTextWord">{{item}}</span> <span class="lyteTextComma">{{unescape(ltPropSeparator)}}</span> </div> </template> </div> <div class="lyteTextSuffix"> <span>{{unescape(ltPropSuffix)}}</span> </div> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},{type:"text",position:[3,1,0]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropValue","ltPropShow","ltPropYield","ltPropText","ltPropArray","ltPropSuffix","ltPropHovercard","ltPropSeparator","ltPropWidth","ltPropMinCount","ltPropTooltipConfig","renderHover","lyteUnbound","hoverCardArray","render","show","originElem","suffix"],data:function(){return{ltPropValue:Lyte.attr("string",{default:""}),ltPropShow:Lyte.attr("boolean",{default:!0}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropText:Lyte.attr("boolean",{default:!0}),ltPropArray:Lyte.attr("array"),ltPropSuffix:Lyte.attr("string",{default:""}),ltPropHovercard:Lyte.attr("string",{default:"{}"}),ltPropSeparator:Lyte.attr("string",{default:", "}),ltPropWidth:Lyte.attr("number",{default:0}),ltPropMinCount:Lyte.attr("number",{default:0}),ltPropTooltipConfig:Lyte.attr("string",{default:"{}"}),renderHover:Lyte.attr("boolean",{default:!1}),lyteUnbound:Lyte.attr("boolean",{default:!1}),hoverCardArray:Lyte.attr("array",{default:[]}),render:Lyte.attr("boolean"),show:Lyte.attr("boolean",{default:!1}),originElem:Lyte.attr("string",{default:""}),suffix:Lyte.attr("string",{default:""})}},init:function(){var e,t=this.data,a=t.ltPropArray;if(a){var o=this.$node,i=JSON.parse(t.ltPropHovercard);t.ltPropText=!a,t.originElem=i.originElem||((e=o.id)||(e=o.id="lyteText_"+parseInt(1e4*Math.random())),"#"+e+" .lyteTextSuffix>span")}},didCnt:function(){this.data.ltPropArray&&this.render_array()}.observes("ltPropSuffix","ltPropArray","ltPropArray.[]","ltPropWidth").on("didConnect"),render_array:function(){var e=this,t=e.data,a=t.ltPropArray,o=t.ltPropSuffix,i=$L.fastdom,r=a.length,n=[],s=t.ltPropSeparator,l="prev_fast";e.setData("render",!0),i.clear(e[l]),e[l]=i.measure((function(){delete e[l];var d=e.$node,p=d.getElementsByClassName("lyteTextRenderDiv")[0];if(p){for(var c,h=p.children,u="getBoundingClientRect",f=p.nextElementSibling.children[0][u]().width,y=t.ltPropWidth||d.offsetWidth,m=0,g=0;g<r;g++){var v=h[g].children,b=v[0][u]().width,P=v[1][u]().width;if(n.push({width:b,comma:P}),(m+=b+P)>y){for(c=!0,y-=f;m>y;){var D=n.pop();if(!D)break;m-=D.width+D.comma,g--}break}}i.mutate((function(){var i="",n=[],l="";if(c){var p="remove";-1==g&&(g=t.ltPropMinCount-1,p="add"),$L(d)[p+"Class"]("lyteTextNoSpace");for(var h=0;h<r;h++){var u=a[h];h<=g?i+=(h?s:"")+u:n.push(u)}g+1!=r&&(l=o.replace("{0}",r-++g))}else i=a.join(s);e.setData({ltPropValue:i,suffix:l,render:!1,hoverCardArray:n,renderHover:c&&t.ltPropShow})}))}}))},reset:function(e,t){var a=e||this.$node,o=this.data;if(o.ltPropText||e){var i="";a.scrollWidth>a.offsetWidth&&o.ltPropShow&&(i=t||o.ltPropValue),a.setAttribute("lt-prop-title",i)}},over:function(e){e.target.closest(".lyteTextSuffix")&&this.setData("show",this.data.ltPropShow)},actions:{mouse:function(){this.reset()},over:function(e){this.data.ltPropArray&&this.over(e)},submouse:function(e){var t=this.data;$L(this.$node).hasClass("lyteTextNoSpace")&&t.ltPropMinCount&&this.reset(e,t.ltPropValue)}}}),function(e){var t,a,o={"ease-in":function(e){return e*e},"ease-out":function(e){return e*(2-e)},linear:function(e){return e},"ease-in-out":function(e){return e<.5?2*e*e:(4-2*e)*e-1}};function i(t,a,r,s,l,d,p,c,h,u){var f,y=Date.now(),m=d-(p=p-(y-r)),g=$L.Tween.propHooks[t];f=function(e,t){return o[t](e)}((m=p<0?d:m)/d,c),"set"in g?g.set(h,l+s*f,u):this[t]=l+s*f,u._stopped||(p>0?this["rAF"+t]=e.requestAnimationFrame(i.bind(this,t,a,y,s,l,d,p,c,h,u)):n(h.get(0),!1))}function r(e,t){var a=$L.Tween.propHooks[e];return"get"in a?a.get(t):t.get(0)[e]}function n(e,o,i){if((a.data[e.lyteAnimateId]||[])[0]){var r=a.data[e.lyteAnimateId][0],n=r.nonstandard||0,s=r.standard;t.get(e,"animeProp","animate");o?r.standard=s=!0:(n--,r.nonstandard=n),(i||s&&n<=0)&&a.dequeue(e,i)}}function s(e){e.lyteAnimateId||a.add(e);var o=e.nodeName,i=t.get(e,"displayValue");if(i)return i;if(e.hasAttribute("lyte-rendered"))i="block";else{var r=e.ownerDocument,n=r.body.appendChild(r.createElement(o));i=r.defaultView.getComputedStyle(n).display,r.body.removeChild(n),"none"===i&&(i="block")}return t.set(e,"displayValue",i),i}function l(e,t){for(var a={},o=["left","right","top","bottom"],i=0;i<o.length;i++)a["margin-"+o[i]]=a["padding-"+o[i]]=e;return t&&(a.width=a.height=a.opacity=e),a}function d(e,o){for(var i=[],r=0;r<e.length;r++){var n=e[r];a.add(n);var l=n.style.display;if(o){var d,p=$L(n);"none"==l&&(i[r]=t.get(n,"display"),i[r]||(n.style.display="",(d="none"==p.css("display"))?l="":i[r]="")),""!=l||!d&&"none"!=p.css("display")||(i[r]=s(n))}else"none"!=l&&(i[r]="none",t.set(n,"display",l))}for(var c=0;c<e.length;c++)$L(e[c]).css("display",i[c]);return e}function p(){return d([this])}function c(e,t){if(function(e,t){if("hide"==t&&e||"show"==t&&!e)return!1;return!0}(e,t))return e.constructor==Boolean?d([this],e):$L.each(this,(function(){c(this,"none"!=$L(this).css("display"))}))}function h(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function u(){this.data={}}function f(e){e.target==this&&t.get(this,"endCallback").call(this,e)}function y(){}function m(e,t,a,o){var i=e[t].toString();if(/^(\()/g.exec(i))return i;var r=/cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|auto|vmin|vmax|%+$/gi,n=i.match(r),s=i.match(/^\+=|\-=|\*=|\/=/g);if("none"==o[a]||/matrix/gi.test(o[a]))n="";else if(null==n){var l=o[a].match(r);n=null==l?"":"auto"==l[0]?"px":l[0]}else n=n[0],i=i.slice(0,i.indexOf(n));if(s){var d=parseInt(o[a]),p=i.split("=");switch(d=NaN==d?0:d,p[0]){case"/":i=d/parseFloat(p[1]);break;case"-":i=d-parseFloat(p[1]);break;case"*":i=d*parseFloat(p[1]);break;default:i=d+parseFloat(p[1])}}return i+n}function g(){var o=!$L.isWindow(this)&&this.ownerDocument.defaultView;$L.fastdom.measure(function(){var l=o;if(o){var d=o.getComputedStyle(this);if(!(l="none"==d.display)&&!this.offsetParent)return void P.call(this)}var p=a.data[this.lyteAnimateId][0];if(p){var c=p.value,h=Object.keys(c),u=[],f={},y={},g=t.get(this,"animeProp","original");g||(g={},t.set(this,"animeProp","original",g)),$L.fastdom.mutate(function(){if(p=a.data[this.lyteAnimateId][0]){for(var d,v=!0,b={},D=$L(this),_=!1,L=0;L<h.length;L++){var C,w=h[L].replace(/(-\w)/g,(function(e){return e[1].toUpperCase()})),T=c[h[L]],x=null;if(!(o&&/show|hide|toggle/.test(T)&&("hide"==T||!l&&"toggle"==T?x="hide":("show"==T||l&&"toggle"==T)&&(x="show"),"show"==x&&!l||"hide"==x&&l))&&(o&&v&&(l?null==this._lytedisplay?this.style.display=s(this):this.style.display=this._lytedisplay||"":this._lytedisplay=this.style.display,d=o.getComputedStyle(this),this.getBoundingClientRect(),v=!1),-1==u.indexOf(w)&&u.push(w),b[w]=b[w]=C=w in(d||{}),_=_||!!C,l?("show"!=x?f[w]=C?d[w]:r(w,D):(g[w]=this.style[w],f[w]=0),y[w]=C?x?d[w]:m(c,h[L],w,d):c[h[L]]):("hide"!=x?y[w]=C?m(c,h[L],w,d):c[h[L]]:(g[w]=this.style[w],y[w]=0),f[w]=C?d[w]:r(w,D)),parseFloat(y[w])==parseFloat(f[w])||/auto/.test(y[w])||/auto/.test(f[w]))){delete f[w],delete y[w];var S=u.indexOf(w);S>-1&&u.splice(S,1)}}t.set(this,"animeProp","from",f),t.set(this,"animeProp","to",y),t.set(this,"animeProp","mode",x),t.set(this,"animeProp","animate",u),t.set(this,"animeProp","standardObj",b),p.standard=!_,!_&&$L.isEmptyObject(y)&&n(this),_&&($L.each(f,function(e,t){b[e]&&(this.style[e]=t)}.bind(this)),P.call(this)),$L.each(y,function(o,n){var s=p.nonstandard||0;b[o]||(p.nonstandard=s+1,function(o,n,s){var l,d=Date.now(),p=$L(s),c=($L.Tween.propHooks[o],r(o,p)),h=n-c,u=a.data[s.lyteAnimateId][0].options,f=u.duration||1,y=t.get(s,"animeProp"),m=u.start,g=u.fired;l=u.timingFunction="ease"===u.timingFunction?"ease-in-out":u.timingFunction,m&&!g&&(u.fired=!0,m.call(s,{options:u,from:y.from,to:y.to,value:u.value,startTime:d,target:s,transitionProperty:Object.keys(y.to)})),s["rAF"+o]=e.requestAnimationFrame(i.bind(s,o,n,d,h,c,f,f,l,p,u))}(o,n,this))}.bind(this))}}.bind(this))}}.bind(this))}function v(){if(document.body.contains(this)){for(var e=a.data[this.lyteAnimateId][0].options,t=["timingFunction","duration","delay"],o="",i=Object.keys(a.data[this.lyteAnimateId][0].value||{}),r=0;r<t.length;r++)if(t[r]in e){var n="";"delay"!=t[r]&&"duration"!=t[r]||/[ms|s]+/gi.test(e[t[r]])||(n="ms"),o+="transition-"+h(t[r])+":"+e[t[r]]+n+";"}if(i.length){o+="transition-property : ";for(var s=0;s<i.length;s++)o+=s>0?","+h(i[s]):h(i[s])}return o+";"}}function b(){this.style.removeProperty("transition")}function P(){if((t.get(this,"animeProp","animate")||[]).length){b.call(this);var e=v.call(this);t.set(this,"endCallback",(function(e){"timeout"!=e.type&&e.stopPropagation();var o=t.get(this,"animeProp","animate");if(a.data[this.lyteAnimateId].length){var i=t.get(this,"propertyCount");if("timeout"==e.type&&(i=o.length-1),t.set(this,"propertyCount",++i),o.length==i){clearTimeout(this._anitime),delete this._anitime,b.call(this);var r=t.get(this,"animeProp","mode"),s=t.get(this,"animeProp","original");r?"hide"==r?"timeout"==e.type?(p.call(this),$L.each(s,function(e,t){$L(this).css(e,t)}.bind(this)),n(this,!0)):setTimeout(function(){p.call(this),$L.each(s,function(e,t){$L(this).css(e,t)}.bind(this)),n(this,!0)}.bind(this),20):($L.each(s,function(e,t){$L(this).css(e,t)}.bind(this)),n(this,!0)):n(this,!0),setTimeout(function(){this.style.overflow=this._orioverflow,delete this._orioverflow}.bind(this),20)}}})),this._orioverflow=this.style.overflow,this.style.overflow="hidden",t.set(this,"propertyCount",0),this._styletime=setTimeout(function(){delete this._styletime;var t=$L(this).attr("style");$L(this).attr("style",(t?t+";":"")+e),setTimeout(D.bind(this),20)}.bind(this),20)}else n(this,!0)}function D(){var e=a.data[this.lyteAnimateId][0];if(e){var o=e.options,i=Date.now(),r=o.fired;t.set(this,"animeProp","startTime",i);var n=t.get(this,"animeProp");o.start&&!r&&(o.fired=!0,o.start.call(this,{options:o,from:n.from,to:n.to,value:a.data[this.lyteAnimateId][0].value,startTime:i,target:this,transitionProperty:Object.keys(n.to)}));var s=this;$L.each(t.get(this,"animeProp","to"),(function(e,t){$L(s).css(e,t)})),this._anitime=setTimeout(f.bind(this,{type:"timeout",target:this}),function(e){var t=0;if(/\d+/.test(e)){var a=e.match(/(\d+)(s|ms){0,}$/);t=parseFloat(a[1])*("s"==a[2]?1e3:1)}return t}(o.duration.toString())+10)}else b.call(this),this.removeEventListener("transitionend",f)}function _(e,t,a){var o={};return a&&a.constructor==Function&&(o.complete=a),t&&(t.constructor==Function?o.complete=t:t.constructor==Object?$L.extend(o,t):t.constructor==String&&(o.timingFunction=t)),null!=e&&(e.constructor==Object?$L.extend(o,e):e.constructor==Number?o.duration=e:e.constructor==Function&&(o.complete=e)),null!=o.delay&&/[s]+/gi.test(o.delay)&&(options.delay=1e3*parseInt(options.delay)),"duration"in o||(o.duration=400),/[s]+/gi.test(o.duration)&&(options.duration=1e3*parseInt(options.duration)),o.timingFunction||(o.timingFunction="ease"),o}function L(e,t,a){$L(this).css(e,this.style[e].replace(/([0-9.-]+)/,(function(e){return(parseFloat(e)-t)*a+t})))}function C(o,i){if(o){t.get(this,"propertyCount");t.set(this,"propertyCount",(t.get(this,"animeProp","animate")||[]).length-1),f.call(this,{target:this,type:"timeout"}),i&&a.dequeueAll(this)}else{var r=a.data[this.lyteAnimateId];if(!r)return;clearTimeout(this._anitime),delete this._anitime;for(var s=r[0].options,l=t.get(this,"animeProp"),d=Date.now(),p=l.from,c=(l.to,l.startTime),h=1-Math.max(0,c+s.duration-d)/s.duration,u=Object.keys(l.to||{}),y=t.get(this,"animeProp","standardObj"),m=0;m<u.length;m++)if(y[u[m]]){n(this,!0);var g=p[u[m]];"none"!=g||/deg/gi.test(g)||(g=1),g=parseInt(g),g=isNaN(g)?0:g,L.call(this,u[m],g,h)}else e.cancelAnimationFrame(this["rAF"+u[m]]),n(this,!1);$L(this).css("transition",""),i&&a.dequeueAll(this)}}$L.Tween={propHooks:{}},u.prototype={add:function(e){if(e.lyteAnimateId)return e.lyteAnimateId;var t="lyteAnimate"+parseInt(Math.random()*Math.pow(10,6));return e.lyteAnimateId=t,this.data[t]=[],e[e.lyteAnimateId]={},t},queue:function(e,t,a){for(var o=0;o<e.length;o++){var i=e[o],r=i.lyteAnimateId;r||(r=this.add(i)),this.data[r].push({elem:i,options:t,value:a,properties:Object.keys(a)}),1==this.data[r].length&&(i.addEventListener("transitionend",f),this.next(i))}},dequeue:function(e,o){!function(e,o){if(!o){var i,r,n=((a.data[e.lyteAnimateId][0]||{}).options||{}).complete,s={};n&&(i=t.get(e,"animeProp","animate"),r=t.get(e,"animeProp"),s.transitionProperty=i,s.from=r.from,s.to=r.to,s.startTime=r.startTime,n.call(e,s))}}(e,o),this.data[e.lyteAnimateId].splice(0,1),this.next(e)},dequeueAll:function(e){this.data[e.lyteAnimateId]=this.data[e.lyteAnimateId].splice(),this.next(e)},next:function(e){clearTimeout(e._nextime),e._nextime=setTimeout(this.call.bind(this),13,e)},call:function(e){delete e._nextime,e.lyteAnimateId&&this.data[e.lyteAnimateId][0]?g.call(e):(this.data[e.lyteAnimateId]=[],e.removeEventListener("transitionend",f))}},y.prototype={set:function(e,t,a,o){var i=arguments.length;i<3||(3==i?(null==e[e.lyteAnimateId]&&(e[e.lyteAnimateId]={}),e[e.lyteAnimateId][t]=a):4==i&&(null==e[e.lyteAnimateId][t]&&(e[e.lyteAnimateId][t]={}),e[e.lyteAnimateId][t][a]=o))},get:function(e,t,a){var o=arguments.length;if(!(o<1))return 1==o?e[e.lyteAnimateId]:2==o?e[e.lyteAnimateId][t]:3==o&&e[e.lyteAnimateId][t]?e[e.lyteAnimateId][t][a]:void 0}},t=new y,a=new u,lyteDomObj&&(lyteDomObj.prototype.animate=function(){if(arguments.length){var e=_(arguments[1],arguments[2],arguments[3]);a.queue(this,e,arguments[0])}return this},lyteDomObj.prototype.fadeTo=function(e,t,o,i){if(null!=t&&t.constructor==Number&&t<1){var r=t;t=e,e=r}e=e||0;var n=_(t,o,i);return a.queue(this,n,e.constructor==Object?e:{opacity:e}),this},$L.each({fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"},slideUp:{height:"hide",paddingTop:"hide",paddingBottom:"hide"},slideDown:{height:"show",paddingTop:"show",paddingBottom:"show"},slideToggle:{height:"toggle",paddingTop:"toggle",paddingBottom:"toggle"}},(function(e,t){lyteDomObj.prototype[e]=function(e,a,o){return this.animate(t,e,a,o)}})),lyteDomObj.prototype.stop=function(e,t){return $L.each(this,(function(){C.call(this,null==t||t,e)}))},lyteDomObj.prototype.finish=function(e){return $L.each(this,(function(){var e=a.data[this.lyteAnimateId];if(e&&e.length){for(var t=1;t<e.length;t++)e[t].options.duration=1;C.call(this,!0,!1)}}))},$L.each({show:l("show",!0),hide:l("hide",!0),toggle:l("toggle",!0)},(function(e,t){lyteDomObj.prototype[e]=function(a,o,i){return a&&a.constructor!=Boolean?this.animate(t,a,o,i):$L.each(this,(function(){c.call(this,"none"==$L(this).css("display"),e)}))}}))),$L.animate={tryDequeue:n}}(window),Lyte.Component.register("lyte-fileupload",{_template:'<template tag-name="lyte-fileupload"> <input class="fileuploadInput {{ltPropClass}}" id="{{ltPropId}}" type="file" name="{{ltPropName}}" onchange="{{action(\'change\',event,this)}}" multiple="{{ltPropMultiple}}" accept="{{ltPropAccept}}"> <div tabindex="{{ltPropTabindex}}" class="fileUploadWrapper {{fileClass}} {{if(ltPropMultiple,\'multiFileupload\',\'singleFileUpload\')}} lyteFileUpd{{ltPropAppearance}}Type {{if(ltPropDisabled,\'lyteFileUpdDisabled\')}} {{maxFileClass}}" ondragenter="{{action(\'drag\',event)}}" ondragleave="{{action(\'drag\',event)}}" ondragover="{{action(\'drag\',event)}}" ondrop="{{action(\'drop\',event)}}" onclick="{{action(\'click\',event)}}" style="outline: none;" onpaste="{{action(\'paste\',event)}}" onkeydown="{{action(\'keydown\',event)}}" aria-labelledby="{{randomAriaId}}" data-tabindex="{{ltPropDataTabindex}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="file" queue-list="{{queueList}}" predefined-list="{{predefinedList}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{ltPropMultiple}}"><template case="true"> <lyte-file-select-area> <lyte-file-message class="lyteFileUpdMsgWrap"> <span class="lyteFileUpdMsg">{{lyteUiI18n(ltPropMessage,"fileupload")}}</span> </lyte-file-message> </lyte-file-select-area> <div class="lyteFileUpdList"> <template is="for" items="{{predefinedList}}" item="item" index="index"> <div class="lyteFileUpdListFile"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <lyte-file-close data-value="{{item.id}}" role="button" aria-label="{{ariaCloseLabel}} selected {{item.name}} file" class="{{item.status}}"></lyte-file-close> </div> </template> <template is="for" items="{{queueList}}" item="item" index="index"> <div class="lyteFileUpdListFile {{concat(\'lyteFile\',lyteUiCapitalizeName(item.status))}}"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <template is="if" value="{{expHandlers(item.percentage,\'!=\',undefined)}}"><template case="true"> <div class="lyteFileUpdFileStatus" data-completed="{{item.percentage}}"> <div class="lyteFileUpdProgressBar {{item.status}}"> <div class="lyteFileUpdProgressFill" style="width: {{item.percentage}}%"></div> </div> </div> </template></template><template is="if" value="{{expHandlers(item.status,\'==\',&quot;error&quot;)}}"><template case="true"> <lyte-file-retry data-value="{{item.id}}" role="button"> <span class="lyteFileUpdFailMsg">{{lyteUiI18n(ltPropFailureMessage,"fileupload")}}</span> <template is="if" value="{{expHandlers(ltPropUploadMultiple,\'!\')}}"><template case="true"> <span class="lyteFileUpdRetryMsg">{{lyteUiI18n(ltPropRetryText,"fileupload")}}</span> </template></template> </lyte-file-retry> </template></template> <template is="if" value="{{expHandlers(expHandlers(ltPropUploadMultiple,\'!\'),\'||\',expHandlers(expHandlers(expHandlers(item.status,\'!\'),\'||\',expHandlers(item.status,\'==\',&quot;error&quot;)),\'||\',expHandlers(item.status,\'==\',&quot;success&quot;)))}}"><template case="true"> <lyte-file-close aria-level="2" tabindex="0" aria-label="{{ariaCloseLabel}} selected {{item.name}} file" role="button" data-value="{{item.id}}" class="{{item.status}}"></lyte-file-close> </template></template> </div> </template> </div> </template><template case="false"> <lyte-file-select-area> <lyte-file-message class="lyteFileUpdMsgWrap {{if(expHandlers(queueList.length,\'||\',predefinedList.length),\'lyteHide\',\'\')}}"> <span class="lyteFileUpdMsg"> {{lyteUiI18n(ltPropMessage,"fileupload")}} </span> </lyte-file-message> <div class="lyteFileUpdList" tabindex="0" aria-level="2" aria-label="SelectedFile:{{ariaSelectedFiles}}"> <template is="for" items="{{predefinedList}}" item="item" index="index"> <div class="lyteFileUpdListFile"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <lyte-file-close data-value="{{item.id}}" class="{{item.status}}" aria-label="{{ariaCloseLabel}} selected {{item.name}} file" role="button"> </lyte-file-close> </div> </template> <template is="for" items="{{queueList}}" item="item" index="index"> <div class="lyteFileUpdListFile {{concat(\'lyteFile\',lyteUiCapitalizeName(item.status))}}"> <div class="lyteFileUpdTypePreview"> <template is="if" value="{{lyteUiImageFile(item)}}"><template case="true"> <img class="lyteFileUpdThumb" src="{{item.src}}"> </template><template case="false"> <span class="lyteFileUpdTypeIcon {{item.fileType}}"></span> </template></template> </div> <lyte-text class="lyteFileUpdFileName" lt-prop-value="{{item.name}}"></lyte-text> <span class="lyteFileUpdFileSize">( {{lyteUiFileSize(item.size,ltPropFileUnit,ltPropDigits)}} )</span> <template is="if" value="{{expHandlers(item.percentage,\'!=\',undefined)}}"><template case="true"> <div class="lyteFileUpdFileStatus" data-completed="{{item.percentage}}"> <div class="lyteFileUpdProgressBar {{item.status}}"> <div class="lyteFileUpdProgressFill" style="width: {{item.percentage}}%"></div> </div> </div> </template></template><template is="if" value="{{expHandlers(item.status,\'==\',&quot;error&quot;)}}"><template case="true"> <lyte-file-retry data-value="{{item.id}}" role="button"> <span class="lyteFileUpdFailMsg">{{lyteUiI18n(ltPropFailureMessage,"fileupload")}}</span> <span class="lyteFileUpdRetryMsg"> {{lyteUiI18n(ltPropRetryText,"fileupload")}} </span> </lyte-file-retry> </template></template> <lyte-file-close data-value="{{item.id}}" tabindex="0" class="{{item.status}}" aria-label="{{ariaCloseLabel}} selected {{item.name}} file" role="button"> </lyte-file-close> </div> </template> </div> </lyte-file-select-area> </template></template> </template></template> </div> <template is="if" value="{{ltPropAria}}"><template case="true"><span id="{{randomAriaId}}" style="display: none;"> SelectedFiles:{{ariaSelectedFiles}} </span></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"for",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"componentDynamic",position:[1,7]}]},{type:"attr",position:[3,3]},{type:"for",position:[3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width: '","item.percentage","'%'"]}}}}]}},default:{}},{type:"attr",position:[1,8]},{type:"if",position:[1,8],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,10]},{type:"if",position:[1,10],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"componentDynamic",position:[1,7]}]},{type:"attr",position:[1,3,3]},{type:"for",position:[1,3,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"text",position:[1,5,1]},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'width: '","item.percentage","'%'"]}}}}]}},default:{}},{type:"attr",position:[1,8]},{type:"if",position:[1,8],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,10]},{type:"componentDynamic",position:[1,10]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"text",position:[0,1]}]}},default:{}}],_observedAttributes:["ltPropName","ltPropMultiple","ltPropAccept","ltPropId","ltPropClass","ltPropAppearance","ltPropDisabled","ltPropYield","ltPropFileLimit","ltPropMinimumFileSize","ltPropTotalFilesSize","ltPropParallel","ltPropAutoUpload","ltPropTriggerUpload","ltPropParamName","ltPropThumb","ltPropTabindex","ltPropRetry","ltPropFileUnit","ltPropDigits","ltPropMessage","ltPropFailureMessage","ltPropRetryText","ltPropFiles","ltPropFolder","ltPropChunk","ltPropChunkSize","ltPropParallelChunkUpload","ltPropParallelChunkCount","ltPropChunkRetry","ltPropUploadMultiple","ltPropUploadMultipleCount","ltPropAjax","ltPropAllowReplace","ltPropFilesCount","ltPropAriaAttributes","ltPropReset","ltPropResetFileValue","ltPropAria","ltPropDataTabindex","queueList","predefinedList","currentUpload","chunkUpload","fileClass","chunkCount","abort","lxhrs","uploadedFiles","manualUpdFiles","uploadMultipleRetry","retryFiles","retry","manualUpload","totalFilesSize","curTotFilesSize","ariaCloseLabel","commonAriaLabel","ariaSelectedFiles","randomAriaId"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){this._file=this.$node.querySelector("input.fileuploadInput"),this.$node.upload=this.processqueue.bind(this),this.$node.removeUpload=function(e){e?this.removeFrmUpload(e,"queueList"):this.removeFrmUpload(this.data.queueList,"queueList",!0),this._file.value=""}.bind(this),this.$node.predefined=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)Lyte.arrayUtils(this.data.predefinedList,"push",e[t])}.bind(this),this.$node.addFiles=function(e){Array.isArray(e)||(e=[e]),this.validate(e)}.bind(this),this.folderUpload(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)},didDestroy:function(){this.$node.removeUpload(),this._triggerId&&(clearTimeout(this._triggerId),delete this._triggerId),this._resetId&&(clearTimeout(this._resetId),delete this._resetId),delete this._file,delete this.$node.upload,delete this.$node.removeUpload,delete this.$node.predefined,delete this.$node.addFiles},addAriaForButton:function(e,t,a,o){e.hasOwnProperty(t)&&(o=e[t],delete e[t]),this.setData(a,o)},addAriaValues:function(e){var t=this.data.commonAriaLabel,a=this.$node.querySelector(".fileUploadWrapper");e=Object.assign({},e),this.addAriaForButton(e,"close-label","ariaCloseLabel","remove"),_lyteUiUtils.setAttribute(a,e,t),this.setData("commonAriaLabel",e)},ariaObserver:function(e){var t=this.data.ltPropAriaAttributes;this.data.ltPropAria&&(e||this.setData("randomAriaId",(new Date).getTime()+parseInt(1e11*Math.random())),this.addAriaValues(t))}.observes("ltPropAriaAttributes.*").on("didConnect"),disableDataObserver:function(){var e=this.data.ltPropDisabled,t=this.$node.querySelector(".fileUploadWrapper");e?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled")}.observes("ltPropDisabled").on("didConnect"),data:function(){return{ltPropName:Lyte.attr("string",{default:"file"}),ltPropMultiple:Lyte.attr("boolean",{default:!0}),ltPropAccept:Lyte.attr("string",{default:""}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropAppearance:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","appearance","Box")}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropFileLimit:Lyte.attr("number",{default:void 0}),ltPropMinimumFileSize:Lyte.attr("number",{default:0}),ltPropTotalFilesSize:Lyte.attr("string"),ltPropParallel:Lyte.attr("number",{default:2}),ltPropAutoUpload:Lyte.attr("boolean",{default:!0}),ltPropTriggerUpload:Lyte.attr("boolean",{default:!1}),ltPropParamName:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","paramName","file")}),ltPropThumb:Lyte.attr("boolean",{default:!1}),ltPropTabindex:Lyte.attr("number",{default:0}),ltPropRetry:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","retry",2)}),ltPropFileUnit:Lyte.attr("string",{default:""}),ltPropDigits:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","digits",1)}),ltPropMessage:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","message","Drag file here or browse to upload")}),ltPropFailureMessage:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","failureMessage","Attachment failed")}),ltPropRetryText:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-fileupload","retryText","Retry")}),ltPropFiles:Lyte.attr("array",{default:[]}),ltPropFolder:Lyte.attr("boolean",{default:!1}),ltPropChunk:Lyte.attr("boolean",{default:!1}),ltPropChunkSize:Lyte.attr("number",{default:2e6}),ltPropParallelChunkUpload:Lyte.attr("boolean",{default:!1}),ltPropParallelChunkCount:Lyte.attr("number",{default:1/0}),ltPropChunkRetry:Lyte.attr("number",{default:2}),ltPropUploadMultiple:Lyte.attr("boolean",{default:!1}),ltPropUploadMultipleCount:Lyte.attr("number",{default:1/0}),ltPropAjax:Lyte.attr("object",{default:{url:""}}),ltPropAllowReplace:Lyte.attr("boolean",{default:!1}),ltPropFilesCount:Lyte.attr("number",{default:1/0}),ltPropAriaAttributes:Lyte.attr("object",{default:{role:"button","aria-roledescription":"fileupload"},watch:!0}),ltPropReset:Lyte.attr("boolean",{default:!1}),ltPropResetFileValue:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:""}),queueList:Lyte.attr("array",{default:[]}),predefinedList:Lyte.attr("array",{default:[]}),currentUpload:Lyte.attr("array",{default:[]}),chunkUpload:Lyte.attr("array",{default:[]}),fileClass:Lyte.attr("string",{default:""}),chunkCount:Lyte.attr("number",{default:0}),abort:Lyte.attr("boolean",{default:!1}),lxhrs:Lyte.attr("array",{default:[]}),uploadedFiles:Lyte.attr("array",{default:[]}),manualUpdFiles:Lyte.attr("array",{default:[]}),uploadMultipleRetry:Lyte.attr("number",{default:0}),retryFiles:Lyte.attr("array",{default:[]}),retry:Lyte.attr("boolean",{default:!1}),manualUpload:Lyte.attr("boolean",{default:!1}),totalFilesSize:Lyte.attr("number"),curTotFilesSize:Lyte.attr("number",{default:0}),ariaCloseLabel:Lyte.attr("string"),commonAriaLabel:Lyte.attr("object",{default:{}}),ariaSelectedFiles:Lyte.attr("string",{default:"0"}),randomAriaId:Lyte.attr("string")}},getFileDataAsString:function(e){var t="",a=Lyte.Component.registeredHelpers.lyteUiFileSize,o=this.data.ltPropFileUnit,i=this.data.ltPropDigits;return e.forEach((function(e){t+="name "+e.name+" size "+a(e.size,o,i)+" "})),t},constructAriaString:function(){if(this.data.ltPropAria){var e=this.getFileDataAsString(this.data.predefinedList);(e=this.getFileDataAsString(this.data.queueList))?this.setData("ariaSelectedFiles",e):this.setData("ariaSelectedFiles","0")}},exceedTotalCount:function(){var e=this.data.ltPropFilesCount;if(e!==1/0){var t=this.data.predefinedList||[],a=this.data.queueList||[];return!(t.length+a.length<e)}return!1},folderUpload:function(){this.data.ltPropFolder?this._file.setAttribute("webkitdirectory",!0):this._file.removeAttribute("webkitdirectory")},validateAndGetType:function(e,t,a){var o,i,r=new RegExp(this.data.ltPropAccept.replace(/\s+/g,"").split(",").join("|")),n="";return e&&(i="."+(n=e.substring(e.lastIndexOf(".")+1,e.length))),r.test(t)?o=(o=t.match(/(video|image|pdf|zip)/gi))&&o[0]?o[0]:n:r.test(n)||r.test(i)?o=n:a.type="Invalid_Type",o},validateSize:function(e,t){e.size<this.data.ltPropMinimumFileSize?t.size="Lower_Size":e.size>this.data.ltPropFileLimit?t.size="Higher_Size":this.checkTotalFilessize(e.size)&&(t.totalSize="Exceeds")},folderUploadObserver:function(){this.folderUpload()}.observes("ltPropFolder"),trigUpl:function(e){if(e.newValue){this.processqueue();var t=this;this._triggerId=setTimeout((function(){t.setData("ltPropTriggerUpload",!1),delete t._triggerId}),0)}}.observes("ltPropTriggerUpload"),resetObserver:function(e){if(e.newValue){this.$node.removeUpload();var t=this;this._resetId=setTimeout((function(){t.setData("ltPropReset",!1),delete t._resetId}),0)}}.observes("ltPropReset"),validate:function(e){for(var t=[],a=!1,o=0;o<e.length;o++){var i={},r=this.data.ltPropChunk,n=e[o].name,s=e[o].type,l=this.validateAndGetType(n,s,i);if(this.validateSize(e[o],i),this.exceedTotalCount()&&(i.fileCount="Exceeds"),Object.keys(i).length>0)a=!0,this.getMethods("onReject")&&this.executeMethod("onReject",e[o],i,this.$node);else{var d;if(this.getMethods("onBeforeAdd")&&(d=this.executeMethod("onBeforeAdd",e[o],this.$node)),0==d){a=!0;continue}if(d&&d.then){t.push(d);var p=e[o];Promise.resolve(d).then(this.add.bind(this,p,r,l))}else this.add(e[o],r,l);if(!this.data.ltPropMultiple)break}}(a||this.data.ltPropResetFileValue)&&(this._file.value=""),this.data.ltPropAutoUpload&&(t.length?Lyte.resolvePromises(t).then(this.processqueue.bind(this)):this.processqueue()),this.constructAriaString()},add:function(e,t,a){var o={id:"lyte"+(new Date).getTime()+parseInt(1e11*Math.random()),file:e,size:e.size,name:e.name,isChunk:t,retry:0,fileType:a||"document"};this.data.ltPropThumb&&/image/i.test(e.type)&&Lyte.Component.set(o,"src",URL.createObjectURL(e)),this.addToTotalFilesSize(e.size),Lyte.arrayUtils(this.data.uploadedFiles,"push",o),Lyte.arrayUtils(this.data.queueList,"push",o),Lyte.arrayUtils(this.data.ltPropFiles,"push",e),this.getMethods("onAdd")&&this.executeMethod("onAdd",e,this.$node,o)},chkId:function(e,t){return t.id==e},SendingFile:function(){for(var e=this.data,t=e.manualUpdFiles,a=0;a<t.length;){var o=t[a];if(!o.status||o.isChunk&&"uploading"==o.status)if(o.isChunk){if(!o.status){this.setData("manualUpload",!0),this.uploadFile(o);break}if(o.finished+o.currentUploadingChunks<o.chunks.length){this.setData("manualUpload",!0),this.uploadFile(o);break}a++}else{if(!(e.currentUpload.length<e.ltPropParallel))break;this.setData("manualUpload",!0),Lyte.arrayUtils(e.currentUpload,"push",o),this.uploadFile(o),a++}else a++}a===t.length&&this.finishcallback(t)},processqueue:function(e,t,a){var o=this.data,i=0,r=[];if(e&&!a){e.constructor!=Array&&(e=[e]);for(var n=0;n<e.length;n++){var s=e[n].id||e[n],l=o.queueList[this.findIndex(o.queueList,this.chkId.bind(this,s))];l&&Lyte.arrayUtils(this.data.manualUpdFiles,"push",l)}if(this.data.manualUpdFiles.length)return void this.SendingFile()}if(o.manualUpload)this.SendingFile();else{for(;o.currentUpload.length<o.ltPropParallel||o.ltPropUploadMultiple&&o.currentUpload.length<o.ltPropUploadMultipleCount||a&&o.queueList.length;){var d=o.queueList[i];if(e&&(e=e.constructor==Object?e.id:e,d=o.queueList[this.findIndex(o.queueList,this.chkId.bind(this,e))],a&&d))return Lyte.arrayUtils(this.data.retryFiles,"push",d),Lyte.Component.set(d,"status","reloading"),void(o.uploadedFiles.indexOf(d)<0&&(Lyte.arrayUtils(this.data.uploadedFiles,"push",d),this.retrySendingFile()));if(!d){this.data.retryFiles.length&&this.retrySendingFile(),t&&this.finishcallback();break}if(/uploading|success/.test(d.status)){if(e)break;if(/uploading/.test(d.status)&&d.isChunk&&d.finished+d.currentUploadingChunks<d.chunks.length){this.processChunkQueue(d.chunks);break}i++}else if("error"!=d.status||!(this.data.ltPropUploadMultiple||d.retry>=o.ltPropRetry-1||d.isChunk)||e)if("reloading"!=d.status){if(d.isChunk||Lyte.arrayUtils(o.currentUpload,"push",d),this.data.ltPropUploadMultiple)r.push(d);else if(this.uploadFile(d),e||d.isChunk)break;i++}else i++;else i++}this.data.ltPropUploadMultiple&&r.length&&this.uploadFile(r)}},retrySendingFile:function(){for(var e=this.data,t=e.retryFiles,a=0;a<t.length;){var o=t[a];if("reloading"==o.status||"uploading"==o.status)if(o.isChunk){if(o.finished+o.currentUploadingChunks<o.chunks.length){this.setData("retry",!0),this.processChunkQueue(o.chunks);break}a++}else{if(!(e.currentUpload.length<e.ltPropParallel))break;this.setData("retry",!0),Lyte.arrayUtils(t,"removeAt",a),Lyte.arrayUtils(e.currentUpload,"push",o),this.getMethods("onRetry")&&this.executeMethod("onRetry",{},o,this.$node),this.uploadFile(o)}else Lyte.arrayUtils(t,"removeAt",a)}t.length||(this.setData("retry",!1),this.processqueue(void 0,!0))},findIndex:function(e,t){if(t.constructor!=Function)return e.indexOf(t);for(var a=0;a<e.length;a++)if(t.call(e[a],e[a]))return a},abortChunksFrmUpload:function(e){for(var t=this.data.chunkUpload,a=0;a<t.length;){var o=t[a];o.chunkProp.origin.id===e&&o.xhr?(this.setData("abort",!0),o.xhr.ret.abort()):a++}},removeFrmUpload:function(e,t,a,o){e.constructor!=Array&&(e=[e]);for(var i=0;i<e.length;i++){var r,n,s=e[i].id||e[i],l=this.data[t],d=this.findIndex(l,this.chkId.bind(this,s));if((void 0===d||d<0)&&(l=this.data.predefinedList,(d=this.findIndex(l,this.chkId.bind(this,s)))>-1&&(t="predefinedList")),d>=0){if(!a&&this.getMethods("onBeforeRemove")&&0==this.executeMethod("onBeforeRemove",t,l[d],this.$node))continue;if(n=l[d],"queueList"===t&&this.removeFromTotalFileSize(n.size),"uploading"==n.status&&(r=!0,n.xhr&&(this.setData("abort",!0),n.xhr.ret.abort()),n.isChunk&&this.abortChunksFrmUpload(n.id)),Lyte.arrayUtils(l,"removeAt",d),"queueList"===t){var p,c=this.getData("lxhrs"),h=$L.search(c,"fileId",n.id)[0];n.isChunk&&r&&this.getMethods("onFileFailure")&&this.executeMethod("onFileFailure",h,n,this.$node,!0),Lyte.arrayUtils(this.data.ltPropFiles,"removeAt",d);var u,f=this.data.uploadedFiles;(u=this.findIndex(f,this.chkId.bind(this,s)))>=0&&Lyte.arrayUtils(f,"removeAt",u),f=this.data.retryFiles,(u=this.findIndex(f,this.chkId.bind(this,s)))>=0&&Lyte.arrayUtils(f,"removeAt",u),(p=c.indexOf(h))>-1&&Lyte.arrayUtils(c,"removeAt",p),d<=i&&i--}!a&&this.getMethods("onRemove")&&this.executeMethod("onRemove",t,n,this.$node)}}!this.data.ltPropUploadMultiple&&("queueList"==t&&r||o)&&(this.data.retry?this.retrySendingFile():this.processqueue(void 0,!0)),"queueList"!==t&&"predefinedList"!==t||this.constructAriaString()},uploadFile:function(e){var t=Lyte.deepCopyObject(this.data.ltPropAjax);e.isChunk?this.proceedChunk(e,t):this.proceedUpload(e,t,!1)},succFunc:function(e){if(this.$node){var t,a=arguments[2].xhr.file,o=arguments[2].xhr.ret,i=[];a.xhr&&delete a.xhr,this.getMethods("onRequestSuccess")&&this.executeMethod("onRequestSuccess",o,a,this.$node),a.constructor!=Array&&(a=[a]);for(var r=0;r<a.length;r++)if(Lyte.Component.set(a[r],"status","success"),Lyte.objectUtils(a[r],"delete","xhr"),this.data.ltPropUploadMultiple)i.push(a[r].id),this.removeFrmUpload(a[r].id,"currentUpload",!0);else{var n=this.getData("lxhrs");(t=$L.search(n,"fileId",a[r].id)).length&&Lyte.arrayUtils(n,"removeAt",n.indexOf(t[0])),o.fileId=a[r].id,Lyte.arrayUtils(this.getData("lxhrs"),"push",o),this.getMethods("onFileSuccess")&&this.executeMethod("onFileSuccess",o,a[r],this.$node),this.removeFrmUpload(a[r].id,"currentUpload",!0,!0)}this.data.ltPropUploadMultiple&&(o.fileId=i,Lyte.arrayUtils(this.getData("lxhrs"),"push",o),this.setData("uploadMultipleRetry",0),this.processqueue(void 0,!0)),delete arguments[2].xhr.file}},reject:function(e){if(this.$node){var t,a=e.xhr.file,o=e.xhr.ret,i=a.retry,r=[];if(this.data.abort||i>=this.data.ltPropRetry||this.data.ltPropUploadMultiple&&this.data.uploadMultipleRetry>=this.data.ltPropRetry){a.xhr&&delete a.xhr,this.getMethods("onRequestFailure")&&this.executeMethod("onRequestFailure",o,a,this.$node,this.data.abort),a.constructor!=Array&&(a=[a]);for(var n=0;n<a.length;n++){if(Lyte.Component.set(a[n],"status","error"),Lyte.objectUtils(a[n],"delete","xhr"),this.data.ltPropUploadMultiple)r.push(a[n].id);else{var s=this.getData("lxhrs");(t=$L.search(s,"fileId",a[n].id)).length&&Lyte.arrayUtils(s,"removeAt",s.indexOf(t[0])),o.fileId=a[n].id,this.getMethods("onFileFailure")&&this.executeMethod("onFileFailure",o,a[n],this.$node,this.data.abort),!this.data.abort&&Lyte.arrayUtils(this.getData("lxhrs"),"push",o)}this.removeFrmUpload(a[n].id,"currentUpload",!0,!this.data.abort)}this.data.ltPropUploadMultiple&&(o.fileId=r,Lyte.arrayUtils(this.getData("lxhrs"),"push",o),this.setData("uploadMultipleRetry",0),this.processqueue(void 0,!0)),this.data.abort&&(Lyte.objectUtils(e.xhr.file,"add","retry",this.data.ltPropRetry),this.setData("abort",!1)),delete e.xhr.file}else if(this.data.ltPropUploadMultiple){for(delete a.xhr,n=0;n<a.length;n++)Lyte.Component.set(e.xhr.file[n],"status","retrying"),Lyte.Component.set(e.xhr.file[n],"retry",e.xhr.file[n].retry+1);this.setData("uploadMultipleRetry",this.data.uploadMultipleRetry+1),this.getMethods("onRetry")&&this.executeMethod("onRetry",o,a,this.$node),this.uploadFile(a)}else Lyte.Component.set(e.xhr.file,"status","retrying"),Lyte.objectUtils(e.xhr.file,"add","retry",i+1),this.getMethods("onRetry")&&this.executeMethod("onRetry",o,a,this.$node),this.uploadFile(a)}},progress:function(e){if(e.lengthComputable){var t=e.total,a=e.loaded,o=e.target.xhr,i=o.file;i.constructor!=Array&&(i=[i]);for(var r=0;r<i.length;r++)this.data.ltPropUploadMultiple?Lyte.Component.set(i[r],{loaded:i[r].size,percentage:100}):Lyte.Component.set(i[r],{loaded:a,percentage:Math.round(100*a/t)}),this.getMethods("onProgress")&&this.executeMethod("onProgress",e,o,i[r],this.$node)}},removeChunk:function(e,t,a){var o=this.data.chunkUpload,i=this.findIndex(o,(function(t){return t.chunkProp.chunkId==e}));i>-1&&(Lyte.arrayUtils(o,"removeAt",i),!a&&this.processChunkQueue(t.chunks))},chunkReject:function(e){if(this.$node){var t=e.xhr.file,a=t.chunkProp.origin,o=arguments[0].xhr.ret;if(!this.data.abort&&t.retry<this.data.ltPropChunkRetry)Lyte.Component.set(t,"status","retrying"),Lyte.objectUtils(t,"add","retry",t.retry+1),this.removeChunk(t.chunkProp.chunkId,a,!0),this.getMethods("onRetry")&&this.executeMethod("onRetry",o,t,this.$node),Lyte.Component.set(a,"currentUploadingChunks",a.currentUploadingChunks-1),this.processChunkQueue(t,!0);else{if(this.getMethods("onRequestFailure")&&this.executeMethod("onRequestFailure",o,t,this.$node,this.data.abort),Lyte.Component.set(t,"status","error"),this.removeChunk(t.chunkProp.chunkId,a,!0),this.getMethods("onChunkError")&&this.executeMethod("onChunkError",o,t,a,this.$node,this.data.abort),Lyte.objectUtils(t,"delete","xhr"),delete e.xhr.file,Lyte.Component.set(a,"currentUploadingChunks",a.currentUploadingChunks-1),Lyte.Component.set(a,"error",a.error+1),"error"!=a.status){var i,r=this.getData("lxhrs");Lyte.Component.set(a,"status","error"),(i=$L.search(r,"fileId",a.id)).length&&Lyte.arrayUtils(r,"removeAt",r.indexOf(i[0])),o.fileId=a.id,Lyte.arrayUtils(this.getData("lxhrs"),"push",o)}this.data.abort?this.setData("abort",!1):(this.abortChunksFrmUpload(a.id),this.getMethods("onFileFailure")&&this.executeMethod("onFileFailure",o,a,this.$node,this.data.abort),this.data.retry?this.retrySendingFile():this.processqueue(void 0,!0))}}},chunkSuccess:function(e){if(this.$node){var t=arguments[2].xhr.file,a=t.chunkProp.origin,o=arguments[2].xhr.ret;if(this.getMethods("onRequestSuccess")&&this.executeMethod("onRequestSuccess",o,t,this.$node),Lyte.Component.set(t,"status","success"),this.removeChunk(t.chunkProp.chunkId,a,!0),this.getMethods("onChunkSuccess")&&this.executeMethod("onChunkSuccess",o,t,a,this.$node),Lyte.objectUtils(t,"delete","xhr"),delete arguments[2].xhr.file,Lyte.Component.set(a,"finished",a.finished+1),Lyte.Component.set(a,"currentUploadingChunks",a.currentUploadingChunks-1),a.finished==a.total){var i,r=this.getData("lxhrs");Lyte.Component.set(a,"status","success"),(i=$L.search(r,"fileId",a.id)).length&&Lyte.arrayUtils(r,"removeAt",r.indexOf(i[0])),o.fileId=a.id,Lyte.arrayUtils(this.getData("lxhrs"),"push",o),this.getMethods("onFileSuccess")&&this.executeMethod("onFileSuccess",o,a,this.$node),this.data.retry?this.retrySendingFile():this.processqueue(void 0,!0)}else this.processChunkQueue(a.chunks,!0)}},chunkProgress:function(e){if(e.lengthComputable){e.total;var t=e.loaded,a=e.target.xhr.file,o=a.chunkProp.origin,i=t-a.loaded;Lyte.Component.set(a,"loaded",t),Lyte.Component.set(o,{loaded:Math.min(o.loaded+i,o.size),percentage:Math.min(Math.round(100*(o.loaded+i)/o.size),100)}),this.getMethods("onProgress")&&this.executeMethod("onProgress",e,e.target.xhr,o,this.$node)}},proceedChunk:function(e,t){for(var a=this.data,o=a.ltPropChunkSize,i=e.size,r=0,n=[];r<=i;){var s=r,l=Math.min(i,r+=o),d=l-s;n.push({file:e.file.slice(s,l),chunkProp:{chunkOffset:s,chunkEnd:l,chunkSize:d,chunkId:"lyteChunk"+(new Date).getTime()+parseInt(1e11*Math.random()),chunkIndex:n.length,origin:e,chunkCount:Math.ceil(e.size/o),totalSize:e.size},name:e.file.name,loaded:0,retry:0})}Lyte.Component.set(e,{chunks:n,error:0,finished:0,total:n.length}),a.ltPropParallelChunkCount===1/0&&this.setData("chunkCount",n.length),this.processChunkQueue(n)},processChunkQueue:function(e,t){var a=this.data,o=0;for(e.constructor!=Array&&(e=[e]);!a.ltPropParallelChunkUpload&&a.chunkUpload.length<1||a.ltPropParallelChunkUpload&&a.ltPropParallelChunkCount===1/0||a.ltPropParallelChunkCount!=1/0&&a.chunkUpload.length<a.ltPropParallelChunkCount;){var i=e[o];if(!i){a.retry?this.retrySendingFile():a.ltPropParallelChunkUpload&&(a.ltPropParallelChunkCount!=1/0&&a.chunkUpload.length<a.ltPropParallelChunkCount&&this.processqueue(),a.ltPropParallelChunkCount==1/0&&this.processqueue());break}if(/success|uploading/.test(i.status)||t&&(!t||/error/.test(i.status)))o++;else{var r=i.chunkProp.origin;Lyte.Component.set(r,{status:"uploading",percentage:r.percentage||0,loaded:r.loaded||0,size:r.size,currentUploadingChunks:r.currentUploadingChunks+1||1}),this.proceedUpload(i,Lyte.deepCopyObject(a.ltPropAjax),!0),Lyte.arrayUtils(a.chunkUpload,"push",i),o++}}},proceedUpload:function(e,t,a){if(!/success|uploading/.test(e[0]&&e[0].status||e.status)){var o,i,r=new FormData,n=["chunkOffset","chunkSize","chunkIndex","chunkCount","totalSize"];if(e.constructor==Array)for(var s=0;s<e.length;s++)i=this.data.ltPropFolder?e[s].file.webkitRelativePath:e[s].name,r.append(this.data.ltPropParamName+"["+s+"]",e[s].file,i);else i=this.data.ltPropFolder&&!a?e.file.webkitRelativePath:e.name,r.append(this.data.ltPropParamName,e.file,i);if(a){for(var l=0;l<n.length;l++)r.append(n[l],e.chunkProp[n[l]]);var d=e.chunkProp.origin;r.append("fileId",d.id),i=this.data.ltPropFolder?d.file.webkitRelativePath:d.name,r.append("fileName",i)}t.success=a?this.chunkSuccess.bind(this):this.succFunc.bind(this),t.error=a?this.chunkReject.bind(this):this.reject.bind(this);var p=new XMLHttpRequest;if(t.type="POST",e.xhr=p,p.file=e,p.upload.xhr=p,p.upload.addEventListener("progress",a?this.chunkProgress.bind(this):this.progress.bind(this),!1),t.xhr=p,t.data=r,t.processData=!1,t.contentType=!1,this.getMethods("onBeforeSend")&&(o=this.executeMethod("onBeforeSend",p,e,a,this.$node,r,t)),o&&o.then)Promise.resolve(o).then(function(){this.finishSend(t,p,e)}.bind(this));else{if(0==o){e.constructor!=Array&&(e=[e]);for(var c=0;c<e.length;c++)this.removeFrmUpload(e[c].id,"currentUpload",!0);return}o&&o.constructor==FormData&&(t.data=o),this.finishSend(t,p,e,a)}}},finishSend:function(e,t,a,o){if(a.constructor==Array)for(var i=0;i<a.length;i++)Lyte.Component.set(a[i],"status","uploading");else Lyte.Component.set(a,"status","uploading");var r=$L.ajax(e);r.xhr=t,t.ret=r,this.getMethods("onSend")&&this.executeMethod("onSend",t,r,a,!!o,this.$node,e)},finishcallback:function(e){var t,a=e||this.data.uploadedFiles,o=this.data.chunkUpload,i=this.data.lxhrs;if(a.length){for(var r=0;r<a.length;r++){if(!a[r].status||"uploading"==a[r].status)return;"error"==a[r].status&&(t=!0)}for(r=0;r<o.length;r++){if("uploading"==o[r].status)return;"error"==o[r].status&&(t=!0)}this.data.ltPropMultiple||(a=a[0],i=i[0]),t?(this.getMethods("onFailure")&&this.executeMethod("onFailure",a,this.$node,i),this.setData("uploadedFiles",[]),this.setData("lxhrs",[])):(this.getMethods("onSuccess")&&this.executeMethod("onSuccess",a,this.$node,i),this.setData("uploadedFiles",[]),this.setData("lxhrs",[])),1==this.data.manualUpload&&(this.setData("manualUpdFiles",[]),this.setData("manualUpload",!1))}},convertToBytes:function(){var e=this.getData("ltPropTotalFilesSize");if(e){var t=e.substring(e.length-2),a=parseInt(e.substring(0,e.length-2)),o=["KB","MB","GB"].indexOf(t),i=this.data.predefinedList;o>-1&&this.setData("totalFilesSize",a*Math.pow(1e3,o+1)),Array.isArray(i)&&this.addPredefinedListSize(i)}}.observes("ltPropTotalFilesSize").on("init"),getTotalFileSize:function(e){var t=0;return e.forEach((function(e){var a=e.size;"number"==typeof a&&(t+=a)})),t},addPredefinedListSize:function(e){var t=this.getTotalFileSize(e);this.addToTotalFilesSize(t)},removePredefindListSize:function(e){var t=this.getTotalFileSize(e);this.removeFromTotalFileSize(t)},predefinedListObserver:function(e){if(this.getData("totalFilesSize")){var t=e.oldValue,a=e.newValue;Array.isArray(t)&&this.removePredefindListSize(t),Array.isArray(a)&&this.addPredefinedListSize(a)}}.observes("predefinedList"),predefinedArrayListObserver:function(e){if(this.getData("totalFilesSize")){var t=e.removedItems,a=e.insertedItems;Array.isArray(t)&&this.removePredefindListSize(t),Array.isArray(a)&&this.addPredefinedListSize(a)}}.observes("predefinedList.[]"),checkTotalFilessize:function(e){var t=this.getData("totalFilesSize"),a=this.getData("curTotFilesSize");return!!(t&&a+e>t)},addToTotalFilesSize:function(e){if(this.getData("totalFilesSize")){var t=this.getData("curTotFilesSize");this.setData("curTotFilesSize",t+e)}},removeFromTotalFileSize:function(e){if(this.getData("totalFilesSize")){var t=this.getData("curTotFilesSize");this.setData("curTotFilesSize",t-e)}},openFileWindow:function(e,t){if(!this.data.ltPropYield&&this.data.ltPropMultiple&&(e.shiftKey?e.preventDefault():$L("#lyteFileUpdSelectedFile.lyteFileUpdListFile").removeAttr("id"),"lyteFileUpdRetryMsg"!=e.target.className&&$L(e.target).closest(".lyteFileUpdListFile").attr("id","lyteFileUpdSelectedFile")),!(e.ctrlKey||e.shiftKey||e.metaKey)){var a=$L(e.target).closest("lyte-file-close");if(a.length)this.$node.removeUpload(a.eq(0).attr("data-value"));else{var o=$L(e.target).closest("lyte-file-retry");if(o.length)this.$node.upload(o.eq(0).attr("data-value"),void 0,!0);else if(($L(e.target).closest("lyte-file-select-area").length||t)&&this.data.ltPropMultiple||0==this.data.queueList.length&&0==this.data.predefinedList.length||this.data.ltPropAllowReplace){if(this.getMethods("onBeforeOpen")&&0==this.executeMethod("onBeforeOpen",e,this.$node))return;this._file.click()}}}},actions:{change:function(e,t){if(t.files.length){!this.data.ltPropMultiple&&this.data.ltPropAllowReplace&&(this.removeFrmUpload(this.data.queueList,"queueList",!0),this.data.predefinedList.length&&this.removeFrmUpload(this.data.predefinedList,"predefinedList",!0));var a=Array.from(t.files);if(this.getMethods("onSelect")&&!1===this.executeMethod("onSelect",a,e))return void(this._file.value="");this.validate(a)}},drag:function(e){var t=e.type,a="onDrag",o=t.match(/drag(.+)/);if(o&&o[1]&&(a+=o[1].slice(0,1).toUpperCase()+o[1].slice(1),/enter|over/.test(e.type))){if("dragover"==e.type){var i=e.dataTransfer;if(i){var r=i.effectAllowed;i.dropEffect="move"===r||"linkMove"===r?"move":"copy"}}e.preventDefault()}"dragenter"==t?this.setData("fileClass","fileDragEnter"):"dragleave"==t&&this.setData("fileClass",""),this.getMethods(a)&&this.executeMethod(a,e,this.$node)},drop:function(e){this.setData("fileClass","");var t=e.dataTransfer;if(t){if(this.getMethods("onBeforeDrop")&&0==this.executeMethod("onBeforeDrop",e,this.$node))return;e.preventDefault(),this.data.ltPropMultiple||this.$node.removeUpload(),this.validate(t.files),this.getMethods("onDrop")&&this.executeMethod("onDrop",e,this.$node)}},click:function(e){this.openFileWindow(e)},paste:function(e){for(var t=(e.clipboardData||window.clipboardData).items,a=[],o=0;o<t.length;o++){var i=t[o].getAsFile();i&&a.push(i)}if(a.length){if(this.getMethods("onBeforePaste")&&0==this.executeMethod("onBeforePaste",e,a,this.$node))return;this.data.ltPropMultiple||this.$node.removeUpload(),this.validate(a),this.getMethods("onPaste")&&this.executeMethod("onPaste",e,a,this.$node)}},keydown:function(e){if(8==e.which){for(var t=$L("#lyteFileUpdSelectedFile lyte-file-close",this.$node),a=0;a<t.length;a++)this.$node.removeUpload(t.eq(a).attr("data-value"));t.length&&e.preventDefault()}else 13===e.which&&(this.openFileWindow(e,!0),e.preventDefault())}}}),Lyte.Component.register("lyte-daterangepicker",{_template:'<template tag-name="lyte-daterangepicker"> <template is="switch" value="{{ltPropSelectionType}}"><template case="continuous"> <div class="lyteDateRangePickerRow" onmousedown="{{action(\'mouseDown\',event)}}" onmouseover="{{action(\'mouseOver\',event)}}" onkeydown="{{action(\'keydown\',event)}}"> <div class="lyteDateRangePickerCol1"> <lyte-calendar nav-yield="true" lt-prop-format="{{ltPropFormat}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" class="dRPCalendar1" on-viewdate-change="{{method(\'viewDateChange\',\'cal1\')}}" lt-prop-disable-navigation="true" header-id="{{lbind(headerId1)}}" month-dropdown-id="{{lbind(monthDropdownId1)}}" year-dropdown-id="{{lbind(yearDropdownId1)}}" month-header="{{lbind(monthHeader1)}}"> <template is="registerYield" yield-name="navigator"> <div class="lyteDateRPLeftNav"> <span role="button" case="true" class="lyteCalNav lyteCalyearNavLft" onclick="{{action(\'previous\',\'Y\',event)}}" onkeydown="{{action(\'prevKey\',\'Y\',event)}}" tabindex="{{navtab}}" aria-label="{{previousYear}}"> </span> <span role="button" class="lyteCalNav lyteCaldLft" onclick="{{action(\'previous\',\'M\',event)}}" onkeydown="{{action(\'prevKey\',\'M\',event)}}" tabindex="{{navtab}}" aria-label="{{previousMonth}}"> </span> </div> <div class="{{lyteUiDateRPHeaderClass(ltPropHeaderType)}}"> <template is="if" value="{{ifEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="monthDD" lt-prop-tabindex="{{droptab1}}" on-option-selected="{{method(\'optionSelected\',\'cal1\',\'M\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{monthNames}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="yearDD" lt-prop-tabindex="{{droptab2}}" on-option-selected="{{method(\'optionSelected\',\'cal1\',\'Y\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{years}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <span class="lyteVisuallyHidden" aria-live="polite" id="{{headerId1}}">{{monthHeader1}}</span> </template><template case="false"> <span aria-live="polite" id="{{headerId1}}">{{monthHeader1}}</span> </template></template> </div> </template> </lyte-calendar> </div> <div class="lyteDateRangePickerCol2"> <lyte-calendar nav-yield="true" lt-prop-format="{{ltPropFormat}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" class="dRPCalendar2" select-date="false" on-viewdate-change="{{method(\'viewDateChange\',\'cal2\')}}" lt-prop-disable-navigation="true" header-id="{{lbind(headerId2)}}" month-dropdown-id="{{lbind(monthDropdownId2)}}" year-dropdown-id="{{lbind(yearDropdownId2)}}" month-header="{{lbind(monthHeader2)}}"> <template is="registerYield" yield-name="navigator"> <div class="{{lyteUiDateRPHeaderClass(ltPropHeaderType)}}"> <template is="if" value="{{ifEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="monthDD" lt-prop-tabindex="{{droptab1}}" on-option-selected="{{method(\'optionSelected\',\'cal2\',\'M\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{monthNames}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="yearDD" lt-prop-tabindex="{{droptab2}}" on-option-selected="{{method(\'optionSelected\',\'cal2\',\'Y\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{years}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <span class="lyteVisuallyHidden" aria-live="polite" id="{{headerId2}}">{{monthHeader2}}</span> </template><template case="false"> <span aria-live="polite" id="{{headerId2}}">{{monthHeader2}}</span> </template></template> </div> <div class="lyteDateRPRightNav"> <span role="button" case="true" class="lyteCalNav lyteCaldRgt" onclick="{{action(\'previous\',\'M\',event,\'next\')}}" onkeydown="{{action(\'nextKey\',\'M\',event)}}" tabindex="{{navtab}}" aria-label="{{nextMonth}}"> </span> <span role="button" class="lyteCalNav lyteCalyearNavRgt" onclick="{{action(\'previous\',\'Y\',event,\'next\')}}" onkeydown="{{action(\'nextKey\',\'Y\',event)}}" tabindex="{{navtab}}" aria-label="{{nextYear}}"> </span> </div> </template> </lyte-calendar> </div> </div> </template><template case="separate"> <div class="lyteDateRangePickerRow lyteSeperateDRP" onmousedown="{{action(\'separateMouseDown\',event)}}" onkeydown="{{action(\'keydown\',event)}}"> <div class="lyteDateRangePickerCol1"> <lyte-calendar nav-yield="true" lt-prop-format="{{ltPropFormat}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" class="dRPCalendar1" on-viewdate-change="{{method(\'viewDateChange\',\'cal1\')}}" lt-prop-disable-navigation="true" header-id="{{lbind(headerId1)}}" month-dropdown-id="{{lbind(monthDropdownId1)}}" year-dropdown-id="{{lbind(yearDropdownId1)}}" month-header="{{lbind(monthHeader1)}}"> <template is="registerYield" yield-name="navigator"> <div class="lyteDateRPLeftNav"> <span role="button" case="true" class="lyteCalNav lyteCalyearNavLft" onclick="{{action(\'separatePrevious\',\'Y\',\'cal1\',event)}}" onkeydown="{{action(\'prevKey\',\'Y\',event,\'cal1\')}}" tabindex="{{navtab}}" aria-label="{{previousYear}}"> </span> <span role="button" class="lyteCalNav lyteCaldLft" onclick="{{action(\'separatePrevious\',\'M\',\'cal1\',event)}}" onkeydown="{{action(\'prevKey\',\'M\',event,\'cal1\')}}" tabindex="{{navtab}}" aria-label="{{previousMonth}}"> </span> </div> <div class="{{lyteUiDateRPHeaderClass(ltPropHeaderType)}}"> <template is="if" value="{{ifEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="monthDD" lt-prop-tabindex="{{droptab1}}" on-option-selected="{{method(\'optionSelected\',\'cal1\',\'M\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{monthNames1}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="yearDD" lt-prop-tabindex="{{droptab2}}" on-option-selected="{{method(\'optionSelected\',\'cal1\',\'Y\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{years1}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <span class="lyteVisuallyHidden" aria-live="polite" id="{{headerId1}}">{{monthHeader1}}</span> </template><template case="false"> <span aria-live="polite" id="{{headerId1}}">{{monthHeader1}}</span> </template></template> </div> <div class="lyteDateRPRightNav"> <span role="button" case="true" class="lyteCalNav lyteCaldRgt" onclick="{{action(\'separatePrevious\',\'M\',\'cal1\',event,\'next\')}}" onkeydown="{{action(\'nextKey\',\'M\',event,\'cal1\')}}" tabindex="{{navtab}}" aria-label="{{nextMonth}}"> </span> <span role="button" class="lyteCalNav lyteCalyearNavRgt" onclick="{{action(\'separatePrevious\',\'Y\',\'cal1\',event,\'next\')}}" onkeydown="{{action(\'nextKey\',\'Y\',event,\'cal1\')}}" tabindex="{{navtab}}" aria-label="{{nextYear}}"> </span> </div> </template> </lyte-calendar> </div> <div class="lyteDateRangePickerCol2"> <lyte-calendar nav-yield="true" lt-prop-format="{{ltPropFormat}}" lt-prop-max-date="{{ltPropMaxDate}}" lt-prop-min-date="{{ltPropMinDate}}" lt-prop-fill-rows="{{ltPropFillRows}}" lt-prop-start-week-day="{{ltPropStartWeekDay}}" class="dRPCalendar2" on-viewdate-change="{{method(\'viewDateChange\',\'cal2\')}}" lt-prop-disable-navigation="true" header-id="{{lbind(headerId2)}}" month-dropdown-id="{{lbind(monthDropdownId2)}}" year-dropdown-id="{{lbind(yearDropdownId2)}}" month-header="{{lbind(monthHeader2)}}"> <template is="registerYield" yield-name="navigator"> <div class="lyteDateRPLeftNav"> <span role="button" case="true" class="lyteCalNav lyteCalyearNavLft" onclick="{{action(\'separatePrevious\',\'Y\',\'cal2\',event)}}" onkeydown="{{action(\'prevKey\',\'Y\',event,\'cal2\')}}" tabindex="{{navtab}}" aria-label="{{previousYear}}"> </span> <span role="button" class="lyteCalNav lyteCaldLft" onclick="{{action(\'separatePrevious\',\'M\',\'cal2\',event)}}" onkeydown="{{action(\'prevKey\',\'M\',event,\'cal2\')}}" tabindex="{{navtab}}" aria-label="{{previousMonth}}"> </span> </div> <div class="{{lyteUiDateRPHeaderClass(ltPropHeaderType)}}"> <template is="if" value="{{ifEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="monthDD" lt-prop-tabindex="{{droptab1}}" on-option-selected="{{method(\'optionSelected\',\'cal2\',\'M\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{monthNames2}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <lyte-dropdown on-before-show="{{method(\'addDropdownClass\')}}" on-show="{{method(\'editArrowPosition\')}}" lt-prop-callout="true" class="yearDD" lt-prop-tabindex="{{droptab2}}" on-option-selected="{{method(\'optionSelected\',\'cal2\',\'Y\')}}" lt-prop="{{ltPropDropdown}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box class="lyteDateRangepickerDropdown"> <lyte-drop-body> <template is="for" items="{{years2}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <span class="lyteVisuallyHidden" aria-live="polite" id="{{headerId2}}">{{monthHeader2}}</span> </template><template case="false"> <span aria-live="polite" id="{{headerId2}}">{{monthHeader2}}</span> </template></template> </div> <div class="lyteDateRPRightNav"> <span role="button" case="true" class="lyteCalNav lyteCaldRgt" onclick="{{action(\'separatePrevious\',\'M\',\'cal2\',event,\'next\')}}" onkeydown="{{action(\'nextKey\',\'M\',event,\'cal2\')}}" tabindex="{{navtab}}" aria-label="{{nextMonth}}"> </span> <span role="button" class="lyteCalNav lyteCalyearNavRgt" onclick="{{action(\'separatePrevious\',\'Y\',\'cal2\',event,\'next\')}}" onkeydown="{{action(\'nextKey\',\'Y\',event,\'cal2\')}}" tabindex="{{navtab}}" aria-label="{{nextYear}}"> </span> </div> </template> </lyte-calendar> </div> </div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{continuous:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"text",position:[5,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}}]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"registerYield",position:[1,3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"text",position:[5,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1]},{type:"attr",position:[3,3]}]},{type:"componentDynamic",position:[1,3,1]}]},separate:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"text",position:[5,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[5,1]},{type:"attr",position:[5,3]}]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,3,1]},{type:"registerYield",position:[1,3,1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"text",position:[5,0]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[5,1]},{type:"attr",position:[5,3]}]},{type:"componentDynamic",position:[1,3,1]}]}},default:{}}],_observedAttributes:["monthHeader1","monthHeader2","ltPropCurrentDate","ltPropFormat","ltPropMonthHeaderFormat","shortMonthNames","longMonthNames","ltPropStartYear","ltPropEndYear","ltPropStartDate","ltPropEndDate","ltPropDisabledDates","ltPropMinDate","ltPropMaxDate","ltPropSelectionType","ltPropPosition","ltPropHeaderType","ltPropFillRows","ltPropDropdown","ltPropMaxDiff","ltPropActivateNavigation","ltPropNavigation","ltPropTabindex","ltPropDisableCheck","ltPropStartWeekDay","years","dateSelected","selectedDate1","selectedDate2","calViewDate1","calViewDate2","tempDate","monthNames","dateNode1","dateNode2","clickCount","convertedDates","convert","internallyChanged","monthNames1","monthNames2","years1","years2","triggerDidconnect","activeDate","selected","preventKeydown","navtab","droptab1","droptab2","headerId1","monthDropdownId1","yearDropdownId1","headerId2","monthDropdownId2","yearDropdownId2","previousMonth","nextMonth","previousYear","nextYear"],data:function(){return{monthHeader1:Lyte.attr("string",{default:"Initializing.."}),monthHeader2:Lyte.attr("string",{default:"Initializing.."}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropFormat:Lyte.attr("string",{default:"MM/DD/YYYY"}),ltPropMonthHeaderFormat:Lyte.attr("string",{default:"MMM YYYY"}),shortMonthNames:Lyte.attr("array",{default:["Jan","Feb","Mar","Apr","short.may","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),longMonthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),ltPropStartYear:Lyte.attr("number",{default:1900}),ltPropEndYear:Lyte.attr("number",{default:2100}),ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropDisabledDates:Lyte.attr("array",{default:[]}),ltPropMinDate:Lyte.attr("string",{default:""}),ltPropMaxDate:Lyte.attr("string",{default:""}),ltPropSelectionType:Lyte.attr("string",{default:"continuous"}),ltPropPosition:Lyte.attr("string",{default:"left"}),ltPropHeaderType:Lyte.attr("string",{default:"dropdown"}),ltPropFillRows:Lyte.attr("boolean",{default:!1}),ltPropDropdown:Lyte.attr("string",{default:"{}"}),ltPropMaxDiff:Lyte.attr("number"),ltPropActivateNavigation:Lyte.attr("boolean",{default:!1}),ltPropNavigation:Lyte.attr("boolean",{default:!1}),ltPropTabindex:Lyte.attr("string",{default:"2"}),ltPropDisableCheck:Lyte.attr("boolean",{default:!1}),ltPropStartWeekDay:Lyte.attr("number",{default:1}),years:Lyte.attr("array",{default:[]}),dateSelected:Lyte.attr("boolean",{default:!1}),selectedDate1:Lyte.attr("string"),selectedDate2:Lyte.attr("string"),calViewDate1:Lyte.attr("object"),calViewDate2:Lyte.attr("object"),tempDate:Lyte.attr("string"),monthNames:Lyte.attr("array"),dateNode1:Lyte.attr("object"),dateNode2:Lyte.attr("object"),clickCount:Lyte.attr("number",{default:0}),convertedDates:Lyte.attr("array",{default:[]}),convert:Lyte.attr("number",{default:0}),internallyChanged:Lyte.attr("boolean",{default:!1}),monthNames1:Lyte.attr("array"),monthNames2:Lyte.attr("array"),years1:Lyte.attr("array",{default:[]}),years2:Lyte.attr("array",{default:[]}),triggerDidconnect:Lyte.attr("number",{default:0}),activeDate:Lyte.attr("string",{default:""}),selected:Lyte.attr("string",{default:"1"}),preventKeydown:Lyte.attr("boolean"),navtab:Lyte.attr("string",{default:"-1"}),droptab1:Lyte.attr("string",{default:"1"}),droptab2:Lyte.attr("string",{default:"2"}),headerId1:Lyte.attr("string"),monthDropdownId1:Lyte.attr("string"),yearDropdownId1:Lyte.attr("string"),headerId2:Lyte.attr("string"),monthDropdownId2:Lyte.attr("string"),yearDropdownId2:Lyte.attr("string"),previousMonth:Lyte.attr("string",{default:_lyteUiUtils.i18n("lyte.calendar.previous.month")}),nextMonth:Lyte.attr("string",{default:_lyteUiUtils.i18n("lyte.calendar.next.month")}),previousYear:Lyte.attr("string",{default:_lyteUiUtils.i18n("lyte.calendar.previous.year")}),nextYear:Lyte.attr("string",{default:_lyteUiUtils.i18n("lyte.calendar.next.year")})}},init_obs:function(){var e=this.data;if(e.ltPropNavigation){var t=e.ltPropTabindex;this.setData({droptab2:t,droptab1:t,navtab:t})}}.observes("ltPropTabindex").on("init"),didConnect:function(){this.isTimezone=$L.moment&&$L.moment().getCurrentTimeZone()},toDate:function(){return this.isTimezone?new Date($L.moment().format("MM/DD/YYYY")):new Date},moment:function(e,t){return $L.moment(e,t,{ignore_timezone:this.isTimezone})},init:function(){var e=this.$node;e.revertToSelected=this.revertToSelected.bind(this),e.revertToToday=this.revertToToday.bind(this),e.reset=this.resetDrp.bind(this)},initFunc:function(){for(var e=[],t=this.data,a=t.ltPropEndYear,o=t.ltPropStartYear;o<=a;o++)e.push(o);this.setData({years:e,years1:e,years2:e})}.observes("ltPropStartYear","ltPropEndYear").on("init"),resetDrp:function(){this.__ignoremin||this.setData({dateNode1:null,dateNode2:null,selectedDate1:"",selectedDate2:""}),this.checkAndRemoveSelectedDateClass("start"),this.checkAndRemoveSelectedDateClass("end");var e=this.data;if("separate"==e.ltPropSelectionType){this.restrictCalendarDates("cal2",e.ltPropMinDate,"min"),this.restrictCalendarDates("cal1",e.ltPropMaxDate,"max"),this.validateNavigation();var t=$L(".lyteCalSel",this.$node),a=t.length;if(a>0){var o=t[0].dataset.date;if(selectedDate=new Date(o),"Invalid Date"===selectedDate.toString()){if(!$L.moment)return void console.error("INCLUDE LYTE-MOMENT PLUGIN");selectedDate=this.moment(o,e.ltPropFormat.toUpperCase()).getDObj()}for(var i=0;i<a;i++)t.eq(i).removeClass("lyteCalSel")}}else e.ltPropDisableCheck&&this.disablecheck()},revertToSelected:function(){var e=this.data;if(this.setData("triggerDidconnect",e.triggerDidconnect++),"separate"==e.ltPropSelectionType){var t=e.ltPropStartDate,a=e.ltPropEndDate;t&&this.checkforStartDateAndEndDate(this.$node.querySelector(".dRPCalendar1"),t,"start"),a&&this.checkforStartDateAndEndDate(this.$node.querySelector(".dRPCalendar2"),a,"end")}},revertToToday:function(e){var t=this.$node.querySelector(".dRPCalendar1"),a=this.$node.querySelector(".dRPCalendar2"),o=e||this.toDate(),i=o.getDate(),r=o.getMonth(),n=o.getFullYear();if("continuous"==this.getData("ltPropSelectionType")){if("right"==this.getData("ltPropPosition")?((r-=1)<0&&(r=11,n-=1),t.setData("selectDate",!1),this.setMonthAndYear(t,{dd:1,mm:r,yy:n},"cal1"),t.setData("selectDate",!0)):this.setMonthAndYear(t,{dd:i,mm:r,yy:n},"cal1"),r<11?r+=1:(r=0,n+=1),"right"==this.getData("ltPropPosition")?(a.setData("selectDate",!0),this.setMonthAndYear(a,{dd:i,mm:r,yy:n},"cal2"),a.setData("selectDate",!1)):this.setMonthAndYear(a,{dd:1,mm:r,yy:n},"cal2"),l=this.$node.querySelector(".lyteCalSel")){if("Invalid Date"===(h=new Date(l.dataset.date)).toString()){if(!$L.moment)return void console.error("INCLUDE LYTE-MOMENT PLUGIN");h=this.moment(l.dataset.date,this.getData("ltPropFormat").toUpperCase()).getDObj()}h.getMonth()===o.getMonth()&&h.getDate()===o.getDate()&&h.getFullYear()===o.getFullYear()&&l.classList.remove("lyteCalSel")}this.data.ltPropDisableCheck&&this.disablecheck()}else if("separate"==this.getData("ltPropSelectionType")){this.setMonthAndYear(t,{dd:i,mm:r,yy:n},"cal1");var s,l,d=this.getData("ltPropStartDate")?Date.parse(this.stringToDate(this.getData("ltPropStartDate"),this.getData("ltPropFormat"))):null,p=this.getData("ltPropEndDate")?Date.parse(this.stringToDate(this.getData("ltPropEndDate"),this.getData("ltPropFormat"))):null,c=Date.parse(o);if(d&&d>c?(i=(s=this.stringToDate(this.getData("ltPropStartDate"),this.getData("ltPropFormat"))).getDate(),r=s.getMonth(),n=s.getFullYear(),this.setMonthAndYear(a,{dd:i,mm:r,yy:n},"cal2"),this.restrictCalendarDates("cal2",this.getData("ltPropStartDate"),"min")):p&&p<c?(i=(s=this.stringToDate(this.getData("ltPropEndDate"),this.getData("ltPropFormat"))).getDate(),r=s.getMonth(),n=s.getFullYear(),this.setMonthAndYear(t,{dd:i,mm:r,yy:n},"cal1"),this.restrictCalendarDates("cal1",this.getData("ltPropEndDate"),"max")):this.setMonthAndYear(a,{dd:i,mm:r,yy:n},"cal2"),(l=this.$node.querySelectorAll(".lyteCalSel")).length>0){var h;if("Invalid Date"===(h=new Date(l[0].dataset.date)).toString()){if(!$L.moment)return void console.error("INCLUDE LYTE-MOMENT PLUGIN");h=this.moment(l[0].dataset.date,this.getData("ltPropFormat").toUpperCase()).getDObj()}for(var u=0;u<l.length;u++)h.getMonth()===o.getMonth()&&h.getDate()===o.getDate()&&h.getFullYear()===o.getFullYear()&&l[0].classList.remove("lyteCalSel")}this.getData("ltPropStartDate")&&(this.setData("selectedDate1",this.getData("ltPropStartDate")),this.checkforStartDateAndEndDate(this.$node.querySelector(".dRPCalendar1"),this.getData("ltPropStartDate"),"start")),this.getData("ltPropEndDate")&&(this.setData("selectedDate2",this.getData("ltPropEndDate")),this.checkforStartDateAndEndDate(this.$node.querySelector(".dRPCalendar2"),this.getData("ltPropEndDate"),"end")),this.validateNavigationAndDropdown()}this.getData("ltPropDisabledDates").length>0&&this.setData("convert",this.getData("convert")+1),"continuous"==this.getData("ltPropSelectionType")&&this.getData("ltPropStartDate")&&this.getData("ltPropEndDate")&&(this.setData("selectedDate1",this.getData("ltPropStartDate")),this.setData("selectedDate2",this.getData("ltPropEndDate")),this.checkForSelectedDates(this.getData("ltPropStartDate"),this.getData("ltPropEndDate"))),this.setTodayClass()},setTodayClass:function(){var e=this.toDate();if(this.getData("calViewDate1").getMonth()==e.getMonth()&&this.getData("calViewDate1").getFullYear()==e.getFullYear())for(var t=this.$node.querySelector(".dRPCalendar1").querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)"),a=0;a<t.length;a++){var o=this.stringToDate(t[a].dataset.date,this.getData("ltPropFormat"));e.getDate()==o.getDate()&&(t[a].classList.contains("lyteDateRPFirstDateSelected")||t[a].classList.contains("lyteDateRPTempSelected")||t[a].classList.contains("lyteDateRPLastDateSelected"))}if(this.getData("calViewDate2").getMonth()==e.getMonth()&&this.getData("calViewDate2").getFullYear()==e.getFullYear())for(t=this.$node.querySelector(".dRPCalendar2").querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)"),a=0;a<t.length;a++)o=this.stringToDate(t[a].dataset.date,this.getData("ltPropFormat")),e.getDate()==o.getDate()&&(t[a].classList.contains("lyteDateRPFirstDateSelected")||t[a].classList.contains("lyteDateRPTempSelected")||t[a].classList.contains("lyteDateRPLastDateSelected"))},toggleSelectionType:function(){this.setData("triggerDidconnect",this.getData("triggerDidconnect")+1)}.observes("ltPropSelectionType"),convertDisabledDates:function(){this.getData("ltPropDisabledDates").length>0&&this.checkAndMarkDisabledDates()}.observes("ltPropDisabledDates.[]","convert"),setMonths:function(){var e,t=[],a="shortMonthNames",o=this.data;"MMMM YYYY"==o.ltPropMonthHeaderFormat&&(a="longMonthNames"),e=o[a];for(var i=0;i<12;i++)t.push(_lyteUiUtils.i18n(e[i]));this.setData({monthNames:t,monthNames1:t,monthNames2:t})}.observes("ltPropMonthHeaderFormat").on("init"),setCalendarHeader:function(e,t,a){var o=a.getMonth(),i=a.getFullYear();"continuous"==this.getData("ltPropSelectionType")&&"dropdown"==this.getData("ltPropHeaderType")&&(t.$node.querySelector(".monthDD").ltProp("selected",this.getData("monthNames")[o]),t.$node.querySelector(".yearDD").ltProp("selected",""+i)),"separate"==this.getData("ltPropSelectionType")&&"dropdown"==this.getData("ltPropHeaderType")&&("cal1"==e&&t.$node.querySelector(".monthDD").ltProp("selected",this.getData("monthNames1")[o]),"cal2"==e&&t.$node.querySelector(".monthDD").ltProp("selected",this.getData("monthNames2")[o]),t.$node.querySelector(".yearDD").ltProp("selected",""+i))},didConnectFunc:function(e){if(!this.__ignoremin||!e||"ltPropMinDate"!=e.item){var t=this.$node.querySelector(".dRPCalendar1"),a=this.$node.querySelector(".dRPCalendar2"),o=this.toDate(),i=this.getData("ltPropCurrentDate")?this.stringToDate(this.getData("ltPropCurrentDate"),this.getData("ltPropFormat")):o;"continuous"==this.getData("ltPropSelectionType")&&this.getData("ltPropStartDate")&&this.getData("ltPropEndDate")&&(i=this.stringToDate(this.getData("ltPropStartDate"),this.getData("ltPropFormat"))),"separate"==this.getData("ltPropSelectionType")&&this.getData("ltPropStartDate")&&(i=this.stringToDate(this.getData("ltPropStartDate"),this.getData("ltPropFormat")),this.restrictCalendarDates("cal2",this.getData("ltPropStartDate"),"min"));var r=i.getDate(),n=i.getMonth(),s=i.getFullYear();if("continuous"==this.getData("ltPropSelectionType")){if("right"==this.getData("ltPropPosition")?((n-=1)<0&&(n=11,s-=1),t.setData("selectDate",!1),this.setMonthAndYear(t,{dd:1,mm:n,yy:s},"cal1"),t.setData("selectDate",!0)):this.setMonthAndYear(t,{dd:r,mm:n,yy:s},"cal1"),n<11?n+=1:(n=0,s+=1),"right"==this.getData("ltPropPosition")?(a.setData("selectDate",!0),this.setMonthAndYear(a,{dd:r,mm:n,yy:s},"cal2"),a.setData("selectDate",!1)):this.setMonthAndYear(a,{dd:1,mm:n,yy:s},"cal2"),l=this.$node.querySelector(".lyteCalSel")){if("Invalid Date"===(d=new Date(l.dataset.date)).toString()){if(!$L.moment)return void console.error("INCLUDE LYTE-MOMENT PLUGIN");d=this.moment(l.dataset.date,this.getData("ltPropFormat").toUpperCase()).getDObj()}d.getMonth()===o.getMonth()&&d.getDate()===o.getDate()&&d.getFullYear()===o.getFullYear()&&l.classList.remove("lyteCalSel")}this.data.ltPropDisableCheck&&this.disablecheck()}else if("separate"==this.getData("ltPropSelectionType")){var l;if(this.setMonthAndYear(t,{dd:r,mm:n,yy:s},"cal1"),this.getData("ltPropEndDate")&&(i=this.stringToDate(this.getData("ltPropEndDate"),this.getData("ltPropFormat")),this.restrictCalendarDates("cal1",this.getData("ltPropEndDate"),"max"),r=i.getDate(),n=i.getMonth(),s=i.getFullYear()),this.setMonthAndYear(a,{dd:r,mm:n,yy:s},"cal2"),(l=this.$node.querySelectorAll(".lyteCalSel")).length>0){var d;if("Invalid Date"===(d=new Date(l[0].dataset.date)).toString()){if(!$L.moment)return void console.error("INCLUDE LYTE-MOMENT PLUGIN");d=this.moment(l[0].dataset.date,this.getData("ltPropFormat").toUpperCase()).getDObj()}for(var p=0;p<l.length;p++)d.getMonth()===o.getMonth()&&d.getDate()===o.getDate()&&d.getFullYear()===o.getFullYear()&&l[0].classList.remove("lyteCalSel")}this.validateNavigationAndDropdown(),this.setTodayClass()}this.getData("ltPropDisabledDates").length>0&&this.setData("convert",this.getData("convert")+1),"continuous"==this.getData("ltPropSelectionType")&&this.getData("ltPropStartDate")&&this.getData("ltPropEndDate")&&(this.setData("selectedDate1",this.getData("ltPropStartDate")),this.setData("selectedDate2",this.getData("ltPropEndDate")),this.checkForSelectedDates(this.getData("ltPropStartDate"),this.getData("ltPropEndDate")))}}.observes("ltPropCurrentDate","ltPropMinDate","ltPropMaxDate","triggerDidconnect").on("didConnect"),restrictCalendarDates:function(e,t,a){var o;if("cal1"==e?o=this.$node.querySelector(".dRPCalendar1"):"cal2"==e&&(o=this.$node.querySelector(".dRPCalendar2")),"min"===a){o.ltProp("minDate",t);var i=this.stringToDate(t,this.getData("ltPropFormat"));this.calculateYears(e,"object"==typeof i?i.getFullYear():this.getData("ltPropStartYear"),this.getData("ltPropEndYear"))}else if("max"==a){o.ltProp("maxDate",t);var r=this.stringToDate(t,this.getData("ltPropFormat"));this.calculateYears(e,this.getData("ltPropStartYear"),"object"==typeof r?r.getFullYear():this.getData("ltPropEndYear"))}},calculateYears:function(e,t,a){for(var o=[],i=t;i<=a;i++)o.push(i);"cal1"==e&&this.setData("years1",o),"cal2"==e&&this.setData("years2",o)},changeStartAndEndDate:function(){"separate"==this.getData("ltPropSelectionType")?(this.getData("ltPropStartDate")&&this.restrictCalendarDates("cal2",this.getData("ltPropStartDate"),"min"),this.getData("ltPropEndDate")&&this.restrictCalendarDates("cal1",this.getData("ltPropEndDate"),"max"),this.getData("ltPropStartDate")&&(this.checkAndRemoveSelectedDateClass("start"),this.checkforStartDateAndEndDate(this.$node.querySelector(".dRPCalendar1"),this.getData("ltPropStartDate"),"start")),this.getData("ltPropEndDate")&&(this.checkAndRemoveSelectedDateClass("end"),this.checkforStartDateAndEndDate(this.$node.querySelector(".dRPCalendar2"),this.getData("ltPropEndDate"),"end"))):"continuous"==this.getData("ltPropSelectionType")&&(this.getData("internallyChanged")?this.setData("internallyChanged",!1):(this.getData("dateSelected")&&this.setData("dateSelected",!1),this.getData("tempDate")&&this.setData("tempDate",""),this.checkAndRemoveAllSelectedClasses(),this.removeMonthEndAndStart(),this.getData("ltPropStartDate")&&this.getData("ltPropEndDate")&&(this.setData("selectedDate1",this.getData("ltPropStartDate")),this.setData("selectedDate2",this.getData("ltPropEndDate")),this.checkForSelectedDates(this.getData("ltPropStartDate"),this.getData("ltPropEndDate"))))),this.getData("ltPropStartDate")||this.getData("ltPropEndDate")||this.resetDrp()}.observes("ltPropStartDate","ltPropEndDate"),checkforStartDateAndEndDate:function(e,t,a){for(var o=e.querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)"),i=0;i<o.length;i++)if(o[i].dataset.date==t)return"start"==a&&(o[i].classList.add("lyteDateRPFirstDateSelected"),this.setData("dateNode1",o[i])),void("end"==a&&(o[i].classList.add("lyteDateRPLastDateSelected"),this.setData("dateNode2",o[i])))},checkAndRemoveSelectedDateClass:function(e){if("start"==e){var t=this.$node.querySelector(".dRPCalendar1"),a=Array.from(t.querySelectorAll(".lyteDateRPFirstDateSelected"));if(Lyte.arrayUtils(a,"push",Array.from(this.$node.querySelectorAll(".lyteCalSel"))),a.length>0)for(var o=0;o<a.length;o++)a[o].classList.remove("lyteDateRPFirstDateSelected","lyteCalSel")}if("end"==e&&(t=this.$node.querySelector(".dRPCalendar2"),a=Array.from(t.querySelectorAll(".lyteDateRPLastDateSelected")),Lyte.arrayUtils(a,"push",Array.from(this.$node.querySelectorAll(".lyteCalSel"))),a.length>0))for(o=0;o<a.length;o++)a[o].classList.remove("lyteDateRPLastDateSelected","lyteCalSel")},validateNavigation:function(){if(this.getData("ltPropStartYear")||this.getData("ltPropEndYear")){if("continuous"==this.getData("ltPropSelectionType")){if(this.getData("ltPropStartYear")){var e=this.getData("calViewDate1"),t=this.$node.querySelector(".lyteDateRangePickerCol1 .lyteDateRPLeftNav");0==e.getMonth()&&e.getFullYear()==this.getData("ltPropStartYear")?t.classList.add("lyteDateRPNavDisabled"):t.classList.remove("lyteDateRPNavDisabled")}this.getData("ltPropEndYear")&&(e=this.getData("calViewDate2"),t=this.$node.querySelector(".lyteDateRangePickerCol2 .lyteDateRPRightNav"),11==e.getMonth()&&e.getFullYear()==this.getData("ltPropEndYear")?t.classList.add("lyteDateRPNavDisabled"):t.classList.remove("lyteDateRPNavDisabled"))}if("separate"==this.getData("ltPropSelectionType")){var a=this.getData("calViewDate1"),o=this.getData("calViewDate2");if(this.getData("ltPropStartYear")){var i=this.$node.querySelector(".lyteDateRangePickerCol1 .lyteDateRPLeftNav"),r=this.$node.querySelector(".lyteDateRangePickerCol2 .lyteDateRPLeftNav");0==a.getMonth()&&a.getFullYear()==this.getData("ltPropStartYear")?i.classList.add("lyteDateRPNavDisabled"):i.classList.remove("lyteDateRPNavDisabled"),0==o.getMonth()&&o.getFullYear()==this.getData("ltPropStartYear")?r.classList.add("lyteDateRPNavDisabled"):r.classList.remove("lyteDateRPNavDisabled")}this.getData("ltPropEndYear")&&(i=this.$node.querySelector(".lyteDateRangePickerCol1 .lyteDateRPRightNav"),r=this.$node.querySelector(".lyteDateRangePickerCol2 .lyteDateRPRightNav"),11==a.getMonth()&&a.getFullYear()==this.getData("ltPropEndYear")?i.classList.add("lyteDateRPNavDisabled"):i.classList.remove("lyteDateRPNavDisabled"),11==o.getMonth()&&o.getFullYear()==this.getData("ltPropEndYear")?r.classList.add("lyteDateRPNavDisabled"):r.classList.remove("lyteDateRPNavDisabled"))}}this.data.ltPropDisableCheck&&this.disablecheck()},validateNavigationAndDropdown:function(){if(this.validateNavigation(),this.getData("ltPropStartDate")){var e=this.stringToDate(this.getData("ltPropStartDate"),this.getData("ltPropFormat")),t=this.getData("calViewDate2"),a=this.$node.querySelector(".lyteDateRangePickerCol2 .lyteDateRPLeftNav");e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()?a.classList.add("lyteDateRPNavDisabled"):a.classList.remove("lyteDateRPNavDisabled"),e.getFullYear()===t.getFullYear()?-1!=(i=(o=this.getData("monthNames2")).indexOf(this.getData("monthNames")[e.getMonth()]))&&0==i||this.calculateMonths("cal2",e.getMonth()):this.getData("monthNames2").length<12&&this.setData("monthNames2",this.getData("monthNames"))}var o,i;this.getData("ltPropEndDate")&&(e=this.stringToDate(this.getData("ltPropEndDate"),this.getData("ltPropFormat")),t=this.getData("calViewDate1"),a=this.$node.querySelector(".lyteDateRangePickerCol1 .lyteDateRPRightNav"),e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()?a.classList.add("lyteDateRPNavDisabled"):a.classList.remove("lyteDateRPNavDisabled"),e.getFullYear()===t.getFullYear()?-1!=(i=(o=this.getData("monthNames1")).indexOf(this.getData("monthNames")[e.getMonth()]))&&i==o.length-1||this.calculateMonths("cal1",e.getMonth()):this.getData("monthNames1").length<12&&this.setData("monthNames1",this.getData("monthNames")))},calculateMonths:function(e,t){if("cal1"==e){var a=this.getData("monthNames");this.setData("monthNames1",a.slice(0,t+1))}"cal2"==e&&(a=this.getData("monthNames"),this.setData("monthNames2",a.slice(t)))},setMonthAndYear:function(e,t,a){this.__ignoremin||(e.ltProp("currentDate",this.constructDateString(t.mm+1,t.dd,t.yy)),e.setData("currentDatechanged",e.getData("currentDatechanged")+1),"separate"==this.getData("ltPropSelectionType")&&("cal1"==a&&-1==this.getData("monthNames1").indexOf(this.getData("monthNames")[t.mm])&&this.setData("monthNames1",this.getData("monthNames")),"cal2"==a&&-1==this.getData("monthNames2").indexOf(this.getData("monthNames")[t.mm])&&this.setData("monthNames2",this.getData("monthNames"))),"dropdown"==this.getData("ltPropHeaderType")&&(e.querySelector(".monthDD").ltProp("selected",this.getData("monthNames")[t.mm]),e.querySelector(".yearDD").ltProp("selected",""+t.yy)),"cal1"==a?this.setData("calViewDate1",e.getData("viewDate")):this.setData("calViewDate2",e.getData("viewDate")))},selectDates:function(e){var t=this.$node.querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)"),a=$L(this.getData("dateNode1")),o=$L(this.getData("dateNode2")),i=Date.parse(this.stringToDate(this.getData("selectedDate1"),this.getData("ltPropFormat"))),r=Date.parse(this.stringToDate(e,this.getData("ltPropFormat"))),n=this.$node.querySelector(".lyteDateRPTempFirstDateSelected"),s=this.$node.querySelector(".lyteDateRPTempLastDateSelected");if(n&&n.classList.remove("lyteDateRPTempFirstDateSelected"),s&&s.classList.remove("lyteDateRPTempLastDateSelected"),this.removeMonthEndAndStart(),i<r)for(var l=0;l<t.length;l++)(d=Date.parse(this.stringToDate(t[l].dataset.date,this.getData("ltPropFormat"))))>=i&&d<=r?t[l].classList.contains("lyteCalDisabled")?this.checkForBeforeAndAfter(t,l,i,r):(d==i?a.addClass("lyteDateRPTempFirstDateSelected"):d==r?o.addClass("lyteDateRPTempLastDateSelected"):t[l].classList.contains("lyteDateRPTempSelected")||t[l].classList.add("lyteDateRPTempSelected"),this.checkForMonthEndAndStart(t,l,this.getData("selectedDate1"),e)):(t[l].classList.contains("lyteDateRPTempSelected")||t[l].classList.contains("lyteCalSel"))&&t[l].classList.remove("lyteDateRPTempSelected","lyteCalSel");else if(i>r)for(l=0;l<t.length;l++){var d;(d=Date.parse(this.stringToDate(t[l].dataset.date,this.getData("ltPropFormat"))))>=r&&d<=i?t[l].classList.contains("lyteCalDisabled")?this.checkForBeforeAndAfter(t,l,r,i):(d==r?o.addClass("lyteDateRPTempFirstDateSelected"):d==i?a.addClass("lyteDateRPTempLastDateSelected"):t[l].classList.contains("lyteDateRPTempSelected")||t[l].classList.add("lyteDateRPTempSelected"),this.checkForMonthEndAndStart(t,l,e,this.getData("selectedDate1"))):(t[l].classList.contains("lyteDateRPTempSelected")||t[l].classList.contains("lyteCalSel"))&&t[l].classList.remove("lyteDateRPTempSelected","lyteCalSel")}else this.checkAndRemoveAllSelectedClasses(),this.setData("selectedDate1",e),o.addClass("lyteDateRPTempFirstDateSelected","lyteDateRPTempLastDateSelected"),this.checkForMonthEndAndStart(t,Array.from(t).indexOf(o.get(0)),e,this.getData("selectedDate1"));this.setData("tempDate",e)},checkAndMarkDisabledDates:function(){var e=this.$node.querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)");if(0!=e.length)for(var t,a=0;a<e.length;a++)t=e[a].dataset.date,this.checkForDisabledDates(t)&&e[a].classList.add("lyteCalDisabled")},checkForDisabledDates:function(e){for(var t=this.getData("ltPropDisabledDates"),a=0;a<t.length;a++)if(new RegExp(t[a]).test(e))return!0;return!1},checkForBeforeAndAfter:function(e,t,a,o){if(t>0&&t<e.length-1){var i=Date.parse(this.stringToDate(e[t-1].dataset.date,this.getData("ltPropFormat"))),r=Date.parse(this.stringToDate(e[t+1].dataset.date,this.getData("ltPropFormat")));i>=a&&i<=o&&e[t-1].classList.add("lyteDateRPInterimEndDate"),r>=a&&r<=o&&e[t+1].classList.add("lyteDateRPInterimStartDate")}},checkAndRemoveAllSelectedClasses:function(){var e=Array.from(this.$node.querySelectorAll(".lyteDateRPFirstDateSelected"));Lyte.arrayUtils(e,"push",Array.from(this.$node.querySelectorAll(".lyteDateRPLastDateSelected"))),Lyte.arrayUtils(e,"push",Array.from(this.$node.querySelectorAll(".lyteDateRPTempLastDateSelected"))),Lyte.arrayUtils(e,"push",Array.from(this.$node.querySelectorAll(".lyteDateRPTempFirstDateSelected"))),Lyte.arrayUtils(e,"push",Array.from(this.$node.querySelectorAll(".lyteDateRPTempSelected"))),Lyte.arrayUtils(e,"push",Array.from(this.$node.querySelectorAll(".lyteCalSel")));for(var t=0;t<e.length;t++)e[t].classList.remove("lyteDateRPFirstDateSelected","lyteDateRPTempSelected","lyteDateRPLastDateSelected","lyteDateRPTempFirstDateSelected","lyteDateRPTempLastDateSelected","lyteCalSel");this.setData("selectedDate1",""),this.setData("selectedDate2","")},checkForMonthEndAndStart:function(e,t,a,o){var i,r,n,s,l=e[t],d=this.data.ltPropFormat,p=this.isFirstDayOfTheMonth(l),c=this.isLastDayOfTheMonth(l),h=l.classList;(p||c)&&(i=Date.parse(this.stringToDate(l.dataset.date,d)),r=Date.parse(this.stringToDate(a,d)),n=Date.parse(this.stringToDate(o,d)),s=i>=r&&i<=n),p&&s?(h.remove("lyteDateRPTempSelected"),h.add("lyteDateRPMonthStartDate")):c&&s&&(h.remove("lyteDateRPTempSelected"),h.add("lyteDateRPMonthEndDate"))},isFirstDayOfTheMonth:function(e){return"1"===e.innerText.trim()},isLastDayOfTheMonth:function(e){var t=e.closest("lyte-calendar").getData("viewDate");if(-1!=[0,2,4,6,7,9,11].indexOf(t.getMonth()))return"31"===e.innerText.trim();if(-1!=[3,5,8,10].indexOf(t.getMonth()))return"30"===e.innerText.trim();var a=t.getFullYear();return this.isLeapYear(a)?"29"===e.innerText.trim():"28"===e.innerText.trim()},isLeapYear:function(e){return e%100==0?e%400==0:e%4==0},removeMonthEndAndStart:function(){var e=Array.from(this.$node.querySelectorAll(".lyteDateRPMonthStartDate"));Lyte.arrayUtils(e,"push",Array.from(this.$node.querySelectorAll(".lyteDateRPMonthEndDate")));for(var t=0;t<e.length;t++)e[t].classList.remove("lyteDateRPMonthStartDate","lyteDateRPMonthEndDate")},executeSelected:function(e){var t=this.getMethods("onDateSelected");Date.parse(this.stringToDate(this.getData("selectedDate1"),this.getData("ltPropFormat")))<=Date.parse(this.stringToDate(this.getData("selectedDate2"),this.getData("ltPropFormat")))?("continuous"==this.getData("ltPropSelectionType")&&(this.setData("internallyChanged",!0),this.setData("ltPropStartDate",this.getData("selectedDate1")),this.setData("internallyChanged",!0),this.setData("ltPropEndDate",this.getData("selectedDate2"))),t&&this.executeMethod("onDateSelected",e,this.getData("selectedDate1"),this.getData("selectedDate2"),this)):("continuous"==this.getData("ltPropSelectionType")&&(this.setData("internallyChanged",!0),this.setData("ltPropStartDate",this.getData("selectedDate2")),this.setData("internallyChanged",!0),this.setData("ltPropEndDate",this.getData("selectedDate1"))),t&&this.executeMethod("onDateSelected",e,this.getData("selectedDate2"),this.getData("selectedDate1"),this))},checkForSelectedDates:function(e,t){var a=this.$node.querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)");if(e&&t)for(var o=Date.parse(this.stringToDate(e,this.getData("ltPropFormat"))),i=Date.parse(this.stringToDate(t,this.getData("ltPropFormat"))),r=0;r<a.length;r++)(s=Date.parse(this.stringToDate(a[r].dataset.date,this.getData("ltPropFormat"))))>=o&&s<=i&&(a[r].classList.contains("lyteCalDisabled")?this.checkForBeforeAndAfter(a,r,o,i):(s==o&&a[r].classList.add("lyteDateRPFirstDateSelected"),s==i&&a[r].classList.add("lyteDateRPLastDateSelected"),s!==o&&s!==i&&a[r].classList.add("lyteDateRPTempSelected"),this.checkForMonthEndAndStart(a,r,e,t)));else{this.getData("ltPropDisabledDates").length>0&&this.checkAndMarkDisabledDates(),o=this.getData("selectedDate1"),i=this.getData("selectedDate2");var n=this.getData("tempDate");if(o&&i)if((o=Date.parse(this.stringToDate(o,this.getData("ltPropFormat"))))<(i=Date.parse(this.stringToDate(i,this.getData("ltPropFormat")))))for(r=0;r<a.length;r++)(s=Date.parse(this.stringToDate(a[r].dataset.date,this.getData("ltPropFormat"))))>=o&&s<=i&&(a[r].classList.contains("lyteCalDisabled")?this.checkForBeforeAndAfter(a,r,o,i):(s==o&&a[r].classList.add("lyteDateRPFirstDateSelected"),s==i&&a[r].classList.add("lyteDateRPLastDateSelected"),s!==o&&s!==i&&a[r].classList.add("lyteDateRPTempSelected"),this.checkForMonthEndAndStart(a,r,this.getData("selectedDate1"),this.getData("selectedDate2"))));else for(r=0;r<a.length;r++)(s=Date.parse(this.stringToDate(a[r].dataset.date,this.getData("ltPropFormat"))))>=i&&s<=o&&(a[r].classList.contains("lyteCalDisabled")?this.checkForBeforeAndAfter(a,r,i,o):(s==i&&a[r].classList.add("lyteDateRPFirstDateSelected"),s==o&&a[r].classList.add("lyteDateRPLastDateSelected"),s!==o&&s!==i&&a[r].classList.add("lyteDateRPTempSelected"),this.checkForMonthEndAndStart(a,r,this.getData("selectedDate2"),this.getData("selectedDate1"))));else if(o&&n)if((o=Date.parse(this.stringToDate(o,this.getData("ltPropFormat"))))<(n=Date.parse(this.stringToDate(n,this.getData("ltPropFormat")))))for(r=0;r<a.length;r++){var s=Date.parse(this.stringToDate(a[r].dataset.date,this.getData("ltPropFormat")));a[r].classList.contains("lyteCalDisabled")?this.checkForBeforeAndAfter(a,r,o,n):o<=n&&s==o?a[r].classList.add("lyteDateRPTempFirstDateSelected"):s==n?a[r].classList.add("lyteDateRPTempLastDateSelected"):s>o&&s<n&&a[r].classList.add("lyteDateRPTempSelected")}else for(r=0;r<a.length;r++)s=Date.parse(this.stringToDate(a[r].dataset.date,this.getData("ltPropFormat"))),a[r].classList.contains("lyteCalDisabled")?this.checkForBeforeAndAfter(a,r,n,o):n<=o&&s==o?a[r].classList.add("lyteDateRPTempFirstDateSelected"):s==o?a[r].classList.add("lyteDateRPTempLastDateSelected"):s>=i&&s<o&&a[r].classList.add("lyteDateRPTempSelected")}},callOnNavigate:function(e,t,a,o,i){this.data.dateSelected&&this.update_nodes(),this.setTodayClass(),this.getMethods("onNavigation")&&this.executeMethod("onNavigation",e,t,a,this,i)},getProperMonth:function(e){var t;return(t={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}[e=e.toLowerCase()]||{january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12}[e])||0===t?t-1:parseFloat(e)-1},stringToDate:function(e,t){try{var a=e.match(/([\da-z]+)/gi),o=(t=t.toUpperCase()).match(/([a-z]+)/gi),i=this.toDate(),r=0,n=["Y","M","D"];if(i.setDate(1),3!==a.length)return"Invalid Date";for(;r<o.length;){var s=this.getOrderIndex(o,n[r]);if(0==r?i.setFullYear(a[s]):1==r?i.setMonth(this.getProperMonth(a[s])):2==r&&i.setDate(a[s]),"Invalid Date"===i.toString())return i.toString();r++}return i}catch(e){return"Invalid Date"}},getOrderIndex:function(e,t){for(var a=0;a<e.length;a++)if(e[a].charAt(0)===t)return a;return-1},constructDateString:function(e,t,a){var o,i=this.getData("ltPropFormat"),r="";if($L.moment){var n=new Date(e+"/"+t+"/"+a);return this.moment(n).format(i.toUpperCase())}if(-1==i.indexOf("/"))return $L.moment?(n=new Date(e+"/"+t+"/"+a),this.moment(n).format(i.toUpperCase())):void console.error("INCLUDE LYTE-MOMENT PLUGIN");if("/",3!=(o=i.split("/")).length)return"Invalid Format";for(var s=0;s<3;s++)"M"===o[s].toUpperCase().charAt(0)?(r+=e,2!=s&&(r+="/")):"D"===o[s].toUpperCase().charAt(0)?(r+=t,2!=s&&(r+="/")):"Y"===o[s].toUpperCase().charAt(0)&&(r+=a,2!=s&&(r+="/"));return r},previous_action:function(e,t){var a,o,i=this.$node.querySelector(".dRPCalendar1"),r={date1:this.getData("monthNames")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear(),date2:this.getData("monthNames")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()};if(i.setData("selectDate",!1),a="M"==e?i.getData("viewDate").getMonth()-1:i.getData("viewDate").getMonth(),o="Y"==e?i.getData("viewDate").getFullYear()-1:i.getData("viewDate").getFullYear(),-1==a&&(a=11,o-=1),!(o<this.getData("ltPropStartYear"))){this.setMonthAndYear(i,{dd:1,mm:a,yy:o},"cal1"),a<11?a+=1:(a=0,o+=1),this.setMonthAndYear(this.$node.querySelector(".dRPCalendar2"),{dd:1,mm:a,yy:o},"cal2"),this.checkForSelectedDates();var n={date1:this.getData("monthNames")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear(),date2:this.getData("monthNames")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()};this.validateNavigation(),this.callOnNavigate(t,r,n,this)}},next_action:function(e,t){var a=this.$node.querySelector(".dRPCalendar2");a.setData("selectDate",!1);var o,i,r={date1:this.getData("monthNames")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear(),date2:this.getData("monthNames")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()};if(o="M"==e?a.getData("viewDate").getMonth()+1:a.getData("viewDate").getMonth(),i="Y"==e?a.getData("viewDate").getFullYear()+1:a.getData("viewDate").getFullYear(),12==o&&(o=0,i+=1),!(i>this.getData("ltPropEndYear"))){this.setMonthAndYear(a,{dd:1,mm:o,yy:i},"cal2"),o>0?o-=1:(o=11,i-=1),this.$node.querySelector(".dRPCalendar1").setData("selectDate",!1),this.setMonthAndYear(this.$node.querySelector(".dRPCalendar1"),{dd:1,mm:o,yy:i},"cal1"),this.checkForSelectedDates();var n={date1:this.getData("monthNames")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear(),date2:this.getData("monthNames")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()};this.validateNavigation(),this.callOnNavigate(t,r,n,this)}},separate_previous:function(e,t,a){var o,i,r;if("cal1"==t?(o=this.$node.querySelector(".dRPCalendar1"),i=this.getData("monthNames1")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear()):"cal2"==t&&(o=this.$node.querySelector(".dRPCalendar2"),i=this.getData("monthNames2")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()),o){var n,s;if(o.setData("selectDate",!1),n="M"==e?o.getData("viewDate").getMonth()-1:o.getData("viewDate").getMonth(),s="Y"==e?o.getData("viewDate").getFullYear()-1:o.getData("viewDate").getFullYear(),-1==n&&(n=11,s-=1),s<this.getData("ltPropStartYear"))return;this.setMonthAndYear(o,{dd:1,mm:n,yy:s},t),"cal1"==t?(this.getData("ltPropStartDate")&&this.checkforStartDateAndEndDate(o,this.getData("ltPropStartDate"),"start"),r=this.getData("monthNames1")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear()):"cal2"==t&&(this.getData("ltPropEndDate")&&this.checkforStartDateAndEndDate(o,this.getData("ltPropEndDate"),"end"),r=this.getData("monthNames2")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()),this.validateNavigationAndDropdown(),this.callOnNavigate(a,i,r,this,"cal1"==t?"from Calendar":"to Calendar")}},separate_next:function(e,t,a){var o,i,r;if("cal1"==t?(o=this.$node.querySelector(".dRPCalendar1"),i=this.getData("monthNames1")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear()):"cal2"==t&&(o=this.$node.querySelector(".dRPCalendar2"),i=this.getData("monthNames2")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()),o){var n,s;if(o.setData("selectDate",!1),n="M"==e?o.getData("viewDate").getMonth()+1:o.getData("viewDate").getMonth(),s="Y"==e?o.getData("viewDate").getFullYear()+1:o.getData("viewDate").getFullYear(),12==n&&(n=0,s+=1),s>this.getData("ltPropEndYear"))return;this.setMonthAndYear(o,{dd:1,mm:n,yy:s},t),"cal1"==t?(this.getData("ltPropStartDate")&&this.checkforStartDateAndEndDate(o,this.getData("ltPropStartDate"),"start"),r=this.getData("monthNames1")[this.getData("calViewDate1").getMonth()]+" "+this.getData("calViewDate1").getFullYear()):"cal2"==t&&(this.getData("ltPropEndDate")&&this.checkforStartDateAndEndDate(o,this.getData("ltPropEndDate"),"end"),r=this.getData("monthNames2")[this.getData("calViewDate2").getMonth()]+" "+this.getData("calViewDate2").getFullYear()),this.validateNavigationAndDropdown(),this.callOnNavigate(a,i,r,this,"cal1"==t?"from Calendar":"to Calendar")}},separate_mousedown:function(e){for(var t=e.target;t.parentElement&&!t.classList.contains("lyteCalCdate");)t=t.parentElement;if("HTML"!==t.tagName&&t.classList.contains("lyteCalCdate")&&!t.classList.contains("lyteCalDiffMonth")){var a=t.closest("lyte-calendar");if(a.classList.contains("dRPCalendar1")){this.setData("selectedDate1",t.dataset.date),this.setData("ltPropStartDate",t.dataset.date);var o=this.getData("calViewDate1"),i=this.getData("calViewDate2");if(o.getMonth()>i.getMonth()&&o.getFullYear()==i.getFullYear()||o.getFullYear()>i.getFullYear()){var r=this.$node.querySelector(".dRPCalendar2"),n=this.getData("calViewDate1").getMonth(),s=this.getData("calViewDate1").getFullYear();this.setMonthAndYear(r,{dd:1,mm:n,yy:s},"cal2"),this.getData("ltPropEndDate")&&this.checkforStartDateAndEndDate(r,this.getData("ltPropEndDate"),"end")}}else if(a.classList.contains("dRPCalendar2")&&(this.setData("selectedDate2",t.dataset.date),this.setData("ltPropEndDate",t.dataset.date),o=this.getData("calViewDate1"),(i=this.getData("calViewDate2")).getMonth()<o.getMonth()&&i.getFullYear()==o.getFullYear()||i.getFullYear()<o.getFullYear())){var l=this.$node.querySelector(".dRPCalendar1");n=this.getData("calViewDate2").getMonth(),s=this.getData("calViewDate2").getFullYear(),this.setMonthAndYear(l,{dd:1,mm:n,yy:s},"cal1"),this.getData("ltPropStartDate")&&this.checkforStartDateAndEndDate(l,this.getData("ltPropStartDate"),"start")}this.validateNavigationAndDropdown(),this.getData("dateNode1")&&this.getData("dateNode2")&&this.executeSelected(e)}},common_fn:function(e,t,a,o,i){if(!$L(o.target.parentNode).hasClass("lyteCalDiffMonth")){var r=o.which||o.keyCode;i.test(r)&&(a?this["separate_"+e](t,a,o):this[e+"_action"](t,o),o.preventDefault())}},actions:{prevKey:function(e,t,a){return this.common_fn("previous",e,a,t,/^3(7|2)|13$/),!1},nextKey:function(e,t,a){return this.common_fn("next",e,a,t,/^3(9|2)|13$/),!1},blurKey:function(e){e.target.tabIndex=-1},previous:function(e,t,a){this[(a||"previous")+"_action"](e,t)},mouseDown:function(e){for(var t=e.target;t.parentElement&&!t.classList.contains("lyteCalCdate");)t=t.parentElement;if("HTML"!==t.tagName){var a=this.getData("clickCount");a++,this.setData("clickCount",a);var o=this;if(1===a)this.singleClickTimer=setTimeout((function(){a=0,o.setData("clickCount",a),delete this.singleClickTimer}),400);else if(2===a){if(clearTimeout(this.singleClickTimer),this.singleClickTimer&&delete this.singleClickTimer,a=0,this.setData("clickCount",a),t.classList.contains("lyteCalCdate")&&!t.classList.contains("lyteCalDiffMonth")){this.checkAndRemoveAllSelectedClasses(),this.removeMonthEndAndStart(),this.setData("dateNode1",t),this.setData("dateNode2",t),t.classList.add("lyteDateRPFirstDateSelected","lyteDateRPLastDateSelected");var i=this.$node.querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)");this.checkForMonthEndAndStart(i,Array.from(i).indexOf(t),t.dataset.date,t.dataset.date),this.setData("selectedDate1",t.dataset.date),this.setData("selectedDate2",t.dataset.date),this.setData("dateSelected",!1),this.executeSelected(e)}return}t.classList.contains("lyteCalCdate")&&!t.classList.contains("lyteCalDiffMonth")&&(this.getData("dateSelected")?(t.classList.contains("lyteDateRPTempSelected")&&t.classList.remove("lyteDateRPTempSelected"),Date.parse(this.stringToDate(this.getData("selectedDate1"),this.getData("ltPropFormat")))<=Date.parse(this.stringToDate(t.dataset.date,this.getData("ltPropFormat")))?($L(this.getData("dateNode1")).removeClass("lyteDateRPTempFirstDateSelected").addClass("lyteDateRPFirstDateSelected"),$L(this.getData("dateNode2")).removeClass("lyteDateRPTempLastDateSelected").addClass("lyteDateRPLastDateSelected")):($L(this.getData("dateNode1")).removeClass("lyteDateRPTempLastDateSelected").addClass("lyteDateRPLastDateSelected"),$L(this.getData("dateNode2")).removeClass("lyteDateRPTempFirstDateSelected").addClass("lyteDateRPFirstDateSelected")),this.setData("selectedDate2",t.dataset.date),this.setData("tempDate",""),this.setData("dateSelected",!1),this.executeSelected(e)):(this.checkAndRemoveAllSelectedClasses(),this.removeMonthEndAndStart(),this.setData("dateNode1",t),t.classList.add("lyteDateRPTempFirstDateSelected"),t.classList.add("lyteDateRPTempLastDateSelected"),i=this.$node.querySelectorAll(".lyteCalCdate:not(.lyteCalDiffMonth)"),this.checkForMonthEndAndStart(i,Array.from(i).indexOf(t),t.dataset.date,t.dataset.date),this.setData("selectedDate1",t.dataset.date),this.setData("dateSelected",!0)))}},mouseOver:function(e){if(this.getData("dateSelected")){if(this._prev_mouse)return;for(var t=e.target;t.parentElement&&!t.classList.contains("lyteCalCdate");)t=t.parentElement;if("HTML"===t.tagName)return;t.classList.contains("lyteCalCdate")&&(t.classList.contains("lyteCalDiffMonth")||(this.setData("dateNode2",t),this.selectDates(t.dataset.date)))}},separateMouseDown:function(e){this.separate_mousedown(e)},separatePrevious:function(e,t,a,o){this["separate_"+(o||"previous")](e,t,a)},keydown:function(e){Array.from(this.$node.getElementsByTagName("lyte-dropdown")).filter((function(e){return e.ltProp("isOpen")})).length||this.keydown(e)}},start_obs:function(e){var t="onStartDateChanged",a=this.data,o=e.newValue,i="activeDate";null!=a.ltPropMaxDiff&&this.setup_maxdiff(e),o&&a.ltPropNavigation&&(this.active_obs(o,a[i]),this.setData(i,o)),this.getMethods(t)&&this.executeMethod(t,e,this)}.observes("selectedDate1"),setup_maxdiff:function(e){var t=e.newValue,a=this.data,o=a.ltPropFormat,i=a.ltPropMaxDiff;if(t&&a.ltPropMinDate!=t){this.__ignoremin=!0;var r=Array.from(this.$node.getElementsByTagName("lyte-calendar"));r.forEach((function(e){e.component.__ignoremin=!0})),this.setData({ltPropStartDate:"",ltPropEndDate:"",ltPropMinDate:t,ltPropMaxDate:this.get_crct_value(this.moment(t,o).add(i,"day")).format(o)});var n=function(e){var t=a[e];t&&(a[e]=$L(this.$node.querySelector('div[data-date="'+t.getAttribute("data-date")+'"]')).removeClass("lyteCalToday").get(0)||t)}.bind(this);n("dateNode1"),n("dateNode2"),r.forEach((function(e){delete e.component.__ignoremin})),delete this.__ignoremin}},get_crct_value:function(e){var t=this.data,a=t.ltPropMaxDate;if(a){var o=this.moment(a,t.ltPropFormat);if(e.fromNow(o).past)return o}return e},methods:{addDropdownClass:function(e,t){t.childComp.classList.add("lyteCalendarDropdown")},editArrowPosition:function(e,t){var a=t.childComp.querySelector(".lyteArrow");_lyteUiUtils.getRTL()?(a.style.right="20%",a.style.left="auto"):(a.style.left="20%",a.style.right="auto")},optionSelected:function(e,t,a,o,i){var r=this.data,n=r.monthNames,s=r.calViewDate1,l=r.calViewDate2,d={date1:n[s.getMonth()]+" "+s.getFullYear(),date2:n[l.getMonth()]+" "+l.getFullYear()};if("separate"==this.getData("ltPropSelectionType")){if("cal1"==e){(h=this.$node.querySelector(".dRPCalendar1")).setData("selectDate",!1);var p=1;if(u="M"==t?this.getData("monthNames").indexOf(o):h.getData("viewDate").getMonth(),f="Y"==t?parseInt(o):h.getData("viewDate").getFullYear(),this.getData("ltPropEndDate")&&u>(c=this.stringToDate(this.getData("ltPropEndDate"),this.getData("ltPropFormat"))).getMonth()&&f>=c.getFullYear())return"M"==t&&h.querySelector(".monthDD").ltProp("selected",this.getData("monthNames")[h.getData("viewDate").getMonth()]),void("Y"==t&&h.querySelector(".yearDD").ltProp("selected",""+h.getData("viewDate").getFullYear()));this.setMonthAndYear(h,{dd:p,mm:u,yy:f},"cal1"),this.getData("ltPropStartDate")&&this.checkforStartDateAndEndDate(h,this.getData("ltPropStartDate"),"start")}else if("cal2"==e){var c;if((h=this.$node.querySelector(".dRPCalendar2")).setData("selectDate",!1),p=1,u="M"==t?this.getData("monthNames").indexOf(o):h.getData("viewDate").getMonth(),f="Y"==t?o:h.getData("viewDate").getFullYear(),this.getData("ltPropStartDate")&&u<(c=this.stringToDate(this.getData("ltPropStartDate"),this.getData("ltPropFormat"))).getMonth()&&f<=c.getFullYear())return"M"==t&&h.querySelector(".monthDD").ltProp("selected",this.getData("monthNames")[h.getData("viewDate").getMonth()]),void("Y"==t&&h.querySelector(".yearDD").ltProp("selected",""+h.getData("viewDate").getFullYear()));this.setMonthAndYear(h,{dd:p,mm:u,yy:f},"cal2"),this.getData("ltPropEndDate")&&this.checkforStartDateAndEndDate(h,this.getData("ltPropEndDate"),"end")}this.validateNavigationAndDropdown()}if("continuous"==this.getData("ltPropSelectionType")){if("cal1"==e){if((h=this.$node.querySelector(".dRPCalendar1")).setData("selectDate",!1),p=1,u="M"==t?this.getData("monthNames").indexOf(o):h.getData("viewDate").getMonth(),f="Y"==t?parseInt(o):h.getData("viewDate").getFullYear(),u>10&&f==this.getData("ltPropEndYear"))return void(o==_lyteUiUtils.i18n("Dec")||o==_lyteUiUtils.i18n("December")?h.querySelector(".monthDD").ltProp("selected",this.getData("monthNames")[h.getData("viewDate").getMonth()]):h.querySelector(".yearDD").ltProp("selected",""+h.getData("viewDate").getFullYear()));this.setMonthAndYear(h,{dd:p,mm:u,yy:f},"cal1"),u<11?u+=1:(u=0,f+=1),this.setMonthAndYear(this.$node.querySelector(".dRPCalendar2"),{dd:p,mm:u,yy:f},"cal2")}else if("cal2"==e){var h,u,f;if((h=this.$node.querySelector(".dRPCalendar2")).setData("selectDate",!1),p=1,u="M"==t?this.getData("monthNames").indexOf(o):h.getData("viewDate").getMonth(),f="Y"==t?o:h.getData("viewDate").getFullYear(),u<1&&f==this.getData("ltPropStartYear"))return void(o==_lyteUiUtils.i18n("Jan")||o==_lyteUiUtils.i18n("January")?h.querySelector(".monthDD").ltProp("selected",this.getData("monthNames")[h.getData("viewDate").getMonth()]):h.querySelector(".yearDD").ltProp("selected",""+h.getData("viewDate").getFullYear()));this.setMonthAndYear(h,{dd:p,mm:u,yy:f},"cal2"),u>0?u-=1:(u=11,f-=1),this.$node.querySelector(".dRPCalendar1").setData("selectDate",!1),this.setMonthAndYear(this.$node.querySelector(".dRPCalendar1"),{dd:p,mm:u,yy:f},"cal1")}this.checkForSelectedDates(),this.validateNavigation()}s=r.calViewDate1,l=r.calViewDate2;var y={date1:n[s.getMonth()]+" "+s.getFullYear(),date2:n[l.getMonth()]+" "+l.getFullYear()};this.callOnNavigate(a,d,y,this,"cal1"==e?"from Calendar":"to Calendar")},viewDateChange:function(e,t,a){this.setCalendarHeader(e,t,a)}},nav_obs:function(e){e.newValue&&(this.data.ltPropNavigation&&this.set_navigationNode(),this.setData(e.item,!1))}.observes("ltPropActivateNavigation"),set_navigationNode:function(e){var t,a=this.data,o=a.calViewDate1,i=a.calViewDate2,r=a.tempDate,n=e||a.selectedDate1,s=e||a.selectedDate2,l=a.ltPropFormat,d="separate"==a.ltPropSelectionType,p="1"==a.selected,c=!p,h=function(e,t,a){if(!d||a){var o=this.moment(e,l).getDObj();return o.getMonth()==t.getMonth()&&o.getFullYear()==t.getFullYear()?o:void 0}}.bind(this);if(e||r&&(t=h(r,o,p)||h(r,i,c)),!t&&s&&(t=h(s,i,c)||h(s,o,p)),!t&&n&&(t=h(n,o,p)||h(n,i,c)),!t&&!e){var u=$L.moment().format(l);t=h(u,o,p)||h(u,i,c)}if(e)return t;t||(t=d?p?o:i:o);var f=$L.moment(t).format(l);this.active_obs(f,a.activeDate),this.setData("activeDate",f)},active_obs:function(e,t,a){var o='.lyteCalCdate[data-date="',i=this.$node,r=this.data;"separate"==r.ltPropSelectionType&&(o=".lyteDateRangePickerCol"+r.selected+" "+o),t&&$L(o+t+'"]',i).eq(0).removeClass("lyteCalNavCell").attr("tabindex","-1");var n=$L(o+e+'"]',i).eq(0);if(a)return n.get(0);(n=n.addClass("lyteCalNavCell").attr("tabindex","1").get(0))&&n.focus()},keydown:function(e){var t,a,o,i=e.target,r=this.data,n=r.ltPropSelectionType,s=r.activeDate,l=r.ltPropFormat,d=e.which||e.keyCode,p=r.selectedDate1,c=r.selectedDate2,h=r.selected,u=r.preventKeydown;if(!s)return this.set_navigationNode();var f=this.moment(s,l),y="continuous"==n,m=e.ctrlKey;switch(d){case 37:t=-1;break;case 38:t=u?0:-7;break;case 39:t=1;break;case 40:t=u?0:7;break;case 13:$L(i).hasClass("lyteCalDisabled")||(this.key_enter(e),a=!0),e.preventDefault()}if(t){if(m)this.setData("selected",t>0?"2":"1"),this.set_navigationNode();else{f.add(t,"day");var g=f.format(l),v=this.set_navigationNode(g),b=function(){this.active_obs(g,s),this.setData("activeDate",g),p&&!c&&(this.setData({tempDate:g,dateNode2:this.active_obs(g,"",!0)}),a=!0)}.bind(this);if(function(){var e=r.ltPropMinDate,a=r.ltPropMaxDate,i=this.moment(e,l),n=this.moment(a,l);return e&&i.fromNow(f).past&&(o=g=e,f=i),a&&f.fromNow(n).past&&(o=g=a,f=n),y||("1"==h?c&&t>0&&f.fromNow(this.moment(c,l)).past&&(o=g=c):p&&t<0&&this.moment(p,l).fromNow(f).past&&(o=g=p)),o&&(v=this.set_navigationNode(g)),!0}.call(this))if(v)b();else{var P="next";if(t<0&&(P="previous"),y)this._prev_mouse=!0,this[P+"_action"]("M",e),window.requestAnimationFrame(function(){delete this._prev_mouse}.bind(this));else{var D="cal1";"2"==h&&(D="cal2"),this["separate_"+P]("M",D,e)}this.set_navigationNode(g)&&b()}}e.preventDefault()}a&&y&&this.selectDates(r.tempDate||r.ltPropEndDate)},key_enter:function(e){var t,a,o=this.data,i=o.ltPropSelectionType,r=o.activeDate,n=(o.ltPropFormat,o.selectedDate1),s=o.selectedDate2,l=this.active_obs(r,"",!0);"continuous"==i?!n||n&&s?t={ltPropStartDate:"",ltPropEndDate:"",dateNode1:l,dateNode2:l,selectedDate1:r,selectedDate2:"",dateSelected:!0,internallyChanged:!0,tempDate:r}:n&&(this.active_obs("",r),a=t={selectedDate2:r,dateSelected:!1,dateNode2:l,activeDate:""}):this.separate_mousedown(e),t&&(this.setData(t),a&&this.executeSelected(e),this.setData("internallyChanged",!1))},update_nodes:function(){var e=this.data,t=e.dateNode1,a=e.selectedDate1;a&&!this.$node.contains(t)&&this.setData("dateNode1",this.active_obs(a,"",!0))},disablecheck:function(){var e=this.data,t="separate"==e.ltPropSelectionType,a=e.calViewDate1,o=e.calViewDate2,i=e.ltPropMinDate,r=e.ltPropMaxDate,n=e.ltPropFormat,s=function(e,t){return e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()},l=function(e,t){return!!s(e,t)||e.getTime()>t.getTime()},d=function(e,t){return!!s(e,t)||e.getTime()<t.getTime()},p=function(e,t){e?t.addClass("lyteCalDiffMonth").attr("aria-disabled","true"):t.removeClass("lyteCalDiffMonth").removeAttr("aria-disabled")}.bind(this),c=".lyteDateRangePickerCol",h=this.$node;if(i){var u=" .lyteDateRPLeftNav",f=this.moment(i,n).getDObj();p(l(f,a),$L(c+1+u,h)),t&&p(l(f,o),$L(c+2+u,h))}if(r){u=" .lyteDateRPRightNav";var y=this.moment(r,n).getDObj();p(d(y,o),$L(c+2+u,h)),t&&p(d(y,a),$L(c+1+u,h))}}}),function(e){if(lyteDomObj){var t,a,o,i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],l=["Su","Mo","Tu","We","Th","Fr","Sa"],d=[31,28,31,30,31,30,31,31,30,31,30,31],p="W",c=1,h="lyteMoment",u=19,f=80,y={"Etc/GMT+12":-720,"Etc/GMT+11":-660,"Pacific/Midway":-660,"Pacific/Niue":-660,"Pacific/Pago_Pago":-660,"Pacific/Samoa":-660,"US/Samoa":-660,"America/Adak":-540,"America/Atka":-540,"Etc/GMT+10":-600,HST:-600,"Pacific/Honolulu":-600,"Pacific/Johnston":-600,"Pacific/Rarotonga":-600,"Pacific/Tahiti":-600,"SystemV/HST10":-600,"US/Aleutian":-540,"US/Hawaii":-600,"Pacific/Marquesas":-510,AST:-480,"America/Anchorage":-480,"America/Juneau":-480,"America/Metlakatla":-480,"America/Nome":-480,"America/Sitka":-480,"America/Yakutat":-480,"Etc/GMT+9":-540,"Pacific/Gambier":-540,"SystemV/YST9":-540,"SystemV/YST9YDT":-480,"US/Alaska":-480,"America/Ensenada":-420,"America/Los_Angeles":-420,"America/Santa_Isabel":-420,"America/Tijuana":-420,"America/Vancouver":-420,"Canada/Pacific":-420,"Etc/GMT+8":-480,"Mexico/BajaNorte":-420,PST:-480,PST8PDT:-420,"Pacific/Pitcairn":-480,"SystemV/PST8":-480,"SystemV/PST8PDT":-420,"US/Pacific":-420,"America/Boise":-360,"America/Cambridge_Bay":-360,"America/Chihuahua":-360,"America/Creston":-420,"America/Dawson":-420,"America/Dawson_Creek":-420,"America/Denver":-360,"America/Edmonton":-360,"America/Fort_Nelson":-420,"America/Hermosillo":-420,"America/Inuvik":-360,"America/Mazatlan":-360,"America/Ojinaga":-360,"America/Phoenix":-420,"America/Shiprock":-360,"America/Whitehorse":-420,"America/Yellowknife":-360,"Canada/Mountain":-360,"Canada/Yukon":-420,"Etc/GMT+7":-420,MST:-420,MST7MDT:-360,"Mexico/BajaSur":-360,Navajo:-360,PNT:-420,"SystemV/MST7":-420,"SystemV/MST7MDT":-360,"US/Arizona":-420,"US/Mountain":-360,"America/Bahia_Banderas":-300,"America/Belize":-360,"America/Chicago":-300,"America/Costa_Rica":-360,"America/El_Salvador":-360,"America/Guatemala":-360,"America/Indiana/Knox":-300,"America/Indiana/Tell_City":-300,"America/Knox_IN":-300,"America/Managua":-360,"America/Matamoros":-300,"America/Menominee":-300,"America/Merida":-300,"America/Mexico_City":-300,"America/Monterrey":-300,"America/North_Dakota/Beulah":-300,"America/North_Dakota/Center":-300,"America/North_Dakota/New_Salem":-300,"America/Rainy_River":-300,"America/Rankin_Inlet":-300,"America/Regina":-360,"America/Resolute":-300,"America/Swift_Current":-360,"America/Tegucigalpa":-360,"America/Winnipeg":-300,CST:-360,CST6CDT:-300,"Canada/Central":-300,"Canada/Saskatchewan":-360,"Chile/EasterIsland":-360,"Etc/GMT+6":-360,"Mexico/General":-300,"Pacific/Easter":-360,"Pacific/Galapagos":-360,"SystemV/CST6":-360,"SystemV/CST6CDT":-300,"US/Central":-300,"US/Indiana-Starke":-300,"America/Atikokan":-300,"America/Bogota":-300,"America/Cancun":-300,"America/Cayman":-300,"America/Coral_Harbour":-300,"America/Detroit":-240,"America/Eirunepe":-300,"America/Fort_Wayne":-240,"America/Grand_Turk":-240,"America/Guayaquil":-300,"America/Havana":-240,"America/Indiana/Indianapolis":-240,"America/Indiana/Marengo":-240,"America/Indiana/Petersburg":-240,"America/Indiana/Vevay":-240,"America/Indiana/Vincennes":-240,"America/Indiana/Winamac":-240,"America/Indianapolis":-240,"America/Iqaluit":-240,"America/Jamaica":-300,"America/Kentucky/Louisville":-240,"America/Kentucky/Monticello":-240,"America/Lima":-300,"America/Louisville":-240,"America/Montreal":-240,"America/Nassau":-240,"America/New_York":-240,"America/Nipigon":-240,"America/Panama":-300,"America/Pangnirtung":-240,"America/Port-au-Prince":-240,"America/Porto_Acre":-300,"America/Rio_Branco":-300,"America/Thunder_Bay":-240,"America/Toronto":-240,"Brazil/Acre":-300,"Canada/Eastern":-240,Cuba:-240,EST:-300,EST5EDT:-240,"Etc/GMT+5":-300,IET:-240,Jamaica:-300,"SystemV/EST5":-300,"SystemV/EST5EDT":-240,"US/East-Indiana":-240,"US/Eastern":-240,"US/Michigan":-240,"America/Anguilla":-240,"America/Antigua":-240,"America/Aruba":-240,"America/Asuncion":-240,"America/Barbados":-240,"America/Blanc-Sablon":-240,"America/Boa_Vista":-240,"America/Campo_Grande":-240,"America/Caracas":-240,"America/Cuiaba":-240,"America/Curacao":-240,"America/Dominica":-240,"America/Glace_Bay":-180,"America/Goose_Bay":-180,"America/Grenada":-240,"America/Guadeloupe":-240,"America/Guyana":-240,"America/Halifax":-180,"America/Kralendijk":-240,"America/La_Paz":-240,"America/Lower_Princes":-240,"America/Manaus":-240,"America/Marigot":-240,"America/Martinique":-240,"America/Moncton":-180,"America/Montserrat":-240,"America/Port_of_Spain":-240,"America/Porto_Velho":-240,"America/Puerto_Rico":-240,"America/Santiago":-240,"America/Santo_Domingo":-240,"America/St_Barthelemy":-240,"America/St_Kitts":-240,"America/St_Lucia":-240,"America/St_Thomas":-240,"America/St_Vincent":-240,"America/Thule":-180,"America/Tortola":-240,"America/Virgin":-240,"Atlantic/Bermuda":-180,"Brazil/West":-240,"Canada/Atlantic":-180,"Chile/Continental":-240,"Etc/GMT+4":-240,PRT:-240,"SystemV/AST4":-240,"SystemV/AST4ADT":-180,"America/St_Johns":-90,CNT:-90,"Canada/Newfoundland":-90,AGT:-180,"America/Araguaina":-180,"America/Argentina/Buenos_Aires":-180,"America/Argentina/Catamarca":-180,"America/Argentina/ComodRivadavia":-180,"America/Argentina/Cordoba":-180,"America/Argentina/Jujuy":-180,"America/Argentina/La_Rioja":-180,"America/Argentina/Mendoza":-180,"America/Argentina/Rio_Gallegos":-180,"America/Argentina/Salta":-180,"America/Argentina/San_Juan":-180,"America/Argentina/San_Luis":-180,"America/Argentina/Tucuman":-180,"America/Argentina/Ushuaia":-180,"America/Bahia":-180,"America/Belem":-180,"America/Buenos_Aires":-180,"America/Catamarca":-180,"America/Cayenne":-180,"America/Cordoba":-180,"America/Fortaleza":-180,"America/Godthab":-120,"America/Jujuy":-180,"America/Maceio":-180,"America/Mendoza":-180,"America/Miquelon":-120,"America/Montevideo":-180,"America/Nuuk":-120,"America/Paramaribo":-180,"America/Punta_Arenas":-180,"America/Recife":-180,"America/Rosario":-180,"America/Santarem":-180,"America/Sao_Paulo":-180,"Antarctica/Palmer":-180,"Antarctica/Rothera":-180,"Atlantic/Stanley":-180,BET:-180,"Brazil/East":-180,"Etc/GMT+3":-180,"America/Noronha":-120,"Atlantic/South_Georgia":-120,"Brazil/DeNoronha":-120,"Etc/GMT+2":-120,"America/Scoresbysund":0,"Atlantic/Azores":0,"Atlantic/Cape_Verde":-60,"Etc/GMT+1":-60,"Africa/Abidjan":0,"Africa/Accra":0,"Africa/Bamako":0,"Africa/Banjul":0,"Africa/Bissau":0,"Africa/Casablanca":0,"Africa/Conakry":0,"Africa/Dakar":0,"Africa/El_Aaiun":0,"Africa/Freetown":0,"Africa/Lome":0,"Africa/Monrovia":0,"Africa/Nouakchott":0,"Africa/Ouagadougou":0,"Africa/Sao_Tome":0,"Africa/Timbuktu":0,"America/Danmarkshavn":0,"Antarctica/Troll":120,"Atlantic/Canary":60,"Atlantic/Faeroe":60,"Atlantic/Faroe":60,"Atlantic/Madeira":60,"Atlantic/Reykjavik":0,"Atlantic/St_Helena":0,Eire:60,"Etc/GMT":-0,"Etc/GMT+0":-0,"Etc/GMT-0":-0,"Etc/GMT0":-0,"Etc/Greenwich":-0,"Etc/UCT":-0,"Etc/UTC":-0,"Etc/Universal":-0,"Etc/Zulu":-0,"Europe/Belfast":60,"Europe/Dublin":60,"Europe/Guernsey":60,"Europe/Isle_of_Man":60,"Europe/Jersey":60,"Europe/Lisbon":60,"Europe/London":60,GB:60,"GB-Eire":60,GMT:0,GMT0:0,Greenwich:0,Iceland:0,Portugal:60,UCT:0,UTC:0,Universal:0,WET:60,Zulu:0,"Africa/Algiers":60,"Africa/Bangui":60,"Africa/Brazzaville":60,"Africa/Ceuta":120,"Africa/Douala":60,"Africa/Kinshasa":60,"Africa/Lagos":60,"Africa/Libreville":60,"Africa/Luanda":60,"Africa/Malabo":60,"Africa/Ndjamena":60,"Africa/Niamey":60,"Africa/Porto-Novo":60,"Africa/Tunis":60,"Arctic/Longyearbyen":120,"Atlantic/Jan_Mayen":120,CET:120,ECT:120,"Etc/GMT-1":60,"Europe/Amsterdam":120,"Europe/Andorra":120,"Europe/Belgrade":120,"Europe/Berlin":120,"Europe/Bratislava":120,"Europe/Brussels":120,"Europe/Budapest":120,"Europe/Busingen":120,"Europe/Copenhagen":120,"Europe/Gibraltar":120,"Europe/Ljubljana":120,"Europe/Luxembourg":120,"Europe/Madrid":120,"Europe/Malta":120,"Europe/Monaco":120,"Europe/Oslo":120,"Europe/Paris":120,"Europe/Podgorica":120,"Europe/Prague":120,"Europe/Rome":120,"Europe/San_Marino":120,"Europe/Sarajevo":120,"Europe/Skopje":120,"Europe/Stockholm":120,"Europe/Tirane":120,"Europe/Vaduz":120,"Europe/Vatican":120,"Europe/Vienna":120,"Europe/Warsaw":120,"Europe/Zagreb":120,"Europe/Zurich":120,MET:120,Poland:120,ART:120,"Africa/Blantyre":120,"Africa/Bujumbura":120,"Africa/Cairo":120,"Africa/Gaborone":120,"Africa/Harare":120,"Africa/Johannesburg":120,"Africa/Khartoum":120,"Africa/Kigali":120,"Africa/Lubumbashi":120,"Africa/Lusaka":120,"Africa/Maputo":120,"Africa/Maseru":120,"Africa/Mbabane":120,"Africa/Tripoli":120,"Africa/Windhoek":120,"Asia/Amman":180,"Asia/Beirut":180,"Asia/Damascus":180,"Asia/Famagusta":180,"Asia/Gaza":180,"Asia/Hebron":180,"Asia/Jerusalem":180,"Asia/Nicosia":180,"Asia/Tel_Aviv":180,CAT:120,EET:180,Egypt:120,"Etc/GMT-2":120,"Europe/Athens":180,"Europe/Bucharest":180,"Europe/Chisinau":180,"Europe/Helsinki":180,"Europe/Kaliningrad":120,"Europe/Kiev":180,"Europe/Mariehamn":180,"Europe/Nicosia":180,"Europe/Riga":180,"Europe/Sofia":180,"Europe/Tallinn":180,"Europe/Tiraspol":180,"Europe/Uzhgorod":180,"Europe/Vilnius":180,"Europe/Zaporozhye":180,Israel:180,Libya:120,"Africa/Addis_Ababa":180,"Africa/Asmara":180,"Africa/Asmera":180,"Africa/Dar_es_Salaam":180,"Africa/Djibouti":180,"Africa/Juba":180,"Africa/Kampala":180,"Africa/Mogadishu":180,"Africa/Nairobi":180,"Antarctica/Syowa":180,"Asia/Aden":180,"Asia/Baghdad":180,"Asia/Bahrain":180,"Asia/Istanbul":180,"Asia/Kuwait":180,"Asia/Qatar":180,"Asia/Riyadh":180,EAT:180,"Etc/GMT-3":180,"Europe/Istanbul":180,"Europe/Kirov":180,"Europe/Minsk":180,"Europe/Moscow":180,"Europe/Simferopol":180,"Indian/Antananarivo":180,"Indian/Comoro":180,"Indian/Mayotte":180,Turkey:180,"W-SU":180,"Asia/Tehran":270,Iran:270,"Asia/Baku":240,"Asia/Dubai":240,"Asia/Muscat":240,"Asia/Tbilisi":240,"Asia/Yerevan":240,"Etc/GMT-4":240,"Europe/Astrakhan":240,"Europe/Samara":240,"Europe/Saratov":240,"Europe/Ulyanovsk":240,"Europe/Volgograd":240,"Indian/Mahe":240,"Indian/Mauritius":240,"Indian/Reunion":240,NET:240,"Asia/Kabul":270,"Antarctica/Mawson":300,"Asia/Aqtau":300,"Asia/Aqtobe":300,"Asia/Ashgabat":300,"Asia/Ashkhabad":300,"Asia/Atyrau":300,"Asia/Dushanbe":300,"Asia/Karachi":300,"Asia/Oral":300,"Asia/Qyzylorda":300,"Asia/Samarkand":300,"Asia/Tashkent":300,"Asia/Yekaterinburg":300,"Etc/GMT-5":300,"Indian/Kerguelen":300,"Indian/Maldives":300,PLT:300,"Asia/Calcutta":330,"Asia/Colombo":330,"Asia/Kolkata":330,IST:330,"Asia/Kathmandu":345,"Asia/Katmandu":345,"Antarctica/Vostok":360,"Asia/Almaty":360,"Asia/Bishkek":360,"Asia/Dacca":360,"Asia/Dhaka":360,"Asia/Kashgar":360,"Asia/Omsk":360,"Asia/Qostanay":360,"Asia/Thimbu":360,"Asia/Thimphu":360,"Asia/Urumqi":360,BST:360,"Etc/GMT-6":360,"Indian/Chagos":360,"Asia/Rangoon":390,"Asia/Yangon":390,"Indian/Cocos":390,"Antarctica/Davis":420,"Asia/Bangkok":420,"Asia/Barnaul":420,"Asia/Ho_Chi_Minh":420,"Asia/Hovd":420,"Asia/Jakarta":420,"Asia/Krasnoyarsk":420,"Asia/Novokuznetsk":420,"Asia/Novosibirsk":420,"Asia/Phnom_Penh":420,"Asia/Pontianak":420,"Asia/Saigon":420,"Asia/Tomsk":420,"Asia/Vientiane":420,"Etc/GMT-7":420,"Indian/Christmas":420,VST:420,"Asia/Brunei":480,"Asia/Choibalsan":480,"Asia/Chongqing":480,"Asia/Chungking":480,"Asia/Harbin":480,"Asia/Hong_Kong":480,"Asia/Irkutsk":480,"Asia/Kuala_Lumpur":480,"Asia/Kuching":480,"Asia/Macao":480,"Asia/Macau":480,"Asia/Makassar":480,"Asia/Manila":480,"Asia/Shanghai":480,"Asia/Singapore":480,"Asia/Taipei":480,"Asia/Ujung_Pandang":480,"Asia/Ulaanbaatar":480,"Asia/Ulan_Bator":480,"Australia/Perth":480,"Australia/West":480,CTT:480,"Etc/GMT-8":480,Hongkong:480,PRC:480,Singapore:480,"Australia/Eucla":525,"Asia/Chita":540,"Asia/Dili":540,"Asia/Jayapura":540,"Asia/Khandyga":540,"Asia/Pyongyang":540,"Asia/Seoul":540,"Asia/Tokyo":540,"Asia/Yakutsk":540,"Etc/GMT-9":540,JST:540,Japan:540,"Pacific/Palau":540,ROK:540,ACT:570,"Australia/Adelaide":570,"Australia/Broken_Hill":570,"Australia/Darwin":570,"Australia/North":570,"Australia/South":570,"Australia/Yancowinna":570,AET:600,"Antarctica/DumontDUrville":600,"Antarctica/Macquarie":600,"Asia/Ust-Nera":600,"Asia/Vladivostok":600,"Australia/ACT":600,"Australia/Brisbane":600,"Australia/Canberra":600,"Australia/Currie":600,"Australia/Hobart":600,"Australia/Lindeman":600,"Australia/Melbourne":600,"Australia/NSW":600,"Australia/Queensland":600,"Australia/Sydney":600,"Australia/Tasmania":600,"Australia/Victoria":600,"Etc/GMT-10":600,"Pacific/Chuuk":600,"Pacific/Guam":600,"Pacific/Port_Moresby":600,"Pacific/Saipan":600,"Pacific/Truk":600,"Pacific/Yap":600,"Australia/LHI":630,"Australia/Lord_Howe":630,"Antarctica/Casey":660,"Asia/Magadan":660,"Asia/Sakhalin":660,"Asia/Srednekolymsk":660,"Etc/GMT-11":660,"Pacific/Bougainville":660,"Pacific/Efate":660,"Pacific/Guadalcanal":660,"Pacific/Kosrae":660,"Pacific/Norfolk":660,"Pacific/Noumea":660,"Pacific/Pohnpei":660,"Pacific/Ponape":660,SST:660,"Antarctica/McMurdo":720,"Antarctica/South_Pole":720,"Asia/Anadyr":720,"Asia/Kamchatka":720,"Etc/GMT-12":720,Kwajalein:720,NST:720,NZ:720,"Pacific/Auckland":720,"Pacific/Fiji":720,"Pacific/Funafuti":720,"Pacific/Kwajalein":720,"Pacific/Majuro":720,"Pacific/Nauru":720,"Pacific/Tarawa":720,"Pacific/Wake":720,"Pacific/Wallis":720,"NZ-CHAT":765,"Pacific/Chatham":765,"Etc/GMT-13":780,MIT:780,"Pacific/Apia":780,"Pacific/Enderbury":780,"Pacific/Fakaofo":780,"Pacific/Tongatapu":780,"Etc/GMT-14":840,"Pacific/Kiritimati":840,UT:0,EDT:-240,CDT:-300,MDT:-360,PDT:-420},m=new RegExp("("+Object.keys(y).join("|")+")"),g=[{val:"YYYY",type:"year",regex:/\d{4}/,len:4},{val:"GGGG",type:"year",regex:/\d{4}/,len:4,isWEG:!0},{val:"gggg",type:"year",regex:/\d{4}/,len:4,isWEG:!0},{val:"YY",type:"year",regex:/\d{2}/,len:2},{val:"GG",type:"year",regex:/\d{2}/,len:2,isWEG:!0},{val:"gg",type:"year",regex:/\d{2}/,len:2,isWEG:!0},{val:"MMMM",type:"month",regex:/[A-z]{3,}/,long:!0,str:!0,array:r},{val:"MMM",str:!0,type:"month",regex:/[A-z]{3,}/,array:i},{val:"Mo",suff:!0,type:"month",regex:/\d{1,2}(?=st|nd|rd|th)/,max:12},{val:"MM",type:"month",regex:/\d{2}/,len:2,max:12,alt:!0},{val:"M",type:"month",regex:/\d{1,2}/,max:12},{val:"DDDD",type:"date",regex:/\d{3}/,len:3,year:!0},{val:"DDDo",type:"date",suff:!0,regex:/\d{1,3}(?=st|nd|rd|th)/,len:3,year:!0,ignore:/\d{3}(?=st|nd|rd|th)/},{val:"DDD",type:"date",regex:/\d{1,3}/,year:!0,ignore:/\d{3}/},{val:"Do",type:"date",suff:!0,regex:/\d{1,2}(?=st|nd|rd|th)/},{val:"DD",type:"date",regex:/\d{2}/,len:2,alt:!0},{val:"D",type:"date",regex:/\d{1,2}/},{val:"[W]Wo",type:"week",suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"[W]wo",ignore:1,type:"week",suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"[W]WW",type:"week",regex:new RegExp("W(\\d{2})"),len:2,isWEG:!0,match:1},{val:"[W]ww",ignore:1,type:"week",regex:new RegExp("W(\\d{2})"),len:2,isWEG:!0,match:1},{val:"[W]W",type:"week",regex:new RegExp("W(\\d{1,2})"),isWEG:!0,match:1},{val:"[W]w",ignore:1,type:"week",regex:new RegExp("W(\\d{1,2})"),isWEG:!0,match:1},{val:"Wo",type:"week",pref:0,suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"wo",type:"week",pref:0,ignore:1,suff:!0,regex:new RegExp("[W]d{1,2}(?=st|nd|th|rd)"),isWEG:!0},{val:"WW",type:"week",pref:0,regex:new RegExp("(\\d{2})"),len:2,isWEG:!0,match:1},{val:"ww",type:"week",pref:0,ignore:1,regex:new RegExp("(\\d{2})"),len:2,isWEG:!0,match:1},{val:"W",type:"week",pref:0,regex:new RegExp("(\\d{1,2})"),isWEG:!0,match:1},{val:"w",type:"week",pref:0,ignore:1,regex:new RegExp("(\\d{1,2})"),isWEG:!0,match:1},{val:"E",type:"day",regex:/\d{1}/,isWEG:!0},{val:"e",type:"day",regex:/\d{1}/,isWEG:!0,local:!0},{val:"A",type:"meridian",regex:/AM|PM/,str:!0,time:!0},{val:"a",type:"meridian",regex:/am|pm/,str:!0,time:!0,lower:!0},{val:"ZZ",type:"timezone",regex:/(\+|\-)(\d{2})(\d{2})$/,time:!0,len:2},{val:"Z",type:"timezone",regex:/(\+|\-)(\d{2}):(\d{2})$/,time:!0,len:2},{val:"HH",type:"hour",regex:/\d{2}/,railway:!0,time:!0,len:2,max:23},{val:"H",type:"hour",regex:/\d{1,2}/,railway:!0,time:!0,max:23},{val:"hh",type:"hour",regex:/\d{2}/,time:!0,len:2,max:12,min:1},{val:"h",type:"hour",regex:/\d{1,2}/,time:!0,max:12,min:1},{val:"kk",type:"hour",regex:/\d{2}/,railway:!0,time:!0,len:2,max:24,deduct:-1},{val:"k",type:"hour",regex:/\d{1,2}/,railway:!0,time:!0,max:24,deduct:-1},{val:"mm",type:"minute",regex:/\d{2}/,time:!0,len:2,max:59},{val:"m",type:"minute",regex:/\d{1,2}/,time:!0,max:59},{val:"ss",type:"second",regex:/\d{2}/,time:!0,len:2,max:59},{val:"s",type:"second",regex:/\d{1,2}/,time:!0,max:59},{val:"S",type:"millisecond",regex:/[0-9]{1,}/,time:!0,valForm:/[S]+/},{val:"zz",type:"timezone",regex:m,str:!0,time:!0},{val:"z",type:"timezone",regex:m,str:!0,time:!0},{val:"X",type:"timestamp",regex:/\d{10}/,time:!0},{val:"x",type:"timestamp",regex:/\d{13,}/,time:!0,milli:!0},{val:"dddd",type:"longdate",regex:/[A-z]{3,}/,long:!0,str:!0,array:n},{val:"ddd",type:"longdate",regex:/[A-z]{3}/,str:!0,array:s},{val:"dd",type:"longdate",regex:/[A-z]{2}/,str:!0,array:l},{val:"do",type:"longdate",regex:/\d{1}(?=st|nd|rd|th)/,suff:!0},{val:"d",type:"longdate",regex:/\d{1}/},{val:"Qo",type:"quarter",regex:/\d{1}(?=st|nd|rd|th)/,suff:!0},{val:"Q",type:"quarter",regex:/\d{1}/}];function v(t,a,o,i){var r=this.parseFormat(this.replaceTxt(t)).reverse();return t=t.replace(/{{|}}/g,""),r.forEach((function(t){var r=t.format.array||[],n=e._lyteUiUtils;"meridian"==t.format.type&&(r=t.format.lower?["am","pm"]:["AM","PM"]),o&&!t.format.str&&n&&"1"!=n.i18n("1")&&(r=["0","1","2","3","4","5","6","7","8","9"]),Array.from(r).reverse().forEach((function(e){var o=n?n.i18n(e):e;i&&(o=i(a,e,o,t.format.val)||o),e!=o&&(a=function e(t,a,o){return-1!=t.indexOf(o)?e(t.replace(o,a),a,o):t}(a,e,o))}))})),a}function b(e,o,i,r){var n,s,l,d,p,h,y;e&&(this._arg=e),this._format=o,function(e){if(!e)return!0;var t=e.constructor;return t==Array&&!t.length||t==Object&&!Object.keys(e).length}(e)&&(e=new Date),i&&i.constructor==Object&&(r=i.lL,n=i.i18n,s=i.i18n_callback,l=i.ignore_timezone,d=i.timezone,p=i.timezoneOffset,y=i.wod,h=i.number_conversion,i=i.uL),l||this.timezone(d||t,null==p?a:p),n&&o&&e&&e.constructor==String&&(e=v.call(this,o,e,h,s)),this.uL=null==i?u:i,this.lL=null==r?f:r,this.wod=null==y?c:y,P(i)&&P(r)||(this.alt=!!i),this._isValid=O.call(this,e,o)}function P(e){return null!=e}function D(e,t,a){for(var o=0,i=0;i<e;i++)o+=d[i],t&&1==i&&(o+=1);return o+(a||0)}function _(e){return 2==(e+="").length&&(e=M(parseInt(e))),(e=parseInt(e))%4==0&&e%100!=0||e%400==0}function L(e){var t=e.match(/{{/),a=e.match(/}}/);return t&&a?L(e=e.replace(e.slice(t.index,a.index+2),(function(e){for(var t="",a=0;a<e.length-4;a++)t+="*";return t}))):e}function C(e,t){for(var a,o=g,i=[],r=0;r<o.length;r++){var n=o[r];if(!e.length)break;if(e.indexOf(n.val)>-1){if(t&&n.alt){a=!0;continue}n=$L.extend(!0,{},n),a&&(n.val=o[r-1].val),a=!1,i.push({format:n,index:e.indexOf(n.val)}),e=e.replace(n.val,Math.pow(10,n.val.length-1)),r--}}return i.sort((function(e,t){return e.index-t.index}))}function w(e,t,a,o){return e=e.replace(t,o||""),a&&(e=e.replace(/st|nd|rd|th/,"")),e}function T(e,t){var a,o,i=(e=e||[]).length;for(o=0;o<i;o++){var r=e[o];if(new RegExp(r).test(t)){a=r;break}}return{mon:a,index:o}}function x(e,t,a,o){var n;if(a){var s=T(o?r:i,e);n=s.mon,e=s.index,(!n||e>11)&&(e="Invalid")}else(e=parseInt(e)-1)>11&&(e="Invalid");return{val:e,mon:n}}function S(e){var t,a=parseInt(e[2]);return minute=parseInt(e[3]),t=60*a+minute,"+"==e[1]?-1*t:t}function A(e,t){if(e=parseInt(e),ini=0,ind=0,inc=d[0],e>365+(t?1:0))return{};for(;ini+inc<e;)ini+=inc,ind++,inc=d[ind],t&&1==ind&&(inc+=1);return{day:e-ini,mon:ind}}function E(e,t){var a=c,o=this._timezone;return o&&(e=new Date($L.moment(e).timezone(o).format("YYYY-MM-DD"))),a&&(e=new Date(e)).setDate(e.getDate()-a),function(e,t){var a=e.getFullYear(),o=_(a),i=e.getMonth(),r=e.getDate(),n=new Date(a,0,1),s=n.getDay(),l=(n.getDate(),e.getDay()),d=(D(i,o)+r-(7-s+0)-(l+1))/7+1;if(11==i){var p=new Date(a,11,31),c=p.getDay();if((p.getDate(),r+(6-c+7)%7)>31)return{week:1,day:l}}return{week:++d,day:l}}(e)}function M(e){var t=e+"";if(e=parseInt(e),2==t.length){var a=Number($L.moment().format("YYYY")),o=parseInt(a/100),i=a%100,r=(this.uL,(i-(this.lL||f)+100)%100);e=i>r?e<r?o+1+""+k(e,2):o+""+k(e,2):e<r?o+""+k(e,2):o-1+""+k(e,2)}return e}function $(e,t){for(var a,o,i,r={},n=new Date,s=C(L(t),!0),l=e,h=t=t.replace(/{{|}}/g,""),u=0;u<s.length;u++){var f,m=s[u].format;switch(m.type){case"date":case"year":case"week":case"day":m.regex.test(e)?(f="year"==m.type?e.match(m.regex)[m.match||0]:parseInt(e.match(m.regex)[m.match||0]),r[m.type]=f,e=w(e,m.regex,m.suff),l=w(l,m.regex,m.suff,m.val),"week"==m.type&&(e=w(e,p)),"day"==m.type&&m.local&&r.day++,m.year&&(r.date=A(r.date).day)):r.year&&r.week?(r[m.type]=c,t=t.replace(m.val,""),h=h.replace(m.val,"")):r[m.type]="Invalid",/date/i.test(m.type)&&0==r[m.type]&&(r[m.type]="Invalid");break;case"month":m.regex.test(e)?(f=x(e.match(m.regex)[0],m.suff,m.str,m.long),r.month=f.val,e=w(e,f.mon||m.regex,m.suff),l=w(l,f.mon||m.regex,m.suff,m.val)):r.month="Invalid",r.month<0&&(r.month="Invalid");break;case"quarter":m.regex.test(e)&&(f=e.match(m.regex)[0],r.quarter=f,e=w(e,f,m.suff),l=w(l,f,m.suff,m.val));break;case"longdate":m.regex.test(e)&&(f=m.str?T(m.array,e.match(m.regex)[0]):parseInt(e.match(m.regex)[0]),r.longdate=P(f.index)?f.index:f,e=w(e,f.mon||f,m.suff),l=w(l,f.mon||f,m.suff,m.val));break;case"hour":case"minute":case"second":case"meridian":if(m.regex.test(e)){m.str?f=e.match(m.regex)[0]:(f=parseInt(e.match(m.regex)[0]),m.railway&&(r.railway=!0)),m.deduct&&f--;var g=m.min;(m.max&&f>m.max||null!=g&&f<g)&&(f="Invalid"),r[m.type]=f,e=w(e,m.regex),l=w(l,m.regex,m.suff,m.val)}break;case"millisecond":m.regex.test(e)&&(f=e.match(m.regex)[0],r.millisecond=parseFloat(f),e=w(e,f).replace(/[S]+/,""),l=w(l,m.regex,m.suff,m.val),h=h.replace(/[S]+/,"S"));break;case"timestamp":m.regex.test(e)&&(f=parseInt(e.match(m.regex)[0]),r.timestamp=f*(m.milli?1:1e3),e=w(e,f),l=w(l,f,m.suff,m.val));break;case"timezone":m.regex.test(e)&&(m.str?(f=e.match(m.regex)[0],f=-y[f]):f=S(e.match(m.regex)),r.timezone=f,e=w(e,m.regex),l=w(l,m.regex,m.suff,m.val))}t=t.replace(m.valForm||m.val,"")}if(a=new Date(n.getFullYear(),P(r.month)?r.month:n.getMonth(),r.date||1,r.hour||("PM"==r.meridian?12:0),r.minute||0,r.second||0),P(r.day)||P(r.week)){var v=r.date;P(r.year)||(r.year=a.getFullYear()),P(r.day)||(r.day=c),function(e){if(null!=e.day||e.week){var t=new Date(e.year,0,1);if(!O.call(this,t))return{};var a=t.getDay(),o=_(e.year||t.getFullYear()),i=c+e.week==1?e.day-a+c:2==e.week?7+c-a+e.day:7+c-a+e.day+7*(e.week-2);if(i>365+(o?1:0)&&new Date(e.year+1,0,1).getDay()>4&&(e.year+=1,i-=365+(o?1:0)),i>365+(o?1:0)||0==e.day||e.day>7)return void(e.month=e.year=e.date="Invalid");var r=A(i,o);e.month=r.mon,e.date=r.day}if(e.year){var n=parseInt(e.year);n<100&&(e.year=M(n))}e.month<0&&(e.month="Invalid"),e.date<1&&(e.date="Invalid")}.call(this,r),P(v)&&(r.date>v&&r.month++,r.date=v)}if(P(r.longdate)&&r.day&&r.day!=r.longdate?a.setFullYear("Invalid"):P(r.year)&&a.setFullYear(M(r.year)),P(r.month)&&a.setMonth(r.month),P(r.date)&&a.setDate(r.date<=d[a.getMonth()]+(1==a.getMonth()&&_(a.getFullYear())?1:0)?r.date:"Invalid"),P(r.hour)){var b=r.meridian;a.setHours(r.railway?(o=r.hour,(i=b?/pm/i.test(b):r.hour>11)&&o<12?o+=12:12!=o||i||(o=0),o):/pm/i.test(b)?r.hour<12?r.hour+12:r.hour:r.hour%12)}if(P(r.minute)&&a.setMinutes(r.minute),P(r.second)&&a.setSeconds(r.second),P(r.millisecond)&&a.setMilliseconds(r.millisecond),P(r.timestamp)&&(a=new Date(r.timestamp)),O.call(this,a))if(P(r.timezone)){var D=a.getTimezoneOffset();if(r.timezone-=D,a.setMinutes(a.getMinutes()+r.timezone),D!=a.getTimezoneOffset()){var E=new Date(this._arg);"Invalid Date"==E.toString()?a.setMinutes(a.getMinutes()-r.timezone):a=E}}else if(P(this._timezone)){var $=this.timezoneOffset(a);r.timezone=$-a.getTimezoneOffset(),a.setMinutes(a.getMinutes()+r.timezone);var k=$-this.timezoneOffset(a);k&&a.setMinutes(a.getMinutes()-k);var R=r.hour;P(R)&&R!=parseInt($L.moment(a).format("h"))&&a.setMinutes(a.getMinutes()+k)}return"YYYY-MM-DDTHH:mm:ssZ"!=h&&e.length==t.length&&h==l&&O.call(this,a)?this._isCorrectFormat=!0:this._format&&"YYYY-MM-DDTHH:mm:ssZ"!=h?void 0:O.call(this,new Date(this._arg))}function k(e,t,a,o){var i="";if(o&&e++,a&&(i=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(e)),t){e=e.toString();for(var r=1;r<t;r++)e.length<=r&&(e="0"+e)}return e+i}function R(e){var t,a=C(L(e)),o={},i=this.toDate(),r=this.split_date(i),n=function(){return new Date(i.getTime()+1e3*(i.getTimezoneOffset()-r.timezone)*60)}.bind(this);e=function(e,t){for(var a=0,o=0;o<t.length;o++)e=e.slice(0,t[o].index+a)+t[o].format.val+h+e.slice(t[o].index+a+t[o].format.val.length),a+=10;return e}(e.replace(/{{|}}/g,""),a);for(var s=0;s<a.length;s++){var l=a[s].format;switch(l.type){case"date":e=e.replace(l.val+h,k(l.year?D(r.month-1,_(r.year),r.date):r.date,l.len,l.suff));break;case"month":e=l.str?e.replace(l.val+h,l.array[r.month-1]):e.replace(l.val+h,k(r.month,l.len,l.suff));break;case"year":e=e.replace(l.val+h,2==l.len?k(r.year%100,2):4==(r.year+"").length?r.year:k(r.year,4)),o.year=o.year||[],o.year.push(l);break;case"day":case"week":o.flag=!0,o[l.type]=o[l.type]||[],o[l.type].push(l);break;case"quarter":e=e.replace(l.val+h,k(Math.ceil(r.month/3),null,l.suff));break;case"longdate":var d=(t=t||n()).getDay();e=l.str?e.replace(l.val+h,l.array[d]):e.replace(l.val+h,k(d,null,l.suff));break;case"hour":var c=r.hour;e=e.replace(l.val+h,k(l.railway?c:c>12?c%12:c||12,l.len,null,l.deduct));break;case"minute":e=e.replace(l.val+h,k(r.minute,l.len));break;case"second":e=e.replace(l.val+h,k(r.second,l.len));break;case"millisecond":e=e.replace(l.val+h,k(i.getMilliseconds(),3)).replace(/\\S+/,"");break;case"timezone":var u="";if(!l.str){var f=r.timezone,y=(c=k(Math.abs(parseInt(f/60)),2),k(Math.abs(f%60),2)),m=f<=0?"+":"-";u="ZZ"==l.val?m+c+y:m+c+":"+y}e=e.replace(l.val+h,u);break;case"timestamp":u="","X"==l.val?u+=parseInt(i.getTime()/1e3):u+=i.getTime(),e=e.replace(l.val+h,u);break;case"meridian":var g=r.meridian;l.lower&&(g=g.toLowerCase()),e=e.replace(l.val+h,g)}}if(o.flag){var v=E(t=t||n());if(o.week)for(var b=0;b<o.week.length;b++){var P=o.week[b],w=E(t,P.ignore);e=e.replace(P.val+h,(0==P.pref?"":p)+k(w.week,P.len,P.suff))}if(o.day)for(b=0;b<o.day.length;b++)e=e.replace(o.day[b].val+h,v.day-(o.day[b].local?1:0));if(v.repYear&&o.year)for(b=0;b<o.year.length;b++)e=e.replace(2==o.year[b].len?r.year%100:r.year,(2==o.year[b].len?r.year%100:r.year)-1)}return e.replace(/{{|}}/g,"")}function O(e,t){var a=e.constructor;if(a==Date||a==(new Date).constructor)return this._dateObj=e,this._isMoment=!0,"Invalid Date"!=e.toString();if("string"==typeof e){if(t){var o=$.call(this,e,t);return o&&this._isCorrectFormat&&(this._format=t),o}if(this.constructFormat)return O.call(this,e,this.constructFormat.call(this,e));console.warn("Its not supported in lyte-moment-basic.js. Add lyte-moment-additional.js for format construction")}else{if(Array.isArray(e))return O.call(this,new Date(Date.parse(Date.apply(Date,a))).getTime());if("number"==typeof e)return e*=/^\d{10}$/.test(e)?1e3:1,O.call(this,new Date(e));if(e._isMoment)return this.name_space=e.name_space,this.dls_check_map=e.dls_check_map,O.call(this,e._dateObj.getTime())}}function F(e,t,a){a=a||"short";var o=e.getTime()+"_"+t+"_"+a;return o==this.name_space?this.dls_check_map:(this.name_space=o,this.dls_check_map=e.toLocaleString("en-US",{timeZone:t,timeZoneName:a}))}!function(){try{(new Date).toLocaleString("en-US",{timeZone:"Europe/London"})}catch(e){o=!0}}(),b.prototype={isDef:P,find:T,totdate:D,isLeap:_,dayArr:d,getDObj:function(){var e=this._dateObj,t=this._timezone;if(t){if(!this.is_IE)return new Date(F.call(this,e,t));e.setMinutes(e.getMinutes()+e.getTimezoneOffset()-this.timezoneOffset(e))}return e},getWeekReverse:E,weekShort:l,weekMid:s,weekLong:n,longMon:r,shortMon:i,week:p,crctLength:k,formats:g,replace:w,inbuiltFormats:{},getCorrectYear:M,parseFormat:C,replaceTxt:L,is_IE:o,convertTimeZone:S,validate:function(){return!!this._isValid},toDate:function(){return this._dateObj},isSame:function(e){return!!(this.validate()&&e&&e._isMoment&&e._isValid)&&this._dateObj.getTime()==e._dateObj.getTime()},format:function(e){if(this.validate())return e=this.inbuiltFormats[e]||e||"YYYY-MM-DDTHH:mm:ssZ",R.call(this,e)},utc:function(e){return this.timezone("UTC")},local:function(e){return this.timezone(void 0)},timezone:function(e,t){return this._timezone=e,P(t)&&(y[e]="string"==typeof t?-S(t.match(/(\+|\-)(\d{2}):(\d{2})$/)):t,this.is_IE=!0),this},getCurrentTimeZone:function(){return this._timezone},parseDate:function(e,t,a){var o=e.match(/(\d+)\/(\d+)\/(\d+),\s(\d+):(\d+):(\d+)\s(AM|PM)/),i={},r=/GMT(\+|-)(\d+):(\d+):(\d+)$/,n=/GMT(\+|-)(\d+):(\d+)$/,s=/GMT(\+|-)(\d+)$/,l=/\s([A-Z]+)$/;["month","date","year","hour","minute","second"].forEach((function(e,t){i[e]=parseInt(o[t+1])})),i.meridian=o[7];var d=i.hour,p={ACDT:"GMT+10:30",ACST:"GMT+9:30",ACT:"GMT-5",ACWST:"GMT+8:45",ADT:"GMT-3",AEDT:"GMT+11",AEST:"GMT+10",AFT:"GMT+4:30",AKDT:"GMT-8",AKST:"GMT-9",AMST:"GMT-3",AMT:"GMT+4",ART:"GMT-3",AST:"GMT+3",AT:"GMT-4/GMT-3",AWST:"GMT+8",AZOST:"GMT+0",AZOT:"GMT-1",AZT:"GMT+4",BDT:"GMT+8",BIT:"GMT-12",BNT:"GMT+8",BOT:"GMT-4",BRST:"GMT-2",BRT:"GMT-3",BST:"GMT+11",BTT:"GMT+6",CAT:"GMT+2",CCT:"GMT+6:30",CDT:"GMT-4",CEST:"GMT+2",CET:"GMT+1",CHADT:"GMT+13:45",CHAST:"GMT+12:45",CHOST:"GMT+9",CHOT:"GMT+8",CHST:"GMT+10",CHUT:"GMT+10",CIST:"GMT-8",CIT:"GMT+8",CKT:"GMT-10",CLST:"GMT-3",CLT:"GMT-4",COST:"GMT-4",COT:"GMT-5",CST:"GMT+8",CT:"GMT-6/GMT-5",CVT:"GMT-1",CWST:"GMT+8:45",CXT:"GMT+7",DAVT:"GMT+7",DDUT:"GMT+10",EASST:"GMT-5",EAST:"GMT-6",EAT:"GMT+3",ECT:"GMT-5",EDT:"GMT-4",EEST:"GMT+3",EET:"GMT+2",EGST:"GMT+0",EGT:"GMT-1",EIT:"GMT+9",EST:"GMT-5",ET:"GMT-5/GMT-4",FET:"GMT+3",FJT:"GMT+12",FKST:"GMT-3",FKT:"GMT-4",FNT:"GMT-2",GALT:"GMT-6",GAMT:"GMT-9",GET:"GMT+4",GFT:"GMT-3",GILT:"GMT+12",GIT:"GMT-9",GMT:"GMT+0",GST:"GMT-2",GYT:"GMT-4",HADT:"GMT-9",HAST:"GMT-10",HKT:"GMT+8",HMT:"GMT+5",HOVST:"GMT+8",HOVT:"GMT+7",ICT:"GMT+7",IDT:"GMT+3",IOT:"GMT+6",IRDT:"GMT+4:30",IRKT:"GMT+8",IRST:"GMT+3:30",IST:"GMT+2",JST:"GMT+9",KGT:"GMT+6",KOST:"GMT+11",KRAT:"GMT+7",KST:"GMT+9",LHDT:"GMT+11",LHST:"GMT+10:30",LINT:"GMT+14",MAGT:"GMT+11",MART:"GMT-9:30",MAWT:"GMT+5",MDT:"GMT-6",MHT:"GMT+12",MIST:"GMT+11",MIT:"GMT-9:30",MMT:"GMT+6:30",MSK:"GMT+3",MST:"GMT+8",MT:"GMT-7/GMT-6",MUT:"GMT+4",MVT:"GMT+5",MYT:"GMT+8",NCT:"GMT+11",NDT:"GMT-2:30",NFT:"GMT+11",NPT:"GMT+5:45",NRT:"GMT+12",NST:"GMT-3:30",NT:"GMT-3:30",NUT:"GMT-11",NZDT:"GMT+13",NZST:"GMT+12",OMST:"GMT+6",ORAT:"GMT+5",PDT:"GMT-7",PET:"GMT-5",PETT:"GMT+12",PGT:"GMT+10",PHOT:"GMT+13",PhST:"GMT+8",PHT:"GMT+8",PKT:"GMT+5",PMDT:"GMT-2",PMST:"GMT-3",PONT:"GMT+11",PST:"GMT-8",PT:"GMT-8/GMT-7",PWT:"GMT+9",PYST:"GMT-3",PYT:"GMT-4",RET:"GMT+4",ROTT:"GMT-3",SAKT:"GMT+11",SAMT:"GMT+4",SAST:"GMT+2",SBT:"GMT+11",SCT:"GMT+4",SGT:"GMT+8",SLST:"GMT+5:30",SRET:"GMT+11",SRT:"GMT-3",SST:"GMT-11",SYOT:"GMT+3",TAHT:"GMT-10",TFT:"GMT+5",THA:"GMT+7",TJT:"GMT+5",TKT:"GMT+13",TLT:"GMT+9",TMT:"GMT+5",TOT:"GMT+13",TRT:"GMT+3",TVT:"GMT+12",ULAST:"GMT+9",ULAT:"GMT+8",USZ1:"GMT+2",UTC:"GMT+0",UYST:"GMT-2",UYT:"GMT-3",UZT:"GMT+5",VET:"GMT-4",VLAT:"GMT+10",VOLT:"GMT+4",VOST:"GMT+6",VUT:"GMT+11",WAKT:"GMT+12",WAST:"GMT+2",WAT:"GMT+1",WEST:"GMT+1",WET:"GMT+0",WFT:"GMT+12",WGST:"GMT-2",WIB:"GMT+7",WIT:"GMT+9",WST:"GMT+8",YAKT:"GMT+9",YEKT:"GMT+5"},c=this;return"PM"==o[7]?12!=d&&(i.hour+=12):12==d&&(i.hour=0),function e(o,d,h){if(r.test(o)){var u=o.match(r);i.timezone=(60*parseInt(u[2])+parseInt(u[3]))*("-"==u[1]?1:-1)}else if(n.test(o))u=o.match(n),i.timezone=(60*parseInt(u[2])+parseInt(u[3]))*("-"==u[1]?1:-1);else if(s.test(o))u=o.match(s),i.timezone=60*parseInt(u[2])*("-"==u[1]?1:-1);else if(d){if(h){var f=y[h];if(f){var m="GMT";return f>0&&(m+="+"),e(m+=parseInt(f/60)+":"+Math.abs(f%60),!0)}}i.timezone=0}else if(l.test(o)){var g=o.match(l)[1],v={AMT:{"Amazon Time":"GMT-4","Armenia Time":"GMT+4"},AST:{"Atlantic Standard Time":"GMT-4","Arabia Standard Time":"GMT+3"},BST:{"British Summer Time":"GMT+1","Bangladesh Standard Time":"GMT+6","Bougainville Standard Time":"GMT+11"},CDT:{"Central Daylight Time":"GMT-5","Cuba Daylight Time":"GMT-4"},CST:{"Central Standard Time":"GMT-6","Cuba Standard Time":"GMT-5","China Standard Time":"GMT+8"},GST:{"Gulf Standard Time":"GMT+4","South Georgia Time":"GMT-2"},IST:{"Indian Standard Time":"GMT+5:30","Irish Standard Time":"GMT+1","Israel Standard Time":"GMT+2"},MST:{"Mountain Standard Time":"GMT-7","Malaysia Standard Time":"GMT+8"},WGST:{"West Greenland Time":"GMT-3","West Greenland Summer Time":"GMT-2"}}[g],b=p[g];if(v){var P=F.call(c,t,a,"long");for(var D in v)if(-1!=P.indexOf(D)){b=v[D];break}}else b?-1!=["AT","CT","ET","MT","PT"].indexOf(g)&&(b=b.replace(/\/(.+)/,"")):(b=F.call(c,t,a,"long"),h=g);e(b,!0,h)}}(e),i},split_date:function(e){if(this.is_IE){var t=this.getDObj(),a=t.getHours();return{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate(),hour:a,minute:t.getMinutes(),second:t.getSeconds(),meridian:a>11?"PM":"AM",timezone:this.timezoneOffset(e)}}try{var o=F.call(this,e,this._timezone);return this.parseDate(o,e,this._timezone)}catch(t){return this.is_IE=!0,this.split_date(e)}},timezoneOffset:function(e){if(P(this._timezone)){if(this.is_IE){var t=y[this._timezone];return-(P(t)?t:this._timezone)}return this.split_date(e).timezone}return this.validate()?this.toDate().getTimezoneOffset():(new Date).getTimezoneOffset()},utcOffset:function(e){if(this._isValid)return this.timezoneOffset(this.toDate())}},$L.moment=function(e,t,a,o){return new b(e,t,a,o)},$L.moment.lyteMoment=b,$L.moment.setLimits=function(e,t){u=e,f=t},$L.moment.setTimezone=function(e,o){t=e,P(o)&&(a=o)},$L.moment.setWod=function(e){c=e}}}(window),function(e){if($L.moment){var t=$L.moment.lyteMoment.prototype,a=[{val:"YYYY-MM-DD",regex:/^(\d{4}-\d{2}-\d{2})/},{val:"GGGG-["+t.week+"]WW-E",regex:new RegExp("^(\\d{4}-"+t.week+"\\d{2}-\\d)")},{val:"GGGG-["+t.week+"]WW",regex:new RegExp("^(\\d{4}-"+t.week+"\\d{2})")},{val:"YYYY-DDD",regex:/^(\d{4}-\d{3})/},{val:"YYYY-MM",regex:/^(\d{4}-\d{2})/},{val:"YYYYMMDD",regex:/^(\d{8})/},{val:"GGGG["+t.week+"]WWE",regex:new RegExp("^(\\d{4}"+t.week+"\\d{2}\\d)")},{val:"GGGG["+t.week+"]WW",regex:new RegExp("^(\\d{4}"+t.week+"\\d{2})")},{val:"YYYYDDD",regex:/^(\d{4}\d{3})/}],o=[{val:"HH:mm:ss.SSSS",regex:/^\d{2}:\d{2}:\d{2}\.[0-9]{1,}$/},{val:"HH:mm:ss,SSSS",regex:/^\d{2}:\d{2}:\d{2},[0-9]{1,}$/},{val:"HH:mm:ss",regex:/^\d{2}:\d{2}:\d{2}$/},{val:"HH:mm",regex:/^\d{2}:\d{2}$/},{val:"HHmmss.SSSS",regex:/^\d{6}\.[0-9]{1,}$/},{val:"HHmmss,SSSS",regex:/^\d{6},[0-9]{1,}$/},{val:"HHmmss",regex:/^\d{6}$/},{val:"HHmm",regex:/^\d{4}$/},{val:"HH",regex:/^\d{2}$/}];function i(e,t){for(var a=this.formats.slice(),o={},i=e,r=new RegExp(this.week+"|G|E","i").test(e),n=0;n<a.length;n++){var s=a[n];if(t==s.time&&s.regex.test(i)&&r==!!s.isWEG&&!this.isDef(o[s.type])){if(s.ignore&&!s.ignore.test(i)){var l=this.dayArr[o.month]||30;if(parseInt(i.match(s.regex)[0])<l)continue}if(s.str)(d=this.find(s.array,i.replace(/(Y|G)+/,"")).mon)&&(e=this.replace(e,d,!1,s.val),o[s.type]=s.array?this.find(s.array,d).index:d);else{var d=i.match(s.regex)[0];e=this.replace(e,s.regex,s.suff,s.val),o[s.type]=parseInt(d),"week"==s.type&&(e=this.replace(e,new RegExp(this.week+"(?=\\["+this.week+")")))}i=i.replace(d,"")}}return e}function r(e,t){for(var a=0;a<e.length;a++)if(e[a].regex.test(t))return e[a]}function n(e){return this.toDate().setFullYear(parseInt(this.getCorrectYear(this.crctLength(Number(this.format("YYYY"))%100,2)))),this}t.additional=!0,$L.extend(t,{inbuiltFormats:{localDatetime:"YYYY-MM-DDTHH:mm",localSecondDatetime:"YYYY-MM-DDTHH:mm:ss",localMillisecondDatetime:"YYYY-MM-DDTHH:mm:ss.SSS",defaultDate:"YYYY-MM-DD",defaultTime:"HH:mm",defaultTimeSecond:"HH:mm:ss",defaultTimeMillisecond:"HH:mm:ss.SSS",defaultWeek:"GGGG-[W]WW",defaultMonth:"YYYY-MM"},get:function(e){if(e)return this[e]()},set:function(e,t){if(e){if(t.constructor==Object){for(var a in t)this[a](t[a]);return this}return this[e](t)}},constructFormat:function(e){var t,n=r.call(this,a,e);return n?e=(t=r.call(this,o,e.replace(n.regex,"")))?n.val+t.val:i.call(this,e.replace(n.regex,n.val),!0):(e=i.call(this,e),e=i.call(this,e,!0)),e},i18N:function(t,a,o){if(this.validate()){1==a?(o=a,a=void 0):1==t&&(o=t,t=void 0),t=t||"YYYY-MM-DDTHH:mm:ssZ";var i=this.parseFormat(this.replaceTxt(t)).reverse();return t=t.replace(/{{|}}/g,""),o&&(o=!!e._lyteUiUtils&&"1"!=_lyteUiUtils.i18n("1")),i.forEach(function(i){var r=i.format,n=r.val,s=this.format(n),l=e._lyteUiUtils?_lyteUiUtils.i18n(s):s,d=i.index;if(o&&!r.str)for(var p=0;p<10;p++)l=l.replace(new RegExp(p,"g"),_lyteUiUtils.i18n(p.toString()));t=t.slice(0,d)+(a?a(s,l,n):l)+t.slice(d+n.length)}.bind(this)),t}}}),new Array({prop:"date",array:[t.weekLong,t.weekShort,t.weekMid]},{prop:"day",array:[t.weekLong,t.weekShort,t.weekMid]},{prop:"month",array:[t.shortMon,t.longMon]},{prop:"year"},{prop:"fullYear"},{prop:"hours"},{prop:"minutes"},{prop:"seconds"},{prop:"milliseconds"},{prop:"UTCMilliseconds"},{prop:"time"}).forEach((function(e){t[e.prop]=function(t){if(this.validate()){var a=this.toDate(),o=e.prop[0].toUpperCase()+e.prop.slice(1);if(this.isDef(t)){if(t.constructor==String)for(var i=0;i<e.array.length;i++){var r=this.find(e.array[i],t);if(r.mon){t=r.index;break}}else t.constructor==Number&&Math.floor(t)!=t&&("year"==e.prop?(e.prop="month",t=Math.round(12*t)):t=Math.round(t));return"day"==e.prop?a.setDate(a.getDate()+(t-a.getDay())):a["set"+o](t),this}return a["get"+o]()}}})),$L.extend(t,{week:function(e){if(this.validate()){var t=this.toDate();return this.isDef(e)?(t.setDate(t.getDate()+7*(e-this.week())),this):this.getWeekReverse(t,1).week}},quarter:function(e){if(this.validate()){var t=this.toDate();return this.isDef(e)?(t.getMonth(),t.setMonth(t.getMonth()+3*(e-this.quarter())),this):Math.ceil(t.getMonth()/3)}},add:function(e,t,a){if(e<0)return this.subtract(Math.abs(e),t,a);if(this.validate()){var o=this.toDate();if(this.isDef(t)){o.getTimezoneOffset();var i=this.set(t,this.get(t)+e);return a?n.call(this,i):i}}},subtract:function(e,t,a){if(e<0)return this.add(Math.abs(e),t,a);if(this.validate()&&(this.toDate(),this.isDef(t))){var o=this.set(t,this.get(t)-e);return a?n.call(this,o):o}},modify:function(e,t,a){if(this.validate())return"month"==t?e>0?function(e){for(var t=parseInt(this.format("DD"));e--;){var a=$L.moment(this).endOf("month"),o=parseInt(a.format("DD")),i=parseInt(a.add(1,"milliseconds").endOf("month").format("DD")),r=Math.max(o,t)-t+Math.min(t,i);this.add(r,"day")}}.call(this,e):function(e){for(var t=parseInt(this.format("DD"));e--;){var a=$L.moment(this).startOf("month"),o=parseInt(this.format("DD")),i=parseInt(a.subtract(1,"milliseconds").format("DD")),r=o+Math.max(0,i-t);this.subtract(r,"day")}}.call(this,Math.abs(e)):this.add(e,t,a),a&&n.call(this,this),this},startOf:function(e){if(this.validate()){var t,a=this.toDate(),o=this.format(),i=Number(o.slice(0,4)),r=Number(o.slice(5,7)),n=Number(o.slice(8,10)),s=Number(o.slice(11,13)),l=Number(o.slice(14,16)),d=Number(o.slice(17,19)),p=a.getMilliseconds(),c=0,h=this.timezoneOffset(a);if("week"==e){var u,f=this.weekLong,y=this.format("dddd"),m=this.wod;c=24*(u=(f.indexOf(y)-m+7)%7)*60*60*1e3,t=!0,e="hour"}switch(e){case"year":t=!0;case"month":t&&(c+=24*this.totdate(r-1,this.isLeap(i))*60*60*1e3),t=!0;case"date":case"day":t&&(c+=24*(n-1)*60*60*1e3),t=!0;case"hour":t&&(c+=60*s*60*1e3),t=!0;case"minute":t&&(c+=60*l*1e3),t=!0;case"second":t&&(c+=1e3*d)}return c&&(a.setTime(a.getTime()-c-p),(u=this.timezoneOffset(a)-h)&&a.setTime(a.getTime()+60*u*1e3)),this}},endOf:function(e){if(this.validate()){this.startOf(e);var t=this.toDate(),a=this.format(),o=Number(a.slice(0,4)),i=Number(a.slice(5,7)),r=(Number(a.slice(8,10)),Number(a.slice(11,13))),n=Number(a.slice(14,16)),s=Number(a.slice(17,19)),l=(t.getMilliseconds(),0),d=this.timezoneOffset(t);switch("week"==e&&(l+=6048e5),e){case"year":l+=24*this.totdate(12,this.isLeap(o))*60*60*1e3;break;case"month":var p=this.isLeap(o);l+=24*(this.totdate(i,p)-this.totdate(i-1,p))*60*60*1e3;break;case"date":case"day":l+=60*(24-r)*60*1e3;break;case"hour":l+=60*(60-n)*1e3;break;case"minute":l+=1e3*(60-s);break;case"second":l+=1e3}if(l){t.setTime(t.getTime()+l-1);var c=this.timezoneOffset(t)-d;c&&t.setTime(t.getTime()+60*c*1e3)}return this}},fromNow:function(e,t){if(this.validate()){var a=$L.moment(e);if(!a.validate())return;var o=this.get("time"),i=a.get("time"),r=parseInt((i-o)/1e3),n={years:{val:27648e3,conv:31536e3},months:{val:2246400,conv:2592e3},days:{val:79200,conv:86400},hours:{val:2700,conv:3600},minutes:{val:44,conv:60},seconds:{val:0,conv:1}},s=t?"conv":"val",l=t?"floor":"round",d=function(e,t){var a,o;for(a in n)if(e>=n[a][s]){val=Math[l](e/n[a].conv),o=val;var i=e-val*n[a].conv;i>0&&d(i,t);break}return t[a]={value:o},{property:a,value:o}},p={past:r<0,timestamp:i-o};return r=Math.abs(r),$L.extend(p,d(r,p))}},isDst:function(){if(this.validate()){var e=$L.moment(this).startOf("day"),t=$L.moment(this).endOf("day");return this.__start=e,this.__end=t,e.format("Z")!=t.format("Z")}return!1},dstPoint:function(e,t){if(this.validate()&&this.isDst()){var a,o,i=$L.moment(this.__start),r=i.format("Z"),n=0;for(o=1440/(t=t||30),e=e||"HH:mm:ss";n<o;){var s=i.add(t,"minutes").format("Z"),l=/(\+|\-)(\d{2}):(\d{2})$/;if(r!=s){var d=this.convertTimeZone(r.match(l))-this.convertTimeZone(s.match(l));a={moment:$L.moment(i).subtract(1,"seconds"),time:i.add(1,"day").subtract(d,"minutes").format(e),value:d,timeZoneOld:r,timeZoneNew:s};break}n++}return a}},getWeekDays:function(e,t){if(this.validate()){(t=null==t?5:t)<(e=null==e?1:e)&&(t+=7);for(var a=this.getDObj(),o=a.getTime(),i=[],r=t-e,n=a.getDay()-e,s=0;s<=r;s++)i.push($L.moment(new Date(o-864e5*(n-s))));return i}}})}}(window),Lyte.Component.register("lyte-calendar",{_template:'<template tag-name="lyte-calendar"> <div class="{{containerClass}}" ontouchstart="{{action(\'record\',event)}}" ontouchend="{{action(\'decide\',event)}}"> <div class="lyteCalendarView"> <div> <template is="if" value="{{navYield}}"><template case="true"> <lyte-yield yield-name="navigator"></lyte-yield> </template><template case="false"> <div class="lyteCalendarNavigator"> <template is="if" value="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <template is="if" value="{{ltPropYear}}"><template case="true"> <span role="button" tabindex="0" class="lyteCalNav lyteCalyearNavLft" onclick="{{action(\'previous\',\'Y\',event)}}" onkeydown="{{action(\'previousOnKeys\',\'Y\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.previous.year\')}}</span> </span> </template></template> </template></template> <span role="button" class="lyteCalNav lyteCaldLft {{lyteUiDisableCalendarNav(viewDate,\'previous\')}}" tabindex="0" onclick="{{action(\'previous\',\'M\',event)}}" onkeydown="{{action(\'previousOnKeys\',\'M\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.previous.month\')}}</span> </span> <span id="{{monthDropdownId}}" class="lyteVisuallyHidden">{{lyteUiI18n("lyte.calendar.choose.month")}}</span> <span id="{{yearDropdownId}}" class="lyteVisuallyHidden">{{lyteUiI18n("lyte.calendar.choose.year")}}</span> <span class="lyteVisuallyHidden" aria-live="polite" id="{{headerId}}"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <span>{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span><span>{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span>{{currentYear}}</span> </template><template case="false"> <span>{{decadeStart}} - {{decadeEnd}}</span> </template></template></template></template> </span> <span class="lyteCalsCalMon"> <template is="if" value="{{expHandlers(expHandlers(ltPropHeaderType,\'===\',\'dropdown\'),\'||\',expHandlers(ltPropHeaderType,\'===\',\'picklist\'))}}"><template case="true"> <lyte-dropdown lt-prop-aria-button="{{monthAriaObj}}" lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalMonthDD" on-option-selected="{{method(\'optionSelected\',\'M\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box tabindex="0"> <lyte-drop-body> <template is="for" items="{{monthNames}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'dropdown\')}}"><template case="true"> <lyte-dropdown lt-prop-aria-button="{{yearAriaObj}}" lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalYearDD" on-option-selected="{{method(\'optionSelected\',\'Y\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box tabindex="0"> <lyte-drop-body> <template is="for" items="{{years}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <lyte-picklist lt-prop-options="{{years}}" lt-prop-dropdown="{&quot;freeze&quot;: false, &quot;callout&quot;: true, &quot;tabindex&quot;: 2}" class="lyteCalYearDD" on-option-select="{{method(\'optionSelected\',\'Y\')}}" on-show="{{method(\'setClass\')}}"> </lyte-picklist> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'drilldown\')}}"><template case="true"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <span aria-label="{{lyteUiI18n(\'lyte.calendar.monthview.drilldown.button\')}}" tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToMonthView\',event)}}" onkeydown="{{action(\'changeToMonthViewOnKeys\',event)}}"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span aria-label="{{lyteUiI18n(\'lyte.calendar.decadeview.drilldown.button\')}}" tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToDecadeView\',event)}}" onkeydown="{{action(\'changeToDecadeViewOnKeys\',event)}}"> <span class="lyteCalsCalYear">{{currentYear}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader"> {{decadeStart}} - {{decadeEnd}} </span> </template></template></template></template></template></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelectionType,\'===\',\'month\'),\'||\',expHandlers(ltPropSelectionType,\'===\',\'year\'))}}"><template case="true"> <template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span> <span class="lyteCalsCalYear">{{currentYear}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader"> {{decadeStart}} - {{decadeEnd}} </span> </template></template></template></template> </template><template case="false"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </template></template></template></template></template></template> </span> <span role="button" class="lyteCalNav lyteCaldRgt {{lyteUiDisableCalendarNav(viewDate,\'next\')}}" tabindex="0" onkeydown="{{action(\'nextOnKeys\',\'M\',event)}}" onclick="{{action(\'next\',\'M\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.next.month\')}}</span> </span> <template is="if" value="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <template is="if" value="{{ltPropYear}}"><template case="true"> <span role="button" class="lyteCalNav lyteCalyearNavRgt" tabindex="0" onkeydown="{{action(\'nextOnKeys\',\'Y\',event)}}" onclick="{{action(\'next\',\'Y\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.next.year\')}}</span> </span> </template></template> </template></template> </div> </template></template> </div> <div class="lyteCalTableContainer" role="grid"> <template is="if" value="{{ltPropBodyYield}}"><template case="true"> <lyte-yield yield-name="body"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <div role="row" class="lyteCalTableRowHeader"> <template is="for" items="{{daysOfWeek}}" item="day" index="idod"> <div role="columnheader" aria-label="{{day.title}}" class="lyteCalTableCellHeader" id="{{day.id}}">{{lyteUiI18n(day.day)}}</div> </template> </div> </template></template> <div class="lyteCalTableRowGroup"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <template is="for" items="{{matrix}}" item="vector" index="rowid"> <template is="if" value="{{expHandlers(lyteUiCheckEmpty(vector),\'!\')}}"><template case="true"> <div class="lyteCalTableRow" role="row"> <template is="for" items="{{vector}}" item="date" index="cellid"> <template is="if" value="{{expHandlers(lyteUiCheckInRange(ltPropMinDate,ltPropMaxDate,date.val,ltPropFormat),\'&amp;&amp;\',expHandlers(lyteUiDisabledDates(date,ltPropDisabledDates),\'!\'))}}"><template case="true"> <template is="if" value="{{date.emptyBlock}}"><template case="true"> <div role="gridcell" class="lyteCalEmpty" data-selectable="false"></div> </template><template case="false"> <div role="gridcell" tabindex="-1" id="{{date.id}}" aria-labelledby="{{concat(date.id,\' \',headerId,\' \',daysOfWeek[cellid][\'id\'])}}" onkeydown="{{action(\'performNavigation\',event)}}" onclick="{{action(\'dateSelected\',event)}}" class="{{date.clsname}}" data-date="{{date.val}}" data-selectable="true"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template></template> </template><template case="false"> <template is="if" value="{{date.emptyBlock}}"><template case="true"> <div role="gridcell" class="lyteCalEmpty" data-selectable="false"></div> </template><template case="false"> <div role="gridcell" tabindex="-1" id="{{date.id}}" aria-labelledby="{{concat(date.id,\' \',headerId,\' \',daysOfWeek[cellid][\'id\'])}}" aria-disabled="true" onkeydown="{{action(\'performNavigation\',event)}}" data-date="{{date.val}}" class="{{date.clsname}}" data-selectable="false"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template></template> </template></template> </template> </div> </template></template> </template> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <template is="for" items="{{monthViewData}}" item="row" index="rowIndex"> <div class="lyteCalTableRow"> <template is="for" items="{{row}}" item="column" index="columnIndex"> <div aria-label="{{lyteUiI18n(lyteUiGetLinearIndex(ariaMonthNames,rowIndex,columnIndex))}}" role="gridcell" tabindex="-1" onkeydown="{{action(\'performNavigation\',event)}}" onclick="{{action(\'monthSelected\',event)}}" class="{{column[\'class\']}}" data-date="{{column[\'systemValue\']}}"> {{column[\'displayValue\']}} </div> </template> </div> </template> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <template is="for" items="{{decadeViewData}}" item="row" index="rowIndex"> <div class="lyteCalTableRow"> <template is="for" items="{{row}}" item="column" index="columnIndex"> <template is="if" value="{{expHandlers(column.emptyBlock,\'!\')}}"><template case="true"> <div role="gridcell" tabindex="-1" onkeydown="{{action(\'performNavigation\',event)}}" onclick="{{action(\'yearSelected\',event)}}" class="lyteCalTableCell {{column.class}}" data-date="{{column.year}}"> {{column.year}} </div> </template><template case="false"> <div role="gridcell" class="lyteCalEmpty"> </div> </template></template> </template> </div> </template> </template></template></template></template></template></template> </div> </template></template> </div> <div> <div class="lyteCalBtns"> <template is="if" value="{{expHandlers(showToday,\'&amp;&amp;\',ltPropShowToday)}}"><template case="true"> <p role="button" tabindex="0" onkeydown="{{action(\'todayOnKey\',event)}}" class="lyteCalCurrentDate"><a onclick="{{action(\'today\',event)}}">{{lyteUiI18n(\'today\')}}</a></p> </template></template> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="footer"></lyte-yield> </template></template> </div> </div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"text",position:[1,3,1,0]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,0]},{type:"attr",position:[1,7]},{type:"text",position:[1,7,0]},{type:"attr",position:[1,9]},{type:"attr",position:[1,9,1]},{type:"if",position:[1,9,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,11,1]},{type:"if",position:[1,11,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,13]},{type:"text",position:[1,13,1,0]},{type:"attr",position:[1,15]},{type:"if",position:[1,15],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}]}},default:{}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]}},default:{}}]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5,1,1]},{type:"if",position:[1,1,5,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]}]}},default:{}},{type:"attr",position:[1,1,5,1,3]},{type:"if",position:[1,1,5,1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_observedAttributes:["ltPropStartDate","ltPropEndDate","ltPropCurrentDate","ltPropFormat","ltPropYear","ltPropMonthHeaderFormat","daysOfWeek","ariaMonthNames","monthSystemValues","monthNames","shortHands","todayName","viewDate","changeData","ltPropYield","ltPropMinDate","ltPropMaxDate","ltPropStartWeekDay","navYield","selectDate","currentDatechanged","ltPropFillRows","ltPropNumberOfRows","callFrmDidcnct","monthDD","yearDD","years","ltPropHeaderType","ltPropDropdown","cords","start","prev","tt","showToday","monthViewTableArray","ltPropBodyYield","ltPropShowToday","ltPropI18n","ltPropActivateNavigation","ltPropDisableNavigation","ltPropPreventAddingRows","ltPropSelectionType","ltPropWeekends","ltPropCurrentWeek","ltPropCurrentMonth","ltPropCurrentYear","ltPropDisabledDates","ltPropCurrentDates","ltPropMultiple","headerId","monthDropdownId","yearDropdownId","ltPropIso"],data:function(){return{ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropFormat:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","format","MM/DD/YYYY")}),ltPropYear:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","year",!0)}),ltPropMonthHeaderFormat:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","monthHeaderFormat","MMMM YYYY")}),daysOfWeek:Lyte.attr("array",{default:[]}),ariaMonthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),monthSystemValues:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),monthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),shortHands:Lyte.attr("array",{default:["Jan","Feb","Mar","Apr","short.may","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),todayName:Lyte.attr("string",{default:"Today"}),viewDate:Lyte.attr("object",{default:{}}),changeData:Lyte.attr("number",{default:0}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropMinDate:Lyte.attr("string",{default:""}),ltPropMaxDate:Lyte.attr("string",{default:""}),ltPropStartWeekDay:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","startWeekDay",1)}),navYield:Lyte.attr("boolean",{default:!1}),selectDate:Lyte.attr("boolean",{default:!0}),currentDatechanged:Lyte.attr("number",{default:0}),ltPropFillRows:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","fillRows",!0)}),ltPropNumberOfRows:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","numberOfRows",6)}),callFrmDidcnct:Lyte.attr("boolean",{default:!1}),monthDD:Lyte.attr("object"),yearDD:Lyte.attr("object"),years:Lyte.attr("array",{default:[]}),ltPropHeaderType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","headerType","default")}),ltPropDropdown:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","dropdown",{callout:!0})}),cords:Lyte.attr("object",{default:{}}),start:Lyte.attr("number"),prev:Lyte.attr("boolean"),tt:Lyte.attr("boolean",{default:!0}),showToday:Lyte.attr("boolean",{default:!0}),monthViewTableArray:Lyte.attr("array",{default:[]}),ltPropBodyYield:Lyte.attr("boolean",{default:!1}),ltPropShowToday:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","showToday",!0)}),ltPropI18n:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","I18n",!1)}),ltPropActivateNavigation:Lyte.attr("boolean",{default:!1}),ltPropDisableNavigation:Lyte.attr("boolean",{default:!1}),ltPropPreventAddingRows:Lyte.attr("boolean",{default:!1}),ltPropSelectionType:Lyte.attr("string",{default:"day"}),ltPropWeekends:Lyte.attr("array",{default:[6,0]}),ltPropCurrentWeek:Lyte.attr("array",{default:[]}),ltPropCurrentMonth:Lyte.attr("string",{default:""}),ltPropCurrentYear:Lyte.attr("string",{default:""}),ltPropDisabledDates:Lyte.attr("array",{default:[]}),ltPropCurrentDates:Lyte.attr("array",{default:[]}),ltPropMultiple:Lyte.attr("boolean",{default:!1}),headerId:Lyte.attr("string"),monthDropdownId:Lyte.attr("string"),yearDropdownId:Lyte.attr("string"),ltPropIso:Lyte.attr("string")}},getCells:function(){var e=this.getTableContainer().children,t=[];return Array.from(e).forEach((function(e){t=t.concat(Array.from(e.children))})),t},getTableContainer:function(){return this.$node.querySelector(".lyteCalTableRowGroup")},moveForward:function(e,t,a){this.move(e,t,a)},moveBackward:function(e,t,a){this.move(e,t,a)},move:function(e,t,a){var o,i=this.getActiveCell(),r=this.getCells(),n=r.indexOf(i),s=n+a;i&&(o=this.shouldViewChange(r,s,a)?this.getCellFromDifferentView(t,n,a,e):this.getCellFromSameView(r,s),this.activateCell(o),this.focusActiveCell())},getCellFromSameView:function(e,t){return e[t]},focusActiveCell:function(){var e=this.getActiveCell();e&&e.focus()},shouldViewChange:function(e,t,a){var o=this.getData("viewType");return"monthView"===o||"decadeView"===o?!e[t]:!this.isSameMonth(a)},isDisabledCell:function(e){return e.classList.contains("lyteCalDisabled")},getCellFromDifferentView:function(e,t,a,o){var i,r=this.getData("viewType");return"monthView"===r||"decadeView"===r?(this.changeView(e),this.getDrillDownViewCell(e,t,a)):(i=this.getChangedDate(a),this.changeView(e),this.getCell(i))},getDrillDownViewCell:function(e,t,a){var o=this.getCells();return"previous"===e?o[o.length+(t+a)]:o[(t+a)%o.length]},changeView:function(e){"previous"===e?this.moveToPrevious("M",event):this.moveToNext("M",event)},moveToFirstCell:function(e,t){var a=this.getCellsToMove(t,"home");this.moveBackward(e,t,a)},moveToLastCell:function(e,t){var a=this.getCellsToMove(t,"end");this.moveForward(e,t,a)},getCellsToMove:function(e,t){var a=this.getActiveCell(),o=(a||{}).parentElement,i=Array.from((o||{}).children||[]),r=i.indexOf(a),n=this.getData("viewType");return a?"home"===t||"end"===t?"previous"===e?-r:i.length-1-r:"monthView"===n||"decadeView"===n?"previous"===e?-4:4:"previous"===e?-7:7:0},getCell:function(e){return this.$node.querySelector('[data-date="'+e+'"]')},isSameMonth:function(e){return this.getChangedMonth(e)===this.getData("viewDate").getMonth()},getChangedMonth:function(e){var t=this.getChangedDate(e),a=this.getData("ltPropFormat");return $L.moment(t,a).format("M")-1},getChangedDate:function(e){var t=this.getActiveCell().getAttribute("data-date"),a=this.getData("ltPropFormat");return $L.moment(t,a).add(e,"day").format(a)},previousNavigation:function(e,t){var a=t.shiftKey?"Y":"M";this.moveToPrevious(a,t),this.focusActiveCell()},nextNavigation:function(e,t){var a=t.shiftKey?"Y":"M";this.moveToNext(a,t),this.focusActiveCell()},toDate:function(){return this.isHavingTimezone?new Date($L.moment().format("MM/DD/YYYY")):new Date},moment:function(e,t,a){var o=this.isHavingTimezone;return o?(a?a.ignore_timezone=o:a={ignore_timezone:o},$L.moment(e,t,a)):t?a?$L.moment(e,t,a):$L.moment(e,t):$L.moment(e)},changeBodyContainerClass:function(){var e=this.$node.querySelector(".lyteCalTableContainer"),t=this.getData("viewType"),a=this.getData("ltPropSelectionType");this.isDrilldown()?"dateView"===t?(e.classList.remove("lyteDrillCalMonthView"),e.classList.remove("lyteDrillCalYearView")):"monthView"===t?(e.classList.add("lyteDrillCalMonthView"),e.classList.remove("lyteDrillCalYearView")):"decadeView"===t&&(e.classList.remove("lyteDrillCalMonthView"),e.classList.add("lyteDrillCalYearView")):(this.removeSelectionStyles(),"day"===a?e.classList.add("lyteCalDaySelType"):"week"===a?e.classList.add("lyteCalWeekSelType"):"month"===a?e.classList.add("lyteCalMonthSelType"):e.classList.add("lyteCalYearSelType"))}.observes("viewType").on("didConnect"),removeSelectionStyles:function(){var e=this.$node.querySelector(".lyteCalTableContainer");e.classList.remove("lyteCalDaySelType"),e.classList.remove("lyteCalWeekSelType"),e.classList.remove("lyteCalMonthSelType"),e.classList.remove("lyteCalYearSelType")},changeDaysOfWeek:function(){var e,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=this.getData("ltPropStartWeekDay"),i=[];for(e=0;e<7;e++)i.push({day:t[(e+o)%7],id:this.generateRandomId(),title:a[(e+o)%7]});this.setData("daysOfWeek",i)},generateRandomId:function(){return"Lyte_Calendar_Day_"+_lyteUiUtils.calId++},isYYFormat:function(){var e=this.getData("ltPropFormat");return/\byy\b/gi.test(e)},outsideBoundary:function(e){var t=e.getFullYear()-this.toDate().getFullYear(),a=this.isMomentSupported?$L.moment():{uL:19,lL:80};return t>a.uL||t<-a.lL||void 0},didDestroy:function(){delete this.$node.revertToToday},activateNavigation:function(){this.getData("ltPropActivateNavigation")&&(this.activateRelevantCell(),this.setData("ltPropActivateNavigation",!1))}.observes("ltPropActivateNavigation"),activateRelevantCell:function(){var e,t=this.getData("ltPropFormat"),a=this.stringToDate(this.getData("ltPropCurrentDate"),t),o=new Date,i=this.stringToDate(this.getData("previousActiveCellDate"),t);"Invalid Date"!==i&&(e=this.findSimilarCell(i)),"Invalid Date"!==a&&(e=e||this.findSimilarCell(a)),e=e||this.findSimilarCell(o),this.activateCell(e)},findSimilarCell:function(e){var t,a,o=e.getDate(),i=this.getData("viewDate"),r=i.getMonth(),n=i.getFullYear(),s=(e.getMonth(),this.getNumber(r,n)),l=this.getData("ltPropFormat");return t=new Date(r+1+"/"+(o>s?s:o)+"/"+n),a=this.getDateFromFormat(t,l),this.getCell(a)},activateCell:function(e){if(e){var t=this.$node.querySelector(".lyteCalNavCell");t&&(t.classList.remove("lyteCalNavCell"),t.setAttribute("tabindex","-1")),e.setAttribute("tabindex","0"),e.focus(),e.classList.add("lyteCalNavCell"),this.setData("previousActiveCellDate",e.getAttribute("data-date"))}},getActiveCell:function(){return this.$node.querySelector(".lyteCalNavCell")},setMonthAndYearDropdown:function(){if(!this.getData("navYield")&&this.isDropdownHeader()&&this.getData("monthDD")&&this.getData("yearDD")){var e,t=this.getData("monthHeader").split(" "),a=this.getData("ltPropMonthHeaderFormat"),o=[];if("callFrmDidcnct"==arguments[0].item){/MMMM YYYY/gi.test(a)?e=this.getData("monthNames"):/MMM YYYY/gi.test(a)&&(e=this.getData("shortHands"));for(var i=0;i<e.length;i++)o[i]=_lyteUiUtils.i18n(e[i]);this.setData("monthNames",o)}this.getData("monthDD").component.setData("ltPropSelected",t[0]),this.getData("yearDD").component.setData("ltPropSelected",t[1])}}.observes("monthHeader","callFrmDidcnct"),startWeekDayObserver:function(){this.changeDaysOfWeek()}.observes("ltPropStartWeekDay"),monthHeaderObserver:function(){this.buildDateViewHeader()}.observes("monthNames.[]"),getMonthHeader:function(){var e,t=this.getData("ltPropMonthHeaderFormat"),a="";return/MMMM YYYY/gi.test(t)?(e=this.getData("monthNames"),a=_lyteUiUtils.i18n(e[this.getData("viewDate").getMonth()])+" "+this.getData("viewDate").getFullYear()):/MMM YYYY/gi.test(t)&&(e=this.getData("shortHands"),a=_lyteUiUtils.i18n(e[this.getData("viewDate").getMonth()])+" "+this.getData("viewDate").getFullYear()),a},revert:function(e){var t=new Date(this.getData("viewDate").getTime()),a=this.toDate();a.setDate(1);var o=new Date(a.getTime());this.setData("viewDate",a),this.setAndBuildView("dateView",e),this.setData("showToday",!1),!this.getMethods("onNavigate")||t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear()||this.executeMethod("onNavigate",e,this.getDateFromFormat(t,this.getData("ltPropFormat")),this.getDateFromFormat(o,this.getData("ltPropFormat")),this)},getDateFromFormat:function(e,t){return this.isMomentSupported?this.getDateStringFromMoment(e,t):this.getDateStringManually(e,t)},getDateStringFromMoment:function(e,t){return t=this.getRelevantFormat(t),this.moment(e).format(t)},resolveConflicts:function(e){var t=/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/.exec(e),a=(t||{}).index,o=(t||[])[0].length||0;return isNaN(a)?e.toUpperCase():e.substring(0,a+o)+(e.substring(a+o)||"").toUpperCase()},isConflictingFormat:function(e){return(e.match(/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/gi)||[]).length>1},getRelevantFormat:function(e){return this.isConflictingFormat(e)?this.resolveConflicts(e):e.toUpperCase()},getDateStringManually:function(e,t){var a,o=e.getDate(),i=e.getFullYear(),r=e.getMonth()+1;return t=t.toUpperCase(),r<10&&(r="0"+r),o<10&&(o="0"+o),/(MMMM|DD|YYYY).+(MMMM|DD|YYYY).+(YYYY|MMMM|DD)/gi.test(t)?(a=["January","February","March","April","May","June","July","August","September","October","November","December"],t=(t=(t=t.replace("MMMM",a[r-1])).replace("DD",o)).replace("YYYY",i)):/(MMM|DD|YYYY).+(MMM|DD|YYYY).+(YYYY|MMM|DD)/gi.test(t)?(a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=(t=(t=t.replace("MMM",a[r-1])).replace("DD",o)).replace("YYYY",i)):(/(YYYY).+(MM).+(DD)/gi.test(t)||/(MM).+(DD).+(YYYY)/gi.test(t)||/(DD).+(MM).+(YYYY)/gi.test(t))&&(t=(t=(t=t.replace("MM",r)).replace("DD",o)).replace("YYYY",i)),t},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getNumber:function(e,t){return this.isLeapYear.call(this,t)&&1==e?29:[31,28,31,30,31,30,31,31,30,31,30,31][e]},showtoday:function(){var e=this.toDate();e.getMonth()!=this.getData("viewDate").getMonth()||e.getYear()!=this.getData("viewDate").getYear()?this.setData("showToday",!0):this.setData("showToday",!1)},reset:function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)},checkDate:function(e){var t,a,o=this.getData("ltPropMinDate")||"",i=this.getData("ltPropMaxDate")||"";if(this.reset(e),""===o&&""===i)return!0;if(""!==o&&""===i){if(t=this.stringToDate(o,this.getData("ltPropFormat")),this.reset(t),e>=t)return!0}else if(""!==o&&""!==i){if(t=this.stringToDate(o,this.getData("ltPropFormat")),this.reset(t),a=this.stringToDate(i,this.getData("ltPropFormat")),this.reset(a),e>=t&&e<=a)return!0}else if(a=this.stringToDate(i,this.getData("ltPropFormat")),this.reset(a),e<=a)return!0;return!1},numberOfRowsChange:function(){var e=this.getData("ltPropNumberOfRows");try{if(e<5)throw"Calendar failed to render. The number of rows should be greater than 4."}catch(e){return void console.error(e)}this.setDatesFunction()}.observes("ltPropNumberOfRows"),setDates:function(e){this.__ignoremin&&"ltPropMinDate"==e.item||this.setDatesFunction()}.observes("ltPropStartDate","ltPropEndDate","changeData","ltPropMinDate","ltPropMaxDate","ltPropFormat","ltPropStartWeekDay"),getNumberOfFirstRowDates:function(e){var t=this.getData("ltPropStartWeekDay");return 0==e?0===t?7:t:e<t?t-e:7-(e-t)},getNumberToSubtract:function(e){var t=this.getData("ltPropStartWeekDay");return 0==e?0==t?0:7-t:e<t?7-(t-e):e-t},getFirstDay:function(e,t){var a;return(a=t-(a=e-7*Math.floor(e/7)-1))<0&&(a=7-a),a},getRemainingDays:function(e,t){return e-t-28},inc:function(e,t){return this.getData("ltPropPreventAddingRows")?t:e>0&&6==t?7:t},setDatesFunction:function(){var e=this.getData("ltPropNumberOfRows"),t=this.getData("ltPropFillRows"),a=(this.getData("ltPropFormat"),!1),o=[],i=this.getData("viewDate"),r=i.getDay(),n=i.getDate(),s=this.getFirstDay(n,r),l=i.getMonth(),d=i.getFullYear(),p=this.getNumber(l,d),c=this.getNumberOfFirstRowDates(s),h=this.getRemainingDays(p,c),u=this.getData("ltPropSelectionType")||"day";e=this.inc(h,e);var f=new Date(l+1+"/1/"+d),y=this.getNumberToSubtract(s);f.setDate(f.getDate()-y);for(var m=this.__ignoremin?i:this.toDate(),g=this.getSelectedDateObj(),v=this.getDisabledDates(),b=0;b<e&&!a;b++){o.push([]);for(var P=0;P<7;P++)if(t||l===f.getMonth())if(t&&this.isYYFormat()&&this.outsideBoundary(f)&&!this.isIso)o[b].push({emptyBlock:!0}),f.setDate(f.getDate()+1),0!=b&&(a=!0);else{var D="lyteCalCdate",_=f.getMonth(),L=new Date(this.getData("viewDate").getTime()).getMonth(),C=f.getDate(),w=f.getYear(),T=this.checkDate(f),x=this.isDisabled(f,v),S=""!==(this.getData("ltPropMinDate")||"")||""!==(this.getData("ltPropMaxDate")||"");L!==_?(D+=" lyteCalDiffMonth",S?T||(D+=" lyteCalDisabled"):D+=" lyteCalGray"):S&&!T&&(D+=" lyteCalDisabled"),x&&(D+=" lyteCalendarDisabledDate"),"day"===u&&this.isSelectedDate(f,g)&&this.getData("selectDate")&&(D+=" lyteCalSel"),"week"===u&&(D+=" "+this.getWeekSelectedClass(f)),m.getMonth()===_&&m.getDate()===C&&m.getYear()===w&&(D+=" lyteCalToday"),this.isWeekend(f)&&(D+=" lyteCalWeekend"),D+=" lyteCalTableCell";var A={};A.date=f.getDate(),A.id=this.generateRandomId(),A.clsname=D,A.val=this.getDateFromFormat.call(this,f,this.getData("ltPropFormat")),o[b].push(A),f.setDate(f.getDate()+1)}else o[b].push({emptyBlock:!0}),f.setDate(f.getDate()+1),0!=b&&(a=!0)}this.setData("matrix",o),this.shouldActivateCell()&&this.activateRelevantCell()},isSelectedDate:function(e,t){return this.getData("ltPropMultiple")?this.isDateInArray(t,e):"nodate"!==t&&"Invalid Date"!==t&&this.isSameDate(e,t)},isDateInArray:function(e,t){e=e||[];for(var a=0;a<e.length;a++)if(this.isSameDate(t,e[a]))return!0},isSameDate:function(e,t){return e.getYear()==t.getYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},getSelectedDateObj:function(){var e=this.getData("ltPropMultiple"),t=this.getData("ltPropCurrentDates");return e?this.getDObjArrayFromStrings(t):this.isIso?this.isoToDate(this.getData("ltPropIso")):this.getData("ltPropCurrentDate")?this.stringToDate(this.getData("ltPropCurrentDate"),this.getData("ltPropFormat")):"nodate"},getDObjArrayFromStrings:function(e){var t=this;return(e=e||[]).map((function(e){return t.stringToDate(e,t.getData("ltPropFormat"))}))},getDisabledDates:function(){var e=this.getData("ltPropDisabledDates");return this.getDObjArrayFromStrings(e)},isDisabled:function(e,t){return this.isDateInArray(t,e)},getWeekSelectedClass:function(e){var t=this.getData("ltPropCurrentWeek")||[],a=t[0]||"",o=t[1]||"",i=this.getData("ltPropFormat");return a=this.stringToDate(a,i),o=this.stringToDate(o,i),"Invalid Date"===a||"InvalidDate"===o||e<a||e>o?"":"lyteCalWeekSel"},isWeekend:function(e){var t=e.getDay();return!!~(this.getData("ltPropWeekends")||[]).indexOf(t)},shouldActivateCell:function(){var e=this.getData("ltPropDisableNavigation"),t=this.isFromCurrentDateObserver;return this.isFromCurrentDateObserver=!1,!e&&!t},executeViewDateChanges:function(){this.getMethods("onViewdateChange")&&this.executeMethod("onViewdateChange",this,this.getData("viewDate"))}.observes("viewDate"),getProperMonth:function(e){var t;return(t={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}[e=e.toLowerCase()]||{january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12}[e])||0===t?t-1:parseFloat(e)-1},isProperDate:function(e,t,a){return a<=this.getNumber(t,e)},getDateObjFromString:function(e,t){try{var a,o,i=e.match(/([\da-z]+)/gi),r=(t=t.toUpperCase()).match(/([a-z]+)/gi),n=this.toDate(),s=0,l=["Y","M","D"];if(n.setDate(1),3!==i.length)return"Invalid Date";for(;s<r.length;){var d=this.getOrderIndex(r,l[s]);if(0==s)n.setFullYear(a=i[d]);else if(1==s){if((o=this.getProperMonth(i[d]))<0||o>11)return"Invalid Date";n.setMonth(o)}else if(2==s){if(!this.isProperDate(a,o,i[d]))return"Invalid Date";n.setDate(i[d])}if("Invalid Date"===n.toString())return n.toString();s++}return n}catch(e){return"Invalid Date"}},getDateObjFromMoment:function(e,t){var a;if(t=this.getRelevantFormat(t),!e)return"Invalid Date";try{a=this.moment(e,t).getDObj()}catch(e){a="Invalid Date"}return"[object Date]"===Object.prototype.toString.call(a)&&isNaN(a.getTime())&&(a="Invalid Date"),a||"Invalid Date"},stringToDate:function(e,t){return e=this.convertToEnglish(e),this.isMomentSupported?this.getDateObjFromMoment(e,t):this.getDateObjFromString(e,t)},findISO:function(){this.isIso=!!this.getData("ltPropIso")},isoToDate:function(e){var t=$L.moment(e).getDObj();return this.data.ltPropCurrentDate=$L.moment(t).format(this.getData("ltPropFormat")),t},convertToEnglish:function(e){var t=this.getData("ltPropI18n"),a=this.getData("ltPropFormat");return t?this.moment(e,a,{i18n:!0}).format(a):e},getEnglishShorthand:function(e){for(var t=this.getShortHands(),a=-1,o=0,i=this.getData("shortHands"),r=0;r<t.length;r++)~e.indexOf(t[r])&&t[r].length>o&&(a=r,o=t[r].length);return-1!==a&&(e=e.replace(t[a],this.getProperShortHand(i[a]))),e},getShortHands:function(){for(var e=this.getData("shortHands"),t=[],a=0;a<e.length;a++)t.push(_lyteUiUtils.i18n(e[a]));return t},getProperShortHand:function(e){return"short.may"===e?"May":e},getEnglishStandard:function(e){for(var t=this.getStandardMonths(),a=this.getData("monthNames"),o=-1,i=0,r=0;r<t.length;r++)~e.indexOf(t[r])&&t[r].length>i&&(o=r,i=t[r].length);return-1!==o&&(e=e.replace(t[o],a[o])),e},getStandardMonths:function(){for(var e=this.getData("monthNames"),t=[],a=0;a<e.length;a++)t.push(_lyteUiUtils.i18n(e[a]));return t},getOrderIndex:function(e,t){for(var a=0;a<e.length;a++)if(e[a].charAt(0)===t)return a;return-1},buildYears:function(){var e,t=[];for(e=1900;e<=2100;e++)t.push(e.toString());this.setData("years",t)},setAndBuildView:function(e,t,a){var o=this.getData("viewType"),i=e;this.setData("viewType",e),"monthView"===e?(this.buildMonthView(),this.setData("showToday",!1)):"decadeView"===e?(this.buildDecadeView(),this.setData("showToday",!1)):"dateView"===e&&this.buildDateView(),a||o===i||this.getMethods("onViewChange")&&this.executeMethod("onViewChange",t,e,this)},buildDateView:function(){this.buildDateViewHeader(),this.buildDateViewContent(),this.showtoday()},buildDateViewHeader:function(){this.setData("monthHeader",this.getMonthHeader())},buildDateViewContent:function(){this.setDatesFunction()},buildMonthView:function(){this.buildMonthViewHeader(),this.buildMonthViewContent(),this.activateCell(this.getActiveCell())},buildMonthViewHeader:function(){var e=this.getData("viewDate").getFullYear();this.setData("currentYear",e)},buildMonthViewContent:function(){for(var e,t,a=this.getData("monthSystemValues"),o=this.getData("shortHands"),i=0,r=[];i<3;i++)for(r.push([]),e=0;e<4;e++)t=4*i+e,r[i].push({displayValue:_lyteUiUtils.i18n(o[t]),systemValue:a[t],class:this.getProperClassForMonthView(t)});this.setData("monthViewData",r)},getProperClassForMonthView:function(e){var t=this.getData("viewDate").getFullYear(),a=this.getCurrentMonth(),o=this.getCurrentYear(),i=this.getData("ltPropFormat"),r=this.stringToDate(this.getData("ltPropCurrentDate"),i),n=this.getData("previousActiveCellDate")||"",s=this.getData("monthSystemValues").indexOf(n),l="lyteCalTableCell",d=this.getData("ltPropCurrentMonth");return l+=o===t&&e===a?" lyteDrillCalCurrentMonth":"",l+=-1!==s?e===s?" lyteCalNavCell":"":"Invalid Date"!==r?e===r.getMonth()?" lyteCalNavCell":"":e===a?" lyteCalNavCell":"",d===(e+1).toString()&&(l+=" lyteCalMonthSel"),l},getCurrentYear:function(){return this.toDate().getFullYear()},getCurrentMonth:function(){return this.toDate().getMonth()},buildDecadeView:function(){this.buildDecadeViewHeader(),this.buildDecadeViewContent(),this.activateCell(this.getActiveCell())},buildDecadeViewHeader:function(){var e=this.getData("viewDate").getFullYear(),t=e-e%10,a=t+9;this.setData("decadeStart",t),this.setData("decadeEnd",a)},buildDecadeViewContent:function(){var e,t,a,o=this.getData("viewDate").getFullYear(),i=o-o%10,r=this.isYYFormat(),n=[];for(e=0;e<3;e++)for(n.push([]),t=0;t<4;t++)a=i+4*e+t-1,r?n[e].push(a>2100||a<1900?this.emptyCell():this.currentYearCell(a,i)):n[e].push(this.currentYearCell(a,i));this.setActiveDecadeCell(n),this.setData("decadeViewData",n)},emptyCell:function(){return{emptyBlock:!0}},currentYearCell:function(e,t){var a=t+9,o=[],i=this.getCurrentYear(),r=this.getData("ltPropCurrentYear");return(e<t||e>a)&&o.push("lyteCalOtherDecadeCell"),i===e&&o.push("lyteDrillCalCurrentYear"),r===e.toString()&&o.push("lyteCalYearSel"),{year:e,emptyBlock:!1,class:o.join(" ")}},setActiveDecadeCell:function(e){var t,a=this.getData("ltPropCurrentDate"),o=this.getData("ltPropFormat"),i=this.stringToDate(a,o),r=this.getData("previousActiveCellDate"),n=this.getCurrentYear(),s=isNaN(r)?"Invalid Date"!==i?i.getFullYear():n:+r,l=e[0][0].year,d=e[e.length-1][e[e.length-1].length-1].year;s>=l&&s<=d?e[Math.floor((s-l)/4)][(s-l)%4].class+=" lyteCalNavCell":(t=s%10==9?Math.abs(s-l)<Math.abs(s-d)?0:10:s%10==0?Math.abs(s-l)<Math.abs(s-d)?1:11:s%10+1,e[Math.floor(t/4)][t%4].class+=" lyteCalNavCell")},buildNavigationalUI:function(){this.getData("ltPropHeaderType"),this.isDropdownHeader()&&this.buildYears()},initFn:function(){var e=this;this.findISO(),this.addContainerClass(),this.checkForMoment(),this.buildViewDate(),this.changeDaysOfWeek(),this.initializeCalendar(),this.setCalendarIdsForAria(),this.$node.revertToToday=function(){e.revert()},this.$node.focusCalendar=function(){e.setData("ltPropActivateNavigation",!0)},this.$node.revertToSelected=function(){e.revertToSelected()},this.$node.getDateArray=function(t){return e.setData("viewDate",t),e.buildDateViewContent(),e.getData("matrix")}}.observes("currentDatechanged").on("init"),setCalendarIdsForAria:function(){this.setData("headerId",this.generateRandomId()),this.setData("monthDropdownId",this.generateRandomId()),this.setData("yearDropdownId",this.generateRandomId()),this.setData("monthAriaObj",{"aria-labelledby":this.getData("monthDropdownId")}),this.setData("yearAriaObj",{"aria-labelledby":this.getData("yearDropdownId")})},revertToSelected:function(){var e=new Date(this.getData("viewDate").getTime()),t=this.getData("ltPropCurrentDate"),a=this.getData("ltPropFormat"),o=t?this.stringToDate(t,a):this.toDate(),i=this.toDate(),r={};if("Invalid Date"!==o){o.setDate(1);var n=new Date(o.getTime());this.setData("viewDate",o),this.setAndBuildView("dateView",r),n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear()?this.setData("showToday",!1):this.setData("showToday",!0),!this.getMethods("onNavigate")||e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()||this.executeMethod("onNavigate",r,this.getDateFromFormat(e,this.getData("ltPropFormat")),this.getDateFromFormat(n,this.getData("ltPropFormat")),this)}},addContainerClass:function(){var e=["lyteCalendarPopup"];"drilldown"===this.getData("ltPropHeaderType")&&e.push("lyteDrillDownCalendar"),this.setData("containerClass",e.join(" "))},checkForMoment:function(){this.isMomentSupported=!(!$L||!$L.moment),this.isHavingTimezone=this.isMomentSupported&&!!$L.moment()._timezone},buildViewDate:function(){if(this.isIso)var e=this.isoToDate(this.getData("ltPropIso"));else e=this.getData("ltPropCurrentDate")?this.stringToDate(this.getData("ltPropCurrentDate"),this.getData("ltPropFormat")):this.toDate();"Invalid Date"===e&&(e=this.toDate()),e.setDate(1),this.setData("viewDate",e)},initializeCalendar:function(){this.buildNavigationalUI(),this.decideView()},decideView:function(){var e=this.getData("ltPropSelectionType")||"day";"day"===e||"week"===e?this.setAndBuildView("dateView",void 0,!0):"month"===e?this.setAndBuildView("monthView",void 0,!0):this.setAndBuildView("decadeView",void 0,!0)},selectionTypeObserver:function(){this.isDrilldown()||(this.data.ltPropCurrentDate="",this.data.ltPropCurrentWeek=[],this.data.ltPropCurrentMonth="",this.data.ltPropCurrentYear=""),this.decideView()}.observes("ltPropSelectionType"),isDrilldown:function(){return"drilldown"===this.getData("ltPropHeaderType")},didConnect:function(){!this.getData("navYield")&&this.isDropdownHeader()&&(this.setData("monthDD",this.getMonthDropdown()),this.setData("yearDD",this.getYearDropdown()),this.setData("callFrmDidcnct",!0))},isDropdownHeader:function(){var e=this.getData("ltPropHeaderType");return"picklist"===e||"dropdown"===e},getYearDropdown:function(){var e=this.getData("ltPropHeaderType"),t=this.$node.querySelector(".lyteCalYearDD");return"picklist"===e&&(t=t.querySelector("lyte-dropdown")),t},getMonthDropdown:function(){return this.$node.querySelector(".lyteCalMonthDD")},didDestroy:function(){delete this.$node.revertToToday},changeIso:function(){this.isIso=!0;var e=$L.moment(this.getData("ltPropIso")).getDObj();this.setData("viewDate",e),this.isDropdownHeader()&&this.buildYears(),this.data.ltPropCurrentDate=$L.moment(this.getData("ltPropIso")).format(this.getData("ltPropFormat"),this.isYYFormat()),this.buildDateView()}.observes("ltPropIso"),changeViewDate:function(e){this.isIso=!1;var t=this.getData("ltPropCurrentDate"),a=this.getData("ltPropHeaderType");if(!this.getData("preventObs"))if(t)if("Invalid Date"!==this.stringToDate(t,this.getData("ltPropFormat"))){e=this.getData("ltPropCurrentDate");var o=this.stringToDate(e,this.getData("ltPropFormat"));o.setDate(1),("dropdown"!==a||this.isInRange(o))&&(this.setData("viewDate",o),this.isMomentSupported&&(this.data.ltPropIso=this.moment(o).format()),this.isFromCurrentDateObserver=!0,this.buildDateView())}else this.removeSelectedCell();else this.removeSelectedCell()}.observes("ltPropCurrentDate"),selectedDatesChanged:function(){this.getData("preventObs")||(this.isFromCurrentDateObserver=!0,this.buildDateView())}.observes("ltPropCurrentDates.[]"),disabledDatesChanged:function(){this.isFromCurrentDateObserver=!0,this.buildDateView()}.observes("ltPropDisabledDates.[]"),isInRange:function(e){var t=e.getFullYear();return t>=1900&&t<=2100},monthHeaderFormatObserver:function(){this.buildDateViewHeader()}.observes("ltPropMonthHeaderFormat"),changeCurrentDate:function(e,t,a){var o,i,r,n,s,l=new Date(this.getData("viewDate").getTime()),d=this.getData("ltPropFormat"),p=this.isYYFormat();d=this.getRelevantFormat(d),"Y"===e?(o=this.getData("viewDate"),this.isIso?(s=$L.moment(this.getData("viewDate")),p=!1):s=this.moment(this.getDateFromFormat(o,d),d),this.isMomentSupported?i=this.moment(s,d).add(t,"fullYear",p).getDObj():(o.setYear(o.getFullYear()+t),i=new Date(o.getTime())),this.setData("viewDate",i),this.buildDateView()):"M"===e&&(o=this.getData("viewDate"),this.isIso?(s=$L.moment(this.getData("viewDate")),p=!1):s=this.moment(this.getDateFromFormat(o,d),d),this.isMomentSupported?i=s.add(t,"month",p).getDObj():(o.setMonth(o.getMonth()+t),i=new Date(o.getTime())),this.setData("viewDate",i),this.buildDateView()),r=this.getDateFromFormat(l,this.getData("ltPropFormat")),n=this.getDateFromFormat(i,this.getData("ltPropFormat")),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",a,r,n,this)},changeCurrentYear:function(e,t){var a,o=this.getData("viewDate"),i=this.isMomentSupported,r=o.getFullYear(),n=this.getData("ltPropFormat"),s=this.isYYFormat(),l=this.getDateFromFormat(o,n),d=l;i?(n=this.getRelevantFormat(n),this.isIso?(l=this.moment(this.getData("viewDate")),s=!1):l=this.moment(l,n),o=l.add(e,"fullYear",s).getDObj()):o.setFullYear(r+e),a=this.getDateFromFormat(o,n),this.setData("viewDate",o),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",t,d,a,this)},changeCurrentDecade:function(e,t){var a,o=this.getData("viewDate"),i=this.getData("ltPropFormat"),r=this.isMomentSupported,n=this.getDateFromFormat(o,i),s=this.isYYFormat(),l=o.getFullYear(),d=n;i=this.getRelevantFormat(i),r?(this.isIso?(n=this.moment(this.getData("viewDate")),s=!1):n=this.moment(n,i),o=n.add(10*e,"fullYear",s).getDObj()):o.setFullYear(l+10*e),a=this.getDateFromFormat(o,i),this.setData("viewDate",o),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",t,d,a,this)},getProper:function(e){for(;e&&!e.classList.contains("lyteCalTableCell");)e=e.parentElement;return e},convertToLang:function(e){var t=this.getData("ltPropI18n"),a=this.getData("ltPropFormat");return t?this.moment(e,a).i18N(a):e},moveToPrevious:function(e,t){var a=this.getData("viewType");"dateView"===a?this.changeCurrentDate(e,-1,t):"monthView"===a?(this.changeCurrentYear(-1,t),this.buildMonthView()):"decadeView"===a&&(this.changeCurrentDecade(-1,t),this.buildDecadeView())},moveToNext:function(e,t){var a=this.getData("viewType");"dateView"===a?this.changeCurrentDate(e,1,t):"monthView"===a?(this.changeCurrentYear(1,t),this.buildMonthView()):"decadeView"===a&&(this.changeCurrentDecade(1,t),this.buildDecadeView())},changeToMonthView:function(e){this.setAndBuildView("monthView",e)},changeToDecadeView:function(e){this.setAndBuildView("decadeView",e)},selectHighlightedCell:function(e){var t=this.getData("viewType");"drilldown"!==this.getData("ltPropHeaderType")||"dateView"===t?this.makeSelection(e):"monthView"===t?this.monthSelected(e):this.yearSelected(e)},selectDate:function(e){this.getData("ltPropMultiple")?this.selectMultiple(e):this.selectSingle(e)},selectMultiple:function(e){var t=this.getProper(e.target);this.terminateSelection(this.fireBeforeCallback(e,t))||(this.alreadySelected(t)?(this.removeSelectedCell(t),this.removeSelected(t),this.getMethods("onDateRemoved")&&this.executeMethod("onDateRemoved",e,t.getAttribute("data-date"),this)):this.selectCell(e))},terminateSelection:function(e){return!1===e},fireBeforeCallback:function(e,t){return this.alreadySelected(t)?this.fireBeforeRemove(e,t):this.fireBeforeAdd(e,t)},fireBeforeRemove:function(e,t){if(this.getMethods("onBeforeRemove"))return this.executeMethod("onBeforeRemove",e,t.getAttribute("data-date"),this)},fireBeforeAdd:function(e,t){if(this.getMethods("onBeforeAdd"))return this.executeMethod("onBeforeAdd",e,t.getAttribute("data-date"),this)},alreadySelected:function(e){return e.classList.contains("lyteCalSel")},removeSelected:function(e){var t=e.getAttribute("data-date"),a=this.getData("ltPropCurrentDates")||[],o=a.indexOf(t);~o&&Lyte.arrayUtils(a,"removeAt",o)},selectSingle:function(e){this.removeDayHighlights(),this.selectCell(e)},selectCell:function(e){var t=this.getProper(e.target);this.setSelected(t),t.classList.add("lyteCalSel"),t.setAttribute("aria-selected","true"),t.setAttribute("tabindex","1"),this.getMethods("onDateSelected")&&this.executeMethod("onDateSelected",e,t.getAttribute("data-date"),this)},setSelected:function(e){var t=this.getData("ltPropMultiple"),a=this.convertToLang(e.getAttribute("data-date"));this.setData("preventObs",!0),t?Lyte.arrayUtils(this.getData("ltPropCurrentDates"),"push",a):this.setData("ltPropCurrentDate",a),this.setData("preventObs",!1)},monthSelected:function(e){var t=this.getData("viewDate").getFullYear(),a=this.getProper(e.target),o=a.getAttribute("data-date"),i="drilldown"===this.getData("ltPropHeaderType");o=this.getData("monthSystemValues").indexOf(o)+1,this.setData("viewDate",new Date(o+"/1/"+t)),i&&this.setAndBuildView("dateView",e),this.removeMonthHighlight(),this.addMonthHighlight(a),this.setData("ltPropCurrentMonth",o),this.getMethods("onMonthSelected")&&this.executeMethod("onMonthSelected",e,(o||"").toString(),this),this.focusActiveCell()},removeMonthHighlight:function(){var e=this.$node.querySelector(".lyteCalMonthSel");e&&(e.classList.remove("lyteCalMonthSel"),e.removeAttribute("aria-selected"))},addMonthHighlight:function(e){e.classList.add("lyteCalMonthSel"),e.setAttribute("aria-selected","true")},yearSelected:function(e){var t=this.getData("viewDate"),a=this.getProper(e.target),o=a.getAttribute("data-date"),i="drilldown"===this.getData("ltPropHeaderType");t.setYear(o),this.setData("viewDate",t),i&&this.setAndBuildView("monthView",e),this.removeYearHighlight(),this.addYearHighlight(a),this.setData("ltPropCurrentYear",o),this.getMethods("onYearSelected")&&this.executeMethod("onYearSelected",e,o,this),this.focusActiveCell()},removeYearHighlight:function(){var e=this.$node.querySelector(".lyteCalYearSel");e&&(e.classList.remove("lyteCalYearSel"),e.removeAttribute("aria-selected"))},addYearHighlight:function(e){e.classList.add("lyteCalYearSel"),e.setAttribute("aria-selected","true")},focusDrillDownButton:function(){var e=this.$node.querySelector(".lyteDrillCalHeaderButton");e&&e.focus()},makeSelection:function(e){"day"===this.getData("ltPropSelectionType")?this.selectDate(e):this.selectWeek(e)},selectWeek:function(e){var t=this.getProper(e.target),a=this.getFirstSelectableDay(t).getAttribute("data-date"),o=this.getLastSelectableDay(t).getAttribute("data-date");this.removeDayHighlights(),this.addWeekHighlight(t),this.setData("ltPropCurrentWeek",[this.convertToLang(a),this.convertToLang(o)]),this.getMethods("onWeekSelected")&&this.executeMethod("onWeekSelected",e,a,o,this)},removeDayHighlights:function(){this.removeSelectedCell(),this.removeWeekHighlight()},removeSelectedCell:function(e){var t=e||this.getSelectedCell();t&&(t.classList.remove("lyteCalSel"),t.removeAttribute("aria-selected"),t.setAttribute("tabindex","-1"))},getSelectedCell:function(){return this.$node.querySelector(".lyteCalSel")},removeWeekHighlight:function(){for(var e=this.$node.querySelectorAll(".lyteCalWeekSel"),t=0;t<e.length;t++)e[t].classList.remove("lyteCalWeekSel"),e[t].removeAttribute("aria-selected")},addWeekHighlight:function(e){var t=this.getFirstSelectableDay(e);day=t;do{day.classList.add("lyteCalWeekSel"),day.setAttribute("aria-selected","true"),day=day.nextElementSibling}while(day&&"true"===day.getAttribute("data-selectable"))},getFirstSelectableDay:function(e){for(var t=e.parentElement.children,a=0;a<t.length;a++)if("true"===t[a].getAttribute("data-selectable"))return t[a]},getLastSelectableDay:function(e){for(var t=e.parentElement.children,a=t.length-1;a>-1;a--)if("true"===t[a].getAttribute("data-selectable"))return t[a]},actions:{changeToMonthView:function(e){this.changeToMonthView(e),this.focusDrillDownButton()},changeToMonthViewOnKeys:function(e){var t=e.keyCode;13!==t&&32!==t||(this.changeToMonthView(e),this.focusDrillDownButton())},changeToDecadeView:function(e){this.changeToDecadeView(e),this.focusActiveCell()},changeToDecadeViewOnKeys:function(e){var t=e.keyCode;13!==t&&32!==t||(this.changeToDecadeView(e),this.focusActiveCell())},record:function(e){if(this.setData("prev",!1),e.touches.length>1)this.setData("prev",!0);else{var t=e.targetTouches[0],a={x:t.clientX,y:t.clientY},o=(new Date).getTime();this.setData("cords",a),this.setData("start",o)}},decide:function(e){if(!this.getData("prev")){var t=this.getData("cords"),a=t.x,o=t.y,i=e.changedTouches[0],r=a-i.clientX,n=o-i.clientY,s=this.$node.querySelector(".lyteCalendarPopup").getBoundingClientRect(),l=.2*s.width,d=.15*s.height,p=this.getData("start"),c=(new Date).getTime()-p;d>Math.abs(n)&&l<Math.abs(r)&&c<1e3&&(r<0?this.changeCurrentDate("M",-1,e):r>0&&this.changeCurrentDate("M",1,e))}},previousOnKeys:function(e,t){t.keyCode,13!==t.keyCode&&32!==t.keyCode||this.moveToPrevious(e,t)},nextOnKeys:function(e,t){var a=t.keyCode;13!==a&&32!==a||this.moveToNext(e,t)},previous:function(e,t){this.moveToPrevious(e,t)},next:function(e,t){this.moveToNext(e,t)},yearSelected:function(e){this.yearSelected(e)},monthSelected:function(e){this.monthSelected(e)},dateSelected:function(e){0===e.button&&this.makeSelection(e)},performNavigation:function(e){var t,a,o,i=e.keyCode,r=e.target;if(!this.getData("ltPropDisableNavigation"))switch(i){case 38:t="previous",o="up",a=this.getCellsToMove(t,o),this.moveBackward(e,t,a),e.preventDefault();break;case 40:t="next",o="down",a=this.getCellsToMove(t,o),this.moveForward(e,t,a),e.preventDefault();break;case 37:t="previous",a=-1,this.moveBackward(e,t,a),e.preventDefault();break;case 39:t="next",a=1,this.moveForward(e,t,a),e.preventDefault();break;case 32:case 13:if(this.isDisabledCell(r))return;this.selectHighlightedCell(e),e.preventDefault();break;case 36:t="previous",this.moveToFirstCell(e,t),e.preventDefault();break;case 35:t="next",this.moveToLastCell(e,t),e.preventDefault();break;case 33:this.previousNavigation("M",e),e.preventDefault();break;case 34:this.nextNavigation("M",e),e.preventDefault()}},today:function(e){this.revert(e),this.focusActiveCell()},todayOnKey:function(e){var t=e.keyCode;13!==t&&32!==t||(this.revert(e),this.focusActiveCell())}},methods:{optionSelected:function(e,t,a,o){if("M"==e){var i=this.getData("monthNames").indexOf(a);this.changeCurrentDate(e,i-this.getData("viewDate").getMonth(),t)}else"Y"==e&&this.changeCurrentDate(e,parseInt(a)-this.getData("viewDate").getFullYear(),t)},setClass:function(e,t){var a=t.childComp,o=_lyteUiUtils.getRTL(),i=o?"right":"left",r=a.querySelector(".lyteArrow");a.classList.add("lyteCalendarDropdown"),r.style[i]="20%",o&&(r.style.left="auto")}}}),Lyte.Component.register("lyte-dateselect",{_template:'<template tag-name="lyte-dateselect"> <lyte-dropdown lt-prop="{{stringify(ltPropDropdown)}}" on-before-show="{{method(\'bfSw\')}}" on-show="{{method(\'sw\')}}" on-before-hide="{{method(\'bfHde\')}}" on-hide="{{method(\'hde\')}}" on-option-selected="{{method(\'optSel\')}}" lt-prop-selected="{{lbind(ltPropSelected)}}" on-position-changed="{{method(\'posChange\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button id="{{randomId}}"> <template is="if" value="{{ltPropButtonYield}}"><template case="true"> <lyte-yield yield-name="buttonYield" lt-prop-display-value="{{ltPropDisplayValue}}" lt-prop-selected="{{ltPropSelected}}"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(ltPropSelected,\'&amp;&amp;\',ltPropDisplayValue)}}"><template case="true"> {{ltPropDisplayValue}} </template><template case="false"> <span class="lyteDropPlaceholderMultiple">{{ltPropDropdown.placeholder}}</span> </template></template> <lyte-icon class="dropdown"></lyte-icon> </template></template> </lyte-drop-button> <lyte-drop-box class="{{ltPropDropdownWrapperClass}}" id="lyteDateSelect"> <lyte-drop-body class="lyteList"> <template is="forIn" object="{{ltPropOptions}}" value="value" key="key"> <lyte-drop-item data-value="{{key}}" class="{{key}}" aria-controls="{{randomId}}_{{key}}"> <template is="if" value="{{ltPropItemYield}}"><template case="true"> <lyte-yield yield-name="item" item-value="{{ltPropOptions[key]}}"></lyte-yield> </template><template case="false"><template is="if" value="{{expHandlers(value,\'==\',true)}}"><template case="true"> {{lyteUiI18n(key)}} </template><template case="false"> {{value}} </template></template></template></template><template is="if" value="{{expHandlers(expHandlers(key,\'==\',\'specificDate\'),\'||\',expHandlers(key,\'==\',\'customRange\'))}}"><template case="true"> <span class="{{if(ifEquals(pos,\'left\'),\'dateArrow arrowLeft\',\'dateArrow arrowRight\')}}"></span> </template></template> </lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <div class="dateSelectcal lyteDropdownHidden {{ltPropCalendarWrapperClass}}" aria-modal="true"> <template is="if" value="{{opend}}"><template case="true"> <template is="if" value="{{ltPropOptions.specificDate}}"><template case="true"> <div class="specificDate lyteDropdownHidden" id="{{randomId}}_specificDate"> <lyte-calendar lt-prop="{{stringify(ltPropCalendar)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" on-date-selected="{{method(\'dateselected1\')}}" on-navigate="{{method(\'rangenavigate\',\'onNavigate\')}}" lt-prop-activate-navigation="{{lbind(calNavigation)}}"> <template is="if" value="{{ltPropCalendarYield}}"><template case="true"> <template is="registerYield" yield-name="footer"> <lyte-yield yield-name="footer"></lyte-yield> </template> </template></template> </lyte-calendar> <template is="if" value="{{ltPropFooterYield}}"><template case="true"> <lyte-yield yield-name="dateselect-footer" selected="{{ltPropSelected}}" current-date="{{ltPropCurrentDate}}"></lyte-yield> </template></template> </div> </template></template> <template is="if" value="{{ltPropOptions.customRange}}"><template case="true"> <div class="customRange lyteDropdownHidden" id="{{randomId}}_customRange"> <lyte-daterangepicker lt-prop="{{stringify(ltPropDateRangePicker)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" short-month-names="{{shortMonthNames}}" long-month-names="{{longMonthNames}}" cal-view-date1="{{lbind(ltPropStartDateObject)}}" cal-view-date2="{{lbind(ltPropEndDateObject)}}" on-date-selected="{{method(\'dateselected\')}}" on-navigation="{{method(\'rangenavigate\',\'onNavigation\')}}" on-start-date-changed="{{method(\'startChange\')}}" date-selected="{{lbind(dateSelected)}}" lt-prop-activate-navigation="{{lbind(rangeNavigation)}}" lt-prop-navigation="true" prevent-keydown="{{preventKeydown}}"> </lyte-daterangepicker> <template is="if" value="{{ltPropFooterYield}}"><template case="true"> <lyte-yield yield-name="dateselect-footer" selected="{{ltPropSelected}}" start-date="{{ltPropStartDate}}" end-date="{{ltPropEndDate}}"></lyte-yield> </template></template> </div> </template></template></template></template> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1,1]},{type:"forIn",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["shortMonthNames","longMonthNames","ltPropStartDateObject","ltPropEndDateObject","ltPropStartDate","ltPropEndDate","ltPropCurrentDate","ltPropCalendarYield","ltPropCalendar","ltPropDateRangePicker","ltPropItemYield","ltPropSelected","ltPropOptions","ltPropDropdownWrapperClass","ltPropDropdown","ltPropDisplayValue","ltPropButtonYield","ltPropCalendarWrapperClass","ltPropFooterYield","ltPropI18n","ltPropAnimation","ltPropNavigation","pos","prevSel","opend","randomId","dateSelected","calNavigation","rangeNavigation","preventKeydown"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node),this.$node.toggle=function(){this._drop.toggle()}.bind(this)},data:function(){return{shortMonthNames:Lyte.attr("array",{default:["Jan","Feb","Mar","Apr","short.may","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),longMonthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),ltPropStartDateObject:Lyte.attr("object"),ltPropEndDateObject:Lyte.attr("object"),ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropCalendarYield:Lyte.attr("boolean",{default:!1}),ltPropCalendar:Lyte.attr("object",{default:{headerType:"dropdown",fillRows:!1}}),ltPropDateRangePicker:Lyte.attr("object",{default:{monthHeaderFormat:"MMMM YYYY"}}),ltPropItemYield:Lyte.attr("boolean",{default:!1}),ltPropSelected:Lyte.attr("string",{default:"today"}),ltPropOptions:Lyte.attr("object",{default:{today:!0,yesterday:!0,last7days:!0,last30days:!0,thisWeek:!0,thisMonth:!0,specificDate:!0,customRange:!0}}),ltPropDropdownWrapperClass:Lyte.attr("string",{default:""}),ltPropDropdown:Lyte.attr("object",{default:{}}),ltPropDisplayValue:Lyte.attr("string",{default:""}),ltPropButtonYield:Lyte.attr("boolean",{default:!1}),ltPropCalendarWrapperClass:Lyte.attr("string",{default:""}),ltPropFooterYield:Lyte.attr("boolean",{default:!1}),ltPropI18n:Lyte.attr("boolean",{default:!1}),ltPropAnimation:Lyte.attr("object",{default:{dropdown:"Fade",calendar:"Fade"}}),ltPropNavigation:Lyte.attr("boolean",{default:!1}),pos:Lyte.attr("string",{default:""}),prevSel:Lyte.attr("string",{default:""}),opend:Lyte.attr("boolean",{default:!1}),randomId:Lyte.attr("string",{default:"lyteDateSelect_"+parseInt(1e6*Math.random())}),dateSelected:Lyte.attr("boolean",{default:!1}),calNavigation:Lyte.attr("boolean",{default:!1}),rangeNavigation:Lyte.attr("boolean",{default:!1}),preventKeydown:Lyte.attr("boolean")}},selectValue:function(e){this.setData("ltPropDisplayValue",this.getVal(e))},didConnect:function(){this._drop=this.$node.querySelector("lyte-dropdown"),this._drop.parent=this.$node;var e=this._drop.component,t=this.data;this._cmp=e.childComp?e.childComp:this._drop.querySelector("lyte-drop-box"),this._end=this.tranEnd.bind(this),this._indend=this.tranEnd1.bind(this),this._opentrans=this.opentrans.bind(this),this._caldiv=this.$node.querySelector(".dateSelectcal"),_lyteUiUtils.appendChild(document.body,this._caldiv),this.setData("ltPropDisplayValue",this.getVal(t.ltPropSelected)),document._dateselectResize||(document._dateselectResize=!0,["resize","scroll","orientationchange"].forEach((function(e){window.addEventListener(e,dtslctscroll)}))),this.$node.toggle=function(e,t){this._drop.toggle(e,t)}.bind(this),this._drop.updateButtonAria("aria-labelledby",t.randomId),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL(),this._dir&&$L.fastdom.mutate(function(){this._caldiv.classList.add("lyteRTL")}.bind(this))}.bind(this))},didDestroy:function(){document.body.removeChild(this._caldiv),document._dateselectResize&&0==document.querySelectorAll("lyte-dateselect").length&&(delete document._dateselectResize,["resize","scroll","orientationchange"].forEach((function(e){window.removeEventListener(e,dtslctscroll)}))),delete this._caldiv,delete this._cmp,delete this._drop,delete this.$node.toggle},getVal:function(e){if(!e)return"";var t=this.data.ltPropOptions[e],a=t.constructor==Boolean?_lyteUiUtils.i18n(e):t;if(-1==["specificDate","customRange"].indexOf(e))return a;if("specificDate"==e)return this.i18_date(this.data.ltPropCurrentDate,this.data.ltPropCalendar.format||"MM/DD/YYYY")||a;if("customRange"==e){var o=this.data.ltPropDateRangePicker.format||"MM/DD/YYYY",i=this.i18_date(this.data.ltPropStartDate,o),r=this.i18_date(this.data.ltPropEndDate,o);return i&&r?i+" - "+r:a}},resolveConflicts:function(e){var t=/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/.exec(e),a=(t||{}).index,o=(t||[])[0].length||0;return isNaN(a)?e.toUpperCase():e.substring(0,a+o)+(e.substring(a+o)||"").toUpperCase()},isConflictingFormat:function(e){return(e.match(/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/gi)||[]).length>1},getRelevantFormat:function(e){return this.isConflictingFormat(e)?this.resolveConflicts(e):e.toUpperCase()},i18_date:function(e,t){if(t=this.getRelevantFormat(t),e&&$L.moment&&this.data.ltPropI18n){var a=function(e,t,a){return this.getMethods("onI18n")?this.executeMethod("onI18n",e,t,a):t}.bind(this);return $L.moment(e,t).i18N(t,a)}return e},selectedObs:function(e){this.hidedropdown();var t=e.newValue;if(t&&this._cmp&&!this._cmp.classList.contains("lyteDropdownHidden")){var a=-1!=["specificDate","customRange"].indexOf(e.oldValue)?this._caldiv.querySelector("."+e.oldValue):null;if(-1!=["specificDate","customRange"].indexOf(e.newValue)&&this._caldiv.querySelector("."+t)){if(a){var o=new Promise(function(e,t){this._new=e,this.hideele(a)}.bind(this));Promise.resolve(o).then(function(){$L.fastdom.mutate(this.openele.bind(this))}.bind(this))}else this.openele();this.data.prevSel=this.data.prevSel||e.oldValue}}else t&&(this._cmp&&this._cmp.classList.contains("lyteDropdownHidden")||-1!=["specificDate","customRange"].indexOf(t))?this.selectValue(t):t||(this.selectValue(""),this.$node.ltProp({startDate:"",endDate:"",currentDate:""}));this._callonchange=!0}.observes("ltPropSelected"),opentrans:function(e){$L(this._cmp).removeClass("lyteDateselectAnimationHappening"),this._cmp.removeEventListener("transitionend",this._opentrans,!0),delete this._drop.component._preventSetcss,this.setup_navigation(),this.getMethods("onAnimationEnd")&&this.executeMethod("onAnimationEnd",this.$node)},setup_navigation:function(){var e=this.data,t=e.ltPropSelected;e.ltPropNavigation&&("specificDate"==t?this.setData("calNavigation",!0):"customRange"==t&&this.setData("rangeNavigation",!0))},tranEnd:function(e){this._cmp&&(this._cmp.removeEventListener("transitionend",this._end,!0),$L(this._cmp).removeClass("lyteDateselectAnimationHappening").css(this.getValue(1,"dropdown",this._cmp))),this._el&&(this._el.classList.add("lyteDropdownHidden"),delete this._el),this._res&&(this._res(!0),this._caldiv.classList.add("lyteDropdownHidden"),this.callRevert(),delete this._res)},tranEnd1:function(e){this._el&&(this._el.removeEventListener("transitionend",this._indend,!0),$L(this._el).removeClass("lyteDateselectAnimationHappening"),this._el.classList.add("lyteDropdownHidden"),delete this._el),this._new&&(this._new(!0),delete this._new)},hidedropdown:function(){var e=this._caldiv;e&&Array.from(e.getElementsByTagName("lyte-dropdown")).forEach((function(e){e.close()}))},hideele:function(e){e.addEventListener("transitionend",this._indend,!0),$L(e).addClass("lyteDateselectAnimationHappening"),this._el=e,this.data.ltPropAnimation.dropdown?$L(e).css(this.getValue(0,"calendar",e)):this._indend()},getValue:function(e,t,a){var o=this.data.ltPropAnimation[t];if("Fade"==o)return{opacity:e};if("Scale"==o)return{transform:"scaleY("+e+")"};if("Slide"==o){var i={height:e?a.__height:0,transform:""};return $L(this._caldiv).hasClass("lyteDateselectUp"),i}return{}},openele:function(){var e=this.data.ltPropSelected,t=function(){this.setCss(),this.setup_navigation()}.bind(this);if(-1!=["specificDate","customRange"].indexOf(e)){this._caldiv.classList.remove("lyteDropdownHidden");var a=this._caldiv.querySelector("."+e);a.classList.remove("lyteDropdownHidden"),"Slide"==this.data.ltPropAnimation.calendar?$L.fastdom.measure(function(){a.__height=this._caldiv.__height=a.children[0].getBoundingClientRect().height,$L.fastdom.mutate(function(){$L(a).css("transitionDuration","0s").css(this.getValue(0,"calendar",a)),setTimeout(function(){$L(a).css("transitionDuration",""),t()}.bind(this),20)}.bind(this))}.bind(this)):($L(a).css(this.getValue(0,"calendar",a)),$L.fastdom.measure(t))}},animation_obs:function(){var e=this.data.ltPropAnimation;$L(this._caldiv).removeClass("lyteDateselectAnimate").addClass("Fade"!=e.calendar?"lyteDateselectAnimate":"").css({transform:"",opacity:""}),$L(this._cmp).removeClass("lyteDateselectAnimate").addClass("Fade"!=e.dropdown?"lyteDateselectAnimate":"").css({transform:"",opacity:""})}.observes("ltPropAnimation.{}, ltPropAnimation").on("didConnect"),methods:{rangenavigate:function(e){var t=arguments;if(this.getMethods(e)&&this.executeMethod.apply(this,t),"Slide"==this.data.ltPropAnimation.calendar){var a=t[3].$node;$L.fastdom.measure((function(){var e=a.getBoundingClientRect().height;$L.fastdom.mutate((function(){$L(a.parentNode).css("height",e)}))}))}},bfSw:function(e,t){var a;return this.getMethods("onBeforeShow")&&(a=this.executeMethod("onBeforeShow",e,t)),this.data.opend||0==a?a:(this.setData("opend",!0),new Promise((function(e){window.requestAnimationFrame(e)})))},sw:function(e,t){this._drop.component._preventSetcss=!this._drop.ltProp("freeze"),this.getMethods("onShow")&&this.executeMethod("onShow",e,t);var a=t.childComp;$L(a).addClass("lyteDateselectAnimationHappening").css("transitionDuration","0s").css(this.getValue(0,"dropdown",a)),this.setData("preventKeydown",!0),setTimeout(function(){$L(a).css("transitionDuration",""),this.openele(),a.addEventListener("transitionend",this._opentrans,!0),$L.fastdom.mutate(function(){$L(a).css(this.getValue(1,"dropdown",a))}.bind(this))}.bind(this),20)},bfHde:function(e,t){return delete this._callonchange,this._prevent||this._caldiv.contains((e||{}).target)?(delete this._prevent,!1):(this.getMethods("onBeforeHide")&&(a=this.executeMethod("onBeforeHide",e,t)),0!=a?new Promise(function(e,a){this._res=e;var o=this.data.ltPropAnimation||{},i=this._caldiv.querySelector(".specificDate:not(.lyteDropdownHidden),.customRange:not(.lyteDropdownHidden)");this._el=i,o.dropdown?(t.childComp.addEventListener("transitionend",this._end,!0),$L(t.childComp).addClass("lyteDateselectAnimationHappening"),i&&$L(i).css(this.getValue(0,"calendar",i)),$L(t.childComp).css(this.getValue(0,"dropdown",t.childComp))):this._end()}.bind(this)):a);var a},hde:function(e,t){var a=this.data,o=this._rest,i=a.ltPropSelected,r=function(){var e=a.ltPropDateRangePicker,t=this._caldiv;null!=e.maxDiff&&t&&t.getElementsByTagName("lyte-daterangepicker")[0].ltProp({minDate:e.minDate||"",maxDate:e.maxDate||""})}.bind(this);if(this.setData("preventKeydown",!1),!o&&a.prevSel?(this.setData("ltPropSelected",i=a.prevSel),this.setData("ltPropDisplayValue",this.getVal(i))):o&&/customRange/i.test(i)&&r(),a.dateSelected&&(this.setData("dateSelected",!1),r()),delete this._rest,a.prevSel="",this.resetValue(),"Slide"==a.ltPropAnimation.dropdown&&$L(this._cmp).css("height",""),this.getMethods("onHide"))return this.executeMethod("onHide",e,t)},dateselected:function(e){this.selected(e,!0)},dateselected1:function(e){this.selected(e)},optSel:function(e,t,a,o){if(-1==["specificDate","customRange"].indexOf(t)){if(this.selectValue(t),this.getMethods("onSelect")&&this.executeMethod("onSelect",e,this.$node,t,o),this._callonchange){var i="onChange";this.getMethods(i)&&this.executeMethod(i,e,this.$node,t,o)}this._rest=!0}else this._prevent=!0},posChange:function(e){var t="removeClass";/up/i.test(e)&&(t="addClass"),$L(this._cmp)[t]("lyteDateselectUp"),$L(this._caldiv)[t]("lyteDateselectUp")},startChange:function(e){var t="onStartDateChanged";this.getMethods(t)&&this.executeMethod(t,e)}},resetValue:function(){"specificDate"!=this.data.ltPropSelected&&this.setData("ltPropCurrentDate",""),"customRange"!=this.data.ltPropSelected&&(this.setData("ltPropStartDate",""),this.setData("ltPropEndDate",""))},callRevert:function(){var e=this.data.ltPropSelected,t=this._caldiv.querySelector(".specificDate lyte-calendar"),a=this._caldiv.querySelector(".customRange lyte-daterangepicker");"customRange"==e?(a.revertToSelected(),t&&t.revertToToday()):("specificDate"==e?t.revertToSelected():t&&t.revertToToday(),a&&a.revertToToday())},setCss:function(e){function t(e,t,a){if(this._dir){if(t)return"right"==e?a-t.left:a-t.right;if("left"==e)return"right"}return t?t[e]:"left"}var a,o=window.pageYOffset||document.documentElement.scrollTop,i=this._caldiv,r=this._cmp,n=i.getBoundingClientRect(),s=(n.left,n.right,n.width),l=i.__height||n.height,d=r.getBoundingClientRect(),p={left:d.left,right:d.right,width:d.width,height:r.__height,top:parseFloat(r.style.top)-o,bottom:parseFloat(r.style.top)-o+r.__height},c=window.innerWidth,h=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),u=r.querySelector('lyte-drop-item[selected = "true"]'),f=u.getBoundingClientRect().bottom-(d.top-p.top),y=u.querySelector(".dateArrow"),m=y?y.getBoundingClientRect():{width:0},g=t.call(this,"left",p,c)+p.width+m.width/2+h,v=t.call(this,"left",p,c)-m.width/2-s+h,b=r.style.top,P=r.style.bottom;parseFloat(b)+l<f+o&&(b=o+f-l+"px"),g+s<c+h?a="right":v>h?(g=v,a="left"):c-t.call(this,"right",p,c)>t.call(this,"left",p,c)?a="right":(g=v,a="left"),$L.fastdom.mutate(function(){i.style[t.call(this,"left")]=g+"px",i.style.top=b,i.style.bottom=P;var e=this._caldiv.getElementsByClassName(this.data.ltPropSelected)[0];e&&$L(e).css(this.getValue(1,"calendar",e)),this.setData("pos",a)}.bind(this))},selected:function(e,t){var a=this.data;this.setData("ltPropDisplayValue",this.getVal(a.ltPropSelected));var o="onSelect",i=[o,e,this.$node];t?i.push("customRange",a.ltPropStartDate,a.ltPropEndDate):i.push("specificDate",a.ltPropCurrentDate),this.getMethods(o)&&this.executeMethod.apply(this,i),this._callonchange&&this.getMethods("onChange")&&(i.shift(),i.unshift("onChange"),this.executeMethod.apply(this,i)),this._rest=!0,this._drop.toggle()},calendar_obs:function(e){this._callonchange=!0}.observes("ltPropStartDate","ltPropEndDate","ltPropCurrentDate")}),Lyte.Component.register("lyte-slider",{_template:'<template tag-name="lyte-slider"> <div class="lyteSlide {{if(ltPropDisabled,\'lyteSliderDisabled\',\'\')}}"> <div class="lyteRangeSlider {{ltPropDirection}}" onclick="{{action(\'click\',event)}}" tabindex="0" onkeydown="{{action(\'keydown\',event)}}"> <div class="lyteSliderFill"></div> <div class="lyteSliderHandler {{ltPropHandler}} lyteHandler1" lt-prop-title="{{if(expHandlers(ltPropTooltip,\'&amp;&amp;\',true),if(ltPropRangeHandler,ltPropMinValue,ltPropValue),\'\')}}" tabindex="0" onmousedown="{{action(\'mousedown\',event,this)}}" ontouchstart="{{action(\'mousedown\',event,this)}}" lt-prop-tooltip-config="{{ltPropTooltipConfig}}" lt-prop-tooltip-style="{{ltPropTooltipStyle}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" style="border-color: {{ltPropFillColor}}"></div> <template is="if" value="{{ltPropRangeHandler}}"><template case="true"> <div class="lyteSliderHandler {{ltPropHandler}} lyteHandler2" tabindex="0" onmousedown="{{action(\'mousedown\',event,this)}}" ontouchstart="{{action(\'mousedown\',event,this)}}" lt-prop-title="{{if(ltPropTooltip,ltPropMaxValue,\'\')}}" lt-prop-tooltip-config="{{ltPropTooltipConfig}}" lt-prop-tooltip-style="{{ltPropTooltipStyle}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" style="border-color: {{ltPropFillColor}}"></div> </template></template><template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield" lt-prop-scale-value="{{scaleVal}}" lt-prop-scale-style="{{divLength}}"></lyte-yield> </template><template case="false"> <div class="lyteScaleOption {{ltPropHandler}}"> <template is="for" items="{{divLength}}" index="indexVal"> <span class="lyteScaleLine" style="{{item}}"> <span></span> <span class="lyteScalLable">{{scaleVal[indexVal]}}</span> </span> </template> </div> </template></template> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'border-color: '","ltPropFillColor"]}}}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'border-color: '","ltPropFillColor"]}}}}]}},default:{}},{type:"attr",position:[1,1,6]},{type:"if",position:[1,1,6],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item"}}},{type:"text",position:[1,3,0]}]}]}},default:{}}],_observedAttributes:["divLength","scaleVal","ltPropMin","ltPropMax","ltPropScaleInterval","ltPropStep","ltPropHandler","ltPropDirection","ltPropWidth","ltPropFillColor","ltPropNonFillColor","ltPropHeight","ltPropValue","ltPropDiscrete","ltPropContent","ltPropRangeHandler","ltPropMinValue","ltPropMaxValue","ltPropDisabled","ltPropSelectedValue1","ltPropSelectedValue2","ltPropYield","ltPropTooltipStyle","ltPropTooltip","ltPropScaleUnit","ltPropTooltipClass","ltPropTooltipConfig","ltPropMinDiff","ltPropDigits","preventObs"],init:function(){this._dir=_lyteUiUtils.getRTL();var e,t=this.getData("ltPropTooltipConfig"),a=this.getData("ltPropDirection"),o=this.getData("ltPropTooltipStyle");t||(this._config=!0,this.data.ltPropTooltipConfig={position:"lyteHorizontal"==a?"top":"right",showdelay:500,margin:10}),o||(this._style=!0,this.data.ltPropFillColor&&(this.data.ltPropTooltipStyle="background-color : "+this.data.ltPropFillColor+";")),-1!=[void 0,"",null].indexOf(this.getData("ltPropScaleInterval"))&&(this.setData("preventObs",!0),-1!=this.getData("ltPropHandler").indexOf("Arrow")&&0==this.getData("ltPropContent").length&&(e=.1*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))),this.getData("ltPropContent").length&&(e="true"),e&&this.setData("ltPropScaleInterval",e.toString()),this.setData("preventObs",!1)),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(e,t,a){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?a-t.left:"clientX"==e?a-t.clientX:"offsetLeft"==e?t.offsetParent.offsetWidth-t.offsetLeft-t.offsetWidth:a-t.right;if("left"==e)return"right"}return t?t[e]:e},heightSetObs:function(){this.heightSet.call(this,arguments[0])}.observes("ltPropWidth","ltPropHeight"),heightSet:function(){var e=this.getData("ltPropWidth"),t=this.getData("ltPropHeight");-1!=this.getData("ltPropDirection").indexOf("Horizontal")?(e||(this.setData("ltPropWidth","200px"),e="200px"),t||(this.setData("ltPropHeight","30px"),t="30px")):(e||(this.setData("ltPropWidth","30px"),e="30px"),t||(this.setData("ltPropHeight","200px"),t="200px")),this.$node.style.width=e,this.$node.style.height=t,arguments.length&&this.didConnectWrk.call(this)},initialWorkObs:function(){this.getData("preventObs")||(this.setData("preventObs",!0),this.initialWork.call(this,arguments[0]),this.setData("preventObs",!1))}.observes("ltPropContent","ltPropMax","ltPropMin","ltPropScaleInterval","ltPropDiscrete","ltPropStep","ltPropValue","ltPropScaleUnit").on("init"),initialWork:function(e){var t=this.getData("ltPropContent").slice(),a=this.getData("ltPropDirection"),o=this.getData("ltPropDiscrete"),i=this.getData("ltPropRangeHandler");if(t.length)t.length&&(this.setData("ltPropMax","100"),this.setData("ltPropStep",this.getData("ltPropScaleInterval")),(this.getData("ltPropScaleInterval")||e&&"ltPropContent"==e.item)&&this.setData("ltPropScaleInterval",""+parseFloat(100/(t.length-1))),this.setData("ltPropDiscrete",this.getData("ltPropScaleInterval")),i?(s=this.getData("ltPropMinValue"),l=this.getData("ltPropMaxValue"),(!s||-1==t.indexOf(s)||t.indexOf(s)>t.indexOf(l))&&this.setData("ltPropMinValue",t[0]),(!l||-1==t.indexOf(l)||t.indexOf(s)>t.indexOf(l))&&this.setData("ltPropMaxValue",t[t.length-1]),this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))):this.getData("ltPropValue")||(this.setData("ltPropValue",this.getData("ltPropContent")[0]),this.setData("ltPropSelectedValue1",this.getData("ltPropValue"))));else{var r=parseFloat(this.getData("ltPropMin")),n=parseFloat(this.getData("ltPropMax"));if(i){var s=parseFloat(this.getData("ltPropMinValue")),l=parseFloat(this.getData("ltPropMaxValue"));(isNaN(s)||s<r||s>=n)&&this.setData("ltPropMinValue",r.toString()),(isNaN(l)||l>n||l<=r)&&this.setData("ltPropMaxValue",n.toString()),this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))}else{var d=parseFloat(this.getData("ltPropValue"));d<r||isNaN(d)?this.setData("ltPropValue",r.toString()):d>n&&this.setData("ltPropValue",n.toString()),this.setData("ltPropSelectedValue1",this.getData("ltPropValue"))}if(o){var p=.1*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")));o=parseFloat(o),o=Math.max(isNaN(o)?0:o,p).toString(),this.setData("ltPropDiscrete",o),this.setData("ltPropStep",o),this.setData("ltPropScaleInterval",o)}}var c=[],h=[],u=-1!=a.indexOf("Horizontal"),f="top:",y=parseFloat(this.getData("ltPropScaleInterval"));if(u&&(f=this.rtlfunc.call(this,"left")+":"),y&&!isNaN(y)){for(var m=parseFloat(this.getData("ltPropMin")),g=this.getData("ltPropScaleUnit"),v=0;m<=parseFloat(this.getData("ltPropMax"));v++)c.push(f+(m-parseFloat(this.getData("ltPropMin")))/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*100+"%"),this.getData("ltPropContent").length?h.push(t[v]+g):h.push(m+g),m+=parseFloat(y);l=t.length?t[t.length-1]:this.getData("ltPropMax"),h[h.length-1]!=l&&(c.push(f+100+"%"),t.length?h.push(t[t.length-1]+g):h.push(this.getData("ltPropMax")+g))}else c.push(f+0+"%"),c.push(f+100+"%"),h=this.MaxMinSet.call(this),this.setData("scaleVal",h);this.setData("scaleVal",h),this.setData("divLength",c)},colorSetObs:function(e){this.colorSet.call(this,e)}.observes("ltPropFillColor","ltPropNonFillColor").on("didConnect"),colorSet:function(e){(!e&&this.data.ltPropFillColor||e&&"ltPropFillColor"==e.item)&&(this.$node.querySelector("div.lyteSliderFill").style.backgroundColor=this.data.ltPropFillColor),(!e&&this.data.ltPropNonFillColor||e&&"ltPropNonFillColor"==e.item)&&(this.$node.querySelector("div.lyteRangeSlider").style.backgroundColor=this.data.ltPropNonFillColor)},didConnectWrkObs:function(){this.getData("preventObs")||(this.setData("preventObs",!0),this.didConnectWrk.apply(this,arguments),this.setData("preventObs",!1))}.observes("ltPropScaleInterval","ltPropValue","ltPropMin","ltPropMax","ltPropMinValue","ltPropMaxValue","ltPropContent","ltPropHandler","ltPropRangeHandler"),didConnectWrk:function(){this.$node.querySelector("div.lyteRangeSlider"),this.$node.querySelector("div.lyteSlide");var e,t,a=this.$node.querySelectorAll("div.lyteSliderHandler"),o=this.getData("ltPropRangeHandler"),i=this.getData("ltPropDirection"),r=this.$node.getBoundingClientRect(),n=a[0].getBoundingClientRect(),s=this.$node.offsetParent,l={},d="width",p="handlerWidth",c=this.rtlfunc.call(this,"left"),h={},u="offsetWidth";-1==i.indexOf("Horizontal")&&(d="height",p="handlerHeight",c="top",u="offsetHeight"),null==s?(l.width=parseFloat(this.getData("ltPropWidth")),l.height=parseFloat(this.getData("ltPropHeight")),l.handlerWidth=l.handlerHeight=12):(l.width=r.width,l.height=r.height,l.handlerWidth=n.width,l.handlerHeight=n.height);var f=this.$node.querySelector("div.lyteSliderFill");if(this.getData("ltPropContent").length){var y,m,g=this.data.ltPropContent.indexOf(this.data.ltPropValue);this.$node.querySelectorAll("div.lyteSliderHandler"),g=g>-1?g:0,o&&(y=-1!=(y=this.getData("ltPropContent").indexOf(this.getData("ltPropMinValue")))?y:0,m=-1!=(m=this.getData("ltPropContent").indexOf(this.getData("ltPropMaxValue")))?m:this.getData("ltPropContent").length-1),o?(e=this.rangeInitialSet.call(this,u,y),t=this.rangeInitialSet.call(this,u,m),h=this.rangeSliderFill(e,t,l[p])):(e=this.rangeInitialSet.call(this,u,g),h.width=g/(this.getData("ltPropContent").length-1)*l[d])}else o?(e=this.initialValueSet.call(this,l[d],l[p],parseFloat(this.getData("ltPropMinValue"))),t=this.initialValueSet.call(this,l[d],l[p],parseFloat(this.getData("ltPropMaxValue"))),h=this.rangeSliderFill(e,t,l[p])):(e=this.initialValueSet.call(this,l[d],l[p],parseFloat(this.getData("ltPropValue"))),h.width=(parseFloat(this.getData("ltPropValue"))-parseFloat(this.getData("ltPropMin")))/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*l[d]);a[0].style[c]=e+"px",f.style[d]=h.width+"px",a[1]&&(a[1].style[c]=t+"px",f.style[c]=h.left+"px")},directionObsObs:function(){this.directionObs.call(this)}.observes("ltPropDirection"),directionObs:function(){this.getData("preventObs")||$L.fastdom.mutate(function(){var e=this.$node.querySelector(".lyteSliderHandler");e.style.removeProperty(this.rtlfunc.call(this,"left")),e.style.removeProperty("top");var t=this.$node.querySelector(".lyteSliderFill");t.style.removeProperty("width"),t.style.removeProperty("height"),this.setData("preventObs",!0),this.heightSet.call(this),$L.fastdom.measure(function(){this.didConnectWrk.call(this),this.setData("preventObs",!1)}.bind(this))}.bind(this))},MaxMinSet:function(){var e=[],t=this.getData("ltPropScaleUnit");return this.getData("ltPropContent").length?(e.push(this.getData("ltPropContent")[0]+t),e.push(this.getData("ltPropContent")[this.getData("ltPropContent").length-1]+t)):(e.push(this.getData("ltPropMin")+t),e.push(this.getData("ltPropMax")+t)),e},selectedVal:function(e,t,a,o,i){this.$node.querySelector("div.lyteSlide");var r,n=e[a];if(r=o?((parseFloat(o.style[i])+t[a]/2)/n*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))+parseFloat(this.getData("ltPropMin"))).toFixed(this.data.ltPropDigits):(parseFloat(this.$node.querySelector("div.lyteSliderFill").style[a])/n*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))+parseFloat(this.getData("ltPropMin"))).toFixed(this.data.ltPropDigits),this.getData("ltPropContent").length){var s=parseFloat(r)/parseFloat(this.getData("ltPropScaleInterval"));r=r>100?this.getData("ltPropContent")[this.getData("ltPropContent").length-1]:this.getData("ltPropContent")[parseInt(parseFloat(s).toFixed(0))]}return r},onSelect:function(e){(this.getMethods("onChange")||this.getMethods("onSelect"))&&(this.getData("ltPropRangeHandler")?(this.getMethods("onChange")&&this.executeMethod("onChange",this.getData("ltPropSelectedValue1"),this.getData("ltPropSelectedValue2"),this.$node),this.getMethods("onSelect")&&e&&this.executeMethod("onSelect",this.getData("ltPropSelectedValue1"),this.getData("ltPropSelectedValue2"),this.$node)):(this.getMethods("onChange")&&this.executeMethod("onChange",this.getData("ltPropSelectedValue1"),this.$node),this.getMethods("onSelect")&&e&&this.executeMethod("onSelect",this.getData("ltPropSelectedValue1"),this.$node)))},scroll:function(e,t){var a=parseFloat(this.getData("ltPropDiscrete")),o=!1,i=!1,r=!1;return e>=parseFloat(this.getData("ltPropMax"))-(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))%a?(a=(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))%a,i=!0,o=!0):e-parseFloat(this.getData("ltPropDiscrete"))/2<parseFloat(this.getData("ltPropMin"))&&(o=!0,r=!0),o?e>parseFloat(this.getData("ltPropMax"))-a/2?e=i?parseFloat(this.getData("ltPropMax")):e-(e-parseFloat(this.getData("ltPropMin")))%a+a:(a=parseFloat(this.getData("ltPropDiscrete")),r?e=parseFloat(this.getData("ltPropMin")):e-=(e-parseFloat(this.getData("ltPropMin")))%a):(e-parseFloat(this.getData("ltPropMin")))%a>=parseFloat(this.getData("ltPropDiscrete"))/2?e=e-(e-parseFloat(this.getData("ltPropMin")))%a+a:e-=(e-parseFloat(this.getData("ltPropMin")))%a,(e-parseFloat(this.getData("ltPropMin")))/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*t},ScrollCheck:function(e,t,a,o,i,r,n,s){var l="touchmove"==s.type,d=s;if(!l||1==s.touches.length){l&&(d=s.touches[0]);var p,c,h,u,f,y,m,g,v,b=!0,P=this.$node.querySelector("div.lyteSlide"),D=this.getData("ltPropRangeHandler"),_=this.$node.querySelector("div.lyteSliderFill"),L=window.innerWidth,C=this.rtlfunc.call(this,o,d,L);D?(p=this.$node.querySelector("div.lyteHandler2"),c=this.$node.querySelector("div.lyteHandler1"),h=this.$node.querySelector("div.lyteRangeSlider"),u=c.getBoundingClientRect(),f=p.getBoundingClientRect(),(m=this.rtlfunc.call(this,t,f,L))-(y=this.rtlfunc.call(this,t,u,L))<=0?this._elem?this._elem.classList.contains("lyteHandler1")?C<y+u[a]&&m-y==0?b=!0:("mousemove"==s.type||l)&&(b=!1):this._elem.classList.contains("lyteHandler2")&&(C>m&&m-y==0?b=!0:("mousemove"==s.type||l)&&(b=!1)):("mousemove"==s.type||l)&&(b=!1):this.getData("ltPropDiscrete")&&parseFloat(this.getData("ltPropDiscrete")),g=C-this.rtlfunc.call(this,t,h.getBoundingClientRect(),L)):g=C-this.rtlfunc.call(this,t,_.getBoundingClientRect(),L),this.getData("ltPropContent").length&&"click"==s.type&&D&&parseInt(m-y)<1/(this.getData("ltPropContent").length-1)*this.$node[r]&&C<m+f[a]&&C>y+u[a]&&(b=!1),parseFloat(this.getData("ltPropDiscrete"));var w=this.$node.querySelector("div.lyteSliderHandler"),T=e.getBoundingClientRect(),x=P.getBoundingClientRect();if(this.getData("ltPropDiscrete")){var S=g/x[a]*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))+parseFloat(this.getData("ltPropMin"));g=this.scroll.call(this,S,x[a])}if(v=(v=(v=(g=(g=g<x[a]?g:x[a])>0?g:0)-T[a]/2)>x[a]-w[i]/2?x[a]-w[i]/2:v)>-T[a]/2?v:-T[a]/2,D&&(e.classList.contains("lyteHandler1")?this.rtlfunc.call(this,n,p)<v&&(b=!1):this.rtlfunc.call(this,n,c)>v&&(b=!1)),e.focus(),b){if(t=this.rtlfunc.call(this,t),D){var A,E;if(e.classList.contains("lyteHandler1")){E=parseInt(p.style[t]);var M=this.minMaxCheck(x,u,a);A=v=Math.min(Math.max(v,M[0]),E-M[1])}else A=parseInt(c.style[t]),M=this.minMaxCheck(x,u,a,!0),E=v=Math.max(Math.min(v,M[0]),A+M[1]);var $=this.rangeSliderFill.call(this,A,E,u[a]);_.style[t]=$.left+"px",_.style[a]=$.width+"px"}else _.style[a]=g+"px";e.style[t]=v+"px"}$L.fastdom.measure(function(){this.selectedValFind.call(this,x,T)}.bind(this)),s.stopPropagation(),s.preventDefault(),s&&/mousemove|touchmove/i.test(s.type)&&e.tooltip&&e.tooltip.refresh&&e.tooltip.refresh({clientX:Math.max(Math.min(s.clientX,x.right),x.left)},e.tooltip.tooltipSpan)}},minMaxCheck:function(e,t,a,o){var i=(this.getData("ltPropMinDiff")||0)*e[a]/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")));return[o?e[a]-i-t[a]/2:i-t[a]/2,i]},selectedValFind:function(e,t){if(this.setData("preventObs",!0),this.getData("ltPropRangeHandler")){if(-1==this.getData("ltPropDirection").indexOf("Horizontal"))this.setData("ltPropMinValue",this.selectedVal.call(this,e,t,"height",this.$node.querySelector("div.lyteHandler1"),"top").toString()),this.setData("ltPropMaxValue",this.selectedVal.call(this,e,t,"height",this.$node.querySelector("div.lyteHandler2"),"top").toString());else{var a=this.rtlfunc.call(this,"left");this.setData("ltPropMinValue",this.selectedVal.call(this,e,t,"width",this.$node.querySelector("div.lyteHandler1"),a).toString()),this.setData("ltPropMaxValue",this.selectedVal.call(this,e,t,"width",this.$node.querySelector("div.lyteHandler2"),a).toString())}this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))}else-1==this.getData("ltPropDirection").indexOf("Horizontal")?this.setData("ltPropValue",this.selectedVal.call(this,e,t,"height").toString()):this.setData("ltPropValue",this.selectedVal.call(this,e,t,"width").toString()),this.setData("ltPropSelectedValue1",this.getData("ltPropValue"));this.setData("preventObs",!1)},initialValueSet:function(e,t,a){var o=parseFloat(this.getData("ltPropMax")),i=parseFloat(this.getData("ltPropMin"));return(a-i)/(o-i)*e-t/2},rangeSliderFill:function(e,t,a){return{width:t-e,left:e+a/2}},keyCheck:function(e,t,a,o,i,r){o=this.rtlfunc.call(this,o);var n,s=this.$node.querySelector("div.lyteSliderFill"),l=(window.innerWidth,t.getBoundingClientRect()),d={},p=this.getData("ltPropRangeHandler"),c=this.$node.getBoundingClientRect(),h=1,u=this.$node.querySelectorAll("div.lyteSliderHandler"),f=-1!=this.getData("ltPropDirection").indexOf("Horizontal"),y=parseFloat(this.getData("ltPropStep")),m=e.keyCode||e.which;switch(y||(y=.1*parseFloat(this.getData("ltPropMax"))),this._dir?39==m&&f&&(h=-1):(37==m&&f||38==m&&!f)&&(h=-1),m){case 34:y*=5,h=-1;break;case 35:y=parseInt(this.data.ltPropMax);break;case 36:y=parseInt(this.data.ltPropMax),h=-1;break;case 33:y*=5}if(n=parseFloat(t.style[o])+y/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*c[a]*h,n=Math.min(Math.max(-l[a]/2,n),c[a]-l[a]/2),p){var g,v;if(t==u[0]){v=parseInt(u[1].style[o]);var b=this.minMaxCheck(c,l,a);g=n=Math.min(Math.max(n,b[0]),v-b[1])}else g=parseInt(u[0].style[o]),b=this.minMaxCheck(c,l,a,!0),v=n=Math.max(Math.min(n,b[0]),g+b[1]);if(g>v){if(parseInt(u[0].style[o])==v)return;37==e.keyCode||38==e.keyCode?v=n=g:39!=e.keyCode&&40!=e.keyCode||(g=n=v)}d=this.rangeSliderFill.call(this,g,v,l[a])}else d.width=n+l[a]/2;t.style[o]=n+"px",s.style[a]=d.width+"px",p&&(s.style[o]=d.left+"px"),$L.fastdom.measure(function(){this.selectedValFind.call(this,c,l)}.bind(this))},mousemove:function(e){var t,a,o,i,r,n;this._mousemoved=!0,this._flag||(this._flag=!0),-1!=this.getData("ltPropDirection").indexOf("Horizontal")?(t="left",a="width",o="clientX",i="offsetWidth",i="offsetWidth",r="ltPropWidth",n="offsetLeft"):(t="top",a="height",o="clientY",i="offsetHeight",i="offsetHeight",r="ltPropHeight",n="offsetTop"),this.ScrollCheck.call(this,this._elem,t,a,o,i,r,n,e),$L.fastdom.measure(function(){this.getMethods("onChange")&&this.onSelect.call(this)}.bind(this))},eventListener:function(e,t){var a="touchstart"==e.type,o=a?e.touches[0]:e,i=window.innerWidth,r=this.rtlfunc.call(this,"clientX",o,i),n=this.$node.querySelector("div.lyteRangeSlider").getBoundingClientRect();r>this.rtlfunc.call(this,"left","clientRect",i)?r-this.rtlfunc.call(this,"left","clientRect",i)-parseFloat(n.width-parseFloat(n.width/2))>0&&e.preventDefault():e.preventDefault();var s=o.clientY;s>=n.top?s-n.top-parseFloat(n.height-parseFloat(n.height/2))>0&&e.preventDefault():e.preventDefault(),this._mousemove=this.mousemove.bind(this),this._mouseup=this.mouseup.bind(this),this._elem=t,document.addEventListener(a?"touchmove":"mousemove",this._mousemove,!0),document.addEventListener(a?"touchend":"mouseup",this._mouseup,!0)},rangeInitialSet:function(e,t){return t/(this.getData("ltPropContent").length-1)*this.$node[e]-this.$node.querySelector("div.lyteSliderHandler")[e]/2},didConnect:function(){this.directionObs.call(this),this.valueSelected.call(this),$L.fastdom.mutate(function(){this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}.bind(this))},valueSelected:function(){this.getData("ltPropRangeHandler")?(this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))):this.setData("ltPropSelectedValue1",this.getData("ltPropValue"))},mouseup:function(e){this.$node.querySelector("div.lyteRangeSlider");var t="touchend"==e.type;document.removeEventListener(t?"touchmove":"mousemove",this._mousemove,!0),document.removeEventListener(t?"touchend":"mouseup",this._mouseup,!0),delete this._mousemove,delete this._mouseup,delete this._elem,this.$node.contains(e.correspondingElement||e.target)&&(this._prevclick=!0),this._mousemoved&&$L.fastdom.measure(this.onSelect.bind(this,!0)),delete this._mousemoved},data:function(){return{divLength:Lyte.attr("array",{default:[]}),scaleVal:Lyte.attr("array",{default:[]}),ltPropMin:Lyte.attr("string",{default:"0"}),ltPropMax:Lyte.attr("string",{default:""}),ltPropScaleInterval:Lyte.attr("string",{default:""}),ltPropStep:Lyte.attr("string",{default:""}),ltPropHandler:Lyte.attr("string",{default:"lyteArrow"}),ltPropDirection:Lyte.attr("string",{default:"lyteHorizontal"}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropFillColor:Lyte.attr("string",{default:""}),ltPropNonFillColor:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:""}),ltPropValue:Lyte.attr("string",{default:""}),ltPropDiscrete:Lyte.attr("string",{default:""}),ltPropContent:Lyte.attr("array",{default:[]}),ltPropRangeHandler:Lyte.attr("boolean",{default:!1}),ltPropMinValue:Lyte.attr("string",{default:""}),ltPropMaxValue:Lyte.attr("string",{default:""}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropSelectedValue1:Lyte.attr("string",{default:""}),ltPropSelectedValue2:Lyte.attr("string",{default:""}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropTooltipStyle:Lyte.attr("string",{default:""}),ltPropTooltip:Lyte.attr("boolean",{default:!0}),ltPropScaleUnit:Lyte.attr("string",{default:""}),ltPropTooltipClass:Lyte.attr("string",{default:""}),ltPropTooltipConfig:Lyte.attr("object"),ltPropMinDiff:Lyte.attr("number",{default:0}),ltPropDigits:Lyte.attr("number",{default:2}),preventObs:Lyte.attr("boolean",{default:!1})}},actions:{click:function(e){if(this._prevclick)delete this._prevclick;else{var t="left",a="width",o="clientX",i="offsetWidth",r="ltPropWidth",n="offsetLeft",s=window.innerWidth;if(-1==this.getData("ltPropDirection").indexOf("Horizontal")&&(t="top",a="height",o="clientY",i="offsetHeight",r="ltPropHeight",n="offsetTop"),this.getData("ltPropRangeHandler")){var l=this.rtlfunc.call(this,o,e,s),d=this.$node.querySelector("div.lyteHandler1"),p=this.$node.querySelector("div.lyteHandler2"),c=d.getBoundingClientRect(),h=p.getBoundingClientRect();Math.abs(this.rtlfunc.call(this,t,c,s)-this.rtlfunc.call(this,t,h,s))>0?this.rtlfunc.call(this,t,c,s)+c[a]+Math.abs(this.rtlfunc.call(this,t,c,s)-this.rtlfunc.call(this,t,h,s))/2<l?this.ScrollCheck.call(this,p,t,a,o,i,r,n,e):this.rtlfunc.call(this,t,c,s)+c[a]+Math.abs(this.rtlfunc.call(this,t,c,s)-this.rtlfunc.call(this,t,h,s))/2!=l&&this.ScrollCheck.call(this,d,t,a,o,i,r,n,e):this.rtlfunc.call(this,t,c,s)==this.rtlfunc.call(this,t,h,s)&&(l<this.rtlfunc.call(this,t,c,s)?this.ScrollCheck.call(this,d,t,a,o,i,r,n,e):this.ScrollCheck.call(this,p,t,a,o,i,r,n,e))}else this.ScrollCheck.call(this,this.$node.querySelector("div.lyteSliderHandler"),t,a,o,i,r,n,e);$L.fastdom.measure(function(){this.onSelect.call(this,!0)}.bind(this)),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}},keydown:function(e){var t=e.keyCode||e.which,a=this.data,o=/horizontal/i.test(a.ltPropDirection),i=a.ltPropDiscrete;if(!(!/^3(3|4|5|6|7|8|9)|40$/.test(t)||/^37|39$/.test(t)&&!o||/^38|40$/.test(t)&&o)){i&&this.setData("ltPropStep",i);var r=e.target,n="width",s="left",l="offsetWidth",d="ltPropWidth";o||(n="height",s="top",l="offsetHeight",d="ltPropHeight"),a.ltPropRangeHandler||(r=this.$node.querySelector("div.lyteSliderHandler")),this.keyCheck(e,r,n,s,l,d),$L.fastdom.mutate(this.onSelect.bind(this,!0)),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}},mousedown:function(e,t){2!=e.button&&this.eventListener.call(this,e,t)}}}),Lyte.Component.register("lyte-progressbar",{_template:'<template tag-name="lyte-progressbar"> <template is="if" value="{{lyteUiIfEquals(ltPropType,\'circle\')}}"><template case="true"> <div class="lyteProgressBar lyteCircle" style="{{lyteUiConcat(\'width:\',lyteUiSetWH(ltPropRadius),\'px; height:\',lyteUiSetWH(ltPropRadius),\'px;\')}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}" aria-live="polite"> <div class="lyteCircleType"> <svg class="svgValueEle" width="{{lyteUiSetWH(ltPropRadius)}}" height="{{lyteUiSetWH(ltPropRadius)}}"> <circle class="ltProgressCircle" cx="{{ltPropRadius}}" cy="{{ltPropRadius}}" r="{{lyteUiSetRadius(ltPropRadius,ltPropStroke)}}" fill="none" stroke="#DCE0E3" stroke-width="{{ltPropStroke}}"></circle> <circle class=" ltProgressFillCircle" cx="{{ltPropRadius}}" cy="{{ltPropRadius}}" r="{{lyteUiSetRadius(ltPropRadius,ltPropStroke)}}" fill="none" stroke="{{ltPropBackground}}" stroke-width="{{ltPropStroke}}" stroke-dasharray="{{lyteUiSetDashArray(ltPropRadius,ltPropStroke)}}" stroke-dashoffset="{{lyteUiSetDashArray(ltPropRadius,ltPropStroke)}}"></circle> </svg> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <svg width="{{lyteUiSetWH(ltPropRadius)}}" height="{{lyteUiSetWH(ltPropRadius)}}" style="transform:{{lyteUiTextTransform(ltPropRadius)}}" viewBox="{{lyteUiConcat(\'0 \',\'0 \',lyteUiSetWH(ltPropRadius),\' \',lyteUiSetWH(ltPropRadius))}}" fill="{{if(ltPropLabelColor,ltPropLabelColor,\'#333\')}}" aria-hidden="true"> <text font-size="{{if(ltPropFontSize,ltPropFontSize,\'1.5rem\')}}" text-anchor="middle" dy=".2em" x="50%" y="50%"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </text> </svg> </template></template> </div> </div> </template><template case="false"><template is="if" value="{{lyteUiIfEquals(ltPropType,\'stacked\')}}"><template case="true"> <div class="{{lyteUiConcat(\'lyteProgressBar\',\' lyteHorizontal\',\' lyteStacked\')}} " style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}"> <template is="for" items="{{chunks}}" item="item" index="index"> <span class="lyteProgressStatusStack" style="{{lyteUiConcat(\'width: \',\'0% ;\',\'background:\',lyteUiGetStackValue(ltPropStack,index,\'color\'),\';\')}}"> <template is="if" value="{{lyteUiGetStackValue(ltPropStack,index,\'animated\')}}"><template case="true"> <span class="ltPropProgressAnimated progressMovingObj"></span> </template></template> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <span case="true" class="lyteProgressPercentageStack" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(lyteUiGetStackValue(ltPropStack,index,\'labelColor\'),lyteUiGetStackValue(ltPropStack,index,\'labelColor\'),\'#fff\'),\';\')}}" aria-hidden="true"> {{lyteUiProgressbarLabel(lyteUiGetStackValue(ltPropStack,index,\'label\'),\'\')}} </span> </template></template> </span> </template> </div> </template><template case="false"><template is="if" value="{{lyteUiIfEquals(ltPropType,\'vertical\')}}"><template case="true"> <div class="lyteProgressBar lyteVertical" style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}"> <span class="{{lyteUiConcat(\'lyteProgressStatusVertical \',ltPropDirection)}}" style="{{lyteUiConcat(\'height: \',percentage,\'% ;\',\'transition:\',\'height \',duration,\' \',timingfn,\';\',\'background: \',ltPropBackground,\';\',\'display: block\')}}"> <template is="if" value="{{ltPropShowPercentage}}"><template case="true"> <span case="true" class="lyteProgressPercentage" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(ltPropLabelColor,ltPropLabelColor,\'#fff\'),\';\')}}" aria-hidden="true"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </span> </template></template> </span> </div> </template><template case="false"> <div class="{{lyteUiConcat(\'lyteProgressBar\',\' lyteHorizontal\',if(ltPropIndeterminate,\' lyteIndeterminate\',\'\'))}} " style="{{lyteUiConcat(\'width:\',ltPropWidth,\';height:\',ltPropHeight)}}" role="progressbar" tabindex="0" aria-valuenow="{{percentage}}" aria-label="{{ltPropAriaLabel}}"> <template is="if" value="{{expHandlers(expHandlers(ltPropAnimated,\'!\'),\'&amp;&amp;\',ltPropIndeterminate)}}"><template case="true"> <span class="inc" style="{{lyteUiConcat(\'position: absolute; height: 100%; background: \',ltPropProgressFillColor)}}"></span> <span class="dec" style="{{lyteUiConcat(\'position: absolute; height: 100%; background: \',ltPropProgressFillColor)}}"></span> </template><template case="false"> <span class="lyteProgressStatus" style="{{lyteUiConcat(\'width: 0px;\',\'background:\',ltPropBackground)}}"> <template is="if" value="{{ltPropAnimated}}"><template case="true"> <span class="ltPropProgressAnimated progressMovingObj"></span> </template></template> <template is="if" value="{{expHandlers(expHandlers(ltPropIndeterminate,\'!\'),\'&amp;&amp;\',ltPropShowPercentage)}}"><template case="true"> <span case="true" class="lyteProgressPercentage" style="{{lyteUiConcat(\'line-height:\',ltPropHeight,\'; font-size: \',if(ltPropFontSize,ltPropFontSize,\'12px\'),\'; color: \',if(ltPropLabelColor,ltPropLabelColor,\'#fff\'),\';\')}}" aria-hidden="true"> {{lyteUiProgressbarLabel(ltPropLabel,percentageDisplay,ltPropPercentage)}} </span> </template></template> </span> </template></template> </div> </template></template></template></template></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'",{type:"helper",value:{name:"lyteUiSetWH",args:["ltPropRadius"]}},"'px; height:'",{type:"helper",value:{name:"lyteUiSetWH",args:["ltPropRadius"]}},"'px;'"]}}}},{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'transform:'",{type:"helper",value:{name:"lyteUiTextTransform",args:["ltPropRadius"]}}]}}}},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width: '","'0% ;'","'background:'",{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'color'"]}},"';'"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:[{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'labelColor'"]}},{type:"helper",value:{name:"lyteUiGetStackValue",args:["ltPropStack","index","'labelColor'"]}},"'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'height: '","percentage","'% ;'","'transition:'","'height '","duration","' '","timingfn","';'","'background: '","ltPropBackground","';'","'display: block'"]}}}},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:["ltPropLabelColor","ltPropLabelColor","'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width:'","ltPropWidth","';height:'","ltPropHeight"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'position: absolute; height: 100%; background: '","ltPropProgressFillColor"]}}}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'position: absolute; height: 100%; background: '","ltPropProgressFillColor"]}}}}]},false:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'width: 0px;'","'background:'","ltPropBackground"]}}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"lyteUiConcat",args:["'line-height:'","ltPropHeight","'; font-size: '",{type:"helper",value:{name:"if",args:["ltPropFontSize","ltPropFontSize","'12px'"]}},"'; color: '",{type:"helper",value:{name:"if",args:["ltPropLabelColor","ltPropLabelColor","'#fff'"]}},"';'"]}}}},{type:"text",position:[1,1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropType","ltPropProgressFillColor","ltPropCompletedFillColor","ltPropWidth","ltPropHeight","ltPropRadius","ltPropStroke","ltPropValueCopy","ltPropAnimated","ltPropShowPercentage","ltPropProgressProperty","ltPropLabel","ltPropFontSize","ltPropLabelColor","ltPropIndeterminate","ltPropStack","ltPropDirection","ltPropPercentage","lyteUnbound","ltPropAriaLabel","percentage","duration","timingfn","percentageDisplay","checkIndeterminate","chunks","prevValues"],init:function(){this.getData("ltPropWidth")||this.setData("ltPropWidth","vertical"==this.getData("ltPropType")?"20px":"100%"),this.getData("ltPropHeight")||this.setData("ltPropHeight","vertical"==this.getData("ltPropType")?"200px":"12px")},didConnect:function(){this.getData("ltPropIndeterminate")?this.setData("checkIndeterminate",this.getData("checkIndeterminate")+1):("stacked"==this.getData("ltPropType")&&(this.stackId=[]),$L.fastdom.mutate(this.setBackground.bind(this)));var e=this;this.$node.value=function(t){e.setData("ltPropProgressProperty.value",t)}},setChunks:function(){if("stacked"==this.getData("ltPropType")){var e=this.getData("chunks"),t=this.getData("ltPropStack"),a=this.getData("prevValues");if(e.length!=t.length){e=[];for(var o=0;o<t.length;o++)e.push(o);if(this.setData("chunks",e),0==a.length)for(o=0;o<t.length;o++)a.push(0);else if(a.length>t.length)a.splice(t.length);else if(a<t.length)for(o=a.length;o<t.length;o++)a.push(0);this.setData("prevValues",a)}}}.observes("ltPropStack.[]").on("init"),setProgressFillColor:function(){this.setData("ltPropBackground",this.getData("ltPropProgressFillColor"))}.observes("ltPropProgressFillColor"),data:function(){return{ltPropType:Lyte.attr("string",{default:"bar"}),ltPropProgressFillColor:Lyte.attr("string",{default:"#42a2eb"}),ltPropCompletedFillColor:Lyte.attr("string",{default:"#3fbd5f"}),ltPropWidth:Lyte.attr("string"),ltPropHeight:Lyte.attr("string"),ltPropRadius:Lyte.attr("string",{default:"50"}),ltPropStroke:Lyte.attr("string",{default:"5"}),ltPropValueCopy:Lyte.attr("string",{default:"0"}),ltPropAnimated:Lyte.attr("boolean",{default:!0}),ltPropShowPercentage:Lyte.attr("boolean",{default:!0}),ltPropProgressProperty:Lyte.attr("object",{default:{value:"0",duration:"0s"}}),ltPropLabel:Lyte.attr("string"),ltPropFontSize:Lyte.attr("string"),ltPropLabelColor:Lyte.attr("string"),ltPropIndeterminate:Lyte.attr("boolean",{default:!1}),ltPropStack:Lyte.attr("array",{default:[]}),ltPropDirection:Lyte.attr("string",{default:"up"}),ltPropPercentage:Lyte.attr("boolean",{default:!0}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropAriaLabel:Lyte.attr("string",{default:"loading"}),percentage:Lyte.attr("string",{default:"0"}),duration:Lyte.attr("string",{default:"2s"}),timingfn:Lyte.attr("string",{default:"linear"}),percentageDisplay:Lyte.attr("string",{default:"0"}),checkIndeterminate:Lyte.attr("number",{default:0}),chunks:Lyte.attr("array",{default:[]}),prevValues:Lyte.attr("array",{default:[]})}},didDestroy:function(){this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.iId&&(window.clearInterval(this.iId),this.iId=!1),this.stackId&&this.stackId.forEach((function(e,t){e&&(window.clearTimeout(this.sid),e=!1)}))},PerValue:function(e){var t=this.getData("ltPropType"),a=this.getData("duration"),o=this.getData("timingfn"),i=this.getData("percentage");switch(t){case"circle":var r=6.28318*(this.data.ltPropRadius-this.data.ltPropStroke/2),n=this.$node.querySelector(".ltProgressFillCircle");n.style.transition="stroke-dashoffset "+a+" "+o;var s=r*(1-e/100);setTimeout((function(){n.setAttribute("stroke-dashoffset",s)}),10);break;case"stacked":for(var l=$L(".lyteProgressStatusStack",this.$node),d=this.getData("ltPropStack"),p=(l=$L(".lyteProgressStatusStack",this.$node),d=this.getData("ltPropStack"),0);p<d.length;p++)o=d[p].timingfn||"linear",a=d[p].duration||"0s",l[p].style.transition="width "+a+" "+o;setTimeout((function(){!function(){for(var e=0;e<d.length;e++)l[e].style.width=d[e].value+"%"}()}),10);break;default:var c=$L(".lyteProgressStatus",this.$node)[0];c.style.transition="width "+a+" "+o,setTimeout((function(){c.style.width=i+"%"}),10)}},observeIndeterminate:function(){"bar"==this.getData("ltPropType")&&this.getData("ltPropIndeterminate")&&this.getData("ltPropAnimated")&&(this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration","0s"),this.setData("percentage","100"))}.observes("ltPropIndeterminate","checkIndeterminate"),ChangePercentage:function(){this.getData("ltPropIndeterminate")||this.setBackground()},percentageChange:function(e){this.ChangePercentage()}.observes("ltPropProgressProperty","ltPropStack.[]","ltPropProgressProperty.value"),setBackground:function(){var e=parseFloat(this.getData("ltPropProgressProperty").value),t=this.getData("ltPropProgressProperty").duration?this.getData("ltPropProgressProperty").duration:this.getData("duration");if(this.getData("ltPropProgressProperty").timingfn&&this.setData("timingfn",this.getData("ltPropProgressProperty").timingfn),"circle"===this.getData("ltPropType"))if(parseInt(e)>=100){this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t);var a=this;this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){a.sid=!1,a.node?(a.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),a.setData("ltPropBackground",a.getData("ltPropCompletedFillColor"))):clearTimeout(a.sid)}),t)}else this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration",t),this.setData("percentage",e+"");else{if("stacked"===this.getData("ltPropType")){var o=this.getData("ltPropStack"),i=this.$node.querySelectorAll(".lyteProgressStatusStack"),r=this.getData("prevValues"),n=0;this.setData("duration",t);for(var s=0;s<o.length;s++){if(e=parseFloat(o[s].value),o[s].animated){var l=i[s].querySelector(".ltPropProgressAnimated");l.classList.add("progressMovingObj"),l.style.transition="left "+t+" linear, width "+t+" linear",l.style.left=n+"%",l.style.width=e+"%"}if(n+=e,o[s].label)i[s].querySelector(".lyteProgressPercentageStack").innerHTML=o[s].label;else{dur=parseFloat(o[s].duration||t),this.stackId[s]&&(clearInterval(this.stackId[s]),this.stackId[s]=!1);var d=r[s]||0,p=(a=this,{ind:s,value:e,ele:i[s].querySelector(".lyteProgressPercentageStack"),p:d,stack:o[s]});if(0==dur)r[s]=e,this.getData("ltPropShowPercentage")&&(p.ele.textContent=e+(this.getData("ltPropPercentage")?"%":""));else if(d>e){var c=d-e;p.margin=c/(1e3*dur)*100,this.stackId[s]=setInterval(this.changePercentageDisplay,100,"dec",p,this)}else d<e&&(c=e-d,p.margin=c/(1e3*dur)*100,this.stackId[s]=setInterval(this.changePercentageDisplay,100,"inc",p,this))}}return void this.PerValue(this.data.ltPropProgressProperty.value)}"vertical"===this.getData("ltPropType")?parseInt(e)>=100?(this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t),a=this,this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){a.sid=!1,a.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),a.setData("ltPropBackground",a.getData("ltPropCompletedFillColor"))}),t)):(this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("duration",t),this.setData("percentage",e+"")):parseInt(e)>=100?(this.setData("duration",t),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.setData("percentage","100"),t=1e3*parseFloat(t),a=this,this.sid&&(window.clearTimeout(this.sid),this.sid=!1),this.sid=setTimeout((function(){a.sid=!1,a.$node.querySelector(".lyteProgressBar").classList.add("lyteProgressCompleted"),a.setData("ltPropBackground",a.getData("ltPropCompletedFillColor")),a.getData("ltPropAnimated")&&a.$node.querySelector(".lyteProgressBar .ltPropProgressAnimated").classList.remove("progressMovingObj")}),t)):(this.sid&&(clearTimeout(this.sid),this.sid=!1),this.$node.querySelector(".lyteProgressBar").classList.remove("lyteProgressCompleted"),this.setData("ltPropBackground",this.getData("ltPropProgressFillColor")),this.getData("ltPropAnimated")&&this.$node.querySelector(".lyteProgressBar .ltPropProgressAnimated").classList.add("progressMovingObj"),this.setData("duration",t),this.setData("percentage",e+""))}if(this.iId&&(clearInterval(this.iId),this.iId=!1),d=parseFloat(this.getData("percentageDisplay")),a=this,0==parseInt(this.getData("duration")))this.setData("percentageDisplay",e+"");else if(d>e){var h=(c=d-e)/(1e3*parseInt(this.getData("duration")))*100;this.iId=setInterval((function(){if(d-=h,!a.$node)return clearInterval(a.iId),void(a.iId=!1);a.setData("percentageDisplay",Math.max(parseFloat(d.toFixed(2)),e)+""),parseFloat(d)==e&&(clearInterval(a.iId),a.iId=!1)}),100)}else d<e&&(h=(c=e-d)/(1e3*parseInt(this.getData("duration")))*100,this.iId=setInterval((function(){if(d+=h,!a.$node)return clearInterval(a.iId),void(a.iId=!1);a.setData("percentageDisplay",Math.min(parseFloat(d.toFixed(2)),e)+""),parseFloat(d)>=e&&(clearInterval(a.iId),a.iId=!1)}),100));this.PerValue(this.data.ltPropProgressProperty.value)},changePercentageDisplay:function(e,t,a){if("inc"==e?t.p+=t.margin:t.p-=t.margin,!a.$node)return clearInterval(a.stackId[t.ind]),void(a.stackId[t.ind]=!1);var o="inc"==e?Math.min(parseFloat(t.p.toFixed(2)),t.value):Math.max(parseFloat(t.p.toFixed(2)),t.value);a.getData("ltPropShowPercentage")&&(t.ele.textContent=o+(a.getData("ltPropPercentage")?"%":"")),("inc"==e&&parseFloat(o)>=t.value||"dec"==e&&parseFloat(o)==t.value)&&(clearInterval(a.stackId[t.ind]),Lyte.arrayUtils(a.getData("prevValues"),"replaceAt",t.ind,t.value),a.stackId[t.ind]=!1)},setCircleStroke:function(e,t){var a=e.getAttribute("stroke-dasharray")*(1-parseInt(t)/100);e.setAttribute("stroke-dashoffset",a)},actions:{}}),Lyte.Component.register("lyte-number",{_template:'<template tag-name="lyte-number"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <label for="{{ltPropId}}" class="lyteLabel">{{ltPropLabel}}</label> </template></template> <div class="lyteField"> <input type="text" name="{{ltPropName}}" class="{{ltPropClass}}" id="{{ltPropId}}" placeholder="{{ltPropPlaceholder}}" value="{{lbind(ltPropValue)}}" onkeydown="{{action(\'keydown\',event,this)}}" onpaste="{{action(\'paste\',event,this)}}" oninput="{{action(\'input\',event,this)}}" onfocus="{{action(\'focus\',event,this)}}" onblur="{{action(\'blur\',event,this)}}" onwheel="{{action(\'wheel\',event,this)}}" disabled="{{ltPropDisabled}}" readonly="{{ltPropReadonly}}" style="{{ltPropStyle}}" title="{{ltPropInputTitle}}" pattern="{{ltPropPattern}}" autocomplete="{{ltPropAutocomplete}}" tabindex="{{ltPropTabIndex}}" data-tabindex="{{ltPropDataTabindex}}"> <template is="if" value="{{ltPropControls}}"><template case="true"> <div class="lyteNumberArrowContainer" onclick="{{action(\'change_value\',event,this)}}"> <div class="lyteNumberUpArrow"></div> <div class="lyteNumberDownArrow"></div> </div> </template></template> </div> <template is="if" value="{{expHandlers(ltPropError,\'&amp;&amp;\',errorMessage)}}"><template case="true"> <span class="lyteNumberErrorMessage">{{errorMessage}}</span> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3,1],attr:{style:{name:"style",dynamicValue:"ltPropStyle"}}},{type:"attr",position:[3,3]},{type:"if",position:[3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}],_observedAttributes:["ltPropValue","ltPropMaxlength","ltPropName","ltPropClass","ltPropId","ltPropPlaceholder","ltPropIgnoreSymbols","ltPropStep","ltPropInverse","ltPropWheel","ltPropMax","ltPropMin","ltPropAutofocus","ltPropDisabled","ltPropReadonly","ltPropStyle","ltPropInputTitle","ltPropPattern","ltPropUpdateDelay","ltPropLabel","ltPropAutocomplete","ltPropAppearance","ltPropDirection","ltPropValidateOnInput","ltPropAutoUpdate","ltPropDecimal","ltPropIncrement","ltPropAria","ltPropAriaAttributes","ltPropRemoveAtCursor","ltPropFireOnInit","ltPropValidateOnEmpty","ltPropRestrict","ltPropInputWrapperClass","ltPropTabIndex","ltPropValidation","ltPropMandatory","ltPropTriggerValidation","ltPropErrorMessage","ltPropDefaultErrorMessage","ltPropError","ltPropClearValidation","ltPropDataTabindex","ltPropControls","errorMessage"],didConnect:function(){["focus","blur","click","select"].forEach(function(e){this.$node[e]=function(t){this.$node.querySelector("input")[e](t)}.bind(this)}.bind(this)),this.data.ltPropAutofocus&&this.$node.focus(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)},init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didDestroy:function(){clearTimeout(this._time)},data:function(){return{ltPropValue:Lyte.attr("string",{default:""}),ltPropMaxlength:Lyte.attr("number",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropClass:Lyte.attr("string",{default:void 0}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropIgnoreSymbols:Lyte.attr("boolean",{default:!1}),ltPropStep:Lyte.attr("number",{default:1}),ltPropInverse:Lyte.attr("boolean",{default:!1}),ltPropWheel:Lyte.attr("boolean",{default:!0}),ltPropMax:Lyte.attr("number",{default:void 0}),ltPropMin:Lyte.attr("number",{default:void 0}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropStyle:Lyte.attr("string",{default:""}),ltPropInputTitle:Lyte.attr("string",{default:void 0}),ltPropPattern:Lyte.attr("string",{default:".+"}),ltPropUpdateDelay:Lyte.attr("number",{default:250}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropAutocomplete:Lyte.attr("string",{default:"off"}),ltPropAppearance:Lyte.attr("string",{default:"box"}),ltPropDirection:Lyte.attr("string",{default:"vertical"}),ltPropValidateOnInput:Lyte.attr("boolean",{default:!1}),ltPropAutoUpdate:Lyte.attr("boolean",{default:!0}),ltPropDecimal:Lyte.attr("string",{default:"."}),ltPropIncrement:Lyte.attr("boolean",{default:!0}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{},watch:!0}),ltPropRemoveAtCursor:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:!1}),ltPropValidateOnEmpty:Lyte.attr("boolean",{default:!0}),ltPropRestrict:Lyte.attr("string"),ltPropInputWrapperClass:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("string",{default:"0"}),ltPropValidation:Lyte.attr("string",{default:""}),ltPropMandatory:Lyte.attr("boolean",{default:!1}),ltPropTriggerValidation:Lyte.attr("boolean",{default:!1}),ltPropErrorMessage:Lyte.attr("object",{default:{}}),ltPropDefaultErrorMessage:Lyte.attr("string",{default:"Invalid input"}),ltPropError:Lyte.attr("boolean",{default:!1}),ltPropClearValidation:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:"0"}),ltPropControls:Lyte.attr("boolean",{default:!1}),errorMessage:Lyte.attr("string",{default:""})}},valueObs:function(e){if(!this._init){var t=!e;if(e?e.newValue=e.newValue||"":e={newValue:this.data.ltPropValue||""},this._allowCallback)return delete this._allowCallback,void(this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node));var a=e.newValue;if(t&&!this.data.ltPropFireOnInit&&(this._init=!0),this.validate(a))return this._valueUpdate(""),void delete this._init;if(a=this.maxLenValidation(a),(this.data.ltPropValidateOnEmpty&&!e.newValue||e.newValue)&&(a=this.maxMinCheck(a,!0)),e.newValue!=a)this._valueUpdate(a);else if(!this._init){if(t&&e.newValue==a)return;this.getMethods("onValueChange")&&this.executeMethod("onValueChange",e,this.$node)}delete this._init}}.observes("ltPropValue").on("didConnect"),maxMinOns:function(){this._valueUpdate(this.maxMinCheck(this.data.ltPropValue||"",!0))}.observes("ltPropMax","ltPropMin"),wrp_class_obs:function(e){var t=this.data;e=e||{newValue:t.ltPropInputWrapperClass},$L(this.$node).addClass(e.newValue).removeClass(e.oldValue||"")}.observes("ltPropInputWrapperClass").on("didConnect"),appearanceObs:function(){var e="remove",t="add",a=this.$node.classList;/box/i.test(this.data.ltPropAppearance)&&(e="add",t="remove"),a[t]("lyteInput"),a[e]("lyteInputBox")}.observes("ltPropAppearance").on("didConnect"),control_obs:function(e){e=e||{newValue:this.data.ltPropControls},this.$node.classList[e.newValue?"add":"remove"]("lyteNumberWithArrowKeys")}.observes("ltPropControls").on("didConnect"),directionObs:function(){var e="remove",t="add",a=this.$node.classList;/vertical/i.test(this.data.ltPropDirection)&&(t="remove",e="add"),a[t]("horizontal"),a[e]("vertical")}.observes("ltPropDirection").on("didConnect"),disAbs:function(){this.$node.classList[this.data.ltPropDisabled?"add":"remove"]("lyteNumberDisabled")}.observes("ltPropDisabled").on("didConnect"),readAbs:function(){this.$node.classList[this.data.ltPropReadonly?"add":"remove"]("lyteNumberReadonly")}.observes("ltPropReadonly").on("didConnect"),increment:function(e,t){var a=e.value||"0",o=(Number(a)+this.data.ltPropStep*(t?1:-1)).toString();if(o!=1/0&&o!=-1/0){var i=this.data.ltPropValidation;i||(o=this.maxLenValidation(o),o=this.maxMinCheck(o,!0)),e.value=o,e.selectionEnd=o.length,e.selectionStart=o.length,this.data.ltPropAutoUpdate&&this.valueUpdate(e,"input"==i)}},check_restrict:function(e,t){var a=this.data.ltPropRestrict;if(a){var o=new RegExp(a,"g");if(!t)return e.replace(o,"");var i=o.exec(e);if(i)return e.slice(0,i.index)}return e},actions:{change_value:function(e,t){var a=$L(e.target).hasClass("lyteNumberUpArrow"),o=this.data,i=o.ltPropReadonly;o.ltPropDisabled||(i||this.increment(t.previousElementSibling,a),this.setData("ltPropAutofocus",!0))},keydown:function(e,t){var a,o=e.which||e.keyCode,i=t.selectionStart,r=t.selectionEnd,n=this.data.ltPropIncrement;if(8==o){if(i==r&&0==r)return;this._prevent=!0}else n&&38==o?(this.increment(t,!this.data.ltPropInverse),a=!0):n&&40==o&&(this.increment(t,this.data.ltPropInverse),a=!0);a&&e.preventDefault()},wheel:function(e,t){var a=this.data;if(a.ltPropWheel&&this._focused&&!a.ltPropDisabled&&!a.ltPropReadonly){var o=a.ltPropInverse;e.deltaY>10?this.increment(t,!o):e.deltaY<-10&&this.increment(t,o),e.preventDefault()}},paste:function(e,t){e.preventDefault();var a=e.clipboardData||window.clipboardData,o=t.value,i=t.selectionStart,r=t.selectionEnd,n=this.data,s=n.ltPropDecimal,l=this.check_restrict(a.getData("text").trim().replace(/^(\'|\")|(\'|\")$/,"").replace(new RegExp("[^0-9e\\+\\-\\"+s+"]","g"),""),!0),d=o.slice(0,i)+l+o.slice(r),p=this.validate(d),c=Number(o),h=l.length,u=n.ltPropValidation;if(p&&(d=this.convertToNo(d)),c!=1/0&&c!=-1/0){if(this.getMethods("onBeforePaste")){var f=this.executeMethod("onBeforePaste",t.value,a.getData("text"),d);if(null!=f&&(d=f,0==f))return}c!=1/0&&c!=-1/0&&(u||((d=this.maxLenValidation(d))||!d&&n.ltPropValidateOnEmpty)&&(d=this.maxMinCheck(d,!0)),t.value=d,t.selectionStart=r+h,t.selectionEnd=r+h,n.ltPropAutoUpdate&&this._valueUpdate(t.value,"input"==u))}},input:function(e,t){var a;this._prevent&&(delete this._prevent,this.data.ltPropAutoUpdate&&this.valueUpdate(t),a=!0);var o,i=t.value,r=i,n=t.selectionStart,s=t.selectionEnd,l=!a&&this.validate(i),d=this.data.ltPropValidation;if(l){if(__allow=!0,/insertText/i.test(e.inputType)){var p=e.data,c=parseFloat(p),h=p.length;isNaN(c)?(i=i.slice(0,s-h)+i.slice(s),s=s-h+1):(c=c.toString(),i=i.slice(0,s-h)+c+i.slice(s),s=s-h+1+c.length),(__allow=this.validate(i))&&s--}__allow&&(i=i.slice(0,n-h)+i.slice(s))}else if(i=this.check_restrict(i),!d){var u=this.maxLenValidation(i,n,s);u!=i&&(this.data.ltPropRemoveAtCursor&&(o=!0),i=u),(u=this.maxMinCheck(i,this.data.ltPropValidateOnInput))!=i&&(i=u,o=!1)}t.value=i,l?(t.selectionStart=Math.min(s-1,i.length),t.selectionEnd=Math.min(s-1,i.length)):r!=i?t.selectionStart=t.selectionEnd=o?n-1:i.length:(t.selectionStart=Math.min(n,i.length),t.selectionEnd=Math.min(s,i.length)),this.data.ltPropAutoUpdate&&this.valueUpdate(t,"input"==d)},focus:function(e,t){this._focused=!0,this.$node.classList.add("lyteInputFocus"),this.getMethods("onFocus")&&this.executeMethod("onFocus",e,this.$node)},blur:function(e,t){delete this._focused,this.$node.classList.remove("lyteInputFocus");var a=this.data.ltPropValidation;!a&&(t.value||!t.value&&this.data.ltPropValidateOnEmpty)&&(t.value=this.maxMinCheck(t.value,!0)),this._valueUpdate(t.value,!0),"blur"==a&&this.do_validation(),this.getMethods("onBlur")&&this.executeMethod("onBlur",e,this.$node)}},valueUpdate:function(e,t){e=e||this.$node.getElementsByTagName("input")[0];var a=function(){this._valueUpdate(e.value),t&&this.do_validation()}.bind(this),o=this.data.ltPropUpdateDelay;null==o?a():(clearTimeout(this._time),this._time=setTimeout(a,o))},_valueUpdate:function(e,t){var a,o=e,i="onBeforeValueUpdate";if(t){var r=new RegExp("\\"+this.data.ltPropDecimal+"$");/e$/i.test(e)&&(e=e.replace(/e$/,"")),r.test(e)&&(e=e.replace(r,""))}this.getMethods(i)&&0==(a=this.executeMethod(i,o,e,this.$node))||("string"==typeof a&&(e=a),e!=this.data.ltPropValue&&(this._allowCallback=!0,this.$node.ltProp("value",e)))},validate:function(e){var t,a,o=/e/gi,i=/(\+|\-)/g,r=this.data.ltPropDecimal,n=new RegExp("\\"+r,"g");return o.test(e)&&(e.match(o).length>1&&(a=!0),/^e/i.test(e)?a=!0:(t=/e/gi.exec(e).index,e=e.replace(o,""))),i.test(e)&&(e.match(i).length>1?a=!0:/^(\+|\-)/g.test(e)?e=e.replace(i,""):a=!0),n.test(e)&&(e.match(n).length>1||null!=t&&t<e.indexOf(r)||/^(\+|\-)/g.test(e)&&1==e.indexOf(r)&&2==t||!/^(\+|\-)/g.test(e)&&0==e.indexOf(r)&&1==t?a=!0:e=e.replace(n,"")),!a&&e.length&&(a=!/^\d+$/.test(e)),a},maxLenValidation:function(e,t,a){var o,i=this.data.ltPropMaxlength,r=e.length,n=this.data.ltPropDecimal,s=this.data.ltPropRemoveAtCursor;if(null==i)return e;if(!this.data.ltPropIgnoreSymbols&&(i+=/^(\+|\-)/.test(e)?1:0,new RegExp("\\"+n).test(e)&&(o=new RegExp("\\"+n,"g").exec(e).index,i++),/e/i.test(e))){var l=/e/i.exec(e).index,d=e.slice(l+1),p=parseInt(d);if(d.length){r--;var c=null!=o?e.slice(o+1,l).length:0;if(c<=p&&(null!=o&&(r--,i--),r-=c),r-=d.length,(r+=p)>i){if(p>r-i)return e.slice(0,l)+"e"+(p-(r-i));e=s&&null!=t&&e.length>i?(e=e.split(/e/i)[0]).slice(0,t-1)+e.slice(a):e.split(/e/i)[0].match(new RegExp(".{0,"+i+"}"))[0]}return e}i++}return s&&null!=t&&e.length>i?e.slice(0,t-1)+e.slice(a):e.match(new RegExp(".{0,"+i+"}"))[0]},maxMinCheck:function(e,t){var a=e,o=this.data.ltPropMax,i=this.data.ltPropMin,r=Number(e.replace(new RegExp("\\"+this.data.ltPropDecimal),".")),n=this.getMethods("onBeforeMaxMinValidation");if(null==o&&null==i)return e;if(null!=o&&o<r&&(e=o,e=null==(s=n?this.executeMethod("onBeforeMaxMinValidation","max",a,e,this.$node):e)?e:s),t&&null!=i)if(i>r)e=i,e=i,e=null==(s=n?this.executeMethod("onBeforeMaxMinValidation","min",a,e,this.$node):e)?e:s;else if(0==r&&""==e){var s;e=Math.max(r,i),e=null==(s=n?this.executeMethod("onBeforeMaxMinValidation","min",a,e,this.$node):e)?e:s}return e.toString().replace(/\./,this.data.ltPropDecimal)},removeTwice:function(e,t){var a=e.split(t);return a.length>1&&(e=a.shift()+t.exec(e)[0]+a.join("")),e},convertToNo:function(e){var t,a,o=this.data.ltPropDecimal,i=new RegExp("\\"+o),r=/e/i;return e=this.removeTwice(e,i),e=this.removeTwice(e,r),e=this.removeTwice(e,/\+|\-/i),i.test(e)&&r.test(e)&&((t=i.exec(e).index)>(a=r.exec(e).index)||1==Math.abs(t-a))&&(e=e.replace(t>a?r:i,"")),/^e/i.test(e)&&(e=e.replace(/e/i,"")),/\+|\-/.test(e)&&!/^(\+|\-)/.test(e)&&(null!=a&&/\+|\-/.exec(e).index!=a+1||null==a)&&(e=e.replace(/\+|\-/g,"")),e},focus_obs:function(e){if(e.newValue){this.$node.focus(),this.setData(e.item,!1);var t=this.$node.getElementsByTagName("input")[0];t.selectionStart=t.selectionEnd=t.value.length}}.observes("ltPropAutofocus"),attrObs:function(e){this.data.ltPropAria&&_lyteUiUtils.setAttribute(this.$node.querySelector("input"),this.data.ltPropAriaAttributes||{},e?e.oldValue:{})}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropType").on("didConnect"),single_obs:function(e){if(e.path){var t=e.path.replace(/^\./,""),a=e.newValue;if(this.data.ltPropAria){var o={};o[t]=a,_lyteUiUtils.setAttribute($L("input",this.$node).get(0),o,{})}}}.observes("ltPropAriaAttributes.*"),trigger_obs:function(e){if(e.newValue){var t=e.item;/clear/i.test(t)?this.error_decision():this.do_validation(),this.setData(t,!1)}}.observes("ltPropTriggerValidation","ltPropClearValidation"),error_decision:function(e,t,a){if(this.setData({errorMessage:t,ltPropError:!!t}),$L(this.$node)[(t?"add":"remove")+"Class"]("lyteErrorInput"),t){var o="onError";this.getMethods(o)&&this.executeMethod(o,a,e,this.$node)}else""==t&&(o="onValidInput",this.getMethods(o)&&this.executeMethod(o,e,this.$node))},do_validation:function(){var e=this.data,t=e.ltPropErrorMessage||{},a=e.ltPropDefaultErrorMessage,o=e.ltPropValue||"",i=e.ltPropValidateOnEmpty,r=o||i,n=r?this.maxMinCheck(o,!0):o,s=e.ltPropPattern,l=this.error_decision.bind(this,o);return o!=n?l(t.minmax||a,"maxmin"):this.maxLenValidation(o)!=o?l(t.maxlength||a,"maxlength"):s&&r&&!new RegExp(s,"g").test(o)?l(t.pattern||a,"pattern"):e.ltPropMandatory&&!o?l(t.mandatory||a,"mandatory"):l("")}}),Lyte.Component.register("lyte-navigator",{_template:'<template tag-name="lyte-navigator"> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;default&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}" role="navigation"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lyteDoubleBack lyteIconDoubleBack" role="button" aria-label="start"></div> <div class="lyteSingleBack lyteIconSingleBack" role="button" aria-label="previous"></div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lyteNavigatorMidPoint">{{startRecord}} <span class="lyteNavigatorText">{{ltPropMiddleText}}</span> {{endRecord}}</div> </template></template> <div class="lyteSingleFront lyteIconSingleFront" role="button" aria-label="next"></div> <div class="lyteDoubleFront lyteIconDoubleFront" role="button" aria-label="end"></div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" start-record="{{startRecord}}" end-record="{{endRecord}}"></lyte-yield> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;simple&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}" role="navigation"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lytepagination"> <div class="lyteNavArrow lyteDoubleBack hover" role="button" aria-label="start"></div> <div class="lyteNavArrow lyteSingleBack hover" role="button" aria-label="previous"> </div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lytepage"> <template is="for" items="{{paginationRange}}" item="page" indexval="pageno"> <div data-value="{{page}}" class="lytesimple" role="button" aria-label="{{page}}">{{unescape(page)}}</div> </template> </div> </template></template> <div class="lyteNavArrow lyteSingleFront hover" role="button" aria-label="next"> </div> <div class="lyteNavArrow lyteDoubleFront hover" role="button" aria-label="end"></div> </div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" pagination-range="{{paginationRange}}"></lyte-yield> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;border&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}" role="navigation"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lytepagination"> <div class="lyteNavArrowBorder lyteDoubleBack hover lyteborder" role="button" aria-label="home"></div> <div class="lyteNavArrowBorder lyteSingleBack hover lyteborder" role="button" aria-label="previous"> </div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lytepage"> <template is="for" items="{{paginationRange}}" item="page" indexval="pageno"> <div data-value="{{page}}" class="lyteborder" role="button" aria-label="{{page}}">{{unescape(page)}}</div> </template> </div> </template></template> <div class="lyteNavArrowBorder lyteSingleFront hover lyteborder" role="button" aria-label="next"> </div> <div class="lyteNavArrowBorder lyteDoubleFront hover lyteborder" role="button" aria-label="end"></div> </div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" pagination-range="{{paginationRange}}"></lyte-yield> </template></template> </div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2,0]},{type:"text",position:[1,4]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropPerpage","ltPropValue","ltPropRecords","ltPropMoreRecords","ltPropMiddleText","ltPropType","paginationRange","ltPropSelected","ltPropShowOnlyIcon","ltPropShowText","ltPropYield","ltPropAdjustStart","ltPropAria","ltPropAriaNavigator","ltPropAriaNext","ltPropAriaPrev","ltPropAriaHome","ltPropAriaEnd","ltPropTabIndex","ltPropDataTabIndex"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},didConnect:function(){if(this.buttonDisable.call(this),this.checkButton.call(this),"default"!=this.getData("ltPropType")){var e=this.$node.querySelectorAll("lyte-nav-arrow");this.getData("ltPropShowText")&&this.$node.querySelector(".lytepagination").classList.add("textNavLink"),4==e.length&&(this.$node.querySelector(".lyteDoubleBack").appendChild(e[0]),this.$node.querySelector(".lyteSingleBack").appendChild(e[1]),this.$node.querySelector(".lyteSingleFront").appendChild(e[2]),this.$node.querySelector(".lyteDoubleFront").appendChild(e[3])),2==e.length&&(this.$node.querySelector(".lyteDoubleBack").style.display="none",this.$node.querySelector(".lyteSingleBack").appendChild(e[0]),this.$node.querySelector(".lyteSingleFront").appendChild(e[1]),this.$node.querySelector(".lyteDoubleFront").style.display="none")}this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){var e="rtl"==window.getComputedStyle(this.$node).getPropertyValue("direction");$L.fastdom.mutate(function(){e&&this.$node.classList.add("lyteRTL")}.bind(this))}.bind(this))},data:function(){return{ltPropPerpage:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","perPage",10)}),ltPropValue:Lyte.attr("number",{default:0}),ltPropRecords:Lyte.attr("number",{default:void 0}),ltPropMoreRecords:Lyte.attr("boolean",{default:!1}),ltPropMiddleText:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","middleText","to")}),ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","type","default")}),paginationRange:Lyte.attr("array",{default:void 0}),ltPropSelected:Lyte.attr("number",{default:0}),ltPropShowOnlyIcon:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","showOnlyIcon",!1)}),ltPropShowText:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","showText",!1)}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAdjustStart:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!0}),ltPropAriaNavigator:Lyte.attr("object",{default:{}}),ltPropAriaNext:Lyte.attr("object",{default:{}}),ltPropAriaPrev:Lyte.attr("object",{default:{}}),ltPropAriaHome:Lyte.attr("object",{default:{}}),ltPropAriaEnd:Lyte.attr("object",{default:{}}),ltPropTabIndex:Lyte.attr("number",{default:0}),ltPropDataTabIndex:Lyte.attr("number",{default:0})}},ariaObserver:function(e){this.getData("ltPropAria")&&(_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteNavigator"),this.getData("ltPropAriaNavigator")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteSingleFront"),this.getData("ltPropAriaNext")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteSingleBack"),this.getData("ltPropAriaPrev")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteDoubleFront"),this.getData("ltPropAriaEnd")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteDoubleBack"),this.getData("ltPropAriaHome")||{},{}))}.observes("ltPropAriaNavigator","ltPropAriaNext","ltPropAriaPrev","ltPropAriaHome","ltPropAriaEnd").on("didConnect"),buttonDisable:function(){if(!this.data.ltPropYield){var e=this.$node.querySelector(".lyteSingleFront").style,t=this.$node.querySelector(".lyteSingleBack").style,a=this.$node.querySelector(".lyteDoubleBack").style,o=this.$node.querySelector(".lyteDoubleFront").style;e&&(e.display=this.getMethods("onNext")?"":"none"),t&&(t.display=this.getMethods("onPrevious")?"":"none"),a&&(a.display=this.getMethods("onHome")?"":"none"),o&&(o.display=this.getMethods("onEnd")?"":"none")}},setAriaDisabled:function(e){e.setAttribute("aria-disabled",!0)},removeAriaDisabled:function(e){e.removeAttribute("aria-disabled")},activeAdd:function(){if("default"!=this.getData("ltPropType")&&!this.getData("ltPropShowOnlyIcon")){var e=this.$node.querySelector('[data-value="'+this.getData("ltPropSelected")+'"]');null!=e&&(e.classList.add("lyteActiveAdd"),this.getData("ltPropAria")&&(e.tabIndex=this.getData("ltPropTabIndex"),e.setAttribute("data-tabindex",this.getData("ltPropDataTabIndex"))))}},onForward:function(e){var t=this.getData("ltPropValue"),a=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords"),i=(t+=a)>o?o:t;this.getMethods("onNext")&&this.executeMethod("onNext",i,this.$node,e)},onBackward:function(e){var t=parseInt(this.getData("ltPropValue")),a=(t-=parseInt(this.getData("ltPropPerpage")))<0?0:t;this.getMethods("onPrevious")&&this.executeMethod("onPrevious",a,this.$node,e)},goFirst:function(e){if(this.setData("ltPropValue",0,this.$node,e),this.getMethods("onHome")){this.executeMethod("onHome",this.getData("ltPropValue"),this.$node,e);var t=this.$node.querySelector(".lyteSingleFront");t&&(t.classList.remove("lyteDisabled"),this.removeAriaDisabled(t))}"default"!=this.getData("ltPropType")&&(this.getData("ltPropSelected")>=1&&this.setData("ltPropSelected",1),this.activeAdd())},goLast:function(e){this.getData("ltPropValue");var t=this.getData("ltPropPerpage"),a=this.getData("ltPropRecords"),o=Math.floor(a/t)*t>=a?a-t:Math.floor(a/t)*t;this.getMethods("onEnd")&&this.executeMethod("onEnd",o,this.$node,e)},onSelect:function(e){this.getData("ltPropValue");var t=this.getData("ltPropPerpage"),a=this.getData("ltPropRecords"),o=parseInt(e.target.getAttribute("data-value"))*t-t>=a?a-t:parseInt(e.target.getAttribute("data-value"))*t-t;this.getMethods("onSelect")&&this.executeMethod("onSelect",o,this.$node,e)},pagination:function(){var e,t,a=this.getData("ltPropSelected"),o=this.getData("ltPropRecords"),i=a-1,r=a+1+1,n=[],s=[];if((t=Math.ceil(o/this.getData("ltPropPerpage")))>5){1==a&&a!=t&&(r+=1),a==t&&1!=a&&(i-=1);for(var l=1;l<t;l++)1==l||l==t||l>=i&&l<r?n.push(l):l>1&&l<i?l=i-1:l>=r&&l<t&&(l=t-1);for(n.push(t),l=0;l<n.length;l++){var d=n[l];e&&d-e!=1&&s.push("..."),s.push(d),e=d}}else for(l=1;l<=t;l++)s.push(l);this.setData("paginationRange",s),this.activeAdd()},paginationObs:function(){this.pagination()}.observes("ltPropSelected","ltPropPerpage","ltPropRecords"),checkButtonObs:function(){this.checkButton.call(this)}.observes("ltPropPerpage","ltPropValue","ltPropRecords","ltPropMoreRecords"),checkButton:function(){var e=this.getData("ltPropValue"),t=this.getData("ltPropPerpage"),a=this.getData("ltPropRecords"),o=this.$node.querySelector(".lyteSingleFront"),i=this.$node.querySelector(".lyteSingleBack"),r=this.$node.querySelector(".lyteDoubleBack"),n=this.$node.querySelector(".lyteDoubleFront");$L.fastdom.mutate(function(){if(r&&e<=0?(r.classList.add("lyteDisabled"),this.setAriaDisabled(r)):r&&(r.classList.remove("lyteDisabled"),this.removeAriaDisabled(r)),i&&e<=0?(i.classList.add("lyteDisabled"),this.setAriaDisabled(i)):i&&(i.classList.remove("lyteDisabled"),this.removeAriaDisabled(i)),o&&e+t>=a&&!this.getData("ltPropMoreRecords")?(o.classList.add("lyteDisabled"),this.setAriaDisabled(o)):o&&(o.classList.remove("lyteDisabled"),this.removeAriaDisabled(o)),n&&e+t>=a?(n.classList.add("lyteDisabled"),this.setAriaDisabled(n)):n&&(n.classList.remove("lyteDisabled"),this.removeAriaDisabled(n)),"default"==this.getData("ltPropType")||this.getMethods("onSelect")||this.getData("ltPropYield")||this.$node.querySelector(".lytepage").classList.add("lyteDisabled"),this._settingStartEndValue(),"default"!=this.getData("ltPropType")){this.setData("ltPropSelected",Math.ceil(this.getData("startRecord")/this.getData("ltPropPerpage")));for(var s=this.$node.querySelectorAll('[data-value="..."]'),l=0;l<s.length;l++)s[l].classList.add("lyteDisabled"),s[l].classList.add("dots3"),this.setAriaDisabled(s[l])}}.bind(this))},settineStartEndValue:function(){this._settingStartEndValue()}.on("init"),_settingStartEndValue:function(){var e=this.getData("ltPropValue"),t=this.getData("ltPropPerpage"),a=this.getData("ltPropRecords"),o=this.getData("startRecord"),i=this.getData("endRecord"),r=e+1>a?a:e+1,n=e+t>a?a:e+t;this.getData("ltPropAdjustStart")&&"default"==this.getData("ltPropType")&&o&&i&&i-o!=t-1&&i>t&&(n=i?i<t?t:i:t,r=i?i-t+1<1?1:i-t+1:1,this.getMethods("onPerpageChange")&&this.executeMethod("onPerpageChange",r-1,this.$node)),o!=r&&this.setData("startRecord",r),i!=n&&this.setData("endRecord",n)},actions:{clickEvent:function(e){var t=e.target;if(t.getAttribute("data-value"))"..."!=t.getAttribute("data-value")&&this.onSelect(e);else{for(;t&&(!t.className||-1==t.className.indexOf("lyteNavigator")&&-1==t.className.indexOf("lyteDoubleFront")&&-1==t.className.indexOf("lyteSingleFront")&&-1==t.className.indexOf("lyteDoubleBack")&&-1==t.className.indexOf("lyteSingleBack"));)t=t.parentNode;t&&-1!=t.className.indexOf("lyteDoubleFront")?this.goLast(e):t&&-1!=t.className.indexOf("lyteSingleFront")?this.onForward(e):t&&-1!=t.className.indexOf("lyteDoubleBack")?this.goFirst(e):t&&-1!=t.className.indexOf("lyteSingleBack")?this.onBackward(e):e.preventDefault()}}}}),Lyte.Component.register("lyte-slider",{_template:'<template tag-name="lyte-slider"> <div class="lyteSlide {{if(ltPropDisabled,\'lyteSliderDisabled\',\'\')}}"> <div class="lyteRangeSlider {{ltPropDirection}}" onclick="{{action(\'click\',event)}}" tabindex="0" onkeydown="{{action(\'keydown\',event)}}"> <div class="lyteSliderFill"></div> <div class="lyteSliderHandler {{ltPropHandler}} lyteHandler1" lt-prop-title="{{if(expHandlers(ltPropTooltip,\'&amp;&amp;\',true),if(ltPropRangeHandler,ltPropMinValue,ltPropValue),\'\')}}" tabindex="0" onmousedown="{{action(\'mousedown\',event,this)}}" ontouchstart="{{action(\'mousedown\',event,this)}}" lt-prop-tooltip-config="{{ltPropTooltipConfig}}" lt-prop-tooltip-style="{{ltPropTooltipStyle}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" style="border-color: {{ltPropFillColor}}"></div> <template is="if" value="{{ltPropRangeHandler}}"><template case="true"> <div class="lyteSliderHandler {{ltPropHandler}} lyteHandler2" tabindex="0" onmousedown="{{action(\'mousedown\',event,this)}}" ontouchstart="{{action(\'mousedown\',event,this)}}" lt-prop-title="{{if(ltPropTooltip,ltPropMaxValue,\'\')}}" lt-prop-tooltip-config="{{ltPropTooltipConfig}}" lt-prop-tooltip-style="{{ltPropTooltipStyle}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" style="border-color: {{ltPropFillColor}}"></div> </template></template><template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield" lt-prop-scale-value="{{scaleVal}}" lt-prop-scale-style="{{divLength}}"></lyte-yield> </template><template case="false"> <div class="lyteScaleOption {{ltPropHandler}}"> <template is="for" items="{{divLength}}" index="indexVal"> <span class="lyteScaleLine" style="{{item}}"> <span></span> <span class="lyteScalLable">{{scaleVal[indexVal]}}</span> </span> </template> </div> </template></template> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,3],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'border-color: '","ltPropFillColor"]}}}},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"concat",args:["'border-color: '","ltPropFillColor"]}}}}]}},default:{}},{type:"attr",position:[1,1,6]},{type:"if",position:[1,1,6],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"item"}}},{type:"text",position:[1,3,0]}]}]}},default:{}}],_observedAttributes:["divLength","scaleVal","ltPropMin","ltPropMax","ltPropScaleInterval","ltPropStep","ltPropHandler","ltPropDirection","ltPropWidth","ltPropFillColor","ltPropNonFillColor","ltPropHeight","ltPropValue","ltPropDiscrete","ltPropContent","ltPropRangeHandler","ltPropMinValue","ltPropMaxValue","ltPropDisabled","ltPropSelectedValue1","ltPropSelectedValue2","ltPropYield","ltPropTooltipStyle","ltPropTooltip","ltPropScaleUnit","ltPropTooltipClass","ltPropTooltipConfig","ltPropMinDiff","ltPropDigits","preventObs"],init:function(){this._dir=_lyteUiUtils.getRTL();var e,t=this.getData("ltPropTooltipConfig"),a=this.getData("ltPropDirection"),o=this.getData("ltPropTooltipStyle");t||(this._config=!0,this.data.ltPropTooltipConfig={position:"lyteHorizontal"==a?"top":"right",showdelay:500,margin:10}),o||(this._style=!0,this.data.ltPropFillColor&&(this.data.ltPropTooltipStyle="background-color : "+this.data.ltPropFillColor+";")),-1!=[void 0,"",null].indexOf(this.getData("ltPropScaleInterval"))&&(this.setData("preventObs",!0),-1!=this.getData("ltPropHandler").indexOf("Arrow")&&0==this.getData("ltPropContent").length&&(e=.1*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))),this.getData("ltPropContent").length&&(e="true"),e&&this.setData("ltPropScaleInterval",e.toString()),this.setData("preventObs",!1)),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(e,t,a){if(this._dir&&"top"!=e&&"clientY"!=e){if(t)return"right"==e?a-t.left:"clientX"==e?a-t.clientX:"offsetLeft"==e?t.offsetParent.offsetWidth-t.offsetLeft-t.offsetWidth:a-t.right;if("left"==e)return"right"}return t?t[e]:e},heightSetObs:function(){this.heightSet.call(this,arguments[0])}.observes("ltPropWidth","ltPropHeight"),heightSet:function(){var e=this.getData("ltPropWidth"),t=this.getData("ltPropHeight");-1!=this.getData("ltPropDirection").indexOf("Horizontal")?(e||(this.setData("ltPropWidth","200px"),e="200px"),t||(this.setData("ltPropHeight","30px"),t="30px")):(e||(this.setData("ltPropWidth","30px"),e="30px"),t||(this.setData("ltPropHeight","200px"),t="200px")),this.$node.style.width=e,this.$node.style.height=t,arguments.length&&this.didConnectWrk.call(this)},initialWorkObs:function(){this.getData("preventObs")||(this.setData("preventObs",!0),this.initialWork.call(this,arguments[0]),this.setData("preventObs",!1))}.observes("ltPropContent","ltPropMax","ltPropMin","ltPropScaleInterval","ltPropDiscrete","ltPropStep","ltPropValue","ltPropScaleUnit").on("init"),initialWork:function(e){var t=this.getData("ltPropContent").slice(),a=this.getData("ltPropDirection"),o=this.getData("ltPropDiscrete"),i=this.getData("ltPropRangeHandler");if(t.length)t.length&&(this.setData("ltPropMax","100"),this.setData("ltPropStep",this.getData("ltPropScaleInterval")),(this.getData("ltPropScaleInterval")||e&&"ltPropContent"==e.item)&&this.setData("ltPropScaleInterval",""+parseFloat(100/(t.length-1))),this.setData("ltPropDiscrete",this.getData("ltPropScaleInterval")),i?(s=this.getData("ltPropMinValue"),l=this.getData("ltPropMaxValue"),(!s||-1==t.indexOf(s)||t.indexOf(s)>t.indexOf(l))&&this.setData("ltPropMinValue",t[0]),(!l||-1==t.indexOf(l)||t.indexOf(s)>t.indexOf(l))&&this.setData("ltPropMaxValue",t[t.length-1]),this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))):this.getData("ltPropValue")||(this.setData("ltPropValue",this.getData("ltPropContent")[0]),this.setData("ltPropSelectedValue1",this.getData("ltPropValue"))));else{var r=parseFloat(this.getData("ltPropMin")),n=parseFloat(this.getData("ltPropMax"));if(i){var s=parseFloat(this.getData("ltPropMinValue")),l=parseFloat(this.getData("ltPropMaxValue"));(isNaN(s)||s<r||s>=n)&&this.setData("ltPropMinValue",r.toString()),(isNaN(l)||l>n||l<=r)&&this.setData("ltPropMaxValue",n.toString()),this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))}else{var d=parseFloat(this.getData("ltPropValue"));d<r||isNaN(d)?this.setData("ltPropValue",r.toString()):d>n&&this.setData("ltPropValue",n.toString()),this.setData("ltPropSelectedValue1",this.getData("ltPropValue"))}if(o){var p=.1*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")));o=parseFloat(o),o=Math.max(isNaN(o)?0:o,p).toString(),this.setData("ltPropDiscrete",o),this.setData("ltPropStep",o),this.setData("ltPropScaleInterval",o)}}var c=[],h=[],u=-1!=a.indexOf("Horizontal"),f="top:",y=parseFloat(this.getData("ltPropScaleInterval"));if(u&&(f=this.rtlfunc.call(this,"left")+":"),y&&!isNaN(y)){for(var m=parseFloat(this.getData("ltPropMin")),g=this.getData("ltPropScaleUnit"),v=0;m<=parseFloat(this.getData("ltPropMax"));v++)c.push(f+(m-parseFloat(this.getData("ltPropMin")))/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*100+"%"),this.getData("ltPropContent").length?h.push(t[v]+g):h.push(m+g),m+=parseFloat(y);l=t.length?t[t.length-1]:this.getData("ltPropMax"),h[h.length-1]!=l&&(c.push(f+100+"%"),t.length?h.push(t[t.length-1]+g):h.push(this.getData("ltPropMax")+g))}else c.push(f+0+"%"),c.push(f+100+"%"),h=this.MaxMinSet.call(this),this.setData("scaleVal",h);this.setData("scaleVal",h),this.setData("divLength",c)},colorSetObs:function(e){this.colorSet.call(this,e)}.observes("ltPropFillColor","ltPropNonFillColor").on("didConnect"),colorSet:function(e){(!e&&this.data.ltPropFillColor||e&&"ltPropFillColor"==e.item)&&(this.$node.querySelector("div.lyteSliderFill").style.backgroundColor=this.data.ltPropFillColor),(!e&&this.data.ltPropNonFillColor||e&&"ltPropNonFillColor"==e.item)&&(this.$node.querySelector("div.lyteRangeSlider").style.backgroundColor=this.data.ltPropNonFillColor)},didConnectWrkObs:function(){this.getData("preventObs")||(this.setData("preventObs",!0),this.didConnectWrk.apply(this,arguments),this.setData("preventObs",!1))}.observes("ltPropScaleInterval","ltPropValue","ltPropMin","ltPropMax","ltPropMinValue","ltPropMaxValue","ltPropContent","ltPropHandler","ltPropRangeHandler"),didConnectWrk:function(){this.$node.querySelector("div.lyteRangeSlider"),this.$node.querySelector("div.lyteSlide");var e,t,a=this.$node.querySelectorAll("div.lyteSliderHandler"),o=this.getData("ltPropRangeHandler"),i=this.getData("ltPropDirection"),r=this.$node.getBoundingClientRect(),n=a[0].getBoundingClientRect(),s=this.$node.offsetParent,l={},d="width",p="handlerWidth",c=this.rtlfunc.call(this,"left"),h={},u="offsetWidth";-1==i.indexOf("Horizontal")&&(d="height",p="handlerHeight",c="top",u="offsetHeight"),null==s?(l.width=parseFloat(this.getData("ltPropWidth")),l.height=parseFloat(this.getData("ltPropHeight")),l.handlerWidth=l.handlerHeight=12):(l.width=r.width,l.height=r.height,l.handlerWidth=n.width,l.handlerHeight=n.height);var f=this.$node.querySelector("div.lyteSliderFill");if(this.getData("ltPropContent").length){var y,m,g=this.data.ltPropContent.indexOf(this.data.ltPropValue);this.$node.querySelectorAll("div.lyteSliderHandler"),g=g>-1?g:0,o&&(y=-1!=(y=this.getData("ltPropContent").indexOf(this.getData("ltPropMinValue")))?y:0,m=-1!=(m=this.getData("ltPropContent").indexOf(this.getData("ltPropMaxValue")))?m:this.getData("ltPropContent").length-1),o?(e=this.rangeInitialSet.call(this,u,y),t=this.rangeInitialSet.call(this,u,m),h=this.rangeSliderFill(e,t,l[p])):(e=this.rangeInitialSet.call(this,u,g),h.width=g/(this.getData("ltPropContent").length-1)*l[d])}else o?(e=this.initialValueSet.call(this,l[d],l[p],parseFloat(this.getData("ltPropMinValue"))),t=this.initialValueSet.call(this,l[d],l[p],parseFloat(this.getData("ltPropMaxValue"))),h=this.rangeSliderFill(e,t,l[p])):(e=this.initialValueSet.call(this,l[d],l[p],parseFloat(this.getData("ltPropValue"))),h.width=(parseFloat(this.getData("ltPropValue"))-parseFloat(this.getData("ltPropMin")))/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*l[d]);a[0].style[c]=e+"px",f.style[d]=h.width+"px",a[1]&&(a[1].style[c]=t+"px",f.style[c]=h.left+"px")},directionObsObs:function(){this.directionObs.call(this)}.observes("ltPropDirection"),directionObs:function(){this.getData("preventObs")||$L.fastdom.mutate(function(){var e=this.$node.querySelector(".lyteSliderHandler");e.style.removeProperty(this.rtlfunc.call(this,"left")),e.style.removeProperty("top");var t=this.$node.querySelector(".lyteSliderFill");t.style.removeProperty("width"),t.style.removeProperty("height"),this.setData("preventObs",!0),this.heightSet.call(this),$L.fastdom.measure(function(){this.didConnectWrk.call(this),this.setData("preventObs",!1)}.bind(this))}.bind(this))},MaxMinSet:function(){var e=[],t=this.getData("ltPropScaleUnit");return this.getData("ltPropContent").length?(e.push(this.getData("ltPropContent")[0]+t),e.push(this.getData("ltPropContent")[this.getData("ltPropContent").length-1]+t)):(e.push(this.getData("ltPropMin")+t),e.push(this.getData("ltPropMax")+t)),e},selectedVal:function(e,t,a,o,i){this.$node.querySelector("div.lyteSlide");var r,n=e[a];if(r=o?((parseFloat(o.style[i])+t[a]/2)/n*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))+parseFloat(this.getData("ltPropMin"))).toFixed(this.data.ltPropDigits):(parseFloat(this.$node.querySelector("div.lyteSliderFill").style[a])/n*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))+parseFloat(this.getData("ltPropMin"))).toFixed(this.data.ltPropDigits),this.getData("ltPropContent").length){var s=parseFloat(r)/parseFloat(this.getData("ltPropScaleInterval"));r=r>100?this.getData("ltPropContent")[this.getData("ltPropContent").length-1]:this.getData("ltPropContent")[parseInt(parseFloat(s).toFixed(0))]}return r},onSelect:function(e){(this.getMethods("onChange")||this.getMethods("onSelect"))&&(this.getData("ltPropRangeHandler")?(this.getMethods("onChange")&&this.executeMethod("onChange",this.getData("ltPropSelectedValue1"),this.getData("ltPropSelectedValue2"),this.$node),this.getMethods("onSelect")&&e&&this.executeMethod("onSelect",this.getData("ltPropSelectedValue1"),this.getData("ltPropSelectedValue2"),this.$node)):(this.getMethods("onChange")&&this.executeMethod("onChange",this.getData("ltPropSelectedValue1"),this.$node),this.getMethods("onSelect")&&e&&this.executeMethod("onSelect",this.getData("ltPropSelectedValue1"),this.$node)))},scroll:function(e,t){var a=parseFloat(this.getData("ltPropDiscrete")),o=!1,i=!1,r=!1;return e>=parseFloat(this.getData("ltPropMax"))-(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))%a?(a=(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))%a,i=!0,o=!0):e-parseFloat(this.getData("ltPropDiscrete"))/2<parseFloat(this.getData("ltPropMin"))&&(o=!0,r=!0),o?e>parseFloat(this.getData("ltPropMax"))-a/2?e=i?parseFloat(this.getData("ltPropMax")):e-(e-parseFloat(this.getData("ltPropMin")))%a+a:(a=parseFloat(this.getData("ltPropDiscrete")),r?e=parseFloat(this.getData("ltPropMin")):e-=(e-parseFloat(this.getData("ltPropMin")))%a):(e-parseFloat(this.getData("ltPropMin")))%a>=parseFloat(this.getData("ltPropDiscrete"))/2?e=e-(e-parseFloat(this.getData("ltPropMin")))%a+a:e-=(e-parseFloat(this.getData("ltPropMin")))%a,(e-parseFloat(this.getData("ltPropMin")))/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*t},ScrollCheck:function(e,t,a,o,i,r,n,s){var l="touchmove"==s.type,d=s;if(!l||1==s.touches.length){l&&(d=s.touches[0]);var p,c,h,u,f,y,m,g,v,b=!0,P=this.$node.querySelector("div.lyteSlide"),D=this.getData("ltPropRangeHandler"),_=this.$node.querySelector("div.lyteSliderFill"),L=window.innerWidth,C=this.rtlfunc.call(this,o,d,L);D?(p=this.$node.querySelector("div.lyteHandler2"),c=this.$node.querySelector("div.lyteHandler1"),h=this.$node.querySelector("div.lyteRangeSlider"),u=c.getBoundingClientRect(),f=p.getBoundingClientRect(),(m=this.rtlfunc.call(this,t,f,L))-(y=this.rtlfunc.call(this,t,u,L))<=0?this._elem?this._elem.classList.contains("lyteHandler1")?C<y+u[a]&&m-y==0?b=!0:("mousemove"==s.type||l)&&(b=!1):this._elem.classList.contains("lyteHandler2")&&(C>m&&m-y==0?b=!0:("mousemove"==s.type||l)&&(b=!1)):("mousemove"==s.type||l)&&(b=!1):this.getData("ltPropDiscrete")&&parseFloat(this.getData("ltPropDiscrete")),g=C-this.rtlfunc.call(this,t,h.getBoundingClientRect(),L)):g=C-this.rtlfunc.call(this,t,_.getBoundingClientRect(),L),this.getData("ltPropContent").length&&"click"==s.type&&D&&parseInt(m-y)<1/(this.getData("ltPropContent").length-1)*this.$node[r]&&C<m+f[a]&&C>y+u[a]&&(b=!1),parseFloat(this.getData("ltPropDiscrete"));var w=this.$node.querySelector("div.lyteSliderHandler"),T=e.getBoundingClientRect(),x=P.getBoundingClientRect();if(this.getData("ltPropDiscrete")){var S=g/x[a]*(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))+parseFloat(this.getData("ltPropMin"));g=this.scroll.call(this,S,x[a])}if(v=(v=(v=(g=(g=g<x[a]?g:x[a])>0?g:0)-T[a]/2)>x[a]-w[i]/2?x[a]-w[i]/2:v)>-T[a]/2?v:-T[a]/2,D&&(e.classList.contains("lyteHandler1")?this.rtlfunc.call(this,n,p)<v&&(b=!1):this.rtlfunc.call(this,n,c)>v&&(b=!1)),e.focus(),b){if(t=this.rtlfunc.call(this,t),D){var A,E;if(e.classList.contains("lyteHandler1")){E=parseInt(p.style[t]);var M=this.minMaxCheck(x,u,a);A=v=Math.min(Math.max(v,M[0]),E-M[1])}else A=parseInt(c.style[t]),M=this.minMaxCheck(x,u,a,!0),E=v=Math.max(Math.min(v,M[0]),A+M[1]);var $=this.rangeSliderFill.call(this,A,E,u[a]);_.style[t]=$.left+"px",_.style[a]=$.width+"px"}else _.style[a]=g+"px";e.style[t]=v+"px"}$L.fastdom.measure(function(){this.selectedValFind.call(this,x,T)}.bind(this)),s.stopPropagation(),s.preventDefault(),s&&/mousemove|touchmove/i.test(s.type)&&e.tooltip&&e.tooltip.refresh&&e.tooltip.refresh({clientX:Math.max(Math.min(s.clientX,x.right),x.left)},e.tooltip.tooltipSpan)}},minMaxCheck:function(e,t,a,o){var i=(this.getData("ltPropMinDiff")||0)*e[a]/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")));return[o?e[a]-i-t[a]/2:i-t[a]/2,i]},selectedValFind:function(e,t){if(this.setData("preventObs",!0),this.getData("ltPropRangeHandler")){if(-1==this.getData("ltPropDirection").indexOf("Horizontal"))this.setData("ltPropMinValue",this.selectedVal.call(this,e,t,"height",this.$node.querySelector("div.lyteHandler1"),"top").toString()),this.setData("ltPropMaxValue",this.selectedVal.call(this,e,t,"height",this.$node.querySelector("div.lyteHandler2"),"top").toString());else{var a=this.rtlfunc.call(this,"left");this.setData("ltPropMinValue",this.selectedVal.call(this,e,t,"width",this.$node.querySelector("div.lyteHandler1"),a).toString()),this.setData("ltPropMaxValue",this.selectedVal.call(this,e,t,"width",this.$node.querySelector("div.lyteHandler2"),a).toString())}this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))}else-1==this.getData("ltPropDirection").indexOf("Horizontal")?this.setData("ltPropValue",this.selectedVal.call(this,e,t,"height").toString()):this.setData("ltPropValue",this.selectedVal.call(this,e,t,"width").toString()),this.setData("ltPropSelectedValue1",this.getData("ltPropValue"));this.setData("preventObs",!1)},initialValueSet:function(e,t,a){var o=parseFloat(this.getData("ltPropMax")),i=parseFloat(this.getData("ltPropMin"));return(a-i)/(o-i)*e-t/2},rangeSliderFill:function(e,t,a){return{width:t-e,left:e+a/2}},keyCheck:function(e,t,a,o,i,r){o=this.rtlfunc.call(this,o);var n,s=this.$node.querySelector("div.lyteSliderFill"),l=(window.innerWidth,t.getBoundingClientRect()),d={},p=this.getData("ltPropRangeHandler"),c=this.$node.getBoundingClientRect(),h=1,u=this.$node.querySelectorAll("div.lyteSliderHandler"),f=-1!=this.getData("ltPropDirection").indexOf("Horizontal"),y=parseFloat(this.getData("ltPropStep")),m=e.keyCode||e.which;switch(y||(y=.1*parseFloat(this.getData("ltPropMax"))),this._dir?39==m&&f&&(h=-1):(37==m&&f||38==m&&!f)&&(h=-1),m){case 34:y*=5,h=-1;break;case 35:y=parseInt(this.data.ltPropMax);break;case 36:y=parseInt(this.data.ltPropMax),h=-1;break;case 33:y*=5}if(n=parseFloat(t.style[o])+y/(parseFloat(this.getData("ltPropMax"))-parseFloat(this.getData("ltPropMin")))*c[a]*h,n=Math.min(Math.max(-l[a]/2,n),c[a]-l[a]/2),p){var g,v;if(t==u[0]){v=parseInt(u[1].style[o]);var b=this.minMaxCheck(c,l,a);g=n=Math.min(Math.max(n,b[0]),v-b[1])}else g=parseInt(u[0].style[o]),b=this.minMaxCheck(c,l,a,!0),v=n=Math.max(Math.min(n,b[0]),g+b[1]);if(g>v){if(parseInt(u[0].style[o])==v)return;37==e.keyCode||38==e.keyCode?v=n=g:39!=e.keyCode&&40!=e.keyCode||(g=n=v)}d=this.rangeSliderFill.call(this,g,v,l[a])}else d.width=n+l[a]/2;t.style[o]=n+"px",s.style[a]=d.width+"px",p&&(s.style[o]=d.left+"px"),$L.fastdom.measure(function(){this.selectedValFind.call(this,c,l)}.bind(this))},mousemove:function(e){var t,a,o,i,r,n;this._mousemoved=!0,this._flag||(this._flag=!0),-1!=this.getData("ltPropDirection").indexOf("Horizontal")?(t="left",a="width",o="clientX",i="offsetWidth",i="offsetWidth",r="ltPropWidth",n="offsetLeft"):(t="top",a="height",o="clientY",i="offsetHeight",i="offsetHeight",r="ltPropHeight",n="offsetTop"),this.ScrollCheck.call(this,this._elem,t,a,o,i,r,n,e),$L.fastdom.measure(function(){this.getMethods("onChange")&&this.onSelect.call(this)}.bind(this))},eventListener:function(e,t){var a="touchstart"==e.type,o=a?e.touches[0]:e,i=window.innerWidth,r=this.rtlfunc.call(this,"clientX",o,i),n=this.$node.querySelector("div.lyteRangeSlider").getBoundingClientRect();r>this.rtlfunc.call(this,"left","clientRect",i)?r-this.rtlfunc.call(this,"left","clientRect",i)-parseFloat(n.width-parseFloat(n.width/2))>0&&e.preventDefault():e.preventDefault();var s=o.clientY;s>=n.top?s-n.top-parseFloat(n.height-parseFloat(n.height/2))>0&&e.preventDefault():e.preventDefault(),this._mousemove=this.mousemove.bind(this),this._mouseup=this.mouseup.bind(this),this._elem=t,document.addEventListener(a?"touchmove":"mousemove",this._mousemove,!0),document.addEventListener(a?"touchend":"mouseup",this._mouseup,!0)},rangeInitialSet:function(e,t){return t/(this.getData("ltPropContent").length-1)*this.$node[e]-this.$node.querySelector("div.lyteSliderHandler")[e]/2},didConnect:function(){this.directionObs.call(this),this.valueSelected.call(this),$L.fastdom.mutate(function(){this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}.bind(this))},valueSelected:function(){this.getData("ltPropRangeHandler")?(this.setData("ltPropSelectedValue1",this.getData("ltPropMinValue")),this.setData("ltPropSelectedValue2",this.getData("ltPropMaxValue"))):this.setData("ltPropSelectedValue1",this.getData("ltPropValue"))},mouseup:function(e){this.$node.querySelector("div.lyteRangeSlider");var t="touchend"==e.type;document.removeEventListener(t?"touchmove":"mousemove",this._mousemove,!0),document.removeEventListener(t?"touchend":"mouseup",this._mouseup,!0),delete this._mousemove,delete this._mouseup,delete this._elem,this.$node.contains(e.correspondingElement||e.target)&&(this._prevclick=!0),this._mousemoved&&$L.fastdom.measure(this.onSelect.bind(this,!0)),delete this._mousemoved},data:function(){return{divLength:Lyte.attr("array",{default:[]}),scaleVal:Lyte.attr("array",{default:[]}),ltPropMin:Lyte.attr("string",{default:"0"}),ltPropMax:Lyte.attr("string",{default:""}),ltPropScaleInterval:Lyte.attr("string",{default:""}),ltPropStep:Lyte.attr("string",{default:""}),ltPropHandler:Lyte.attr("string",{default:"lyteArrow"}),ltPropDirection:Lyte.attr("string",{default:"lyteHorizontal"}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropFillColor:Lyte.attr("string",{default:""}),ltPropNonFillColor:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:""}),ltPropValue:Lyte.attr("string",{default:""}),ltPropDiscrete:Lyte.attr("string",{default:""}),ltPropContent:Lyte.attr("array",{default:[]}),ltPropRangeHandler:Lyte.attr("boolean",{default:!1}),ltPropMinValue:Lyte.attr("string",{default:""}),ltPropMaxValue:Lyte.attr("string",{default:""}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropSelectedValue1:Lyte.attr("string",{default:""}),ltPropSelectedValue2:Lyte.attr("string",{default:""}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropTooltipStyle:Lyte.attr("string",{default:""}),ltPropTooltip:Lyte.attr("boolean",{default:!0}),ltPropScaleUnit:Lyte.attr("string",{default:""}),ltPropTooltipClass:Lyte.attr("string",{default:""}),ltPropTooltipConfig:Lyte.attr("object"),ltPropMinDiff:Lyte.attr("number",{default:0}),ltPropDigits:Lyte.attr("number",{default:2}),preventObs:Lyte.attr("boolean",{default:!1})}},actions:{click:function(e){if(this._prevclick)delete this._prevclick;else{var t="left",a="width",o="clientX",i="offsetWidth",r="ltPropWidth",n="offsetLeft",s=window.innerWidth;if(-1==this.getData("ltPropDirection").indexOf("Horizontal")&&(t="top",a="height",o="clientY",i="offsetHeight",r="ltPropHeight",n="offsetTop"),this.getData("ltPropRangeHandler")){var l=this.rtlfunc.call(this,o,e,s),d=this.$node.querySelector("div.lyteHandler1"),p=this.$node.querySelector("div.lyteHandler2"),c=d.getBoundingClientRect(),h=p.getBoundingClientRect();Math.abs(this.rtlfunc.call(this,t,c,s)-this.rtlfunc.call(this,t,h,s))>0?this.rtlfunc.call(this,t,c,s)+c[a]+Math.abs(this.rtlfunc.call(this,t,c,s)-this.rtlfunc.call(this,t,h,s))/2<l?this.ScrollCheck.call(this,p,t,a,o,i,r,n,e):this.rtlfunc.call(this,t,c,s)+c[a]+Math.abs(this.rtlfunc.call(this,t,c,s)-this.rtlfunc.call(this,t,h,s))/2!=l&&this.ScrollCheck.call(this,d,t,a,o,i,r,n,e):this.rtlfunc.call(this,t,c,s)==this.rtlfunc.call(this,t,h,s)&&(l<this.rtlfunc.call(this,t,c,s)?this.ScrollCheck.call(this,d,t,a,o,i,r,n,e):this.ScrollCheck.call(this,p,t,a,o,i,r,n,e))}else this.ScrollCheck.call(this,this.$node.querySelector("div.lyteSliderHandler"),t,a,o,i,r,n,e);$L.fastdom.measure(function(){this.onSelect.call(this,!0)}.bind(this)),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}},keydown:function(e){var t=e.keyCode||e.which,a=this.data,o=/horizontal/i.test(a.ltPropDirection),i=a.ltPropDiscrete;if(!(!/^3(3|4|5|6|7|8|9)|40$/.test(t)||/^37|39$/.test(t)&&!o||/^38|40$/.test(t)&&o)){i&&this.setData("ltPropStep",i);var r=e.target,n="width",s="left",l="offsetWidth",d="ltPropWidth";o||(n="height",s="top",l="offsetHeight",d="ltPropHeight"),a.ltPropRangeHandler||(r=this.$node.querySelector("div.lyteSliderHandler")),this.keyCheck(e,r,n,s,l,d),$L.fastdom.mutate(this.onSelect.bind(this,!0)),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}},mousedown:function(e,t){2!=e.button&&this.eventListener.call(this,e,t)}}});_lyteCbox={checkedClass:"lyteCboxChecked",uncheckedClass:"lyteCboxUnchecked"};Lyte.Component.register("lyte-checkbox",{_template:'<template tag-name="lyte-checkbox" onkeydown="{{action(\'preventInputClick\',event)}}" onkeyup="{{action(\'preventInputClick\',event)}}"> <template value="{{ltPropType}}" is="switch">     <template case="default"><label class="lyteCheckbox lyteDefault" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template><template case="primary"><label class="lyteCheckbox lytePrimary" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" id="{{randomId}}" aria-hidden="true"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template><template case="switch"><label class="" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide on-off-sw" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="on-btn"></span> </span> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </label></template><template case="slider"><label class="lyteCheckSliderLabel" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}"> <input aria-labelledby="{{randomId}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" disabled="{{ltPropDisabled}}" class="lyteHide" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}"> <span class="{{ltPropFinalClass}}"> <span class="{{ltPropFinalLabelClass}}" aria-hidden="true" id="{{randomId}}"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="yield"></lyte-yield> </template><template case="false"> {{ltPropLabel}} </template></template> </span> </span> </label></template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},primary:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,5]},{type:"attr",position:[0,5,1]},{type:"if",position:[0,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[0]},{type:"attr",position:[0,1]},{type:"attr",position:[0,3]},{type:"attr",position:[0,3,1]},{type:"attr",position:[0,3,1,1]},{type:"if",position:[0,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropType","ltPropId","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropName","ltPropValue","ltPropReadonly","ltPropFireOnInit","ltPropClass","ltPropLabelClass","ltPropTabindex","lyteUnbound","ltPropYield","ltPropAriaCheckbox","ltPropFocus","ltPropPreventCallbackObservers","ltPropDataTabindex","randomId"],data:function(){return{ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","type","default")}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","fireOnInit",!1)}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","class","")}),ltPropLabelClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","labelClass","")}),ltPropTabindex:Lyte.attr("number",{default:0}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAriaCheckbox:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-checkbox","ariaCheckbox",{})}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropPreventCallbackObservers:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:null}),randomId:Lyte.attr("string")}},ariaObserver:function(e){var t=e.oldValue,a=e.newValue;this.addAriaValues(t,a)}.observes("ltPropAriaCheckbox"),didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteCheckDisabled"):this.$node.classList.remove("lyteCheckDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),setDefaults:function(){var e=this.getData("ltPropType"),t=this.getData("ltPropClass"),a=this.getData("ltPropLabelClass");"switch"===e?this.setData("ltPropFinalClass",t||"lyteCheckSwitch"):"default"===e?this.setData("ltPropFinalClass",t||"lyteCheckBoxDefault"):"primary"===e?this.setData("ltPropFinalClass",t||"lyteCheckBoxPrimary"):"slider"===e&&this.setData("ltPropFinalClass",t||"lyteCheckSlider"),"slider"===e?this.setData("ltPropFinalLabelClass",a||"lyteCheckSliderText"):this.setData("ltPropFinalLabelClass",a||"")},typeObs:function(){this.setDefaults(),this.setRandomId()}.observes("ltPropType","ltPropClass","ltPropLabelClass").on("init"),setRandomId:function(){this.setData("randomId","lyte-checkbox-label-"+_lyteUiUtils.cboxId++)},didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},focusInput:function(){var e=this.$node.querySelector("input");document.activeElement!==e&&e.focus()},didConnect:function(){var e=this,t=this.getData("ltPropAriaCheckbox"),a=this.getData("ltPropDataTabindex");this.$node.setAttribute("data-tabindex",a),this.reduceOpacity(),this.$node.click=function(){var t=new Event("click",{bubbles:!0,cancelable:!0}),a=e.$node,o=a.ltProp("checked"),i=a.ltProp("disabled"),r=a.ltProp("readonly"),n=(e.getData("lyteUnbound"),e.$node.querySelector("input"));i||r||(e.setData("eventCache",t),e.setData("internalChange",!0),e.clickFn=!0,o?a.ltProp("checked",!1):a.ltProp("checked",!0),e.$node._fR&&(e.setData("internalChange",!1),n.checked=a.ltProp("checked"),n.checked?n.setAttribute("checked",""):n.removeAttribute("checked"),e.fireCallBacksFunction({},!1)),e.clickFn=!1,a.dispatchEvent(t))},this.$node.focus=function(){var t=e.$node,a=t.querySelector("input"),o=t.ltProp("disabled"),i=t.ltProp("readonly");o||i||a.focus()},this.$node.blur=function(){var t=e.$node,a=t.querySelector("input"),o=t.ltProp("disabled"),i=t.ltProp("readonly");o||i||a.blur()},this.fireCallBacksFunction.call(this,void 0,!0),this.addAriaValues({},t)},addAriaValues:function(e,t){var a=this.getCheckboxWidget();_lyteUiUtils.setAttribute(a,t,e)},getCheckboxWidget:function(){return this.$node.querySelector("input")},fireCallbacks:function(e,t){var a=this.getData("ltPropPreventCallbackObservers"),o=this.getData("internalChange"),i=this.getData("ltPropChecked")?_lyteCbox.checkedClass:_lyteCbox.uncheckedClass;if(this.setData("internalChange",!1),!this.getData("preventRefire")&&!this.getData("preventObs")){if(o||!a)return this.getData("handleLbind")?(this.setData("preventObs",!0),this.setData("internalChange",!0),this.setData("ltPropChecked",!this.getData("ltPropChecked")),this.setData("preventObs",!1),void this.setData("handleLbind",!1)):void this.fireCallBacksFunction.call(this,e,t);this.toggleClass(i)}}.observes("ltPropChecked"),focusCheckbox:function(){this.getData("ltPropFocus")&&this.$node.focus(),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),fireCallBacksFunction:function(e,t){var a=this.getData("ltPropChecked"),o=this.getData("ltPropFireOnInit"),i=this.getData("eventCache");if(this.$node.checked=a||!1,a&&t){if(!o)return;var r=this.$node.querySelector("input");this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",r,this,i,"script"),this.getMethods("onChecked")&&this.executeMethod("onChecked",r,this,i,"script"),this.getMethods("onChanged")&&this.executeMethod("onChanged",r,this,i,"script")}else if(this.$node.checked&&!t){if(r=this.$node.querySelector("input"),!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeChecked")){if(this.data.ltPropChecked=!1,r.checked=!1,!1===this.executeMethod("onBeforeChecked",r,this,i,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!0,this.setData("internalChange",!0),this.setData("ltPropChecked",!1)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!0,r.checked=!0}this.setData("preventRefire",!1)}this.getMethods("onChecked")&&this.executeMethod("onChecked",r,this,i,this.eventType()),this.toggleClass(_lyteCbox.checkedClass),this.getMethods("onChanged")&&this.executeMethod("onChanged",r,this,i,this.eventType())}else if(!this.$node.checked&&!t){if(r=this.$node.querySelector("input"),!this.clicked){if(this.setData("preventRefire",!0),this.getMethods("onBeforeUnchecked")){if(this.data.ltPropChecked=!0,r.checked=!0,!1===this.executeMethod("onBeforeUnchecked",r,this,i,this.eventType()))return this.isCheckedLbound()?this.setData("handleLbind",!0):(this.data.ltPropChecked=!1,this.setData("internalChange",!0),this.setData("ltPropChecked",!0)),void this.setData("preventRefire",!1);this.data.ltPropChecked=!1,r.checked=!1}this.setData("preventRefire",!1)}this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",r,this,i,this.eventType()),this.toggleClass(_lyteCbox.uncheckedClass),this.getMethods("onChanged")&&this.executeMethod("onChanged",r,this,i,this.eventType())}},toggleClass:function(e){var t=e===_lyteCbox.checkedClass?_lyteCbox.uncheckedClass:_lyteCbox.checkedClass;this.$node.classList.remove(t),this.$node.classList.add(e)},eventType:function(){var e=this.clicked||this.clickFn,t=this.eveType;return e?t||"click":"script"},isCheckedLbound:function(){return!!this.$node._attributeDetails&&!!this.$node._attributeDetails["lt-prop-checked"]&&!!this.$node._attributeDetails["lt-prop-checked"].isLbind},isNodeDestroyed:function(){return!this.$node},fireClick:function(e){var t,a,o=this.getData("sendEvent"),i=this.getData("ltPropDisabled");this.isTimeoutInitiated=!1,this.isNodeDestroyed()||o||i||((t=this.$node.querySelector("input")).checked=!t.checked,(a=new Event("click")).shiftKey=!0,t.dispatchEvent(a))},actions:{preventInputClick:function(e){32===e.keyCode&&e.preventDefault()},mup:function(e){var t;if(this.setData("prevented",!1),this.setData("sendEvent",!1),!this.getData("ltPropDisabled")){var a=this.$node.querySelector("input");t=a.checked,this.getMethods("onBeforeChecked")&&!t?0!=this.executeMethod("onBeforeChecked",a,this,e,"click")||(this.setData("prevented",!0),e.preventDefault()):this.getMethods("onBeforeUnchecked")&&t&&(0!=this.executeMethod("onBeforeUnchecked",a,this,e,"click")||(this.setData("prevented",!0),e.preventDefault()))}},prevent:function(e){var t=this.getData("sendEvent"),a=!!~window.navigator.userAgent.indexOf("Firefox"),o=this.isTimeoutInitiated;t||e.stopPropagation(),a&&!o&&(this.isTimeoutInitiated=!0,setTimeout(this.fireClick.bind(this,e),0))},checkBoxClicked:function(e){var t,a;return this.setData("sendEvent",!0),this.setData("eventCache",e),this.clicked=!0,this.focusInput(),this.getData("prevented")?(t=this.$node.querySelector("input"),this.setData("prevented",!1),this.setData("preventRefire",!0),t.checked?t.checked=!1:t.checked=!0,this.setData("preventRefire",!1),this.clicked=!1,void this.setData("eventCache",{})):this.getData("ltPropDisabled")?(this.clicked=!1,e.preventDefault(),void this.setData("eventCache",{})):(a=e.target.checked,this.setData("internalChange",!0),a?this.setData("ltPropChecked",!0):this.setData("ltPropChecked",!1),this.$node._fR&&(this.setData("internalChange",!1),this.getData("ltPropChecked")?this.$node.querySelector("input").setAttribute("checked",""):this.$node.querySelector("input").removeAttribute("checked"),this.fireCallBacksFunction({},!1)),this.setData("eventCache",{}),void(this.clicked=!1))}}}),document.addEventListener("keyup",(function(e){var t;if(32===e.keyCode){if("INPUT"!==(t=document.activeElement).tagName)return;for(;"LYTE-CHECKBOX"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;"LYTE-CHECKBOX"===t.tagName&&(t.component.eveType="key",t.click(),t.component.eveType="")}}),!0),Lyte.Component.register("lyte-carousel",{_template:'<template tag-name="lyte-carousel"> <div class="lyteCarouselWrapper"> <lyte-yield yield-name="carouselBoxYield"></lyte-yield> </div> </template>',_dynamicNodes:[{type:"insertYield",position:[1,1]}],_observedAttributes:["ltPropAutoPlay","ltPropEffect","ltPropActiveIndex","ltPropMoreRecords","ltPropRecords","ltPropAutoPlayDuration","ltPropAutoPlayPause","ltPropData","ltPropAria","ltPropAriaAttributes","ltPropOrientation","ltPropTabIndex","ltPropDataTabIndex","ltPropArrowKey","coordinates","currentActiveIndex","prev","start"],data:function(){return{ltPropAutoPlay:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-carousel","autoPlay",!1)}),ltPropEffect:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-carousel","effect","slide")}),ltPropActiveIndex:Lyte.attr("number",{default:0}),ltPropMoreRecords:Lyte.attr("boolean",{default:!1}),ltPropRecords:Lyte.attr("number",{default:void 0}),ltPropAutoPlayDuration:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-carousel","autoPlayDuration",3e3)}),ltPropAutoPlayPause:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-carousel","autoPlayPause",!1)}),ltPropData:Lyte.attr("array",{default:[]}),ltPropAria:Lyte.attr("boolean",{default:!0}),ltPropAriaAttributes:Lyte.attr("object",{default:{}}),ltPropOrientation:Lyte.attr("string",{default:"horizontal"}),ltPropTabIndex:Lyte.attr("string",{default:"3"}),ltPropDataTabIndex:Lyte.attr("number",{default:1}),ltPropArrowKey:Lyte.attr("boolean",{default:!1}),coordinates:Lyte.attr("object",{default:{}}),currentActiveIndex:Lyte.attr("number",{default:0}),prev:Lyte.attr("boolean",{default:!1}),start:Lyte.attr("number")}},didConnect:function(){var e=this.$node.querySelector("lyte-carousel-content"),t=this.getData("ltPropActiveIndex");this.getData("ltPropAria")&&e&&e.setAttribute("aria-live",this.getData("ltPropAutoPlay")?"off":"polite"),t&&this.setData("currentActiveIndex",t),this.getData("ltPropRecords")>=1&&this.setActiveItem(),this.getData("ltPropRecords")>1&&this.setMethod(),this.$node.moveSlideByIndex=function(e){var t=this.getData("currentActiveIndex"),a=this.$node.getElementsByTagName("lyte-carousel-item"),o=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+t+'"] ');t>=0&&t<a.length&&(a[t].classList.remove("lyteActive"),a[t].setAttribute("tabindex",-1),a[t].setAttribute("data-tabindex",-1),a[t].setAttribute("aria-hidden",!1),o&&(o.classList.remove("lyteActive"),o.setAttribute("tabindex",-1),o.setAttribute("data-tabindex",-1))),clearTimeout(this._nextTimeout),clearTimeout(this._nextFadeTimeout),this.setData("currentActiveIndex",e),this.setActiveItem()}.bind(this),this.$node.reset=function(){setTimeout(function(){var e=this.getData("currentActiveIndex"),t=this.$node.getElementsByTagName("lyte-carousel-item"),a=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+e+'"] ');e>=0&&e<t.length&&(t[e].classList.remove("lyteActive"),t[e].setAttribute("tabindex",-1),t[e].setAttribute("data-tabindex",-1),t[e].setAttribute("aria-hidden",!1),a&&(a.classList.remove("lyteActive"),a.setAttribute("tabindex",-1),a.setAttribute("data-tabindex",-1))),clearTimeout(this._nextTimeout),clearTimeout(this._nextFadeTimeout),this.setData("currentActiveIndex",this.getData("ltPropActiveIndex")),this.setActiveItem(),this.setMethod()}.bind(this))}.bind(this),this.$node.getActiveSlideIndex=function(){return this.getData("currentActiveIndex")}.bind(this),this.$node.focus=function(){document.addEventListener("keyup",this._keyupEvents)}.bind(this),"swipe"===this.getData("ltPropEffect")&&(this._carouselTochStart=this.carouselTouchStart.bind(this,e),e.addEventListener("touchstart",this._carouselTochStart)),this.getData("ltPropArrowKey")&&(this._carouselClick=this.carouselClick.bind(this),document.addEventListener("click",this._carouselClick)),this._keyupEvents=this.keyupEvents.bind(this)},carouselClick:function(e){const t=e.target;t===this.$node||this.$node.contains(t)?document.addEventListener("keyup",this._keyupEvents):document.removeEventListener("keyup",this._keyupEvents)},keyupEvents:function(e){const t=e.keyCode||e.which,a=this.getData("ltPropEffect").toLowerCase();37==t?"fade"!==a?this.prevClick(e):this.prevFadeClick(e):39==t&&("fade"!==a?this.nextClick(e):this.nextFadeClick(e))},didDestroy:function(){clearInterval(this._autoId),delete this._autoId},setOrientation:function(){var e=this.getData("ltPropOrientation");e&&"vertical"===e?this.$node.classList.add("lyteCarouselVertical"):e&&"horizontal"===e&&this.$node.classList.remove("lyteCarouselVertical")}.observes("ltPropOrientation").on("didConnect"),ariaObserver:function(e){this.getData("ltPropAria")&&_lyteUiUtils.setAttribute(this.getCarouselWidget(),this.getData("ltPropAriaAttributes")||{},{})}.observes("ltPropAriaAttributes").on("didConnect"),carouselTouchStart:function(e,t){if(this.setData("prev",!1),t.touches.length>1)this.setData("prev",!0);else{var a=t.targetTouches[0],o={x:a.clientX,y:a.clientY};this.setData("coordinates",o),start=(new Date).getTime(),this.setData("start",start),this._carouselTouchEnd=this.carouselTouchEnd.bind(this,e),e.addEventListener("touchend",this._carouselTouchEnd)}},carouselTouchMove:function(e,t){t.preventDefault()},carouselTouchEnd:function(e,t){if(!this.getData("prev")){var a=this.getData("coordinates"),o=a.x,i=a.y,r=t.changedTouches[0],n=o-r.clientX;diffY=i-r.clientY,parent=this.$node.querySelector("lyte-carousel-content"),rect=parent.getBoundingClientRect(),width=rect.width,height=rect.height,xTolerance=.2*width,yTolerance=.15*height,begin=this.getData("start"),delay=(new Date).getTime()-begin;var s=this.getData("ltPropOrientation");s&&"horizontal"!==s&&"vertical"===s?s&&"vertical"===s&&delay<1e3&&Math.abs(diffY)>120&&(diffY<0?this.prevClick():diffY>0&&this.nextClick()):delay<1e3&&Math.abs(n)>150&&(n<0?this.prevClick():n>0&&this.nextClick())}},getCarouselWidget:function(){return this.$node.querySelector(".lyteCarouselWrapper")},setMethod:function(){var e=this.$node.getElementsByTagName("lyte-carousel-prev")[0],t=this.$node.getElementsByTagName("lyte-carousel-next")[0],a=this.$node.getElementsByTagName("lyte-carousel-indicator")[0];"fade"==this.getData("ltPropEffect").toLowerCase()?(this.$node.classList.add("lyteFade"),e&&(this._prevFadeClick=this.prevFadeClick.bind(this),e.addEventListener("click",this._prevFadeClick)),t&&(this._nextFadeClick=this.nextFadeClick.bind(this),t.addEventListener("click",this._nextFadeClick)),a&&(this._indicatorFadeClick=this.indicatorFadeClick.bind(this),a.addEventListener("click",this._indicatorFadeClick)),this._zeroOpacityTransition=this.zeroOpacityTransition.bind(this)):(this.$node.classList.add("lyteScroll"),e&&(this._prevClick=this.prevClick.bind(this),e.addEventListener("click",this._prevClick)),t&&(this._nextClick=this.nextClick.bind(this),t.addEventListener("click",this._nextClick)),a&&(this._indicatorClick=this.indicatorClick.bind(this),a.addEventListener("click",this._indicatorClick)),this._removePrevClass=this.removePrevClass.bind(this),this._removeNextClass=this.removeNextClass.bind(this))},dataObs:function(){setTimeout(function(){clearTimeout(this._nextTimeout),clearTimeout(this._nextFadeTimeout),this.setData("currentActiveIndex",this.getData("ltPropActiveIndex")),this.setActiveItem(),this.setMethod()}.bind(this))}.observes("ltPropData"),currentActiveObs:function(){this.setActiveItem()}.observes("currentActiveIndex"),activeIndexObs:function(){var e=this.getData("currentActiveIndex"),t=this.$node.getElementsByTagName("lyte-carousel-item"),a=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+e+'"] ');e>=0&&e<t.length&&(t[e].setAttribute("tabindex",-1),t[e].setAttribute("data-tabindex",-1),t[e].classList.remove("lyteActive"),t[e].setAttribute("aria-hidden",!1),a&&(a.setAttribute("tabindex",-1),a.setAttribute("data-tabindex",-1),a.classList.remove("lyteActive")),this.setData("currentActiveIndex",this.getData("ltPropActiveIndex")))}.observes("ltPropActiveIndex"),autoPlayPauseObs:function(){var e=this.$node.querySelector(".lyteCarouselWrapper");this._carouselContentFocus=this.carouselContentFocus.bind(this),this.getData("ltPropAutoPlayPause")&&this.getData("ltPropAutoPlayDuration")?e&&e.addEventListener("mouseenter",this._carouselContentFocus):e&&e.removeEventListener("mouseenter",this._carouselContentFocus)}.observes("ltPropAutoPlayPause").on("didConnect"),carouselContentFocus:function(){var e=this.$node.querySelector(".lyteCarouselWrapper"),t=this.$node.querySelector("lyte-carousel-content");t.setAttribute("aria-live","polite"),clearInterval(this._autoId),this._autoId=!1,this._carouselContentFocusOut=this.carouselContentFocusOut.bind(this,e,t),e.addEventListener("mouseleave",this._carouselContentFocusOut)},carouselContentFocusOut:function(e,t){t.setAttribute("aria-live","off"),e.removeEventListener("mouseleave",this._carouselContentFocusOut),this.getData("ltPropAutoPlay")&&this.autoPlayFunc()},autoPlayObs:function(){!this.getData("ltPropAutoPlay")&&this._autoId&&(clearInterval(this._autoId),this._autoId=!1),this.getData("ltPropAutoPlay")&&this.getData("ltPropRecords")>1&&this.autoPlayFunc()}.observes("ltPropAutoPlay").on("didConnect"),setActiveItem:function(){var e=this.getData("currentActiveIndex"),t=this.$node.getElementsByTagName("lyte-carousel-item"),a=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+e+'"] ');e>=0&&e<t.length&&(t[e].setAttribute("tabindex",this.getData("ltPropTabIndex")),t[e].setAttribute("data-tabindex",this.getData("ltPropDataTabIndex")),t[e].classList.add("lyteActive"),t[e].setAttribute("aria-hidden",!0),a&&(a.setAttribute("data-tabindex",this.getData("ltPropDataTabIndex")),a.setAttribute("tabindex",this.getData("ltPropTabIndex")),a.classList.add("lyteActive")))},prevClick:function(e){if(console.log(this._prevTrans),this._prevTrans)console.log("return");else{this._prevTrans=!0;var t=this.getData("ltPropRecords"),a=this.getData("currentActiveIndex"),o=this.$node.getElementsByTagName("lyte-carousel-item"),i=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+a+'"] ');res=!0,this.getMethods("onBeforePrev")&&(res=this.executeMethod("onBeforePrev",e,this,a,t),delete this._prevTrans),res&&(a>=1?this.previous(a,a-1,o,i,e):0==a&&this.previous(a,t-1,o,i,e))}},nextClick:function(e){var t=this.getData("ltPropRecords"),a=this.getData("currentActiveIndex"),o=this.$node.getElementsByTagName("lyte-carousel-item"),i=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+a+'"] '),r=!0,n=this;this._nextTrans||(this._autoId&&(clearInterval(this._autoId),this._autoId=!1),this.getMethods("onBeforeNext")&&(r=this.executeMethod("onBeforeNext",e,this,a,t)),r&&r.then?r.then((function(t){a>=0&&a<n.getData("ltPropRecords")&&(a<n.getData("ltPropRecords")-1?n.next(a,a+1,o,i,e):a==n.getData("ltPropRecords")-1&&n.next(a,0,o,i,e)),n.getData("ltPropAutoPlay")&&n.autoPlayFunc()})).catch((function(e){console.error(e)})):!1!==r&&(a>=0&&a<t-1?this.next(a,a+1,o,i,e):a==t-1&&this.next(a,0,o,i,e),this.getData("ltPropAutoPlay")&&setTimeout(function(){this.autoPlayFunc()}.bind(this),100)))},next:function(e,t,a,o,i){var r=!0,n=this.getData("ltPropRecords");if(i&&i.currentTarget&&"LYTE-CAROUSEL-INDICATOR"==i.currentTarget.tagName&&this.getMethods("onBeforeNext")&&(r=this.executeMethod("onBeforeNext",i,this,e,n)),r){this._nextTrans=!0;var s=parseFloat(getComputedStyle(a[e]).transitionDuration);s=1e3*s+200,setTimeout(function(){if(this._nextTrans){for(var e=this.$node.getElementsByTagName("lyte-carousel-item"),t=this.$node.getElementsByTagName("lyte-carousel-indicator-item"),a=this.$node.querySelectorAll("lyte-carousel-item.lyteActive"),o=0;o<e.length;++o)$L(e[o]).hasClass("lyteActivePrev")&&e[o].classList.remove("lyteActivePrev");if(a.length>1)for(o=0;o<e.length;++o)o!=this.getData("ltPropActiveIndex")&&$L(e[o]).hasClass("lyteActive")&&(e[o].setAttribute("tabindex",-1),e[o].classList.remove("lyteActive"),e[o].setAttribute("aria-hidden",!1),t[o].setAttribute("tabindex",-1),t[o].classList.remove("lyteActive"));delete this._nextTrans}}.bind(this),s),a[t].classList.add("lyteActiveNext"),this._nextTimeout=setTimeout(function(){this._nextTrans&&(a[e].addEventListener("transitionend",this._removePrevClass),a[e].classList.add("lyteActivePrev"),a[e].setAttribute("tabindex",-1),a[e].classList.remove("lyteActive"),a[e].setAttribute("aria-hidden",!1),o&&(o.setAttribute("tabindex",-1),o.classList.remove("lyteActive")),a[t].classList.remove("lyteActiveNext"),this.setData("currentActiveIndex",t),this.getMethods("onAfterNext")&&this.executeMethod("onAfterNext",i,this,t))}.bind(this),100)}},previous:function(e,t,a,o,i){var r=!0,n=this.getData("ltPropRecords");i&&i.currentTarget&&"LYTE-CAROUSEL-INDICATOR"==i.currentTarget.tagName&&this.getMethods("onBeforePrev")&&(r=this.executeMethod("onBeforePrev",i,this,e,n)),r&&(this._prevTrans=!0,a[t].classList.add("lyteActivePrev"),setTimeout(function(){a[e].addEventListener("transitionend",this._removeNextClass),a[e].classList.add("lyteActiveNext"),a[e].setAttribute("tabindex",-1),a[e].classList.remove("lyteActive"),a[e].setAttribute("aria-hidden",!1),this.setData("currentActiveIndex",t),console.log(a[t].classList),setTimeout((function(){a[t].classList.remove("lyteActivePrev")}),10),o&&(o.setAttribute("tabindex",-1),o.classList.remove("lyteActive")),this.getMethods("onAfterPrev")&&this.executeMethod("onAfterPrev",i,this,t)}.bind(this)))},removePrevClass:function(e){e.currentTarget.classList.remove("lyteActivePrev"),e.currentTarget.removeEventListener("transitionend",this._removePrevClass),delete this._nextTrans},removeNextClass:function(e){e.currentTarget.classList.remove("lyteActiveNext"),e.currentTarget.removeEventListener("transitionend",this.removeNextClass),delete this._prevTrans},autoPlayFunc:function(){this._autoId&&(clearInterval(this._autoId),this._autoId=!1);var e=this.getData("ltPropAutoPlayDuration");e&&this.getData("ltPropRecords")>1&&(this._autoId=setInterval(function(){var e=this.getData("ltPropEffect")?this.getData("ltPropEffect"):"";"fade"!=e.toLowerCase()||this._nextFadeTrans?"fade"===e.toLowerCase()||this._nextTrans||this.nextClick():this.nextFadeClick()}.bind(this),e))},indicatorClick:function(e){var t,a=e.target,o=$L(a).closest("lyte-carousel-indicator-item")[0];if(o&&"lyte-carousel-indicator-item"==o.tagName.toLowerCase()){t=o.getAttribute("data-value");var i=this.getData("currentActiveIndex"),r=this.$node.getElementsByTagName("lyte-carousel-item"),n=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+i+'"] ');t<i?this.previous(i,t,r,n,e):t>i&&this.next(i,t,r,n,e)}},prevFadeClick:function(e){if(!this._prevFadeTrans){var t=this.getData("ltPropRecords"),a=this.getData("currentActiveIndex"),o=this.$node.getElementsByTagName("lyte-carousel-item"),i=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+a+'"] '),r=!0;this.getMethods("onBeforePrev")&&(r=this.executeMethod("onBeforePrev",e,this,a,t)),r&&(a>=1?this.previousFade(a,a-1,o,i,e):0==a&&this.previousFade(a,t-1,o,i,e))}},previousFade:function(e,t,a,o,i){this._prevFadeTrans=!0,setTimeout(function(){a[t].addEventListener("transitionend",this._zeroOpacityTransition),a[e].classList.remove("lyteActive"),a[e].setAttribute("tabindex",-1),a[e].setAttribute("data-tabindex",-1),a[e].setAttribute("aria-hidden",!1),a[t].classList.add("lyteActive"),a[t].setAttribute("tabindex",this.getData("ltPropTabIndex")),a[t].setAttribute("data-tabindex",this.getData("ltPropDataTabIndex")),a[t].setAttribute("aria-hidden",!0),o&&(o.classList.remove("lyteActive"),o.setAttribute("tabindex",-1),o.setAttribute("data-tabindex",-1)),this.setData("currentActiveIndex",t),this.getMethods("onAfterPrev")&&this.executeMethod("onAfterPrev",i,this,t)}.bind(this))},zeroOpacityTransition:function(e){e.currentTarget.removeEventListener("transitionend",this._zeroOpacityTransition),delete this._prevFadeTrans,delete this._nextFadeTrans},nextFadeClick:function(e){var t=this.getData("ltPropRecords"),a=this.getData("currentActiveIndex"),o=this.$node.getElementsByTagName("lyte-carousel-item"),i=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+a+'"] '),r=!0,n=this;this._nextTrans||(this._autoId&&(clearInterval(this._autoId),this._autoId=!1),this.getMethods("onBeforeNext")&&(r=this.executeMethod("onBeforeNext",e,this,a,t)),r&&r.then?r.then((function(t){a>=0&&a<n.getData("ltPropRecords")&&(a<n.getData("ltPropRecords")-1?n.nextFade(a,a+1,o,i,e):a==n.getData("ltPropRecords")-1&&n.nextFade(a,0,o,i,e)),n.getData("ltPropAutoPlay")&&n.autoPlayFunc()})).catch((function(e){console.error(e)})):!1!==r&&(a>=0&&a<t-1?this.nextFade(a,a+1,o,i,e):a==t-1&&this.nextFade(a,0,o,i,e),this.getData("ltPropAutoPlay")&&setTimeout(function(){this.autoPlayFunc()}.bind(this),100)))},nextFade:function(e,t,a,o,i){this._nextFadeTrans=!0;var r=parseFloat(getComputedStyle(a[e]).transitionDuration);r=1e3*r+20,setTimeout(function(){this._nextFadeTrans&&delete this._nextFadeTrans}.bind(this),r),this._nextFadeTimeout=setTimeout(function(){a[e].addEventListener("transitionend",this._zeroOpacityTransition),a[e].classList.remove("lyteActive"),a[e].setAttribute("tabindex",-1),a[e].setAttribute("data-tabindex",-1),a[e].setAttribute("aria-hidden",!1),o&&(o.classList.remove("lyteActive"),o.setAttribute("tabindex",-1),o.setAttribute("data-tabindex",-1)),this.setData("currentActiveIndex",t),this.getMethods("onAfterNext")&&this.executeMethod("onAfterNext",i,this,t)}.bind(this),100)},indicatorFadeClick:function(){var e,t=event.target,a=$L(t).closest("lyte-carousel-indicator-item")[0];if(a&&"lyte-carousel-indicator-item"==a.tagName.toLowerCase()){e=a.getAttribute("data-value");var o=this.getData("currentActiveIndex"),i=this.$node.getElementsByTagName("lyte-carousel-item"),r=this.$node.querySelector(' lyte-carousel-indicator-item[data-value="'+o+'"] ');e<o?this.previousFade(o,e,i,r,event):e>o&&this.nextFade(o,e,i,r,event)}}}),_lyteUiUtils.registeredCustomElements["lyte-carousel-item"]||(_lyteUiUtils.registeredCustomElements["lyte-carousel-item"]=!0,Lyte.createCustomElement("lyte-carousel-item",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){this.setAttribute("aria-hidden",!1),this.hasAttribute("tabindex")||(this.setAttribute("tabindex","-1"),this.setAttribute("data-tabindex","-1"))}})),_lyteUiUtils.registeredCustomElements["lyte-carousel-next"]||(_lyteUiUtils.registeredCustomElements["lyte-carousel-next"]=!0,Lyte.createCustomElement("lyte-carousel-next",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){this.setAttribute("aria-role","button")}})),_lyteUiUtils.registeredCustomElements["lyte-carousel-prev"]||(_lyteUiUtils.registeredCustomElements["lyte-carousel-prev"]=!0,Lyte.createCustomElement("lyte-carousel-prev",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){this.setAttribute("aria-role","button")}}));var pbInteraction={};document.addEventListener("lytetabopen",(function(e){var t=e.target;pbInteraction.addLyteTabInteraction(t)})),pbInteraction.addLyteTabInteraction=function(e){if(e.classList.contains("lyteOuterTab")||e.classList.contains("lyteInnerTab")){var t=e.querySelector(".lyteTabActive"),a=t.clientWidth,o=t.offsetLeft,i=t.closest("lyte-tab-head");i||(i=e);var r=i.querySelector("#lyteOuterActiveTab");if(null===r){var n=document.createElement("span"),s="";e.classList.contains("lyteOuterTab")?s="lyteOuterActiveTab":e.classList.contains("lyteInnerTab")&&(s="lyteInnerActiveTab"),n.setAttribute("class",s),n.setAttribute("id","lyteOuterActiveTab"),i.append(n),r=n}$L(".marketTab1").removeClass("spanTabActive"),$L(".marketTab2").removeClass("spanTabActive"),$("span.lyteTabActive").addClass("spanTabActive"),r.style.cssText="width:"+a+"px; left: "+o+"px"}},store.registerAdapter("application",{namespace:"phonebridge",actionNamespace:"actions",headersForRequest:function(){return{"Content-Type":"application/json","X-PB-ORG":Setup.zgid,"X-SERVICE-ORG":Setup.serviceID,"X-SERVICE-NAME":Setup.serviceName,"X-ZCSRF-TOKEN":"phonebridgecsrparam="+COMMON_UTILS.getCookie("phonebridgecsr")}},parseResponse:function(e,t,a,o){return renderingUtils&&renderingUtils.hideProgressBar(),!o&&a&&204===a.status?{}:o},methodForRequest:function(e){return renderingUtils&&renderingUtils.showProgressBar(),"PATCH"===e?"PUT":e},buildURL:function(e,t,a,o,i){return i=i.replace(e,e+"s")}}),store.registerSerializer("application",{payloadKey:function(e){return e+"s"}}),function(){var e=function(e){return new Promise((function(t,a){e.then((function(){t.apply(this,arguments)}),(function(e){var t=e;if(t instanceof XMLHttpRequest)try{t=JSON.parse(e.responseText),Object.defineProperty(t,"$",{value:{responseObj:e}})}catch(e){Lyte.log(e)}a(t)}))}))},t=function(e){var t=store.getPrimaryKey(e);if(t)return t;throw Error("Model not defined")},a=function(e,a){var o=t(e),i=a[o];if(!i)return store.createRecord(e,a);var r=a;return a instanceof Record||(r=store.peekRecord(e,i),delete(a=JSON.parse(JSON.stringify(a)))[o],r.$.set(a)),r},o=function(e){return new Promise((function(t,a){var o={};Object.defineProperty(o,"$",{value:{error:e.$.error,isError:!0}}),a(o)}))},i={};Object.defineProperties(i,{findAll:{value:function(){return e(store.findAll.apply(this,arguments))}},findRecord:{value:function(){return e(store.findRecord.apply(this,arguments))}},saveOrUpdateRecord:{value:function(t,i){var r=a(t,i);return r.$.isError?o(r):e(r.$.save())}},deleteRecord:{value:function(e,a){var o=a[t(e)];return store.$pb.deleteRecordById(e,o)}},deleteRecordById:{value:function(t,a){var o=store.peekRecord(t,a);if(o)return o.$.deleteRecord(),e(o.$.save());throw Error("Record not found")}},triggerRecordAction:{value:function(t,i){var r=a(t,i);if(r.$.isError)return o(r);var n=Array.prototype.slice.call(arguments,2);return e(r.$.triggerAction.apply(this,n))}},triggerAction:{value:function(){return e(store.triggerAction.apply(this,arguments))}}}),Object.defineProperty(store,"$pb",{value:i})}(),Lyte.Component.register("pb-search",{_template:'<template tag-name="pb-search"> <lyte-search class="{{class_style}}" lt-prop-appearance="{{appearance}}" lt-prop-search-delay="{{search_delay}}" lt-prop-trim="{{trim}}" on-search="{{method(\'onSearch\',search_method)}}" on-clear="{{onclear}}" lt-prop-autofocus="{{autofocus}}" lt-prop-placeholder="{{placeholder}}" lt-prop-query-selector="{{scope}}"> </lyte-search> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}],_observedAttributes:["search_delay","trim","search_method","onclear","autofocus","placeholder","scope","appearance","class_style"],data:function(){return{search_delay:Lyte.attr("number",{default:0}),trim:Lyte.attr("boolean",{default:!0}),search_method:Lyte.attr("string"),onclear:Lyte.attr("string"),autofocus:Lyte.attr("boolean",{default:!0}),placeholder:Lyte.attr("string"),scope:Lyte.attr("string"),appearance:Lyte.attr("string",{default:"box"}),class_style:Lyte.attr("string")}},actions:{},methods:{onSearch:function(...e){window.COMMON_UTILS.executeFunctionByName(e[0],window,e[5],e[4])}}});