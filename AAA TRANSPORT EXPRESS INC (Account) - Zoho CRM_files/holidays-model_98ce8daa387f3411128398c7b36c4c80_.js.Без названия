store.registerModel("holidays",{id_i:Lyte.attr("string"),holidays:Lyte.attr("array"),details:Lyte.attr("array"),shift:Lyte.attr("array"),year:Lyte.attr("string"),info:Lyte.attr("object"),created_years:Lyte.attr("array")}),store.registerAdapter("holidays",{namespace:"crm/v2/settings/",buildURL:function(i,e,a,r,t,d,o){return"updateRecord"===e||"update"===e?t=t.replaceAll("/"+r.id,""):"deleteRecord"===e?t=o&&o.hasOwnProperty("deleteSingleHoliday")&&o.deleteSingleHoliday&&o.id?(t=t.replace("holidays_id",o.id)).substring(0,t.lastIndexOf("/"))+"/"+o.id:t.substring(0,t.lastIndexOf("/")):void 0!==o&&(t.match(RebrandLinkUtil.properties.SANDBOXURL)&&(t=t.replace(t.split(RebrandLinkUtil.properties.SANDBOXURL)[1],o.url)),t.match(sandbox.orgInfo.crmSandboxOrParentPortal)&&!o.isSandboxDiff&&!o.isProductionDiff||o.current?((t=window.location.origin+o.url).match(Crm.getCrmBasePath())&&(t=t.replace(Crm.getCrmBasePath(),"/crm")),t.match(sandbox.orgInfo.crmSandboxOrParentPortal)&&(t=t.replace(sandbox.orgInfo.crmSandboxOrParentPortal+"/",""))):t=t.replace(t.split(RebrandLinkUtil.properties.CRMURL)[1],o.url),(t.match(RebrandLinkUtil.properties.CRMURL)||!t.match("sandbox/diff")&&o.current&&!t.match("production/diff"))&&(t=t.replace(sandbox.orgInfo.crmSandboxOrParentPortal+"/",""))),t=t.trim()},methodForRequest:function(i,e,a,r){return"PATCH"===i?"PUT":r&&!0===r.isDelete?"DELETE":i}}),store.registerSerializer("holidays",{extractMeta:function(i){if(i.info)return i.info},normalizeResponse:function(i,e,a){return"updateRecord"===e||"createRecord"===e?(a.holidays[0].details&&a.holidays[0].details.id?a.holidays[0].id=a.holidays[0].details.id:a.holidays[0].id="holidays_id",{holidays:a.holidays[0]}):("findAll"===e&&a&&(a.hasOwnProperty("holidays")||(a.holidays={})),a)},normalize:function(i,e,a){return a&&(a.hasOwnProperty("id")?a.holidays={id:a.id}:a.hasOwnProperty("details")&&a.details.hasOwnProperty("id")?(a.id=a.details.id,a.holidays={id:a.details.id}):"findAll"===e&&(a.shift&&a.shift[0]&&a.shift[0].id?(a.id=a.shift[0].id+a.year,a.holidays={id:a.shift[0].id+a.year}):void 0===a.holidays?(a.id="holidays_id"+a.year,a.holidays={id:"holidays_id"+a.year}):a.id="holidays_id"+a.year)),a},payloadKey:function(i){return i||"holidays"},serialize:function(i,e,a,r){if(e.holidays)for(var t=e.holidays.details?e.holidays.details.length:0,d=0;d<t;d++)"true"!==e.holidays.details[d].deleted&&e.holidays.details[d].userFmt&&(e.holidays.details[d].date=Lyte.registeredMixins["business-hours-utils"].convertdateToDBformat(e.holidays.details[d].userFmt));if(!(r&&r.hasOwnProperty("deleteSingleHoliday")&&r.deleteSingleHoliday))return{holidays:[e.holidays]}}});
