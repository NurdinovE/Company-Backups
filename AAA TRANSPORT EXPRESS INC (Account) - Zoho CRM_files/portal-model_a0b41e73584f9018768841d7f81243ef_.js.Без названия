store.registerModel("portal",{id:Lyte.attr("string",{primaryKey:!0}),name:Lyte.attr("string",{validation:"validatePortalName"}),active:Lyte.attr("boolean"),created_time:Lyte.attr("string"),created_by:Lyte.attr("object"),modified_time:Lyte.attr("string"),modified_by:Lyte.attr("object"),saml_configuration:Lyte.attr("object")}),Lyte.registerValidator("validatePortalName",(function(e,t){if(t){var r=t.length;if(6>r||r>30)return{message:I18n.getMsg("custmr.prtl.name.min.six.chars")};var a=t.length;return(t=t.replace(/[^a-zA-Z0-9]+/g,"")).length===a||{message:I18n.getMsg("custmr.prtl.naming.convntn")}}})),store.registerAdapter("portal",{namespace:"crm/ver$ion/settings",buildURL:function(e,t,r,a,o,i,l){(o=(o=(o=o.replace("/ver$ion/","/v8/")).replace(e,e+"s")).replace("dummyValue",Crm.userDetails.CLIENT_PORTAL_NAME),"updateRecord"===t&&(o=o.replace(a.id,l.oldPortalName)),void 0!==l&&l.includeName)&&(o=o+"/"+(CLIENT_PORTAL_NAME&&"dummyValue"!==CLIENT_PORTAL_NAME?CLIENT_PORTAL_NAME:Crm.userDetails.CLIENT_PORTAL_NAME));return o},methodForRequest:function(e){return"PATCH"===e&&(e="PUT"),e}}),store.registerSerializer("portal",{normalizeResponse:function(e,t,r){return"updateRecord"===t&&(r.portals=r.portals[0],r.portals.details.id=store.peekAll("portal")[0].id,r.portals.id=store.peekAll("portal")[0].id),"createRecord"===t&&(r.portals=r.portals[0]),r},varPayloadKey:"portals",payloadKey:function(){return this.varPayloadKey},normalize:function(e,t,r){if("findAll"===t){var a=(r=r||{}).zaid;(r=objectUtils.removeKeyFromGivenObj(r,"zaid")).id=a}else"updateRecord"===t?(r.details.id=store.peekAll("portal")[0].id,r.id=store.peekAll("portal")[0].id):"createRecord"===t&&(r.name=r.details.name);return r},serialize:function(e,t,r){if("createRecord"===e)t.portals=[],t.portals[0]=t.portal,t.portals[0].name=r.name,delete t.portal;else if("updateRecord"===e){var a=[];a[0]={},void 0!==t.portal.name?a[0].name=t.portal.name:void 0!==t.portal.saml_configuration&&(a[0].saml_configuration=t.portal.saml_configuration),t={portals:a}}return t}});
