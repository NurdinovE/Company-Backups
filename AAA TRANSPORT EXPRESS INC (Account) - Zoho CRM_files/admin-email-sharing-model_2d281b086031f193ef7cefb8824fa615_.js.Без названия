store.registerModel("email_sharing_action",{id:Lyte.attr("string",{primaryKey:!0}),access_type:Lyte.attr("string"),exclude_domain_list:Lyte.attr("array",{default:[]}),shared_to:Lyte.attr("array",{default:[]})},{actions:{single_get:{},mass_update:{},getSharedTo:{},sendSingleConfigRequest:{},sendMassConfigRequest:{}}}),store.registerAdapter("email_sharing_action",{namespace:"crm/v2.2/settings/emails/sharing",buildURL:function(e,i,a,r,s,t,n){return"findAll"===i||"updateRecord"===i?s=s.replace("/email_sharing_action",""):"single_get"===t?s=s.replace("email_sharing_action/actions/single_get",n.id):"mass_update"===t?s=s.replace("/email_sharing_action",""):"getSharedTo"===t?(s=Crm.getCrmBasePath()+"/AdminEmailSharing.do?action=openSharingPopUpNewUI&userId="+n.userId,n.getValueFromDB?s+="&getValuesFromDB=true":s+="&getValuesFromDB=false&selectedUserIds=All",s+="&emailSharingType="+n.emailSharingType):"sendSingleConfigRequest"===t?s=s.replace("/email_sharing_action/actions/sendSingleConfigRequest","/"+n.id+"/actions/configuration_request"):"sendMassConfigRequest"===t&&(s=s.replace("/email_sharing_action/actions/sendMassConfigRequest","/actions/mass_configuration_request")),s},methodForRequest:function(e,i,a,r,s){return"findAll"===i||"single_get"===s?"GET":"mass_update"===s||"updateRecord"===i?"PUT":"getSharedTo"===s||"sendSingleConfigRequest"===s||"sendMassConfigRequest"===s?"POST":void 0}}),store.registerSerializer("email_sharing_action",{payloadKey:function(e){return e+""},serialize:function(e,i,a,r,s,t,n){if("mass_update"===n||"sendMassConfigRequest"===n){var o={};return r.email_sharing&&(o.email_sharing=[r.email_sharing]),r.ids?o.ids=r.ids:r.criteria&&(o.criteria=r.criteria),r.type&&(o.type=r.type),o}if("updateRecord"===e){var l={};return i[s].hasOwnProperty("access_type")?l.sharing_details={access_type:i[s].access_type}:i[s].hasOwnProperty("exclude_domain_list")?l.exclude_domains=i[s].exclude_domain_list:i[s].hasOwnProperty("shared_to")&&(l.sharing_details={shared_to:i[s].shared_to}),i.email_sharing=[l],i}return null},normalizeResponse:function(e,i,a){if(a[e]=a.email_sharing,!a.email_sharing)return a;var r=a.email_sharing;if("updateRecord"===i)a[e].id=r[0].details.id;else if("findAll"===i)for(var s=r.length?r.length:0,t=0;t<s;++t)a[e][t].access_type=r[t].sharing_details.access_type,a[e][t].exclude_domain_list=r[t].exclude_domains,a[e][t].shared_to=r[t].sharing_details.shared_to,a[e][t].shared_to_details={},a[e][t].exclude_domains=r[t].exclude_domains,a[e][t].checked=!1;return a}}),store.registerModel("email_sharing_grouping_count",{id:Lyte.attr("string",{primaryKey:!0}),filters:Lyte.attr("string")}),store.registerAdapter("email_sharing_grouping_count",{namespace:"crm/v2.2/settings/emails/sharing/actions/group_by_role",buildURL:function(e,i,a,r,s){return"findAll"===i&&(s=s.replace("/email_sharing_grouping_count","")),s}}),store.registerSerializer("email_sharing_grouping_count",{payloadKey:function(e){return e+""},serialize:function(e){if("findAll"===e)return null},normalizeResponse:function(e,i,a){var r={id:"212121"};return r.grouping_count=a.grouping_count,a.email_sharing_grouping_count=r,a}});
