var EmailTabHomeUtil={dragAndDropObject:{}};EmailTabHomeUtil.dragAndDropObject.dropedElement=void 0,EmailTabHomeUtil.dragAndDropObject.isCompleted=!0,EmailTabHomeUtil.dragAndDropObject.fromMod=void 0,EmailTabHomeUtil.dragAndDropObject.toMod=void 0,EmailTabHomeUtil.tempEleScrVal=0,EmailTabHomeUtil.isOnSentimentDiv=!1,EmailTabHomeUtil.URL=Crm.getCrmBasePath()+"/View.do",EmailTabHomeUtil.ACTION="action",EmailTabHomeUtil.POST_REQUEST_TYPE="POST",EmailTabHomeUtil.GET_REQUEST_TYPE="GET",EmailTabHomeUtil.DISABLED_DROPNDIV="disabledDropDiv",EmailTabHomeUtil.GET_FILE_DATA="getFileData",EmailTabHomeUtil.COMPOSE="compose",EmailTabHomeUtil.REPLY="reply",EmailTabHomeUtil.REPLYALL="replyAll",EmailTabHomeUtil.FORWARD="forward",EmailTabHomeUtil.VIEW_MAILS="viewMails",EmailTabHomeUtil.LOAD_MAILS="loadMails",EmailTabHomeUtil.LOAD_MORE_SEARCH_MAILS="loadMoreSearchMails",EmailTabHomeUtil.CONVERT_UNMATCHED_TO_COLLEAGUES="convertUnMatchedMailToColleaugesList",EmailTabHomeUtil.DELETE="delete",EmailTabHomeUtil.DELETE_DRAFT="deleteDraft",EmailTabHomeUtil.MOVE_TO_TRASH="moveToTrash",EmailTabHomeUtil.MOVE_MAIL="moveMail",EmailTabHomeUtil.MOVE_TO_FOLDER="moveToFolder",EmailTabHomeUtil.MARK_AS_SPAM="markAsSpam",EmailTabHomeUtil.MARK_AS_READ="markAsRead",EmailTabHomeUtil.MARK_AS_UNREAD="markAsUnread",EmailTabHomeUtil.SEARCH="search",EmailTabHomeUtil.GET_ALL_TEMPLATES_FOR_MODULE="getAllTemplatesForModule",EmailTabHomeUtil.GET_TEMPLATE_DETAIL_BY_ID="getTemplatesDetailById",EmailTabHomeUtil.GET_POTENTIAL_STATGES="getPotentialStages",EmailTabHomeUtil.EMAIL_DETAILVIEW_PARENT="emaildetailresult",EmailTabHomeUtil.EMAIL_CONVIEW_PARENT="etConvDetailView",EmailTabHomeUtil.imgStaticServerPath="",EmailTabHomeUtil.ViewPortWidth="",EmailTabHomeUtil.ViewPortHeight="",EmailTabHomeUtil.KanbanViewBoxHeight="",EmailTabHomeUtil.KanbanViewSelectionObject="",EmailTabHomeUtil.Loading="#etLoading",EmailTabHomeUtil.detailViewParent="",EmailTabHomeUtil.uiSender=null,EmailTabHomeUtil.uiItem=null,EmailTabHomeUtil.droppedElement="",EmailTabHomeUtil.DragStart="",EmailTabHomeUtil.mailActionsOpener=null,EmailTabHomeUtil.SUCCESS="SUCCESS",EmailTabHomeUtil.selectedMailsIds=new Array,EmailTabHomeUtil.selectedThreadIds=new Array,EmailTabHomeUtil.MailInView="",EmailTabHomeUtil.ThreadIdInView="",EmailTabHomeUtil.MessageIdInView="",EmailTabHomeUtil.CurrentlyDetailViewOpened=!1,EmailTabHomeUtil.MAIL_SELECTION_LIMIT=200,EmailTabHomeUtil.DefaultMailBoxWidth=260,EmailTabHomeUtil.KanbanViewBoxHeight="",EmailTabHomeUtil.KanbanViewBoxLength=4,EmailTabHomeUtil.CustomMailBoxWidth=-1,EmailTabHomeUtil.VisibleModulesCount=0,EmailTabHomeUtil.subMenuActive=0,EmailTabHomeUtil.mainMenuActive=0,EmailTabHomeUtil.KanbanMailBoxWidth="",EmailTabHomeUtil.ModuleVsParentDivId={},EmailTabHomeUtil.QuickEditDeleteIcons=0,EmailTabHomeUtil.MailMultiSelect=0,EmailTabHomeUtil.MailSelection=0,EmailTabHomeUtil.ContextMenuParent="",EmailTabHomeUtil.isChatEnabled="",EmailTabHomeUtil.isMenuEnabled=!0,EmailTabHomeUtil.FullnameView=0,EmailTabHomeUtil.FullnameQuickView=0,EmailTabHomeUtil.shouldReloadView=!1,EmailTabHomeUtil.createdEntitiesJsonResponse=[],EmailTabHomeUtil.EmailcontainerHeight,EmailTabHomeUtil.HasPotentialStagesBeenFetched=0,EmailTabHomeUtil.CloseSuccDiv=0,EmailTabHomeUtil.PotentialStages,EmailTabHomeUtil.createPotentialFrom=null,EmailTabHomeUtil.isShiftKeyPressed=!1,EmailTabHomeUtil.isInitialLoad=!1,EmailTabHomeUtil.lastSelectedMailLi=null,EmailTabHomeUtil.isMailMultiSelectEnabled=!1,EmailTabHomeUtil.TopMenuBarHeight=0,EmailTabHomeUtil.BottomChatBarHeight=0,EmailTabHomeUtil.httpprotocol=location.protocol+"//",EmailTabHomeUtil.viewOrLabelLimit=32,EmailTabHomeUtil.currentThreadMailDetailContainer=null,EmailTabHomeUtil.viewNameWidth=0,EmailTabHomeUtil.syncStatus=0,EmailTabHomeUtil.searchIndexStatus=null,window.ajaxPager=!0,EmailTabHomeUtil.showNewTooltip=function(t){var e=$("#ecTTPointer"),i=$(t).attr("toolTipVal");if(i){var a,r=$(t).offset(),o=$("#ecNewToolTip"),n=r.left-o.outerWidth()/2;n=EmailTabHomeUtil.ViewPortWidth<n+o.outerWidth()?EmailTabHomeUtil.ViewPortWidth-o.outerWidth()-5:n<0?5:r.left-o.outerWidth()/2;var l=r.top-o.outerHeight();a=r.left-o.offset().left+$(t).outerWidth()/2-14,l>10?(l=r.top-35,e.css("bottom","-4px").removeClass("rotate180")):(l=r.top+$(t).outerHeight()+10,e.css("bottom",o.outerHeight()-1+"px").addClass("rotate180")),o.css({top:l,left:n}).show(),e.css("left",a+"px"),$("#ecTTVal").text(i),o.show()}},EmailTabHomeUtil.hideNewTooltip=function(){$("#ecNewToolTip").hide()},EmailTabHomeUtil.handleAjaxAbort=function(t){var e=$(EmailTabHomeUtil.Loading);if(e.hide(),e.removeAttr("data-zcqa"),t&&t.status&&(451==t.status||452==t.status||453==t.status||454==t.status))Crm.showAlertMsg(t.responseText);else if(t&&t.status&&455!=t.status){var i=arguments[0].readyState;0!==i&&Crm.showAlertMsg(I18n.getMsg("crm.security.error.add.user"))}},EmailTabHomeUtil.closeSuccessDiv=function(){0==EmailTabHomeUtil.CloseSuccDiv&&$("#mailSentSuccessfullyDiv").hide()},EmailTabHomeUtil.customConfirmation=function(t,e,i){var a=t.confirm?t.confirm:I18n.getMsg("crm.button.ok"),r=t.cancel?t.cancel:I18n.getMsg("crm.button.cancel"),o="emailGeneralConfirmMsgDiv";$("#contextMenuLabels").hide();var n=$("#"+o),l=n.find(".confirm"),s=n.find(".cancelBtn"),c=n.find(".ceCloseIconBold");return t.close&&(c.removeClass("hide"),c.off("click").click((function(t){var e=$("#"+o);return e.find(".ceCloseIconBold").addClass("hide"),e.hide(),renderingUtils.removeFreezeLayer(),renderingUtils.stopEvent(t),!1}))),l.text(a),s.text(r),n.find(".infoCont").text(t.info),l.off("click").click((function(t){var i=$("#"+o);i.find(".ceCloseIconBold").addClass("hide"),i.hide(),renderingUtils.removeFreezeLayer(),e&&e(),renderingUtils.stopEvent(t)})),s.off("click").click((function(t){var e=$("#"+o);return e.find(".ceCloseIconBold").addClass("hide"),e.hide(),renderingUtils.removeFreezeLayer(),renderingUtils.stopEvent(t),i&&i(),!1})),renderingUtils.freezeBackground(),mailsetCenter(o),n.show(),!1},EmailTabHomeUtil.NavigateToIMAP=function(){crmTab.redirectToSalesInbox=!0,Crm.trackSpotLightAction("SalesInbox - Configure Now Click")},EmailTabHomeUtil.initiateConfig=function(){crmTab.isMailClientEnabled&&!crmTab.isMailClientActive&&($("#etsImportFilter").removeClass("hide"),renderingUtils.freezeBackground(),Crm.isInitialFilterConfig=!0,mailsetCenter("etsImportFilter"),EmailImportFilter.saveConfig=EmailTabHomeUtil.startMigration)},EmailTabHomeUtil.startMigration=function(){var t=$("#tryNowBtn");t.prop("disabled",!0),t.attr("opacity",.5);var e=EmailTabHomeUtil.ACTION+"=trySalesinbox";e+="&"+csrfParamName+"="+csrfToken,(new crmRequestPool).initiate({type:EmailTabHomeUtil.POST_REQUEST_TYPE,url:Crm.getCrmBasePath()+"/SalesInboxIntro.do",data:e,success:function(t){"SUCCESS"!==t&&"ALREADY_ACTIVE"!==t||("undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()?CrmPlusImpl.trigger("updateSalesInboxConfigurationData",[{"isconfigured ":!0,isfromconfigrationview:!0,has_access:!0,isemailadded:!0}]):window.location=crmHistory.locationOrigin+networkUtils.getOrgSpecificURL(Urls.Salesinbox))}})},EmailTabHomeUtil.adjustRightpanelTab=function(){setTimeout((function(){var t=$("#unknownConvertbuttonDiv");if(t.is(":visible")){var e=$("#krp_Conversation_Container"),i=e.outerHeight(),a=t.outerHeight(),r=$("#krp_Conversation_InnerContainer"),o=r[0].scrollHeight;e.css("height",i-a),r.css({height:o}),$$rightPanel.setPerfectScrollBar("krp_Conversation_Container","krp_Conversation_InnerContainer","")}$("#kso_rightpanel_title").addClass("hide")}),50)},EmailTabHomeUtil.appendCreateEntityAfterMailFetch=function(t,e){return function(){var i=EmailTabHomeUtil.getEmailToCreateEntity(t,e);if(!EmailTabHomeUtil.showEntityCreatedSuccessMsg(i)){var a=$.parseJSON('{"emailAddr":"'+i+'"}');a.leadpermission=crmTab.tabList.contains("Leads")&&Crm.userDetails.permissions.Crm_Implied_Create_Leads,a.contactpermission=crmTab.tabList.contains("Contacts")&&Crm.userDetails.permissions.Crm_Implied_Create_Contacts,EmailTabHomeUtil.populateUnMatchedEntityDetails("CreateEntityFromUnMatchedMails",a)}}},EmailTabHomeUtil.getEmailToCreateEntity=function(t,e){var i="";t===$("#configuredZmailAddr").val()?i=e.split(",")[0]:i=t;return i},EmailTabHomeUtil.showEntityCreatedSuccessMsg=function(t){var e=!1;if(null!=EmailTabHomeUtil.createdEntitiesJsonResponse&&EmailTabHomeUtil.shouldReloadView){var i=$(".outlookqCreate");$.each(EmailTabHomeUtil.createdEntitiesJsonResponse,(function(a,r){if(r.fromAddr===t||i.length)return r.taskpermission=crmTab.tabList.contains("Activities")&&Crm.userDetails.permissions.Crm_Implied_Create_Tasks,r.potentialpermission=crmTab.tabList.contains("Potentials")&&Crm.userDetails.permissions.Crm_Implied_Create_Potentials,EmailTabHomeUtil.populateUnMatchedEntityDetails("PostCreateEntity",r),e=!0,!0}))}return e},EmailTabHomeUtil.populateUnMatchedEntityDetails=function(t,e){var i=$("#kso_social_rightpanel");if(i.length){var a=Handlebars.templates[t](e);a+=i[0].outerHTML,EmailTabHomeUtil.adjustRightpanelTab(),$("#entityInfoOuterDiv").html(a),"undefined"!=typeof $$rightPanel&&$(".outlookqCreate").length&&$$rightPanel.bindClickEventForOutlook()}},EmailTabHomeUtil.reloadOnEntityCreationFromUnMatched=function(){var t=$(".emailnavLink.aliaslinksel");t.removeClass("aliaslinksel"),t.parent().find(".elpSelectedOption").removeClass("elpSelectedOption");var e=t.attr("emailViewId");EmailTabHomeUtil.shouldReloadView=!1,EmailTabHomeUtil.createdEntitiesJsonResponse=[],EmailViewsUtil.getMailsbyViewId(e)},EmailTabHomeUtil.postEntityCreate=function(t){if(EmailTabHomeUtil.shouldReloadView||(EmailTabHomeUtil.createdEntitiesJsonResponse=[],EmailTabHomeUtil.shouldReloadView=!0),"update"===t.action)$.each(EmailTabHomeUtil.createdEntitiesJsonResponse,(function(e,i){if(t.entityId===i.entityId)return"Tasks"===t.module?i.taskId=t.taskId:"Potentials"===t.module&&(i.potentialId=t.potentialId),!0}));else if("create"===t.action){var e=$("#"+EmailTabHomeUtil.detailViewParent).find("iframe").contents().find("#"+EmailTabHomeUtil.currentThreadMailDetailContainer);t.fromAddr="salesinbox"==Q.source?Q.actionDetails.email:e.length?e.find(".fromAddr").val():$("#rightPanelfromAddr").val(),EmailTabHomeUtil.createdEntitiesJsonResponse.push(t)}EmailTabHomeUtil.showEntityCreatedSuccessMsg($ESAPI.encoder().decodeFromURL($$rightPanel.rpSearchEmailAddr))},EmailTabHomeUtil.getViewPort=function(){var t,e;if(void 0!==window.innerWidth)t=window.innerWidth,e=window.innerHeight;else if(void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth)t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;else{var i=document.getElementsByTagName("body")[0];t=i.clientWidth,e=i.clientHeight}EmailTabHomeUtil.ViewPortWidth=t,EmailTabHomeUtil.ViewPortHeight=e};var EmailImportFilter={};EmailImportFilter=function(){var t=["dat","xml"];return{saveConfig:null,showImportFilter:function(t){$(".contextMenulist").hide(),renderingUtils.freezeBackground(),this.hideError(),$("#etsImportFilter").removeClass("hide"),mailsetCenter("etsImportFilter"),this.saveConfig=t},chooseFile:function(t){if($(t).val()){var e=$(t)[0].files[0].name,i=e.lastIndexOf(".");$(t).next().children("span").first().text(e.slice(0,i)).next().text("."+e.slice(i+1)).show(),this.hideError()}else $(t).next().children("span").first().text(I18n.getMsg("crm.email.importfilter.fileformats")).next().text("").hide()},closeImportFilter:function(t){var e=$("#ecFileUpload");$("#etsImportFilter").addClass("hide"),renderingUtils.removeFreezeLayer(),e.val(""),e.next().find("span").first().text(I18n.getMsg("crm.email.importfilter.fileformats")).next().text("").hide(),this.hideError(),$("#efImportFilterBtn").find("span").last().text("Import"),Crm.isInitialFilterConfig=!1;var i=this.saveConfig;if(i&&i(),this.saveConfig=null,t)try{$L("#etsImportFilter")[0].remove(),Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.email-configuration.email-settings.email-index")}catch(t){Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.email-configuration")}},animateBtnColor:function(t,e){"revert"===e?$(t).stop().css({backgroundColor:"#467ccd","transition-duration":"200ms"}):$(t).stop().css({backgroundColor:"#578fe2","transition-duration":"200ms"})},hideError:function(){$("#etsImportFilter").find(".importError").addClass("hide"),$("#importError").addClass("hide")},showError:function(t){var e=$("#etsImportFilter").find(".importError"),i=$("#importError");e.removeClass("mL20");var a=e;a.text(t),a.removeClass("hide"),i.removeClass("hide"),i.text(t)},isValidFile:function(e){var i=e.lastIndexOf("."),a=!0;if(-1!==i){var r=e.slice(i+1);-1===t.lastIndexOf(r)&&(this.showError(I18n.getMsg("crm.email.importfilter.validation.invalidfile")),a=!1)}return a},importFilter:function(t){var e=$("#ecFileUpload");if(!e.val())return this.showError(I18n.getMsg("crm.email.importfilter.validation.choosefile")),void $("#etsImportFilter").find(".importError").addClass("mL20");var i=e[0].files[0];if(this.isValidFile(i.name)){$("#efImportFilterBtn").find("span.emLoadIcon").removeClass("hide");var a=new FormData;a.append("efImportFilter",i),a.append(csrfParamName,csrfToken);var r=Crm.getCrmBasePath()+"/EmailWF.do?action=importEmailFilter",o=this.showError;$.ajax({url:r,type:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(e){if("SUCCESS"===e.result)(i=$("#efImportFilterBtn")).find("span.emLoadIcon").addClass("hide"),i.find("span").last().text("Imported"),t&&crmui.showMsgBand("success",I18n.getMsg("crm.label.success"),3e3,"top"),setTimeout((function(){EmailImportFilter.closeImportFilter()}),500);else if("duplicate"===e.result){var i;(i=$("#efImportFilterBtn")).find("span.emLoadIcon").addClass("hide"),i.find("span").last().text("Imported"),EmailImportFilter.closeImportFilter();var a=$("#emailTabSuccessDiv");a.css({display:"block","font-size":"14px",position:"absolute",background:"#D82222",border:"none"}),a.text(I18n.getMsg("crm.email.import.filter.duplicate")),setTimeout((function(){a.removeAttr("style"),a.css({display:"none"})}),1500)}if(t)try{$L("#etsImportFilter")[0].remove(),Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.email-configuration.email-settings.email-index")}catch(t){Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.email-configuration")}},error:function(){o(I18n.getMsg("crm.email.importfilter.validation.erroroccured"))}})}}}}(),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):t(jQuery)}((function(t,e){"use strict";var i={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},a=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),n=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),l=function(){var t="";if(r)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function s(e,i,a,r){for(var n=[],l=0;l<e.length;l++){var s=e[l];if(s){var c=tinycolor(s),d=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";d+=tinycolor.equals(i,s)?" sp-thumb-active":"";var m=c.toString(r.preferredFormat||"rgb"),u=o?"background-color:"+c.toRgbString():"filter:"+c.toFilter();n.push('<span title="'+m+'" data-color="'+c.toRgbString()+'" class="'+d+'"><span class="sp-thumb-inner" style="'+u+';"></span></span>')}else{n.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+a+"'>"+n.join("")+"</div>"}function c(c,d){var p,g,b,v,E=function(e,a){var r=t.extend({},i,e);return r.callbacks={move:u(r.move,a),change:u(r.change,a),show:u(r.show,a),hide:u(r.hide,a),beforeShow:u(r.beforeShow,a)},r}(d,c),T=E.flat,y=E.showSelectionPalette,w=E.localStorageKey,H=E.theme,C=E.callbacks,_=(p=Wt,g=10,function(){var t=this,e=arguments,i=function(){v=null,p.apply(t,e)};b&&clearTimeout(v),!b&&v||(v=setTimeout(i,g))}),U=!1,x=!1,S=0,I=0,k=0,M=0,A=0,P=0,F=0,R=0,L=0,O=0,D=1,$=[],V=[],B={},N=E.selectionPalette.slice(0),W=E.maxSelectionSize,j="sp-dragging",q=null,z=c.ownerDocument,K=(z.body,t(c)),G=!1,Y=t(l,z).addClass(H),J=Y.find(".sp-picker-container"),Q=Y.find(".sp-color"),X=Y.find(".sp-dragger"),Z=Y.find(".sp-hue"),tt=Y.find(".sp-slider"),et=Y.find(".sp-alpha-inner"),it=Y.find(".sp-alpha"),at=Y.find(".sp-alpha-handle"),rt=Y.find(".sp-input"),ot=Y.find(".sp-palette"),nt=Y.find(".sp-initial"),lt=Y.find(".sp-cancel"),st=Y.find(".sp-clear"),ct=Y.find(".sp-choose"),dt=Y.find(".sp-palette-toggle"),mt=K.is("input"),ut=mt&&"color"===K.attr("type")&&h(),ft=mt&&!T,ht=ft?t(n).addClass(H).addClass(E.className).addClass(E.replacerClassName):t([]),pt=ft?ht:K,gt=ht.find(".sp-preview-inner"),bt=E.color||mt&&K.val(),vt=!1,Et=E.preferredFormat,Tt=!E.showButtons||E.clickoutFiresChange,yt=!bt,wt=E.allowEmpty&&!ut;function Ht(){if(E.showPaletteOnly&&(E.showPalette=!0),dt.text(E.showPaletteOnly?E.togglePaletteMoreText:E.togglePaletteLessText),E.palette){$=E.palette.slice(0),V=t.isArray($[0])?$:[$],B={};for(var e=0;e<V.length;e++)for(var i=0;i<V[e].length;i++){var a=tinycolor(V[e][i]).toRgbString();B[a]=!0}}Y.toggleClass("sp-flat",T),Y.toggleClass("sp-input-disabled",!E.showInput),Y.toggleClass("sp-alpha-enabled",E.showAlpha),Y.toggleClass("sp-clear-enabled",wt),Y.toggleClass("sp-buttons-disabled",!E.showButtons),Y.toggleClass("sp-palette-buttons-disabled",!E.togglePaletteOnly),Y.toggleClass("sp-palette-disabled",!E.showPalette),Y.toggleClass("sp-palette-only",E.showPaletteOnly),Y.toggleClass("sp-initial-disabled",!E.showInitial),Y.addClass(E.className).addClass(E.containerClassName),Wt()}function Ct(){if(w&&window.localStorage){try{var e=window.localStorage[w].split(",#");e.length>1&&(delete window.localStorage[w],t.each(e,(function(t,e){_t(e)})))}catch(t){}try{N=window.localStorage[w].split(";")}catch(t){}}}function _t(e){if(y){var i=tinycolor(e).toRgbString();if(!B[i]&&-1===t.inArray(i,N))for(N.push(i);N.length>W;)N.shift();if(w&&window.localStorage)try{window.localStorage[w]=N.join(";")}catch(t){}}}function Ut(){var e=Dt(),i=t.map(V,(function(t,i){return s(t,e,"sp-palette-row sp-palette-row-"+i,E)}));Ct(),N&&i.push(s(function(){var t=[];if(E.showPalette)for(var e=0;e<N.length;e++){var i=tinycolor(N[e]).toRgbString();B[i]||t.push(N[e])}return t.reverse().slice(0,E.maxSelectionSize)}(),e,"sp-palette-row sp-palette-row-selection",E)),ot.html(i.join(""))}function xt(){if(E.showInitial){var t=vt,e=Dt();nt.html(s([t,e],e,"sp-palette-row-initial",E))}}function St(){(I<=0||S<=0||M<=0)&&Wt(),x=!0,Y.addClass(j),q=null,K.trigger("dragstart.spectrum",[Dt()])}function It(){x=!1,Y.removeClass(j),K.trigger("dragstop.spectrum",[Dt()])}function kt(){var t=rt.val();if(null!==t&&""!==t||!wt){var e=tinycolor(t);e.isValid()?(Ot(e),Nt(!0)):rt.addClass("sp-validation-error")}else Ot(null),Nt(!0)}function Mt(){U?Rt():At()}function At(){var e=t.Event("beforeShow.spectrum");U?Wt():(K.trigger(e,[Dt()]),!1===C.beforeShow(Dt())||e.isDefaultPrevented()||(!function(){for(var t=0;t<a.length;t++)a[t]&&a[t].hide()}(),U=!0,t(z).bind("keydown.spectrum",Pt),t(z).bind("click.spectrum",Ft),t(window).bind("resize.spectrum",_),ht.addClass("sp-active"),Y.removeClass("sp-hidden"),Wt(),Vt(),vt=Dt(),xt(),C.show(vt),K.trigger("show.spectrum",[vt])))}function Pt(t){27===t.keyCode&&Rt()}function Ft(t){2!=t.button&&(x||(Tt?Nt(!0):Lt(),Rt()))}function Rt(){U&&!T&&(U=!1,t(z).unbind("keydown.spectrum",Pt),t(z).unbind("click.spectrum",Ft),t(window).unbind("resize.spectrum",_),ht.removeClass("sp-active"),Y.addClass("sp-hidden"),C.hide(Dt()),K.trigger("hide.spectrum",[Dt()]))}function Lt(){Ot(vt,!0)}function Ot(t,e){var i,a;tinycolor.equals(t,Dt())?Vt():(!t&&wt?yt=!0:(yt=!1,a=(i=tinycolor(t)).toHsv(),R=a.h%360/360,L=a.s,O=a.v,D=a.a),Vt(),i&&i.isValid()&&!e&&(Et=E.preferredFormat||i.getFormat()))}function Dt(t){return t=t||{},wt&&yt?null:tinycolor.fromRatio({h:R,s:L,v:O,a:Math.round(100*D)/100},{format:t.format||Et})}function $t(){Vt(),C.move(Dt()),K.trigger("move.spectrum",[Dt()])}function Vt(){rt.removeClass("sp-validation-error"),Bt();var t=tinycolor.fromRatio({h:R,s:1,v:1});Q.css("background-color",t.toHexString());var e=Et;D<1&&(0!==D||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var i=Dt({format:e}),a="";if(gt.removeClass("sp-clear-display"),gt.css("background-color","transparent"),!i&&wt)gt.addClass("sp-clear-display");else{var n=i.toHexString(),l=i.toRgbString();if(o||1===i.alpha?gt.css("background-color",l):(gt.css("background-color","transparent"),gt.css("filter",i.toFilter())),E.showAlpha){var s=i.toRgb();s.a=0;var c=tinycolor(s).toRgbString(),d="linear-gradient(left, "+c+", "+n+")";r?et.css("filter",tinycolor(c).toFilter({gradientType:1},n)):(et.css("background","-webkit-"+d),et.css("background","-moz-"+d),et.css("background","-ms-"+d),et.css("background","linear-gradient(to right, "+c+", "+n+")"))}a=i.toString(e)}E.showInput&&rt.val(a),E.showPalette&&Ut(),xt()}function Bt(){var t=L,e=O;if(wt&&yt)at.hide(),tt.hide(),X.hide();else{at.show(),tt.show(),X.show();var i=t*S,a=I-e*I;i=Math.max(-k,Math.min(S-k,i-k)),a=Math.max(-k,Math.min(I-k,a-k)),X.css({top:a+"px",left:i+"px"});var r=D*A;at.css({left:r-P/2+"px"});var o=R*M;tt.css({top:o-F+"px"})}}function Nt(t){var e=Dt(),i="",a=!tinycolor.equals(e,vt);e&&(i=e.toString(Et),_t(e)),mt&&K.val(i),t&&a&&(C.change(e),K.trigger("change",[e]))}function Wt(){U&&(S=Q.width(),I=Q.height(),k=X.height(),Z.width(),M=Z.height(),F=tt.height(),A=it.width(),P=at.width(),T||(Y.css("position","absolute"),E.offset?Y.offset(E.offset):Y.offset(function(e,i){var a=0,r=e.outerWidth(),o=e.outerHeight(),n=i.outerHeight(),l=e[0].ownerDocument,s=l.documentElement,c=s.clientWidth+t(l).scrollLeft(),d=s.clientHeight+t(l).scrollTop(),m=i.offset();return m.top+=n,m.left-=Math.min(m.left,m.left+r>c&&c>r?Math.abs(m.left+r-c):0),m.top-=Math.min(m.top,m.top+o>d&&d>o?Math.abs(o+n-a):a),m}(Y,pt))),Bt(),E.showPalette&&Ut(),K.trigger("reflow.spectrum"))}function jt(){Rt(),G=!0,K.attr("disabled",!0),pt.addClass("sp-disabled")}!function(){if(r&&Y.find("*:not(input)").attr("unselectable","on"),Ht(),ft&&K.after(ht).hide(),wt||st.hide(),T)K.after(Y).hide();else{var e="parent"===E.appendTo?K.parent():t(E.appendTo);1!==e.length&&(e=t("body")),e.append(Y)}function i(e){return e.data&&e.data.ignore?(Ot(t(e.target).closest(".sp-thumb-el").data("color")),$t()):(Ot(t(e.target).closest(".sp-thumb-el").data("color")),$t(),Nt(!0),E.hideAfterPaletteSelect&&Rt()),!1}Ct(),pt.bind("click.spectrum touchstart.spectrum",(function(e){G||Mt(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()})),(K.is(":disabled")||!0===E.disabled)&&jt(),Y.click(m),rt.change(kt),rt.bind("paste",(function(){setTimeout(kt,1)})),rt.keydown((function(t){13==t.keyCode&&kt()})),lt.text(E.cancelText),lt.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),Lt(),Rt()})),st.attr("title",E.clearText),st.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),yt=!0,$t(),T&&Nt(!0)})),ct.text(E.chooseText),ct.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),r&&rt.is(":focus")&&rt.trigger("change"),rt.hasClass("sp-validation-error")||(Nt(!0),Rt())})),dt.text(E.showPaletteOnly?E.togglePaletteMoreText:E.togglePaletteLessText),dt.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),E.showPaletteOnly=!E.showPaletteOnly,E.showPaletteOnly||T||Y.css("left","-="+(J.outerWidth(!0)+5)),Ht()})),f(it,(function(t,e,i){D=t/A,yt=!1,i.shiftKey&&(D=Math.round(10*D)/10),$t()}),St,It),f(Z,(function(t,e){R=parseFloat(e/M),yt=!1,E.showAlpha||(D=1),$t()}),St,It),f(Q,(function(t,e,i){if(i.shiftKey){if(!q){var a=L*S,r=I-O*I,o=Math.abs(t-a)>Math.abs(e-r);q=o?"x":"y"}}else q=null;var n=!q||"y"===q;(!q||"x"===q)&&(L=parseFloat(t/S)),n&&(O=parseFloat((I-e)/I)),yt=!1,E.showAlpha||(D=1),$t()}),St,It),bt?(Ot(bt),Vt(),Et=E.preferredFormat||tinycolor(bt).format,_t(bt)):Vt(),T&&At();var a=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ot.delegate(".sp-thumb-el",a,i),nt.delegate(".sp-thumb-el:nth-child(1)",a,{ignore:!0},i)}();var qt={show:At,hide:Rt,toggle:Mt,reflow:Wt,option:function(i,a){return i===e?t.extend({},E):a===e?E[i]:(E[i]=a,"preferredFormat"===i&&(Et=E.preferredFormat),void Ht())},enable:function(){G=!1,K.attr("disabled",!1),pt.removeClass("sp-disabled")},disable:jt,offset:function(t){E.offset=t,Wt()},set:function(t){Ot(t),Nt()},get:Dt,destroy:function(){K.show(),pt.unbind("click.spectrum touchstart.spectrum"),Y.remove(),ht.remove(),a[qt.id]=null},container:Y};return qt.id=a.push(qt)-1,qt}function d(){}function m(t){t.stopPropagation()}function u(t,e){var i=Array.prototype.slice,a=i.call(arguments,2);return function(){return t.apply(e,a.concat(i.call(arguments)))}}function f(e,i,a,o){i=i||function(){},a=a||function(){},o=o||function(){};var n=document,l=!1,s={},c=0,d=0,m="ontouchstart"in window,u={};function f(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function h(t){if(l){if(r&&n.documentMode<9&&!t.button)return p();var a=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],o=a&&a.pageX||t.pageX,u=a&&a.pageY||t.pageY,h=Math.max(0,Math.min(o-s.left,d)),g=Math.max(0,Math.min(u-s.top,c));m&&f(t),i.apply(e,[h,g,t])}}function p(){l&&(t(n).unbind(u),t(n.body).removeClass("sp-dragging"),setTimeout((function(){o.apply(e,arguments)}),0)),l=!1}u.selectstart=f,u.dragstart=f,u["touchmove mousemove"]=h,u["touchend mouseup"]=p,t(e).bind("touchstart mousedown",(function(i){var r=i.which?3==i.which:2==i.button;r||l||!1!==a.apply(e,arguments)&&(l=!0,c=t(e).height(),d=t(e).width(),s=t(e).offset(),t(n).bind(u),t(n.body).addClass("sp-dragging"),h(i),f(i))}))}function h(){return t.fn.spectrum.inputTypeColorSupport()}var p="spectrum.id";t.fn.spectrum=function(e,i){if("string"==typeof e){var r=this,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var i=a[t(this).data(p)];if(i){var n=i[e];if(!n)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?r=i.get():"container"==e?r=i.container:"option"==e?r=i.option.apply(i,o):"destroy"==e?(i.destroy(),t(this).removeData(p)):n.apply(i,o)}})),r}return this.spectrum("destroy").each((function(){var i=c(this,t.extend({},e,t(this).data()));t(this).data(p,i.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=f,t.fn.spectrum.defaults=i,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var i=t("<input type='color'/>")[0];e._cachedResult="color"===i.type&&""!==i.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!h()&&e.spectrum({preferredFormat:"hex6"})},function(){var t=/^[\s,#]+/,e=/\s+$/,i=0,a=Math,r=a.round,o=a.min,n=a.max,l=a.random,s=function(l,c){if(c=c||{},(l=l||"")instanceof s)return l;if(!(this instanceof s))return new s(l,c);var d=function(i){var r={r:0,g:0,b:0},l=1,s=!1,c=!1;"string"==typeof i&&(i=function(i){i=i.replace(t,"").replace(e,"").toLowerCase();var a,r=!1;if(U[i])i=U[i],r=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};if(a=D.rgb.exec(i))return{r:a[1],g:a[2],b:a[3]};if(a=D.rgba.exec(i))return{r:a[1],g:a[2],b:a[3],a:a[4]};if(a=D.hsl.exec(i))return{h:a[1],s:a[2],l:a[3]};if(a=D.hsla.exec(i))return{h:a[1],s:a[2],l:a[3],a:a[4]};if(a=D.hsv.exec(i))return{h:a[1],s:a[2],v:a[3]};if(a=D.hsva.exec(i))return{h:a[1],s:a[2],v:a[3],a:a[4]};if(a=D.hex8.exec(i))return{a:F(a[1]),r:M(a[2]),g:M(a[3]),b:M(a[4]),format:r?"name":"hex8"};if(a=D.hex6.exec(i))return{r:M(a[1]),g:M(a[2]),b:M(a[3]),format:r?"name":"hex"};if(a=D.hex3.exec(i))return{r:M(a[1]+""+a[1]),g:M(a[2]+""+a[2]),b:M(a[3]+""+a[3]),format:r?"name":"hex"};return!1}(i));"object"==typeof i&&(i.hasOwnProperty("r")&&i.hasOwnProperty("g")&&i.hasOwnProperty("b")?(d=i.r,m=i.g,u=i.b,r={r:255*I(d,255),g:255*I(m,255),b:255*I(u,255)},s=!0,c="%"===String(i.r).substr(-1)?"prgb":"rgb"):i.hasOwnProperty("h")&&i.hasOwnProperty("s")&&i.hasOwnProperty("v")?(i.s=P(i.s),i.v=P(i.v),r=function(t,e,i){t=6*I(t,360),e=I(e,100),i=I(i,100);var r=a.floor(t),o=t-r,n=i*(1-e),l=i*(1-o*e),s=i*(1-(1-o)*e),c=r%6;return{r:255*[i,l,n,n,s,i][c],g:255*[s,i,i,l,n,n][c],b:255*[n,n,s,i,i,l][c]}}(i.h,i.s,i.v),s=!0,c="hsv"):i.hasOwnProperty("h")&&i.hasOwnProperty("s")&&i.hasOwnProperty("l")&&(i.s=P(i.s),i.l=P(i.l),r=function(t,e,i){var a,r,o;function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=I(t,360),e=I(e,100),i=I(i,100),0===e)a=r=o=i;else{var l=i<.5?i*(1+e):i+e-i*e,s=2*i-l;a=n(s,l,t+1/3),r=n(s,l,t),o=n(s,l,t-1/3)}return{r:255*a,g:255*r,b:255*o}}(i.h,i.s,i.l),s=!0,c="hsl"),i.hasOwnProperty("a")&&(l=i.a));var d,m,u;return l=S(l),{ok:s,format:i.format||c,r:o(255,n(r.r,0)),g:o(255,n(r.g,0)),b:o(255,n(r.b,0)),a:l}}(l);this._originalInput=l,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=r(100*this._a)/100,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=d.ok,this._tc_id=i++};function c(t,e,i){t=I(t,255),e=I(e,255),i=I(i,255);var a,r,l=n(t,e,i),s=o(t,e,i),c=(l+s)/2;if(l==s)a=r=0;else{var d=l-s;switch(r=c>.5?d/(2-l-s):d/(l+s),l){case t:a=(e-i)/d+(e<i?6:0);break;case e:a=(i-t)/d+2;break;case i:a=(t-e)/d+4}a/=6}return{h:a,s:r,l:c}}function d(t,e,i){t=I(t,255),e=I(e,255),i=I(i,255);var a,r,l=n(t,e,i),s=o(t,e,i),c=l,d=l-s;if(r=0===l?0:d/l,l==s)a=0;else{switch(l){case t:a=(e-i)/d+(e<i?6:0);break;case e:a=(i-t)/d+2;break;case i:a=(t-e)/d+4}a/=6}return{h:a,s:r,v:c}}function m(t,e,i,a){var o=[A(r(t).toString(16)),A(r(e).toString(16)),A(r(i).toString(16))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function u(t,e,i,a){var o;return[A((o=a,Math.round(255*parseFloat(o)).toString(16))),A(r(t).toString(16)),A(r(e).toString(16)),A(r(i).toString(16))].join("")}function f(t,e){e=0===e?0:e||10;var i=s(t).toHsl();return i.s-=e/100,i.s=k(i.s),s(i)}function h(t,e){e=0===e?0:e||10;var i=s(t).toHsl();return i.s+=e/100,i.s=k(i.s),s(i)}function p(t){return s(t).desaturate(100)}function g(t,e){e=0===e?0:e||10;var i=s(t).toHsl();return i.l+=e/100,i.l=k(i.l),s(i)}function b(t,e){e=0===e?0:e||10;var i=s(t).toRgb();return i.r=n(0,o(255,i.r-r(-e/100*255))),i.g=n(0,o(255,i.g-r(-e/100*255))),i.b=n(0,o(255,i.b-r(-e/100*255))),s(i)}function v(t,e){e=0===e?0:e||10;var i=s(t).toHsl();return i.l-=e/100,i.l=k(i.l),s(i)}function E(t,e){var i=s(t).toHsl(),a=(r(i.h)+e)%360;return i.h=a<0?360+a:a,s(i)}function T(t){var e=s(t).toHsl();return e.h=(e.h+180)%360,s(e)}function y(t){var e=s(t).toHsl(),i=e.h;return[s(t),s({h:(i+120)%360,s:e.s,l:e.l}),s({h:(i+240)%360,s:e.s,l:e.l})]}function w(t){var e=s(t).toHsl(),i=e.h;return[s(t),s({h:(i+90)%360,s:e.s,l:e.l}),s({h:(i+180)%360,s:e.s,l:e.l}),s({h:(i+270)%360,s:e.s,l:e.l})]}function H(t){var e=s(t).toHsl(),i=e.h;return[s(t),s({h:(i+72)%360,s:e.s,l:e.l}),s({h:(i+216)%360,s:e.s,l:e.l})]}function C(t,e,i){e=e||6,i=i||30;var a=s(t).toHsl(),r=360/i,o=[s(t)];for(a.h=(a.h-(r*e>>1)+720)%360;--e;)a.h=(a.h+r)%360,o.push(s(a));return o}function _(t,e){e=e||6;for(var i=s(t).toHsv(),a=i.h,r=i.s,o=i.v,n=[],l=1/e;e--;)n.push(s({h:a,s:r,v:o})),o=(o+l)%1;return n}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=S(t),this._roundA=r(100*this._a)/100,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=r(360*t.h),i=r(100*t.s),a=r(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+a+"%)":"hsva("+e+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=r(360*t.h),i=r(100*t.s),a=r(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+a+"%)":"hsla("+e+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return u(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*I(this._r,255))+"%",g:r(100*I(this._g,255))+"%",b:r(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*I(this._r,255))+"%, "+r(100*I(this._g,255))+"%, "+r(100*I(this._b,255))+"%)":"rgba("+r(100*I(this._r,255))+"%, "+r(100*I(this._g,255))+"%, "+r(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(x[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+u(this._r,this._g,this._b,this._a),i=e,a=this._gradientType?"GradientType = 1, ":"";t&&(i=s(t).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,a=this._a<1&&this._a>=0;return e||!a||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(H,arguments)},triad:function(){return this._applyCombination(y,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},s.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var a in t)t.hasOwnProperty(a)&&(i[a]="a"===a?t[a]:P(t[a]));t=i}return s(t,e)},s.equals=function(t,e){return!(!t||!e)&&s(t).toRgbString()==s(e).toRgbString()},s.random=function(){return s.fromRatio({r:l(),g:l(),b:l()})},s.mix=function(t,e,i){i=0===i?0:i||50;var a,r=s(t).toRgb(),o=s(e).toRgb(),n=i/100,l=2*n-1,c=o.a-r.a,d=1-(a=((a=l*c==-1?l:(l+c)/(1+l*c))+1)/2),m={r:o.r*a+r.r*d,g:o.g*a+r.g*d,b:o.b*a+r.b*d,a:o.a*n+r.a*(1-n)};return s(m)},s.readability=function(t,e){var i=s(t),a=s(e),r=i.toRgb(),o=a.toRgb(),n=i.getBrightness(),l=a.getBrightness(),c=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(n-l),color:c}},s.isReadable=function(t,e){var i=s.readability(t,e);return i.brightness>125&&i.color>500},s.mostReadable=function(t,e){for(var i=null,a=0,r=!1,o=0;o<e.length;o++){var n=s.readability(t,e[o]),l=n.brightness>125&&n.color>500,c=n.brightness/125*3+n.color/500;(l&&!r||l&&r&&c>a||!l&&!r&&c>a)&&(r=l,a=c,i=s(e[o]))}return i};var U=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},x=s.hexNames=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}(U);function S(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var i=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=o(e,n(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),a.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function k(t){return o(1,n(0,t))}function M(t){return parseInt(t,16)}function A(t){return 1==t.length?"0"+t:""+t}function P(t){return t<=1&&(t=100*t+"%"),t}function F(t){return M(t)/255}var R,L,O,D=(L="[\\s|\\(]+("+(R="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",O="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",{rgb:new RegExp("rgb"+L),rgba:new RegExp("rgba"+O),hsl:new RegExp("hsl"+L),hsla:new RegExp("hsla"+O),hsv:new RegExp("hsv"+L),hsva:new RegExp("hsva"+O),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=s}(),t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))}));