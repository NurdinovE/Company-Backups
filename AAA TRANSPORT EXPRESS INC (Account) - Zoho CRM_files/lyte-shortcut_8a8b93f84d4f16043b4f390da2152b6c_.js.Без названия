!function(e,t){var r,n,o,i={},a={},l=[],s=[],u={},c={},f={},p=!0,d=[],h=new Map([[" ","space"],[" ","space"],["+","plus"]]),v=new Map([["shiftleft","shift"],["shiftright","shift"],["metaleft","meta"],["metaright","meta"],["altleft","alt"],["altright","alt"],["controlleft","control"],["controlright","control"]]),y={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"meta",92:"meta",93:"meta",224:"meta"},g={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",187:"plus",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'};function m(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))}function w(e){if((e=e.toLowerCase()).includes("f"))for(var t=1;t<=12;t++)if(e==="f"+t)return!0;return!1}function K(e){return e.slice().every((function(e){return e.trim().length>1}))}function b(e){return e.slice().some((function(e){return Array.from(h.values()).some((function(t){return t===e.trim().toLowerCase()}))}))}function j(e){var t=(e=e.split("+")).length;for(let r=0;r<t;r++)e[r]=e[r].trim(),e[r]=e[r].toLowerCase();return e=e.join("+")}function E(e){for(var t,r,n=T(e),o=[],i=0;i<n.length;i++)"control"===(t=(t=n[i]).toLowerCase())||"command"===t||"alt"===t||"shift"===t||"meta"===t?(n[i]="command"===n[i]?"meta":n[i],-1!=e.indexOf("+")&&(o.push(n[i]),n.splice(i,1),i--)):w(n[i])&&(n[i]=n[i].toLowerCase());return-1!==e.indexOf("+")?(n=n.join("+"),r=!0):(n=n.join(" "),r=!1),{modifier:o,newKey:n,pressTogether:r}}function T(e){return-1!==e.indexOf("+")?e.split("+"):e.split(" ")}function C(){var e=Object.assign({},i);return Object.assign(e,a),e}function O(e){return-1!==e.indexOf("r:")}function D(e){var t=function(){var e=["backspace","plus","tab","enter","shift","control","alt","capslock","escape","space","pageup","pagedown","end","home","arrowleft","arrowup","arrowright","arrowdown","insert","delete","meta","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12"];return l.filter((t=>!e.includes(t)))}(),r=e.substring(2).match(new RegExp("^/(.*?)/([gimy]*)$"));new RegExp(r[1],r[2]).test(t.join(""))?u[e]=1:u[e]=0}function A(){var e={};for(var t in a){var r=[];if(!O(t)){for(var n=0;n<a[t].length;n++){var o=a[t][n];o.useCode&&r.push(o)}e[t]=r}}return e}function k(){var e={},t=C();for(var r in t)if(O(r))e[r]=t[r];else{for(var n=[],o=!1,i=0;i<t[r].length;i++){var a=t[r][i];a.useCode||(o=!0,n.push(a))}o&&(e[r]=n)}return e}function x(){var e=t.activeElement,r=e.tagName,n=e.classList;return!(!("INPUT"===r&&-1===["checkbox","radio","file","color","range"].indexOf(e.type)||e.hasAttribute("contenteditable")||"true"===e.getAttribute("contenteditable")||"SELECT"===r||"TEXTAREA"===r)||e.classList.contains("lyte-shortcut"))||(["lyteDummyEventContainer"].forEach((function(e){if(n.contains(e))return!0})),!1)}function L(t,r,o,i,a){var p;r?(N(),a&&o.preventDefault(),n=setTimeout((function(){var r;a?t.call(e,o,i):(r=!1===(r=t.call(e,o,i))||r)&&o.preventDefault(),u={},c={},l=[],s=[],f={}}),r)):(N(),a?(o.preventDefault(),t.call(e,o,i)):(p=!1===(p=t.call(e,o,i))||p)&&o.preventDefault(),u={},c={},l=[],s=[],f={})}function P(e,r,n){(function(e){var r=e;switch(e.tagName){case"BUTTON":case"LYTE-ACCORDION-ITEM":case"LYTE-NAV-ITEM":return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length);case"LYTE-DROP-ITEM":var n=function(e){for(;e&&"LYTE-DROP-BOX"!==e.tagName&&"BODY"!==e.tagName;)e=e.parentNode;if(e&&"BODY"!=e.tagName){var t=e.origindd;if(!t){for(;e&&"LYTE-DROPDOWN"!==e.tagName&&"BODY"!==e.tagName;)e=e.parentNode;t=e}return t.component}}(e);return!!n&&!(n=n.$node).ltProp("disabled")&&!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length);case"LYTE-MENU-ITEM":for(;r&&"LYTE-MENU-BODY"!==r.tagName;)r=r.parentNode;for(var o=r.parent.ltProp("query"),i=t.querySelectorAll(o),a=0;a<i.length;a++)if(i[a].offsetWidth||i[a].offsetHeight||i[a].getClientRects().length)return!0;return!1}})(e="LYTE-BUTTON"===e.tagName?e.querySelector("button"):e)&&(n||(r?(N(),o=setTimeout((function(){e.click(),u={},c={},l=[],s=[],f={}}),r)):(N(),e.click(),u={},c={},l=[],s=[],f={})))}function N(){clearTimeout(n),clearTimeout(o)}function S(r,n){for(var o=0;o<r.length;o++){var i=r[o].excludeElements;if(!r[o].validate.call(e,n,d))return;var a=t.activeElement,l=a.tagName.toLowerCase();if(i)for(let e=0;e<i.length;e++){const t=i[e];if(t.startsWith("[")&&t.endsWith("]")){var s=t.substring(1,t.indexOf("=")),u=t.substring(t.indexOf("=")+2,t.length-2),c=a.getAttribute(s);if(c&&c.includes(u))return}else if(l===t)return}else if(x())return;u=r[o].value;var f=r[o].wait,p=r[o].preventDefault,d=r[o]._invokedKey;"function"==typeof u?L(u,f,n,d,p):P(u,f,p)}}function R(e){var t=[];return e.altKey&&t.push("alt"),e.ctrlKey&&t.push("control"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta"),t}function V(e,t){var r=Object.keys(e);r.sort(((e,t)=>t.length-e.length));for(var n="",o=0;o<r.length;o++)for(var i=r[o],a=o+1;a<r.length;a++)i.includes(r[a])&&n.length<i.length&&(n=i);if(n){r.forEach((t=>{n!==t&&delete e[t]}));for(o=0;o<t.length;o++){var l=t[o];n!==l._invokedKey&&t.splice(o,1)}}return[e,t]}function Y(){clearTimeout(r),r=setTimeout((function(){u={},c={},l=[],s=[],f={}}),1e3)}function _(e){if(p){var t=e.key;if(void 0!==t){t.length>=1&&(t=t.toLowerCase());var r=t.toLowerCase();h.has(r)&&(t=h.get(r)),"shift"!==r&&"alt"!==r&&l.push(t);var n=e.code;if(n=n.toLowerCase(),v.has(n)&&(n=v.get(n)),"shift"!==n&&"alt"!==n&&s.push(n),function(e){var t=A();if("shift"!==e&&"alt"!==e)for(var r in t){var n,o=T(r);f[r]=n=f[r]?f[r]:0,e===(o[n]||"")?f[r]++:f[r]=0}}(n),Object.keys(f).length){var o=function(e){var t=[],r={},n=R(e),o=A();for(var i in f)if(o[i])for(var a=0;a<o[i].length;a++){var l=o[i][a];l.modifier.length<=0?l.pressTogether?f[i]===T(i).length&&s.join("+").includes(i)&&0===n.length&&(l._invokedKey=i,t.push(l),r[i]=!0):1!==T(i).length&&f[i]===T(i).length&&s.length===T(i).length&&s.join(" ").includes(i)&&0===n.length?(l._invokedKey=i,t.push(l),r[i]=!0):e.metaKey||e.ctrlKey||1!==T(i).length||f[i]!==T(i).length||!s.join(" ").includes(i)||0!==n.length||(l._invokedKey=i,t.push(l),r[i]=!0):l.pressTogether?f[i]===T(i).length&&l.modifier.sort().join("+")===n.sort().join("+")&&s.join("+").includes(i)&&(l._invokedKey=0!==l.modifier.sort().length?l.modifier.sort().join("+")+"+"+i:i,t.push(l),r[i]=!0):f[i]===T(i).length&&s.join(" ").includes(i)&&l.modifier.sort().join("+")===n.sort().join("+")&&(l._invokedKey=i,t.push(l),r[i]=!0)}for(var u in r)r[u]&&(f[u]=0);return[r,t]=V(r,t),t}(e);Y(),S(o,e)}!function(e){var t=C();for(var r in t)if(O(r))D(r);else{var n,o=T(r);u[r]=n=u[r]?u[r]:0,e===(o[n]||"")?u[r]++:u[r]=0}}(t),function(e){var t=k();if("shift"!==e&&"alt"!==e)for(var r in t){var n,o=T(r);c[r]=n=c[r]?c[r]:0,(o[n]||"").toLowerCase()===e.toLowerCase()?c[r]++:c[r]=0}}(t);o=function(e){var t=[],r={},n=R(e),o=function(e){var t=[];return e.ctrlKey&&t.push("control"),e.metaKey&&t.push("meta"),t}(e),i=k();for(var a in u)if(-1!==a.indexOf("r:")&&u[a]>0)(f=i[a])._invokedKey=a,t.push(f);else if(i[a])for(var s=0;s<i[a].length;s++){var f;(f=i[a][s]).modifier.length<=0?f.pressTogether?c[a]===T(a).length&&l.join("+").includes(a)&&(f._invokedKey=a,t.push(f),r[a]=!0):1!==T(a).length&&c[a]===T(a).length&&l.length===T(a).length&&l.join(" ").includes(a)?(f._invokedKey=a,t.push(f),r[a]=!0):e.metaKey||e.ctrlKey||1!==T(a).length||c[a]!==T(a).length||!l.join(" ").includes(a)||(f._invokedKey=a,t.push(f),r[a]=!0):f.pressTogether?n.includes("meta")?(u[a]===T(a).length&&f.modifier.sort().join("+")===n.sort().join("+")&&l.join("+").includes(a)&&n.length===f.modifier.length||c[a]===T(a).length&&f.modifier.sort().join("+")===o.sort().join("+")&&l.join("+").includes(a)&&n.length===f.modifier.length)&&(f._invokedKey=0!==f.modifier.sort().length?f.modifier.sort().join("+")+"+"+a:a,t.push(f),r[a]=!0):(u[a]===T(a).length&&f.modifier.sort().join("+")===n.sort().join("+")&&l.join("+").includes(a)||c[a]===T(a).length&&f.modifier.sort().join("+")===o.sort().join("+")&&l.join("+").includes(a))&&(f._invokedKey=0!==f.modifier.sort().length?f.modifier.sort().join("+")+"+"+a:a,t.push(f),r[a]=!0):u[a]===T(a).length&&l.join(" ").includes(a)&&(f._invokedKey=a,t.push(f),r[a]=!0)}for(var p in r)r[p]&&(u[p]=0);return[r,t]=V(r,t),t}(e);Y(),S(o,e)}}}function Q(e,t,r){var n;e=j(e);var o=r.useKey,i=r.useCode;if(o||(e=q(e)),n=!o||function(e){if(1===(e=e.includes("+")?e.split("+"):e.includes(" ")?e.split(" "):[e]).length&&["meta","shift","alt","control"].includes(e[0]))return!1;var t,r,n=e.length;for(r=0;r<n;r++){if("dead"===(t=e[r].trim()).toLowerCase())return!1;if("alt"===t.toLowerCase()||"shift"===t.toLowerCase())return!(!K(e)||b(e))}return!0}(e),i)return function(e){var t,r=(e=e.includes("+")?e.split("+"):e.includes(" ")?e.split(" "):[e]).length;for(t=0;t<r;t++)if(1===e[t].trim().length)return!1;return!0}(e)?void F.pushKey({newKey:e,oldKey:void 0,value:t,options:r}):void console.error("Shortcut keys are in invalid format! Shortcut not added for",e);n&&o?F.pushKey({newKey:e,oldKey:void 0,value:t,options:r}):n&&!o?F.push({newKey:e,oldKey:void 0,value:t,options:r}):console.error("Invalid Shortcut! Shortcut not added for",e)}function I(e,t,r,n){e="r:"+e;var o=r.wait?r.wait:0,i=!!r.preventDefault&&r.preventDefault,a=!!r.useCode&&r.useCode,l=!!r.useKey&&r.useKey,s=r.validate?r.validate:function(){return!0},u=r.excludeElements?r.excludeElements:void 0,c=typeof t;n[e]={type:c,value:t,wait:o,preventDefault:i,useCode:a,useKey:l,excludeElements:u,validate:s}}function M(e,t){var r=E(e),n=t[r.newKey];if(n){for(var o=0;o<n.length;o++){if(r.pressTogether&&n[o].modifier.sort().join(" ")===r.modifier.sort().join(" ")){t[r.newKey].splice(o,1);break}if(!r.pressTogether){t[r.newKey].splice(o,1);break}}var i=d.find((t=>t.shortcutValues.some((t=>t.shortcutKey===e))));i&&U(e,i)}}function q(e){return e.search("/ctrl/i")&&(e=e.replaceAll("ctrl","control")),e.search("/command/i")&&(e=e.replaceAll("command","meta")),e.search("/esc/i")&&(e=e.replaceAll("esc","escape")),e.search("/left/i")&&(e=e.replaceAll("left","arrowleft")),e.search("/right/i")&&(e=e.replaceAll("right","arrowright")),e.search("/up/i")&&(e=e.replaceAll("up","arrowup")),e.search("/down/i")&&(e=e.replaceAll("down","arrowdown")),e}function B(e){var t=e.oldKey;t&&(F.unregister(t),F.unregisterKey(t))}function W(){var e=d.flatMap((e=>e.shortcutValues.flatMap((e=>e.elementQuery))));return e}function H(e){var r=W();for(var n of r){if(t.querySelector(n)===e)return n}return!1}function U(e,r){if(r.shortcutValues.length>1){var n=r.shortcutValues.find((t=>t.shortcutKey===e));n.elementQuery.forEach((e=>{var r=t.querySelector(e);r&&r.setAttribute("LYTE-HOVERCARD","")})),d.forEach((t=>{t.shortcutValues=t.shortcutValues.filter((t=>t.shortcutKey!==e))}))}else{var o,i=r.wrapperQuery,a=t.querySelector(r.shortcutValues[0].elementQuery);if(a&&a.setAttribute("LYTE-HOVERCARD",""),$L)(o=$L(i)[0])&&p&&(o.component?o.component.setData("ltPropOriginElem",""):o.setAttribute("ltPropOriginElem",""));else(o=t.querySelector(i))&&p&&o.setAttribute("ltPropOriginElem","");d=d.filter((t=>!t.shortcutValues.some((t=>t.shortcutKey===e))))}}function $(e,t){var r=t.wrapperQuery,n=t.originElement,o=t.titleToDisplay?t.titleToDisplay:"",i=t.wrapperClass?t.wrapperClass:"",a=!!t.yielded&&t.yielded,l=t.hovercardPlacement?t.hovercardPlacement:"",s=t.properties?t.properties:{};if(r&&n||console.error("Error: Insufficient data for adding hovercard."),"string"==typeof n&&(n=[n]),r)if(d.some((e=>e.wrapperQuery===r))){var u={shortcutKey:e,elementQuery:n,titleToDisplay:o,wrapperClass:i,yielded:a,hovercardPlacement:l,properties:s};d.find((e=>e.wrapperQuery===r)).shortcutValues.push(u)}else{var c={wrapperQuery:r,shortcutValues:[{shortcutKey:e,elementQuery:n,titleToDisplay:o,wrapperClass:i,yielded:a,hovercardPlacement:l,properties:s}]};d.push(c)}}function X(e,t){var r=function(e,t){var r=E(e.newKey),n=r.newKey;if(!t[n]||!t[n].length)return!1;for(var o=0;o<t[n].length;o++){var i=t[n][o];return i.pressTogether===r.pressTogether&&!!m(i.modifier,r.modifier)&&o}}(e,t);"number"==typeof r?function(e,t,r){var n,o,i,a,l,s,u=e.value,c=E(e.newKey);e.options?(n=e.options.wait?e.options.wait:0,o=!!e.options.preventDefault&&e.options.preventDefault,i=!!e.options.useCode&&e.options.useCode,a=e.options.excludeElements?e.options.excludeElements:void 0,l=e.options.validate?e.options.validate:function(){return!0},s=e.options.hovercard?e.options.hovercard:void 0):(n=0,o=!1,i=!1,a=void 0,l=function(){return!0},s=void 0);var f=typeof u;if(t[c.newKey][r]={type:f,value:u,modifier:c.modifier,pressTogether:c.pressTogether,wait:n,useKey:e.useKey,preventDefault:o,useCode:i,excludeElements:a,validate:l},s){var p=e.newKey,h=d.find((e=>e.shortcutValues.some((e=>e.shortcutKey===p))));h&&U(p,h),$(p,s)}}(e,t,r):function(e,t){var r,n,o,i,a,l,s=e.value,u=E(e.newKey);e.options?(r=e.options.wait?e.options.wait:0,n=!!e.options.preventDefault&&e.options.preventDefault,o=!!e.options.useCode&&e.options.useCode,i=e.options.excludeElements?e.options.excludeElements:void 0,a=e.options.validate?e.options.validate:function(){return!0},l=e.options.hovercard?e.options.hovercard:void 0):(r=0,n=!1,o=!1,i=void 0,a=function(){return!0},l=void 0);var c=typeof s;t[u.newKey]=t[u.newKey]||[],t[u.newKey].push({type:c,value:s,modifier:u.modifier,pressTogether:u.pressTogether,wait:r,useKey:e.useKey,preventDefault:n,useCode:o,excludeElements:i,validate:a}),l&&$(e.newKey,l)}(e,t)}function z(e,t,r){var n=typeof e;if("string"===n||"object"===n){if(Array.isArray(r.excludeElements)){var o=function(e){if(!Array.isArray(e))return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!r||!/[a-zA-Z]/.test(r.join))return!1;if(r&&r.length<=0)return!1;if(null==r||!0===r)return!1}return!0}(r.excludeElements);if(!o)return void console.error("Invalid value for excludeElements. Shortcut not registered for ",e)}!r.excludeElements||Array.isArray(r.excludeElements)?"object"===n?function(e,t,r){for(var n=0;n<e.length;n++)Q(e[n],t,r)}(e,t,r):Q(e,t,r):console.error("Invalid value for excludeElements. Shortcut not registered for ",e)}else console.error("Invalid Type")}function F(e){!function(){for(var e=0;e<=9;e++)y[e+96]=e.toString();for(e=1;e<=12;e++)y[111+e]="f"+e;navigator.userAgent.match("Firefox")?(g[59]=":",g[173]="_"):(g[186]=":",g[189]="_")}(),e.addEventListener("keydown",_)}t.addEventListener("mousemove",(function(r){if(p&&d.length){r.target;var n,o,i=function(e){for(var t;e;){if("BODY"===e.tagName)return!1;if(t=H(e=e.parentElement))return{matchingQuery:t,node:e}}return!1}(r.target);if(i&&(n=i.matchingQuery,o=i.node),n){var a=d.find((e=>e.shortcutValues.some((e=>e.elementQuery.some((e=>e===n)))))),l=a.wrapperQuery;o.setAttribute("LYTE-HOVERCARD",!0);var s=t.querySelector(l),u=a.shortcutValues.find((e=>e.elementQuery.includes(n))),c=function(t){var r=e.navigator.userAgent;if("string"==typeof t)return-1!==r.indexOf("Mac")?t=t.replace(/meta/g,"⌘ Command").replace(/control/g,"⌃ Control").replace(/alt/g,"⌥ Option").replace(/shift/g,"⇧ Shift"):-1!==r.indexOf("Win")&&(t=t.replace(/meta/g,"⊞").replace(/control/g,"Ctrl").replace(/alt/g,"Alt").replace(/shift/g,"⇧")),t.replace(/\+/g," + ");if("object"==typeof t){for(var n="",o=0;o<t.length;o++){var i=t[o];if(i.key){var a=i.key;n+=a=this.shortcutToDisplayKeys(a),o!==t.length-1&&(n+=", ")}}return n}}(u.shortcutKey);s&&p&&s.component&&(s.component.setData("ltPropOriginElem",n),s.component.setData("ltPropPopoverWrapperClass",u.wrapperClass),s.component.setData("ltPropPlacement",u.hovercardPlacement),s.component.setData("ltPropYield",u.yielded),s.component.setData("shortcutKeys",u.shortcutKey),s.component.setData("shortcutKeysToDisplay",c),s.component.setData("titleToDisplay",u.titleToDisplay),s.component.setData("properties",u.properties))}}})),Object.defineProperty(F,"push",{writable:!1,value:function(e){B(e),!e.newKey||void 0===e.newKey||"object"==typeof e.newKey&&0===Object.keys(e.newKey).length?e.oldKey||console.error("Shortcut Not Registered: Trying to register shortcut for empty key combination."):(e.useKey=!1,X(e,i))}}),Object.defineProperty(F,"pushKey",{writable:!1,value:function(e){B(e),!e.newKey||void 0===e.newKey||"object"==typeof e.newKey&&0===Object.keys(e.newKey).length?e.oldKey||console.error("Shortcut Not Registered: Trying to register shortcut for empty key combination."):(void 0===e.useKey&&(e.useKey=!0),X(e,a))}}),Object.defineProperty(F,"hasRegisteredShortcut",{writable:!1,value:function(e){var t=E((e=j(e)).trim()),r=C();if(0===Object.keys(r).length)return!1;for(var e in r)if(e===t.newKey)for(var n=0;n<r[e].length;n++){var o=r[e][n];return o.pressTogether===t.pressTogether&&!!m(o.modifier,t.modifier)}}}),Object.defineProperty(F,"registerKey",{writable:!1,value:function(e,t,r){r?r.type&&(r.type=r.type.trim()):r={},r.useCode=!1,r.useKey=!0,r&&"regex"===r.type&&I(e,t,r,a),z(e,t,r)}}),Object.defineProperty(F,"registerCode",{writable:!1,value:function(e,t,r){r?r.type&&(r.type=r.type.trim()):r={},r.useCode=!0,r.useKey=!0,z(e,t,r)}}),Object.defineProperty(F,"register",{writable:!1,value:function(e,t,r){r?"regex"===r.type&&(r.useCode=!1,r.useKey=!1,I(e,t,r,i)):r={},r.useCode=!1,r.useKey=!1,z(e,t,r)}}),Object.defineProperty(F,"unregister",{writable:!1,value:function(e){if("object"==typeof e)for(var t=0;t<e.length;t++){var r=q(e[t]);M(r=j(r),i)}else M(e=j(e),i)}}),Object.defineProperty(F,"unregisterKey",{writable:!1,value:function(e){if("object"==typeof e)for(var t=0;t<e.length;t++){var r=e[t];M(r=j(r),a)}else M(e=j(e),a)}}),Object.defineProperty(F,"unregisterCode",{writable:!1,value:function(e){if("object"==typeof e)for(var t=0;t<e.length;t++){var r=e[t];M(r=j(r),a)}else M(e=j(e),a)}}),Object.defineProperty(F,"unregisterAll",{writable:!1,value:function(){for(var e in i)delete i[e];for(var e in a)delete a[e]}}),Object.defineProperty(F,"enable",{writable:!1,value:function(){return console.info("All the Shortcut has been enabled."),p=!0,!0}}),Object.defineProperty(F,"disable",{writable:!1,value:function(){return console.info("All the Shortcut has been disabled."),p=!1,W().forEach((e=>{var r=t.querySelector(e);r&&r.setAttribute("lyte-hovercard","")})),!0}}),F(t),e.shortcut=F}(window,document);
