Lyte.Mixin.register("crm-open-help",{actions:{openHelp:function(e,t,r,i){if(t)switch(Crm.userDetails.RELEVANT_LOCALE){case"fr_FR":e=RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"fr/crm/help/"+crmConstants.helpUrl[e];case"es_ES":e=RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"es-xl/crm/help/"+crmConstants.helpUrl[e];case"pt_BR":e=RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"pt-br/crm/help/"+crmConstants.helpUrl[e];case"de_DE":e=RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"de/crm/help/"+crmConstants.helpUrl[e];default:e=crmConstants.helpUrl["help.domain.url"]+crmConstants.helpUrl[e]}r&&(e=("zh_CN"===Crm.userDetails.RELEVANT_LOCALE?RebrandLinkUtil.getProperty("CRM_HELPLINK_CN"):RebrandLinkUtil.getProperty("index_help_url"))+crmConstants.helpUrl[e]);openHelp(e,i)}}}),Lyte.Mixin.register("crm-assignment-threshold-common",{isMatchedInArray:function(e,t){return t.some((function(t){return e===t}))},isValidRestrictionModule:function(e){return this.isValidRestrictionModuleByApiName(e)||this.isValidRestrictionModuleByModuleName(e)},isValidRestrictionModuleByApiName:function(e){var t=this.getRestrictionModuleObjs()[2];return this.isMatchedInArray(e,t)},isValidRestrictionModuleByModuleName:function(e){var t=this.getRestrictionModuleObjs()[3];return this.isMatchedInArray(e,t)},getActiveRestrictionModules:function(){if(Crm&&Crm.restrictionEnabledModules)return Promise.resolve(Crm.restrictionEnabledModules);var e=[];return store.findAll("assignment_threshold",{status:"active"}).then((function(t){return t&&t.length>0&&t.forEach((function(t){var r=t.module.api_name;e.contains(r)||e.push(r)})),e}))},isConfiguredRestrictionModule:function(e,t){if(this.isValidRestrictionModule(e)){if(!this.checkPermissionForAssignment(e))return Crm&&Crm.restrictionEnabledModules&&Crm.restrictionEnabledModules.contains(e)?Promise.resolve(!0):Promise.resolve(!1);var r=this.getModuleRecord(null,e).api_name;if(!Crm.isRestrictionEnabled)return Promise.resolve(!1);if(t){for(var i=store.peekAll("assignment_threshold"),s=i.length,n=0;n<s;n++){if(i[n].module.api_name===r)return Promise.resolve(!0)}if(Crm.threshold&&Crm.threshold.configCount[r]||0==Crm.threshold.configCount[r])return Promise.resolve(this.isThresholdConfigInLocalData(r))}return store.findAll("assignment_threshold",{module:r}).then((function(e){return!!(e&&e.length>0)}),(()=>!1))}return Promise.resolve(!1)},isThresholdConfigInLocalData:function(e){return!!(Crm.threshold.configCount[e]&&Crm.threshold.configCount[e]>0)||0!=Crm.threshold.configCount[e]&&void 0},checkPermissionForAssignment:function(e){var t="Crm_Implied_Manage_AR_"+e;return t=Crm.userDetails.permissions[t]},setThresholdModuleConfigCount:function(e,t){Crm.threshold.configCount[e]=t},resetThresholdModuleConfigCount:function(){Crm.threshold.configCount={}},appendThresholdModuleConfigCount:function(e,t){let r=Crm.threshold.configCount[e];r=null==r?0:r,Crm.threshold.configCount[e]=r+t},saveModuleObj:function(e,t,r){if(null===r&&null===t)return e;var i=this.getModuleRecord(t,r);return e.api_name=i.api_name,e.module_name=i.module_name,e.plural_label=i.plural_label,e.singular_label=i.singular_label,e},getModuleRecord:function(e,t){if(null!==t||null!==e){var r={};return"Potentials"===e&&(e="Deals"),"Deals"===t&&(t="Potentials"),e?r.api_name=e:t&&(r.module_name=t),store.peekAll("module").filterBy(r)[0]}},getValidRestrictionModules:function(){return["Leads","Contacts","Accounts","Deals","Cases"]},restrictionGrantCheck:function(e,t,r){try{if(!Crm.isRestrictionEnabled||!this.isValidRestrictionModule(e))return Promise.resolve({allow:!0});var i={actionName:"permit_threshold",owner_id:t};r&&"undefined"!==r&&"null"!==r&&(i.record_id=r);var s=this.getModuleRecord(null,e);if(null==s&&(s=this.getModuleRecord(e,null)),null==s)return Promise.resolve({allow:!0});var n=s.id;return store.model[n]?store.triggerAction(n,"permit_threshold",i).then((function(e){return e?e.permit_threshold:{allow:!0}}),(function(){return{allow:!0}})):store.findRecord("module",n).then((function(){return store.triggerAction(n,"permit_threshold",i).then((function(e){return e?e.permit_threshold:{allow:!0}}))}),(function(){return{allow:!0}}))}catch(e){return Promise.resolve({allow:!0})}},getRestrictionModuleObjs:function(){for(var e=store.peekAll("module"),t=[],r=[],i=[],s=[],n=e.length,o=this.getValidRestrictionModules(),a=0;a<n;a++){var l=e[a].api_name,u=e[a].module_name,c=e[a].visible;u&&(this.isMatchedInArray(l,o)||u.startsWith("CustomModule"))&&(c&&(t.push(e[a]),s.push(l)),r.push(l),i.push(u))}return[t,s,r,i]},getRecordPeriodName:function(e){var t=e.split(".");return t.length>1?t[2]:e},getRecordPeriodKey:function(e){var t=e=e.toLocaleLowerCase();return"day"==e?t="crm.report.day":"week"==e?t="crm.report.week":"month"==e&&(t="crm.report.month"),t},makeUserAPIRequest:function(e){if(!e||e.length<=0)return Promise.resolve({});var t=e.length;let r=Math.floor(t/100)+1,i=0;for(var s=[];r>0;){var n="";for(let r=0;i<t&&r<100;r++,i++)n+=e[i]+",";if(""!=n&&n.length>0){let e={ids:n=n.substring(0,n.length-1)};s.push(store.findAll("user",e))}r--}return Promise.all(s).then((function(e){return e}))}}),Lyte.Mixin.register("orchestration",{licenceTypeVsNoOfOrchestrations:{A:3,U:5,C:3,Z:3,D:1},constants:{connectivity:{lookupType:"lookup_field",referenceType:"reference"},supportedModulesRegex:{LeadsContacts:new RegExp("^Leads$|^Contacts$"),LeadsContactsCustom:new RegExp("^Leads$|^Contacts$|^CustomModule"),LeadsContactsAccounts:new RegExp("^Leads$|^Contacts$|^Accounts$")}},currentProcessId:"",unresolvedOrchAPICount:0,currRequestCustomDataType:"",activityModuleList:["Events","Calls","Tasks"],fetchOrchestrationChildModules:function(){return moduleRecordMapping.Orchestration&&moduleRecordMapping.Orchestration.child_module?moduleRecordMapping.Orchestration.child_module.filter((function(e){return"ENTITIES"==e.module_type||e.show_as_tab})):[]},fetchOnlyOrchestrationChildModules:function(){return moduleRecordMapping.Orchestration&&moduleRecordMapping.Orchestration.child_module?moduleRecordMapping.Orchestration.child_module.filter((function(e){return("ENTITIES"===e.module_type||e.show_as_tab)&&e.module_name.startsWith("Orchestration")})):[]},fetchPathfinderChildModules:function(){return moduleRecordMapping.Orchestration&&moduleRecordMapping.Orchestration.child_module?moduleRecordMapping.Orchestration.child_module.filter((function(e){return("ENTITIES"===e.module_type||e.show_as_tab)&&e.module_name.startsWith("PathFinder")})):[]},getPathFinderMeta:function(){return store.findAll("pathfinder_meta",{include_inner_details:"supported_modules.module_name,supported_modules.plural_label"},!0)},getOrchestrationsCountForLicense:function(){return store.peekAll("orchestration_meta")[0].available_limit},getABMOrchestrationsCountForLicense:function(){return store.peekAll("orchestration_meta")[0].abm_available_limit},getChartData:function(){var e={canvas:{width:0,height:0}};return e.nodes=this.getNodes(),e.connections=this.getConnections(),e},getNodes:function(){var e=document.getElementById("Orchbuilder"),t=e.querySelector("#OrchbuilderCanvas").style,r=parseInt(t.left,10),i=parseInt(t.top,10);return e.getElementsByClassName("window").map((function(e){var t=e.style,s={};return s.id=e.dataset.stateid,s.pos_x=parseInt(t.left,10)+r,s.pos_y=parseInt(t.top,10)+i,s}))},getConnections:function(){var e,t=[],r=Lyte.registeredMixins.orchestration_builder.Orchestration.instance.getAllConnections(),i=$L("crm-orchestration-builder");return i&&i.length&&(e=i[0].component.getData("process")),$.each(r,(function(r,i){var s=i.getOverlay("label").canvas,n=i.getUuids(),o=n[0],a=n[1],l={transition:{id:s.dataset.transid},from:{state:{id:s.dataset.sourceid},end_point:o.split("_")[2]},to:{state:{id:s.dataset.targetid},end_point:a.split("_")[2]}};crmTab.isABMConfigured&&e&&"abm"===e.category&&"0"===l.from.state.id&&(l.from.state.id=e.abmState.id),t.push(l)})),t},saveChartDataToServer:function(e){(e=e||Lyte.registeredMixins.orchestration_action.getProcessData()).$.set("chart_data",Lyte.registeredMixins.orchestration.getChartData()),e.$.set("autoSaveStatusText",I18n.getMsg("crm.saving")),store.triggerUpdate("orchestration_process",e.id,["chart_data"]).then((function(){e.$.set("autoSaveStatusText",I18n.getMsg("crm.success.save.status",Utils.getCurrentCrmTimeInUserFormat()))}))},getGroupedOrchestration:function(e){var t={};return e.forEach((function(e){Crm.userDetails.CC_SERVICE_ENABLED&&(e.records_count=e.instances_count),t[e.group_id]?t[e.group_id].push(e):t[e.group_id]=[e]})),t},getDisplayableOrchestrationsList:function(e){var t=[],r=this;return Object.keys(e).forEach((function(i){var s=e[i],n=r.getDisplayableOrchestrationInList(s);t.push(n)})),t.sort((function(e,t){return e.sequence_number-t.sequence_number})),t},getSupportedModules:function(){var e=[],t=this,r=["Leads","Contacts","Accounts","Potentials","Tasks","Events","Calls","Products","Quotes","SalesOrders","PurchaseOrders","Invoices","Campaigns","Vendors","PriceBooks","Cases","Solutions"];return store.peekAll("module").forEach((function(i){if(i.module_name){var s=-1!==t.activityModuleList.indexOf(i.module_name)&&moduleRecordMapping.Activities.visible;(-1!==r.indexOf(i.module_name)&&i.visible||s||0===i.module_name.indexOf("CustomModule")&&i.visible&&!crmTab.isZBCustomModule(i.module_name)&&!crmTab.isZECustomModule(i.module_name)&&!crmTab.isZSCustomModule(i.module_name))&&e.push(i)}})),e},callSetupAction:function(e){var t=Crm.getCrmBasePath()+"/SetupAction.do?action="+e,r={};r[csrfParamName]=csrfToken,(new crmRequestPool).doAjax(t,(function(e){"object"!=typeof e&&(e=JSON.parse(e))}),r)},getDisplayableOrchestrationInList:function(e){var t,r;return e.forEach((function(e){t?(("draft"===e.status||"draft"!==t.status&&"active"===e.status||"draft"!==t.status&&"active"!==t.status&&Utils.compareDateandTime(t.modified_time,e.modified_time))&&(t=e),"active"!==r.status&&"draft"!==e.status&&("active"===e.status||"draft"===r.status||Utils.compareDateandTime(r.modified_time,e.modified_time))&&(r=e)):(t=e,r=e)})),t.statusDominatingProcess=r,t.records_count=r.records_count,t},responseHandlerForAPI:function(e){if(commonUtils.showHideLoadingDiv(),e&&400===e.status&&e.responseText){var t,r=JSON.parse(e.responseText);if(r.orchestrations?t=r.orchestrations[0].message:r.states?t=r.states[0].message:r.transitions&&(t=r.transitions[0].message),"server and client are not in sync"===t){var i=$L("#orchSyncModal");i.length&&(i[0].ltProp("show",!0),Lyte.registeredMixins.orchestration_config.domElements.orchSyncModal.show=!0)}else"No such orchestration exists"===t&&this.transitionToOrchestrationIndex();Lyte.registeredMixins.orchestration.currRequestCustomDataType=""}e&&401==e.status&&(renderingUtils.displayPermissionDenied(),Lyte.registeredMixins.orchestration.currRequestCustomDataType="")},transitionToOrchestrationIndex:function(){Lyte.Router.getRouteInstance().transition.data.noNeedToShowErrorMsg?Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.orchestration.index-orchestration"):Lyte.Router.getRouteInstance().transitionTo("crm.settings.section.orchestration.index-orchestration").data={invalidProcess:!0}},routeErrorHandling:function(e){if(e.response){var t=JSON.parse(e.response);t.orchestrations&&(t=t.orchestrations[0]);var r=$(".dummy_Body");switch(t.code){case"INVALID_DATA":this.transitionToOrchestrationIndex();break;case"NO_PERMISSION":renderingUtils.displayPermissionDenied(),r.hide();break;case"FEATURE_NOT_SUPPORTED":renderingUtils.displayPermissionDenied(void 0,void 0,I18n.getMsg("crm.zes.mobile.error.feature")),r.hide();break;case"ACCESS_DENIED":var i=t.MODULE_DISABLED[0];if(validationUtils.isNotEmpty(i)){$L("crm-orchestration-details")[0].component.setData("disabledModules",i),$L("#orchestrationDenyPop")[0].ltProp("show",!0);break}default:crmui.showMsgBand("error",I18n.getMsg("error.database.problem"),3e3),r.hide()}}else crmui.showMsgBand("error",I18n.getMsg("error.database.problem"),3e3),$(".dummy_Body").hide()},getCachedOrchestrationList:function(){return store.peekAll("orchestration_process").filter((function(e){return!e.$.isNew}))},changeLiteralForEmailActionForAbm:function(e){var t=e.actionTitle;t.create.Alert=I18n.getMsg("crm.label.Email"),t.view.Alert=I18n.getMsg("crm.label.Email"),t.edit.Alert=I18n.getMsg("crm.abm.edit.email")},changeLiteralForEmailActionConfigForAbm:function(e){e.find((e=>"email_notifications"===e.dataValue)).text=I18n.getMsg("crm.label.Email")},filterOutAbmOrchestrations:function(e){var t=store.peekAll("orchestration_process"),r=[],i=[];return t&&t.length&&(i=t.filter((e=>"abm"===e.category)).map((e=>e.id)),r=t.filter((e=>"crm"===e.category)).map((e=>e.id)),e=(e=e.filter((e=>!(e.parent_module&&"Orchestration"===e.parent_module.api_name&&-1!==i.indexOf(e.id))))).filter((e=>!(e.parent_module&&"Orchestration"===e.parent_module.api_name&&-1===r.indexOf(e.id))))),e},isAbmOrchestration:function(e,t){return!(!t||!t.length)&&-1!==t.filter((e=>"abm"===e.category)).map((e=>e.id)).indexOf(e)}}),Lyte.Mixin.register("crm-module-mixin",{setProperty:function(e,t){var r=e.id,i=e.sections;if(i){var s=i.length,n=[],o=e.module?e.module.id:void 0;if(t&&t.set_available_user_layout&&("active"===e.status||"hidden"===e.status))var a=store.peekRecord("user",Crm.userDetails.USER_ID).profile.name,l=e.profiles.find((e=>e.name===a));for(var u=0;u<s;u++){var c=i[u];t&&t.apiVersion&&"2.2"==t.apiVersion&&!c.uid&&(c.uid=c.id),c.id=r+"_"+u;for(var d=c.fields,m=d.length,p=0;p<m;p++){var _=d[p];if("FULLNAME"===_.column_name){let e=store.peekRecord("module",o);e&&-1!==["Leads","Contacts"].indexOf(e.api_name)&&e.singular_label&&(_.field_label=_.display_label=I18n.getMsg("crm.label.vendor.name",e.singular_label))}if(c.isSubformSection&&(_.subform_api=!0),t&&t.moduleSet&&(t.subformModuleSet||!_.subform_api||_.subform_api&&("subform"===_.data_type||Crm.userDetails.isStaticSubFormEnabled&&"static_subform"===_.data_type))&&(_.module=o?[o]:[]),l&&(_.available_in_user_layout=!0),n.push(_.id),_.lookup&&_.lookup.query_details){const e=store.peekRecord("field",_.id);e&&e.lookup&&e.lookup.query_details&&(_.lookup.query_details.criteria=e.lookup.query_details.criteria||_.lookup.query_details.criteria)}var f=[];if(_.pick_list_values&&_.pick_list_values.length&&(f=store.peekAll("field").filterBy({id:_.id})),"used"===c.type||c.screen||!t||"lyteCreate"!==t.from&&!t.setLayFldPropForNormalSecAlone){if(_.pick_list_values&&_.pick_list_values.length){if(store.model.field.fieldList.hasOwnProperty(r))if(validationUtils.isNotEmpty(_[r])){(h=_[r]).pick_list_values=_.pick_list_values,h.default_value=_.default_value,_[r]=h}else _[r]={pick_list_values:_.pick_list_values,default_value:_.default_value};else store.addField("field",r,"object"),_[r]={pick_list_values:_.pick_list_values,default_value:_.default_value};!f[0]||!f[0].pick_list_values||t&&0==t.peekField||(_.pick_list_values=f[0].pick_list_values),_.enable_colour_code&&(_.picklist_colour_codes=_.pick_list_values.slice(0)),_.colour_code_enabled=_.enable_colour_code}if(null!=_.sequence_number)if(store.model.field.fieldList.hasOwnProperty(r))if(validationUtils.isNotEmpty(_[r])){var h;(h=_[r]).sequence_number=_.sequence_number,h.required=_.required,"boolean"===_.data_type&&_.default_value&&(h.default_value=_.default_value),_.hasOwnProperty("quick_sequence_number")&&(h.quick_sequence_number=_.quick_sequence_number),_[r]=h}else _[r]={sequence_number:_.sequence_number,required:_.required},"boolean"===_.data_type&&_.default_value&&(_[r].default_value=_.default_value),_.hasOwnProperty("quick_sequence_number")&&(_[r].quick_sequence_number=_.quick_sequence_number);else store.addField("field",r,"object"),_[r]={sequence_number:_.sequence_number,required:_.required},"boolean"===_.data_type&&_.default_value&&(_[r].default_value=_.default_value),_.hasOwnProperty("quick_sequence_number")&&(_[r].quick_sequence_number=_.quick_sequence_number);_.convert_mapping&&(void 0===_[r]&&(_[r]={}),_[r].convert_mapping=_.convert_mapping)}if(void 0!==_.sequence_number)_[r+"_"+c.id]={sequence_number:_.sequence_number};f[0]&&f[0].pick_list_values&&t&&0==t.peekField&&delete _.pick_list_values}}store.model.layout.fieldList.hasOwnProperty("fields")&&(e.fields=n)}},getfieldattributeType:function(e,t){var r;return r=116==e.ui_type&&crmConstants.entityforumlaMapping[e.formula.return_type]?crmConstants.entityforumlaMapping[e.formula.return_type]:118===e.ui_type&&crmConstants.entitydataParamMapping[e.rollup_summary.return_type]?crmConstants.entitydataParamMapping[e.rollup_summary.return_type]:crmConstants.entityuiTypeMapping[e.ui_type]?crmConstants.entityuiTypeMapping[e.ui_type]:crmConstants.entitycolumnMapping[e.column_name]?crmConstants.entitycolumnMapping[e.column_name]:crmConstants.entityjsonTypeMapping[e.json_type]?crmConstants.entityjsonTypeMapping[e.json_type]:"string"==e.json_type&&"currency"==e.data_type?"number":e.json_type?e.json_type:Crm.userDetails.isRelatedListLyteEnabled&&"Time_Spent"===e.api_name&&"Visits"===t?"time-in-minutes":"string","REMINDAT"==e.column_name&&(r="object"),r},unloadProperty:function(e,t){var r=t&&Array.isArray(t)?Array.from(t):t;r&&e&&r.forEach((function(t){store.unloadRecord(e,t.id)}))},unloadModuleProperty:function(e){for(var t in moduleRecordMapping)moduleRecordMapping[t][e]&&(moduleRecordMapping[t][e]=void 0)},addSubformFieldsintoLyteModel:function(e){var t,r=!1;e&&e.forEach((function(e){var i,s={};s.id=Lyte.attr("string"),r=!1,e.isSubformSection&&e.fields&&e.fields.forEach((function(e){"subform"===e.data_type||Crm.userDetails.isStaticSubFormEnabled&&"static_subform"===e.data_type?(r=!0,t=e.subform?e.subform.id:e.associated_module.id,["Invoiced_Items","Purchase_Items","Ordered_Items","Quoted_Items"].contains(e.api_name)&&(i=!0)):e.subform||(s[e.api_name]=Lyte.attr(Lyte.registeredMixins["crm-module-mixin"].getfieldattributeType(e)),s[e.api_name].fieldID=e.id,s[e.api_name].uiType=e.ui_type,s[e.api_name].columnName=e.column_name,s[e.api_name].fieldType=e.data_type,s[e.api_name].length=e.length,s[e.api_name].displayLabel=e.display_label,s[e.api_name].isCustomField=e.custom_field,"LINETAX"===e.column_name&&(s[e.api_name].watch=!0))}));var n=store.model[t];if(n&&r&&Lyte.Component.registeredHelpers.isNotEmpty(s))for(var o in s.__CUSTOM_sequence_NUMBER__={type:"string"},s.removedRow={type:"string"},i&&(s.$clone_reference_id={type:"string"}),s)n.fieldList[o]||store.addField(t,o,s[o].type,s[o],void 0,!0)}))},resetMetaValues:function(e){"Users"!==e&&(moduleRecordMapping[e]&&(this.unloadProperty("field",store.peekRecord("module",moduleRecordMapping[e].id).fields),this.unloadProperty("layout",store.peekRecord("module",moduleRecordMapping[e].id).layouts),store.peekRecord("module",moduleRecordMapping[e].id).fields=void 0),closeAsapWidget())}}),Lyte.Mixin.register("crm-date-datetime-mixin",{getDateTimeWithTimezone:function(e){function t(e){return e<10?"0"+e:e}var r;return e&&(r=e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())),r},getcurrentTime:function(e){var t=Crm.userDetails.TIME_FORMAT.split(" "),r={};r.format=t.length>1?"12":"24";var i,s=(new Date).getHours();switch((s=e?s+e:s)>=24&&(s-=24),r.format){case"12":var n=s>=12?I18n.getMsg("PM"):I18n.getMsg("AM");i=s>12?o(s-12)+":00 "+n:o(0===s?12:s)+":00 "+n;break;case"24":case"202":i=o(s)+":00"}function o(e){return e<10?"0"+e:e}return r.currTime=i,"12"===r.format?(r.startTime="00:00 "+I18n.getMsg("AM"),r.endTime="11:59 "+I18n.getMsg("PM")):(r.startTime="00:00",r.endTime="23:59"),r.meridian={AM:I18n.getMsg("AM"),PM:I18n.getMsg("PM")},r},getfinalTimeObjectfromTime:function(e){if(e){var t={},r=Crm.userDetails.TIME_FORMAT.split(" ").length>1?"12":"24",i=e.split(" "),s=e.indexOf(" ");if(-1!==s){var n=e.slice(s+1);(n=n&&"string"==typeof n?n.trim():n)&&i[1]&&(i[1]=n)}var o=i[0].split(":");return"12"==r?(i[1]&&(i[1]=i[1].toUpperCase(),t.hrs=t.hrs=I18n.getMsg(i[1]).toUpperCase()===I18n.getMsg("AM").toUpperCase()?12===o[0]?0:o[0]:12+(12===o[0]?0:Number(o[0]))),t.mins=o[1]):(t.hrs=o[0],t.mins=o[1]),o.length>1&&""!==o[2]&&(t.secs=o[2]),t}},convertTimeTo24HoursFormat:function(e,t){return void 0===t?e:"am"===(t=t.toLowerCase())?0===e?12:12===e?0:e:"pm"===t?12===e?e:e+12:t===I18n.getMsg("AM")||I18n.getMsg("am")===t?0===e?12:12===e?0:e:t===I18n.getMsg("PM")||I18n.getMsg("pm")===t?12===e?e:e+12:void 0},convertdateToDBformat:function(e){return $L.moment(e).format("YYYY-MM-DD")},getCurrentMonthForOrgTimeZone:()=>crmCalendar.monthName[(new CrmDate).dateObject.getMonth()].html,getDateTimeFormatFromString:function(e){for(var t,r,i=[{time:Crm.userDetails.TIME_FORMAT.replace("a","A"),date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+" "+Crm.userDetails.TIME_FORMAT.replace("a","A")},{time:Crm.userDetails.TIME_FORMAT.replace("a","A"),date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+"TV"+Crm.userDetails.TIME_FORMAT.replace("a","A")},{time:Crm.userDetails.TIME_FORMAT,date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+" "+Crm.userDetails.TIME_FORMAT},{time:Crm.userDetails.TIME_FORMAT,date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+"TV"+Crm.userDetails.TIME_FORMAT},{time:Crm.userDetails.TIME_FORMAT.toUpperCase().replace(":MM",":mm"),date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+" "+Crm.userDetails.TIME_FORMAT.toUpperCase().replace(":MM",":mm")},{time:Crm.userDetails.TIME_FORMAT.toUpperCase().replace(":MM",":mm"),date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+"TV"+Crm.userDetails.TIME_FORMAT.toUpperCase().replace(":MM",":mm")},{time:"HH:mm:ss",date:"YYYY-MM-DD",full:"YYYY-MM-DDTHH:mm:ss"},{time:"HH:mm:ssZ",date:"YYYY-MM-DD",full:"YYYY-MM-DDTHH:mm:ssZ"},{time:Crm.userDetails.TIME_FORMAT.replace("a","A"),date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+"TV"+Crm.userDetails.TIME_FORMAT.replace("a","A").replace(":mm",":mm:ss")},{time:Crm.userDetails.TIME_FORMAT,date:Crm.userDetails.DATE_PATTERN.toUpperCase(),full:Crm.userDetails.DATE_PATTERN.toUpperCase()+"TV"+Crm.userDetails.TIME_FORMAT.replace(":mm",":mm:ss")}],s=i.length,n=!1,o=0;o<s;o++)if((t=$L.moment(e,i[o].full,{i18n:!0})).validate()){n=!0,r=o;break}return n?{format:{full:i[r].full,date:i[r].date,time:i[r].time},moment:t}:{}},getDateTimeObjFromString:function(e){var t,r,i,s={};r=Crm.userDetails.TIME_FORMAT.split(" ").length>1?Crm.userDetails.TIME_FORMAT.replace("a","A"):Crm.userDetails.TIME_FORMAT.toUpperCase().replace(":MM",":mm"),t=(i=Crm.userDetails.DATE_PATTERN.toUpperCase())+" "+r;var n=$L.moment(e,t),o=n.format(i),a=n.format(r);return n&&n._isValid&&(s={date:o,time:a,dateTimeStr:o+"TV"+a}),s}}),Lyte.Mixin.register("crm-utilities",{flatten:function(e){for(var t=[],r=e.length,i=0;i<r;i++)Array.isArray(e[i])?t=t.concat(this.flatten(e[i])):t.push(e[i]);return t},isNull:function(e){return null===e},executeFunctionByName:function(e,t){for(var r=Array.prototype.slice.call(arguments,2),i=e.split("."),s=i.pop(),n=i.length,o=0;o<n;o++)t=t[i[o]];return t[s].apply(t,r)}});
