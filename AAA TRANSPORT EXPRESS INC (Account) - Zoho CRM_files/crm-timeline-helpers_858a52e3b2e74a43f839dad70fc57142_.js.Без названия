Lyte.Component.registerHelper("getDateFromAuditedTime",(function(){try{return this.getData("lastRenderedDate")}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("isDateAlreadyRendered",(function(e){if(!e||null===e)return!0;try{var n=e.split("T")[0].split("-"),i=crmCalendar.monthNameWithThreeLetter[parseInt(n[1])-1].html+" "+parseInt(n[2])+", "+n[0];return this.getData("lastRenderedDate")===i||(this.setData("lastRenderedDate",i),this.getData("lastRenderedTime")&&this.setData("lastRenderedTime",""),!1)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("isTimeAlreadyRendered",(function(e){if(e&&null!==e)try{var n=Utils.getTimeInUserFormat(Utils.ISO8601toDateObject(e),!0);return this.getData("lastRenderedTime")===n?(this.setData("timeRendered",!1),!0):(this.setData("lastRenderedTime",n),this.setData("timeRendered",!0),!1)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getTimeFromAuditedTime",(function(e){if(!e)return"";try{return Utils.getTimeInUserFormat(Utils.ISO8601toDateObject(e),!0)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("isMassUpdateAction",(function(e){try{return e&&null!==e&&""!==e&&e.includes("mass_update")}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getDateAndTimeFromAuditedTime",(function(e){if(!e)return"";try{var n=$L.moment(e)._arg.split("T")[0].split("-");return crmCalendar.monthNameWithThreeLetter[parseInt(n[1])-1].html+" "+parseInt(n[2])+", "+n[0]+" "+Utils.getTimeInUserFormat(Utils.ISO8601toDateObject(e),!0)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getNotesTitleValue",(function(e){var n="";try{if(e&&e.field_history){var i=e.field_history[0];void 0!==i&&void 0!==i._value&&(n=i._value.new)}}catch(e){return murphy.error(e),""}return n})),Lyte.Component.registerHelper("getValueForActivitySpecificFields",(function(e,n){try{if(null===e||" "===e)return I18n.getMsg("crm.pulse.lowercase.blank.value");if("Recurring_Activity"===n)return I18n.getMsg("crm.schedules.repeatRate."+e);if("Remind_At"===n)return CrmDateUtils.convertDateToUserPattern(e,void 0,!0)+" "+Utils.getTimeInUserFormat($L.moment(e).toDate(),!0)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getScoreUpdateDetails",(function(e){var n="";try{var i=e.automation_details.scoring_rule,c=i.positive_score,t=i.touch_point?i.touch_point.positive_score:null,o=i.negative_score,r=i.touch_point?i.touch_point.negative_score:null;c&&(c.old&&(c.old="null"!==c.old?c.old:"0"),c.new&&(c.new="null"!==c.new?c.new:"0")),t&&(t.old&&(t.old="null"!==t.old?t.old:"0"),t.new&&(t.new="null"!==t.new?t.new:"0")),o&&(o.old&&(o.old="null"!==o.old?o.old:"0"),o.new&&(o.new="null"!==o.new?o.new:"0")),r&&(r.old&&(r.old="null"!==r.old?r.old:"0"),r.new&&(r.new="null"!==r.new?r.new:"0"));var a=!!c&&parseInt(c.new)!==parseInt(c.old),l=!!t&&parseInt(t.new)!==parseInt(t.old),s=!!o&&parseInt(o.old)!==parseInt(o.new),d=!!r&&parseInt(r.old)!==parseInt(r.new);a&&(n+=I18n.getMsg("crm.timeline.positive.score",[c.old,c.new])),l&&(n+=I18n.getMsg("crm.timeline.positive.touch.point.score",[t.old,t.new])),s&&(n+=I18n.getMsg("crm.timeline.negative.score",[o.old,o.new])),d&&(n+=I18n.getMsg("crm.timeline.negative.touch.point.score",[r.old,r.new]))}catch(e){return murphy.error(e),""}return n})),Lyte.Component.registerHelper("displayFieldChanges",(function(e,n,i){var c=!1,t=n.fldDetails[e.key.id];return t.view_type.view&&!i.contains(t.api_name)&&(c=!0),c})),Lyte.Component.registerHelper("getFieldValueFromTimelineAPI",(function(e,n,i,c,t,o,r){var a=!1,l=e;if(!t||void 0!==r&&!1!==r||(e=e.name),(!e&&0!==e&&"0"!==e||" "===e||""===e||"[]"===e)&&(e=I18n.getMsg("crm.pulse.lowercase.blank.value"),a=!0),void 0!==n&&!a){if("multi_module_lookup"===n)try{const n=JSON.parse(e),{module:i,moduleName:c}=n,t=c&&Crm.moduleInfo[c]&&Crm.moduleInfo[c].translatedPluralLabel||i;e=`${n.value} - ${t}`}catch(e){return murphy.error(e),""}if("datetime"===n||"multireminder"===n||"rollup_summary"===n&&"datetime"===i.rollup_summary.return_type||"formula"===n&&i.formula&&"datetime"===i.formula.return_type)try{let n=Crm.userDetails.TIME_FORMAT;n=n.trim().endsWith("a")?n.substr(0,n.length-1)+"A":n.trim(),e=e.toString();const i=$L.moment(e).timezone(Crm.userDetails.USER_TIME_ZONE),c=i.i18N(Crm.userDetails.DATE_PATTERN.toUpperCase()),t=i.format(n);e=`${c} ${t}`}catch(e){return murphy.error(e),""}else if("date"===n&&"Available_Dates"===i.api_name)try{e=e.substring(1,e.length-1).split(",").map((e=>e.substring(1,e.length-1))).map((e=>CrmDateUtils.convertDateToUserPattern(e,null,!0))).join(",")}catch(e){return murphy.error(e),""}else if(t&&"date"===n){const n="YYYY-MM-DD";e=e.toString(),e=$L.moment(e,n).i18N(Crm.userDetails.DATE_PATTERN.toUpperCase())}else if(t&&o&&("currency"===n||"formula"===n&&!i.custom_field)&&e!==I18n.getMsg("crm.timeline.field.subform.unnamed")){var s=e.substring(e.indexOf(" ")+1);if("NaN"===Intl.NumberFormat(Crm.userDetails.COUNTRY_LOCALE.replace("_","-"),{maximumFractionDigits:9}).format(s))return e}else{if(t&&o&&("formula"===n||"double"===n||"bigint"===n||"integer"===n)&&34!==i.ui_type)return Lyte.Component.registeredHelpers.formatNumber(e.toString());if("date"===n||"formula"===n&&i.formula&&"date"===i.formula.return_type||"rollup_summary"===n&&"date"===i.rollup_summary.return_type)try{const n="YYYY-MM-DD";e=e.toString(),e=$L.moment(e,n).i18N(Crm.userDetails.DATE_PATTERN.toUpperCase())}catch(e){return murphy.error(e),""}else{if(t&&("imageupload"===n||"fileupload"===n))return e=$ESAPI.encoder().encodeForHTML(e);if("imageupload"===n||"fileupload"===n){var d,m,u=e.added,p=e.removed,_="";if(void 0!==u)try{(g=(void 0!==u&&u.indexOf(","))>-1?u.split(","):[]).length>0?(d="crm.Fileupload.timeline.added",m=g.length):d="crm.Fileupload.timeline.SingleFileadded",_+="<span class='crm-base-font-size'>",_+="<br>",_+=I18n.getMsg(d,m),_+=" <span class='crm-base-font-size'>"+$ESAPI.encoder().encodeForHTML(u)+"</span>",_+="</span>"}catch(e){return murphy.error(e),""}try{var g;if(void 0!==p)(g=(void 0!==p&&p.indexOf(","))>-1?p.split(","):[]).length>0?(d="crm.Fileupload.timeline.removed",m=g.length):d="crm.Fileupload.timeline.SingleFileremoved",_+="<span class='crm-base-font-size'>",_+="<br>",_+=I18n.getMsg(d,m),_+=" <span class='crm-base-font-size'>"+$ESAPI.encoder().encodeForHTML(p)+"</span>",_+="</span>";e=_}catch(e){return murphy.error(e),""}}else if("picklist"===n)try{if(e=e.toString(),c&&c.record&&c.record.module&&"Calls"===c.record.module.api_name&&"Reminder"===i.api_name)e=Utils.getDateTimeInUserFormat($L.moment(e).toDate(),!0);else{var h=i.enable_colour_code,f=i.pick_list_values;if(t&&o){var y=f.filter((function(n){if(n.display_value===e)return n}),e);0===y.length&&(y=f.filter((function(e){if(e.id===l.id)return e}),e),y.length>0&&(e=y[0].display_value))}if(h&&f&&null!==f&&f.length){y=f.filter((function(n){if(n.display_value===e)return n}),e);if(y&&y.length>0){var b=y[0],v=b&&b.colour_code&&null!==b.colour_code?b.colour_code:null,k=b.id,L="timelog_"+i.id+"_option_"+k;if(null!==v&&0===v.indexOf("#")||"transparent"===v){v=v.substring(1);var z=timelineIconDetails.getFontColour(v),I="background-color:#"+$ESAPI.encoder().encodeForHTML(v)+";color:"+$ESAPI.encoder().encodeForHTML(z);"timeline"===c.type?(_="<span data-zcqa='"+L+"' class='tl_from colorAppliedPicklist' style='"+I+"'><b>"+$ESAPI.encoder().encodeForHTML(e)+"</b></span>",t&&(_="<span data-zcqa='"+L+"' class='tl_from colorAppliedPicklist mB5 maxW300' style='"+I+"'><lyte-text lt-prop-value = '"+$ESAPI.encoder().encodeForHTML(e)+"' class='vaM crm-font-regular'> </lyte-text></span>")):_="<span data-zcqa='color_fieldupdate' class='tl_from colorAppliedPicklist' style='"+I+"'><b>"+$ESAPI.encoder().encodeForHTML(e)+"</b></span>",e=_}else if((!v||"null"===v)&&"timeline"===c.type){_="<span data-zcqa='"+L+"' style='"+(I="background-color:;color:var(--baseColor)")+"'><b>"+$ESAPI.encoder().encodeForHTML(e)+"</b></span>",e=_}}else{_="<span class='tl_from colorAppliedPicklist' style='"+(I="background-color:var(--bg_white);color:var(--baseColor)")+"'><b>"+$ESAPI.encoder().encodeForHTML(e)+"</b></span>",e=_}}else e=$ESAPI.encoder().encodeForHTML(e)}}catch(e){return murphy.error(e),""}else if("integer"!==n||t||"Duration"!==i.api_name)if(t&&"multiselectpicklist"===n)try{e=(e=e.toString()).replaceAll(";","; "),e=$ESAPI.encoder().encodeForHTML(e)}catch(e){return murphy.error(e),""}else{if(t&&o&&e&&i.separator&&("integer"===n||"bigint"===n))return Lyte.Component.registeredHelpers.formatNumber(e.toString());try{e=e.toString(),e=$ESAPI.encoder().encodeForHTML(e)}catch(e){return murphy.error(e),""}}else if(e=e.toString(),c&&c.record&&c.record.module&&"Services__s"===c.record.module.api_name){var T="";try{var C=parseInt(e),M=C%60,w=(C-M)/60;0===w||"0"===w?T=M>1?I18n.getMsg("crm.service.duration.minutes",[M]):I18n.getMsg("crm.service.duration.minute",[M]):1===w||"1"===w?T=M>1?I18n.getMsg("crm.service.duration.hour.minutes",[w,M]):1===M||"1"===M?I18n.getMsg("crm.service.duration.hour.minute",[w,M]):I18n.getMsg("crm.service.duration.hr",[w]):w>1&&(T=M>1?I18n.getMsg("crm.service.duration.hours.minutes",[w,M]):1===M||"1"===M?I18n.getMsg("crm.service.duration.hour.minute",[w,M]):I18n.getMsg("crm.service.duration.hrs",[w])),e=""!==T?T:e}catch(e){return murphy.error(e),""}}}}}return e})),Lyte.Component.registerHelper("getStyleForJourneyMilestone",(function(e){if(e.colorCodeEnabled&&e.colorCode&&0===e.colorCode.indexOf("#"))try{var n=e.colorCode.substring(1),i=timelineIconDetails.getFontColour(n);return i&&""!==i&&(i="black"===i?"var(--baseColor)":"var(--fff)"),"background-color:#"+n+";color:"+i+";"}catch(e){murphy.error(e)}return""})),Lyte.Component.registerHelper("getIndexOf",(function(e,n){if(!e)return-1;try{return e.indexOf(n)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getActionForTag",(function(e){var n=e?e.action:"",i=e&&e.field_history&&e.field_history[0]?e.field_history[0]._value.new:"",c="";try{n.includes("removed")?c=i.includes(",")?"crm.tags.timeline.removed.plural":"crm.tags.timeline.removed.singular":n.includes("added")&&(c=i.includes(",")?"crm.tags.timeline.added.plural":"crm.tags.timeline.added.singular")}catch(e){return murphy.error(e),""}return I18n.getMsg(c)})),Lyte.Component.registerHelper("getTimelineIconCss",(function(e,n,i,c,t){var o=!(!e||"signal"!==e.type),r="",a="",l="";try{t?(r=e.medium,a=e.action):(r=o?e.extension.signal.medium:e.record.module.api_name,a=o?e.extension.signal.action:e.action)}catch(e){r="",a=""}var s="updated"===a&&e.field_history&&1===e.field_history.length&&"ownerlookup"===e.field_history[0].data_type;a=a?s?"changeowner":a.toLowerCase():"general";var d,m,u,p="tl_iconEdited";r=(r=r&&!s?r:"general").toLowerCase(),"create_record"===a&&(r=e.automation_details&&e.automation_details.create_record&&e.automation_details.create_record.module&&e.automation_details.create_record.module.name?e.automation_details.create_record.module.name.toLowerCase():r);try{u=timelineHelper.isTeamModule(r)?timelineIconDetails.team:timelineHelper.isCustomModule(r)?timelineIconDetails.custom:timelineIconDetails[r]?timelineIconDetails[r]:timelineIconDetails.general}catch(e){murphy.error(e)}try{"social"===r?a=e.record.name:"calls"!==r||t||"updated"===a||(a=e.record.record_type&&"null"!==e.record.record_type?e.record.record_type.toLowerCase():e.action)}catch(e){murphy.error(e)}if("saveintransition"===(a="image_uploaded"===a||"image_removed"===a||"tags_overwritten"===a||"tag_added"===a||"tag_removed"===a?"updated":a))try{if("attachment_added"===e.automation_details.save_in_transition.action_performed)u=timelineIconDetails.attachments;else if("tags_added"===e.automation_details.save_in_transition.action_performed||"field_update"===e.automation_details.save_in_transition.action_performed)a="updated";else if("note_added"===e.automation_details.save_in_transition.action_performed)u=timelineIconDetails.notes;else if("related_record_field_update"===e.automation_details.save_in_transition.action_performed)switch(e.automation_details.save_in_transition.lookup_field){case"Events":u=timelineIconDetails.events;break;case"Calls":u=timelineIconDetails.calls;break;case"Tasks":u=timelineIconDetails.tasks}}catch(e){murphy.error(e)}try{e.cpq&&(a="added"===e.action?a:"updated");var _=u[a]?u[a]:u.general;return m=_.icon_name,p=_.background_class?_.background_class:p,l=_.icon_space,d=_.icon_class,n?m:i?p:c?l:(t||(d=d.replace("zcicn-color-plain-fff","")),d)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getUserNameWithBusinessCard",(function(e,n){try{Array.isArray(e)||(e=[e]);var i=e.length;if(void 0!==e&&i>0){i>2&&(i=2);for(var c="",t=0;t<i;t++){if(e[t]&&(c+=`<span id=show_${e[t].id} class='${n}' onmouseover=showUserBusinessCard(this,'${e[t].id}',this) onmouseout=hideUserBusinessCard(this)>${$ESAPI.encoder().encodeForHTML(e[t].name)}</span>`),t===i-1)return c;c+=", "}return c}}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getLabelForRcommendationFeedback",(function(e,n){var i=[];try{var c=e&&null!==e.automation_details&&e.automation_details.recommendation?e.automation_details.recommendation.suggestion_type:"",t=I18n.getMsg("crm.filter.label."+c);i.push($ESAPI.encoder().encodeForHTML(t));var o=(e&&null!==e.automation_details&&e.automation_details.recommendation?e.automation_details.recommendation.is_positive:"")?I18n.getMsg("zia.recommendation.feedback.positive"):I18n.getMsg("zia.recommendation.feedback.negative"),r=e&&e.record&&e.record.module?e.record.module.api_name:"",a=e&&e.record?e.record.id:"",l=e&&e.record?e.record.name:"",s=r?moduleRecordMapping[r].singular_label?moduleRecordMapping[r].singular_label:r:"";n&&(l=`<link-to lt-prop-route="crm.tab.module.entity" lt-prop-dp=["${$ESAPI.encoder().encodeForHTML(r)}","${a}"] lt-prop-target="_blank" lt-prop-class="pL0 crmLinkColor cP ttCapitalize" lt-prop-title="${$ESAPI.encoder().encodeForHTML(s)}">${$ESAPI.encoder().encodeForHTML(l)}</link-to>`),i.push(l),i.push(o)}catch(e){return murphy.error(e),""}return I18n.getMsg("crm.timeline.zia.recommendation.feedback.marked.suggestion",i)})),Lyte.Component.registerHelper("getJourneyLiteral",(function(e,n){var i="",c=[];try{if(void 0!==n&&"timeline"===n){switch(e.extension&&e.extension.signal?e.extension.signal.display_label:""){case"zoho.emailinsight.open":case"EmailInsight_Open__s":i="crm.timeline.email.opened";break;case"zoho.email.incoming":i="crm.emailstats.emailreceived";break;case"zoho.emailinsight.click":case"EmailInsight_Click__s":i="crm.timeline.email.clicked";break;case"zoho.emailinsight.bounce":case"EmailInsight_Bounce__s":e.record&&"null"!==e.record&&e.record.recipients&&"null"!==e.record.recipients?(i="crm.orch.trigger.parameter.mail_bounced.new",c.push($ESAPI.encoder().encodeForHTML(e.record.recipients))):i="crm.orch.trigger.parameter.mail_bounced";break;case"zoho.telephony.missed":case"Telephony_Missed__s":i="crm.emailstats.callmissed";break;case"zoho.livedesk.missedchat":case"Livedesk_MissedChat__s":i="zoho.livedesk.missedchat"}}else{var t=e.medium?e.medium:"",o=e.action?e.action:"",r=Crm.moduleInfo[t];if(void 0!==(t=r?r.apiname:t)&&journeysLiteral[t])if(i=journeysLiteral[t][o],"Twitter"===t&&void 0!==o)("mentioned"===o||"messaged"===o)&&c.push(e.medium_details&&"null"!==e.medium_details?$ESAPI.encoder().encodeForHTML(e.medium_details.twitter_name):"");else if("Facebook"===t&&void 0!==o)c.push(null!==e.medium_details?$ESAPI.encoder().encodeForHTML(e.medium_details.page_name):"");else if("Campaigns"===t){var a=e.medium_details,l=a&&a.count?a.count:0;c.push(l>0?l:""),c.push(l>1?$ESAPI.encoder().encodeForHTML(r.pluralLabel):$ESAPI.encoder().encodeForHTML(r.singularLabel))}else if("Events"===t){var s=e.medium_details&&"null"!==e.medium_details?e.medium_details.status:"";i=""!==s?"crm.timeline.journeys.event.response."+s:i}}}catch(e){return murphy.error(e),""}return I18n.getMsg(i,c)})),Lyte.Component.registerHelper("getJourneyStatusLiteral",(function(e){try{var n=e&&e.status?e.status:"";n=n.replaceAll(" ",".");var i=e&&e.medium?e.medium:"";return I18n.getMsg("crm.timeline.journey.status."+i+"."+n)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getMailSenderForEmailNotificationSingleLog",(function(e){try{return e.hasOwnProperty("name")&&e.hasOwnProperty("id")?`<span id=show_${e.id} class="bCardHover cDefault" onmouseover=showUserBusinessCard(this,'${e.id}',this) onmouseout=hideUserBusinessCard(this)>${$ESAPI.encoder().encodeForHTML(e.name)}</span>`:$ESAPI.encoder().encodeForHTML(e.email_id)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getMailSendersList",(function(e){var n=!1,i=[];try{(e.hasOwnProperty("bcc")||e.hasOwnProperty("cc"))&&(n=!0)}catch(e){murphy.error(e)}var c="";try{i=e.to,!n&&i?i.slice(0,2).map(((e,n)=>{e.hasOwnProperty("name")&&e.hasOwnProperty("id")?c+=`<span id=show_${e.id} class="crmBaseColor bCardHover cDefault" onmouseover=showUserBusinessCard(this,'${e.id}',this) onmouseout=hideUserBusinessCard(this)>${$ESAPI.encoder().encodeForHTML(e.name)}</span>`:c+="<span>"+$ESAPI.encoder().encodeForHTML(e.email_id)+" </span>",n+1<2&&n+1<i.length&&(c+=", ")})):i&&(i[0].hasOwnProperty("name")&&i[0].hasOwnProperty("id")?c+=`<span id=show_${i[0].id} class="crmBaseColor bCardHover cDefault" onmouseover=showUserBusinessCard(this,'${i[0].id}',this) onmouseout=hideUserBusinessCard(this)>${$ESAPI.encoder().encodeForHTML(i[0].name)}</span>`:c+="<span>"+$ESAPI.encoder().encodeForHTML(i[0].email_id)+" </span>")}catch(e){return murphy.error(e),""}return c})),Lyte.Component.registerHelper("constructFiltersField",(function(e,n){var i="";try{e&&e.length>0&&(e.includes("moduleFilter")&&(i+=n?I18n.getMsg("crm.timeline.journey.medium"):I18n.getMsg("crm.setup.system.modules")),e.includes("userFilter")&&(i.length>0&&(i+=", "),i+=I18n.getMsg("crm.label.users")),e.includes("timeFilter")&&(i.length>0&&(i+=", "),i+=I18n.getMsg("crm.events.time")),e.includes("sourceFilter")&&(i.length>0&&(i+=", "),i+=I18n.getMsg("crm.timeline.filter.sources")))}catch(e){return murphy.error(e),""}return i})),Lyte.Component.registerHelper("getTransitionTypeForOrchesation",(function(e){var n="crm.orch.trigger.parameter.";try{return n+=e.automation_details.command_center.transition.trigger_type,e.automation_details.command_center.transition.signal_name?I18n.getMsg(n,$ESAPI.encoder().encodeForHTML(e.automation_details.command_center.transition.signal_name)):["backstage_checked_in","backstage_ticket_cancelled","backstage_ticket_purchased"].contains(e.automation_details.command_center.transition.trigger_type)?(n+=".dynamic",I18n.getMsg(n,$ESAPI.encoder().encodeForHTML(e.automation_details.command_center.transition.brand_name))):I18n.getMsg(n)}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getCircuitUrl",(function(e){var n,i,c,t,o;try{e&&(i=e.workspace_name?e.workspace_name:"",c=e.execution_id?e.execution_id:"",t=e.name?e.name:"",n=e.circuits_org_id?e.circuits_org_id:"",o=e.api_name?e.api_name:"");var r="<a href='javascript:void(0);' class='rcrdLinkInBlack' onclick=\"crmRelatedList.showCircuitPreview('",a=Crm.serviceName,l=document.location.origin;return"undefined"!=typeof CrmPlusLib&&CrmPlusLib.isLoadedInCrmplusFrame&&CrmPlusLib.getFrameOriginForURL&&(l=CrmPlusLib.getFrameOriginForURL()+","+l),r=r+("https://"+RebrandLinkUtil.getProperty("CIRCUITS_URL")+"/worker/"+n+"/home?service="+a+"&frameorigin="+l+"#/"+i+"/instances/"+o+"/executions/"+c)+"','"+$ESAPI.encoder().encodeForJavaScript($ESAPI.encoder().encodeForHTML(t))+"')\";>"+$ESAPI.encoder().encodeForHTML(t)+"</a>"}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getSurveyUrl",(function(e){try{return"<a class='crmLinkColor' target='_blank' href='https://"+RebrandLinkUtil.getProperty("ZSURVEYATTENDURL")+"/zs/"+e.record.id+"'>"+$ESAPI.encoder().encodeForHTML(e.record.name)+"</a>"}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getDateFromAuditedTimeForTimeline",(function(e){try{var n=$L.moment($L.moment(e)._arg.split("T")[0]).toDate(),i=$L.moment(e)._arg.split("T")[0].split("-");const c=crmCalendar.monthNameWithThreeLetter[parseInt(i[1])-1].html+" "+parseInt(i[2])+", "+i[0],t=I18n.getMsg(CrmDateUtils.convertDateToUserPattern(n,"dddd",!0))+" "+c+" "+Lyte.Component.registeredHelpers.getTimeFromAuditedTime(e);return`<span title="${t}">${c}</span>`}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getImpressionDetails",(function(e,n){var i,c;try{var t=e.medium,o=e.impression;if(t&&o){if("Survey"===t)return I18n.getMsg("crm.timeline.journey.survey.impression.new",o);if("Email"===t)return o.includes("Positive")?(i="emoji-smile",c="zcicn-emoji-smile zcicn16 zcicn-green-bg-filled"):o.includes("Negative")?(i="emoji-sad",c="zcicn-emoji-sad zcicn16 zcicn-yellow-bg-filled"):(i="emoji-cool",c="zcicn-emoji-cool zcicn16 zcicn-blue-bg-filled "),n?c:i}}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getLabelForAction",(function(e){try{return actionVsLabel[e]}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getClassForSpecialIcons",(function(e){try{if("cliq_notification".includes(e)||"Cliq".includes(e))return"dF tl_cliqIcon";if("slack_notification".includes(e)||"Slack".includes(e))return"dF tl_nonUtilIcons tl_slackIcon";if("cisco_notification".includes(e)||"CiscoTeams".includes(e))return"dF tl_nonUtilIcons tl_ciscoIcon";if("google_chat_notification".includes(e)||"GoogleChat".includes(e))return"dF tl_nonUtilIcons tl_googleChatIcon";if("microsoft_teams_notification".includes(e)||"MicrosoftTeams".includes(e))return"dF tl_nonUtilIcons tl_microsoftTeamsIcon"}catch(e){murphy.error(e)}}));var timelineIconDetails={general:{updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},changeowner:{icon_class:"zcicn-changeowner",icon_name:"changeowner",icon_space:"mL1 mL2"},survey_sent:{icon_class:"zcicn-survey-responce",icon_name:"survey-responce",background_class:"tl_iconEdited"},general:{icon_class:"zcicn-leads",icon_name:"leads"},unsubscribed:{icon_class:"zcicn-mail-unsubscribed ",icon_name:"mail-unsubscribed"}},emails:{opened:{icon_class:"zcicn-mail-opened",icon_name:"mail-opened",background_class:"tl_iconSignals"},clicked:{icon_class:"zcicn-mail-clicked",icon_name:"mail-clicked",background_class:"tl_iconSignals",icon_space:"mT3 mL2"},bounced:{icon_class:"zcicn-mail-bounce",icon_name:"mail-bounce",background_class:"tl_iconFailed",icon_space:"mT3 mL2"},open:{icon_class:"zcicn-mail-opened",icon_name:"mail-opened",background_class:"tl_iconSignals"},click:{icon_class:"zcicn-mail-clicked",icon_name:"mail-clicked",background_class:"tl_iconSignals",icon_space:"mT3 mL2"},bounce:{icon_class:"zcicn-mail-bounce",icon_name:"mail-bounce",background_class:"tl_iconFailed",icon_space:"mT3 mL2"},received:{icon_class:"zcicn-mail-received",icon_name:"mail-received",background_class:"tl_iconSignals",icon_space:"mT3 mL1"},sent:{icon_class:"zcicn-mail-sent zcicn-mail-sent-solid",icon_name:"mail-sent",background_class:"tl_iconTouch",icon_space:"mT4 mL1"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},email_notification_sent:{icon_class:"zcicn-mail-sent zcicn-mail-sent-solid",icon_name:"mail-sent",background_class:"tl_iconTouch",icon_space:"mT4 mL1"},consent_mail_sent:{icon_class:"zcicn-mail-sent zcicn-mail-sent-solid",icon_name:"mail-sent",background_class:"tl_iconTouch",icon_space:"mT4 mL1"},general:{icon_class:"zcicn-mail-topband",icon_name:"mail",background_class:"tl_iconEdited",icon_space:"mT1"}},email:{open:{icon_class:"zcicn-mail-opened",icon_name:"mail-opened",background_class:"tl_iconSignals"},click:{icon_class:"zcicn-mail-clicked",icon_name:"mail-clicked",background_class:"tl_iconSignals",icon_space:"mT3 mL2"},bounce:{icon_class:"zcicn-mail-bounce",icon_name:"mail-bounce",background_class:"tl_iconFailed",icon_space:"mT3 mL2"},received:{icon_class:"zcicn-mail-received",icon_name:"mail-received",background_class:"tl_iconSignals",icon_space:"mT3 mL1"},sent:{icon_class:"zcicn-mail-sent zcicn16",icon_name:"mail-sent",background_class:"tl_iconTouch",icon_space:"mT4 mL1"},general:{icon_class:"zcicn-mail-topband",icon_name:"mail",background_class:"tl_iconEdited",icon_space:"mT1"}},calls:{received:{icon_class:"zcicn-call-incoming zcicn-color-plain-fff",icon_name:"call-incoming",background_class:"tl_iconSignals"},dialled:{icon_class:"zcicn-call-outgoing zcicn-color-plain-fff",icon_name:"call-outgoing",background_class:"tl_iconTouch"},"attended dialled":{icon_class:"zcicn-call-outgoing zcicn-color-plain-fff",icon_name:"call-outgoing",background_class:"tl_iconTouch"},"unattended dialled":{icon_class:"zcicn-call-outgoing zcicn-color-plain-fff",icon_name:"call-outgoing",background_class:"tl_iconTouch"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},missed:{icon_class:"zcicn-call-missed zcicn-color-plain-fff",icon_name:"call-missed",background_class:"tl_iconFailed"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},general:{icon_class:"zcicn-calls zcicn-color-plain-fff",icon_name:"calls",background_class:"tl_iconTouch"}},call:{received:{icon_class:"zcicn-call-incoming zcicn-color-plain-fff",icon_name:"call-incoming",background_class:"tl_iconSignals"},attended:{icon_class:"zcicn-call-outgoing zcicn-color-plain-fff",icon_name:"call-outgoing",background_class:"tl_iconTouch"},unattended:{icon_class:"zcicn-call-outgoing zcicn-color-plain-fff",icon_name:"call-outgoing",background_class:"tl_iconTouch"},missed:{icon_class:"zcicn-call-missed zcicn-color-plain-fff",icon_name:"call-missed",background_class:"tl_iconFailed"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},general:{icon_class:"zcicn-calls zcicn-color-plain-fff",icon_name:"calls",background_class:"tl_iconTouch"}},telephony:{received:{icon_class:"zcicn-call-incoming zcicn-color-plain-fff",icon_name:"call-incoming",background_class:"tl_iconSignals"},attended:{icon_class:"zcicn-call-outgoing zcicn-color-plain-fff",icon_name:"call-outgoing",background_class:"tl_iconTouch"},unattended:{icon_class:"zcicn-call-outgoing zcicn-color-plain-fff",icon_name:"call-outgoing",background_class:"tl_iconTouch"},missed:{icon_class:"zcicn-call-missed zcicn-color-plain-fff",icon_name:"call-missed",background_class:"tl_iconFailed"},general:{icon_class:"zcicn-calls zcicn-color-plain-fff",icon_name:"calls",background_class:"tl_iconTouch"}},social:{facebook:{icon_class:"zcicn-social-facebook",icon_name:"social-facebook"},twitter:{icon_class:"zcicn-social-twiter",icon_name:"social-twiter",icon_space:"mT1 mL1"}},salesiq:{pagevisit:{icon_class:"zcicn-visits",icon_name:"visits",background_class:"tl_iconSignals",icon_space:"mT2 mL2"},general:{icon_class:"zcicn-chat-received",icon_name:"chat-received",background_class:"tl_iconSignals",icon_space:"mL2"}},telephony:{general:{icon_class:"zcicn-chat-missed zcicn16",icon_name:"chat-missed",background_class:"tl_iconFailed",icon_space:"mL2"}},missed:{general:{icon_class:"zcicn-chat-missed zcicn16",icon_name:"chat-missed",background_class:"tl_iconFailed",icon_space:"mL2"}},visits:{missed:{icon_class:"zcicn-chat-missed zcicn16",icon_name:"chat-missed",background_class:"tl_iconFailed",icon_space:"mL2"},chat_missed:{icon_class:"zcicn-chat-missed zcicn16",icon_name:"chat-missed",background_class:"tl_iconFailed",icon_space:"mL2"},general:{icon_class:"zcicn-visits",icon_name:"visits"}},survey:{general:{icon_class:"zcicn-survey-responce",icon_name:"survey-responce",background_class:"tl_iconEdited"}},desk:{added:{icon_class:"zcicn-ticket-new",icon_name:"ticket-new",icon_space:"mT2 mL2"},responded:{icon_class:"zcicn-ticket-new",icon_name:"ticket-new",icon_space:"mT2 mL2"},overdue:{icon_class:"zcicn-ticket-overdue",icon_name:"ticket-overdue"},commented:{icon_class:"zcicn-ticket-comments",icon_name:"ticket-comments"},rating:{icon_class:"zcicn-ticket-rating",icon_name:"ticket-rating",icon_space:"mT1 mL3"}},campaign:{clicked:{icon_class:"zcicn-campaign-clicked",icon_name:"campaign-clicked"},bounced:{icon_class:"zcicn-campaign-bounced",icon_name:"campaign-bounced"},general:{icon_class:"zcicn-campaign-added",icon_name:"campaign-added"}},campaigns:{clicked:{icon_class:"zcicn-campaign-clicked",icon_name:"campaign-clicked"},bounced:{icon_class:"zcicn-campaign-bounced",icon_name:"campaign-bounced"},general:{icon_class:"zcicn-campaign-added",icon_name:"campaign-added"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"}},notes:{general:{icon_class:"zcicn-notes-added",icon_name:"notes-added",icon_space:"mL1"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},changeOwner:{icon_class:"zcicn-changeowner",icon_name:"changeowner",icon_space:"mL1 mL2"}},tasks:{general:{icon_class:"zcicn-tasks",icon_name:"tasks",icon_space:"mL2"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},changeOwner:{icon_class:"zcicn-changeowner",icon_name:"changeowner",icon_space:"mL1 mL2"}},events:{general:{icon_class:"zcicn-events",icon_name:"events",icon_space:"mL1"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},changeOwner:{icon_class:"zcicn-changeowner",icon_name:"changeowner",icon_space:"mL1 mL2"}},meetings:{general:{icon_class:"zcicn-events",icon_name:"events",icon_space:"mL1"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},changeOwner:{icon_class:"zcicn-changeowner",icon_name:"changeowner",icon_space:"mL1 mL2"}},deals:{general:{icon_class:"zcicn-potentials",icon_name:"potentials"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},changeOwner:{icon_class:"zcicn-changeowner",icon_name:"changeowner",icon_space:"mL1 mL2"}},accounts:{general:{icon_class:"zcicn-accounts",icon_name:"accounts"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"},changeOwner:{icon_class:"zcicn-changeowner",icon_name:"changeowner",icon_space:"mL1 mL2"}},attachments:{general:{icon_class:"zcicn-attachment  crmBaseIcon",icon_name:"attachment"}},contacts:{general:{icon_class:"zcicn-contacts",icon_name:"contacts"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},products:{general:{icon_class:"zcicn-products",icon_name:"products"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},bundles__s:{general:{icon_class:"zcicn-bundles",icon_name:"bundles"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},quotes:{general:{icon_class:"zcicn-quotes",icon_name:"quotes"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},sales_orders:{general:{icon_class:"zcicn-salesorders",icon_name:"salesorders"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},purchase_orders:{general:{icon_class:"zcicn-purchaseorders",icon_name:"purchaseorders"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},vendors:{general:{icon_class:"zcicn-vendors",icon_name:"vendors"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},price_books:{general:{icon_class:"zcicn-pricebooks",icon_name:"pricebooks"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},invoices:{general:{icon_class:"zcicn-invoices",icon_name:"invoices"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},cases:{general:{icon_class:"zcicn-cases",icon_name:"cases"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},solutions:{general:{icon_class:"zcicn-solutions",icon_name:"solutions"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},appointments__s:{general:{icon_class:"zcicn-appointments",icon_name:"appointments"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},services__s:{general:{icon_class:"zcicn-services",icon_name:"services"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},custom:{general:{icon_class:"zcicn-custom",icon_name:"custom"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},team:{general:{icon_class:"zcicn-teammodule",icon_name:"teammodule"},updated:{icon_class:"zcicn-edit-solid zcicn16",icon_name:"edit-solid",background_class:"tl_iconEdited"},deleted:{icon_class:"zcicn-delete-line",icon_name:"delete-line",icon_space:"mL2"}},getFontColour:function(e){try{return(299*parseInt(e.substring(0,2),16)+587*parseInt(e.substring(2,4),16)+114*parseInt(e.substring(4,6),16))/1e3<155?"white":"black"}catch(e){murphy.error(e)}}};Lyte.Component.registerHelper("getIconDetailsForUpcomingActions",(function(e,n,i,c){var t,o,r,a,l=e.type,s={};const d={task:timelineIconDetails.tasks.general,field_update:timelineIconDetails.general.updated,webhook:timelineIconDetails.general.general,email_alert:timelineIconDetails.emails.sent,deluge:timelineIconDetails.general.general,assign_owner:timelineIconDetails.general.updated,Circuits:timelineIconDetails.general.general,AddTags:timelineIconDetails.general.updated,RemoveTags:timelineIconDetails.general.updated,tags_overwritten:timelineIconDetails.general.updated};try{return(s=l&&d[l]||timelineIconDetails.general.general)&&(t=s.icon_name,o=s.background_class?s.background_class:o,r=s.icon_space,a=s.icon_class),n?t:i?o:c?r:a}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getPathFinderUrl",(function(e){try{return"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-route='crm.settings.section.path-finder.pathfinder-details.view-touchpoints' lt-prop-dp='[\""+e.automation_details.rule.id+"\"]'> "+$ESAPI.encoder().encodeForHTML(e.automation_details.rule.name)+"</link-to>"}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getBoldedValue",(function(e){try{return"<span class='crm-font-bold'>"+$ESAPI.encoder().encodeForHTML(e)+"</span>"}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getCommandCenterJourneyLink",(function(e){try{return e.automation_details.command_center&&"abm"===e.automation_details.command_center.category?"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-class='TimeLineHighTxt' lt-prop-route='crm.abm-edit-orchestration' lt-prop-dp='[\""+e.automation_details.rule.id+"\"]'> "+$ESAPI.encoder().encodeForHTML(e.automation_details.rule.name)+"</link-to>":"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-class='TimeLineHighTxt' lt-prop-route='crm.settings.section.orchestration.edit-orchestration' lt-prop-dp='[\""+e.automation_details.rule.id+"\"]'> "+$ESAPI.encoder().encodeForHTML(e.automation_details.rule.name)+"</link-to>"}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getCadencesLink",(function(e){try{return"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-class='TimeLineHighTxt' lt-prop-route='crm.settings.section.cadences.edit-series-config' lt-prop-dp='[\""+e.automation_details.rule.id+"\"]'> "+$ESAPI.encoder().encodeForHTML(e.automation_details.rule.name)+"</link-to>"}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getActionLink",(function(e,n,i,c){var t="",o="";try{return i&&"null"!==i&&i.length>0&&(t="lt-prop-dp='[\""+i+"\"]'"),c&&"null"!==c&&(o='lt-prop-qp={"'+c+'":"'+e.id+'"}'),"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-class='TimeLineHighTxt' lt-prop-route='"+n+"' "+t+" "+o+">"+$ESAPI.encoder().encodeForHTML(e.name)+"</link-to>"}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getAssignmentRuleLink",(function(e,n,i,c,t){var o="",r="";return null!=i&&i.length>0&&(o="lt-prop-dp='[\""+i+"\"]'"),null!=c&&(r='lt-prop-qp={"'+c+'":"'+e.id+'","action":"'+t+'"}'),"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-class='TimeLineHighTxt' lt-prop-route='"+n+"' "+o+" "+r+">"+$ESAPI.encoder().encodeForHTML(e.name)+"</link-to>"})),Lyte.Component.registerHelper("showNewPortalTimeLine",(function(e){return null!=e&&null!=e.portals&&null!=e.portals.role&&null!=e.portals.role.name})),Lyte.Component.registerHelper("getContentBoxColor",(function(e){try{var n=e.type,i=e.action;return"Events"===e.medium&&e.medium_details&&(i=e.medium_details.status),journeyContainerColorMap[n]?journeyContainerColorMap[n][i]?journeyContainerColorMap[n][i]:journeyContainerColorMap[n].default:journeyContainerColorMap.default}catch(e){murphy.error(e)}})),Lyte.Component.registerHelper("getConvertedRecordLogFooterContent",(function(e){var n=Lyte.Component.registeredHelpers;if(-1===["Accounts","Contacts","Deals"].indexOf(e.record.module.api_name)){var i="<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-route='crm.tab.module.entity.detail' lt-prop-dp='[\""+$ESAPI.encoder().encodeForHTML(n.getModuleNameByApiName(e.automation_details.conversion.module.api_name))+'","'+e.automation_details.conversion.record.id+"\"]'>"+$ESAPI.encoder().encodeForHTML(e.automation_details.conversion.record.name)+"</link-to>";return I18n.getMsg("crm.label.simply.by")+" "+I18n.getMsg("crm.label.pulse.converting")+" "+I18n.getMsg("crm.label.general.small.the")+" "+I18n.getMsg(n.getModuleLabelByApiName(e.automation_details.conversion.module.api_name,!0))+" "+i}if(e.automation_details&&e.automation_details.rule&&e.automation_details.rule.processId&&e.automation_details.rule.sub_process_id){var c="<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-class='TimeLineHighTxt' lt-prop-route='crm.settings.section.orchestration.edit-orchestration' lt-prop-dp='[\""+e.automation_details.rule.processId+"\"]'> "+$ESAPI.encoder().encodeForHTML(e.automation_details.rule.process_name)+"</link-to>";return I18n.getMsg("crm.timeline.orchestration.through.state",[e.automation_details.rule.sub_process_name])+" "+c}return"workflow"!==e.source&&"blueprint"!==e.source&&"kiosk"!==e.source?I18n.getMsg("crm.label.simply.by")+" "+n.getUserNameWithBusinessCard(e.done_by,"tl_canvas_ownerField wB")+" "+n.getDateFromAuditedTimeForTimeline(e.audited_time):""})),Lyte.Component.registerHelper("getConvertedRecordLogContent",(function(e,n){var i=Lyte.Component.registeredHelpers,c=$ESAPI.encoder().encodeForHTML(I18n.getMsg(i.getModuleLabelByApiName(e.record.module.api_name,!0)));if(-1!==["Accounts","Contacts","Deals"].indexOf(e.record.module.api_name)){var t=n?"<span class='crm-font-bold'>"+e.automation_details.conversion.record.name+"</span>":"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-route='crm.tab.module.entity.detail' lt-prop-dp='[\""+$ESAPI.encoder().encodeForHTML(i.getModuleNameByApiName(e.automation_details.conversion.module.api_name))+'","'+e.automation_details.conversion.record.id+"\"]'>"+$ESAPI.encoder().encodeForHTML(e.automation_details.conversion.record.name)+"</link-to>";return c+" "+("updated"===e.action?I18n.getMsg("updated"):I18n.getMsg("crm.label.general.small.created"))+" "+I18n.getMsg("crm.label.simply.by")+" "+I18n.getMsg("crm.label.pulse.converting")+" "+I18n.getMsg("crm.label.general.small.the")+" "+$ESAPI.encoder().encodeForHTML(I18n.getMsg(i.getModuleLabelByApiName(e.automation_details.conversion.module.api_name,!0)))+" "+t}return I18n.getMsg("Invoices"===e.record.module.api_name?"crm.label.general.caps.an":"crm.label.general.caps.a")+" "+c+" "+I18n.getMsg("crm.label.was.created")})),Lyte.Component.registerHelper("getCalendarBookingRouter",(function(){return isnewCalendarBookingEnabled?"crm.settings.section.calendar-booking.view-calendar-booking":"crm.settings.section.booking.edit-booking"})),Lyte.Component.registerHelper("getWhatsAppOrSMSNotificationContent",(function(e,n){var i,c,t=e.msgtype,o=I18n.getMsg("crm.workflow.actions.label."+t);return i="SMS"===o?"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-route='crm.settings.section.workflow-message-notifications.message-notifications.view-message-notification' lt-prop-dp='[\""+e.notification.id+"\"]'>"+$ESAPI.encoder().encodeForHTML(e.notification.name)+"</link-to>":"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-route='crm.settings.section.workflow-whatsapp-notifications.message-notifications.view-message-notification' lt-prop-dp='[\""+e.notification.id+"\"]'>"+$ESAPI.encoder().encodeForHTML(e.notification.name)+"</link-to>","workflow_rule"===n||"blueprint"===n?(c="SMS"===o?"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-route='crm.settings.section.workflow-message-notifications.message-templates.view-message-template' lt-prop-dp='[\""+e.template.id+"\"]'>"+$ESAPI.encoder().encodeForHTML(e.template.name)+"</link-to>":"<link-to lt-prop-target='_blank' lt-prop-rel='noopener noreferrer' lt-prop-route='crm.settings.section.workflow-whatsapp-notifications.message-templates.view-message-template' lt-prop-dp='[\""+e.template.id+"\"]'>"+$ESAPI.encoder().encodeForHTML(e.template.name)+"</link-to>",I18n.getMsg("crm.messagenotification.sms.timeline.message",[o,c,i])):I18n.getMsg("crm.orchestration.timeline.messagenotification",[o,i])})),Lyte.Component.registerHelper("getEncodedNoteContentExceptAnchorTag",(function(e){let n="",i=(e||"").match(/(<a[^>]*>.*?<\/a>)|<[^>]+>|[^<>]+/g);if(i){for(let e of i)e.startsWith("<a")?n+=e:n+=$ESAPI.encoder().encodeForHTML(e);return n}return e||""}));var timelineHelper={expandJsonObject:function(e){try{return Object.keys(e).forEach((function(n){var i=n.split(/,\s?/),c=e[n];delete e[n],i.forEach((function(n){e[n]=c}))})),e}catch(e){murphy.error(e)}},isCustomModule:function(e){try{const n=Object.entries(Crm.moduleInfo).find((n=>n[1].apiname.toLowerCase()===e));if(void 0===n)return!1;const i=n[0];return new RegExp("^CustomModule(0|[1-9]|[1-9][0-9])$").test(i)}catch(e){murphy.error(e)}},isTeamModule:function(e){try{const n=Object.entries(Crm.moduleInfo).find((n=>n[1].apiname.toLowerCase()===e));if(void 0===n)return!1;if(n[1])return timelineHelper.isCustomModule(e)&&1===n[1].accessType}catch(e){murphy.error(e)}}},journeysLiteral={Emails:{sent:"crm.emailstats.emailsent",received:"crm.emailstats.emailreceived",opened:"crm.orch.trigger.parameter.mail_opened",clicked:"crm.orch.trigger.parameter.mail_clicked",bounced:"crm.orch.trigger.parameter.mail_bounced"},Calls:{dialled:"crm.timeline.journey.call.dialled",missed:"crm.timeline.journey.call.missed",received:"crm.timeline.journey.call.received",scheduled:"crm.timeline.journey.call.scheduled"},Survey:{sent:"crm.orch.trigger.parameter.survey_request_sent",responded:"crm.timeline.journey.survey.responded",visited:"crm.timeline.journey.survey.visited"},Desk:{added:"crm.timeline.journey.desk.added",commented:"crm.timeline.journey.desk.comment",responded:"crm.timeline.journey.desk.respond"},Webinar:{invite_sent:"crm.orch.trigger.parameter.webinar_invitation_sent",registered:"crm.timeline.journey.webinar.registered",attended:"crm.timeline.journey.webinar.attended"},Backstage:{invite_sent:"crm.timeline.backstage.invitation.sent",purchased:"crm.timeline.journey.backstage.purchased",checkedin:"crm.timeline.journey.backstage.checkedin",cancelled:"crm.timeline.journey.backstage.cancelled"},Portals:{invite_accepted:"crm.timeline.journey.portal.invite.accept",invite_sent:"crm.timeline.journey.portal.invite.sent",reinvited:"crm.timeline.journey.portal.invite.sent",invite_resent:"crm.timeline.journey.portal.invite.resent"},Twitter:{mentioned:"crm.timeline.journey.twitter.post",replied:"crm.timeline.journey.twitter.reply",messaged:"crm.timeline.journey.twitter.message.new"},Facebook:{commented:"crm.timeline.journey.facebook.comment",posted:"crm.timeline.journey.facebook.post",liked:"crm.timeline.journey.facebook.like",messaged:"crm.timeline.journey.facebook.message.new"},Visits:{added:"crm.timeline.journey.visit.added",chat_missed:"zoho.livedesk.missedchat"},Campaigns:{added:"crm.timeline.journey.campaign.added",removed:"crm.timeline.journey.campaign.removed"},Events:{responded:"crm.timeline.journeys.event.response",invite_sent:"crm.timeline.journeys.event.meeting.invite.sent"}},journeyContainerColorMap={customer_signal:timelineHelper.expandJsonObject({default:"jr_greenSignal","bounced, missed, chat_missed, declined":"jr_redSignal"}),follow_up:timelineHelper.expandJsonObject({default:"jr_blueSignal"}),default:"jr_blueSignal"},actionVsLabel={added:"added",updated:"updated",deleted:"Deleted",restored:"Restored"};
