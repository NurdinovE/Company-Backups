Lyte.Component.register("crm-motivator-notification-popup",{_template:'<template tag-name="crm-motivator-notification-popup"> <lyte-popover lt-prop-origin-elem="{{motivatorIconId}}" lt-prop-wrapper-class="crm_np_card" lt-prop-duration="{{duration}}" lt-prop-width="380px" lt-prop-window-spacing="{&quot;top&quot;:&quot;30&quot;,&quot;left&quot;:&quot;30&quot;,&quot;bottom&quot;:&quot;30&quot;,&quot;right&quot;:&quot;30&quot;}" lt-prop-show="{{showPopUp}}" lt-prop-animation="zoom" lt-prop-freeze="false" on-close="{{method(\'onClosePopUp\')}}"> <template is="registerYield" yield-name="popover"> <lyte-popover-content class="p0"> <template is="for" items="{{displayNotification}}" item="notification" index="notificationIndex"> <motivator-notification-card record-id="{{notification.id}}" record-index="{{notificationIndex}}" notification="{{notification}}" from-source="crm" id="gs_notification_card_{{notification.id}}" class="gs_notifi_card bR6 pR dB cP "></motivator-notification-card> </template> </lyte-popover-content> </template> </lyte-popover> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["notifications","showPopUp","duration","displayNotification","jobId","motivatorIconId"],data:function(){return{notifications:Lyte.attr("array",{default:[]}),showPopUp:Lyte.attr("boolean",{default:!1}),duration:Lyte.attr("number",{default:400}),displayNotification:Lyte.attr("array",{default:[]}),jobId:Lyte.attr("number"),motivatorIconId:Lyte.attr("string")}},didConnect:function(){var t=this,o=setTimeout((function(){t.setData("duration",800),t.setData("showPopUp",!1)}),9e3);t.setData("jobId",o),this.setData("motivatorIconId","#salesmotivatornotification")},notificationsObserver:function(t){var o=this;if(this.getData("showPopUp")){var i=$L("motivator-notification-card")[0];if(i){var a=i.getData("moreMsgCount");a=a?a+1:1,i.setData("moreMsgCount",a)}}else if(t.insertedItems){Lyte.arrayUtils(this.getData("displayNotification"),"push",t.insertedItems[0]);var e=setTimeout((function(){o.setData("duration",800),o.setData("showPopUp",!1)}),8e3);o.setData("jobId",e),o.setData("showPopUp",!0)}}.observes("notifications.[]"),methods:{onClosePopUp:function(){var t=$L("#motivatorBlinkIcon");t.removeClass("motivator_icon_blink"),this.setData("duration",400),this.setData("displayNotification",[]),clearTimeout(this.getData("jobId")),this.setData("showPopUp",!1),t.addClass("motivator_icon_blink")}}});
