var timer,$zoho=$zoho||{salesiq:{values:{},ready:function(){}}},PremiumChat={};function closeDashletDiv(e){if("sheetTips"===e?crmui.hidePopup(e):"loadingDiv"===e?crmui.hidePopup("loadingDiv",!1,(function(){$("#loadingDiv").addClass("roundedCornerPop").removeClass("ppTop")})):(crmui.modalZIndex("nonLyte",$L("#"+e)[0],"close"),getObj(e).style.display="none"),getObj("MainMatrix")){$(getObj(e)).empty();for(var t=$("#MainMatrix").sortable("toArray").toString().split(","),r=0;r<t.length;r++)t[r]=t[r].replace(/home_/g,""),getObj("dashboardContent_"+t[r])&&(getObj("dashboardContent_"+t[r]).style.display="block")}document.getElementById("FreezeLayer")&&document.body.removeChild(document.getElementById("FreezeLayer"))}function JSEvalScript(e,t){EvalInnerScript(e,t)}function manipulateScriptElems(e){for(var t=e.getElementsByTagName("SCRIPT"),r=0;r<t.length;r++){var i=document.createElement("SCRIPT");i.type="text/javascript",i.language="javascript",""!=t[r].src&&(i.src=t[r].src),i.text=t[r].text,void 0===document.getElementsByTagName("HEAD")[0]?document.createElement("HEAD").appendChild(i):document.getElementsByTagName("HEAD")[0].appendChild(i)}}function ajaxGSearch(e){$(".searchLoadingIcon").hide(),$("#gsearchTextBox").blur(),e=e||"searchStr";var t=$("#"+e)[0];t.value=trimBoth(t.value);var r=t.value.replace(/[A-Z a-z 0-9]*/,"");if(!(t.value.length>2||r))return alert(I18n.getMsg("crm.search.letters.check")),t.focus(),!1;crmNavig.removeFeaturCacheObj("gsearch");var n=document.gsearchForm;"gsearchTextBox"===e&&(n=document.searchForm);var s=n.sModule.length,a="";if(s>0){for(i=1;i<s;i++){var l=n.sModule[i],o=l.checked;if("AllEntities"==l.value&&o){a="AllEntities";break}o&&(a=0==a.length?l.value:a+","+l.value)}a||(a="AllEntities")}var d={searchword:t.value};""!=a&&(d.sModules=a),"gsearchTextBox"!==e&&(d.userOption=$("input[name=userOption]").is(":checked"));var c=$("#change_menu").find(".sel").data("params");if("global-search"===Lyte.Router.getRouteInstance().routeName){var u=Lyte.Router.getRouteInstance().getQueryParams();if(u.searchword===d.searchword&&u.sModules===d.sModules&&(null!=u.userOption&&u.userOption===d.userOption||null==u.userOption&&!d.userOption))Lyte.Router.getRouteInstance().refresh();else Lyte.Router.getRouteInstance().transitionTo("crm.global-search",d).data={selectedmodule:c?c.module:"Home"}}else{Lyte.Router.getRouteInstance().transitionTo("crm.global-search",d).data={selectedmodule:c?c.module:"Home"}}return $L(".primarySearchList").hide(),$L(".topbandSearchInpt").addClass("ui-corner-all"),!1}function sendQuickMail(e,t){var r=document.getElementsByTagName("crm-list-view");if(r.length)var i=(r=r[0]).getData("per_page"),n=m=r.getData("page"),s=i*(n-1)+1,a=n*i,l=r.getData("cvId"),o=r.getData("module"),d=r.getData("selectedIds").join(";");else{s=crmListView.getObject().fromIndex,a=crmListView.getObject().toIndex;var c,u,m=crmListView.getObject().currentOption;l=customViewObject.cvId;if(t&&"undefined"!=typeof CrmCampaignInteg&&CrmCampaignInteg.CampaignEmailObject&&CrmCampaignInteg.CampaignEmailObject.isCampaignEmail)o=CrmCampaignInteg.CampaignEmailObject.frommodule,d=CrmCampaignInteg.CampaignEmailObject.idList,CrmCampaignInteg.CampaignEmailObject.fromRelatedListNormal?(c="campRelatedListNormal",Crm.trackSpotLightAction("Mail Sent From RL",h)):!0===CrmCampaignInteg.CampaignEmailObject.isFromAddToCampaign&&"relatedList"===CrmCampaignInteg.CampaignEmailObject.from?c="AddToCampaignRel":CrmCampaignInteg.CampaignEmailObject.isFromAddToCampaignNew&&"relatedList"==CrmCampaignInteg.CampaignEmailObject.from?c="AddToCampaignNewFromCampMod":"add-to-campaigns"===Lyte.Router.getRouteInstance().routeName&&(c="AddToCampaignTool");else if(void 0===crmListView.getObject()||validationUtils.isEmpty(crmListView.getObject()))!crmRelatedList.CampaignEmailObj||validationUtils.isEmpty(crmRelatedList.CampaignEmailObj)||Crm.userDetails.isRelatedListLyteEnabled?(o=getObj("module").value,d=getElemById("idlist")?getElemById("idlist").value:getElemById("id").value):(o=crmRelatedList.CampaignEmailObj.emailModule,d=crmRelatedList.CampaignEmailObj.selectedIds);else if(o=crmListView.getObject().module,crmListView.getObject().selectedIds){d="";for(var p=0;p<crmListView.getObject().selectedIds.length;p++)d+=crmListView.getObject().selectedIds[p]+";"}}var g=getObj("emailTemplateId").value,f=getObj("showcvdetails");if(getObj("TransferWizardForm")&&(f=getObj("TransferWizardForm")),!commonUtils.emptyCheck("emailTemplateId","crm.workflow.alert.emailTemplate"))return!1;if(""==$("#emailTemplateId").siblings(".templateName").find("a").html())return alert(I18n.getMsg("crm.alert.template.notempty")),!1;var h=csrfParamName+"="+encodeURIComponent(csrfToken),v=getElemById("mode"),b=!(!customViewObject||"forecast"!==customViewObject.from);if(!b&&(null==v||"reminderToOwner"!=v.value)){if(!commonUtils.emptyCheck("fromAddress","crm.template.fromaddress.warn"))return!1;if(h+="&fromAddress="+$("#fromAddress").find("option:selected").val(),h+="&fromType="+$("#fromType").val(),h+="&replyToAddress="+$("#replyToAddress").find("option:selected").val(),h+="&replyType="+$("#replyType").val(),$("#crmMailServerType").length>0){h+="&mailServerType=",$("#crmMailServerType").is(":checked")?h+=$("#crmMailServerType").val():h+=$("#smtpMailServerType").val();var C=$("#smtpFromAddress");C.length>0&&""!==C.val()&&(h+="&smtpFromAddress="+C.val());var y=$("#smtpReplytoAddress");y.length>0&&""!==y.val()&&(h+="&smtpReplytoAddress="+y.val())}}b&&(s=1,a=100,m=100);var H=Crm.getCrmBasePath()+"/mailer/TemplateSendMail.do?step=sendMail&throughajax=yes&templateId="+g+"&cvid="+l+"&start_index="+s+"&end_index="+a+"&rangeValue="+m;if(v&&!b){var I=v.value;"reminderToOwner"==I&&(H+="&mode="+I,d=getElemById("idlist")?getElemById("idlist").value:getElemById("id").value,o=getElemById("module").value)}if(b&&(H+="&mode=reminderToOwner",";"===d.charAt(d.length-1)&&(d=d.substring(0,d.length-1))),H+=e?"&module="+encodeURIComponent(o)+"&consent=true&consent_status="+customViewObject.privacyDetails.status:"&module="+encodeURIComponent(o),t&&"undefined"!=typeof CrmCampaignInteg&&(CrmCampaignInteg.CampaignEmailObject.fromCampaignAddMemberListView||CrmCampaignInteg.CampaignEmailObject.isFromAddToCampaign||CrmCampaignInteg.CampaignEmailObject.isFromAddToCampaignNew)&&(u="campaignIntegMail",H+="&mode=campaignIntegMail&campaignId="+encodeURIComponent(CrmCampaignInteg.CampaignEmailObject.emailCampaignId),CrmCampaignInteg.CampaignEmailObject.memberStatus&&""!=CrmCampaignInteg.CampaignEmailObject.memberStatus&&(H+="&memberStatus="+encodeURIComponent(CrmCampaignInteg.CampaignEmailObject.memberStatus)),CrmCampaignInteg.CampaignEmailObject.isFromAddToCampaign?crmListView.trackAddToCampaignSave(CrmCampaignInteg.CampaignEmailObject.campaignIntegType):crmListView.trackInviteMail(CrmCampaignInteg.CampaignEmailObject.campaignIntegType)),crmui.modalZIndex("nonLyte",$L("#massMailstatsPop")[0],"close"),$("#massMailstatsPop").hide(),crmui.showPopup("mass_sending_mail"),$("html,body").css("overflow","hidden"),b||null!=f&&"add-to-campaigns"!==Lyte.Router.getRouteInstance().routeName){P=0,x=0;var E,L,T,D,S,w,M,_="",k=(U=0,F=0,d.split(";").length);H+="&idlist="+d,$.ajax({type:"POST",dataType:"json",url:H,data:h,success:function(t){var r=t;if(null==r.isSpam&&(P+=r.totalCount,x+=r.sentMailCount,_=r.smtpError,r.optoutCount&&(U+=r.optoutCount),r.unconfOwnerCount&&(F+=r.unconfOwnerCount),null==A&&r.blockedEmailsList.length>=1?A=r.blockedEmailsList.join():r.blockedEmailsList.length>=1&&(A=A+","+r.blockedEmailsList.join()),null==O&&r.dmarcRejectedEmailsList.length>=1?O=r.dmarcRejectedEmailsList.join():r.dmarcRejectedEmailsList.length>=1&&(O=O+","+r.dmarcRejectedEmailsList.join()),null==R&&r.smtpRejectedEmailsList.length>=1?R=r.smtpRejectedEmailsList.join():r.smtpRejectedEmailsList.length>=1&&(R=R+","+r.smtpRejectedEmailsList.join()),null==N&&r.invalidMailsList.length>=1?N=r.invalidMailsList.join():r.invalidMailsList.length>=1&&(N=N+","+r.invalidMailsList.join()),null==E&&r.subLengthExceedMailList.length>=1?E=r.subLengthExceedMailList.join():r.subLengthExceedMailList.length>=1&&(E=E+","+r.subLengthExceedMailList.join()),null==L&&r.consentMailList.length>=1?L=r.consentMailList.join():r.consentMailList.length>=1&&(L=L+","+r.consentMailList.join()),null==T&&r.attachmentExceedMailList.length>=1?T=r.attachmentExceedMailList.join():r.attachmentExceedMailList.length>=1&&(T=T+","+r.attachmentExceedMailList.join()),null==D&&r.zsurveyRejectedEmails.length>=1?D=r.zsurveyRejectedEmails.join():r.zsurveyRejectedEmails.length>=1&&(D=D+","+r.zsurveyRejectedEmails.join()),null==S&&r.campaignExistingMemberEmails.length>=1?S=r.campaignExistingMemberEmails.join():r.campaignExistingMemberEmails.length>=1&&(S=S+","+r.campaignExistingMemberEmails.join()),!w&&r.lockedRecordMails.length>=1?w=r.lockedRecordMails.join():r.lockedRecordMails.length>=1&&(w=w+","+r.lockedRecordMails.join()),!M&&r.lockedSurveyMails.length>=1?M=r.lockedSurveyMails.join():r.lockedSurveyMails.length>=1&&(M=M+","+r.lockedSurveyMails.join())),0!=d.length&&0==r.countExceded&&null==r.isSpam)sendMassMail(H,h,d.join(";"),P,x,A,O,N,k,o,R,_,U,F,E,L,T,D,e,S,c,u,w,M);else{var i={};i.smtpRejectedEmailsList=R&&""!==R&&0!==R?R:"undefined",i.blockedEmailsList=A&&""!==A&&0!==A?A:"undefined",i.invalidMailsList=N&&""!==N&&0!==N?N:"undefined",i.subLengthExceedMailList=E&&""!==E&&0!==E?E:"undefined",i.consentMailList=L&&""!==L&&0!==E?L:"undefined",i.attachmentExceedMailList=T&&""!==T&&0!==T?T:"undefined",i.zsurveyRejectedEmails=D&&""!==D&&0!==D?D:"undefined",i.campaignExistingMemberEmails=S&&""!==S&&0!==S?S:"undefined",i.dmarcRejectedEmailsList=O&&""!==O&&0!==O?O:"undefined",i.lockedRecordMails=w&&""!==w&&0!==w?w:"undefined",i.lockedSurveyMails=M&&""!==M&&0!==M?M:"undefined";var n=Crm.getCrmBasePath()+"/ShowTemplates.do?action=MassMail",s="module="+o+"&totalCount="+P+"&sentMailCount="+x+"&optoutCount="+U+"&unconfOwnerCount="+F+"&errorList="+encodeURIComponent(JSON.stringify(i))+"&countExceded="+r.countExceded+"&smtpError="+r.smtpError+"&length="+k+"&isSpam="+r.isSpam;e&&(s+="&consent=true"),c&&(s+="&campaignMailType="+c),u&&(s+="&mode="+u),mR(n,(function(e){var t=renderingUtils.windowHeight,r=$("#massMailstatsResult");$("#prLayer").show(),hide("progressBar"),document.getElementById("loadingDiv").style.display="none",$("#massMailstatsPop").hide(),$("body").append('<div id="massMailstatsResult" class="newPopup w550 topBandPopShadow ppTop p0 " style="z-index:35;"></div>'),r.empty(),document.getElementById("massMailstatsResult").innerHTML=e,r.css("max-height",t-110),$("#massMailstatsResult .massMailoADiv").css("max-height",t-180),crmui.hidePopup("mass_sending_mail",!0),crmui.showPopup("massMailstatsResult");var i=parseInt($(".massMailstatsPop").css("margin-top"))-$("#wmstoolbar").outerHeight()-12;$("#massMailstatsPop").css("margin-top",i),$("html,body").css("overflow","hidden"),renderingUtils.freezeBackground()}),s)}},error:function(){closeMassMail("massMailstatsResult",!1),closeMassMail("mass_sending_mail"),hide("massMailstatsPop"),hide("loadingDiv")}})}else{var R,A,O,N,P=0,x=0,U=0,F=0,B=t?d.split(";").length:crmListView.getObject().selectedIds.length;sendMassMail(H,h,d,P,x,A,O,N,B,o,R,void 0,void 0,void 0,void 0,void 0,void 0,void 0,e,void 0,c,u)}}function sendMassMail(e,t,r,i,n,s,a,l,o,d,c,u,m,p,g,f,h,v,b,C,y,H,I,E){var L=(r=r.split(";")).splice(0,crmConstants.maxRecOperCnt).join(";"),T=e+"&idlist="+L;m||(m=0),p||(p=0),$.ajax({type:"POST",url:T,dataType:"json",data:t,success:function(L){var T=L;if(null==T.isSpam&&(i+=T.totalCount,n+=T.sentMailCount,m+=T.optoutCount,p+=T.unconfOwnerCount,u=T.smtpError,null==c&&T.smtpRejectedEmailsList.length>=1?c=T.smtpRejectedEmailsList.join():T.smtpRejectedEmailsList.length>=1&&(c=c+","+T.smtpRejectedEmailsList.join()),null==s&&T.blockedEmailsList.length>=1?s=T.blockedEmailsList.join():T.blockedEmailsList.length>=1&&(s=s+","+T.blockedEmailsList.join()),null==a&&T.dmarcRejectedEmailsList.length>=1?a=T.dmarcRejectedEmailsList.join():T.dmarcRejectedEmailsList.length>=1&&(a=a+","+T.dmarcRejectedEmailsList.join()),null==l&&T.invalidMailsList.length>=1?l=T.invalidMailsList.join():T.invalidMailsList.length>=1&&(l=l+","+T.invalidMailsList.join()),null==g&&T.subLengthExceedMailList.length>=1?g=T.subLengthExceedMailList.join():T.subLengthExceedMailList.length>=1&&(g=g+","+T.join()),null==f&&T.consentMailList.length>=1?f=T.consentMailList.join():T.consentMailList.length>=1&&(f=f+","+T.consentMailList.join()),null==h&&T.attachmentExceedMailList.length>=1?h=T.attachmentExceedMailList.join():T.attachmentExceedMailList.length>=1&&(h=h+","+T.attachmentExceedMailList.join()),null==v&&T.zsurveyRejectedEmails.length>=1?v=T.zsurveyRejectedEmails.join():T.zsurveyRejectedEmails.length>=1&&(v=v+","+T.zsurveyRejectedEmails.join()),null==C&&T.campaignExistingMemberEmails.length>=1?C=T.campaignExistingMemberEmails.join():T.campaignExistingMemberEmails.length>=1&&(C=C+","+T.campaignExistingMemberEmails.join()),!I&&T.lockedRecordMails.length>=1?I=T.lockedRecordMails.join():T.lockedRecordMails.length>=1&&(I=I+","+T.lockedRecordMails.join()),!E&&T.lockedSurveyMails.length>=1?E=T.lockedSurveyMails.join():T.lockedSurveyMails.length>=1&&(E=E+","+T.lockedSurveyMails.join())),0!=r.length&&0==T.countExceded&&null==T.isSpam)sendMassMail(e,t,r.join(";"),i,n,s,a,l,o,d,c,u,m,p,g,f,h,v,b,C,y,H,I,E);else{var D="false";null!=T.fromTool&&"true"===T.fromTool&&(D="true");var S={};S.smtpRejectedEmailsList=c&&""!==c&&0!==c?c:"undefined",S.blockedEmailsList=s&&""!==s&&0!==s?s:"undefined",S.invalidMailsList=l&&""!==l&&0!==l?l:"undefined",S.subLengthExceedMailList=g&&""!==g&&0!==g?g:"undefined",S.consentMailList=f&&""!==f&&0!==g?f:"undefined",S.attachmentExceedMailList=h&&""!==h&&0!==h?h:"undefined",S.zsurveyRejectedEmails=v&&""!==v&&0!==v?v:"undefined",S.campaignExistingMemberEmails=C&&""!==C&&0!==C?C:"undefined",S.dmarcRejectedEmailsList=a&&""!==a&&0!==a?a:"undefined",S.lockedRecordMails=I&&""!==I&&0!==I?I:"undefined",S.lockedSurveyMails=E&&""!==E&&0!==E?E:"undefined";var w=Crm.getCrmBasePath()+"/ShowTemplates.do?action=MassMail",M="module="+d+"&totalCount="+i+"&sentMailCount="+n+"&optoutCount="+m+"&unconfOwnerCount="+p+"&smtpError="+T.smtpError+"&errorList="+encodeURIComponent(JSON.stringify(S))+"&countExceded="+T.countExceded+"&length="+o+"&isSpam="+T.isSpam+"&fromMassMailTool="+D;b&&(M+="&consent=true"),y&&(M+="&campaignMailType="+y),H&&(M+="&mode="+H),mR(w,(function(e){renderingUtils.freezeBackground();var t=renderingUtils.windowHeight,r=$("#massMailstatsResult");if($("#prLayer").show(),crmui.hidePopup("mass_sending_mail",!0),document.getElementById("loadingDiv").style.display="none",$("#massMailstatsPop").hide(),$("body").append('<div  id="massMailstatsResult" class="newPopup w550 topBandPopShadow ppTop p0 " style="z-index:35;"></div>'),r.empty(),document.getElementById("massMailstatsResult").innerHTML=e,r.css("max-height",t-110),$("#massMailstatsResult .massMailoADiv").css("max-height",t-180),$("html,body").css("overflow","hidden"),crmui.showPopup("massMailstatsResult",!0),null!=T.fromTool&&"true"===T.fromTool){var i=$("#sendTable").find("input[name='massmailNext']");i.length>0&&i.trigger("click")}}),M)}},error:function(){closeMassMail("massMailstatsResult",!1),closeMassMail("mass_sending_mail"),hide("massMailstatsPop"),hide("loadingDiv")}})}function closeMassMail(e,t,r,i){var n,s=$("body");if(crmui.modalZIndex("nonLyte",$L("#"+e)[0],"close"),hide(e),renderingUtils.removeFreezeLayer(),customViewObject&&"forecast"===customViewObject.from){var a=document.querySelector("crm-forecast-deals-modal");a||(a=document.querySelector("crm-performance-deals-modal")),a&&a.component.executeMethod("onModalClose")}null!=t&&0==t&&-1==["campRelatedListNormal","AddToCampaignRel","AddToCampaignNewFromCampMod","AddToCampaignTool"].indexOf(i)&&(currCVId=crmListView.getObject().cvId,"canvas"===Lyte.Router.getRouteInstance().routeName&&customViewObject&&(customViewObject.selectedIds=[]),clearSelection()),hide("prLayer"),$("#step1").length>0||$("#step2").length>0?$("html,body").css("overflow","auto"):$("html,body").css("overflow",""),(e="massMailstatsResult")&&s.hasClass("oH")&&s.removeClass("oH"),hide("progressBar"),n=null!=crmListView.getObject().module?crmListView.getObject().module:getObj("module").value,Macro.autoSuggest(n,!1),$("#freezeBackGround").fadeOut(),r&&(Events.isPageLayoutModified=!0,CrmPrivacyDashboard.reloadCurrentListView()),"undefined"!=typeof CrmCampaignInteg&&CrmCampaignInteg.campaignMassMailSendCallBack()}function clearSelection(e){if(null!=e)for(noofrows=e&&e.chk?e.chk.length:null,i=0;i<noofrows;i++)e.allcheck&&e.allcheck.checked&&(e.allcheck.checked=!1),e.chk[i].checked&&(e.chk[i].checked=!1,e.chk[i].parentNode.parentNode.style.backgroundColor="");else customViewObject.fromLyte?"crm.tab.module.custom-view.kanban"===Lyte.Router.getRouteInstance().transition.target?Lyte.triggerEvent("clearSelection"):(crmListView.startIndex={},crmListView.reloadCurrentListView()):(noofrows=$(".bg_white").length+$(".bg_crmSelectBg").length,$("#checkAll")&&$("#checkAll").attr("class","customCheckBoxChecked")&&$("[id=checkAll]").attr("class","customCheckBox"),$(".customCheckBoxChecked[data-cid=selectEntity]").parent().parent().parent().css("background-color",""),$(".customCheckBoxChecked[data-cid=selectEntity]").attr("class","customCheckBox"),customViewObject.isStageView&&crmListView.clearStageSelectionNew(),crmListView.checkAll(),showHideListViewBtnFn(),$("#fixedChkSelAll").attr("class","customCheckBox"),crmListView.startIndex={},crmListView.reloadCurrentListView())}function showRelatedFields_new(e,t,r){var i=crmListView.getObject(),n=["Leads","Accounts","Cases","Vendors","Contacts"].contains(e),s=["Leads","Contacts","Cases","Vendors"].contains(e)||0==e.indexOf("CustomModule"),a=($(r).parents("tr").attr("id"),$(r).offset().left),l=$(r).offset().top;if(i&&(n||s))if(i.relEntityDetails&&i.relEntityDetails[t]){var o=i.relEntityDetails[t];let e="CRUX-LOOKUP-COMPONENT"===r.tagName?"cx-prop-id":"lt-prop-id";formRelDetails(o,$(r).attr("id")||$(r).attr(e),n,s,l,a)}else $(r).attr("data-loading")||(clearTimeout(timer),timer=setTimeout((function(){var o=Crm.getCrmBasePath()+"/GetRelatedDetails.do?action=getRelatedFields",d={module:e,seid:t};$(r).attr("data-loading",!0),(new crmRequestPool).initiate({action:o,type:"POST",data:d,success:function(e){if(null!=e){void 0===i.relEntityDetails&&(i.relEntityDetails={});var t=e.SEID;if(delete e.SEID,t){let d="CRUX-LOOKUP-COMPONENT"===r.tagName?"cx-prop-id":"lt-prop-id";var o=$(r).attr("id")||$(r).attr(d);i.relEntityDetails[t]=e,formRelDetails(e,o,n,s,l,a)}}},error:function(e){commonUtils.showHideLoadingDiv(),e.responseText&&555==e.status&&alert(e.responseText)}})}),1e3))}function formRelDetails(e,t,r,i,n,s){var a=$("#"+t);if($(a).length){var l='<table width="100%" border="0" cellspacing="0" cellpadding="5">';if(r){var o=e.PHONE,d=o;"en_US"==Crm.userDetails.COUNTRY_LOCALE&&d&&d.match(/[0-9]/)&&(d="(",10==o.length?d+=o.substring(0,3)+") "+o.substring(3,6)+"-"+o.substring(6,10):9==o.length?d+=o.substring(0,5)+")-"+o.substring(5,9):d=o),l+='<tr><td class="alignRight" width="50">'+I18n.getMsg("Phone")+':</td><td class="alignLeft">',null!=d&&"undefined"!=d&&(l+=$ESAPI.encoder().encodeForHTML(d)),l+="</td></tr>"}if(i){var c=e.EMAIL;l+='<tr><td class="alignRight" width="50">'+I18n.getMsg("Email")+':</td><td class="alignLeft">',null!=c&&"undefined"!=c&&(l+='<a href="mailto:'+$ESAPI.encoder().encodeForHTMLAttribute(c)+'">'+$ESAPI.encoder().encodeForHTML(c)+"</a>"),l+="</td></tr>"}l+="</table>";var u=$("#loadingDiv");u.html(l),u.addClass("rellistpopup");var m="";$("#listviewtablescroll").length&&(m=$("#listviewtablescroll").scrollLeft()),m>0&&200;var p=s,g=n+15;u.css({width:"auto","min-width":"210px",left:p,top:g}),u.show(),u.addClass("hoverRoundedCorner")}}function hideLoadingDiv(){clearTimeout(timer),timer=setTimeout((function(){hideRelatedDiv()}),100)}function hideRelatedDiv(){document.getElementById("loadingDiv").style.display="none",$("#loadingDiv").removeClass("hoverRoundedCorner")}function responderSelect(e){var t=$("#updateStatus");t&&1==t.length&&(e&&""===e.target.value?t.attr("disabled",!0):t.attr("disabled",!1))}function updateResponseStatus(e){var t=getObj("responderId").value;if(""==t)alert(I18n.getMsg("crm.field.none.check",I18n.getMsg(e)));else{var r,i,n={};if(n[csrfParamName]=encodeURIComponent(csrfToken),getObj("idForCV")){r=crmListView.getObject().module,i=crmListView.getObject().selectedIds.join(";");var s=Crm.getCrmBasePath()+"/AutoResponder.do?step=updateStatus&module="+r+"&responderId="+encodeURIComponent(t)+"&fromListView=true";n.idlist=i,mR(s,(function(e){$("#loadingDiv").empty(),document.getElementById("loadingDiv").innerHTML=e,clearSelection(),setTimeout((function(){crmui.hidePopup("loadingDiv")}),3e3),crmListView.startIndex={}}),n)}else{r=getObj("module").value,i=getObj("idlist").value,commonUtils.showHideLoadingDiv(!0);s=Crm.getCrmBasePath()+"/AutoResponder.do?step=updateStatus&module="+r+"&idlist="+i+"&responderId="+encodeURIComponent(t);var a=document.getElementById("lookupdiv");a.style.display="block",a.style.zIndex=30,a.style.overflow="hidden",a.style.width="680px",a.style.height="500px",mailsetCenter("lookupdiv"),new AjaxAPI({id:"lookupdiv",url:s,callbackfn:function(){commonUtils.showHideLoadingDiv(),$("#bulkUpdateSuccess").empty(),document.getElementById("bulkUpdateSuccess").innerHTML=I18n.getMsg("crm.massupdate.updatedsuccesfully"),mailsetCenter("bulkUpdateSuccess"),setCenter(document.getElementById("bulkUpdateSuccess")),show("bulkUpdateSuccess"),setTimeout((function(){document.getElementById("bulkUpdateSuccess").style.display="none"}),2e3)},params:n}).post()}}}function exportReport(e){var t=commonUtils.formData2QueryString(document.zohodb);document.getElementById("loadingDiv").style.display="block",document.getElementById("loadingDiv").style.zIndex=30,document.getElementById("loadingDiv").style.width="400px",$("#loadingDiv").empty(),document.getElementById("loadingDiv").innerHTML="Loading...",mailsetCenter("loadingDiv"),renderingUtils.freezeBackground();t=t+"&fileType=zohodb&module="+e;var r=Crm.getCrmBasePath()+"/PushToZohoDB.do";mR(r,(function(e){$("#loadingDiv").empty(),document.getElementById("loadingDiv").innerHTML="Updated..",setTimeout((function(){hide("loadingDiv")}),3e3)}),t)}function getAutoChk(){var e=document.showEntity.chk.length,t=0;for(i=0;i<e;i++)document.showEntity.chk[i].checked&&t++;return t}function responseUpdate(e){var t=document.showEntity.chk.length,r="";if(null==t){if(!document.showEntity.chk.checked)return alert(I18n.getMsg("crm.alert.select.one")),!1;var n=document.showEntity.chk.value;getObj("idlist").value=n,updateResponseStatus(e)}else{if(0==t)return!1;if(0==getAutoChk())return alert(I18n.getMsg("crm.alert.select.one")),!1;for(i=0;i<t;i++)if(document.showEntity.chk[i].checked){n=document.showEntity.chk[i].value;r=""==r?n:r+";"+n}getObj("idlist").value=r,updateResponseStatus(e)}}function selectAllChk(){if(null!=document.showEntity.chk){var e=document.showEntity.chk.length,t=document.showEntity.allcheck.checked;for(null==e&&(document.showEntity.chk.checked=t),i=0;i<e;i++)document.showEntity.chk[i].checked=t}}function relatedFields(e){$(".rfields").hide(),$("#rfields_"+e).show(),$L("#rfieldsDiv").scrollTop(0),$(".modulesel").removeClass("modulesel"),$("#rmodules_"+e).addClass("modulesel");var t={Potentials:"#showStageHistOpt",SalesOrders:"#showSalesOrderOpt",PurchaseOrders:"#showPurchaseOrderOpt",Quotes:"#showQuoteOpt",Invoices:"#showInvoiceOpt"};if(e in t)for(eachmodule in t)e==eachmodule?$(t[e]).show():$(t[eachmodule]).hide();else for(eachmodule in t)$(t[eachmodule]).hide()}function showReportConfig(e,t){var r="";"true"==t&&(r=csrfParamName+"="+encodeURIComponent(csrfToken)),renderingUtils.freezeBackground(),new AjaxAPI({id:"loadingDiv",url:e,params:r,callbackfn:function(e){$L("#loadingDiv").css({zIndex:30,top:document.body.scrollTop+100+"px",left:"20%",width:"900px"}).show()}}).post()}PremiumChat.loadSalesIQ=function(e,r,i,n){if(PremiumChat.fileCount=0,PremiumChat.totalFileSize=0,$zoho.salesiq={widgetcode:i,values:{},ready:function(){}},!$("#siqiframe").length){var a=document.getElementsByTagName("head")[0],l=document;s=l.createElement("script"),s.type="text/javascript",s.id="zsiqscript",s.defer=!0,s.src=r,t=l.getElementsByTagName("script")[0],t.parentNode.insertBefore(s,t),a.appendChild(s),$zoho.salesiq.ready=function(t){"zohoone"!==e&&$zoho.salesiq.tracking.off();var r=n["Deployment Location"];if(n)if(n.isPremiumPartnerEnabled&&n.EU_PARTNER_ID)$zoho.salesiq.chat.department([n.EU_PARTNER_ID]);else if("true"==n.isTrialUser){var i=n.Trial_Edition;["ae","ke","za","ng","eg","sa"].includes(n.country)?$zoho.salesiq.chat.department(["Zoho CRM Presales MEA"]):"Professional"!=i&&"Old Enterprise"!=i&&"Enterprise"!=i&&"Ultimate"!=i||(r&&"AU"==r?$zoho.salesiq.chat.department(["Zoho CRM Presales AU"]):r&&"IN"==r?$zoho.salesiq.chat.department(["Zoho CRM Presales IN"]):r&&"US"==r&&$zoho.salesiq.chat.department(["Zoho CRM Presales US"]))}else"false"===n.isTrialUser&&n.EUDC_ARRdeptID?$zoho.salesiq.chat.department([n.EUDC_ARRdeptID]):"false"==n.isTrialUser&&"China"!=n["Deployment Location"]&&$zoho.salesiq.chat.department(["Zoho CRM Support"]);$zoho.salesiq.floatbutton.visible("hide"),$zoho.salesiq.visitor.name()||$zoho.salesiq.visitor.name(Crm.userDetails.DISPLAY_NAME),$zoho.salesiq.visitor.email()||$zoho.salesiq.visitor.email(Crm.userDetails.LOGIN_NAME),n&&(n.Crm_Country=Crm.userDetails.COUNTRY_LOCALE?Crm.userDetails.COUNTRY_LOCALE.substr(3):null,n.zuid=Crm.userDetails.ZUID,$zoho.salesiq.visitor.info(n)),$zoho.salesiq.call.cancelled((function(){$zoho.salesiq.floatwindow.visible("hide")})),$zoho.salesiq.floatwindow.minimize((function(){$zoho.salesiq.visitor.ongoingchat()?($(".siq_bR").css("height","inherit"),$zoho.salesiq.floatbutton.visible("show")):$zoho.salesiq.floatbutton.visible("hide"),$L("#featureChat").show()})),$zoho.salesiq.chat.complete((function(e,t){$zoho.salesiq.floatbutton.visible("hide"),t&&"CRM Support"==t.attendername&&($zoho.salesiq.rating.visible("hide"),$zoho.salesiq.feedback.visible("hide")),Crm.timingCheckNeeded&&FeedbackChat.isChatAvailable().then((function(e){e||$zoho.salesiq.floatwindow.visible("hide")}))}));try{salesIQTrackSignup()}catch(e){}}}},Crm.menu={setupScrollBind:!1,menusInDisplay:{},init:function(){var e=$(document);e.on("onBeforeClose",(function(e){var t=$(renderingUtils.getTargetElem(e));t.hide(),"divMacro"==t.attr("id")&&(thirdPartyUtils.unbindChildPerfectScroll(t),t.empty()),delete Crm.menu.menusInDisplay[t.attr("id")]})),e.on("menuItemClicked",(function(e,t){var r=$(renderingUtils.getTargetElem(e)).parents("div").eq(0);Crm.menu.hideMenu(t,r.id)})),e.click((function(e){if(document.querySelector(".pickList-pop")){var t=jQuery(".showPickList");t.is(e.target)||0!==t.has(e.target).length||$(".pickList-pop").removeClass("active").fadeOut()}}))},setupDropDown:function(e,t){hideMenu(event);var r=$("#newSettingsDropDown");if($(".prfImg").removeClass("icnfilter"),"undefined"!=typeof CrmPlusLib&&CrmPlusLib.isLoadedInCrmplusFrame)CrmPlusLib.showSidePanel(),sE(event);else{if(Crm.userDetails.RTL_ENABLED)r.css({right:"auto",left:"5px"});else{$(t),$(window);$(".newSettingsDropDown .SocialArrow").css({left:"auto",right:"16.5px"})}$("#conditionalFieldRightSection").length&&(Crm.userDetails.RTL_ENABLED?$("#conditionalFieldRightSection").css("left","-650px"):$("#conditionalFieldRightSection").css("right","-650px")),$("#validationRuleRightSection").length&&$("#validationRuleRightSection").hide()}0!=$("#susbcriptionInfo").length&&""==$("#susbcriptionInfo").html().trim()&&$("#susbcriptionInfo").remove(),0!=$("#susbcriptionInfo").length&&1==$("#susbcriptionInfo").find(".topsettingslink").length&&0==!$("#susbcriptionInfo").find(".susbscriptionLink").length&&($("#susbcriptionInfo").css("border",""),$("#susbcriptionInfo").removeClass("pB7 pT7")),$("#profileIcon").attr("onclick","hideMenu(event);")},createMenu:function(e,t,r){document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;var i=$(r);if("object"!=typeof t)t={id:t};var n=t.clickSelector?t.clickSelector:"li",s=customViewObject.isCampaignAddMemberListView&&"columnList"===t.id?$("#lv_table_holder #columnList"):$("#"+t.id);if(this.menusInDisplay[t.id]=!0,!s[0]){var a=document.createElement("div");for(var l in s=$(a),t)"menuItems"!==l&&s.attr(l,t[l]);for(var o=t.menuItems,d=o.length,c=document.createElement("ul"),u=0;u<d;u++){var m=o[u],p=document.createElement("li"),g=document.createElement("a"),f=$(g);f.html(I18n.getMsg(m.label)).data(m.data).attr({class:"link",href:"javascript:void(0);"}),this.attachEvent(f),p.appendChild(g),c.appendChild(p)}a.appendChild(c),document.body.appendChild(a)}!1!==t.setDefaultPos&&("runMacro"==i.attr("id")&&"forecastdbtn"!=i.closest("#forecastdbtn").attr("id")||this.positionMenu(e,s,t.fitInWindow)),setTimeout((function(){s.trigger("onBeforeShow",e),0!=t.hideOnMenuClick&&s.find(n).each((function(){$(this).click((function(e){$(this).trigger("menuItemClicked",e)}))}));var r=!1;if(store.peekAll("module").forEach((function(e){"Projects"===e.api_name&&e.visible&&(r=!0)})),r)if("undefined"!=typeof businessCardJson&&businessCardJson.isProjectTask)$("#addtoZprojects").hide(),Crm.menu.showCreateMenuDrpDown(s);else{var i=Lyte.Router.getRouteInstance(),a=i.parent.parent.getDynamicParam();if(null===a||"Activities"!==a&&"Tasks"!==a)$("#addtoZprojects").hide(),$("#septorProjects").hide(),Crm.menu.showCreateMenuDrpDown(s);else{var l=i.queryParams;if(l&&(!l.contains("sub_module")||l.contains("sub_module")&&"Tasks"===i.getQueryParams().sub_module)||"Tasks"===a){var o=[],d=networkUtils.returnDependencyFiles(["crm-project-sync-task.js"],ResourceConstants.CRMClient),c=networkUtils.returnDependencyFiles(["crm-zprojects-sync-task.css"],ResourceConstants.CRMClient);o=o.concat(d.concat(c)),Lyte.injectResources(o,void 0,(function(){var e=Lyte.Router.getRouteInstance().parent.getDynamicParam();void 0!==e&&store.findAll("crm-project-sync-task",{task_id:e},!1).then((function(e){var t=$("#addtoZprojects"),r=$("#septorProjects");e&&null!==e.firstSelectedProject&&"TASK_NOT_SYNCED"===e.code&&0==$("#subvalue_RECURRING").text().length?(r.show(),t.show()):(r.hide(),t.hide()),Crm.menu.showCreateMenuDrpDown(s)}),(function(){$("#addtoZprojects").hide(),$("#septorProjects").hide(),Crm.menu.showCreateMenuDrpDown(s)}))}))}else $("#addtoZprojects").hide(),$("#septorProjects").hide(),Crm.menu.showCreateMenuDrpDown(s)}}else $("#addtoZprojects").hide(),$("#septorProjects").hide(),Crm.menu.showCreateMenuDrpDown(s)}),100)},showCreateMenuDrpDown:function(e){e.is(":visible")||(e.show(),$("#columnlistsearch").focus(),"undefined"!=typeof columnListVDropDown&&($("input[value='CrmTask:ISCALLBILLABLE:Billable:']").closest("li").remove(),1==columnListVDropDown?$("#columnList").css("min-width",$("#columnList .ddMenus").outerWidth()):columnListVDropDown=!1))},attachEvent:function(e){e.click((function(e){$(this).parents("li").eq(0).trigger("menuItemClicked",e)}))},positionMenu:function(e,t,r){var i=$(renderingUtils.getTargetElem(e)),n=i.offset(),s=$(t),a=$(window),l=$("#cvpadding"),o=$("#dv-button-layer");n.top+=i[0].offsetHeight,a.width()<s.width()+n.left&&(n.left=n.left+i[0].offsetWidth-s.width()),r&&a.height()<n.top+t.height()+(isChatEnabled?26:0)&&(n.top=n.top-i[0].offsetHeight-s.height());var d=n.top-l.outerHeight();if(o.length&&1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI&&"columnList"!=$(t).attr("id")){var c=o.outerHeight(),u=0;"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()&&(u=35),$("#zbModuleTabLayer").is(":visible")||$("#zohoExpenseTabLayer").is(":visible")?n.top=n.top-(c+100-u):n.top=n.top-(c+60-u)}t.css({position:"absolute",display:"none",top:n.top+"px",left:n.left+"px"}),0==$("#copyListviewHeaderDiv").is(":visible")&&1==l.hasClass("pFixed")&&1==columnListVDropDown&&t.css({position:"absolute",display:"none",top:d+"px",left:n.left+"px"})},hideMenu:function(e,t){if(t)(i=$("#"+t)).is(":visible")&&i.trigger("onBeforeClose",e);else for(var r in this.menusInDisplay){var i;if(this.menusInDisplay[r])(i="columnList"===r&&customViewObject.isCampaignAddMemberListView?$("#lv_table_holder #columnList"):$("#"+r)).is(":visible")&&i.trigger("onBeforeClose",e)}$("#profileIcon").attr("onclick","Crm.menu.setupDropDown(event, this); slidelt('frmSetupClick'); sE(event);$('#editionTrialDiv').hide();")},globalHideMenu:function(e){var t=$("#Calendar")[0],r=$("#qCreate"),i=null;if(i=(i=renderingUtils.getTargetElem(e))||document.getElementById("show"),t&&"block"==t.style.display&&"block"!=r[0].style.display&&(tkveventajax||("calenderDueDate"!==i.id&&"headervaluetkv_Due Date"!==i.id||X&&""===X.innerHTML)&&crmCalendar.close()),i&&"showMenu"!=i.id&&"showSubMenu"!=i.id&&"export"!=i.id&&"locateMap"!=i.id&&"copyAddress"!=i.id&&"btnExport"!=i.id&&"moreTools"!=i.id&&"btnConvert"!=i.id&&"newAttach"!=i.id&&"sndMail_Top"!=i.id&&"sndMail_Buttom"!=i.id){var n=$("div[name='ownerNameLookup']"),s=i.parentElement;if(i.getAttribute&&"searchUserLookupUl"!==i.getAttribute("name")&&"ownerNameLookupSpan"!==i.getAttribute("name")&&"searchUserLookup"!==i.getAttribute("name")&&n[0]&&/block|/.test(n[0].style.display)&&!/hostSearch/.test(i.id)&&"hostSrcBox"!==i.id&&"Crm_Events_SMOWNERID"!==i.id&&(!s||"searchUserLookup"!==s.getAttribute("name"))){n.hide(),$(".popup-model-content,.pp-content").removeClass("oH");var a=n.attr("data-fieldName");$('input[id^="hostSearch_temp_searchuser"]').removeAttr("onclick");var l=$("#"+a),o=l.prev("input");a&&null!=o.val()&&""===o.val()&&l.children("ul").children("input").css("display",""),$(".focusFieldNewUpdate").removeClass("focusFieldNewUpdate")}if(/hostSearch/.test(i.id)){var d=$("#"+i.id),c=d.is("[readonly]"),u=d.parent().parent().attr("id");c?$("#ownerNameLookup_"+u).css("display","none"):$("#ownerNameLookup_"+u).css("display","")}}var m=$("#eventMultipleRemindersDiv"),p=$("#setup_new_ContentDiv");m.length>0&&m.is(":visible")&&(p.css("overflow","auto"),m.hide());var g=getElemById("Crm_Events_ENDDATETIME_TimeOption_List");!g||"block"!==g.style.display&&""!==g.style.display||$("#Crm_Events_ENDDATETIME_TimeOption_List").remove();var f=getElemById("Crm_Events_STARTDATETIME_TimeOption_List");!f||"block"!==f.style.display&&""!==f.style.display||$("#Crm_Events_STARTDATETIME_TimeOption_List").remove(),Crm.menu.hideMenu(e);var h=$(".moreOptionRow"),v=$(".callMoreOptionNew");v.is(":visible")&&(v.hide(),h.removeClass("moreOptionRow"));var b=$("#diNotificationDiv"),C=r.hasClass("ziaForEmailsCheck"),y=r.hasClass("cns");r.hasClass("cvAnomalyModalOpen")||C||$(".etTrendsWrapper").length||y||$(".etTrendsWrapperCNS").length||$(".cxPermissionDeniedAlert").length||!b.is(":visible")||Lyte.injectResources(networkUtils.returnDependencyFiles(["crm-zianotification-mixin.js"],ResourceConstants.CRMClient),void 0,(function(){Lyte.registeredMixins["crm-zianotification-helper"].toFooter(b),Lyte.registeredMixins["crm-zianotification-helper"].hideDiNotification()}));var H=Lyte.Router.getRouteInstance();if(H&&H.lyteConvertionSupported&&e){let t=Lyte.registeredMixins["crm-create-mixin"];if(t)return void t.createglobalhide(e,t)}if(Crm.isHeadless||hideUserBusinessCard(),!("undefined"!=typeof LytePopup&&LytePopup.components&&LytePopup.components.length>0||"undefined"!=typeof LyteColorbox&&LyteColorbox._open)||i&&"mics_stacked_backdrop"===i.getAttribute("id")){if($("[data-close=true]").hide(),Crm.menu.globalHideMenuExit&&(!i||"mics_stacked_backdrop"!==i.getAttribute("id")))return Crm.menu.globalHideMenuExit=!1,void(e&&e.target&&(_lyteUiUtils.getVisibleDropdowns().length>0&&(Crm.menu.globalHideMenuExit=!0),("select2-selection__rendered"===e.target.className||"select2-selection select2-selection--single"===e.target.className||e.target._callee&&"CRMUTIL-ICON"===e.target._callee.tagName&&"true"!==e.target._callee.getAttribute("non-lyte")||"LYTE-DROP-BUTTON"===e.target.tagName)&&(Crm.menu.globalHideMenuExit=!0)));e&&e.target&&(_lyteUiUtils.getVisibleDropdowns().length>0&&(Crm.menu.globalHideMenuExit=!0),("select2-selection__rendered"===e.target.className||"select2-selection select2-selection--single"===e.target.className||e.target._callee&&"CRMUTIL-ICON"===e.target._callee.tagName&&"true"!==e.target._callee.getAttribute("non-lyte")||"LYTE-DROP-BUTTON"===e.target.tagName)&&(Crm.menu.globalHideMenuExit=!0));var I=$("#nTsaveAsDraft"),E=I.is(":visible"),L=$(".crm-wms-icon");L.length&&L.removeClass("footIconActive"),$(".prfImg").addClass("icnfilter");var T,D=$(i),S=0,w=$(".clickDropDown");if(i&&"showMenu"!=i.id&&"showSubMenu"!=i.id&&"export"!=i.id&&"locateMap"!=i.id&&"copyAddress"!=i.id&&"btnExport"!=i.id&&"moreTools"!=i.id&&"btnConvert"!=i.id&&"newAttach"!=i.id&&"sndMail_Top"!=i.id&&"sndMail_Buttom"!=i.id){$("#ddm, .IP_search_userslist").hide(),D.hasClass("fieldLiP")||D.closest("li").hasClass("fieldLiP")||$(".fieldLiP").removeClass("selectedLis");var M=document.getElementById("viewFeatures");if(M&&e&&"none"!==M.style.display&&!e.target.classList.contains("msg-board-icon-active")&&"stackedNumber"!==e.target.id&&"msgBoardDisplay"!==e.target.id&&"What's new in Zoho CRM"!==e.target.innerText&&"a"!==e.target.localName&&"img"!==e.target.localName){var _=document.querySelector("#msgBoardDisplay .msg-board-icon"),k=document.getElementById("mics_stacked_carpet"),R=document.getElementById("mics_stacked_backdrop");M.style.display="none",_.classList.remove("msg-board-icon-active"),document.querySelector(".msg-board-icon .zcicn-messageboard").style.fill="#313949",k.style.display="none",R.style.display="none";var A=$L("html"),O=document.getElementById("stNotes");O&&"block"===O.style.display?A.addClass("oH"):A.removeClass("oH")}var N=$("#surveyicon");if(N.hasClass("surveyFeedbackIconActive")&&0===$(".listHoverRed").length&&0===$(".listHoverOrange").length&&0===$(".listHoverGreen").length){var P=$("#surveyPopup");P.hide(),P.css({bottom:"-500px"}),$("#bad,#ok,#good,#great,#perfect,#buttons,#commentdiv").addClass("dN"),N.removeClass("surveyFeedbackIconActive").addClass("surveyFeedbackIcon"),$("#sf_Rating li").removeClass(),$("#later").removeClass("dN")}var x=$("#recentMailsDiv")[0];if(x&&"block"==x.style.display){for(var U=e||window.event,F=U.target||U.srcElement,B=$("#rmStatusMesg"),j=$("#Crm_Tasks_DUEDATE");F;){if("calenDiv"==F.id||j.length>0&&B.length>0){var V=1;break}F=F.parentNode}if(!V)if(document.body.removeChild(x),$(".mailIc").attr("class","mailIc"),featuresAvailable.NEXTGENUI_ENABLED)document.querySelector("crm-left-menu").component.actions.updateNavActiveClassForBottomMenu("leftPaneMail",!1)}}$("#eventViewPopup").is(":visible")&&!($("#callDateSpanEdit").is(":visible")||i&&0!==D.parents("#eventCreatePopup").length||i&&"cancelEventBtn"===i.id||i&&"delEveFromQV"===i.id||"editbtn"===qe&&"calendar"===ze)&&Events.closeQuickView(),(T=$(".wid_calSettings_opts")).length>0&&T.is(":visible")&&T.hide(),(T=$(".wid_calCreate_opts")).length>0&&T.is(":visible")&&T.hide();var z=$("#wf_action_failureReasons");z.length>0&&z.is(":visible")&&WFInsights.hideFailureReasons();var q=$("[id^='eventActionsMenu_sec']");q.is(":visible")&&q.hide();var J=getElemById("time_List");!J||"block"!==J.style.display&&""!==J.style.display||$("#time_List").remove();var Z=$("#calUserSelectionPop");Z.length>0&&Z.is(":visible")&&calView&&calView.closeUserSelComponent();var W=getElemById("searchCategoryDiv");if(W&&"block"==W.style.display&&(1==(S+=1)?W.style.display="block":2==S&&(W.style.display="none",S=0)),0!=w.length&&(w.removeClass("clickDropDown").addClass("normalDropDown"),$(".ddM").each((function(){"block"==$(this).css("display")&&$(this).hide()})),$(".settingIconH").removeClass("settingIconH").addClass("settingIcon")),void 0!==e&&"searchUserLookup"!==$(e.target).attr("name")&&$('[name="searchUserLookup"]').closest(".labelValCreate").removeClass("focusEleField"),$("#campaignTypeSummaryDetails").remove(),!Crm.isHeadless){var Y=Notes.mentionedCommentIds.length;if(Y>0){for(var G=0;G<Y;G++){var K=Notes.mentionedCommentIds[G];K.startsWith("feed_")&&Notes.destroyMentionsComponent(K)}Notes.mentionedCommentIds.length=0}}var Q=$("#showOneFeed");if(Q.is(":visible")&&Q.hide(),!0===$(".followers").is(":visible")&&this.hideFollowers("flrs","followers"),$(".feedDeleteAction").css({display:"none"}),t&&"block"==t.style.display&&"block"!=r[0].style.display&&!tkveventajax){var X=document.getElementById("headertextarea_End DateTime"),ee=document.getElementById("headertextarea_Call Start Time"),te=document.getElementById("headertextarea_Start DateTime");X&&""!==X.innerHTML.trim()&&"textbox_Start DateTime"!==i.id&&($("#headertextarea_End DateTime").empty(),document.getElementById("headerdisplayvalue_End DateTime").style.display="inline",itsonview=!1),ee&&""!==ee.innerHTML.trim()&&($("#headertextarea_Call Start Time").empty(),document.getElementById("headervalue_Call Start Time").style.display="inline",itsonview=!1),te&&""!==te.innerHTML.trim()&&"textbox_Start DateTime"!==i.id&&($("#headertextarea_Start DateTime").empty(),document.getElementById("headerdisplayvalue_Start DateTime").style.display="inline",itsonview=!1)}var re=$(".appMoreOptionNew");re.is(":visible")&&($("#dvinner").removeClass("moreOpt_prevent_scroll"),re.remove(),h.removeClass("moreOptionRow"));var ie=$(".calculaterInfo .calculatedValue");if(ie.length&&(ie.html(""),$(".calculaterInfo").css({display:"none"})),!Crm.isHeadless&&crmNTC.isSignalDetailViewVisible()){void 0!==i&&"signalDetailViewClose"===i.id&&crmNTCDetailView.closeDetailView(),"undefined"===i.id||"signalsActivityDiv"===i.id||r.is(":visible")&&$("#eventCreatePopup").is(":visible")&&$("#createEditCallDiv").is(":visible")||(getElemById("signalsActivityDiv").style.display="none")}else if($("#notificationscontainer").hasClass("open")){crmNTCGlobal.closeGlobalNotifications(),$(".notifiactionIcon").removeClass("notifiactionIconH"),$("#notifications_inner").empty();var ne=$("#signalsActivityDiv");ne.is(":visible")&&ne.hide()}$(".customUrl,.ctiAddRecord,#ctiapi_unknown_add_associate,div[id^=entityPhnoDiv_]").hide();var se=$("#createsubmenu")[0];i&&"createsubmenu"!=i.id&&se&&"block"==se.style.display&&(se.style.display="none"),$("[data-close=true]").hide();var ae=$(".ariaDropOpen");if(ae[0]&&(ae[0].setAttribute("aria-expanded","false"),ae[0].classList.remove("ariaDropOpen")),!H||!H.lyteConvertionSupported){var le=$("#columnList");"block"==le.css("display")&&(le.removeClass("columnListForHeader columnListForFixHeader"),$("#listviewHeaderRow #addColumn").removeClass("addColumnActive")),$("#weekdayList").is(":visible")&&pushComponent.cancelWeekDaysDiv(),$(".freezeTransparent").is(":visible")&&CMB.hideRelatedListColumns();var oe=$(".NodeContextMenu"),de=$(".linkContextMenu");if("block"!=de.css("display")&&"block"!=oe.css("display")||(oe.hide(),de.hide()),"true"==$(".userbcpopup").is(":visible")&&$("#userBCDiv").hide(),i&&"showMenu"!=i.id&&"showSubMenu"!=i.id&&"export"!=i.id&&"locateMap"!=i.id&&"copyAddress"!=i.id&&"btnExport"!=i.id&&"moreTools"!=i.id&&"btnConvert"!=i.id&&"newAttach"!=i.id&&"sndMail_Top"!=i.id&&"sndMail_Buttom"!=i.id){var ce=$("#customizedd")[0];ce&&"block"==ce.style.display&&(ce.style.display="none",$("#CustomizeTools").attr("class","newgraybtndd moredot"));var ue=$("#menu")[0];ue&&"block"==ue.style.display&&(crmTab.li=void 0,crmTab.liSelected=void 0,$(document).unbind("keyup.menSrchBind"),$("body").removeClass("oH"),ue.style.display="none",document.getElementById("showMenu").className="",$("#menu_more").removeClass("menuMoreOn"));var me=$("#dropDownMenu")[0];me&&"block"==me.style.display&&(me.style.display="none");var pe=getElemById("containerDIV"),ge=getElemById("territorydrop");if(pe&&"block"==pe.style.display&&"territorysearch"!=i.id&&(pe.style.display="none"),!ge||""!=ge.style.display&&"block"!=ge.style.display||"territorysearch"==i.id||(ge.style.display="none"),D){var fe=D.closest("div"),he=getElemById("optionsHolder");he&&"block"==he.style.display&&(0==fe.length||!fe.attr("id")||0!=fe.length&&"optionsHolder"!=fe.attr("id")&&-1==fe.attr("id").indexOf("combo")&&0==$(he).has(fe).length)&&CustomView.hideDropdown(he)}var ve=getElemById("forecastSettings");ve&&"fcsettings"!=i.id&&"forecastSettings"!=i.id&&i.parentNode&&"assignment"!=i.parentNode.id&&"radio"!=i.parentNode.id&&"block"==ve.style.display&&(ve.style.display="none");var be=getElemById("suggestDetails");be&&"suggestDetails"!=i.id&&"suggest"!=i.id&&i.parentNode&&"fcName"!=i.parentNode.id&&"previous"!=i.parentNode.id&&""==be.style.display&&(be.style.display="none");var Ce=getElemById("surveys"),ye=getElemById("dulplicate_title");Ce&&(Ce.style.display="none",ye&&(ye.style.display="none"));var He=getElemById("territoryDropdown");He&&"territorytooltip"!=i.id&&i.parentNode&&"territorytooltip"!=i.parentNode.id&&"territoryField"!=i.id&&"territorysearch"!=i.id&&"selectField"!=i.id&&("block"==He.style.display||""==He.style.display)&&(He.style.display="none");var Ie=getElemById("foreYear");Ie&&"yearDiv"!=i.id&&i.parentNode&&"yearDiv"!=i.parentNode.id&&("block"==Ie.style.display||""==Ie.style.display)&&(Ie.style.display="none"),i.parentNode&&"remove"!=i.parentNode.classname&&"tableHeadBg"!=i.parentNode.classname&&$("#territorydetails").css("display","none");var Ee=$(".pb_feildpopOption");1==Ee.length&&Ee.remove();var Le=$(".pb_feildpopOptionRL");Le.length>0&&(Le.hide().removeClass("fixedRelatedDiv"),thirdPartyUtils.bindPerfectScroll(".add_transition"));var Te=$("#combo")[0];"fontDropDown"!=i.id&&"fontname"!=i.id&&Te&&"block"==Te.style.display&&(Te.style.display="none");var De=$("#workflowMenu")[0];"addAction"!=i.id&&De&&"block"==De.style.display&&(De.style.display="none");var Se=$("#externalIframe")[0],we=$("#mailPageLayoutFooter")[0];null==Se&&we&&(we.className="");var Me=$("#summaryEdit")[0];Me&&(Me.onclick(),setTimeout((function(){$("body > .select2-container--open").remove()}),5));var $e=$("#newMenu")[0];if($e&&"block"==$e.style.display){$e.style.display="none";do{$e=$e.previousSibling}while($e&&1!=$e.nodeType);$e.className="normalDropDown"}var _e=$("#editEntityIamgeDiv")[0];_e&&"block"==_e.style.display&&($(_e).empty(),_e.style.display="none");var ke=$("#leftPanelCalendarP")[0],Re=$("#sCalenDar")[0];ke&&"block"==ke.style.display&&(ke.style.display="none",Re.className="svgIconsImg newCalendarIcon");var Ae=$("#h2")[0];Ae&&"block"==Ae.style.display&&(Ae.style.display="none");var Oe=$("#dropDownMenuCnt")[0];Oe&&"block"==Oe.style.display&&(Oe.style.display="none",Oe.parentNode.className="normalDropDown convertBtn");var Ne=$("#businessCardDiv")[0];Ne&&"block"==Ne.style.display&&document.body.removeChild(Ne);var Pe=$("#tooltip-zc")[0];Pe&&(Pe.style.display="none");var xe=renderingUtils.targetElement(e);xe&&"textbox_Due Date"!==xe.id&&"calenderDueDate"!==xe.id&&"headervaluetkv_Due Date"!==xe.id&&document.getElementById("headertextarea_Due Date")&&""!==document.getElementById("headertextarea_Due Date").innerHTML.trim()&&"none"===document.getElementById("headervaluetkv_Due Date").style.display&&($("#headertextarea_Due Date").empty(),document.getElementById("headervaluetkv_Due Date").style.display="inline-block",itsonview=!1);var Ue=$(".sort_div");Ue&&Ue.is(":visible")&&Ue.hide();var Fe=De;Fe&&"none"!=Fe.style.display&&"addAction"!=i.id&&(Fe.style.display="none"),Fe=null}var Be=getElemById("invitation");if(Be&&("block"===Be.style.display||""===Be.style.display)){Be.style.display="none";var je=$("#myInvites");je.removeClass("invNotSel");var Ve=$("#myinvitationCnt").val();""!==Ve&&void 0!==Ve&&parseInt(Ve)<=0&&je.remove()}var ze="",qe="";if(i){qe=D.attr("data-cid");var Je=D.attr("data-params");Je&&(ze=(Je=JSON.parse(Je)).from)}var Ze=$("#twistatuschangepopup")[0];Ze&&jQuery(Ze).is(":visible")&&"twistatusimgicon"!==i.id&&"lily_status_icon"!==i.id&&($(Ze).empty(),Ze.style.display="none");var We=$("#pmrlstact_d")[0];if(We){We.style.display="none",$("#lstact_d").empty();var Ye=$("#dtl_nxt_st")[0];Ye&&(Ye.value="0")}if(Crm.listRId){var Ge=$("#"+Crm.listRId[0]+"_"+Crm.listRId[1]);-1!==Crm.listRId[0].indexOf("TASKS")&&-1!==Crm.listRId[0].indexOf("EVENTS")&&-1!==Crm.listRId[0].indexOf("APPOINTMENTS")&&-1!==Crm.listRId[0].indexOf("CALLS")&&"hidden"!=Ge.css("visibility")&&Ge.addClass("newRlEdit").removeClass("selectRlEdit").css("visibility","hidden")}if($("div[id^='customRelatedListMenuDiv']").length>0){var Ke=$("[id^='rlDropDown']");Ke.removeClass("selectRlEdit"),Ke.addClass("newRlEdit"),Ke.css("visibility","hidden"),$("div[id^='customRelatedListMenuDiv']").hide()}$("div[id^='customizeCustomTab_']").length>0&&($("[id^='settingIcon_']").removeClass("settingIconH"),$("[id^='settingIcon_']").addClass("settingIcon"),$("div[id^='customizeCustomTab_']").hide()),getElemById("userList")&&"block"==getElemById("userList").style.display&&($("#userList").css("display","none"),$("#assignToUser").removeClass("Fld"));var Qe=$(".userListPopMore");Qe&&"block"==Qe.css("display")&&Qe.css("display","none"),$(".settingNewIcon").removeClass("settingNewIconH"),document.getElementById("kvvalues_Call Type")&&!$('[id="kvvalues_Call Type"]').hasClass("hide")&&xe&&"kvfieldvalue_Call Type"!==xe.id&&($('[id="kvvalues_Call Type"]').addClass("hide"),kanbanTaskDetailctn.eq(0).removeAttr("style"),itsonview=!1);var Xe=$(".moreactionlist");Xe&&"block"==Xe.css("display")&&"undefined"!=TaskKanbanView.tkvMoreAction&&1===TaskKanbanView.tkvMoreAction?(Xe.css("display","none"),TaskKanbanView.tkvMoreAction=0):Xe&&"block"==Xe.css("display")&&(TaskKanbanView.tkvMoreAction=1);var et=$("#showLdSettings");"block"==et.css("display")&&et.fadeOut(),$("#signalSettingsHelpWrap").is(":visible")&&crmNTCSettings.closeSignalSettingHelpDiv(),!Crm.isHeadless&&SalesSignalsWrapper.isSignalIFrameOpen&&"signalsIframe"!==window.name&&window.signalsIframe&&SalesSignals.closeGlobalNotifications();var tt=$("#showLdhelpSettings");"block"==tt.css("display")&&tt.fadeOut(),$("#dateListDropDown").addClass("hide");var rt=$(".ap"),it=rt.length;$("#serviceDurationsUL").is(":visible")&&$("body").css({overflow:"auto"});for(G=0;G<it;G++){var nt=$(rt[G]);"block"==nt.css("display")&&nt.css("display","none")}var st=$("#rep_runreportPop"),at=$("#rep_runreportPop1"),lt=$(".rep_selectedRow"),ot=$(".freezeLayerdrop");"block"==st.css("display")&&(st.hide(),ot.hide(),lt.removeClass("rep_selectedRow").closest("td").trigger("onmouseleave"),thirdPartyUtils.bindPerfectScroll("#reportsConta",{preventHorizontal:1})),"block"==at.css("display")&&(at.hide(),ot.hide(),lt.removeClass("rep_selectedRow").closest("td").trigger("onmouseleave"),thirdPartyUtils.bindPerfectScroll("#reportsConta",{preventHorizontal:1}));var dt=$(".newCustomDropDownContainer ul");dt.length&&dt.slideUp();var ct=$(".dropdownOptionsList");ct.length&&(ct.hide(),$(".selectedCustomSpan").removeClass("selectedCustomSpan"));var ut=$("#layoutListDiv");ut[0]&&"block"==ut.css("display")&&(ut.css("display","none"),$("#existLayoutNameDiv").toggleClass("borderBottomNone"));var mt=$(".showAct");mt.hasClass("showAct")&&mt.removeClass("borAct");var pt=$("#toolsId");pt.is(":visible")&&pt.slideUp(100);var gt=$("#importDiv");gt.is(":visible")&&gt.slideUp(100);var ft=$("#importRevampDiv");ft.is(":visible")&&ft.slideUp(100);var ht=$("#impRelatedToDiv");if($("#crmFieldDropDown").is(":visible")&&!ht.is(":visible")){$L("#crmFieldDropDown .custom_select_Dropdown").scrollTop(0),$("#crmFieldDropDown .custom_select_Dropdown").find(".crmCustomeFielddorpGray").removeClass("crmCustomeFielddorpGray"),$("#crmFieldDropDown").hide(),$(".ITF-container .itb-body-class").css("overflow","auto"),$("#crmFieldDropDown").unbind("keydown"),$(".dropDownIcon").find(".iconKeyDown").show();var vt=$("#fieldChooseDiv.crmFieldMappingHoverClass input");if(Import.currentFieldmapSysRef&&""!=Import.currentFieldmapSysRef){var bt=$("#crmFieldDropDown").find("span[data-sysRefName='"+Import.currentFieldmapSysRef+"']"),Ct=bt.attr("data-i18nLabel");if(bt&&bt.length>0){if(bt.hasClass("showmore_PolymorphicField")){var yt=$("#impRelatedToDiv"),Ht=yt.find(".polymorphic_modules option:selected"),It=yt.find(".polymorpicLookupFieldFindBy option:selected"),Et=Ht.val();Ct+=Et&&"All"!==Et?" ("+Ht.text()+" --\x3e "+It.text()+")":" ("+It.text()+")"}else if(bt.hasClass("showmore_Sublist")){var Lt=$("input[id='fieldChoose'][data-sysRefName='"+Import.currentFieldmapSysRef+"']").attr("data-findBy");null!=Lt&&""!=Lt&&(subListObj=bt.find("li[data-sysRefName="+Lt+"]"),subListObj&&subListObj.length>0&&(Ct+=" ("+subListObj.text()+")"))}vt.prop("value",Ct).attr("value",Ct)}}else vt.prop("value","").attr("value","");$("#mappedFieldsList").find("strong").show(),$("#mappingFieldMoreContent").hide(),$("#crmFieldDropDown .custom_select_Dropdown").find(".appendTemporary").remove(),$("#mappedFieldsList li").removeClass("pointerOnMappedField").attr("style",""),vt.blur(),Import.mappedFieldScroll=0,Import.chooseFieldChoosen=0,Import.crmCustomDropScrollTop=0,Import.dorpOpenStatus=0,Import.addAddional=0,1!==Import.crmCustomeDrop?Import.crmCustomeDrop=0:Import.crmCustomeDrop=1}if($("#importWarningMess").is(":visible")&&($("#importWarningMess").hide(),Import.crmCustomeDrop=0),$("#crmFieldDataformatDropdown").is(":visible")){var Tt=$L("#crmFieldDataformatDropdown");Tt.find(".crmCustomeFielddorpGray").removeClass("crmCustomeFielddorpGray"),Tt.find(".dataFormateDropDownNew").scrollTop(0),Tt.hide();var Dt=$("#dataFormatButton.crmFieldMappingHoverClass input");if(Dt.blur(),$(".dropDownIcon").find(".iconKeyDown").show(),Import.currentSelectedDataformat&&""!=Import.currentSelectedDataformat){var St=Tt.find("li[data-format='"+Import.currentSelectedDataformat+"']");St&&St.length>0&&Dt.prop("value",St.text()).attr("value",St.text())}else Dt.prop("value","").attr("value","");$(".ITF-container .itb-body-class").css("overflow","auto"),Tt.unbind("keydown"),Import.crmCustomDropScrollTop=0}!$("#importMappingDiv").is(":visible")||$("#createNewFieldlist").is(":visible")||$("#crmFieldDataformatDropdown").is(":visible")||$("#crmFieldDropDown").is(":visible")||$(".ITF-container .itb-body-class").css("overflow","auto");var wt=$("#alphaTable");wt.is(":visible")&&"alphaSearch"!=D.attr("id")&&wt.slideUp(100),$(".remindersOptions").is(":visible")&&($(".remindersOptions").slideUp(100),$(".selectBoxInput").removeClass("SlctListAtv"));var Mt=$(".btntoolsIdList");Mt.is(":visible")&&Mt.hide();var $t=$(".feedFilterlist"),_t=$(".moduleSection"),kt=$(".feedfiltermodules");$("#tempctnList").length>0&&0==$(".mailmergeListSection").length&&($(".nteditdeleteIcon").removeClass("dBImp"),$(".ntfolderSettings").removeClass("disableIcohide"),"function"==typeof template.closeAssociate&&template.closeAssociate(),$("#nTshareFolder").is(":visible")||$("#moveToFolder").hide(),_t.removeClass("bdre3e2"),$t.hide(),kt.removeClass("feedfilterfocus")),($("#galleryHead").length>0||$(".editEmailTemp").length>0)&&(_t.removeClass("bdre3e2"),$t.hide(),kt.removeClass("feedfilterfocus")),$("#templateAlertsPop").is(":visible")&&template.hideAnimatePopup("templateAlertsPop",!0),$("#templateName").length>0&&($(".editTempName,.nTSubsection").removeClass("editorTopScale").removeClass("subScale"),$("#cTmoduleName,.nTfavicn,#nTtoplink").show());var Rt=$("#LDPOP");Rt.length&&Rt.is(":visible")&&CrmTracking.minimizePop();var At=$("#emailEditor").contents().find("#surveys");"none"!=At.css("display")&&(At.hide(),$("#emailEditor").contents().find("#dulplicate_title").hide());var Ot=$(".customButtonDom");Ot.length&&(Ot.hide(),$(document).scroll((function(){Ot.hide()})));var Nt=$("#HomePage_Selector");Nt.length&&Nt.is(":visible")&&Nt.removeClass("hvw-active"),i&&!D.hasClass("inputfieldsection")&&$(".commonDrop").addClass("hide"),$(".inputfieldsection").removeClass("inputHighlight");var Pt=$("#setup_new_ContentDiv");$(".activeUserList").is(":visible")||!0!==Crm.menu.setupScrollBind||0===Pt.length||(Pt[0].removeEventListener("scroll",(function(){})),Crm.menu.setupScrollBind=!1),$(".TeamSettingDiv").is(":visible")&&($(".TeamSettingDiv").hide(),$(".TeamSettingDivSub").hide()),$(".zesDeleteDeviceIcon").is(":visible")&&$(".zesDeleteDeviceIcon").addClass("dN"),$("#wf_Container_p").length>0&&($(".wf_active_time").removeClass("wf_active_time"),$(".wf_moreIc").removeClass("wf_activeMore"),$(".wfActUlList,[id*=mailAndChatList]").hide());var xt=$("#setup_new_ContentDiv");if($("#socCreateRule").is(":visible")){var Ut=$L("#socAssignmentRules").closest(".socAssignRules");Ut.length&&(Ut.removeClass("socAssignRulesActive"),Ut.find(".soc_assign_name").removeAttr("style"),Ut.find("crm-social-assignment-rules")[0].remove(),$L(".socEditCriteria, .socDelCriteria").removeClass("socInEdit"),$L("#socCreateRule").removeClass("socCriteriaOpened"),$L(".socAddNwCir").removeClass("eventNone"))}"object"==typeof ZCampaigns&&ZCampaigns.hideWebinarToolTip(),$("li.subformList").removeClass("subFrmAct subFrmActDumy"),$(".zesSelOption").is(":visible")&&$(".zesSelOption").addClass("dN"),$(".dItimesdiv").is(":visible")&&($(".dItimesdiv").hide(),$("#bestTimeListFilterId").hide());var Ft=$("#socDeskDepartmentDiv");Ft.is(":visible")&&($("#socConvoContent").removeAttr("style"),Ft.addClass("dN").removeAttr("style")),$("#socColumnType").is(":visible")&&zsoTab.addColumnClose(),$("#socComposePost").is(":visible")&&crmui.hidePopup("socComposePost");var Bt=$("#socDeleteNwPosts");Bt.is(":visible")&&Bt.remove(),$("#reauth_alert").is(":visible")&&"undefined"!=typeof zsoTab&&zsoTab.closeReauthAlert(),$("#socViewConvPopup").is(":visible")&&zsoTab.viewConvoClose("socViewConvPopup"),$("#socLikeCountPopup").is(":visible")&&zsoTab.viewConvoClose("socLikeCountPopup");var jt=$("#lv_stageview"),Vt=$("#stageView_create_act");jt.length&&Vt.hasClass("act-menu-opened")&&($(".stageview-data-container li").removeClass("liclicked"),Vt.removeClass("act-menu-opened")),$(".customDDList_withbtn").is(":visible")&&$(".customDDList_withbtn").hide();var zt=$("#ldealInfo");zt.is(":visible")&&zt.remove(),$(".profOptionList").is(":visible");var qt=$(".editDealOptions");qt.is(":visible")&&qt.hide(),$("#mailParser").is(":visible")&&mailparser.resetDropdown(),$("#mailParsePopup").is(":visible")&&mailparser.closePop("mailParsePopup"),$("[id=chooseTime]").is(":visible")&&($("[id=chooseTime]").remove(),xt.removeClass("oH")),$(".shiftHoursDD").is(":visible")&&($(".shiftHoursDD").hide(),$("#selectCustomDDAddUser").closest("td").removeClass("wf_setFocus"));var Jt=$("#shiftUserDelList");Jt.is(":visible")&&Jt.hide();var Zt=$(".customSelectVal");Zt.is(":visible")&&Zt.hide().removeClass("bottomFix");var Wt,Yt=$(".primarybtn_ddList");Yt.is(":visible")&&Yt.hide(),$(".diLaterTimeDiv").is(":visible")&&($(".clikedLaterbtn").removeClass("clikedLaterbtn"),$(".diLaterTimeDiv").hide()),$(".dICallTimerDiv").is(":visible")&&($(".dICallTimerDiv").hide(),$(".callBtnSel").removeClass("callBtnSel")),(Wt=$(".sandboxLinkedPop:visible")).length>0&&($(".linkedCounts").removeClass("snd_sel"),$(".sandboxLinkedPop").addClass("dN")),$(".sbCustomeTooltip:visible").length>0&&$(".sbCustomeTooltip").remove(),(Wt=$(".filterOptionContainer:visible")).length>0&&sandbox.closeDateFieldPopup(Wt);var Gt=$(".addDevList:visible");Gt.length>0&&Gt.hide();var Kt=$(".addDevListMore:visible");Kt.length>0&&Kt.addClass("vH");var Qt=$(".calSchDD .more-opt-list");Qt.is(":visible")&&(Qt.hide(),$(".calSchDD .moreIcon").css({opacity:"0",visibility:"hidden"})),$(".subFrmRemoveInfoPop:visible").length>0&&CrmSubform.firstTimeDeleteInfoHide();var Xt=$(".userListPopup_BH");Xt.is(":visible")&&Xt.hide(),0==$(".newpopup").is(":visible")&&$(".taxActiveElement").removeClass("taxActiveElement"),$(".subFrmAggTablWrapper").length>0&&($(".aggFldTabl").removeClass("pFixed"),$("#dvinner").scrollLeft()>0&&$(".subFrmAggTablWrapper").css("max-width",$("#dvinner").width()+$("#dvinner").scrollLeft())),$("#zohoSurveySelect").is(":visible")&&($("#zohoSurveySelect").addClass("dN"),"undefined"!=typeof ZSurvey&&ZSurvey.searchClose&&ZSurvey.searchClose());var er=$(".zCampOpiontDD");er.length>0&&(er.remove(),$("#lp_rellist").find("li").removeClass("bg_white"));var tr=$("#columnList.fromModuleLookup"),rr=$(".lookupErrorMsg").is(":visible");if(tr.length>0&&!rr&&void 0!==le&&""!==le)$L("crm-entity-lookup")[0].component.cancelLookupPopClose();var ir=$("#preferences");if(ir.find(".popup_cont").is(":visible")){var nr=ir.find(".popup_cont:visible"),sr=nr.find("ul");sr.css({top:"-400px"}),nr.slideUp(),"restrict_tpt_select"==sr.parent().attr("id")&&($(".privacyContentSection").css("margin-bottom",""),nr.off("webkitTransitionEnd transitionend msTransitionEnd"),nr.on("webkitTransitionEnd transitionend msTransitionEnd",(function(){$("#preferences").find(".popup_cont:visible");$(".sensitiveSelection").off("select2:opening.gdpr");var e=$(".select2OpenManualStop");e.length>0&&(e.select2("open"),e.removeClass("select2OpenManualStop"))})))}}if(void 0!==e&&"searchUserLookup"!==$(e.target).attr("name")&&$('[name="searchUserLookup"]').closest(".labelValCreate").removeClass("focusEleField"),$("#cNdropFilesId").closest(".labelValCreate").removeClass("focusEleField"),1==Crm.userDetails.detailView_newUI&&null!=Crm.userDetails.detailView_newUI){$("#comboBox").removeClass("selNotesDrop");$("#moreOptionsDiv"),$(".moreOptions");$(".btnSelected").removeClass("btnSelected")}0===$("#calendarCont").length&&$(".calBodyBg").removeClass("calBodyBg"),E&&I.addClass("hide");var ar=$(".ltUsers_drpDown");ar.length>0&&ar.addClass("dN"),$L(".moreOptionIconCont_visible").removeClass("moreOptionIconCont_visible"),$L(".customHomeActiveMoreOption").removeClass("customHomeActiveMoreOption");var lr=$(".feedboxDelete");lr.length>0&&lr.removeClass("feedboxdeleteActive")}else Crm.menu.globalHideMenuExit=!0},hideFollowers:function(e,t){$("."+t).hide()},showPickList:function(){$(".pickList-pop").hasClass("active")?$(".pickList-pop").removeClass("active").hide():$(".pickList-pop").addClass("active").show()}};var lastWordforAC="",lastDataCountforAC=1,modules={MODULE:""};function callGSearchForAC(e,t){var r=trimBoth(document.getElementById(e).value);const i=r.replace(/[+]/,""),n=r.split(" "),s=n[n.length-1];let a=!1;if((n.length>1&&!isNaN(s[0])&&s.length<=2||"+"===r[0]&&i.length<=2)&&(a=!0),!a){if(!lastDataCountforAC&&lastWordforAC.length<=r.length&&0===r.indexOf(lastWordforAC))return;if(r.length<3){if(!r.replace(/[A-Z a-z 0-9]/g,""))return void $(".searchLoadingIcon").hide()}}var l=Crm.getCrmBasePath()+"/GSearch.do",o="mode=ac&searchword="+encodeURIComponent(r);httphandle.open("POST",l,!0),httphandle.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),httphandle.onreadystatechange=function(){if(4==httphandle.readyState){$(".searchLoadingIcon").hide();var e=httphandle.responseText;modules={MODULE:""},e=e.substring(0,e.lastIndexOf(","));try{e=JSON.parse("["+e+"]")}catch(e){return}var i=$.map(e,(function(e){return e}));lastDataCountforAC=i.length,i.length||(i=[{IGNORENODATA:"true"}]),t(i),lastWordforAC=r,renderingUtils.scrollPrevent($(".globalSearchList"))}},httphandle.send(o),$(".searchLoadingIcon").show()}function renderGSearchACUI(e,t){var r=document.querySelector("crm-left-menu-gsearch");if(r&&r.component&&r.component.setData("isEmptySearch",!!t.IGNORENODATA),t.IGNORENODATA)return $("<li class='ui-no-mhead nodata-search ui-menu-item'><span class='acli-name'>"+I18n.getMsg("crm.template.listview.search.no.results")+"</span></li>").appendTo(e).data("ui-autocomplete-item",""),$();"Leads"!==t.MODULE&&"Contacts"!==t.MODULE||(t.FULLNAME=getFormattedName(t.FIRSTNAME,t.LASTNAME,t.SALUTATION));var i=$("#gsac_"+t.MODULE);if(!i.length){modules.MODULE=t.MODULE;var n=crmTab.getDisplayName(t.MODULE);i=$("<li class='ui-autocomplete-category ui-menu-item' id='gsac_"+t.MODULE+"'><b name='autocompletemodule' class='crm-font-regular'>"+$ESAPI.encoder().encodeForHTML(n)+"</b></li>").appendTo(e).data("ui-autocomplete-item","")}var s=crmHistory.getNewURL(t.URL),a=Lyte.Router.getRoute(s);"crm.tab.module.entity.detail"===a.route&&(a.route="crm.tab.module.entity"),$("<li class='ui-no-mhead ui-menu-item'></li>").append("<a tabindex=\"-1\" class=\"ui-menu-item-wrapper\"><span onclick='Crm.notifySearchCloseCRMPlus()';><link-to class='gsListLinkTo dB' lt-prop-route="+JSON.stringify(a.route)+" lt-prop-dp="+JSON.stringify(a.dynamicParams)+">"+$ESAPI.encoder().encodeForHTML(t.FULLNAME)+"</link-to></span><span class='popoutarrow' onclick='networkUtils.openUrl(\""+t.URL+'","_blank")\'></span></a>').appendTo(e).data("ui-autocomplete-item",t)}function openZohoSearchPage(e){if(1===e.which){var t="";if(Crm.userDetails.ISPAID_USER){featuresAvailable.NEXTGENUI_ENABLED;const e=document.getElementById("gsearchTextBox"),r=document.getElementById("searchStr");t=trimBoth(e&&e.value)||trimBoth(r&&r.value)}else t=$L(".topbandSearchInpt").val();crmNavig.removeFeaturCacheObj("gsearch"),adSearchClose(),"undefined"!=typeof CrmPlusImpl&&CrmPlusImpl.isLoadedInCrmplus()&&CrmPlusImpl.trigger("onClickOnFreezeLayer"),zgssearch.search(t)}}function tabForSearch(e){if(e&&9===e.keyCode){var t=$L("crm-menu")[0];t&&(e.preventDefault(),e.shiftKey?$L("#adSearchCloseBtn").focus():t.component.closeSearchInput())}}function checkOldGSearchResults(e){e=$(e),trimBoth(e.val())&&$(e).data("ui-autocomplete")&&($(".primarySearchList").show(),e.autocomplete("widget").show(),e.removeClass("ui-corner-all").addClass("ui-corner-top"))}function showRecentMails(e,t,r){if(e&&hideMenu(e),Crm.userDetails.EMAIL_THREAD_VIEW)emailThreadViewForMailMagnet();else{var i=csrfParamName+"="+csrfToken;document.getElementById("msgid")&&document.getElementById("msgid").value,hidemessage(),Activities.RemainderHideOnly();document.getElementById("rmnIconDiv");if(document.getElementById("recentMailsDiv"))n=document.getElementById("recentMailsDiv");else{var n=document.createElement("DIV");document.body.appendChild(n),n.id="recentMailsDiv",n.className="newPopup p10",n.style.position="absolute",n.onclick=function(e){e&&sE(e),getObj("businessCardDiv")&&hide("businessCardDiv")}}var s=Crm.getCrmBasePath()+"/ZMailConfig.do?action=showRecentMails";"none"!=document.getElementById("newMailCount").style.display&&(s+="&updateMailCount=true"),document.getElementById("newMailCount").style.display="none",crmplusImplTriggerActions("setNotificationCount",["mailbox",0]),$("#recentMailsDiv").addClass("recentMailPopup"),Crm.userDetails.RTL_ENABLED?n.style.left="0px":n.style.right="0px",n.style.top=renderingUtils.tabLayerTop()+renderingUtils.tabLayerOuterHeight()+"px",n.style.display="block",$(n).empty(),n.innerHTML=I18n.getMsg("crm.load")+"...",t&&(s=s+"&fromIndex="+t),r&&(s+="&showUnreadMails=true"),new AjaxAPI({id:"recentMailsDiv",callbackfn:function(i){if(""!=document.getElementById("unreadMailIds").value)for(var n=document.getElementById("unreadMailIds").value.split(","),s=0;s<n.length;s++){var a=document.getElementById("mail_"+n[s]);a&&(a.className="bg_crmSelectBg")}if(document.getElementById("allmailslnk")&&(r?(document.getElementById("allmailslnk").className="",document.getElementById("unreadmailslnk").className="topNavAct",document.getElementById("allmailslnk").onclick=function(){showRecentMails(e,t)},document.getElementById("unreadmailslnk").onclick=null):(document.getElementById("allmailslnk").className="topNavAct",document.getElementById("unreadmailslnk").className="",document.getElementById("unreadmailslnk").onclick=function(){showRecentMails(e,t,!0)},document.getElementById("allmailslnk").onclick=null)),Crm.userDetails.RTL_ENABLED)$("#mailArrow").css({left:renderingUtils.findPosX(getObj("rmnIconDiv"))+"px"});else{var l=renderingUtils.findPosX(getObj("rmnIconDiv"))-renderingUtils.findPosX(getObj("recentMailsDiv"))+11;$("#mailArrow").css({left:l+"px"})}},params:i,url:s}).post(),e&&sE(e)}}var originaltitle=document.title;function hidemessage(){document.title=originaltitle}function viewRecentMail(e,t,r,i,n,s,a){var l="ZMAIL";Crm.userDetails.IMAP_STATUS?l="IMAP":getObj("mailType")&&"GMail"==getObj("mailType").value&&(l="GMail"),"GMail"!==l&&(n=!n),document.getElementById("rmListViewDiv").style.display="none",$L("#rmDetailViewDiv").empty();var o=document.getElementById("rmDetailViewDiv");o&&(o.innerHTML=I18n.getMsg("crm.load")+"...",o.style.display="block"),$L("#mmBackToMsgs").show();var d=Crm.getCrmBasePath()+"/mailer/EntReply.do?action=viewMail",c=csrfParamName+"="+encodeURIComponent(csrfToken);c+="&entId="+t+"&module="+r+"&mailType="+encodeURIComponent(l)+"&sentOrReceived=Received&source=recentMailView&currMailPos="+i+"&entEmailId="+encodeURIComponent(s)+"&flag="+n,""!=e&&(c=c+"&msgid="+e),new mR(d,(function(t){var r=document.getElementById("rmDetailViewDiv");if("MESG_DELETED"==t)return document.getElementById("rmListViewDiv").style.display="block",r.style.display="none",alert(I18n.getMsg("crm.recent.mail.deleted.alert",I18n.getMsg(singularModule))),!1;var i=document.getElementById("totalMailCount")?document.getElementById("totalMailCount").value:0;if(r){$("#rmDetailViewDiv").empty(),r.innerHTML=t;var n=document.getElementById("msgid"),s=n.value,a=$("#maxComposeBtn"),l=a&&!a.hasClass("hide");!s&&l&&(s=e,n.value=e),"null"==$("#rmViewName").text()&&$("#rmViewName").text($("#rmName_"+s).html()),r.style.display="block",0!=i&&(document.getElementById("rmTotMailCnt").value=i),JSEvalScript(document.getElementById("recentMailsDiv"))}}),c,"","false")}function showBusinessCardView(){var e=document.createElement("DIV");e.style.display="none",e.id="businessCardDiv",document.body.appendChild(e),$("#businessCardDiv").html($(".businessPopup").html()),e.className="businessPopup";var t=document.getElementById("contInfo"),r=renderingUtils.findPosX(t),i=renderingUtils.findPosY(t);$("#businessCardDiv").css({left:r-41,top:i+22,zIndex:31}),$("#businessCardDiv").slideDown("slow",(function(){$("#businessCardDiv").mouseleave((function(){$("#businessCardDiv").slideUp("slow",(function(){$("#businessCardDiv").remove()}))}))}))}function approveFormDetailView(e,t,r,i,n,s,a){var l=!0,o=!1;if(i&&n){o=!0;var d=I18n.getMsg("crm.email.duplicate.approve",I18n.getMsg([moduleRecordMapping[r].plural_label,moduleRecordMapping[r].singular_label]));if(!window.confirm(d))return l=!1,!1;l=!0}if(l){var c=Crm.getCrmBasePath()+"/ConfirmApproval.do";"Contacts"===r?c=Crm.getCrmBasePath()+"/ConfirmContactApproval.do":"Cases"===r?c=Crm.getCrmBasePath()+"/ConfirmCaseApproval.do":-1!==r.indexOf("CustomModule")&&(c=Crm.getCrmBasePath()+"/WebRecordConfirmApproval.do");var u=csrfParamName+"="+encodeURIComponent(csrfToken)+"&idlist="+t+"&approvalModule="+r+"&formdetailView=true";(s||parseInt(s)>=0)&&a&&(u=u+"&startIndex="+s+"&endIndex="+a),o&&(u+="&showDuplicates=1"),doAjaxUpdate("json",c,u,(function(){var t=$("#detailNext"),r=$("#detailPrevious");t.hasClass("disabled")&&!r.hasClass("disabled")?renderingUtils.triggerEvent("click",r):!t.hasClass("disabled")&&r.hasClass("disabled")?renderingUtils.triggerEvent("click",t):$(e).remove()}))}}var rep={showRep:function(e){$(".rep_runbtn").addClass("vH"),$(e).find(".rep_runbtn").removeClass("vH")},hideRep:function(e){var t=$(e).find(".rep_runbtn");$(".rep_runbtn").addClass("vH"),($("#callMoreOption").is(":visible")||$("#appMoreOption").is(":visible"))&&t.hasClass("vVIm")?t.removeClass("vH"):t.addClass("vH")}};function adSearchClose(){$("html").removeClass("oH");var e=document.querySelector("[data-zcqa='adSearchCloseBtn']");e&&e.click(),$("#currentEditionInfo").show(),$(".searchOverlay").fadeOut(200),"global-search"==Lyte.Router.getRouteInstance().routeName&&crmHistory.backOneLevel(),$(".searchOverlay").removeClass("searchOverlayAct"),$(".searchOverlay").removeClass("searchOverlayAct"),$(".searchInner").hide();const t=$L("crm-left-menu-gsearch")[0];t&&t.component.actions.showSearchInput(!1)}function sortHomeCVColsNew(e,t,r,i,n){var s=JSON.parse($(i).closest(".dashBrdContent").attr("data-params")),a=$("#HomePage_Selector").find("a").attr("data-category");"0"==a&&(s[csrfParamName]=encodeURIComponent(csrfToken),s.updateSortColumn=!0),delete s.clickId,delete s.isDefaultLayout,delete s.isNewUserHomePage;var l=s.layoutId,o="sort_asc",d=$("#sortOrderString_"+l);r==t&&"sort_asc"==d.val()?(o="sort_desc",d.val(o)):d.val(o),s.sortOrderString=o,s.sortColumnString=r;var c=Crm.getCrmBasePath()+"/HomePageLayout.do",u="0"===a?"POST":"GET";(new crmRequestPool).initiate({action:c,data:s,type:u,success:function(e){if(e.fromPage="homePage",e.previous_sort_column=r,e.previous_sort_order=o,void 0!==n&&""!==n&&(e.best_time_field_id=r),"0"===a)CrmDashboard.replaceTaskDiv(e,s.module);else{var t=!0;e.body&&e.body[e.currentOption]&&(e.body[e.currentOption]=void 0,t=!1),e.isLast=t,CrmDashboard.renderCV(e,e.layoutId,a,s.module),CrmDashboard.needToLoadContactImage&&CrmDashboard.populateContactsImageMapAndLoadCv(e,e.layoutId,a,s.module)}}})}function showBestTimeSortDiv(e,t,r,i,n){var s=$(e),a=s.offset().left,l=s.outerHeight(),o=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,d=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft;$("#SortByAllDay").attr("onclick","sortHomeCVColsNew('"+r+"', '"+i+"', '"+n+"', this, 'sort_asc')");var c=s.parents(".grid-stack-item");c.find(".SortByToday").attr("onclick","sortHomeCVColsNew('"+r+"', '"+i+"', '"+n+"', this, 'sort_desc')");var u=c.find(".sort_div")[0];if(u.style.top=s.offset().top+l+"px",u.style.position="fixed",d>0&&0===o&&(u.style.left=a+"px"),o<50)u.style.left=a-d+"px";else{var m=$("#cvpadding");0==$("#copyListviewHeaderDiv").is(":visible")&&1==m.hasClass("pFixed")?u.style.top=s.position().top+l+82-(m.outerHeight()+15)-o+"px":u.addClass("fixedTopColumnList"),u.style.position="fixed",u.style.left=a-d+"px",u.style.zIndex=2502}u.style.display="block",t||(t=window.event),t.stopPropagation&&(t.stopPropagation(),t.cancelBubble=!0)}function delAction(e,t,r,i,n){var s="module="+e+"&id="+t+"&fromPage=Home&layoutId="+r+"&dashletId="+i+"&currentOption="+n+"&"+csrfParamName+"="+csrfToken;return(new crmRequestPool).initiate({action:Crm.getCrmBasePath()+"/MassDelete.do",type:"POST",data:s,success:function(t){if(t){hideAnimatePopup("deletepopup"),CrmDashboard.replaceTaskDiv(t,e);var r=I18n.getMsg("crm.label.deleted.successfully");$("#bulkUpdateSuccess").html(r),mailsetCenter("bulkUpdateSuccess"),setTimeout((function(){hide("bulkUpdateSuccess")}),2e3)}},error:function(){var e=I18n.getMsg("crm.mb.alert.complete.operation.later");renderingUtils.showCustomAlert(e,void 0,!1)}}),!1}function changeHomeOptions(e){var t=$(e),r=$("#HomePage_Selector");$("#HomeSelectorDD").find("a").removeClass("sel"),r.removeClass("hvw-active"),t.find("a").addClass("sel");var i=$(t.html());i.find(".home-green-tick").addClass("hview-menu-arw").removeClass("home-green-tick"),r.html(i);var n=r.find("a")[0];if(n.offsetWidth<n.scrollWidth){var s=t.text();r.on("mouseenter",(function(){crmui.toolTip_show(this,"center",s)})),r.on("mouseleave",(function(){crmui.toolTip_hide()}))}else r.unbind("mouseover mouseout")}function toggleHomeDropDown(){var e=$("#HomeSelectorDD"),t=$("#HomePage_Selector"),r=t.outerWidth(),i=t.offset().left,n=parseInt(t.offset().top)+parseInt(t.outerHeight())-1;if($('[data-close="true"]').hide(),t.hasClass("hvw-active"))return t.removeClass("hvw-active"),void e.slideUp();if(t.addClass("hvw-active"),e.width(parseInt(r)-2),Crm.userDetails.RTL_ENABLED)e.css({left:i,top:n});else{var s=renderingUtils.windowWidth-(i+parseInt(r));e.css({right:s,top:n})}e.slideDown()}Handlebars.registerHelper("getRoleDetails",(function(e,t){var r='<td id="roles" class="crmLinkHover ellipsistext" width="25%"',i=[],n=[],s=e?e.length:0,a=0,l=0;if(0===s)return CustomHomePage.isComponentEnabledForCustomizeHomepage?r+="onmouseover=\"crmui.toolTip_show(this,'left','"+I18n.getMsg("crm.role.and.profile.deleted.tooltip")+'\')" onmouseout="crmui.toolTip_hide();" data-rolesSelected=",">-</td>':r+="onmouseover=\"crmui.toolTip_show(this,'left','"+I18n.getMsg("crm.role.deleted.tooltip")+'\')" onmouseout="crmui.toolTip_hide();" data-rolesSelected=",">-</td>',r+t.fn(this);if(CustomHomePage.isComponentEnabledForCustomizeHomepage){for(var o=0;o<s;o++){"R"===(m=e[o]).prefix||"roles"===m.type?(a++,n.push(m.name)):"P"!==m.prefix&&"profiles"!==m.type||(l++,i.push(m.name))}r+="onmouseenter=\"CustomHomePage.setOriginElementForSharingHoverCard(this,'"+n+"','"+i+'\')"><span class="sharedWithDataCard" lyte-hovercard="true">';var d=(parseInt(o)-1).toString();if(a>0&&(r+=$ESAPI.encoder().encodeForHTML(1===a?I18n.getMsg("crm.process.sel.role.cnt",1):I18n.getMsg("crm.process.sel.roles.cnt",a))),l>0){var c=1===l;l=a>0?", "+l:l;r+=$ESAPI.encoder().encodeForHTML(c?I18n.getMsg("crm.process.sel.profile.cnt",l):I18n.getMsg("crm.process.sel.profiles.cnt",l))}}else{o=0;for(var u={};o<s;o++){var m=e[o];if(0===o)var p=m.name,g=m.name;else g+=", "+m.name;u[m.id]=$ESAPI.encoder().encodeForHTMLAttribute(m.name)}if(o>1){r+="onmouseover=\"crmui.toolTip_show(this,'left','"+$ESAPI.encoder().encodeForJavaScript(g)+'\', false)" onmouseout="crmui.toolTip_hide();" data-rolesSelected='+JSON.stringify(u)+">";d=(parseInt(o)-1).toString();r+=$ESAPI.encoder().encodeForHTML(2!==o?I18n.getMsg("crm.listview.display.role",[p.toString(),d]):I18n.getMsg("crm.listview.display.singular.role",p.toString()))}else r+="data-rolesSelected="+JSON.stringify(u)+">",r+=$ESAPI.encoder().encodeForHTML(p)}return(r+="</span></td>")+t.fn(this)})),Handlebars.registerHelper("img_link",(function(){return ResourceConstants.IMAGES.CRM?"undefined"!=typeof FingerPrint&&FingerPrint.isEnabled?networkUtils.getCdnUrl()+ResourceConstants.IMAGES.CRM:ResourceConstants.IMAGES.CRM:"/images"})),Handlebars.registerHelper("showAddRecord",(function(e){return Lyte.Component.registeredHelpers.showAddRecord(e)})),Handlebars.registerHelper("getCrmImageUrl",(function(e){return networkUtils.getImageUrl(e,ResourceConstants.CRM)})),Handlebars.registerHelper("decodeHTML",(function(e){var t=document.createElement("textarea");t.innerHTML=e;let r=t.childNodes;return 0===r.length?"":r[0].nodeValue})),Handlebars.registerHelper("isSmartPromptField",(function(e,t){switch(e){case"Leads":return["COMPANY","INDUSTRY","WEBSITE"].includes(t);case"Contacts":return["ACCOUNTID","VENDORID"].includes(t);case"Accounts":return["ACCOUNTNAME","WEBSITE","INDUSTRY"].includes(t);case"Potentials":return["ACCOUNTID"].includes(t);case"Tasks":return["SUBJECT"].includes(t);case"Calls":return["CALLAGENDA","SUBJECT"].includes(t);case"Quotes":return["QUOTESUBJECT","TERMSANDCONDITIONS","ACCOUNTID"].includes(t);case"Products":return["VENDORID"].includes(t);case"SalesOrders":return["SALESORDERSUBJECT","TERMSANDCONDITIONS","ACCOUNTID"].includes(t);case"Vendors":return["VENDORNAME","WEBSITE"].includes(t);case"Cases":return["CASESUBJECT","INTERNALCOMMENTS","ACCOUNTID","SOLUTION"].includes(t);case"Solutions":return["ANSWERS","QUESTIONS"].includes(t);case"Appointments":return["ADDITIONALINFORMATION"].includes(t);default:return!1}})),Handlebars.registerHelper("getEventName",(function(){return $ESAPI.encoder().encodeForJavaScript(returnJson.entityMapJson.SUBJECT.defaultvalue)})),Handlebars.registerHelper("safeEncodeHTML",(function(e){return null!=new RegExp("[<>]|(?:(&(?!(amp;|lt;|gt;|quot;|#x27;|#x2f;|#39;|#x3a;))))").exec(e)?$ESAPI.encoder().encodeForHTML(e):e})),Handlebars.registerHelper("isHipaaTabExposed",(function(e){return null!=globalSetpJson&&Crm.userDetails.permissions.Crm_Implied_Manage_Compliance_Settings?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("safeEncodeJS",(function(e){return null!=new RegExp("[<>\"';\n]").exec(e)?$ESAPI.encoder().encodeForJavaScript(e):e})),Handlebars.registerHelper("encodeJS",(function(e){return $ESAPI.encoder().encodeForJavaScript(e)})),Handlebars.registerHelper("encodeURL",(function(e){return $ESAPI.encoder().encodeForURL(e)})),Handlebars.registerHelper("encodeURIComponentWithEncodeJS",(function(e){return $ESAPI.encoder().encodeForJavaScript(encodeURIComponent(e))})),Handlebars.registerHelper("encodeURIComponent",(function(e){return null==e?$ESAPI.encoder().encodeForURL(e):encodeURIComponent(e)})),Handlebars.registerHelper("encodeHTML",(function(e){return $ESAPI.encoder().encodeForHTML(e)})),Handlebars.registerHelper("encodeForHtml",(function(e){return new Handlebars.SafeString($ESAPI.encoder().encodeForHTML(e))})),Handlebars.registerHelper("encodeForHtmlWithoutNull",(function(e){var t=CTIAPI.encodeForHTMLWithoutNull(e);return new Handlebars.SafeString(t)})),Handlebars.registerHelper("isNotEmpty",(function(e,t){return validationUtils.isNotEmpty(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("array_contains",(function(e,t,r){for(var i=0;i<e.length;i++)if(e[i]==t)return r.fn(this);return r.inverse(this)})),Handlebars.registerHelper("array_not_contains",(function(e,t,r){for(var i=0;i<e.length;i++)if(e[i]==t)return r.inverse(this);return r.fn(this)})),Handlebars.registerHelper("encodeForHTMLAttribute",(function(e){return $ESAPI.encoder().encodeForHTMLAttribute(e)})),Handlebars.registerHelper("encodeCSS",(function(e){return $ESAPI.encoder().encodeForCSS(e)})),Handlebars.registerHelper("ifEquals",(function(e,t,r){return e&&t&&e.toString()===t.toString()?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("ifNotEquals",(function(e,t,r){return e&&t&&e.length<1&&t.length<1||e&&t&&e.toString()===t.toString()||void 0!==e&&void 0!==t&&e===t?r.inverse(this):r.fn(this)})),Handlebars.registerHelper("isNotPartOf",(function(e,t,r){return t?null!=(e=e.split(","))&&null!=t&&null!=e&&null!=t&&-1==e.indexOf(t.toString())?r.fn(this):r.inverse(this):r.fn(this)})),Handlebars.registerHelper("isPartOf",(function(e,t,r){return"string"==typeof t&&t.indexOf("Orchestration")>=0&&(t="Orchestration"),null!=(e=e.split(","))&&null!=t&&null!=e&&null!=t&&e.indexOf(t.toString())>-1?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("lessThan",(function(e,t,r){return parseFloat(e)<parseFloat(t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getI18n",(function(){var e=arguments.length-1;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],r=[],i=1;i<e;i++)r.push(arguments[i]);return I18n.getMsg(t,I18n.getMsg(r))})),Handlebars.registerHelper("getModuleDisplayName",(function(e,t){return Crm.getModuleDisplayName(e,t)})),Handlebars.registerHelper("getLink",(function(e,t){return"Contacts"===e||"Leads"===e?Crm.getCrmBasePath()+"/tab/"+e+"/"+t+"/":"Users"===e?Crm.getCrmBasePath()+"/ShowSetup.do?tab=userPermi&subTab=viewUser&userId="+t:void 0})),Handlebars.registerHelper("isNotCustomizedSystemModule",(function(e,t){var r=Crm.moduleInfo[e];return void 0===r||1!=r.genType||null!=r.isCustomized&&0!=r.isCustomized?t.inverse(this):t.fn(this)})),Handlebars.registerHelper("getI18nByAppendKey",(function(){var e=arguments.length-1;if(2===e)return arguments[0]+arguments[1]==="crm.label.widgets.SALES_SIGNALS"||arguments[0]+arguments[1]==="crm.label.widgets.sales_signals"||arguments[0]+arguments[1]==="crm.label.cf.salessignals"?I18n.getMsg("crm.ntc.label.listview.notificationHeading"):I18n.getMsg(arguments[0]+arguments[1]);for(var t=arguments[0]+arguments[1],r=[],i=2;i<e;i++)r.push(arguments[i]);return I18n.getMsg(t,I18n.getMsg(r))})),Handlebars.registerHelper("getI18nwithoutParamI18n",(function(){var e=arguments.length-1;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],r=[],i=1;i<e;i++)r.push(arguments[i]);return I18n.getMsg(t,r)})),Handlebars.registerHelper("isOdd",(function(e,t){return parseInt(e)%2!=0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getUserDetail",(function(e,t){for(var r=e.split("."),i=Crm.userDetails,n=0;n<r.length;n++)i=i[r[n]];return"function"!=typeof t.fn?i:i?t.fn(i):t.inverse(i)})),Handlebars.registerHelper("dynamicValueSetter",(function(){var e=arguments[0],t=arguments.length,r=arguments[t-1];if((t-2)%2==0)for(var i=1;i<t-2;i+=2){var n=arguments[i],s=arguments[i+1];e[n]=s}return e?r.fn(e):r.inverse(e)})),Handlebars.registerHelper("setZCQA",(function(){var e=arguments[0],t=arguments.length,r=arguments[t-1];return"false"==e.customfield?e.zcqaId="value_"+e.colname:e.zcqaId="value_"+e.displaylabel,r.fn(e)})),Handlebars.registerHelper("setZCQAForSubformRow",(function(){var e=arguments[0],t=arguments[1],r=arguments[2]+1,i=arguments.length,n=arguments[i-1];return e.zcqaId="value_"+t+"_"+e.displaylabel+"_"+r,n.fn(e)})),Handlebars.registerHelper("setSubFormDataForComponent",(function(e,t){for(var r,i=e.FL.length,n=0;n<i;n++){var s=e.FL[n];if("500"===s.uitype){r=s.fieldid;break}}var a=store.peekRecord(moduleRecordMapping[e.module].id,t),l=store.peekRecord("field",r);e.sfFieldId=l.id,e.sfSection=l.section?JSON.stringify(l.section[0].$.toJSON()):void 0,e.sfApiName=l.section?l.section[0].api_name:void 0,e.record=JSON.stringify(a.$.toJSON())})),Handlebars.registerHelper("isInventoryModule",(function(e,t){return!0===Crm.isInventoryModule(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("setVar",(function(e,t){this[e]=t})),Handlebars.registerHelper("isOdd",(function(e,t){return parseInt(e)%2!=0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifAll",(function(e,t,r){if(void 0===t){n=0;for(var i=0;i<e.length;i++)e[i][t]&&(n++,s);return n>1?r.fn(this):r.inverse(this)}if("all"===t){var n=0;return void 0!==e.facebook&&e.facebook.length>0&&n++,void 0!==e.twitter&&e.twitter.length>0&&n++,void 0!==e.googleplus&&e.googleplus.length>0&&n++,n>1?r.fn(this):r.inverse(this)}if("facebook"===t){if(void 0!==e.facebook&&e.facebook.length>1)return r.fn(this)}else if("twitter"===t){if(void 0!==e.twitter&&e.twitter.length>1)return r.fn(this)}else if("googleplus"===t){if(void 0!==e.googleplus&&e.googleplus.length>1)return r.fn(this)}else if(e.length>1)return t.fn(this)})),Handlebars.registerHelper("socialMarkingInfo",(function(e){if("facebook"===e.network)var t=e.from;else if("twitter"===e.network)t=e.user;else if("googleplus"===e.network)t=e.actor;if((e.search||e.timeline)&&(t.crm_closed_potential_contact||t.crm_potential_contact))var r=Crm.moduleInfo.Contacts.singular_label;else if(t.crm_contact)r=Crm.moduleInfo.Contacts.singular_label;else if(t.crm_lead)r=Crm.moduleInfo.Leads.singular_label;if(e.search){if(void 0!==r){var i='<span class="dIB fL" style="margin-top: -4px"><span class="kso_from_text3">';return i+="<span>"+$ESAPI.encoder().encodeForHTML(r)+"</span></span></span>"}}else if(void 0!==r){var n='<span class="dIB kso_action_Layer fL" style="margin-top: -4px"><span class="kso_from_text3">';return n+=$ESAPI.encoder().encodeForHTML(r)+"</span></span>"}})),Handlebars.registerHelper("processSocialEntityType",(function(e){return 1===e||"Leads"===e?moduleRecordMapping.Leads.singular_label:2===e||"Contacts"===e||3===e||"Potentials"===e||4===e||"Customers"===e?moduleRecordMapping.Contacts.singular_label:5===e||"Accounts"===e?moduleRecordMapping.Accounts.singular_label:void 0})),Handlebars.registerHelper("if_gt_len",(function(e,t,r){return e.length>parseInt(t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("if_gt_eq",(function(e,t,r){return void 0!==e&&void 0!==t&&e>=t?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("if_sum_gt",(function(e,t,r,i){return void 0===t&&(t=0),void 0!==e&&void 0!==t&&e+t>=r?i.fn(this):i.inverse(this)})),Handlebars.registerHelper("if_not_eq_len",(function(e,t,r){return e.length!==parseInt(t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("if_eq_len",(function(e,t,r){return e.length===parseInt(t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("isDateFilterEnabled",(function(e){return e&&"view-workflow-rule"===Lyte.Router.getRouteInstance().routeName})),Handlebars.registerHelper("process",(function(e){if(e){var t=280-(e.length+2);return t}return t})),Handlebars.registerHelper("isUser",(function(e,t,r,i){if("User"===e)return'<div class="fR mR10 onhovershow kso_delete_icon" keyword=\''+i+"' onclick=\"sE(event); crmSocial.removeSearchKeyword(this, '"+t+"', '"+r+"', '"+i+"');\"></div>"})),Handlebars.registerHelper("getModule",(function(e,t){return-1!==e.indexOf("search")||"crm.label.no.open.activities"===e?I18n.getMsg(e,Crm.moduleInfo[t].translatedPluralLabel):I18n.getMsg(e,Crm.moduleInfo[t].translatedSingularLabel)})),Handlebars.registerHelper("currentModuleSingularLabel",(function(){return Crm.moduleInfo[detailView.currentModule].translatedSingularLabel})),Handlebars.registerHelper("currentModule",(function(){return detailView.currentModule})),Handlebars.registerHelper("getModuleLabel",(function(e){if("Zoho Finance"==e||"Zoho Books"==e||"Zoho Invoice"==e)if(Crm.moduleInfo["Zoho Invoice"])e="Zoho Invoice";else{if(!Crm.moduleInfo["Zoho Books"])return"Zoho Finance";e="Zoho Books"}return I18n.getMsg(Crm.moduleInfo[e].translatedPluralLabel,I18n.getMsg("Zoho"))})),Handlebars.registerHelper("getModuleId",(function(e){return Crm.moduleInfo[e].Id})),Handlebars.registerHelper("getReminderString",(function(e,t){var r=(e=JSON.parse(e)).partRem;return 0==(r=r[0]).unit?null!=t&&1==t?"0":"At time of event":"none"==r.unit?"None":r.unit+" "+r.period+" "+r.remind})),Handlebars.registerHelper("getMailSentOrReceived",(function(e){return"Sent"===e?"Sent":"Received"})),Handlebars.registerHelper("ifContains",(function(e,t,r){return null!=e&&null!=t&&null!=e&&null!=t&&e.toString().indexOf(t.toString())>-1?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("ifNotContains",(function(e,t,r){return null!=e&&null!=t&&null!=e&&null!=t&&-1===e.toString().indexOf(t.toString())?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getClass",(function(e){var t="";return"Closed Won"===e?t="kso_won_potential crmLabelColor linethrough crm-base-font-size":"Closed Lost"===e?t="kso_lost_potential crmLabelColor linethrough crm-base-font-size":"Open"===e?t="kso_pipeline_potential":"twitter"===e?t="twicon-small":"facebook"===e?t="fbicon-small":"googleplus"===e&&(t="gpicon-small"),t})),Handlebars.registerHelper("ifEqualsGetStyle",(function(e,t,r){var i="";return"showViewMore"===r&&e!==t&&(i="dN"),i})),Handlebars.registerHelper("getValueFromArr",(function(e,t){return e?e[t]:""})),Handlebars.registerHelper("convertObjToKeyValuePair",(function(e){var t,r="";for(var i in e)void 0!==e[i]&&(t="string"==typeof e[i]?$ESAPI.encoder().encodeForHTMLAttribute(e[i]):e[i],"tabIndex"===i&&(t="0"),r+=i+'= "'+t+'" '),"maxlength"===i||"data-maxlength"===i?r+='aria-valuemax= "'+t+'" ':"placeholder"===i?r+='aria-placeholder= "'+t+'" ':"data-displaylabel"===i?r+='aria-label= "'+t+'" ':"data-content-type"===i&&"Lookup"===t?r+="aria-haspopup = 'true' role='combobox'":"data-mandate"===i?r+='aria-required= "'+t+'" ':"data-readonly"===i&&(r+='aria-readonly= "'+t+'" ');return r})),Handlebars.registerHelper("convertObjToString",(function(e){var t={};for(var r in e)void 0!==e[r]&&("string"==typeof e[r]?t[r]=encodeURIComponent(e[r]):t[r]=e[r]);return JSON.stringify(t)})),Handlebars.registerHelper("ObjToString",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("setKeyValueToObj",(function(e,t,r){r[e]=t})),Handlebars.registerHelper("isPFSandBox",(function(e){return void 0!==Crm.isPFSandbox?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("getValueForGivenVariable",(function(){for(var e,t=0;t<arguments.length-1;t++)0==t&&(e=window[arguments[t]]),e=e[arguments[t]];return e})),Handlebars.registerHelper("if_eq",(function(e,t,r){return void 0!==e&&void 0!==t&&e==t?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("if_nq",(function(e,t,r){return void 0!==e&&void 0!==t&&e!=t?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("bitwiseAnd",(function(e,t,r){return(parseFloat(e)&parseFloat(t))>0?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("if_gt",(function(e,t,r){return void 0!==e&&void 0!==t&&e>t?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("subString",(function(e,t,r){return null!=e&&null!=e?e.substr(t,r):e})),Handlebars.registerHelper("s",(function(e,t,r){var i=t+r,n='<div class="w100"><div style="width:'+e+'px;" class="greenbar fL cP"></div><div style="width:'+(100-e)+'px;" class="graybar fL cP"></div></div>';$(getObj(i)).empty(),getObj(i).innerHTML=n})),Handlebars.registerHelper("log",(function(e){console.log(e)})),Handlebars.registerHelper("ifCondLogic",(function(e,t,r,i,n,s,a,l){var o=Handlebars.helpers.checkComparison(e,r,t),d=Handlebars.helpers.checkComparison(n,a,s);switch(i){case"&&":if("true"==o&&"true"==d)return l.fn(this);break;case"||":if("true"==o||"true"==d)return l.fn(this)}return l.inverse(this)})),Handlebars.registerHelper("ifCondLogicForThreeCond",(function(e,t,r,i,n,s,a,l,o,d,c){var u=Handlebars.helpers.checkComparison(e,r,t),m=Handlebars.helpers.checkComparison(i,s,n),p=Handlebars.helpers.checkComparison(a,o,l);switch(d){case"&&":if("true"==u&&"true"==m&&"true"==cond)return c.fn(this);break;case"||":if("true"==u||"true"==m||"true"==p)return c.fn(this)}return c.inverse(this)})),Handlebars.registerHelper("checkEquals",(function(e,t,r,i){return Handlebars.helpers.ifCondLogic(e,"==",t,"||",e,"==",r,i)})),Handlebars.registerHelper("checkComparison",(function(e,t,r){switch(r){case">=":if(e>=t)return"true";break;case"<=":if(e<=t)return"true";break;case">":if(e>t)return"true";break;case"<":if(e<t)return"true";break;case"=":if(e===t)return"true";break;case"==":if(e==t)return"true";break;case"!=":if(e!=t)return"true"}return"false"})),Handlebars.registerHelper("ifCond",(function(e,t,r,i){return"true"==Handlebars.helpers.checkComparison(e,r,t)?i.fn(this):i.inverse(this)})),Handlebars.registerHelper("ifCondLogicBoolean",(function(e,t,r,i,n,s,a){var l=Handlebars.helpers.checkComparison(e,r,t),o=Handlebars.helpers.checkComparison(n,a,s);switch(i){case"&&":if("true"==l&&"true"==o)return!0;break;case"||":if("true"==l||"true"==o)return!0}return!1})),Handlebars.registerHelper("checkBrowser",(function(e){"Microsoft Internet Explorer"==window.navigator.appName&&(getObj("test_"+e)?getObj("test_"+e).style.display="none":getOpenerObj("test_"+e)&&(getOpenerObj("test_"+e).style.display="none"))})),Handlebars.registerHelper("getAppName",(function(){return Crm.appName})),Handlebars.registerHelper("arithResult",(function(e,t,r){switch(e=parseFloat(e),r=parseFloat(r),t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"/":return e/r;case"%":return e%r}})),Handlebars.registerHelper("conditional",(function(e,t,r,i,n){return"true"==Handlebars.helpers.checkComparison(e,t,r)?i:n})),Handlebars.registerHelper("contains",(function(e,t,r){return e&&"string"==typeof e&&(e=JSON.parse(e)),e&&e.contains(t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getModuleNameByApiName",(function(e){var t=Crm.moduleInfo;for(var r in t){if(t[r].apiname===e)return r}return e})),Handlebars.registerHelper("getDisplayModuleName",(function(e,t){var r=Crm.moduleInfo;if(void 0===e)return e;var i="Deals"==e?"Potentials":e;return r[i]?t?r[i].translatedSingularLabel:r[i].translatedPluralLabel:e})),Handlebars.registerHelper("toLowerCase",(function(e){return void 0!==e?e.toLowerCase():e})),Handlebars.registerHelper("convertToUpperCase",(function(e){return void 0!==e?e.toUpperCase():e})),Handlebars.registerHelper("getContactsURL",(function(){return"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file"})),Handlebars.registerHelper("getCurrentUserId",(function(){return Crm.userDetails.USER_ID})),Handlebars.registerHelper("getCurrentZuid",(function(){return Crm.userDetails.ZUID})),Handlebars.registerHelper("logicalOper",(function(e,t,r,i){switch(t){case">":return e>r?i.fn(this):i.inverse(this);case"||":return e||r?i.fn(this):i.inverse(this);case"==":return e==r?i.fn(this):i.inverse(this)}})),Handlebars.registerHelper("timeFormat",(function(){return getDay(new Date(this.time).getTime())})),Handlebars.registerHelper("isDisplayActivitiesSection",(function(e,t){return e==crmModuleConstants.Tasks||e==crmModuleConstants.Events||e==crmModuleConstants.Calls||e==crmModuleConstants.PriceBooks||"Appointments"==e||"Services"==e?t.inverse(this):t.fn(this)})),Handlebars.registerHelper("getElementFromArrayByIndex",(function(e,t,r){return"undefined"!=e&&"first"==e?r.fn(t[0]):"undefined"!=e&&"last"==e?r.fn(t[t.length-1]):!isNaN(e)&&e<t.length?r.fn(t[e]):null})),Handlebars.registerHelper("unlessAll",(function(){for(var e=arguments.length-1,t=0;t<e;t++)if(1==arguments[t])return arguments[e].inverse(this);return arguments[e].fn(this)})),Handlebars.registerHelper("ifAnyExists",(function(){for(var e=arguments.length-1,t=0;t<e;t++)if(void 0!==arguments[t]){if(arguments[t]instanceof Array&&0==arguments[t].length)continue;return arguments[e].fn(this)}return arguments[e].inverse(this)})),Handlebars.registerHelper("ifAllExists",(function(){for(var e=arguments.length-1,t=0;t<e;t++)if(void 0!==arguments[t])return arguments[e].fn(this);return arguments[e].inverse(this)})),Handlebars.registerHelper("ifAllMatch",(function(){var e=arguments.length-1;if(e%3==0){for(var t=0;t<e;t+=3)if("false"===Handlebars.helpers.checkComparison(arguments[t],arguments[t+2],arguments[t+1]))return arguments[e].inverse(this);return arguments[e].fn(this)}return arguments[e].inverse(this)})),Handlebars.registerHelper("JSONtoString",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("logAll",(function(){for(var e=arguments.length-1,t=[],r=0;r<e;r++)t.push(arguments[r]);var i=console;i.log(t)})),Handlebars.registerHelper("ifAnyMatch",(function(){var e=arguments.length-1;if(e%3==0){for(var t=0;t<e;t+=3)if("true"===Handlebars.helpers.checkComparison(arguments[t],arguments[t+2],arguments[t+1]))return arguments[e].fn(this);return arguments[e].inverse(this)}return arguments[e].inverse(this)})),Handlebars.registerHelper("if_modify",(function(e,t){return"4"===e.type||"5"===e.type&&e.isAdmin?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("defaultValue",(function(e,t){return e||t})),Handlebars.registerHelper("extractValues",(function(e,t){var r=[];if(null!=e)for(var i=0;i<e.length;i++){var n=e[i][t];r[i]=void 0===n?0:n}return r})),Handlebars.registerHelper("calculateSum",(function(e){for(var t=0,r=0;r<e.length;r++)t+=parseFloat(e[r]);var i=t.toString().split(".");return null!=i[1]&&i[1].length>3&&(t=t.toFixed(3)),t})),Handlebars.registerHelper("getStatsForKey",(function(e,t,r){for(var i=[],n=0,s=0;s<e.length;s++)for(var a=e[s],l=0;l<a.length;l++){var o=a[l];if(o.period==t){i[n++]=o[r];break}}return i})),Handlebars.registerHelper("getStatsPercentage",(function(e,t,r,i,n){var s=0;if("true"==n){t=Handlebars.helpers.getStatsValue(e,t);r=Handlebars.helpers.getStatsValue(e,r);0!=i&&(i=Handlebars.helpers.getStatsValue(e,i))}if(!(null==r&&null==i||null==t||0==t||0==r&&0==i))return(s=null==r||0==r?100*t/i:null==i||0==i?100*t/r:100*t/(r+i))%1==0?0==s?s:s:s.toPrecision(3)})),Handlebars.registerHelper("replaceSpace",(function(e){return"string"==typeof e?e.replace(/\s+/g,"_"):e})),Handlebars.registerHelper("emptyWhiteSpace",(function(e){return"string"==typeof e?e.replace(/\s+/g,""):e})),Handlebars.registerHelper("trimSpace",(function(e){return"string"==typeof e?e.trim():e})),Handlebars.registerHelper("getStatsValue",(function(e,t){var r;return r=Handlebars.helpers.extractValues(e,t),Handlebars.helpers.calculateSum(r)})),Handlebars.registerHelper("updateObject",(function(e,t,r,i){return e[t]=r,i.fn(this)})),Handlebars.registerHelper("trOpen",(function(e,t,r){return e%parseInt(t)==0?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("tableSet",(function(e){detailView.tableSet=e})),Handlebars.registerHelper("whoId",(function(e){detailView.whoId=e})),Handlebars.registerHelper("isWhoId",(function(e){return"true"==detailView.whoId?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("isTableSet",(function(e){return detailView.tableSet?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("if_either",(function(e,t,r){return void 0!==e||void 0!==t?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("if_all",(function(e,t,r){return void 0!==e&&void 0!==t?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("if_true_any",(function(){for(var e=[].slice.apply(arguments),t=e.pop(),r=t.fn,i=0;i<e.length;++i)if(e[i])return r(this);return t.inverse(this)})),Handlebars.registerHelper("if_any_truthy",(function(){for(var e=arguments.length-1,t=0;t<=e;t++)if(arguments[t]&&arguments[t].constructor===Array&&arguments[t].length>0)return arguments[e].fn(this);return arguments[e].inverse(this)})),Handlebars.registerHelper("trClose",(function(e,t,r){return(e+1)%parseInt(t)==0?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("convertNumToString",(function(e){return e+""})),Handlebars.registerHelper("isParticipantsEmpty",(function(e,t){var r=e.option?e.option:"invited";return 0==Events.getParticipantsListBasedOnStatus(Events.getStatusFromString(r)).length&&0==$("#noParticipantDiv").length?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getColourButtonForInvitees",(function(e){switch(e.status){case 1:default:return"tag_round_green";case 3:return"tag_round_red";case 2:return"tag_round_yellow";case 0:return"tag_round_grey"}})),Handlebars.registerHelper("isEmpty",(function(e,t){return!e||e.length<1?t.inverse(this):t.fn(this)})),Handlebars.registerHelper("parseFloat",(function(e,t){return parseFloat(e)})),Handlebars.registerHelper("getData",(function(e){return"32"!==e.uitype&&"38"!==e.uitype&&"52"!==e.uitype&&"117"!==e.uitype||!0===e.checkFormat&&""!==e.formattedValue&&(e.outputValue=e.formattedValue),Crm.userDetails.CLIENT_ACCOUNT&&void 0!==Crm.userDetails.moduleVsCriteriaLookup[e.module]&&Crm.userDetails.moduleVsCriteriaLookup[e.module][0]===e.fieldid&&(e.readonly=!0),JSON.stringify(e)})),Handlebars.registerHelper("getPlainPhoneNo",(function(e){var t=commonUtils.getPlainPhoneNo(e);return t=0==t.indexOf("+")?t.substring(1):t})),Handlebars.registerHelper("getEntityId",(function(){return detailView.entityId})),Handlebars.registerHelper("getEntityName",(function(){return detailView.changedBCJson.hidden.entityName})),Handlebars.registerHelper("isZPBenabled",(function(){return Crm.userDetails.ZPBENABLED})),Handlebars.registerHelper("isHeadless",(function(){return Crm.isHeadless})),Handlebars.registerHelper("checkAndLoadZPBRecordingDep",(function(e,t){return void 0!==e&&1==e.length&&e[0].includes("phonebridge/recording/")?(CTIAPI.zpbRecDetails.required=!0,CTIAPI.loadRecording(),t.fn(e[0])):t.inverse(this)})),Handlebars.registerHelper("isZPBrecordingUrl",(function(e,t){return void 0!==e&&1==e.length&&e[0].includes("phonebridge/recording/")?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("stringify",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("isNotUndefined",(function(e,t){return e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("convertCurrencyValue",(function(e){if(e.length<1)return"";if(0==parseFloat(e))return"";var t=returnJson.entityMapJson.CURRENCYISOCODE?returnJson.entityMapJson.CURRENCYISOCODE.defaultvalue:void 0;return currencyUtils.returnValueInDefaultCurrency(t,e)})),Handlebars.registerHelper("getUrl",(function(e,t){if(/^\s*$/.test(e))return"";"22"==t&&(e=RebrandLinkUtil.getProperty("TW_URL")+"/"+e);return 0==e.toLowerCase().indexOf("https")||0==e.toLowerCase().indexOf("http")?e:"https://"+e})),Handlebars.registerHelper("getSingleUserModMap",(function(e){return moduleRecordMapping[e]?moduleRecordMapping[e].singular_label:null})),Handlebars.registerHelper("incre",(function(e,t){return parseInt(e)+1})),Handlebars.registerHelper("getDateTime",(function(e,t,r,i){if(!e||e.length<1)return"";if("786"==t||"14"==t||("116"==t||"118"==t)&&"date"!==r||"333"==t||"200"==t){var n=e.replace(/[+-]\d{2}:\d{2}/,""),s=new Date(n);return!i||"Native__Backstage__Extn__Event_Start_Date"!==i.sysRefName&&"Native__Backstage__Extn__Event_End_Date"!==i.sysRefName?Utils.getDateTimeInUserFormat(s,!0):Utils.getDateTimeInUserFormat(s,!0)+" "+i.timeZoneISOCode}if("24"==t||"202"==t||("116"==t||"118"==t)&&"date"===r){var a=new Date(e);return Utils.getDateInUserDatePattern(a,!0)}})),Handlebars.registerHelper("getDateInUserFormat",(function(e){if(!e||e.length<1)return"";var t=new Date(e);return Utils.getDateInUserDatePattern(t,!0)})),Handlebars.registerHelper("getDateTimeForEntity",(function(e){return Utils.getDateTimeForEntity(e)})),Handlebars.registerHelper("getDateTimeForEntityHover",(function(e){return Utils.getDateTimeForEntityHover(e)})),Handlebars.registerHelper("trOpen",(function(e,t,r){return e%parseInt(t)==0?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("checkForEditionWise",(function(e,t){return e.thisEditionFeature||e.higherEditionTry&&hignEdDivAvailInSetup?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("trClose",(function(e,t,r){return(e+1)%parseInt(t)==0?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getObj",(function(e,t){return getObj(e)?getObj(e).value:null})),Handlebars.registerHelper("getElemValueById",(function(e){return $("#"+e).val()?$("#"+e).val():null})),Handlebars.registerHelper("getProjectsPersonalityId",(function(){if(Crm.userDetails.isRelatedListLyteEnabled){var e=store.peekAll("related_list").filterBy({personality_name:"PROJECTSPERSONALITY"})[0];if(e)return"projectspersonality_"+e.id}else{var t=crmRelatedList.personalityArr.match(/(projectspersonality_[0-9]+)/g);if(t)return t[0]}return null})),Handlebars.registerHelper("containsKey",(function(e,t,r,i){for(var n=0;n<e.length;n++){if(e[n][t]==r)return!0}return!1})),Handlebars.registerHelper("getDetailViewImgId",(function(e,t,r){return e&&t?e+"_"+t+"_photo":r.inverse(this)})),Handlebars.registerHelper("isBC_View",(function(e){return 0==Crm.userDetails.CUSTOMIZE_INFO.BC_View||"false"==Crm.userDetails.CUSTOMIZE_INFO.BC_View?e.inverse(this):e.fn(this)})),Handlebars.registerHelper("each_reverse",(function(e,t){var r,i=t.fn,n=t.inverse,s=0,a="";if(Handlebars.Utils.isFunction(e)&&(e=e.call(this)),t.data&&(r=Handlebars.createFrame(t.data)),e&&"object"==typeof e)if(Handlebars.Utils.isArray(e)){s=e.length;for(var l=e.length-1;l>=0;l--)r&&(r.index=l,r.first=0===l,r.last=l===e.length-1),a+=i(e[l],{data:r})}else{var o=Object.keys(e);for(l=s=o.length;l>=0;l--){var d=o[l-1];e.hasOwnProperty(d)&&(r&&(r.key=d,r.value=e[d],r.index=l,r.first=0===l),a+=i(e[d],{data:r}))}}return 0===s&&(a=n(this)),a})),Handlebars.registerHelper("print",(function(e){console.log(e)})),Handlebars.registerHelper("findAndReplace",(function(e){return void 0!==e&&"string"==typeof e&&(e=e.replace(/[^a-zA-Z0-9]/g,"_")),e})),Handlebars.registerHelper("convertComparatorToDisplayText",(function(e,t){if("${EMPTY}"===t||"${NOTEMPTY}"===t)switch(e){case"=":e=I18n.getMsg("is");break;case"!=":e=I18n.getMsg("isn't")}else e="IS OPEN"===e&&t.contains("${OPEN}")?I18n.getMsg("is OPEN"):"IS WON"===e&&t.contains("${CLOSEDWON}")?I18n.getMsg("is WON"):"IS LOST"===e&&t.contains("${CLOSEDLOST}")?I18n.getMsg("is LOST"):I18n.getMsg(e);return e})),Handlebars.registerHelper("convertCompareValToDisplayText",(function(e,t){var r=1;$.isArray(t)&&(r=t.length);for(var i=[],n=0;n<r;n++){var s;switch(s=$.isArray(t)?t[n]:t,e){case"starts with":case"ends with":case"contains":case"doesn't contain":s=s.replace(/\*/g,"");break;case"is":case"isn't":case"=":case"!=":switch(s){case"${EMPTY}":case"${NOTEMPTY}":s=I18n.getMsg("Empty")}break;case"IS OPEN":case"IS WON":case"IS LOST":continue}i.push(s)}return i})),Handlebars.registerHelper("alert",(function(e){alert(e)})),Handlebars.registerHelper("increment",(function(e,t,r){return Number(e)+Number(t)})),Handlebars.registerHelper("decrement",(function(e,t,r){return Number(e)-Number(t)})),Handlebars.registerHelper("ifEqualsZero",(function(e,t){return 0===e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("notEqualsZero",(function(e){parseInt(e);return"0"==e?"":e})),Handlebars.registerHelper("I18nDynamicKey",(function(e,t){for(var r=[],i=2;i<arguments.length;i++)r.push(arguments[i]);return I18n.getMsg(e+t,r)})),Handlebars.registerHelper("chain",(function(){var e,t=[];return $.each(arguments,(function(r,i){if(!Handlebars.helpers[i])return e=i,$.each(t,(function(t,i){e=i(e,arguments[r+1])})),!1;t.push(Handlebars.helpers[i])})),e})),Handlebars.registerHelper("getRebrandKey",(function(e){return RebrandLinkUtil.getProperty(e)})),Handlebars.registerHelper("checkViewAvailability",(function(e,t,r){var i=t.isKanbanFeatureEnabledEditon&&t.isPickListAvailable&&-1==="Activities,Tasks,Calls,Events,Visits,Appointments,Services".indexOf(t.module)&&!crmTab.isZBCustomModule(t.module)&&!crmTab.isZSCustomModule(t.module),n=t.isCustomizedViewEnabled&&-1==="Activities,Tasks,Calls,Events,Visits,Appointments,Services".indexOf(t.module)&&!crmTab.isZBCustomModule(t.module)&&!crmTab.isZSCustomModule(t.module)&&!crmTab.isLinkingModule(t.module);if("kanban"===e&&!t.CLIENT_ACCOUNT){if(i){if(t.isKanbanViewEnabled){if(t.groupByFieldAvailable||t.isCustomizationPermissionAvailable)return r.fn(this)}else if(t.isCustomizationPermissionAvailable)return r.fn(this);return r.inverse(this)}return r.inverse(this)}if("customized"===e&&!t.CLIENT_ACCOUNT){var s=Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM||Crm.userDetails.permissions.Crm_Implied_Manage_CustomViews,a="null"!=t.canvasid;return n&&(s||a)?r.fn(this):r.inverse(this)}return"prediction"!==e||t.CLIENT_ACCOUNT?"tabular"===e?i||n?r.fn(this):r.inverse(this):void 0:t.isModulePredictionAvailable?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("objToString",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("toUpperCase",(function(e){return e})),Handlebars.registerHelper("ifCtiEnabled",(function(e){return e.fn(this)})),Handlebars.registerHelper("each_upto_with_index",(function(e,t,r,i){if(!e||0==e.length)return i.inverse(this);var n=[];r||(r=1),t||(t=crmListView.MAX_STAGECARD_CNT);for(var s=0;s<t&&s<e.length;s++)e[s].index=s+r,n.push(i.fn(e[s]));return n.join("")})),Handlebars.registerHelper("arrayLength",(function(e){return e?e.length:0})),Handlebars.registerHelper("FORMRIGHTPANEL",(function(e,t){var r="",i=e.length;if("action"==Object.keys(e[i-1])){var n=e[i-1].action;e.length=--i}for(var s=0;s<i;s++){var a=e[s],l="";if(a.class){l=a.class;delete a.class}var o=Object.keys(e[s]),d={REPORTID:o,REPORTNAME:$ESAPI.encoder().encodeForHTML(e[s][o]),ACTION:n,CLASS:l};r+=t.fn(d)}return r})),Handlebars.registerHelper("openRow",(function(e,t){return e%4==0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("closeRow",(function(e,t){return(e+1)%4==0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("updateSetupParam",(function(e,t,r){e.higherEditionTry=!0,t&&(e.higherEditionClick=!0),e.showonlyonhigheredition&&(e.showonlyonhigheredition=!0)})),Handlebars.registerHelper("getHigherEditionImageKey",(function(e,t,r){return FingerPrint.getImageUrl("default",e.tab+e.subTab+".svg")})),Handlebars.registerHelper("getMeetingHelpImageUrl",(function(e){return FingerPrint.getImageUrl("default",e+".png")})),Handlebars.registerHelper("getHigherEditionDispLabel",(function(e,t){return e.higherEditionFeatureLabel?e.higherEditionFeatureLabel:e.HeaderLabel})),Handlebars.registerHelper("constructHigherEditionKey",(function(e,t,r){var i;return i=(i=e.param&&e.param.messagekey?t+e.param.messagekey:t+e.tab+e.subTab).toLowerCase(),I18n.getMsg(i,Crm.partnerName)})),Handlebars.registerHelper("setTabSubTab",(function(e){var t=e.clickId;if(t){crmSetup.setupObject[e.routeName]=e,e.indexRoute&&(crmSetup.setupObject[e.routeName+"."+e.indexRoute]=e);var r=t.split("_"),i=r[0],n=r[1];e.tab=i,e.subTab=n}})),Handlebars.registerHelper("setSearchJSON",(function(e){mySetupArray.push(e)})),Handlebars.registerHelper("checkLength",(function(e,t){return e.length>1?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getValue",(function(e){return window[e]})),Handlebars.registerHelper("getToolName",(function(e){return Events.displayToolName[e]})),Handlebars.registerHelper("getMeetingErrorMsg",(function(e,t){var r=[];return r.push(Events.displayToolName[e]),r.push(Events.getModuleName(!0,!1,!0)),I18n.getMsg(t,r)})),Handlebars.registerHelper("checkInstalledTool",(function(e){var t=e.toolName;return!(!Events.getInstalledMeetingTools().contains(t)&&["JoinMeMeeting","GoToMeeting","WebexMeeting"].contains(t))})),Handlebars.registerHelper("incrementDivcnt",(function(e){crmSetup.setupDivNum++})),Handlebars.registerHelper("getSetupDivIndex",(function(e){return crmSetup.setupDivNum})),Handlebars.registerHelper("json",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("constructArr",(function(e){null!=e&&(crmSetup.highEdnArr[e.highEdnOrder]=e,crmSetup.highEdnArr[e.highEdnOrder].queryParams||(crmSetup.highEdnArr[e.highEdnOrder].queryParams={}),crmSetup.highEdnArr[e.highEdnOrder].queryParams.fromHigherEdition="true")})),Handlebars.registerHelper("resetDivCnt",(function(){crmSetup.setupDivNum=1})),Handlebars.registerHelper("setPermiLink",(function(e,t){var r=!1;for(var i in e)if(e.hasOwnProperty(i)&&"{}"!==JSON.stringify(e[i])){var n=e[i];"true"==n.dataPermission&&!r&&n.thisEditionFeature&&(e[0]=n,r=!0)}})),Handlebars.registerHelper("sethref",(function(e,t){var r=Crm.getCrmBasePath()+"/ShowSetup.do";e&&-1!=e.indexOf("_")&&(t.tab=e.split("_")[0],t.subTab=e.split("_")[1]);var i=0;for(var n in t)t[n]=encodeURIComponent(t[n]),r+=0==i?"?":"&",r+=n+"="+t[n],i++;return r})),Handlebars.registerHelper("getRelDetailsImgUrl",(function(e,t,r,i){return e&&t&&r?Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module="+e+"&entityId="+t+"&actionName=readImage&fileId="+r:"Accounts"===e?networkUtils.getImageUrl("companylogonew.svg",ResourceConstants.CRM):networkUtils.getImageUrl("nophoto.png",ResourceConstants.CRM)})),Handlebars.registerHelper("objContains",(function(e,t,r){return e.hasOwnProperty(t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("isEngLocale",(function(e){var t=Crm.userDetails;return Crm.userDetails.CLIENT_ACCOUNT?e.inverse(this):!t||"en_US"!==t.LOCALE&&"en_GB"!==t.LOCALE?void 0:e.fn(this)})),Handlebars.registerHelper("formatCurrencyValue",(function(e,t){return"null"==e||e.length<1||0==parseFloat(e)?"":currencyUtils.returnValueInDefaultCurrency(t,e)})),Handlebars.registerHelper("formatCurrencyValueWithZero",(function(e,t){return"null"==e||e.length<1?"":currencyUtils.returnValueInDefaultCurrency(t,e)})),Handlebars.registerHelper("formatCurrency",(function(e){if(e.length<1)return"";var t=returnJson&&returnJson.entityMapJson&&returnJson.entityMapJson.CURRENCYISOCODE?returnJson.entityMapJson.CURRENCYISOCODE.defaultvalue:void 0;return currencyUtils.returnValueInDefaultCurrency(t,e)})),Handlebars.registerHelper("removeGoogleimagesize",(function(e){return e.replace("?sz=50","?sz=500")})),Handlebars.registerHelper("firstLetterCap",(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),Handlebars.registerHelper("getCommaSeperatedStr",(function(){for(var e=arguments.length-1,t="",r=0;r<e;r++)arguments[r]&&""!==arguments[r]&&(t=""===t?arguments[r]:t+","+arguments[r]);return t})),Handlebars.registerHelper("nearmegt",(function(e,t,r){return void 0!==e&&void 0!==t&&e>t?t+"+":e})),Handlebars.registerHelper("concat",(function(e,t,r){for(var i=arguments.length-1,n="",s=0;s<i;s++)arguments[s]&&""!==arguments[s]&&(n=""===n?arguments[s]:n+arguments[s]);return n})),Handlebars.registerHelper("getUserImgUrlByZuId",(function(e){return"//"+RebrandLinkUtil.getProperty("CONTACTS_URL")+"/file?ID="+e+"&fs=thumb"})),Handlebars.registerHelper("getObjectByKey",(function(e,t){return e[t]})),Handlebars.registerHelper("getStateValueById",(function(e,t){var r="";if(void 0!==e&&void 0!==e[t])r=e[t].DisplayValue,e[t].ActualValue;return r})),Handlebars.registerHelper("getBpNoneDisValue",(function(){return"-None-"})),Handlebars.registerHelper("getBrandName",(function(){return Crm.brandName})),Handlebars.registerHelper("getHelpUrl",(function(e){switch(Crm.userDetails.LOCALE){case"fr_FR":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"fr/crm/help/"+crmConstants.helpUrl[e];case"es_ES":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"es-xl/crm/help/"+crmConstants.helpUrl[e];case"pt_BR":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"pt-br/crm/help/"+crmConstants.helpUrl[e];case"de_DE":return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"de/crm/help/"+crmConstants.helpUrl[e];default:return crmConstants.helpUrl["help.domain.url"]+crmConstants.helpUrl[e]}})),Handlebars.registerHelper("getHelpUrlNew",(function(e){return RebrandLinkUtil.getProperty("HELPLINK_URL_NEW")+"crm/"+crmConstants.helpUrl[e]})),Handlebars.registerHelper("getI18nForKeyAlone",(function(){var e=arguments.length-1;if(1===e)return I18n.getMsg(arguments[0]);for(var t=arguments[0],r=[],i=1;i<e;i++)r.push(arguments[i]);return I18n.getMsg(t,r)})),Handlebars.registerHelper("parseDate",(function(e){if(void 0!==e){var t=e,r=[];return e.title_time=t.disp_time,void 0!==t.key&&void 0!==t.diff?(r.push(t.diff),e.disp_time=I18n.getMsg(t.key,r)):void 0===t.diff?e.disp_time=I18n.getMsg(t.key):void 0===t.key&&(e.disp_time=t.diff),e.disp_time}return""})),Handlebars.registerHelper("changeNum",(function(e){var t=parseInt(e);return t>=1e3&&t<=999999?t=(t/1e3).toFixed(1)+"K":t>1e6&&(t=(t/1e6).toFixed(1)+"M"),t})),Handlebars.registerHelper("customizeCRMProfileCheck",(function(e){if("Tasks"!=e&&"Activities"!=e&&"Events"!=e&&"Calls"!=e){var t=Crm.userDetails.LICENSE_TYPE;return Crm.userDetails.permissions.Crm_Implied_Customize_Zoho_CRM&&("A"==t||"E"==t||"U"==t||"C"==t||"Z"==t)}return!1})),Handlebars.registerHelper("isPaidAccount",(function(e){return"F"===Crm.userDetails.LICENSE_TYPE_ACTUAL||"N"===Crm.userDetails.LICENSE_TYPE_ACTUAL||"L"===Crm.userDetails.LICENSE_TYPE_ACTUAL?e.inverse(this):e.fn(this)})),Handlebars.registerHelper("getArray",(function(e){var t=[];e=e.split(",");for(var r=0;r<e.length;r++)t.push(e[r]);return t})),Handlebars.registerHelper("removeProtocol",(function(e){return e.replace(/^https?\:\/\//i,"")})),Handlebars.registerHelper("removehttps",(function(e){return e.replace(/^https?:/i,"")})),Handlebars.registerHelper("setIndex",(function(e){this.index=Number(e)})),Handlebars.registerHelper("setKey",(function(e){this.key=e})),Handlebars.registerHelper("setValue",(function(e,t){t&&e&&(this[e]=t)})),Handlebars.registerHelper("isValidJsonObj",(function(e,t){return validationUtils.isJson(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getStaticCssPathFromHelper",(function(e){var t=FingerPrint.basePathUrl+ResourceConstants.CSS+"/";if(FingerPrint.isCdnEnabled){var r=commonUtils.getfingerPrintProperties(e);return networkUtils.getCdnUrl("CRM")+t+r}return t+e})),Handlebars.registerHelper("addOnlineClass",(function(e,t){return"object"==typeof CrmTracking&&CrmTracking.isEntityOnline(e,t)?"online-entity":""})),Handlebars.registerHelper("isEntityOnline",(function(e,t,r){return"object"==typeof CrmTracking&&CrmTracking.isEntityOnline(e,t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("addClassForVT",(function(e,t){return"Leads"!=e&&"Contacts"!=e||crmListView.moduleVsDispCol[e]!=t?"":"pL10"})),Handlebars.registerHelper("formRuleParent",(function(e){return Handlebars.templates.formRuleParent(e)})),Handlebars.registerHelper("formRuleBranch",(function(e){return Handlebars.templates.formRuleBranch(e)})),Handlebars.registerHelper("formRuleActions",(function(e,t,r,i){return e=t?{actiontypes:e,parentquery:t,module:CFRCust.currFormRuleModule,triggerIdAttr:"Trigger_"+r,isSubformAvailable:CFRCust.subformAvailable,internallayoutrule:i,isMxNFieldLayoutRule:CFRCust.isMxNField}:{actiontypes:e,module:CFRCust.currFormRuleModule,triggerIdAttr:"Trigger_"+r,isSubformAvailable:CFRCust.subformAvailable,internallayoutrule:i,isMxNFieldLayoutRule:CFRCust.isMxNField},Handlebars.templates.formRuleActions(e)})),Handlebars.registerHelper("ifObject",(function(e,t){return"object"==typeof e&&"[object Object]"===e.toString()||e instanceof Array?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifNotString",(function(e,t){return"string"!=typeof e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getSectionName",(function(e,t){return e.name.replace(/ |'/g,"_")})),Handlebars.registerHelper("stringConcat",(function(e,t){return void 0!==e&&void 0!==t?e+t:void 0!==e?e:t})),Handlebars.registerHelper("getSocialTitle",(function(e){return"googleplus"===e&&(e="gplus"),I18n.getMsg("crm.nsocial.title."+e)})),Handlebars.registerHelper("getTextWithRawHtml",(function(e){return $("<div />").html(e).text()})),Handlebars.registerHelper("timeInDoubleToReadableForm",(function(e,t){return"TIMESPENT"==e||"AVERAGETIMESPENT"==e?Utils.convertTimeInDoubleToReadableForm(t):t})),Handlebars.registerHelper("getSocialCreatorI18n",(function(e){switch(e){case"twitter":return I18n.getMsg("crm.nsocial.setup.tw.creators");case"facebook":return I18n.getMsg("crm.nsocial.setup.fb.creators");case"googleplus":return I18n.getMsg("crm.nsocial.setup.gp.creators")}})),Handlebars.registerHelper("getSocialResponderI18n",(function(e){switch(e){case"twitter":return I18n.getMsg("crm.nsocial.setup.tw.responders");case"facebook":return I18n.getMsg("crm.nsocial.setup.fb.responders");case"googleplus":return I18n.getMsg("crm.nsocial.setup.gp.responders")}})),Handlebars.registerHelper("checkObjLength",(function(e,t){return objectUtils.getLength(e)>0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getValueFromJSONObj",(function(e,t){return t[e]})),Handlebars.registerHelper("getSplittedFirstValue",(function(e,t){return e.split(t)[0]})),Handlebars.registerHelper("getValueFromArrayOfObj",(function(e,t,r){return e[r][t]})),Handlebars.registerHelper("checkIfFileUploadNotEmpty",(function(e){return void 0!==e.defaultvalue&&void 0!==e.defaultvalue.length&&"555"===e.uitype&&e.defaultvalue.length>0})),Handlebars.registerHelper("getFilesDataForCrux",(function(e){return JSON.stringify(Lyte.registeredMixins["crm-uploadfields-mixin"].getFileDataInCruxFormat(e.defaultvalue))})),Handlebars.registerHelper("getFieldDataFileUploadCrux",(function(e){return e.field_label=e.label,JSON.stringify(e)})),Handlebars.registerHelper("getFileUplaodOptionsForCrux",(function(){var e=Lyte.registeredMixins["crm-uploadfields-mixin"].getOptionsForFileUploadField();return JSON.stringify(e)})),Handlebars.registerHelper("getValueFromObj",(function(e,t,r,i,n,s,a){var l=null!=r&&500===r?t.$subforms_count[e]:t[e];if(null!=l){if("object"==typeof l){if("555"==r){if("master"==i){var o=0,d=0;fileupload.mergeCountVariable=0;var c='<ul id="masterFileDetails_'+t.id+'" class="m0 p0">',u=[];if(a<l.length)return fileupload.masterAttachIdList[s]=u,fileupload.masterAttachedCountList[s]=o,fileupload.masterAttachedSizeList[s]=d,c+="</ul>";for(var m=0;m<l.length;m++){var p=(C=l[m].file_Name.split("."))[C.length-1],g=showImageType(p);c+=y='<li id="master_'+l[m].attachment_Id+'" class="m0 pL0 pT7 pB0 pR0"><span class="dIB vaT mT1 fileIconDefault svgIconsImg mR10 '+g+'"></span>'+$ESAPI.encoder().encodeForHTML(l[m].file_Name)+"</li>",u.push(l[m].attachment_Id),o++,d+=parseInt(l[m].original_Size_Byte)}fileupload.masterAttachIdList[s]=u,fileupload.masterAttachedCountList[s]=o,fileupload.masterAttachedSizeList[s]=d}else{for(var f=!1,h=l.length,v=0;v<h;v++)f=!!fileupload.masterAttachIdList[s].contains(l[v].attachment_Id);c='<ul id="fileList_'+t.id+"_field_"+n+'"  name='+s+"  data-params='"+$ESAPI.encoder().encodeForHTML(JSON.stringify(l))+"' data-maxlen='"+a+'\' class="m0 p0">';if(f)var b='<li id="all_Record" class="m0 pL0 pT10 pB10 pR0"><label class="newCustomchkbox-md mR10"><input type="checkbox" checked id="checkbox_all" data-zcqa="dedup_mergevalue_all"  onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','all','"+s+'\')"><span  class="vaM chkbxIcon"></span></label>'+I18n.getMsg("crm.all.files")+"</li>";else if(fileupload.mergeCountVariable==fileupload.masterAttachedCountList[s]&&(fileupload.masterAttachedCountList[s]>=a||fileupload.masterAttachedSizeList[s]>20971520))b='<li id="all_Record" class="m0 pL0 pT10 pB10 pR0"><label class="newCustomchkbox-md mR10"><input type="checkbox" disabled id="checkbox_all" data-zcqa="dedup_mergevalue_all"  onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','all','"+s+'\')"><span  class="vaM chkbxIcon"></span></label>'+I18n.getMsg("crm.all.files")+"</li>";else b='<li id="all_Record" class="m0 pL0 pT10 pB10 pR0"><label class="newCustomchkbox-md mR10"><input type="checkbox" id="checkbox_all" data-zcqa="dedup_mergevalue_all"  onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','all','"+s+'\')"><span class="vaM chkbxIcon"></span></label>'+I18n.getMsg("crm.all.files")+"</li>";c+=b;for(m=0;m<h;m++){fileupload.attachMap[l[m].attachment_Id]=JSON.stringify(l[m]);var C;p=(C=l[m].file_Name.split("."))[C.length-1],g=showImageType(p);if(f){var y='<li id="record_'+l[m].attachment_Id+'" class="m0 pL20 pT7 pB0 pR0"><label class="newCustomchkbox-md mR15"><input type="checkbox" disabled="disabled" name="property(\''+s+'\')" checked  id="checkbox'+l[m].attachment_Id+'" data-zcqa="dedup_mergevalue_'+n+'" value="'+n+'" onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','"+l[m].attachment_Id+"','"+s+"')\"><span onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');"  onmouseleave="crmui.hideTooltip(this);"  class="vaM chkbxIcon"></span></label><span class="dIB vaT mT1 fileIconDefault svgIconsImg mR10 '+g+'"></span>'+$ESAPI.encoder().encodeForHTML(l[m].file_Name)+"</li>";fileupload.mergeCountVariable++}else if(fileupload.mergeCountVariable==fileupload.masterAttachedCountList[s]&&(fileupload.masterAttachedCountList[s]>=a||fileupload.masterAttachedSizeList[s]>20971520))y='<li id="record_'+l[m].attachment_Id+'" class="m0 pL20 pT7 pB0 pR0"><label class="newCustomchkbox-md mR15"><input type="checkbox" name="property(\''+s+'\')" disabled  id="checkbox'+l[m].attachment_Id+'" data-zcqa="dedup_mergevalue_'+n+'" value="'+n+'" onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','"+l[m].attachment_Id+"','"+s+"')\"><span onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');"  onmouseleave="crmui.hideTooltip(this);"  class="vaM chkbxIcon"></span></label><span class="dIB vaT mT1 fileIconDefault svgIconsImg mR10 '+g+'"></span>'+$ESAPI.encoder().encodeForHTML(l[m].file_Name)+"</li>";else y='<li id="record_'+l[m].attachment_Id+'" class="m0 pL20 pT7 pB0 pR0"><label class="newCustomchkbox-md mR15"><input type="checkbox" name="property(\''+s+'\')" id="checkbox'+l[m].attachment_Id+'" data-zcqa="dedup_mergevalue_'+n+'" value="'+n+'" onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','"+l[m].attachment_Id+"','"+s+"')\"><span onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');"  onmouseleave="crmui.hideTooltip(this);"  class="vaM chkbxIcon"></span></label><span class="dIB vaT mT1 fileIconDefault svgIconsImg mR10 '+g+'"></span>'+$ESAPI.encoder().encodeForHTML(l[m].file_Name)+"</li>";c+=y}}return c+="</ul>"}if("556"==r){if("master"==i){o=0,d=0;imageupload.mergeCountVariable=0;c='<ul id="masterFileDetails_'+t.id+'" class="m0 p0">',u=[];var H=l.length;if(1==H&&null!=l[0].State)return imageupload.masterAttachIdList[s]=u,imageupload.masterAttachedCountList[s]=o,imageupload.masterAttachedSizeList[s]=d,c+="</ul>";for(m=0;m<H;m++){p=(I=l[m].File_Name.split("."))[I.length-1],g=showImageType(p);c+=y='<li id="master_'+l[m].id+'" class="m0 pL15 pT7 pB0 pR0 dIB"><img data-zcqa="masterimage_'+l[m].id+'" src = "" height="80px">​<crm-ui-loaders interaction-class="crmImageLoader" interaction-name="crmPlaceholderLoader"></crm-ui-loaders></li>',u.push(l[m].id),o++,d+=parseInt(l[m].Size)}imageupload.masterAttachIdList[s]=u,imageupload.masterAttachedCountList[s]=o,imageupload.masterAttachedSizeList[s]=d}else{f=!1;if(1==(h=l.length)&&null!=l[0].State)return"";for(v=0;v<h;v++)f=!!imageupload.masterAttachIdList[s].contains(l[v].id);c='<ul id="fileList_'+t.id+"_field_"+n+'"  name='+s+"  data-params='"+$ESAPI.encoder().encodeForHTML(JSON.stringify(l))+"' data-maxlen='"+a+'\' class="m0 p0">';if(f)b='<li id="all_Record" class="m0 pL0 pT10 pB10 pR0"><label class="newCustomchkbox-md mR10"><input type="checkbox" checked id="checkbox_all" data-zcqa="dedup_mergevalue_all"  onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','all','"+s+"')\"><span  onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');" onmouseleave="crmui.hideTooltip(this);" class="vaM chkbxIcon zi1"></span></label>'+I18n.getMsg("crm.all.images")+"</li>";else if(imageupload.mergeCountVariable==imageupload.masterAttachedCountList[s]&&(imageupload.masterAttachedCountList[s]>=a||imageupload.masterAttachedSizeList[s]>20971520))b='<li id="all_Record" class="m0 pL0 pT10 pB10 pR0"><label class="newCustomchkbox-md mR10"><input type="checkbox" disabled id="checkbox_all" data-zcqa="dedup_mergevalue_all"  onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','all','"+s+"')\"><span  onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');" onmouseleave="crmui.hideTooltip(this);" class="vaM chkbxIcon zi1"></span></label>'+I18n.getMsg("crm.all.images")+"</li>";else b='<li id="all_Record" class="m0 pL0 pT10 pB10 pR0"><label class="newCustomchkbox-md mR10"><input type="checkbox" onmouseover="crmDeduplicate.showToolTip(this,\''+a+"'),'"+r+'\';" onmouseleave="crmui.hideTooltip(this);"  id="checkbox_all" data-zcqa="dedup_mergevalue_all"  onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','all','"+s+"')\"><span  onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');" onmouseleave="crmui.hideTooltip(this);" class="vaM chkbxIcon zi1"></span></label>'+I18n.getMsg("crm.all.images")+"</li>";c+=b;for(m=0;m<h;m++){imageupload.attachMap[l[m].id]=JSON.stringify(l[m]);var I;p=(I=l[m].File_Name.split("."))[I.length-1],g=showImageType(p);if(f){y='<li id="record_'+l[m].id+'" class="m0 pL15 pT7 pB0 pR0 pR deDuplicationImgCheck"><label class="newCustomchkbox-md"><input style="display:none" type="checkbox" name="property(\''+s+"')\" onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');"  onmouseleave="crmui.hideTooltip(this);" checked  id="checkbox'+l[m].id+'" data-zcqa="dedup_mergevalue_'+n+'" value="'+n+'" onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','"+l[m].id+"','"+s+"')\"><span  onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');" onmouseleave="crmui.hideTooltip(this);" class="vaT chkbxIcon zi1"></span></label><img data-zcqa="image_'+n+'" src = "" height="80px">​<crm-ui-loaders interaction-class="crmImageLoader" interaction-name="crmPlaceholderLoader"></crm-ui-loaders></li>';imageupload.mergeCountVariable++}else if(imageupload.mergeCountVariable==imageupload.masterAttachedCountList[s]&&(imageupload.masterAttachedCountList[s]>=a||imageupload.masterAttachedSizeList[s]>20971520))y='<li id="record_'+l[m].id+'" class="m0 pL15 pT7 pB0 pR0 pR deDuplicationImgCheck"><label class="newCustomchkbox-md"><input style="display:none" type="checkbox" name="property(\''+s+"')\" onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');"  onmouseleave="crmui.hideTooltip(this);" disabled  id="checkbox'+l[m].id+'" data-zcqa="dedup_mergevalue_'+n+'" value="'+n+'" onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','"+l[m].id+"','"+s+"')\"><span  onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');" onmouseleave="crmui.hideTooltip(this);" class="vaT chkbxIcon zi1"></span></label></span><img data-zcqa="image_'+n+'" src = "" height="80px">​<crm-ui-loaders interaction-class="crmImageLoader" interaction-name="crmPlaceholderLoader"></crm-ui-loaders></li>';else y='<li id="record_'+l[m].id+'" class="m0 pL15 pT7 pB0 pR0 pR deDuplicationImgCheck"><label class="newCustomchkbox-md"><input style="display:none" type="checkbox" name="property(\''+s+"')\" onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');"  onmouseleave="crmui.hideTooltip(this);"  id="checkbox'+l[m].id+'" data-zcqa="dedup_mergevalue_'+n+'" value="'+n+'" onclick="crmDeduplicate.setValueForMasterRecord(\''+n+"','"+r+"','"+t.id+"','"+l[m].id+"','"+s+"')\"><span  onmouseover=\"crmDeduplicate.showToolTip(this,'"+a+"','"+r+'\');" onmouseleave="crmui.hideTooltip(this);" class="vaT chkbxIcon zi1"></span></label><img data-zcqa="image_'+n+'" src = "" height="80px">​<crm-ui-loaders interaction-class="crmImageLoader" interaction-name="crmPlaceholderLoader"></crm-ui-loaders></li>';c+=y}}return c+="</ul>"}if(null!=l.name)return l.name;var E=null;if($.isArray(l)){var L=l.length;for(v=0;v<L;v++)E=r&&209==r?null==E?l[v].name:E+","+l[v].name:null==E?l[v]:E+";"+l[v]}return E}if(500===r)return 0===l?"0 "+I18n.getMsg("crm.module.subform.row"):l+" "+(1==l?I18n.getMsg("crm.module.subform.row"):I18n.getMsg("crm.module.subform.rows"));if("786"==r||"14"==r||"116"==r||"333"==r||"200"==r){var T=l.replace(/[+-]\d{2}:\d{2}/,""),D=$L.moment(T).toDate();return Utils.getDateTimeInUserFormat(D,!0)}if("24"==r||"202"==r){var S=l.split("-"),w=S[0],M=S[1]+","+S[2]+","+w;return Utils.getDateInUserDatePattern(new Date(M),!0)}if("118"==r){if("date"===i&&void 0!==l)l=Utils.getDateInUserDatePattern($L.moment(l).toDate());else if("datetime"===i&&void 0!==l)l=Utils.getUserDateTimeFormatFromServerFormat(l);else if("currency"===i&&void 0!==l){var _=t.Currency;if(featuresAvailable&&featuresAvailable.MultiCurrency&&_&&null!=_&&Crm.userDetails.CURRENCY_DETAILS&&void 0!==Crm.userDetails.CURRENCY_DETAILS[_])l=currencyUtils.returnValueInDefaultCurrency(_,l,Crm.userDetails.CURRENCY_DETAILS[_].decimals);else{if(!_||null==_)return l;l=currencyUtils.returnValueInDefaultCurrency(_,l)}}return l}return l}return" "})),Handlebars.registerHelper("getCheckedIndex",(function(e,t,r){var i=0,n=null;if(e.length>0){var s=null!=r&&500===r?e[0].$subforms_count[t]:e[0][t],a=null;if($.isArray(s)&&"Tag"!=t)for(var l=s.length,o=0;o<l;o++)a=null==a?s[o]:a+";"+s[o];else if(a=s,"Tag"==t&&$.isArray(s)){for(var d=[],c=(l=s.length,0);c<l;c++)d.push(s[c].name);a=d}if("Exchange_Rate"==t||"Created_Time"==t||"Modified_Time"==t||"Owner"==t||"Score"==t||"Touch_Point_Score"==t||"Lead_Score"==t)return" ";for(var u=1;u<e.length;u++){var m=e[u][t];if($.isArray(m)&&"Tag"!=t){var p=null;for(l=m.length,o=0;o<l;o++)p=null==p?m[o]:p+";"+m[o];m=p}else if("Tag"==t&&$.isArray(m)){var g=m.length;for(d=[],o=0;o<g;o++)d.push(m[o].name),p=d;m=p}if("object"==typeof a?null===a?a==m&&i++:("Tag"!=t&&null!==m&&null!==a.id&&a.id===m.id||a===m||"Tag"==t&&JSON.stringify(a)==JSON.stringify(m))&&i++:a==m&&i++,null===n&&null!==a?n=0:null==n&&null!=m&&(n=u),i==e.length-1)return" "}}return n})),Handlebars.registerHelper("for",(function(e,t,r,i){for(var n="",s=e;s<=t;s+=r)n+=i.fn(s);return n})),Handlebars.registerHelper("getSocialInteration",(function(e){switch(e){case"mention":return I18n.getMsg("crm.social.tweet.on",["",""]);case"reply":return I18n.getMsg("crm.social.replied.to",["",""]);case"post":case"status":case"other_post":return I18n.getMsg("crm.social.posted.on",["",""]);case"comment":return I18n.getMsg("crm.social.comment.to",["",""])}})),Handlebars.registerHelper("getTimeInUserTZ",(function(e,t,r){var i=[];if(!e||e.length<1)return r.inverse(this);var n=new Date(e),s=n.getTime()+6e4*n.getTimezoneOffset(),a=new Date(s-6e4*Utils.getTimezoneOffset());if("dueDate"==t||"createdTime"==t){var l=new Date,o=l.getTime()+6e4*l.getTimezoneOffset(),d=new Date(o-6e4*Utils.getTimezoneOffset());if(d.getFullYear()==a.getFullYear()&&d.getMonth()==a.getMonth())switch(d.getDate()-a.getDate()){case 0:i.push("Today");break;case 1:i.push("Yesterday");break;case-1:i.push("Tomorrow")}}return 0==i.length&&i.push(Utils.getDateInUserDatePattern(a,!0)),i.push(Utils.getDateTimeInUserFormat(a,!0)),r.fn(this,{data:r.data,blockParams:i})})),Handlebars.registerHelper("getUserImg",(function(e){return deskInteg.getUserImage(e)})),Handlebars.registerHelper("executeIfObjPresent",(function(e,t,r){var i=[],n=e[t];return n?(i.push(n),r.fn(this,{data:r.data,blockParams:i})):r.inverse(this)})),Handlebars.registerHelper("getCurrentModule",(function(){return CrmPageLayout.module})),Handlebars.registerHelper("greaterThanZero",(function(e){return!(!e||""==e)&&parseInt(e)>0})),Handlebars.registerHelper("ifContainsInArray",(function(e,t){return[4,5,6,7].includes(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("hasKeys",(function(e){var t=!1;return Object.keys(e).length>0&&(t=!0),t})),Handlebars.registerHelper("ifArrayHas",(function(e,t,r){return null==t||null==e?r.inverse(this):-1!=e.indexOf(t)?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getElementFromArraybyIndex",(function(e,t){return"undefined"!=e&&"first"==e?t[0]:"undefined"!=e&&"last"==e?t[t.length-1]:!isNaN(e)&&e<t.length?t[e]:-1})),Handlebars.registerHelper("checkRefreshReq",(function(e,t){return crmSetup.allowMultiClick[e]?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getUserDatePattern",(function(){return Crm.userDetails.DATE_PATTERN.replace(/'/g,"").toUpperCase()})),Handlebars.registerHelper("getObjectLength",(function(e){return e?objectUtils.getLength(e):0})),Handlebars.registerHelper("getUserTimePattern",(function(){return Crm.userDetails.TIME_FORMAT})),Handlebars.registerHelper("getTimeIn12HrFormat",(function(e){var t=e.split(":"),r=t[0],i=t[1],n="AM";return 0==r?r=12:12==r?n="PM":r>12&&(r-=12,n="PM"),r<10&&1===r.toString.length&&(r="0"+r),r+":"+i+" "+(n=I18n.getMsg(n))})),Handlebars.registerHelper("getExtnTypeClass",(function(e){var t=e.split(".");return e=(e=t[t.length-1]).toLowerCase(),showImageType(e)})),Handlebars.registerHelper("getWidgetsList",(function(e){var t;t=e.length>2?2:e.length;for(var r="",i=0;i<t;i++)r=r+I18n.getMsg("crm.label.widgets."+e[i])+",";return r=r.substring(0,r.length-1),r+=" ",t<e.length&&(r+="<span class='crmNotFoundColor'>and </span><a href='javascript:;' onclick='crmWidgetsObj.showAllAssociatedPlace();sE(event);' class='crm-small-font-size'>"+(e.length-t)+" more</a>"),r})),Handlebars.registerHelper("getSeletedColumn",(function(e){var t="";return $("#"+e+" td").each((function(){$(this).hasClass("sel")&&(t=$(this)[0].id)})),t})),Handlebars.registerHelper("hasNext",(function(e,t){var r=!1;-1!=e.indexOf(t)&&(e.indexOf(t)+1<e.length&&(r=!0));return r})),Handlebars.registerHelper("restAPIAuth",(function(e){if(e&&null!=e){for(var t,r=0;r<e.length;r++){var i=e[r];1==i.active&&(t=t?t+" "+I18n.getMsg("crm.label.and").toLowerCase()+" "+I18n.getMsg("crm.label.cf.restapi.type."+i.type):I18n.getMsg("crm.label.cf.restapi.type."+i.type))}return t}})),Handlebars.registerHelper("getDREDataTypes",(function(e){switch(e=e.toLowerCase()){case"timestamp":e="date";break;case"bigint":e="int";break;case"decimal":e="float";break;case"boolean":e="bool";break;case"list":e="list";break;case"map":e="map";break;case"void":e="void";break;case"string":e="string"}return e})),Handlebars.registerHelper("isTrialFeatureEnabled",(function(e,t){return Crm.userDetails[e]?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getUserStatus",(function(e,t){return Crm.userDetails[e]?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isDRSetupEnabled",(function(e){return Crm.env.isROMode?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("getISODateFormatToTime",(function(e){var t=new Date(e);return Utils.getTimeInUserFormat(t,!1)})),Handlebars.registerHelper("getISODateFormatToDate",(function(e){var t=new Date(e);return!t||t.length<1?"":Utils.getDateInUserDatePattern(t,!0)})),Handlebars.registerHelper("getISODateFormatToDateTime",(function(e){var t=new Date(e);return Utils.getDateTimeInUsrFmtWithoutLbl(t,!1)})),Handlebars.registerHelper("arrayReadableSeperator",(function(e){var t="";for(i=0;i<e.length;i++)i>0&&(e.length-1==i?t=t+" "+I18n.getMsg("crm.label.lowercase.and")+" ":t+=", "),t+=e[i];return t})),Handlebars.registerHelper("getDateInUsrLocaleFormat",(function(e){var t=null;return e&&(t=Utils.getDateInUsrLocaleFormat(new Date(e))),t})),Handlebars.registerHelper("getValueFromElement",(function(e,t){var r=$.parseHTML(e),i=$(r).attr("data-params");return i?JSON.parse(i)[t]:null})),Handlebars.registerHelper("getDisplayLabel",(function(e,t){return t[e]})),Handlebars.registerHelper("getStyleData",(function(e,t){var r=store.peekAll("field").filterBy({api_name:e}).filter((function(e){if(e.module&&e.module[0].module_name===detailView.currentModule)return e}));return null!==r&&r[0]&&2===r[0].ui_type&&r[0].enable_colour_code?getPicklistStyleObj(t.valueOf(),r[0].pick_list_values):t})),Handlebars.registerHelper("getKeyFromArrOfObj",(function(e,t){var r=e[t];return Object.keys(r)})),Handlebars.registerHelper("getValueFromArrOfObj",(function(e,t,r){return e.length>0?e[r][t]:0})),Handlebars.registerHelper("getCountOfConfigByType",(function(e,t){for(var r=0,i=0;i<e.length;i++){t===e[i].schedule_type&&r++}return r})),Handlebars.registerHelper("checkArrOfObjContains",(function(e,t,r){for(var i=e.length,n=0;n<i;n++){if(e[n][t]==r)return!0}return!1})),Handlebars.registerHelper("checkUserPermission",(function(e,t){return Crm.userDetails.permissions[e]?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("hasKey",(function(e,t,r){return"object"==typeof e&&e[t]?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("keyAt",(function(e,t){if("object"==typeof e)return Object.keys(e)[t]})),Handlebars.registerHelper("replaceFormulaComma",(function(e){return"number"==e.formulaType?e.defaultvalue.replace(/,/g,""):e.defaultvalue})),Handlebars.registerHelper("isLastIteration",(function(e,t,r){return e.length==t+1?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getPluralModuleLabel",(function(e){return moduleRecordMapping[e].plural_label})),Handlebars.registerHelper("getSingularModuleLabel",(function(e){return moduleRecordMapping[e].singular_label})),Handlebars.registerHelper("getCrmBasePath",(function(){return Crm.getCrmBasePath()})),Handlebars.registerHelper("italic",(function(e){var t=e.lastIndexOf("-"),r=e.substring(t+1).trim();return r&&moduleRecordMapping[r]&&moduleRecordMapping[r].plural_label&&(r=moduleRecordMapping[r].plural_label),e.substring(0,t+1)+"<i> "+r+"</i>"})),Handlebars.registerHelper("convertISOtoDatetoUserDate",(function(e){if(e){var t=e.split("T"),r=-1!=t[1].indexOf("+")?"+":"-",i=t[1].split(r),n=t[0].split("-"),s=i[0].split(":"),a=new Date;return a.setFullYear(parseInt(n[0])),a.setMonth(parseInt(n[1])-1),a.setDate(parseInt(n[2])),a.setHours(parseInt(s[0])),a.setMinutes(parseInt(s[1])),a.setSeconds(parseInt(s[2])),Utils.getDateTimeInUserFormat(a,!0)}return e})),Handlebars.registerHelper("isDateTimeOrDateTimeFormula",(function(e,t,r){return null!=e&&("116"==e||"118"==e)&&(null!=t&&"datetime"==t||"date"===t)||["333","14","24","202","786"].indexOf(e.toString())>-1?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("showHelpDocInChina",(function(e){return Crm.userDetails.LOCALE.includes("zh")?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("isNotDateTimeFormula",(function(e,t){return null==e||"datetime"!=e&&"date"!=e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("checkPermissionAvailable",(function(e){return null!=Crm.userDetails.permissions[e]})),Handlebars.registerHelper("isModuleViewable",(function(e){if(void 0!==e&&void 0!==moduleRecordMapping[e])return moduleRecordMapping[e].viewable})),Handlebars.registerHelper("isDeskEnabledinSocial",(function(e){return null!=zsoTab&&zsoTab.desk_supported_org?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("isCallFromSalesSignals",(function(e,t){return void 0!==e&&e.includes("salessignals")?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isShowRestAPIFromManageSignals",(function(e,t){return void 0!==e&&"salessignals_show_restAPI_manageSig"===e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("updateFunctionName_ss",(function(e){return e.name.replace(" ","").toLowerCase()})),Handlebars.registerHelper("showRow",(function(e,t,r){return void 0!==t&&t.includes("salessignals")&&"oauth"===e?r.inverse(this):r.fn(this)})),Handlebars.registerHelper("canShowHelpVideo",(function(e){return Crm.userDetails.DEPLOYMENT.includes("China")||Crm.userDetails.DEPLOYMENT.includes("skyDesk")||Crm.userDetails.LOCALE.includes("zh")||isMobileBrowser()||!Crm.showZohoCRMStampedEntity?e.inverse(this):e.fn(this)})),Handlebars.registerHelper("isHebrewUser",(function(e){return Crm.userDetails.LOCALE.includes("iw")?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("isPremiumUser",(function(){var e=Crm.userDetails.LICENSE_TYPE;return"U"==e||"A"==e||"E"==e||"C"==e||"Z"==e})),Handlebars.registerHelper("descTrim",(function(e){return e.length>30&&(e=e.slice(0,30)+"..."),e})),Handlebars.registerHelper("returnJsonValue",(function(e){return e||"-"})),Handlebars.registerHelper("array",(function(){return Array.prototype.slice.call(arguments,0,-1)})),Handlebars.registerHelper("descTrim",(function(e){return e.length>30&&(e=e.slice(0,30)+"..."),e})),Handlebars.registerHelper("returnJsonValue",(function(e){return e||"-"})),Handlebars.registerHelper("getModuleCF",(function(e){var t=e[0];return t.module?t.module:null})),Handlebars.registerHelper("setPortalsPersonalityModuleFieldCount",(function(e){1===e.count&&(e.count=2)})),Handlebars.registerHelper("isAtleastOneSelected",(function(e){for(var t=e.length,r=!1,i=0;i<t;i++){if(e[i].checked){r=!0;break}}return r})),Handlebars.registerHelper("orchRecordToJson",(function(e){var t=e.map((function(e){var t=e.$.toJSON();return t.cvid=e.cvid,t}));return JSON.stringify(t)})),Handlebars.registerHelper("skipSegmentationField",(function(e,t){if(13!=e.show_type||"Recency"!=e.api_name&&"Frequency"!=e.api_name&&"Monetary"!=e.api_name&&"Segment_Label"!=e.api_name)return t.fn(this)})),Handlebars.registerHelper("isStdOptionsField",(function(e,t){return Crm.isStdOptionsField(e)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("canvasEmptyCheck",(function(e,t,r){return""!==e[t+"_defaultvalue"]?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("getColorCode",(function(e){e.colorcode_enabled&&(e.color_code=detailView.changedBCJson.colorCode)})),Handlebars.registerHelper("getPLStyleObj",(function(e,t){return""===t||"-None-"===t||"None"===t||e&&""!==e||(e="#ffffff"),getPLStyleObj(e)})),Handlebars.registerHelper("getPickListFontColor",(function(e){return getPickListFontColor(e)})),Handlebars.registerHelper("getPickListValueColorCode",(function(e,t,r){if(null!==t&&(!0===t.enable_colour_code||t.colorcode_enabled)){var i,n,s=null!==r?r:e[t.api_name],a=t.uitype?t.uitype:t.ui_type;2===a||"2"===a?i=t.pick_list_values?t.pick_list_values:t.picklistmap:26!==a&&"26"!==a||(null!==e?(i=t.pick_list_values,s=e[t.api_name]):(i=t.val,s=t.plainValue),n=!0);var l=getPickListColorCode(s,i,n);return null!==l&&"#ffffff"!==l||null===s||(l=t.color_code),getPLStyleObj(l)}})),Handlebars.registerHelper("getPickListValueColorCodeClass",(function(e,t,r,i){var n="colorAppliedPKNone";if(null!==t){if(i&&!t.enable_colour_code)return n;var s=null!==r?r:e[t.api_name];s&&""!==s&&(n="colorAppliedPicklist")}return n})),Handlebars.registerHelper("feedImageDefaultValue",(function(e){var t=[],r=e.currentField;if("edit"===e.currentStatus&&void 0!==r.defaultvalue){for(var i=r.defaultvalue,n=[],s=i.length,a=0;a<s;a++)n.push({uploadid:i[a].id,filename:i[a].File_Name,fileId:i[a].File_Id,extn:i[a].File_Name.substring(i[a].File_Name.lastIndexOf("."),i[a].File_Name.length),stream:i[a].Size,description:i[a].Description,state:i[a].State,sequence:i[a].Sequence_Number});t=n}return JSON.stringify(t)})),Handlebars.registerHelper("bindDataWithField",(function(e,t,r){var i={};i.layout=t.layout,i.module=t.module,r.parent_feature&&(e.parent_feature=r.parent_feature[e.fieldid]),e.extraDetails=i})),Handlebars.registerHelper("setParentFeatureValue",(function(e){return e[e.module]&&e[e.module].parent_feature&&e[e.module].parent_feature[e.currentField.fieldid]?e[e.module].parent_feature[e.currentField.fieldid]:""})),Handlebars.registerHelper("isActivitySplitDone",(function(){return Crm.isActivitySplitDone})),Handlebars.registerHelper("isNotActivitySplitPersonality",(function(e,t){var r="Services"===getObj("module").value;return!Crm.isActivitySplitDone||"TASKSHISTORYPERSONALITY"!==e&&"CALLSHISTORYPERSONALITY"!==e&&"EVENTSHISTORYPERSONALITY"!==e&&"TASKSPERSONALITY"!==e&&"EVENTSPERSONALITY"!==e&&"CALLSPERSONALITY"!==e&&"APPOINTMENTSPERSONALITY"!==e&&"APPOINTMENTSHISTORYPERSONALITY"!==e||r?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isKeyPresent",(function(e){return void 0!==objectUtils.getValueFromObj(e,Array.prototype.slice.call(arguments,1,arguments.length-1))})),Handlebars.registerHelper("not",(function(e){return!e})),Handlebars.registerHelper("isFreeOrStandard",(function(e){return"S,L,F,N,Y,X".includes(Crm.userDetails.LICENSE_TYPE)?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("hideFieldInDetailView",(function(e,t){return("Appointments"!==e.module||"1234"!==e.uitype&&"Status"!==e.sysRefName)&&("Services"!==e.module||"JOBSHEETSECTION"!==e.colname&&"Members"!==e.sysRefName)?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("hideFieldInPrintPreview",(function(e,t,r){return"Appointments"!==e||"1234"!==t.uitype&&"Status"!==t.sysRefName&&"Appointment_End_Time"!==t.sysRefName&&"ISJOBSHEETCREATED"!==t.colname&&"JOBSHEETSECTION"!==t.colname?r.fn(this):r.inverse(this)})),Handlebars.registerHelper("isServicesAppointmentModule",(function(e,t){return("Services"==e||"Appointments"==e)&&moduleRecordMapping.Services&&"default"==moduleRecordMapping.Services.generated_type&&moduleRecordMapping.Appointments&&"default"==moduleRecordMapping.Appointments.generated_type?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("startsWith",(function(e,t){return!(!e||"string"!=typeof e||!e.startsWith(t))})),Handlebars.registerHelper("getSignalScoreDisplayName",(function(e,t){var r=I18n.getMsg(e+t);if(0===r.indexOf("crm.scoring.rules.")){var i=scoringRulesSettings.namespaceVsKey[t];void 0!==i&&(r=I18n.getMsg(e+i))}return r})),Handlebars.registerHelper("if_newphonetype",(function(e,t){return"33"===e&&Crm.userDetails.isPhoneNoNewView?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isHelpDocNotPresentInUsrLocale",(function(e,t){return Handlebars.helpers.canShowHelpVideo(t).length===t.fn(this).length&&-1===Crm.userDetails.LOCALE.indexOf("ja_JP")&&Handlebars.helpers.getHelpUrl(e)===crmConstants.helpUrl["help.domain.url"]+crmConstants.helpUrl[e]?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getBlueprintSLATimePeriods",(function(e){return"Business hour(s)"===e?e="wf.business.hours.1":"Business day(s)"===e&&(e="wf.business.days.1"),I18n.getMsg(e)})),Handlebars.registerHelper("highlightUrlInText",(function(e){return renderingUtils.highlightUrlInText(e)})),Handlebars.registerHelper("isAdvancePermission",(function(){return Crm.userDetails.isAdvancedDeveloper})),Handlebars.registerHelper("getLogoUrl",(function(e){if("Favicon"===e)return Crm.Logo.Favicon;if("Logo_url"===e){var t=$L("crm-left-menu")[0];return"dark"===((t=t?t.component:null)?t.getData("dataMode"):"default")?Crm.Logo.Logo_url_white:Crm.Logo.Logo_url}})),Handlebars.registerHelper("checkStorage",(function(e){return"ATTACHMENTSPERSONALITY"!==e&&Crm.userDetails.isStorageLimitReached})),Handlebars.registerHelper("getIntegrationName",(function(e){return Crm.integrationsAppName[e]})),Handlebars.registerHelper("getSandboxType",(function(e){return"configuration"===e?Lyte.Component.registeredHelpers.getI18("custmr.prtl.configuration"):"configuration_and_data"===e?Lyte.Component.registeredHelpers.getI18("crm.sandbox.singular.type2"):"full_data"===e?Lyte.Component.registeredHelpers.getI18("crm.sandbox.fulldata"):e})),Handlebars.registerHelper("getRoleFilter",(function(e){return'[{"comparator":"equal","field":"role.id","value":'.concat('"').concat(e).concat('"').concat("}]")})),Handlebars.registerHelper("excludeUser",(function(e){var t;return void 0!==e&&(t="".concat("[").concat('"').concat(e.toString()).concat('"').concat("]")),t})),Handlebars.registerHelper("appendRoleParam",(function(e){return'{"role_id":'.concat('"').concat(e).concat('"').concat("}")})),Handlebars.registerHelper("isZohoCrmSercvice",(function(e){return"ZohoCRM"===Crm.serviceName?e.fn(this):e.inverse(this)})),Handlebars.registerHelper("notContains",(function(e,t,r){return e&&"string"==typeof e&&(e=JSON.parse(e)),e&&e.contains(t.toLowerCase())?r.inverse(this):r.fn(this)})),Handlebars.registerHelper("ifTrue",(function(e,t){return e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("isNewSubformAllowed",(function(e,t){return!(!t||"null"===t||!Crm.userDetails.isSubformNewComponentEnabled)})),Handlebars.registerHelper("getPercentage",(function(e,t){return parseInt(e/t*100)})),Handlebars.registerHelper("getProgressChartStyle",(function(e,t){return ProcessFlow.getProgressChartStyle(e,t)})),Handlebars.registerHelper("isToShowTransition",(function(e,t,r){if(e.IsAutoTrans||!e.IsAccessible)return r.inverse(this);if(t||!e.ParallelTrans&&e.IsCriteriaMatched)return r.fn(this);if(e.ParallelTrans&&e.IsCriteriaMatched)for(var i=e.ParallelConnections.length,n=0;n<i;n++){var s=e.ParallelConnections[n];if(s.IsAccessible&&s.IsCriteriaMatched)return r.fn(this)}return r.inverse(this)})),Handlebars.registerHelper("isToShowParChildTransition",(function(e,t,r,i){return t.IsAccessible&&(r||e&&t.IsCriteriaMatched)?i.fn(this):i.inverse(this)})),Handlebars.registerHelper("isParTransWaitingForOthers",(function(e,t){for(var r=!0,i=e.ParallelConnections,n=i.length,s=0;s<n;s++){var a=i[s];a.progress&&a.progress.total===a.progress.saved||(r=!1)}return r&&e.progress&&e.progress.total!==n?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("getI18BannerDate",(function(){return Crm.userDetails.activityDueDate})),Handlebars.registerHelper("getActModuleName",(function(){return moduleRecordMapping.Activities.plural_label})),Handlebars.registerHelper("canShowNewTimeline",(function(){return!crmTab.isZBCustomModule(detailView.currentModule)&&!crmTab.isZSCustomModule(detailView.currentModule)&&Crm.userDetails.timelineRevamp})),Handlebars.registerHelper("getAbmContactModulePluralName",(function(){return crmTab.abmContactModulePluralName})),Handlebars.registerHelper("checkBestTimePermission",(function(e,t){var r=Crm.userDetails.permissions[e];return void 0===r&&(r=!0),r?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("homeLandmarkLabel",(function(e,t){var r=[];return this.tasksCV&&(r=$L.search(this.tasksCV,"id",this.dashletId)),r.length>0&&(t=r[0].name),"label"===e?t:I18n.getMsg(e,t)})),Handlebars.registerHelper("getTabindexForNotes",(function(){var e=Lyte.Service.getInjected("globalAccessibilityServices").getVariable("accessibility").accessibility;return e&&e.motor.standard_navigation_order.enable?"0":"-1"}));