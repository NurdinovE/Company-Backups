Lyte.Component.register("lyte-button",{_template:'<template tag-name="lyte-button" onclick="{{action(\'check\',event)}}" onmousedown="{{action(\'check\',event)}}"> <button type="{{ltPropType}}" class="{{finalClass}}" value="{{ltPropValue}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" id="{{ltPropId}}" name="{{ltPropName}}" autofocus="{{ltPropAutofocus}}" disabled="{{ltPropDisabled}}" style="{{finalStyle}}"> <template is="if" value="{{ltPropText}}"><template case="true"> {{ltPropText}} </template><template case="false"> <lyte-yield yield-name="text"></lyte-yield> </template></template> </button> </template>',_dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",dynamicValue:"finalStyle"},type:{name:"type",dynamicValue:"ltPropType"}}},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropName","ltPropDisabled","ltPropAutofocus","ltPropAppearance","ltPropId","ltPropType","ltPropValue","ltPropTabindex","ltPropStyle","ltPropSize","ltPropBackgroundColor","ltPropColor","lyteShortcut","ltPropClass","lyteUnbound","ltPropAriaButton","ltPropText","ltPropDataTabindex","randomId"],data:function(){return{ltPropName:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropAutofocus:Lyte.attr("boolean",{default:!1}),ltPropAppearance:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","appearance","default")}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropType:Lyte.attr("string",{default:"button"}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropTabindex:Lyte.attr("string",{default:void 0}),ltPropStyle:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","style",void 0)}),ltPropSize:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","size","default")}),ltPropBackgroundColor:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","backgroundColor",void 0)}),ltPropColor:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","color",void 0)}),lyteShortcut:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","class","")}),lyteUnbound:Lyte.attr("boolean",{default:!1}),ltPropAriaButton:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-button","ariaButton",{})}),ltPropText:Lyte.attr("string",{default:""}),ltPropDataTabindex:Lyte.attr("string",{default:null}),randomId:Lyte.attr("string")}},ariaObserver:function(t){var e=t.oldValue,o=t.newValue;this.addAriaValues(e,o)}.observes("ltPropAriaButton"),init:function(){this.pushValue()},registerFunction:function(t){var e=this;this.$node[t]=function(){var o=e.$node,i=o.querySelector("button");o.ltProp("disabled")||i[t]()}},didConnect:function(){for(var t=["click","focus","blur"],e=0,o=this.getData("ltPropAriaButton");e<t.length;e++)this.registerFunction(t[e]);this.addAriaValues({},o)},addAriaValues:function(t,e){var o=this.getButtonWidget();_lyteUiUtils.setAttribute(o,e,t)},getButtonWidget:function(){return this.$node.querySelector("button")},didDestroy:function(){var t;delete this.$node.focus,delete this.$node.blur,delete this.$node.click;try{t=JSON.parse(this.getData("lyteShortcut"))}catch(t){return}Array.isArray(t)?t.forEach((function(t){t.key&&shortcut.push({newKey:void 0,type:void 0,wait:void 0,oldKey:t.key})})):shortcut.push({newKey:void 0,type:void 0,wait:void 0,oldKey:t.key})},shortcutChanged:function(t){this.pushValue(t.oldValue)}.observes("lyteShortcut"),pushValue:function(t){var e=this.getData("lyteShortcut"),o=this.$node,i=JSON.parse(t||"{}").key;if(e){var a=JSON.parse(e);if(Array.isArray(a))a.forEach((function(t){t.validate&&(t.validate=new Function("return "+t.validate)());var e={wait:t.wait,preventDefault:t.preventDefault,useCode:t.useCode,excludeElements:t.excludeElements,validate:t.validate};t.key&&shortcut.push({newKey:t.key,type:t.type,oldKey:void 0,value:o,options:e})}));else if(a.key){this.setData("shortcutKeys",a.key);var l=this.shortcutToDisplayKeys(a.key);this.setData("shortcutKeysToDisplay",l),a.validate&&(a.validate=new Function("return "+a.validate)());var s={wait:a.wait,preventDefault:a.preventDefault,useCode:a.useCode,excludeElements:a.excludeElements,validate:a.validate};shortcut.push({newKey:a.key,type:a.type,oldKey:i,value:o,options:s})}else shortcut.push({newKey:void 0,type:void 0,wait:void 0,oldKey:i})}},changeClass:function(){var t=this.getData("ltPropClass"),e="",o="lyte-button"+(t?" "+t:""),i=this.getData("ltPropAppearance"),a=this.getData("ltPropSize"),l=this.getData("ltPropColor"),s=this.getData("ltPropBackgroundColor");a=a?a.toLowerCase():"",i=i||"default",s?o+=" lyteBackgroundColorBtn":l?o+=" lyteColorBtn":-1!==i.indexOf("default")?o+=" lyteDefaultBtn":-1!==i.indexOf("primary")?o+=" lytePrimaryBtn":-1!==i.indexOf("secondary")&&(o+=" lyteSecondary"),-1!==i.indexOf("success")?o+=" lyteSuccess":-1!==i.indexOf("failure")?o+=" lyteFailure":-1!==i.indexOf("warning")&&(o+=" lyteWarningBtn"),"extra-small"===a?o+=" lyteExsm":"small"===a?o+=" lyteSm":"large"===a&&(o+=" lyteLg"),l?e=s?e+"background-color:"+s+";border-color:"+s+";color:"+l+";":e+"background-color: #fff; color:"+l+";border-color:"+l+";":s&&(e=e+"background-color:"+s+";border-color:"+s+";color:white;"),this.getData("ltPropStyle")&&(e+=this.getData("ltPropStyle")),this.setData("finalStyle",e),this.setData("finalClass",o)}.observes("ltPropClass","ltPropBackgroundColor","ltPropColor","ltPropStyle","ltPropSize","ltPropAppearance").on("init"),actions:{check:function(t){this.$node.querySelector("button").disabled&&(t.stopPropagation(),t.preventDefault())}}}),Lyte.Component.register("lyte-menu",{_template:'<template tag-name="lyte-menu"> <lyte-menu-box id="{{randomId}}" class="{{ltPropWrapperClass}} lytePopupZI" onmousemove="{{action(\'mousemove\',event,this)}}"> <template is="if" value="{{ltPropBindToBody}}"><template case="true"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-menu-body id="{{ltPropId}}" class="{{ltPropClass}}" tabindex="1"> <template is="for" items="{{ltPropContent}}" item="menu" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(menu)}}"><template case="true"> <lyte-menu-group elemorder="{{indexVal}}"> <template is="if" value="{{lyteUiReturnOnlyKey(menu)}}"><template case="true"> <lyte-menu-header> {{lyteUiReturnOnlyKey(menu)}} </lyte-menu-header> </template></template> <template is="for" items="{{lyteUiReturnOnlyValue(menu)}}" item="menu1" index="indexVal1"><template is="if" value="{{expHandlers(lyteUiIsObject(menu1),\'==\',false)}}"><template case="true"> <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{menu1}}"> <lyte-menu-label>{{menu1}}</lyte-menu-label> </lyte-menu-item> </template><template case="false"> <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" id="{{menu1.id}}" class="{{menu1.class}}" data-value="{{menu1[ltPropSystemValue]}}"> <lyte-menu-label>{{menu1[ltPropUserValue]}}</lyte-menu-label> <template is="if" value="{{menu1[ltPropDescription]}}"><template case="true"> <lyte-menu-description> {{menu1[ltPropDescription]}}</lyte-menu-description> </template></template> </lyte-menu-item> </template></template></template> </lyte-menu-group> </template><template case="false"><template is="if" value="{{expHandlers(lyteUiIsObject(menu),\'==\',false)}}"><template case="true"> <lyte-menu-item elemorder="{{indexVal}}" data-value="{{menu}}"> <lyte-menu-label>{{menu}}</lyte-menu-label> </lyte-menu-item> </template><template case="false"> <lyte-menu-item elemorder="{{indexVal}}" id="{{menu.id}}" class="{{menu.class}}" data-value="{{menu[ltPropSystemValue]}}"> <lyte-menu-label>{{menu[ltPropUserValue]}}</lyte-menu-label> <template is="if" value="{{menu[ltPropDescription]}}"><template case="true"> <lyte-menu-description> {{menu[ltPropDescription]}}</lyte-menu-description> </template></template> </lyte-menu-item> </template></template></template></template></template> </lyte-menu-body> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template> </template></template> </lyte-menu-box> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropContent","ltPropId","ltPropClass","ltPropQuery","ltPropEvent","ltPropYield","ltPropUserValue","ltPropSystemValue","ltPropCallout","ltPropPosition","ltPropDescription","ltPropTabIndex","ltPropFreeze","ltPropShow","ltPropWidth","ltPropHeight","ltPropQueryClass","ltPropBoundary","ltPropScope","ltPropPreventInsideClick","ltPropAnimate","ltPropSetCss","ltPropWrapperClass","ltPropWrapperId","ltPropBindToBody","ltPropAria","ltPropAriaAttributes","ltPropOffset","ltPropActiveElement","ltPropHeightResetOnScroll","ltPropPreventKeyEvents","ltPropForceClick","eventListeners","pos","parIndex","lyteUnbound","randomId","customPosition"],init:function(){var t=this.getData("ltPropEvent"),e=this.checkElementForMenu.bind(this);if(this.setData("eventListeners.event",e),this._close=this.closing.bind(this),this._trsend=this.tranEnd.bind(this),this._hoverclose=this.hoverClose.bind(this),document.addEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(t)?"mousemove":t,e,!0),!document.getElementsByClassName("lytemenufreezelayer")[0]&&this.getData("ltPropFreeze")){this.appendFreeze("lytemenufreezelayer left lyteMenuHidden"),this.appendFreeze("lytemenufreezelayer top lyteMenuHidden"),this.appendFreeze("lytemenufreezelayer bottom lyteMenuHidden"),this.appendFreeze("lytemenufreezelayer right lyteMenuHidden");var o=this.appendFreeze("lytemenufreezelayer nogroup lyteMenuHidden");o.addEventListener("wheel",this.preventEvent),o.addEventListener("touchmove",this.preventEvent)}if(!_lyteUiUtils._lyteMenu){var i=window.document!=document?document:document.documentElement;i.addEventListener("click",lyteCloseMenu,!0),i.addEventListener("keydown",this.keydownCheck,!0),i.addEventListener("keypress",menukeypress,!0),window.addEventListener("orientationchange",this.resizeFunc,!0),window.addEventListener("resize",this.resizeFunc,!0),_lyteUiUtils._lyteMenu={},_lyteUiUtils._lyteMenu.eventFlag=!0}this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(t,e,o){if(this._dir){if(e)return"right"==t?o-e.left:o-e.right;if("left"==t)return"right"}return e?e[t]:"left"},actions:{mousemove:function(t,e){var o="lyteMenuSelection",i=t.target.closest("lyte-menu-item:not(.lyteSearchHidden):not(.lyteMenuItemDisabled)"),a=e.getElementsByClassName(o)[0],l=function(t){var e="aria-activedescendant";$L(this.$node.element).attr(e,t),$L(this.childComp).attr(e,t)}.bind(this);a!=i&&i&&(a&&$L(a).removeClass(o),$L(i).addClass(o),l(i.id))}},arrayFrom:function(t){for(var e=[],o=0;o<t.length;o++)e.push(t[o]);return e.slice()},appendFreeze:function(t){var e=document.createElement("div");return e.setAttribute("class",t),_lyteUiUtils.appendChild(document.body,e,{referenceNode:this.$node})},resizeFunc:function(t){t&&"resize"==t.type&&_lyteUiUtils.isMobile||(this.resizeFn=function(){for(var e=document.getElementsByTagName("lyte-menu"),o=0;o<e.length;o++){var i=e[o],a=i.component;i.classList.contains("lyteMenuClosed")||(a.hasOwnProperty("parentMenu")||(a.callScrollFunc(t),a.getData("ltPropFreeze")&&!a.parentMenu&&setTimeout(a.setZIndex.bind(a),100)))}}.bind(this),clearTimeout(this._resizeTimeout),"orientationchange"==t.type&&(this._resizeTimeout=setTimeout(this.resizeFn,500)),this.resizeFn())},open_submenu:function(t){var e=this,o=e.childComp;if(!e.childMenu&&e.data.ltPropAria){var i="lyteMenuSelection",a=o.getElementsByClassName(i)[0];a||(a=Array.from(this.childComp.getElementsByTagName("lyte-menu-item")).filter((function(t){var e=$L(t);return!(e.hasClass("lyteSearchHidden")||e.hasClass("lyteMenuItemDisabled"))}))[0]);var l,s="onBeforeSubmenuOpen",r=function(){var l=$L(a).attr("lyte-sub-menu");if(l){var s=document.querySelector(l);if(s){var r=t.keyCode,n=s.ltProp("position");if(/right/i.test(n)&&37==r||/left/i.test(n)&&39==r)return;if(a){var d=a.id,p="aria-activedescendant";$L(e.$node.element).attr(p,d),$L(o).attr(p,d),$L(a).addClass(i),e.scrIntoView(a)}return s.component.openingMenu(a,{target:a}),!0}}};if(e.getMethods(s)&&(l=e.executeMethod(s,a,t,e.$node)),0==l)return!1;if(l&&l.then)l.then(r).catch((function(t){console.error(t)}));else if(!r())return!1;return t.preventDefault(),!0}},is_input_element:function(t,e){if("true"==t.contentEditable||/(input|textarea)/i.test(t.tagName||"")){var o;if("all"==(o=this.childComp.contains(t)?t.getAttribute("allowed-keys")||"all":t.getAttribute("allowed-keys")||"9")||-1!=o.split(",").indexOf(e.toString()))return;return!0}},keydownCheck:function(t){var e=t.which||t.keyCode,o=t.target;if(!o||document.contains(o))if(27==e)lyteCloseMenu(t,void 0,!0,!0);else if(/^(38|40|13|36|35)$/.test(e))for(var i=document.getElementsByTagName("lyte-menu"),a=0;a<i.length;a++){if(!i[a].classList.contains("lyteMenuClosed")&&null!=i[a].getAttribute("lyte-rendered"))if(!(d=i[a].component).is_input_element(o,e)&&!d.childMenu){let i=o.getAttribute("data-associate-click"),a=!0;if(i){let e=$L(o).find(i);e&&(t.preventDefault(),a=!1,e.click())}a&&d.traverseList(t),/^(3(5|6|8)|40)$/.test(e)&&t.preventDefault();break}}else if(/^(37|39)$/.test(e))for(i=document.getElementsByTagName("lyte-menu"),a=0;a<i.length;a++){var l=i[a];if(!l.classList.contains("lyteMenuClosed")&&null!=l.getAttribute("lyte-rendered")){var s=(d=l.component).parentMenu,r=d.childMenu;if(!d.is_input_element(o,e)){if(s&&!r){var n=d.data.pos;if(/right/i.test(n)&&37==e||/left/i.test(n)&&39==e){d.$node.ltProp("show",!1);break}}if(d.open_submenu(t))return}}}else if(32==e){for(i=document.getElementsByTagName("lyte-menu"),a=0;a<i.length;a++)if(!i[a].classList.contains("lyteMenuClosed")&&null!=i[a].getAttribute("lyte-rendered")){(d=i[a]).component.childComp;var d,p=t.target,h=d.component;if(!h.is_input_element(o,e)){if(h.open_submenu(t))return;if(h.eligibleForClose(h,p))break;if(d.ltProp("freeze")){t.preventDefault();break}}}}else if(9==e){(i=Array.from(document.getElementsByTagName("lyte-menu"))).every((function(i){if($L(i).hasClass("lyteMenuClosed")||null==i.getAttribute("lyte-rendered"))return!0;var a=i.component;if(a.is_input_element(o,e))return!0;if(!a.childMenu){var l=a.childComp,s=t.target;if(!l.contains(s))return a.hideMenu(!0,t),!1}return!0}))}},searchFilter:function(t){if(this._typed="",t){for(var e=this.childComp.getElementsByTagName("lyte-menu-item"),o={},i=0;i<e.length;i++){var a=$L(e[i]);if(!a.hasClass("lyteSearchHidden")&&!a.hasClass("lyteMenuItemDisabled")){var l=e[i].textContent.trim().toLowerCase().indexOf(t);-1!=l&&(l<o.index||null==o.index)&&(o.item=e[i],o.index=l)}}if(o.item){var s=this.childComp.getElementsByClassName("lyteMenuSelection")[0];if(o.item==s)return;s&&s.classList.remove("lyteMenuSelection"),o.item.classList.add("lyteMenuSelection"),this.data.ltPropAria&&($L(this.$node.element).attr("aria-activedescendant",o.item.id),$L(this.childComp).attr("aria-activedescendant",o.item.id)),this.scrIntoView.call(this,o.item)}}},scrIntoView:function(t){t&&$L.fastdom.measure(function(){var e=t.getBoundingClientRect(),o=this.findscrElem.call(this,t),i=o.getBoundingClientRect();$L.fastdom.mutate(function(){e.bottom>i.bottom?o.scrollTop+=parseInt(e.bottom-i.bottom):e.top<i.top&&(o.scrollTop+=parseInt(e.top-i.top))}.bind(this))}.bind(this))},findscrElem:function(t){for(var e=t.parentNode;e&&"LYTE-MENU-BODY"!=e.nodeName;){var o=getComputedStyle(e).getPropertyValue("overflow-y");if(e.scrollHeight>e.offsetHeight&&("auto"==o||"scroll"==o))break;e=e.parentNode}return e},didDestroy:function(){if(this.pop_global_stack(),this.childComp){for(var t=this.childComp.getElementsByTagName("lyte-menu-item"),e=0;e<t.length;e++){t[e].getAttribute("lyte-shortcut")&&t[e].setAttribute("lyte-shortcut",JSON.stringify({}))}this.childComp.parentElement&&this.childComp.parentElement.removeChild(this.childComp),delete this.childComp.parent,delete this.childComp}var o=this.getData("eventListeners"),i=this.getData("ltPropEvent"),a=this.data;if(0==document.querySelectorAll("lyte-menu").length){var l=document.querySelectorAll("div.lytemenufreezelayer");for(e=0;e<l.length;e++){(p=l[e]).parentNode.removeChild(p)}if(_lyteUiUtils._lyteMenu){delete _lyteUiUtils._lyteMenu;var s=window.document!=document?document:document.documentElement;s.removeEventListener("keydown",this.keydownCheck,!0),s.removeEventListener("keypress",menukeypress,!0),s.removeEventListener("click",lyteCloseMenu,!0),window.removeEventListener("resize",this.resizeFunc,!0),window.removeEventListener("orientationchange",this.resizeFunc,!0)}a.ltPropShow&&a.ltPropFreeze&&$L(document.body).removeClass("lyteBodyWrapper")}else a.ltPropShow&&a.ltPropFreeze&&(document.body.classList.remove("lyteBodyWrapper"),_lyteUiUtils.menu==this&&delete _lyteUiUtils.menu,this.removeFreeze());window.removeEventListener("scroll",this.addScrollPos,!0);var r,n=this.getData("ltPropQuery"),d=this.getData("parIndex");if((n||null!=d)&&(n&&(r=document.querySelectorAll(n)),document.removeEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(i)?"mousemove":i,o.event,!0),n))for(e=0;e<r.length;e++){var p;delete(p=r[e]).menu}clearTimeout(this._typetime),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody),_lyteUiUtils.menu==this&&delete _lyteUiUtils.menu,clearTimeout(this.__selection_time),delete this.$node.element},closestFind:function(t,e){var o=t[0];if(o&&o.matches){for(var i=t.length,a=0;a<i;a++){var l=t[a];if(l!=document&&l!=window&&(l.matches&&l.matches(e)))return l}return null}return this.___closestFind(t,e)},___closestFind:function(t,e){for(var o=this.getData("parIndex"),i=this.arrayFrom.call(this,null!=o?this.$node.parentNode.parentNode.querySelectorAll("lyte-menu-item:nth-of-type("+ ++o+")"):document.querySelectorAll(e.trim())),a=0;a<t.length;a++)if(-1!=Array.prototype.indexOf.call(i,t[a]))return t[a];return null},isHoverAnimate:function(){return this.data.ltPropAnimate&&/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)},checkElementForMenu:function(t){var e=t.target;if(document.contains(e)&&!t.menuFlag){var o=this.getData("ltPropQuery"),i=this.closestFind.call(this,t.path?t.path:this.composePath.call(this,t),o);if($L(i).hasClass("lyteMenuItemDisabled"))return;if(null!=i){var a=this.isHoverAnimate();if(!a&&this._evtadded)return void(this.data.ltPropAnimate&&0==parseInt(this.menuBody.style.height)&&this.setData("ltPropShow",!1));"contextmenu"==t.type&&(lyteCloseMenu(t,this.$node),this.$node.ltProp("show",!1));var l=!this.childComp.classList.contains("lyteMenuHidden");if(l&&this.$node.element!=i){if(!a){this.childComp.classList.remove("lyteAnimate"),this._hideStarts=!0,this._closest=i,this._event=t;var s=new Promise(function(e,o){this._promResolve=e,this._promReject=o,this.hideMenu.call(this,!0,t)}.bind(this));return void Promise.resolve(s).then(function(){this.openingMenu(this._closest,this._event),delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this),function(){delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this))}this._openstart&&this.tranEnd(),this.data.ltPropAnimate=!1,this._hideStarts?(clearTimeout(this._time3),this.closing(!0,t)):this.hideMenu(!0,t),this.data.ltPropAnimate=!0}else if(l&&this.$node.element==i){if(!a)return;if(this._openstart)return}this.openingMenu(i,t)}else"contextmenu"==t.type&&lyteCloseMenu(t,void 0,!0)}},openingMenu:function(t,e){e.menuFlag=!0,this.$node.element=t,t.menu=this.$node,this.parentMenu||("contextmenu"!=e.type?(/lyte-menu-item/i.test(t.tagName||"")&&(t.__sub_open=!0,t.__force_callback=this.data.ltPropForceClick),this._open_fast=$L.fastdom.mutate(this.$node.toggle.bind(this.$node,e))):this.$node.toggle(e||{}))},didConnect:function(){var t=this.$node.getElementsByTagName("lyte-menu-box")[0];this.$node.toggle=function(t,e){delete this._open_fast,this.childComp.classList.contains("lyteMenuHidden")||e?(["mousedown","mouseup"].indexOf(t.type)>-1&&(_lyteUiUtils._lyteMenu.preventClick=!1),this.openMenu.call(this,t)):this.childMenu||-1!=t.type.indexOf("mouse")||this._hideStarts||this.hideMenu.call(this,!0,t)}.bind(this),this.$node.setCss=this.setCss.bind(this),t.parent=this.$node,this.childComp=t,t.classList.add("lyteMenuHidden"),this.$node.classList.add("lyteMenuClosed"),t.style.width=this.getData("ltPropWidth"),this.data.ltPropCallout&&/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&this.childComp.classList.add("lyteHoverMenu"),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL()}.bind(this))},bToBody:function(){if(this.data.ltPropBindToBody&&this.childComp.parentNode==this.$node){var t=this.childComp.querySelector("lyte-menu-body");t.addEventListener("click",this.optionSelect.bind(this)),t.parent=this.$node,this.menuBody=t;var e=document.createElement("span");e.setAttribute("class","lyteArrow"+(this.data.ltPropCallout?"":" lyteMenuHidden")),t.insertBefore(e,t.children[0]),this.menuBody.style.height=this.data.ltPropHeight,this._dir&&this.menuBody.classList.add("lyteRTL"),_lyteUiUtils.appendChild(document.body,this.childComp,{referenceNode:this.$node})}else this.data.ltPropBindToBody||(this.$node.ltProp("show",!1),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody))}.observes("ltPropBindToBody").on("didConnect"),calloutObs:function(t){var e=this.childComp.querySelector("span.lyteArrow");t.newValue?e.classList.remove("lyteMenuHidden"):e.classList.add("lyteMenuHidden")}.observes("ltPropCallout"),data:function(){var t=_lyteUiUtils.getDefault("lyte-menu");return{ltPropContent:Lyte.attr("array",{default:[]}),ltPropId:Lyte.attr("string",{default:t.id||""}),ltPropClass:Lyte.attr("string",{default:t.class||""}),ltPropQuery:Lyte.attr("string",{default:t.query||""}),ltPropEvent:Lyte.attr("string",{default:t.event||"click"}),ltPropYield:Lyte.attr("boolean",{default:t.yield||!1}),ltPropUserValue:Lyte.attr("string",{default:t.userValue||""}),ltPropSystemValue:Lyte.attr("string",{default:t.systemValue||""}),ltPropCallout:Lyte.attr("boolean",{default:t.callout||!1}),ltPropPosition:Lyte.attr("string",{default:t.position||"down"}),ltPropDescription:Lyte.attr("string",{default:t.description||""}),ltPropTabIndex:Lyte.attr("number",{default:t.tabIndex||0}),ltPropFreeze:Lyte.attr("boolean",{default:t.freeze||!0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropWidth:Lyte.attr("string",{default:t.width||"auto"}),ltPropHeight:Lyte.attr("string",{default:t.height||"auto"}),ltPropQueryClass:Lyte.attr("string",{default:t.queryClass||"lyteMenuSelected"}),ltPropBoundary:Lyte.attr("object",{default:t.boundary||{}}),ltPropScope:Lyte.attr("string",{default:t.scope||""}),ltPropPreventInsideClick:Lyte.attr("boolean",{default:t.preventInsideClick||!1}),ltPropAnimate:Lyte.attr("boolean",{default:t.animate||!1}),ltPropSetCss:Lyte.attr("boolean",{default:0!=t.setCss}),ltPropWrapperClass:Lyte.attr("string",{default:t.wrapperClass||""}),ltPropWrapperId:Lyte.attr("string",{default:t.wrapperId||""}),ltPropBindToBody:Lyte.attr("boolean",{default:0!=t.bindToBody}),ltPropAria:Lyte.attr("boolean",{default:t.aria||!1}),ltPropAriaAttributes:Lyte.attr("object",{default:t.ariaAttributes||{role:"menu"},watch:!0}),ltPropOffset:Lyte.attr("object",{default:t.offset||{}}),ltPropActiveElement:Lyte.attr("string"),ltPropHeightResetOnScroll:Lyte.attr("boolean",{default:0!=t.heightResetOnScroll}),ltPropPreventKeyEvents:Lyte.attr("boolean",{default:t.preventKeys||!1}),ltPropForceClick:Lyte.attr("boolean",{default:t.forceClick||!1}),eventListeners:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),parIndex:Lyte.attr("number"),lyteUnbound:Lyte.attr("boolean",{default:!1}),randomId:Lyte.attr("string",{default:"lyteMenu_"+parseInt(1e6*Math.random())}),customPosition:Lyte.attr("string",{default:""})}},firePosCallBack:function(){this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",this.getData("pos"),this.$node)}.observes("pos"),contentChangeObs:function(){this.contentChange.call(this)}.observes("ltPropContent.[]"),contentChange:function(){this.childComp.classList.contains("lyteMenuHidden")||(this.setCss.call(this),this.menuBody.style.removeProperty("height"))},setContextCss:function(t,e){var o=this.$node.element,i=this.childComp;$L.fastdom.measure(function(){var a=t,l=o.getBoundingClientRect();t&&t.type||(t={clientX:l.left+l.width/2,clientY:l.top+l.height/2});var s=i.getBoundingClientRect(),r=this.menuBody.getBoundingClientRect(),n=getComputedStyle(this.menuBody),d="content-box"==n.boxSizing?parseFloat(n.paddingTop)+parseFloat(n.paddingBottom):0,p=r.height-d,h=window.innerHeight,c=window.innerWidth,u=this.data.ltPropOffset||{},y=u.top||0,m=u.bottom||0,f=u.left||0,g=u.right||0,v=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),D=window.pageYOffset||document.documentElement.scrollTop,b=this.rtlfunc.call(this,"left"),P=null!=this.__cX?this.__cX+this.rtlfunc("left",l,c):this._dir?c-t.clientX:t.clientX,w=null!=this.__cY?this.__cY+l.top:t.clientY;if(e||(e=this.data.ltPropPosition),"up"===e)i.style[b]=P+v+"px",i.style.top=w>h-w?w+D+"px":w-s.height+D+"px",this.setData("pos","up");else i.style[b]=P+v+"px",i.style.top=w<h-w?w+D+"px":w-s.height+D+"px",this.setData("pos","down");s.left<f?i.style[b]=P+f+"px":this.rtlfunc.call(this,"right",s,c)>c-g&&(i.style[b]=P-s.width+"px"),a&&(parseFloat(i.style.top)-D+p>h-m&&w<=h&&(this.menuBody.style.height=h-m-parseFloat(i.style.top)+D+"px",p=parseFloat(this.menuBody.style.height)),parseFloat(i.style.top)-D<y&&w>=y&&(this.menuBody.style.height=parseFloat(i.style.top)-D-y+p+"px",i.style.top=D+y+"px",p=parseFloat(this.menuBody.style.height)),this._hgt=p,null==this.__cX&&(this.__cX=P-this.rtlfunc("left",l,c)),null==this.__cY&&(this.__cY=w-l.top))}.bind(this))},setup_controls:function(t){var e=this.get_origin_menu(),o=$L(e.$node.element),i="aria-haspopup",a=this.childComp,l=this.$node.element,s="aria-labelledby",r="aria-activedescendant",n=(t||l).id,d=e.$node.element;o.attr({"aria-expanded":"true","aria-controls":a.id}),e!=this?$L(a).attr(s,n):($L(d).attr(r,n),$L(a).removeAttr(s).attr(r,n)),o.attr(i)||o.attr(i,"menu")},openMenu:function(t,e){var o,i,a=this.getData("ltPropEvent");if(t=t||{},e||(i=this.targetElem.call(this,t.target))[0]&&(i[0].originMenu=i[1].component),e&&"contextmenu"!=a){if(!this.$node.element){var l=this.getData("ltPropQuery");this.$node.element=document.querySelector(l.trim())}"LYTE-MENU-ITEM"==this.$node.element.tagName?i=this.targetElem.call(this,this.$node.element):i||(i=[])}if(this.getMethods("onBeforeOpen")&&(o=this.executeMethod("onBeforeOpen",this.$node,t,this.$node.element)),i&&i[0]&&"LYTE-MENU"==i[1].tagName&&(i[1].ltProp("show")||(o=!1)),delete(this.$node.element||{}).__sub_open,delete(this.$node.element||{}).__force_callback,0!=o&&this.$node.element){if(_lyteUiUtils.dispatchEvent("beforeshow",this.$node,{originalEvent:t}),"contextmenu"==(t||{}).type&&t.preventDefault(),this.data.ltPropBindToBody||this.$node.ltProp("bindToBody",!0),this.childComp.scrollTop=0,this.childComp.classList.remove("lyteMenuHidden","lyteAnimate"),this.$node.classList.remove("lyteMenuClosed"),this.childComp.style.display="block",this.getData("ltPropHeight")?this.menuBody.style.height=this.getData("ltPropHeight"):this.menuBody.style.removeProperty("height"),i[0]){var s=i[1];if(/^(lyte-menu)$/i.test(s.tagName)){var r=s.component,n=r.childMenu,d=r.childComp;n&&(n.clearFastdom(),d.removeEventListener("mousemove",n.mouseleave,!0),n.hideMenu(!0,t)),r.childMenu=this,this.parentMenu=r,d.addEventListener("mousemove",this.mouseleave,!0)}}if(!this.parentMenu){var p=this.$node.element;$L(p).addClass(this.getData("ltPropQueryClass")),/^lyte-menu-item$/i.test(p.tagName)||lyteCloseMenu(t,this.$node),this.getData("ltPropFreeze")?this.setZIndex():_lyteUiUtils.menu||(window.addEventListener("scroll",this.addScrollPos,!0),_lyteUiUtils.menu=this)}this.data.ltPropAria&&this.setup_controls(),!/^(mouseenter|mousemove|mouseover|hover)$/.test(a)||this.childMenu||this.parentMenu||i[0]||document.addEventListener("mousemove",this._hoverclose),this._openFastdom=$L.fastdom.measure(function(){this.menuBody.getBoundingClientRect(),window.innerHeight,window.pageYOffset||document.documentElement.scrollTop;this._dontCall=!0,this.$node.ltProp("show",!0),delete this._dontCall,delete this._openFastdom,"contextmenu"==this.getData("ltPropEvent")?this.setContextCss.call(this,t):this.setCss.call(this),"contextmenu"!=t.type&&this.getData("ltPropAnimate")&&0!=this._hgt&&(this._openstart=!0,this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),this._time1=setTimeout(this.animeClassAdd.bind(this),20)),this.push_global_stack(),this.traverseList({key:"Home"}),this.getMethods("onOpen")&&this.executeMethod("onOpen",this.$node,t,this.$node.element)}.bind(this))}else this._dontCall=!0,delete this.$node.element,this.setData("ltPropShow",!1),delete this._dontCall,delete t.menuFlag,this._promReject&&this._promReject()},animeClassAdd:function(){this.childComp.classList.add("lyteAnimate"),this._time2=setTimeout(this.heightSet.bind(this),20)},heightSet:function(){var t=getComputedStyle(this.menuBody);this._transdur=Math.max(400,this.returntran(t.transitionDuration)+this.returntran(t.transitionDelay)+20),this._evtadded=!0,this.childComp.addEventListener("transitionend",this._trsend),-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)-this._hgt+"px"),this.menuBody.style.height=this._hgt+"px"},tranEnd:function(t){this.childComp.removeEventListener("transitionend",this._trsend),this.childComp.classList.remove("lyteAnimate"),clearTimeout(this._time2),clearTimeout(this._time1),this.clearFastdom(),this._dont_modify&&(this.menuBody.style.height="",delete this._dont_modify),delete this._openstart},clearFastdom:function(){$L.fastdom.clear(this._openFastdom),$L.fastdom.clear(this._open_fast),delete this._open_fast,delete this._openFastdom},composePath:function(t){for(var e=[],o=t.target;o&&"HTML"!=o.tagName;)e.push(o),o=o.parentNode;return e},elementsFromPointCal:function(t,e){for(var o=[],i=document.elementFromPoint(t,e);i!=document&&i!=document.documentElement&&i!=document.body&&"LYTE-MENU-BODY"!=i.tagName&&(i._pe=i.style.pointerEvents,i.style.pointerEvents="none",o.push(i),i!=(i=document.elementFromPoint(t,e))););for(var a=0;a<o.length;a++)o[a].style.pointerEvents=o[a]._pe,delete o[a]._pe;return o},eligibleForClose:function(t,e){return!!e&&(!(!t.childComp||!t.childComp.contains(e))||!!t.childMenu&&this.eligibleForClose(t.childMenu,e))},hoverClose:function(t){if(this.$node){var e=document.elementsFromPoint?document.elementsFromPoint(t.clientX,t.clientY):this.elementsFromPointCal(t.clientX,t.clientY);-1!=e.indexOf(this.$node.element)||-1!=e.indexOf(this.childComp)||this.eligibleForClose(this,e[0])||this.hideMenu(!0,t)}},mouseleave:function(t){var e=this.parent.component,o=e.targetElem.call(e,t.target);e.childMenu&&o[1]==e.$node&&o[0]!=e.childMenu.$node.element&&o[0]&&(this.removeEventListener("mousemove",e.childMenu.mouseleave,!0),e.childMenu.hideMenu.call(e.childMenu,!0,t))},hideToggle:function(t){this._dontCall||(0==t.newValue?this.hideMenu(!0,{}):this.openMenu({},!0))}.observes("ltPropShow"),hideMenu:function(t,e,o){var i;if(this.childMenu){if(this.childMenu.childComp.contains(e.target)&&!o)return;if(!this.childMenu.hideMenu.call(this.childMenu,t,e,o))return}if(this.getMethods("onBeforeClose")&&(i=this.executeMethod("onBeforeClose",this.$node,e)),0!=i){this.tranEnd(),this.clearFastdom(),delete this.__cX,delete this.__cY;var a=this.parentMenu;return a?(delete a.childMenu,delete this.parentMenu,a.setup_controls(this.$node.element)):(delete _lyteUiUtils.menu,window.removeEventListener("scroll",this.addScrollPos,!0)),this._arguments=arguments,-1!=/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&document.removeEventListener("mousemove",this._hoverclose),this._hideStarts=!0,this.menuBody&&this.data.ltPropAnimate&&"contextmenu"!=this.data.ltPropEvent&&this._hgt?(this.menuBody.style.height=this._hgt+"px",this.childComp.classList.add("lyteAnimate"),this._time3=setTimeout(function(){"0px"!=this.menuBody.style.height?(this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),this.menuBody.removeEventListener("transitionend",this._close),this.menuBody.addEventListener("transitionend",this._close),this._hidetimeout=setTimeout(this.closing.bind(this,t,e),this._transdur)):this.closing(t,e)}.bind(this),20)):(delete this._arguments,this.closing(t,e,!0)),!0}this._dontCall=!0,this.setData("ltPropShow",!0),delete this._dontCall,delete this._hideStarts,this._promReject&&this._promReject()},closing:function(){var t,e,o=arguments,i=o[2];this._arguments?(t=this._arguments[0],e=this._arguments[1],this.menuBody.style.height=this._hgt+"px",delete this._hgt,delete this._arguments):(t=o[0],e=o[1]),this.menuBody&&this.menuBody.removeEventListener("transitionend",this._close),this.childComp.classList.add("lyteMenuHidden"),delete this._hideStarts,this.$node.classList.add("lyteMenuClosed"),this.getData("ltPropFreeze")&&!this.parentMenu&&this.setZIndex.call(this,t),this._dontCall=!0,this.$node.ltProp("show",!1);var a=$L(this.$node.element).removeClass(this.data.ltPropQueryClass);this.data.ltPropAria&&(a.removeAttr("aria-activedescendant").attr("aria-expanded","false"),$L(this.childComp).removeAttr("aria-activedescendant aria-labelledby")),delete this._dontCall,delete this.$node.element,delete this._evtadded,this.childComp.classList.remove("lyteAnimate"),this.childComp.style.left="",this.childComp.style.top="",this.childComp.style.bottom="",this.childComp.style.right="";var l=this.childComp.querySelector(".lyteMenuSelection");l&&l.classList.remove("lyteMenuSelection"),clearTimeout(this._hidetimeout),delete this._hidetimeout;var s=this._promResolve;if(this.pop_global_stack(),!i||s||this.data.ltPropAnimate)$L.fastdom.measure(function(){this.getMethods("onClose")&&this.executeMethod("onClose",this.$node,e),s&&$L.fastdom.mutate(s.bind(this)),i||this.clearFastdom()}.bind(this));else{var r="onClose";this.getMethods(r)&&this.executeMethod(r,this.$node,e)}},targetElem:function(t){var e;for(t=t.correspondingElement||t;t&&"LYTE-MENU-BODY"!=t.tagName&&"BODY"!=t.tagName;)"LYTE-MENU-ITEM"==t.tagName&&(e=t),t=t.parentNode;return[e,t?t.parent:null]},optionSelect:function(t){var e,o=t.target,i=this.targetElem(o)[0],a="lyte-menu-item"===o.nodeName?$L(o):$L(o).closest("lyte-menu-item"),l=a.hasClass("lyteMenuAccordionContainer");if(a.get(0)&&a.get(0).parentNode&&a.get(0).parentNode.classList.contains("lyteMenuAccordionItem")&&(i=a.get(0)),l&&!this._ignore){let e,o,l=a.find(".lyteMenuAccordionItem"),d=parseFloat(l.css("transition-duration")),p=this.menuBody.getBoundingClientRect(),h=getComputedStyle(this.menuBody),c="content-box"==h.boxSizing?parseFloat(h.paddingTop)+parseFloat(h.borderTopWidth)+parseFloat(h.borderBottomWidth)+parseFloat(h.paddingBottom):0;this._ignore=!0,o=this.data.ltPropYield?a.get(0).getAttribute("data-value"):this.data.ltPropContent[parseInt(a.get(0).getAttribute("elemorder"))];var s=function(e){this._ignore=!1,e?(this.getMethods("onMenuGroupOpen")&&this.executeMethod("onMenuGroupOpen",o,t,this.$node,this.$node.element,{element:i,submenu:!!i.originMenu}),this.setAuto()):this.getMethods("onMenuGroupClose")&&this.executeMethod("onMenuGroupClose",o,t,this.$node,this.$node.element,{element:i,submenu:!!i.originMenu}),this.menuBody.style.maxHeight="",this.setCss(void 0,void 0,!0)}.bind(this);clearTimeout(this.setAuto),this.setAuto=function(){l.get(0).style.height="auto"};let u=function(){let t=l.get(0),e=0;Array.from(t.children).forEach((function(t){e+=t.offsetHeight})),t.style.height=e+"px",setTimeout(this.setHeight,isNaN(d)?0:1e3*d,t,"auto")}.bind(this),y=function(){let t=this.data.customPosition;"up"==t?this.menuBody.style.maxHeight=p.bottom-c+"px":"down"==t&&(this.menuBody.style.maxHeight=window.innerHeight-p.top-c+"px")}.bind(this);var r=function(){u(),y(),a.removeClass("lyteMenuAccordionClosed"),a.addClass("lyteMenuAccordionOpened"),setTimeout(s,isNaN(d)?0:1e3*d,!0)}.bind(this),n=function(){y(),l.css("height",l.get(0).getBoundingClientRect().height+"px"),setTimeout((function(){l.css("height",0)}),0),a.addClass("lyteMenuAccordionClosed"),a.removeClass("lyteMenuAccordionOpened"),this.menuBody.style.height="",setTimeout(s,isNaN(d)?0:1e3*d,!1)}.bind(this);a.hasClass("lyteMenuAccordionOpened")?(this.getMethods("onBeforeMenuGroupClose")&&(e=this.executeMethod("onBeforeMenuGroupClose",o,t,this.$node,this.$node.element,{element:i,submenu:!!i.originMenu})),0!=e&&n()):(this.getMethods("onBeforeMenuGroupOpen")&&(e=this.executeMethod("onBeforeMenuGroupOpen",o,t,this.$node,this.$node.element,{element:i,submenu:!!i.originMenu})),null!=e&&e.then?Promise.resolve(e).then((function(){r()})):0!=e&&r())}if(!i||!($L(i).hasClass("lyteMenuItemDisabled")||i.__sub_open&&!i.__force_callback)){if((1==t.ctrlKey||1==t.metaKey||2==t.which)&&null!=o.href&&-1!=o.href.indexOf("javascript:")&&"_blank"==o.target)return!1;if(this.getMethods("onMenuClick")&&i){var d;if(this.getData("ltPropYield"))d=i.getAttribute("data-value");else{var p=this.getData("ltPropContent");if(i.hasAttribute("grporder")){var h=p[parseInt(i.getAttribute("grporder"))];d=h[Object.keys(h)[0]][parseInt(i.getAttribute("elemorder"))]}else d=p[parseInt(i.getAttribute("elemorder"))]}e=this.executeMethod("onMenuClick",d,t,this.$node,this.$node.element,{element:i,submenu:!!i.originMenu})}if(this.childMenu&&!e&&t.stopPropagation(),(i||!i&&this.getData("ltPropPreventInsideClick"))&&!l){if((i||{}).__sub_open)return;lyteCloseMenu(t,void 0,!0)}}},setLeftExceedForDown:function(t,e,o,i,a,l){var s=o;return a+this.rtlfunc.call(this,"left",s,l)+s.width-i.width},setLeftNotExceedForDown:function(t,e,o,i){var a=e;return o+this.rtlfunc.call(this,"left",a,i)},setTopAboveForDown:function(t,e,o,i,a){return a+o.top-i.height},setTopBelowForDown:function(t,e,o){var i=e;return o+i.top+i.height},setLeftForRight:function(t,e,o,i){var a=e;return o+this.rtlfunc.call(this,"left",a,i)+a.width},setRightForRight:function(t,e,o,i,a,l){var s=o,r=i;return a+this.rtlfunc.call(this,"left",s,l)-r.width},setTopForRight:function(t,e,o){return o+e.top},setTopForRightAbove:function(t,e,o,i,a){var l=o;return a+l.top+l.height-i.height},setCorrectClass:function(t){for(var e=this.childComp.querySelector(".lyteArrow"),o=e.classList,i=0;i<o.length;i++)"lyteArrow"!=o[i]&&o[i]!=t&&(e.classList.remove(o[i]),i--);e.classList.add(t)},setCss:function(t,e,o){var i=this.childComp;if(i&&!i.classList.contains("lyteMenuHidden")&&this.getData("ltPropSetCss")){var a=this.getData("ltPropCallout");0===arguments.length&&this.menuBody.style.height.includes("px")&&(this.menuBody.style.height="");var l,s,r,n=i,d=this.$node.element,p=!!this.parentMenu&&this.parentMenu,h=!!p&&this.parentMenu.data.customPosition,c=!!p&&this.parentMenu.data.ltPropPosition,u=this.data.customPosition,y=window.innerWidth,m=this.getData("ltPropScope");if(m){var f={target:d},g=this.closestFind.call(this,this.composePath.call(this,f),m);if(g){var v=g.getBoundingClientRect();s=this.rtlfunc.call(this,"left",v,y)<0?0:this.rtlfunc.call(this,"left",v,y),l=y>this.rtlfunc.call(this,"right",v,y)?this.rtlfunc.call(this,"right",v,y):y,r=!0}}r||(l=y,s=0);var D,b,P,w,C=window.innerHeight,L=0,x=n.getBoundingClientRect(),S=this.menuBody.getBoundingClientRect(),T=getComputedStyle(this.menuBody),M=n.querySelector("lyte-menu-header"),A=n.querySelector("lyte-menu-footer"),F=M?M.offsetHeight:0,_=A?A.offsetHeight:0,B="content-box"==T.boxSizing?parseFloat(T.paddingTop)+parseFloat(T.borderTopWidth)+parseFloat(T.borderBottomWidth)+parseFloat(T.paddingBottom):0,N=S.height-B,O=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),k=window.pageYOffset||document.documentElement.scrollTop,$=n.offsetHeight,I=n.offsetWidth,E=i.querySelector(".lyteArrow"),H=c&&h&&c!=h?h:e||this.getData("ltPropPosition"),V=d.getBoundingClientRect(),Y=E?E.getBoundingClientRect():{width:0,height:0},R=Y.height/2,U=Y.width/2,q=this.data.ltPropOffset||{};q.left&&(s+=q.left),q.top&&(L+=q.top),q.right&&(l-=q.right),q.bottom&&(C-=q.bottom);var W,z,j,K,G,J,X=this.rtlfunc.call(this,"left",V,y),Z=this.rtlfunc.call(this,"left"),Q=function(){if(("right"==h||"left"==h)&&h!=G)return this.parentMenu.setCss(this.parentMenu,G),this.setCss(this,G),!0}.bind(this);if(["top","bottom","left","right"].forEach((function(t){n.style.setProperty(t,"unset")})),E&&(E.style.removeProperty("left"),E.style.removeProperty("top"),E.style.removeProperty("bottom"),E.style.removeProperty("right")),"down"===H)D=!0,(z=V.top+V.height)+$>C&&(D=C-V.top>V.bottom-L),b=!0,(j=X)+I>l&&j>j+V.width-n.offsetWidth?b=!1:X+I<=l&&(b=!0),V.width>I&&E&&(E.style[Z]=(I/2-0)/I*100+"%"),D||o&&"down"==u?(G="down",a?(this.setCorrectClass("lyteArrowTop"),W=this.setTopBelowForDown(d,V,k)+R+"px"):n.style.top=this.setTopBelowForDown(d,V,k)+"px"):(G="up",a?(this.setCorrectClass("lyteArrowBottom"),W=-1*(window.scrollY-(C-V.top))+R+"px"):n.style.bottom=-1*(window.scrollY-(C-V.top))+"px"),b?(a&&(J=Math.max(Math.min(V.width,I)/2-U,U/2)/(K=I/100),E.style[Z]=J+"%"),"up"==G?n.style.bottom=W||n.style.bottom:n.style.top=W||n.style.top,n.style[Z]=this.setLeftNotExceedForDown(d,V,O,y)+"px"):(a&&(K=I/100,J=(I-Math.min(V.width,I)/2-U)/K,E.style[Z]=J+"%"),"up"==G?n.style.bottom=W||n.style.bottom:n.style.top=W||n.style.top,n.style[Z]=this.setLeftExceedForDown(d,n,V,x,O,y)+"px");else if("right"===H){if(b=!0,X+V.width+I>l&&X-x.width>s?(b=!1,G="left"):(b=!0,G="right"),1==Q())return;D=!0,V.top+x.height>C&&(D=C-V.top>V.bottom-L),b?a?(this.setCorrectClass("lyteArrowLeft"),W=this.setLeftForRight(d,V,O,y)+U+"px"):n.style[Z]=this.setLeftForRight(d,V,O,y)+"px":a?(this.setCorrectClass("lyteArrowRight"),W=this.setRightForRight(d,n,V,x,O,y)-U+"px"):n.style[Z]=this.setRightForRight(d,n,V,x,O,y)+"px",D?(a&&(E.style.top=Math.max(V.height/2-R,R/2)+"px"),n.style[Z]=W||n.style[Z],n.style.top=this.setTopForRight(d,V,k,y)+"px"):(a&&(E.style.bottom=Math.max(V.height/2-R,R/2)+"px"),n.style[Z]=W||n.style[Z],n.style.top=this.setTopForRightAbove(d,n,V,x,k,y)+"px")}else if("up"===H)P=!0,V.top-x.height<L&&(P=C-V.top<V.bottom-L),b=!0,X+I>l&&X>X+V.width-n.offsetWidth?b=!1:X+I<=l&&(b=!0),V.width>I&&E&&(E.style[Z]=(I/2-0)/I*100+"%"),P||o&&"up"==u?(G="up",a?(this.setCorrectClass("lyteArrowBottom"),W=R-(window.scrollY-(C-V.top))+"px"):n.style.bottom=-1*(window.scrollY-(C-V.top))+"px"):(G="down",a?(this.setCorrectClass("lyteArrowTop"),W=this.setTopBelowForDown(d,V,k)+R+"px"):n.style.top=this.setTopBelowForDown(d,V,k,y)+"px"),b?(a&&(J=Math.max(Math.min(V.width,I)/2-U,U/2)/(K=I/100),E.style[Z]=J+"%"),"up"==G?n.style.bottom=W||n.style.bottom:n.style.top=W||n.style.top,n.style[Z]=this.setLeftNotExceedForDown(d,V,O,y)+"px"):(a&&(K=I/100,J=(I-Math.min(V.width,I)/2-U)/K,E.style[Z]=J+"%"),"up"==G?n.style.bottom=W||n.style.bottom:n.style.top=W||n.style.top,n.style[Z]=this.setLeftExceedForDown(d,n,V,x,O,y)+"px");else if("left"===H){if(w=!0,X-x.width<s&&X+x.width<l?(w=!1,G="right"):(w=!0,G="left"),1==Q())return;D=!0,V.top+x.height>C&&(D=C-V.top>V.bottom-L),w?a?(this.setCorrectClass("lyteArrowRight"),W=this.setRightForRight(d,n,V,x,O,y)-U+"px"):n.style[Z]=this.setRightForRight(d,n,V,x,O,y)+"px":a?(this.setCorrectClass("lyteArrowLeft"),W=this.setLeftForRight(d,V,O,y)+U+"px"):n.style[Z]=this.setLeftForRight(d,V,O)+"px",D?(a&&(E.style.top=Math.max(V.height/2-R,R/2)+"px"),n.style[Z]=W||n.style[Z],n.style.top=this.setTopForRight(d,V,k)+"px"):(a&&(E.style.bottom=Math.max(V.height/2-R,R/2)+"px"),n.style[Z]=W||n.style[Z],n.style.top=this.setTopForRightAbove(d,n,V,x,k)+"px")}else if("downLeft"===H){if(D=!0,(z=V.top+V.height)+$>C&&(D=C-V.top>V.bottom-L),D||(z=V.top-$),b=!1,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.max(X+V.width/2-I,X-I+2*R))<s?(j=s,b=!0):b=!1,n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?X+.25*V.width-j+"px":Math.min(I-.25*V.width,I-1.5*R-3)+"px",E.style[Z]=tt;G=D?"downLeft":"upLeft"}else if("downRight"===H){if(D=!0,(z=V.top+V.height)+$>C&&(D=C-V.top>V.bottom-L),D||(z=V.top-$),b=!0,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.min(X+V.width/2,X+V.width-2*R))+I>l?(j=l-I,b=!1):b=!0,n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?Math.max(.25*V.width,U/2)+"px":X+.25*V.width-j+"px",E.style[Z]=tt;G=D?"downRight":"upRight"}else if("upLeft"===H){if(D=!1,(z=V.top-$)<L&&(D=C-V.top>V.bottom-L),D&&(z=V.top+V.height),b=!1,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.max(X+V.width/2-I,X-I+2*R))<s?(j=s,b=!0):b=!1,n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?X+.25*V.width-j+"px":Math.min(I-.25*V.width,I-1.5*R-3)+"px",E.style[Z]=tt;G=D?"downLeft":"upLeft"}else if("upRight"===H){if(D=!1,(z=V.top-$)<L&&(D=C-V.top>V.bottom-L),D&&(z=V.top+V.height),b=!0,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.min(X+V.width/2,X+V.width-2*R))+I>l?(j=l-I,b=!1):b=!0,n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?Math.max(.25*V.width,U/2)+"px":X+.25*V.width-j+"px",E.style[Z]=tt;G=D?"downRight":"upRight"}else if("downAlignLeft"===H){if(D=!0,(z=V.top+V.height)+$>C&&(D=C-V.top>V.bottom-L),D||(z=V.top-$),b=!1,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.max(X+V.width-I,X-I+2*R))<s?(j=Math.max(Math.min(X,X+V.width-2*R),s),b=!0):(j=Math.min(l-I,j),b=!1),n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?(V.right-j)/2+"px":Math.min((X-j+Math.max(I,V.width))/2,Math.max(I,V.width)-1.5*R-3)+"px",E.style[Z]=tt;G=D?"downAlignLeft":"upAlignLeft"}else if("downAlignRight"===H){if(D=!0,(z=V.top+V.height)+$>C&&(D=C-V.top>V.bottom-L),D||(z=V.top-$),b=!0,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.min(X,X+V.width-2*R))+I>l?(j=Math.min(Math.max(X+V.width-I,X-I+2*R),l-I),b=!1):(j=Math.max(j,0),b=!0),n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?Math.max(.5*(Math.min(this.rtlfunc.call(this,"right",V,y)-j,I)-U),U/2)+"px":.5*(-j+I+X)+"px",E.style[Z]=tt;G=D?"downAlignRight":"upAlignRight"}else if("upAlignLeft"===H){if(D=!1,(z=V.top-$)<L&&(D=C-V.top>V.bottom-L),D&&(z=V.top+V.height),b=!1,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.max(X+V.width-I,X-I+2*R))<s?(j=Math.max(Math.min(X,X+V.width-2*R),s),b=!0):(j=Math.min(l-I,j),b=!1),n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?(V.right-j)/2+"px":Math.min((X-j+Math.max(I,V.width))/2,Math.max(I,V.width)-1.5*R-3)+"px",E.style[Z]=tt;G=D?"downAlignLeft":"upAlignLeft"}else if("upAlignRight"===H){var tt;if(D=!1,(z=V.top-$)<L&&(D=C-V.top>V.bottom-L),D&&(z=V.top+V.height),b=!0,a&&this.setCorrectClass(D?"lyteArrowTop":"lyteArrowBottom"),(j=Math.min(X,X+V.width-2*R))+I>l?(j=Math.min(Math.max(X+V.width-I,X-I+2*R),l-I),b=!1):(j=Math.max(j,s),b=!0),n.style.top=z+R*(D?1:-1)+k+"px",n.style[Z]=j+O+"px",a)tt=b?Math.max(.5*(Math.min(this.rtlfunc.call(this,"right",V,y)-j,I)-U),U/2)+"px":.5*(-j+I+X)+"px",E.style[Z]=tt;G=D?"downAlignRight":"upAlignRight"}if(!p||"right"!=G&&"left"!=G||this.setData("customPosition",G),C-=F+_,L+=F+_,parseFloat(n.style.top)-k+N>C&&V.top<=C)this.menuBody.style.height=C-parseFloat(n.style.top)+k-B+"px",N=parseFloat(this.menuBody.style.height),this._dont_modify=!0;else if(parseFloat(n.style.top)-k<L&&V.bottom>=L)this.menuBody.style.height=parseFloat(n.style.top)-k+N-L+"px",n.style.top=L+k+"px",N=parseFloat(this.menuBody.style.height),this._dont_modify=!0;else{let t=parseFloat(n.style.bottom);t-k+N>C&&V.top<=C?(this.menuBody.style.height=C-t+k-B+"px",N=parseFloat(this.menuBody.style.height),this._dont_modify=!0):t<0&&k+t+N>C&&V.top<=C&&(this.menuBody.style.height=C-(k+t)-B+"px",N=parseFloat(this.menuBody.style.height),this._dont_modify=!0)}this._hgt=N,n.classList.contains("lyteHoverMenu")&&($L(n).removeClass("topPlace","bottomPlace","rightPlace","leftPlace"),/up/.test(G)?n.classList.add("topPlace"):/down/.test(G)?n.classList.add("bottomPlace"):/right/.test(G)?n.classList.add("rightPlace"):/left/.test(G)&&n.classList.add("leftPlace")),D?$L(this.childComp).removeClass("lyteMenuUp").addClass("lyteMenuDown"):$L(this.childComp).removeClass("lyteMenuDown").addClass("lyteMenuUp"),this.setData("pos",G)}},returntran:function(t){var e=0;if(/\d+/.test(t||"")){var o=t.match(/(\d+)(s|ms){0,}$/);e=parseFloat(t)*("s"==o[2]?1e3:1)}return e},checkForBoundary:function(t,e){var o=this.getData("ltPropBoundary");(o.hasOwnProperty("left")&&this.rtlfunc.call(this,"left",t,e)<this.rtlfunc.call(this,"left",o,e)||o.hasOwnProperty("right")&&this.rtlfunc.call(this,"right",t,e)>this.rtlfunc.call(this,"right",o,e)||o.hasOwnProperty("top")&&t.top<o.top||o.hasOwnProperty("bottom")&&t.bottom>o.bottom)&&this.hideMenu.call(this,!0,{})},get_origin_menu:function(){for(var t=this;t.parentMenu;)t=t.parentMenu;return t},traverseList:function(t){var e=t.keyCode||t.which,o=this.childComp;if(!(!o||o&&o.classList.contains("lyteMenuHidden")||e&&13!=e&&40!=e&&38!=e&&36!=e&&35!=e)){var i=function(e){if(this.data.ltPropAria){var i=this.get_origin_menu();$L(i.$node.element).attr("aria-activedescendant",(e||{}).id).attr("aria-controls",o.id),$L(o).attr("aria-activedescendant",(e||{}).id)}e.classList.add("lyteMenuSelection"),this.scrIntoView(e);var a="onNavigation";this.getMethods(a)&&this.executeMethod(a,e.getAttribute("data-value"),t,this.$node,this.$node.element,{element:e,submenu:!!e.originMenu})}.bind(this),a=t.key,l=o.querySelector(".lyteMenuSelection"),s=Array.from(o.getElementsByTagName("lyte-menu-item")).filter((function(t){var e=$L(t);return!(e.hasClass("lyteSearchHidden")||e.hasClass("lyteMenuItemDisabled"))})),r=function(){var t,l=o.querySelector(".lyteMenuSelection");if((!l||!l.offsetParent)&&(t="End"==a||38==e?$L(s).get(-1):s[0]))return i(t)}.bind(this);clearTimeout(this.__selection_time),this.__selection_time=setTimeout(r,0);for(var n=0;n<s.length&&(!s[n].offsetParent||!s[n].classList.contains("lyteMenuSelection"));n++);if(s[n])if(13==e){if(!this.open_submenu(t)){var d=this.data.ltPropActiveElement,p=s[n],h=d?p.querySelector(d):"";h?h.click():p.dispatchEvent(new Event("click",{bubbles:!0})),t.preventDefault()}}else if(38==e){var c=n;for(0==n&&(n=s.length),n-=1;n>-1&&(s[n].classList.contains("lyteMenuActive")||s[n].classList.contains("lyteMenuFiltered")||!s[n].offsetParent);n--);-1!=n&&(s[c].classList.remove("lyteMenuSelection"),i(s[n]))}else if(40==e){c=n;for(n==s.length-1&&(n=-1),n+=1;n<s.length&&(s[n].classList.contains("lyteMenuActive")||s[n].classList.contains("lyteMenuFiltered")||!s[n].offsetParent);n++);n!=s.length&&(s[c].classList.remove("lyteMenuSelection"),i(s[n]))}else if("Home"==a&&s.length){if(l==s[0])return;$L(l).removeClass("lyteMenuSelection"),i(s[0])}else if("End"==a&&s.length){if(l==$L(s).get(-1))return;$L(l).removeClass("lyteMenuSelection"),i($L(s).get(-1))}}},setFreeze:function(t){var e=document.querySelectorAll(".lytemenufreezelayer:not(.nogroup)");$L.fastdom.measure(function(){var o=document.querySelector(".lytemenufreezelayer.left"),i=t.getBoundingClientRect(),a=window.innerWidth;$L.fastdom.mutate(function(){o.style.height=i.height+"px",o.style.width=Math.max(i.left,0)+"px",o.style.top=i.top+"px",(o=document.querySelector(".lytemenufreezelayer.right")).style.height=i.height+"px",o.style.width=Math.max(a-i.right,0)+"px",o.style.top=i.top+"px",(o=document.querySelector(".lytemenufreezelayer.top")).style.height=i.top+"px",(o=document.querySelector(".lytemenufreezelayer.bottom")).style.height=window.innerHeight-i.bottom+"px";for(var t=0;t<e.length;t++)e[t].classList.remove("lyteMenuHidden"),e[t].addEventListener("wheel",this.preventEvent),e[t].addEventListener("touchmove",this.preventEvent)}.bind(this))}.bind(this))},preventEvent:function(t){if(!(t.metaKey||t.shiftKey||t.ctrlKey)){var e="touchmove"==t.type;if(e&&1!=t.touches.length)return;("wheel"==t.type||e)&&t.stopImmediatePropagation(),t.preventDefault(),t.stopPropagation()}},addScrollPos:function(t){_lyteUiUtils.menu&&(t.target!=window&&_lyteUiUtils.menu.childComp.contains(t.target)||_lyteUiUtils.menu.callScrollFunc(t,!0))},removeFreeze:function(){if(!_lyteUiUtils.menu||this.data.ltPropAnimate&&this.data.ltPropFreeze){for(var t=document.querySelectorAll(".lytemenufreezelayer"),e=0;e<t.length;e++)t[e].classList.add("lyteMenuHidden"),t[e].removeEventListener("wheel",this.preventEvent);document.body.classList.remove("lyteBodyWrapper")}},setZIndex:function(t){var e=this.$node.element;if(e){for(;e&&e.tagName&&"HTML"!=e.tagName;){if(e.classList.contains("lyteMenuGroup")){t?this.removeFreeze.call(this):(this.setFreeze.call(this,e),document.body.classList.add("lyteBodyWrapper"));break}e=e.parentNode}if(e&&"HTML"==e.tagName||!e||e.host)if(t&&(!_lyteUiUtils.menu||_lyteUiUtils.menu&&!_lyteUiUtils.menu.data.ltPropFreeze))this.removeFreeze.call(this);else document.querySelector(".lytemenufreezelayer.nogroup").classList.remove("lyteMenuHidden"),document.body.classList.add("lyteBodyWrapper")}},ariaObs:function(t){var e=this.childComp,o=this.data;o.ltPropAria&&e&&_lyteUiUtils.setAttribute(e,o.ltPropAriaAttributes||{},(t||{oldValue:{}}).oldValue)}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}","ltPropBindToBody").on("didConnect"),single_obs:function(t){if(t.path){var e=t.path.replace(/^\./,""),o=t.newValue,i=this.data,a=this.childComp;if(i.ltPropAria&&a){var l={};l[e]=o,_lyteUiUtils.setAttribute(a.get(0),l,{})}}}.observes("ltPropAriaAttributes.*"),callScrollFunc:function(t,e){var o=this,i=o.menuBody,a=-1!=i.style.height.indexOf("px"),l=Object.keys(this.data.ltPropBoundary||{}).length,s=e&&l&&o.$node.element?o.$node.element.getBoundingClientRect():void 0,r=e&&l&&o.$node.element?window.innerWidth:void 0,n=o.$node.ltProp("height"),d=this.data.ltPropHeightResetOnScroll,p="contextmenu"==o.$node.ltProp("event");a&&d?(i.style.height=n||"",e&&l&&$L.fastdom.measure(o.checkForBoundary.bind(o,s,r)),$L.fastdom.measure(o[p?"setContextCss":"setCss"].bind(o,t))):(o[p?"setContextCss":"setCss"](t),e&&l&&o.checkForBoundary(s,r)),o.childMenu&&o.childMenu.callScrollFunc()},push_global_stack:function(){var t=(_lyteUiUtils.popupStack||{}).globalStack;t&&t.push(this.__fstack={childElement:this.childComp,focusedElement:this.$node.element,parentElement:this.$node})},pop_global_stack:function(){var t=(_lyteUiUtils.popupStack||{}).globalStack,e=this.__fstack;if(t&&e){delete this.__fstack;var o=t.indexOf(e);o+1&&t.splice(o,1)}}});var lyteCloseMenu=function(t,e,o,i){if((0!=_lyteUiUtils._lyteMenu.preventClick||e)&&(t&&2!=t.button||e||o)){var a=document.getElementsByTagName("lyte-menu"),l=(t||{}).target;if(l&&l.offsetParent&&!document.contains(l))return;for(var s=0;s<a.length;s++){var r=a[s];if(!r.classList.contains("lyteMenuClosed")&&r.hasAttribute("lyte-rendered")){var n=r.component,d=n.childComp;if(r!=e&&d&&!d.classList.contains("lyteMenuHidden")&&(o||!l||!d.contains(l))&&!n._hideStarts){if(i&&n.data.ltPropAria){if(n.childMenu)continue;if(n.parentMenu){n.hideMenu(!e,t,o);break}}n.hideMenu(!e,t,o)}}}}t&&"click"==t.type&&(_lyteUiUtils._lyteMenu.preventClick=!0)};if(!_lyteUiUtils.registeredCustomElements["lyte-menu-item"]){function menukeypress(t){for(var e=document.querySelectorAll("lyte-menu:not(.lyteMenuClosed)[lyte-rendered]"),o=t.which||t.keyCode,i=0;i<e.length;i++){var a=e[i].component;if(!a.childMenu){if(a.is_input_element(t.target,o))continue;a._typed=a._typed||"",a._typed+=String.fromCharCode(o),clearTimeout(a._typetime),a._typetime=setTimeout(a.searchFilter.bind(a,a._typed.trim().toLowerCase()),400);break}}}_lyteUiUtils.registeredCustomElements["lyte-menu-item"]=!0,Lyte.createCustomElement("lyte-menu-item",{static:{observedAttributes:{get:function(){return["lyte-shortcut","lt-prop-disabled"]}}},check_disable:function(t){var e="remove";"true"!=t&&""!=t||(e="add"),this.classList[e]("lyteMenuItemDisabled")},attributeChangedCallback:function(t,e,o){if("lt-prop-disabled"==t)return this.check_disable(o);if("function"==typeof shortcut){if(!o)return;var i=(o=JSON.parse(o)).key,a=o.type,l=o.wait;e=e?JSON.parse(e):{},shortcut.push({newKey:i,type:a,wait:l,oldKey:e.key,value:this})}},connectedCallback:function(){var t=$L(this).closest("lyte-menu-box").get(0),e=this.getAttribute("lt-prop-disabled"),o=t?t.parent||t.closest("lyte-menu"):void 0;o&&(o.ltProp("aria")&&($L(this).attr("role","menuitem"),this.id||(this.id="lyteMenuItem_"+parseInt(1e6*Math.random()))));("true"==e||""==e)&&this.check_disable(e)},disconnectedCallback:function(){this.getAttribute("lyte-shortcut")&&this.setAttribute("lyte-shortcut",JSON.stringify({}))}})}var _lyteDropdownItemId=0,_lyteDropdownBodyId=0;Lyte.Component.register("lyte-dropdown",{_template:'<template tag-name="lyte-dropdown"> <template is="if" value="{{ltPropLabel}}"><template case="true"> <div class="lyteDropdownFieldLabel" id="{{lyteUiGetDropdownLabelId()}}">{{ltPropLabel}}</div> </template></template> <template is="if" value="{{expHandlers(ltPropHover,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true"> <lyte-drop-button role="combobox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" aria-haspopup="listbox"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <input disabled="{{ltPropDisabled}}" readonly="{{ltPropReadOnly}}" onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" onclick="{{action(\'showHide\',event)}}" onfocus="{{action(\'addFocusClass\',event)}}" onblur="{{action(\'removeFocusClass\',event)}}"> </li> </ul> </div> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <div class="lyteDummyEventContainer" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" onclick="{{action(\'showHide\',event)}}" onkeyup="{{action(\'checkKey\',event)}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}"> <lyte-drop-button> <template is="if" value="{{expHandlers(expHandlers(ltPropSelectedList.length,\'==\',0),\'&amp;&amp;\',expHandlers(ltPropForcePlaceholder,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> <template is="if" value="{{ltPropForcePlaceholder}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </div> </template><template case="false"> </template></template> </template></template> </template><template case="false"> <div onmouseenter="{{action(\'showHide\',event,\'enter\')}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}" onmouseleave="{{action(\'closeIt\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" style=""> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{ltPropDisplayValue}}"><template case="true"> <span class="lyteMarginRight lyteDropdownLabel" onmouseenter="{{action(\'toolTipConfig\',this,\'showToolTip\')}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{ltPropDisplayValue}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span> </template></template></template></template> <template is="if" value="{{expHandlers(ltPropSelected,\'&amp;&amp;\',ltPropShowRemoveIcon)}}"><template case="true"> <lyte-drop-remove class="lyteDropdownDeselectIcon"></lyte-drop-remove> </template></template> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true"> </template></template></template></template> </div> </template></template> </template><template case="false"> <template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true"> <template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true"> <lyte-drop-button onclick="{{action(\'showHide\',event)}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <div class="lyteMultiselect"> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> <li class="lyteMultiselectInput"> <input disabled="{{ltPropDisabled}}" readonly="{{ltPropReadOnly}}" onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" onfocus="{{action(\'addFocusClass\',event)}}" onblur="{{action(\'removeFocusClass\',event)}}"> </li> </ul> </div> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> <div class="lyteDummyEventContainer" style="" onclick="{{action(\'showHide\',event)}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> </div> </template></template> </template><template case="false"> <div class="lyteDummyEventContainer" onclick="{{action(\'showHide\',event)}}" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{expHandlers(expHandlers(ltPropSelectedList.length,\'==\',0),\'&amp;&amp;\',expHandlers(ltPropForcePlaceholder,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <ul class="lyteMultipleSelect"> <template is="for" items="{{ltPropSelectedList}}" item="item" index="indexVal"> <li data-value="{{lyteUiReturnValueBy(item,sysValue)}}"> <span class="lyteDropdownVisible" onmouseenter="{{action(\'toolTipConfig\',this,\'selToolTip\')}}" lt-prop-title="{{if(selToolTip,lyteUiReturnValueBy(item,userValue),\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}">{{lyteUiReturnValueBy(item,userValue)}}</span> <lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove> </li> </template> </ul> <template is="if" value="{{ltPropForcePlaceholder}}"><template case="true"> <span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span> </template></template> <template is="if" value="{{shouldDisplayIcon}}"><template case="true"> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </template></template> </lyte-drop-button> </template><template case="false"> </template></template> </div> </template></template> </template><template case="false"> <div onclick="{{action(\'showHide\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" data-tabindex="{{ltPropDataTabindex}}" style="" role="combobox" aria-haspopup="listbox" aria-expanded="{{if(ltPropIsOpen,\'true\',\'false\')}}"> <template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-button> <template is="if" value="{{ltPropDisplayValue}}"><template case="true"> <span onmouseenter="{{action(\'toolTipConfig\',this,\'showToolTip\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-tooltip-class="{{ltPropTooltipClass}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" class="lyteMarginRight lyteDropdownLabel">{{ltPropDisplayValue}}</span> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true"> <span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span> </template></template></template></template> <template is="if" value="{{expHandlers(ltPropSelected,\'&amp;&amp;\',ltPropShowRemoveIcon)}}"><template case="true"> <lyte-drop-remove class="lyteDropdownDeselectIcon"></lyte-drop-remove> </template></template> <lyte-icon class="{{ltPropIconClass}}"></lyte-icon> </lyte-drop-button> </template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true"> </template></template></template></template> </div> </template></template> </template></template> <template is="if" value="{{expHandlers(ltPropHover,\'==\',false)}}"><template case="true"> <template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-box class="lyteDropdownHidden"> <lyte-drop-body> <template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true"> <lyte-drop-group> <lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label> <template is="for" items="{{lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item))}}" item="subitem" index="indexval"> <template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true"> <lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item> </template></template> </template> </lyte-drop-group> </template><template case="false"> <template is="if" value="{{lyteUiIsObject(item)}}"><template case="true"> <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item> </template></template> </template></template> </template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> </template></template> <div class="lyteLoadMsg" style="display:none;">Loading</div> </template><template case="false"> <template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true"> <lyte-drop-box class="lyteDropdownHidden"> <lyte-drop-body> <template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true"> <lyte-drop-group> <lyte-drop-label>lyteUiReturnOnlyKey(item)</lyte-drop-label> <template is="for" items="{{lyteUiReturnValueBy(item,lyteReturnOnlyKey(item))}}" item="subitem" index="indexval"> <template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true"> <lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item> </template></template> </template> </lyte-drop-group> </template><template case="false"> <template is="if" value="{{lyteUiIsObject(item)}}"><template case="true"> <lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item> </template><template case="false"> <lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item> </template></template> </template></template> </template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> </template></template> <div class="lyteLoadMsg" style="display:none;">Loading</div> </template></template> <lyte-yield yield-name="yield" style="display: none;" lyte-options="{{ltPropOptions}}"></lyte-yield> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"for",position:[1,1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,5]},{type:"if",position:[1,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,7]},{type:"if",position:[1,1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5]},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"attr",position:[7]},{type:"insertYield",position:[7]}],_observedAttributes:["shouldDisplayIcon","changeItToInvoke","dummy1","dummy2","savedPositions","ltPropRemoveMultiple","ltPropYield","ltPropType","ltPropTabindex","ltPropShow","ltPropFreeze","ltPropOptions","ltPropUserValue","ltPropSystemValue","ltPropPosition","ltPropIconClass","ltPropSelected","ltPropCallout","ltPropPlaceholder","ltPropDisabled","ltPropHover","ltPropNoResult","ltPropMaxCount","ltPropInputClass","ltPropBoundary","pos","secondaryPosition","firePos","ltPropAjaxRequest","firstRequest","userValue","sysValue","ltPropDisplayValue","ltPropDisabledList","ltPropAnimate","ltPropSetPos","ltPropTooltip","ltPropBoxClass","ltPropIsOpen","ltPropFocus","ltPropFixPositionOnOpen","ltPropForcePlaceholder","ltPropShowEmptyMessage","ltPropBoxButtonWidth","ltPropPreventScroll","ltPropScope","ltPropAnimateBox","ltPropTooltipClass","ltPropDisplayList","ltPropSelectedList","ltPropItemSearchType","ltPropFocusOnClose","ltPropButtonClass","ltPropDisableItemTooltip","ltPropPreventParentScroll","ltPropShowRemoveIcon","ltPropAriaButton","ltPropAriaBox","ltPropAriaBody","ltPropReadOnly","ltPropActiveElement","ltPropAllowFocusableElements","ltPropDataTabindex","ltPropPreventNavigation","ltPropTrimSearchText","ltPropNoResultYield","ltPropIncludeButtonInFocusLoop","ltPropForceCalculateWidth","ltPropSetAriaOnActiveElement","ltPropCaseSensitive","ltPropSearchMethod","ltPropLabel","ltPropDirection"],init:function(){var t=this.getData("ltPropType"),e=this.getData("ltPropSelected");this._close=this.closeDrop1.bind(this),this._transEnd=this.tranEnd.bind(this),_lyteUiUtils.dropdown?_lyteUiUtils.dropdown.ind+=1:_lyteUiUtils.dropdown={ind:0},this.getData("ltPropPreventParentScroll")&&this.setData("ltPropFreeze",!1),this.freezeLayerCreated()||this.createFreezeLayer(),this.$node.getItem=function(t){var e=this.component,o=this.getDropBox(),i=e.getDropBody(o);return e.getItem(e.getAllItems(i),t)},this.$node.resetPosition=function(){var t=this.component,e=t.getData("ltPropFixPositionOnOpen");t.setCss(!1,e)},this.$node.toggle=function(t,e){var o=t||void 0;this.component.getData("ltPropDisabled")||this.component.getData("ltPropReadOnly")||this.component.showHide(o,e,!0)},this.$node.getDropBox=function(){return this.component.getDropBox()},this.$node.open=function(){this.component.getData("ltPropIsOpen")||this.toggle()},this.$node.close=function(){this.component;this.getData("ltPropIsOpen")&&this.toggle()},this.$node.getInitialSelected=function(t){var e=this.component;return e.setInitialSelected(t),e.getData("ltPropSelected")},this.$node.getDisplayValue=function(){var t,e=this.component,o=e.childComp,i=e.getDropBody(o),a=e.getData("ltPropSelected");return a&&(t=e.getItem(e.getAllItems(i),a))?t.textContent.trim():""},this.$node.closeError=function(){var t=this.component,e=t.childComp,o=t.getData("drophead");0!==t.getDropBody(e).querySelectorAll("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)").length&&t.closeError(e,o)},this.$node.updateBoxAria=function(t,e){this.component.getDropBox().setAttribute(t,e)},this.$node.updateButtonAria=function(t,e){this.component.getAriaButton().setAttribute(t,e)},this.$node.updateBodyAria=function(t,e){var o=this.component;o.getDropBody(o.childComp).setAttribute(t,e)},this.$node.setValue=function(t){var e=this.component.getSearchBox();e&&e.setValue&&e.setValue(t)},this.$node.showNoResults=function(){var t=this.getDropBox().querySelector(".lyteDropdownNoResult");t&&(t.style.display="block")},this.$node.hideNoResults=function(){var t=this.getDropBox().querySelector(".lyteDropdownNoResult");t&&(t.style.display="none")},this.$node.scrollToSelected=function(){this.component.scrollSel()},this.$node.resetSelected=function(){var t=this.component,e=t.getData("ltPropSelected");t.setData("ltPropSelected",""),t.setData("ltPropSelected",e)},this.$node.highlightItem=function(t){var e=this.component.getDropBox().querySelector(".lyteDropdownSelection");e&&e.classList.remove("lyteDropdownSelection"),t&&t.classList.add("lyteDropdownSelection")},-1===t.indexOf("multiple")&&-1===t.indexOf("multisearch")||(this.setData("multiple",!0),e||this.setData("ltPropSelected","[]"),-1!==t.indexOf("multisearch")&&this.setData("search",!0),this.setIterator())},freezeLayerCreated:function(){return this.getFreezeLayer()},getFreezeLayer:function(){return _lyteUiUtils.dropdownFreezeLayer},createFreezeLayer:function(){var t;(t=document.createElement("div")).setAttribute("id","lytedropdownfreezelayer"),t.style.display="none",t.style.opacity="0.01",t.style.background="#fff",_lyteUiUtils.dropdownFreezeLayer=t,_lyteUiUtils.appendChild(document.body,t)},getSearchBox:function(){return this.$node.querySelector(".lyteDropdownTextField")},setIterator:function(){var t=this.getData("ltPropUserValue"),e=this.getData("ltPropSystemValue");this.setData("userValue",t||"display"),this.setData("sysValue",e||"value")},didDestroy:function(){var t=this.childComp,e=this.$node.mutobserver,o=this.getData("ltPropFreeze"),i=this.getData("ltPropPreventScroll"),a=this.getData("ltPropType"),l=this.getElementWithTabIndex();window.clearTimeout(this.timeoutIdForOpen),window.clearTimeout(this.timeoutIdForClose),window.clearTimeout(this.scrollEndId),this.popOutOfGlobalStack(this.$node),t&&(!t.classList.contains("lyteDropdownHidden")&&o&&"all"===i&&(this.getFreezeLayer().style.display="none"),!t.classList.contains("lyteDropdownHidden")&&document.body&&document.body.classList.remove("lyteBodyWrapper"),delete t.origindd,t.remove()),e&&e.disconnect(),this.disableParentListeners(),_lyteDropdown.autoClosed===this.$node&&(_lyteDropdown.autoClosed=null),_lyteDropdown.lastDropdownWithAPromise===this.$node&&(_lyteDropdown.lastDropdownWithAPromise=null),"multisearch"===a&&l&&($L(l).removeSearch(),l.removeEventListener("keyup",this.keyUpListener)),delete this.childComp,delete this.$node.toggle,delete this.$node.element,this.$node.mutobserver=null,window.clearTimeout(this._FFBodyScrollOnRemove),window.clearTimeout(this._FFBodyScrollOnAdd)},disableParentListeners:function(){var t=this;this.scrollableParents&&(this.scrollableParents.off("scroll",this.resetScroll),this.scrollableParents.off("wheel",this.preventDefaultBehaviour),this.scrollableParents.off("touchmove",this.preventDefaultBehaviour)),this.scrollableParents=void 0,this.lyteScrollBarParents&&(this.lyteScrollBarParents.each((function(e,o){o&&(o.removeEventListener("touchmove",t.disableLyteScrollBar,!0),o.removeEventListener("wheel",t.disableLyteScrollBar,!0))})),this.lyteScrollBarParents=void 0)},prerequisites:function(){this.data.ltPropAnimate&&(this._hgtRemoval=!0),this.setCss(!1,!0),this.openSlideAnimate(),this.getData("call")&&this.childComp.removeAttribute("lyte-hidden"),this.pushIntoGlobalStack(this.$node),this.fireOnShow(),this.shouldFocusFirstFocusableElement()&&this.focusFirstFocusableElement(),this.setData("call",null)},pushIntoGlobalStack:function(t){_lyteUiUtils.popupStack&&_lyteUiUtils.popupStack.globalStack&&(this.alreadyPushed(t)&&this.popOutOfGlobalStack(t),_lyteUiUtils.popupStack.globalStack.push({childElement:this.getDropBox(),focusedElement:document.activeElement,parentElement:t}))},alreadyPushed:function(t){return!!~this.findIndex(t)},popOutOfGlobalStack:function(t){if(_lyteUiUtils.popupStack&&_lyteUiUtils.popupStack.globalStack){var e=_lyteUiUtils.popupStack.globalStack,o=this.findIndex(t);~o&&e.splice(o,1)}},findIndex:function(t){for(var e=_lyteUiUtils.popupStack.globalStack,o=0;o<e.length;o++)if(e[o].parentElement===t)return o;return-1},shouldFocusFirstFocusableElement:function(){return this.getData("ltPropAllowFocusableElements")&&!this.getData("ltPropIncludeButtonInFocusLoop")},focusFirstFocusableElement:function(){var t=this.getFirstFocusableElement();t&&t.focus()},getFirstFocusableElement:function(){return this.$node.getDropBox().querySelector(_lyteDropdown.focusableElementsSelector)},fireOnShow:function(){var t;this.getData("call")&&this.getMethods("onShow")&&(t=!0===(t=this.getData("call"))?void 0:t,this.executeMethod("onShow",t,this)),_lyteUiUtils.dispatchEvent("lytedropdownshow",this.$node)},getChildren:function(t){var e,o=this.getData("drophead"),i=this.getData("dropbody"),a=0,l=this.$node;if("yield"!==o||"yield"!==i)for(;a<t.length;a++)"LYTE-DROPDOWN"!==(e=t[a].tagName)&&"TEMPLATE"!==e&&("LYTE-DROP-BOX"===e?(this.setData("dropbody","yield"),l.querySelector("lyte-drop-box").classList.add("lyteDropdownHidden")):"LYTE-DROP-BUTTON"===e?(this.setData("drophead","yield"),_lyteUiUtils.appendChild(l.querySelector(".lyteDummyEventContainer"),l.querySelector("lyte-drop-button")),a--):this.getChildren(t[a].children))},setBoxClass:function(t){var e=this.getData("ltPropBoxClass"),o=this.childComp||this.$node.querySelector("lyte-drop-box");"noyield"===this.getData("dropbody")&&(t&&$L(o).removeClass(t),e&&$L(o).addClass(e))},setButtonClass:function(t){var e=this.getData("ltPropButtonClass"),o=this.$node.querySelector("lyte-drop-button");t&&$L(o).removeClass(t),e&&$L(o).addClass(e)},iconClassChanged:function(){this.setIconClass()}.observes("ltPropIconClass"),setIconClass:function(){var t=this.getData("multiple"),e=this.getDropButton(),o=this.getData("drophead");t&&"yield"!==o&&(this.hasIconClassChanged()?(e.classList.add("ltDropdownIconNodePresent"),this.setData("shouldDisplayIcon",!0)):(e.classList.remove("ltDropdownIconNodePresent"),this.setData("shouldDisplayIcon",!1)))},getDropButton:function(){return this.$node.querySelector("lyte-drop-button")},getActiveElement:function(){var t,e=this.getData("ltPropActiveElement");return e&&(t=this.$node.querySelector(e)||this.$node.getDropBox().querySelector(e)),t=t||this.getAriaButton()},getAriaButton:function(){return this.$node.querySelector('[role="combobox"]')},hasIconClassChanged:function(){var t=this.getData("ltPropIconClass");return t&&"dropdown"!==t},didConnect:function(){var t=this.getData("ltPropSelectedList")||[];this.setARIA(),this.determineYieldContents(),this.setClassAttributes(),this.calculateSelected=t.length>0,this.bindEvents(),this.addCallout(),this.setSelectedDuringRender(),this.toggleButtonInteractivity(),this.toggleDropdownClass(),this.setData("preventDisp",!0),this.setData("changeItToInvoke",this.getData("changeItToInvoke")+1),this.setData("preventDisp",!1),this.setSelectedFromList(!0),this.toggleDropdown(),this.attachErrorDiv(),this.showNoResultDiv(),this.fireAfterRender()},directionObs:function(){this.setDirection()}.observes("ltPropDirection").on("didConnect"),setDirection:function(){this.data.ltPropLabel&&("vertical"==this.data.ltPropDirection?(this.$node.classList.add("lyteDropdownVertical"),this.$node.classList.remove("lyteDropdownHorizontal")):(this.$node.classList.remove("lyteDropdownVertical"),this.$node.classList.add("lyteDropdownHorizontal")))},setARIA:function(){var t=this.getData("ltPropSetAriaOnActiveElement"),e=this.getActiveElement(),o=this.$node.querySelector('[role="combobox"]');t&&o&&(o.removeAttribute("role"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),e&&(e.setAttribute("role","combobox"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-controls",this.getDropBody().getAttribute("id"))))},fireAfterRender:function(){this.getMethods("onAfterRender")&&this.executeMethod("onAfterRender",this.$node)},attachErrorDiv:function(){var t=this.createErrorDiv(),e=this.getDropBody(this.getDropBox());t&&e.appendChild(t)},toggleDropdown:function(){var t=this.getData("ltPropShow"),e=this.$node,o=this.getElementWithTabIndex();t&&(this.setData("ltPropShow",!1),e.toggle(),$L.fastdom.measure((function(){o.focus();var t=e.getBoundingClientRect();(t.left<0||t.top<0)&&e.scrollIntoView()})))},toggleButtonInteractivity:function(){var t=this.getElementWithTabIndex(),e=this.getData("ltPropDisabled"),o=this.getData("ltPropDataTabindex"),i=this.getData("ltPropTabindex");e?(this.disableClickableItem(t),t.setAttribute("tabindex",-1),t.setAttribute("data-tabindex","")):(this.enableClickableItem(t),t.setAttribute("tabindex",i),t.setAttribute("data-tabindex",o))},bindEvents:function(){var t,e=this.getData("ltPropHover"),o=this.getDropBox(),i=this.getDropBody(o),a=this.getData("ltPropType"),l=this.getActiveElement();"multisearch"===a&&(t=this.getElementWithTabIndex(),this.keyUpListener=this.fireCheckKey.bind(this),t&&t.addEventListener("keyup",this.keyUpListener)),o.addEventListener("click",function(t){this.processElements(t)}.bind(this)),e&&o.addEventListener("mouseout",function(t){this.closeIt(t)}.bind(this)),i.addEventListener("scroll",function(t){this.callOnScroll(t,this)}.bind(this)),o.addEventListener("mousemove",this.highlightDropItemsOnHover.bind(this)),l&&l.addEventListener("focusout",this.removeSelectionHighlight.bind(this))},highlightDropItemsOnMouseOver:function(t){var e,o=t.target,i=this.getDropBox().querySelector(".lyteDropdownSelection");this.getData("ltPropPreventNavigation")||(e=_lyteDropdown.traverse(o,["HTML","LYTE-DROP-ITEM"]),i&&i.classList.remove("lyteDropdownSelection"),e&&"LYTE-DROP-ITEM"===e.tagName&&"true"!==e.getAttribute("disabled")&&e&&(e.classList.add("lyteDropdownSelection"),this.getActiveElement().setAttribute("aria-activedescendant",e.getAttribute("id"))))},removeSelectionHighlight:function(){var t=this.getDropBox().querySelector(".lyteDropdownSelection");t&&t.classList.remove("lyteDropdownSelection")},determineYieldContents:function(){var t,e,o=this.$node.querySelector("lyte-yield");this.determine(o),t=this.getData("drophead"),e=this.getData("dropbody"),"yield"!==t&&this.setData("drophead",t="noyield"),"yield"!==e&&this.setData("dropbody",e="noyield")},setSelectedDuringRender:function(){var t=this.getData("ltPropPlaceholder"),e=this.getData("ltPropSelected"),o=this.getData("ltPropOptions")||[],i=this.getData("dropbody"),a=this.getData("ltPropType");this.setData("preventDisp",!0),t||e||"multiple"===a||"multisearch"===a||(o.length>0?this.setSelectedFromOptions():"yield"===i&&this.setSelectedFromYield()),this.setData("preventDisp",!1)},setSelectedFromOptions:function(t){var e,o=(t=t||this.getData("ltPropOptions")||[])[0],i=!1;o.constructor==Object&&1==Object.keys(o).length&&(e=o[Object.keys(o)[0]]).constructor==Array&&(i=!0),i?"[object Object]"===Object.prototype.toString.call(e[0])?this.setData("ltPropSelected",e[0][this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",e[0]):"[object Object]"===Object.prototype.toString.call(o)?this.setData("ltPropSelected",o[this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",o)},setSelectedFromYield:function(){var t=this.getFirstEnabledItem();t&&t.setAttribute("selected",!0)},highlightDropItemsOnHover:function(t){var e=t.target,o=_lyteUiUtils.getCurrentTarget(t).querySelector(".lyteDropdownSelection");this.getData("ltPropPreventNavigation")||(e=_lyteDropdown.traverse(e,["LYTE-DROP-ITEM"]),this.hasMousePositionNotChanged(t)||e===o||(o&&o.classList.remove("lyteDropdownSelection"),e&&"LYTE-DROP-ITEM"===e.tagName&&"true"!==e.getAttribute("disabled")&&e&&(e.classList.add("lyteDropdownSelection"),this.getActiveElement().setAttribute("aria-activedescendant",e.getAttribute("id")))))},createErrorDiv:function(){var t,e=this.getData("ltPropNoResultYield"),o=this.getData("ltPropNoResult");return e||((t=document.createElement("div")).setAttribute("class","lyteDropdownNoResult"),t.textContent=o,t.style.display="none"),t},processElements:function(t){var e=t.target,o=this.getData("multiple");this.getData("search")&&this.focusInput(),(e=_lyteDropdown.traverse(e,["HTML","LYTE-DROP-ITEM"]))&&"HTML"!==e.tagName&&"true"!==e.getAttribute("disabled")&&(o?this.addItem(t,e):this.selectItem(t,e))},addItem:function(t,e){var o,i,a=this.getData("ltPropSelected"),l=this;if(!this.beforeAddPromiseActive&&!this.checkLimit(1))if(o=e.getAttribute("data-value"),this.getMethods("onBeforeAdd")&&(i=this.beforeAdd(t,e,o)),this.isPromise(i))this.beforeAddPromiseActive=!0,i.then((function(){l.selectItemOfMultiSelect(t,e,a),l.beforeAddPromiseActive=!1})).catch((function(t){console.error(t),l.beforeAddPromiseActive=!1}));else{if(i)return;this.selectItemOfMultiSelect(t,e,a)}},selectItem:function(t,e){var o=this.childComp,i=this.getData("ltPropFreeze"),a=this.getData("ltPropSelected");this.beforeSelect(t,e)&&(this.setData("ltPropSelected",e.getAttribute("data-value")),this.optCall(t,this.getData("ltPropSelected"),e),this.fireOnChange(a,t,e),this.beforeHide(o,t,i)||this.closeDrop(o,t,i))},isPromise:function(t){return"object"==typeof t},selectItemOfMultiSelect:function(t,e,o){var i=this.childComp,a=i.querySelectorAll("lyte-drop-item"),l=e.getAttribute("data-value"),s=this.getData("drophead"),r=this.getData("ltPropType"),n=this.getData("search"),d=this.$node.querySelector("lyte-search")||this.$node.querySelector("input");n&&d.setValue&&!this.isInputEmpty(d)&&d.setValue(""),this.setHighlight(a,e),this.setData("prev",!0),e.setAttribute("selected","true"),this.setData("prev",!1),e.classList.add("lyteDropdownActive"),this.hideGroup(e),this.getMethods("onAdd")&&this.executeMethod("onAdd",t,l,this.getData("ltPropSelected"),this,e),this.showError(i,r,s),this.fixBoxPosition(),this.fireOnChange(o,t,e)},setClassAttributes:function(){this.setBoxClass(),this.setButtonClass(),this.setIconClass(),this.setClassForRemoveIcon()},setClassForRemoveIcon:function(){this.getData("ltPropShowRemoveIcon")&&this.getData("ltPropSelected")?this.$node.classList.add("lyteDropdownWithDeselectIcon"):this.$node.classList.remove("lyteDropdownWithDeselectIcon")},setClassForRemoveIconObs:function(){this.setClassForRemoveIcon()}.observes("ltPropShowRemoveIcon","ltPropSelected"),addCallout:function(){var t,e=this.getDropBox();(t=document.createElement("span")).setAttribute("class","lyteArrow"),e.insertBefore(t,e.children[0])},addTabIndexForYieldedMultisearch:function(){var t=this.getData("ltPropType"),e=this.getData("drophead"),o=this.$node.querySelector("input"),i=this.getData("ltPropTabindex"),a=this.getData("ltPropDataTabindex"),l=this.getData("ltPropDisabled");o&&"yield"===e&&"multisearch"===t&&!l&&(o.setAttribute("tabindex",i),o.setAttribute("data-tabindex",a))},addDataTabindex:function(){var t=this.getData("drophead"),e=this.getData("ltPropDisabled"),o=this.getData("ltPropDataTabindex"),i=this.$node.querySelector("input");i&&"yield"===t&&!e&&i.setAttribute("data-tabindex",o)}.observes("ltPropDataTabIndex"),addTabIndex:function(){this.addTabIndexForYieldedMultisearch()}.observes("ltPropTabindex"),getElementWithTabIndex:function(){return this.$node.querySelector("[tabindex]")||this.$node.querySelector("input")},getFirstEnabledItem:function(){for(var t=this.getDropBody(this.childComp).querySelectorAll("lyte-drop-item"),e=this.getData("ltPropDisabledList")||[],o=0;o<t.length;o++)if(!~e.indexOf(t[o].getAttribute("data-value")))return t[o]},hasMousePositionNotChanged:function(t){var e=t.clientX,o=t.clientY,i=this.prevClientX,a=this.prevClientY;return this.prevClientX=e,this.prevClientY=o,i===e&&a===o},tranEnd:function(t){var e=this.childComp,o=this.getData("ltPropAnimate"),i=this.data.ltPropAnimateBox?e:this.getDropBody(e);window.clearTimeout(this.timeoutIdForOpen),o&&(i.style.height="auto"),e.classList.remove("lyteAnimate","lyteDropBoxAnimate"),e.removeEventListener("transitionend",this._transEnd),delete this._prevent,delete this._preventSetcss,delete this._preventMutObs,this.getMethods("onAnimationEnd")&&this.executeMethod("onAnimationEnd",t,this);var a=this.isFF();this.getData("ltPropIsOpen")&&(a&&this.isBodyScrollable()?this.addProperScrollbar():a&&!this.isBodyScrollable()&&this.removeScrollbar())},openSlideAnimate:function(){if(this.getData("ltPropAnimate")){if(this._preventSetcss)return;if(this._preventAnimate)return;this._preventAnimate=!0,this._preventSetcss=!0,this._preventMutObs=!0;var t=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),e=this.data.ltPropAnimateBox,o=e?t:this.getDropBody(this.childComp);this._oriStyle=o.style.height,o.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(t.style.top=parseInt(t.style.top)+this._hgt+"px"),t.classList.add("lyteAnimate"),e&&t.classList.add("lyteDropBoxAnimate"),setTimeout(function(){-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(t.style.top=parseInt(t.style.top)-this._hgt+"px"),o.style.height=this._hgt+"px",setTimeout(function(){if(t.addEventListener("transitionend",this._transEnd),this._hgt){var e=this.getTransitionTime(t);this.timeoutIdForOpen=setTimeout(this._transEnd,e)}else this.tranEnd.call(this,{})}.bind(this),20)}.bind(this),20)}},getTransitionTime:function(t){var e=getComputedStyle(t).transitionDuration,o=100;return~e.indexOf("ms")?o+=parseInt(e):o+=1e3*parseFloat(e),o},determine:function(t){var e,o,i,a=t.children,l=this.$node;l.querySelector("lyte-dropdown")?this.getChildren(a):(o=t.querySelector("lyte-drop-box"),(e=t.querySelector("lyte-drop-button"))&&(i=l.querySelector(".lyteDummyEventContainer"),this.setData("drophead","yield"),_lyteUiUtils.appendChild(i,e)),o&&(this.setData("dropbody","yield"),o.classList.add("lyteDropdownHidden")))},addClass:function(){this.childComp.classList.add("lyteMultiSelectDropdown")},closeDrop:function(t,e,o,i){if(_lyteDropdown.autoClosed=null,this.setData("ltPropIsOpen",!1),!this._prevent)if(this.getData("ltPropAnimate")&&!i){var a=this.data.ltPropAnimateBox;this._prevent=!0,this._preventSetcss=!0,this._arguments=arguments,this.childComp.classList.add("lyteAnimate"),a&&this.childComp.classList.add("lyteDropBoxAnimate"),setTimeout(function(){var t=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),e=a?t:this.getDropBody(this.childComp);e.style.height=this._hgt+"px",setTimeout(function(){if(e.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(t.style.top=parseInt(t.style.top)+this._hgt+"px"),this._animationStarted=!0,this._elem=e,this._box=t,e.addEventListener("transitionend",this._close),this._hgt){var o=this.getTransitionTime(e);this.timeoutIdForClose=setTimeout(this._close,o)}else this.closeDrop1.call(this)}.bind(this),20)}.bind(this),20)}else this.closeDrop1(t,e,o)},closeDrop1:function(t,e,o){var i,a=this.$node.querySelector("lyte-drop-button"),l=this.getData("pos"),s=this.getData("multiple"),r=this.getDropBox(),n=this.getData("ltPropPreventScroll"),d=this.getData("ltPropPreventParentScroll");window.clearTimeout(this.timeoutIdForClose),this._arguments&&(t=this._arguments[0],e=this._arguments[1],o=this._arguments[2],this._elem.style.height=this._oriStyle,this._box.classList.remove("lyteAnimate","lyteDropBoxAnimate"),this._elem.removeEventListener("transitionend",this._close),delete this._hgt,delete this._oriStyle,delete this._arguments,delete this._elem,delete this._box),s&&(this.getDropBody(t).scrollTop=0),t&&(t.classList.add("lyteDropdownHidden"),t.style.left="",t.style.top="",t.style.bottom="",t.style.right="");var p=this.getFreezeLayer();if(o&&p&&"all"===n&&(p.style.display="none"),(o||d)&&document.body.classList.remove("lyteBodyWrapper"),this.disableParentListeners(),(i=this.removeClass(a.classList,l,"lyteDropButton",!0))&&a.classList.remove(i),this.popOutOfGlobalStack(this.$node),this.getMethods("onHide")&&this.executeMethod("onHide",e,this),this.focusButton(),r)var h=this.removeClass(r.classList,l,"lyteDropdown",!0);h&&r.classList.remove(h),this.setData("pos",""),this.setData("secondaryPosition",""),this.setData("savedPositions",{}),delete this._prevent,delete this._preventSetcss,delete this._preventAnimate,delete this._animationStarted},focusButton:function(){var t=this.getData("search"),e=document.activeElement;!this.getData("ltPropFocusOnClose")||t||this.isFocusable(e)||(this.preventScroll=!0,this.setData("ltPropFocus",!0),this.preventScroll=!1)},isFocusable:function(t){var e;return t=$L(t),!(!_lyteDropdown.isVisible(t.get(0))||t.is(":disabled"))&&(e=t.attr("tabindex"),e=isNaN(e)?-1:e,t.is("button, input, select, textarea, a[href], area[href], iframe")||e>-1)},callOnScroll:function(t){var e=this;this.getMethods("onScroll")&&this.executeMethod("onScroll",t,this),this.hasScrollEndReached(t)&&this.movingDownward(t)&&(window.clearTimeout(this.scrollEndId),this.scrollEndId=setTimeout((function(){e.fireScrollEnd(t)}),50))},movingDownward:function(t){var e=t.target.scrollTop,o=this.previousScrollTop||0;return this.previousScrollTop=e,e-o>0},hasScrollEndReached:function(t){var e=t.target,o=e.scrollTop;return e.offsetHeight+o>=e.scrollHeight-5},fireScrollEnd:function(t){this.getMethods("onScrollEnd")&&this.executeMethod("onScrollEnd",t)},addDisabledClass:function(t){for(var e,o=0;o<t.length;o++)"true"==(e=t[o]).getAttribute("disabled")?e.classList.add("lyteDropdown-disabled"):e.classList.contains("lyteDropdown-disabled")&&e.classList.remove("lyteDropdown-disabled")},changeBoxClass:function(t){var e=t.oldValue;this.setBoxClass(e)}.observes("ltPropBoxClass"),setAriaExpanded:function(){var t=this.getData("ltPropIsOpen");this.getData("ltPropSetAriaOnActiveElement")&&this.getActiveElement().setAttribute("aria-expanded",t?"true":"false")}.observes("ltPropIsOpen"),changeButtonClass:function(t){var e=t.oldValue;this.setButtonClass(e)}.observes("ltPropButtonClass"),noResultChanged:function(){var t=this.childComp,e=this.getData("ltPropType"),o=this.getData("drophead"),i=this.getDropBody(t).querySelector(".lyteDropdownNoResult"),a=this.getData("ltPropNoResult");t=this.childComp;i.textContent=a,a||(i.style.display="none"),t&&this.showError(t,e,o)}.observes("ltPropNoResult"),showNoResultDiv:function(){var t=this.getData("ltPropShowEmptyMessage"),e=this.childComp,o=this.getDropBody(e),i=o.querySelectorAll("lyte-drop-item"),a=o.querySelector(".lyteDropdownNoResult"),l=this.getData("multiple");a&&(t&&!l?0===i.length?a.style.display="block":a.style.display="none":t||l||(a.style.display="none"))},onChangeInDisabledList:function(){this.disableItems()}.observes("ltPropDisabledList.[]","ltPropOptions.[]").on("didConnect"),disableItems:function(){for(var t,e=this.childComp?this.childComp.querySelectorAll("lyte-drop-item"):this.$node.querySelectorAll("lyte-drop-item"),o=0;o<e.length;o++)"true"===(t=Lyte.Component.registeredHelpers.lyteUiCheckDisabled(this.getData("ltPropDisabledList")||[],e[o].dataset.value))&&(e[o].classList.remove("lyteDropdownSelection"),e[o].setAttribute("disabled",t)),"false"===t&&e[o].hasAttribute("disabled")&&e[o].removeAttribute("disabled");this.addDisabledClass(e)},removeClass:function(t,e,o,i,a){if(!e)return"";a=a||"";for(var l=0,s=t.length,r=o+(i?e[0].toUpperCase()+e.substring(1):{up:"Down",down:"Up",left:"Right",right:"Left"}[e])+a;l<s;l++)if(t[l]===r)return r;return""},firePosCallBack:function(){var t=this.getData("pos"),e=this.getData("widthAdjusted");if(""!==t){var o=this.childComp,i=this.$node.querySelector("lyte-drop-button"),a=this.removeClass(o.classList,t,"lyteDropdown");a&&(this._preventClass=!0,o.classList.remove(a)),o.classList.add("lyteDropdown"+t[0].toUpperCase()+t.substring(1)),(a=this.removeClass(i.classList,t,"lyteDropButton"))&&(this._preventClass=!0,i.classList.remove(a)),i.classList.add("lyteDropButton"+t[0].toUpperCase()+t.substring(1)),2===e&&o.classList.add("lyteDropdownCurve"),this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",t,this)}}.observes("pos","firePos"),secondaryPositionObserver:function(){var t=this.getData("secondaryPosition")||"";if(""!==t){var e=this.childComp,o=this.removeClass(e.classList,t,"lyteDropbox",!1,"AlignToButton");o&&e.classList.remove(o),this._preventClass=!0,e.classList.add("lyteDropbox"+t[0].toUpperCase()+t.substring(1)+"AlignToButton")}}.observes("secondaryPosition"),setLeftExceedForDown:function(t,e,o,i,a){var l=-a,s=this.getButton().getBoundingClientRect(),r=(s.left,s.width,s.right);return l+(window.innerWidth-r)},alignBoxToButtonLeft:function(t,e,o){return o+this.getButton().getBoundingClientRect().left},setTopAboveForDown:function(t,e,o,i,a){var l=-a,s=o.top,r=(i.height,l+(window.innerHeight-s));return this._animationStarted?l+(window.innerHeight-s):r},alignBoxTopToButtonBottom:function(t,e,o){var i=e;return o+i.top+i.height},setLeftForRight:function(t,e,o){var i=e;return o+i.left+i.width},setRightForRight:function(t,e,o,i,a){var l=-a,s=o.left;return l+(window.innerWidth-s)},setTopForRight:function(t,e,o){return o+e.top},setTopForRightAbove:function(t,e,o,i,a){var l=-a,s=o,r=(s.top,s.height,s.bottom),n=(i.height,l+(window.innerHeight-r));return this._animationStarted?l+(window.innerHeight-r):n},setCorrectClass:function(t){for(var e=this.childComp.querySelector(".lyteArrow"),o=e.classList,i=0;i<o.length;i++)"lyteArrow"!=o[i]&&o[i]!=t&&(e.classList.remove(o[i]),i--);e.classList.add(t),e.classList.add("lyteArrowIcon")},hasClassToggled:function(t,e){var o=t.oldValue?t.oldValue.trim().split(" "):[],i=t.target,a=o.length,l=i.classList.length;return!(!(~o.indexOf(e)&&!i.classList.contains(e)||!~o.indexOf(e)&&i.classList.contains(e))||1!==Math.abs(a-l))},adjustWidth:function(t,e,o){var i=this.getData("ltPropBoxButtonWidth");return"min-button"===i?(this.setData("widthAdjusted",1),o>e&&this.setData("widthAdjusted",2),t.style.minWidth=e+"px"):"auto"===i?(this.setData("widthAdjusted",1),t.style.width="auto",t.getBoundingClientRect().width>e&&this.setData("widthAdjusted",2)):(this.setData("widthAdjusted",1),t.style.width=e+"px",t.style.minWidth=e+"px"),t.getBoundingClientRect().width},getDropBody:function(t){var e;return(e=t?t.querySelectorAll("lyte-drop-body"):this.$node.querySelectorAll("lyte-drop-body"))[e.length-1]},toggleCurrent:function(t){var e="lyteDropdownSelection",o=this.getDropBox(),i=o&&o.querySelector("."+e);i&&i.classList.remove(e),t.classList.add(e),this.getActiveElement().setAttribute("aria-activedescendant",t.getAttribute("id"))},scrollSel:function(){var t,e,o=this.getData("ltPropSelected"),i=this.childComp,a=this.getDropBody(i),l=this.getAllItems(a),s=t=this.getItem(l,o);if(this.getData("multiple"))(t=l.filter((function(t){return!t.classList.contains("lyteDropdownActive")&&!t.classList.contains("lyteSearchHidden")}))[0])&&!t.classList.contains("lyteDropdown-disabled")&&this.toggleCurrent(t);else{for(0===(o||"").length&&(a.scrollTop=0);s&&(s=s.previousElementSibling)&&("LYTE-DROP-ITEM"!==s.tagName&&"LYTE-DROP-LABEL"!==s.tagName||!_lyteDropdown.isVisible(s)););s=s||t,a.scrollTop=s?this.isFirstItem(s)?0:s.offsetTop:0,t&&!t.classList.contains("lyteDropdown-disabled")?this.toggleCurrent(t):(e=a.querySelector(".lyteDropdownSelection"))&&e.classList.remove("lyteDropdownSelection")}},isFirstItem:function(t){var e=t.parentElement;return e&&e.firstElementChild===t},clone:function(t){var e={};for(var o in t)e[o]=t[o];return e},isFF:function(){return!!~navigator.userAgent.indexOf("Firefox")},isBodyScrollable:function(){var t=this.childComp,e=this.getDropBody(t);return e.scrollHeight>e.offsetHeight},addProperScrollbar:function(){var t=this.childComp,e=this.getDropBody(t);e.classList.contains("lyteDropdownFFScroll")||e.classList.add("lyteDropdownFFScroll"),e.classList.contains("lyteDropdownFFZeroScroll")&&e.classList.remove("lyteDropdownFFZeroScroll")},removeScrollbar:function(){var t=this.childComp,e=this.getDropBody(t);e.classList.contains("lyteDropdownFFZeroScroll")||e.classList.add("lyteDropdownFFZeroScroll"),e.classList.contains("lyteDropdownFFScroll")&&e.classList.remove("lyteDropdownFFScroll")},getButton:function(){return this.$node.element||this.$node.querySelector("lyte-drop-button")},shouldNavigate:function(){var t=this.getData("ltPropActiveElement"),e=document.activeElement,o=this.getData("ltPropAllowFocusableElements");return!this.getData("ltPropPreventNavigation")&&(!o||!t||e.matches(t))},setVerticalCalloutPosition:function(t,e,o){var i,a,l,s=this.childComp.querySelector(".lyteArrow");i=getComputedStyle(s,":before").getPropertyValue("border-left-width"),i=parseFloat(i||"0px"),a=getComputedStyle(s,":before").marginLeft,a=Math.abs(parseFloat(a||"0px")),l=(o?e.width/2-i+a:t-e.width/2-i+a)/(t/100),s.style.left=l+"%"},setHorizontalCalloutPosition:function(t,e,o){var i,a,l,s=this.childComp.querySelector(".lyteArrow");i=getComputedStyle(s,":before").getPropertyValue("border-left-width"),i=parseFloat(i||"0px"),a=getComputedStyle(s,":before").marginTop,a=Math.abs(parseFloat(a||"0px")),l=(o?100*(e.height/2-i+a):100*(t.height-e.height/2-i+a))/t.height,s.style.top=l+"%"},clearPositionValues:function(){var t=this.childComp;t.style.left="",t.style.top="",t.style.bottom="",t.style.right="",t.style.transform="translate( -1000px, -1000px )"},setPositionFlags:function(t,e){this.setData("pos",t),this.setData("secondaryPosition",e)},exceedsBottomBoundary:function(t,e,o,i){return"right"!==t&&"left"!==t?e.top+e.height+o.height>i.bottom:e.top+o.height>i.bottom},exceedsTopBoundary:function(t,e,o){return t.top-e.height<o.top},findPrimaryVerticalPosition:function(t,e,o,i){return"down"===t?!(this.exceedsBottomBoundary(t,e,o,i)&&!this.exceedsTopBoundary(e,o,i)):"up"===t?!(this.exceedsTopBoundary(e,o,i)&&!this.exceedsBottomBoundary(t,e,o,i)):void 0},findSecondaryVerticalPosition:function(t,e,o,i){return!this.exceedsBottomBoundary(t,e,o,i)},setCss:function(t,e){var o=this.childComp,i=this.getData("call");if(e||this.setData("savedPositions",{}),o&&!o.classList.contains("lyteDropdownHidden")){this.clearPositionValues();var a=this.getData("ltPropCallout"),l=o,s=this.$node.element,r=s||this.$node.querySelector("lyte-drop-button"),n=this.getData("savedPositions"),d=this.clone(l.getBoundingClientRect()),p=this.getDropBody(l).getBoundingClientRect(),h=window.pageXOffset||document.documentElement.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop,u=l.offsetHeight,y=l.offsetWidth,m=o.querySelector(".lyteArrow"),f=this.getData("ltPropPosition"),g=r.getBoundingClientRect(),v=this.isFF(),D=this.getScopeBoundary(),b=this.getData("ltPropForceCalculateWidth");this.data.ltPropAnimate&&(this._hgt=this.data.ltPropAnimateBox?d.height:p.height),i&&(this._preventClass=!0,this.scrollSel(),!b&&t||(y=this.adjustWidth(l,g.width,y),d.width=y,a||(m.style.width=g.width+"px"))),a&&!l.classList.contains("lyteDropBodyCallout")&&l.classList.add("lyteDropBodyCallout"),v&&this.isBodyScrollable()?this.addProperScrollbar():v&&!this.isBodyScrollable()&&this.removeScrollbar();var P,w,C,L,x,S,T=_lyteUiUtils.getRTL();"down"===f?(P=this.findPrimaryVerticalPosition("down",g,d,D),w=0,g.left+g.width-y>D.left&&(w=1),g.left+y<=D.right&&(w+=2),w=T?!(1&w||!w):!(!(2&w)&&w),e&&!_lyteDropdown.isEmpty(n)?(w=n.rightPos,P=n.downPos):e&&(n.rightPos=w,n.downPos=P,this.setData("savedPositions",n)),P?a?(this.setCorrectClass("lyteArrowTop"),x=getComputedStyle(m,":before").getPropertyValue("border-left-width"),l.style.top=this.alignBoxTopToButtonBottom(r,g,c)+parseFloat(x||"0px")+"px"):l.style.top=this.alignBoxTopToButtonBottom(r,g,c)+"px":a?(this.setCorrectClass("lyteArrowBottom"),x=getComputedStyle(m,":before").getPropertyValue("border-left-width"),l.style.bottom=this.setTopAboveForDown(r,l,g,d,c)+parseFloat(x||"0px")+"px"):l.style.bottom=this.setTopAboveForDown(r,l,g,d,c)+"px",w?(a&&this.setVerticalCalloutPosition(y,g,!0),l.style.left=this.alignBoxToButtonLeft(r,g,h)+"px"):(a&&this.setVerticalCalloutPosition(y,g,!1),l.style.right=this.setLeftExceedForDown(r,l,g,y,h)+"px"),this.setPositionFlags(P?"down":"up",w?"right":"left")):"right"===f?(w=0,g.left-d.width>D.left&&(w=1),g.left+g.width+d.width<D.right&&(w+=2),w=T?!(1&w||!w):!(!(2&w)&&w),P=this.findSecondaryVerticalPosition("right",g,d,D),e&&!_lyteDropdown.isEmpty(n)?(w=n.rightPos,P=n.downPos):e&&(n.rightPos=w,n.downPos=P,this.setData("savedPositions",n)),w?a?(this.setCorrectClass("lyteArrowLeft"),S=getComputedStyle(m,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),l.style.left=this.setLeftForRight(r,g,h)+S+"px"):l.style.left=this.setLeftForRight(r,g,h)+"px":a?(this.setCorrectClass("lyteArrowRight"),S=getComputedStyle(m,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),l.style.right=this.setRightForRight(r,l,g,y,h)+S+"px"):l.style.right=this.setRightForRight(r,l,g,y,h)+"px",P?(a&&this.setHorizontalCalloutPosition(d,g,!0),l.style.top=this.setTopForRight(r,g,c)+"px"):(a&&this.setHorizontalCalloutPosition(d,g,!1),l.style.bottom=this.setTopForRightAbove(r,l,g,d,c)+"px"),this.setPositionFlags(w?"right":"left",P?"down":"up")):"up"===f?(C=this.findPrimaryVerticalPosition("up",g,d,D),w=0,g.left+g.width-y>D.left&&(w=1),g.left+y<=D.right&&(w+=2),w=T?!(1&w||!w):!(!(2&w)&&w),e&&!_lyteDropdown.isEmpty(n)?(w=n.rightPos,C=n.topPos):e&&(n.rightPos=w,n.topPos=C,this.setData("savedPositions",n)),C?a?(this.setCorrectClass("lyteArrowBottom"),x=getComputedStyle(m,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),l.style.bottom=this.setTopAboveForDown(r,l,g,d,c)+x+"px"):l.style.bottom=this.setTopAboveForDown(r,l,g,d,c)+"px":a?(this.setCorrectClass("lyteArrowTop"),x=getComputedStyle(m,":before").getPropertyValue("border-left-width"),x=parseFloat(x||"0px"),l.style.top=this.alignBoxTopToButtonBottom(r,g,c)+x+"px"):l.style.top=this.alignBoxTopToButtonBottom(r,g,c)+"px",w?(a&&this.setVerticalCalloutPosition(y,g,!0),l.style.left=this.alignBoxToButtonLeft(r,g,h)+"px"):(a&&this.setVerticalCalloutPosition(y,g,!1),l.style.right=this.setLeftExceedForDown(r,l,g,y,h)+"px"),this.setPositionFlags(C?"up":"down",w?"right":"left")):"left"===f&&(L=0,g.left+g.width+y<D.right&&(L=1),g.left-y>D.left&&(L+=2),L=T?!(1&L||!L):!(!(2&L)&&L),P=this.findSecondaryVerticalPosition("left",g,d,D),e&&!_lyteDropdown.isEmpty(n)?(L=n.leftPos,P=n.downPos):e&&(n.leftPos=L,n.downPos=P,this.setData("savedPositions",n)),L?a?(this.setCorrectClass("lyteArrowRight"),S=getComputedStyle(m,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),l.style.right=this.setRightForRight(r,l,g,y,h)+S+"px"):l.style.right=this.setRightForRight(r,l,g,y,h)+"px":a?(this.setCorrectClass("lyteArrowLeft"),S=getComputedStyle(m,":before").getPropertyValue("border-left-width"),S=parseFloat(S||"0px"),l.style.left=this.setLeftForRight(r,g,h)+S+"px"):l.style.left=this.setLeftForRight(r,g,h)+"px",P?(a&&this.setHorizontalCalloutPosition(d,g,!0),l.style.top=this.setTopForRight(r,g,c)+"px"):(a&&this.setHorizontalCalloutPosition(d,g,!1),l.style.bottom=this.setTopForRightAbove(r,l,g,d,c)+"px"),this.setPositionFlags(L?"left":"right",P?"down":"up")),l.__height=u,o.style.transform=""}},getScopeBoundary:function(){var t,e,o=this.getData("ltPropScope"),i={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight};return"window"!==o&&(t=$L(this.$node).closest(o).get(0))?(e=t.getBoundingClientRect(),{left:Math.max(0,e.left),top:Math.max(0,e.top),right:Math.min(window.innerWidth,e.right),bottom:Math.min(window.innerHeight,e.bottom)}):i},setFreezeLayer:function(){var t=this.getFreezeLayer();"all"===this.getData("ltPropPreventScroll")&&(t.style.display="block",t.classList.add("lyteDropdownZIndex")),document.body.classList.add("lyteBodyWrapper")},isInView:function(t){var e=this.getDropBody(this.childComp),o=e.scrollTop,i=e.offsetHeight,a=t.offsetTop,l=t.offsetHeight;return a>=o&&a+l<=o+i},moveIntoView:function(t){var e=this.getDropBody(this.childComp).scrollTop;t.offsetTop<=e?this.moveDown(t):this.moveUp(t)},moveDown:function(t){this.getDropBody(this.childComp).scrollTop=this.isFirstItem(t)?0:t.offsetTop},moveUp:function(t){var e=this.getDropBody(this.childComp);e.scrollTop=t.offsetTop+t.offsetHeight-e.offsetHeight},scrollIntoView:function(t,e){var o=this.getDropBody(this.childComp);t.offsetTop,o.scrollTop,o.getBoundingClientRect().height,t.getBoundingClientRect().height;o.contains(t)&&(this.isInView(t)||this.moveIntoView(t))},open:function(){var t,e=this,o=this.getData("ltPropType"),i=this.getData("drophead"),a=this.getData("multiple"),l=this.getData("ltPropFreeze"),s=this.getData("ltPropHover");t=this.childComp=this.$node.querySelector("lyte-drop-box"),this.closeError(t,i),this.hideNodes(),"multisearch"===o&&"yield"!==i&&$L(this.$node.querySelector(".lyteDropdownTextField")).search({scope:t,trim:this.getData("ltPropTrimSearchText"),searchDelay:void 0,hiddenSelector:".lyteDropdownActive",search:"lyte-drop-item",related:"lyte-drop-group",caseSensitive:this.getData("ltPropCaseSensitive"),method:this.getData("ltPropSearchMethod"),onSearch:function(t,o,i){var a,l=0,s=e.childComp,r=e.getDropBody(s),n=r.querySelector(".lyteDropdownNoResult"),d=e.getData("ltPropNoResult");if(e.getMethods("onSearch")&&(a=e.executeMethod("onSearch",t,o,i,e)),!1===a)return a;for(r.scrollTop=0;l<t.length;l++)if(!t[l].classList.contains("lyteDropdownActive"))return n&&(n.style.display="none"),void e.toggleCurrent(t[l],r);"none"===n.style.display&&d&&(n.style.display="block")}}),t.origindd=this.$node,_lyteUiUtils.appendChild(document.body,t),t.classList.remove("lyteDropdownHidden"),this.preventParentScroll(),!l||a||s||this.setFreezeLayer()},preventParentScroll:function(){if(this.getData("ltPropPreventParentScroll")){var t,e,o=$L(this.$node).parents(),i=this;t=o.filter(this.isScrollable),e=(e=o.filter(this.isLyteScrollBar)).map((function(t,e){return e.parentNode})),t.each((function(t,e){$L(e).data("lyte-scrollTop",e.scrollTop),$L(e).data("lyte-scrollLeft",e.scrollLeft)})),this.scrollableParents=t,this.lyteScrollBarParents=e,this.scrollableParents.on("scroll",this.resetScroll),this.scrollableParents.on("wheel",this.preventDefaultBehaviour),this.scrollableParents.on("touchmove",this.preventDefaultBehaviour),this.lyteScrollBarParents.each((function(t,e){e&&(e.addEventListener("touchmove",i.disableLyteScrollBar,!0),e.addEventListener("wheel",i.disableLyteScrollBar,!0))})),document.body.classList.add("lyteBodyWrapper")}},disableLyteScrollBar:function(t){t.stopPropagation()},isScrollable:function(t,e){var o=$L(e).css("overflow-y"),i=$L(e).css("overflow-x");return e.clientWidth<e.scrollWidth&&("auto"===i||"scroll"===i)||e.clientHeight<e.scrollHeight&&("auto"===o||"scroll"===o)},isLyteScrollBar:function(t,e){return e.classList.contains("lyteScrollBar")},resetScroll:function(){var t=$L(this).data("lyte-scrollTop"),e=$L(this).data("lyte-scrollLeft");this.scrollTop=t,this.scrollLeft=e},preventDefaultBehaviour:function(t){t.preventDefault()},hideNodes:function(){var t,e,o=this.childComp,i=0,a=this.getData("multiple"),l=this.getData("ltPropType"),s=this.getData("drophead"),r=this.getData("ltPropSelected");if(a&&r&&r.length>2){if(!o)return;try{t=JSON.parse(this.getData("ltPropSelected")||"[]")}catch(t){return void console.error("Unable to parse ltPropSelected",t)}for(var n=this.getAllItems(o);i<t.length;i++)(e=this.getItem(n,t[i]))&&(e.classList.add("lyteDropdownActive"),this.hideGroup(e),this.setData("preventSel",!0),e.setAttribute("selected",!0),this.setData("preventSel",!1))}this.showError(o,l,s)},showNodes:function(t){var e,o,i,a,l=0,s=this.childComp,r=this.getDropBody(s),n=this.getData("multiple"),d=this.getData("ltPropType"),p=this.getData("drophead"),h=this.getData("ltPropSelectedList")||[],c=this.getData("sysValue"),u=t.newValue,y=t.oldValue;if(n){s&&(a=r.querySelector(".lyteDropdownNoResult"));try{u=JSON.parse(u||"[]").map((function(t){return""+t})),y=JSON.parse(y||"[]").map((function(t){return""+t}))}catch(t){return void console.error("Unable to parse ltPropSelected",t)}o=y.length;for(var m=this.getAllItems(s);l<o;l++)if(-1===u.indexOf(y[l])){for(s&&(i=this.getItem(m,y[l]))&&(i.classList.remove("lyteDropdownActive"),this.showGroup(i),this.setData("preventSel",!0),i.removeAttribute("selected"),this.setData("preventSel",!1)),this.setData("preventSelListObs",!0),e=0;e<h.length;e++)if(""+h[e][c]===y[l]){Lyte.arrayUtils(h,"removeAt",e,1);break}this.setData("preventSelListObs",!1),a&&("multisearch"===d&&"yield"!==p||"multiple"===d)&&(a.style.display="none")}}},selObs:function(t){var e=t.oldValue;if(!this.getData("prev")){if(this.checkLimit(0))return this.setData("prev",!0),this.setData("ltPropSelected",e),void this.setData("prev",!1);this.hideNodes(),this.showNodes(t)}}.observes("ltPropSelected"),toggleDropdownClass:function(){var t=this.$node,e=this.getData("ltPropSelected")||"[]";this.getData("multiple")&&((e=JSON.parse(e)).length>0?t.classList.remove("lyteDropNoOptSelected"):t.classList.add("lyteDropNoOptSelected"))},first:function(){var t=this.getData("ltPropType");this.setData("ltPropShow",!0),this.setData("ltPropIsOpen",!0),this.disableItems(),this.open(),"multisearch"===t&&this.focusInput(),this.setBoxStyles()},subsequent:function(t,e,o,i){var a=this.getData("ltPropType"),l=this.getData("drophead");this.setData("ltPropIsOpen",!0),this.disableItems(),t.classList.remove("lyteDropdownHidden"),this.preventParentScroll(),!e||o||i||this.setFreezeLayer(),"multisearch"===a&&this.focusInput(),this.closeError(t,l),this.showError(t,a,l),this.setBoxStyles()},setBoxStyles:function(){var t=this.getData("ltPropSetPos"),e=this.getDropBox();t||!e||e.classList.contains("lyteDropdownHidden")||this.prerequisites()},beforeShow:function(t,e,o){var i,a=this,l=this.getDropBox(),s=this.getData("ltPropFreeze"),r=this.getData("multiple"),n=this.getData("ltPropHover");(i=this.executeMethod("onBeforeShow",t,this))&&i.then?(_lyteDropdown.lastDropdownWithAPromise=this.$node,this.setData("blockShowHide",!0),i.then((function(i){a.setData("blockShowHide",!1),a.isNotLastDropdownWithPromise()||(a.setData("call",!!e||t),o?a.first():a.subsequent(l,s,r,n))})).catch((function(t){a.setData("blockShowHide",!1),l.removeAttribute("lyte-hidden"),console.error(t)}))):!1!==i?(a.setData("call",!!e||t),o?a.first():a.subsequent(l,s,r,n)):!1===i&&l.removeAttribute("lyte-hidden")},getDropBox:function(){var t=this.childComp;return t||(t=this.$node.querySelector("lyte-drop-box")),t},isNotLastDropdownWithPromise:function(){var t=_lyteDropdown.lastDropdownWithAPromise;return this.$node!==t},closeError:function(t,e){var o=this.getDropBody(t).querySelector(".lyteDropdownNoResult"),i=this.getData("ltPropType");o&&("yield"!==e&&"multisearch"===i||"multiple"===i)&&(o.style.display="none")},checkLimit:function(t){var e,o,i=this.getData("ltPropType"),a=this.getData("ltPropMaxCount"),l=this.getData("ltPropSelected");if("multiple"===i||"multisearch"===i){try{e=JSON.parse(l||"[]")}catch(t){e=[]}return o=e.length+t,a>0&&o>a||void 0}},findMarked:function(t,e){var o,i,a=[],l=e.length;try{t=JSON.parse(t||"[]").map((function(t){return""+t}))}catch(t){console.error("Unable to parse ltPropSelected",t)}for(o=0;o<l;o++)i=t.indexOf(e[o].getAttribute("data-value")),a=a.concat(t.splice(i,1));return{removed:a,selected:t}},removeMarked:function(t,e,o,i){var a,l,s,r,n=e.length,d=this.getData("ltPropSelectedList")||[],p=this.getData("sysValue");for(this.setData("preventSelListObs",!0),a=0;a<n;a++)for(l=0;l<d.length;l++)if(""+d[l][p]==e[a].getAttribute("data-value")){Lyte.arrayUtils(d,"removeAt",l);break}this.setData("preventSelListObs",!1),s=this.getDropBody(i);var h=this.getAllItems(s);for(a=0;a<e.length;a++)(r=this.getItem(h,e[a].getAttribute("data-value")))&&(r.classList.remove("lyteDropdownActive"),r.classList.remove("lyteSearchHidden"),this.showGroup(r),r.removeAttribute("selected"));this.fixSearchResults(),this.setData("prev",!0),this.setData("ltPropSelected",JSON.stringify(t)),this.setData("prev",!1)},fixSearchResults:function(){var t=this.$node.querySelector("lyte-search")||this.$node.querySelector("input");t&&t.setValue&&t.setValue(t.value||"")},removeAll:function(t){var e,o,i=this.$node,a=this.childComp,l=this.getData("drophead"),s=i.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark"),r=this.getData("ltPropSelected"),n=this.getData("ltPropSelected");this.getData("ltPropReadOnly")||(o=this.findMarked(n,s),e=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(t,o.removed,e,s)||(this.removeMarked(o.selected,s,l,a),this.closeError(a,l),this.getMethods("onRemove")&&this.executeMethod("onRemove",t,o.removed,this.getData("ltPropSelected"),this,e,s),this.fixBoxPosition(),this.fireOnChange(r,t,s)))},relativePosition:function(t,e){var o=t;if(1===e.length&&e[0]===t)return!0;for(;o=o.previousElementSibling;)if(o.getAttribute("lyte-last"))return!0;return!1},shade:function(t){var e,o=this.$node.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark");if(!(o.length>1&&t.classList.contains("lyteDropMark"))){e=0===o.length||this.relativePosition(t,o)?"previousElementSibling":"nextElementSibling";do{t.classList.add("lyteDropMark")}while((t=t[e])&&!t.getAttribute("lyte-last"))}},fireCheckKey:function(t){this.$node.component.checkKey(t)},fireOnChange:function(t,e,o){var i=this.getData("ltPropSelected");this.hasValueChanged(t)&&this.getMethods("onChange")&&this.executeMethod("onChange",e,i,this,o)},hasValueChanged:function(t){var e=this.getData("ltPropSelected");return this.getData("multiple")?(t=this.stringifyALS(t))!==(e=this.stringifyALS(e)):t!==e},stringifyALS:function(t){return t=t||"[]",t=JSON.parse(t).map((function(t){return""+t})),JSON.stringify(t)},mark:function(t,e,o){e?(_lyteDropdown.unmark(this),this.shade(t)):o?(_lyteDropdown.unmark(this),t.classList.add("lyteDropMark")):(_lyteDropdown.unmark(),t.classList.add("lyteDropMark")),this.setLast(t)},beforeSelect:function(t,e){var o=this.getData("ltPropSelected"),i=!0,a=e.getAttribute("data-value");return this.getMethods("beforeSelect")&&(i=!1!==(i=this.executeMethod("beforeSelect",t,o,this,e,a))),i},focusInput:function(){var t;_lyteUiUtils.isMobile?(t=this.$node.querySelector("input"))&&t.focus():$L.fastdom.measure((function(){if(this.$node){var t=this.$node.querySelector("input");t&&t.focus()}}),this)},showError:function(t,e,o){var i,a=this.getDropBody(t),l=a.querySelectorAll("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)");this.getData("ltPropNoResult")&&0===l.length&&(i=a.querySelector(".lyteDropdownNoResult"))&&("multisearch"===e&&"yield"!==o||"multiple"===e)&&(i.style.display="block")},beforeRemove:function(t,e,o,i){var a;return this.getMethods("onBeforeRemove")&&(a=0==(a=this.executeMethod("onBeforeRemove",t,e,this.getData("ltPropSelected"),this,o,i))),a},beforeAdd:function(t,e,o){var i;return this.getMethods("onBeforeAdd")&&(i=this.executeMethod("onBeforeAdd",t,o,this.getData("ltPropSelected"),this,e)),this.isPromise(i)?i:i=0==i},beforeHide:function(t,e,o){var i=!1;if(this.getMethods("onBeforeHide")){if((i=this.executeMethod("onBeforeHide",e,this))&&i.then)return i.then(function(){this.closeDrop(t,e,o)}.bind(this,t,e,o)).catch((function(t){console.error(t)})),!0;i=0==i}return i},beforeScrollClose:function(t){this.getMethods("onBeforeScrollClose")&&this.executeMethod("onBeforeScrollClose",t)},beforeScrollOpen:function(t){this.getMethods("onBeforeScrollOpen")&&this.executeMethod("onBeforeScrollOpen",t)},setHighlight:function(t,e){for(var o,i,a=0;a<t.length&&!t[a].classList.contains("lyteDropdownSelection");a++);t[a]&&t[a]===e&&(i=o=a,(a=_lyteDropdown.find(t,a+1,!0))!=t.length?(t[a].classList.add("lyteDropdownSelection"),this.getActiveElement().setAttribute("aria-activedescendant",t[a].getAttribute("id"))):-1!=(o=_lyteDropdown.find(t,o-1,!1))&&(t[o].classList.add("lyteDropdownSelection"),this.getActiveElement().setAttribute("aria-activedescendant",t[o].getAttribute("id"))),t[i].classList.remove("lyteDropdownSelection"))},getFocusableElementsOfBox:function(){return this.getDropBox().querySelectorAll(_lyteDropdown.focusableElementsSelector)},getFocusableElementsOfButton:function(){return this.$node.querySelectorAll(_lyteDropdown.focusableElementsSelector)},getFocusableElements:function(){var t=[];return this.getData("ltPropIncludeButtonInFocusLoop")&&(t=Array.from(this.getFocusableElementsOfButton())),t.concat(Array.from(this.getFocusableElementsOfBox()))},shouldTrapFocus:function(){var t=this.getFocusableElements();return this.getData("ltPropAllowFocusableElements")&&t.length>1},isFirstFocusableElement:function(){var t=this.getDropBox().querySelectorAll(_lyteDropdown.focusableElementsSelector),e=document.activeElement;return t[0]===e},focusFirstFocusableBoxElement:function(){this.getFocusableElementsOfBox()[0].focus()},focusProperElement:function(t){var e=this.getFocusableElements(),o=e.length,i=this.getFocusableElementsOfButton(),a=this.getDropBox(),l=document.activeElement,s=this.getData("ltPropIncludeButtonInFocusLoop");t.shiftKey?e[0]===l?(t.preventDefault(),e[o-1].focus()):a.contains(l)&&this.isFirstFocusableElement()&&s&&(t.preventDefault(),this.setData("ltPropFocus",!0)):e[o-1]===l?(t.preventDefault(),e[0].focus()):this.$node.contains(l)&&l===i[i.length-1]&&s&&(t.preventDefault(),this.focusFirstFocusableBoxElement())},setLast:function(t){var e=document.querySelector('[lyte-last="true"]');e&&e.removeAttribute("lyte-last"),t.setAttribute("lyte-last",!0)},optCall:function(t,e,o){this.getMethods("onOptionSelected")&&this.executeMethod("onOptionSelected",t,e,this,o)},setInitialSelected:function(t){this.setSelectedFromOptions(t)},contentChange:function(t){var e=t.oldValue,o=t.newValue,i=this.getData("ltPropSelected"),a=this.getData("ltPropPlaceholder"),l=(this.getData("ltPropDisplayValue"),"yield"===this.getData("dropbody"));!((e&&0===e.length||!e)&&o&&o.length>0)||i||a||l||this.setInitialSelected(),this.showNoResultDiv()}.observes("ltPropOptions"),hideOptionsBasedOnSelected:function(){var t=this.childComp,e=this.getData("drophead"),o=this.getData("multiple"),i=this.getData("ltPropType");t&&o&&(this.hideNodes(),this.closeError(t,e),this.showError(t,i,e))}.observes("ltPropOptions"),selChange:function(){var t,e,o=this.getData("multiple"),i=this.getData("drophead"),a=this.childComp,l=this.getData("ltPropSelected"),s=this.getData("ltPropDisplayValue"),r=this.getData("preventDisp"),n=a||this.$node.querySelector("lyte-drop-box"),d=(this.getDropBody(n),0);if(!this.prevSelectedList){if(o)this.setSelectedList();else if(!o){var p=this.getAllItems(n);for((e=this.getItem(p,l))&&this.toggleCurrent(e),t=n.querySelectorAll("[selected]");d<t.length;d++)t[d].getAttribute("data-value")!=l&&t[d].removeAttribute("selected");if("yield"!==i)if(e){var h=e.textContent;(s&&!r||!s)&&this.setData("ltPropDisplayValue",(h||"").trim())}else l||r||this.setData("ltPropDisplayValue","")}e&&e.setAttribute("selected","true"),this.toggleDropdownClass()}}.observes("ltPropOptions","ltPropSelected","changeItToInvoke"),setSelectedList:function(){var t,e=this.getData("ltPropSelected");if(e){try{t=JSON.parse(e||"[]").map((function(t){return""+t}))}catch(t){return void console.error("Could not parse ltPropSelected",t)}this.buildList(t)}},buildList:function(t){this.setData("preventSelListObs",!0);for(var e=0;e<t.length;e++)this.isPresentInList(t[e])||(this.isOptionsGiven()?this.buildWithOptions(t[e]):this.buildManually(t[e]));this.setData("preventSelListObs",!1)},isPresentInList:function(t){for(var e=this.getData("ltPropSelectedList")||[],o=this.getData("sysValue"),i=0;i<e.length;i++)if(""+e[i][o]===t)return!0;return!1},isOptionsGiven:function(){var t=this.getData("ltPropUserValue"),e=this.getData("ltPropSystemValue");return t||e},buildWithOptions:function(t){for(var e,o=this.getData("ltPropOptions")||[],i=this.getData("sysValue"),a=0;a<o.length&&!e;)this.isOptGroup(o[a])?e=this.getSelectedFromGroup(o[a],t):""+o[a][i]===t&&(e=o[a]),a++;e&&Lyte.arrayUtils(this.getData("ltPropSelectedList"),"push",e)},isOptGroup:function(t){var e=Object.keys(t);e.length;return 1===e.length&&Array.isArray(t[e[0]])},getSelectedFromGroup:function(t,e){var o=Object.keys(t)[0],i=this.getData("sysValue");t=t[o]||[];for(var a=0;a<t.length;a++)if(""+t[a][i]===e)return t[a]},buildManually:function(t){var e=this.childComp,o=e||this.$node.querySelector("lyte-drop-box"),i={value:t,display:(this.getItem(this.getAllItems(o),t)||{}).textContent};i.display&&Lyte.arrayUtils(this.getData("ltPropSelectedList"),"push",i)},tabIndexChange:function(){this.toggleButtonInteractivity()}.observes("ltPropDisabled"),disableClickableItem:function(t){"multisearch"===this.getData("ltPropType")&&(t=this.getClickableItem(t)),t&&t.classList&&t.classList.add("lyteDropdown-disabled"),this.$node.classList.add("lyteDropdownDisabled")},enableClickableItem:function(t){"multisearch"===this.getData("ltPropType")&&(t=this.getClickableItem(t)),t&&t.classList&&t.classList.remove("lyteDropdown-disabled"),this.$node.classList.remove("lyteDropdownDisabled")},getClickableItem:function(t){return"noyield"===this.getData("drophead")?_lyteDropdown.traverse(t,["HTML","LYTE-DROP-BUTTON"]):this.$node.querySelector(".lyteDummyEventContainer")},hideGroup:function(t){var e=$L(t).parent();e.get(0)&&"LYTE-DROP-GROUP"===e.get(0).tagName&&0===this.getVisibleItems(e).length&&e.addClass("lyteDropdownHideGroup")},showGroup:function(t){var e=$L(t).parent();e.get(0)&&"LYTE-DROP-GROUP"===e.get(0).tagName&&this.getVisibleItems(e).length>0&&e.removeClass("lyteDropdownHideGroup")},getVisibleItems:function(t){return t.find("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)")},setSelectedFromList:function(t){var e,o,i=this.getData("multiple"),a=this.getData("sysValue");this.getData("ltPropSelected");if(i&&(e=this.getData("ltPropSelectedList")||[],!t||this.calculateSelected)){o=[];for(var l=0;l<e.length;l++)o.push(""+e[l][a]);this.prevSelectedList=!0,this.setData("ltPropSelected",JSON.stringify(o)),this.prevSelectedList=!1,this.toggleDropdownClass()}},executeKeyNavigationCallback:function(t){this.getMethods("onKeyNavigation")&&this.executeMethod("onKeyNavigation",this,t)},isInputEmpty:function(t){return"LYTE-SEARCH"===t.tagName&&(t=t.querySelector("input")),!(!t||""!==t.value)},fixBoxPosition:function(){var t=this.getData("ltPropFixPositionOnOpen");this.setCss(!0,t)},focusDropdown:function(){var t=this.getElementWithTabIndex(),e=this.getData("ltPropFocus"),o=this.getData("search");e&&(!o&&t?t.focus({preventScroll:this.preventScroll}):o&&this.$node.open()),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),labelCallback:function(t){var e=this.getElementWithTabIndex();e&&e.focus()},labelChange:function(t){var e=this.$node.querySelector(".lyteDropdownFieldLabel");if(e){var o=e.getAttribute("id");o&&(this.$node.setAttribute("aria-labelledby",o),this.labelCallback=this.labelCallback.bind(this),e.addEventListener("click",this.labelCallback))}}.on("didConnect"),showHideEmptyMessage:function(){this.showNoResultDiv()}.observes("ltPropShowEmptyMessage"),setSelectedFromListObs:function(){this.getData("preventSelListObs")||this.setSelectedFromList()}.observes("ltPropSelectedList.[]"),ariaObserver:function(){_lyteUiUtils.setAttribute(this.getDropBox(),this.getData("ltPropAriaBox")||{},{}),_lyteUiUtils.setAttribute(this.getDropBody(this.childComp),this.getData("ltPropAriaBody")||{},{}),_lyteUiUtils.setAttribute(this.getAriaButton(),this.getData("ltPropAriaButton")||{},{})}.observes("ltPropAriaButton","ltPropAriaButton.{}","ltPropAriaBox","ltPropAriaBox.{}","ltPropAriaBody","ltPropAriaBody.{}").on("didConnect"),showHide:function(t,e,o){var i,a=this.childComp,l=this.getData("ltPropFreeze"),s=this.getData("multiple"),r=this.getData("ltPropType"),n=this.getData("ltPropHover"),d=this.getData("ltPropRemoveMultiple"),p=this.getData("ltPropShow"),h=this.getData("blockShowHide"),c=this.getData("ltPropReadOnly"),u=this.getData("ltPropDisabled");if(!c&&!u&&!h){if(_lyteDropdown.autoClosed=null,d&&t&&s){for(i=t.target;i&&"LYTE-DROPDOWN"!==i.tagName&&!i.getAttribute("data-value");)i=i.parentNode;if(i&&i.getAttribute("data-value"))return void this.mark(i,t.shiftKey,t.ctrlKey||t.metaKey);_lyteDropdown.unmark()}else _lyteDropdown.unmark();if("enter"==e){if(a&&!a.classList.contains("lyteDropdownHidden"))return;this.$node.querySelector("[tabindex]").focus()}if("leave"!=e||!a||!a.classList.contains("lyteDropdownHidden"))if(this.showNoResultDiv(),p)if(a&&a.classList.contains("lyteDropdownHidden"))a.setAttribute("lyte-hidden",""),_lyteUiUtils.dispatchEvent("beforeshow",this.$node,{originalEvent:t}),this.getMethods("onBeforeShow")?this.beforeShow(t,o,!1):(this.setData("call",!!o||t),this.subsequent(a,l,s,n));else if(!a||!o&&s)a&&"multisearch"===r&&this.focusInput();else{if(this.beforeHide.call(this,a,t,l))return;this.closeDrop(a,t,l)}else a||(this.childComp=this.$node.querySelector("lyte-drop-box")),this.childComp&&this.childComp.setAttribute("lyte-hidden",""),_lyteUiUtils.dispatchEvent("beforeshow",this.$node,{originalEvent:t}),this.getMethods("onBeforeShow")?this.beforeShow(t,o,!0):(this.setData("call",!!o||t),this.first()),s&&this.addClass()}},checkKey:function(t){var e=this.getData("ltPropType");9==t.keyCode&&(this.$node.component.showHide(t,t.type),"multisearch"==e&&this.focusInput())},closeIt:function(t){var e=t.clientX,o=t.clientY,i=this.$node.querySelector("lyte-drop-button"),a=i.getBoundingClientRect().top,l=i.getBoundingClientRect().height,s=i.getBoundingClientRect().left,r=i.getBoundingClientRect().width,n=this.childComp,d=n.getBoundingClientRect().top,p=n.getBoundingClientRect().height,h=n.getBoundingClientRect().left,c=n.getBoundingClientRect().width;e>Math.floor(s)&&e<Math.floor(s+r)&&o>Math.floor(a)&&o<Math.floor(a+l)||e>Math.floor(h)&&e<Math.floor(h+c)&&o>Math.floor(d)&&o<Math.floor(d+p)||this.$node.toggle(t,"leave")},closeFun:function(t){for(var e,o,i,a=this.childComp,l=this.getData("drophead"),s=this.getData("ltPropRemoveMultiple"),r=this.getData("ltPropSelected"),n=t.target,d=this.getData("ltPropSelected");!n.getAttribute("data-value")&&n;)n=n.parentElement;n&&(e=n.getAttribute("data-value"),o=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(t,s?[e]:e,o,s?[n]:n)||(this.closeError(a,l),i=this.findMarked(d,[n]),this.removeMarked(i.selected,[n],l,a),this.getMethods("onRemove")&&this.executeMethod("onRemove",t,s?[e]:e,this.getData("ltPropSelected"),this,o,s?[n]:n),this.fixBoxPosition(),this.fireOnChange(r,t,s?[n]:n)))},removeIconClicked:function(t,e){this.getMethods("onRemoveIconClicked")&&this.executeMethod("onRemoveIconClicked",t,e)},data:function(){return{shouldDisplayIcon:Lyte.attr("boolean",{default:!1}),changeItToInvoke:Lyte.attr("number",{default:1}),dummy1:Lyte.attr("boolean",{default:!0}),dummy2:Lyte.attr("boolean",{default:!1}),savedPositions:Lyte.attr("object",{default:{}}),ltPropRemoveMultiple:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","removeMultiple",!1)}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropType:Lyte.attr("string",{default:"default"}),ltPropTabindex:Lyte.attr("number",{default:0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropFreeze:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","freeze",!0)}),ltPropOptions:Lyte.attr("array",{default:[]}),ltPropUserValue:Lyte.attr("string",{default:void 0}),ltPropSystemValue:Lyte.attr("string",{default:void 0}),ltPropPosition:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","position","down")}),ltPropIconClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","iconClass","dropdown")}),ltPropSelected:Lyte.attr("string",{default:""}),ltPropCallout:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","callout",!1)}),ltPropPlaceholder:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","placeholder","")}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropHover:Lyte.attr("boolean",{default:!1}),ltPropNoResult:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","noResult",_lyteUiUtils.i18n("no.results.found"))}),ltPropMaxCount:Lyte.attr("number",{default:0}),ltPropInputClass:Lyte.attr("string",{default:"lyteSearch"}),ltPropBoundary:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),secondaryPosition:Lyte.attr("string",{default:""}),firePos:Lyte.attr("number",{default:1}),ltPropAjaxRequest:Lyte.attr("object",{default:{}}),firstRequest:Lyte.attr("boolean",{default:!0}),userValue:Lyte.attr("string"),sysValue:Lyte.attr("string"),ltPropDisplayValue:Lyte.attr("string",{default:"",hideAttr:!0}),ltPropDisabledList:Lyte.attr("array",{default:[]}),ltPropAnimate:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","animate",!1)}),ltPropSetPos:Lyte.attr("boolean",{default:!1}),ltPropTooltip:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","tooltip",{position:"bottom",appearance:"box",margin:5,keeptooltip:!0})}),ltPropBoxClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","boxClass","")}),ltPropIsOpen:Lyte.attr("boolean",{default:!1}),ltPropFocus:Lyte.attr("boolean",{default:!1}),ltPropFixPositionOnOpen:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","fixPositionOnOpen",!1)}),ltPropForcePlaceholder:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","forcePlaceholder",!1)}),ltPropShowEmptyMessage:Lyte.attr("boolean",{default:!1}),ltPropBoxButtonWidth:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","boxButtonWidth","min-button")}),ltPropPreventScroll:Lyte.attr("string",{default:"all"}),ltPropScope:Lyte.attr("string",{default:"window"}),ltPropAnimateBox:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","animateBox",!1)}),ltPropTooltipClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","tooltipClass","")}),ltPropDisplayList:Lyte.attr("array",{default:[]}),ltPropSelectedList:Lyte.attr("array",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","selectedList",[])}),ltPropItemSearchType:Lyte.attr("string",{default:"contains"}),ltPropFocusOnClose:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","focusOnClose",!0)}),ltPropButtonClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-dropdown","buttonClass","")}),ltPropDisableItemTooltip:Lyte.attr("boolean",{default:!1}),ltPropPreventParentScroll:Lyte.attr("boolean",{default:!1}),ltPropShowRemoveIcon:Lyte.attr("boolean",{default:!1}),ltPropAriaButton:Lyte.attr("object",{default:{},watch:!0}),ltPropAriaBox:Lyte.attr("object",{default:{},watch:!0}),ltPropAriaBody:Lyte.attr("object",{default:{},watch:!0}),ltPropReadOnly:Lyte.attr("boolean",{default:!1}),ltPropActiveElement:Lyte.attr("string",{default:""}),ltPropAllowFocusableElements:Lyte.attr("boolean",{default:!1}),ltPropDataTabindex:Lyte.attr("string",{default:""}),ltPropPreventNavigation:Lyte.attr("boolean",{default:!1}),ltPropTrimSearchText:Lyte.attr("boolean",{default:!0}),ltPropNoResultYield:Lyte.attr("boolean",{default:!1}),ltPropIncludeButtonInFocusLoop:Lyte.attr("boolean",{default:!1}),ltPropForceCalculateWidth:Lyte.attr("boolean",{default:!1}),ltPropSetAriaOnActiveElement:Lyte.attr("boolean",{default:!1}),ltPropCaseSensitive:Lyte.attr("boolean",{default:!1}),ltPropSearchMethod:Lyte.attr("string",{default:"contains"}),ltPropLabel:Lyte.attr("string",{default:""}),ltPropDirection:Lyte.attr("string",{default:"vertical"})}},getAllItems:function(t,e){for(var o=e||[],i=t?t.children:[],a=i.length,l=0;l<a;l++){var s=i[l];/lyte-drop-item/i.test(s.tagName||"")?o.push(s):this.getAllItems(s,o)}return o},getItem:function(t,e){for(var o=t.length,i=e,a=0;a<o;a++){var l=t[a];if(l.getAttribute("data-value")==i)return l}return null},actions:{addFocusClass:function(t){this.getDropButton().classList.add("lyteMultiSearchDropButtonFocused")},removeFocusClass:function(t){this.getDropButton().classList.remove("lyteMultiSearchDropButtonFocused")},toolTipConfig:function(t,e){var o=t.offsetWidth,i=t.scrollWidth,a=this.getData("ltPropTooltip");e=e||"showToolTip",this.setData(e,o<i&&!_lyteDropdown.isEmpty(a))},preventDefault:function(t){13===t.keyCode&&t.preventDefault()},closeIt:function(t){this.closeIt(t)},processElements:function(t){this.processElements(t)},closeFun:function(t){this.closeFun(t)},checkKey:function(t){this.checkKey(t)},showHide:function(t,e,o){this.showHide(t,e,o)}}}),document.addEventListener("scroll",(function(t){var e=t.target;$L.fastdom.measure((function(){var o,i,a,l,s,r,n=_lyteDropdown.getVisibleDropbox();if(n){for(;e&&"LYTE-DROP-BOX"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentNode;if(!e||"LYTE-DROP-BOX"!==e.tagName)if(i=n.origindd){if(s=(a=i.component).childComp,r=_lyteDropdown.buildBounds(a),(l=i.getBoundingClientRect()).top<r.top||l.left<r.left||l.right>r.right||l.bottom>r.bottom){if(a.beforeScrollClose(t),a.beforeHide.call(a,s,t,a.getData("ltPropFreeze")))return;a.closeDrop.call(a,s,t,a.getData("ltPropFreeze"),!0),a.getData("ltPropAnimate")||(_lyteDropdown.autoClosed=i)}i.component._preventSetcss||(o=i.component.getData("ltPropFixPositionOnOpen"),i.component.setCss(!0,o))}else _lyteDropdown.openAutoClosedDropdown(e,t)}else _lyteDropdown.openAutoClosedDropdown(e,t)}))}),!0),document.addEventListener("click",(function(t){var e,o,i,a,l,s,r,n,d,p,h,c=t.target,u=t.target,y=0,m=0;if(_lyteDropdown.isScrollBar(u)||(_lyteDropdown.autoClosed=null),c=_lyteDropdown.traverse(c,["LYTE-DROPDOWN","HTML","LYTE-DROP-BOX","LYTE-DROP-REMOVE"]),_lyteDropdown.focusOut&&(_lyteDropdown.preventClose=!(!c||"HTML"===c.tagName)),c)if("HTML"==c.tagName){for(_lyteDropdown.unmark(),a=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");m<a.length;m++)if(l=a[m]){if((s=l.origindd.component).beforeHide.call(s,l,t,s.getData("ltPropFreeze")))continue;r=s.getFreezeLayer(),s.closeDrop.call(s,l,t,r)}(p=document.activeElement)&&"INPUT"===p.tagName&&_lyteDropdown.traverse(p,["LYTE-DROPDOWN"])&&p.blur()}else if("LYTE-DROPDOWN"===c.tagName)for(e=c,o=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");y<o.length;y++)o[y].origindd!=e&&(s=(n=o[y].origindd).component,_lyteDropdown.unmark(),s.beforeHide.call(s,s.childComp,t,s.getData("ltPropFreeze"))||s.closeDrop.call(s,s.childComp,t,s.getData("ltPropFreeze")));else if("LYTE-DROP-REMOVE"===c.tagName){for(n=c;"LYTE-DROPDOWN"!=n.tagName;)n.getAttribute("data-value")&&(d=n),n=n.parentElement;if(i=n.ltProp("type"),n.component.getData("drophead"),_lyteDropdown.closeOtherDropdowns(n),n.ltProp("readOnly"))return;if("default"===i){var f=n.ltProp("selected");n.ltProp("selected",""),n.component.removeIconClicked(t,f)}else"multisearch"===i&&(n.component.focusInput(),(h=n.querySelector("lyte-search")||n.querySelector("input"))&&h.setValue&&h.setValue("")),d.classList.contains("lyteDropMark")?n.component.removeAll(t):(_lyteDropdown.unmark(),n.component.closeFun(t))}}),!0),_lyteUiUtils.isIos&&document.addEventListener("focusout",(function(t){if(document.contains(t.target)){var e,o,i,a,l=t.target;(o=_lyteDropdown.traverse(l,"LYTE-DROPDOWN"))&&"INPUT"===t.target.tagName&&(i=o.component,e=i.childComp,a=i.getData("ltPropFreeze"),_lyteDropdown.focusOut=!0,setTimeout((function(){if(_lyteDropdown.preventClose)_lyteDropdown.preventClose=_lyteDropdown.focusOut=!1;else{if(e&&!e.classList.contains("lyteDropdownHidden")){if(i.beforeHide(e,t,a))return;i.closeDrop(e,t,a)}_lyteDropdown.focusOut=!1}}),0))}}),!0),document.addEventListener("keydown",(function(t){if(document.contains(t.target)){var e,o,i,a,l,s,r,n,d,p,h,c,u,y=t.keyCode,m=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)"),f=0;if(!_lyteDropdown.openFocusedDropdown(y))if(32!==y&&40!==y||(u=a=document.activeElement,!(a=_lyteDropdown.traverse(a,["LYTE-DROPDOWN","HTML"]))||("LYTE-DROPDOWN"===a.tagName&&"INPUT"!==u.tagName&&"TEXTAREA"!==u.tagName&&t.preventDefault(),"LYTE-DROPDOWN"!==a.tagName||a.ltProp("isOpen"))))if(38!=y&&40!=y&&13!=y||!m){if(8===y){if((e=_lyteDropdown.getActive())&&(o=e.component,i=e.querySelector("lyte-drop-button").querySelector(".lyteDropMark")),!(s=_lyteDropdown.getDropdownWithFocusedInput()))return;l=(r=s&&s.component)&&r.getData("ltPropType"),i?(t.preventDefault(),o.setData("isKeyDown",!0),o.removeAll(t),o.setData("isKeyDown",!1)):s&&"multisearch"===l&&_lyteDropdown.isInput(t)&&(n=s.querySelectorAll("lyte-drop-remove")).length>0&&(s.component.setData("isKeyDown",!0),n[n.length-1].click(),s.component.setData("isKeyDown",!1))}else if((27===y||9===y)&&m){if(!(m=_lyteDropdown.traverse(m,["LYTE-DROP-BOX"])))return;if(r=m.origindd.component,9===y&&r.shouldTrapFocus())r.focusProperElement(t);else{if(r.beforeHide.call(r,r.childComp,t,r.getData("ltPropFreeze")))return;r.closeDrop.call(r,r.childComp,t,r.getData("ltPropFreeze"))}}}else{if(38!=y&&40!=y||t.preventDefault(),l=(r=(s=m.origindd).component).getData("ltPropType"),d=(m=r.getDropBox()).querySelector(".lyteDropdownSelection"),!r.shouldNavigate())return;if(!d||d&&!_lyteDropdown.isVisible(d)){for(h=m.querySelectorAll("lyte-drop-item:not(.lyteSearchHidden):not(.lyteDropdownActive)");f<h.length;f++)if(_lyteDropdown.isVisible(h[f])&&"true"!==h[f].getAttribute("disabled")){p=h[f];break}if(d&&d.classList.remove("lyteDropdownSelection"),p)return p.classList.add("lyteDropdownSelection"),void r.getActiveElement().setAttribute("aria-activedescendant",p.getAttribute("id"))}for(y=t.keyCode,h=m.querySelectorAll("lyte-drop-item"),f=0;f<h.length&&!h[f].classList.contains("lyteDropdownSelection");f++);if(13==y)if(r.getData("multiple")){if(!h[f])return;h[f].click()}else h[f]&&h[f].click();else 38==y&&0!=f?(c=f,-1!=(f=_lyteDropdown.find(h,f-1,!1))&&(r.scrollIntoView(h[f],"up"),h[c].classList.remove("lyteDropdownSelection"),h[f].classList.add("lyteDropdownSelection"),r.getActiveElement().setAttribute("aria-activedescendant",h[f].getAttribute("id")),r.executeKeyNavigationCallback(h[f]))):40==y&&f!=h.length-1&&(c=f,(f=_lyteDropdown.find(h,f+1,!0))<h.length&&(r.scrollIntoView(h[f],"down"),h[c].classList.remove("lyteDropdownSelection"),h[f].classList.add("lyteDropdownSelection"),r.getActiveElement().setAttribute("aria-activedescendant",h[f].getAttribute("id")),r.executeKeyNavigationCallback(h[f])))}else a.component.showHide(t,t.type)}})),document.addEventListener("keypress",(function(t){if(document.contains(t.target)){var e,o,i,a,l=t.which||t.keyCode,s=0,r=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)"),n=function(t,e,o){if("contains"===o){if(-1!=t.trim().toLowerCase().indexOf(e.toLowerCase()))return!0}else if("startsWith"===o&&t.trim().substring(0,e.length).toLowerCase()===e.toLowerCase())return!0;return!1};if(r.length>0&&(l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57)&&(_lyteDropdown.pressedCharacter=_lyteDropdown.pressedCharacter?_lyteDropdown.pressedCharacter+=String.fromCharCode(l):String.fromCharCode(l),_lyteDropdown.checkDDtimeoutId&&clearTimeout(_lyteDropdown.checkDDtimeoutId),_lyteDropdown.checkDDtimeoutId=setTimeout((function(){_lyteDropdown.pressedCharacter=null}),500),i="LYTE-DROPDOWN"==((i=(document.activeElement||{}).parentElement)||{}).tagName?i:null,r.length>0&&i)){for(s=0;s<r.length&&r[s].origindd!=i;s++);if(i=(r=r[s]).origindd,e=r.querySelectorAll("lyte-drop-item"),a=i.getData("ltPropItemSearchType"),_lyteDropdown.cachePreviousVal.char&&_lyteDropdown.cachePreviousVal.char==_lyteDropdown.pressedCharacter&&_lyteDropdown.cachePreviousVal.pos+1<e.length&&n(e[_lyteDropdown.cachePreviousVal.pos+1].textContent,_lyteDropdown.pressedCharacter,a))o=_lyteDropdown.cachePreviousVal.pos+1;else for(s=0;s<e.length;s++)if(n(e[s].textContent,_lyteDropdown.pressedCharacter,a)){o=s;break}if(null!=o){for(var d=r.querySelectorAll(".lyteDropdownSelection"),p=0;p<d.length;p++)d[p].classList.remove("lyteDropdownSelection");e[o].classList.add("lyteDropdownSelection"),i.component.getActiveElement().setAttribute("aria-activedescendant",e[o].getAttribute("id"));var h=r.querySelector("lyte-drop-body");h.contains(e[o])&&(h.scrollTop+=parseInt(e[o].getBoundingClientRect().top-h.getBoundingClientRect().top))}_lyteDropdown.cachePreviousVal.char=_lyteDropdown.pressedCharacter,_lyteDropdown.cachePreviousVal.pos=o}}})),_lyteUiUtils.isMobile||window.addEventListener("resize",(function(t){delete this._hgt,_lyteDropdown.autoClosed=null;var e,o=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)");o&&!o.origindd.component._preventSetcss&&(e=o.origindd.component.getData("ltPropFixPositionOnOpen"),o.origindd.component.setCss(!0,e))})),_lyteUiUtils.registeredCustomElements["lyte-drop-body"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-body"]=!0,Lyte.createCustomElement("lyte-drop-body",{static:{observedAttributes:{get:function(){return[]}}},connectedCallback:function(){if(!this._attributesSet){var t,e,o=_lyteDropdown.traverse(this,["LYTE-DROPDOWN","BODY"]);if("BODY"===o.tagName&&(o=this.origindd),!o||"LYTE-DROPDOWN"!==o.tagName)return;t=o.component,this._attributesSet=!0,this.setAttribute("role","listbox"),this.getAttribute("id")||this.setAttribute("id","Lyte_Drop_Body_"+_lyteDropdownBodyId++),(e=t.getAriaButton())&&e.setAttribute("aria-controls",this.getAttribute("id"))}}})),_lyteUiUtils.registeredCustomElements["lyte-drop-item"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-item"]=!0,Lyte.createCustomElement("lyte-drop-item",{static:{observedAttributes:{get:function(){return["selected","lyte-shortcut"]}}},connectedCallback:function(){this._eventRegistered||(this._eventRegistered=!0,this.setAttribute("aria-selected","false"),this.getAttribute("role")||this.setAttribute("role","option"),this.getAttribute("id")||this.setAttribute("id","Lyte_Drop_Item_"+_lyteDropdownItemId++),this.addEventListener("mouseenter",(function(){var t,e,o,i=this.getAttribute("data-title"),a=this.getAttribute("data-custom-tooltip"),l=this.offsetWidth,s=this.scrollWidth,r=_lyteDropdown.getDropdownFromItem(this);r&&(r.getData("ltPropDisableItemTooltip")||"true"===a||(t=r.getData("ltPropTooltip"),e=r.getData("ltPropTooltipClass"),i=i||this.innerText.trim(),o=l<s&&!_lyteDropdown.isEmpty(t),this.setAttribute("lt-prop-title",o?i:""),o&&(this.setAttribute("lt-prop-tooltip-config",JSON.stringify(t)),this.setAttribute("lt-prop-tooltip-class",e))))})));var t=_lyteDropdown.getDropdownFromItem(this);this._dropdownComponent=t,window.clearTimeout(t._FFBodyScrollOnAdd),t._FFBodyScrollOnAdd=window.setTimeout((function(){var e=t.isFF();t.getData("ltPropIsOpen")&&e&&t.isBodyScrollable()&&t.addProperScrollbar()}),0)},disconnectedCallback:function(){var t=this._dropdownComponent;if(t){window.clearTimeout(t._FFBodyScrollOnRemove),t._FFBodyScrollOnRemove=window.setTimeout((function(){var e=t.isFF();t.getData("ltPropIsOpen")&&e&&!t.isBodyScrollable()&&t.removeScrollbar()}),0);var e=this.getAttribute("lyte-shortcut");e&&(e=(e=JSON.parse(e)).key,shortcut.pushKey({newKey:"",oldKey:e,value:this}))}},attributeChangedCallback:function(t,e,o,i){var a,l,s,r,n,d=this,p=this.getAttribute("data-value");if((null===e&&null!==o||null!==e&&null===o)&&(n=!0),n){if("selected"==t)if(this.hasAttribute("selected")){if(this.setAttribute("aria-selected","true"),!(d=_lyteDropdown.traverse(d,["LYTE-DROP-BOX","BODY"]))||"BODY"==d.tagName)return;if((a=d.origindd)||(a=d=_lyteDropdown.traverse(d,["LYTE-DROPDOWN","BODY"])),!(l=a.component))return;if(l.getData("preventSel"))return;"multiple"==(c=l.getData("ltPropType"))||"multisearch"==c?(s=l.getData("ltPropSelected"))&&2==s.length||!s?(s=JSON.stringify([p]),l.setData("ltPropSelected",s)):((r=JSON.parse(s)).push(p),l.setData("ltPropSelected",JSON.stringify(r))):l.setData("ltPropSelected",p)}else this.setAttribute("aria-selected","false");if("lyte-shortcut"==t){if(!o)return;if(!(o=JSON.parse(o)).key)return;var h=o.key,c=o.type,u=o.wait;e||(e={}),shortcut.pushKey({newKey:h,type:c,wait:u,oldKey:e.key,value:this})}}}}));var _lyteDropdown={lastDropdownWithAPromise:null,preventClose:!1,autoClosed:null,focusOut:!1,focusableElementsSelector:'input:not(:disabled), button:not(:disabled), [tabindex]:not([tabindex="-1"]), textarea:not(:disabled), select:not(:disabled), a',isDocument:function(t){return t instanceof Document||t instanceof ShadowRoot},closeOtherDropdowns:function(t){for(var e=_lyteUiUtils.getVisibleDropdowns()||[],o=0;o<e.length;o++)e[o]!==t&&e[o].close()},openFocusedDropdown:function(t){var e=_lyteDropdown.getDropdownWithFocusedInput();if(27!=t&&9!=t&&e)return"multisearch"!==(e.ltProp("type")||"").toLowerCase()||e.ltProp("isOpen")?void 0:(e.open(),8!==t)},getDropdownFromItem:function(t){if((t=_lyteDropdown.traverse(t,["LYTE-DROP-BOX","BODY"]))&&"BODY"!=t.tagName){var e=t.origindd;return e||(e=t=_lyteDropdown.traverse(t,["LYTE-DROPDOWN","BODY"])),e.component}},getDropdownWithFocusedInput:function(){var t,e=document.activeElement;if(e&&"input"===e.nodeName.toLowerCase()&&(t=_lyteDropdown.traverse(e,["HTML","LYTE-DROPDOWN"])),t&&"lyte-dropdown"===t.nodeName.toLowerCase())return t},getVisibleDropbox:function(){for(var t,e=(document.body||{}).children||[],o=0;o<e.length;o++){if("LYTE-DROP-BOX"===e[o].tagName&&_lyteDropdown.isVisible(e[o]))return e[o];if("SHADOW-WRAPPER"===e[o].tagName&&(t=_lyteDropdown.getInnerBox(e[o]))&&_lyteDropdown.isVisible(t))return t}},getInnerBox:function(t){return t.shadowRoot.querySelector("lyte-drop-box")},isScrollBar:function(t){return t&&(t.classList.contains("lyteScrollContainer")||t.classList.contains("lyteScrollDiv"))},isInBounds:function(t,e){return t.top<e.top&&t.bottom>e.bottom&&t.left<e.left&&t.right>e.right},buildVisibleBounds:function(t,e,o){return{top:e?0:Math.max(t.top,0),left:e?0:Math.max(t.left,0),right:e?window.innerWidth:Math.min(window.innerWidth,t.left+o.offsetWidth),bottom:e?window.innerHeight:Math.min(window.innerHeight,t.top+o.offsetHeight)}},openAutoClosedDropdown:function(t,e){var o,i,a,l,s=_lyteDropdown.isDocument(t),r=_lyteDropdown.autoClosed;r&&(o=s?{}:t.getBoundingClientRect(),i=_lyteDropdown.buildVisibleBounds(o,s,t),l=(a=r.component).childComp,r&&t.contains(r)&&_lyteDropdown.isInBounds(i,r.getBoundingClientRect())&&l.classList.contains("lyteDropdownHidden")&&(a.beforeScrollOpen(e),r.toggle(),_lyteDropdown.autoClosed=null))},isEmpty:function(t){for(var e in t)return!1;return!0},buildBounds:function(t){var e,o,i=t.getData("ltPropBoundary")||{},a=t.getData("ltPropScope");return"window"!==a&&(e=$L(t.$node).closest(a).get(0))?(o=e.getBoundingClientRect(),{left:Math.max(0,o.left),top:Math.max(0,o.top),right:Math.min(window.innerWidth,o.right),bottom:Math.min(window.innerHeight,o.bottom)}):{left:i.left||0,right:i.right||window.innerWidth,top:i.top||0,bottom:i.bottom||window.innerHeight}},traverse:function(t,e){for(;t&&!~e.indexOf(t.tagName)&&!(t instanceof ShadowRoot);)t=t.parentNode;return t&&~e.indexOf(t.tagName||"")?t:t&&t instanceof ShadowRoot&&~e.indexOf("HTML")?t.ownerDocument.documentElement:void 0},find:function(t,e,o){for(var i=o?1:-1,a=t.length;o?e<a:e>-1;e+=i)if(_lyteDropdown.isVisible(t[e])&&"true"!==t[e].getAttribute("disabled"))return e;return o?a:-1},isVisible:function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},pressedCharacter:null,checkDDtimeoutId:null,cachePreviousVal:{},isInput:function(t){var e=t.target;return!(!(e=_lyteDropdown.traverse(e,["LYTE-DROPDOWN"]))||"INPUT"!==t.target.tagName||"text"!==t.target.type||t.target.value)},unmark:function(t){for(var e,o=document.querySelectorAll(".lyteDropMark"),i=0,a=o.length;i<a;i++)(e=t?_lyteDropdown.findParent(o[i]):void 0)&&e==t.$node||o[i].classList.remove("lyteDropMark")},findParent:function(t){return t=_lyteDropdown.traverse(t,["LYTE-DROPDOWN"])},getActive:function(){var t=document.querySelector(".lyteDropMark");return _lyteDropdown.findParent(t)}};_lyteUiUtils.registeredCustomElements["lyte-drop-group"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-group"]=!0,Lyte.createCustomElement("lyte-drop-group",{static:{observedAttributes:{get:function(){return["label"]}}},attributeChangedCallback:function(t,e,o,i){var a,l;"label"==t&&(a=this.querySelector("lyte-drop-label"),l=this.getAttribute("label"),a?a.textContent=l:((a=document.createElement("lyte-drop-label")).textContent=l,this.insertBefore(a,this.children[0])))}})),Lyte.Component.register("lyte-autocomplete",{_template:'<template tag-name="lyte-autocomplete"> <lyte-dropdown lt-prop="{{stringify(ltPropDropdown)}}" lt-prop-set-pos="{{ltPropSetPos}}" lt-prop-type="{{ltPropDropType}}" lt-prop-yield="true" lt-prop-freeze="{{ltPropFreeze}}" lt-prop-callout="{{ltPropCallout}}" lt-prop-position="{{ltPropPosition}}" lt-prop-hover="{{ltPropHover}}" lt-prop-disabled="{{ltPropDisabled}}" lt-prop-boundary="{{ltPropBoundary}}" lt-prop-tabindex="{{ltPropTabindex}}" lt-prop-animate="{{ltPropAnimate}}" lt-prop-active-element="{{ltPropActiveElement}}" on-option-selected="{{method(\'valSet\')}}" on-show="{{method(\'show\')}}" on-hide="{{method(\'hide\')}}" on-before-show="{{method(\'beforeShow\')}}" on-before-hide="{{method(\'beforeHide\')}}" on-add="{{method(\'add\')}}" on-remove="{{method(\'remove\')}}" on-position-changed="{{method(\'positionChanged\')}}" on-scroll="{{method(\'scroll\')}}" lt-prop-selected="{{lbind(ltPropSelected)}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-button onkeyup="{{action(\'keyup\',event)}}"> <template is="if" value="{{ltPropInputYield}}"><template case="true"><lyte-yield yield-name="autocompleteinput"></lyte-yield></template></template> <lyte-input lt-prop="{{stringify(ltPropInput)}}" lt-prop-maxlength="{{ltPropMaxlength}}" lt-prop-auto-update="{{ltPropAutoUpdate}}" on-value-change="{{method(\'valuechange\')}}" lt-prop-tab-index="{{ltPropTabIndex}}" lt-prop-data-tabindex="{{ltPropDataTabindex}}" lt-prop-id="{{ltPropId}}" lt-prop-wrapper-style="{{ltPropWrapperStyle}}" lt-prop-class="{{ltPropClass}}" lt-prop-autofocus="{{ltPropAutofocus}}" lt-prop-autocomplete="{{ltPropAutocomplete}}" lt-prop-type="{{ltPropType}}" lt-prop-name="{{ltPropName}}" lt-prop-placeholder="{{ltPropPlaceholder}}" lt-prop-value="{{lbind(ltPropValue)}}" lt-prop-width="100%" lt-prop-height="{{ltPropHeight}}" lt-prop-style="{{ltPropStyle}}" lt-prop-appearance="{{ltPropAppearance}}" lt-prop-direction="vertical" lt-prop-disabled="{{ltPropDisabled}}" lt-prop-readonly="{{ltPropReadonly}}" lt-prop-pattern="{{ltPropPattern}}" rows="{{ltPropRows}}" cols="{{ltPropCols}}" title="{{ltPropInputTitle}}" lt-prop-text-area-resize="{{ltPropTextAreaResize}}" lt-prop-input-title="{{ltPropInputTitle}}" on-focus="{{method(\'focus\')}}" on-blur="{{method(\'blurEvent\')}}" oninput="{{action(\'input\',event)}}" lt-prop-update-delay="{{ltPropUpdateDelay}}" lt-prop-aria="{{ltPropAria}}" lt-prop-aria-attributes="{{ltPropAriaAttributes}}" lt-prop-focus="{{ltPropFocus}}"></lyte-input> <template is="if" value="{{expHandlers(ltPropType,\'==\',\'search\')}}"><template case="true"> <div class="closeIconWrapper lyteAutoCompCloseIconWrapper" onclick="{{action(\'resetValue\',event)}}" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"> <span class="closeIcon lyteAutoCompCloseIcon"></span> </div> <span class="iconSeparator" style="{{if(ltPropValue,\'display: block;\',\'display: none;\')}}"></span> </template></template> </lyte-drop-button> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <lyte-drop-box class="{{ltPropDropdownClass}} lyteautocompleteDropdown" id="{{ltPropDropdownId}}"> <lyte-drop-body> <template is="for" items="{{ltPropContent}}" item="list" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(list)}}"><template case="true"> <lyte-drop-group elemorder="{{indexVal}}"> <lyte-drop-label>{{lyteUiReturnOnlyKey(list)}}</lyte-drop-label> <template is="for" items="{{lyteUiReturnOnlyValue(list)}}" item="list1" index="indexVal1"><template is="if" value="{{expHandlers(lyteUiIsObject(list1),\'==\',false)}}"><template case="true"> <lyte-drop-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{list1}}"> <lyte-autocomplete-label keywords="{{list1}}">{{list1}}</lyte-autocomplete-label> </lyte-drop-item> </template><template case="false"> <lyte-drop-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{list1[ltPropLabel]}}" class="{{list1.class}}"> <lyte-autocomplete-label keywords="{{list1[ltPropKeyWords]}}">{{list1[ltPropLabel]}}</lyte-autocomplete-label> <template is="if" value="{{list1[ltPropDescription]}}"><template case="true"> <lyte-autocomplete-description><span class="lyteAutoSeparator">,</span> {{list1[ltPropDescription]}}</lyte-autocomplete-description> </template></template> </lyte-drop-item> </template></template></template> </lyte-drop-group> </template><template case="false"><template is="if" value="{{expHandlers(lyteUiIsObject(list),\'==\',false)}}"><template case="true"> <lyte-drop-item elemorder="{{indexVal}}" data-value="{{list}}"> <lyte-autocomplete-label keywords="{{list}}">{{list}}</lyte-autocomplete-label> </lyte-drop-item> </template><template case="false"> <lyte-drop-item elemorder="{{indexVal}}" data-value="{{list[ltPropLabel]}}" class="{{list1.class}}"> <lyte-autocomplete-label keywords="{{list[ltPropKeyWords]}}">{{list[ltPropLabel]}}</lyte-autocomplete-label> <template is="if" value="{{list[ltPropDescription]}}"><template case="true"> <lyte-autocomplete-description><span class="lyteAutoSeparator">,</span> {{list[ltPropDescription]}}</lyte-autocomplete-description> </template></template> </lyte-drop-item> </template></template></template></template></template> </lyte-drop-body> </lyte-drop-box> </template><template case="false"> <lyte-yield yield-name="yield"></lyte-yield> </template></template> </template> </lyte-dropdown> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}},{type:"attr",position:[3],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropValue","'display: block;'","'display: none;'"]}}}}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,2]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,2]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropAutocomplete","ltPropPlaceholder","ltPropAutofocus","ltPropMaxlength","ltPropReadonly","ltPropId","ltPropClass","ltPropType","ltPropName","ltPropWidth","ltPropValue","ltPropContent","ltPropLabel","ltPropDescription","ltPropStyle","ltPropAppearance","ltPropDirection","ltPropExternalSearch","ltPropYield","ltPropHeight","ltPropHighlight","ltPropHighlightClass","ltPropKeyWords","ltPropMinLength","ltPropErrorClass","ltPropDropdownWidth","ltPropDropdownHeight","ltPropDropdownClass","ltPropDropdownId","ltPropMethod","ltPropWrapperStyle","ltPropTabIndex","ltPropTabindex","ltPropFreeze","ltPropCallout","ltPropDisabled","ltPropHover","ltPropBoundary","ltPropPosition","ltPropDropType","ltPropSetPos","ltPropPattern","ltPropAutoUpdate","ltPropValueSet","ltPropPreventInsideClick","ltPropExtSearchOpen","ltPropInputTitle","ltPropErrorMessage","ltPropErrorClass","ltPropAnimate","ltPropSelected","ltPropTrim","ltPropFocus","ltPropAria","ltPropAriaAttributes","ltPropUpdateDelay","ltPropRows","ltPropCols","ltPropTextAreaResize","ltPropDiacritic","ltPropDropdown","ltPropInput","ltPropActiveElement","ltPropDataTabindex","ltPropOpenOnFocus","ltPropInputYield","timeout","optGroup","autocompleteFlag"],init:function(){this.$node.toggle=function(t,e){return this.dropdown.toggle(t,e)}.bind(this);var t="beforeRender";this.getMethods(t)&&this.executeMethod(t,this.$node)},didDestroy:function(){var t=this,e=t.$node;clearTimeout(t.data.timeout),clearTimeout(t.__focus_time),["autocompleteComp","input","dropdown","dropbody"].forEach((function(e){delete t[e]})),["toggle","setValue","focus","blur","click","select"].forEach((function(t){delete e[t]}))},didConnect:function(){var t,e=this.data,o=$L(document.createElement("div")).addClass("lyteautocompleteError "+(e.ltPropErrorClass||"")).css("display","none").get(0),i="afterRender";o.textContent=e.ltPropErrorMessage||"",this.autocompleteComp=o,t=this.dropdown=$L(this.$node).children("lyte-dropdown").get(0),(this.dropbody=t.component.childComp||$L("lyte-drop-box",t).get(0)).appendChild(o),this.$node.setValue=function(t){t=t||"",$L("lyte-input",this.$node).get(0).ltProp("value",t),this.pressFunc(t,{})}.bind(this),["focus","blur","click","select"].forEach(function(t){this.$node[t]=function(e){$L("lyte-input",this).get(0)[t](e)}}.bind(this)),this.getMethods(i)&&this.executeMethod(i,this.$node)},errObs:function(t){var e=this.autocompleteComp;"ltPropErrorMessage"==t.item?e.textContent=t.newValue:$L(e).removeClass(t.oldValue).addClass(t.newValue)}.observes("ltPropErrorMessage","ltPropErrorClass"),typeObs:function(){var t=$L(this.$node)["search"==this.data.ltPropType?"addClass":"removeClass"]("searchPresent");this.input=t.find("input,textarea").get(0)}.observes("ltPropType").on("didConnect"),arrayFrom:function(t){return Array.from?Array.from(t):Array.apply(Array,t)},optGroupObs:function(){setTimeout(this.optGroup.bind(this,!0),0)}.observes("ltPropContent","ltPropContent.[]"),optGroup:function(t){var e=$L(this.dropbody),o=this.input.value,i=this.data;(!e.hasClass("lyteDropdownHidden")&&o.length||i.ltPropExternalSearch)&&(i.ltPropTrim&&(o=o.trim()),this.contentFiltering(o)),i.ltPropAnimate&&i.ltPropExternalSearch&&(e.find("lyte-drop-body").css("height",""),delete this.dropdown.component._prevent)},classObs:function(t){if(this.data.ltPropYield){var e=$L(this.dropbody);t&&e.removeClass(t.oldValue);var o=this.data.ltPropDropdownClass;o&&e.addClass(o)}}.observes("ltPropDropdownClass").on("didConnect"),heigthSetObs:function(){this.heigthSet()}.observes("ltPropDropdownHeight").on("didConnect"),heigthSet:function(){$L(this.dropbody).find("lyte-drop-body").css("maxHeight",this.data.ltPropDropdownHeight||"")},widthSetObs:function(){this.widthSet()}.observes("ltPropDropdownWidth").on("didConnect"),widthSet:function(){$L(this.dropbody).find("lyte-drop-body").css("width",this.data.ltPropDropdownWidth||"")},data:function(){var t=_lyteUiUtils.getDefault("lyte-autocomplete");return{ltPropAutocomplete:Lyte.attr("string",{default:t.autocomplete||"off"}),ltPropPlaceholder:Lyte.attr("string",{default:t.placeholder||""}),ltPropAutofocus:Lyte.attr("boolean",{default:t.autofocus||!1}),ltPropMaxlength:Lyte.attr("number",{default:t.maxlength||25}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropId:Lyte.attr("string",{default:t.id||"inputId"}),ltPropClass:Lyte.attr("string",{default:t.class||""}),ltPropType:Lyte.attr("string",{default:t.type||"text"}),ltPropName:Lyte.attr("string",{default:t.name||""}),ltPropWidth:Lyte.attr("string",{default:t.width||"100%"}),ltPropValue:Lyte.attr("string",{default:""}),ltPropContent:Lyte.attr("array",{default:[]}),ltPropLabel:Lyte.attr("string",{default:t.label||""}),ltPropDescription:Lyte.attr("string",{default:t.description||""}),ltPropStyle:Lyte.attr("string",{default:t.style||""}),ltPropAppearance:Lyte.attr("string",{default:t.appearance||"flat"}),ltPropDirection:Lyte.attr("string",{default:t.direction||"vertical"}),ltPropExternalSearch:Lyte.attr("boolean",{default:t.externalSearch||!1}),ltPropYield:Lyte.attr("boolean",{default:t.yield||!1}),ltPropHeight:Lyte.attr("string",{default:t.height||""}),ltPropHighlight:Lyte.attr("boolean",{default:t.highlight||!1}),ltPropHighlightClass:Lyte.attr("string",{default:t.highlightClass||"lyteautocompleteHighlight"}),ltPropKeyWords:Lyte.attr("string",{default:t.keyWords||""}),ltPropMinLength:Lyte.attr("number",{default:null==t.minLength?1:t.minLength}),ltPropErrorClass:Lyte.attr("string",{default:t.errorClass||"lyteautocompleteError"}),ltPropDropdownWidth:Lyte.attr("string",{default:t.dropdownWidth||"auto"}),ltPropDropdownHeight:Lyte.attr("string",{default:t.dropdownHeight||"300px"}),ltPropDropdownClass:Lyte.attr("string",{default:t.dropdownClass||""}),ltPropDropdownId:Lyte.attr("string",{default:t.dropdownId||"lyteAutocomplete"}),ltPropMethod:Lyte.attr("string",{default:t.method||"contains"}),ltPropWrapperStyle:Lyte.attr("string",{default:t.wrapperStyle||""}),ltPropTabIndex:Lyte.attr("string",{default:t.tabIndex||"0"}),ltPropTabindex:Lyte.attr("string",{default:t.tabindex||"-1"}),ltPropFreeze:Lyte.attr("boolean",{default:t.freeze||!1}),ltPropCallout:Lyte.attr("boolean",{default:t.callout||!1}),ltPropDisabled:Lyte.attr("boolean",{default:t.disabled||!1}),ltPropHover:Lyte.attr("boolean",{default:t.hover||!1}),ltPropBoundary:Lyte.attr("object",{default:t.boundary||{}}),ltPropPosition:Lyte.attr("string",{default:t.position||"down"}),ltPropDropType:Lyte.attr("string",{default:t.dropType||"default"}),ltPropSetPos:Lyte.attr("boolean",{default:t.setPos||!1}),ltPropPattern:Lyte.attr("string",{default:t.pattern||".+"}),ltPropAutoUpdate:Lyte.attr("boolean",{default:0!=t.autoUpdate}),ltPropValueSet:Lyte.attr("boolean",{default:0!=t.valueSet}),ltPropPreventInsideClick:Lyte.attr("boolean",{default:t.preventInsideClick||!1}),ltPropExtSearchOpen:Lyte.attr("boolean",{default:t.extSearchOpen||!1}),ltPropInputTitle:Lyte.attr("string",{default:t.inputTitle||""}),ltPropErrorMessage:Lyte.attr("string",{default:t.errorMessage||""}),ltPropErrorClass:Lyte.attr("string",{default:t.errorClass||""}),ltPropAnimate:Lyte.attr("boolean",{default:t.animate||!1}),ltPropSelected:Lyte.attr("string",{default:t.selected||""}),ltPropTrim:Lyte.attr("boolean",{default:t.trim||!1}),ltPropFocus:Lyte.attr("boolean",{default:t.focus||!1}),ltPropAria:Lyte.attr("boolean",{default:t.aria||!1}),ltPropAriaAttributes:Lyte.attr("object",{default:t.ariaAttributes||{},watch:!0}),ltPropUpdateDelay:Lyte.attr("number",{default:"undefined"==t.updateDelay?void 0:null==t.updateDelay?250:t.updateDelay}),ltPropRows:Lyte.attr("number",{default:t.rows}),ltPropCols:Lyte.attr("number",{default:t.cols}),ltPropTextAreaResize:Lyte.attr("object",{default:t.textAreaResize||{vertical:!0,horizontal:!0}}),ltPropDiacritic:Lyte.attr("boolean",{default:t.diacritic||!1}),ltPropDropdown:Lyte.attr("object",{default:t.dropdown||{}}),ltPropInput:Lyte.attr("object",{default:t.input||{}}),ltPropActiveElement:Lyte.attr("string",{default:t.activeElement||"input,textarea"}),ltPropDataTabindex:Lyte.attr("string",{default:t.dataTabindex||"0"}),ltPropOpenOnFocus:Lyte.attr("boolean",{default:t.openOnFocus||!1}),ltPropInputYield:Lyte.attr("boolean",{default:t.inputYield||!1}),timeout:Lyte.attr("number",{default:void 0}),optGroup:Lyte.attr("boolean",{default:!1}),autocompleteFlag:Lyte.attr("boolean",{default:!0})}},convertString:function(t,e){t.forEach(function(t){var o=t.tagName||"";if(/^template$/i.test(o))t.remove();else if(o)this.convertString(Array.from(t.childNodes),e);else if(e){for(var i=t.nodeValue,a=i.toLowerCase(),l=a.indexOf(e),s=t;-1!=l;){var r=i.slice(0,l),n=l+e.length,d=i.slice(l,n),p=i.slice(n),h=!0;if(r){var c=document.createTextNode(r);Lyte.Component.insertAfter(s,s=c)}(c=$L(document.createElement("span")).addClass(this.data.ltPropHighlightClass).get(0)).textContent=d,Lyte.Component.insertAfter(s,s=c),l=(a=(i=p).toLowerCase()).indexOf(e)}if(h){if(i){c=document.createTextNode(i);Lyte.Component.insertAfter(s,c)}t.remove()}}}.bind(this))},highlightText:function(t,e){for(var o=t.length,i=Lyte.Component,a=0;a<o;a++){var l=t[a],s=l.getElementsByTagName("lyte-autocomplete-label")[0],r=l.getElementsByClassName("lyteAutoComplete")[0],n=s.cloneNode(!0);n.normalize(),r||(r=$L('<div class = "lyteAutoComplete"></div>').get(0),i.insertBefore(s,r)),$L(s).css("display","none"),r.style.display="",this.convertString(Array.from(n.childNodes),e);var d=Array.from(n.childNodes),p=i.appendChild.bind(i,r);r.innerHTML="",d.forEach(p)}},errorMessage:function(t){var e=this.autocompleteComp,o={display:t?"block":"none"};t&&!e.style.width&&(o.width=getComputedStyle(this.$node).getPropertyValue("width")),$L(e).css(o)},actions:{resetValue:function(t){this.$node.setValue(""),this.$node.focus()},keyup:function(t){var e=t.keyCode||t.which;if(-1==[37,13,38,39,40,27].indexOf(e)){var o=this.input.value;this.data.ltPropTrim&&(o=o.trim()),clearTimeout(this.data.timeout),clearTimeout(this.__focus_time),(o.length>=this.data.ltPropMinLength||-1!=[8,91,17,46].indexOf(e))&&13!=e&&(this.data.timeout=setTimeout(this.pressFunc.bind(this,o,t),100))}},input:function(t){var e=t.target.value;this.getData("ltPropTrim")&&(e=e.trim()),e.length>=this.data.ltPropMinLength&&(clearTimeout(this.data.timeout),clearTimeout(this.__focus_time),this.data.timeout=setTimeout(this.pressFunc.bind(this),250,e,t))}},methods:{valSet:function(t,e){var o=$L((t||window.event).target).closest("lyte-drop-item"),i="onSelect";(this.data.ltPropOpenOnFocus&&(this.__opt_select=setTimeout(function(){delete this.__opt_select}.bind(this),200)),o.length)&&(e=o.find("lyte-autocomplete-label").text());if(e&&(this.getData("ltPropValueSet")&&this.setData("ltPropValue",e.trim()),this.getMethods(i))){var a;if(this.data.ltPropYield)a=o.attr("data-value");else{var l=this.data.ltPropContent,s=o.closest("lyte-drop-group").get(0),r=this.arrayFrom($L(this.dropbody).children("lyte-drop-body").children()),n=o.get(0);if(s){var d=l[r.indexOf(s)];a=d[Object.keys(d)[0]][this.arrayFrom(o.parent().children("lyte-drop-item")).indexOf(n)]}else a=l[r.indexOf(n)]}this.executeMethod(i,a,t,this.$node)}},show:function(){this.optGroupHide.call(this,!0),this.getMethods("onShow")&&this.executeMethod("onShow",arguments[0],arguments[1])},hide:function(){this.getMethods("onHide")&&this.executeMethod("onHide",arguments[0],arguments[1])},beforeShow:function(t,e){var o,i=this.input.value,a="onBeforeShow";return this.getData("ltPropTrim")&&(i=i.trim()),!(i.length<this.data.ltPropMinLength)&&((!this.getMethods(a)||0!=(o=this.executeMethod(a,t,e)))&&(o&&o.then?(o.then(function(){this.dropdown&&this.dropdown!=_lyteDropdown.lastDropdownWithAPromise||setTimeout(this.pressFunc.bind(this),0,i,{})}.bind(this)),o):void(this._bymanual||setTimeout(this.pressFunc.bind(this),0,i,{}))))},beforeHide:function(t,e){return!(this.getData("ltPropPreventInsideClick")&&t&&"click"==t.type&&this.$node.contains(t.target))&&(this.getMethods("onBeforeHide")?this.executeMethod("onBeforeHide",t,e):void 0)},add:function(){var t=arguments,e="onAdd";this.getMethods(e)&&this.executeMethod(e,t[0],t[1],t[2],t[3])},remove:function(){var t=arguments,e="onRemove";this.getMethods(e)&&this.executeMethod(e,t[0],t[1],t[2],t[3])},positionChanged:function(t,e){var o="onPositionChanged";this.getMethods(o)&&this.executeMethod(o,t,e)},scroll:function(){this.getMethods("onScroll")&&this.executeMethod("onScroll",arguments[0],arguments[1])},valuechange:function(t){this.getMethods("onValueChange")&&this.executeMethod("onValueChange",t,this.$node)},blurEvent:function(t){clearTimeout(this.__focus_time),this.getMethods("onBlur")&&this.executeMethod("onBlur",t,this.$node)},focus:function(t,e){this.getMethods("onFocus")&&this.executeMethod("onFocus",t,this.$node),!this.__opt_select&&this.data.ltPropOpenOnFocus&&(this.__focus_time=setTimeout(function(){this.input.value.length<this.data.ltPropMinLength||this.dropdown.open()}.bind(this),200))}},filteringArray:function(t,e,o,i){var a=this.data.ltPropMethod,l=[],s=[],r="onSearch",n="lyteSearchHidden";if(o.length)for(var d=t.length,p=0;p<d;p++){var h=!1,c=t[p].trim().toLowerCase(),u=c.indexOf(o);switch(a){case"contains":h=u>=0;break;case"startsWith":h=0==u;break;case"endsWith":-1!=(u=c.lastIndexOf(o))&&(h=u+o.length==c.length)}h?l.push(e[p]):s.push(e[p])}else l=this.arrayFrom(e);this.getMethods(r)&&0==this.executeMethod(r,l,this.autocompleteComp,this.$node,o,i)||(l.forEach((function(t){t.classList.remove(n)})),s.forEach((function(t){t.classList.add(n)})),this.optGroupHide(),this.errorMessage(!l.length),l.length&&this.data.ltPropHighlight&&this.highlightText(e,o))},optGroupHide:function(t){var e="lyte-drop-item",o="lyteSearchHidden",i="lyteDropdownSelection",a=$L(this.dropbody),l=a.find(e+":not(."+o+"):not(.lyteDropdownActive)"),s=a.find(e+"."+i).get(0);if(!t)for(var r=a.find("lyte-drop-group"),n=r.length,d=0;d<n;d++){var p=r.eq(d);p.find(e+"."+o).length==p.find(e).length?p.css("display","none"):p.css("display","block")}$L.fastdom.measure(function(){for(var t,e=l.length,o=0;o<e;o++){var a=l.eq(o),r=a.get(0);if(r.offsetParent&&!a.hasClass("lyteDropdown-disabled")){t=r;break}}$L.fastdom.mutate(function(){t&&s!=t&&($L(s).removeClass(i),$L(t).addClass(i))}.bind(this))}.bind(this))},contentFiltering:function(t,e){var o=this.dropdown,i=[],a=$L(this.dropbody),l="lyteDropdownHidden",s=this.data,r=a.hasClass(l),n=t.length,d=s.ltPropMinLength;if(e=e||{},!(r&&n>=d||!r&&n<d)||(this._bymanual=!0,o.toggle(),delete this._bymanual,!a.hasClass(l))){for(var p=a.find("lyte-drop-item:not(.lyteDropdownActive)"),h=s.ltPropDiacritic,c=p.length,u=0;u<c;u++){var y=p.eq(u).find("lyte-autocomplete-label"),m=y.attr("keywords");if(m)try{m=JSON.parse(m).join(" ")}catch(t){}var f=m||y.text().trim();h&&(f=_lyteUiUtils.convert_diacritics(f)),i.push(f)}h&&(t=_lyteUiUtils.convert_diacritics(t)),this.filteringArray(i,p,t.toLowerCase(),e)}},pressFunc:function(t,e){var o=this.data;if(o.ltPropTrim&&(t=t.trim()),o.ltPropExternalSearch){var i=$L(this.dropbody),a="lyteDropdownHidden",l=this.dropdown,s="onExtSearch";if(t.length>=o.ltPropMinLength||!e.target){if(e.type&&i.hasClass(a)&&o.ltPropExtSearchOpen&&(l.toggle(),i.hasClass(a)))return;this.getMethods(s)&&this.executeMethod(s,t,this.$node,e)}else i.hasClass(a)||l.toggle()}else this.contentFiltering(t,e)}}),Lyte.Component.register("lyte-calendar",{_template:'<template tag-name="lyte-calendar"> <div class="{{containerClass}}" ontouchstart="{{action(\'record\',event)}}" ontouchend="{{action(\'decide\',event)}}"> <div class="lyteCalendarView"> <div> <template is="if" value="{{navYield}}"><template case="true"> <lyte-yield yield-name="navigator"></lyte-yield> </template><template case="false"> <div class="lyteCalendarNavigator {{if(ifEquals(ltPropHeaderAlignType,&quot;centerdate&quot;),&quot;lyteCalHeaderCenterAlign&quot;,&quot;&quot;)}}"> <span id="{{monthDropdownId}}" class="lyteVisuallyHidden">{{lyteUiI18n("lyte.calendar.choose.month")}}</span> <span id="{{yearDropdownId}}" class="lyteVisuallyHidden">{{lyteUiI18n("lyte.calendar.choose.year")}}</span> <span class="lyteVisuallyHidden" aria-live="polite" id="{{headerId}}"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <span>{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span><span>{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span>{{currentYear}}</span> </template><template case="false"> <span>{{decadeStart}} - {{decadeEnd}}</span> </template></template></template></template> </span> <template is="if" value="{{ifNotEquals(ltPropHeaderAlignType,&quot;centerdate&quot;)}}"><template case="true"> <span class="lyteCalsCalMon"> <template is="if" value="{{expHandlers(expHandlers(ltPropHeaderType,\'===\',\'dropdown\'),\'||\',expHandlers(ltPropHeaderType,\'===\',\'picklist\'))}}"><template case="true"> <lyte-dropdown lt-prop-aria-button="{{monthAriaObj}}" lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalMonthDD" on-option-selected="{{method(\'optionSelected\',\'M\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{monthNames}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'dropdown\')}}"><template case="true"> <lyte-dropdown lt-prop-aria-button="{{yearAriaObj}}" lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalYearDD" on-option-selected="{{method(\'optionSelected\',\'Y\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{years}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <lyte-picklist lt-prop-options="{{years}}" lt-prop-dropdown="{&quot;freeze&quot;: false, &quot;callout&quot;: true}" class="lyteCalYearDD" on-option-select="{{method(\'optionSelected\',\'Y\')}}" on-show="{{method(\'setClass\')}}"> </lyte-picklist> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'drilldown\')}}"><template case="true"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <span aria-label="{{lyteUiI18n(\'lyte.calendar.monthview.drilldown.button\')}}" tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToMonthView\',event)}}" onkeydown="{{action(\'changeToMonthViewOnKeys\',event)}}"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span aria-label="{{lyteUiI18n(\'lyte.calendar.decadeview.drilldown.button\')}}" tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToDecadeView\',event)}}" onkeydown="{{action(\'changeToDecadeViewOnKeys\',event)}}"> <span class="lyteCalsCalYear">{{currentYear}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader"> {{decadeStart}} - {{decadeEnd}} </span> </template></template></template></template></template></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelectionType,\'===\',\'month\'),\'||\',expHandlers(ltPropSelectionType,\'===\',\'year\'))}}"><template case="true"> <template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span> <span class="lyteCalsCalYear">{{currentYear}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader"> {{decadeStart}} - {{decadeEnd}} </span> </template></template></template></template> </template><template case="false"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </template></template></template></template></template></template> </span> </template></template> <template is="if" value="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(showYear,\'&amp;&amp;\',expHandlers(ltPropSelectionType,\'!==\',\'month\')),\'&amp;&amp;\',expHandlers(ltPropSelectionType,\'!==\',\'year\'))}}"><template case="true"> <span role="button" tabindex="0" class="lyteCalNav lyteCalyearNavLft" onclick="{{action(\'previous\',\'Y\',event)}}" onkeydown="{{action(\'previousOnKeys\',\'Y\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.previous.year\')}}</span> </span> </template></template> </template></template> <span role="button" class="lyteCalNav lyteCaldLft {{lyteUiDisableCalendarNav(viewDate,\'previous\')}}" tabindex="0" onclick="{{action(\'previous\',\'M\',event)}}" onkeydown="{{action(\'previousOnKeys\',\'M\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.previous.month\')}}</span> </span> <template is="if" value="{{ifEquals(ltPropHeaderAlignType,&quot;centerdate&quot;)}}"><template case="true"> <span class="lyteCalsCalMon"> <template is="if" value="{{expHandlers(expHandlers(ltPropHeaderType,\'===\',\'dropdown\'),\'||\',expHandlers(ltPropHeaderType,\'===\',\'picklist\'))}}"><template case="true"> <lyte-dropdown lt-prop-aria-button="{{monthAriaObj}}" lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalMonthDD" on-option-selected="{{method(\'optionSelected\',\'M\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{monthNames}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> <template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'dropdown\')}}"><template case="true"> <lyte-dropdown lt-prop-aria-button="{{yearAriaObj}}" lt-prop-freeze="false" lt-prop="{{stringify(ltPropDropdown)}}" on-show="{{method(\'setClass\')}}" class="lyteCalYearDD" on-option-selected="{{method(\'optionSelected\',\'Y\')}}"> <template is="registerYield" yield-name="yield"> <lyte-drop-box> <lyte-drop-body> <template is="for" items="{{years}}" item="item" index="index"> <lyte-drop-item data-value="{{item}}">{{item}}</lyte-drop-item> </template> </lyte-drop-body> </lyte-drop-box> </template> </lyte-dropdown> </template><template case="false"> <lyte-picklist lt-prop-options="{{years}}" lt-prop-dropdown="{&quot;freeze&quot;: false, &quot;callout&quot;: true}" class="lyteCalYearDD" on-option-select="{{method(\'optionSelected\',\'Y\')}}" on-show="{{method(\'setClass\')}}"> </lyte-picklist> </template></template> </template><template case="false"><template is="if" value="{{expHandlers(ltPropHeaderType,\'===\',\'drilldown\')}}"><template case="true"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <span aria-label="{{lyteUiI18n(\'lyte.calendar.monthview.drilldown.button\')}}" tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToMonthView\',event)}}" onkeydown="{{action(\'changeToMonthViewOnKeys\',event)}}"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span aria-label="{{lyteUiI18n(\'lyte.calendar.decadeview.drilldown.button\')}}" tabindex="0" role="button" class="lyteDrillCalHeaderButton" onclick="{{action(\'changeToDecadeView\',event)}}" onkeydown="{{action(\'changeToDecadeViewOnKeys\',event)}}"> <span class="lyteCalsCalYear">{{currentYear}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader"> {{decadeStart}} - {{decadeEnd}} </span> </template></template></template></template></template></template> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelectionType,\'===\',\'month\'),\'||\',expHandlers(ltPropSelectionType,\'===\',\'year\'))}}"><template case="true"> <template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <span> <span class="lyteCalsCalYear">{{currentYear}}</span> </span> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <span class="lyteDrillCalHeaderButton lyteDrillCalYearListHeader"> {{decadeStart}} - {{decadeEnd}} </span> </template></template></template></template> </template><template case="false"> <span class="lyteCalsCalMonth">{{lyteUiGetMonthOrYear(monthHeader,"M")}}</span> <span class="lyteCalsCalYear">{{lyteUiGetMonthOrYear(monthHeader,"Y")}}</span> </template></template></template></template></template></template> </span> </template></template> <span role="button" class="lyteCalNav lyteCaldRgt {{lyteUiDisableCalendarNav(viewDate,\'next\')}}" tabindex="0" onkeydown="{{action(\'nextOnKeys\',\'M\',event)}}" onclick="{{action(\'next\',\'M\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.next.month\')}}</span> </span> <template is="if" value="{{ifNotEquals(ltPropHeaderType,&quot;dropdown&quot;)}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(showYear,\'&amp;&amp;\',expHandlers(ltPropSelectionType,\'!==\',\'month\')),\'&amp;&amp;\',expHandlers(ltPropSelectionType,\'!==\',\'year\'))}}"><template case="true"> <span role="button" class="lyteCalNav lyteCalyearNavRgt" tabindex="0" onkeydown="{{action(\'nextOnKeys\',\'Y\',event)}}" onclick="{{action(\'next\',\'Y\',event)}}"> <span class="lyteVisuallyHidden">{{lyteUiI18n(\'lyte.calendar.next.year\')}}</span> </span> </template></template> </template></template> </div> </template></template> </div> <div class="lyteCalTableContainer" role="grid"> <template is="if" value="{{ltPropBodyYield}}"><template case="true"> <lyte-yield yield-name="body"></lyte-yield> </template><template case="false"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <div role="row" class="lyteCalTableRowHeader"> <template is="if" value="{{ltPropWeekNumber}}"><template case="true"> <div role="columnheader" class="lyteCalTableCellHeader lyteWeekNumberGrid"><span>{{ltPropWeekNumHeader}}</span></div> </template></template> <template is="for" items="{{daysOfWeek}}" item="day" index="idod"> <div role="columnheader" aria-label="{{day.title}}" class="{{day.class}}" id="{{day.id}}">{{lyteUiI18n(day.day)}}</div> </template> </div> </template></template> <div class="lyteCalTableRowGroup"> <template is="if" value="{{expHandlers(viewType,\'===\',\'dateView\')}}"><template case="true"> <template is="for" items="{{matrix}}" item="vector" index="rowid"> <template is="if" value="{{expHandlers(lyteUiCheckEmpty(vector),\'!\')}}"><template case="true"> <div class="lyteCalTableRow" role="row"> <template is="if" value="{{ltPropWeekNumber}}"><template case="true"> <div role="gridcell" tabindex="-1" lt-prop-title="Week Number" lt-prop-tooltip-config="{&quot;position&quot; : &quot;right&quot;, &quot;appearance&quot; : &quot;box&quot;}" class="{{weeknum[rowid].class}}"><span>{{if(ifNotEquals(weeknum[rowid].val,0),weeknum[rowid].val,\'\')}}</span></div> </template></template> <template is="for" items="{{vector}}" item="date" index="cellid"> <template is="if" value="{{expHandlers(lyteUiCheckInRange(ltPropMinDate,ltPropMaxDate,date.val,ltPropFormat),\'&amp;&amp;\',expHandlers(lyteUiDisabledDates(date,ltPropDisabledDates),\'!\'))}}"><template case="true"> <template is="if" value="{{date.emptyBlock}}"><template case="true"> <div role="gridcell" class="lyteCalEmpty" data-selectable="false"></div> </template><template case="false"> <div role="gridcell" tabindex="-1" id="{{date.id}}" aria-labelledby="{{concat(date.id,\' \',headerId,\' \',daysOfWeek[cellid][\'id\'])}}" onkeydown="{{action(\'performNavigation\',event)}}" onclick="{{action(\'dateSelected\',event)}}" class="{{date.clsname}}" data-date="{{date.val}}" data-iso="{{date.iso}}" data-selectable="true"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template></template> </template><template case="false"> <template is="if" value="{{date.emptyBlock}}"><template case="true"> <div role="gridcell" class="lyteCalEmpty" data-selectable="false"></div> </template><template case="false"> <div role="gridcell" lt-prop-title="{{ltPropDisabledDateTooltip}}" lt-prop-tooltip-config="{{ltPropTooltip}}" tabindex="-1" id="{{date.id}}" aria-labelledby="{{concat(date.id,\' \',headerId,\' \',daysOfWeek[cellid][\'id\'])}}" aria-disabled="true" onkeydown="{{action(\'performNavigation\',event)}}" data-date="{{date.val}}" data-iso="{{date.iso}}" class="{{date.clsname}}" data-selectable="false"><span class="lyteCalDateSpan">{{date.date}}</span></div> </template></template> </template></template> </template> </div> </template></template> </template> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'monthView\')}}"><template case="true"> <template is="for" items="{{monthViewData}}" item="row" index="rowIndex"> <div class="lyteCalTableRow"> <template is="for" items="{{row}}" item="column" index="columnIndex"> <div aria-label="{{lyteUiI18n(lyteUiGetLinearIndex(ariaMonthNames,rowIndex,columnIndex))}}" role="gridcell" tabindex="-1" onkeydown="{{action(\'performNavigation\',event)}}" onclick="{{action(\'monthSelected\',event)}}" class="{{column[\'class\']}}" data-date="{{column[\'systemValue\']}}"> {{column[\'displayValue\']}} </div> </template> </div> </template> </template><template case="false"><template is="if" value="{{expHandlers(viewType,\'===\',\'decadeView\')}}"><template case="true"> <template is="for" items="{{decadeViewData}}" item="row" index="rowIndex"> <div class="lyteCalTableRow"> <template is="for" items="{{row}}" item="column" index="columnIndex"> <template is="if" value="{{expHandlers(column.emptyBlock,\'!\')}}"><template case="true"> <div role="gridcell" tabindex="-1" onkeydown="{{action(\'performNavigation\',event)}}" onclick="{{action(\'yearSelected\',event)}}" class="lyteCalTableCell {{column.class}}" data-date="{{column.year}}"> {{column.year}} </div> </template><template case="false"> <div role="gridcell" class="lyteCalEmpty"> </div> </template></template> </template> </div> </template> </template></template></template></template></template></template> </div> </template></template> </div> <div> <div class="lyteCalBtns"> <template is="if" value="{{expHandlers(expHandlers(showToday,\'&amp;&amp;\',ltPropShowToday),\'&amp;&amp;\',expHandlers(viewType,\'===\',\'monthView\'))}}"><template case="true"> <p role="button" tabindex="0" onkeydown="{{action(\'curMonthOnKey\',event)}}" class="lyteCalCurrentDate"><a onclick="{{action(\'curMonth\',event)}}">{{lyteUiI18n(\'Current Month\')}}</a></p> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(showToday,\'&amp;&amp;\',ltPropShowToday),\'&amp;&amp;\',expHandlers(viewType,\'===\',\'decadeView\'))}}"><template case="true"> <p role="button" tabindex="0" onkeydown="{{action(\'curYearOnKey\',event)}}" class="lyteCalCurrentDate"><a onclick="{{action(\'curYear\',event)}}">{{lyteUiI18n(\'Current Year\')}}</a></p> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(showToday,\'&amp;&amp;\',ltPropShowToday),\'&amp;&amp;\',expHandlers(viewType,\'===\',\'dateView\')),\'&amp;&amp;\',expHandlers(ltPropSelectionType,\'===\',\'week\'))}}"><template case="true"> <p role="button" tabindex="0" onkeydown="{{action(\'curWeekOnKey\',event)}}" class="lyteCalCurrentDate"><a onclick="{{action(\'curWeek\',event)}}">{{lyteUiI18n(\'Current Week\')}}</a></p> </template><template case="false"><template is="if" value="{{expHandlers(showToday,\'&amp;&amp;\',ltPropShowToday)}}"><template case="true"> <p role="button" tabindex="0" onkeydown="{{action(\'todayOnKey\',event)}}" class="lyteCalCurrentDate"><a onclick="{{action(\'today\',event)}}">{{lyteUiI18n(\'today\')}}</a></p> </template></template></template></template></template></template></template></template> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="footer"></lyte-yield> </template></template> </div> </div> </div> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[2,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,7]},{type:"if",position:[1,7],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,9]},{type:"if",position:[1,9],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,11]},{type:"text",position:[1,11,1,0]},{type:"attr",position:[1,13]},{type:"if",position:[1,13],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3]}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[3,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,15]},{type:"text",position:[1,15,1,0]},{type:"attr",position:[1,17]},{type:"if",position:[1,17],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"if",position:[1,1,3,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}]}},default:{}},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0,0]}]}},default:{}}]}},default:{}}]}]}},default:{}}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]}]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5,1,1]},{type:"if",position:[1,1,5,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"text",position:[1,0,0]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,5,1,3]},{type:"if",position:[1,1,5,1,3],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}],_observedAttributes:["ltPropStartDate","ltPropEndDate","ltPropStartYear","ltPropEndYear","ltPropCurrentDate","ltPropFormat","ltPropYear","ltPropMonthHeaderFormat","daysOfWeek","ariaMonthNames","monthSystemValues","monthNames","shortHands","todayName","viewDate","changeData","ltPropYield","ltPropMinDate","ltPropMaxDate","ltPropStartWeekDay","navYield","selectDate","currentDatechanged","ltPropFillRows","ltPropNumberOfRows","callFrmDidcnct","monthDD","yearDD","years","ltPropHeaderType","ltPropDropdown","cords","start","prev","tt","showToday","monthViewTableArray","ltPropBodyYield","ltPropShowToday","ltPropI18n","ltPropActivateNavigation","ltPropDisableNavigation","ltPropPreventAddingRows","ltPropSelectionType","ltPropWeekends","ltPropCurrentWeek","ltPropCurrentMonth","ltPropCurrentYear","ltPropDisabledDates","ltPropCurrentDates","ltPropMultiple","headerId","monthDropdownId","yearDropdownId","ltPropIso","ltPropWeekNumCriteria","ltPropHolidays","ltPropDisableWeekends","ltPropDisableHolidays","ltPropWeekNumber","ltPropAlwaysShowToday","ltPropHighlightWeekendHolidays","ltPropTimeZone","ltPropDisabledDays","ltPropHeaderAlignType","ltPropWeekNumHeader","showYear","ltPropCurrentDisplayMonth","ltPropCurrentDisplayYear","ltPropCurrentDisplayDecade","ltPropDisabledDateTooltip","ltPropTooltip","isoFlag"],data:function(){return{ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropStartYear:Lyte.attr("number",{default:1900}),ltPropEndYear:Lyte.attr("number",{default:2100}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropFormat:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","format","MM/DD/YYYY")}),ltPropYear:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","year",!1)}),ltPropMonthHeaderFormat:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","monthHeaderFormat","MMMM YYYY")}),daysOfWeek:Lyte.attr("array",{default:[]}),ariaMonthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),monthSystemValues:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),monthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),shortHands:Lyte.attr("array",{default:["Jan","Feb","Mar","Apr","short.may","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),todayName:Lyte.attr("string",{default:"Today"}),viewDate:Lyte.attr("object",{default:{}}),changeData:Lyte.attr("number",{default:0}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropMinDate:Lyte.attr("string",{default:""}),ltPropMaxDate:Lyte.attr("string",{default:""}),ltPropStartWeekDay:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","startWeekDay",1)}),navYield:Lyte.attr("boolean",{default:!1}),selectDate:Lyte.attr("boolean",{default:!0}),currentDatechanged:Lyte.attr("number",{default:0}),ltPropFillRows:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","fillRows",!0)}),ltPropNumberOfRows:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","numberOfRows",6)}),callFrmDidcnct:Lyte.attr("boolean",{default:!1}),monthDD:Lyte.attr("object"),yearDD:Lyte.attr("object"),years:Lyte.attr("array",{default:[]}),ltPropHeaderType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","headerType","default")}),ltPropDropdown:Lyte.attr("object",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","dropdown",{callout:!0})}),cords:Lyte.attr("object",{default:{}}),start:Lyte.attr("number"),prev:Lyte.attr("boolean"),tt:Lyte.attr("boolean",{default:!0}),showToday:Lyte.attr("boolean",{default:!0}),monthViewTableArray:Lyte.attr("array",{default:[]}),ltPropBodyYield:Lyte.attr("boolean",{default:!1}),ltPropShowToday:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","showToday",!0)}),ltPropI18n:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","I18n",!1)}),ltPropActivateNavigation:Lyte.attr("boolean",{default:!1}),ltPropDisableNavigation:Lyte.attr("boolean",{default:!1}),ltPropPreventAddingRows:Lyte.attr("boolean",{default:!1}),ltPropSelectionType:Lyte.attr("string",{default:"day"}),ltPropWeekends:Lyte.attr("array",{default:[6,0]}),ltPropCurrentWeek:Lyte.attr("array",{default:[]}),ltPropCurrentMonth:Lyte.attr("string",{default:""}),ltPropCurrentYear:Lyte.attr("string",{default:""}),ltPropDisabledDates:Lyte.attr("array",{default:[]}),ltPropCurrentDates:Lyte.attr("array",{default:[]}),ltPropMultiple:Lyte.attr("boolean",{default:!1}),headerId:Lyte.attr("string"),monthDropdownId:Lyte.attr("string"),yearDropdownId:Lyte.attr("string"),ltPropIso:Lyte.attr("string"),ltPropWeekNumCriteria:Lyte.attr("number",{default:1}),ltPropHolidays:Lyte.attr("array",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","holidays",[])}),ltPropDisableWeekends:Lyte.attr("boolean",{default:!1}),ltPropDisableHolidays:Lyte.attr("boolean",{default:!1}),ltPropWeekNumber:Lyte.attr("boolean",{default:!1}),ltPropAlwaysShowToday:Lyte.attr("boolean",{default:!1}),ltPropHighlightWeekendHolidays:Lyte.attr("boolean",{default:!1}),ltPropTimeZone:Lyte.attr("string"),ltPropDisabledDays:Lyte.attr("array",{default:_lyteUiUtils.resolveDefaultValue("lyte-calendar","disabledWeekDays",[])}),ltPropHeaderAlignType:Lyte.attr("string",{default:""}),ltPropWeekNumHeader:Lyte.attr("string",{default:""}),showYear:Lyte.attr("boolean",{default:!1}),ltPropCurrentDisplayMonth:Lyte.attr("string",{default:""}),ltPropCurrentDisplayYear:Lyte.attr("string",{default:""}),ltPropCurrentDisplayDecade:Lyte.attr("string",{default:""}),ltPropDisabledDateTooltip:Lyte.attr("string",{default:""}),ltPropTooltip:Lyte.attr("object",{default:{position:"bottom",appearance:"box",margin:5,keeptooltip:!0}}),isoFlag:Lyte.attr("boolean",{default:!1})}},getCells:function(){var t=this.getTableContainer().children,e=[];return Array.from(t).forEach((function(t){e=e.concat(Array.from(t.children))})),e},getTableContainer:function(){return this.$node.querySelector(".lyteCalTableRowGroup")},moveForward:function(t,e,o){this.move(t,e,o)},moveBackward:function(t,e,o){this.move(t,e,o)},move:function(t,e,o){var i,a=this.getActiveCell(),l=this.getCells(),s=l.indexOf(a),r=s+o;a&&(i=this.shouldViewChange(l,r,o)?this.getCellFromDifferentView(e,s,o,t):this.getCellFromSameView(l,r),this.activateCell(i),this.isCellDisabled(i)?this.move(t,e,o):this.focusActiveCell())},isCellDisabled:function(t){return!!t.classList.contains("lyteCalendarDisabledDate")},getCellFromSameView:function(t,e){return t[e]},focusActiveCell:function(){var t=this.getActiveCell();t&&t.focus()},focusActiveRow:function(){var t=this.getActiveRow();t&&t.focus()},shouldViewChange:function(t,e,o){var i=this.getData("viewType");return"monthView"===i||"decadeView"===i?!t[e]:!this.isSameMonth(o)},isDisabledCell:function(t){return t.classList.contains("lyteCalDisabled")},getCellFromDifferentView:function(t,e,o,i){var a,l=this.getData("viewType");return"monthView"===l||"decadeView"===l?(this.changeView(t),this.getDrillDownViewCell(t,e,o)):(a=this.getChangedDate(o),this.changeView(t),this.getCell(a))},getDrillDownViewCell:function(t,e,o){var i=this.getCells();return"previous"===t?i[i.length+(e+o)]:i[(e+o)%i.length]},changeView:function(t){"previous"===t?this.moveToPrevious("M",event):this.moveToNext("M",event)},moveToFirstCell:function(t,e){var o=this.getCellsToMove(e,"home");this.moveBackward(t,e,o)},moveToLastCell:function(t,e){var o=this.getCellsToMove(e,"end");this.moveForward(t,e,o)},getCellsToMove:function(t,e){var o=this.getActiveCell(),i=(o||{}).parentElement,a=Array.from((i||{}).children||[]),l=a.indexOf(o),s=this.getData("viewType");return o?"home"===e||"end"===e?"previous"===t?-l:a.length-1-l:"monthView"===s||"decadeView"===s?"previous"===t?-4:4:"previous"===t?-7:7:0},getCell:function(t){return this.$node.querySelector('[data-date="'+t+'"]')},isSameMonth:function(t){return this.getChangedMonth(t)===this.getData("viewDate").getMonth()},getChangedMonth:function(t){var e=this.getChangedDate(t),o=this.getRelevantFormat(this.getData("ltPropFormat"));return $L.moment(e,o).format("M")-1},getChangedDate:function(t){var e=this.getActiveCell().getAttribute("data-date"),o=this.getRelevantFormat(this.getData("ltPropFormat"));return $L.moment(e,o).add(t,"day").format(o)},previousNavigation:function(t,e){var o=e.shiftKey?"Y":"M";this.moveToPrevious(o,e),this.focusActiveCell()},nextNavigation:function(t,e){var o=e.shiftKey?"Y":"M";this.moveToNext(o,e),this.focusActiveCell()},toDate:function(){var t=this.data.ltPropTimeZone;return null!=t?new Date($L.moment().timezone(t).format("MM/DD/YYYY")):this.isHavingTimezone?new Date($L.moment().format("MM/DD/YYYY")):new Date},moment:function(t,e,o){var i=this.isHavingTimezone;return i?(o?o.ignore_timezone=i:o={ignore_timezone:i},$L.moment(t,e,o)):e?o?$L.moment(t,e,o):$L.moment(t,e):$L.moment(t)},changeBodyContainerClass:function(){var t=this.$node.querySelector(".lyteCalTableContainer"),e=this.getData("viewType"),o=this.getData("ltPropSelectionType"),i=this.isDrilldown();i&&("dateView"===e?(t.classList.remove("lyteDrillCalMonthView"),t.classList.remove("lyteDrillCalYearView")):"monthView"===e?(t.classList.add("lyteDrillCalMonthView"),t.classList.remove("lyteDrillCalYearView")):"decadeView"===e&&(t.classList.remove("lyteDrillCalMonthView"),t.classList.add("lyteDrillCalYearView"))),this.removeSelectionStyles(),i?"dateView"===e&&("day"===o?t.classList.add("lyteCalDaySelType"):"week"===o?t.classList.add("lyteCalWeekSelType"):(this.setData("ltPropSelectionType","day"),t.classList.add("lyteCalDaySelType"))):"day"===o?t.classList.add("lyteCalDaySelType"):"week"===o?t.classList.add("lyteCalWeekSelType"):"month"===o?t.classList.add("lyteCalMonthSelType"):"year"===o?t.classList.add("lyteCalYearSelType"):(this.setData("ltPropSelectionType","day"),t.classList.add("lyteCalDaySelType")),this.setShowYearAccToView()}.observes("ltPropSelectionType","viewType").on("didConnect"),yearObserver:function(){this.setShowYearAccToView()}.observes("ltPropYear"),setShowYearAccToView:function(){var t=this.getData("viewType"),e=this.getData("ltPropYear");"dateView"===t?e?this.setData("showYear",!0):this.setData("showYear",!1):("monthView"===t||"decadeView"===t)&&this.setData("showYear",!1)},removeSelectionStyles:function(){var t=this.$node.querySelector(".lyteCalTableContainer");t.classList.remove("lyteCalDaySelType"),t.classList.remove("lyteCalWeekSelType"),t.classList.remove("lyteCalMonthSelType"),t.classList.remove("lyteCalYearSelType")},changeDaysOfWeek:function(){var t,e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=this.getData("ltPropStartWeekDay"),a=[],l=this.getData("ltPropWeekends");for(t=0;t<7;t++){var s="lyteCalTableCellHeader";-1!==l.indexOf((t+i)%7)&&(s+=" lyteCalWeekendHeader"),a.push({day:e[(t+i)%7],id:this.generateRandomId(),title:o[(t+i)%7],class:s})}this.setData("daysOfWeek",a)},generateRandomId:function(){return"Lyte_Calendar_Day_"+_lyteUiUtils.calId++},isYYFormat:function(){var t=this.getData("ltPropFormat");return/\byy\b/gi.test(t)},outsideBoundary:function(t){var e=t.getFullYear()-this.toDate().getFullYear(),o=this.isMomentSupported?$L.moment():{uL:19,lL:80};return e>o.uL||(e<-o.lL||void 0)},didDestroy:function(){delete this.$node.revertToToday},activateNavigation:function(){this.getData("ltPropActivateNavigation")&&(this.activateRelevantCell(),this.setData("ltPropActivateNavigation",!1))}.observes("ltPropActivateNavigation"),activateRelevantCell:function(){var t,e=this.getData("ltPropFormat"),o=this.stringToDate(this.getData("ltPropCurrentDate"),e),i=this.toDate(),a=this.stringToDate(this.getData("previousActiveCellDate"),e);"Invalid Date"!==a&&(t=this.findSimilarCell(a)),"Invalid Date"!==o&&(t=t||this.findSimilarCell(o)),t=t||this.findSimilarCell(i),this.activateCell(t)},findSimilarCell:function(t){var e,o,i=t.getDate(),a=this.getData("viewDate"),l=a.getMonth(),s=a.getFullYear(),r=(t.getMonth(),this.getNumber(l,s)),n=this.getData("ltPropFormat");return e=new Date(l+1+"/"+(i>r?r:i)+"/"+s),o=this.getDateFromFormat(e,n),this.getCell(o)},activateCell:function(t){if(t){var e=this.$node.querySelector(".lyteCalNavCell");e&&(e.classList.remove("lyteCalNavCell"),e.setAttribute("tabindex","-1")),t.setAttribute("tabindex","0"),t.focus(),t.classList.add("lyteCalNavCell"),this.setData("previousActiveCellDate",t.getAttribute("data-date"))}},getActiveCell:function(){return this.$node.querySelector(".lyteCalNavCell")},getActiveRow:function(){var t=this.$node.querySelector(".lyteCalToday");return $L(t).closest("lyteCalTableRow")[0]},setMonthAndYearDropdown:function(){if(!this.getData("navYield")&&this.isDropdownHeader()&&this.getData("monthDD")&&this.getData("yearDD")){var t,e,o=this.getData("ltPropMonthHeaderFormat"),i=/MMMM YYYY/gi,a=/MMM YYYY/gi,l=[];if("callFrmDidcnct"==arguments[0].item){i.test(o)?t=this.getData("monthNames"):a.test(o)&&(t=this.getData("shortHands"));for(var s=0;s<t.length;s++)l[s]=_lyteUiUtils.i18n(t[s]);this.setData("monthNames",l)}e=parseInt(this.getData("currentYearForDropdown")),this.removeOutOfRangeOption(),this.outOfRange(e)&&this.addOutOfRangeOption(e),this.getData("monthDD").component.setData("ltPropSelected",this.getData("I18nedMonthForDropdown")),this.getData("yearDD").component.setData("ltPropSelected",this.getData("currentYearForDropdown"))}}.observes("monthHeader","callFrmDidcnct"),removeOutOfRangeOption:function(){var t,e=this.getData("years");isNaN(this.addedOption)||~(t=e.indexOf(this.addedOption))&&(Lyte.arrayUtils(e,"removeAt",t),this.addedOption=null)},outOfRange:function(t){var e=this.getData("ltPropStartYear")||1900,o=this.getData("ltPropEndYear")||2100;return t<e||t>o},addOutOfRangeOption:function(t){var e=this.getData("years"),o=this.getData("ltPropStartYear")||1900,i=this.getData("ltPropEndYear")||2100;this.addedOption=t,t<o?Lyte.arrayUtils(e,"insertAt",0,t):t>i&&Lyte.arrayUtils(e,"push",t)},startWeekDayObserver:function(){this.changeDaysOfWeek()}.observes("ltPropStartWeekDay"),monthHeaderObserver:function(){this.buildDateViewHeader()}.observes("monthNames.[]"),getMonthHeader:function(){var t,e,o,i,a=this.getData("ltPropMonthHeaderFormat");return/MMMM YYYY/gi.test(a)?(e=this.getData("monthNames"),o=_lyteUiUtils.i18n(e[this.getData("viewDate").getMonth()]),i=this.getData("viewDate").getFullYear()):/MMM YYYY/gi.test(a)&&(e=this.getData("shortHands"),o=_lyteUiUtils.i18n(e[this.getData("viewDate").getMonth()]),i=this.getData("viewDate").getFullYear()),t=o+" "+i,this.setData("I18nedMonthForDropdown",o),this.setData("currentYearForDropdown",i),t},revert:function(t){var e=new Date(this.getData("viewDate").getTime()),o=this.toDate();o.setDate(1);var i=new Date(o.getTime());this.setData("viewDate",o),this.setAndBuildView("dateView",t),this.getData("ltPropAlwaysShowToday")||this.setData("showToday",!1),!this.getMethods("onNavigate")||e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()||this.executeMethod("onNavigate",t,this.getDateFromFormat(e,this.getData("ltPropFormat")),this.getDateFromFormat(i,this.getData("ltPropFormat")),this)},revertToMonth:function(t){var e=new Date(this.getData("viewDate").getTime()),o=this.toDate();o.setDate(1);var i=new Date(o.getTime());this.setData("viewDate",o),this.setAndBuildView("monthView",t),this.getData("ltPropAlwaysShowToday")||this.setData("showToday",!1),!this.getMethods("onNavigate")||e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()||this.executeMethod("onNavigate",t,this.getDateFromFormat(e,this.getData("ltPropFormat")),this.getDateFromFormat(i,this.getData("ltPropFormat")),this)},revertToYear:function(t){var e=new Date(this.getData("viewDate").getTime()),o=this.toDate();o.setDate(1);var i=new Date(o.getTime());this.setData("viewDate",o),this.setAndBuildView("decadeView",t),this.getData("ltPropAlwaysShowToday")||this.setData("showToday",!1);var a=(e.getFullYear()+"").slice(0,3),l=(i.getFullYear()+"").slice(0,3);this.getMethods("onNavigate")&&a!==l&&this.executeMethod("onNavigate",t,this.getDateFromFormat(e,this.getData("ltPropFormat")),this.getDateFromFormat(i,this.getData("ltPropFormat")),this)},getDateFromFormat:function(t,e){return this.isMomentSupported?this.getDateStringFromMoment(t,e):this.getDateStringManually(t,e)},getDateStringFromMoment:function(t,e){return e=this.getRelevantFormat(e),this.moment(t).format(e)},resolveConflicts:function(t){var e=/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/.exec(t),o=(e||{}).index,i=(e||[])[0].length||0;return isNaN(o)?t.toUpperCase():t.substring(0,o+i)+(t.substring(o+i)||"").toUpperCase()},isConflictingFormat:function(t){return(t.match(/(\bd\b|\bdd\b|\bddd\b|\bdddd\b)/gi)||[]).length>1},getRelevantFormat:function(t){return this.isConflictingFormat(t)?this.resolveConflicts(t):t.toUpperCase()},getDateStringManually:function(t,e){var o,i=t.getDate(),a=t.getFullYear(),l=t.getMonth()+1;return e=e.toUpperCase(),l<10&&(l="0"+l),i<10&&(i="0"+i),/(MMMM|DD|YYYY).+(MMMM|DD|YYYY).+(YYYY|MMMM|DD)/gi.test(e)?(o=["January","February","March","April","May","June","July","August","September","October","November","December"],e=(e=(e=e.replace("MMMM",o[l-1])).replace("DD",i)).replace("YYYY",a)):/(MMM|DD|YYYY).+(MMM|DD|YYYY).+(YYYY|MMM|DD)/gi.test(e)?(o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=(e=(e=e.replace("MMM",o[l-1])).replace("DD",i)).replace("YYYY",a)):(/(YYYY).+(MM).+(DD)/gi.test(e)||/(MM).+(DD).+(YYYY)/gi.test(e)||/(DD).+(MM).+(YYYY)/gi.test(e))&&(e=(e=(e=e.replace("MM",l)).replace("DD",i)).replace("YYYY",a)),e},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getNumber:function(t,e){return this.isLeapYear.call(this,e)&&1==t?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},showtoday:function(){var t=this.toDate();t.getMonth()!=this.getData("viewDate").getMonth()||t.getYear()!=this.getData("viewDate").getYear()?this.setData("showToday",!0):this.setData("showToday",!1),this.getData("ltPropAlwaysShowToday")&&this.setData("showToday",!0)},reset:function(t){t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)},isInRange:function(t,e,o){var i,a;if(this.reset(t),""===e&&""===o)return!0;if(""!==e&&""===o){if(i=this.stringToDate(e,this.getData("ltPropFormat")),this.reset(i),t>=i)return!0}else if(""!==e&&""!==o){if(i=this.stringToDate(e,this.getData("ltPropFormat")),this.reset(i),a=this.stringToDate(o,this.getData("ltPropFormat")),this.reset(a),t>=i&&t<=a)return!0}else if(a=this.stringToDate(o,this.getData("ltPropFormat")),this.reset(a),t<=a)return!0;return!1},checkDate:function(t){var e=this.getData("ltPropMinDate")||"",o=this.getData("ltPropMaxDate")||"";return this.isInRange(t,e,o)},numberOfRowsChange:function(){var t=this.getData("ltPropNumberOfRows");try{if(t<5)throw"Calendar failed to render. The number of rows should be greater than 4."}catch(t){return void console.error(t)}this.setDatesFunction()}.observes("ltPropNumberOfRows"),setDates:function(t){this.__ignoremin&&"ltPropMinDate"==t.item||this.setDatesFunction()}.observes("ltPropStartDate","ltPropEndDate","changeData","ltPropMinDate","ltPropMaxDate","ltPropFormat","ltPropStartWeekDay"),holidayObs:function(){this.removeExistingHolidays(),this.addHolidays()}.observes("ltPropHolidays"),addHolidays:function(){var t=this.getData("ltPropHolidays"),e=this.getData("ltPropFormat");if(t&&t.length)for(var o=0;o<t.length;o++){var i=t[o],a=this.stringToDate(t[o],e),l=this.$node.querySelector('div[data-date="'+i+'"]');if(l){var s=l.classList.contains("lyteCalendarDisabledDate");l.classList.add("lyteCalHoliday"),this.getData("ltPropDisableHolidays")&&!s&&l.classList.add("lyteCalendarDisabledDate"),this.getData("ltPropHighlightWeekendHolidays")&&this.isWeekend(a)&&l.classList.add("lyteCalWeekendHoliday")}}},removeExistingHolidays:function(){for(var t=this.$node.querySelectorAll(".lyteCalHoliday"),e=this.getDisabledDates(),o=0;o<t.length;o++){var i=this.stringToDate(t[o].getAttribute("data-date"),this.getData("ltPropFormat"));t[o].classList.remove("lyteCalHoliday"),this.getData("ltPropDisableHolidays")&&t[o].classList.contains("lyteCalendarDisabledDate")&&!this.isDisabled(i,e)&&t[o].classList.remove("lyteCalendarDisabledDate"),this.getData("ltPropHighlightWeekendHolidays")&&t[o].classList.contains("lyteCalWeekendHoliday")&&t[o].classList.remove("lyteCalWeekendHoliday")}},getNumberOfFirstRowDates:function(t){var e=this.getData("ltPropStartWeekDay");return 0==t?0===e?7:e:t<e?e-t:7-(t-e)},getNumberToSubtract:function(t){var e=this.getData("ltPropStartWeekDay");return 0==t?0==e?0:7-e:t<e?7-(e-t):t-e},getFirstDay:function(t){var e,o=t.getDate();return(e=t.getDay()-(e=o-7*Math.floor(o/7)-1))<0&&(e=7-e),e},getRemainingDays:function(t,e){var o=t-e;return o-=28},inc:function(t,e){return this.getData("ltPropPreventAddingRows")?e:t>0&&6==e?7:e},getFirstDateOfDateView:function(){var t=this.getData("viewDate"),e=this.getFirstDay(t),o=t.getMonth(),i=t.getFullYear(),a=new Date(o+1+"/1/"+i),l=this.getNumberToSubtract(e);return a.setDate(a.getDate()-l),a},getNumberOfRowsToDisplay:function(){var t=this.getData("ltPropNumberOfRows"),e=this.getData("viewDate"),o=this.getFirstDay(e),i=this.getNumber(e.getMonth(),e.getFullYear()),a=this.getNumberOfFirstRowDates(o),l=this.getRemainingDays(i,a);return this.inc(l,t)},setDatesFunction:function(){var t,e=this.getData("ltPropFillRows"),o=!1,i=this.getData("viewDate"),a=i.getMonth(),l=[],s=this.getCurrentWeekNumber(i),r=[];t=this.getNumberOfRowsToDisplay();for(var n=this.getFirstDateOfDateView(),d=0;d<t&&!o;d++){var p=this.cloneDateObj(n);l.push([]);for(var h=0;h<7;h++)e||a===n.getMonth()?l[d].push(this.createDateCell(n,this.getCellClass(n))):(l[d].push({emptyBlock:!0}),0!=d&&(o=!0)),n.setDate(n.getDate()+1);var c=this.cloneDateObj(n);r.push(this.createWeekCell(p,c,s)),s++}this.setData("matrix",l),this.setData("weeknum",r),this.shouldActivateCell()&&this.activateRelevantCell()},createWeekCell:function(t,e,o){return{class:this.getWeekClass(t,e),val:o}},cloneDateObj:function(t){return new Date(t)},getWeekClass:function(t,e){var o="lyteWeekNumberGrid",i=this.getData("viewDate"),a=e.setDate(e.getDate()-1),l=this.__ignoremin?i:this.toDate();return this.isInRange(l,t,a)&&(o+=" lyteCalCurWeekNum"),o},isPresentInViewingMonth:function(t){return this.getData("viewDate").getMonth()===t.getMonth()},isRangeGiven:function(){return""!==(this.getData("ltPropMinDate")||"")||""!==(this.getData("ltPropMaxDate")||"")},getCellClass:function(t){var e="lyteCalCdate",o=this.isRangeGiven(),i=this.checkDate(t),a=this.getDisabledDates(),l=this.isDisabled(t,a),s=this.getData("ltPropSelectionType")||"day",r=this.getSelectedDateObj(),n=this.getData("viewDate"),d=this.__ignoremin?n:this.toDate();return this.isPresentInViewingMonth(t)?o&&!i&&(e+=" lyteCalDisabled"):(e+=" lyteCalDiffMonth",o?i||(e+=" lyteCalDisabled"):e+=" lyteCalGray"),l&&(e+=" lyteCalendarDisabledDate"),"day"===s&&this.isSelectedDate(t,r)&&this.getData("selectDate")&&(e+=" lyteCalSel"),"week"===s&&(e+=" "+this.getWeekSelectedClass(t)),d.getMonth()===t.getMonth()&&d.getDate()===t.getDate()&&d.getYear()===t.getYear()&&(e+=" lyteCalToday"),e+=this.addWeekEndClass(t,l),e+=this.addHolidayClass(t,l),e+=" lyteCalTableCell"},addWeekEndClass:function(t,e){var o="",i=this.getHolidayDates();return this.isWeekend(t)&&(o+=" lyteCalWeekend",this.getData("ltPropDisableWeekends")&&!e&&(o+=" lyteCalendarDisabledDate"),this.getData("ltPropHighlightWeekendHolidays")&&this.isHoliday(t,i)&&(o+=" lyteCalWeekendHoliday")),o},addHolidayClass:function(t,e){var o="",i=this.getHolidayDates();return this.isHoliday(t,i)&&(o+=" lyteCalHoliday",this.getData("ltPropDisableHolidays")&&!e&&(o+=" lyteCalendarDisabledDate")),o},createDateCell:function(t,e){var o={},i=this.getData("ltPropFormat");return o.date=t.getDate(),o.id=this.generateRandomId(),o.clsname=e,o.val=this.getDateFromFormat(t,i),o.iso=this.getIsoFromFormat(t),o},getIsoFromFormat:function(t){return this.isMomentSupported?$L.moment(t).format():isNaN(t.getTime())?null:t.toISOString()},isSelectedDate:function(t,e){return this.getData("ltPropMultiple")?this.isDateInArray(e,t):"nodate"!==e&&"Invalid Date"!==e&&this.isSameDate(t,e)},isDateInArray:function(t,e){t=t||[];for(var o=0;o<t.length;o++)if(this.isSameDate(e,t[o]))return!0},isSameDate:function(t,e){return t.getYear()==e.getYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()},getSelectedDateObj:function(){var t=this.getData("ltPropMultiple"),e=this.getData("ltPropCurrentDates");return t?this.getDObjArrayFromStrings(e):this.isIso?this.getData("ltPropIso")?this.isoToDate(this.getData("ltPropIso")):"nodate":this.getData("ltPropCurrentDate")?this.stringToDate(this.getData("ltPropCurrentDate"),this.getData("ltPropFormat")):"nodate"},getDObjArrayFromStrings:function(t){var e=this;return(t=t||[]).map((function(t){return e.stringToDate(t,e.getData("ltPropFormat"))}))},getDisabledDates:function(){var t=this.getData("ltPropDisabledDates");return this.getDObjArrayFromStrings(t)},isDisabled:function(t,e){var o=this.data.ltPropDisabledDays||[];return this.isDateInArray(e,t)||!!o.length&&this.isDateDisabledInWeek(o,t)},isDateDisabledInWeek:function(t,e){var o=new Date(this.moment(e).format("YYYY-MM-DD"));return-1!=t.indexOf(o.getDay())},getWeekSelectedClass:function(t){var e=this.getData("ltPropCurrentWeek")||[],o=e[0]||"",i=e[1]||"",a=this.getData("ltPropFormat");return o=this.stringToDate(o,a),i=this.stringToDate(i,a),"Invalid Date"===o||"InvalidDate"===i||t<o||t>i?"":"lyteCalWeekSel"},isWeekend:function(t){var e=t.getDay();return!!~(this.getData("ltPropWeekends")||[]).indexOf(e)},getHolidayDates:function(){var t=this.getData("ltPropHolidays");return this.getDObjArrayFromStrings(t)},isHoliday:function(t,e){return this.isDateInArray(e,t)},shouldActivateCell:function(){var t=this.getData("ltPropDisableNavigation"),e=this.isFromCurrentDateObserver,o=this.navigationButtonPressed;return this.isFromCurrentDateObserver=!1,this.navigationButtonPressed=!1,!t&&!e&&!o},executeViewDateChanges:function(){this.getMethods("onViewdateChange")&&this.executeMethod("onViewdateChange",this,this.getData("viewDate"))}.observes("viewDate"),getProperMonth:function(t){var e;return(e={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}[t=t.toLowerCase()]||{january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12}[t])||0===e?e-1:parseFloat(t)-1},isProperDate:function(t,e,o){return o<=this.getNumber(e,t)},getDateObjFromString:function(t,e){try{var o,i,a=t.match(/([\da-z]+)/gi),l=(e=e.toUpperCase()).match(/([a-z]+)/gi),s=this.toDate(),r=0,n=["Y","M","D"];if(s.setDate(1),3!==a.length)return"Invalid Date";for(;r<l.length;){var d=this.getOrderIndex(l,n[r]);if(0==r)s.setFullYear(o=a[d]);else if(1==r){if((i=this.getProperMonth(a[d]))<0||i>11)return"Invalid Date";s.setMonth(i)}else if(2==r){if(!this.isProperDate(o,i,a[d]))return"Invalid Date";s.setDate(a[d])}if("Invalid Date"===s.toString())return s.toString();r++}return s}catch(t){return"Invalid Date"}},getDateObjFromMoment:function(t,e){var o;if(e=this.getRelevantFormat(e),!t)return"Invalid Date";try{o=this.moment(t,e).getDObj()}catch(t){o="Invalid Date"}return"[object Date]"===Object.prototype.toString.call(o)&&isNaN(o.getTime())&&(o="Invalid Date"),o||"Invalid Date"},stringToDate:function(t,e){return t=this.convertToEnglish(t),this.isMomentSupported?this.getDateObjFromMoment(t,e):this.getDateObjFromString(t,e)},findISO:function(){if(!this.getData("ltPropIso")&&this.getData("ltPropCurrentDate")){var t,e=this.getData("ltPropCurrentDate"),o=this.getRelevantFormat(this.getData("ltPropFormat")),i=this.stringToDate(e,o);this.isMomentSupported?t=$L.moment(i).format():"Invalid Date"!==i&&(t=i.toISOString()),t&&this.setData("ltPropIso",t)}else if(this.getData("ltPropIso")&&!this.getData("ltPropCurrentDate")){o=this.getRelevantFormat(this.getData("ltPropFormat")),e=$L.moment(this.getData("ltPropIso")).format(o);var a=this.convertToLang(e);this.setData("ltPropCurrentDate",a)}this.getData("ltPropIso")&&(this.isIso=!0)},isoToDate:function(t){var e;if(!t)return"Invalid Date";if(!this.isMomentSupported){var o=new Date(t);return o&&"Invalid Date"!==o.toString()?o:o.toString()}try{e=$L.moment(t).getDObj()}catch(t){e="Invalid Date"}return e},convertToEnglish:function(t){var e=this.getData("ltPropI18n"),o=this.getRelevantFormat(this.getData("ltPropFormat"));return e?this.moment(t,o,{i18n:!0}).format(o):t},getEnglishShorthand:function(t){for(var e=this.getShortHands(),o=-1,i=0,a=this.getData("shortHands"),l=0;l<e.length;l++)~t.indexOf(e[l])&&e[l].length>i&&(o=l,i=e[l].length);return-1!==o&&(t=t.replace(e[o],this.getProperShortHand(a[o]))),t},getShortHands:function(){for(var t=this.getData("shortHands"),e=[],o=0;o<t.length;o++)e.push(_lyteUiUtils.i18n(t[o]));return e},getProperShortHand:function(t){return"short.may"===t?"May":t},getEnglishStandard:function(t){for(var e=this.getStandardMonths(),o=this.getData("monthNames"),i=-1,a=0,l=0;l<e.length;l++)~t.indexOf(e[l])&&e[l].length>a&&(i=l,a=e[l].length);return-1!==i&&(t=t.replace(e[i],o[i])),t},getStandardMonths:function(){for(var t=this.getData("monthNames"),e=[],o=0;o<t.length;o++)e.push(_lyteUiUtils.i18n(t[o]));return e},getOrderIndex:function(t,e){for(var o=0;o<t.length;o++)if(t[o].charAt(0)===e)return o;return-1},getMaxYear:function(){var t=this.toDate().getFullYear()+19;return this.isYYFormat()?t:this.getData("ltPropEndYear")||2100},getMinYear:function(){var t=this.toDate().getFullYear()-80;return this.isYYFormat()?t:this.getData("ltPropStartYear")||1900},buildYears:function(){var t,e=this.getData("ltPropEndYear")||2100,o=[];for(t=this.getData("ltPropStartYear")||1900;t<=e;t++)o.push(t.toString());this.setData("years",o)},setAndBuildView:function(t,e,o){var i=this.getData("viewType"),a=t;this.setData("viewType",t),"monthView"===t?this.buildMonthView():"decadeView"===t?(this.buildDecadeView(),this.setData("showToday",!1)):"dateView"===t&&this.buildDateView(),this.getData("ltPropAlwaysShowToday")&&this.setData("showToday",!0),o||i===a||this.getMethods("onViewChange")&&this.executeMethod("onViewChange",e,t,this)},buildDateView:function(){this.buildDateViewHeader(),this.buildDateViewContent(),this.showtoday()},buildDateViewHeader:function(){this.setData("monthHeader",this.getMonthHeader());var t=this.getData("viewDate"),e=t.getFullYear(),o=t.getMonth(),i=t.getFullYear(),a=i-i%10,l=a+9;this.setData("ltPropCurrentDisplayMonth",o),this.setData("ltPropCurrentDisplayYear",e),this.setData("ltPropCurrentDisplayDecade",a+"-"+l)},buildDateViewContent:function(){this.setDatesFunction()},buildMonthView:function(){this.buildMonthViewHeader(),this.buildMonthViewContent(),this.showtoday(),this.activateCell(this.getActiveCell())},buildMonthViewHeader:function(){var t=this.getData("viewDate"),e=t.getFullYear(),o=t.getFullYear(),i=o-o%10,a=i+9;this.setData("currentYear",e),this.setData("ltPropCurrentDisplayYear",e),this.setData("ltPropCurrentDisplayDecade",i+"-"+a)},buildMonthViewContent:function(){for(var t,e,o=this.getData("monthSystemValues"),i=this.getData("shortHands"),a=0,l=[];a<3;a++)for(l.push([]),t=0;t<4;t++)e=4*a+t,l[a].push({displayValue:_lyteUiUtils.i18n(i[e]),systemValue:o[e],class:this.getProperClassForMonthView(e)});this.setData("monthViewData",l)},getProperClassForMonthView:function(t){var e=this.getData("viewDate").getFullYear(),o=this.getCurrentMonth(),i=this.getCurrentYear(),a=this.getData("ltPropFormat"),l=this.stringToDate(this.getData("ltPropCurrentDate"),a),s=this.getData("previousActiveCellDate")||"",r=this.getData("monthSystemValues").indexOf(s),n="lyteCalTableCell",d=this.getData("ltPropCurrentMonth");return n+=i===e&&t===o?" lyteDrillCalCurrentMonth":"",n+=-1!==r?t===r?" lyteCalNavCell":"":"Invalid Date"!==l?t===l.getMonth()?" lyteCalNavCell":"":t===o?" lyteCalNavCell":"",d===(t+1).toString()&&(n+=" lyteCalMonthSel"),n},getCurrentYear:function(){return this.toDate().getFullYear()},getCurrentMonth:function(){return this.toDate().getMonth()},buildDecadeView:function(){this.buildDecadeViewHeader(),this.buildDecadeViewContent(),this.activateCell(this.getActiveCell())},buildDecadeViewHeader:function(){var t=this.getData("viewDate").getFullYear(),e=t-t%10,o=e+9;this.setData("decadeStart",e),this.setData("decadeEnd",o),this.setData("ltPropCurrentDisplayDecade",e+"-"+o)},buildDecadeViewContent:function(){var t,e,o,i=this.getData("viewDate").getFullYear(),a=i-i%10,l={minYear:this.getData("ltPropStartYear")||1900,maxYear:this.getData("ltPropEndYear")||2100},s=this.isYYFormat(),r=l.minYear,n=l.maxYear,d=[];for(t=0;t<3;t++)for(d.push([]),e=0;e<4;e++)o=a+4*t+e-1,s?d[t].push(o>n||o<r?this.emptyCell():this.currentYearCell(o,a)):d[t].push(this.currentYearCell(o,a));this.setActiveDecadeCell(d),this.setData("decadeViewData",d)},emptyCell:function(){return{emptyBlock:!0}},currentYearCell:function(t,e){var o=e+9,i=[],a=this.getCurrentYear(),l=this.getData("ltPropCurrentYear");return(t<e||t>o)&&i.push("lyteCalOtherDecadeCell"),a===t&&i.push("lyteDrillCalCurrentYear"),l===t.toString()&&i.push("lyteCalYearSel"),{year:t,emptyBlock:!1,class:i.join(" ")}},setActiveDecadeCell:function(t){var e,o=this.getData("ltPropCurrentDate"),i=this.getData("ltPropFormat"),a=this.stringToDate(o,i),l=this.getData("previousActiveCellDate"),s=this.getCurrentYear(),r=isNaN(l)?"Invalid Date"!==a?a.getFullYear():s:+l,n=t[0][0].year,d=t[t.length-1][t[t.length-1].length-1].year;r>=n&&r<=d?t[Math.floor((r-n)/4)][(r-n)%4].class+=" lyteCalNavCell":(e=r%10==9?Math.abs(r-n)<Math.abs(r-d)?0:10:r%10==0?Math.abs(r-n)<Math.abs(r-d)?1:11:r%10+1,t[Math.floor(e/4)][e%4].class+=" lyteCalNavCell")},buildNavigationalUI:function(){this.getData("ltPropHeaderType");this.isDropdownHeader()&&this.buildYears()},init:function(){this.checkForMoment(),this.findISO()},initFn:function(){var t=this;this.addContainerClass(),this.buildViewDate(),this.changeDaysOfWeek(),this.initializeCalendar(),this.setCalendarIdsForAria(),this.$node.revertToToday=function(){t.revert()},this.$node.focusCalendar=function(){t.setData("ltPropActivateNavigation",!0)},this.$node.revertToSelected=function(){t.revertToSelected()},this.$node.getDateArray=function(e){return t.setData("viewDate",e),t.buildDateViewContent(),t.getData("matrix")}}.observes("currentDatechanged").on("init"),setCalendarIdsForAria:function(){this.setData("headerId",this.generateRandomId()),this.setData("monthDropdownId",this.generateRandomId()),this.setData("yearDropdownId",this.generateRandomId()),this.setData("monthAriaObj",{"aria-labelledby":this.getData("monthDropdownId")}),this.setData("yearAriaObj",{"aria-labelledby":this.getData("yearDropdownId")})},revertToSelected:function(){var t=new Date(this.getData("viewDate").getTime()),e=(this.getData("ltPropCurrentDate"),this.getData("ltPropIso")),o=(this.getData("ltPropFormat"),e?this.isoToDate(e):this.toDate()),i=this.toDate(),a={};if("Invalid Date"!==o){o.setDate(1);var l=new Date(o.getTime());this.setData("viewDate",o),this.setAndBuildView("dateView",a),l.getMonth()===i.getMonth()&&l.getFullYear()===i.getFullYear()?this.setData("showToday",!1):this.setData("showToday",!0),this.getData("ltPropAlwaysShowToday")&&this.setData("showToday",!0),!this.getMethods("onNavigate")||t.getMonth()===l.getMonth()&&t.getFullYear()===l.getFullYear()||this.executeMethod("onNavigate",a,this.getDateFromFormat(t,this.getData("ltPropFormat")),this.getDateFromFormat(l,this.getData("ltPropFormat")),this)}},addContainerClass:function(){var t=["lyteCalendarPopup"];"drilldown"===this.getData("ltPropHeaderType")&&t.push("lyteDrillDownCalendar"),this.setData("containerClass",t.join(" "))},checkForMoment:function(){this.isMomentSupported=!(!$L||!$L.moment),this.isHavingTimezone=this.isMomentSupported&&!!$L.moment()._timezone},buildViewDate:function(){var t=this.determineViewDateFromUserInput();"Invalid Date"===t&&(t=this.toDate()),t.setDate(1),this.setData("viewDate",t)},determineViewDateFromUserInput:function(){var t;return"week"===this.getData("ltPropSelectionType")?(t=(this.getData("ltPropCurrentWeek")||[])[0])?this.stringToDate(t,this.getData("ltPropFormat")):this.toDate():this.isIso?this.getData("ltPropIso")?this.isoToDate(this.getData("ltPropIso")):this.toDate():this.getData("ltPropCurrentDate")?this.stringToDate(this.getData("ltPropCurrentDate"),this.getData("ltPropFormat")):this.toDate()},initializeCalendar:function(){this.buildNavigationalUI(),this.decideView()},decideView:function(){var t=this.getData("ltPropSelectionType")||"day";"day"===t||"week"===t?this.setAndBuildView("dateView",void 0,!0):"month"===t?this.setAndBuildView("monthView",void 0,!0):"year"===t?this.setAndBuildView("decadeView",void 0,!0):this.setAndBuildView("dateView",void 0,!0)},selectionTypeObserver:function(){this.decideView()}.observes("ltPropSelectionType"),isDrilldown:function(){return"drilldown"===this.getData("ltPropHeaderType")},didConnect:function(){!this.getData("navYield")&&this.isDropdownHeader()&&(this.setData("monthDD",this.getMonthDropdown()),this.setData("yearDD",this.getYearDropdown()),this.setData("callFrmDidcnct",!0)),(this.getMethods("onDateHover")||this.getMethods("onMonthHover")||this.getMethods("onYearHover"))&&this.addListenerForHoverEvent(),this.addBoxClassToAllDropdowns()},addBoxClassToAllDropdowns:function(){var t=this.getData("ltPropDropdown");if(t&&t.boxClass)for(var e=$L(this.$node).find("lyte-dropdown"),o=0;o<e.length;o++){var i=e[o],a=this.getDropBox(i);a&&a.classList&&$L(a).addClass(t.boxClass)}},getDropBox:function(t){var e=t.component,o=e.childComp;return o||(o=e.$node.querySelector("lyte-drop-box")),o},addListenerForHoverEvent:function(){$L("div.lyteCalTableRowGroup")[0].addEventListener("mouseover",function(t){var e=this.getData("viewType");if(t.target.classList.contains("lyteCalTableCell")){var o=t.target;if(this.getMethods("onDateHover")&&"dateView"===e)this.executeMethod("onDateHover",t,o.getAttribute("data-date"),this);else if(this.getMethods("onMonthHover")&&"monthView"===e){var i=this.getData("monthSystemValues").indexOf(o.getAttribute("data-date"))+1;this.executeMethod("onMonthHover",t,i,this)}else this.getMethods("onYearHover")&&"decadeView"===e&&this.executeMethod("onYearHover",t,o.getAttribute("data-date"),this)}}.bind(this))},isDropdownHeader:function(){var t=this.getData("ltPropHeaderType");return"picklist"===t||"dropdown"===t},getYearDropdown:function(){var t=this.getData("ltPropHeaderType"),e=this.$node.querySelector(".lyteCalYearDD");return"picklist"===t&&(e=e.querySelector("lyte-dropdown")),e},getMonthDropdown:function(){return this.$node.querySelector(".lyteCalMonthDD")},didDestroy:function(){delete this.$node.revertToToday},changeIso:function(t){if((this.getData("ltPropCurrentDate")||this.getData("ltPropIso"))&&(this.getData("ltPropIso")&&(this.isIso=!0),!this.getData("preventObs")&&!this.getData("isoFlag"))){if(t){var e=new Date(t.oldValue),o=new Date(t.newValue);if(this.isSameDate(e,o))return}var i=$L.moment(this.getData("ltPropIso")).getDObj();i.setDate(1);var a=this.getRelevantFormat(this.getData("ltPropFormat"));this.setData("viewDate",i),this.isDropdownHeader()&&this.buildYears();var l=$L.moment(this.getData("ltPropIso")).format(a,this.isYYFormat()),s=this.convertToLang(l);this.setData("isoFlag",!0),this.setData("ltPropCurrentDate",s),this.setData("isoFlag",!1),this.isFromCurrentDateObserver=!0,this.buildDateView()}}.observes("ltPropIso"),changeViewDate:function(t){var e=this.getData("ltPropCurrentDate");if(!this.getData("preventObs")&&!this.getData("isoFlag")){if(!e)return this.setData("isoFlag",!0),this.setData("ltPropIso",""),this.setData("isoFlag",!1),void this.removeSelectedCell();if("Invalid Date"===this.stringToDate(e,this.getData("ltPropFormat")))return this.setData("isoFlag",!0),this.setData("ltPropIso",""),this.setData("isoFlag",!1),void this.removeSelectedCell();t=this.getData("ltPropCurrentDate");var o,i=this.stringToDate(t,this.getData("ltPropFormat")),a=this.cloneDateObj(i);i.setDate(1),this.setData("viewDate",i),o=this.isMomentSupported?this.moment(a).format():a.toISOString(),this.setData("isoFlag",!0),this.setData("ltPropIso",o),this.setData("isoFlag",!1),this.isFromCurrentDateObserver=!0,this.buildDateView()}}.observes("ltPropCurrentDate"),selectedDatesChanged:function(){this.getData("preventObs")||(this.isFromCurrentDateObserver=!0,this.buildDateView())}.observes("ltPropCurrentDates.[]"),disabledDatesChanged:function(){this.isFromCurrentDateObserver=!0,this.buildDateView()}.observes("ltPropDisabledDates.[]"),monthHeaderFormatObserver:function(){this.buildDateViewHeader()}.observes("ltPropMonthHeaderFormat"),weekNumberObserver:function(){var t=this.$node;this.getData("ltPropWeekNumber")&&"dateView"===this.getData("viewType")?t.classList.contains("lyteWeekNumContainer")||t.classList.add("lyteWeekNumContainer"):t.classList.remove("lyteWeekNumContainer")}.observes("ltPropWeekNumber","viewType").on("didConnect"),changeCurrentDate:function(t,e,o){var i,a,l,s,r,n=new Date(this.getData("viewDate").getTime()),d=this.getData("ltPropFormat"),p=this.isYYFormat();d=this.getRelevantFormat(d),"Y"===t?(i=this.getData("viewDate"),this.isIso?(r=$L.moment(this.getData("viewDate")),p=!1):r=this.moment(this.getDateFromFormat(i,d),d),this.isMomentSupported?a=this.moment(r,d).add(e,"fullYear",p).getDObj():(i.setYear(i.getFullYear()+e),a=new Date(i.getTime())),this.setData("viewDate",a),this.buildDateView()):"M"===t&&(i=this.getData("viewDate"),this.isIso?(r=$L.moment(this.getData("viewDate")),p=!1):r=this.moment(this.getDateFromFormat(i,d),d),this.isMomentSupported?a=r.add(e,"month",p).getDObj():(i.setMonth(i.getMonth()+e),a=new Date(i.getTime())),this.setData("viewDate",a),this.buildDateView()),l=this.getDateFromFormat(n,this.getData("ltPropFormat")),s=this.getDateFromFormat(a,this.getData("ltPropFormat")),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",o,l,s,this)},changeCurrentYear:function(t,e){var o,i=this.getData("viewDate"),a=this.isMomentSupported,l=i.getFullYear(),s=this.getData("ltPropFormat"),r=this.isYYFormat(),n=this.getDateFromFormat(i,s),d=n;a?(s=this.getRelevantFormat(s),this.isIso?(n=this.moment(this.getData("viewDate")),r=!1):n=this.moment(n,s),i=n.add(t,"fullYear",r).getDObj()):i.setFullYear(l+t),o=this.getDateFromFormat(i,s),this.setData("viewDate",i),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",e,d,o,this)},changeCurrentDecade:function(t,e){var o,i=this.getData("viewDate"),a=this.getData("ltPropFormat"),l=this.isMomentSupported,s=this.getDateFromFormat(i,a),r=this.isYYFormat(),n=i.getFullYear(),d=s;a=this.getRelevantFormat(a),l?(this.isIso?(s=this.moment(this.getData("viewDate")),r=!1):s=this.moment(s,a),i=s.add(10*t,"fullYear",r).getDObj()):i.setFullYear(n+10*t),o=this.getDateFromFormat(i,a),this.setData("viewDate",i),this.getMethods("onNavigate")&&this.executeMethod("onNavigate",e,d,o,this)},getProper:function(t){for(;t&&!t.classList.contains("lyteCalTableCell");)t=t.parentNode;return t},convertToLang:function(t){var e=this.getData("ltPropI18n"),o=this.getRelevantFormat(this.getData("ltPropFormat"));return e?this.moment(t,o).i18N(o):t},moveToPrevious:function(t,e){var o=this.getData("viewType");"dateView"===o?(this.navigationButtonPressed=!0,this.changeCurrentDate(t,-1,e)):"monthView"===o?(this.changeCurrentYear(-1,e),this.buildMonthView()):"decadeView"===o&&(this.changeCurrentDecade(-1,e),this.buildDecadeView())},moveToNext:function(t,e){var o=this.getData("viewType");"dateView"===o?(this.navigationButtonPressed=!0,this.changeCurrentDate(t,1,e)):"monthView"===o?(this.changeCurrentYear(1,e),this.buildMonthView()):"decadeView"===o&&(this.changeCurrentDecade(1,e),this.buildDecadeView())},changeToMonthView:function(t){this.setAndBuildView("monthView",t)},changeToDecadeView:function(t){this.setAndBuildView("decadeView",t)},selectHighlightedCell:function(t){var e=this.getData("viewType");"drilldown"!==this.getData("ltPropHeaderType")||"dateView"===e?this.makeSelection(t):"monthView"===e?this.monthSelected(t):this.yearSelected(t)},selectDate:function(t){this.getData("ltPropMultiple")?this.selectMultiple(t):this.selectSingle(t)},selectMultiple:function(t){var e=this.getProper(t.target);this.terminateSelection(this.fireBeforeCallback(t,e))||(this.alreadySelected(e)?(this.removeSelectedCell(e),this.removeSelected(e),this.getMethods("onDateRemoved")&&this.executeMethod("onDateRemoved",t,e.getAttribute("data-date"),this)):this.selectCell(t))},terminateSelection:function(t){return!1===t},fireBeforeCallback:function(t,e){return this.alreadySelected(e)?this.fireBeforeRemove(t,e):this.fireBeforeAdd(t,e)},fireBeforeRemove:function(t,e){if(this.getMethods("onBeforeRemove"))return this.executeMethod("onBeforeRemove",t,e.getAttribute("data-date"),this)},fireBeforeAdd:function(t,e){if(this.getMethods("onBeforeAdd"))return this.executeMethod("onBeforeAdd",t,e.getAttribute("data-date"),this)},alreadySelected:function(t){return t.classList.contains("lyteCalSel")},removeSelected:function(t){var e=t.getAttribute("data-date"),o=this.getData("ltPropCurrentDates")||[],i=o.indexOf(e);~i&&Lyte.arrayUtils(o,"removeAt",i)},selectSingle:function(t){this.removeDayHighlights(),this.selectCell(t)},selectCell:function(t){var e=this.getProper(t.target);this.setSelected(e),e.classList.add("lyteCalSel"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","1"),this.getMethods("onDateSelected")&&this.executeMethod("onDateSelected",t,e.getAttribute("data-date"),this)},setSelected:function(t){var e=this.getData("ltPropMultiple"),o=this.convertToLang(t.getAttribute("data-date")),i=t.getAttribute("data-iso");this.setData("preventObs",!0),e?Lyte.arrayUtils(this.getData("ltPropCurrentDates"),"push",o):(this.setData("ltPropIso",i),this.setData("ltPropCurrentDate",o)),this.setData("preventObs",!1)},monthSelected:function(t){var e=this.getData("viewDate").getFullYear(),o=this.getProper(t.target),i=o.getAttribute("data-date"),a="drilldown"===this.getData("ltPropHeaderType");i=this.getData("monthSystemValues").indexOf(i)+1,this.setData("viewDate",new Date(i+"/1/"+e)),a&&this.setAndBuildView("dateView",t),this.removeMonthHighlight(),this.addMonthHighlight(o),this.setData("ltPropCurrentMonth",i),this.getMethods("onMonthSelected")&&this.executeMethod("onMonthSelected",t,(i||"").toString(),this),this.focusActiveCell()},removeMonthHighlight:function(){var t=this.$node.querySelector(".lyteCalMonthSel");t&&(t.classList.remove("lyteCalMonthSel"),t.removeAttribute("aria-selected"))},addMonthHighlight:function(t){t.classList.add("lyteCalMonthSel"),t.setAttribute("aria-selected","true")},yearSelected:function(t){var e=this.getData("viewDate"),o=this.getProper(t.target),i=o.getAttribute("data-date"),a="drilldown"===this.getData("ltPropHeaderType");e.setYear(i),this.setData("viewDate",e),a&&this.setAndBuildView("monthView",t),this.removeYearHighlight(),this.addYearHighlight(o),this.setData("ltPropCurrentYear",i),this.getMethods("onYearSelected")&&this.executeMethod("onYearSelected",t,i,this),this.focusActiveCell()},removeYearHighlight:function(){var t=this.$node.querySelector(".lyteCalYearSel");t&&(t.classList.remove("lyteCalYearSel"),t.removeAttribute("aria-selected"))},addYearHighlight:function(t){t.classList.add("lyteCalYearSel"),t.setAttribute("aria-selected","true")},focusDrillDownButton:function(){var t=this.$node.querySelector(".lyteDrillCalHeaderButton");t&&t.focus()},makeSelection:function(t){"day"===this.getData("ltPropSelectionType")?this.selectDate(t):this.selectWeek(t)},selectWeek:function(t){if(t)e=this.getProper(t.target);else var e=this.$node.querySelector(".lyteCalToday");var o=this.getFirstSelectableDay(e).getAttribute("data-date"),i=this.getLastSelectableDay(e).getAttribute("data-date");this.removeDayHighlights(),this.addWeekHighlight(e),this.setData("ltPropCurrentWeek",[this.convertToLang(o),this.convertToLang(i)]),this.getMethods("onWeekSelected")&&this.executeMethod("onWeekSelected",t,o,i,this)},removeDayHighlights:function(){this.removeSelectedCell(),this.removeWeekHighlight()},removeSelectedCell:function(t){var e=t||this.getSelectedCell();e&&(e.classList.remove("lyteCalSel"),e.removeAttribute("aria-selected"),e.setAttribute("tabindex","-1"))},getSelectedCell:function(){return this.$node.querySelector(".lyteCalSel")},removeWeekHighlight:function(){for(var t=this.$node.querySelectorAll(".lyteCalWeekSel"),e=this.$node.querySelectorAll(".lyteCalWeekNumberSel"),o=0;o<t.length;o++)t[o].classList.remove("lyteCalWeekSel"),t[o].removeAttribute("aria-selected");for(o=0;o<e.length;o++)e[o].classList.remove("lyteCalWeekNumberSel"),e[o].removeAttribute("aria-selected")},addWeekHighlight:function(t){var e=this.getFirstSelectableDay(t);if(this.getData("ltPropWeekNumber")){var o=t.parentElement.querySelector(".lyteWeekNumberGrid");o&&(o.classList.add("lyteCalWeekNumberSel"),o.setAttribute("aria-selected","true"))}do{e.classList.add("lyteCalWeekSel"),e.setAttribute("aria-selected","true"),e=e.nextElementSibling}while(e&&"true"===e.getAttribute("data-selectable"))},getFirstSelectableDay:function(t){for(var e=t.parentElement.children,o=0;o<e.length;o++)if("true"===e[o].getAttribute("data-selectable"))return e[o]},getLastSelectableDay:function(t){for(var e=t.parentElement.children,o=e.length-1;o>-1;o--)if("true"===e[o].getAttribute("data-selectable"))return e[o]},getCurrentWeekNumber:function(t){var e=new Date(t),o=this.getData("ltPropWeekNumCriteria"),i=1,a=this.getData("ltPropStartWeekDay"),l=0;switch(o){case 1:i=1;break;case 2:i=this.getDateOfFirstDay(t.getFullYear(),4);break;case 3:i=this.getDateOfFirstDay(t.getFullYear(),this.getData("ltPropStartWeekDay"))}var s=new Date(t.getFullYear(),0,i);this.getDateObjToStartDay(e),this.getDateObjToStartDay(s);for(var r=new Date(s);r<=e;)r.getDay()===a&&(l+=1),r.setDate(r.getDate()+1);return l},getDateOfFirstDay:function(t,e){for(var o=new Date(t,0,1),i=0;i<7&&o.getDay()!==e;i++)o.setDate(o.getDate()+1);return o.getDate()},getDateObjToStartDay:function(t){for(var e=this.getData("ltPropStartWeekDay"),o=0;o<7;o++){if(t.getDay()==e)return;t.setDate(t.getDate()-1)}},actions:{changeToMonthView:function(t){this.changeToMonthView(t),this.focusDrillDownButton()},changeToMonthViewOnKeys:function(t){var e=t.keyCode;13!==e&&32!==e||(this.changeToMonthView(t),this.focusDrillDownButton())},changeToDecadeView:function(t){this.changeToDecadeView(t),this.focusActiveCell()},changeToDecadeViewOnKeys:function(t){var e=t.keyCode;13!==e&&32!==e||(this.changeToDecadeView(t),this.focusActiveCell())},record:function(t){if(this.setData("prev",!1),t.touches.length>1)this.setData("prev",!0);else{var e=t.targetTouches[0],o={x:e.clientX,y:e.clientY},i=this.toDate().getTime();this.setData("cords",o),this.setData("start",i)}},decide:function(t){if(!this.getData("prev")){var e=this.getData("cords"),o=e.x,i=e.y,a=t.changedTouches[0],l=o-a.clientX,s=i-a.clientY,r=this.$node.querySelector(".lyteCalendarPopup").getBoundingClientRect(),n=.2*r.width,d=.15*r.height,p=this.getData("start"),h=this.toDate().getTime()-p;d>Math.abs(s)&&n<Math.abs(l)&&h<1e3&&(l<0?this.changeCurrentDate("M",-1,t):l>0&&this.changeCurrentDate("M",1,t))}},previousOnKeys:function(t,e){e.keyCode;13!==e.keyCode&&32!==e.keyCode||this.moveToPrevious(t,e)},nextOnKeys:function(t,e){var o=e.keyCode;13!==o&&32!==o||this.moveToNext(t,e)},previous:function(t,e){this.moveToPrevious(t,e)},next:function(t,e){this.moveToNext(t,e)},yearSelected:function(t){this.yearSelected(t)},monthSelected:function(t){this.monthSelected(t)},dateSelected:function(t){0===t.button&&this.makeSelection(t)},performNavigation:function(t){var e,o,i,a=t.keyCode,l=t.target;if(!this.getData("ltPropDisableNavigation"))switch(a){case 38:e="previous",i="up",o=this.getCellsToMove(e,i),this.moveBackward(t,e,o),t.preventDefault();break;case 40:e="next",i="down",o=this.getCellsToMove(e,i),this.moveForward(t,e,o),t.preventDefault();break;case 37:e="previous",o=-1,this.moveBackward(t,e,o),t.preventDefault();break;case 39:e="next",o=1,this.moveForward(t,e,o),t.preventDefault();break;case 32:case 13:if(this.isDisabledCell(l))return;this.selectHighlightedCell(t),t.preventDefault();break;case 36:e="previous",this.moveToFirstCell(t,e),t.preventDefault();break;case 35:e="next",this.moveToLastCell(t,e),t.preventDefault();break;case 33:this.previousNavigation("M",t),t.preventDefault();break;case 34:this.nextNavigation("M",t),t.preventDefault()}},today:function(t){this.revert(t),this.focusActiveCell()},todayOnKey:function(t){var e=t.keyCode;13!==e&&32!==e||(this.revert(t),this.focusActiveCell())},curWeek:function(t){this.revert(t),this.selectWeek()},curWeekOnKey:function(t){var e=t.keyCode;13!==e&&32!==e||(this.revert(t),this.selectWeek())},curMonth:function(t){this.revertToMonth(t)},curMonthOnKey:function(t){var e=t.keyCode;13!==e&&32!==e||this.revertToMonth(t)},curYear:function(t){this.revertToYear(t)},curYearOnKey:function(t){var e=t.keyCode;13!==e&&32!==e||this.revertToYear(t)}},methods:{optionSelected:function(t,e,o,i){if(this.navigationButtonPressed=!0,"M"==t){var a=this.getData("monthNames").indexOf(o);this.changeCurrentDate(t,a-this.getData("viewDate").getMonth(),e)}else"Y"==t&&this.changeCurrentDate(t,parseInt(o)-this.getData("viewDate").getFullYear(),e)},setClass:function(t,e){var o=e.childComp,i=_lyteUiUtils.getRTL(),a=i?"right":"left",l=o.querySelector(".lyteArrow");o.classList.add("lyteCalendarDropdown"),l.style[a]="20%",i&&(l.style.left="auto")}}}),Lyte.Component.register("lyte-navigator",{_template:'<template tag-name="lyte-navigator"> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;default&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}" role="navigation"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lyteDoubleBack lyteIconDoubleBack" role="button" aria-label="start"></div> <div class="lyteSingleBack lyteIconSingleBack" role="button" aria-label="previous"></div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lyteNavigatorMidPoint">{{startRecord}} <span class="lyteNavigatorText">{{ltPropMiddleText}}</span> {{endRecord}}</div> </template></template> <div class="lyteSingleFront lyteIconSingleFront" role="button" aria-label="next"></div> <div class="lyteDoubleFront lyteIconDoubleFront" role="button" aria-label="end"></div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" start-record="{{startRecord}}" end-record="{{endRecord}}"></lyte-yield> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(ltPropType,\'==\',&quot;simple&quot;)}}"><template case="true"> <div class="lyteNavigator" onclick="{{action(\'clickEvent\',event)}}" role="navigation"> <template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true"> <div class="lytepagination"> <div class="lyteNavArrow lyteDoubleBack hover" role="button" aria-label="start"></div> <div class="lyteNavArrow lyteSingleBack hover" role="button" aria-label="previous"> </div> <template is="if" value="{{expHandlers(ltPropShowOnlyIcon,\'!\')}}"><template case="true"> <div class="lytepage"> <template is="for" items="{{paginationRange}}" item="page" indexval="pageno"> <div data-value="{{page}}" class="lytesimple" role="button" aria-label="{{page}}">{{unescape(page)}}</div> </template> </div> </template></template> <div class="lyteNavArrow lyteSingleFront hover" role="button" aria-label="next"> </div> <div class="lyteNavArrow lyteDoubleFront hover" role="button" aria-label="end"></div> </div> </template><template case="false"> <lyte-yield yield-name="navigatorYield" pagination-range="{{paginationRange}}"></lyte-yield> </template></template> </div> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[5]},{type:"if",position:[5],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]},{type:"text",position:[1,2,0]},{type:"text",position:[1,4]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropPerpage","ltPropValue","ltPropRecords","ltPropMoreRecords","ltPropMiddleText","ltPropType","paginationRange","ltPropSelected","ltPropShowOnlyIcon","ltPropShowText","ltPropYield","ltPropAdjustStart","ltPropAria","ltPropAriaNavigator","ltPropAriaNext","ltPropAriaPrev","ltPropAriaHome","ltPropAriaEnd","ltPropTabIndex","ltPropDataTabIndex","ltPropEndText","totalPages","currentPage"],data:function(){return{ltPropPerpage:Lyte.attr("number",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","perPage",10)}),ltPropValue:Lyte.attr("number",{default:0}),ltPropRecords:Lyte.attr("number",{default:void 0}),ltPropMoreRecords:Lyte.attr("boolean",{default:!1}),ltPropMiddleText:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","middleText","to")}),ltPropType:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","type","default")}),paginationRange:Lyte.attr("array",{default:void 0}),ltPropSelected:Lyte.attr("number",{default:0}),ltPropShowOnlyIcon:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","showOnlyIcon",!1)}),ltPropShowText:Lyte.attr("boolean",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","showText",!1)}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropAdjustStart:Lyte.attr("boolean",{default:!1}),ltPropAria:Lyte.attr("boolean",{default:!0}),ltPropAriaNavigator:Lyte.attr("object",{default:{}}),ltPropAriaNext:Lyte.attr("object",{default:{}}),ltPropAriaPrev:Lyte.attr("object",{default:{}}),ltPropAriaHome:Lyte.attr("object",{default:{}}),ltPropAriaEnd:Lyte.attr("object",{default:{}}),ltPropTabIndex:Lyte.attr("number",{default:0}),ltPropDataTabIndex:Lyte.attr("number",{default:0}),ltPropEndText:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-navigator","endText","pages")}),totalPages:Lyte.attr("number",{default:0}),currentPage:Lyte.attr("number",{default:1})}},init:function(){"border"===this.getData("ltPropType").toLowerCase()&&this.setData("ltPropType","simple"),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node),this.settingStartEndValue()},settingStartEndValue:function(){var t=this.getData("ltPropValue"),e=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords"),i=this.getData("startRecord"),a=this.getData("endRecord"),l=t+1>o?o:t+1,s=t+e>o?o:t+e;this.getData("ltPropAdjustStart")&&"default"==this.getData("ltPropType").toLowerCase()&&i&&a&&a-i!=e-1&&a>e&&(s=a?a<e?e:a:e,l=a?a-e+1<1?1:a-e+1:1,this.getMethods("onPerpageChange")&&this.executeMethod("onPerpageChange",l-1,this.$node)),i!=l&&this.setData("startRecord",l),a!=s&&this.setData("endRecord",s)},didConnect:function(){if(this.buttonDisable.call(this),this.initalizeOrReset.call(this),"default"!=this.getData("ltPropType")){var t=this.$node.querySelectorAll("lyte-nav-arrow");this.getData("ltPropShowText")&&this.$node.querySelector(".lytepagination").classList.add("textNavLink"),4==t.length&&(this.$node.querySelector(".lyteDoubleBack").appendChild(t[0]),this.$node.querySelector(".lyteSingleBack").appendChild(t[1]),this.$node.querySelector(".lyteSingleFront").appendChild(t[2]),this.$node.querySelector(".lyteDoubleFront").appendChild(t[3])),2==t.length&&(this.$node.querySelector(".lyteDoubleBack").style.display="none",this.$node.querySelector(".lyteSingleBack").appendChild(t[0]),this.$node.querySelector(".lyteSingleFront").appendChild(t[1]),this.$node.querySelector(".lyteDoubleFront").style.display="none")}this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){var t="rtl"==getComputedStyle(this.$node).getPropertyValue("direction");$L.fastdom.mutate(function(){t&&this.$node.classList.add("lyteRTL")}.bind(this))}.bind(this))},buttonDisable:function(){if(!this.data.ltPropYield){var t=this.$node.querySelector(".lyteSingleFront").style,e=this.$node.querySelector(".lyteSingleBack").style,o=this.$node.querySelector(".lyteDoubleBack").style,i=this.$node.querySelector(".lyteDoubleFront").style;t&&(t.display=this.getMethods("onNext")?"":"none"),e&&(e.display=this.getMethods("onPrevious")?"":"none"),o&&(o.display=this.getMethods("onHome")?"":"none"),i&&(i.display=this.getMethods("onEnd")?"":"none")}},ariaObserver:function(t){this.getData("ltPropAria")&&(_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteNavigator"),this.getData("ltPropAriaNavigator")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteSingleFront"),this.getData("ltPropAriaNext")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteSingleBack"),this.getData("ltPropAriaPrev")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteDoubleFront"),this.getData("ltPropAriaEnd")||{},{}),_lyteUiUtils.setAttribute(this.$node.querySelector(".lyteDoubleBack"),this.getData("ltPropAriaHome")||{},{}))}.observes("ltPropAriaNavigator","ltPropAriaNext","ltPropAriaPrev","ltPropAriaHome","ltPropAriaEnd").on("didConnect"),paginationObs:function(){"simple"===this.getData("ltPropType").toLowerCase()&&this.pagination()}.observes("ltPropSelected","ltPropPerpage","ltPropRecords"),checkButtonObs:function(){this.initalizeOrReset.call(this)}.observes("ltPropPerpage","ltPropValue","ltPropRecords","ltPropMoreRecords"),initalizeOrReset:function(){this.checkButton(),this.setInitialValue()},checkButton:function(){var t=this.getData("ltPropValue"),e=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords"),i=this.$node.querySelector(".lyteSingleFront"),a=this.$node.querySelector(".lyteSingleBack"),l=this.$node.querySelector(".lyteDoubleBack"),s=this.$node.querySelector(".lyteDoubleFront");$L.fastdom.mutate(function(){(l&&t<=0?(l.classList.add("lyteDisabled"),this.setAriaDisabled(l)):l&&(l.classList.remove("lyteDisabled"),this.removeAriaDisabled(l)),a&&t<=0?(a.classList.add("lyteDisabled"),this.setAriaDisabled(a)):a&&(a.classList.remove("lyteDisabled"),this.removeAriaDisabled(a)),i&&t+e>=o&&!this.getData("ltPropMoreRecords")?(i.classList.add("lyteDisabled"),this.setAriaDisabled(i)):i&&(i.classList.remove("lyteDisabled"),this.removeAriaDisabled(i)),s&&t+e>=o?(s.classList.add("lyteDisabled"),this.setAriaDisabled(s)):s&&(s.classList.remove("lyteDisabled"),this.removeAriaDisabled(s)),"simple"!=this.getData("ltPropType").toLowerCase()||this.getMethods("onSelect")||this.getData("ltPropYield"))||this.$node.querySelector(".lytepage").classList.add("lyteDisabled")}.bind(this))},setInitialValue:function(){if(""!==this.getData("ltPropType").toLowerCase()&&this.settingStartEndValue(),"simple"===this.getData("ltPropType").toLowerCase()){this.setData("ltPropSelected",Math.ceil(this.getData("startRecord")/this.getData("ltPropPerpage")));for(var t=this.$node.querySelectorAll('[data-value="..."]'),e=0;e<t.length;e++)t[e].classList.add("lyteDisabled"),t[e].classList.add("dots3"),this.setAriaDisabled(t[e])}},setAriaDisabled:function(t){t.setAttribute("aria-disabled",!0)},removeAriaDisabled:function(t){t.removeAttribute("aria-disabled")},activeAdd:function(){if("default"!=this.getData("ltPropType")&&!this.getData("ltPropShowOnlyIcon")){var t=this.$node.querySelector('[data-value="'+this.getData("ltPropSelected")+'"]');null!=t&&(t.classList.add("lyteActiveAdd"),this.getData("ltPropAria")&&(t.tabIndex=this.getData("ltPropTabIndex"),t.setAttribute("data-tabindex",this.getData("ltPropDataTabIndex"))))}},onForward:function(t){var e=this.getData("ltPropValue"),o=this.getData("ltPropPerpage"),i=this.getData("ltPropRecords"),a=(e+=o)>i?i:e;this.getMethods("onNext")&&this.executeMethod("onNext",a,this.$node,t)},onBackward:function(t){var e=parseInt(this.getData("ltPropValue")),o=(e-=parseInt(this.getData("ltPropPerpage")))<0?0:e;this.getMethods("onPrevious")&&this.executeMethod("onPrevious",o,this.$node,t)},goFirst:function(t){if(this.setData("ltPropValue",0,this.$node,t),this.getMethods("onHome")){this.executeMethod("onHome",this.getData("ltPropValue"),this.$node,t);var e=this.$node.querySelector(".lyteSingleFront");e&&(e.classList.remove("lyteDisabled"),this.removeAriaDisabled(e))}"default"!=this.getData("ltPropType")&&(this.getData("ltPropSelected")>=1&&this.setData("ltPropSelected",1),this.activeAdd())},goLast:function(t){this.getData("ltPropValue");var e=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords"),i=Math.floor(o/e)*e>=o?o-e:Math.floor(o/e)*e;this.getMethods("onEnd")&&this.executeMethod("onEnd",i,this.$node,t)},onSelect:function(t){this.getData("ltPropValue");var e=this.getData("ltPropPerpage"),o=this.getData("ltPropRecords");var i=parseInt(t.target.getAttribute("data-value"))*e-e>=o?o-e:parseInt(t.target.getAttribute("data-value"))*e-e;this.getMethods("onSelect")&&this.executeMethod("onSelect",i,this.$node,t)},pagination:function(){var t,e,o=this.getData("ltPropSelected"),i=this.getData("ltPropRecords"),a=o-1,l=o+1+1,s=[],r=[];if((e=Math.ceil(i/this.getData("ltPropPerpage")))>5){1==o&&o!=e&&(l+=1),o==e&&1!=o&&(a-=1);for(var n=1;n<e;n++)1==n||n==e||n>=a&&n<l?s.push(n):n>1&&n<a?n=a-1:n>=l&&n<e&&(n=e-1);s.push(e);for(n=0;n<s.length;n++){var d=s[n];t&&d-t!=1&&r.push("..."),r.push(d),t=d}}else for(n=1;n<=e;n++)r.push(n);this.setData("paginationRange",r),this.activeAdd()},methods:{},actions:{clickEvent:function(t){var e=t.target;if(e.getAttribute("data-value"))"..."!=e.getAttribute("data-value")&&this.onSelect(t);else{for(;e&&(!e.className||-1==e.className.indexOf("lyteNavigator")&&-1==e.className.indexOf("lyteDoubleFront")&&-1==e.className.indexOf("lyteSingleFront")&&-1==e.className.indexOf("lyteDoubleBack")&&-1==e.className.indexOf("lyteSingleBack"));)e=e.parentNode;e&&-1!=e.className.indexOf("lyteDoubleFront")?this.goLast(t):e&&-1!=e.className.indexOf("lyteSingleFront")?this.onForward(t):e&&-1!=e.className.indexOf("lyteDoubleBack")?this.goFirst(t):e&&-1!=e.className.indexOf("lyteSingleBack")?this.onBackward(t):t.preventDefault()}}}}),Lyte.Component.register("lyte-messagebox",{_template:'<template tag-name="lyte-messagebox"> <template is="if" value="{{ltPropShow}}"> <template case="true"><lyte-wormhole style="visibility: hidden" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}" on-append="{{method(&quot;afterWormholeAppend&quot;)}}" lt-prop-show="{{ltPropShow}}" lt-prop-focus-on-close="{{ltPropFocusOnClose}}"> <template is="registerYield" yield-name="lyte-content"> <div class="{{lyteUiMsgBoxConcatClass(ltPropClass,ltPropType,\'MessageIcon\',\'lyteMessageBox\')}} lytePopupZI"> <template is="if" value="{{ltPropType}}"><template case="true"> <span class="lyteMessageBoxSymbol"></span> </template></template> <template is="if" value="{{ltPropYield}}"><template case="true"> <span class="lyteMessageBoxContent" aria-live="polite" role="{{ltPropAriaRole}}"> <lyte-yield yield-name="messageboxYield"></lyte-yield> </span> </template><template case="false"> <template is="if" value="{{lyteUiIfEquals(ltPropMessage,\'\')}}"> <template case="false"><div> <span class="lyteMessageBoxContent" aria-live="polite" role="{{ltPropAriaRole}}">{{ltPropMessage}}</span> </div></template> </template> </template></template> <template is="if" value="{{ltPropShowCloseButton}}"><template case="true"><span class="lyteMessageBoxClose" onclick="{{action(\'closeMessageBox\')}}"></span></template></template> </div> </template> </lyte-wormhole></template> </template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"registerYield",position:[0,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{false:{dynamicNodes:[{type:"attr",position:[0,1]},{type:"text",position:[0,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[0]}]}},default:{}}],_observedAttributes:["ltPropType","ltPropShow","ltPropMessage","ltPropDuration","ltPropOffset","ltPropTransition","ltPropYield","ltPropClass","ltPropCloseManually","ltPropAriaRole","onResizeBoolean","ltPropShowCloseButton","ltPropFocusOnClose"],init:function(){var t=this;this.$node.alignMessageBox=function(){t.setData("onResizeBoolean",!0),t.computeOffsetImpl()}},data:function(){return{ltPropType:Lyte.attr("string",{default:"success"}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropMessage:Lyte.attr("string",{default:""}),ltPropDuration:Lyte.attr("string",{default:"2000"}),ltPropOffset:Lyte.attr("object",{default:null}),ltPropTransition:Lyte.attr("object",{default:{animation:"fadeIn",duration:"0.2s"}}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropClass:Lyte.attr("string",{default:""}),ltPropCloseManually:Lyte.attr("boolean",{default:!1}),ltPropAriaRole:Lyte.attr("string",{default:"status"}),onResizeBoolean:Lyte.attr("boolean",{default:!1}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropFocusOnClose:Lyte.attr("boolean",{default:!1})}},setDuration:function(){var t=this.$node.ltProp("duration");""!=t&&this.setData("ltPropDuration",t)}.observes("ltPropDuration"),computeOffsetImpl:function(){var t=this.actualMessageDiv;this.fastdomfn1=$L.fastdom.measure((function(){delete this.fastdomfn1;var e=t.getBoundingClientRect(),o=Object.assign({},this.$node.ltProp("offset")),i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(this.$node.ltProp("offset")){if("center"===o.left||"center"===o.right||null==o.left||""==o.left){var l=(i-e.width)/2;l<0&&(l=20),o.left=l+"px"}if("center"===o.top||"center"===o.bottom){var s=(a-e.height)/2;s<0&&(s=20),o.top=s+"px"}o.right&&"center"!==o.right&&(o.right.indexOf("%")>-1?o.left=i-(e.width+i/parseFloat(o.right))+"px":o.left=i-(e.width+parseFloat(o.right))+"px"),o.bottom&&"center"!==o.bottom&&(o.bottom.indexOf("%")>-1?o.top=a-(e.height+a/parseFloat(o.bottom))+"px":o.top=a-(e.height+parseFloat(o.bottom))+"px"),o.top||(o.top=20),this.fastdomfn2=$L.fastdom.mutate((function(){delete this.fastdomfn2,t.style.left=parseFloat(o.left)+"px","slideFromTop"===this.getData("ltPropTransition").animation?(t.style.top=-1*e.height+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",t.style.transform="translate(0px,"+(parseFloat(o.top)+e.height)+"px)"):"slideFromBottom"===this.getData("ltPropTransition").animation?(t.style.top=window.innerHeight+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",t.style.transform="translate(0px,"+(parseFloat(o.top)-window.innerHeight)+"px)"):(this.actualMessageDiv.style.visibility="visible",t.style.top=parseFloat(o.top)+"px"),this.getData("onResizeBoolean")||this.showMessagebox()}),this)}else{var r;r=(document.body.clientWidth-e.width)/2,this.fastdomfn3=$L.fastdom.mutate((function(){delete this.fastdomfn3,t.style.left=parseFloat(r)+"px","slideFromTop"===this.getData("ltPropTransition").animation?(t.style.top=-1*e.height+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",t.style.transform="translate(0px,"+(e.height+20)+"px)"):"slideFromBottom"===this.getData("ltPropTransition").animation?(t.style.top=window.innerHeight+"px",this.childComp.style.visibility="visible",this.actualMessageDiv.style.visibility="visible",t.style.transform="translate(0px,"+(e.height+20-window.innerHeight)+"px)"):(this.actualMessageDiv.style.visibility="visible",t.style.top="20px"),this.getData("onResizeBoolean")||this.showMessagebox()}),this)}}),this)},closeMessageBoxFn:function(t){this.setData("onResizeBoolean",!1),this.timeOutId&&(clearInterval(this.timeOutId),this.timeOutId=!1),this.childComp&&document.contains(this.childComp)&&this.childComp.remove(),delete this.actualMessageDiv,delete this.childComp,!t&&this.getMethods("onClose")&&this.executeMethod("onClose",this),window.removeEventListener("resize",this.$node.alignMessageBox)},clearFastdom:function(){this.fastdomfn1&&($L.fastdom.clear(this.fastdomfn1),delete this.fastdomfn1),this.fastdomfn2&&($L.fastdom.clear(this.fastdomfn2),delete this.fastdomfn2),this.fastdomfn3&&($L.fastdom.clear(this.fastdomfn3),delete this.fastdomfn3)},showToggled:function(){this.actualMessageDiv&&_lyteUiUtils.dispatchEvent("lyteMessageboxBeforeOpen",this.actualMessageDiv),this.$node.ltProp("show")||this.closeMessageBoxFn()}.observes("ltPropShow").on("didConnect"),showMessagebox:function(){var t=parseInt(this.getData("ltPropDuration")),e=this;this.timeOutId=setInterval((function(){clearInterval(e.timeOutId),e.$node&&!e.getData("ltPropCloseManually")&&("slideFromTop"===e.getData("ltPropTransition").animation||"slideFromBottom"===e.getData("ltPropTransition").animation?(_lyteUiUtils.dispatchEvent("lyteMessageboxBeforeClose",e.actualMessageDiv),e.actualMessageDiv.style.transform="",setTimeout((function(){e.$node&&e.setData("ltPropShow",!1)}),500)):(_lyteUiUtils.dispatchEvent("lyteMessageboxBeforeClose",e.actualMessageDiv),e.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),e.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),setTimeout((function(){e.$node&&e.setData("ltPropShow",!1)}),500)),e.timeOutId=!1)}),t),window.addEventListener("resize",this.$node.alignMessageBox)},didDestroy:function(){this.event&&delete this.event,this.clearFastdom(),this.actualMessageDiv&&_lyteUiUtils.dispatchEvent("lyteMessageboxBeforeClose",this.actualMessageDiv),(this.timeOutId||this.getData("ltPropShow"))&&(clearInterval(this.timeOutId),"slideFromTop"===this.getData("ltPropTransition").animation&&this.actualMessageDiv||"slideFromTop"!=this.getData("ltPropTransition").animation&&this.actualMessageDiv?(this.actualMessageDiv.style.transform="",this.setData("ltPropShow",!1)):(this.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),this.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),this.setData("ltPropShow",!1)),this.timeOutId=!1,this.closeMessageBoxFn(!0)),window.removeEventListener("resize",this.$node.alignMessageBox)},actions:{closeMessageBox:function(){clearInterval(this.timeOutId),this.timeOutId=!1;var t=this;t.actualMessageDiv&&_lyteUiUtils.dispatchEvent("lyteMessageboxBeforeClose",t.actualMessageDiv),"slideFromTop"===t.getData("ltPropTransition").animation||"slideFromBottom"===t.getData("ltPropTransition").animation?(t.actualMessageDiv.style.transform="",setTimeout((function(){t.$node&&t.setData("ltPropShow",!1)}),200)):(t.actualMessageDiv.classList.remove("lyteMessageBoxFadeIn"),t.actualMessageDiv.classList.add("lyteMessageBoxFadeOut"),setTimeout((function(){t.$node&&t.setData("ltPropShow",!1)}),500)),window.removeEventListener("resize",this.$node.alignMessageBox)}},methods:{onBeforeShow:function(){},onShow:function(){},beforeWormholeAppend:function(t){this.childComp=t,this.actualMessageDiv=this.childComp.querySelector(".lyteMessageBox"),this.actualMessageDiv.style.position="fixed"},afterWormholeAppend:function(t){var e=100*parseFloat(this.getData("ltPropTransition").duration),o=this;"slideFromTop"===this.getData("ltPropTransition").animation?(this.actualMessageDiv.classList.add("lyteMessageBoxSlideFromTop"),this.computeOffsetImpl(),setTimeout((function(){o.getMethods("onShow")&&o.executeMethod("onShow",o.actualMessageDiv)}),e)):"slideFromBottom"===this.getData("ltPropTransition").animation?(this.actualMessageDiv.classList.add("lyteMessageBoxSlideFromBottom"),this.computeOffsetImpl(),setTimeout((function(){o.getMethods("onShow")&&o.executeMethod("onShow",o.actualMessageDiv)}),e)):(this.computeOffsetImpl(),this.actualMessageDiv.classList.add("lyteMessageBoxFadeIn"),setTimeout((function(){o.getMethods("onShow")&&o.executeMethod("onShow",o.actualMessageDiv)}),e))}}}),Lyte.Component.register("lyte-tooltip",{_template:'<template tag-name="lyte-tooltip"> </template>',_dynamicNodes:[],_observedAttributes:["ltPropId","ltPropClass","ltPropKeepAlive","ltPropTooltipConfig","ltPropIgnoreClass","ltPropAria","tooltips"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(t,e,o){if(this._dir&&"top"!=t&&"clientY"!=t){if(e)return"right"==t?o-e.left:"clientX"==t?o-e.clientX:o-e.right;if("left"==t)return"right";if("right"==t)return"left"}return e?e[t]:t},data:function(){var t=_lyteUiUtils.getDefault("lyte-tooltip");return{ltPropId:Lyte.attr("string",{default:t.id||""}),ltPropClass:Lyte.attr("string",{default:t.class||""}),ltPropKeepAlive:Lyte.attr("boolean",{default:t.keepAlive||!1}),ltPropTooltipConfig:Lyte.attr("object",{default:t.tooltipConfig||{}}),ltPropIgnoreClass:Lyte.attr("string",{default:t.ignoreClass||"lyteTooltipIgnore"}),ltPropAria:Lyte.attr("boolean",{default:t.aria||!1}),tooltips:Lyte.attr("object",{default:{}})}},focusev:function(t){$L.fastdom.mutate(function(){this.$node.trigger("focus"==t.type?this.get_target(t):document.body)}.bind(this))},didConnect:function(){this._dir=_lyteUiUtils.getRTL(),Array.from(document.body.getElementsByTagName("lyte-tooltip")).forEach(function(t){t!=this.$node&&t.remove()}.bind(this)),this._mousemove=this.mousemove.bind(this),this._mousedown=this.mousedown.bind(this),this._mouseup=this.mouseup.bind(this),this._keydown=this.keydown.bind(this),this._toolscroll=this.tooltipScroll.bind(this),document.addEventListener("mousemove",this._mousemove,!0),window.addEventListener("scroll",this._toolscroll,!0),document.addEventListener("keydown",this._keydown,!0),document.addEventListener("mousedown",this._mousedown,!0),document.addEventListener("touchstart",this._mousedown),this.data.ltPropAria&&this.bind_aria(),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),this.$node.trigger=function(t){this.mousemove({target:t||document.body})}.bind(this)},aria_obs:function(t){t.newValue?this.bind_aria():this.remove_aria()}.observes("ltPropAria"),bind_aria:function(){this._focusev=this.focusev.bind(this),["focus","blur"].forEach(function(t){document.addEventListener(t,this._focusev,!0)}.bind(this))},remove_aria:function(){["focus","blur"].forEach(function(t){document.removeEventListener(t,this._focusev,!0)}.bind(this))},tooltipScroll:function(t){var e=this.data.tooltips;for(var o in e)e[o].classList.add("lyteTooltipHidden")},mousedown:function(t){if(2!=t.button){this._mousedownFlag=!0;var e=this.get_target(t),o=$L(e),i=/touch/i.test(t.type);if(!(i&&t.touches.length>1)){if(o.hasClass("lyteSliderHandler")&&(delete this.prevTooltipNode,this._slider=!0),o.hasClass("lyteTooltip")){var a=e.nodeName1;this.hover_process(a),this.closeAllTooltip(a,!0)}else this.closeAllTooltip(void 0,!0);e.closest('[draggable=""],[draggable="true"]')?(delete this._mousedownFlag,this.__dragging=!0):(delete this.__dragging,document.addEventListener(i?"touchend":"mouseup",this._mouseup,!0))}}},mouseup:function(t){if(delete this._mousedownFlag,document.removeEventListener(t.type,this._mouseup,!0),this._slider){delete this._slider;var e=this.get_target(t);$L(e).hasClass("lyteSliderHandler")&&this.mousemove({target:e})}},keydown:function(t){delete this.prevTooltipNode,this.closeAllTooltip()},tooltipOpenCallback:function(t,e){t.onTooltipShow&&t.onTooltipShow.apply(this,arguments),this.getMethods("onTooltipShow")&&this.executeMethod("onTooltipShow",t,e,t.tooltip)},tooltipCloseCallback:function(t){t.onTooltipHide&&t.onTooltipHide.apply(this,arguments),this.getMethods("onTooltipHide")&&this.executeMethod("onTooltipHide",t)},didDestroy:function(){var t="removeEventListener",e=document;window[t]("scroll",this._toolscroll,!0),e[t]("mousemove",this._mousemove,!0),e[t]("mousedown",this._mousedown,!0),e[t]("touchstart",this._mousedown),e[t]("keydown",this._keydown,!0),this.data.ltPropAria&&this.remove_aria();var o=this.data.tooltips;for(var i in o){var a=o[i];delete a.nodeName1.tooltipSpan,delete a.nodeName1.tooltip,a.parentNode&&e.body.removeChild(a)}delete this.$node.trigger,["_toolscroll","_mousedown","_keydown","_mousemove","_focusev","__reuse"].forEach(function(t){delete this[t]}.bind(this)),this.data.tooltips=[],this.data.tooltips={}},propertySetting:function(t){var e=t.getAttribute("lt-prop-tooltip-config")||"{}",o=t.tooltip.config;e=JSON.parse(e);for(var i in e)o[i]=e[i]},createTooltip:function(t,e,o){if(o?this.followcursor(t,e):this.nonFollowcursor(t,e),!this.getData("ltPropKeepAlive")){var i=e.nodeName1.tooltip;1!=i.config.keeptooltip&&"true"!=i.config.keeptooltip&&(i.maxdisp=setTimeout(this.removeTooltip.bind(this,e),i.config.maxdisplaytime))}},followcursor:function(t,e){e.parentNode&&(e._callbackHandled||(this.tooltipOpenCallback(e.nodeName1,e),e._callbackHandled=!0),e.classList.contains("lyteTooltipHidden")?(e.classList.remove("lyteTooltipHidden"),$L.fastdom.measure(this._followcursor.bind(this,t,e))):this._followcursor(t,e))},_followcursor:function(t,e){if(this.data.tooltips[e._random]){var o,i=e.getBoundingClientRect(),a=e.nodeName1.getBoundingClientRect(),l=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),s=window.pageYOffset||document.documentElement.scrollTop,r=window.innerWidth,n=window.innerHeight,d=Math.min(20,parseInt(e.nodeName1.tooltip.config.margin)),p=this.rtlfunc.call(this,"clientX",t,r),h=t.clientY+s+5+d;if(p+i.width>r)if(p-i.width>0)p-=i.width;else{var c=r-(this.rtlfunc("left",a,r)+a.width/2),u=r-c;p=c>i.width/2&&u>i.width/2?u-.5*i.width:Math.max(0,r-i.width),o=!0}e.style[this.rtlfunc.call(this,"left")]=p+l+"px",e.style.top=h+"px",o&&$L.fastdom.measure(function(){this.data.tooltips[e._random]&&(i=e.getBoundingClientRect()).bottom>n&&t.clientY>n-t.clientY&&(e.style.top=t.clientY-i.height-d-5+s+"px")}.bind(this))}},createsupp:function(t){var e=document.createElement("span");return e.classList.add("lyteTooltipInnerSpan"),t.classList.add("lyteInnerToolAdded"),t.appendChild(e)},rightalign:function(t,e,o,i,a,l,s,r,n,d,p,h,c){if(t+e<o+i.width)return a.classList.remove(n),l||this.nonFollowcursor(s,a,d,!0),!0;if(o<e){if(c)this.createsupp(a).style[r]=.75*h-p+"px";a.style[r]=0}else a.style[r]=o+"px"},refresh:function(t,e){var o=e.nodeName1.tooltip;o.config;e.textContent=o.title=e.nodeName1.getAttribute("lt-prop-title"),this.clear_time(o),this.createTooltip(t,e)},clear_time:function(t,e){(e||["maxdisp","settime","bodyTimeout"]).forEach((function(e){clearTimeout(t[e]),delete t[e]}))},nonFollowcursor:function(t,e,o,i){var a,l="callout"==e.nodeName1.tooltip.config.appearance;e.classList.remove("lyteTooltipHidden"),a=(o=o||e.nodeName1.tooltip.config.position||(/focus/i.test(t.type||"focus")?"bottom":""))||"bottom",l&&e.classList.add("lyte"+a[0].toUpperCase()+a.slice(1)),e._callbackHandled||(this.tooltipOpenCallback(e.nodeName1,e),e._callbackHandled=!0),$L.fastdom.measure(function(){if((e.nodeName1||{}).tooltip){var a,s,r=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),n=window.pageYOffset||document.documentElement.scrollTop,d=window.innerWidth,p=window.innerHeight,h=e.getBoundingClientRect(),c=e.nodeName1.getBoundingClientRect(),u=this.rtlfunc("left",c,d)+r,y=c.top+n,m=e.nodeName1.tooltip.config,f=Math.min(parseInt(m.margin),20),g=e.offsetWidth,v=e.offsetHeight,D=c.width,b=c.height,P=this.rtlfunc("left"),w=getComputedStyle(e),C=/content-box/.test(w.boxSizing),L=C?parseFloat(w.paddingLeft):0,x=C?parseFloat(w.paddingRight):0,S=(C&&parseFloat(w.paddingTop),C&&parseFloat(w.paddingBottom),$L(e));switch(l?(s=getComputedStyle(e,":before"),a=parseFloat(s.getPropertyValue("width"))/2*1.414,!isNaN(a)&&a||(a=parseFloat(getComputedStyle(e,"left"==o?":before":":after").getPropertyValue("border-left-width")))):a=0,o.toLowerCase()){case"right":var T=(u+=a)+D+f;if(e.style.top=y+b/2-v/2+"px",d+r<T+h.width){if(!i&&d-(u+D-r-a)<u-a-r){e.classList.remove("lyteRight"),this.nonFollowcursor.call(this,t,e,"left",!0);break}e.style[P]=T+"px",e.style.width=d-T-L-x+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){e.style.top=y+b/2-e.offsetHeight/2+"px"}))}))}else e.style[P]=T+"px";break;case"left":T=(u-=a)-f-g;if(e.style.top=y+b/2-v/2+"px",T<r){if(!i&&u+a-r<d-(u+a-r+D)){e.classList.remove("lyteLeft"),this.nonFollowcursor.call(this,t,e,"right",!0);break}e.style[P]="0px",e.style.width=u-r-L-x+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){e.style.top=y+b/2-e.offsetHeight/2+"px"}))}))}else e.style[P]=T+"px";break;case"bottom":T=u+D/2-g/2;if(n+p<(M=(y+=a)+b+f)+v&&(e.classList.remove("lyteBottom"),!i)){this.nonFollowcursor.call(this,t,e,"top",!0);break}T=this.horicheck(T,r,d,h,e,c,P,a,l),e.style[P]=T+"px",e.style.top=M+"px";break;case"top":T=u+D/2-g/2;if((M=(y-=a)-f-v)<n&&(e.classList.remove("lyteTop"),!i)){this.nonFollowcursor.call(this,t,e,"bottom",!0);break}T=this.horicheck(T,r,d,h,e,c,P,a,l),e.style[P]=T+"px",$L.fastdom.mutate((function(){$L.fastdom.measure((function(){e.style.top=y-f-e.offsetHeight+"px"}))}));break;case"bottomright":y+=a;T=u+.75*D-(l?parseFloat(s[P])+a:.2*g);var M=y+b+f;if(this.rightalign(d,r,T,h,e,i,t,P,"lyteBottomright","bottomleft",a,D,l)){S.removeClass("lyteBottomright");break}if(p+n<M+h.height){S.removeClass("lyteBottomright"),i?S.addClass("lyteTopright").css("top",y-a-v-f):this.nonFollowcursor(t,e,"topright",!0);break}e.style.top=M+"px";break;case"topright":y-=a;T=u+.75*D-(l?parseFloat(s[P])+a:.2*g),M=y-v-f;if(this.rightalign(d,r,T,h,e,i,t,P,"lyteTopright","topleft",a,D,l)){S.removeClass("lyteTopright");break}M<n?(S.removeClass("lyteTopright"),i?S.addClass("lyteBottomright").css("top",y+2*a+b+f):this.nonFollowcursor(t,e,"bottomright",!0)):S.css("top",M);break;case"bottomleft":y+=a;T=u+.25*D-(l?parseFloat(s[P]):.8*g)+"px",M=y+b+f+"px";if(parseInt(T)<r){e.classList.remove("lyteBottomleft"),i||this.nonFollowcursor.call(this,t,e,"bottomright",!0);break}if(e.style[P]=T,p+n<parseInt(M)+v){S.removeClass("lyteBottomleft"),i?S.addClass("lyteTopleft").css("top",y-a-v-f):this.nonFollowcursor(t,e,"topleft",!0);break}e.style.top=M;break;case"topleft":y-=a;T=u+.25*D-(l?parseFloat(s[P]):.8*g)+"px",M=y-v-f+"px";if(parseInt(T)<r){S.removeClass("lyteTopleft"),i?S.addClass("lyteTopright").css(P,u+.75*D-(l?parseFloat(s[P])+a:.2*g)):this.nonFollowcursor(t,e,"topright",!0);break}if(e.style[P]=T,parseInt(M)<n){S.removeClass("lyteTopleft"),i?S.addClass("lyteBottomleft").css("top",y+b+f+2*a):this.nonFollowcursor(t,e,"bottomleft",!0);break}S.css("top",M);break;default:var A=a;T=this.rtlfunc.call(this,"clientX",t,d)-g/2+r;if(p+n<(M=y+A+b+f)+v&&(e.classList.remove("lyteBottom"),!i)){this.nonFollowcursor.call(this,t,e,"top",!0);break}T=this.horicheck(T,r,d,h,e,c,P,a,l),e.style[P]=T+"px",e.style.top=M+"px"}e.style[this.rtlfunc("right")]="auto";var F=m.startClass,_=m.endClass,B=m.animationClass;if(F){S=$L(e).addClass(F);window.requestAnimationFrame((function(){S.addClass(B),window.requestAnimationFrame((function(){window.requestAnimationFrame((function(){S.addClass(_)}))}))}))}}}.bind(this))},horicheck:function(t,e,o,i,a,l,s,r,n){var d,p;if(t<e?(t=e,d=!0):o+e<t+i.width&&(t=o-i.width+e,p=!0),(d||p)&&n){var h=this.createsupp(a);this.rtlfunc("left",l,o);if(d){var c=this.rtlfunc("left",l,o);h.style[s]=(Math.min(i.width,l.width)+Math.min(c,0))/2+Math.max(0,c)+"px"}else{var u=o-this.rtlfunc("right",l,o);h.style[s]=i.width-(Math.max(0,u)+(Math.min(i.width,l.width)+Math.min(u,0))/2)+"px"}}return t},closeAllTooltip:function(t,e){var o=this.data.tooltips;for(var i in o){var a=o[i];if(a.nodeName1!=t){var l=a.nodeName1.tooltip;if(!l){this.removeTooltip(a);continue}if(e&&!l.config.hideOnClick)continue;null==l.bodyTimeout&&(l.bodyTimeout=setTimeout(this.removeTooltip.bind(this),l.config.hidedelay,a))}}},removeTooltip:function(t){var e=t.parentNode;if(e){var o=t.nodeName1;if(!o)return;var i=o.tooltip||{},a=i.config||{},l=a.endClass||"",s=a.reuse,r=function(){if(s){var o=t.style;o.opacity="0",o.pointerEvents="none"}else e.removeChild(t);clearTimeout(t.__animetime),$L(t).off("transitionend")};this.clear_time(i),this.prevTooltipNode==o&&delete this.prevTooltipNode,delete o.tooltipSpan,delete o.tooltip,delete t.nodeName1,a.aria&&o.setAttribute("aria-expanded","false"),l?($L(t).removeClass(l).on("transitionend",r),t.__animetime=setTimeout(r,a.maxAnimationLimit)):r(),this.tooltipCloseCallback(o),delete this.data.tooltips[t._random]}},hover_process:function(t){var e=(t||{}).tooltip;e&&this.clear_time(e)},get_target:function(t){var e=t.target.correspondingElement||t.target,o=e.shadowRoot;if(document.contains(e)||(e=window.document.documentElement),o&&t.type)try{return o.elementFromPoint(t.clientX,t.clientY)}catch(t){return e}return e},mousemove:function(t){if(!this._mousedownFlag){if(this.__dragging){if(t.buttons)return;delete this.__dragging}for(var e=this.get_target(t);e&&"BODY"!=e.tagName&&e!=document&&"HTML"!=e.tagName;){var o=e.getAttribute?e.getAttribute("lt-prop-title"):"",i=$L(e);if(i.hasClass("lyteTooltip")){var a=e.nodeName1||{};if(((a.tooltip||{}).config||{}).hidedelay)return this.hover_process(a),this.closeAllTooltip(a)}if(i.hasClass(this.data.ltPropIgnoreClass)){delete this.prevTooltipNode,e=document.body;break}if(o){e.getAttribute("title")&&e.removeAttribute("title"),e.tooltip=e.tooltip||{},e.tooltip.config=$L.extend({reuse:!1,position:"",appearance:"callout",margin:0,showdelay:0,hidedelay:0,maxdisplaytime:5e3,keeptooltip:!1,aria:!1,hideOnClick:!0,startClass:"",endClass:"",animationClass:"",maxAnimationLimit:2e3},this.data.ltPropTooltipConfig||{}),e.tooltip.title=o,this.propertySetting(e);var l=e.tooltip,s=l.config,r=s.reuse;if(this.prevTooltipNode==e||l.tooltipSpan&&!r)if("followcursor"==l.config.position&&this.prevTooltipNode==e&&l.tooltipSpan){p=l.tooltipSpan;$L(p).css({opacity:"",pointerEvents:""}),this.clear_time(l,["maxdisp","settime"]),p._callbackHandled?this.followcursor(t,p):l.settime=setTimeout(this.createTooltip.bind(this),l.config.showdelay,t,p,!0)}else l.tooltipSpan&&"none"==l.tooltipSpan.style.display?($L(l.tooltipSpan).css({display:"",opacity:"",pointerEvents:""}),this.clear_time(l),l.settime=setTimeout(this.createTooltip.bind(this),l.config.showdelay,t,l.tooltipSpan,"followcursor"==l.config.position)):this.prevTooltipNode=e;else{this.prevTooltipNode=e;var n=this.__reuse,d=r&&n,p=d?n:document.createElement("span"),h=$L(p),c=i.attr("lt-prop-tooltip-class"),u=s.id||this.getData("ltPropId"),y=this.getData("ltPropClass"),m=Date.now()+"lytetooltip";if(n&&this.removeTooltip(p),this.data.tooltips[m]=p,p._random=m,n?h.attr("class","lyteTooltip"):r&&(this.__reuse=p),u&&h.attr("id",u),y&&h.addClass(y),!d&&h.addClass("lyteTooltip lyteTooltipHidden"),this._dir&&h.addClass("lyteRTL"),h.attr("style",i.attr("lt-prop-tooltip-style")||""),p.style.borderColor||(p.style.borderColor=p.style.backgroundColor),"callout"==l.config.appearance&&"followcursor"!=l.config.position&&(h.addClass("lyteTooltipCallout"),l.config.hideOnClick||(l.refresh=this.refresh.bind(this))),l.tooltipSpan=p,p.nodeName1=e,h.addClass(c||""),l.config.aria){h.attr({role:"tooltip","aria-hidden":"false"}),e.setAttribute("aria-expanded","true")}l.settime=setTimeout(this.createTooltip.bind(this),l.config.showdelay,t,p,"followcursor"==l.config.position),p.textContent=l.title,!d&&_lyteUiUtils.appendChild(document.body,p,{referenceNode:this.$node})}this.closeAllTooltip(e);break}e=e.parentNode}(!e||-1!=["BODY","HTML"].indexOf(e.tagName)&&this.prevTooltipNode!=e)&&(delete this.prevTooltipNode,this.closeAllTooltip())}}}),function(){var t=document,e=function(){t.querySelector("lyte-tooltip")||Lyte.Component.render("lyte-tooltip",{},document.body)};/complete|interactive/i.test(t.readyState)?e():t.addEventListener("DOMContentLoaded",e)}(),Lyte.Component.register("lyte-keyboard-navigator",{_template:'<template tag-name="lyte-keyboard-navigator"> <lyte-yield yield-name="keyboard-navigator-content"></lyte-yield> </template>',_dynamicNodes:[{type:"insertYield",position:[1]}],_observedAttributes:["ltPropParent","ltPropHighlighted","ltPropSelected","ltPropChildren","ltPropSkipElements","ltPropIfCycle","ltPropOptions","ltPropOrientation","ltPropScope","ltPropChangeScope","ltPropTriggerClick","customDropdownSel","customDropdownClass","dropdown","ltPropAriaExpand","ltPropIgnoreMouseMove","parentObj"],data:function(){return{ltPropParent:Lyte.attr("string",{default:void 0}),ltPropHighlighted:Lyte.attr("string",{default:void 0}),ltPropSelected:Lyte.attr("string",{default:void 0}),ltPropChildren:Lyte.attr("string",{default:void 0}),ltPropSkipElements:Lyte.attr("string",{default:void 0}),ltPropIfCycle:Lyte.attr("boolean",{default:!1}),ltPropOptions:Lyte.attr("array",{default:void 0}),ltPropOrientation:Lyte.attr("string",{default:"vertical"}),ltPropScope:Lyte.attr("string",{default:void 0}),ltPropChangeScope:Lyte.attr("boolean",{default:!1}),ltPropTriggerClick:Lyte.attr("boolean",{default:!1}),customDropdownSel:Lyte.attr("string",{default:""}),customDropdownClass:Lyte.attr("string",{default:""}),dropdown:Lyte.attr("string",{default:""}),ltPropAriaExpand:Lyte.attr("string",{default:void 0}),ltPropIgnoreMouseMove:Lyte.attr("boolean",{default:!1}),parentObj:Lyte.attr("object")}},didConnect:function(){var t=this.getData("ltPropParent");this.setData("parentObj",$L(t)),document.activeElement!=t&&$L(t).focus(),$L(t).keyboardNavigator({comp:this,focusableElement:this.getData("ltPropParent"),highlightValue:this.getData("ltPropHighlighted"),child:this.getData("ltPropChildren"),selectedClass:this.getData("ltPropSelected"),skipElements:this.getData("ltPropSkipElements"),ifCycle:this.getData("ltPropIfCycle"),options:this.getData("ltPropOptions"),orientation:this.getData("ltPropOrientation"),scope:this.getData("ltPropScope"),triggerClick:this.getData("ltPropTriggerClick"),customDropdownSel:this.getData("customDropdownSel"),customDropdownClass:this.getData("customDropdownClass"),dropdown:this.getData("dropdown"),onBeforeHighlight:this.getMethods("onBeforeHighlight"),onAfterHighlight:this.getMethods("onAfterHighlight"),changeScope:this.getData("ltPropChangeScope"),ariaExpand:this.getData("ltPropAriaExpand"),ignoreMouseMove:this.getData("ltPropIgnoreMouseMove")})},didDestroy:function(){var t=this.getData("parentObj");$L(t).keyboardNavigator("destroy"),this.setData("parentObj",null)},actions:{},methods:{}}),Lyte.Component.register("lyte-tabs",{_template:'<template tag-name="lyte-tabs"> <template is="if" value="{{ltPropYield}}"><template case="true"> <lyte-yield yield-name="tabYield"></lyte-yield> </template></template> <template is="if" value="{{createTabMenu}}"><template case="true"> <lyte-menu id="lyteTabMenu" on-before-open="{{method(&quot;onBeforeOpen&quot;)}}" on-open="{{method(&quot;onOpen&quot;)}}" on-before-close="{{method(&quot;onBeforeClose&quot;)}}" on-close="{{method(&quot;onClose&quot;)}}" on-menu-click="{{method(&quot;onClick&quot;)}}" before-render="{{method(\'MenubeforeRender\')}}" after-render="{{method(\'MenuafterRender\')}}" lt-prop-yield="{{ltPropMenuYield}}" lt-prop-wrapper-class="{{ltPropMenuWrapperClass}}"> <template is="registerYield" yield-name="yield"> <lyte-yield yield-name="tab-menu" hidden-tabs="{{menuLabels}}"></lyte-yield> </template> </lyte-menu> </template></template> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["ltPropYield","ltPropHover","ltPropActiveClass","ltPropPosition","ltPropCloseIcon","prevTarget","ltPropHeight","ltPropType","ltPropMaxWidth","ltPropTabStyle","ltPropMenuWrapperClass","ltPropCurrentTab","ltPropActiveTab","ltPropFireOnInit","createTabMenu","ltPropMenuYield","menuLabels"],data:function(){return{ltPropYield:Lyte.attr("boolean",{default:!0}),ltPropHover:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","hover","lyteTabHover")}),ltPropActiveClass:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","activeClass","lyteTabActive")}),ltPropPosition:Lyte.attr("object",{default:{pos:"top",align:"left"}}),ltPropCloseIcon:Lyte.attr("boolean",{default:!1}),prevTarget:Lyte.attr("object",{default:null}),ltPropHeight:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","height","400px")}),ltPropType:Lyte.attr("string"),ltPropMaxWidth:Lyte.attr("string",{default:_lyteUiUtils.resolveDefaultValue("lyte-tabs","maxWidth","90%")}),ltPropTabStyle:Lyte.attr("string"),ltPropMenuWrapperClass:Lyte.attr("string"),ltPropCurrentTab:Lyte.attr("object"),ltPropActiveTab:Lyte.attr("number"),ltPropFireOnInit:Lyte.attr("boolean",{default:!0}),createTabMenu:Lyte.attr("boolean",{default:!1}),ltPropMenuYield:Lyte.attr("boolean",{default:!1}),menuLabels:Lyte.attr("array",{default:[]})}},init:function(){this.$node.addTab=function(t){this.component.constructTabs(this,t),this.component.collapseHeader(!0)},this.$node.deleteTab=function(t){this.component.deleteTabContent(t,null)},this.$node.openTab=function(t){this.component.openTabContent(t,null)},this.$node.enableTab=function(t){this.component.enableTab(t)},this.$node.disableTab=function(t){this.component.disableTab(t)},this.$node.addCloseIcon=function(){this.component.checkCloseIcon()},this.$node.resizeTab=function(){this.component.collapseHeader(!0),this.component.checkHeightOnResize()}},didConnect:function(){$L(this.$node).attr("role","tabs"),$L("LYTE-TAB-HEAD").attr("role","tablist"),this.initialFunc(!0),this.rendered=!0},didDestroy:function(){this.$node.checkTabs&&(clearTimeout(this.$node.checkTabs),this.$node.checkTabs=!1)},onPositionChange:function(){var t=this.$node;t.classList.remove("lyteTabDefaultLeft","lyteTabDefaultRight","lyteTabDefaultTop","lyteTabDefaultBottom");var e=t.querySelector("lyte-tab-head"),o=t.querySelector("lyte-tab-body"),i=t.querySelectorAll("lyte-tab-title");if(e.classList.remove("lyteTabAlignStart","lyteTabAlignEnd","lyteTabAlignCenter"),e.removeAttribute("style"),o.removeAttribute("style"),i.length){i[0].style.marginLeft="",i[0].style.marginTop="";for(var a=0;a<i.length;a++)i[a].style.float=""}t=null,e=null,i=null,o=null;var l=this.getData("ltPropPosition");this.setPosition(l),this.setHeight(l)}.observes("ltPropPosition"),onHeightChange:function(){this.$node.style.height=this.getData("ltPropHeight"),this.setHeight(this.getData("ltPropPosition"))}.observes("ltPropHeight"),initialFunc:function(t){var e=this;if(this.$node.childElementCount>1||"LYTE-TAB"===this.$node.children[0].tagName){this.checkTabStyle(),this.$node.style.height=this.getData("ltPropHeight");var o=this.$node.querySelector("lyte-tab-head");o.classList.add("lyteTabNav"),"collapse"==this.getData("ltPropType")&&o.classList.add("lyteTabOverflowV");var i,a=this.getData("ltPropPosition"),l=this.getHeader(o.querySelectorAll("lyte-tab-title")),s=this.getContent($L("lyte-tab-content",this.$node.querySelector("lyte-tab-body"))),r=this.getData("ltPropActiveClass");this.setPosition(a),this.checkCloseIcon(o);var n=function(t){this.keydown(t)}.bind(this);e=this;o.addEventListener("click",function(t){this.showTab(t)}.bind(this),!0),o.addEventListener("mouseover",function(t){this.mouseOver(t)}.bind(this),!0),o.addEventListener("mouseout",function(t){this.mouseOut(t)}.bind(this),!0),this.$node.addEventListener("focusin",(function(t){e.$node.querySelector("lyte-tab-head").addEventListener("keydown",n,!0)})),this.$node.addEventListener("focusout",(function(t){e.$node.querySelector("lyte-tab-head").removeEventListener("keydown",n,!0)}));var d=this.getData("ltPropActiveTab");if(d)l[d].classList.add(r),$L(l[d]).attr("tabindex",0),$L(l[d]).attr("aria-selected","true"),i=d;else for(var p=0;p<l.length;p++)l[p].classList.contains(r)&&($L(l[p]).attr("tabindex",0),$L(l[p]).attr("aria-selected","true"),i=p);for(p=0;p<s.length;p++)!i||i!==p&&l[i].getAttribute("lt-prop-id")!==s[p].id?(s[p].classList.add("lyteTabHide"),$L(l[p]).attr("aria-selected",!1)):(this.executeOnBeforeOpen(l[i],l[i].getAttribute("lt-prop-id"),null,null),s[p].classList.add("lyteTabShow"),this.setData("ltPropCurrentTab",{index:i,name:l[i].textContent.trim()}),this.executeOnOpen(l[i],l[i].getAttribute("lt-prop-id"),null,t)),$L(l[p]).attr("aria-controls",s[p].id);!i&&l.length&&(i=0,this.executeOnBeforeOpen(l[0],l[0].getAttribute("lt-prop-id"),null,null,t),l[0].classList.add(r),$L(l[0]).attr("tabindex",0),$L(l[0]).attr("aria-selected","true"),s[0].classList.remove("lyteTabHide"),s[0].classList.add("lyteTabShow"),this.setData("ltPropCurrentTab",{index:i,name:l[i].textContent.trim()}),this.executeOnOpen(l[0],l[0].getAttribute("lt-prop-id"),null,t)),this.setData("prevTarget",l[i]),$L.fastdom.measure((function(){if("auto"==this.getData("ltPropHeight"))"left"!==a.pos&&"right"!==a.pos||(this.$node.querySelector(".lyteTabNav").style.height="auto",this.$node.querySelector("lyte-tab-body").style.height="auto"),"top"!==a.pos&&"bottom"!==a.pos||(this.$node.querySelector("lyte-tab-body").style.height="auto"),this.makeAlignment(this.getData("ltPropPosition")),t&&_lyteUiUtils.dispatchEvent("lytetabafterrender",this.$node),t&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node);else{var e=getComputedStyle(this.$node),o=(e.borderTop?parseFloat(e.borderTop):0)+(e.borderBottom?parseFloat(e.borderBottom):0),i=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height,l=parseInt(e.height)-o;$L.fastdom.mutate((function(){"left"!==a.pos&&"right"!==a.pos||(this.$node.querySelector(".lyteTabNav").style.height=l+"px",this.$node.querySelector("lyte-tab-body").style.height=l+"px"),"top"!==a.pos&&"bottom"!==a.pos||(this.$node.querySelector("lyte-tab-body").style.height=l-i+"px"),this.makeAlignment(this.getData("ltPropPosition")),t&&_lyteUiUtils.dispatchEvent("lytetabafterrender",this.$node),t&&this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node)}),this)}}),this)}else console.error("No content detected")},checkTabStyle:function(){"nested"===this.getData("ltPropTabStyle")&&this.$node.classList.add("lyteNestedTab")},keydown:function(t){if("LYTE-TAB-TITLE"===t.target.tagName){var e=$L(this.$node).find("lyte-tab-title").toArray(),o=$L(this.$node).find(".lyteTabHover");o=0===o.length?$L(this.$node).find(".lyteTabActive"):o;var i=e.indexOf(o[0]),a=e.length;39!==t.keyCode&&37!==t.keyCode||(e[i].setAttribute("tabindex",-1),$L(e[i]).removeClass("lyteTabHover"),39===t.keyCode?++i>=a&&(i=0):--i<0&&(i=a-1),e[i].setAttribute("tabindex",0),$L(e[i]).addClass("lyteTabHover")),13===t.keyCode&&this.openTabContent($L(e[i]).attr("lt-prop-id"),t),e[i].focus()}},showTab:function(t){for(var e=t.target.correspondingElement||t.target;e&&e.parentNode&&"LYTE-TAB-TITLE"!=e.tagName;)e=e.parentNode;if(e&&"LYTE-TAB-TITLE"==e.tagName){var o=e.getAttribute("lt-prop-id");if(t.target.classList.contains("lyteTabCloseIcon")){if(!this.deleteTabContent(o,t))return;if(this.makeAlignment(this.getData("ltPropPosition")),!(e=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title").length>0?this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title")[0]:null))return void this.setData("prevTarget",null);o=e.getAttribute("lt-prop-id"),this.openTabContent(e,null)}this.openTabContent(e,t)}},mouseOver:function(t){for(var e=t.target.correspondingElement||t.target;e&&e.parentNode&&"LYTE-TAB-TITLE"!=e.tagName;)e=e.parentNode;if(e){var o=this.getData("ltPropHover");$L(e).addClass(o)}},mouseOut:function(t){for(var e=t.target.correspondingElement||t.target;e&&e.parentNode&&"LYTE-TAB-TITLE"!=e.tagName;)e=e.parentNode;if(e){var o=this.getData("ltPropHover");$L(e).removeClass(o)}},getContent:function(t){for(var e=[],o=0;o<t.length;o++)this.$node==$L(t[o]).closest("LYTE-TABS")[0]&&e.push(t[o]);return e},getHeader:function(t){for(var e=[],o=0;o<t.length;o++)this.$node==$L(t[o]).closest("LYTE-TABS")[0]&&e.push(t[o]);return e},constructTabs:function(t,e){var o,i="",a="",l=!1,s=document.createElement("lyte-tab-title"),r=document.createElement("lyte-tab-content");"object"==typeof e&&"LYTE-TAB"===e.tagName?(i=e.getAttribute("lt-prop-title"),a=e.innerHTML,o=e.getAttribute("lt-prop-id")):(i=e.title,a=e.content,o=e.id,l=!0),o||(o=this.generateId(i)),s.innerHTML=i,r.innerHTML=a,s.setAttribute("lt-prop-id",o),s.setAttribute("aria-controls",o),r.id=o,r.classList.add("lyteTabHide");var n=t.querySelector("#moreMenu");n?t.querySelector("lyte-tab-head").insertBefore(s,n):t.querySelector("lyte-tab-head").append(s);t.querySelector("lyte-tab-body").append(r),l&&(this.getData("ltPropCloseIcon")&&this.createCloseIcon(new Array(s)),this.makeAlignment(this.getData("ltPropPosition")))},deleteTabContent:function(t,e){if(t){var o=!0;if(this.getMethods("onBeforeDelete")&&(o=void 0===(o=this.executeMethod("onBeforeDelete",t,this.$node,e))||o),!o)return!1;for(var i=this.$node.querySelector("#"+t),a=this.$node.querySelector("lyte-tab-head"),l=a.querySelectorAll("lyte-tab-title"),s=0;s<l.length;s++)if(l[s].getAttribute("lt-prop-id")===t){l[s].classList.contains("lyteTabCustomTitleWidth")&&!0,a.removeChild(l[s]),i&&this.$node.querySelector("lyte-tab-body").removeChild(i);break}return this.getMethods("onDelete")&&this.executeMethod("onDelete",t,this.$node,e),!0}},enableTab:function(t){if(t){if("string"==typeof t)for(var e=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),o=0;o<e.length;o++)if(e[o].getAttribute("lt-prop-id")===t){e[o].classList.contains("lyteTabDisable")&&(e[o].classList.remove("lyteTabDisable"),e[o].classList.contains("lyteTabForceHide")&&Lyte.arrayUtils(this.getData("menuLabels"),"push",this.getMenuLabel(e[o])));break}"object"==typeof t&&t.classList.contains("lyteTabDisable")&&(t.classList.remove("lyteTabDisable"),t.classList.contains("lyteTabForceHide")&&Lyte.arrayUtils(this.getData("menuLabels"),"push",this.getMenuLabel(t)))}},disableTab:function(t){if(t){if("string"==typeof t)for(var e=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),o=0;o<e.length;o++)if(e[o].getAttribute("lt-prop-id")===t){if(!e[o].classList.contains("lyteTabDisable"))if(e[o].classList.add("lyteTabDisable"),e[o].classList.contains("lyteTabForceHide"))-1!=(i=this.getData("menuLabels").indexOf(this.getMenuLabel(e[o])))&&Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",i,1);break}var i;if("object"==typeof t&&!t.classList.contains("lyteTabDisable"))if(t.classList.add("lyteTabDisable"),t.classList.contains("lyteTabForceHide"))-1!=(i=this.getData("menuLabels").indexOf(this.getMenuLabel(t)))&&Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",i,1)}},openTabContent:function(t,e){if(t){var o;if("string"==typeof t)for(var i=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),a=this.$node.querySelector("#"+t),l=this,s=function(){l.hideAll(),o.classList.add(l.getData("ltPropActiveClass")),a&&(a.classList.remove("lyteTabHide"),a.classList.add("lyteTabShow")),l.setData("ltPropCurrentTab",{index:r,name:o.textContent.trim()}),l.executeOnOpen(o,t,e),l.setData("prevTarget",o)},r=0;r<i.length;r++)if(i[r].getAttribute("lt-prop-id")===t){if(i[r].classList.contains(this.getData("ltPropActiveClass")))return;if(o=i[r],!(n=this.executeOnBeforeOpen(o,t,this.getData("prevTarget")?this.getData("prevTarget").getAttribute("lt-prop-id"):null,e)))return;n&&n.then?n.then(s):s();break}if("object"==typeof t){if(t.classList.contains(this.getData("ltPropActiveClass")))return;o=t;var n,d=t.getAttribute("lt-prop-id");a=this.$node.querySelector("#"+d);if(!(n=this.executeOnBeforeOpen(t,d,this.getData("prevTarget")?this.getData("prevTarget").getAttribute("lt-prop-id"):null,e)))return;if(n&&n.then){l=this;n.then((function(){l.hideAll(),t.classList.add(l.getData("ltPropActiveClass")),a&&(a.classList.remove("lyteTabHide"),a.classList.add("lyteTabShow"));for(var i,s=l.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),r=0;r<s.length;r++)if(s[r].isEqualNode(o)&&s[r].getAttribute("lt-prop-id")===d){i=r;break}l.setData("ltPropCurrentTab",{index:i,name:o.textContent.trim()}),l.executeOnOpen(t,d,e),l.setData("prevTarget",t)}))}else{this.hideAll(),t.classList.add(this.getData("ltPropActiveClass")),a&&(a.classList.remove("lyteTabHide"),a.classList.add("lyteTabShow"));var p;for(i=this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title"),r=0;r<i.length;r++)if(i[r].isEqualNode(o)&&i[r].getAttribute("lt-prop-id")===d){p=r;break}this.setData("ltPropCurrentTab",{index:p,name:o.textContent.trim()}),this.executeOnOpen(t,d,e),this.setData("prevTarget",t)}}"collapse"==this.getData("ltPropType")&&this.getData("menuLabels").indexOf(this.getMenuLabel(o))>-1&&this.collapseHeader(!0),$L(o).attr("tabindex",0),$L(o).attr("aria-selected","true")}},CloseIconObsever:function(){this.checkCloseIcon()}.observes("ltPropCloseIcon"),checkCloseIcon:function(t){t=t||this.$node.querySelector("lyte-tab-head"),this.getData("ltPropCloseIcon")?this.createCloseIcon(t.querySelectorAll("lyte-tab-title")):this.destoryCloseIcon(t.querySelectorAll("lyte-tab-title"))},destoryCloseIcon:function(t){for(var e=$L(".lyteTabCloseIcon",this.$node),o=0;o<e.length;o++)e[o].remove(),t[o].addedCloseIcon=!1},createCloseIcon:function(t){for(var e=0;e<t.length;e++)if(!t[e].addedCloseIcon){var o=document.createElement("span");o.classList.add("lyteTabCloseIcon"),t[e].appendChild(o),t[e].addedCloseIcon=!0}},setPosition:function(t){switch(t.pos){case"left":this.$node.classList.add("lyteTabDefaultLeft");break;case"right":this.$node.classList.add("lyteTabDefaultRight");break;case"top":this.$node.classList.add("lyteTabDefaultTop");break;case"bottom":this.$node.classList.add("lyteTabDefaultBottom")}},checkHeightOnResize:function(){this.$node.getBoundingClientRect().height!=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height+this.$node.querySelector("lyte-tab-body").getBoundingClientRect().height&&this.setHeight(this.getData("ltPropPosition"))},setHeight:function(t){"auto"==this.getData("ltPropHeight")?("left"!==t.pos&&"right"!==t.pos||(this.$node.querySelector(".lyteTabNav").style.height="auto",this.$node.querySelector("lyte-tab-body").style.height="auto"),"top"!==t.pos&&"bottom"!==t.pos||(this.$node.querySelector("lyte-tab-body").style.height="auto"),this.makeAlignment(this.getData("ltPropPosition"))):$L.fastdom.measure((function(){var e=getComputedStyle(this.$node),o=(e.borderTop?parseFloat(e.borderTop):0)+(e.borderBottom?parseFloat(e.borderBottom):0),i=this.$node.querySelector(".lyteTabNav").getBoundingClientRect().height,a=parseInt(e.height)-o;$L.fastdom.mutate((function(){"left"!==t.pos&&"right"!==t.pos||(this.$node.querySelector(".lyteTabNav").style.height=a+"px",this.$node.querySelector("lyte-tab-body").style.height=a+"px"),"top"!==t.pos&&"bottom"!==t.pos||(this.$node.querySelector("lyte-tab-body").style.height=a-i+"px"),this.makeAlignment(this.getData("ltPropPosition"))}),this)}),this)},hideAll:function(){for(var t=this.getHeader(this.$node.querySelector("lyte-tab-head").querySelectorAll("lyte-tab-title")),e=this.getContent($L("lyte-tab-content",this.$node.querySelector("lyte-tab-body"))),o=this.getData("ltPropActiveClass"),i=0;i<t.length;i++)t[i].classList.contains(o)&&(t[i].setAttribute("aria-selected",!1),t[i].classList.remove(o),t[i].setAttribute("tabIndex",-1));for(var a=0;a<e.length;a++)e[a].classList.contains("lyteTabShow")&&(e[a].classList.remove("lyteTabShow"),e[a].classList.add("lyteTabHide")),e[a].classList.contains("lyteTabHide")||e[a].classList.add("lyteTabHide"),$L(e[a]).hasClass("lyteTabHide")||$L(e[a]).addClass("lyteTabHide")},customizeTitleTab:function(t){$L.fastdom.measure((function(){var e=this.$node.querySelector("lyte-tab-head"),o=this.getWidth(e,!1);if("top"===t||"bottom"===t){var i=0,a=0,l=e.querySelectorAll("lyte-tab-title");"collapse"==this.getData("ltPropType")&&$L.fastdom.measure((function(){for(var t=0;t<l.length;t++)i+=this.getWidth(l[t],!0,!0);i>o&&this.collapseHeader()}),this)}if("afterDelete"===t){l=e.querySelectorAll("lyte-tab-title"),a=o/l.length;$L.fastdom.mutate((function(){for(var t=0;t<l.length;t++)l[t].style.width=a+"px"}))}}),this)},collapseHeader:function(t){var e=this.$node.querySelector("#lyteTabMenu"),o=this.$node.querySelector("lyte-tab-head"),i=this.getWidth(o,!1),a=o.offsetHeight,l=-1!=this.getData("ltPropMaxWidth").indexOf("%")?parseInt(this.getData("ltPropMaxWidth"))*i/100:parseFloat(this.getData("ltPropMaxWidth")),s=o.querySelectorAll("lyte-tab-title"),r=0,n=-1,d=this,p=Array.from(s).findIndex((function(t){return t.classList.contains(d.getData("ltPropActiveClass"))})),h=[];if(t)for(var c=0;c<s.length;c++)s[c].classList.contains("lyteTabForceHide")&&s[c].classList.remove("lyteTabForceHide");e&&l==o.getBoundingClientRect().width&&(r+=$L("#moreMenu",o)[0].getBoundingClientRect().width),r+=this.getWidth(s[p],!0,!0);for(c=0;c<s.length;c++)if(c!=p&&(r+=this.getWidth(s[c],!0,!0))>l){r-=this.getWidth(s[c],!0,!0),n=c;break}if(n>-1&&n<s.length){for(c=n;c<s.length;c++)c==p?p>0&&!s[c-1].classList.contains("lyteTabForceHide")&&($L(s[c-1]).addClass("lyteTabForceHide"),$L(s[c-1]).hasClass("lyteTabDisable")||h.push(this.getMenuLabel(s[c-1]))):($L(s[c]).addClass("lyteTabForceHide"),$L(s[c]).hasClass("lyteTabDisable")||h.push(this.getMenuLabel(s[c])));if(e=this.$node.querySelector("#lyteTabMenu"))Lyte.arrayUtils(this.getData("menuLabels"),"removeAt",0,this.getData("menuLabels").length),Lyte.arrayUtils(this.getData("menuLabels"),"push",h);else{var u=document.createElement("span");u.id="moreMenu";var y=this.createUniqueSlector();u.classList.add(y),u.appendChild(document.createElement("span")),o.appendChild(u),r+u.getBoundingClientRect().width>l&&l==o.getBoundingClientRect().width&&($L(s[n-1]).addClass("lyteTabForceHide"),h.splice(0,0,this.getMenuLabel(s[n-1]))),this.createMenu(h,y,"init"),t||"bottom"===this.getData("ltPropPosition").pos&&(o.style.top=o.offsetTop+(Math.ceil(a/2)-1)+"px")}}else-1==n&&this.removeMenu()},createUniqueSlector:function(){for(var t=document.querySelectorAll("lyte-tabs"),e=0;e<t.length;e++)if(t[e].isEqualNode(this.$node))return"menuSel_"+e},getMenuLabel:function(t){var e=t.querySelector(".lyteTabTitleLabel");return e?e.textContent:t.textContent},createMenu:function(t,e,o){if("init"==o){this.setData("createTabMenu",!0);var i=$L("#lyteTabMenu",this.$node)[0];this.setData("menuLabels",t),i.ltProp({content:t,query:"."+e,event:"click",callout:!0})}},removeMenu:function(){var t=this.$node.querySelector("lyte-tab-head"),e=$L("#moreMenu",t)[0];e&&e.remove(),this.setData("createTabMenu",!1),this.setData("menuLabels",[])},onMenuLabelChange:function(){this.$node.querySelector("#lyteTabMenu").ltProp({content:this.getData("menuLabels")})},makeAlignment:function(t){var e=this.$node.querySelector("lyte-tab-head");"left"!=t.align&&"top"!=t.align||e.classList.add("lyteTabAlignStart"),"right"!=t.align&&"bottom"!=t.align||("collapse"!=this.getData("ltPropType")||"top"!=t.pos&&"bottom"!=t.pos?e.classList.add("lyteTabAlignEnd"):e.classList.add("lyteTabRightCollapse")),"center"==t.align&&e.classList.add("lyteTabAlignCenter")},executeOnBeforeOpen:function(t,e,o,i,a){var l;return this.getData("ltPropFireOnInit")?this.getMethods("onBeforeOpen")&&(l=this.executeMethod("onBeforeOpen",this.$node.querySelector("#"+e),this.$node.querySelector("#"+o),this,t,this.getData("prevTarget")?this.getData("prevTarget"):null,i)):this.getMethods("onBeforeOpen")&&!a&&(l=this.executeMethod("onBeforeOpen",this.$node.querySelector("#"+e),this.$node.querySelector("#"+o),this,t,this.getData("prevTarget")?this.getData("prevTarget"):null,i)),void 0===l||l},executeOnOpen:function(t,e,o,i){this.getData("ltPropFireOnInit")?this.getMethods("onOpen")&&this.executeMethod("onOpen",this.$node.querySelector("#"+e),this,t,o):this.getMethods("onOpen")&&!i&&this.executeMethod("onOpen",this.$node.querySelector("#"+e),this,t,o),_lyteUiUtils.dispatchEvent("lytetabopen",this.$node,{content:this.$node.querySelector("#"+e),component:this,tab:t})},generateId:function(t){for(;-1!==t.indexOf(" ");)t=t.replace(" ","_");return t},getWidth:function(t,e,o){if(e=null==e||e,t){var i=getComputedStyle(t),a=parseInt(i.paddingLeft)+parseInt(i.paddingRight),l=0;return o&&(l=parseInt(i.marginLeft)+parseInt(i.marginRight)),parseFloat(i.width)+(e?0:-a)+l}return 0},methods:{onClick:function(t,e,o,i,a){for(var l,s=arguments[0],r=arguments[2].parentElement.component,n=arguments[3].parentElement,d=n.querySelectorAll("lyte-tab-title"),p=0;p<d.length;p++)if(r.getMenuLabel(d[p])==s&&d[p].classList.contains("lyteTabForceHide")){l=d[p];break}l&&(l.classList.remove("lyteTabForceHide"),r.openTabContent(l,e)),r.getMethods("onMenuClick")&&r.executeMethod("onMenuClick",t,e,o,i,a,r,l)},onBeforeOpen:function(t,e,o){var i=this;i.getMethods("onBeforeMenuOpen")&&i.executeMethod("onBeforeMenuOpen",t,e,o,i)},onOpen:function(t,e,o){var i=this;i.getMethods("onMenuOpen")&&i.executeMethod("onMenuOpen",t,e,o,i)},onBeforeClose:function(t,e){var o=this;o.getMethods("onBeforeMenuClose")&&o.executeMethod("onBeforeMenuClose",t,e,o)},onClose:function(t,e){var o=this;o.getMethods("onMenuClose")&&o.executeMethod("onMenuClose",t,e,o)},MenubeforeRender:function(t){var e=this;e.getMethods("onBeforeMenuRender")&&e.executeMethod("onBeforeMenuRender",t,e)},MenuafterRender:function(t){var e=this;e.getMethods("onAfterMenuRender")&&e.executeMethod("onAfterMenuRender",t,e)}}}),_lyteUiUtils.registeredCustomElements["lyte-tab-title"]||(_lyteUiUtils.registeredCustomElements["lyte-tab-title"]=!0,Lyte.createCustomElement("lyte-tab-title",{static:{},connectedCallback:function(){$L(this).attr("role","tab"),$L(this).attr("tabindex",-1),$L(this).attr("aria-selected","false");var t=this.closest("lyte-tabs");t.getData("ltPropCloseIcon")&&t.component.rendered&&t.component.createCloseIcon([this]),t&&t.component&&"collapse"==t.getData("ltPropType")&&(t.checkTabs?(clearTimeout(t.checkTabs),t.checkTabs=!1):this.closest("lyte-tab-head").classList.add("lyteTabVH"),t.checkTabs=setTimeout(function(){var e=this.closest("lyte-tabs");if(e){for(var o=e.component,i=this.closest("lyte-tab-head"),a=o.getWidth(i,!1),l=-1!=o.getData("ltPropMaxWidth").indexOf("%")?parseInt(o.getData("ltPropMaxWidth"))*a/100:parseFloat(o.getData("ltPropMaxWidth")),s=0,r=i.querySelectorAll("lyte-tab-title"),n=-1,d=0;d<r.length;d++)s+=o.getWidth(r[d],!0,!0),r[d].classList.contains(o.getData("ltPropActiveClass"))&&(n=d);-1==n&&o.openTabContent(r[0],null),(s>a||s>l)&&"collapse"==o.$node.ltProp("type")&&o.collapseHeader(),this.closest("lyte-tab-head").classList.remove("lyteTabVH")}t.checkTabs=!1}.bind(this),100))},disconnectedCallback:function(){var t=this.closest("lyte-tabs");t&&t.checkTabs&&(clearTimeout(t.checkTabs),t.checkTabs=!1,this.closest("lyte-tab-head").classList.remove("lyteTabVH"))}})),_lyteUiUtils.registeredCustomElements["lyte-tab-content"]||(_lyteUiUtils.registeredCustomElements["lyte-tab-content"]=!0,Lyte.createCustomElement("lyte-tab-content",{static:{},connectedCallback:function(){$L(this).attr("role","tabpanel")}})),window.addEventListener("resize",(function(){_lyteUiUtils.tabResizeTriggered&&(clearTimeout(_lyteUiUtils.tabResizeTriggered),_lyteUiUtils.tabResizeTriggered=!1),_lyteUiUtils.tabResizeTriggered=setTimeout((function(){for(var t=document.querySelectorAll("lyte-tabs"),e=0;e<t.length;e++)t[e].component&&"collapse"==t[e].component.getData("ltPropType")&&t[e].component.collapseHeader(!0),t[e].component.checkHeightOnResize();_lyteUiUtils.tabResizeTriggered=!1}),50)}));
