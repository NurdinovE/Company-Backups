$(document).keyup((function(e){if(27===e.which){$(".basic_edit").attr("style",""),$(".colorpicker").hide();var t=document.getElementById("templateComponentDIV");Crm.userDetails.isNewEditor&&EmailSendingUtil.composeActive&&t&&t.style&&"none"!==t.style.display&&template.compCloseComponentPop()}46!=e.keyCode&&8!=e.keyCode||1==$("#cd_toolpaddingOuterBox").is(":visible")||$(".basic_edit").length>0&&!$("#fontcolor_dropdown").is(":visible")&&jSortable.deleteElement()})),$(document).keydown((function(e){e.keyCode||e.which;if($(".basic_edit").hasClass("grid-stack-item-content"))$(".basic_edit").parents(".grid-stack-item");90===e.which&&e.ctrlKey&&e.altKey||90===e.which&&e.metaKey&&e.altKey?jSortable.cd_redo():(90===e.which&&e.ctrlKey||90===e.which&&e.metaKey)&&jSortable.cd_undo()})),$(document).ready((function(e){$("#sortable").draggable({}),$("#sortable").disableSelection(),$(window).resize((function(){jSortable.heightset()}))}));var jSortable={copyStyle:{},lastUpdateStyle:{},grid_size:1,cd_selectedNode:{},cd_selectedNodeParent:{},cd_labelEnable:!0,cd_selectedGridItem:{},cd_selectedFieldHolder:{},cd_rowSelectedNode:{},cd_singleGridWidth:1,cd_singleRowHeight:1,cd_undoCatchMoves:[],cd_redoCatchMoves:[],canvas_usedFieldCount:0,canvas_fieldLimit:50,cd_distrubNodeTimer:void 0,cd_datamodified:!1,groupingused:0,init:function(e){e&&$("#grid1").width(e),jSortable.createNode(),jSortable.initBinds(),jSortable.colorPicker("#textColorId","color"),jSortable.colorPicker("#textBgId","bg"),$("#grid1, #grid1 > .grid-stack-item").bind("contextmenu",(function(e){e.preventDefault()}));var t=Math.ceil($("#grid1").width());jSortable.grid_size=t,$("#grid1").data("data-gs-width",t),jSortable.cd_singleGridWidth=t/jSortable.grid_size,$(".struture_demo").width(t),jSortable.clearMoves()},hideOtherOptions:function(){$("#font_dropdown").hide(),$("#cd_toolpaddingOuterBox").hide(),$("#fontstyle_dropdown").hide(),$("#align_dropdown").hide(),$("#separator_dropdown").hide(),$("#icon_dropdown").hide(),$("#labelalign_dropdown").hide(),$("#cd_range").hide(),$("#cd_toolfonttype_dropdown").hide(),$("#fontcolor_dropdown").hide(),$("#cview_contextmenu").hide(),$(".cd_hoverBdr").removeClass("cd_hoverBdr"),$("#canvasMenuSeparator").addClass("cv_disable")},builderOptionDropdown:function(e,t){t.attr("style","");var a=$(window).height(),i=$(e).offset().top,o=t.height(),r=($(e).offset().top,$("#editor_container").outerHeight()),d=r-i+50,n=$(e).outerHeight(),s=t.attr("id");if(t.removeClass("topAligndropdown"),i+o>r){var l=197;"cd_toolfonttype_dropdown"!=s&&"font_dropdown"!=s&&"fontstyle_dropdown"!=s||(l=150),d<l?(t.addClass("topAligndropdown"),t.css({"max-height":$("#grid_outer").outerHeight()+50}),t.css({top:i-t.outerHeight(),left:$(e).offset().left,position:"fixed"})):(t.removeClass("topAligndropdown"),t.css({"max-height":d}),t.css({top:i+20,left:$(e).offset().left,position:"fixed"}))}else t.css({"max-height":d}),t.css({top:i+n,left:$(e).offset().left,position:"fixed"})},initBinds:function(){$("#grid1").resizable({handles:"s",start:function(e,t){var a=$("#grid1").children(".grid-stack-item");if(a.length>0){var i=$u.max(a.toArray(),(function(e){return $(e).position().top})),o=$(i).position().top+$(i).outerHeight();$(t.element).css("min-height",o)}},stop:function(e,t){jSortable.setMaxHeight(void 0,!0)}}),$("#grid1").on("added",(function(e,t){jSortable.updateContainerHeight()})),$("#textEditorMenu #tE_selectFont").click((function(){if(jSortable.builderOptionDropdown(this,$("#font_dropdown")),!$("#textEditorMenu").hasClass("cv_disable")){var e=".cd_fs"+$("#cdToolFS").html();jSortable.hideOtherOptions(),$("#font_dropdown").show(),$("#font_dropdown").find(".fwBold").removeClass("fwBold"),$("#font_dropdown").find(e).addClass("fwBold"),jSortable.catchChangeStyle()}sE()})),$("#tE_font_style").click((function(){jSortable.builderOptionDropdown(this,$("#fontstyle_dropdown")),$("#textEditorMenu").hasClass("cv_disable")||$(this).hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#fontstyle_dropdown").show(),jSortable.catchChangeStyle()),sE()})),$("#tE_select_align").click((function(){jSortable.builderOptionDropdown(this,$("#align_dropdown")),$("#textEditorMenu").hasClass("cv_disable")||$("#tE_select_align").hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#align_dropdown").show(),jSortable.catchChangeStyle()),sE()})),$("#cdToolSep").click((function(){$("#textEditorMenu").hasClass("cv_disable")||$("#textEditorMenu > .tE_separator").hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#separator_dropdown").show()),sE()})),$("#tE_icon").click((function(){$("#textEditorMenu").hasClass("cv_disable")||$(this).hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#icon_dropdown").show()),sE()})),$("#tE_selectFontStyle").click((function(){jSortable.builderOptionDropdown(this,$("#cd_toolfonttype_dropdown")),$("#textEditorMenu").hasClass("cv_disable")||$(this).hasClass("cv_disable")||(jSortable.hideOtherOptions(),$("#cd_toolfonttype_dropdown").show()),sE()})),$("#align_dropdown > li").click((function(){if(!$("#textEditorMenu").hasClass("cv_disable")){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),jSortable.triggerCatchMoves("align");var e=$(".basic_edit").parent(),t=$(this).data("align"),a=$(this).data("alignclass"),i=$(this).data("alignimgclass");$(e).find(".grid-stack-item-content").removeClass("txtalnRt txtalnMid txtalnLt"),$(e).find(".grid-stack-item-content").addClass(a),$("#cdToolAlignImg").removeClass("tE_leftalin tE_midlalin tE_rightalin"),$("#cdToolAlignImg").addClass(i);var o=$(".basic_edit").find(".row_separator");"txtalnRt"==a?$(".basic_edit").hasClass("grid-stack-item-content")?(o.addClass("fR"),o.removeClass("canvas_rowSepW100p txtalnRt txtalnMid txtalnLt").css("text-align","")):($(".basic_edit").css("text-align","").addClass("fR txtalnRt"),$(".basic_edit").css("text-align","").removeClass("canvas_rowSepW100p txtalnMid txtalnLt")):"txtalnLt"==a?$(".basic_edit").hasClass("grid-stack-item-content")?(o.addClass("fL"),o.removeClass("canvas_rowSepW100p fR txtalnRt txtalnMid txtalnLt").css("text-align","")):($(".basic_edit").css("text-align","").addClass("txtalnLt fL"),$(".basic_edit").css("text-align","").removeClass("canvas_rowSepW100p fR txtalnRt txtalnMid")):$(".basic_edit").hasClass("grid-stack-item-content")?(o.removeClass("fR txtalnRt txtalnMid txtalnLt").css("text-align",""),o.addClass("canvas_rowSepW100p")):($(".basic_edit").css("text-align","").addClass("canvas_rowSepW100p txtalnMid"),$(".basic_edit").css("text-align","").removeClass("fR txtalnRt txtalnLt")),jSortable.updateNode(e,"align",t),jSortable.createTableStructure(),jSortable.catchChangeStyle()}sE()})),$("#canvasMenuUngroup, #cd_removeFromGroup,#cd_rightClick_delete,#cdDeleteIcon,#cvLabelMenu,#cvIconMenu, #icon_dropdown > li").hover((function(){if(!$(this).hasClass("cv_disable"))if($(".basic_edit").hasClass("cd_field cd_label")||$(".basic_edit").hasClass("cd_field cd_icon")){var e=$(".basic_edit").siblings(".cd_field.field_valueHolder");$(e).addClass("unGroupElmBg")}else{if($(".basic_edit").siblings(".cd_field.cd_label").length>0)e=$(".basic_edit").siblings(".cd_field.cd_label");else e=$(".basic_edit").siblings(".cd_field.cd_icon");$(e).addClass("unGroupElmBg")}}),(function(){$(".unGroupElmBg").removeClass("unGroupElmBg")})),$("#font_dropdown > li").click((function(){$(".grid-stack").data("gridstack");var e=$(this).html(),t=parseInt(e);$(this).parent().find(".fwBold").removeClass("fwBold"),$(this).addClass("fwBold"),$("#textEditorMenu .cd_tool_fontSize").html(t),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),jSortable.triggerCatchMoves("fontSize");var a=$(jSortable.cd_selectedNode);a.css("font-size",parseInt(t)),a.css("line-height",parseInt(t)+"px");var i=$(".basic_edit");jSortable.updateNode(i,"font_size",t),$("#textEditorMenu").data("tool").font_size=t;var o=$(jSortable.cd_selectedGridItem);jSortable.eachNode(o);jSortable.resizeWidth(o,!0),jSortable.lineheightSet(o),jSortable.resizeHeight(o),jSortable.catchChangeStyle(),sE()})),$("#cd_toolfonttype_dropdown > li").click((function(){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),jSortable.triggerCatchMoves("customStyle");$(".grid-stack").data("gridstack");var e=$(jSortable.cd_selectedNode),t=$L(e).toArray().map((function(e){return $(e).data("component")})),a=(Math.ceil($(e).width()/jSortable.cd_singleGridWidth),Math.ceil($(e).height()),$(this).data("style")),i=t[0].ui.styles;a.align=i.align;var o=i.font_style.indexOf("Italic");jSortable.cdPasteStyle(a,!0),$("#textEditorMenu").data("tool",a),""!=a.background_color?$(e).addClass("pL5 pR5"):$(e).removeClass("pL5 pR5"),-1==o?$(cd_italic).data("enable",!1):$(cd_italic).data("enable",!0);var r=$(jSortable.cd_selectedGridItem);jSortable.updateCdtool(),jSortable.lineheightSet(r),jSortable.resizeWidth(r,!0),jSortable.resizeHeight(r),sE()})),$("#fontstyle_dropdown > li").click((function(){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");var e=$(this).html(),t=$("#cd_italic").hasClass("cd_bg_gray"),a=$(this).data("fontname"),i=$("#fontNameHodler").data("fontname"),o=$(jSortable.cd_selectedGridItem);if(t)var r=a+"Italic";else r=a.replace("Italic","");jSortable.triggerCatchMoves("fontStyle"),$("#fontNameHodler").removeClass(i),$("#fontNameHodler").addClass(r),$("#fontNameHodler").data("fontname",r),$("#fontNameHodler").html(e),$("#textEditorMenu").data("tool").font_style=a,$(jSortable.cd_selectedNode).each((function(e,t){var a=(t=$(t)).data("component"),i=a.ui.styles.font_style;t.removeClass("CanvasFontThin CanvasFontThinItalic CanvasFontLight CanvasFontLightItalic CanvasFontRegular CanvasFontRegularItalic CanvasFontSemibold CanvasFontSemiboldItalic CanvasFontBold CanvasFontBoldItalic CanvasFontXbold CanvasFontXboldItalic"),t.removeClass(i),t.addClass(r),a.ui.styles.font_style=r})),jSortable.resizeWidth(o,!0),jSortable.lineheightSet(o),jSortable.resizeHeight(o),sE()})),$("#separator_dropdown > li").click((function(){jSortable.triggerCatchMoves("separator");var e=$("#cdSeparatorMenuDropdown"),t=$(this).data("value");e.html(t);var a=$L(jSortable.cd_selectedNode).toArray().filter((function(e){return $(e).hasClass("cd_field cd_separator")}));$(a).each((function(e,a){var i=$(a).data("component");$(a).html(t),i.symbol=t})),jSortable.lineheightSet(jSortable.cd_selectedGridItem),sE()})),$("#cv_editorBody").hover((function(){$("#grid2").hasClass("cv_disable")&&$("#sideBarFieldLimit").show()}),(function(){$("#sideBarFieldLimit").hide()})),$("#icon_dropdown > li").click((function(){if(0!=$(".basic_edit").length){var e=$("#icon_holder"),t=$(this).data("value");e.html("<span class='"+t+"'></span>");$(jSortable.cd_selectedNode);$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");var a=jSortable.getSelectedFields();$(".grid-stack").data("gridstack");if(jSortable.triggerCatchMoves("icon"),a.length>0)$(a).each((function(e,a){if(!$(a).hasClass("cd_field field_valueHolder"))a=$(a).nextAll(".cd_field.field_valueHolder");var i=$(a).parents(".grid-stack-item"),o=$(a).data("component"),r=(o.label,o.ui.styles.color);if((o.label||o.icon)&&$(a).prevUntil(".cd_mapping_field").remove(),o.label=!1,o.ui.styles.labelAlign="left",o.icon=!0,$(a).unwrap("span"),""==t)return o.icon=!1,void $("#cviconmenu").prop("checked",!1);var d=o.ui.position.startX-1,n=o.ui.position.startY,s=o.id,l=JSON.parse('{"_type":"icon","id":"'+s+'","iconclass":"'+t+'","children":[], "ui":{"position":{"startX":'+d+',"startY":'+n+',"width":20,"height":20,"endX":"","left":""},"styles":{"color":"'+r+'","background_color":"","bold":false,"italic":false,"align":"left","font_size":"12","font_style":""}}}'),c=$("<span />");c.addClass("cd_field cd_icon"),c.addClass(t),c.data("component",l),c.css({"font-size":12,color:"#"+r}),$(a).data("component",o),$(a).before(c),$(a).prev().addBack().wrapAll("<span class='dIB cd_mapping_field cd_icon_left'></span>"),jSortable.resizeWidth(i,!0)})),jSortable.updateCdtool();else{jSortable.triggerCatchMoves("removeIcon");var i=$(jSortable.cd_selectedNode),o=$(i).parents(".grid-stack-item"),r=i.data("component"),d=$(jSortable.cd_selectedNode).next().data("component");if(d.label=!1,d.icon=!0,""==t)return r.icon=!1,void $("#cviconmenu").prop("checked",!1);var n=r.ui.position.startX-1,s=r.ui.position.startY,l=r.id,c=r.ui.styles.color,p=JSON.parse('{"_type":"icon","id":"'+l+'","iconclass":"'+t+'","children":[], "ui":{"position":{"startX":'+n+',"startY":'+s+',"width":20,"height":20,"endX":"","left":""},"styles":{"color":"'+c+'","background_color":"","bold":false,"italic":false,"align":"left","font_size":"12","font_style":""}}}'),_=$("<span />");_.addClass("cd_field cd_icon"),_.addClass(t),_.data("component",p),_.css({"font-size":12,color:"#"+c}),i.before(_),i.remove(),jSortable.resizeWidth(o,!0),jSortable.lineheightSet(o),jSortable.resizeHeight(o)}$(a).addClass("basic_edit"),jSortable.updateCdtool(),$(_).trigger("click"),$("#cview_contextmenu").is(":visible")&&($("#cd_HideLabel").hide(),$("#cd_addLabel").show()),$("#cviconmenu").is(":checked")||$("#cviconmenu").prop("checked",!0),$("#cvlabelmenu").prop("checked",!1),sE()}}))},resizeHeight:function(e){var t=$(".grid-stack").data("gridstack");e||(e=$(".basic_edit").parents(".grid-stack-item")),$(e).each((function(e,a){if(0==$(a).find(".cd_people_image").length){var i=jSortable.returnNodeHeight(a)+2,o=parseInt($(a).css("max-height"));$(a).css("height",i),o&&i>o&&(i=o),t.resize(a,void 0,i)}}))},resizeWidth:function(e,t,a){var i=$(".grid-stack").data("gridstack");e||(e=$(".basic_edit").parents(".grid-stack-item")),$(e).each((function(e,o){var r=(o=$(o)).find(".cd_people_image"),d=o.data("array");if(d)var n=d.data_type;if(0==r.length){var s=parseInt(o.css("max-width")),l=o.outerWidth();s||jSortable.setMaxWidth(o);var c=o.find(".row_separator");if(c.length>0){var p=[];$(c).each((function(e,t){var a=$(t).children(),i=$u.chain(a).map((function(e){return $(e).outerWidth()})).value().reduce((function(e,t){return e+t}),0);$(t).css("width",i+15),p.push(i)}));var _=$u.max(p,(function(e){return e}));t?_<s&&_>l&&(o.css("width",_+50),i.resize(o,_+50,void 0)):_<s&&(o.css("width",_+50),i.resize(o,_+50,void 0))}else{var u=o.find(".cd_field"),g=$(u).filter(".field_valueHolder").data("component"),f=(o.find(".cd_mapping_field"),o.find(".grid-stack-item-content")),h=o.find(".grid-stack-item-content").children(),b=parseInt(f.css("padding-left"))+parseInt(f.css("padding-right"));_=$u.chain(h).map((function(e){return $(e).outerWidth()})).value().reduce((function(e,t){return e+t}),0)+b;if("upcoming_activity"==g._type)_<s&&_>l&&(o.css("width",_+27),i.resize(o,_+27,void 0));else if(a&&"TextArea"==g.data_type){var m=$(h).text();jSortable.widthCalculate($ESAPI.encoder().encodeForHTML(m)).widthPx>550&&(_=530),_<s&&_>l&&(o.css("width",_+20),i.resize(o,_+20,void 0))}else t?_<s&&_>l&&(o.css("width",_+12),i.resize(o,_+12,void 0)):_<s&&(o.css("width",_+12),i.resize(o,_+12,void 0))}jSortable.lineheightSet(o),"TextArea"!=n&&jSortable.resizeHeight(o)}}))},bindHoverBorder:function(e){e||(e=jSortable.cd_selectedGridItem),$(e).each((function(e,t){if(1==$(t).find(".cd_field").length)return $(t).unbind("mousemove mouseout"),!0;$(t).mousemove((function(e){if(!$(e.target).hasClass("cd_hoverBdr")){$(".cd_hoverBdr").removeClass("cd_hoverBdr");var t=$(e.target).closest(".cd_field"),a=$(e.target).closest(".row_separator");t.length>0?$(t).addClass("cd_hoverBdr"):$(a).addClass("cd_hoverBdr")}})),$(t).mouseout((function(e){$(".cd_hoverBdr").removeClass("cd_hoverBdr")}))}))},catchChangeStyle:function(){$(".basic_edit");if($(".basic_edit").hasClass("cd_field field_valueHolder"))$(".basic_edit");else $(".basic_edit").parents(".grid-stack-item");$(".basic_edit")},returnNodeHeight:function(e){e||(e=$(jSortable.cd_selectedGridItem));var t=$(e).find(".row_separator"),a=$(e).find(".grid-stack-item-content"),i=0;if(t.length>0)t.toArray().forEach((function(e){i+=$(e).outerHeight()})),"NaN"!=parseInt($(a).css("padding-top"))&&(i+=parseInt($(a).css("padding-top"))),"NaN"!=parseInt($(a).css("padding-bottom"))&&(i+=parseInt($(a).css("padding-bottom")));else if(a.hasClass("canvas_ignoreField"))i=20;else{var o=$(a).children();$(o).wrapAll("<div id='cd_heightCalc'></div>"),i=$("#cd_heightCalc").outerHeight()+parseInt($(a).css("padding-top"))+parseInt($(a).css("padding-bottom")),$(o).unwrap()}return i},textWidthCal:function(e,t,a){if(a){var i=a*jSortable.cd_singleGridWidth;i>550&&(i=550)}else i=550;$("#grid1").width();var o=$("<span />"),r=t.font_size,d=t.font_style;d&&d.indexOf("ProximaNova")>-1&&(d=d.replace("ProximaNova","CanvasFont")),$(o).addClass("sapnWidth dIB"),$(o).css({"font-family":d,"font-size":r+"px","max-width":i,border:"1px solid transparent","line-height":r+"px"}),$(o).html(e),$("#cv_body").append(o);var n=$(".sapnWidth").outerHeight(),s=Math.ceil($(".sapnWidth").outerWidth());return $(".sapnWidth").remove(),{width:s,height:n}},removeIcon:function(){jSortable.cd_selectedNodeParent;$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");$(".grid-stack").data("gridstack");var e=jSortable.cd_selectedNode.filter((function(e){return $(e).hasClass("cd_field cd_icon")}));$(e).each((function(e,t){var a=$(t).nextAll(".cd_field.field_valueHolder").first(),i=$(a).data("component");$(t).remove(),$(a).unwrap(),i.icon=!1})),jSortable.resizeWidth(jSortable.cd_selectedGridItem),jSortable.lineheightSet(),jSortable.resizeHeight(jSortable.cd_selectedGridItem),sE()},addLabel:function(e,t,a){jSortable.cd_selectedNodeParent,$(".basic_edit");$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit");$(".grid-stack").data("gridstack");var i=jSortable.getSelectedFields(),o=($("#cvlabelmenu").prop("checked"),jSortable.cd_selectedGridItem);"add"==e?(t||jSortable.triggerCatchMoves("addLabel"),$(i).each((function(e,t){($(t).hasClass("cd_field cd_icon")||$(t).hasClass("cd_field cd_label"))&&(t=$(t).nextAll(".cd_field.field_valueHolder").first());var i=$(t).parents(".grid-stack-item"),o=JSON.parse(JSON.stringify($(t).data("component")));if(1==o.label&&!a)return!0;var r=$(t).prev(".cd_field.cd_label");$(t).prevAll(".cd_field.cd_label").first().remove(),$(t).prevAll(".cd_field.cd_icon").first().remove(),$(t).unwrap("span");var d=o.field_label,n=$ESAPI.encoder().encodeForHTML(d);1==o.label&&$(r).remove();var s=JSON.parse(JSON.stringify(o.ui.styles)),l=(o.field_label,o.ui.position.startY),c=o.ui.position.startX-1,p=o.id,_=jSortable.widthCalculate(n),u=JSON.parse('{"_type":"label","children":[],"id":"'+p+'","field_label":"'+n+'", "ui":{"position":{"startX":'+c+',"startY":'+l+',"width":'+_.width+',"height":'+_.height+',"endX":"","left":"","merge_type":"column"},"styles":{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular", "labelAlign":"left"}}}');u.ui.styles=s,1==a&&(u.ui.styles.color="777",delete u.ui.styles.line_through);var g="<label style= 'color:#"+s.color+";text-transform:"+s.text_transform+";font-size: "+s.font_size+"px;' class='cd_field cd_label pR3 "+s.font_style+"' data-component='"+JSON.stringify(u)+"'>"+n+" :  </label>";o.label=!0,o.icon=!1;var f=$(t).parents(".grid-stack-item");$(f).data("_gridstack_node").width;$(t).data("component",o),$(t).css("line-height",""),$(t).before(g),$(t).prev().addBack().wrapAll("<span class='dIB cd_mapping_field cd_label_left' style='line-height: "+s.font_size+"px'></span>"),jSortable.resizeWidth(i,!0)})),jSortable.cd_labelEnable=!0):(t||jSortable.triggerCatchMoves("removeLabel"),$(i).each((function(e,t){var a=$(t).parents(".grid-stack-item"),i=$(t).data("component"),o=$(t).prevAll(".cd_field.cd_label").first(),r=($(t).prevAll(".cd_field.cd_icon").first().remove(),$(t).parents(".grid-stack-item"));$(r).data("_gridstack_node").width;$(o).next("br").remove(),$(o).remove(),$(t).unwrap("span"),i.label=!1,i.icon=!1,i.ui.styles.labelAlign="left",jSortable.removeHoverBindAndRowNode(r),jSortable.resizeWidth(a,!0)})),jSortable.cd_labelEnable=!1),jSortable.bindHoverBorder(o),jSortable.updateCdtool(),jSortable.hideOtherOptions(),$("#cview_contextmenu").hide(),0==$(".basic_edit").length&&($("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable")),sE()},heightset:function(){var e=$(window).height()-$("#cv_editor_header").outerHeight()-$("#mainMenuTabDiv").outerHeight();$("#fields_outer_container").css("height",e-60),$("#editor_container").css("height",e-30)},updateContainerHeight:function(){var e=$("#grid1"),t=e.find(".grid-stack-item");if(t.length>0){var a=$u.max(t.toArray(),(function(e){return $(e).position().top+$(e).outerHeight()})),i=$(a).position().top+$(a).outerHeight();e.outerHeight()<=i&&$("#grid1").css("height",i+10)}},cdViewEdit:function(e,t,a){var i=$("#grid_inner").width();if(e.width<i)var o=i;else if(e.width>i)o=e.width;t?a&&(jSortable.init(o),jSortable.loadWhenEditorOpen(),jSortable.removeWidget(),jSortable.menuToggle(),jSortable.dragUiFixed(),jSortable.heightset()):jSortable.init(o);var r=e.components||[];(jSortable.removeWidget(),r.length<=0)||($("#grid1").width(o),jSortable.addNodes(r,"",!0,"edit"),jSortable.nodeAlignmentMethods(void 0,!0),$("#grid1").find(".grid-stack-item").length>0&&jSortable.enableOrDisableSaveCV(!0),jSortable.sideMenuLimit(),window.removeEventListener("beforeunload",pageReloadChk),Events.isPageLayoutModified=!1,jSortable.updateContainerHeight())},nodeAlignmentMethods:function(e,t,a){e||(e=$("#grid1").find(".grid-stack-item")),t?(jSortable.setMaxWidth(e),jSortable.setMaxHeight(e),jSortable.resizeWidth(e,!0,a)):(jSortable.setMaxWidth(e),jSortable.setMaxHeight(e),jSortable.resizeWidth(e,!0,a),jSortable.lineheightSet(e),jSortable.resizeHeight(e))},addNodes:function(e,t,a,i,o){var r=$(".grid-stack").data("gridstack");$(e).each((function(e,a){var d=JSON.parse(JSON.stringify(a)),n=jSortable.createInnerHtml(a,t),s=$(n)[0].innerHTML,l=a.ui.styles.align;if("left"==l)var c="txtalnLt";else if("right"==l)c="txtalnRt";else c="txtalnMid";if($(s).hasClass("canvas_ignoreField")&&!$(s).hasClass("cd_mapping_field")){var p=$(s).removeClass("canvas_ignoreField");s=$(p).outerHTML();var _=$.parseHTML('<div><div class="grid-stack-item-content canvas_ignoreField">'+s+"</div></div>")}else _=$.parseHTML('<div><div class="grid-stack-item-content">'+s+"</div></div>");if("merge-field"==a._type||"separator"==a._type)$(_).data("nodeData",d);else{var u={field_label:"",_type:"",id:"",data_type:"",UITYPE:"",display_value:"n/a"};u.field_label=d.field_label,u._type=d._type,u.id=d.id,u.data_type=d.data_type,u.UITYPE=d.ui_type,d.display_value&&(u.display_value=d.display_value),$(_).data("array",u),$(_).data("nodeData",d)}if(a.children.length>0)$(_).find(".cd_field.field_valueHolder").mousedown((function(){$(".editorHoverTooltipTxtBack").hide()})),$(_).find(".cd_field.field_valueHolder").mouseout((function(){$(".editorHoverTooltipTxtBack").css({display:"none"})}));else{a.ui.styles.font_size;$(_).find(".grid-stack-item-content").mousedown((function(){$(".editorHoverTooltipTxtBack").hide()})),$(_).find(".grid-stack-item-content").mouseout((function(){$(".editorHoverTooltipTxtBack").css({display:"none"})}))}"edit"==i?r.addWidget(_,a.ui.position.startX,a.ui.position.startY,a.ui.position.width,a.ui.position.height):r.addWidget(_,o.x,o.y,a.ui.position.width,a.ui.position.height),jSortable.bindSmartGuidDraggable();var g=$(_).data("_gridstack_node"),f=g.width,h=g.height,b=g.x,m=g.y;$(_).css({width:f,height:h,left:b,top:m}),"edit"==i&&$(_).find(".grid-stack-item-content").css({"padding-top":a.ui.styles.outer_padding_top,"padding-left":a.ui.styles.outer_padding_left,"padding-right":a.ui.styles.outer_padding_right,"padding-bottom":a.ui.styles.outer_padding_bottom}),"right"==l?$(_).find(".row_separator").addClass("fR"):"left"==l&&$(_).find(".row_separator").addClass("fL"),$(_).find(".grid-stack-item-content").addClass(c),"TextArea"!=a.data_type&&$(_).find(".grid-stack-item-content").addClass("wsNowrap"),jSortable.bindHoverBorder(_),$(_).find(".grid-stack-item-content").trigger("click"),"Image"==a.data_type||"Owner_Photo"==a.data_type?($(_).find(".cd_field.field_valueHolder").css("width","").addClass("w100_per"),jSortable.imageHandling(_)):"edit"!=i&&jSortable.setMaxWidth(_,!0),jSortable.resizeWidth(_),jSortable.lineheightSet(_),jSortable.resizeHeight(_),1==$(_).find(".cd_people_image").length&&$(_).find(".cd_people_image").css({"max-width":f,"max-height":h})})),jSortable.newAddbasicEdit()},createTableStructure:function(e,t,a){if(null==e)var i=jSortable.getDataFromEditor();else i=e;var o=i.length,r=i.rowcount,d="<td></td>",n=$("<table />");$(n).attr({cellspacing:"0",cellpadding:"0"}),$(n).addClass("cview_table cv_view_body"),t&&(a?n.css("width","100%"):n.css("width",t));for(var s=function(e){return e.ui.styles.font_size},l=0;l<o;l++){for(var c=$("<tr />").attr("id","row"+l),p=i[l].length,_=($("#tempDiv > div > table #row"+l),0);_<p;_++){var u=i[l][_];if(!customViewObject.isImageValidationView&&!customViewObject.isReviewProcessView||"button"!==u._type&&"link"!==u._type){u._type;var g=u.ui.position.width;if(u.children.length>0)var f=$u.max(u.children,s).ui.styles.font_size;else if("dummyTd"!=u._type)f=u.ui.styles.font_size;var h=u.first_row,b=(r=u.ui.position.rowCount,u.ui.position.colSpan),m=u.ui.position.startX,v=u.ui.position.startY,y=u.ui.position.height,x=u.lastColumnNode,C=u.rowsLastNode,S=jSortable.preprocess(u),k=(d=$("<td />"),u.ui.styles.align);if("middle"==k)var w="txtalnMid";else if("right"==k)w="txtalnRt";else w="txtalnLt";if(x){$(d).attr({class:w,rowspan:r,colspan:b,"data-gs-width":g,"data-gs-x":m,"data-gs-y":v}).css({"line-height":f+"px"});var j=g/t*100;h&&!C&&(a?$(d).css({width:j+"%"}):$(d).css({width:g}))}else{$(d).attr({class:w,rowspan:r,colspan:b,"data-gs-width":g,"data-gs-x":m,"data-gs-y":v}).css({height:y,"line-height":f+"px"});j=g/t*100;h&&!C&&(a?$(d).css({width:j+"%"}):$(d).css({width:g}))}var N=$(S).data("component");null!=N&&("Owner_Photo"!=N.data_type&&"Image"!=N.data_type||(x?$(d).css({"max-height":y,"max-width":g,width:g}):$(d).css({"max-height":y,"max-width":g,height:y,width:g}))),u.ui.styles.outer_padding_top&&0!=u.ui.styles.outer_padding_top&&$(d).css("padding-top",u.ui.styles.outer_padding_top),u.ui.styles.outer_padding_left&&0!=u.ui.styles.outer_padding_left&&$(d).css("padding-left",u.ui.styles.outer_padding_left),u.ui.styles.outer_padding_right&&0!=u.ui.styles.outer_padding_right&&$(d).css("padding-right",u.ui.styles.outer_padding_right),u.ui.styles.outer_padding_bottom&&0!=u.ui.styles.outer_padding_bottom&&$(d).css("padding-bottom",u.ui.styles.outer_padding_bottom),$(d).append(S),$(c).append(d)}}$(n).append(c)}return n.outerHTML()},percentageViewChange:function(e){var t=customViewObject,a="fitScreen";$("#viewChangeCheckBox").is(":checked")?customViewObject.fluidWidth=!0:(a="showOriginal",customViewObject.fluidWidth=!1),new listViewHandler(t).getSingleRow();var i={modules:[{canvas_viewtype:a}]},o={"X-ZCSRF-TOKEN":csrfParamName+"="+csrfToken};Crm.userDetails.CLIENT_ACCOUNT&&(o["X-CRMPORTAL"]=Crm.userDetails.CLIENT_PORTAL_NAME),(new crmRequestPool).initiate({action:"/crm/v2/settings/modules/"+e,headers:o,data:JSON.stringify(i),contentType:"application/json",type:"PUT",success:function(e){new listViewHandler(t).getSingleRow()},error:function(e){"403"!=e.status&&"400"!=e.status||renderingUtils.displayPermissionDenied()}})},createInnerHtml:function(e,t){var a=jSortable.returnStylejson(e),i=$("<div />"),o="";return o+=jSortable.preprocess(e,t),$(i).addClass(a.alignClass).html(o),$(i).outerHTML()},preprocess:function(e,t){var a="",i=e.children,o=$L(i).toArray().filter((function(e){return"label"===e._type})),r=$L(i).toArray().filter((function(e){return"icon"===e._type}));$(o).each((function(e,t){var a=t.id,o=$L(i).toArray().filter((function(e){return e.id===a&&"field"===e._type}));if(o[0].ignore)t.ignore=!0;else if(0!=o.length){var r=o[0].field_label;t.field_label=$ESAPI.encoder().encodeForHTML(r)}})),$(r).each((function(e,t){var a=$("<span />"),o=t.iconclass;a.addClass(o),t.field_label=a.outerHTML();var r=$L(i).toArray().filter((function(e){return e.id===t.id&&"field"===e._type}));0!=r.length&&r[0].ignore&&(t.ignore=!0)}));var d=$L(i).toArray().filter((function(e){return"separator"!==e._type&&"label"!==e._type&&"icon"!==e._type})),n=$L(d).toArray().map((function(e){return e.ui.position})),s=$u.chain(n.map((function(e){return e.startY}))).uniq().value().length;if("dummyTd"==e._type||"structure"==e._type)return a="<span></span>";var l=e.children;if(0==l.length){if(a=jSortable.returnEachFieldHtml(e,t,!0),e.ignore){var c=$(a).addClass("canvas_ignoreField");a=$(c).outerHTML()}}else{var p=Object.values($u.chain(l).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return e}));$(p).each((function(t,i){for(var o,r="",d=[],n=0;n<i.length;n++)if("label"!=i[n]._type&&"icon"!=i[n]._type)d.push([i[n]]);else{var l=[];l.push(i[n]),null!=i[n+1]&&l.push(i[n+1]),d.push(l),n++}if($(d).each((function(t,a){if(o=$u.chain(a.filter((function(e){return void 0!==e}))).map((function(e){return parseInt(e.ui.styles.font_size)})).max((function(e){return e})).value(),1==a.length)$(a).each((function(t,a){if(r+=jSortable.getNodeStyle(a),e.ignore){var i=$(r).addClass("canvas_ignoreField");r=$(i).outerHTML()}}));else{var i=a.filter((function(e){return"field"===e._type}))[0],d="";if($(a).each((function(e,t){var a=$(jSortable.getNodeStyle(t)).removeClass("cd_mapping_field").outerHTML();d+=a})),"top"==a[0].ui.styles.labelAlign){var n=(d=$("<div>"+d+"</div>")).find(".cd_field.cd_label"),s=$(n).text();s=s.replace(":",""),$(n).text(s),d=d.html()}if(i.label)"left"==i.ui.styles.labelAlign?i.ignore?r+="<span class='cd_mapping_field cd_label_left canvas_ignoreField' style='line-height: "+o+"px'>"+d+"</span>":r+="<span class='cd_mapping_field cd_label_left' style='line-height: "+o+"px'>"+d+"</span>":i.ignore?r+="<span class='cd_mapping_field cd_label_top canvas_ignoreField' style='line-height: "+o+"px'>"+d+"</span>":r+="<span class='cd_mapping_field cd_label_top' style='line-height: "+o+"px'>"+d+"</span>";else i.icon&&(i.ignore?r+="<span class='cd_mapping_field cd_icon_left canvas_ignoreField' style='line-height: "+o+"px'>"+d+"</span>":r+="<span class='cd_mapping_field cd_icon_left' style='line-height: "+o+"px'>"+d+"</span>");d=""}})),1==s)a+=r;else{var c=jSortable.getRowStyle(i,o),p=c.cssClass;a+="<div class='row_separator "+p+"' style='"+c.styles+"'>"+r+"</div>"}}))}return a},returnEachFieldHtml:function(e,t,a){JSON.stringify(e);return jSortable.getNodeStyle(e,"",t,a)},getRowStyle:function(e,t){var a=e[0],i="",o="";return a.ui.styles.outer_padding_top&&(i+="padding-top:"+a.ui.styles.outer_padding_top+"px;"),a.ui.styles.outer_padding_left&&(i+="padding-left:"+a.ui.styles.outer_padding_left+"px;"),a.ui.styles.outer_padding_bottom&&(i+="padding-bottom:"+a.ui.styles.outer_padding_bottom+"px;"),a.ui.styles.outer_padding_right&&(i+="padding-right:"+a.ui.styles.outer_padding_right+"px;"),"right"==a.ui.styles.align?i+="text-align: right;":"middle"==a.ui.styles.align?(i+="text-align: center;",o+="canvas_rowSepW100p"):i+="text-align: left;",{styles:i+="line-height:"+t+"px;",cssClass:o}},getNodeStyle:function(e,t,a,i){var o=jSortable.returnStylejson(e),r=e.field_label,d=JSON.stringify(e),n="";if(null!=t&&""!=t)var s=t;else s=$("<span />");if(null!=e.ui.styles){if($(s).attr("data-component",d),$(s).attr("style",o.style),$(s).addClass(o.cssclass),i&&$(s).attr("title",r),"separator"==e._type){var l=$ESAPI.encoder().encodeForHTML(e.symbol);$(s).append(l),$(s).addClass("cd_field cd_separator")}else if("label"==e._type)if(1==e.ignore){l="";$(s).addClass("cd_field cd_label dNImp")}else{l=e.display_value||e.field_label;$(s).append(l+" : "),$(s).addClass("cd_field cd_label")}else if("icon"==e._type)if(1==e.ignore){l="";$(s).addClass("cd_field cd_icon dNImp")}else{l=$("<span />");$(l).addClass(e.iconclass),$(s).append(l.outerHTML()),$(s).addClass("cd_field cd_icon")}else{if(e.ignore){l="";$(s).append(l),$(s).addClass("cd_field field_valueHolder dNImp").attr("data-rowcomponentid",e.id)}else{var l=e.display_value;$(s).append(l),$(s).addClass("cd_field field_valueHolder").attr("data-rowcomponentid",e.id)}if("button"==e._type?$(s).addClass("cd_btn"):("link"==e._type||"upcoming_activity"==e._type)&&$(s).addClass("cd_others"),"Image"==e.data_type||"Owner_Photo"==e.data_type)"round"==e.ui.styles.shape&&$(s).css("border-radius","50%")}n+=$(s).outerHTML()}else n+="<span class='cd_field'></span>";return n},returnStylejson:function(e){var t="",a="";e.ui&&e.ui.styles&&((t=e.ui.styles.font_style)&&t.indexOf("ProximaNova")>-1&&(t=t.replace("ProximaNova","CanvasFont")),e.ui.styles.color&&(a+="color: #"+e.ui.styles.color+";"),e.ui.styles.font_size&&(a+="font-size:"+e.ui.styles.font_size+"px;",a+="line-height:"+e.ui.styles.font_size+"px;",a+="padding-top:"+e.ui.styles.padding_top+"px;",a+="padding-left:"+e.ui.styles.padding_left+"px;",a+="padding-bottom:"+e.ui.styles.padding_bottom+"px;",a+="padding-right:"+e.ui.styles.padding_right+"px;"),e.ui.styles.background_color&&(a+="background-color: #"+e.ui.styles.background_color+";"),e.ui.styles.line_through&&(a+="text-decoration: line-through;"),e.ui.styles.borderRadius&&(a+="border-radius: "+e.ui.styles.borderRadius+"%;"),e.ui.styles.text_transform&&(a+="text-transform:"+e.ui.styles.text_transform));return{cssclass:t,alignClass:"",style:a}},customDesignJson:function(e,t,a){var i=$("#grid_inner").width();if(e)var o=e;else o=jSortable.eachNode(void 0,t);var r=$u.chain(o).max((function(e){return e.ui.position.endX})).value().ui.position.endX;if(r>i)var d=r;else d=i;if(d=Math.round(d),o.length>0){var n=$u.max(o,(function(e){return e.ui.position.startY+e.ui.position.height}));return{grid_size:d,row_size:n.ui.position.startY+n.ui.position.height,components:o,editorWidth:jSortable.cd_singleGridWidth}}return{grid_size:d,row_size:0,components:o,editorWidth:jSortable.cd_singleGridWidth}},createEachComponentJson:function(e,t,a){return $L(e).toArray().map((function(e){var t=$(e).data("_gridstack_node");if($(e).data("array"))var i=$(e).data("array").data_type,o=$(e).data("array")._type,r=$(e).data("array").UITYPE;if("TextArea"==i)var d=25;else d=t.width;if(a)var n=JSON.parse('{"color":"222","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}');else n=JSON.parse(JSON.stringify($("#textEditorMenu").data("tool")));return n.labelAlign="left",{id:t.id,field_label:t.field_label,display_value:t.display_value,_type:o,label:!1,icon:!1,data_type:i,ui_type:r,_merge_type:t.editorChanges.merge_type,ui:{position:{startX:t.x,startY:t.y,width:d,height:t.height,endX:t.x+d,singleCellWidth:jSortable.cd_singleGridWidth,imageWidth:d},styles:n},children:[]}}))},eachNode:function(e,t){if(null==e)var a=$("#grid1 > .grid-stack-item").not(".cd-stack-placeholder");else a=e;var i=$L(a).toArray().map((function(e){var a=$(e).data("_gridstack_node"),i=$(e).outerWidth(),o=$(e).height(),r=$(e).find(".cd_field"),d=$(e).find(".cd_field.field_valueHolder"),n=$(d).data("component"),s=JSON.parse(JSON.stringify($L(r).toArray().map((function(e){return $(e).data("component")})))),l=$(d).data("toolstyle"),c=n.data_type,p=n.ui_type,_=$(e).find(".grid-stack-item-content"),u={};if(_.hasClass("txtalnMid"))var g="middle";else if(_.hasClass("txtalnRt"))g="right";else g="left";if($(e).data("array")&&(c=$(e).data("array").data_type||c,p=$(e).data("array").UITYPE||p),1==d.length){var f=d.data("component");if("field"!=f._type)var h=f._type;else{h="field";var b=f.label,m=f.icon}}else if(d.length>1)h="merge-field",b=void 0,m=void 0;if(null!=n&&"merge-field"!=a._type)s[0].ui.styles;else if(""!=l&&l)JSON.parse(JSON.stringify(l));else JSON.parse('{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}');if(d.length>1||null==$(d).data("component"));else $(d).data("component").label,$(d).data("component").icon;s.length<=1?(s=[],(u=n.ui.styles).outer_padding_top=parseInt($(e).find(".grid-stack-item-content").css("padding-top")),u.outer_padding_left=parseInt($(e).find(".grid-stack-item-content").css("padding-left")),u.outer_padding_right=parseInt($(e).find(".grid-stack-item-content").css("padding-right")),u.outer_padding_bottom=parseInt($(e).find(".grid-stack-item-content").css("padding-bottom"))):(u.outer_padding_top=parseInt($(e).find(".grid-stack-item-content").css("padding-top")),u.outer_padding_left=parseInt($(e).find(".grid-stack-item-content").css("padding-left")),u.outer_padding_right=parseInt($(e).find(".grid-stack-item-content").css("padding-right")),u.outer_padding_bottom=parseInt($(e).find(".grid-stack-item-content").css("padding-bottom")),u.align=g);var v=n.display_value;null==v&&"Image"!=c&&"Owner_Photo"!=h?v="n/a":null==v&&(v="<img onerror='emptyImgRemove(this);' data-cvsrc='"+Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module=Leads&entityId=111113000000037829&actionName=readImage&encfileId=' data-fileid='n/a' class='cd_people_image'/>");var y={id:n.id,componentid:n.componentid,field_label:n.field_label,display_value:v,_type:h,label:b,icon:m,data_type:c,ui_type:p,_merge_type:n.merge_type,ui:{position:{startX:a.x,startY:a.y,width:i,height:o,endX:a.x+a.width,singleCellWidth:jSortable.cd_singleGridWidth,singleCellHeight:jSortable.cd_singleRowHeight,imageWidth:a.width},styles:u},children:s};return d.length>1&&((new ComponentProcessor).removeUnwantedKeys(y),delete y.label,y._type="merge-field"),t&&((new ComponentProcessor).removeUnwantedKeys(y),$(y.children).each((function(){(new ComponentProcessor).removeUnwantedKeys(this)}))),y}));return $u.sortBy(i,(function(e){return e.ui.position.startX})).sortBy((function(e){return e.ui.position.startY}))},allMergeNodes:function(e){return"field"==e._type?e:($(e).each((function(e,a){var i=jSortable.allMergeNodes(a.children);t.push(i)})),t);var t},fieldAdd:function(e){jSortable.newAddbasicEdit()},eachNodeWidthAdjest:function(e,t){if(null==e)e=jSortable.customDesignJson();var a=e.components;if(!t)t=jSortable.grid_size;if(a&&a.length){var i=$u.max(a,(function(e){return e.ui.position.startY+e.ui.position.height})),o=i.ui.position.startY+i.ui.position.height;return $(a).each((function(e,i){if("merge-field"==i._type)var o=$L(i.children).toArray().filter((function(e){return"TextArea"===e.data_type})).length;else o=0;var r=$u.chain(i.children).map((function(e){return e.ui.styles.align})).uniq().value(),d=!0;if(r.length>1)d=!1;else if("right"==r[0]||"middle"==r[0])d=!1;if(d&&"Image"!=i.data_type&&"TextArea"!=i.data_type&&0==o&&"Owner_Photo"!=i.data_type&&"TextArea"!=i.data_type&&0==o){var n=jSortable.horizontalDistrubNodes(a,i);if(n){var s=n.ui.position.startX;i.ui.position.startX<s&&(i.ui.position.width=n.ui.position.startX-i.ui.position.startX,i.ui.position.endX=i.ui.position.startX+i.ui.position.width)}else i.ui.position.width=t-i.ui.position.startX,i.ui.position.endX=i.ui.position.startX+i.ui.position.width}})),$(a).each((function(e,t){var i=jSortable.verticalDistrubNodes(a,t);if(i){var r=i.ui.position.startY,d=t.ui.position.startY;t.ui.position.startX,t.ui.position.width,t.ui.position.height;d<r&&(t.ui.position.height=i.ui.position.startY-t.ui.position.startY)}else t.ui.position.height=o-t.ui.position.startY})),a}},horizontalDistrubNodesRightside:function(e,t,a){for(var i=t.ui.position.startY,o=t.ui.position.startX,r=(t.ui.position.height,[]),d=0;d<e.length;d++){var n=e[d];if(n.ui.position.startX!=t.ui.position.startX&&o<n.ui.position.startX){var s=n.ui.position.startY,l=s+n.ui.position.height;i>=s&&l>i&&r.push(e[d])}}if(0!=r.length)return 1==a?r:$u.min(r,(function(e){return e.ui.position.startX}))},horizontalDistrubNodesLeftsideMax:function(e,t,a){for(var i=t.ui.position.startY,o=t.ui.position.startX,r=i+t.ui.position.height,d=[],n=0;n<e.length;n++){var s=e[n];if(s.ui.position.startX!=t.ui.position.startX&&o>s.ui.position.startX){var l=s.ui.position.startY,c=l+s.ui.position.height;(i<l&&r>l||i>l&&i<c)&&d.push(e[n])}}if(0!=d.length)return 1==a?d:$u.max(d,(function(e){return e.ui.position.startX}))},horizontalDistrubNodesLeftside:function(e,t,a){for(var i=t.ui.position.startY,o=t.ui.position.startX,r=i+t.ui.position.height,d=[],n=0;n<e.length;n++){var s=e[n];if(s.ui.position.startX!=t.ui.position.startX&&o>s.ui.position.startX){var l=s.ui.position.startY,c=l+s.ui.position.height;(l<=i&&c>i||l>i&&l<r)&&d.push(e[n])}}if(0!=d.length)return 1==a?d:$u.min(d,(function(e){return e.ui.position.startX}))},horizontalDistrubNodes:function(e,t,a){for(var i=t.ui.position.startY,o=t.ui.position.startX,r=i+t.ui.position.height-2,d=[],n=0;n<e.length;n++){var s=e[n];if(s.ui.position.startX!=t.ui.position.startX&&o<s.ui.position.startX){var l=s.ui.position.startY,c=l+s.ui.position.height-2;(i<=l&&r>l||i>=l&&i<c)&&d.push(e[n])}}if(0!=d.length)return 1==a?d:$u.min(d,(function(e){return e.ui.position.startX}))},verticalDistrubNodes:function(e,t,a){for(var i=t.ui.position.startY,o=t.ui.position.startX,r=t.ui.position.endX,d=[],n=0;n<e.length;n++){var s=e[n];if(s.ui.position.startY!=t.ui.position.startY&&i<s.ui.position.startY){var l=s.ui.position.startX,c=s.ui.position.endX;(o<=l&&r>l||o>=l&&o<c)&&d.push(e[n])}}if(0!=d.length)return 1==a?d:$u.min(d,(function(e){return e.ui.position.startY}))},createDummyTdJson:function(e,t,a,i,o){var r=JSON.parse('{"id":"","field_label":"","display_value":"","_type":"dummyTd","label":"","icon":"","data_type":"","ui_type":"","ui":{"position":{"startX":"","startY":"","width":"","height":"","endX":"","singleCellWidth":""},"styles":{"color":"","background_color":"","":"","font_size":"","font_style":"","italic":""}},"children":[]}'),d=$u.max(e,(function(e){return e.ui.position.startY+e.ui.position.height}));r.ui.position.startX=t,r.ui.position.startY=a,r.ui.position.width=i,r.ui.position.endX=t+i;var n=jSortable.verticalDistrubNodes(e,r);if(n)r.ui.position.height=n.ui.position.startY-a;else{var s=d.ui.position.startY+d.ui.position.height;r.ui.position.height=s-a}if(o)return r;var l=jSortable.horizontalDistrubNodesLeftside(e,r);return l?r.ui.position.startX=l.ui.position.startX:(r.ui.position.startX=0,r.ui.position.width=i+t),r},arrangeAdjestOutput:function(e,t){var a=Object.values($u.chain(e).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return $u.sortBy(e,(function(e){return e.ui.position.startX}))})),i=[];return $(a).each((function(a,o){var r=o.map((function(e){return e.ui.position})).map((function(e){return e.width})).reduce((function(e,t){return e+t}),0),d=o.length;if(r!=t){for(var n=[],s=0;s<d;s++){var l=o[s],c=(o[s+1],jSortable.horizontalDistrubNodesRightside(e,l));if(c)c.ui.position.startX;else;if(l.ui.position.endX!=t)if(null==c){var p=t-l.ui.position.endX,_=jSortable.createDummyTdJson(e,l.ui.position.endX,l.ui.position.startY,p,!0);n.push(_)}else if(c.ui.position.startX!=l.ui.position.endX){p=c.ui.position.startX-l.ui.position.endX,_=jSortable.createDummyTdJson(e,l.ui.position.endX,l.ui.position.startY,p,!0);n.push(_)}}o.push.apply(o,n),i.push(o)}else i.push(o)})),jSortable.orderingByXvalue(i)},orderingByXvalue:function(e){var t=[];return $(e).each((function(e,a){t.push($u.sortBy(a,(function(e){return e.ui.position.startX})))})),t},addDummyJson:function(e,t){var a=jSortable.arrangeAdjestOutput(e,t),i=Lyte.registeredMixins["crm-utilities"].flatten(a),o=i.filter((function(e){return"dummyTd"===e._type})),r=i.filter((function(e){return"dummyTd"!==e._type}));o=Object.values($u.chain(o).groupBy((function(e){return e.ui.position.startX&&e.ui.position.width})).value()).map((function(e){return $u.min(e,(function(e){return e.ui.position.startY}))}));$.merge(r,o);var d=Object.values($u.chain(r).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return e}));return $(d).each((function(e,t){for(var a=function(e){return e.ui.position.startY>=n},o=function(e){return e.ui.position.startY},r=0;r<t.length;r++){var d=t[r];if("dummyTd"!=d._type){var n=d.ui.position.startY,s=d.ui.position.startX,l=(d.ui.position.startY,d.ui.position.height,d.ui.position.endX,d.ui.position.startX),c=jSortable.horizontalDistrubNodesLeftside(i,d),p=jSortable.horizontalDistrubNodesLeftside(i,d,!0),_=$L(p).toArray().filter(a);if(_.length>0)var u=$u.min(_,o);else u=void 0;var g=jSortable.horizontalDistrubNodesLeftsideMax(i,d);if(0!=d.ui.position.startX)if(c)if(u){if(0!=(f=s-(h=jSortable.findClosestXaxis(i,d)))){b=jSortable.createDummyTdJson(i,h,n,f,!0);t.push(b),i.push(b)}}else{var f,h=jSortable.findClosestXaxis(i,d);if(0!=(f=s-g.ui.position.endX)){b=jSortable.createDummyTdJson(i,h,n,f,!0);t.push(b),i.push(b)}}else{var b=jSortable.createDummyTdJson(i,0,n,l,!0);t.push(b),i.push(b)}}}})),d},findClosestXaxis:function(e,t){var a=$u.without(e,t).filter((function(e){return e.ui.position.startX<t.ui.position.startX})),i=t.ui.position.startY,o=a.filter((function(e){return e.ui.position.startY<=i&&e.ui.position.startY+e.ui.position.height>i}));return o.length>0?$u.max(o,(function(e){return e.ui.position.startX})).ui.position.endX:0},verticalAllDistrubNodes:function(e,t,a){t.ui.position.startY;for(var i=t.ui.position.startX,o=t.ui.position.endX,r=[],d=0;d<e.length;d++){var n=e[d];if(n.ui.position.startY!=t.ui.position.startY){var s=n.ui.position.startX;i<s&&o>s&&r.push(e[d])}}if(0!=r.length)return 1==a?r:$u.min(r,(function(e){return e.ui.position.startY}))},getDataFromEditor:function(e,t){if(null==e)e=jSortable.eachNode();null==t&&(t=jSortable.grid_size);$("#grid1 > .grid-stack-item").not(".cd-stack-placeholder");for(var a=[],i=JSON.parse(JSON.stringify(e)),o=jSortable.customDesignJson(i,!1,t),r=jSortable.eachNodeWidthAdjest(o,t),d=jSortable.addDummyJson(r,t),n=Lyte.registeredMixins["crm-utilities"].flatten(d),s=$u.min(n,(function(e){return e.ui.position.startY})),l=Object.values($u.chain(n).groupBy((function(e){return e.ui.position.startX})).value()).map((function(e){return e[0].ui.position.startX})),c=[],p=function(e){return e.ui.position.startY},_=function(e){return e},u=0;u<n.length;u++){if(b=jSortable.rowSpanDistrubNode(n,n[u],!0)){b.push(n[u]);var g=Object.values($u.chain(b).groupBy(p).value()).map(_),f=$(g).length;n[u].ui.position.rowCount=f}else n[u].ui.position.rowCount=1}var h=function(e){return e.ui.position.startX};for(u=0;u<n.length;u++){var b;if(b=jSortable.verticalAllDistrubNodes(n,n[u],!0)){b.push(n[u]);g=Object.values($u.chain(b).groupBy(h).value()).map(_);var m=$(g).length;n[u].ui.position.colSpan=m}else n[u].ui.position.colSpan=1}if(0==s.ui.position.startY){var v=n.filter((function(e){return 0===e.ui.position.startY}));$(v).each((function(e,t){t.ui.position.startY=2}));var y=0}else y=s.ui.position.startY-1;for(u=0;u<l.length;u++){(j=JSON.parse('{"id":"","field_label":"","display_value":"","_type":"dummyTd","label":"","icon":"","data_type":"","ui_type":"","ui":{"position":{"startX":"","startY":"","width":"","height":"","endX":"","singleCellWidth":""},"styles":{"color":"","background_color":"","":"","font_size":"","font_style":"","italic":""}},"first_row": true, "children":[]}')).ui.position.startX=l[u],j.ui.position.startY=y,l[u+1]?j.ui.position.width=l[u+1]-l[u]:j.ui.position.width=o.grid_size-l[u],j.ui.position.endX=l[u]+j.ui.position.width,j.ui.position.height=1,c.push(j),n.push(j)}if(0!=n.length){var x=Object.values($u.chain(n).groupBy((function(e){return e.ui.position.startY})).value()).map((function(e){return e})),C=x.length;for(u=0;u<C;u++){var S=x[u],k=x[u+1],w=S[0].ui.position.startY,j=JSON.parse('{"id":"","field_label":"","display_value":"","_type":"dummyTd","label":"","icon":"","data_type":"","ui_type":"","ui":{"position":{"startX":-1,"startY":"","width":1,"height":1,"endX":"","singleCellWidth":"","rowCount":1,"colSpan":1},"styles":{"color":"","background_color":"","":"","font_size":"","font_style":"","italic":""}},"first_row": true, "children":[]}');if(k){var N=k[0].ui.position.startY;j.ui.position.height=N-w}S.push(j);var I=$u.sortBy(S,(function(e){return e.ui.position.startX}));a.push(I)}}var z=a[a.length-1];return $(z).each((function(e,t){t.rowsLastNode=!0})),a},rowSpanDistrubNode:function(e,t,a){for(var i=t.ui.position.startY,o=(t.ui.position.startY,t.ui.position.heigth),r=(t.ui.position.startX,o=i+t.ui.position.height,[]),d=0;d<e.length;d++){var n=e[d];if(n.ui.position.startX!=t.ui.position.startX){var s=n.ui.position.startY;n.ui.position.height;s>=i&&s<o&&r.push(e[d])}}if(0!=r.length)return 1==a?r:$u.min(r,(function(e){return e.ui.position.startX}))},galleryEachNode:function(e,t){if(null==e)var a=$("#grid3 > .grid-stack-item").not(".cd-stack-placeholder");else a=e;return $L(a).toArray().map((function(e){var a=$(e).data("_gridstack_node"),i=$(e).outerWidth(),o=$(e).outerHeight(),r=$(e).find(".cd_field"),d=$(e).find(".cd_field.field_valueHolder"),n=$(d).data("component"),s=JSON.parse(JSON.stringify($L(r).toArray().map((function(e){return $(e).data("component")})))),l=$(d).data("toolstyle"),c=n.data_type,p=n.ui_type,_=$(e).find(".grid-stack-item-content"),u={};if(_.hasClass("txtalnMid"))var g="middle";else if(_.hasClass("txtalnRt"))g="right";else g="left";if(1==d.length){var f=d.data("component");if("field"!=f._type)var h=f._type;else{h="field";var b=f.label,m=f.icon}}else if(d.length>1)h="merge-field",b=void 0,m=void 0;if(null!=n&&"merge-field"!=a._type)s[0].ui.styles;else if(""!=l&&l)JSON.parse(JSON.stringify(l));else JSON.parse('{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}');if(d.length>1||null==$(d).data("component"));else $(d).data("component").label,$(d).data("component").icon;s.length<=1?(s=[],u=n.ui.styles):(u.outer_padding_top=parseInt($(e).find(".grid-stack-item-content").css("padding-top")),u.outer_padding_left=parseInt($(e).find(".grid-stack-item-content").css("padding-left")),u.outer_padding_right=parseInt($(e).find(".grid-stack-item-content").css("padding-right")),u.outer_padding_bottom=parseInt($(e).find(".grid-stack-item-content").css("padding-bottom")),u.align=g);var v={id:n.id,componentid:n.componentid,field_label:n.field_label,display_value:n.display_value,_type:h,label:b,icon:m,data_type:c,ui_type:p,_merge_type:n.merge_type,ui:{position:{startX:a.x,startY:a.y,width:i,height:o,endX:a.x+a.width,singleCellWidth:jSortable.cd_singleGridWidth,singleCellHeight:jSortable.cd_singleRowHeight,imageWidth:a.width},styles:u},children:s};return d.length>1&&(delete v.data_type,delete v.display_value,delete v.field_label,delete v.icon,delete v.id,delete v.componentid,delete v.label,v._type="merge-field"),t&&(delete v.field_label,delete v.display_value,delete v.componentid,$(v.children).each((function(){delete this.field_label,delete this.display_value,delete this.ui_type,delete this.data_type,delete this.componentid}))),v}))},galleryDeleteElement:function(e,t){if(jSortable.triggerCatchMoves("delete"),null==e)e=$(".basic_edit");$(e).each((function(e,t){if(!$(t).hasClass("cd_field cd_separator")){($(t).hasClass("cd_field cd_label")||$(t).hasClass("cd_field cd_icon"))&&(t=jSortable.getSelectedFields(!1,t));var a=jSortable.getSelectedFields(!1,t),i=a.map((function(e){return $(e).data("component")}));if(!$(t).hasClass("grid-stack-item"))var o=$(t).parents(".grid-stack-item");if($(t).hasClass("row_separator"))$(t).remove();else if($(t).hasClass("cd_field field_valueHolder")){var r=i[0];if(1==r.label||1==r.icon){var d=$(a).parent();0==d.prev().length?d.next().remove():d.prev().remove(),d.remove()}else 0==$(a).prev().length?$(a).next().remove():$(a).prev().remove(),$(a).remove()}else if($(t).hasClass("grid-stack-item-content")){var n=$(a).parents(".grid-stack-item");$(n).remove()}else $(t).remove();var s=$(o).find(".row_separator");if(0==$(o).find(".cd_field").length&&$(o).remove(),1==$(o).find(".row_separator").length){var l=$(o).find(".row_separator").children();$(l).unwrap()}$(s).each((function(e,t){0==$(t).children().length&&$(t).remove()}))}}))},sideMenuLimit:function(){jSortable.canvas_fieldCount=$("#grid1").find(".cd_field.field_valueHolder").length;var e=$("#grid2"),t=$("#grid2").find(".cd_field.field_valueHolder");jSortable.canvas_fieldCount<jSortable.canvas_fieldLimit&&$("#grid2").hasClass("cv_disable")?e.removeClass("cv_disable"):jSortable.canvas_fieldCount>=jSortable.canvas_fieldLimit&&e.addClass("cv_disable"),t.length<=0?($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").hide(),$("#noFields").show()):($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").show(),$("#noFields").hide())},createNode:function(e){var t={float:!0,startContainerHt:30,gridPadding:4,gridIntialHeight:200,cellHeight:1,placeholderClass:"cd-stack-placeholder",verticalMargin:0,canvas:!0,width:Math.ceil($("#grid1").width()),acceptWidgets:".grid-stack-item",cancel:!1,cd_fieldDropBeforeAppend:function(e){jSortable.fieldDropBeforeAppend(e)},fieldDropChanges:function(e){jSortable.fieldDropchanges(e)},cd_fieldAdd:function(e){jSortable.fieldAdd(e)},cd_fieldMoveEnd:function(e,t){jSortable.dragOrMoveEnd(e,t)},cd_fieldStart:function(e,t){jSortable.fieldDragStart(e,t)},cd_fieldMove:function(e,t){jSortable.fieldDragMove(e,t)},cd_dragFromSidebar:function(e,t){jSortable.fieldDragSidebar(e,t)},cd_dropAddNode:function(e,t,a){jSortable.fieldDropAddNode(e,t,a)},cd_dropOut:function(e,t){jSortable.dropOut(e,t)},cd_getMaxWidthForElement:function(e){if(e&&e.data_type){var t=Math.ceil(200/jSortable.cd_singleGridWidth)*jSortable.cd_singleGridWidth;return"Image"===e.data_type||"Owner_Photo"===e.data_type?{maxWidth:t,maxHeight:200}:{maxWidth:void 0,maxHeight:void 0}}}};$("#grid1").gridstack(t),$("#grid2 .grid-stack-item").draggable({revert:"invalid",verticalMargin:"1px",handle:".grid-stack-item-content",scroll:!1,appendTo:"body"})},updateNode:function(e,t,a,i){var o=$(jSortable.cd_selectedNode);$(o).each((function(e,i){var o=JSON.parse(JSON.stringify($(i).data("component").ui.styles)),r=o[t];o[t]="align"==t||"font_size"==t||"color"==t||"font_style"==t||"background_color"==t?a:!r,$(i).data("component").ui.styles=o}))},loadWhenEditorOpen:function(){$("#grid2"),$(".grid-stack").data("gridstack");$("#fields_outer_container").perfectScrollbar(),jSortable.groupingused=0,$("#grid_inner").hover((function(){$("#grid1 > .ui-resizable-s").css("opacity","1")}),(function(){$("#grid1 > .ui-resizable-s").css("opacity","0")})),$("#grid1").click((function(e){if(0!=$(e.target).parents(".grid-stack-item").length){e.shiftKey||($(".basic_edit").removeClass("basic_edit"),$(".ignoreFieldSelectedColor").removeClass("ignoreFieldSelectedColor"));var t=$(e.target),a=($(t).hasClass("cd_field"),$(t).parents(".cd_field").length,$(t).hasClass("row_separator"),$(t).hasClass("grid-stack-item-content"),$(t).hasClass("cd_separator")),i=e.target;$(i).hasClass("cd_field")?0==$(i).siblings().length&&0==$(i).parents(".row_separator").length?($(i).parent().addClass("basic_edit"),$(i).parent().addClass("style_copy_node")):($(i).addClass("basic_edit"),$(i).addClass("style_copy_node")):$(i).parent().hasClass("cd_field")?0==$(i).parent().siblings().length&&0==$(i).parents(".row_separator").length?($(i).parents(".grid-stack-item-content").addClass("basic_edit"),$(i).parents(".grid-stack-item-content").addClass("style_copy_node")):($(i).parents(".cd_field").addClass("basic_edit"),$(i).parents(".cd_field").addClass("style_copy_node")):$(i).hasClass("canvas_ignoreField")?($(i).addClass("ignoreFieldSelectedColor"),$(i).find(".cd_field.field_valueHolder").addClass("basic_edit")):$(i).hasClass("row_separator")?$(i).addClass("basic_edit"):$(i).hasClass("grid-stack-item-content")?$(e.target).addClass("basic_edit"):$(i).parent().hasClass("grid-stack-item-content")&&$(i).parent().addClass("basic_edit");var o=$(".basic_edit").parents(".grid-stack-item"),r=($(o).find(".cd_field"),t.parents(".grid-stack-item").data("_gridstack_node")),d=$(".basic_edit").length,n=$L(o).toArray().map((function(e){return $(e).data("_gridstack_node").y})),s=$L(o).toArray().map((function(e){return $(e).data("_gridstack_node").x})),l=$u.uniq(s).length,c=$u.uniq(n).length;if(1!=c&&1!=l||!(d>1||"merge-field"==r.type)?$(".tE_merge").addClass("cv_disable"):($(".tE_merge").removeClass("cv_disable"),d>1?(1==c?$("#textEditorMenu .tE_merge").data("merge-type","column"):$("#textEditorMenu .tE_merge").data("merge-type","row"),$("#textEditorMenu .tE_merge").html("Merge")):$("#textEditorMenu .tE_merge").html("Unmerge")),a){var p=$(t).html();$("#cdSeparatorMenuDropdown").html(p)}$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),$(".basic_edit").hasClass("row_separator")||$(".basic_edit").children(".row_separator")?jSortable.cd_rowSelectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_rowSelectedNode=[],$(".basic_edit").hasClass("grid-stack-item-content")?jSortable.cd_selectedNodeParent=$(".basic_edit"):jSortable.cd_selectedNodeParent=$(".basic_edit").parents(".grid-stack-item-content"),$(".basic_edit").hasClass("grid-stack-item")?jSortable.cd_selectedGridItem=$(".basic_edit"):jSortable.cd_selectedGridItem=$(".basic_edit").parents(".grid-stack-item"),jSortable.updateCdtool();var _=$(jSortable.cd_selectedGridItem).attr("fields-name");0!=$(jSortable.cd_selectedGridItem).length&&("TAGS"==_||$(jSortable.cd_selectedGridItem).find(".cd_btn").length>0||$(jSortable.cd_selectedGridItem).find(".cd_others").length>0||$(jSortable.cd_selectedGridItem).find(".cd_link").length>0)?($("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable"),$("#cvimagesToolbar").hide(),$("#cvtextToolbar").hide(),$("#cvspecialToolbar").show()):0!=$(jSortable.cd_selectedGridItem).length&&!$(jSortable.cd_selectedGridItem).find(".cd_people_image").length>0?($("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable"),$("#cvimagesToolbar").hide(),$("#cvspecialToolbar").hide(),$("#cvtextToolbar").show()):0!=$(jSortable.cd_selectedGridItem).length&&$(jSortable.cd_selectedGridItem).find(".cd_people_image").length>0&&($("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable"),$("#cvtextToolbar").hide(),$("#cvspecialToolbar").hide(),$("#cvimagesToolbar").show()),$("#labelalign_dropdown").hide(),$("#icon_dropdown").hide(),$("#separator_dropdown").hide(),$("#cview_contextmenu").hide(),$(".style_copy_node").removeClass("style_copy_node"),$(".basic_edit_bdr").removeClass("basic_edit_bdr"),sE(e)}})),$("#fontcolor_dropdown > .text-color-code > span").click((function(){var e=$(this).data("textcolor");$("#cd_textColorHolder").removeClass("cvresetcolor"),jSortable.colorUpdate(e),sE()})),$("#fontcolor_dropdown > .background-listof-color-code > span").click((function(){var e=$(this).data("bgcolor");$("#cd_textBgHolder").removeClass("cvresetcolor"),jSortable.backgroundColorUpdate(e),sE()}));$("#grid1").height();$("#sidemenuSearchInput").focus((function(){$("#sidebar_search").addClass("cd_focused")})),$("#sidemenuSearchInput").focusout((function(){$("#sidebar_search").removeClass("cd_focused")})),setTimeout((function(){jSortable.heightset()}),500)},fieldDragStart:function(e,t){var a=$(t).siblings(".grid-stack-item").addClass("cd_moveTrans");"resizestop"!=e.type&&jSortable.triggerCatchMoves("Move"),$(".basic_edit").removeClass("basic_edit"),$(t).find(".grid-stack-item-content").addClass("basic_edit"),jSortable.globleNodesUpdate(),$(a).addClass(""),jSortable.setGridStackNodeHeightWidth(),$("#grid_inner").addClass("editorBgAnimation").removeClass("editorBgAnimationRevert"),"resizestart"==e.type?$(t).append("<div class='nodePosition nodeWidthHeight'><span>W:</span><span id='nodeWidth'></span><span> H:</span><span id='nodeHeight'></span></div>"):"dragstart"==e.type&&$(t).append("<div class='nodePosition nodeXY'><span>X:</span><span id='nodePosiX'></span><span> Y:</span><span id='nodePosiY'></span></div>")},returnNodeFromPosition:function(e,t,a,i,o){var r=$L("#grid1").find(".grid-stack-item").not(".cd-stack-placeholder").toArray().map((function(e){return $(e).data("_gridstack_node")}));if(o)var d=r;else{var n=r.filter((function(a){return a.x===e&&a.y===t}));d=$u.without(r,n[0])}return jSortable.areaIsEmpty(d,e,t,a,i)},findDistrubNodesFromGroup:function(e,t){var a=$(t).offset(),i=$(e).find(".row_separator"),o=$(t).find(".row_separator").length;if(i.length>0){var r=$u.max(i.toArray(),(function(e){return $(e).offset().top})),d=$(r).offset().top+$(r).outerHeight();if(a.top<$(e).offset().top)return{node:e,position:"top"};if(a.top+$(t).outerHeight()/2>d||o>1)return{node:e,position:"bottom"};for(var n=$(e).find(".row_separator"),s=function(e){return $(e).offset().left+$(e).outerWidth()},l=function(e){return $(e).offset().left},c=0;c<n.length;c++){var p=n[c],_=$(p).offset().top,u=_+$(n[c]).outerHeight();if(a.top>=_-1&&u>=a.top-1){var g=$(p).children().not(".cd_field.cd_separator"),f=$u.max(g.toArray(),s),h=$u.min(g.toArray(),l),b=$(f).offset().left+$(f).outerWidth(),m=$(h).offset().left;if(b<a.left)return{node:e,row:p,column:f,position:"after"};if(m>a.left)return{node:e,row:p,column:h,position:"before"};for(var v=0;v<g.length;v++){var y=g[v],x=(S=$(y).offset().left)+$(y).outerWidth();if(a.left>=S&&x>=a.left)return{node:e,row:p,column:g[v],position:"after"}}}}}else{g=$(e).find(".grid-stack-item-content").children().not(".cd_field.cd_separator"),d=$(e).offset().top+$(e).data("_gridstack_node").height;var C=$(e).data("_gridstack_node").height/2;if(a.top<$(e).offset().top)return{node:e,position:"top",type:"singleRow"};if(a.top>$(e).offset().top+C||o>1)return{node:e,position:"bottom",type:"singleRow"};f=$u.max(g.toArray(),(function(e){return $(e).offset().left+$(e).outerWidth()})),h=$u.min(g.toArray(),(function(e){return $(e).offset().left})),b=$(f).offset().left+$(f).outerWidth(),m=$(h).offset().left;if(b<a.left)return{node:e,row:p,column:f,position:"after",type:"singleRow"};if(m>a.left)return{node:e,row:p,column:h,position:"before",type:"singleRow"};for(v=0;v<g.length;v++){var S;y=g[v],x=(S=$(y).offset().left)+$(y).outerWidth();if(a.left>=S&&x>=a.left)return{node:e,row:p,column:g[v],position:"after",type:"singleRow"}}}},lineheightSet:function(e){if(null==e&&(e=$(".basic_edit").parents(".grid-stack-item")),$(e).find(".row_separator,.grid-stack-item-content,.cd_mapping_field,.cd_field").toArray().forEach((function(e){$(e).css("line-height","")})),null!=e){var t=$(e).find(".row_separator");if(t.length>0)$(t).each((function(e,t){var a=$(t).find(".cd_field");$(a).each((function(e,t){var a=parseInt($(t).css("font-size"));$(t).css("line-height",a+"px")}));var i=$u.chain(a).map((function(e){return parseInt($(e).css("font-size"))})).max((function(e){return e})).value();$(t).css("line-height",i+"px")}));else{var a=$(e).find(".grid-stack-item-content").find(".cd_field");if($(a).each((function(e,t){if($(t).hasClass("cd_others"))var a=10;else a=parseInt($(t).css("font-size"));$(t).css("line-height",a+"px")})),1==a.length&&$(a).hasClass("cd_others"))var i=10;else i=$u.chain(a).map((function(e){return parseInt($(e).css("font-size"))})).max((function(e){return e})).value();$(e).find(".grid-stack-item-content").css("line-height",i+"px")}}},distrubNodeFind:function(e,t){if($(".cd_group_holder").remove(),$(".cd_group_holderouter").remove(),$(t).is(":visible")){var a=$(t).data("_gridstack_node"),i=jSortable.returnNodeFromPosition(a.x,a.y,a.width,a.height),o=null==i,r=(a.y,a.height,$(t).outerWidth()),d=$(t).outerHeight();$(t).offset(),$(t).find(".cd_people_image").length;if(o){n=void 0;s&&s.el&&$(s.el).find(".grid-stack-item-content").removeClass("distrubNode_bg").addClass("cv_gray_bdr")}else{var n,s=$u.min([i],(function(e){return e.x})),l=s.height,c=s.width;if(null!=(n=jSortable.findDistrubNodesFromGroup(e,t))){var p=$(n.node).find(".cd_people_image").length;if(1==$(n.node).find(".cd_field.field_valueHolder").length){var _=$(n.node).find(".cd_field.field_valueHolder").data("component");if("upcoming_activity"===_._type||"TextArea"===_.data_type||"Tags"===_.data_type||"button"===_._type||"link"===_._type)var u=!1;else u=!0}else u=!0}$(s.el).find(".grid-stack-item-content").removeClass("cv_gray_bdr").addClass("distrubNode_bg")}if(n&&0==p&&u){if("top"==n.position)n.type,$(n.node).find(".grid-stack-item-content").prepend("<div class='cd_group_holderouter'><span class='cd_group_holder groupIcon_top'></span></div>"),$(s.el).css({height:d+l}),$(n.node).hasClass("distrubNodeOverLap")||$(n.node).css({height:d+$(n.node).outerHeight()});else if("bottom"==n.position)n.type,$(n.node).find(".grid-stack-item-content").append("<div class='cd_group_holderouter'><span class='cd_group_holder groupIcon_bottom'></span></div>"),$(s.el).css({height:d+l}),$(n.node).hasClass("distrubNodeOverLap")||$(n.node).css({height:d+$(n.node).outerHeight()});else if("after"==n.position){if((f=parseInt($(s.el).css("max-width")))>r+c?$(s.el).css({width:r+c}):$(s.el).css({width:f}),null!=n.row)var g=$(n.row).height();$("<span class='cd_group_holder groupIcon_middle' style='height:"+g+"px'></span>").insertAfter($(n.column)),$(n.node).hasClass("distrubNodeOverLap")||(f>r+$(n.node).outerWidth()?$(n.node).css({width:r+$(n.node).outerWidth()}):$(n.node).css({width:f}))}else if("before"==n.position){var f;if((f=parseInt($(s.el).css("max-width")))>r+c?$(s.el).css({width:r+c}):$(s.el).css({width:f}),null!=n.row)g=$(n.row).height();$("<span class='cd_group_holder groupIcon_middle' style='height:"+g+"px'></span>").insertBefore($(n.column)),$(n.node).hasClass("distrubNodeOverLap")||(f>r+$(n.node).outerWidth()?$(n.node).css({width:r+$(n.node).outerWidth()}):$(n.node).css({width:f}))}$(n.node).addClass("distrubNodeOverLap")}}},fieldDragMove:function(e,t,a){var i=$(t).data("_gridstack_node"),o=jSortable.returnNodeFromPosition(i.x,i.y,i.width,i.height),r=null==o,d=(i.y,i.height,i.width),n=i.height,s=($(t).offset(),$(t).position()),l=$(t).find(".cd_people_image").length,c=$(t).find(".cd_field.field_valueHolder");if(1==c.length)if(null!=(g=$(c).data("component"))){var p=g._type,_=g.data_type;if("upcoming_activity"===p||"Tags"===_||"TextArea"===_||"button"===p||"link"===p)var u=!1;else u=!0}else{var g;p=(g=$(t).data("array"))._type,_=g.data_type;if("upcoming_activity"===p||"Tags"===_||"TextArea"===_||"button"===p||"link"===p)u=!1;else u=!0}else u=!0;if(clearTimeout(jSortable.distrubNodeTimer),!r&&0==l&&u){var f=$u.min([o],(function(e){return e.x}));f.height,f.width;0==$(".distrubNodeOverLap").length?jSortable.distrubNodeTimer=setTimeout((function(){jSortable.distrubNodeFind(o.el,t)}),300):jSortable.distrubNodeFind(o.el,t)}else $(".cd_group_holder").remove(),$(".cd_group_holderouter").remove(),$(".distrubNodeOverLap").length>0&&0==$(".distrubNodeOverLap").find(".cd_people_image").length&&(jSortable.applyGridStackNodeWidth($(".distrubNodeOverLap")),$(".distrubNodeOverLap").removeClass("distrubNodeOverLap"),$(".distrubNode_bg").removeClass("distrubNode_bg").addClass("cv_gray_bdr"));jSortable.getSelectedFields();if("resize"==e.type){var h=$(t).data("array");if(h)var b=h.data_type;0==$(t).find(".cd_people_image").length&&"TextArea"!=b&&jSortable.resizeHeight($(t)),1==$(t).find(".cd_people_image").length&&$(t).find(".cd_people_image").css({"max-width":d-4,"max-height":n}),(1==!$(t).find(".grid-stack-item-content").children().length&&0==!$(t).find(".row_separator").length||$(t).find(".row_separator").length>0)&&jSortable.resizeHeight()}$(t).find(".nodePosition").show(),"drag"==e.type?($("#nodePosiX").html(parseInt(s.left)+", "),$("#nodePosiY").html(parseInt(s.top))):"resize"==e.type&&($("#nodeWidth").html(parseInt($(t).width())+", "),$("#nodeHeight").html(parseInt($(t).height())))},dragOrMoveEnd:function(e,t){var a=$(".grid-stack").data("gridstack");if($(".cd_moveTrans").removeClass("cd_moveTrans"),"resizestop"!=e.type)jSortable.autoMerge(t),$(".distrubNodeOverLap").removeClass("distrubNodeOverLap"),$(".distrubNode_bg").removeClass("distrubNode_bg"),jSortable.resizeWidth(void 0,!0);else{var i=$(t).data("_gridstack_node"),o=$("#grid1").data("gridstack").grid.nodes,r=o.filter((function(e){return e.x===i.x&&e.y===i.y})),d=$u.without(o,r[0]),n=jSortable.areaIsEmpty(d,i);if(n){var s=n.x-i.x;a.resize(t,s)}if(1==$(t).find(".cd_field.field_valueHolder").length){var l=i.width,c=i.height,p=$(t).find(".cd_field.field_valueHolder").data("component");p.ui.position.width=l-4,p.ui.position.height=c,1==$(t).find(".cd_people_image").length&&$(t).find(".cd_people_image").css({"max-width":l-4,"max-height":c})}}$(jSortable.cd_selectedNodeParent).trigger("click"),$(t).find("small").remove();var _=jSortable.eachNode();if(_.length>0){var u=jSortable.getDataFromEditor(_,jSortable.grid_size),g=jSortable.createTableStructure(u);$("#struture_demo").html(g),$("#table_demo").html(g),$("#table_demo > table").addClass("struture_demo")}$("#grid_inner").addClass("editorBgAnimationRevert").removeClass("editorBgAnimation"),$(t).find(".nodePosition").remove()},setGridStackNodeHeightWidth:function(e){null==e&&(e=$("#grid1 > .grid-stack-item")),$(e).each((function(e,t){var a=$(t).outerHeight(),i=$(t).outerWidth();$(t).data("nodeHeight",a),$(t).data("nodeWidth",i)}))},applyGridStackNodeWidth:function(e){null==e&&(e=$("#grid1 > .grid-stack-item")),$(e).each((function(e,t){var a=$(t).data("nodeHeight"),i=$(t).data("nodeWidth");$(t).height(a),$(t).width(i)}))},fieldDragSidebar:function(e,t){jSortable.fieldDragMove(e,t.helper)},dropOut:function(e,t){var a=t.draggable;$(a).removeAttr("style"),$(t.helper).find(".cd_field").removeAttr("style");var i=$ESAPI.encoder().encodeForHTML($(t.draggable).data("array").field_label);$(a).find(".cd_field.field_valueHolder").addClass("sidebar_DragIcon"),$(a).find(".grid-stack-item-content").addClass("sidebar_spacing"),$(a).find(".cd_field.field_valueHolder").html(i),$(a).find(".nodePosition").remove()},fieldDropAddNode:function(e,t,a){var i=$(e.target).data("array"),o=(i.data_type,$(".grid-stack").data("gridstack")),r=i.display_value;null==i.display_value&&(r="n/a");var d="<span>"+r+"</span>",n=$(e.target).data("array").field_label,s=$ESAPI.encoder().encodeForHTML(n),l=(jSortable.widthCalculate(s),$("#textEditorMenu").data("tool"));parseInt(l.font_size),parseInt(l.fontStyle_color),l.text_transform;$(e.target).removeClass("cv_bgYellow"),$(e.target).addClass("basic_edit"),$(e.target).find(".sidebar_spacing").removeClass("sidebar_spacing"),$(e.target).find(".cd_field.field_valueHolder").removeClass("sidebar_DragIcon");var c=n+" : "+$(d).text();if("Image"==i.data_type||"Owner_Photo"==i.data_type)c=$(d).html(),$(e.target).find(".cd_field.field_valueHolder").html(c),$(e.target).css({width:64,height:64}),$(e.target).find(".cd_people_image").css({"max-width":"60px","max-height":"60px"});else{$(e.target).find(".cd_field.field_valueHolder").text(c);var p=jSortable.textWidthCal($ESAPI.encoder().encodeForHTML(c),l);$(e.target).css({width:p.width+25,height:p.height}),jSortable.lineheightSet($(e.target)),jSortable.resizeHeight($(e.target)),o.resize($(e.target),void 0,$(e.target).outerHeight())}$(e.target).append("<div class='nodePosition'><span>X:</span><span id='nodePosiX'></span><span>Y:</span><span id='nodePosiY'></span></div>")},autoMerge:function(e,t){var a=$(e).data("_gridstack_node"),i=$(".grid-stack").data("gridstack"),o=(a.el,a.x),r=a.y,d=(a.width,a.height,a._beforeDragX),n=a._beforeDragY,s=(Math.abs(o-d),Math.abs(r-n),$(e).find(".cd_field"),jSortable.returnNodeFromPosition(a.x,a.y,a.width,a.height)),l=null==s;if(s)var c=$(s.el).find(".cd_field.field_valueHolder").data("component");$(a.el).find(".cd_field.field_valueHolder").data("component");if(l)jSortable.setMaxWidth(void 0,!0),jSortable.setMaxHeight(void 0,!0);else if("Image"==c.data_type||"Owner_Photo"==c.data_type||"button"==c._type||"TextArea"==c.data_type||"upcoming_activity"==c._type||"link"==c._type)1==t?jSortable.deleteElement(e):(i.move(a.el,a._beforeDragX,a._beforeDragY),$(a.el).css({left:a._beforeDragX,top:a._beforeDragY}));else if(1!=$(e).find(".cd_field.field_valueHolder").length||"Image"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"Owner_Photo"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"button"!=$(e).find(".cd_field.field_valueHolder").data("component")._type&&"TextArea"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"upcoming_activity"!=$(e).find(".cd_field.field_valueHolder").data("component")._type&&"link"!=$(e).find(".cd_field.field_valueHolder").data("component")._type)if($(".cd_group_holder").length>0||$(".cd_group_holderouter").length>0){$(e).find(".grid-stack-item-content").addClass("basic_edit"),$(s.el).find(".grid-stack-item-content").addClass("basic_edit");var p=$(e).find(".grid-stack-item-content").clone(!0),_=$(p).children();if($(".cd_group_holderouter").length>0){var u=$(".cd_group_holderouter");if(0==$(u).siblings(".row_separator").length){if($(u).parent().hasClass("txtalnLt"))var g="txtalnLt fL";else if($(u).parent().hasClass("txtalnRt"))g="txtalnRt fR";else g="txtalnMid canvas_rowSepW100p";$(u).siblings().wrapAll("<div class='row_separator "+g+"' ></div>")}if($(_).insertAfter(u),!$(_).hasClass("row_separator")){if($(_).find(".cd_field.field_valueHolder").length>0)var f=$(_).find(".cd_field.field_valueHolder").data("component").ui.styles.align;else f=$(_).data("component").ui.styles.align;if("left"==f)g="txtalnLt fL";else if("right"==f)g="txtalnRt fR";else g="txtalnMid canvas_rowSepW100p";1==$(_).length?$(_).wrap("<div class='row_separator "+g+"'></div>"):$(_).length>0&&$(_).wrapAll("<div class='row_separator "+g+"'></div>")}$(u).remove()}else{u=$(".cd_group_holder"),$(u).prev();var h=$(s.el).find(".cd_field.field_valueHolder").last().data("component").ui.position.startY,b=$(s.el).find(".cd_field.field_valueHolder").data("component").ui.position.endX,m=jSortable.dotSeparatorNode(h,b);0==u.prev().length?$(m).insertAfter(u):$(m).insertBefore(u),$(_).insertAfter(u),$(u).remove()}$(e).remove(),jSortable.allNodesPositionUpdate($(s.el)),$(".distrubNodeOverLap").removeClass("distrubNodeOverLap"),$(".distrubNode_bg").removeClass("distrubNode_bg"),$(".basic_edit").trigger("click"),jSortable.setMaxWidth(void 0,!0),jSortable.setMaxHeight(),setTimeout((function(){jSortable.resizeWidth($(s.el)),jSortable.lineheightSet($(s.el)),jSortable.resizeHeight($(s.el)),jSortable.bindHoverBorder($(s.el))}),500),jSortable.groupingused++}else 1==t?jSortable.deleteElement(e):(i.move(e,a._beforeDragX,a._beforeDragY),$(e).css({left:a._beforeDragX,top:a._beforeDragY}));else 1==t?jSortable.deleteElement(e):(i.move(a.el,a._beforeDragX,a._beforeDragY),$(a.el).css({left:a._beforeDragX,top:a._beforeDragY}))},allNodesPositionUpdate:function(e){null==e&&(e=$("#grid1 > .grid-stack-item").not(".cd-stack-placeholder")),$(e).each((function(e,t){var a=$(t).position(),i=$(t).find(".row_separator");if(i.length>0)$(i).each((function(e,t){var i=$(t).find(".cd_field"),o=$(t).position();$(i).each((function(e,t){var i=$(t).data("component"),r=$(t).position().left,d=$(t).outerWidth();i.ui.position.startY=a.top+o.top,i.ui.position.startX=a.left+r,i.ui.position.startX=a.left+r+d}))}));else{var o=$(t).find(".cd_field");$(o).each((function(e,t){var i=$(t).data("component"),o=$(t).position().left,r=$(t).outerWidth();i.ui.position.startY=a.top,i.ui.position.startX=a.left+o,i.ui.position.startX=a.left+o+r}))}}))},dotSeparatorNode:function(e,t){var a=JSON.parse('{"_type":"separator", "children":[], "symbol":".", "ui":{"position":{"startX":'+t+',"startY":'+e+',"width":1,"height":2,"endX":"","left":"","merge_type":"column"},"styles":{"color":"","background_color":"","bold":false,"italic":false,"align":"left","font_size":"14","font_style":"CanvasFontRegular"}}}'),i=$("<span />");return $(i).addClass("cd_field cd_separator"),$(i).append(a.symbol),$(i).data("component",a),i},findEmptySpace:function(e,t,a,i){$(".grid-stack").data("gridstack");var o=t+i,r=e;a=a,i=i;if(null==jSortable.returnNodeFromPosition(r,o,a,i,!0))return{x:r,y:o};var d=jSortable.returnNodeFromPosition(r,o+1,a,i,!0);return jSortable.findEmptySpace(d.x,d.y,d.width,d.height)},isIntercepted:function(e,t){return!(e.x+e.width<=t.x||t.x+t.width<=e.x||e.y+e.height-2<=t.y||t.y+t.height<=e.y+2)},areaIsEmpty:function(e,t,a,i,o){var r={x:t||0,y:a||0,width:i||1,height:o||1};return e.find(function(e){return jSortable.isIntercepted(e,r)}.bind(this))},fieldDropBeforeAppend:function(e){var t=$(e).data(),a={array:JSON.parse(JSON.stringify($(e).data("array"))),x:t.gsX,y:t.gsY,width:t.width,height:t.height};jSortable.triggerCatchMoves("add",a)},fieldDropchanges:function(e){var t=$(".grid-stack").data("gridstack"),a=$(e).data("_gridstack_node"),i=a.x,o=a.y;$(e).css({left:i,top:o}).removeAttr("data-gs-x data-gs-y data-gs-width data-gs-height"),$(e).removeClass("cd_pF");var r=$("#textEditorMenu").data("tool");r.labelAlign="left",$(e).find(".cd_field.field_valueHolder").data("toolstyle",r),$(".style_copy_node").removeClass("style_copy_node"),$(e).find(".cd_field.field_valueHolder").addClass("style_copy_node");var d=jSortable.createEachComponentJson(e,void 0,!0);$(e).find("span").data("component",d[0]);var n=$(e).data("array"),s=n.display_value;if(null==s&&"Image"!=n.data_type&&"Owner_Photo"!=n.data_type?s="n/a":null==s&&(s="<img onerror='emptyImgRemove(this);' data-cvsrc='"+Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module=Leads&entityId=111113000000037829&actionName=readImage&encfileId=' data-fileid='n/a' class='cd_people_image'/>"),$(e).find("span").html(s),$(e).find(".cd_field.field_valueHolder").data("array",n),$(e).find(".cd_field .cd_style_inherit").length>0)$(e).find(".cd_field").find(".cd_style_inherit").text();else $(e).find(".cd_field").text();$(".cv_bgYellow").removeClass("cv_bgYellow");var l=$("#grid1");l.find(".grid-stack-item-content").removeClass("cv_gray_bdr"),$("#grid_outer").removeClass("cv_background_bg"),jSortable.bindSmartGuidDraggable(),jSortable.newAddbasicEdit(),$(e).find(".grid-stack-item-content").click(),"Image"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type&&"Owner_Photo"!=$(e).find(".cd_field.field_valueHolder").data("component").data_type||$(e).find(".cd_field.field_valueHolder").addClass("w100_per"),$(e).find(".grid-stack-item-content").mousedown((function(){$(".editorHoverTooltipTxtBack").hide()})),$(e).find(".grid-stack-item-content").mouseout((function(){$(".editorHoverTooltipTxtBack").css({display:"none"})}));var c=$(e).find(".cd_field").data("component");if("Image"==c.data_type){var p=Math.round(64/jSortable.cd_singleGridWidth),_=60/jSortable.cd_singleRowHeight;t.resize(e,p,_),$(e).css({width:"64px",height:"64px"}),1==$(e).find(".cd_people_image").length&&$(e).find(".cd_people_image").css({"max-width":"60px","max-height":"60px"}),jSortable.imageHandling(e)}else if("Owner_Photo"==c.data_type){p=Math.round(64/jSortable.cd_singleGridWidth),_=60/jSortable.cd_singleRowHeight;t.resize(e,p,_),$(e).css({width:"64px",height:"64px"}),1==$(e).find(".cd_people_image").length&&$(e).find(".cd_people_image").css({"max-width":"60px","max-height":"60px"}),jSortable.imageHandling(e)}else{"TextArea"!=c.data_type&&$(e).find(".grid-stack-item-content").addClass("wsNowrap");jSortable.eachNode();"Tags"!=c.data_type&&"button"!=c._type&&"link"!=c._type&&"upcoming_activity"!=c._type&&jSortable.addLabel("add",!0,!0)}if($(e).is(":visible")){$("#sidebar_search").find("input").val("");$(".distrubNode_bg").removeClass("distrubNode_bg"),"Image"!=c.data_type&&"Owner_Photo"!=c.data_type&&jSortable.nodeAlignmentMethods(e,!1,!0),jSortable.search()}jSortable.autoMerge(e,!0),$(e).find(".grid-stack-item-content").trigger("click"),l.find(".grid-stack-item").length>0&&jSortable.enableOrDisableSaveCV(!0),jSortable.sideMenuLimit(),$("#grid_inner").addClass("editorBgAnimationRevert").removeClass("editorBgAnimation"),$(e).find(".nodePosition").remove()},imageHandling:function(e){(e=$(e)).hasClass("cd_people_image")||(e=e.find(".cd_people_image"));var t=e.data("fileid");if("n/a"==t)emptyImgRemove(e);else{var a=e.data("cvsrc")+t;e.attr("src",a)}},setMaxHeight:function(e,t,a){$(".grid-stack").data("gridstack");null==e&&(e=a?$("#"+a).find(".grid-stack-item"):$("#grid1").find(".grid-stack-item")),$(e).each((function(a,i){var o=$(i).outerHeight(),r=jSortable.verticalDistrubNodesWidthoutObj(e,i);if(r)var d=$(r).position().top-$(i).position().top;else o>(d=$("#grid1").height()-$(i).position().top)&&(d=o);$(i).resizable("option","maxHeight",d),$(i).css("max-height",d),t||jSortable.resizeHeight(i)}))},verticalDistrubNodesWidthoutObj:function(e,t,a){null==e&&(e=$("#grid1").find(".grid-stack-item"));for(var i=$(t).position().top,o=$(t).position().left,r=$(t).position().left+$(t).outerWidth(),d=[],n=0;n<e.length;n++){var s=e[n],l=$(s).position().top;if(l!=i&&i<l){var c=$(s).position().left,p=$(s).position().left+$(s).outerWidth();(o<=c&&r>c||o>=c&&o<p)&&d.push(e[n])}}if(0!=d.length)return 1==a?d:$u.min(d,(function(e){return $(e).position().top}))},setMaxWidth:function(e,t,a){$(".grid-stack").data("gridstack");null==e&&(e=a?$("#"+a).find(".grid-stack-item"):$("#grid1").find(".grid-stack-item")),$(e).each((function(a,i){var o=jSortable.horizontalDistrubNodesRightsideWidthoutObj(e,i);if(o)var r=$(o).position().left-$(i).position().left;else r=jSortable.grid_size-$(i).position().left;$(i).resizable("option","maxWidth",r),$(i).css("max-width",r),t||jSortable.resizeHeight(i)}))},horizontalDistrubNodesRightsideWidthoutObj:function(e,t,a){null==e&&(e=$("#grid1").find(".grid-stack-item"));for(var i=$(t).position().top,o=$(t).position().left,r=i+$(t).height(),d=[],n=0;n<e.length;n++){var s=e[n],l=$(s).position().top,c=$(s).position().left;if(c!=o&&o<c){var p=l+$(s).height();(l>=i&&r>l||l<i&&p>i)&&d.push(e[n])}}if(0!=d.length)return 1==a?d:$u.min(d,(function(e){return $(e).position().left}))},triggerCatchMoves:function(e,t){var a=jSortable.eachNode();if(null!=t)var i={moveType:e,nodes:a,addedJsonArray:t.array};else i={moveType:e,nodes:a,addedJson:void 0};jSortable.cd_undoCatchMoves.length>10&&jSortable.cd_undoCatchMoves.shift(),jSortable.cd_undoCatchMoves.push(i),jSortable.undoRedoEnable()},undoRedoEnable:function(){jSortable.cd_undoCatchMoves.length>0?$("#canvasUndo").removeClass("cv_disable"):$("#canvasUndo").addClass("cv_disable"),jSortable.cd_redoCatchMoves.length>0?$("#canvasRedo").removeClass("cv_disable"):$("#canvasRedo").addClass("cv_disable")},removeFromSidebar:function(e){var t=[],a=[];if($(e).each((function(e,i){"upcoming_activity"==i._type?$("#sidebar_others").empty():"field"===i._type?t.push(i.id):"merge-field"===i._type?$L(i)[0].children.filter((function(e){"field"===e._type&&t.push(e.id)})):"button"===i._type&&a.push(i.id)})),t=$u.uniq(t),a=$u.uniq(a),t.length>0){var i=$L("#sidebar_fields").children().toArray().filter((function(e){return t.find((function(t){return $(e).data("array").id===t}))}));$(i).remove()}if(a.length>0){i=$L("#sidebar_buttons").children().toArray().filter((function(e){return a.find((function(t){return $(e).data("array").id===t}))}));$(i).remove()}},cd_undo:function(e){jSortable.hideOtherOptions();var t={},a=jSortable.cd_undoCatchMoves.pop();if(null!=a)if("add"==a.moveType){var i=jSortable.eachNode();if(null!=a.addedJsonArray)var o={moveType:a.moveType,nodes:i,addedJsonArray:a.addedJsonArray};else o={moveType:a.moveType,nodes:i,addedJson:void 0};jSortable.cd_redoCatchMoves.push(JSON.parse(JSON.stringify(o))),jSortable.addElementToLeftPanel(a.addedJsonArray),jSortable.cd_redoCatchMoves.length>10&&jSortable.cd_redoCatchMoves.shift(),t.components=a.nodes,jSortable.cdViewEdit(t,!0),$("#grid1").find(".grid-stack-item").length>0?jSortable.enableOrDisableSaveCV(!0):jSortable.enableOrDisableSaveCV(!1)}else{var r=jSortable.eachNode();o={moveType:a.moveType,nodes:r,addedJsonArray:void 0};jSortable.cd_redoCatchMoves.push(JSON.parse(JSON.stringify(o))),t.components=a.nodes,"delete"==a.moveType&&jSortable.removeFromSidebar(a.nodes),t.components=a.nodes,jSortable.cdViewEdit(t,!0),$("#grid1").find(".grid-stack-item").length>0?jSortable.enableOrDisableSaveCV(!0):jSortable.enableOrDisableSaveCV(!1)}$(".basic_edit").removeClass("basic_edit"),$("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable"),jSortable.undoRedoEnable(),jSortable.sideMenuLimit(),sE(e)},cd_redo:function(e){jSortable.hideOtherOptions();var t={},a=jSortable.cd_redoCatchMoves.pop();if(null!=a)if("add"==a.moveType){var i=jSortable.eachNode();if(null!=a.addedJsonArray)var o={moveType:a.moveType,nodes:i,addedJsonArray:a.addedJsonArray};else o={moveType:a.moveType,nodes:i,addedJson:void 0};if(jSortable.cd_undoCatchMoves.push(JSON.parse(JSON.stringify(o))),jSortable.cd_undoCatchMoves.length>10&&jSortable.cd_undoCatchMoves.shift(),t.components=a.nodes,jSortable.cdViewEdit(t,!0),"upcoming_activity"==a.addedJsonArray._type)$("#sidebar_others").empty();else{var r="#component_"+a.addedJsonArray.id;$("#fields_outer_container").find(r).remove()}}else{var d=jSortable.eachNode();o={moveType:a.moveType,nodes:d,addedJsonArray:void 0};if(jSortable.cd_undoCatchMoves.push(JSON.parse(JSON.stringify(o))),t.components=a.nodes,"delete"==a.moveType){var n=d.map((function(e){return e.id})),s=a.nodes.map((function(e){return e.id})),l=$u.difference(n,s);$(l).each((function(e,t){var a=d.filter((function(e){return e.id===t}))[0],i={field_label:"",_type:"",id:"",data_type:"",UITYPE:"",display_value:""};i.field_label=a.field_label||a.name,i._type=a._type,i.id=a.id,i.data_type=a.data_type,i.UITYPE=a.ui_type,i.display_value=a.display_value,jSortable.prependDeletedField(i)}))}jSortable.cdViewEdit(t,!0),$("#grid1").find(".grid-stack-item").length>0?jSortable.enableOrDisableSaveCV(!0):jSortable.enableOrDisableSaveCV(!1)}$(".basic_edit").removeClass("basic_edit"),$("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable"),jSortable.undoRedoEnable(),setTimeout((function(){jSortable.resizeHeight(),jSortable.bindHoverBorder()}),500),jSortable.sideMenuLimit(),sE(e)},addElementToLeftPanel:function(e){jSortable.prependDeletedField(e),jSortable.dragUiFixed()},bindSmartGuidDraggable:function(){var e={float:!0,animate:!0,containment:"parent",verticalMargin:"3px",acceptWidgets:".grid-stack-item",cancel:!1,smartGuides:'#grid1 > .grid-stack-item:not(".selected")',snapTolerance:5,beforeStart:function(){var e=$(this);e.hasClass("selected")||(e.siblings(".selected").removeClass("selected"),e.addClass("selected"))}};$("#grid1 .grid-stack-item").draggable(e)},findFieldHtml:function(e){var t=$(e).text();if(""!=t)return t;jSortable.findFieldHtml($(e).children())},widthCalculate:function(e,t){var a=$("#grid1").width()/jSortable.grid_size,i=$("<span />"),o=(jSortable.grid_size,$("#textEditorMenu").data("tool")),r=o.font_size,d=o.font_style;d&&d.indexOf("ProximaNova")>-1&&(d=d.replace("ProximaNova","CanvasFont")),$(i).addClass("sapnWidth dIB"),$(i).css({"font-family":d,"font-size":r+"px"}),$(i).html(e),$("#cv_body").append(i);var n=$(".sapnWidth").width()+20,s=$(".sapnWidth").height(),l=Math.ceil(n/a),c=Math.round(s/1);return $(".sapnWidth").remove(),{width:l,height:c,widthPx:n}},cdPasteStyle:function(e,t){if(jSortable.hideOtherOptions(),e&&""!=e)var a=JSON.parse(JSON.stringify(e));else a=JSON.parse(JSON.stringify(jSortable.copyStyle));t||jSortable.triggerCatchMoves("pasteStyle");var i=a.color,o=parseInt(a.font_size),r=a.font_style;r&&r.indexOf("ProximaNova")>-1&&(r=r.replace("ProximaNova","CanvasFont"));var d=a.background_color,n=a.text_transform,s=a.padding_left,l=a.padding_right,c=a.padding_top,p=a.padding_bottom;if(a.line_through)var _="line-through";else _="";var u=jSortable.cd_selectedNode;$(u).each((function(e,t){var u=_,g=$(t).data("component"),f=$(t).data("component").ui.styles.labelAlign;a.labelAlign=f;var h=$(t).data("component").ui.styles.font_style;h&&h.indexOf("ProximaNova")>-1&&(h=h.replace("ProximaNova","CanvasFont")),$(t).data("component").ui.styles=a,"icon"==g._type||"separator"==g._type?(delete $(t).data("component").ui.styles.line_through,delete $(t).data("component").ui.styles.text_transform,delete $(t).data("component").ui.styles.labelAlign,u="",n=""):"label"==g._type&&(delete $(t).data("component").ui.styles.line_through,u=""),$(t).attr("style",""),$(t).css({color:"#"+i,"font-size":o,"background-color":"#"+d,"line-height":o+"px","padding-left":s+"px","padding-right":l+"px","padding-top":c+"px","padding-bottom":p+"px","text-transform":n,"text-decoration":u}),$(t).removeClass(h).addClass(r)})),jSortable.lineheightSet(jSortable.cd_selectedGridItem),jSortable.resizeHeight(jSortable.cd_selectedGridItem),jSortable.resizeWidth(jSortable.cd_selectedGridItem,!0),$(".basic_edit").trigger("click"),sE()},newAddbasicEdit:function(){$("#grid1 .grid-stack-item-content").mousedown((function(e){$("#textEditorMenu").show();var t=$(".basic_edit").parents(".grid-stack-item");$(t).addClass("cd_selected");var a=$(this).parents(".grid-stack-item").data("_gridstack_node");a.label?($(".tE_lable").find("span").addClass("cv_customCheckBoxChecked"),$(".tE_lable").removeClass("cv_disable")):($(".tE_lable").find("span").removeClass("cv_customCheckBoxChecked"),$(".tE_lable").removeClass("cv_disable")),a.icon?($(".tE_icon").find("span").addClass("cv_customCheckBoxChecked"),$(".tE_icon").removeClass("cv_disable")):($(".tE_icon").find("span").removeClass("cv_customCheckBoxChecked"),$(".tE_icon").removeClass("cv_disable")),jSortable.changeStyles(a)})),$(".grid-stack").on("dragstart",(function(e,t){var a=$(e.target).siblings();$(a).each((function(){$(this).find(".grid-stack-item-content").addClass("cv_gray_bdr")}))})),$(".grid-stack").on("dragstop",(function(e,t){var a=$(e.target).siblings();$(a).each((function(){$(this).find(".grid-stack-item-content").removeClass("cv_gray_bdr")})),$("#grid_outer").removeClass("cv_background_bg")})),$("#grid1 > .grid-stack-item").contextmenu((function(e){if($(".basic_edit").removeClass("basic_edit"),$(".ignoreFieldSelectedColor").removeClass("ignoreFieldSelectedColor"),$(".style_copy_node").removeClass("style_copy_node"),$(e.target).hasClass("cd_field")?($(e.target).addClass("basic_edit"),$(e.target).addClass("style_copy_node")):$(e.target).hasClass("canvas_ignoreField")?($(e.target).addClass("ignoreFieldSelectedColor"),$(e.target).find(".cd_field.field_valueHolder").addClass("basic_edit")):$(e.target).parents().hasClass("cd_field")?($(e.target).parents(".cd_field").addClass("basic_edit"),$(e.target).parents(".cd_field").addClass("style_copy_node")):$(e.target).hasClass("row_separator")||$(e.target).hasClass("grid-stack-item-content")?$(e.target).addClass("basic_edit"):$(e.target).parent().hasClass("grid-stack-item-content")&&$(e.target).parent().addClass("basic_edit"),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),$(".basic_edit").hasClass("row_separator")?jSortable.cd_rowSelectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_rowSelectedNode=[],$(".basic_edit").hasClass("grid-stack-item-content")?jSortable.cd_selectedNodeParent=$(".basic_edit"):jSortable.cd_selectedNodeParent=$(".basic_edit").parents(".grid-stack-item-content"),$(".basic_edit").hasClass("grid-stack-item")?jSortable.cd_selectedGridItem=$(".basic_edit"):jSortable.cd_selectedGridItem=$(".basic_edit").parents(".grid-stack-item"),1==jSortable.cd_selectedNode.length){var t=$(jSortable.cd_selectedNode).data("component"),a=$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder");$("#cview_contextmenu > li").hide();var i=jQuery.isEmptyObject(jSortable.copyStyle);"Image"==$(jSortable.cd_selectedNode).data("component").data_type||"Owner_Photo"==$(jSortable.cd_selectedNode).data("component").data_type?(null==$(jSortable.cd_selectedNode).data("component").ui.styles.shape?($("#cd_style_squre").hide(),$("#cd_style_round").show()):($("#cd_style_round").hide(),$("#cd_style_squre").show()),$("#cd_rightClick_delete").show(),$("#cd_radius").show()):"label"==t._type?($("#cd_style_copy").show(),i||$("#cd_style_paste").show(),$("#cd_HideLabel").show(),$("#cd_addIcon").show(),$("#cd_rightClick_delete").show(),"top"==t.ui.styles.labelAlign?$("#cd_LabelLeft").show():$("#cd_LabelTop").show(),a.length>1&&$("#cd_removeFromGroup").show()):"icon"==t._type?($("#cd_style_copy").show(),i||$("#cd_style_paste").show(),$("#cd_addLabel").show(),$("#cd_hideIcon").show(),$("#cd_changeIcon").show(),$("#cd_rightClick_delete").show(),$("#cd_hideIcon").show(),a.length>1&&$("#cd_removeFromGroup").show()):"separator"==t._type?($("#cd_style_copy").show(),i||$("#cd_style_paste").show(),$("#tE_separator").show()):"upcoming_activity"==t._type||"button"==t._type||"link"==t._type||"Tags"==t.data_type?($("#cd_rightClick_delete").show(),a.length>1&&$("#cd_removeFromGroup").show()):($("#cd_rightClick_delete").show(),$("#cd_style_copy").show(),i||$("#cd_style_paste").show(),1==t.label?($("#cd_HideLabel").show(),"top"==t.ui.styles.labelAlign?$("#cd_LabelLeft").show():$("#cd_LabelTop").show()):$("#cd_addLabel").show(),1==t.icon?($("#cd_changeIcon").show(),$("#cd_hideIcon").show()):$("#cd_addIcon").show(),a.length>1&&$("#cd_removeFromGroup").show())}else{var o=$L(jSortable.cd_selectedNode).toArray(),r=(t=o.map((function(e){return $(e).data("component")})),a=$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder"),$(jSortable.cd_selectedGridItem).find(".row_separator"),$L(jSortable.cd_selectedNode).toArray().filter((function(e){return $(e).hasClass("cd_field field_valueHolder")}))),d=$u.chain(r).map((function(e){return $(e).data("component").label})).uniq().value(),n=$u.chain(r).map((function(e){return $(e).data("component").icon})).uniq().value(),s=(i=jQuery.isEmptyObject(jSortable.copyStyle),o.filter((function(e){return $(e).hasClass("cd_field cd_separator")})));$("#cview_contextmenu > li").hide(),$("#cd_rightClick_delete").show(),i||$("#cd_style_paste").show(),$(".basic_edit").hasClass("row_separator")&&$("#cd_removeFromGroup").show(),1==d.length&&1==d[0]?$("#cd_HideLabel").show():$("#cd_addLabel").show(),1==n.length&&1==n[0]?($("#cd_changeIcon").show(),$("#cd_hideIcon").show()):$("#cd_addIcon").show(),s.length>0&&$("#tE_separator").show(),1==d[0]&&($("#cd_LabelLeft").show(),$("#cd_LabelTop").show())}$(e.target).hasClass("canvas_ignoreField")||$(".basic_edit").trigger("click");var l=$("#grid1").offset().left+jSortable.grid_size/2,c=$(jSortable.cd_selectedGridItem).offset().top+$(jSortable.cd_selectedGridItem).outerHeight(),p=$(e.target).offset().left,_=$("#cview_contextmenu").innerWidth();p<l?$("#cview_contextmenu").show().css({left:e.clientX,top:c}):$("#cview_contextmenu").show().css({left:e.clientX-_,top:c})}))},globleNodesUpdate:function(){$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?jSortable.cd_selectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_selectedNode=$(".basic_edit"),$(".basic_edit").hasClass("row_separator")?jSortable.cd_rowSelectedNode=$(".basic_edit").find(".cd_field"):jSortable.cd_rowSelectedNode=[],$(".basic_edit").hasClass("grid-stack-item-content")?jSortable.cd_selectedNodeParent=$(".basic_edit"):jSortable.cd_selectedNodeParent=$(".basic_edit").parents(".grid-stack-item-content"),$(".basic_edit").hasClass("grid-stack-item")?jSortable.cd_selectedGridItem=$(".basic_edit"):jSortable.cd_selectedGridItem=$(".basic_edit").parents(".grid-stack-item")},getSelectedFields:function(e,t){if(!t)t=$(".basic_edit");var a=[];return $(t).each((function(t,i){$(i).hasClass("cd_field cd_label")||$(i).hasClass("cd_field cd_icon")?$(i).nextAll(".cd_field.field_valueHolder").each((function(e,t){a.push(t)})):$(i).hasClass("cd_field field_valueHolder")||$(i).hasClass("cd_field cd_separator")&&e?$(i).each((function(e,t){a.push(t)})):$(i).find(".cd_field.field_valueHolder").each((function(e,t){a.push(t)}))})),a},colorUpdate:function(e){"transparent"==e&&(e=222),$("#tE_color > .tE_color").css("color","#"+e),jSortable.triggerCatchMoves("color"),$(jSortable.cd_selectedNode).css("color","#"+e),$(jSortable.cd_selectedNode).each((function(){$(this).data("component").ui.styles.color=e})),$("#selectedTextColor").val(e),$("#textColorId").data("color",e),$("#cd_textColorHolder").css("background-color","#"+e),$("#textEditorMenu").data("tool").color=e,jSortable.resizeHeight(jSortable.cd_selectedGridItem)},backgroundColorUpdate:function(e){"transparent"==e?(jSortable.triggerCatchMoves("background_color"),$("#tE_color > .tE_color").css("background-color","transparent"),$(jSortable.cd_selectedNode).each((function(e,t){$(t).css("background-color","transparent"),$(t).data("component").ui.styles.background_color=""})),$("#selectedTextColor").val(""),$("#textBgId").data("bg",""),$("#cd_textColorHolder").css("background-color","transparent"),$("#cd_textBgHolder").data("bg","").addClass("cvresetcolor").css("background-color",""),$("#selectedBgColor").val(""),$("#textEditorMenu").data("tool").background_color=""):(jSortable.triggerCatchMoves("background_color"),$("#tE_color > .tE_color").css("background-color","#"+e),$(jSortable.cd_selectedNode).css("background-color","#"+e),$(jSortable.cd_selectedNode).each((function(){$(this).data("component").ui.styles.background_color=e})),$("#selectedBgColor").val(e),$("#textBgId").data("bg",e),$("#cd_textBgHolder").data("bg",e).css("background-color","#"+e).removeClass("cvresetcolor"),$("#textEditorMenu").data("tool").background_color=e),jSortable.resizeHeight(jSortable.cd_selectedGridItem)},colorBgToolUpdate:function(e,t){""!=e?($("#tE_color > .tE_color").css("background-color","#"+e),$("#textColorId").data("color",e),$("#selectedTextColor").attr("value",e).html(e),$("#cd_textColorHolder").removeClass("cvresetcolor").css("background-color","#"+e)):($("#cd_textColorHolder").css("background-color","").addClass("cvresetcolor"),$("#selectedTextColor").val(""),$("#cd_textColorHolder").addClass("cvresetcolor").css("background-color","")),$("#selectedTextColor").attr("value",e).val(e),""!=t?($("#textBgId").data("bg",t),$("#cd_textBgHolder").css("background-color","#"+t),$("#cd_textBgHolder").removeClass("cvresetcolor"),$("#selectedBgColor").val("")):$("#cd_textBgHolder").addClass("cvresetcolor").css("background-color",""),$("#selectedBgColor").attr("value",t).val(t)},updateCdtool:function(e){if(jSortable.globleNodesUpdate(),e)var t=jSortable.getSelectedFields(!0);else t=jSortable.cd_selectedNode;$("#textEditorMenu").removeClass("cv_disable"),$("#cdDeleteIcon").removeClass("cv_disable");$(".grid-stack").data("gridstack");if(1==t.length){var a=$(".basic_edit"),i=$(t).data("component"),o=i.ui.styles.font_size;if(""==(j=i.ui.styles.font_style)&&(j="CanvasFontRegular"),j&&j.indexOf("ProximaNova")>-1&&(j=j.replace("ProximaNova","CanvasFont")),-1!=j.indexOf("Italic"))var r=j.replace("Italic","");else r=j;var d=$L("#fontstyle_dropdown > li").toArray().filter((function(e){return $(e).data("fontname")===r})),n=$(d).html(),s=i.ui.styles.color,l=i.ui.styles.background_color,c=i.ui.styles.align,p=i._type,_=i.label,u=(i.ui.styles.labelAlign,i.icon),g=($("#cd_paddingMargin").data("spacingtype"),parseInt($(a).css("padding-top"))),f=parseInt($(a).css("padding-left")),h=parseInt($(a).css("padding-right")),b=parseInt($(a).css("padding-bottom"));if(a.hasClass("cd_field"))var m=i.ui.styles.padding_top||g||0,v=i.ui.styles.padding_left||f||0,y=i.ui.styles.padding_right||h||0,x=i.ui.styles.padding_bottom||b||0;else m=g||0,v=f||0,y=h||0,x=b||0;if($("#cdToolFS").html(o),$("#font_dropdown").is(":visible")){var C=".cd_fs"+o;$("#font_dropdown").find(".fwBold").removeClass("fwBold"),$("#font_dropdown").find(C).addClass("fwBold")}jSortable.colorBgToolUpdate(s,l),$("#cd_italic, #cd_caps, #tE_font_style, #cd_strikethrough, .cvlabelmenu, .cviconmenu").removeClass("cv_disable"),$(".basic_edit").hasClass("cd_field cd_label")&&$("#cd_strikethrough").addClass("cv_disable"),$(".basic_edit").hasClass("cd_field cd_icon")&&($("#cd_strikethrough").addClass("cv_disable"),$("#cd_italic").addClass("cv_disable"),$("#cd_caps").addClass("cv_disable"),$("#tE_font_style").addClass("cv_disable")),$(".basic_edit").hasClass("cd_field cd_separator")&&($("#cd_strikethrough").addClass("cv_disable"),$("#cd_italic").addClass("cv_disable"),$("#cd_caps").addClass("cv_disable"),$("#tE_font_style").addClass("cv_disable"),$(".cvlabelmenu").addClass("cv_disable"),$(".cviconmenu").addClass("cv_disable")),_||"label"==p?$("#cvlabelmenu").prop("checked",!0):$("#cvlabelmenu").prop("checked",!1),u||"icon"==p?$("#cviconmenu").prop("checked",!0):$("#cviconmenu").prop("checked",!1),"right"==c?$("#cdToolAlignImg").removeClass("tE_midlalin tE_leftalin").addClass("tE_rightalin"):"middle"==c?$("#cdToolAlignImg").removeClass("tE_leftalin tE_rightalin").addClass("tE_midlalin"):$("#cdToolAlignImg").removeClass("tE_midlalin tE_rightalin").addClass("tE_leftalin");j.replace("Italic","");var S=$("#fontNameHodler").data("fontname");$("#fontNameHodler").removeClass(S),j&&j.indexOf("ProximaNova")>-1&&(j=j.replace("ProximaNova","CanvasFont")),$("#fontNameHodler").addClass(j),$("#fontNameHodler").data("fontname",j),$("#fontNameHodler").html(n),-1!=j.indexOf("Italic")?$("#cd_italic").hasClass("cd_bg_gray")||$("#cd_italic").addClass("cd_bg_gray"):$("#cd_italic").removeClass("cd_bg_gray"),0!=jSortable.cd_selectedNode.siblings().length?($("#cdPadding_top").hide(),$("#cdPadding_bottom").hide()):($("#cdPadding_top").show(),$("#cdPadding_bottom").show()),$("#cd_paddingTop").val(m),$("#cd_paddingLeft").val(v),$("#cd_paddingBottom").val(x),$("#cd_paddingRight").val(y),$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder").length>1?$("#canvasMenuUngroup").removeClass("cv_disable"):$("#canvasMenuUngroup").addClass("cv_disable"),$(".basic_edit").hasClass("cd_field cd_separator")?$("#canvasMenuSeparator").removeClass("cv_disable").addClass("border_highlight"):$("#canvasMenuSeparator").addClass("cv_disable").removeClass("border_highlight"),$("#canvasMenuCp").removeClass("cv_disable"),jQuery.isEmptyObject(jSortable.copyStyle)?$("#canvasMenuPs").addClass("cv_disable"):$("#canvasMenuPs").removeClass("cv_disable"),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?$("#tE_select_align").removeClass("cv_disable"):$("#tE_select_align").addClass("cv_disable"),$("#cd_padding").removeClass("cv_disable")}else{var k=jSortable.getSelectedFields().map((function(e){return $(e).data("component")})),w=$L(t).toArray().map((function(e){return $(e).data("component").ui.styles})),j=(o=$u.chain(w.map((function(e){return e.font_size}))).uniq().value(),$u.chain(w.map((function(e){return e.font_style}))).uniq().value()),N=(s=$u.chain(w.map((function(e){return e.color}))).uniq().value(),$u.chain(w.map((function(e){return e.background_color}))).uniq().value()),I=(c=$u.chain(w.map((function(e){return e.align}))).uniq().value(),$("#fontNameHodler").data("fontname")),z=$u.chain(k).map((function(e){return e.label})).uniq().value(),H=$u.chain(k).map((function(e){return e.icon})).uniq().value();if(""==j&&(j="CanvasFontRegular"),j&&j.indexOf("ProximaNova")>-1&&(j=j.replace("ProximaNova","CanvasFont")),$("#cd_italic, #cd_caps, #tE_font_style, #cd_strikethrough, .cvlabelmenu, .cviconmenu").removeClass("cv_disable"),$(jSortable.cd_selectedGridItem).find(".cd_field.cd_separator").length>0?$("#canvasMenuSeparator").removeClass("cv_disable").addClass("border_highlight"):$("#canvasMenuSeparator").addClass("cv_disable").removeClass("border_highlight"),$(".basic_edit").hasClass("grid-stack-item-content")||$(".basic_edit").hasClass("row_separator")?$("#tE_select_align").removeClass("cv_disable"):$("#tE_select_align").addClass("cv_disable"),$(jSortable.cd_selectedGridItem).find(".cd_field.field_valueHolder").length>1&&!$(".basic_edit").hasClass("grid-stack-item-content")?$("#canvasMenuUngroup").removeClass("cv_disable"):$("#canvasMenuUngroup").addClass("cv_disable"),$("#canvasMenuCp").addClass("cv_disable"),jQuery.isEmptyObject(jSortable.copyStyle)?$("#canvasMenuPs").addClass("cv_disable"):$("#canvasMenuPs").removeClass("cv_disable"),z.length>1?$("#cvlabelmenu").prop("checked",!1):1==z[0]?$("#cvlabelmenu").prop("checked",!0):$("#cvlabelmenu").prop("checked",!1),H.length>1?$("#cviconmenu").prop("checked",!1):1==H[0]?$("#cviconmenu").prop("checked",!0):$("#cviconmenu").prop("checked",!1),1==s.length&&1==N.length?jSortable.colorBgToolUpdate(s[0],N[0]):1==s.length?jSortable.colorBgToolUpdate(s[0],""):1==N.length?jSortable.colorBgToolUpdate("",N[0]):jSortable.colorBgToolUpdate("",""),1==o.length){var E=o[0];$("#cdToolFS").html(E)}else $("#cdToolFS").html("");if(1==j.length){var L=j[0];if($("#fontNameHodler").data("fontname",L),-1!=L.indexOf("Italic"))var M=L.replace("Italic","");else M=L;d=$L("#fontstyle_dropdown > li").toArray().filter((function(e){return $(e).data("fontname")===M})),n=$(d).html();$("#fontNameHodler").removeClass(I),$("#fontNameHodler").addClass(L),$("#fontNameHodler").html(n)}else $("#fontNameHodler").removeClass(I),$("#fontNameHodler").data("fontname",""),$("#cd_italic").removeClass("cd_bg_gray"),$("#fontNameHodler").html("");var T=c[0];"right"==T?$("#cdToolAlignImg").removeClass("tE_midlalin tE_leftalin").addClass("tE_rightalin"):"middle"==T?$("#cdToolAlignImg").removeClass("tE_leftalin tE_rightalin").addClass("tE_midlalin"):$("#cdToolAlignImg").removeClass("tE_midlalin tE_rightalin").addClass("tE_leftalin"),$("#tE_merge").html("merge").removeClass("cv_disable");$("#cd_paddingMargin").data("spacingtype"),m=parseInt($(".basic_edit").css("padding-top"))||0,v=parseInt($(".basic_edit").css("padding-left"))||0,y=parseInt($(".basic_edit").css("padding-right"))||0,x=parseInt($(".basic_edit").css("padding-bottom"))||0;$("#cdPadding_top").show(),$("#cdPadding_bottom").show(),$("#cd_paddingTop").val(m),$("#cd_paddingLeft").val(v),$("#cd_paddingBottom").val(x),$("#cd_paddingRight").val(y),$("#cd_padding").removeClass("cv_disable")}var A=JSON.parse(JSON.stringify($("#textEditorMenu").data("tool")));o=$("#cdToolFS").html(),j=$("#fontNameHodler").data("fontname"),s=rgb2hex($(".tE_color").css("background-color"));null!=j&&""!=j||(j="CanvasFontRegular"),j&&j.indexOf("ProximaNova")>-1&&(j=j.replace("ProximaNova","CanvasFont")),""!=o&&(A.font_size=o),""!=j&&(A.font_style=j),""!=s&&(A.color=s),$("#textEditorMenu").data("tool",A)},colorPicker:function(e,t){var a;$(e).bind("click",(function(){$(this).offset();$(".props").hide(),$("#font_dropdown").hide(),sE()})).ColorPicker({color:"#de0000",onBeforeShow:function(){if("textColorId"==$(this).attr("id"))var e=rgb2hex($("#textColorId").data("color"));else e=rgb2hex($("#textBgId").data("bg"));$(this).ColorPickerSetColor(e)},onShow:function(e){return $(e).css("z-index","1501"),$("#textEditorMenu").hasClass("cv_disable")||$(e).show(),$(e).click((function(){sE()})),jSortable.triggerCatchMoves("color"),$(".colorpicker_submit").hide(),$(".colorpicker_current_color").hide(),$(".colorpicker_rgb_r").hide(),$(".colorpicker_rgb_g").hide(),$(".colorpicker_rgb_b").hide(),$(".colorpicker_hsb_h").hide(),$(".colorpicker_hsb_s").hide(),$(".colorpicker_hsb_b").hide(),!1},onChange:function(e,i,o){a=i;var r=$("#cd_textBgHolder");if($(".basic_edit").hasClass("grid-stack-item-content"))var d=$(".basic_edit").find(".cd_field");else d=$(".basic_edit");"bg"==t?(d.css("background-color","#"+a),$("#textBgId").data("bg",a),$("#cd_textBgHolder").css("background-color","#"+a),$("#selectedBgColor").val(a)):(d.css("color","#"+a),$("#textColorId").data("color",a),$("#cd_textColorHolder").css("background-color","#"+a),$("#selectedTextColor").val(a)),$("#tE_color > .tE_color").css("background-color","#"+a),r.hasClass("cvresetcolor")&&r.removeClass("cvresetcolor"),sE()},onHide:function(e,i){return $(".bgcolor").removeClass("active"),$(e).hide(),"bg"==t?(jSortable.updateNode($(".basic_edit"),"background_color",a),$("#textEditorMenu").data("tool").background_color=a,$("#textBgId").data("bg",a)):(jSortable.updateNode($(".basic_edit"),"color",a),$("#textEditorMenu").data("tool").color=a,$("#textColorId").data("color",a)),$("#fieldPropPick").css("display","none"),jSortable.resizeHeight(jSortable.cd_selectedGridItem),!1}})},deleteElement:function(e,t){if(jSortable.triggerCatchMoves("delete"),null==e)e=$(".basic_edit");$(e).each((function(e,a){if(!$(a).hasClass("cd_field cd_separator")){($(a).hasClass("cd_field cd_label")||$(a).hasClass("cd_field cd_icon"))&&(a=jSortable.getSelectedFields(!1,a));var i=jSortable.getSelectedFields(!1,a),o=i.map((function(e){return $(e).data("component")}));if(!$(a).hasClass("grid-stack-item"))var r=$(a).parents(".grid-stack-item");if($(a).hasClass("row_separator"))$(a).remove();else if($(a).hasClass("cd_field field_valueHolder")){var d=o[0];if(1==d.label||1==d.icon){var n=$(i).parent();0==n.prev().length?n.next().remove():n.prev().remove(),n.remove()}else 0==$(i).prev().length?$(i).next().remove():$(i).prev().remove(),$(i).remove()}else if($(a).hasClass("grid-stack-item-content")){var s=$(i).parents(".grid-stack-item");$(s).remove()}else $(a).remove();var l=$(r).find(".row_separator");if(0==$(r).find(".cd_field").length&&$(r).remove(),1==$(r).find(".row_separator").length){var c=$(r).find(".row_separator").children();$(c).unwrap()}$(l).each((function(e,t){0==$(t).children().length&&$(t).remove()})),t||$(o).each((function(e,t){var a=JSON.parse(JSON.stringify(t)),i={field_label:"",_type:"",id:"",data_type:"",UITYPE:"",display_value:""};i.field_label=a.field_label||a.name,i._type=a._type,i.id=a.id,i.data_type=a.data_type,i.UITYPE=a.ui_type,i.display_value=a.display_value,t.ignore||jSortable.prependDeletedField(i)}))}})),$(".grid1").find(".grid-stack-item").length>0&&jSortable.nodeAlignmentMethods(),$("#cview_contextmenu").hide(),jSortable.dragUiFixed(),0==$(".grid1").find(".grid-stack-item").length&&($("#textEditorMenu").addClass("cv_disable"),$("#cdDeleteIcon").addClass("cv_disable")),$("#grid1").find(".grid-stack-item").length<=0&&jSortable.enableOrDisableSaveCV(!1),jSortable.sideMenuLimit()},sideMenuLimit:function(){jSortable.canvas_fieldCount=$("#grid1").find(".cd_field.field_valueHolder").length;var e=$("#grid2"),t=$("#grid2").find(".cd_field.field_valueHolder");jSortable.canvas_fieldCount<jSortable.canvas_fieldLimit&&$("#grid2").hasClass("cv_disable")?e.removeClass("cv_disable"):jSortable.canvas_fieldCount>=jSortable.canvas_fieldLimit&&e.addClass("cv_disable"),t.length<=0?($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").hide(),$("#noFields").show()):($("#sidebar_fields,#sidebar_fieldsHeading,#sidebar_buttons,#sidebar_linksHeading,#sidebar_links,#sidebar_othersHeading,#sidebar_others,#noFields").show(),$("#noFields").hide())},removeHoverBindAndRowNode:function(e){var t=$(".grid-stack").data("gridstack");$(e.find(".row_separator")).each((function(){0==$(this).children().length&&$(this).remove()}));var a=e.find(".grid-stack-item-content").children(),i=e.find(".row_separator");e.find(".grid-stack-item-content");if(1==e.find(".row_separator").length){var o=$(i).children()[0];$(o).unwrap()}a.length<=0?t.removeWidget(e):1==a.length&&$(a).unbind("mouseout mouseover")},prependDeletedField:function(e){if("field"==e._type){var t=Handlebars.templates.sidemenu([e]);$("#sidebar_fields").prepend(t)}else if("button"==e._type){e.name||(e.name=e.field_label);t=Handlebars.templates.sidemenu_btn([e]);$("#sidebar_buttons").prepend(t)}else if("link"==e._type){t=Handlebars.templates.sidemenu_links([e]);$("#sidebar_links").prepend(t)}else{e.field_label||(e.field_label="Upcoming Activity");t=Handlebars.templates.sidemenu_others([e]);$("#sidebar_others").prepend(t)}},menuToggle:function(){$("#grid2 > h6").on("click",(function(){var e=$(this).attr("openDiv");if(0==$("#"+e).height()){$("#"+e).css("height","");var t=$("#"+e).height();$("#"+e).css("height",t).show()}else $("#"+e).css("height",0).hide()}))},dragUiFixed:function(){var e;$("#grid2 .grid-stack-item").draggable({cancel:!1,cursorAt:{left:0,top:5},revert:function(t,a){return $(event.target).removeClass("cd_pF"),$L("#fields_outer_container").scrollTop(e),$("#grid_inner").removeClass("editorBgAnimation").addClass("editorBgAnimationRevert"),$(".basic_edit").removeClass(".basic_edit"),!0},start:function(t,a){var i=$L("#fields_outer_container");e=i.scrollTop();var o=$(a.helper);$(o).removeClass("mT5");var r=$(o).attr("fields-type");$(".grid-stack").data("gridstack");$("#grid1").find(".grid-stack-item-content").addClass("cv_gray_bdr"),"button"!=r&&$(this).addClass("cv_bgYellow cd_pF"),$(this).addClass("cd_pF"),$("#sidebar_fields,#sidebar_buttons,#sidebar_separators,#fields_outer_container").removeClass("oH"),i.css("overflow","visible"),i.scrollTop(e),$L("#grid1 > .grid-stack-item").each((function(e,t){var a=$(t).data("_gridstack_node").x,i=$(t).data("_gridstack_node").y,o=$(t).data("_gridstack_node").height,r=$(t).data("_gridstack_node").width;$(t).data("beforeX",a),$(t).data("beforeY",i),$(t).data("beforeWidth",r),$(t).data("beforeHeight",o)})),$("#grid1 > .grid-stack-item").addClass("cd_moveTrans"),$("#grid_inner").addClass("editorBgAnimation").removeClass("editorBgAnimationRevert"),jSortable.setGridStackNodeHeightWidth()},drag:function(e,t){var a=t.offset.left,i=t.offset.top;t.position.top=i,t.position.left=a},stop:function(e,t){draggedOutOfSocket=!1,$(t.helper).removeAttr("style"),$(t.helper).find(".cd_field").removeAttr("style"),$(e.target).addClass("mT5"),$("#grid1 > .grid-stack-item").each((function(e,t){$(t).removeData("beforeY beforeWidth beforeHeight beforeX")}));$(".grid-stack").data("gridstack");$("#sidebar_fields,#sidebar_buttons,#sidebar_separators,#fields_outer_container").addClass("oH"),$(this).removeClass("cv_bgYellow cd_pF"),$("#grid1 > .grid-stack-item").removeClass("cd_moveTrans")}})},clearMoves:function(){jSortable.cd_undoCatchMoves=[],jSortable.cd_redoCatchMoves=[],jSortable.copyStyle={},jSortable.cd_selectedNode={},jSortable.cd_selectedNodeParent={},jSortable.cd_selectedGridItem={},jSortable.cd_selectedFieldHolder={},jSortable.cd_rowSelectedNode={}},search:function(e){var t=$(e),a=$("#sidebar_search > input").val();if(""!=a)var i=a;else i="";var o=$L("#fields_outer_container"),r=o.find(".cd_field.field_valueHolder"),d=$L(r).toArray().filter((function(e){return $(e).text().includes(a.toLowerCase())})),n=$L(r).toArray().filter((function(e){return $(e).text().includes(a.toUpperCase())})),s=$L(r).toArray().filter((function(e){return $(e).text().includes(camelize(a))})),l=$(d).add(n).add(s);$("#grid2 #sidebar_fields .grid-stack-item, #sidebar_buttons .grid-stack-item, #sidebar_links .grid-stack-item, #sidebar_others .grid-stack-item").hide(),o.scrollTop(0);var c=$("#sidebarnomatch");l.length>0?$(l).each((function(e,a){c.is(":visible")&&(o.show(),c.addClass("dN")),$(this).parents(".grid-stack-item").show();t.val();if(divText=a,textProp="textContent"in divText?"textContent":"innerText",originalText=$ESAPI.encoder().encodeForHTML(divText[textProp]),!i)return divText.innerHTML=originalText,!0;var r=new RegExp("("+i+")","ig");divText.innerHTML=originalText.replace(r,"<span class='cv_highlight'>$1</span>")})):(o.hide(),c.removeClass("dN"))},removeWidget:function(){$(".grid-stack").data("gridstack").removeAll()},enableOrDisableSaveCV:function(e){e?($("#canvasPreview").addClass("cP").attr("onclick","Customization.generatePreview()"),$("#savecustomizedview").removeAttr("disabled"),jSortable.cd_datamodified=!0,pageReloadChk(),null==$("#savecustomizedview").attr("disabled")?window.addEventListener("beforeunload",pageReloadChk):window.removeEventListener("beforeunload",pageReloadChk)):($("#canvasPreview").removeClass("cP").attr("onclick",""),$("#savecustomizedview").attr("disabled",!0),jSortable.cd_datamodified=!1,pageReloadChk(),window.removeEventListener("beforeunload",pageReloadChk))}};function camelize(e){return e.toLowerCase().replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))}function chunk(e,t){return e.reduce((function(e,a,i){return i%t==0&&e.push([]),e[e.length-1].push(a),e}),[])}function rgb2hex(e){null==e&&(e="ffffff");var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return t&&4===t.length?("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e}function pageReloadChk(e){if(1==jSortable.cd_datamodified&&$("#editor_container").length>0&&null==$("#savecustomizedview").attr("disabled")){Events.isPageLayoutModified=!0;var t=I18n.getMsg("crm.process.reload.alert");return(e||window.event).returnValue=t,t}window.removeEventListener("beforeunload",pageReloadChk),Events.isPageLayoutModified=!1}function emptyImgRemove(e){e=$(e),$(e).attr("src",networkUtils.getImageUrl("profile_image_canvas.svg",ResourceConstants.CRM)).addClass("canvasDummyImge cd_people_image")}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var Customization={isBuilder:!1,dropRecordCache:!1,fromFocusout:!1,orgSpec:["S","Y","R","P"],moduleSpec:["E","A","Z","U","C"],ultimateSpec:["U","C"],ruleLimit:{S:5,Y:5,R:10,P:10,E:15,A:15,Z:15,U:25,C:25},components:[],canvasRefresh:{},shuffleIndex:0,mappedFileds:{},maxViewLimit:null,dropCache:!1,listViewdropCache:!1,listViewImageArr:[],displayFieldMap:{Leads:["Full_Name","Last_Name"],Activities:["Subject"],Accounts:["Account_Name"],Contacts:["Full_Name","Last_Name"],Deals:["Deal_Name"],Potentials:["Deal_Name"],Campaigns:["Campaign_Name"],Cases:["Subject"],Solutions:["Solution_Title"],Products:["Product_Name"],Vendors:["Vendor_Name"],PriceBooks:["Price_Book_Name"],Quotes:["Subject"],SalesOrders:["Subject"],PurchaseOrders:["Subject"],Invoices:["Subject"],Visits:["Visited_Page"],Appointments:["Appointment_Name"],Services:["Service_Name"],Tasks:["Subject"],Calls:["Subject"],Events:["Event_Title"],Bundles:["Name"]},head:{Leads:"Full_Name",Activities:"Subject",Accounts:"Account_Name",Contacts:"Full_Name",Deals:"Deal_Name",Potentials:"Deal_Name",Campaigns:"Campaign_Name",Cases:"Subject",Solutions:"Solution_Title",Products:"Product_Name",Vendors:"Vendor_Name",Price_Books:"Price_Book_Name",Quotes:"Subject",Sales_Orders:"Subject",Purchase_Orders:"Subject",Invoices:"Subject",Forecasts:"FORECASTNAME",Visits:"VISITEDPAGE",Tasks:"Subject",Calls:"Subject",Events:"Event_Title"},refreshCanvasView:void 0,refreshInWms:!1,refreshTimer:void 0,kafkaWFStatus:void 0,isKioskRefresh:!1,imageuploadFieldsId:{},replaceEmptyImgDC:function(e){e=$(e);for(var t=["src","data-cvsrc","data-fileid","onerror"],a=t.length,i=0;i<a;i++)e.removeAttr(t[i]);e.attr("src",networkUtils.getImageUrl("profile_image_canvas.svg",ResourceConstants.CRM)).addClass("canvasDummyImge cd_people_image")},imageCallSerializer:function(){for(var e,t=Customization.listViewImageArr,a=t.length>=4?t.length:4,i=Math.ceil(a/4),o=0;o<4;)e=t.splice(0,i),Customization.initializeImageRequest(e),o++},initializeImageRequest:function(e){if(e.length>0){var t="[lazy-load="+e.splice(0,1)[0]+"]",a=$(t)[0];if(a){a.removeAttribute("class");var i=a.getAttribute("data-cvsrc");"undefined"===Utils.getQueryParamsFromUrl(i).fileId&&(i=networkUtils.getImageUrl("image_profile_canvas.svg",ResourceConstants.CRM)),a.imageIdArray=e,a.onload=function(){this.removeAttribute("data-cvsrc"),this.removeAttribute("lazy-load"),Customization.initializeImageRequest(this.imageIdArray)},a.setAttribute("src",i)}else Customization.initializeImageRequest(e)}},quickCreatePop:function(e,t,a){var i=Lyte.Router.getRouteInstance().transition.info.route,o=!!Lyte.Router.getRouteInstance().getQueryParams().wizardId&&$L("crm-canvas-form").length,r="crm.tab.module.create.canvas"===i||"crm.tab.module.entity.edit.canvas"===i||"crm.tab.module.entity.clone.canvas"===i||o;if(r&&e){var d=$L(".fieldupdate_"+e.column_name)[0];d.classList.add("dummyLookupClass"),t||d.classList.add("openFromFieldLookupClass")}if(t){var n=document.querySelector("crux-lookup-filter-modal");n&&n.component?n.component.close():$(".lyteModalClose").click()}var s=objectUtils.getMatchedKey(moduleApiMapping,e.lookup.module.api_name),l=moduleRecordMapping[s].module_name,c=$L("#inputId",$L("#AjaxEditComponent"))[0];c||(c=$L("#inputId",$L("#CanvasAjaxEdit_"+e.id))[0]);var p=Lyte.registeredMixins["crm-detailcanvas-utils"];p.ajaxLookupFldId=void 0,a&&(p.ajaxLookupFldId=e.id),p.subformCruxLookupFieldId=e.subformCruxLookupFieldId,p.subformComp=e.subformComp,e.subformComp=null;var _=c?c.value:"";r&&e&&(_=$L(".fieldupdate_"+e.column_name).find("#inputId").val());var u=!!t,g="Crm_"+l+"_"+e.column_name,f=Crm.getCrmBasePath()+"/QuickCreateAction.do?module="+encodeURIComponent(l)+"&searchmodule="+encodeURIComponent(l)+"&fldName="+encodeURIComponent(g)+"&fldId="+encodeURIComponent(g)+"&fldLabel="+encodeURIComponent(l)+"&fldValue="+encodeURIComponent(_)+"&newModel=true";if("Reporting_To"===e.api_name){var h=r?$L("crm-canvas-form")[0].component.getData("record"):$L("crm-detailview-canvas")[0].component.getData("record");if(h.Account_Name){var b={};b.accounts=[h.Account_Name],f=f+"&productId="+h.Account_Name.id+"&accDetails="+encodeURIComponent(JSON.stringify(b))+"&accountid="+h.Account_Name.id+"&accountname="+encodeURIComponent(h.Account_Name.name)}}n&&n.component&&Crm.userDetails.isLookupAdvancedSearchEnabled&&(f+="&openInAdvSearch=true"),(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(l))&&Crm.downloadValidationRules(f,l),commonUtils.openCustomLookup(f,void 0,"searchCreatePopup",void 0,void 0,void 0,void 0,void 0,(function(t){var a=$L("#searchCreateDiv");if(a.length&&a.trapFocus(),!t){var i=$("#ac-recordname").children().find("input"),o=i.attr("maxlength");_.length>o&&(_=_.substring(0,o)),u||i.val(_),$(".zc_ajax_pop_wrapper").eq(0).addClass("dNImp")}var r=$L("crm-canvas-quicksavepopup")[0];r&&r.component.data.showPopup?$L(".lookupFldVal").closest("lyte-drop-box").addClass("dNImp"):$L("#lookupFldId_"+e.id).closest("lyte-drop-box").addClass("dNImp")}))},layoutRuleFocusOutHandling:function(e){Customization.fromFocusout=!0,Lyte.registeredMixins["crm-detailcanvas-utils"].layoutRuleFocusOutHandling(e),Customization.fromFocusout=!1},canvasDvRecordPopup:function(e,t,a,i,o){e=moduleRecordMapping[e],(store.peekRecord(e.id,t)?Promise.resolve(store.peekRecord(e.id,t)):store.findRecord(e.id,t,{approved:"both",converted:"both"})).then((function(t){var r=t=t[0]?t[0]:t;r.First_Name=t.First_Name,r.Last_Name=t.Last_Name,r.Salutation=t.Salutation;var d=Crm.userDetails.NAME_FORMAT;d=d.split(",");var n=[];d.forEach((function(e){"Salutation"!==e&&(e=e.replace(" ","_")),r[e]&&n.push(r[e])}));var s=(n=n.join(" "))||e.display_field&&t[e.display_field.api_name];Crm.showExistingEmailQuickInfo(s,t.Owner.name,a,e.singular_label,o,i)}))},updateMXNFieldValuetoAPIFormat:function(e,t){var a=[];if(e&&e.body&&"string"!=typeof e.body){var i=e.body,o=i.length;if(i)for(var r=0;r<o;r++){var d={};d.id=i[r].LINKINGMODULE_ID,d[t]={},d[t].module=i[r].MODULE,d[t].name=i[r].ENTITYNAME,d[t].id=i[r].ENTITYID,a.push(d)}}return a},showCusBtnDetTt:function(e,t){if(!$L("crm-canvas-form").length||!Lyte.Router.getRouteInstance().getQueryParams().wizardId){var a=$L("crm-canvas-form")[0],i=a?a.component.data:$L("crm-detailview-canvas")[0].component.data,o=i.recordLockingDetails&&i.recordLockingDetails.restricted_custom_buttons;if(o&&o.indexOf(t)>-1)$L("#"+t)[0].component.setData("ltPropDisabled",!0),newshowtt(I18n.getMsg("crm.canvas.button.action.unavailable"));else{var r=document.getElementsByTagName("crm-custombuttons-popover");0==r.length&&(r=Lyte.Component.render("crm-custombuttons-popover","","#viewcontainer")),clearTimeout(this.disp_popover),this.disp_popover=setTimeout((function(){var a=store.peekRecord("custom_button",t);r.component?r.component.onMouseOver("."+e,a.name,a.description):r[0].component.onMouseOver("."+e,a.name,a.description)}),300)}}},hideCusBtDetTl:function(){if(!$L("crm-canvas-form").length||!Lyte.Router.getRouteInstance().getQueryParams().wizardId){var e=$L("#customButtonPopover");e&&e.length&&e[0].ltProp("show",!1),clearTimeout(this.disp_popover)}},removeProfileImage:function(e,t,a,i,o,r,d,n,s,l,c,p,_,u,g){Lyte.registeredMixins["crm-detailcanvas-utils"].isFormViewCommonCheck()?showDeletePopup(a,i,o,r,d,n,s,l,c,p,_,u,g):this.chkVisionData(e,t,a,i,o,r,d,n,s,l,c,p,_,u,g)},chkVisionData:function(e,t,a,i,o,r,d,n,s,l,c,p,_,u,g){var f=$L("crm-detailview-canvas")[0].component;if(f.data.zia_insights&&f.data.zia_insights.zia_insights_keys?f.data.zia_insights.zia_insights_keys.vision_data:void 0)showDeletePopup(a,i,o,r,d,n,s,l,c,p,_,u,g);else if(detailView){Lyte.registeredMixins["zia-insights-utils"].getInsights(moduleRecordMapping[t],e,{keys:"vision_data"},(function(e){var t=$L("crm-detailview-canvas")[0].component;e={zia_insights_keys:{vision_data:e.vision_data}},t.setData("zia_insights",e),showDeletePopup(a,i,o,r,d,n,s,l,c,p,_,u,g)}))}},refreshCanvasListView:function(e,t,a,i,o){var r=Lyte.registeredMixins["crm-detailcanvas-utils"],d="crm.tab.module.custom-view.canvas";if("statusUpdate"!==o)if("custom-view"===Lyte.Router.getRouteInstance().parent.routeName&&Lyte.Router.getRouteInstance().getDynamicParam()===i)Lyte.Component.viewPortSettings.executePendingViewPortElements(),$L("#canvasrefreshcontainer").show();else if("custom-view"===Lyte.Router.getRouteInstance().parent.routeName&&"create"===o){var n=Lyte.Router.getRouteInstance().parent.getDynamicParam();Lyte.Router.transitionTo({route:d,dynamicParams:[a,n,i],queryParams:{viewType:t}}).data={refreshTemplate:!0,clearCache:!0}}else if("canvas-builder"===Lyte.Router.getRouteInstance().parent.routeName){var s=document.querySelectorAll("crm-canvas-builder")[0];(s=s?s.component:void 0).getData("filterByModule")===a?s.updateView(a):"allModules"===s.getData("filterByModule")&&s.updateView("allModules")}else if("begin"===Lyte.Router.getRouteInstance().routeName){n=moduleRecordMapping[a].cvid;Lyte.Router.transitionTo({route:d,dynamicParams:[a,n,i],queryParams:{viewType:t}}).data={refreshTemplate:!0,clearCache:!0}}switch(t){case"customizedView":moduleRecordMapping[a].viewid||(moduleRecordMapping[a].viewid=i);break;case"CardView":moduleRecordMapping[a].cardid||(moduleRecordMapping[a].cardid=i);break;case"TableView":moduleRecordMapping[a].tableid||(moduleRecordMapping[a].tableid=i)}if(e){Customization.listViewdropCache=!0;for(var l=r.ListCardComp.length,c=0;c<l;c++)Lyte.Component.registeredComponents[r.ListCardComp[c]]&&Lyte.Component.unregisterComponent(r.ListCardComp[c])}},getFaviconUrl:function(e,t){var a,i,o;return e.indexOf("//")>0?(a=e.split("/"),i=e.split("/")[2],o=a[0]+"//"+i+t+".ico"):o=(i=e.split("/")[0]).indexOf("www")<0?"https://www."+i+t+".ico":"https://"+i+t+".ico",o}},canvasTheme={getCanvasThemeJson:function(e){var t;switch(e){case"ListView":t={line:{default:{border_width:"1px",border_style:"solid"}},tab_layout:{hover:{text_decoration:"auto",background_image:"none",color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid rgba(0, 112, 210, 1)",background_color:"transparent",background_size:"auto",text_transform:"capitalize",background_repeat:"repeat"},default:{text_decoration:"auto",color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid transparent",font_size:"15px",padding_top:"10px",text_transform:"capitalize",background_repeat:"repeat",background_image:"none",padding_left:"20px",background_color:"transparent",background_size:"auto",font_family:"r",padding_bottom:"10px",padding_right:"20px"},active:{text_decoration:"auto",color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid rgba(0, 112, 210, 1)",font_size:"15px",padding_top:"10px",text_transform:"capitalize",background_repeat:"repeat",background_image:"none",padding_left:"20px",background_color:"transparent",background_size:"auto",font_family:"s",padding_bottom:"10px",padding_right:"20px"}},textarea:{default:{line_height:"1",color:"rgba(8, 7, 7, 1)",font_size:"15px",font_family:"r"}},section:{default:{border:"1px solid rgba(221, 219, 218, 1)",background_color:"rgba(255, 255, 255, 1)",border_radius:"4px",box_shadow:"0px 2px 2px 0px rgba(0,0,0, 0.12)"}},label:{default:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"r",margin_right:"10px"}},relatedlist:{default:{border:"1px solid rgba(221, 219, 218, 1)",padding:"30px",background_color:"rgba(255, 255, 255, 1)",border_radius:"4px",box_shadow:"0px 2px 2px 0px rgba(0,0,0, 0.12)"}},relatedlist_title:{default:{background_color:"rgba(255, 255, 255, 0)"}},title:{default:{color:"rgba(0, 0, 0, 1)",font_size:"18px",font_family:"b"}},canvas_progress_circle:{default:{fill_background_color:"rgba(97, 165, 245 , 1)",base_background_color:"rgba(240, 235, 235 , 1)"}},button:{default:{border:"1px solid rgba(208, 212, 223, 1)",padding_left:"20px",color:"rgba(34, 40, 51, 1)",background_color:"rgba(234, 238, 245, 1)",font_size:"15px",padding_top:"6px",font_family:"r",padding_bottom:"6px",border_radius:"6px",padding_right:"20px"}},field:{default:{}},static_text:{default:{padding:"10px"}},relatedlist_section:{default:{background_color:"rgba(255, 255, 255, 0)"}},canvas_progress_bar:{default:{fill_background_color:"rgba(97, 165, 245 , 1)",base_background_color:"rgba(240, 235, 235 , 1)"}},page:{default:{background_color:"rgba(255 , 255 , 255, 1)",padding_bottom:"0px",padding_top:"0px",padding_left:"0px",padding_right:"0px",margin:"20px"},hover:{background_color:"rgba(245, 249, 255, 1)"}},unique_tab_layout:{hover:{text_decoration:"auto",background_image:"none",color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid rgba(0, 112, 210, 1)",background_color:"transparent",background_size:"auto",text_transform:"capitalize",background_repeat:"repeat"},default:{text_decoration:"auto",color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid transparent",font_size:"15px",padding_top:"10px",text_transform:"capitalize",background_repeat:"repeat",background_image:"none",padding_left:"20px",background_color:"transparent",background_size:"auto",font_family:"r",padding_bottom:"10px",padding_right:"20px"},active:{text_decoration:"auto",color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid rgba(0, 112, 210, 1)",font_size:"15px",padding_top:"10px",text_transform:"capitalize",background_repeat:"repeat",background_image:"none",padding_left:"20px",background_color:"transparent",background_size:"auto",font_family:"b",padding_bottom:"10px",padding_right:"20px"}},value:{default:{color:"rgba(8, 7, 7, 1)",font_size:"15px",font_family:"m"}},table_layout:{default:{background_color:"rgba(255, 255, 255, 1)"}},data_table_header_row:{default:{border_bottom:"1px double rgba(217 , 230 , 239 , 1)",background_color:"rgba(255 , 255 , 255 , 1)"}},data_table_row:{default:{border_bottom:"1px double rgba(217 , 230 , 239 , 1)",background_color:"rgba(255 , 255 , 255 , 1)"}},data_table_column:{default:{border_bottom:"1px double rgba(217 , 230 , 239 , 1)",background_color:"rgba(255 , 255 , 255 , 1)",padding:"10px"}},data_table_text:{default:{font_size:"15px",color:"rgba(97 ,110 ,136 ,1)"}},data_table_image:{default:{border_radius:"25px"}},canvas_flex_component:{default:{"background-color":"rgba(255, 255, 255, 1)","box-shadow":"0px 2px 2px 0px rgba(0,0,0, 0.12)","border-radius":"4px",border:"1px solid rgba(221, 219, 218, 1)",display:"flex","flex-direction":"column","row-gap":"10px","column-gap":"10px",padding:"10px","flex-wrap":"nowrap","justify-content":"start","align-items":"flex-start","align-content":"flex-start"}}},Crm.userDetails.RTL_ENABLED?(t.field.default={text_align:"right"},t.label.default.margin_right="initial"):(t.field.default={text_align:"left"},t.label.default.margin_right="10px");break;case"MobileDetailView":t={field:{default:{}},icon:{default:{border:"0px",padding:"0px",background_color:"transparent",font_family:"Zoho_Puvi_Regular",border_radius:"0px"}},static_icon:{default:{border:"0px",padding:"0px",color:"rgba(17,17,17,1)",background_color:"transparent",font_size:"16px",font_family:"Zoho_Puvi_Regular",border_radius:"0px"}},label:{default:{color:"rgba(97, 97, 97, 1)",font_size:"14px",font_family:"Zoho_Puvi_Regular",margin_right:"10px"}},value:{default:{color:"rgba(0, 0, 0, 0.87)",font_size:"16px",font_family:"Zoho_Puvi_Regular",margin_right:"10px"}},holder:{default:{flex_direction:"column"}},rl_field:{default:{}},rl_label:{default:{color:"rgba(97, 97, 97, 1)",font_size:"14px",font_family:"Zoho_Puvi_Regular",margin_right:"10px"}},rl_value:{default:{color:"rgba(0, 0, 0, 0.87)",font_size:"16px",font_family:"Zoho_Puvi_Regular"}},rl_holder:{default:{flex_direction:"row"}},textarea:{default:{line_height:"1",color:"rgba(8, 7, 7, 1)",font_size:"15px",font_family:"Zoho_Puvi_Regular"}},section:{default:{background_color:"rgba(255, 255, 255, 1)",border_radius:"8px"}},relatedlist_section:{default:{background_color:"rgba(255, 255, 255, 0)"}},relatedlist_title:{default:{background_color:"rgba(255, 255, 255, 0)"}},relatedlist_footer:{default:{background_color:"rgba(255, 255, 255, 0)"}},title:{default:{color:"rgba(33, 33, 33, 1)",font_size:"16px",font_family:"Zoho_Puvi_Medium"}},button:{default:{border:"0px solid rgba(208, 212, 223, 1)",padding_left:"8px",color:"rgba(0, 114, 240, 1)",background_color:"transparent",font_size:"14px",padding_top:"8px",font_family:"Zoho_Puvi_Regular",padding_bottom:"8px",border_radius:"0px",padding_right:"8px"}},icon_button:{default:{border:"0px solid rgba(208, 212, 223, 1)",padding_left:"8px",color:"rgba(0, 114, 240, 1)",background_color:"transparent",font_size:"20px",padding_top:"8px",font_family:"Zoho_Puvi_Regular",padding_bottom:"8px",border_radius:"0px",padding_right:"8px"},disable:{border:"0px solid rgba(208, 212, 223, 1)",padding_left:"8px",color:"rgba(199, 199, 199, 1)",background_color:"transparent",font_size:"20px",padding_top:"8px",font_family:"Zoho_Puvi_Regular",padding_bottom:"8px",border_radius:"0px",padding_right:"8px"}},tab_layout:{default:{border:"3px solid transparent",padding_left:"20px",color:"rgba(62, 62, 60, 1)",background_color:"transparent",font_size:"15px",padding_top:"10px",font_family:"Zoho_Puvi_Regular",padding_bottom:"10px",padding_right:"20px"},active:{text_decoration:"auto",color:"rgba(62, 62, 60, 1)",font_size:"15px",padding_top:"10px",text_transform:"capitalize",background_repeat:"no-repeat",background_image:"none",padding_left:"20px",background_color:"transparent",background_size:"auto",font_family:"Zoho_Puvi_SemiBold",padding_bottom:"10px",padding_right:"20px"}},tab_name:{default:{text_decoration:"auto",background_image:"none",padding:"2px",color:"rgba(62, 62, 60, 1)",background_color:"transparent",background_size:"auto",font_size:"15px",font_family:"Zoho_Puvi_Regular",text_transform:"capitalize",background_repeat:"no-repeat"},active:{text_decoration:"auto",background_image:"none",padding:"2px",color:"rgba(62, 62, 60, 1)",background_color:"transparent",background_size:"auto",font_size:"15px",font_family:"Zoho_Puvi_Bold",text_transform:"capitalize",background_repeat:"no-repeat"}},tab_icon:{default:{text_decoration:"auto",color:"rgba(62, 62, 60, 1)",background_color:"transparent",font_size:"15px"},active:{text_decoration:"auto",color:"rgba(62, 62, 60, 1)",background_color:"transparent",font_size:"15px"}},tab_container:{default:{background_color:"rgb(255,255,255)",border_radius:"0px"}},tab_bar:{default:{border_radius:"0px"}},page:{default:{padding_left:"0px",background_color:"rgba(233, 235, 238, 1)",padding_top:"0px",padding_bottom:"0px",padding_right:"0px"}},page_header:{default:{background_color:"rgba(255, 255, 255, 1)"}},page_body:{default:{padding_left:"0px",background_color:"rgba(244, 244, 244, 1)",padding_top:"0px",padding_bottom:"100px",padding_right:"0px"}},page_footer:{default:{background_color:"rgba(255,255,255,1)"}},relatedlist:{default:{padding:"0px",background_color:"rgba(255, 255, 255, 1)",border_radius:"8px"}},static_text:{default:{padding:"10px",background_color:"transparent",color:"rgba(0, 0, 0, 0.87)",font_size:"16px",font_family:"Zoho_Puvi_Regular",text_align:"left"}},Line:{default:{border_width:"1px",border_style:"solid",border_color:"rgba(187, 187, 187, 1)"}},table_layout:{default:{border:"0px solid transparent",background_color:"rgba(255, 255, 255, 1)",border_radius:"8px"}},table_layout_label_cell:{default:{padding_left:"8px",vertical_align:"middle",color:"rgba(97, 97, 97, 1)",font_size:"14px",font_family:"Zoho_Puvi_Regular",padding_right:"8px"}},table_layout_value_cell:{default:{padding_left:"8px",vertical_align:"middle",color:"rgba(0, 0, 0, 0.87)",font_size:"16px",font_family:"Zoho_Puvi_Regular",padding_right:"8px"}},seperator:{default:{padding_left:"10px",color:"rgba(85, 88, 106, 1)",font_size:"14px",padding_top:"0px",font_family:"Zoho_Puvi_Regular",padding_bottom:"0px",padding_right:"10px"}}};break;case"FormView":t={label:{default:{color:"rgba(62, 62, 60, 1)",font_size:"14px",font_family:"r",margin_bottom:"5px",width:"200px",text_align:"left"}},value:{default:{color:"rgba(8, 7, 7, 1)",font_size:"14px",font_family:"b"}},textarea:{default:{color:"rgba(8, 7, 7, 1)",font_size:"14px",font_family:"r",line_height:"1"}},section:{default:{background_color:"rgba(255, 255, 255, 1)",border_radius:"4px",border:"1px solid rgba(221, 219, 218, 1)",box_shadow:"0px 2px 2px 0px rgba(0,0,0, 0.12)"}},relatedlist_section:{default:{background_color:"rgba(255, 255, 255, 0)"}},relatedlist_title:{default:{background_color:"rgba(255, 255, 255, 0)"}},title:{default:{color:"rgba(0, 0, 0, 1)",font_size:"18px",font_family:"b"}},button:{default:{font_size:"14px",color:"rgba(34, 40, 51, 1)",border_radius:"6px",padding_top:"6px",padding_right:"20px",padding_bottom:"6px",padding_left:"20px",background_color:"rgba(234, 238, 245, 1)",border:"1px solid rgba(208, 212, 223, 1)",font_family:"r"}},unique_tab_layout:{default:{color:"rgba(62, 62, 60, 1)",font_size:"14px",font_family:"r",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",border_bottom:"3px solid transparent",text_transform:"capitalize",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat"},hover:{color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid rgba(0, 112, 210, 1)",text_transform:"capitalize",text_decoration:"auto",background_color:"transparent",background_image:"none",background_size:"auto",background_repeat:"repeat"},active:{color:"rgba(62, 62, 60, 1)",font_size:"14px",font_family:"b",border_bottom:"3px solid rgba(0, 112, 210, 1)",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",text_transform:"capitalize",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat"}},tab_layout:{default:{color:"rgba(62, 62, 60, 1)",font_size:"14px",font_family:"r",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",border_bottom:"3px solid transparent",text_transform:"capitalize",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat"},hover:{color:"rgba(62, 62, 60, 1)",border_bottom:"3px solid rgba(0, 112, 210, 1)",text_transform:"capitalize",text_decoration:"auto",background_color:"transparent",background_image:"none",background_size:"auto",background_repeat:"repeat"},active:{color:"rgba(62, 62, 60, 1)",font_size:"14px",font_family:"s",border_bottom:"3px solid rgba(0, 112, 210, 1)",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",text_transform:"capitalize",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat"}},page:{default:{background_color:"rgba(255 , 255 ,255 ,1)",padding_bottom:"50px",padding_top:"0px",padding_left:"0px",padding_right:"0px","box-sizing":"border-box !important"}},relatedlist:{default:{background_color:"rgba(255, 255, 255, 1)",border_radius:"4px",border:"1px solid rgba(221, 219, 218, 1)",box_shadow:"0px 2px 2px 0px rgba(0,0,0, 0.12)",padding:"30px"}},static_text:{default:{padding:"10px"}},Line:{default:{border_width:"1px",border_style:"solid","border-color":"rgba(0, 0, 0, 1)"}},table_layout:{default:{background_color:"rgba(255, 255, 255, 1)"}}};break;default:t={field:{default:{text_align:"left"}},label:{default:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"r",margin_right:"10px"}},value:{default:{color:"rgba(8, 7, 7, 1)",font_size:"15px",font_family:"m"}},textarea:{default:{color:"rgba(8, 7, 7, 1)",font_size:"15px",font_family:"r",line_height:"1"}},section:{default:{background_color:"rgba(255, 255, 255, 1)",border_radius:"4px",border:"1px solid rgba(221, 219, 218, 1)",box_shadow:"0px 2px 2px 0px rgba(0,0,0, 0.12)"}},relatedlist_section:{default:{background_color:"rgba(255, 255, 255, 0)"}},relatedlist_title:{default:{background_color:"rgba(255, 255, 255, 0)"}},title:{default:{color:"rgba(0, 0, 0, 1)",font_size:"18px",font_family:"b"}},button:{default:{font_size:"15px",color:"rgba(34, 40, 51, 1)",border_radius:"6px",padding_top:"6px",padding_right:"20px",padding_bottom:"6px",padding_left:"20px",background_color:"rgba(234, 238, 245, 1)",border:"1px solid rgba(208, 212, 223, 1)",font_family:"r"}},unique_tab_layout:{default:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"r",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",text_transform:"capitalize",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat"},hover:{color:"rgba(62, 62, 60, 1)",text_transform:"capitalize",text_decoration:"auto",background_color:"transparent",background_image:"none",background_size:"auto",background_repeat:"repeat"},active:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"b",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",text_transform:"capitalize",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat"}},tab_layout:{default:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"r",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",text_decoration:"auto",text_transform:"capitalize",border:"3px solid transparent"},hover:{color:"rgba(62, 62, 60, 1)",text_decoration:"auto",text_transform:"capitalize",background_image:"none",background_size:"auto",background_repeat:"repeat"},active:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"b",padding_left:"20px",padding_right:"20px",padding_top:"10px",padding_bottom:"10px",background_color:"transparent",text_transform:"capitalize",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat"}},tab_name:{default:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"r",background_color:"transparent",padding:"2px",text_decoration:"auto",text_transform:"capitalize",background_image:"none",background_size:"auto",background_repeat:"repeat"},hover:{color:"rgba(62, 62, 60, 1)",background_color:"transparent",text_decoration:"auto",text_transform:"capitalize",background_image:"none",background_size:"auto",background_repeat:"repeat",padding:"2px"},active:{color:"rgba(62, 62, 60, 1)",font_size:"15px",font_family:"b",text_transform:"capitalize",background_color:"transparent",text_decoration:"auto",background_image:"none",background_size:"auto",background_repeat:"repeat",padding:"2px"}},tab_icon:{default:{color:"rgba(62, 62, 60, 1)",font_size:"15px",background_color:"transparent",text_decoration:"auto"},hover:{color:"rgba(62, 62, 60, 1)",font_size:"15px",background_color:"transparent",text_decoration:"auto"},active:{color:"rgba(62, 62, 60, 1)",font_size:"15px",background_color:"transparent",text_decoration:"auto"}},page:{default:{background_color:"rgba(233, 235, 238, 1)",padding_bottom:"100px",padding_top:"0px",padding_left:"0px",padding_right:"0px"}},relatedlist:{default:{background_color:"rgba(255, 255, 255, 1)",border_radius:"4px",border:"1px solid rgba(221, 219, 218, 1)",box_shadow:"0px 2px 2px 0px rgba(0,0,0, 0.12)",padding:"30px"}},static_text:{default:{padding:"10px"}},Line:{default:{border_width:"1px",border_style:"solid",border_color:"rgba(0, 0, 0, 1)"}},table_layout:{default:{background_color:"rgba(255, 255, 255, 1)"}},canvas_flex_component:{default:{"background-color":"rgba(255, 255, 255, 1)","box-shadow":"0px 2px 2px 0px rgba(0,0,0, 0.12)",border:"1px solid rgba(221, 219, 218, 1)","border-radius":"4px",display:"flex","flex-direction":"column","row-gap":"10px","column-gap":"10px",padding:"10px","flex-wrap":"nowrap","justify-content":"start","align-items":"flex-start","align-content":"flex-start"}}}}return t}};