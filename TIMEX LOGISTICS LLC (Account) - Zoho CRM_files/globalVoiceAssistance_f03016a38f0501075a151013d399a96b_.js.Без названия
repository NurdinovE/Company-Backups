Lyte.Service.register("globalVoiceAssistance",class{initializeVCConfig(e){this.numberingEnabled=e.numberingEnabled}configForVoiceAssistance(){this.itemNumber=6e5,this.isReadyConfig=!1,this.fromVoiceComponent=!1,this.firstTweleNumbers=["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"],this.voiceConfig={types:[]},this.nodeMapping={};var e=[];this.positionFixedEle=[];var t=this.findFreezeLayerApplied();this.contextual_data={active_action:0,zia_response:{}},this.getAccessibilityConfig("clickables",this.voiceConfig),this.getKeyboardShortcuts("clickables",this.voiceConfig),this.configforAllModule("clickables",this.voiceConfig,this.nodeMapping),this.configforAllModule("types",this.voiceConfig,this.nodeMapping);for(var i=$("body :visible"),n=i.length,a=document.body.getBoundingClientRect(),o=0;o<n;o++){var s=window.getComputedStyle(i[o]),r=i[o].getBoundingClientRect();if(this.isHidden(i[o])&&(!t||parseInt(s.zIndex)>t||this.checkElementInActivePopup(i[o]))&&this.checkFromPoint(i[o],r)){var c=i[o].children&&(0===i[o].children.length||this.checkinnerNodes(i[o]))&&i[o].innerText?i[o].innerText:i[o].getAttribute("lt-prop-title");if(this.numberingEnabled){"fixed"!==s.position||0===r.width||0===r.height||i[o].classList.contains("modalWrapper")||i[o].classList.contains("alertWrapper")||i[o].classList.contains("alertFreezeLayer")||i[o].classList.contains("lytemenufreezelayer")||"LYTE-MODAL-FREEZE"===i[o].tagName||this.positionFixedEle.push(i[o]);var l={element:i[o],include:"BUTTON"===i[o].tagName||"IMG"===i[o].tagName||"A"===i[o].tagName||null!==i[o].onclick||"pointer"===s.cursor||"text"===s.cursor,rect:{left:Math.max(r.left-a.x,0),top:Math.max(r.top+parseInt(s.paddingTop.endsWith("px")?s.paddingTop.substring(0,s.paddingTop.length-2):0)-a.y,0),right:Math.min(r.right-a.x,document.body.clientWidth),bottom:Math.min(r.bottom-a.y,document.body.clientHeight)},text:i[o].textContent.trim().replace(/\s{2,}/g," ")};l.include&&e.push(l)}else i[o].getAttribute("voice-attribute-label")&&"scroll"===i[o].getAttribute("voice-attribute-label").split(" - ")[0]?this.getConfig("scrollables",this.voiceConfig,this.nodeMapping,i[o],void 0,i[o].getAttribute("voice-attribute-label")):c?this.getConfig("clickables",this.voiceConfig,this.nodeMapping,i[o],void 0,c):this.hasScroller(i[o])&&this.getConfig("scrollables",this.voiceConfig,this.nodeMapping,i[o],void 0,i[o].getAttribute("voice-attribute-label")?i[o].getAttribute("voice-attribute-label"):i[o].getAttribute("id")?i[o].getAttribute("id"):i[o].getAttribute("class"))}}this.numberingEnabled&&Lyte.Service.getInjected("globalAccessibilityServices").getVariable("voiceAssistantEnable")&&(e=e.filter((t=>!e.some((e=>t.element.contains(e.element)&&!(t===e)))))).forEach(function(e,t){if(this.checkForOverlapEle(e.element)){var i=document.createElement("div");i.style.left=(e.rect.left-25<0?e.rect.left:e.rect.left-25)+"px",i.style.top=(e.rect.top-8<0?e.rect.top:e.rect.top-8)+"px",i.style.boxSizering="border-box",i.style.counterReset="section",i.innerHTML=t+1,i.className="numberElement",document.body.appendChild(i),this.getConfig("clickables",this.voiceConfig,this.nodeMapping,e,void 0,(t+1).toString())}}.bind(this));let d=[],m=this.voiceConfig.clickables.length;for(o=0;o<m;o++)for(var u=o+1;u<m;u++)this.voiceConfig.clickables[o].display_name[0]===this.voiceConfig.clickables[u].display_name[0]&&-1===d.indexOf(this.voiceConfig.clickables[u].display_name[0])&&d.push(this.voiceConfig.clickables[o].display_name[0])}checkFromPoint(e,t){return document.elementFromPoint(Math.round(t.x+t.width/2),Math.round(t.y+t.height/2))===e||"CRMUTIL-ICON"===e.tagName}checkForOverlapEle(e){for(var t=this.positionFixedEle.length,i=0;i<t;i++){var n=window.getComputedStyle(this.positionFixedEle[i]),a=window.getComputedStyle(e),o=this.positionFixedEle[i].getBoundingClientRect(),s=e.getBoundingClientRect(),r="auto"===n.zIndex?"0":n.zIndex,c="auto"===a.zIndex?"0":a.zIndex;if(e!==this.positionFixedEle[i]&&s.x>=o.x&&s.y>=o.y&&o.x+o.width>s.x+s.width&&o.y+o.height>s.y+s.height&&parseInt(r)>parseInt(c)&&!this.positionFixedEle[i].contains(e))return!1}return!0}checkElementInActivePopup(e){var t=crmui.prevoisElement,i=t.length;if(i>0)for(var n=0;n<i;n++)if(t[n].contains(e)&&this.isHidden(t[n]))return!0;return!1}findFreezeLayerApplied(){var e=$L("#z_freezeLayer,#etComposePanel,#mics_stacked_backdrop,#campaignIntegFreezePop,.ui-widget-overlay,#emptyLayer,.rtfEditorFreezeLayer,.ctiapiFreezeLayer,#freezeBackGround,#FreezeLayer,LYTE-MODAL-FREEZE,.alertFreezeLayer"),t=e.length;if(t>0){for(var i=0,n=0;n<t;n++){var a=window.getComputedStyle(e[n]);parseInt(a.zIndex)>i&&this.isHidden(e[n])&&(i=parseInt(a.zIndex))}return i}return!1}resetNumbering(){const e=document.getElementsByClassName("numberElement");for(var t=e.length;t>0&&e[0]&&e[0].parentNode;)e[0].parentNode.removeChild(e[0]);this.nodeMapping={}}isHidden(e){var t=window.getComputedStyle(e);return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&"none"!==t.display&&"hidden"!==t.visibility}configforAllModule(e,t,i){for(var n in moduleApiMapping)0===t[e].filter((e=>e.display_name[0]===moduleApiMapping[n])).length&&this.getConfig(e,t,i,moduleApiMapping[n],void 0,moduleApiMapping[n],++this.itemNumber)}getModuleName(e){for(var t in moduleApiMapping)if(e===moduleApiMapping[t])return t}getConfig(e,t,i,n,a,o,s=null){if(o&&("string"!=typeof o||o.trim())){var r=t[e]?t[e]:[],c={id:s?s.toString():Math.floor(1e5+9e5*Math.random()).toString(),display_name:this.numberingEnabled&&parseInt(o)<13?[o,this.firstTweleNumbers[parseInt(o)-1]]:[o]};c.display_name[0]&&(i[c.id]=n,"unshift"===a?(r.unshift(c),this.nodeMapping[c.id]="accessibilityObject_"+n):r.push(c),t[e]=r)}}checkinnerNodes(e){for(var t=e.children,i=t.length,n=0;n<i;n++)if(t[n].children&&t[n].children.length>0||t[n].innerText)return!1;return!0}keyboardSuccessHandler(e,t,i){var n=i[t]?i[t]:[];e.forEach(function(e){"General"===e.category&&e.components.push({action:"Show Numbering"},{action:"Hide Numbering"},{action:"Show Voice Commands"},{action:"Hide Voice Commands"},{action:"Show Shortcuts"});var t=Lyte.Router.getRouteInstance().transition.target;("General"===e.category||"Navigation"===e.category||"Switch Tabs"===e.category||"Records View"===e.category&&"crm.tab.module.custom-view.list"===t||"Record Details View"===e.category&&"crm.tab.module.entity.detail"===t||"Record's Create/Edit/Clone Page"===e.category&&"crm.tab.module.entity.edit"===t||"Record's Create/Edit/Clone Page"===e.category&&"crm.tab.module.create"===t||"Record's Create/Edit/Clone Page"===e.category&&"crm.tab.module.entity.clone"===t)&&e.components.forEach(function(t){if(t.action.includes("Show/Hide")){const o=t.action.split(" "),s=o.splice(1,o.length).join(" "),r=["show "+s,"Hide "+s];for(var i=0;i<2;i++){var a={id:(++this.itemNumber).toString(),display_name:[r[i]]};n.unshift(a),this.nodeMapping[a.id]=t,this.nodeMapping[a.id].type="shortcutObject_"+e.category}}else{a={id:(++this.itemNumber).toString(),display_name:[t.action]};n.unshift(a),this.nodeMapping[a.id]=t,this.nodeMapping[a.id].type="shortcutObject_"+e.category}}.bind(this))}.bind(this)),i[t]=n,this.isReadyConfig=!0}getKeyboardShortcuts(e,t){var i=store.peekAll("keyboard_shortcuts")&&store.peekAll("keyboard_shortcuts").length?store.peekAll("keyboard_shortcuts"):store.findAll("keyboard_shortcuts");i&&i.then?i.then(function(i){this.keyboardSuccessHandler(Lyte.deepCopyObject(i),e,t)}.bind(this)):this.keyboardSuccessHandler(Lyte.deepCopyObject(i),e,t)}getAccessibilityConfig(e,t){var i=Lyte.Service.getInjected("globalAccessibilityServices").accessibilityConfiguration;for(var n in i)for(var a in i[n])if(!i[n][a]||"string"==typeof i[n][a]||"object"==typeof i[n][a]&&Object.keys(i[n][a]).length<=1)this.getConfig(e,t,this.nodeMapping,a.replaceAll("_"," "),"unshift",a.replaceAll("_"," "));else for(var o in i[n][a])this.getConfig(e,t,this.nodeMapping,a.replaceAll("_"," ")+" "+o.replaceAll("_"," "),"unshift",a.replaceAll("_"," ")+" "+o.replaceAll("_"," "))}getComputedStyle(e){return document.body&&document.body.currentStyle?e.currentStyle:document.defaultView.getComputedStyle(e,null)}getActualCss(e,t){return this.getComputedStyle(e)[t]}isXScrollable(e){return e.offsetWidth<e.scrollWidth&&this.autoOrScroll(this.getActualCss(e,"overflow-x"))}isYScrollable(e){return e.offsetHeight<e.scrollHeight&&this.autoOrScroll(this.getActualCss(e,"overflow-y"))}autoOrScroll(e){return"scroll"===e||"auto"===e}hasScroller(e){return this.isYScrollable(e)||this.isXScrollable(e)}handleOpenAllModule(e){var t={autocomplete:!0,per_page:20,searchword:this.nodeMapping[e.params[1].value[0]],isRelevance:!0,modules:this.nodeMapping[e.params[0].value[0]],get_from_lucene:!0};commonUtils.showHideLoadingDiv(!0),Lyte.injectResources(networkUtils.returnDependencyFiles(["rightPanelComponents.js"],ResourceConstants.CRMClient),void 0,function(){store.findAll("global-search",t,!1,!1).then(function(e){commonUtils.showHideLoadingDiv(!1),e&&(e.data&&1===e.data.length?Lyte.Router.transitionTo({route:"crm.tab.module.entity",dynamicParams:[e.data[0].$setype,e.data[0].id],queryParams:{pfrom:"gsearch"}}):this.viewAdvancedSearch(t))}.bind(this))}.bind(this))}viewAdvancedSearch(e){var t={};t.searchword=e.searchword;var i={api_name:e.modules,label:e.modules};i&&(t.modules=i.api_name),t.isRelevance=!0;var n=[],a=Utils.inverseKeyValues(moduleApiMapping);i.id=moduleRecordMapping[a[i.api_name]].id,i.field_label=i.label,Lyte.arrayUtils(n,"push",i);var o={appliedTags:[],pendingTags:[],isTagsEnabled:!1,filteredModules:n};t.filteredModules=n,e&&(o.clearBtn=!0),o.refresh=!0,Lyte.Router.transitionTo("crm.global-search",void 0,t).data=o}handleAccessibilityConfig(e){for(var t=e.length,i=0;i<t;i++)if("Click"===e[i].action||"Select"===e[i].action||"Enter"===e[i].action)for(var n=e[i],a=n.params.length,o=0;o<a;o++){var s=this.nodeMapping[n.params[o].value&&n.params[o].value.length>0?n.params[o].value[0]:n.params[o].value];if(s&&s.type&&"accessibilityObject"===s.type.split("_")[0]){var r=Lyte.Service.getInjected("globalAccessibilityServices").accessibilityConfiguration;for(var c in r)for(var l in r[c]){if(l===s.display_name){if(Object.keys(r[c][l]).length>0)for(var d in r[c][l])r[c][l][d]=n.params[1].value[0];else r[c][l]=n.params[1].value[0];return Lyte.Service.getInjected("globalAccessibilityServices").accessibilityConfigInitialization({accessibility:r}),!0}for(var d in r[c][l])if(d===s.display_name)return r[c][l][d]=n.params[1].value[0],Lyte.Service.getInjected("globalAccessibilityServices").accessibilityConfigInitialization({accessibility:r}),!0}}}}handleKeyboardShortcuts(e){for(var t=e.length,i=0;i<t;i++)if("Click"===e[i].action||"Select"===e[i].action||"Toggle"===e[i].action||"Create"===e[i].action)for(var n=e[i],a=n.params.length,o=0;o<a;o++){var s=this.nodeMapping[n.params[o].value&&n.params[o].value.length>0?n.params[o].value[0]:n.params[o].value];if(s&&s.type&&"shortcutObject"===s.type.split("_")[0]){if(this.fromVoiceComponent=!0,"Show Numbering"===s.action)this.initializeVCConfig({numberingEnabled:!0}),this.configForVoiceAssistance();else if("Hide Numbering"===s.action)this.initializeVCConfig({numberingEnabled:!1}),this.resetNumbering();else if("Show Voice Commands"===s.action)Lyte.Service.getInjected("globalAccessibilityServices").showVoiceCommands(!0);else if("Hide Voice Commands"===s.action)Lyte.Service.getInjected("globalAccessibilityServices").showVoiceCommands(!1);else if("Show Shortcuts"===s.action)Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].openShortcutModal();else if("Open Record Search"===s.action)featuresAvailable.NEXTGENUI_ENABLED?$L("#leftPaneSearch").click():$L("#topbandSearchIcon").click();else if("Focus Next Field"===s.action||"Focus Previous Field"===s.action){var r={key:"Tab",shiftKey:"Focus Previous Field"===s.action};$L.focusStack({callType:"script"},r)}else if("Close Popup"===s.action){var c=new KeyboardEvent("keydown",{key:"Escape"});document.dispatchEvent(c)}else if("Switch Tabs"!==s.type.split("_")[1]){Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].getShortcutCallback(s.type.split("_")[1],s.action,s.key_combination).call()}else{var l=store.peekAll("tab_group"),d=store.peekAll("module"),m=[],u=l.find((e=>"0"===e.id));u&&u.modules?m=u.modules:d.length&&(m=d.filter((e=>e.show_as_tab&&e.viewable&&e.visible&&1===e.visibility)));var p=s.api_name;void 0===s.api_name&&(p=s.module.api_name);var g=m.find((e=>e.api_name===p));void 0!==g&&Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].reDirectHandle(g)}return!0}}}handleVoiceAssistance(e,t=null){if(e.actions_found&&e.actions_found.length&&e.actions_found[0].params.length){if(this.handleKeyboardShortcuts(e.actions_found))return void Lyte.triggerEvent("voiceAssResponse",{type:"success",message:t});if(this.handleAccessibilityConfig(e.actions_found))return void Lyte.triggerEvent("voiceAssResponse",{type:"success",message:t});for(var i=e.actions_found.length,n=0;n<i;n++)if("open"===e.actions_found[n].action)this.handleOpenAllModule(e.actions_found[n]);else if("Click"===e.actions_found[n].action||"Select"===e.actions_found[n].action||"Toggle"===e.actions_found[n].action||"Create"===e.actions_found[n].action)for(var a=(d=e.actions_found[n]).params.length,o=0;o<a;o++){if("Element"===d.params[o].id)if(m=(m=this.nodeMapping[d.params[o].value&&d.params[o].value.length>0?d.params[o].value[0]:d.params[o].value]).element?m.element:m,(l=(c=$(m).parent().find("lyte-dropdown, crux-dropdown, crus-user-dropdown, crux-boolean-component")).length)>0)for(var s=0;s<l;s++){"LYTE-DROPDOWN"===c[s].tagName||"CRUX-DROPDOWN"===c[s].tagName||"CRUX-USER-DROPDOWN"===c[s].tagName?c[s].open():c[s].tagName.includes("CRUX-BOOLEAN-COMPONENT")?c[s].component.setData("cxPropValue",!c[s].component.data.cxPropValue):c[s].click?c[s].click():this.clickClosestElement(c[s]);break}else m.click?m.click():"string"==typeof m?Lyte.Router.transitionTo({route:"crm.tab.module",dynamicParams:[this.getModuleName(m)]}):this.clickClosestElement(m)}else if("Enter"===e.actions_found[n].action||"Clear"===e.actions_found[n].action)for(a=(d=e.actions_found[n]).params.length,o=0;o<a;o+=2){m=(m=this.nodeMapping[d.params[o].value[0]]).element?m.element:m;var r="Clear"===e.actions_found[n].action?"":d.params[o+1].value[0];if("string"==typeof r&&r.endsWith(".")&&(r=r.substring(0,r.length-1)),"LYTE-INPUT"===m.tagName||"LYTE-NUMBER"===m.tagName||"LYTE-AUTOCOMPLETE"===m.tagName)m.component.setData("ltPropValue",r);else if("CRUX-TEXT-AREA-COMPONENT"===m.tagName||"CRUX-TEXT-COMPONENT"===m.tagName||"CRUX-EMAIL-COMPONENT"===m.tagName||"CRUX-PHONE-COMPONENT"===m.tagName||"CRUX-WEBSITE-COMPONENT"===m.tagName||"CRUX-NUMBER-COMPONENT"===m.tagName)m.component.setData("cxPropValue",r);else if(m.parentElement&&m.parentElement.parentElement&&("LYTE-INPUT"===m.parentElement.parentElement.tagName||"LYTE-NUMBER"===m.parentElement.parentElement.tagName))m.parentElement.parentElement.component.setData("ltPropValue",r);else if("LYTE-AUTOCOMPLETE"===m.parentElement.parentElement.tagName)m.parentElement.parentElement.setValue(r);else if(m.tagName.includes("SEARCH")||m.tagName.includes("INPUT"))m.setValue?m.setValue(r):m.value=r;else{var c,l;if(0===(c=$(m).parent().find("lyte-input, lyte-number, lyte-autocomplete, crux-text-area-component, crux-text-component, crux-email-component, crux-phone-component, crux-website-component, crux-number-component")).length&&(c=$(m).parent().find("input, textarea, select, search")),(l=c.length)>0)for(s=0;s<l;s++)"LYTE-INPUT"===c[s].tagName||"LYTE-NUMBER"===c[s].tagName||"CRUX-TEXT-AREA-COMPONENT"===c[s].tagName||"CRUX-TEXT-COMPONENT"===c[s].tagName||"CRUX-EMAIL-COMPONENT"===c[s].tagName||"CRUX-PHONE-COMPONENT"===c[s].tagName||"CRUX-WEBSITE-COMPONENT"===c[s].tagName||"CRUX-NUMBER-COMPONENT"===c[s].tagName?c[s].component.setData("ltPropValue",r):"LYTE-AUTOCOMPLETE"===c[s].tagName?c[s].setValue(r):(c[s].tagName.includes("SEARCH")||c[s].tagName.includes("INPUT")||c[s].tagName.includes("SELECT")||c[s].tagName.includes("TEXTAREA"))&&(c[s].setValue?c[s].setValue(r):c[s].value=r);else""===m.tagName&&(m.setValue?m.setValue(r):m.value=r)}}else if("Scroll"===e.actions_found[n].action){var d;for(a=(d=e.actions_found[n]).params.length,o=0;o<a;o+=2){var m;(m=(m=this.nodeMapping[d.params[o].value[0]]).element?m.element:m)||d.params[o+1]?"DOWN"===d.params[o+1].value[0]?m.scrollTop=m.scrollHeight:"UP"===d.params[o+1].value[0]&&(m.scrollTop=0):"DOWN"===d.params[o].value[0]?window.scrollTo(0,window.innerHeight):"UP"===d.params[o].value[0]&&window.scrollTo(0,0)}}this.contextual_data.zia_response=e,Lyte.triggerEvent("voiceAssResponse",{type:"success",message:t})}else Lyte.triggerEvent("voiceAssResponse",{type:"error",message:t||""})}clickClosestElement(e){e.parentElement&&e.parentElement.click?e.parentElement.click():this.clickClosestElement(e.parentElement)}startVoiceListening(){var e=this;$L.media.record({workletBasePath:window.location.origin+"/crm/CRMClient/addons/@zoho/lyte-ui-component/dist/plugins/lyteAudioWorkers/",workerBasePath:window.location.origin+"/crm/CRMClient/addons/@zoho/lyte-ui-component/dist/plugins/lyteAudioWorkers/",stopOnSilence:!0,silenceDuration:parseInt(Lyte.Service.getInjected("globalAccessibilityServices").getVariable("autoStopDuration")),onStop:function(t){var i=$L("#ac_mainVA");i&&i.length>0&&"Listening..."===i[0].innerText&&Lyte.triggerEvent("activateVoiceSrch","fromEvent");var n=setInterval((function(){if(e.isReadyConfig){var i=new FormData;i.append("file",t,"audioFile.mp3"),i.append("page_configuration",JSON.stringify(e.voiceConfig)),store.findAll("dummy",void 0,!1,!1,{url:"crm/v8/__voice_assistance_query",method:"POST",formData:i,isFrom:"voiceAssistance"}).then((function(t){"success"===t.dummy.__voice_assistance_query.status&&t.dummy.__voice_assistance_query.response?e.handleVoiceAssistance(t.dummy.__voice_assistance_query.response,t.dummy.__voice_assistance_query.user_sentence):Lyte.triggerEvent("voiceAssResponse",{type:"error",message:t.dummy.__voice_assistance_query.user_sentence?t.dummy.__voice_assistance_query.user_sentence:"Please give correct voice over."}),e.fromVoiceComponent=!1,e.nodeMapping={}}),(function(){Lyte.triggerEvent("voiceAssResponse",{type:"error",message:"Please give correct voice over"})})),clearInterval(n)}}),500)}}),e.configForVoiceAssistance()}stopVoiceListening(){$L.media.stop()}insertVAinWMS(e){if(e&&$L("#chatBarIcons").length>0){var t="<td id='voiceAssiatanceWMS'><div class='cP pR pT4 crm-wms-icon' id='ac_vcAsst' onclick='openVoiceAssist()' onmouseenter='crmui.showTooltip(\"Voice Assistance\")' onmouseleave='crmui.hideTooltip(this)' data-zcqa='voice_assistance' data-title='Voice Assistance'><crmutil-icon icon-name='mic' icon-class='zcicn-mic zcicn_black'></crmutil-icon></div></td>",i=$L("#chatBarIcons td:last-child");i&&i.length>0&&i[0].firstChild.classList.contains("wms_help_icon_parent")?$(i[0]).before(t):$("#chatBarIcons tr:first").append(t),this.numberingEnabled&&this.configForVoiceAssistance(),Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].bindShortcuts("General",[{action:"Open Voice Assistance",key_combination:["Control","KeyZ","KeyV"],deletable:!1,editable:!1}])}else{var n=$L("#voiceAssiatanceWMS"),a=$L("crm-voice-assistance-shortcut");n&&n.length>0&&(n[0].remove(),this.numberingEnabled&&this.resetNumbering()),a&&a.length>0&&a[0].component.setData("showModal",!1),Lyte.registeredMixins["crm-keyboard-shortcutsmixin"].unbindShortcuts("General",[{action:"Open Voice Assistance",key_combination:["Control","KeyZ","KeyV"],deletable:!1,editable:!1}],"fromVA")}}runCustomCaseforVoiceAssistance(e){if(e){var t=this;t.configForVoiceAssistance();var i=t.voiceConfig;i.user_sentence=e;var n=new FormData;n.append("file",new Blob,"audioFile.mp3"),n.append("page_configuration",JSON.stringify(i)),n.append("voiceContent","skipVoice"),store.findAll("dummy",void 0,!1,!1,{url:"crm/v8/__voice_assistance_query",method:"POST",formData:n,isFrom:"voiceAssistance"}).then((function(e){t.handleVoiceAssistance(e.dummy.__voice_assistance_query.response)}))}}}),numberingHanlind=function(){var e=Lyte.Service.getInjected("globalVoiceAssistance");e.resetNumbering(),this.scrollTimeOut&&clearTimeout(this.scrollTimeOut),this.scrollTimeOut=setTimeout((()=>{clearTimeout(this.scrollTimeOut),e.configForVoiceAssistance()}),1e3)},document.addEventListener("scroll",(function(){var e=$L("#ac_mainVA"),t=Lyte.Service.getInjected("globalVoiceAssistance");!t||!t.numberingEnabled||e&&0!==e.length&&""!==e[0].innerText&&"Please give correct voice over."!==e[0].innerText&&e[0].innerText!=="Hey "+Crm.userDetails.DISPLAY_NAME+"! Say the command"||numberingHanlind()}),!0),document.addEventListener("click",(function(){var e=$L("crm-voice-assistance-shortcut"),t=Lyte.Service.getInjected("globalVoiceAssistance");t&&t.numberingEnabled&&(t.interval&&clearInterval(t.interval),t.interval=setInterval((function(){e&&0!==e.length&&e[0].component&&e[0].component.data&&("Processing..."===e[0].component.data.ac_mainVA_text||"Listening..."===e[0].component.data.ac_mainVA_text)||(clearInterval(t.interval),t.numberingEnabled&&numberingHanlind())}),50)),!(e&&e.length>0&&"Listening..."===e[0].component.data.ac_mainVA_text&&arguments[0]&&arguments[0].srcElement)||arguments[0].srcElement.classList.contains("ac_micWrapper")||arguments[0].srcElement.classList.contains("zcicn-mic")||arguments[0].srcElement.icon-name==="mic"||arguments[0].srcElement.classList.contains("ac_listenGif")||arguments[0].srcElement.href||(e[0].component.setData("ac_mainVA_text",""),e[0].component.setData("ac_vsCont_text",I18n.getMsg("crm.accessibility.motor.voice.action")),e[0].component.setData("ac_vsCont_class",!0),e[0].component.setData("ac_listenGif_show",!1),t.stopVoiceListening(),e[0].component.setData("voiceAssStart",!1))}),!0);
