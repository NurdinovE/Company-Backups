Lyte.Component.register("crm-multi-selection-popup",{_template:'<template tag-name="crm-multi-selection-popup"> <lyte-modal lt-prop-close-on-escape="false" lt-prop-prevent-focus="true" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromRight&quot;,&quot;duration&quot;:&quot;0.5s&quot;}" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;200px&quot;}" id="selectpop" lt-prop-show="{{showpopup}}" lt-prop-width="calc(100% - 200px)" lt-prop-height="100%" lt-prop-allow-multiple="true" lt-prop-wrapper-class="msLeadassignModal {{if(isQuickCreate,\'quickCreateIndex\',\'normalPopupIndex\')}}" class="oH" on-before-show="{{method(\'openModal\')}}" on-before-close="{{method(\'closeModal\')}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-content class="p0 oH {{if(isQuickCreate,\'msQuickCreate\',\'msNormalPopup \')}}"> <template is="if" value="{{assignpage}}"><template case="true"> <div id="msLeadslist" class="h100_per "> <div class="dF aiCenter lookHeader p12 bg_white"> <span class="msSmartFilterIcon cP dF aiCenter {{if(showSmartFilter,\'activeLabel\',\'\')}} br6 dIB vaT pR" data-zcqa="lv_filterStatus" onclick="{{action(\'showHideFilter\',this)}}"> <template is="if" value="{{expHandlers(expHandlers(filterApplied,\'!=\',&quot;0&quot;),\'&amp;&amp;\',expHandlers(showSmartFilter,\'!\'))}}"><template case="true"> <span class="filterNotification"></span> </template></template> <span class="zcicncss-filter zcicn-cssIcons"></span> </span> <span data-zcqa="assignPageTitle" class="crm-heading-font-size crm-font-bold dIB">{{getI18n("crm.mxnlookup.select",modulelableplural)}}</span> </div> <div class="mL5 newListviewRevamp dF spaceBetween searchsec p10 aiCenter"> <div class="mL5 totalRecordsInNumbers mR5" data-zcqa="lv_summaryArea"> <template is="if" value="{{expHandlers(selectcount,\'>\',0)}}"><template case="true"> <span class="dIF aiCenter fwWrap cBoth mR6" id="selected-fields" data-zcqa="mxnselected-records"> <span data-zcqa="recordCount" class="mlSelectedRecord mR5 crm-subheading-font-size crm-font-semibold">{{selectcount}}</span> <span id="mlSelectedRecordMsg" class="crm-font-regular">{{getI18n("crm.label.deduplicate.selected",if(expHandlers(selectcount,\'&gt;\',1),modulelableplural,modulelable))}}</span> <span id="mlSelectedRecord" data-zcqa="recordClear" onclick="{{action(&quot;clearData&quot;,this)}}" class="unsortLink pR crm-base-font-size link mL10 cP crm-font-regular">{{getI18n("crm.title.clear.name")}}</span> </span> </template></template> <template is="if" value="{{isFilterApplied}}"><template case="true"> <div class="filterData cDefault pR mu_filterCont"><span class="radiusCircle dIB"></span>{{getI18n("crm.emailstats.filterby")}}<span data-zcqa="filterName" class="pL5 filternameBy cText crm-font-bold newDarkColor mu_filterCont">{{filterApplied}}</span> <template is="if" value="{{expHandlers(expHandlers(isApplyFilter,\'!\'),\'&amp;&amp;\',expHandlers(filterApplied,\'!=\',&quot;0&quot;))}}"><template case="true"> <lyte-button lt-prop-appearance="primary" lt-prop-class="outlineprimary" data-zcqa="lv_clearFilter" onclick="{{action(&quot;onFilterClear&quot;,this)}}" class="pR mR0 mL7 cP clear" lt-prop-size="small"> <template is="registerYield" yield-name="text"> {{getI18n("crm.report.clear.filter")}} </template> </lyte-button> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(sort_label,\'!=\',&quot;id&quot;)}}"><template case="true"> <span class="filterData cDefault wsNowrap mR10"><span class="radiusCircle dIB"></span>{{getI18n("crm.api.apidashboard.SortBy")}} <span class="newDarkColor crm-font-bold cText">{{sort_label}}</span><span class="mL8 cP unsortLink pR" onclick="{{action(\'unsortRecord\')}}" data-zcqa="lv_unsortLink">{{getI18n("crm.column.unsort")}}</span></span> </template></template> </div> <div class="flexAlignCenter fwWrap multiSelectHdBtnFields"> <lyte-input id="multiSelectSearchInput" data-zcqa="mxnsearchString" on-focus="{{method(\'hoverCardShow\')}}" on-blur="{{method(\'hoverCardHide\')}}" lt-prop-close-icon="true" class="mR10 h34" lt-prop-placeholder="{{getI18n(\'crm.button.search\')}}" lt-prop-type="search" lt-prop-appearance="box" lt-prop-value="{{lbind(searchValue)}}" lt-prop-maxlength="200" on-clear="{{method(\'searchBarSearch\',\'unassign\')}}" onkeypress="{{action(\'onSearch\',event,\'unassign\')}}"></lyte-input> <template is="if" value="{{expHandlers(expHandlers(expHandlers(isQuickCreate,\'!\'),\'&amp;&amp;\',expHandlers(cruxContains(quickCreateNotSupportedModule,module),\'!\')),\'&amp;&amp;\',allowQuickCreate)}}"><template case="true"> <lyte-button lt-prop-class="outlineprimary" data-zcqa="btn_Lookup_CreateNewRecord" onclick="{{action(&quot;openQuickCreate&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("crm.module.new",modulelable)}} </template> </lyte-button> </template></template> </div> </div> <div class="mscontenttab cBoth newListviewRevamp h100vh oH dF p15 pR0 pT0"> <div class="cvFilters sitransdiv pR" id="cruxFilter"> <crm-custom-filter class="siOuterBOrder hAuto" module="{{module}}" api_name="{{moduleApiName}}" lyte-rendered="none"> <div id="lv_left_filter" class="cvLeftPane oH pR newListOLY {{if(showSmartFilter,\'filterEnableReq mR15\',\'\')}} mB15 h100_per Msfilbor"> <form name="customViewSmartFilters" onsubmit="{{action(\'preventFromOnSubmit\',event)}}"> <div class="msselctfil pR pT10 {{if(isApplyFilter,\'multiSelectFilterOn\',\'\')}}"> <crux-smart-filter id="relatedListassignFilter" cx-prop-class="{{if(isQuickCreate,\'quickCreate\',\'normalPopup\')}}" cx-prop-search-label="{{I18nDynamicKey(\'crm.label.filter.module\',\'\',modulelableplural)}}" cx-prop-is-special-fields="false" cx-prop-module-display-field="{{moduleDisplayField}}" cx-prop-criteria="{{filterCri}}" cx-prop-module="{{module}}" cx-prop-fields="{{lbind(filterList)}}" class="newSmartFilter" cx-prop-new-list-key="true" cx-prop-display-as-accord="true" enable-scroll-loading="true" cx-prop-search="true" cx-prop-field-select-limit="15" cx-prop-lookup-limit="2" on-before-field-checked="{{method(\'onBeforeFieldChanged\')}}" on-field-change="{{method(\'onFieldChanged\')}}" on-value-change="{{method(\'onValueChange\',\'assignfilterApply\')}}" cx-prop-prevent-ui-type="{{preventUiType}}" cx-prop-prevent-column-name="{{preventFieldForFilter}}"></crux-smart-filter> </div> <template is="if" value="{{isApplyFilter}}"><template case="true"> <div class="footerLV footerActionEle"> <lyte-button lt-prop-size="small" data-zcqa="dash_listView_submit" class="mR7" lt-prop-appearance="primary" id="assignfilterApply" onclick="{{action(&quot;applyFilter&quot;,this)}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.button.apply.filter")}} </template> </lyte-button> <lyte-button lt-prop-size="small" data-zcqa="dash_listView_clear" class="mR10" lt-prop-appearance="default" id="assignfilerClear" onclick="{{action(&quot;onFilterClear&quot;,this)}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.title.clear.name")}} </template> </lyte-button> </div> </template></template> </form> </div> </crm-custom-filter> </div> <div id="viewcontainer" class="msmulticontainer w300 br_border3 flexOne dF flexDC spaceBetween vaT newListOLY pR bg_white Mstabwidth Mstabbor"> <template is="if" value="{{loader}}"><template case="true"> <crm-ui-loaders interaction-name="crmCircleLoader" class="dF aiCenter jcCenter zi15 bg_white pA w100_per h100_per br12"></crm-ui-loaders> </template></template> <template is="if" value="{{expHandlers(client_account,\'!\')}}"><template case="true"> <div class="columnCustomization msColumn dF aiCenter jcCenter" data-zcqa="listView_addColumn" id="addColumn"> <span type="button" class="manageColumnClss "></span> <span id="optionsList" class="dN"></span> </div> </template></template> <crux-table-component cx-prop-header="{{tableFields}}" header-fields="{{tableFields}}" cx-prop-content="{{tableContent}}" cx-prop-yield-for-prefix="true" cx-prop-column-cell-class="msfilterTable" cx-prop-field-type-mapping="{{fieldTypeMapping}}" cx-prop-field-type-mapping-selector="ui_type" cx-prop-hide-header-on-no-content="false" cx-prop-sort-columns="true" cx-prop-sorted-column="{{sort_by}}" cx-prop-sorted-order="{{sort_order}}" cx-prop-table-class="{{if(clipMode,\'wrapTextIncluded setMaxWidthForTable\',\'setMaxWidthForTable\')}}" class="cruxTablecls entityLookupTable mstablebg" cx-prop-express="true" id="listcrux" new="true" cx-prop-no-records-zcqa="lvNoRecordsFound" cx-prop-row-zcqa="detailView" cx-prop-clip-mode="{{clipMode}}" cx-prop-module="{{module}}" cx-prop-prevent-width="true" cx-prop-show-sort-icon="true" cx-prop-body-id="lvTred" cx-prop-table-id="listViewTable" cx-prop-header-row-id="listviewHeaderRow" cx-prop-no-records-message="{{getI18n(\'crm.module.empty.message\',modulelableplural)}}" data-zcqa="unassign" cx-prop-new-list-view="true" cx-prop-enable-body-scroll="false" cxpropenablebodyscroll="true" cx-prop-sticky-table="true" cx-prop-tooltip="true" on-resize-end="{{method(\'onResizeSelect\')}}" on-mouse-over="{{action(\'addBackGround\')}}" on-mouse-out="{{action(\'removeBackGround\')}}" cx-prop-dual-resize="true" on-scroll="{{method(\'cxTableScroll\')}}"> <template is="yield" yield-name="header-prefix-1" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{expHandlers(tableContent.length,\'>\',0)}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="{{if(showSmartFilter,\'pL5\',\'pL10\')}}" data-zcqa="listView_selectAllEntity" id="allselfirst" on-changed="{{method(\'selectAll\',this)}}" lt-prop-class="{{selectAllBox}}" lt-prop-checked="false"> </lyte-checkbox> </template></template> </template> <template is="yield" yield-name="body-inputfield"> <template is="component" component-name="crux-{{fieldObj.cxTypeMapping}}-component" cx-prop-id="{{fieldObj.api_name}}_{{recordObj.id}}" cx-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></template> </template> <template is="yield" yield-name="body-prefix-1" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{recordObj.$stop_processing}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.privacy.listview.consent.locked&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="lockedInfoIco_dv lvRecLockIcon dIB svgIcons" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(isLookUp,\'&amp;&amp;\',expHandlers(recordObj.$sharing_permission,\'!=\',null)),\'&amp;&amp;\',expHandlers(recordObj.$sharing_permission,\'==\',&quot;read_only&quot;))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.label.readonly&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="iconlock_ap mL2" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(recordObj.$review,\'!=\',null),\'&amp;&amp;\',expHandlers(recordObj.$review,\'!=\',&quot;Approved&quot;)),\'||\',expHandlers(expHandlers(expHandlers(recordObj.$approval_state,\'!=\',null),\'&amp;&amp;\',expHandlers(expHandlers(recordObj.$approval_state,\'!=\',&quot;approved&quot;),\'||\',expHandlers(recordObj.$approval_state,\'===\',&quot;approval_process_rejected&quot;))),\'&amp;&amp;\',expHandlers(recordObj.$assignable,\'!\')))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.approvalProcess.label.waitingForApproval&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="iconlock_ap mL2" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(assignPermission,\'!\')}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="customCheckBoxDisabled vVIm" on-before-checked="{{method(&quot;showMessage&quot;,recordObj,true)}}" lt-prop-checked="false"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(recordObj.Locked__s,\'&amp;&amp;\',recordObj.$locked_for_me),\'&amp;&amp;\',expHandlers(recordObj.$editable,\'!\'))}}"><template case="true"> <template is="if" value="{{recordObj.$assignable}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" on-changed="{{method(&quot;selectSingleRecord&quot;,this,&quot;selectcount&quot;,&quot;tempIds&quot;,&quot;confirm_tempIds&quot;)}}" onclick="{{action(&quot;singleShiftSelectRecord&quot;,event,this)}}" lt-prop-class="{{if(cruxContains(tempIds,recordObj.id),\'customCheckBoxChecked\',\'customCheckBox\')}}" lt-prop-checked="{{if(cruxContains(tempIds,recordObj.id),\'true\',\'false\')}}"> </lyte-checkbox> </template></template> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.record.lock.record.locked&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="lockedforMeBody_{{recordObj.id}}" lt-prop-class="dIB mT3 zcrm_svgIcons rlc_lockIcon vaT" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" on-changed="{{method(&quot;selectSingleRecord&quot;,this,&quot;selectcount&quot;,&quot;tempIds&quot;,&quot;confirm_tempIds&quot;)}}" onclick="{{action(&quot;singleShiftSelectRecord&quot;,event,this)}}" lt-prop-class="{{if(cruxContains(tempIds,recordObj.id),\'customCheckBoxChecked\',\'customCheckBox\')}}" lt-prop-checked="{{if(cruxContains(tempIds,recordObj.id),\'true\',\'false\')}}"> </lyte-checkbox> </template></template></template></template></template></template></template></template></template></template> </template> <template is="yield" yield-name="header-suffix-1" cx-prop-style="width:40px"></template> <template is="yield" yield-name="body-suffix-1" cx-prop-style="width:40px"></template> <template is="yield" yield-name="body-multiselect-lookup"> <template is="if" value="{{fieldObj.display_field}}"><template case="true"> <a class="link" id="listView_{{getRecordData(recordObj,fieldObj.api_name,\'id\')}}" data-zcqa="{{getRecordData(recordObj,fieldObj.api_name)}}" href="{{getLink(&quot;crm.tab.module.entity.detail&quot;,getDynamicArray(fieldObj.module,getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)))}}" target="{{blank}}" onclick="{{action(\'invokeTransition\',event,this,\'crm.tab.module.entity.detail\')}}" lt-prop-dp="[&quot;{{fieldObj.module}}&quot;, &quot;{{getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)}}&quot;]"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.ui_type,\'==\',133)}}"><template case="true"> <a class="link" href="{{getLink(&quot;crm.tab.module.entity.detail&quot;,getDynamicArray(fieldObj.module,getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)))}}" target="{{blank}}" onclick="{{action(\'invokeTransition\',event,this,\'crm.tab.module.entity.detail\')}}" lt-prop-dp="[&quot;{{fieldObj.module}}&quot;, &quot;{{getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)}}&quot;]"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name,\'name\')}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;boolean&quot;),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;tag&quot;)),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;user&quot;)),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;number&quot;)),\'||\',expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;picklist&quot;),\'&amp;&amp;\',fieldObj.enable_colour_code))}}"><template case="true"> <template is="component" cx-prop-is-color-code-enabled="{{fieldObj.enable_colour_code}}" cx-prop-field="{{fieldObj}}" cx-prop-tooltip="true" cx-prop-clip-mode="{{clipMode}}" component-name="crux-{{fieldObj.cxTypeMapping}}-component" cx-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}" cx-prop-iso-code="{{getRecordData(recordObj,\'Currency\')}}" cx-prop-exchange-rate="{{getRecordData(recordObj,\'ExchangeRate\',relatedList)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;email&quot;)}}"><template case="true"> <a class="cxEmailViewLink cruxPreventClick" href="mailto:{{getRecordData(recordObj,fieldObj.api_name)}}"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;website&quot;)}}"><template case="true"> <a class="link cruxPreventClick" href="{{href(getRecordData(recordObj,fieldObj.api_name))}}" target="_blank"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;layout&quot;)}}"><template case="true"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name,\'name\')}}"></lyte-text> </template><template case="false"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text> </template></template></template></template></template></template></template></template></template></template></template></template> </template> </crux-table-component> <div class="dF right spaceBetween p15 siNxtsec mT10 aiCenter msTableBanner zi14 pA bottom2 w100_per bg_white h30"> <div class="paginationdiv dF fE mR20 mB10 mT15 aiCenter jcCenter"> <template is="if" value="{{expHandlers(tableContent.length,\'>\',0)}}"><template case="true"> <lyte-navigator lt-prop-more-records="{{resp.meta.more_records}}" lt-prop-value="{{record_from}}" lt-prop-records="{{record_to}}" lt-prop-perpage="20" lt-prop-yield="true" on-next="{{method(\'navigate\',\'next\',\'unassign\')}}" on-previous="{{method(\'navigate\',\'previous\',\'unassign\')}}"> <template is="registerYield" yield-name="navigatorYield" class="dF"> <div class="dF aiCenter jcCenter"> <div class="123 lyteNavigator lyteSingleBack lyteIconSingleBack" data-zcqa="bulkRecordNavBackLV"></div> <div class="mR10 mL10">{{getI18n("crm.entity.record.index",expHandlers(record_from,\'+\',1),record_to)}}</div> <div class="lyteNavigator lyteSingleFront lyteIconSingleFront" data-zcqa="bulkRecordNavFrontLV"></div> </div> </template> </lyte-navigator> </template></template> </div> <div class=" dF aiCenter jcCenter mR20"> <lyte-button lt-prop-appearance="primary" data-zcqa="mxnnextStep" lt-prop-disabled="{{if(expHandlers(selectcount,\'>\',0),\'false\',\'true\')}}" id="nxtbut" onclick="{{action(&quot;showconfirm&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("crm.button.next")}} </template> </lyte-button> </div> </div> </div> </div> </div> </template></template> <template is="if" value="{{confirmpage}}"><template case="true"> <div id="msConfirmList" class="h100_per"> <div class="dF aiCenter lookHeader p12 bg_white"> <span class="msSmartFilterIcon cP dF aiCenter {{if(showSmartFilter,\'activeLabel\',\'\')}} br6 dIB vaT pR" data-zcqa="lv_filterStatus" onclick="{{action(\'showHideFilter\',this)}}"> <template is="if" value="{{expHandlers(expHandlers(filterApplied,\'!=\',&quot;0&quot;),\'&amp;&amp;\',expHandlers(showSmartFilter,\'!\'))}}"><template case="true"> <span class="filterNotification"></span> </template></template> <span class="zcicncss-filter zcicn-cssIcons"></span> </span> <span data-zcqa="confirmPage_title" class="crm-heading-font-size crm-font-bold dIB">{{getI18n("crm.mxnLookup.confirmHeader",if(expHandlers(cnfrmcount,\'&gt;\',1),modulelableplural,modulelable),parentModulelable)}}</span> </div> <div class="newListviewRevamp dF spaceBetween searchsec p10 mL5 aiCenter"> <div data-zcqa="lv_summaryArea" class="crm-subheading-font-size mT6 aiCenter crm-font-regular dIB dF flexOne totalRecordsInNumbers">{{getI18n("crm.mxnLookup.verifyselected",if(expHandlers(cnfrmcount,\'&gt;\',1),modulelableplural,modulelable))}}<span class="mL10 crm-subheading-font-size crm-font-semibold">{{cnfrmcount}}</span> <template is="if" value="{{isFilterApplied}}"><template case="true"> <span data-zcqa="recordCount" class="filterData cDefault pR"> <span class="radiusCircle dIB"></span>{{getI18n("crm.emailstats.filterby")}} <span data-zcqa="filterName" class="pL5 filternameBy cText crm-font-bold newDarkColor mu_filterCont">{{filterApplied}}</span> <template is="if" value="{{expHandlers(expHandlers(isApplyFilter,\'!\'),\'&amp;&amp;\',expHandlers(filterApplied,\'!=\',&quot;0&quot;))}}"><template case="true"> <lyte-button lt-prop-appearance="primary" lt-prop-class="outlineprimary" data-zcqa="lv_clearFilter" onclick="{{action(&quot;onFilterClear&quot;,this)}}" class="pR mR0 mL7 cP clear" lt-prop-size="small"> <template is="registerYield" yield-name="text"> {{getI18n("crm.report.clear.filter")}} </template> </lyte-button> </template></template> </span> </template></template> <template is="if" value="{{expHandlers(sort_label,\'!=\',&quot;id&quot;)}}"><template case="true"> <span class="filterData cDefault wsNowrap mR10"><span class="radiusCircle dIB"></span>{{getI18n("crm.api.apidashboard.SortBy")}} <span class="newDarkColor crm-font-bold cText">{{sort_label}}</span><span class="mL8 cP unsortLink pR" onclick="{{action(\'unsortRecord\')}}" data-zcqa="lv_unsortLink">{{getI18n("crm.column.unsort")}}</span></span> </template></template> </div> <lyte-input id="multiSelectSearchInput" data-zcqa="mxnsearchString" on-focus="{{method(\'hoverCardShow\')}}" on-blur="{{method(\'hoverCardHide\')}}" lt-prop-close-icon="true" class="mR10 h34" lt-prop-placeholder="{{getI18n(\'crm.button.search\')}}" lt-prop-type="search" lt-prop-appearance="box" lt-prop-value="{{lbind(searchValue)}}" lt-prop-maxlength="200" lt-prop-autocomplete="off" on-clear="{{method(\'searchBarSearch\',\'confirm\')}}" onkeypress="{{action(\'onSearch\',event,\'confirm\')}}"></lyte-input> </div> <div class="mscontenttab cBoth newListviewRevamp h100_per oH dF p15 pR0 pT0"> <div class="cvFilters sitransdiv pR" id="cruxFiltertwo"> <crm-custom-filter class="siOuterBOrder hAuto" module="{{module}}" api_name="{{moduleApiName}}" lyte-rendered="none"> <div id="lv_left_filter" class="cvLeftPane oH pR newListOLY {{if(showSmartFilter,\'filterEnableReq mR15\',\'\')}} mB15 h100_per Msfilbor"> <form name="customViewSmartFilters" onsubmit="{{action(\'preventFromOnSubmit\',event)}}"> <div class="msselctfil pR pT10 {{if(isApplyFilter,\'multiSelectFilterOn\',\'\')}}"> <crux-smart-filter id="relatedListconfirmFilter" cx-prop-class="{{if(isQuickCreate,\'quickCreate\',\'normalPopup\')}}" cx-prop-search-label="{{I18nDynamicKey(\'crm.label.filter.module\',\'\',modulelableplural)}}" cx-prop-is-special-fields="false" cx-prop-module-display-field="{{moduleDisplayField}}" cx-prop-module="{{module}}" cx-prop-criteria="{{filterCri}}" cx-prop-fields="{{lbind(filterList)}}" class="newSmartFilter" cx-prop-new-list-key="true" cx-prop-display-as-accord="true" enable-scroll-loading="true" cx-prop-search="true" cx-prop-field-select-limit="15" cx-prop-lookup-limit="2" on-before-field-checked="{{method(\'onBeforeFieldChanged\')}}" on-field-change="{{method(\'onFieldChanged\')}}" on-value-change="{{method(\'onValueChange\',\'confirmfilterApply\')}}" cx-prop-prevent-ui-type="{{preventUiType}}" cx-prop-prevent-column-name="{{preventFieldForFilter}}"></crux-smart-filter> </div> <template is="if" value="{{isApplyFilter}}"><template case="true"> <div class="footerLV footerActionEle"> <lyte-button lt-prop-size="small" data-zcqa="dash_listView_submit" class="mR7" lt-prop-appearance="primary" id="confirmfilterApply" onclick="{{action(&quot;applyFilter&quot;,this)}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.button.apply.filter")}} </template> </lyte-button> <lyte-button lt-prop-size="small" data-zcqa="dash_listView_clear" class="mR10" lt-prop-appearance="default" id="confirmfilerClear" onclick="{{action(&quot;onFilterClear&quot;,this)}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.title.clear.name")}} </template> </lyte-button> </div>  </template></template> </form></div> </crm-custom-filter> </div> <div id="viewcontainertwo" class="msmulticontainer w300 br_border3 flexOne dF flexDC spaceBetween vaT newListOLY pR bg_white Mstabwidth Mstabbor"> <template is="if" value="{{loader}}"><template case="true"> <crm-ui-loaders interaction-name="crmCircleLoader" class="dF aiCenter jcCenter zi15 bg_white pA w100_per h100_per br12"></crm-ui-loaders> </template></template> <template is="if" value="{{expHandlers(client_account,\'!\')}}"><template case="true"> <div class="columnCustomization msColumn dF aiCenter jcCenter" data-zcqa="listView_addColumn" id="addColumn"> <span type="button" class="manageColumnClss"></span> <span id="optionsList" class="dN"></span> </div> </template></template> <crux-table-component cx-prop-header="{{tableFields}}" cx-prop-content="{{confirmJSON}}" cx-prop-column-cell-class="msfilterTable" cx-prop-yield-for-prefix="true" cx-prop-height="calc(100% - 50px);" cx-prop-sort-columns="true" cx-prop-table-class="{{if(clipMode,\'wrapTextIncluded setMaxWidthForTable\',\'setMaxWidthForTable\')}}" cx-prop-field-type-mapping="{{fieldTypeMapping}}" cx-prop-field-type-mapping-selector="ui_type" cx-prop-hide-header-on-no-content="false" cx-prop-show-filter="{{fliterVal}}" class="cruxTablecls entityLookupTable mstablebg" cx-prop-express="true" id="listcrux" cx-prop-no-records-zcqa="lvNoRecordsFound" cx-prop-row-zcqa="detailView" cx-prop-clip-mode="{{clipMode}}" cx-prop-enable-body-scroll="false" cx-prop-prevent-width="false" cx-prop-no-records-message="{{getI18n(\'crm.module.empty.message\',modulelableplural)}}" cxpropenablebodyscroll="true" cx-prop-show-sort-icon="true" data-zcqa="confirm" cx-prop-sorted-column="{{sort_by}}" cx-prop-sorted-order="{{sort_order}}" cx-prop-sticky-table="true" cx-prop-tooltip="true" cx-prop-table-id="listViewTable" cx-prop-header-row-id="listviewHeaderRow" on-resize-end="{{method(\'onResizeSelect\')}}" on-mouse-over="{{action(\'addBackGround\')}}" on-mouse-out="{{action(\'removeBackGround\')}}" cx-prop-dual-resize="true" on-scroll="{{method(\'cxTableScroll\')}}"> <template is="yield" yield-name="header-prefix-1" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{expHandlers(confirmJSON.length,\'>\',0)}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="{{if(showSmartFilter,\'pL5\',\'pL10\')}}" data-zcqa="listView_selectAllEntity" id="allcnfrmselfirst" on-changed="{{method(\'selectAll\',this)}}" lt-prop-class="{{selectAllBox}}" lt-prop-checked="false" lt-prop-value="val" lt-prop-id="checkbox"></lyte-checkbox> </template></template> </template> <template is="yield" yield-name="body-inputfield"> <crux-number-component cx-prop-field="{{fieldObj}}" cx-prop-class="w100 crmSmallInput zcpq_bundle_qtyInput" cx-prop-direction="vertical" cx-prop-from="create" data-zcqa="product_quantity_{{recordObj.Product_Name}}" cx-prop-appearance="box" cx-prop-maxlength="8" cx-prop-minvalue="0.0000001" cx-prop-value="{{expHandlers(bundleMxnProductIdVsQty[recordObj.id],\'?:\',bundleMxnProductIdVsQty[recordObj.id],1)}}" cx-prop-type="number" id="prod_quantity_{{recordObj.id}}" cx-prop-name="product quantity" on-element-rendered="{{method(\'validateIndividualProductQuantity\',recordObj,null)}}" on-value-change="{{method(\'updateBundleMxnFields\',recordObj)}}"></crux-number-component> </template> <template is="yield" yield-name="body-prefix-1" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{expHandlers(expHandlers(recordObj.Locked__s,\'&amp;&amp;\',recordObj.$locked_for_me),\'&amp;&amp;\',expHandlers(recordObj.$editable,\'!\'))}}"><template case="true"> <template is="if" value="{{recordObj.$assignable}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="cnfrmcheckcls" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" on-changed="{{method(&quot;selectSingleRecord&quot;,this,&quot;cnfrmcount&quot;,&quot;tempIds&quot;,&quot;confirm_tempIds&quot;)}}" onclick="{{action(&quot;singleShiftSelectRecord&quot;,event,this)}}" lt-prop-class="{{if(cruxContains(tempIds,recordObj.id),\'customCheckBoxChecked\',\'customCheckBox\')}}" lt-prop-checked="{{if(cruxContains(tempIds,recordObj.id),\'true\',\'false\')}}" lt-prop-value="val"></lyte-checkbox> </template></template> <lyte-checkbox lt-prop-name="checkbox" class="cnfrmcheckcls" lt-prop-title="{{getI18n(&quot;crm.record.lock.record.locked&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="lockedforMeBody_{{recordObj.id}}" lt-prop-class="dIB mT3 zcrm_svgIcons rlc_lockIcon vaT" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"> <lyte-checkbox lt-prop-name="checkbox" class="cnfrmcheckcls" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" on-changed="{{method(&quot;selectSingleRecord&quot;,this,&quot;cnfrmcount&quot;,&quot;tempIds&quot;,&quot;confirm_tempIds&quot;)}}" onclick="{{action(&quot;singleShiftSelectRecord&quot;,event,this)}}" lt-prop-class="{{if(cruxContains(tempIds,recordObj.id),\'customCheckBoxChecked\',\'customCheckBox\')}}" lt-prop-checked="{{if(cruxContains(tempIds,recordObj.id),\'true\',\'false\')}}" lt-prop-value="val"></lyte-checkbox> </template></template> </template> <template is="yield" yield-name="header-suffix-1" cx-prop-style="width:40px"></template> <template is="yield" yield-name="body-suffix-1" cx-prop-style="width:40px"></template> <template is="yield" yield-name="body-multiselect-lookup"> <template is="if" value="{{fieldObj.display_field}}"><template case="true"> <a class="link" id="listView_{{getRecordData(recordObj,fieldObj.api_name,\'id\')}}" data-zcqa="{{getRecordData(recordObj,fieldObj.api_name)}}" href="{{getLink(&quot;crm.tab.module.entity.detail&quot;,getDynamicArray(fieldObj.module,getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)))}}" target="{{blank}}" onclick="{{action(\'invokeTransition\',event,this,\'crm.tab.module.entity.detail\')}}" lt-prop-dp="[&quot;{{fieldObj.module}}&quot;, &quot;{{getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)}}&quot;]"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.ui_type,\'==\',133)}}"><template case="true"> <a class="link" href="{{getLink(&quot;crm.tab.module.entity.detail&quot;,getDynamicArray(fieldObj.module,getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)))}}" target="{{blank}}" onclick="{{action(\'invokeTransition\',event,this,\'crm.tab.module.entity.detail\')}}" lt-prop-dp="[&quot;{{fieldObj.module}}&quot;, &quot;{{getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)}}&quot;]"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name,\'name\')}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;boolean&quot;),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;tag&quot;)),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;user&quot;)),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;number&quot;)),\'||\',expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;picklist&quot;),\'&amp;&amp;\',fieldObj.enable_colour_code))}}"><template case="true"> <template is="component" cx-prop-is-color-code-enabled="{{fieldObj.enable_colour_code}}" cx-prop-field="{{fieldObj}}" cx-prop-tooltip="true" cx-prop-clip-mode="{{clipMode}}" component-name="crux-{{fieldObj.cxTypeMapping}}-component" cx-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}" cx-prop-iso-code="{{getRecordData(recordObj,\'Currency\')}}" cx-prop-exchange-rate="{{getRecordData(recordObj,\'ExchangeRate\',relatedList)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;email&quot;)}}"><template case="true"> <a class="cxEmailViewLink cruxPreventClick" href="mailto:{{getRecordData(recordObj,fieldObj.api_name)}}"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;website&quot;)}}"><template case="true"> <a class="link cruxPreventClick" href="{{href(getRecordData(recordObj,fieldObj.api_name))}}" target="_blank"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;layout&quot;)}}"><template case="true"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name,\'name\')}}"></lyte-text> </template><template case="false"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text> </template></template></template></template></template></template></template></template></template></template></template></template> </template> </crux-table-component> <div class="dF right spaceBetween p15 siNxtsec mT10 aiCenter msTableBanner zi14 pA bottom2 w100_per bg_white h30"> <div class="paginationdiv dF fE mR20 mB10 mT15 aiCenter jcCenter"> <template is="if" value="{{expHandlers(confirmJSON.length,\'>\',0)}}"><template case="true"> <lyte-navigator lt-prop-more-records="{{resp.meta.more_records}}" lt-prop-value="{{record_from}}" lt-prop-records="{{record_to}}" lt-prop-perpage="20" lt-prop-yield="true" on-next="{{method(\'navigate\',\'next\',\'confirm\')}}" on-previous="{{method(\'navigate\',\'previous\',\'confirm\')}}"> <template is="registerYield" yield-name="navigatorYield" class="dF"> <div class="dF aiCenter jcCenter"> <div class="lyteNavigator lyteSingleBack lyteIconSingleBack" data-zcqa="bulkRecordNavBackLV"></div> <div class="mR10 mL10">{{getI18n("crm.entity.record.index",expHandlers(record_from,\'+\',1),record_to)}}</div> <div class="lyteNavigator lyteSingleFront lyteIconSingleFront" data-zcqa="bulkRecordNavFrontLV"></div> </div> </template> </lyte-navigator> </template></template> </div> <div class="dF pad20"> <lyte-button class="mu_backBtn" id="cancelbut" lt-prop-disabled="{{if(expHandlers(errorRecordIds.length,\'<\',1),\'false\',\'true\')}}" data-zcqa="mxnAddMore" onclick="{{action(&quot;backcnfrmPop&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("crm.button.back.alone")}} </template> </lyte-button> <lyte-button class="mu_confBtn" lt-prop-disabled="{{if(expHandlers(expHandlers(cnfrmcount,\'>\',0),\'&amp;&amp;\',expHandlers(errorRecordIds.length,\'<\',1)),\'false\',\'true\')}}" data-zcqa="mxnassociateMLRecords" id="confirmButton" lt-prop-appearance="primary" onclick="{{action(&quot;cnfrmList&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("Confirm")}} </template> </lyte-button> </div> </div> </div> </div> </div> </template></template> <template is="if" value="{{unassignpage}}"><template case="true"> <div id="msUnassignPage" class="h100_per"> <div class="dF aiCenter lookHeader p12 bg_white"> <span class="msSmartFilterIcon cP dF aiCenter {{if(showSmartFilter,\'activeLabel\',\'\')}} br6 dIB vaT pR" data-zcqa="lv_filterStatus" onclick="{{action(\'showHideFilter\',this)}}"> <template is="if" value="{{expHandlers(expHandlers(filterApplied,\'!=\',&quot;0&quot;),\'&amp;&amp;\',expHandlers(showSmartFilter,\'!\'))}}"><template case="true"> <span class="filterNotification"></span> </template></template> <span class="zcicncss-filter zcicn-cssIcons"></span> </span> <span data-zcqa="unassignPage_title" class="crm-heading-font-size crm-font-bold dIB">{{getI18n("crm.mxnlookup.selected",modulelableplural)}}</span> </div> <div class="mL5 newListviewRevamp dF spaceBetween searchsec p10 aiCenter"> <div data-zcqa="lv_summaryArea" class="aiCenter mL5 totalRecordsInNumbers mR5"> <div class="{{if(expHandlers(unassigncount,\'>\',0),\'\',\'hide\')}} cBoth dIF aiCenter fwWrap" id="selectedColumnUnassign" data-zcqa="mxnselected-records"> <span data-zcqa="recordCount" class="mlSelectedRecord mR5 crm-subheading-font-size crm-font-semibold">{{unassigncount}}</span> <span id="mlSelectedRecordMsg" class="crm-font-regular">{{getI18n("crm.label.deduplicate.selected",if(expHandlers(unassigncount,\'&gt;\',1),modulelableplural,modulelable))}}</span> <span id="mlSelectedRecord" data-zcqa="recordClear" onclick="{{action(&quot;clearData&quot;,this)}}" class="unsortLink pR crm-base-font-size link mL10 cP crm-font-regular">{{getI18n("crm.title.clear.name")}}</span> </div> <template is="if" value="{{isFilterApplied}}"><template case="true"> <span class="filterData cDefault pR mu_filterCont"><span class="radiusCircle dIB"></span>{{getI18n("crm.emailstats.filterby")}} <span data-zcqa="filterName" class="pL5 filternameBy cText crm-font-bold newDarkColor mu_filterCont">{{filterApplied}}</span> <template is="if" value="{{expHandlers(expHandlers(isApplyFilter,\'!\'),\'&amp;&amp;\',expHandlers(filterApplied,\'!=\',&quot;0&quot;))}}"><template case="true"> <lyte-button lt-prop-appearance="primary" lt-prop-class="outlineprimary" data-zcqa="lv_clearFilter" onclick="{{action(&quot;onFilterClear&quot;,this)}}" class="pR mR0 mL7 cP clear" lt-prop-size="small"> <template is="registerYield" yield-name="text"> {{getI18n("crm.report.clear.filter")}} </template> </lyte-button> </template></template> </span> </template></template> <template is="if" value="{{expHandlers(sort_label,\'!=\',&quot;id&quot;)}}"><template case="true"> <span class="filterData cDefault wsNowrap mR10"><span class="radiusCircle dIB"></span>{{getI18n("crm.api.apidashboard.SortBy")}} <span class="newDarkColor crm-font-bold cText">{{sort_label}}</span><span class="mL8 cP unsortLink pR" onclick="{{action(\'unsortRecord\')}}" data-zcqa="lv_unsortLink">{{getI18n("crm.column.unsort")}}</span></span> </template></template> </div> <div class="flexAlignCenter ms_remainHeader"> <lyte-input id="multiSelectSearchInput" data-zcqa="mxnsearchString" on-focus="{{method(\'hoverCardShow\')}}" on-blur="{{method(\'hoverCardHide\')}}" lt-prop-close-icon="true" class="mR10 h34" lt-prop-placeholder="{{getI18n(\'crm.button.search\')}}" lt-prop-type="search" lt-prop-appearance="box" lt-prop-value="{{lbind(searchValue)}}" lt-prop-maxlength="200" lt-prop-autocomplete="off" on-clear="{{method(\'searchBarSearch\',\'assign\')}}" onkeypress="{{action(\'onSearch\',event,\'assign\')}}"></lyte-input> <div class="butdiv {{if(expHandlers(unassigncount,\'>\',0),\'hide\',\'\')}}" id="unassignallsec"> <template is="if" value="{{expHandlers(expHandlers(client_account,\'!\'),\'&amp;&amp;\',expHandlers(linkingModule,\'!=\',&quot;LinkingModuleBundleRel&quot;))}}"><template case="true"> <lyte-button lt-prop-disabled="{{if(disableUnassignall,\'true\',\'false\')}}" data-zcqa="mxnremoveBtn" id="unassallbut" onclick="{{action(&quot;unassignselctedMod&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n(\'crm.button.removeall\')}} </template> </lyte-button> </template></template> <template is="if" value="{{showAddRecord(linkingModule)}}"><template case="true"> <lyte-button class="mL10" data-zcqa="mxnAddMore" lt-prop-class="outlineprimary" onclick="{{action(&quot;showlookupMod&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n(\'crm.module.addmore\')}} </template> </lyte-button> </template></template> </div> <div class="butdiv {{if(expHandlers(unassigncount,\'>\',0),\'\',\'hide\')}}" id="unassignsec"> <lyte-button lt-prop-appearance="failure" data-zcqa="mxnremoveBtn" id="unassbut" onclick="{{action(&quot;unassignselctedMod&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n(\'crm.mxnlookup.dissociate\')}} </template> </lyte-button> </div> </div> </div> <div class="mscontenttab cBoth newListviewRevamp h100vh oH dF p15 pR0 pT0"> <div class="cvFilters sitransdiv pR" id="cruxFilterthi"> <crm-custom-filter class="siOuterBOrder hAuto" module="{{module}}" api_name="{{moduleApiName}}" lyte-rendered="none"> <div id="lv_left_filter" class="cvLeftPane oH pR newListOLY {{if(showSmartFilter,\'filterEnableReq mR15\',\'\')}} mB15 h100_per pT0 Msfilbor"> <form name="customViewSmartFilters" onsubmit="{{action(\'preventFromOnSubmit\',event)}}"> <div class="msselctfil pR pT10 {{if(isApplyFilter,\'multiSelectFilterOn\',\'\')}}"> <crux-smart-filter id="relatedListunassignFilter" cx-prop-class="{{if(isQuickCreate,\'quickCreate\',\'normalPopup\')}}" cx-prop-search-label="{{I18nDynamicKey(\'crm.label.filter.module\',\'\',modulelableplural)}}" cx-prop-is-special-fields="false" cx-prop-module-display-field="{{moduleDisplayField}}" cx-prop-module="{{module}}" cx-prop-criteria="{{filterCri}}" cx-prop-fields="{{lbind(filterList)}}" class="newSmartFilter" cx-prop-new-list-key="true" cx-prop-display-as-accord="true" enable-scroll-loading="true" cx-prop-search="true" cx-prop-field-select-limit="15" cx-prop-lookup-limit="2" on-before-field-checked="{{method(\'onBeforeFieldChanged\')}}" on-field-change="{{method(\'onFieldChanged\')}}" on-value-change="{{method(\'onValueChange\',\'unassignfilterApply\')}}" cx-prop-prevent-ui-type="{{preventUiType}}" cx-prop-prevent-column-name="{{preventFieldForFilter}}"></crux-smart-filter> </div> <template is="if" value="{{isApplyFilter}}"><template case="true"> <div class="footerLV footerActionEle"> <lyte-button lt-prop-size="small" data-zcqa="dash_listView_submit" class="mR7" lt-prop-appearance="primary" id="unassignfilterApply" onclick="{{action(&quot;applyFilter&quot;,this)}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.button.apply.filter")}} </template> </lyte-button> <lyte-button lt-prop-size="small" data-zcqa="dash_listView_clear" class="mR10" lt-prop-appearance="default" id="unassignfilerClear" onclick="{{action(&quot;onFilterClear&quot;,this)}}"> <template is="registerYield" yield-name="text"> {{getI18n("crm.title.clear.name")}} </template> </lyte-button> </div> </template></template> </form> </div> </crm-custom-filter> </div> <div id="viewcontainertir" class="msmulticontainer w300 br_border3 flexOne dF flexDC spaceBetween vaT newListOLY pR bg_white Mstabwidth Mstabbor"> <template is="if" value="{{loader}}"><template case="true"> <crm-ui-loaders interaction-name="crmCircleLoader" class="dF aiCenter jcCenter zi15 bg_white pA w100_per h100_per br12"></crm-ui-loaders> </template></template> <template is="if" value="{{expHandlers(client_account,\'!\')}}"><template case="true"> <div class="columnCustomization msColumn dF aiCenter jcCenter" data-zcqa="listView_addColumn" id="addColumn"> <span type="button" class="manageColumnClss"></span> <span id="optionsList" class="dN"></span> </div> </template></template> <crux-table-component cx-prop-header="{{tableFields}}" cx-prop-content="{{tableContent}}" cx-prop-column-cell-class="msfilterTable pR oH" cx-prop-table-class="{{if(clipMode,\'wrapTextIncluded setMaxWidthForTable\',\'setMaxWidthForTable\')}}" cx-prop-field-type-mapping="{{fieldTypeMapping}}" cxpropenablebodyscroll="true" cx-prop-yield-for-prefix="true" cx-prop-sort-columns="true" cx-prop-height="calc(100% - 50px);" cx-prop-express="true" class="cruxTablecls entityLookupTable mstablebg" id="listcrux" cx-prop-no-records-zcqa="lvNoRecordsFound" cx-prop-row-zcqa="detailView" cx-prop-clip-mode="{{clipMode}}" cx-prop-no-records-message="{{getI18n(\'crm.module.empty.message\',modulelableplural)}}" data-zcqa="assign" cx-prop-sorted-column="{{sort_by}}" cx-prop-sorted-order="{{sort_order}}" cx-prop-enable-body-scroll="false" cx-prop-sticky-table="true" cx-prop-show-sort-icon="true" cx-prop-tooltip="true" cx-prop-table-id="listViewTable" cx-prop-header-row-id="listviewHeaderRow" on-resize-end="{{method(\'onResizeSelect\')}}" on-mouse-over="{{action(\'addBackGround\')}}" on-mouse-out="{{action(\'removeBackGround\')}}" cx-prop-dual-resize="true" on-scroll="{{method(\'cxTableScroll\')}}"> <template is="yield" yield-name="header-prefix-1" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{expHandlers(tableContent.length,\'>\',0)}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="{{if(showSmartFilter,\'pL5\',\'pL10\')}}" data-zcqa="listView_selectAllEntity" id="allselfirstunassign" cx-prop-fixed="enable" on-changed="{{method(\'selectAll\',this)}}" lt-prop-class="{{selectAllBox}}" lt-prop-checked="false" lt-prop-value="val" lt-prop-id="checkbox"> </lyte-checkbox> </template></template> </template> <template is="yield" yield-name="body-inputfield"> <div class="dF" id="zcpq_bundle_qty_view_{{recordObj.id}}"> <span class="mR30" id="prdQty_{{recordObj.id}}">{{getRecordData(recordObj,fieldObj.api_name)}}</span> <span class="op9 flexS0 vH mT4 zcicn-cssIcons zcicncss-editFilled zcicncss13 pT2 cP zcpq_bundleQty_edit" data-zcqa="qty_edit_btn_{{recordObj.Product.Product_Name}}" onclick="{{action(\'showQuickEditView\',recordObj.id,true)}}"></span> </div> <div class="dF aiCenter gap8 oH hide pA top5" id="zcpq_bundle_qty_edit_{{recordObj.id}}"> <span class="dF"> <crux-number-component cx-prop-field="{{fieldObj}}" cx-prop-id="cpq_prtBun_qty_{{recordObj.id}}" cx-prop-class="w100 crmSmallInput zcpq_bundle_qtyInput" cx-prop-direction="vertical" cx-prop-from="create" cx-prop-appearance="box" cx-prop-maxlength="8" cx-prop-minvalue="0.0000001" cx-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}" cx-prop-type="number" id="prod_quantity_{{recordObj.id}}" onkeydown="{{action(\'enterKeyQuickEditChanges\',event,recordObj)}}" cx-prop-name="product quantity" data-zcqa="qty_inp_{{recordObj.Product.Product_Name}}" on-value-change="{{method(\'validateIndividualProductQuantity\',recordObj)}}"></crux-number-component> </span> <span class="cP bun_prd_qedit_btn_{{recordObj.id}}" data-zcqa="save_qty_button_{{recordObj.Product.Product_Name}}" onclick="{{action(\'saveBundleQuickEditChanges\',recordObj)}}"> <crmutil-icon icon-name="tick-filled-rounded" icon-class="zcicn-tick-filled-rounded zcicn_blue"></crmutil-icon> </span> <span class="zcicncss-close-rounded zcicn-cssIcons cP bun_prd_qedit_btn_{{recordObj.id}}" data-zcqa="cancel_qty_edit_{{recordObj.Product.Product_Name}}" onclick="{{action(\'showQuickEditView\',recordObj.id,false)}}"></span> </div> </template> <template is="yield" yield-name="body-prefix-1" cx-prop-fixed="enable" cx-prop-style="width:10px"> <template is="if" value="{{expHandlers(client_account,\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(isLookUp,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(client_module[parentModule],\'==\',fieldId),\'&amp;&amp;\',expHandlers(recordObj[connectedLookupApiName].id,\'==\',client_id)),\'||\',expHandlers(expHandlers(client_module[module],\'==\',connectedFieldId),\'&amp;&amp;\',expHandlers(entityId,\'==\',client_id)))),\'||\',expHandlers(expHandlers(isLookUp,\'&amp;&amp;\',expHandlers(client_module[module],\'==\',fieldId)),\'&amp;&amp;\',expHandlers(entityId,\'==\',client_id))))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadassign1" cx-prop-fixed="enable" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="iconlock_ap mL2" lt-prop-title="{{getI18n(&quot;crm.multi.selection.mandatory.portal.account&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(isLookUp,\'&amp;&amp;\',recordObj.$stop_processing),\'||\',expHandlers(expHandlers(isLookUp,\'!\'),\'&amp;&amp;\',recordObj[connectedLookupApiName].$stop_processing))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.privacy.listview.consent.locked&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="lockedInfoIco_dv lvRecLockIcon dIB svgIcons" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(isLookUp,\'&amp;&amp;\',expHandlers(recordObj.$sharing_permission,\'!=\',null)),\'&amp;&amp;\',expHandlers(recordObj.$sharing_permission,\'==\',&quot;read_only&quot;))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.label.readonly&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="iconlock_ap mL2" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(isLookup,\'!\'),\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(recordObj[connectedLookupApiName].$review,\'!=\',null),\'&amp;&amp;\',expHandlers(recordObj[connectedLookupApiName].$review,\'!=\',&quot;Approved&quot;)),\'||\',expHandlers(expHandlers(expHandlers(recordObj[connectedLookupApiName].$approval_state,\'!=\',null),\'&amp;&amp;\',expHandlers(recordObj[connectedLookupApiName].$approval_state,\'!=\',&quot;approved&quot;)),\'&amp;&amp;\',expHandlers(recordObj[connectedLookupApiName].$approval_state,\'!=\',&quot;approval_process_rejected&quot;))))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.approvalProcess.label.waitingForApproval&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="iconlock_ap mL2" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(recordObj.$review,\'!=\',null),\'&amp;&amp;\',expHandlers(recordObj.$review,\'!=\',&quot;Approved&quot;)),\'||\',expHandlers(expHandlers(expHandlers(recordObj.$approval_state,\'!=\',null),\'&amp;&amp;\',expHandlers(recordObj.$approval_state,\'!=\',&quot;approved&quot;)),\'&amp;&amp;\',expHandlers(recordObj.$approval_state,\'!=\',&quot;approval_process_rejected&quot;)))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.approvalProcess.label.waitingForApproval&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="iconlock_ap mL2" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(unassignPermission,\'!\'),\'&amp;&amp;\',expHandlers(cruxContains(confirm_tempIds,recordObj.id),\'!\'))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadassign1" cx-prop-fixed="enable" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="customCheckBoxDisabled vVIm" on-before-checked="{{method(&quot;showMessage&quot;,recordObj,false)}}" lt-prop-checked="false" lt-prop-value="val"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(isLookUp,\'&amp;&amp;\',expHandlers(expHandlers(expHandlers(recordObj.Layout,\'==\',null),\'&amp;&amp;\',layoudidVsMandatory[defaultLayoutId]),\'||\',expHandlers(expHandlers(recordObj.Layout,\'!=\',null),\'&amp;&amp;\',layoudidVsMandatory[recordObj.Layout.id])))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadassign1" cx-prop-fixed="enable" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="customCheckBoxDisabled vVIm" on-before-checked="{{method(&quot;showMessage&quot;,recordObj,false)}}" lt-prop-checked="false" lt-prop-value="val"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isLookUp,\'!\'),\'&amp;&amp;\',expHandlers(entityId,\'!=\',null)),\'&amp;&amp;\',expHandlers(recordObj.Name,\'==\',null)),\'&amp;&amp;\',expHandlers(cruxContains(confirm_tempIds,recordObj.id),\'!\')),\'&amp;&amp;\',expHandlers(isHiddenModule,\'!\')),\'&amp;&amp;\',expHandlers(fieldApiName,\'!=\',&quot;Linked_Products&quot;))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadassign1" cx-prop-fixed="enable" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" lt-prop-class="customCheckBoxDisabled vVIm" on-before-checked="{{method(&quot;showMessage&quot;,recordObj,false)}}" lt-prop-checked="false" lt-prop-value="val"> </lyte-checkbox> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(isLookUp,\'!\'),\'&amp;&amp;\',recordObj[connectedLookupApiName].Locked__s),\'&amp;&amp;\',recordObj[connectedLookupApiName].$locked_for_me),\'&amp;&amp;\',expHandlers(recordObj[connectedLookupApiName].$editable,\'!\')),\'||\',expHandlers(expHandlers(expHandlers(isLookUp,\'&amp;&amp;\',recordObj.Locked__s),\'&amp;&amp;\',recordObj.$locked_for_me),\'&amp;&amp;\',expHandlers(recordObj.$editable,\'!\')))}}"><template case="true"> <template is="if" value="{{expHandlers(expHandlers(expHandlers(isLookUp,\'!\'),\'&amp;&amp;\',recordObj[connectedLookupApiName].$assignable),\'||\',expHandlers(isLookUp,\'&amp;&amp;\',recordObj.$assignable))}}"><template case="true"> <lyte-checkbox lt-prop-name="checkbox" class="leadassign" cx-prop-fixed="enable" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" on-changed="{{method(&quot;selectSingleRecord&quot;,this,&quot;unassigncount&quot;,&quot;remove_tempIds&quot;,&quot;remove_confirm_tempIds&quot;)}}" onclick="{{action(&quot;singleShiftSelectRecord&quot;,event,this)}}" lt-prop-class="{{if(cruxContains(remove_tempIds,recordObj.id),\'customCheckBoxChecked\',\'customCheckBox\')}}" lt-prop-checked="{{if(cruxContains(remove_tempIds,recordObj.id),\'true\',\'false\')}}" lt-prop-value="val"> </lyte-checkbox> </template></template> <lyte-checkbox lt-prop-name="checkbox" class="leadCheck" lt-prop-title="{{getI18n(&quot;crm.record.lock.record.locked&quot;)}}" lt-prop-tooltip-config="{&quot;position&quot;:&quot;bottomright&quot;, &quot;appearance&quot; : &quot;box&quot;}" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="lockedforMeBody_{{recordObj.id}}" lt-prop-class="dIB mT3 zcrm_svgIcons rlc_lockIcon vaT" lt-prop-checked="false" lt-prop-disabled="true"> </lyte-checkbox> </template><template case="false"> <lyte-checkbox lt-prop-name="checkbox" class="leadassign" cx-prop-fixed="enable" id="selectEntity_{{recordObj.id}}" lt-prop-id="{{recordObj.id}}" data-zcqa="selectEntity" on-changed="{{method(&quot;selectSingleRecord&quot;,this,&quot;unassigncount&quot;,&quot;remove_tempIds&quot;,&quot;remove_confirm_tempIds&quot;)}}" onclick="{{action(&quot;singleShiftSelectRecord&quot;,event,this)}}" lt-prop-class="{{if(cruxContains(remove_tempIds,recordObj.id),\'customCheckBoxChecked\',\'customCheckBox\')}}" lt-prop-checked="{{if(cruxContains(remove_tempIds,recordObj.id),\'true\',\'false\')}}" lt-prop-value="val"> </lyte-checkbox> </template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template></template> </template> <template is="yield" yield-name="header-suffix-1" cx-prop-style="width:40px"></template> <template is="yield" yield-name="body-suffix-1" cx-prop-style="width:40px"></template> <template is="yield" yield-name="body-multiselect-lookup"> <template is="if" value="{{fieldObj.display_field}}"><template case="true"> <a id="listView_{{getRecordData(recordObj,fieldObj.api_name,\'id\')}}" class="link" data-zcqa="{{getRecordData(recordObj,fieldObj.api_name)}}" href="{{getLink(&quot;crm.tab.module.entity.detail&quot;,getDynamicArray(fieldObj.module,getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)))}}" target="{{blank}}" onclick="{{action(\'invokeTransition\',event,this,\'crm.tab.module.entity.detail\')}}" lt-prop-dp="[&quot;{{fieldObj.module}}&quot;, &quot;{{getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)}}&quot;]"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.ui_type,\'==\',133)}}"><template case="true"> <a class="link" href="{{getLink(&quot;crm.tab.module.entity.detail&quot;,getDynamicArray(fieldObj.module,getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)))}}" target="{{blank}}" onclick="{{action(\'invokeTransition\',event,this,\'crm.tab.module.entity.detail\')}}" lt-prop-dp="[&quot;{{fieldObj.module}}&quot;, &quot;{{getRecordData(recordObj,fieldObj.api_name,&quot;id&quot;)}}&quot;]"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name,\'name\')}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(expHandlers(expHandlers(expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;boolean&quot;),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;tag&quot;)),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;user&quot;)),\'||\',expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;number&quot;)),\'||\',expHandlers(expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;picklist&quot;),\'&amp;&amp;\',fieldObj.enable_colour_code))}}"><template case="true"> <template is="component" cx-prop-is-color-code-enabled="{{fieldObj.enable_colour_code}}" cx-prop-field="{{fieldObj}}" cx-prop-tooltip="true" cx-prop-clip-mode="{{clipMode}}" component-name="crux-{{fieldObj.cxTypeMapping}}-component" cx-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}" cx-prop-iso-code="{{getRecordData(recordObj,\'Currency\')}}" cx-prop-exchange-rate="{{getRecordData(recordObj,\'ExchangeRate\',relatedList)}}"></template> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;email&quot;)}}"><template case="true"> <a class="cxEmailViewLink cruxPreventClick" href="mailto:{{getRecordData(recordObj,fieldObj.api_name)}}"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;website&quot;)}}"><template case="true"> <a class="link cruxPreventClick" href="{{href(getRecordData(recordObj,fieldObj.api_name))}}" target="_blank"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text></a> </template><template case="false"><template is="if" value="{{expHandlers(fieldObj.cxTypeMapping,\'==\',&quot;layout&quot;)}}"><template case="true"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name,\'name\')}}"></lyte-text> </template><template case="false"> <lyte-text class="wfrepTextMaxWidth" lt-prop-tooltip-config="{&quot;showdelay&quot; : 600, &quot;appearance&quot; : &quot;box&quot; }" lt-prop-tooltip-class="lvTooltipClass" lt-prop-value="{{getRecordData(recordObj,fieldObj.api_name)}}"></lyte-text> </template></template></template></template></template></template></template></template></template></template></template></template> </template> </crux-table-component> <div class="dF right spaceBetween p15 siNxtsec mT10 jcFlextStart aiCenter msTableBanner zi14 pA bottom2 w100_per bg_white h30"> <div class="paginationdiv dF fE mR20 mB10 mT15 aiCenter jcCenter"> <template is="if" value="{{expHandlers(tableContent.length,\'>\',0)}}"><template case="true"> <lyte-navigator lt-prop-more-records="{{resp.meta.more_records}}" lt-prop-value="{{record_from}}" lt-prop-records="{{record_to}}" lt-prop-perpage="20" lt-prop-yield="true" on-next="{{method(\'navigate\',\'next\',\'assign\')}}" on-previous="{{method(\'navigate\',\'previous\',\'assign\')}}"> <template is="registerYield" yield-name="navigatorYield" class="dF"> <div class="dF aiCenter jcCenter"> <div class="lyteNavigator lyteSingleBack lyteIconSingleBack" data-zcqa="bulkRecordNavBackLV"></div> <div class="mR10 mL10">{{getI18n("crm.entity.record.index",expHandlers(record_from,\'+\',1),record_to)}}</div> <div class="lyteNavigator lyteSingleFront lyteIconSingleFront" data-zcqa="bulkRecordNavFrontLV"></div> </div> </template> </lyte-navigator> </template></template> </div> </div> </div> </div> </div> </template></template> <lyte-popover lt-prop-close-on-body-click="false" lt-prop="{duration : 200 }" id="multiSelectSearchHvrcrd" lt-prop-origin-elem="{{if(isQuickCreate,&quot;.msQuickCreate&quot;,&quot;.msNormalPopup&quot;)}} #multiSelectSearchInput" lt-prop-show="false" lt-prop-wrapper-class="multiSelectSearchHvrcrd" lt-prop-placement="bottomLeft" lt-prop-content-padding="10px" lt-prop-freeze="false" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="popover"> <lyte-popover-content> <p>{{getI18n("crm.multi.selection.search.holder")}} {{display_label}}</p> </lyte-popover-content> </template> </lyte-popover> </lyte-modal-content> </template> </lyte-modal> <lyte-messagebox id="successmsg" on-close="{{method(&quot;msgclose&quot;,&quot;showmsg&quot;)}}" lt-prop-show="{{showmsg}}" lt-prop-type="{{type}}" lt-prop-message="{{message}}" lt-prop-duration="6500" lt-prop-transition="{&quot;animation&quot;:&quot;fadeIn&quot;,&quot;duration&quot;:&quot;0.4s&quot;}"> </lyte-messagebox> <crux-alert cx-prop-top="0px" id="lookupUpdateWarningPopup" cx-prop-yield="true" cx-prop-dimmer="{&quot;color&quot;:&quot;black&quot;,&quot;opacity&quot;:&quot;0.4&quot;}" on-close="{{method(&quot;msgclose&quot;,&quot;showAlert&quot;)}}" cx-prop-type="{{type}}" cx-prop-class="{{type}}AlertIcon lyteStatusIcon" cx-prop-button-position="center" cx-prop-animation="slidedown" cx-prop-content-align="left" cx-prop-show="{{showAlert}}" cx-prop-buttons="{{buttonJson}}" cx-prop-primary-message="{{errorHeading}}" cx-prop-secondary-message="{{errormessage}}"></crux-alert> <lyte-modal lt-prop-height="auto" lt-prop-close-on-escape="false" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromTop&quot;,&quot;duration&quot;:&quot;0.5s&quot;}" lt-prop-offset="{&quot;top&quot;:&quot;0px&quot;}" id="unassignpop" lt-prop-width="auto" lt-prop-allow-multiple="true" lt-prop-wrapper-class="MsunassignModal" lt-prop-show-close-button="false" lt-prop-show="{{showUnassignPopup}}"> <template is="registerYield" yield-name="modal"> <lyte-modal-header data-zcqa="confirmation_message" class="aligncenter"> <template is="if" value="{{unassignall}}"><template case="true"> <template is="if" value="{{expHandlers(isRelatedList,\'||\',isFromBlueprint)}}"><template case="true"> <div class="crm-heading-font-size">{{getI18n("crm.mxnLookup.dissociatemessage",modulelableplural,entityName,parentModulelable)}}</div> </template><template case="false"> <div class="crm-heading-font-size">{{getI18n("crm.mxnlookup.editpopup.unassignall.popup",modulelableplural,parentModulelable)}}</div> </template></template> </template><template case="false"> <div class="crm-heading-font-size">{{getI18n("crm.mxnLookup.dissociateselectedmessage",if(expHandlers(unassigncount,\'&gt;\',1),unassigncount,selectedfield),if(expHandlers(unassigncount,\'&gt;\',1),modulelableplural,modulelable),entityName,parentModulelable)}}</div> </template></template> </lyte-modal-header> <lyte-modal-content class="mB18"> <div class="assignbutgrp dF jcCenter"> <lyte-button data-zcqa="unassign_cancel" class="mL10" onclick="{{action(&quot;closeunassignselctedMod&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("crm.button.cancel")}} </template> </lyte-button> <lyte-button data-zcqa="unassign_record" class="mR10" lt-prop-appearance="failure" id="unassallbut" onclick="{{action(&quot;unassignRecord&quot;)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("crm.confirm.deassociate")}} </template> </lyte-button> </div> </lyte-modal-content> </template> </lyte-modal> <lyte-menu id="ms_sortmenu" on-menu-click="{{method(\'sortRecord\')}}" on-before-open="{{method(\'sortButtonDisplay\')}}" on-open="{{method(\'SortingMenuOpen\')}}" on-close="{{method(\'SortingMenuClose\')}}" lt-prop-yield="true" lt-prop-freeze="false" lt-prop-event="click" lt-prop-query="{{if(isQuickCreate,&quot;.msQuickCreate&quot;,&quot;.msNormalPopup&quot;)}} .mscontenttab lyte-exptable-th.sortAllowed .cxTableSortIcon" lt-prop-wrapper-class="lyteMenuSelected" lt-prop-show="{{lbind(showMultiSortMenu)}}"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="pT5 pB5 newSortMenu newLvDropdown"> <template is="for" items="{{sortList}}" item="order" index="index"> <template is="if" value="{{expHandlers(order,\'==\',&quot;asc&quot;)}}"><template case="true"> <lyte-menu-item data-zcqa="sorting_asc" id="sortAsc" data-value="asc" class="sortItemMenu pL31 lookupSortItem aiCenter "> <span class="dIB zcicncss-arrowasc zcicn-cssIcons top7 left10 pA"></span> {{getI18n("crm.column.sort.asc")}} </lyte-menu-item> </template><template case="false"><template is="if" value="{{expHandlers(order,\'==\',&quot;desc&quot;)}}"><template case="true"> <lyte-menu-item data-zcqa="sorting_desc" id="sortDesc" data-value="desc" class="sortItemMenu pL31 lookupSortItem aiCenter"> <span class="dIB zcicncss-arrowasc zcicn-rotate-180 zcicn-cssIcons top7 left10 pA"></span> {{getI18n("crm.column.sort.desc")}} </lyte-menu-item> </template><template case="false"><template is="if" value="{{expHandlers(order,\'==\',&quot;unsort&quot;)}}"><template case="true"> <lyte-menu-item data-zcqa="sorting_unsort" id="sortUnsort" data-value="unsort" class="sortItemMenu pL31 lookupSortItem aiCenter"> <span class="unsortFiels"></span> <span class="zcicncss-close zcicn-cssIcons top11 left11 pA"></span> {{getI18n("crm.column.unsort")}} </lyte-menu-item> </template></template></template></template></template></template> </template> </lyte-menu-body> </template> </lyte-menu> <lyte-menu lt-prop-yield="true" lt-prop-freeze="false" lt-prop-event="click" lt-prop-query="{{if(isQuickCreate,&quot;.msQuickCreate&quot;,&quot;.msNormalPopup&quot;)}} .msColumn" lt-prop-wrapper-class="none"> <template is="registerYield" yield-name="yield"> <lyte-menu-body class="pT5 pB5 newSortMenu newLvDropdown"> <lyte-menu-item data-zcqa="lv_manageColumn" class="msManageColumnSize lookupSortItem aIc" onclick="{{action(&quot;showManageColumn&quot;)}}">{{getI18n("crm.listview.options.manage")}}</lyte-menu-item> <lyte-menu-item data-zcqa="lv_resetWidth" class="msManageColumnSize lookupSortItem aIc {{if(resetOption,\'eventNone disable\')}}" onclick="{{action(&quot;resetColumnSize&quot;,this)}}">{{getI18n("crm.listview.options.reset.width")}}</lyte-menu-item> <lyte-menu-item data-zcqa="lv_clipWrapSwitch" class="msManageColumnSize lookupSortItem aIc" onclick="{{action(&quot;changeClipText&quot;)}}"><template is="if" value="{{expHandlers(clipMode,\'!\')}}"><template case="true">{{getI18n("crm.listview.options.text.clip")}}</template><template case="false">{{getI18n("crm.listview.options.text.wrap")}}</template></template></lyte-menu-item> </lyte-menu-body> </template> </lyte-menu> <lyte-modal lt-prop-wrapper-class="columnListNew cxColumnListOnPopup cxColumnListOnPopupWithHeader" on-show="{{method(&quot;disableLinkingModuleColumn&quot;)}}" lt-prop-height="auto" lt-prop-transition="{&quot;animation&quot;:&quot;slideFromTop&quot;,&quot;duration&quot;:&quot;0.5s&quot;}" lt-prop-offset="{&quot;top&quot;:&quot;0&quot;,&quot;left&quot;:&quot;center&quot;}" id="manageColumn" lt-prop-show="{{showManageColumn}}" lt-prop-show-close-button="false"> <template is="registerYield" yield-name="modal"> <lyte-modal-header>{{getI18n("crm.listview.options.manage")}}</lyte-modal-header> <lyte-modal-content class="manageColumnListContent"> <crux-column-list class="dB" cx-prop-fields="{{ColumnList}}" cx-prop-selected-fields="{{selectFields}}" cx-prop-disable-sort-for-unselected-fields="true" cx-prop-id="addColumnContainer" cx-prop-display-label="field_label" cx-prop-mandatory="display_field" cx-prop-unique-name-selector="api_name" on-before-checked="{{method(&quot;beforeUnchecking&quot;)}}" on-before-unchecked="{{method(&quot;beforeUnchecking&quot;)}}" on-render="{{method(&quot;disableLinkingModuleColumn&quot;)}}" on-drop-item="{{method(&quot;disableLinkingModuleColumn&quot;)}}" on-search="{{method(&quot;disableLinkingModuleColumn&quot;)}}"> </crux-column-list> </lyte-modal-content> <lyte-modal-footer class="right"> <lyte-button data-zcqa="listViewCancelbtn" lt-prop-appearance="default" onclick="{{action(&quot;hideManageColumn&quot;,this)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("crm.button.cancel")}} </template> </lyte-button> <lyte-button data-zcqa="listViewSubmitbtn" lt-prop-appearance="primary" onclick="{{action(&quot;saveManageColumn&quot;,this)}}"> <template is="registerYield" yield-name="text" class="none"> {{getI18n("crm.button.save")}} </template> </lyte-button> </lyte-modal-footer> </template> </lyte-modal> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,0]}]}},default:{}},{type:"attr",position:[1,3,1,3]},{type:"if",position:[1,3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,5]},{type:"if",position:[1,3,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,4]},{type:"text",position:[1,4,0]}]}},default:{}},{type:"attr",position:[1,3,3,1]},{type:"componentDynamic",position:[1,3,3,1]},{type:"attr",position:[1,3,3,3]},{type:"if",position:[1,3,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,1,1]},{type:"attr",position:[1,5,1,1,1]},{type:"attr",position:[1,5,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,1,1]},{type:"componentDynamic",position:[1,5,1,1,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,3]},{type:"if",position:[1,5,1,1,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,3]}]}},default:{}},{type:"componentDynamic",position:[1,5,1,1]},{type:"attr",position:[1,5,3,1]},{type:"if",position:[1,5,3,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,3,3]},{type:"if",position:[1,5,3,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,5,3,5]},{type:"registerYield",position:[1,5,3,5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,5,3,5,3],dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},{type:"registerYield",position:[1,5,3,5,5],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"registerYield",position:[1,5,3,5,7],dynamicNodes:[]},{type:"registerYield",position:[1,5,3,5,9],dynamicNodes:[]},{type:"registerYield",position:[1,5,3,5,11],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,5,3,5]},{type:"attr",position:[1,5,3,7,1,1]},{type:"if",position:[1,5,3,7,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,3,0]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,3,7,3,1]},{type:"registerYield",position:[1,5,3,7,3,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,5,3,7,3,1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"text",position:[1,1,3,0]},{type:"text",position:[1,3,1,0]},{type:"text",position:[1,3,1,2,0]},{type:"attr",position:[1,3,1,4]},{type:"if",position:[1,3,1,4],cases:{true:{dynamicNodes:[{type:"text",position:[1,2]},{type:"text",position:[1,4,0]},{type:"attr",position:[1,6]},{type:"if",position:[1,6],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,6]},{type:"if",position:[1,3,1,6],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,4]},{type:"text",position:[1,4,0]}]}},default:{}},{type:"attr",position:[1,3,3]},{type:"componentDynamic",position:[1,3,3]},{type:"attr",position:[1,5,1,1]},{type:"attr",position:[1,5,1,1,1]},{type:"attr",position:[1,5,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,1,1]},{type:"componentDynamic",position:[1,5,1,1,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,3]},{type:"if",position:[1,5,1,1,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,3]}]}},default:{}},{type:"componentDynamic",position:[1,5,1,1]},{type:"attr",position:[1,5,3,1]},{type:"if",position:[1,5,3,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,3,3]},{type:"if",position:[1,5,3,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,5,3,5]},{type:"registerYield",position:[1,5,3,5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,5,3,5,3],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,5,3,5,5],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,5,3,5,7],dynamicNodes:[]},{type:"registerYield",position:[1,5,3,5,9],dynamicNodes:[]},{type:"registerYield",position:[1,5,3,5,11],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,5,3,5]},{type:"attr",position:[1,5,3,7,1,1]},{type:"if",position:[1,5,3,7,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,3,0]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,3,7,3,1]},{type:"registerYield",position:[1,5,3,7,3,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,5,3,7,3,1]},{type:"attr",position:[1,5,3,7,3,3]},{type:"registerYield",position:[1,5,3,7,3,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,5,3,7,3,3]}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"attr",position:[1,1,1,1]},{type:"if",position:[1,1,1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"text",position:[1,1,3,0]},{type:"attr",position:[1,3,1,1]},{type:"text",position:[1,3,1,1,1,0]},{type:"text",position:[1,3,1,1,3,0]},{type:"attr",position:[1,3,1,1,5]},{type:"text",position:[1,3,1,1,5,0]},{type:"attr",position:[1,3,1,3]},{type:"if",position:[1,3,1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3,1,5]},{type:"if",position:[1,3,1,5],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"text",position:[1,3,0]},{type:"attr",position:[1,4]},{type:"text",position:[1,4,0]}]}},default:{}},{type:"attr",position:[1,3,3,1]},{type:"componentDynamic",position:[1,3,3,1]},{type:"attr",position:[1,3,3,3]},{type:"attr",position:[1,3,3,3,1]},{type:"if",position:[1,3,3,3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3,3,3,3]},{type:"if",position:[1,3,3,3,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3,3,5]},{type:"attr",position:[1,3,3,5,1]},{type:"registerYield",position:[1,3,3,5,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,3,3,5,1]},{type:"attr",position:[1,5,1,1]},{type:"attr",position:[1,5,1,1,1]},{type:"attr",position:[1,5,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,1,1]},{type:"componentDynamic",position:[1,5,1,1,1,1,1,1]},{type:"attr",position:[1,5,1,1,1,1,3]},{type:"if",position:[1,5,1,1,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"registerYield",position:[1,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,3]}]}},default:{}},{type:"componentDynamic",position:[1,5,1,1]},{type:"attr",position:[1,5,3,1]},{type:"if",position:[1,5,3,1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,5,3,3]},{type:"if",position:[1,5,3,3],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,5,3,5]},{type:"registerYield",position:[1,5,3,5,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"registerYield",position:[1,5,3,5,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,3]},{type:"attr",position:[3]},{type:"attr",position:[3,1,1]},{type:"componentDynamic",position:[3,1,1]},{type:"attr",position:[3,3]},{type:"componentDynamic",position:[3,3,1]},{type:"attr",position:[3,5]}]},{type:"registerYield",position:[1,5,3,5,5],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"registerYield",position:[1,5,3,5,7],dynamicNodes:[]},{type:"registerYield",position:[1,5,3,5,9],dynamicNodes:[]},{type:"registerYield",position:[1,5,3,5,11],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"component",position:[1],dynamicNodes:[]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,5,3,5]},{type:"attr",position:[1,5,3,7,1,1]},{type:"if",position:[1,5,3,7,1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,3,0]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,7]},{type:"registerYield",position:[1,7,1],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,1,2]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1,7]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5]},{type:"componentDynamic",position:[5]},{type:"attr",position:[7]},{type:"registerYield",position:[7,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]},false:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1,1]},{type:"registerYield",position:[3,1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[3,1,1]},{type:"attr",position:[3,1,3]},{type:"registerYield",position:[3,1,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[3,1,3]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[7]},{type:"attr",position:[9]},{type:"registerYield",position:[9,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,5]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[9]},{type:"attr",position:[11]},{type:"registerYield",position:[11,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"text",position:[1,3,0]},{type:"componentDynamic",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,0]},{type:"if",position:[1,5,0],cases:{true:{dynamicNodes:[{type:"text",position:[0]}]},false:{dynamicNodes:[{type:"text",position:[0]}]}},default:{}},{type:"componentDynamic",position:[1,5]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[11]},{type:"attr",position:[13]},{type:"registerYield",position:[13,1],dynamicNodes:[{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3,1]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]},{type:"attr",position:[5,1]},{type:"registerYield",position:[5,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,1]},{type:"attr",position:[5,3]},{type:"registerYield",position:[5,3,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[5,3]},{type:"componentDynamic",position:[5]}]},{type:"componentDynamic",position:[13]}],_observedAttributes:["contentJSON","modulePermission","connectedModulePermission","linkingModulePermission","parentModuleId","parentModule","parentModuleApiName","parentModulelable","module","moduleId","moduleApiName","linkingModule","linkingModuleId","linkingModuleApiName","linkingModuleLabel","isHiddenModule","unassignall","entityName","loader","resetOption","fieldId","fieldColumn","preventFieldForFilter","tempIds","confirm_tempIds","remove_tempIds","remove_confirm_tempIds","need_confirm_tempIds","dependent_tempIds","dependent_remove_tempIds","isApplyFilter","isSaveFilter","filterApplied","isFilterApplied","display_field","display_label","selectcount","ColumnList","filterList","filterCri","oldFilterCri","unassigncount","selectedfield","flagfield","confirmJSON","cnfrmcount","searchValue","sort_order","sort_by","sort_label","page_count","record_from","record_to","resp","isRelatedList","isDirectField","isLookUp","action","isEdit","relatedListId","fieldLabel","fieldApiName","connectedFieldApiName","connectedLookupApiName","connectedFieldId","lookupApiName","linkingModuleIdVsparentModuleId","selectedids","assignpage","confirmpage","unassignpage","showUnassignPopup","showUnassignAllPopup","showpopup","showManageColumn","showSmartFilter","clipMode","sortList","sortaction","recentlyCreatedRcordId","lookupLimit","filterLookupId","quickCreateAction","confirmlistJSON","tableFields","tableContent","selectFields","allFields","fields","showmsg","isQuickCreate","allowQuickCreate","message","type","showAlert","buttonJson","assignPermission","unassignPermission","smartFilterFailed","selectAllBox","moduleDisplayField","client_id","client_account","client_module","stringid","stringdesc","bundleMxnProductIdVsQty","bundleMxnLinkingModuleIdVsQty","associationLimit","selectRange","onsearch","disableUnassignall","blank","preventUiType","quickCreateNotSupportedModule","defaultSelectFields","fieldTypeMapping","showMultiSortMenu","bundleProdEditedVsOldQty","errorRecordIds"],data:function(){return{contentJSON:Lyte.attr("array",{default:[]}),modulePermission:Lyte.attr("object",{default:{isView:!1,isEdit:!1,isDelete:!1,isCreate:!1}}),connectedModulePermission:Lyte.attr("object",{default:{isView:!1,isEdit:!1,isDelete:!1,isCreate:!1}}),linkingModulePermission:Lyte.attr("object",{default:{isView:!1,isEdit:!1,isDelete:!1,isCreate:!1}}),parentModuleId:Lyte.attr("string",{default:"0"}),parentModule:Lyte.attr("string",{default:" "}),parentModuleApiName:Lyte.attr("string",{default:"0"}),parentModulelable:Lyte.attr("string",{default:"0"}),module:Lyte.attr("string",{default:" "}),moduleId:Lyte.attr("string",{default:"0"}),moduleApiName:Lyte.attr("string",{default:"0"}),linkingModule:Lyte.attr("string",{default:"0"}),linkingModuleId:Lyte.attr("string",{default:"0"}),linkingModuleApiName:Lyte.attr("string",{default:"0"}),linkingModuleLabel:Lyte.attr("string",{default:"0"}),isHiddenModule:Lyte.attr("boolean",{default:!1}),unassignall:Lyte.attr("boolean",{default:!1}),entityName:Lyte.attr("string",{default:""}),loader:Lyte.attr("boolean",{default:!1}),resetOption:Lyte.attr("boolean",{default:!0}),fieldId:Lyte.attr("string",{default:"0"}),fieldColumn:Lyte.attr("string",{default:"0"}),preventFieldForFilter:Lyte.attr("array",{default:[]}),tempIds:Lyte.attr("string",{default:"0"}),confirm_tempIds:Lyte.attr("string",{default:"0"}),remove_tempIds:Lyte.attr("string",{default:"0"}),remove_confirm_tempIds:Lyte.attr("string",{default:"0"}),need_confirm_tempIds:Lyte.attr("string",{default:"0"}),dependent_tempIds:Lyte.attr("string",{default:"0"}),dependent_remove_tempIds:Lyte.attr("string",{default:"0"}),isApplyFilter:Lyte.attr("boolean",{default:!1}),isSaveFilter:Lyte.attr("boolean",{default:!1}),filterApplied:Lyte.attr("string",{default:"0"}),isFilterApplied:Lyte.attr("boolean",{default:!1}),display_field:Lyte.attr("string",{default:"0"}),display_label:Lyte.attr("string",{default:"0"}),selectcount:Lyte.attr("string",{default:"0"}),ColumnList:Lyte.attr("array",{default:[]}),filterList:Lyte.attr("array",{default:[]}),filterCri:Lyte.attr("object",{default:{}}),oldFilterCri:Lyte.attr("object",{default:{}}),unassigncount:Lyte.attr("string",{default:"0"}),selectedfield:Lyte.attr("string",{default:"0"}),flagfield:Lyte.attr("string",{default:"1"}),confirmJSON:Lyte.attr("array",{default:[]}),cnfrmcount:Lyte.attr("string",{default:"0"}),searchValue:Lyte.attr("string",{default:""}),sort_order:Lyte.attr("string",{default:"desc"}),sort_by:Lyte.attr("string",{default:"id"}),sort_label:Lyte.attr("string",{default:"id"}),page_count:Lyte.attr("number",{default:1}),record_from:Lyte.attr("number",{default:0}),record_to:Lyte.attr("number",{default:0}),resp:Lyte.attr("object",{default:{}}),isRelatedList:Lyte.attr("boolean",{default:!1}),isDirectField:Lyte.attr("boolean",{default:!1}),isLookUp:Lyte.attr("boolean",{default:!1}),action:Lyte.attr("string",{default:""}),isEdit:Lyte.attr("boolean",{default:!1}),relatedListId:Lyte.attr("string",{default:"0"}),fieldLabel:Lyte.attr("string",{default:"0"}),fieldApiName:Lyte.attr("string",{default:"0"}),connectedFieldApiName:Lyte.attr("string",{default:"0"}),connectedLookupApiName:Lyte.attr("string",{default:"0"}),connectedFieldId:Lyte.attr("string",{default:"0"}),lookupApiName:Lyte.attr("string",{default:"0"}),linkingModuleIdVsparentModuleId:Lyte.attr("object",{default:{}}),selectedids:Lyte.attr("array",{default:[]}),assignpage:Lyte.attr("boolean",{default:!1}),confirmpage:Lyte.attr("boolean",{default:!1}),unassignpage:Lyte.attr("boolean",{default:!1}),showUnassignPopup:Lyte.attr("boolean",{default:!1}),showUnassignAllPopup:Lyte.attr("boolean",{default:!1}),showpopup:Lyte.attr("boolean",{default:!1}),showManageColumn:Lyte.attr("boolean",{default:!1}),showSmartFilter:Lyte.attr("boolean",{default:!1}),clipMode:Lyte.attr("boolean",{default:!1}),sortList:Lyte.attr("array",{default:[]}),sortaction:Lyte.attr("string",{default:"0"}),recentlyCreatedRcordId:Lyte.attr("string",{default:"0"}),lookupLimit:Lyte.attr("number",{default:0}),filterLookupId:Lyte.attr("array",{default:[]}),quickCreateAction:Lyte.attr("boolean",{default:!1}),confirmlistJSON:Lyte.attr("array",{default:[]}),tableFields:Lyte.attr("array",{default:[]}),tableContent:Lyte.attr("array",{default:[]}),selectFields:Lyte.attr("array",{default:[]}),allFields:Lyte.attr("array",{default:[]}),fields:Lyte.attr("array",{default:[]}),showmsg:Lyte.attr("boolean",{default:!1}),isQuickCreate:Lyte.attr("boolean",{default:!1}),allowQuickCreate:Lyte.attr("boolean",{default:!0}),message:Lyte.attr("string",{default:"0"}),type:Lyte.attr("string",{default:"error"}),showAlert:Lyte.attr("boolean",{default:!1}),buttonJson:Lyte.attr("array",{default:[{type:"accept",text:I18n.getMsg("crm.button.ok"),appearance:"primary"}]}),assignPermission:Lyte.attr("boolean",{default:!1}),unassignPermission:Lyte.attr("boolean",{default:!1}),smartFilterFailed:Lyte.attr("boolean",{default:!1}),selectAllBox:Lyte.attr("string",{default:"customCheckBox"}),moduleDisplayField:Lyte.attr("object",{default:crmConstants.moduleDisplayField}),client_id:Lyte.attr("string",{default:Crm.userDetails.CLIENT_ID}),client_account:Lyte.attr("boolean",{default:Crm.userDetails.CLIENT_ACCOUNT}),client_module:Lyte.attr("object",{default:Crm.userDetails.moduleVsCriteriaLookup}),stringid:Lyte.attr("string",{default:"id"}),stringdesc:Lyte.attr("string",{default:"desc"}),bundleMxnProductIdVsQty:Lyte.attr("object",{default:{}}),bundleMxnLinkingModuleIdVsQty:Lyte.attr("object",{default:{}}),associationLimit:Lyte.attr("object",{default:{total:100}}),selectRange:Lyte.attr("string",{default:"0"}),onsearch:Lyte.attr("boolean",{default:!1}),disableUnassignall:Lyte.attr("boolean",{default:!1}),blank:Lyte.attr("string",{default:"_blank"}),preventUiType:Lyte.attr("array",{default:[104,66,999,3,123,1234,134,500,555,556,51]}),quickCreateNotSupportedModule:Lyte.attr("array",{default:["Activities","SalesOrders","Invoices","PurchaseOrders","Quotes","Appointments","Services"]}),defaultSelectFields:Lyte.attr("array",{default:["$assignable","$editable","$approval_state","$review","$locked_for_me","Locked__s","Layout","$stop_processing"]}),fieldTypeMapping:Lyte.attr("object",{default:"undefined"!=typeof crmConstants&&crmConstants.defaultUiTypeToCruxMapping?Lyte.deepCopyObject(crmConstants.defaultUiTypeToCruxMapping):{}}),showMultiSortMenu:Lyte.attr("boolean",{default:!1}),bundleProdEditedVsOldQty:Lyte.attr("object",{default:{}}),errorRecordIds:Lyte.attr("array",{default:[]})}},init:function(){commonUtils.showHideLoadingDiv(!0);var e=moduleRecordMapping[this.getData("module")],t=moduleRecordMapping[this.getData("parentModule")];if(this.setData({module:e.module_name,moduleApiName:e.api_name,moduleId:e.id,modulelable:e.singular_label,modulelableplural:e.plural_label,allowQuickCreate:Lyte.Component.registeredHelpers.showAddRecord(e.module_name)}),!this.data.isLookUp){var a=moduleRecordMapping[this.getData("linkingModule")];this.setData("linkingModuleApiName",a.api_name),this.setData("linkingModuleId",a.id),this.setData("linkingModuleLabel",a.plural_label),this.setData("isHiddenModule",!!this.data.client_account||!Crm.moduleInfo[this.getData("linkingModule")].showSubMenu),this.setData("isLinkingModuleVisible",a.visible)}if(this.setData("parentModule",t.module_name),this.setData("parentModuleApiName",t.api_name),this.setData("parentModuleId",t.id),this.setData("parentModulelable",t.singular_label),this.setData("parentModulelableplural",t.plural_label),this.data.entityId){var i=store.peekRecord(t.id,this.data.entityId);if(this.setData("entityName",i[t.display_field.api_name]),this.setData("layoutId",i.$layout_id?i.$layout_id.id:this.data.layoutId),!this.data.isLookUp){if(i.Locked__s&&i.$locked_for_me&&!this.data.isMxnLockExculdedField)return commonUtils.showHideLoadingDiv(!1),this.setData("type","error"),this.setData("errorHeading",I18n.getMsg("crm.social.setup.denied")),this.setData("errormessage",I18n.getMsg("crm.record.locking.permission.denied")),void this.setData("showAlert",!0);if(null!=i.$sharing_permission&&"read_only"==i.$sharing_permission||i.$stop_processing||i.$review&&"Approved"!==i.$review||i.$approval_state&&"approved"!==i.$approval_state&&!i.$editable&&("approval_process_pending"===i.$approval_state||"approval_process_rejected"===i.$approval_state))return commonUtils.showHideLoadingDiv(!1),void this.showPermissionDenid()}}this.populateModuleData();var o=!(!Crm.isModuleAvailable("Bundles")||!Crm.isModuleAvailable("Bundles").id)&&Crm.isModuleAvailable("Bundles").id===this.data.parentModuleId;this.data.isDirectField&&this.data.mxnDomId.includes("MXNDUMMYCOLUMNBUNDLE")&&o&&!this.data.isQuickCreate&&"canvas"!==Lyte.Router.getRouteInstance().routeName&&(document.getElementById("ract_"+this.data.relatedListId).classList.add("disabled","eventNone"),this.mxnIdDom().data({relatedListId:this.data.relatedListId}))},actions:{preventFromOnSubmit:function(e){e.preventDefault()},showlookupMod:function(){commonUtils.showHideLoadingDiv(!0),this.resetComponentData("unassign")},showHideFilter:function(e){(e=$L(e)).hasClass("activeLabel")?(e.removeClass("activeLabel"),this.setData("showSmartFilter",!1)):(e.addClass("activeLabel"),this.setData("showSmartFilter",!0))},clearData:function(e){for(var t=$L(e.closest("lyte-modal-content")).find(".lyteExpTableRowGroup lyte-checkbox"),a=t.length,i=0;i<a;i++)t[i].ltProp("checked",!1);this.setData("selectcount","0"),this.setData("unassigncount","0"),this.data.tempIds="0",this.data.remove_tempIds="0"},resetColumnSize:function(){this.resetColumnSize()},showconfirm:function(){this.setData("need_confirm_tempIds",this.data.tempIds),this.data.cnfrmcount=this.data.selectcount,this.resetComponentData("confirm")},backcnfrmPop:function(){commonUtils.showHideLoadingDiv(!0),this.setData("selectcount",this.data.cnfrmcount),this.resetComponentData("unassign")},cnfrmList:function(){this.setData("loader",!0),this.data.isLookUp?this.LookupRecords(this.getLookupJSON(this.data.tempIds.split(","),"assign",this.data.fieldApiName),!0):this.updateMxnRecords(!0)},unassignselctedMod:function(){var e,t;if(!this.data.unassignPermission)return this.data.isLookUp?(e=I18n.getMsg("crm.mxnlookup.remove.title",[$ESAPI.encoder().encodeForHTML(this.data.modulelable)]),t=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedwarning.new",[$ESAPI.encoder().encodeForHTML(this.data.modulelable),"",$ESAPI.encoder().encodeForHTML(Crm.appName)])):(e=I18n.getMsg("crm.delete.checkAssigned"),t=I18n.getMsg("crm.mxnrelatedlist.selectcheckbox.permssionmsg.nosharing",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural),$ESAPI.encoder().encodeForHTML(this.data.linkingModuleLabel),,$ESAPI.encoder().encodeForHTML(this.data.modulelable)])),this.setData("type","error"),this.setData("errorHeading",e),this.setData("errormessage",t),void this.setData("showAlert",!0);if(this.setData("unassignall",!1),this.data.unassigncount<1)this.setData("unassignall",!0);else if(this.data.unassigncount<2){var a={};a=this.data.isLookUp?store.peekRecord(this.data.moduleId,this.data.remove_tempIds):store.peekRecord(this.data.linkingModuleId,this.data.remove_tempIds)[this.data.connectedLookupApiName],this.setData("selectedfield",void 0===a[this.data.display_field]?a.Last_Name:a[this.data.display_field])}this.setData("showUnassignPopup",!0)},closeunassignselctedMod:function(){this.setData("showUnassignPopup",!1)},unassignRecord:function(){this.data.unassignall?this.unassignAllRecords():this.unassignselectedRecords()},showManageColumn:function(){this.setData("showManageColumn",!1),this.setData("showManageColumn",!0)},saveManageColumn:function(e){this.setData("showManageColumn",!1),$(e.closest(".columnListNew")).find("lyte-search")[0].setValue(""),this.setData("loader",!0),this.putColumnList(e)},hideManageColumn:function(e){var t=$(e.closest(".columnListNew")).find("crux-column-list")[0];t.component.clearSelectedFields(),this.setData("showManageColumn",!1),$(t).find("lyte-search")[0].setValue("")},closePopup:function(){this.setData("showpopup",!0)},openQuickCreate:function(){if(Crm.userDetails.isStorageLimitReached&&Crm.showStorageExceedPopup(),this.data.modulePermission.isCreate&&this.data.modulePermission.isEdit){var e=parseInt(this.getData("selectcount"));if("0"!==this.getData("confirm_tempIds")&&this.getData("confirm_tempIds").split(",").length+e>=100||e>=100)return this.setData("type","error"),this.setData("message",I18n.getMsg("crm.mxn.assign.maximum.records.alert",["100"])),void this.setData("showmsg",!0);var t={};t.mxnDomId=this.data.mxnDomId,t.fieldColumn=this.data.fieldColumn,t.fieldApiName=this.data.isLookUp?this.data.fieldApiName:this.data.isRelatedList?this.data.connectedFieldApiName:this.data.fieldApiName,t.isLookUp=this.data.isLookUp,t.entityId=this.data.entityId,t.parentModule=this.data.parentModule,t.relatedListId=this.data.relatedListId,t.isRelatedList=this.data.isRelatedList,t.linkingModule=this.data.linkingModule,t.module=this.data.module,t.fieldId=this.data.fieldId,t.action=this.data.action;var a=this.data.isLookUp?this.data.fieldId:this.data.connectedFieldId,i=Crm.getCrmBasePath()+"/QuickCreateAction.do?module="+this.data.module+"&searchmodule="+this.data.module+"&relatedlist="+this.data.isRelatedList+"&fldName="+a+"&targetForm=LytePopup";i=(i=i+"&lookuprel="+this.data.isLookUp+"&parentColumn="+this.data.fieldColumn+"&entityId="+this.data.entityId+"&entitylabel="+encodeURIComponent(this.data.entityName)+"&parentModule="+this.data.parentModule+"&fldId="+a+"&select=false&newModel=true")+"&lyteParentData="+encodeURIComponent(JSON.stringify(t)),void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(this.data.module)?Crm.downloadValidationRules(i,this.data.module,function(){commonUtils.openCustomLookup(i,void 0,"searchCreatePopup",function(){this.freezeBackGroundQuickCreate()}.bind(this))}.bind(this)):commonUtils.openCustomLookup(i,void 0,"searchCreatePopup",function(){this.freezeBackGroundQuickCreate()}.bind(this))}else this.showPermissionDenid()},applyFilter:function(e){this.setData("isSaveFilter",!0);var t=$L(e.closest("crm-custom-filter")).find("crux-smart-filter")[0].component,a=t.getFilterCriteria();if(a.isValdationFailure||(this.data.page_count=1),a.noFieldSelected&&this.executeMethod("onFilterClear",e),void 0!==a.queryParams){this.data.filterCri=a.queryParams,a.queryParams.filters?this.data.filters=Lyte.deepCopyObject(a.queryParams.filters):this.data.filters={},a.queryParams.cross_filters?this.data.cross_filters=Lyte.deepCopyObject(a.queryParams.cross_filters):this.data.cross_filters={};var i=t.data.checked,o="";if(i.length>0){var s=i.length;o+=i[s-1].display_field_label;for(var l=s-2;l>=0;l--)o+=", ",o+=i[l].display_field_label}t.resetFields(),t.setCriteria(a.queryParams),this.setData("filterApplied",o),this.setData("isFilterApplied",!0),this.setData("isApplyFilter",!1),this.setData("loader",!0),this.renderPopup()}setTimeout(function(){this.setData("isSaveFilter",!1)}.bind(this),300)},onFilterClear:function(e){this.executeMethod("onFilterClear",e)},changeClipText:function(){this.setData("clipMode",!this.data.clipMode)},addBackGround:function(e,t){var a=t.classList;a.contains("listTableHover")||a.add("listTableHover")},removeBackGround:function(e,t){var a=t.classList;a.contains("listTableHover")&&a.remove("listTableHover"),this.data.recentlyCreatedRcordId="0"},onSearch:function(e,t){this.disableOrShowHoverCard(!1),13===e.keyCode&&setTimeout(function(e){return this.getData("searchValue").length<2&&(!this.data.onsearch||0!==this.getData("searchValue").length)?(this.setData("type","error"),this.setData("message",I18n.getMsg("crm.search.letters.check").replace(" 3 "," 2 ")),void this.setData("showmsg",!0)):/([\uD800-\uDBFF][\uDC00-\uDFFF])/i.test(this.getData("searchValue"))?(this.setData("type","error"),this.setData("message",I18n.getMsg("crm.label.error.msg")),void this.setData("showmsg",!0)):(this.setData("onsearch",!this.data.onsearch||0!==this.getData("searchValue").length),void this.executeMethod("searchBarSearch",e))}.bind(this),100,t)},showQuickEditView:function(e,t){$L(".zcpq_bundle_qtyInput").is(":visible")&&t||this.showHideQuickEditDiv(e,t)},saveBundleQuickEditChanges:function(e){var t=this.data.bundleMxnProductIdVsQty,a=this.data.bundleMxnLinkingModuleIdVsQty,i=e.id,o=$L("#prod_quantity_"+i),s=o[0].component.data.cxPropValue,l=e.List_Price?e.List_Price:0,n=s*l;s=isNaN(parseFloat(s))?1:parseFloat(s),l=isNaN(parseFloat(l))?0:parseFloat(l),s=0===(s=parseFloat(s.toFixed(7)))?1:s,e.Product_Quantity=s,e[this.data.connectedLookupApiName].Product_Quantity=s,e.Total=n,e[this.data.connectedLookupApiName].Total=n,t[e[this.data.connectedLookupApiName].id]=s,a[e.id]=s,this.data.bundleProdEditedVsOldQty[e.id]={Old_Product_Quantity:this.data.resp.data[o[0]._cx.node._attributes["index-val"]].Product_Quantity,Product_Quantity:s},this.setData({bundleMxnProductIdVsQty:t,bundleMxnLinkingModuleIdVsQty:a}),$("#prdQty_"+e.id).text(s),this.updateMxnRecords(!1,!0),this.calculatePoductQuantityForBundles(this.data.assignpage,!0,!0,{[i]:{Product_Quantity:s,Old_Product_Quantity:this.data.resp.data[o[0]._cx.node._attributes["index-val"]].Product_Quantity}})},enterKeyQuickEditChanges:function(e,t){"Enter"!==e.key&&13!==e.keyCode||this.saveBundleQuickEditChanges(t)},singleShiftSelectRecord:function(e,t){var a=t.ltProp("class"),i=t.parentElement.parentElement.parentElement.id,o=$L(t.closest("div")).find(".lyteExpTableRowGroup lyte-checkbox");if(e.shiftKey&&"0"!==this.data.selectRange)for(var s=o.length,l=!1,n=!1,d=0;d<s&&(o[d].querySelector("span").classList.contains("customCheckBoxDisabled")||(o[d].ltProp("id")===this.data.selectRange&&(l=!0),o[d].ltProp("id")===i&&(n=!0),(l||n)&&o[d].ltProp("checked","customCheckBox"!==a),!l||!n));d++);this.enablecheckallbutton(o),this.data.selectRange=t.parentElement.parentElement.parentElement.id},unsortRecord:function(){this.setData("loader",!0),this.setData("sort_by","id"),this.setData("sort_order","desc"),this.setData("sort_label","id");var e=this.data.RelatedList;e.$.triggerAction("unsort",{type:"PUT"},{module:this.data.parentModuleApiName},void 0,{related_list:{sort_order:"unsort",sort_by:{api_name:"id"}}}).then(function(){this.refreshRelatedList()}.bind(this)),e.sort_by={api_name:"id"},e.sort_order="desc",this.setData("page_count",1),this.renderPopup()}},methods:{openModal:function(){var e=this.$node.querySelector("#selectpop").component.childComp;if(e){var t=e.querySelector(".lyteModalClose");t&&t.setAttribute("data-zcqa","multipopup_closeIcon")}},closeModal:function(){multiLookupsView.multiLookups[this.data.relatedListId]=null;var e=$("#FreezeLayer");this.data.isFromBlueprint&&e.length>0&&(e[0].style["z-index"]="99")},searchBarSearch:function(e){this.setData("loader",!0),this.data.page_count=1,this.setData("action",e),this.renderPopup()},onFilterClear:function(e){this.data.filters={},this.data.cross_filters={},this.data.filterCri={},$L(e.closest("lyte-modal-content")).find("crux-smart-filter")[0].component.resetFields(),this.setData("filterApplied","0"),this.setData("isFilterApplied",!1),this.setData("isApplyFilter",!1),this.setData("loader",!0),this.renderPopup()},sortRecord:function(e,t,a,i){var o,s,l=i.parentElement.id;if(this.setData("loader",!0),this.data.tableFields.forEach((function(e){if(e.id===l)return o=e.api_name,void(s=e.field_label)})),"unsort"!==e){this.setData("sort_by",o),this.setData("sort_order",e);var n="desc"===e?I18n.getMsg("crm.column.sort.desc"):I18n.getMsg("crm.column.sort.asc");this.setData("sort_label",s+" ("+n+")")}else this.setData("sort_by","id"),this.setData("sort_order","desc"),this.setData("sort_label","id");var d=this.data.RelatedList;"unsort"===e?(d.$.triggerAction("unsort",{type:"PUT"},{module:this.data.parentModuleApiName},void 0,{related_list:{sort_order:e,sort_by:{id:l,api_name:o}}}).then(function(){this.refreshRelatedList()}.bind(this)),d.sort_by={api_name:"id"},d.sort_order="desc"):(d.$.triggerAction("customize_sort",{type:"PUT"},{module:this.data.parentModuleApiName},void 0,{related_list:{sort_order:e,sort_by:{id:l,api_name:o}}}).then(function(){this.refreshRelatedList()}.bind(this)),d.sort_by={id:l,api_name:o},d.sort_order=e),this.setData("action",i.closest("crux-table-component").dataset.zcqa),this.setData("page_count",1),this.renderPopup()},navigate:function(e,t){this.setData("page_count","next"===e?this.data.page_count+1:this.data.page_count-1),this.setData("action",t),this.setData("loader",!0),this.setData("selectAllBox","customCheckBox"),this.renderPopup()},onResizeSelect:function(){this.setData("resetOption",!1)},onValueChange:function(){this.data.isSaveFilter||this.setData("isApplyFilter",!0)},onBeforeFieldChanged:function(e){return!(e&&133===e.ui_type&&this.data.lookupLimit+1>2)||(this.setData("errorHeading",""),this.setData("errormessage",I18n.getMsg("crm.multi.selection.lookup.limit")),this.setData("showAlert",!0),!1)},onFieldChanged:function(e,t,a,i){var o=e.length;if(133===i.ui_type)if(this.data.filterLookupId.contains(i.id)){this.setData("lookupLimit",this.data.lookupLimit-1);var s=this.data.filterLookupId;s.splice(s.indexOf(i.id),1),this.setData("filterLookupId",s)}else this.setData("lookupLimit",this.data.lookupLimit+1),this.setData("filterLookupId",this.data.filterLookupId.push(i.id));o>0||this.data.isFilterApplied?this.setData("isApplyFilter",!0):this.setData("isApplyFilter",!1)},msgclose:function(e){this.setData(e,!1)},beforeUnchecking:function(e){var t=this.data.module;if(("Leads"===t||"Contacts"===t)&&e.display_field){var a=moduleRecordMapping[t].fields,i=a.filterBy({api_name:"Last_Name"})[0].id,o=a.filterBy({api_name:"Full_Name"})[0].id,s=this.data.ColumnList.filter((function(e){return e.id===i}))[0].api_name,l=this.data.ColumnList.filter((function(e){return e.id===o}))[0].api_name,n=document.getElementById(i+"_"+s).checked,d=document.getElementById(o+"_"+l);return d=!!d&&d.checked,!!(n&&d||n&&e.id===o||d&&e.id===i)}return!(e.display_field||!this.data.isLookUp&&"assign"!==this.data.action&&function(e,t){return e.filter((function(e){return e.id===t}))[0]}(this.data.LinkingModuleFields,e.id))},disableLinkingModuleColumn:function(){var e=!("assign"===this.data.action);this.data.isLookUp||this.data.LinkingModuleFields.forEach((function(t){var a=document.querySelector("[lt-prop-id='"+t.id+"_"+t.api_name+"']");a&&a.ltProp("disabled",e)}))},showMessage:function(e,t){var a=this.data.isLookUp||t?e:e[this.data.connectedLookupApiName],i=this.data.modulePermission,o=this.data.linkingModulePermission,s=this.data.connectedModulePermission,l="",n="";if(i.isEdit)if(this.data.isLookUp)this.data.isLookUp&&(!a.Layout&&this.data.layoudidVsMandatory[this.data.defaultLayoutId]||a.Layout&&this.data.layoudidVsMandatory[a.Layout.id])&&(l=I18n.getMsg(t?"crm.mxnlookup.assign.title":"crm.mxnlookup.remove.title",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)]),n=I18n.getMsg("crm.mxnlookup.lookuprel.lookupfieldmandatory.warning1",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural),$ESAPI.encoder().encodeForHTML(this.data.fieldLabel),$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)]),n+=I18n.getMsg("crm.mxnlookup.lookuprel.lookupfieldmandatory.warning2",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural),$ESAPI.encoder().encodeForHTML(this.data.fieldLabel)]));else if(s.isEdit){if(t&&!this.data.isHiddenModule&&!o.isCreate)return this.showPermissionDenid(),!1;t||this.data.isHiddenModule||o.isDelete?null===e.Name&&(l=I18n.getMsg("crm.delete.checkAssigned"),n=I18n.getMsg("crm.mxnrelatedlist.selectcheckbox.permissionmsg.noprofileaccess",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural),""])):(l=I18n.getMsg("crm.delete.checkAssigned"),n=I18n.getMsg("crm.delete.checkContentAssigned",[$ESAPI.encoder().encodeForHTML(this.data.linkingModuleLabel),$ESAPI.encoder().encodeForHTML(e.Name)]))}else l=I18n.getMsg(t?"crm.mxnlookup.assign.title":"crm.mxnlookup.remove.title",[$ESAPI.encoder().encodeForHTML(this.data.parentModulelable)]),n=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedwarning.new",[$ESAPI.encoder().encodeForHTML(this.data.parentModulelable),$ESAPI.encoder().encodeForHTML(this.data.entityName),$ESAPI.encoder().encodeForHTML(Crm.appName)]);else l=I18n.getMsg(t?"crm.mxnlookup.assign.title":"crm.mxnlookup.remove.title",[$ESAPI.encoder().encodeForHTML(this.data.modulelable)]),n=I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedwarning.new",[$ESAPI.encoder().encodeForHTML(this.data.modulelable),$ESAPI.encoder().encodeForHTML(void 0!==a[this.data.display_field]?a[this.data.display_field]:a.Last_Name),$ESAPI.encoder().encodeForHTML(Crm.appName)]);return this.setData("type","error"),this.setData("errorHeading",l),this.setData("errormessage",n),this.setData("showAlert",!0),!1},selectAll:function(e){for(var t=e.ltProp("class"),a=$L(e.closest("div")).find(".lyteExpTableRowGroup lyte-checkbox"),i=a.length,o=0;o<i;o++)a[o].querySelector("span").classList.contains("customCheckBoxDisabled")||a[o].ltProp("checked","customCheckBox"===t);this.data.selectRange=0},selectSingleRecord:function(e,t,a,i){var o=e.ltProp("class"),s=this.getData(t),l=parseInt(s);if("customCheckBox"!==o||this.getData(a).includes(e.parentElement.parentElement.parentElement.id)?"customCheckBox"!==o&&(l-=1):l+=1,"Bundles"===this.data.parentModule&&"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&this.data.confirmpage){var n=e.ltProp("id"),d=this.data.selectedids.indexOf(n);"customCheckBoxChecked"===o&&d>-1?this.data.selectedids.splice(d,1):"customCheckBox"===o&&d<0&&this.data.selectedids.push(n)}var r=!1;if("MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&this.data.assignpage)if(this.data.isDirectField||this.data.isRelatedList){var p=store.peekRecord(this.data.parentModuleId,this.data.entityId);p&&p.Unique_Item_Count&&(r=l+p.Unique_Item_Count>this.data.associationLimit.total)}else{var c=document.querySelector('[fld-id="'+document.querySelector('[data-fieldid="'+$("crm-multi-selection-popup")[0].component.data.fieldId+'"]').id+'"]').component.$node.component.data.dataBind;r=l+(c&&c.Unique_Item_Count?c.Unique_Item_Count:0)>this.data.associationLimit.total}if("0"!==this.getData(i)&&this.getData(i).split(",").length+l>this.data.associationLimit.total||l>this.data.associationLimit.total||r)return this.setData("type","error"),this.setData("showmsg",!0),this.setData("message",I18n.getMsg("crm.listview.maximum.records.alert",[this.data.associationLimit.total.toString()])),this.setData("showmsg",!0),void e.ltProp("checked",!1);"customCheckBox"===o?(e.ltProp("checked",!0),e.parentNode.parentNode.parentNode.classList.add("listViewRowSelected"),this.tempAdd(e,a)):(e.ltProp("checked",!1),e.parentNode.parentNode.parentNode.classList.remove("listViewRowSelected"),this.tempRemove(e,a)),this.setData(t,l),this.enablecheckallbutton($L(e.closest("div")).find(".lyteExpTableRowGroup lyte-checkbox"))},SortingMenuOpen:function(e,t,a){$L(a).addClass("visible")},SortingMenuClose:function(e){var t=e.previousElementSibling;$L(t).removeClass("visible")},sortButtonDisplay:function(e,t,a){var i,o=a.parentElement.id;this.data.tableFields.forEach((function(e){e.id!==o||(i=e.api_name)}));var s=["asc","desc","unsort"];i===this.data.sort_by?s.removeFirstOccurenceOfElement(this.data.sort_order):s.removeFirstOccurenceOfElement("unsort"),this.setData("sortList",s)},hoverCardShow:function(){this.setData("display_label",this.data.selectFields.filter(function(e){return e.id===this.data.display_id}.bind(this))[0].field_label),setTimeout(function(){this.getData("searchValue").length<1&&this.disableOrShowHoverCard(!0)}.bind(this),100)},hoverCardHide:function(){this.disableOrShowHoverCard(!1)},cxTableScroll:function(){var e=$L("#ms_sortmenu"),t=document.querySelector("crm-multi-selection-popup").component,a=t.getData("showMultiSortMenu");e&&e.length>0&&a&&t.setData("showMultiSortMenu",!1)},validateIndividualProductQuantity:function(e,t,a){let i=this.getData("errorRecordIds");if(a&&a.component&&!a.component.validate()||a.$&&a.$.hasOwnProperty("validate")&&!a.validate()){if(i&&!i.contains(e.id)&&Lyte.arrayUtils(this.data.errorRecordIds,"push",e.id),this.data.unassignpage){var o=document.getElementById("zcpq_bundle_qty_edit_"+e.id),s=document.getElementsByClassName("bun_prd_qedit_btn_"+e.id);o.classList.remove("pA"),s.forEach((e=>{e.classList.contains("hide")||e.classList.add("hide")}))}}else if(Lyte.arrayUtils(this.data.errorRecordIds,"removeObjects",e.id),this.data.unassignpage){o=document.getElementById("zcpq_bundle_qty_edit_"+e.id);(s=document.getElementsByClassName("bun_prd_qedit_btn_"+e.id)).forEach((e=>{e.classList.remove("hide")})),o.classList.contains("pA")||o.classList.add("pA")}},updateBundleMxnFields:function(e,t,a){this.methods&&this.methods.hasOwnProperty("validateIndividualProductQuantity")&&this.executeMethod("validateIndividualProductQuantity",e,t,a);var i=a.parentNode,o=this.data.resp;if(i&&i.component&&i.component.data){var s=i.component.data.indexVal,l=o.data[s],n=isNaN(parseFloat(t))?parseFloat(e.Product_Quantity):parseFloat(t),d=isNaN(parseFloat(e.List_Price))?0:parseFloat(e.List_Price),r=d*n;this.data.bundleMxnProductIdVsQty[e.id]=n,l.Product_Quantity=n,this.data.bundleMxnProductIdVsQty[e.id].Product_Quantity=n,this.data.bundleMxnProductIdVsQty[e.id].List_Price=d,l.List_Price=d,l.Total=r,e.Product_Quantity=n,e.Total=r,this.updateBundleMxnDom(r,e.id)}this.setData("resp",o)}}},{mixins:["crm-multi-selection-popup-mixin"]}),Lyte.Component.registerHelper("getRecordData",(function(e,t,a){if(-1!==t.indexOf(".")){var i=t.split(".");return e[i[0]]?null!==e[i[0]][i[1]]&&void 0!==a?"object"!=typeof e[i[0]][i[1]]?e[i[0]][a]:e[i[0]][i[1]][a]:e[i[0]][i[1]]:void 0}return null!==e[t]&&"object"==typeof e[t]&&void 0===e[t].name&&(e[t].name=e[t][this.component.data.display_field]),null!==e[t]&&void 0!==a?"object"!=typeof e[t]?e[a]:e[t][a]:e[t]})),Lyte.Component.registerHelper("href",(function(e){var t="",a="http";return e&&""!==e&&0!==e.indexOf(a)&&0!==e.indexOf("https")?t="http://"+e:e&&(t=e),t})),Lyte.Mixin.register("crm-multi-selection-popup-mixin",{renderPopup:function(){switch(this.data.action){case"unassign":this.populateUnassignedData();break;case"confirm":this.populateConfirmData();break;default:this.populateAssignedData()}},unassginfetchpayloadJson:function(){var e={};e.feature=this.data.isLookUp?"data":"mxn",e.page=this.data.page_count,e.per_page=20;var t={};t.api_name=this.data.isLookUp?this.data.fieldApiName:this.data.connectedFieldApiName,e.field=t,e.related_entity_id=void 0===this.data.entityId?null:this.data.entityId;var a="0"!==this.data.confirm_tempIds&&""!==this.data.confirm_tempIds?this.data.confirm_tempIds:"";a="0"!==this.data.dependent_remove_tempIds&&""!==this.data.dependent_remove_tempIds?""!==a?a+","+this.data.dependent_remove_tempIds:this.data.dependent_remove_tempIds:a,this.generateFilter(e,"unassign",a),e.sort_order=this.data.sort_order,e.sort_by=this.data.sort_by,"0"!==this.data.remove_confirm_tempIds&&""!==this.data.remove_confirm_tempIds&&(e.temp_ids=this.convertToParentId(this.data.remove_confirm_tempIds).split(","));var i="0"!==this.data.remove_confirm_tempIds&&""!==this.data.remove_confirm_tempIds?this.convertToParentId(this.data.remove_confirm_tempIds):"";return""!==(i="0"!==this.data.dependent_tempIds&&""!==this.data.dependent_tempIds?""!==i?i+","+this.convertToParentId(this.data.dependent_tempIds):this.convertToParentId(this.data.dependent_tempIds):i)&&(e.temp_ids=i.split(",")),e.fields=this.constractFieldsParam().split(","),"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&e.fields.push("Unit_Price"),{get_unassigned:e}},assignfetchpayloadJson:function(e){var t="confirm"===e,a={feature:"data"};a.page=this.data.page_count,a.per_page=20;var i={};i.api_name=this.data.parentModuleApiName;var o={};o.id=this.data.relatedListId,a.related_list=o,a.related_module=i,a.related_entity_id=void 0===this.data.entityId?null:this.data.entityId,a.sort_order=this.data.sort_order,a.sort_by=this.data.sort_by;var s="0"!==this.data.remove_confirm_tempIds&&""!==this.data.remove_confirm_tempIds?this.convertToParentId(this.data.remove_confirm_tempIds):"";if(this.generateFilter(a,e,t?this.data.need_confirm_tempIds:s),t)a.related_entity_id=null,a.temp_ids=this.data.need_confirm_tempIds.split(",");else{var l="0"!==this.data.confirm_tempIds&&""!==this.data.confirm_tempIds?this.data.confirm_tempIds:"";""!==l&&(a.temp_ids=l.split(","))}a.fields=this.constractFieldsParam().split(",");var n=!(!Crm.isModuleAvailable("Bundles")||!Crm.isModuleAvailable("Bundles").id)&&Crm.isModuleAvailable("Bundles").id===this.data.parentModuleId;return"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&n&&a.fields.push(this.data.connectedLookupApiName+".Unit_Price"),{get_assigned:a}},populateOldValue:function(){if(this.data.isQuickCreate||this.data.isDirectField){if(void 0===(t=this.mxnIdDom()).data("selectedid")&&t.data("selectedid",""),""!==t.data("selectedid")){if("all"===t.data("selectedid")){if(!this.data.isQuickCreate)return void this.showCannotModifyError();t.data("selectedid","")}var e=t.data("selectedid").split("-");this.setData("confirm_tempIds",void 0!==e[0]?e[0]:"0"),this.setData("remove_confirm_tempIds",void 0!==e[1]?e[1]:"0"),void 0!==t.data("lVsp")&&this.setData("linkingModuleIdVsparentModuleId",t.data("lVsp"))}this.data.action||(""!==t.val()?this.setData("action","assign"):this.setData("action","unassign"))}else{var t;if((t=$L("#"+this.data.mxnDomId)[0].component).data.tempids||"clone"===window[this.data.parentModule].currentStatus&&t.data.clonedselectedIds){if("all"===t.data.tempids){if(this.data.entityId)return void this.showCannotModifyError();t.data.tempids=""}else"clone"===window[this.data.parentModule].currentStatus&&t.data.clonedselectedIds&&!t.data.tempids&&(t.data.tempids=t.data.clonedselectedIds);this.setData("confirm_tempIds",void 0!==t.data.tempids.split("-")[0]?t.data.tempids.split("-")[0]:"0"),this.setData("remove_confirm_tempIds",void 0!==t.data.tempids.split("-")[1]?t.data.tempids.split("-")[1]:"0"),void 0!==t.data.lVsp&&this.setData("linkingModuleIdVsparentModuleId",t.data.lVsp)}if(this.data.action||(""!==document.querySelector('[data-fieldid="'+this.data.fieldId+'"]').value?this.setData("action","assign"):this.setData("action","unassign")),t=void 0!==(t=$L("#"+this.data.mxnDomId.substring(0,this.data.mxnDomId.length-1))[0])?t:$L("#"+this.data.mxnDomId+"X")[0]){if("all"===(t=t.component).data.tempids){if(null!==this.data.entityId)return void this.showCannotModifyError(!0);t.data.tempids=""}t.data.tempids&&(this.setData("dependent_remove_tempIds",void 0!==t.data.tempids.split("-")[0]?t.data.tempids.split("-")[0]:"0"),this.setData("dependent_tempIds",void 0!==t.data.tempids.split("-")[1]?t.data.tempids.split("-")[1]:"0"),void 0!==t.data.lVsp&&this.setData("linkingModuleIdVsparentModuleId",Object.assign(this.data.linkingModuleIdVsparentModuleId,JSON.parse(t.data.lVsp))))}}},populateModuleData:function(){var e=[];if(e.push(this.featchRelatedListMeata()),e.push(this.fetchModuleData(this.data.moduleId)),this.data.isLookUp){var t={};t.module=this.data.moduleApiName,e.push(store.findAll("layout",t,!1,!0,{apiVersion:"2.2"}))}else e.push(this.fetchModuleData(this.data.linkingModuleId)),e.push(store.findRecord("field",this.data.fieldId,{module:this.data.parentModuleApiName},!0)),e.push(store.findAll("field",{module:this.data.linkingModuleApiName},!1,!0,{apiVersion:"2.2"}));return this.fetchFeatureLimit(e),Lyte.resolvePromises(e).then(function(e){if(this.setData("filterList",e[1][0].fields),!e[0])return this.showPermissionDenid(),void commonUtils.showHideLoadingDiv(!1);if(this.setData("RelatedList",e[0][0]),this.setData("parentModuleFields",e[1][0].fields),this.setData("allFields",this.constractAllField(e)),this.findLookupName(this.data.allFields,this.data.isLookUp?this.data.fieldId:e[3][0].api_name),this.preventField(),this.data.isLookUp?this.populateMandatory(e[2]):(this.setData("LinkingModuleFields",e[2][0].fields),this.setData("isHiddenModule",!!this.data.client_account||"Bundles"!==this.data.parentModule&&!(1===e[2][0].visibility&&e[2][0].visible))),this.constractCustomColumn(),this.setData("modulelable",e[1][0].singular_label),this.setData("display_field",e[1][0].display_field.api_name),this.setData("display_id",e[1][0].display_field.id),this.setData("display_label",store.peekRecord("field",e[1][0].display_field.id).field_label),e[5]&&e[5].__features){var t=e[5].__features.first();if(t.details){var a=t.details.limits;this.setData("associationLimit",a||this.data.associationLimit)}}if(this.getData("isRelatedList")||(this.populateOldValue(),!this.data.showAlert)){if(this.data.isFromField){this.setData("isEdit",!1);for(var i=$L("crm-multi-lookup"),o=i.length,s=0;s<o;s++)i[s].component.data.dataKey.includes(this.data.fieldId)&&i[s].component.data.cxPropFieldArr.length<1&&this.setData("action","unassign")}this.permissionCheck(),this.renderPopup()}}.bind(this),function(e){this.errorResp(e)}.bind(this))},populateAssignedData:function(){commonUtils.showHideLoadingDiv(!0);var e=[],t=!1;this.data.isHiddenModule&&Lyte.deepCopyObject(this.data.selectFields).forEach((function(a){-1!==a.api_name.indexOf(".")&&(t=!0,e.push(a))})),this.setData("tableFields",t?e:this.data.selectFields),this.data.sort_by=null===this.data.RelatedList.sort_by?this.data.stringid:this.data.RelatedList.sort_by.api_name,this.data.sort_order=null===this.data.RelatedList.sort_order?this.data.stringdesc:this.data.RelatedList.sort_order,store.peekRecord("module",this.data.isLookUp?this.data.moduleId:this.data.linkingModuleId).$.triggerAction("getAssigned",{module:this.data.isLookUp?this.data.moduleApiName:this.data.linkingModuleApiName},void 0,void 0,this.assignfetchpayloadJson("assign")).then(function(e){var t=this.data.connectedLookupApiName;_.isEmpty(e)||0!==this.data.searchValue.length||this.data.filters&&!_.isEmpty(this.data.filters)?this.setData("disableUnassignall",!0):this.setData("disableUnassignall",!1);var a=e.data;if(this.data.isLookUp||void 0===a)a=store.pushPayload(this.data.moduleId,a);else{var i=this.data.linkingModuleIdVsparentModuleId,o=[];a.forEach(function(e){o.push(Lyte.deepCopyObject(e[this.data.connectedLookupApiName])),e[this.data.connectedLookupApiName]=store.pushPayload(this.data.moduleId,e[this.data.connectedLookupApiName]),null===e.id&&(e.id=e[this.data.connectedLookupApiName].id),i[e.id]=e[t].id,i[e[t].id]=e.id,"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&(e=this.populateBundleMxnAssignedData(e))}.bind(this)),a=store.pushPayload(this.data.linkingModuleId,a),this.setData("linkingModuleIdVsparentModuleId",i);var s=0;o.forEach(function(e){a[s][this.data.connectedLookupApiName]=store.pushPayload(this.data.moduleId,e),s+=1}.bind(this))}this.setData("tableContent",void 0===a?[]:a),this.setData("showpopup",!0),this.showUnassigPopup(),e.meta&&(this.setData("record_from",e.meta.per_page*(e.meta.page-1)),this.setData("record_to",e.meta.per_page*(e.meta.page-1)+e.meta.count)),this.setData("resp",e),this.addSelectedStyle(),commonUtils.showHideLoadingDiv(!1),this.setData("loader",!1)}.bind(this),function(e){var t=JSON.parse(e.response);this.errorResp(t.get_assigned)}.bind(this))},populateUnassignedData:function(){if(!this.data.isLookUp&&!this.data.assignPermission)return this.showPermissionDenid(),this.setData("loader",!1),void commonUtils.showHideLoadingDiv(!1);commonUtils.showHideLoadingDiv(!0);var e=[],t=!1;Lyte.deepCopyObject(this.data.selectFields).forEach(function(a){-1!==a.api_name.indexOf(".")?(t=!0,a.api_name=a.api_name.split(".")[1],e.push(a)):Crm.isModuleAvailable("LinkingModuleBundleRel")&&this.data.linkingModule===moduleRecordMapping.LinkingModuleBundleRel.module_name&&"Linked_Products"===this.data.fieldApiName&&["Product_Quantity","List_Price","Total"].contains(a.api_name)&&(t=!0,e.push(a))}.bind(this)),this.setData("tableFields",t?e:this.data.selectFields),this.data.sort_by=null===this.data.RelatedList.sort_by?this.data.stringid:this.data.RelatedList.sort_by.api_name.split(".").length>1?this.data.RelatedList.sort_by.api_name.split(".")[1]:this.data.RelatedList.sort_by.api_name,this.data.sort_order=null===this.data.RelatedList.sort_order?this.data.stringdesc:this.data.RelatedList.sort_order;var a=store.peekRecord("module",this.data.moduleId);a.$.triggerAction("getUnAssigned",{module:a.api_name},void 0,void 0,this.unassginfetchpayloadJson()).then(function(e){e.data=store.pushPayload(a.id,e.data),"PRODUCTS_LINKINGMODULEBUNDLERELPERSONALITY"===this.data.RelatedList.personality_name&&e.data&&e.data.forEach(function(e){let t=this.data.linkingModuleIdVsparentModuleId[e.id],a=!(!t||!this.data.remove_confirm_tempIds)&&this.data.remove_confirm_tempIds.split(",").includes(t),i=moduleRecordMapping?moduleRecordMapping.LinkingModuleBundleRel:null,o=e;a&&i&&(o=store.peekRecord(i.id,t)),e.List_Price=o&&o.List_Price?o.List_Price:e.Unit_Price,e.Product_Quantity=o&&o.Product_Quantity?o.Product_Quantity:1,e.Total=e.Product_Quantity*e.List_Price}.bind(this)),this.getData("assignpage")?this.setData("tableContent",void 0===e.data?[]:e.data):this.data.tableContent=void 0===e.data?[]:e.data,this.setData("resp",e),e.meta&&(this.setData("record_from",e.meta.per_page*(e.meta.page-1)),this.setData("record_to",e.meta.per_page*(e.meta.page-1)+e.meta.count)),this.data.refresh&&(this.refreshRelatedList(),this.data.refresh=!1),"0"!==this.data.recentlyCreatedRcordId&&this.setData("selectcount",this.data.selectcount),this.showAssigPopup(),this.setData("showpopup",!0),commonUtils.showHideLoadingDiv(!1),this.addSelectedStyle(),this.setData("loader",!1)}.bind(this),function(e){var t=JSON.parse(e.response);this.errorResp(t.get_unassigned)}.bind(this))},populateConfirmData:function(){commonUtils.showHideLoadingDiv(!0);var e=[],t=!1,a=["Product_Quantity","List_Price","Total"],i=this.data.fieldColumn;Lyte.deepCopyObject(this.data.selectFields).forEach((function(o){-1!==o.api_name.indexOf(".")?(t=!0,o.api_name=o.api_name.split(".")[1],e.push(o)):"MXNDUMMYCOLUMNBUNDLE"===i&&a.contains(o.api_name)&&e.push(o)})),this.setData("tableFields",t?e:this.data.selectFields),this.data.sort_by=null===this.data.RelatedList.sort_by?this.data.stringid:this.data.RelatedList.sort_by.api_name.split(".").length>1?this.data.RelatedList.sort_by.api_name.split(".")[1]:this.data.RelatedList.sort_by.api_name,this.data.sort_order=null===this.data.RelatedList.sort_order?this.data.stringdesc:this.data.RelatedList.sort_order,store.peekRecord("module",this.data.isLookUp?this.data.moduleId:this.data.linkingModuleId).$.triggerAction("getAssigned",{module:this.data.isLookUp?this.data.moduleApiName:this.data.linkingModuleApiName},void 0,void 0,this.assignfetchpayloadJson("confirm")).then(function(e){var t=[];if(this.data.isLookUp)t=store.pushPayload(this.data.moduleId,e.data);else if(void 0!==e.data){for(var a=this.data.connectedLookupApiName,i=e.data.length,o=0;o<i;o++)t.push(e.data[o][a]);t=store.pushPayload(this.data.moduleId,t)}this.setData("confirmJSON",void 0===t?[]:t),this.setData("selectedids",this.data.tempIds.split(",")),this.setData("showpopup",!0),this.showConfirmPopup(),e.meta&&(this.setData("record_from",e.meta.per_page*(e.meta.page-1)),this.setData("record_to",e.meta.per_page*(e.meta.page-1)+e.meta.count)),this.setData("resp",e),commonUtils.showHideLoadingDiv(!1),this.addSelectedStyle(),this.setData("loader",!1)}.bind(this))},errorResp:function(e){switch("can't update the converted record"==e.message&&(e.code="CONVERTED"),e.code){case"FILTER_CRITERIA_NOT_SATISFIED":this.setData("errormessage",I18n.getMsg("crm.lookupfilter.relatedList.errormsg",[$ESAPI.encoder().encodeForHTML(e.details.parent_record.name),$ESAPI.encoder().encodeForHTML(this.data.fieldLabel),$ESAPI.encoder().encodeForHTML(this.data.module)]).replace("''","'"));break;case"SCHEDULER_RUNNING":this.setData("type","info"),"mxn_unassign_all"===e.details.action?(this.setData("errorHeading",this.data.isLookUp?I18n.getMsg("crm.lookup.unassignall.scheduler.progress.title"):I18n.getMsg("crm.mxnlookup.unassignall.scheduler.progress.title")),this.setData("errormessage",I18n.getMsg("crm.mxnlookup.unassignall.scheduler.progress.msg"))):"mxn_clone"===e.details.action&&(this.setData("errorHeading",I18n.getMsg("crm.mxnlookup.clone.scheduler.progress.title")),this.setData("errormessage",I18n.getMsg("crm.mxnlookup.clone.scheduler.progress.msg",[$ESAPI.encoder().encodeForHTML(this.data.module),$ESAPI.encoder().encodeForHTML(e.details.parent_record.name),$ESAPI.encoder().encodeForHTML(this.data.entityName)])));break;case"DUPLICATE_LINKING_DATA":var t=e.details.duplicate_record,a=t.id,i=t.Name,o=this.data.linkingModule,s=I18n.getMsg("crm.linking.module.duplicate.warning",[$ESAPI.encoder().encodeForHTML(o),$ESAPI.encoder().encodeForHTML(a),$ESAPI.encoder().encodeForHTML(this.data.isHiddenModule?"":i),$ESAPI.encoder().encodeForHTML(Crm.getCrmBasePath())]);this.setData("errormessage",s);break;case"CONVERTED":this.setData("errorHeading",I18n.getMsg("crm.alert.heading.cannot.access.record",[$ESAPI.encoder().encodeForHTML(this.data.parentModulelable)])),this.setData("errormessage",I18n.getMsg("crm.convert.lead.converted.already",[$ESAPI.encoder().encodeForHTML(this.data.parentModulelable)]));break;default:"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&"MINIMUM_DATA_NOT_FOUND"===e.code?this.setData("errormessage",I18n.getMsg("bundles.minimum.product.relatedlist.check",["2",moduleRecordMapping.Products.plural_label])):"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&"LIMIT_EXCEEDED"===e.code?this.setData("errormessage",I18n.getMsg("crm.subform.record.create.maxrow.limit",[this.data.associationLimit.total+" "+moduleRecordMapping.Products.singular_label,moduleRecordMapping.Bundles.plural_label])):this.showPermissionDenid()}this.setData("type","error"),this.setData("showAlert",!0),this.setData("loader",!1),commonUtils.showHideLoadingDiv(!1)},populateMandatory:function(e){var t={};e.forEach(function(e){e.fields.forEach(function(a){a.api_name===this.data.fieldApiName&&(t[e.id]=a.required),"system"===e.generated_type&&this.setData("defaultLayoutId",e.id)}.bind(this))}.bind(this)),this.setData("layoudidVsMandatory",t)},putColumnList:function(e){commonUtils.showHideLoadingDiv(!0);var t=$L(e.closest(".columnListNew")).find("crux-column-list")[0].component.getSelectedFields(),a=[],i={};a=function(e){for(var t=e.length,a=[],o=0;o<t;o++)i={sequence_number:o+1,api_name:e[o].api_name,id:e[o].id},a.push(i);return a}(t);for(var o=this.data.tableFields,s=o.length,l=function(e,t){return e.filter((function(e){return e.id===t}))[0]},n=0;n<s;n++)l(t,o[n].id)||(i={_delete:!0,api_name:o[n].api_name,id:o[n].id},a.push(i));var d=this.data.RelatedList;d.$.set("fields",a),d.$.save(void 0,{module:this.data.parentModuleApiName}).then(function(){d.fields=t,this.configSelectedField(Lyte.deepCopyObject(d.fields)),this.renderPopup(),this.refreshRelatedList(!0),$($("#"+d.id)[0].parentElement).find("#relatedListCols").remove(),commonUtils.showHideLoadingDiv(!1)}.bind(this))},unassignselectedRecords:function(){commonUtils.showHideLoadingDiv(!0),this.data.isLookUp?this.LookupRecords(this.getLookupJSON(this.data.remove_tempIds.split(","),"remove",this.data.fieldApiName),!1):this.updateMxnRecords(!1)},unassignAllRecords:function(){commonUtils.showHideLoadingDiv(!0);var e="";if("0"!==this.data.confirm_tempIds&&(e=this.convertToParentId(this.data.confirm_tempIds)),"0"!==this.data.remove_confirm_tempIds&&(e=""!==e?e+","+this.data.remove_confirm_tempIds:this.data.remove_confirm_tempIds),this.setData("confirm_tempIds","0"),this.setData("remove_confirm_tempIds","0"),this.data.remove_tempIds="0",this.setData("unassigncount","0"),this.setData("loader",!0),this.data.isRelatedList)this.data.isLookUp?this.lookupRemoveAll():this.updateRecord([{_delete:"all"}],!1);else{if(this.data.isQuickCreate||this.data.isDirectField){var t=this.mxnIdDom();if($("#multipleFieldsEditPop").is(":visible")?t.data("selectedid","-"+e):t.data("selectedid","clone"!==window[this.data.parentModule].currentStatus&&this.data.entityId?"all":""),t.val(""),t.data("lVsp",JSON.stringify(this.data.linkingModuleIdVsparentModuleId)),this.data.isDirectField&&"canvas"===Lyte.Router.getRouteInstance().routeName&&!this.data.isFromBlueprint)$("crm-canvas-form")[0].component.data.record.$.set(this.data.fieldApiName,"clone"!==window[this.data.parentModule].currentStatus&&this.data.entityId?[{_delete:"all"}]:[]);this.data.isQuickCreate&&(CFRExec.setValue(this.mxnIdDom().split("_")[2],"quick_create",CFRExec.OPERATIONCONSTANT.QUICK_CREATE),CFRExec.isColTriggerLayoutRule&&CFRExec.evalRules("quick_create",!0))}else{var a=document.querySelector('[data-fieldid="'+this.data.fieldId+'"]').id,i=document.querySelector('[fld-id="'+a+'"]').component.$node;this.data.isFromBlueprint?Lyte.Component.set(i.component.getData("fieldDataObj"),this.data.fieldApiName,"clone"!==window[this.data.parentModule].currentStatus&&this.data.entityId?[{_delete:"all"}]:[]):Lyte.Component.set(i.component.getData("dataBind"),this.data.fieldApiName,"clone"!==window[this.data.parentModule].currentStatus&&this.data.entityId?[{_delete:"all"}]:[]),(t=$("#"+this.data.mxnDomId)[0].component).data.tempids="all",$("#"+a).val("")}this.invokeLayoutRule(),this.setData("showUnassignPopup",!1),this.setData("showpopup",!1),commonUtils.showHideLoadingDiv(!1)}},invokeLayoutRule:function(){let e=$L("crm-create-fields");Lyte.registeredMixins["crm-detailcanvas-utils"]&&Lyte.registeredMixins["crm-detailcanvas-utils"].isFormViewCommonCheck()&&(e=$L("crm-canvas-form"));for(var t=e.length,a=0;a<t;a++){let t=e[a];if(t.id.endsWith(this.data.mxnDomId.split("_")[2])){t.component.checkLayoutrules(t.component.$node);break}}},permissionCheck:function(){var e={};e.isCreate=moduleRecordMapping[this.data.module].creatable,e.isEdit=moduleRecordMapping[this.data.module].editable,e.isDelete=moduleRecordMapping[this.data.module].deletable,e.isView=moduleRecordMapping[this.data.module].viewable,this.setData("modulePermission",e);var t={};if(t.isCreate=moduleRecordMapping[this.data.parentModule].creatable,t.isEdit=moduleRecordMapping[this.data.parentModule].editable,t.isDelete=moduleRecordMapping[this.data.parentModule].deletable,t.isView=moduleRecordMapping[this.data.parentModule].viewable,this.setData("connectedModulePermission",t),!this.data.isLookUp&&!this.data.isHiddenModule&&this.data.isLinkingModuleVisible){var a={};a.isCreate=moduleRecordMapping[this.data.linkingModule].creatable,a.isEdit=moduleRecordMapping[this.data.linkingModule].editable,a.isDelete=moduleRecordMapping[this.data.linkingModule].deletable,a.isView=moduleRecordMapping[this.data.linkingModule].viewable,this.setData("linkingModulePermission",a)}var i=!1,o=!1;this.data.isLookUp&&e.isEdit?(i=!0,o=!0):!this.data.isLookUp&&e.isEdit&&t.isEdit&&(!this.data.isHiddenModule&&this.data.isLinkingModuleVisible?(a.isCreate&&(i=!0),a.isDelete&&(o=!0)):(i=!0,o=!0)),this.setData("assignPermission",i),this.setData("unassignPermission",o)},configSelectedField:function(e){for(var t=this.data.ColumnList,a=e.length,i=t.length,o=0;o<a;o++)for(var s=0;s<i;s++)if(e[o].id===t[s].id){if(e[o].field_label=t[s].field_label,("Full_Name"===t[s].api_name||t[s].api_name.split(".").length>1&&"Full_Name"===t[s].api_name.split(".")[1])&&("Contacts"===this.data.module?e[o].field_label=I18n.getMsg("Contact Name",moduleRecordMapping.Contacts.singular_label):"Leads"===this.data.module&&(e[o].field_label=I18n.getMsg("Lead Name",moduleRecordMapping.Leads.singular_label))),116===t[s].ui_type||117===t[s].ui_type?(e[o].formula=t[s].formula,e[o].data_type="formula"):2===t[s].ui_type?(e[o].enable_colour_code=t[s].enable_colour_code,e[o].picklist_colour_codes=t[s].pick_list_values,e[o].pick_list_values=t[s].pick_list_values):118===t[s].ui_type&&(e[o].rollup_summary=t[s].rollup_summary),e[o].separator=t[s].separator,e[o].ui_type=t[s].ui_type,e[o].noOverride=!0,e[o].cxPropResize="enable",e[o].cxPropClass=this.getClassForLVData(e[o]),e[o].cxPropClass+=" cellWrap",e[o].cxPropClass+=" "+t[s].api_name,t[s].sortable?e[o].cxPropClass+=" sortAllowed":e[o].cxPropClass+=" sortNotAllowed",null!==this.data.RelatedList.sort_by&&this.data.RelatedList.sort_by.api_name===t[s].api_name){var l="desc"===(null===this.data.RelatedList.sort_order?this.data.stringdesc:this.data.RelatedList.sort_order)?I18n.getMsg("crm.column.sort.desc"):I18n.getMsg("crm.column.sort.asc");this.setData("sort_label",t[s].field_label+" ("+l+")")}if(e[o].display_field=t[s].display_field,e[o].display_field||133===t[s].ui_type)if(e[o].yieldName="multiselect-lookup",133===t[s].ui_type)for(var n=Object.keys(moduleApiMapping),d=n.length,r=0;r<d;r++){if(moduleApiMapping[n[r]]===t[s].lookup.module.api_name){e[o].module=n[r];break}}else e[o].api_name.split(".").length>1||this.data.isLookUp?e[o].module=this.data.module:e[o].module=this.data.linkingModule;else e[o].api_name.split(".").length>1&&(e[o].yieldName="multiselect-lookup");"Product_Quantity"===e[o].api_name&&(e[o]=t[s],e[o].yieldName="inputfield")}e[0].fixed="enable",this.setData("selectFields",e)},mxnIdDom:function(){return this.data.isQuickCreate?$L("#searchCreateDiv").find("#"+this.data.mxnDomId):$L("#"+this.data.mxnDomId)},showCannotModifyError:function(e){this.setData("errorHeading",I18n.getMsg("crm.mxnlookup.editpopup.unassignall.modify")),this.setData("errormessage",I18n.getMsg(e?"crm.mxnlookup.editpopup.unassignall.connectedmodifymessage":"crm.mxnlookup.editpopup.unassignall.modifymessage",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural),$ESAPI.encoder().encodeForHTML(this.data.parentModulelable)])),this.setData("type","info"),this.setData("showAlert",!0),this.setData("loader",!1),commonUtils.showHideLoadingDiv(!1)},constractAllField:function(e){var t=Lyte.deepCopyObject(e[1][0].fields);return this.data.isLookUp||e[2][0].fields.forEach(function(e){"NAME"!==e.column_name&&"SMOWNERID"!==e.column_name&&(e.field_label=e.field_label+" ("+this.data.linkingModuleLabel+")"),("LinkingModuleBundleRel"!==this.data.linkingModule||"LINKINGMXN2"!==e.column_name&&"LINKINGMXN1"!==e.column_name&&"NAME"!==e.column_name)&&t.push(e)}.bind(this)),t},constractCustomColumn:function(){var e=Lyte.deepCopyObject(this.data.parentModuleFields);this.data.isLookUp||(e.forEach(function(e){"Leads"!==this.data.module&&"Contacts"!==this.data.module||"Last_Name"!==e.api_name&&"Full_Name"!==e.api_name||(e.display_field=!0),e.api_name=this.data.connectedLookupApiName+"."+e.api_name}.bind(this)),this.data.isHiddenModule||Lyte.deepCopyObject(this.data.LinkingModuleFields).forEach(function(t){"LinkingModuleBundleRel"!==this.data.linkingModule||"LINKINGMXN2"!==t.column_name&&"LINKINGMXN1"!==t.column_name&&"NAME"!==t.column_name&&"SMOWNERID"!==t.column_name&&"SERIAL_NUMBER"!==t.column_name&&"CREATEDTIME"!==t.column_name&&"MODIFIEDTIME"!==t.column_name&&"SMCREATORID"!==t.column_name&&"MODIFIEDBY"!==t.column_name&&"LASTACTIVITYTIME"!==t.column_name||(t.visible=!1),e.push(t)}.bind(this))),e=e.filter((function(e){return!0===e.visible})),this.setData("ColumnList",e),this.configSelectedField(Lyte.deepCopyObject(this.data.RelatedList.fields))},getMxNJson:function(e,t,a){var i=[];return 1===e.length&&""===e[0]||""===e||e.forEach(function(e){var o={};if("remove"===t)o._delete=null,o.id=e;else if("edit"===t){var s=this.data.bundleMxnLinkingModuleIdVsQty;o.id=e,o.Product_Quantity=s.hasOwnProperty(e)?s[e]:1,this.updateMxnModuleSpecificData(o,t)}else o[a]={},o[a].id=e,this.updateMxnModuleSpecificData(o);i.push(o)}.bind(this)),i},getLookupJSON:function(e,t,a){var i=[];return e.forEach(function(e){var o={};o.id=e,o[a]="remove"===t?null:this.data.entityId,i.push(o)}.bind(this)),i},AfterSave:function(e,t){if(this.data.remove_confirm_tempIds="0",this.data.confirm_tempIds="0",this.data.tempIds="0",this.data.remove_tempIds="0",this.setData("type","success"),t)this.setData("message",I18n.getMsg("crm.mxnlookup.association.success.msg",[e.length,e.length<=1?this.data.modulelable:this.data.modulelableplural])),this.setData("showmsg",!0);else if(this.data.unassignall)this.setData("type","info"),this.setData("errorHeading",I18n.getMsg("crm.mxnlookup.removeall.title",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)])),this.setData("errormessage",I18n.getMsg("crm.mxnlookup.lookuprel.removeall.scheduled.msg",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)])),this.setData("showAlert",!0);else if(t||"assign"!==this.data.action||parseFloat(this.data.unassigncount)&&!(parseFloat(this.data.unassigncount)&&parseFloat(this.data.unassigncount)<0)){var a=this.data.isRelatedList&&"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn?parseFloat(this.data.unassigncount):e.length;this.setData("message",I18n.getMsg("crm.mxnlookup.dissociation.success.msg",[a,a>1?this.data.modulelableplural:this.data.modulelable])),this.setData("showmsg",!0)}else this.setData("message",I18n.getMsg("bundles.relatedlist.update",[1,this.data.modulelable])),this.setData("showmsg",!0);commonUtils.showHideLoadingDiv(!1),this.refreshRelatedList(),t?(this.data.selectcount="0",this.data.isEdit?(this.setData("action","assign"),this.renderPopup()):this.setData("showpopup",!1)):(this.setData("showUnassignAllPopup",!1),this.setData("showUnassignPopup",!1),this.setData("unassigncount","0"),this.setData("action","assign"),this.data.unassignall?this.setData("showpopup",!1):this.renderPopup())},updateRecord:function(e,t){commonUtils.showHideLoadingDiv(!0);var a=store.peekRecord(this.data.parentModuleId,this.data.entityId);if(a.$.set(this.data.fieldApiName,e),"canvas"===Lyte.Router.getRouteInstance().routeName&&void 0!==a.$approval&&(a.$approval.takeover||a.$approval.approve)){commonUtils.showHideLoadingDiv(!1);var i=Lyte.registeredMixins.approvalprocess.constructDataForApprovalProcess(store.$.toJSON(a.$.model._name,store.$.updateJSON(a,a.$.model,a.$.isDirty()),void 0,void 0,{obj:new Map}),a),o="canvas"===Lyte.Router.getRouteInstance().routeName&&"form_edit"!==Lyte.Router.getRouteInstance().currentModel.form_type?Lyte.Router.getRouteInstance().currentModel:void 0;Lyte.registeredMixins.approvalprocess.saveRecordWithApprovalResponse(o.entityDetails.APPROVALBUTTONS,i,"MXNdv",this.data.module)}else{var s=$("crm-detail-view")[0],l=!1;if(s){var n=$("#ajaxEdit_"+this.data.fieldColumn);if(n){var d=n.find("crm-detailview-fields")[0];d&&d.component.setData("lyteViewPort",!1)}for(var r=$("crm-multi-lookup"),p=r.length,c=0;c<p;c++)r[c].component.data.dataKey.includes(this.data.fieldId)&&(r[c].component.setData("cxPropValue",e),l=!0,s.component.validateAndSaveAjaxEdit($L(r[c])))}l||a.$.save().then(function(){this.AfterSave(e,t)}.bind(this),function(e){a.$.undo(),this.errorResp(JSON.parse(e.response).data instanceof Array?JSON.parse(e.response).data[0]:{}),this.setData("loader",!1),commonUtils.showHideLoadingDiv(!1)}.bind(this))}},updateMxnRecords:function(e,t){var a=this.data.connectedLookupApiName,i=this.data.tempIds.split(","),o=this.data.remove_tempIds.split(","),s="0"!==this.data.remove_confirm_tempIds&&""!==this.data.remove_confirm_tempIds?this.data.remove_confirm_tempIds.split(","):[],l="0"!==this.data.confirm_tempIds&&""!==this.data.confirm_tempIds?this.data.confirm_tempIds.split(","):[],n=this.data.linkingModuleIdVsparentModuleId;if("MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&!this.data.isQuickCreate&&moduleRecordMapping&&moduleRecordMapping.Products&&this.data.parentModuleId!==moduleRecordMapping.Products.id&&!t){if(this.data.isRelatedList){var d=store.peekRecord(this.data.parentModuleId,this.data.entityId),r=d.Unique_Item_Count?d.Unique_Item_Count:0;if(!(e||!this.data.isRelatedList)&&(d&&r-this.data.remove_tempIds.split(",").length<2))return this.setData({type:"error",showmsg:!0,message:I18n.getMsg("bundles.minimum.product.relatedlist.check",["2",moduleRecordMapping.Products.plural_label]),action:"unassign",showUnassignPopup:!1}),commonUtils.showHideLoadingDiv(!1),this.data.unassignpage=!1,void(this.data.action="assign");this.data.unassignpage?d.$.set("Unique_Item_Count",r-this.data.remove_tempIds.split(",").length):this.data.confirmpage&&d.$.set("Unique_Item_Count",r+this.data.selectedids.length)}this.calculatePoductQuantityForBundles(e,!1,!0)}if(""!==i[0]&&"0"!==i[0]&&(i=Lyte.deepCopyObject(i).filter((function(e){return!(s.contains(n[e])&&(s.removeFirstOccurenceOfElement(n[e]),!$("#multipleFieldsEditPop").is(":visible")))||(l.removeFirstOccurenceOfElement(e),!1)})),Array.prototype.push.apply(l,i)),t||""===o[0]||"0"===o[0]||(o=Lyte.deepCopyObject(o).filter((function(e){return l.contains(e)?(l.removeFirstOccurenceOfElement(e),s.removeFirstOccurenceOfElement(e),!1):(l.contains(n[e])&&l.removeFirstOccurenceOfElement(n[e]),!0)})),Array.prototype.push.apply(s,o)),this.setData("confirm_tempIds",this.convertarraytocsv(l)),this.setData("remove_confirm_tempIds",this.convertarraytocsv(s)),this.data.tempIds="0",t||(this.data.remove_tempIds="0"),this.data.isRelatedList){var p=this.getMxNJson(this.data.confirm_tempIds.split(","),"add",a);Array.prototype.push.apply(p,this.getMxNJson(this.data.remove_confirm_tempIds.split(","),"remove",a)),Array.prototype.push.apply(p,this.getMxNJson(Object.keys(this.data.bundleMxnLinkingModuleIdVsQty),"edit",this.data.connectedLookupApiName)),this.updateRecord(p,e)}else this.tempsave(),e?this.data.isEdit?(this.setData("action","assign"),this.setData("selectcount","0"),this.renderPopup()):this.setData("showpopup",!1):(this.setData("showUnassignPopup",!1),t||this.setData("unassigncount","0"),this.setData("loader",!0),this.renderPopup())},tempsave:function(){if(this.updateMXNValue(),this.data.isQuickCreate||this.data.isDirectField){var e=this.mxnIdDom();if("MXNDUMMYCOLUMNBUNDLE"!==this.data.fieldColumn||this.data.isDirectField&&"canvas"===Lyte.Router.getRouteInstance().routeName&&"crm.tab.module.entity.edit.canvas"!==Lyte.Router.getRouteInstance().transition.info.route)e.data({selectedid:this.data.confirm_tempIds+"-"+this.data.remove_confirm_tempIds,lVsp:JSON.stringify(this.data.linkingModuleIdVsparentModuleId)});else{var t=this.data.confirm_tempIds+"-"+this.data.remove_confirm_tempIds;this.data.isDirectField&&!this.data.isQuickCreate&&this.data.selectedids&&"confirm"===this.data.action&&this.data.selectedids.forEach((e=>{var t=this.data.linkingModuleIdVsparentModuleId[e];if(t&&!Object.keys(this.data.bundleMxnLinkingModuleIdVsQty).contains(t)){var a=store.peekRecord(moduleRecordMapping.Products.id,e);this.data.bundleMxnLinkingModuleIdVsQty[t]=a.Product_Quantity}}));var a=this.getMxNJson(this.data.remove_confirm_tempIds.split(","),"remove",this.data.connectedLookupApiName);Array.prototype.push.apply(a,this.getMxNJson(this.data.confirm_tempIds.split(","),"add",this.data.connectedLookupApiName)),this.data.isQuickCreate||Array.prototype.push.apply(a,this.getMxNJson(Object.keys(this.data.bundleMxnLinkingModuleIdVsQty),"edit",this.data.connectedLookupApiName)),e.data({selectedid:this.data.isDirectField&&"-"===t&&a.length<1?"":t,lVsp:JSON.stringify(this.data.linkingModuleIdVsparentModuleId),bundleMxnProductIdVsQty:this.data.bundleMxnProductIdVsQty,finalResponse:a,entityId:this.data.entityId,parentModuleId:this.data.parentModuleId,linkingModuleId:this.data.linkingModuleId,moduleId:this.data.moduleId,editedItems:this.data.bundleMxnLinkingModuleIdVsQty,editedVsOldQty:this.data.bundleProdEditedVsOldQty})}if(this.data.isQuickCreate){for(var i=e[0].parentElement.childNodes,o=i.length,s=0;s<o;s++){var l=i[s].name;void 0!==l&&l.includes(this.data.fieldColumn)&&(i[s].value=this.data.confirm_tempIds+"-"+this.data.remove_confirm_tempIds),"property(Products in Bundle)"===l&&i[s].classList.contains("errorFieldP")&&i[s].classList.remove("errorFieldP")}"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&$L("#"+this.data.mxnDomId).data(e.data())}else if(this.data.isDirectField&&"canvas"===Lyte.Router.getRouteInstance().routeName&&!this.data.isFromBlueprint){var n=$("crm-canvas-form")[0].component.data.record;a=this.getMxNJson(this.data.remove_confirm_tempIds.split(","),"remove",this.data.connectedLookupApiName);Array.prototype.push.apply(a,this.getMxNJson(this.data.confirm_tempIds.split(","),"add",this.data.connectedLookupApiName)),this.data.isQuickCreate||"MXNDUMMYCOLUMNBUNDLE"!==this.data.fieldColumn||Array.prototype.push.apply(a,this.getMxNJson(Object.keys(this.data.bundleMxnLinkingModuleIdVsQty),"edit",this.data.connectedLookupApiName)),n.$.set(this.data.fieldApiName,a)}}else{var d=document.querySelector('[fld-id="'+document.querySelector('[data-fieldid="'+this.data.fieldId+'"]').id+'"]').component.$node;a=this.getMxNJson(this.data.remove_confirm_tempIds.split(","),"remove",this.data.connectedLookupApiName);Array.prototype.push.apply(a,this.getMxNJson(this.data.confirm_tempIds.split(","),"add",this.data.connectedLookupApiName)),d="MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn?document.querySelector('[fld-id="'+document.querySelector('[data-fieldid="'+$("crm-multi-selection-popup")[0].component.data.fieldId+'"]').id+'"]'):d,"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&d&&"create"!==d.component.$node.component.data.initRoute&&(Array.prototype.push.apply(a,this.getMxNJson(Object.keys(this.data.bundleMxnLinkingModuleIdVsQty),"edit",this.data.connectedLookupApiName)),this.mxnIdDom().data({editedVsOldQty:this.data.bundleProdEditedVsOldQty,linkingModuleIdVsparentModuleId:this.data.linkingModuleIdVsparentModuleId})),this.data.isFromBlueprint?Lyte.Component.set(d.component.getData("fieldDataObj"),this.data.fieldApiName,a):Lyte.Component.set(d.component.getData("dataBind"),this.data.fieldApiName,a),(e=$L("#"+this.data.mxnDomId)[0].component).data.tempids=this.data.confirm_tempIds+"-"+this.data.remove_confirm_tempIds,e.data.lVsp=JSON.stringify(this.data.linkingModuleIdVsparentModuleId)}},updateMXNValue:function(){commonUtils.showHideLoadingDiv(!0);var e=[],t=!1;this.data.isHiddenModule&&Lyte.deepCopyObject(this.data.selectFields).forEach((function(a){-1!==a.api_name.indexOf(".")&&(t=!0,e.push(a))})),this.setData("tableFields",t?e:this.data.selectFields),this.data.sort_by=this.data.connectedLookupApiName+".id",this.data.sort_order="desc";var a=store.peekRecord("module",this.data.isLookUp?this.data.moduleId:this.data.linkingModuleId).$.triggerAction("getAssigned",{module:this.data.isLookUp?this.data.moduleApiName:this.data.linkingModuleApiName},void 0,void 0,this.assignfetchpayloadJson("getvalue"));"assign"!==this.data.action&&(e=[],t=!1,Lyte.deepCopyObject(this.data.selectFields).forEach((function(a){-1!==a.api_name.indexOf(".")&&(t=!0,a.api_name=a.api_name.split(".")[1],e.push(a))})),this.setData("tableFields",t?e:this.data.selectFields)),a.then(function(e){let t=$L("crm-create-fields");Lyte.registeredMixins["crm-detailcanvas-utils"]&&Lyte.registeredMixins["crm-detailcanvas-utils"].isFormViewCommonCheck()&&(t=$L("crm-canvas-form"));var a=t.length;if(this.data.isFromBlueprint||this.data.isQuickCreate||this.data.isDirectField||"detail"!==Lyte.Router.getRouteInstance().routeName&&"canvas"!==Lyte.Router.getRouteInstance().routeName)this.constractFieldData(e);else{for(var i=$("crm-multi-lookup"),o=i.length,s=0;s<o;s++)if(i[s].component.data.dataKey.includes(this.data.fieldId))if("MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn)Lyte.objectUtils(i[s],"add","cxPropDisplayLabel",this.data.display_field),Lyte.objectUtils(i[s],"add","cxPropFieldArr",void 0!==e.data?e.data:[]);else{i[s].component.setData("cxPropDisplayLabel",this.data.display_field),i[s].component.setData("cxPropFieldArr",void 0!==e.data?e.data:[]);let t=JSON.parse(JSON.stringify(store.peekRecord(this.data.parentModuleId,this.data.entityId)));for(var l=[],n=e.data?e.data.length:0,d=0;d<n;d++){var r={};r.id=e.data[d].id;var p={};p.id=e.data[d][this.data.connectedLookupApiName].id,p.name=e.data[d][this.data.connectedLookupApiName][this.data.display_field],p[this.data.display_field]=e.data[d][this.data.connectedLookupApiName][this.data.display_field],r[this.data.connectedLookupApiName]=p,l.push(r)}t[this.data.fieldApiName]=l,store.pushPayload(this.data.parentModuleId,t),Crm.renderDVLyteFlow(this.data.module)&&(void 0!==e.data&&e.data!==[]||void 0!==e.data?i[s].classList=[]:i[s].className="zcicn-minimize-window-empty zI3 zcicn-cssIcons zcicn_grey_mask dv_noDataSign pA")}for(s=0;s<a;s++){let e=t[s];if(e.id.endsWith(this.data.mxnDomId.split("_")[2])){e.component.checkLayoutrules(e.component.$node);break}}}commonUtils.showHideLoadingDiv(!1)}.bind(this))},LookupRecords:function(e,t){commonUtils.showHideLoadingDiv(!0),store.triggerAction("entity","mass_update",{version:"2.2",method:"PUT",module:this.data.moduleApiName},null,"PUT",{data:e}).then(function(){this.AfterSave(e,t)}.bind(this),function(e){var a=JSON.parse(e.response).data;a instanceof Array&&"FILTER_CRITERIA_NOT_SATISFIED"===a[0].code?this.setData("errormessage",I18n.getMsg("crm.lookupfilter.relatedList.errormsg",[$ESAPI.encoder().encodeForHTML(this.data.entityName),$ESAPI.encoder().encodeForHTML(this.data.fieldLabel),$ESAPI.encoder().encodeForHTML(this.data.module)]).replace("''","'")):(t?this.setData("errorHeading",I18n.getMsg("crm.mxnlookup.select",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)])):this.setData("errorHeading",I18n.getMsg("crm.mxnlookup.remove.title",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)])),this.setData("errormessage",I18n.getMsg("crm.mxnlookup.lookuprel.permissiondeniedwarning.new",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural),"",$ESAPI.encoder().encodeForHTML(Crm.appName)]))),this.setData("type","error"),this.setData("showAlert",!0),this.setData("loader",!1),commonUtils.showHideLoadingDiv(!1)}.bind(this))},lookupRemoveAll:function(){var e={lookuprel:!0,relatedlist:!0,link:"edit",fldName:this.data.relatedListId,fldId:this.data.fieldId,parentModule:this.data.parentModule,module:this.data.parentModule,searchmodule:this.data.module,entityId:this.data.entityId,mlaction:"remove",unselectedid:"all",select:!0,entityname:this.data.entityName,parentColumn:this.data.fieldColumn};store.findAll("dummy",e,!1,!1,{url:Crm.getCrmBasePath()+"/Search.do",method:"POST"}),this.setData("showUnassignAllPopup",!1),this.setData("showUnassignPopup",!1),this.setData("unassigncount","0"),this.setData("showpopup",!1),commonUtils.showHideLoadingDiv(!1),this.setData("type","info"),this.setData("errorHeading",I18n.getMsg("crm.mxnlookup.removeall.title",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)])),this.setData("errormessage",I18n.getMsg("crm.mxnlookup.lookuprel.removeall.scheduled.msg",[$ESAPI.encoder().encodeForHTML(this.data.modulelableplural)])),this.setData("showAlert",!0)},findLookupName:function(e,t){for(var a=e.length,i=0;i<a;i++){var o;if(this.data.isLookUp&&133===e[i].ui_type&&e[i].lookup.id===t)return this.data.fieldApiName=e[i].api_name,this.data.fieldLabel=e[i].field_label,this.data.fieldColumn=e[i].column_name,this.data.fieldId=e[i].id,(o=[]).push(e[i].column_name),void this.setData("preventFieldForFilter",o);if(!this.data.isLookUp&&444===e[i].ui_type&&e[i].multiselectlookup.connectedfield_apiname===t&&e[i].multiselectlookup.connected_module.api_name===this.data.parentModuleApiName)return this.data.fieldApiName=e[i].multiselectlookup.connectedfield_apiname,this.data.connectedFieldApiName=e[i].api_name,this.data.lookupApiName=e[i].multiselectlookup.connectedlookup_apiname,this.data.connectedLookupApiName=e[i].multiselectlookup.lookup_apiname,this.data.connectedFieldId=e[i].id,this.data.fieldColumn=e[i].column_name,(o=[]).push(e[i].column_name),e[i].column_name.endsWith("X")?o.push(e[i].column_name.substring(0,e[i].column_name.length-1)):o.push(e[i].column_name+"X"),void this.setData("preventFieldForFilter",o)}},preventField:function(){var e=["KEYWORDID","ADID","GADCONFIGID","ADGROUPID","VERSION","TOTALTIME","COMMENTCONTENTS","PARTICIPANTID","ISCALLBILLABLE","CHECKINLONGITUDE","CHECKINLATITUDE","PUBLISHED","PRODUCTDETAILS","PREDICTIONSCORE","ACCOUNTCF501","ZCAMPAIGNID","ISCTICALL","BEST_TIME","ISDUPLICATE","ISAPPROVED","CONVERTEDDATE","CONVERTED"];if("Appointments"===this.data.module)e=e.concat(crmConstants.appointmentsHiddenFieldColName);else if("Services"===this.data.module)e=e.concat(crmConstants.serviceHiddenFieldColName);else if("Visits"===this.data.module)e=e.concat(["SEID","NOOFPAGES"]);else if(crmTab.isOrchestrationModule(this.data.module)||this.data.module.indexOf("PathFinder")>-1)e=e.concat(["P_MODULE","PATH","TRIGGERID","ORCHESTRATIONID"]);else if("Messages"===this.data.module)e=e.concat(["HASATTACHMENTS","SMCREATORID","CREATEDTIME","SEID","LAST_MESSAGE","MESSAGECHANNELID","MESSAGE_SERVICE","MOBILENUMBER","MODIFIEDBY","MODIFIEDTIME","CONVERSATION_STATUS","SEMODULE"]);else if("Tasks"===this.data.module){e=e.concat(["SENDNOTIFICATION","REMINDAT"])}else if(Crm.isInventoryModule(this.data.module)){e=e.concat(["DISCOUNT_TYPE","DISCOUNT_PERCENTAGE"])}for(var t=this.data.filterList,a=t.length,i=0;i<a;i++)"userlookup"!==t[i].data_type&&"ownerlookup"!==t[i].data_type||(t[i].maxCount=3);this.setData("filterList",t);var o=crmTab.isOrchestrationModule(this.data.module)||this.data.module.indexOf("PathFinder")>-1;t.filter((function(t){("id"===t.api_name&&!o||0===t.show_type&&"FULLNAME"!==t.column_name&&"PROCESSINGBASIS"!==t.column_name&&"CONSENTID"!==t.column_name&&"SE_STATUS"!==t.column_name)&&(e=e.concat(t.column_name))})),this.setData("preventFieldForFilter",this.data.preventFieldForFilter.concat(e))},refreshRelatedList:function(e){if(!Crm.userDetails.isRelatedListLyteEnabled){var t={};t.id=this.data.entityId,t.rid=this.data.relatedListId;var a=crmRelatedList.EachModuleData[this.data.relatedListId];a&&(t.pname=a.name),t.actModule=this.data.parentModule,t.module=this.data.parentModule,t.actId=this.data.entityId,t.isSortRequest=!1,(this.data.isQuickCreate||this.data.isDirectField||this.data.isRelatedList)&&crmRelatedList.ajaxReq(t)}Lyte.triggerEvent("relatedList",{id:this.data.relatedListId,module:this.data.module,refreshTemplate:!!e}),"detail"!==Lyte.Router.getRouteInstance().routeName&&"canvas"!==Lyte.Router.getRouteInstance().routeName||this.data.isLookUp||this.updateMXNValue()},fetchModuleData:function(e){return store.findRecord("module",e)},fetchFeatureLimit:function(e){"Bundles"===this.data.parentModule&&e.push(store.findAll("dummy",{},!1,!1,{url:"/crm/v8/__features?api_names=Bundle_Product_Relations__s"}))},featchRelatedListMeata:function(){var e={};return e.module=this.data.parentModuleApiName,e.include_inner_details="fields.ui_type,fields.lookup,fields.formula,fields.rollup_summary,fields.field_label,fields.pick_list_values,fields.separator,fields.decimal_place",void 0!==this.data.layoutId&&(e.layout_id=this.data.layoutId.split(";")[0]),store.findRecord("related_list",this.data.relatedListId,e)},resetColumnSize:function(){var e=$L(this.data.isQuickCreate?".msQuickCreate":".msNormalPopup").find(".lyteExpOriginalTable");e.css("width","");var t=e[0].getElementsByTagName("lyte-exptable-th"),a=(renderingUtils.windowOuterWidth-625)/this.data.tableFields.length>200?(renderingUtils.windowOuterWidth-625)/this.data.tableFields.length:200;t.forEach(function(e){var t=$L(e);"enable"===t[0].getAttribute("resize")&&t.css("width",a+"px")}.bind(this)),this.setData("resetOption",!0)},showUnassigPopup:function(){this.setData("assignpage",!1),this.setData("confirmpage",!1),this.setData("unassignpage",!0)},showAssigPopup:function(){this.setData("assignpage",!0),this.setData("confirmpage",!1),this.setData("unassignpage",!1)},showConfirmPopup:function(){this.setData("assignpage",!1),this.setData("confirmpage",!0),this.setData("unassignpage",!1)},constractFieldData:function(e){var t,a="";if(t=this.data.isQuickCreate||this.data.isDirectField?this.data.mxnDomId:document.querySelector('[data-fieldid="'+this.data.fieldId+'"]').id,e.meta){var i=e.meta.count,o=this.data.connectedLookupApiName;if(i){var s=void 0===e.data[0][o][this.data.display_field]?"Last_Name":this.data.display_field;a=1===i?e.data[0][o][s]:2===i?e.data[0][o][s]+", "+e.data[1][o][s]:e.data[0][o][s]+", "+e.data[1][o][s]+".. & "+I18n.getMsg("crm.label.More")}}this.data.isQuickCreate?(this.mxnIdDom().val(a),CFRExec.setValue(t.split("_")[2],a,CFRExec.OPERATIONCONSTANT.QUICK_CREATE),CFRExec.isColTriggerLayoutRule&&CFRExec.evalRules("quick_create",!0)):($L("#"+t).val(a),this.invokeLayoutRule())},addSelectedStyle:function(){for(var e=$L(this.data.isQuickCreate?".msQuickCreate":".msNormalPopup").find("crux-table-component .lyteExpTableRowGroup lyte-checkbox"),t=e.length,a=0;a<t;a++){var i=e[a].closest("lyte-exptable-tr");"customCheckBoxChecked"===e[a].ltProp("class")&&i.classList.add("listViewRowSelected"),e[a].ltProp("id")===this.data.recentlyCreatedRcordId&&i.classList.add("listTableHover")}this.enablecheckallbutton(e),this.resetColumnSize()},enablecheckallbutton:function(e){for(var t=e.length,a=!1,i=!0,o=!0,s=0;s<t;s++)e[s].querySelector("span").classList.contains("customCheckBox")?(i=!1,o=!1):e[s].querySelector("span").classList.contains("customCheckBoxChecked")&&(a=!0,o=!1);this.setData("selectAllBox",o?"customCheckBoxDisabled vVIm":i?"customCheckBoxChecked":a?"partialselect":"customCheckBox")},generateFilter:function(e,t,a){var i={};if("0"!==a&&""!==a){var o=a.split(",");i.comparator=1===o.length?"confirm"===t?"equal":"not_equal":"confirm"===t?"in":"not_in",i.field={api_name:"id"},i.value=1===o.length?o[0]:o}var s={};this.data.searchValue.length>0&&(s.comparator="contains",s.field={api_name:this.data.display_field},s.value=this.data.searchValue);var l,n={};if(this.data.filters&&!_.isEmpty(this.data.filters)&&(n=this.data.filters),"unassign"===t){var d=Lyte.Router.getRouteInstance(),r=d&&"canvas"===d.routeName;const t=Lyte.registeredMixins["crm-create-init-mixin"].getLyteCreateComponentForCscript();var p=!1;if(r){var c=store.peekRecord("field",this.data.fieldId).criteria;c&&(l=c.criteria,p=c&&c.config&&c.config.filterOnSearch)}else if(t){const e=t.component.data.moduleData.fields.find((e=>e.id===this.data.fieldId));l=e&&e.$.get("criteria")?e.$.get("criteria").criteria:null,p=e&&e.$.get("criteria")&&e.$.get("criteria").config&&e.$.get("criteria").config.filterOnSearch}else{let e=$("#"+this.data.mxnDomId);const t=e.data&&e.data();l=t&&t.criteria?t.criteria.criteria:null,p=t&&t.criteria&&t.criteria.filterOnSearch}this.data.onsearch&&!p&&(l=void 0),l&&(e.cscript_filter=l)}var u={};u=this.concatFilter(u,i),"getvalue"!==t&&(u=this.concatFilter(u,s),u=this.concatFilter(u,n),this.data.cross_filters&&!_.isEmpty(this.data.cross_filters)&&(e.cross_filters=this.data.cross_filters)),_.isEmpty(u)||(e.filters=u)},concatFilter:function(e,t){if(_.isEmpty(t))return e;if(_.isEmpty(e))e=t;else if(e.group_operator)t.group_operator?Array.prototype.push.apply(e.group,t.group):e.group.push(t);else{var a={},i=[];i.push(e),t.group_operator?Array.prototype.push.apply(i,t.group):i.push(t),a.group=i,a.group_operator="AND",e=a}return e},convertToParentId:function(e){if("0"===e||""===e)return e;var t=e.split(","),a="";return t.forEach(function(e){""!==a&&(a+=",");var t=void 0===this.data.linkingModuleIdVsparentModuleId[e]?e:this.data.linkingModuleIdVsparentModuleId[e];a+=t}.bind(this)),a},constractFieldsParam:function(){for(var e="",t="confirm"===this.data.action?this.data.selectFields:this.data.tableFields,a=t.length,i=0;i<a;i++)"assign"!==this.data.action&&"MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&["Product_Quantity","List_Price","Total"].includes(t[i].api_name)||(e=""===e?t[i].api_name:e+","+t[i].api_name);a=this.data.defaultSelectFields.length;for(i=0;i<a;i++)e=this.data.isLookUp||"unassign"===this.data.action?e+","+this.data.defaultSelectFields[i]:e+","+this.data.connectedLookupApiName+"."+this.data.defaultSelectFields[i];return e},convertarraytocsv:function(e){for(var t="",a=e.length,i=0;i<a;i++)t=""!==t?t+","+e[i]:e[i];return t},getClassForLVData:function(e){var t=e.ui_type;return"SMOWNERID"===e.column_name||"SMCREATORID"===e.column_name||"MODIFIEDBY"===e.column_name?"lv_data_textfield lv_data_username":36===t||77===t||116===t&&"currency"===e.formula.return_type?"lv_data_currency alignRight":Handlebars.helpers.getClassForLVData(e,void 0,void 0,"list")},resetComponentData:function(e){this.data.filterCri={},this.data.filters={},this.data.cross_filters={},this.data.page_count=1,this.data.searchValue="",this.data.isFilterApplied=!1,this.data.isApplyFilter=!1,this.data.selectRange="0",this.data.lookupLimit="0",this.data.filterLookupId=[],this.setData("action",e),this.setData("loader",!0),this.renderPopup()},tempAdd:function(e,t){var a=e.parentElement,i=a.parentElement.parentElement.id;if(!this.data[t].includes(i)&&("0"!==this.data[t]&&""!==this.data[t]?this.setData(t,this.data[t]+","+i):this.setData(t,i),"LinkingModuleBundleRel"===this.data.linkingModule)){var o=a.component.data&&a.component.data.indexVal?a.component.data.indexVal:0,s=this.data.resp.data[o];this.data.bundleMxnProductIdVsQty[i]=s.Product_Quantity?s.Product_Quantity:1}},tempRemove:function(e,t){var a=e.parentElement.parentElement.parentElement.id,i=this.data[t].split(",");i.removeFirstOccurenceOfElement(a);var o=this.convertarraytocsv(i);this.getData(t)===o&&(this.data[t]="1"),this.setData(t,this.convertarraytocsv(i)),"LinkingModuleBundleRel"===this.data.linkingModule&&this.data.bundleMxnProductIdVsQty&&this.data.bundleMxnProductIdVsQty[a]&&delete this.data.bundleMxnProductIdVsQty[a]},showPermissionDenid:function(){this.setData("type","error"),this.setData("errorHeading",I18n.getMsg("crm.social.setup.denied")),this.setData("errormessage",I18n.getMsg("crm.security.error")),this.setData("showAlert",!0)},freezeBackGroundQuickCreate:function(){$("#freezeBackGround").css({"z-index":"250",display:"block"}),$L("#searchCreateDiv").trapFocus()},disableOrShowHoverCard:function(e){$L(this.data.isQuickCreate?".msQuickCreate":".msNormalPopup").find("#multiSelectSearchHvrcrd")[0].ltProp("show",e)},deletePopup:function(){if(LytePopup.components.length>0)for(var e=LytePopup.components,t=e.length,a=0;a<t;a++)e[a].$node&&e[a].$node.id&&"selectpop"===e[a].$node.id&&e[a].setData("ltPropBindToBody",!1)},updateMxnModuleSpecificData:function(e,t){if("MXNDUMMYCOLUMNBUNDLE"===this.data.fieldColumn&&moduleRecordMapping){var a=e=>parseFloat(parseFloat(e).toFixed(7)),i=moduleRecordMapping.Products;if(t&&"edit"===t){let t=this.data.linkingModuleIdVsparentModuleId[e.id],o=store.peekRecord(i.id,t);e.Product_Quantity=e.Product_Quantity&&a(e.Product_Quantity)?a(e.Product_Quantity):1,o&&o.$.set("Product_Quantity",e.Product_Quantity)}else if(i&&this.data.parentModuleId!==i.id){let t=store.peekRecord(this.data.moduleId,e.Product.id);(t=store.peekRecord(this.data.moduleId,e.Product.id))&&(e.Product_Quantity=t.Product_Quantity&&a(t.Product_Quantity)?a(t.Product_Quantity):1,e.List_Price=t.List_Price?t.List_Price:0,e.Total=e.List_Price*e.Product_Quantity,this.data.bundleMxnProductIdVsQty[e.Product.id]=e.Product_Quantity,t.$.set("Product_Quantity",e.Product_Quantity))}else{e.Product_Quantity=1;var o=store.peekRecord(this.data.parentModuleId,this.data.entityId);if(o&&o.$formatted_currency){var s=o.$formatted_currency.Unit_Price;e.List_Price=isNaN(parseFloat(s))?0:parseFloat(s)}}}},calculatePoductQuantityForBundles:function(e,t,a,i){var o=e?this.data.selectedids:t?i:this.data.remove_tempIds.split(","),s=Object.keys(o).length,l=0,n=e=>parseFloat(e.toFixed(7));Object.keys(o).forEach((a=>{var i=this.data.linkingModuleIdVsparentModuleId[o[a]]?this.data.linkingModuleIdVsparentModuleId[o[a]]:o[a],s=o[a];if(t)l+=o[a].Product_Quantity,l-=o[a].Old_Product_Quantity;else if(e){var d=(r=store.peekRecord(this.data.moduleId,i)&&store.peekRecord(this.data.moduleId,i).Product_Quantity?store.peekRecord(this.data.moduleId,i):store.peekRecord(this.data.moduleId,s))&&r.Product_Quantity?n(r.Product_Quantity):1;l+=d}else if(this.data.unassignpage){var r;d=(r=store.peekRecord(this.data.linkingModuleId,i)&&store.peekRecord(this.data.linkingModuleId,i).Product_Quantity?store.peekRecord(this.data.linkingModuleId,i):store.peekRecord(this.data.linkingModuleId,s))&&r.Product_Quantity?r.Product_Quantity:1;l+=d}})),s=isNaN(parseFloat(s))?0:parseFloat(s),l=isNaN(parseFloat(n(l)))?0:parseFloat(n(l)),a&&this.updateBundlesModuleDom(s,l,e,t,n)},updateBundlesModuleDom(e,t,a,i,o){if(this.data.isRelatedList||this.data.isDirectField)if(this.data.isRelatedList){var s=0,l=0;if("canvas"===Lyte.Router.getRouteInstance().routeName){var n=$L("crm-detailview-canvas")[0],d=(m=n?n.component:null).getData("record");s=isNaN(parseFloat(d.Total_Item_Count))?0:parseFloat(d.Total_Item_Count),l=isNaN(parseFloat(d.Unique_Item_Count))?0:parseFloat(d.Unique_Item_Count);var r=store.peekRecord(moduleRecordMapping.Bundles.id,this.data.entityId)?store.peekRecord(moduleRecordMapping.Bundles.id,this.data.entityId):null;a||i?(s=o(t+s),l=i?l:e+l):(l-=e,s=o(s-t)),r.$.set("Total_Item_Count",s),r.$.set("Unique_Item_Count",l),Lyte.objectUtils(d,"add","Total_Item_Count",s),Lyte.objectUtils(d,"add","Unique_Item_Count",l)}else{var p=document.querySelector("[id='headervalue_UNIQUE_ITEM_COUNT']"),c=document.querySelector("[id='value_UNIQUE_ITEM_COUNT']"),u=document.querySelector("[id='value_TOTAL_ITEM_COUNT']");p&&c&&u&&(s=isNaN(parseFloat(u.textContent))?0:parseFloat(u.textContent),l=isNaN(parseFloat(p.textContent))?0:parseFloat(p.textContent),a||i?(p.textContent=i?l:e+l,c.textContent=i?l:e+l,u.textContent=o(t+s)):(p.textContent=l-e,c.textContent=l-e,u.textContent=o(s-t)))}}else{var m,h=$L("crm-canvas-form")[0];if(m=h?h.component:null){if((v=m.getData("record")).Unique_Item_Count=isNaN(parseFloat(v.Unique_Item_Count))?0:parseFloat(v.Unique_Item_Count),v.Total_Item_Count=isNaN(o(parseFloat(v.Total_Item_Count)))?0:o(parseFloat(v.Total_Item_Count)),a||i){v.Unique_Item_Count=i?v.Unique_Item_Count:v.Unique_Item_Count+e;var y=o(v.Total_Item_Count)+o(t);v.Total_Item_Count=o(y)}else v.Unique_Item_Count>0&&v.Total_Item_Count>0&&(v.Unique_Item_Count=v.Unique_Item_Count-e,v.Total_Item_Count=o(v.Total_Item_Count-t));var f=store.peekRecord("layout",m.data.layoutId);if(f&&f.fields){var g=f.fields.filter((function(e){if("Unique_Item_Count"===e.api_name||"Total_Item_Count"===e.api_name)return e}));g&&g.forEach((e=>{if(e&&e.column_name){var t=$(".fieldupdate_"+e.column_name);t&&t.length&&(t=t.length&&(t[1]?t[1]:t[0]),"Unique_Item_Count"===e.api_name?t.setData("cxPropValue",v.Unique_Item_Count):"Total_Item_Count"===e.api_name&&t.setData("cxPropValue",v.Total_Item_Count))}}))}}else{var b=this.mxnIdDom().data(),_=isNaN(parseFloat(b.unique_item_count))?0:parseFloat(b.unique_item_count),x=isNaN(parseFloat(b.total_item_count))?0:parseFloat(b.total_item_count);a||i?(_=i?x:x+e,x=o(x+t)):(_-=e,x=o(x-t)),this.mxnIdDom().data({unique_item_count:_,total_item_count:x})}}else{var v,L=document.querySelector('[fld-id="'+document.querySelector('[data-fieldid="'+$("crm-multi-selection-popup")[0].component.data.fieldId+'"]').id+'"]').component.$node;(v=L.component.data.dataBind).$.set("Unique_Item_Count",isNaN(parseFloat(L.component.data.dataBind.Unique_Item_Count))?0:parseFloat(L.component.data.dataBind.Unique_Item_Count)),v.Total_Item_Count=isNaN(o(parseFloat(L.component.data.dataBind.Total_Item_Count)))?0:o(parseFloat(L.component.data.dataBind.Total_Item_Count));var I=document.querySelector("[id='Crm_"+this.data.parentModule+"_UNIQUE_ITEM_COUNT_LInput']"),k=document.querySelector("[id='Crm_"+this.data.parentModule+"_TOTAL_ITEM_COUNT_LInput']");if(a||i){v.$.set("Unique_Item_Count",i?v.Unique_Item_Count:v.Unique_Item_Count+e);var q=v.Unique_Item_Count>0?o(v.Total_Item_Count)+o(t):0;v.Total_Item_Count=o(q),Lyte.objectUtils(v,"add","Total_Item_Count",o(q))}else if(v.Unique_Item_Count>0&&v.Total_Item_Count>0){v.$.set("Unique_Item_Count",v.Unique_Item_Count-e);q=v.Unique_Item_Count>0?o(v.Total_Item_Count-t):0;v.Total_Item_Count=q,Lyte.objectUtils(v,"add","Total_Item_Count",q)}I&&k&&(I.value=v.Unique_Item_Count,k.value=o(v.Total_Item_Count))}},showHideQuickEditDiv:function(e,t){if(t){$L("#zcpq_bundle_qty_view_"+e).addClass("hide"),$L("#zcpq_bundle_qty_edit_"+e).removeClass("hide");let t=document.getElementById("prod_quantity_"+e);setTimeout((function(){t.focus()}),100)}else $L("#zcpq_bundle_qty_view_"+e).removeClass("hide"),$L("#zcpq_bundle_qty_edit_"+e).addClass("hide")},populateBundleMxnAssignedData:function(e){var t=1,a=isNaN(parseFloat(e.List_Price))?e.hasOwnProperty("Product")&&!isNaN(parseFloat(e.Product.Unit_Price))?parseFloat(e.Product.Unit_Price):0:parseFloat(e.List_Price),i=0;return e[this.data.connectedLookupApiName].Product_Quantity?i=(t=isNaN(parseFloat(e[this.data.connectedLookupApiName].Product_Quantity))?0:parseFloat(e[this.data.connectedLookupApiName].Product_Quantity))*a:e.Product_Quantity&&(i=(t=isNaN(parseFloat(e.Product_Quantity))?1:parseFloat(e.Product_Quantity))*a),e.Product_Quantity=t,e.List_Price=a,e.Total=i,e},updateBundleMxnDom:function(e,t){var a=document.querySelector(this.data.isQuickCreate?".msQuickCreate":".msNormalPopup").querySelector("crux-table-component").querySelector('[id="'+t+'"');a&&a.querySelector(".Total").querySelector("crux-number-component").cxProp("value",e)}});
