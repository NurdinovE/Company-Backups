Lyte.Component.register("crm-detailview-fields",{_template:'<template tag-name="crm-detailview-fields"><template is="if" value="{{lyteViewPort}}"><template case="true"><dummy-port-element></dummy-port-element> <span class="{{viewportClass}}" style="{{viewportStyleStr}}">{{viewportvalue}}</span> <template is="if" value="{{viewportNonLinkSecondaryValue}}"><template case="true"><span>{{viewportNonLinkSecondaryValue}}</span></template></template> <template is="if" value="{{booleanToolTip}}"><template case="true"> <span lt-prop-title="{{booleanToolTip}}" class="zcicncss-info zcicn-cssIcons zcicncss13 zcicn_grey_mask pA mAuto cP cxInfoIcon mL3"></span> </template></template> <template is="if" value="{{viewportChildValue}}"><template case="true"> <span class="cxViewUserTimestamp">{{viewportChildValue}}</span> </template></template> <dummy-port-element></dummy-port-element></template><template case="false"> <div id="{{field.$ids.value_containerId}}" class="dv_fields_wrap {{if(ifEquals(expHandlers(field.column_name,\'===\',\'APPOINTMENTDATEANDTIME\'),true),\'dF\',\'\')}} {{addFlexClassForEmailFields(field.api_name,ajaxEditMode)}}"> <template is="switch" value="{{field.component_data_type}}"><template case="text"> <template is="if" value="{{expHandlers(field.ui_type,\'===\',99)}}"><template case="true"> <crm-comment-information id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-field="{{field}}" record="{{record}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}"></crm-comment-information> </template><template case="false"> <crux-text-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{getFieldViewValue(field,record,module,true,record[field.api_name])}}" cx-prop-maxlength="{{field.length}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode,field,record)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-autocomplete-options="{{autoCompleteOptions}}" cx-prop-popover-wrapper-class="zclookupTooltip" fetch-data="{{method(\'fetchData\')}}" cx-prop-show-hide-tooltip="{{expHandlers(field.column_name,\'===\',\'COMPANY\')}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-text-component> </template></template> </template><template case="twitter"> <crux-twitter-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-maxlength="{{field.length}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-twitter-component> </template><template case="skype"> <crux-text-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-maxlength="{{field.length}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}} crmLinkColor" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" on-value-clicked="{{method(\'skypeValueClickHandler\')}}" cx-prop-view-yield-suffix="{{if(record[field.api_name],true,false)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> <template is="yield" yield-name="viewYieldSuffix"> <span onclick="{{action(&quot;openskype&quot;,event)}}"><a id="skypeIconAnchor" href="skype:{{record[field.api_name]}}?call"> <crmutil-icon icon-name="skype" icon-class="zcicn-skype"></crmutil-icon></a> </span> </template> </crux-text-component> </template><template case="autonumber"> <crux-text-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"></crux-text-component> </template><template case="datetime"> <crux-date-time-component id="{{field.$ids.valueId}}" cx-prop-aria="{{isAccessibilityConfigSupported}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" on-calendar-open="{{method(\'dropdownOpening\',true)}}" on-calendar-close="{{method(\'dropdownOpening\',false)}}" cx-prop-prevent-selection="true" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-datetime-in-user-pattern="true" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-date-time-component> <template is="if" value="{{expHandlers(expHandlers(expHandlers(is_bc_sec,\'!\'),\'&amp;&amp;\',expHandlers(field.column_name,\'===\',\'APPOINTMENTDATEANDTIME\')),\'&amp;&amp;\',record.Remind_At)}}"><template case="true"> <span id="iconReminder1" class="cP multpl_remainList fr mL60"> <crmutil-icon icon-name="alarm" icon-class="zcicn-alarm zcicn_grey zcicn16 " onmouseover="{{action(\'setReminderList\')}}" onmouseout="{{action(\'hideReminderList\')}}"></crmutil-icon> </span> </template></template></template><template case="date"> <crux-date-component id="{{field.$ids.valueId}}" cx-prop-aria="{{isAccessibilityConfigSupported}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" on-calendar-open="{{method(\'dropdownOpening\',true)}}" on-calendar-close="{{method(\'dropdownOpening\',false)}}" cx-prop-prevent-selection="true" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-date-in-user-pattern="true"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-date-component> </template><template case="email"> <crux-email-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" cx-prop-maxlength="{{field.length}}" class="{{if(ajaxEditMode,\'\',\'dIB\')}} {{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-email-component> <template is="if" value="{{expHandlers(expHandlers(ajaxEditMode,\'!\'),\'&amp;&amp;\',expHandlers(objectLen(email_unsubscribed_info),\'>\',0))}}"><template case="true"> <span data-zcqa="ebm_block_icon_{{field.api_name}}" lyte-hovercard="true" id="bounceicon_{{field.$ids.value_containerId}}" class="zcicncss-alert-filled zcicn-cssIcons zcicn_sandal_mask cP emailUnblocking {{field.api_name}} mL3 vaM uline1 fShrink0" onmouseenter="{{action(\'showEmailUnsubsInfo\',field.$ids.value_containerId)}}" onmouseleave="{{action(\'hideEmailUnsubsInfo\',field.$ids.value_containerId)}}"></span> <lyte-hovercard id="bounceicon_{{field.$ids.value_containerId}}_hovercard" lt-prop-max-width="500px" lt-prop-scrollable="true" lt-prop-popover-wrapper-class="bmHardBouncedWarningPopoverWrapper" class="bmHardBouncedWarningPopover" lt-prop-origin-elem="#bounceicon_{{field.$ids.value_containerId}}"> <template is="registerYield" yield-name="hoverCardYield"> <lyte-hovercard-content class="bmPopoverContent crm-base-font-size p15"> <div class="crm-font-bold mB10 crmBaseColor flexAlignCenter"> <span>{{getI18n(\'crm.unsubscription.reason.tooltip\')}}</span> </div> <div class="crmParagraphColor lh20"> <div>{{getI18n(\'crm.unsubscribed.mode\')}} : {{email_unsubscribed_info.unsubscribed_mode}}</div> <div>{{getI18n(\'crm.unsubscribed.time\')}} : {{formatISODate(email_unsubscribed_info.unsubscribed_time)}}</div> </div> </lyte-hovercard-content> </template> </lyte-hovercard> </template><template case="false"> <span data-zcqa="ebm_block_icon_{{field.api_name}}" lyte-hovercard="true" onmouseenter="EmailUnblocking.unblockEmailHelper(event,this,\'detail\')" onmouseleave="EmailUnblocking.emailUnblockingMouseOut(this)" id="bounceicon_{{field.api_name}}" class="zcicncss-alert-filled zcicn-cssIcons zcicn_sandal_mask cP emailUnblocking {{field.api_name}} {{if(ajaxEditMode,\'emailBounceIconHide\',\'\')}} {{addHideClassForEmailBlock(field)}} mL3 vaM uline1 fShrink0"></span> </template></template> </template><template case="currency"> <crux-number-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-formatted-currency="{{record.$formatted_currency[field.api_name]}}" cx-prop-home-currency="{{record.$home_converted_currency[field.api_name]}}" cx-prop-iso-code="{{record.Currency}}" cx-prop-exchange-rate="{{record.Exchange_Rate}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-show-calculator="true" cx-prop-maxlength="{{field.length}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-boundary="{{cx_prop_boundary}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-number-component> </template><template case="double"></template><template case="decimal"></template><template case="integer"></template><template case="bigint"></template><template case="longinteger"><template is="if" value="{{expHandlers(field.ui_type,\'===\',80)}}"><template case="true"> <crux-picklist-component id="{{field.$ids.valueId}}" cx-prop-id="serviceDuration" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-from="view" cx-prop-value="{{record[field.api_name]}}" class="vaT {{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-is-color-code-enabled="{{field.enable_colour_code}}" cx-prop-type="single" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-footer-yield="true" cx-prop-picklist-values="{{lbind(serviceDuration)}}" cx-prop-error-yield="true" on-before-show="{{method(\'dropdownOpening\',true)}}" on-hide="{{method(\'dropdownOpening\',false)}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> <template is="yield" yield-name="footer"> <span class="customDuration crmLinkColor cP pL25 pR25 pT6 pB6 dF" onclick="{{action(&quot;setCustomDuration&quot;)}}">{{getI18n(\'Custom\')}}</span> </template> </crux-picklist-component> </template><template case="false"> <crux-number-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{getFieldViewValue(field,record,module,true,record[field.api_name])}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-maxlength="{{field.length}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-number-component> </template></template> </template><template case="boolean"> <div class="dv_boolean_comp_wrap {{if(expHandlers(ajaxEditMode,\'!\'),getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode,field),\'crmFormField p10 pT7 pB7\')}}"> <crux-boolean-component id="{{field.$ids.valueId}}" cx-prop-id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-view-info-tooltip="{{showBooleanToolTip(record,field)}}" on-before-unchecked="{{method(\'updateBooleanValue\',field)}}" cx-prop-display-text="{{isFormulaBooleanReturnTypeField(field)}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> <template is="registerYield" yield-name="viewInfoTooltipYield"> <span class="crm-small-font-size"> <div>{{getI18n(\'crm.unsubscribed.mode\')}} : {{record.Unsubscribed_Mode}} </div><div> {{getI18n(\'crm.unsubscribed.time\')}} : {{record.Unsubscribed_Time}} </div></span> </template> </crux-boolean-component> </div> <template is="if" value="{{expHandlers(field.column_name,\'===\',\'EMAILOPTOUT\')}}"><template case="true"> <lyte-popover lt-prop-origin-elem="#subvalue_EMAILOPTOUT lyte-checkbox" lt-prop-show="{{lbind(showUnsubsPopOver)}}" lt-prop-type="callout" lt-prop-show-close-button="false" lt-prop-close-on-body-click="false"> <template is="registerYield" yield-name="popover"> <div data-zcqa="unsubscription_info"> <lyte-popover-content class="p15"> <div><span class="crm-font-bold">{{record.Full_Name}}</span> {{getI18n(\'optout.confirm.alert1\')}}</div> <div class="pT5">{{getI18n(\'optout.confirm.alert2\')}}</div> </lyte-popover-content> <lyte-popover-footer class="right pB15 pL15 pR15 pT0"> <lyte-button lt-prop-appearance="default" data-zcqa="optout_cancel" onclick="{{action(\'closeUnsubsPopover\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.button.cancel\')}}</template> </lyte-button> <lyte-button class="mL0" lt-prop-appearance="primary" data-zcqa="optout_proceed" onclick="{{action(\'proceedResubscription\')}}"> <template is="registerYield" yield-name="text">{{getI18n(\'crm.button.yesproceed\')}}</template> </lyte-button> </lyte-popover-footer> </div> </template> </lyte-popover> </template></template> </template><template case="picklist"> <crux-picklist-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="vaT {{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-is-color-code-enabled="{{field.enable_colour_code}}" cx-prop-from="view" cx-prop-type="single" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-picklist-values="{{field_and_options[field.api_name]}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" on-before-show="{{method(\'dropdownOpening\',true)}}" on-hide="{{method(\'dropdownOpening\',false)}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-picklist-component> </template><template case="multiselectpicklist"> <crux-picklist-component id="{{field.$ids.valueId}}" cx-prop-show-tooltip="false" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{getFormattedValueForCrux(field,record[field.api_name],record,module)}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-from="view" cx-prop-type="multisearch" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-picklist-values="{{field_and_options[field.api_name]}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" on-before-show="{{method(\'dropdownOpening\',true)}}" on-hide="{{method(\'dropdownOpening\',false)}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-picklist-component> </template><template case="userlookup"> <crux-user-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" on-value-change="{{method(\'onUserValueSelect\')}}" cx-prop-value="{{record[field.api_name]}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-filterable="false" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-searchable="true" cx-prop-filter-selected="ActiveUsers" cx-prop-type="single" cx-prop-query-param="{{meta_info.fieldvsQuery[field.api_name]}}" cx-prop-error-yield="true" cx-prop-user-search-criteria="{{cscript_properties[field.api_name].criteria}}" cx-prop-user-criteria="{{cscript_properties[field.api_name].userCriteria}}" cx-prop-show-close-icon="true" cx-prop-icon-class="{{field.$classes.icon}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-is-business-card="true" cx-prop-show-business-card="{{true}}" cx-prop-forced-fetch="{{isDynamicCriteriaInvolved(field)}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-user-component> </template><template case="ownerlookup"> <template is="if" value="{{ziaAssignedOwner}}"><template case="true"> <crmutil-icon icon-name="zia-logo" icon-class="zcicn-zia-logo zcicn_4a8de9 mL7 pT2" class="zRspacing"></crmutil-icon> </template></template> <crux-user-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-filterable="false" cx-prop-searchable="true" cx-prop-filter-selected="ActiveUsers" cx-prop-type="single" cx-prop-error-yield="true" cx-prop-date-value="{{getAffectedTimeValue(field,record,meta_info.fieldColumnNameMap)}}" cx-prop-user-time-zone="{{user_timezone}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-is-business-card="true" cx-prop-show-business-card="{{expHandlers(ziaAssignedOwner,\'!\')}}" onmouseover="{{action(\'showZiaReasoningCard\',event)}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-user-component> </template><template case="multiuserlookup"> <crux-user-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-filterable="false" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-max-limit="10" cx-prop-user-search-criteria="{{cscript_properties[field.api_name].criteria}}" cx-prop-user-criteria="{{cscript_properties[field.api_name].userCriteria}}" cx-prop-type="multiple" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-show-lookup-icon="false" cx-prop-no-user-label="{{getI18n(\'crm.label.selectusers\')}}" cx-prop-empty-data-message="{{getI18n(\'crm.search.users.selected.allusers\')}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-user-component> </template><template case="lookup"> <crux-lookup-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="dv-hd-multi-mod {{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-search-format="true" cx-prop-footer-yield="true" cx-prop-layout="{{layout_id}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{lookup_module}}&quot;,&quot;{{record[field.api_name].id}}&quot;]" cx-prop-show-bc="true" on-lookup-link-clicked="{{method(\'lookupClickHandler\')}}" cx-prop-module="{{lookup_module}}" cx-prop-target="{{openLinkTab}}" cx-prop-tooltip-show="false" cx-prop-icon-class="{{field.$classes.icon}}" cx-prop-hide-icon-for-view="true" fetch-module-data="{{method(\'fetchModuleData\',field)}}" fetch-records="{{method(\'fetchRecords\',field)}}" on-value-change="{{method(\'onLookupRecordSelect\')}}" on-before-dropdown-open="{{method(\'dropdownOpening\',true)}}" on-hide="{{method(\'dropdownOpening\',false)}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-create-yield="{{create_record_supported}}" cx-prop-parent-module="{{module}}" cx-prop-related-id="{{meta_info.fieldVsRelatedRecInfo[field.api_name].id}}" cx-prop-related-name="{{meta_info.fieldVsRelatedRecInfo[field.api_name].name}}" cx-prop-related-module-id="{{meta_info.fieldVsRelatedRecInfo[field.api_name].module_id}}" cx-prop-default-criteria="{{getDefaultCriteria(meta_info.fieldvsdefaultCriteria[field.api_name],cscript_properties[field.api_name])}}" cx-prop-related-record-data="{{meta_info.fieldVsRelatedRecords[field.api_name]}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" before-request-change-data="{{method(\'requestChangeData\')}}" cx-prop-call-allowed="false" cx-prop-dont-show-related-dropdown="{{if(expHandlers(field.column_name,\'==\',\'REPORTINGTOCONTACTID\'),\'true\',\'false\')}}" on-lookup-hover-fetch-bc-data="{{method(\'showBusiessCardLookup\')}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}" field="{{field}}" meta_info="{{meta_info}}" record="{{record}}"></crm-detailview-fields-error> </template> <template is="registerYield" yield-name="footer"> <template is="if" value="{{create_record_supported}}"><template case="true"> <div data-zcqa="AddNewRecord" class="alignLeft dropFooterList" onclick="{{action(&quot;openQuickCreateForm&quot;,true)}}"> <span id="lookupFldId_{{field.id}}" class="crmLinkColor dIB wbBreakAll">+ {{getI18n(\'crm.module.new\',getModuleSingularLabelbyApiName(field.lookup.module.api_name))}}</span> </div> </template></template> </template> <template is="yield" yield-name="createYield"> <template is="if" value="{{create_record_supported}}"><template case="true"> <lyte-button lt-prop-appearance="default" lt-prop-class="outlineprimaryflat mR0" onclick="{{action(&quot;openQuickCreateForm&quot;,false)}}" data-zcqa="btn_Lookup_CreateNewRecord"> <template is="registerYield" yield-name="text"> {{getI18nwithoutParamI18n(\'crm.module.new\',getModuleSingularLabelbyApiName(field.lookup.module.api_name))}} </template> </lyte-button> </template></template> </template> </crux-lookup-component> </template><template case="whatId"> <crux-lookup-component id="{{field.$ids.valueId}}" lyte-view-port="true" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="dv-hd-multi-mod {{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-search-format="true" cx-prop-footer-yield="true" cx-prop-layout="{{layout_id}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="{{getWhoWhatDynamicParams(record,field.api_name)}}" cx-prop-show-bc="true" on-before-show-business-card="{{method(\'show_lookup_tooltip_info\',field)}}" cx-prop-icon-class="{{field.$classes.icon}}" cx-prop-hide-icon-for-view="true" fetch-module-data="{{method(\'fetchModuleData\',field)}}" fetch-records="{{method(\'fetchRecords\',field)}}" on-value-change="{{method(\'onLookupRecordSelect\')}}" cx-prop-call-allowed="false" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-create-yield="{{create_record_supported}}" cx-prop-parent-module="{{module}}" cx-prop-related-id="{{meta_info.fieldVsRelatedRecInfo[field.api_name].id}}" cx-prop-related-name="{{meta_info.fieldVsRelatedRecInfo[field.api_name].name}}" cx-prop-related-module-id="{{meta_info.fieldVsRelatedRecInfo[field.api_name].module_id}}" cx-prop-default-criteria="{{getDefaultCriteria(meta_info.fieldvsdefaultCriteria[field.api_name],cscript_properties[field.api_name])}}" cx-prop-related-record-data="{{meta_info.fieldVsRelatedRecords[field.api_name]}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-lookup-component> </template><template case="multiselectlookup"> <crm-multi-lookup id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" data-key="subvalue{{field.id}}" cx-prop-field-arr="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-field-label="{{getMXNFieldLabel(field)}}" cx-prop-field="{{field}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"></crm-multi-lookup> </template><template case="imageupload"> <div class="{{if(ajaxEditMode,\'crmFormField dv_iu_wrap\')}}" tabindex="-1"> <crux-image-component cx-prop-from="view" cx-prop-ajax="{{attachmentUrl}}" cx-prop-type="multiple" cx-prop-validation-tooltip="{{visionToolTipForIU}}" cx-prop-id="label_{{field.column_name}}" cx-prop-field="{{field}}" cx-prop-value="{{imageUploadTrackingData}}" id="{{field.$ids.valueId}}" api-name="{{apiName}}" cx-prop-zcqa="{{field.$zcqa.valueZcqa}}" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-allowed-count="{{field.length}}" cx-prop-allowed-total-size="20 MB" cx-prop-progress-status-colours="{{chartImageTheme}}" cx-prop-modal-properties="{{wrapperClassImage}}" on-preview-close="{{method(\'onPreviewClose\',field)}}" on-file-success="{{method(\'setImageData\')}}" on-crop-success="{{method(\'onCropSuccessDV\')}}" on-remove="{{method(\'onImageChangeDV\')}}" on-edit="{{method(\'onImageChangeDV\')}}" cx-prop-readonly="{{if(expHandlers(meta_info.fieldvsEditType[field.api_name],\'===\',\'showEdit\'),\'false\',\'true\')}}" on-element-rendered="{{method(\'makeRequestForThumbnailDV\',field,this)}}" on-validation-image-click="{{method(\'onValidationImageClick\',field)}}" lyte-view-port="true" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}"> </crux-image-component> </div> <div id="zia-vision-popup"></div> </template><template case="fileupload"> <template is="if" value="{{expHandlers(field,\'&amp;&amp;\',expHandlers(field.api_name,\'===\',\'Call_Transcription__c\'))}}"><template case="true"> <crm-zia-call-transcription activity-id="{{record.id}}"></crm-zia-call-transcription> </template><template case="false"> <crux-file-upload-component id="{{field.$ids.valueId}}" cx-prop-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-options-type="{{if(isClientPortalAccount,\'local\',\'menu\')}}" cx-prop-placeholder="{{getI18n(\'crm.tpi.ctiapi.config.choosefile\')}}" cx-prop-id="cx_{{field.$ids.labelId}}" cx-prop-from="view" cx-prop-field="{{field}}" cx-prop-value="{{getFilesDataInCruxFormat(record[field.api_name])}}" show-preview="{{method(\'showPreview\')}}" cx-prop-options="{{optionsForFileUpload}}" cx-prop-file-unique-selector="unique_file_selector" on-remove-file="{{method(\'onRemoveFileClick\')}}" on-menu-click="{{method(\'onFileUploadOptionClick\',moduledataUicomp.module[0].api_name)}}" show-upload-modal="{{method(\'showAttachFilePopup\',moduledataUicomp.module[0].api_name)}}" cx-prop-file-limit="{{field.length}}" cx-prop-readonly="{{field.read_only}}" lyte-view-port="true" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}"> </crux-file-upload-component> </template></template> </template><template case="fax_phone"> <crux-phone-component cx-prop-call-allowed="false" id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-maxlength="{{field.length}}" cx-prop-phone-in-user-format="false" cx-prop-value="{{getFormattedValueForCrux(field,record[field.api_name],record,module)}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-phone-component> </template><template case="phone"> <crux-phone-component cx-prop-call-allowed="{{getGdprPhoneconsent(record)}}" cx-prop-entity-name="{{entity_name}}" id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-maxlength="{{field.length}}" cx-prop-value="{{getFormattedValueForCrux(field,record[field.api_name],record,module)}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}} dvPhoneCompZpbEnabled" cx-prop-layout="{{layout_id}}" cx-prop-module="{{module}}" cx-prop-entity-id="{{record.id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-phone-in-user-format="false" cx-prop-error-yield="true" cx-prop-enable-country-code="{{meta_info.phone_new_view}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-phone-component> </template><template case="website"> <crux-website-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-maxlength="{{field.length}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-website-component> </template><template case="textarea"> <crux-text-area-component id="{{field.$ids.valueId}}" cx-prop-line-clamp="7" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-maxlength="{{field.length}}" on-show-less="{{method(\'clickOnShowLess\',field)}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-text-area-component> </template><template case="richtext"> <crm-richtext-component id="{{field.$ids.valueId}}" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-save-close-icon-needed-in-maximize="true" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true" cx-prop-maxlength="{{field.length}}" cx-prop-is-editable="{{if(expHandlers(meta_info.fieldvsEditType[field.api_name],\'===\',\'showEdit\'),\'true\',\'false\')}}" cx-prop-from="view" cx-prop-view-max-needed="true" cx-prop-initial-focus-needed="true" is-rich-text-needed="true" on-show-less="{{method(\'clickOnShowLess\',field)}}" on-maximize-save="{{method(\'clickOnMaximizeSave\')}}" on-maximize-close="{{method(\'clickOnMaximizeClose\')}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crm-richtext-component> </template><template case="layout"> <crux-layout-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="crm_dv_layout_field w100_per dB {{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-error-yield="true"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-layout-component> </template><template case="multi_module_lookup"> <crux-lookup-component class="dv-hd-multi-mod" id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" cx-prop-layout="{{layout_id}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{lookup_module}}&quot;,&quot;{{record[field.api_name].id}}&quot;]" cx-prop-module="{{lookup_module}}" cx-prop-show-bc="true" on-before-show-business-card="{{method(\'show_lookup_tooltip_info\',field)}}" cx-prop-call-allowed="false" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}" cx-prop-type="multi_module_lookup" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-lookup-component> </template><template case="activity_mml"> <crux-lookup-component class="dv-hd-multi-mod {{getEmptyFieldValueClass(place,activity_mml_obj.value,ajaxEditMode)}}" id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{activity_mml_obj.field}}" on-before-show-business-card="{{method(\'show_lookup_tooltip_info\',field)}}" cx-prop-value="{{activity_mml_obj.value}}" cx-prop-layout="{{layout_id}}" cx-prop-route-name="crm.tab.module.entity" cx-prop-dynamic-params="[&quot;{{activity_mml_obj.module_name}}&quot;,&quot;{{activity_mml_obj.value.id}}&quot;]" cx-prop-module="{{activity_mml_obj.module_name}}" cx-prop-show-bc="true" cx-prop-call-allowed="false" cx-prop-type="multi_module_lookup" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-lookup-component> </template><template case="territory"> <crm-assign-territory-detail-view seid="{{record.id}}" data-zcqa="{{field.$zcqa.valueZcqa}}" module="{{module}}" is-detail-view-revamp="true" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}"> </crm-assign-territory-detail-view> </template><template case="RRULE"> <crux-text-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{getReadableRecurringPatternForTask(record[field.api_name])}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-text-component> </template><template case="ALARM"> <crux-text-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{getReadableReminderTextForTask(record[field.api_name],record)}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-text-component> </template><template case="remindat"> <crux-date-time-component id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-field="{{field}}" cx-prop-value="{{getCallReminderValue(record[field.api_name])}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-datetime-in-user-pattern="true" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-error-yield="true"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{field_validation}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-date-time-component> </template><template case="multi_reminder"> <crm-reminder-view record="{{record}}" place="{{place}}" remfield="{{field}}" module="{{module}}"></crm-reminder-view> </template><template case="voicenote"> <crux-voicenote-component cx-prop-width="{{if(expHandlers(ajaxEditMode,\'!\'),\'390px\',\'\')}}" id="{{field.$ids.valueId}}" cx-prop-appearance="box" data-zcqa="{{field.$zcqa.valueZcqa}}" cx-prop-zcqa="{{field.$zcqa.valueIputZcqa}}" cx-prop-play-but-zcqa="voicenote_play_{{field.column_name}}" cx-prop-voice-ctrl-zcqa="voicenote_ctrl_{{field.column_name}}" cx-prop-maxlength="{{field.length}}" cx-prop-error-yield="true" cx-prop-field="{{field}}" cx-prop-value="{{record[field.api_name]}}" class="{{getEmptyFieldValueClass(place,record[field.api_name],ajaxEditMode)}}" cx-prop-layout="{{layout_id}}" cx-prop-placeholder="{{getToolTipText(field,field.tooltip,field.tooltip.value)}}" cx-prop-masking-properties="{{cscript_properties[field.api_name].masking_info}}"> <template is="yield" yield-name="errorYield"> <crm-detailview-fields-error is-verify-button="{{if(expHandlers(ajaxEditMode,\'!\'),true,field_validation)}}" message="{{errorMessage}}"></crm-detailview-fields-error> </template> </crux-voicenote-component> </template><template default=""></template></template> <template is="if" value="{{field_validation}}"><template case="true"> <div class="{{concat(\'verify_\',field.$ids.valueId)}} dN verify crm_validation_verify_btn pR pT5 "> <span class="dIB"> <lyte-button data-zcqa="{{concat(\'vR_verify_\',field.$ids.valueId)}}" lt-prop-class="vr_editVerifyBtn" onclick="{{action(&quot;executeFieldValidation&quot;,valId)}}" lt-prop-disabled="{{verifyDisabled}}" lt-prop-size="extra-small"> <template is="registerYield" yield-name="text"> {{getI18n(\'crm.validation.rule.verify\')}} </template> </lyte-button> </span> <template is="if" value="{{expHandlers(verifyText,\'===\',getI18n(\'verified\'))}}"><template case="true"> <div class="successVerified aiCenter dIF vaM"> <crmutil-icon icon-name="tick-filled-md" icon-class="zcicn-tick-filled-md zcicn_green"></crmutil-icon> <span data-zcqa="vr_verifiedText" class="crmGreenColor crm-small-font-size mL4">{{unescape(verifyText)}}</span> </div> </template><template case="false"> <div class="dIB vaM"> <span data-zcqa="vr_verifyingText" class="crm-small-font-size">{{unescape(verifyText)}}</span> </div> </template></template> </div> </template></template> <template is="if" value="{{expHandlers(vr_exec_result,\'&amp;&amp;\',vr_exec_result[field.id])}}"><template case="true"> <span class="crm-validation-rule-error pR dIB"> <crm-validation-rule-error alert-details="{{vr_exec_result}}" field-id="{{field.id}}"></crm-validation-rule-error> </span> </template></template> </div> </template></template></template>',_dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]},{type:"attr",position:[2],attr:{style:{name:"style",dynamicValue:"viewportStyleStr"}}},{type:"text",position:[2,0]},{type:"attr",position:[4]},{type:"if",position:[4],cases:{true:{dynamicNodes:[{type:"text",position:[0,0]}]}},default:{}},{type:"attr",position:[6]},{type:"if",position:[6],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"attr",position:[8]},{type:"if",position:[8],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"componentDynamic",position:[10]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"switch",position:[1,1],cases:{text:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},twitter:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},skype:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,0]},{type:"componentDynamic",position:[1,0,1]}]},{type:"componentDynamic",position:[1]}]},autonumber:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},datetime:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]},date:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},email:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"text",position:[1,1,1,0]},{type:"text",position:[1,3,1,0]},{type:"text",position:[1,3,1,2]},{type:"text",position:[1,3,3,0]},{type:"text",position:[1,3,3,2]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},currency:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},double:{dynamicNodes:[],additional:{next:"decimal"}},decimal:{dynamicNodes:[],additional:{next:"integer"}},integer:{dynamicNodes:[],additional:{next:"bigint"}},bigint:{dynamicNodes:[],additional:{next:"longinteger"}},longinteger:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},boolean:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"registerYield",position:[1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,1,3],dynamicNodes:[{type:"text",position:[1,1,0]},{type:"text",position:[1,1,2]},{type:"text",position:[1,2,1]},{type:"text",position:[1,2,3]}]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1,1,1,0,0]},{type:"text",position:[1,1,1,2]},{type:"text",position:[1,1,3,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3,1]},{type:"registerYield",position:[1,3,1,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1,3,1]},{type:"attr",position:[1,3,3]},{type:"registerYield",position:[1,3,3,1],dynamicNodes:[{type:"text",position:[0]}]},{type:"componentDynamic",position:[1,3,3]},{type:"componentDynamic",position:[1,3]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},picklist:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},multiselectpicklist:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},userlookup:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},ownerlookup:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[3]},{type:"registerYield",position:[3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3]}]},multiuserlookup:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},lookup:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"registerYield",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"text",position:[1,1,1]}]}},default:{}}]},{type:"registerYield",position:[1,5],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},whatId:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},multiselectlookup:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},imageupload:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]},fileupload:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}},default:{}}]},fax_phone:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},phone:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},website:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},textarea:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},richtext:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},layout:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},multi_module_lookup:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},activity_mml:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},territory:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},RRULE:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},ALARM:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},remindat:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}]},multi_reminder:{dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},voicenote:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[1]}],additional:{default:!0}}},default:{dynamicNodes:[]}},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"registerYield",position:[1,1,1,1],dynamicNodes:[{type:"text",position:[1]}]},{type:"componentDynamic",position:[1,1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"text",position:[1,3,0]}]},false:{dynamicNodes:[{type:"text",position:[1,1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,5]},{type:"if",position:[1,5],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}}],_observedAttributes:["lyteViewPort","showUnsubsPopOver","files","optionsForFileUpload","create_record_supported","email_unsubscribed_info","attachmentUrl","is_bc_sec","verifyText","isImageModified","imageUploadTrackingData","visionToolTipForIU","isAccessibilityConfigSupported","wrapperClassImage","chartImageTheme"],data:function(){return{lyteViewPort:Lyte.attr("boolean",{default:!1}),showUnsubsPopOver:Lyte.attr("boolean",{default:!1}),files:Lyte.attr("array",{default:[]}),optionsForFileUpload:Lyte.attr("array",{default:[]}),create_record_supported:Lyte.attr("boolean",{default:!1}),email_unsubscribed_info:Lyte.attr("object"),attachmentUrl:Lyte.attr("object",{default:{url:"/Fileupload"}}),is_bc_sec:Lyte.attr("boolean",{default:!1}),verifyText:Lyte.attr("string",{default:""}),isImageModified:Lyte.attr("boolean",{default:!1}),imageUploadTrackingData:Lyte.attr("array",{default:[]}),visionToolTipForIU:Lyte.attr("string",{default:""}),isAccessibilityConfigSupported:Lyte.attr("boolean",{default:Crm.userDetails.isAccessibilityConfigSupported&&!featuresAvailable.NEXTGENUI_ENABLED}),wrapperClassImage:Lyte.attr("object",{default:{maxHeight:"85%",wrapperClass:"crmImgUploadModal"}}),chartImageTheme:Lyte.attr("object",{default:{count:"var(--linkColor)",size:"var(--linkColor)",list:"var(--linkColor)"}})}},init:function(){var e=[CrmField.UITYPES.FILE_UPLOAD,CrmField.UITYPES.IMAGE_UPLOAD,CrmField.UITYPES.TERRITORY],t=this.getData("field");if(Crm.userDetails.FieldValidationPreference){var i=this.getData("fieldValidationDet");i&&i[t.api_name]&&("view"===this.getData("place")||"business_card"===this.getData("place"))&&(this.setData("field_validation",!0),this.setData("valId",i[t.api_name]))}if((["textarea","richtext"].indexOf(t.component_data_type)>-1||["COMMENTCONTENTS"].indexOf(t.column_name)>-1||e.indexOf(t.ui_type)>-1)&&this.setData("lyteViewPort",!1),"lookup"===t.data_type){this.setData("openLinkTab","sametab"),"right_panel"===this.data.place&&this.setData("openLinkTab","_blank");var o=moduleApiVsNameMapping[t.lookup.module.api_name];this.setData("lookup_module",o);let e=-1===this.quick_create_unsupported_modules.indexOf(o);e=e&&Lyte.Component.registeredHelpers.showAddRecord(o),this.setData("create_record_supported",e)}else if(t.ui_type===CrmField.UITYPES.MULTI_MODULE_LOOK_UP_ENTITY&&this.data.record[t.api_name]){o=moduleApiVsNameMapping[this.data.record[t.api_name].module.api_name];this.setData("lookup_module",o)}if(t.ui_type===CrmField.UITYPES.SERVICE_DURATION&&"Services"===this.data.module&&this.setData("serviceDuration",this.generateServiceDurationFieldPickListOptions()),t.ui_type===CrmField.UITYPES.FILE_UPLOAD&&(this.setOptionsForFileUploadField(this),this.checkIfFileUploadEmpty(t,this.data.record[t.api_name])),"activity_mml"===t.component_data_type&&this.setData("activity_mml_obj",this.getActivityMMLObj()),t.ui_type===CrmField.UITYPES.IMAGE_UPLOAD){this.setData("attachmentUrl",this.setAttachmentsUrl(this.data.module,this.getData("field.id")));let e=this.constructImageDataFromServer(this.data.record[t.api_name],this.data.module,this.data.record.id,this.getData("field.id"),!1);this.setData("imageUploadTrackingData",e),this.setData("visionToolTipForIU",this.setTooltipValue(e))}this.data.meta_info&&this.data.meta_info.ziaOwnerRecommendationEnabled&&8===t.ui_type&&"assigned_by_zia"===this.data.record.$zia_owner_assignment&&this.setData("ziaAssignedOwner",!0),this.fieldHighlightTimeout=null,this.data.meta_info||(this.data.meta_info={}),this.setData("user_timezone",Crm.userDetails.USER_TIME_ZONE);var a=this.getFldViewPortProperties(t,this.data.record,this.data.meta_info.currency_apiname,this.data.place,this.data.module);if(this.setData("viewportvalue",a.value),this.setData("viewportClass",a.classList),this.setData("viewportStyleStr",a.styleStr),"text"===this.data.field.component_data_type){var r={enable:!1};Lyte.registeredMixins["crux-textautocomplete-options"]&&(r=this.getTextAutocompleteOptions({column_name:this.data.field.column_name})),r=JSON.stringify(r),this.setData("autoCompleteOptions",r)}if("MODIFIEDBY"===this.data.field.column_name||"SMCREATORID"===this.data.field.column_name||"RESCHEDULEDBY"===this.data.field.column_name||"CANCELLEDBY"===this.data.field.column_name){var l=Lyte.Component.registeredHelpers.getAffectedTimeValue(this.data.field,this.data.record,this.data.meta_info.fieldColumnNameMap);this.setData("viewportChildValue",$L.moment(l).timezone(Crm.userDetails.USER_TIME_ZONE).i18N("ddd, D MMM YYYY hh:mm A"))}else if("multi_module_lookup"===t.component_data_type)this.setData("viewportNonLinkSecondaryValue"," - "+this.data.record[t.api_name].module.api_name);else if("activity_mml"===t.component_data_type&&this.data.activity_mml_obj&&this.data.activity_mml_obj.value){var n=this.data.activity_mml_obj.value.module.id;this.setData("viewportNonLinkSecondaryValue"," - "+moduleRecordMapping[idModuleMapping[n]].plural_label)}if("email"===t.data_type){let e,i=Lyte.Router.getRouteInstance().currentModel.unsubscribed_emails_info;i&&i.length>0&&i.each((function(i){i.field.api_name===t.api_name&&(e=i)})),e&&this.setData("email_unsubscribed_info",e)}},contTabButtomObserver:function(){var e={};e.top=this.data.cont_tab_buttompos+20,this.setData("cx_prop_boundary",e)}.observes("cont_tab_buttompos").on("init"),lyteViewPortObserver:function(){!this.data.lyteViewPort&&this.setViewPortDebounceTime&&this.setViewPortDebounceTime()}.observes("lyteViewPort"),actions:{openskype:function(e){sE(e)},openQuickCreateForm:function(e){this.openQuickCreatePopup_detailview(this.getData("field"),this.getData("record"),this.getData("meta_info"),this.getData("field").$ids.valueId,"detailviewlyte",e)},setCustomDuration:function(){$("crm-customduration-services").remove(),document.getElementById("serviceDuration").toggle();var e=$("#"+this.data.field.$ids.valueId)[0].component.data;Lyte.Component.render("crm-customduration-services",{serviceDuration:this.data.serviceDuration,dataBind:this.data.record,apiName:this.data.field.api_name,durationCompData:e},"body");var t=$("#customTimepopup")[0].component.data;Lyte.Component.set(t,"ltPropOffset",{top:"0px",left:"center"}),Lyte.Component.set(t,"ltPropShow",!0)},showZiaReasoningCard:function(e){if(this.data.ziaAssignedOwner&&e.fromElement.id)if(this.data.meta_info.zia_suggested_user)this.showZiaReasoningCard(e.fromElement.id);else{var t=Lyte.registeredMixins["zia-insights-utils"],i={keys:"zia_suggested_users_data",include_inner_details:"zia_suggested_users_data.zia_suggested_users.user.name,zia_suggested_users_data.zia_suggested_users.user.role,zia_suggested_users_data.zia_suggested_users.user.profile,zia_suggested_users_data.zia_suggested_users.user.email,zia_suggested_users_data.zia_suggested_users.user.mobile,zia_suggested_users_data.zia_suggested_users.user.phone,zia_suggested_users_data.zia_suggested_users.user.zuid,zia_suggested_users_data.zia_suggested_users.user.image_link"},o=this;t.getInsights(moduleRecordMapping[this.data.module],this.data.record.id,i).then((function(t){o.setData("meta_info.zia_suggested_user",o.constructZiaOwnerRecommendationDetails(t,o.data.record,o.data.module)),o.showZiaReasoningCard(e.fromElement.id)}))}},closeUnsubsPopover:function(){this.setData("showUnsubsPopOver",!1)},proceedResubscription:function(){$L("#"+this.data.field.$ids.valueId)[0].cxProp("value",!1),this.setData("showUnsubsPopOver",!1)},executeFieldValidation:function(e){this.setData({verifyText:I18n.getMsg("crm.validation.rule.verifying3"),verifyDisabled:!0}),Lyte.triggerEvent("detail_view_rules_execution_listener_"+this.getData("unique_listener_id"),{features:["validation_rule"],formRuleId:e})},setReminderList:function(){var e=[],t=this.getData("record"),i=Crm.userDetails.DATE_PATTERN.toUpperCase()+" "+Crm.userDetails.TIME_FORMAT,o=t.Appointment_Start_Time;if(t.Remind_At.forEach((function(t){t.period="days"===t.period?"day":t.period;var a=$L.moment($L.moment(o,i,{i18n:!0})).subtract(t.unit,t.period).format(i);e.push(a)})),0===$L("crm-appointment-reminder").length)Lyte.Component.render("crm-appointment-reminder",{appoReminderPop:!0,reminderArrValue:e},"#iconReminder1");else{var a=$L("#reminderListComp")[0].component.data;Lyte.Component.set(a,"appoReminderPop",!0),Lyte.Component.set(a,"reminderArrValue",e)}},hideReminderList:function(){var e=$L("#reminderListComp")[0].component.data;Lyte.Component.set(e,"appoReminderPop",!1)},showEmailUnsubsInfo:function(e){$L("#bounceicon_"+e+"_hovercard")[0].ltProp("show",!0)},hideEmailUnsubsInfo:function(e){$L("#bounceicon_"+e+"_hovercard")[0].ltProp("show",!1)}},getActivityMMLObj:function(){var e,t={},i=this.data.record,o=this.data.field,a=i.$se_module,r=o.api_name;"Calls"===this.data.module?e=Lyte.Component.registeredHelpers.getWhoWhatValue(i,r):void 0!==i[r]&&((e=objectUtils.cloneObject(i[r])).module={api_name:a,id:moduleRecordMapping[moduleApiVsNameMapping[a]].id}),t.value=e;var l=Object.assign({},o);if(l.data_type="multi_module_lookup",void 0!==e){var n={};n.api_name=e.module.api_name,n.module_name=moduleApiVsNameMapping[n.api_name],n.id=e.module.id,l.multi_module_lookup.modules=[n],t.module_name=n.module_name}return t.field=l,t},showZiaReasoningCard:function(e){var t=$L("crm-zia-reasoning-popover")[0];t&&t.component&&(t.component.setData("originElement","#"+e),t.component.setData("showZORPop",!0))},methods:{dropdownOpening:function(e){var t=$L("crm-detail-view")[0];if(t){var i=t.querySelector(".dv_content_tab_body");e?(i.classList.remove("oA"),i.classList.add("oH")):(i.classList.remove("oH"),i.classList.add("oA"))}},skypeValueClickHandler:function(e){return this.$node.querySelector("#skypeIconAnchor").click(),e.stopPropagation(),!1},fetchModuleData:function(e,t){return this.fetchLookupModuleInfo(e,t)},fetchRecords:function(e,t,i){return this.fetchLookupRecords(e,t,i)},lookupClickHandler:function(){let e=featuresAvailable.PUBLIC_FIELD&&this.data.lookup_module&&moduleRecordMapping[this.data.lookup_module]&&moduleRecordMapping[this.data.lookup_module].public_fields_configured;return!("right_panel"!==this.data.place&&!e)||(this.data.record[this.data.field.api_name]&&Lyte.Router.transitionTo({route:"crm.tab.module.entity",dynamicParams:[this.data.lookup_module,this.data.record[this.data.field.api_name].id]}),!1)},onLookupRecordSelect:function(e){this.performRecordSelect(e,this.getData("field"),"detail_view",this.getData("unique_listener_id"))},onUserValueSelect:function(e){this.performUserSelect(e,this.getData("field"),"detail_view",this.getData("unique_listener_id"))},show_lookup_tooltip_info:function(e){return!!e&&this.show_lookup_bc_tooltip_info(this.getData("record"),e,e.$ids.valueId,this.getData("module"))},clickOnShowLess:function(e){"textarea"===e.component_data_type&&this.$node.querySelector("crux-text-area-component").component.setData({cxPropHeight:"",cxPropLineClamp:7});var t=$L(".dv_content_tab_body"),i=$L(this.$node),o=t.scrollTop()-i.height()+i.offset().top-200;t.scrollTop(o)},clickOnMaximizeSave:function(e){var t=this.$node.closest("crm-detailview-section");t.component.actions.saveAjaxEdit.call(t,e)},clickOnMaximizeClose:function(e){var t=this.$node.closest("crm-detailview-section");t.component.actions.cancelAjaxEdit.call(t,e,t.querySelector("#cancelAjaxEdit_"+this.data.field.$ids.fldAjxCancelId))},updateBooleanValue:function(e){if("EMAILOPTOUT"===e.column_name&&void 0!==event&&"LYTE-CHECKBOX"===event.target._callee.tagName){var t=this.getData("record");if(t.Unsubscribed_Mode&&t.Unsubscribed_Mode!==I18n.getMsg("Manual"))return this.setData("showUnsubsPopOver",!0),!1}return!0},onPreviewClose:function(e){this.getData("isImageModified")&&$("#ajaxEdit_"+e.column_name).click()},onCropSuccessDV:function(e,t){return this.setData("isImageModified",!0),this.onCropSuccess(e,t)},onImageChangeDV:function(){this.setData("isImageModified",!0)},makeRequestForThumbnailDV:function(e,t){let i=document.querySelector("crm-detailview-content").component.getData("getThumbnailDataMap");this.updateThumbnailBasedOnSrc(i,t,e,this.getData("record").id,!1,"DVLyte")},onValidationImageClick:function(e,t){return this.openFeaturePopup(t.id,t.state,!1,!0,e.id,module,this.getData("record").id,e.api_name)},requestChangeData:function(e,t,i){let o={};if(i&&i.lookup&&i.lookup.query_details&&i.lookup.query_details.criteria&&this.isDynamicCriteriaInvolved(i.lookup.query_details.criteria)){let t=store.peekRecord("module",moduleRecordMapping[this.data.module].id).fields;this.iterateGroupFieldsAndGetFieldValuesFromRecordData(i.lookup.query_details.criteria,this.data.record,o,t,this.data.module,void 0,void 0),o.id=this.data.record.id,e.query_id||(e.query_id=i.lookup.query_details.query_id),e.child_data=o}},showBusiessCardLookup:function(e,t){let i=Object.values(moduleRecordMapping).find((t=>t.id===e)),o=void 0!==i?i.api_name:null;return new Promise(async function(i,a){store.modelFor(e)||await store.findRecord("module",e,{},!1,!0,{getFields:!0,allowMultiple:!0}),store.findRecord(e,t,{approved:"both",apply_fields:"business_card",include:"fields",fields:"Record_Image"},!1,!1,{businessCard:!0}).then(async function(t){if(void 0===t.fields){0===(await Lyte.registeredMixins["crm-view-utils"].getPublicFields(o)).length&&a()}i({record:t[e][0],bcFields:t.fields})}.bind(this),async function(){0===(await Lyte.registeredMixins["crm-view-utils"].getPublicFields(o)).length?i():a()}.bind(this))}.bind(this))}},booleanComponentObserver:function(){if("boolean"===this.data.field.component_data_type)if(this.data.ajaxEditMode){function e(e,t){t?$L(e.closest(".dv_boolean_comp_wrap")).addClass("crmFormFieldFocus"):$L(e.closest(".dv_boolean_comp_wrap")).removeClass("crmFormFieldFocus")}this.booleanCompInput=this.$node.querySelector("input"),this._booleanCompFocusEvent||e(this.booleanCompInput,!0),this._booleanCompFocusEvent=()=>e(this.booleanCompInput,!0),this._booleanCompBlurEvent=()=>e(this.booleanCompInput),this.booleanCompInput.addEventListener("focus",this._booleanCompFocusEvent),this.booleanCompInput.addEventListener("blur",this._booleanCompBlurEvent)}else this.booleanCompInput.removeEventListener("focus",this._booleanCompFocusEvent),this.booleanCompInput.removeEventListener("blur",this._booleanCompBlurEvent),this._booleanCompFocusEvent=""}.observes("ajaxEditMode")},{mixins:["crm-lookup-mixin","crm-lookup-filter-mixin","crm-entity-utils","crm-lookup-parser-mixin","crux-textautocomplete-options","crm-create-mixin","crm-uploadfields-mixin","crm-services-mixin","crm-appointments-mixin","crm-detailview-common-utils"]}),Lyte.Component.register("crm-detailview-fields-error",{_template:'<template tag-name="crm-detailview-fields-error"> <div id="{{component_message.contentId}}" class="cxErrorMsgMultiLines {{if(isVerifyButton,\'mB4\',\'pA\')}} zi5"> <span class="cruxErrMsg cruxErrorMsgDesc bg_white pL1 pR1 boxBB wbBreakWord">{{unescape(component_message.message)}} <template is="if" value="{{component_message.duplicateFdetails}}"><template case="true"><template is="if" value="{{expHandlers(component_message.more_records,\'&amp;&amp;\',component_message.duplicateFdetails.isMergeAbleMod)}}"><template case="true"> <link-to lt-prop-rel="noopener noreferrer" data-zcqa="viewExistingRecord" lt-prop-target="_blank" lt-prop-route="crm.tab.module.entity.find-and-merge" lt-prop-qp="{&quot;findDupFldName&quot; : &quot;{{component_message.duplicateFdetails.dupColName}}&quot;}" lt-prop-dp="[&quot;{{component_message.duplicateFdetails.module_name}}&quot;, &quot;{{component_message.duplicateFdetails.id}}&quot;]">{{getI18n(\'crm.label.module.merge\',component_message.duplicateFdetails.modPluLabel)}}</link-to> </template><template case="false"> <link-to lt-prop-rel="noopener noreferrer" lt-prop-id="{{concat(\'viewExistingRecordQuickInfo\',component_message.duplicateFdetails.key)}}" onmouseenter="{{action(&quot;showDuplicateRecordDetail&quot;,this)}}" onmouseleave="{{action(&quot;hideDuplicateRecordDetail&quot;,event,this)}}" data-zcqa="viewExistingRecord" lt-prop-target="_blank" lt-prop-route="crm.tab.module.entity.detail" lt-prop-dp="[&quot;{{component_message.duplicateFdetails.module_name}}&quot;, &quot;{{component_message.duplicateFdetails.id}}&quot;]">{{getI18n("crm.view.record",component_message.duplicateFdetails.modLabel)}}</link-to> </template></template> </template></template> <template is="if" value="{{expHandlers(component_message.isInvalidLookup,\'&amp;&amp;\',create_record_supported)}}"><template case="true"> <span data-zcqa="AddNewRecord_errorcase" id="lookupFldId_{{field.id}}_error" class="crmLinkColor" onclick="{{action(&quot;openQuickCreateForm&quot;)}}">{{getI18n(\'crm.label.create.new\')}} {{getModuleSingularLabelbyApiName(field.lookup.module.api_name)}}</span> </template></template> </span> </div> </template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"attr",position:[1,1,2]},{type:"if",position:[1,1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,1,4]},{type:"if",position:[1,1,4],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"text",position:[1,2]}]}},default:{}}],_observedAttributes:["isVerifyButton"],data:function(){return{isVerifyButton:Lyte.attr("boolean",{default:!1})}},messageObserver:function(){this.setData("component_message",this.getData("message"));var e=this.getData("component_message");if(validationUtils.isJson(e)){var t=JSON.parse(e);t.message?this.setData("component_message",t):this.setData("component_message",{message:t})}else this.setData("component_message",{message:e});if(this.data.field&&"lookup"===this.data.field.data_type){var i=moduleApiVsNameMapping[this.data.field.lookup.module.api_name];this.setData("lookup_module",i),this.setData("create_record_supported",-1===this.quick_create_unsupported_modules.indexOf(i))}}.observes("message").on("init"),actions:{showDuplicateRecordDetail:function(e){var t=networkUtils.returnDependencyFiles(["crm-existing-email-quickinfo.js"],ResourceConstants.CRMClient);t=t.concat(networkUtils.returnDependencyFiles(["crm-existing-email-quickinfo.css"],ResourceConstants.CRMClient)),Lyte.injectResources(t,void 0,function(){var t=this.getData("component_message");if(t.duplicateFdetails&&t.duplicateFdetails.detailsFromserver&&t.duplicateFdetails.detailsFromserver.duplicate_record){var i=t.duplicateFdetails.detailsFromserver.duplicate_record,o=moduleRecordMapping[t.duplicateFdetails.module_name].id,a=store.peekRecord("module",o).display_field,r=store.peekRecord(o,i.id),l="null";r?(l="Full_Name"===a.api_name&&r.Salutation?r.Salutation+" "+r[a.api_name]:r[a.api_name],Crm.showExistingEmailQuickInfo(l,i.Owner.name,i.Owner.zuid,t.duplicateFdetails.modLabel,t.duplicateFdetails.key,e)):store.findRecord(o,i.id,{approved:"both",converted:"both"}).then((function(o){l=o[0]?"Full_Name"===a.api_name&&o[0].Salutation?o[0].Salutation+" "+o[0][a.api_name]:o[0][a.api_name]:l,Crm.showExistingEmailQuickInfo(l,i.Owner.name,i.Owner.zuid,t.duplicateFdetails.modLabel,t.duplicateFdetails.key,e)}),(function(){Crm.showExistingEmailQuickInfo(l,i.Owner.name,i.Owner.zuid,t.duplicateFdetails.modLabel,t.duplicateFdetails.key,e)}))}}.bind(this))},hideDuplicateRecordDetail:function(e){$L("#crmExistingEmailQuickInfoPopover")[0]&&Crm.dontHideQuickInfoPop(e)},openQuickCreateForm:function(){this.openQuickCreatePopup_detailview(this.getData("field"),this.getData("record"),this.getData("meta_info"),this.getData("field").$ids.valueId,"detailviewlyte",!0)}},methods:{}},{mixins:["crm-lookup-mixin","crm-lookup-filter-mixin","crm-entity-utils","crm-lookup-parser-mixin","crm-create-mixin","crm-uploadfields-mixin","crm-services-mixin","crm-appointments-mixin","crm-detailview-common-utils"]}),Lyte.Component.registerHelper("getGdprPhoneconsent",(function(e){return!(e.Data_Processing_Basis_Details&&!e.Data_Processing_Basis_Details.Contact_Through_Phone)})),Lyte.Component.registerHelper("isSurveyPublished",(function(e){return!(e&&e.isSurveyEnabled&&void 0!==e.survey_status&&!e.survey_status)})),Lyte.Component.registerHelper("isSurveyCampaign",(function(e){return!(!e||5!==e.$campaign_type)})),Lyte.Component.registerHelper("isBackstageCampaign",(function(e){var t=((e.Layout?e.Layout.id:moduleRecordMapping.Campaigns&&moduleRecordMapping.Campaigns.layouts?moduleRecordMapping.Campaigns.layouts[0].id:"")?moduleRecordMapping.Campaigns.layouts.filter((function(e){return e.created_for})):[]).map((function(e){if(e.created_for&&(e.status>=0||"active"===e.status))return e.created_for}));return!(!e||7!==e.$campaign_type||!t.includes("backstage"))})),Lyte.Component.registerHelper("isCampaignStripNeeded",(function(e){return!Crm.userDetails.CLIENT_ACCOUNT&&-1!==[0,1,2,3,4,5,7].indexOf(e.$campaign_type)})),Lyte.Component.registerHelper("isZohoCampaign",(function(e){return-1!==[1,2,3,6,8].indexOf(e.$campaign_type)})),Lyte.Component.registerHelper("getMXNFieldLabel",(function(e){var t=e.api_name;return e.multiselectlookup&&e.multiselectlookup.connectedlookup_apiname&&(t=e.multiselectlookup.connectedlookup_apiname),t})),Lyte.Component.registerHelper("getLastUpdatedInfo",(function(e,t,i){if(i&&(t.LASTACTIVITYTIME||t.MODIFIEDTIME)&&"review_process_pending"!==e.$approval_state&&"review_process_rejected"!==e.$approval_state)return I18n.getMsg("crm.calendar.lastsyncat")+" : "+I18n.getMsg("crm.general.a.while.ago");var o=t.LASTACTIVITYTIME&&e[t.LASTACTIVITYTIME[1]]?"LASTACTIVITYTIME":"MODIFIEDTIME";if(t[o]&&e[t[o][1]]&&"review_process_pending"!==e.$approval_state&&"review_process_rejected"!==e.$approval_state){var a=$L.moment().toDate(),r=$L.moment(e._$.original[t[o][1]]).toDate(),l=parseInt((a-r)/864e5),n=I18n.getMsg("crm.calendar.lastsyncat")+" : ";return 0===l?(r=r=$L.moment(e._$.original[t[o][1]]).toDate(),n+=Utils.getTimeInUserFormat(r,!0)):n+=I18n.getMsg("crm.label.days.ago.withDays",l),n}})),Lyte.Component.registerHelper("getAffectedTimeValue",(function(e,t,i){var o;switch(e.column_name){case"MODIFIEDBY":o="MODIFIEDTIME";break;case"SMCREATORID":o="CREATEDTIME";break;case"RESCHEDULEDBY":o="RESCHEDULEDTIME";break;case"CANCELLEDBY":o="CANCELLEDTIME";break;default:o=void 0}if(o&&t[e.api_name]&&t[i[o][1]])return t._$.original[i[o][1]]})),Lyte.Component.registerHelper("getEmptyFieldValueClass",(function(e,t,i,o,a){return Lyte.Component.registeredHelpers.isFormulaBooleanReturnTypeField(o)&&!1===t||o&&"LOCATION"===o.column_name&&a&&a.$meeting_details&&a.$meeting_details.tool_name||i||!(!t&&0!==t||t instanceof Array&&!t.length)||"business_card"!==e&&"view"!==e?"":"zcicn-minimize-window-empty zI3 zcicn-cssIcons zcicn_grey_mask dv_noDataSign pA"})),Lyte.Component.registerHelper("getFieldLabelForDV",(function(e,t,i){if("LASTNAME"===e.column_name&&("Leads"===t||"Contacts"===t)){var o=store.peekRecord("field",i.FULLNAME[0]);if(o)return o.field_label}return"CONTACTID"===e.column_name&&"Calls"===t?I18n.getMsg("crm.activities.call.label.fromto"):e.field_label})),Lyte.Component.registerHelper("showBooleanToolTip",(function(e,t){return!("EMAILOPTOUT"!==t.column_name||!e[t.api_name])})),Lyte.Component.registerHelper("getFieldViewValue",(function(e,t,i,o){var a="";switch(e.data_type){case"text":if(o&&i&&("Leads"===i||"Contacts"===i)&&"LASTNAME"===e.column_name){var r=Crm.userDetails.NAME_FORMAT;r=r.split(",");var l=[];r.forEach((function(e){switch("Salutation"!==e&&(e=e.replace(" ","_")),e){case"Salutation":e="Salutation";break;case"Last Name":e="Last_Name";break;case"First Name":e="First_Name"}t[e]&&l.push(t[e])})),a=l.join(" ")}else a="Events"===i&&"LOCATION"===e.column_name&&t.$meeting_details&&t.$meeting_details.tool_name?I18n.getMsg("crm.event.meeting.online.poweredby",Events.displayToolName[t.$meeting_details.tool_name]):t[e.api_name];break;case"currency":a=t.$formatted_currency?t.$formatted_currency[e.api_name]:t[e.api_name];break;case"double":a=t[e.api_name];break;case"lookup":if("Calls"===i&&"CONTACTID"===e.column_name){a=Lyte.Component.registeredHelpers.getWhoWhatValue(t,"Who_Id");break}default:a=t[e.api_name]}return void 0===a&&(a=""),a})),Lyte.Component.registerHelper("getFormattedValueForCrux",(function(e,t,i){switch(e.component_data_type){case"multiselectpicklist":if(!t)return t;if(96===e.ui_type){for(var o=[],a=i._$.original[e.api_name],r=a.length,l=0;l<r;l++)a[l].value&&o.push(a[l].value);return o}return i._$.original[e.api_name];case"phone":case"fax_phone":return t?i._$.original[e.api_name]:t}return t})),Lyte.Component.registerHelper("needToShowHpen",(function(e,t,i){return 1!==t.length&&e+1===t.length&&""!==Lyte.Component.registeredHelpers.getFieldViewValue(t[e],i)})),Lyte.Component.registerHelper("getTitleBoldClass",(function(e){return 0===e?"crm-font-bold crm-heading-font-size":"crm-subheading-font-size"})),Lyte.Component.registerHelper("getForeCastTypeClassByProbability",(function(e){if(void 0!==e)return 100===e?"zcicncss-dealwon zcicn-cssIcons zcicn_green_mask mR10":0===e?"zcicncss-deallost zcicn-cssIcons zcicn_red_mask mR10":"zcicncss-dealsummary zcicn-cssIcons zcicn_grey_mask mR10"})),Lyte.Component.registerHelper("getShowHideClassForLR",(function(e,t,i,o,a){if(!t&&!a||!e||!o)return"";if("field"===o){if(t&&t.LRfieldvsMandate&&t.LRfieldvsMandate[e.api_name]&&!e[i].isLayoutConfigLevelMandatory&&(e[i].required="true"===t.LRfieldvsMandate[e.api_name]),t&&t.LRfieldvsShowType&&"hide"===t.LRfieldvsShowType[e.api_name])return"hide";if(a&&a[e.api_name])return"hide"===a[e.api_name].visible?"hide":""}else if("section"===o){var r=Lyte.registeredMixins["crm-detailview-parser"].getSectionNameWithoutSpace(e.api_name);if(t&&t.LRsectionvsShowType&&"hide"===t.LRsectionvsShowType[r])return"hide";if(t&&t.LRfieldvsShowType&&e.detailviewColumns){var l=!0;if(e.detailviewColumns.forEach((function(e){l&&e.forEach((function(e){t.LRfieldvsShowType[e.api_name]&&"hide"===t.LRfieldvsShowType[e.api_name]||(l=!1)}))})),l)return"hide"}if(a&&e.detailviewColumns){l=!0;if(e.detailviewColumns.forEach((function(e){l&&e.forEach((function(e){a[e.api_name]&&"hide"===a[e.api_name].visible||(l=!1)}))})),l)return"hide"}}else if("subform"===o){var n=e.subform_apiname?e.subform_apiname:e.fields.filterBy({ui_type:500})[0].api_name;if("hide"===t.LRsubformvsShowType[n])return"hide"}return""})),Lyte.Component.registerHelper("canShowManAsterixForField",(function(e,t){var i=!1;return Crm.userDetails.DV_MANDATORY_FIELD_ASTERIX_SYMBOL&&!(i=!0===e.required)&&t&&t.LRfieldvsMandate&&t.LRfieldvsMandate[e.api_name]&&(i="true"===t.LRfieldvsMandate[e.api_name]),i})),Lyte.Component.registerHelper("getReviewIconClass",(function(e,t){return t||void 0===e.allFieldIndexing?"":"data-rpicon"+e.allFieldIndexing+" RPfld RPfldRow"})),Lyte.Component.registerHelper("getReviewIconClassForSubform",(function(e,t,i,o){e.subform&&500!==e.ui_type&&116!==e.ui_type&&e.ui_type;return e.review_status?o[e.id]:""})),Lyte.Component.registerHelper("getReviewFieldDetails",(function(e,t){var i={};return i.fieldid=e.id,i.colname=e.api_name,t&&(i.issubformfield="true",i.subform_fieldid=e.id,i.subform_colname=e.api_name),i})),Lyte.Component.registerHelper("getDisableClassForActions",(function(e,t){return t&&-1!==t.indexOf(e)||"kiosk"===e&&$L("crm-detailview-actions").e[0].component.getData("isKioskAssocLimitReached")?"true":"false"})),Lyte.Component.registerHelper("getDisplayLabelForAction",(function(e,t,i){return i&&i[t]?i[t]:e})),Lyte.Component.registerHelper("getToolTipText",(function(e){return e.tooltip&&"Static Text"===e.tooltip.name?e.tooltip.value:"multiselectpicklist"===e.component_data_type?I18n.getMsg("None"):void 0})),Lyte.Component.registerHelper("getDefaultCriteria",(function(e,t){const i=t&&t.criteriaObj;return e?i?[...e,...i]:e:i||void 0})),Lyte.Component.registerHelper("getWhoWhatValue",(function(e,t){var i=e.$se_module,o=t;if("Who_Id"===t&&e[t]?i="Contacts":"Who_Id"===t&&e.What_Id&&"Leads"===i?(i="Leads",o="What_Id"):"What_Id"===t&&"Leads"!==i&&e[t]&&(i=e.$se_module),e[o]&&("What_Id"!==t||"Leads"!==i)){var a=objectUtils.cloneObject(e[o]);return a.module={api_name:i,id:moduleRecordMapping[moduleApiVsNameMapping[i]].id},a}})),Lyte.Component.registerHelper("getWhoWhatDynamicParams",(function(e,t){var i=Lyte.Component.registeredHelpers.getWhoWhatValue(e,t);return void 0===i?"":[i.module.api_name,i.id]})),Lyte.Component.registerHelper("isCustomModule",(function(e){return!(!e||!e.startsWith("CustomModule"))})),Lyte.Component.registerHelper("getFieldEditTypeClass",(function(e){switch(e){case"showEdit":return"zcicncss-editFilled zcicn-cssIcons zcicncss13 zcicn_grey_mask";case"showLock":return"zcicncss-lock zcicn-cssIcons";default:return""}})),Lyte.Component.registerHelper("getInfoValueFieldClass",(function(e,t,i,o,a,r,l){var n="cP dv_info_value_field ";if(l&&l.place===r&&l.column_name===e.column_name&&(n+=" dv_value_field_highlight "),"MODIFIEDBY"===e.column_name||"SMCREATORID"===e.column_name||e.column_name===o&&a&&a===r)n+=" dv_transBorder ";else{if("Calls"===t&&"CTIVOICEURL"===e.column_name&&i[e.api_name])return"dv_transBorder "+("CTIVOICEURL"===o?"dv_info_value_field":"aiFlexStart minW400");e.ui_type===CrmField.UITYPES.TERRITORY&&(n+=" dv_assign_territory_fld")}return"picklist"===e.component_data_type?n+="  dv_info_value_picklist ":"imageupload"===e.component_data_type?n+="  dv_info_value_imageupload":"textarea"===e.component_data_type?n+="  dv_info_value_multiline":"multiselectpicklist"===e.component_data_type&&(n+="  dv_info_value_multiselect"),n})),Lyte.Component.registerHelper("getCallReminderValue",(function(e){return Lyte.Transform.datetime.deserialize(e)})),Lyte.Component.registerHelper("getReadableRecurringPatternForTask",(function(e){if(e){var t,i=crmTasks.convertRruleToMap(e.RRULE),o=i.FREQ,a=i.INTERVAL,r=i.COUNT?i.COUNT:void 0,l=i.UNTIL?i.UNTIL:void 0;"-1"===l?t=1:r?t=2:(t=3,l=Utils.getDateInUserDatePattern($L.moment(l).toDate()));var n="";switch(o){case"DAILY":n="1"===a?1===t?I18n.getMsg("crm.recurrence.daily.option1"):2===t?I18n.getMsg("crm.recurrence.daily.option1.end2",r):I18n.getMsg("crm.recurrence.daily.option1.end3",l):1===t?I18n.getMsg("crm.recurrence.daily.custom.option1",a):2===t?I18n.getMsg("crm.recurrence.daily.custom.option1.end2",[a,r]):I18n.getMsg("crm.recurrence.daily.custom.option1.end3",[a,l]);break;case"WEEKLY":var p=[],s=i.BYDAY,d=["SU","MO","TU","WE","TH","FR","SA"];if(s){for(var c=s.split(","),m=c.length,u=0;u<m;u++){var f=d.indexOf(c[u])+1;p.includes(parseInt(f))||p.push(f)}for(var y=[],_=1;_<8;_++)p.includes(_)&&y.push(_)}if(1===y.length&&"1"===a)n=1===t?I18n.getMsg("crm.recurrence.week.option1"):2===t?I18n.getMsg("crm.recurrence.week.option1.end2",r):I18n.getMsg("crm.recurrence.week.option1.end3",l);else{d="";var g=[I18n.getMsg("Sunday"),I18n.getMsg("Monday"),I18n.getMsg("Tuesday"),I18n.getMsg("Wednesday"),I18n.getMsg("Thursday"),I18n.getMsg("Friday"),I18n.getMsg("Saturday")],v=y.length,x=!1,h=[0,0,0,0,0,0,0,0];if(v>4&&7!==v){x=!0;for(var b=0;b<v;b++)h[y[b]-1]=1}if(x)for(var I=0;I<7;I++)h[I]||(d=d+g[I]+",");else for(_=0;_<v;_++)d=d+g[y[_]-1]+",";d=d.substring(0,d.length-1),n="1"===a?x?1===t?I18n.getMsg("crm.recurrence.week.except.custom.option1",d):2===t?I18n.getMsg("crm.recurrence.week.except.custom.option1.end2",[d,r]):I18n.getMsg("crm.recurrence.week.except.custom.option1.end3",[d,l]):1===t?I18n.getMsg("crm.recurrence.week.custom.option1",d):2===t?I18n.getMsg("crm.recurrence.week.custom.option1.end2",[d,r]):I18n.getMsg("crm.recurrence.week.custom.option1.end3",[d,l]):x?1===t?I18n.getMsg("crm.recurrence.week.except.custom.option2",[a,d]):2===t?I18n.getMsg("crm.recurrence.week.except.custom.option2.end2",[a,d,r]):I18n.getMsg("crm.recurrence.week.except.custom.option2.end3",[a,d,l]):1===t?I18n.getMsg("crm.recurrence.week.custom.option2",[a,d]):2===t?I18n.getMsg("crm.recurrence.week.custom.option2.end2",[a,d,r]):I18n.getMsg("crm.recurrence.week.custom.option2.end3",[a,d,l])}break;case"MONTHLY":var k=(L=i.BYMONTHDAY)?1:2;if(1===k&&"1"===a)n=1===t?I18n.getMsg("crm.recurrence.month.option1"):2===t?I18n.getMsg("crm.recurrence.month.option1.end2",r):I18n.getMsg("crm.recurrence.month.option1.end3",l);else if(1===k){var C=L;n=1===t?I18n.getMsg("crm.recurrence.month.custom.option1.recur",[a,C]):2===t?I18n.getMsg("crm.recurrence.month.custom.option1.recur.end2",[a,C,r]):I18n.getMsg("crm.recurrence.month.custom.option1.recur.end3",[a,C,l])}else{var w=i.BYDAY;d=["SU","MO","TU","WE","TH","FR","SA"];L=i.BYSETPOS;var D=d.indexOf(w)+1;L="-1"===L?"5":L;var M=[I18n.getMsg("lowercasefirst"),I18n.getMsg("lowercasesecond"),I18n.getMsg("lowercasethird"),I18n.getMsg("lowercasefourth"),I18n.getMsg("lowercaselast")];g=[I18n.getMsg("Sunday"),I18n.getMsg("Monday"),I18n.getMsg("Tuesday"),I18n.getMsg("Wednesday"),I18n.getMsg("Thursday"),I18n.getMsg("Friday"),I18n.getMsg("Saturday")];n="1"===a?1===t?I18n.getMsg("crm.recurrence.month.custom.option2",[M[L-1],g[D-1]]):2===t?I18n.getMsg("crm.recurrence.month.custom.option2.end2",[M[L-1],g[D-1],r]):I18n.getMsg("crm.recurrence.month.custom.option2.end3",[M[L-1],g[D-1],l]):1===t?I18n.getMsg("crm.recurrence.month.custom.option2.recur",[a,M[L-1],g[D-1]]):2===t?I18n.getMsg("crm.recurrence.month.custom.option2.recur.end2",[a,M[L-1],g[D-1],r]):I18n.getMsg("crm.recurrence.month.custom.option2.recur.end3",[a,M[L-1],g[D-1],l])}break;case"YEARLY":var L=i.BYMONTHDAY,T=parseInt(i.BYMONTH)-1;if(1===(L?1:2))n=1===t?I18n.getMsg("crm.recurrence.yearly.option1"):2===t?I18n.getMsg("crm.recurrence.yearly.option1.end2",r):I18n.getMsg("crm.recurrence.yearly.option1.end3",l);else{w=i.BYDAY;d=["SU","MO","TU","WE","TH","FR","SA"],L=i.BYSETPOS;D=d.indexOf(w)+1,M=[I18n.getMsg("lowercasefirst"),I18n.getMsg("lowercasesecond"),I18n.getMsg("lowercasethird"),I18n.getMsg("lowercasefourth"),I18n.getMsg("lowercaselast")],g=[I18n.getMsg("Sunday"),I18n.getMsg("Monday"),I18n.getMsg("Tuesday"),I18n.getMsg("Wednesday"),I18n.getMsg("Thursday"),I18n.getMsg("Friday"),I18n.getMsg("Saturday")];var E=[I18n.getMsg("January"),I18n.getMsg("February"),I18n.getMsg("March"),I18n.getMsg("April"),I18n.getMsg("May"),I18n.getMsg("June"),I18n.getMsg("July"),I18n.getMsg("August"),I18n.getMsg("September"),I18n.getMsg("October"),I18n.getMsg("November"),I18n.getMsg("December")];L="-1"===L?"5":L,n=1===t?I18n.getMsg("crm.recurrence.yearly.custom.option2",[M[L-1],g[D-1],E[T]]):2===t?I18n.getMsg("crm.recurrence.yearly.custom.option2.end2",[M[L-1],g[D-1],E[T],r]):I18n.getMsg("crm.recurrence.yearly.custom.option2.end3",[M[L-1],g[D-1],E[T],l])}}return n}})),Lyte.Component.registerHelper("getReadableReminderTextForTask",(function(e,t){if(!e||!e.ALARM||"Tasks"!==this.getData("module"))return"";$L.moment().toDate().setHours(0,0,0,0);for(var i={},o=e.ALARM.split(";"),a=o.length,r=0;r<a;r++)i[o[r].split("=")[0]]=o[r].split("=")[1];var l=i.FREQ;l=l&&"NONE"===l?void 0:l;var n,p,s=i.ACTION?i.ACTION:"email",d=i.TRIGGER,c=d;if(d&&d.startsWith("DATE-TIME:"))n=d.length>34?d.substring(10,35):30===d.length?d.substring(10,30):d.substring(10,d.length),n=$L.moment(n).toDate();else{if(!(d&&d.startsWith("-P")&&d.length>=4&&i.TRIGGER_TIME))return"";var m=t._$.original[this.component.data.meta_info.fieldColumnNameMap.DUEDATE[1]];if(""===m)return"";switch((m=$L.moment(m).toDate()).setHours(i.TRIGGER_TIME.split(":")[0]),m.setMinutes(i.TRIGGER_TIME.split(":")[1]),n=m,p=c.substring(2,c.length-1),d.substring(d.length-1)){case"D":p+=" DAYS";break;case"W":p+=" WEEKS";break;case"M":p+=" MONTHS"}}if(n&&p){var u=p;if(u&&-1!==u.indexOf(" ")){var f=parseInt(u.substring(0,u.indexOf(" ")));switch(u.substring(u.indexOf(" ")+1,u.length)){case"DAYS":n.setDate(n.getDate()-f);break;case"WEEKS":n.setDate(n.getDate()-7*f);break;case"MONTHS":n.setMonth(n.getMonth()-f)}}}var y,_="",g="";switch(l){case"DAILY":_=I18n.getMsg("dailyfrom")+" ";break;case"WEEKLY":_=I18n.getMsg("weeklyfrom")+" ";break;case"MONTHLY":_=I18n.getMsg("monthlyfrom")+" ";break;case"YEARLY":_=I18n.getMsg("yearlyfrom")+" "}!s||"POPUP"!==s&&"EMAIL"!==s||("POPUP"===s?y="throughpopup":"EMAIL"!==s&&"EMAIL"!==s||(y="throughemail"),g=" "+I18n.getMsg(y));if(void 0===p)return _+CrmDateUtils.convertDateToUserPattern(n,void 0,!0)+" "+Utils.getTimeInUserFormat(n,!0)+g;var v,x=p.split(" ")[0],h=p.split(" ")[1];switch(v="0"===x?I18n.getMsg("On")+" ":x+" ",h){case"DAYS":v+=I18n.getMsg("crm.schedules.skipfreq.day");break;case"WEEKS":v+=I18n.getMsg("crm.schedules.skipfreq.week");break;case"MONTHS":v+=I18n.getMsg("crm.schedules.skipfreq.month")}return v+=" ","0"!==x&&(v+=I18n.getMsg("before")+" "),_+v+" ("+CrmDateUtils.convertDateToUserPattern(n,void 0,!0)+") "+I18n.getMsg("of.duedate")+" "+I18n.getMsg("crm.label.lowercase.at")+" "+Utils.getTimeInUserFormat(n,!0)+g})),Lyte.Component.registerHelper("addOnlineClass",(function(e,t){return"object"==typeof CrmTracking&&CrmTracking.isEntityOnline(e,t)?"online-entity":""})),Lyte.Component.registerHelper("getRelDetailsImgUrl",(function(e,t,i){return e&&t&&i?Crm.getCrmBasePath()+"/EntityImageAttach.do?action_module="+e+"&entityId="+t+"&actionName=readImage&fileId="+i:"Accounts"===e?networkUtils.getImageUrl("companylogonew.svg",ResourceConstants.CRM):networkUtils.getImageUrl("nophoto.png",ResourceConstants.CRM)})),Lyte.Component.registerHelper("getRelatedRecordFieldIcon",(function(e,t){var i={};switch(e){case"phoneicon":i={name:"phone-green-filled",class:"zcicn-phone-green-filled"};break;case"mobileicon":i={name:"call-blue-filled",class:"zcicn-call-blue-filled zcicn16"};break;case"websiteicon":i={name:"link",class:"zcicn-link zcicn-link-blue-filled"};break;case"dobicon":i={name:"gift",class:"zcicn-gift"};break;case"locationicon":i={name:"location-green-filled",class:"zcicn-location-green-filled"}}return!t||i[t]})),Lyte.Component.registerHelper("getFieldHighlightClass",(function(e,t){return e||t&&t>0?"wfFieldHighlight":""})),Lyte.Component.registerHelper("getFieldSingleColClass",(function(e){let t=Lyte.Router.getRouteInstance().currentModel;return 1!==e||t&&t.show_right_panel&&t.show_cv_left_panel||!t||Lyte.Component.registeredHelpers.isRequesterTeamModule(t.module)?"":"dv_single_col_value"})),Lyte.Component.registerHelper("getSingleColClass",(function(e){let t=Lyte.Router.getRouteInstance().currentModel;return 1!==e||t&&t.show_right_panel&&t.show_cv_left_panel?"dv_field_column":"dv_field_single_column"})),Lyte.Component.registerHelper("addHideClassForEmailBlock",(function(e){let t=Lyte.Router.getRouteInstance().currentModel,i=t?t.blocked_info:null;if(i&&i.data[0]&&i.data[0].features_info&&i.data[0].features_info[0]&&i.data[0].features_info[0].details){let t=i.data[0].features_info[0].details;for(var o=t.length,a=0;a<o;a++)if(t[a].field.api_name===e.api_name)return""}return"hide"})),Lyte.Component.registerHelper("addFlexClassForEmailFields",(function(e,t){return t||"Email"!==e&&"Secondary_Email"!==e?"":"flexAlignCenter email_block_field"})),Lyte.Component.registerHelper("getSubformFieldId",(function(e){var t=e.fields.filterBy({ui_type:500})[0];return t&&t.id})),Lyte.Component.registerHelper("isSubformViewable",(function(e){if(!Crm.userDetails.SUBFORM_PERMISSIONS)return!0;var t=e.fields.filterBy({ui_type:500})[0];return!(!t||!t.subform)&&store.peekRecord("module",t.subform.id).viewable})),Lyte.Component.registerHelper("backTooltip",(function(){var e,t=history.state.backOneLevel?history.state.backOneLevel:history.state.data.backOneLevel;return t&&t.historyIndex&&(e=Crm.newHistoryArr[t.historyIndex]?Crm.newHistoryArr[t.historyIndex].toolTip:""),e=e?I18n.getMsg("BackButton.back.to.name",e):I18n.getMsg("BackButton.back"),revertSplChrs(e)})),Lyte.Component.registerHelper("isDarkBackground",(function(e){return"black"===getPickListFontColor(e)})),Lyte.Component.registerHelper("isFormulaBooleanReturnTypeField",(function(e){return!!(e&&e.formula&&e.formula.return_type&&"boolean"===e.formula.return_type)})),Lyte.Component.registerHelper("isDynamicCriteriaInvolved",(function(e){return!!(e&&e.lookup&&e.lookup.query_details&&e.lookup.query_details.criteria&&Lyte.registeredMixins["crm-lookup-filter-mixin"].isDynamicCriteriaInvolved(e.lookup.query_details.criteria))})),Lyte.Mixin.register("crm-lookup-mixin",{quick_create_unsupported_modules:["Quotes","SalesOrders","PurchaseOrders","Invoices","PriceBooks"],fetchLookupModuleInfo:function(e,t){var i=this,o=this.getData("lookupInfo");return o||(o={}),o.moduleInfo=e.lookup.module,t||(t=o.moduleInfo.id),store.findRecord("module",t,{include:"custom_view,business_card_fields,layouts"}).then((function(e){return i.setData("lookup_module_meta",e),e[0]}))},fetchLookupRecords:async function(e,t,i){let o;var a,r=!1;if(CScriptLib){const t=this.getData("cscript_properties");o=t&&t[e.api_name]&&t[e.api_name].criteria}if("Reporting_To"===e.api_name){var l=this.getData("record"),n=l.id,p=l.Account_Name.id;void 0===i.filters&&(i.filters="(Account_Name:equals:"+p+")and(id:not_equal:"+n+")")}e.lookup&&e.lookup.module&&"Products"===e.lookup.module.api_name&&(r=!0);var s=!!(i.filters||o||r),d=store.peekRecord("field",e.id);if($L("#lookupFldId_"+e.id).closest("lyte-drop-box").removeClass("dNImp"),s){if((a={}).from="Lookup",a.type="Search",a.criteria=i.filters,delete i.filters,d.lookup&&d.lookup.query_details&&d.lookup.query_details.query_id&&(i.query_id=d.lookup.query_details.query_id),"Parent_Account"===d.api_name){var c="(id:not_equal:"+this.getData("record").id+")";a.criteria="("+a.criteria+"and"+c+")"}if(r){var m="(Product_Active:equals:true)";a.criteria?a.criteria="("+a.criteria+"and"+m+")":a.criteria=m}o&&(a.criteria=a.criteria?`(${a.criteria}and${o})`:o)}else i=await this.getactiveProducts(i,e.id),"Parent_Account"===d.api_name&&(i.filters={field:{api_name:"id"},comparator:"not_equal",value:[this.getData("record").id]});return i.approved="both",i.approval_state="approved,approval_process_pending,approval_process_rejected",new Promise((function(e,o){store.findAll(t,i,void 0,void 0,a).then((function(t){e(t)}),(function(e){"NO_PERMISSION"===JSON.parse(e.response).code&&renderingUtils.displayPermissionDenied(),o()}))}))},openQuickCreatePopup_detailview:function(e,t,i,o,a,r){var l=document.querySelector("crux-lookup-component[id='"+o+"']"),n=l.component,p=l.querySelector("#inputId").value;n.setData("tempClose",!0),this.$node.querySelector(n.lookupModalName)?n.close():$L("#lookupFldId_"+e.id).closest("lyte-drop-box").addClass("dNImp");var s="",d=moduleApiVsNameMapping[e.lookup.module.api_name],c=o,m=o,u=d;s=Crm.getCrmBasePath()+"/QuickCreateAction.do?module="+$ESAPI.encoder().encodeForURL(d)+"&searchmodule="+$ESAPI.encoder().encodeForURL(d)+"&fldName="+$ESAPI.encoder().encodeForURL(c)+"&fldId="+$ESAPI.encoder().encodeForURL(m)+"&fldLabel="+$ESAPI.encoder().encodeForURL(u)+"&fldValue="+encodeURIComponent(p)+"&frmzc="+!1+"&newModel="+!0,s=networkUtils.getPortalURL(s),i&&t[i.currency_apiname]&&(s=s+"&currencyISOCode="+t[i.currency_apiname].trim()),a&&(s=s+"&targetForm="+a),Crm.userDetails.isLookupAdvancedSearchEnabled&&(s+="&openInAdvSearch=true"),"Reporting_To"===e.api_name&&t.Account_Name.id&&t.Account_Name.name&&(s+="&accountid="+t.Account_Name.id+"&accountname="+encodeURIComponent(t.Account_Name.name)),renderingUtils.hideFreezeLayer();var f=document.getElementById("lookupPopup");f.classList.remove("zcrm-show"),f.style.top="0px",f.style.display="none",f.style.width="",r?($("#searchCreatePopup").addClass("fromAutoComplete"),commonUtils.openCustomLookup(s,void 0,"searchCreatePopup",void 0,void 0,void 0,void 0,void 0,(function(){if(p){var e=$("#ac-recordname").children().find("input"),t=e.attr("maxlength");p.length>t&&(p=p.substring(0,t)),e.val(p)}}))):($("#searchCreatePopup").removeClass("fromAutoComplete"),commonUtils.openCustomLookup(s,void 0,"searchCreatePopup")),(void 0===Crm.userDetails.VALIDATIONRULEAVAILABLE||!0===Crm.userDetails.VALIDATIONRULEAVAILABLE&&Crm.userDetails.VRINVOLVEDMODULES.contains(d))&&Crm.downloadValidationRules(s,d)},setValueInLookupCompUsingQCSaveResp:function(e,t,i){if("detailviewlyte"===t){var o=document.querySelector("crux-lookup-component[id='"+e+"']").component,a=validationUtils.isJson(i)?JSON.parse(i).msg:i.msg,r=[];if("string"==typeof a&&a.indexOf(";:;")>-1&&(r=a.split(";:;")),o&&r&&r[1]){var l={id:r[1],name:r[0]},n=JSON.parse(i).isInReview;if(!n&&7!==n)if(o.setData("cxPropValue",JSON.stringify(l)),o.$node.querySelector("#inputId").focus(),o.$node.querySelector("lyte-dropdown").close(),$L("crm-blueprint-exec-popup").is(":visible"))o.$node.closest("crm-blueprint-exec-fields").component.executeMethod("getLookupModuleFieldValues",l);else o.$node.closest("crm-detailview-fields").component.executeMethod("onLookupRecordSelect",l)}}},performUserSelect:function(e,t,i,o){var a=this.getData("meta_info.folFieldDetails");if(e&&a[t.id]&&!0===Crm.userDetails.FIELD_OF_LOOKUP_ENABLED&&!0===Crm.userDetails.FIELD_OF_LOOKUP_AVAIALBLE){var r=this.getData("meta_info.fol_user_module_fields"),l=8===t.ui_type,n=[];(a=a[t.id]).child_fields.forEach((function(e){e.visible&&n.push(e)}));var p={};n&&n.length&&(p.fields=n.mapByKey("association_details").mapByKey("related_field").mapByKey("api_name").join()),store.findRecord("user",e.id,p,void 0,void 0,{usersAPIversion:"v2.2"}).then(function(t){t&&t[0]&&(e=t[0],!r?store.findAll("field",{module:"users"},void 0,void 0,{apiVersion:"2.2"}).then(function(t){this.setData("meta_info.fol_user_module_fields",t),this.populateLookupRecordDetailsIntoRecord(a,this.getData("module"),e,t,void 0,i,o,!0,l)}.bind(this)):this.populateLookupRecordDetailsIntoRecord(a,this.getData("module"),e,r,void 0,i,o,!0,l))}.bind(this))}},performRecordSelect:function(e,t,i,o){var a=this.getData("meta_info.folFieldDetails");if(a||"blueprint"!==i||(a=this.getData("folDetails")),e&&a[t.id]&&!0===Crm.userDetails.FIELD_OF_LOOKUP_ENABLED&&!0===Crm.userDetails.FIELD_OF_LOOKUP_AVAIALBLE){var r=!1,l={};"string"==typeof e?(e=JSON.parse(e),l.lookup_record=store.peekRecord(t.lookup.module.id,e.id)):(r=!0,l.lookup_record=store.findRecord(t.lookup.module.id,e.id,Crm.get_params_for_getRecord()));var n=store.peekRecord("module",t.lookup.module.id);(!n||!n.layouts)&&(l.lookup_moduleInfo=store.findRecord("module",t.lookup.module.id,{include:"custom_view,business_card_fields,layouts"})),Lyte.resolvePromises(l).then(function(e){var l=e.lookup_record;r&&(l=l[0]);var p={};p.layoutInfo=this.initiateLayoutRequestForRecord(l,n,void 0,p),Lyte.resolvePromises(p).then(function(e){this.populateLookupRecordDetailsIntoRecord(a[t.id],this.getData("module"),l,n,e.layoutId,i,o,!1,!1)}.bind(this))}.bind(this))}},populateLookupRecordDetailsIntoRecord:function(e,t,i,o,a,r,l,n,p){if(!this.data.record||!this.data.record.$approval_state||"approval_process_pending"!==this.data.record.$approval_state){var s,d=[],c="",m=[];if(!n)store.peekRecord("layout",a).fields.forEach((function(t){t.visible&&e.parent_fields.contains(t.id)&&d.push(t.id)}));s=n?store.modelFor("user")?store.modelFor("user").fieldList:void 0:store.modelFor(o.id).fieldList;var u=[];e.child_fields.forEach((function(e){(e.visible||"blueprint"===r)&&u.push(e)}));var f=store.modelFor(moduleRecordMapping[t].id).fieldList,y={};if(u.forEach(function(e){var t,a,r,l=f[e.api_name],p=e.association_details.related_field,u=s[p.api_name]?s[p.api_name].type:void 0;if(!u&&n){var _=o.filter((function(e){return e.api_name===p.api_name}))[0];_&&(u=Lyte.registeredMixins["crm-module-mixin"].getfieldattributeType(_))}if(n&&o&&o.length&&p){var g=o.filter((function(e){return e.id===p.id}))[0];if(g&&!g.visible)return}if(d.contains(p.id)||n){if("date"===l.type)if(i[p.api_name]){x=(x=i._$&&i._$.original&&i._$.original[p.api_name]?i._$.original[p.api_name]:i[p.api_name]).replace(/[+-]\d{2}:\d{2}/,"");var v=CrmDateUtils.convertDateToUserPattern(CrmDateUtils.getDateObjectFromString(x,"YYYY-MM-DD"));y[e.api_name]=v||void 0}else y[e.api_name]=void 0;else if("datetime"===l.type)if(i[p.api_name]){var x;x=(x=i._$&&i._$.original&&i._$.original[p.api_name]?i._$.original[p.api_name]:i[p.api_name]).replace(/[+-]\d{2}:\d{2}/,"");var h=this.getDateTimeForForm(new Date(x),!0);y[e.api_name]=h||void 0}else y[e.api_name]=void 0;else if(l.type===u||"object"!==u&&"relation"!==u)if("lookup"===e.data_type&&"object"===u)y[e.api_name]=i[p.api_name];else if("userlookup"===e.data_type&&"object"===u){var b=i[p.api_name];b="deleted"===(b&&store.peekRecord("user",b.id)?store.peekRecord("user",b.id).status:"")?void 0:b,y[e.api_name]=b}else if("multi-picklist"===u&&i[p.api_name]){var I;if("string"==typeof i[p.api_name]&&-1===i[p.api_name].indexOf(";")){var k=JSON.parse(i[p.api_name]);I=k&&k.length?constructMultiSelString(k):""}else"string"!=typeof i[p.api_name]&&i[p.api_name].length?(t=i[p.api_name],a="",r=t?t.length:0,t.forEach((function(e,t){a+=e+(t!==r-1?";":"")})),I=a):I=i[p.api_name];y[e.api_name]=I}else if("currency"===l.fieldType&&i&&i[p.api_name])if(this.data.record.Currency&&i.Currency&&i.Currency!==this.data.record.Currency){var C=this.getuserCurrencydata(this.data.record.Currency),w=i.Exchange_Rate;w=w||Crm.userDetails.CURRENCY_DETAILS[i.Currency].er;var D=this.convertToCurrentCurrency(i[p.api_name],w,C.er);D=isNaN(D)?i[p.api_name]:D,D=Number(D).toFixed(e.decimal_place),y[e.api_name]=D}else if(!i.Currency&&this.data.record.Currency&&_this.data.record.Currency!==Crm.userDetails.BASE_CURRENCY&&Crm.userDetails.BASE_CURRENCY){C=this.getuserCurrencydata(this.data.record.Currency);var M=this.getuserCurrencydata(Crm.userDetails.BASE_CURRENCY);D=this.convertToCurrentCurrency(i[p.api_name],M.er,C.er);D=isNaN(D)?i[p.api_name]:D,D=Number(D).toFixed(e.decimal_place),y[e.api_name]=D}else y[e.api_name]=Number(i[p.api_name]).toFixed(e.decimal_place);else y[e.api_name]=i&&void 0!==i[p.api_name]?i[p.api_name]:void 0;else"string"===l.type?i[p.api_name]&&validationUtils.isNotEmpty(i[p.api_name])?y[e.api_name]=i[p.api_name].name:y[e.api_name]="":void 0===i[p.api_name]&&(y[e.api_name]=i[p.api_name]);250===l.uiType&&i[p.api_name]&&(c+=p.api_name+",",m.push(p.api_name))}}.bind(this)),u.length>0&&("detail_view"===r||"blueprint"===r)){var _=m.length;_>0?(commonUtils.showHideLoadingDiv(!0),c=c.slice(0,-1),store.findAll("dummy",null,!1,!1,{url:"crm/v6/"+moduleApiMapping[o.api_name]+"/"+i.id+"/actions/fetch_full_data?fields="+c}).then((function(e){for(var i=0;i<_;i++){var o=u.filter((function(e){return e.association_details.related_field.api_name===m[i]}))[0].api_name;y[o]=e.data[0][m[i]]}commonUtils.showHideLoadingDiv(!1),"blueprint"===r?Lyte.triggerEvent("bp_setFieldData",{fieldVsValue:y,feature:"field_of_lookup",fromOwnerLookup:p,fieldModuleSelector:this.data.field.related_details?field.related_details.api_name:t}):Lyte.triggerEvent("detail_view_open_fieldEditPopup_listener_"+l,{fieldVsValue:y,feature:"field_of_lookup",fromOwnerLookup:p})}))):"blueprint"===r?Lyte.triggerEvent("bp_setFieldData",{fieldVsValue:y,feature:"field_of_lookup",fromOwnerLookup:p,fieldModuleSelector:this.data.field.related_details?field.related_details.api_name:t}):Lyte.triggerEvent("detail_view_open_fieldEditPopup_listener_"+l,{fieldVsValue:y,feature:"field_of_lookup",fromOwnerLookup:p})}}},show_lookup_bc_tooltip_info:function(e,t,i,o){var a;if("Messages"===o)return Lyte.registeredMixins["crm-msg-common"].showContactDetails(),!1;if("multi_module_lookup"===t.component_data_type)return!0;var r=e[t.api_name];if("Calls"===o&&"activity_mml"===t.component_data_type&&"Who_Id"===t.api_name&&(a=r||"Leads"!==e.$se_module?"Contacts":"Leads",r=r||"Leads"!==e.$se_module?r:e.What_Id),r)if($("#"+i).find("link-to").is(":hover")){var l={};a?l.module=a:"SEID"===t.column_name&&"Activities"===Crm.activityGrp[o]?l.module=e.$se_module:"multi_module_lookup"===t.data_type?l.module=r.module.api_name:l.module=t.lookup.module.api_name,l.id=r.id,l.module=moduleApiVsNameMapping[l.module],setTimeout((function(){var t=$("#"+i).find("link-to");if(t.is(":hover"))if("Calls"!==o||Crm.renderDVLyteFlow("Calls"))crmui.hideTooltip(),crmLookupBusinessCard.getRecordJSon(l.module,l.id,t);else{t.addClass("eidtrueHeader");var a=$L("crm-detailview-header")[0],r=a.component;if(a.querySelector(".bCardPop").ltProp("show",!0),!r.getData("bCard")){var n=r.getData("entityName"),p=n.name;r.setData("bCard",!0);var s=void 0===e.$phone_number||isCallerInfoDisabled?p:p+" ( "+e.$phone_number+" )";Lyte.Component.render("static-businesscard",{module:n.module.api_name,entityId:n.id,headerName:s,highlightedText:e.$phone_number},".bCardPopTempHeader")}}else crmui.hideTooltip()}),500)}else crmui.hideTooltip()}});
